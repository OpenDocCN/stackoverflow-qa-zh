# StackOverflow 问答 10511000-10511999

# c++ - SSE2 整数溢出检查

> ID：10511000
> 
> 赞同：21
> 
> 时间：2012-05-09T06:44:23.033
> 
> 标签：c++, x86, sse, simd, sse2

当使用 SSE2 指令（例如`PADDD`，`_mm_add_epi32`内在指令）时，有没有办法检查是否有任何操作溢出？

我认为在溢出后可能会设置 MXCSR 控制寄存器上的标志，但我没有看到这种情况发生。例如，`_mm_getcsr()`在以下两种情况下打印相同的值 (8064)：

```
#include <iostream>
#include <emmintrin.h>

using namespace std;

void main()
{
    __m128i a = _mm_set_epi32(1, 0, 0, 0);
    __m128i b = _mm_add_epi32(a, a);
    cout << "MXCSR:  " << _mm_getcsr() << endl;
    cout << "Result: " << b.m128i_i32[3] << endl;

    __m128i c = _mm_set_epi32((1<<31)-1, 3, 2, 1);
    __m128i d = _mm_add_epi32(c, c);
    cout << "MXCSR:  " << _mm_getcsr() << endl;
    cout << "Result: " << d.m128i_i32[3] << endl;
} 
```

是否有其他方法可以检查 SSE2 是否溢出？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T11:42:00.460

[这是@hirschhornsalz](https://stackoverflow.com/users/154980/hirschhornsalz) [`sum_and_overflow`函数](https://stackoverflow.com/a/10513134/253056)的一个更有效的版本：

```
void sum_and_overflow(__v4si a, __v4si b, __v4si& sum, __v4si& overflow)
{
   __v4si sa, sb;

    sum = _mm_add_epi32(a, b);                  // calculate sum
    sa = _mm_xor_si128(sum, a);                 // compare sign of sum with sign of a
    sb = _mm_xor_si128(sum, b);                 // compare sign of sum with sign of b
    overflow = _mm_and_si128(sa, sb);           // get overflow in sign bit
    overflow = _mm_srai_epi32(overflow, 31);    // convert to SIMD boolean (-1 == TRUE, 0 == FALSE)
} 
```

[它使用来自Hacker's Delight](https://rads.stackoverflow.com/amzn/click/com/0201914654)第 27 页的溢出检测表达式：

```
sum = a + b;
overflow = (sum ^ a) & (sum ^ b);               // overflow flag in sign bit 
```

请注意，溢出向量将包含更传统的 SIMD 布尔值，即 -1 表示 TRUE（溢出）和 0 表示 FALSE（无溢出）。如果您只需要符号位溢出而其他位“无关紧要”，那么您可以省略函数的最后一行，将 SIMD 指令的数量从 5 减少到 4。

注意：此解决方案以及[它所基于的先前解决方案](https://stackoverflow.com/a/10513134/253056)都是针对有符号整数值的。无符号值的解决方案需要稍微不同的方法（请参阅[@Stephen Canon](https://stackoverflow.com/users/142434/stephen-canon)的[回答](https://stackoverflow.com/a/10571998/253056)）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T09:17:23.393

由于您有 4 次可能的溢出，因此控制寄存器将很快用完位，特别是如果您想要进位、符号等，甚至对于由 16 个字节组成的向量加法 :-)

如果输入符号位都相等并且结果符号位与输入符号位不同，则设置溢出标志。

该函数`sum = a+b`手动计算和溢出。对于每个溢出 0x80000000 都会返回到`overflow`.

```
void sum_and_overflow(__v4si a, __v4si b, __v4si& sum, __v4si& overflow) {
    __v4si signmask = _mm_set1_epi32(0x80000000);
    sum = a+b;
    a &= signmask;
    b &= signmask;
    overflow = sum & signmask;
    overflow = ~(a^b) & (overflow^a); // overflow is 1 if (a==b) and (resultbit has changed)
} 
```

注意：如果您没有 gcc，则必须将`^` `&` `+`运算符替换为适当的 SSE 内在函数，例如`_mm_and_si128()`等`_mm_add_epi32()`。

编辑：我刚刚注意到`and`with mask 当然可以在函数的最后完成，节省了两个`and`操作。但是编译器很可能足够聪明，可以自己完成。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-13T13:07:50.407

我注意到您也要求提供未签名的解决方案；幸运的是，这也很容易：

```
__v4si mask = _mm_set1_epi32(0x80000000);
sum = _mm_add_epi32(a, b);
overflow = _mm_cmpgt_epi32(_mm_xor_si128(mask, a), _mm_xor_si128(mask, sum)); 
```

通常要检测无符号溢出，您只需检查`sum < a`或`sum < b`。但是，SSE 没有无符号比较；`xor`-ing 参数`0x80000000`允许您使用带符号的比较来获得相同的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T08:18:37.937

底层[PADDD](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc223.htm)指令不涉及任何标志。

因此，要对此进行测试，您必须编写额外的代码，具体取决于您想要做什么。

注意：由于缺少 Epi32 内部结构，您有点受阻

# c++ - C++ 变量声明被视为函数声明

> ID：10511003
> 
> 赞同：1
> 
> 时间：2012-05-09T06:44:43.717
> 
> 标签：c++, visual-c++

这个问题是相当理论上的，尽管有趣的是让 MS VS2010 将以下变量声明（内部`main`）视为函数声明：

```
typedef std::shared_ptr<asymm::PrivateKey> PrivateKeyPtr;

...
void main()
{
    ...
    maidsafe::dht::PrivateKeyPtr pk(); // I'm trying to init variable here, though it thinks it's function declaration

    kNode->node()->Store(key, value, "", ttl, pk, std::bind(&StoreCallback, args::_1, key, ttl));
} 
```

它抛出以下异常：

```
Error   5   error C2664: 'maidsafe::dht::Node::Store' : cannot convert parameter 5 from 'maidsafe::dht::PrivateKeyPtr (__cdecl *)(void)' to 'maidsafe::dht::PrivateKeyPtr'  C:\Projects\MaidSafe-DHT\src\maidsafe\dht\demo\demo_main.cc 286 1   KademliaDemo 
```

虽然以下几行就像一个魅力：

```
maidsafe::dht::PrivateKeyPtr pk = maidsafe::dht::PrivateKeyPtr();

kNode->node()->Store(key, value, "", ttl, pk, std::bind(&StoreCallback, args::_1, key, ttl)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:47:46.353

声明它没有`()`：

```
maidsafe::dht::PrivateKeyPtr pk; 
```

不幸的是，对于为您提供未初始化值的原始类型，但在 C++11 中，您可以使用以下值进行初始化`{}`：

```
maidsafe::dht::PrivateKeyPtr pk{}; 
```

有关相关的解析问题，请参阅[c++ most vexing parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。

# clojure - Clojure：ns-resolve -> 获取代理 -> 调用 send 就可以了

> ID：10511004
> 
> 赞同：1
> 
> 时间：2012-05-09T06:44:46.623
> 
> 标签：clojure

最小故障案例：

```
(ns test)

(def a (agent "hello"))

(send a (fn [x] "world")) ; works

(send (ns-resolve 'test 'a) (fn [x] "test")) ; fails 
```

问题：

为什么最后一行失败？

这是代码热加载系统的一部分。我必须使用 ns-resolve。

有没有办法使这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:07:34.173

ns-resolve 返回一个 var，而不是 var（代理）的值。您需要取消引用 var 以获取值：

```
(send (deref (ns-resolve 'test 'a)) (fn [x] "world"))
;; or
(send @(ns-resolve 'test 'a) (fn [x] "world")) 
```

# mysql - 获取包含 null 和 not null 的数据库字段非 null 值

> ID：10511005
> 
> 赞同：0
> 
> 时间：2012-05-09T06:44:50.117
> 
> 标签：mysql, codeigniter

我有一个与 query 相关的问题。我有一张表，其中有一个 hava 这些字段

```
Table : Videos
Fields : id , video_id , video_title_image_id , video_title_image 
```

现在可以选择 video_title_image_id 或 video_title_image 假设一个有这样的记录

```
id     video_id      video_title_image_id video_title_image
1      rSKwjrqBhAA               2               NULL
2      rSKwjrqBhAA              NULL             image1.png  
... 
```

现在我只想选择那些 video_title_image 不为空的我已经做到了

```
select  video_title_image
    from videos
where video_title_image != NULL 
```

但它没有得到任何结果任何替代？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:46:08.700

做这个：

```
select  video_title_image
from videos
where video_title_image is not NULL 
```

比较某些东西`null`会导致`unknown`. 这就是为什么您需要使用`is`运算符来检查`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:53:02.143

嗯，有一些简单的方法，其中一些是这些

```
select  video_title_image
    from videos
where not isnull(video_title_image) 
```

或者

```
select  video_title_image
    from videos
where video_title_image > 0 
```

# html - html5 视频无法在 ipad 上播放

> ID：10511006
> 
> 赞同：11
> 
> 时间：2012-05-09T06:44:52.427
> 
> 标签：html, html5-video

我有一个可以在 ipad 上运行的 html5 视频。控件必须隐藏，用户点击 ipad 时，必须播放 html5 视频。

我正在使用 html5video.js 我在 ipad 上看到的只是海报图像，当我点击 ipad 时，什么也没有发生。下面是我的代码

```
<!doctype html>
<html>
 <head>
   <meta name="viewport" content="width=768px, minimum-scale=1.0, maximum-scale=1.0" />
   <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
   <script src="http://vjs.zencdn.net/c/video.js"></script>

   <script>
    var video = document.getElementById('video');
    video.addEventListener('touchstart',function(){
            video.play();
    },false);
</script>
</head>
<body>
   <video id="video" class="video-js vjs-default-skin" preload="auto" width="620" height="860" poster="img/poster.png" data-setup="{}">
    <source src="video/Motion.mp4" type='video/mp4'>
    </video>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T07:06:40.053

您是否使用正确的 MIME 类型提供视频？Dive Into HTML 5 撰写的出色的[Video On The Web](http://diveintohtml5.info/video.html)文章涵盖了您需要了解的有关提供视频的所有信息。文章底部（过去所有编码帮助）涵盖[了 iPhone 和 iPad 的问题](http://diveintohtml5.info/video.html#ios)以及[对正确 MIME 类型](http://diveintohtml5.info/video.html#video-mime-types)的需求。非常值得一读。

**编辑**

要使用 iOS，`Accept-Ranges: bytes`必须包含 HTTP 响应标头，请参阅：[Safari Web 内容指南 - 配置您的服务器](https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html#//apple_ref/doc/uid/TP40006514-SW6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:24:04.013

试试这个技巧（让用户无法点击屏幕）：

```
document.addEventListener('touchstart', function(event) {

  video.play();

  // They use this first touch/click event for buffering others video.
  // with this trick 

  video2.play();
  video2.pause();

  // After in your program you can call from 'code' play video.
  // Sum of success buffering per one click is 3 ~ 6 ( android or ios ).

}, false); 
```

对我来说，适用于 android 平板电脑三星、iphone 和 ipad 2/3。

**更新 ：**

对于新版本的浏览器，默认情况下也启用了自动播放，您需要将属性静音才能成功。

没有最终的解决方案。例如，mac 上的 firefox 版本 64 不支持，但 linux 上的相同版本支持自动播放。而且这么久...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T19:32:33.197

在我的情况下，MIME 类型是正确的，但我的服务器不允许客户端请求带有 Range HTTP 标头的部分文件。因此，当您请求该 mp4 文件时，服务器必须发送“Accept-Ranges: bytes”，如果 iPad 被迫完全下载该文件，它将拒绝下载该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-06T16:29:54.323

我有同样的问题。该视频不仅在 iPad 和 iPhone4 上播放。没有任何效果。最后我发现我的 .mp4 文件格式错误。我没有创建那个文件。在我再次将其转换为 mp4 格式后，它就可以工作了。

# asp.net - 虚拟路径改变

> ID：10511008
> 
> 赞同：0
> 
> 时间：2012-05-09T06:44:54.660
> 
> 标签：asp.net

我想更改保存在 asp.net 文件夹中的文件的虚拟路径（路径超出项目意味着本地系统或服务器。）。

代码是

```
DataTable dtFiles =  
    GetFilesInDirectory(HttpContext.Current.Server.MapPath(UPLOADFOLDER));
gv.DataSource = dtFiles;
gv.DataBind();

if (dtFiles != null && dtFiles.Rows.Count > 0)
{
    double totalSize = Convert.ToDouble(dtFiles.Compute("SUM(Size)", ""));
    if (totalSize > 0) lblTotalSize.Text = CalculateFileSize(totalSize);
}

private static string UPLOADFOLDER = "D:/Uploads"; 
```

并且错误显示“D:/Uploads 不是有效的虚拟路径。”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:59:12.527

如果要获取目录中的文件并且知道完整路径，则无需使用`Server.MapPath()`. 只需使用路径。

顺便说一句，您的代码中的路径分隔符不正确。字符串`"D:/Uploads"`应该是`@"D:\Uploads"`（注意前面的[@ 符号](https://stackoverflow.com/questions/5179389/at-sign-in-file-path-string)表示应该按字面意思处理而不是转义的字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:59:00.527

当然。您告诉您的服务器映射完全脱离 IIS 的路径。它应该怎么做？如果您使用的是 Web 应用程序，请尝试完全避免此类想法。尽管有可能，但由于您可能会遇到安全问题，这不是一个好主意。

# c++ - C++ 地图 初始化

> ID：10511009
> 
> 赞同：4
> 
> 时间：2012-05-09T06:44:55.700
> 
> 标签：c++, stl, map, variable-assignment

我正在阅读“Ivor Horton 的 Visual C++ 2010 编程入门”，我在第 10 章——标准模板库。我的问题是地图容器`map<Person, string> mapname`。这本书向我展示了许多向其中添加元素的方法，例如使用 和稍后`pair<K, T>`使用该函数，以及. 但突然间，他引入了一种元素添加技术，用于以下代码：`make_pair()``mapname.insert(pair)`

```
int main()
{
    std::map<string, int> words
    cout << "Enter some text and press Enter followed by Ctrl+Z then Enter to end:"
        << endl << endl;

    std::istream_iterator<string> begin(cin);
    std::istream_iterator<string> end;

    while(being != end)   // iterate over words in the stream
        //PROBLEM WITH THIS LINE:
        words[*begin++]++;  // Increment and store a word count

    //there are still more but irrelevant to this question)
} 
```

指示的行是我的问题。我知道那`words`是地图，但我从未见过这样的初始化。以及随着它的增加而发生的事情。我相信 Ivor Horton 未能进一步阐述这一点，或者至少他应该给出足够大的介绍，不会让像我这样的菜鸟感到惊讶。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:53:28.987

你有这样一张地图：

```
sts::map<std::string, int> m; 
```

访问运算符`[key]`为您提供对使用该键存储的元素的引用，或者如果它不存在则插入一个。所以对于一张空地图，这个

```
m["hello"]; 
```

在映射中插入一个条目，键为“Hello”，值为 0。它还返回对该值的引用。所以你可以直接增加它：

```
m["Bye"]++; 
```

将在键“Bye”下插入一个值 0 并将其递增 1，或者将现有值递增 1。

`[]`至于运营商内部发生的事情，

```
*begin++ 
```

是一种在增量`istream_iterator`之前增加和取消引用值的方法：

```
begin++; 
```

递增`begin`并返回递增前的值

```
*someIterator 
```

取消引用迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:58:35.407

他同时做两件事，而且通常比他需要的聪明。

1.  他正在获取迭代器指向的值，然后递增迭代器。所以，解释`*begin++`为`*(begin++)`。但是请注意，它是一个后增量，因此增量发生在取消引用之后。

2.  他正在增加地图中给定键的值。当您取消引用迭代器时，您会得到一个字符串。此字符串用作`words`地图的键，其值递增。

分布在更多行上，它看起来像这样：

```
std::string x = *begin;
begin++;
words[x] += 1; 
```

# c# - 配置用于 WCF 的 XmlSerializer

> ID：10511018
> 
> 赞同：1
> 
> 时间：2012-05-09T06:45:05.767
> 
> 标签：c#, .net, wcf, soap, xml-serialization

我们从客户那里得到了一份文档，指定我们开发的 WCF 服务应该返回如下响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:hsdq="http://site.gov/21398">
        <soapenv:Header/>
    <soapenv:Body>
      <inf:getCarsResponse xmlns:inf="inf">
               <hsdq:Message1/>
          <hsdq:Message2>
            <hsdq:ApplicationData>
            ...
            </hsdq:ApplicationData>
            <hsdq:ApplicationDocument/>
          </hsdq:Message2>
      </inf:getCarsResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

但是我们的服务生成的响应略有不同：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <getCarsResponse xmlns="inf">
         <Message2 xmlns="http://site.gov/21398">
            <ApplicationData>
            ...
            </ApplicationData>
         </Message2>
      </getCarsResponse>
   </s:Body>
</s:Envelope> 
```

我知道我可以修复`ApplicationDocument`部分和`Header`部分的缺失。但是我怎样才能让我的回复与提供的完全一样？

我的意思是我想配置`xmlserializer`为可能： 1\. 删除不必要的`xsi`和`xsd`命名空间。2\. 将信封命名空间重命名`s`为`soapenv`. 3.`hsdq`命名空间应该在根元素中指定，并且应该通过名称来标识，而不仅仅是通过 url。（比较第一个响应：`xmlns:hsdq="http://site.gov/21398"`和第二个响应：`xmlns="http://site.gov/21398"`

我想我应该使用`IDispatchMessageFormatter`它，但对我来说似乎太复杂了，我无法在没有任何样本的情况下使用 ut。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:46:27.223

我不认为你能做到。前缀的命名空间顺序与服务器无关。您可以编写一个自定义编码器来交换命名空间，但您应该真正检查为什么服务器拒绝这个，也许它不喜欢其他东西。

# c# - 为什么不能在 for each 循环中修改集合

> ID：10511022
> 
> 赞同：-3
> 
> 时间：2012-05-09T06:45:19.277
> 
> 标签：c#, .net, iterator

如果您制作一个副本，您如何最好地解释为什么允许使用 foreach 替换您正在循环的集合的元素。例子：

```
foreach(Item item in Items)
{
   item.modify //or remove or add
}
// will not work

foreach(Item item in Items.ToList())
{
   item.modify //or remove. or add
}

//will work altough i dont get it because i am now iterating trough the temporary list
//and changing its elements. 
//In my understanding its not like im iterating the list(.ToList) and modifying the source items
//(Items). A graphic representation would be welcome, my interest is to understand the
//matter logically 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:47:22.210

因为`Enumerator`中继`count`集合中的元素，并且您不会在迭代期间更改它。

如果您制作列表的副本（响应您的问题），您将迭代您正在更改的集合的**副本**。那是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T09:33:10.940

最好的答案是 List 对其列表项具有某种跟踪，并且可以根据您的要求更新其项目，但简单的 IEnumerable 没有，因此它不允许您更改它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T02:51:40.193

您的商品是什么类型的？修改方法有什么作用？我无法重现您可以使用第二个选项执行的操作。我无法编译这个：

```
int[] nn = new int[] { 1, 2 };
foreach (var n in nn.ToList())
   n++; 
```

错误：无法分配给“n”，因为它是“foreach 迭代变量”

# python - 在 Ipython notebook / Jupyter 中，Pandas 没有显示我尝试绘制的图表

> ID：10511024
> 
> 赞同：105
> 
> 时间：2012-05-09T06:45:29.727
> 
> 标签：python, pandas, ipython, jupyter-notebook

我正在尝试在 Ipython Notebook 中使用 pandas 绘制一些数据，虽然它给了我对象，但它实际上并没有绘制图形本身。所以它看起来像这样：

```
In [7]:

pledge.Amount.plot()

Out[7]:

<matplotlib.axes.AxesSubplot at 0x9397c6c> 
```

该图应该在此之后出现，但它根本不会出现。我已经导入了 matplotlib，所以这不是问题。我还需要导入其他模块吗？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2014-05-28T01:47:44.803

请注意， --pylab 已被弃用，并已从 IPython 的较新版本中删除，现在在 IPython Notebook 中启用内联绘图的推荐方法是运行：

```
%matplotlib inline
import matplotlib.pyplot as plt 
```

有关更多详细信息，请参阅ipython-dev 邮件列表中的[这篇文章](http://mail.scipy.org/pipermail/ipython-dev/2014-March/013411.html)。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-05-09T07:24:51.110

编辑：Pylab 已被弃用，请查看当前接受的答案

好的，看来答案是用--pylab=inline 启动ipython notebook。所以 ipython notebook --pylab=inline 这让它做了我之前看到的和我想要它做的事情。对模糊的原始问题感到抱歉。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-09T07:00:40.560

只需`import matplotlib.pyplot as plt`添加

```
plt.show() 
```

它将显示所有存储的图。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-28T15:14:27.390

导入matplotlib后很简单，如果你像这样启动了ipython，你就执行了一个魔法

```
ipython notebook 

%matplotlib inline 
```

运行此命令一切都会完美显示

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-01T02:07:42.220

用 启动 ipython `ipython notebook --pylab inline`，然后图形将显示内联。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-01-15T12:43:51.540

```
import matplotlib as plt
%matplotlib as inline 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2015-11-02T19:02:09.087

您需要做的就是**导入**matplotlib。

```
import matplotlib.pyplot as plt 
```

# android - 安卓机器人测试

> ID：10511026
> 
> 赞同：0
> 
> 时间：2012-05-09T06:45:33.673
> 
> 标签：android, robotium

我刚开始使用robotium，我可以使用robotium配置和运行一个非常简单的应用程序。我需要一些复杂的应用程序代码来测试robotium。请为此提供任何链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:50:34.437

您希望我们为您提供可用于 Robotium 的代码吗？那么为什么不直接拿一些[sdk API 演示](http://developer.android.com/resources/samples/ApiDemos/index.html)呢？那些应该足够复杂，否则试试[Zxing 的](http://code.google.com/p/zxing/)开源条形码扫描仪-

# php - 动态错误显示

> ID：10511028
> 
> 赞同：1
> 
> 时间：2012-05-09T06:45:40.587
> 
> 标签：php, html, css

请问有没有一种方法可以使我的错误显示动态显示，仅在每个文本框下显示有错误的字段。

当一个字段为空时，我通常使用的所有字段仅显示一个错误...

谢谢

```
 if (isset($_POST['submit'])) {

    $a = mysql_real_escape_string($_POST      ['a']);

   $b = mysql_real_escape_string($_POST       ['b']);

    $c = mysql_real_escape_string($_POST      ['c']);

    $d = mysql_real_escape_string($_POST      ['d']);

    $e = mysql_real_escape_string($_POST      ['e']);

if (($a == "") ||  ($b == "") || ($c == "") ||        ($d == "") || ($e == "")) {

               echo "<div id=\"content\" >" ;
               echo "<div class=\"error\" >" ;  
               echo "empty"; 
               echo "</div>";
               echo "</div>";
            } else { 

 $query = "INSERT INTO user (a, b, c, d, e)
                   VALUES ($a, $b, $c, $d, $e)";
                   mysql_query($query);          

                  }
             }

             ?>

    Enter Texts <br/>
     <form action="<?php echo $_SERVER        ['PHP_SELF']; ?>" method="post"> 

 A:<input type="text"  name="a" ><br/>
 B:<input type="text"  name="b" ><br/>
 C:<input type="text"  name="c" ><br/>
 D:<input type="text"  name="d" ><br/>
 E:<input type="text"  name="e" ><br/>

                    <input type="submit" name           ="submit" value="Go"/> 
     </form> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:49:47.010

不是一次检查所有变量，而是一次`($a == "") || ($b == "") || ($c == "") || ($d == "") || ($e == "")`检查一个变量并设置单独的错误变量。使用这些在您的输入字段附近显示错误消息。

例如：

```
if ( $a == "" ) { $errorA = true; }

A:<input type="text"  name="a" ><br/>
<?php print ($errorA ? '<span class="error">A is empty.</span><br/>' : ''); ?> 
```

为了防止表单被提交，您可以使用以下几行：

```
$error['A'] = $error['B'] = $error['C'] = .... = $error['Z'] = 0;    
if ( $a == "" ) { $error['A'] = 1; }
if ( array_sum($error) > 0 ) {
  // do not submit!
}

A:<input type="text"  name="a" ><br/>
<?php print ($error['A'] ? '<span class="error">A is empty.</span><br/>' : ''); ?> 
```

或者您只需设置一个更广泛的错误变量，如下所示：

```
$error = false;
if ( $a == "" ) { $errorA = true; $error = true; }
if ( $b == "" ) { $errorB = true; $error = true; }

if ( !$error ) { //submit form 
}

A:<input type="text"  name="a" ><br/>
<?php print ($errorA ? '<span class="error">A is empty.</span><br/>' : ''); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:57:30.457

不要在顶部显示错误，而是在每个字段中附加以下代码。***如果您的表单和操作代码在同一页面上，它将不会在表单加载时显示错误。***

尝试这样的事情：

```
A:<input type="text"  name="a" ><br />
<?php if( isset($_POST['a']) && trim($_POST['a']) == '' ) { echo 'This field is required'; } ?>

B:<input type="text"  name="b" ><br/>
<?php if( isset($_POST['b']) && trim($_POST['b']) == '' ) { echo 'This field is required'; } ?>

C:<input type="text"  name="c" ><br/>
<?php if( isset($_POST['c']) && trim($_POST['c']) == '' ) { echo 'This field is required'; } ?>

D:<input type="text"  name="d" ><br/>
<?php if( isset($_POST['d']) && trim($_POST['d']) == '' ) { echo 'This field is required'; } ?>

E:<input type="text"  name="e" ><br/>   
<?php if( isset($_POST['a']) && trim($_POST['a']) == '' ) { echo 'This field is required'; } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:16:14.463

这是另一种方法，在执行过程中检查并构建错误数组，然后如果错误数组为空，请执行查询。

```
<?php
//Check form was posted
if($_SERVER['REQUEST_METHOD']=='POST'){
    //Pre build allowed array
    $allowed=array('a','b','c','d','e','submit');
    //Pre build errors array
    $errors=array('A was not set',
                  'B was not set',
                  'C was not set',
                  'D was not set',
                  'E was not set');
    //Create Blank error array    
    $error=array();
    //Loop through the POST
    foreach($_POST as $key=>$value){
        //If key is in allowed array
        if(in_array($key,$allowed)){
            //Check its at good length
            if(strlen(trim($value)) >= 1){
                //Assign variable variable the key and value + escape
                $$key = mysql_real_escape_string(trim($value));
            }else{
                //Assign key/value null
                $$key = null;
                //Assign the error from the errors array to the output error array
                $error[$key] = $errors[array_search($key,$allowed)];
            }
        }else{
            $error=array('Rouge POST key');
        }
    }

    //If all is good do query
    if(empty($error)){
        $query = "INSERT INTO user (a, b, c, d, e)
                   VALUES ($a, $b, $c, $d, $e)";
        mysql_query($query);
    }

}?>

Enter Texts <br/>
<form action="" method="post"> 

 A:<input type="text"  name="a" ><?php echo (isset($error['a'])?$error['a']:null)?><br/>
 B:<input type="text"  name="b" ><?php echo (isset($error['b'])?$error['b']:null)?><br/>
 C:<input type="text"  name="c" ><?php echo (isset($error['c'])?$error['c']:null)?><br/>
 D:<input type="text"  name="d" ><?php echo (isset($error['d'])?$error['d']:null)?><br/>
 E:<input type="text"  name="e" ><?php echo (isset($error['e'])?$error['e']:null)?><br/>
 <input type="submit" name="submit" value="Go"/> 
</form> 
```

# c# - 将 varchar 值转换为数据类型 int 时存储过程转换失败？

> ID：10511029
> 
> 赞同：0
> 
> 时间：2012-05-09T06:45:57.340
> 
> 标签：c#, asp.net, sql-server, tsql, stored-procedures

在我的存储过程中，我面临以下问题 - 我该如何解决这个问题？

```
CREATE PROC RupeshTest(@QueID int, @Answer varchar(250)) as
BEGIN
   DECLARE @STR varchar(4000) 

   SELECT @STR = COALESCE(@str + ';','') + AnswerText     
   FROM SurveyQuestionAnswerTypes 
   WHERE AnswerType = (SELECT AnswerType 
                       FROM SurveyQuestions 
                       WHERE QuestionID = CAST(@QueId AS VARCHAR(4))) 
                         AND AnswerValue IN (REPLACE(@Answer,'^',','))
END 
```

当我运行它

```
RupeshTest 25, '2^3^5^7^8' 
```

我收到以下错误

> 消息 245，级别 16，状态 1，过程 RupeshTest，第 4 行将
> varchar 值“2,3,5,7,8”转换为数据类型 int 时转换失败。

虽然我理解这个问题，但无法解决它，有人可以告诉我如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:01:43.760

这不起作用，因为最终形成的查询是：

```
SELECT @STR = COALESCE(@str + ';','') + AnswerText     
   FROM SurveyQuestionAnswerTypes 
   WHERE AnswerType = (SELECT AnswerType 
                       FROM SurveyQuestions 
                       WHERE QuestionID = CAST(@QueId AS VARCHAR(4))) 
                         AND AnswerValue IN ('2,3,5,7,8') 
```

你想要这样的东西：

```
SELECT @STR = COALESCE(@str + ';','') + AnswerText     
   FROM SurveyQuestionAnswerTypes 
   WHERE AnswerType = (SELECT AnswerType 
                       FROM SurveyQuestions 
                       WHERE QuestionID = CAST(@QueId AS VARCHAR(4))) 
                         AND AnswerValue IN (2,3,5,7,8) 
```

我建议您制作一个 UDF String_To_Table，将字符串传递给该 UDF 并用于 IN 子句。

String_To_Table UDF：

```
CREATE FUNCTION [dbo].[String_To_Table]
                    (@string      VARCHAR(4000),
                     @delimiter CHAR(1) = ';')
         RETURNS @tbl TABLE (ord INT IDENTITY(1, 1) NOT NULL,
                             token     VARCHAR(500)) AS

   BEGIN
      DECLARE @pos      int,
              @textpos  int,
              @chunklen smallint,
              @tmpstr   varchar(4000),
              @leftover varchar(4000),
              @tmpval   varchar(4000)

      SET @textpos = 1
      SET @leftover = ''
      WHILE @textpos <= datalength(@string)
      BEGIN
         SET @chunklen = 4000 - datalength(@leftover)
         SET @tmpstr = @leftover + substring(@string, @textpos, @chunklen)
         SET @textpos = @textpos + @chunklen

         SET @pos = charindex(@delimiter, @tmpstr)

         WHILE @pos > 0
         BEGIN
            SET @tmpval = ltrim(rtrim(left(@tmpstr, @pos - 1)))
            INSERT @tbl (token) VALUES(@tmpval)
            SET @tmpstr = substring(@tmpstr, @pos + 1, len(@tmpstr))
            SET @pos = charindex(@delimiter, @tmpstr)
         END

         SET @leftover = @tmpstr
      END

    IF ltrim(rtrim(@leftover)) <> ''
        INSERT @tbl(token) VALUES (ltrim(rtrim(@leftover)))

 RETURN
   END 
```

然后你可以改变你的SP如下：

```
CREATE PROC RupeshTest(@QueID int, @Answer varchar(250)) as
BEGIN
   DECLARE @STR varchar(4000) 

   SELECT @STR = COALESCE(@str + ';','') + AnswerText     
   FROM SurveyQuestionAnswerTypes 
   WHERE AnswerType = (SELECT AnswerType 
                       FROM SurveyQuestions 
                       WHERE QuestionID = CAST(@QueId AS VARCHAR(4))) 
                         AND AnswerValue IN (SELECT Token FROM dbo.String_To_Table(@Answer,'^'))
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:07:02.527

您在这里面临的问题是部分 `AnswerValue IN (2,3,5,7,8)`以及如何使其有效 SQL，因为这些值是整数列表，并且您将它们作为字符串。对我来说，一个技巧是将所有 SQL 命令变成一个字符串并执行它：

```
DECLARE @SQLQuery AS varchar(4000)

SET SQLQuery = 
'SELECT AnswerText '
+ ' FROM SurveyQuestionAnswerTypes '
+ ' WHERE AnswerType = (SELECT AnswerType '
                   + ' FROM SurveyQuestions '
                   + ' WHERE QuestionID = ' + CAST(@QueId AS VARCHAR(4))) 
                    + ' AND AnswerValue IN (' + (REPLACE(@Answer,'^',',')) + ')'

EXECUTE(@SQLQuery) 
```

顺便说一句，没有理由用 ^ 发送数字然后更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:08:59.337

您可以将最后一个条件替换为

```
AND CHARINDEX(CONCAT("^", CAST(AnswerValue AS CHAR), "^"), CONCAT("^", @Answer, "^")) 
```

这似乎并不完全正确，但它可能会奏效。

**已编辑**

感谢您的更正。

# c# - 如何创建一个 Between 扩展方法

> ID：10511034
> 
> 赞同：5
> 
> 时间：2012-05-09T06:46:31.163
> 
> 标签：c#, extension-methods

我有一个变量，其值在运行时填充。我想使用扩展方法检查该值是否介于两个相同的数据类型值（例如最低和最高）之间。

我想检查一下

```
int a = 2; //here static but is can be changed at runtime

if(a.Between(0,8))
   DoSomething();
else
   DoNothing(); 
```

如果`a`是 0 或 8 或它们之间的任何值，它应该返回`true`.

如果`a`是（-1 或更小）或（9 或更大），那么它应该返回`false`

我想创建一个扩展方法，比如

```
public static bool Between<T1>(this T1 val1, T1 lowest, T1 highest) where ????
{
    What code to write here???? 
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T06:50:41.333

你可以这样做：

```
public static bool Between<T>(this T actual, T lower, T upper) where T : IComparable<T>
{
    return actual.CompareTo(lower) >= 0 && actual.CompareTo(upper) <= 0;
} 
```

参考[这里](https://stackoverflow.com/a/271444/1100080)

或者，如果您想在集合上执行此操作，您可以这样做：

```
public static IEnumerable<TSource> Between<TSource, TResult>
(
    this IEnumerable<TSource> source, Func<TSource, TResult> selector,
    TResult lowest, TResult highest
)
    where TResult : IComparable<TResult>
{
    return source.OrderBy(selector).
        SkipWhile(s => selector.Invoke(s).CompareTo(lowest) < 0).
        TakeWhile(s => selector.Invoke(s).CompareTo(highest) <= 0 );
} 
```

参考[这里](http://kendoll.net/c_sharp_linq_extension_method_for_values_between_a_range)

用法：

```
var tenTo40 = list.Between(s => s, 10, 40); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:49:55.370

混合类型会使它更难，例如。如果 T1 是 datetime 并且 t2 是 int 那么你期望什么行为？

只使用一种类型就可以使用 IComparable 接口

```
public static bool Between<T>(this T self, T lower,T higher) where T : IComparable
{
    return self.CompareTo(lower) >= 0 && self.CompareTo(higher) <= 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:54:56.863

也许是这样的：

```
public static bool Between<T1, T2>(this T1 val1, T2 lowest, T2 highest) where T1 : IComparable where T2 : IComparable {
    return val1.CompareTo(lowest) > 0 && val1.CompareTo(highest) < 0;
} 
```

# javascript - 利用浏览器缓存 | 修改.htaccess 文件| - 不适用于 javascript 文件

> ID：10511035
> 
> 赞同：14
> 
> 时间：2012-05-09T06:46:33.703
> 
> 标签：javascript, .htaccess, caching, optimization, browser-cache

我正在尝试通过指定资源的过期时间来修改我的 .htaccess 文件。它适用于图像，但不适用于 javascript 文件。运行 GTMetrix 时，它仍然建议 javascript 文件需要过期。我试过“application/javascript”和“application/x-javascript”但无济于事。

不知道我做错了什么。

这是我的代码：

```
 ## EXPIRES CACHING ##
    <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access 1 year"
    ExpiresByType image/jpeg "access 1 year"
    ExpiresByType image/gif "access 1 year"
    ExpiresByType image/png "access 1 year"
    ExpiresByType text/css "access 1 month"
    ExpiresByType application/pdf "access 1 month"
    ExpiresByType application/javascript "access 1 week"
    ExpiresByType application/x-shockwave-flash "access 1 month"
    ExpiresByType image/x-icon "access 1 year"
    ExpiresDefault "access 2 days"

    </IfModule>
    ## EXPIRES CACHING ## 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-23T18:35:53.820

添加这将使其工作。

```
ExpiresByType text/x-javascript "access plus 1 month"  
ExpiresByType application/javascript "access plus 1 month"  
ExpiresByType application/x-javascript "access plus 1 month" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-24T14:02:37.607

使用浏览器检查器 Chrome/FireFox/Opera 中的网络选项卡，您可以检查资产并查看正在提供哪种“内容类型”。

就我而言，它是 `Content-Type:"text/javascript"`

所以我在我的 .htaccess 文件中添加了 4 个 ExpiresByType 排列

```
ExpiresByType text/javascript "access plus 1 month"
ExpiresByType text/x-javascript "access plus 1 month"
ExpiresByType application/javascript "access plus 1 month"  
ExpiresByType application/x-javascript "access plus 1 month" 
```

这解决了我的问题，我希望它会帮助其他人。

# c# - 将元素添加到列表 C# 的更好方法是什么

> ID：10511040
> 
> 赞同：0
> 
> 时间：2012-05-09T06:47:07.560
> 
> 标签：c#

我有一个用于添加点的点列表。

我有两种方法，但我只想知道哪一种更好。

以下是第一种方法的代码：

```
 List<Point> borderPoints = new List<Point>();

                Point p1 = new Point(0, 0);
                Point p2 = new Point(Width, 0);

                borderPoints.AddRange(new[] { p1, p2 }); 
```

在第二种方法中，我添加如下几点：

```
 borderPoints.Add(p1);
 borderPoints.Add(p2); 
```

我必须四次加分，那么我应该遵循哪种方法以及为什么，或者没关系，这只是 style 的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:50:52.097

绝对选择第一个，你可以。`AddRange`比每一个都快得多`Add`。（如果您考虑 list rsize 由于列表集合的增长，那就清楚了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T06:51:11.487

使用第三种方法：

```
List<Point> borderPoints = new List<Point>(new Point[] {
    new Point(0, 0),
    new Point(Width, 0),
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:51:54.960

你说的对。在您的情况下，这更像是您的编程风格。

`Add()`循环简单方便 `AddRange()`，一次性使用更显优雅。

考虑性能：

`AddRange()`将先前创建的树节点数组添加到集合中，同时`Add()`将新树节点添加到集合中（MSDN 文档）。

因此，如果您只添加 4 个节点或不经常添加节点，请使用`Add()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T06:55:59.317

我会使用第二种方法。

第一种方法不必要地实例化一个数组，因此会稍微慢一些。

仅`AddRange`在要添加的项目已经在集合（或枚举）中时使用。

一般来说，如果你想压缩每纳秒的性能，你可以通过确保列表的容量足够大来容纳你要添加的所有项目来做到这一点：

```
var list = new List<T>(capacity);
... add items ... 
```

或者

```
list.Capacity = capacity;
... add items ... 
```

但是在将单个项目添加到列表之前将它们复制到一个数组中不会给您带来任何好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T06:52:01.563

1）如果您提前知道要添加到列表中的点数，请使用带有“容量”参数的列表构造函数。

2）除非您多次使用它，否则实例化一个新数组只是为了将点传递给 AddRange 纯属浪费。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T06:53:17.400

答案很简单，如果你有一个范围使用`AddRange`，如果你有一个单一的项目使用`Add`。

但在你的情况下，我根本不会使用列表。对我来说，您似乎缺少一个名为 BorderPoints 的概念。像这样的东西：

```
public class BorderPoints {
    public BorderPoints(Point p1, Point p2) {
        _p1 = p1;
        _p2 = p2;
    }
}

Then you can just use that instead of the list. 
```

# iphone - 不能在此处关闭操作表

> ID：10511047
> 
> 赞同：0
> 
> 时间：2012-05-09T06:47:32.377
> 
> 标签：iphone, ios, uiactionsheet, dismiss

一个 UILongPressGestureRecognizer 被添加到我的 imageView 中，并带有动作句柄LongPressOnPhotos。最相关的代码如下：

```
- (IBAction)handleLongPressOnPhotos:(UILongPressGestureRecognizer *)sender
{
self.imageWillBeSaved = (UIImageView *)sender.view; //breakPoint1
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Save the photo" otherButtonTitles: @"Go to the Original photo", nil];
actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
[actionSheet showInView:self.view]; //breakPoint2
NSLog( @"actionSheet addr when created is %p", actionSheet );//breakPoint3
[actionSheet release];//breakPoint4
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (buttonIndex) {
        case 0:
            UIImageWriteToSavedPhotosAlbum(self.imageWillBeSaved.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);
            //[actionSheet dismissWithClickedButtonIndex:0 animated:YES]; i have tried to use this method here, but it didn't work.
            break;

        default:
            break;
    }
}

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    if (error != NULL)
    {
        // handle error
    }
    else 
    {
        // handle ok status
    }
} 
```

单击“保存照片”按钮后，操作表将不会被关闭。如果我再次单击该按钮，则操作表将被取消，并且照片会保存两次。代码中有问题吗？提前致谢！

附言。**imageView 是 scrollView 的子视图，scrollView 在 tableViewCell**中。

```
- (IBAction)handleLongPressOnPhotos:(UILongPressGestureRecognizer *)sender
{
self.imageWillBeSaved = (UIImageView *)sender.view; //breakPoint1
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Save the photo" otherButtonTitles: @"Go to the Original photo", nil];
actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
[actionSheet showInView:self.view]; //breakPoint2
NSLog( @"actionSheet addr when created is %p", actionSheet );//breakPoint3
[actionSheet release];//breakPoint4
} 
```

我在“handleLongPressOnPhotos:”方法中设置了两个断点作为breakPoint1和breakPoint1。在 imageView 长按后，我按照代码的步骤进行操作。步骤顺序是：breakPoint1 -> breakPoint2 ->breakPoint1 ->breakPoint2 -> breakPoint3 -> breakPoint4 -> breakPoint3 -> breakPoint4，然后出去。很明显，actionSheet 已经出现了两次，这导致了问题。这很奇怪，我不知道原因并避免这种情况。

**问题在另一个问题中解决了** [UILongPressGestureRecognizer 在按下时被调用两次](https://stackoverflow.com/questions/3319591/uilongpressgesturerecognizer-gets-called-twice-when-pressing-down)

感谢@Laddu、@MichaelDautermann、@sreecharan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:55:51.250

它看起来不错，但请在此处添加 nslog：-

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

  NSLog(@"buttonIndex.....%d",buttonIndex);

  switch (buttonIndex) {

     case 0:
        UIImageWriteToSavedPhotosAlbum(self.imageWillBeSaved.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);

        //[actionSheet dismissWithClickedButtonIndex:0 animated:YES]; i have tried to use this method here, but it didn't work.

        break;

     default:
        break;
   }
} 
```

检查您在 .h 文件中添加 ACtionSheet 委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:24:31.510

有没有你不使用的原因，`actionSheet:willDismissWithButtonIndex:`而不是`actionSheet:clickedButtonAtIndex:`.

如果您使用`actionSheet:willDismissWithButtonIndex:`，则无需关心自己关闭 ActionSheet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T04:03:49.057

问题在另一个问题中解决了 UILongPressGestureRecognizer 在按下时被调用两次

感谢@Laddu、@MichaelDautermann、@sreecharan

# codeigniter - 在 PHP 中使用 MongoDB 进行 in_array 类似查询

> ID：10511048
> 
> 赞同：1
> 
> 时间：2012-05-09T06:47:32.583
> 
> 标签：codeigniter, mongodb, mongodb-php

我正在构建一个网络应用程序，在这个应用程序（Codeigniter 和 MongoDB）中，我让人们按标签搜索文件。例如，如果他们输入标签 house 和 cat，他们会得到所有匹配它们的文件。标签被收集在一个数组（$tags）中。

这就是我执行查找查询的方式：

```
select ($select) -> where_in_all ('tags', $tags) -> get ('uploaded_files'); 
```

上面的查询工作正常，但我真的需要让用户按部分标签搜索。像“侯”而不是“房子”。我知道如何进行类似查询，但一次只针对一个标签。如何使 in_array 搜索工作？

我正在使用 vesparny 出色的 MongoDB 包装器。这是该包装器中用于正常 in_array 搜索的代码：

```
public function where_in_all($field = "", $in = array()){
   $this->_where_init($field);
   $this->wheres[$field]['$all'] = $in;
   return ($this);
} 
```

这是我修改它的尝试，但它不起作用：

```
public function where_in_all_like($field = "", $in = array()){
   $this->_where_init($field);
   $this->wheres[$field]['$all'] = new MongoRegex('/'.$in.'/i');
   return ($this);
} 
```

我究竟做错了什么？包装器可以在这里找到：

```
https://github.com/vesparny/cimongo-codeigniter-mongodb-library 
```

感谢所有帮助！

**更新**

这似乎只在我的本地服务器上有效......不在生产服务器上。

```
public function where_in_all_like($field = "", $in = array()){

    $newarray = array ();

    foreach ($in as $value) {
     array_push ($newarray, new MongoRegex('/'.$value.'/i'));
    }

    $this->_where_init($field);
    $this->wheres[$field]['$all'] = $newarray;
    return ($this);
    } 
```

**更新 2**

我将服务器上的 MongoDB 更新为 2.0.4，现在可以正常工作了。

# php - 跨持久连接打开句柄

> ID：10511049
> 
> 赞同：0
> 
> 时间：2012-05-09T06:47:40.430
> 
> 标签：php, popen

我正在尝试通过使用执行命令`popen`，然后通过 AJAX 打印出它的进度。我发现这篇[文章](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)非常有帮助，并且让 AJAX 到脚本交换工作正常。问题是每次`test`从 ajax 进行异步 GET 时，`popen`都会重复处理 on。如果我让 shell 只运行一次，那么句柄就不再有效。我不知道如何使 $handle 成为跨请求的持久性。

```
public function test()
{
      chdir('my dir');
      $handle = popen('make install 2>&1','r');
      echo fread($handle, 2096);

} 
```

一次只会有一个用户请求这个....仅用于管理后端。AJAX 的输出始终是“在 src 中进行安装”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:16:47.413

你不能那样做。您必须在后台运行“make install”过程（例如 via `exec()`）并将其输出重定向到您在执行 AJAX 请求时可以读取的文件/管道。

# jquery - 在 HTML5 视频播放器中添加滑动功能

> ID：10511052
> 
> 赞同：1
> 
> 时间：2012-05-09T06:47:59.807
> 
> 标签：jquery, jquery-plugins, jquery-mobile, html5-video

我正在使用这个视频播放器[http://1.s3.envato.com/files/16280451/bottomPlaylist/universalWhite_preview.html](http://1.s3.envato.com/files/16280451/bottomPlaylist/universalWhite_preview.html)并且我想在其中添加滑动功能，以便它支持所有触摸设备。我正在使用 TochSwipe 链接[http://labs.skinkers.com/touchSwipe/](http://labs.skinkers.com/touchSwipe/.I)。我只是做了一个小实验并添加了这个jquery

```
 $("#vp2_html5_bottomPlaylist_UB").swipe(swipeLeft);
        function swipeLeft(event)
        {
            jQuery(thumbsHolder_Thumbs[current_img_no]).removeClass('thumbsHolder_ThumbON');

                if (current_img_no==total_images-1)
                    current_img_no=0;
                else
                    current_img_no++;

                changeSrcAndPoster(options.autoPlay);
        } 
```

但它没有成功。所以基本上我想实现滑动功能，当我在视频上滑动时改变视频

# iphone - 如何在自定义 UITableViewCell 中下载和加载下载图像？

> ID：10511062
> 
> 赞同：0
> 
> 时间：2012-05-09T06:48:43.253
> 
> 标签：iphone, image, uitableview, download

我得到这样的服务器文本：

test_abc [http://www.xxx.a.jpg](http://www.xxx.a.jpg) test_aaa [http://www.xxx.b.jpg](http://www.xxx.b.jpg) test_ccc

我想将字符串拆分为`["test_abc", "http://www.xxx.a.jpg", "test_aaa", "http://www.xxx.b.jpg", "test_ccc"]`然后将它们显示在a`UITableViewCell`中，在下载图像之前，我使用LoadingIndicator作为占位符，当图像被下载时，显示图像并修改单元格的高度以显示整个图像.

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:55:58.800

试试看[Three20](http://three20.info/)

由为 iOS 编写官方“Facebook”应用程序的人编写的开源库。此外，facebook 应用程序的代码基于该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:50:45.520

您可以使用[SDWebImage](https://github.com/rs/SDWebImage)，您不必担心缓存等。

Web Image 这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

一个向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别 异步图像下载器 具有自动缓存过期处理的异步内存 + 磁盘图像缓存 保证不会多次下载相同的 URL 保证不会出现虚假 URL t 一次又一次地重试表演！

# javascript - 无法让 port.emit 和 port.on 在 Firefox 插件中工作

> ID：10511063
> 
> 赞同：1
> 
> 时间：2012-05-09T06:48:47.463
> 
> 标签：javascript, firefox, firefox-addon

我正在发送这样的消息：

```
self.port.emit("nodes_grubed", textNodesValues); 
```

并想对此做出反应：

```
worker.port.on("nodes_grubed", requestRenderedtext); 
```

但它不起作用。我应该改变什么？[你可以在这里](https://builder.addons.mozilla.org/addon/1051796/latest/)试试我的插件。

`main.js`：

```
var widgets = require("widget");
var tabs = require("tabs");
var self = require("self");

function requestRenderedtext(textNodesText) {
  console.log('text nodes requesting');
} 

var widget = widgets.Widget({
  id: "mozilla-link",
  label: "Mozilla website",
  contentURL: "http://www.mozilla.org/favicon.ico",
  onClick: 
    function(worker) {
      tabs.activeTab.attach({
        contentScriptFile: self.data.url("process.js")
      });
      worker.on("nodes_grubed",requestRenderedtext);
      worker.port.on("nodes_grubed",requestRenderedtext);
    },
  onAttach:
    function(worker) {
      worker.on("nodes_grubed",requestRenderedtext);
      worker.port.on("nodes_grubed",requestRenderedtext);
    }
});
widget.on("nodes_grubed",requestRenderedtext);
widget.port.on("nodes_grubed",requestRenderedtext); 
```

`process.js`：

```
function getTextNodes() {
  var walker = document.createTreeWalker(
    document.body, 
    NodeFilter.SHOW_TEXT, 
    null, 
    false
  );

  var node;
  textNodes = [];
  var textNodesValues=[];
  while(node = walker.nextNode()) {
    if (node.parentNode.tagName!='SCRIPT') {
      textNodesValues.push(node.nodeValue);
      textNodes.push(node)   
    }
  }
  if (textNodesValues.length!=0) {
    console.log('emmiting nodes');
    self.port.emit("nodes_grubed", textNodesValues);
  }
}

getTextNodes(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:44:33.123

单击小部件时，您不会将工作人员作为参数（单击发生时它不存在）-您通过调用来创建它`tabs.activeTab.attach()`。您应该使用 的返回值`tabs.activeTab.attach()`，如下所示：

```
 onClick: 
    function() {
      var worker = tabs.activeTab.attach({
        contentScriptFile: self.data.url("process.js")
      });
      worker.port.on("nodes_grubed", requestRenderedtext);
    }, 
```

# visual-c++ - 将项目从 vc 6.0 转换为 vc 2010 时出错

> ID：10511072
> 
> 赞同：0
> 
> 时间：2012-05-09T06:49:21.420
> 
> 标签：visual-c++, visual-c++-6, visual-c++-2010

我已经成功地在visual c++ 6.0上编译和构建c/c++项目到dll。但是当我在windwos 7 64位操作系统上转换为visual c++ 2010时，它出现了很多错误。源代码是

```
typedef  struct {                                   
     int               _entID          ; /* Entity ID                   */
     int               _recID          ; /* Recode No.                  */
     int               _Nmbr           ; /* 画像番号          0020:0013 */
     int               _Clmns          ; /* マトリクス X      0028:0011 */
     int               _Rws            ; /* マトリクス Y      0028:0010 */
     int               _ImagCnt        ; /* 複数フレーム数    0028:0008 */
     char              _Type[ 68 ]     ; /* 画像タイプ        0008:0008 */
     char              _cUID[ 68 ]     ; /* クラス UID        0004:1510 */
     char              _sUID[ 68 ]     ; /* SOP    UID        0008:0018 */
     char              _pathNm[ 128 ]  ;

     char             *_sptr           ;*****error at line*****
     int               _xsiz           ;//
     int               _ysiz           ; /*    "         Y サイズ       */
                                         /*                       @2.01 */
   char              _SpcSet[ 20 ]   ; /* Specific Char     0008:0005 */
                                         /*                       @2.30 */
     char              _SpcSet[ 64 ]   ; /* Specific Char     0008:0005 */
     }                 DDIR_IMAG_INF   ; /*                             */' 
```

在 vc 2010 上构建时，会出现许多类似的错误，如下所示： Error 1 d:\dxr-mls\program\dicm_dir_tool.dll\source\dicm_dir_tool\include\dicm_dir_tool_dll.h error C2059: syntax error : ';' visual c++ 6.0 项目是 ansii 项目，注释是日语，使用一些 dll 和 windows 系统库，在 windows xp 32 位帮助我构建成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:50:22.060

字符串`*_sptr`和`*_uptr`似乎是 Visual C++ 中的“魔术”指针类型。我搜索了 MSDN 和 Google，但找不到参考，但看起来您根本无法拥有名为`_sptr`. 根据[这个错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/229419/compile-error-c2088-on-variable-name-broke-in-sp1)，它们可能是保留的标识符。

请注意，您还有两个具有相同名称的字段：`_SpcSet`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:37:54.747

检查这个： http: [//msdn.microsoft.com/en-us/library/t8xe60cf](http://msdn.microsoft.com/en-us/library/t8xe60cf(v=vs.100).aspx) (v=vs.100).aspx 有些可能适用于您的问题。

# css - Html5 - Css 样式被 jquery 移动样式覆盖

> ID：10511080
> 
> 赞同：0
> 
> 时间：2012-05-09T06:49:48.157
> 
> 标签：css, html, jquery-mobile

我正在使用 html5、css、jquery mobile 开发一些应用程序。但是 html 元素和 css 被 jquery-mobile 默认样式表 (jquery.mobile-1.0.css) 覆盖。

我该如何克服这个问题？我只想在我的页面上使用我的风格。例如，如果我在 body 标记中给出 bgcolor="red"，它将不起作用..

请给我一些建议......

感谢您....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:51:50.800

使用 CSS 并在必要时将属性标记为`!important`.

```
body { background-color: #f00; } 
```

如果这不起作用，例如因为 jQuery Mobile CSS 中的另一个选择器覆盖了它，请使用`!important`：

```
body { background-color: #f00 !important; } 
```

此处解释了优先规则：http: [//www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity) - 但是，通常只需测试您的规则是否已经有效或是否需要`!important`就足够了。

您当然应该做的是在 jQuery 移动 CSS*之后包含您的样式表。*即使没有`!important`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:52:34.397

不是首先包含你的 style.css，而是最后加载它

像

```
<link href="query.mobile-1.0.css" rel="stylesheet" type="text/css">
<link href="style.css" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:53:00.223

`bgcolor="red"`不是 CSS 而是 HTML 属性。

更改您的网站以在 jQuery 移动 CSS 之后加载您的自定义 CSS 文件。在您的自定义 CSS 文件中声明您的样式，例如：

```
body { background-color: #f00; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:36:40.007

JQuery Mobile 会创建 body 样式的子类，因此要针对 body 背景，您需要更加具体。

向您的 CSS 文件添加调整，该文件在 JQM CSS 文件之后声明。

您可以使用以下方法定位每个主题主体背景：

```
.ui-body-a,
.ui-overlay-a {
/* green 4FFF19 ellipse */
    background-image: -webkit-gradient(radial, center center, 0, center center,     497, color-stop(0, #4FFF19), color-stop(1, #264C73));
    /* Webkit (Chrome 11+) */ 
} 
```

例如，这以主题 a 为目标。这需要一点汗水来学习。

通过使用它，您可以创建 JQM 主题滚轮不提供的径向渐变背景等，为各种径向渐变创建 CSS 的好页面是所有地方的微软页面：http: [//ie.microsoft.com /testdrive/graphics/cssgradientbackgroundmaker/default.html](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html)。

祝你好运。

# php - 如何从以下字符串中找到结果的总数

> ID：10511091
> 
> 赞同：1
> 
> 时间：2012-05-09T06:50:49.583
> 
> 标签：php

如何从以下字符串中找到结果的总数！在php中

```
"Showing 1 - 24 of 6,200 Results" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:55:54.397

你的问题有点不完整。

如果您要问的是如何`6200`从字符串中提取，`"Showing 1 - 24 of 6,200 Results`您可以执行以下操作：

```
$total = preg_replace('/\D/','',preg_replace('/^.*of (\S+) Results/','\1',$str)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:57:47.007

假设您要的是正则表达式，请尝试

```
$total = (int) preg_replace('|(Showing\s[0-9]+\s\-[0-9]+\sof\s(([1-9][0-9]*),)?([0-9])\sResults)|','$3$4',"Showing 1 - 24 of 6,200 Results"); 
```

这会将总数返回为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:17:57.850

这个怎么样：

```
$str = "Showing 1 - 24 of 6,200 Results";
preg_match_all('!\d+!', str_replace(",", "", $str), $matches);
echo end($matches[0]); 
```

# objective-c - 如何在我们的 ipad 应用程序中打开苹果不支持的文件

> ID：10511093
> 
> 赞同：0
> 
> 时间：2012-05-09T06:51:04.947
> 
> 标签：objective-c, ipad, info.plist, uti

我需要使用“打开方式”功能在我的 ipad 应用程序中打开一个 Apple 不受支持的文件。".lasso" 中的文件扩展名。[我说该文件不受 Apple 支持，因为我在Apple System-Declared Uniform Type Identifiers](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html)中找不到它的描述。

我试图`CFBundleDocumentTypes`在 info.plist 中解决这个问题，但我仍然无法打开它。我在我的 plist 中写了这个：

![在此处输入图像描述](../Images/92daeecee3851cb6bbb938a262fefbb1.png)

![在此处输入图像描述](../Images/25669ca5b8352bf6476b93445cd0acb6.png)

但是当我尝试从其他应用程序打开 .lasso 文件时，总是会显示警告“无法在其他应用程序中打开此文件”。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:29:17.147

您需要为您的文件类型创建自己的 UTI，例如 com.yourcompany.lasso。您的 Info.plist 声称要导出当然已经存在的 public.plain-text UTI。您还将列出您的新 UTI 符合的预先存在的 UTI。您没有在屏幕截图中显示“符合 UTI”键下的内容，但如果 .lasso 文件确实是纯文本，它显然应该是 public.plain-text 。（如果 .lasso 文件有特定的编码，例如 UTF-8，您应该考虑更具体的编码，例如 public.utf8-plain-text。）

此外，您应该有一个自定义 MIME 类型，或者根本不使用一个。您不想重新定义“文本”MIME 类型以暗示该类型的所有数据流都是套索文件，是吗？

以及为什么要对“ LASSO”使用全大写。我假设，在实际使用中，文件将具有小写的扩展名，如“.lasso”。对？

# php - 设置 google freindly http header 错误，当 mysql 数据库错误发生时

> ID：10511095
> 
> 赞同：0
> 
> 时间：2012-05-09T06:51:15.293
> 
> 标签：php, mysql, http-headers

有时我的站点服务器处于太多的连接状态并且 mysql 显示错误：（`could not connect: too many connection`），但问题是我们必须如何在**PHP**中为这种情况设置谷歌友好或一般机器人友好的**HTTP 标头错误**？我的方法是设置错误，告诉他们我的网站暂时关闭！晚点回来！

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:58:15.850

发送`500 Internal Server Error`：

```
header('HTTP/1.0 500 Internal Server Error'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T06:55:29.410

我希望您已经通过一些异常处理程序或错误处理程序包装了您的代码，并且您的应用程序有一个全局异常处理程序。

你可以在这里做的是，在错误处理程序中，你可以**抛出一个异常**，它会有一些你想要显示的消息。这可以被全局应用程序异常处理程序捕获，它将用户重定向到您想要显示的某个自定义页面。**

# c# - 搜索并重新加载 datagridview

> ID：10511098
> 
> 赞同：0
> 
> 时间：2012-05-09T06:51:25.173
> 
> 标签：c#, .net, winforms, datagridview

我有一个现有的 datagridview 和一个搜索文本框。

当我键入搜索文本并基于以下方法（使用存储过程）单击搜索按钮时，我喜欢让它自动重新加载带有搜索结果的 datagridview。

我怎样才能做到这一点？

```
public static void searchAny(String searchFields, String tblName, String connectionString, SqlCommand tblscmd, SqlDataAdapter tbldataadaptor, DataTable tbldatatable, SqlCommandBuilder cmbuilder, DataGridView DataGridViewName)
{
    using (SqlConnection tblconn = new SqlConnection(connectionString))
    {
        tblconn.Open();
        SqlCommand tblcmd = new SqlCommand();
        tblcmd.Connection = tblconn;
        tblcmd.CommandType = CommandType.StoredProcedure;
        tblcmd.CommandText = "usp_searchany";
        tblcmd.Parameters.Add("@stringToFind", SqlDbType.NVarChar);
        tblcmd.Parameters["@stringToFind"].Value = "%" + searchFields + "%";
        tblcmd.Parameters.Add("@table", SqlDbType.NVarChar);
        tblcmd.Parameters["@table"].Value = tblName;
        cmbuilder.DataAdapter = tbldataadaptor;
        tbldatatable.DefaultView.AllowDelete = true;
        tbldatatable.DefaultView.AllowEdit = true;
        tbldataadaptor.Fill(tbldatatable);
        DataGridViewName.ReadOnly = false;
        DataGridViewName.DataSource = tbldatatable;
        tblconn.Close();
    }
}

private void SearchButton_Click(object sender, EventArgs e)
{
    tbldatatable.Clear();
    String searchFields = SearchTextBox.Text;
    GeneralMethods.searchAny(searchFields, "tblClients", connectionString, tblcmd, tbldataadaptor, tbldatatable, cmbuilder, dataGridView);
    dataGridView.DataSource = tbldatatable;
    dataGridView.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:35:35.257

您必须过滤 DataGridView 的数据源...如下方式...不需要清除、绑定或刷新数据网格视图...

从 CellEndEidt 这是可能的....

只需过滤 DataGridView 的 DataSource

```
private void MyDataGrid1_CellEndEdit(object sender, System.Windows.Forms.DataGridViewCellEventArgs e)
{
    if (e.RowIndex == 0)
       {
        if (myDataGrid1.CurrentCell.Value.ToString().Trim().Length > 0)
        {
            MyFilterString="Field1=Feild2 and Field3>Field4";
        }
        MyDtb1.DefaultView.RowFilter = FilterString;
    }
} 
```

# templates - 错字3模板自动解析器插件不可见

> ID：10511102
> 
> 赞同：0
> 
> 时间：2012-05-09T06:51:42.900
> 
> 标签：templates, typo3

我正在关注*现代模板构建* [教程](http://typo3.org/documentation/document-library/tutorials/doc_tut_templselect/0.1.0/view/1/3/#id1861460)，但未能安装*模板自动解析器*扩展。

安装后它应该在对象浏览器中显示插件： ![在此处输入图像描述](../Images/3ce7342404be038b7d20b036dda36fc3.png)

不幸的是，该`tx_automaketemplate_pi1`部分从未出现。

不用说，所有使用扩展的尝试都不起作用。

关于如何解决这个问题的任何想法？

我正在全新安装 Typo3 4.7.0。

**更新：**

在安装了typo3 4.5 并再次尝试后，我注意到仅下载了一个扩展并且必须在一个额外的步骤中安装。但是，在我的 4.7.0 安装中看不到指示这一点的图标（带有 + 或 - 的砖块）：

![在此处输入图像描述](../Images/c897b15244f8bc6e5ca1d00fcefb6566.png)

由于图标不存在，我没有找到真正安装扩展的方法。在 4.5.0 安装上一切正常。

只是出于好奇。关于如何获得 brik 图标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:18:02.513

这似乎是特定于 firefox 的问题（请参阅[http://www.xwissen.info/web-log/detail/articel/fix-install-uninstall-in-typo3-extansion-manager.html](http://www.xwissen.info/web-log/detail/articel/fix-install-uninstall-in-typo3-extansion-manager.html)）。我尝试了 xwissen.info 的解决方法（将“位置：绝对”添加到 .t3-icon-system-extension-uninstall 和 .t3-icon-system-extension-install），这解决了问题。

# c# - 从 Entity Framework 4.1 Code First 中的 NotMapped 类派生实体类

> ID：10511108
> 
> 赞同：5
> 
> 时间：2012-05-09T06:52:05.100
> 
> 标签：c#, .net, entity-framework, ef-code-first

我需要从不属于模型的基类派生我的两个实体类。

```
[NotMapped]
public abstract class BaseClass
{
    [NotMapped]
    public string SomeProperty { get; set; }
}
public partial class Derived1: BaseClass {}
public partial class Derived2: BaseClass {} 
```

我尝试将基类及其所有属性标记为，`[NotMapped]`但上下文初始化程序抛出一个错误，指出我的派生实体类都没有映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:39:11.500

弄清楚了。[NotMapped] 属性不应应用于基类，而应仅应用于其属性。

# php - 带有许多 php 文件的 cake php 导入库，其中包括其他文件

> ID：10511110
> 
> 赞同：0
> 
> 时间：2012-05-09T06:52:14.167
> 
> 标签：php, cakephp, cakephp-2.0

我有一些具有这种结构的 php 库：

```
folder1
    some_php_files.php
folder2
    some_php_files.php
folder3
    some_php_files.php 
```

每个文件夹中的每个文件都使用这样的东西`include_once(../folder2/some_file.php)`

现在我将所有三个文件夹都放在我的 app/lib 目录中，所以我有 app/lib/folder1、app/lib/folder2 ...

我在我的控制器中使用：`App::import('Lib', 'folder1/main_php_file');`它包含这个文件但是这些包含指令存在问题，因为包含期间的工作目录是'app/webroot'。

我该如何解决这个问题？是否有任何选项可以获取当前文件目录（在 lib php 文件中）以包含与其相关的其他文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:18:49.690

好吧，我用了`include_once(__DIR__.'/../path');`

# list - List.Find 和 CompoareTo 获取最低值

> ID：10511114
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:52:20.893
> 
> 标签：list, find, compareto

我将如何编写 Find() 以获取列表中的最小值？可能吗？谢谢！

```
class testClass
{ int value; }

List<testClass> newList;

newList.Find((a,b) => a.value.CompareTo(b.value)); // test for -1??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:46:35.003

在几乎任何具有通用数据结构的语言中，您几乎总能找到某种`Comparable`接口，允许您指定如何比较两个对象。在Java中，它是[`java.lang.Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口；在 C# 中，它是[`System.IComparable`](http://msdn.microsoft.com/en-us/library/10bh446d)类。为了回答您的问题，**请阅读您正在编码的语言的特定界面上的文档**。这应该给你足够的信息来开始。如果不是，您可能需要参加编程入门课程或阅读入门编程书籍。

# git - git目录与远程存储库冲突

> ID：10511115
> 
> 赞同：2
> 
> 时间：2012-05-09T06:52:21.837
> 
> 标签：git, directory

我是唯一一个在我的项目上工作的人，我有一台开发机器、一台 nas 和另一台机器。我在我的开发上工作，将我的项目的更改推送到我的 nas 上的远程仓库，通常这很好，但现在我做了一些目录更改并将它们推送到我的 nas 上的 master 分支。我再次进行了一些目录更改，并希望它们再次推动我的 nas。所以首先我做了一个拉动`git pull origin master`，但失败了：

`CONFLICT (rename/rename): Rename "svgopen/presentation/images/wine-problem.jpg"->"presentation/svgopen/images/wine-problem.jpg" in branch "HEAD" rename "svgopen/presentation/images/wine-problem.jpg"->"presentation/images/wine-problem.jpg" in "7fee244f7b93b0300783519870f2a8287ef6ace4"`

`git status` 显示：

```
#   added by them:      images/wine-problem.jpg
#   added by them:      images/wine-problem2.jpg
#   added by us:        svgopen/images/wine-problem.jpg
#   added by us:        svgopen/images/wine-problem2.jpg 
```

指示已移动的图像目录中的相同图像。有没有办法让 git 快速相信“我们”添加的所有内容都是需要维护的？而“由他们”是垃圾，可以忽略吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:00:37.097

如果您要进行合并，则可以使用以下选项：`git merge -s recursive -X ours`. 这将自动接受本地更改作为任何冲突解决方案中的正确更改。

或者，由于您是项目中唯一的人，您可能只是`git push --force`强制远程 repo 匹配您的本地副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:05:36.840

如果您已经处于冲突中，那么您可以：

```
git checkout --ours file 
```

有关更多详细信息，请参阅[此博客文章](http://gitready.com/advanced/2009/02/25/keep-either-file-in-merge-conflicts.html)

# java - 等待在 Firefox 浏览器中不起作用（Webdriver selenium 2.0 +Java）

> ID：10511117
> 
> 赞同：1
> 
> 时间：2012-05-09T06:52:31.223
> 
> 标签：java, selenium, webdriver

我正在使用 WebDriver(Eclipse -Java) 来自动化注册页面。单击“注册”按钮时，会显示“成功消息”，需要对其进行验证。

我可以在 IE8 中成功地做到这一点。但无法在 Firefox 中验证相同的内容。我尝试了不同的等待 1\. d1.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);

1.  WebDriverWait 等待 = new WebDriverWait(驱动程序, 10); wait.withTimeout(30, TimeUnit.SECONDS); wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("ElmId"));

2.  等待等待 = 新 FluentWait 等待 = 新 FluentWait(d1).withTimeout(60, SECONDS); wait.until(new Function() wait.until(ExpectedConditions.visibilityOf(d1.findElement(By.id("elementid"))));

有没有人遇到过类似的问题？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:49:22.357

也许您可以尝试使用其他条件类型？或者您也可以尝试通过覆盖 apply 方法来编写自己的。当使用提供的条件还不够时，我很少遇到这种情况。只有在使用我自己版本的 apply 方法后它才成功。

```
Wait<WebDriver> wait = new FluentWait<WebDriver>(driver).withTimeout(timeoutInSeconds, TimeUnit.SECONDS)
        .pollingEvery(pollingInterval,
            TimeUnit.MILLISECONDS);
    return wait.until(new ExpectedCondition<WebElement>() {

        @Override
        public WebElement apply(WebDriver arg0) {
            List<WebElement> findElements = driver.findElements(By.className(someClassName));
            for (WebElement webElement : findElements) {
                if (webElement.getText().equals(string)) {
                    return webElement;
                }
            }
            return null;
        }
    }); 
```

例如，这样的事情几次很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:43:32.557

单击按钮后的“成功消息”：它是使用 ajax/javascript 显示还是重新加载页面？

如果您使用 js 执行此操作，有时可能无法使用 WebDriver 命令验证消息，您也需要使用 js 进行验证。就像是：

```
Object successMessage = null;
int counter = 0;

    while ((successMessage == null) && counter < 5)
    {
        try
        {
            ((JavascriptExecutor)driver).executeScript("return document.getElementById('yourId')");
        }
        catch (Exception e)
        {
            counter +=1;
        }
    }

    if (successMessage != null) //would be better to use some assertion instead of conditional statement
    {
        //OK
    }
    else
    {
        //throw exception
    } 
```

while 循环是伪等待功能的丑陋方式。如果您不需要等待元素，您也可以将其删除。

替代方案可能是

```
Object result = ((JavascriptExecutor)driver).executeScript("return document.body.innerHtml"); 
String html = result.toString(); 
```

然后手动解析html。

# java - 在谷歌应用引擎中根据用户请求生成 csv 文件

> ID：10511118
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:52:32.200
> 
> 标签：java, google-app-engine, csv

当用户单击下载选项时，我需要以 csv 文件的形式下载用户报告（从数据存储中读取）。

据我所知，我们没有在谷歌应用引擎服务器中创建/存储文件。那么如何在csv中生成报告。

有没有办法做到这一点。

请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:32:48.377

很简单。您需要即时生成 CSV 文件，然后将其提供给用户。所以我想你会创建一种方法来引导 CSV 请求，而不是普通的 HTML 输出，而是生成请求的 CSV 文件。您还需要确保标题正确。

类似的问题已在[此处](https://stackoverflow.com/questions/5128941/writing-to-csv-files-and-then-zipping-it-up-in-appengine-java)讨论过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:44:21.423

您可以将数据保存在 blobstore 中并下载 blob。

# linq - “Equals”和“SequenceEqual”之间的区别？

> ID：10511130
> 
> 赞同：20
> 
> 时间：2012-05-09T06:53:11.330
> 
> 标签：linq, list, comparison, equals, equality

是否有以下情况：

```
Equals(MyList1, MyList2) != MyList1.SequenceEqual(MyList2); 
```

和有什么区别：

`Equals(obj1, obj2)`和`obj1.Equals(obj2)`

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-09T06:57:24.980

`Equals``true`仅当`MyList1`和`MyList2`是相同的实例时才返回。如果两个列表包含相同的项目，则
`SequenceEqual`返回。`true`

例子：

```
var list1 = new List<int> { 1, 2, 3 };
var list2 = new List<int> { 1, 2, 3 };
var list3 = list1;
var list4 = new List<int> { 1, 2, 3, 4 };

Equals(list1, list2) == false
list1.SequenceEqual(list2) == true

Equals(list1, list3) == true
list1.SequenceEqual(list3) == true

Equals(list1, list4) == false
list1.SequenceEqual(list4) == false 
```

* * *

`Equals(obj1, obj2)`和的区别在于`obj1.Equals(obj2)`第一个使用静态方法[`Object.Equals`](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)，第二个使用实例方法`Equals`。`obj1`如果覆盖类，这两个调用的结果会有所不同`Object.Equals`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T07:08:55.670

对于@Daniel首先回答的问题的第二部分：

```
Equals(obj1, obj2) and obj1.Equals(obj2) 
```

obj1.Equals(obj2) 是对象的实例方法，如果 obj1 为 null，它将抛出异常。其中 Equals(obj1,obj2) 是静态方法，如果 obj1 为空，它将起作用。您还可以为一个类[覆盖 Euqals](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)

```
object obj1 = new object();
object obj2 = new object();
Console.WriteLine(obj1.Equals(obj2)); //print false
obj1 = null;
Console.WriteLine(obj1.Equals(obj2)); // will throw exception
Console.WriteLine(Equals(obj1, obj2));// return false in this case and since its static it will not throw the exception 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T16:37:55.743

通常，`Equals`应该表示“永久”等价关系。如果被引用的对象`X`报告它`Equals`是由 Y 引用的对象，那么前一个对象应该总是报告它`Equals`是后者。通常，可变对象不会将自己报告为除自身以外的任何事物，因为即使可变对象的状态在某个时刻与另一个对象的状态匹配，也不能保证它总是如此。

相反，SequenceEqual 表示暂时的条件。它所表明的只是，*在调用它时*，两个对象的枚举是否会报告相同的项目序列。它不对对象的过去、现在或未来状态做出任何其他承诺。

如果所有对象都是 type `List<string>`，`Equals`并且`SequenceEqual`将 test 测试以下条件：

*   如果`X`和`Y`引用同一个对象`X.Equals(Y)`，并且`X.SequenceEqual(Y)`只要这些引用存在并且两者都没有指向另一个对象，那么两者都将为真。

*   如果它们引用包含相同项目的不同列表，`X.Equals(Y)`则为假，但`X.SequenceEqual(Y)`为真；请注意，如果对一个或两个列表进行更改，`X.SequenceEqual(Y)`可能会变为错误。

*   如果它们引用包含不同项目的不同列表，则两者`X.Equals(Y)`都是`X.SequenceEquals(Y)`错误的。如果对一个或两个列表进行更改，`X.SequenceEquals(Y)`可能会变为 true，但`X.Equals(Y)`不会。

除非以线程不安全的方式使用列表（在这种情况下，所有赌注都关闭），或者有一个不遵守标准`Equals`合约的对象列表，否则没有办法`X.Equals(Y)`可以是`X.SequenceEquals(Y)`真假。

# google-maps - 找到一个位置落入的界限？

> ID：10511137
> 
> 赞同：1
> 
> 时间：2012-05-09T06:53:32.357
> 
> 标签：google-maps, google-maps-api-3

我有一个城市地区的 MySQL 数据库。每个区域的属性为：lat、lng、SWLat、SWLng、NELat、NELng。

我在编写查询时需要帮助，告诉我给定位置的区域，包括 Lat & Lng。

在此先感谢，萨尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:11:07.620

没有足够的信息，但这似乎符合要求：

```
SELECT * FROM table WHERE
myLat >= SWLat AND myLat <= NELat AND
myLng >= SWLng AND myLng <= NELng 
```

`myLat`并且`myLng`是您尝试查找包含区域的位置的坐标。

# php - 如何使用模板精简版计数

> ID：10511140
> 
> 赞同：0
> 
> 时间：2012-05-09T06:53:38.590
> 
> 标签：php, template-lite

我有一个这样的脚本。下面的代码为`<li></li>`每个 foreach 对象创建一个新的。我想要的是创造`<li></li> html tag when counter is 4.`

```
 {foreach from=$books value=book}
    <div id="box1" class="box">
        <div id="box2" class="box"> <img src="{$imageUrl}/{$book.image}" width="145" height="205"></div>
        <div id="box3" class="box">
            <div class="baslik_kitap">{$book.title}</div>
            <div class="baslik_kitap2"></div>
            <div class="baslik_kitap"></div>
                <div class="baslik_kitap2">{$book.description|truncate:75:"..."}.</div>
                <div class="baslik_kitap"><a href="http://cmkzl.nokta.com/kitaplar/{$book.title}"><img src="{$imageUrl}/detaylar_btn.png" width="143" height="51"></a></div>

        </div>
    </div> 

            {/foreach} 
```

下面的代码`<li></li>`使用每个对象创建。

为了`<li></li>`在计数器为 4 时创建

我写了这个

{foreach from=$books value=book} {counter start=0 skip=1 print=false} {$book.title} {$book.description|truncate:75:"..."}。

```
 </div>
    </div> 
            {if counter eq 4 } // here counter must be 0 and then foreach must continue with new counter
            {/foreach} 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:05:35.513

嗯从未使用过templatelite，但从文档看来，您可以通过以下方式获得您想要的东西：

```
{counter start=0 print=false assign=mycounter}

{if $mycounter is div by 4}
   <li></li>
{/if} 
```

# javascript - 从 JavaScript 访问 XUL 元素时遇到问题

> ID：10511141
> 
> 赞同：0
> 
> 时间：2012-05-09T06:53:52.600
> 
> 标签：javascript, events, firefox-addon, xul

如果我在函数内部执行它，我在使用 DOM 方法中访问元素时遇到问题，`file.xul`如下所示`someone.listen_request()`。

但如果我在 `progress_bar()`函数内部执行它，它会正常工作。

在这种情况下，任何人都可以帮助我。

我的代码：

```
// Listening to an event from a php/html file
var someone = 
{
  listen_request: function() 
  {
    document.addEventListener("record-id", function(event) 
    {
      var node = event.target, doc = node.ownerDocument;
      var d=node.getUserData("data");
      var str=d.split(",");
      var text=str[0];
      var record_id=str[1];
      var field_id=str[2];// Working fine till here
      // **this is not working**
      document.getElementById("Telephone2").value="helo"; 
    }, false, true);
  }
}

someone.listen_request();

// Called at onLoad and onBlur..
function progress_bar(len,page_values)
{
  // **here it is working fine**
  document.getElementById("Telephone2").value="helo";
  var filed_cnt=0;
  var tot_rows=0;
  for(i=0;i<len;i++)
  {
    if(page_values[i]!="")
    { 
      filed_cnt+=parseInt(1);
    }
  }
  var compeletion= (filed_cnt/len)*100;
  var complete=Math.round(compeletion);
  document.getElementById("pbar").value=complete;
  document.getElementById("meter").value=complete;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:15:47.873

最后我做到了。。

**下面的代码适用于我：**

```
mainWindow.document.getElementById("sidebar").contentDocument.getElementById("Telephone2").value="hello"; 
```

# ios - 在 iPhone 应用程序中分享到 Facebook 时显示警告消息

> ID：10511143
> 
> 赞同：5
> 
> 时间：2012-05-09T06:54:03.770
> 
> 标签：ios, sharekit, facebook-sharer

我是一个新的 ios 开发人员。我已经创建了一个 iPhone 应用程序，我想在其中使用“Sharekit”框架。为此，我已完成共享工具包文档中描述的所有设置。但是当我想分享然后显示以下消息

“错误：此端点已被弃用。要暂时重新启用它，您可以禁用“august_2012”平台迁移。它将在 2012 年 8 月 1 日永久禁用。

我不知道我想念什么。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:48:45.113

您可能正在使用旧的、过时的原始 ShareKit。您可能想尝试维护和更新的[ShareKit 2.0 。](https://github.com/ShareKit/ShareKit/)

编辑：

新的 shareKit 与原来的相比有很多变化，所以从头开始重新添加它是明智的，并仔细遵循[新的安装指南](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)。如果您在设置 ShareKit 2.0 后仍遇到同样的错误，则表明您仍在使用旧版本的 FBConnect (facebook-ios-sdk)。在这种情况下，请确保您使用新的 - 它位于 Submodules/facebook-ios-sdk 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:02:09.393

我遇到了同样的问题，因为我使用了 FBConnect。Facebook 已经安排了几项“重大变更”。这个特别的在 2012 年 8 月 1 日被强加给每个人。因此，禁用 Breaking Change 将不再有帮助。

从技术上讲，ShareKit 应该可以解决这个问题。但是，您应该真正检查该功能是否适合您。去：

```
Apps>>your app>>Insights>>See All 
```

然后应用公式：

```
Value = extra app sales just for having the feature + sales due to sharing on FB - yearly maintenance cost to update FB software - customer service cost for FB bugs - lost sales due to disgruntled FB users. 
```

就我而言，Value 是负数，所以我从我最畅销的 iOS 应用程序中删除了该功能。FBConnect 是我的应用程序中最容易出错的部分，不幸的是它弊大于利。

对于那些感兴趣的人，以下是我们遇到的错误：

*   当人们在 FB 上更改密码但会话密钥仍然有效时，FBConnect 会中断。没有办法检测到这一点，所以人们只是被绞死了。
*   FBConnect 会经常超时（假设这是他们的服务器问题）。
*   FBConnect 不能很好地处理覆盖范围外（没有互联网）的连接。

我不是在这里咆哮，我只是提供一个技术见解，在确定解决问题的正确方法之前考虑这一点很重要。更新 SDK 对某些人来说是正确的解决方案，但不是所有人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:07:23.930

在 facebook "http://developers.facebook.com/" 中打开应用程序

应用>>您的应用>>设置>>编辑设置>>高级>>迁移>>禁用所有重大更改

它会起作用的。

# asp.net - ASP.NET Ajax 回发突然在 iPhone/iPad 上停止

> ID：10511145
> 
> 赞同：7
> 
> 时间：2012-05-09T06:54:20.300
> 
> 标签：asp.net, iis, postback, mobile-safari

我有一个使用更新面板和一些按钮的 Asp.Net 4.0 网站/控制界面。更新面板连接到每 5 秒执行一次的计时器，从而导致部分回发。这些按钮切换一些设置，然后通过类似于以下的调用强制更新更新面板：

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm._doPostBack('<%= UpdatePanel.ClientID %>', '');
return true; 
```

该站点在 IE/Firefox 和 Safari 移动设备 (IPhone/iPad) 上运行良好，但在移动设备上，回发随机且静默停止工作。我认为这*可能*与节省电池有关，并且 Safari 在空闲时会关闭部分回发。问题是当用户返回站点时，回发被完全关闭，计时器和按钮都不再导致任何回发。（我已经监控了服务器上的网络流量来验证这一点）。即使用户刷新网站（多次），部分回发也不会重新发挥作用。它只是停止向服务器发布数据。然后突然并且没有特别的原因回发再次开始工作。停机时间通常长达 10 分钟，这完全使我的网站无法达到其目的。

鉴于回发需要很长时间才能再次开始，我想知道客户端或 IIS 中是否有任何设置可以使用？

该网站将仅在我的客户设备上运行，它不公开，所以如果在客户端上有任何设置可以玩，我会支持它。

我对此感到非常困惑，并且还没有找到触发“错误”的方法，它有时会发生。非常感谢任何建议和提示。

* * *

更新：

添加了一些错误处理，当回发失败时，我（不一致）收到以下消息：

> 该页面正在执行异步回发，但 ScriptManager.SupportParialRendering 属性设置为 false。确保在回发期间将该属性设置为 true。

奇怪的是，这个属性在第一个实例中显然是正确的，否则回发将永远无法工作，事实并非如此。

* * *

更新 2：发现以下博客文章建议更改 web.config 中的 browserCap 设置。现在试试这个。会回来汇报的。其他建议仍然很受欢迎。 [ASP.NET 4 BrowserCaps（或者：他们在想什么？）](http://dev.flauschig.ch/wordpress/?p=271#more-271)

以上在全屏模式下禁用 safari mobile 中的 javascript（从主屏幕运行）。以下文章建议解决此问题。 [问题：iPad 与 ASP.NET](http://blog.lavablast.com/post/2011/05/29/Gotcha-iPad-versus-ASPNET.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T06:24:19.987

我的问题中“更新 2”下的发现解决了这个问题。显然 Safari 用户代理偶尔会被识别为 Mozilla 0.0，如以下博客文章中所述：[ASP.NET 4 BrowserCaps（或：他们在想什么？）](http://dev.flauschig.ch/wordpress/?p=271#more-271)：

> 第一个 WTF 是 .NET 框架如果检测到来自 BrowserCaps 不支持异步回发的浏览器的异步回发，它实际上会引发异常。就好像他们认为他们最了解谁能够异步回发，即使有大量相反的证据……</p>
> 
> 下一个 WTF 更难找到。为什么 Safari UserAgents 偶尔会被识别为 Mozilla 0.0，为什么即使使用刚刚从异常中复制的 UserAgent 字符串，我也无法重现该问题？
> 
> 答案在于
> 
> `<browserCaps userAgentCacheKeyLength="64" />`
> 
> 用户代理缓存密钥长度的默认设置是采用 UserAgent 字符串的前 64 个字符。...

在页面下方：

> 将 userAgentCacheKeyLength 设置为 256 解决了该问题，即使仍然存在标识为 Mozilla 0.0 的 UserAgent 字符串。至少现在是一致的。

**因此，放入`<browserCaps userAgentCacheKeyLength="256" />`Web.Config 解决了这个问题。**

* * *

不幸的是，当 safari 浏览器在全屏模式下使用时（链接保存在主屏幕上），这会导致另一个问题。在全屏模式下，Safari 使用不同的 HTTP 用户代理字符串，并且 ASP.NET 不再将浏览器识别为 Safari，而是将其识别为没有功能的通用浏览器，例如 JavaScript 和 JQuery 将停止工作。[在Gotcha: iPad vs ASP.NET](http://blog.lavablast.com/post/2011/05/29/Gotcha-iPad-versus-ASPNET.aspx)中进一步阐述了这一点。解决方案是在每个网站的Page_Init中放入以下内容。不是很优雅，但它与上述内容一起使用：

```
protected void Page_PreInit(object sender, EventArgs e)
{
   if (Request.UserAgent != null && Request.UserAgent.IndexOf("AppleWebKit", StringComparison.CurrentCultureIgnoreCase) > -1)
   {
      this.ClientTarget = "uplevel";
   }
} 
```

# java - 本机调用过多不影响速度

> ID：10511146
> 
> 赞同：0
> 
> 时间：2012-05-09T06:54:22.670
> 
> 标签：java, opengl, java-native-interface, lwjgl

为什么这两段代码在相同条件下运行，运行时间没有差异？

**代码 1**

```
static long time = 0;

static int n = 200;

static float[] vq = new float[200 * 200 * 200 * 3];
static int[] iq = new int[200 * 200 * 200];

static FloatBuffer verts = BufferUtils.createFloatBuffer(vq.length);
static IntBuffer ind = BufferUtils.createIntBuffer(iq.length);

static void draw() {

    for (int i = 0; i < n; i++) {
        for (int j = 0; j < n; j++) {
            for (int k = 0; k < n; k++) {
                int index = (i * n * n) + (j * n) + k;
                vq[3 * index + 0] = i;
                vq[3 * index + 1] = j;
                vq[3 * index + 2] = k;

                iq[index] = index;
            }
        }
    }

    verts.put(vq);
    ind.put(iq);

    verts.flip();
    ind.flip();

    GL11.glEnableClientState(GL11.GL_VERTEX_ARRAY);

    GL11.glVertexPointer(3, 0, verts);

    GL11.glDrawElements(GL11.GL_QUADS, ind);

    GL11.glDisableClientState(GL11.GL_VERTEX_ARRAY);

    long newTime = System.currentTimeMillis();
    System.out.println(newTime - time);
    time = newTime;
} 
```

**代码 2**

```
static int n = 200;

static long time = 0;

static void draw() {

    GL11.glBegin(GL11.GL_QUADS);

    for (int i = 0; i < n; i++) {
        for (int j = 0; j < n; j++) {
            for (int k = 0; k < n; k++) {
                GL11.glVertex3f(i, j, k);
            }
        }
    }

    GL11.glEnd();

    long newTime = System.currentTimeMillis();
    System.out.println(newTime - time);
    time = newTime;
} 
```

我认为**Code 2**应该比**Code1**慢的原因是它有近 800 万个本机调用，但**Code 1**只有几个，它们在结果中做同样的事情。

原因是什么，如何提高代码的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:37:57.933

代码 1 包括将您的值复制到一个数组中，然后将该数组复制到本机内存中 - 如果您的 n 保持不变，您可以通过只执行一次来避免这种开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:19:21.593

这里重要的是 OpenGL 方法的作用，因为如果代码 2 的`glVertexPointer`和`glDrawElements`方法遍历提供的数组，您最终会得到与您在自己处理迭代的代码 1 中所做的几乎一样多的迭代和方法。我不熟悉 OpenGL，但我假设`glVertexPointer`并且`glDrawElements`需要遍历提供的数组以创建等效于在每个元素上调用 glVertex3f 的内容。

简而言之，无论是在您的 java 代码中还是在加载的库本身中，迭代和本地方法调用的数量都大致相等。

至于改进您的代码，我无话可说，因为我从未使用过 OpenGL。

# jquery - HTML5 - 翻书页面转换

> ID：10511150
> 
> 赞同：-3
> 
> 时间：2012-05-09T06:55:04.410
> 
> 标签：jquery, css

> **可能重复：**
> [HTML5 的翻页效果？](https://stackoverflow.com/questions/4613515/page-flip-effect-for-html5)

谁能建议我如何使用 Css3 或 jquery 进行翻页（如翻书/狗耳朵）效果页面转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:00:22.930

你不能单独使用 CSS3 来做到这一点。这是一个使用 Canvas 的示例。 [http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/](http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/)

# c - Windows 中的目录是否有 inode 编号？

> ID：10511151
> 
> 赞同：2
> 
> 时间：2012-05-09T06:55:07.553
> 
> 标签：c, windows, inode

我需要在 Windows 中找到一个目录的 inode 号。使用`_stat`and`_stat64`函数，我可以获取文件的 inode 和其他信息。但是当我对 Windows 目录使用相同的目录时，它总是为任何目录提供相同的编号。

有没有办法找到 Windows 目录的 inode 号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:03:25.720

从[windows stat 文档](http://msdn.microsoft.com/en-us/library/14h5k7ff.aspx)，

> **st_ino**
> 
> 文件的信息节点（inode）的编号（特定于 UNIX）。在 UNIX 文件系统上，inode 描述文件日期和时间戳、权限和内容。当文件彼此硬链接时，它们共享相同的 inode。**inode 和 st_ino 在 FAT、HPFS 或 NTFS 文件系统中没有任何意义。**

因此，不要依赖 Windows 系统上的 inode 编号。它是一个特定于 Unix 的概念。

有关 Windows 如何在没有 inode 但使用类似的东西的情况下管理文件的一些想法，请参阅此[SO 帖子](https://stackoverflow.com/questions/7162164/does-windows-have-inode-numbers-like-linux)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:42:21.947

Windows 文件系统没有直接模拟大多数 Unix 文件系统中的 inode 编号。

如果您想要唯一且明确地标识相关目录的内容，您可能会发现卷序列号/FileId 组合就足够了。您可以通过将（第二个参数）设置为来检索这些[`GetFileInformationByHandleEx`](http://msdn.microsoft.com/en-us/library/aa364953.aspx)（尽管有名称，但可以检索有关目录的信息）。`FileInformationClass`[`FileIdInfo`](http://msdn.microsoft.com/en-us/library/hh802691.aspx)

不过，这对 NTFS*非常*有用。正如您将在文档中看到的那样，FAT 文件系统的限制非常重要（尽管根据您的需要，它仍然总比没有好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:08:47.063

来自维基百科：

> 索引节点（inode）是传统 Unix 风格文件系统（如 UFS）上的数据结构。inode 存储有关常规文件、目录或其他文件系统对象的所有信息，但其数据和名称除外。

Windows 使用的常用文件系统不是围绕 inode 概念构建的，它们是不同的，因此没有“inode number”需要报告，除此之外。

这是一个解释清楚的链接：[Inode Explanation](https://unix.stackexchange.com/questions/4950/what-is-an-inode)

# iphone - 如何获取通讯录联系人中每个人的姓名和电子邮件

> ID：10511160
> 
> 赞同：0
> 
> 时间：2012-05-09T06:55:48.347
> 
> 标签：iphone

我是 iphone 的新手。现在我在我的项目中感到震惊，我的任务是将每个人的姓名和电子邮件地址放在一个数组中。如果有人知道这个，请帮助我来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:03:20.967

ABAddressBookRef addressBook = ABAddressBookCreate();

```
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);
[menuArray removeAllObjects];
if(menuArray ==nil)
    menuArray = [[NSMutableArray alloc] init];

for (int i = 0; i < nPeople; i++) 
{
    NSMutableDictionary *localDic=[[NSMutableDictionary alloc]init];
    ABRecordRef ref = CFArrayGetValueAtIndex(allPeople, i);

//    ABRecordID recordId = ABRecordGetRecordID(ref);
//    [localDic setObject:[NSString stringWithFormat:@"%d",recordId] forKey:@"Record_Id"];

    //get firstname
    CFStringRef firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    [localDic setObject:[NSString stringWithFormat:@"%@",firstName] forKey:@"first_name"];

    //get lastname
    CFStringRef lastName = ABRecordCopyValue(ref, kABPersonLastNameProperty);
    [localDic setObject:[NSString stringWithFormat:@"%@",lastName] forKey:@"last_name"];

//    NSString *contactFirstLast = [NSString stringWithFormat: @"%@ %@",firstName,lastName];
//    [localDic setObject:contactFirstLast forKey:@"FullName"];

    //get EmailId
    ABMutableMultiValueRef EmailIds = ABRecordCopyValue(ref, kABPersonEmailProperty);
    CFTypeRef EmailId;
    NSString *EmailLabel;

    for (CFIndex i = 0; i < ABMultiValueGetCount(EmailIds); i++) {
        EmailLabel=[NSString stringWithFormat:@"%@",ABMultiValueCopyLabelAtIndex(EmailIds,i)];

        if([EmailLabel isEqualToString:@"_$!<Home>!$_"])
        {
            EmailId = ABMultiValueCopyValueAtIndex(EmailIds,i);
            [localDic setObject:[NSString stringWithFormat:@"%@",EmailId] forKey:@"Email_Home"];

        }
        else if([EmailLabel isEqualToString:@"_$!<Work>!$_"])
        {
            EmailId = ABMultiValueCopyValueAtIndex(EmailIds,i);
            [localDic setObject:[NSString stringWithFormat:@"%@",EmailId] forKey:@"Email_Work"];
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:58:50.483

这是姓名、电子邮件和电话号码的代码

```
 -(NSMutableArray*)getEmailAndPhoneOfPhoneContacts
    {

        NSLog(@"getPhoneContacts");

        NSAutoreleasePool *pool= [[NSAutoreleasePool alloc] init];

        NSMutableArray *tempArray=[[NSMutableArray alloc] init];
        ABAddressBookRef iPhoneAddressBook=ABAddressBookCreate();
        if(!iPhoneAddressBook)
        {
            DLog(@"unable to open addressBook");
        }

        CFArrayRef allPeople=ABAddressBookCopyArrayOfAllPeople(iPhoneAddressBook);
        NSMutableArray *peopleArray=[NSMutableArray  arrayWithArray:(NSMutableArray*)allPeople];

        BOOL shouldReleasePool=NO;

        NSInteger i;
        NSLog(@"Num of people while getting from address bool %d and syncing",[peopleArray count]);
        for(i=0;i<[peopleArray count];i++)
        {

            ABRecordRef record=[peopleArray objectAtIndex:i];

            Contact *objPhoneContact=[[Contact alloc] init];
            objPhoneContact.contactType=STATIC_CONTACT;

        CFStringRef prefixName=ABRecordCopyValue(record, kABPersonPrefixProperty);
        CFStringRef firstName=ABRecordCopyValue(record, kABPersonFirstNameProperty);
        CFStringRef middleName=ABRecordCopyValue(record, kABPersonMiddleNamePhoneticProperty);
        CFStringRef lastName=ABRecordCopyValue(record, kABPersonLastNameProperty);
        CFStringRef suffixName=ABRecordCopyValue(record, kABPersonSuffixProperty);
        NSMutableString *contactname =[[NSMutableString alloc] init];

        // concating all the names
        if (prefixName) {
            [contactname appendString:[NSString stringWithString:(NSString*)prefixName]];
            CFRelease(prefixName);
        }
        if (firstName) {
            [contactname appendString:[NSString stringWithString:(NSString*)firstName]];
            CFRelease(firstName);
        }
        if (middleName) {
            [contactname appendString:[NSString stringWithString:(NSString*)middleName]];
            CFRelease(middleName);
        }
        if (lastName) {
            [contactname appendString:[NSString stringWithString:(NSString*)lastName]];
            CFRelease(lastName);
        }
        if (suffixName) {
            [contactname appendString:[NSString stringWithString:(NSString*)suffixName]];
            CFRelease(suffixName);
        }
        // if emty then get the organization property
        if (contactname == nil || [contactname length]<1) {
            CFStringRef orgName=ABRecordCopyValue(record, kABPersonOrganizationProperty);
            if (orgName) {
                [contactname appendString:[NSString stringWithString:(NSString*)orgName]];
                CFRelease(orgName);
            }

        }
        //if still empty then assign (no name) to it
        if (contactname == nil || [contactname length]<1)
            [contactname setString:@"(no name)"];

            objPhoneContact.mContactName = [contactname stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

            [contactname release];
            contactname = nil;
            ABMutableMultiValueRef multi;
            int multiCount=0;

            multi = ABRecordCopyValue(record, kABPersonPhoneProperty);

            NSUInteger phoneIndex_mobile=11;
            NSUInteger phoneIndex_iPhone=31;
            NSUInteger phoneIndex_home=51;
            NSUInteger phoneIndex_work=71;
            NSUInteger phoneIndex_main=91;
            NSUInteger phoneIndex_home_fax=111;
            NSUInteger phoneIndex_work_fax=131;
            NSUInteger phoneIndex_pager=151;
            NSUInteger phoneIndex_other=171;  

            multiCount=ABMultiValueGetCount(multi);
            if(multiCount ==0)
            {
                //objPhoneContact.mPhoneNum=@"";
            }
            else 
            {
                for( int i=0; i < multiCount; i++)
                {

                    ContactProperty* objPhoneContactProperty=[[ContactProperty alloc] init];

                    objPhoneContactProperty.mContactPropertyString=(NSString*)ABMultiValueCopyValueAtIndex(multi, i);
                    objPhoneContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                    objPhoneContactProperty.mDisplayName=[objPhoneContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                    //          DLog(@"Display name %@",objPhoneContactProperty.mDisplayName);

                    if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"mobile"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_mobile;
                        phoneIndex_mobile++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"iPhone"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_iPhone;
                        phoneIndex_iPhone++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_home;
                        phoneIndex_home++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_work;
                        phoneIndex_work++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"main"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_main;
                        phoneIndex_main++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"HomeFAX"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_home_fax;
                        phoneIndex_home_fax++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"WorkFAX"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_work_fax;
                        phoneIndex_work_fax++;
                    }
                    else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"pager"]==NSOrderedSame)
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_pager;
                        phoneIndex_pager++;
                    }
                    else
                    {
                        NSRange range1,range2,range3;

                        range1=[objPhoneContactProperty.mDisplayName rangeOfString:@"mobile" options:NSCaseInsensitiveSearch];
                        range2=[objPhoneContactProperty.mDisplayName rangeOfString:@"home" options:NSCaseInsensitiveSearch];
                        range3=[objPhoneContactProperty.mDisplayName rangeOfString:@"work" options:NSCaseInsensitiveSearch];

                        if (range1.location!=NSNotFound) 
                        {
                            objPhoneContactProperty.mContactPropId=phoneIndex_mobile;
                            phoneIndex_mobile++;
                        }
                        else if (range2.location!=NSNotFound) 
                        {
                            objPhoneContactProperty.mContactPropId=phoneIndex_home;
                            phoneIndex_home++;
                        }
                        else if (range3.location!=NSNotFound) 
                        {
                            objPhoneContactProperty.mContactPropId=phoneIndex_work;
                            phoneIndex_work++;
                        }
                        else 
                        {
                            objPhoneContactProperty.mContactPropId=phoneIndex_other;
                            phoneIndex_other++;
                        }
                    }

                    objPhoneContactProperty.mContactDataType=@"Phone";

                    [objPhoneContact.mPropertyArray addObject:objPhoneContactProperty];
                    [objPhoneContactProperty release];
                }
            }

            if(multi)
                CFRelease(multi);

            multi=ABRecordCopyValue(record,kABPersonEmailProperty);

            NSUInteger emailIndex_home=301;
            NSUInteger emailIndex_work=321;
            NSUInteger emailIndex_other=341;  //~400

            multiCount=ABMultiValueGetCount(multi);
            if(multiCount ==0)
            {
                //objPhoneContact.mEmailId=@"";
            }
            else 
            {
                for( int i=0; i < multiCount; i++)
                {
                    ContactProperty* objEmailContactProperty=[[ContactProperty alloc] init];

                    objEmailContactProperty.mContactPropertyString=(NSString*)ABMultiValueCopyValueAtIndex(multi, i);
                    objEmailContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                    objEmailContactProperty.mDisplayName=[objEmailContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                    if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                    {
                        objEmailContactProperty.mContactPropId=emailIndex_home;
                        emailIndex_home++;
                    }
                    else if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                    {
                        objEmailContactProperty.mContactPropId=emailIndex_work;
                        emailIndex_work++;
                    }
                    /*
                     else if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"other"]==NSOrderedSame)
                     {
                     objEmailContactProperty.mContactPropId=[NSString stringWithFormat:@"%d",emailIndex_other];
                     emailIndex_other++;
                     }
                     */
                    else 
                    {
                        objEmailContactProperty.mContactPropId=emailIndex_other;
                        emailIndex_other++;
                    }

                    objEmailContactProperty.mContactDataType=@"Email";

                    [objPhoneContact.mPropertyArray addObject:objEmailContactProperty];
                    [objEmailContactProperty release];
                }
            }

            if(multi)
                CFRelease(multi);

            [tempArray addObject:objPhoneContact];
            [objPhoneContact release];

            if(shouldReleasePool)
            {
                [innerPool drain];
                shouldReleasePool=NO;
            }

        }
        self.mPhoneContactArray=tempArray;
        CFRelease(iPhoneAddressBook);
        CFRelease(allPeople);

        [pool drain];
        return [tempArray autorelease];
    } 
```

# java - 如何在 Thirft IDL 中从 Java 运行时异常生成异常对象

> ID：10511167
> 
> 赞同：0
> 
> 时间：2012-05-09T06:56:07.193
> 
> 标签：java, thrift

Thrift IDL 文件中的默认异常声明生成继承自 Java Exceptions 类的 Exception 对象。如何在 Thrift IDL 中从 Java RuntimeException 类生成异常？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:11:50.330

是的，我在我的代码中严重依赖 thrift 0.8，我不想在整个代码中都放置“ throws MyException”。我还没有找到比破解编译器更优雅的方法。

# android - 如何以编程方式在 Android 设置中的位置和安全性中关闭“使用无线网络”？

> ID：10511169
> 
> 赞同：0
> 
> 时间：2012-05-09T06:56:21.933
> 
> 标签：android, android-wireless

我制作了一个需要位置管理器无线网络的应用程序。如果用户启动应用程序，将显示一个对话框，提示“请打开无线网络以获得更好的位置”

如果用户决定打开它，它将永远打开，我的意思是如果用户退出我的应用程序，它不会关闭，如果你知道我的意思，这个东西不是电池保护程序。

例如，我如何在 onStop() 上以编程方式将其关闭？

此选项位于设置 > 位置和安全 > 使用无线网络（开/关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:08:13.880

> 例如，我如何在 onStop() 上以编程方式将其关闭？

您不能以编程方式更改此设置。

# java - `java (0 % 2 != 0) == false`

> ID：10511170
> 
> 赞同：8
> 
> 时间：2012-05-09T06:56:23.200
> 
> 标签：java, boolean, zero, modulus

我一直坚持的部分是 `boolean(0 % 2 !=0)` == false。我的意思是如果 2 进入 0、0 次，那么余数就是 2，并且 2 不等于 0。所以它应该是真的。但是，当我将布尔值放入我的 java 程序中时，它会将其视为错误。有谁知道为什么？

我能想到的唯一合乎逻辑的答案是，整数可能会进入 0 和无限次，因此被认为是错误的，有人吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-09T06:58:37.053

有两个步骤：

*   `0 % 2`评估为`0`。

*   `0 != 0`评估为`false`。

为了详细说明第一步，JLS[定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3)了`%`这样的操作符：

> 据说二进制 % 运算符从隐含的除法中产生其操作数的其余部分；左边的操作数是被除数，右边的操作数是除数。

除以的其余部分`0`是`2`而`0`不是`2`您似乎认为的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T06:59:47.490

`%`返回除法后的余数。零除以任何东西（除了它自己！）是零，所以没有余数。

因此`0 % 2`是`0`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T07:05:25.483

0%2 = 0，因为 0/2 = 0 和提醒 0，或者 0*2+提醒 = 0。

你只是误解了模数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T07:06:30.770

我认为你混淆了 0%2 和 2%0 （这是不可能的）。0%n 始终等于 0。

好吧，让我们剖析一下……</p>

1)`0 % 2`

模是有限除法的其余部分。例如 10%3 是 10/3 的其余部分。10/3 是 3+⅓。所以余数为 1。

0%2 是 0/2 的其余部分。0/2=0，没有休息，因此0%2=0。

2)`0 % 2 != 0`

这意味着 0%2 与 0 不同。我们现在知道它是错误的。

3)`boolean(0 % 2 != 0)`

这只是铸造。您将结果转换为布尔值。它不仅仅是一些错误的假设，而是获得了 Java 值`false`。

4)`boolean(0 % 2 != 0) == false`

这`==`意味着这里有一个测试。测试可以简化为（如上所示）`false == false`。`false`等于`false`? _ 是的。结果是`true`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-02T18:10:28.913

它与运算符优先级有关，即 Java 解释器评估运算符的顺序。

有关文档，请参见[此处](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)。一个有用的首字母缩写词是 BUDMASRELCA - **B**球拍、**一**元、**D** iv-乘法（实际上是乘法，因为它包括模数）、**A** **ddittion-**减法、**R** elational 、**E**质量、**L** ogical、**C**条件（三元）、**A****分配**。我错过了按位运算符，但它们可以归类在逻辑下，并且它们优先于普通逻辑运算符。

 ******0 % 2 !=0 首先被评估为 0%2（乘法），然后它的结果 0 被评估为 != 0。（平等）

在内部，编译器构建一个二叉表达式树来表示如下所示的顺序，使用运算符作为根，使用叶作为值或进一步的运算符（在递归情况下）。因此，需要先评估具有运算符的子树，然后才能使用其叶子的值评估根运算符。

```
 !=
 / \
%   0
/\
0  2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T07:05:39.217

> *如果 2 进入 0, 0 次，则余数为 2。*

不是`2 goes into 0`but `0 goes into 2`，所以 devision 的结果是 0，reminder 是 0。******

# list - 长的 scala 范围

> ID：10511171
> 
> 赞同：7
> 
> 时间：2012-05-09T06:56:23.777
> 
> 标签：list, scala, append, range, out-of-memory

我是 Scala 语言的新手。

我需要 Long 类型的 Range。

我需要一个包含步骤 1 的 [1, 2, 3 ... 10000000] 列表。如果我使用 until/to 我会因为使用 Long 而不是 Int 而出现错误。

我尝试编写一个简单的函数，它需要一个开始、一个结束和一个空列表，并生成一个 [start .. end] 列表。

这是我的功能：

```
def range_l(start : Long, end : Long, list : List[Long]) : List[Long] = {
    if (start == end){
        val add_to_list = start :: list
        return add_to_list
    }
    else {
        val add_to_list = start :: list
        range_l(start + 1, end, add_to_list)
    }
} 
```

如果我这样称呼它：我在以下行中`range_l(1L, 1000000L, List())`收到错误：`OutOfMemory``add_to_list = start :: list`

你能给我什么建议？我怎样才能获得`Range[Long]`或如何优化功能。如何避免 OutOfMemory？

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T10:59:21.633

您可以使用以下语法创建这样的范围：

```
val range = 1L to 10000000L 
```

'L' 是强制性的，以告知编译器文字是长整数而不是整数。

然后，您可以`List`在实例上使用几乎所有方法`range`。它不应该填满你的记忆，因为中间值是在需要时生成的。该范围可以传递给任何期望 a `Traversable[Long]`、 a `Seq[Long]`、 an`Iterable[Long]`等的方法。

但是，如果您真的需要一个`List`公正的调用`range.toList`（并增加堆大小以容纳所有列表元素）......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T07:24:34.133

您可以改为使用标准库中的[NumericRange[Long]](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.NumericRange)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-09T07:15:13.130

您可能不需要范围。我会接受一个 Stream 并对其进行迭代。

```
def stream(i: Long = 1): Stream[Long] = i #:: stream(i + 1) 
```

生成一个无限流，其中元素之间的差异为 1。因为 Stream 是一个惰性集合，所以您不会收到任何错误。要迭代超过 10000000 个元素，您只需使用以下命令：

```
val range = stream take 10000000
for (i <- range) {
  ...
} 
```

`take 10000000`将返回`Stream`大小为 10000000 的 a。因为`Stream`是 a，`Iterable`您可以将其传递给 a 以供理解。

# java - 如何在 jax-rs 中显示 PDF 的文件下载对话框？

> ID：10511174
> 
> 赞同：1
> 
> 时间：2012-05-09T06:56:39.433
> 
> 标签：java, rest, pdf, download, jax-rs

我正在使用创建 REST 应用程序和 PDF，`Jasper Report`并希望在浏览器上显示 PDF 的文件下载对话框。

这正是我正在寻找的：
[http ://www.mkyong.com/webservices/jax-rs/download-pdf-file-from-jax-rs/](http://www.mkyong.com/webservices/jax-rs/download-pdf-file-from-jax-rs/)

我下面的代码创建 PDF 文件 (MyAwesomeJasperReport25.pdf) 但文件下载对话框没有显示在浏览器上，我不明白为什么。

```
@GET
@Path("pdf")
@Produces("application/pdf")
public Response outputPDF() {

    OutputStream output = null;

    try {    
        File jrxmlFile = new File("C:\\Users\\m-takayashiki\\report2.jrxml");

        if(jrxmlFile.exists()) {

            //jrxml compile
            JasperReport jasperReport = JasperCompileManager.compileReport(jrxmlFile.getAbsolutePath());

            //some code emitted        

            JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, dataSource);

            String filePath = "C:\\Users\\m-takayashiki\\MyAwesomeJasperReport25.pdf";
            output = new FileOutputStream(new File(filePath)); 
            JasperExportManager.exportReportToPdfStream(jasperPrint, output); 

            // From here trying to ask user to download PDF        

            ResponseBuilder response = Response.ok((Object) filePath);

            response.header("Content-disposition",
                    "attachment; filename=MyAwesomeJasperReportDownload.pdf");

            return response.build();
        }
    }
    catch(Exception e) {
        System.out.println("-------------------- PDF exception ");
        System.out.println(e);
        return null;
    }
    finally {
        try {
            if(output != null) { output.close(); }
        }
        catch(Exception e) { System.out.println(e); }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:12:49.167

检查两件事：

1.  您不应该将 File 的实例而不是 filePath 放在响应实体（“Response.ok（（Object）filePath）”）中吗？
2.  您的 JAX-RS 实现是否具有 File 类的实体提供程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T19:37:05.537

尝试将文件 byte[] 放入实体中，因为 Jersey 没有用于 File 的 MessageBodyWriter。您可以使用**Apache Commons IO**中的 FileUtils 将 File 转换为 byte[]。最后，您的代码如下所示：

```
ResponseBuilder response = Response.ok(FileUtils.readFileToByteArray(file)); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-17T17:55:27.857

您忘记将输出对象放入`Ok()`方法中：

`ResponseBuilder response = Response.ok((Object) filePath);`

**正确的：**

`ResponseBuilder response = Response.ok((output) filePath);`

# android - 请建议如何在 Android 列表中创建一个部分

> ID：10511175
> 
> 赞同：0
> 
> 时间：2012-05-09T06:56:41.183
> 
> 标签：android, listview, android-activity

我有一组名称从 A 到 Z 开头的项目。我想为每个字母部分添加一个分隔符，即 A、B、C...Z 等...

我将拥有一个模型对象，它不仅包含字母，还包含一些其他数据，如图像路径和其他细节。

我找到了一种在[此处](http://bartinger.at/listview-with-sectionsseparators/)添加分隔符的方法。像上面显示的那样为每个部分创建一个虚拟模型对象并插入到 arraylist 并开始使用是否很好。或者你能建议我一些其他的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:03:31.450

检查[惊人的 ListView 项目](http://code.google.com/p/android-amazing-listview/)

在此您可以为每个部分的标题选择布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:05:24.710

这些是以下内容的一些链接：

[http://blogingtutorials.blogspot.in/2010/11/android-listview-header-two-or-more-in.html](http://blogingtutorials.blogspot.in/2010/11/android-listview-header-two-or-more-in.html)

[http://twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index](http://twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index)

[http://bartinger.at/listview-with-sectionsseparators/](http://bartinger.at/listview-with-sectionsseparators/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:06:17.500

如果您愿意使用外部库，则[Cyril Mottier](https://github.com/cyrilmottier)的[GreendDroid](https://github.com/cyrilmottier/GreenDroid)库包含按字母顺序排列的部分列表。

[|R|akesh V](https://github.com/rvalusa)还有一个[按字母顺序排列的项目](https://github.com/rvalusa/AlphaBetically)，它展示了如何实现这样的列表。

# google-maps - Sencha touch 2：地图标记标题

> ID：10511191
> 
> 赞同：3
> 
> 时间：2012-05-09T06:57:55.947
> 
> 标签：google-maps, sencha-touch, extjs, google-maps-markers, sencha-touch-2

我可以在地图上添加标记，并且标记图钉看起来没问题，但我看不到任何标题！

我遍历我的商店并像这样添加它们：

```
 //plot the points on the map
           for (var i = 0; i < this.getCount(); i++)
           {                 
               var position = new google.maps.LatLng(this.getAt(i).data.Latitude, this.getAt(i).data.Longitude); 
               var marker = new google.maps.Marker({
                    position: position,
                   title : this.getAt(i).data.LocationDesc,
                   map: Ext.ComponentManager.get('jobmap').getMap()
               });
           } 
```

我看到图钉，但没有文字标题！数据还可以，我什至尝试过硬编码字符串。是否有某种覆盖/蒙版属性？如何让标题出现？

**编辑**：下面的解决方案解决了这个问题，但我也认为我会提出我遇到的相关问题的解决方案。

如果您想在多个标记上放置弹出信息窗口，您需要阅读以下内容：[Trying to bind multiple InfoWindows to multiple Markers on a Google Map and failed](https://stackoverflow.com/questions/2357323/trying-to-bind-multiple-infowindows-to-multiple-markers-on-a-google-map-and-fail)

在您将字体设置为非白色之前，infoWindows 将是空白的！[Google Maps API InfoWindow 不显示内容](https://stackoverflow.com/questions/4290001/google-maps-api-infowindow-not-displaying-content)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:39:53.447

正如您在[MarkerOptions Docs](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)中看到的， `title`属性 of`marker`被视为`rollover`文本。

我想知道，如何在`smartphone`没有类似事件的设备上看到它`mouseover`？

我想你需要在地图上`infoWindow`打开`click`一些。`pins/markers`

你可以这样做，

```
var infoWindow = new google.maps.InfoWindow({ content:'_address_' }), 
```

然后监听标记上的点击事件，

```
google.maps.event.addListener(marker, 'click', function() {
        infoWindow.open(map, marker);
}); 
```

# php - 如何使用php在一个页面中设置多个cookie

> ID：10511194
> 
> 赞同：-3
> 
> 时间：2012-05-09T06:58:12.493
> 
> 标签：php, cookies

如果第一次用户登陆页面显示表单号，我想显示两个带有 cookie 的表单。1和第二次登陆显示表格2如果第三次没有表格显示请帮助我

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-09T07:40:19.060

我不认为你需要两个饼干。您可以只使用一个 cookie 并将其称为“访问”。

```
if ( !isset( $_COOKIE['visits'] ) ) {
    $_COOKIE['visits'] = 0;

    // display form no. 1
} elseif ( $_COOKIE['visits'] == 1 ) {
    // form no. 2
} else {
    // no form
}

$_COOKIE['visits'] ++; 
```

# c# - 标签未隐藏在 WPF 绑定中

> ID：10511199
> 
> 赞同：1
> 
> 时间：2012-05-09T06:58:36.833
> 
> 标签：c#, wpf

我现在有一个标签按钮的新问题。下面的代码将视图绑定到视图模型：

```
<Label Name="isImageValid"  Content="Image not Created" Margin="0,7,1,0" Style="{StaticResource LabelField}"
                Grid.ColumnSpan="2" Grid.Row="15" Width="119" Height="28" Grid.RowSpan="2"
                Grid.Column="1" IsEnabled="True" 
                Visibility="{Binding isImageValid}" /> 
```

以下是我的 ViewModel 中的代码：

```
 private System.Windows.Visibility _isImageValid;
 public System.Windows.Visibility isImageValid
        {

            get
            {

                return _isImageValid;
            }
            set
            {

                _isImageValid = value;
               this.RaisePropertyChanged(() => this.isImageValid);

            }
        }
  private void OnImageResizeCompleted(bool isSuccessful)
    {

        if (isSuccessful)
        {

            this.SelectedStory.KeyframeImages = true;
            isImageValid = System.Windows.Visibility.Visible;
        }
        else
        {
            this.SelectedStory.KeyframeImages = false;

        }
    } 
```

在调用“OnImageResizeCompleted”之前，该标签应保持隐藏状态，但由于某种原因，该图像始终可见。请问我需要改变什么来隐藏它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:32:49.337

您的问题不在于实际的绑定模式，标签不需要双向绑定，因为它通常不*设置*其来源。

正如@blindmeis 建议的那样，您应该使用转换器而不是直接从视图模型返回可见性值，您可以使用框架中内置的一个。您还应该确保您的数据上下文设置正确，如果不是，则标签将无法绑定到指定的属性。您在同一个窗口上是否有其他项目正确绑定到视图模型？您还应该检查您的输出窗口是否有绑定错误——它们会在那里被提及。最后，您还应该检查您的财产是否正确通知 - 从您提供的代码中无法判断。

您的控件/窗口应该看起来像这样

```
<UserControl    x:Class="..."
                x:Name="MyControl"

                xmlns:sysControls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework"

                >   
    <UserControl.Resources> 
        <sysControls:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>

    <Grid>
        <Label  Visibility="{Binding IsImageValid, Converter={StaticResource BooleanToVisibilityConverter}}" />
    </Grid>
</UserControl> 
```

和 C#：

```
public class MyViewModel : INotifyPropertyChanged
{

    public bool IsImageValid 
    {
        get { return _isImageValid; }
        set 
        {
            _isImageValid = value;
            OnPropertyChanged("IsImageValid");
        }
    }

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private bool _isImageValid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:05:01.433

尝试将绑定模式设置为双向

```
<Label  Visibility="{Binding isImageValid, Mode=TwoWay}" /> 
```

不过我不会在视图模型中使用 System.Windows 命名空间。创建一个 bool 属性并在绑定中使用 booltovisibility 转换器。

# java - 人工智能的开源工具

> ID：10511202
> 
> 赞同：-4
> 
> 时间：2012-05-09T06:58:52.337
> 
> 标签：java, nlp

我正在通过 AI 项目，其中包含一些我必须在项目中应用的方法，这些方法有一些开源。但是每种方法都有不同的开源，我想有一个开源，它的文档包含其中的所有方法，这些方法是

```
Stemming 
extracting Stopwords
Latent Semantic Analysis LSA
K nearest neighbor KNN
Support Vector Machine SVM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:55:06.513

有几种工具可以完成所有这些工作，[gate和](http://gate.ac.uk/)[weka](http://www.cs.waikato.ac.nz/ml/weka/)就是其中之一

# sql - 如何查看 2 个日期时间之间的可用房间

> ID：10511205
> 
> 赞同：3
> 
> 时间：2012-05-09T06:59:05.647
> 
> 标签：sql, database

我正在开发一个可以预订会议室的网络应用程序。让我先解释一下我的数据库是什么样子的。

我有`Reservations`以下设计的桌子

```
 ID           --> int
  ROOMID       --> int
  DATE_BEGIN   --> DATETIME
  DATE_END     --> DATETIME 
```

我还有一张`ROOM`设计如下的桌子

```
 ID            --> int
 NAME          --> VARCHAR(30) 
```

现在在表中插入一行`reservation`看起来像这样

```
 ID            --> 1
 ROOMID        --> 2
 DATE_BEGIN    --> 2012-01-01 12:02:33
 DATE_END      --> 2012-01-01 14:00:00 
```

现在我要做的是，输入开始日期和结束日期。当我按下一个按钮时`Check availability`，它会返回所有在这个给定日期范围内可用的房间名称。

现在我有这个查询：

```
SELECT zaa.NAME 
FROM ARTICLES_ZAAL zaa
INNER JOIN ARTICLES_RESERVERING res
ON zaa.ID =res.ZAALID
WHERE res.DATUM_BEGIN <> @DATUM_BEGIN
AND res_DATUM_EINDE <> @DATUM_EINDE 
```

我知道还有很多缺失，但问题是什么。我在一个由 Web 服务调用的函数中完成所有这些工作。

有人可以帮忙吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:26:09.393

其他答案不处理与预订重叠的时间请求，并且 BETWEEN 不是一个好的选择，因为它具有包容性（因此，如果预订在下午 2 点结束，而您想要在下午 2 点开始的预订，那将是错误的，这是不正确的）。

试试这个 SQL 小提琴。您可以乱用请求的开始日期和结束日期来检查我的工作，就我而言，它工作正常。

[http://sqlfiddle.com/#!3/cb682/25](http://sqlfiddle.com/#!3/cb682/25)

摘抄：

```
select * from Room as ro
where ro.ID not in 
            (
              select re.ROOMID
              from Reservations as re 
              where (DATE_BEGIN >= @start and DATE_BEGIN < @end)
                or (DATE_END >= @start and DATE_END < @end)
             ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:33:56.273

尝试使用 BETWEEN

```
select * from rooms 
where roomid not in(select roomid from reservation where begin_date between given_begin_date and end_date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:13:34.267

要知道你有没有预订的房间`@DATUM_BEGIN`和`@DATUM_EINDE`。然后你必须检查where >和where <的`@DATUM_BEGIN`交集。`res_DATUM_EINDE``@DATUM_BEGIN``res_DATUM_EINDE``@DATUM_EINDE``res.DATUM_BEGIN``@DATUM_EINDE``res.DATUM_BEGIN`

```
SELECT zaa.NAME 
FROM ARTICLES_ZAAL zaa
INNER JOIN ARTICLES_RESERVERING res
ON zaa.ID =res.ZAALID
WHERE MAX(res_DATUM_EINDE)<@DATUM_BEGIN
GROUP BY res.ZAALID
INTERSECT
SELECT zaa.NAME 
FROM ARTICLES_ZAAL zaa
INNER JOIN ARTICLES_RESERVERING res
ON zaa.ID =res.ZAALID
WHERE MIN(res.DATUM_BEGIN)>@DATUM_EINDE
GROUP BY res.ZAALID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:05:41.430

您需要捕捉到这样一个事实，即对于每个给定的开始/结束范围，您有一组现有的预订，条件是给定的开始/结束不能属于现有预订的集合（使用 a `LEFT OUTER JOIN`，所以如果房间不保留预订日期应该是`NULL`）：

```
SELECT DISTINCT zaa.NAME  
FROM ARTICLES_ZAAL zaa 
LEFT OUTER JOIN ARTICLES_RESERVERING res 
ON zaa.ID = res.ZAALID 
WHERE ((res.DATUM_BEGIN NOT BETWEEN @DATUM_BEGIN AND @DATUM_EINDE OR (res.DATUM_BEGIN IS NULL))
AND ((res.DATUM_EINDE NOT BETWEEN @DATUM_BEGIN AND @DATUM_EINDE) OR (res.DATUM_EINDE IS NULL)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T07:28:32.057

```
select * from rooms where roomid not in(select roomid from reservation where (begin_date>=given_begin_date and begin_date<=given_end_date ) or(end_date>=given_begin_date and end_date<=given_end_date)) 
```

# php - Symfony 从加载中过滤掉我的脚本

> ID：10511208
> 
> 赞同：0
> 
> 时间：2012-05-09T06:59:16.257
> 
> 标签：php, ajax, jquery, symfony-1.4

我写了一个基于 symfony 的网站。有一些弹出窗口（注册、登录、更改密码）。[我只需通过请求http://example.com/module/action](http://example.com/module/action)即可使用 jQuery AJAX 请求 ($.get) 加载它们。[尽管弹出窗口正确加载了 html，但http://example.com/module/action](http://example.com/module/action)上没有正常请求的脚本。

有人知道如何禁用这个 symfony 功能吗？或者知道优雅的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:35:50.753

为您的路线添加限制：

```
route_name:
  url: route_path.:sf_format
  # sf_format: json sets default format to json
  param: { module: module_name, action: action_name, sf_format: json }
  # add restrictions
  requirements:
    sf_format: json 
```

由 Pedro @pedro-casado 提供的解决方案非常好（我在以前的一些项目中使用过），但一段时间后，我意识到，**正确的方法**是对路线添加限制。这样，Symfony 会简单地拒绝所有请求，除了 XmlHttpRequest。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T22:34:46.117

您是否希望仅在通过 ajax 调用时才加载页面？

```
if ($request->isXmlHttpRequest())
{
 ....
} 
```

# java - 在休眠中使用注释将 POJO 动态映射到表

> ID：10511219
> 
> 赞同：0
> 
> 时间：2012-05-09T06:59:59.500
> 
> 标签：java, hibernate, jpa, dynamic, hibernate-mapping

在我的数据库中，我有大约 20 多个名为“a_emp_transactions”、“b_emp_transaction”等的表，其中所有表的表结构都相同。基本上这些表是根据员工的姓名划分的。

现在我想使用休眠对这些表进行 CURD 操作，但我不想为每个表创建 POJO。由于只有表名不同且结构相同，有没有办法使用单个 POJO 并使用注释根据当前员工姓名动态地将 POJO 映射到表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:12:44.177

我认为您的数据库架构存在很大缺陷。为什么要使用 20 多个表，而您可能会使用 ONE 与相同的字段 + 一个“EmployeeName/ID”字段？

通过这种方式，您将能够将 POJO 映射到单个表，恕我直言，这将是一个更加一致的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:10:55.467

您可以使用 Hibernate Shards 来完成此操作。基本上，Hibernate Shards 允许您指定“分片”策略。它可以是跨不同数据库服务器的数据分布，也可以只是单独的表（看起来就是你的情况）。您当然会想要创建自己的策略，因为我不相信现有示例会完美地涵盖您的情况:-)

[http://docs.jboss.org/hibernate/stable/shards/reference/en/html/shards-shardstrategy.html](http://docs.jboss.org/hibernate/stable/shards/reference/en/html/shards-shardstrategy.html)

顺便说一句：我不确定 Hibernate Shards 是否允许您更改映射实体的表名（也许有可能，我只是不知道）。在任何情况下：如果不可能，您可能可以创建不同的 Hibernate 命名策略，并使用不同的命名策略来使用每个分片。

# iphone - 如何获取推送通知的 iPhone 设备令牌？

> ID：10511226
> 
> 赞同：1
> 
> 时间：2012-05-09T07:00:21.400
> 
> 标签：iphone, notifications, push

我正在尝试在我的应用程序中使用远程推送通知，并且我试图在我的应用程序中进行此测试，但是在我一开始点击“允许”后我无法重置警报弹出窗口。

**所以我的问题是：**

即使用户在警报弹出窗口中点击“不允许”，我仍然可以获得设备令牌吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:01:30.263

使用 appDelegate 方法

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
    {
        self.mDeviceToken = deviceToken;

        //Removing the brackets from the device token
        NSString *tokenString = [[deviceToken description] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];

        NSLog(@"Push Notification tokenstring is %@",tokenString);

    } 
```

万一出错

```
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
{

    NSString* s=[[NSString alloc] initWithFormat:@"%@",error];
    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Error" message:s delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    [s release];
// lert because your device will not show log
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:01:41.030

使用以下委托方法...

```
-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken{

    NSLog(@">>%@",deviceToken);// this will give  you token
}

-(void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error{

    NSLog(@">>%@",error); // this will gave you error msg with description.

} 
```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:17:32.443

```
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken

{

    NSLog(@"My token is: %@", deviceToken);

} 
```

这样你就得到了 iPhone 设备令牌

# logging - Mule 日志记录：拦截器或记录器组件？

> ID：10511235
> 
> 赞同：1
> 
> 时间：2012-05-09T07:01:00.137
> 
> 标签：logging, cxf, esb, mule, flow

我正在尝试实现登录 mule 并有一个基本问题。

我的服务都配置为在 tomcat 服务器上运行，而不是在 Mule 上运行。我只使用 Mule 进行编排。

我应该使用拦截器还是记录器组件？据我所知，拦截器正在与 CXF 服务和简单​​的服务定义一起使用。但我的服务不在 Mule 中。

我正在使用代理服务和客户端来调用外部服务。

**问题：**

1.  据我了解，在测试时使用 CXF 拦截器进行日志记录很有用，但它是在 Mule 中记录消息的正确方法吗？

2.  可以使用带有代理服务和客户端的拦截器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:34:29.300

我更喜欢使用`<logger />`而不是`<logging-interceptor />`因为`logger`有很多可配置的选项允许您准确记录您想要的内容（消息表达式）、您想要的位置（类别）以及您想要的级别（INFO，...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T11:51:16.900

假设您要完整记录输入/输出请求：

1) 使用 CXF 拦截器，因为它们也会捕获无效请求，这对于跟踪错误非常有用。

2) 是的。

大卫在这里有一个有效的观点，即记录器更灵活，如果您发现自己想要的不仅仅是默认记录，请编写自己的或扩展现有的拦截器。请参阅[此示例](https://github.com/greenbird/xml-formatter-components/tree/master/mule-cxf-example)（由我编写）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T17:18:59.293

在流的同一线程上执行的流中可能看不到日志记录拦截器。

在flow中使用log组件，在flow中可见，可以根据需求编写大量mel

# ruby-on-rails - 如何测试某个函数是否使用 Rails 和 rspec 2 中的事务

> ID：10511236
> 
> 赞同：32
> 
> 时间：2012-05-09T07:01:00.277
> 
> 标签：ruby-on-rails, ruby, rspec, transactions, rails-activerecord

我有一个模型函数，我想确保它使用事务。例如：

```
class Model 
  def method
    Model.transaction do
      # do stuff
    end
  end
end 
```

我目前的方法是在块内存根方法调用以引发`ActiveRecord::Rollback`异常，然后检查数据库是否确实发生了变化。但这意味着如果由于某种原因块内的实现发生了变化，那么测试就会中断。

你将如何测试这个？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-29T13:46:43.290

你应该从不同的角度看待问题。**从行为的角度来看，测试一个函数是否使用事务是没有用的**。它不会为您提供有关函数是否按预期运行的任何信息。

**您应该测试的是行为**，即预期结果是否正确。为清楚起见，假设您在函数中执行操作 A 和操作 B（在一个事务中执行）。操作 A 在您的应用中向用户赠送 100 美元。操作 B 从用户信用卡中借记 100 美元。

您现在应该为测试提供无效的输入信息，以便从用户信用卡中扣款失败。将整个函数调用包装在一个`expect { ... }.not_to change(User, :balance)`.

这样，您可以测试预期的行为 - 如果信用卡借记失败，请不要将金额记入用户。此外，如果您只是重构代码（例如，您停止使用事务并手动回滚），那么您的测试用例的结果应该不会受到影响。

话虽如此，您仍然应该像@luacassus 提到的那样单独测试这两个操作。此外，如果您对@rb512 提到的源代码进行“不兼容”更改（即更改行为），您的测试用例应该失败是完全正确的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-28T21:18:54.600

需要提到一个大问题：测试事务时，需要关闭 transactional_fixtures。这是因为测试框架（例如 Rspec）将测试用例包装在事务块中。after_commit 永远不会被调用，因为没有真正提交。即使您使用 :requires_new => true，期望事务内部的回滚也不起作用。相反，事务会在测试运行后回滚。参考[http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)嵌套事务。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-26T08:18:53.200

通常，您应该使用“纯”rspec 测试来隔离地测试应用程序块（类和方法）。例如，如果您有以下代码：

```
class Model 
  def method
   Model.transaction do
     first_operation
     second_operation
   end
end 
```

您应该在单独的测试场景中进行测试`first_operation`，`second_operation`最好不要访问数据库。`Model#method`稍后您可以为这两种方法编写测试并模拟。

在下一步中，您可以使用[https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec](https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)编写高级集成测试，并检查此代码在不同条件下将如何影响数据库，例如何时`second_method`会失败。

在我看来，这是测试产生复杂数据库查询的代码的最实用的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T10:10:24.033

首先，您需要用块包围您`Model.transaction do ... end`的`begin rescue end`块。

检查事务回滚的唯一方法是引发异常。所以你目前的方法都很好。至于您所关心的，实现的改变总是意味着相应地改变测试用例。我认为不可能有一个通用的单元测试用例，即使方法实现发生变化也不需要更改。

我希望这会有所帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T21:29:19.890

我一直在做同样的事情，但现在我认为您可能需要做的就是测试一个规范中的模型是否调用了“事务”方法，然后在其他单独的规范中测试块的主体。尽管这不能确保事务像当前测试那样包装您的方法调用，而不是其中可能包含的其他代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-30T16:51:45.957

给定这样的方法：

```
class ApplicationJob < ActiveJob::Base 
  private

  def transaction(&block)
    # yield
    ActiveRecord::Base.transaction(&block)
  end
end 
```

在规范中调用私有方法，传递一个更改数据库然后引发的块：

```
RSpec.describe ApplicationJob do
  describe 'helper methods' do
    subject(:job) { Class.new(described_class).new }

    describe '#transaction' do
      it 'runs block in transaction' do
        block = lambda { FactoryBot.create(:user); raise; }
        expect { job.send(:transaction, &block) rescue nil }.not_to change(User, :count)
      end
    end
  end
end 
```

如果您将`transaction`方法更改为 just`yield`您将看到即使在提升后数据库也发生了变化。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-06-01T07:33:52.417

尝试在 Rails 控制台沙盒模式下进行测试

**导轨控制台--沙盒**

# android - Android：如何以编程方式创建多个图像按钮视图？

> ID：10511238
> 
> 赞同：0
> 
> 时间：2012-05-09T07:01:12.620
> 
> 标签：android, android-layout, imagebutton

我有超过 30 个可点击的图像按钮视图，我想以编程方式创建它们，而不是使用多个 xml 文件。有人可以解释一下我该怎么做吗？对于每个图像按钮，我需要：

1.  能够以编程方式命名和设置每个视图的 ID，例如 R.drawable.button01、R.drawable.button02 等，因为稍后我需要使用 findViewById() 来引用它们。

2.  每个图像按钮都是可点击的，我为每个按钮都有一个按下按钮的图像，所以我需要弄清楚如何将按钮按下动作动态分配给每个按钮，而不是为每个按钮使用 xml 资源文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:08:38.090

将任何布局作为根，如线性或相对初始化它..

```
LinearLayout layout = new LinearLayout(context);
layout.setOrientation(LinearLayout.HORIZONTAL);
ImageButton button =new ImageButton(context);
layout.addView(layout);
setContentView(layout); 
```

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:25:52.470

视图具有`setId()`可用于设置 ID 的功能。您可以使用`setImageResource()`图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:24:18.010

对于我的项目，我正在为学校创建一个骰子游戏 (Yahtzee)。对于我的按钮，我将它们添加到 XML

```
<ImageButton
        android:id = "@+id/dice1"
        android:src = "@drawable/red_1_dice"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_marginTop = "60px"
        android:layout_marginLeft = "30px" />

    <ImageButton
        android:id = "@+id/dice2"
        android:src = "@drawable/red_2_dice"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_marginLeft = "250px" 
        android:layout_marginTop = "-130px"/>

    <ImageButton
        android:id = "@+id/dice3"
        android:src = "@drawable/red_3_dice"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_marginLeft = "135px"
        android:layout_marginTop = "20px" /> 
```

然后我主要是这样做的。

```
public class Z_veselinovic_yahtzeeActivity extends Activity 
{
    /** Called when the activity is first created. */

    ImageButton button1, button2, button3, button4, button5;
    Button start, reroll, hold;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Buttons();
    }

    public void Buttons()
    {

        button1 = (ImageButton)findViewById(R.id.dice1);
        button2 = (ImageButton)findViewById(R.id.dice2);
        button3 = (ImageButton)findViewById(R.id.dice3);
        button4 = (ImageButton)findViewById(R.id.dice4);
        button5 = (ImageButton)findViewById(R.id.dice5);

        start = (Button)findViewById(R.id.Start);
        reroll = (Button)findViewById(R.id.Reroll);
        hold = (Button)findViewById(R.id.Hold);

        reroll.setVisibility(View.GONE);
        hold.setVisibility(View.GONE);

        start.setOnClickListener(new OnClickListener()
        {
            public void onClick(View whatever)
            {

                Toast.makeText(getBaseContext(), start.getText() + " Game", Toast.LENGTH_LONG).show();

                Random rand1 = new Random();
                Random rand2 = new Random();
                Random rand3 = new Random();
                Random rand4 = new Random();
                Random rand5 = new Random();

                int dice_num_1 = rand1.nextInt(6) + 1;
                int dice_num_2 = rand2.nextInt(6) + 1;
                int dice_num_3 = rand3.nextInt(6) + 1;
                int dice_num_4 = rand4.nextInt(6) + 1;
                int dice_num_5 = rand5.nextInt(6) + 1;

                if(dice_num_1 == 1)
                {
                    button1.setImageResource(R.drawable.red_1_dice);
                }

                else if(dice_num_1 == 2)
                {
                    button1.setImageResource(R.drawable.red_2_dice);
                }

                else if(dice_num_1 == 3)
                {
                    button1.setImageResource(R.drawable.red_3_dice);
                }

                else if(dice_num_1 == 4)
                {
                    button1.setImageResource(R.drawable.red_4_dice);
                }

                else if(dice_num_1 == 5)
                {
                    button1.setImageResource(R.drawable.red_5_dice);
                }

                else if(dice_num_1 == 6)
                {
                    button1.setImageResource(R.drawable.red_6_dice);
                }

                if(dice_num_2 == 1)
                {
                    button2.setImageResource(R.drawable.red_1_dice);
                }

                else if(dice_num_2 == 2)
                {
                    button2.setImageResource(R.drawable.red_2_dice);
                }

                else if(dice_num_2 == 3)
                {
                    button2.setImageResource(R.drawable.red_3_dice);
                }

                else if(dice_num_2 == 4)
                {
                    button2.setImageResource(R.drawable.red_4_dice);
                }

                else if(dice_num_2 == 5)
                {
                    button2.setImageResource(R.drawable.red_5_dice);
                }

                else if(dice_num_2 == 6)
                {
                    button2.setImageResource(R.drawable.red_6_dice);
                } 
```

我希望这有帮助。

# perl - 任何格式到 UNIX 结束行格式递归

> ID：10511239
> 
> 赞同：0
> 
> 时间：2012-05-09T07:01:13.573
> 
> 标签：perl, line-endings

我有两个不同的脚本要更改`DOS2UNIX`和`MAC2UNIX`结束行格式

**DOS2UNIX：** `perl -pi -e 's/\r\n/\n/;' < dos1.txt > dos2.txt`

**MAC2UNIX：** `perl -p -e 's/\r/\n/g' < mac1.txt > mac2.txt`

反正有没有在一个signle命令中获得这些功能来改变`EOL UNIX`格式！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:35:11.910

这可以处理这两种情况。

```
perl -pe 's/\r\n?/\n/g' 
```

如果您的 DOS 文件在一行中的某处带有裸露的 CR，它（半明显地）会做错事，这应该（也许）不被转换为 LF。

# php - OAuth 对话框中未显示经过身份验证的引用

> ID：10511243
> 
> 赞同：0
> 
> 时间：2012-05-09T07:01:31.950
> 
> 标签：php, facebook, authentication, oauth, server-side

我无法让用户看到接受“Authenticated Referrals”的对话框。

在app的配置中，在Auth Dialog的一个部分，并在本例中标记了license（在User Permissions & Friend中）允许访问email，但是在对话框中测试只出现“The App will receive: Your basic data .".

你能帮助我并告诉别人我可以如何实施它让我留下这些许可证吗？

非常感谢你。

PS>对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:02:40.190

感谢那些感兴趣的人，我找到了其他人可能感兴趣的解决方案：而不是将用户重定向到“facebook.com/dialog/oauth?client_id = ....”我已经发送到“facebook.com/dialog/permissions.request?app_id = ...”现在如果我获得许可申请并且服务器接收到必要的数据。我希望有人会有用。

# android - 如何在电话间隙中使用自定义字体？

> ID：10511244
> 
> 赞同：4
> 
> 时间：2012-05-09T07:01:32.763
> 
> 标签：android, cordova

我正在使用 phonegap 构建 android 应用程序，但我遇到了一些问题。

```
<style type="text/css">
@font-face{
    font-family: customfont;
    src: url("fonts/THSarabunNew.ttf") format('truetype');

}
body {
    font-family: customfont;
    font-size:30px;
}
</style> 
```

我尝试在**index.html**文件中使用此代码，但我无法在应用程序中使用我的自定义字体。

请告诉我在 android 应用程序的 phonegap 中使用自定义字体的方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:01:53.867

```
<style type="text/css" media="screen">
        @font-face {
            font-family: centurySchoolbook;
            src: url(/fonts/century-schoolbook.ttf);
        }
       body {
           font-family: centurySchoolbook;
           font-size:30px;
       }
</style>
```

如果您的字体仍然无法使用，请确保您正确拼写其字体名称和文件名，您的应用程序缓存正常，您的移动操作系统没有乱用字体。首先检查css覆盖的东西。

# javascript - selenium 使用 javascript 定位没有 id 或 name 的元素

> ID：10511259
> 
> 赞同：-1
> 
> 时间：2012-05-09T07:02:32.023
> 
> 标签：javascript, c, selenium, getelementbyid, getelementsbytagname

我总是通过 getElementId 定位元素，

并通过使用发送值

document.getElementId(id).value = "某事"。

但我找到了一个没有 ID 或名称的按钮

< input type="submit" class="button" accesskey="l" value="点击我" tabindex="3">

现在我怎么能找到它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:40:50.060

我认为你需要：

```
IWebElement element = webDriver.FindElement(By.ClassName("button")); 
```

虽然我不明白你目前从硒中使用什么？

# facebook - 用户喜欢一个页面

> ID：10511266
> 
> 赞同：0
> 
> 时间：2012-05-09T07:03:11.013
> 
> 标签：facebook, facebook-like

有没有办法查看 Facebook 用户是否喜欢某个页面？它可能不是登录用户，用户可能根本没有登录......该页面可能不是安装应用程序的页面。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:31:34.463

你必须确保你有“user_likes”范围。然后，您通过执行 ('me/likes') 来使用图形 api，并在其上设置条件（如果 name=='yourpage'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:08:32.210

您可以在应用程序中获得具有权限的用户喜欢，或者如果您的应用程序是画布应用程序，您可以通过这种方式获得它；

[带有 asp.net C# sdk 的 facebook 中仅限粉丝的内容](https://stackoverflow.com/questions/6595259/fans-only-content-in-facebook-with-asp-net-c-sharp-sdk)

# iphone - 将非交错的音频数据转换为交错的

> ID：10511272
> 
> 赞同：1
> 
> 时间：2012-05-09T07:03:27.030
> 
> 标签：iphone, ios, buffer, core-audio

我正在使用 Apple 的 MixerHost 类的修改版本，它在其回调中将音频分成两个流（这是为了允许生成的音频是单声道或立体声）。显然，结果是非交错流。我是 Core Audio 的新手，我需要一个交错流，我想知道是否有人可以指出我正确的方向来修改回调中的缓冲区以存储交错立体声数据。

谢谢你。

这是回调之一：

```
static OSStatus inputRenderCallback (

                                     void                        *inRefCon,      // A pointer to a struct containing the complete audio data 
                                     //    to play, as well as state information such as the  
                                     //    first sample to play on this invocation of the callback.
                                     AudioUnitRenderActionFlags  *ioActionFlags, // Unused here. When generating audio, use ioActionFlags to indicate silence 
                                     //    between sounds; for silence, also memset the ioData buffers to 0.
                                     const AudioTimeStamp        *inTimeStamp,   // Unused here.
                                     UInt32                      inBusNumber,    // The mixer unit input bus that is requesting some new
                                     //        frames of audio data to play.
                                     UInt32                      inNumberFrames, // The number of frames of audio to provide to the buffer(s)
                                     //        pointed to by the ioData parameter.
                                     AudioBufferList             *ioData         // On output, the audio data to play. The callback's primary 
                                     //        responsibility is to fill the buffer(s) in the 
                                     //        AudioBufferList.
                                     ) {

    soundStructPtr    soundStructPointerArray   = (soundStructPtr) inRefCon;
    UInt32            frameTotalForSound        = soundStructPointerArray[inBusNumber].frameCount;
    BOOL              isStereo                  = soundStructPointerArray[inBusNumber].isStereo;

    // Declare variables to point to the audio buffers. Their data type must match the buffer data type.
    AudioUnitSampleType *dataInLeft;
    AudioUnitSampleType *dataInRight;

    dataInLeft                 = soundStructPointerArray[inBusNumber].audioDataLeft;
    if (isStereo) dataInRight  = soundStructPointerArray[inBusNumber].audioDataRight;

    // Establish pointers to the memory into which the audio from the buffers should go. This reflects
    //    the fact that each Multichannel Mixer unit input bus has two channels, as specified by this app's
    //    graphStreamFormat variable.
    AudioUnitSampleType *outSamplesChannelLeft;
    AudioUnitSampleType *outSamplesChannelRight;

    outSamplesChannelLeft                 = (AudioUnitSampleType *) ioData->mBuffers[0].mData;
    if (isStereo) outSamplesChannelRight  = (AudioUnitSampleType *) ioData->mBuffers[1].mData;

    // Get the sample number, as an index into the sound stored in memory,
    //    to start reading data from.
    UInt32 sampleNumber = soundStructPointerArray[inBusNumber].sampleNumber;

    // Fill the buffer or buffers pointed at by *ioData with the requested number of samples 
    //    of audio from the sound stored in memory.
    for (UInt32 frameNumber = 0; frameNumber < inNumberFrames; ++frameNumber) {

        if (sampleNumber == frameTotalForSound) {

            NSString *AudioFileDidFinishPlaying = @"AudioFileDidFinishPlaying";
            [[NSNotificationCenter defaultCenter] postNotificationName: AudioFileDidFinishPlaying object: nil];
            /*NSString *CloseExtAudioFile = @"CloseExtAudioFile";
            [[NSNotificationCenter defaultCenter] postNotificationName: CloseExtAudioFile object: nil];*/

        }

        outSamplesChannelLeft[frameNumber]                 = dataInLeft[sampleNumber];
        if (isStereo) outSamplesChannelRight[frameNumber]  = dataInRight[sampleNumber];

        sampleNumber++;

        // After reaching the end of the sound stored in memory--that is, after
        //    (frameTotalForSound / inNumberFrames) invocations of this callback--loop back to the 
        //    start of the sound so playback resumes from there.

        //NSLog (@"Audio file finished; stopping audio playback.");

    }

    // Update the stored sample number so, the next time this callback is invoked, playback resumes 
    //    at the correct spot.
    soundStructPointerArray[inBusNumber].sampleNumber = sampleNumber;

    return noErr;
} 
```

# ios - Flash ANE 软键盘

> ID：10511289
> 
> 赞同：1
> 
> 时间：2012-05-09T07:04:56.520
> 
> 标签：ios, flash, keyboard, adobe, android-softkeyboard

我有一个使用 adobe air 3.2 制作的 flash 应用程序，用户有一个 textfield 功能，当他点击它时，应用程序会被向上推。然后当它失去焦点时，它会自动回到正常的初始位置。

在我添加了一个 iOS 原生扩展 (ANE) 到它之后，现在当用户点击 textfield 时，应用程序被向上推，但它在失去焦点后将不再恢复其初始位置。

我尝试在描述 xml 中使用 none，但是这个节点可以被 flash 识别！

任何帮助

# javascript - 将脚本标签动态添加到 JSP 文档并设置脚本正文

> ID：10511292
> 
> 赞同：1
> 
> 时间：2012-05-09T07:05:01.740
> 
> 标签：javascript, html, ajax, jsp, dynamic

我知道可以从 javascript 中为 html/JSP 文档添加标签......就像这样：

```
<script type="text/javascript">
var s = document.createElement( 'script' );
s.type = 'text/javascript';
s.src = 'http://s/s.js';
document.body.appendChild( s );
</script> 
```

但是有没有办法将一些脚本添加到您创建的脚本标签的**正文中？**喜欢：

```
s.body = "alert('hello');" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-03T08:54:18.757

```
 s.innerHTML ="_satellite.pageBottom();"; 
```

尝试这个。

# iphone - 使用 UI 外观在 UIKeyboard 顶部自定义“完成”栏按钮？

> ID：10511293
> 
> 赞同：0
> 
> 时间：2012-05-09T07:05:01.903
> 
> 标签：iphone, ios, ios5, uibarbuttonitem, uiappearance

我已经使用 ios 5 中的外观自定义了我的 navigationBar UIBarButtons。但是它还在我的键盘顶部编辑 DONE 栏按钮的外观（查看下图以了解我正在谈论的按钮）。如何访问该按钮的类，以便单独自定义该按钮？

![在此处输入图像描述](../Images/76660116da4b34fd5150842403370afe.png)

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:15:04.067

[这](http://mhasantanim.wordpress.com/tutorial/iphone/customize-done-button/)可能是您问题的正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:36:58.160

使用外观代理的`appearanceWhenContainedIn`方法，例如：

```
[[UIBarButtonItem appearanceWhenContainedIn:[MyViewController class], nil] 
    setBackgroundImage:clear 
    forState:UIControlStateNormal 
    barMetrics:UIBarMetricsDefault]; 
```

（此示例设置背景图像，但我相信您可以将其应用于您自己的自定义）。

有关详细信息：请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)

# asp.net-mvc - 是否可以在 Azure 上部署 WebRole 并使用用于计算的 Cloud Numerics？

> ID：10511298
> 
> 赞同：1
> 
> 时间：2012-05-09T07:05:13.640
> 
> 标签：asp.net-mvc, azure, azure-web-roles, numerics

是否可以将 Azure 上的 Code Numerics 仅用于标准偏差等一些计算，而不使用其分布式能力并绕过 HPC？我正在使用一些强大的数学和图表测试 MVC Web 角色，我添加了对 Cloud Numerics 程序集的引用，整个事情都在模拟器中工作（只是一些计算，没有分布式的东西）但是当我 delpoy 到 Azure 时，它​​报告了与云的依赖关系问题数字dll？我真的很感激一些建议。（我知道为此使用一些标准数学库会更好，但我真的需要知道这种方式是否可行）。我最初认为这可能是架构问题：整个项目是 AnyCpu（它只能是 AnyCpu 或 x64，因为 Azure 只允许这两个 confs）并且一些 CLoud Numerics 库是为 x64 编译的。

以下是异常详细信息：

```
Could not load file or assembly 'Microsoft.Numerics.DistributedDenseArrays.DLL' or one of its dependencies. The specified module could not be found.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Numerics.DistributedDenseArrays.DLL' or one of its dependencies. The specified module could not be found.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[FileNotFoundException: Could not load file or assembly 'Microsoft.Numerics.DistributedDenseArrays.DLL' or one of its dependencies. The specified module could not be found.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +567
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +192
   System.Reflection.Assembly.Load(String assemblyString) +35
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +123

[ConfigurationErrorsException: Could not load file or assembly 'Microsoft.Numerics.DistributedDenseArrays.DLL' or one of its dependencies. The specified module could not be found.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +11567856
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +485
   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +79
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +337
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +280
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1167

[HttpException (0x80004005): Could not load file or assembly 'Microsoft.Numerics.DistributedDenseArrays.DLL' or one of its dependencies. The specified module could not be found.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11700592
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4868789 
```

提到的 dll Microsoft.Numerics.DistributedDenseArrays 自然地作为副本包含在依赖遍历工具中所述的其他依赖项中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:16:04.647

如果我偶然发现这类问题，我的第一个检查是引用的库是否具有属性 copy local = true。下一步是实施 en configure diagnosticts 如果您只部署到一个实例进行开发和测试，您可以使用 RDP 检查事件日志。

在先决条件一章中 阅读[SQL Azure Labs 的 Microsoft 代号“Cloud Numerics”介绍，需要](http://oakleafblog.blogspot.com/2012/01/introducing-microsoft-codename-cloud.html)[Microsoft Visual C++ 2010 SP1 Redistributable Package (x64)](http://www.microsoft.com/download/en/details.aspx?id=13523)。这不是在 Windows Azure 提供的基本 VM 上实现的标准。可以在启动任务中将软件包安装在您的实例上。确保 msi 以静默模式启动（无需用户交互）。

米歇尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:55:15.467

我建议获取 Fusion 日志：

```
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

然后你可以看到它试图从哪里加载文件并找出问题所在。如果您无法从中确定，请在此处发布这些详细信息，以便我们查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:49:11.103

好的，问题解决了。

**解决方案：**有某事。Cloud Numerics 中缺少（Cloud Numerics 安装目录中的另一个本地库），更有趣的是：Web.config 中有一个额外的 DevExpress Printing.Core 库引用，而它没有作为对我的项目的引用添加。为什么更有趣？主要是因为我必须在我的 WebRoles 上使用 ProcMon 来确认这一事实，在我填空之后，我得到了一个更有用的错误，说明我的部署中缺少 Cloud Numerics 中的哪个精确库。

**结论：** ProcMon 是一个非常有用的工具，Azure VM 的 RDP 是无价的。

**提示：**如果您尝试在 Azure 上部署使用 CN 库的项目，请不要忘记将 Microsoft HPC Pack 中的 msmpi.dll 添加为 CopyAlways 内容，还要注意您引用的 msmpi.dll 类型（x32 或 x64 ）。

谢谢你们，每一个答案都让我更接近解决方案。这也归功于 Cloud Numerics Lab 团队，尤其是 Roonie Hoogerwerf。

# jquery - 限制浏览器点击按钮，直到复选框被选中

> ID：10511311
> 
> 赞同：0
> 
> 时间：2012-05-09T07:05:43.757
> 
> 标签：jquery, button

有人可以向我展示一个 jquery 规则，其中在选中一个复选框后，它将启用一个按钮来单击以进入下一页/div。我有一个单页滑动网站。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:07:45.820

```
$('#checkboxId').change(function(){
    $('#buttonId').prop('disabled', !this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T07:07:12.490

您可以执行以下操作：

```
$("#checkBoxID").click(function()
{
   $("#buttonID").prop("disabled", !this.checked);
   //or 
   $("#buttonID").attr("disabled", !this.checked);
}); 
```

使用上述之一..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:07:34.393

只需将其设为您的 if 条件：

```
$('#checkBox').attr('checked'); 
```

或者

```
$('#edit-checkbox-id').is(':checked'); 
```

# c++ - 整数类型的重载运算符 ^

> ID：10511314
> 
> 赞同：3
> 
> 时间：2012-05-09T07:05:53.303
> 
> 标签：c++, compiler-errors, operators, operator-overloading

我编写了一个应用程序，我经常在其中使用库中`pow`的函数。`math.h`我试图重载`operator^`以使求幂更容易和更快。我写了这段代码：

```
#include <iostream>
#include <math.h>

using namespace std;

int operator^(int, int); // line 6    
int main(int argc, char * argv[]) { /* ... */ }

int operator^(int a, int n)   // line 21
{
  return pow(a,n);
} 
```

编译器（我在 Linux 上使用 g++）返回了这些错误：

> main.cpp:6:23: 错误: 'int operator^(int, int)' 必须有类或枚举类型的参数 main.cpp:21:27: error: 'int operator^(int, int)' 必须有一个类或枚举类型的参数

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T07:07:06.410

您不能重载运算符以**仅对内置类型**进行操作。

正如编译器错误消息中明确说明的那样，至少一个参数必须是用户定义的类或枚举类型（或对其中之一的引用）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T07:09:41.580

> 我试图重载 operator^ 以使求幂更容易和更快

你拼错了**混淆**，因为它肯定不是更快也不是更容易。**如果您这样做，任何**维护您的代码的人都会讨厌您。

幸运的是，C++ 要求至少一个参数是用户定义的类型，所以你不能这样做。

# actionscript-3 - Flex AdvancedDataGrid 在悬停时拖放选择项

> ID：10511315
> 
> 赞同：1
> 
> 时间：2012-05-09T07:06:06.033
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

Flex AdvancedDataGrid，在拖动项目时，我想选择拖动项目下方的项目。就像我们打开 Windows 资源管理器并尝试移动文件时移动文件下方的目录被选中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:28:16.410

[第三方工具](http://www.flexicious.com/Home/Ultimate)克服了您在`Flex`数据网格中发现的所有缺点。

浏览演示并获取试用版。它节省了大量的编码工作。我遇到了同样的问题，但后来我使用了这个数据网格并解决了很多问题。

# azure - Azure上的MongoDB启动“没有这样的命令”异常

> ID：10511318
> 
> 赞同：1
> 
> 时间：2012-05-09T07:06:24.553
> 
> 标签：azure, mongodb-.net-driver

当我尝试启动基于 Azure 的 MongoDB 角色时收到以下错误：

> 命令'cloud'失败：没有这样的cmd：cloud（响应：{“errmsg”：“没有这样的cmd：cloud”，“bad cmd”：{“cloud”：1，“nodes”：{“#d2”：“ 127.255.0.5:20003”、“#d0”：“127.255.0.3:20001”、“#d1”：“127.255.0.4:20002”}、“我”：“#d2”}、“ok”：0.0} )

从以下方法：

> server.RunAdminCommand(cloudCommand);

当我尝试通过 ASP.net 连接到副本集时，出现“连接被拒绝”异常。如果我改为通过命令行初始化副本集，我可以通过我的 asp.net 应用程序连接到它。这是我用来通过命令行初始化副本集的命令：

> 蒙戈 127.255.0.2:20001,127.255.0.3:20002,127.255.0.4:20003

我很困惑，我不知道如何将我的副本集初始化为我的应用程序的启动。帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:49:55.160

您是否遵循以下步骤：

[http://www.mongodb.org/display/DOCS/MongoDB+on+Azure](http://www.mongodb.org/display/DOCS/MongoDB+on+Azure)

尤其

[http://www.mongodb.org/display/DOCS/Azure+Deployment](http://www.mongodb.org/display/DOCS/Azure+Deployment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:12:11.620

有了 Azure 上的虚拟服务器，这个问题现在就无关紧要了。

使用虚拟服务器。

# php - 将两个具有共同时间戳的表和每个月的总金额分组

> ID：10511320
> 
> 赞同：0
> 
> 时间：2012-05-09T07:06:33.010
> 
> 标签：php, sql

以日期为时间戳的第一笔收入和第二笔支出以及每个月的收入和支出总额，现在我想将其列在一张表格中，如下所示

```
Month | Income | Expense | Profit 
```

到现在为止，我只能将一个表与总金额分组，但我需要一个可以同时处理两个表的查询。

我的查询是

```
$result = mysql_query("SELECT 
    date_on,
    MONTHNAME(FROM_UNIXTIME(date_on)) as expmonth,
    YEAR(FROM_UNIXTIME(date_on)) as expyear,
    sum(amount) as exp_total

    from finance_grdps_exp

    group by  expmonth,expyear order by date_on DESC")

    or die(mysql_error());  
    $no=0;   
    $countem = 0;
    while($row = mysql_fetch_array($result))
        {$no++;
            echo' 
            <tr class="gradeX">
                <td>'.
                $row['expmonth'].' '.$row['expyear'].'
                </td>
                <td>'.
                $row['exp_total'].'
                </td>
                <td>'.
                $row['income_total'].' /* not working as if now
                </td>
                <td>'.
                PROFIT.'/* not working as if now
                </td>
                </tr> 
                ';
                } 
```

* * *

伙计们 样本日期基数是....

收入表....

## 姓名| 收入日期（时间戳）| 收入金额

经验表

## 名称|date_on（时间戳）|金额

谢谢

鲁本感谢您的回复....但我收到错误

...在这两种情况下我都收到错误---每个派生表都必须有自己的别名......

```
SELECT MONTHNAME(FROM_UNIXTIME(date_on)) as expmonth,
       YEAR(FROM_UNIXTIME(date_on)) as expyear,
       SUM(amount) as exp_total, 
       SUM(income_amount) as inc_total 
FROM(SELECT finance_grdps_exp.date_on AS date_on, 
            finance_grdps_exp.amount AS exp_amount, 
            0 AS inc_amount 
     UNION 
     SELECT finance_grdps_income.income_date AS date_on, 
            0 AS exp_amount, 
            finance_grdps_income.income_amount AS inc_amount) 
GROUP BY expyear, expmonth ORDER BY date_on DESC 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:01:53.273

假设您有以下结构的两个表 finance_grdps_exp 和 finance_grdps_inc：

```
日期_on | 数量
```

1.  如果在一个表中没有两行在 date_on 中编码的年份和月份相同，则 date_on 仅包含年份和月份，即所有行的其他字段（日期和时间）都相同。

    您可以将它们与 INNER JOIN 构造结合起来：

    ```
    SELECT finance_grdps_exp.date_on AS date_on,
           finance_grdps_exp.amount AS exp_amount,
           finance_grdps_inc.amount AS inc_amount
    FROM finance_grdps_exp INNER JOIN finance_grdps_inc
    ON finance_grdps_exp.date_on = finance_grdps_inc.date_on 
    ```

    结果结构是：

    ```
    日期_on | exp_amount | inc_amount
    ```

    然后让我们将您的想法应用于生成的结构：

    ```
    SELECT date_on,
           MONTHNAME(FROM_UNIXTIME(finance_grdps_exp_and_inc.date_on)) as expmonth,
           YEAR(FROM_UNIXTIME(finance_grdps_exp_and_inc.date_on)) as expyear,
           SUM(finance_grdps_exp_and_inc.exp_amount) as exp_total,
           SUM(finance_grdps_exp_and_inc.inc_amount) as inc_total

    FROM (SELECT finance_grdps_exp.date_on AS date_on,
                 finance_grdps_exp.amount AS exp_amount,
                 finance_grdps_inc.amount AS inc_amount
    FROM finance_grdps_exp INNER JOIN finance_grdps_inc
    ON finance_grdps_exp.date_on = finance_grdps_inc.date_on) AS finance_grdps_exp_and_inc

    GROUP BY expyear, expmonth ORDER BY date_on DESC 
    ```

    mysql_query 给我们：

    ```
     [
          expmonth,
          expyear,
          exp_total /* expense per month */,
          inc_total /* income per month */
        ] 
    ```

    为确保 INNER JOIN 语句的最大性能为两个表中的 date_on 字段创建索引。

2.  其他情况（使用 UNION SELECT）。

    ```
    SELECT MONTHNAME(FROM_UNIXTIME(finance_grdps_exp_and_inc.date_on)) as expmonth,
           YEAR(FROM_UNIXTIME(finance_grdps_exp_and_inc.date_on)) as expyear,
           SUM(finance_grdps_exp_and_inc.exp_amount) as exp_total,
           SUM(finance_grdps_exp_and_inc.inc_amount) as inc_total
    FROM(SELECT finance_grdps_exp.date_on AS date_on,
           finance_grdps_exp.amount AS exp_amount,
           0 AS inc_amount 
           FROM finance_grdps_exp
         UNION 
         SELECT finance_grdps_inc.date_on AS date_on,
           0 AS exp_amount,
           finance_grdps_inc.amount AS inc_amount
           finance_grdps_inc) AS finance_grdps_exp_and_inc
    GROUP BY expyear, expmonth ORDER BY date_on DESC 
    ```

# java - 使用 Eclipse Helios 进行 Web 服务开发

> ID：10511323
> 
> 赞同：-1
> 
> 时间：2012-05-09T07:06:39.233
> 
> 标签：java, eclipse, web-services

需要在 Eclipse Helios 中开发 Web 服务。此**Web 服务被其他 Web 应用程序和 android 应用程序用于从 DB 访问数据**。任何人都可以建议我任何*教程或开发指南*吗？我在互联网上搜索，大部分我看到*他们使用 Axis 或 Jersey 之类的技术*。我对那些新技术一无所知。我该如何发展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:21:51.833

Jersey 非常适合开发 REST api（Web 服务）。你可以在下面找到好的教程 -

[http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/](http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/)

Spring MVC 也是一个很好的替代品。

# c - C语言中if(a,b,c,d)是什么意思

> ID：10511325
> 
> 赞同：0
> 
> 时间：2012-05-09T07:06:41.193
> 
> 标签：c, if-statement

> **可能重复：**
> [C++ 逗号运算符](https://stackoverflow.com/questions/54142/c-comma-operator)

我曾看过 C 语言中的 if 语句。像这样。

```
if (a, b, c, d) {

    blablabla..
    blablabla..

} 
```

这个 if 语句是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T07:08:32.617

你有一个逗号运算符的例子。它计算所有四个表达式，但`d`用于`if`语句。

除非其他表达式`d`有副作用（`a++`例如），否则它们是无用的。您可以通过小程序查看它的运行情况：

```
#include <stdio.h>
int main (void) {
    if (1,0) printf ("1,0\n");
    if (0,1) printf ("0,1\n");
    return 0;
} 
```

输出：

```
0,1 
```

大多数人甚至在没有意识到的情况下使用它，例如：

```
for (i = 0, j = 100; i < 10; i++, j--) ... 
```

、和是两个完整表达式的组成部分，每个表达式都使用逗号运算符`i = 0`。`j = 100``i++``j++`

该标准的相关部分是`C11 6.5.17 Comma operator`：

> **句法：**
> 
> `expression:`
>    `assignment-expression`
>    `expression , assignment-expression`
> 
> **语义：**
> 
> 逗号运算符的左操作数被评估为 void 表达式；在它的求值和右操作数的求值之间有一个序列点。然后对右操作数求值；结果有它的类型和值。
> 
> 例子：
> 
> 如语法所示，逗号运算符（如本小节所述）不能出现在使用逗号分隔列表中的项目（例如函数的参数或初始化程序列表）的上下文中。另一方面，在这种情况下，它可以用在带括号的表达式中或条件运算符的第二个表达式中。在函数调用中：
> 
> `f(a, (t=3, t+2), c)`
> 
> 该函数有三个参数，第二个的值为 5。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T07:09:07.840

逗号运算符：依次计算 a 和 b 以及 c 和 d 并返回 d 的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T07:10:09.513

It evaluates a, then b, then c, then d, and uses the value of `d` as the condition for the `if`. The other three are evaluated, but normally only for side-effects -- the results are discarded.

# svn - SVN在提交时是否只上传更改文件的差异？

> ID：10511334
> 
> 赞同：1
> 
> 时间：2012-05-09T07:07:31.777
> 
> 标签：svn

在我看来，SVN 上传发生了小变化的二进制文件花费的时间出奇的长。

我一直认为 SVN 在提交时只会上传文件相对于某个修订的差异，而不是整个内容。

有谁知道这种行为是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:12:28.513

行为是始终只会将增量（二进制或文本）传输到服务器，这是根据工作副本中原始内容的计算得出的。（参见 .svn 文件夹）。如果需要很长时间，您应该检查您的网络，因为这通常是问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:04:42.397

根据提交文件的格式，一个小的更改可能会引发结构的全面更改，并且可能必须在每次提交时上传整个文件。

# codeigniter - 无法使用 codeigniter 中的 jQuery 的 .serialize() 通过控制器中的 HTTP POST 值访问表单值

> ID：10511337
> 
> 赞同：1
> 
> 时间：2012-05-09T07:07:39.310
> 
> 标签：codeigniter

我在使用 jQuery`.serialize()`方法发布表单时遇到问题。当表单传递给jQuery函数时，它可以通过HTTP POST获取所有值，但是当使用该`.serialize()`方法将表单发送到控制器时，控制器无法获取值。这是我的代码：

在视图中：

```
<form id="loginForm" name="loginForm" method="post">
Email: <input type="text" class="contactStyle required email" id="email" name="email"/>
Password:<input type="password" class="contactStyle required" id="password" name="password"/>
</form>
<a href='#' onclick="login(); return false;" class="loginBut" >Login</a> 
```

Javascript代码：

```
login = function(){
.post(base_url + "elements/ajax_login",  $("#loginForm").serialize(),
function(data){
if(data.success == 'success'){
   top.location =  top.location;
}else if(data.success == 'admin'){
   top.location = base_url + "admin";
}else if(data.success == 'failed'){
          alert('Incorrect login');
          //ADD POPUP
          $('#warn').hide().html('Your email / password combination is not correct.').show('slow');
}else{
    alert("An error has occured please try refreshing the page.")
}
},'json');
} 
```

控制器：

```
function ajax_login() {
    $email = $this->input->post('email');
    $result = array();

    if ($this->ion_auth->login($email, $this->input->post('password'), 0)) { //if the login is successful
        //if its an admin send them to the dashboard
        if ($this->ion_auth->is_admin()) {
            $result['success'] = 'admin';
        } else {                
            $result['success'] = 'success';
        }
    } else { //if the login was un-successful
        $result['success'] = 'failed';            
    }
    echo json_encode($result);

} 
```

我在第一步中遇到错误，将值从 View 传递给 jQuery 是 Method Post，但是当将值从 jquery 传递到控制器时，它使用 Method Get。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:43:08.097

尝试改为seralizeArray：

```
$.post(base_url + "elements/ajax_login",  $("#loginForm").serializeArray(),
function(data){
    // all your stuff
},'json'); 
```

# iphone - 如何在 UIScrollView 中标记 UIImage

> ID：10511342
> 
> 赞同：0
> 
> 时间：2012-05-09T07:07:57.940
> 
> 标签：iphone, ios, xcode

如何分配他们有标签：

```
self.images = [NSMutableArray arrayWithObjects:
                       @"1.jpg",@"2.jpg",@"3.jpg",@"4.jpg",@"5.jpg",nil]; 
```

每当 UIScrollView 在特定图像处停止时，它都会做一些事情/动作/动画。例如，在显示图像 1 时在左侧绘制一个框，在 UIScrollView 中显示图像 2 时在右侧绘制一个框。谢谢。

这是数组：

```
- (void)awakeFromNib
{    
    if (self) {

        //set up carousel data
        //wrap YES = infinite loop
        wrap = YES;

        self.images = [NSMutableArray arrayWithObjects:
                       @"1.jpg",@"2.jpg",@"3.jpg",@"4.jpg",@"5.jpg"nil];
    }

} 
```

这是显示我的图像的位置：

```
- (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[images objectAtIndex:index]]];

    return view;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:00:22.800

我根据我从其他答案的评论中得到的答案来回答（你真的应该编辑你的问题！！！）。

我假设有一个 UIScrollView 处于分页模式，它在滚动停止后在他的全帧上只显示一个图像。如果您只对获取此图像并做某事感兴趣，假设依赖于您之前设置的标签，则滚动视图委托中的代码可能如下所示：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
  int imageTag;
  for(UIView *sv in scrollView.subviews) 
  {
    if(sv.frame.origin.y >= scrollView.contentOffset.y 
       && sv.frame.origin.y <= scrollView.contentOffset.y + scrollView.frame.size.height) 
    {
      imageTag = sv.tag;
      break;
    }
  }
  switch (imageTag) 
  {
      //do something
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:10:12.850

如果您正在谈论导航下一个要显示的图像。然后在此处查看示例代码

[http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

如果还有其他事情。然后解释什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:36:21.290

检查图像的 x 坐标怎么样？这似乎是检查正在显示什么图片的合法方式......如果您想要标记，您可以使用索引，或者将指向图像的指针存储在字典中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:54:25.180

您可以使用以下公式简单地计算 UIScrollView 的偏移量：

```
NSUInteger currentPage = floor((yourScrollView.contentOffset.y - theHeightOfYourImage/2) / theHeightOfYourImage)+1 
```

这是我的想法，但如果我没记错的话，这将为您提供当前选择的页面。当然，这需要您所有的页面/图像具有相同的高度。

你可以在

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView 
```

然后，这将为您提供一个可以使用的索引。

# php - 从模型检索数据到控制器

> ID：10511344
> 
> 赞同：0
> 
> 时间：2012-05-09T07:08:19.120
> 
> 标签：php, cakephp, cakephp-1.3

如果我回显 $data，则在用户模型中打印数据。我的问题是如何在用户控制器中检索相同的数据，我试图这样做，但没有奏效。

用户.php（模型）

```
function display_children($parent, $level) 
       {  
    $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');

     while ($row = mysql_fetch_array($result))
             {  
                   $data =  str_repeat('  ',$level).$row['title']."\n";

                   // echo $data  if i remove comment it display all data 

                   // i m getting all data on this variable $data 

                   $this->display_children($row['title'], $level+1);
             }
    } 
```

users_controller.php

```
public function admin_mlm($id){

     pr($this->User->display_children('Food',0));   // function argument work but no data printed here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:09:29.280

如果您在应用程序中遵循[CakePHP 1.3 约定](http://book.cakephp.org/1.3/en/view/901/CakePHP-Conventions)，则不必在基于 CakePHP 的应用程序中使用“mysql_query()”和“mysql_fetch_array()”PHP 函数。

这就是为什么它是一个框架的原因——它为应用程序提供了另一个抽象层。

因此，如果您遵循 Controller 中的约定，您可以执行以下操作：

```
$this->User->find('all', array('conditions' => array('id' => $user_id))); 
```

您可以提供几乎任何东西作为条件或订单等。查看[文档](http://book.cakephp.org/1.3/en/view/1017/Retrieving-Your-Data)。

还有特殊[的“线程” Model::find() 类型](http://book.cakephp.org/1.3/view/1018/find#find-threaded-1023)。它返回一个嵌套数组。一探究竟！;)

# c - C中的*ptr和ptr*有什么区别？

> ID：10511345
> 
> 赞同：-3
> 
> 时间：2012-05-09T07:08:30.397
> 
> 标签：c

在下面的结构指针示例中

```
 #include<stdio.h>
   #include<stdlib.h>

   struct siva {
   int a;
   };

   typedef struct siva *s1;

    void main()
   {
    s1 b=(s1)malloc(sizeof(s1*));
    b->a=8;
    printf("\n The vlue is s1->a is %d",b->a);
    free(b);
  } 
```

在上面的代码中，变量 b 没有被声明，但是这段代码是如何工作的

在这一行

```
 s1 b=(s1)malloc(sizeof(s1*)); 
```

如何为 b 分配内存以及为什么在 sizeof() 中使用 s1*。*s1和s1*有什么区别

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:11:36.577

以下是`s1`'s 类型的声明，作为指向 `struct siva`

```
typedef struct siva *s1; 
```

以下是指向的指针`s1`（例如指向指针的指针`struct siva`）

```
s1* 
```

malloc中给出的大小是错误的，应该是

```
s1 b=(s1)malloc(sizeof(struct siva)); 
```

作为`s1`指向`struct siva`。它之所以起作用，只是因为结构中第一个元素的地址是结构的地址，但这基本上是一件危险的事情。

`b`被声明，在同一行中它被分配给：

```
 s1 b=(s1)malloc(sizeof(s1*));
//  ^^^^ 
```

请注意，在 C 语言中，您不允许从函数的返回值初始化变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:11:20.387

> s1 和 s1* 有什么区别

*   `sizeof(s1)`产生 的大小`s1`，即指向 的指针的大小`siva`；
*   `sizeof(s1*)`产生指向 的*指针*的`s1`大小，即指向 的指针的大小`siva`。

最后，一行：

```
s1 b=(s1)malloc(sizeof(s1*)); 
```

应该读：

```
s1 b=(s1)malloc(sizeof(struct siva)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:31:54.990

这段代码*不起作用*，至少不像作者想要的那样。 `sizeof (s1*)`给出指向 的指针`s1`的大小，即指向指向 的指针的大小`struct siva`。

首先，我建议将该行更改为阅读

```
s1 b = malloc(sizeof *b); 
```

首先，自 C89 以来，演员表是不必要的，实际上可能会导致问题。除非您使用的是*非常旧*的（C89 之前的）编译器，否则不要强制转换`malloc`or的结果`calloc`。

其次，我使用表达式`*b`作为 sizeof 的操作数，而不是使用类型。它更简洁一些，您不必记住在声明`b`和`malloc`调用之间保持类型直接。由于 is 的类型`b`是`s1`的同义词，因此 is的`struct siva *`类型。 `*b``struct siva`

调用的一般形式`malloc`应该是

```
T *p = malloc(sizeof *p * number_of_elements); 
```

或者

```
T *p;
...  // some bit of code
p = malloc(sizeof *p * number_of_elements); 
```

如果您正在分配 的单个实例`T`，您显然可以`* number_of_elements`从调用中删除`malloc`.

最后，一点建议 - 不要将指针隐藏在 typedef 后面。 `s1`根本不表示指针性，所以它`b` *应该*是`malloc`调用的目标并不是很明显。*

# mysql - 执行 codeigniter 时数据库出错

> ID：10511353
> 
> 赞同：2
> 
> 时间：2012-05-09T07:08:46.480
> 
> 标签：mysql, codeigniter

发生数据库错误错误号：1364

字段“user_data”没有默认值

插入`ci_sessions`( `session_id`, `ip_address`, `user_agent`, `last_activity`) 值 ('9016ab41f90dc82a4047cf3d7d15c3ae', '0.0.0.0', 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/53', 1336546808)

文件名：C:\xampp\htdocs\tutecircle\system\database\DB_driver.php

行号：330

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:12:01.073

会话表如下所示：

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
session_id varchar(40) DEFAULT '0' NOT NULL,
ip_address varchar(16) DEFAULT '0' NOT NULL,
user_agent varchar(120) NOT NULL,
last_activity int(10) unsigned DEFAULT 0 NOT NULL,
user_data text NOT NULL,
PRIMARY KEY (session_id),
KEY `last_activity_idx` (`last_activity`) 
```

);

user_data 字段必须有一个值。否则编辑列以接受空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:15:33.253

将 user_data 字段从“NOT NULL”更改为“ALLOW NULL”。

```
ALTER TABLE ci_sessions MODIFY user_data text DEFAULT NULL; 
```

这应该将其默认设置为“ALLOW NULL”，允许您插入没有值的记录`user_data`

# iphone - 我想在 UIImagePickerController 示例代码中了解有关 CoreData 的一些信息

> ID：10511358
> 
> 赞同：0
> 
> 时间：2012-05-09T07:08:56.770
> 
> 标签：iphone, core-data

我是 iOS 的新手。这是 UIImagePickerController 示例中的代码

我想知道为什么使用 NSManagedObjectContext、NSEntityDescription 来管理数据。为什么不直接设置值？谢谢您的帮助！

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)selectedImage editingInfo:(NSDictionary *)editingInfo {

NSManagedObjectContext *context = event.managedObjectContext;

// If the event already has a photo, delete it.
if (event.photo) {
    [context deleteObject:event.photo];
}

// Create a new photo object and set the image.
Photo *photo = [NSEntityDescription insertNewObjectForEntityForName:@"Photo" inManagedObjectContext:context];
photo.image = selectedImage;

// Associate the photo object with the event.
event.photo = photo;    

// Create a thumbnail version of the image for the event object.
CGSize size = selectedImage.size;
CGFloat ratio = 0;
if (size.width > size.height) {
    ratio = 44.0 / size.width;
}
else {
    ratio = 44.0 / size.height;
}
CGRect rect = CGRectMake(0.0, 0.0, ratio * size.width, ratio * size.height);

UIGraphicsBeginImageContext(rect.size);
[selectedImage drawInRect:rect];
event.thumbnail = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// Commit the change.
NSError *error = nil;
if (![event.managedObjectContext save:&error]) {
    // Handle the error.
}

// Update the user interface appropriately.
[self updatePhotoInfo];

[self dismissModalViewControllerAnimated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:45:56.190

当您说“直接插入图像”时，我不完全确定您的意思。您在代码中所做的是创建一个新的 Photo 对象，该对象在数据库中插入一个新的 Photo 实体，然后将其 photo 属性设置为通过 UIImagePickerViewController 选择的图像，这会将图像保存到数据库中的特定实体.

换句话说，您确实直接设置它。如果你想知道为什么不使用查询将它添加到数据库中，那是因为 Core Data 是一个面向对象的数据库层，除了它是面向对象的明显优势之外，NSManagedObjectContext 还提供了大量有用的功能 - IE。后悔改变的能力。

# java - Struts：如何迭代直到达到一个值

> ID：10511368
> 
> 赞同：0
> 
> 时间：2012-05-09T07:09:43.553
> 
> 标签：java, struts2

我正在计算 Action 类中搜索屏幕中的页数。我需要从 1 迭代到显示带有链接的页码，但我找不到这样做的方法`<s:iterator>`

java 等效代码将是，请让我知道哪里有办法在带有 struts 2.0 标签的 JSP 中实现这一点。

```
 for ( int i = 1; i <= pageCount; i++ ) {
        // print page no
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:21:39.347

为了在您的 S2 应用程序的 JSP 端使用外观，您可以使用 Struts2 [Iterator 标签](http://struts.apache.org/2.3.1/docs/iterator.html)。

该迭代器标签将集合作为迭代的输入源。如果您使用的是 S2 版本 2.1.7 或更高版本，则可以利用 begin、end 和 step 属性。所有您需要在 Action 类中拥有一个包含 getter 和 setter 的集合，并且在您的 JP 中您必须做一些事情像

```
<s:iterator value="days">
  <p>day is: <s:property/></p>
</s:iterator> 
```

有关详细信息，请参阅标签文档

*   [迭代器](http://struts.apache.org/2.3.1/docs/iterator.html)

您可以在迭代器标记内自由使用 S2 if 标记来根据您的要求放置各种条件

*   [如果标记参考](http://struts.apache.org/2.3.1/docs/if.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:29:27.483

[http://struts.apache.org/2.x/docs/iterator.html](http://struts.apache.org/2.x/docs/iterator.html)

将标签的`"begin"`和`"end"`属性`<s:iterator>`用于易于阅读的循环。

您还可以玩 OGNL 游戏，例如：

```
<s:iterator status="stat" value="(5).{ #this }"> 
```

这将循环五次。

值可以像往常一样来自动作属性。

# xpath - 如何从 XML 中获取 XPath？

> ID：10511371
> 
> 赞同：2
> 
> 时间：2012-05-09T07:10:01.233
> 
> 标签：xpath

我有一个 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <rows>
        <column account="1" name="balibid" seq="1">1</column>
        <column account="1" name="genre" seq="1">Kids</column>
        <column account="1" name="ph" seq="1">3</column>
        <column account="1" name="ph" seq="1">4</column>
        <column account="1" name="ph" seq="1">5</column>
        <column account="1" name="ph" seq="1">6</column>
        <column account="1" name="pl6" seq="1">6</column>
 </rows>
</response> 
```

我需要列名 = 流派的 XPath。我应该使用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:30:16.333

在 XPATH 查询中使用`//`会导致不必要的（并且可能是昂贵的）评估，这就是我开始的方式（因为它很容易），但我现在正在努力改掉这个习惯。

鉴于您提供了一个很好的、格式良好的样本。下面是两个示例 XPATH 查询：

```
/response/rows/column[@name="genre"] 
```

和

```
rows/column[@name="genre"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:38:02.757

**使用**（对于特定提供的 XML 文档）：

```
/*/*/*[@name = 'genre'] 
```

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*/*/*[@name = 'genre']"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<response>
    <rows>
        <column account="1" name="balibid" seq="1">1</column>
        <column account="1" name="genre" seq="1">Kids</column>
        <column account="1" name="ph" seq="1">3</column>
        <column account="1" name="ph" seq="1">4</column>
        <column account="1" name="ph" seq="1">5</column>
        <column account="1" name="ph" seq="1">6</column>
        <column account="1" name="pl6" seq="1">6</column>
 </rows>
</response> 
```

**计算 XPath 表达式并将所选节点复制到输出：**

```
<column account="1" name="genre" seq="1">Kids</column> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:24:02.130

**尝试这个：**

```
//column[@name='genre'] 
```

# qt - Qt的QProcess在退出后仍然认为进程正在运行

> ID：10511375
> 
> 赞同：1
> 
> 时间：2012-05-09T07:10:18.690
> 
> 标签：qt, qprocess

我正在使用 QProcess 从[libs3](https://s3.amazonaws.com/libs3.ischo.com/index.html)运行 s3 程序。

```
QString S3::runS3(const QStringList &args, const QByteArray &data)
{
    QProcess s3;

    QProcessEnvironment env = QProcessEnvironment::systemEnvironment();
    env.insert("S3_ACCESS_KEY_ID", "xxx");
    env.insert("S3_SECRET_ACCESS_KEY", "xxx");
    s3.setProcessEnvironment(env);

    s3.start("s3", args);
    if (!s3.waitForStarted())
    {
        qWarning() << "Could not start the s3 process!";
        return QString();
    }

    if (data.size() > 0)
    {
        s3.write(data);
        s3.closeWriteChannel();
    }

    if (!s3.waitForFinished())
    {
        qWarning() << "The s3 process did not complete successfully";
        if (s3.error() == QProcess::Timedout)
        {
            qWarning() << "The s3 process took too long to execute";
        }

        qWarning() << QString(s3.readAllStandardOutput());
        qWarning() << QString(s3.readAllStandardError());
        qWarning() << s3.exitCode();
        qWarning() << s3.exitStatus();
        qWarning() << s3.pid();

        return QString();
    }

    return QString(s3.readAll());
} 
```

但是，每次我运行此代码时，waitForFinished 方法都会等待整整 30 秒，然后我得到以下输出：

```
The s3 process did not complete successfully 
The s3 process took too long to execute 
"1474272 bytes remaining (1% complete) ...
1457888 bytes remaining (2% complete) ...
1441504 bytes remaining (3% complete) ...
1425120 bytes remaining (4% complete) ...
1408736 bytes remaining (5% complete) ...
1392352 bytes remaining (6% complete) ...
1375968 bytes remaining (7% complete) ...
1359584 bytes remaining (8% complete) ...
1343200 bytes remaining (9% complete) ...
1326816 bytes remaining (10% complete) ...
1310432 bytes remaining (12% complete) ...
1294048 bytes remaining (13% complete) ...
1277664 bytes remaining (14% complete) ...
1261280 bytes remaining (15% complete) ...
1244896 bytes remaining (16% complete) ...
1228512 bytes remaining (17% complete) ...
1212128 bytes remaining (18% complete) ...
1195744 bytes remaining (19% complete) ...
1179360 bytes remaining (20% complete) ...
1162976 bytes remaining (21% complete) ...
1146592 bytes remaining (23% complete) ...
1130208 bytes remaining (24% complete) ...
1113824 bytes remaining (25% complete) ...
1097440 bytes remaining (26% complete) ...
1081056 bytes remaining (27% complete) ...
1064672 bytes remaining (28% complete) ...
1048288 bytes remaining (29% complete) ...
1031904 bytes remaining (30% complete) ...
1015520 bytes remaining (31% complete) ...
999136 bytes remaining (32% complete) ...
982752 bytes remaining (34% complete) ...
966368 bytes remaining (35% complete) ...
949984 bytes remaining (36% complete) ...
933600 bytes remaining (37% complete) ...
917216 bytes remaining (38% complete) ...
900832 bytes remaining (39% complete) ...
884448 bytes remaining (40% complete) ...
868064 bytes remaining (41% complete) ...
851680 bytes remaining (42% complete) ...
835296 bytes remaining (43% complete) ...
818912 bytes remaining (45% complete) ...
802528 bytes remaining (46% complete) ...
786144 bytes remaining (47% complete) ...
769760 bytes remaining (48% complete) ...
753376 bytes remaining (49% complete) ...
736992 bytes remaining (50% complete) ...
720608 bytes remaining (51% complete) ...
704224 bytes remaining (52% complete) ...
687840 bytes remaining (53% complete) ...
671456 bytes remaining (54% complete) ...
655072 bytes remaining (56% complete) ...
638688 bytes remaining (57% complete) ...
622304 bytes remaining (58% complete) ...
605920 bytes remaining (59% complete) ...
589536 bytes remaining (60% complete) ...
573152 bytes remaining (61% complete) ...
556768 bytes remaining (62% complete) ...
540384 bytes remaining (63% complete) ...
524000 bytes remaining (64% complete) ...
507616 bytes remaining (65% complete) ...
491232 bytes remaining (67% complete) ...
474848 bytes remaining (68% complete) ...
458464 bytes remaining (69% complete) ...
442080 bytes remaining (70% complete) ...
425696 bytes remaining (71% complete) ...
409312 bytes remaining (72% complete) ...
392928 bytes remaining (73% complete) ...
376544 bytes remaining (74% complete) ...
360160 bytes remaining (75% complete) ...
343776 bytes remaining (76% complete) ...
327392 bytes remaining (78% complete) ...
311008 bytes remaining (79% complete) ...
294624 bytes remaining (80% complete) ...
278240 bytes remaining (81% complete) ...
261856 bytes remaining (82% complete) ...
245472 bytes remaining (83% complete) ...
229088 bytes remaining (84% complete) ...
212704 bytes remaining (85% complete) ...
196320 bytes remaining (86% complete) ...
179936 bytes remaining (87% complete) ...
163552 bytes remaining (89% complete) ...
147168 bytes remaining (90% complete) ...
130784 bytes remaining (91% complete) ...
114400 bytes remaining (92% complete) ...
98016 bytes remaining (93% complete) ...
81632 bytes remaining (94% complete) ...
65248 bytes remaining (95% complete) ...
48864 bytes remaining (96% complete) ...
32480 bytes remaining (97% complete) ...
16096 bytes remaining (98% complete) ...
" 
"" 
0 
0 
18506 
QProcess: Destroyed while process is still running. 
```

我可以看到在 waitForFinished 超时之前，S3 进程显然没有在 Activity Monitor.app 中运行。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:37:22.890

这个问题的原因是我没有将 Qt 的事件循环与 Wt 正确集成，所以当我调用这些函数时它没有运行 - QProcess 恰好需要事件循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:25:16.730

> > QProcess：进程仍在运行时被销毁。

这只是意味着`QProcess`实例超出范围并在没有正确终止的情况下被销毁，而不是*“Qt 认为进程在退出后正在运行”*。

您可以尝试将`QProcess::stateChanged(QProcess::ProcessState newState)`信号连接到某个`QObject`插槽以确定何时*"Qt thinks a process is or is not running"*。

对于您的实际问题，我认为该`s3`过程（不是`QProcess`）只需花费 30 多秒，这是函数签名中的默认值：

```
bool QProcess::waitForFinished ( int msecs = 30000 ) 
```

再给它一些时间或尝试通过`-1`让`QProcess`等待无限期：

```
 if (!s3.waitForFinished(-1)){
   /// ...
 } 
```

**笔记：**

从文档中`waitForFinished()`：

*警告：从主 (GUI) 线程调用此函数可能会导致您的用户界面冻结。*

# asp.net-mvc - 如何根据用户使用 MVC 3 登录来处理 CRUD

> ID：10511379
> 
> 赞同：0
> 
> 时间：2012-05-09T07:11:20.347
> 
> 标签：asp.net-mvc, asp.net-mvc-3

如何只返回登录用户之前存储在数据库中的数据，而不返回其他用户使用 MVC3 输入的数据？

这似乎是一个简单的问题，我对应该如何做有一些理想，但我想在深入研究之前获得专家意见。

# jquery - 自动完成文本框不起作用

> ID：10511389
> 
> 赞同：0
> 
> 时间：2012-05-09T07:12:05.277
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, autocomplete

**我有 2 个模型：教育和大学。在大学中，我有管理员将输入的名称字段，并且我希望该大学名称在用户键入任何字母时显示在教育表单中，即带有大学名称的自动完成文本框**

以下是我的教育 form.html.haml 中的代码，但我不知道为什么这段代码不起作用......实际上，当我得到这个项目时，这段代码已经存在，所以无法理解为什么自动完成不起作用..

```
= f.label :college_id, "College<em>*</em><small>college name</small>".html_safe
= f.text_field :college_id, :value => (@education.college ? @education.college.full_name : "")
:javascript
  $(document).ready(function() {   
      $('#education_college_id').focus().autocomplete(#{colleges_names_arr});
}); 
```

但这没有给出任何输出。我无法理解这段代码在做什么？我正在使用 jquery,autocomplete.js 来完成这个..我应该写什么来获得自动完成的大学名称列表。我必须定义 Colleges_names_arr教育模式中的方法将拥有大学模式中的所有大学名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:40:35.157

尝试[选择](https://github.com/harvesthq/chosen)的库，它将下拉列表转换为自动完成，在这里你显示大学名称是自动完成的，你可以使用集合选择和使用选择。它会解决你的目的。

# image - 在 c# 中绘制字符串后提高图像质量

> ID：10511390
> 
> 赞同：0
> 
> 时间：2012-05-09T07:12:14.927
> 
> 标签：image, text, bitmapimage, drawstring

我使用 Graphics.DrawString 方法在图像上写入文本，但保存图像后文本质量变得太低。这是我的代码：

```
Bitmap bitMapImage = new System.Drawing.Bitmap(Server.MapPath("~/k32.jpg"));
Graphics graphicImage = Graphics.FromImage(bitMapImage);
graphicImage.DrawString("string", font, s, new Point(10, 10));
graphicImage.InterpolationMode =   System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        graphicImage.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
        graphicImage.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAliasGridFit;
        graphicImage.TextContrast = 0;
Response.ContentType = "image/jpeg";
bitMapImage.Save(Server.MapPath("~/k33.jpg"), ImageFormat.Jpeg); 
```

如何提高文本质量？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:16:16.553

在图像上写入文本*之前*尝试设置 AntiAlias 设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:21:16.603

您可以尝试使用无损图像格式：

```
bitMapImage.Save(Server.MapPath("~/k33.png"), ImageFormat.Png); 
```

或者，如果您真的想坚持使用 jpeg，那么您可以参考此[MSDN How to: Set JPEG Compression Level尝试调整 JPEG 压缩级别](http://msdn.microsoft.com/en-us/library/bb882583.aspx#2)

```
private void VaryQualityLevel()
{
    // Get a bitmap.
    Bitmap bmp1 = new Bitmap(@"c:\TestPhoto.jpg");
    ImageCodecInfo jgpEncoder = GetEncoder(ImageFormat.Jpeg);

    // Create an Encoder object based on the GUID
    // for the Quality parameter category.
    System.Drawing.Imaging.Encoder myEncoder =
        System.Drawing.Imaging.Encoder.Quality;

    // Create an EncoderParameters object.
    // An EncoderParameters object has an array of EncoderParameter
    // objects. In this case, there is only one
    // EncoderParameter object in the array.
    EncoderParameters myEncoderParameters = new EncoderParameters(1);

    EncoderParameter myEncoderParameter = new EncoderParameter(myEncoder, 100L);
    myEncoderParameters.Param[0] = myEncoderParameter;
    bmp1.Save(Server.MapPath("~/k33.jpg"), jgpEncoder, myEncoderParameters);
}

private ImageCodecInfo GetEncoder(ImageFormat format)
{

    ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();

    foreach (ImageCodecInfo codec in codecs)
    {
        if (codec.FormatID == format.Guid)
        {
            return codec;
        }
    }
    return null;
} 
```

# java - 将所有 HTTP 请求重定向到 HTTPS 请求，无需更改代码

> ID：10511393
> 
> 赞同：0
> 
> 时间：2012-05-09T07:12:29.877
> 
> 标签：java, websphere

我的 Web 应用程序在共享服务器（Websphere）中运行，现在我的应用程序针对 HTTP 和 HTTPS 请求运行。通常，当应用程序运行时，它会显示如下 [https://localhost:9443/index.jsp](https://localhost:9443/index.jsp)。如果用户尝试将 https 更改为 http 并提交请求，则服务器接受该请求。我需要避免这种情况，并使应用程序仅支持应用程序级别的 https 请求。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:17:40.313

```
<security-constraint>
<web-resource-collection>
    <web-resource-name>https</web-resource-name>
    <description>No Description</description>
    <url-pattern>/*</url-pattern>
</web-resource-collection>
<user-data-constraint>
    <description>No Description</description>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
</user-data-constraint> 
```

`user-data-constraint`在您的 web.xml 中添加以上内容。这会将所有`http`请求重定向到`https`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:35:23.767

拒绝用户非 https 连接的另一种方法是简单地删除 http 传输链；转到应用程序服务器 > 您的服务器 > Web 容器传输链，选择 WCInboundDefault 并单击删除。现在您只剩下 WCInboundDefaultSecure 传输链，它侦听 SSL 端口。

另一种同样有效的替代方法是在 Virtual Hosts > default_host > Host Aliases 中为您的非 https 端口删除主机别名——这感觉像是一个不那么残酷的配置更改：）

如果您更喜欢重定向而不是限制，我建议您在访问应用程序服务器之前执行此操作，例如在 Web 服务器或负载均衡器上。如果您在 WAS 前使用 Apache HTTP 服务器或 IBM HTTP 服务器，您可以使用 mod_rewrite 管理重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:24:47.150

验证是否在 WebSphere 管理控制台中启用了全局和应用程序安全性。

# javascript - 在 window.addEvent() 外调用函数 - mooTools

> ID：10511396
> 
> 赞同：0
> 
> 时间：2012-05-09T07:12:40.760
> 
> 标签：javascript, mootools

我正在使用 mooTools，我需要在标签上的点击事件上调用函数 TestA() 但这不起作用。我知道我可以通过 $().addEvent(...) 附加事件做一个标签，但我需要使用像下面这样的方法。

```
<script type='text/javascript'>
    window.addEvent('domready', function () {           
          function TestA(){}
      });

    function TestB(){}

</script>

<a href="#" onclick="TestA()">Test</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:44:42.397

是否有任何理由仅在 DOM 准备好时才定义 TestA 函数？TestA() 不起作用的原因是因为它仅在定义为 domready 处理程序的函数范围内定义。

如果您确实需要按照您的方式进行操作，那么您需要将变量范围限定在该函数之外：

```
<script type='text/javascript'>

    var TestA;

    window.addEvent('domready', function () {           
        TestA = function(){}
    });

    function TestB(){}

</script>

<a href="#" onclick="TestA()">Test</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:48:55.167

您需要使用*TestA = function (){}*符号而不是*function TestA(){}*：

```
<script type='text/javascript'>
    window.addEvent('domready', function () {           
          TestA = function (){}
      });

    function TestB(){}

</script>

<a href="#" onclick="TestA()">Test</a> 
```

# ios - 如何使用 NSCoding 和 NSFileManager 保存动态创建的对象

> ID：10511398
> 
> 赞同：-1
> 
> 时间：2012-05-09T07:12:53.003
> 
> 标签：ios

有没有办法保存动态创建的对象。

我正在使用 NSCoding 和 NSFileManager 来保存玩家的数据，并且得分和工作正常

但现在我的要求是保存游戏状态，因为有很多动态创建的对象，我想保存所有这些对象

实际上我正在定期创建类似的对象（最初不是创建所有对象），即我正在做类似于俄罗斯方块游戏，也就是说，如果一个对象到达地板/地面，我们必须生成另一个这样的对象

现在我想保存所有创建的对象及其位置。

请给我一些建议以保存所有动态创建的对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:25:43.353

谷歌的第一击：[http](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager) ://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager 您必须创建一个包含游戏状态的对象，包括位置和状态你所有的游戏积木和东西。这个对象需要使用你已经为你的播放器实现的机制来保存。

# grails - 从 Config.groovy 和 Datasource.groovy 访问战争文件名

> ID：10511402
> 
> 赞同：1
> 
> 时间：2012-05-09T07:13:09.637
> 
> 标签：grails, war

我想以多个名称部署我的战争文件，只是重命名它似乎在 tomcat 上工作正常。这显然给了我不同的 URL。我已经使用 request.contextPath 在应用程序运行时在应用程序中找到我自己的 URL，但是如果我想在 Datasource.groovy 中的 war 文件之后命名数据库文件，那么就没有请求对象可供我查看和我运气不好。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:17:46.567

如果您使用[外部化配置为每个部署配置单独的配置文件怎么样](http://grails.org/doc/latest/guide/conf.html#configExternalized)

只有每次部署不同的值才需要在这些文件中。然后每次你创建一个新的战争，你也会为此部署创建一个新的配置文件。

（当然，您每次都需要手动创建它，但我认为您可以为此编写脚本或使用查找/替换）

# android - 直接显示gmail屏幕...不是通过选择

> ID：10511403
> 
> 赞同：0
> 
> 时间：2012-05-09T07:13:09.910
> 
> 标签：android, email, gmail

我对android有点陌生。
我正在尝试通过 gmail 发送消息，这是我的代码。

```
Intent intent = new Intent(Intent.ACTION_SENDTO);  
String uriText;  
uriText = "mailto:test@gmail.com?subject=Subject&body=this is test.";  
uriText = uriText.replace(" ", "%20");  
Uri uri = Uri.parse(uriText);   
intent.setData(uri);  
startActivity(Intent.createChooser(intent, "Select mailer")); 
```

有用。但是，在发送消息之前，它会显示一个选择框
并要求我选择 gmail 或电子邮件。
如何跳过选择框？

任何帮助将不胜感激..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:07:29.713

> How can I skip the selection box ?

You don't. You allow the user to choose what application they wish to use to send the message. Some users do not use Gmail.

# tar - tar 排除单个文件/目录，而不是模式

> ID：10511406
> 
> 赞同：25
> 
> 时间：2012-05-09T07:13:39.340
> 
> 标签：tar

我`tar`用于对服务器进行每日备份，并希望避免备份 /proc 和 /sys 系统目录，但不排除文件树中其他位置名为“proc”或“sys”的任何目录。

例如，具有以下目录树的示例（“ *bla* ”是普通文件）：

```
# find
.
./sys
./sys/bla
./foo
./foo/sys
./foo/sys/bla 
```

我想排除`./sys`但**不** `./foo/sys`排除。

我似乎找不到`--exclude`这样做的模式......

```
# tar cvf /dev/null * --exclude=sys
foo/ 
```

或者...

```
# tar cvf /dev/null * --exclude=/sys
foo/
foo/sys/
foo/sys/bla
sys/
sys/bla 
```

有任何想法吗？(Linux Debian 6)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T07:29:09.363

您可以指定排除模式的绝对路径，这样其他`sys`或`proc`目录将被归档：

```
tar --exclude=/sys --exclude=/proc / 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T18:14:11.527

在这种情况下，您可能需要使用：

```
--anchored --exclude=sys/\* 
```

因为如果您的 tar 没有显示前导的“/”，则您的过滤器有问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-08T19:12:58.270

使用 tar 您可以通过在任何应该跳过的目录中放置标记文件来排除目录。

创建标签文件，

```
touch /sys/.exclude_from_backup
touch /proc/.exclude_from_backup 
```

然后，

```
tar -czf backup.tar.gz --exclude-tag-all=.exclude_from_backup * 
```

# java - 有哪些方法可以在 Java for XenApp 中检索时区设置？

> ID：10511407
> 
> 赞同：2
> 
> 时间：2012-05-09T07:13:42.413
> 
> 标签：java, xenapp

我们的 Java 应用程序使用

```
TimeZone tz = TimeZone.getDefault() 
```

还有其他获取机器时区设置的方法吗？

**背景**

在我们的应用程序运行的所有环境中，使用`TimeZone.getDefault()`在相当长的一段时间内对我们都非常有效：独立的 Java 应用程序，在 Tomcat 5/6/7 内，在 Windows XP、Windows 7 和 Windows Server 2003/2008、32 和 64-少量。

但是，最近我们已经开始在 Windows 2008 R2 之上通过 XenApp 6.5 远程运行该应用程序。在这种环境下，我们的应用程序看到的时区是服务器时区，而不是客户端的时区，即使 XenApp 已配置为执行[“时区重定向”](http://support.citrix.com/article/CTX126099)。我们在 Java 1.6.0 更新 30 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:20:20.480

您可以使用日历对象从该对象创建和获取时区。例子：

```
TimeZone tz = Calendar.getInstance().getTimeZone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:21:07.557

```
System.getProperty("user.timezone"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:04:42.440

这似乎是 Java 和 Citrix XenApp 的一个已知问题。甚至 IBM 的基于 Java 的 Lotus Notes 客户端也存在这个[问题](http://www-01.ibm.com/support/docview.wss?uid=swg21584369)。不幸的是，我无法在任何地方找到解决方案。

我能够通过编写一个获取时区的非常简单的 C# 程序来解决这个问题。这会正确读取客户端的时区。我使用[NodaTime](http://code.google.com/p/noda-time/)库以[tz 数据库](http://en.wikipedia.org/wiki/Tz_database)格式读取时间，这是 Java 用来识别时区的方法。这是程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NodaTime;

namespace WindowsTimeZoneReader
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(DateTimeZone.GetSystemDefault() + "," + DateTime.Now);
        }
    }
} 
```

在我的 Java 程序中，我使用 Runtime.exec() 和[此处](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)描述的技术来执行这个 C# 程序来读取这个程序的输出。

一旦我有了这个，我就可以简单地比较 Java 报告的时区和我的 C# 程序报告的时区：

```
String windowsZone = ...; // The result of executing the above C# program
String javaZone = TimeZone.getDefault().getID();
if (!javaZone.equals(windowsZone)) {
  Java.setDefault( TimeZone.getTimeZone(windowsZone) );
} 
```

一切都非常令人费解，是的，但它似乎有效。

# iphone - 在 Xcode 中将仅 iPhone 的应用程序编译到 iPad 设备

> ID：10511410
> 
> 赞同：0
> 
> 时间：2012-05-09T07:13:53.940
> 
> 标签：iphone, ios, xcode, ipad, ios5

是否可以使用 Xcode 将我的 iPhone 应用程序（仅为 iPhone 开发）编译到我的 iPad 上？我想这样做是为了演示，所以我知道它不是真正兼容的，但我想向客户展示它并以 2x 模式运行它。

iPad 设备附加在我的配置文件中。

当我尝试在 Xcode 中编译它时，它说：

> Xcode 无法使用所选设备运行

在 Xcode 中，我选择：“iOS 设备”（此菜单中的其他选项是：iPad 5.1 模拟器和 iPhone 5.1 模拟器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:21:27.197

在 Xcode 中，选择 Organizer，然后在 Devices 部分，通过 USB 电缆插入 iPad，选择“Use for development”。这种方式允许您直接在 iPad 表单 Xcode 中运行应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:14:51.960

确保您在项目中使用的 iOS 配置文件中添加了设备 ID

# maven - 码头守护进程和 useTestClasspath，我做错了什么？

> ID：10511411
> 
> 赞同：1
> 
> 时间：2012-05-09T07:14:06.750
> 
> 标签：maven, jetty, maven-jetty-plugin

由于我试图在我的 Maven 项目中设置一个嵌入式容器，我希望它在集成测试阶段运行。我有两个无法解决的码头问题：

1.  `<daemon>true</daemon>`没有预期的效果。服务器正在运行，但随后它锁定了构建过程（实际上它阻止了单元测试）。**那么我应该在哪里放置该配置？**
2.  这`<useTestClasspath>true</useTestClasspath>`对我来说是个谜。我不想使用`src/main/webapp/WEB-INF/lib`来放置 postgresql jar（由码头为数据源（postegresql-driver）调用），因为它将嵌入到应用程序中，我不希望它在战争中（客户端边）。所以我想使用`<useTestClasspath>true</useTestClasspath>`，但是当我将 postgresql 放入其中时，`src/test/resources`它找不到/识别它。**那么，我应该如何使用该属性？**

这是完整的插件配置：

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.9</version>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run-war</goal>
                    </goals>
                    <configuration>
                        <useTestClasspath>true</useTestClasspath>
                        <daemon>true</daemon>
                        <contextPath>agepro-prototype</contextPath>
                        <webApp>
                            ${project.build.directory}/agepro-prototype.war
                        </webApp>
                    </configuration>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>9091</port> 
                    </connector>
                </connectors>
                <stopPort>9092</stopPort>
                <stopKey>test</stopKey>
            </configuration>
        </plugin> 
```

提前感谢您为我提供的帮助。我必须为我的语法道歉，因为我的英语很糟糕。
问候，
*德帕多*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:00:39.277

不确定你的第一个问题，但至于你的第二个问题，在你的主要依赖块中指定 postgresql jar 作为提供的范围（这将防止它被捆绑在战争中），并在码头插件定义中添加一个额外的依赖块（带有编译范围），这将使 postgresql jar 在码头运行时可用：

```
<build>
<plugins>
    <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>maven-jetty-plugin</artifactId>
        <version>6.1.9</version>
        <executions>
            <execution>
                <id>start-jetty</id>
                <phase>pre-integration-test</phase>
                <goals>
                    <goal>run-war</goal>
                </goals>
                <configuration>
                    <daemon>true</daemon>
                    <contextPath>agepro-prototype</contextPath>
                    <webApp>
                        ${project.build.directory}/agepro-prototype.war
                    </webApp>
                </configuration>
            </execution>
            <execution>
                <id>stop-jetty</id>
                <phase>post-integration-test</phase>
                <goals>
                    <goal>stop</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <connectors>
                <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                    <port>9091</port> 
                </connector>
            </connectors>
            <stopPort>9092</stopPort>
            <stopKey>test</stopKey>
        </configuration>
        <dependencies>
            <dependency>
                <groupId>postgresql</groupId>
                <artifactId>postgresql</artifactId>
                <version>9.1-901-1.jdbc4</version>
            </dependency>
        </dependencies>
    </plugin>
</plugins>
</build>

<dependencies>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901-1.jdbc4</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

> 我不想使用 src/main/webapp/WEB-INF/lib 来放置 postgresql jar（由码头为数据源（postegresql-driver）调用），因为它将嵌入到应用程序中，我不'不希望它在战争中（客户端）。所以我想使用 true 但是当我将 postgresql 放在 src/test/resources 中时它找不到/识别它

您不应该将 jars 放在任何文件夹（src/main/resources 或 src/main/webapp/WEB-INF/classes）中，它们都应该在 pom.xml 中定义为依赖项。

我还想象当你定义 webApp 配置元素时 useTestClasspath 被忽略，因为它使用打包的战争，它不包含你的测试资源/类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T00:59:30.743

useTestClasspath/useTestScope 仅适用于 jetty:run

这就是为什么它不适用于 jetty:run-war 和其他 jetty:goals

# android - 如何实现拖放功能

> ID：10511414
> 
> 赞同：2
> 
> 时间：2012-05-09T07:14:32.647
> 
> 标签：android, android-layout

嗨，我想在这个应用程序中创建一个应用程序用户通过拖放图像（如计算机中的 edraw 软件）创建流程图请提前告诉我如何实现这个 Thans

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:18:49.987

一个样品：

```
private void dragImage() {
    imgLogo.setOnLongClickListener(new
            OnLongClickListener() {
                @Override
                public boolean onLongClick(View v) {
                    // ClipData data = ClipData.newPlainText("dot",
                    // "Dot : " + v.toString());
                    ClipData data = ClipData
                            .newPlainText("dot",
                                    "Oops!\r\nWe are pleased that we have such clever customers! ;)");

                    MyDragShadowBuilder myShadow = new MyDragShadowBuilder(
                            v);
                    v.startDrag(data, myShadow, (Object) v, 0);

                    return false;
                }
            });
    imgLogo.setClickable(true);
    imgLogo.setFocusable(true);
    imgLogo.setOnDragListener(new OnDragListener() {
        @Override
        public boolean onDrag(View v, DragEvent event) {
            final int action = event.getAction();

            // if (myShadow != null)
            // myShadow.setCurrentPosition(event.getX(), event.getY());
            switch (action) {
            case DragEvent.ACTION_DRAG_STARTED: {
                imgLogo.setVisibility(View.INVISIBLE);
            }
                break;
            case DragEvent.ACTION_DRAG_ENDED: {
                // Hide the surprise again
                imgLogo.setVisibility(View.VISIBLE);

                // Report the drop/no-drop result to the user
                final boolean dropped = event.getResult();
                // tvGalleryLblQty.setText("ended");
            }
                break;
            case DragEvent.ACTION_DROP: {
                final boolean dropped = event.getResult();
            }
                break;
            }
            return false;
        }
    });
} 
```

# lucene.net - 如何在pdf文件中搜索字符串

> ID：10511416
> 
> 赞同：0
> 
> 时间：2012-05-09T07:14:38.637
> 
> 标签：lucene.net

> **可能重复：**
> [如何在 lucene 中索引 pdf、ppt、xl 文件（基于 java 或 python 或 php 中的任何一个都可以）？](https://stackoverflow.com/questions/2582951/how-to-index-pdf-ppt-xl-files-in-lucene-java-based-or-python-or-php-any-of-th)

我需要在文件夹中的文件集合中搜索一个字符串，包括 pdf、docx、txt 格式。是否可以使用 lucene.net 搜索字符串。

请提供一些对此有帮助的参考资料..

感谢你..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:42:34.833

您需要提取各种文件（pdf、docx、txt）的文本并将该文本插入到 Lucene 索引中。Lucene 无法从各种文档格式中读取文本

*   [在 .NET 中提取 PDF 文本](http://www.codeproject.com/Articles/14170/Extract-Text-from-PDF-in-C-100-NET)
*   [Docx 和 Ifilters](https://stackoverflow.com/questions/1011234/how-to-extract-text-from-ms-office-documents-in-c-sharp)

一般搜索“extract {document format} text in .net”，你会发现很多资源。

# grails - 我们如何使用媒体 wiki 格式来编辑电子邮件模板

> ID：10511418
> 
> 赞同：-1
> 
> 时间：2012-05-09T07:14:48.327
> 
> 标签：grails, mediawiki, html-email

我目前有一些 html 格式的电子邮件模板。我想使用 mediawiki 格式。但它按原样显示。一些解析器也将设置为真以包含图像。我们在哪里设置？我正在使用 grails 1.3.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:25:10.407

Grails 本身并不支持这一点。您将需要使用第三方库将媒体 wiki 解析为 html。查看以下媒体 wiki 解析器列表，希望其中一个 Java 解析器能够满足您的需求。

# android - 蓝牙聊天应用程序显示错误

> ID：10511422
> 
> 赞同：0
> 
> 时间：2012-05-09T07:14:55.290
> 
> 标签：android, bluetooth, chat

我正在尝试在我的智能手机（运行 Android 2.3）上运行一个示例蓝牙聊天应用程序。Eclipse 中的目标构建项目使用 Android API 级别 10

```
the same project includes this in the manifest:

<uses-sdk minSdkVersion="6" android:targetSdkVersion="10"  /> 
```

我该如何解决这个问题？任何的想法

这些是我的控制台错误

```
 2012-05-09 12:30:09 - BluetoothChat] Android Launch!
  [2012-05-09 12:30:09 - BluetoothChat] adb is running normally.
  [2012-05-09 12:30:09 - BluetoothChat] Performing     com.example.android.BluetoothChat.BluetoothChat activity launch
 [2012-05-09 12:30:09 - BluetoothChat] Automatic Target Mode: Several compatible targets.   Please select a target device.
[2012-05-09 12:30:13 - BluetoothChat] WARNING: Application does not specify an API level requirement!
[2012-05-09 12:30:13 - BluetoothChat] Device API version is 10 (Android 2.3.3)
[2012-05-09 12:30:13 - BluetoothChat] Uploading BluetoothChat.apk onto device 'emulator-5556'
[2012-05-09 12:30:14 - BluetoothChat] Installing BluetoothChat.apk...
[2012-05-09 12:30:21 - BluetoothChat] Success!
[2012-05-09 12:30:21 - BluetoothChat] Starting activity com.example.android.BluetoothChat.BluetoothChat on device emulator-5556
[2012-05-09 12:30:23 - BluetoothChat] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.android.BluetoothChat/.BluetoothChat } 
```

和 logcat 显示这些错误

```
 05-09 06:53:04.284: W/dalvikvm(435): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-09 06:53:04.524: E/AndroidRuntime(435): FATAL EXCEPTION: main
05-09 06:53:04.524: E/AndroidRuntime(435): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android.BluetoothChat/com.example.android.BluetoothChat.BluetoothChat}: java.lang.ClassNotFoundException: com.example.android.BluetoothChat.BluetoothChat in loader dalvik.system.PathClassLoader[/data/app/com.example.android.BluetoothChat-2.apk]
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.os.Looper.loop(Looper.java:123)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-09 06:53:04.524: E/AndroidRuntime(435):  at java.lang.reflect.Method.invokeNative(Native Method)
05-09 06:53:04.524: E/AndroidRuntime(435):  at java.lang.reflect.Method.invoke(Method.java:507)
05-09 06:53:04.524: E/AndroidRuntime(435):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-09 06:53:04.524: E/AndroidRuntime(435):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-09 06:53:04.524: E/AndroidRuntime(435):  at dalvik.system.NativeStart.main(Native Method)
05-09 06:53:04.524: E/AndroidRuntime(435): Caused by: java.lang.ClassNotFoundException: com.example.android.BluetoothChat.BluetoothChat in loader dalvik.system.PathClassLoader[/data/app/com.example.android.BluetoothChat-2.apk]
05-09 06:53:04.524: E/AndroidRuntime(435):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-09 06:53:04.524: E/AndroidRuntime(435):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-09 06:53:04.524: E/AndroidRuntime(435):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-09 06:53:04.524: E/AndroidRuntime(435):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
05-09 06:53:04.524: E/AndroidRuntime(435):  ... 11 more
05-09 06:57:27.854: I/Process(435): Sending signal. PID: 435 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:26:37.813

检查 Eclipse 项目的**类路径**和**project.properties**文件，我认为它没有正确设置。尝试这种方式，使用您之前创建的普通项目中的这些文件的信息。也许它会有所帮助。

# android - android在按住按钮时重复动作

> ID：10511423
> 
> 赞同：25
> 
> 时间：2012-05-09T07:14:57.247
> 
> 标签：android

我想在按住按钮时实现重复动作。示例：当用户点击一个按钮并按住它时，它应该以固定的时间间隔一次又一次地调用类似的方法，直到用户将手指从按钮上移开。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-09T07:41:45.457

有多种方法可以做到这一点，但一个非常简单的方法是在 a`Runnable`上发布一个`Handler`有一定延迟的。在它的最基本形式中，它看起来有点像这样：

```
Button button = (Button) findViewById(R.id.button);
button.setOnTouchListener(new View.OnTouchListener() {

    private Handler mHandler;

    @Override public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            if (mHandler != null) return true;
            mHandler = new Handler();
            mHandler.postDelayed(mAction, 500);
            break;
        case MotionEvent.ACTION_UP:
            if (mHandler == null) return true;
            mHandler.removeCallbacks(mAction);
            mHandler = null;
            break;
        }
        return false;
    }

    Runnable mAction = new Runnable() {
        @Override public void run() {
            System.out.println("Performing action...");
            mHandler.postDelayed(this, 500);
        }
    };

}); 
```

这个想法很简单：当“向下”触摸动作发生时，在 a 上发布`Runnable`包含重复动作的 a 。之后，在“向上”触摸动作过去之前`Handler`不要再次发布。`Runnable`将`Runnable`继续将自己发布到`Handler`（当“向下”触摸动作仍在发生时），直到它被触摸动作移除 - 这就是启用“重复”方面的原因。

根据按钮的实际行为及其 onclick/ontouch 您所追求的，您可能希望立即发布初始帖子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-12T11:40:32.103

这是更独立的实现，可用于任何支持触摸事件的视图。

```
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;

/**
 * A class, that can be used as a TouchListener on any view (e.g. a Button).
 * It cyclically runs a clickListener, emulating keyboard-like behaviour. First
 * click is fired immediately, next one after the initialInterval, and subsequent
 * ones after the normalInterval.
 *
 * <p>Interval is scheduled after the onClick completes, so it has to run fast.
 * If it runs slow, it does not generate skipped onClicks. Can be rewritten to
 * achieve this.
 */
public class RepeatListener implements OnTouchListener {

    private Handler handler = new Handler();

    private int initialInterval;
    private final int normalInterval;
    private final OnClickListener clickListener;
    private View touchedView;

    private Runnable handlerRunnable = new Runnable() {
        @Override
        public void run() {
            if(touchedView.isEnabled()) {
                handler.postDelayed(this, normalInterval);
                clickListener.onClick(touchedView);
            } else {
                // if the view was disabled by the clickListener, remove the callback
                handler.removeCallbacks(handlerRunnable);
                touchedView.setPressed(false);
                touchedView = null;
            }
        }
    };

    /**
     * @param initialInterval The interval after first click event
     * @param normalInterval The interval after second and subsequent click 
     *       events
     * @param clickListener The OnClickListener, that will be called
     *       periodically
     */
    public RepeatListener(int initialInterval, int normalInterval, 
            OnClickListener clickListener) {
        if (clickListener == null)
            throw new IllegalArgumentException("null runnable");
        if (initialInterval < 0 || normalInterval < 0)
            throw new IllegalArgumentException("negative interval");

        this.initialInterval = initialInterval;
        this.normalInterval = normalInterval;
        this.clickListener = clickListener;
    }

    public boolean onTouch(View view, MotionEvent motionEvent) {
        switch (motionEvent.getAction()) {
        case MotionEvent.ACTION_DOWN:
            handler.removeCallbacks(handlerRunnable);
            handler.postDelayed(handlerRunnable, initialInterval);
            touchedView = view;
            touchedView.setPressed(true);
            clickListener.onClick(view);
            return true;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_CANCEL:
            handler.removeCallbacks(handlerRunnable);
            touchedView.setPressed(false);
            touchedView = null;
            return true;
        }

        return false;
    }

} 
```

用法：

```
Button button = new Button(context);
button.setOnTouchListener(new RepeatListener(400, 100, new OnClickListener() {
  @Override
  public void onClick(View view) {
    // the code to execute repeatedly
  }
})); 
```

[原始答案](https://stackoverflow.com/a/12795551/4291272)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-09T04:19:55.567

基于[Faisal Shaikh](https://stackoverflow.com/users/4291272/faisal-shaikh)答案的兼容 Kotlin 版本和示例：

```
package com.kenargo.compound_widgets

import android.os.Handler
import android.view.MotionEvent
import android.view.View
import android.view.View.OnTouchListener

/**
 * A class, that can be used as a TouchListener on any view (e.g. a Button).
 * It cyclically runs a clickListener, emulating keyboard-like behaviour. First
 * click is fired immediately, next one after the initialInterval, and subsequent
 * ones after the initialRepeatDelay.
 *
 * @param initialInterval The interval after first click event
 * @param initialRepeatDelay The interval after second and subsequent click events
 *
 * @param clickListener The OnClickListener, that will be called
 * periodically
 *
 * Interval is scheduled after the onClick completes, so it has to run fast.
 * If it runs slow, it does not generate skipped onClicks. Can be rewritten to
 * achieve this.
 *
 * Usage:
 *
 * someView.setOnTouchListener(new RepeatListener(400, 100, new OnClickListener() {
 *  @Override
 *  public void onClick(View view) {
 *      // the code to execute repeatedly
 *  }
 * }));
 *
 * Kotlin example:
 *  someView.setOnTouchListener(RepeatListener(defaultInitialTouchTime, defaultRepeatDelayTime, OnClickListener {
 *      // the code to execute repeatedly
 *  }))
 *
 */
class RepeatListener(
    initialInterval: Int,
    initialRepeatDelay: Int,
    clickListener: View.OnClickListener
) : OnTouchListener {

    private val handler = Handler()

    private var initialInterval: Int
    private var initialRepeatDelay: Int

    private var clickListener: View.OnClickListener
    private var touchedView: View? = null

    init {
        require(!(initialInterval < 0 || initialRepeatDelay < 0)) { "negative intervals not allowed" }

        this.initialInterval = initialRepeatDelay
        this.initialRepeatDelay = initialInterval

        this.clickListener = clickListener
    }

    private val handlerRunnable: Runnable = run {
        Runnable {
            if (touchedView!!.isEnabled) {

                handler.postDelayed(handlerRunnable, initialRepeatDelay.toLong())
                clickListener.onClick(touchedView)
            } else {

                // if the view was disabled by the clickListener, remove the callback
                handler.removeCallbacks(handlerRunnable)
                touchedView!!.isPressed = false
                touchedView = null
            }
        }
    }

    override fun onTouch(view: View, motionEvent: MotionEvent): Boolean {

        when (motionEvent.action) {
            MotionEvent.ACTION_DOWN -> {
                handler.removeCallbacks(handlerRunnable)
                handler.postDelayed(handlerRunnable, initialRepeatDelay.toLong())
                touchedView = view
                touchedView!!.isPressed = true
                clickListener.onClick(view)
                return true
            }
            MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -> {
                handler.removeCallbacks(handlerRunnable)
                touchedView!!.isPressed = false
                touchedView = null
                return true
            }
        }

        return false
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-12T02:43:10.500

如果您使用普通视图单击，这是另一种方法。如果是这样，当您释放视图时，会调用单击侦听器。所以我利用长点击监听器来做第一部分。

```
button.setOnLongClickListener(new OnLongClickListener() {

            private Handler mHandler;

            @Override
            public boolean onLongClick(View view) {
                final Runnable mAction = new Runnable() {
                    @Override
                    public void run() {
                        //do something here 
                        mHandler.postDelayed(this, 1000);
                    }
                };

                mHandler = new Handler();
                mHandler.postDelayed(mAction, 0);

                button.setOnTouchListener(new View.OnTouchListener() {

                    @SuppressLint("ClickableViewAccessibility")
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        switch (event.getAction()) {
                            case MotionEvent.ACTION_CANCEL:
                            case MotionEvent.ACTION_MOVE:
                            case MotionEvent.ACTION_UP:
                                if (mHandler == null) return true;
                                mHandler.removeCallbacks(mAction);
                                mHandler = null;
                                button.setOnTouchListener(null);
                                return false;
                        }
                        return false;
                    }

                });

                return true;
            }
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T07:25:41.843

虽然不是一个好主意。它可以通过启动一个计时器来完成，`onKeyDown`在您将光标移动一步并重新启动计时器的时间间隔内触发。然后，您可以取消`onKeyUp`事件的计时器。这在其他系统上的工作方式通常是在第一个键上向下移动，然后稍等片刻以确保用户明确按住按钮......然后重复可能会更快一些。想想键盘自动重复。这应该可以工作，并且不会对 ui 线程产生不利影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T07:19:17.880

`View.OnKeyListener`您可以为该视图注册一个。请考虑到最好对此类回调进行去抖动，否则 - 如果您的方法做一些稍微“重”的事情 - UI 将不会平滑。

# php - 如何测试预定 Facebook 帖子的消息相似性？

> ID：10511430
> 
> 赞同：1
> 
> 时间：2012-05-09T07:15:22.607
> 
> 标签：php, ruby-on-rails, facebook, facebook-graph-api

我有一个网络应用程序，每隔几个小时定期发布活动的 fb 更新。在将这些发布到粉丝页面（也使用 fb twitter 分享功能）时，我从库中收到以下错误：

```
Facebook::APIError: OAuthException: (#100) The status you are trying to publish is a duplicate of, or too similar to, one that we recently posted to Twitter 
```

问题是消息确实不同并且遵循如下模式：

*   `#blah header: X some message here in the past Y hours. Stay tuned for further updates.`
*   `#blah header: X some other message here have over the last Y hours. Stay with us for more updates.`

这些消息是不是*太相似*了，还是这里有别的东西在起作用？我认为消息足够不同，但是有没有办法测试消息是否太相似并且会被 fb 阻止？

# asp.net - 如何在 ASP.Net 动态数据中更改表的 DisplayName

> ID：10511433
> 
> 赞同：1
> 
> 时间：2012-05-09T07:15:36.683
> 
> 标签：asp.net, asp.net-dynamic-data

我是动态数据的新手。我想更改 Default.aspx 页面中表的 DisplayName，以便为它们设置含义全名。我还想在列出、编辑和插入模式时更改表的列名。我怎样才能用 c# 语言做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:05:18.567

您可以通过在每个表上设置`DisplayName`(from `System.ComponentModel`) 属性来做到这一点。为此，您需要为使用动态数据搭建脚手架的每个表都有一个部分类，例如

```
using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

...

[ScaffoldTable(true)]
[DisplayName("Northwind Products")]
partial class Product
{
} 
```

呈现...

![在此处输入图像描述](../Images/4e549e8503a8beb461706c02500a1077.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T08:55:27.837

只是对于看到这篇文章的其他人，我的要求与原始海报相同。我尝试了这些建议，但这些仍然没有用。我发现（这可能很明显）你需要确保你的部分类中有一个“命名空间”声明。命名空间需要与您使用的实体模型相同，即在 App_Code 下您应该有一个 Model.designer.cs 文件 - 您的命名空间需要与

# objective-c - 识别哪个关键用户在文本字段中输入

> ID：10511434
> 
> 赞同：1
> 
> 时间：2012-05-09T07:15:42.670
> 
> 标签：objective-c, cocoa, nstextfield, nskeyvalue

我识别出使用以下代码在文本字段中输入的关键用户。但是我无法识别诸如“大写锁定”-“移位”-“控制”-“命令”-“选项”-“选项卡”之类的键我如何识别它们？

```
- (void)keyUp:(NSEvent *)theEvent
{
    unichar keyChar = 0;
    keyChar = [theArrow characterAtIndex:0];
    NSString *aci=[NSString stringWithFormat:@"%d",keyChar];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:31:24.933

这些是修饰键，它们不会生成`NSKeyDown`事件`NSKeyUp`。它们产生`NSFlagsChanged`事件。对应的`NSResponder`方法是`-flagsChanged:`。

# php - 处理大尺寸字符串时 PHP 脚本停止工作

> ID：10511440
> 
> 赞同：2
> 
> 时间：2012-05-09T07:16:07.260
> 
> 标签：php, string, file, file-io, large-data

我正在测试一个 php 脚本来创建包含大量数据的 csv 文件。这是我执行此任务的方式：

```
$csvdata = "ID,FN,LN,ADDR,TEL,PRO\n
            1,fn1,ln1,addr1,tel1,pro1\n...etc,";
$fname = "./temp/filename.csv";
$fp = fopen($fname,'w');
fwrite($fp,$csvdata);
fclose($fp); 
```

我注意到当字符串 ($csvdata) 包含大约 100,000 个数据行时，脚本可以正常工作。但是当它获得超过 10,00,000 个数据行时，它会停在我构建字符串 $csvdata 的中间（我通过在 for 循环中连接数据来构建 $csvdata 字符串，数据来自数据库）。

当我们使用大字符串值时，有人可以告诉我出了什么问题吗？

谢谢 亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:19:16.413

> 我通过在 for 循环中连接数据、来自数据库的数据来构建 $csvdata 字符串。

据此，我了解到您正在准备将整个文件写入字符串并最终将其写入文件。

如果是这样，那么这种方法并不好。请记住，字符串存在于主内存中，每次追加时，都会消耗更多内存。解决此问题的方法是逐行写入从数据库中读取记录的文件，转换/格式化（如果需要），准备 CSV 行并将其写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:19:55.230

查看您的错误日志。它可能会说一些关于

1.  您试图分配超过某个最大值的内存。这意味着您使用了太多内存 -> 您可以更改 php 允许使用的内存量（php.ini 中的内存限制）

2.  执行时间长于允许的时间。同样，您可以增加这个时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:33:49.153

它应该`$csvdata=`在您的脚本可能会`Memory Exhausted`出错的部分。

当您将 10 个字符保存到您的 a 变量时，它需要 10 位，并且它会越来越大。限制是当它到达分配的内存或 php.ini 时。

所以这就是你继续前进的方式：

1.  设置内存限制 - 增加你的 PHP 内存限制

`ini_set('memory_limit', '256M');

2.逐行写

立即将每条数据写入文件，而不是将它们堆积起来。另外，如果您将 array[0] 写入文件，然后将下一条数据存储到 array[1] 并再次写入并继续执行此操作，则与您现在所做的效果相同。

所以要么

```
while(blah blah){
$var = "text";
fwrite($file,$var); 
```

或在 for 循环中

```
for($i=0;blahblah){
$var[$i] = "query";
fwrite($file,$var[$i]);
unset($var); 
```

当数据库查询是有条件的时，for循环会派上用场`WHERE id='$i'`

祝你好运。

# android - Oracle 数据库移动服务器与 Couchdb

> ID：10511442
> 
> 赞同：2
> 
> 时间：2012-05-09T07:16:13.213
> 
> 标签：android, oracle, couchdb

仅从将与远程服务器同步的移动数据库的角度来看它，假设它是关系数据库还是 NoSQL 并不重要，

什么是更好的选择？

客户端平台是android

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:28:16.067

我会投给 CouchDB。原因是，作为 NoSQL，它有很多优势。最重要的是，您可以使用户的数据离线可用。

以防万一您想了解有关 CouchDB 使用情况的更多信息，我想请求/建议您阅读[this](https://stackoverflow.com/questions/8623096/is-it-possible-to-use-couch-db-or-mysql-or-any-other-db-in-android)、[this](https://stackoverflow.com/questions/3995881/couchdb-on-android)和[this](https://stackoverflow.com/questions/8399070/what-are-requirements-to-use-couchdb-on-android)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:43:55.070

我想指出，Oracle Database Mobile Server 还使数据可以离线使用，这就是它的设计目的。除了同步您的移动数据库，它还提供设备管理。欲了解更多信息：

[http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html](http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html)

我没有使用过 Couchbase 解决方案，但我确实认识那里的一些团队，他们看起来很聪明。

归根结底：如果您想要/需要 Oracle 后端，那么您应该使用 Oracle Database Mobile Server。如果您想尝试 NoSQL，那么 Couchbase 将是您的最佳选择。

Eric Jensen，甲骨文产品经理

# opa - opa：遍历stringmap并基于它形成一个新的字符串

> ID：10511445
> 
> 赞同：2
> 
> 时间：2012-05-09T07:16:41.477
> 
> 标签：opa

我正在编辑来自 Opa 文档的[Hello-wiki代码。](http://doc.opalang.org/manual/Hello--wiki/)我想要一个 wiki-topic 有一个数据库中现有主题的列表。我有一个在默认主题上调用的函数：

```
/**
  * Collect all created topics from /wiki 
  * and present them in Markdown format
  */
function collect_topics(page) {
    string collection = "#Available topics\n"

    // Format as a list
    Set.iter(function( topic ) {
        collection = "{collection} *[{topic}](./{topic})\n"
    }, [/wiki])

    save_source(page, collection)
} 
```

...

```
function start(url) {

    match (url) {

        case {path: [] ... } :
            { collect_topics("Topics") };

        case {~path ... } :
            { display(String.capitalize(String.to_lower(String.concat("::", path)))) };
    }
} 
```

这引发了一个语法错误：“找到一个绑定作为条件”，据我了解，因为字符串是不可变的。有没有办法更改创建的字符串？例如：

```
string x = "foo"
x = x ^ x 
```

如果这是不可能的，那么更好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:54:06.903

事实上，Opa 是一种函数式编程语言，值是不可变的。如果您真的想要一个可变值，请使用[http://doc.opalang.org/module/stdlib.core/Mutable](http://doc.opalang.org/module/stdlib.core/Mutable)或 Cells 来处理您的应用程序[http://doc.opalang.org/value上的状态（安全更新） /stdlib.core.rpc.core/Cell/make](http://doc.opalang.org/value/stdlib.core.rpc.core/Cell/make)

以下是您应该如何编写代码：

```
function collect_topics(page) {

    collection =
        Map.fold(function( key, value, acc ) {
            "{acc}\n *[{key}](./{value})"
        }, /wiki, "#Available topics\n")

    collection
} 
```

这里我使用 Set.fold 而不是 Set.iter。List.fold 文档应该可以帮助您了解“折叠”功能的工作原理：[http ://doc.opalang.org/value/stdlib.core/List/fold](http://doc.opalang.org/value/stdlib.core/List/fold)

Set.iter 不返回任何内容（void），它仅用于遍历集合并执行一些副作用，例如在控制台中打印日志、修改 Dom 等

# java - 将 BufferedImage 保存为 TIFF 文件？

> ID：10511447
> 
> 赞同：4
> 
> 时间：2012-05-09T07:16:51.927
> 
> 标签：java, image, tiff

以下代码可以很好地将 a 写入`BufferedImage`.bmp、.jpg 和 .png 格式的文件：

```
import java.awt.*;
import javax.imageio.ImageIO;
...
BufferedImage image; // assume `image` is properly initialized
File file; // assume 'file' is properly initialized to some file
String format; // This is either 'bmp', 'jpg', or 'png'; if 'tif', it fails
ImageIO.write(imageBlank, format, file); // This properly creates a file for 'bmp', 'jpg', or 'png'; not for 'tif' 
```

但是，当格式为 .tif 时，上面的代码会在行上抛出异常`write`。

许多链接建议使用 Java Advanced Imaging API 创建 TIFF；有些人提供以下链接：http: [//java.sun.com/javase/technologies/desktop/media/jai/](http://java.sun.com/javase/technologies/desktop/media/jai/)。但是，此链接不会导致下载 JAI。其他链接要么是死的，要么是循环的。我不认为 JAI 包含在 JDK 1.7 中。我对么？

有人可以提供实际 JAI 下载的工作链接，或者告诉我如何从`BufferedImage`使用 JDK 1.7 创建 .tif 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:28:44.993

该项目显然为 ImageIO 添加了 TIFF 读写功能：http: [//java.net/projects/imageio-ext](http://java.net/projects/imageio-ext)

如果您正在寻找 JAI 1.1.3：[我在哪里可以下载 Jai 和 Jai-imageio？](https://stackoverflow.com/questions/7502181/where-can-i-download-jai-and-jai-imageio)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:25:16.277

这是 JAI 的下载页面。

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#jai-1_1_2_01-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#jai-1_1_2_01-oth-JPR)

# java - 查询被触发但插入未反映在数据库中

> ID：10511451
> 
> 赞同：1
> 
> 时间：2012-05-09T07:17:00.347
> 
> 标签：java, database, oracle, hibernate, persistence

我正在使用 Hibernate 将实体对象持久保存在 Oracle DB 中：

```
Hibernate: 
    insert 
    into
        TABLE_NAME
        (COLUMNS..) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?) 
```

这是我将“show_sql”设置为“true”后得到的。没有任何异常，systrace & debug 显示一切运行顺利。我也重新检查了映射和配置，一切看起来都很好；我也检查了数据库。

问题是插入没有反映在表中！可能是什么问题！我已经重新检查了每个设置、映射等。但我不明白哪里出了问题，请帮忙！

-编辑-

是的，我也承诺了！:|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:47:49.730

我会检查您是否正在连接到您认为正在连接的数据库以及用户。您可以尝试在表上添加一个约束，以防止插入您正在测试的行，看看您是否会引发错误。

如果您检查了这些问题，那么问题可能出在数据库之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:34:59.723

Maybe some other oracle user session obtained a lock on a table you are trying to insert in?

# mysql - 基于字段创建表

> ID：10511455
> 
> 赞同：0
> 
> 时间：2012-05-09T07:17:24.900
> 
> 标签：mysql, create-table

我有一个大约有 100k 行的 MySql 表。有一个字段说 id 包含 1-35 的数字。所有这些记录都在这个 id 范围内，即所有这些记录的 id 列的值都在 1-35 之间。

现在我想创建另一个表，每个表都有一行。即新表应该只有 35 行。

怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:21:27.883

```
create table new_table (id int);
insert into new_table
    select distinct id from big_table; 
```

## 编辑：

您可以`new_table`通过输出`big_table`创建脚本并更改名称来创建。

```
SHOW CREATE TABLE big_table;
/* modify the name of the output and execute */
insert into new_table
    select * from big_table group by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:22:53.417

您有一个包含 100.000 行的表，并且您想要一个包含 35 行的新表。您希望其余列的值是多少？

如果答案是：没关系，这有效：

```
CREATE TABLE newTable
SELECT * FROM yourTable
GROUP BY ID; 
```

如果你只想要ID，

```
CREATE TABLE newTable
SELECT DISTINCT ID FROM yourTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:49:08.707

您可以将数据从一个表复制到另一个偶数差异数据库（Schema），如下所示

```
INSERT INTO [DestDatabase].[DestTablName]
SELECT [ColumnName] FROM [SourceDatabase].[SourceTablName]; 
```

因此，您可以使用两种方式：

1：

```
INSERT INTO tbl_New
SELECT DISTINCT id from tbl_Original; 
```

2：

```
INSERT INTO tbl_New
SELECT id from tbl_Original GROUP BY id; 
```

# ios - 如何在 ios 中保持套接字处于活动状态？

> ID：10511457
> 
> 赞同：1
> 
> 时间：2012-05-09T07:17:29.330
> 
> 标签：ios, sockets, background, voip

我正在 iPhone 上做一个 VOIP 项目。我有保持套接字活动的问题。我已经为 VOIP 使用配置了一个套接字，并设置`kCFStreamNetworkServiceTypeVoIP`为`CFReadStreamRef`和`CFWriteStreamRef`。

*   当我的应用程序在前台运行并且我不执行任何操作时，1 分钟后 iPhone 将进入睡眠状态，黑屏。我的套接字**仍然连接**到服务器。
*   但是当我的应用程序在前台运行时，我按下主页按钮，并且不执行任何操作，大约 1 分钟 iPhone 将进入睡眠状态，然后我的套接字与服务器**断开连接**。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:23:24.373

首先，您是否阅读[过开发 VoIP 应用程序的技巧](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)？从您的描述来看，您似乎还没有设置`UIBackgroundModes`为`voip`. 您还可能需要配置一个保持活动处理程序。

# sql - 选择sql xquery中所有记录的所有元素x的不同列表

> ID：10511461
> 
> 赞同：4
> 
> 时间：2012-05-09T07:17:52.420
> 
> 标签：sql, xml, xquery

下面的查询表达式：

```
SELECT distinct xmlCol.value('(//interest/@id)[1]','nvarchar(64)') FROM table1 
```

返回所有记录的**第一个***感兴趣*元素的*id列表。*

 ***但是一个 xml 可能包含**多个** *兴趣*元素。

那么，如何在 sql xquery 中获取所有记录的所有*兴趣*元素的不同列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:36:09.827

```
select distinct T.N.value('.','nvarchar(64)')
from table1
  cross apply xmlCol.nodes('//interest/@id') as T(N) 
```***

# iphone - Xcode 4.3 UITableView 空白

> ID：10511462
> 
> 赞同：1
> 
> 时间：2012-05-09T07:17:53.430
> 
> 标签：iphone, xcode, ios4, tableview

我通过单击按钮从 TabbedController 页面启动 UITableView 视图。

UITableView 示例取自 LuisEGarza 在 YouTube 上的优秀 UITableView 示例，我相信它是完美的。代码可以编译，但是当 UITableView 页面出现时它是空白的。这是 TabbedController 的问题还是我做错了什么？

下面是示例 .m 和 .h 文件。

```
//
//  SolarResultsTableViewController.h
//  Solar
//
//  Created by Edward Hasted on 08/05/2012.
//  Copyright (c) 2012 EHC. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface SolarResultsTableViewController : UIViewController  <UITableViewDelegate, UITableViewDataSource> {

    NSArray *tableData;
    // IBOutlet UILabel *rowLabel;

}

@property (nonatomic, retain) NSArray *tableData;

@end

//
//  SolarResultsTableViewController.m
//  Solar
//
//  Created by Edward Hasted on 08/05/2012.
//  Copyright (c) 2012 EHC. All rights reserved.
//

#import "SolarResultsTableViewController.h"

@implementation SolarResultsTableViewController 
@synthesize tableData;

- (void)viewDidLoad
{
    tableData = [[NSArray alloc] initWithObjects:@"A", @"B", @"C", @"D", nil];
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

#pragma mark - TableView Data Source methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    // rowLabel.text = [NSString stringWithFormat:@"%d", count];
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = nil;
    cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
    if (cell == nil)
            { 
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
            }
    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];            
    return cell;
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:33:34.920

实现`(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`方法

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
} 
```

我希望它对你有帮助。

# design-patterns - 如何耦合或解耦可能相互传递输入和输出的动作

> ID：10511475
> 
> 赞同：0
> 
> 时间：2012-05-09T07:18:43.097
> 
> 标签：design-patterns

考虑一下 - 我有带有输出 OA 的操作 A，以及可以使用 OA 但不是强制性的操作 B（假设它是在系统启动时通过依赖注入静态确定的）

什么是最好的设计模式？（考虑会有行动 C 可以采取 OA 和/或 OB 等）

代码应该在什么级别（以及如何）知道活动链是 A --> OA --> B 或 A --> B ？一个具体的类将实现这个“管道”是否像工厂一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:25:54.827

听起来您正在尝试描述[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)。这种模式的替代/改进称为[信号和插槽](http://en.wikipedia.org/wiki/Signals_and_slots)。Qt 也有一个很好的实现，[here](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。

# php - 用于英国邮件 web 服务 api 的 php 肥皂客户端？

> ID：10511478
> 
> 赞同：9
> 
> 时间：2012-05-09T07:18:57.323
> 
> 标签：php, web-services, api, soap, wsdl

我正在一个下订单的商业网站上工作。为了跟踪该交付，我需要向用户提供一个链接，其中包含用户填写的表单中的所有参数，以创建交付并使用 UK Mail 和邮件中提供的链接跟踪其状态。

我必须使用 UK Mail Web Service API。谁能告诉我该怎么做？我是 SOAP WSDL 的新手。

据我了解，我现在这样做了如何走得更远？我的代码低于它的基本客户端，我需要：

1.  验证登录并使用验证令牌

2.  我需要发送参数来创建国内作业

3.  我也需要跟踪交货状态

这是我更新的代码：

```
<?php 

$LoginWebRequest = new stdClass();
$LoginWebRequest->Username = 'xxx cant show here xxx';
$LoginWebRequest->Password = 'xxx cant show here xxx';

//echo "<pre>";  print_r($LoginWebRequest); "</pre>"; exit;

$Login = new stdClass();
$Login->loginWebRequest = $LoginWebRequest;

//echo "<pre>";  print_r($Login); "</pre>"; exit; 

$soapClient = new SoapClient('somewsdl?wsdl');
$LoginResponse = $soapClient->Login($Login);

//echo "<pre>";  print_r($LoginResponse); "</pre>"; exit; 

$LoginResponse = $soapClient->Login($Login);

// -- till here my code runs fine and also gives the failed output but adding the code //below gives me error cant find out whats wrong 

$AuthenticationToken = $LoginResponse->LoginResult->AuthenticationToken;

$AddDomesticConsignmentWebRequest = new stdClass();
$AddDomesticConsignmentWebRequest->Username = 'xxxxxx';
// setting the Authentication Token from the previous step
$AddDomesticConsignmentWebRequest->AuthenticationToken = $AuthenticationToken ;
// other properties are set here...

$AddDomesticConsignment = new stdClass();
$AddDomesticConsignment->request = $AddDomesticConsignmentWebRequest;

$soapClient = new SoapClient('https://svc?wsdl');
$AddDomesticConsignmentResponse = $soapClient->AddDomesticConsignment($AddDomesticConsignment);

?> 
```

我已经解决了所有问题并得到了我的托运，也不需要跟踪我的 api

我的 xml 是这样的，或者你可以检查 pdf

```
 Example XML Request:
    <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"        xmlns:thir="http://webapp-cl.internet-delivery.com/ThirdPartyIntegrationService">
    <soap:Header/>
    <soap:Body>
    <thir:ConsignmentTrackingSearchV1>
    <thir:UserName>mail.com</thir:UserName>
    <thir:Password>123</thir:Password>
    <thir:Token></thir:Token>
    <thir:ConsignmentNumber>01161</thir:ConsignmentNumber>
    <thir:IsPartialConsignmentNumber>false</thir:IsPartialConsignmentNumber>
    <thir:CustomerReference></thir:CustomerReference>
    <thir:IsPartialCustomerReference>false</thir:IsPartialCustomerReference>
    <thir:DeliveryPostCode></thir:DeliveryPostCode>
    <thir:MailingID></thir:MailingID>
    <thir:MaxResults>100</thir:MaxResults>
    </thir:ConsignmentTrackingSearchV1>
    </soap:Body>
    </soap:Envelope> 
```

示例 xml 响应

```
 <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
       <soap:Body>
       <ConsignmentTrackingSearchV1Response xmlns="http://webapp-cl.internet- delivery.com/ThirdPartyIntegrationService">
        <ConsignmentTrackingSearchV1Result>
        <ResultState>Successful</ResultState>
         <ConsignmentResults>
       <ConsignmentSearchResult>
    <ConsignmentNumber>001161</ConsignmentNumber>
    <CustomerRef1/>
   <CustomerRef2/>
     <SubCustomerRef1/>
     <SubCustomerRef2/>
      <DeliveryType/>
      <ConsignmentStatus>Delivered</ConsignmentStatus>
      <DateTimeDelivered>2010-02-11T12:00:00+00:00</DateTimeDelivered>
      <ItemsDelivered>2</ItemsDelivered>
      <RecipientName>robin</RecipientName>
      <DeliveryComments/>
      <ExpectedDeliveryDate>2010-02-11T00:00:00</ExpectedDeliveryDate>
       <DeliveryService>Next Day</DeliveryService>
      <TotalItems>2</TotalItems>
      <Consignmentkey>22</Consignmentkey>
        </ConsignmentSearchResult>
         </ConsignmentResults>
        </ConsignmentTrackingSearchV1Result>
        </ConsignmentTrackingSearchV1Response>
        </soap:Body>
       </soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T15:46:34.440

# 介绍

显然，这里缺少文档。不幸的是，`$soapClient->__getTypes()`并没有说太多。它只显示 Web 服务支持的可用复杂类型，但没有显示它们之间的关系。即使您有所有可用操作的列表及其返回的输入和输出类型`$soapClient->__getFunctions()`，也不能保证您可以在不知道复杂类型的确切性质或没有任何类型的文档的情况下继续进行。但幸运的是，这是一个提供 WSDL 文档的基于 SOAP 的 Web 服务。WSDL 文档描述了所有支持的操作和复杂类型，以及它们之间的关系。因此，我们只需检查 WSDL 文档就可以了解如何使用该服务。

检查 WSDL 文档有两种方法：

1.  从 WSDL 文档生成工件（客户端类）并检查工件
2.  查看 WSDL 文档和 XML Schema 文档。

## 1\. 神器

工件可以由 Java 或 C# 等强类型语言提供的工具生成。[https://qa-api.ukmail.com/Services/UKMAuthenticationServices/](https://qa-api.ukmail.com/Services/UKMAuthenticationServices/)页面建议使用该工具`svcutil.exe`为 C# 编程语言生成工件，或者您也可以使用该`wsimport`工具为 Java 编程语言生成工件。我怀疑是否有任何好的工具可以为 PHP 编程语言生成工件。

## 2\. WSDL 文档和 XML Schemas

如果您不熟悉 C# 或 Java，您始终可以通过查看 WSDL 文档和 XML Schemas 来检查它。XML 模式可以包含在 WSDL 文档中或从外部文件导入。WSDL 文档描述了可以在 Web 服务上执行的操作，而 XML 模式描述了复杂的类型及其关系。

# 行动

我写了介绍部分，以便您知道如何自己做。下面我想展示一个例子。为了检查 WSDL 文档，我使用了两种方法。首先，我使用该`wsimport`工具生成了工件，然后我阅读了很多 XML。

`import`此服务的 WSDL 文档使用语句分为几个文件。因此，为了找到所有操作和复杂类型，您必须遵循这些`import`语句。

## 验证

如果我们查看 Authentication Service 的 WSDL 文档（[location](https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl)），我们可以看到它导入了另一个 WSDL 文档：

```
<wsdl:import namespace="http://tempuri.org/" location="https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl=wsdl1"/> 
```

后者（[location](https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl=wsdl1)）又导入另一个：

```
<wsdl:import namespace="http://www.UKMail.com/Services/Contracts/ServiceContracts" location="https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl=wsdl0"/> 
```

最后一个（[location](https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl=wsdl0)），导入所有相关的 XML Schema：

```
<wsdl:types>
  <xsd:schema targetNamespace="http://www.UKMail.com/Services/Contracts/ServiceContracts/Imports">
    <xsd:import schemaLocation="https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?xsd=xsd0" namespace="http://www.UKMail.com/Services/Contracts/ServiceContracts"/>
    <xsd:import schemaLocation="https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
    <xsd:import schemaLocation="https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?xsd=xsd2" namespace="http://www.UKMail.com/Services/Contracts/DataContracts"/>
    <xsd:import schemaLocation="https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?xsd=xsd3" namespace="http://schemas.datacontract.org/2004/07/UKMWebAPICommon.WebResponses"/>
  </xsd:schema>
</wsdl:types> 
```

它还描述了也可以通过调用查看的操作`$soapClient->__getFunctions()`：

```
Array
(
    [0] => LoginResponse Login(Login $parameters)
    [1] => LogoutResponse Logout(Logout $parameters)
) 
```

在这里，我们看到该`Login()`操作接受`$parameters`type`Login`作为其参数并返回 type 的响应`LoginResponse`。这是它在 WSDL 文档中的外观：

```
<wsdl:operation name="Login">
  <wsdl:input wsaw:Action="http://www.UKMail.com/Services/IUKMAuthenticationService/Login" message="tns:IUKMAuthenticationService_Login_InputMessage"/>
  <wsdl:output wsaw:Action="http://www.UKMail.com/Services/Contracts/ServiceContracts/IUKMAuthenticationService/LoginResponse" message="tns:IUKMAuthenticationService_Login_OutputMessage"/>
</wsdl:operation> 
```

`Login`是一个复杂类型，这可以在一个导入的 XML Schema 文档（[s​​chemaLocation](https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?xsd=xsd0)）中看到：

```
<xs:element name="Login">
  <xs:complexType>
    <xs:sequence>
      <xs:element xmlns:q1="http://www.UKMail.com/Services/Contracts/DataContracts" minOccurs="0" name="loginWebRequest" nillable="true" type="q1:LoginWebRequest"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

它有一个名为的元素`loginWebRequest`，它也是一个复杂的类型`LoginWebRequest`，在另一个导入的 XML Schema 中进行了描述：

```
<xs:complexType name="LoginWebRequest">
  <xs:sequence>
    <xs:element name="Password" nillable="true" type="xs:string"/>
    <xs:element name="Username" nillable="true" type="xs:string"/>
  </xs:sequence>
</xs:complexType> 
```

`LoginWebRequest`更简单。它有两种*简单*的类型`Username`和`Password`类型`String`。

在 PHP 中，复杂类型由`stdClass`. 因此，为了调用`Login()`操作，我们必须创建两个对象`Login`和`LoginWebRequest`：

```
$LoginWebRequest = new stdClass();
$LoginWebRequest->Username = 'Username';
$LoginWebRequest->Password = 'p@$$w0rd';

$Login = new stdClass();
$Login->loginWebRequest = $LoginWebRequest;

$soapClient = new SoapClient('https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl');
$LoginResponse = $soapClient->Login($Login); 
```

这给了我们一个类型的结果`LoginResponse`：

```
<xs:element name="LoginResponse">
  <xs:complexType>
    <xs:sequence>
      <xs:element xmlns:q2="http://www.UKMail.com/Services/Contracts/DataContracts" minOccurs="0" name="LoginResult" nillable="true" type="q2:UKMLoginResponse"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

，其中包含一个名为的元素`LoginResult`，其类型为`UKMLoginResponse`：

```
<xs:complexType name="UKMLoginResponse">
  <xs:complexContent mixed="false">
    <xs:extension base="tns:UKMWebResponse">
      <xs:sequence>
        <xs:element minOccurs="0" name="Accounts" nillable="true" type="tns:ArrayOfAccountWebModel"/>
        <xs:element name="AuthenticationToken" nillable="true" type="xs:string"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

`UKMLoginResponse`有两个自己`Accounts`的 type`ArrayOfAccountWebModel`和`AuthenticationToken`of type`String`元素，以及另外三个继承自type 、of type和of type`UKMWebResponse`的元素（注意`extension`语句）：`Errors``ArrayOfUKMWebError``Warnings``ArrayOfUKMWebWarning``Result``UKMResultState`

```
<xs:complexType name="UKMWebResponse">
  <xs:sequence>
    <xs:element minOccurs="0" name="Errors" nillable="true" type="tns:ArrayOfUKMWebError"/>
    <xs:element xmlns:q1="http://schemas.datacontract.org/2004/07/UKMWebAPICommon.WebResponses" name="Result" type="q1:UKMResultState"/>
    <xs:element minOccurs="0" name="Warnings" nillable="true" type="tns:ArrayOfUKMWebWarning"/>
  </xs:sequence>
</xs:complexType> 
```

在该工具生成的工件中，`wsimport`它看起来像这样：

```
public class UKMLoginResponse extends UKMWebResponse { ... } 
```

因此，为了从 中获取身份验证令牌`LoginResponse`，我们执行以下操作：

```
$LoginResponse = $soapClient->Login($Login);
$AuthenticationToken = $LoginResponse->LoginResult->AuthenticationToken; 
```

## 调用方法

我不会在这里很具体，因为它与我们上面所做的非常相似。

例如，让我们调用一个`AddDomesticConsignment()`方法。根据寄售服务的 WSDL 文档，`$soapClient->__getFunctions()`该`AddDomesticConsignment()`方法返回的结果采用一个`$parameters`type 的参数，`AddDomesticConsignment`并返回一个 type 的结果`AddDomesticConsignmentResponse`。通过分析`AddDomesticConsignment`复杂类型，我们看到它有一个名为`request`类型的元素`AddDomesticConsignmentWebRequest`extends`AddConsignmentWebRequest`本身 extends `WebRequest`。以下是该`AddDomesticConsignmentWebRequest`类型的所有元素的列表：

```
// AddDomesticConsignmentWebRequest's own elements
boolean BookIn
decimal CODAmount
string ConfirmationEmail
string ConfirmationTelephone
boolean ExchangeOnDelivery
int ExtendedCover
boolean LongLength
PreDeliveryNotificationType PreDeliveryNotification
string SecureLocation1
string SecureLocation2
boolean SignatureOptional

// elements inhereted from AddConsignmentWebRequest
string AccountNumber
AddressWebModel Address
string AlternativeRef
string BusinessName
string CollectionJobNumber
boolean ConfirmationOfDelivery
string ContactName
string CustomersRef
string Email
int Items
int ServiceKey
string SpecialInstructions1
string SpecialInstructions2
string Telephone
decimal Weight

// elements inhereted from WebRequest
string Username
string AuthenticationToken 
```

**请注意，并非所有元素都是必需的**。那些可选的`minOccurs`属性`0`在 XML Schema 中设置为。

```
<xs:element minOccurs="0" name="PreDeliveryNotification" type="tns:PreDeliveryNotificationType"/> 
```

所以，最终这就是我们调用该方法的方式：

```
$AddDomesticConsignmentWebRequest = new stdClass();
$AddDomesticConsignmentWebRequest->Username = 'Username';
// setting the Authentication Token from the previous step
$AddDomesticConsignmentWebRequest->AuthenticationToken = $AuthenticationToken;
// other properties are set here...

$AddDomesticConsignment = new stdClass();
$AddDomesticConsignment->request = $AddDomesticConsignmentWebRequest;

$soapClient = new SoapClient('https://qa-api.ukmail.com/Services/UKMConsignmentServices/UKMConsignmentService.svc?wsdl');
$AddDomesticConsignmentResponse = $soapClient->AddDomesticConsignment($AddDomesticConsignment); 
```

`AddDomesticConsignmentResponse`解析为我们根据`LoginResponse`XML Schema 文档中的定义解析 。

好吧，我想这就是全部。我自己没有尝试过，但理论上它应该可以工作。希望这可以帮助。

# 更新

根据跟踪货物的文件，应该像执行以下操作一样简单：

```
// create the SOAP client
$soapClient = new SoapClient('http://web-service/?wsdl');
// call the `ConsignmentTrackingSearchV1` method and pass the search parameters
$ConsignmentTrackingSearchV1Response = $soapClient->ConsignmentTrackingSearchV1(
    'mail.com', // Username
    '123',      // Password
    '',         // Token
    '01161',    // ConsignmentNumber
    'false',    // IsPartialConsignmentNumber
    '',         // CustomerReference
    'false'     // IsPartialCustomerReference
    '',         // DeliveryPostCode
    '',         // MailingID
    100         // MaxResults
);
// parse the response
$ConsignmentTrackingSearchV1Result = $ConsignmentTrackingSearchV1Response->ConsignmentTrackingSearchV1Result;
$ResultState = $ConsignmentTrackingSearchV1Result->ResultState; // Successful
$ConsignmentResults = $ConsignmentTrackingSearchV1Result->ConsignmentResults;
// loop through the `ConsignmentResults`
foreach ($ConsignmentResults as $ConsignmentSearchResult) {
    $ConsignmentNumber = $ConsignmentSearchResult->ConsignmentNumber;
    $ConsignmentStatus = $ConsignmentSearchResult->ConsignmentStatus;
    // other properties
} 
```

就是这样！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:28:44.233

好吧，zafarkhaja 先生帮了我很多，但对于像我这样的其他人，我想解释一下什么对我有用，这样将来也可能对其他人有帮助..

**用于处理复杂类型** **例如就像在我的 Uk Mail Api For login 我这样做了**

```
$LoginWebRequest = new stdClass();
$LoginWebRequest->Username = 'username';
$LoginWebRequest->Password = 'password';

$Login = new stdClass();
$Login->loginWebRequest = $LoginWebRequest;

$soapClient = new SoapClient('somewsdl?wsdl', array('cache_wsdl' => WSDL_CACHE_NONE) );

$LoginResponse = $soapClient->Login($Login); 
```

万岁，我可以登录了。它给了我一个我需要检索的回应

```
 $AuthenticationToken = $LoginResponse->LoginResult->AuthenticationToken; 
```

我得到了身份验证令牌，确定您可以根据您的网络服务更改参数

**当您不处理复杂类型时，使用肥皂客户端很好**

```
 $soapClient = new SoapClient('http://somewsdl?wsdl');

    //create an array whose valuse will be passed has parameters
          $input_array = array (   
               UserName => 'username',
               Password => 'password'

     ) ;

    // passes our array
    $ConsignmentResponse = $soapClient1->TrackingSearch($input_array);

  //retrieve the response like this 

    $ResultState =  $ConsignmentResponse->ResultState; // Successful 
```

好吧，我到处搜索，但没有人发布任何有效的示例，所有代码在 php soap 1.1 中都适用于我，无论是复杂类型还是没有。

# php - SSL 子域重定向到主域

> ID：10511481
> 
> 赞同：2
> 
> 时间：2012-05-09T07:19:12.143
> 
> 标签：php, magento, ssl, cpanel

我有一个子域 static.example.com 为我的网站提供媒体内容。问题是当我转到[https://static.example.com](https://static.example.com)时，浏览器会重定向到[https://example.com](https://example.com)。此外，通过 SSL 传递的子域上的任何文件都会返回文件未找到错误。但是，当我在没有 SSL 的情况下查看它们时，一切正常。

我通过 cPanel 安装了通配符 ssl 证书。

我在网站上运行 Magento 1.5.1，奇怪的是我将 Magento 的媒体文件夹设置为[https://static.example.com/media](https://static.example.com/media)并且该文件夹一切正常。但是任何托管在媒体文件夹之外并通过 https 或 SSL 查看的文件都会被重定向到主域。

我尝试添加其他子域，但同样的问题不断出现。这可能是 .htaccess 问题吗？Magento 问题？SSL证书问题？服务器配置问题？

我的 .htaccess mod_rewrite 代码发布在下面以供参考。

```
<IfModule mod_rewrite.c>

Options +FollowSymLinks
RewriteEngine on

RewriteBase /

RewriteRule ^(index.php/)?minify/([^/]+)(/.*.(js|css))$ lib/minify/m.php?f=$3&d=$2

RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L]

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

RewriteCond %{REQUEST_URI} !^/(media|skin|js|css|fonts|images|cdn)/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule .* index.php [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:05:22.013

在同一个 IP 地址和端口上托管多个 SSL 虚拟主机是不可能的。我有同样的问题，所以我只是创建了另一个 IP 并将其分配给子域（使用新证书）

# java - 如何将阿拉伯语单词保存到oracle数据库中？

> ID：10511491
> 
> 赞同：1
> 
> 时间：2012-05-09T07:20:01.930
> 
> 标签：java, encoding, character, arabic

我想将阿拉伯语单词保存到 oracle 数据库中。用户从客户端键入一个阿拉伯语单词并提交该单词。在客户端，我使用警报打印了该单词，它显示为阿拉伯语文本。但是在服务器端显示的单词，java 控制台（通过使用 Sytem.out.println）作为 `Ø´Ø§Ø­ÙØ©`. 所以它在 db 中显示为`????`. 我看到了相关的帖子，在一篇讨论在 Eclipse 中将“文本文件编码”更改为 UTF-8 的帖子中，我将“文本文件编码”更改为 UTF-8。但没有效果，它显示以前的字符，如`Ø´Ø§Ø­ÙØ©`. 然后我将应用程序的“文本文件编码”更改为 UTF-8 ，然后得到相同的输出。我认为像这样发送到 db 这个词就是为什么 db 显示为`????`. 有什么解决办法吗？

我的代码是 Java

```
vehicleServiceModel.setVehicleType(request.getParameter("vehicleType"));

    System.out.println("vehicle Type :  "+vehicleServiceModel.getVehicleType()); 
```

客户端

```
jQuery.ajax({
        type: "GET",
        cache : false,
        url: "addvehicle.htm",
        data:{vehName:VehicleName,make:Make,model:Model,color:Color,plateNumber:PlateNumber,driverName:DriverName,vehicleType:VehicleType,vehTimeZone:vehTimeZone},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: Success,
        error: Error
    });

    function Success(data, status) {
     //some code
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:48:19.027

我自己回答这个问题。希望这对其他人有所帮助。

我的问题通过以下方式解决：

我变了

在java中：

```
vehicleServiceModel.setVehicleType(request.getParameter("vehicleType"));
String str = vehicleServiceModel.getVehicleType();
    str = new String(str.getBytes("8859_1"), "UTF-8");
    System.out.println("vehicle Type :  "+str);
    vehicleServiceModel.setVehicleType(str); 
```

现在已解决并将阿拉伯语单词保存到数据库中。

有关更多详细信息，请查看 [此](http://ahmadhashem.wordpress.com/2011/05/08/handle-arabic-encoding-common-issues-in-java-web-development/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:48:02.693

在命令行中，您需要将代码页设置为[1256](http://msdn.microsoft.com/en-us/library/cc195058.aspx)（阿拉伯语）。但是在数据库中存储阿拉伯语文本，需要将列数据设置为 UTF-8。此外，请确保您的字符集设置为 UTF-8（如果您正在创建网页）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-04T17:27:19.250

我建议您一直使用 UTF-8，即在网页中、在 Eclipse 和您的源代码中以及在数据库中（NLS_CHARACTERSET 或将列定义为 NVARCHAR2）。这样你就不需要转换了。

# .net - 此块只能与创建它的源一起使用

> ID：10511496
> 
> 赞同：0
> 
> 时间：2012-05-09T07:20:25.200
> 
> 标签：.net, task-parallel-library, tpl-dataflow

我在这个初始网络中使用了 TPL 数据流：

```
(a)CustomSource => (b)TransformBlock 
```

当消息到达 b 时，b 会创建一个带有过滤器的新转换块并​​将其附加到自身（它不会对每条消息都这样做）。

网络变成这样：

```
(a)CustomSource => (b)TransformBlock => (c with linkto filter)TransformBlock 
```

运行几次后，网络变成这样：

```
(a)CustomSource => (b)TransformBlock 
    => (c with linkto filter)TransformBlock
    => (c with another linkto filter)TransformBlock
    => (c with another linkto filter)TransformBlock 
```

这很好用，并且是我发现的唯一解决方案，可以获得“开关”块的默认操作。

但是当通过调用 customSource.Complete() 完成源时，它会抛出异常：

> ArgumentException：此块只能用于`1.System.Threading.Tasks.Dataflow.ITargetBlock<T>.OfferMessage(DataflowMessageHeader messageHeader, T messageValue, ISourceBlock`在 System.Threading.Tasks.Dataflow.Internal.SourceCore 1 目标的 System.Threading.Tasks.Dataflow.DataflowBlock.FilteredLinkPropagator 1 源（布尔型 consumeToAccept）中创建它的源，`1.OfferMessageToTarget(DataflowMessageHeader header, TOutput message, ITargetBlock`布尔型& messageWasAccepted) 在 System.Threading.Tasks.Dataflow.Internal.SourceCore `1.OfferToTargets(ITargetBlock`1 linkToTarget) 在 System.Threading.Tasks.Dataflow.Internal.SourceCore`1.OfferMessagesLoopCore()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:17:33.007

“c”TransformBlock 之一出现故障。当一个块出现故障时，它不会自动从网络断开链接。添加完成任务以取消链接块似乎可以解决此问题。

# grails - Grails 未正确编码 unicode 字符

> ID：10511497
> 
> 赞同：5
> 
> 时间：2012-05-09T07:20:34.957
> 
> 标签：grails, unicode

在我的 grails 应用程序中，未正确编码 unicode 字符。

我正在使用 grails 1.3.7 和 tomcat 7.0.22。以下是我在我的应用程序中为 unicode 支持配置的设置：

```
- Set grails.views.gsp.encoding and grails.converters.encoding="UTF-8" in Config.groovy
- Set encoding to UTF-8 in meta tag in the .gsp pages
- Specified 'useUnicode=true&characterEncoding=UTF-8' to the MySql connection URL (DB has characterset set to UTF-8)
- Set URIEncoding="UTF-8" useBodyEncodingForURI="true" to the server.xml file in tomcat
- Specified the attribute accept-charset="UTF-8" of the form tag. 
```

但是，当我提交一个 unicode 字符时，grails 不支持该字符并且正在保存乱码值。我已经四处搜索并阅读了 ppl 在同一问题上寻求帮助，但不幸的是，这些解决方案对我不利。虽然，我找到了解决这个问题的方法。下面的表达式

```
params.detail = params.detail ? new String(params.detail.getBytes("8859_1"), "UTF8") : null 
```

将正确编码 unicode 字符。

但是，使用这种方法很乏味，因为我必须对应用程序中的所有文本输入执行此操作。为什么 unicode 字符没有被 grails 和/或 tomcat 正确编码？我想我有正确的设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:15:04.903

如果您使用的不是 Mysql，而是默认提供的 HSqlDB，您将看不到编码问题。问题是由于 Mysql、InnoDB 和 UTF-8 引起的。

由于您使用的是 Mysql 连接并且已经设置 `useUnicode=true&characterEncoding=UTF-8`为 MySql 连接 URL

你仍然需要为 InnoDB 和 UTF-8 添加一个特殊的休眠方言：

`Datasource.groovy`应包含：

```
environments {
    development {
        dataSource {         
            ......
            driverClassName = "com.mysql.jdbc.Driver"
            dialect = "com.domain.mysql.dialect.MySQLUTF8InnoDBDialect"
            ..... 
```

在中创建一个新文件`src/java/com/domain/mysql/dialect/MySQLUTF8InnoDBDialect.java`

```
package com.domain.mysql.dialect;

import org.hibernate.dialect.MySQLInnoDBDialect;

/**
 * Sets the default charset to UTF-8.
 */
public class MySQLUTF8InnoDBDialect extends MySQLInnoDBDialect {

    @Override
    public String getTableTypeString() {
        return " ENGINE=InnoDB DEFAULT CHARSET=utf8";
    }
} 
```

确保您`Config.groovy`有：

```
grails.views.default.codec = "html"
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8" 
```

您的 views/layouts/main.gsp 以：

```
<%@ page contentType="text/html;charset=UTF-8" %> 
```

问候，

简

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T01:06:02.300

将方言设置为 UTF-8 是行不通的。您还必须修改表或表的列以支持 UTF-8。

这是更改表的命令

```
ALTER TABLE tbl_name CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

或者您可以尝试仅修改要存储 utf-8 的列

使用命令

```
ALTER TABLE t MODIFY col1 CHAR(50) CHARACTER SET utf8; 
```

# java - Maven POM 是否可以并且应该指定它是否需要 Maven 3 或更高版本？

> ID：10511501
> 
> 赞同：23
> 
> 时间：2012-05-09T07:20:58.040
> 
> 标签：java, maven, maven-3

我目前正在清理一些使用 Maven 的 Java 项目，并使用 NetBeans IDE 来“调试”POM 中的问题。我已经在IDE中设置了Maven 3.0.4作为Maven版本，但是其他开发者或者我们的Continuous Intgeration系统可能有不同的设置。

是否可以直接在 POM 中“强制”特定的 Maven 版本（例如通过使用 Maven 3 特定元素）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-09T07:27:47.537

是的，你可以而且你应该这样做。一些 Maven 插件需要 Maven 3 或更新版本。

通过将以下内容添加到您的 maven-enforcer-plugin 来使用`pom.xml`：

```
<build>
  <plugins>
    <plugin>
      <inherited>true</inherited>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-enforcer-plugin</artifactId>
      <version>1.3.1</version>
        <executions>
          <execution>
            <id>enforce-maven-3</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <configuration>
              <rules>
                <requireMavenVersion>
                  <version>3.0.5</version>
                </requireMavenVersion>                
              </rules>
              <fail>true</fail>
            </configuration>
          </execution>
       </executions>
     </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-04T17:25:36.233

另一种选择是使用 pom 中的先决条件元素，例如：

```
<project>
   ...
   <prerequisites>
       <maven>3.0.0</maven>
   </prerequisites>
   ...
</project> 
```

正如[Michal Kalinowski 的回答](https://stackoverflow.com/a/10511594/1033422)所指出的那样——这种简单的方法对于儿童项目来说效果不佳。

有关哪种方法最适合您的摘要，请参见此处：[enforcing maven 3 - when to use maven enforcer plugin? 何时使用 pom 先决条件元素？](https://stackoverflow.com/questions/18055009/enforcing-maven-3-when-to-use-maven-enforcer-plugin-when-to-use-pom-prerequis)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-09T07:28:15.233

您可以做的最好的事情是使用 Enforcer 插件。这是一个例子：
[http ://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html](http://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html)

Maven 本身没有开箱即用的方法来执行此操作。实际上有`prerequisites`标签但它不能很好地工作，因为孩子不会继承它。

# windows - 旧的 16 位应用程序在 WIN87EM.DLL 中导致 GPF，间歇性地

> ID：10511506
> 
> 赞同：2
> 
> 时间：2012-05-09T07:21:21.763
> 
> 标签：windows, virtualbox, 16-bit

我有一个旧的 16 位应用程序，它是为 Windows 3.1 开发的。它执行一些计算，并且是更复杂系统的一部分。系统为程序设置输入，并收集输出结果。

不幸的是，16 位程序在此期间仍然存在，因此我们必须解决它在现代操作系统上造成的挫败感。

该系统在 Windows XP 上运行，并且在物理 Windows XP 机器上运行良好。我遇到问题的机器是在 Debian 盒子上的 VirtualBox（版本 4.1.12）上运行的 Windows XP 实例。物理计算机是 HP Proliant 服务器，采用 Quad Core Xeon 3.4 Ghz。我正在使用远程桌面从我的 Windows 7 机器访问计算机。

我得到的错误是，“程序在地址：0001:02C9 的 WIN87EM.DLL 中导致了一般保护错误”。烦人的事情是，有时它有效，有时则无效，这使得故障排除变得更加令人沮丧。

通过搜索互联网，我遇到了一些提到同样问题的网站。他们似乎都没有提供真正的解决方案，只是说 WIN87EM.DLL 提供浮点例程，并且某些打印机存在一些问题。

我已经卸载了虚拟机上的所有打印机，我还尝试安装 PDF 编写器并将其设置为默认打印机 - 以便机器上有一台打印机。我已禁用与远程桌面连接的资源共享。我已经更新了机器上的虚拟机来宾驱动程序。我还尝试在可执行文件的属性中设置与 Windows 95 的兼容性。

解决此问题的任何指示，或我可以尝试使其正常工作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-21T14:57:44.823

这个问题很老，但我有这个确切的 win87em.dll 崩溃，一些 16 位工厂自动化软件在 Windows 7 上**本地**运行。通过遵循 HIDE87.com 的方法并编辑 autoexec.nt 我能够使软件停止崩溃所以我可以进行编辑。

这台机器运行的是 Intel 8 系列/C220 系列芯片。我将此配置归因于崩溃，因为多年来我已经在大量其他 Windows 7 机器上使用了相同的 16 位软件。

编辑：这是我用来解决问题的步骤

1.  [从http://www.conradshome.com/win31/archive/](http://www.conradshome.com/win31/archive/)下载 winfloat.exe
2.  使用 7zip 打开 winfloat.exe。找到 HIDE87.com 并将其解压到桌面。
3.  将 HIDE87.com 复制到 C:\Windows\System32\
4.  用记事本打开 c:\windows\system32\autoexec.nt
5.  在文件顶部，在第一组评论之后添加以下内容

> lh %SystemRoot%\system32\HIDE87.com

6.  在最后一行上方添加评论

> REM 修复了 win87em.dll 中的 Gen. Protection Fault

7.  保存对 autoexec.nt 的更改并重新启动电脑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T17:15:27.520

VirtualBox 4.3.16 也应该有一个修复。请参阅[https://www.virtualbox.org/ticket/12646](https://www.virtualbox.org/ticket/12646) 如果您想立即修复，则必须从 OSE 源构建 VirtualBox。

更新：包含此修复程序的 VirtualBox 4.3.16 现已正式发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T20:48:45.403

视频驱动程序 win87em.dll

这是我们遇到的“win87em.dll”问题的逐步解决方案。

1.  左键单击屏幕左下角的开始按钮。
2.  右键单击我的电脑，然后左键单击属性。
3.  左键单击顶部显示硬件的选项卡
4.  左键单击显示设备管理器的按钮。
5.  左键单击列表顶部附近显示适配器旁边的 + 号。
6.  右键单击显示适配器下展开列表中显示的项目，然后左键单击禁用。
7.  左键单击“是”按钮，当 Windows 询问您是否确定要禁用它时显示。
8.  当 Windows 询问您是否要重新启动时，左键单击“否”按钮。
9.  对显示适配器下列出的每个项目重复禁用过程（通常只有一个或两个）
10.  重新启动 PC，win87em.dll 一般保护故障错误应该会消失。

这仅适用于 Windows XP 用户。列出的显示适配器很可能显示为 Intel G41 内部显示适配器，但它可能是另一个 Intel 设备。如果这不能解决问题，则可能是打印机驱动程序损坏导致问题。

禁用视频适配器不会损害 Windows。这将使他们的计算机无法观看视频或玩 3D 游戏，但 Windows 仍然可以运行并且看起来不错。（他们可能需要在重新启动后更改屏幕分辨率。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T19:23:32.947

这与我在 Microsoft XP Mode 中遇到的错误相同。显然 WIN87EM.DLL 有虚拟化处理器的问题。我的解决方案：我在注册表中“卸载”了 WIN87EM.DLL 的 XP 版本（搜索并删除具有此名称的每个项目），并将一个更旧的版本复制到应用程序文件夹中。旧版本可以找到她： http: [//support.microsoft.com/kb/86869/de](http://support.microsoft.com/kb/86869/de) 祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T12:15:03.057

我知道这是一个旧线程，但我在搜索时遇到了它，因为我在运行 VirtualBox 的 Windows XP 下遇到了同样的问题。最终我发现了以下内容：

[https://communities.vmware.com/people/jmattson/blog/2012/03](https://communities.vmware.com/people/jmattson/blog/2012/03)

这是针对 VMWare 的，似乎已经解决了这个问题，找不到任何与 VirtualBox 类似的东西，但由于 VMWare Player 是免费的，所以对于遇到此问题的任何人来说，它都是一个很好的解决方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-08T09:35:14.793

对于虚拟机 - VM ware 的 vxBOX（已测试）（可能），您只需关闭 VX BOX 选项的处理器部分中的所有准虚拟化选项。像魔术一样工作！

# ios - 在 iOS 5.0/5.0.1 上使用 SSL 的 ASIHTTPRequest 失败

> ID：10511514
> 
> 赞同：4
> 
> 时间：2012-05-09T07:21:43.730
> 
> 标签：ios, ssl, https, asihttprequest

我正在使用 ASIHTTPRequest v1.8.1 发出 HTTPS 请求。问题是它在 iOS 5.0 和 5.0.1 上不起作用，而在 5.1 和 5.1.1 上却可以正常工作。代码很简单：

```
__block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:RemoteNotiURL]];
[request setPostValue:@"i" forKey:@"plat"];
[request setPostValue:token forKey:@"token"];
[request setValidatesSecureCertificate:NO];

[request setCompletionBlock:^{
    NSLog(@"done");
}];

[request setFailedBlock:^{
    NSLog(@"error = %@", [request error]);

}];

[request startAsynchronous]; 
```

`RemoteNotiURL`是一个类似[https://xxx.example.com的 URL](https://xxx.example.com)

错误是：

```
error = Error Domain=ASIHTTPRequestErrorDomain Code=1 "A connection failure occurred: SSL problem (Possible causes may include a bad/expired/self-signed certificate, clock set to wrong date)" UserInfo=0x18460b0 {NSUnderlyingError=0x1853ab0 "The operation couldn’t be completed. (OSStatus error -9800.)", NSLocalizedDescription=A connection failure occurred: SSL problem (Possible causes may include a bad/expired/self-signed certificate, clock set to wrong date)} 
```

我能做些什么呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T06:37:10.930

正如@JosephH 所说，解决方案涉及修改 ASIHTTPRequest.m 以更改 sslProperties 字典的 kCFStreamSSLLevel 属性。在这个文件中寻找评论`// Tell CFNetwork not to validate SSL certificates`

在此评论下有一个 if 子句

```
if (![self validatesSecureCertificate]) {
        // see: http://iphonedevelopment.blogspot.com/2010/05/nsstream-tcp-and-ssl.html

        NSDictionary *sslProperties = [[NSDictionary alloc] initWithObjectsAndKeys:
                                       [NSNumber numberWithBool:YES], kCFStreamSSLAllowsExpiredCertificates,
                                       [NSNumber numberWithBool:YES], kCFStreamSSLAllowsAnyRoot,
                                       [NSNumber numberWithBool:NO],  kCFStreamSSLValidatesCertificateChain,
                                       kCFNull,kCFStreamSSLPeerName,
                                       nil];

        CFReadStreamSetProperty((CFReadStreamRef)[self readStream], 
                                kCFStreamPropertySSLSettings, 
                                (CFTypeRef)sslProperties);
        [sslProperties release];
    } 
```

像这样修改 if 子句

```
if (![self validatesSecureCertificate]) {
        // see: http://iphonedevelopment.blogspot.com/2010/05/nsstream-tcp-and-ssl.html

        NSDictionary *sslProperties = [[NSDictionary alloc] initWithObjectsAndKeys:
                                       [NSNumber numberWithBool:YES], kCFStreamSSLAllowsExpiredCertificates,
                                       [NSNumber numberWithBool:YES], kCFStreamSSLAllowsAnyRoot,
                                       [NSNumber numberWithBool:NO],  kCFStreamSSLValidatesCertificateChain,
                                       kCFNull,kCFStreamSSLPeerName,
                                       @"kCFStreamSocketSecurityLevelTLSv1_0SSLv3", kCFStreamSSLLevel,
                                       nil];

        CFReadStreamSetProperty((CFReadStreamRef)[self readStream], 
                                kCFStreamPropertySSLSettings, 
                                (CFTypeRef)sslProperties);
        [sslProperties release];
    }else {
        NSDictionary *sslProperties = [[NSDictionary alloc] initWithObjectsAndKeys:
                                       [NSNumber numberWithBool:NO], kCFStreamSSLAllowsExpiredCertificates,
                                       [NSNumber numberWithBool:NO], kCFStreamSSLAllowsAnyRoot,
                                       [NSNumber numberWithBool:YES],  kCFStreamSSLValidatesCertificateChain,
                                       @"kCFStreamSocketSecurityLevelTLSv1_0SSLv3", kCFStreamSSLLevel,
                                       nil];

        CFReadStreamSetProperty((CFReadStreamRef)[self readStream], 
                                kCFStreamPropertySSLSettings, 
                                (CFTypeRef)sslProperties);
        [sslProperties release];
    } 
```

这应该使请求再次起作用。验证 SSL 证书的请求和不验证它们的请求。

在 IOS 5.0.1 和 5.1.1 上测试。

希望这可以帮助。

# mysql - 如何在 1 个表中搜索相同的字段

> ID：10511520
> 
> 赞同：0
> 
> 时间：2012-05-09T07:22:28.463
> 
> 标签：mysql, ruby-on-rails

如何在 1 个表中搜索相同的字段

SELECT `id`, `issues`, `status` FROM `docus` WHERE `status`LIKE '%Done%' AND `issue`LIKE '%Other%' AND `issue`LIKE '%Transfer%' ORDER BY id

我试过了，但结果为零

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:24:17.960

我想你的意思是

```
(issue like '%Other%' OR issue like '%transfer%') 
```

除非您想获取问题列中同时包含 Transfer 和 Other 的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:24:40.690

我想你想匹配以下任何一个。如果是这种情况，请使用`OR`而不是`AND`运算符：

```
SELECT id, issues, `status`
FROM docus 
WHERE `status` LIKE '%Done%' OR
      issues LIKE '%Other%' OR
      issues LIKE '%Transfer%' 
ORDER BY id 
```

或者

```
SELECT id, issues, `status`
FROM docus 
WHERE `status` LIKE '%Done%' AND
      (issues LIKE '%Other%' OR
      issues LIKE '%Transfer%' )
ORDER BY id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:25:26.283

这是您重新格式化的 SQL 查询，它应该可以为您提供所需的信息。

```
SELECT id, issues, status 
FROM docus 
WHERE status LIKE '%Done%' 
AND (issue LIKE '%Other%' OR issue LIKE '%Transfer%') 
ORDER BY id 
```

# codeigniter - 带有 jqGrid 的 Codeigniter：使用 csrf_token

> ID：10511521
> 
> 赞同：1
> 
> 时间：2012-05-09T07:22:35.007
> 
> 标签：codeigniter, jqgrid, csrf-protection

如果在配置文件中我设置`csrf_token`为`false`并且一切正常。但是什么时候`csrf_token`，`true`我的网格只能从数据库中获取数据，而不能更新或其他任何东西。

我正在浏览这个网站上关于 Сodeigniter+jqGrid 的帖子，但仍然不明白我该怎么做。

我可以获得的价值，`csrf_token`但它应该包含在哪里？

```
var lastsel;  
var addl_params =
{
    ci_csrf: $.cookie('ci_csrf_token')
};

$("#grid").jqGrid({
    url:'url to script',
    datatype: "json",
    mtype: 'GET',
    colNames:['id', 'Nickname', 'Breed'],
    colModel:[
        {name:'id',index:'id', width:55, sortable:false, editable:false, 
            editoptions:{readonly:true,size:10}}, 
        {name:'nickname',index:'nickname', width:100,editable:true, 
            edittype:"text"},
        {name:'breed',index:'breed', width:100,editable:true, edittype:"text"},
    ],
    jsonReader : {
        root:"rows",
        page: "page",
        total: "totalpages",
        records: "records"
    },
    rowNum:10,
    rowList:[10,20,30],
    pager: jQuery('#gridpager'),
    sortname: 'nickname',
    viewrecords: true,
    sortorder: "asc",
    caption:"Cats",

    onSelectRow: function(id){
        if(id && id!==lastsel){
            jQuery('#grid').jqGrid('restoreRow',lastsel);
            jQuery('#grid').jqGrid('editRow',id,true,null, null);
            lastsel=id;
        }
    },
    editurl:"edit-url"
}).navGrid('#gridpager'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:22:39.263

首先有必要了解 CSRF：

[http://www.beheist.com/index.php/en/blog/csrf-protection-in-codeigniter-2-0-a-closer-look](http://www.beheist.com/index.php/en/blog/csrf-protection-in-codeigniter-2-0-a-closer-look)

从那个帖子：

> “Security 类为每个 HTTP 请求生成一个唯一的 CSRF 令牌值。创建对象时，会设置令牌的名称和值。”

可能发生的事情（我不熟悉 jqGrid）每个人`form`都可能获得自己的 CSRF 令牌。或者，所有表单可能只有一个标记。无论哪种方式，CodeIgniter 都希望每个 HTTP 请求和响应都有一个令牌。基本上，您需要在创建页面的第一个请求和数据的 POST 时关闭循环。

因此，您可能需要深入研究 jqGrid 代码和 CI 视图，以确保您的输出根据需要生成 CSRF 令牌。

**更新**：上面博客上的评论之一有一个指向 Ajax CSRF 问题的链接：http: [//aymsystems.com/ajax-csrf-protection-codeigniter-20](http://aymsystems.com/ajax-csrf-protection-codeigniter-20)

# asp.net-mvc-3 - 在 ASP MVC3 中编辑由数据库优先模型生成的创建视图

> ID：10511522
> 
> 赞同：0
> 
> 时间：2012-05-09T07:22:38.287
> 
> 标签：asp.net-mvc-3, view, datepicker

我有这个创建视图，它生成了代码....

```
 <div class="editor-label">
            @Html.LabelFor(model => model.EmployeeId, "Employee")
        </div>
        <div class="editor-field">
            @Html.DropDownList("EmployeeId", String.Empty)
            @Html.ValidationMessageFor(model => model.EmployeeId)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Date,"Date")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Date)
            @Html.ValidationMessageFor(model => model.Date)
        </div> 
```

在运行它时，它会自动为输入创建文本框......我不能做的是强制日期文本框成为日期选择器......

我可以在简单的输入上做到这一点，

```
 <input class="datepicker"> 
```

我已经有一个日期选择器的脚本..我只需要将日期的输入类也设为日期选择器...（我在生成的代码中看不到输入，我可以在其中添加 class="datepicker"）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:24:12.433

您可以将`datepicker`类添加到包含 div：

```
<div class="editor-field datepicker">
    @Html.EditorFor(model => model.Date)
    @Html.ValidationMessageFor(model => model.Date)
</div> 
```

然后简单地调整您的 jQuery 选择器，使其将日期选择器应用于该类`datepicker`的输入元素或该类的某个元素中包含的输入元素：

```
$('.datepicker, .datepicker input[type="text"]').datepicker(); 
```

另一种可能性是使用[自定义元数据提供程序](http://aspadvice.com/blogs/kiran/archive/2009/11/29/Adding-html-attributes-support-for-Templates-_2D00_-ASP.Net-MVC-2.0-Beta_2D00_1.aspx)，它允许您将其他 HTML 属性（例如 css 类）应用于使用`EditorFor`帮助程序生成的输入字段。您所要做的就是使用自定义属性装饰您的视图模型属性。

# .net - 如何更改 DrawingVisual 填充和描边

> ID：10511523
> 
> 赞同：3
> 
> 时间：2012-05-09T07:22:48.273
> 
> 标签：.net, wpf, drawing, fill, stroke

我有一个[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)对象，我想更改它的填充和描边。

我试过这个填充：

```
DrawingVisual MyDrawing = new DrawingVisual();
SetFill(Brushes.Red, MyDrawing.Drawing); 
```

SetFill 在哪里：

```
private void SetFill(Brush fill, DrawingGroup group)
{
    foreach (Drawing drw in group.Children)
    {
        if (drw is DrawingGroup)
            SetFill(fill, drw as DrawingGroup);
        else if (drw is GeometryDrawing)
        {
            GeometryDrawing geo = drw as GeometryDrawing;
            geo.Brush = fill;

            using (DrawingContext context = MyDrawing.RenderOpen())
            {
                context.DrawDrawing(group);
            }
        }
    }
} 
```

但是以这种方式可能会发生我的 DrawingVisual 被绘制到不同的位置，好像没有更多地应用转换（到 MyDrawing）。

此外，如果我更改此指令：`context.DrawDrawing(group);` 与此其他：`context.DrawDrawing(MyDrawing.Drawing);` 我会得到一个奇怪的效果：如果我第一次更改填充没有任何反应，而第二次填充正确更改而不改变图形的位置。

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:06:32.340

解决您的问题（动态更改填充）的一种更简单的方法是对所有填充使用自己的[SolidColorBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush.aspx)并在需要时更改其[颜色。](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush.color.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T00:31:11.490

您确实不需要重新绘制视觉效果。这应该有效。

```
private void SetFill(Brush fill, DrawingGroup group)
{
    foreach (Drawing drw in group.Children)
    {
        if (drw is DrawingGroup)
            SetFill(fill, drw as DrawingGroup);
        else if (drw is GeometryDrawing)
        {
            GeometryDrawing geo = drw as GeometryDrawing;
            geo.Brush = fill; // For changing FILL

            // We have to set Pen properties individually.
            // It does not work if we assign the whole "Pen" instance.
            geo.Pen.Brush = fill; 
            geo.Pen.Thickness = 1.0;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T07:48:06.517

可能你已经解决了这个问题，但这里是我可能相同的解决方案。我有自己的 DrawingVisual。它是新鲜的，没有经过充分测试的代码，但现在它工作得很好：

```
public class MyDrawingVisual : DrawingVisual
{
    private bool myIsSelected = false;

    public VillageInfo VillageInfo { get; set; }

    public bool IsSelected 
    {
        get { return myIsSelected; }
        set
        {
            if (myIsSelected != value)
            {
                myIsSelected = value;

                // Retrieve the DrawingContext in order to create new drawing content.
                DrawingContext drawingContext = this.RenderOpen();

                // Create a rectangle and draw it in the DrawingContext.
                Rect rect = new Rect(new System.Windows.Point(VillageInfo.X + 0.1, VillageInfo.Y + 0.1), new System.Windows.Size(0.9, 0.9));
                drawingContext.DrawRectangle(new SolidColorBrush(myIsSelected ? Colors.White : VillageInfo.Color), (System.Windows.Media.Pen)null, rect);

                // Persist the drawing content.
                drawingContext.Close();
            }
        }
    }
} 
```

# iphone - UITableViewCell 选定的视图出现在单元格标签/图像下，不在顶部

> ID：10511525
> 
> 赞同：0
> 
> 时间：2012-05-09T07:23:02.703
> 
> 标签：iphone, ios, uiview, uitableview

我有一个从 .xib 文件加载的自定义 UITableViewCell。在 .xib 的 .m 中，我正在加载一些额外的 UI 元素（例如图像视图），我将这些元素添加到 contentView 中：

```
[self.contentView addSubview:myImageView]; 
```

但是，当我选择行时，.selectedBackgroundView 出现在 myImageView 下，而不是整个单元格的顶部。

我该怎么做才能让 selectedBackgroundView 重新回到顶部，或者确保我的 UI 元素的顺序正确完成？

以下是我在 init 中加载 .xib 的方式供参考：

```
cellLoader = [UINib nibWithNibName:@"MasterTableViewCell" bundle:[NSBundle mainBundle]]; 
```

在 cellForRowAtIndexPath 中：

```
MasterTableViewCell *cell = (MasterTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"MasterTableViewCell"];
if (cell == nil) {
    NSArray *topLevelItems = [cellLoader instantiateWithOwner:self options:nil];
    cell = [topLevelItems objectAtIndex:0];

    UIView *v = [[UIView alloc] init];
    v.backgroundColor = [UIColor blackColor];
    cell.selectedBackgroundView = v;
}
return cell; 
```

谢谢大家

# c# - 在 Dynamics CRM 4.0 中查询选项列表的描述值

> ID：10511528
> 
> 赞同：0
> 
> 时间：2012-05-09T07:23:16.027
> 
> 标签：c#, dynamics-crm, dynamics-crm-4

我想在动态 CRM 4.0 中的机会中查询不同选项列表中的值。我不想查询实际的机会，只查询 Picklist 中的值。因此，如果我有一个名为 Source 的 Picklist 并且它的值是 1、2、3、4、5。我想查询该选项列表并取回这些值。这可能吗？如果是这样，你到底是怎么做到的？

我使用 Java (JAX-WS)，但也欢迎使用 .NET 示例，因为使用了相同的基本实体。

我试过的。我设置了以下查询：

```
// Set up query ...
QueryExpression query = new QueryExpression();
query.setEntityName("picklistmapping");
// Set up columns to retrieve ...
// Add columns to retrieve to the query ...
query.setColumnSet(new AllColumns()); 
```

但是这个查询，返回一个空的结果！

作为记录，这是以下问题的副本：[Query the Description Value of a Picklist](https://stackoverflow.com/questions/7779984/query-the-description-value-of-a-picklist)。区别：那个问题是关于 Dynamics CRM 2011 的，我的是关于 Dynamics **crm 4.0**的！该问题的公认答案与“RetrieveAttributeRequest”类有关。除了我的 wsdl 没有生成那个类，所以我猜这是特定于动态 crm 2011 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:35:10.280

您应该为此目的使用[元数据服务。](http://msdn.microsoft.com/en-us/library/cc151046.aspx)这是类似的问题，您可以在其中找到代码示例[。](http://social.microsoft.com/Forums/en/crmdeployment/thread/978e3213-5631-484e-9008-2b06542bb04e)

```
RetrieveAttributeRequest attributeRequest = new RetrieveAttributeRequest();
attributeRequest.EntityLogicalName = <your entity name>;
attributeRequest.LogicalName = <your picklist attribute name>;
attributeRequest.RetrieveAsIfPublished = true;

RetrieveAttributeResponse response = (RetrieveAttributeResponse)metaService.Execute(attributeRequest);
PicklistAttributeMetadata picklist = (PicklistAttributeMetadata)response.AttributeMetadata;

foreach (Option o in picklist.Options)
{
    // do something e.g. take o.ValueValue
} 
```

# php - 比较查询结果

> ID：10511532
> 
> 赞同：0
> 
> 时间：2012-05-09T07:23:49.193
> 
> 标签：php, mysql

```
$query1= mysql_query("select r.nid from ....");     

$query2= mysql_query("select t.nid from...."); 
```

这两个查询都返回一个nid。如何比较两个返回的nid是否相等..我只是一个初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:28:09.630

```
$row1 = mysql_fetch_row($query1);
$row2 = mysql_fetch_row($query2);
if($row1[0] == $row2[0])
{
//something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:30:32.390

你可以用纯sql来做。像这样：

```
select 
    r.nid 
from 
    ....
WHERE EXISTS
(
    select 
        NULL 
    from
        ....
    WHERE
        t.nid = r.nid 
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:34:13.987

如果您确定查询确实返回一个 id，您可以通过以下方式加快检查速度：

```
$query1 = mysql_query("select r.nid from ...."); 
$query2 = mysql_query("select t.nid from ...."); 
if(mysql_fetch_field($query1, 0) === mysql_fetch_field($query2, 0))
{
    //do something
} 
```

# controller - 如何更改控制器中的 $model->attributes 值 - Yii

> ID：10511533
> 
> 赞同：4
> 
> 时间：2012-05-09T07:23:49.890
> 
> 标签：controller, yii, yii-components

用户主控制器代码：

```
public function actionUpdate($id){

    $model=$this->loadModel($id);

    if(isset($_POST['UserMaster'])){
        $model->attributes=$_POST['UserMaster'];
        $model->attributes['emailsent'] = 'N';

        if($model->save())
            $this->redirect(array('admin'));
    }

    $this->render('update',array(
        'model'=>$model,
    ));
} 
```

给我一个错误的行是：`$model->attributes['emailsent'] = 'N';`

> **错误**：重载属性的间接修改`UserMaster::$attributes`无效

如何更改属性值？我只想根据条件`'Y'`设置它`'N'`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T07:31:31.843

使用`$model->emailsent='N';`. 就这样

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T10:35:45.057

试试这个`$model->setAttribute($name,$value);`

# android - OutOfMemoryError: 加载 DICOM 图像时位图大小超出 VM 预算

> ID：10511539
> 
> 赞同：0
> 
> 时间：2012-05-09T07:24:24.060
> 
> 标签：android, out-of-memory, dicom

我有以下从另一个应用程序中获取的代码

```
 public static Bitmap createBitMap(DicomObject dcmObj) {
    short[] image = dcmObj.getShorts(Integer.parseInt("7FE00010", 16));
    float wc = dcmObj.getFloat(Integer.parseInt("00281050", 16));
    float ww = dcmObj.getFloat(Integer.parseInt("00281051", 16));

    Bitmap bitMap = Bitmap.createBitmap(dcmObj.getInt(Tag.Columns), dcmObj
            .getInt(Tag.Rows), Bitmap.Config.ARGB_8888);
            bitMap.copyPixelsFromBuffer(LocalImport.makeBuffer((localImport
            .applyWindowing(image, wc, ww)), dcmObj.getInt(Tag.Columns),
            dcmObj.getInt(Tag.Rows)));
    return bitMap;
} 
```

我想要做的是从 SD 卡加载几个 Dicom 图像，读取属性并将它们显示在网格中。上述功能适用于应用程序，但是当我将相同的代码集成到我的应用程序时，它会崩溃。我尝试调试，但变量的值是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:34:12.570

在对 Android 进行更改之前，分配大于 VM 限制的缓冲区的唯一方法是在本机代码中分配它们。在本机代码中，您可以为 Android 下的 linux 系统分配物理上可用的尽可能多的内存。我已经用我自己的应用程序对此进行了测试，并分配了大于 150MB 的位图。在本机代码中管理位图将需要编写代码，将位图的“视图”呈现为由 Java 管理的显示大小的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:26:01.647

崩溃是因为主用户界面中的动画占用了大量内存。我复制代码的示例应用程序有任何动画。

猜测增加模拟器中分配的内存大小可以解决问题（尝试一下）。

但至少我知道这不是因为我没有做过任何释放或逻辑错误..

谢谢大家的帮助:)

# jquery-mobile - JQM 最终版本 1.1.0 中的页脚中的浮动元素具有奇怪的行为

> ID：10511541
> 
> 赞同：0
> 
> 时间：2012-05-09T07:24:36.327
> 
> 标签：jquery-mobile

我正在尝试使用 2012 年 4 月 13 日宣布的最新稳定的 Jquery Mobile 版本 1.1.0。但我注意到一些奇怪的事情。

如果我尝试在页脚中浮动“p”标签，则背景变为白色。如果我使用 1.1.0-rc.1 版本，情况并非如此。我忽略了什么吗？因为现在我不能使用最新版本。

这是代码，您可以复制并粘贴它来查看它。

```
<!DOCTYPE html> 
<html>  
<head> 
<title>Test</title> 
<meta name="viewport" content="width=device-width, initial-scale=1" />   

<!-- New version 1.1.0 -->
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>  
<!-- New version 1.1.0 -->
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>    

<style type="text/css">
    p {
        float:right;
        }
</style>   
</head> 
<body> 
    <div data-role="page"> 
        <div data-role="header">
            <h1>Test</h1> 
        </div> 
        <div data-role="content">
        </div>
        <div data-role="footer">
            <p>test</p>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:56:56.860

这解决了问题：使用

```
文本对齐：右
```

代替

```
浮动：对
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:03:02.543

似乎在 jQuery Mobile 版本 1.1.0 中，页脚没有设置高度，因此背景不可见。您的解决方案适用于文本，但当您想让两个 div 彼此相邻浮动时则不行。

我通过应用这种风格解决了它：

```
#footer {
    clear: both;
    overflow: hidden;
} 
```

# android - 应用程序无法在 android 4.0 上运行

> ID：10511543
> 
> 赞同：0
> 
> 时间：2012-05-09T07:24:41.860
> 
> 标签：android

我的程序从 android 2.1 到 android 2.3 运行良好

但它不适用于更高版本的android

我在清单文件中使用过

```
<uses-sdk android:minSdkVersion="7"  
      android:targetSdkVersion="10" 
           android:maxSdkVersion="15"/> 
```

在 android 4.0.3 avd 上运行项目时出现 Logcat 输出错误导致

> 05-09 12:45:12.051: E/AndroidRuntime(530): 致命异常: main` 05-09 12:45:12.051: E/AndroidRuntime(530): java.lang.RuntimeException: 无法启动活动 ComponentInfo{giv .home/giv.home.Start}: android.os.NetworkOnMainThreadException 05-09 12:45:12.051: E/AndroidRuntime(530): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 05-09 12 :45:12.051: E/AndroidRuntime(530): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 android.app.ActivityThread。访问$600(ActivityThread.java:123) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 05-09 12:45:12.051 : E/AndroidRuntime(530): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 android.os.Looper.loop(Looper.java:137) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 android.app.ActivityThread.main(ActivityThread .java:4424) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-09 12:45:12.051: E/AndroidRuntime(530) : 在 java.lang.reflect.Method.invoke(Method.java:511) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:784) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 05-09 12:45:12.051: E /AndroidRuntime(530): at dalvik.system.NativeStart.main(Native Method) 05-09 12:45:12.051: E/AndroidRuntime(530): 引起：android.os.NetworkOnMainThreadException 05-09 12:45:12.051 ：E/AndroidRuntime(530): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 java.net.InetAddress.lookupHostByName(InetAddress .java:391) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:242) 05-09 12:45:12.051: E/AndroidRuntime(530 ): 在 java.net.InetAddress.getAllByName(InetAddress.java:220) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator. java:137) 05-09 12:45:12.051: E/AndroidRuntime(530): at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) 05-09 12:45:12.051: E/AndroidRuntime(530)：在 org.apache.http.impl.conn.AbstractPooledConnAdapter。打开（AbstractPooledConnAdapter.java:119）05-09 12:45:12.051：E/AndroidRuntime（530）：在 org.apache.http.impl.client.DefaultRequestDirector.execute（DefaultRequestDirector.java:360）05-09 12： 45:12.051: E/AndroidRuntime(530): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 org .apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 05-09 12:45:12.051: E/AndroidRuntime(530): at org.apache.http.impl.client.AbstractHttpClient.execute( AbstractHttpClient.java:465) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 giv.home.ConnectionClass.connectToServer(ConnectionClass.java:41) 05-09 12:45:12.051: E/AndroidRuntime( 530): 在 giv.home.Start.onCreate(Start.java:64) 05-09 12:45:12.051: E/AndroidRuntime(530):在 android.app.Activity.performCreate(Activity.java:4465) 05-09 12:45:12.051: E/AndroidRuntime(530): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 05-09 12 :45:12.051: E/AndroidRuntime(530): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 05-09 12:45:12.051: E/AndroidRuntime(530): ... 还有 11 个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:32:57.427

I think this is because you're trying to use HTTPConnect in the main thread... Android no longer supports using HTTP in the main thread and requires that you do it in a background thread. Just guessing, of course... but that's what I suspect is happening.

However, if your target SDK version is 10, then why not just skip setting the max? I mean... what is it about ICS that you feel will be the absolute highest level that your app can run on? the min and target are totally sufficient, I believe. The point of setting a Max is so that (for example) your app won't be installable on ICS now that ICS is available and you know there's something about it that your app doesn't support. So, in that case you'd set 13 and only Honeycomb users (and lower) would be able to use it. Since 15 is the highest version available, setting it is premature... 16 might be just as capable of handling your app as all the rest, for all you know! :)

[EDIT]

You don't even need an AsyncTask (though that would be the more Androidy way to do it). For now just use a regular Thread...

```
 Handler h = new Handler();
 private Runnable stuffToDoAfterPost = new Runnable(){
       public void run(){
            //whatever you wish to happen after you have done your server call
       }
 };

private class CallServer extends Thread{
   public void run(){
      //make your server call here...

      //then...
      h.post(stuffToDoAfterPost);
   }
}

new CallServer().start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T07:59:12.277

要解决 StrictMode 问题，您需要在活动中使用以下代码 -

```
static{
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();  
    StrictMode.setThreadPolicy(policy);  
    } 
```

# ios - iPhone 应用程序因 iPad 3 崩溃而被拒绝而没有日志

> ID：10511544
> 
> 赞同：0
> 
> 时间：2012-05-09T07:24:49.297
> 
> 标签：ios, appstore-approval, ipad-3

这就是 Apple 所说的 - 该应用程序在 iPad 3 上为他们崩溃了，**没有生成日志**：

> 该应用程序在运行 iOS 5.1 的第三代 iPad 上崩溃，没有生成崩溃日志。

我所做的是我重新签署了提交的.app，将它安装在我拥有的所有 iPod、iPhone 和 iPad 上（不幸的是不是 iPad 3——这个案例是针对模拟器测试的）。

info.plist 的图标属性看起来不错，所有资源都在包中。令人困惑的是，另一个具有相同代码但另一个配置的应用程序被批准了。让我强调一下 - 两种配置都使用提交的 .app 文件进行了测试。

任何线索，共享经验或解决方法？目前的计划是进行一些细微的更改并重新提交被拒绝的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:15:39.397

Apple 技术支持能够找到崩溃报告，无论他们是如何做到的，以及为什么他们说一开始就没有报告。

问题在于，打开可访问性后，在`+(void)initialize`应用程序启动时调用的 UINavigationBar 类。

# sencha-touch - 如何在sencha touch中对齐按钮中心的图标？

> ID：10511547
> 
> 赞同：2
> 
> 时间：2012-05-09T07:25:06.837
> 
> 标签：sencha-touch, sencha-touch-2

我是煎茶触摸的新手。我有一个带有撰写图标的按钮。根据给定的按钮大小，该图标出现在按钮的右下角。任何人都可以帮我调整它吗？iconAlign 属性对我不起作用。

```
 {
                            xtype: 'button',
                            ui: 'action',
                            iconMask: true,
                            iconCls: 'compose',
                            iconAlign:'center',
                            width:35,
                            height: 25,
                            action:'landedInfo'
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:09:55.117

您必须将 padding 属性设置为 0，因为您提供的宽度和高度太小，因此会与您为“iconAlign”提供的“中心”值混淆：

```
{
    xtype: 'button',
    ui: 'action',
    iconMask: true,
    iconCls: 'compose',
    iconAlign:'center',
    width:35,
    height: 25,
    padding:0,
    action:'landedInfo'
} 
```

查看它的一种方法是将宽度和高度增加到 100x50，然后您将获得一个居中的图标，而无需触摸 padding 属性...我承认一开始这可能很难发现。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T04:50:49.887

在 css 中设置边距帮助我将图标放在中心：

```
.x-tab .x-button-icon.compose,.x-button .x-button-icon.x-icon-mask.compose
{

margin-left:-5px;
margin-top:-5px;
margin-right:-7px;
margin-bottom:-5px;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T13:10:08.180

我尝试了这个并为我工作：

```
{
    xtype: 'button',
    ui: 'normal',
    text:'LOGOUT',
    iconMask: true,
    iconCls: 'user',
    iconAlign:'center',            
     padding:0,
    cls: 'x-iconalign-top',

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T17:09:25.800

如果你使用 icon-font，你可以用 css 来做。

```
.x-button-icon {
    /*Icon centering*/
    position:absolute;
    width:1em;//set width of icon relative(icon is font)
    top:50%;
    margin-top:-0.5em;//half of icon height shift back
    left:50%;
    margin-left:-0.5em;//half of icon width shift back
} 
```

[您还可以使用任何组件的顶部、右侧、底部和左侧配置在 Sencha Touch 中绝对定位组件。这类似于 position: absolute CSS 代码。](http://docs.sencha.com/touch/2.3.0/#!/guide/floating_components)

# c# - 十进制值的 Xslt 验证错误

> ID：10511549
> 
> 赞同：1
> 
> 时间：2012-05-09T07:25:18.273
> 
> 标签：c#, xml, xslt, schematron

我正在验证一个 XML 文档来验证这样的总和（对不起，标准示例）：

```
<book>
    <name>Book 1</name>
    <price>25.30</price>
</book>
<book>
    <name>Book 2</name>
    <price>20.77</price>
</book>
<sum>46.07</sum> 
```

我加载 xml 和验证模式，并生成一个 xml 作为输出。此输出包含有关发生哪些错误的信息：

```
var xml = new XmlDocument();
xml.Load(@"c:\test.xml")

var myXslTrans = new XslCompiledTransform();
myXslTrans.Load(@"c:\ValidationSchema.xml";);
var xmlDocOut = new XmlDocument();

    using (XmlWriter xmlWriter = xmlDocOut.CreateNavigator().AppendChild())
    {
        myXslTrans.Transform(xml, null, xmlWriter);
    } 
```

由于某种原因，当我有十进制值时，我的验证总是失败。

我已经尝试加载两个文档

```
CultureInfo.InvariantCulture 
```

我还改变了整个线程以适应这种文化。这与编码有什么关系吗？

* * *

编辑：

为了进一步澄清这一点：

如果我在代码的早期运行验证成功，但在完成一些大型服务器作业后，似乎某种全局设置会改变某种文化、编码或其他东西，但我无法找出问题出在哪里或原因。

我正在验证针对此架构的电子发票：http: [//vefa.difi.no/formatvalidering/resources/validation-xslt/NORWAY-UBL-T10.xsl](http://vefa.difi.no/formatvalidering/resources/validation-xslt/NORWAY-UBL-T10.xsl)

这是我的测试发票：

```
<?xml version="1.0" encoding="utf-8"?>
<Invoice xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2" xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 UBL-Invoice-2.0.xsd">
  <cbc:UBLVersionID>2.0</cbc:UBLVersionID>
  <cbc:CustomizationID>urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0</cbc:CustomizationID>
  <cbc:ProfileID>urn:www.cenbii.eu:profile:bii05:ver1.0</cbc:ProfileID>
  <cbc:ID>30300109</cbc:ID>
  <cbc:IssueDate>2012-05-09</cbc:IssueDate>
  <cbc:InvoiceTypeCode listID="UN/ECE 1001 Subset" listAgencyID="6">380</cbc:InvoiceTypeCode>
  <cbc:Note languageID="no">Invoice</cbc:Note>
  <cbc:DocumentCurrencyCode listID="ISO 4217" listAgencyID="5">NOK</cbc:DocumentCurrencyCode>
  <cbc:AccountingCost>
  </cbc:AccountingCost>
  <cac:OrderReference>
    <cbc:ID>1234</cbc:ID>
  </cac:OrderReference>
  <cac:ContractDocumentReference>
    <cbc:ID>
    </cbc:ID>
  </cac:ContractDocumentReference>
  <cac:AdditionalDocumentReference>
    <cbc:ID>1 - 30300109 Faktura</cbc:ID>
    <cbc:DocumentType>Commercial invoice</cbc:DocumentType>
    <cac:Attachment>
      <cbc:EmbeddedDocumentBinaryObject mimeCode="application/pdf">123123123123</cbc:EmbeddedDocumentBinaryObject>
    </cac:Attachment>
  </cac:AdditionalDocumentReference>
  <cac:AccountingSupplierParty>
    <cac:Party>
      <cac:PartyName>
        <cbc:Name>Demo</cbc:Name>
      </cac:PartyName>
      <cac:PostalAddress>
        <cbc:StreetName>Postbox 3</cbc:StreetName>
        <cbc:CityName>OSLO</cbc:CityName>
        <cbc:PostalZone>0631</cbc:PostalZone>
        <cac:Country>
          <cbc:IdentificationCode listID="ISO 3166" listAgencyID="5">NO</cbc:IdentificationCode>
        </cac:Country>
      </cac:PostalAddress>
      <cac:PartyTaxScheme>
        <cbc:CompanyID>NO910667831MVA</cbc:CompanyID>
        <cac:TaxScheme>
          <cbc:ID>VAT</cbc:ID>
        </cac:TaxScheme>
      </cac:PartyTaxScheme>
      <cac:PartyLegalEntity>
        <cbc:CompanyID schemeID="CVR" schemeAgencyID="ZZZ">910667831</cbc:CompanyID>
      </cac:PartyLegalEntity>
      <cac:Contact>
        <cbc:ID>Per</cbc:ID>
      </cac:Contact>
    </cac:Party>
  </cac:AccountingSupplierParty>
  <cac:AccountingCustomerParty>
    <cac:Party>
      <cac:PartyIdentification>
        <cbc:ID>2072</cbc:ID>
      </cac:PartyIdentification>
      <cac:PartyName>
        <cbc:Name>Wenzel</cbc:Name>
      </cac:PartyName>
      <cac:PostalAddress>
        <cbc:StreetName>Road 4</cbc:StreetName>
        <cbc:CityName>OSLO</cbc:CityName>
        <cbc:PostalZone>0404</cbc:PostalZone>
        <cac:Country>
          <cbc:IdentificationCode listID="ISO 3166" listAgencyID="5">NO</cbc:IdentificationCode>
        </cac:Country>
      </cac:PostalAddress>
      <cac:PartyLegalEntity>
        <cbc:CompanyID schemeAgencyID="ZZZ" schemeID="ZZZ">986532951</cbc:CompanyID>
      </cac:PartyLegalEntity>
      <cac:Contact>
        <cbc:ID>ww</cbc:ID>
      </cac:Contact>
    </cac:Party>
  </cac:AccountingCustomerParty>
  <cac:Delivery>
    <cbc:ActualDeliveryDate>2012-05-09</cbc:ActualDeliveryDate>
    <cac:DeliveryLocation>
      <cac:Address>
        <cbc:StreetName>Road 123</cbc:StreetName>
        <cbc:CityName>OSLO</cbc:CityName>
        <cbc:PostalZone>0404</cbc:PostalZone>
        <cac:Country>
          <cbc:IdentificationCode>NO</cbc:IdentificationCode>
        </cac:Country>
      </cac:Address>
    </cac:DeliveryLocation>
  </cac:Delivery>
  <cac:PaymentMeans>
    <cbc:PaymentMeansCode listID="UN/ECE 4461">31</cbc:PaymentMeansCode>
    <cbc:PaymentDueDate>2012-06-08</cbc:PaymentDueDate>
    <cbc:PaymentID>1020720303001099</cbc:PaymentID>
    <cac:PayeeFinancialAccount>
      <cbc:ID schemeID="BBAN">50841051308</cbc:ID>
    </cac:PayeeFinancialAccount>
  </cac:PaymentMeans>
  <cac:AllowanceCharge>
    <cbc:ChargeIndicator>false</cbc:ChargeIndicator>
    <cbc:AllowanceChargeReason>rebate</cbc:AllowanceChargeReason>
    <cbc:Amount currencyID="NOK">4664.21</cbc:Amount>
    <cac:TaxCategory>
      <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
      <cbc:Percent>25</cbc:Percent>
      <cac:TaxScheme>
        <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
      </cac:TaxScheme>
    </cac:TaxCategory>
  </cac:AllowanceCharge>
  <cac:AllowanceCharge>
    <cbc:ChargeIndicator>true</cbc:ChargeIndicator>
    <cbc:AllowanceChargeReason>delivery</cbc:AllowanceChargeReason>
    <cbc:Amount currencyID="NOK">2938.45</cbc:Amount>
    <cac:TaxCategory>
      <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
      <cbc:Percent>24.000</cbc:Percent>
      <cac:TaxScheme>
        <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
      </cac:TaxScheme>
    </cac:TaxCategory>
  </cac:AllowanceCharge>
  <cac:TaxTotal>
    <cbc:TaxAmount currencyID="NOK">11229.08</cbc:TaxAmount>
    <cac:TaxSubtotal>
      <cbc:TaxableAmount currencyID="NOK">44916.30</cbc:TaxableAmount>
      <cbc:TaxAmount currencyID="NOK">11229.08</cbc:TaxAmount>
      <cac:TaxCategory>
        <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
        <cbc:Percent>25</cbc:Percent>
        <cac:TaxScheme>
          <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
        </cac:TaxScheme>
      </cac:TaxCategory>
    </cac:TaxSubtotal>
  </cac:TaxTotal>
  <cac:LegalMonetaryTotal>
    <cbc:LineExtensionAmount currencyID="NOK">46642.06</cbc:LineExtensionAmount>
    <cbc:TaxExclusiveAmount currencyID="NOK">44916.30</cbc:TaxExclusiveAmount>
    <cbc:TaxInclusiveAmount currencyID="NOK">56145.38</cbc:TaxInclusiveAmount>
    <cbc:AllowanceTotalAmount currencyID="NOK">4664.21</cbc:AllowanceTotalAmount>
    <cbc:ChargeTotalAmount currencyID="NOK">2938.45</cbc:ChargeTotalAmount>
    <!--<cbc:PrepaidAmount currencyID=""></cbc:PrepaidAmount>
    <cbc:PayableRoundingAmount currencyID=""></cbc:PayableRoundingAmount>-->
    <cbc:PayableAmount currencyID="NOK">56145.38</cbc:PayableAmount>
  </cac:LegalMonetaryTotal>
  <cac:InvoiceLine>
    <cbc:ID>1</cbc:ID>
    <cbc:InvoicedQuantity unitCode="EA">1.00</cbc:InvoicedQuantity>
    <cbc:LineExtensionAmount currencyID="NOK">12000.00</cbc:LineExtensionAmount>
    <cac:OrderLineReference>
      <cbc:LineID>1</cbc:LineID>
    </cac:OrderLineReference>
    <cac:TaxTotal>
      <cbc:TaxAmount currencyID="NOK">2700.00</cbc:TaxAmount>
    </cac:TaxTotal>
    <cac:Item>
      <cbc:Name>Skrivebord</cbc:Name>
      <cac:SellersItemIdentification>
        <cbc:ID>13000</cbc:ID>
      </cac:SellersItemIdentification>
      <cac:ClassifiedTaxCategory>
        <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
        <cbc:Percent>25.00</cbc:Percent>
        <cac:TaxScheme>
          <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
        </cac:TaxScheme>
      </cac:ClassifiedTaxCategory>
    </cac:Item>
    <cac:Price>
      <cbc:PriceAmount currencyID="NOK">12000</cbc:PriceAmount>
    </cac:Price>
  </cac:InvoiceLine>
  <cac:InvoiceLine>
    <cbc:ID>2</cbc:ID>
    <cbc:InvoicedQuantity unitCode="EA">2.00</cbc:InvoicedQuantity>
    <cbc:LineExtensionAmount currencyID="NOK">30000.00</cbc:LineExtensionAmount>
    <cac:OrderLineReference>
      <cbc:LineID>2</cbc:LineID>
    </cac:OrderLineReference>
    <cac:TaxTotal>
      <cbc:TaxAmount currencyID="NOK">6750.00</cbc:TaxAmount>
    </cac:TaxTotal>
    <cac:Item>
      <cbc:Name>Kontorstol</cbc:Name>
      <cac:SellersItemIdentification>
        <cbc:ID>13002</cbc:ID>
      </cac:SellersItemIdentification>
      <cac:ClassifiedTaxCategory>
        <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
        <cbc:Percent>25.00</cbc:Percent>
        <cac:TaxScheme>
          <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
        </cac:TaxScheme>
      </cac:ClassifiedTaxCategory>
    </cac:Item>
    <cac:Price>
      <cbc:PriceAmount currencyID="NOK">15000</cbc:PriceAmount>
    </cac:Price>
  </cac:InvoiceLine>
  <cac:InvoiceLine>
    <cbc:ID>3</cbc:ID>
    <cbc:InvoicedQuantity unitCode="MTR">14.50</cbc:InvoicedQuantity>
    <cbc:LineExtensionAmount currencyID="NOK">3465.50</cbc:LineExtensionAmount>
    <cac:OrderLineReference>
      <cbc:LineID>3</cbc:LineID>
    </cac:OrderLineReference>
    <cac:TaxTotal>
      <cbc:TaxAmount currencyID="NOK">779.74</cbc:TaxAmount>
    </cac:TaxTotal>
    <cac:Item>
      <cbc:Name>Persienne</cbc:Name>
      <cac:SellersItemIdentification>
        <cbc:ID>13006</cbc:ID>
      </cac:SellersItemIdentification>
      <cac:ClassifiedTaxCategory>
        <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
        <cbc:Percent>25.00</cbc:Percent>
        <cac:TaxScheme>
          <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
        </cac:TaxScheme>
      </cac:ClassifiedTaxCategory>
    </cac:Item>
    <cac:Price>
      <cbc:PriceAmount currencyID="NOK">239</cbc:PriceAmount>
    </cac:Price>
  </cac:InvoiceLine>
  <cac:InvoiceLine>
    <cbc:ID>4</cbc:ID>
    <cbc:InvoicedQuantity unitCode="KGM">62.75</cbc:InvoicedQuantity>
    <cbc:LineExtensionAmount currencyID="NOK">1176.56</cbc:LineExtensionAmount>
    <cac:OrderLineReference>
      <cbc:LineID>4</cbc:LineID>
    </cac:OrderLineReference>
    <cac:TaxTotal>
      <cbc:TaxAmount currencyID="NOK">264.73</cbc:TaxAmount>
    </cac:TaxTotal>
    <cac:Item>
      <cbc:Name>Kaffe</cbc:Name>
      <cac:SellersItemIdentification>
        <cbc:ID>13005</cbc:ID>
      </cac:SellersItemIdentification>
      <cac:ClassifiedTaxCategory>
        <cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
        <cbc:Percent>25.00</cbc:Percent>
        <cac:TaxScheme>
          <cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
        </cac:TaxScheme>
      </cac:ClassifiedTaxCategory>
    </cac:Item>
    <cac:Price>
      <cbc:PriceAmount currencyID="NOK">18.750</cbc:PriceAmount>
    </cac:Price>
  </cac:InvoiceLine>
</Invoice> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:39:39.547

似乎有一个底层的 VB 进程弄乱了我的十进制数字。我添加了一个新测试，其中我用另一个值（cac:InvoiceLine/cbc:LineExtensionAmount 的总和）减去一个值（cbc:LineExtensionAmount）。它给了我 0.00000000000001 的差异。我对此的解决方案是将 Xml-validation 作为独立的 exe 文件运行，直到我可以准确定位问题发生的位置。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Xsl;
using System.Xml;

namespace test.Transform
{
    class Program
    {
        static void Main(string[] args)
        {

            // Arguments
            // Stylesheet
            // XML-out
            // outpath-xml-path

            if (args.Length != 3)
            {
                Console.WriteLine("parameters Stylesheet XML-out outpath-xml-path");
                return;
            }

            XslCompiledTransform xslt = new XslCompiledTransform();
            xslt.Load(args[0]);

            var xml = new XmlDocument();
            xml.Load(args[1]);

            var xmlDocOut = new XmlDocument();

            using (XmlWriter xmlWriter = xmlDocOut.CreateNavigator().AppendChild())
            {
                xslt.Transform(xml, null, xmlWriter);
            }

            xmlDocOut.Save(args[2]);
        }
    }
} 
```

第一个参数采用 ValidationSchemaPath，第二个 Xml 路径，最后一个输出路径。

像这样称呼它：

```
 public static XmlDocument TestRun2(string xsltPath, string docPath, IReport _report)
    {

        var tempFile = Path.Combine(Path.GetTempPath(), Path.GetTempFileName());
        var x = Process.GetCurrentProcess().MainModule;

        Process p = new Process();
        p.StartInfo.FileName = Path.Combine(Path.GetDirectoryName(x.FileName), "Transform.exe");
        _report.API.WriteLog(p.StartInfo.FileName);
        p.StartInfo.Arguments = string.Format("\"{0}\" \"{1}\" \"{2}\"", xsltPath, docPath, tempFile);
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.Start();

        string output = p.StandardOutput.ReadToEnd();
        p.WaitForExit();

        _report.API.WriteLog("Output from calling Transform.exe");
        _report.API.WriteLog(output);

        if (!File.Exists(tempFile))
        {
            return null;
        }

        var xd = new XmlDocument();
        xd.Load(tempFile);

        return xd;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:57:58.383

好的，这并不能完全*回答您的问题*，但它可能会*解决您的问题*。

假设 XML 实际上包含一个根元素：

```
var xml = 
    @"<root>
    <book>
        <name>Book 1</name>
        <price>25.30</price>
    </book>
    <book>
        <name>Book 2</name>
        <price>20.77</price>
    </book>
    <sum>46.07</sum>
    </root>"; 
```

然后，您可以使用 LINQ to XML 简单地完成您需要的一切：

```
var doc = XDocument.Parse(xml);

var sum = doc.Descendants("book").Sum(e => Convert.ToDecimal(e.Element("price").Value));
var total = Convert.ToDecimal(doc.Root.Element("sum").Value);

Console.WriteLine("sum: [{0}] total: [{1}] matched: [{2}]", sum, total, sum == total); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:55:17.967

您链接到的 XSLT 代码是使用 Schematron 生成的。如果 (a) 您告诉我们错误是什么，并且 (b) 您向我们展示了 Schematron 模式，而不是它生成的 XSLT 代码，则更容易说明为什么会出现错误。代码中有超过 90 次出现“价格”...

另外，我看不出（a）您的问题中的书籍 XML 和发票 XML 是如何相互关联的，或者（b）您有什么线索让您认为这与文化或编码有关 - 这从表面上看，这似乎是一个不太可能的理论。

# android - 如何使用robotium测试android应用程序Web服务调用？

> ID：10511550
> 
> 赞同：0
> 
> 时间：2012-05-09T07:25:18.350
> 
> 标签：android

我开发了一个 android 应用程序，我想在其上运行 robotium 测试用例。我遇到的第一个问题是，在我的应用程序中，我使用了很多 Web 服务调用来与服务器交互，每当应用程序访问服务器时，我都会显示一个进度对话框，现在我想等待机器人，直到应用程序得到响应来自服务器，但我可以使用waitForDialogToClose（）等待一段时间，实际上我想让它完全等待，直到它从服务器获得一些响应或错误。怎么做..？？

第二个问题是我正在将一些数据（例如文件或图像）上传到服务器并且我正在为它显示进度条，在这种情况下，我想等待机器人直到我的进度条达到最大值。请帮忙..

问候，拉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:43:25.843

Robotium 是一个黑盒测试框架：您从 UI 层测试一个应用程序，它甚至可以在不了解被测应用程序代码的情况下运行。

出于这个原因，从robotium你不能在你的模型或休息客户端中插入一个监听器并等到响应进入你的应用程序。所以，你有两个选择：

*   像您一样在 UI 上进行中继，等待给定的状态出现在 UI 中，正如您通过对话框或列表的内容所建议的那样。
*   在继续测试之前等待一段时间，此时您可以确定数据会在那里。但这风险更大，并且会更频繁地失败。

一些单元测试可以很好地测试您的其余客户端（或等效客户端），然后如果您可以模拟它并在断开连接的情况下运行您的 ui 测试，那就更好了。但这一切都需要大量的设计工作，对于一个小型应用程序和 Java 初学者来说，这是值得的，但很复杂。也许你最好只测试你的 UI 并记住你的测试并不完美。

# python - 通过覆盖pyqt4 python中的按键事件来禁用qtextedit上的字符写入

> ID：10511551
> 
> 赞同：0
> 
> 时间：2012-05-09T07:25:18.723
> 
> 标签：python, pyqt4, keypress

是否可以通过覆盖 pyqt4 python 中的按键事件来禁用 qtextedit 上的字符写入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:07:55.597

派生`QTextEdit`并覆盖相应的事件处理程序方法：

```
class MyTextEdit(QTextEdit):

    def keyPressEvent(self, event):
        event.ignore() 
```

# datatable - Primefaces的数据表中的Incell编辑未将编辑的值发送到事件

> ID：10511553
> 
> 赞同：1
> 
> 时间：2012-05-09T07:25:21.767
> 
> 标签：datatable, primefaces, inline, inline-editing

我想要一个在数据表中具有内嵌编辑选项的表。我能够编写完整的代码，但是当我单击编辑按钮时，我从服务器端的事件对象中获取的值与旧的相同。我没有得到新的价值观。

如何从事件对象中获取新值。

```
<p:dataTable id="dataTable" 
                var="osList" 
                 value="#{WLMPortalViewController.allOSInfo}" rowKey="#{osList.osName}" 
                          paginator="true" rows="5"
                            paginatorPosition="bottom"
                           editable="true" >
                    <p:ajax event="rowEdit" update="@this" listener="#{WLMPortalDataController.saveOSData}"/>
                <p:column headerText="Options" >
                    <p:rowEditor  /> 
                </p:column>

             <p:column headerText="Version" >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{osList.osVersion}" />
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText id="inputosVer" required="true" requiredMessage="* Version can't Empty." value="#{osList.osVersion}" />
                    </f:facet>
                </p:cellEditor>
             </p:column> 

            </p:dataTable> 
```

我的服务器端代码看起来像这样

```
public void saveOSData(RowEditEvent event){

    System.out.print(event.getObject());

} 
```

# c - memcpy 结构失败

> ID：10511559
> 
> 赞同：0
> 
> 时间：2012-05-09T07:25:45.370
> 
> 标签：c, memcpy

我试图 memcpy measure_msg (struct test) 到一个缓冲区。但是，下面的代码似乎没有复制数据。价值回报

```
**** ptr:0xb781c238
**** ptr:0xb781c23c
**** ptr:0xb781c244
buff[0]=5 - buff[1]=0 - buff[2]=0 - buff[3]=0 - buff[4]=W - buff[5]= - buff[6]= - buff[7]= - buff[8]= - buff[9]= - buff[10]= - buff[11]= - 
```

这段代码出了什么问题？

```
struct test{
  int mode;
  int id;
};

int func()
{   
int i, size;
struct test measure_msg;
char buff[20];
char* ptr;    

memset(&measure_msg, 0x00, sizeof(struct test));

ptr = buff;
fprintf(stderr, "**** ptr:%p\n", ptr);
sprintf(ptr, "%02d%02d", 50, 0);
ptr += 4;
size = 4;
size += sizeof(struct test);

fprintf(stderr, "**** ptr:%p\n", ptr);

measure_msg.id = 9999;
measure_msg.mode = 1111;

memcpy(ptr, &measure_msg, sizeof(struct test));
ptr += sizeof(struct test);

fprintf(stderr, "**** ptr:%p\n", ptr);

for (i=0; i<size; i++){
  fprintf(stderr, "buff[%d]=%c - ", i, buff[i]);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:31:58.010

你正在做一些奇怪的事情，但是，看看这个：

```
sprintf(ptr, "%02d%02d", 50, 0); 
```

您将向缓冲区写入一个**字符串。**现在`buf`将包含“5000”。请注意，它不包含值 50 和 0，而是它们的**字符串表示形式**！

现在，当您将缓冲区复制到您的结构时，您会将其字段设置为这四个字节，但它们不是您在打印字符串时看到的，而是它的**ASCII 代码**。请注意，在这一行：

```
fprintf(stderr, "buff[%d]=%c - ", i, buff[i]); 
```

您将缓冲区的内容打印为字符，“5”存储为 0x35（十进制为 53），然后它将是结构第一个字节的内容（依此类推）。

如果这确实是您想要做的，那么您的代码是准确的（但是您使用指针玩得太多了，这只是一个测试吗？）但这真的很奇怪，否则您会走错方向去做您需要的事情.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:40:35.160

当您`memcpy`复制int 类型值`measure_msg`时。`buff`之后，您将打印 char 类型的值。int 类型值由 4 个字节组成，可能没有打印表示：即 33752069 int 值，十六进制格式的 0x02030405，有 4 个字节，一旦像字符一样打印，您将获得 0x02、0x03、0x04 和 0x05 字符值。

更改您的打印 masc 以使用 int 值并将每个`buff[i]`转换为 int 并且您的值将被打印。

```
fprintf(stderr, "buff[%d]=%d - ", i, (int)buff[i]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:37:21.807

memcpy () 调用在我的系统（GCC/MinGW，Windows）上运行良好。您没有得到正确的输出，因为复制到 buff 中的某些“字符”是不可打印的。

尝试

```
fprintf (stderr, "buff[%d]=%x - ", i, buff[i]); 
```

反而。

数据将存储为

```
buff [0]  = 0x35  /* ASCII for '5' */
buff [1]  = 0x30  /* ASCII for '0' */
buff [2]  = 0x30
buff [3]  = 0x30
buff [4]  = 0x57  /* as 1111 is 0x00000457 in hex */
buff [5]  = 0x04  /* stored in little endian convention */
buff [6]  = 0x00  /* and here size of int = 4 */
buff [7]  = 0x00
buff [8]  = 0x0F  /* as 9999 is 0x0000270F in hex  */
buff [9]  = 0x27
buff [10] = 0x00
buff [11] = 0x00 
```

但是，通过将结构复制到字符数组中，您无论如何都想做什么？

# ruby - 逗号在这个字符串序列中有什么作用？

> ID：10511562
> 
> 赞同：1
> 
> 时间：2012-05-09T07:25:57.600
> 
> 标签：ruby

```
end1 = "C"
end2 = "h"
end3 = "e"
end4 = "e"
end5 = "s"
end6 = "e"
end7 = "b"
end8 = "u"
end9 = "r"
end10 = "g"
end11 = "e"
end12 = "r"

puts end1, end2, end3, end4, end5, end6, end7, end8, end9, end10, end11, end12 
```

逗号是否意味着下一个字符串将打印在前一个字符串的下一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T07:31:24.167

逗号分隔方法调用的参数`puts`。换句话说，`puts`这里使用 12 个参数调用该方法。

该`puts`方法被定义为打印出每个参数后跟一个换行符（除非给定的字符串已经以换行符结尾），所以是的，每个字符串都将打印在单独的行上。

如果要在同一行上打印每个字符串，可以使用`print`方法代替`puts`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:33:18.520

逗号表示 apply 放在所有变量上。并且每当 puts 打印出文本时，它会在文本之后自动打印出一个换行符。是的，它会在每个变量之后添加新行。

# facebook-like - FB.type 不是函数

> ID：10511564
> 
> 赞同：0
> 
> 时间：2012-05-09T07:26:03.640
> 
> 标签：facebook-like

我正在尝试将 facebook like 添加到我的 mediawiki 皮肤中。我有代码：

```
<html xmlns:fb="http://ogp.me/ns/fb#">
<div id="fb-root"></div>
<script>    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, "script", "facebook-jssdk"));
    </script>

<fb:like href=' . urlencode($wgTitle->getFullURL()) . ' send="true" width="450"       show_faces="false"></fb:like> 
```

在 facebook like 出现的页面上，我收到错误 FB.Type.createClass2 is not a function in firebugs 和在其他页面上它根本不显示并且没有错误。如何让它显示在每个页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:53:55.007

像这样嵌入 Like 按钮：

`<div class="fb-like" data-href=" . urlencode($wgTitle->getFullURL()) . " data-send="true" data-width="450" data-show-faces="false"></div>`

# java - 向量排序 JAVA

> ID：10511566
> 
> 赞同：0
> 
> 时间：2012-05-09T07:26:15.717
> 
> 标签：java, sorting, vector

我创建了一个 Vector 对象来将对象中的数据存储`Table`为`Vector<Table>`. `Vector<Table>`包含如下组件。

```
[Vector<Record> records, String tableName, String keyColumnName, int recordCount, int columnCount] 
```

我需要按照`tableName`我自己的顺序在上面的 Vector 中排序并返回`Vector<Table>`以`sorted tableNames`用于其他进程。

我怎么能这样做？

**更新**

我写了如下方法。

```
private Vector<Table> orderTables(Vector<Table> loadTables) {

    ArrayList<String> tableNames = new ArrayList<String>();

    for (Table table : loadTables) {

        String tblName = table.getTableName();
        tableNames.add(tblName);

    }
    Collections.sort(tableNames, new MyComparable());

    return null;
} 
```

但我不知道如何写`Comparator`这个。我自己的排序顺序存储在`.properties`文件中。我可以阅读并获得价值。但我不知道如何比较它。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T07:28:25.920

我建议您使用`Collections.sort`自己的自定义`Comparator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:40:10.153

只是想给出一个伪代码

```
TableComparator implements Comparator{
   int compare(Table source, Table destination){
     //implement your own custom logic of comparison
   }
}

Vector<Table> vectorTable = new Vector<Table>();
TableComparator tableComparator = new TableComparator(); 
```

现在使用这个比较器`Collections.sort(vectorTable,tableComparator);`

# iphone - 在 iphone 上以相反的顺序导出视频文件

> ID：10511570
> 
> 赞同：0
> 
> 时间：2012-05-09T07:26:39.973
> 
> 标签：iphone, video, avassetreader

我一直在尝试以相反的顺序导出视频文件（从头到尾播放）。知道如何有效地完成它吗？

我能找到的最好的方法是创建视频帧的 JPEG 文件（AVASSETREADER），然后以相反的顺序重写它（AVASSETWRITER）。但这很慢。

谢谢阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:37:04.847

我认为这是唯一的方法。如果您想尝试，我这里有代码：[https ://github.com/mikaelhellqvist/ReverseClip](https://github.com/mikaelhellqvist/ReverseClip)

# jquery - Jquery ui show() 方法与 wordpress 中的 cookie 冲突

> ID：10511573
> 
> 赞同：1
> 
> 时间：2012-05-09T07:26:55.213
> 
> 标签：jquery, wordpress, jquery-ui, cookies

我必须在 cookie 中维护侧边栏的状态。所以我所做的只是单击隐藏侧边栏按钮，我创建了 cookie 以保持其状态。看下面的代码。

```
//Create Cookie function which is usefull to create cookies

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}
//Read Cookie function which is usefull to read cookies vlues
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
//Earse Cookie function which is usefull to earise cookies vlues
function eraseCookie(name) {
    createCookie(name,"",-1);
}
// This function is used for  sidebar state managemnet operations.
function checksidebarstatus()
{
    var sidebarval = '';
    sidebarval = readCookie('sidebarval');
    if(sidebarval == 'hide')
    {   
        jQuery(".show-sidebar").fadeIn();
        jQuery("#main").css( "width","950" );
        jQuery("#sidebar").hide();
    }
} 
```

现在当 hidesidar 按钮代码到 hidesidebar 如下

```
// Sidebar Animation
jQuery("#hide-sidebar").click(function(){

    if(sidebarval == "hide")
    {
        //jQuery("#sidebar").delay(500).hide("slow");
        jQuery("#sidebar").hide("slide", { direction: "left" }, 500);
    }else
    {
        jQuery("#sidebar").hide("slide", { direction: "left" }, 500);
    }
    jQuery("#main").delay(500).animate({
        width: 950
    }, 1000 );
    jQuery(".show-sidebar").delay(1500).fadeIn();
    createCookie('sidebarval','hide',7);
});

jQuery("#show-sidebar").click(function(){

    jQuery(".show-sidebar").fadeOut();
    jQuery("#main").animate({
        width: 760
    }, 500 );
    if(sidebarval == "hide")
    {    
        //jQuery("#sidebar").delay(500).show("slow");
        jQuery("#sidebar").delay(500).show("slide", { direction: "left" }, 1000);
    }else
    {
        jQuery("#sidebar").delay(500).show("slide", { direction: "left" }, 1000);
    }   
    createCookie('sidebarval','show',7);
}); 
```

现在我有 js 变量来获取 cookie 数据 id 如下

```
var sidebarval = readCookie('sidebarval'); 
```

现在作为我必须运行的代码，但是当我获得 cookie 值时，它将不允许这样做

```
jQuery("#sidebar").delay(500).show("slide", { direction: "left" }, 1000); 
```

如果我取消注释此行，则此 show 方法有效。

```
jQuery("#sidebar").delay(500).show("slow");
//jQuery("#sidebar").delay(500).show("slide", { direction: "left" }, 1000); 
```

谁能告诉我这是怎么可能的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:49:32.273

您需要在项目中包含[JQuery UI](http://jqueryui.com/home)文件。最适合您的节目是因为它位于默认的 JQuery 代码库中。底部的 show 方法（不起作用的方法）是 JQuery UI Effects Core 的一部分。您需要自己构建包含此选项的 JQuery UI 文件，它将起作用。

这是那里显示功能的链接：http: [//jqueryui.com/demos/show/](http://jqueryui.com/demos/show/)

# java - 如何在java中获取部分从jquery加载的页面的整个html

> ID：10511575
> 
> 赞同：3
> 
> 时间：2012-05-09T07:26:56.370
> 
> 标签：java, web-scraping, rhino

我需要开发一个 Web 应用程序，它允许我抓取使用 jquery 部分加载的页面。我了解到在 php 中这是不可能[写这篇文章的](https://stackoverflow.com/questions/10507523/how-to-get-in-php-the-entire-html-of-a-page-loaded-in-part-from-jquery)

我读到了[rhino](http://www.mozilla.org/rhino/)，但我不知道如何在我的范围内使用它，有人知道如何在 java 中做到这一点吗？可以举一些例子吗？谢谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:49:01.220

您正在寻找的是浏览器界面。

最常用的浏览器界面（或驱动程序）是 selenium：[http ://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)

您可以使用 selenium 打开您选择的浏览器来打开网站。它支持 javascript，因此您将能够通过 XPath 或 CSS 选择器遍历 DOM。

# excel - Excel VBA 单元格字符限制

> ID：10511576
> 
> 赞同：1
> 
> 时间：2012-05-09T07:27:05.527
> 
> 标签：excel, vba, outlook

我正在构建一个宏来将数据从自定义 Outlook 表单导出到 Excel 工作簿。数据将以字符串格式从 Outlook 表单中的用户定义字段中提取。然后将字符串数据输入到 Excel 单元格的值中。字符串可能包含大量字符。

我知道每个 excel 单元格可以容纳 32,767 个字符。如果我尝试在 Excel 单元格中输入超过 32,767 个字符的字符串，会发生什么情况？多余的字符会怎样？

我意识到字符没有出现，但是这些丢失的字符可以通过某种方式恢复吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:51:57.833

它们只是丢失了，没有办法恢复它们。如果你喜欢，你可以测试一下：

```
Sub test()

Dim i As Long
Dim text As String

For i = 1 To 32767
    text = text & "a"
Next

text = text & "end"
Range("A1").Value = text
'"end" will be lost

End Sub 
```

# c# - 如何在 ADO.NET 中创建存储过程

> ID：10511578
> 
> 赞同：0
> 
> 时间：2012-05-09T07:27:09.067
> 
> 标签：c#, sql-server, tsql, stored-procedures, ado.net

我有以下代码，我希望它是一个**存储过程**。

如何**创建**和**调用**存储过程，使下面的代码就像一个方法调用。

存储过程存储在 Visual Studio 还是 MS SQL Server 中？

```
using (var conn = new SqlConnection(dbConnectionString))
using (var cmd = conn.CreateCommand())
{
        conn.Open();
        cmd.CommandText =
        @"use [Email Database]
INSERT INTO Emails_Log
(Email_ID, e_To, e_From, e_Subject, e_Date) 
VALUES
(@id, @to, @from, @subject, @date)";
        // Writes to database (local) instance
        cmd.Parameters.AddWithValue("@id", emailID);
        cmd.Parameters.AddWithValue("@to", emailTo);
        cmd.Parameters.AddWithValue("@from", emailFrom);
        cmd.Parameters.AddWithValue("@subject", emailSubject);
        cmd.Parameters.AddWithValue("@date", emailSentDate);
        cmd.ExecuteNonQuery();
} 
```

* * *

新问题！

我已经设法创建了一个存储过程，谢谢大家，我只剩下一个问题了。

```
cmd.CommandType = CommandType.StoredProcedure; 
```

**第二个CommandType**下有一条红线，错误为

> 当前上下文中不存在名称“CommandType”

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:32:51.177

On your server Create a procedure using the code below:

```
CREATE PROCEDURE InsertProc
(
@id <put here the datatype>, 
@to <put here the datatype>, 
@from <put here the datatype>, 
@subject <put here the datatype>, 
@date <put here the datatype>
)
AS
INSERT INTO Emails_Log (Email_ID, e_To, e_From, e_Subject, e_Date) 
        VALUES (@id, @to, @from, @subject, @date) 
```

after you have created the procedure, in your code try this:

```
// other codes
cmd.CommandText = "InsertProc";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.AddWithValue("@id", emailID);
cmd.Parameters.AddWithValue("@to", emailTo);
cmd.Parameters.AddWithValue("@from", emailFrom);
cmd.Parameters.AddWithValue("@subject", emailSubject);
cmd.Parameters.AddWithValue("@date", emailSentDate);
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T07:31:33.357

最常见的是，您将拥有一个可以应用于服务器的 sql 脚本（或一系列增量脚本），创建包括 sprocs 之类的对象；然后，只是（也许在 SSMS 中）：

```
use [Email Database]
create proc SomeNameHere
      -- note these lengths are made up
      @id int, @to nvarchar(400), @from nvarchar(400),
      @subject nvarchar(2000), @date datetime
as
    INSERT INTO Emails_Log
    (Email_ID, e_To, e_From, e_Subject, e_Date) 
    VALUES
    (@id, @to, @from, @subject, @date)
go 
```

然而！我还会说“为什么要让它成为一个 sproc？” - 除非你有充分的理由，否则我真正挑战一切都必须是 sproc 的想法。特别是，它使维护（尤其是在不同服务器可能处于不同阶段的部署场景中）更加困难。当您想要进行非平凡的处理时，Sprocs 很好，不想通过线路传输大量数据，并且它具有非平凡的长度 - 但我*个人*不会只为这个插入使用一个，除非它是严格的地方政策。

然后，在您的命令中，将 设置`CommandType`为存储过程，并将其设置`"SomeNameHere"`为`CommandText`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:34:48.720

存储过程存储在 sql server 中。首先，您必须在 sql server 中创建存储过程。[在这里](http://www.youtube.com/watch?v=fOBDISV8cvY)您可以看到如何创建存储过程。然后你需要在c#中调用存储过程在[这里](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson07)你可以看到如何调用保存在ms sql server中的存储过程。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T15:12:54.660

错误“当前上下文中不存在名称‘CommandType’”是由缺少命名空间引起的。只需添加“使用 System.Data;” 在上面，它会起作用。

# ajax - 如何扩展 jquery 的 .ajax() 并创建自定义 .ajax2() 供我使用

> ID：10511580
> 
> 赞同：1
> 
> 时间：2012-05-09T07:27:17.197
> 
> 标签：ajax, jquery

我想扩展 JQuery 的 Ajax 功能以获得高级选项和功能。

例如，我可以传递一个名为**logElement**的参数并传递一个选择器来查找要放置日志的元素。

像

```
$.ajax({
    type: "GET",
    url: "ajax/get_countries.php",
    dataType: 'json',
    logElement:"#logDiv",
    success: function(data){
           //code
        }

}); 
```

这应该像 jquery 的 Ajax 请求一样起作用，并且还会在成功和错误时在指定的 logElement 中打印日志信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:32:59.120

```
(function($) {

  $.ajax2 = function(settings) {
    // do what you want...
    $.ajax(settings);
  };

})(jQuery); 
```

# html - 为什么单击浏览器后退按钮时有时会清除 HTML 表单

> ID：10511581
> 
> 赞同：14
> 
> 时间：2012-05-09T07:27:19.270
> 
> 标签：html, forms, browser, back-button, form-data

我相信每个人都知道这种行为。您在网络上填写表格，然后提交。提交后您发现您填写了一些错误的数据。因此，您单击浏览器的后退按钮。然后，有时表单仍然包含您输入的数据*（您在这种情况下希望得到的数据）*，有时则没有。

当它被清除时，我找不到任何连接，什么时候没有。

我在互联网/stackoverflow 上找到的一些答案：

*   在 https 连接上，表格总是被清除
*   当使用带有会话的动态网站时，表单总是被清除

但他们两个肯定是错的。我已经看到网站（就像我自己的网站一样）在浏览器返回后保留表单数据**并**使用 https**并**使用会话。

所以请：谁能解释一下浏览器是如何处理这些东西的？

顺便说一句：我的任务是确保**不**清除表单数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T07:31:57.490

我无法为所有情况提供明确的答案。

作为一名 Web 开发人员，这是我开发的网站通常遵循的规则，以实现不让用户丢失数据的目标：

*   禁用要保留的页面上的所有缓存（通过 HTTP 标头）。
*   提交表单时将所有数据捕获到会话（或其他一些临时存储）中。
*   如果用户向后导航，浏览器会请求页面的新版本（因为您将其设置为从不缓存）。
*   该页面具有查看会话/数据库/任何位置的逻辑，并根据最后的输入状态重新填充所有字段。如果页面上有动态输入，您应该有足够的数据来重新创建它们。
*   流程完成后，使用 POST/Redirect/GET 模式清除会话数据，使用户难以返回原始页面。

> 我在互联网/stackoverflow 上找到的一些答案：
> 1\. 在 https 连接上，表单总是被清除
> 2\. 使用带有会话的动态网站时，表单总是被清除

我相信 #1 因浏览器/安全设置/场景而异。

假设 #2 在所有情况下肯定不是真的（我刚刚描述的模式*利用*了会话和动态表单）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:33:40.153

它是一个浏览器问题。单击后退按钮时，浏览器的行为会有所不同。[在点击浏览器上的后退按钮时丢失表单数据](https://stackoverflow.com/questions/1485672/losing-form-data-when-clicking-the-back-button-on-browser)之前曾问过这个问题

# javascript - html5 以 sql 表形式存储数据的 localStroage 是他们的任何解决方案

> ID：10511586
> 
> 赞同：1
> 
> 时间：2012-05-09T07:27:43.733
> 
> 标签：javascript, jquery, html

我想使用 sql 表形式的数据，但我必须使用 html5 的 locaStorage 功能是他们以 sql 形式存储数据的任何方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:40:43.693

我建议你看看[PersistJS](http://pablotron.org/?cid=1557)的存储解决方案。[这个答案](https://stackoverflow.com/a/4695652/575527)简要解释了这个库的后端是如何工作的。

至于数据...使用 JSON 而不是 XML。XML 过于庞大而无法存储，尤其是当库回退到基于 cookie 的存储时。

如果您无法更改服务器发送数据的方式（当服务器人员是 XML fanbois 时），请尝试使用[XML 到 JSON 库。](http://www.thomasfrank.se/xml_to_json.html)

# javascript - Extjs 商店找到所有

> ID：10511588
> 
> 赞同：6
> 
> 时间：2012-05-09T07:27:51.157
> 
> 标签：javascript, extjs, extjs4

`Ext.data.Store`find 方法的文档说：

> 通过特定字段值查找此存储中第一个匹配记录的索引。

我的问题是如何找到该商店中所有匹配记录的索引？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T18:34:31.193

我认为满足您需求的最佳功能是`queryBy()`因为它返回匹配记录的数组。

您仍然可以使用`each()`检查模型是否符合条件，然后将它们添加到数组中。但是这个函数更适合遍历存储中的所有Record，而不仅仅是“过滤”数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:41:14.947

如果您使用 ExtJS 3.x，假设您的数据存储由`store`

```
Ext.pluck(store.filter('field', 'value'), 'id'); 
```

返回一个包含匹配记录索引的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T08:06:33.290

Extjs 存储很少有方法通过特定字段值返回第一个匹配的记录。要获取所有过滤的记录，您必须使用**每个**函数 && 来匹配或过滤所需的记录。

# java - 关于 Java 到 XML 转换的问题，反之亦然

> ID：10511601
> 
> 赞同：0
> 
> 时间：2012-05-09T07:28:33.373
> 
> 标签：java, xml, jakarta-ee, xml-parsing, xml-binding

我有这样的 XML，我从中间件获得

```
<Example library="somewhere">

   <book>

     <AUTHORS_TEST>Author_Name</AUTHORS_TEST>
     <EXAMPLE_TEST>Author_Name</EXAMPLE_TEST>

   </book>

</Example> 
```

我想要做的是将 XML 转换为 Java 对象（反之亦然）：

```
class Example
 {

 private String authorsTest;
 private String exampleTest;

  } 
```

那么有没有办法映射这两个呢，需要注意的是XML标签名和类属性名是不同的，所以有没有人建议用最小的改动来实现这个？Xstream是一个不错的选择，但是如果我有大字段数量很难添加别名，那么除了 XStream 之外还有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:32:08.270

有很好的图书馆可以为您做到这一点。一个简单的例子是[XStream](http://xstream.codehaus.org/)。

[*请参阅两分钟教程*](http://xstream.codehaus.org/tutorial.html)中的此示例：

```
Person joe = new Person("Joe", "Walnes");
joe.setPhone(new PhoneNumber(123, "1234-456"));
joe.setFax(new PhoneNumber(123, "9999-999")); 
```

现在，要将其转换为 XML，您只需简单调用 XStream：

```
String xml = xstream.toXML(joe); 
```

生成的 XML 如下所示：

```
<person>
  <firstname>Joe</firstname>
  <lastname>Walnes</lastname>
  <phone>
    <code>123</code>
    <number>1234-456</number>
  </phone>
  <fax>
    <code>123</code>
    <number>9999-999</number>
  </fax>
</person> 
```

我更喜欢 XStream，因为它非常易于使用。如果你想做更复杂的事情，比如从 XML 生成 Java 类，你应该看看Miquel 提到的[JAXB 。](http://jaxb.java.net/)但它更复杂，需要更多时间才能开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T07:34:18.480

您正在寻找的是所谓的 XML 绑定，您实际上将 xml 转换为基于 xml 模式的 java 类。对此的参考实现是[jaxb](http://jaxb.java.net/)，但还有许多其他选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:14:18.453

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

大多数 XML 绑定库都需要在 XML 表示中的每一级嵌套一个对象。EclipseLink JAXB (MOXy) 具有`@XmlPath`启用基于 XPath 的映射以消除此限制的扩展。

**例子**

下面是如何将`@XmlPath`扩展应用到您的用例的演示。

```
package forum10511601;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="Example")
@XmlAccessorType(XmlAccessType.FIELD)
class Example {

    @XmlAttribute
    private String library;

    @XmlPath("book/AUTHORS_TEST/text()")
    private String authorsTest;

    @XmlPath("book/EXAMPLE_TEST/text()")
    private String exampleTest;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供者，您需要`jaxb.properties`使用以下条目添加与域模型在同一包中命名的文件（请参阅将[EclipseLink MOXy 指定为您的 JAXB 提供者](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

由于 MOXy 是 JAXB (JSR-222) 实现，因此您使用标准 JAXB 运行时 API（从 Java SE 6 开始包含在 JRE/JDK 中）。

```
package forum10511601;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Example.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10511601/input.xml");
        Example example = (Example) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(example, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<Example library="somewhere">
   <book>
      <AUTHORS_TEST>Author_Name</AUTHORS_TEST>
      <EXAMPLE_TEST>Author_Name</EXAMPLE_TEST>
   </book>
</Example> 
```

# c# - 为多个类型参数添加类型限制？

> ID：10511602
> 
> 赞同：2
> 
> 时间：2012-05-09T07:28:41.830
> 
> 标签：c#, extension-methods

我有一个扩展方法

```
public static bool Between<T1, T2>(this T1 Foo, T2 bar) where T1: IComparable
{
     //Body
} 
```

如何限制我的 EM，以便 T1: IComparable 和 T2: IConvertible

我试过

```
T1: IComparable, T2: IConvertible 
```

但给出错误。那怎么写呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T07:31:19.227

试试这个：

```
 where T1: IComparable where T2: IConvertible 
```

有关类型参数约束的更多信息，请查看此处：http:
[//msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

# jquery - 幻灯片 - 滚动到 - 画廊显示图像页面 - 居中

> ID：10511605
> 
> 赞同：1
> 
> 时间：2012-05-09T07:28:48.193
> 
> 标签：jquery

我正在寻找像这样的“滚动到”效果：

[http://studio8169.com/?page_id=11](http://studio8169.com/?page_id=11)

我使用了此页面中的一些代码：

[http://www.thewebsqueeze.com/web-design-tutorials/create-a-horizo​​ntal-scrolling-website.html](http://www.thewebsqueeze.com/web-design-tutorials/create-a-horizontal-scrolling-website.html)

现在我的 div 位于浏览器的左边框。我怎样才能让它在 div 的中心滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:40:33.340

您不能在 SO 上期待这样的答案。但我最近创造了类似的东西，所以我只是分享。

基本上你需要的是这样的：

## *[jsBin 演示](http://jsbin.com/uxuhut/2/)*

**[编辑/下载](http://jsbin.com/uxuhut/2/edit#javascript,html,live)**

```
 <div id="mid"> (Position: absolute, width:100%, height:400px; overflow:hidden;)

    <div id="gallery"> (position:relative;width:960px;margin:0 auto;)
       <div id="slider"> (position absolute;left:0px;width:100000px;height:400px;)
          <div class="box"></div> (position:relative; float:left;) width:960px;height:400px;
          <div class="box"></div>
          <div class="box"></div>
          <div class="box"></div>
       <div class="btn btn_left"></div> (position:absolute;top:150px;left:0px;)
       <div class="btn btn_right"></div> (position:absolute;top:150px;right:0px;)
    </div>

  </div> 
```

PS 将样式放在适当的 .css 文件或`<style>`标签内

我创建的只是这一点 javascript/jQuery：

```
var animateTime = 1000; // set preferred animation time
var galW = $('#gallery').innerWidth(); // return 960px
var slidesN = $('#slider>div.box').length;
var c = 0; // set counter to '0'

function states(){
  var cStat=c===-1?c=slidesN-1:c=c%slidesN; // counter states
  var btnStat=c===0?$('.btn_left').hide():$('.btn_left').stop(1).fadeIn(300); // left button states
}
states(); // set states at DOM ready

function anim(){
  $('#slider').stop(1).animate({left: -(c*galW)}, animateTime);
}

$('#gallery .btn').on('click',function(){
  var btnClass=$(this).hasClass('btn_left') ? c-- : c++ ;
  states();
  anim();
}); 
```

# android - 尝试获取备份 apk 文件时出现 java.nio.channels.NonWritableChannelException

> ID：10511608
> 
> 赞同：4
> 
> 时间：2012-05-09T07:28:54.990
> 
> 标签：android

我想备份安装的apk。通过使用[如何以编程方式获取应用程序的 .apk 文件，](https://stackoverflow.com/questions/8307034/how-to-get-the-apk-file-of-an-application-programatically)我得到了 apk 文件。当我尝试备份到另一个文件时，我得到

```
Caused by: java.nio.channels.NonWritableChannelException 
```

获取备份文件的代码：

```
File sourceFile = new File(app.publicSourceDir);
File backupFile = new File(Environment.getExternalStorageDirectory(), "SoundRecorder.apk");
if(!backupFile.exists())
     backupFile.createNewFile();
     if(sourceFile.exists()) {
         FileChannel src = new FileInputStream(sourceFile).getChannel();
         FileChannel dst = new FileInputStream(backupFile).getChannel();
         dst.transferFrom(src, 0, src.size());  <--here I get the exception
         src.close();
         dst.close();
     } 
```

我也在 manifest.xml 中写了 android.permission.WRITE_EXTERNAL_STORAGE 。

# c# - 令人困惑的数据注释验证

> ID：10511609
> 
> 赞同：2
> 
> 时间：2012-05-09T07:28:55.873
> 
> 标签：c#, silverlight, validation, class, data-annotations

从早上开始，我就一直在为这个问题而苦苦挣扎。我的域服务中有以下课程。

```
 [MetadataTypeAttribute(typeof(CompanyRecord.CompanyRecordMetadata))]
 public partial class CompanyRecord
 {

     // This class allows you to attach custom attributes to properties
     // of the CompanyRecord class.
     //
     // For example, the following marks the Xyz property as a
     // required property and specifies the format for valid values:
     //    [Required]
     //    [RegularExpression("[A-Z][A-Za-z0-9]*")]
     //    [StringLength(32)]
     //    public string Xyz { get; set; }
    internal sealed class CompanyRecordMetadata
    {
        // Metadata classes are not meant to be instantiated.
        private CompanyRecordMetadata()
        {
        }

        public Nullable<char> AccessToClearance { get; set; }

        public Nullable<char> AccessToMarketplace { get; set; }

        public Nullable<bool> Active { get; set; }

        public string AddressLine1 { get; set; }

        public string AddressLine2 { get; set; }

        public Nullable<int> AllotedHDSpace { get; set; }

        public string City { get; set; }

        public int CompanyID { get; set; }

        public Binary CompanyLogo { get; set; }

        [Required(ErrorMessage = "Company Name is required and must be unique.")]
        public string CompanyName { get; set; }

        [Range(1, Int32.MaxValue, ErrorMessage = "Company Type is required.")]
        public int CompanyTypeID { get; set; }

        [Range(1, Int32.MaxValue, ErrorMessage = "Country is required.")]
        public Nullable<int> CountryID { get; set; }

        public string Description { get; set; }

        //[RegularExpression(pattern: @"[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum|tv|COM|ORG|NET|GOV|MIL|BIZ|INFO|MOBI|NAME|AERO|JOBS|MUSEUM|TV|Com|Org|Net|Gov|Mil|Biz|Info|Mobi|Name|Aero|Jobs|Museum|Tv)\b", ErrorMessage = "Please provide a valid email address")]
        [RegularExpression(pattern: @"(\w[-._\w]*\w@\w[-._\w]*\w\.[a-zA-z]{2,6})", ErrorMessage = "Please provide a valid email address")]
        public string EmployeeEmail { get; set; }

        //[RegularExpression(pattern: @"[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum|tv|COM|ORG|NET|GOV|MIL|BIZ|INFO|MOBI|NAME|AERO|JOBS|MUSEUM|TV|Com|Org|Net|Gov|Mil|Biz|Info|Mobi|Name|Aero|Jobs|Museum|Tv)\b", ErrorMessage = "Please provide a valid email address")]
        //(\w[-._\w]*\w@\w[-._\w]*\w\.\w{2,3})
        [RegularExpression(pattern: @"(\w[-._\w]*\w@\w[-._\w]*\w\.[a-zA-z]{2,6})", ErrorMessage = "Please provide a valid email address")]
        [Required(ErrorMessage = "Email is required.")]
        public string Email { get; set; }

        [StringLength(10, ErrorMessage = "Phone Ext. should not be more than 10 chars.")]
        public string EmployeePhoneExt { get; set; }

        [StringLength(20, ErrorMessage = "Phone No. should not be more than 20 chars.")]
        [RegularExpression(pattern: @"^[0-9\-\(\) ]*[0-9\-\(\)]*$", ErrorMessage = "Please provide a valid Phone No.")]
        public string EmployeePhoneNo { get; set; }

        public string FirstName { get; set; }

        public string LastName { get; set; }

        [Range(0, int.MaxValue, ErrorMessage = "Number of projects should be lower than 2,147,483,647.")]
        public Nullable<int> NoOfProjects { get; set; }

        public Nullable<int> NoOfUsers { get; set; }

        [StringLength(10, ErrorMessage = "Phone Ext. should not be more than 10 chars.")]
        public string PhoneExt { get; set; }

        [StringLength(20, ErrorMessage = "Phone No. should not be more than 20 chars.")]
        [Required(ErrorMessage = "Phone No. is required.")]
        [RegularExpression(pattern: @"^[0-9\-\(\) ]*[0-9\-\(\)]*$", ErrorMessage = "Please provide a valid Phone No.")]
        public string PhoneNo { get; set; }

        [RegularExpression(pattern: @"^[a-zA-Z0-9\-\(\)\* ]*[a-zA-Z0-9\-\(\)\*]*$", ErrorMessage = "Postal codes cant' contain special characters except for -, (, ), * and spaces.")]            
        public string PostalCode { get; set; }

        public string Province { get; set; }

        public string Website { get; set; }

        public int MarketID { get; set; }

        public int AffiliationID { get; set; }

        public string CallLetter { get; set; }
    }
} 
```

问题：我需要创建一个验证规则，仅当 CompanyTypeID 等于 1、3、5、9 和 11 时才需要 MarketID 和 Affiliation ID 是否有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:40:36.620

您应该使用自定义验证。您的问题有以下几个主题：

1 [http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute(vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute(vs.95).aspx)

2 [http://blogs.microsoft.co.il/blogs/bursteg/archive/2009/04/14/net-ria-services-custom-validation.aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2009/04/14/net-ria-services-custom-validation.aspx)

# android - Android，google play apk 的官方下载位置进行测试？

> ID：10511616
> 
> 赞同：0
> 
> 时间：2012-05-09T07:29:33.090
> 
> 标签：android, google-play

我有一些功能可以对我的应用程序进行评级以及查看/安装我需要在 android avd 模拟器中测试的市场上的其他应用程序。为此，我需要安装最新的 google play apk，但我不确定从哪个官方位置下载它，因此我可以将其安装到模拟器上。

我发现的很多资源都是用于文件共享网站和过时的 apk，如果能提供官方 apk 的链接，我将不胜感激。出于某种原因，我自己不知道；似乎无法从主要的 google play 网站获得它。这是最令人困惑的！

还是有另一种方法可以在模拟器上测试市场应用程序的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:33:38.813

您正在寻找的是：`"market://details?id=" + APP_PNAME`

我强烈推荐使用[android code snippet **app ratingr**](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:33:58.307

首先，这不是一个编程问题。其次，没有“官方下载位置”之类的东西。Play 商店应用程序仅在许可设备上可用。即使您从设备中提取了 apk，它也不会按原样在模拟器上运行，因为它还需要其他组件。因此，如果您需要访问 Market/Play 商店，请在真实设备上进行测试。

# c# - 如何获取表单的位置和显示它的屏幕，并在下次显示我的表单时恢复？

> ID：10511619
> 
> 赞同：1
> 
> 时间：2012-05-09T07:29:44.010
> 
> 标签：c#, .net, winforms, position, screen

我有 2 台显示器，我需要保存表单位置，它应该在屏幕上显示它关闭的位置。

有人可以建议如何获取它所在的屏幕，并在表单加载时在表单关闭的屏幕上显示它吗？

我保存在注册表中的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:48:33.003

最简单的方法是调用[`GetWindowPlacement`函数](http://msdn.microsoft.com/en-us/library/ms633518.aspx)。这将返回一个包含有关窗口屏幕坐标信息的[`WINDOWPLACEMENT`结构。](http://msdn.microsoft.com/en-us/library/ms632611.aspx)

使用此功能而不是该`Form.Location`属性可以解决您在使用多个显示器、最小化窗口、位置奇怪的任务栏等时遇到的问题。

攻击路线是在您的应用程序关闭时调用该`GetWindowPlacement`函数，将窗口的位置保存到注册表（或您存储它的任何地方 - 注册表不再是保存应用程序状态的推荐位置），然后当您的应用程序重新打开时，调用相应的[`SetWindowPlacement`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633544.aspx)将窗口恢复到之前的位置。

由于这些是 Win32 API 公开的本机函数，并且您使用 C# 工作，因此您需要通过 P/Invoke 调用它们。以下是必需的定义（出于组织目的，我建议将它们放在名为 的静态类中`NativeMethods`）：

```
[StructLayout(LayoutKind.Sequential)]
struct POINT
{
    public int X;
    public int Y;
}

[StructLayout(LayoutKind.Sequential)]
struct RECT
{
    public int left;
    public int top;
    public int right;
    public int bottom;
}

[Serializable]
[StructLayout(LayoutKind.Sequential)]
struct WINDOWPLACEMENT
{
     public int length;
     public int flags;
     public int showCmd;
     public POINT ptMinPosition;
     public POINT ptMaxPosition;
     public RECT rcNormalPosition; 
}

[DllImport("user32", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetWindowPlacement(IntPtr hWnd, ref WINDOWPLACEMENT lpwndpl);

[DllImport("user32", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetWindowPlacement(IntPtr hWnd, ref WINDOWPLACEMENT lpwndpl); 
```

要获取窗口的当前位置（在您的应用程序关闭时执行此操作），请使用以下代码：

```
WINDOWPLACEMENT wp = new WINDOWPLACEMENT();
wp.length = Marshal.SizeOf(wp);
GetWindowPlacement(MyForm.Handle, ref wp); 
```

回想一下，我提到注册表不再是持久化应用程序状态的推荐位置。由于您是在 .NET 中进行开发的，因此您可以使用更强大、更通用的选项。并且由于`WINDOWPLACEMENT`上面声明的类被标记`[Serializable]`，因此很容易将这些信息序列化到您的[应用程序设置](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)中，然后在您下次打开时重新加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:54:16.960

我多次实现了类似的功能。您所要做的就是在表单关闭时保存和属性`Form.WindowState`，并在表单打开时恢复它们。`Form.Size``Form.Loaction`

# wordpress - 插件：激活插件后立即出现 WP 电子商务错误

> ID：10511620
> 
> 赞同：0
> 
> 时间：2012-05-09T07:29:52.100
> 
> 标签：wordpress

我正在使用 wordpress 插件 Duplicator 遵循所有说明，但是当我在临时网站页面上传输它时我得到了这个。

> 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由（输出开始于 /home/public_html/temp/wp-content/plugins/wp-e-commerce-product-showroom/wp_e_showrp .php:469) 在第 17 行的 /home/public_html/temp/wp-content/plugins/wp-e-commerce/wpsc-core/wpsc-constants.php
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /home/public_html/temp/wp-content/plugins/wp-e-commerce-product-showroom/wp_e_showrp .php:469) 在第 17 行的 /home/public_html/temp/wp-content/plugins/wp-e-commerce/wpsc-core/wpsc-constants.php
> 
> 警告：无法修改标头信息 - 标头已由（输出开始于 /home/public_html/temp/wp-content/plugins/wp-e-commerce-product-showroom/wp_e_showrp.php:469）在 /home/public_html/ temp/home/public_html/temp/wp-includes/pluggable.php 在第 866 行

然后我阅读了一些在 wordpress 论坛上发布的解决方案： 解决方案：

创建一个 php5.ini 并将其保存在您的根文件夹中。如果您在一台服务器下有多个网站，那么它将保存在您可以查看所有网站文件夹的位置。

在根目录中创建一个名为“tmp”的文件夹（不带“s”）

> 在 php5.ini 中输入：
> 
> session.save_path = "/home/content/##/#######/html/tmp" upload_tmp_dir=/tmp
> 
> *#s 替换为您的托管服务提供商给您的内容。在 Godaddy 中，当您进入您的托管控制中心时，它将是服务器下的绝对托管路径。

他们说它有效，但不适合我。你能帮我确定我的保存路径在哪里吗？这个解决方案真的有效吗？您还有其他选择来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:41:29.707

要查找 save_path 所需的绝对路径，请登录您的主机控制中心。登录后，您将在页面中间看到“服务器”列。此列的底部是您的绝对路径。在根目录中创建文件夹后，只需将 /tmp 附加到此末尾即可。

# jquery - 滑动切换两种不同的 CSS 状态

> ID：10511621
> 
> 赞同：2
> 
> 时间：2012-05-09T07:30:00.567
> 
> 标签：jquery

当我需要它向下和向上滑动时，这非常有用，但是由于我的 CSS，当它向上滑动时有一个双边框。所以我尝试在主css中取出顶部边框并在幻灯片后添加它，但如果有人再次切换它仍然存在。我将如何做到这一点，以便在第一个位置（当它向上时）没有边框顶部，而当它在第二个位置（当它向下时）有一个边框顶部。这是我的代码

```
$('.product').click(function() {
  $('.info').slideToggle('slow', function() {
    $('.product').css( "border-top","1px solid #000" );
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:40:12.130

[演示 jsBin](http://jsbin.com/oqorex/3/edit)

```
$('.product').toggle(function() {
    $('.info').stop(1).slideDown('slow');
    $(this).css( "border-top","1px solid #000" );
}, function(){
    $('.info').stop(1).slideUp('slow');
    $(this).css( "border-top","1px solid transparent" );
}); 
```

我曾经`.stop(1)`清除一些动画队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:40:04.283

您可以通过创建 2 个具有各自边框的 css 类来使用[jquery 。`toggleClass`](http://api.jquery.com/toggleClass/)并在需要时切换它们

例子

```
$('.product').click(function() {
  $('.info').slideToggle('slow', function() {
    $('.product').toggleClass('addBorder');
  });
});​ 
```

您可以查看[jsfiddle 上的实时示例](http://jsfiddle.net/nYbZs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:40:24.187

哦，玩 jquery 很有趣 :)

这是我的小实验：

```
$('.product').click(function() {
    if($('.toggled').length > 0){
      $('.info').slideToggle('slow', function() {
        $('.product').css( "border-top","none" ).removeClass('toggled');
      });
    }else{
      $('.info').slideToggle('slow', function() {
        $('.product').css( "border-top","1px solid #000" ).addClass('toggled');
      });
    }
});​ 
```

[http://jsfiddle.net/kaunt/](http://jsfiddle.net/kaunt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:50:42.273

```
$('.product').click(function() {
  $('.info').slideToggle('slow', function() {
      $('.product').css( "border-top","1px solid #000" );
      if(!$('.info').is(':visible')) $('.product').css( "border-top","1px solid transparent" );
  });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/L5tvB/)**

# javascript - 如何将节点放在空的动态树上

> ID：10511623
> 
> 赞同：0
> 
> 时间：2012-05-09T07:30:12.730
> 
> 标签：javascript, dynatree

我在同一页面上有两个 dynatrees。树 1 有不同数量的节点，树 2 是空的。我想从树 1 中拖动一个节点并将其放在树 2 上。当树 2 不为空时，一切正常。但是，如果树 2 为空，则它根本不起作用。这是我的代码：

```
$('#tree1').dynatree({
    dnd: {
        onDragStart: function (node) {
            return true;
        }
    }
});

$('#tree2').dynatree({
    dnd: {
        onDragEnter: function (node, sourceNode) {
            return true;
        },
        onDrop: function (node, sourceNode, hitMode, ui, draggable) {
            var copyNode = sourceNode.toDict(true, function (dict) {
                delete dict.key;
            });
            node.addChild(copyNode);
        }
    }
}); 
```

谁能告诉我如何解决这个问题？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T12:59:42.683

我做了这样的事情：

```
var tree1Dragging = false,
    tree2Over = false;

$('#tree1').dynatree({
    dnd : {
        onDragStart : function(node) {
            tree1Dragging = true;
            return true;
        },
        onDragStop : function(node) {
            critDrag = false;

            if (tree2Over) {
                //TODO do your drop to tree2 process here (get the root and append the "node" to it for example)
            }
        }
    }
});

$('#tree2').dynatree({
    dnd : {
        onDragEnter : function(node, sourceNode) {
            return true;
        },
        onDrop : function(node, sourceNode, hitMode, ui, draggable) {
            var copyNode = sourceNode.toDict(true, function(dict) {
                delete dict.key;
            });
            node.addChild(copyNode);
        }
    }
});

// Add mouse events to know when we are above the tree2 div
$("#tree2").mouseenter(function() {
    if (tree1Dragging) {
        tree2Over = true;
    }
}).mouseleave(function(){
    tree2Over = false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:33:41.450

看了dynatree源码（1.2.0版本）后发现，不修改源码是无法给空树添加节点的。这是因为当您尝试将源节点拖放到目标树时，实际上是将源节点拖放到目标节点/之前/之后，而不是目标树。因此，如果树中没有节点，dynatree 将无法工作。

# php - 使用谷歌地图获取纬度，经度失败，get_lat_long_from_address

> ID：10511624
> 
> 赞同：1
> 
> 时间：2012-05-09T07:30:24.697
> 
> 标签：php, codeigniter, google-maps, google-maps-api-3

`latitude`嗨，我正在尝试`longitude`通过`address`

```
function get_lat_long_from_address($address)
{

    $lat = 0;
    $lng = 0;

    if ($this->geocodeCaching) { // if caching of geocode requests is activated

        $CI =& get_instance();
        $CI->load->database(); 
        $CI->db->select("latitude,longitude");
        $CI->db->from("geocoding");
        $CI->db->where("address", trim(strtolower($address)));
        $query = $CI->db->get();

        if ($query->num_rows()>0) {
            $row = $query->row();
            return array($row->latitude, $row->longitude);
        }

    }

    $data_location = "http://maps.google.com/maps/api/geocode/json?address=".str_replace(" ", "+", $address)."&sensor=".$this->sensor;
    if ($this->region!="" && strlen($this->region)==2) { $data_location .= "&region=".$this->region; }
    $data = file_get_contents($data_location);

    $data = json_decode($data);

    if ($data->status=="OK") {

        $lat = $data->results[0]->geometry->location->lat;
        $lng = $data->results[0]->geometry->location->lng;

        if ($this->geocodeCaching) { // if we to need to cache this result
            $data = array(
                "address"=>trim(strtolower($address)),
                "latitude"=>$lat,
                "longitude"=>$lng
            );
            $CI->db->insert("geocoding", $data);
        }

    }

    return array($lat, $lng);

} 
```

问题是我传递给函数的任何地址，它只返回`(0,0)` 纬度和经度。

我通过了地址

```
$address = "colombo,sri lanka"; 
$address = "colombo,LK";
$address = "newyork,United states";
$address = "1/35 amunugama gunnena,kandy,sri lanka"; 
```

但每次回来`(0,0)` ，

这是为什么，我需要使用什么地址格式，请帮忙。提前致谢 .........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:42:09.900

我不确定您得到的确切值和 URL，所以我在浏览器中尝试使用您输入的 URL

[http://maps.google.com/maps/api/geocode/json?address=colombo,sri+lanka&sensor=true](http://maps.google.com/maps/api/geocode/json?address=colombo,sri+lanka&sensor=true)

这给出了正确的结果。

确保您的 URL 正确创建。

要查看调试输出，可以打印 print_r ($data);

此外，建议将 CodeIgniter 放入您的标签列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-16T01:48:30.777

您的地址格式应该是这样的“13 Telfer Court Rowville VIC 3178 Australia”试试这个对我有用

# c# - 如何在文本文件中添加标题

> ID：10511628
> 
> 赞同：1
> 
> 时间：2012-05-09T07:30:57.693
> 
> 标签：c#, vb6

如何在文本文件中添加/附加现有数据的文本开头。基本上我需要在文本文件中的这些数据之前提供一个标题。此标头是动态数据。请注意，此数据来自外部源或 SQL 包或来自某个地方。因此，在文本文件中获取数据后，我想在文本文件的现有条目/数据中提供用逗号分隔的标题文本。

我有一个文本文件中的示例数据，如下所示：

```
123,"SAV","CBS123",2010-10-10 00:00:00
456,"CUR","CBS456",2012-02-01 00:00:00 
```

要添加的标题文本：

```
HDR<TableName><DateTime> 
```

我需要的输出如下： TableName: **Account** DateTime: **2012-05-09 12:52:00**

```
HDRAccount2012-05-09 12:52:00
123,"SAV","CBS123",2010-10-10 00:00:00
456,"CUR","CBS456",2012-02-01 00:00:00 
```

请帮助我如何在两种语言 VB6.0、C#.NET 中获得相同的结果

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T07:36:15.320

请注意，从技术上讲，您不能“插入”到文件中并让所有内容“向下移动”。最好的办法是读取文件并用新行重写它。这是一种有效的方法：

```
static void InsertHeader(string filename, string header)
{
    var tempfile = Path.GetTempFileName();
    using (var writer = new StreamWriter(tempfile))
    using (var reader = new StreamReader(filename))
    {
        writer.WriteLine(header);
        while (!reader.EndOfStream)
            writer.WriteLine(reader.ReadLine());
    }
    File.Copy(tempfile, filename, true);
    File.Delete(tempfile);
} 
```

归功于[这个想法的答案](https://stackoverflow.com/questions/2401523/how-to-insert-row-in-first-line-of-text-file)，但改进到足以使其值得单独发布。

现在，如果您想要接受表名和日期时间的东西，只需将其添加为第二个函数：

```
static void InsertTableHeader(string filename, string tableName, DateTime dateTime)
{
    InsertHeader(filename, 
                 String.Format("HDR{0}{1:yyyy-MM-dd HH:MM:ss}", 
                 tableName, 
                 dateTime));
} 
```

因此，只需`InsertHeader(filename, "Account", DateTime.Now)`根据需要拨打电话或类似电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:45:54.723

```
var fn = @"c:\temp\log.csv";
var hdr1 = "Account";
var hdr2 = "2012-05-09 12:52:00";
System.IO.File.WriteAllText(fn, System.String.Format("HDR {0} {1}\n{2}", hdr1, hdr2, System.IO.File.ReadAllText(fn))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:48:42.187

```
String[] headerLines = new String[]{"HDR<TableName><DateTime>"};
String filename = "1.txt";
var newContent = headerLines.Union(File.ReadAllLines(filename));
File.WriteAllLines(filename, newContent); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T02:24:06.813

衙门答案的VB6翻译。航空代码！我没有编译这个，更不用说运行它了！

```
Sub InsertHeader(ByVal filename As String, ByVal header As String) 
  Dim tempfile As String 
  Dim readUnit As Integer 
  Dim writeUnit As Integer

  tempfile = "c:\tempfile" '' TODO generate better temporary filename - 
                '' here is a link to help with getting path of temporary directory 
                ''  http://vb.mvps.org/samples/SysFolders 

  readUnit = FreeFile 
  Open filename For Input As #readUnit 
  writeUnit = FreeFile 
  Open tempfile For Output As #writeUnit 

  Print #writeUnit, header
  Do Until Eof(readUnit) 
    Dim nextLine As String 
    Line Input #readUnit, nextLine 
    Print #writeUnit, nextLine 
  Loop

  Close readUnit 
  Close writeUnit 

  Kill filename
  FileCopy tempfile, filename 
  Kill tempfile  
End sub 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-09T07:42:57.730

您可以按照第一个答案的相反顺序执行此操作，这意味着首先将标题写入文本文件，然后以追加模式打开该文本文件，然后写入数据..以追加模式打开文件使用以下代码行：

```
 FileStream aFile = new FileStream(filePath, FileMode.Append,
   FileAccess.Write);       
   StreamWriter sw = new StreamWriter(aFile);       
   sw.Write(text);        
   sw.Close();       
   aFile.Close(); 
```

# android - 某些三星设备上的编辑文本有限？

> ID：10511629
> 
> 赞同：1
> 
> 时间：2012-05-09T07:31:04.027
> 
> 标签：android, samsung-mobile

我正在尝试从 sdcard 读取长文本到 Android 中的编辑文本。在几乎所有设备上，这都非常有效，除了一些三星设备。当我尝试读取超过 10kb 的任何内容时，我读取的字符串也会获取整个文件。当我尝试将其添加到edittext 时，它在 10kb 处被截断。即使我把它放在一个循环中，试图在附加的时候添加一点点，它仍然不会增加超过 10kb。

在我尝试过的每部手机上，在 HTC、索尼爱立信、nexus 手机上都可以使用，但 Galaxy S... 手机都无法做到。

这有发生在其他人身上吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:45:45.393

在网络上第 20 次发布此问题后 10 分钟没有任何答案，我自己找到了！

在您的布局文件中，在 EditText 中，添加 android:maxLength="some high value" 并且它可以工作！

有趣的是，大多数其他设备没有限制，而一些三星手机对编辑文本有限制！

# eclipse - Maven 插件安装在 Eclipse 中，缺少要求：org.eclipse.platform.feature.group 3.6.0

> ID：10511631
> 
> 赞同：3
> 
> 时间：2012-05-09T07:31:13.750
> 
> 标签：eclipse, maven, m2e

我的eclipse版本是靛蓝。我从 Eclipse 安装/更新安装 Maven 插件：

help ---> install new software ---> add, URL: [http://download.eclipse.org/technology/m2e/releases](http://download.eclipse.org/technology/m2e/releases) 显示“Maven Integration for Eclipse”，我选择了“next”，然后，报错发生：

`Cannot complete the install because one or more required items could not be found. Software being installed: m2e - Maven Integration for Eclipse 1.0.100.20110804-1717 (org.eclipse.m2e.feature.feature.group 1.0.100.20110804-1717) Missing requirement: m2e - Maven Integration for Eclipse 1.0.100.20110804-1717 (org.eclipse.m2e.feature.feature.group 1.0.100.20110804-1717) requires 'org.eclipse.platform.feature.group 3.6.0' but it could not be found`

我不知道什么是“org.eclipse.platform.feature.group 3.6.0”，我试图搜索安装它，但我不能。

希望得到您的回应。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:43:52.647

请尝试使用此 URL 而不是您的：http: [//m2eclipse.sonatype.org/sites/m2e/](http://m2eclipse.sonatype.org/sites/m2e/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T08:19:02.203

为什么不使用 Eclipse Marketplace？`Help -> Eclipse Marketplace...`然后安装`Maven Integration for Eclipse`和可选`Maven Integration for Eclipse WTP`。这个对我有用。

# mysql - C编译器找不到头文件

> ID：10511634
> 
> 赞同：1
> 
> 时间：2012-05-09T07:31:19.457
> 
> 标签：mysql, c, path, compiler-errors, header-files

我正在尝试使用此命令行进行编译（在 OSX 中）：

`gcc -Wall upload-comments.c -l -o upload-comments -I/usr/local/mysql/include/ -L/usr/local/mysql/lib/ -lmysqlclient`

它返回错误：

`upload-comments.c:14:20: error: mysql.h: No such file or directory`

`mysql.h`显然在`/usr/local/mysql/include/`

为什么找不到头文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:34:49.673

您需要将该`-I...`位放在需要它的源文件*之前。*

```
gcc -Wall
    -I/usr/local/mysql/include/
    upload-comments.c
    -l
    -o upload-comments
    -L/usr/local/mysql/lib/
    -lmysqlclient 
```

该`gcc`命令对位置敏感，对于库*和*库（例如，您应该在需要它们的文件*之后列出库）。*

我也不确定为什么你有一个裸库名称说明符（`-l`没有实际的库名称）。这似乎可能会给我带来问题，但这与提出的具体问题无关。

如果在根据此答案修复命令后仍有问题，则可能需要将其删除。

# c# - 排序 DataGridView

> ID：10511643
> 
> 赞同：1
> 
> 时间：2012-05-09T07:31:44.977
> 
> 标签：c#, datagridview

我已将 DataGridView 的列设置为 SortMode = DataGridViewColumnSortMode.Automatic; 但是在单击单元格标题时，它不会对其进行排序

Deos有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:35:21.853

在datagridview中有一个方法Sort

```
dataGridView1.Sort(dataGridView1.Columns["yourcol"],ListSortDirection.Ascending); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:50:18.213

您的数据源必须是可排序的

DataTable/DataView 是可排序的

列表本身不可排序（按属性）

看看这里： http: [//www.codeproject.com/Articles/31418/Implementing-a-Sortable-BindingList-Very-Very-Quic](http://www.codeproject.com/Articles/31418/Implementing-a-Sortable-BindingList-Very-Very-Quic)

# youtube-api - Youtube js API - 及时向后搜索不起作用

> ID：10511645
> 
> 赞同：0
> 
> 时间：2012-05-09T07:31:48.377
> 
> 标签：youtube-api

在时间上向前寻找是有效的。例如，如果我 seekTo(160)，它就有效。但是，如果我尝试向后搜索 seekTo(30)，它会返回到 160。这发生在歌剧、铬；像在Firefox中一样工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:28:46.240

```
player.seekTo(duration, true); 
```

只需将`allowSeekAhead`值设置为`true`，它应该可以工作。它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:00:28.633

你描述的我有同样的问题。我不知道它是否有帮助，但我发现在您查询 API 的视频持续时间后，寻找上一个位置似乎工作......

我需要做一个“重播”之类的事情，所以我所做的是：

```
var duration = player.getDuration();
player.seekTo(duration-duration, false); // equals to video exact start time which should be the same as 0
player.playVideo(); 
```

我的测试表明这样做

```
 player.seekTo(0, false); 
```

在查询持续时间后正在工作，但我不想冒险:-)

# python - 在 Ubuntu 11.10 的 virtualenv 中安装“numpy”

> ID：10511646
> 
> 赞同：6
> 
> 时间：2012-05-09T07:31:53.053
> 
> 标签：python, numpy, packages, virtualenv, pip

`numpy`使用安装时出现以下异常`easy_install numpy`，有人可以帮忙吗？无论我使用`pip`还是`easy_install`，我都遇到了同样的问题。很难理解出了什么问题。

```
non-existing path in 'numpy/core': 'build/src.linux-x86_64-2.7/numpy/core/src/multiarray'
non-existing path in 'numpy/core': 'build/src.linux-x86_64-2.7/numpy/core/src/umath'
numpy/core/src/multiarray/scalartypes.c.src:2549:1: warning: ‘longlong_arrtype_hash’ defined but not used [-Wunused-function]
numpy/core/src/multiarray/mapping.c:74:1: warning: ‘_array_ass_item’ defined but not used [-Wunused-function]
build/src.linux-x86_64-2.7/numpy/core/include/numpy/__ufunc_api.h:226:1: warning: ‘_import_umath’ defined but not used [-Wunused-function]
gcc: internal compiler error: Killed (program cc1)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.
numpy/core/src/multiarray/scalartypes.c.src:2549:1: warning: ‘longlong_arrtype_hash’ defined but not used [-Wunused-function]
numpy/core/src/multiarray/mapping.c:74:1: warning: ‘_array_ass_item’ defined but not used [-Wunused-function]
build/src.linux-x86_64-2.7/numpy/core/include/numpy/__ufunc_api.h:226:1: warning: ‘_import_umath’ defined but not used [-Wunused-function]
gcc: internal compiler error: Killed (program cc1)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.
error: Setup script exited with error: Command "gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Inumpy/core/include -Ibuild/src.linux-x86_64-2.7/numpy/core/include/numpy -Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/include -I/usr/include/python2.7 -Ibuild/src.linux-x86_64-2.7/numpy/core/src/multiarray -Ibuild/src.linux-x86_64-2.7/numpy/core/src/umath -c numpy/core/src/multiarray/multiarraymodule_onefile.c -o build/temp.linux-x86_64-2.7/numpy/core/src/multiarray/multiarraymodule_onefile.o" failed with exit status 4
/tmp/easy_install-l43x51/numpy-1.6.1/numpy/distutils/misc_util.py:252: RuntimeWarning: Parent module 'numpy.distutils' not found while handling absolute import
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/usr/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/tmp/easy_install-l43x51/numpy-1.6.1/numpy/distutils/misc_util.py", line 252, in clean_up_temporary_directory
ImportError: No module named numpy.distutils
Error in sys.exitfunc:
Traceback (most recent call last):
  File "/usr/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/tmp/easy_install-l43x51/numpy-1.6.1/numpy/distutils/misc_util.py", line 252, in clean_up_temporary_directory
ImportError: No module named numpy.distutils 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T23:10:09.903

也许 GCC 没有更新。我刚刚做了一个`apt-get upgrade gcc`并`numpy`成功编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:14:07.747

您只需要使用此命令而不是 easy_install。为我工作

```
sudo apt-get install python-numpy python-scipy 
```

# c# - 如何将 Windows 窗体添加到网页？

> ID：10511649
> 
> 赞同：0
> 
> 时间：2012-05-09T07:32:01.350
> 
> 标签：c#, asp.net, winforms, visual-studio

我是 .NET 的新手，所以我有一个基本问题要问，有没有办法将 Windows Forms 应用程序添加到我的网页，因为创建表单很容易，我现在以表单格式创建了我的应用程序，我想将它们添加到asp.net 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:36:30.340

这是另一回事，但您可能想研究silverlight 浏览器外技术。

[http://www.silverlight.net/learn/overview/out-of-browser-applications/out-of-browser-applications-(silverlight-quickstart](http://www.silverlight.net/learn/overview/out-of-browser-applications/out-of-browser-applications-(silverlight-quickstart) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:45:38.793

花时间在[w3schools.com](http://www.w3schools.com)上学习`<form>`标签。然后逐渐转向使用 C# 在后端处理数据，一个好的起点可以是[http://www.deitel.com/articles/csharp_tutorials/20060128/index.html](http://www.deitel.com/articles/csharp_tutorials/20060128/index.html)

很长的路要走..首先让你的基础正确！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:34:26.810

不能在 Web 表单中添加 Windows 表单。它们完全是一种不同的技术。您可以在 Web 应用程序中添加链接以下载 Windows 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:38:30.150

如果你有 html 的基础知识，那么你也可以学习 asp.net 的[基础知识](http://www.w3schools.com/aspnet/aspnet_forms.asp)。然后，您可以轻松地创建一个与您的 Windows 窗体完全匹配的 Web 窗体。但请始终牢记，Web 窗体不如 Windows 窗体灵活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:52:05.437

嗯......你可以做一些类似的事情。

您可以将您的 windows-form 添加到 BHO 并将其作为 ActiveX 对象（对于 IE）或扩展名（在其他浏览器中）安装在您的 webBrowser 中，然后将其共享给您想要的每个人。然后您的 win-form 应用程序可以启动并与您的网页交互。您可以从这里开始查看：http: [//msdn.microsoft.com/en-us/library/bb250436 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb250436(v=vs.85).aspx)

希望它有所帮助。

# python - Qt - QComboBox 的 dropEvent 未被调用

> ID：10511654
> 
> 赞同：0
> 
> 时间：2012-05-09T07:32:14.930
> 
> 标签：python, qt, pyqt

显然，到目前为止，所有人都在问这个话题，但总的来说，我对拖放没有问题，但只有 QComboBox。QLineEdit 工作得很好。

这些是相关的代码：

```
class DragDropTextField(QtGui.QLineEdit):
    def __init__(self, title, parent):
        super(DragDropTextField, self).__init__(title, parent)
        self.setAcceptDrops(True)

    def dragEnterEvent(self, e):
        print 'dragEnterEvent'
        e.accept()

    def dropEvent(self, e):
        print 'dropEvent'

class DragDropCombo(QtGui.QComboBox):
    def __init__(self, parent):
        super(DragDropCombo, self).__init__(parent)
        self.setAcceptDrops(True)

    def dragEnterEvent(self, e):
        print 'dragEnterEvent'
        e.accept()

    def dropEvent(self, e):
        print 'dropEvent' 
```

# ios - 什么时候调用： - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

> ID：10511655
> 
> 赞同：1
> 
> 时间：2012-05-09T07:32:20.913
> 
> 标签：ios, uitableview

当动态添加 TableViewController 的单元格时，何时调用 cellForRowAtIndexPath？是在 ViewDidLoad 之后吗？我们从不以编程方式触发任何事情来告诉应用程序我们已经完成了我们需要做的所有初始工作，现在您可以开始添加具有相应详细信息、讨论等的单元格......

我非常困惑，因此我不知道 TableViewController 中控件的执行流程。请帮我 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:37:28.643

仅当表存在时才会调用 tableView 的委托调用，要使表存在，视图必须存在，因为它是视图的一部分。在创建视图后立即调用 viewDidLoad。简而言之：**viewDidLoad 在 tableView:cellForRowAtIndexPath: 之前被调用**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T07:36:48.250

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`是 a 的委托方法`UITableView`。每次单元格变得可见时都会调用它（例如，由于滚动而出现在屏幕上）。

并且在开始时，它会`viewDidLoad`根据需要多次调用（取决于应该存在多少个单元格）。

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T07:39:05.413

它是在 viewDidLoad 之后调用的，是的，它是为每个单元格动态调用的。您可以放置​​断点并检查流程。希望能帮助到你。快乐编码:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T07:40:51.177

tableview 知道当它被取消归档时它需要加载它的数据。

作为一般提示，如果您想知道某个方法何时执行，您可以设置一个断点。Xcode 允许您在遇到断点时选择是暂停还是继续，因此您可以在遇到不同方法时触发一组操作，以找出它们发生的顺序。

# regex - Perl 文本提取

> ID：10511659
> 
> 赞同：0
> 
> 时间：2012-05-09T07:32:35.733
> 
> 标签：regex, perl

我只需要提取每个项目中的数字并单独存储它们，最好的方法是什么？如果数据类似于
p °c 4'i
应用数据使用统计
E
iii
！12:12PM
接收数据
发送数据
当前使用情况
598KB
28KB
626KB :18%
获取当前状态浏览器应用程序
J
电池电量

我试过这个，但在这种情况下我只得到 18 作为输出。

```
foreach my $line (@lines) {
if ($line =~/ :[ ]*(\d+)[ ]*(KB|%)/) {

$value = $1;
print "the value is $value\n";
    push (@array, $1);
} 
```

}

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:34:43.277

遍历每一行，并使用正则表达式

```
foreach my $line (@lines) {
    if ($line =~ /(\d+)/) {
        push (@array, $1);
    }
} 
```

您将拥有`@array`数组中的所有数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:52:16.117

这是一种方法。请注意，它不关心根据您的要求提取哪种数字。

它将冒号上的行拆分为最多两个字段，键和值。然后我们从值中提取数字并插入到哈希中。这部分将有效地跳过所有值不包含数字的行。这也是您要插入更严格检查的地方，例如`if ($value =~ /(\d+)\s*KB/i)`，只会捕获后面跟着的数字`KB`（我选择添加不区分大小写）。

```
use strict;
use warnings;
use Data::Dumper;

my %hash;

while (<DATA>) {
    my ($key, $value) = split /\s*:\s*/, $_, 2;
    if ($value =~ /(\d+)/) {
        $hash{$key} = $1;
    }
}
print Dumper \%hash;

__DATA__
Received data : 598 KB
Sent data : 28 KB
Current usage : 626 KB
Battery Level : 35 % 
```

**输出：**

```
$VAR1 = {
          'Sent data' => '28',
          'Current usage' => '626',
          'Battery Level' => '35',
          'Received data' => '598'
        }; 
```

# jsf-2 - JSF2.0 中的条件导航

> ID：10511660
> 
> 赞同：0
> 
> 时间：2012-05-09T07:32:37.463
> 
> 标签：jsf-2

是否可以使用 faces-config 2.0 中的导航规则在 JSF2.0 中进行条件导航？
例如 -

```
<navigation-rule>
    <from-view-id>/payeeSearch.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>details</from-outcome>
        <if>#{payeeParticularsController.selectedFolioNo != null}</if>
        <to-view-id>/payeeParticulars.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:46:03.767

是的

看看[JSF 2.0 中的这个条件导航规则](http://www.mkyong.com/jsf2/conditional-navigation-rule-in-jsf-2-0/)

和这个

[JSF 2 中的流畅导航](http://java.dzone.com/articles/fluent-navigation-jsf-2)

和这个

[学习 JSF2：导航](http://mkblog.exadel.com/2009/09/learning-jsf2-navigation/)

* * *

[谷歌](https://www.google.com/search?q=conditional%20navigation%20in%20jsf2&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)很棒不是吗？

# c++ - visual studio 2010: error code -2146232576 (0x80131700)

> ID：10511661
> 
> 赞同：2
> 
> 时间：2012-05-09T07:32:39.033
> 
> 标签：c++, visual-c++

I have to convert a C++ project from visual studio 2008 running on Windows XP to 2010 running on Seven. Compilation seems to run perfectly but during the debugging I have an error: "The program 'App.exe : Native' has exited with code -2146232576 (0x80131700)." After a few researches on the internet I found out that the issue is in relation with .NET. I tried to update my windows with hidden updates, check what the .NET version target is 4 and a few more things that doesn't work...

Has anyone ever encountered this issue ? Thanks a lot. EDIT: it is a **managed** C++ project

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:03:53.893

这是一个低级 .NET 初始化错误，无法加载 CLR。这很难解释，因为您可以毫无问题地运行 VS2010，并且它已经使用 .NET 版本 4。唯一正确的猜测是您实际上使用的是 C++ 项目（不是 C++/CLI 项目）并且它本身会加载 CLR . 并要求旧版本，如 1.1，未安装在机器上。在代码中搜索“CorBindToRuntime”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:08:59.873

您最近是否安装了所有 Windows 更新？如果没有，请这样做 - 似乎是一些与 .NET 相关的一般错误 - 请参阅： [http ://social.msdn.microsoft.com/Forums/ta/wlgeneraldev/thread/8f9d610f-92b2-4262-8e1a-88cee8428aed](http://social.msdn.microsoft.com/Forums/ta/wlgeneraldev/thread/8f9d610f-92b2-4262-8e1a-88cee8428aed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T03:23:40.853

您正在运行我认为的本机代码？你是？如果是这种情况，则此错误是由其他原因引起的。

如果您使用的是托管 C++，那么您会遇到与 .Net 框架相关的问题。

请记住，返回的一些错误编号可能（并且确实）表明不同的原因，具体取决于返回错误的人。

提供更多关于你的应用程序在做什么以及它是用什么语言编写的信息肯定会帮助解决隔离问题。

# javascript - Face detection and face recognition technology in phoneGap

> ID：10511669
> 
> 赞同：6
> 
> 时间：2012-05-09T07:33:05.877
> 
> 标签：javascript, cordova

I want to measure a face parts like distances between two eyes, nose, lips length and height. for that i like to use one template.

Please let me know if there is any way to implement this technology in Phonegap framework.

Do any phonegap-plugin available in market. OR give me an ideas to implement such tool.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:40:15.170

我创建了一个 iOs 插件。它返回一组面孔每个面孔都有面孔矩形以及眼睛和嘴巴点

[人脸检测插件](http://goo.gl/mCVij)

# python - 在 Python 中刷新套接字

> ID：10511672
> 
> 赞同：4
> 
> 时间：2012-05-09T07:33:25.343
> 
> 标签：python, sockets, flush

一旦发送请求并且正确获取了信息，python中有没有办法刷新套接字？

我有一个用于在不同时间发送不同命令的套接字，所以我只是想知道这是否可能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:59:40.090

一般来说，答案不是——你不能刷新 TCP 套接字。这一切都在 TCP 的控制之下。看看[这个问题以获取更多信息](https://stackoverflow.com/questions/855544/is-there-a-way-to-flush-a-posix-socket)

# service - Oracle Hyperion Foundation Services 11.1.2.1

> ID：10511673
> 
> 赞同：0
> 
> 时间：2012-05-09T07:33:29.503
> 
> 标签：service, foundation, hyperion

I am new in Oracle Hyperion and I am going to download Oracle Hyperion Foundation Services 11.1.2.1 documentation.

I have searched it but I did not get write documentation. If you have any Idea please help me.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:54:57.773

[http://docs.oracle.com/cd/E17236_01/index.htm](http://docs.oracle.com/cd/E17236_01/index.htm)

最新的是 11.1.2.2，但您也可以找到以前版本的文档。

# asp.net-mvc - 当 id 为空时，ASP.NET MVC 抛出错误

> ID：10511676
> 
> 赞同：3
> 
> 时间：2012-05-09T07:33:37.263
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个*公开*可用的控制器（该操作**不能**隐藏在任何安全属性下）。控制器也有一个*公开*可用的操作。

以下是控制器的示例结构：

```
 public SomeController : Controller {

       [HttpGet] 
       public ActionResult show(int id){

       }

 } 
```

该操作有一个`id`必填字段。`id`但是，当有人在没有 required 的情况下输入格式错误的 URL 时（或者当搜索引擎机器人点击带有 required 的 URL 时） ，会引发一个不必要的错误，该错误会添加到日志中`id`。

处理此解决方案的理想解决方案应该是什么。

我想到的可能的解决方案是：

*   将 id 设置为 Nullable (int?id) 并通过将调用者重定向到显示适当错误的其他页面来显式处理没有值的情况
*   **显式**发送 404 错误

有没有使用属性的通用方法来做到这一点？

PS：（具体来说）我的意思是写 if else 条件来处理每个控制器的这种情况。

我将不胜感激任何正确方向的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:37:35.893

你需要一个路由约束。这将有助于路由器更早地抛出 URL（导致 404）而不是更晚（路由有效，执行操作，因为缺少参数而导致操作 barfs）。

[http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)

默认路由示例（可能替换 global.asax.cx 中的现有路由）：

```
// order is important; more specific routes to less specific routes is what you want
//
// default index action, with no ID
routes.MapRoute(
    "Default_Index",
    "{controller}/",
    new {controller="Home", action="Index"}
 );

// default create action, with no ID
routes.MapRoute(
    "Default_Create",
    "{controller}/Create",
    new {controller="Home", action="Create"}
 );

// default action requiring an ID (such as EDIT)
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new {controller="Home", action="Index"},
    new {id = @"\d+" }
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:56:02.110

I would suggest to return 404 status with a custom error page because some one is requesting a resource that doesn't exists.

You can make it as a Nullable type, if it can return a result which represents that request otherwise return 404 status.

For e.g. action method `Index(int? id)` could return list of items, if id is null or return that specific item. Depending on your business scenario.

# html - CSS Wrapping rows of s 问题

> ID：10511678
> 
> 赞同：2
> 
> 时间：2012-05-09T07:33:39.947
> 
> 标签：html, css

我有这个数据：

```
<div id="results">
  <span id="row">
    <span id="left">left column</span>
  <span id="middle">middle text</span>
  <span id="right">right stuff</span>
  </span>
</div>
```

我试图效仿这一点：

[![](../Images/9ed2dfbb592b3c74d8d6e2c61bb9340f.png)](https://i.stack.imgur.com/ZLo8x.jpg)

这是我的 CSS 代码：

```
#results {
  width: 700px;
  margin: 0px auto;
  border: 1px solid black;
}

#row {
  width: 85%;
  margin: 0px auto;
  border: 2px solid green;
}

#left {
  float: left;
  width: 200px;
  margin: 5px 5px 5px 5px;
  border: 1px solid blue;
}

#middle {
  float: left;
  width: 200px;
  margin: 5px 5px 5px 5px;
  border: 1px solid blue;
}

#right {
  float: left;
  width: 200px;
  margin: 5px 5px 5px 5px;
  border: 1px solid blue;
}
```

```
<div id="results">
  <span id="row">
        <span id="left">left column</span>
  <span id="middle">middle text</span>
  <span id="right">right stuff</span>
  </span>
</div>
```

问题是，结果是这样的！

[![](../Images/db39641da1b89eb3c0ec685a24bc14c8.png)](https://i.stack.imgur.com/tH3R8.jpg)

它看起来很好，除了右侧跨度块的右侧，那个绿色块应该是`#row`包装器。为什么它不按应有的方式包装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:39:29.843

定义`display:block`或`display:inline-block`到您的`#row` **跨度**因为**跨度**是默认情况下`inline element`不采用`width`&的一个。`height`

检查这个[http://jsfiddle.net/2xufx/](http://jsfiddle.net/2xufx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:49:07.443

也许这可以帮助你

```
<html>
<head>
<style type='text/css'>
    #results    {width: 700px; margin: 0px auto; border: 1px solid black; min-height: 50px;}
    #row        {width: 92%; margin: 0px auto; border: 2px solid green; min-height: 30px;}
    #left       {float: left; width: 200px; margin:5px 5px 5px 5px; border: 1px solid blue;}
    #middle     {float: left; width: 200px; margin:5px 5px 5px 5px; border: 1px solid blue;}
    #right      {float: left; width: 200px; margin:5px 5px 5px 5px; border: 1px solid blue;}

</style>
</head>
<body>
<div id="results">
<div id="row">
<span id="left">left column</span>
<span id="middle">middle text</span>
<span id="right">right stuff</span>
</div>
<div id="row">
<span id="left">left column</span>
<span id="middle">middle text</span>
<span id="right">right stuff</span>
</div>
</div>
</body>
</html> 
```

我得到它的输出

![在此处输入图像描述](../Images/27946af93a260afbfdd94637e6c78d1f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:42:17.667

您需要添加`overflow: auto`到`#results`和`#row`定义中，并且您还需要添加`display: block`到`#row`（或仅使其成为例如 a 的块元素`<div/>`）以使其工作。

CSS：

```
#results    { width: 700px; margin: 0 auto; border: 1px solid black; overflow: auto; }
#row        { display: block; width: 85%; margin: 0 auto; border: 2px solid green; overflow: auto;  }
#left       { float: left; width: 200px; margin:5px 5px 5px 5px; border: 1px solid blue; }
#middle     { float: left; width: 200px; margin:5px 5px 5px 5px; border: 1px solid blue; }
#right      { float: left; width: 200px; margin:5px 5px 5px 5px; border: 1px solid blue; }​ 
```

请参阅此处的工作[jsfiddle](http://jsfiddle.net/Gvatg/)。

但请记住，宽度 (200px) + 边框 (2px) + 边距 (10px) = 212px，乘以 3 = 636px，700px 的 85% 是 595px，这就是它不适合的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T07:42:51.710

因为内部元素正在使用，所以`float`您必须“重置”。例如，通过`overflow: hidden;`在父级上使用。

此外，您正在尝试在`inline`元素 ( `span`) 上设置宽度，这是无法完成的。将其更改为`block`或`inline-block`。

# google-maps - 如何导出谷歌地图数据并理解它们以创建新的导航软件

> ID：10511680
> 
> 赞同：0
> 
> 时间：2012-05-09T07:33:43.497
> 
> 标签：google-maps, navigation

我想创建一个导航软件，我需要强大的地图。如何导出谷歌地图数据并理解它们以创建新的导航软件？是否违法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:42:57.670

您无法导出 Google 地图数据。事实上，你甚至不允许缓存它们：

> 使用 Google Maps 或 Earth API 时，您不得缓存任何图像或其他内容。Google 会不断更新地图和地球中的图像；因此，缓存可能会导致图像陈旧甚至不被允许。有关详细信息，请阅读[Maps/Earth API 服务条款的](https://developers.google.com/maps/terms?hl=en)第 10.3.1 节。

所有谷歌地图的使用都必须通过适当的谷歌地图 API，如果这是你要去的地方，该 API 特别禁止转弯导航。

作为替代方案，您可以尝试[openstreetmap.org](http://openstreetmap.org)并查看他们的[API 使用政策](http://wiki.openstreetmap.org/wiki/API_usage_policy)

[基本上你可以从各种planet.osm镜像](http://wiki.openstreetmap.org/wiki/Planet.osm)下载整个星球作为矢量化数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:41:20.913

您可能想先阅读此[http://maps.google.com/help/terms_maps.html](http://maps.google.com/help/terms_maps.html)：

> 除非您已获得 Google（或，如适用，特定内容的提供者）的事先书面授权，否则您不得： (a) 复制、翻译、修改或制作内容或其任何部分的衍生作品；(b) 重新分发、再许可、出租、发布、出售、转让、租赁、营销、转让或以其他方式将产品或内容提供给第三方；(c) 反向工程、反编译或以其他方式试图提取服务或其任何部分的源代码，除非适用法律明确允许或要求

换句话说，你不能提取他们的数据。

# asihttprequest - 现在 asihttprequest 的所有者停止了该项目的工作该怎么办？

> ID：10511686
> 
> 赞同：0
> 
> 时间：2012-05-09T07:34:05.447
> 
> 标签：asihttprequest

既然 ASIHTTPRequest 的所有者不再在该库上工作，是否还有其他替代方案与该库一样好？

或者也许他们的[github](https://github.com/pokeb/asi-http-request)上的存储库会被更新？通过，也许其他受过良好教育的项目的人（至少知识渊博的人仍然会继续工作）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:05:41.783

如果您查看[https://github.com/pokeb/asi-http-request/commits/master](https://github.com/pokeb/asi-http-request/commits/master)，您会发现它已经更新，因为所有者停止了它的工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T06:18:26.310

我会推荐 AFNetworking 作为通用网络库的最佳支持选项

[http://afnetworking.com](http://afnetworking.com)

如果您主要使用 RESTful API，那么 RestKit 是一个很棒的库，可以用来代替编写自己的胶水代码：

[http://restkit.org](http://restkit.org)

# sbt - 如何将 logback 指定为项目依赖项？

> ID：10511690
> 
> 赞同：5
> 
> 时间：2012-05-09T07:34:25.117
> 
> 标签：sbt, logback

我正在将 sbt 用于 Akka 项目。我想重定向记录器的输出。因此，我想使用 logback。

我必须添加什么`build.sbt`来管理 logback 的库依赖项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T08:04:34.590

将以下内容添加到`build.sbt`：

```
libraryDependencies += "ch.qos.logback" % "logback-classic" % "1.1.3" 
```

# c - IF 语句中的复合文字

> ID：10511695
> 
> 赞同：0
> 
> 时间：2012-05-09T07:34:40.290
> 
> 标签：c, if-statement, compound-literals

我试过这个小代码在 IF 语句中使用复合文字：

```
#include<stdio.h>

struct time
{
    int hour;
    int minutes;
    int seconds;
};

int main(void)
{
    struct time testTimes;
    testTimes = (struct time){12,23,34};

    if (testTimes == (struct time){12,23,34})
        printf("%.2i:%.2i:%.2i\n", testTimes.hour, testTimes.minutes, testTimes.seconds);
    else
        printf("try again !\n");
    return 0;
} 
```

它没有用。它在编译时给出了以下消息：

> prac.c:15:16：错误：二进制 == 的无效操作数（具有“结构时间”和“结构时间”）

是否不允许在 IF 语句中使用复合文字或语法不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:35:33.213

您不能使用 比较结构`==`。

您应该分别比较结构的每个成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T07:40:37.543

为什么不能使用`==`运算符比较结构是有充分理由的

引用[C FAQ](http://c-faq.com/struct/compare.html)

> 编译器没有很好的方法来实现与 C 的低级风格一致的结构比较（即支持结构的 == 运算符）。**一个简单的逐字节比较可以建立在结构中未使用的“洞”中存在的随机位上（这种填充用于保持后面字段的对齐正确）**。对于大型结构，逐字段比较可能需要大量重复代码。不能期望任何编译器生成的比较在所有情况下都适当地比较指针字段：例如，将 char * 字段与 strcmp 而不是 == 进行比较通常是合适的。
> 
> 如果您需要比较两个结构，则必须逐个字段编写自己的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:36:08.637

c 没有提供语言工具来进行结构的 == 比较

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T07:43:51.353

您无法比较结构。标准 ( `C11 6.5.9 Equality operators`) 规定：

> `One of the following shall hold:`
> `- both operands have arithmetic type;`
> `- both operands are pointers to qualified or unqualified versions of compatible types;`
> `- one operand is a pointer to an object type and the other is a pointer to a qualified or unqualified version of void; or`
> `- one operand is a pointer and the other is a null pointer constant.`

`struct time`不幸的是，这些都不适用于 a 。您要么必须使用`==`和单独检查字段`&&`，要么拥有可以与 比较的单独不变的结构`memcmp`。

尽管请记住，后一种建议很可能与结构中的填充信息相冲突，因此前者可能是最好的选择，除非您*知道*没有填充。.

# c# - 在控制台应用程序 (.net) 中引用 DBML 项目

> ID：10511700
> 
> 赞同：1
> 
> 时间：2012-05-09T07:34:52.120
> 
> 标签：c#, .net, visual-studio-2010, dll, console

我继承了一份软件工程工作，其中包含一个 .DBML 项目。它被 ASP.Net 网站引用为数据访问层，但我的任务是创建一个控制台应用程序，该应用程序可以利用项目中的广泛数据访问类。

但是，当我引用该项目时，我得到了智能感知，并且除了构建它之外，都会出现错误，就好像我没有引用它一样。

我对这种项目不太熟悉，对如何进行有点不知所措。过去几个小时我一直在尝试不同的东西，但似乎没有任何效果。

任何人都可以指导我如何解决这个问题，或者一篇文章可以为我指明正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:42:14.910

右键单击您的控制台应用程序，然后单击属性。将**目标框架**从 .Net Framework Client Profile 更改为 .NET Framework。

Visual Studio 的这个“功能”已经咬了很多人……我最近在它上面浪费了几乎一整天。

# php - 使用特定脚本为 Web 配置 ssl

> ID：10511701
> 
> 赞同：0
> 
> 时间：2012-05-09T07:34:55.057
> 
> 标签：php, apache, mod-rewrite

这是要添加到 httpd.conf 的配置，它从未测试过。

```
<VirtualHost facebook.domain.com:443>
    DocumentRoot "/var/www/html"
    ServerName domain.com
    ServerAlias facebook.domain.com
    ServerAdmin admin

    SSLEngine on

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW
    :+SSLv2:+EXP:+eNULL

    SSLCertificateFile "/var/www/html/server.crt"

    SSLCertificateKeyFile "/var/www/html/server.key"

    <FilesMatch "\.(cgi|shtml|phtml|php|php5|php4|php3?)$">
       SSLOptions +StdEnvVars
    </FilesMatch>

    <Directory "path/to/cgi-bin">
       SSLOptions +StdEnvVars
    </Directory>
    SetEnvIf User-Agent ".*MSIE.*" \
        nokeepalive ssl-unclean-shutdown \
        downgrade-1.0 force-response-1.0
</VirtualHost> 
```

但我想用户在浏览[http://www.domain.com/index.php?op=facebook](http://www.domain.com/index.php?op=facebook)时会自动重定向到[https://www.domain.com/index.php?op=facebook](https://www.domain.com/index.php?op=facebook)或[https:// /facebook.domain.com/index.php?op=facebook](https://facebook.domain.com/index.php?op=facebook)，如何实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:38:26.687

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这将重定向所有 http -> https 连接。您必须将其添加到 http (:80) 虚拟主机。

# javascript - 在窗口调整大小时，不要修改正文任何元素的宽度或高度

> ID：10511707
> 
> 赞同：0
> 
> 时间：2012-05-09T07:35:20.953
> 
> 标签：javascript, jquery, html, css

可以做类似的事情：当浏览器调整大小时，我不想改变 body 的任何元素的宽度和高度。我的页面中有一个大表格，当我调整大小时，我希望具有与在完整浏览器模式下加载时相同的宽度或高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:39:34.847

只需给你的桌子一个固定的宽度和高度。使用 min-width 和 min-height 它仍然会调整大小，直到它与定义的最小宽度和高度匹配

```
table
{
    width:500px;
} 
```

宽度可能不是问题，但您永远不知道表格的高度，这可能会发生很大变化，因此使用 jQuery 您可以执行以下操作：

```
var myTable = $('.table');
var myTableHeight = myTable.height();
myTable.css('height', myTableHeight); 
```

编辑：根据您的评论，这是您可以做的。您离开 200%，但在第一次加载浏览器时，您会获得表格的宽度并将其设置为固定宽度。然后它将始终保持不变。

```
<script type="text/javascript">
$(document).ready(function() {
//once the document was completely loaded get the width of the table and se it as fixed width
    var myTable = $('.table');
    var myTableWidth = myTable.width();
    myTable.css('width', myTableWidth);
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:37:02.977

使用 CSS`min-width`和`min-height`.

# android - Android中关于EditText的基本使用

> ID：10511714
> 
> 赞同：0
> 
> 时间：2012-05-09T07:35:54.413
> 
> 标签：android, android-edittext

我有一个 EditText 、一个 textView 和一个按钮，

当触摸按钮时，我需要将我的 textView 设置为我的 EditText 的值，但是我有一个变量未被识别[抱歉，这里是 android 上的菜鸟]

```
public class XynthaCalcTestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //buttons
        benefixPaButtonPressed(); 
        benefixAdultButtonPressed();
        xynthaButtonPressed(); 
        calculateButtonPressed();

        //textField == EditText
        final EditText et;
        et = (EditText)findViewById(R.id.editText1);
    }

    public void calculateButtonPressed() {
        // TODO Auto-generated method stub
        Button button = (Button) findViewById(R.id.result);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Log.d("myTag",  "result biatch");

                String text=et.getText().toString();

                Toast msg = Toast.makeText(getBaseContext(),text, Toast.LENGTH_LONG);
                 msg.show();

            }

        });

    }
} 
```

所以与`String text=et.getText().toString();` 我有错误一致`et cannot be resolved`

那么...如何声明我的 et Edit 文本以便按钮类可以看到它？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:41:51.823

相反，让 et 成为一个字段，在那里使用 final 修饰符对我来说毫无意义。

```
public class XynthaCalcTestActivity extends Activity {

    private EditText et;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //buttons
        benefixPaButtonPressed(); 
        benefixAdultButtonPressed();
        xynthaButtonPressed(); 
        calculateButtonPressed();

        //textField == EditText
        et = (EditText)findViewById(R.id.editText1);
    }

    public void calculateButtonPressed() {
        // TODO Auto-generated method stub
        Button button = (Button) findViewById(R.id.result);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Log.d("myTag",  "result biatch");

                String text=et.getText().toString();

                Toast msg = Toast.makeText(getBaseContext(),text, Toast.LENGTH_LONG);
                 msg.show();

            }

        });

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:43:56.500

将 Edittext 字段“et”定义为类变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:55:25.390

试试这个代码，它可以帮助你......

```
public class XynthaCalcTestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //buttons
   // benefixPaButtonPressed(); 
   // benefixAdultButtonPressed();
   // xynthaButtonPressed(); 
   // calculateButtonPressed();

    //textField == EditText

    final EditText editText = (EditText)findViewById(R.id.editText1);
    final TextView textView = (TextView)findViewById(R.id.textview);
    Button button = (Button)findViewById(R.id.button);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            String text = editText.getText().toString();
            textView.setText(text);
            Toast.makeText(XynthaCalcTestActivity.this,text, Toast.LENGTH_LONG).show();
        }

    });
}
} 
```

# android - PhoneGap Android 日历集成

> ID：10511717
> 
> 赞同：0
> 
> 时间：2012-05-09T07:36:06.003
> 
> 标签：android, cordova

我需要帮助集成 pf 我的手机间隙应用程序以与 android 中的本机日历进行交互。我卡在这一点上。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:30:32.313

Phonegap 不允许日历集成。在这里查看 phonegap 支持的功能： [http ://phonegap.com/about/feature](http://phonegap.com/about/feature)

您可能想看看似乎支持系统日历的 Rhomobile：http: [//docs.rhomobile.com/rhodes/device-caps#pim-calendarevents](http://docs.rhomobile.com/rhodes/device-caps#pim-calendarevents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T23:27:16.513

这个问题是很久以前提出的，但现在接受的答案并不准确。

2013 年 9 月，Eddy Verbruggen 为此创建了一个不错的 PhoneGap / Cordova 插件。
您可以在以下链接中找到所有信息： [https ://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin](https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin)

# c++ - ITaskScheduler 和 IClientSecurity 接口

> ID：10511724
> 
> 赞同：1
> 
> 时间：2012-05-09T07:36:16.753
> 
> 标签：c++, security, com, scheduled-tasks

是否有可能以某种方式从 ITaskScheduler 接口获取 IClientSecurity 指针？我需要在 ITaskScheduler 上调用 CoSetProxyBlanket，因为我从一个在经典 ASP 页面中实例化的 COM+ 对象（仅限授权用户）调用它的 ITaskScheduler 方法。但是，查询 IClientSecurity 会返回“未实现”错误。是否可以为 ITaskScheduler 加载代理？目前我无法调用 ITaskScheduler 方法而不会出现“拒绝访问”错误。

# facebook - 如何请求可选参数？

> ID：10511727
> 
> 赞同：0
> 
> 时间：2012-05-09T07:36:21.763
> 
> 标签：facebook, facebook-timeline

这是关于时间线操作的。

当我提交我的操作以供批准时，我没有要求提供可选参数。如果我想开始这样做，如何为已批准的操作请求可选参数？

还是我必须创建一个新动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:26:40.513

如果要添加可选参数，则必须删除旧操作并在启用参数的情况下提交新操作。Facebook 不允许您在操作获得批准后对其进行编辑，基本设置除外。

# php - 从 Webhost PHP 文件连接到 SQL Server 2008？

> ID：10511732
> 
> 赞同：2
> 
> 时间：2012-05-09T07:36:46.980
> 
> 标签：php, sql-server-2008

谁能指出我通过 php 从我的网站连接到 SQL Server 2008 数据库的正确方向？

我认为它与连接到 MySQL 服务器没有太大不同。请提供任何帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:42:43.300

我相信这是您需要的脚本...

更多信息请访问[http://php.net/manual/en/function.sqlsrv-connect.php](http://php.net/manual/en/function.sqlsrv-connect.php)

```
$serverName = "serverName\sqlexpress"; //serverName\instanceName
$connectionInfo = array( "Database"=>"dbName", "UID"=>"userName", "PWD"=>"password");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn ) {
     echo "Connection established.<br />";
}else{
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:41:16.750

查看 MS SQL Server PDO 界面：

*   [http://php.net/manual/en/ref.pdo-dblib.php](http://php.net/manual/en/ref.pdo-dblib.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:48:45.887

我会警告你，将 SQL Server 2008 与 PHP 连接起来并不是一件好事。我确实成功了一次，尽管它是在我的本地机器上运行 Windows 的。在此处查看有关如何将 SQL Server 2008 与 PHP 连接的 Microsoft 教程[http://msdn.microsoft.com/en-us/library/cc793139%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/cc793139%28v=sql.90%29.aspx)，下面的链接将提供指导你也是。祝你好运。 [http://hafizbadrie.wordpress.com/2010/02/16/how-to-connect-php-with-sql-server-2008/](http://hafizbadrie.wordpress.com/2010/02/16/how-to-connect-php-with-sql-server-2008/)

# javascript - iPhone Safari screen.availHeight 和状态栏/工具栏/地址栏

> ID：10511736
> 
> 赞同：9
> 
> 时间：2012-05-09T07:37:01.013
> 
> 标签：javascript, iphone, safari, screen

我试图在 iPhone Safari 中获取可用的屏幕尺寸，以便将容器缩小到屏幕的高度，减去状态栏和工具栏。

由于 iOS 总是返回屏幕尺寸，就好像手机是纵向的一样，我使用 screen.availWidth 来计算横向的高度。以下是返回的尺寸：

```
screen.width; //320
screen.availWidth; //300 
```

20px 的差异考虑了手机顶部的状态栏，但没有考虑到屏幕底部的按钮栏（工具栏）。

我可以使用任何可以返回 268px 的属性吗？

我会这样做 (screen.availWidth - 32) 但用户有可能将该站点添加为桌面书签，在这种情况下，此栏将不存在，并且 300px 值将是正确的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T08:03:57.333

我没有确切的答案，但您可以确定用户是在 Mobile Safari 中还是在具有`navigator.standalone`属性的桌面书签中。有了这个，你可以决定是否减去 32px。

**编辑：**找到答案。使用`<meta name="viewport" content="user-scalable=no, width=device-width, height=device-height" />`，然后可以从中获得正确的值`window.innerWidth / window.innerHeight`

# visual-studio - 如何避免管理员的必要性。具有 IIS 或 COM 互操作的 Visual Studio 的权限？

> ID：10511740
> 
> 赞同：1
> 
> 时间：2012-05-09T07:37:26.677
> 
> 标签：visual-studio, iis, windows-7, com-interop, uac

当 Visual Studio 在没有管理员的情况下运行时。特权和

我正在为 COM 互操作注册 .dll，错误消息是：

```
Cannot register assembly "myassembly.dll" - access denied. 
Please make sure you're running the application as administrator. 
Access to the registry key 'HKEY_CLASSES_ROOT\' is denied. 
```

我在 IIS 上运行 Web 应用程序，错误消息是：

```
The Web Application Project PSW is configured to use IIS. 
To access local IIS Web sites, you must run Visual Studio 
in the context of an administrator account. 
```

我已将 Visual Studio 设置为管理员运行以避免这些错误。但是 UAC 消息让我很恼火（但我不想关闭 UAC）。
有没有办法正常运行 Visual Studio 并使用 COM Interop 或 IIS？我的意思是，例如对注册表或 IIS 的一些访问权限，或者将 regasm 设置为以管理员身份运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:40:48.827

UAC 要求应用程序将自身拆分为标准的用户友好部分和仅限管理员的部分，然后您可以仅在需要仅管理员的部分时请求提升（动态提升）。

然而，当前的 Visual Studio 版本，2008 年、2010 年，甚至 11 Beta 仍然是单体（如单体内核，[http](http://en.wikipedia.org/wiki/Monolithic_kernel) ://en.wikipedia.org/wiki/Monolithic_kernel ）。所以现在不可能达到你想要的，你必须习惯它。

某些对注册表或 IIS 的访问权限无济于事，因为您显然对 Visual Studio 的考虑太少了 :) 它是一个更大的系统，依赖于太多的底层位。

# asp.net - 范围验证器的最小值和最大值？

> ID：10511742
> 
> 赞同：0
> 
> 时间：2012-05-09T07:37:32.730
> 
> 标签：asp.net, validation, rangevalidator

范围验证器用于字符串、整数和日期。有人可以给我它们的最小值和最大值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:40:03.300

最小和最大长度是 int 和 double 类型的 euqal 长度...

范围验证器控件是一个验证器控件，用于检查控件值是否在有效范围内。此控件所需的属性是：MaximumValue、MinimumValue 和 Type。

如果 MaximumValue 或 MinimumValue 属性指定的值无法转换为 Type 属性指定的数据类型，RangeValidator 控件将引发异常。

RangeValidator 不是一个很好的验证器来验证字符串的长度。你最好使用 RegularExpressionValidator 来验证它。

[http://forums.asp.net/t/1046041.aspx/1?how+to+use+RangeValidator+for+String+type+](http://forums.asp.net/t/1046041.aspx/1?how+to+use+RangeValidator+for+String+type+)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:59:28.127

使用该[`MaximumValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.rangevalidator.maximumvalue.aspx)属性指定验证范围的最大值。如果此属性指定的值无法转换为该属性指定的数据类型`BaseCompareValidator.Type`，则会引发异常。

因此，例如，如果您将 设置为 ，`Type`如果`Integer`值大于 ，则会引发异常[`Int32.MaxValue`](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue.aspx)。

> *如果是字符串，什么是最小值和最大值？*

这是 javascript RangeValidator 函数：

```
function RangeValidatorEvaluateIsValid(val) {
    var value = ValidatorGetValue(val.controltovalidate);
    if (ValidatorTrim(value).length == 0)
        return true;
    return (ValidatorCompare(value, val.minimumvalue, "GreaterThanEqual", val) &&
            ValidatorCompare(value, val.maximumvalue, "LessThanEqual", val));
} 
```

正如您将看到的，它比较字符串的[**ACSII 代码**](http://www.asciitable.com/)。'0' 到 '9' 的 ASCII 值是 48 到 57，'a' 到 'z' 的 ASCII 值是 97 到 122 ，'A' 到 'Z' 的 ASCII 值是 65 到 90。所以`MinimumValue`和`MaximumValue`是验证器有效的这些 ASCII 代码的下限和上限。

```
function ValidatorCompare(operand1, operand2, operator, val) {
    var dataType = val.type;
    var op1, op2;
    if ((op1 = ValidatorConvert(operand1, dataType, val)) == null)
        return false;   
    if (operator == "DataTypeCheck")
        return true;
    if ((op2 = ValidatorConvert(operand2, dataType, val)) == null)
        return true;
    switch (operator) {
        case "NotEqual":
            return (op1 != op2);
        case "GreaterThan":
            return (op1 > op2);
        case "GreaterThanEqual":
            return (op1 >= op2);
        case "LessThan":
            return (op1 < op2);
        case "LessThanEqual":
            return (op1 <= op2);
        default:
            return (op1 == op2);           
    }
} 
```

[http://forums.asp.net/t/1046041.aspx/1?how+to+use+RangeValidator+for+String+type+](http://forums.asp.net/t/1046041.aspx/1?how+to+use+RangeValidator+for+String+type+)

`RequiredFieldValidator`请注意，如果要验证空文本，则需要额外的。

# vb.net - Delphi 到 VBNet 代码转换（如何？）

> ID：10511752
> 
> 赞同：1
> 
> 时间：2012-05-09T07:38:40.010
> 
> 标签：vb.net, delphi

我有这个德尔福代码：

```
function EnDeCrypt(const Value : String) : String;
var
CharIndex : integer;
begin
    Result := Value;
    for CharIndex := 1 to Length(Value) do
    Result[CharIndex] := chr(not(ord(Value[CharIndex])));
end; 
```

如何将其翻译为.Net？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:34:42.380

如果 RRUZ 提供的功能（现已删除）确实是您想要的（而且我仍然对编码问题持怀疑态度），那么您可以这样写：

```
Private Function EnDeCrypt(ByVal Value As String) As String

    Dim transformed = Encoding.Unicode.GetBytes(Value).Select( _
        Function(item) Not item)
    Return Encoding.Unicode.GetString(transformed.ToArray())

End Function 
```

# android - 如何传输音频缓冲区以直接播放

> ID：10511753
> 
> 赞同：5
> 
> 时间：2012-05-09T07:38:42.477
> 
> 标签：android, audio, audio-recording

我试图创建一个音频缓冲区并将他送到一个新班级。在这个类中，我会用 AudioTracker 播放这个缓冲区，但它不起作用。我可以按时听到声音，但声音就像霍尔效应。我对我的错误没有想法，也没有找到这个问题的答案。我希望你能帮助我。（对不起，我的英语不是最好的）Sorcecode：

```
public class input {
private static final String TAG = "Aufnahme";
private AudioRecord recorder = null;
private boolean isRecording = false;
private int SAMPLERATE = 8000;
private int CHANNELS = AudioFormat.CHANNEL_CONFIGURATION_MONO;
private int AUDIO_FORMAT = AudioFormat.ENCODING_PCM_16BIT;
private int bufferSize = AudioRecord.getMinBufferSize(SAMPLERATE, CHANNELS,
        AUDIO_FORMAT);
private Thread recordingThread = null;

public void startRecording() {
    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, SAMPLERATE,
            CHANNELS, AUDIO_FORMAT, bufferSize);

    recorder.startRecording();
    isRecording = true;

    recordingThread = new Thread(new Runnable()

    {
        public void run() {
            writeAudioData();
        }

    });
    recordingThread.start();

}

public void stopRecording() {
    isRecording = false;
    recorder.stop();
    recorder.release();
    recorder = null;
    recordingThread = null;
}

private void writeAudioData() {

    byte data[] = new byte[bufferSize];

    while (isRecording) {

        recorder.read(data, 0, bufferSize);
        send(data);

    }
}

private void send(byte[] data) {

    int minBufferSize = AudioTrack.getMinBufferSize(8000,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);

    AudioTrack at = new AudioTrack(AudioManager.STREAM_MUSIC, 8000,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT, minBufferSize,
            AudioTrack.MODE_STREAM);

    at.play();
    at.write(data, 0, bufferSize);
    at.stop();
    at.release();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:21:09.200

好的，我发现了问题所在。霍尔效应来自实时录制的扬声器声音。糟糕的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T20:07:20.353

将数据写入`AudioTrack`对象的原因实际上是打开它，写入缓冲区，关闭并释放它，如果最小缓冲区大小如此之小，由于 AudioTrack 不断重新初始化，您实际上听不到。这就是为什么通过更改缓冲区大小来解决它的原因。如果您将其设为 8000 并且您的采样率为 8000，您将听到延迟一秒的声音。为了解决这个问题，去掉你的 send 方法并将 writeAudio 方法更改为：

private void writeAudioData() { byte data[] = new byte[bufferSize];

```
 int minBufferSize = AudioTrack.getMinBufferSize(8000,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);

    AudioTrack at = new AudioTrack(AudioManager.STREAM_MUSIC, 8000,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT, minBufferSize,
            AudioTrack.MODE_STREAM);

    at.play();

    while (isRecording) {
        recorder.read(data, 0, bufferSize);
        at.write(data, 0, bufferSize);
    }
    at.stop();
    at.release(); 
```

# iphone - Airplay恢复问题

> ID：10511754
> 
> 赞同：0
> 
> 时间：2012-05-09T07:39:00.040
> 
> 标签：iphone, ios, airplay

我正在研究 Airplay。我的 Apple TV 有问题，每当 Apple TV 上开始播放时，每次几秒钟都会显示电影的前几帧，然后在恢复点播放电影。可以直接在恢复点播放吗？另一个问题是有时它会在电视屏幕上显示“发生错误”消息。请问是什么问题？

# iphone - 如何在 uilocalnotification 中显示单个按钮

> ID：10511756
> 
> 赞同：-2
> 
> 时间：2012-05-09T07:38:59.930
> 
> 标签：iphone, ios

我正在开发一个应用程序。我需要用单个按钮显示本地通知。所以请告诉我如何在通知中显示单个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:51:33.970

从 iOS 5 开始，默认设置是使用通知中心，因此不再有带有按钮的对话框。

此外，您不应该强迫用户做某事，那是糟糕的设计。

# objective-c - 捆绑 ID 中的 $product 是什么

> ID：10511760
> 
> 赞同：0
> 
> 时间：2012-05-09T07:39:31.713
> 
> 标签：objective-c, xcode, app-store

我想将我的申请提交到应用商店。

我看到了这个屏幕截图

![在此处输入图像描述](../Images/8e297512c8de4e2cc21e5f709360d746.png)

那么什么是 ${PRODUCT_NAME:rfc1034identifier}

它是可执行文件的名称吗？

有没有办法改变它？

我应该硬编码 ${PRODUCT_NAME:rfc1034identifier} 并输入实际产品名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:48:18.197

我相信“产品”是可执行文件名称是正确的，但即使不是，硬编码捆绑 ID 也不会有任何问题，我总是这样做。（无论真假）我觉得这让这个过程更加简单。

**编辑：**这似乎是自动设置为项目的名称。

![在此处输入图像描述](../Images/72487071f35e01e47c63327d90dd8c2a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:46:13.110

这不是项目的名称。一个项目可以有多个目标，每个目标都生产不同的产品。

[PRODUCT_NAME](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW83)是一种构建设置。

# c# - 使用 HttpWebRequest 收到的截断响应

> ID：10511764
> 
> 赞同：3
> 
> 时间：2012-05-09T07:39:47.843
> 
> 标签：c#, .net, httpwebrequest, http-headers

我正在使用以下代码向网站发出 HttpWebRequests：

```
public static HttpWebResponse SendGETRequest(string url, string agent, CookieContainer cookieContainer)
{
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
   request.UserAgent = agent;
   request.Method = "GET";
   request.ContentType = "text/html";
   request.CookieContainer = cookieContainer;

   return (HttpWebResponse)request.GetResponse();
} 
```

在我尝试使用一个新网页并且只收到页面的最后一部分之前，一切都可以在几个网页上正常工作。这是收到的响应：

```
<tr> 
    <td colspan="2" height="5"><spacer type="block" width="100%" height="5"></td>
</tr>
</table>
</td>
</tr>
</table>
</body>
</html> 
```

标头是正确的，并表示只发送接收到的数据。以下是请求和响应的标头：

要求：

```
GET /Broker/Ops/FichaContratoJS.asp?nc=815044&IP=5&YY=2012&M=6&St=0&CC=FESX201206 HTTP/1.1  
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19  
Content-Type: text/html  
Host: www.xxxx.com  
Cookie: ASPSESSIONIDACBDCDBT=MGDNMNABOANDMILHBNCIDFCH;Autenticacion=Sid=230fae3d%2De0e2%2D4df1%2D8aa8%2D000fb352eaef&IdUsuarioWeb=xxxx; ASPSESSIONIDACBCCDAT=AFDJMNABAFJDDHABLOLAINDK; ASPSESSIONIDCADCBCAT=CEBJGNABLCALPJLDJFPBMLDE 
```

回复：

```
HTTP/1.1 200 OK  
Date: Wed, 09 May 2012 07:25:03 GMT  
Server: Microsoft-IIS/6.0  
X-Powered-By: ASP.NET  
Pragma: no-cache  
**Content-Length: 155**  
Content-Type: text/html  
Expires: Wed, 09 May 2012 07:24:02 GMT  
Set-Cookie: Autenticacion=Sid=230fae3d%2De0e2%2D4df1%2D8aa8%2D000fb352eaef&IdUsuarioWeb=xxxx; path=/  
Cache-control: no-cache 
```

对 Web 浏览器执行相同操作可以正常工作，并返回大约 4000 字节的内容长度。

有任何想法吗？

PD：为了以防万一，我从不同线程到同一个站点对 SendGETRequest 进行了多次调用，但由于没有共享变量，我认为它不应该有所作为。

编辑：这是我用来从流中提取文本的扩展：

```
 public static string ReadTextResponse(this Stream stream)
    {
        int count;
        Encoding enconding = System.Text.Encoding.GetEncoding(1252);
        System.Text.StringBuilder stringBuilder = new StringBuilder();
        byte[] buffer = new byte[1023];

        do
        {
            count = stream.Read(buffer, 0, buffer.Length);

            if (count != 0)
            {
                string tempString = enconding.GetString(buffer, 0, count);
                stringBuilder.Append(tempString);
            }
        }
        while (count > 0);

        return stringBuilder.ToString();
    } 
```

据我所知这是正确的。另外，**请注意来自服务器的响应标头包含截断数据的长度**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:14:03.070

我认为您没有使用正确的 HttpWebResponse 对象。

也许您没有关闭请求或阅读所有响应流。

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)

你的方法应该是：

```
public static string SendGETRequest(string url, string agent, CookieContainer cookieContainer)
    {
        var request = (HttpWebRequest)WebRequest.Create(url);
        request.UserAgent = agent;
        request.Method = "GET";
        request.ContentType = "text/html";
        request.CookieContainer = cookieContainer;

        string result;
        using (var myResponse = (HttpWebResponse) request.GetResponse())
        {
            using (var stream = myResponse.GetResponseStream())
            {
                result = null;
                if (stream != null)
                {
                    using (var sr = new StreamReader(stream, System.Text.Encoding.UTF8))
                    {
                        result = sr.ReadToEnd();
                        sr.Close();
                    }
                    stream.Close();
                }
            }
            myResponse.Close();
        }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:52:53.833

难以置信...我发送的 URL /Broker/Ops/FichaContratoJS.asp?nc=815044&IP=5&YY=2012&M=6 而浏览器发送的是 /Broker/Ops/FichaContratoJS.asp?nc=815044&IP=5&YY=2012&M=06& （注意 M 参数上的额外 0 （这是一个月）。放在那里 0 会返回整页。听起来对我来说是个缺陷

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T14:27:32.407

我遇到了类似的情况，发现将响应流复制到 MemoryStream 似乎可以解决我的问题。

```
public static string SendGETRequest(string url, string agent, CookieContainer cookieContainer)
{
    var request = (HttpWebRequest)WebRequest.Create(url);
    request.UserAgent = agent;
    request.Method = "GET";
    request.ContentType = "text/html";
    request.CookieContainer = cookieContainer;

    string result;
    using (var myResponse = (HttpWebResponse) request.GetResponse())
    {
        using (var stream = myResponse.GetResponseStream())
        {
            result = null;
            if (stream != null)
            {
                MemoryStream memStream = new MemoryStream();
                stream.CopyTo(memStream);
                memStream.Flush();
                stream.Close();

                using (var sr = new StreamReader(memStream, System.Text.Encoding.UTF8))
                {
                    result = sr.ReadToEnd();
                    sr.Close();
                }

            memStream.Close();
            }
        }
        myResponse.Close();
    }
    return result;
} 
```

# ruby - 使用mechanize时使用正则表达式查找具有某个锚点的链接

> ID：10511765
> 
> 赞同：2
> 
> 时间：2012-05-09T07:39:50.273
> 
> 标签：ruby, regex, mechanize

我正在尝试使用 Mechanize link_with(:href => 'anchor here') 来查找在 href 中包含带有特定字符串的链接的页面。例如，我想要它，以便我可以将所有具有锚点包含“index.php？user”的链接的站点吐到一个文本文件中

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:48:21.330

感谢大家的回答，我最终选择了 page.link_with(:href => /(.*)?user$/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:21:03.773

```
urls = ['http://www.google.com/','http://www.foo.com/','http://www.bar.com/']

File.open('output.txt', 'w') do |out|
  urls.each do |url|
    out << url if agent.get(url).link_with(:href => /index.php\?user/)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:22:30.550

我建议您查看 XPath 选择器：

[jQuery Xpath 选择器选择 id 包含“sometext”的元素](https://stackoverflow.com/questions/2075760/jquery-xpath-selector-to-select-an-element-which-id-contains-sometext)

可以在此处找到有关如何将 XPath 与 mechanize 一起使用的示例：

[使用 Ruby/Mechanize（和 Nokogiri）从 HTML 中提取单个字符串](https://stackoverflow.com/questions/2114695/extract-single-string-from-html-using-ruby-mechanize-and-nokogiri)

# java - 比较两个复杂对象时如何返回比较差异？

> ID：10511767
> 
> 赞同：1
> 
> 时间：2012-05-09T07:40:02.633
> 
> 标签：java, comparison

我必须比较两个不同类型的复杂对象（并且在类型层次结构中没有公共超类），但在逻辑上它们可能是等价的。问题在于如何在对象不相等的情况下返回有关比较结果的信息；我想告诉调用者为什么对象不相等（哪些字段不同以及它们有何不同）。

迄今为止的选择是：

*   返回一个字符串
*   抛出异常

但我觉得它们不是很优雅/很好。

此外，有没有办法将字段比较委托给 JUnit 中的 assertEquals ，从而使我的比较基于 JUnit 而没有比较测试是实际的单元测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:42:31.647

如果比较很复杂，则比较的结果（正如您提到的）可能很复杂。

因此，我建议您考虑第三种选择：创建一个自定义类，`ComparisonResult`它封装了结果信息。

您甚至可以创建一点层次结构，并依靠多态性来简化代码。这是一个例子：

```
ComparisonResult
|
+--- Equals
|
+--- Not equals
     |
     +--- Compatible (with "isAbeforeB()")
     |
     +--- Incompatible (with "getReason()") 
```

可能是最`Incompatible`混乱的类，我建议您通过一系列对象不兼容的原因来实现它。一个原因本身可能是一个抽象类，具有诸如`MissingField`etc之类的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:44:00.230

小心！如果您的比较实现与 equals 不匹配，则在不同的容器实现中使用该对象时可能会遇到麻烦。

也就是说，比较接口只能返回 int，所以你必须想出一个*不*妨碍 Comparable 的不同方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:44:43.050

equals 方法应该只返回一个布尔值（是否相等）。

您不应该混合比较的功能并获得差异。

为了您的目的，实现附加方法是有意义的（a.getDifferences(b) 或静态方法 Comparision.getDifferences(a,b) 如果您没有公共超类（除了对象））

对于 equals 的实现，调用 getDifferences 方法并检查返回的对象是否为空是有意义的。

结果可能是一个字符串或一个单独的对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:47:07.837

您可以返回差异对象列表或字符串列表，其中每个项目代表一个差异。

# reporting-services - 消息：OLE DB 错误：OLE DB 或 ODBC 错误：未指定错误 SSAS 和 SSRS 已安装

> ID：10511769
> 
> 赞同：1
> 
> 时间：2012-05-09T07:40:03.940
> 
> 标签：reporting-services, ssas

在 msmdsrv.log 中出现以下错误。

> (01/04/2012 12:46:22) 消息：OLE DB 错误：OLE DB 或 ODBC 错误：未指定的错误。（来源：\?\E:\Program Files\Microsoft SQL Server\MSAS10_50\OLAP\Log\msmdsrv.log，类型：3，类别：289，事件 ID：0xC1210003）
> 
> (01/04/2012 12:46:25) 消息：OLE DB 错误：OLE DB 或 ODBC 错误：未指定的错误。（来源：\?\E:\Program Files\Microsoft SQL Server\MSAS10_50\OLAP\Log\msmdsrv.log，类型：3，类别：289，事件 ID：0xC1210003）

和应用程序日志：

OLE DB 错误：OLE DB 或 ODBC 错误：未指定的错误。EentID=3 和类别=289。

我该如何解决这个错误？

此服务器已安装 Ssas 和报告服务...

问候，

马尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:27:50.593

您是否有机会遇到被零除的错误？那就是您正在处理的 DSV / 视图最终会进行除以零的计算。确定是否发生这种情况的最佳方法是打开 Profiler 并记录 SSAS 针对您的数据源执行的 SQL 查询。然后直接对 DS 运行该查询（例如，用于 SQL Server 的 SSMS）以查看它提供的错误消息。

# macos - Mac OS X 10.5 错误上的独立 XULRunner 应用程序

> ID：10511772
> 
> 赞同：1
> 
> 时间：2012-05-09T07:40:06.967
> 
> 标签：macos, xul, xulrunner

我是 Mac 操作系统的新手。我开发了一个独立的 XULRunner 应用程序，它在 Windows 和 Linux 上都可以正常运行。然而，Mac OS X 10.5 给我带来了问题。[我从这里](http://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/11.0b8/runtimes/xulrunner-11.0b8.en-US.mac-pkg.dmg)下载了 XULRunner 运行时。不带开关运行`/Library/Frameworks/XUL.framework/xulrunner-bin`会显示帮助屏幕。但它`<Error> - </Error>`与任何其他开关一起运行时失败。

我已经尝试了各种技巧，但到目前为止都没有成功。任何帮助将不胜感激。

# android - AsyncTask 与 android:noHistory="true"

> ID：10511778
> 
> 赞同：0
> 
> 时间：2012-05-09T07:40:22.393
> 
> 标签：android, asynchronous, android-activity, android-asynctask

在`AndroidManifest.xml`文件中，我`android:noHistory="true"`在`activity`. 在那`activity`，我有`AsyncTask`一个长期运行的任务。`AsyncTask`当我转到另一个时会继续运行`activity`吗？还是会打开另一个`activity`导致`AsyncTask`停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:43:08.277

是的，它会一直持续到完成。但请注意，您没有对 onPostExecute 中的活动进行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:44:50.340

它将继续，因为它在自己的线程中运行，但它涉及一些关于更新 UI 和处理屏幕旋转的潜在问题。

我建议您`Service`改为启动 a 并在其中运行您的`AsyncTask`or `Loader`。完成后，您可以使用`LocalBroadcastManager`让任何活动知道您`Service`已完成并且需要更新 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:45:33.110

一个不错的选择是使用[loaders](http://developer.android.com/guide/topics/fundamentals/loaders.html)，它们提供这种任务管理，并且会在轮换或其他原因导致活动消失的情况下取消底层异步任务。

# groovy - 需要帮助理解使用 groovy 闭包的柯里化？

> ID：10511779
> 
> 赞同：13
> 
> 时间：2012-05-09T07:40:23.133
> 
> 标签：groovy, functional-programming, currying

我试图了解柯里化在函数式编程中是如何工作的。我已经浏览了[wiki](http://en.wikipedia.org/wiki/Currying)和一些关于 SO 的相同问题。

[需要帮助理解 lambda (currying)](https://stackoverflow.com/questions/3623956/need-help-understanding-lambda-currying)

[什么是“柯里化”？](https://stackoverflow.com/questions/36314/what-is-currying)

我知道柯里化就是将一个带有 n 个参数的函数拆分为 n 个或更少的函数，每个函数只有一个参数。我从理论上理解它，但我无法在编码时连接这些点。也许是我缺乏函数式编程语言或 C# 方面的知识（正如上述问题中的许多答案所涉及的那样）。

无论如何，我了解 groovy & java。所以我试图`add(a,b)`在 groovy 中获得标准函数的大纲，但我无法完成它。

```
def closure = { arg ->
   // ??
}

def add(anotherClosure , a){
    return closure // ??
} 
```

有人可以帮助我理解使用 groovy 闭包的柯里化吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T08:33:11.407

你可以通过编写一个闭包来滚动你自己的柯里化功能，该闭包接受另一个闭包和一个柯里化参数来设置，并返回一个使用这个值的闭包。

```
// Our closure that takes 2 parameters and returns a String
def greet = { greeting, person -> "$greeting $person" }

// This takes a closure and a default parameter
// And returns another closure that only requires the
// missing parameter
def currier = { fn, param ->
  { person -> fn( param, person ) }
}

// We can then call our currying closure
def hi = currier( greet, 'Hi' )

// And test it out
hi( 'Vamsi' ) 
```

但是您最好坚持使用[jalopaba 所示](https://stackoverflow.com/a/10511885/6509)`curry`的内置 Groovy方法。（还有[rcurry](http://groovy.codehaus.org/api/groovy/lang/Closure.html#rcurry%28java.lang.Object...%29)和[ncurry](http://groovy.codehaus.org/api/groovy/lang/Closure.html#ncurry%28int,%20java.lang.Object...%29)分别从右侧和给定位置咖喱）

应该说，Groovy curry 方法用词不当，因为它更像是[部分应用](http://en.wikipedia.org/wiki/Partial_application)的情况，因为您不需要深入到只需要一个参数的闭包，即：

```
def addAndTimes = { a, b, c -> ( a + b ) * c }

println addAndTimes( 1, 2, 3 ) // 9

def partial = addAndTimes.curry( 1 )

println partial( 2, 3 ) // 9 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T07:47:55.230

您可以使用以下方法为闭包实例的一个或多个参数设置一个固定值`curry()`：

```
def add = { a, b -> a + b }
def addFive = add.curry(5)
addFive(3) // 5 + 3 = 8 
```

另一个例子：

```
def greeter = { greeting, name -> println "${greeting}, ${name}!" }
def sayHello = greeter.curry("Hello")
sayHello("Vamsi") // Hello, Vamsi!
def sayHi = greeter.curry("Hi")
sayHi("Vamsi") // Hi, Vamsi! 
```

# coordinates - 如何计算 图像叠加层的 KML 坐标

> ID：10511782
> 
> 赞同：1
> 
> 时间：2012-05-09T07:40:25.593
> 
> 标签：coordinates, kml

有谁知道使用 ImageOverlay 的图像计算“”坐标的答案？

数据： - 具有 320x320 大小的图像 - 具有北坐标

需要： 1\. 我需要使用上述图像叠加元素的可用数据来查找其他 3 个坐标的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:29:26.790

至少，您需要 2 个对角坐标。只有一个坐标，您无法将像素与距离相关联。

# php - 可以从网站管理 linux 服务吗？

> ID：10511784
> 
> 赞同：2
> 
> 时间：2012-05-09T07:40:30.023
> 
> 标签：php, html, shell, scripting, webpage

我有几个服务，我想从网站访问。就像一个简单的网站，用户可以登录并访问启动|停止|如果服务关闭，则重新启动服务。IDK 如果这在网页中是可能的，因为我还没有经历过。

在 shell 中，我只需输入**service b3-2 start 即可启动**该服务。现在我只想能够在开始|停止|重新启动是按钮的网页中执行此操作，并且在所有内容下方都有一个信息/状态区域和一个输出框，以显示错误（如果有）。

如果有人可以帮助我，那就太棒了。我的问题主要是——

*   是否可以从网页执行此操作？
*   如果是这样，创造有多难？
*   你还能告诉我什么可以更好地帮助我解决这个问题？

*附带说明一下，我主要将其用于我的 B3 服务（Big Brother Bot）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:52:16.077

我很久以前用[http://de.php.net/manual/en/book.ssh2.php](http://de.php.net/manual/en/book.ssh2.php)模块用 PHP 写了一个“Eggdrop Webinterface”。

您可以通过 SSH 将此模块连接到您的 linux 服务器并提交 shell 命令。在我的 Web 界面中，我编写了一个 Shellscript 来完成所有工作（添加/删除/启动/停止等）并通过 php ssh2 模块执行。

```
<?php
class ssh
{
private $sql;
private $con;

private static $instance;

public static function getInstance()
{
    if (!self::$instance)
    {
        self::$instance = new ssh();
    }
    return self::$instance;
}

function __construct()
{
    $this->sql = sql::getInstance(); 
}

/* Verbindung über SSH aufnehmen */
public function connect ($rootid)
{
    global $cfg;

    $q = $this->sql->query("SELECT ROOT_SSH_IP, ROOT_SSH_USER, ROOT_SSH_PASS, ROOT_SSH_PORT FROM ".prfx."rootserver WHERE ROOT_ID = '".$rootid."'");

    $r = $this->sql->content($q);

    $blowfish = new Blowfish($cfg["BLOWFISHKEY"]);

    $pass = $blowfish->Decrypt($r["ROOT_SSH_PASS"]);

    $this->ssh_connect($r["ROOT_SSH_IP"], $r["ROOT_SSH_PORT"], $pass, $r["ROOT_SSH_USER"]);

    return true;

}

/* Disconnect */
public function my_ssh_disconnect($reason, $message, $language) {
    printf("Server disconnected with reason code [%d] and message: %s\n",
    $reason, $message);

    return true;
}

/* Eigentliche ssh_connect Funktion */
public function ssh_connect($host, $port, $pass, $user="root")
{
    $methods = array(
      'kex' => 'diffie-hellman-group1-sha1',
      'client_to_server' => array(
        'crypt' => '3des-cbc',
        'comp' => 'none'),
      'server_to_client' => array(
        'crypt' => 'aes256-cbc,aes192-cbc,aes128-cbc',
        'comp' => 'none'));

    $callbacks = array();

    $this->con = ssh2_connect($host, $port, $methods, $callbacks);
    if (!$this->con) die('Connection failed');
    else {

        if (!ssh2_auth_password($this->con, $user, trim($pass))) {
            die("login failed.");
        }
    }

    return true;
}

/* Befehle ausführen */
public function ssh_exec ($cmd, $stderr=true)
{
    if ($stderr == true)
    {
        $stream = ssh2_exec($this->con, $cmd);

        $err_stream = ssh2_fetch_stream($stream, SSH2_STREAM_STDERR);

        stream_set_blocking($err_stream, true);
        $result_err = stream_get_contents($err_stream);

        if (empty($result_err))
        {
            stream_set_blocking($stream, true);

            $out = stream_get_contents($stream);

            return $out;
        }
        else {
            return $result_err;
        }
    }
    else {

        $stream = ssh2_exec($this->con, $cmd);

        stream_set_blocking($stream, true);

        $out = stream_get_contents($stream);

        return $out;
    }
}

/* Verbindung beenden */
public function quit()
{
    $stream = ssh2_exec($this->con, 'exit');
    stream_set_blocking($stream, true);
    $output = stream_get_contents($stream);

    return true;                
} 
```

}

就我而言，我使用加密密码将 Serveraccounts 存储在 MySQL 表中。

希望小课堂有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:47:54.220

如果您想“自己编写”，您可以混合使用 bash、php 和/或其他脚本。

# database - 为 magento 添加数据库表时出现异常

> ID：10511795
> 
> 赞同：1
> 
> 时间：2012-05-09T07:41:12.927
> 
> 标签：database, magento

我正在使用 WAMP 服务器在 magento 1.6.2.0 上创建我的模块；当我尝试将我的表添加到magento数据库时出现异常，并且在Mysql页面中我的表a没有创建但我在表“core_ressource”下找到了我的模块的名称；你能帮我吗 ？

这是我的 PHP 升级页面：

```
<?php

    $installer = $this;

    $installer->startSetup();
    /**
     * Create table 'interactivebanner/interactivebanner'
     */
    $table = $installer->getConnection()
        ->newTable($installer->getTable('interactivebanner/interactivebanner'))
        ->addColumn('entity_id', Varien_Db_Ddl_Table::TYPE_INTEGER, null, array(
            'identity'  => true,
            'unsigned'  => true,
            'nullable'  => false,
            'primary'   => true,
            ), 'Entity Id')
        ->addColumn('name', Varien_Db_Ddl_Table::TYPE_TEXT,100, array(
            'nullable'  => false,
            'default'   => '',
            ), 'Name')
        ->addColumn('link', Varien_Db_Ddl_Table::TYPE_TEXT,255, array(
            'nullable'  => false,
            'default'   => '',
            ), 'Link')
        ->addColumn('status', Varien_Db_Ddl_Table::TYPE_INTEGER,null, array(
            'unsigned'  => true,
            'nullable'  => false,
            'default'   => '0',
            ), 'Status');
    $installer->getConnection()->createTable($table);

     /**
     * Create table 'interactivebanner/interactivebannerprod'
     */
    $table = $installer->getConnection()
        ->newTable($installer->getTable('interactivebanner/interactivebannerprod'))
        ->addColumn('value_id', Varien_Db_Ddl_Table::TYPE_INTEGER, null, array(
            'identity'  => true,
            'nullable'  => false,
            'primary'   => true,
            ), 'Value ID')
        ->addColumn('tag_content', Varien_Db_Ddl_Table::TYPE_TEXT, 255, array(
            'nullable'  => false,
            'default'   => '',
            ), 'Status id')
        ->addColumn('entity_id', Varien_Db_Ddl_Table::TYPE_INTEGER, null, array(
            'unsigned'  => true,
            'nullable'  => false,
            'default'   => '0',
             ), 'Entity Id')
        ->addColumn('position_v', Varien_Db_Ddl_Table::TYPE_TEXT,10, array(
            'nullable'  => false,
            'default'   => '0',
            ), 'Position V')
        ->addColumn('position_h', Varien_Db_Ddl_Table::TYPE_TEXT,10, array(
            'nullable'  => false,
            'default'   => '0',
            ), 'Position H')
        ->addForeignKey($installer->getFkName('interactivebanner/interactivebanner', 'entity_id', 'interactivebanner/interactivebannerprod', 'entity_id'),
            'entity_id', $installer->getTable('interactivebanner/interactivebannerprod'), 'entity_id', Varien_Db_Ddl_Table::ACTION_CASCADE, Varien_Db_Ddl_Table::ACTION_CASCADE);
    $installer->getConnection()->createTable($table);

  $installer->endSetup(); 
```

这是一个例外：

```
Exception Object
(
    [message:protected] => Notice: Trying to get property of non-object  in C:\wamp\www\ce_1.6.2.0\app\code\core\Mage\Core\Model\Resource.php on line 230
    [string:Exception:private] => 
    [code:protected] => 0
    [file:protected] => C:\wamp\www\ce_1.6.2.0\app\code\core\Mage\Core\functions.php
    [line:protected] => 245
    [trace:Exception:private] => Array
        (
            [0] => Array
                (
                    [file] => C:\wamp\www\ce_1.6.2.0\app\code\core\Mage\Core\Model\Resource.php
                    [line] => 230
                    [function] => mageCoreErrorHandler
                    [args] => Array
                        (
                            [0] => 8
                            [1] => Trying to get property of non-object
                            [2] => C:\wamp\www\ce_1.6.2.0\app\code\core\Mage\Core\Model\Resource.php
                            [3] => 230
                            [4] => Array
                                (
                                    [model] => Kiwi_InteractiveBanner_Resource
                                    [entity] => interactivebanner
                                    [modelsNode] => Mage_Core_Model_Config_Element Object
                                        (
                                            [varien] => Mage_Core_Model_Config_Element Object
                                                (
                                                    [class] => Varien
                                                )

                                            [core] => Mage_Core_Model_Config_Element Object
                                                (
                                                    [class] => Mage_Core_Model
                                                    [resourceModel] => core_resource
                                                )

                                            [core_resource] => Mage_Core_Model_Config_Element Object
                                                (
                                                    [class] => Mage_Core_Model_Resource
                                                    [deprecatedNode] => core_mysql4
                                                    [entities] => Mage_Core_Model_Config_Element Object
                                                        (
                                                            [config_data] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_config_data
                                                                )

                                                            [website] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_website
                                                                )

                                                            [store] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_store
                                                                )

                                                            [resource] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_resource
                                                                )

                                                            [cache] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_cache
                                                                )

                                                            [cache_tag] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_cache_tag
                                                                )

                                                            [cache_option] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_cache_option
                                                                )

                                                            [store_group] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_store_group
                                                                )

                                                            [config_field] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_config_field
                                                                )

                                                            [email_template] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_email_template
                                                                )

                                                            [variable] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_variable
                                                                )

                                                            [variable_value] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_variable_value
                                                                )

                                                            [translate] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_translate
                                                                )

                                                            [session] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_session
                                                                )

                                                            [layout_update] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_layout_update
                                                                )

                                                            [layout_link] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] => core_layout_link
                                                                )

                                                            [url_rewrite] => Mage_Core_Model_Config_Element Object
                                                                (
                                                                    [table] =>  ... 
```

这是我的 config.xml 的一部分

```
 <models>
        <interactivebanner>
            <class>Kiwi_InteractiveBanner_Model</class>
            <resourceModel>Kiwi_InteractiveBanner_Resource</resourceModel>
        </interactivebanner>
        <interactivebanner_resource>
            <class>Kiwi_InteractiveBanner_Model_Resource</class>
            <entities>
                <interactivebanner>
                    <table>interactivebanner</table>
                </interactivebanner>
                <interactivebannerprod>
                    <table>interactivebannerprod</table>
                </interactivebannerprod>
            </entities>
        </interactivebanner_resource>
    </models> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:47:19.333

您是否尝试过在 config.xml 中这样声明表：

```
<module_mysql4>
 <class>Company_Module_Model_Mysql4</class>
                <entities>
                    <custom_model_name>
                        <table>table_name</table>
                    </custom_model_name>
                </entities>
</module_mysql4> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:35:14.910

错误在 config.xml 文件中：

```
<interactivebanner>
<class>Kiwi_InteractiveBanner_Model</class>
<resourceModel>interactivebanner_resource</resourceModel>
</interactivebanner> 
```

代替 ：

```
<interactivebanner>
<class>Kiwi_InteractiveBanner_Model</class>
<resourceModel>Kiwi_InteractiveBanner_Resource</resourceModel>
</interactivebanner> 
```

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T08:49:10.067

使用 Model/Resource/Mysql4/Setup 而不是 Model/ Resource/ Interactivebanner 。请参阅下一个教程[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources)

# wpf - 如何将图像添加到 DataGrid 组标题

> ID：10511801
> 
> 赞同：0
> 
> 时间：2012-05-09T07:41:48.900
> 
> 标签：wpf, datagrid, groupstyle

我使用以下代码段对我的 DataGrid 进行分组：

```
 <DataGrid.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Path=City}" FontWeight="Bold" Padding="3"/>
                    </StackPanel>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Expander>
                                    <Expander.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Path=Name}" />
                                            <TextBlock Text="{Binding Path=ItemCount}" Margin="8,0,4,0"/>
                                            <TextBlock Text="Element(s)"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <ItemsPresenter />
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </DataGrid.GroupStyle>
</DataGrid> 
```

现在我想在每个组标题中都有一个图像 - 是否有可能以及如何插入它？

# perl - 在 Perl 中将位向量转换为二进制

> ID：10511805
> 
> 赞同：2
> 
> 时间：2012-05-09T07:42:12.253
> 
> 标签：perl, binary

我不确定描述这一点的最佳方式。

本质上，我正在尝试写入需要特定协议的缓冲区。我想要的前两个字节是“10000001”和“11111110”（逐位）。如何将这两个字节写入 Perl 中的文件句柄？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:48:53.253

要将拼写出的二进制转换为实际字节，您需要带有or的[pack](http://perldoc.perl.org/functions/pack.html)函数（取决于您拥有位的顺序）：`B``b`

```
print FILE pack('B*', '1000000111111110'); 
```

但是，如果字节是常量，最好将它们转换为十六进制值并将`\x`转义与字符串文字一起使用：

```
print FILE "\x81\xFE"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:48:03.753

怎么样

```
# open my $fh, ...
print $fh "\x81\xFE"; # 10000001 and 11111110 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:50:19.580

自 5.6.0 版（2000 年 3 月发布）以来，perl 已支持[二进制文字](http://perl5.git.perl.org/perl.git/commit/4f19785bce4da39a768aa6210f1f97ab4c0600dd)，如[perldata](http://perldoc.perl.org/perldata.html#Scalar-value-constructors)中所述：

> 数字文字以下列任何浮点或整数格式指定：
> 
> ```
> 12345
> 12345.67
> .23E-10        # a very small number
> 3.14_15_92     # a very important number
> 4_294_967_296  # underscore for legibility
> 0xff           # hex
> 0xdead_beef    # more hex
> 0377           # octal (only numbers, begins with 0)
> 0b011011       # binary 
> ```
> 
> 为了便于阅读，您可以在数字之间的数字文字中使用下划线（下划线）。例如，您可以按三位（如 Unix 样式的模式参数，如`0b110_100_100`）或四位（表示半字节，如`0b1010_0110`）或其他组对二进制数字进行分组。

你可能会想写

```
print $fh 0b10000001, 0b11111110; 
```

但输出将是

```
129254
```

因为 10000001₂ = 129₁₀ 和 11111110₂ = 254₁₀。

您需要文字值的*特定*表示，即两个无符号字节。为此，请使用[`pack`](http://perldoc.perl.org/functions/pack.html)模板`"C2"`，*即*八位字节乘以 2。添加下划线以提高可读性并将其包装在一个方便的子例程中

```
sub write_marker {
  my($fh) = @_;
  print $fh pack "C2", 0b1000_0001, 0b1111_1110;
} 
```

作为一个快速演示，请考虑

```
binmode STDOUT or die "$0: binmode: $!\n";  # we'll send binary data
write_marker *STDOUT; 
```

当运行为

```
$ ./marker-demo | od -t x1
```

输出是

```
0000000 81 铁
0000002
```

如果不熟悉，这里使用[*od*](http://www.gnu.org/software/coreutils/manual/html_node/od-invocation.html)实用程序用于演示目的，因为输出在我的系统编码中包含一个控制字符和 Þ（拉丁文小刺）。

上面的调用命令*od*以十六进制呈现其输入中的每个字节，这是*marker-demo*的输出。请注意，10000001₂ = 81₁₆ 和 11111110₂ = FE₁₆。左列中的数字是偏移量：特殊标记字节从偏移量零开始（即立即），并且正好有两个。

# php - 如何在 Kohana 3 Auth 模块中列出当前登录的用户？

> ID：10511810
> 
> 赞同：2
> 
> 时间：2012-05-09T07:42:19.150
> 
> 标签：php, kohana, authentication

我不使用任何令牌。

我知道可以像这样获得当前使用的用户：

```
$user = $this->get_user(); 
```

我需要功能来检查是否有任何用户登录:)

我想做这样的事情：

```
//extending Model_User:
public function is_logged()
{
//return true or false
}

//using in controller

$user = ORM::factory('user');
$user->find($this->request->param('id'))

if($user->is_logged())
{
  //do_something();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:50:56.013

Auth 模块不存储有关用户会话的任何信息。您必须创建一个像`(user_id, login_time, last_update_time, user_fingerprint)`. `user_fingerprint`唯一令牌在哪里（例如， `sha1(user_id + user_ip + user_agent)`）。`login`在/之后更新此表`logout`。`last_update_time`将存储上次用户活动的时间戳（页面加载、ajax 调用等），它可用于通过超时过滤旧连接。

# android - android 中的 KSOAP 网络服务

> ID：10511816
> 
> 赞同：2
> 
> 时间：2012-05-09T07:42:45.700
> 
> 标签：android, ksoap2

我正在使用以下代码：

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            envelope.dotNet=true;           
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);  
            try
            {
                androidHttpTransport.call(SOAP_ACTION, envelope);              
                SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                Log.i("myApp", response.toString());  
                TextView tv = new TextView(this);
                tv.setText("message="+response.toString());
                setContentView(tv);                              
            }
            catch (Exception e)
            {
                e.printStackTrace();
            } 
```

Web服务正常工作，但显示以下错误：

W/System.err(975): --- 内部异常堆栈跟踪结束 ---' faultactor: 'null' detail: org.kxml2.kdom.Node@44f1adb8 W/System.err(975): at org. ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:116) W/System.err(975): 在 org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137) W/System.err(975): 在 org. ksoap2.transport.Transport.parseResponse(Transport.java:63) W/System.err(975): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100) W/System.err(975): 在com.redbus.SearchRoute.onCreate(SearchRoute.java:90) W/System.err(975): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) W/System.err(975): 在 android. app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) W/System.err(975)：在 android.app。ActivityThread.handleLaunchActivity(ActivityThread.java:2679) W/System.err(975): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) W/System.err(975): 在 android.app.ActivityThread $H.handleMessage(ActivityThread.java:2033) W/System.err(975): 在 android.os.Handler.dispatchMessage(Handler.java:99) W/System.err(975): 在 android.os.Looper .loop(Looper.java:123) W/System.err(975): 在 android.app.ActivityThread.main(ActivityThread.java:4627) W/System.err(975): 在 java.lang.reflect.Method .invokeNative(Native Method) W/System.err(975): at java.lang.reflect.Method.invoke(Method.java:521) W/System.err(975): at com.android.internal.os。 ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) W/System.err(975): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) W/System.err(975):在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:50:37.303

据`faultstring: 'System.Web.Services.Protocols.SoapException: Server was unable to process request.`我认为 ksoap 收到的响应不是有效的 XML 肥皂响应。

您的网络服务似乎正在返回对象引用异常。您是否将正确的参数发送到您的网络服务？

`request`在对象中检查并更正它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:02:15.317

我的 SOAP 调用如下，我认为您省略了名称空间。

```
List respHeaders = httpTransport.call(NAMESPACE+"/"+methodName, envelope, headerPropertyList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:07:23.217

此代码适用于尝试:) 在 url 中使用 10.0.2.2 而不是 10.0.2.1 因为模拟器正在使用此端口，并且在 request.addProperty 中，您必须指定您在 Web 服务中编写的方法名称，例如：我的方法正在取一个字符串 m 所以我在 addProperty("m","//here the object you want to send") 中写了

```
SoapObject request = new SoapObject("http://tempuri.org/", "GetCoursesInfos");
    request.addProperty("m","courses");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet=true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE http = new HttpTransportSE("http://10.0.2.2:2612/Service1.svc");//hint you

        http.call("http://tempuri.org/IService1/GetCoursesInfos", envelope);

        Object result= (Object)envelope.getResponse();
        message=result.toString();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.d("1", "first exe");
        txt.setText(e.getMessage());

    } 
```

# ruby-on-rails - 跨应用程序显示 UTF-8 不一致：在某些地方出现乱码，而在其他地方则没有

> ID：10511822
> 
> 赞同：0
> 
> 时间：2012-05-09T07:43:10.787
> 
> 标签：ruby-on-rails, utf-8

在 dev 中使用 haml、formtastic、rails 3.1.3、ruby 1.9.2、sqlite3，在生产中使用 postgres。

我有一个表单，它成功地将字符串编码为 utf-8。诸如`Słów`在参数中正确传递的字符串，并在开发和生产中都很好地写入数据库。

但是，保存后，表单域显示乱码`SÅ‚Ã³w`。通过类似的方式将属性放在同一页面上`@work.field`也会显示乱码。

如果我调用`@work.field`另一个模板文件，它会很好地呈现。

我已经做了通常的：

```
- Make sure 'config.encoding = "utf-8"' is there in application.rb file.
- Putting '# encoding: utf-8' on top of file containing utf-8 characters.
- Above '<App Name>::Application.initialize!' line in environment.rb file, add following two lines:

Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:44:06.207

哦。我在 layouts/application.rb 中添加了这个，它可以工作。

```
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /> 
```

# android - 如何“选中”列表中的所有复选框以“选中”单个复选框？

> ID：10511823
> 
> 赞同：1
> 
> 时间：2012-05-09T07:43:17.883
> 
> 标签：android, sencha-touch-2, checkbox

我陷入了一种情况，我必须通过“检查”位于工具栏中的复选框来“检查”列表中存在的所有复选框。

这是创建复选框列表的代码：-

```
itemTpl: '<input type="checkbox" name="box" enabled="enabled" value="open" 
name="comment_status" id="status" <tpl if="active">checked="checked"</tpl> />
{groupName}{#}', 
```

这是我的复选框代码：-

```
var checkBox = {
            xtype: 'checkboxfield',
              name : 'all',
            //  label: 'All',
              itemId: 'all',
              value: 'all',
              lableWidth: "0",
              width: 1,
              padding: '0 0 15 30',
              checked: false,
              listeners: {
                  check:function() {
                     // alert("check");

                      item = Ext.get("status");
                      console.log("item:-"+Ext.JSON.encode(item));

                      chkBox = item.down('input').dom;

                      var checkboxes = Ext.getStore('group');
                      console.log(checkboxes.getCount());

                      for(var i=0;i<checkboxes.getCount();i++){
                       chkBox.checked = true;
                      }

                  },
                  uncheck:function(){
                     // alert("uncheck");
                  }
              }
        }; 
```

在上面的复选框检查中，我希望检查“itemTpl”中定义的所有复选框，反之亦然。我知道检查中的代码：function(){} 没有那么好解决我的问题（两个代码都在不同的观点）。

所以，请告诉我这个问题的一些解决方案。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:02:56.013

好的，我更新[了您的 senchafiddle](http://www.senchafiddle.com/#b4K8w#rYgdP)以使其正常工作。实质上，这是我添加到您的代码中的内容：

将 2 个函数添加到您的列表控制器中，以管理工具栏中复选框上的操作：

```
checkAll:function(){
    this.getCheckboxList().getStore().each(function(record){record.set('active', true);});
},
uncheckAll:function(){
    this.getCheckboxList().getStore().each(function(record){record.set('active', false);});
} 
```

并在您的列表上方添加带有复选框的工具栏以将它们全部统治（XD）：

```
 {
       xtype : 'toolbar',
       docked: 'top',
       title: 'Check !',
       items:[{
           xtype: 'checkboxfield',
           name : 'all',
           value: 'checkAll',
           listeners:{
               check:function(){
                   MyApp.app.getController('MainViewController').checkAll();
               },
               uncheck:function(){
                   MyApp.app.getController('MainViewController').uncheckAll();
               }
           }
       }]
   } 
```

这将需要你的一些 css 来使 ckeckbox 更好，但行为就在这里。

# asp.net - bool类型的xml序列化错误

> ID：10511835
> 
> 赞同：3
> 
> 时间：2012-05-09T07:44:34.390
> 
> 标签：asp.net, xml-serialization

我试图找出如何解决从驼峰字符串中序列化布尔类型的问题。

我有以下xml

```
<Root>
  <BoolElement>
     False
  </BoolElement>
</Root> 
```

和以下课程

```
[XmlRoot("Root")]
public class RootObj{
  [XmlElement("BoolElement")]
  public bool BoolElement{get;set;}
} 
```

这将产生错误。

如果我使用相同的类并将“False”重命名为“false”，它将起作用。问题是我无法编辑 xml。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T07:50:34.747

您可以使用支持字段来帮助反序列化此无效 XML（我说无效，因为根据 xsd:boolean 模式`False`是无效值）：

```
[XmlRoot("Root")]
public class RootObj
{
    [XmlElement("BoolElement")]
    public string BackingBoolElement
    {
        set
        {
            BoolElement = bool.Parse(value.ToLower());
        }
        get
        {
            return BoolElement.ToString();
        }
    }

    [XmlIgnore]
    public bool BoolElement { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T07:51:22.487

`False`不是[xsd:boolean 的有效值](http://books.xmlschemata.org/relaxng/ch19-77025.html)（但正如您所注意到`false`的那样`0`） - 如果您无法更改源数据，那么您可以拥有一个单独的属性，纯粹用于 XML 序列化：

```
[XmlRoot("Root")]
public class RootObj{
  [XmlElement("BoolElement")]
  public string BoolElementForSerialization
  {
     get
     {
         return (this.BoolElement ? "True" : "False");
     }
     set
     {
         this.BoolElement = (string.Compare(value, "false", StringComparison.OrdinalIgnoreCase) != 0);
     }
  }

  [XmlIgnore]
  public bool BoolElement{get;set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-16T07:49:35.467

我创建了一个可以从任何字符串反序列化的新布尔类型。它可能并不完美，但它适合我当时的需求。

对于您要使用的类，只需将数据类型从 bool 更改为 SerializableBoolean：

```
[XmlRoot("Root")]
public class RootObj{
  [XmlElement("BoolElement")]
  public SerializableBoolean BoolElement{get;set;}
} 
```

然后，您可以像使用任何普通 bool 数据类型一样使用 BoolElement 属性：

```
RootObj myObj = new RootObj();
if (myObj.BoolElement) { ... } 
```

这是 SerializableBoolean 类的代码，请注意，此代码仅处理反序列化，我的目的不需要序列化为 xml，因此未实现。

```
[System.Diagnostics.DebuggerDisplay("{Value}")]
public struct SerializableBoolean: System.Xml.Serialization.IXmlSerializable
{
    private bool Value { get; set; }

    public override bool Equals(object obj)
    {
        if (obj is string stringBoolean)
        {
            bool.TryParse(stringBoolean, out bool boolean);
            return Value == boolean;
        }
        else if (obj is bool boolean)
        {
            return Value == boolean;
        }
        else if (obj is SerializableBoolean serializableBoolean)
        {
            return Value == serializableBoolean.Value;
        }
        else
        {
            return Value == Convert.ToBoolean(obj);
        }
    }

    public override int GetHashCode()
    {
        return -1937169414 + Value.GetHashCode();
    }

    public XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    }

    public void ReadXml(XmlReader reader)
    {
        Value = Convert.ToBoolean(reader.ReadElementContentAsString());
    }

    public void WriteXml(XmlWriter writer)
    {
        throw new NotImplementedException();
    }

    public static bool operator ==(SerializableBoolean obj1, bool obj2)
    {
        return obj1.Value.Equals(obj2);
    }
    public static bool operator !=(SerializableBoolean obj1, bool obj2)
    {
        return !obj1.Value.Equals(obj2);
    }

    public static implicit operator SerializableBoolean(string value)
    {
        return new SerializableBoolean() { Value = Convert.ToBoolean(value) };
    }

    public static implicit operator SerializableBoolean(bool value)
    {
        return new SerializableBoolean() { Value = value };
    }

    public static implicit operator bool(SerializableBoolean b)
    {
        return b.Value;
    }
} 
```

# spring - 对象 org.tts.maqraa.data.Daralquran@1e20120 不是已知的实体类型

> ID：10511837
> 
> 赞同：1
> 
> 时间：2012-05-09T07:44:42.257
> 
> 标签：spring, jsf, jsf-2, eclipselink, tomcat7

当我使用 Spring 获得的实体管理器持久化实体时，我面临以下问题。

```
java.lang.IllegalArgumentException: Object: org.tts.maqraa.data.Daralquran@183eae7 is not a known entity type.
javax.faces.FacesException: #{configurationChecker.check}: java.lang.IllegalArgumentException: Object: org.tts.maqraa.data.Daralquran@183eae7 is not a known entity type.
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.el.EvaluationException: java.lang.IllegalArgumentException: Object: org.tts.maqraa.data.Daralquran@183eae7 is not a known entity type.
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 23 more
Caused by: java.lang.IllegalArgumentException: Object: org.tts.maqraa.data.Daralquran@183eae7 is not a known entity type.
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.mergeCloneWithReferences(UnitOfWorkImpl.java:3484)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.mergeCloneWithReferences(RepeatableWriteUnitOfWork.java:378)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.mergeCloneWithReferences(UnitOfWorkImpl.java:3455)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.mergeInternal(EntityManagerImpl.java:486)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.merge(EntityManagerImpl.java:463)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at $Proxy8.merge(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy8.merge(Unknown Source)
    at org.tts.maqraa.service.AbstractMaqraaService.store(AbstractMaqraaService.java:60)
    at org.tts.maqraa.service.DarAlQuranService.createNewDarAlQuran(DarAlQuranService.java:47)
    at org.tts.maqraa.service.test.ConfigurationChecker.check(ConfigurationChecker.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 24 more. 
```

我在哪里使用以下技术

*   阿帕奇雄猫 7.
*   Eclipse 链接 2.3.2。
*   春天 3.0。
*   JSF 2.0 莫哈拉。

您还可以找到 Daralquran 实体以确保正确映射实体。

```
@Entity
public class Daralquran implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;

    @Temporal( TemporalType.DATE)
    @Column(name="Established_Date")
    private Date establishedDate;

    @Column(name="Full_Name")
    private String fullName;

    @Column(name="Mobile_Number")
    private String mobileNumber;

    private String note;

    @Column(name="Phone_no")
    private String phoneNo;

    //bi-directional many-to-one association to City
    @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="city_Id")
    private City city;

    //bi-directional many-to-one association to Country
    @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="country_Id")
    private Country country;

    //bi-directional many-to-one association to User
    @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="supervisor_id")
    private User user;

    //bi-directional many-to-many association to User
    @ManyToMany(mappedBy="daralqurans2", fetch=FetchType.EAGER)
    private List<User> users;

    public Daralquran() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public Date getEstablishedDate() {
        return this.establishedDate;
    }

    public void setEstablishedDate(Date establishedDate) {
        this.establishedDate = establishedDate;
    }

    public String getFullName() {
        return this.fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }

    public String getMobileNumber() {
        return this.mobileNumber;
    }

    public void setMobileNumber(String mobileNumber) {
        this.mobileNumber = mobileNumber;
    }

    public String getNote() {
        return this.note;
    }

    public void setNote(String note) {
        this.note = note;
    }

    public String getPhoneNo() {
        return this.phoneNo;
    }

    public void setPhoneNo(String phoneNo) {
        this.phoneNo = phoneNo;
    }

    public City getCity() {
        return this.city;
    }

    public void setCity(City city) {
        this.city = city;
    }

    public Country getCountry() {
        return this.country;
    }

    public void setCountry(Country country) {
        this.country = country;
    }

    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public List<User> getUsers() {
        return this.users;
    }

    public void setUsers(List<User> users) {
        this.users = users;
    }   
    } 
```

您还可以找到 persistence.xml 文件的内容

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="Maqraa">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>org.tts.maqraa.data.DarAlquranManager</class>
        <class>org.tts.maqraa.data.DoorAlquranGM</class>
        <class>org.tts.maqraa.data.QuranTeacher</class>
        <class>org.tts.maqraa.data.ScientificOfficer</class>
        <class>org.tts.maqraa.data.SystemAdmin</class>
        <class>org.tts.maqraa.data.City</class>
        <class>org.tts.maqraa.data.Country</class>
        <class>org.tts.maqraa.data.Daralquran</class>
        <class>org.tts.maqraa.data.HalaqaAchievement</class>
        <class>org.tts.maqraa.data.HalaqaAssociation</class>
        <class>org.tts.maqraa.data.Halaqa</class>
        <class>org.tts.maqraa.data.MemorizationProgram</class>
        <class>org.tts.maqraa.data.Permission</class>
        <class>org.tts.maqraa.data.Phase</class>
        <class>org.tts.maqraa.data.PhasesAttendance</class>
        <class>org.tts.maqraa.data.Recitation</class>
        <class>org.tts.maqraa.data.Role</class>
        <class>org.tts.maqraa.data.Student</class>
        <class>org.tts.maqraa.data.User</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/maqraa" />
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="root" />
            <property name="eclipselink.ddl-generation" value="none" />
            <property name="eclipselink.ddl-generation.output-mode" value="database" />
        </properties>
    </persistence-unit>
</persistence> 
```

您还可以找到 spring 元数据配置 maqraa-module-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/maqraa" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />

    <bean id="jpaVendorAdapter"
        class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
        <property name="showSql" value="true" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="Maqraa" />
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
        <property name="jpaDialect" ref="jpaDialect" />
        <property name="loadTimeWeaver">
            <bean class="org.springframework.instrument.classloading.SimpleLoadTimeWeaver" />
        </property>
    </bean>

    <bean id="darAlquranService" class="org.tts.maqraa.service.DarAlQuranService"></bean>

    <bean id="configurationChecker" class="org.tts.maqraa.service.test.ConfigurationChecker"></bean>

</beans> 
```

那么，任何人都可以帮助我使 em 正常工作。

感谢穆罕默德·阿米尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:40:14.240

这是一个类加载器问题，您不知何故加载了同一个类的两个不同版本。

确保您没有在两个不同的地方部署这个类，并且正确配置了 Spring。也许尝试一些 Spring 示例。

你要重新部署？如果您尚未关闭旧的 EntityManagerFactory，您可能会收到此错误。尝试重新启动服务器。

你所有的课程都有同样的错误，还是做了一些工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:21:51.943

我得到它 ：），

因为我使用 tomcat 7 来运行应用程序，它不是 EE 约束器，因此它必须使用“LocalEntityManagerFactory”而不是“LocalContainerEntityManagerFactory”。

这样，您将能够调用实体管理器方法并考虑交易。

总的来说，这是最后一个 maqraa-module-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.5.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <context:annotation-config />
    <!-- <context:component-scan base-package="org.tts.maqraa.data" annotation-config="true"/> -->
    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/maqraa" />
        <property name="username" value="maqraa" />
        <property name="password" value="maqraa" />
    </bean>

    <bean id="jpaDialect"
        class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />

    <bean id="jpaVendorAdapter"
        class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
        <property name="database" value="MYSQL" />
        <property name="showSql" value="true" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="Maqraa" />
    </bean>

    <bean id="configurationChecker" class="org.tts.maqraa.service.test.ConfigurationChecker"></bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entityManagerFactory-ref="entityManagerFactory" />

    <!-- Activates various annotations to be detected in bean classes for eg 
        @Autowired -->
    <!-- <context:annotation-config/> -->
    <!-- enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

谢谢大家， Mohammed Amr。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:16:54.277

也许您需要专门 GenerationType ，而不是使用 GenerationType.Auto.Try it。我不确定。[同样的案例在这里](https://stackoverflow.com/questions/2388755/jpa-exception-object-is-not-a-known-entity-type)

# javascript - 并行加载？

> ID：10511845
> 
> 赞同：1
> 
> 时间：2012-05-09T07:45:09.620
> 
> 标签：javascript, apache

```
<script type="text/javascript" src="/scripts/a.js"></script>
<script type="text/javascript" src="/scripts/b.js"></script> 
```

我有两个简单的 JS 脚本，按上述顺序加载。*a.js*具有对函数的引用，例如`foo()`在*b.js*中，即*a.js*调用在*b.js*`foo()`中定义的函数。*在某些服务器上，由于在执行a.js*时无法识别而引发错误；在其他一些机器上，没有抛出错误。*`foo()`*

 **这两个脚本是否同时并行加载？或者，按顺序？答案是否取决于服务器的架构（例如多核等）？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:47:58.260

下载可能是并行的，也可能不是并行的（取决于浏览器），但脚本的解析是按照它们在页面上放置的顺序进行的。

如果您使用该顺序（`a.js`before `b.js`），`foo()`声明 in`b.js`但调用 in `a.js`，这将导致错误，因为`foo()`在它存在之前被调用。

这与 JS 库鼓励您在任何用户脚本之前加载其脚本的原因相同。这样，它们的引用在您使用它们之前就已经存在。**

# c# - ViewModel 中的构造函数

> ID：10511853
> 
> 赞同：4
> 
> 时间：2012-05-09T07:45:48.927
> 
> 标签：c#, xamarin.android, mvvmcross

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:32:59.483

One of the unusual (opinionated) features of MvvmCross is that by default it uses ViewModel constructor parameters as part of the navigation mechanism.

This is explained with an example in my answer to [Passing on variables from ViewModel to another View (MVVMCross)](https://stackoverflow.com/questions/10192505/passing-on-variables-from-viewmodel-to-another-view-mvvmcross)

The basic idea is that when a HomeViewModel requests a navigation using:

```
private void DoSearch()
{
    RequestNavigate<TwitterViewModel>(new { searchTerm = SearchText });
} 
```

then this will cause a TwitterViewModel to be constructed with the searchTerm passed into the constructor:

```
public TwitterViewModel(string searchTerm)
{
    StartSearch(searchTerm);
} 
```

At present, this means that **every ViewModel must have a public constructor which has either no parameters or which has only string parameters**.

So the reason your ViewModel isn't loading is because the MvxDefaultViewModelLocator can't find a suitable constructor for your ViewModel.

* * *

For "services", the MvvmCross framework does provide a simple ioc container which can be most easily accessed using the `GetService<IServiceType>()` extension methods. For example, in the [Twitter sample](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20TwitterSearch/TwitterSearch.Core/ViewModels/TwitterViewModel.cs) one of the ViewModel contains:

```
public class TwitterViewModel
    : MvxViewModel
    , IMvxServiceConsumer<ITwitterSearchProvider>
{
    public TwitterViewModel(string searchTerm)
    {
        StartSearch(searchTerm);
    }

    private ITwitterSearchProvider TwitterSearchProvider
    {
        get { return this.GetService<ITwitterSearchProvider>(); }
    }

    private void StartSearch(string searchTerm)
    {
        if (IsSearching)
            return;

        IsSearching = true;
        TwitterSearchProvider.StartAsyncSearch(searchTerm, Success, Error);
    }

    // ...
} 
```

Similarly, you can see how the conference service data is consumed in the [Conference BaseViewModel](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/ViewModels/BaseViewModel.cs)

* * *

If your preference is to use some other IoC container or some other construction mechanism for your ViewModels, then you can override the ViewModel construction within MvvmCross.

Take a look at this question (and answers) for ideas on how to do this - [How to replace MvxDefaultViewModelLocator in MVVMCross application](https://stackoverflow.com/questions/10411735/how-to-replace-mvxdefaultviewmodellocator-in-mvvmcross-application)

e.g. if you want to, then it should be fairly easy for you to adjust the `MyViewModelLocator` example in that question to construct your ViewModel with your service.

# intellij-idea - 将基于文件的项目转换为基于目录的项目的危险？

> ID：10511857
> 
> 赞同：1
> 
> 时间：2012-05-09T07:45:56.637
> 
> 标签：intellij-idea

我有一个大型 Android 项目，最初是在 Eclipse 中制作的，因此是基于文件的项目。我想将其转换为IDEA的基于目录的项目，但我不知道在这个过程中会更改哪些文件。

将基于文件的项目转换为基于目录的项目时，我应该注意哪些危险？

在这种转换中是否有任何文件被删除？

转换后，Eclipse 用户能否打开项目，或者每次我需要与此类用户共享项目时，我都必须将其转换回基于文件的项目？

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:41:24.893

基于文件和基于目录都是 Eclipse 不理解的特定于 IDEA 的项目格式，因此在转换后这方面不会有任何变化。

当您将基于文件的项目转换为基于目录的项目时，`.ipr`文件被替换为`.idea`目录并且`.iws`文件被移动到`.idea/workspace.xml`. 目录下的多个不同`.xml`文件`.idea`比单个大`.ipr`文件更容易共享/合并。

转换后不会删除原始文件`.ipr`和`.iws`文件，但最好手动删除它们以避免混淆（例如有人打开旧`.ipr`项目而不是基于新`.idea`目录的项目）。

# oop - 如何处理具有许多参数的函数的继承？

> ID：10511859
> 
> 赞同：1
> 
> 时间：2012-05-09T07:45:59.930
> 
> 标签：oop, inheritance

我正在用 PHP 为 MySQL 编写一个数据库交互层。但我认为这是一个一般的 OOP 问题（见最后一行）。

我有一个基本的 dbTables 类。它有一个

```
public static function getBy($method='name', $value) {
        // Gets flat table array of db Tables matching by $method == $value
        // later could implement some lookup tables.
        $allowed = array('name');
        $query_format = SHOW TABLES LIKE '%s'";
        if(in_array($method,$allowed)) {
            dbConnection::connect(MAIN_DB); // makes db connection
            $safe_value = mysql_real_escape_string($value);
            // MAY want to change this query to a SCHEMA query in CHILD classes
            $sql = sprintf($query_format,$safe_value);
            // e.g. $sql = "SHOW TABLES LIKE '$safe_value'";
            $result = mysql_query($sql);
            if($result === false) {
                debug::add('errors', __FILE__, __LINE__, __METHOD__,"Query Error for query '$sql'. MySQL said: " . mysql_error());
            }
            while($row = mysql_fetch_row($result)) {
                $db_table = new static($row[0]); // creates instance of $this class
                $object_array[] = $db_table; // add to $object_array for return value
            }
        } else {
            debug::add('errors',__FILE__, __LINE__, __METHOD__, ' - Wrong method: ' . $method . '. Currently allowed: ' . print_r($allowed,true));
            return false;
        }
    return $object_array;
    // END public static function getBy($method='name', $value)
    } 
```

但是子类会通过不同的查询来获取信息。他们将有其他允许的 $methods 进行搜索。

这是我的解决方案，但我不知道这是否是好的做法，以及以后是否会导致更多的痛苦。我可以创建一组私有静态属性，而不是在每个子类中重写这个函数，作为函数的修饰符。

像这样：

```
 protected static $get_by_methods = array('name'); // array('name','id','frontend_name'…) in CHILDREN
    protected static $get_by_query_format = "SHOW TABLES LIKE '%s'"; // for sprintf. Changes in children
    protected static $get_by_handles_arrays = false; // true in CHILDREN
    protected static $get_by_query_format_array = " SELECT * FROM %s` WHERE `$method` IN ($safe_values)"; // used in CHILDREN ONLY

    public static function getBy($method, $value) {
        $allowed = self::$get_by_methods;
        $query_format = self::$get_by_query_format;
        $handle_arrays = self::$get_by_handles_arrays; // false here,,, true in children
        $query_format_array = self::$get_by_query_format_array; // used in children
        if(is_array($value) && $handle_arrays === true) {
            return false; // in child class, $handle_arrays can be set to true outside of function
                // without rewriting function. just change the static property
        }
        if(in_array($method,$allowed)) {
            dbConnection::connect(MAIN_DB);
            if(!is_array($value)) { // handle string values
                $safe_value = mysql_real_escape_string($value);
                $sql = sprintf($query_format,$safe_value);
            } else {
                // arrays used only in children
e.g. 
$safe_values = mysql_real_escape_string(implode(',',$value)); // convert to string
                $sql = sprintf($query_format_array,$safe_values); // used in children
            }
            $result = mysql_query($sql);
            if($result === false) {
                debug::add('errors', __FILE__, __LINE__, __METHOD__,"MySQL Error num " . mysql_errno() . " for query [$sql] - MySQL said: " . mysql_error());
            }
            while($row = mysql_fetch_row($result)) {
                $db_table = new dbTables($row['name']);
                $object_array[] = $db_table;        
            }
        } else { // if bad method chosen above
            debug::add('errors',__FILE__, __LINE__, __METHOD__, ' Wrong method: ' . $method . '. Must use one of these: ' . print_r($allowed,true));
            return false;
        }
    return $object_array;
    // END public static function getBy($method='name', $value)
    } 
```

总而言之，这样做可以让我永远不会覆盖 getBy() 方法。我只需要覆盖它附带的受保护的静态属性。对于 DRY（不要重复自己），这似乎很好。我只需要编写 4 行代码，而不是一遍又一遍地编写 20 多行代码。但我对此很陌生，不知道这是否是一个可怕的错误，因为其他原因。

将继承覆盖从方法中取出并将其放入辅助属性中是否安全且良好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:06:59.627

```
 $allowed = array('name');
 $query_format = SHOW TABLES LIKE '%s'"; 
```

似乎属于类属性，因为您需要在子类中访问它来覆盖行为。

在您的子类中，您可以覆盖行为，也可以通过使用 parent 关键字来使用相同的行为

```
$allowed = parent::$allowed; 
```

现在 $allowed 将具有从父级继承的值。

该方法也是如此。如果要调用父方法，请使用 parent 关键字。

父::getBy(); 在你的孩子班上。永远记住 DRY（不要重复自己）原则。在您的情况下，您正在重复父类和子类中的代码。所以改为使用 parent 来调用子类中的父方法。例如在你的孩子班

```
public function getBy()
{
    parent::getBy();
} 
```

现在孩子 getBy() 将从父母那里继承。您唯一应该覆盖的是类属性。

# css - 无论内容如何， 如何使两个 div 的高度相同？

> ID：10511860
> 
> 赞同：0
> 
> 时间：2012-05-09T07:46:02.467
> 
> 标签：css, height

我有一个与 1060px 宽度对齐的中心。在这里面，我有两个不同的背景颜色/图像和宽度分别为 260 像素和 800 像素的 div。现在我需要使两个子 div 的高度相同，而不管它们里面的内容如何。如果“child1”的内容很大，我们需要向下滚动浏览器才能看到它，而“child2”的内容较少，那么“child2”也应该扩展高度以匹配“child1”。另一方面，如果“child1”和“child2”的内容都较少，并且不产生浏览器滚动，那么两者都应该占据浏览器窗口的高度。代码片段如下所示。

```
<html>
    <head>
    <style type="text/css">
        * { margin:0; padding:0; }
        .parent { clear:both; margin:auto; width:1060px; }
        .child1 { background-color:#999999; float:left; width:260px; }
        .child2 { background-color:#99CC00; float:left; width:800px; }
        .child1a, child2a { float:left; width:100%; }
        .child2a { border-bottom:1px solid #000000; height:500px; }
    </style>
    </head>

    <body>
    <div class="parent">
        <div class="child1">
            <div class="child1a">1</div>
            <div class="child1a">2</div>
            <div class="child1a">3</div>
        </div>
        <div class="child2">
            <div class="child2a">1</div>
            <div class="child2a">2</div>
            <div class="child2a">3</div>
        </div>
    </div>
    </body>
</html> 
```

是否可以仅使用 CSS 解决它，或者需要使用 JavaScript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:03:18.597

您可以使用 'display:table-cell' 。

[http://jsfiddle.net/sWHKs/](http://jsfiddle.net/sWHKs/)

# java - 实现接口的单例类

> ID：10511864
> 
> 赞同：1
> 
> 时间：2012-05-09T07:46:09.527
> 
> 标签：java, interface, dependencies, singleton

> **可能的重复：**
> [单身人士有什么不好的？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)

[正如这个](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)stackoverflow 问题中广泛讨论的那样，使用 Singleton 的缺点之一 是它们隐藏了代码中的类依赖项。但是，我们可以让单例实现一个接口，同时仍然遵守单例的两个规则：单实例和全局范围。
为什么还是说 Singleton 隐藏依赖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:49:08.417

隐藏依赖意味着从你的代码到单例没有可见的链接，因为可以从任何地方调用单例。让单例实现接口并不会改变问题。

# java - 在服务器端处理大型文档

> ID：10511866
> 
> 赞同：0
> 
> 时间：2012-05-09T07:46:23.943
> 
> 标签：java, tomcat, server-side, large-files

*   一些大型文档 (20 - 50 MB) 存储在服务器端。
*   可以使用第三方程序加载和查询文档（大约需要 3 秒）。
*   3rd 方程序只能加载一个文档（在给定线程上）。
*   客户端可以请求查看其中一个已加载文档的查询结果。

避免在每个客户端 http 请求上加载文档的最佳方法是什么？将所有这些加载的文档保存在内存中是否合乎逻辑？如果是，是否需要一个线程池，每个线程都在其中保存一个文档？如果不是，还有哪些其他选择？

（使用 Java - Tomcat - Ubuntu）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:00:11.237

我会在你的tomcat前面放另一台服务器来做一些缓存。如果你自己实现这个，你一定会遇到问题。设置可能如下所示：

`Client`→ `Varnish Caching Server`→ `Apache HTTP Server`→`Tomcat`

如果您需要 HTTPS，您可能会考虑在 Varnish 之前放置另一台服务器，因为它不支持 SSL（我记得）。那么它可能是这样的：

`Client`→ `Pound`→ `Varnish Caching Server`→ `Apache HTTP Server`→`Tomcat`

您可以使用某种规则语言广泛配置 Varnish。它会很好地为您服务。

Pound 只是一个小型反向代理，可用于终止 SSL 和/或负载平衡。

链接：

阿帕奇：[http ://httpd.apache.org/](http://httpd.apache.org/)

清漆：[https ://www.varnish-cache.org/](https://www.varnish-cache.org/)

英镑： http: [//www.apsis.ch/pound](http://www.apsis.ch/pound)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:24:56.667

如果您正在通过外部程序处理文档，除了在某处缓存处理结果之外，您可以做的不多。另一种选择是急切地预处理文档并存储所有可能的查询结果以供以后检索。

在每个请求上分叉外部进程显然是最糟糕的选择。

由于您的数据是在 Web 应用程序中处理的并且是不可变的，因此您可以将文件映射到字节缓冲区并对其进行处理。这样，您将节省 JVM 中数据的加载和分配。

而且由于您的查询不会更改数据，因此无需将它们推送到单独的线程 - 它们可以访问来自不同线程的数据，直接为 http 请求提供服务

# python - django-pagination 可以每页进行多个分页吗？

> ID：10511873
> 
> 赞同：6
> 
> 时间：2012-05-09T07:47:02.880
> 
> 标签：python, django, django-pagination

如果不能，那么是否有任何其他替代方案（Django 的本机分页或替代包）允许每页多个分页？

我想显示大约 5 个对象的列表，每个对象都有自己的分页上下文。

为方便起见，这里是[django-pagination 的文档](http://pypi.python.org/pypi/django-pagination)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-14T16:12:15.650

我知道这篇文章很旧，但它仍然是相关的。以下将适用于 Django 1.9。

这是如何做到的，

视图.py

```
def myview():
    Model_one = Model.objects.all()
    paginator = Paginator(Model_one, 6)
    page = request.GET.get('page1')
    try:
        Model_one = paginator.page(page)
    except PageNotAnInteger:
        Model_one = paginator.page(1)
    except EmptyPage:
        Model_one = paginator.page(paginator.num_pages)

    Model_two = Model_other.objects.all()
    paginator = Paginator(Model_two, 6)
    page = request.GET.get('page2')
    try:
        Model_two = paginator.page(page)
    except PageNotAnInteger:
        Model_two = paginator.page(1)
    except EmptyPage:
        Model_two = paginator.page(paginator.num_pages)

    context = {'Model_one': Model_one, 'Model_two': Model_two}
    return render(request, 'template.html', context) 
```

上面重要的是'page1'和'page2'。

在模板中，

```
 {% if model_one %}
      <div class="col-md-12 well">
        {% for item in model_one %}
        ..... iterates through model_one.....
        {% endfor %}
        <span class="step-links pagination">
            {% if model_one.has_previous %}
                <a href="?page1={{ model_one.previous_page_number }}"> previous </a>
            {% endif %}
            <span class="current">
                Page {{ model_one.number }} of {{ model_one.paginator.num_pages }}
            </span>
            {% if model_one.has_next %}
                <a href="?page1={{ model_one.next_page_number }}"> next </a>
            {% endif %}
        </span>
      </div>
      {% endif %}
      {% if model_two %}
      <div class="col-md-12 well">
        {% for item in model_two %}
        ..... iterates through model_two.....
        {% endfor %}
        <span class="step-links pagination">
            {% if model_two.has_previous %}
                <a href="?page2={{ model_two.previous_page_number }}"> previous </a>
            {% endif %}
            <span class="current">
                Page {{ model_two.number }} of {{ model_two.paginator.num_pages }}
            </span>
            {% if model_two.has_next %}
                <a href="?page2={{ model_two.next_page_number }}"> next </a>
            {% endif %}
        </span>
      </div>
      {% endif %} 
```

再次使用“page1”和“page2”来区分每个模型的分页。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T08:48:18.407

当然，这是可能的。我不能代表 django-pagination 包，但绝对可以使用默认的 Django`Paginator`类。您可以在视图中创建任意数量的它们。只需选择不同的 GET 参数来为每个参数指定页面即可。

# mysql - 从 Mysql 表中获取前 5 个客户

> ID：10511876
> 
> 赞同：0
> 
> 时间：2012-05-09T07:47:13.910
> 
> 标签：mysql

我有一个表'tbl_orders'，该表包含以下内容

```
order_id | customer_id | grand_total 
```

现在我需要找出与我有更多订单的 TOP 5 客户

我尝试下面的查询，

```
"SELECT customer_id , count(customer_id) as total_orders FROM `tbl_order` group by customer_id" 
```

但是这个查询只给了我每个客户的所有 customer_id 和 total_orders 并且我想获取 TOP 5 客户，即我有更多订单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:56:40.777

添加到 DonCallisto 的答案中，您可能还希望按最高订单数进行排序。不然进不了前五。

```
SELECT customer_id , count(order_id) as total_orders 
FROM `tbl_order` 
GROUP BY customer_id 
ORDER BY total_orders DESC
LIMIT 5 
```

请注意，我还将计数列从 customer_id 更改为 order_id。这在功能上没有任何区别，但对于阅读您的代码的人来说更有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:48:00.923

```
SELECT customer_id , count(customer_id) as total_orders 
FROM `tbl_order` GROUP BY customer_id ORDER BY total_orders DESC LIMIT 5 
```

# jquery - 使用 jQuery 将选择框设置为其默认选定索引

> ID：10511879
> 
> 赞同：2
> 
> 时间：2012-05-09T07:47:28.653
> 
> 标签：jquery, html

好的，我有一个选择框

```
<select id="txtPriority" style="color:#008000;">
    <option value="0" style="color:#0000FF;">Low</option>
    <option value="1" selected="selected" style="color:#008000;">Normal</option>
    <option value="2" style="color:#B22222;">Critical</option>
</select> 
```

现在使用该选择框，我想创建一个按钮**，单击**该按钮会将选择框的选定项返回到`<option>`具有`selected="selected"`. 现在这可以用一个简单的 jQuery 代码实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T07:54:28.883

如果我很好理解，则无需使用 jQuery：只需将该选择包装在一个表单中并使用重置按钮（请参阅[http://jsfiddle.net/vwqVJ/5/](http://jsfiddle.net/vwqVJ/5/)）

```
<form ...>
    <select id="txtPriority" style="color:#008000;">
    ...
    </select>

    <button type="reset">Restore choice</button>
</form> 
```

这样，当你改变选择时，你总是可以回到初始状态

如果您需要改用 jQuery，只需在表单元素上调用 reset 方法，例如

```
$('form').get(0).reset() 
```

否则，如果你根本没有表单（但你真的应该使用它），只需使用

```
$('#txtPriority').val($('#txtPriority option[selected]').val()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:53:31.333

我不知道“将返回选择框的选定项目的按钮”的含义但是

```
$("select#txtPriority option:selected").first(); 
```

会给你选择的选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T07:53:59.670

```
$('#txtPriority').val('1');  //try this 
```

# objective-c - iOS：UIImage 的初始化

> ID：10511882
> 
> 赞同：2
> 
> 时间：2012-05-09T07:47:48.310
> 
> 标签：objective-c, uiimage, ios5

哪个调用是正确的？似乎两个电话都有相同的结果。

```
UIImage *img = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"]]; 
```

或者

```
UIImage *img = [[UIImage alloc] imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:55:34.170

首先是正确的，因为 imageWithContentsOfFile 是一个类方便方法（类方法）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-09T07:53:13.977

初始化 UIImage 的最简单方法是...

```
UIImage *img = [UIImage imageNamed: @"image.png"]; 
```

# vb.net - 日期时间选择器的格式

> ID：10511886
> 
> 赞同：0
> 
> 时间：2012-05-09T07:47:56.347
> 
> 标签：vb.net, visual-studio-2005, datetimepicker, regional-settings

```
dtpPurDate.CustomFormat = "dd-MM-yyyy"
dtpPurDate.Text = DT.Rows(i)("PurDate") 
```

在 Access 中，PurDate 是 1/1/1900，但在日期时间选择器中显示为 01-01-2000。此时系统区域设置的短日期格式如

![短日期格式](../Images/b4a6bf97f1bdb891d4647a1eddc5de58.png)

如果是 d/M/yyyy，则显示为 01-01-1900。

无论区域设置是什么，我应该如何设置日期时间选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:19:50.197

您正在使用自定义格式字符串`dd-MM-yyyy`。使用此自定义格式字符串，`-`字符被视为文字，并原样复制到结果字符串中。`-`因此，无论您的环境的区域设置如何，您的所有日期都将用作日期分隔符。

相反，您想`-`用魔法替换文字`/`。这是[一个特殊值](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)，它向控件指示您要使用从当前区域性的[`DateTimeFormatInfo.DateSeparator`属性中检索到的适当的本地化日期分隔符。](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.dateseparator.aspx)

因此，您的自定义格式字符串应重写为：`dd/MM/yyyy`.

# php - 注销后防止返回按钮

> ID：10511893
> 
> 赞同：18
> 
> 时间：2012-05-09T07:48:03.863
> 
> 标签：php, javascript, jquery

我不希望用户在注销后通过单击返回按钮返回到安全页面。在我的注销代码中，我正在取消设置会话并重定向到登录页面。但是，我认为浏览器正在缓存页面，因此尽管会话从注销中被破坏，它仍然可见。

我可以通过不允许浏览器缓存来避免这种情况

`header("Cache-Control", "no-cache, no-store, must-revalidate")`

但是这样我就失去了浏览器缓存的优势。

请提出一个更好的方法来实现这一点。我觉得，javascript客户端必须有一种处理方法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T09:04:56.023

在 PHP 而不是 javascript 中实现这一点。

在每个页面的顶部，检查用户是否登录。如果没有，他们应该被重定向到登录页面：

```
<?php 
      if(!isset($_SESSION['logged_in'])) : 
      header("Location: login.php");  
?> 
```

正如您所提到的，在注销时，只需取消设置 logged_in 会话变量，然后销毁会话：

```
<?php
      unset($_SESSION['logged_in']);  
      session_destroy();  
?> 
```

如果用户现在单击返回，则没有可用的 logged_in 会话变量，并且页面将不会加载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-03T11:23:49.553

我遇到了同样的问题，花了一整天的时间来解决它，最后纠正如下：

如果用户通过身份验证，则在登录验证脚本中设置一个会话值，例如如下：

```
$_SESSION['status']="Active"; 
```

然后在用户配置文件脚本中放入以下代码片段：

```
<?php

session_start();

if($_SESSION['status']!="Active")
{
    header("location:login.php");
}

?> 
```

上面的代码所做的是，只有且仅当`$_SESSION['status']`设置`"Active"`为时才会转到用户配置文件，并且`"Active"`只有当用户通过身份验证时，此会话密钥才会设置为... [注意否定 ['！'] 在上面的代码片段中]

大概注销代码应该如下：

```
{
    session_start();
    session_destroy();
    $_SESSION = array();
    header("location:login.php");
} 
```

希望这可以帮助...！！！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-06T14:02:57.590

这是我在我的应用程序中使用的一个简单的解决方案。

在登录 HTML 页面（或注销后重定向到的任何页面）的脚本标记内添加以下代码

```
<script>
    history.pushState(null, null, null);
    window.addEventListener('popstate', function () {
        history.pushState(null, null, null);
    });
</script> 
```

它将禁用后退按钮。您将无法通过单击返回按钮返回。

注意：未在 Safari 上测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T07:54:46.057

我认为您唯一的服务器端选项是禁止缓存。如果您使用的是 Javascript 繁重的应用程序，这实际上并没有那么糟糕，因为您的主要 HTML 可能只是一系列 JS 调用，然后动态生成视图。这样一来，大部分数据（JS MVC 和核心代码）都被缓存了，但实际的页面请求却没有。

要添加到下面粘贴的评论，我建议在加载期间添加一个小的 AJAX 调用，即使缓存页面会触发到您的后端并检查会话。如果未找到会话，它将重定向用户。这是客户端代码，不是安全修复，当然，但看起来更好。

你可以用

> 如果所有其他方法都失败了，一个廉价的修复方法是在注销页面上显示“出于安全原因请关闭此窗口”消息。– izb 2012 年 5 月 9 日 8:36

但就像NB说的

> 您不必禁用任何东西。如果他们返回，则会为他们提供受限制页面的缓存版本。如果他们试图点击它，什么都不会起作用，因为不会设置适当的会话。– 注意 2012 年 5 月 9 日 7:50

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:32:38.217

您可以在每个受限页面上插入条件/函数，检查是否设置了适当的会话变量。这样，您可以打印 2 个版本的页面（一个用于有效用户，一个用于重定向到登录页面）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T08:38:13.440

避免用户返回不是一个很好的理由，最重要的是根本不安全。

如果您在网站上的每个“管理员”操作之前测试用户的会话，即使用户点击后退按钮，看到缓存页面并尝试某些操作，您也应该没问题。

由于会话不再有效，“关系”将返回错误。

相反，您应该专注于拥有一个真正安全的后台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-03T15:30:53.597

这是一个简单快捷的解决方案。

在登录表单标签中添加`target="_blank"`在不同窗口中显示内容的标签。然后在注销后只需关闭该窗口并解决后退按钮问题（Safari 浏览器）。

即使尝试使用历史记录也不会显示该页面，而是重定向到登录页面。这对于 Safari 浏览器来说很好，但对于 Firefox 等其他浏览器来说`session_destroy();`，它会处理它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-13T06:24:17.673

您需要登录的页面，`setInterval`每 1000 毫秒使用一次，并检查用户是否已登录或未使用 ajax。如果用户会话无效，将他重定向到登录页面。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-22T20:37:07.020

请注意，尽管用户在重置会话数据和/或 cookie 后无法更改任何内容，但他们仍然可以看到登录用户在上次访问时可以访问的常规信息。这是由浏览器缓存页面引起的。

您必须确保在登录用户可访问的每个页面上添加标题，告诉浏览器数据是敏感的，他们不应该缓存后退按钮的脚本结果。重要的是添加

```
header("Cache-Control: no-cache, must-revalidate"); 
```

请注意，除了此标头下脚本的直接结果之外的其他元素仍将被缓存，您可以从中受益。看到您逐渐加载部分页面并使用此标头标记敏感数据和主要 HTML。

正如答案所暗示的那样，取消设置全局变量的`logged_in`一部分`$_SESSION`可以实现注销，但请注意，首先，您不需要像[PHP`session_destroy()`文档中提到的那样销毁会话](http://php.net/manual/en/function.session-destroy.php "文件")

> 注意：您不必从常规代码中调用 session_destroy()。清理 $_SESSION 数组而不是破坏会话数据。

其次，您最好不要破坏会话，正如文档中的下一个警告所解释的那样。

另外，`unset()`是一个惰性函数；这意味着它不会应用效果，直到下一次使用有问题的（部分）变量。在敏感情况下使用赋值立即生效是一种很好的做法，主要是可以在并发请求中使用的全局变量。我建议你改用这个：

```
$_SESSION['logged_in'] = null; 
```

并让垃圾收集器收集它，同时它作为登录用户无效。

最后，完成解决方案，这里有一些功能：

```
<?php
/*
 * Check the authenticity of the user
 */
function check_auth()
{
   if (empty($_SESSION['logged_in']))
   {
      header('Location: login.php');
      // Immediately exit and send response to the client and do not go furthur in whatever script it is part of.
      exit();
   }
}

/*
 * Logging the user out
 */
function logout()
{
   $_SESSION['logged_in'] = null;
   // empty($null_variable) is true but isset($null_variable) is also true so using unset too as a safeguard for further codes
   unset($_SESSION['logged_in']);
   // Note that the script continues running since it may be a part of an ajax request and the rest handled in the client side.
} 
```

# c++ - 死锁和/或在线程死之前返回

> ID：10511896
> 
> 赞同：2
> 
> 时间：2012-05-09T07:48:08.893
> 
> 标签：c++, pthreads

我在同样的情况下被困了大约 2 天，我非常感谢任何帮助。主线程正在调用该`initDevice()`函数，该函数正在打开文件并创建一个新线程，他将成为该`writeToDeviceHandler()`函数的“写入”线程。从`write2device()`main() 调用，应该插入新任务以​​写入（将来）到`map<int,Task*>`. 问题是，有时应用程序会陷入某种无限循环或死锁，有时它会写入 <(# of tasks) 来写入。任何人都可以查看代码中是否有任何问题？谢谢！

```
int write2device(char *buffer, int length)
{
    if(is_running)
    {
        pthread_mutex_lock(&tasks_mutex);//LOCK
        int curr_id = getNextAvailableId();
        Task* new_task = new Task(buffer,length, curr_id);
        tasks[curr_id] = new_task;
        pthread_cond_signal(&tasks_cv);
        given_ids.insert(curr_id);
        pthread_mutex_unlock(&tasks_mutex);//UNLOCK
        return curr_id;
    }
    return FAIL;
}

int initdevice(char *filename)
{
    is_running = true;
    pthread_cond_signal(&tasks_cv);
    output_file.open(filename);
    if(!output_file.is_open())
    {
        cerr << "Error opening file" << endl;
        is_running = false;
        return SYSTEM_ERROR;
    }
    int res = pthread_create(&writing_thread, NULL, writeToDeviceHandler, NULL);//Create the writing to file thread.
    if(res != 0)
    {
        cerr <<  "Error creating the writing thread" <<endl;
        exit(FAIL);
    }

    return SUCCESS;
}

void *writeToDeviceHandler(void *arg)
{
    Task* curr_task;
    while(is_running)
    {
        pthread_mutex_lock(&tasks_mutex);
        cout << "IN LOOP - size of db: " << tasks.size() << endl;
        if(tasks.empty())
        {
            pthread_cond_wait(&tasks_cv, &tasks_mutex);
        }
        if(tasks.empty()) cout << "Empty, still finding thread" <<endl;
        curr_task = tasks.begin()->second;
        if(curr_task == NULL)
        {
            pthread_mutex_unlock(&tasks_mutex);
            continue;
        }
        //copy from tasks to file
        output_file.write(curr_task->getBuff(), curr_task->getLength());

        ids.remove(curr_task->getId());
        tasks.erase(curr_task->getId());
        delete curr_task;
        pthread_mutex_unlock(&tasks_mutex);
    }

    pthread_exit(NULL);
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:07:03.543

您的代码不正确，因为它没有围绕`pthread_cond_wait`调用的循环。呼叫可以在`pthread_cond_wait`虚假唤醒时返回。您**必须**在它返回后检查您的唤醒条件。在您的情况下，它看起来应该是这样的：

```
while (task.empty ())
  pthread_cond_wait(&tasks_cv, &tasks_mutex); 
```

您的代码也缺少错误检查。请检查所有函数的所有返回值是否有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:19:40.027

您的`writeToDeviceHandler`代码在持有互斥锁的同时完成所有工作，完全违背了拥有线程的意义。如果另一个线程想给这个线程工作，它必须获取`tasks_mutex`. 为此，它必须完成，直到该线程完成写入并释放互斥锁。那么，为什么要打扰这个线程呢？

当你有一个互斥锁来保护需要完成的工作时，重点是在释放互斥锁的情况下实际*完成*工作。这样，其他线程就不必在您完成工作时等待。

# jquery - 为一项活动分配多个班级

> ID：10511897
> 
> 赞同：62
> 
> 时间：2012-05-09T07:48:09.997
> 
> 标签：jquery, class, events

我有一个点击事件，我想分配给更多的班级。这样做的原因是我在我的应用程序的不同位置使用此事件，并且您单击的按钮在不同位置具有不同的样式。

我想要的是 $('.tag' '.tag2') 之类的东西，这当然行不通。

```
 $('.tag').click(function (){
        if ($(this).hasClass('clickedTag')){
            // code here
        }

        else {
             // and here
        }
    }); 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-09T07:49:35.000

## 方法#1

```
function doSomething(){
    if ($(this).hasClass('clickedTag')){
        // code here
    }
    else {
         // and here
    }
}

$('.tag1').click(doSomething);
$('.tag2').click(doSomething);

// or, simplifying further
$(".tag1, .tag2").click(doSomething); 
```

## 方法#2

这也将起作用：

```
​$(".tag1, .tag2").click(function(){
   alert("clicked");    
});​ 
```

[小提琴](http://jsfiddle.net/Afg5s/1/)

如果有可能重用逻辑，我更喜欢单独的函数（方法＃1）。

另请参阅[如何选择具有多个类的元素？](https://stackoverflow.com/questions/1041344/jquery-multiple-class-selector)用于处理同一项目的多个类。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T07:52:00.100

您可以使用 jQuery 一次选择多个类，如下所示：

```
$('.tag, .tag2').click(function() {
    var $this = $(this);
    if ($this.hasClass('tag')) {
        // do stuff
    } else {
        // do other stuff
    }
}); 
```

为 $()​​ 函数提供第二个参数，将选择器的范围限定为在具有 class 的元素中`$('.tag', '.tag2')`查找。`tag``tag2`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-09T07:55:59.140

```
 $('.tag1, .tag2').on('click', function() {

      if ($(this).hasClass('clickedTag')){
         // code here
      } else {
         // and here
      }

   }); 
```

或者

```
function dothing() {
   if ($(this).hasClass('clickedTag')){
        // code here
    } else {
        // and here
   }
}

$('.tag1, .tag2').on('click', dothing); 
```

或者

```
 $('[class^=tag]').on('click', dothing); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-09T07:50:34.967

就像这样：

```
$('.tag.clickedTag').click(function (){ 
 // this will catch with two classes
}

$('.tag.clickedTag.otherclass').click(function (){ 
 // this will catch with three classes
}

$('.tag:not(.clickedTag)').click(function (){ 
 // this will catch tag without clickedTag
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T07:52:08.373

你有没有试过这个：

```
 function doSomething() {
     if ($(this).hasClass('clickedTag')){
         // code here
     } else {
         // and here
     }
 }

 $('.tag1, .tag2').click(doSomething); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T07:59:52.023

```
 $('[class*="tag"]').live('click', function() {
      if ($(this).hasClass('clickedTag')){
         // code here
      } else {
         // and here
      }
   }); 
```

# php - Symfony2：在每个动作上调用控制器/文件

> ID：10511899
> 
> 赞同：1
> 
> 时间：2012-05-09T07:48:21.693
> 
> 标签：php, javascript, service, symfony, controller

我正在用 Symfony2 做一个巨大的项目。前端是 javascript/html5 画布。对于站点更改，我使用 ajax 请求。

现在我想调用一个 php 文件，该文件应该与每个用户操作一起执行。有没有一种优雅的方式来做到这一点？

为了更好地理解：我正在做某种游戏和 php 检查，如果发生了什么事（招聘完成，建筑物完成等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:48:13.903

看看[JMSAopBundle](https://github.com/schmittjoh/JMSAopBundle/blob/master/Resources/doc/index.rst)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T21:49:37.093

如果通过用户操作您的意思是执行控制器操作（即服务器端），我会做的是听 kernel.controller 事件：[http ://symfony.com/doc/current/book/internals.html](http://symfony.com/doc/current/book/internals.html)

因此您可以在调用目标控制器之前加载脚本并执行它

```
use Symfony\Component\HttpKernel\Event\FilterControllerEvent;

public function onKernelController(FilterControllerEvent $event)
{
    $controller = $event->getController();
    //...
    // call your php file here

    // the controller can be changed to any PHP callable
    $event->setController($controller);
} 
```

我认为您甚至不需要修改控制器，因此您可以删除第一行和最后一行...

# javascript - 使用 Javascript 将 URL 转换为可点击的链接

> ID：10511900
> 
> 赞同：0
> 
> 时间：2012-05-09T07:48:24.887
> 
> 标签：javascript, html, url

我在表单中有一个名为“patentURL”的文本字段。用户在保存记录时在此字段中输入完整的 URL。当用户搜索这条记录时，输入的 URL 应该是可点击的。即在结果页面中，输入的 URL 应该是可点击的。

如何使用 Javascript 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:54:37.457

有一个非标准函数，但传播广泛——link() [^(MDC)](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/link)

```
function makeClickable(url) {
    return String.prototype.link ? url.link(url) : '<a href="'+url+'">'+url+'</a>';
}

function makeDOMClickable(url) {
    var link = document.createElement('a');
    link.href = url;
    link.innerHTML = url;
    return link;
}

var url = "http://localhost";
document.write ( makeClickable ( url ) );
document.body.appendChild ( makeDOMClickable ( url ) ); 
```

[演示](http://jsfiddle.net/6mYCf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:51:39.627

如果我理解正确，您应该将网址放在链接中：

```
<a href = "URL_ENTERED">URL_ENTERED</a> 
```

使用 javascript：

```
var link = document.createElement('a');//create link
link.setAttribute('href', 'URL_ENTERED');//set href
link.innerHTML = 'URL_ENTERED';//set text to be seen
document.body.appendChild(link);//add to body 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T08:00:38.377

`href`在 Javascript中调用的示例：

```
function call_link() {
    location.href = 'www.google.com';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T03:05:14.647

你可以使用javascript正则表达式来实现这个看看

```
function convert()
{
  var text=document.getElementById("url").value;
  var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
  var text1=text.replace(exp, "<a href='$1'>$1</a>");
  var exp2 =/(^|[^\/])(www\.[\S]+(\b|$))/gim;
  document.getElementById("converted_url").innerHTML=text1.replace(exp2, '$1<a target="_blank" href="http://$2">$2</a>');
} 
```

通过这种方式，您可以将任何文本转换为链接，您可以在此处找到更多详细信息[http://talkerscode.com/webtricks/convert-url-text-into-clickable-html-links-using-javascript.php](http://talkerscode.com/webtricks/convert-url-text-into-clickable-html-links-using-javascript.php)

# sql - 无法形成 SQL

> ID：10511904
> 
> 赞同：1
> 
> 时间：2012-05-09T07:48:32.063
> 
> 标签：sql, sqlite

我有订单表，其中根据收到的订单日期时间（时间戳）存储订单。

现在，我只想要 2 个日期之间的订单，而且，对于那些日期的每一天，仅在下午 2 点到 4 点之间。

我怎样才能做到这一点，最好是在单个 SQL 查询中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:05:18.973

我不是绝对确定 SQLLite 语法，但以下内容可能会让您走上正轨：

```
SELECT *
FROM [orders]
WHERE orderReceived >= @startDate
    AND orderReceived < @endDate
    AND (strftime("%H", orderReceived) = "14"
        OR strftime("%H", orderReceived) = "15") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:04:13.260

**在where**子句中添加以下内容：

```
time(mytimecol) > '14:00:00' AND time(mytimecol) < '16:00:00' 
```

[SQLite 中的](http://www.sqlite.org/lang_datefunc.html)CF日期和时间函数。

# java - RunTimeException 被选中/未选中？

> ID：10511915
> 
> 赞同：0
> 
> 时间：2012-05-09T07:49:02.347
> 
> 标签：java, runtimeexception

我对已检查/未检查的异常感到困惑。我认为 RunTimeException 是未经检查的异常，那么为什么它属于 Exception 类？

考虑一个案例..我的超类构造函数抛出 RunTimeException 而子类构造函数没有抛出任何东西..那么它不会在子类中给出任何编译时错误。为什么即使 RuntimeException 是未经检查的异常也会发生？

谢谢，Gunjan Shah。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:51:47.813

已检查异常是 Exception 的任何子类（或 Exception 本身），不包括类 RuntimeException 及其子类。

检查异常会迫使客户端程序员处理抛出异常的可能性。例如，java.io.FileInputStream 的 read() 方法抛出的 IOException

未经检查的异常是 RuntimeException 及其任何子类。类 Error 及其子类也未选中。

但是，对于未经检查的异常，编译器不会强制客户端程序员捕获异常或在 throws 子句中声明它。事实上，客户端程序员甚至可能不知道异常可能会被抛出。例如，String 的 charAt() 方法抛出的 StringIndexOutOfBoundsException。

必须在编译时捕获已检查的异常。运行时异常不需要。错误通常是不可能的，因为它们往往是不可恢复的。

# java - 在服务器上接收损坏的流

> ID：10511919
> 
> 赞同：1
> 
> 时间：2012-05-09T07:49:11.323
> 
> 标签：java, spring, stream, remoting

我有一个使用 Spring Remoting (HttpInvokerServiceExporter) 向服务器发送请求的应用程序。Normaly 工作正常。但是由于字节流损坏，某些请求会在服务器上导致错误。然后我得到这样的错误：

```
java.io.StreamCorruptedException: invalid handle value: 0050001A
at java.io.ObjectInputStream.readHandle(ObjectInputStream.java:1433)

java.lang.ClassNotFoundException: org.smitch.debol.service.bo.type.MinPoadAmount
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)

java.lang.ClassCastException: cannot assign instance of java.lang.Integer to field java.math.BigDecimal.intVal of type java.math.BigInteger in instance of java.math.BigDecimal
at java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2032)

org.springframework.web.servlet.DispatcherServlet: Could not complete request
java.io.StreamCorruptedException: invalid handle value: 005001DB
at java.io.ObjectInputStream.readHandle(ObjectInputStream.java:1433)

org.springframework.web.servlet.DispatcherServlet: Could not complete request
    java.io.StreamCorruptedException: invalid type code: 50
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1356) 
```

ClassNotFoundException 我经常悄悄地出现。

```
org.smitch.debol.service.bo.type.MinPoadAmount
org.smitch.Pebol.service.bo.type.CashAmount
org.smitch.debol.service.bo.type.CaPhAmount
org.smitch.debol.serviPe.bo.type.EmvProfile 
```

然后它总是一个**P**在 Classname 的某个地方不应该在那里。但是可以连续 100 个请求没有问题。

任何提示是什么在动摇我美丽的溪流？

谢谢，

博斯科普

# php - 获取这个的 Unix 时间戳

> ID：10511920
> 
> 赞同：0
> 
> 时间：2012-05-09T07:49:16.653
> 
> 标签：php, date, time

我很害怕，但我找不到任何功能？我可以做这个

```
echo date("Y-m-d g:i:s a",  1333442414662) . "\n"; 
```

但我找不到任何函数来从函数转换时间

```
date("Y-m-d H:i:s", time()); 
```

到 unix 时间戳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:52:06.287

时间？[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:23:37.717

这很简单：

```
$yourdate =date("Y-m-d H:i:s", time());

strtotime($yourdate); 
```

# c - regcmp 模式 $0 含义

> ID：10511921
> 
> 赞同：2
> 
> 时间：2012-05-09T07:49:33.847
> 
> 标签：c, linux, unix

我试图了解如何`regcmp()`和`regex()`工作。我的代码是

```
int main()
{ 
    char *newcursor, *name; char *string; char ret0[9];

    name = regcmp("([A-Za-z][A-za-z0-9]{0,4})$0", (char *)0);
    printf("name %s\n",&(*name));
    newcursor = regex(name, "filter:attrsonly:attrs", ret0);
    printf("newcursor %s  and ret0 %s\n",newcursor,ret0);
    return 0;
} 
```

在第 12 行`$0`，模式末尾`([A-Za-z][A-za-z0-9]{0,4})$0` 是什么意思？

我正在用LINUX中的 and 和`regex()`函数`regcmp()`来将代码从 UNIX 移植到 LINUX，因为 LINUX中没有。`regexec()``regcomp()``regcmp()``regex()`

如果我`$0`从模式中删除，它只会在 LINUX 中给出预期的结果`regcomp()`。是什么`$0`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:35:06.963

让我引用[`man 7 regex`](http://linux.die.net/man/7/regex)：

```
 '$' (matching the null string at the end of a line), 
```

Unix 程序很可能使用了基本的正则表达式：

```
 Obsolete ("basic") regular expressions differ in several respects.
     [ ... ]
    '$' is  an  ordinary  character except  at the end of the RE or(!)
    the end of a parenthesized subexpression
     [ ... ] 
```

编辑：好的，我也应该查一下 unix- [`regcmp`](http://www.unix.com/man-page/All/3c/regcmp/)，我以为你已经这样做了：

```
 ( ... )$n         The value of the enclosed regular expression is to be
                     returned. The value will be  stored  in  the  (n+1)th
                     argument following the subject argument. At most, ten
                     enclosed regular expressions are allowed. The regex()
                     function makes its assignments unconditionally. 
```

所以在这种情况下，`$0`just 指定了匹配结果应该去哪里，所以你可以忽略它。

# android - 如何从单独的类中更改 ListView Daynamically？

> ID：10511924
> 
> 赞同：2
> 
> 时间：2012-05-09T07:49:39.557
> 
> 标签：android, android-layout, android-widget

我在一个单独的线程中从网络接收数据（这是在其他一些类中，这里是整个问题，但是由于**遗留代码的固有复杂性，我****不能**将接收代码放在活动类中）并且我想更新接收数据时的 ListView（实时）.. 为此，我创建了一个 ListView、ArratAdapter 和一个 ArrayList variavles...以下是一些相关代码

 **```
public class LogInSuccessActivity extends Activity {
    private String LOG_TAG = "LogInSuccessActivity";
    private TextView welcomeTxtLbl = null;
    private ListView buddyListView = null;
    private ArrayAdapter<Buddy> buddyListAdapter = null;
    // BuddyList
    private ArrayList<Buddy> buddyList = null;

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loginsuccess);
        // get the TextView and ListView
        welcomeTxtLbl = (TextView) findViewById(R.id.loginsuceeslbl);
        buddyListView = (ListView) findViewById(R.id.buddylistview);

        String uname = getIntent().getStringExtra("username");
        if (uname != null) {
            welcomeTxtLbl.setText("Welcome " + uname + ", Greetings!!");
        } else {
            welcomeTxtLbl.setText("SignIn successfull !!");
        }
        buddyList = new ArrayList<Buddy>();
        buddyListAdapter = new ArrayAdapter<Buddy>(this,
                android.R.layout.simple_list_item_1, buddyList);
        buddyListView.setAdapter(buddyListAdapter);

        // persist the context
        ReceiverThread.loginSuccessActi = LogInSuccessActivity.this;
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onResume()
     * 
     * @Override protected void onStart() { // TODO Auto-generated method stub
     * super.onStart();
     * 
     * }
     */

    @Override
    protected void onStop() {
        super.onStop();
        Log.e(LOG_TAG, "onStop is called ");
        buddyListAdapter.clear();
        buddyList.clear();

    }

    public void addBuddy(Buddy buddy) {
        buddyList.add(buddy);
        buddyListAdapter.notifyDataSetChanged();
    }

    Runnable updateTheListView = new Runnable() {
        @Override
        public void run() {
            // synchronized (buddyList) {
            buddyListAdapter.notifyDataSetChanged();

            // }
        }
    };

    public void refreshTheListView(Buddy buddy) {
        System.out.println("Refreshing the ListView list size is : "
                + buddyList.size());
        buddyList.add(buddy);
        // buddyListAdapter.add(buddy);
        // buddyListView.post(updateTheListView);
        this.runOnUiThread(updateTheListView);
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onDestroy()
     */
    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        Log.e(LOG_TAG, "onDestroy is called ");
        super.onDestroy();
        buddyList = null;
        buddyListAdapter = null;
        buddyListView = null;
        ReceiverThread.loginSuccessActi = null;
    }

} 
```

`addBuddy()`现在，每当收到新的好友时，我都会从线程中调用该方法......这是一个静态方法，因为接收者线程在不同的类中......

但是代码不起作用，请给我建议以改进此代码。我知道它不好，但我不知道如何解决它，因为我缺乏对安卓编程的了解。我还在某处读到`DataSetObserver`它们可以在我的情况下使用..我是android领域的新手，所以请原谅我缺乏基本概念....谢谢，

**编辑** 我忘了提到的一件事是我没有从单独的线程更新 UI（我知道我不能），我所做的是每当 Somedata （为了简单起见我当然做了所有过滤）到达时我调用 addBuddy()...

现在在 UI 线程上，我将调用`notifyDataSetChanged()`ArrayAdapter 的方法来进行视图更新。

**编辑 2** 以下是我接收数据的另一个线程中的代码..

```
 if (loginSuccessActi != null) {
                        loginSuccessActi.refreshTheListView(new Buddy(values));
//                      loginSuccessActi.addBuddy(new Buddy(values));
                    } 
```

我收到以下错误 **适配器的内容已更改，但 ListView 未收到通知。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:11:22.033

您应该阅读android 开发者网站上的[Processes and Threads 。](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html "进程和线程")

即使您在单独的线程上进行工作，也无法从另一个进程访问 UI 线程。

解决此问题的一种方法是实现[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html "异步任务")来完成工作，然后通过该`onPostExecute`方法更新您的适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:10:45.063

在阅读了几乎所有关于 SO 的类似问题后，我终于通过以下步骤解决了它：-

1.  修复了调用 addBuddy() 方法的线程中的一些设计问题，
2.  将我的 addBuddy 方法更改为

    公共无效addBuddy（最终好友）{

    ```
     Log.i(LOG_TAG, " ADDING BUDDY + " + buddy);
        buddyListView.post(// UI thread ;
                new Runnable() {
                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        synchronized (buddyList) {
                            buddyList.add(buddy);
                            buddyListAdapter.notifyDataSetChanged();
                        }
                        // buddyListAdapter.add(buddy);
                    }
                });
    } 
    ```

我还更改了应用程序的整体设计，因为我在寻找这个问题的答案时变得更聪明了。现在我使用 Singelton 类和静态变量共享数据。如果其他人将来遇到类似问题，以下链接可能会很有用。

[无痛穿线](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)

[单例类](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)

[使用线程](http://www.helloandroid.com/tutorials/using-threads-and-progressdialog)

对于那些有类似问题的人来说，最好的建议是**“相信自己，你可以做到”。****

# css - Wordpress 上每个菜单元素的不同背景

> ID：10511925
> 
> 赞同：0
> 
> 时间：2012-05-09T07:49:42.677
> 
> 标签：css, wordpress, menu, background, drop-down-menu

我正在为画家开发一个 Wordpress 网站，我想使用绘画作为菜单元素的背景，就像这张图片一样：

[http://img829.imageshack.us/img829/7364/capturedcran20120509094.png](http://img829.imageshack.us/img829/7364/capturedcran20120509094.png)

活动页面有颜色，非活动页面为黑白，鼠标悬停时变为彩色。我正在使用高级 WP 主题来获得类似的菜单，但我不知道如何实现此菜单。（这是一个下拉菜单，如果有子菜单，它下面的所有内容都会在出现时下拉，但子菜单上没有空间背景）。

请问您知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:05:17.170

只需使用项目的 ID 并使用 CSS 应用背景。然后添加一个灰度脚本：[http](http://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/) ://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/如果需要，您还可以应用 CSS 后备（不是灰度，而是不透明度） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:57:42.443

WP 菜单中没有任何类型的选项，但您可以通过从 WP 菜单部分为每个菜单分配类并提供自定义 CSS 来实现

喜欢

![在此处输入图像描述](../Images/88cd7ebb37b711814cc48b3c83f0ea5e.png)

和带有 bg 图像的 CSS

```
.dashboard a {
background: url(../../images/navicons/81.png) no-repeat;
} 
```

# triggers - 如何在超过 200 条记录上运行 salesforce apex 触发器

> ID：10511926
> 
> 赞同：0
> 
> 时间：2012-05-09T07:50:07.373
> 
> 标签：triggers, salesforce, apex-code

我在 Salesforce 的帐户对象上编写了一个触发器（插入后，更新前）。

问题是，当我通过在 apex 执行器中写入 apex 来更新 1000 条记录时，此触发器仅处理 200 条记录。

如何启用触发器来处理超过 200 条记录？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:21:19.043

触发器在所有记录上运行，但以 200 条为一组，如果更新 1000 条记录，触发器将运行 5 次，包含 5 组不同的 200 条记录。

# database-design - 存储分层数据的可能选项

> ID：10511929
> 
> 赞同：0
> 
> 时间：2012-05-09T07:50:23.047
> 
> 标签：database-design, hierarchical

我们需要能够将各种类型的实体映射到 Web 应用程序中不同类型的分层数据。例如，考虑一个名为**Vendor**的实体。我们需要能够将供应商的每个实例映射到地理区域。地理区域在以下层次结构中：

1.  邮政编码 - 最细化的地理区域；例如，*EC2*
2.  地区 - 由邮政编码组成；例如，肯辛顿。每个邮政编码将完全属于一个地区，仅此而已。
3.  城镇 - 由地方组成；例如伦敦。每个地方都将成为一个城镇的一部分，仅此而已。
4.  区 - 由城镇组成；例如，哥伦比亚。
5.  省 - 由地区组成（在某些国家相当于州）；例如，南卡罗来纳州。
6.  地区 - 由省份组成；以东北省为例。
7.  国家 - 由地区组成。
8.  区域 - 由国家组成；以东南亚为例。
9.  大陆 - 由区域组成。

我们有一个完整的邮政编码、地区、城镇、地区、省、地区、国家、地区和大洲的数据库。这当前作为 RDBMS 中的表存在。

我们的用例：

1.  能够在任何级别将供应商与多个地区相关联。例如，我们可以将*雀巢*映射到*欧洲大陆*（一个区域）、*加利福尼亚*（美国的一个省）和*大伦敦*（英国的一个地区）。
2.  能够从映射中排除地理的某些部分。例如，当将*Nestle*映射到*California*时，我们可能想要排除*San Diego*。
3.  如果地理的构成发生变化，则不应要求对该地理所属的映射进行任何更改。例如，如果将邮政编码添加到*Greater London ，则与**雀巢*的映射不需要更改。
4.  能够在数据库中查询**供应商**和地理级别。例如，如果我们查询*雀巢*和*邮政编码*的数据库，我们应该得到*大伦敦*、*加利福尼亚*（减去*圣地亚哥*的邮政编码）和*欧洲大陆*的所有邮政编码。如果我们查询*雀巢*和*国家*的数据库，我们应该得到*英国*（*大伦敦*的国家）、*美国*和*欧洲大陆*的所有国家。

有许多这样的映射与许多不同类型的分层数据，这只是要求之一。

寻找有关存储分层数据和映射的建议。请不要发布涉及在 RDBMS 表中存储数据和映射的答案，因为我已经知道使用 RDBMS 的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:29:58.187

我知道您不是在寻找 RDBMS 解决方案，因为您“知道 RDBMS 的选项” - 但您没有说明您考虑过哪些选项以及您拒绝它们的原因。我相信可能有一个您没有考虑过的 RDBMS 选项，它具有低数据维护和易于数据检索的优点。

我建议您将地理区域分组到具有内卷关系（[邻接模型](http://en.wikipedia.org/wiki/Adjacency_list)）的单个表中。这允许您将供应商覆盖范围描述为地理覆盖范围记录列表。诀窍是尽可能高地记录供应商覆盖率。然后，您还可以列出覆盖范围的排除项。

这是一个建议的逻辑模型：

![逻辑 ERD](../Images/dc8b8ae4f0de69a86c2f118619fa0d40.png)

该`GEOGRAPHY`表可以使用[嵌套集](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)来简化分层地理数据的查询。

确定特定区域的供应商覆盖范围就像确认供应商具有`COVERAGE`兴趣`GEOGRAPHY`（可能在最低级别）同时又不在`COVERAGE EXCLUSION`同一领域一样容易`GEOGRAPHY`。

# sed - 如何从字符串中删除子字符串？

> ID：10511931
> 
> 赞同：1
> 
> 时间：2012-05-09T07:50:25.140
> 
> 标签：sed

我有一个字符串：

```
09/May/2012:05:14:58 +0100 
```

如何`58 +0100`从字符串中删除子字符串？

```
 sed 's/\:[0-9][0-9] \+0100//' 
```

不行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:53:26.727

它确实有效：

```
echo "09/May/2012:05:14:58 +0100"|sed 's/\:[0-9][0-9] \+0100//' 
```

输出：

```
09/May/2012:05:14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:54:07.417

如果它们始终采用这种格式，您可以这样做：

```
s/:[^:]*$// 
```

这基本上消除了（包括）最后一个`:`字符（冒号，后跟任意数量的不是冒号的字符，直到行尾）之外的所有内容。

# struts2 - struts 2 重定向 java.lang.IllegalStateException

> ID：10511938
> 
> 赞同：0
> 
> 时间：2012-05-09T07:50:49.930
> 
> 标签：struts2

我正在我的[网络应用程序](http://www.buscocolegio.com)中创建一个论坛。我有主页，其中显示所有主题和按钮以搜索和创建新线程。如果用户单击最后一个按钮，我会显示一个表单来输入新主题的数据。当用户单击提交时，我将这个新线程存储在 DB 中，然后重定向到显示主页的操作：

```
< action name="showForum" class="es.busco.colegio.actions.ForumAction" method="show">
    < result name="success">/WEB-INF/jsp/forum.jsp< /result>
< /action>

< action name="newTopic" class="es.busco.colegio.actions.ForumAction" method="newTopic">
    < result name="success">/WEB-INF/jsp/newTopic.jsp< /result>
< /action>

< action name="createTopic" class="es.busco.colegio.actions.Forumction" method="insert">
    < result name="success" type="redirect">http://www.buscocolegio.com/Colegio/showForum.action< /result>
</ action> 
```

问题是新主题在数据库和日志中插入了两次`java.lang.IllegalStateException`

当我调试时我看到执行服务调用而不是在 BD 中插入对象，程序执行回到方法的开头，这就是它被插入两次的原因：

```
try{
        Date d=new Date();
        SimpleDateFormat sdf=new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        String s=sdf.format(d);         
        Date d1=sdf.parse(s);
        topic.setDate(d1);
        topic.setText(topic.getText().replaceAll("\n", "<br>"));
        topicService.createTopic(topic);
    }catch (Exception ex){
        logger.error("Error: "+ex,ex);
        return Action.ERROR;
    }
    return Action.SUCCESS;
} 
```

所以在执行 topicService.createTopic(topic); 它回到日期 d=new Date();

有人知道为什么吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:12:09.043

如果没有看到你的jsp代码，我不能肯定地说这是不是正在发生的事情，但实际上我确实遇到了一个动作在IE中执行两次而在Firefox、Chrome和Opera中只执行一次的问题。

我们的一位工程师已将 onclick 事件添加到表单提交按钮，该按钮会在单击时消失。但是，他还在`document.forms[0].submit();`javascript 中包含了一个调用。*仅*在 IE中，这会导致操作执行两次。

因此，请确保通过在普通 HTML 之上调用 javascript submit 来检查您是否不会意外提交表单两次`<input type="submit" value="Submit" />`。

# singleton - EJB-@Singleton 管理查询结果

> ID：10511943
> 
> 赞同：4
> 
> 时间：2012-05-09T07:50:57.230
> 
> 标签：singleton, ejb, stateless-session-bean, stateful-session-bean, session-scope

我应该使用 EJB-@Singleton (javax.ejb.Singleton) 进行统计或监视，还是将统计信息缓存在公共 @SessionScoped-Bean 中会更好？为了澄清我的问题，这里有两种情况：

**情景一：**

用户开始 Web 会话并进行数据库查询以查看统计信息或数据表。这些查询在其会话中完成。因此，10.000 个用户将进行 10.000 个相等的数据库查询。

**场景二：**

用户开始 Web 会话并从预初始化的 @Singleton-Bean 重试统计数据或数据表的数据。@Singleton (javax.ejb.Singleton) 在服务器启动 (@Startup) 的开头进行了查询。因此，10.000 个用户可以从 ONE 缓存 (@Singleton) 中读取数据，而不必查询数据库。如果其他人创建/编辑/删除数据，我的 @Singleton-Bean 会触发其缓存数据的刷新。

所以我的问题是：

*   场景 II 的扩展性是否比场景 I 更好？我猜是。我对吗？
*   还有其他注意事项或需要考虑的事情吗？
*   我知道，Stateless-Beans 比@stateful 或@Singleton 扩展得多。我是否应该考虑使用@Stateless-Bean 并使用 JPA/Hibernate 缓存之类的东西缓存查询。
*   我应该使用@ApplicationScoped (javax.enterprise.context) 而不是@Singleton (javax.ejb.Singleton) 来使用代理吗？会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:29:18.717

是的，场景 2 的规模比 1 更好，我们在这里谈论的是效率。

最好使用较低层（即持久层）来缓存实体，因为这样做是它的工作。

使用哪个取决于您使用的服务器，您是否使用完整的企业服务器，如果是，那么更好地利用它提供的事务，如果您只是使用诸如tomcat之类的Web容器，那么最好使用托管bean。

# xaml - 获取 StorageFile (WinRT) 中存储文件的 URI

> ID：10511946
> 
> 赞同：3
> 
> 时间：2012-05-09T07:51:17.137
> 
> 标签：xaml, windows-8, windows-runtime, isolatedstoragefile

我正在构建一个地铁应用程序，并且在将其保存在 StorageFile 中后，我试图获取图像的 Uri，这是我的代码：

```
StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync("samplefile.dat", CreationCollisionOption.ReplaceExisting);

IRandomAccessStream raStream = await file.OpenAsync(FileAccessMode.ReadWrite);
IOutputStream outStream = raStream.GetOutputStreamAt(0);
DataWriter dw = new DataWriter(outStream);
dw.WriteBytes(img); // I'm saving array of bytes
await outStream.FlushAsync(); 
```

我读了这篇文章：

它说我可以使用 ms-appdata 访问存储的文件，所以我尝试了这个：

```
Uri uri = new Uri("ms-appdata:///samplefile.dat", UriKind.Absolute); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T16:24:51.240

假设它存储在 Local 文件夹中，则 URI 应该是

```
Uri uri = new Uri("ms-appdata:///local/samplefile.dat"); 
```

请注意中间的附加“本地”。

# regex - re.findall 和正则表达式

> ID：10511951
> 
> 赞同：1
> 
> 时间：2012-05-09T07:51:42.980
> 
> 标签：regex, python-2.7, findall

我需要获取类似*内容*的名称：

```
<p>
<a name="blu" title="blu"></a>orense
</p>
<p>
<a name="bla" title="bla"></a>toledo
</p>
<p>
<a name="blo" title="blo"></a>sevilla
</p> 
```

但使用此代码：

```
names = []
matches = re.findall(r'''<a\stitle="(?P<title>[^">]+)"\sname="(?P<name>[^">]+)"></a>''',content, re.VERBOSE)
for (title, name) in matches:
    if title == name:
        names.append(title)
return names 
```

...我得到名字=[]; 怎么了？。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:54:48.783

嗯，很明显，在您的示例文本中，`name`出现在之前`title`，而在您的正则表达式中，`title`预计在之前`name`。这正是您应该使用 HTML 解析器的原因（或其中之一）。[以 BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)为例。

如果您坚持使用正则表达式，只需翻转参数（并确保您永远不会以不同的顺序获得这些属性，并且永远不会获得任何其他属性）：

```
names = []
matches = re.findall(r'''<a\sname="(?P<name>[^">]+)"\stitle="(?P<title>[^">]+)"></a>''',content, re.VERBOSE)
for (name, title) in matches:
    if title == name:
        names.append(title) 
```

结果：

```
>>> names
['blu', 'bla', 'blo'] 
```

# plone - 你能在你的 Plone 产品中定义一个入口点来运行一个脚本，就好像它被 bin/instance run 调用一样

> ID：10511955
> 
> 赞同：4
> 
> 时间：2012-05-09T07:51:54.447
> 
> 标签：plone, batch-processing, zope, buildout, recipe

我有一个批处理作业，我需要偶尔针对我的 Plone 实例运行。它需要访问我的 Plone 产品中的代码和其他 Plone 代码并查询目录。我已将脚本包含在我的 Plone 产品中，目前通过

```
bin/instance run <path to script in eggs directory> 
```

显然，如果我的产品有新版本出现，我需要更改路径以指向新版本的 egg。我想做的是在我的产品的 setup.py 中为脚本定义任何入口点，然后使用 buildout recipe`zc.recipe.egg`这样我就可以运行

```
bin/myscript 
```

我该如何做到这一点，并且仍然提供对顶级`app`对象和安装在我的 Plone 实例中的所有代码的脚本访问权限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T11:02:11.413

从 Zope 2.13 开始，您可以为`zopectl.command`入口点注册脚本。这些将被视为`bin/instance`控制器脚本上的新命令。

例如，以下内容会将您的 egg 中的可调用对象与命令联系起来：

```
[zopectl.command]
mybatch = example.egg.commands:mybatch 
```

您的可调用对象将传递给根级应用程序对象，以及剩余的命令行参数：

```
def mybatch(app, args):
    site = app.mysiteid
    # remember to set up your site correctly (create request, call hooks, etc) 
```

使用 args 为您的脚本实现命令行开关。

请参阅[配置和运行 Zope 文档](http://docs.zope.org/zope2/releases/2.13/operation.html#adding-extra-commands-to-zope)；请注意，您的命令名称不能`-`在名称中使用破折号 ( )。

# excel - 需要Excel表格公式

> ID：10511956
> 
> 赞同：1
> 
> 时间：2012-05-09T07:51:54.107
> 
> 标签：excel, project-management, formula, excel-formula, time-tracking

伙计们，我为一些项目制定了每周计划，如下所示。它是在 Excel 表中创建的

![我的计划](../Images/8c608fb615b45a2f55519c89126eceae.png)

我需要一个 Excel 公式来获得如下报告

*   在 7 天内分配给特定所有者的总时间
*   特定所有者的总打开状态任务

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:07:47.217

如果您对数据透视表不满意...我重新创建了您拍照的 Excel 工作表并创建了您想要的报告。享受！

![在此处输入图像描述](../Images/f3373a4f305f9b07a3bc94b2b4dda38e.png)

同一张表，但查看公式：

![在此处输入图像描述](../Images/c665180d7fee4a057ca574ed30d2d242.png)

我给你的总时间公式只是给你总时间，没有“7天内”的限定词。我不太确定你的意思。7天内如何确定？通过仅添加开始日期在 7 天内的行项目的所有时间？如果是这样，我也可以向您展示如何执行该公式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:51:42.380

我建议使用数据透视表。对于每周小计，使用 =WEEKNUM() 函数在基础数据中创建一个额外的列。

# c# - 在对话框上设置大小

> ID：10511967
> 
> 赞同：0
> 
> 时间：2012-05-09T07:52:16.587
> 
> 标签：c#, asp.net-mvc-3, dialog

我正在使用一个对话框，但它的大小不对，有什么办法可以改变它吗？

```
 <script type="text/javascript">

     $.ajaxSetup({ cache: false });

     $(document).ready(function () {
         $(".openDialog").live("click", function (e) {
             e.preventDefault();

             $("<div></div>")
                .addClass("dialog")
                .attr("id", $(this)
                .attr("data-dialog-id"))
                .appendTo("body")
                .dialog({
                    title: $(this).attr("data-dialog-title"),
                    close: function () { $(this).remove() },

                    modal: true
                })

                .load(this.href);
         });

         $(".close").live("click", function (e) {
             e.preventDefault();
             $(this).closest(".dialog").dialog("close");
         });
     });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:55:38.890

从 jquery 文档中，您可以使用`width`和`height`

[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)

> 对话框的高度，以像素为单位。还支持指定“自动”以使对话框根据其内容进行调整。

```
.dialog({height: 
```

> 对话框的宽度，以像素为单位。

```
.dialog({height: 
```

```
 $.ajaxSetup({ cache: false });

 $(document).ready(function () {
     $(".openDialog").live("click", function (e) {
         e.preventDefault();

         $("<div></div>")
            .addClass("dialog")
            .attr("id", $(this)
            .attr("data-dialog-id"))
            .appendTo("body")
            .dialog({
                width:yourValueHere,//Put width
                height:yourValueHere,//Put height
                title: $(this).attr("data-dialog-title"),
                close: function () { $(this).remove() },

                modal: true
            }) 
```

# java - 为什么不打印异常？

> ID：10511968
> 
> 赞同：2
> 
> 时间：2012-05-09T07:52:17.630
> 
> 标签：java, c, exception-handling, java-native-interface

以下是*java*代码，旁边是*c*代码：

```
package Package;

public class CatchThrow {

private native void doit() throws IllegalArgumentException;

private void callBack() throws NullPointerException {
    System.out.println("In call-back !");
    throw new NullPointerException("CatchThrow.callBack");
}

public static void main(String args[]) {
    CatchThrow c = new CatchThrow();
    try {
        c.doit();
    } catch(Exception exc) {
        System.out.println("\nIn Java : \n\t" + exc);
    }
}

 static {
     System.loadLibrary("CatchThrow");
 }
} 
```

C代码：

```
#include "stdio.h"
#include "Package_CatchThrow.h"

void Java_Package_CatchThrow_doit
   (JNIEnv *env, jobject obj) {
  jthrowable exc;
  jclass cls = (*env)->GetObjectClass(env,obj);
  jmethodID mid = (*env)->GetMethodID(env,cls,"callBack","()V");
  if(mid == NULL) {
    return;
  }
  (*env)->CallVoidMethod(env,obj,mid); // call the java method that throws NullPointerException
  printf("After the call to Call-Back !");
  exc = (*env)->ExceptionOccurred(env);
  if(exc) {
    jclass newExcCls;
    printf("\n");
    //(*env)->ExceptionDescribe(env);  ----> NOTE THE COMMENTED STATEMENT
    //(*env)->ExceptionClear(env);  -----> NOTE THE COMMENTED STATEMENT
    newExcCls = (*env)->FindClass(env,"java/lang/IllegalArgumentException");
    if(newExcCls == NULL) {
        return;
    }
    (*env)->ThrowNew(env,newExcCls,"thrown from c code");
  } 
```

}

当我构建并运行上述程序时，我得到以下输出：

```
In call-back !
After the call to Call-Back !

In Java :
    java.lang.IllegalArgumentException: thrown from c code 
```

*从输出：* C 代码调用 java 函数*callBack*。那里打印了第一条语句。在调用返回调用旁边的语句后，即`After the call to Call-Back !`打印出来。但是`throw new NullPointerException("CatchThrow.callBack");`java 函数*callBack*中的语句发生了什么？为什么它不打印异常？

**但是**如果我从陈述中删除评论

```
(*env)->ExceptionDescribe(env);
(*env)->ExceptionClear(env); 
```

评论说，我得到了所需的输出：

```
In call-back !
After the call to Call-Back !
Exception in thread "main" java.lang.NullPointerException: CatchThrow.callBack
    at Package.CatchThrow.callBack(CatchThrow.java:14)
    at Package.CatchThrow.doit(Native Method)
    at Package.CatchThrow.main(CatchThrow.java:20)

In Java :
    java.lang.IllegalArgumentException: thrown from c code 
```

这是为什么 ？

这两个语句的作用是什么？为什么在没有这两条语句的情况下不打印异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:11:48.553

您 `new NullPointerException("CatchThrow.callBack");`从不接触 Java 运行时，并且完全在 JNI 空间中处理。

因此，除非您调用 JNI ExceptionDescribe 函数，否则不会打印任何异常详细信息：

```
(*env)->ExceptionDescribe(env); 
```

您不能从 JNI 返回多个异常，因此返回到 Java 运行时中的 try/catch 块的唯一异常信息是您稍后创建的异常信息：

```
(*env)->ThrowNew(env,newExcCls,"thrown from c code"); 
```

> 通过 JNI 引发的未决异常（例如，通过调用 ThrowNew）**不会立即中断本机方法的执行**。这与 Java 编程语言中异常的行为方式不同。当 Java 编程语言中抛出异常时，虚拟机会自动将控制流转移到最近的与异常类型匹配的封闭 try/catch 语句。然后虚拟机清除挂起的异常并执行异常处理程序。相反，JNI 程序员必须在异常发生后显式地实现控制流。

来自[关于异常的 JNI 文档](http://java.sun.com/docs/books/jni/html/exceptions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:11:37.783

根据[文件](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html)，`ExceptionDescribe`

> 将堆栈的异常和回溯打印到系统错误报告通道，例如`stderr`. 这是为调试提供的便利例程。

`ExceptionClear`：

> 清除当前抛出的任何异常。如果当前没有抛出异常，则此例程无效。

这通常不是你想要的。我建议以`IllegalArgumentException`NPE 作为原因进行创建。在 Java 中，你会这样写：

```
throw new IllegalArgumentException( "thrown from c code", exc ); 
```

这样，内部和外部异常（包括堆栈跟踪）在 Java 级别可用，您可以在其中检查它们。

# iphone - 在 Objective C 中使用 C 数组进行内存管理

> ID：10511969
> 
> 赞同：0
> 
> 时间：2012-05-09T07:52:19.437
> 
> 标签：iphone, objective-c, ios, arrays, memory

我在目标 c .m 文件中使用了 ac 样式数组：

```
Gift gifts[3]; 
```

Gift 是一个这样定义的结构：

```
typedef struct {
    NSString *name;
    CCSprite *sprite;
}Gift; 
```

这就是我使用数组的方式

```
for (int i=0; i<3; i++) {
    gifts[i].name = [[NSString stringWithFormat:@"Reward%d_%@.png", i+1, location] retain];
    gifts[i].sprite = [CCSprite spriteWithSpriteFrameName:gifts[i].name];
    CGPoint pos = [[GameConfigure sharedManager] getCoordinateforKey:@"REWARD_ITEM"];
    gifts[i].sprite.position = ccp(pos.x+i*238, pos.y);
    [rewardLayer addChild:gifts[i].sprite z:1 tag:100+i];
} 
```

如何管理内存？
我需要释放 C 数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:07:10.977

你不必释放 C 数组，但你应该管理 C 数组中的对象

在你的代码中

```
for (int i=0; i<3; i++) {

    //retain is good, but if you don't release it at the end ,  it leaks!!!!
    gifts[i].name = [[NSString stringWithFormat:@"Reward%d_%@.png", i+1, location] retain];

    //here is not a good idea, why you don't retian here?  it will be autorelease 
    gifts[i].sprite = [CCSprite spriteWithSpriteFrameName:gifts[i].name];

    CGPoint pos = [[GameConfigure sharedManager] getCoordinateforKey:@"REWARD_ITEM"];
    gifts[i].sprite.position = ccp(pos.x+i*238, pos.y);
    [rewardLayer addChild:gifts[i].sprite z:1 tag:100+i];
} 
```

你最好创建一个 NSObject 而不是 struct GIFT

使用成员的属性

```
@interface GIFT : NSObject
{
    NSString *name;
    CCSprite *sprite;
}

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) CCSprite *sprite;

@end 
```

并使用 NSArray 而不是 C Array

```
NSArray *gifts = [NSArray arrayWithObjects:
                                         [[[GIFT alloc] init] autorelease],
                                         [[[GIFT alloc] init] autorelease],
                                         [[[GIFT alloc] init] autorelease],
                                         nil]; 
```

但如果您仍想使用 C 数组，请尝试管理 GIFT 结构中的引用计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:54:09.737

无需释放数组，因为您不分配它。

你确定它`spriteWithSpriteFrameName`不会返回一个`autoreleased`对象（它的命名约定表明它会返回）？

# c# - 在源中隐藏邮件服务器的凭据

> ID：10511970
> 
> 赞同：3
> 
> 时间：2012-05-09T07:52:28.243
> 
> 标签：c#, .net, security

我有一个桌面应用程序，它使用远程 smtp 服务器发送电子邮件。所以在代码中我有这样的东西：

```
string userName = "Alex";
string pass = "123456";
sendEmail(userName, pass); 
```

任何反转我的应用程序的人都可以访问我的邮件服务器。我想知道，是否有任何解决方案可以保护敏感数据（用户名、密码）不被反转？毫不含糊。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:02:51.733

将您的 SMTP 凭据和其他敏感数据移动到 app.config 并使用部分加密。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:00:50.017

如果您在应用程序中提供用户名和密码，您应该将其视为向用户公开 - 确实无法保证用户不会检查您的应用程序或嗅探网络连接。

此外，*通常会在防火墙中阻止 SMTP 流量*并维护单个智能主机，以避免受感染的机器成为垃圾邮件机器人。即使您成功地设法隐藏了凭据，使用这样的 SMTP 也可能是一个不可靠的选择。

你基本上有三个选择：

*   使用操作系统的发送电子邮件服务 - 在用户拥有的任何电子邮件客户端中启动邮件。
*   要求用户配置有效的 SMTP 服务器。
*   设置您自己的 SMTP 中继（例如作为*Web 服务*），您可以在其中添加额外的检查和限制以确保它不会被滥用。

最后一个选项当然可以与针对您自己的用户数据库的用户身份验证相结合 - 这样您就可以关闭行为不端的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:28:30.707

使用 Web 服务发送电子邮件正文会怎样，这会反过来将电子邮件发送给收件人，而不会将用户凭据暴露给客户端。即使进行了混淆和加密，仍然有可能有人对您的应用程序进行逆向工程并访问您的凭据。混淆不是安全顺便说一句。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-09T08:07:01.817

您是否尝试过混淆您的应用程序？尝试 Dotfuscator Software Services 混淆您的代码，然后查看它是否能够隐藏/混淆用户名和密码。最好的选择是使用 app.config 或 web.config 文件以加密或散列保存您的凭据。

在应用程序中硬编码凭据从来都不是一个好习惯。

# objective-c - 如何访问 UISwipeGestureRecognizer 的“方向”属性？

> ID：10511971
> 
> 赞同：0
> 
> 时间：2012-05-09T07:52:35.390
> 
> 标签：objective-c, ios, uigesturerecognizer, accessor, uiswipegesturerecognizer

> **可能重复：**
> [在 Cocoa 中获取滑动方向](https://stackoverflow.com/questions/5322145/get-swipe-direction-in-cocoa)

在我的程序中，我在头文件中创建了一个并将`UISwipeGestureRecognizer`其方向配置为在实现文件中。我已将其设置为在识别手势时调用一个方法。它成功调用了这个方法，但是当我尝试使用它的属性来确定手势识别器的方向时，它没有给我一个值。为什么这样？`UISwipeGestureRecognizerDirectionLeft``UISwipeGestureRecognizerDirectionRight``handleSwipe``direction`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:37:28.020

您不能使用一个手势识别器来识别两种不同的手势。创建两个手势识别器，一个在任一方向并将它们指向`handleSwipLeft`和`handleSwipeRight`（然后调用`handleSwipe:withDirection:`或其他东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:29:16.430

我现在不在电脑旁，但您必须将 locationInView 与 previousLocationInView 进行比较以确定方向。我知道我在早期的应用程序中使用了这种方法。今天我在一些视图中添加了滑动，并采取了更简单的方法来添加两个识别，每个方向一个。选择取决于您需要多少滑动信息。在我早期的应用程序中，我需要知道用户滑动的力度，因此需要两个值之间的增量。在我当前的应用程序中，我只需要知道用户向左或向右轻弹。

# ruby - Ruby：如何从 json 格式中获取所有关键元素？

> ID：10511972
> 
> 赞同：4
> 
> 时间：2012-05-09T07:52:40.903
> 
> 标签：ruby

我是 ruby​​ 的新手，我对代码块不熟悉...如何获取 json 格式文本中的所有关键元素？

```
text= "[{ "name" : "car", "status": "good"},
{ "name" : "bus", "status": "bad"},{ "name" : "taxi", "status": "soso"}]" 
```

从文本中，它是一个类似 json 格式的字符串，我怎样才能只提取名称值并输入到数组中

期望的输出 ==> [汽车、公共汽车、出租车]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T07:59:25.880

您需要先解析 JSON 数据：

```
require('json')

text = '[{ "name" : "car", "status": "good"}, { "name" : "bus", "status": "bad"},{ "name" : "taxi", "status": "soso"}]'
data = JSON.parse(text) 
```

然后你可以简单地收集物品：

```
p data.collect { |item| item['name'] } 
```

如果您没有每个项目的名称，并且您想要一个默认值：

```
p data.collect { |item| item.fetch('name', 'default value') } 
```

如果你想跳过它们：

```
p data.collect { |item| item['name'] }.compact 
```

# jquery-jscrollpane - 使用 jScrollPane jQuery 插件时打印 div 的全部内容

> ID：10511973
> 
> 赞同：2
> 
> 时间：2012-05-09T07:52:54.213
> 
> 标签：jquery-jscrollpane

我们正在使用 jQuery jScrollPane 插件 v2.0。打印页面时，仅打印可滚动区域内可见的内容。我们希望打印整个页面内容，而不仅仅是可见内容。有没有 CSS 方法可以做到这一点？

我已经看过并尝试过[如何打印 JScrollPane 的完整内容？](https://stackoverflow.com/questions/2570906/how-to-print-a-full-content-of-jscrollpane)但我仍然无法打印全部内容。

**更新：** 我有一些运气让它与以下 CSS 一起工作：

```
@media print {
.jspContainer,.jspScrollable,.jspScrollable>* {
    height: auto !important;
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
    position: relative !important; }
} 
```

这适用于除 IE 之外的所有浏览器。Google Chrome（我在 v18.0.1025.168 上）和 Apple Safari（v5.1.5）特别需要 overflow-x 和 overflow-y，而在 Firefox 和 Opera 上简单地溢出效果很好。

关于如何在 IE 上工作的任何建议？问题，正如我上面提到的，在 IE 中，只有在可滚动区域内可见的内容才会被打印，而不是整个内容。

# vb.net - 如何将 1 个 DataGridView 中的所有记录传输到另一个 DataGridView？

> ID：10511975
> 
> 赞同：1
> 
> 时间：2012-05-09T07:53:04.603
> 
> 标签：vb.net, datagridview

我有 1 个`DataGridView`，我想将所有记录转移到另一个`DataGridView`. 我怎么可能做到这一点？

```
dgvCourseList - 1st datagridview
dgvCourseHandled - 2nd datagridview 
```

这是我将一条记录转移到另一条记录的代码`DataGridView`：

```
Private Sub btnInsert_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnInsert.Click
    If (chckCourse(dgvCourselist.SelectedCells.Item(0).Value)) = True And (chckDup(dgvCourselist.SelectedCells.Item(0).Value)) = False Then
        dgvCoursesHandled.Rows.Add(dgvCourselist.SelectedCells.Item(0).Value)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:48:30.267

```
Private Sub btnInsertAll_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnInsertAll.Click

        If (chckCourse(dgvCourselist.SelectedCells.Item(0).Value)) = True And (chckDup(dgvCourselist.SelectedCells.Item(0).Value)) = False Then
            For i As Integer = 0 To Me.dgvCourselist.Rows.Count - 1
                dgvCoursesHandled.Rows.Add(dgvCourselist.Rows(i).Cells(0).Value)
            Next

        End If
    End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:34:25.253

你几乎在正确的轨道上。

```
if [check if row is selected from the dgvCourselist]

  dgvCourseHandled.Rows.Add(dgvCourseList.Cells("columnname").Value, _
                             repeat until all column in dgvCourseHandled are satisfied) 
```

1.  确定 dgvcoursehandled 中有多少列和列名。提示：如果您没有指定列名，请这样做，如果您有很多列，“magic no”将无法帮助您调试。例如 dgvCourseList.Cells("columnname").Value
2.  识别 dgvcourselist 中将传递给 dgvcoursehandled 的所有列

当您确定所有这些时，请遵循上面的伪代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T05:55:27.730

这个也可以试试。

首先复制列：

```
For Each col As DataGridViewColumn In DataGridView1.Columns
        DataGridView2.Columns.Add(DirectCast(col.Clone, DataGridViewColumn))
Next 
```

然后数据

```
For Each row As DataGridViewRow In DataGridView1.Rows
    DataGridViewRow2.Rows.Add(row.Cells.Cast(Of DataGridViewCell).Select(Function(c) c.Value).ToArray)
Next 
```

来源：[http ://www.vbforums.com/showthread.php?678009-Copying-rows-and-columns-from-one-datagridview-to-another](http://www.vbforums.com/showthread.php?678009-Copying-rows-and-columns-from-one-datagridview-to-another)

# php - SQL 错误：[Microsoft][ODBC driver for Oracle][Oracle]Error while trying to retrieve text for error ORA-01019

> ID：10511977
> 
> 赞同：0
> 
> 时间：2012-05-09T07:53:10.857
> 
> 标签：php, odbc, oracle11g

PHP Project 使用“Microsoft ODBC for Oracle version 6.01.7600.16385 (MSORCL32.DLL)”驱动程序通过 ODBC 与 Oracle 11g 连接。

连接代码： `$DBconn = odbc_connect('DSN_NAME','USER_NAME','PASSWORD') or odbc_error(); var_dump($DBconn); exit;`

无法使用此输出完成连接：`Warning: odbc_connect() [function.odbc-connect]: SQL error: [Microsoft][ODBC driver for Oracle][Oracle]Error while trying to retrieve text for error ORA-01019, SQL state NA000 in SQLConnect`显示在连接代码行上。

此代码最初在我设置项目时有效。后来其他两台机器在局域网中使用我的数据库。不确定之后是否会出现此问题，但几天后，我遇到了这个问题。不要记住任何可能导致这种情况的事件或配置更改。

任何人都可以给出这个问题的可能原因吗？

# c# - 有没有办法在应用程序代码中使用 MSBuild 来构建另一个应用程序

> ID：10511978
> 
> 赞同：2
> 
> 时间：2012-05-09T07:53:13.507
> 
> 标签：c#, .net, msbuild

我想构建一个应用程序（应用程序 A），它构建另一个应用程序（应用程序 B）并编辑 .proj 文件以进行编译（应用程序 B 的 .proj）。我熟悉 MSbuild，但我想知道是否有办法在我的代码中使用它来编译应用程序。我希望客户自定义构建设置并从团队基础服务器获取他想要的最新库。我真的需要一个好的地方来开始这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:05:07.653

[Microsoft.Build](http://msdn.microsoft.com/en-us/library/gg145008.aspx)命名空间包含提供对 MSBuild 引擎的编程访问和控制的类型。

# java - 如何从给定的字符串中获取字符串变量

> ID：10511980
> 
> 赞同：1
> 
> 时间：2012-05-09T07:53:14.900
> 
> 标签：java, string

如何从java中的整个字符串中获取字符串变量。

如果给我一个以这​​种方式创建的字符串：

```
String s = "Name:" + name + "Age:" + age + "Sex:" + sex; 
```

我如何从这个 String s 中获取姓名、年龄、性别。

我不能使用 getWord(position) 或类似的东西，因为我不知道名字中有多少个单词，以及年龄如何表示 age =“22 岁”或 age =“22 岁 5 个月”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:59:44.023

我建议你有`Name`,`Age`并按字符`Sex`分割。`","`

它的意思是：

```
String s = "Name:" + name + ",Age:" + age + ",Sex:" + sex; 
```

然后你可以用“，”分割字符串s

```
String properties = s.split(","); 
```

然后从属性变量中，您可以拆分`":"`以获取属性名称和该属性的值。

明白了吗？

我正在添加更多代码以支持您想要的其他方式：

```
String name = "Thuan";
String age = "27";
String sex = "male";
String s = "Name:" + name + "Age:" + age + "Sex:" + sex;

int nameIndex = s.indexOf("Name:");
int ageIndex = s.indexOf("Age:");
int sexIndex = s.indexOf("Sex:");

String theName = s.substring(nameIndex + "Name:".length(), ageIndex);
String theAge = s.substring(ageIndex + "Age:".length(), sexIndex);
String theSex = s.substring(sexIndex + "Sex:".length(), s.length());

System.out.println(theName);
System.out.println(theAge);
System.out.println(theSex); 
```

请注意，这只是向您展示逻辑的示例，您需要自己重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:58:06.120

您将继续阅读姓名（当然在“NAME：”之后），直到遇到四个后续字母“AGE：”，然后继续阅读年龄，直到遇到四个后续字母“SEX：”，其余的是性别数据。

编辑：实际上“：”可能是您的分隔符，如果它不包含在数据中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:12:10.997

我建议你使用正则表达式。您的示例代码是：

```
String s = "NAME : " + " abhi " + " Age : " + " 22 " + " Sex : " + " m ";
Pattern pattern = Pattern.compile("NAME[\\s]*:[\\s]*(.*)[\\s]*Age[\\s]*:[\\s]*(.*)[\\s]*Sex[\\s]*:[\\s]*(.*)");
Matcher matcher = pattern.matcher(s);
if (matcher.matches()) {
    System.out.println("NAME : " + matcher.group(1) + " Age : " + matcher.group(2) + " Sex : "
            + matcher.group(3));
} 
```

会为你工作。你可以为你做改变。

更新：即使它们在 Name 和 .Doesnt 之间是否存在空格，这也将起作用，并且不需要使用任何分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T08:16:29.857

您可以使用以下代码：

```
 String s = "Name:" + name + "Age:" + age + "Sex:" + sex;
    int i = s.indexOf("Age:");
    int j = s.indexOf("Sex:");
    String Name = s.substring(0,i).split(":")[1];
    String Age = s.substring(i,j).split(":")[1];
    String Sex = s.substring(j).split(":")[1];
    System.out.println("Name="+Name+" Age="+Age+" Sex="+Sex); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:03:54.817

在创建的 String 上应该有适当的分隔符，否则不可能将它们拆分为字符串数组。

例如：

```
private static final String FIELD_DELIMITER = ";";
private static final String DATA_DELIMITER = "=";

String s = "Name" + DATA_DELIMITER + name + FIELD_DELIMITER +
           "Age" + DATA_DELIMITER + age + FIELD_DELIMITER +
           "Sex" + DATA_DELIMITER + sex + FIELD_DELIMITER; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T07:58:34.097

如果你有一个分隔符，你可以使用 String.split() 方法。例如，有

```
s = "Name: carmelo; Age: 25 years; Sex: m;" 
```

然后你可以打电话

```
String[] values = s.split(";")
String name = values[0].split(":")[1];
String age = values[1].split(":")[1];
String sex = values[2].split(":")[1]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T07:59:49.317

使用“拆分”

```
String s = "Name:" + name + "#Age:" + age + "#Sex:" + sex;
String[] splits = s.split("#");

System.out.println("splits.size: " + splits.length);

for(int i=0; i < splits.length; i++){
//System.out.println(splits[i] );
String[] values= splits[i].split(":");

System.out.println(values[0]+" = " + values[1] );
} 
```

# c# - 如何设置命令超时

> ID：10511984
> 
> 赞同：9
> 
> 时间：2012-05-09T07:53:40.183
> 
> 标签：c#, smo, sqlcommand, command-timeout

我正在使用 `Microsoft.SqlServer.Management.Smo`.

我的代码：

```
Server server = new Server(new ServerConnection( new SqlConnection(ConnectionString));
server.ConnectionContext.ExecuteNonQuery(script); 
```

我想像`CommandTimeout`正常一样设置它`SQLCommand`

请告诉我如何设置`CommandTimeout`查询运行通过`Microsoft.SqlServer.Management.Smo.Server`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T08:00:08.220

尝试[server.ConnectionContext.StatementTimeout](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.common.serverconnection.statementtimeout.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T09:46:21.280

您可以使用 SMO 对象设置命令超时，如下所示：

```
Server server = new Server(new ServerConnection(new SqlConnection(ConnectionString));
server.ConnectionContext.StatementTimeout = 10800;
server.ConnectionContext.ExecuteNonQuery(script); 
```

有关 SMO 对象命令超时的更多信息，请参阅此[链接](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.common.serverconnection.statementtimeout.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:56:11.870

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)

[如何从 SQL 连接字符串设置查询超时](https://stackoverflow.com/questions/1198951/how-to-set-the-query-timeout-from-sql-connection-string)

# facebook - Facebook 如何结合 SSL 和非 SSL 内容？

> ID：10511985
> 
> 赞同：1
> 
> 时间：2012-05-09T07:53:43.337
> 
> 标签：facebook, ssl

我强迫 Facebook 使用 SSL。例如，当我将 Vimeo 视频（非 ssl）添加到我的时间线时，我的浏览器会显示绿色的安全连接图标，并且没有关于混合内容的恼人错误。

我知道您可以对某些内容使用代理，因此浏览器认为它仍然是安全的，但是在使用 Vimeo iframe 时，有很多内容直接进入非 sll 外部 url。

他们如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:04:38.653

它们不结合，如果用户使用 https，那么所有静态内容也来自 https。

当您加载时间线时，没有加载任何视频，每个视频仅预览图像，并且这些图像托管在具有 https 访问权限的 facebook CDN 中。

即使您单击视频预览，也会创建一个 iframe 来加载视频，但这也是来自 https 和 facebook 服务器。

例如，我在 Vimeo 上分享（点赞）了一个视频，在我的时间线上我看到了预览，因为我写的图像托管在 facebook CDN 服务器上并使用 https。当我点击它时，创建了一个 iframe 而不是图像，它的来源是：

> [https://s-static.ak.facebook.com/common/referer_frame.php](https://s-static.ak.facebook.com/common/referer_frame.php)

在该 iframe 中，他们放置了 vimeo 视频小部件的嵌入代码，该小部件也在 https (https://vimeo.com) 中加载。

如果混合 http 和 https 内容，那么浏览器会抱怨它。当然，每个浏览器都有自己的抱怨方式。Facebook 无法绕过这一点，因此如果用户使用它，他们只需确保对所有内容使用 https。

# android - Android WebView添加多个javascript接口失败

> ID：10511990
> 
> 赞同：1
> 
> 时间：2012-05-09T07:53:55.623
> 
> 标签：android, webview

我发现如果我使用之前添加的接口，webview 无法再添加 javascriptInterface。演示1

```
 this.webView.loadUrl("http://www.google.com");
    this.webView.addJavascriptInterface(test1, "test1");
    this.webView.addJavascriptInterface(test11, "test11");
    this.webView.addJavascriptInterface(test2, "test2");
    this.webView.addJavascriptInterface(test22, "test22");

    this.webView.loadUrl("javascript:window.test1.describle('Hello1');");
    this.webView.loadUrl("javascript:window.test11.describle('Hello11');");
    this.webView.loadUrl("javascript:window.test2.describle('Hello2');");
    this.webView.loadUrl("javascript:window.test22.describle('Hello22');"); 
```

演示2

```
 this.webView.loadUrl("http://www.google.com");
    this.webView.addJavascriptInterface(test1, "test1");
    this.webView.loadUrl("javascript:window.test1.describle('Hello1');");
    this.webView.addJavascriptInterface(test11, "test11");
    this.webView.addJavascriptInterface(test2, "test2");
    this.webView.addJavascriptInterface(test22, "test22");

    this.webView.loadUrl("javascript:window.test1.describle('Hello1');");
    this.webView.loadUrl("javascript:window.test11.describle('Hello11');");
    this.webView.loadUrl("javascript:window.test2.describle('Hello2');");
    this.webView.loadUrl("javascript:window.test22.describle('Hello22');"); 
```

在demo2中，当我使用test11等接口时，会提示找不到obj test11

我不知道为什么。期待您的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T04:51:16.637

交换 loadUrl 和 addJavascriptInterface，可能会成功。

```
this.webView.addJavascriptInterface(test1, "test1");
this.webView.addJavascriptInterface(test11, "test11");
this.webView.addJavascriptInterface(test2, "test2");
this.webView.addJavascriptInterface(test22, "test22");
this.webView.loadUrl("http://www.google.com"); 
```

# wpf - 将资源合并到 app.xaml 中？

> ID：10511995
> 
> 赞同：0
> 
> 时间：2012-05-09T07:54:13.610
> 
> 标签：wpf, xaml, mergeddictionaries

面向 .NET Framework 4.0。

我有一个 UserControl ( `usercontrol.xaml`)，其中包含一些我希望可以从应用程序的资源 ( `app.xaml`) 中访问的资源。（我的 UserControl 被实例化了`MainWindow.xaml`。）

到目前为止，我已经在 app.xaml 中尝试过：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="usercontrol.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

但 Visual Studio 对此抱怨： *查找资源字典“usercontrol.xaml”时出错。*

**问：**如何将 UserControl 的资源添加到应用程序中，以便在运行时执行此操作：

```
Style style = FindResource("SomeStyleDefinedInUserControl") as Style; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:08:46.830

如果您想共享样式，请将它们放在单独的资源字典中。

然后，像您一样将资源字典添加到 App 的合并字典中：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="usercontrol_styles.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

现在可以从应用程序中的任何位置访问这些样式。

# php - 如何从 php 脚本调用 cron 作业？

> ID：10511996
> 
> 赞同：1
> 
> 时间：2012-05-09T07:54:14.843
> 
> 标签：php, cron, invocation

我想从 php 脚本文件中设置 cron 作业。我可以使用 shell_exec() 函数执行 php 文件。但我无法运行与 cron 作业相关的命令。`$output = shell_exec("crontab -l");`此命令不起作用。我的 cronjob 位于 /usr/bin/crontab 下。我将文件权限设置为 777，并以 root 访问权限执行此命令。仍然没有运气。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:52:18.657

您的“crontal -l”命令仅在其个人 crontab 中显示为您的用户安排的内容。它可能会返回一个空字符串，具体取决于您当前的个人 crontab。不要与文件 /etc/crontab 混淆，它是系统范围的 crontab，适用于所有用户，只能由 root 写入。

如果您需要 - 正如我想我所理解的那样 - 从 php 脚本在 crontab 中添加一个作业，也许您可​​能只是想尝试类似的东西：

```
$r=shell_exec('cat "30 6 * * * user my_cmd my_args" >> /etc/crontab'); 
```

例如，要安排“my_cmd my_args”，以“用户”身份运行，每天早上 6:30。这个 PHP 脚本应该以 root 身份启动，因为只有他可以在 /etc/crontab 中写入。

**小心：我希望您的 php 脚本不是从网站启动，而是在访问受限环境的命令行中启动，以限制安全风险，特别是如果您采取措施使其以 root 身份启动。这种脚本在你的系统中是一个很大的漏洞。请考虑这一点。这是我的建议。**

顺便说一下，/usr/bin/crontab 的权限回到：

-rwxr-sr-x 1 根 crontab 35040 19 déc。2010 /usr/bin/crontab（来自 Debian 系统的示例）。