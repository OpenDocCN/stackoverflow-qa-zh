# StackOverflow 问答 10283000-10283999

# c++ - 为什么 std::weak_ptr<> 不提供布尔转换？

> ID：10283007
> 
> 赞同：23
> 
> 时间：2012-04-23T14:59:44.830
> 
> 标签：c++, c++11, shared-ptr, weak-ptr

C++11 的 std::shared_ptr<> 提供了一种布尔运算符。

```
operator unspecified-bool-type() const; 
```

`operator bool() const`（由于隐式转换类型的[危险，](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2435.htm)这不是直接的`bool`。）

为什么 std::weak_ptr<> 没有类似的运算符？我发现自己不断打字

```
if( !wp.expired() ) 
```

当我想打字时

```
if( wp ) 
```

为什么weak_ptr 没有bool 转换？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-23T15:21:40.893

`if(!wp.expired())`在多线程代码中几乎总是错误检查，因为在该`if`语句之后指针可能会立即过期。因此，如果`weak_ptr`将其作为`bool`转换的语义，则无论如何都不会使用它。

如果要检查指针是否还活着，请使用`lock`并检查获得的`shared_ptr`.

如果您想知道指针是否已死，请使用`expired`.

如您所见，提供布尔转换是没有意义的。因为`shared_ptr`，它完全可以。顺便说一句，转换运算符`explicit operator bool() const noexcept;`在 C++11 中。

# java - Java 如何将资源（内部文本文件）写入目录？

> ID：10283008
> 
> 赞同：2
> 
> 时间：2012-04-23T14:59:52.083
> 
> 标签：java, filewriter

我有一个文件存储在我的 jar 中，我使用默认设置文件。我希望将此文件写入用户定义的路径。我怎么写出来？我试图写出的这个文件与我将要写这个文件的类文件在同一个位置

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:03:35.370

用于`getResourceAsStream`访问资源。`FileOutputStream`为您要写入的文件创建一个。从一个流读取并写入另一个流。最好使用缓冲，完成后不要忘记关闭流。

请参阅[与位置无关的资源访问](http://docs.oracle.com/javase/7/docs/technotes/guides/lang/resources.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:04:56.867

使用“getResourceAsStream”

-> [http://mindprod.com/jgloss/getresourceasstream.html](http://mindprod.com/jgloss/getresourceasstream.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-07T11:56:33.700

给定`resource`你想写给给定的 a `Path path`，那么你可以使用：

```
try(InputStream is = this.getClass().getResourceAsStream(resource)){
    Files.copy(is, path);
} catch (Exception e){
    throw new RuntimeException(e);
} 
```

# java - java：将二进制转换为文本？

> ID：10283010
> 
> 赞同：6
> 
> 时间：2012-04-23T15:00:02.257
> 
> 标签：java, binary

我编写了这段代码用于将二进制转换为文本。

```
public static void main(String args[]) throws IOException{

      BufferedReader b = new BufferedReader(new InputStreamReader(System.in));
      System.out.println("Enter a binary value:");
      String h = b.readLine();
      int k = Integer.parseInt(h,2);  
      String out = new Character((char)k).toString();
      System.out.println("string: " + out);
      } 
} 
```

看看输出！

```
Enter a binary value:
0011000100110000
string: ? 
```

有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T15:01:45.737

代替

```
String out = new Character((char)k).toString(); 
```

做

```
String out = String.valueOf(k); 
```

## 编辑：

```
String input = "011000010110000101100001";
String output = "";
for(int i = 0; i <= input.length() - 8; i+=8)
{
    int k = Integer.parseInt(input.substring(i, i+8), 2);
    output += (char) k;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:06:48.140

更简单：

```
String out=""+k; 
```

# php - htaccess 用于动态网页

> ID：10283012
> 
> 赞同：0
> 
> 时间：2012-04-23T15:00:18.177
> 
> 标签：php, .htaccess, dynamic-data

我有一个网站，我正在使用 MySQL 来存储和获取数据，有一堆不同目的地的数据（是的，这是一个旅行社网站）我想知道如何设置 .htaccess 文件来显示 SEO 友好的 URL

例如：[http](http://www.mywebsite.com/flights-result.php?id=10) ://www.mywebsite.com/flights-result.php?id=10这个 URL 是飞往非洲恩德培的航班的详细信息页面，我想要这个 URL，例如[http:// www.mywebsite.com/Africa/Entebbe.htm](http://www.mywebsite.com/Africa/Entebbe.htm)

对他们来说等等，我还需要为每一页添加一件事吗？数据每天都在更新，所以有什么简单的方法可以自动编写 URL？

任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:24:20.137

我真的不认为你想要完成的事情与 mysql 有任何关系。您正在寻找的内容称为 URL 重写。有无数的文章可以告诉你要遵循的方向。我不太确定您使用的是哪个 Web 服务器。我认为它是阿帕奇。[这](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)是 Apache`module_rewrite`指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:31:10.620

给定原始 URL，其中并没有使用 mod_rewrite 完全执行此操作的所有信息。

因此，您可以将所有 Web 请求发送到控制器文件，然后从那里解析请求 uri 并加载正确的页面。

所以在htaccess中，类似...

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ controller.php [L] 
```

然后在 controller.php 中解析 url 并加载正确的页面。

* * *

您可能更喜欢的另一种选择（如果您对特定的最终 URL 很灵活）是让 URL 最终看起来像这样：

```
http://www.mywebsite.com/flights/10/Africa/Entebbe.htm 
```

这可能比实现控制器更简单（尽管我更喜欢控制器来路由请求）。

所以在htaccess中...

```
RewriteRule
    ^/flights/([0-9]{1,10})/([a-zA-Z]+)/([a-zA-Z]+)\.htm$
    flights-result.php?id=$1&country=$2&place=$3 [L] 
```

然后在 flight-results.php 文件的开头附近，您应该加载 id 的数据，然后检查提供的“国家”和“地点”是否正确（以阻止人们在这里输入任何内容），如果返回 4040它不是。

请记住将您的应用程序输出的所有链接也更改为新样式。

* * *

正如您所提到的，您还可以将所有这些 URL 硬编码到 htaccess 中，但这并不理想:)

# actionscript-3 - 如何通过文本字段更改类型 Number 变量

> ID：10283015
> 
> 赞同：0
> 
> 时间：2012-04-23T15:00:21.630
> 
> 标签：actionscript-3, flash-cs5

我在 AS3 中做一个小练习项目，但遇到了一个问题。我正在制作一个 MS Paint 风格的绘图程序，我希望用户能够使用输入字段更改画笔大小。我有两个问题。第一个是我不知道如何通过代码制作一个输入字段，第二个是我不知道如何将舞台上输入字段的变量传递给控制画笔大小的变量。

```
 package  
{
    import flash.display.Sprite;
    import flash.events.MouseEvent; 
    import flash.text.TextField;
    import flash.events.KeyboardEvent;

    public class DrawingApp extends Sprite
    {
        var square0:Sprite;
        var textField: TextField;
        var textField2: TextField;
        var textField3: TextField;
        var square1:Sprite;
        var square2:Sprite;
        var square3:Sprite;
        var lineColor:uint = 0x000000;
        var brushSize:Number = 1;

        public function DrawingApp() 
        {

            square0 = new Sprite();
            addChild(square0);  
            square0.graphics.lineStyle(1,0x000000);
            square0.graphics.beginFill(0x000000);
            square0.graphics.drawRect(0,0,30,20);
            square0.graphics.endFill();
            square0.x = 500;
            square0.y = 10;

            square1 = new Sprite();
            addChild(square1);  
            square1.graphics.lineStyle(1,0x000000);
            square1.graphics.beginFill(0x0000FF);
            square1.graphics.drawRect(0,0,30,20);
            square1.graphics.endFill();
            square1.x = 500;
            square1.y = 40;

            square2 = new Sprite();
            addChild(square2);  
            square2.graphics.lineStyle(1,0x000000);
            square2.graphics.beginFill(0xff0000);
            square2.graphics.drawRect(0,0,30,20);
            square2.graphics.endFill();
            square2.x = 500;
            square2.y = 70;

            textField = new TextField;
            addChild(textField);
            textField.x = 500;
            textField.y = 100;
            textField.width = 30;
            textField.height = 20;
            textField.text = "Eraser";
            textField.selectable = false;  
            textField.border = true; 

            textField2 = new TextField;
            addChild(textField2);
            textField2.x = 500;
            textField2.y = 130;
            textField2.width = 30;
            textField2.height = 20;
            textField2.text = "Clear";
            textField2.selectable = false;  
            textField2.border = true; 

            textField3 = new TextField;
            addChild(textField3);
            textField3.x = 500;
            textField3.y = 160;
            textField3.width = 30;
            textField3.height = 20;
            textField3.text = brushSize;
            textField3.selectable = true;  
            textField3.border = true; 

            init();
        }

        private function init():void
        {
            graphics.lineStyle(1, lineColor, 1);
            square0.addEventListener(MouseEvent.CLICK, changetoDefault);
            square1.addEventListener(MouseEvent.CLICK, changetoBlue);
            square2.addEventListener(MouseEvent.CLICK, changetoRed);
            textField.addEventListener(MouseEvent.CLICK, changetoEraser);
            textField2.addEventListener(MouseEvent.CLICK, clearAll);
            textField3.addEventListener(KeyboardEvent.KEY_DOWN, adjustSize);
            stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseIsDown);
            stage.addEventListener(MouseEvent.MOUSE_UP, mouseIsUp);
        }

        private function changetoEraser(event: MouseEvent):void
        {
            lineColor = 0xffffff;
            graphics.lineStyle(brushSize, lineColor, 1);
        }

        private function adjustSize(event: KeyboardEvent)
        {
            brushSize = textField3.text;
            graphics.lineStyle(brushSize, lineColor, 1);
        }

        private function clearAll(event:MouseEvent):void
        {
            graphics.clear();
            graphics.lineStyle(brushSize, lineColor, 1);
        }

        private function changetoDefault(event: MouseEvent):void
        {
            lineColor = 0x000000;
            graphics.lineStyle(brushSize, lineColor, 1);
        }

        private function changetoBlue(event: MouseEvent):void
        {
            lineColor = 0x0000ff;
            graphics.lineStyle(brushSize, lineColor, 1);
        }

        private function changetoRed(event: MouseEvent):void
        {
            lineColor = 0xff0000;
            graphics.lineStyle(brushSize, lineColor, 1);
        }

        private function mouseIsDown(event: MouseEvent):void
        {
            graphics.moveTo(mouseX, mouseY);
            stage.addEventListener(MouseEvent.MOUSE_MOVE, moveMyMouse);
        }

        private function mouseIsUp(event: MouseEvent):void
        {
            stage.removeEventListener(MouseEvent.MOUSE_MOVE, moveMyMouse);
        }

        private function moveMyMouse(event:MouseEvent):void
        {
            graphics.lineTo(mouseX, mouseY);
        }
    }
} 
```

我意识到将 BrushSize 设置为 textField3.text 不起作用，因为它将字符串转换为数字。我不知道如何才能做到这一点。感谢任何可以为我阐明这一点的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:10:32.047

`TextField`您可以通过制作 a并将其类型设置为Flash 中的代码来制作输入字段`TextFieldType.INPUT`。

为了将字符串转换为数字，您必须使用`parseFloat()`or `parseInt()`（我不知道您是否需要整数或浮点数）。

虽然很少，但我认为这应该足以帮助你重新开始。

# sbt - 访问 sbt 子项目的 managedClasspath

> ID：10283017
> 
> 赞同：3
> 
> 时间：2012-04-23T15:00:29.003
> 
> 标签：sbt

我正在将 sbt 0.7.x 构建脚本转换为 sbt 0.11.2。我正在编写一个任务来从子项目中收集各种 JAR。在旧版本中，部分任务执行以下操作：

```
deployedProjects.foreach {
  p: BasicScalaProject =>
    p.managedClasspath(config("compile")) --- p.managedClasspath(config("provided"))
    // etc
} 
```

我怎样才能在 sbt 0.11 中做同样的事情？

**更新添加：**

尤其是：

*   如何编写依赖于设置/任务列表的任务？例如，我将如何编写一个依赖于子项目列表中所有 managedClasspaths 的任务（而不将其全部捆绑到一个元组中）。
*   是否有特定范围来获取标记为或未标记为“提供”的托管 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:43:29.600

在 sbt 0.11.x 中有任务 managedClasspath：

```
> inspect managed-classpath
[info] Task: scala.collection.Seq[sbt.Attributed[java.io.File]]
[info] Description:
[info]  The classpath consisting of external, managed library dependencies.
[info] Provided by:
[info]  {file:/Users/heiko/tmp/test/}default-f3fb6c/compile:managed-classpath
[info] Dependencies:
[info]  compile:classpath-configuration
[info]  compile:classpath-types
[info]  compile:update
[info] Reverse dependencies:
[info]  compile:external-dependency-classpath
[info] Delegates:
[info]  compile:managed-classpath
[info]  *:managed-classpath
[info]  {.}/compile:managed-classpath
[info]  {.}/*:managed-classpath
[info]  */compile:managed-classpath
[info]  */*:managed-classpath
[info] Related:
[info]  test:managed-classpath
[info]  runtime:managed-classpath 
```

查看委托，您会发现您可以将此任务范围限定为各种配置，例如*compile*：

```
> show compile:managed-classpath
[info] Updating {file:/Users/heiko/tmp/test/}default-f3fb6c...
[info] Resolving org.scala-lang#scala-library;2.9.1 ...
[info] Done updating.
[info] ArraySeq(Attributed(/Users/heiko/.sbt/boot/scala-2.9.1/lib/scala-library.jar)) 
```

# android - Android通过Code放置imageView

> ID：10283022
> 
> 赞同：0
> 
> 时间：2012-04-23T15:00:47.733
> 
> 标签：android, imageview

我想在android中初始化我的活动以通过代码设置一些imageView的位置。

假设我在屏幕上显示了五张卡片，全部由我在 XML 中放置在 (0,0) 中。

我想计算屏幕尺寸（很容易做到），然后将第一张卡片放在 0.2height ， 0.2 width 第二张卡片 0.4height, 0.4 width 等处。

我想通过代码来完成，这样我将来可以更改一些常量，其余的更改将自动应用

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:08:30.937

尝试使用“findViewById()”来膨胀一些父母布局，“new ImageView()”来构造新的视图和“.add(myImageView)”来添加它们。在您的代码中，您可以为图像视图使用各种设置器...

（顺便说一句：更多细节会很棒，这个问题有点模棱两可）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:06:20.060

在您的布局中创建一个 LinearLayout 容器视图，然后使用代码将您的新视图添加到其中

```
<LinearLayout
        android:id="@+id/container"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
/> 
```

接着：

```
 ((ViewGroup)findViewById(R.id.container)).addView(myImageView); 
```

# php - Zend 自动加载器

> ID：10283023
> 
> 赞同：1
> 
> 时间：2012-04-23T15:00:47.747
> 
> 标签：php, html, zend-framework, autoloader

我正在尝试自动加载在 application/forms/*.php 下的项目中找到的表单（在本例中为 LoginForm.php ）。

如何配置 Zends 自动加载器以自动加载此表单？因为我不想使用丑陋的命名空间，所以我在我的引导程序中启用了后备。我没有任何与我的 application.ini 中配置的表单相关的内容

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:49:58.493

Not sure if this answers your question, as its a little vague, but try the following.

In your bootstrap:

```
protected function _initAppAutoload()
{
    $moduleLoad = new Zend_Application_Module_Autoloader(array(
       'namespace' => '',
       'basePath'   => APPLICATION_PATH
    ));
} 
```

Obviously then the Form_LoginForm() class would exist in application/forms/LoginForm.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:51:41.813

默认的自动加载器会为你加载这个。确保您已检查以下内容：-

1.  你的文件是 application/forms/Loginform.php
2.  该文件包含如下内容：-

    ```
    class Application_Form_Loginform extends Zend_Form
    {
       //Take special note of the capitalisation - it is important
       // Also note it is Form NOT Forms
        public function init()
        {
            //Your code here
        }
    } 
    ```

3.  像这样打电话给你的班级： -

    ```
    $form = new Application_Form_Loginform(); 
    ```

对字母大小写要格外小心，重要的是你要完全正确，否则自动加载器将找不到你的类并会抱怨。

# c# - C# - 重新初始化静态类？

> ID：10283029
> 
> 赞同：9
> 
> 时间：2012-04-23T15:01:10.070
> 
> 标签：c#, class, static

我正在处理的 Web 应用程序中有一个包含客户端设置的类。对于某些背景，我不拥有这个类，并且改变它不是一种选择。我们最近添加了一些逻辑来将设置存储在数据库中，我的任务是创建一个页面来编辑它们，这很公平。

这是我的问题；这些设置保存在一个静态类中，它们本身就是静态的只读属性。例如

```
public static class Settings
{
 public static readonly setting1 = SettingmanagerClass.GetSetting("setting1");
 public static readonly setting2 = SettingmanagerClass.GetSetting("setting2");
 public static readonly setting3 = SettingmanagerClass.GetSetting("setting3");
} 
```

现在，例如通过我写的页面，我们将setting2的值更改为“Happy Variable”；它可以很好地保存到数据库中，但现在我需要将它作为新值反映在 Web 应用程序中。由于它是静态类的静态只读属性，因此它只会在应用程序首次连接时被调用，并且无法手动设置。

重申一下，我不拥有原始类，因此“仅使属性可写”不是（当前）有效的选项。通常我会和我的老板讨论这个问题，他会做出判断，可能会允许我修改另一个班级，但我无法做出那个决定，而且他这周都不在办公室。

所以基本上; 一旦 Web 应用程序开始运行，有没有办法重新初始化静态类？我只需要它重新加载其所有属性，就好像该应用程序刚刚重建并重新启动一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T15:15:21.680

```
 ConstructorInfo constructor = typeof(Settings).GetConstructor(BindingFlags.Static | BindingFlags.NonPublic,null, new Type[0], null);
  constructor.Invoke(null, null); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T15:09:40.467

你可以使用反射：

```
var prop = typeof(Settings).GetField("setting1", BindingFlags.Static | 
                                                 BindingFlags.Public);
prop.SetValue(null, "Bar");
string currentValue = Settings.setting1; //Bar 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T15:03:51.127

如果上面的代码代表了您所处的情况，那么您将无法重新初始化代码，除非您对反射做了一些特别骇人的事情（顺便说一句，不推荐这样做）。

编辑：哦等等 - 我没有意识到这是一个网络应用程序。您可以以编程方式[反弹应用程序](http://www.eggheadcafe.com/community/visual-studio/7/10040209/how-to-restart-web-application-programmatically.aspx)：

```
System.Web.HttpRuntime.UnloadAppDomain 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:07:16.177

我想到的唯一选择是需要大量工作：

1.  创建另一个 AppDomain
2.  在另一个域中加载程序集
3.  使用 Remoting 获取数据
4.  如果设置更改，请卸载 AppDomain 并再次执行步骤 1 至 3

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T15:10:15.933

我会使用反射

```
var info = typeof(Settings)
.GetField("Settings",BindingFlags.Static|BindingFlags.Public);
info.SetValue(null, "setting4"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-18T12:21:45.720

```
public static class Settings
{
   public static name = "";

   static Settings()
   {
    ReInitialize();
   }

   public static void ReInitialize()
   {
      name = "My name is re-initialized";
   }
}

Settings.name = "My name has changed";
// Console.WriteLine(Settings.name);
Settings.ReInitialize(); //name is "My name is re-initialized"
// Console.WriteLine(Settings.name); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T15:08:27.347

嗯，你想找到破解课程的方法吗？即使它存在反射之类的东西，也不是解决这个问题的好方法

快速解决方法我可以建议您创建自己的非只读静态属性，使用该静态变量进行初始化并在任何地方使用它们

但最好使用缓存或应用程序存储而不是静态变量

希望这可以帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-13T16:11:26.843

我知道旧线程，但我做的一件事是创建一个设置所有变量的**Initialize**方法（公共静态无效）（它们都是公共静态的）。在该方法中，进行数据库调用并设置类的变量。然后在代码中，只要您想刷新变量（即，只要您调用 SaveChanges()），您就可以调用 Class.Initialize() 并完成。

我使用它来缓存可以更改的常见查找信息列表，并且我们需要在从应用程序更新数据库时保持同步。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-23T15:05:37.133

将您的值更改为属性：

```
public static class Settings
{
 public static setting1
 {
   get { return SettingmanagerClass.GetSetting("setting1"); }
 }
 public static setting2
 {
   get { return SettingmanagerClass.GetSetting("setting2");
 }
 public static setting3
 {
   get { return SettingmanagerClass.GetSetting("setting3");
 }
} 
```

此外，这不会更改代码的签名。

# php - Drupal 视图中的“喜欢”模式搜索

> ID：10283038
> 
> 赞同：2
> 
> 时间：2012-04-23T15:02:00.613
> 
> 标签：php, drupal, view, sql-like

我想在 Drupal View 查询中使用**类似模式搜索。**
是否可以使用上下文过滤器？
为了更清楚，假设搜索值为“测试”。

默认搜索查询在哪里：

```
WHERE (( (field_data_field_design_code.field_design_code_value = 'test') )
AND(( (node.status = '1') 
```

我想要它像：

```
WHERE (( (field_data_field_design_code.field_design_code_value like '%"tes"%') )
AND(( (node.status = '1') 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-25T12:19:56.287

您可以使用查看查询更改。在查询更改中，您将获得查询的对象。在此对象中，您可以注入任何您想要的内容- [查看查询更改示例](https://api.drupal.org/api/views/views.api.php/function/hook_views_query_alter/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:45:11.897

您可以使用 db_query 如下：

```
db_query('SELECT node.nid, node.title FROM {node}
INNER JOIN field_data_field_design_code ON node.nid = field_data_field_design_code.nid
WHERE field_data_field_design_code.field_design_code_value LIKE \'%%"%s"%\' AND node.status = %d', $keyword, 1); 
```

您需要在 db_query 中使用 %% 才能使用 LIKE，[http:](http://drupal.org/node/56400#comment-161218) //drupal.org/node/56400#comment-161218 。

# ios - 即使在 iOS 中关闭其父视图后仍保存按钮状态

> ID：10283041
> 
> 赞同：0
> 
> 时间：2012-04-23T15:02:04.193
> 
> 标签：ios

如何在删除其父视图后保存按钮的背景颜色状态。所以下次我在再次加载父视图后单击按钮时，我可以更改按钮的初始颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T11:59:35.343

你可以去`PList`。

试试这个：-
**在 AppDelegate.h**

```
+(NSString *)getValueFromPlist:(NSString *)key filename:(NSString *)filename;
+(NSString *)dataFilePath:(NSString *)filename; 
```

**在 AppDelegate.m**

```
+(NSString *)getValueFromPlist:(NSString *)key filename:(NSString *)filename
{
    NSString *path = [AppDelegate dataFilePath:filename];
    //NSLog(@"\npath - %@\n", path);
    NSDictionary *dict = [[NSDictionary alloc]initWithContentsOfFile:path];
    //NSLog(@"\nparsing- %@", dict);
    return [dict valueForKey:key];
}

+ (NSString *)dataFilePath:(NSString *)filename {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirectory = [paths objectAtIndex:0];
    return [docDirectory stringByAppendingPathComponent:filename];
} 
```

在**yourViewController.m**中，使用此代码将值保存在 plist 中：-

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc]init];
[dict setValue:@"Your Value to be saved" forKey:@"value"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"nameOfPlist.plist"];

[dict writeToFile:path atomically:YES]; 
```

下次，从 plist 中获取值并将其用于您的代码：-

```
NSString *strValue = [AppDelegate getValueFromPlist:@"value" filename:@"nameOfPlist.plist"]; 
```

# bash - 将字符串的后缀与 case-statement 匹配

> ID：10283046
> 
> 赞同：2
> 
> 时间：2012-04-23T15:02:18.003
> 
> 标签：bash, switch-statement

您如何将字符串的后缀与 case 语句匹配？

例子

```
case "foobar" in
    "*bar")
        echo "yay!"
    ;;
esac 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:06:35.753

如果您只是丢失引号，效果很好；

```
#!/bin/bash
case "foobar" in
    *bar)
        echo "yay!"
        ;;
esac 
```

# parsing - jQuery ajax 响应解析

> ID：10283051
> 
> 赞同：0
> 
> 时间：2012-04-23T15:02:35.070
> 
> 标签：parsing, jquery

这真的很尴尬，但是这种例行的 AJAX 响应解析被证明是顽固的。

```
jQuery.ajax({
    url: 'http://hoffmann-koree.com/?q=dropmenu/' + $nid + '.xml',
    dataType: 'xml',
    type: 'POST',
    success: function($data) {
        jQuery($data).find('term_node_tid').each(
            function(){
                console.log( jQuery(this).html() );
            }
        );
    }
}); 
```

使用上面的代码，我不断收到以下奇怪的错误：

> '语法错误，无法识别的表达式：[object Object]' 调用方法时：[nsIDOMEventListener::handleEvent] [Break On This Error]
> 
> 过滤后的 chrome url chrome://firebug/content/net/spy.js

谁能告诉我我做错了什么，好吗？

示例 XML 输出：

```
<?xml version="1.0" encoding="utf-8"?>
<terms>
    <term>
        <term_node_tid><div class="item-list"><ul><li class="first last"><a href="/?q=taxonomy/term/6">pens</a></li>
        </ul></div></term_node_tid>
    </term>
    <term>
        <term_node_tid><div class="item-list"><ul><li class="first last"><a href="/?q=taxonomy/term/3">stationary</a></li>
        </ul></div></term_node_tid>
    </term>
    <term>
        <term_node_tid><div class="item-list"><ul><li class="first last"><a href="/?q=taxonomy/term/3">stationary</a></li>
        </ul></div></term_node_tid>
    </term>
</terms> 
```

# html - 使用 SQLite 删除最旧的记录

> ID：10283052
> 
> 赞同：0
> 
> 时间：2012-04-23T15:02:42.000
> 
> 标签：html, sqlite

我想使用 SQLite 从表中删除最旧的记录，所以我应该使用条件（最低 id）还是有其他补救措施

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:11:17.907

```
delete from table1 as a where a.id = (select min(id) from table1) 
```

或者如果您保存了日期，您可以这样做

```
delete from table1 as a where a.[date]= (select min([date]) from table1) 
```

# python - 在 python 中从网络（带有重定向）下载 .csv 文件

> ID：10283053
> 
> 赞同：3
> 
> 时间：2012-04-23T15:02:47.233
> 
> 标签：python, redirect, csv, download, web

首先让我说，我知道有一些主题讨论与我类似的问题，但由于某种原因，建议的解决方案似乎对我不起作用。另外，我不熟悉使用脚本从 Internet 下载文件。到目前为止，我主要使用 python 作为 Matlab 的替代品（使用 numpy/scipy）。

我的目标：我想使用 python 自动从 Internet 数据库 ( [http://dna.korea.ac.kr/vhot/ ) 下载大量 .csv 文件。](http://dna.korea.ac.kr/vhot/)我想这样做是因为手动下载我需要的 1000 多个 csv 文件太麻烦了。只能使用 UI 访问数据库，您必须在其中从下拉菜单中选择几个选项，经过一些步骤后最终得到指向 .csv 文件的链接。我发现您在填写下拉菜单并按“搜索”后获得的 url 包含下拉菜单的所有参数。这意味着我可以更改它们而不是使用下拉菜单，这很有帮助。

该网站的示例 url 是（我们称之为**url1**）： **url1** = [http://dna.korea.ac.kr/vhot/search.php?species=Human&selector=drop&mirname=&mirname_drop=hbv-miR-B2RC&pita=on&set= and&miranda_th=-5&rh_th=-10&ts_th=0&mt_th=7.3&pt_th=99999&gene=](http://dna.korea.ac.kr/vhot/search.php?species=Human&selector=drop&mirname=&mirname_drop=hbv-miR-B2RC&pita=on&set=and&miranda_th=-5&rh_th=-10&ts_th=0&mt_th=7.3&pt_th=99999&gene=)

在此页面上，我可以选择 5 个 csv 文件，一个示例将我定向到以下 url：

**url2** = [http://dna.korea.ac.kr/vhot/download.php?mirname=hbv-miR-B2RC&species_filter=species_id+%3D+9606&set=and&gene_filter=&method=pita&m_th=-5&rh_th=-10&ts_th=0&mt_th=7.3&pt_th =99999&targetscan=&miranda=&rnahybrid=µt=&pita=on](http://dna.korea.ac.kr/vhot/download.php?mirname=hbv-miR-B2RC&species_filter=species_id+%3D+9606&set=and&gene_filter=&method=pita&m_th=-5&rh_th=-10&ts_th=0&mt_th=7.3&pt_th=99999&targetscan=&miranda=&rnahybrid=&microt=&pita=on)

但是，这不直接包含 csv 文件，但似乎是一个“重定向”（对我来说是一个新术语，我是通过谷歌搜索找到的，如果我错了，请纠正我）。

一件奇怪的事。我似乎必须在浏览器中加载 url1 才能访问 url2 （我不知道它是否必须是同一天或小时。url2 今天对我不起作用，昨天对我起作用。只有在访问 url1 之后它再次起作用了吗...）。如果我在 url2 之前没有访问 url1，我会从浏览器中得到*“无结果”*而不是 csv 文件。有谁知道这里发生了什么？

但是，我的主要问题是我无法从 python 保存 csv 文件。我试过使用*urllib、urllib2*和*request*包，但我无法让它工作。据我了解，*Requests*包应该处理重定向，但我无法使其工作。

以下网页的解决方案似乎对我不起作用（或者我搞砸了）：

stackoverflow.com/questions/7603044/how-to-download-a-file-returned-indirectly-from-html-form-submission-pyt

stackoverflow.com/questions/9419162/python-download-returned-zip-file-from-url

techniqal.com/blog/2008/07/31/python-file-read-write-with-urllib2/

我尝试过的一些事情包括：

```
import urllib2
import csv
import sys

url = 'http://dna.korea.ac.kr/vhot/download.php?mirname=hbv-miR-B2RC&species_filter=species_id+%3D+9606&set=or&gene_filter=&method=targetscan&m_th=-5&rh_th=-10&ts_th=0&mt_th=7.3&pt_th=-10&targetscan=on&miranda=&rnahybrid=&microt=&pita='

#1
u = urllib2.urlopen(url)
localFile = open('file.csv', 'w')
localFile.write(u.read())
localFile.close()

#2
req = urllib2.Request(url)
res = urllib2.urlopen(req)
finalurl = res.geturl()
pass
# finalurl = 'http://dna.korea.ac.kr/vhot/download.php?mirname=hbv-miR-B2RC&species_filter=species_id+%3D+9606&set=or&gene_filter=&method=targetscan&m_th=-5&rh_th=-10&ts_th=0&mt_th=7.3&pt_th=-10&targetscan=on&miranda=&rnahybrid=&microt=&pita='

#3
import requests
r = requests.get(url)
r.content
pass
#r.content =  "< s c r i p t > location.replace('download_send.php?name=qgN9Th&type=targetscan'); < / s c r i p t >"

#4
import requests
r = requests.get(url, 
allow_redirects=True,
data={'download_open': 'Download', 'format_open': '.csv'})
print r.content
# r.content = "

#5
import urllib
test1 = urllib.urlretrieve(url, "test.csv")
test2 = urllib.urlopen(url)
pass 
```

对于#2、#3 和#4，输出显示在代码之后。对于#1 和#5，我只得到一个 .csv 文件`</script>'`

选项#3 只是给了我一个新的重定向，我认为这对我有帮助吗？

有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:21:44.243

该页面不发送`HTTP Redirect`，而是通过 JavaScript 完成重定向。 `urllib`并且`requests`不处理 javascript，因此他们无法访问下载 url。您必须自己提取最终的下载网址，然后使用任何方法打开它。

`re`您可以使用带有正则表达式的模块提取 URL，例如`r'location.replace\((.*?)\)'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:34:49.753

根据 ch3ka 的回复，我想我可以正常工作了。从源代码我得到java重定向，从这个重定向我可以得到数据。

```
#Find source code
redirect = requests.get(url).content

#Search for the java redirect (find it in the source code) 
# --> based on answer ch3ka
m = re.search(r"location.replace\(\'(.*?)\'\)", redirect).group(1)

# Now you need to create url from this redirect, and using this url get the data
data = requests.get(new_url).content 
```

# jquery - 不确定如何正确获取变量

> ID：10283054
> 
> 赞同：0
> 
> 时间：2012-04-23T15:02:51.400
> 
> 标签：jquery, variables

我正在尝试做到这一点，因此当用户单击收音机时，它会设置一个变量，然后单击第二个收音机并创建第二个变量。

然后我想合并这两个变量并根据创建的变量通过 ajax 加载一些数据。为了测试它，我制作了一个按钮，我可以单击以测试变量是否存在但它没有显示，所以我假设我没有做正确的事情。

我非常感谢您的帮助，我对此很陌生，只是遇到了很多麻烦。

```
<script type="text/javascript">
  $(function(){
    $("input:radio[name=f_1]").click(function() {
      type = $(this).val();
    });

    $("input:radio[name=f_1a]").click(function() {
      prod = $(this).val();
    });

    var type, prod;
    var JobType = type + prod;
    $("#alertButton").click(function(){
      alert (JobType);
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:31:20.323

您可以使用以下代码：

```
$("input:radio").change(function() {

    var selected = $("input:radio:checked");

    if ( selected.length === 2 ) {
        var f = $("input[name='f']:checked").val();
        var z = $("input[name='z']:checked").val();           
        alert('we have values ['+z+f+']');
    }

}); 
```

在您的代码中，您在函数范围之外有变量声明，因此您无法获得所需的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:37:19.447

您的变量仅在页面加载时加入（当它们为空时），因为它们不在函数内。

在顶部声明您的变量，并在它们实际具有值时将变量的连接放在 click 函数中，它工作得很好：

```
$(function(){
    var type="", prod="", JobType="";

    $("input:radio[name=f_1]").click(function() {
        type = $(this).val();
    });

    $("input:radio[name=f_1a]").click(function() {
        prod = $(this).val();
    });

    $("#alertButton").click(function(){
        JobType = type + prod;
        alert (JobType);
    });
});​ 
```

如果你给你的变量一个没有的初始值（“”），你可以避免“未定义”的问题。

这是一个[小提琴](http://jsfiddle.net/adeneo/EUgfK/)

# javascript - 使用 jQuery 加载数据

> ID：10283059
> 
> 赞同：0
> 
> 时间：2012-04-23T15:03:13.413
> 
> 标签：javascript, jquery

我在下拉菜单 ( `select`) 中有一个状态列表。每个州都有一个页面。每个页面都有州缩写作为名称，例如：**Alabama** is `al.htm`。我想根据状态名称的选择来加载**htm的内容；**每个州都一样。换句话说，如果我选择**New York**，我应该会看到**ny.htm**中的信息。

加载不同页面中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:08:20.083

你的问题很模糊，所以这个答案做了一些假设。首先，我假设`value`each`option`是缩写，例如：

```
<select id="yourSelect">
    <option value="al">Alabama</option>
</select> 
```

接下来，我假设您希望将页面内容加载到页面上的特定元素中，并且您希望在选择更改时发生这种情况：

```
$("#yourSelect").change(function() {
    $("#whereToLoad").load(this.value + ".htm");
}); 
```

# android - 与多播兼容的 Android 智能手机

> ID：10283060
> 
> 赞同：0
> 
> 时间：2012-04-23T15:03:18.787
> 
> 标签：android, multicast

我正在寻找可以进行多播的 Android 智能手机列表。

我知道多播在同一部智能手机上可能不同，但在不同的 android 版本下。

所以我正在寻找可以使用多播的品牌和型号的特定列表。

如果有人可以给我他测试的列表或模型，我会很高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:19:59.710

Android 在支持组播方面具有一致性。

从 2.1 到 3.2 的所有 android 版本的不同 HTC、三星和摩托罗拉设备上都缺少 IGMP。

请参考以下链接。

[http://www.programmingmobile.com/2012/01/multicast-and-android-big-headache.html](http://www.programmingmobile.com/2012/01/multicast-and-android-big-headache.html)

谢谢。

# css - 在下拉菜单中选择 CSS3 最后一个子项不起作用

> ID：10283061
> 
> 赞同：0
> 
> 时间：2012-04-23T15:03:20.607
> 
> 标签：css, pseudo-class, css-selectors

令人沮丧的是，我们目前正在处理的这个自定义下拉导航菜单无法解决 CSS3 伪元素“last-child”问题。

每个下拉菜单都可以分配多个列，在这种情况下，我想为 div .dropdown_3column 中的每一列 (.col_1) 应用右侧边框。

CSS 片段

```
.dropdown_1column_simple {width: 100px;}
.dropdown_2column_simple {width: 155px;}
.dropdown_1column {width: 550px;}
.dropdown_2column {width: 650px;}
.dropdown_3column {width: 500px;}
.dropdown_4column {width: 800px;}
.dropdown_5column {width: 1000px;}

.dropdown_2column_simple .col_1  {width:155px;}
.dropdown_2column_simple .col_2  {width:155px;}
.col_1 {width:145px; border-right: 1px solid #888;}
.col_2 {width:240px;}
.col_3 {width:490px;}
.col_4 {width:440px;}
.col_5 {width:575px;}
.col_s {width:250px;}

.col_1,.col_2,.col_3,.col_4,.col_5 {
display:inline;
float: left;
position: relative;
margin-left: 5px;
margin-right: 5px;
/*border: 1px solid #000;*/
} 
```

HTML 片段

```
<div class="dropdown_3column align_left ">
 <div class="col_3">
  <div class="content_top"></div>
 </div>
 <div class="col_1">
  <ul>
   <li class="level1">
    <a href="http://009rep.clubnetdev.com/brands/addict-clothing.html">
     <span class="level1">Addict Clothing </span>
    </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/atticus-clothing.html">
    <span class="level1">Atticus Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/dephect-clothing.html">
    <span class="level1">Dephect Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/dickies-clothing.html">
    <span class="level1">Dickies</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/dta-clothing.html">
    <span class="level1">DTA Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/famous-stars-and-straps-clothing.html">
    <span class="level1">Famous Stars And Straps Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/fuct-clothing.html">
    <span class="level1">FUCT Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/hex-accessories.html">
    <span class="level1">HEX Accessories</span>
   </a>
  </li>
 </ul>
</div>
<div class="col_1">
 <ul>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/the-hundreds.html">
    <span class="level1">The Hundreds</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/insight-clothing.html">
    <span class="level1">Insight Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/jeepney-clothing.html">
    <span class="level1">Jeepney Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/king-apparel.html">
    <span class="level1">King Apparel</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/lrg-clothing.html">
    <span class="level1">LRG Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/my-yard-clothing.html">
    <span class="level1">My Yard</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/new-era-5950.html">
    <span class="level1">New Era 5950 Hats and Apparel</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/pxl-clothing.html">
    <span class="level1">PXL Clothing</span>
   </a>
  </li>
 </ul>
</div>
<div class="col_1">
 <ul>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/rebel8-clothing.html">
    <span class="level1">REBEL8 Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/ringspun-clothing.html">
    <span class="level1">Ringspun</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/rogue-status-clothing.html">
    <span class="level1">Rogue Status </span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/the-wild-ones-clothing.html">
    <span class="level1">The Wild Ones</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/volcom-clothing.html">
    <span class="level1">Volcom Clothing</span>
   </a>
  </li>
  <li class="level1">
   <a href="http://009rep.clubnetdev.com/brands/zoo-york-clothing.html">
    <span class="level1">Zoo York Clothing</span>
   </a>
  </li>
 </ul>
</div>
<div class="col_3">
 <div class="content_bottom"></div>
</div>
<div class="col_s">
 <div class="content_side"></div>
</div>
</div> 
```

可以在[此处查看](http://009rep.clubnetdev.com/)该问题的实时版本。我正在尝试从第三（最后）列中删除右侧边框，这是有问题的“品牌”下拉列表。

我知道浏览器不兼容和其他使用 JS / jQuery 的替代方案可能存在，但我只对尝试使用 CSS 解决这个问题感兴趣。

我在想也许这需要一双新的眼睛，因为我已经尝试了很多变化，但没有设法选择我相信的下拉列表中的最后一列。

提前致谢。

编辑：我尝试了很多变化，但我认为问题是我无法计算出父项的最后一个子项，它也不算其他 div。我一直在尝试以下方法：

```
div:last-child .col_1 {border-right: none !important;} 
```

谢谢。

编辑 2：如果它对任何人有帮助，请在[JS Fiddle](http://jsfiddle.net/zigojacko/hXCBu/1/)上找到我的问题实例。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:47:07.400

您没有正确使用选择器。这是使用 nth-child 的修复：http: [//jsfiddle.net/BUhgZ/3/](http://jsfiddle.net/BUhgZ/3/)

# macos - 让 sudo 通过 GUI 询问密码

> ID：10283062
> 
> 赞同：13
> 
> 时间：2012-04-23T15:03:20.940
> 
> 标签：macos, osx-lion, sudo

我有一个在 Mac 上运行的 lua 脚本，需要调用 sudo。

我希望 Mac OS 会自动弹出一个密码请求对话框，但是命令失败并返回 256。

无论如何，我可以实现我的目标吗？

蒂姆

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-23T15:10:49.110

快速简便的方法：像这样运行它

```
/usr/bin/osascript -e 'do shell script "/path/to/myscript args 2>&1 etc" with administrator privileges' 
```

正确且可配置的方式：使用`AuthorizationExecuteWithPrivileges`来自授权服务的 API（在 Security.framework 中）。

两者都将显示标准的 Mac OS X GUI，要求输入管理员密码，然后以 root 身份执行命令，与 sudo 相同，只是`SUDO_USER`不会设置环境变量。

如果您需要在已经提升到 root 的情况下从用户帐户下执行单个命令，您可以在它们前面加上`/usr/bin/sudo -u $USER`.

# python - 在 Python 中使用 Pyglet 和 Tkinter 播放音乐

> ID：10283067
> 
> 赞同：5
> 
> 时间：2012-04-23T15:03:34.110
> 
> 标签：python, user-interface, playback, pyglet

我想创建一个带有播放和停止按钮的简单 gui，以在 python 中播放 mp3 文件。我使用 Tkinter 创建了一个非常简单的 gui，它由 2 个按钮（停止和播放）组成。

我创建了一个执行以下操作的函数：

```
def playsound () :
    sound = pyglet.media.load('music.mp3')
    sound.play()
    pyglet.app.run() 
```

我将该功能作为命令添加到按钮播放中。我还做了一个不同的功能来停止音乐：

```
def stopsound ():
    pyglet.app.exit 
```

我将此功能作为命令添加到第二个按钮。但问题是当我点击播放时，python 和 gui 冻结。我可以尝试关闭窗口，但它没有关闭，并且停止按钮没有响应。我知道这是因为 pyglet.app.run() 正在执行直到歌曲结束，但我该如何防止这种情况发生？当我单击按钮时，我希望 gui 停止音乐。关于在哪里可以找到解决方案的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:57:42.200

您将两个 UI 库混合在一起 - 这本质上并不坏，但存在一些问题。值得注意的是，他们都需要自己的主循环来处理他们的事件。TKinter 使用它与桌面和用户生成的事件进行通信，在这种情况下，pyglet 使用它来播放您的音乐。

这些循环中的每一个都阻止了正常的“自上而下”程序流程，正如我们在学习非 GUI 编程时所习惯的那样，程序应该基本上从主循环中进行回调。在这种情况下，在 Tkinter 回调的中间，您使 pyglet 主循环（调用`pyglet.app.run`）处于运动状态，并且控制永远不会返回到 Tkinter 库。

有时，不同库的循环可以在同一个进程中共存，没有冲突——但当然，您将运行其中一个或另一个。如果是这样，则可以在不同的 Python 线程中运行每个库的主循环。

如果它们不能一起存在，您将不得不在不同的进程中处理每个库。

因此，使音乐播放器在另一个线程中启动的一种方法可能是：

```
from threading import Thread

def real_playsound () :
    sound = pyglet.media.load('music.mp3')
    sound.play()
    pyglet.app.run()

def playsound():
    global player_thread
    player_thread = Thread(target=real_playsound)
    player_thread.start() 
```

如果 Tkinter 和 pyglet 可以共存，那应该足以让你的音乐开始。然而，为了能够控制它，您需要实现更多的东西。我的建议是在 pyglet 每秒左右调用的 pyglet 线程上有一个回调——这个回调检查一些全局变量的状态，并根据它们选择停止音乐，更改正在播放的文件，等等上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:32:29.413

我会做类似的事情：

```
import pyglet
from pyglet.gl import *

class main (pyglet.window.Window):
    def __init__ (self):
        super(main, self).__init__(800, 600, fullscreen = False)
        self.button_texture = pyglet.image.load('button.png')
        self.button = pyglet.sprite.Sprite(self.button_texture)

        self.sound = pyglet.media.load('music.mp3')
        self.sound.play()

        self.alive = 1

    def on_draw(self):
        self.render()

    def on_close(self):
        self.alive = 0

    def on_mouse_press(self, x, y, button, modifiers):
        if x > self.button.x and x < (self.button.x + self.button_texture.width):
            if y > self.button.y and y < (self.button.y + self.button_texture.height):
                self.alive = 0

    def on_key_press(self, symbol, modifiers):
        if symbol == 65307: # [ESC]
            self.alive = 0

    def render(self):
        self.clear()
        self.button.draw()
        self.flip()

    def run(self):
        while self.alive == 1:
            self.render()

            # -----------> This is key <----------
            # This is what replaces pyglet.app.run()
            # but is required for the GUI to not freeze
            #
            event = self.dispatch_events()

x = main()
x.run() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-05T22:40:03.470

这个解决方案是最简单的一个：

```
import pyglet
foo=pyglet.media.load("/data/Me/Music/Goo Goo Dolls/[1998] Dizzy Up The Girl/11 - Iris.mp3")
foo.play()

def exiter(dt):
    pyglet.app.exit()
print "Song length is: %f" % foo.duration
# foo.duration is the song length
pyglet.clock.schedule_once(exiter, foo.duration)

pyglet.app.run() 
```

来源：[http ://ubuntuforums.org/showthread.php?t=1651906](http://ubuntuforums.org/showthread.php?t=1651906)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:28:45.917

pyglet 文档中有一个媒体播放器实现：

[http://www.pyglet.org/doc/programming_guide/playing_sounds_and_music.html](http://www.pyglet.org/doc/programming_guide/playing_sounds_and_music.html)

您应该查看的脚本是[media_player.py](http://www.pyglet.org/doc/programming_guide/media_player.py)

希望这会让你开始

# c# - C# - 何时转换类属性的值

> ID：10283069
> 
> 赞同：1
> 
> 时间：2012-04-23T15:03:38.580
> 
> 标签：c#, class, get, set, public

我想知道哪个被认为更正确或更好的做法：

部分课程：

```
public class foo
{
private Single amount;
public Single Amount
{
get
    {
        return amount;
    }
set
    {
        amount = Convert.ToSingle(value);
    }
}
} 
```

或者

```
public Single Amount {get;set;} 
```

并转换代码中的值，例如：

```
foo myFoo = new foo();
myFoo.Amount = Convert.ToSingle(somevalue); 
```

我将从数据库中获取值（somevalue），因此我可以轻松地将所有值作为字符串传递给类并在那里处理所有转换（或在数据访问层中进行转换）。我只想知道哪个是更好的做法（或者我没有想到的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:06:22.910

第二个绝对是更可取的 IMO：

```
public Single Amount { get; set; } 
```

你不希望你的班级在后台做一些从外面看不清楚的事情（比如类型转换）。

符合类属性格式是外部代码的工作，而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:05:56.267

尽管行为差异，性能应该可以忽略不计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:07:17.807

他们指定短版本的主要原因是您不必编写整个长版本，因此您应该从短版本开始：

```
public Single Amount { get; set; } 
```

隐式转换是一个非常糟糕的主意，您肯定需要显式转换，以便您的用户知道转换正在进行并且您的函数不会意外地采取任何措施。考虑一下，当您在属性内进行转换时，您的属性将需要一个对象，该对象可能是可转换为 Single 的任何对象，因此您引入了错误的可能性。

您不希望您的属性的用户发现他给它分配了一些错误，导致它`0`由于某种原因变成了错误，您宁愿希望编译器提前警告他，而不是让他不得不通过一些调试。

转换他们给你的任何东西不是你的责任，而是希望他们给一个单身......

# arrays - 如何在函数中使用数组代替名称值对

> ID：10283074
> 
> 赞同：0
> 
> 时间：2012-04-23T15:03:55.717
> 
> 标签：arrays, name-value

在下面的代码中，我如何使用作为参数传递给`drawOval`

```
drawOval=function(options) {
    $triangle = new Triangle({
        // how can I use options array here
        // the format it accept is top:450,
        // left:500,width:200
    });
};
opt = new Array(
    top: 450,
    left: 500,
    width: 200,
    height: 200,
    fill: 'rgb(204,0,107)'
);
drawOval(opt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:01:02.083

基本上我需要一个对象而不是数组。

```
opt= {
    top:100,
    left:200,
    width:200,
    height:200,
    fill:'rgb(12,0,107)'
}
drawOval(opt); 
```

# c#-4.0 - 部署 C#.Net 控制台应用程序

> ID：10283079
> 
> 赞同：1
> 
> 时间：2012-04-23T15:04:12.663
> 
> 标签：c#-4.0, assemblies, console-application, publishing

我正在尝试部署我的 C#.Net 控制台应用程序。

我试过的方法。

构建应用程序

1.  进入**bin**目录
2.  在**调试**目录中复制文件并移动到压缩文件夹
3.  在不同的机器上解压并运行**.exe**文件

我遇到的问题是：

我在我的项目中使用了**MSXML2程序集。**我猜这个程序集没有复制到 bin 目录，我正在运行**.exe**文件的机器中没有这个程序集。

当我运行**.exe**时，它​​会出现以下错误。

```
System.IO.FileNotFoundException: The system cannot locate the resource specified.
at MSXML2.IXMLHTTPRequest.send(object varbody
at projectname.Program.Main(String[] args)) 
```

我怎样才能确保这个程序集正确加载到我的部署文件夹中。

感谢您关注我的问题。

应用**dotnetengineer**建议集**Copy Local to TRUE** 新问题：

```
Could not load file or assembly 'Interop.MSXML2, Version=3.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:10:52.620

单击并突出显示 Soultion Explorer 中对 MSXML2 的引用。在“属性”窗格中，确保“复制本地”设置为“真”。

# c++ - 如何在一个类中初始化一个char指针？

> ID：10283084
> 
> 赞同：2
> 
> 时间：2012-04-23T15:04:20.900
> 
> 标签：c++

我在处理 char 指针时感到困惑。请看下面的代码：

```
class Person
{
    char* pname;
public:
    Person(char* name)
    {
        //I want to initialize 'pname' with the person's name. So, I am trying to
        //achieve the same with different scenario's

        //Case I:   
        strcpy(pname, name); // As expected, system crash.

        //Case II: 
        // suppose the input is "ABCD",  so trying to create 4+1 char space
        // 1st 4 for holding ABCD and 1 for '\0'.
        pname = (char*) malloc(sizeof(char) * (strlen(name)+1) );
        strcpy(pname, name);

        // Case III: 
        pname = (char*) malloc(sizeof(char));
        strcpy(pname, name);
    }

    void display()
    {
        cout<<pname<<endl;
    }
};

void main()
{
    Person obj("ABCD");
    obj.display(); 
} 
```

对于案例 I：正如预期的那样，系统崩溃。

案例二的输出：

> A B C D

案例 III 的输出：

> A B C D

所以，我不确定为什么案例 II 和 III 会产生相同的输出!!!!..... 我应该如何在一个类中初始化一个 char 指针？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T15:07:54.687

第三种情况会调用**未定义的行为**，因此在这种情况下可能会发生任何事情。
在这种情况下，您正在写入超出分配内存的范围，这可能会或可能不会崩溃，但它是一个 UB。

**如何在 C++ 中以正确的方式做到这一点？**
根本不使用`char *`！
只需简单地使用**[std::string](http://www.cplusplus.com/reference/string/string/)**。

请注意，它`std::string`为您提供了**c_str()**函数，该函数可以为您提供基础字符串。除非，您担心将 a 的所有权传递`char *`给您应该始终`std::string`在 c++ 中使用的 c 样式 api。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T15:09:12.907

第三个选项也是错误的，因为您没有为它分配足够的内存。您正在尝试将大小为 5 的字符串复制到大小为 1 的缓冲区，这意味着之后的数据`pname[1]`被错误地覆盖并消失了..

如果幸运的话，您可能会看到诸如内存访问冲突之类的运行时错误，或者除了其背后的数据已损坏（例如您的银行帐户）之外，您什么也看不到，直到......

正确的方法是始终分配足够的内存进行复制。`std::string`正如 Als 所指出的，C++ 中更好的方法是使用，因为它可以让您从手动管理内存（分配、增长、释放等）中解脱出来。

例如，

```
class Person
{
    std::string pname;
public:
    Person(char* name)
    {
        pname = name;
    }

    void display()
    {
        cout << pname << endl;
    }
};

void main()
{
    Person obj("ABCD");
    obj.display(); 
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T15:07:19.747

你必须为你的成员变量分配内存`pname`，但是，我不知道你为什么要使用 a`char*`而你只能使用 a `string`：

```
std::string pname;

//...

pname = std::string(name); 
```

如果有充分的理由**必须**使用 a `char*`，那么请执行以下操作：

```
// initialize the pname
pname = new char[strlen(name)];

// copy the pname
strcpy(pname, name); 
```

您不需要在字符串末尾为`null`-termination 分配额外空间的原因是因为使用双引号`"blah"`会自动生成`null`-terminated 字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T15:10:35.300

如果您从事 C++ 业务，那么是时候代表 STL 字符串转储 char 指针了：

```
#include <string>

class Person
{
    std::string the_name;
public:
    Person(std::string name) : the_name(name)
    { ... 
```

cout 也同样使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T15:09:48.707

在您的案例 III 中，您这样做了，它为*单个 char*`pname = (char*) malloc(sizeof(char));`分配了足够的内存。但是，strcpy 无法知道这一点，它会直接写入该字节之后的任何内存，直到它完成对您传递给函数的所有 char* 的复制。这被称为*缓冲区溢出*，虽然这可能会立即起作用，但它可能会在未来破坏某些东西。如果您只想复制 char* 的一小部分，您可以查看，它复制到一定长度[（API 参考此处）](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)。如果您使用它，请务必自己添加以空值结尾的字符，因为如果您只复制字符串的一部分，strncpy 将不会包含它。**`strncpy`**

 *** * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-23T15:10:14.193

这`pname = (char*) malloc(sizeof(char));`是巧合，调用`strcpy`写入尚未分配的内存，因此它可能随时使您的程序崩溃。

初始化缓冲区的更简单方法是：

```
pname = strdup(name); 
```

或者

```
pname = strndup(name, strlen(name)); 
```

请参阅[http://linux.die.net/man/3/strdup](http://linux.die.net/man/3/strdup)。

此外，您必须考虑释放通过调用`free(pname);`类析构函数分配的内存。

总而言之，这一切都可以通过使用C++的std::string类来避免，正如大家所说的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-23T15:17:35.020

正确的是案例二！

是的，如果我错了，它会崩溃，因为您将数据复制到未初始化的指针。

案例 III 也是错误的，但它现在可以工作，因为您的测试字符串很小！如果您尝试使用更大的字符串，则会损坏内存，因为您将大字符串复制到分配的小空间。

在某些系统中，malloc 与集群一起工作，因此它通过分配内存块而不是逐字节分配来工作。这意味着当您使用 malloc 分配单个字节时（就像您在案例 III 中所做的那样），它会分配更多的内存以达到它可以处理的最小内存块，这就是为什么您可以移动超过 1 个字节而不会崩溃的原因系统。**

# sql-server-2008 - DATEADD、DATEPART 未返回所需结果

> ID：10283086
> 
> 赞同：1
> 
> 时间：2012-04-23T15:04:22.600
> 
> 标签：sql-server-2008, dateadd, datepart

我不确定我的大脑是否在工作，因为现在是星期一。我想在本年度中增加一年，但我得到了不希望的结果。

这是我得到的：

```
select current_timestamp 
Output:2012-04-23 09:57:45.777

select DATEADD(YEAR, 1, DATEPART(YEAR,current_timestamp)) 
Output: 1906-07-06 00:00:00.000

select DATEPART(year,current_timestamp) 
Output: 2012 
```

像这样简单的事情，由于某种原因，我没有发现这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:07:04.997

```
select DATEADD(YEAR, 1, current_timestamp) 
```

如果您只想要日期部分：

```
select DATEADD(d, 0, DATEDIFF(d, 0, DATEADD(YEAR, 1, current_timestamp) )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T05:35:09.327

你能试试这个吗？

选择 DATEPART(YYYY,(DATEADD(YEAR, 1,current_timestamp)))

--它将给出2016年的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:10:09.280

```
select DATEADD(YEAR, 1, current_timestamp) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-25T13:17:30.397

```
SELECT cast(DATEPART(YEAR,current_timestamp) as datetime); 
```

go return 1905-07-10 00:00:00.000 这就是问题所在

```
select dateadd(year,1, current_timestamp); 
```

回去 2017-07-25 23:13:49.700

# jquery - Jquery 页面未完全加载/显示

> ID：10283092
> 
> 赞同：0
> 
> 时间：2012-04-23T15:04:39.117
> 
> 标签：jquery, jquery-mobile

我有一个 JQuery 移动页面，其中有几个链接。问题是，当我单击一个按钮转到下一页时，所有元素都没有完全显示（例如页脚和其他一些元素）。我必须刷新页面才能看到完整的内容。任何帮助，将不胜感激。

```
 <body data-role="body">
  <header data-role="header">
     <a href=""  data-role="button"  data-transition="fade" data-icon="gear">Settings</a>
    <h1>App</h1>
    <a href="base.php" data-role="button" class="ui-btn-right" data-transition="fade" data-icon="home">Home</a>

    <?  require'includes/navbar.php'; ?>
</header>

<div data-role="content" id="basecontent">
    <a href="#" id="profile" data-transition="fade" data-rel="dialog" data-role="button">Create A profile</a>
    <a id="findshuttle" href="shuttleview.php" data-transition="fade" data-role="button">Find the Shuttle</a>
    <a id="where" href="whereami.php"  data-transition="fade" data-role="button">where am I</a>
</div>

</body>
 <?  require'includes/footer.php'; ?> 
```

听起来我没有很好地问这个问题。假设我去 www.foo.com 一切都加载得很好，但是如果我导航到 foo.com/bass 页面会部分加​​载。如果重新加载 foo.com/bass，一切都会被渲染，但如果我尝试返回 foo.com，页面会部分加​​载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:10:45.037

从您在此处发布的内容来看，您的导航栏似乎在您的文档中，而您的页脚位于结束标记下方。如果这些元素不在您页面的 open 标记内，它们将不会显示。

```
<body data-role="body">
<header data-role="header">
<a href=""  data-role="button"  data-transition="fade" data-icon="gear">Settings</a>
<h1>App</h1>
<a href="base.php" data-role="button" class="ui-btn-right" data-transition="fade" data-icon="home">Home</a>
</header>
    <!--Move this below header-->
<?  require'includes/navbar.php'; ?>

<div data-role="content" id="basecontent">
<a href="#" id="profile" data-transition="fade" data-rel="dialog" data-role="button">Create A profile</a>
<a id="findshuttle" href="shuttleview.php" data-transition="fade" data-role="button">Find the Shuttle</a>
<a id="where" href="whereami.php"  data-transition="fade" data-role="button">where am I</a>
</div>
    <!--Move this above closing body tag-->
<?  require'includes/footer.php'; ?>
</body> 
```

# html - 从 oracle 10g 中检索多行

> ID：10283094
> 
> 赞同：-1
> 
> 时间：2012-04-23T15:04:51.050
> 
> 标签：html, jsp, oracle10g

我在oracle中创建了一个表，其中包含college_names、student_name、regno和result属于特定的大学和每所大学的college_ids以及数据存储的日期......

现在我想给出college_id和日期，我希望所有学生的姓名及其结果和regno在浏览器中的表格结构中我已经编写了一个html页面用于提供college_id和日期，以及一个jsp页面用于从数据库中检索不同的字段但是它不起作用..这是我的两个页面的代码..

这是我的 html 页面

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org     /TR/html4/loose.dtd">
<html>
 <head>
 <script>
function check()
{
var a=result.college_id.value;
var b=result.date.value;
if(a==""|| b=="")
{
alert("fill the fields")
}
else
{
result.action="result.jsp";
result.method="post";
result.submit();
}
}

 </script>
 </head>

 <body bgcolor="#cc99ff">
 <form name="result">
 <center>
 <table>
 <tr>
 <td>college_id:</td>
 <td><input type="text" name="college_id"></td>
 </tr>
  <tr>
 <td>date:</td>
 <td><input type="text" name="date"></td>
 </tr>
 <tr>
 <td>
 <input type="Button" value="Submit" onClick="check()">
 </td>
 </tr>
 </table>
 </center>
 </body>
 </html> 
```

现在这是我用于检索多行的 jsp 页面...

```
<html>
<body background="main_BG.jpg">
<%@page language="java"%>
<%@page import="java.sql.*,java.util.*"%>
<%!
Connection con;
PreparedStatement ps;
ResultSet rs;
String college_id;
String college_name;
String regno;
String student_name;
String result;
String date;

%>

<%
try
{
Class.forName("oracle.jdbc.driver.OracleDriver");
con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","pro","pro
");

college_id=request.getParameter("college_id");
date=request.getParameter("date");

ps=con.prepareStatement("select * from add_result where college_id=? and date=?");
ps.setString(1,college_id);
ps.setString(6,date);
rs=ps.executeQuery();

while(rs.next())
{
college_name=rs.getString(2);
regno=rs.getString(3);
student_name=rs.getString(4);
result=rs.getString(5);
}
else
{
    out.println("no data found");
}
}
catch(Exception e)
{

    out.println("<center><b><font color=lightblue>some error occured...please try  again</font></b></center>");
    out.println("<br><br><a href='result.html'><center><b><font color=lightblue>click here to return..</font></b></center>");

}
%>

<center>
<font color=lightblue>
<b>
Information of student with college_id [<%=college_id%>]:
</b>
</font>
</center>
<p style="position:absolute;left:100;top:100">

<table border="2" width="100%">
<th style="color:yellow">
college_name
</th>
<th style="color:yellow">
regno
</th>
<th style="color:yellow">
student_name
</th>
<th style="color:yellow">
result
</th>
<tr>
<td style="color:lightgreen" align="center"><%=college_name%></td>
<td style="color:lightgreen" align="center"><%=regno%></td>
<td style="color:lightgreen" align="center"><%=student_name%></td>
<td style="color:lightgreen" align="center"><%=result%></td>
</tr>

</table>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:16:36.573

```
<%
 try
 {
  Class.forName("oracle.jdbc.driver.OracleDriver");
  con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","pro","pro   ");

  college_id=request.getParameter("college_id");
  date=request.getParameter("date");
  String sql = "select * from add_result where college_id=? and date=?"; 
  ps=con.prepareStatement(sql);
  ps.setString(1,college_id);
  //ps.setString(6,date);
  ps.setString(2,date);
  System.out.println("Sql: " + sql);
  rs=ps.executeQuery();
  // process resultset below
 }
 catch(Exception e)
 {

   out.println("<center><b><font color=lightblue>some error occured...please try again</font></b></center>"); 
   out.println("<br><br><a href='result.html'><center><b><font color=lightblue>click here to return..</font></b></center>");

  }
%>

<center>
<font color=lightblue>
<b>
Information of student with college_id [<%=college_id%>]:
</b>
</font>
</center>
<p style="position:absolute;left:100;top:100">

<table border="2" width="100%">
<th style="color:yellow">
college_name
</th>
<th style="color:yellow">
regno
</th>
<th style="color:yellow">
student_name
</th>
<th style="color:yellow">
result
</th>
<%
 if(rs!=null){
  while(rs.next())
  {
   college_name=rs.getString(2);
   regno=rs.getString(3);
   student_name=rs.getString(4);
   result=rs.getString(5);
%>
 <tr>
  <td style="color:lightgreen" align="center"><%=college_name%></td>
  <td style="color:lightgreen" align="center"><%=regno%></td>
  <td style="color:lightgreen" align="center"><%=student_name%></td>
  <td style="color:lightgreen" align="center"><%=result%></td>
 </tr>
<%
  } // result set loop ends here
 }else{
%>
  <tr>
   <td colspan="4" style="color:red" align="center">No Data Found</td>
   </tr>
<%
 }  //if condition ends here
%> 
```

# ruby-on-rails - 在项目管理器应用程序中测试创建新项目的最佳方法

> ID：10283095
> 
> 赞同：1
> 
> 时间：2012-04-23T15:04:52.707
> 
> 标签：ruby-on-rails, testing, rspec, integration-testing

在我的应用程序中，我正在测试创建一个新项目。目前我使用 rspec 进行集成测试。这是我的代码：

```
 3 describe "Projects" do
  4   describe "create project" do
  5     it "should create a new project" do
  6       lambda do
  7         visit root_path
  8         click_link 'new project'        
  9         fill_in :name, :with => 'Project name'
 10         fill_in :description, :with => 'This is a description'
 11         click_button 'Create'
 12       end.should change(Project, :count).by(1)
 13     end
 14   end
 15 end 
```

我还想在第 11 行之后添加如下内容：

```
response.should render_template 'new' 
```

...但我不断收到此错误

```
@request must be an ActionDispatch::Request 
```

我这样做对吗？最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:14:43.137

```
current_path.should == new_project_path
page.should have_selector('div#error_explanation') 
```

根据这个[https://stackoverflow.com/a/9105371/724036](https://stackoverflow.com/a/9105371/724036)

# python - 将 django 对象日志链接到项目

> ID：10283102
> 
> 赞同：0
> 
> 时间：2012-04-23T15:05:00.627
> 
> 标签：python, django

我试图将我的项目 django 日志对象添加到我的 django 项目中我遵循了这些步骤

1)pip install django-object-log

2) 将 object_log 文件夹复制到您的 Django 项目中。

3）将“object_log”添加到 INSTALLED_APPS

4)运行./manage.py syncdb

5) 将此 url 添加到我的项目 urls ....url(r'yasmina', include('object_log.urls')),

但我不知道下一步该怎么做，所以请帮忙吗？

这是 django 对象日志的 url.py 中的 url 之一 ...url(r'^user/(?P\d+)/actions/?$', 'list_user_actions', name="user-object_log-行动”），

当我运行服务器并将这个 url 添加到我的浏览器 [http://localhost:8000/yasmina/user/2/actions/](http://localhost:8000/yasmina/user/2/actions/)

我收到错误此网址不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:52:29.147

看起来您的 Url 模式匹配

[http://localhost:8000/user/2/actions/](http://localhost:8000/user/2/actions/)。

# iphone - 涟漪效果动画

> ID：10283105
> 
> 赞同：2
> 
> 时间：2012-04-23T15:05:12.410
> 
> 标签：iphone, ios, core-animation, uiviewanimation

我正在为水族馆开发 iPhone 应用程序。在那我使用波纹效果代码如下：

```
CATransition *animation = [CATransition animation];

[animation setDelegate:self];
[animation setDuration:0.6];
[animation setTimingFunction: [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

animation.type = @"rippleEffect";
animation.subtype = kCATransitionFromLeft;
animation.fillMode = kCAFillModeBackwards;
animation.startProgress = 0.4;
[animation setRemovedOnCompletion:NO];

[self.view.layer addAnimation:animation forKey:@"rippleEffect"];
[self performSelector:@selector(fn_btnOperation) withObject:nil afterDelay:0.40];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.70]; 
```

它工作得很好，但问题出在调用此动画之后：我的应用程序中的 tableview、textview、scrollview 无法正常工作。滚动越来越延迟，而且不流畅。任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:32:58.260

请注意，该过渡效果未记录在案。我向 Apple 的工程师询问了有关使用文档中没有的动画类型的问题。他们说，虽然他们的自动化工具不会检测到这类事情，但它仍然是一个未记录的 API，因此违反了他们的指导方针，如果你使用它们，你的应用就有被拒绝的风险。

由于您使用的是未记录的过渡效果，因此您只能自己弄清楚如何使其正常工作。

# javascript - jQuery - DOM元素未被识别为相等

> ID：10283106
> 
> 赞同：0
> 
> 时间：2012-04-23T15:05:13.820
> 
> 标签：javascript, jquery

> **可能重复：**
> [您将如何比较 jQuery 对象？](https://stackoverflow.com/questions/2436966/how-would-you-compare-jquery-objects)

我正在使用 jQuery 将主动点击的项目存储在项目列表中。我想检测新单击的项目是否与先前单击的项目相同，以切换支持的可见性`div`。我的代码如下所示：

```
var curPin;

$('.pin').click(function(){
  var $pin = $(this);
  if (curPin == $pin){
    console.log('true');
  } else {
    curPin = $pin;
    console.log('false');
  }
} 
```

为什么这不是平等的？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:17:21.990

用于`if ($(this).is(curPin))`检查元素是否相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:10:20.203

您不是在比较元素，而是 jQuery 对象，并且 jQuery 对象总是被认为是不同的，即使它们包含完全相同的元素。

比较 DOM 元素本身确实可以解决您的问题。正如 Esailija 所建议的，您可以使用[is()](http://api.jquery.com/is/)方法检查存储在其中的 jQuery 对象是否`curPin`包含当前元素：

```
var curPin;

$(".pin").click(function() {
    var $pin = $(this);
    if (curPin.is(this)) {
        console.log("true");
    } else {
        curPin = $pin;
        console.log("false");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:16:06.047

只需比较 DOM 元素：

```
if(curPin.get(0) == $pin.get(0)) {
    // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:11:59.280

如果你的元素有一个 id，你可以用它来比较像这样 -

```
var curPin;  

$('.pin').click(function(){   
  var $pin = $(this).attr('id');  
  if (curPin == $pin)
  {     
    console.log('true');   
  } 
  else 
  {     
    curPin = $pin;     
    console.log('false');   
  } 
} 
```

# .net - 您可以使用 Roslyn 从语义符号转换回语法树节点吗？

> ID：10283107
> 
> 赞同：5
> 
> 时间：2012-04-23T15:05:14.590
> 
> 标签：.net, roslyn

如果我有一个语义符号让我们说一个参数进入一个方法，我能不能回到这个符号的语法节点？

在下面的代码中，假设我在语法树中的“param”标识符上有一个句柄`param = "TEST"`，我切换到语义模型以确定 param 的 OriginalDefinition，这将我带到`string param`方法声明中。我现在想换回语法树并转到原始定义节点。

我能够用我认为是黑客的东西来做到这一点`var token = tree.Root.FindToken(origNode.Locations[0].SourceSpan.Start).Parent;`

有一个更好的方法吗？也许类似于`GetSemanticInfo()`语法树的东西？

```
private void DoSomething(string param)
{
  param = "TEST";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:26:31.660

当前的 CTP 没有比这更好的了，但这是我们听到的反馈，我们计划在未来解决这个问题。

# css - CSS：模板效果

> ID：10283108
> 
> 赞同：8
> 
> 时间：2012-04-23T15:05:17.913
> 
> 标签：css, mask

**我想知道在纯 css 中是否有可能具有模板效果：** 具有背景颜色的块，以及显示父块背景的颜色“透明”。

**例如，**我有一个带有渐变或图案作为背景的父块，我想覆盖一个带有黑色背景的块，文本内容将离开该块，请参阅父块的渐变。

我还没有找到让它工作的方法，但也许有人有想法或提示？

**编辑**

对不起，我应该不够精确。

这是所需结果的图片： ![在此处输入图像描述](../Images/ca33e1244ccf84aa02d7301768583630.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:37:05.097

可能你可以使用 CSS3 **background-clip**。像这样写：

**HTML**

```
<p>T</p> 
```

**CSS**

```
p{
    font-size:50px;
    font-family:impact;
    background: url(http://lorempixel.com/output/technics-h-c-1414-1431-2.jpg); 
    -webkit-text-fill-color: transparent;
   -webkit-background-clip: text;
position:relative;    
    width:80px;
    height:80px;
    text-align:center;
    padding-top:10px;
}
p:after{
    content:'';
    position:absolute;
    background:rgba(0,0,0,0.8);
    width:80px;
    height:80px;
    border-radius:100%;
    top:0;
    left:0;
    z-index:-1;
}
body{
    background: url(http://lorempixel.com/output/technics-h-c-1414-1431-2.jpg); 
} 
```

​</p>

检查这个[http://jsfiddle.net/rD6wq/6/](http://jsfiddle.net/rD6wq/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:58:23.240

```
#element_id {
    opacity:0.4;
    filter:alpha(opacity=40);
} 
```

这将设置 div 的不透明度或您应用它的任何内容的原始不透明度的 40%（通常为 100%，除非您将其应用于已降低不透明度的 .png 或 .gif 图像）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:08:34.133

使用嵌入字体的东西，例如[http://www.google.com/webfonts/specimen/Allerta+Stencil](http://www.google.com/webfonts/specimen/Allerta+Stencil)可能接近你想要的。通过更改背景和文本颜色，你应该得到你正在寻找的东西

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T16:02:57.137

据我所知，您可以为此使用 SVG，但这并非易事。

[this](http://my.opera.com/dstorey/blog/using-svg-masks-for-cut-out-text-effects)（和[this](http://dev.opera.com/static/dstorey/images/newyorkmaskexample.svg)）可能是您需要的最接近的实现。问题是它在每个浏览器中的工作方式都不一样，尽管您可以尝试更深入的研究。

**Upd** : Lea Verou 在她的文章中提出了一个简单而优雅的解决方案：[文本屏蔽——标准方式](http://lea.verou.me/2012/05/text-masking-the-standards-way/#more-1721)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T15:34:53.797

您可以使用 CSS3`text-shadow`属性。

```
p{ text-shadow:0px 0px 2px #000 } 
```

[在此处](http://jsfiddle.net/mrobin/ZCUrV/1/)查看我的示例。

[关于这里](http://www.quirksmode.org/css/textshadow.html)的财产的详细信息。

# javascript - 在同一页面上使用 jquery 选择当前锚点

> ID：10283116
> 
> 赞同：0
> 
> 时间：2012-04-23T15:05:36.360
> 
> 标签：javascript, jquery, html, css

有没有办法选择当前的锚点并让它在单页网站的每个部分都可见？例如，我的所有页面（家庭/联系人/商店等）都在一页上，采用水平滚动布局。当我选择锚点时，它会突出显示当前锚点，但在滚动到页面的下一部分时不会保持该锚点突出显示。相反，它突出显示，并且随着滚动开始，锚点的突出显示消失了。这是我正在使用的代码：

```
$('#nav a').click(function() {
alert($(this).attr('href'));
}); 
```

本来想用jquery ui来做的，只是做这个操作好像有点过头了。因此，在同一页面中突出显示项目的当前锚点，但在滚动到其他部分时仍然突出显示。想法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:09:28.687

我猜您是在谈论单击锚点时发生的默认焦点覆盖？

如何将一个类添加到当前活动的部分：

```
$("#nav a").click(function() {
    var self = $(this), className = "active";
    self.addClass(className).siblings("."+className).removeClass(className);
    ...
}); 
```

您可能还想检查[这个答案](https://stackoverflow.com/questions/9979827/change-active-menu-item-on-page-scroll/9980042#9980042)，因为它可能是相关的。如果这个答案对你没有帮助，我的建议是在[jsFiddle](http://jsfiddle.net/)上创建一个测试用例来帮助你进一步描述你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:09:45.277

像这样？

JS：

```
$('#nav a').click(function(){
    $('#nav a').removeClass('highlighted');
    $(this).addClass('highlighted');
}); 
```

CSS：

```
.highlighted {
    background: #ffffeo;
} 
```

# xcode - 视网膜通用 iPhone 应用程序的代码和后缀？

> ID：10283121
> 
> 赞同：0
> 
> 时间：2012-04-23T15:06:00.553
> 
> 标签：xcode, retina-display, ios-universal-app

我打算制作一个通用应用程序来支持视网膜显示。这将是一个有 100 多个问题的测验。因此，对于 bg 图像，后缀将是：iPhone，iPod：320X480 = photo.png，retina iPhone，iPod：640X960 = photo@2x.png iPad：1024X748 = photo~ipad.png，对于视网膜 iPad 2048 X 1496（苹果文档？）（1536？）=照片@2x~ipad.png。我需要编写任何额外的代码吗？每个问题包含 4 张图片会不会太多，这意味着 4 张图片 X 120 个问题 = 480 张图片！！！会不会太重？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:07:42.623

操作系统正在寻找的后缀是“ `@2x.png`”

因此，如果您想为 iPhone 和 iPad 制作单独的图形，请将它们的文件名中的这些差异放在零件*之前*`@2x`。

是的，四张图片确实有点矫枉过正。为什么不简单地为iPad 和 iPhone 版本中*使用的各种 UI 小部件提供常规分辨率图像和高分辨率图像？*

# iphone - NSString * to Char[] (GameCenter 发送结构)

> ID：10283123
> 
> 赞同：0
> 
> 时间：2012-04-23T15:06:10.087
> 
> 标签：iphone, objective-c, ios, c, game-center

我想向`struct`GameCenter 中的另一个玩家发送一个。我已经阅读了有关此的其他问题，但是，我无法让它们中的任何一个起作用。

我需要`@"1234"`进入`char[4]` (ex char[0] = '1', char[1] = '2', etc)

我试过`[NSString UTF8String]`了，但它似乎没有做我想要的。

它分配得很好，但是当我将它拉回`NSString *`with 时`[NSString stringWithUTF8String:]`，它返回空白。

如果有人可以向我展示往返的转换，将不胜感激。

谢谢。

**编辑：**

我无法让它工作：/这是我的代码（精简版）：

**媒人.h**

```
enum { NChars = 4 };

typedef struct {
    MessageType messageType;
} Message;

typedef struct {
    Message message;
    char code[NChars];
} MessageGameCode;

@interface Matchmaker : CCLayer <GameCenterMasterDelegate>{

    NSString *_code;
}
@property (nonatomic,retain) NSString *_code; 
```

**媒人.m**

```
@synthesize _code;
-(void)viewDidLoad{
    self._code = @"1234";
}

- (void)sendCode {
    NSLog(@"Sending Code....");
    MessageGameCode message;
    message.message.messageType = kMessageTypeGameCode;
    NSString * const source = self._code;

    const char* const sourceAsUTF8 = source.UTF8String;

    for (size_t idx = 0; idx < NChars; ++idx) {
        message.code[idx] = sourceAsUTF8[idx];
    }
    NSData *data = [NSData dataWithBytes:&message length:NChars];    
    [self sendData:data];
}

- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID {
    Message *message = (Message *) [data bytes];
    if (message->messageType == kMessageTypeGameCode) {        

        MessageGameCode *codeMessage = (MessageGameCode *)[data bytes];
        self._code = [[NSString alloc] initWithBytes:codeMessage->code length:NChars encoding:NSUTF8StringEncoding];
        [self setGameState:kGameStateWaitingForStart];
        NSLog(@"Game Code Recieved");
        NSLog(@"Recieved Code: %@",self._code); //This always shows self._code as blank

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T15:13:11.400

您的尝试将失败，因为您传递给的 cstring`+ [NSString stringWithUTF8String:]`未终止。

试试这个：

```
NSString * result = [[NSString alloc] initWithBytes:bytes
                                             length:4
                                           encoding:NSUTF8StringEncoding]; 
```

**编辑**

更完整的演示：

```
enum { NChars = 4 };
/* requires error checking */
void transmit() {
    NSString * const source = @"1234";

    char tmp[NChars] = { 0 };
    const char* const sourceAsUTF8 = source.UTF8String;

    for (size_t idx = 0; idx < NChars; ++idx) {
      tmp[idx] = sourceAsUTF8[idx];
    }
    /* .. */
}

/* requires error checking */
void receive(const char bytes[NChars]) {
    NSString * result = [[NSString alloc] initWithBytes:bytes length:NChars encoding:NSUTF8StringEncoding];
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:16:48.787

一种方法是

```
char bytes[4];

NSData* data = [@"1234" dataUsingEncoding: NSUTF8StringEncoding];
if ([data length] <= 4)
{
    memcpy(bytes, [data bytes], [data length]);
} 
```

反过来：

```
NSString* recodedString = [[NSString alloc] initWithBytes: bytes 
                                                   length: savedLengthFromBefore 
                                                 encoding: NSUTF8StringEncoding]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:16:56.660

这里有几个可能的陷阱。

一种是`[NSString UTF8String]` [“返回的 C 字符串会自动释放，就像释放返回的对象一样；如果需要将 C 字符串存储在创建 C 字符串的自动释放上下文之外，则应复制 C 字符串。”](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html) . 因此，根据您希望该值保留多长时间，您可能需要复制它（例如，使用`strcpy`）

另一个问题是`[NSString UTF8String]`两者`[NSString stringWithUTF8String:]`都期望以 NULL 结尾的 C 字符串，所以你需要一个 char[5]，而不是一个 char[4] 来保存@“1234”。

# https - 有没有在可安装的 Web 应用程序中使用 SSL 的好方法？

> ID：10283124
> 
> 赞同：1
> 
> 时间：2012-04-23T15:06:15.490
> 
> 标签：https, installation, ssl-certificate

我团队的产品是一个 Web 应用程序，我们的客户安装在他们自己的服务器上。一些客户能够为他们的服务器获取 SSL 证书以保护他们的登录，但其他一些客户没有 IT 专业知识来做到这一点。有没有办法自动化证书获取过程，以便我们的安装程序可以在每台服务器上设置 SSL，而无需手动管理？

我们的产品在 IIS 和 ASP.NET 上运行，但我最感兴趣的是如何自动从提供者那里获取证书，而不是如何在服务器上安装它。

# html - schema.org 重复内容处理

> ID：10283126
> 
> 赞同：0
> 
> 时间：2012-04-23T15:06:19.783
> 
> 标签：html, schema.org, duplicate-content

我即将添加来自 schema.org 的代码，用于评论和本地企业。我的问题是：如果我有一个浏览部分，我是否也应该向其中添加架构代码，这意味着我将在每个企业的网站上有两个实例？还是我应该只对规范内容做一个模式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:30:45.007

您还应该将模式代码添加到非规范部分，指定规范引用`itemprop="url"`及其链接。

# sql - UPDATE 查询中的 SELECT 子查询

> ID：10283132
> 
> 赞同：1
> 
> 时间：2012-04-23T15:06:46.653
> 
> 标签：codeigniter, sql, codeigniter

我以前从未使用过子查询，并且无法`SELECT`在`UPDATE`.

我在这里使用[codeigniter](/questions/tagged/codeigniter "显示标记为“codeigniter”的问题")并且想坚持使用*Active Record 类*以保持一致性，但我可以使用原始 SQL。

这是我使用 AR 类的最后一次尝试：

```
$this->db->select('locations.id, locations.name');
$this->db->join('locations','location_relationships.id = locations.id');
$sub = $this->db->_compile_select();

$this->db->_reset_select();

$this->db->where('id', $location_id);
$this->db->where('group_id', $team_id);
$query = $this->db->update('location_relationships', $data); 
```

基本上，我正在更新此`location_relationships`表中的一个值，当发生这种情况时，我想选择同一个表中的一些关联单元格和另一个（`locations`）。所以`JOIN`在`SELECT`子查询中也有一个。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:08:07.623

放第`UPDATE`一个，然后做`SELECT`。

然后你可以摆脱以下：`$sub = $this->db->_compile_select(); $this->db->_reset_select();`

# python - 根据商品描述自动生成电子商务标签

> ID：10283137
> 
> 赞同：0
> 
> 时间：2012-04-23T15:07:08.913
> 
> 标签：python, django, e-commerce, tagging, opencalais

我们正在开发一个电子商务门户，使用户能够在网站上列出他们的项目（名称、描述、标签）。但是，我们意识到用户对物品标签的理解不是很好，他们中的一些人写了任意词，有些人把它留空，所以我们决定处理它，我考虑使用实体提取器来生成标签，首先，我尝试将此列表传递给[加来](http://viewer.opencalais.com/)：

> 我是一名菲律宾男性，正在寻找办公室助理工作，具有 MS Word、Excel、Power Point 和 Internet 浏览方面的知识，我是一个快速学习者，具有清晰和礼貌的沟通技巧，在工作分配和工作时间方面具有极大的灵活性，并以全心全意、正直和诚实履行我的职责。

我得到了这些标签：`Religion Belief`, `Positive psychology`, `Integrity`, `Evaluation`, `Behavior`, `Psychology`, `Skill`.

然后我尝试了[斯坦福 NER](http://nlp.stanford.edu:8080/ner/process)并得到：`Excel`, `Power`, `Point`, `&`, `Internet`,`Browsing`

在那之后，我停止尝试这些解决方案，因为我认为它们不适合，并开始考虑拥有一个可能包含产品/品牌名称和贸易相关术语的电子商务相关词库，以便我可以使用它来过滤用户生成的帖子并找到合适的标签，但我找不到。

所以第一个问题：我错过了什么吗？

第二个问题：是否有更好的方案（即生成标签）？

# css - 在不知道高度的情况下将 div 居中

> ID：10283138
> 
> 赞同：0
> 
> 时间：2012-04-23T15:07:11.427
> 
> 标签：css, html

我有一个我知道高度的 div。里面有一个我不知道高度的 div，因为它有可以改变的文本。我在 Stackoverflow 中找到了一些解决方案，但它对我不起作用或者我没有正确使用它。在这种特定情况下，任何人都可以将 div 居中吗？ [http://jsfiddle.net/JTTEM/2/](http://jsfiddle.net/JTTEM/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:39:34.253

没有javascript，浮动大，或者像这样的技巧`display:table`：

[http://jsfiddle.net/JTTEM/10/](http://jsfiddle.net/JTTEM/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:09:25.290

您是否尝试过[CSS 中垂直居中的任何步骤](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:22:47.860

如果你想使用 JQuery，你可以这样做......

```
(function(){
($('#big1 .small').css('margin-top',($('#big1').height() - $('#big1 .small').height())/2));

($('#big2 .small').css('margin-top',($('#big2').height() - $('#big2 .small').height())/2));
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:31:39.440

我稍微修改了你的代码：http: [//jsfiddle.net/JTTEM/8/](http://jsfiddle.net/JTTEM/8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-18T12:00:04.410

您可以通过两种方式做到这一点。

1.  使用 flex：现在所有最新的浏览器都支持 flex 属性。在父元素上使用 flex、justify-content 和 align-items 属性将使 div 居中对齐，而不管它的高度。

```
body {
    font-family:Tahoma, Geneva, sans-serif;
    font-style: normal;
    font-variant: normal;
    color: #999999;
    font-size: 11px;
    font-weight: normal;
    margin: 0;
    padding: 0;
    letter-spacing:1px;
}

p {
    padding: 10px;
    text-align: center;
}

#big1 {
    position:absolute;
    left:100px;
    top:100px;
    width:360px;
    height:230px;
    background-color:#ccc;
    background-size:360px;
    display:flex;
    align-items: center;
    justify-content: center;
}

#big2 {
    position:absolute;
    left:100px;
    top:400px;
    width:360px;
    height:230px;
    background-color:#ccc;
    background-size:360px;
    display:flex;
    align-items: center;
    justify-content: center;
}

.small {
    position:absolute;
    /*left:50%;
    top:50%;
    -webkit-transform: translate(-50%,-50%);
    -moz-transform: translate(-50%,-50%);
    -ms-transform: translate(-50%,-50%);
    -o-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);*/
    width:220px;
    background-color:#FFF;
}
```

```
<div id="big1">
    <div class="small"><p>some more text, some more text, some more text, some more text, some more text, some more text, some more text, some more text, some more textsome more text, some more text, some more text, some more text, some more text, some more text, some more text, some more text, some more text</p></div>
</div>

<div id="big2">
    <div class="small"><p>Some Text</p></div>
</div>
```

2.  对其子元素应用绝对位置和变换属性将与其父元素的中心对齐。该解决方案适用于所有现代浏览器。

```
body {
    font-family:Tahoma, Geneva, sans-serif;
    font-style: normal;
    font-variant: normal;
    color: #999999;
    font-size: 11px;
    font-weight: normal;
    margin: 0;
    padding: 0;
    letter-spacing:1px;
}

p {
    padding: 10px;
    text-align: center;
}

#big1 {
    position:absolute;
    left:100px;
    top:100px;
    width:360px;
    height:230px;
    background-color:#ccc;
    background-size:360px;
}

#big2 {
    position:absolute;
    left:100px;
    top:400px;
    width:360px;
    height:230px;
    background-color:#ccc;
    background-size:360px;
}

.small {
    position:absolute;
    left:50%;
    top:50%;
    -webkit-transform: translate(-50%,-50%);
    -moz-transform: translate(-50%,-50%);
    -ms-transform: translate(-50%,-50%);
    -o-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);
    width:220px;
    background-color:#FFF;
}
```

```
<div id="big1">
    <div class="small"><p>some more text, some more text, some more text, some more text, some more text, some more text, some more text, some more text, some more textsome more text, some more text, some more text, some more text, some more text, some more text, some more text, some more text, some more text</p></div>
</div>

<div id="big2">
    <div class="small"><p>Some Text</p></div>
</div>
```

# c# - 使用 iText 验证 PDF 中的 OCR

> ID：10283139
> 
> 赞同：1
> 
> 时间：2012-04-23T15:07:16.090
> 
> 标签：c#, pdf, itext, ocr, hebrew

在HebrewBooks.com 上有一个大型的希伯来语书籍图书馆，使用OCR 扫描成文本。我想编写一个实用程序，让我可以浏览 PDF 文件中的每个字符，并在查看 OCR 提取的字符的同时查看字符图像，以便在错误时进行更正。

我目前正在使用 iText。如何显示角色的图像并在下方写入文本以进行编辑？

澄清一下，我不是想将 iText 用于 OCR。*我*将成为一个以我精心调整的阅读技巧进行 OCR 的人。我想要的是让我更容易根据 OCR 选择的字符检查字母的图像。我想同时显示嵌入在 PDF 中的字符和提取字符的页面图像。

# tomcat - 在 Apache Tomcat 6.0 中重新启动应用程序

> ID：10283145
> 
> 赞同：0
> 
> 时间：2012-04-23T15:07:31.560
> 
> 标签：tomcat, tomcat6

如何重新启动托管在 Tomcat 6.0 中的一个应用程序？

我正在寻找一个命令行命令。替换 *.war 文件或通过 Tomcat 的 http 管理页面执行此操作不是解决问题的方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:13:01.400

Tomcat 没有优雅重启服务器的功能。

您可以使用管理器应用程序并使用例如 cURL 从命令行进行 url 调用以重新启动某个应用程序。

要重新加载应用程序，您可以使用以下命令行调用（使用 curl）：

```
curl --user username:password http://yourserver:8080/manager/html/reload?path=/yourappname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T23:24:49.640

没有功能，只有功能。从代码中触摸 web.xml 而无需真正修改它，但根据 API，不建议这样做。

# javascript - 无法通过使用 Javascript 的 Viadeo API 获取用户电子邮件

> ID：10283153
> 
> 赞同：0
> 
> 时间：2012-04-23T15:07:50.377
> 
> 标签：javascript, api

嗨，我正在开发一个应用程序，一旦用户接受分享他的 Viadeo 信息，就必须收到电子邮件。所以我使用 Viadeo API 和 Javascript 编码

我的代码如下

```
VD.api('/me', {user_detail : 'partial'}, function(r) {
                        nom.value = r.last_name;
                        prenom.value = r.first_name;
                        presentation.value = r.introduction;
                        photo.value = r.picture_large;
                    }); 
```

事实上 r 是一个变量，它应该给我所有的用户信息（它是一个 JSON 对象。我找不到电子邮件（即使我尝试使用其他选项，如“user_detail = full”）

所以我的问题是，是否可以通过 Viadeo API 检索用户的电子邮件？

非常感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:47:20.810

事实上，我检查过，我们无法收到用户电子邮件（为了防止垃圾邮件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:15:52.343

请参阅此页面，您应该了解有关要使用的 api 的所有详细信息

[Viadeo 开发页面](http://dev.viadeo.com/graph-api-resource/?resource=/user/)

根据此页面，您似乎从 API 获得了会员 ID。只需看到您正在按照此页面使用 API。

# android-ndk - 从新线程创建 NewGlobalRef

> ID：10283165
> 
> 赞同：0
> 
> 时间：2012-04-23T15:08:40.300
> 
> 标签：android-ndk

我有带有 pthread 的本机代码，当我调用 pthread_create 时，我将从 JAVA 代码中获得的 JNIEnv * 作为参数传递给线程函数。JNIEnv * 是有效的，并且在调用 (jclass)i_env->NewGlobalRef(i_env->FindClass("my/package/com/Myclass")); 旁边的所有调用都成功了 返回null。

这是为什么？

10xs，那鸿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:28:08.243

JNIEnv 是特定于线程的。您不能在另一个线程中使用一个 JNIEnv。

要获取当前线程的 JNIEnv，您必须调用 JavaVM 对象的 AttachCurrentThread。在这里阅读：http: [//developer.android.com/guide/practices/design/jni.html#JavaVM_and_JNIEnv](http://developer.android.com/guide/practices/design/jni.html#JavaVM_and_JNIEnv)

并使用 JNI_OnLoad 函数获取 JavaVM 对象：http: [//developer.android.com/guide/practices/design/jni.html#native_libraries](http://developer.android.com/guide/practices/design/jni.html#native_libraries)

# asp.net - DataPager，更改计数项

> ID：10283169
> 
> 赞同：0
> 
> 时间：2012-04-23T15:08:53.870
> 
> 标签：asp.net, datapager

我正在使用 DataPager 控件，我想更改每页上的计数项目。

例如：第一页6行，第二页311，第三页12等。

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:21:44.643

我的建议是手动进行，进行自己的 sql 查询并根据需要自定义页面大小

这里有一些可以提供帮助的提示

*   获取分页用户所需的行数

[MS-sql 行号](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

*   使用 TOP 获取上面的一组行

    选择 TOP 5 * from ....

*   当然，您需要获取将在当前页面中显示的特定行号

    select (--get row number--) from tbl_smth where row_num>5 and row_num<10

就像我猜你有一个数组中的页面大小，所以你必须计算它们以确定两个数字 {5,10}

希望这会有所帮助

# php - Mysql 出乎意料的 T_LNUMBER

> ID：10283170
> 
> 赞同：2
> 
> 时间：2012-04-23T15:08:55.300
> 
> 标签：php, mysql

我正在尝试在 php 脚本中使用 insert into 创建数据库的新行，但经过数小时的研究，我收到“语法错误，意外 T_LNUMBER”错误。我知道 php 在到达“37bf7a30-b6cf-4642-89c9-031c1f6c34d0”字符串时会搞砸它。我尝试在那里加上引号和双引号，但没有任何效果。你知道周围有什么工作可以帮助我吗？提前非常感谢，并为我糟糕的英语和凌乱的代码感到抱歉。

```
mysql_query("INSERT INTO `bbdb_item` (`id`, `application_id`, `type`, `name`, `alias`, `created`, `modified`, `modified_by`, `publish_up`, `publish_down`, `priority`, `hits`, `state`, `access`, `created_by`, `created_by_alias`, `searchable`, `elements`, `params`) 
                                            VALUES ('$id', 
                                            '1', 
                                            'item', 
                                            '$name', 
                                            '$alias', 
                                            '$date', 
                                            '$date', 
                                            '42', 
                                            '$date', 
                                            '0000-00-00 00:00:00', 
                                            '0', 
                                            '0', 
                                            '1', 
                                            '1', 
                                            '42', 
                                            '', 
                                            '1', 
                                            ' {\n   
                                            "37bf7a30-b6cf-4642-89c9-031c1f6c34d0":  {\n        "0":  {\n           "value": "http:\\/\\/www.xxxx.com\\/item\\/$id\\/overview.aspx",\n          "text": "",\n           "target": "0",\n            "custom_title": "",\n           "rel": ""\n     }\n },\n    
                                            "d3d4559f-24eb-46b2-a749-068ebd3eceb3":  {\n        "0":  {\n           "value": "$id"\n        }\n },\n    
                                            "0e366b7c-514a-4a37-b651-e6fe8edf78ff":  {\n        "0":  {\n           "value": "$country"\n       }\n },\n    
                                            ' {\n   
                                            "metadata.title": "",\n 
                                            "metadata.description": "",\n   
                                            "metadata.keywords": "",\n  
                                            "metadata.robots": "",\n    
                                            "metadata.author": "",\n    
                                            "config.enable_comments": "1",\n    
                                            "config.primary_category": "1"\n}')"
                                            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:15:52.950

该站点的语法着色应该已经足以向您展示正在发生的事情。一旦到达以以下开头的行：

```
"37bf7a30-b6cf-4642-89c9-031c1f6c34d0": 
```

它停止以与查询的其余部分相同的颜色着色。您的 PHP 字符串用作`"`分隔符，因此它认为其余部分不属于查询的一部分，并且奇怪的事情开始发生，因为它不再知道您要做什么。

您应该转义引号，如下所示：

```
 \"37bf7a30-b6cf-4642-89c9-031c1f6c34d0\":  { 
```

然后对于`"`整个字符串中的每一次出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:14:54.417

您必须像这样转义所有双引号 ( `"`)：`\"`.

# javascript - HAML - 如何使用选择器调用表单？

> ID：10283172
> 
> 赞同：0
> 
> 时间：2012-04-23T15:09:07.600
> 
> 标签：javascript, ruby-on-rails, haml

我在 HAML 中有这个表格：

```
= form_for([:mobile,@disclosure], :html => {:id => "add_validation_to_ajax_form", :remote => true}) do |f| 
```

但是 add_validation_to_ajax_form 函数有一个像这样的参数：

```
function add_validation_to_ajax_form(form_selector){
    alert ("hello :)");
    add_custom_validation_methods();
    $(form_selector).submit(function(event) {
      force_ckeditor_to_update();
    }).validate({meta:"validate",onkeyup:false,validClass:"ok-input",
          errorPlacement: function(error, element) {

          }
      });
} 
```

而且我对应该如何调用 JavaScript 函数的 HAML 语法不熟悉。现在提交表单时，此功能不显示 hello 弹出窗口。知道为什么它不起作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:26:53.223

那是因为您没有在任何地方调用该函数。如果你想让它执行，你必须调用它。

尝试将此添加到您的`application.js`文件中。

```
$(function() {
  add_validation_to_ajax_form('form#add_validation_to_ajax_form');
}); 
```

这将调用你的函数。但是，我认为您想要的功能看起来更像这样：

```
$(function() {
  $('form#add_validation_to_ajax_form').submit( function() {
    alert ("hello :)");
    add_custom_validation_methods();
    force_ckeditor_to_update();
    $(this).validate({
      meta:"validate",
      onkeyup:false,
      validClass:"ok-input",
      errorPlacement: function(error, element) {}
    });
  });
}); 
```

jQuery 中的`$(function(){ ... });`调用意味着：在页面完成加载时执行此操作。

该`$(selector).submit( function(){...});`函数的意思是，在页面上找到选择器，并为其附加一个提交事件处理程序，以便在提交表单时发生此函数中的内容。

如果你必须在 HAML 中嵌入这样的东西，你可以通过在 后面缩进`:javascript`，像这样：

```
:javascript
  $(function(){ alert('The page is loaded!') }); 
```

HAML 实际上与您的函数是否被调用无关。HAML 创建 HTML。HAML 需要做的就是在某处包含 javascript 文件 ( `javascript_include_tag`)。在 Rails > 3.1.x 中，最佳做法是让您的布局包含您的 application.js 文件，并通过该文件加载其余的 javascript。

# iphone - 如果我需要预先为所有测试人员创建 AdHoc 分发证书和配置，TestFlightApp 有什么好处？

> ID：10283173
> 
> 赞同：0
> 
> 时间：2012-04-23T15:09:12.123
> 
> 标签：iphone, ios, ipad, adhoc, testflight

经过几个小时的阅读，我认为要为 TestFlight 构建，我必须像往常一样经历同样的旧 AdHoc 分发噩梦。设置各种证书/配置文件/权利等，向用户询问他们的 UUID，注册他们的设备等等等等。

那么TestFlight有什么好处呢？它简化了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:17:18.527

TestFlight 主要用于（但仅）通过一个简单易用的过程分发您的应用程序，您可以通过该过程邀请人们以便他们可以注册他们的设备（因此，避免使用 UDID 发送电子邮件等），并接收带有新更新版本的电子邮件并一键安装。它还为您提供了一种管理构建和团队成员的简单方法。

我不知道没有它我会做什么...

# php - PHP调试：如何查看图片资源信息

> ID：10283175
> 
> 赞同：1
> 
> 时间：2012-04-23T15:09:13.557
> 
> 标签：php, debugging, image-processing

我正在调试一个处理图像资源的 PHP 应用程序。我想查看输出（`$dst_image`根据[PHP 手册的行话](http://us.php.net/manual/en/function.imagecopyresampled.php)），但代码不在我可以简单地将其输出到浏览器的地方。最好的调试过程是写入`$dst_image`文件，然后在浏览器中加载该文件吗？还有其他想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:23:01.137

请参见[示例 #1 和 #2](http://us.php.net/manual/en/function.imagecopyresampled.php)，[`imagejpeg`](http://php.net/manual/en/function.imagejpeg.php)将输出 jpeg 数据。

你需要做一些事情：

1.  为图像设置标题`header('Content-Type: image/jpeg');`
2.  输出你的图像数据
3.  确保您没有输出除图像以外的任何数据

最后你应该得到这样的结果：

```
<?php

// Get new dimensions
// Resample
// etc...

// set header so browser can render image properly
header('Content-Type: image/jpeg');

// Output
imagejpeg($image, null, xxx);
// [or] 
echo file_get_contents($pathToJpgImage); 
```

* * *

如果您发现自己处于当前请求输出数据而无法输出图像的情况...您可以使用`<img src="data:image/jpeg;base64,..." />`. [有关图像的 base64_encode，](http://www.php.net/manual/en/function.base64-encode.php#99842)请参阅php 文档。

# progress-4gl - Progress 4gl - 共享程序

> ID：10283176
> 
> 赞同：0
> 
> 时间：2012-04-23T15:09:14.380
> 
> 标签：progress-4gl

我正在开发 4gl，我是一名新手程序员。我正在处理一种情况，其中有***五个***彼此不相关的过程（.p 文件），共享一个***过程（.p 文件）*。**

我的问题是我需要修改共享过程，这应该只对一个调用过程产生影响，而不对其他四个产生影响。我可以同时链接这两个程序的方法是什么，以防止对其他四个程序产生影响。

请帮我解决这个问题。如果不清楚，对不起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:27:12.683

简单但在架构上令人反感的解决方案是使用全局共享变量。

许多人会告诉你，这是一种糟糕的编码技术。他们是对的。但是您并不是在寻求有关最佳实践的建议。

只需在调用者和被调用者中创建这样一个变量。不需要它的程序不会错过它。

您的“正常”程序之一：

```
/* p1.p */

message "p1, I'm normal.".
run common.p. 
```

您的“特殊”计划：

```
/* p2.p */

define new global shared variable special as character no-undo.

message "p2, I'm special!".
run common.p.
message "special = " special. 
```

通用程序：

```
/* common.p */

define new global shared variable special as character no-undo.
message "common stuff...".
if program-name(2) = "p2.p" then special = "special value".
return. 
```

您可以根据需要多次定义 NEW GLOBAL SHARED 变量，并且您只会获得一份副本。“新”不会覆盖任何现有变量（如果您忽略 GLOBAL，它的行为会有所不同）。

您没有要求它，也许您不需要它，但程序名称（2）检查会查看调用堆栈以查看 common.p 是否被 p2.p 调用。

还有其他更复杂的方法可以做到这一点，但它们都归结为同一个问题——你正在为你的“特殊”程序和现在不再通用的“通用”程序之间的一些非常丑陋的耦合创建基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:16:43.717

*最好*的方法是在共享过程中添加一个“标志”，然后在您需要不同的行为时传递一个标志。您不想更改共享过程，因此它需要知道哪个程序正在调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T05:52:06.533

*   将过程的所有逻辑移至具有输入参数的新逻辑。
*   从原始 .p 调用该过程
*   从需要额外参数的过程中调用新过程。

可选的

*   逐渐将 original.p 的所有运行替换为 new.p
*   一旦您确定所有运行都已更改，请删除 original.p。

根据您的 OpenEdge 版本，您可以将逻辑移动到类而不是过程。在课堂上你可以使用重载

# javascript - 使用 jQuery 定位正确的元素

> ID：10283178
> 
> 赞同：0
> 
> 时间：2012-04-23T15:09:24.323
> 
> 标签：javascript, jquery

工具提示库正在复制 dom 节点以将 html 插入工具提示中。

**我需要定位工具提示内的元素，但 javascript 始终应用于原始元素。**

```
 <a class="tooltip">Open</a>

<div class="tooltip-html" style="display:none;">
<div id="main-content" class="scroll">
    <div class="Content">
        <div class="blue">
        </div>
    </div>
</div> 
```

我试过使用工具提示的回车回调，这不起作用。并且在工具提示复制 html 之前应用东西只能在外观上起作用，javascript 仍在查看原始文件。我什至尝试在我不再应用 javascript 之前更改课程。弄清楚如果我更改了类，原始元素将不再可访问。该类已更改，但 javascript 并未应用于工具提示中的内容。

是否有一种在复制 div 后删除它的好方法，或者有一种更好的方法来查找/定位正确的元素。

```
$(this).find("div.scroll").test(); 
```

编辑：

```
...Before...
    <div id="main-content" class="scroll">
    <div class="Content"> 

...After...

<div id="tiptip_holder" style="max-width: 230px; margin: 23px 0pt 0pt 999px; display: none;" class="tip_left_bottom">
<div id="tiptip_arrow" style="margin-left: 220px; margin-top: -12px;">
<div id="tiptip_content">
    <div id="main-content" class="scroll">
    <div class="Content"> 
    .... 
```

这是工具提示库的输入回调的一部分**：**

```
 var tip_html = $('.tooltip-html').html();
    $('.tooltip').tipTip({ content: tip_html, enter: function(){
        $(this).find("div.scroll").test();

    } 
```

也尝试使用，

```
$("#main-content.scroll", "#tiptip_content").test(); 
```

**更新：**

正如人们提到的那样命名父 div 就像我应该工作的那样，这是一个我无法在工具提示中定位的示例。

[jsfiddle.net/mstefanko/pUm5V/24](http://jsfiddle.net/mstefanko/pUm5V/24)

```
//$("#main-content", "#tooltip-content").css("background", "red");
$("#main-content", "#tiptip_content").css("background", "blue"); 
```

蓝色不行，红色可以。我觉得两条线都应该起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:31:19.283

找到了我的问题的主要原因。插件中的以下行：

```
function active_tiptip(){
    opts.enter.call(this);        
    tiptip_content.html(org_title); 
```

在任何工具提示内容在 DOM 中之前调用了 enter 调用，就像工具提示的包装器存在一样，当它不在工具提示中时调用 main-content 显然将无法工作。不确定我是否完全解决了我的问题，但颠倒这些行可以解决手头的问题。

# django - Django - 模板表单日期过滤字段

> ID：10283181
> 
> 赞同：1
> 
> 时间：2012-04-23T15:09:28.000
> 
> 标签：django, django-forms, django-templates, django-template-filters

## 看法

```
def editor(request):
    form = SessionForm(initial={
        'end_time': datetime.datetime.now(),
    })

    if request.method == 'POST':
        form = SessionForm(request.POST)
        if form.is_valid():
            form.save()

    return render_to_response('planner/editor.html',
        {'form': form}, context_instance=RequestContext(request),) 
```

此视图显示表单并在出错时重新显示，因此有两种情况：

1.  初始化
2.  错误

在模板中，我正在尝试`end_time`使用日期过滤器显示该字段

## 测试 1

```
 <div>End value: {{ form.end_time.value }}</div>
  <div>End value filtered: {{ form.end_time.value|date:"Y-m-d" }}</div> 
```

案例1（初始化）

> 最终值：2012-04-23 12:30:00
> 过滤的最终值：2012-04-23

案例2（错误）

> 最终值：2012-04-23 12:30:00
> 过滤的最终值：

## 测试 2

现在让我们尝试删除`.value`of`end_time`

```
 <div>End value: {{ form.end_time.value }}</div>
  <div>End value filtered: {{ form.end_time|date:"Y-m-d" }}</div> 
```

案例1（初始化）

> 最终值：2012-04-23 12:30:00
> 过滤的最终值：

案例2（错误）

> 最终值：2012-04-23 12:30:00
> 过滤的最终值：2012-04-23

正如你所看到的，它正在做相反的事情。
这怎么解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:21:11.117

使用

```
{{ form.instance.end_time|date:"Y-m-d" }} 
```

代替

```
{{ form.end_time|date:"Y-m-d" }} 
```

似乎在这两种情况下都有效

# sql - SSRS 2008 R2 尝试在 x 轴上对日期进行分组/获取日期范围

> ID：10283184
> 
> 赞同：1
> 
> 时间：2012-04-23T15:09:41.440
> 
> 标签：sql, ssrs-2008, sql-server-2008-r2, linechart

所以我试图从我的数据库中创建一个报告，显示人们随着时间的推移加入。y 轴是人数，x 轴是日期。我试图让 x 轴上的每个主要刻度都是一年中的不同季度。我的问题是，当我尝试按 DATEPART(year,date) 然后 DATEPART(month,date) 分组时，它什么也不做。x 轴上的每一个刻度都是另一个单独的一天，所以我最终得到了数百个单独的天，而我的线从来没有真正超过一个人，因为他们都在不同的日子加入......（还有一个时间添加到字段所以它的 yyyy-mm-dd 00:00:00。所以时间总是 0，不知道这是否有区别）我' 我尝试将间隔设置为 3 并将间隔类型设置为月的最小和最大日期，但这只会让它显示第 3 个月，我希望能够在同一个主要刻度上显示这三个月中的所有人。我不确定它是否也可以通过我在第一次创建图表时写入分配给类别的 sql 语句进行更改......我希望我已经把我的问题说清楚了，如果有人有任何建议或我很想听听他们的想法！提前致谢！哦，是的，还有一个旁注，如果有人知道如何显示 2 行（男性与女性），那就太好了！我有，但他们我被困在一个愚蠢的“系列”线路上，我无法摆脱。无论如何，第一个问题更重要:) 我不确定它是否也可以通过我在第一次创建图表时编写的分配给类别的 sql 语句进行更改......我希望我已经把我的问题说清楚了，如果有人有任何建议或想法我很想听听他们的声音！提前致谢！哦，是的，还有一个旁注，如果有人知道如何显示 2 行（男性与女性），那就太好了！我有，但他们我被困在一个愚蠢的“系列”线路上，我无法摆脱。无论如何，第一个问题更重要:) 我不确定它是否也可以通过我在第一次创建图表时编写的分配给类别的 sql 语句进行更改......我希望我已经把我的问题说清楚了，如果有人有任何建议或想法我很想听听他们的声音！提前致谢！哦，是的，还有一个旁注，如果有人知道如何显示 2 行（男性与女性），那就太好了！我有，但他们我被困在一个愚蠢的“系列”线路上，我无法摆脱。无论如何，第一个问题更重要:) 我有，但他们我被困在一个愚蠢的“系列”线路上，我无法摆脱。无论如何，第一个问题更重要:) 我有，但他们我被困在一个愚蠢的“系列”线路上，我无法摆脱。无论如何，第一个问题更重要:)

# php - 不能使用命令行解释器

> ID：10283187
> 
> 赞同：17
> 
> 时间：2012-04-23T15:09:51.073
> 
> 标签：php, windows, command-line-interface

我试图在 php 解释器中执行简单的 php 代码。当我执行命令时，`php -a`我收到消息

> 启用交互模式

没有任何地方供php输入。但我可以通过命令执行 php 代码`php -r`。例如：

`php -r "echo 'Hello stackoverflow!';"`

> 你好堆栈溢出！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-03-11T03:24:48.393

安装这个：

```
php5-readline 
```

然后尝试使用：

```
php -a 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T15:15:49.870

键入`php -m`并确保您有 readline 模块。如果你不这样做，你将无法使用它。

[http://www.php.net/manual/en/features.commandline.interactive.php](http://www.php.net/manual/en/features.commandline.interactive.php)

> 从 PHP 5.1.0 开始，如果 PHP 使用**--with-readline选项编译，CLI SAPI 使用****-a**选项提供交互式 shell 。

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T15:17:17.330

您的 PHP 和 libreadline 之间似乎存在编译/链接错误。这记录在[PHP Bug #48759](https://bugs.php.net/bug.php?id=48759)中。

*   你自己编译PHP吗？`make clean`您是否使用过 --configure 并且在最终构建之前没有做适当的事情？
*   是否`php -m`将 readline 列为启用的功能？（PHP 是用 option 构建的`--with-readline`）
*   你的php版本是多少？
*   你使用什么发行版？
*   您是否安装了 libreadline（*-dev 软件包）？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-12T08:45:09.723

在我厌倦了在每台机器上编译它之后，我使用了 PHPSH（正如 joey-adams 所提到的）

它比 php -a 好得多（语法突出显示和自动完成）

安装 python phpsh

看看[install-php5-with-readline-support-on-debian-wheezy](https://unix.stackexchange.com/questions/94755/install-php5-with-readline-support-on-debian-wheezy)

```
$ sudo apt-get install python # this is necessary to run phpsh
$ cd ~/

$ wget https://github.com/facebook/phpsh/zipball/master
$ unzip phpsh-master.zip

$ cd phpsh-master
$ sudo cp -r src /etc/phpsh # phpsh seems to complain unless it resides at /etc/phpsh
$ sudo ln -s /etc/phpsh/phpsh /usr/bin/phpsh # put phpsh on the $PATH 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T15:14:54.417

您处于交互模式，但没有提示，因为您可能没有可用的 readline 模式。您只需要开始输入，您的命令将在您按下回车后进行评估。看起来并没有发生任何事情，但是如果您输入，例如：

```
<?php

echo "hello world";

?> 
```

...你会得到输出...

如果您输入支撑块，它们会在您在关闭后按 Enter 后进行评估`}`

```
<?php 
for ($i = 0; $i < 5; $i++) {
  echo $i;
}
// prints 12345 after closing } 
```

请注意，您必须开始，`<?php`否则输入的任何内容都不会被评估。

### 更新（多年后）：

在运行供应商的安全补丁 PHP 5.3.3 的 Red Hat (RHEL5) 系统上，我遇到了一种交互模式，它在右大括号后没有回显。

相反，直到我按下输出缓冲区才被刷新`Ctrl``d`。实际上，这使得交互式会话一次性使用。插入所有代码输入，并`Ctrl``d`一次返回所有输出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-03T08:29:50.720

要检查您是否安装了 readline 模块，请键入：`php -m | grep readline`

如果没有显示，安装 readline 模块：`sudo apt-get install php5-readline`

安装模块后，您可以使用先前的命令重新检查它的存在，而不是使用以下命令进入交互模式：`php -a`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-13T14:32:01.643

因为模块**readline**没有安装。 [http://php.net/manual/en/features.commandline.interactive.php](http://php.net/manual/en/features.commandline.interactive.php)

这是我通过重新编译 php 源代码来安装模块的方式：

查找之前的配置命令：

```
$ php -i | grep configure
Configure Command =>  './configure'  '--prefix=/usr/local/php7' ... 
```

然后重新编译：

```
./configure --prefix=/usr/local/php7 \
--with-readline \

...

$ make clean 
$ make
$ make test 
$ sudo make install 
```

检查是否安装了**readline**模块：

```
$ php m | grep readline
readline 
```

然后启动 php 交互 shell：

```
$ php -a
Interactive shell

php > 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-18T11:08:18.583

如果您使用的是 Mac，请安装 Homebrew ( [http://brew.sh](http://brew.sh) )，然后键入： brew install phpsh

然后你可以运行 phpsh 来获得一个交互式的 shell。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-04-23T15:13:51.153

这是你应该看到的：

```
# php -a
Interactive shell

php > echo 1+1;
2
php > echo PHP_VERSION;
5.3.2-1ubuntu4.14
php > exit
# 
```**

# java - 是否有允许一键多值关系的 java 集合？

> ID：10283190
> 
> 赞同：0
> 
> 时间：2012-04-23T14:57:24.290
> 
> 标签：java

我需要一种允许将多个值与多个键关联的集合类型。理想情况下，我会像使用 Map 一样使用它，但 map 旨在用于给定键以产生单个值。

以下是我想如何使用它的示例：

```
@Test
public void multipleItems() {
    Index<String, String> index = new Index<String, String>();
    index.add("key1", "value1");
    index.add("key2", "value2");
    index.add("key1", "value3");
    index.add("key2", "value4");
    index.add("key1", "value5");

    List<String> values = index.get("key2");

    assertEquals(2, values.size());
    assertEquals("value2", values.get(0));
    assertEquals("value4", values.get(1));
} 
```

我不知道 JVM 中有任何实现。我可以自己实现这个，但我希望找到一个现有的实现。

建议？

**解决方案**

根据以下建议，我最终使用了番石榴（并将其包装起来，因为我不想将其暴露给我的应用程序的其余部分，以防万一我找到更好的解决方案。

我使用[这些设置](http://mvnrepository.com/artifact/com.google.guava/guava-collections/r03)来包含我的 gradle 脚本： `'com.google.guava:guava-collections:r03'`

我的“包装器”类如下所示：

```
public class Indexes<K, V> {

    private HashMultimap<K, V> keyToValuesMap = HashMultimap.create();

    public void put(K key, V value) {
        this.keyToValuesMap.put(key, value);
    }

    public Set<V> get(K key) {
        return this.keyToValuesMap.get(key);
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T15:00:03.007

[Guava](http://guava-libraries.googlecode.com)是 Google 的 java 库，有多种类型的[`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)s，包括[`ListMultimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ListMultimap.html)和[`SetMultimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/SetMultimap.html)，有多种实现。还有一篇[维基文章](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:23:28.657

要与其他答案一起使用，您可以通过自己的方式滚动，`Map<String, List<String>>`或者`Map<String, Set<String>>`如果您也不能使用 3rd 方库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:12:03.447

你可以在java中使用multimap。有关更多信息，请参阅此。

[http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)

# javascript - 如何在提交时调用 JAVASCRIPT 函数

> ID：10283199
> 
> 赞同：0
> 
> 时间：2012-04-23T15:10:21.153
> 
> 标签：javascript, jquery

以下是我想在用户单击提交时调用的 javascipt 函数，请告诉我如何进行调用？？？？

```
 <script type='text/javascript'>
    $(document).ready(function(){

  function(e){

                //stop the form from being submitted
                e.preventDefault();
}
    </script>

<input class="bttonn1" type='submit' onClick="" id='send_message' value='Send The Message'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:11:10.503

在元素上使用`submit`事件，而不是在提交按钮上。`form``click`

（并且您的代码不完整，您缺少`}`处理程序函数的关闭`);`，对`click`[您将更改] 的调用的关闭`}`，`ready`处理程序的关闭以及对.`);`的调用的关闭`ready`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:28:32.920

如果它只是一个按钮，那么您可以使用 onclick 方法中的函数：

```
<input class="button1" onClick="sumbitForm()">
<script type="text/javascript">
function submitForm() {
//Your code here
//If you need to get anything from within a form try using document.getElementById(string)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:16:49.190

就像这样：http: [//jsfiddle.net/joeflateau/9c2Fm/](http://jsfiddle.net/joeflateau/9c2Fm/)

听听`submit`表格和`preventDefault`那个

# c++ - 指向 int 数组的指针，从另一个方法传递和使用它

> ID：10283200
> 
> 赞同：0
> 
> 时间：2012-04-23T15:10:26.770
> 
> 标签：c++

我还没有巩固我对 C++ 数组的学习，也忘记了如何正确地做到这一点。我之前用 char 数组完成了它，但它不适用于 int 数组。

我声明了一个新的空白 int 数组：

```
int myIntArray[10]; 
```

所以这应该是一个空数组，对吗？

然后我分配一个指向这个数组的指针：

```
int *pMyArray = myIntArray 
```

希望那是正确的。

然后我将它传递给其他地方的另一个方法：

```
anotherMethod(pMyArray) 
```

我想将此指针分配给局部变量（这是我真的不确定的地方）：

```
anotherMethod(int *pMyArray){    
    int myLocalArray[];    
    myLocalArray[0] = *pMyArray;    
} 
```

我没有收到任何编译错误，但我不确定这在某些方面是否正确。对此表示赞赏的任何和所有帮助和建议。

编辑：

我应该说我想做的事。

真的很简单，我只想从另一种方法修改本地数组。

所以我有：

方法 1 将包含：

int myArray1[10] = {0};

方法 2 将指针传递给 myArray：

然后是一些代码来修改数组 myArray 中的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:17:57.177

> ```
> int myIntArray[10];
> So this should be an array of nulls for the moment correct? 
> ```

不正确，它是一个包含 10 个未初始化整数的数组。

> ```
> int *pMyArray = myIntArray
> Hopefully thats correct to there. 
> ```

不太正确，pMyArray 是指向第一个元素 myIntArray[0] 的指针。

> 我想将此指针分配给局部变量（这是我真的不确定的地方）：

如果您确实需要分配指针，则必须使用此代码

```
int *p_myLocalArray;    
p_myLocalArray = pMyArray; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:18:48.197

这里有几个错误。

首先，零数组（非空值）是通过使用初始化语法来实现的：

`int myIntArray[10] = {0};`

其次，`int myLocalArray[];`大小为 0。即使它的大小确实是 10，写入`myLocalArray[0] = *pMyArray;`也会将第一个 int 分配到`pMyArray`into `mLocalArray`，这不是你的意思。

如果要分配数组的指针，则只需：

```
int *myLocalPointer;
myLocalPointer = pMyArray; 
```

如果您想要数组的本地副本，则需要在本地复制它，为此您还需要大小和动态分配：

```
void anotherMethod(int *pMyArray, int size){    
    int *myLocalArray = (int *)malloc(size * sizeof(int));
    memcpy(myLocalArray, pMyArray, size * sizeof(int));

    ...
    free(myLocalArray);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:14:17.553

```
int myIntArray[10]; 
```

**所以这应该是一个空数组，对吗？**

不，这是一个`10`整数数组，其中包含取决于存储规范的值。
如果在本地创建，它具有随机垃圾值。
如果在全局范围内创建，它是初始化值，对于 POD 初始化为零。

除此之外，您的方法只是将本地数组分配给您传递的数组的第一个值。
你到底想做什么？我不知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:14:36.473

```
int myIntArray[10]; 
```

这是一个未初始化的数组。它不一定包含`0`'s。

```
int *pMyArray = myIntArray 
```

好的，`pMyArray`指向`myIntArray`.

```
anotherMethod(int *pMyArray){    
    int myLocalArray[10];    
    myLocalArray[0] = *pMyArray;    
} 
```

这不会将您的指针分配给任何东西，它将本地数组的第一个值分配给`int`指向的 by `pMyArray`，记住，它是未初始化的。我在`10`那里添加了，因为你不能在 C++ 中有一个未知大小的数组。

要修改`pMyArray`指向的内容，您需要通过引用传递它：

```
anotherMethod(int *& pMyArray) 
```

此外，如果您将其分配给自动存储中的某些值，则会导致**未定义的行为**，因为该内存在函数退出时不再有效。

# apache - 颠覆远程访问

> ID：10283201
> 
> 赞同：1
> 
> 时间：2012-04-23T15:10:28.453
> 
> 标签：apache, svn, http

如何通过透明重定向从我的网站访问我的本地 svn 服务器（使用 http 协议访问）？

我尝试使用 .htaccess 文件，但出现 http 内部错误 (500)

```
RewriteEngine on
RewriteRule http://svnserver.mydomain.com/ https://localip/repoFolder [P] 
```

你能帮助我吗？

# mysql - MySQL ORDER BY xy/x ASC

> ID：10283204
> 
> 赞同：1
> 
> 时间：2012-04-23T15:10:34.363
> 
> 标签：mysql, division

我想按此规则对 MySQL 查询进行升序：`x-y/x`

x = 价格

y = 价格2

price 和 price2 是 MySQL 表中的列。

我有这个查询，但不幸的是不起作用。

```
SELECT * 
FROM albums 
WHERE price2 > 1 
ORDER BY price - price2 / price ASC 
```

感谢关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:20:11.550

试试这个：

```
$SQLquery = "SELECT * FROM albums WHERE price2 > 1 ORDER BY (price-price2)/price ASC"; 
```

或者

```
$SQLquery = "SELECT * FROM albums WHERE price2 > 1 ORDER BY ((price-price2)/price) ASC"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:13:32.740

你应该试试：

```
SELECT * FROM albums 
WHERE price2 > 1 
ORDER BY ((price - price2) / price) ASC 
```

或者

```
SELECT albums.*, ((price - price2) / price) myvar FROM albums 
WHERE price2 > 1 
ORDER BY myvar ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:14:16.520

Order By 根据指定的列工作。您可以从包含基于该公式的值的新列的基表创建视图或临时表，然后对该列进行排序。

# c# - 通过字符串名称设置/获取类属性

> ID：10283206
> 
> 赞同：92
> 
> 时间：2012-04-23T15:10:35.447
> 
> 标签：c#, reflection, properties

我要做的是使用字符串在类中设置属性的值。例如，我的类具有以下属性：

```
myClass.Name
myClass.Address
myClass.PhoneNumber
myClass.FaxNumber 
```

所有字段都是`string`类型，所以我提前知道它总是一个字符串。现在，我希望能够像使用`DataSet`对象一样使用字符串设置属性。像这样的东西：

```
myClass["Name"] = "John"
myClass["Address"] = "1112 River St., Boulder, CO" 
```

理想情况下，我只想分配一个变量，然后使用变量中的字符串名称设置属性：

```
string propName = "Name"
myClass[propName] = "John" 
```

我正在阅读有关反射的内容，也许这是这样做的方法，但我不确定如何在保持属性访问不变的同时进行设置。我希望仍然能够使用：

```
myClass.Name = "John" 
```

任何代码示例都会非常棒。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-04-23T15:15:25.737

您可以添加索引器属性，*伪代码*：

```
public class MyClass 
{
     public object this[string propertyName] 
     {
        get
        {
           // probably faster without reflection:
           // like:  return Properties.Settings.Default.PropertyValues[propertyName] 
           // instead of the following
           Type myType = typeof(MyClass);                   
           PropertyInfo myPropInfo = myType.GetProperty(propertyName);
           return myPropInfo.GetValue(this, null);
        }
        set
        {
           Type myType = typeof(MyClass);                   
           PropertyInfo myPropInfo = myType.GetProperty(propertyName);
           myPropInfo.SetValue(this, value, null);
        }
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T15:25:53.350

您可以将索引器添加到您的类并使用反射来获得属性：

```
using System.Reflection;

public class MyClass {

    public object this[string name]
    {
        get
        {
            var properties = typeof(MyClass)
                    .GetProperties(BindingFlags.Public | BindingFlags.Instance);

            foreach (var property in properties)
            {
                if (property.Name == name && property.CanRead)
                    return property.GetValue(this, null);
            }

            throw new ArgumentException("Can't find property");

        }
        set {
            return;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T15:17:40.273

可能是这样的吗？

```
 public class PropertyExample
{
    private readonly Dictionary<string, string> _properties;

    public string FirstName
    {
        get { return _properties["FirstName"]; }
        set { _properties["FirstName"] = value; }
    }

    public string LastName
    {
        get { return _properties["LastName"]; }
        set { _properties["LastName"] = value; }
    }
    public string this[string propertyName]
    {
        get { return _properties[propertyName]; }
        set { _properties[propertyName] = value; }
    }

    public PropertyExample()
    {
        _properties = new Dictionary<string, string>();
    }
} 
```

# javascript - 单击任何其他控件时如何清除文本

> ID：10283215
> 
> 赞同：0
> 
> 时间：2012-04-23T15:10:56.287
> 
> 标签：javascript, asp.net

下面的 js 脚本工作正常，但有一个小问题，问题是：

我有一个带有多行的文本框，当用户单击它时，它确实清除了文本框，但问题是；当用户单击保存按钮（asp.net 控制按钮）以保存文本框值时，我希望忽略后面的代码和客户端。

我可以做的一件事是比较值并清除它是否匹配，但如果; 如果我有很多控件并且不想在代码中的每个位置传播字符串...

寻找优化的解决方案。

```
<asp:TextBox runat="server" ID="txtNew" 
onclick="if (this.value == 'Enter here...') this.value = ''" TextMode="MultiLine"
Rows="7" Width="100%">Enter here...</asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:48:03.820

看起来你正试图在 textarea/textbox 上做一个水印功能？

为什么不检查 html5`placeholder`属性？在此处查看此示例[http://jsfiddle.net/k2PLG/1/](http://jsfiddle.net/k2PLG/1/)

`placeholder`属性不是发布或验证的值。此外，由于您使用的是 javascript，因此您可以确保包含一个 html5 javascript 文件，这使得该属性在不支持它的旧浏览器中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:21:52.013

你不需要硬编码你的`Enter here...`,[`defaultValue`](http://www.w3schools.com/jsref/prop_text_defaultvalue.asp)来代替。

```
<asp:TextBox runat="server" ID="txtNew" 
onclick="if (this.value == this.defaultValue) this.value = ''" TextMode="MultiLine"
Rows="7" Width="100%">Enter here...</asp:TextBox> 
```

对于您问题的代码隐藏部分：

我建议使用 a `RequiredFieldValidator`（因为“在此处输入”表明它是强制性的）。然后您可以将该[`InititalValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.initialvalue.aspx)属性用于您的默认文本，因此用户必须输入一些内容才能提交页面。

# http - http https 重复内容谷歌

> ID：10283217
> 
> 赞同：1
> 
> 时间：2012-04-23T15:11:15.463
> 
> 标签：http, https, seo, duplicate-content

我最近在我的一个站点上安装了 SSL 证书。我注意到谷歌现在已经索引了每个页面的 http 和 https 版本。到目前为止，我还没有真正注意到任何排名明智的问题，但我意识到重复内容可能会出现问题。

我该如何克服呢？我只有少数页面会使用 https，网站上的大多数页面最好只使用 http，事实上，如果有必要，我可以暂时不使用 https 页面。

我遇到的一些想法是：301 重定向，使用 .htaccess 将所有 https 重定向到 http。

用于 ssl 页面的 Robots.txt，再次使用 .htaccess。这里的问题是 https 页面已经被索引，我希望它们被取消索引。我不确定 robots.txt 是否足够，因为据我所知 robots.txt 只会告诉机器人不要抓取页面，但它已经被索引了。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:14:53.623

为此使用[规范的 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-28T13:43:51.677

由于我已经遇到了这个问题，好的解决方案将是规范链接谷歌将在一段时间后删除您的索引 https 页面（需要一周到一个月）。对于那些您不能放置规范链接的页面，请从 https 到 http 进行 301 重定向。

# iphone - iPhone ScrollView 和 Picker 问题

> ID：10283220
> 
> 赞同：0
> 
> 时间：2012-04-23T15:11:24.903
> 
> 标签：iphone, objective-c, ios

我注意到我的应用程序有一个奇怪的问题，该问题只出现在 iPhone 3G 和 iPhone 3GS 上。我正在创建一个包含两页的滚动视图。在滚动的第二页上，当您尝试滚动选择器时，它非常无响应。看起来我的应用程序无法区分选择器的滚动和滚动视图的滚动，因为有时您向上滚动它会向左移动。

请记住，这在 iPhone 4 和 iPhone 4S 上效果很好。

以前有没有人遇到过这个问题，或者对实际发生的事情有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:33:35.817

显然 UIScrollView 和 UIPickerView 如果一起使用会导致问题。但是，这只发生在 iPhone 3 和 iPhone 3GS 上。

解决方案是继承 UIScrollView 并实现以下方法。

```
- (UIView *)hitTest:(CGPoint)point 
         withEvent:(UIEvent *)event
{
    UIView *result = [super hitTest:point withEvent:event];

    if ([result.superview isKindOfClass:[UIPickerView class]]) {
        self.canCancelContentTouches = NO;  
        self.delaysContentTouches = NO;
    }
    else {
        self.canCancelContentTouches = YES;
        self.delaysContentTouches = YES;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:24:26.247

在滚动视图上添加 UIView，在 UIView 上添加 UIPickerView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:23:16.703

您应该只在构建设置中启用 armv7（而不是 armv6），仅此而已

# objective-c - 为什么在初始化时不使用 NSObject 而不是 id

> ID：10283221
> 
> 赞同：1
> 
> 时间：2012-04-23T15:11:34.227
> 
> 标签：objective-c, nsobject

当一个新对象被创建和初始化时，我们为什么要使用 id？我们不能使用 (NSObject*) 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T15:20:49.897

并非 Objective C 中的每个对象都是`NSObject`. 还有其他根类（例如`NSProxy`）不是从`NSObject`.

`id`绝对意味着任何对象。可以接收消息（包括 ）的一切都是 Objective C 可以在没有类型警告的情况下`Class`传递。`id`

`NSObject*`仅对实际派生自 的对象有用`NSObject`。如果你传递了不是从它派生的东西，类型检查器会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:17:41.507

因为`NSObject`是一个独特的Objective C 类。*它是大多数东西*的基类（* 但不是所有东西，+1 到 HamsterGene），但它仍然是一个类。

而且，如果您为它分配了一个新对象（从继承的任何类型），您将失去您创建的任何子类类型的继承和属性*。*`NSObject`

`id`大致[等同](https://stackoverflow.com/questions/1304176/objective-c-difference-between-id-and-void)于`void *`您可以将任何Objective C对象分配给a的行为`id`，就像您如何将任何随机内存块（不关心它的内容或类型）分配给a一样`void *`。

# android - 有哪些选项可以远程更新 Android 应用设置？

> ID：10283222
> 
> 赞同：3
> 
> 时间：2012-04-23T15:11:42.773
> 
> 标签：android

我有一个 Android 设备，我用我创建的一个应用程序来监控几个传感器。有什么有用的方法可以从我的计算机更新我的应用程序中的设置（当它在远程位置运行时）？我有兴趣向我的应用发送消息，告诉它通过电子邮件发送屏幕截图、更改采样率等。鼓励创造性的解决方法。

我已经研究过 C2DM，但遗憾的是没有设置所需的第三方应用程序服务器的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:22:40.563

[编辑] 我突然想到，我可能已经过分简化了你试图做的事情。如果是这种情况，我的回答可能对您没有太大帮助。原始答案如下。

您可以使用 TCP 套接字在您的应用程序和计算机上的命令程序之间设置客户端/服务器接口。然后只需发送一组预定义的消息/命令。我用来学习这个的两个教程是[Here](http://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication)和[Here](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)。这对套接字代码本身的计算机端没有帮助，尽管如果您用 Java 编写计算机程序，它实际上应该是相同的。这是我们公司正在做的事情，为我们正在开发的产品创建自定义命令界面。

# java - Java：ExecutorService线程与CountDownLatch同步导致死锁？

> ID：10283224
> 
> 赞同：1
> 
> 时间：2012-04-23T15:11:44.777
> 
> 标签：java, deadlock, executorservice, countdownlatch

我为编程练习写了一个人生游戏。生成器有 3 种不同的实现。第一个：一个主线程+N个子线程，第二个：SwingWorker + N个子线程，第三个：SwingWorker + ExecutorService。N 是可用处理器或用户定义的数量。前两个实现运行良好，有一个或多个线程。ExecutorServise 的实现在一个线程上运行良好，但在多个线程上锁定。我尝试了一切，但我无法得到解决方案。

这里是精细工作实现的代码（第二个）：

```
 package example.generator;

    import javax.swing.SwingWorker;

    /**
     * AbstractGenerator implementation 2: SwingWorker + sub threads.
     * 
     * @author Dima
     */
    public final class WorldGenerator2 extends AbstractGenerator {

        /**
         * Constructor.
         * @param gamePanel The game panel
         */
        public WorldGenerator2() {
            super();
        }

        /* (non-Javadoc)
         * @see main.generator.AbstractGenerator#startGenerationProcess()
         */
        @Override
        protected void startGenerationProcess() {
            final SwingWorker<Void, Void> worker = this.createWorker();
            worker.execute();
        }

        /**
         * Creates a swing worker for the generation process.
         * @return The swing worker
         */
        private SwingWorker<Void, Void> createWorker() {
            return new SwingWorker<Void, Void>() {

                @Override
                protected Void doInBackground() throws InterruptedException {
                    WorldGenerator2.this.generationProcessing();
                    return null;
                }
            };
        }

        /* (non-Javadoc)
         * @see main.generator.AbstractGenerator#startFirstStep()
         */
        @Override
        public void startFirstStep() throws InterruptedException {
            this.getQueue().addAll(this.getLivingCells());
            for (int i = 0; i < this.getCoresToUse(); i++) {
                final Thread thread = new Thread() {
                    @Override
                    public void run() {
                        WorldGenerator2.this.fistStepProcessing();
                    }
                };
                thread.start();
                thread.join();
            }
        }

        /* (non-Javadoc)
         * @see main.generator.AbstractGenerator#startSecondStep()
         */
        @Override
        protected void startSecondStep() throws InterruptedException {
            this.getQueue().addAll(this.getCellsToCheck());
            for (int i = 0; i < this.getCoresToUse(); i++) {
                final Thread thread = new Thread() {

                    @Override
                    public void run() {
                        WorldGenerator2.this.secondStepProcessing();
                    }
                };
                thread.start();
                thread.join();
            }
        }

    } 
```

这是执行器服务无法正常工作的代码：

```
 package example.generator;

    import java.util.concurrent.CountDownLatch;
    import java.util.concurrent.ExecutorService;
    import java.util.concurrent.Executors;

    import javax.swing.SwingWorker;

    /**
     * AbstractGenerator implementation 3: SwingWorker + ExecutorService.
     * 
     * @author Dima
     */
    public final class WorldGenerator3 extends AbstractGenerator {

        private CountDownLatch  countDownLatch;
        private ExecutorService executor;

        /**
         * Constructor.
         * @param gamePanel The game panel
         */
        public WorldGenerator3() {
            super();
        }

        /* (non-Javadoc)
         * @see main.generator.AbstractGenerator#startGenerationProcess()
         */
        @Override
        protected void startGenerationProcess() {
            this.executor = Executors.newFixedThreadPool(this.getCoresToUse());
            final SwingWorker<Void, Void> worker = this.createWorker();
            worker.execute();
        }

        /**
         * Creates a swing worker for the generation process.
         * @return The swing worker
         */
        private SwingWorker<Void, Void> createWorker() {
            return new SwingWorker<Void, Void>() {

                @Override
                protected Void doInBackground() throws InterruptedException {
                    WorldGenerator3.this.generationProcessing();
                    return null;
                }
            };
        }

        /* (non-Javadoc)
         * @see main.generator.AbstractGenerator#startFirstStep()
         */
        @Override
        public void startFirstStep() throws InterruptedException {
            this.getQueue().addAll(this.getLivingCells());
            this.countDownLatch = new CountDownLatch(this.getCoresToUse());
            for (int i = 0; i < this.getCoresToUse(); i++) {    
                this.executor.execute(new Runnable() {  
                    @Override
                    public void run() {
                        WorldGenerator3.this.fistStepProcessing();
                        WorldGenerator3.this.countDownLatch.countDown();
                    }
                });
            }
            this.countDownLatch.await();

        }

        /* (non-Javadoc)
         * @see main.generator.AbstractGenerator#startSecondStep()
         */
        @Override
        protected void startSecondStep() throws InterruptedException {
            this.getQueue().addAll(this.getCellsToCheck());
            this.countDownLatch = new CountDownLatch(this.getCoresToUse());
            for (int i = 0; i < this.getCoresToUse(); i++) {
                this.executor.execute(new Runnable() {
                    @Override
                    public void run() {
                        WorldGenerator3.this.secondStepProcessing();
                        WorldGenerator3.this.countDownLatch.countDown();
                    }
                });
            }
            this.countDownLatch.await();

        }
    } 
```

在这里您可以下载我的应用程序示例，带有一个小型启动器。它仅在控制台上打印迭代的结果：[链接](http://dl.dropbox.com/u/37271411/sourceCode.zip)

* * *

现在我的代码如下所示：

```
/* (non-Javadoc)
 * @see main.generator.AbstractGenerator#startFirstStep()
 */
@Override
public void startFirstStep() throws InterruptedException {

    this.getQueue().addAll(this.getLivingCells());      

    final ArrayList<Callable<Void>> list = new ArrayList<Callable<Void>>(this.getCoresToUse());

    for (int i = 0; i < this.getCoresToUse(); i++) {

        list.add(new Callable<Void>() {

                @Override
                public Void call() throws Exception {
                    WorldGenerator3.this.fistStepProcessing();
                    return null;
                }
            }
        );          
    }

    this.executor.invokeAll(list);
} 
```

但这里又是同样的问题。如果我用一个核心（线程）运行它，就没有问题。如果我将核心数设置为一个以上，它会锁定。在我的第一个问题中，有一个示例链接，您可以运行该示例（在 Eclipse 中）。也许我忽略了前面代码中的一些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:19:04.083

我发现你对 Executors 设施的使用有点奇怪......

即想法是让 Executor 有一个线程池，其大小通常与您的 CPU 支持的内核数有关。然后，您将任意数量的并行任务提交给 Executor，让它决定何时以及在其池中的哪个可用线程上执行什么。

至于 CountDownLatch... 为什么不使用[ExecutorService.invokeAll](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection,%20long,%20java.util.concurrent.TimeUnit%29)？此方法将阻塞，直到所有提交的任务都完成或达到超时。因此，它将代表您计算剩余的工作量。或者一个[CompletionService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CompletionService.html)，如果您想在任务结果可用时立即使用它，它“将新异步任务的生产与已完成任务的结果的消费分离”，即不等待所有任务首先完成。

就像是

```
 private static final int WORKER_THREAD_COUNT_DEFAULT = Runtime.getRuntime().availableProcessors() * 2;

    ExecutorService executor = Executors.newFixedThreadPool(WORKER_THREAD_COUNT);

    // your tasks may or may not return result so consuming invokeAll return value may not be necessary in your case 
    List<Future<T>> futuresResult = executor.invokeAll(tasksToRunInParallel, EXECUTE_TIMEOUT,
                TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:33:58.043

在所有变体中，您都在串行而不是并行执行线程，因为您`join`在`await`for 循环中。这意味着在刚刚启动的线程完成之前，for循环不能继续进行下一次迭代。这相当于在任何给定时间只有一个线程存在——要么是主线程，要么是在当前循环迭代中创建的一个线程。如果你想加入多个线程，你必须收集它们的引用，然后，在你启动它们的循环之外，进入另一个你加入每个线程的循环。

至于`CountDownLatch`在`Executors`变体中使用，这里所说的线程用于闩锁：不要使用实例变量；使用收集所有锁存器的本地列表并在单独的循环中等待它们。

但是，您首先不应该真正使用s `CountDownLatch`：您应该将所有并行任务放在`Callable`s 列表中并用它调用`ExecutorService.invokeAll`。它会自动阻塞，直到所有任务完成。

# url - 访问多 webrole azure 部署时避免 url 中的端口？

> ID：10283225
> 
> 赞同：0
> 
> 时间：2012-04-23T15:11:52.043
> 
> 标签：url, azure, port

我的天蓝色解决方案中有三个不同的 webrole。它们都部署到 xyz.cloudapp.net：

```
webrole 1 at port 81

webrole 2 at port 82

webrole 3 at port 83 
```

要访问 webrole 2，我需要 url xyz.cloudapp.net:82。我注意到 url 中的端口被某些防火墙阻止，所以我想摆脱该端口。

排除 url 中需要端口的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:18:39.383

看一眼：

[http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)

[http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-37-Multiple-Websites-in-a-Web-Role](http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-37-Multiple-Websites-in-a-Web-Role)

您应该能够使用主机标头和 CNAME 映射来做到这一点。但不确定您是否可以使用 cloudapp.net URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:08:58.763

几个选项。最简单的方法是更改​​您的网络角色，以便他们每个人都有自己的服务/部署。这意味着您可以在端口 80 上运行它们，并且它们将拥有自己的 url，例如 xyz.cloudapp.net、xyztwo.cloudapp.net、xyzthree.cloudapp.net。它的副作用是更容易单独部署它们。

如果您有一个用于您的应用程序的域，例如 xzy.com，那么您可以将所有三个[Web 角色设置为一个 Web 角色下的站点，](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)使用主机标头来区分它们。然后，您可以为 www.xyz.com、two.xyz.com、three.xyz.com 添加 CNAME，全部指向 xyz.cloudapp.net。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:14:09.850

实际上，您也可以使用具有多个实例的单个 Web 角色。然后工作负载将平均分配给这些实例。如果您只有一个代码库，最好的选择是使用具有多个实例的单个 Web 角色。他们可以使用负载均衡器上的单个端口 80。如果您对不同的应用程序有不同的要求，那么请多个角色。在这种情况下，您可以将它们托管在不同的托管服务中（因此它们使用不同的域名但可以使用相同的端口），或者如 knighpfhor 指出的那样将它们托管在相同的托管服务中。

此致，

明旭。

# javascript - 为什么服务器端模型、验证等与客户端之间存在这种脱节？

> ID：10283229
> 
> 赞同：3
> 
> 时间：2012-04-23T15:12:11.123
> 
> 标签：javascript, design-patterns, client-side, server-side

我最近在不同的客户端 JavaScript 库/框架上来回跳动。我喜欢骨干。不是 ExtJs 的粉丝。等等。

无论如何，它们似乎都有一个大问题，因为我必须在服务器端（`Rails 3`）和客户端定义验证逻辑。另外，我必须对我的模型定义（`AR Objects`和“JS 对象”）做同样的事情。然后我也必须在这两个地方定义业务规则。

好像我一直在开发两个并发应用程序。

我知道这是一个主观问题，但是对于我们这些无法负担专门的 JS 人员和专门的 Ruby 人员的单人团队来说，我的解决方案是什么？

我正在绞尽脑汁，也许我错过了一些东西，但我找不到解决这个问题的单一解决方案。

我想写一个 Ruby gem 来生成本地 JS 对象。所以至少我的业务对象是一样的。但这听起来很可怕。特别是因为我可能不想要客户端的所有属性。

你对这个问题有什么看法？我只需要忍受它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:30:59.040

我认为这是你必须忍受的东西。如果您考虑问题的性质，以及为什么我们同时进行客户端和服务器数据验证，您可以得出结论，目前没有办法在不降低用户体验或使您的应用程序面临风险的情况下解决这个问题。

想一想，就像您在火车上在全国范围内运送货物一样。在源头，有人检查日志以确保订单中的所有物品都已包含在火车上，并且没有货物损坏。在目的地，另一个人检查他们是否收到了他们在货物中订购的所有物品，并且没有任何损坏。

如果您跳过其中一个验证步骤会发生什么？您冒着在没有“服务器”端验证的情况下发送不完整货件的风险。如果不验证另一端的进货，如果有人劫持了火车并换掉了一堆假冒商品，那么在货物售出并且警察在您家门口之前，您不会发现它。

火车从一个地点到另一个地点所花费的时间（和费用）创造了验证进出货物的动力，因为任何一端的错误都需要发送另一列火车。

诚然，这个比喻有点牵强，但希望你能明白。我们**需要**两端的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:21:36.897

这是因为它们是两个不重叠的“封闭域”。服务器上的代码，客户端上的代码。你不能在客户端做 PHP/Ruby/Python/OtherServerLanguage，你不能在服务器上做 Javascript。等一下 ！[在那里你可以！](http://nodejs.org/)

我看到三种解决方案：

*   构建一个为两个域之一生成规则的工具，例如：获取/解析您的 ruby​​ 代码，并生成与之相关的 Javascript（模型、验证规则等），
*   使用工具将一种服务器端语言转换为 Javascript，那里有很多[https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-c ​​ompile-to-JS](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)
*   对两个域使用相同的语言，类似于 node.js [http://nodejs.org/](http://nodejs.org/)，它在服务器上引入了 Javascript。这样，您可以编写一次代码并在服务器端和客户端运行它，因此您的代码库可以被重用:) 这种模式只要求您将所有代码解耦到小的独立模块中

# algorithm - （文本表示的）整数的任意基数转换算法

> ID：10283231
> 
> 赞同：4
> 
> 时间：2012-04-23T15:12:16.517
> 
> 标签：algorithm, math, pseudocode

我正在寻找一种通用算法，它可以从一个（任意）数值基转换为另一个（也是任意的）而不将结果存储在一个大整数中并在两者之间对其执行算术运算。

我正在寻找的算法采用给定基数（主要是字符串）中的一组数值并返回类似的结果。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:29:55.097

我会说这是不可能的。对于某些基础，可以通过仅*流式传输*字符来从一个字符串转换为另一个字符串（例如，如果一个基础是另一个基础的倍数，例如八进制->十六进制），但对于任意基础，没有算术是不可能的操作。

如果你 *在中间使用字符串/字符，*它仍然是大整数算术，但你的整数只是一种（不必要的大）不寻常的格式。

因此，您可以选择：使用 char 编码的数字重新编程算术运算，或者执行该步骤并使用大整数库并遍历 convert(char(base1->bigInt), convert(bigInt->base2) 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:12:34.713

它是可计算的，但它并不漂亮。

说真的，包含许多 bignum 库之一或编写自己的库可能会更容易和更快。

# iphone - 无法在数据库中创建表

> ID：10283232
> 
> 赞同：0
> 
> 时间：2012-04-23T15:12:33.227
> 
> 标签：iphone, sqlite

当我尝试在数据库中创建 2 个表时，只有“sql_stmt”在工作，而“sql_stmt1”在下面的代码中没有工作（但它显示它已被执行）。

所以只有一个表正在创建，但我想创建两个表。

如何在数据库中同时创建两个表。

```
const char *sql_stmt = "CREATE TABLE DOSAGE_HISTORY50(PILL_NAME VARCHAR(100),PILL_PER_DOSE NUMBER,PILLS_REMAINING NUMBER,SCHEDULE VARCHAR(100),DIRECTION VARCHAR(100))";
        const char *sql_stmt1 = "CREATE TABLE DOCTOR (ID varchar(20))";

        if (sqlite3_exec(pillDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK) {

        }

    if (sqlite3_exec(pillDB, sql_stmt1, NULL, NULL, &errMsg) != SQLITE_OK) {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:29:35.880

您正在执行 sql_stmt1 两次，试图创建表医生。我认为您的第一个 if 语句应该是：

```
if (sqlite3_exec(pilldDB, sql_stmt... 
```

# regex - css关键帧的正则表达式

> ID：10283233
> 
> 赞同：-5
> 
> 时间：2012-04-23T15:12:49.763
> 
> 标签：regex

请帮我制作正则表达式来搜索这样的一种：

```
 @-webkit-keyframes chetyre { 
    75%, 100% { color:rgba( 76, 98, 113, 0); visibility: visible; }
    76%, 99% { color:rgba( 76, 98, 113, 1); }
    0%, 74% { visibility: hidden; } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:32:40.593

试试这个表达式：

```
.*\{.*;\}\} 
```

# jpa - 在持久化时复制实体 ID

> ID：10283235
> 
> 赞同：0
> 
> 时间：2012-04-23T15:12:52.510
> 
> 标签：jpa, entity, jpa-2.0, eclipselink

我想将运行时生成的实体 UUID 复制到另一个字段。实体 id 是通过下面描述的代码生成的：

```
package eclipselink.example;
public class UUIDSequence extends Sequence implements SessionCustomizer {
    public UUIDSequence() {
        super();
    }
    public UUIDSequence(String name) {
        super(name);
    }
    @Override
    public Object getGeneratedValue(Accessor accessor,
            AbstractSession writeSession, String seqName) {
        return UUID.randomUUID().toString().toUpperCase();
    }
    ...
    public void customize(Session session) throws Exception {
        UUIDSequence sequence = new UUIDSequence("system-uuid");
        session.getLogin().addSequence(sequence);
    }
} 
```

持久性.xml：

```
property name="eclipselink.session.customizer" value="eclipselink.example.UUIDSequence" 
```

实体：

```
public abstract class MyEntity{
    private String id;
    private String idCopy;

    @Id
    @Basic(optional = false)
    @GeneratedValue(generator="system-uuid")
    @XmlElement(name = "ID")
    public String getId() {
        return id;
    }
} 
```

如何指示 JPA（Eclipse-link）将运行时生成的 UUID 也复制到`idCopy`字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:17:07.280

我不是 100% 确定这会起作用（我不知道 EclipseLink 是调用 setter 还是直接分配字段），但试试看：

```
public abstract class MyEntity{
    private String id;
    private String idCopy;

    @Id
    @Basic(optional = false)
    @GeneratedValue(generator="system-uuid")
    @XmlElement(name = "ID")
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
        this.idCopy = id;
        // or
        // this.setIdCopy(id);
    }
} 
```

# sencha-touch - 更新链接标签中的 href 属性

> ID：10283236
> 
> 赞同：0
> 
> 时间：2012-04-23T15:12:56.567
> 
> 标签：sencha-touch, sencha-touch-2

我想更改具有以下属性的链接标签的 href 属性：

```
rel="apple-touch-icon-precomposed" 
```

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:17:39.163

[Ext.select](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-select)可用于搜索 DOM 元素。要了解如何在 DOM 中选择元素，可以查看 jQuery [Selectors](http://api.jquery.com/category/selectors/)文档。

然后可以使用[Ext.dom.Element.set更改 href 属性。](http://docs.sencha.com/touch/2-0/#!/api/Ext.dom.Element-method-set)请注意，即使[Ext.select](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-select)返回一个集合，Ext.Element 的所有方法都可以在该集合上使用。

简而言之，这给出了这样的结果：

```
Ext.select("a[rel='apple-touch-icon-precomposed']").set({href: 'my-other-link.html'}); 
```

# c# - C#.net 不能将 null 分配给内联 if 语句中的变量

> ID：10283237
> 
> 赞同：4
> 
> 时间：2012-04-23T15:12:58.747
> 
> 标签：c#, .net

我只是想知道为什么以下代码不起作用（请记住，我设置`age`为可空）：

```
myEmployee.age = conditionMet ? someNumber : null; 
```

然而，以下工作正常：

```
if(conditionMet)
{
    myEmployee.age = someNumber;
}
else
{
    myEmployee.age = null;
} 
```

为什么我不能在条件运算符中将值设置为 null？我的代码中的所有这些`if`语句都不好。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T15:13:58.887

双方的类型必须相同（或可隐式转换）：

```
myEmployee.age = conditionMet ? someNumber : (int?)null; 
```

从[文档](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)：

> first_expression 和 second_expression 的类型必须相同，或者必须存在从一种类型到另一种类型的隐式转换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T15:14:02.073

您可以，只是清楚`null`应该解释为的类型：

```
myEmployee.age = conditionMet ? someNumber : (int?)null; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T15:16:07.427

看看文档是怎么说的：

> [[MSDN]](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)可空类型变量的默认值将 HasValue 设置为 false。值未定义。

因此，默认值为`null`。这意味着您可以简单地执行以下操作：

```
if (conditionMet)
    myEmployee.age = someNumber; 
```

不需要更晦涩的代码语法。

* * *

如果需要，您可以`null`提前初始化它，如果它不是默认值，如下所示：

```
myEmployee.age = null;

if (conditionMet)
    myEmployee.age = someNumber; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:16:30.820

三元语句各部分的类型必须隐式转换为公共基础。在 和 的情况下`int`，`null`它们不是。您可以通过制作`age`( `Nullable<int>`or `int?`) 并转换`someNumber`为`int?`.

编辑澄清：您可以`null`使用正确转换的三元语句将值设置为。这里的问题不在于您尝试`null`使用三元语句设置值。这是三元语句中涉及的两个表达式的编译器推断的返回类型不能隐式转换为公共基类型。

# date - 计算 2 天 tcl 之间的天数

> ID：10283245
> 
> 赞同：0
> 
> 时间：2012-04-23T15:13:54.567
> 
> 标签：date, tcl

我正在计算两个日期之间的天数（两个日期以秒为单位）。以下给了我 coorect 结果，但它给了我一个负值。

例如-7.0。我不知道为什么..

我也可以删除小数点并显示吗？

```
 set interval [expr { $start_date - $get_date }]
        set days [expr { floor($interval / (60*60*24)) }]
        puts "Start Date: $start_date <br>"
        puts "Stop Date: $get_date <br>"
        puts "Total number of dates betwen 2 days: $days" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:18:30.017

你从一开始就减去了结尾（假设`$get_date`是这样）。把它想象成数字，后面的日期是一个更大的数字——如果你从一个小数字中减去一个大数字，你会得到一个负值，对吧？

所以你可能只想反转算术：

```
set interval [expr { $get_date - $start_date }] 
```

我不知道小数点部分，恐怕......也许（基于[this documentation](http://wiki.tcl.tk/583)）只是：

```
set days [expr { int($interval / (60*60*24)) }] 
```

编辑：如评论中所述，在两个事件之间的“天数”方面需要注意。您是指经过的天数、每天 24 小时还是“本地”天数？您的输入值是当地时间、UTC 还是其他时间？您能否使用专用的日期/时间库来处理这个问题？（我不知道 tcl 是否有这样的东西，但我希望它有。）

你应该*仔细*考虑在什么情况下你想要什么样的行为，并相应地编写测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:19:05.273

并不是所有的日子都是 86400 秒长，因为像夏令时这样的小事情。因此，您需要在计算中进行一些舍入（并使用浮点除法）：

```
set days [expr {round($interval / double(60*60*24))}] 
```

在计算间隔长度时，通常还从结尾减去开始，而不是反过来。得到正确的标志。

# c# - Clickonce 部署程序集必须安装在全局程序集缓存 (GAC) 中

> ID：10283246
> 
> 赞同：3
> 
> 时间：2012-04-23T15:13:55.970
> 
> 标签：c#, deployment, clickonce

我有一系列应用程序引用了我使用 ClickOnce 部署的单个库项目。这个库项目引用了几个库，用于数据处理和硬件接口等。这些标记为 LocalCopy=False 并且在使用 ClickOnce 时默认在“应用程序文件...”中作为先决条件。

虽然这对于大多数应用程序来说都是完美的，但并不是我所有的应用程序都需要所有的库。例如，仅用于查看数据的程序不需要硬件库。

按照[这个线程](https://stackoverflow.com/questions/558361/unable-to-install-or-run-the-application-the-application-requires-stdole-versio)的逻辑，我将文件设置为排除，因为我实际上并不需要它们，但收到错误“无法安装或运行应用程序。应用程序要求在全局程序集中安装程序集 NationalInstruments.Common 8.20.306首先缓存（GAC）。”

如果我将它们设置为包含将安装的应用程序，但在运行时会出现错误“应用程序无法启动。联系应用程序供应商”。如果我单击此对话框上的详细信息按钮，我会得到一个日志文件：

```
PLATFORM VERSION INFO
Windows             : 5.1.2600.196608 (Win32NT)
Common Language Runtime     : 2.0.50727.3623
System.Deployment.dll       : 2.0.50727.3053 (netfxsp.050727-3000)
mscorwks.dll            : 2.0.50727.3623 (GDR.050727-3600)
dfdll.dll           : 2.0.50727.3053 (netfxsp.050727-3000)
dfshim.dll          : 4.0.31106.0 (Main.031106-0000)

SOURCES
Deployment url          : file://nt_server/prog/Publish/ResultsLoader/ATE%20Results%20Loader.application
Deployment Provider url     : file://nt_server/prog/Publish/ResultsLoader/ATE%20Results%20Loader.application
Application url         : file://nt_server/prog/Publish/ResultsLoader/Application%20Files/ATE%20Results%20Loader_1_0_0_5/ATE%20Results%20Loader.exe.manifest

IDENTITIES
Deployment Identity     : ATE Results Loader.application, Version=1.0.0.5, Culture=neutral, PublicKeyToken=67305960c2b2ce03, processorArchitecture=msil
Application Identity        : ATE Results Loader.exe, Version=1.0.0.5, Culture=neutral, PublicKeyToken=67305960c2b2ce03, processorArchitecture=msil, type=win32

APPLICATION SUMMARY
* Installable application.

ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Activation of \\nt_server\prog\Publish\ResultsLoader\ATE Results Loader.application resulted in exception. Following failure messages were detected:
    + Value does not fall within the expected range.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
No transaction error was detected.

WARNINGS
There were no warnings during this operation.

OPERATION PROGRESS STATUS
* [4/23/2012 11:07:42 AM] : Activation of \\nt_server\prog\Publish\ResultsLoader\ATE Results Loader.application has started.
* [4/23/2012 11:07:52 AM] : Processing of deployment manifest has successfully completed.
* [4/23/2012 11:07:52 AM] : Installation of the application has started.
* [4/23/2012 11:07:52 AM] : Processing of application manifest has successfully completed.
* [4/23/2012 11:07:55 AM] : Request of trust and detection of platform is complete.
* [4/23/2012 11:08:02 AM] : Downloading of subscription dependencies is complete.
* [4/23/2012 11:08:02 AM] : Commit of the downloaded application has started.
* [4/23/2012 11:08:05 AM] : Installation of application has successfully completed.

ERROR DETAILS
Following errors were detected during this operation.
* [4/23/2012 11:08:06 AM] System.ArgumentException
    - Value does not fall within the expected range.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.NativeMethods.CorLaunchApplication(UInt32 hostType, String applicationFullName, Int32 manifestPathsCount, String[] manifestPaths, Int32 activationDataCount, String[] activationData, PROCESS_INFORMATION processInformation)
        at System.Deployment.Application.ComponentStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.SubscriptionStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.ApplicationActivator.Activate(DefinitionAppId appId, AssemblyManifest appManifest, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
        at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)

COMPONENT STORE TRANSACTION DETAILS
* Transaction at [4/23/2012 11:08:05 AM]
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: NRJMNL92.0H4.application
    + System.Deployment.Internal.Isolation.StoreOperationSetDeploymentMetadata
        - Status: Set
        - HRESULT: 0x0
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: ATE Results Loader.exe.manifest
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: ATE Results Loader.xml
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: NationalInstruments.Common.Native.dll.genman
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: NationalInstruments.Common.Native.dll
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: NationalInstruments.DAQmx.dll.genman
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: NationalInstruments.DAQmx.dll
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: NationalInstruments.Common.dll.genman
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: NationalInstruments.Common.dll
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: ATE.dll.genman
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: ATE.dll
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: NationalInstruments.NI4882.dll.genman
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: NationalInstruments.NI4882.dll
    + System.Deployment.Internal.Isolation.StoreOperationStageComponent
        - Status: Installed
        - HRESULT: 0x0
        - Manifest: ATE Results Loader.exe.genman
    + System.Deployment.Internal.Isolation.StoreOperationStageComponentFile
        - Status: Installed
        - HRESULT: 0x0
        - File: ATE Results Loader.exe
    + System.Deployment.Internal.Isolation.StoreOperationInstallDeployment
        - Status: Installed
        - HRESULT: 0x0
        - AppId: file://nt_server/prog/Publish/ResultsLoader/ATE%20Results%20Loader.application#ATE Results Loader.application, Version=1.0.0.5, Culture=neutral, PublicKeyToken=67305960c2b2ce03, processorArchitecture=msil
    + System.Deployment.Internal.Isolation.StoreOperationSetDeploymentMetadata
        - Status: Set
        - HRESULT: 0x0
    + System.Deployment.Internal.Isolation.StoreTransactionOperationType (27)
        - HRESULT: 0x0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T17:28:07.757

再一次，我终于找到了解决方案，但仍然无法解释为什么会出现这个问题。

重置应用程序文件后，我注意到这个引用创建了 2 个列出的 DLL 应用程序文件。一个列为 NationalInstruments.Common.Native.dll，一个没有本地标记。其中一个 dll 的原生默认包含 where 而另一个默认为先决条件。如果我将先决条件更改为排除并将另一个保留为包含应用程序将安装。其他 NationalInstruments 参考仅生成一个 DLL 应用程序文件，我可以毫无问题地排除它。

从技术上讲，我的问题已解决，但如果有人能提供有关此参考为何产生 2 个 DLL 以及为什么即使不使用它也不能排除其中的原因的见解，我将不胜感激。

# xamarin.android - 如何从循环中创建包含多列的自定义列表

> ID：10283247
> 
> 赞同：0
> 
> 时间：2012-04-23T15:13:55.953
> 
> 标签：xamarin.android

我需要通过循环遍历两组数据来创建自定义列表。下面是我正在使用的，但是当我将它附加到我的列表视图时，我只得到最后一条记录。我尝试将我知道的 this.CoeListitem = New List 移动到第一个循环上方但没有返回任何记录。那么如何设置它以创建具有正确记录数的列表。这是我的

```
 public class CoeList

[PrimaryKey, AutoIncrement]
public long Id { get; set; }
public string Name { get; set; }
public string CreateDt { get; set; } 
```

这是我的循环，第一个是获取我的 Coe 项目，第二个是获取所有去每个 Coe 项目的成年人，这可能很多，这就是我需要两个循环的原因。

```
 //new loop
    List<Coe> allCoe = (List<Coe>)((OmsisMobileApplication)Application).OmsisRepository.GetAllCoe();
    if (allCoe.Count > 0)
    {
      foreach (var Coeitem in allCoe)
      {
      //take the coe id and get the adults
        List<Adult> AdultsList = (List<Adult>)((OmsisMobileApplication)Application).OmsisRepository.GetAdultByCoeMID(Coeitem.Id);
        if (AdultsList.Count > 0)
        {
          foreach (var AdltItem in AdultsList)
          {
            CoeNames += "; " + AdltItem.LName + ", " + AdltItem.FName;
          }
        }
          CoeNames = CoeNames.Substring(1);
          //ceate new list for coelist
          this.CoeListitem = new List<CoeList>()
            {
              new CoeList() { Id = Coeitem.Id, CreateDt = Coeitem.CreateDt, Name = CoeNames }
            };
      }
    }
  // End loop
  _list.Adapter = new CoeListAdapter(this, CoeListitem); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:44:17.663

您的问题在于，每次循环迭代时，您都在重新创建整个列表并丢失所有先前的项目（您将一个只有一个项目的**新列表分配给变量）。**因此，在循环结束时，您只有一项。

您必须在循环*外*创建一个列表，并且只将每个项目添加到 lop 正文中的列表中。

```
// create the new list first
this.CoeListitem = new List<CoeList>();

var application = (OmsisMobileApplication) Application;
List<Coe> allCoe = (List<Coe>) application.OmsisRepository.GetAllCoe();
foreach (var Coeitem in allCoe) //new loop
{
    //take the coe id and get the adults
    List<Adult> AdultsList = (List<Adult>) application.OmsisRepository.GetAdultByCoeMID(Coeitem.Id);
    foreach (var AdltItem in AdultsList)
    {
        CoeNames += "; " + AdltItem.LName + ", " + AdltItem.FName;
    }
    CoeNames = CoeNames.Substring(1);

    // Add the item to the existing list
    this.CoeListitem.Add(new CoeList { Id = Coeitem.Id, CreateDt = Coeitem.CreateDt, Name = CoeNames });
} // End loop

// give the list to the adapter
_list.Adapter = new CoeListAdapter(this, CoeListitem); 
```

希望这可以帮助。

# php - 在服务器端选择选项错误，但在客户端运行

> ID：10283255
> 
> 赞同：0
> 
> 时间：2012-04-23T15:14:05.897
> 
> 标签：php, jquery

我有选择框，它有值和**[客户端示例](http://jsfiddle.net/marafee1243/NLGPT/)**

我有如下服务器代码

```
 <select name="customer_id" id="customer_id">
<?php get_customer_list_options(); ?>
  </select> | 
  <input id="customer_name_from_sel" type="text" /> 
```

和下面的jQuery代码

```
<script type="text/javascript">
    $(document).ready(function(){

    $("#customer_id").bind('change', function() {
        var k = $("#customer_id option:selected").attr("title");
        $("#customer_name_from_sel").val(k);
    });

});​

</script> 
```

和功能码

```
function get_customer_list_options() {
    $fquery39 = mysql_query("select User_ID, First_Name, Email_ID from customers");

    while($r39 = mysql_fetch_row($fquery39)) {
        echo "<option value='$r39[0]' title='$r39[1]' >$r39[2]</option>";
    }

} 
```

现在，当我从 jsfiddle 运行代码时，运行完美，而在服务器页面上，它无法正常工作。而且我已经在工作 jquery 库很好..处于完美状态。

**值 attr`title`不显示在文本上`customer_name_from_sel`**

下面是 HTML 代码的图像输出。

![在此处输入图像描述](../Images/c9b059c50a41415b51916831c41c2c87.png)

错误图片

![在此处输入图像描述](../Images/020862a4e91e6d73703bd269333f1621.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:11:54.230

我认为您需要测试是否 `$("#customer_id option:selected")`获得了正确的元素。如果没有，您可以使用`selectedIndex`获取选定的选项。

# css - 如何使用 CSS 将图像放置在文本旁边

> ID：10283256
> 
> 赞同：0
> 
> 时间：2012-04-23T15:04:36.963
> 
> 标签：css, layout, html

我有两个 div 的 CSS 问题。我的第一个 div 包含文本，而第二个 div 包含图像。我需要将图像 div 放在文本 div 的右上角。

我的 div 结构如下：

```
<div class="text">text text text .... more text</div>
<div class="images">image image</div> 
```

我想归档这个：

=========================

文字文字 *-图片-*

文字文字 *-图片-*

文字文字文字文字

文字文字文字文字

文字文字文字文字

==========================

我用一张图片说明了这个问题： ![在此处输入图像描述](../Images/c0484177274003279df29d8aedfe56bb.png)

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:23:14.437

**[浮动图像？](http://css-tricks.com/all-about-floats/)**

```
<style>.images { float: right; }</style>

<div class="images">image image</div>
<div class="text">text text text .... more text</div> 
```

**[现场示例](http://dabblet.com/gist/2479230)**- 此示例演示了原理。它有更多的样式使它看起来更好，但没有它们也可以工作。玩它，看看我的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:20:33.403

如果您重新格式化 HTML 以将图像放入 text ，您可以在该容器中浮动图像，并且文本将围绕它流动。

```
<style>
  img { float:right; }
</style>
<div>
    <img src="image1.png">
    <img src="image1.png">
    Lorum ipsum .....
</div> 
```

将图像放入不同的容器意味着它们与该文本“分离”，因此文本无法流动。

# ruby - 在Ruby中打印一个类的所有方法名称？

> ID：10283257
> 
> 赞同：28
> 
> 时间：2012-04-23T15:14:12.267
> 
> 标签：ruby

如果我想列出我可以使用的类的所有方法`Class_Name.methods`，例如，列出`FixNum`类中的所有方法：

```
> 5.methods
 => [:to_s, :-@, :+, :-, :*, :/, :div, :%, :modulo, :divmod, :fdiv, :**, :abs, :magnitude, :==, :===, :<=>, :>, :>=, :<, :<=, :~, :&, :|, :^, :[], :<<, :>>, :to_f, :size, :zero?, :odd?, :even?, :succ, :integer?, :upto, :downto, :times, :next, :pred, :chr, :ord, :to_i, :to_int, :floor, :ceil, :truncate, :round, :gcd, :lcm, :gcdlcm, :numerator, :denominator, :to_r, :rationalize, :singleton_method_added, :coerce, :i, :+@, :eql?, :quo, :remainder, :real?, :nonzero?, :step, :to_c, :real, :imaginary, :imag, :abs2, :arg, :angle, :phase, :rectangular, :rect, :polar, :conjugate, :conj, :between?, :nil?, :=~, :!~, :hash, :class, :singleton_class, :clone, :dup, :initialize_dup, :initialize_clone, :taint, :tainted?, :untaint, :untrust, :untrusted?, :trust, :freeze, :frozen?, :inspect, :methods, :singleton_methods, :protected_methods, :private_methods, :public_methods, :instance_variables, :instance_variable_get, :instance_variable_set, :instance_variable_defined?, :instance_of?, :kind_of?, :is_a?, :tap, :send, :public_send, :respond_to?, :respond_to_missing?, :extend, :display, :method, :public_method, :define_singleton_method, :object_id, :to_enum, :enum_for, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__, :__id__] 
```

这份清单真的很难阅读。我也尝试过`5.methods.sort`，但这并没有使它更具可读性。

我在日常编程中经常使用方法列表。有没有办法漂亮地打印这个，所以它变得更容易阅读？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-23T15:24:06.037

试试这个单行：

```
puts 5.methods.sort 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-23T15:25:49.900

我喜欢用[`awesome_print`](http://rubygems.org/gems/awesome_print)这个。作为奖励，它为您提供彩色输出、方法数量以及它们的来源：

```
1.9.3-p125 :001 > require 'ap'
 => true 
1.9.3-p125 :002 > ap 5.methods; 0
[
    [  0]                          !()                 Fixnum (BasicObject)
    [  1]                         !=(arg1)             Fixnum (BasicObject)
    [  2]                         !~(arg1)             Fixnum (Kernel)
    [  3]                          %(arg1)             Fixnum
    [  4]                          &(arg1)             Fixnum
    [  5]                          *(arg1)             Fixnum
    [  6]                         **(arg1)             Fixnum
    [  7]                          +(arg1)             Fixnum
    [  8]                         +@()                 Fixnum (Numeric)
    [  9]                          -(arg1)             Fixnum
    [ 10]                         -@()                 Fixnum
    [ 11]                          /(arg1)             Fixnum
    [ 12]                          <(arg1)             Fixnum
    [ 13]                         <<(arg1)             Fixnum
    [ 14]                         <=(arg1)             Fixnum
    [ 15]                        <=>(arg1)             Fixnum
    [ 16]                         ==(arg1)             Fixnum
    [ 17]                        ===(arg1)             Fixnum
    [ 18]                         =~(arg1)             Fixnum (Kernel)
    [ 19]                          >(arg1)             Fixnum
    [ 20]                         >=(arg1)             Fixnum
    [ 21]                         >>(arg1)             Fixnum
    [ 22]                         [](arg1)             Fixnum
    [ 23]                          ^(arg1)             Fixnum
    [ 24]                     __id__()                 Fixnum (Kernel)
    [ 25]                   __send__(*arg1)            Fixnum (BasicObject)
    [ 26]                        abs()                 Fixnum
    [ 27]                       abs2()                 Fixnum (Numeric)
    [ 28]                         ai(*options)         Fixnum (Kernel)
    [ 29]                      angle()                 Fixnum (Numeric)
    [ 30]                        arg()                 Fixnum (Numeric)
    [ 31]            awesome_inspect(*options)         Fixnum (Kernel)
    [ 32]              awesome_print(object, *options) Fixnum (Kernel)
    [ 33]                   between?(arg1, arg2)       Fixnum (Comparable)
    [ 34]                       ceil()                 Fixnum (Integer)
    [ 35]                        chr(*arg1)            Fixnum (Integer)
    [ 36]                      class()                 Fixnum (Kernel)
    [ 37]                      clone()                 Fixnum (Kernel)
    [ 38]                     coerce(arg1)             Fixnum (Numeric)
    [ 39]                       conj()                 Fixnum (Numeric)
    [ 40]                  conjugate()                 Fixnum (Numeric)
    [ 41]    define_singleton_method(*arg1)            Fixnum (Kernel)
    [ 42]                denominator()                 Fixnum (Integer)
    [ 43]                    display(*arg1)            Fixnum (Kernel)
    [ 44]                        div(arg1)             Fixnum
    [ 45]                     divmod(arg1)             Fixnum
    [ 46]                     downto(arg1)             Fixnum (Integer)
    [ 47]                        dup()                 Fixnum (Kernel)
    [ 48]                   enum_for(*arg1)            Fixnum (Kernel)
    [ 49]                       eql?(arg1)             Fixnum (Numeric)
    [ 50]                     equal?(arg1)             Fixnum (BasicObject)
    [ 51]                      even?()                 Fixnum
    [ 52]                     extend(*arg1)            Fixnum (Kernel)
    [ 53]                       fdiv(arg1)             Fixnum
    [ 54]                      floor()                 Fixnum (Integer)
    [ 55]                     freeze()                 Fixnum (Kernel)
    [ 56]                    frozen?()                 Fixnum (Kernel)
    [ 57]                        gcd(arg1)             Fixnum (Integer)
    [ 58]                     gcdlcm(arg1)             Fixnum (Integer)
    [ 59]                       hash()                 Fixnum (Kernel)
    [ 60]                          i()                 Fixnum (Numeric)
    [ 61]                       imag()                 Fixnum (Numeric)
    [ 62]                  imaginary()                 Fixnum (Numeric)
    [ 63]           initialize_clone(arg1)             Fixnum (Kernel)
    [ 64]             initialize_dup(arg1)             Fixnum (Kernel)
    [ 65]                    inspect()                 Fixnum (Kernel)
    [ 66]              instance_eval(*arg1)            Fixnum (BasicObject)
    [ 67]              instance_exec(*arg1)            Fixnum (BasicObject)
    [ 68]               instance_of?(arg1)             Fixnum (Kernel)
    [ 69] instance_variable_defined?(arg1)             Fixnum (Kernel)
    [ 70]      instance_variable_get(arg1)             Fixnum (Kernel)
    [ 71]      instance_variable_set(arg1, arg2)       Fixnum (Kernel)
    [ 72]         instance_variables()                 Fixnum (Kernel)
    [ 73]                   integer?()                 Fixnum (Integer)
    [ 74]                      is_a?(arg1)             Fixnum (Kernel)
    [ 75]                   kind_of?(arg1)             Fixnum (Kernel)
    [ 76]                        lcm(arg1)             Fixnum (Integer)
    [ 77]                  magnitude()                 Fixnum
    [ 78]                     method(arg1)             Fixnum (Kernel)
    [ 79]                    methods(*args)            Fixnum (Object)
    [ 80]                     modulo(arg1)             Fixnum
    [ 81]                       next()                 Fixnum (Integer)
    [ 82]                       nil?()                 Fixnum (Kernel)
    [ 83]                   nonzero?()                 Fixnum (Numeric)
    [ 84]                  numerator()                 Fixnum (Integer)
    [ 85]                  object_id()                 Fixnum (Kernel)
    [ 86]                       odd?()                 Fixnum
    [ 87]                        ord()                 Fixnum (Integer)
    [ 88]                      phase()                 Fixnum (Numeric)
    [ 89]                      polar()                 Fixnum (Numeric)
    [ 90]                       pred()                 Fixnum (Integer)
    [ 91]            private_methods(*args)            Fixnum (Object)
    [ 92]          protected_methods(*args)            Fixnum (Object)
    [ 93]              public_method(arg1)             Fixnum (Kernel)
    [ 94]             public_methods(*args)            Fixnum (Object)
    [ 95]                public_send(*arg1)            Fixnum (Kernel)
    [ 96]                        quo(arg1)             Fixnum (Numeric)
    [ 97]                rationalize(*arg1)            Fixnum (Integer)
    [ 98]                       real()                 Fixnum (Numeric)
    [ 99]                      real?()                 Fixnum (Numeric)
    [100]                       rect()                 Fixnum (Numeric)
    [101]                rectangular()                 Fixnum (Numeric)
    [102]                  remainder(arg1)             Fixnum (Numeric)
    [103]                respond_to?(*arg1)            Fixnum (Kernel)
    [104]        respond_to_missing?(arg1, arg2)       Fixnum (Kernel)
    [105]                      round(*arg1)            Fixnum (Integer)
    [106]                       send(*arg1)            Fixnum (Kernel)
    [107]            singleton_class()                 Fixnum (Kernel)
    [108]     singleton_method_added(arg1)             Fixnum (Numeric)
    [109]          singleton_methods(*args)            Fixnum (Object)
    [110]                       size()                 Fixnum
    [111]                       step(*arg1)            Fixnum (Numeric)
    [112]                       succ()                 Fixnum
    [113]                      taint()                 Fixnum (Kernel)
    [114]                   tainted?()                 Fixnum (Kernel)
    [115]                        tap()                 Fixnum (Kernel)
    [116]                      times()                 Fixnum (Integer)
    [117]                       to_c()                 Fixnum (Numeric)
    [118]                    to_enum(*arg1)            Fixnum (Kernel)
    [119]                       to_f()                 Fixnum
    [120]                       to_i()                 Fixnum (Integer)
    [121]                     to_int()                 Fixnum (Integer)
    [122]                       to_r()                 Fixnum (Integer)
    [123]                       to_s(*arg1)            Fixnum
    [124]                   truncate()                 Fixnum (Integer)
    [125]                      trust()                 Fixnum (Kernel)
    [126]                    untaint()                 Fixnum (Kernel)
    [127]                    untrust()                 Fixnum (Kernel)
    [128]                 untrusted?()                 Fixnum (Kernel)
    [129]                       upto(arg1)             Fixnum (Integer)
    [130]                      zero?()                 Fixnum
    [131]                          |(arg1)             Fixnum
    [132]                          ~()                 Fixnum
]
 => 0 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T15:21:47.300

排除继承自`Object`.

```
(Fixnum.public_instance_methods - Object.public_instance_methods).sort
=> [:%, :&, :*, :**, :+, :+@, :-, :-@, :/, :<, :<<, :<=, :>, :>=, :>>, :[], :^, :abs, :abs2, :angle, :arg, :between?, :ceil, :chr, :coerce, :conj, :conjugate, :denominator, :div, :divmod, :downto, :even?, :fdiv, :floor, :gcd, :gcdlcm, :i, :imag, :imaginary, :integer?, :lcm, :magnitude, :modulo, :next, :nonzero?, :numerator, :odd?, :ord, :phase, :polar, :pred, :quo, :rationalize, :real, :real?, :rect, :rectangular, :remainder, :round, :singleton_method_added, :size, :step, :succ, :times, :to_c, :to_f, :to_i, :to_int, :to_r, :truncate, :upto, :zero?, :|, :~] 
```

或者也许更具可读性：

```
(Fixnum.public_instance_methods - Object.public_instance_methods).sort.join(" ")
=> "% & * ** + +@ - -@ / < << <= > >= >> [] ^ abs abs2 angle arg between? ceil chr coerce conj conjugate denominator div divmod downto even? fdiv floor gcd gcdlcm i imag imaginary integer? lcm magnitude modulo next nonzero? numerator odd? ord phase polar pred quo rationalize real real? rect rectangular remainder round singleton_method_added size step succ times to_c to_f to_i to_int to_r truncate upto zero? | ~" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-23T15:25:19.147

事实上，你回答了你自己的问题：

```
require 'pp'
pp 5.methods

[:to_s,
 :-@,
 :+,
 :-,
 :*,
 :/,
 :div,
 :%,
 :modulo,
 :divmod,
 :fdiv,
 :**,
 :abs,
 :magnitude,
 :==,
 :===,
 :<=>,
etc 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-23T15:25:04.463

一个几乎开箱即用的简单方法是：

```
require 'yaml'
y (5.methods - Object.methods).sort 
```

为方便起见，您还可以创建一个包含这些方法的 .irbrc 文件：

```
require 'yaml'

def yppo(obj)
  y((obj.methods - Object.methods).sort)
end

def yppc(obj)
  y((obj.methods - Class.methods).sort)
end 
```

然后它就像`yppo(5)`.

我通常使用的另一个技巧是 grep 方法：

```
y (5.methods - Object.methods).sort.grep /to_/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-08T22:51:14.820

你好这是一个简单的答案

```
5.methods.each {|x| p x} 
```

现在解释。“5”是“数字”，可以是任何其他整数......“.methods”这将调用适用于数字的所有方法的列表......“.each {|x| px}" 这将在列表中打印所有方法。

我希望这有帮助。

# java - JSF：ManagedBean，处理业务逻辑的好地方？

> ID：10283262
> 
> 赞同：1
> 
> 时间：2012-04-23T15:14:17.800
> 
> 标签：java, jsf, faces-config

我有`managedBean`，`fileUpload`一旦文件被上传，我需要根据从解析器下拉列表中选择的值调用不同的解析器，然后在解析器中为该特定类创建`DetailsClass`调用方法的对象，这里要注意的是既不是也不是在 faces-config.xml 中注册，我的问题是`getDetails``parserClass``DetailsClass`

*   如果我想维护从`FileUpload`一个类到另一个`Parser`类的会话信息，`DetailsClass`那么我应该在其中定义它，`faces-config.xml`但是应该如何定义`parser`类和`DetailsClass`定义，它应该被定义为`managedBean`还是像其他东西一样？

这是代码：

在我的 managedBean 类中，我有两个函数，`fileUpload`如图`callParser`所示：

```
 public void uploadFile(FileEntryEvent event)
{
    FacesContext ctx = FacesContext.getCurrentInstance();
    //Setting getSession to false, container will not create new session if session is not present and return null
    HttpSession session = (HttpSession) ctx.getExternalContext().getSession(false);
    setSession(session);

    resultBean = new ResultBean();
    FileEntry fileEntry = (FileEntry) event.getSource();
    FileEntryResults results = fileEntry.getResults();
    FileEntry fe = (FileEntry) event.getComponent();

    FacesMessage msg = new FacesMessage();
    for (FileEntryResults.FileInfo fileInfo : results.getFiles())
    {
        if (fileInfo.isSaved())
        {
            File file = fileInfo.getFile();
            String filePath = file.getAbsolutePath();
            callParser(selectedItem, filePath);
        }
        resultBeanList.add(resultBean);
    }
}

private void callParser(String parserType, String filePath)
{
    if ("Delta".equals(parserType))
    {
        PositionParserDelta deltaParser = new PositionParserDelta();
        deltaParser.getQuotes(filePath);
    }
    else if ("Gamma".equals(parserType))
    {
        PositionParserGamma gammaParser = new PositionParserGamma();
        gammaParser.getQuotes(filePath);
    }
} 
```

现在，假设我们考虑`Delta Parser`，所以在那节课上我有类似的东西：

```
public class PositionParserDelta extends Base
{
    List<String[]> dataList = new ArrayList<String[]>();
    ContractManager contractManager = new ContractManager();

    public PositionParserDelta()
    {
    }

    public void getQuotes(String fileName)
    {
        try
        {
            Map<String, ContractSeries> gsLookup = contractManager.getContractsMap(ContractManager.VendorQuotes.KRT);
            CSVReader reader = new CSVReader(new FileReader(fileName), '\t');
            String[] header = reader.readNext();
            dataList = reader.readAll();
            List<Trade> tradeBeanList = new ArrayList<Trade>();
            for (String[] data : dataList)
            {
                //Some Business Logic
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

我的`contractManager`班级看起来像

```
 public class ContractManager extends Base
    {
        private List<Series> List = new ArrayList<Series>();
        private ContractSeries[] SeriesList = new Series[3];
        private ListingOps listingOps;

//This line throws error as faces class not found and it makes sense because am not registering this with faces-config.xml
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);

        public List<ContractSeries> getContracts(long orgId, HttpSession session)
        {
            log.info("Inside getContracts method call");
            if (false)
            {
                //Some Logic
            }
            else
            {
                try
                {
                    //Set session and get initialContext to retrieve contractSeries data from ejb calls
                    log.info("Trying to get allContractSeries data from listingOpsBean");
                    Series[] allSeries = deltaOps.findAllSeries(true);
                    Collections.addAll(contractList, allContractSeries);
                }
                catch (Exception ex)
                {

                }
            }
            return contractList;
        }

        public Map<String, ContractSeries> getContractsMap(VendorQuotes vendorQuotes)
        { //Some Logic
    } 
```

但是在 faces-config.xml 文件中，

```
 <managed-bean>
        <managed-bean-name>fileUpload</managed-bean-name>
        <managed-bean-class>trade.UploadBlotterBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

所以基本上我的问题是，

> 如果假设从那时起调用其他类，`managedBean`那么它们应该如何定义，`faces-config.xml`并且由于是新手`JSF`，是否从这些类中调用其他类`managedBean`并在这些类中具有一些业务逻辑被认为是好的做法？

我还需要确保我保持我在课堂上获得`UploadFile`的会话`Parser`。`ContractMapping`

还，

> 是否所有内容都在 faces-config 中“注册”为托管 bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:40:03.423

Not sure but I think every bean is registered as `<managed-bean>` in `faces-config`. On the specific role, a class plays, they can be categorized into

1.  `Model Managed-Bean`

2.  Backing Managed-Bean

3.  Controller Managed-Bean

4.  Support Managed-Bean

5.  Utility Managed-Bean ...

By giving them appropriate name you can distinguish them in `faces-config`. As per the work served by bean , set there scopes.

# java - 尝试导入我自己的包

> ID：10283265
> 
> 赞同：5
> 
> 时间：2012-04-23T15:14:23.967
> 
> 标签：java, import

```
package mainClasses;
    /*
     * Frame Info and all that ****,
     * mainFrame is the actual frame itself
     * it will refer to MainC.java a lot Main class = Main Class
     */
    import java.awt.FlowLayout;
    import java.awt.Graphics;
    import JavaGame.src.resources.*; //Problem Code
    import javax.swing.JButton;
    import javax.swing.JFrame;

    public class mainFrame extends JFrame {

private static final long serialVersionUID = 1L;

public mainFrame() {
    JButton playButton = new JButton();
    JButton infoButton = new JButton();
    JButton exitButton = new JButton();
    int x = 300, y = 300;
    setSize(x, y);
    setVisible(true);
    setLayout(new FlowLayout());
    setTitle("Kingdom Raider");
    setDefaultCloseOperation(EXIT_ON_CLOSE);

    /*Buttons and Properties*/

     playButton.setBounds(x, y, 200, 100);
     playButton.setText("Play!");
    add(playButton);

     infoButton.setBounds(x, y, 200, 100);
     infoButton.setText("Information");
    add(infoButton);

     exitButton.setBounds(x, y, 200, 100);
     exitButton.setText("Exit");
    add(exitButton);
            /* Add image here */

}

public void Painting (Graphics g) {
    //Me.
}
   } 
```

我正在创建游戏，但遇到了导入问题。如您所见，我想导入 JavaGame.src.resources，因为我正在尝试导入 img。这是我的目录的立场：

[![在此处输入图像描述](../Images/91787128199a749bd72736445fa7db8c.png)](https://i.stack.imgur.com/1ChqH.jpg)

我现在不需要知道resourcesmanager.java 上的代码它是空白的。所以基本上，这里的这个类在包 mainClasses 中，但我想访问资源包。是什么赋予了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:15:51.013

你的包名是`resources`，所以写这个：

```
import resources.*; // No-Problem Code 
```

目录结构的其余部分特定于 Eclipse，与 Java 类路径没有任何关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:18:19.140

资源不像包一样被导入。看看这里：[http](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html) ://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html 。

具体来说，这是一个如何从资源加载图像的示例：http: [//docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:18:44.100

如果您复制和粘贴某些内容，Eclipse 会自动为您导入内容——也许您可以编写一个使用 JavaGame.src.resources 中的内容的短片，然后复制粘贴该内容——eclipse 会完成剩下的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:16:08.987

您的源文件夹是`src`，所以这是您的类层次结构的根。你应该做

```
import resources.* 
```

但是使用`*`是不好的形式，你应该尝试只导入你在这个特定类中需要的类，就像你已经完成的那样`javax.swing.JButton`。所以：

```
import resources.ResourceManager; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:38:56.650

我认为这可能是 Eclipse 配置的问题。有时 Eclipse 将项目中的源文件夹视为包的一部分。只需从 Eclipse 工作区中删除项目，而不将其从文件系统中删除，然后再次导入。

那应该有帮助。

**从 eclipse 中删除项目而不从文件系统中删除它：**

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-42b.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-42b.htm)

**将现有项目导入 Eclipse：**

[http://agile.csc.ncsu.edu/SEMaterials/tutorials/import_export/](http://agile.csc.ncsu.edu/SEMaterials/tutorials/import_export/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-10T22:44:36.667

您要做的是访问存储在资源文件夹中的文件。为此，您不会像尝试那样导入文件夹。相反，按照小马托尼的建议和使用

```
getResource("FileName.ext") 
```

例如，要将文件转换为图标，您必须使用资源路径：

```
java.net.URL path = this.getClass().getResource("FileName.jpg");
ImageIcon icon = new ImageIcon(path); 
```

我还应该指出，如果您使用的是 NetBeans，则需要将资源文件夹添加为源文件夹；否则项目将无法按照您的要求进行编译，从而导致无法访问资源文件的 .jar 文件。Eclipse 可能类似。要将文件夹添加为源：

1.  右键单击项目
2.  选择属性
3.  在类别窗格中单击“来源”
4.  单击“添加文件夹”并选择您创建的资源文件夹

# jetty - 部署到根目录时将 / 重定向到 /index.jsp

> ID：10283266
> 
> 赞同：0
> 
> 时间：2012-04-23T15:14:25.823
> 
> 标签：jetty

我正在为 Jetty 6 中的 webapp 部署而苦苦挣扎。以前，webapp 被部署在`/mywebapp`其中，每次我访问`http://localhost/mywebapp/`Jetty 时都将我定向到`http://localhost/mywebapp/index.jsp`.

当我更改`contextPath`to 时`/`，突然重定向行为被破坏。相反，Jetty 会发出内部转发请求。

**有没有人有任何意见为什么会发生这种情况？**具有以下`DefaultServlet`设置：

```
<init-param>
  <param-name>dirAllowed</param-name>
  <param-value>false</param-value>
</init-param>
<init-param>
  <param-name>welcomeServlets</param-name>
  <param-value>false</param-value>
</init-param>
<init-param>
  <param-name>redirectWelcome</param-name>
  <param-value>true</param-value>
</init-param> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:17:55.247

事实证明，`contextPath`重定向失败的原因并不完全是变化。相反，我意识到只是添加`mywebapp.xml`到`$JETTY_HOME/contexts/`Jetty 的操作不会执行重定向。

我通过删除我的上下文 XML 文件克服了这个问题，而是通过重命名`$JETTY_HOME/webapps/mywebapp.war`解决`$JETTY_HOME/webapps/root.war`了这个问题。

不清楚为什么会发生这种情况，但我很高兴事情回到了正轨。

# eclipse - GWT_HOME variable setup problems

> ID：10283272
> 
> 赞同：1
> 
> 时间：2012-04-23T15:14:40.487
> 
> 标签：eclipse, gwt

i installed GWT using Eclipse wizard to be more precise, i followed this tutorial: [https://developers.google.com/web-toolkit/usingeclipse?hl=pt-PT](https://developers.google.com/web-toolkit/usingeclipse?hl=pt-PT)

I now have GWT working in my eclipse indigo release. But now i need to define the GWT_HOME variable (ambient variable) so i can run a project using a build file.

Because i installed the gwt plugin with the eclipse wizard, i don't know how to setup the ambient variable, because i can't seem to find the folder where gwt got installed.

I'm using eclipse indigo on windows 7.

Can anybody help me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:51:07.423

Maybe you used the update site for Eclipse 3.6 instead of 3.7

This one should be the correct one for Indigo: `http://dl.google.com/eclipse/plugin/3.7`

When you have installed GWT like described [here](https://developers.google.com/eclipse/docs/install-eclipse-3.7?hl=de) you just go into: **Eclipse > Preferences > Window Builder GWT** and in **GWT_HOME variable** you click Browse and select the gwt folder inside your Eclipse plugin directory.

(For example:

.../eclipse-modeling-indigo-sr2-64/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205091048-rel-r37/gwt-2.4.0/

)

You can also check the correct path under: **Eclipse > Preferences > Google > Web Toolkit**

Regards, Fachexot

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T23:13:18.733

I ran into the same problem on Linux running ant from the command line.

I got around the problem by running ant as: ant -Dgwt.sdk=$GWT_HOME war

FYI the line: is in build.xml.

I believe name property is not the way to set gwt.sdk variable. I.e., the problem is with:

Behdad

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:05:50.997

I am using Indigo 3.7, I could not find **Eclipse > Preferences > Window Builder GWT** (as suggested by fachexot), but I found that if I set the environment variable GWT_HOME in Windows 7 my ant would be able to use the value.

To set the environment variable, in Windows 7, type "environment" in the search box of "Start" and then click "Edit environment variables for your account", and then "New" a "User variable" called "GWT_HOME" (you have first look up the exact path to GWT folder inside your Eclipse plugin directory).

After that, remember to restart eclipse so that the new environment can be picked up by the program.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-01T12:36:39.510

On Mac OSX, if you want to access the variable from an ANT build as ${env.GWT_HOME} run from within Eclipse or some other IDE then you need to use launchctl as envoronment variables set per normal in NIX envoronments is not passed to OSX windows apps.

The simplest way to do this is add the following 2 lines to your .bashrc (replacing the path shown with the correct one for your install):

export GWT_HOME=${HOME}/.p2/pool/plugins/com.google.gwt.eclipse.sdkbundle_2.7.0/gwt-2.7.0

launchctl setenv GWT_HOME $GWT_HOME

# javascript - Dojo 以编程方式将 Grid 单元格设置为编辑模式

> ID：10283274
> 
> 赞同：0
> 
> 时间：2012-04-23T15:14:46.727
> 
> 标签：javascript, dojo

我需要以编程方式强制 dojo.grid 单元进入编辑模式。我一直在搜索文档和板，但我想念如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:37:04.660

我不确定您是否只能编辑单个单元格，但也许这个问题可以帮助您入门：[Dojo Grid - Switching between editable and not editable](https://stackoverflow.com/questions/3703573/dojo-grid-switching-between-editable-and-not-editable)

基本上，更改列以允许编辑归结为：

```
var columnToEdit=0;
var str = grid.structure;
str[0].cells[0][columnToEdit].editable=true;
grid.set("structure",str); 
```

链接的问题包含有关如何更改网格容器状态的更多信息和提示，以便您可以创建工作 UI。

# android - 在 4*3 网格中排列 12 个 RadioButton

> ID：10283275
> 
> 赞同：1
> 
> 时间：2012-04-23T15:14:47.100
> 
> 标签：android, radio-button, radio-group

我希望在 4*3 网格中排列 12 个 RadioButton。
所有的 RadioButtons 必须在一个 RadioGroup 中。

请给我一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:18:12.790

请参阅：[如何对 3x3 的单选按钮网格进行分组？](https://stackoverflow.com/questions/2381560/how-to-group-a-3x3-grid-of-radio-buttons)

也许这可以解决您的问题，否则我不会推荐 RadioButtons。自定义按钮“可以”在这种情况下也可以工作......

# jquery - 为什么 Jquery 会在加载图像后重新加载

> ID：10283283
> 
> 赞同：0
> 
> 时间：2012-04-23T15:15:05.180
> 
> 标签：jquery

那么在这个测试页面[http://bloghutsbeta.blogspot.com/2012/03/testing-2_04.html](http://bloghutsbeta.blogspot.com/2012/03/testing-2_04.html) 你可以看到图像只有在你滚动时才会加载，这是我想要的，然后我使用了一个回调函数，所以当有人点击按钮（自行车、摩托车等），脚本不会停止工作，而是使用回调函数。但这里有一个问题，我将解释它是什么：

如果您加载图像，然后单击这些按钮，它会重新加载图像，即使它们不是用户缓存的一部分，但它仍然会这样做。我知道它不是在加载图像，而只是让它看起来像是在加载，但这种效果仍然需要时间。有没有办法处理这个问题，所以要让它明白不要加载已经在用户缓存中的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:16:55.243

不要使用回调函数，我认为它会解决问题

# asp.net-mvc-3 - 将 jQuery Mobile 过渡添加到 ASP.Net MVC 表单

> ID：10283305
> 
> 赞同：1
> 
> 时间：2012-04-23T15:16:48.577
> 
> 标签：asp.net-mvc-3, jquery-mobile

如何将 jQuery Mobile 过渡添加到使用 ASP.Net MVC`Html.BeginForm`帮助器呈现的 HTML POST？

转换需要添加一个 HTML 属性`data-transition`（我认为是`form`标签，但文档在这一点上不清楚，只提供了[一个超链接示例](http://jquerymobile.com/test/docs/pages/page-transitions.html)）。

我正在尝试使用`BeginForm`重载向呈现的`form`标签添加属性。使用`new { ... }`语法声明表示 HTML 属性的匿名类时，如果属性名称中包含破折号，我会收到错误消息。

```
using (Html.BeginForm("Login", "Account", FormMethod.Post, 
    new {  data-transition="pop" })) 
```

错误：*无效的匿名类型成员声明符*

尽管[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd492714.aspx)显示了一个名称中带有破折号的属性，但这一点

```
new { id = "text1", accept-charset="iso-8859-1" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:20:43.063

创建字典：

```
using (Html.BeginForm("Login", "Account", FormMethod.Post, 
    new Dictionary<string, object>{{ "data-transition", "pop" }} )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:56:32.493

如果您更喜欢使用匿名对象来指定您的属性，那么您可以执行以下操作

```
using (Html.BeginForm("Login", "Account", FormMethod.Post, new { data_transition = "pop" } )) 
```

简而言之，您将连字符替换为下划线

# ruby - 没有 Rails 的 Sphinx 替代品

> ID：10283309
> 
> 赞同：0
> 
> 时间：2012-04-23T15:16:55.127
> 
> 标签：ruby, indexing, full-text-search, search-engine, sphinx

我需要像 Sphinx 这样的索引和搜索 gem，但不需要 Rails 有什么建议吗？它必须在 Windows 机器上的 Ruby 1.9.3 下运行。尝试了没有 Rails 的 Sphinx，但它需要 MySql 和大量配置，但没有成功。你能推荐一些使用内置数据库或像 Sqlite 这样的功能的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:23:37.123

虽然某些插件（如`thinking_sphinx`）是特定于 Rails 的，但 Sphinx 本身只是一个搜索服务器，您可以直接使用客户端 gem 来索引和搜索您想要的任何内容；它不需要在 ActiveRecord 中（顺便说一下，如果你愿意，你也可以在 Rails 之外使用它）。

另一种选择是[Apache Solr](http://lucene.apache.org/solr/)，它提供了与 Sphinx 类似的功能，包括复杂的搜索系统（支持词干提取和许多其他好东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:14:43.833

尽管无论您是否使用 Rails，Sphinx 本身都可以正常工作，但如果您在使用它时遇到困难，您可以随时尝试[Solr](http://lucene.apache.org/solr/)或[Elastic Search](https://github.com/elasticsearch/elasticsearch)之类的东西。我听说了关于后者的好消息，并且在 Windows 上运行它是非常微不足道的，就像你看起来的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:09:16.563

sphinx,solr 的另一种选择是[OpenSearchServer](http://www.open-search-server.com/)。基于lucene的搜索引擎。它有很好的windows支持。看看这里的文档[如何在 windows 中安装。](http://www.open-search-server.com/documentation/index.php/User_guide_-_Running_OpenSearchServer_on_Windows)您可以使用 API 集成到 Ruby 中。

# java - 将 Maven 工件部署到 /shared/lib 用于 Eclipse 调试？

> ID：10283316
> 
> 赞同：2
> 
> 时间：2012-04-23T15:17:08.520
> 
> 标签：java, eclipse, maven, jboss, m2e

我正在使用一些非常古老的单体软件，这些软件基本上是高度定制的 JBoss 部署。不幸的是，这意味着 JBoss 不能从 Eclipse 中的“服务器”视图启动，它必须作为 Windows 服务或通过命令行启动。有多个 WAR/EAR，但很少使用 WAR 类加载器，并且大多数实际类文件位于 jboss/shared/lib 作为 .jars。

我们需要一种在 Eclipse 中运行 Maven 构建（通过 m2e）并将生成的 .jar 中的类文件部署到 C:/product/jboss/shared/lib 的方法，这样当我们启动 JBoss 时，我们可以使用 Eclipse 进行调试（作为远程 java 应用程序）。理想情况下，Maven 推送的工件不会覆盖最初安装的现有 .jar 文件。例如，如果 Maven 项目构建了一个名为 myjar-1.0.0.jar 的工件，我们需要一种方法将 myjar-1.0.0.jar 中的类部署到 C:/product/jboss/shared/lib/classes它们是在与产品一起安装的 C:/product/jboss/shared/lib/myjar-1.0.0.jar 之前由类加载器拾取的。

目前，我们（*非常*hacky）的解决方案是这样的：

1.  在项目配置的`Java Build Path`>`Source`选项卡下，我们使用“符号链接”功能`Advanced`将`Default Output Directory`（例如项目/目标/类）映射到类文件夹（例如 C:/product/jboss/shared/lib/classFolder）。这会修改 .project 文件，该文件已签入源代码管理。

    ![符号链接疯狂](../Images/b4f7d909c5de4f4301dc500ddec3cc9e.png)

2.  我们通常使用 m2e 启动器构建项目（例如全新安装）。
3.  假设 Maven 构建成功，我们运行 Eclipse 项目构建。这会将类文件推送到 C:/product/jboss/shared/lib/classFolder：

    ![类文件夹](../Images/8426f9f1db1dc31415aedcb69bfcb441.png)

4.  我们重新启动 JBoss。由于 classFolders 优先于 jar，JBoss 将加载 C:/product/jboss/shared/lib/classFolder 中的类，这与我们的 Eclipse 工作区中的类相同。
5.  我们附加到 JBoss 并将项目作为远程 Java 应用程序进行调试。

* * *

优点：

*   我们能够将我们的新类推送到 JBoss 并对其进行测试，而无需备份原始 jar 并手动复制/粘贴新的（jar hell）。

缺点：

*   我们进行了两次编译——一次使用 maven-compiler-plugin，一次使用 Eclipse 项目构建（Java Builder）。
*   根据我的经验，符号链接功能会受到影响。有时我们需要做刷新项目/关闭项目/构建项目的舞蹈才能让它工作。

**有一个更好的方法吗？** 我不能强迫他们如此重地重组项目，以至于所有可部署的都是与容器无关的 WAR，但我们的开发人员需要能够进行更改并快速测试它们，而无需手动复制/粘贴 .jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:11:48.173

我会尝试查看有可能将工件复制到不同位置的[maven-dependency-plugin 。](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:08:36.097

几岁？

你看过 Cargo 插件吗？ [http://cargo.codehaus.org/Quick+start](http://cargo.codehaus.org/Quick+start)

它可以部署到 JBoss 3.x。它有一个 Java API，所以你应该能够写一些东西来扩展它来做你想做的事。

你为什么要部署类而不是 jar 文件？您仍然可以通过 Eclipse 使用 jar 文件进行远程调试。

最坏的情况 - 使用 Ant。Maven 不是为这种东西设计的，试图强迫它工作只会让你痛苦。
一旦让 Maven 生成了正确的工件，就可以手动确定要做什么，然后通过 Ant 编写脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:55:40.733

请检查您的部署程序集（项目 -> 属性 -> 部署程序集）并验证您的 maven 库是否存在。

# c++ - 代码无法使用 Android NDK 编译

> ID：10283318
> 
> 赞同：0
> 
> 时间：2012-04-23T15:17:09.657
> 
> 标签：c++, android-ndk, cocos2d-x

Cocos2d-x 是 Cocos2d-for-iPhone 的 C++ 端口。它具有跨平台的优势。我正在使用 Cocos2d-x 为 Android 和 iPhone 开发游戏。

现在我正在用 Android NDK 和 Xcode 编译一组 Cocos2d-X 代码。

在 Xcode 上，游戏在 iPhone 上编译和运行良好。

使用 Android NDK，编译会失败。（我使用的是官方的 Android r7c NDK）。

请帮忙。

![在此处输入图像描述](../Images/43240f6d8168a037e181ab620a1bd207.png)

编辑：对于那些对完整实现文件感兴趣的人。这里是。

```
#include "GameOverScene.h"
#include "HelloWorldScene.h"

using namespace cocos2d;

bool GameOverScene::init() {
    if (CCScene::init()) {
        this->_layer = GameOverLayer::node();
        this->_layer->retain();
        this->addChild(_layer);

        return true;
    } else {
        return false;
    }
}

GameOverScene::~GameOverScene () {
    if (_layer) {
        _layer->release();
        _layer = NULL;
    }
}

bool GameOverLayer::init () {
    if (CCLayerColor::initWithColor(ccc4f(255, 255, 255, 255))) {
        CCSize winSize = CCDirector::sharedDirector()->getWinSize();
        this->_label = CCLabelTTF::labelWithString("", "Artial", 32);
        _label->retain();
        _label->setColor(ccc3(0, 0, 0));
        _label->setPosition(ccp(winSize.width/2, winSize.height/2));
        this->addChild(_label);

        this->runAction(CCSequence::actions(CCDelayTime::actionWithDuration(3), CCCallFunc::actionWithTarget(this, callfunc_selector(GameOverLayer::gameOverDone)), NULL));

        return true;
    } else {
        return false;
    }
}

void GameOverLayer::gameOverDone() {
    CCDirector::sharedDirector()->replaceScene(HelloWorld::scene());
}

GameOverLayer::~GameOverLayer() {
    if (_label) {
        _label->release();
        _label = NULL;
    }
} 
```

以及完整的头文件

```
#ifndef S6_GameOverScene_h
#define S6_GameOverScene_h

#include "cocos2d.h"

class GameOverLayer : public cocos2d::CCLayerColor {

public:
    GameOverLayer():_label(NULL) {};
    virtual ~GameOverLayer();
    bool init();
    LAYER_NODE_FUNC(GameOverLayer);

    void gameOverDone();

    CC_SYNTHESIZE_READONLY(cocos2d::CCLabelTTF*, _label, Label);

};

class GameOverScene : public cocos2d::CCScene {

public:
    GameOverScene():_layer(NULL) {};
    ~GameOverScene();
    bool init();

    //SCENE_NODE_FUNC(GameOverScene);

    static GameOverScene* node()
    {
        GameOverScene *pRet = new GameOverScene();

        //Error: undefined reference to `GameOverScene::init()'
        if (pRet && pRet->init())
        {
            pRet->autorelease();
            return pRet;
        }
        else
        {
            //Error: undefined reference to `vtable for GameOverScene'
            delete pRet;

            pRet = NULL;
            return NULL;
        }
    }; 

    CC_SYNTHESIZE_READONLY(GameOverLayer*, _layer, Layer);
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:29:31.827

Android.mk 文件可能有问题。因为您需要添加 GameOverScene.h 文件进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:44:28.767

您可能会忘记在 Classed 文件夹中的 Android.mk 中添加 GameOverScene.cpp。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:42:01.800

> /Users/my_account_name/Desktop/Projects/S6/S6/android/jni/../../Classes/GameOver‌​Scene.h:40：未定义对 GameOverScene::init() 的引用

您必须链接到`GameOverScene`的目标文件。

# ios - SecTrustEvaluate 和 kSecTrustResultRecoverableTrustFailure(5) 或 kSecTrustResultUnspecified(4)

> ID：10283321
> 
> 赞同：2
> 
> 时间：2012-04-23T15:17:18.323
> 
> 标签：ios, macos, openssl, x509, pki

我正在使用 sha1WithRSAEncryption（即不是 MD5，根据[SecTrustEvaluate 在 iOS 5 上返回 kSecTrustResultRecoverableTrustFailure](https://stackoverflow.com/questions/7378271/sectrustevaluate-returns-ksectrustresultrecoverabletrustfailure-on-ios-5)）使用简单的 ca->subca->server 沿袭生成的服务器证书。

```
openssl req -new -x509 -subj /CN=ca/O=1002 -nodes -keyout /dev/stdout -set_serial 4 -days 3650  > ca-1002.pem
openssl req -new       -subj /CN=sub-ca/O=1002 -nodes -keyout subca-1002.pem -set_serial 5 -days 3650 | openssl x509 -CA ca-1002.pem -req -set_serial 1 >> subca-1002.pem
openssl req -new       -subj /CN=localhost:2002/O=1002 -nodes -keyout cert-1002.pem -set_serial 6 -days 3650 | openssl x509 -CA subca-1002.pem -req -set_serial 1 >> cert-1002.pem 
```

对于服务器；带有服务器 SSLCACertificateFile 的链和稍后将由 iPhone/iPad 应用程序读取的 DER 文件。

```
cat ca-1002.pem subca-1002.pem > chain-1002.pem
openssl x509 -in ca-1002.pem -outform DER -out ca-1002.der 
```

我确保我在评估中有发言权：

```
-(BOOL)connection:(NSURLConnection *)aConnection 
   canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)space
 {
     DLog(@" authenticationMethod: %@",[space authenticationMethod]);

     // nil/not set - rely on the keychain, set to an empty array indicates
     // we know what we're doing -and accept anything - otherwise a list
     // of certs gotten from reading in DER files.
     //
     NSArray *acceptableCAs = [delegate sslAcceptableServerCACertificates];

     if ([[space authenticationMethod] isEqualToString: NSURLAuthenticationMethodServerTrust]) {
         NSArray *acceptableCAs = [delegate sslAcceptableServerCACertificates];
         return acceptableCAs != nil ? YES : NO;
     }
     // Client cert stuff snipped.

     // the keychain is used.
     return NO;
} 
```

到目前为止，一切都很好。

```
-(void)connection:(NSURLConnection *)connection 
    didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSURLProtectionSpace * space = [challenge protectionSpace];

if ([space.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
{
    NSArray *acceptableCAs = [delegate sslAcceptableServerCACertificates];
    NSURLCredential *newCredential;

    if (acceptableCAs == nil) { ... }
        // We'll leave this to the keychain by doing nothing. (works splendidly)
    else if ([acceptableCAs count] == 0) { }
        // We'll accept 'anything' - or in this case - exactly this server.
        // (this works just fine). 
```

有效 - 但是当我明确指定 1 个或多个证书时 - 事情失败了：

```
 else {
        SecTrustRef secTrustRef =  challenge.protectionSpace.serverTrust;
        SecTrustResultType result;
        NSMutableArray * serverChain = [[NSMutableArray alloc] init];
        for(long i = 0; i < SecTrustGetCertificateCount(secTrustRef); i++) {
            SecCertificateRef cr = SecTrustGetCertificateAtIndex(secTrustRef, i);
            DLog(@"Server cert %04ld: %@", i, cr);
            DLog(@"     %@", [SimpleCertificate sha1fingerprint:cr]);
            [serverChain addObject:(__bridge id)(cr)];
        }

        for(NSUInteger i = 0; i < [acceptableCAs count]; i++) { .. dump these too }

        SecTrustSetAnchorCertificatesOnly(secTrustRef, YES);
        SecTrustSetAnchorCertificates(secTrustRef, (__bridge CFArrayRef)acceptableCAs);
//            SecTrustSetAnchorCertificatesOnly(secTrustRef, NO);
//            assert(SecTrustCreateWithCertificates((__bridge CFTypeRef)(serverChain), SecPolicyCreateSSL(YES, nil), &secTrustRef) == noErr);
//            assert(SecTrustCreateWithCertificates((__bridge CFTypeRef)(serverChain), SecPolicyCreateSSL(NO, nil), &secTrustRef) == noErr);
//            assert(SecTrustCreateWithCertificates((__bridge CFTypeRef)(serverChain), SecPolicyCreateBasicX509(), &secTrustRef) == noErr);
//            assert(SecTrustSetVerifyDate(secTrustRef, ...);

        assert(SecTrustEvaluate(secTrustRef, &result) == noErr);            
        DLog(@"SecTrustEvaluate gives us: %lu", result);

       .... 
```

我收到以下错误。SecTrustEvaluate 总是给我 5 分（有时是 4 分）。

尝试过各种建议；例如日期移位，验证它是 sha1 而不是 md5 等。

```
athAgstPrSp:] [Line 68]  authenticationMethod: NSURLAuthenticationMethodServerTrust
didRecAChlg:] [Line 98]  authenticationMethod: NSURLAuthenticationMethodServerTrust
didRecAChlg:] [Line 143] Server cert 0000: <cert(0xd637ce0) s: localhost:2002 i: sub-ca>
didRecAChlg:] [Line 144]      8D:21:95:20:11:D0:9C:27:86:56:B3:0B:A6:F7:A2:CF:4C:F6:67:64
didRecAChlg:] [Line 143] Server cert 0001: <cert(0xd638710) s: sub-ca i: ca>
didRecAChlg:] [Line 144]      30:58:8E:F9:B8:29:5E:84:46:E3:0B:98:0D:B0:28:23:3D:7E:86:A3
didRecAChlg:] [Line 143] Server cert 0002: <cert(0xd638af0) s: ca i: ca>
didRecAChlg:] [Line 144]      8E:A2:D9:13:AF:8B:AE:82:1C:39:E9:79:72:98:2A:B4:C0:17:0D:F0
didRecAChlg:] [Line 150] CA cert 0000: <cert(0xf0397f0) s: ca i: ca>
didRecAChlg:] [Line 151]      8E:A2:D9:13:AF:8B:AE:82:1C:39:E9:79:72:98:2A:B4:C0:17:0D:F0
didRecAChlg:] [Line 159] SecTrustEvaluate gives us: 5 
```

注意 - 我试图避免与主要答案的 SHA1 进行手动比较： [SecTrustEvaluate() 在应用程序钥匙串中查找根证书吗？](https://stackoverflow.com/questions/4669255/does-sectrustevaluate-look-for-root-certificates-in-the-application-keychain)尽可能干净地依赖钥匙串等等。因为我还有其他几个涉及芯片卡和钥匙串的用例。上面示例中的主机名匹配。在上面 - 服务器 001..003 证书与 openssl s_client 看到的 1:1 匹配；并且 CA 证书确实是提供的 DER 文件（与服务器刷新的 CA 证书 002 相同）。我们还尝试在 CA 和客户端上设置 SubjectAltNames；并没有看到有什么不同（如 SecTrustEvaluate 所建议的，[总是返回 kSecTrustResultRecoverableTrustFailure 和 SecPolicyCreateSSL](https://stackoverflow.com/questions/7900896/sectrustevaluate-always-returns-ksectrustresultrecoverabletrustfailure-with-secp)) 这是有道理的，因为我们知道在钥匙串/配置文件中手动导入它们会使相同的证书作为默认钥匙串对象工作得非常好。

欢迎任何和所有建议。在 NSURLConnectionDelegate 中寻找一种简洁的方式来接受钥匙串、接受“任何东西”或只接受特定的东西。

谢谢，

德。

# javascript - Knockout JS - 类名中带有破折号的 CSS 绑定

> ID：10283328
> 
> 赞同：37
> 
> 时间：2012-04-23T15:17:40.640
> 
> 标签：javascript, html, knockout.js

如果条件为真，我在 Knockout 中有一个数据绑定来应用 CSS 类。当我在类名（例如 test-class）中使用破折号时，我得到一个 javascript 错误。

这是一个演示问题的小提琴：http: [//jsfiddle.net/sgvem/2/](http://jsfiddle.net/sgvem/2/)

```
<p data-bind="text: property, css: { with-dash: property().length > 0 }"></p> 
```

有没有办法使用 Knockout JS 添加带有破折号的类？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-23T15:19:57.100

只需将其放在引号中：

```
<p data-bind="text: property, css: { 'with-dash': property().length > 0 }"></p> 
```

这是一个[更新的小提琴](http://jsfiddle.net/sgvem/3/)。

作为旁注，您不需要`> 0`因为 a`length`将`0`评估为`false`，并且任何其他长度将评估为`true`：

```
<p data-bind="text: property, css: { 'with-dash': property().length }"></p> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T15:20:04.740

您可以使用 ' 限定名称

像这样：

```
<p data-bind="text: property, css: { 'with-dash': property().length > 0 }"></p> 
```

你的小提琴，[更新](http://jsfiddle.net/sgvem/4/)

以下是解释 CSS 绑定的 Knockout 文档：http: [//knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html)

# sql - SQL Timeout Period Elapsed - 间歇性问题

> ID：10283331
> 
> 赞同：0
> 
> 时间：2012-04-23T15:17:51.403
> 
> 标签：sql, stored-procedures, timeoutexception

我在从 SQL dB 检索产品的 SQL 存储过程中遇到间歇性问题。我们有大约 3500 个活跃用户，并且通常有大约 15-30 个用户使用该程序一次登录。在过去的一周里，我收到了超时过期的消息，如下所示：

> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。在 System.Data.SqlClient.SqlConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) 在 System .Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() 在 System.Data.SqlClient.SqlDataReader.get_MetaData() 在 System .Data.SqlClient.SqlCommand.FinishExecuteReader（SqlDataReader ds，RunBehavior runBehavior，

SP 一次带回 12 个产品（如果选择下拉框，则更多），当我手动运行时运行速度很快。在过去的一周中，这可能发生了 20 次，不同的用户，在一天中的不同时间，因此我在运行程序或使用测试帐户浏览网站时无法重新创建错误。我在某处读到添加 NOLOCK 或增加命令超时可能会解决它，但这只是一个快速掩盖，而不是解决根本问题（更不用说 NOLOCK 的不良数据影响）。

显示产品的 SQL 部分在这里：

```
 INSERT INTO @Products (WWHEAD, WWPROD, WWDESC, CTNQTY, PRC1, PRC4, [FILENAME], DPQIS, QTYL, FileReference, LineId, Price5, PriceGroup, Dimensions)                  
(SELECT A.WWHEAD, A.WWPROD, A.WWDESC, A.CTNQTY, 
        CASE WHEN @IsPrice5 = 5 THEN LTRIM(RTRIM(A.Price5)) ELSE LTRIM(RTRIM(A.PRC1)) END,          
        CASE WHEN @IsPrice5 = 5 THEN A.Price5 ELSE A.PRC4 END, 
        [FILENAME],
        (CAST((DPQIS-DPALOC) AS INT)), 
        D.QTY,
        'WebImage',
        LineId,
        CASE WHEN @IsPrice5 = 5 OR A.Price5 = A.PRC4 THEN NULL ELSE A.PRICE5 END,
        LTRIM(RTRIM(PG.PriceCode)) + ' ' + LTRIM(RTRIM(PG.GroupDesc)) + ' ' + LTRIM(RTRIM(PG.DiscDesc)),
        Dimensions
FROM    PRODUCTS A 
        INNER JOIN STOCK C ON A.WWPROD = C.DPPROD AND DPDEPO = 'CH'
        INNER JOIN PROD_COPY W ON A.WWPROD = W.WWPROD 
        INNER JOIN PRODGRP PD ON PD.GPNUM = W.WWPRGP
        LEFT OUTER JOIN ORDERS D ON D.OrderID = @OrdId AND A.WWPROD = D.ProdCode
        LEFT OUTER JOIN PRGRP PG ON  A.WWPCGP = PG.PriceCode
        LEFT OUTER JOIN PRODALT_GRP X ON X.ProdCode = A.WWPROD  
WHERE   A.WWBONS = 'B'
AND     A.WSID = 'WS'
AND     (LTRIM(RTRIM(A.WWHEAD)) = LTRIM(RTRIM(@CatHead)) OR ISNULL(@CatHead, '0') = '0')
AND     (LTRIM(RTRIM(A.WWSBHD)) = LTRIM(RTRIM(@CatSub)) OR ISNULL(@CatSub, '0') = '0')      
AND     (LEFT(LTRIM(RTRIM(A.WWPRGP)), 2) = LTRIM(RTRIM(@BrandT1)) OR ISNULL(@BrandT1, '0') = '0')
AND     (LTRIM(RTRIM(A.GRPTR2)) = LTRIM(RTRIM(@BrandT2)) OR ISNULL(@BrandT2, '0') = '0')
AND     (LTRIM(RTRIM(A.GRPTR3)) = LTRIM(RTRIM(@BrandT3)) OR ISNULL(@BrandT3, '0') = '0')        
AND     X.AltGroupCode = @ProductFilter
AND     A.PRC1 BETWEEN @MinValue AND @MaxValue
AND     A.WWHEAD <> 'B20'   
AND     (A.WWDESC Like ('%' + @SearchString + '%') OR A.WWPROD LIKE ('%' + @SearchString + '%') 
    OR A.WWPROD IN (SELECT Prodcode FROM WDS..Prod_Keywords INNER JOIN WDS..Keywords ON KeyID = KeywordID WHERE Keyword LIKE ('%' + @SearchString + '%')))                          
AND     A.WWBRN NOT IN (SELECT * from WDS.dbo.f_BrandExclusionList(@WebUserName, NULL))
AND     CAST(CASE WHEN NDATMM = '' THEN '01' ELSE NDATMM END + '-' 
            + CASE WHEN NDATDD = '' THEN '01' ELSE NDATDD END + '-' 
            + CASE WHEN NDATYY = '' THEN '1900' ELSE NDATYY END AS DATETIME) BETWEEN @threemonths AND GETDATE()
GROUP BY PD.GPSORT, A.WWHEAD, A.WWPROD, A.WWDESC, A.CTNQTY, A.PRC1, A.PRC4, [FILENAME], C.DPQIS, C.DPALOC, D.QTY, 
        LineId, A.Price5, PG.PriceCode, PG.GroupDesc, PG.DiscDesc, A.WWSBHD, A.WWBRN, 
        A.GRPTR2, A.GRPTR3, A.WWSORT, A.WWPCGP, Dimensions
HAVING  ((A.PRC1 > 20.00 AND ((DPQIS-DPALOC) > 2)) OR (A.PRC1 <= 20.00 AND ((DPQIS-DPALOC) > 8))))
ORDER BY PD.GPSORT, A.WWBRN, A.GRPTR2, A.GRPTR3, A.WWPCGP DESC, A.WWHEAD, A.WWSBHD, A.WWSORT, A.WWPROD 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:34:00.843

你有相关的代码吗？建立了多少个并发连接，您确定执行完成后连接正在关闭吗？

# iphone - 我是否需要昂贵的企业开发者帐户才能使用 TestFlightApp 进行 beta 测试？

> ID：10283333
> 
> 赞同：0
> 
> 时间：2012-04-23T15:17:52.510
> 
> 标签：iphone, ios, adhoc, ad-hoc-distribution, testflight

我还不明白 TestFlightApp 如何设法将我的应用程序发送给我通过电子邮件邀请的任何测试人员。实际上，AdHoc Distribution 仅限于 100 台设备，我在这里和那里读到了有关企业签名 IPA 的无限制 beta 测试。

所以我需要企业帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:20:00.460

你不可以。它适用于常规开发人员帐户。我用它所有的时间。

但是，您仅限于 100 名测试人员，TestFlight 无法解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:20:46.793

只要您需要不超过 100 台测试设备，免费版就可以了！

# c# - 如何在 AspNetActiveDirectoryMembershipProvider 提供程序中传递/设置 UserPrincipalName 属性

> ID：10283335
> 
> 赞同：0
> 
> 时间：2012-04-23T15:17:54.033
> 
> 标签：c#, asp.net, asp.net-mvc, active-directory, asp.net-membership

`UserPrincipalName`默认提供者为`AspNetActiveDirectoryMembershipProvider`.

以下是`CreateUser`方法列表`System.Web.Security.Membership`

```
public static MembershipUser CreateUser(string username, string password);
public static MembershipUser CreateUser(string username, string password, string email);
public static MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, out MembershipCreateStatus status);
public static MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:25:04.527

根据[ActiveDirectoryMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx) MSDN 文档，`UserName`属性映射到`userPrincipalName`属性。

# php - PHP：下拉框中的选定值

> ID：10283336
> 
> 赞同：0
> 
> 时间：2012-04-23T15:17:55.930
> 
> 标签：php, html, html-select

我正在做一个下拉框，假设我们有“option1”和“option2”，下拉框选择（标记）“option1”，然后我们选择“option2”，我希望它标记“option2”在下拉框中，但它没有标记它。

我试图避免在这个上做 javascript，所以我想知道我是否只能在 PHP 上做。

建议？谢谢！

编辑。那么问题是我不知道在构建下拉菜单之前我有多少选项。我得到一个从数据库中的表生成的数组，并根据它做出选项。代码：

```
<select name="department">
            <?php foreach(bloggModelControler::getDepartments($_SESSION['user']) as $tempDepartment){
                if(strcmp($tempDepartment, $department) == 0){
                    $selected = ".selected='selected'.";
                }else{
                    $selected = ".selected=''.";
                }
                $dropdown = "<option \"$selected\" value=\"$tempDepartment\">\"$tempDepartment\" Selected</option>";
                echo $dropdown;
}?>         
</select> 
```

和$部门：

```
<?php
        if(isset($_POST['department'])){
            $department = $_POST['department'];
        }else{
            $departments = bloggModelControler::getDepartments($_SESSION['user']);
            $department = $departments[0];
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:25:11.800

**根据更新的问题更新答案（包含代码）**

不要将句点放在“已选择”的文本变量中。

```
if(strcmp($tempDepartment, $department) == 0){
                $selected = "selected='selected'";
            }else{
                $selected = "selected=''";
            } 
```

**上一个答案**

在为选择框生成 HTML 的 PHP 代码中，您必须指定选择了哪个选项。

例如：

```
<select name="selectbox">
  <option <?php if ($_POST['selectbox'] == 'option1') echo 'selected="selected"';?>>option1</option>
  <option <?php if ($_POST['selectbox'] == 'option2') echo 'selected="selected"';?>>option2</option>
</selected> 
```

替代语法：

```
<select name="selectbox">
  <option <?= ($_POST['selectbox'] == 'option1')? 'selected="selected"' : '';?>>option1</option>
  <option <?= ($_POST['selectbox'] == 'option2')? 'selected="selected"' : '';?>>option2</option>
</selected> 
```

# php - Wordpress 正在生成 400 像素 x 300 像素的缩略图，我该如何将其更改为 210 像素 x 210 像素

> ID：10283343
> 
> 赞同：0
> 
> 时间：2012-04-23T15:18:16.783
> 
> 标签：php, html, css, wordpress

我有一个主题，使用下面的代码将帖子显示为缩略图，但它以错误的比例（400px x 300px）裁剪它，我不知道是什么告诉它这样做。我将如何更改以 210px x 210px 生成的缩略图？

```
<?php

    foreach($all_photo_arr as $key => $portfolio_item)
    {
        $cur_post++;
        $image_url = '';

        if(has_post_thumbnail($portfolio_item->ID, 'portfolio2'))
        {
            $image_id = get_post_thumbnail_id($portfolio_item->ID);
            $image_url = wp_get_attachment_image_src($image_id, 'portfolio2', true);
            $full_image_url = wp_get_attachment_image_src($image_id, true);
        }

        $last_class = '';
        $line_break = '';
        if(($key+1) % 4 == 0)
        {   
            $last_class = ' last';
            $line_break = '<br class="clear"/>';
        }

        $portfolio_link_url = get_post_meta($portfolio_item->ID, 'portfolio_link_url', true);

        if(empty($portfolio_link_url))
        {
            $permalink_url = get_permalink($portfolio_item->ID);
        }
        else
        {
            $permalink_url = $portfolio_link_url;
        }

        $portfolio_item_class = 'one_fourth';
        if(($key+1) % 4 == 0)
        {   
            $portfolio_item_class.= ' last';
        }

        $pp_portfolio_image_height = 210;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:52:49.423

您可以在设置 > 媒体中更改缩略图大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:26:34.957

这可能会有所帮助：

[http://wordpress.org/support/topic/change-featured-image-size-only-on-homepage](http://wordpress.org/support/topic/change-featured-image-size-only-on-homepage)

# asp.net - 无法在 ListView ItemEditing 中找到 FindControl()

> ID：10283346
> 
> 赞同：1
> 
> 时间：2012-04-23T15:18:23.870
> 
> 标签：asp.net, listview, listviewitem, findcontrol

我在 ASP.NET Web 应用程序中有一个 ListView。当用户单击编辑按钮时，我希望弹出取决于项目某些值的文本字段。但是，我似乎在我的 ListView1_ItemEditing() 函数中找不到任何控件。

我已阅读 Internet 上的 Microsoft 文档和各种帮助主题，但他们的建议似乎对我不起作用。这通常是我看到的：

```
ListViewItem item = ProductsListView.Items[e.NewEditIndex];
Label dateLabel = (Label)item.FindControl("DiscontinuedDateLabel"); 
```

为了简单起见，我只想能够在 ListView1_ItemEditing() 中选择一个标签。这是 ListView1_ItemEditing() 中的代码：

```
protected void ListView1_ItemEditing(Object sender, ListViewEditEventArgs e)
{
    DataBind(); //not sure if this does anything
    ListViewItem item = ListView1.Items[e.NewEditIndex];
    Label debugLabel = (Label)item.FindControl("label_editing");
    debugLabel.Text = "Works";
} 
```

这是ASP

```
<EditItemTemplate>
   <asp:Label ID="label_editing" runat="server" Text="hello world"></asp:Label>
</EditItemTemplate> 
```

调试时，item 和 debugLabel 都为 NULL。

更新：我通过将我的逻辑移动到 ItemDataBound 然后检查我的 tr （包含文本框）是否在该特定数据项中解决了这个问题。下面的代码：

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            Control tr_verizon = e.Item.FindControl("tr_verizonEdit");
            Control tr_att = e.Item.FindControl("tr_attEdit");
            if (tr_verizon != null)
            {
                //Control tb_meid = e.Item.FindControl("TextBox_Meid");
                Label lbl_carrierId = (Label)e.Item.FindControl("lbl_carrierId");
                if (lbl_carrierId == null)
                {
                    Message.Text = "lbl_carrierId is null!";
                }
                else if (lbl_carrierId.Text.Equals(""))
                {
                    Message.Text = "lbl_carrierId is empty!";
                }
                else
                {
                    string recordId = lbl_carrierId.Text;

                    if (tr_verizon != null && tr_att != null)
                    {
                        if (lbl_carrierId.Text.Equals("1"))
                        {
                            tr_verizon.Visible = false;
                            tr_att.Visible = true;
                        }
                        else
                        {
                            tr_verizon.Visible = true;
                            tr_att.Visible = false;
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:45:45.277

`ItemEditing`单击项目的“编辑”按钮时引发该事件，但在 ListView 项目进入编辑模式之前。因此，此时控件`EditItemTemplate`不可用。

[更多信息和示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemediting.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:57:33.653

您应该首先执行 DataBind()，如下所示：

```
 ListView1.EditIndex = e.NewEditIndex;
    ListView1_BindData(); // a function that get the DataSource and then ListView1.DataBind() 
```

// 现在像以前一样找到控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:15:42.483

您是否尝试过投射`sender`对象而不是尝试通过索引访问您的 ListViewItem？

```
protected void ListView1_ItemEditing(Object sender, ListViewEditEventArgs e)
{
    var item = sender as ListViewItem;
    var debugLabel = item.FindControl("label_editing") as Label;
    debugLabel.Text = "Works";
} 
```

# java - 文本分析中的异常取决于 JComboBox 所选值的长度

> ID：10283349
> 
> 赞同：0
> 
> 时间：2012-04-23T15:18:33.073
> 
> 标签：java, swing, nullpointerexception, jcombobox, actionlistener

我对这个优越的网站感到非常惊讶！

我的目标是获取一个 .txt 文件，将其读入，根据选择的“窗口大小”（多少个字符，由 jcombobox 选择）将其切割成单个字符串，然后按频率列出。通过调试，它会在注释被标记的地方停止。我无法消除那些抛出的异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at xxxx.Babbles_GUI.windowSize(Babbles_GUI.java:247)    at
xxxx.Babbles_GUI.actionPerformed(Babbles_GUI.java:203)  at
javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at
javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at
javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at
javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at
javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6375)    at
javax.swing.JComponent.processMouseEvent(JComponent.java:3267)  at
java.awt.Component.processEvent(Component.java:6140)    at
java.awt.Container.processEvent(Container.java:2083)    at
java.awt.Component.dispatchEventImpl(Component.java:4737)   at
java.awt.Container.dispatchEventImpl(Container.java:2141)   at
java.awt.Component.dispatchEvent(Component.java:4565)   at
java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at
java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)    at
java.awt.Window.dispatchEventImpl(Window.java:2482)     at
java.awt.Component.dispatchEvent(Component.java:4565)   at
java.awt.EventQueue.dispatchEventImpl(EventQueue.java:684)  at
java.awt.EventQueue.access$000(EventQueue.java:85)  at
java.awt.EventQueue$1.run(EventQueue.java:643)  at
java.awt.EventQueue$1.run(EventQueue.java:641)  at
java.security.AccessController.doPrivileged(Native Method)  at
java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at
java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:657)   at
java.awt.EventQueue$2.run(EventQueue.java:655)  at
java.security.AccessController.doPrivileged(Native Method)  at
java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:654)   at
java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at
java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at
java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at
java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at
java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

## 代码

```
public class Analysis {

    /**
     * @param file
     */
    public static void analyze(File file, int windowSize) {
        ArrayList<String> splittedText = new ArrayList<String>();
        System.out.println(windowSize);

        StringBuffer buf = new StringBuffer();
        if (file.exists()) {
            try {
                FileInputStream fis = new FileInputStream(file);
                InputStreamReader isr = new InputStreamReader(fis,
                        Charset.forName("UTF-8"));
                BufferedReader reader = new BufferedReader(isr);
                String line = "";
                while ((line = reader.readLine()) != null) {
                    buf.append(line);
                    splittedText.add(line);
                }
                reader.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        String wholeString = buf.toString();

        // for (int i = 0; i < wholeString.length(); i += (Babbles_GUI
        // .WindowSize())) {
        // splittedText.add(wholeString.substring(
        // i,
        // Math.min(i + (Babbles_GUI.WindowSize()),
        // wholeString.length())));
        // }

//      for (int i = 0; (i < wholeString.length()-(Babbles_GUI.WindowSize())); i += Babbles_GUI.WindowSize()) {
//          splittedText.add(wholeString.substring(i, Math.min(Babbles_GUI.WindowSize()+i, wholeString.length())));
//      }

        for(int i = 0; i<wholeString.length()-(windowSize); i++){
            splittedText.add(wholeString.substring(i, i+windowSize));
        }
        System.out.println("error");

        Set<String> unique = new HashSet<String>(splittedText);
        for (String key : unique) {
            Babbles_GUI.txtAnalysis.append(Collections.frequency(splittedText,
                    key) + "x  " + key + "\t" + "\t");

        }
        Babbles_GUI.txtLog.append("Text analyzed with WindowSize "
                + windowSize + "\n");

    }
} 
```

### Babbles_GUI

```
public class Babbles_GUI extends JFrame implements ActionListener {

    private static final long serialVersionUID = 1L;
    JFileChooser fc1;
    JButton btnFileCh;
    JButton btnOutput;
    JLabel lblBtnLabel;
    static JTextArea txtLog;
    static JTextArea txtOrig;
    static JTextArea txtAnalysis;
    JTextArea txtGenerated;
    static JComboBox cbxWindowSize;
    BorderLayout borderlayout;
    JScrollPane ScrLog;
    private JPanel pnWest;
    private JPanel pnEast;
    private JPanel pnNorth;
    private JPanel pnCenter;
    private JPanel pnSouth;

    static int numberofchars;

    public Babbles_GUI(String title) {

        this.setTitle(title);
        this.setSize(1200, 2400);
        this.createUI();
        this.setVisible(true);
        this.setResizable(false);
        this.pack();
        this.setLocation(
                (Toolkit.getDefaultToolkit().getScreenSize().width - this
                        .getSize().width) / 2, (Toolkit.getDefaultToolkit()
                        .getScreenSize().height - this.getSize().height) / 2);

        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

    }

    /**
     * 
     */
    private void createUI() {

        btnFileCh = new JButton("Open...");
        // btnFileCh.setForeground(Color.BLACK);
        btnFileCh.setFont(new Font("Monospaced", Font.PLAIN, 14));
        btnFileCh.setPreferredSize(new Dimension(100, 20));
        btnFileCh.addActionListener(this);

        lblBtnLabel = new JLabel("Number of letters to shuffle: ");
        lblBtnLabel.setFont(new Font("Monospaced", Font.BOLD, 14));
        lblBtnLabel.setForeground(Color.WHITE);

        txtLog = new JTextArea();
        txtLog.setBackground(getBackground());
        txtLog.setBackground(Color.BLACK);
        txtLog.setForeground(Color.WHITE);
        txtLog.setWrapStyleWord(true);
        txtLog.setLineWrap(true);
        txtLog.setFont(new Font("Monospaced", Font.PLAIN, 13));
        JScrollPane spTxtlog = new JScrollPane(txtLog);
        spTxtlog.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);
        spTxtlog.setBorder(BorderFactory.createMatteBorder(5, 0, 0, 0,
                Color.RED));

        txtOrig = new JTextArea();
        txtOrig.setEditable(false);
        txtOrig.setWrapStyleWord(true);
        txtOrig.setLineWrap(true);
        txtOrig.setBackground(Color.BLACK);
        txtOrig.setForeground(Color.WHITE);
        txtOrig.setFont(new Font("Monospaced", Font.PLAIN, 15));
        txtOrig.setBorder(BorderFactory.createMatteBorder(10, 0, 0, 0,
                Color.BLUE));

        txtAnalysis = new JTextArea();
        txtAnalysis.setEditable(false);
        txtAnalysis.setWrapStyleWord(true);
        txtAnalysis.setLineWrap(true);
        txtAnalysis.setBackground(Color.BLACK);
        txtAnalysis.setForeground(Color.WHITE);
        txtAnalysis.setFont(new Font("Monospaced", Font.PLAIN, 15));
        txtAnalysis.setBorder(new EmptyBorder(20, 0, 0, 20));
        JScrollPane spTxtAn = new JScrollPane(txtAnalysis);
        spTxtAn.setBorder(BorderFactory.createMatteBorder(10, 0, 0, 0,
                Color.GREEN));

        btnOutput = new JButton("Generate");
        btnOutput.addActionListener(this);
        btnOutput.setForeground(Color.BLACK);
        btnOutput.setFont(new Font("Monospaced", Font.PLAIN, 14));
        btnOutput.setPreferredSize(new Dimension(100, 20));

        String[] item = { "WindowSize 1", "WindowSize 2", "WindowSize 3",
                "WindowSize 4", "WindowSize 5", "WindowSize 6", "WindowSize 7" };
        JComboBox cbxWindowSize = new JComboBox(item);
        cbxWindowSize.setFont(new Font("Monospaced", Font.PLAIN, 14));
        cbxWindowSize.setPreferredSize(new Dimension(200, 20));
        Box bxLeft = Box.createHorizontalBox();
        bxLeft.add(lblBtnLabel);
        bxLeft.add(cbxWindowSize);

        Box bxCenter = Box.createHorizontalBox();
        bxCenter.add(btnFileCh);

        Box bxRight = Box.createHorizontalBox();
        bxRight.add(btnOutput);

        txtGenerated = new JTextArea();
        txtGenerated.setEditable(false);
        txtGenerated.setBackground(Color.BLACK);
        txtGenerated.setForeground(Color.WHITE);
        txtGenerated.setBorder(BorderFactory.createMatteBorder(10, 0, 0, 0,
                Color.YELLOW));

        pnWest = new JPanel();
        pnEast = new JPanel();
        pnNorth = new JPanel();
        pnCenter = new JPanel();
        pnSouth = new JPanel();

        pnWest.setLayout(new BorderLayout());
        pnWest.setBorder(new EmptyBorder(0, 0, 0, 10));
        pnWest.setBackground(Color.BLACK);
        pnEast.setLayout(new BorderLayout());
        pnEast.setBorder(new EmptyBorder(0, 10, 0, 0));
        pnEast.setBackground(Color.BLACK);
        pnNorth.setLayout(new FlowLayout(FlowLayout.LEFT));
        pnNorth.setBackground(Color.BLACK);
        pnCenter.setLayout(new BorderLayout());
        pnCenter.setBackground(Color.BLACK);
        pnSouth.setLayout(new BorderLayout());

        try {
            this.fc1 = new JFileChooser();
            fc1.setFileFilter(new FileNameExtensionFilter(null, "txt"));

        } catch (IllegalArgumentException e) {
            txtOrig.append("");
            txtLog.append("File format must be .txt" + "\n");

        }
        pnNorth.add(bxLeft);
        pnNorth.add(bxCenter);
        pnNorth.add(bxRight);

        pnSouth.add(spTxtlog, BorderLayout.SOUTH);

        pnWest.add(txtOrig, BorderLayout.CENTER);
        pnWest.setPreferredSize(new Dimension(400, 700));

        pnCenter.add(spTxtAn, BorderLayout.CENTER);
        pnCenter.setPreferredSize(new Dimension(400, 700));

        pnEast.add(txtGenerated, BorderLayout.CENTER);
        pnEast.setPreferredSize(new Dimension(400, 700));

        borderlayout = new BorderLayout();
        borderlayout.setHgap(30);
        borderlayout.setVgap(3);
        setBackground(Color.BLACK);

        getContentPane().setLayout(borderlayout);
        getContentPane().add(pnEast, BorderLayout.EAST);
        getContentPane().add(pnWest, BorderLayout.WEST);
        getContentPane().add(pnNorth, BorderLayout.NORTH);
        getContentPane().add(pnCenter, BorderLayout.CENTER);
        getContentPane().add(pnSouth, BorderLayout.SOUTH);

    }

    @Override
    public void actionPerformed(ActionEvent e) {

        if (e.getSource() == btnFileCh) {
            int returnVal = fc1.showOpenDialog(Babbles_GUI.this);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File file = fc1.getSelectedFile();
                txtLog.append(file.getName() + " opened" + "\n");
                printOrigFile(file);
                //DEBUG-STOP**********************************
                Analysis.analyze(file, windowSize());
            } else {
                txtLog.append("Open command cancelled by user" + "\n");
            }
            txtLog.setCaretPosition(txtLog.getDocument().getLength());
        }

    }

    public static void main(String[] args) {
        new Babbles_GUI("Babbles Exercise David Huser");

    }

    /**
     * @param file
     * @return
     */
    public String printOrigFile(File file) {

        StringBuffer buf = new StringBuffer();
        if (file.exists()) {
            try {
                FileInputStream fis = new FileInputStream(file);
                InputStreamReader isr = new InputStreamReader(fis,
                        Charset.forName("UTF-8"));
                BufferedReader reader = new BufferedReader(isr);
                String line = "";
                while ((line = reader.readLine()) != null) {
                    buf.append(line + "\n");
                }
                reader.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        txtOrig.setText(buf.toString());
        return (buf.toString());
    }

    public int windowSize() {
        if (cbxWindowSize.getSelectedItem().equals("WindowSize 1")) {
            numberofchars = 1;
        } else if (cbxWindowSize.getSelectedItem().equals("WindowSize 2")) {
            numberofchars = 2;
        } else if (cbxWindowSize.getSelectedItem().equals("WindowSize 3")) {
            numberofchars = 3;
        } else if (cbxWindowSize.getSelectedItem().equals("WindowSize 4")) {
            numberofchars = 4;
        } else if (cbxWindowSize.getSelectedItem().equals("WindowSize 5")) {
            numberofchars = 5;
        } else if (cbxWindowSize.getSelectedItem().equals("WindowSize 6")) {
            numberofchars = 6;
        } else if (cbxWindowSize.getSelectedItem().equals("WindowSize 7")) {
            numberofchars = 7;
        }
        return numberofchars;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:28:53.353

您有一个在 中为 null 的对象`windowSize()`。你确定`cbxWindowSize`是初始化？

另一种可能性是没有选定的项目。`getSelectedItem()`在这种情况下将返回 null。您需要检查这一点，而不是立即调用`equals()`结果。

**编辑：**

```
String[] item = { "WindowSize 1", "WindowSize 2", "WindowSize 3",
            "WindowSize 4", "WindowSize 5", "WindowSize 6", "WindowSize 7" };
JComboBox cbxWindowSize = new JComboBox(item); 
```

这定义了一个新的局部变量并对其进行初始化。局部变量隐藏了同名的类变量。从行首删除`JComboBox`。

# hashtable - Ocaml中可变变量的哈希表

> ID：10283350
> 
> 赞同：6
> 
> 时间：2012-04-23T15:18:34.353
> 
> 标签：hashtable, ocaml, mutable

我需要在 Ocaml 中使用可变变量的哈希表，但它不起作用。

```
let link = Hashtbl.create 3;;
let a = ref [1;2];;
let b = ref [3;4];;
Hashtbl.add link a b;;

# Hashtbl.mem link a;;
- : bool = true

# a := 5::!a;;
- : unit = ()

# Hashtbl.mem link a;;
- : bool = false 
```

有没有办法让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T15:22:52.903

您可以使用函数接口，它可以让您提供自己的哈希和相等函数。然后，您编写仅基于值的非可变部分的函数。在这个例子中，没有*不可*变的部分。因此，您希望在表格中找到什么并不是特别清楚。但是在一个更现实的例子中（根据我的经验），您可以使用一些不可变的部分。

如果没有任何不可变的部分，您可以专门添加它们以用于散列。例如，您可以为每个值添加任意唯一整数。

也可以基于物理相等（==）进行散列，它对引用（和其他可变值）有合理的定义。但是，您必须小心，因为身体上的平等有点棘手。例如，您不能将值的物理地址用作散列键——地址可能会因垃圾收集而随时更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T00:24:49.757

可能恰好具有相同内容的可变变量仍然可以区分，因为它们存储在内存中的不同位置。它们可以与物理相等运算符 ( `==`) 进行比较。然而，OCaml 没有提供比相等更好的东西，它没有提供非平凡的散列函数或引用顺序，因此您可以构建来存储引用的唯一数据结构是某种形式的关联列表，带有 $\Theta( n)$ 大多数用途的访问时间。

（如果你玩得很脏，你实际上可以得到底层指针。但是指针可以在你的脚下移动。但是有一种方法可以利用它，但是如果你需要问，你不应该使用它。而且你无论如何都不够绝望。）

如果两个不同的引用具有不同的内容，则比较引用将很容易。所以就这样吧！为您的参考文献添加唯一标识符。保留一个全局计数器，每次创建引用时将其递增 1，并将计数器值与数据一起存储。现在您的引用可以通过它们的计数器值来索引。

```
let counter = ref 0
let new_var x = incr counter; ref (!counter, x)
let var_value v = snd !v
let update_var v x = v := (fst !v, x)
let hash_var v = Hashtbl.hash (fst !v) 
```

为了更好的类型安全和提高效率，定义一个包含计数器值和项目的数据结构。

```
let counter = ref 0
type counter = int
type 'a variable = {
    key : counter;
    mutable data : 'a;
}
let new_var x = incr counter; {key = !counter; data = x}
let hash_var v = Hashtbl.hash v.key 
```

您可以将上面的代码放在模块中并使`counter`类型抽象。`Hashtbl`此外，您可以使用函数接口定义哈希表模块。这是另一种在变量上定义变量和哈希表结构的方法，具有更清晰、更模块化的结构。

```
module Counter = (struct
  type t = int
  let counter = ref 0
  let next () = incr counter; !counter
  let value c = c
end : sig
  type t
  val next : unit -> t
  val value : t -> int
end)
module Variable = struct
  type 'a variable = {
      mutable data : 'a;
      key : Counter.t;
  }
  let make x = {key = Counter.next(); data = x}
  let update v x = v.data <- x
  let get v = v.data
  let equal v1 v2 = v1 == v2
  let hash v = Counter.value v.key
  let compare v1 v2 = Counter.value v2.key - Counter.value v1.key
end
module Make = functor(A : sig type t end) -> struct
  module M = struct
    type t = A.t Variable.variable
    include Variable
  end
  module Hashtbl = Hashtbl.Make(M)
  module Set = Set.Make(M)
  module Map = Map.Make(M)
end 
```

我们需要中间模块`Variable`，因为类型`variable`是参数的，并且标准库数据结构函子 ( `Hashtbl.Make`, `Set.Make`, `Map.Make`) 只为没有参数的类型构造函数定义。这是一个接口，它公开了多态接口（具有关联的函数，但没有数据结构）和一个函子，用于构建任意数量的单态实例，具有关联的哈希表（以及集合和映射）类型。

```
module Variable : sig
  type 'a variable
  val make : 'a -> 'a variable
  val update : 'a variable -> 'a -> unit
  val get : 'a variable -> 'a
  val equal : 'a -> 'a -> bool
  val hash : 'a variable -> int
  val compare : 'a variable -> 'b variable -> int
end
module Make : functor(A : sig type t end) -> sig
  module M : sig
    type t = A.t variable.variable
    val make : A.t -> t
    val update : t -> A.t -> unit
    val get : t -> A.t
    val equal : t -> t -> bool
    val hash : t -> int
    val compare : t -> t -> int
  end
  module Hashtbl : Hashtbl.S with type key = M.t
  module Set : Set.S with type key = M.t
  module Map : Map.S with type key = M.t
end 
```

请注意，如果您希望您的程序在运行期间可能会生成超过 2^30 个变量，`int`则不会删除它。您需要两个`int`值来生成一个 2^60 位的值，或者一个`Int64.t`.

请注意，如果您的程序是多线程的，则需要在计数器周围加一个锁，以使增量和查找原子化。

# c++ - v8 设置句柄 数组如何？

> ID：10283351
> 
> 赞同：0
> 
> 时间：2012-04-23T15:18:35.693
> 
> 标签：c++, window, v8

我想设置一个`Handle<Value>`数组。我是 v8 的初学者，当我这样做时我找不到如何设置它，例如：

```
Persistent<Context> fcontext
Handle<Value> Arr = Array::New(0);
Persistent<Function> Func;
Handle<Value> result = Func->Call(fcontext->Global(), 0, Arr); 
```

我收到此错误：

```
 error C2664: 'v8::Function::Call' : cannot convert parameter 3 from 'v8::Handle<T>' to 'v8::Handle<T> []'
    1>        with
    1>        [
    1>            T=v8::Value
    1>        ] 
```

如何制作一个`Handle<Value>`包含 1 个元素的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:52:45.947

```
const unsigned argc = 1;
Local<Value> argv[argc] = { Local<Value>::New(String::New("Hello World!")) };
func->Call(Context::GetCurrent()->Global(), argc, argv); 
```

更多示例：

*   [http://izs.me/v8-docs/examples.html](http://izs.me/v8-docs/examples.html)
*   [http://nodejs.org/api/addons.html](http://nodejs.org/api/addons.html)

# google-app-engine - AppEngine 会产生哪些邮件服务错误？

> ID：10283352
> 
> 赞同：0
> 
> 时间：2012-04-23T15:18:37.330
> 
> 标签：google-app-engine, python-2.7

我想控制我的`send()`调用并将其嵌入到 try/except 中，但我不确定它会产生什么错误。

环顾 SDK，似乎 MailServiceError 是其中一个，但不确定，因为我不知道如何测试这样的错误。

谁能证实这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:11:41.177

以下是调用 send() 可能引发的异常：[https ://developers.google.com/appengine/docs/python/mail/exceptions](https://developers.google.com/appengine/docs/python/mail/exceptions)

这是一个如何捕获这些的示例：

```
from google3.apphosting.api import mail

# other code to create 'message' here
try:
  message.send()
except mail.InvalidSender, e:
  # Do something special for an invalid sender error
  pass
except mail.Error, e:
  # This will catch all the other exceptions in the doc above.
  pass 
```

# php - mysql离开加入同一张表两次

> ID：10283363
> 
> 赞同：1
> 
> 时间：2012-04-23T15:19:11.593
> 
> 标签：php, mysql, left-join

我试图离开加入同一张桌子两次，但这给我带来了一些问题。我有两张桌子`ee_all`，`ee_calendar_events`我想加入。

```
SELECT
    u.first_name,
    u.last_name,
    u.email,
    SUM(e1.total_vacation_hours_earned) AS vacation_hours_earned,
    SUM(e2.absent_hours)
FROM ee_all AS u 
LEFT JOIN ee_calendar_events AS e1 ON u.user_id = e1.sched_user_id
LEFT JOIN ee_calendar_events AS e2 ON u.user_id = e2.sched_user_id AND e2.event_id = 2
WHERE
    u.user_id = 23 
```

该`vacation_hours_earned`列应该返回 133，如果我取出第二个连接，它会返回 133。但是一旦我添加它，查询就会永远持续下去，并且`vacation_hours_earned`它的值为 2000 或其他值（这是错误的）。我的猜测是，当我添加第二个连接时，它会再次对行求和，但我不希望那样。我已经尝试了几个小时，但找不到解决方法，不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:29:16.033

当最右边的表（第二个连接）有多个对应于左侧表表达式的行时，左侧表表达式的行在 SUM 中重复并计数不止一次。请改用子查询。

```
SELECT
    u.first_name,
    u.last_name,
    u.email,
    (
        SELECT
            SUM(e1.total_vacation_hours_earned)
        FROM
            ee_calendar_events AS e1
        WHERE
            u.user_id = e1.sched_user_id
    ) AS vacation_hours_earned,
    (similar) AS absent_hours
FROM
    ee_all AS u
WHERE
    u.user_id = 23 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:32:08.440

使用一些 MySQL 语法，您可以消除第二个左连接并简化查询；

```
SELECT
    u.first_name,
    u.last_name,
    u.email,
    SUM(e1.total_vacation_hours_earned) AS vacation_hours_earned,
    SUM(e1.absent_hours * (event_id=2))
FROM ee_all AS u 
LEFT JOIN ee_calendar_events AS e1 ON u.user_id = e1.sched_user_id
WHERE
    u.user_id = 23 
```

演示[在这里](http://sqlfiddle.com/#!2/a289b/4)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:31:51.563

```
SELECT
    u.first_name,
    u.last_name,
    u.email,
    SUM(e1.total_vacation_hours_earned) AS vacation_hours_earned,    
   (select SUM(e2.absent_hours) as absenthours from ee_calendar_events AS e2 where u.user_id = e2.sched_user_id AND e2.event_id = 2)    
    FROM ee_all AS u 
    LEFT JOIN ee_calendar_events AS e1 ON u.user_id = e1.sched_user_id
    WHERE
    u.user_id = 23 
```

# javascript - 选择 NEXT PAGE 时的 Report Viewer loing 参数

> ID：10283366
> 
> 赞同：0
> 
> 时间：2012-04-23T15:19:25.903
> 
> 标签：javascript, asp.net, vb.net, reporting-services

这是一个有趣的。将参数传递给它后，我会打开一个新窗口。在这个新窗口中是我的报表查看器控件。我加载控件并且所有显示都很好，直到我单击查看下一页按钮 - 它重新加载报告并再次从第 1 页开始。

有任何想法吗？？？？

代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim strTitle As String
        Dim strReportName As String
        Dim tstr As String

        tstr = "-o-"
        strReportName = ""
        strTitle = "Praxima CENTAURI Report Viewer : REPORT : "

        'If Not IsPostBack Then
        If Not String.IsNullOrEmpty(Request.QueryString("prm")) Then
            tstr = Request.QueryString("prm").ToString()
        End If
        'End If

        'tstr = Request.QueryString("prm").ToString()
        Me.Title = tstr 'strTitle + strReportName
        SetReportProperties(tstr)
    End Sub
    Private Sub SetReportProperties(ByVal CSVString As String)
        Dim paramList As Generic.List(Of ReportParameter) = New Generic.List(Of ReportParameter)()
        With ReportViewer1
            .ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote
            With .ServerReport
                Dim PParm(0) As String
                Dim PValue(0) As String
                Dim cnt As Integer = 1
                Dim AType As String = "P"
                Dim Marker As Integer = 1
                Dim Pcnt As Integer = 0
                Dim Vcnt As Integer = 0
                Dim iLoop as Integer
                For cnt = 1 To Len(CSVString)

                    If Mid(CSVString, cnt, 1) = "," And AType = "P" Then
                        ReDim Preserve PParm(Pcnt)
                        PParm(Pcnt) = Mid(CSVString, Marker, cnt - Marker)
                        'CSVString = Mid(CSVString, cnt + 1, Len(CSVString) - cnt)
                        cnt = cnt + 1
                        AType = "V"
                        Marker = cnt
                        Pcnt = Pcnt + 1
                    End If
                    If Mid(CSVString, cnt, 1) = "," And AType = "V" Or cnt = Len(CSVString) Then
                        ReDim Preserve PValue(Vcnt)
                        If cnt = Len(CSVString) Then
                            PValue(Vcnt) = Mid(CSVString, Marker, (cnt - Marker) + 1)
                        Else

                            PValue(Vcnt) = Mid(CSVString, Marker, cnt - Marker)
                        End If
                        'CSVString = Mid(CSVString, cnt + 1, Len(CSVString) - cnt)
                        cnt = cnt + 1
                        AType = "P"
                        Marker = cnt
                        Vcnt = Vcnt + 1
                    End If

                    '                   Dim pUri As New Uri(PValue(0))

                Next
                .ReportServerUrl = New Uri("http://localhost/reportserver")  'New Uri(PValue(0).ToString)
                .ReportPath = "/praxima/rptZZ-FullPayDetails" 'PValue(1)

                Dim pinfo As ReportParameterInfoCollection = .GetParameters()
                Dim Parray As Integer = 1
                For Each p As ReportParameterInfo In pinfo
                    Parray = Parray + 1
                    If Parray > 1 And Parray < pinfo.Count Then
                        paramList.Add(New ReportParameter(PParm(Parray).ToString, PValue(Parray).ToString))
                    End If
                Next

                If paramList.Count > 0 Then
                    'MsgBox(paramList.Item(2).Values.Item(1).ToString, vbOKOnly, )

                    .SetParameters(paramList)

                End If

            End With
            .ShowParameterPrompts = False

        End With

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:52:42.513

我直接打电话给报告，而不是担心屏幕上有花哨的标志等。我正在使用 CSS 样式表来“美化”报告。

```
<title>Untitled Page</title>
<script type="text/javascript">
    function open_win()
        {
            var Parms = document.getElementById('PassParmString').value;
            window.open(Parms) 
```

}

传递的参数字符串如下所示：

```
Me.PassParmString.Text = Me.PassParmString.Text + "&ClientName=ZZZZ&StartDateString=2011/01/01&EndDateString=2011/01/31&GiveBlankOutput=Yes&Level2From= &Level2To=ZZZZZZZZ&Level3From= &Level3To=ZZZZZZZZ&Level4From= &Level4To=ZZZZZZZZ&Level5From= &Level5To=ZZZZZZZZ&EmpNumFrom= &EmpNumTo=ZZZZZZZZ&EmpNameFrom= &EmpNameTo=ZZZZZZZZ&CostCentFrom= &CostCentTo=ZZZZZZZZ&OutputSeq=Name&EntireYear=No&StartYearString=2011-03-01" 
```

苹果电脑

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-15T23:53:56.877

不要在 Page_Load 事件中调用 SetReportProperties。在 button_click 之类的事件上调用它。

# magento - 如何根据特定产品类型在 Magento 中创建价格规则？

> ID：10283370
> 
> 赞同：1
> 
> 时间：2012-04-23T15:19:51.957
> 
> 标签：magento

我需要根据产品类型（简单、分组、可配置...）制定“目录价格规则”或“购物车价格规则”

那可能吗 ？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:01:30.307

我也对这个选项感兴趣（使用 SCP：简单的可配置产品），因此 CART 价格规则应仅适用于简单的产品，而不是可配置的产品

# asp.net - 有没有办法比较“编译”的 ASP.NET 应用程序的 2 个版本，看看它们是否相同？

> ID：10283372
> 
> 赞同：1
> 
> 时间：2012-04-23T15:19:55.670
> 
> 标签：asp.net, dll, beyondcompare

是否可以比较已编译的 ASP.NET 应用程序（V2、Webforms）的两个版本。当我说已编译时，我的意思是所有代码都位于“bin”文件夹中的单独 Webform 和 Codebehind DLL 中，即 VS 中的“使用固定命名和单页程序集”发布选项。

目前我使用“Beyond Compare”来比较“Source”，它在这方面做得很好，尤其是当一个人可以比较 2 个文件夹时，它会自动比较所有子文件夹和文件。不幸的是，我还没有找到将“已编译”/“已发布”应用程序与其进行比较的方法。

想法？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:31:12.583

如果您试图找到一种方法来比较 DLL，请查看[Reflector Diff AddIn](http://www.codingsanity.com/diff.htm)。

本文[还](http://www.hanselman.com/blog/ManagingChangeWithNETAssemblyDiffTools.aspx)提供了一些其他选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:31:28.147

您可以比较 Beyond Compare 中的二进制文件。只需进行文件夹比较，当您选择文件夹后，选择要比较的文件并点击比较内容按钮![按钮](../Images/54cb441222f4c9f5d634861f4bb722ba.png)以显示下面的对话框：

![比较内容](../Images/854f97099f6775fbcedbaaca140117ce.png)

当您点击开始时，它会比较每个文件并告诉您它们是否相同。中间有这个图标的文件![图标](../Images/53b74927037c3a2b8b17baaa8b77e9d1.png)是不相同的。

# c - C查找静态数组大小

> ID：10283375
> 
> 赞同：19
> 
> 时间：2012-04-23T15:20:01.647
> 
> 标签：c, arrays, static

```
static char* theFruit[] = {
    "lemon",
    "orange",
    "apple",
    "banana"
}; 
```

通过查看这个数组，我知道大小是 4。如何以编程方式在 C 中找到这个数组的大小？我不想要以字节为单位的大小。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-23T15:20:52.823

```
sizeof(theFruit) / sizeof(theFruit[0]) 
```

注意`sizeof(theFruit[0]) == sizeof(char *)`, 一个常数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T09:57:55.870

请改用 const char*，因为它们将存储在只读位置。并获取数组的大小 `unsigned size = sizeof(theFruit)/sizeof(*theFruit);` *theFruit 和 theFruit[0] 都是相同的。

# c# - 如何在 aspx 中使用 AD 身份验证找到用户组？

> ID：10283376
> 
> 赞同：1
> 
> 时间：2012-04-23T15:20:02.517
> 
> 标签：c#, asp.net, active-directory

所以我按照[这个](http://msdn.microsoft.com/en-us/library/ff650308.aspx)教程，我可以成功登录，但现在我试图找出用户是否属于一个组，我试过了：

```
if (User.IsInRole("group")) 
```

随着

```
enableSearchMethods="true" 
```

但似乎没有任何效果，也许我看错了地方......有人有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:52:29.173

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // do something here....
   PrincipalSearchResult<Principal> groups = user.GetAuthorizationGroups();

   // enumerate the groups found - check to find your group in question
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

或者，您还可以找到用户和组主体：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");
GroupPrincipal groupToCheck = GroupPrincipal.FindByIdentity(ctx, "YourGroupNameHere");

if(user != null && groupToCheck != null)
{
    // this call will tell you - yes or no - whether that user is member of that group
    bool isMember = user.IsMemberOf(groupToCheck); 
} 
```

# vb6 - VB6 中的蜂鸣功能。什么“哔”？

> ID：10283381
> 
> 赞同：6
> 
> 时间：2012-04-23T15:20:20.767
> 
> 标签：vb6, hardware

VB6 有哔声功能。我很想知道调用此函数时究竟会发出什么哔哔声。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T18:19:56.310

更准确地说，VB6 有一个 Beep*子程序*，而不是一个函数。

这与 Kernel32 Beep 入口点完全无关，并且在 Vista 中与在 Windows 7、XP 或 Windows 95 中一样有效。

它从用户的 Windows 声音方案中播放“默认哔”声。如果系统没有声卡，它应该通过主板扬声器发出哔哔声，就像在 Windows 中调用它的任何其他东西播放该声音一样。

这只是一个通用的声音警报。它可能只包含在被移植到 VB 中的旧的、旧的 MS Basic 程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:35:02.703

如果主板内置了扬声器（古代主板中的小型高音扬声器或不那么古老的主板中更小的蜂鸣器），那就是蜂鸣声。在 Windows Vista 中不再支持 Beep 功能，但是在 Windows 7 中，Beep 功能被恢复并通过计算机的声音设备进行路由。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms679277(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679277(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-07T17:19:35.847

要使用主板内置扬声器并绕过计算机的声音设备（无论是否安装），请使用此（仅在 XP 上测试）..

声明函数 SysBeep& Lib "kernel32" Alias "Beep" (ByVal Freq As Long, ByVal Duration As Long)

这应该是不言自明的，但如果不是，请在“声明”上提供帮助。

# jsp - 如何从 servlet 检索带有参数的 URL？

> ID：10283383
> 
> 赞同：0
> 
> 时间：2012-04-23T15:20:29.097
> 
> 标签：jsp, servlets

如果用户去`profile?id=20`，使用`request.getPathInfo()`只是返回`/profile`。有没有办法用参数检索整个 URL？

我需要知道这一点的原因是因为我想在调用命令后将用户转发回他们来自的完全相同的页面，例如`friend request command`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:24:13.917

查询字符串不是路径信息的一部分。

你需要得到它[`HttpServletRequest#getQueryString()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getQueryString%28%29)。

```
String queryString = request.getQueryString();
// ... 
```

然后根据这些部分自己编写新的 URL。

顺便说一句，我不明白为什么您需要转发它，因为初始 URL 将保持不变。也许您将它与重定向混淆了？

# c# - FluentValidation : 设置错误的默认值

> ID：10283384
> 
> 赞同：1
> 
> 时间：2012-04-23T15:20:29.507
> 
> 标签：c#, .net, fluentvalidation

当提供的值无效时，我正在尝试使用 FluentValidation 为字段设置默认值（例如：如果不支持提供的语言，则输入错误消息并将语言默认为英语）。我知道在验证中更改值不是一个好习惯，但在语言的情况下，我需要正确设置它以进行进一步验证并显示错误消息。

我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:17:01.837

您不能*在*流利的验证验证器中执行此操作。验证器类应该只关心提供验证：这是它的唯一职责。

要执行您所描述的操作，您可以执行验证，然后检查与语言相关的错误，此时您可以设置默认值。

或者，也许您可​​以在验证之前默认语言值 - 没有任何代码很难做出推荐。

# emacs - 在当前的组织模式树中使用 flyspell

> ID：10283393
> 
> 赞同：5
> 
> 时间：2012-04-23T15:20:57.190
> 
> 标签：emacs, org-mode

我正在尝试编写一个小的 lisp 函数来在单个 org-mode 分支中运行 flyspell。我已将此添加到我的 .emacs 文件中：

```
(defun flyspell-current-tree()
  (interactive)
  (org-mark-subtree)
  (flyspell-region))

(global-set-key (kbd "S-<f8>") 'flyspell-current-tree) 
```

但是在运行它时，我收到以下错误：

```
flyspell-current-tree: Wrong number of arguments 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T16:19:20.767

您需要提供`beg`并`end`使其`flyspell-region`正常工作。错误来自于此，而不是实际上来自您的函数。

如果您包含`(point)`and`(mark)`作为参数，`flyspell-region`它将正常工作。

```
(defun flyspell-current-tree()
  (interactive)
  (org-mark-subtree)
  (flyspell-region (point) (mark))) 
```

# c# - C#：找不到类型或命名空间名称“类”（您是否缺少用于程序集引用的 using 指令？）

> ID：10283394
> 
> 赞同：0
> 
> 时间：2012-04-22T18:52:20.703
> 
> 标签：c#, object

```
class World
{
    bool _playerHasWonGame = false;
    public void Update()
    {
        Entity player = FindEntity("Player"); //ERROR: The type or namespace name 'Entity' could not be found(are you missing a using directive for an assembly reference?)
    }

    private Entity FindEntity(string p) //Same ERROR
    {
        throw new NotImplementedException();
    }
}

class Inventory
{
    public bool Contains(Entity entity)
    {
        return false;
    }
}

public class Entity
{
    public Inventory Inventory { get; set; }
} 
```

错误部分是实体。

我创建 Entity 类，并尝试在 World 类中创建 Entity 对象。

据我了解，它应该可以工作。我只是尝试像其他 C# 程序员一样制作对象。但是，看起来我的编译器找不到实体定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:54:30.827

默认情况下，类不是公共的，因此`Inventory`比返回它的实例的属性更难访问。

要么更改`Entity`为内部的（因此它及其属性将存在于与 相同的范围内`Inventory`）或`Inventory`公开。

（无论是更改代码片段都会为我编译）

# c# - 使用 linq 对计数的不同唯一事件进行排序

> ID：10283398
> 
> 赞同：3
> 
> 时间：2012-04-23T15:21:12.330
> 
> 标签：c#, linq

我想知道如何使用 linq 按出现次数最多的降序对以下列表进行排序：

```
ghj
def
abc
def
abc
abc 
```

到：

```
abc
def
ghj 
```

我正在寻找 lambda 表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:29:37.970

```
string[] names = { "ghj", "def", "abc", "def", "abc", "abc" };

IEnumerable<string> query = names
   .GroupBy(s=>s) // groups identical strings into an IGrouping
   .OrderByDescending( group => group.Count()) // IGrouping is a collection, so you can count it
   .Select(group=>group.Key); // IGrouping has a Key, which is the thing you used to group with. In this case group.Key==group.First()==group.skip(1).First() ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:30:05.340

如果要获取按出现次数排序的不同列表，请使用 Group By：

```
var query = foo.GroupBy(xx => xx)
               .OrderByDescending(gg => gg.Count())
               .Select(gg => gg.Key);
// on your input returns:
// abc
// def
// ghj 
```

# android - ImageButton 和 TextView 不同的状态

> ID：10283399
> 
> 赞同：0
> 
> 时间：2012-04-23T15:21:19.843
> 
> 标签：android, android-layout, textview, imagebutton

我有一组由 ImageButton、ImageView 和 TextView 组成的视图。
代码如下所示：

```
 <ImageButton
            android:id="@+id/imagebutton_com"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/bean_bg" 
            />

        <ImageView 
            android:id="@+id/imageview_arrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/arrow_1"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="20dp"
            />

        <TextView 
            android:id="@+id/textview_wizard_main_button"
            android:text="Soybeans"
            android:layout_toRightOf="@id/imageview_arrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="17sp"
            android:textStyle="bold"
            android:textColor="@color/white"
            android:layout_margin="10dp"
            /> 
```

一切都按预期工作，但我想在 Button 获得焦点时更改 TextView 的 textColor。

我尝试编写一个选择器 xml 文件来做同样的事情，但没有任何效果。
有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:28:05.833

您需要在代码中执行此操作。在 ImageButton 上使用**OnFocusChangeListener**来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:40:06.417

Create a folder color under resources and add selector.xml file to that folder

change property of `TextView` namely

`android:textColor = "@color/white"`

to

```
android:textColor = "@color/selector" 
```

# vb.net - 在 SMTP 电子邮件 VB.NET 的正文中添加多行

> ID：10283400
> 
> 赞同：7
> 
> 时间：2012-04-23T15:21:21.993
> 
> 标签：vb.net, smtp

我可以使用此代码在我的 Exchange 服务器上发送电子邮件

```
Try
        Dim SmtpServer As New SmtpClient
        Dim mail As New MailMessage
        SmtpServer.Credentials = New Net.NetworkCredential()
        SmtpServer.Port = 25
        SmtpServer.Host = "email.host.com"
        mail = New MailMessage
        mail.From = New MailAddress("myemail@email.com")
        mail.To.Add("otheremail@email.com")
        mail.Subject = "Equipment Request"
        mail.Body = "This is for testing SMTP mail from me" 

        SmtpServer.Send(mail)

    catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

但是如何在正文中添加多行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:23:25.313

只需将其视为可以在句子之间使用`Environment.NewLine`或`vbNewLine`在句子之间使用的普通文本对象。

`StringBuilder`在这里很有用：

```
Dim sb As New StringBuilder
sb.AppendLine("Line One")
sb.AppendLine("Line Two")

mail.Body = sb.ToString() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T15:25:37.123

我会为您的正文创建一个变量，然后将其添加到 mail.Body，使其看起来像这样。

```
Try
    Dim strBody as string = ""
    Dim SmtpServer As New SmtpClient
    Dim mail As New MailMessage
    SmtpServer.Credentials = New Net.NetworkCredential()
    SmtpServer.Port = 25
    SmtpServer.Host = "email.host.com"
    mail = New MailMessage
    mail.From = New MailAddress("myemail@email.com")
    mail.To.Add("otheremail@email.com")
    mail.Subject = "Equipment Request"
    strBody = "This is for testing SMTP mail from me" & vbCrLf
    strBody += "line 2" & vbCrLf
    mail.Body = strBody

    SmtpServer.Send(mail)

catch ex As Exception
    MsgBox(ex.ToString)
End Try 
```

这将附加换行符，您应该在电子邮件中拥有自己的每一行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-12T20:50:23.587

如果您的邮件正文需要采用 HTML 格式，`<br>`请在您的字符串中添加标签。`vbCrLf`如果正文是 HTML 格式，`StringBuilder`则不工作。

```
Dim mail As New MailMessage
mail.IsBodyHtml = True
mail.Body = "First Line<br>"
mail.Body += "Second Line<br>"
mail.Body += "Third Line" 
```

如果不是 HTML 格式，这里的其他答案似乎很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:25:27.530

像这样？

```
Dim myMessage as String = "This is for testing SMTP mail from me" + Environment.NewLine
myMessage = myMessage + "Line1" + Environment.NewLine 
```

然后

```
mail.Body = myMessage 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T15:30:48.433

尝试`system.environment.newline`在字符串中...应该可以

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-14T19:03:35.513

它对我有用的是
在字符串中使用..

```
strBody = "This is for testing SMTP mail from me<BR> line 2" 
```

# wpf - 由于数据绑定导致页面转换缓慢

> ID：10283401
> 
> 赞同：1
> 
> 时间：2012-04-23T15:21:29.190
> 
> 标签：wpf, silverlight, windows-phone-7, data-binding, windows-phone-7.1

我正在 wp7 中制作搜索应用程序。每条记录的数据都绑定到一个用户控件。我引入了无限加载而不是给出页码。因此，当屏幕中 UserControl 的实例数量增加时，从一个页面到另一个页面（如预览或设置页面）的转换或从该页面返回到当前页面的速度会变慢。我无法更改设计（无限加载概念）。

处理这种情况的方法是什么？如何更改控件的可见性？并高度赞赏参考或建议。

**请注意**，我标记了 WPF 和 Silverlight，因为绑定在它们中以相同的方式发生，预计它们已经处理了这样的场景。

**编辑**检查这个[问题](https://stackoverflow.com/questions/10009982)，这是我问的。由于在列表框中有用户控件，因此没有维护垂直偏移量。所以我别无选择，只能在它周围使用带有 scrollViewer 的 ItemsControl。ItemsControl 包含 5 - 6 个用户控件的列表，其中实习生在其中有 itemsControls，我认为在这种情况下可能不会发生虚拟化。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:54:54.030

在 WPF 中，这是由虚拟化完成的

使用，实际上只创建`Virtualization`了一个副本（或几个副本） ，而切换到另一个用户控件实际上只是换出了控件绑定到的那个。它实际上并没有创建一个新的.`UserControl``DataContext``UserControl`

例如，如果您有`VirtualizingStackPanel`100,000 个项目，并且一次只有 10 个可见，它只会渲染大约 14 个项目（滚动缓冲区的额外项目）。当您滚动时，`DataContext`这 14 个控件后面的控件会更改，但实际控件本身永远不会被替换。相比之下，常规`StackPanel`加载时实际上会渲染 100,000 个项目，这会大大降低应用程序的性能。

这个关于[虚拟化 ItemsControl 的](https://stackoverflow.com/q/2783845/302677)问题可能会让您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:20:55.347

看看[这个帖子](https://stackoverflow.com/questions/8008929/margin-on-itemscontrol-of-virtualizing-listbox-not-working-properly/8072917#8072917)，我相信 Rico 提供的解决方案就是你要找的。:)

# xcode - NSString 和日语

> ID：10283402
> 
> 赞同：1
> 
> 时间：2012-04-23T15:21:35.117
> 
> 标签：xcode, unicode, nsstring, cjk

有谁知道 NSString 是否支持日文字符？我写了这样的东西：

```
NSString* str = @"日本語"; 
```

但这仅在 XCode 调试器中显示一些字母和数字。如何在 iPhone 应用程序中写日语单词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:22:40.157

这似乎是正确的。

> 但这仅在 Xcode 调试器中显示一些字母和数字

我猜“字母和数字”类似于 \u123\092 等？您在调试器中看到的是 unicode 等价物。如果你在 UILabel 或类似的东西中显示字符串，它看起来会很好。

# c++ - fscanf c++ 等效

> ID：10283408
> 
> 赞同：1
> 
> 时间：2012-04-23T15:21:51.500
> 
> 标签：c++, c

我想将以下 C 代码翻译成 C++。

```
FILE *fp = NULL;
fp = fopen("./filename", "r");
int i = 0;
fscanf(fp, "%d\n", &i);
uint16_t j = (uint16_t) i; 
```

这就是我想出的：

```
 ifstream file;
  string filename = "./filename";

  file.open(filename.c_str(), ios::in);
  errno = 0;
  if (file.fail()) {
      int tmp = errno;
      std::cout << file.c_str () << " not found: strerror(" << tmp << "): " << strerror(tmp) );
  }
  int i = 0;
  file >> i >> std::endl;       
  uint16_t j = (uint16_t) i; 
```

我想知道语法是否正确或可改进，更重要的是它是否对各种输入都安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:47:11.197

```
int read_int(const std::string file_name) {
    std::ifstream file(file_name); //the file will close itself on destruction
    std::uint16_t i;
    //extract type, don't worry about what it is it will either compile or not
    if(!(file >> i)) { //Catch failure
         //or however you wish to deal with it.
         throw std::runtime_error("can't read file");
    }
    return i;
}

int main() {
    try{
        std::uint16_t i=read_int("./filepath");
        //do with i...
    }
    catch(const std::exception& e) {
         std::cerr << e.what() << std::endl;
         return EXIT_FAILURE;
    }
    return EXIT_SUCCESS;
} 
```

请注意，如果您没有 C++11，则需要使用`c_str()`来打开文件，但首选字符串方法。

编辑： fstream 关​​闭自己，不需要自己关闭它，如果你必须这样做，功能就在那里，但是依赖 RAII 语义要好得多：

[http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

RAII 规定您应该在构建时打开文件，并在破坏时关闭，这确保没有任何无效（排除 EOF、未找到文件...）fstream 对象防止错误。RAII 是 C++ 中的一个基本结构，应该在涉及资源的地方使用。

fstream 析构函数的文档在这里：

[http://en.cppreference.com/w/cpp/io/basic_fstream](http://en.cppreference.com/w/cpp/io/basic_fstream)

> 破坏 basic_fstream 和相关的缓冲区，关闭文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:20:35.813

确切的等价物是：

```
std::ifstream fs( "./filename" );
int i = 0;
fs >> i >> std::ws;
uint16_t j = i; 
```

这是否是您真正想要的另一个问题： `"\n"`在格式字符串中使用 a`fscanf`表示（至少对我而言）您确实想要读取单个`'\n'`，而不是任意空格；然而， 中的`"\n"`意思`fscanf`是跳到下一个非空格。`scanf`（在交互式输入的情况下，这可能是一个真正的问题，因为在您遇到非空白字符或文件结尾之前，您不会从您的（或我上面的替换）返回。对于来自文件的输入，这可能不是问题。）

在读取面向行的输入时，经典的解决方案是使用 `std::getline`，然后`std::istringstream`解析它。

# javascript - jquery，添加带有类定义的div

> ID：10283414
> 
> 赞同：8
> 
> 时间：2012-04-23T15:22:09.747
> 
> 标签：javascript, jquery, html, add

所以我在这里看到了[如何添加一个 div](http://api.jquery.com/add/)以及[如何添加一个类](http://api.jquery.com/addClass/)，但是我在将两者结合起来时遇到了麻烦。我想在 div sparkLineContainer 中生成一大堆具有特定类和 id 的 div。

我有包含 div

```
<div id="#sparkLineContainer"></div> 
```

我想添加一堆以下内容

```
 <div id="#sparkLineContainer">
        <div class="sparkLines" id="id1">Some stuff here</div>
        <div class="sparkLines" id="id2">Some stuff here</div>
        <div class="sparkLines" id="id3">Some stuff here</div>
// and so on
    </div> 
```

片段 - 我没有走得很远，我很难过

```
$('#sparkContainer').add("div");  \\ How do I add the id and class to this div?
                                  \\ And as a repeat the function will it overwrite this? 
```

我正在尝试使用的功能。

```
function renderSparklines (array1, sparkLineName, id) {
// array1 is the data for the spark line
// sparkLineName is the name of the data.  
// Turn all array values into integers
arrayStringToInt(array1);

    // Create new div of class sparkLines
$('#sparkContainer').add("div")

    // Render new spark line to
$('.sparkLines').sparkline(array1, {width:'90px'});

var htmlString = "";  //  Content to be added to new div
//  GENERATE LITTLE SPARK BOX 
    htmlString += 
                '<font class = "blueDescriptor">' + sparkLineName + '</font>'+
                '<br>'+
                '<font class = "greyDescriptorSmall">Ship to Shore</font>'+
                '<br>'+
                '<font class = "blackDescriptorSparkLine">' + array1[array1.length-1] + '</font>'+
                '<font class = "greenDescriptorSparkline">(' + (array1[array1.length-1] - array1[array1.length-2]) + ')</font>' +
                '<br>';
    $('.sparkLines').prepend(htmlString); 
```

}

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-23T15:25:48.973

`add`不做你认为它做的事。您正在寻找`append`或类似的东西。

您可以先创建 div 并定义其属性和内容，然后附加它：

```
var $newDiv = $("<div/>")   // creates a div element
                 .attr("id", "someID")  // adds the id
                 .addClass("someClass")   // add a class
                 .html("<div>stuff here</div>");

$("#somecontainer").append($newDiv); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T15:33:30.483

您需要`.append`或`.prepend`向容器中添加一个 div。请参阅下面的我的版本，

```
var $sparkLines = $('.sparkLines');
$("#sparkLineContainer")
   .append('<div id="id' + 
            ($sparkLines.length + 1) + 
            '" class="sparkLines">Some Stuff Here</div>') 
```

我还注意到您将 div 的 id 设置为`#sparkLineContainer`. 你应该改变它如下，

```
<div id="sparkLineContainer"> 
... 
```

[**演示**](http://jsfiddle.net/skram/KU4Ry/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-07T07:35:44.607

您可以添加 div 或任何其他标签以及类，例如：

`$('<div/>',{ class : 'example'}).appendTo("p");`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T15:26:11.227

可能最简单的方法是只修改innerHTML：

```
$("#sparkLineContainer").append('<div class="sparkLine" id="id1"></div>'); 
```

还有其他方法，但这是我通常使用的方法。

# c# - 将数据从 Html.EditorFor 传递到控制器

> ID：10283416
> 
> 赞同：2
> 
> 时间：2012-04-23T15:22:11.800
> 
> 标签：c#, asp.net-mvc

如何将数据从 Html.EditorFor 传递到 myController 中的 myAction？

这是我的编辑器：

```
<div class="editor-label">
            @Html.LabelFor(model => model.Quote_Currency)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Quote_Currency, new { })
            @Html.ValidationMessageFor(model => model.Quote_Currency)
        </div> 
```

这是我的控制器动作：

```
public ActionResult SaveQuote(FxQuote quote, string Quote_Currency)
        {

                objQuote.Quote_Currency = Quote_Currency;

                dcfx.FxQuotes.InsertOnSubmit(quote);
                dcfx.SubmitChanges();

            return View(); 
```

在这里，我试图有一个与我的编辑器同名的参数，但这不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:31:39.247

您可以将 a`FormCollection collection`作为额外参数添加到控制器方法中。该集合将保存从控制器中的视图传递的所有数据。您可以使用调试器来探索哪些数据正在准确地发送到控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:37:20.503

你为什么不改变动作来接受你的模型？

像这样的东西：

```
 public ActionResult SaveQuote(ModelType model) 
 { 

            objQuote.Quote_Currency = model.Quote_Currency; 

            dcfx.FxQuotes.InsertOnSubmit(model.Quote); 
            dcfx.SubmitChanges(); 

        return View();
  } 
```

或者，您可以将其更改为接受另一个答案中提到的表单集合：

```
 public ActionResult SaveQuote(FormCollection collection) 
```

希望这可以帮助

# android - 触摸其 ScrollView 子项时未触发视图上的 onTouch

> ID：10283417
> 
> 赞同：2
> 
> 时间：2012-04-23T15:22:17.460
> 
> 标签：android, scrollview, touch-event

单击 ScrollView 子项时，我无法在容器上触发 onTouch 事件。

我在 Galaxy tab 10.1 上使用 API 12。

有人可以帮忙吗？

谢谢

**活动**

```
public class TestActivity extends Activity{

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.dude);

        LinearLayout mylayout = (LinearLayout) findViewById(R.id.mylayout);        

        mylayout.setOnTouchListener(new OnTouchListener () {
            public boolean onTouch(View view, MotionEvent event) {

                // Only called when touched outside the ScrollView

                if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {
                    /* do stuff */
                } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                    /* do stuff */
                }
                return true;
            }
        });        
    }
} 
```

**布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mylayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:gravity="center"
        android:text="Touch here trigger parent&apos;s onTouch"
        android:textColor="#000000"
        android:textSize="40sp" />

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="match_parent"
                android:layout_height="1000dp"
                android:background="#b00000"
                android:gravity="center"
                android:text="Touch here DOES NOT trigger parent&apos;s onTouch"
                android:textColor="#000000"
                android:textSize="40sp" />
        </RelativeLayout>
    </ScrollView>

</LinearLayout> 
```

![在此处输入图像描述](../Images/57f023fc3aca5e2d2c4b551e9a3b8e5f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:44:12.750

```
mylayout.setOnTouchListener(new OnTouchListener () {
            public boolean onTouch(View view, MotionEvent event) {

                // Only called when touched outside the ScrollView

                if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {
                    /* do stuff */
                    return true;
                } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                    /* do stuff */
                    return true;
                }
                return false;
            }
        }); 
```

这应该可以工作...但是当您用力甩动它时不再具有自动滚动功能...它将是一个粘性滚动，仅在您拖动时移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:30:41.067

您是否尝试创建一个 OnClickListener 并将其添加到所有孩子？也许这可以解决您的问题，因为 ScrollView 使它的孩子可以滚动，所以它没有自己的区域可以点击。（如果我错了，请纠正我^^）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-19T15:49:51.620

您可能需要此代码

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev)
{
onTouchEvent(ev);
return false;
} 
```

# java - AWS SDK for Java 教程示例缺少类

> ID：10283418
> 
> 赞同：7
> 
> 时间：2012-04-23T15:22:22.830
> 
> 标签：java, amazon-web-services, classpath, aws-sdk

**按照AWS SDK for Java**入门教程，运行`AwsConsoleApp`示例：

```
java -cp .:/Users/marius/Dev/aws-java-sdk-1.3.8/lib/aws-java-sdk-1.3.8.jar AwsConsoleApp 
```

我收到以下问题：

```
===========================================
Welcome to the AWS Java SDK!
===========================================
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at com.amazonaws.util.VersionInfoUtils.<clinit>(VersionInfoUtils.java:41)
    at com.amazonaws.ClientConfiguration.<clinit>(ClientConfiguration.java:31)
    at com.amazonaws.services.ec2.AmazonEC2Client.<init>(AmazonEC2Client.java:95)
    at AwsConsoleApp.init(AwsConsoleApp.java:93)
    at AwsConsoleApp.main(AwsConsoleApp.java:105)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 5 more 
```

在编译时加载到类路径中的完整 SDK 也在运行时给出，所以我无法弄清楚缺少什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:46:42.960

在[SDK 先决条件](http://aws.amazon.com/sdkforjava/)中，您有：

> 需要**Apache Commons**（**Codec**、**HTTP Client**和**Logging**）第三方包，这些包包含在 SDK 的第三方目录中。

所以我只是将它们添加到我的`.bashrc`：

```
#   Apache Commons Logging
export CLASSPATH=$CLASSPATH:/Users/marius/Dev/aws-java-sdk-1.3.8/third-party/commons-logging-1.1.1/*
#   Apache Commons HTTP Client
export CLASSPATH=$CLASSPATH:/Users/marius/Dev/aws-java-sdk-1.3.8/third-party/httpcomponents-client-4.1.1/*
#   Apache Commons Codec
export CLASSPATH=$CLASSPATH:/Users/marius/Dev/aws-java-sdk-1.3.8/third-party/commons-codec-1.3/* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T23:07:13.077

在 Windows 上，将这些路径添加到您的系统`CLASSPATH`

```
C:\aws-java-sdk-1.3.21.1\lib\aws-java-sdk-1.3.21.1.jar;
C:\aws-java-sdk-1.3.21.1\third-party\commons-logging-1.1.1\commons-logging-1.1.1.jar;
C:\aws-java-sdk-1.3.21.1\third-party\commons-codec-1.3\commons-codec-1.3.jar;
C:\aws-java-sdk-1.3.21.1\third-party\httpcomponents-client-4.1.1\httpclient-4.1.1.jar;
C:\aws-java-sdk-1.3.21.1\third-party\httpcomponents-client-4.1.1\httpcore-4.1.jar 
```

然后确保在应用这些后从新的 cmd 提示窗口开始。

# java - 我怎样才能让这个闹钟在我的设备被锁定时唤醒它

> ID：10283419
> 
> 赞同：1
> 
> 时间：2012-04-23T15:22:23.343
> 
> 标签：java, android, alarm, wakelock

我需要让我的闹钟在我的设备被锁定时唤醒我的设备我如何让这个闹钟在我的设备被锁定时唤醒我的设备，我尝试了很多代码但它不起作用，

这是我的代码

```
// Alert Code
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("confirmation");
    alertDialog.setMessage("r u sure u wanna send it");

    // Timer Code
    pendingIntent = PendingIntent.getService(CreateNewForm_3.this, 0,
            new Intent(CreateNewForm_3.this, MyAlarmService.class), 0);
    Send.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            alertDialog.setButton("yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // -1- InshaAllah we've to send the Case info.
                            // here MMS
                            String FullCaseMsg = "name: " + case1.getName() + "$"
                                    + " gender: " + case1.getGender() + "$"
                                    + " Age: " + case1.getAge() + "$"
                                    + " clothes: " + case1.getClothes()
                                    + "$" + " MoreInfo: "
                                    + case1.getMoreInfo() + "$" + " time: "
                                    + case1.getTime() + "$" + " loc: "
                                    + case1.getLocation() + "$";
                            // -2- then show toast
                            Toast.makeText(CreateNewForm_3.this, "sent ", 0)
                                    .show();
                            // test

                            // -3- starting timer
                            long firstTime = SystemClock.elapsedRealtime();
                            am = (AlarmManager) getSystemService(ALARM_SERVICE);
                            am.setRepeating(
                                    AlarmManager.ELAPSED_REALTIME_WAKEUP,
                                    firstTime + 10 * 1000, 30 * 1000,
                                    pendingIntent);
                            // firstTime Will be the current_time + ( 10 *
                            // 60 * 1000) =)
                            // 10* 1000 will be (10 * 60 * 1000)
                            new Handler().postDelayed(new Runnable() {
                                public void run() {
                                    bCancel.performClick();
                                }
                            }, (30 * 1000));
                            // ( 30 * 1000) will be firstTime + ( 2-
                            // duration)

                            /*Intent toRecentCases = new Intent(
                                    CreateNewForm_3.this, LMPActivity.class);
                            startActivity(toRecentCases);*/

                            //4-add my case object to list View
                         //All_Static.MyCaseList.add(case1);

                        }
                    });

            alertDialog.setButton2("no",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // here you can add functions

                        }
                    });

            alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog.show();
        }

    });

    bCancel.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            am.cancel(pendingIntent);
        }
    }); 
```

任何帮助将不胜感激提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:27:29.243

“AlarmManager.ELAPSED_REALTIME_WAKEUP”确实会在设备关闭时唤醒设备，但我认为没有机会“解锁”（引脚或模式？）设备，因为这将是一个安全问题。（如我错了请纠正我...）。

# ios - XCode 静态分析和 AppCode 项目检查

> ID：10283427
> 
> 赞同：1
> 
> 时间：2012-04-23T15:22:53.020
> 
> 标签：ios, static-analysis, appcode

Xcode 4.3 提供的静态分析器是否应该捕获或标记未释放的 ivars？

我对 iOS 开发相对较新，我正在寻找一些启发：我的团队在构建我们的项目时启用了静态分析，以便在 XCode 中进行调试构建。为了评估 AppCode 的检查功能，我对整个项目进行了检查。

虽然我预计 AppCode 的检查会很好，但我没想到它会发现 50 多个未正确解除分配的 ivars 实例，因为我们在 Xcode 中打开了静态分析。我们验证了 AppCode 已正确识别问题，在几个案例中这解决了已知的内存泄漏问题。

clang 静态分析器应该捕捉到这些吗？

我希望它是因为一些项目设置没有正确设置。正如我所期望的那样，clang 静态分析器至少会标记丢失的取消分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:19:19.923

从 clang 邮件列表中得到答案，clang 可以发现这个问题。问题是 XCode 附带的 clang 版本禁用了此功能！

> 你好，西莫。Clang 确实支持此检查，但默认情况下它被禁用（可能是因为 [http://llvm.org/bugs/show_bug.cgi?id=8838](http://llvm.org/bugs/show_bug.cgi?id=8838)）。

我同意 Instruments 会识别出一个或多个泄漏，事实上它确实存在。然而，根据我的经验，缩小泄漏源或更可能是泄漏源的过程并不容易。AppCode 标记的问题最终解决了团队无法缩小范围的两个已知漏洞。此外，它还揭示了许多其他已知问题和其他未知问题。

一旦更新了clang，它也应该解决这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:35:51.770

如果 AppCode 没有做比 Xcode 更好的事情，它就不会有太大的市场*，*所以我相信你会发现至少有几个领域它可以为你做一些 Xcode 没有做的事情。也许这是其中一种情况。

另一方面，您所描述的这种泄漏应该很容易使用 Instruments 发现，所以并不是说 Xcode 中没有任何工具可以帮助您找到这种问题。

# git - hg 嵌套存储库设置

> ID：10283429
> 
> 赞同：0
> 
> 时间：2012-04-23T15:23:02.637
> 
> 标签：git, mercurial, subrepos, sparse-checkout

我的 mercurial 项目中有一个第三方嵌套的 git 存储库，我想与我的团队共享此存储库的本地设置（稀疏结帐） - 有没有办法自动执行此操作？

/repo/nestedrepo/.git/info/sparse-checkout <- 这是一个本地设置文件，但我希望团队中的每个人在拉取父 repo 时都能得到它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:58:40.547

你真的在使用*嵌套*存储库或 git 子存储库吗？Mercurial 支持将 git 存储库作为跟踪的子存储库，这可能会帮助您到达想要的位置。

# sql - 为什么这个简单的 SQL 查询不起作用？

> ID：10283431
> 
> 赞同：3
> 
> 时间：2012-04-23T15:23:05.720
> 
> 标签：sql, sql-server

所以我正在研究 SQL Server 2008，我有这个查询应该很简单，但由于某种原因不起作用。它基本上看起来像这样：

```
SELECT TOP 10
    u.Id                AS "UserId",
    u.CreationDate      AS "Member since",
    AVG(q.Score)        AS "Average Question Rating",  
    COUNT(q.Id)         AS "N. of Questions posted by the agent",
    AVG(a.Score)        AS "Average Answer Rating",  
    COUNT(a.Id)         AS "N. of Answers posted by the agent"
FROM    
        Users u, 
        Answers a, 
        Questions q
WHERE q.OwnerUserId = u.Id
AND a.OwnerUserId = u.Id
GROUP BY u.Id, u.CreationDate 
```

当我只处理 Answers 表或 Questions 表时，一切正常。但是，一旦我尝试同时执行这两项操作（如上面的查询），COUNT 就根本不起作用。我得到的是 COUNT(a.Id) 与 COUNT(q.Id) 相同。所以我试着减少我的查询，看看有什么问题，我意识到我只需要在使用另一个表时将 Questions 或 Answers 表（即使没有在任何地方使用它们）添加到 FROM 子句中，一切都被破坏了。

我确信这是我忽略的可笑的微不足道的事情，但这让我发疯，如果有人能指出我出了什么问题，我将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:26:47.443

您没有加入`Answers`并且没有`Questions`正确地进行聚合。在`Answers`和之间`Questions`，结果是一个笛卡尔积（对于每个用户，每个答案都与每个问题相结合）

纠正此问题的最简单方法是在子查询中执行聚合：

```
SELECT TOP 10
    u.Id                AS "UserId",
    u.CreationDate      AS "Member since",
    ISNULL((SELECT AVG(Score) FROM Answers   WHERE OwnerUserId = u.Id), 0)
                        AS "Average Question Rating",  
           (SELECT COUNT(*)   FROM Answers   WHERE OwnerUserId = u.Id)        
                        AS "N. of Questions posted by the agent",
    ISNULL((SELECT AVG(Score) FROM Questions WHERE OwnerUserId = u.Id), 0)
                        AS "Average Answer Rating",  
           (SELECT COUNT(*)   FROM Questions WHERE OwnerUserId = u.Id)
                        AS "N. of Answers posted by the agent"
FROM  Users u 
```

或者使用连接：

```
SELECT TOP 10
     u.Id                AS "UserId",
     u.CreationDate      AS "Member since",
     ISNULL(q.a, 0)      AS "Average Question Rating",  
     ISNULL(q.c, 0)      AS "N. of Questions posted by the agent",
     ISNULL(a.a, 0)      AS "Average Answer Rating",  
     ISNULL(a.c, 0)      AS "N. of Answers posted by the agent"
FROM Users u
-- If you LEFT JOIN these tables, you'll get also results for users without
-- questions or answers
LEFT OUTER JOIN (SELECT OwnerUserId, AVG(Score) a, COUNT(*) c 
     FROM Questions GROUP BY OwnerUserId) q
     ON  q.OwnerUserId = u.Id
LEFT OUTER JOIN (SELECT OwnerUserId, AVG(Score) a, COUNT(*) c 
     FROM Answers GROUP BY OwnerUserId) a
     ON  a.OwnerUserId = u.Id 
```

我不太了解 SQL Server 的查询优化器，所以我不能说哪个会更快。第一个解决方案*可以*利用标量子查询缓存，如果在 SQL Server 中可用的话。否则，第二个查询*可能*执行较少的嵌套循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T16:04:34.007

如其他地方所述，您在问题和答案上的用户 ID 连接本质上会在两个表之间的用户级别产生笛卡尔连接。更好的方法是使用联合：

```
SELECT TOP 10
    u.Id                AS "UserId",
    u.CreationDate      AS "Member since",
    AVG(q_score)        AS "Average Question Rating",  
    COUNT(q_id)         AS "N. of Questions posted by the agent",
    AVG(a_score)        AS "Average Answer Rating",  
    COUNT(a_id)         AS "N. of Answers posted by the agent"
FROM Users u
JOIN (select OwnerUserId,
             Score        q_score,
             Id           q_id,
             NULL         a_score,
             NULL         a_id
      from Answers
      union all
      select OwnerUserId,
             NULL         q_score,
             NULL         q_id,
             Score        a_score,
             Id           a_id
      from Questions) qa
  ON qa.OwnerUserId = u.Id
GROUP BY u.Id, u.CreationDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:50:26.737

仅计算 DISTINCT Id 不可行吗？

```
SELECT TOP 10 
    u.Id                         AS "UserId", 
    u.CreationDate               AS "Member since", 
    AVG(q.Score)                 AS "Average Question Rating",   
    COUNT(DISTINCT q.Id)         AS "N. of Questions posted by the agent", 
    AVG(a.Score)                 AS "Average Answer Rating",   
    COUNT(DISTINCT a.Id)          AS "N. of Answers posted by the agent" 
FROM     
        Users u,  
        Answers a,  
        Questions q 
WHERE q.OwnerUserId = u.Id 
AND a.OwnerUserId = u.Id 
GROUP BY u.Id, u.CreationDate 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T15:25:54.887

如果是我，我会在其他表（答案和问题）上进行显式连接。如果您不进行连接，它如何链接其他表？

```
SELECT TOP 10
    u.Id                AS "UserId",
    u.CreationDate      AS "Member since",
    AVG(q.Score)        AS "Average Question Rating",  
    COUNT(q.Id)         AS "N. of Questions posted by the agent",
    AVG(a.Score)        AS "Average Answer Rating",  
    COUNT(a.Id)         AS "N. of Answers posted by the agent"
FROM    
        Users u, 
        Answers a, 
        Questions q
WHERE q.OwnerUserId = u.Id
AND a.OwnerUserId = u.Id
GROUP BY u.Id, u.CreationDate

would be

SELECT TOP 10
    u.Id                AS "UserId",
    u.CreationDate      AS "Member since",
    AVG(q.Score)        AS "Average Question Rating",  
    COUNT(q.Id)         AS "N. of Questions posted by the agent",
    AVG(a.Score)        AS "Average Answer Rating",  
    COUNT(a.Id)         AS "N. of Answers posted by the agent"
FROM    
        Users u
JOIN Answers a on u.ID = a.ID (assuming thats how answers and users are linked).
JOIN Questions q on a.ID = q.ID (assuming thats how questions and answers are linked)
WHERE q.OwnerUserId = u.Id
AND a.OwnerUserId = u.Id
GROUP BY u.Id, u.CreationDate 
```

# jquery - jquery不只是写了很多click函数

> ID：10283432
> 
> 赞同：1
> 
> 时间：2012-04-23T15:23:07.507
> 
> 标签：jquery

我有一个关于 jquery`onclick`函数的问题，问题不是 bug；当我编写一些使用 jquery 的按钮单击函数时，我编写了很多 jquery，例如：

```
$(document).ready(function(){
    $('#dp1').datepicker({
            format: 'yyyy-mm-dd'
    });
    $('#dp2').datepicker({
            format: 'yyyy-mm-dd'
    });

    $("#addNewQ").on('click', function(){
       .......
    });
    $('#addNew').on('click', function(){
       .......
    });
    $('#addText').on('click', function(){
       .......
    });

}); 
```

我的问题是如何写得更好。我不想写很多点击功能。

我已经尝试谷歌，但我不知道关键字。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:26:15.807

如果这些点击事件正在运行相同的功能，那么您可以为多个元素提供一个类，并使用它。例如，您的日期选择器可能已`class="datepicker"`添加到它们，这将需要 1 个事件侦听器：

```
$('.datepicker').datepicker({
       format: 'yyyy-mm-dd'
}); 
```

但是，如果这些点击事件中的每一个都将运行不同的函数，那么您最好为每个事件设置不同的点击事件侦听器。

但是，这并不意味着您必须在 1 个长 DOM 就绪函数中列出您的点击事件侦听器。您可以使用 Javascript OOP 来更好地组织您的点击事件。

你可能会发现这篇关于 Javascript OOP 的文章对你有一些用处：

[http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/](http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/)

# php - 如何使用 PHP 将具有特殊字符的值存储到 HTML 隐藏字段中

> ID：10283433
> 
> 赞同：0
> 
> 时间：2012-04-23T15:23:09.707
> 
> 标签：php

这可能是一个非常简单的问题，但我无法弄清楚。我需要使用 PHP 将一些包含特殊字符的值存储到 HTML 隐藏字段中，例如`5' 5''`指示人的身高。

该值存储在 MySql 数据库中。我尝试过这样的事情

```
echo "<input type='hidden' id='ed_your_height' name='hd_your_height' 
value=".html_entity_decode($your_heigth)."/>"; 
```

和

```
echo "<input type='hidden' id='ed_your_height' name='hd_your_height' 
value=".htmlentities($your_heigth)."/>"; 
```

但它给了我价值`5'`，而不是`5' 5''`在这两种情况下。我需要在下拉列表中显示这些值并进行一些比较。

那么如何将带有特殊字符的值存储到 HTML 隐藏字段中（从数据库中检索）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:27:33.660

使用[`htmlspecialchars`](http://php.net/htmlspecialchars).

```
value="<?=htmlspecialchars($string)?>" 
```

假设 short_open_tag 处于打开状态（坏）或者您使用的是 PHP 5.4（好）。否则，请使用完整`<?php echo`表格。

PS：首先你遇到问题的原因是因为你没有引用你的属性 - 如果你使用浏览器的 View Source 选项，你会看到输出是`value=5' 5''`这样的，它被解释为一个值`'5`和一个自定义布尔属性称为`5''`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:25:44.973

使用`htmlentities()`and`html_entity_decode()`与正确的标志。

在客户端

```
<input type="text name="fieldname" value="<?php echo htmlentities($string, ENT_QUOTES, 'utf-8'); ?>"> 
```

在服务器端：

```
$string = html_entity_decode($_POST['fieldname'], ENT_QUOTES, 'UTF-8'); 
```

# c - 简写 C while 循环

> ID：10283437
> 
> 赞同：0
> 
> 时间：2012-04-23T15:23:17.220
> 
> 标签：c, optimization, while-loop

快一个。以下是等价的吗？他们中的任何一个是否比其他人更经济或更“正确”？

`while (x==y) {}`, `while (x==y) ;`& `while (x==y);`.

注意第二个而不是第三个中的右表达式括号和分号之间的空格。

过去我倾向于使用第一个。塔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:26:05.267

第二个和第三个没有区别。

第一个的唯一区别是可读性 - 你明确声明你想要一个无限循环，而不是你有一个错字（额外的`;`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:25:24.040

它们都是完全等价的，并且应该使用任何半理智的编译器生成相同的程序。空格不重要，两者都`{}`代表`;`空语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:30:00.757

通常当你做这样的事情时，你仍然把分号放在它自己的行上，以表明它不仅仅是由酸添加的：

```
while (whatever)
    ; 
```

当然，您通常只在`whatever`有副作用时才这样做，例如：

```
// skip to end of line:
while (((ch=getchar()) != '\n') && (ch != EOF))
    ; 
```

但是，您使用的空语句的确切语法形式极不可能影响生成的代码，因此这纯粹是针对读者而不是编译器进行优化。

# python - 检测 python-xmpp 超时

> ID：10283439
> 
> 赞同：3
> 
> 时间：2012-04-23T15:23:19.067
> 
> 标签：python, timeout, xmpp, ping, disconnect

我有一个应用程序可以发送 xmpp 消息。这些场合很少见（有时几天都没有），但又可能成群结队地出现。我什么都没用，我只想发送。直截了当的方法会遇到未检测到的超时。最后一个`send()`没有发生（接收者没有得到任何东西）但没有报告问题就返回（返回一个简单的 id，好像一切正​​常）。只有*下一次*调用`send()`then 会引发 IOError('Disconnected from server.')。

我可以为每条消息持续断开/重新连接，但我不喜欢这样，因为有时这会经常断开和重新连接（我不知道服务器是否在一秒钟内多次欣赏这一点）。

我可以尝试在[此问题](https://stackoverflow.com/questions/4269441/simple-continuously-running-xmpp-client-in-python)中作为答案给出的方法，但我真的不需要接收 XMPP 回复。

**问题：**有没有一种简单的方法可以在发送之前或之后**检测连接超时**而不尝试发送第二条消息（如果一切正常，这会向接收者发送垃圾邮件）？

我的直接方法：

```
import xmpp

def connectXmppClient(fromJidName, password):
  fromJid = xmpp.protocol.JID(fromJidName)
  xmppClient = xmpp.Client(fromJid.getDomain(), debug=[])
  connection = xmppClient.connect()
  if not connection:
    raise Exception("could not setup connection", fromJid)
  authentication = xmppClient.auth(
    fromJid.getNode(), password, resource=fromJid.getResource())
  if not authentication:
    raise Exception("could not authenticate")
  return xmppClient

def sendXmppMessage(xmppClient, toJidName, text):
  return xmppClient.send(xmpp.protocol.Message(toJidName, text))

if __name__ == '__main__':
  import sys, os, time, getpass
  if len(sys.argv) < 2:
    print "Syntax: xsend fromJID toJID"
    sys.exit(0)
  fromJidName = sys.argv[1]
  toJidName = sys.argv[2]
  password = getpass.getpass()
  xmppClient = connectXmppClient(fromJidName, password)
  while True:
    line = sys.stdin.readline()
    if not line:
      break
    print xmppClient.isConnected()
    id = sendXmppMessage(xmppClient, toJidName, line)
    print id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:40:07.057

您需要使用[xmppClient.RegisterDisconnectHandler()](http://xmpppy.sourceforge.net/apidocs/xmpp.client.CommonClient-class.html#RegisterDisconnectHandler)注册断开连接处理程序。这使您可以指定将在断开连接时调用的函数。

# asp.net - 我可以只使用 AjaxControlToolKit NoBot 而不是验证码吗？

> ID：10283442
> 
> 赞同：1
> 
> 时间：2012-04-23T15:23:28.283
> 
> 标签：asp.net, security, ajaxcontroltoolkit, captcha, bots

[仅使用AjaxControlToolKit 的 NoBot](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/NoBot/NoBot.aspx)控件而不是使用验证码控件是否仍然安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:43:04.043

NoBot 正在检查

1.  快速回帖
2.  多次回帖
3.  浏览器上的 Javascript 被禁用。

这意味着，当爬虫找到页面并立即回发，或者不支持 javascript 时，不允许回发。现在，如果用户不支持 javascript，或者 javascript 出于任何原因抛出错误，则根本无法正常工作。

作为低流量网站验证码的替代品，这是一个非常好的好主意，这意味着对于您没有收到这么多垃圾邮件的网站，它不是 100% 有效，但它在大多数情况下都有效。如果一个好的垃圾邮件发送者被攻击，那么你可以绕过这个，但如果你没有很多攻击并且你只是想避免一些低技术的垃圾邮件发送者，这可以工作。

# sencha-touch-2 - Sencha touche 表单验证

> ID：10283445
> 
> 赞同：1
> 
> 时间：2012-04-23T15:23:29.250
> 
> 标签：sencha-touch-2

我正在使用 sencha touch 创建我的第一个应用程序。我对表单验证有疑问。这是表格：

```
var form = new Ext.form.FormPanel({
        title: 'Activity',
        items: [{
            xtype: 'fieldset',
            items: [{
                xtype: 'textfield',
                name : 'sector',
                label: 'Sector',
                required: true
            },
            {
                xtype: 'selectfield',
                name : 'city',
                label: 'City',
                options: [
                {
                    text: '*',
                    value: '*'
                },
                {
                    text: 'First Option',  
                    value: 'first'
                },
                {
                    text: 'Second Option', 
                    value: 'second'
                },
                {
                    text: 'Third Option',  
                    value: 'third'
                }]
            },
            {
                xtype: 'textfield',
                name : 'nation',
                label: 'Nation',
                required: true
            },
            {
                xtype: 'toolbar',
                docked: 'bottom',
                layout: {
                    pack: 'center'
                },
                items: [{
                    xtype: 'button',
                    text: 'Cerca',
                    handler: function() {
                        formSettori.submit({
                            url: 'book.php',
                            method: 'GET',
                            success: function() {
                                Ext.Msg.alert('OK');
                            },
                            failure: function() {
                                Ext.Msg.alert('NO');
                            }
                        });
                    }
                },
                {
                    xtype: 'button',
                    text: 'Reset',
                    handler: function() {
                        form.reset();
                    }
                }]
            }]
        }]
    }); 
```

表单只有三个字段：-activities -city​​ -nation

各个领域都需要。活动和国家不能为空，而城市不能等于*

如何控制字段？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:20:37.630

没有内置的方法来进行表单验证。你必须自己做。

最简单的方法是使用私有 Ext.form.Panel 方法[getFields](http://docs.sencha.com/touch/2-0/#!/api/Ext.form.Panel-method-getFields)循环每个字段并确保它们不为空。

```
var fields = form.getFields(),
    field, name, isEmpty;

for (name in fields) {
    field = fields[name];
    isEmpty = (!field.getValue() || field.getValue() == "");

    if (isEmpty) {
        field.addCls('x-invalid');
    } else {
        field.removeCls('x-invalid');
    }
} 
```

如果该字段为空，则我们添加`x-invalid`类（以便您可以设置样式）。

# javascript - 了解 Ajax 调用流程

> ID：10283446
> 
> 赞同：-1
> 
> 时间：2012-04-23T15:23:29.643
> 
> 标签：javascript, ajax

我对 Ajax 的调用流程有点困惑，有人可以帮我吗？

我的 HTML：

```
<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="myFunction()">Change Content</button> 
```

我的 JavaScript：

```
var xmlhttp;

function loadXMLDoc(url, cfunc) {
    alert("4");
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    alert("5");
    xmlhttp.onreadystatechange = cfunc;
    alert("6");
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}

function myFunction() {
    alert("1");
    loadXMLDoc("ajax_info.txt", function() {
        alert("2");
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            alert("3");
            document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
        }
    });
}​ 
```

​</p>

根据我的警报框顺序应该是

> 1 2 3 4 5 6

但它是

> 1456222223

有人可以解释一下为什么该函数被称为 1'st。在参数值准备好之前，我的印象是无法调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:25:34.790

`loadXMLDoc(...)`是一个普通的函数调用。
它立即执行。

您传递给它的回调（包含`alert("2")`）仅在调用它时执行；即，当 XMLHTTPRequest 引发 onreadystatechanged 时。

onreadystatechanged 会针对不同的状态更改多次触发，如您在`readyState`属性中所见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:29:00.463

因为，在触发第一个警报后，您会立即调用`loadXMLDoc`，并将匿名函数*传递给*它（其中包含警报“2”和“3”。请注意，您没有执行此函数；**只是**传递对它的引用，所以`loadXMLDoc`可以稍后执行。

这就解释了为什么你首先看到“1 4 5 6”。

`xmlhttp.onreadystatechange = cfunc;`将我们传递给的匿名函数设置`loadXMLDoc`为[`onreadystatechange`处理程序](https://developer.mozilla.org/en/XMLHttpRequest#Events)。在一个 AJAX 请求期间`onreadystatechange`执行*多次；*每次浏览器确定请求的状态已更改（请注意，`readyState`每次发生这种情况时，AJAX 请求的值不一定会更改）。

这解释了为什么您会看到多次输出“2”。

```
if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    alert("3");
    document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
} 
```

在`onreadystatechange`处理程序中，您正在检查[`readyState`](https://developer.mozilla.org/en/XMLHttpRequest#Properties)is`4`和`status`is 是否为 200。A `readyState`of 4 表示请求已完成，检查是否`status == 200`检查[HTTP 响应代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

这就是为什么你最后看到“3”的原因；因为它仅在请求完成时执行（由于`if`语句中的条件）。

有关更多信息，您可能希望查看有关发出 AJAX 请求的[MDC 文章。](https://developer.mozilla.org/en/XMLHttpRequest)

# mysql - SQL 查询、有效期和连接：如何使其工作？

> ID：10283453
> 
> 赞同：1
> 
> 时间：2012-04-23T15:24:09.393
> 
> 标签：mysql, sql

以下 3 个表格都有一个“ `date_v_end`”字段，即有效日期。只要它是`NULL`这意味着它是当前的“好”值。

例如，要选择表的当前值，`categorie`我们可以简单地执行`SELECT * FROM categorie WHERE date_v_end IS NULL`.

我有 3 张桌子：

*   一张桌子`categorie`（英文分类）
*   一个表“一对多” `categorie_produit`（类别 <=> 英文产品）
*   一张桌子`produit`（英文产品）

我想查询所有*current* `categories`和它们的一对多，**即使类别没有产品**（= 没有行）`produit`，我*仍然需要一个结果。* **`produit_categorie`**

 **在拥有“ `date_v_end`”字段之前，我是这样做的：

```
SELECT
  c.id AS c_id,
  c.titre AS c_titre,
  c.description AS c_description,
  cp.id_categorie AS cp_id_categorie,
  cp.id_produit AS cp_id_produit,
  p.id AS p_id,
  p.titre AS p_titre,
  p.description AS p_description
FROM categorie_produit cp
LEFT OUTER JOIN categorie c
ON c.id=cp.id_categorie
LEFT OUTER JOIN produit p
ON p.id=cp.id_produit
ORDER BY c_id,p_id; 
```

它就像一个魅力。现在我正在尝试使用新的“ `date_v_end`”字段修改查询。我已经添加了三个子句`WHERE c.date_v_fin IS NULL AND cp.date_v_fin IS NULL AND p.date_v_fin IS NULL`。你去：

```
SELECT
  c.id AS c_id,
  c.titre AS c_titre,
  c.description AS c_description,
  cp.id_categorie AS cp_id_categorie,
  cp.id_produit AS cp_id_produit,
  p.id AS p_id,
  p.titre AS p_titre,
  p.description AS p_description
FROM categorie_produit cp
LEFT OUTER JOIN categorie c
ON (c.id=cp.id_categorie AND c.date_v_fin IS NULL)
LEFT OUTER JOIN produit p
ON (p.id=cp.id_produit AND p.date_v_fin IS NULL)
WHERE cp.date_v_fin IS NULL
ORDER BY c_id,p_id; 
```

这可以正常工作，除非在一种情况下：当有 a`categorie_produit` **并且**它的“ `date_v_end`”**不是** `NULL`：在添加这个该死的“ ”字段之前，`date_v_end`我得到了*一行*填充了 c_id 、c_titre 和 c_description 以及其他字段`NULL`（ 、、、、、 ）的行。现在没有结果。`cp_id_categorie``cp_id_produit``p_id``p_titre``p_description`

我真的不知道如何修改我的查询以使其正常工作。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:32:47.513

您需要将`IS NULL`支票移动到 JOIN 中。

在你加入的版本中，不管`date_v_fin`字段，然后过滤结果。

在下面的查询中，仅当 date_v_fin 字段为 NULL 时才加入记录。

```
SELECT
  c.id AS c_id,
  c.titre AS c_titre,
  c.description AS c_description,
  cp.id_categorie AS cp_id_categorie,
  cp.id_produit AS cp_id_produit,
  p.id AS p_id,
  p.titre AS p_titre,
  p.description AS p_description
FROM
  categorie c
LEFT OUTER JOIN
  categorie_produit cp
    ON  c.id=cp.id_categorie
    AND cp.date_v_fin IS NULL
LEFT OUTER JOIN
  produit p
    ON  p.id=cp.id_produit
    AND p.date_v_fin IS NULL
WHERE
  c.date_v_fin IS NULL
ORDER BY
  c_id,
  p_id 
```**

# flash - MXML：ItemRenderer 将数据行转发到按钮单击事件

> ID：10283454
> 
> 赞同：0
> 
> 时间：2012-04-23T15:24:12.407
> 
> 标签：flash, apache-flex, actionscript, mxml

我使用 flex spark itemrenderer 来可视化数据行。每行还有一个按钮，该按钮应该根据它所在的行执行某些操作。为此，我需要在单击按钮时访问数据行。但我不知道如何得到它。

这是 itemrenderer 的外观：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/halo">
<fx:Script>
<![CDATA[
private function click(e:flash.events.Event):void
{
    //how do i get access to the data of the row here?
}
]]>
</fx:Script>

<s:HGroup>
 <s:Label text="{data.GameName}" width="300" />
 <s:Button label="Start" click="click(event)" />
</s:HGroup>

</s:ItemRenderer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:49:58.280

[itemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ItemRenderer.html)的[data](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataRenderer.html#data)属性将包含该 itemRenderer 当前正在显示的 dataProvider 中的元素。

您可以使用[itemIndex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ItemRenderer.html#itemIndex)属性在列表的 dataProvider 中获取数据元素的索引。

我认为您需要前两个中的一个，但是由于“数据行”对我来说含糊不清，因此这里有一些其他的想法可能会有所帮助。

如果需要访问行的实例；这与 itemRenderer 实例没有什么不同，因此您可以使用`this`关键字访问单击按钮的 itemRenderer 上的属性。

如果您需要在所有列表的 itemRenderers 的上下文中知道 itemRenderer 的索引；这将变得更加困难。由于 itemRenderers 在列表滚动时被重用，因此渲染器实例的数量与 dataProvider 中的项目数量之间没有一对一的关系。不过，我不确定你为什么需要它，所以我猜这不是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:50:37.677

我在 FDT 中尝试了您的代码，它立即警告我使用***click***作为函数名，因为它是保留字。我不确定这是否是您的问题。

使用 mx 而不是 spark 我这样做了：

```
 public function rackDataClick(event : ListEvent) : void
        {
            rackID.text = event.itemRenderer.data.rackBarcode;
            racks.barcode = event.itemRenderer.data.rackBarcode;
            racks.rackName = event.itemRenderer.data.rackName;
            racks.maxRow = event.itemRenderer.data.maxRow as Number;
            racks.maxCol = event.itemRenderer.data.maxCol as Number;
            racks.location = event.itemRenderer.data.location;
        } 
```

. . .

```
 <s:FormItem>
        <mx:DataGrid id                    ="rackData"
                     dataProvider          ="{rackRequest.lastResult.rack.data}"
                     verticalScrollPolicy  ="on"
                     horizontalScrollPolicy="on"
                     itemClick             ="rackDataClick(event);"
                     includeIn             ="default">
            <mx:columns>
                <mx:DataGridColumn headerText="Rack ID"
                                   dataField ="rackBarcode"/>
                <mx:DataGridColumn headerText="Rack Name"
                                   dataField ="rackName"/>
                <mx:DataGridColumn headerText="Max Rows"
                                   dataField ="maxRow"/>
                <mx:DataGridColumn headerText="Max Columns"
                                   dataField ="maxCol"/>
                <mx:DataGridColumn headerText="Location"
                                   dataField ="location"/>
            </mx:columns>
        </mx:DataGrid>
    </s:FormItem> 
```

我知道这不是您要寻找的，但有时任何示例都会对搜索有所帮助。

# javascript - 从 UL 中删除以编程方式添加的 LI

> ID：10283456
> 
> 赞同：1
> 
> 时间：2012-04-23T15:24:17.780
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用 asp.net MVC 3，我正在尝试删除通过 HTTP Post 添加的 LI。

我可以删除 UI 中已经存在的项目，但没有添加新项目。

这是用户界面代码：

```
<a href="#" id="addNew">Add New</a>
<div id="ulList">
    <ul>
        <li id="li_1"><a href="#" id="a_1" class="aLink">1</a></li>
        <li id="li_2"><a href="#" id="a_2" class="aLink">2</a></li>
        <li id="li_3"><a href="#" id="a_3" class="aLink">3</a></li>
    </ul>
</div>
<script type="text/javascript">

    $('#addNew').on("click", function () {
        $.ajax({
            url: '@Url.Action("AddItem")',
            type: "POST",
            data: { id: 4 },
            success: function (data) {
                $('#ulList ul').append(data);
            }
        });
    });

    $('.aLink').on("click", function () {
        RemoveItem($(this).attr('id'));
    });

    function RemoveItem(id) {
        id = id.substring(id.indexOf("_") + 1);
        $.ajax({
            url: '@Url.Action("RemoveItem")',
            type: "POST",
            data: { id: id },
            success: function (event, ui) {
                $('#li_' + id).remove();
            }
        });

    }
</script> 
```

AddItem 在后面的代码中调用 AddItem 并返回简单的字符串。

```
[HttpPost]
        public ActionResult AddItem(int id)
        {
            return Content(@"<li id=""li_4""><a href=""#"" id=""a_4"" class=""aLink"">4</a></li>");
        } 
```

该项目确实被添加，但请注意，当您单击新添加的项目“4”时，它不会被删除，或者调用了删除项目。请建议我需要做什么才能使其正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:45:06.950

```
$('.aLink').on("click", function () { 
    RemoveItem($(this).attr('id')); 
}); 
```

您的 jQuery 事件处理程序只会将事件附加到页面上最初带有`.on`. 为了让您的事件处理动态添加的元素，您有 2 个选项，具体取决于您运行的 jQuery 版本。

V1.4 -> 1.7 .delegate()

```
$('#ulList').delegate("click","a" function () { 
    RemoveItem($(this).attr('id')); 
}); 
```

v1.7+ 修正 .on() -> 重新定位以指向父容器

```
$('#ulList').on("click","a", function () { 
    RemoveItem($(this).attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T15:29:35.153

强烈建议使用[jQuery 1.7+](http://code.jquery.com/jquery-1.7.2.min.js)和[on()](http://api.jquery.com/on/)：

```
$("#ulList").on("click", ".aLink", function () {
    RemoveItem($(this).attr("id"));
}); 
```

或者，如果您使用的版本低于 jQuery 1.7，请使用[delegate()](http://api.jquery.com/delegate/)：

```
$("#ulList").delegate(".aLink", "click", function() {
    RemoveItem($(this).attr("id"));
}); 
```

# visual-studio-2010 - 在 Visual Studio 中共享指向代码中某个位置（源文件/行号）的链接

> ID：10283458
> 
> 赞同：10
> 
> 时间：2012-04-23T15:24:20.557
> 
> 标签：visual-studio-2010, tfs, share

我正在寻找适用于 Visual Studio 2010 的插件（可能是 TFS 插件），它在代码编辑器中添加“复制 uri”上下文菜单条目，并且可以将文件/行号复制粘贴到 IM 对话（Skype）中或电子邮件，当然单击链接会在正确的行号处打开项目/文件（如果可能，在现有实例中）。

我在家工作，如果能够通过Skype（有时是电子邮件）轻松地与团队共享代码位置，那就太好了。

我用谷歌搜索并没有发现任何东西，但它可能在像 Resharper 这样的大插件中可用并且没有做广告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-26T00:42:35.920

我为此写了一个扩展。它被称为 CodeLink：

[https://marketplace.visualstudio.com/items?itemName=AuriRahimzadeh.CodeLinktm](https://marketplace.visualstudio.com/items?itemName=AuriRahimzadeh.CodeLinktm)

我正在寻找测试人员和反馈。我只有这么多的解决方案来测试它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:42:45.987

据我所知，不存在这样的扩展。

但是，创建一个在源代码上下文菜单中添加一个条目的 VSX 并不难，该条目将使用 TFS Api 从本地路径获取源代码控制路径，然后将结果放入剪贴板。

与此同时，没有简单的方法可以提出解决方法，因为我不知道有一种方法可以从 Visual Studio 中的本地路径获取源代码管理路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-01T00:13:17.353

它不是插件，但您现在可以将行参数（例如 &line=1234）添加到 TFS 文件浏览器 url，然后将该链接通过电子邮件发送给同事，它将在浏览器中打开文件并突出显示指定的行。[![查看示例](../Images/bbcd5f45f0defd463b7d0bf3c80cc467.png)](https://i.stack.imgur.com/7dTDC.png)

# c# - 如何监视文本文件并解析新行？

> ID：10283461
> 
> 赞同：3
> 
> 时间：2012-04-23T15:24:34.543
> 
> 标签：c#, sql-server

我想知道是否有一种方法可以在不锁定 .txt 文件的情况下对其进行监视，并解析新附加的行以便将其发送到数据库。

我知道`FileSystemWatcher`将监视 txt 文件而不锁定它，并在发生更改时通知我。问题是它没有告诉已附加的数据行。我看过的所有示例都不包括显示新添加的行或对新数据进行任何处理的部分。我的程序具有以下结构：

```
static void Main(string[] args)
{

  //string line;

  //createWatcher (FileSystemWatcher)
  foreach (string line in getLines(@"C://Documents/log.txt"))
  {
    string teststring = line;         
    string[] parts = line.Split(' ', ',', '-', '>', '[', ']');
    StringBuilder builder = new StringBuilder();

    foreach (string h in parts)
    {
      builder.Append(h).Append(" ");
    }

    string result = builder.ToString();
    string cleanedString = System.Text.RegularExpressions.Regex.Replace(result, @"\s+", " ");
    string trimString = cleanedString.Trim();
    trimString = trimString.Remove(trimString.Length - 7);

    //Console.WriteLine(trimString);

    //Process new lines (parse/split)
    //Connect and send to database
  }
} 
```

所以我的目标是监控 .txt 文件而不锁定它。

1.  读取此文件以获取现有数据，并等待附加数据。
2.  然后我想解析这些数据并将其发送到数据库。

有谁知道如何最好地解决这个问题？或者有一个好的教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:35:45.980

最好的办法是让文件系统观察程序触发的代码跟踪`Position`正在读取文件的流中的内容。这是一些伪代码：

```
if(no stored position)
  start at beginning of file
else
{
  streamOfFile.Seek(storedPosition)
  read until end of file
  store stream.Postition
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:46:46.427

这可以通过在您上次阅读文件时跟踪文件的长度来完成，然后下次从该点开始。但是，由于您可能在操作系统写入的同时从文件中读取，因此存在很多竞争条件。

您不能保证对文件的唯一更改是追加，这不是您更大的问题吗？如果我在文件顶部插入一行或替换整个文件会发生什么？

# r - 最小二乘函数中 R While 循环的更快方法

> ID：10283463
> 
> 赞同：1
> 
> 时间：2012-04-23T15:24:36.687
> 
> 标签：r

我正在尝试加速下面的函数（用于以后的引导），该函数执行直线的最小二乘拟合，x 和 y 都有误差。我认为主要的挂断是在while循环中。函数的输入值是观测值`x`和`y` 以及这些值`sx`和中的绝对不确定性`sy`。

```
york <- function(x, y, sx, sy){

    x <- cbind(x)
    y <- cbind(y)

    # initial least squares regression estimation
    fit <- lm(y ~ x)
    a1 <- as.numeric(fit$coefficients[1])   # intercept
    b1 <- as.numeric(fit$coefficients[2])   # slope
    e1 <- cbind(as.numeric(fit$residuals))  # residuals
    theta.fit <- rbind(a1, b1)

    # constants
    rho.xy <- 0     # correlation between x and y

    # initialize york regression
    X <- cbind(1, x)
    a <- a1
    b <- b1
    tol <- 1e-15    # tolerance
    d <- tol
    i = 0

    # york regression
    while (d > tol || d == tol){
        i <- i + 1
        a2 <- a
        b2 <- b
        theta2 <- rbind(a2, b2)
        e <- y - X %*% theta2
        w <- 1 / sqrt((sy^2) + (b2^2 * sx^2) - (2 * b2 * sx * sy * rho.xy))
        W <- diag(w)
        theta <- solve(t(X) %*% (W %*% W) %*% X) %*% t(X) %*% (W %*% W) %*% y

        a <- theta[1]
        b <- theta[2]

        mswd <- (t(e) %*% (W%*%W) %*% e)/(length(x) - 2)
        sfit <- sqrt(mswd)
        Vo <- solve(t(X) %*% (W %*% W) %*% X)
        dif <- b - b2
        d <- abs(dif)
        }

    # format results to data.frame
    th <- data.frame(a, b)
    names(th) <- c("intercept", "slope")
    ft <- data.frame(mswd, sfit)
    names(ft) <- c("mswd", "sfit")
    df <- data.frame(x, y, sx, sy, as.vector(e), diag(W))
    names(df) <- c("x", "y", "sx", "sy", "e", "W")

    # store output results
    list(coefficients = th,
        vcov = Vo,
        fit = ft,
        df = df)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:47:19.777

您可以通过一些简单的更改来加快您的功能。首先，您应该将不需要的任何内容移出 while 循环。例如，您`solve`对相同的数据运行两次。此外，`sfit`当您仅在 while 循环的最后一次迭代中使用它时，您会在每次迭代中计算。

这是我的代码：

```
york.fast <- function(x, y, sx, sy, tol=1e-15){
    # initial least squares regression estimation
    fit <- lm(y ~ x)
    theta <- fit$coefficients
    # initialize york regression
    X <- cbind(1, x)
    d <- tol
    # york regression
    while (d >= tol){
        b2 <- theta[2]
        # w <- 1 / sqrt((sy^2) + (b2^2 * sx^2) - (2 * b2 * sx * sy * rho.xy)) # rho.xy is always zero!
        w <- 1 / sqrt(sy^2 + (b2^2 * sx^2))  # rho.xy is always zero!
        # W <- diag(w)
        # w2 <- W %*% W
        w2 <- diag(w^2) # As suggested in the comments.
        base <- crossprod(X,w2)
        Vo <- solve(base %*% X)
        theta <- Vo %*% base %*% y
        d <- abs(theta[2] - b2)
     }
     e <- y - X %*% theta
     mswd <- (crossprod(e,w2) %*% e) / (length(x) - 2)
     sfit <- sqrt(mswd)

    # format results to data.frame
    th <- data.frame(intercept=theta[1], slope=theta[2])
    ft <- data.frame(mswd=mswd, sfit=sfit)
    df <- data.frame(x=x, y=y, sx=sx, sy=sy, e=as.vector(e), W=diag(diag(w)))

    # store output results
    list(coefficients = th, vcov = Vo, fit = ft, df = df)
} 
```

一个小测试：

```
n=225
set.seed(1)
x=rnorm(n)
y=rnorm(n)
sx=rnorm(n)
sy=rnorm(n)

system.time(test<-york.fast(x,y,sx,sy)) # 0.37 s
system.time(gold<-york(x,y,sx,sy)) # 1.28 s 
```

我注意到它`rho.xy`总是固定为零。这可能是一个错误吗？

我还注意到您经常使用一列`cbind`将 a 转换`vector`为 a `matrix`。所有向量都被自动视为具有一列的矩阵，因此您可以避免大量额外的代码。

正如@joran 提到的，容差水平设置得太小，以至于需要很长时间才能收敛；考虑使用更大的公差。

# sql - SQL查询where子句

> ID：10283464
> 
> 赞同：5
> 
> 时间：2012-04-23T15:24:47.220
> 
> 标签：sql, where-clause

我的 sql 查询中有这一行：

```
WHERE client = $id
    AND (isinvoiced = 0) OR (isinvoiced = 1 and isrecurring = 1) 
```

得到的结果比我预期的要多。但是，如果我这样写：

```
WHERE client = $id
    AND (isinvoiced = 0) OR (isinvoiced = 1 and isrecurring = 1 and client = $id) 
```

然后它得到了我想要的结果，但这是写这个的最好方法吗？我只是不想再遇到此代码的任何问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T15:26:12.197

您需要`()`在整个`AND`子句周围再设置一组。这表明`client = $id`必须为真，其他任何一个条件也必须为真 =`isinvoiced = 0`或 的组合`isinvoiced = 1 and isrecurring = 1`。

```
 WHERE client = $id
    AND ((isinvoiced = 0) OR (isinvoiced = 1 and isrecurring = 1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:27:12.127

`AND`在您的子句周围添加一个括号：

```
WHERE client = $id
    AND ((isinvoiced = 0) OR (isinvoiced = 1 and isrecurring = 1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:26:54.277

```
where client = $id
    and (
        isinvoiced = 0
        or (
            isinvoiced = 1
            and isrecurring = 1
            )
        ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:27:18.207

你想要的是这样的：

```
WHERE client = $id AND ((isinvoiced = 0) OR (isinvoiced = 1 and isrecurring = 1)) 
```

如果您不放置额外的 blaquets，它将`OR`与客户限制并产生更多结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T08:28:15.630

对于 SQL，您应该旨在以合[取范式](http://en.wikipedia.org/wiki/Conjunctive_normal_form)（“一系列`AND`子句”）编写搜索条件。有各种[重写规则](http://en.wikipedia.org/wiki/Rewriting)可以帮助实现这一点。

[分配重写法则](http://en.wikipedia.org/wiki/Rewriting)在这种情况下很有用，即

```
( P AND Q ) OR R   <=>   ( P OR R ) AND ( Q OR R ) 
```

在你的情况下：

```
( isinvoiced = 0 ) OR ( isinvoiced = 1 AND isrecurring = 1 ) 
```

可以改写为：

```
( isinvoiced = 0 OR isinvoiced = 1 ) AND ( isinvoiced = 0 OR isrecurring = 1 ) 
```

因此，没有笨拙的括号的整个搜索条件：

```
....
WHERE client = $id
      AND ( isinvoiced = 0 OR isinvoiced = 1 ) 
      AND ( isinvoiced = 0 OR isrecurring = 1 ); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-23T15:27:12.037

如果删除最初的 where 子句

```
remove -> WHERE client = $id 
```

并且只有

```
 WHERE (isinvoiced = 0) OR (isinvoiced = 1 and isrecurring = 1 and client = $id) 
```

这会让你得到你想要的结果吗？

# python - Kivy安装找不到GL/gl.h？

> ID：10283465
> 
> 赞同：11
> 
> 时间：2012-04-23T15:24:54.023
> 
> 标签：python, kivy

我只是想安装 kivy 来测试它并制作一些
我安装了 cython 的应用程序，
然后我输入了终端（ubuntu 12.04）：

```
sudo easy_install kivy 
```

作为答案，我得到了这个：

```
Searching for kivy
Reading http://pypi.python.org/simple/kivy/
Best match: Kivy 1.2.0
Downloading http://pypi.python.org/packages/source/K/Kivy/Kivy-1.2.0.tar.gz#md5=468da8a353c2ea4936eb92d71403c960
Processing Kivy-1.2.0.tar.gz
Running Kivy-1.2.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-rcrkeK/Kivy-1.2.0/egg-dist-tmp-xdOqxi
[INFO   ] Kivy v1.2.0
WARNING: GLES 2.0 headers are not found
Fallback to Desktop opengl headers.
Build configuration is:
 * use_opengl_es2  =  False
 * use_glew  =  False
 * use_opengl_debug  =  False
 * use_mesagl  =  False
Generate config.h
Generate config.pxi
In file included from /tmp/easy_install-rcrkeK/Kivy-1.2.0/kivy/graphics/texture.c:273:0:
/tmp/easy_install-rcrkeK/Kivy-1.2.0/kivy/graphics/gl_redirect.h:38:22: fatal error: GL/gl.h: El fitxer o directori no existeix
compilation terminated.
 error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

我有什么问题吗？还是我需要安装一些东西？

PS 抱歉，加泰罗尼亚语 El fitxer o Directori no existeix 表示找不到文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T19:05:21.393

通过 apt 安装 libgl1-mesa-dev 包。另外，也许您希望在启动板上查看构建说明： [http ://bazaar.launchpad.net/~kivy-team/kivy/packaging/view/head:/debian/control](http://bazaar.launchpad.net/~kivy-team/kivy/packaging/view/head:/debian/control)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:50:58.683

您可能必须安装 mesa-common-dev，另请参阅：[Debian 软件包搜索](http://packages.debian.org/search?mode=path&suite=squeeze&section=all&arch=any&searchon=contents&keywords=GL/gl.h)。
如果您有 Nvidia 卡，则可能需要安装 nvidia-glx-dev。
您可以对`glut.h`包含在 freeglut3-dev 中的文件进行同样的实验。再次，查看包含该文件[的 Debian 软件包。](http://packages.debian.org/search?mode=path&suite=squeeze&section=all&arch=any&searchon=contents&keywords=glut.h)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T16:49:38.203

```
sudo apt-get install libgl1-mesa-dev 
```

# jquery - 如何使用 jquery 通过类名设置边框颜色属性？

> ID：10283466
> 
> 赞同：0
> 
> 时间：2012-04-23T15:24:55.393
> 
> 标签：jquery

我可以通过使用 jquery css 方法设置边框颜色属性，但是当通过 IE 和 Firefox 读取边框颜色属性时，我得到不同的格式值。为了解决这个问题，我添加了一个包含边框颜色的类名，如下所示：

```
$('#'+ pageSection[sectionIndex] +'').addClass("addBordeColor");

.addBorderColor
{
    border: 2px color black;
} 
```

这无法正常工作。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:26:34.887

通过修复语法错误：

代替

```
$("#" +pageSection[sectionIndex]").addClass("addBordeColor") 
```

和

```
$("#" +pageSection[sectionIndex]).addClass("addBorderColor") 
```

# android - Android 前置摄像头拍摄倒置照片

> ID：10283467
> 
> 赞同：18
> 
> 时间：2012-04-23T15:24:58.363
> 
> 标签：android, camera

我有这个以纵向模式运行的应用程序，作为一项活动的一部分，我有一个相机对象作为其中的片段运行。

我可以选择从前置摄像头切换到后置摄像头，并且在使用后置摄像头拍照时一切都很好。

但是，当我使用前置摄像头拍照时，它们会反转 180 度。现在我知道这可能与处于纵向模式的方向有关，但是将其置于横向模式只会扼杀我的应用程序的想法。

无论如何，这是否可以修复，以便拍摄的照片与您在预览中看到的照片相同？

```
 listener = new OrientationEventListener(this.getActivity(),SensorManager.SENSOR_DELAY_NORMAL){

        @Override
        public void onOrientationChanged(int orientation) {
            // TODO Auto-generated method stub
            if (orientation == ORIENTATION_UNKNOWN) return;
             android.hardware.Camera.CameraInfo info =
                    new android.hardware.Camera.CameraInfo();
             android.hardware.Camera.getCameraInfo(mCurrentCamera, info);
             orientation = (orientation + 45) / 90 * 90;
             int rotation = 0;
             if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
                 rotation = (info.orientation - orientation + 360) % 360;
             } else {  // back-facing camera
                 rotation = (info.orientation + orientation) % 360;
             }
             if (mCamera.getParameters() != null){
             Camera.Parameters mParameters = mCamera.getParameters();

             mParameters.setRotation(rotation);
             mCamera.setParameters(mParameters);
             }
        }

    };
    listener.enable();
    if (listener.canDetectOrientation())
        Log.d("Orientation Possible", "Orientation Possible"); 
```

问题是，在我尝试拍照后，这个东西崩溃了。此外，如果它仅在预览模式下运行一段时间，它会再次崩溃。我还应该补充一点，在另一种方法中我正在这样做。

```
 public void switchCamera(Camera camera) {
    setCamera(camera);
    try {
        camera.setPreviewDisplay(mHolder);
    } catch (IOException exception) {
        Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
    }
    Camera.Parameters parameters = camera.getParameters();
    parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);

    requestLayout();

    try{
        camera.setParameters(parameters);
    }
    catch (RuntimeException ex){
        Log.d("Preview", "Failure to set proper parameters");
        //need to improve this method
        if (mSupportedPreviewSizes != null) {
            Camera.Size cs = mSupportedPreviewSizes.get(0);
            parameters.setPreviewSize(cs.width, cs.height);
            camera.setParameters(parameters);
            requestLayout();
            //int tempheight = mPreviewSize.height;
            //mPreviewSize.height = mPreviewSize.width;
            //mPreviewSize.width = tempheight;

        }
    } 
```

当您在相机之间切换时调用此方法（反之亦然）。这会干扰方向事件侦听器吗？

另外，保存拍摄的照片时，这就是我所说的。在它只是将数据作为参数之前，但我试图让它也采用屏幕方向。问题是屏幕方向始终是 90，无论如何。所以位图将始终旋转 90 度（这对于使用后置摄像头拍照非常有用）但在使用前置摄像头拍摄时会反转它。可以在此功能中实施修复吗？

```
 public static Bitmap MakeSquare(byte[] data, int orientation) {
    int width;
    int height;
    // Rotate photo
    Matrix matrix = new Matrix();
    matrix.postRotate(orientation);
    // Convert ByteArray to Bitmap
    Bitmap bitPic = BitmapFactory.decodeByteArray(data, 0, data.length);
    width = bitPic.getWidth();
    height = bitPic.getHeight();

    // Create new Bitmap out of the old one
    Bitmap bitPicFinal = Bitmap.createBitmap(bitPic, 0, 0, width, height,matrix, true);
    bitPic.recycle();
    int desWidth;
    int desHeight;
    desWidth = bitPicFinal.getWidth();
    desHeight = desWidth;
    Bitmap croppedBitmap = Bitmap.createBitmap(bitPicFinal, 0,bitPicFinal.getHeight() / 2 - bitPicFinal.getWidth() / 2,desWidth, desHeight);
    croppedBitmap = Bitmap.createScaledBitmap(croppedBitmap, 528, 528, true);
    return croppedBitmap;
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-25T11:22:36.930

好吧。看来我有点照顾它了。我使用了以下建议：[Android，前后摄像头方向，风景](https://stackoverflow.com/questions/8332312/android-front-and-back-camera-orientation-landscape)

并将我的 MakeSquare 函数更改为：

```
public static Bitmap MakeSquare(byte[] data, int cameraID) {
    int width;
    int height;
    Matrix matrix = new Matrix();
    Camera.CameraInfo info = new Camera.CameraInfo();
    android.hardware.Camera.getCameraInfo(cameraID, info);
    // Convert ByteArray to Bitmap
    Bitmap bitPic = BitmapFactory.decodeByteArray(data, 0, data.length);
    width = bitPic.getWidth();
    height = bitPic.getHeight();

    // Perform matrix rotations/mirrors depending on camera that took the photo
    if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT)
    {
        float[] mirrorY = { -1, 0, 0, 0, 1, 0, 0, 0, 1};
        Matrix matrixMirrorY = new Matrix();
        matrixMirrorY.setValues(mirrorY);

        matrix.postConcat(matrixMirrorY);
    }

    matrix.postRotate(90);

    // Create new Bitmap out of the old one
    Bitmap bitPicFinal = Bitmap.createBitmap(bitPic, 0, 0, width, height,matrix, true);
    bitPic.recycle();
    int desWidth;
    int desHeight;
    desWidth = bitPicFinal.getWidth();
    desHeight = desWidth;
    Bitmap croppedBitmap = Bitmap.createBitmap(bitPicFinal, 0,bitPicFinal.getHeight() / 2 - bitPicFinal.getWidth() / 2,desWidth, desHeight);
    croppedBitmap = Bitmap.createScaledBitmap(croppedBitmap, 528, 528, true);
    return croppedBitmap;
} 
```

这似乎有效并且可以解决问题。虽然我不确定这是最好的方法，但我很满意。现在我要做的就是弄清楚为什么在使用前置摄像头时它没有采用正确的纵横比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:37:58.283

试试这些链接：

[http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation(int](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation(int) )

[http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation(int](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation(int) )

具体来说，这里是来自 setRotation 链接的一大堆废话。

“如果应用程序想要旋转图片以匹配用户看到的方向，应用程序应该使用 OrientationEventListener 和 Camera.CameraInfo。OrientationEventListener 的值是相对于设备的自然方向的。CameraInfo.orientation 是相机方向和相机方向之间的角度自然设备方向。两者之和是后置摄像头的旋转角度。*两者之差是前置摄像头的旋转角度*。注意前置摄像头的JPEG图片不像预览那样镜像展示。”

我按原样使用此代码，根本没有修改它。我的相机现在好多了，不过仍然需要一些 TLC。我还没有前置功能。

祝你好运！

# maven - mv 指令作为 Maven 构建的一部分

> ID：10283468
> 
> 赞同：1
> 
> 时间：2012-04-23T15:25:01.580
> 
> 标签：maven, command-line

作为我的 Maven 构建的一部分，我想采取目标和

```
mv current_target_snapshot_123 current_target 
```

请问这怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:47:30.987

我会使用以下组合：

*   Maven Antrun 插件：[http ://maven.apache.org/plugins/maven-antrun-plugin/](http://maven.apache.org/plugins/maven-antrun-plugin/)
*   蚂蚁移动任务：[http ://ant.apache.org/manual/Tasks/move.html](http://ant.apache.org/manual/Tasks/move.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:54:35.497

我知道有两种解决方案：

1.  Maven Antrun 插件（见 nwinkler 的回答）
2.  带有嵌入式 Groovy 脚本的[GMaven插件](http://docs.codehaus.org/display/GMAVEN/)

    ```
    <plugin>
        <groupId>org.codehaus.gmaven</groupId>
        <artifactId>gmaven-plugin</artifactId>
        <executions>
            <execution>
                <phase>generate-resources</phase>
                <goals>
                    <goal>execute</goal>
                </goals>
                <configuration>
                    <source>
                    new File('somefilename').renameTo('someotherfilename');
                    </source>
                </configuration>
            </execution>
        </executions>
    </plugin> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:13:10.683

您可以使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)将副本复制到不同的位置并剥离工件的版本。

# c# - C#、Metro 应用程序、自定义异常类

> ID：10283475
> 
> 赞同：6
> 
> 时间：2012-04-23T15:25:12.580
> 
> 标签：c#, exception, windows-8, microsoft-metro

多年来，我一直在遵循关于如何编写自定义异常类的 MS 最佳实践（甚至不记得它是由 FxCop 还是由我阅读的文章首先强制执行的），并以以下方式编写我的类：

```
using System;
using System.Runtime.Serialization;

[Serializable]
public sealed class MyGreatException : Exception
{
  public MyGreatException()
  : base() {}

  public MyGreatException(string message)
  : base(message) {}

  public MyGreatException(string message, Exception inner)
  : base(message, inner) {}

  private MyGreatException(SerializationInfo info, StreamingContext context)
  : base(info, context) {}
} 
```

今天，这些类被 Windows 8 App Cert Kit 拒绝：

```
 .API System.Runtime.Serialization.SerializationInfo in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. com.visionobjects.myscript.hwr.dll calls this API.
 .API System.SerializableAttribute in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. com.visionobjects.myscript.hwr.dll calls this API. 
```

（在其他拒绝中......）

那么现在是 2012 年，我该如何编写自定义异常类呢？我是否只需要删除`[Serializable]`私有构造函数来处理自定义序列化（无论如何我都不需要）？

* * *

**编辑**

我删除`[Serializable]`了私有构造函数。我想这使我的自定义异常类不可序列化。由于这是一个由类库公开的类，这对使用该库的代码有何影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:08:43.520

`System.Runtime.Serialization.SerializationInfo`.NET 框架的 Metro 兼容版本似乎还不支持它。有关他们选择从 System.Runtime 命名空间支持哪些类的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh454059(v=vs.110).aspx 。](http://msdn.microsoft.com/en-us/library/windows/apps/hh454059(v=vs.110).aspx)请记住，这可能会发生变化。

所以是的，取出你的序列化属性和私有构造函数。

# javascript - 根据百分比在任意长度数组中查找项目

> ID：10283476
> 
> 赞同：2
> 
> 时间：2012-04-23T15:25:12.687
> 
> 标签：javascript

我有一系列图像

```
var prizeImage;

//this is a dynamic amount
var result = 55; 

//the length of this array will change. Images will be added/removed
var prizeImageArray = ['image1.png','image2.png','image3.png','image4.png'] 

//I want to avoid having to type each of these if statements. 
if(result < 25){
    prizeImage = prizeImageArray[0];
}
if(result > 26 && result < 50){
    prizeImage = prizeImageArray[1];
}
if (result...)//and so on 
```

上面是可怕的代码。

我想要一种允许奖品图像数组更改大小并避免键入每个 if 语句的方法。

我希望这是有道理的，我有一种感觉，它没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:28:35.410

如果我理解您的要求，您希望获得一个百分比（从 0 到 100）并找出数组中的哪个图像最接近该百分比位置并获取该图像 URL。如果是这样，您可以通过将百分比除以 100 将其转换为十进制百分比，乘以数组的长度，然后将其四舍五入为整数。这将为您提供最接近您的百分比的数组索引。然后，您可以从数组中索引以获取所需的值。

你可以这样做：

```
function findPercentLocation(array, percent) {
    return(array[Math.round((percent / 100) * (array.length - 1))]);
}

var prizeImageArray = ['image1.png','image2.png','image3.png','image4.png'] 
var imageSrc = findPercentLocation(priceImageArray, 27); 
```

如果你想让它更健壮，你可以像这样防止超出 0-100 范围的百分比值，这将避免超出数组的范围：

```
function findPercentLocation(array, percent) {
    if (percent < 0) percent = 0;
    if (percent > 100) percent = 100;
    return(array[Math.round((percent / 100) * (array.length - 1))]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:32:45.247

您编写的代码与值 25 或 26 不匹配。

试试这个，你可以从百分比中加或减一个来得到准确的结果。

```
return prizeImageArray[Math.floor(percent/25)]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-23T15:31:53.470

最简单的解决方案是使用模运算符。我从来没有写过 JavaScript，但我想下面的代码在语法上是正确的。

```
prizeImage = prizeImageArray[result % 25]; 
```

# c# - 在 C# 中读取编码为 [ANSI] 的文本文件

> ID：10283482
> 
> 赞同：0
> 
> 时间：2012-04-23T15:25:29.263
> 
> 标签：c#, windows, character-encoding

我的文本文件包含 ö、ä、ü 等字符，并且文件以 ANSI 编码。我想阅读它并将所有数据放入数据表中。我的代码是：

```
 private DataTable GetTextToTable(string path)
    {
        try
        {
            DataTable dataTable = new DataTable();
            int rowNo = 0;
            using (StreamReader sr = new StreamReader(path,Encoding.Default,true))
            {
                DataRow dr = null;
                String line;
                while ((line = sr.ReadLine()) != null)
                {
                    dr=dataTable.NewRow();
                    if (rowNo == 0)
                    {
                        string[] Columns = line.Split(new string[] { "\t" }, StringSplitOptions.None);
                        for (int i = 0; i != Columns.Length; i++)
                        {
                            DataColumn dc = new DataColumn();
                            dc.ColumnName = Convert.ToString(Columns[i]);
                            dataTable.Columns.Add(dc);
                        }
                        rowNo = rowNo + 1;
                    }
                    else
                    {

                        string[] ColumnsValue = line.Split(new string[] { "\t" }, StringSplitOptions.None);
                        for (int i = 0; i != ColumnsValue.Length; i++)
                        {
                            dr[i] = ColumnsValue[i];
                        }
                        dataTable.Rows.Add(dr);
                    }

                }
            }
            return dataTable;
        }
        catch (Exception e)
        {
              throw new Exception(e.Message);
        }

    } 
```

我从这段代码中得到的输出是：¿½ 表示 ö 并以同样的方式为其余 ä 获得任意字符组合，ü 类型字符也是。所以帮助我！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:32:47.930

我的建议是下载 WinHex（免费）之类的东西，它可以让您以十六进制格式查看文件，这可能会帮助您找到问题。

这只是一个猜测，但听起来您的程序正在读取原始十六进制，而不是被告知将其转换为 ASCII。**编辑**或您正在读取的文件使用的任何编码格式。

# sql - 必须声明标量变量，为什么当它是一个参数时？

> ID：10283484
> 
> 赞同：1
> 
> 时间：2012-04-23T15:25:35.277
> 
> 标签：sql, sql-server, sql-server-2008

这给了我一个错误`@ID`并`@Name`说`Must declare the scalar variable`，但我不明白为什么它是一个参数。我在这里做错了什么？

```
 CREATE PROCEDURE [dbo].[Ins_eProductFull]
    @Name nvarchar(400)
    ,@ID int

    AS
  BEGIN

    DECLARE @ID2 int

    SET NOCOUNT ON;

    INSERT INTO Table (Name) VALUES (@Name)

    SET @ID2 = SCOPE_IDENTITY()

    EXEC dbo.StoredProc1 
      @ID = @ID, 
      @Name = @Name, 
      @ID2 = @ID2

  END
  GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:30:36.247

我在您的代码中看到的唯一问题是第一个不应该存在的逗号。除此之外一切正常

编辑：

对于否决它的人，请亲自查看：

```
create table Table1(Name varchar(50))

Create PROCEDURE [dbo].[Ins_eProductFull]
@Name nvarchar(400),
@ID int
AS
BEGIN
    DECLARE @ID2 int

    SET NOCOUNT ON;

    INSERT INTO Table1 (Name) VALUES (@Name)

    SET @ID2 = SCOPE_IDENTITY()

    EXEC dbo.StoredProc1 
      @ID = @ID, 
      @Name = @Name, 
      @ID2 = @ID2

END
GO

CREATE  procedure dbo.StoredProc1 
@ID int,
@Name varchar(50),
@ID2 int
as 
begin
    select @ID,@Name,@id2
end

exec [Ins_eProductFull] 'a',1 
```

结果：

```
1   a   NULL 
```

NULL是因为我的测试表上没有身份

# ruby-on-rails - 如何在 Rails 测试环境中获得完整的堆栈跟踪而不是“处理请求时出现意外错误”？

> ID：10283490
> 
> 赞同：7
> 
> 时间：2012-04-23T15:25:47.607
> 
> 标签：ruby-on-rails, testing

在测试环境`rails s -e test`（我在开发模式下得到回溯。

它是谁，我该如何禁用它？我需要完整的回溯，而不仅仅是引发的错误！

我正在使用 Rails 3.2.3、Ruby 1.9.3、rspec、capybara、capybara-webkit

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:06:39.480

设置`config.action_dispatch.show_exceptions = true`为`test.rb`我做了诀窍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T21:00:44.207

`env.rb`由 Cucumber 创建的读取：

```
# By default, any exception happening in your Rails application will bubble up
# to Cucumber so that your scenario will fail. This is a different from how 
# your application behaves in the production environment, where an error page will 
# be rendered instead.
...
# 1) Tag your scenario (or feature) with @allow-rescue
# 2) Set the value below to true. Beware that doing this globally is not
# recommended as it will mask a lot of errors for you! 
```

概括：

```
@allow-rescue
Feature: blah blah blah 
```

会成功的。

# php - 打印空值消息以在while循环中使用if条件？

> ID：10283493
> 
> 赞同：-1
> 
> 时间：2012-04-23T15:25:51.390
> 
> 标签：php

从数据库中获取值并显示值，但我想显示值并显示空消息，这意味着如果 while 循环中没有值，则打印消息。
这是我的代码，请有人帮助我吗？

```
 /* database link */
  require_once '../db.php';
  $query = "SELECT id,first_name FROM ajax_user";
  $result = mysql_query($query,$connection) or die('Could connect !');     
  /* loop */
  while ($row = mysql_fetch_array($result)) {               
        if($row['first_name']):                    
             echo $row['first_name']; /* no problem print those values */               
        else:               
             /* here is the problem, message doesn't print if (ajax_user) */
             /* table is empty */
             echo 'no value your database !!';     
        endif;            
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:47:10.653

您需要将数据库消息中的 no 值移到 while 循环之外。如果 fetch 没有返回任何行，则代码将跳过整个循环，因为 while 条件为 false。

像这样的东西...

```
 /* database link */
  require_once '../db.php';
  $query = "SELECT id,first_name FROM ajax_user";
  $result = mysql_query($query,$connection) or die('Could connect !');  

  $row = mysql_fetch_array($result);

  if ($row):
    do  {               
        if($row['first_name']):                    
             echo $row['first_name'];                
        endif;            
     } while ($row = mysql_fetch_array($result))
  else:
     echo 'no value your database !!';     
  endif; 
```

警告：我在 PHP 中工作不多，所以这里的确切语法可能并不完美（PHP 专家请根据需要编辑我的答案）。但是，控制流应该做你需要的。

# vba - VBA Internet Explorer 自动化“权限被拒绝”

> ID：10283496
> 
> 赞同：3
> 
> 时间：2012-04-23T15:25:58.293
> 
> 标签：vba, internet-explorer-7, automation, permission-denied, shdocvw

```
Dim IE as New InternetExplorer
IE.Visible = True

IE.Navigate("http://www.google.com")

Do Until IE.Busy = False
Loop

IE.document.getElementsByTagName("Input")(3).Value = "Search Term"

IE.document.Forms(0).Submit     <------ This line results in error. 
```

错误状态运行时错误 70：“权限被拒绝”

请不要建议代码更改。代码没有任何问题。此宏适用于 10 台计算机中的 9 台。这不是时间问题（即使我手动执行，我仍然会收到错误消息）。我知道还有其他方法可以声明 Internet Explorer 对象。我尝试过使用 CreateObject 和所有这些东西。这些都不重要。以管理员身份运行也无济于事。

这只是问题的一个简单示例（我们实际上是在自动化更复杂的任务）。所以请不要问“为什么要做goodle search”？请不要问“你想做什么”。我需要解决这个问题。我不需要重新编写我的代码。

我们使用 Windows XP、Internet Explorer 7 和 Office 2003。有些东西导致随机的人无法自动化 Internet Explorer。这不是用户问题，而是计算机问题。我的意思是在罪魁祸首计算机上，无论哪个用户登录，都没有人可以自动化。但是同一个用户可以使用不同的计算机，一切都很好。因此，它可能是本地计算机上的注册表设置或类似的东西。这里所有的计算机都以相同的方式设置，相同的规格，相同的软件。

我用谷歌搜索和谷歌搜索和谷歌搜索和谷歌搜索。不幸的是，运行时错误 70 似乎是一个包罗万象的问题，许多用户报告了不同症状的错误。就我而言，我还没有找到解决方案，否则我不会在这里问。

我们可以解决它的唯一方法是让 IT 完全重新加载硬盘上的所有内容。干净的刷新，包括操作系统。这解决了问题，但它也迫使用户将他们的机器重新设置为他们以前的方式并重新安装所有软件和所有东西。这不是一个好的解决方案。机器上某处的设置会导致此问题，否则刷新将不起作用。我想知道那个设置是什么（我的感觉是它是一个注册表设置）。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-10T16:04:04.940

在测试了上述所有建议的修复程序甚至更多之后，我确信这是一个奇怪的错误，当一个网站上有不同的安全区域时，IE 会调用子进程的事件处理。

切入正题，解决方法如下：

```
'Craziest workaround ever due to bugged IE Eventhandling
Do While IE.ReadyState = 4: DoEvents: Loop 
Do Until IE.ReadyState = 4: DoEvents: Loop 
```

**每次导航到新页面或可能导致网站重新加载的其他事件（例如单击提交按钮或类似事件）后，都添加此代码段。**

上面的 Dan 建议在您的代码中自由地添加 DoEvents 语句，但这并没有 100% 对我有用。相反，我建议在适用的情况下添加上述代码。

向丹致敬，没有你的评论，我永远也想不通！

**此方法优于其他建议修复的好处的简短摘要：**

*   如果您愿意，您可以坚持后期绑定（将 IE 调暗为对象）
*   您可以坚持创建 InternetExplorer 对象（而不是 InternetExplorerMedium）
*   您无需更改 IE 中的安全区域设置
*   在您的应用程序中没有不必要的等待时间
*   您摆脱了错误 70 - 权限被拒绝
*   您摆脱了丢失的会话，即“运行时错误'-2147417848（80010108）'：自动化错误调用的对象已与其客户端断开连接。”
*   您摆脱了接口问题，即“运行时错误'-2147023179 (800706b5)'：自动化错误接口未知”

使用这种方法**不需要**的所有东西的总结：

*   InternetExplorerMedium 对象
*   一般的早期绑定
*   参考 Microsoft Internet 控件
*   参考 Microsoft Shell 控件和自动化
*   奇怪的错误处理
*   无需在代码中检查 IE.Busy
*   Application.wait 或 sleep 导致不必要的估计延迟

*我只包括上面的摘要，因为我已经看到了所有这些建议的解决方法，并且到目前为止没有运气亲自尝试过它们。*

**基于 OP 问题的示例代码：**

```
Dim IE as Object    
Set IE = CreateObject("InternetExplorer.Application")

IE.Visible = True
IE.Navigate("http://www.google.com")

'Craziest workaround ever due to bugged IE Eventhandling
Do While IE.ReadyState = 4: DoEvents: Loop
Do Until IE.ReadyState = 4: DoEvents: Loop

IE.document.getElementsByTagName("Input")(3).Value = "Search Term"
IE.document.Forms(0).Submit     ' this previously crashed 
```

我真的希望这将在未来对其他人有所帮助。向所有帮助拼凑解决方案的人致敬。

最好的问候帕特里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:18:53.050

我在自动化 IE 时收到了同样的错误，但我没有修复，而是解决了问题。

```
 Label1:
         If myIe Is Nothing Then
             Set myIe = CreateObject("InternetExplorer.Application") 
         End If

         myIe.Navigate URL:=imdbLink

    For Each link In myIe.document.Links
         If Right(link.href, 9) = "/keywords" And Left(link.href, 26) = "http://www.imdb.com/title/" Then
                    mKPlot = link.href 'ERROR GENERATES FROM THIS, SOMETIMES...
         End If
    next link

errHandler:
    If Err.Number = 70 Then
        Debug.Print "permission denied for: |" & title & "|"

        myIe.Quit
        Set myIe = Nothing

        Application.Wait Now + TimeValue("00:00:10")

        Resume Label1:

    End If 
```

不是您想象的时尚注册表修复，但它适用于我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:34:49.730

我遇到了同样的问题。有一个用于自动化 IE 的脚本，已经运行了一年。然后我突然开始收到这个“权限被拒绝错误”。我做了两件事，其中一件解决了问题，但我不知道哪一件。

1.  我删除了对“Microsoft Internet Controls”的引用，尝试编译该项目，重新添加了对“Internet Controls”的引用，然后编译了该项目。

2.  在声明 InternetExplorer 对象时删除了“WithEvents”关键字，因为无论如何我都不需要从 IE 捕获事件事件。

我怀疑这是第一个，并且以某种方式引用已损坏并删除并重新添加它解决了问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-01T03:30:50.433

这是 VBA 中 Internet Explorer 自动化的常见问题。它通常似乎发生在加载新页面之后。我已经成功地使用了 DoEvents、Application.Wait 的组合，并在新页面加载后将我的 HTMLDocument 对象设置为 Nothing。

我在下面提供了示例代码来演示：

```
Option Explicit

Sub IEAutomation()

    Dim IE As InternetExplorer
    Dim html As HTMLDocument
    Dim i As HTMLHtmlElement
    Dim search_bar_id As String
    Dim submit_button_name As String
    Dim search_term As String

    'Define Variables
    search_bar_id = "lst-ib"
    submit_button_name = "btnK"
    search_term = "Learning VBA"

    'Create IE and Naviagate to Google
    Set IE = CreateObject("InternetExplorer.Application") 'Late Binding
    IE.Visible = True
    IE.navigate "http://www.google.com"

    'Wait for IE To Load
    Do While IE.readyState <> READYSTATE_COMPLETE: DoEvents: Loop

    'Create HTMLDocument Object
    Set html = IE.document

    'Enter Search Term into Search Bar and Click Submit Button
    html.getElementById(search_bar_id).innerText = search_term
    Application.Wait Now + TimeValue("0:00:01")
    html.getElementsByName(submit_button_name)(, 1).Click

    'Wait for New Page to Load (** DoEvents Helps with the Permission Issue **)
    Do While IE.readyState <> READYSTATE_COMPLETE: DoEvents: Loop

    'After Page Loads, Reset HTMLDocument Object and Wait 1 Second Before Recreating It
    Set html = Nothing
    Application.Wait Now + TimeValue("0:00:01") '<<< This seems to really help
    Set html = IE.document

    'Print All Elements In H3 Tags to Immediate Window in VBE
    For Each i In html.getElementsByTagName("H3")
        Debug.Print i.innerText
    Next i

End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-30T19:34:56.080

以下对我有用。我没有对它进行广泛的测试，但问题没有再次出现。我间歇性地收到错误，但总是在同一点。

第一个IE实例的控制好像不行了。但是，可以通过引用第一个实例来创建另一个实例。然后可以关闭死实例，我们继续。

```
Set IEa = CreateObject("InternetExplorer.Application")
Set IEa = IE
   'Where IE is the instance that's about to error
SendKeys ("%{F4}")
   'Closes the old window, IE.quit in the code wouldn't work
IEa.Visible = True 
```

希望这对其他人有用，我感到非常沮丧。

布赖恩

PS：我在stackoverflow上的第一篇文章，我认为我的格式正确

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-28T13:39:09.810

重置 HTMLDocument 对象的解决方案也适用于我，即

```
'After Page Loads, Reset HTMLDocument Object and Wait 1 Second Before recreating It
Set html = Nothing
Application.Wait Now + TimeValue("0:00:01") '<<< This seems to really help
Set html = IE.document 
```

其他解决方案都没有解决我的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T17:12:48.027

Try this code for me. This bypasses the need to select/click any element in the browser.

**I tested this for INDIA**

```
Sub Sample1() '<~~ Works as expected
    Dim IE As New InternetExplorer
    IE.Visible = True
    IE.Navigate ("http://www.google.co.in/#hl=en&q=" & "Search Term")
End Sub 
```

**For UK**

```
Sub Sample2() '<~~ Works as expected
    Dim IE As New InternetExplorer
    IE.Visible = True
    IE.Navigate ("http://www.google.co.uk/#hl=en&q=" & "Search Term")
End Sub 
```

**Try this for US (Couldn't Test It as it redirects my request)**

```
Sub Sample3()
    Dim IE As New InternetExplorer
    IE.Visible = True
    IE.Navigate ("http://www.google.com/#hl=en&q=" & "Search Term")
End Sub 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-15T05:18:14.377

我遇到了相同的运行时错误 70。在 MS Access 2010 下的 VBA 中自动执行 Webbrowser 控件时权限被拒绝。我的目标是为内容可编辑节点设置 innerHTML。最初，它运行良好，然后由于未知原因，我开始收到“错误 70。权限被拒绝”。有趣的是，这个错误似乎来自 IE Web 浏览器控件，而不是来自 MS Access。有时，它不会被 VBA 错误处理程序 On Error 捕获。另一个难题是，当单步执行代码时，它会工作，但当正常运行时，Webbrowser 控件将不起作用，但不会引发错误。但是，如果我设置断点，然后在 VBA 的即时窗格中使用以下代码查询 WebBrowser，则会引发错误：DIV.innerHTML

这是失败的代码：

```
Private Function SetInnerHTML(HTML As String) As String
Dim HTMLEmail As HTMLDocument
Dim DIV As HTMLDivElement
Set HTMLEmail = Me.Email_MainBrowser.Controls("MyBrowser").Object.Document
Set DIV = HTMLEmail.getElementById("MyText")
DIV.innerHTML = HTML ' This is the line that failed 
```

像 OP 丹尼斯一样，我尝试添加 Sleep 调用并添加函数调用以确保浏览器返回“Ready State” CurrentState = Me.Form("Email_MainBrowser").Controls("MyBrowser").ReadyState (CurrentState 应该是完成）。

以下是我尝试过的并没有解决问题的方法： 1）反编译并重新编译 MS Access 应用程序。2) 添加对 Win32 睡眠函数的调用以等待 WebBrowser 控件 3) 查询 Webbrowser 以确保它处于 Navigation Complete 状态。

这是修复它的原因：在代码引用和自动化 webbrowser 控件周围大量添加了“DoEvents”：

```
Dim HTMLEmail As HTMLDocument
Dim DIV As HTMLDivElement
DoEvents
Set HTMLEmail = Me.Email_MainBrowser.Controls("MyBrowser").Object.Document
Set DIV = HTMLEmail.getElementById("MyText")
DoEvents
DIV.innerHTML = HTML
DoEvents 
```

我还没有计算出所需的最小 DoEvents 数量；它可能只是一个战略布局。我还检查以确保 webbrowser 控件处于 Natigation 完成状态，但我确信这是 Webbrowser 控件深处的错误。一个可能永远不会被修复的东西。

# ruby-on-rails - 如何在 Rails3 应用程序和 Cramp 之间共享会话？

> ID：10283497
> 
> 赞同：1
> 
> 时间：2012-04-23T15:26:03.507
> 
> 标签：ruby-on-rails, ruby, thin, rack-pow

我有一个在 pow 上运行的 Rails3 应用程序（在开发中）和一个在 Thin 上运行的 Cramp 应用程序。我在 Rails 中使用基于 cookie 的会话，我希望 Cramp 能够访问 Rails 创建的会话。

知道如何做到这一点吗？我对 Ruby 和 Rails 还很陌生。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:31:46.307

好吧，我想出了如何让它与 SSE 一起工作，但我目前正在调试一个有趣的问题，也许你可以帮助我。

所以我创建了以下 ApplicationAction

```
class ApplicationAction < Cramp::Action
    before_start :load_session

    def load_session
        session_id = request.cookies['_session_id']
        @session = Session.where(:session_id => session_id).first
        yield
    end
end 
```

这使得 rails 会话可用于我的所有子操作。然后我添加了一个会话模型（我在 ActiveRecord 中使用 cramp）和以下模型。

```
class Session < ActiveRecord::Base
    set_table_name :sessions

    # Get the data on the sessions table
    def data; Marshal.load(Base64.decode64(read_attribute(:data))); end
end 
```

假设所有 Marshal 序列化的类都可以实例化，这实际上工作得很好。这就是我遇到的问题。当 ActionDispatch 被 rails 序列化到会话数据中时，这会导致 ActionDispatch 出现问题。

我目前正在尝试寻找更好的解决方案。

# perl - 无法修改逻辑和 (&&) 标量赋值

> ID：10283501
> 
> 赞同：3
> 
> 时间：2012-04-23T15:26:13.000
> 
> 标签：perl

当我用我正在做的 CGI 表单测试构建时，我在下面遇到了这个错误。我正在尝试验证用户是否在 CGI 表单中输入了数据，并且该值是否已提交。有什么我想念的吗？

问候，

```
C:\xampp\cgi-bin>perl create_report.cgi
Can't modify logical and (&&) in scalar assignment at create_report.cgi line 105
, near "'Submitted')" 
```

代码：

```
if (defined $user_entry && $user_entry='Submitted') {
sub show_form {
    print qq{<form name="input" action="create_report.cgi" method="post">\n};
    print qq{<table align="center" border="1" bordercolor="black" cellpadding='2' cellspacing="0">\n};
    print qq{<tr>};
    print qq{<td align="right">Please enter the description of the Report you  are copying</td};
    print qq{</tr>\n};
    print qq{<tr>};
    print qq{<td align="left"><input type"text" width="7" name="spns"  value=""};
    print qq{<BR>Be sure to use just one or two words to find the report.  Like "Mortgage Summary".</td>};
    print qq{</table><center><input type="submit" value="Submitted"></center></form>\n};
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T15:47:43.847

你这里有两个错误。`=`首先，您在真正需要字符串相等运算符 ( ) 的地方使用赋值运算符 ( `eq`)。

但其次，您的优先级有问题。您希望将布尔条件解析为：

```
(defined $user) && ($entry = 'Submitted') 
```

但实际上，它被解析为：

```
defined ( ( $user && $entry ) = 'Submitted') 
```

我认为这清楚地说明了为什么您会收到您所看到的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T15:30:19.257

您正在使用赋值运算符`=`尝试检查 的值`$user_entry`，用于`eq`比较 Perl 中的两个字符串：

```
if (defined $user_entry && $user_entry eq 'Submitted') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T15:30:27.523

您在这里混淆了`=`赋值和`eq`字符串等价运算符。使用（并在[perlop](http://perldoc.perl.org/perlop.html)`eq`中查看有关 Perl 运算符的更多信息）。将子定义放在 an内也不是一个好主意。`if`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T15:33:13.670

您正在执行赋值而不是比较，因为`=`在 Perl 中表示赋值，在数字上下文中使用的正确运算符是`==`. 但是，您正在进行字符串比较，因此您应该使用`eq`. 见下图：

```
if (defined $user_entry && $user_entry eq 'Submitted') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T16:00:57.983

那么你到底想做什么？我认为您想查看是否`$user_entry`已定义，如果已定义，`$user_entry`则设置为“已提交”

在这种情况下，您使用了错误的运算符。`=`正在尝试设置为`$user_entry`字符串*Submitted*。你想这样做：

```
if (defined $user_entry && ( $user_entry eq "Submitted" ) ) { 
```

并注意括号的使用！这给我们带来了另一个问题：

### 操作者优先

这是一个棘手的问题。基本上，运算符比函数`&&`具有更高的优先级，因为运算符正在对完成的表达式进行操作。因此，您的陈述实际上被翻译为：`defined``defined`

```
if { defined [$user_entry && ($user_entry='Submitted') ] } 
```

（**注意**：*我使用不同样式的括号是为了查看匹配的内容。这是不好的 Perl。在 Perl 中，您只能使用`(...)`括号*）

这是因为优先顺序是：

*   首先设置值（`=`操作员）
*   那么`&&`运营商
*   然后`defined`

做你想做的事：

```
if ( defined( $user_entry ) && $user_entry eq 'Submitted' ) 
```

或者，不妨将所有内容都括起来以绝对清楚：

```
if ( defined( $user_entry ) && ( $user_entry eq 'Submitted' ) ) { 
```

我相信`&&`and的优先级`||`完全被打破了。这些操作员在 90% 的时间里根本不会做您希望他们做的事情。相反，我使用`and`and `or`which 完全符合我的期望：

```
if defined $user_entry and $user_entry eq 'Submitted ) { 
```

这个优先顺序是：

*   `defined $user_entry`被检查。如果`$user_entry`定义...
*   $user_entry 比较`'Submitted'`为真
*   最后`and`执行操作符

这最终给我们带来了另一件事：

### 始终使用`use strict`和`use warnings`

如果你`use warnings;`在你的程序中，你会得到这个错误：

```
Found = in conditional, should be == at at create_report.cgi line 105. 
```

那会向您指出您正在尝试设置值`$user_entry`而不是检查相等性。

# conditional - 如何只允许在 InnoSetup 中安装特定组件？

> ID：10283508
> 
> 赞同：5
> 
> 时间：2012-04-23T15:26:35.447
> 
> 标签：conditional, inno-setup

所以问题是这样的：我在这里问了一个问题：[如何只允许安装到特定文件夹？](https://stackoverflow.com/questions/10070493/only-allow-to-install-to-a-specific-folder-in-innosetup)

我该如何修改它，例如，我要安装 3 个文件，其中 2 个是可选的，并且只有在存在某个文件/文件夹时才可以安装。如果不满足条件，我想将在列表中选择它们的选项变灰？

先感谢您。佐尔特

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T16:04:44.160

我会尝试执行以下操作。它将访问组件列表项，通过其索引禁用和取消选中它们，从该部分的顺序中获取的从 0 开始的数字是多少[`[Components]`](http://www.jrsoftware.org/ishelp/topic_componentssection.htm)。没有[`fixed`](http://www.jrsoftware.org/ishelp/topic_componentssection.htm)标志的项目（如本例）默认启用，因此您需要检查是否不满足条件。您还可以查看[`commented version`](https://stackoverflow.com/revisions/10284086/2)此帖子的内容：

```
[Components]
Name: Component1; Description: Component 1
Name: Component2; Description: Component 2
Name: Component3; Description: Component 3

[code]
procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageID = wpSelectComponents then
    if not SomeCondition then
    begin
      WizardForm.ComponentsList.Checked[1] := False;
      WizardForm.ComponentsList.ItemEnabled[1] := False;
      WizardForm.ComponentsList.Checked[2] := False;
      WizardForm.ComponentsList.ItemEnabled[2] := False;
    end;
end; 
```

上述解决方案至少有一个弱点。[`[Components]`](http://www.jrsoftware.org/ishelp/topic_componentssection.htm)当您将 设置[`ComponentsList.Sorted`](http://www.jrsoftware.org/ishelp/topic_scriptclasses.htm#TNewCheckListBox)为 True时，索引可能会从该部分的原始顺序打乱。如果你不
使用它，使用上面的代码可能就足够了，如果是，那就更复杂了。

没有简单的方法来获取组件名称（它`TSetupComponentEntry`在每个项目的内部存储为对象`ItemObject`），只有描述，所以这里有另一种方法来做同样的事情，不同之处在于项目索引是通过它们的描述来搜索的指定的。

```
procedure CurPageChanged(CurPageID: Integer);
var
  Index: Integer;
begin
  if CurPageID = wpSelectComponents then
    if not SomeCondition then
    begin
      Index := WizardForm.ComponentsList.Items.IndexOf('Component 2');
      if Index <> -1 then
      begin
        WizardForm.ComponentsList.Checked[Index] := False;
        WizardForm.ComponentsList.ItemEnabled[Index] := False;
      end;
      Index := WizardForm.ComponentsList.Items.IndexOf('Component 3');
      if Index <> -1 then
      begin
        WizardForm.ComponentsList.Checked[Index] := False;
        WizardForm.ComponentsList.ItemEnabled[Index] := False;
      end;
    end;
end; 
```

# c# - 创建 WCF 消息的缓冲副本

> ID：10283528
> 
> 赞同：4
> 
> 时间：2012-04-23T15:27:40.860
> 
> 标签：c#, .net, wcf

我在消息检查器中有以下代码来检查响应正文。我知道 WCF 消息只能读取一次，所以我先创建一个副本。但是使用以下代码我仍然收到错误“此消息无法支持该操作，因为它已被读取。”...我错过了什么吗？

```
 MessageBuffer buffer = message.CreateBufferedCopy(Int32.MaxValue);
        Message copy = buffer.CreateMessage();
        message = copy;

        XmlDictionaryReader bodyReader = copy.GetReaderAtBodyContents();
        bodyReader.ReadStartElement("Binary");
        byte[] bodyBytes = bodyReader.ReadContentAsBase64();
        string messageBody = Encoding.UTF8.GetString(bodyBytes);

        return messageBody; 
```

此外，我在那里使用 Int23.MaxValue 感到不舒服。什么是合理的尺寸？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T16:10:09.827

试试这个代码：

```
 MessageBuffer buffer = message.CreateBufferedCopy(Int32.MaxValue);
    message = buffer.CreateMessage();

    var copy = buffer.CreateMessage();
    XmlDictionaryReader bodyReader = copy.GetReaderAtBodyContents();
    bodyReader.ReadStartElement("Binary");
    byte[] bodyBytes = bodyReader.ReadContentAsBase64();
    string messageBody = Encoding.UTF8.GetString(bodyBytes);

    return messageBody; 
```

# javascript - 使用 javascript 在文本区域中包围选定的文本

> ID：10283529
> 
> 赞同：1
> 
> 时间：2012-04-23T15:27:43.530
> 
> 标签：javascript

> **可能重复：**
> [使用 javascript 在 textarea 中选择前后插入文本](https://stackoverflow.com/questions/4714192/insert-text-before-and-after-selection-in-textarea-with-javascript)

我需要一些帮助来编写将围绕文本区域中选定文本的脚本。

例子

```
abc 123 xyz 789 
```

我选择 123，然后单击运行我的脚本的按钮。输出应变为：

```
abc <b>123</b> xyz 789 
```

# ios - 无法使用 EGOTableViewPullRefresh 刷新 tableview

> ID：10283530
> 
> 赞同：0
> 
> 时间：2012-04-23T15:27:50.690
> 
> 标签：ios, xcode, tableview, pull-to-refresh

我 在我的项目中使用[带有 UITabBarController 的 RSSReader 2.0 版。](http://www.imthi.com/blog/programming/rssreader-version-2-0-with-uitabbarcontroller.php)试图通过[EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)添加一个 tableview 更新功能“拉刷新” 。

我在项目中添加了 4 个文件：

*   EGORefreshTableHeaderView.h
*   EGORefreshTableHeaderView.m
*   PullToRefreshTableViewController.h
*   PullToRefreshTableViewController.m

我的 ViewController.h 看起来像这样：

```
#import <UIKit/UIKit.h>
#import "RSSParser.h"
#import "PullToRefreshTableViewController.h"

@interface RSSListViewController : PullToRefreshTableViewController <RSSParserDelegate> {
    RSSParser * _rssParser;

}

- (id)initWithRSSURL:(NSString *)rssURL;

- (void)startActivity:(id)sender;

- (void)stopActivity:(id)sender;

@end 
```

在 ViewController.m 我添加了以下几行：

```
- (void)reloadTableViewDataSource{
[super performSelector:@selector(dataSourceDidFinishLoadingNewData) withObject:nil afterDelay:3.0];

}

- (void)dataSourceDidFinishLoadingNewData{
    [refreshHeaderView setCurrentDate]; 
    [super dataSourceDidFinishLoadingNewData];
    [self.tableView reloadData];
} 
```

**更新过程开始，但信息没有得到更新。**

![在此处输入图像描述](../Images/31a2c3ba7cc4e3302bf7281d14940217.png)

# 我是xcode的新手，有人可以帮忙解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:27:27.370

问题是什么：

*   EGORefreshTableHeaderView 不隐藏：检查方法“dataSourceDidFinishLoadingNewData”是否被调用。
*   tableView 不会重新加载数据：检查是否调用了“tableView:numberOfRowsInSection:”，如果调用了，则应该重新加载 RSSParser。

# php - 检索最新页面修订的 Wordpress 问题

> ID：10283531
> 
> 赞同：0
> 
> 时间：2012-04-23T15:27:51.670
> 
> 标签：php, wordpress, revision, revision-history

我有一些从 Wordpress 后端检索页面的代码。我使用 post_id 来检索它。问题是当我修改页面内容时，更改有一个新的帖子 ID。有没有一种很好的方法来检索页面的最新版本。标题永远不会改变。

我也在 Wordpress 之外访问这些页面。

```
 $pagelisting = $_GET['pagelisting'];
                require( '../blog/wp-load.php' );
                define('WP_USE_THEMES', false);
                query_posts('showposts=1');

                $post_id = 195;
                $queried_post = get_post($post_id);
                $title = $queried_post->post_title;

                $content = $queried_post->post_content;
                $content = apply_filters('the_content', $content);

                echo $content; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:50:26.653

具有原始帖子 id 的帖子是当前帖子，您将看到它具有 post_status = 'publish'，修订版具有与原始帖子 id 匹配的 post_parent 和 'inherit' 的帖子状态。

我希望这有帮助。/彼得

# java - 设置 JDialog 相对于 JFrame 的位置

> ID：10283532
> 
> 赞同：10
> 
> 时间：2012-04-23T15:27:52.080
> 
> 标签：java, swing, jframe, jdialog

有没有办法设置相对于 a 的对话位置`JFrame`？

我想将对话框居中放置在我的 GUI 的框架上，而不是对话框经常出现在屏幕的中心而不是 GUI 内。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T15:36:13.290

> 有没有办法设置相对于另一个 JFrame 的位置

你可以：

*   [作为JDialog.setLocationRelativeTo(Component c)](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)`JFrame`的参数传递
*   设置为所需`Point`的从`JFrame`到[JDialog.setLocation(Point p)](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocation%28java.awt.Point%29)

编辑

所有 Swing 代码都必须在[EventDispatchThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上完成，这意味着`setVisible(true)`应该将其包装到`invokeLater`

编辑2

> 当使用 JFrame 作为组件 c 时，我得到一个找不到符号错误

不可能，有些小错误

![在此处输入图像描述](../Images/587ec05dd68f9b857d0404a579a3fd5f.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class ClosingFrameDialog extends JFrame {

    private JFrame frame = new JFrame();
    private static final long serialVersionUID = 1L;
    private JMenuBar MenuBar;
    private JMenu File;
    private JMenuItem Exit;
    private JMenuItem ShowDialog;
    private JDialog dialog;
    private Point location;

    public ClosingFrameDialog() {
        Exit = new JMenuItem(" Exit ");
        Exit.addActionListener(new ExitListener());
        ShowDialog = new JMenuItem(" Show Dialog ");
        ShowDialog.addActionListener(showingDialog());
        File = new JMenu(" File ");
        File.add(Exit);
        File.add(ShowDialog);
        MenuBar = new JMenuBar();
        MenuBar.add(File);
        frame.addWindowListener(exitListener);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setJMenuBar(MenuBar);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createDialog();
            }
        });
    }

    private void createDialog() {
        JButton btn = new JButton(" Save changes ");
        btn.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                //some stuff for saving whatewer programatically
                dialog.setVisible(false);
            }
        });
        JButton btn1 = new JButton(" Ignore changes ");
        btn1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                dialog.setLocationRelativeTo(frame);
                dialog.setVisible(false);
            }
        });
        dialog = new JDialog();
        dialog.add(btn);
        dialog.add(btn1);
        dialog.setVisible(false);
        dialog.setAlwaysOnTop(true);
        dialog.setModal(true);
        dialog.setLayout(new GridLayout(2, 0, 10, 10));
        JPanel pane = (JPanel) dialog.getContentPane();
        pane.setBorder(new EmptyBorder(10, 10, 10, 10));
        dialog.addWindowListener(closeListener);
        dialog.pack();
    }
//
    private WindowListener exitListener = new WindowAdapter() {

        @Override
        public void windowClosing(WindowEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == 0) {
                System.exit(1);
            }
        }

        @Override
        public void windowIconified(WindowEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == 0) {
                //System.exit(1);
            }
        }
    };
//
    private WindowListener closeListener = new WindowAdapter() {

        @Override
        public void windowClosing(WindowEvent e) {
            int confirm = JOptionPane.showOptionDialog(dialog,
                    "Are you want to save changes",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == 0) {
                //some stuff for saving whatewer programatically
                dialog.setVisible(true);
            } else if (confirm == 1) {// nothing only hide JDialog
                dialog.setVisible(true);
            }
        }
    };

    private Action showingDialog() {
        return new AbstractAction("Show Dialog") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                Runnable doRun = new Runnable() {

                    @Override
                    public void run() {
                        dialog.setVisible(false);
                        location = frame.getLocationOnScreen();
                        int x = location.x;
                        int y = location.y;
                        //dialog.setLocation(x, y);
                        dialog.setLocationRelativeTo(frame);
                        dialog.setVisible(true);
                    }
                };
                SwingUtilities.invokeLater(doRun);
            }
        };
    }

    private class ExitListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == 0) {
                System.exit(1);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ClosingFrameDialog cf = new ClosingFrameDialog();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T15:34:45.140

你想要的方法是：`setLocationRelativeTo()`

将它与 null 添加到 JFrame 中，将它在屏幕上居中。将 JFrame 添加到对话框中会将其居中放置在 jframe 上。

干杯。

```
import javax.swing.JDialog;
import javax.swing.JFrame;

public class Centered
{
    public static void main( String args[] )
    {
        JFrame jFrame = new JFrame();

        jFrame.setSize( 250 , 250 );
        jFrame.setLocationRelativeTo( null );
        jFrame.setVisible( true );

        JDialog jDialog = new JDialog();
        jDialog.setLocationRelativeTo( jFrame );
        jDialog.setVisible( true );
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T15:29:24.483

当您构造对话框时（当您从通常是您的主窗体的 JFrame 类调用它时），您应该`this`作为参数的参数给出。`parent`除非您在问题中提供代码，否则我无法提供更详细的帮助...

编辑：要将其居中在父级中，请执行以下操作：

```
 MyDialog dialog = new MyDialog(this, true); //or false for non-modal
 dialog.setLocation(this.getWidth/2 - dialog.getWidth/2, this.getHeight/2 - dialog.getHeight/2);
 dialog.setVisible(true); 
```

# mysql - MySQL 是否支持 GO？

> ID：10283533
> 
> 赞同：1
> 
> 时间：2012-04-23T15:27:56.883
> 
> 标签：mysql, sql-server, tsql

我很抱歉这个问题，但我是使用 MySQL 数据库的新手。我只想知道 MySQL 是否支持 MS SQL 中的 GO。谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:29:54.480

`GO`不是 SQL 关键字，甚至不是 Transact-SQL 关键字。

它是 Microsoft SQL Server**工具**的批处理分隔符。

请参阅MSDN 上[的 GO (Tansact-SQL)](http://msdn.microsoft.com/en-us/library/ms188037.aspx)：

> 向 SQL Server 实用程序发出一批 Transact-SQL 语句结束的信号。

和：

> GO 不是 Transact-SQL 语句；它是**sqlcmd**和**osql**实用程序以及 SQL Server Management Studio 代码编辑器识别的命令。

它不受任何其他数据库的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:36:18.287

不。分号`;`相当于 mySql

除非你试图做类似的事情

```
insert into...
GO 10 
```

执行 10 次。

那么这是不可能的

# php - PHP在javascript游戏开发中的结合

> ID：10283534
> 
> 赞同：-2
> 
> 时间：2012-04-23T15:27:59.307
> 
> 标签：php, javascript, html, random

这里我有一个代码：

```
<div id="s">STOP</div>
<div id="L1"></div>
<div id="L2"></div>
<div id="L3"></div>
<div id="L4"></div>
<div id="L5"></div>

v=setInterval(function(){for(i=0;i<6;i++){$("#L"+i).html(String.fromCharCode(Math.floor(Math.random()*26+65)))};},500);
$("#s").click(function(){clearInterval(v);}); 
```

[http://jsfiddle.net/Hx28c/1/](http://jsfiddle.net/Hx28c/1/)

当我单击 STOP div 时，此代码会给我一个随机字母

现在我需要得到基于 php $a 的最后一封信...

```
<?php

$a=AGHBV;

?>
<div id="s">STOP</div>
<div id="L1"></div>
<div id="L2"></div>
<div id="L3"></div>
<div id="L4"></div>
<div id="L5"></div>

v=setInterval(function(){for(i=0;i<6;i++){$("#L"+i).html(String.fromCharCode(Math.floor(Math.random()*26+65)))};},500);
$("#s").click(function(){clearInterval(v);}); 
```

所以当我点击 STOP 时，我需要更改 L1-A 、 div L2-G 、 div L3 - H ... ...等的内容。

我怎么能这样做？

我的游戏需要这个（更重要的是）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:53:04.860

首先，您需要`$a = "ABCDE"`在 JavaScript 的开头制作 PHP 输出，例如`echo "\$a=\"abcde\";";`.

然后在这里使用更新的脚本：

[http://jsfiddle.net/Hx28c/3/](http://jsfiddle.net/Hx28c/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:31:03.810

将它作为 JSON 数组传递，并让它在点击时使用它，而不是仅仅停留在随机字母上。

# php - 将大xls文件导入mysql数据库

> ID：10283535
> 
> 赞同：3
> 
> 时间：2012-04-23T15:28:00.010
> 
> 标签：php, mysql, phpmyadmin, spreadsheet, xls

我想将大**xlsx**（电子表格文件）导入 mysql 数据库。我之前通过 phpmyadmin 做过，但是这个文件太大（205000 行）。

所以当我想通过 phpmyadmin 来做时，它花了很长时间并且没有完成。

将它导入mysql数据库的最佳和快速方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T15:35:19.817

您可以使用`LOAD DATA`MySQL 中的命令执行此操作：http: [//blog.tjitjing.com/index.php/2008/02/import-excel-data-into-mysql-in-5-easy.html](http://blog.tjitjing.com/index.php/2008/02/import-excel-data-into-mysql-in-5-easy.html)

> ```
> Save your Excel data as a csv file (In Excel 2007 using Save As)
> Check the saved file using a text editor such as Notepad to see what it actually looks like, i.e. what delimiter was used etc.
> Start the MySQL Command Prompt (I usually do this from the MySQL Query Browser – Tools – MySQL Command Line Client to avoid having to enter username and password etc.)
> Enter this command:
> LOAD DATA LOCAL INFILE ‘C:\\temp\\yourfile.csv’ INTO TABLE database.table FIELDS TERMINATED BY ‘;’ ENCLOSED BY ‘”‘ LINES TERMINATED BY ‘\r\n’ (field1, field2);
> [Edit: Make sure to check your single quotes (') and double quotes (") if you copy and paste this code]
> Done! 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:05:58.010

你可以尝试使用 Navicat MySQL。我已经用 250MB+ xlsx 文件完成了这项工作，Navicat 完美地处理了它，毫不费力。

`max_allowed_packet`只需确保您的 MySQL 配置为能够通过将您的选项更改`my.ini`为更大的数量（例如 128M）来接收大量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:27:25.557

Toad for MySQL（免费软件）将是另一种选择。

# mysql - 格式化存储在mysql中的日期

> ID：10283537
> 
> 赞同：0
> 
> 时间：2012-04-23T15:28:12.090
> 
> 标签：mysql, date-format

我正在使用 php 和 mysql 开发一个 uni 项目。我的一些表中有日期字段，其数据类型为“日期”。日期的默认存储是 yyyy/mm/dd，但我希望它显示为 dd/mm/yyyy。我正在尝试从我的 2 个表中选择所有字段并使用 date_format 格式化字段。

我已经使用了下面的查询，但我仍然在 yyyy/mm/dd 中获得日期输出。

```
$query="SELECT *, DATE_FORMAT(profile.Dob, '%D %M %Y') FROM user, profile WHERE user.Username='$username' and 
user.Password='$password' and user.User_id = profile.User_id"; 
```

我还将通过用户表单将日期插入数据库。他们要经过类似的程序吗？感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:34:35.617

日期可能会在您的查询中返回两次，因为您正在选择 *，因此 DOB 字段将在您的查询中返回两次。一次格式化，一次不格式化。

如果您必须保留`SELECT *`（通常是“最坏的做法”），则按如下方式修改您的查询并将该字段引用为 formattedDOB

```
SELECT *, DATE_FORMAT(profile.Dob, '%D %M %Y') as formattedDOB 
FROM user, profile 
WHERE user.Username='$username' and 
user.Password='$password' and user.User_id = profile.User_id 
```

# mysql - 根据另一个 JOIN 的结果使 JOIN 成为可选

> ID：10283538
> 
> 赞同：0
> 
> 时间：2012-04-23T15:28:12.953
> 
> 标签：mysql, join

抱歉，这个标题不是很清楚。这是我所拥有的：

```
SELECT u.name 
FROM users u
    INNER JOIN users_permissions
        ON users_permissions.user_id = u.id
        AND users_permissions.permission_id IN ( 1,2 ) 
    LEFT JOIN users_events
        ON users_events.user_id = u.id
        AND users_events.event_id = 3 
```

好的，所以：

权限“1”允许您编辑所有事件。权限“2”仅允许您编辑某些事件，这些事件在表**users_events**中指定。

我希望查询结果只包含那些可以编辑指定事件的用户。

在伪逻辑中，这是：

> 其中 (permission = 1) 或 (permission = 2 and event = 3)

上面的查询将包括具有权限“2”（特定于事件）的用户，即使他们可以编辑的事件列表不包括我正在检查的事件。

本质上，如果 users_permissions 表中的匹配权限为“2”，我只关心将 users 表连接到 users_events 表。

我怎么做？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:33:37.717

您需要使用该`WHERE`子句：

```
WHERE perms.permission_id=1 OR (perms.permission_id=2 AND events.event_id=3) 
```

# sql-server - 模型中的字段与 DB 中不对应的字段抛出“无效的列名”

> ID：10283540
> 
> 赞同：0
> 
> 时间：2012-04-23T15:28:17.673
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3

我正在尝试定义一个不在我的数据库中的字段。它的形式是这样的：

```
public string Adress {get;set;}
public int? Number {get;set;}
public string Name {get{
    return (this.Adress + " " + this.Number.ToString())
} set{}} 
```

...当我运行索引（其模型为 IEnumerable 类型）时，控制器抛出...

```
Invalid column name 'Name'. 
```

我想这样做，所以我不必每次都连接所有这些。

我正在使用 ASP.NET MVC3 和 SQL Server 2008。

有没有办法告诉模型我没有具有该名称的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:04:44.010

我发现了如何做到这一点。

可以使用 [NotMapped] 属性对其进行管理。

# python - Django模型中的Python factory_boy库m2m？

> ID：10283544
> 
> 赞同：10
> 
> 时间：2012-04-23T15:28:33.240
> 
> 标签：python, django, testing, factory, fixtures

我目前`factory_boy`用于在我的测试中创建固定装置。 `Factory_boy`文档只提到了哪些可以像模型中的字段`SubFactory`一样起作用。`ForeignKey`但是，ManyToMany 关联上没有任何内容。如果我有一个以下 Post 模型，我将如何为它创建一个工厂？

```
class Post(models.Model):
    title = models.CharField(max_length=100)
    tags = models.ManyToManyField('tags.Tag')

class PostFactory(factory.Factory):
    FACTORY_FOR = Post

    title = 'My title'
    tags = ??? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T08:05:23.953

[post_generation 钩子](http://factoryboy.readthedocs.org/en/latest/post_generation.html#postgeneration-and-post-generation)怎么样- 我假设您使用较新版本的[factory_boy](https://github.com/rbarrois/factory_boy)？

```
import random
import factory

class PostFactory(factory.Factory):
    FACTORY_FOR = Post
    title = factory.Sequence(lambda n: "This is test title number" + n)
    @factory.post_generation(extract_prefix='tags')
    def add_tags(self, create, extracted, **kwargs):
        # allow something like PostFactory(tags = Tag.objects.filter())
        if extracted and type(extracted) == type(Tag.objects.all()):
            self.tags = extracted
            self.save()
        else:
            if Tag.objects.all().count() < 5:
                TagFactory.create_batch(5, **kwargs)
            for tag in Tag.objects.all().order_by('?')[:random.randint(1, 5)]:
                self.tags.add(tag) 
```

请注意，您可以使用`PostFactory(tags__field = 'some fancy default text')`，但我建议使用 Sequences 创建好的`TagFactory`...

您应该可以绑定`PostFactory(tags = Tag.objects.filter())`，但这部分未经测试...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T05:29:27.087

您可以覆盖`_prepare`类方法：

```
class PostFactory(Factory):
    FACTORY_FOR = Post

    title = 'My title'

    @classmethod
    def _prepare(cls, create, **kwargs):
        post = super(PostFactory, cls)._prepare(create, **kwargs)
        if post.id:
            post.tags = Tag.objects.all()
        return post 
```

请注意，如果帖子没有 ID，您将无法向帖子添加标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T01:28:33.810

我没有测试它，但有什么问题：

```
class PostFactory(factory.Factory):
    FACTORY_FOR = Post
    title = 'My title'

class TagFactory(factory.Factory):
    FACTORY_FOR = Tag

post = PostFactory()
tag = TagFactory()
post.tags.add(tag) 
```

# php - 带有自己图像的 QR 码生成 EPS

> ID：10283558
> 
> 赞同：2
> 
> 时间：2012-04-23T15:29:24.683
> 
> 标签：php, qr-code, eps

我想知道是否有人知道我可以在其中创建 QR 码并在其中嵌入我自己的图像或徽标的库。

出口应该是带有 YCMK 的 EPS。

我在这里找到了这个 [http://code.google.com/p/zend-framework-matrixcode-module/](http://code.google.com/p/zend-framework-matrixcode-module/) 但真的不知道它是否可以使用它......

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:00:20.550

我用[PHP 编写了一个 QR 生成器](https://github.com/alister/QR-Generator-PHP/)，它将以 PNG、JPG 或 GIF 格式输出。

我建议使用[ImageMagick](http://www.imagemagick.org)添加徽标并转换为 EPS。

**注意**- 确保使用 H（高）级别的纠错。正如 Wandera Nauta 所说，这将为您提供 30% 的冗余。一个小的中央标志不应该过多地“损坏”代码。确保避免覆盖三个角方块。

这是一个中间有图像的示例代码。

![带有徽标的二维码](../Images/a7ce7e665476b0b86844de4aaf29f23c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:40:24.250

我建议不要尝试这个。

QR 标准旨在抵抗大量损坏。每个二维码都包含大量可用于错误恢复的“额外”数据，这意味着即使缺少一个块，您的手机也会正确扫描二维码。

可以使用该功能（或滥用，取决于您如何看待它）将图像的某些部分替换为您自己的图像或徽标。这可能是您正在寻找的，但是，如果不是不可能的话，很难提前知道生成的图像是否足以扫描，除了手动试错（在室外，在雨天，便宜手机摄像头）。

出于美学原因，您基本上放弃了 QR 的一个主要功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T13:17:11.130

请注意，如果您首先要导出矢量 EPS，则必须使用导出矢量 EPS 的 qr 代码库，然后您不能使用 ImageMagick，因为它会光栅化您的矢量图像（请参阅[此链接](http://www.imagemagick.org/Usage/formats/#vector)）。

对于第一点，您应该使用您找到的可以导出真实矢量文件的库。

对于第二点，我还没有给你解决方案。也许您可以尝试处理原始 EPS（因为它是文本）以编程方式插入您的徽标。

# objective-c - 在核心数据的类之间传递 managedObjectContext 时出错

> ID：10283563
> 
> 赞同：0
> 
> 时间：2012-04-23T15:29:45.073
> 
> 标签：objective-c, ios, core-data, ios5

我正在关注本教程：[http](http://maybelost.com/2011/12/tutorial-storyboard-app-with-core-data/) ://maybelost.com/2011/12/tutorial-storyboard-app-with-core-data/ 尝试在类之间传递 managedObjectContext 时出现此错误：

```
2012-04-23 09:53:13.969 PictureList[10287:fb03] -[UINavigationController    setManagedObjectContext:]: unrecognized selector sent to instance 0x6d20a80
2012-04-23 09:53:13.992 PictureList[10287:fb03] *** Terminating app due to uncaught  exception 'NSInvalidArgumentException', reason: '-[UINavigationController    setManagedObjectContext:]: unrecognized selector sent to instance 0x6d20a80'
*** First throw call stack:
(0x16ab022 0x183ccd6 0x16accbd 0x1611ed0 0x1611cb2 0x1c05 0x14386 0x15274 0x24183 0x24c38    0x18634 0x1595ef5 0x167f195 0x15e3ff2 0x15e28da 0x15e1d84 0x15e1c9b 0x14c65 0x16626 0x1afd    0x1a65)
terminate called throwing an exception(lldb) 
```

该错误似乎有点模糊，但我怀疑 UINavigationController 是导致此问题的原因。当我运行它时，该应用程序立即崩溃。

这是我的 Appdelegate.m 的代码，我试图将 Context 传递给我的初始控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
    // Pass the managed object context to the root view controller (the login view)
    LoginViewController *rootView = (LoginViewController *)self.window.rootViewController;
    rootView.managedObjectContext = self.managedObjectContext;
    ....
    }
return YES;
} 
```

然后我试图通过一个 segue 从我的 LoginViewController 传递到下一个类。登录视图控制器.m：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UINavigationController *navController = (UINavigationController *)[segue destinationViewController];
    PictureListMainTable *piclist = (PictureListMainTable *)[[navController viewControllers] lastObject];
    piclist.managedObjectContext = managedObjectContext;
} 
```

我尝试的另一件事是将上下文传递给 UINavigationController：

```
// This code was customized to handle the navigation controller
// Pass the managed object context to the root view controller (the login view)
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
LoginViewController *rootView = (LoginViewController *)navigationController.topViewController;
rootView.managedObjectContext = self.managedObjectContext; 
```

使用这种方法，我至少能够让应用程序加载到登录屏幕，但是当我尝试 segue 时，应用程序会崩溃。我该如何解决这个问题？

编辑：好的，找到问题了。在教程中，我认为导航是在登录控制器之前嵌入的，但导航控制器实际上位于 LoginViewController 和 PictureListMainTable 之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:55:35.977

您需要在该 LoginViewController 类中声明一个属性：

在 LoginViewController.h 中：

```
@property(nonatomic, strong) NSManagedObjectContext *context; 
```

在 LoginViewController.m 中：

```
@synthesize context; 
```

然后在 applicationDidFinishLaunchingWithOptions 中：

```
// Pass the managed object context to the root view controller (the login view)
LoginViewController *rootView = (LoginViewController *)self.window.rootViewController;
rootView.context= self.managedObjectContext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:34:45.547

我想说的错误似乎很具体：在您的应用程序中的某个点是 line ，通过设置实例或子类的属性（您可以这样做）`[navController setManagedObjectContext: ...]`显式或隐式编码。`managedObjectContext``UINavigationController`

错误是说`UINavigationController`没有`setManagedObjectContext:`方法。您可能在 .h 的声明中使用了错误的设置，在 .m 的界面中`@property`缺少更宽松的行，或者缺少指令。`@property``@synthesize`

# iphone - iPhone：解密错误“***** with encipherment ccStatus == -4301”

> ID：10283569
> 
> 赞同：3
> 
> 时间：2012-04-23T15:30:11.920
> 
> 标签：iphone

[我从http://pastie.org/pastes/297563/text](http://pastie.org/pastes/297563/text)找到了 AES 加密和解密示例

除了解密场景外，它工作得很好。当我加密具有长字符串（myfullname@mycompanytech.com）的用户电子邮件字符串时，加密和解密没有问题。加密后我存储在一个 plist 文件中，然后稍后读取它以进行解密。但是，当我加密具有短长字符串的电子邮件字符串（例如：me@company.com）时，加密很好，但是当我尝试解密字符串并将其放在标签中时，我发现解密给出了类似*“加密问题 ccStatus == -4301"*

**UDPATE**我发现只有当字符串长度为“16”时才会出现这个解密问题，否则它总是可以正常工作。请问有什么帮助吗？

请在下面找到代码。这是加密和解密的代码。

```
import "CryptoHelper.h"

#define LOGGING_FACILITY(X, Y)  \
if(!(X)) {          \
    NSLog(Y);       \
}                   

#define LOGGING_FACILITY1(X, Y, Z)  \
if(!(X)) {              \
NSLog(Y, Z);        \
}

@interface CryptoHelper(Private)
- (NSData *)doCipher:(NSData *)plainText key:(NSData *)theSymmetricKey context:(CCOperation)encryptOrDecrypt padding:(CCOptions *)pkcs7;
- (NSString *)base64EncodeData:(NSData*)dataToConvert;
- (NSData*)base64DecodeString:(NSString *)string;
@end
@implementation CryptoHelper

static CryptoHelper *MyCryptoHelper = nil;

const uint8_t kKeyBytes[] = "abcdefgh0123456"; // Must be 16 bytes
static CCOptions pad = 0;
static const char encodingTable[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

- (NSString*)encryptString:(NSString*)string
{
    NSRange fullRange;
    fullRange.length = [string length];
    fullRange.location = 0;

    uint8_t buffer[[string length]];

    [string getBytes:&buffer maxLength:[string length] usedLength:NULL encoding:NSUTF8StringEncoding options:0 range:fullRange remainingRange:NULL];

    NSData *plainText = [NSData dataWithBytes:buffer length:[string length]];

    NSData *encryptedResponse = [self doCipher:plainText key:symmetricKey context:kCCEncrypt padding:&pad];

    return [self base64EncodeData:encryptedResponse];
}

- (NSString*)decryptString:(NSString*)string
{
    NSLog(@"string: %@", string);

    NSData *decryptedResponse = [self doCipher:[self base64DecodeString:string] key:symmetricKey context:kCCDecrypt padding:&pad];

    NSString *result = [NSString stringWithFormat:@"decryptedResponse: %@", decryptedResponse];
    NSLog(@"decryptedResponse: %@", result);

    return [NSString stringWithCString:[decryptedResponse bytes] length:[decryptedResponse length]];
}

- (NSData *)doCipher:(NSData *)plainText key:(NSData *)theSymmetricKey context:(CCOperation)encryptOrDecrypt padding:(CCOptions *)pkcs7
{
    CCCryptorStatus ccStatus = kCCSuccess;
    // Symmetric crypto reference.
    CCCryptorRef thisEncipher = NULL;
    // Cipher Text container.
    NSData * cipherOrPlainText = nil;
    // Pointer to output buffer.
    uint8_t * bufferPtr = NULL;
    // Total size of the buffer.
    size_t bufferPtrSize = 0;
    // Remaining bytes to be performed on.
    size_t remainingBytes = 0;
    // Number of bytes moved to buffer.
    size_t movedBytes = 0;
    // Length of plainText buffer.
    size_t plainTextBufferSize = 0;
    // Placeholder for total written.
    size_t totalBytesWritten = 0;
    // A friendly helper pointer.
    uint8_t * ptr;

    // Initialization vector; dummy in this case 0's.
    uint8_t iv[kCCBlockSizeAES128];
    memset((void *) iv, 0x0, (size_t) sizeof(iv));

    LOGGING_FACILITY(plainText != nil, @"PlainText object cannot be nil." );
    LOGGING_FACILITY(theSymmetricKey != nil, @"Symmetric key object cannot be nil." );
    LOGGING_FACILITY(pkcs7 != NULL, @"CCOptions * pkcs7 cannot be NULL." );
    LOGGING_FACILITY([theSymmetricKey length] == kCCKeySizeAES128, @"Disjoint choices for key size." );

    plainTextBufferSize = [plainText length];

    LOGGING_FACILITY(plainTextBufferSize > 0, @"Empty plaintext passed in." );

    // We don't want to toss padding on if we don't need to
    if(encryptOrDecrypt == kCCEncrypt)
    {
        if(*pkcs7 != kCCOptionECBMode)
        {
            if((plainTextBufferSize % kCCBlockSizeAES128) == 0)
            {
                *pkcs7 = 0x0000;
            }
            else
            {
                *pkcs7 = kCCOptionPKCS7Padding;
            }
        }
    }
    else if(encryptOrDecrypt != kCCDecrypt)
    {
        LOGGING_FACILITY1( 0, @"Invalid CCOperation parameter [%d] for cipher context.", *pkcs7 );
    } 

    // Create and Initialize the crypto reference.
    ccStatus = CCCryptorCreate( encryptOrDecrypt, 
                               kCCAlgorithmAES128, 
                               *pkcs7, 
                               (const void *)[theSymmetricKey bytes], 
                               kCCKeySizeAES128, 
                               (const void *)iv, 
                               &thisEncipher
                               );

    LOGGING_FACILITY1( ccStatus == kCCSuccess, @"Problem creating the context, ccStatus == %d.", ccStatus );

    // Calculate byte block alignment for all calls through to and including final.
    bufferPtrSize = CCCryptorGetOutputLength(thisEncipher, plainTextBufferSize, true);

    // Allocate buffer.
    bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t) );

    // Zero out buffer.
    memset((void *)bufferPtr, 0x0, bufferPtrSize);

    // Initialize some necessary book keeping.

    ptr = bufferPtr;

    // Set up initial size.
    remainingBytes = bufferPtrSize;

    // Actually perform the encryption or decryption.
    ccStatus = CCCryptorUpdate( thisEncipher,
                               (const void *) [plainText bytes],
                               plainTextBufferSize,
                               ptr,
                               remainingBytes,
                               &movedBytes
                               );

    LOGGING_FACILITY1( ccStatus == kCCSuccess, @"Problem with CCCryptorUpdate, ccStatus == %d.", ccStatus );

    // Handle book keeping.
    ptr += movedBytes;
    remainingBytes -= movedBytes;
    totalBytesWritten += movedBytes;

    // Finalize everything to the output buffer.
    ccStatus = CCCryptorFinal(  thisEncipher,
                              ptr,
                              remainingBytes,
                              &movedBytes
                              );

    totalBytesWritten += movedBytes;

    if(thisEncipher)
    {
        (void) CCCryptorRelease(thisEncipher);
        thisEncipher = NULL;
    }

    LOGGING_FACILITY1( ccStatus == kCCSuccess, @"Problem with encipherment ccStatus == %d", ccStatus );

    cipherOrPlainText = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)totalBytesWritten];

    if(bufferPtr) free(bufferPtr);

    return cipherOrPlainText;

}

#pragma mark -
#pragma mark Base64 Encode/Decoder
- (NSString *)base64EncodeData:(NSData*)dataToConvert
{
    if ([dataToConvert length] == 0)
        return @"";

    char *characters = malloc((([dataToConvert length] + 2) / 3) * 4);
    if (characters == NULL)
        return nil;

    NSUInteger length = 0;

    NSUInteger i = 0;
    while (i < [dataToConvert length])
    {
        char buffer[3] = {0,0,0};
        short bufferLength = 0;
        while (bufferLength < 3 && i < [dataToConvert length])
            buffer[bufferLength++] = ((char *)[dataToConvert bytes])[i++];

        //  Encode the bytes in the buffer to four characters, including padding "=" characters if necessary.
        characters[length++] = encodingTable[(buffer[0] & 0xFC) >> 2];
        characters[length++] = encodingTable[((buffer[0] & 0x03) << 4) | ((buffer[1] & 0xF0) >> 4)];
        if (bufferLength > 1)
            characters[length++] = encodingTable[((buffer[1] & 0x0F) << 2) | ((buffer[2] & 0xC0) >> 6)];
        else characters[length++] = '=';
        if (bufferLength > 2)
            characters[length++] = encodingTable[buffer[2] & 0x3F];
        else characters[length++] = '=';    
    }

    return [[[NSString alloc] initWithBytesNoCopy:characters length:length encoding:NSASCIIStringEncoding freeWhenDone:YES] autorelease];
}

- (NSData*)base64DecodeString:(NSString *)string
{
    if (string == nil)
        [NSException raise:NSInvalidArgumentException format:nil];
    if ([string length] == 0)
        return [NSData data];

    static char *decodingTable = NULL;
    if (decodingTable == NULL)
    {
        decodingTable = malloc(256);
        if (decodingTable == NULL)
            return nil;
        memset(decodingTable, CHAR_MAX, 256);
        NSUInteger i;
        for (i = 0; i < 64; i++)
            decodingTable[(short)encodingTable[i]] = i;
    }

    const char *characters = [string cStringUsingEncoding:NSASCIIStringEncoding];
    if (characters == NULL)     //  Not an ASCII string!
        return nil;
    char *bytes = malloc((([string length] + 3) / 4) * 3);
    if (bytes == NULL)
        return nil;
    NSUInteger length = 0;

    NSUInteger i = 0;
    while (YES)
    {
        char buffer[4];
        short bufferLength;
        for (bufferLength = 0; bufferLength < 4; i++)
        {
            if (characters[i] == '\0')
                break;
            if (isspace(characters[i]) || characters[i] == '=')
                continue;
            buffer[bufferLength] = decodingTable[(short)characters[i]];
            if (buffer[bufferLength++] == CHAR_MAX)      //  Illegal character!
            {
                free(bytes);
                return nil;
            }
        }

        if (bufferLength == 0)
            break;
        if (bufferLength == 1)      //  At least two characters are needed to produce one byte!
        {
            free(bytes);
            return nil;
        }

        //  Decode the characters in the buffer to bytes.
        bytes[length++] = (buffer[0] << 2) | (buffer[1] >> 4);
        if (bufferLength > 2)
            bytes[length++] = (buffer[1] << 4) | (buffer[2] >> 2);
        if (bufferLength > 3)
            bytes[length++] = (buffer[2] << 6) | buffer[3];
    }

    realloc(bytes, length);

    return [NSData dataWithBytesNoCopy:bytes length:length];
}

#pragma mark -
#pragma mark Singleton methods
- (id)init
{
    if(self = [super init])
    {
        symmetricKey = [[NSData dataWithBytes:kKeyBytes length:sizeof(kKeyBytes)] retain];
    }
    return self;
}

+ (CryptoHelper*)sharedInstance
{
    @synchronized(self)
    {
        if (MyCryptoHelper == nil)
        {
            [[self alloc] init];
        }
    }
    return MyCryptoHelper;
}

+ (id)allocWithZone:(NSZone *)zone
{
    @synchronized(self)
    {
        if (MyCryptoHelper == nil)
        {
            MyCryptoHelper = [super allocWithZone:zone];
            return MyCryptoHelper;  // assignment and return on first allocation
        }
    }
    return nil; // on subsequent allocation attempts return nil
}

- (id)copyWithZone:(NSZone *)zone
{
    return self;
}

- (id)retain
{
    return self;
}

- (unsigned)retainCount
{
    return UINT_MAX;  // denotes an object that cannot be released
}

- (void)release
{
    //do nothing
}

- (id)autorelease
{
    return self;
}

@end 
```

下面的代码是上面的调用者，

```
 -(NSString *) getUsername
    {
        NSString *usernameString = NULL;

        // Data.plist code
        // get paths from root direcory
        NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        // get documents path
        NSString *documentsPath = [paths objectAtIndex:0];
        // get the path to our Data/plist file
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:LOGIN_PLIST];

        // check to see if Data.plist exists in documents
        if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]) 
        {
            // if not in documents, get property list from main bundle
            plistPath = [[NSBundle mainBundle] pathForResource:@"LoginInfo" ofType:@"plist"];
        }

        // read property list into memory as an NSData object
        NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
        NSString *errorDesc = nil;
        NSPropertyListFormat format;
        // convert static property liost into dictionary object
        NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
        if (!temp) 
        {
            //NSLog(@"Error reading plist: %@, format: %lu", errorDesc, format);
        }
        else
        {
            NSString *nameStr=[temp objectForKey:@"Username"];    

            NSLog(@"nameStr: %@",nameStr);

            // do AES128 decryption
            CryptoHelper *pCrypto = [CryptoHelper sharedInstance];
            usernameString = [pCrypto decryptString:nameStr];
// usernameString becomes empty after when encryption and trying to decrypt.
            NSLog(@"usernameString: %@: usernameString length: %ld", usernameString, [usernameString length] );

        }

        return usernameString;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:49:43.007

您的代码基于Apple 的[**“CryptoExercise”示例**](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html)**中的SecKeyWrapper**类。我在使用 doCipher 方法时遇到了同样的错误消息。[](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html)

 **在这种情况下， “- **4301** ”是调用 CCCryptoFinal 之后 ccStatus 变量的**值**，它返回**CCryptorStatus**类型的值。它在 CommonCryptor.h 中定义如下：

```
enum {
    kCCSuccess          = 0,
    kCCParamError       = -4300,
    kCCBufferTooSmall   = -4301,
    kCCMemoryFailure    = -4302,
    kCCAlignmentError   = -4303,
    kCCDecodeError      = -4304,
    kCCUnimplemented    = -4305
}; 
```

所以不知何故，在 doCipher 方法中创建的缓冲区太小了，这很奇怪，因为它的大小是通过**CCCryptorGetOutputLength确定的，正如****CCCryptorFinal**的文档所暗示的那样：

```
@result kCCBufferTooSmall indicates insufficent space in the dataOut buffer.
        The caller can use CCCryptorGetOutputLength() to determine the required
        output buffer size in this case. The operation can be retried; no state is
        lost when this is returned. 
```

我有预感，Apple**示例**中的 SecKeyWrapper 类不是没有错误的。我会看看我是否可以解决问题或找到另一种在 iPhone 上进行 AES 加密的方法。Rob Napier 和 Mugunth Kumar 的书[**“iOS 5 编程 - 突破极限”**](http://iosptl.com/)中有一个解释和示例代码，我将尝试。此外，作者推荐了两个 WWDC 会议，可在[developer.apple.com](http://developer.apple.com)获得。

*   WWDC 2010，“会议 204：创建安全应用程序”
*   WWDC 2011，“会议 208：保护 iOS 应用程序”

**编辑：**

我刚刚发现了错误。它在**doCipher**方法中。只需替换以下行：

```
// We don't want to toss padding on if we don't need to
   if(encryptOrDecrypt == kCCEncrypt)
   {
       if(*pkcs7 != kCCOptionECBMode)
       {
           if((plainTextBufferSize % kCCBlockSizeAES128) == 0)
           {
               *pkcs7 = 0x0000;
           }
           else
           {
               *pkcs7 = kCCOptionPKCS7Padding;
           }
       }
   }
   else if(encryptOrDecrypt != kCCDecrypt)
   {
       LOGGING_FACILITY1( 0, @"Invalid CCOperation parameter [%d] for cipher context.", *pkcs7 );
   } 
```

使用以下几行：

```
// check for valid context parameter
if (encryptOrDecrypt != kCCEncrypt && encryptOrDecrypt != kCCDecrypt) {
    LOGGING_FACILITY1( 0, @"Invalid CCOperation parameter [%d] for cipher context.", encryptOrDecrypt );
} 
```

正如 Ortwin 在下面指出的，您还必须将后续 CCCryptorCreate 调用中的第三个参数替换为始终为 kCCOptionPKCS7Padding：

```
// Create and Initialize the crypto reference.
ccStatus = CCCryptorCreate( encryptOrDecrypt,
                           kCCAlgorithmAES128,
                           kCCOptionPKCS7Padding,
                           (const void *)[theSymmetricKey bytes],
                           kCCKeySizeAES128,
                           (const void *)iv,
                           &thisEncipher
                           ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T20:48:50.363

我发现它在我更换时对我有用

```
// We don't want to toss padding on if we don't need to
if(encryptOrDecrypt == kCCEncrypt)
{
    if(*pkcs7 != kCCOptionECBMode)
    {
        if((plainTextBufferSize % kCCBlockSizeAES128) == 0)
        {
            *pkcs7 = 0x0000;
        }
        else
        {
            *pkcs7 = kCCOptionPKCS7Padding;
        }
    }
}
else if(encryptOrDecrypt != kCCDecrypt)
{
    LOGGING_FACILITY1( 0, @"Invalid CCOperation parameter [%d] for cipher context.", *pkcs7 );
} 

// Create and Initialize the crypto reference.
ccStatus = CCCryptorCreate( encryptOrDecrypt, 
                           kCCAlgorithmAES128, 
                           *pkcs7, 
                           (const void *)[theSymmetricKey bytes], 
                           kCCKeySizeAES128, 
                           (const void *)iv, 
                           &thisEncipher
                           ); 
```

经过

```
// We don't want to toss padding on if we don't need to
if (encryptOrDecrypt != kCCEncrypt && encryptOrDecrypt != kCCDecrypt) {
    LOGGING_FACILITY1( 0, @"Invalid CCOperation parameter [%d] for cipher context.", *pkcs7 );
}

// Create and Initialize the crypto reference.
ccStatus = CCCryptorCreate( encryptOrDecrypt,
                           kCCAlgorithmAES128,
                           kCCOptionPKCS7Padding,
                           (const void *)[theSymmetricKey bytes],
                           kCCKeySizeAES128,
                           (const void *)iv,
                           &thisEncipher
                           ); 
```

本质上，无论是加密还是解密，无论文本长度如何，我总是设置`kCCOptionPKCS7Padding`选项。`CCCryptorCreate`

请注意，我的案例是有限的，我没有做任何测试是否在所有情况下都有效！**没有保证！****

# delphi-7 - 检查代理是否处于活动状态

> ID：10283571
> 
> 赞同：0
> 
> 时间：2012-04-23T15:30:20.257
> 
> 标签：delphi-7

我如何测试是否为前。84.47.86.34:8080 是活动代理，正在接受请求。像简单的代理检查这样的东西，它会告诉我代理是否有效。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:22:55.243

唯一的方法是实际连接到代理，向它发送一些数据，然后查看它是否回复。

# javascript - 使用计算将 KnockoutJS 绑定到单选按钮

> ID：10283580
> 
> 赞同：1
> 
> 时间：2012-04-23T15:30:37.977
> 
> 标签：javascript, jquery, knockout.js

我有一个带有一系列答案的问题。每个答案都有一个名为 isRight 的布尔属性，它表示答案是否...正确。

我正在尝试为每个答案呈现一个单选按钮，并检查该答案是否正确。如果用户单击不同的按钮，则该答案将正确。

我知道 KO 将选中的属性绑定到一个值，并且每个单选按钮只有在单选按钮的值与绑定值匹配时才会被检查；你不能直接绑定到 isRight。

我在问题本身上放了一个 computedObservable，它应该可以做到这一点。它有效。问题是，我想订阅单选按钮的**更改**事件，以查看何时选择了新答案（并发送 ajax 请求）。我遇到的问题是 ko 绑定未在更改处理程序中更新。似乎延迟处理程序会给我想要的东西，但我更喜欢更直接的解决方案。

似乎 click 事件完美地工作，但每次单击单选按钮时都会触发，即使它已经被选中。

有什么方法可以确保在更改事件中更新绑定？当前代码是 ko 2.0，我也尝试过 2.1。

[**全小提琴**](http://jsfiddle.net/PC4aF/1/)

* * *

完整来源：

```
function Question() {
    this.name = "My Question";

    var i = 0;
    this.answers = ko.observableArray([
        new Answer(++i, "Answer 1", false),
        new Answer(++i, "Answer 2", true),
        new Answer(++i, "Answer 3", false)]);

    this.correctAnswer = ko.computed({
        read: function () {
            for (var i = 0, max = this.answers().length; i < max; i++)
                if (this.answers()[i].isRight())
                    return "answer-" + this.answers()[i].id();
        },
        write: function (newValue) {
            var newId = +newValue.split('-')[1];
            for (var i = 0, max = this.answers().length; i < max; i++)
                this.answers()[i].isRight(this.answers()[i].id() === newId);
        },
        owner: this
    });
}

function Answer(id, name, isRight) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.isRight = ko.observable(isRight);
}

$(function () {
    ko.applyBindings(new Question());

    $(document).on("change", "input[type='radio']", function () {
        var answer = ko.dataFor(this);
        var isRight = answer.isRight();

        setTimeout(function () { alert("before = " + isRight + "  after = " + answer.isRight()); }, 1000);
    });
}); 
```

* * *

HTML：

```
<div data-bind="text:name"></div>
<div data-bind="foreach:answers">
    <label>
        <span data-bind="text: name"></span>
        <input type="radio" name="uniqueQuestionName" data-bind="value: 'answer-' + id(), checked:$parent.correctAnswer" />
    </label>
    <br />
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:09:53.757

除非您有特定理由订阅“更改”事件，否则您可能需要考虑使用[手动订阅](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)正在更改的可观察对象。这样，您可以在实际数据发生更改时收到通知。

这是一个使用稍微不同的方法的示例：http: [//jsfiddle.net/rniemeyer/FvZXj/](http://jsfiddle.net/rniemeyer/FvZXj/)。它使用一个函数来处理设置值，它将当前答案作为第一个参数传递。然后它使用它来正确设置`isRight`和一个你可以订阅的 observable `correctAnswer`。

# java - 在使用 Proguard 的类中找不到引用的方法

> ID：10283581
> 
> 赞同：1
> 
> 时间：2012-04-23T15:30:40.387
> 
> 标签：java, servlets, proguard

当我使用 proguard 执行混淆时，出现此错误：

> 在类 javax.servlet.http.httpServletRequest 中找不到引用的方法“javax.servlet.servletContext getServletContext()”

我试图包含来自 tomcat7 的 servlet-api，但仍然是同样的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:44:57.917

忽略错误消息中的小写/大写拼写错误，这只能意味着 ProGuard 在类路径中以某种方式使用 Servlet 2.5 或更早版本。此方法是在 Servlet 3.0中[引入的。](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getServletContext%28%29)所以具体问题在于 ProGuard 设置/配置。您需要从 ProGuard 的设置中删除任何 Servlet 2.5 或更早版本的库，并添加一个与 Servlet 3.0 兼容的库。

# php - PHP MVC 中的 BaseModel，好还是坏？

> ID：10283592
> 
> 赞同：6
> 
> 时间：2012-04-23T15:31:11.563
> 
> 标签：php, model-view-controller

我正在用 PHP 编写自己的 MVC 框架，仅用于学习目的。拥有一个路由器/调度程序类来调用正确的控制器/动作等并不难。

但现在我正处于我将要使用模型的部分。或者实际上，模型层。但是有一点让我很困惑。

许多其他 MVC 框架都有一个“BaseModel”。我读过这实际上是不好的做法，因为“模型”不应该被视为另一个类。但作为一个真正的“层”，它可以包含“映射器”模式或“存储库”模式等。

但老实说，我看不出这有什么好处。对我来说，“BaseModel”课程似乎是最快的方法，结果相同。

我可以简单地做类似的事情：

```
class User extends BaseModel
{
    // the GetUserBy* could easily be something that's handled by the
    // BaseModel class, like in the Repo pattern.

    public function getUserByName ( $name )
    {
        // no error handling of any kind, just for simplicity
        return $this->db->exec("SELECT * FROM users WHERE name='".$name."'");
    }

    // $data = array
    public function saveUser ( $data )
    {
        // Make sure no extra fields are added to the array
        $user = array ( 'name' => $data['name'],
                        'address' => $data['address']);

        $this->db->autoSave ( $user );
    }
} 
```

但是，如果我选择存储库模式，那么我必须创建以下内容：存储库实体 DAO

实体具有到其他存储库的聚合。所以基本上我正在手动将我的整个数据库方案写出到对象......

最后，有什么区别？？？除了我可能只需使用 BaseModel 类就可以节省很多时间......

但是为什么它仍然被认为是一件坏事呢？并不是说 repo 模式比我现在做的更能解耦我的应用程序。因为对我来说，上面提到的那些模式似乎被高估了。它可能只适用于具有共享状态的应用程序；将对象保存在本地（在存储库中）并稍后提交。

这就是为什么我认为没有人能真正回答这个问题......

但我仍然希望看到一个体面的答案让我走：“啊……我在想什么……”。但如果不是，那么我确信 BaseModel 根本不是一件坏事，而且大多数博主只是一群羊 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:24:23.327

> 并不是说 repo 模式比我现在做的更能解耦我的应用程序

您的应用程序与 SQL 数据库组件（实际上充当映射器）紧密耦合。然而，尽管如此，你的设计更像是一个[存储库](http://martinfowler.com/eaaCatalog/repository.html)，而不是一个[Active Record](http://martinfowler.com/eaaCatalog/activeRecord.html)方法（这可能是你提到的大多数博主所抱怨的）。

活动记录不仅封装了数据，还封装了数据库访问：

```
$user = new User();
$user->setUsername('jane');
$user->setEmail('jane@foo.bar');
$user->save(); 
```

最好让记录对象不知道持久层（关注点分离）。您的“基础”通过返回用户数据数组来做到这一点，当这些数组被修改时，必须将它们传递回用户“基础”进行保存。您可以将命名更改为：

```
class UserRepo extends BaseRepo
{
    // user-specific repo code...
}

$userRepo = $this->getRepo('User');
$user = $userRepo->getUserByName('jane');
$user['email'] = 'jane@new.email';
$userRepo->save($user); 
```

拥有基础回购没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:29:14.173

如果你试图从 PHP 框架中学习好的 MVC 实践，那么你做错了。即使是最好的 PHP 框架也充满了设计错误和缺陷。

具有“BaseModel”的框架通常正在实现某种 ORM。这里最流行的模式是 ActiveRecord。这对于简单的表来说很好，与其他表没有关系（基本上 - 美化的 getter/setter）。但是在处理更复杂的结构和查询时开始崩溃。通常会造成大量的[技术债务](http://martinfowler.com/bliki/TechnicalDebt.html)。

这种方法导致问题的另一个原因是，在这种情况下，您的“模型”有太多的责任。您的业​​务逻辑与存储紧密绑定，存储与逻辑紧密相连。随着应用程序的增长，这样的“模型”将积累黑客。

不，“一群博主”不是羊。他们只是阅读了有关应用程序架构和面向对象编程的书籍。你上一次读这方面的书是什么时候？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:46:06.883

我根本不会使用基本模型，因为您的大多数模型都没有应该遵循的统一接口。如果您愿意，您可以为许多不同类型的模型（这只是基本的面向对象编程）创建一个基类。

总的来说，我相信模型应该是“松散”的组件，您可以将它们与控制器连接在一起并以一个或多个视图显示。它们不能真正拥有统一的接口，因为它们都会做不同的事情：有些甚至可能不与持久性存储对话，有些可能不是持久的，和/或有些可能由其他模型组成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:33:24.027

`Model`类应该是抽象的，只定义方法而不实现它们。至于您的`User`模型，您可以轻松编写一个`GettingUsers`具有所有这些功能的接口，并在`User`模型上实现它。

# c - 客户端绑定如何影响 tcp 连接？

> ID：10283594
> 
> 赞同：0
> 
> 时间：2012-04-23T15:31:18.863
> 
> 标签：c, linux, sockets, bind, connect

我有一个带有两个 IP 地址的客户端系统：10.172.12.13 和 58.53.12.15。

服务器还配置有两个 ipaddresses：10.172.12.18 & 58.53.12.17

现在，在客户端，我首先绑定到本地地址和端口（端口为 0），然后进行 TCP 非阻塞连接。

奇怪的行为是，如果我将 10.172.12.13 指定为要绑定的本地地址，然后在服务器中连接到 58.53.12.17，则连接失败，并给出错误为“主机无法访问”。

但是，如果我将客户端中的本地地址指定为 58.53.12.15，然后尝试在服务器中连接到 58.53.12.17，它会连接。

最有趣和令人惊讶的方面是，在上述执行之后，如果我再次将 10.172.12.13 作为本地地址绑定并连接到 58.53.12.15，它现在连接成功。但是，这只会发生几分钟。一段时间后，10.172.12.13 作为本地地址的连接再次失败。

请人解释发生了什么？绑定如何影响 TCP 连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:16:09.160

通常你永远不会将客户端套接字绑定到特定的接口。通过将其绑定到局域网接口 10.172.12.18，由于专用网络可见性，您将只能与局域网连接进行通信。

要通过 Internet 连接到服务器，您只需创建套接字并将其直接连接到外部 IP，在您的情况下为 58.53.12.17。

如果您想确保您的客户端将连接到本地可见的服务器而不是通过 Internet，则绑定到本地 IP 可能很有用。

这两个IP地址也不一样。阅读有关私有和公共 IP 地址以及它们存在的原因的一些信息。[http://www.vicomsoft.com/glossary/ip-addresses/](http://www.vicomsoft.com/glossary/ip-addresses/)

仍然绑定客户端套接字对外部 IP 的可访问性可能是路由器优化的结果，该优化将捕获一些路由，并且在没有大的变化的情况下使用它们来捕获。几分钟后，它会发现路由数据略有不同，并会清除缓存。（这只是想法，可能完全错误）

# c# - 任务并行库的lock语句和性能

> ID：10283598
> 
> 赞同：1
> 
> 时间：2012-04-23T15:31:29.317
> 
> 标签：c#, .net-4.0

在 C# 4 应用程序中，我使用任务并行库来并行处理 Web 请求。在获得 Web 响应后，需要更新一些全局变量，我决定添加一个锁块来更新这些变量。锁定语句是获得互斥的最佳选择吗？TPL 中锁语句的数量（或锁块的大小）与 TPL 的性能下降之间的确切关系是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:27:24.587

如果您要更新单个变量（并且不需要多个变量作为一个原子单元一起更新），我会使用提供无锁原子功能的 Interlocked 类。如果您有许多线程都试图更新这些变量，Interlocked 将有助于减少争用。

[http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:17:47.160

你的第一个问题的答案是：是的。和不。您可以使用一个`lock`块，也可以使用一个`Mutex`，几乎没有实际区别（在单个应用程序的上下文中）。

你的第二个问题的答案是：没有确切的关系。您可能拥有一百万个锁，但只有当它们相互阻塞时性能才会降低，并且会根据它们阻塞的程度而降低。（警告：锁定本身的行为会导致性能损失。）

您的代码的确切配置文件将确定关系是什么，并且只有通过运行一些测试并找出答案才能真正知道。

# python - Cygwin下Python multiprocessing.Queue File存在错误

> ID：10283603
> 
> 赞同：1
> 
> 时间：2012-04-23T15:31:40.820
> 
> 标签：python, cygwin, multiprocessing, message-queue

尝试从 Cygwin 的多处理模块创建队列时出现奇怪的间歇性错误：

```
Traceback (most recent call last):
  File "test.py", line 3, in <module>
    multiprocessing.Queue()
  File "/usr/lib/python2.6/multiprocessing/__init__.py", line 213, in Queue
    return Queue(maxsize)
  File "/usr/lib/python2.6/multiprocessing/queues.py", line 37, in __init__
    self._rlock = Lock()
  File "/usr/lib/python2.6/multiprocessing/synchronize.py", line 117, in __init__
    SemLock.__init__(self, SEMAPHORE, 1, 1)
  File "/usr/lib/python2.6/multiprocessing/synchronize.py", line 49, in __init__
    sl = self._semlock = _multiprocessing.SemLock(kind, value, maxvalue)
OSError: [Errno 17] File exists 
```

重现这一点的最少代码只是：

```
import multiprocessing

multiprocessing.Queue() 
```

虽然错误只发生在大约 25% 的时间里。

目前为了“解决”这个问题，我只有一个 while 循环，它不断创建`Queue`s 直到错误没有出现，但我宁愿弄清楚它为什么会发生。我尝试查看记录的源文件，但即使一直追溯到 c 源也没有发现任何问题。

我在 Windows 7 64 位上运行来自 Cygwin 的 python 2.6.7。如果我通过本机 Windows python 从 cmd 运行它，即不是从 Cygwin 运行，则不会出现问题。

更新：更仔细地查看源代码，看起来 CreateSemaphore C 函数接受了“名称”参数，如果具有此名称的信号量已经存在，`ERROR_ALREADY_EXISTS`则会标记错误。但是，在 Modules/_multiprocessing/semaphore.c 中的 python 源代码中，该函数在没有名称参数的情况下调用，因此不应发生这种情况。我猜这只是 cygwin 信号量实现中的一个怪癖。

Edit2：我现在有这样的设置：

```
import multiprocessing

for i in range(10):
    count = 0
    while True:
        try:
            q = multiprocessing.Queue()
            break
        except OSError as exc:
            if exc.errno == 17:
                count += 1
            else:
                raise # catch other errors, but this has never happened
    print "iterations %d" % count 
```

我注意到一个怪癖：Queue 构造函数失败的次数总是小于或等于 3003，而且恰好 3000 也经常出现。此外，一旦构造函数成功一次，在 for 循环的其余迭代中将不会再次失败。

我仍然很难过！我曾尝试在队列本身上使用 gc.collect、time.sleep、调用 close 或 del，但这些似乎都没有任何影响。如果这确实是操作系统清理信号量的问题，是否有办法通过系统调用“强制”这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:31:38.277

在 cygwin *python 2.6.8中也有问题*

```
$ python
Python 2.6.8 (unknown, Jun  9 2012, 11:30:32) 
[GCC 4.5.3] on cygwin 
```

错误（下）是因为`multiprocessing.futures`使用 `multiprocessing.queue`. 无赖！我希望将它用作 gevent 的替代品（因为 gevent 使用猴子补丁）

```
$ ./eg3
Traceback (most recent call last):
  File "./eg3", line 13, in <module>
    with concurrent.futures.ProcessPoolExecutor(max_workers=4) as executor:
  File "/usr/lib/python2.6/site-packages/concurrent/futures/process.py", line 275, in __init__
    EXTRA_QUEUED_CALLS)
  File "/usr/lib/python2.6/site-packages/multiprocessing-2.6.2.1-py2.6-cygwin-1.7.16-i686.egg/multiprocessing/__init__.py", line 219, in Queue
    return Queue(maxsize)
  File "/usr/lib/python2.6/site-packages/multiprocessing-2.6.2.1-py2.6-cygwin-1.7.16-i686.egg/multiprocessing/queues.py", line 37, in __init__
    self._rlock = Lock()
  File "/usr/lib/python2.6/site-packages/multiprocessing-2.6.2.1-py2.6-cygwin-1.7.16-i686.egg/multiprocessing/synchronize.py", line 117, in __init__
    SemLock.__init__(self, SEMAPHORE, 1, 1)
  File "/usr/lib/python2.6/site-packages/multiprocessing-2.6.2.1-py2.6-cygwin-1.7.16-i686.egg/multiprocessing/synchronize.py", line 49, in __init__
    sl = self._semlock = _multiprocessing.SemLock(kind, value, maxvalue)
OSError: [Errno 17] File exists 
```

# mysql - mysql-选择超过一定时间范围的记录

> ID：10283605
> 
> 赞同：0
> 
> 时间：2012-04-23T15:31:53.320
> 
> 标签：mysql, ruby-on-rails, activerecord

我有一个医生计划页面，医生可以配置他/她的工作时间（开始时间和结束时间）从星期一到星期五。

通过使用访问页面，用户只能在每天的医生预定时间内安排他们的约会。

我正在使用访问表来进行用户的约会，并使用医师时间表来配置医师的工作时间。

**访问表条目**

```
id  visit_date  scheduled_intime    scheduled_outtime   physician_id
1   2012-04-23  09:15:00        09:30:00        1
2   2012-04-23  09:31:00        10:00:00        1
3   2012-04-24  10:00:00        10:15:00        1
4   2012-04-25  11:00:00        11:15:00        1
5   2012-04-26  15:15:00        15:30:00        1
6   2012-04-27  16:00:00        16:30:00        1 
```

**医生时间表表条目**

```
id  start_time  end_time    day_of_week physician_id
1   09:00:00    18:00:00    monday      1
2   10:00:00    18:00:00    tuesday     1
3   11:00:00    17:00:00    wednesday   1
4   15:00:00    18:00:00    thursday    1
5   16:00:00    20:00:00    friday      1 
```

**注意**每位医师每天只能输入一个条目（共 5 个条目）。

**当** 医生更改他/她的日程安排时间时，我想找出在特定日期超过医生日程安排时间的所有现有访问。

**例子**

1)如果医生按照周三更改工作时间，我想查找***id 4的就诊***

```
start_time: 12:00:00 
end_time: 17:00:00 
```

2)如果医生在工作时间后发生变化，我想查找访问***id 4,5***

周三：

```
start_time: 12:00:00 
end_time: 17:00:00 
```

周四

```
start_time: 15:30:00
end_time: 18:00:00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:51:03.360

```
SELECT visits.id FROM visits INNER JOIN physician_schedules
  ON visits.physician_id = physician_schedules.id
  WHERE
        UPPER(day_of_week) = UPPER(DAYNAME(visit_date))
    AND (scheduled_intime < start_time OR scheduled_outtime > end_time) 
```

这将返回所有医生的所有计划不佳的访问的所有 ID。添加一个额外的 WHERE 来为特定的医生获取它们。

# c# - 在初始化时触发自定义 DependencyProperty 的 PropertyChangedCallback

> ID：10283607
> 
> 赞同：2
> 
> 时间：2012-04-23T15:31:56.143
> 
> 标签：c#, wpf, dependency-properties

我正在实现一个布尔 DependencyProperty，当它设置为 true 时，它​​会向 DependencyObject 添加一个装饰器。我希望 DependencyProperty 的默认值为 true，但这样做不会触发 PropertyChangedCallback，因此默认情况下不会创建装饰器。有没有办法让 PropertyChangedCallback 在初始化时触发？

```
public static bool GetIsAdorned(DependencyObject obj)
{
    return (bool)obj.GetValue(IsAdornedProperty);
}

public static void SetIsAdorned(DependencyObject obj, bool value)
{
    obj.SetValue(IsAdornedProperty, value);
}

public static readonly DependencyProperty IsAdornedProperty =
       DependencyProperty.RegisterAttached("IsAdorned",
       typeof(bool),
       typeof(UIElement),
       new UIPropertyMetadata(true, OnIsAdornedChanged));

private static void OnIsAdornedChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
{
    var uiElement = dependencyObject as UIElement;
    var newValue = (bool)e.NewValue;
    var adornerLayer = AdornerLayer.GetAdornerLayer(uiElement);

    if (newValue)
    {
        adornerLayer.Add(new MyAdorner(uiElement));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:00:06.893

除了支持值继承的附加属性外，没有默认值会自动应用于树中的所有元素。

除非您明确设置该属性，否则普通附加属性（无继承）的值不会应用于任何元素。当属性未在元素上显式设置时，获取附加属性的值将从元数据返回默认值。

例如，如果您在 Canvas 中有一个没有设置的元素`Canvas.Left`，则 Canvas 将从元数据中获取默认值为`Canvas.Left`0。元素本身根本没有这个值。

因此，在您的情况下，无论如何您都必须应用`IsAdorned`，因此默认值必须是`false`.

# c++ - 如何根据类型是整数类型还是浮点类型来更改模板方法？

> ID：10283610
> 
> 赞同：3
> 
> 时间：2012-04-23T15:32:19.273
> 
> 标签：c++, templates, boost, enable-if

我正在研究一个 Matrix 类，它同时采用整数（short、int、long）和浮点类型（float、double）。我希望某些方法仅限于浮点类型（例如反转方法），并且某些方法对浮点类型和整数类型具有不同的实现（例如 == 运算符）。我有一种预感，正确的方法是使用 boost 的“enable_if”和“is_integral”/“is_floating_point”，但我似乎无法让它工作。

我的实现类似于这个 c++ 半伪代码：

```
template <typename T>
class Matrix
{
    ...
    bool operator==(Matrix<typename enable_if<is_integral<T> T >::type >) const;
    bool operator==(Matrix<typename enable_if<is_floating_point<T>::type T> >) const;
    typename enable_if<is_floating_point<T> T> computeInverse() const;
    ...
};
// implementation
bool Matrix<T>::operator==(Matrix<typename enable_if<is_integral<T> T >::type >) const {
  //implementation without precision
}
bool Matrix<T>::operator==(Matrix<typename enable_if<is_integral<T> T >::type >) const {
  //implementation using precision
}
Matrix<typename enable_if<is_floating_point<T> T>::type > Matrix<T>::computeInverse() const {
  //implementation requiring floating points
} 
```

这会产生很多编译错误，而我认为这些是最相关的：

```
error: no type named ‘type’ in ‘struct boost::enable_if<boost::is_integral<float>, float>’ 
```

和

```
error: no type named ‘type’ in ‘struct boost::enable_if<boost::is_floating_point<int>, int>’ 
```

这表明我不能对不同的类型有不同的实现，至少不使用boost的enable_if，这样对吗？

如果是这样，我该怎么做？我知道模板专业化是一种方法，但我想避免重复太多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:08:37.910

最简单的方法是在 中使用重载函数`Matrix`：

```
template <typename T>
class Matrix
{
    template <bool isInteger> class Discrim;
    //  ...
    bool isEqual( Matrix const& other, Discrim<true> ) const
    {
        //  Integer implementation...
    }

    bool isEqual( Matrix const& other, Discrim<false> ) const
    {
        //  Floating point implementation...
    }

public:
    bool isEqual( Matrix const& other ) const
    {
        return isEqual( other, Discrim<std::numeric_limits<T>::is_integer>() );
    }
}; 
```

当然，您的`operator==`和`operator!=`将打电话给`Matrix::isEqual`。

话虽如此：从您的评论来看，如果`T`是浮点类型，您想要一个“几乎相等”的函数。不要这样做。它只会让人们感到困惑，并且会在未来造成无穷无尽的问题（因为`==` 将不再是传递操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:10:23.920

您应该尝试遵循[@DavidRodriguez 的建议](https://stackoverflow.com/questions/10283610/how-to-change-a-template-method-based-on-whether-the-type-is-an-integral-or-floa/10284176#comment13229539_10283610)，并将您的类的通用功能分离到一个基类中；然后提供功能不同的整个派生类的特化。那将是更好的方法。

如果您确实想保留当前的实现，您可以 SFINAE 将不需要的运算符版本排除在重载决议之外，如下所示：

```
#include <iostream>
#include <type_traits>

template<class T>
struct Matrix
{
  // ...
};

template<class T>
typename std::enable_if<
    std::is_integral<T>::value, bool
  >::type
operator==( const Matrix<T>&, const Matrix<T>& )
{
  std::cout << "Integer version" << std::endl;
  return true;
}

template<class T>
typename std::enable_if<
    !std::is_integral<T>::value, bool
  >::type
operator==( const Matrix<T>&, const Matrix<T>& )
{
  std::cout << "Floating point version" << std::endl;
  return true;
}

int main()
{
  Matrix<int> m1, m2;
  Matrix<double> m3, m4;

  if( m1 == m2 ) {}

  if( m3 == m4 ) {}
} 
```

如果您希望运算符作为成员函数，我知道使其工作的唯一方法是向运算符添加一个虚拟模板参数并添加`&& std::is_same<T,U>`到`std::enable_if`测试条件。

# mathematical-optimization - 我可以将 AMPL 文件上传到 Wolfram Alpha 并让它解决吗？

> ID：10283611
> 
> 赞同：1
> 
> 时间：2012-04-23T15:32:32.223
> 
> 标签：mathematical-optimization, wolframalpha, ampl

我有一个 AMPL 代码，我需要一个基于 Web 的求解器，它以 JSON/XML 格式返回结果。我可以用 Wolfram Alpha API 做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T02:19:19.307

[NEOS 服务器](http://www.neos-server.org)有一个基于 XML的API，用于通过 Web 访问 AMPL 和各种 AMPL 接口求解器。然而，我不知道有任何现成的与 Wolfram Alpha 相关的 AMPL 钩子，尽管我很乐意了解其中的一个。

# iphone - 我真的需要为 TestFlight 创建一个 AdHoc 分发版本吗？

> ID：10283618
> 
> 赞同：4
> 
> 时间：2012-04-23T15:32:49.193
> 
> 标签：iphone, ios, ipad, adhoc, testflight

关于 TestFlight 存在意见分歧和相互矛盾的信息。

一些消息来源说您需要通过旧的 AdHoc 分发流程，而 TestFlight 只为您收集 UDID，然后帮助您传播 AdHoc 构建。你可以用电子邮件做同样的事情。

[其他消息来源说](https://stackoverflow.com/questions/4955605/what-is-an-adhoc-certificate)：

> Testflight 允许您极大地简化此过程。您只需构建一个正常的调试 IPA，然后将其放在 TestFlight 上。他们有自己的全局配置文件供用户安装和运行应用程序使用。它与 iPhone 上的大规模测试一样无缝（当然，这不是一个高标准）。

真相是什么？我是否需要自己处理 AdHoc 和 UDID，或者这部分是由 TestFlight 完成的？我是否需要进行正常的调试构建，就像我正在构建以在我的设备上进行测试一样，就像上面引用的声明一样？

根据[本教程](https://github.com/Simbul/baker/wiki/Deployment-with-testflight)，我必须自己处理 UDID。没有提到 TestFlight 的任何花哨的全球企业简介。仅限于 100 台设备。

它是如何工作的？那个企业签约神话是怎么回事？有人可以揭穿吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:37:06.857

你必须弄乱UDID。

事实上，TestFlight 只是读取附加到您发送的 ipa 的配置文件。由于该配置文件，授权设备是已知的。

我通常使用 AdHoc 配置文件，但它也应该与开发配置文件一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:38:01.237

重要的是 UDID 位于存档构建中使用的配置文件中。是开发者还是发行者？它不在乎。它确实使您能够更轻松地筛选出谁获得了什么构建（即只有开发人员才能获得调试构建，而您的大型团队获得发布构建）。

# powershell - 使用单个 psd1 文件加载多个模块 (.psm1)

> ID：10283622
> 
> 赞同：10
> 
> 时间：2012-04-23T15:33:12.250
> 
> 标签：powershell, powershell-2.0

我想将函数组织到**多个 .psm1 文件**中，并由**单个模块清单文件 (.psd1)**加载它们——这样**只有****.psd1 文件**需要与模块具有相同**的名称**。

我认为这应该是可能的。谁能帮帮我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T10:21:10.577

1.  启动 Powershell ISE
2.  使用`New-ModuleManifest`命令
3.  按照此处的说明 -[如何编写模块清单](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878297%28v=vs.85%29.aspx)。当要求嵌套模块时，将模块键入为`Modulepath\Modulename.psm1`
4.  最后，一旦创建 .psd1 文件，使用`Import-Module <<module-name>>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T21:25:59.133

您可以使用 Import-Module 调用或通过在清单文件 (psd1) 的 NestedModules 键中指定它们在主模块 psm1 文件中手动加载它们

# c# - 如何在字符串中找到所有 CR+LF？

> ID：10283624
> 
> 赞同：4
> 
> 时间：2012-04-23T15:33:22.780
> 
> 标签：c#, .net

`<br/>`我正在尝试用C# 中的标签替换所有回车。我认为这会解决所有问题：

```
StringBuilder sb = new StringBuilder(s);
sb.Replace(System.Environment.NewLine, @"<br/>"); 
```

但显然不是。它似乎没有抓住`CR+LF`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:36:31.397

*如果* 是 CR+LF，这将起作用`Environment.NewLine`，它可能在 Windows 上。当然它不会捕捉到字符串实际上只包含换行符或只包含回车符的情况。也许你想要：

```
StringBuilder sb = new StringBuilder(s).Replace("\r\n", "<br/>")
                                       .Replace("\n", "<br/>")
                                       .Replace("\r", "<br/>"); 
```

（请注意，使用逐字字符串文字是没有意义的，`"<br/>"`因为字符串中没有反斜杠，而且它是一行。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:39:24.983

By this code

```
input.Replace("\r\n", "\n").Replace("\r", "\n").Replace("\n", "\r\n") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T15:36:50.380

如果你确定你会替换 \r\n 为什么不直接使用 string.replace？

```
s.replace("\r\n", "<br/>") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T15:37:09.583

```
string ReplaceNewlines(string blockOfText, string replaceWith)
{
    return blockOfText.Replace("\r\n", replaceWith).Replace("\n", replaceWith).Replace("\r", replaceWith);
} 
```

# google-app-engine - appengine：如何不通过后端安全连接获得证书警告？

> ID：10283628
> 
> 赞同：1
> 
> 时间：2012-04-23T15:33:33.660
> 
> 标签：google-app-engine, https, backend

我们可以为后端激活安全连接，但与前端相反，我们会收到此证书警告：（有没有解决方案可以不收到此警告？）

这可能不是您要查找的网站！

您试图访问 backend.xxxx.appspot.com，但实际上您访问了一个将自身标识为 *.appspot.com 的服务器。这可能是由于服务器上的错误配置或更严重的原因造成的。您网络上的攻击者可能试图让您访问 requestprocessor.qminer-trial.appspot.com 的虚假（且可能有害）版本。您无法继续，因为网站运营商已要求提高此域的安全性。

帮助我理解 当您连接到安全网站时，托管该网站的服务器会向您的浏览器提供一种称为“证书”的东西，以验证其身份。该证书包含身份信息，例如网站地址，这些信息由您计算机信任的第三方验证。通过检查证书中的地址是否与网站地址相匹配，可以验证您是否正在与您想要的网站而不是第三方（例如您网络上的攻击者）进行安全通信。

在这种情况下，证书中列出的地址与您的浏览器尝试访问的网站地址不匹配。造成这种情况的一个可能原因是您的通信被提供不同网站证书的攻击者拦截，这将导致不匹配。另一个可能的原因是服务器设置为为多个网站返回相同的证书，包括您尝试访问的网站，即使该证书并非对所有这些网站都有效。谷歌浏览器可以确定您访问了 *.appspot.com，但无法验证该站点与您打算访问的 requestprocessor.qminer-trial.appspot.com 是否相同。如果您继续，Chrome 将不会检查任何进一步的名称不匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:57:28.763

这是一个已知问题：[http ://code.google.com/p/googleappengine/issues/detail?id=7288](http://code.google.com/p/googleappengine/issues/detail?id=7288)

这是 SSL 和浏览器实现的限制：[appengine 上的通配符子域通过 Firefox 上的 https](https://stackoverflow.com/questions/5722397/wildcard-subdomains-on-appengine-over-https-on-firefox)

[根据docs](https://developers.google.com/appengine/docs/java/config/webxml#Secure_URLs)，解决方法是`-dot-`在您的子域名中使用点来代替：`subdomain-dot-domain.appspot.com`

这肯定适用于子域（经过测试），但我不确定它是否适用于后端域。请对其进行测试并告诉我们。

**更新：**

我在我的一个测试后端上对此进行了测试（忘了它还在运行），并且它与`-dot-`解决方法一样按预期工作。

# c# - 使用 c# 和 WMI 在远程计算机上的本地管理员组中添加和删除域用户

> ID：10283629
> 
> 赞同：3
> 
> 时间：2012-04-23T15:33:36.327
> 
> 标签：c#, wmi

我正在开发一个小型实用程序，该实用程序将用于管理给定远程计算机上本地管理员组中的域用户。我希望能够从用户输入（文本框）中获取计算机名称和用户名，并根据选择的单选按钮（添加或删除）从给定计算机上的管理员组中添加或删除用户。我环顾四周，并没有找到很多关于如何使用 WMI 和 c# 来做到这一点的东西。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:42:30.577

WMI 是强制性的吗？您也可以`net user`试一试（[如何使用网络用户命令](http://support.microsoft.com/kb/251394)）。然后，您可以通过可以使用您的程序启动的命令提示符执行 net user 命令。要将用户添加到组（您的新帐户到本地管理员组），您可以使用[Net Group](http://technet.microsoft.com/en-us/library/cc754051%28v=ws.10%29.aspx)

# javascript - 弹出提交后刷新父窗口的整个框架

> ID：10283635
> 
> 赞同：0
> 
> 时间：2012-04-23T15:33:49.540
> 
> 标签：javascript, javascript-events

在`pageA.php`中`<iframe>`，有一个链接`pageA.php`可以显示一个弹出窗口。单击弹出窗口上的提交按钮后，我会关闭弹出窗口，然后重新刷新整个框架。

我尝试了以下代码：

```
if(isset($_POST['popupSubmit'])){
    echo "<script type='text/javascript'>
        window.close();
        window.top.location.href = window.top.location.href;
    </script>";
} 
```

但是，弹出窗口确实关闭了但整个框架没有刷新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:39:29.290

put this in the pop up file -

```
window.opener.location.reload(true); 
```

or if the frame doesn't refresh then you might need to use ajax

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:44:42.420

您正在寻找[`window.opener`](https://developer.mozilla.org/en/DOM/window.opener)：

```
echo "<script type='text/javascript'>
    window.opener.location.reload();
    window.close();
</script>"; 
```

# java - 如何附加到 AES 加密文件

> ID：10283637
> 
> 赞同：14
> 
> 时间：2012-04-23T15:34:00.893
> 
> 标签：java, aes, padding

我正在编写某种生成加密日志文件的记录器。不幸的是，密码学并不是我的强项。现在我可以写入文件几条消息，然后关闭文件。然后我可以打开它，附加一些消息，再次关闭，解密后我在文件中间看到填充字节。有什么方法可以处理加密文件，而不必每次我想附加一些消息时都对其进行解密？

**编辑**：更多细节。当前实现使用 CipherOutputStream。据我了解，没有办法*寻求*使用它。如果我将控制输出数据大小可被块大小整除，我可以使用“NoPadding”选项吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T03:14:06.183

如果您在[CBC 模式下](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)使用 AES ，您可以使用倒数第二个块作为 IV 来解密最后一个块，该块可能只是部分已满，然后再次加密最后一个块的明文，然后是新的明文。

这是一个概念证明：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.RandomAccessFile;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class AppendAES {

    public static void appendAES(File file, byte[] data, byte[] key) throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
        RandomAccessFile rfile = new RandomAccessFile(file,"rw");
        byte[] iv = new byte[16];
        byte[] lastBlock = null;
        if (rfile.length() % 16L != 0L) {
            throw new IllegalArgumentException("Invalid file length (not a multiple of block size)");
        } else if (rfile.length() == 16) {
            throw new IllegalArgumentException("Invalid file length (need 2 blocks for iv and data)");
        } else if (rfile.length() == 0L) { 
            // new file: start by appending an IV
            new SecureRandom().nextBytes(iv);
            rfile.write(iv);
            // we have our iv, and there's no prior data to reencrypt
        } else { 
            // file length is at least 2 blocks
            rfile.seek(rfile.length()-32); // second to last block
            rfile.read(iv); // get iv
            byte[] lastBlockEnc = new byte[16]; 
                // last block
                // it's padded, so we'll decrypt it and 
                // save it for the beginning of our data
            rfile.read(lastBlockEnc);
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
            cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(key,"AES"), new IvParameterSpec(iv));
            lastBlock = cipher.doFinal(lastBlockEnc);
            rfile.seek(rfile.length()-16); 
                // position ourselves to overwrite the last block
        } 
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(key,"AES"), new IvParameterSpec(iv));
        byte[] out;
        if (lastBlock != null) { // lastBlock is null if we're starting a new file
            out = cipher.update(lastBlock);
            if (out != null) rfile.write(out);
        }
        out = cipher.doFinal(data);
        rfile.write(out);
        rfile.close();
    }

    public static void decryptAES(File file, OutputStream out, byte[] key) throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
        // nothing special here, decrypt as usual
        FileInputStream fin = new FileInputStream(file);
        byte[] iv = new byte[16];
        if (fin.read(iv) < 16) {
            throw new IllegalArgumentException("Invalid file length (needs a full block for iv)");
        };
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(key,"AES"), new IvParameterSpec(iv));
        byte[] buff = new byte[1<<13]; //8kiB
        while (true) {
            int count = fin.read(buff);
            if (count == buff.length) {
                out.write(cipher.update(buff));
            } else {
                out.write(cipher.doFinal(buff,0,count));
                break;
            }
        }
        fin.close();
    }

    public static void main(String[] args) throws Exception {
        byte[] key = new byte[]{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15};
        for (int i = 0; i<1000; i++) {
            appendAES(new File("log.aes"),"All work and no play makes Jack a dull boy. ".getBytes("UTF-8"),key);
        }
        decryptAES(new File("log.aes"), new FileOutputStream("plain.txt"), key);
    }

} 
```

我想指出，输出与一次加密所有产生的输出没有什么不同。这*不是*一种自定义形式的加密——它是标准的 AES/CBC/PKCS5Padding。唯一特定于实现的细节是，在空白文件的情况下，我在开始数据之前编写了 iv。

编辑：改进（根据我的口味）解决方案使用`CipherOutputStream`：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.RandomAccessFile;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class AppendAES {
    public static CipherOutputStream appendAES(File file, SecretKeySpec key) throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
        return appendAES(file, key, null);
    }

    public static CipherOutputStream appendAES(File file, SecretKeySpec key, SecureRandom sr) throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
        RandomAccessFile rfile = new RandomAccessFile(file,"rw");
        byte[] iv = new byte[16];
        byte[] lastBlock = null;
        if (rfile.length() % 16L != 0L) {
            throw new IllegalArgumentException("Invalid file length (not a multiple of block size)");
        } else if (rfile.length() == 16) {
            throw new IllegalArgumentException("Invalid file length (need 2 blocks for iv and data)");
        } else if (rfile.length() == 0L) { 
            // new file: start by appending an IV
            if (sr == null) sr = new SecureRandom();
            sr.nextBytes(iv);
            rfile.write(iv);
        } else { 
            // file length is at least 2 blocks
            rfile.seek(rfile.length()-32);
            rfile.read(iv);
            byte[] lastBlockEnc = new byte[16];
            rfile.read(lastBlockEnc);
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
            cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
            lastBlock = cipher.doFinal(lastBlockEnc);
            rfile.seek(rfile.length()-16);
        } 
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(iv));
        byte[] out;
        if (lastBlock != null) {
            out = cipher.update(lastBlock);
            if (out != null) rfile.write(out);
        }
        CipherOutputStream cos = new CipherOutputStream(new FileOutputStream(rfile.getFD()),cipher);
        return cos;
    }

    public static CipherInputStream decryptAES(File file, SecretKeySpec key) throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
        FileInputStream fin = new FileInputStream(file);
        byte[] iv = new byte[16];
        if (fin.read(iv) < 16) {
            throw new IllegalArgumentException("Invalid file length (needs a full block for iv)");
        };
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
        CipherInputStream cis = new CipherInputStream(fin,cipher);
        return cis;
    }

    public static void main(String[] args) throws Exception {
        byte[] keyBytes = new byte[]{
            0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
        };
        SecretKeySpec key = new SecretKeySpec(keyBytes,"AES");

        for (int i = 0; i<100; i++) {
            CipherOutputStream cos = appendAES(new File("log.aes"),key);
            cos.write("All work and no play ".getBytes("UTF-8"));
            cos.write("makes Jack a dull boy.  \n".getBytes("UTF-8"));
            cos.close();
        }

        CipherInputStream cis = decryptAES(new File("log.aes"), key);
        BufferedReader bread = new BufferedReader(new InputStreamReader(cis,"UTF-8"));
        System.out.println(bread.readLine());
        cis.close();
    }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-28T10:00:48.170

我喜欢[MaybeWeCouldStealAVan](https://stackoverflow.com/a/10291282/6853079)提供的解决方案。但这并没有正确实现“flush()”，我发现每次附加消息时都必须关闭并重新打开文件，以确保不会丢失任何内容。所以我重写了它。我的解决方案会在每次刷新时写出最后一个块，但在添加下一条消息时重写此块。使用这种 2-steps-forward, 1-step-back 方法，不可能使用 OutputStream，而是直接在 RandomAccessFile 之上实现它。

```
import javax.crypto.*;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import java.io.*;
import java.security.*;

public class FlushableCipherOutputStream extends OutputStream
{
    private static int HEADER_LENGTH = 16;

    private SecretKeySpec key;
    private RandomAccessFile seekableFile;
    private boolean flushGoesStraightToDisk;
    private Cipher cipher;
    private boolean needToRestoreCipherState;

    /** the buffer holding one byte of incoming data */
    private byte[] ibuffer = new byte[1];

    /** the buffer holding data ready to be written out */
    private byte[] obuffer;

    /** Each time you call 'flush()', the data will be written to the operating system level, immediately available
     * for other processes to read. However this is not the same as writing to disk, which might save you some
     * data if there's a sudden loss of power to the computer. To protect against that, set 'flushGoesStraightToDisk=true'.
     * Most people set that to 'false'. */
    public FlushableCipherOutputStream(String fnm, SecretKeySpec _key, boolean append, boolean _flushGoesStraightToDisk)
            throws IOException
    {
        this(new File(fnm), _key, append,_flushGoesStraightToDisk);
    }

    public FlushableCipherOutputStream(File file, SecretKeySpec _key, boolean append, boolean _flushGoesStraightToDisk)
            throws IOException
    {
        super();

        if (! append)
            file.delete();
        seekableFile = new RandomAccessFile(file,"rw");
        flushGoesStraightToDisk = _flushGoesStraightToDisk;
        key = _key;

        try {
            cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

            byte[] iv = new byte[16];
            byte[] headerBytes = new byte[HEADER_LENGTH];
            long fileLen = seekableFile.length();
            if (fileLen % 16L != 0L) {
                throw new IllegalArgumentException("Invalid file length (not a multiple of block size)");
            } else if (fileLen == 0L) {
                // new file

                // You can write a 16 byte file header here, including some file format number to represent the
                // encryption format, in case you need to change the key or algorithm. E.g. "100" = v1.0.0
                headerBytes[0] = 100;
                seekableFile.write(headerBytes);

                // Now appending the first IV
                SecureRandom sr = new SecureRandom();
                sr.nextBytes(iv);
                seekableFile.write(iv);
                cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(iv));
            } else if (fileLen <= 16 + HEADER_LENGTH) {
                throw new IllegalArgumentException("Invalid file length (need 2 blocks for iv and data)");
            } else {
                // file length is at least 2 blocks
                needToRestoreCipherState = true;
            }
        } catch (InvalidKeyException e) {
            throw new IOException(e.getMessage());
        } catch (NoSuchAlgorithmException e) {
            throw new IOException(e.getMessage());
        } catch (NoSuchPaddingException e) {
            throw new IOException(e.getMessage());
        } catch (InvalidAlgorithmParameterException e) {
            throw new IOException(e.getMessage());
        }
    }

    /**
     * Writes one _byte_ to this output stream.
     */
    public void write(int b) throws IOException {
        if (needToRestoreCipherState)
            restoreStateOfCipher();
        ibuffer[0] = (byte) b;
        obuffer = cipher.update(ibuffer, 0, 1);
        if (obuffer != null) {
            seekableFile.write(obuffer);
            obuffer = null;
        }
    }

    /** Writes a byte array to this output stream. */
    public void write(byte data[]) throws IOException {
        write(data, 0, data.length);
    }

    /**
     * Writes <code>len</code> bytes from the specified byte array
     * starting at offset <code>off</code> to this output stream.
     *
     * @param      data     the data.
     * @param      off   the start offset in the data.
     * @param      len   the number of bytes to write.
     */
    public void write(byte data[], int off, int len) throws IOException
    {
        if (needToRestoreCipherState)
            restoreStateOfCipher();
        obuffer = cipher.update(data, off, len);
        if (obuffer != null) {
            seekableFile.write(obuffer);
            obuffer = null;
        }
    }

    /** The tricky stuff happens here. We finalise the cipher, write it out, but then rewind the
     * stream so that we can add more bytes without padding. */
    public void flush() throws IOException
    {
        try {
            if (needToRestoreCipherState)
                return; // It must have already been flushed.
            byte[] obuffer = cipher.doFinal();
            if (obuffer != null) {
                seekableFile.write(obuffer);
                if (flushGoesStraightToDisk)
                    seekableFile.getFD().sync();
                needToRestoreCipherState = true;
            }
        } catch (IllegalBlockSizeException e) {
            throw new IOException("Illegal block");
        } catch (BadPaddingException e) {
            throw new IOException("Bad padding");
        }
    }

    private void restoreStateOfCipher() throws IOException
    {
        try {
            // I wish there was a more direct way to snapshot a Cipher object, but it seems there's not.
            needToRestoreCipherState = false;
            byte[] iv = cipher.getIV(); // To help avoid garbage, re-use the old one if present.
            if (iv == null)
                iv = new byte[16];
            seekableFile.seek(seekableFile.length() - 32);
            seekableFile.read(iv);
            byte[] lastBlockEnc = new byte[16];
            seekableFile.read(lastBlockEnc);
            cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
            byte[] lastBlock = cipher.doFinal(lastBlockEnc);
            seekableFile.seek(seekableFile.length() - 16);
            cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(iv));
            byte[] out = cipher.update(lastBlock);
            assert out == null || out.length == 0;
        } catch (Exception e) {
            throw new IOException("Unable to restore cipher state");
        }
    }

    public void close() throws IOException
    {
        flush();
        seekableFile.close();
    }
} 
```

您可以查看如何使用它并使用以下方法对其进行测试：

```
import org.junit.Test;
import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import java.io.*;
import java.io.BufferedWriter;

public class TestFlushableCipher {
    private static byte[] keyBytes = new byte[]{
            // Change these numbers lest other StackOverflow readers can read your log files
            -53, 93, 59, 108, -34, 17, -72, -33, 126, 93, -62, -50, 106, -44, 17, 55
    };
    private static SecretKeySpec key = new SecretKeySpec(keyBytes,"AES");
    private static int HEADER_LENGTH = 16;

    private static BufferedWriter flushableEncryptedBufferedWriter(File file, boolean append) throws Exception
    {
        FlushableCipherOutputStream fcos = new FlushableCipherOutputStream(file, key, append, false);
        return new BufferedWriter(new OutputStreamWriter(fcos, "UTF-8"));
    }

    private static InputStream readerEncryptedByteStream(File file) throws Exception
    {
        FileInputStream fin = new FileInputStream(file);
        byte[] iv = new byte[16];
        byte[] headerBytes = new byte[HEADER_LENGTH];
        if (fin.read(headerBytes) < HEADER_LENGTH)
            throw new IllegalArgumentException("Invalid file length (failed to read file header)");
        if (headerBytes[0] != 100)
            throw new IllegalArgumentException("The file header does not conform to our encrypted format.");
        if (fin.read(iv) < 16) {
            throw new IllegalArgumentException("Invalid file length (needs a full block for iv)");
        }
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
        return new CipherInputStream(fin,cipher);
    }

    private static BufferedReader readerEncrypted(File file) throws Exception
    {
        InputStream cis = readerEncryptedByteStream(file);
        return new BufferedReader(new InputStreamReader(cis));
    }

    @Test
    public void test() throws Exception {
        File zfilename = new File("c:\\WebEdvalData\\log.x");

        BufferedWriter cos = flushableEncryptedBufferedWriter(zfilename, false);
        cos.append("Sunny ");
        cos.append("and green.  \n");
        cos.close();

        int spaces=0;
        for (int i = 0; i<10; i++) {
            cos = flushableEncryptedBufferedWriter(zfilename, true);
            for (int j=0; j < 2; j++) {
                cos.append("Karelia and Tapiola" + i);
                for (int k=0; k < spaces; k++)
                    cos.append(" ");
                spaces++;
                cos.append("and other nice things.  \n");
                cos.flush();
                tail(zfilename);
            }
            cos.close();
        }

        BufferedReader cis = readerEncrypted(zfilename);
        String msg;
        while ((msg=cis.readLine()) != null) {
            System.out.println(msg);
        }
        cis.close();
    }

    private void tail(File filename) throws Exception
    {
        BufferedReader infile = readerEncrypted(filename);
        String last = null, secondLast = null;
        do {
            String msg = infile.readLine();
            if (msg == null)
                break;
            if (! msg.startsWith("}")) {
                secondLast = last;
                last = msg;
            }
        } while (true);
        if (secondLast != null)
            System.out.println(secondLast);
        System.out.println(last);
        System.out.println();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T16:23:19.993

AES 是一种分组密码。这意味着它不会逐个字符地加密消息，而是保存数据直到它具有一定大小的块，然后写入它。所以这本身会给您带来问题，因为您的日志消息不太可能与块大小匹配。这是第一个问题。

第二个问题是“AES”本身并不是对您正在做的事情的完整描述。分组密码可以在不同的“模式”中使用（参见[wikipedia 上的这个很好的描述](https://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)）。其中许多模式将流中较早的信息与较晚的数据混合在一起。这使加密更加安全，但同样会导致问题（因为您需要存储将在关闭和打开文件之间混合的信息）。

要解决您需要流密码的第一个问题。就像您对名称所期望的那样，这适用于数据流。现在事实证明，上面描述的一些密码模式可以使分组密码像流密码一样工作。

但是流密码可能无助于解决第二个问题 - 因为您需要在某处存储需要在两次使用之间传递的数据，以便您可以正确初始化附加的流。

真的，如果你问这一切，你有多大把握最终结果是安全的？即使以上述为指导，您也可能会犯很多错误。我建议要么找到一个现有的库来执行此操作，要么减少您的要求，以便您解决一个更简单的问题（您真的需要追加 - 在这种情况下您可以不开始一个新文件吗？或者，就像上面建议的那样，添加文件的某种标记，以便您可以找到不同的部分？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T16:39:18.567

是否可以将数据附加到密文取决于两个因素：

1.  您需要对 AES 使用计数器 (CTR) 模式，因为它是唯一允许您在加密数据中随机查找的模式。在这种情况下，您要查找到加密数据的末尾。请注意，CTR 模式不需要将密文填充到密码块大小。
2.  您不能使用任何消息验证码 (MAC)，而无需再次将其与整个消息一起提供 - 让它成为密文或纯文本。这是设计使然——如果你能做到这一点，那么 MAC 就会坏掉。

因此，只有在不需要任何身份验证的情况下，您才能尝试做的事情。但是，没有任何身份验证的加密是毫无意义的，因为攻击者可以轻松地修改您的加密数据。只有非常有限的用例可以明智地牺牲身份验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:14:55.393

> 每次我想附加一些消息时，有什么方法可以处理加密文件而不必解密它？

如果您对加密文件进行加密，那么使用某些方法可能无法解密。

您可以实现自定义加密，它可能具有某种指示符，表明下一部分是附加消息。这样，它使用相同的方法解密每条消息。

你也可以试试这个[https://stackoverflow.com/a/629762/643500](https://stackoverflow.com/a/629762/643500)

# eclipse - Scala IDE for Eclipse 中的代码完成问题

> ID：10283645
> 
> 赞同：2
> 
> 时间：2012-04-23T15:34:43.720
> 
> 标签：eclipse, scala, ide, code-completion

我正在使用“Eclipse for Java Developers 7.2”和 Scala IDE 2.1.0。问题是“代码完成”......

我在 Eclipse 下启用了“使用 Scala 兼容的 JDT”和“启用 JDT 内容辅助”。还有其他我应该打开的选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-26T22:02:06.487

在 scala-ide 首选项中重新启用以下所有未选中的 Java 内容辅助机制：

首选项窗口：/Java/Editor/Content/Assist/Advanced

检查“默认”内容辅助面板的首选项：

*   Java 提案

还可以在窗口下部的内容辅助循环面板中启用 Java 提案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T13:37:40.567

最后我有幸解决了这个问题。

发生这种情况的原因是因为 eclipse 存储了一个 .metadata 文件，它充当缓存来加载自动完成建议。

如果您尝试 Project->clean，然后尝试自动完成，则可以在自动完成建议中找到所需的 java 类成员。

所以解决方案是：转到你的 eclipse.ini，如果 mac 位于：/Applications/eclipse/Eclipse.app/Contents/MacOS/eclipse.ini

并在“-project”之前的ini文件中添加“-clean”。

这有一个负面影响，现在你的日食可能需要一两分钟的时间才能第一次开始。但对我来说，这是可以接受的。

# android - Android - OnItemClickListener 列表视图

> ID：10283648
> 
> 赞同：0
> 
> 时间：2012-04-23T15:34:46.213
> 
> 标签：android, menubar, onitemclicklistener

这是我想要做的：

![点击前的任务列表](../Images/4a224b776a4d0543d39249e4f4cb0fd7.png)

我有这个任务清单。当我单击其中一个项目时，我希望它出现：

![点击任务后](../Images/0f90333fc8b111c072ca7fcee45efbf8.png)

假设可以找到菜单栏

```
findViewById(R.id.menubar); 
```

有人可以告诉我必须在ItemClickListener上放什么代码吗

```
lv.setOnItemClickListener(new OnItemClickListener() { 
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) { 
```

**注意：**菜单栏可见性设置为 GONE。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:18:26.260

不看代码，不可能得到准确的答案。然而，当我第一次想实现一个类似于你展示的“快速操作栏”时，我在这里遵循了这个例子：

[http://code.google.com/p/simple-quickactions/](http://code.google.com/p/simple-quickactions/)

这与一些样式放入：[https ://github.com/lorensiuswlt/NewQuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D)

希望这可以帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:12:01.423

没有看到任何代码有点困难，但我可以给你一些逻辑思路。

根据您的描述，我假设这些快速栏控件隐藏在每个列表视图项上，所以它是：

照片（可见）

动作控制（隐藏）

[项目结束]

项目（可见）

动作控制（隐藏）

...

我认为 OnItemClick 方法为您提供了作为第二个参数单击的视图（项目：Fotos、Projectos 等）。如果您将其转换回用于创建列表视图项的任何布局，您应该能够使用 findViewByID 来访问每个列表视图上的隐藏控件并使它们可见。

```
lv.setOnItemClickListener(new OnItemClickListener() {           
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
    { 
         //Assuming each item is a linear layout
         LinearLayout itemAsLL = (LinearLayout)view;

         //find the action bar controls
         LinearLayout actionControlsLayout = itemAsLL.findViewById(R.name.of.actioncontrols.id);

         //Make it visible
         actionControlsLayout.setVisibility(VIEW.Visible);
     } 
```

当单击另一个项目时，您需要找到一种方法来隐藏这些控件？也许将视图（或在 adapterView 中的位置）保存为类变量，当单击另一个项目时，转到该视图/找到该视图并隐藏控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:16:35.313

我终于找到了答案。显然，当您用大量任务填充视图时，加载布局时适配器不会填充所有内容，因此每次向下滚动时，他都会在列表视图上放置更多项目。

您需要做的是确保放置一个“已加载”字段，如果为 false，它不会在该项目下方显示菜单栏，否则，当您单击该列表的其中一个项目时，当您向下滚动时，因为它们将具有相同的相对位置（如果您单击第一项，位置 = 0，当您向下滚动时，将有另一个位置 = 0）菜单栏将出现在两个项目上。

希望能帮助到你 ;）

# android - Android 使表格看起来像我想要的

> ID：10283650
> 
> 赞同：1
> 
> 时间：2012-04-23T15:34:49.547
> 
> 标签：android, user-interface, tablelayout, tablerow

我在使桌子看起来像我打算的样子时遇到了一些麻烦。这是几个问题，但由于它们都参考了下面的图片和我提供的详细信息，我认为它们都应该放在一个帖子中。

这是我到目前为止所取得的成就：

![在此处输入图像描述](../Images/e5ebec22753f52bc9fa24ce7e4ebd55b.png)

标题行包含一个 Button 类型的元素。

```
 TableRow.LayoutParams params = new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT);
    Button bt = new Button(getContext());
    bt.setText("Column1");
    mHeader.addView(bt, params);
    mHeader.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
    addView(mHeader); 
```

表格的其余部分是这样填充的：
（Messagerow 扩展了 TableRow 并有一个 TextView 成员）

```
 for(int i = 0; i < 100; i++) {
            MessageRow mr = new MessageRow(getContext());
            // stuff to set the TexView text and color
            mr.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
            this.addView(mr);
        } 
```

**1.如何使标题行高度更像行？** 

**2.如何让按钮占据行的全宽？** 如果表格是空的，没有文本行只是标题，那么按钮匹配行宽。一旦我添加一行文本，列宽就会被调整，但按钮宽度不会。

**3\. 如何让行填满屏幕宽度？（MATCH_PARENT 不这样做）** 

**4\. 如何在表格行之间画一条细线？** 我试图覆盖 MessageRow 上的 onDraw() 函数，但它从未被调用，甚至一次也没有。

不要误会我的意思。我不是要求你为我做我的工作。这些是我试图自己解决的问题，并在谷歌上搜索并阅读了类似的帖子，但没有找到答案。
*注意：我发现 Android 的 Javascript 中的 UI 设计缺乏对所有这些小细节的清晰控制和清晰的文档。*

**编辑**
这是我创建表的方式：

```
 TableLayout mTable = new TableLayout(this);

    HorizontalScrollView hview = (HorizontalScrollView) findViewById(R.id.hscroll);

    populate(mTable);
    mTable.setLayoutParams(new TableLayout.LayoutParams( TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
    mTable.setBackgroundColor(Color.WHITE);

    hview.addView(mTable); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:35:21.350

> 1.  如何使标题行高度更像行？

使用默认值`Button`没有什么可做的。使用`Button`九个补丁图像，在按钮的文本和您看到的边框之间有一些空间。您可以使用较小的字体，但您可能会看起来很难看。要尝试的另一件事是为 Button 使用您自己的背景并摆脱默认的额外空间（默认的九个补丁图像），因此最终高度接近`TextView`s 中文本的高度。或者尝试使用固定值对所有行强制执行标准高度。

> 1.  如何使按钮占据行的整个宽度？

我认为你有不止一个`TextView`，`MessageRow`所以当你添加`Button`它时它会移动到第一列（对应于第一列`TextView`）。如果是这种情况，请`Button` *跨越*`TextViews`代表in数量的列数`MessageRow`：

```
TableRow.LayoutParams params = new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT);
params.span = 3; // if you have 3 `TextView` in the MessageRow
    Button bt = new Button(getContext());
    bt.setText("Column1");
    mHeader.addView(bt, params); 
```

如果不是这种情况，请添加更多详细信息。

> 1.  如何使行填充屏幕宽度？（MATCH_PARENT 不这样做）

正如我在您之前的一个问题上所说的那样，我不知道为什么会发生这种情况（但我在那里为您提供了一些解决方案来克服这个问题）。还：

1.  `mHeader`另一个`MessageRow`是 a 的子级，`Tablelayout`正确`LayoutParams`使用它们的是`LayoutParams`父级的 the ：`TableLayout.LayoutParams`而**不是** `TableRow.LayoutParams`。

2.  您`TextView`在`MessageRow`（从我在之前的问题中看到的）中添加一些，将这些子视图添加`TableRow.LayoutParams`到`MessageRow`。

3.  您仅在代码中的任何地方使用`WRAP_CONTENT`，`LayoutParams`您可能希望将宽度（构造函数中的第一个参数）设置为`FILL_PARENT`/`MATCH_PARENT`

> 1.  如何在表格行之间画一条细线？

您可以使用一个简单`View`的分隔符：

```
for(int i = 0; i < 100; i++) {
   MessageRow mr = new MessageRow(getContext());
   // stuff to set the TexView text and color
   mr.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
   this.addView(mr);
   View separator = new View(getContext());
   separator.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, 3)));
   separator.setBackgroundColor(Color.RED);
   this.addView(separator);
} 
```

因为您有 100 行，您可以尝试设置一个带有分隔线的可绘制对象作为`TableRow`(`header`和`MessageRow`) 的背景，而不是上述向布局添加另外 100 个视图的方法。

**额外说明：**

您有很多视图要添加到单个活动布局中，您正在谈论 100 行，如果您`MessageRow`比简单的更复杂`TextView`（我认为是），您可能会遇到一些性能问题。我建议你看看美妙的`ListView`小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:46:31.260

这里没有编程环境，但我会尝试回答你的一些问题。

1.  您的标题行（按钮）比基于测试的行高的原因是按钮需要更多空间并且该行可以容纳它。默认按钮在文本的顶部/底部都有填充。我认为你最好的选择是创建你自己的按钮，这给你额外的好处是能够控制外观和感觉。似乎其他人以前也遇到过这个问题：[Can't get rid of bottom padding on button](https://stackoverflow.com/questions/5211774/cant-get-rid-of-bottom-padding-on-button)

2.  您的按钮设置为 wrap_content 这意味着它不会比它需要的大（它会增长/缩小，因此它可以适合文本“Column1”或您放在那里的任何内容）。我怀疑您需要将其设为 FILL_PARENT，而不是制作 Button WRAP。

3.  不是您的表格行需要填充屏幕宽度，而是您的表格需要填充屏幕。无论您在哪里定义表，它都*可能*设置为水平维度的 WRAP_CONTENT。将它设置为 FILL_PARENT 并且您的表格应该扩展到它的容器的全宽（在这种情况下，它应该扩大屏幕的全宽）

4.  可能有几种不同的方法可以做到这一点。我最近使用的一种方法是使用 View 标签，它基本上看起来像屏幕上的水平条。下面是如何实现它的链接。 [http://sonnygill.net/android/horizo​​ntal-rule/](http://sonnygill.net/android/horizontal-rule/)

# c# - 有没有更好的方法来返回列表中的下一个项目并从末尾循环到前面？

> ID：10283653
> 
> 赞同：8
> 
> 时间：2012-04-23T15:35:03.187
> 
> 标签：c#, linq, list, enumeration

我有以下**不同**字符串的列表：

“A”
“B”
“C”

如果我想要 A 之后的项目，我得到 B。在 B 之后，我得到 C。在 C 之后，我得到 A。目前我有以下代码，但出于某种原因，我觉得有更好的方法去做这（也许？）。

```
private string GetNext(IList<string> items, string curr)
{
    if (String.IsNullOrWhitespace(curr))
        return items[0];

    var index = items.IndexOf(curr);
    if (index == -1)
        return items[0];

    return (index + 1 == items.Count) ? items[0] : items[index + 1];
} 
```

我也绝对愿意采用 LINQ 式的方式来做这件事 :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T15:46:09.690

您拥有的解决方案在功能上是正确的，但它的性能还有一些不足之处。通常在处理列表样式结构时，您会期望`GetNext`在 O(1) 时间内返回结果，但此解决方案是 O(N)。

```
public sealed class WrappingIterator<T> {
  private IList<T> _list;
  private int _index;
  public WrappingIterator<T>(IList<T> list, int index) {
    _list = list;
    _index = index;
  }
  public T GetNext() {
    _index++;
    if (_index == _list.Count) {
      _index = 0;
    }
    return _list[_index];
  }

  public static WrappingIterator<T> CreateAt(IList<T> list, T value) {
    var index = list.IndexOf(value);
    return new WrappingIterator(list, index);
  }
} 
```

这里的初始调用`CreateAt`是 O(N)，但后续调用`GetNext`是 O(1)。

```
IList<string> list = ...;
var iterator = WrappingIterator<string>.CreateAt(list, "B");
Console.WriteLine(iterator.GetNext());  // Prints C
Console.WriteLine(iterator.GetNext());  // Prints A
Console.WriteLine(iterator.GetNext());  // Prints B 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T15:40:45.753

我想也许你可以换行

```
return (index + 1 == items.Count) ? items[0] : items[index + 1]; 
```

对于类似的东西

```
return items[(index + 1) % items.Count]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:42:59.797

如果您跟踪当前索引而不是当前字符串，我可以看到一些优化，但要做到这一点，项目列表必须是固定的，即不能更改。

你也可以`return items[(index + 1) % items.Count];`

否则，该代码对我来说看起来不错，但也许有人有更聪明的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:49:26.623

LINQ 在这里不是合适的工具。

听起来好像 a[`LinkedList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)会是更好的集合：

```
var linkedItems = new LinkedList<String>(items);
LinkedListNode current = linkedItems.Find("C");
String afterC = current.Next == null ? linkedItems.First.Value : current.Next.Value; 
```

[以下](https://stackoverflow.com/a/169992/284240)是 LinkedList 与 List 相比的优缺点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T15:53:02.227

一种linq方式：

```
var result = (from str in list
              let index = list.IndexOf(curr) + 1
              select list.ElementAtOrDefault(index) ?? list[0]).First(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T15:42:05.250

您可以使用 mod 运算符来简化这一点，并将所有内容合并到一个语句中：

```
return items[((String.IsNullOrWhitespace(curr) 
                ? 0 
                : items.IndexOf(curr)) + 1) % items.Count] 
```

它肯定更短，但我不确定它是否更具可读性：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T15:52:58.080

我认为最好的解决方案在下面的链接中，我试过了，效果很好。

[http://www.dotnetperls.com/sort-list](http://www.dotnetperls.com/sort-list)

# ruby-on-rails - 使用数组而不是命名路由助手

> ID：10283654
> 
> 赞同：0
> 
> 时间：2012-04-23T15:35:10.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

考虑以下编码风格：

```
link_to 'Widget', [:admin, widget]
# vs
link_to 'Widget', admin_widget_path(widget)

form_for [:admin, widget]
# vs
form_for widget, :url => admin_widget_path(widget) 
```

你更偏向于哪个，为什么？我最感兴趣的是*为什么*你更喜欢其中一个。

**更新**

只有 1 条评论？我很失望 :( 可能希望听到有关性能、约定、一致性等的信息。似乎 StackOverflow 已经变成了快速的即兴答案，希望得到分数。讨论和想法发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:45:20.883

我更喜欢辅助方法，因为我已经完成了它们，而且它们对我来说更好读。

我发现阵列版本的交流性较差（如果更短的话），并且对 IDE 的支持较少（但 YMMV）。

# .net - 使用包装器的 sql 事务的适当语法

> ID：10283656
> 
> 赞同：0
> 
> 时间：2012-04-23T15:35:24.243
> 
> 标签：.net, sql-server

我需要在数据库应用程序中为 sql 语句添加事务，到目前为止，我不需要这样做，因为我主要是提取数据，或者对现有数据进行非常小的更改。

我一直在使用嵌套 using 语句非常成功地使用整洁的构造，但我想与比我更了解的人核实这个修改后的构造是否可以在嵌入事务的情况下按我预期的那样工作。

```
 using (SqlCommand cmd = new SqlCommand())
        using (cmd.Connection = new SqlConnection()) {
            cmd.Connection.ConnectionString = "...";
            cmd.Connection.Open();
            using (SqlTransaction tran = cmd.Connection.BeginTransaction()) {
                // do the work (try catch wraps the statements)
                // commit transaction if no errors found or rollback
            }
            cmd.Connection.Close();
        } 
```

提前谢谢你问候马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:41:13.787

`TransactionScope`有一个更易于使用的内置类。在一个`using`块中实例化它，其中的任何内容都将成为同一事务的一部分。

```
using(var ts = new TransactionScope())
using (SqlCommand cmd = new SqlCommand()) 
using (cmd.Connection = new SqlConnection()) 
{ 
  cmd.Connection.ConnectionString = "...";
  cmd.Connection.Open();

  // Do the work

  ts.Complete();

  cmd.Connection.Close();
} 
```

如果发生任何异常，transactionscope 将在处置时自动中止所有操作。transactionscope 还影响在任何调用的函数中完成的任何操作，而无需传递 db 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:56:46.753

正如您所写的那样，它不起作用 - 您必须通过 SqlCommand 类的[Transaction 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.transaction.aspx)将命令与事务相关联。此外，您可能必须先打开连接才能开始事务

使用 TransactionScope 更容易，但需要将数据库服务器设置为使用[MSDTC](http://blogs.msdn.com/b/florinlazar/archive/2004/03/04/what-is-msdtc-and-why-do-i-need-to-care-about-it.aspx)

我们使用我工作的共享环境，MSDTC 不是一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:44:06.580

而不是`SqlTransaction`，考虑使用[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx).

与`TransactionScope`您一起，您需要将其`using`声明包装在`SqlConnection`创建周围。为了提交，您需要`Complete`在块结束之前调用。

```
using (var tx = new TransactionScope())
using (SqlCommand cmd = new SqlCommand())
using (cmd.Connection = new SqlConnection()) 
{
    cmd.Connection.ConnectionString = "...";
    cmd.Connection.Open();

    // do the work (try catch wraps the statements)
    // commit transaction if no errors found or rollback

    tx.Complete(); // commits transaction
} 
```

# c# - ado.net 实体的准系统浅序列化

> ID：10283665
> 
> 赞同：0
> 
> 时间：2012-04-23T15:35:54.977
> 
> 标签：c#, entity-framework, serialization, ado.net

我意识到已经发布了很多关于 ADO.Net 实体序列化的问题，但我没有任何运气找到一个真正解决我想做的事情的问题。

基本上，我需要一个 ADO.Net 实体的非常简单的、浅的 JSON 或纯对象表示。目的是记录变更；即，当要更改记录时，我想在“之前”和“之后”获取其数据的副本，并记录更改。

我不希望考虑任何导航、复杂或其他属性；只是实体的标量属性。如果我错过了一些只会在特殊情况下出现的数据，那很好——只是尝试做一个粗略的日志。理想情况下，我的最终代码应如下所示：

```
Employee emp = db.Employees.First();

string oldRecordJSON = MySerializer.serialize(emp);

emp.Name = "Fred";
db.saveChanges();

string newRecordJSON = MySerializer.serialize(emp);

ChangeLog.logDBChange("Employees", emp.ID, oldRecordJSON, newRecordJSON, DateTime.Now); 
```

...任何快速简便的实施方法`MySerializer.serialize`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:41:31.877

如果您只是想要员工的某些特定属性，请考虑创建一个基本模型并将其序列化。

```
var serializer = new JavaScriptSerializer();
serializer.Serialize(new MyEmployeeModel{ // set fields here}); 
```

如果您愿意，您可以将其构建为转换器，这就是我的做法。

我有一个接口，`IConverter<TInputType, TOutputType>`您可以从中创建一个转换器以将（或您想做的任何事情）注入您的代码。

```
public interface IEmployeeFromDatabaseToBasicEmployeeModelConverter 
     : IConverter<TheDBType, MyEmployeeModel>{}

public class EmployeeFromDatabaseToBasicEmployeeModelConverter :
                               IEmployeeFromDatabaseToBasicEmployeeModelConverter 
{
  public MyEmployeeModel Invoke(TheDBType myDbTypeObject)
  {
     return new MyEmployeeModel{
      // set properties.
     }
  }
} 
```

# jquery - IE8中浏览器下拉菜单下的JQueryUI下拉菜单

> ID：10283667
> 
> 赞同：1
> 
> 时间：2012-04-23T15:36:03.903
> 
> 标签：jquery, html, css, jquery-ui, drop-down-menu

我有一个正在处理的页面，其中有一些字段元素和下拉列表，它应该看起来像这样：![布局](../Images/b2a50d05b959c31be3e92179b486388f.png)

我现在已经在表格中设置了它，代码如下所示：

```
<!DOCTYPE html>
<html> 
<head> 
    <title>Corporate Directory</title>  
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <script src="Scripts/jquery-1.6.4.min.js"></script>
    <link type="text/css" href="Styles/base.css" rel="stylesheet" />
    <script type="text/javascript" src="Scripts/Autocomplete/jquery.autocomplete.js"></script>  

   <script type="text/javascript">
    $(document).bind("mobileinit",function(){ 
        path = "path";
        $.ajax({url:path+"Mobile_PhoneStart.cfm",
            dataType:'json',
            success:(function(data){
                  //stuff to do autofill
                  populatebusunit();
            }),
            error:(function(){alert("Session Expired. Restart the Brower/App.");})});

        });     
        function populatebusunit(){
            // fills the dropdown for business unit
            for(var i=1;i<sdata.DATA.length;i++){
                var listvalue = $.trim(sdata.DATA[i][2])+" - *" + $.trim(sdata.DATA[i][0]) +"*";
                var markup = markup + '<option value="'+$.trim(sdata.DATA[i][0])+'">'+listvalue+'</option>';
            }
            $("#busunit").append(markup).trigger("create"); 
        }
        function loadjscssfile(filename, filetype){
            //load a css file dynamically
         function getInternetExplorerVersion()
            // Returns the version of Internet Explorer or a -1
            // (indicating the use of another browser).
            {
              var rv = -1; // Return value assumes failure.
              if (navigator.appName == 'Microsoft Internet Explorer')
              {
                var ua = navigator.userAgent;
                var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
                if (re.exec(ua) != null)
                  rv = parseFloat( RegExp.$1 );
              }
              return rv;
            }
             function checkVersion()
             {
               var msg = "You're not using Internet Explorer.";
               var ver = getInternetExplorerVersion();

               if ( ver > -1 )
               {
                 if ( ver >= 8.0 ) 
                   msg = "You're using a recent copy of Internet Explorer."
                 else
                   msg = "You should upgrade your copy of Internet Explorer.";
               }
               alert( msg );
             }      
    </script> 
<link rel="stylesheet" href="Styles/autocomplete.css" />    
<script src="Scripts/jquery.mobile-1.0.js"></script>
<link rel="stylesheet" href="Styles/jquery.mobile-1.0.min.css" />
<link rel="stylesheet" href="Styles/Main.css" />
<script type="text/javascript">
var IE = getInternetExplorerVersion();
loadjscssfile("Styles/customtheme.css", "css");

</script>   
</head> 
<body>
<!-- -------- Corporate Directory Lookup -->
<div data-role="page" id = "Mainpage" data-title = "Corporate Directory">
    <div><img src="images/corporatedirectory2.jpg" alt="test"></img><a data-role="button" id="link" data-inline="true" href="Lookup.html" data-icon="search" data-theme="a" rel="external" data-ajax="false" data-mini="true">Basic Search</a></div>
    <div></div> <br><br><br>
    <div data-role="content">
        <div><form action="SearchResults.html" method="get" rel="external" data-ajax="false">
            <input type="Hidden" name="StartRow" value=1>
            <input type="Hidden" name="SearchFlag" value="no">
            <input type="Hidden" name="SearchTable" value="A">
            <input type="Hidden" name="MName" value="">
            <br>
            <table border="0">
                <col width="auto" />
                <col width="100%" />
                <tr>
                    <td nowrap><label for="lastname">Last Name:</label></td>
                    <td><input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase" name="LName" id="lastname" value="" placeholder="Lastname"/></td>
                </tr>
                <tr>
                    <td nowrap><label for="firstname">First Name:</label></td>
                    <td><input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase;font-family:Arial;" name="FName" id="firstname" value="" placeholder="Firstname"/></td>
                </tr>
                <tr>
                    <td nowrap><label for="firstname">Comit ID:</label></td>
                    <td><input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase;font-family:Arial;" name="commitid" id="commitid" value="" placeholder="Comit ID"/></td>
                </tr>
                <tr>
                    <td nowrap><label for="aim">AIM:</label></td>
                    <td><input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase" id="aim" name="AIM" placeholder="AIM Number"/></td>
                </tr>
                <tr>
                    <td nowrap><label for="busunit" class="select">Business Unit:</label></td>
                    <td><select name="Dept" data-mini="true" id="busunit" class="resultset">
                            <option value=""></option>
                        </select></td>
                </tr>
                <tr>
                    <td nowrap><label for="phone">Phone Number:</label></td>
                    <td><input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase" id="phone" name="Phone" placeholder="Phone Number"/></td>
                </tr>
                <tr>
                    <td nowrap><label for="resultnumber" class="select">No of Results:</label></td>
                    <td><select name="resultnumber" data-mini="true" id="resultnumber" class="resultset">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select></td>
                </tr>
            </table>
            <button type="submit" data-mini="true" data-theme="a" rel="external" data-ajax="false">Submit</button>
        </form></div><!-- End of Form -->               
    </div><!-- End of Content -->
</div><!-- End of Page -->

</body>
</html> 
```

这是唯一一个将下拉菜单作为问题的页面，我几乎可以肯定这是因为它在表格中。我尝试了其他一些方法，但无法在 IE 中正确布置所有内容（这在企业环境中往往是强制性的）。

替代解决方案（我们在标签上设置了 auto width nowrap 并且字段占据了左侧的其余空间）是完全可以接受的，只要它们至少在 IE8 中工作（尽管 IE6 也会很好）

使用@GlennG 的评论，我已经正确显示了下拉列表，但是输入字段现在有问题！![差不多好了](../Images/1ee81878a174bbb41dd4a234625a08dd.png)

# HTML

```
<p class="testing2">
    <label class="testing" for="lastname">Last Name:</label>
    <input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase" name="LName" id="lastname" value="" placeholder="Lastname"/>
</p>
<p class="testing2">
    <label class="testing" for="firstname">First Name:</label>
    <input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase;font-family:Arial;" name="FName" id="firstname" value="" placeholder="Firstname"/>
</p>
<p class="testing2">
    <label class="testing" for="firstname">Comit ID:</label>
    <input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase;font-family:Arial;" name="commitid" id="commitid" value="" placeholder="Comit ID"/>
</p>
<p class="testing2">
    <label class="testing" for="aim">AIM:</label>
    <input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase" id="aim" name="AIM" placeholder="AIM Number"/>
</p>
<p class="testing2">
    <label class="testing" for="busunit" class="select">Business Unit:</label>
    <select name="Dept" data-mini="true" id="busunit" class="resultset">
            <option value=""></option>
        </select>
</p>
<p class="testing2">
    <label class="testing" for="phone">Phone Number:</label>
    <input type="search" data-mini="true" autocomplete="off" style="text-transform: uppercase" id="phone" name="Phone" placeholder="Phone Number"/>
</p>
<p class="testing2">
    <label class="testing" for="resultnumber" class="select">No of Results:</label>
    <select name="resultnumber" data-mini="true" id="resultnumber" class="resultset">
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select>
</p>
<button type="submit" data-mini="true" data-theme="a" rel="external" data-ajax="false">Submit</button> 
```

# CSS

```
#testing{
    display:block;
    width: 200px;
    float: left;
    clear: left;
}
#testing2{
    clear: both;
} 
```

来自浏览器的实际 HTML 最终是这样的（取自 firebug）

```
<p class="testing2">
    <label class="testing ui-input-text" for="lastname">Last Name:</label>
    <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c ui-mini">
        <input class="ui-input-text ui-body-c" data-mini="true" autocomplete="off" style="text-transform: uppercase;" name="LName" id="lastname" value="" placeholder="Lastname" data-type="search" type="text"><a data-mini="true" data-theme="c" data-iconpos="notext" data-icon="delete" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true" href="#" class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-mini ui-btn-icon-notext ui-input-clear-hidden" title="clear text"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">clear text</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a>
    </div>
</p>
<p class="testing2">
    <label class="testing ui-input-text" for="firstname">First Name:</label>
    <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c ui-mini">
        <input class="ui-input-text ui-body-c" data-mini="true" autocomplete="off" style="text-transform: uppercase; font-family: Arial;" name="FName" id="firstname" value="" placeholder="Firstname" data-type="search" type="text"><a data-mini="true" data-theme="c" data-iconpos="notext" data-icon="delete" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true" href="#" class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-mini ui-btn-icon-notext ui-input-clear-hidden" title="clear text"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">clear text</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a>
    </div>
</p>
<p class="testing2">
    <label class="testing ui-input-text" for="firstname">Comit ID:</label>
    <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c ui-mini">
        <input class="ui-input-text ui-body-c" data-mini="true" autocomplete="off" style="text-transform: uppercase; font-family: Arial;" name="commitid" id="commitid" value="" placeholder="Comit ID" data-type="search" type="text"><a data-mini="true" data-theme="c" data-iconpos="notext" data-icon="delete" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true" href="#" class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-mini ui-btn-icon-notext ui-input-clear-hidden" title="clear text"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">clear text</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a>
    </div>
</p>
<p class="testing2">
    <label class="testing ui-input-text" for="aim">AIM:</label>
    <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c ui-mini">
        <input class="ui-input-text ui-body-c" data-mini="true" autocomplete="off" style="text-transform: uppercase;" id="aim" name="AIM" placeholder="AIM Number" data-type="search" type="text"><a data-mini="true" data-theme="c" data-iconpos="notext" data-icon="delete" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true" href="#" class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-mini ui-btn-icon-notext ui-input-clear-hidden" title="clear text"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">clear text</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a>
    </div>
</p>
<p class="testing2">
    <label class="testing ui-select" for="busunit">Business Unit:</label>
    <div class="ui-select">
        <div class="ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-mini ui-btn-block ui-btn-icon-right" data-mini="true" data-inline="false" data-theme="c" data-iconpos="right" data-icon="arrow-d" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true">
            <span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text"></span><span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span></span>
            <select name="Dept" data-mini="true" id="busunit" class="resultset">
                <option value=""></option>
                 undefined
                <option value="BD">ALCENTRA INC - *BD*</option>
                <option value="HI">APPLICATION DEVELOPMENT - *HI*</option>
            </select>
        </div>
    </div>
</p>
<p class="testing2">
    <label class="testing ui-input-text" for="phone">Phone Number:</label>
    <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c ui-mini">
        <input class="ui-input-text ui-body-c" data-mini="true" autocomplete="off" style="text-transform: uppercase;" id="phone" name="Phone" placeholder="Phone Number" data-type="search" type="text"><a data-mini="true" data-theme="c" data-iconpos="notext" data-icon="delete" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true" href="#" class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-mini ui-btn-icon-notext ui-input-clear-hidden" title="clear text"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">clear text</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a>
    </div>
</p>
<p class="testing2">
    <label class="testing ui-select" for="resultnumber">No of Results:</label>
    <div class="ui-select">
        <div class="ui-btn ui-shadow ui-btn-corner-all ui-mini ui-btn-block ui-btn-icon-right ui-btn-up-c" data-mini="true" data-inline="false" data-theme="c" data-iconpos="right" data-icon="arrow-d" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true">
            <span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">10</span><span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span></span>
            <select name="resultnumber" data-mini="true" id="resultnumber" class="resultset">
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>
</p>
<div aria-disabled="false" class="ui-btn ui-shadow ui-btn-corner-all ui-mini ui-btn-block ui-btn-up-a" data-mini="true" data-inline="false" data-theme="a" data-iconpos="" data-icon="" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true">
    <span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Submit</span></span><button aria-disabled="false" class="ui-btn-hidden" type="submit" data-mini="true" data-theme="a" rel="external" data-ajax="false">Submit</button>
</div> 
```

输入字段占据整个宽度并忽略标签中的浮动，然后重叠标签。

# sql-server - 数据源连接“使用 Windows 身份验证”不适用于 XMLA 脚本

> ID：10283671
> 
> 赞同：0
> 
> 时间：2012-04-23T15:36:22.000
> 
> 标签：sql-server, ssas, xmla

我正在执行一个创建数据库的 XMLA 脚本。数据库中的数据源对象创建成功。当我查看数据源的连接字符串时，选择了“使用 SQL Server 身份验证”的单选按钮（用户名和密码为空白），即使连接字符串指定了“Integrated Security=SSPI”。我需要从我的脚本中自动选择“使用 Windows 身份验证”选项。

以下是创建数据源的相关 XMLA：

```
 <DataSource xsi:type="RelationalDataSource">
                <ID>MyDataStore</ID>
                <Name>MyDataStore</Name>
                <ConnectionString>Provider=SQLNCLI10.1;Data Source=MYSERVER;Integrated Security=SSPI;Initial Catalog=MYDB</ConnectionString>
                <ImpersonationInfo>
                    <ImpersonationMode>Default</ImpersonationMode>
                </ImpersonationInfo>
                <Timeout>PT0S</Timeout>
            </DataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:54:09.760

我知道的一件事是部署向导会从生成的 XMLA 脚本中删除安全信息。但是您似乎已对其进行了编辑，因此我认为您缺少 DataSourcePermissions 标记。

我的数据源标签与您的完全一样，并且我的部署工作正常，因此请尝试添加它：

```
 <DataSourcePermissions>
          <DataSourcePermission>
            <ID>DataSourcePermission</ID>
            <Name>DataSourcePermission</Name>
            <RoleID>Role</RoleID>
            <Read>Allowed</Read>
          </DataSourcePermission>
        </DataSourcePermissions> 
```

# jquery - 使用 JQuery Dialogue 显示弹出屏幕

> ID：10283672
> 
> 赞同：0
> 
> 时间：2012-04-23T15:36:26.740
> 
> 标签：jquery

```
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<%
String str ="Ravi";
%>
 <script>
function changeIt(_src)
{
  $("#dialog").dialog();
}
 </script>

</head>
<body >
<img onclick="changeIt(this)" src='Cham/ravi.jpg' name='myimage' height ="100" width="100"  />
<div id="dialog" title="Dialog Title">
The Name is <%=str%>
<img  src='Cham/ravi.jpg' name='myimage' height ="1000" width="1000"  />
</div>
</body>
</html> 
```

你好 ，

在页面启动时，在 AJAX 调用中，我有一些图像存在于一个文件夹中，我将获取这些路径并将它们显示在 UI 页面上。

现在，在 UI 页面上单击该图像时，我试图显示一个 Jquery 对话框，该对话框必须包含数据库中与该图像详细信息相关的一些数据，以及更大尺寸的该图像（已单击）。（基本上是一个POP UP）

当我在对话 div 中也包含图像时，它看起来很尴尬，因为图像仅在页面加载时加载。

如果这不是在富网站上显示弹出窗口的更好方法，因为您是 UI 专家，您能否告诉我最好的方法是什么？我不确定灯箱是否适合我的要求，请建议我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:57:01.197

我不太明白你的问题，但至少我想在这里提供帮助..

要修复您的代码，这里是工作示例。不要忘记在您的页面中包含 jqueryUI。

```
<img class="thumbnail" src='Cham/ravi.jpg' name='myimage' height ="100" width="100"  />

<div id="dialog" title="Dialog Title">
The Name is <%=str%>
<img  src='Cham/ravi.jpg' name='myimage' height ="1000" width="1000"  />
</div>

$(document).ready(function(){
    $('#dialog').dialog({autoOpen :false});
});

$('.thumbnail').on('click', function() {
    $('#dialog').dialog('open');
});​ 
```

另外，如果我没有误解你的问题，[这个插件](http://highslide.com/)就是你要找的。

# java - Spring Integration 2 - Splitter 只返回第一个元素

> ID：10283677
> 
> 赞同：1
> 
> 时间：2012-04-23T15:36:39.990
> 
> 标签：java, spring, spring-integration

我正在使用 Spring Integration 2。我有以下场景。由正文字段和收件人列表组成的“MassMessageObject”。我正在实现一个拆分器来为列表中的每个收件人创建一个“BasicMessageObject”。问题是分离器的输出通道只接收到第一条消息。例如：

MassMessageObject> [body: Hello, recipients{A,B}] 正在创建 BasicMessageObject {[body: Hello, recipient: A], [body: Hello, recipient: B]} 的列表。

连接到输出通道的端点正在接收“[body: Hello, recipient: A]”而不是“[body: Hello, recipient: B]”。

以下是我的应用程序上下文：

```
<int:splitter input-channel="mass_receiving_channel"
                  output-channel="receiving_channel"                  
                  method="splitMessages"
                  ref="massMessageSplitter"/>

<!-- Main Chain. The one that will lead to the messageTypeRouter -->
<int:chain input-channel="receiving_channel" output-channel="sms_channel">
        <int:service-activator ref="saveMessageToDB" method="saveMessageToDB"/>
        <int:gateway request-channel="message_type_router_channel"/>
</int:chain> 
```

以下是分线器...

```
public List<BasicMessageObject> splitMessages(final GenericMessage message) {
        List<BasicMessageObject> messages = new ArrayList<BasicMessageObject>();
        // DOING STUFF HERE 
        return messages;
    }
}

[springframework.integration.jms.ChannelPublishingJmsMessageListener:234] - converted JMS Message [ActiveMQObjectMessage {commandId = 6, responseRequired = true, messageId = ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1, originalDestination = null, originalTransactionId = null, producerId = ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2, destination = queue://mass_messaging_queue, transactionId = null, expiration = 0, timestamp = 1335249128840, arrival = 0, brokerInTime = 1335249128841, brokerOutTime = 1335249128842, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@39673d71, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = true, readOnlyBody = true, droppable = false}] to integration Message payload [com.connexo.icubeplus3.dispatcher.connector.messageobjects.SmsMassMessageObject@28f2e328]
[springframework.integration.channel.DirectChannel:224] - preSend on channel 'mass_receiving_channel', message: [Payload=com.connexo.icubeplus3.dispatcher.connector.messageobjects.SmsMassMessageObject@28f2e328][Headers={timestamp=1335249128882, id=fb9904da-f5b1-49e0-af25-6711015f1365, jms_redelivered=false, jms_messageId=ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1}]
[springframework.integration.splitter.MethodInvokingSplitter:72] - org.springframework.integration.splitter.MethodInvokingSplitter@56de9984 received message: [Payload=com.connexo.icubeplus3.dispatcher.connector.messageobjects.SmsMassMessageObject@28f2e328][Headers={timestamp=1335249128882, id=fb9904da-f5b1-49e0-af25-6711015f1365, jms_redelivered=false, jms_messageId=ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1}]
[springframework.integration.splitter.MethodInvokingSplitter:157] - handler 'org.springframework.integration.splitter.MethodInvokingSplitter@56de9984' sending reply Message: [Payload=[SMS] [sender: icube+] [destination: +35611111111] [messageIdentifier: 1234] [clientId: 1]][Headers={timestamp=1335249137537, id=566d7d54-f4cc-4896-8d39-d95636c20a57, correlationId=fb9904da-f5b1-49e0-af25-6711015f1365, jms_redelivered=false, sequenceSize=4, sequenceNumber=1, jms_messageId=ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1}]
[springframework.integration.channel.DirectChannel:224] - preSend on channel 'receiving_channel', message: [Payload=[SMS] [sender: icube+] [destination: +35611111111] [messageIdentifier: 1234] clientId: 1]][Headers={timestamp=1335249137537, id=566d7d54-f4cc-4896-8d39-d95636c20a57, correlationId=fb9904da-f5b1-49e0-af25-6711015f1365, jms_redelivered=false, sequenceSize=4, sequenceNumber=1, jms_messageId=ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1}]
[springframework.integration.handler.MessageHandlerChain:72] - org.springframework.integration.handler.MessageHandlerChain#0 received message: [Payload=[SMS] [sender: icube+] [destination: +35611111111] [messageIdentifier: 1234] [clientId: 1]][Headers={timestamp=1335249137537, id=566d7d54-f4cc-4896-8d39-d95636c20a57, correlationId=fb9904da-f5b1-49e0-af25-6711015f1365, jms_redelivered=false, sequenceSize=4, sequenceNumber=1, jms_messageId=ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1}]
[springframework.integration.handler.ServiceActivatingHandler:72] - ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@27b71c12] received message: [Payload=[SMS] [sender: icube+] [destination: +35611111111] [messageIdentifier: 1234] [clientId: 1]][Headers={timestamp=1335249137537, id=566d7d54-f4cc-4896-8d39-d95636c20a57, correlationId=fb9904da-f5b1-49e0-af25-6711015f1365, jms_redelivered=false, sequenceSize=4, sequenceNumber=1, jms_messageId=ID:PC-CMICALLEF-61953-1335249128607-0:0:1:2:1}] .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T10:37:20.063

我遇到过同样的问题。将任务执行器添加到拆分器的传出通道使 Spring 能够传递来自拆分器的所有消息：

```
<splitter input-channel="incoming-splitter" output-channel="outgoing-splitter"/>

<channel id="outgoing-splitter">
  <dispatcher task-executor="taskExecutor"/>
</channel>

<bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
  <!-- Use 1 for sequential processing -->
  <property name="corePoolSize" value="1"/>
  <property name="maxPoolSize" value="1"/>
  <property name="threadNamePrefix" value="Splitter Message Handler "/>
  <property name="waitForTasksToCompleteOnShutdown" value="true"/>
</bean> 
```

# symfony - 为什么 symfony 2 同时使用“deps”文件和“composer.json”文件？

> ID：10283680
> 
> 赞同：17
> 
> 时间：2012-04-23T15:36:47.853
> 
> 标签：symfony

为什么 symfony 2 同时使用`deps`文件和`composer.json`文件？

我可以看到一些文件告诉我：

```
php bin/vendors install 
```

而另一个告诉我：

```
php composer.phar install 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T15:56:07.157

该`deps`文件和`bin/vendors`脚本在 Symfony 2.0.x 中使用，而 Symfony 2.1.x 已切换到 Composer。该`bin/vendors`脚本只是一个存根，因为当 Symfony 2.0.0 发布时 Composer 还没有准备好投入生产。

# cordova - 如何获取 phonegap 参数的服务器端值

> ID：10283681
> 
> 赞同：1
> 
> 时间：2012-04-23T15:36:49.320
> 
> 标签：cordova, xpages

有谁知道如何将 documentUNID 放入 phonegap 文件传输的功能中？

我尝试了一些解决方案，但似乎没有任何效果：

首先我试过：

```
function uploadPhoto(imageURI) {

  var options = new FileUploadOptions();
  options.fileKey="file";
  options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
  options.mimeType="image/jpeg";

  var params = new Object();
  params.value1 = "test";
  params.id = XSP.getElementById("#{id:inputText1}").value

  options.params = params;

  var ft = new FileTransfer();

  ft.upload(imageURI, "serverURL", win, fail, options);
} 
```

这导致“找不到函数”。

我的第二个想法是使用`Document1.getDocument.getUniversalID()`

这也会导致“找不到函数”。

有谁知道如何为这个 phonegap 函数的参数获取服务器端值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:29:12.713

您还需要将括号添加到 getDocument 部分，以便它读取`Document1.getDocument().getUniversalID()`. 这可能会解决您遇到的问题。

# php - 表单提交错误：Javascript 验证和 PHP 提交

> ID：10283683
> 
> 赞同：0
> 
> 时间：2012-04-23T15:36:52.503
> 
> 标签：php, javascript, forms

我正在处理一个将在 Javascript 中验证的表单，然后，如果它有效，则继续进行 PHP 提交。PHP 工作正常，如果输入无效，则不允许提交。但是，如果验证函数返回为 false，我无法在转到 PHP 页面之前停止表单。有谁知道我能做些什么来完成这项工作？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Form</title>
<script src="contact.js" type="text/javascript"> </script>
</head>
<body>
  <form name="contact"id="contact"  action="contact.php" onsubmit="return formSub();"method="post" >

    <h2 class="headingText"><em>What's your name?</em></h2>
    <p>
      <label for="firstName">First Name </label>
      <input type="text" name="firstName" id="firstName" tabindex="7">
      <span id="firstNameHTML" class="error"> </span>
    </p>
        <p>
      <label for="lastName">Last Name</label>
      <input type="text" name="lastName" id="lastName" tabindex="8">
      <span id="lastNameHTML" class="error"> </span>
    </p>
        <p>&nbsp;</p>
      <h2 class="headingText"><em>What's your preferred email address?</em></h2>
      <p>
      <label for="email">Email Address</label>
      <input type="text" name="email" id="email" tabindex="9">
        <span id="emailHTML" class="error"> </span>
</p>
      <p>&nbsp;</p>
      <h2 class="headingText"><em>What would you like to contact us about?</em><br><span id="interestHTML"></span>
      </h2>

    <p>
      <label>
        <input type="checkbox" name="Interest" value="training" id="Interest_training" tabindex="10">
        Training Services</label>
      <br>
      <label>
       <input type="checkbox"  name="Interest" value="testing" id="Interest_testing" tabindex="11">
        Testing Services</label>
      <br>
      <label>
        <input type="checkbox"  name="Interest" value="remediation" id="Interest_remediation" tabindex="12">
        Remediation Services</label>
      <br>
      <label>
        <input type="checkbox"  name="Interest" value="General Question" id="Interest_general" tabindex="13">
        General Question</label>
      <br>
      <label>
        <input type="checkbox"  name="Interest" value="error" id="Interest_error" tabindex="14">
        Report a Website Error</label>
      <br>
      <label>
        <input type="checkbox"  name="Interest" value="other" id="Interest_other" tabindex="15">
        Other</label>
</p>
<p>
      <label for="comment"><span class="headingText">Please enter your question or comments here. </span></label><br>
      <span id="commentHTML"></span>

        <textarea name="comment" id="comment" cols="45" rows="5" width="100px" tabindex="16"></textarea>
      </p>
      <input name="submit" type="submit" value="Submit the Form" tabindex="17">
      <input name="reset" type="reset" value="Reset the Form" tabindex="18">
  </form>
  <p>&nbsp;</p>
<p>&nbsp;</p>
</body></html> 
```

Javascript 文档：

```
 // JavaScript Document
    function checkForm()
    {
        formReset();
        var error=0;

        //Check firstName has value
        if (document.getElementById("firstName").value=="")
        {
            document.getElementById("firstNameHTML").innerHTML="<strong> Please provide a first name</strong>";
            error++;

            if(error==1)
            {
                document.getElementById("firstName").focus();
            }
        }

        //Check lastName has value
        if (document.getElementById("lastName").value=="")
        {
            document.getElementById("lastNameHTML").innerHTML="<strong> Please provide a last name</strong>";

            error++;

            if(error==1)
            {
                document.getElementById("lastName").focus();
            }
        }

        //Check email is valid
        if (document.getElementById("email").value=="" || document.getElementById("email").value.search("@") < 0)
        {
            document.getElementById("emailHTML").innerHTML="<strong> Please provide a valid email address</strong>";
            error++;

            if(error==1)
            {
            document.getElementById("email").focus();
            }
        }

        //Check Interest has value
        if (document.getElementByName("Interest").value=="")
        {
            document.getElementById("InterestHTML").innterHTML="<strong> Please let us know what you are interested in contacting us about.</strong>";
            error++;
        }

        //Check Comment has value
        if (document.getElementById("comment").value=="")
        {
            error++;
            document.getElementById("commentHTML").innerHTML="<strong> Please provide your questions or comments here</strong><br>";

            if(error==1)
            {
                document.getElementById("comment").focus();
            }
        }

        if (error==0)
        {
            alert("Passed");
            return true;
        }

        alert("Failed");
        return false;

    }

    function formReset(){
        document.getElementById("firstNameHTML").innerHTML="";
        document.getElementById("lastNameHTML").innerHTML="";
        document.getElementById("emailHTML").innerHTML="";
        alert("Reset");             
    }

    function formSub(){

        if(checkForm())
        {
            alert("Check is True");
            document.getElementById("contact").submit();
            return true;
        }

            alert("I'm sorry, your submission cannot be completed.");
            return false;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:39:14.063

你应该做：

```
onsubmit="return formSub();" 
```

删除`javascript:`

如果您的函数返回`false`表单，则不会提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:19:34.093

你在`checkForm`功能上犯了一个错误。`getElementsByName`返回一个元素数组。因此，为了检查是否所有这些都未选中，您必须将代码替换为：

```
//Check Interest has value
var interests = document.getElementsByName("Interest");            
var noneChecked = true;

for(var i = 0; i < interests.length; i++) {
    if (interests[i].checked) { 
    noneChecked = false;
    }
}

if (noneChecked) {
    document.getElementById("interestHTML").innterHTML="<strong> Please let us know what you are interested in contacting us about.</strong>";
    error++;
} 
```

然后您的功能将按您的意愿工作。

# java - 为什么编译器在泛型返回类型的方法上抱怨 java.lang.Object

> ID：10283684
> 
> 赞同：1
> 
> 时间：2012-04-23T15:36:52.253
> 
> 标签：java, generics

我正在尝试用 Java 编写一个小的内部 DSL，它会生成一个对象树。DSL 代码如下所示：

```
RuleBuilder builder = new RuleBuilder(new Syntax());
Syntax s =
builder.rule("rule1")
            .identifier("foo")
            .choice()
                .terminal("bar")
            .end() // 1) Here it works.
       .end() // 2) Here complains the compiler.
       .rule("rule2")
            .identifier("bar")
       .end()
       .build(); 
```

编译器抱怨（在 2 处）`java.lang.Object`返回的对象`end()`没有方法`rule()`。对我来说很明显 Object 没有这个方法。构建器代码如下（为简单起见，留下组装树的代码）：

```
class RuleBuilder {
    private final Syntax syntax;

    public RuleBuilder(Syntax syntax) {
        this.syntax = syntax;
    }

    public GenericBuilder<RuleBuilder> rule(String name) {
        return new GenericBuilder<RuleBuilder>(this);
    }

    public Syntax build() { return syntax; }
}

class GenericBuilder<P> {
    private final P parentBuilder;

    public GenericBuilder(P parentBuilder) {
        this.parentBuilder = parentBuilder;
    }

    public <P> P end() {
        return (P)parentBuilder;
    }

    public GenericBuilder<P> identifier(String value) { return this; }
    public GenericBuilder<P> terminal(String value) { return this; }
    public GenericBuilder<GenericBuilder> choice() { return new GenericBuilder<GenericBuilder>(this); }
    // ... other sub node types
} 
```

我的实现背后的主要思想：生成的语法树由一个语法根节点组成，它有一些规则节点。该规则节点可以有一些子节点。子节点有两种类型：叶子和节点（在示例代码中仅为简单选择）。我将提供一个流畅的界面，我可以在其中向树添加节点和叶子。要“结束”一个树分支，可以使用`end()`返回父构建器的方法。

我试图解决的问题是，该方法`end()`应该返回可能是类型`RuleBuilder`或`GenericBuilder`. 我不明白为什么它在上面的示例中适用于 1) 而不是 2)。

我已经阅读了很多关于泛型的资源，并且我了解它们是如何`List<T>`工作`Map<K,V>`的。而且我知道“擦除”的事情，即类型信息在运行时丢失。所以我可以理解，在运行时`end()`返回`java.lang.Object`，当类型信息被擦除时。但是我得到了一个编译时错误。我还阅读了 Neal Gafter 关于 Super Type Tokens 和 Typesafe Heterogenous Containers 的博客。但我不确定这是否能解决我的问题。我尝试了几种不同的方法（在网上搜索期间），但现在我被卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:39:42.953

有两个问题。首先是这个：

```
public GenericBuilder<GenericBuilder> choice() { 
    return new GenericBuilder<GenericBuilder>(this);
} 
```

这并不是说“内在”是什么*样*的。`GenericBuilder`您应该能够将其更改为：

```
public GenericBuilder<GenericBuilder<P>> choice() { 
    return new GenericBuilder<GenericBuilder<P>>(this);
} 
```

那时，内部`end()`调用仍然会知道它有 a`GenericBuilder<RuleBuilder>`而不是 raw `GenericBuilder`。

第二个问题在这里：

```
public <P> P end() {
    return (P)parentBuilder;
} 
```

这是一个不应该的通用方法——你不想在这里引入一个*新*的类型参数`P`；你只想要现有的：

```
public P end() {
    return parentBuilder;
} 
```

# php - 如何将回显表头添加到我当前的代码中？

> ID：10283692
> 
> 赞同：-1
> 
> 时间：2012-04-23T15:37:31.397
> 
> 标签：php, html

如何将回显表头添加到我当前的代码中？

我对如何做到这一点有点迷茫，因为 $lines[0] 只打印我的标题行，但是当我执行 if 语句来回显`<th>`if $lines[0] else echo`<tr>`它会回显多个空`<th>`的，所以我如果有人可以提供帮助，我会有点失落。

```
function schedule_gen()
{
    //set file
    $filename='schedule.txt';
    //open
    $handler=fopen('schedule.txt','r');
    //read through file
    $file=fread($handler,filesize($filename));

    //start table creation
    echo "<table id='schedule_table'>"; 

    //split into array by return\linefeed
    $lines=explode("\r\n",$file);

    //loop through rows
    for($i=0;$i<count($lines);$i++) 
    { 
        //if not blank then print row
        if($lines[$i]!=""&&$lines[$i]!=" ")
        {

            echo "<tr class='schedule_row'>"; 

            //split into array by commas
            $items=explode("\t",$lines[$i]);
            //loop through cells 
            for($j=0;$j<count($items);$j++) 
            { 
                 //if not blank then print cell
                 if($items[$j]!=""&&$items[$j]!=" ")
                 {
                     echo "<td class='schedule_cell'>".$items[$j]."</td>"; 
                 }
            } 
            echo "</tr>"; 
        }
     } 
     echo "</table>"; 
     //end table creation

     fclose($handle);
     //close file 
} 
```

schedule.txt 示例：

```
Employee/schedule restrictions  Thur 4/26   Fri 4/27    Sat 4/28    Sun 4/29    Mon 4/30    Tue 5/1 Wed 5/2
Administrative                          
Assistant   8a-4    8a-4    no  no  8a-4p   8a-4p   8a-4p

QC Team -Manager                            
QC team / no Tues or Sat    8a-4    8a-4    no  8a-4p   8a-4p   no  8a-4p
QC team 6p-2a   6p-2a   6p-2a   no  6p-2a   6p-2a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:44:50.797

不太确定我是否正确阅读了您的问题，但这是您需要的吗？

```
function schedule_gen()
{
//set file
$filename='schedule.txt';
//open
$handler=fopen('schedule.txt','r');
//read through file
$file=fread($handler,filesize($filename));

//start table creation
echo "<table id='schedule_table'>"; 

//split into array by return\linefeed
$lines=explode("\r\n",$file);

//loop through rows
for($i=0;$i<count($lines);$i++) 
{ 
//if not blank then print row
if($lines[$i]!=""&&$lines[$i]!=" ")
{
$t_type="td";
if($i==0){$t_type="th";}

//split into array by commas
$items=explode("\t",$lines[$i]);
//loop through cells 
for($j=0;$j<count($items);$j++) 
{ 
//if not blank then print cell
if($items[$j]!=""&&$items[$j]!=" ")
{
echo "<$t_type class='schedule_cell'>".$items[$j]."</$t_type>"; 
}
} 
echo "</tr>"; 
}
} 
echo "</table>"; 
//end table creation

fclose($handle);
//close file 
} 
```

# c - IP地址到整数的转换

> ID：10283703
> 
> 赞同：9
> 
> 时间：2012-04-23T15:38:20.747
> 
> 标签：c, networking

> **可能重复：**
> [IP 地址到整数 - C](https://stackoverflow.com/questions/1680622/ip-address-to-integer-c)

如何将 IP 地址转换为具有以下形式的整数： AB *。*或 ABC* 或 A. *.* .* 或*.* . *.* 我想编写一个 C 程序，它可以确定一个 IP 地址是否是另一个 IP 地址的子集。例如，IP 地址 192.168.125.5 是 192.168 的子集。*.* . 现在我想将两个 IP 地址都转换为唯一的整数，然后检查一个是否是另一个的子集。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T15:54:35.720

您需要确定 IP 地址是否在子网中，并为此应用网络掩码。可能已经有（当然）图书馆可以做你想做的事。这是如果你想自己动手。

如果此 IP 地址来自受信任的来源（即，不是用户），那么您可以通过执行以下操作从标准 C 字符串中简单地提取 IP 地址：

```
char ipAddressString[16] = "192.168.125.5"
char netMaskString[16] = "255.255.0.0"
char subnetString[16] = "192.168.0.0"

uint32_t ipAddress = parseIPV4string(ipAddressString);
uint32_t netmask = parseIPV4string(netmaskString);
uint32_t subnet = parseIPV4string(subnetString);

if (ipAddress & netmask == subnet) {
  return true;
}

uint32_t parseIPV4string(char* ipAddress) {
  char ipbytes[4];
  sscanf(ipAddress, "%uhh.%uhh.%uhh.%uhh", &ipbytes[3], &ipbytes[2], &ipbytes[1], &ipbytes[0]);
  return ipbytes[0] | ipbytes[1] << 8 | ipbytes[2] << 16 | ipbytes[3] << 24;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-23T15:47:35.993

一个 IP 地址，例如 192.168.0.1 可以很容易地写成一个整数，只需用十六进制写成 0xC0 0xA8 0x00 0x01 或只是 0xC0A80001

那么这只是位匹配的情况，因此您构造了一个相应的子网掩码 255.255.0.0 ，它只是 0xFFFF0000 ，您可以通过以下方式测试两者是否匹配：

```
0xC0A80001 & 0xFFFF0000 == 0xC0A80000 & 0xFFFF0000 
```

其中平等测试的一侧是“您关心的基本内容”，另一侧是真实地址，给定的掩码在两侧都是相同的。

一般来说，您可以通过将“*”设置为 0 并将实际数字设置为 0xFF 来构建合适的掩码，如果您想要更细粒度的掩码，则很难用“*”表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:45:18.373

简单且非通用的方法是使用 sscanf (with int a, b, c, d)： `sscanf(ip, "%d.%d.%d.%d", &a, &b, &c, &d);` 但它仅在您拥有所有部分的 ip 时才有效：10.47.100.1

如果不是这种情况，您仍然可以使用 的返回值`sscanf`，它会告诉您它成功找到了多少个匹配项（或 EOF）。

获得 4 个数字后，您可以检查子集关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:46:33.717

单个整数（假设为 32 位）不足以表示您所概述的内容。您需要更多信息才能表达星号。

例如，您可以有一对（地址，网络掩码），其中网络掩码是一个小整数，表示有效高位的数量，因此例如“10.0.0.0”之类的网络地址可能是由对 (0x0a000000, 8) 表示。如果出于某种原因您真的希望能够在地址中的“任何地方”使用通配符，则每个地址位需要一个完整的标志位，因此需要两个 32 位整数。*然后您可以将“192.168 ..* ”之类的东西表示为对（0xc0a80000，0xffff0000）。

# java - GWT 垃圾收集

> ID：10283705
> 
> 赞同：6
> 
> 时间：2012-04-23T15:38:34.373
> 
> 标签：java, javascript, gwt, garbage-collection

我正在创建一个新的演示者，如下所示：

```
new MyPresenter(new MyView()); 
```

它注册一些事件处理程序并绑定到视图等。最终，我可能会“关闭”该视图，使其不再由浏览器呈现。我没有维护对`MyPresenter`任何地方的这个实例的引用。

在有关此主题的 Google 论坛中，常规响应是“将您的引用设置为 null”，然后不要担心。`this = null;`与 Javascript 不同，出于显而易见的原因，我不能只说Java。但是在 Javascript 中，很容易将我知道将不再使用的对象引用清空。

我的问题：由于我没有维护对它的引用，我如何判断该演示者是否已被垃圾收集？它非常明显地存在。我是否应该相信 GWT 和 JS 会解决这个问题？或者我是否需要维护自己的引用，`MyPresenter`以便`null`在完成时可以手动操作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:44:13.700

内存泄漏有两种：

*   DOM/浏览器级别的内存泄漏
*   应用程序内存泄漏。

DOM/浏览器级别的内存泄漏通常会在您关闭应用程序后持续存在。AFAIK 只有旧浏览器 (IE6) 受到影响，这就是 GWT 使用[特殊方式](https://developers.google.com/web-toolkit/articles/dom_events_memory_leaks_and_you)附加处理程序的原因。
对于现代浏览器来说，这应该不是问题，至少如果您关闭应用程序，它们将不是问题。然而，它们可能成为应用程序内存泄漏。（有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/7381201/javascript-should-i-worry-about-memory-leaks-in-2011)）。但总的来说，现代 Javascript GC 在释放未使用的内存方面非常出色。

应用程序内存泄漏可能是长时间运行的应用程序的问题，并且当您动态创建大量视图/演示者并通过事件处理程序保持引用时。但这实际上取决于有关各方的范围。
这篇[文章](http://draconianoverlord.com/2010/11/23/gwt-handlers.html)是一个很好的参考，其中包含更多信息。

最后，为了确保您确实没有任何应用程序内存泄漏，您应该使用[Dev Tools Heap Profiler](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)检查更长时期内的内存消耗。
这篇[博客文章](http://gent.ilcore.com/2011/08/finding-memory-leaks.html)对此有更多信息。

# ios - Analyzer 在 ASIHTTPRequest 中报告内存泄漏

> ID：10283707
> 
> 赞同：2
> 
> 时间：2012-04-23T15:38:48.600
> 
> 标签：ios, networking

我在我的项目中使用 ASIHTTPRequest 库。它在使用 ARC 的应用程序中与 iOS5.1 配合得很好。（此库中的文件使用编译器标志 -fno-objc-arc）但是，当我运行分析器时，它显示出多个潜在的内存泄漏，尤其是在 ASIHTTPRequest 中。我有点不愿意开始在这个库中进行更改，它被广泛使用，非常复杂并且在我的项目中运行良好。

建议？

一个例子：

ASIHTTPRequest.m 第 1515 行

```
// Find out how much data we've uploaded so far 
```

[self setTotalBytesSent:[NSMakeCollectable([(NSNumber *)CFReadStreamCopyProperty((CFReadStreamRef)[self readStream], kCFStreamPropertyHTTPRequestBytesWrittenCount) autorelease]) unsignedLongLongValue]]; if (totalBytesSent > lastBytesSent) {

分析器消息：

对 CFReadStreamCopyProperty 的调用返回一个核心基础对象，该对象的保留计数为 +1

# perl - 如何在控制语言环境的同时在 perl 中运行外部命令？

> ID：10283711
> 
> 赞同：2
> 
> 时间：2012-04-23T15:38:59.037
> 
> 标签：perl, locale

[与这个问题](https://stackoverflow.com/questions/2461472/how-can-i-run-an-external-command-and-capture-its-output-in-perl)相关，但更深入。我正在运行如下命令：

```
foreach $dir (@dirs) {
    $cnt = `svn st $dir | wc -l`;
    if($cnt > 0){
        $content .= "$dir\n";
        $mods++;
    }
} 
```

但是，该目录包含非 ASCII 文件，因此当区域设置不正确或未设置时会引发错误。

在 perl 中设置我需要的语言环境的正确方法是

```
setlocale(LC_CTYPE, 'en_US.UTF-8'); 
```

但是，这似乎不会影响`svn st`命令，因为当 perl 脚本未在具有正确语言环境设置的终端中运行时，仍然会发生语言环境错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:43:40.110

您需要为外部命令设置环境变量：

```
$cnt = `LC_CTYPE=en_US.UTF-8 svn st $dir | wc -l`; 
```

您还可以更改脚本 ( `%ENV`) 的环境，这会更改任何子进程的环境：

```
$ENV{LC_CTYPE} = 'en_US.UTF-8'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:45:13.483

`%ENV`通过操作哈希为新进程设置环境。

```
$ENV{LC_CTYPE} = 'en_US.UTF-8';
$cnt = `svn ...`; 
```

# objective-c - 重音 JSON 响应的编码问题

> ID：10283718
> 
> 赞同：0
> 
> 时间：2012-04-23T15:39:32.713
> 
> 标签：objective-c, ios5

我对 Json 响应和重音字符有疑问。我有这段代码；

```
SBJsonParser *parser = [[SBJsonParser alloc] init];

        NSString *responseString = [[NSString alloc] initWithData:self.multipleData encoding:NSASCIIStringEncoding]; 

        NSDictionary *results = [parser  objectWithString:responseString ]; 
```

我已经尝试过 UTF8 编码、拉丁编码、Json 本机解析器、touchJson 解析器和最佳结果，我在包含重音符号的 NSDictionary 值中得到了这个值：

```
html = "Ubicado en pleno campo de Barcelona, a 5 minutos del n\U00facleo urbano de la ciudad y a 7 kil\U00f3metros de las playas y el Aeropuerto."; 
```

如何正确获取带有重音符号的 NSString？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:54:14.447

数据实际上是什么编码？您需要使用该编码来创建字符串。看看原始字节。如果您看到重音 u (\u00FA) 的 C3 BA，则数据为 UTF-8。如果您看到 00FA，如果所有字符都是两个字节，则它是 UTF-16，否则可能是 ISO-LATIN-1。

获得正确的编码后，您实际上是如何打印字符串以查看它的？例如，有时 NSLog 或调试器会用转义序列替换非 ASCII 字符。你所拥有的可能实际上正在工作。

# asp.net-mvc-3 - 模型绑定显示错误并提供足够的数据

> ID：10283719
> 
> 赞同：0
> 
> 时间：2012-04-23T15:39:33.827
> 
> 标签：asp.net-mvc-3, data-annotations, model-binding

我遇到了一个正在验证的字段的问题，该字段看似未通过验证，但没有完成要求。我会尽量包含所有信息，所以对于这么长的问题帖子表示歉意！

已创建的 ViewModel 是一个 DTO 对象，其中包含足够的信息来操作用户输入的任何数据。由于项目数量未知，我的视图模型比理想模型稍微复杂一些......

```
public class UpdateViewModel
{
    public UpdateViewModel()
    {
        WorkingPeriods = new List<WorkingPeriod>();
        LeavePeriods = new List<LeavePeriod>();
    }

    public Guid UserID { get; set; }
    public DateTime From { get; set; }
    public DateTime Until { get; set; }
    public DateTime Selected { get; set; }

    public IEnumerable<WorkingPeriod> WorkingPeriods { get; set; }
    public IEnumerable<LeavePeriod> LeavePeriods { get; set; }

    public class WorkingPeriod
    {
        public int ID { get; set; }
        public DateTime Date { get; set; }
        public TimeSpan? StartTime { get; set; }
        public TimeSpan? EndTime { get; set; }
    }

    public class LeavePeriod
    {
        public int ID { get; set; }
        public DateTime Date { get; set; }
        public int LeaveTypeID { get; set; }
        public Guid? Reference { get; set; }
        public string Period { get; set; }
        public TimeSpan? UserDefinedPeriod { get; set; }
    }
} 
```

我的观点是，借助一些静态助手的助手能够生成代表信息的 HTML。输出 HTML 类似于：

```
<li class="editorRow">
    <input type="hidden" name="LeavePeriods.index" autocomplete="off" value="8a5522c6-57fe-40a2-95bc-b9792fbe04d3" />
    <input id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__ID" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].ID" type="hidden" value="4" />
    <input id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__Date" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].Date" type="hidden" value="23/04/2012 00:00:00" />
    <select class="leaveTypeDropdown" id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__LeaveTypeID" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].LeaveTypeID">
        <option value="">- please select -</option>
        <option selected="selected" value="2">Annual Leave</option>
        <option value="34">Public Holiday</option>
        <option value="1">Sickness</option>
    </select>
    <div class="leavePeriodRadio">
    <input checked="checked" id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__ALL" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].Period" type="radio" value="ALL" /><label for="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__ALL">Full Day</label>
        <input id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__AM" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].Period" type="radio" value="AM" /> <label for="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__AM">AM</label>
        <input id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__PM" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].Period" type="radio" value="PM" /> <label for="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__PM">PM</label>
        <input class="other-user-period" id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__Other" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].Period" type="radio" value="Other" /> <label for="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__Other">Other</label>
        <span class="user-defined" style="display:none">
            Duration: <input class="timepicker" id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__UserDefinedPeriod" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].UserDefinedPeriod" type="text" value="" />
        </span>
    </div>
</li> 
```

当用户使用 Ajax（通过 Ajax.BeginForm 构造设置）（涉及 MVC3 和 JQuery）提交表单时，就会出现此问题。

```
@using (Ajax.BeginForm("Index", "Timesheet", new AjaxOptions()
    {
        HttpMethod = "POST",
        LoadingElementId = "loading",
        UpdateTargetId = "contentPane",
        OnComplete = "SaveCompleted",
    })) 
```

*   如果用户省略了该字段（他们完全有权这样做），他们会收到消息：`The UserDefinedPeriod field is required.`.
*   或者，如果他们输入一个有效的 TimeSpan 值（例如“12:00”），他们会得到：`The value '12:00' is not valid for UserDefinedPeriod.`。
*   如果他们输入了无效的字符串（例如“Boris”），该值将被清除，并且他们会看到上面的必填字段消息，就好像他们没有输入任何内容一样。（假设：我相信该值已清除，因为“鲍里斯”无法存储在 a 中`TimeSpan?`，因此无法传输回视图）

使用断点并检查各种事物的值，我得出以下结论：

*   该值存在于 Request.Form 中，并且可以与与其分组的其他值一起看到。
*   该值存在于模型中，可以通过使用 VS 中的断点检查它来查看。
*   ModelState.IsValid 正在返回`false`，因为 Model.LeavePeriods.UserDefinedPeriod 有 1 个错误，与最终显示给用户的错误相同。

作为参考，控制器是：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public class TimesheetController : Controller
{
    [HttpPost]
    public ActionResult Index(UpdateViewModel updates, User currentUser)
    {
        if (!ModelState.IsValid)
        {
           // error with model, so lets deal with it and return View();
        }
        // continue with parsing and saving.
    }
} 
```

关于这个问题最让我困惑的是我有其他以类似方式构建的盒子，不会导致任何问题 - 例如`TimeSpan?`WorkingPeriod 可枚举中的两个 s。关于我可以在哪里查看可能是什么问题，我已经没有想法了。我尝试将 ViewModel 的预期值从 a`TimeSpan?`更改为正常值`string`，没有明显差异（即使错误消息相同）。

我猜这个问题要么超出了我在下面详述的范围（不过，控制器和模型相对来说比较普通，所以我不知道还能去哪里看），或者还有一些我不知道的东西了解模型绑定（我已经对模型绑定有很多不了解的地方！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:28:30.590

我已经设法解决了这个问题，但我不太确定为什么我已经修复了，修复了它。

基本上，在 UpdateViewModel 中，我将“UserDefinedPeriod”更改为“OtherPeriod”。

```
public class LeavePeriod
{
    public int ID { get; set; }
    public DateTime Date { get; set; }
    public int LeaveTypeID { get; set; }
    public Guid? Reference { get; set; }
    public string Period { get; set; }
    public TimeSpan? OtherPeriod { get; set; }
} 
```

然后显然在我的代码中的其他地方更改了对它的所有代码引用，包括视图：

```
<span class="user-defined" style="display:none">
    Duration: <input class="timepicker" id="LeavePeriods_8a5522c6-57fe-40a2-95bc-b9792fbe04d3__OtherPeriod" name="LeavePeriods[8a5522c6-57fe-40a2-95bc-b9792fbe04d3].OtherPeriod" type="text" value="" />
</span> 
```

这似乎解决了这个问题。我不确定改变工作的具体原因是什么——所以我愿意接受任何关于可能导致它的原因的评论。但是，此调整对我来说是解决方案，并且可能适用于将来遇到此问题的任何其他人。

# wpf - 手动分组 DataGrid 项目

> ID：10283720
> 
> 赞同：4
> 
> 时间：2012-04-23T15:39:35.607
> 
> 标签：wpf, datagrid, grouping

我需要使用数据网格，我的数据如下所示：firstName、lastName、street、zip、city、country、image

在我的数据网格中，我只会显示名字、姓氏和图像，但它必须按城市分组。

**更新** 下面的代码显示了分组项目，但我要显示的三个项目（名字、姓氏、图像）后面是每行的所有项目（名字、姓氏、街道、邮编、城市、国家、图像）。我想我必须更换`<ItemsPresenter />`但那只是猜测..

谁能帮帮我，我自己一个人解决不了...

```
<Grid>
    <DataGrid ItemsSource="{Binding GroupedMovables}">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Preview" Width="SizeToCells" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Name="Preview" Height="20" Source="{Binding Image}" HorizontalAlignment="Center" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTextColumn Header="first name" Binding="{Binding FirstName}" />
            <DataGridTextColumn Header="last name" Binding="{Binding LastName}" />
        </DataGrid.Columns>
        <DataGrid.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Path=City}" FontWeight="Bold" Padding="3"/>
                        </StackPanel>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <Expander>
                                        <Expander.Header>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Path=Name}" />
                                                <TextBlock Text="{Binding Path=ItemCount}" Margin="8,0,4,0"/>
                                                <TextBlock Text="Element(s)"/>
                                            </StackPanel>
                                        </Expander.Header>
                                        <ItemsPresenter />
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </DataGrid.GroupStyle>
    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:45:56.757

分组的正确方法是使用 a `CollectionView`（有关更多详细信息：[如何在 WPF 中导航、分组、排序和过滤数据](http://www.wpftutorial.net/dataviews.html#grouping)）。以下是我为您创建的一个简单的概念验证应用程序，向您展示如何使用 a`CollectionView`对数据进行分组：

此类表示 DataGrid 中的一行：

```
public class Employee
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Street { get; set; }
    public string ZipCode { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
    public string Image { get; set; }
} 
```

MaindWindow 后面的代码：

```
 /// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        // Create some test data
        var employees =
            new ObservableCollection<Employee>
                {
                    new Employee {FirstName = "Mohammed", LastName = "Fadil", Street = "A B C", ZipCode = "123", City = "London", Country = "UK", Image = "/Images/globe.png"},
                    new Employee {FirstName = "Siraj", LastName = "Hussam", Street = "A B C", ZipCode = "123", City = "London", Country = "UK", Image = "/Images/globe.png"},
                    new Employee {FirstName = "Ayman", LastName = "Tariq", Street = "A B C", ZipCode = "123", City = "London", Country = "UK", Image = "/Images/globe.png"},
                    new Employee {FirstName = "Khalid", LastName = "Sheik", Street = "X Y Z", ZipCode = "234", City = "Paris", Country = "France", Image = "/Images/monitor.png"},
                    new Employee {FirstName = "Hassan", LastName = "Ali", Street = "Q W E R", ZipCode = "544", City = "NY", Country = "USA", Image = "/Images/star.png"},
                    new Employee {FirstName = "Ehsan", LastName = "Mahmoud", Street = "A B C", ZipCode = "123", City = "London", Country = "UK", Image = "/Images/globe.png"},
                    new Employee {FirstName = "Idris", LastName = "Sheik", Street = "X Y Z", ZipCode = "234", City = "Paris", Country = "France", Image = "/Images/monitor.png"},
                    new Employee {FirstName = "Khalil", LastName = "Ali", Street = "Q W E R", ZipCode = "544", City = "NY", Country = "USA", Image = "/Images/star.png"}
                };

        ICollectionView employeesView =
            CollectionViewSource.GetDefaultView(employees);

        // Set the grouping by city proprty
        employeesView.GroupDescriptions.Add(new PropertyGroupDescription("City"));

        // Set the view as the DataContext for the DataGrid
        EmployeesDataGrid.DataContext = employeesView;
    }
} 
```

DataGrid XAML 代码：

```
 <DataGrid Name="EmployeesDataGrid" ItemsSource="{Binding}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding FirstName}" Header="First Name"/>
            <DataGridTextColumn Binding="{Binding LastName}" Header="Last Name"/>
            <DataGridTemplateColumn Header="Image">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="{Binding Image}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>

        <DataGrid.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Path=City}" FontWeight="Bold" Padding="3"/>
                        </StackPanel>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <Expander>
                                        <Expander.Header>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Path=Name}" />
                                                <TextBlock Text="{Binding Path=ItemCount}" Margin="8,0,4,0"/>
                                                <TextBlock Text="Element(s)"/>
                                            </StackPanel>
                                        </Expander.Header>
                                        <ItemsPresenter />
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </DataGrid.GroupStyle>

    </DataGrid> 
```

结果是：

![结果](../Images/b97754ff199c557e14aca11bb2fec99d.png)

有关设置 DataGrid 组样式的更多信息，请查看这篇文章：[WPF DataGrid Control > Grouping](http://www.wpftutorial.net/datagrid.html#grouping)

# r - 组合来自两个不同数据帧的值

> ID：10283721
> 
> 赞同：0
> 
> 时间：2012-04-23T15:39:36.023
> 
> 标签：r, for-loop

我有两个这样的数据框：

```
df.1 <- data.frame(
     var.1 = sample(1:10),
     code = sample(c("A", "B", "C"), 10, replace = TRUE))

df.2 <- data.frame(
    var.2 = sample(1:3),
    row.names=c("A","B","C")) 
```

我需要做的是添加第三列 df.1$var.2 ，对于 df.1$code 中的每个值，根据它们的行名从 df.2$var.2 中获取值。

我到了这一点但没有成功..建议？

```
for (i in 1:length(df.1$code)){
    if(df.1$code[i] == rownames(df.2))
    df.1$var.2[i] <- df.2$var.2
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:42:27.977

你的意思是这样的：

```
df.2$code <- rownames(df.2)
> merge(df.1,df.2,by = "code")
   code var.1 var.2
1     A     5     1
2     B     3     2
3     B     2     2
4     B     7     2
5     B    10     2
6     C     8     3
7     C     4     3
8     C     1     3
9     C     9     3
10    C     6     3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:10:12.243

或者，`join()`从`plyr`包中保留df.1的顺序

```
df.2$code <- rownames(df.2)
library(plyr)
join(df.1, df.2, by = "code")

   var.1 code var.2
1      7    B     2
2      2    A     1
3      3    C     3
4      6    B     2
5     10    C     3
6      4    C     3
7      1    C     3
8      8    B     2
9      9    A     1
10     5    C     3 
```

# c++ - 如何在 Clojure 中创建 C 风格的结构？

> ID：10283723
> 
> 赞同：1
> 
> 时间：2012-04-23T15:39:48.803
> 
> 标签：c++, sockets, clojure, struct

我正在尝试在 Clojure 中创建 C 风格的结构，因此我可以从 Clojure 调用文档记录不佳的 C++ API。

该 API 旨在发送和接收序列化的 protobuf 消息（好的），前面是 C Header 结构（坏的）。初始握手是一个 RPCHandshakeHeader 结构体，该过程大致描述在下面的代码中：

```
struct RPCHandshakeHeader {
    char magic[8];
    int version;

    static const char REQUEST_MAGIC[9];
    static const char RESPONSE_MAGIC[9];
};
[...snip...]

const char RPCHandshakeHeader::REQUEST_MAGIC[9] = "FooBar?\n";
[...snip...]

RPCHandshakeHeader header;
memcpy(header.magic, RPCHandshakeHeader::REQUEST_MAGIC, sizeof(header.magic));
header.version = 1;

socket = new CActiveSocket();
socket->Initialize();
socket->Open((const uint8 *)"localhost", 5000);

socket->Send((uint8*)&header, sizeof(header));
[...code to read response...] 
```

**我怎样才能在clojure中做到这一点？**我需要使用[JNA](https://github.com/Chouser/clojure-jna) /JNI 吗？

有没有办法创建一个 C 结构，将其转换为二进制并通过套接字发送？（我*认为*这是我需要做的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:56:37.180

听起来像是[光泽度](https://github.com/ztellman/gloss)的工作！我不知道这部分 API 的细节，但是你想特别看一下`compile-frame`, 和`repeated`字符串。

# operating-system - what is difference between Software Stack and OS ? why Android is not an OS but software stack?

> ID：10283725
> 
> 赞同：15
> 
> 时间：2012-04-23T15:39:56.340
> 
> 标签：operating-system, terminology

Android is a software stack but not an OS. as stated by developer.android.com

> What is Android? Android is a software stack for mobile devices that includes an operating system, middleware & key applications. The Android SDK provides the tools and APIs necessary to begin developing applications on the Android platform using the Java programming language.

I don't understand that software stack is OS works with the Applications, so Windows is an OS but if I install Applications on it, should I call it a software stack?

So what is the difference between Software Stack and OS, Android includes kernel so why not its an OS?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T15:45:55.227

操作系统是系统的核心内核，而软件堆栈是位于内核之上的软件，它增强和扩展了系统的功能。

Windows 倾向于模糊这条线，但 Linux 使它更明显。

在 Linux 中，内核是操作系统。位于内核之上的软件堆栈可以包括以下内容：

*   X 窗口系统
*   Gnome 窗口管理器
*   用于管理系统的应用程序
*   等等...

因此，诸如用于编辑系统设置的控制面板应用程序之类的东西不是操作系统的一部分。它们是操作系统之上的软件堆栈的一部分。

你可能有[一个非常小的操作系统](http://en.wikipedia.org/wiki/MINIX)，它上面没有运行太多的软件堆栈。就其本身而言，它不会提供太多的可用性，而是增加可用性的基础。

Android 的软件堆栈建立在 Linux 内核之上，它负责电源管理，充当设备其他硬件部分之间的接口。这是一个链接，可以帮助您了解有关[Android 架构的更多信息](https://developer.android.com/guide/platform/)

# svn - Automating a TortoiseSVN Relocate

> ID：10283726
> 
> 赞同：2
> 
> 时间：2012-04-23T15:39:59.077
> 
> 标签：svn, tortoisesvn

I'm in the process of moving my SVN repository from one server to another. As part of this process, I have a number of client PCs running TortoiseSVN that currently point to the old location which need to be updated for the new path. Not all of these are under my direct control, so I would like to create a small batch script to do the work for me.

As I understand it, SVN allows for a Unix-like implementation of the relocate as shown below.

```
svn switch --relocate From_URL To_URL 
```

I'm not aware of how to perform this action using TortoiseSVN under Windows. The closest I can find uses the `/command:relocate` switch.

```
TortoiseProc.exe /command:relocate /path:File_Path 
```

This is a start, but it still prompts the end user to enter the new server path, which is something I would really like to avoid.

Is there a way to specify the new server name as an argument to `TortoiseProc.exe`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:03:01.537

如果我没记错的话，svn（命令行客户端）包含在 TortoiseSVN 二进制发行版中，所以你应该可以用一个简单的批处理文件来做

```
svn switch --relocate 
```

# c# - I want to test AspNetActiveDirectoryMembershipProvider functionality .Is it possible to test this in my local machine not network

> ID：10283729
> 
> 赞同：3
> 
> 时间：2012-04-23T15:40:08.960
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership

I have developed application in which users will create in active directory using registration. This application will be use in Intranet but I want to test registration page in local machine How to do this in my local machine.You can say I want to create test environment for active directory.

It is working fine when I set aspnetMembershipProvider as default users are created successfully in database

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:57:33.810

我认为你需要看看[AD LDS](http://msdn.microsoft.com/en-us/library/windows/desktop/aa705884%28v=vs.85%29.aspx)。它将允许您设置本地轻量级 AD 实例。有适用于[Windows 7](http://www.microsoft.com/download/en/details.aspx?id=14683)的下载。我自己没有试过这个。

# architecture - clojure 中协议/多方法的环境依赖调度

> ID：10283730
> 
> 赞同：6
> 
> 时间：2012-04-23T15:40:16.570
> 
> 标签：architecture, clojure

我在如何构建我的软件的特定部分时遇到了问题。可以说，我有一个名为`make-temp-dir`（和许多其他）的函数，它根据当前的操作系统执行一些黑魔法。我希望能够将每个操作系统的这些方法的实现放在单独的命名空间中。

首先，我相信协议（如果可能的话）或多方法是解决这个问题的方法。但是，我从未见过将这些与跨越多个命名空间的实现一起使用的示例。而且我无法弄清楚这是如何解决的。

其次，如果我为此使用协议，我将不得不调用类似的方法

```
(make-temp-dir current-os arg-1 arg-2) 
```

不知何故，一直将 os 作为第一个参数传递对我来说看起来不太好。出于语义`make-temp-dir`考虑，我希望根据操作系统做出明智的决定。当然我可以使用一些宏并做类似的事情

```
(doto current-os
  (make-temp-dir arg-1 arg2)) 
```

但这感觉不对。

这应该怎么做？还是我走错路了？任何帮助表示赞赏。

**编辑**：好的，非常感谢@kotarak，我设法得到了一些工作。对于任何偶然发现的人，[https](https://gist.github.com/2477120) ://gist.github.com/2477120 。它工作正常，我想我会去的。谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T15:53:29.060

```
(ns your.utils)

(def current-os)

(defmulti make-temp-dir
  (fn [& _] current-os))

(ns your.utils.mac)

(defmethod make-temp-dir :mac-os-x
  [a b]
  (...))

(ns your.utils.win)

(defmethod make-temp-dir :windows
  [a b]
  (...)) 
```

在您的启动代码中，您必须在`current-os`使用`alter-var-root`任何实用程序函数之前进行初始化。

```
(let [os (find-os)]
  (alter-var-root #'current-os (constantly os))
  (require (case os
             :mac-os-x 'your.utils.mac
             :windows  'your.utils.win))) 
```

希望这能让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:41:50.050

我不能肯定地说，但听起来你最终可能会重新发明 Java 为你提供的轮子。试试[https://github.com/Raynes/fs](https://github.com/Raynes/fs)来方便地包装一些 Java 提供的超出 clojure.java.io ( [http://clojuredocs.org/clojure_core/clojure.java.io](http://clojuredocs.org/clojure_core/clojure.java.io) )基本工具的东西.

如果您的问题超出了特定于操作系统的分支到特定于环境的配置值，您可能还会发现[https://github.com/drakerlabs/milieu很有用。](https://github.com/drakerlabs/milieu)我将这段代码作为我们在 Draker 的专有项目的一部分编写，我们最近刚刚将它作为免费软件发布。我们还没有正式向社区宣布它，但它在 Clojars 中并且可以使用。反馈表示赞赏！推动其创建的概念是开发/测试/登台/生产等意义上的环境，但我看不出它为什么不能用于为不同的操作系统环境配置变量。

# c# - C#: How to compare two dates

> ID：10283732
> 
> 赞同：3
> 
> 时间：2012-04-23T15:40:29.690
> 
> 标签：c#, datetime

I want to compare a date stored in a table in the form `DD/MM/YYYY` with the current date.

I need to know if it is earlier or later than `DateTime.Now` ...

Does someone have an idea to suggest?

Thank you in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:48:51.593

您可以`DateTime.Compare`为此使用：

```
var result = DateTime.Compare(Convert.ToDateTime(TextBox1.Text), DateTime.Today);
string relationship;

if (result < 0)
   relationship = "is earlier than";
else if (result == 0)
   relationship = "is the same time as";         
else
   relationship = "is later than";

Console.WriteLine("{0} {1} {2}", date1, relationship, date2); 
```

有关详细信息，请参阅 MSDN 上的[文档](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:54:44.283

您可以使用以下代码将时间戳解析为 DateTime 对象，然后根据需要进行比较。

```
DateTime date;
DateTime.TryParseExact("12/03/2009", "dd/MM/yyyy", null, DateTimeStyles.None, out date); 
```

在此处查看更多信息[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:54:28.340

这可以通过[DateTime.Compare](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)方法来完成，如下所示：

```
date1 = Convert.ToDateTime(TextBox1.Text)
date2 = DateTime.Today
var result = DateTime.Compare(date1, date2)
string relationship

if (result < 0)
   relationship = "is earlier than";
else if (result == 0)
   relationship = "is the same time as";         
else
   relationship = "is later than";

Console.WriteLine("{0} {1} {2}", date1, relationship, date2); 
```

# ruby-on-rails - How do you grab a key/value pair from an array of hashes in ruby?

> ID：10283733
> 
> 赞同：0
> 
> 时间：2012-04-23T15:40:30.217
> 
> 标签：ruby-on-rails, ruby, arrays, hash

I have an array of hashes (or atleast I think they are hashes) and I need to pull out the ID for each of them. I'm sure ruby has some quick way of doing this ... I just can't figure it out.

I don't want to iterate through the arrays and build a new one.

```
[
  [
    {
      "bio": "I am a tech geek who loves starting up companies. While I was in college, I founded Squeeze My Tees",
      "business_name": "Rounded Development",
      "city": "",
      "created_at": "2012-04-22T18:07:44Z",
      "first_name": "Brian",
      "id": 1,
      "industry": "Entertainment",
      "last_name": "Weinreich",
      "lat": null
    },
    {
      "access_token": null,
      "bio": null,
      "business_name": null,
      "city": null,
      "created_at": "2012-04-23T13:56:35Z",
      "email": "test@jambo.com",
      "first_name": "asdad",
      "id": 2,
      "industry": null,
      "last_name": "ddfs",
      "lat": null,
      "linkedin_id": null,
      "linkedin_url": null,
      "lng": null,
      "position": null,
      "professional_headline": null,
      "state": null,
      "street": null,
      "updated_at": "2012-04-23T13:56:35Z"
    },
    {
      "access_token": null,
      "bio": null,
      "business_name": null,
      "city": null,
      "created_at": "2012-04-23T13:56:39Z",
      "email": "tesasdat@jambo.com",
      "first_name": "fdsd",
      "id": 3,
      "industry": null,
      "last_name": "asdgw",
      "lat": null,
      "linkedin_id": null,
      "linkedin_url": null,
      "lng": null,
      "position": null,
      "professional_headline": null,
      "state": null,
      "street": null,
      "updated_at": "2012-04-23T13:56:39Z"
    },
    {
      "access_token": null,
      "bio": null,
      "business_name": null,
      "city": null,
      "created_at": "2012-04-23T13:56:44Z",
      "email": "asdsad@jambo.com",
      "first_name": "ewtrwef",
      "id": 4,
      "industry": null,
      "last_name": "dfd",
      "lat": null,
      "linkedin_id": null,
      "linkedin_url": null,
      "lng": null,
      "position": null,
      "professional_headline": null,
      "state": null,
      "street": null,
      "updated_at": "2012-04-23T13:56:44Z"
    }
  ]
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:44:37.960

要仅提取 ID，您可以执行以下操作：

```
the_IDs = array_of_hashes.collect { |single_array| single_array["id"] } 
```

显然你可以使用不那么冗长的变量名，它们只是为了说明。但这个想法是，您可以遍历一个数组并收集块返回的任何内容。在这种情况下，您会不断收到返回的 ID，并且`the_IDs`只是收集到的内容的数组。

# html - How to measure browser layout performance

> ID：10283734
> 
> 赞同：3
> 
> 时间：2012-04-23T15:40:34.807
> 
> 标签：html, css, performance, layout

I'm troubleshooting a performance regression in a large webapp. I recently made some changes to remove an IFRAME and put the contents directly into the original DOM, to make performance better. Indeed, initial load time is better, but I've found a strange problem.

It seems that various layout (animation and scrolling) changes are MUCH slower with this iframe removal. I've narrowed it down to know it's not javascript.

I've removed all javascript that was running on timers and events.

I can see the slow performance when simply setting a classname on an element which has a 1 second CSS transition, which changes its style.top and style.left. (It's already absolutely positioned). This element animates to the new location very slowly .. seems like about 5-10 FPS, whereas with the IFRAME it was 40+ FPS.

So -- I'm wondering if there is some way to measure actual browser layout performance. I see this problem across the board on Safari, IE, Firefox and Chrome -- so any of these would be fine to use (though I prefer Firefox because the problem seems to be most defined there).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:42:27.067

一个很好的起点 - [Speed Tracer](https://developers.google.com/web-toolkit/speedtracer/)和[Page Speed](https://developers.google.com/speed/pagespeed/)。他们将向您展示很多有用的信息，这些信息包括您的布局如何影响性能以及您可以采取哪些措施来改进它。尽管 Speed Tracer 是 Chrome 扩展程序，但它的数据也将反映其他浏览器的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:48:16.973

这是对浏览器本身的一个非常有趣的测试：

[迷宫求解器：CSS3 布局性能测试](http://ie.microsoft.com/testdrive/performance/mazesolver/)

> Web 上的性能是多维的。在这个测试中，我们专注于浏览器布局引擎，以练习浏览器对 CSS 2.1 和 CSS 3 布局结构的处理。这些构造用于设置 HTML 样式，而布局引擎是整个 Web 浏览器性能的重要组成部分。

同样，这个测试是针对浏览器本身的，而不是你的代码，如果我理解正确的话，这就是你要找的。

# flash - Prompting user to install Flash player if not installed already?

> ID：10283735
> 
> 赞同：0
> 
> 时间：2012-04-23T15:40:36.960
> 
> 标签：flash, internet-explorer

When a user visits your flash-rich webpage from Internet Explorer, and he/she doesn't have Adobe Flash Player Active X installed, how do you automatically prompt the user to install it by automatically opening the active x web installer file?

Thank You

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:08:28.723

您应该使用行业标准[swfObject](http://code.google.com/p/swfobject/)来嵌入 Flash 电影，您将能够让用户下载 Flash 而无需无缝离开您的网站。

# mongodb - MongoDB 中文档集的版本控制

> ID：10283738
> 
> 赞同：0
> 
> 时间：2012-04-23T15:40:49.067
> 
> 标签：mongodb, database

我知道在 MongoDB 服务器中对单个文档进行版本控制的几种方法。但是，我想添加单个文档的版本控制和整个集合的版本控制。即，如果文档 A 从版本 1 更改为 2，我还想知道 A 何时处于版本 2，文档 B、C、D 等是什么版本。

这里的基本目标是数据来源。假设我对一组文档 D 有一个查询 Q，生成结果 R。我想保存 D+Q=R，所以当 D 变为 D' 因为文档已更改时，我有 D'+Q=R' .

关于在 MongoDB 中执行此操作的最佳策略的任何想法？我可以保留具有所有其他文档版本的单独文档，但是运行查询似乎非常昂贵。我可以使用时间戳而不是版本，这可能没问题。MongoDB中是否有我不知道的这种东西的支持？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:21:28.487

MongoDB 中没有对此类功能的特定支持，您必须在应用程序代码中实现它。听起来您有一个非规范化模式：R 实际上是 Q 的缓存，当 D 更改时您必须使其无效。您可以在更新 D 中的任何文档时同步执行此失效操作，或者您可以安装一些任务队列（例如 RabbitMQ）并在更改 D 时将任务插入其中，并让后台进程从队列中拉出任务。然后后台进程更新 R。具体的实现取决于你需要 R 的一致性。

# file-upload - com.sun.jersey.api.client.UniformInterfaceException (returned a response status of 400)

> ID：10283739
> 
> 赞同：1
> 
> 时间：2012-04-23T15:40:49.990
> 
> 标签：file-upload, jersey, jax-rs

I am trying to set up file upload example using JAX RS. I could set up the project and successfully upload file in a server location. **But i get the following error when file size is more than 10KB (weird!!)**

```
com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:9090/DOAFileUploader/rest/file/upload returned a response status of 400
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:607)
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:507)
at com.sony.doa.rest.client.DOAClient.upload(DOAClient.java:75)
at com.sony.doa.rest.client.DOAMain.main(DOAMain.java:34) 
```

I am new to JAX RS and i'm not sure what exactly the issue is. Do i need to set some parameters client side or server side (like size, timeout etc)?

This is the client side code calling webservice:

```
public void upload() {
    File file = new File(inputFilePath);
    FormDataMultiPart part = new FormDataMultiPart();
    part.bodyPart(new FileDataBodyPart("file", file, MediaType.APPLICATION_OCTET_STREAM_TYPE));
    WebResource resource = Client.create().resource(url);
    String response = resource.type(MediaType.MULTIPART_FORM_DATA_TYPE).post(String.class, part);
    System.out.println(response);
} 
```

This is the server side code:

```
@Path("/file")
public class UploadFileService {

@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
        @FormDataParam("file") InputStream uploadedInputStream,
        @FormDataParam("file") FormDataContentDisposition fileDetail) {

    String uploadedFileLocation = "e://uploaded/"
            + fileDetail.getFileName();

    writeToFile(uploadedInputStream, uploadedFileLocation);

    String output = "File uploaded to : " + uploadedFileLocation;

    return Response.status(200).entity(output).build();

}

private void writeToFile(InputStream uploadedInputStream,
        String uploadedFileLocation) {

    try {
        OutputStream out = new FileOutputStream(new File(
                uploadedFileLocation));
        int read = 0;
        byte[] bytes = new byte[16000];

        out = new FileOutputStream(new File(uploadedFileLocation));
        while ((read = uploadedInputStream.read(bytes)) != -1) {
            out.write(bytes, 0, read);
        }
        out.flush();
        out.close();
    } catch (IOException e) {
        e.printStackTrace();
    } } } 
```

Please let me know what settings i have to change for file sizes greater than 10KB?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:04:04.633

我在泽西岛遇到了同样的问题。我已经激活了球衣跟踪，但没有任何帮助。

我已经通过 apache Library 更改了库，并且我看到了链接到存储库以获取 tomcat 临时文件的问题。存储库不存在。对于 10k 以下的文件，未使用存储库。

因此，在创建存储库之后，我使用了 jersey 库并且一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:27:04.427

我在 Jersey 上下文中使用 org.apache.commons.fileupload.servlet.ServletFileUpload，它工作正常。是的，它设置了最大文件大小，抱歉我之前错过了这个。

这是我使用的代码片段（这是一个多部分表单，因此文件中还有其他字段）

```
private LibraryUpload parseLibraryUpload(HttpServletRequest request) {
LibraryUpload libraryUpload;

File libraryZip = null;
String name = null;
String version = null;

ServletFileUpload upload = new ServletFileUpload();
upload.setFileSizeMax(MAX_FILE_SIZE);

FileItemIterator iter;
try {
  iter = upload.getItemIterator(request);
while (iter.hasNext()) {
....
if (item.isFormField()) {
....
}else{
BufferedInputStream buffer = new BufferedInputStream(stream);
      buffer.mark(MAX_FILE_SIZE);
      libraryZip = File.createTempFile("fromUpload", null);
      IOUtils.copy(buffer, new FileOutputStream(libraryZip));
...
} 
```

# lua - Collision of a drawed line and objects(Corona SDK)

> ID：10283740
> 
> 赞同：0
> 
> 时间：2012-04-23T15:40:57.727
> 
> 标签：lua, collision, coronasdk

For example i have a line that i can draw with a finger and i have a rectangle. i want my line to end drawing up when it collisions with the rectangle. How can i do it? For ex my function of a line:

```
local line = function()
if(e.phase == "began") then
--code for line
elseif(e.phase == "moved") then
--code for line to draw
elseif(e.phase == "ended") then
--code for line to stop draw
end 
```

i guess that i can do that with collision smith like this

```
local function onCollision( event )
        if ( event.phase == "began" ) then

                if event.object1.myName == "top" and event.object2.myName == "line" then
                        line("ended")

                end

        end
end

    Runtime:addEventListener("collision", onCollision); 
```

but it doesn't work...any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:21:22.120

我需要查看更多您的代码，特别是您如何创建行（或行，如果您经常创建/销毁它们），以给出您可能希望的答案。但是，如果我这样做，我可能会在每个手指移动时绘制/重画线（不添加物理体）并根据手指位置手动检查与矩形的交点。即，类似于以下内容：

```
local line = function()
    ...
    elseif(e.phase == "moved") then
        local cb = rect.contentBounds
        if event.x > cb.xMin and event.x < cb.xMax and event.y > cb.yMin and event.y < cb.yMax) then
            line("ended")
        end
    else
    ....
end 
```

碰撞的问题在于，如果您正在创建和重新创建线条并且它们恰好相交，则由于它们的生命周期短（以及它们实际上并没有移动的事实），您可能不会收到事件。如果你真的想使用碰撞，我会在触摸开始（一个圆圈）时创建一个不可见的代理对象，并在移动时从起点画一条线到它。然后我会在代理对象上使用触摸关节并检测其上的碰撞。这可能比它的价值更麻烦。

# javascript - Missing ) after argument list, even though I've added a ) where indicated

> ID：10283741
> 
> 赞同：1
> 
> 时间：2012-04-23T15:40:58.363
> 
> 标签：javascript, html5-canvas, dom-events

I'm getting this console error on the following function when viewing my web page in the browser.

```
function drawStartButton(){
            image.onload = function(){
                context.drawImage(image, 260.5, 60);
                image.on("mousdown", function(){
                    drawLevelOneElements();
                }
            });
            image.src = "StartButton.png";
            /** Now I need to add an event listener to the area of the canvas on 
                on which the button image is displayed, in order to 'listen' for 
                a click on the button */
            var boundingBox = myGameCanvas.getBoundingClientRect();
            //var mouseX = (mouse_event.clientX-boundingBox.left) * (myGameCanvas.width/boundingBox.width);
            //var mouseY = (mouse_event.clientY-boundingBox.top) * (myGameCanvas.height/boundingBox.height);
            boundingBox.onmousemove = function(e){
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;
                var pixels = context.getImageData(mouseX, mouseY, 1, 1);
            }

            /** There maybe more than one pixel at this location so use a loop
                to test whether any of the pixels have an alpha value greater than
                0\. With pixel data, 3 is alpha, so check data[3] and every fourth
                element in data after that. */
            //for (var i=3; i<pixels.data.length; i+=4;){
                /** If a non- zero alpha is found, stop and return "true"- the click
                    was on a part of the canvas that has colour on it. */
            //  if(pixels.data[i]!=0) return true;
            //}

            /** If the function gets here, then the mouse click wasn't on a painted
                part of the canvas. */
            //return false;
            /**myGameCanvas.getElementById("StartButton").onClick = function(e){
                drawLevelOneElements();
            } */    

        } 
```

The error occurs at the end of the function that starts on the second line. Initially, I had that line just as simply `};` but after getting this error, I changed it to `});`

However, when I reload the page, the canvas is still blank, and the console is complaining about the same error, even though I've inserted a `)` where it indicated.

I had a look on the at some of the suggested topics for this error, but none of them seemed to indicate what I need to do to make the functions display what they're meant to on the canvas. Anyone have any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:44:26.863

```
image.onload = function(){
                context.drawImage(image, 260.5, 60);
                image.on("mousdown", function(){
                    drawLevelOneElements();
                }
            }); 
```

应该

```
image.onload = function(){
                context.drawImage(image, 260.5, 60);
                image.on("mousdown", function(){
                    drawLevelOneElements();
                })
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:46:25.910

```
image.onload = function(){
    context.drawImage(image, 260.5, 60);
    image.on("mousdown", function(){
        drawLevelOneElements();
    }
}); 
```

需要是：

```
image.onload = function(){
    context.drawImage(image, 260.5, 60);
    image.on("mousdown", function(){
        drawLevelOneElements();
    });
}; 
```

注意最后`)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:44:18.300

改变这个：

```
image.on("mousdown", function(){
                    drawLevelOneElements();
                } 
```

至

```
image.on("mousdown", function(){
                    drawLevelOneElements();
                }); 
```

# eclipse - Debugging servlets from Eclipse

> ID：10283743
> 
> 赞同：1
> 
> 时间：2012-04-23T15:41:14.543
> 
> 标签：eclipse, debugging, jakarta-ee, servlets, jboss7.x

In Eclipse I can select a servlet from a web application, and choose "Run As -> Run on Server" from the context menu. One minor problem is that a browser is opened with a wrong url. For example, I have written a servlet similar to:

```
package mypackage;

@WebServlet("/append")
public class AppendTest extends HttpServlet {
@Override public void doGet(HttpServletRequest request, HttpServletResponse response) ... 
...
} 
```

then I can test it in a browser with a URL similar to: [http://127.0.0.1:8080/mywebapp/append](http://127.0.0.1:8080/mywebapp/append)

But when I choose to run the servlet as explained above, the browser is directed to:

[http://127.0.0.1:8080/mywebapp/servlet/mypackage/AppendTest](http://127.0.0.1:8080/mywebapp/servlet/mypackage/AppendTest)

Although this is a minor problem for testing the application, in fact this issue does not let me debug it, since when I select "Debug As -> Debug on Server", the same problem happens, and the debugger stops after the 404 http status answer (if I correct the URL after the 404 status, the debugger is not active anymore).

The servlet container I am using is JBoss.

Thanks for any help.

**UPDATE:**

I was not able to debug since the server was not correctly configured in Eclipse (configured as managed externally instead of by Eclipse, thanks for the hint @CarlosGavidia).

This apparently solves the biggest problem. If someone knows how to make Eclipse to open the right URL of the servlet at once instead of myself annoyingly correcting the url every time I run/debug it I will be thankful.

I am starting to think that this is an Eclipse bug. If I explicitly declare the URL pattern in the web.xml then eclipse will use the correct url. That means that the value of the `WebServlet` annotation indicating that URL when writing the servlet class is just ignored by eclipse when running/debugging the application :(

# jpa-2.0 - JPA generating an invalid column

> ID：10283750
> 
> 赞同：2
> 
> 时间：2012-04-23T15:41:37.490
> 
> 标签：jpa-2.0, generated-code

Helo there.

I am attempting to a execute a many-to-many get all query. To be clear, I am attepmting to get a collection within a collection to be pulled back. Ie, we will get a result set, but in that result set, there will be a collection of all objects linked to it via a foreign key. Now, to do this, I have a collection which I annotate thusly...

```
@ManyToMany
@JoinTable(name="QUICK_LAUNCH_DISTLIST",
                joinColumns=@JoinColumn(name="QUICK_LAUNCH_ID"),
                inverseJoinColumns=@JoinColumn(name="LIST_ID"))
private Collection<QuickLaunchDistlist> distributionLists; 
```

Which seems to be just about text book... I call a named query which looks like this...

```
@NamedQuery(name="getQuickLaunch", query = "SELECT q FROM QuickLaunch q") 
```

Which is executed like so...

```
qlList = emf.createNamedQuery("getQuickLaunch").getResultList(); 
```

Every time I make this call, I get back the expected data in the first collection. But none of the collections seem to populate with it. To find out why, I looked at the sql being generated by the call... This is what I find...

I get this exception...

```
This is a FFDC log generated for the Default Resource Adapter from  source:com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.executeQuery
The exception caught:java.sql.SQLSyntaxErrorException: ORA-00904: "T1"."QL_DISTLIST_ID": invalid identifier

SQL Error Code is 904 SQL State is :42000 
```

Along with this query...

```
SELECT t1.QL_DISTLIST_ID, t2.LIST_ID, t2.CREATE_DATE, t2.CREATE_USERID, t2.description, t2.flag, t2.MOD_DATE, t2.MOD_USERID, t2.ORGANIZATION_ID, t2.owner, t2.STATUS_ID, t1.MESSAGE_TYPE_ID, t1.MOD_DATE, t1.MOD_USERID, t1.QUICK_LAUNCH_ID FROM EPCD13.QUICK_LAUNCH_DISTLIST t0, EPCD13.QUICK_LAUNCH_DISTLIST t1, EPCD13.DISTRIBUTION_LIST t2 WHERE t0.QUICK_LAUNCH_ID = ? AND t0.LIST_ID = t1.QL_DISTLIST_ID AND t1.LIST_ID = t2.LIST_ID(+) 
```

If you look at the first column it request's to pull back you will notice that it selects t1.QL_DISTLIST_ID... Problem is, I have no such named column any where in my db!?!?!? Why on earth is that column being called? How does JPA generate the queries that it calls? If I knew that, I might be a little closer to figuring out what went wrong here or what I did wrong. Any help would be greatly appreciated.

# ios - 自定义警报视图 - Xcode

> ID：10283752
> 
> 赞同：1
> 
> 时间：2012-04-23T15:41:43.327
> 
> 标签：ios, xcode, background, uialertview, alert

我有一个显示警报视图的应用程序，但我想自定义警报视图，以便我可以将图像附加到它。这类似于 Temple Run 显示其警报视图的方式。我尝试添加背景颜色，但它使警报视图本身成为颜色。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:50:44.320

如果要将图像添加到警报视图，可以将图像视图添加为子视图。要展开警报视图，请将消息设置为包含一些 \n 的文本

您无法更改警报的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T10:37:49.883

在 IOS 7 或更高版本中，使用代码

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200, 282)];
UIImage *wonImage = [UIImage imageNamed:@"iberrys.png"];
imageView.contentMode=UIViewContentModeCenter;
[imageView setImage:wonImage];
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Arirang List"
                                                     message:@"phiên bản: 1.0\n website: www.iberrys.com\n email: quangminh@berrys.com\nmobile: 0918 956 456"
                                                    delegate:self
                                           cancelButtonTitle:@"Đồng ý"
                                           otherButtonTitles: nil];
//check if os version is 7 or above
if (floor(NSFoundationVersionNumber) > NSFoundationVersionNumber_iOS_6_1) {
    [alertView setValue:imageView forKey:@"accessoryView"];
}else{
    [alertView addSubview:imageView];
}
 [alertView show]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T20:38:49.167

自定义图片Alertbox替换Apple默认蓝色alertBox
[这里是截图1][1]
[这里是截图2][2]：www.8land.org/download/s1.png

一些用法
# 就像苹果默认警报一样，但使用您自己的图像。看起来更好，对您的用户来说并不可怕。
# 在屏幕上的任何位置创建您自己的自定义背景图像，任意大小。还添加了淡出动画效果。
#. 提示用户对您的应用进行评分。
#. 就像应用内购买一样。
#. 将其用作广告，提示用户下载您的另一个应用程序或其他人。
#. 从用户那里获得反馈。
#. 购买硬币或您提供的任何虚拟物品。
#. 如果你让你的形象像一个横幅，它会像一个横幅。
#. 它可以像 iPad 中的 popoverViewController 一样操作。您可能需要稍微修改代码。

从 github 获取代码，它是 MIT 下的开源代码。
https://github.com/ajaxgeek/Alertbox

下载它并尝试一下，然后给我你的想法。有可能改进这段代码片段吗？

# c - 打开和关闭 GLFW 窗口后无法获取控制台输入

> ID：10283753
> 
> 赞同：2
> 
> 时间：2012-04-23T15:41:44.247
> 
> 标签：c, opengl, console, glfw

我正在使用 GLFW 开发一个应用程序，用户可以在控制台中输入一些信息，程序对信息进行一些处理，然后打开一个 opengl 窗口（使用 GLFW）来显示结果。然后用户可以关闭窗口，并返回到主菜单并输入更多信息（如果他们愿意）。

目前我遇到的问题是，一旦关闭 GLFW/OpenGL 窗口，控制台就不再接受来自 scanf() 的任何输入。我相当肯定我正在正确关闭 GLFW，所以我不确定问题是什么。

我正在使用的代码如下：

主要.c：

```
#include <stdio.h>
#include <stdlib.h>
#include "glfw.h"
#include "pantograph.h"
int main(int argc, char** argv)
{
    printf("program start");
    int a = 0;
    scanf("%i",&a); //this works
    printf("%c",a);
    p_open_window(1000, 500, 0, "hi there");
    int i = 0;
    for(i=0;i<1000;i++)
    {
        p_begin_render();
        glBegin(GL_POINTS);
            glVertex2i(i,i/2);
        glEnd();
        scanf("%i",&a);
        p_end_render();
    }
    p_close_window();
    scanf("%i",&a); //this does not work
    printf("%i",a);
    return 0;
} 
```

受电弓.h：

```
int p_open_window(int width, int height, int fullscreen, const char* title)
{
    glfwInit();
    glfwDisable(GLFW_AUTO_POLL_EVENTS);
    if(fullscreen)
    {
        glfwOpenWindow(width,height,8,8,8,8,0,0,GLFW_FULLSCREEN);
    }else{
        glfwOpenWindowHint(GLFW_WINDOW_NO_RESIZE, GL_TRUE);
        glfwOpenWindow(width,height,8,8,8,8,0,0,GLFW_WINDOW);       
    }

    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, width, height, 0, 0, 1);
    glMatrixMode(GL_MODELVIEW);
    glDisable(GL_DEPTH_TEST);

    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    return 1;
}
void p_begin_render()
{
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor4f(1.0, 1.0, 1.0, 1.0);
    glLoadIdentity();
}
void p_end_render()
{
    glfwSwapBuffers();
}
void p_close_window()
{
    glfwCloseWindow();
    glfwTerminate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:21:18.927

我对你的程序流程有点困惑。您说“用户可以关闭窗口并返回主菜单”。但是程序如何退出 (i<1000) 循环呢？如果用户只是关闭窗口，它似乎仍在执行 for 循环（特别是因为循环内的 scanf ）。

您是否使用调试器来查看您的程序在哪一点被捕获？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:03:02.720

感谢#glfw 的人们，我设法找到了一个有点骇人听闻的解决方案......

如果在关闭 glfw 窗口后直接“刷新”输入缓冲区，scanf 将再次开始工作。我不完全确定为什么，但它现在似乎有效，所以我很满意。

我用来做的代码如下（关闭窗口后）：

```
int ch;
while ((ch = getchar()) != '\n' && ch != EOF); 
```

在此之后，scanf 再次开始工作。

# jquery - jQuery 表单插件和 jQuery 验证

> ID：10283754
> 
> 赞同：0
> 
> 时间：2012-04-23T15:41:45.890
> 
> 标签：jquery, ajax, validation

尝试同时使用[jQuery Form Plugin](http://jquery.malsup.com/form)和[jQuery Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，但即使必填字段为空，表单也会使用 AJAX 提交。这是我的代码：

```
// prepare the form when the DOM is ready 
$(document).ready(function() { 

     // bind form using ajaxForm 
     $('#contact-form').ajaxForm({ 
    // target identifies the element(s) to update with the server response 
    target: '#ajax-success', 

    // success identifies the function to invoke when the server response 
    // has been received; here we apply a fade-in effect to the new content 
    success: function() { 
        $('#contact-form-wrapper').hide();
        $('#ajax-success').fadeIn('slow'); 
    } 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:44:38.267

[验证插件](http://docs.jquery.com/Plugins/Validation/validate#options)的文档显示了如何执行此操作。

看`submitHandler`功能。

# javascript - 禁用 HTML 页面上所有表单的提交功能

> ID：10283755
> 
> 赞同：15
> 
> 时间：2012-04-23T15:41:47.823
> 
> 标签：javascript, jquery, forms

使用[.NET Windows Forms`WebBrowser`控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)来显示页面的预览，我使用[此 SO 发布](https://stackoverflow.com/questions/4870577/html5-how-do-i-disable-all-links-after-any-one-of-them-are-clicked)中描述的以下方法来禁用页面上的所有链接：

```
$(function() {
    $('a').click(function() {
        $(this).attr('href', 'javascript:void(0);');
    });
}); 
```

由于我要显示为预览的 HTML 页面也包含 HTML 表单，因此我正在寻找一种类似的方法来禁用所有表单提交功能。

我试过了：

```
$(function() {
    $('form').attr('onsubmit', 'return false');
}); 
```

但对于如下形式，这似乎不起作用（阅读：“仍然加载页面”）：

```
<form id="myform" name="myform" onsubmit="return search()" action=""> 
```

我在页面上。

**所以我的问题是：**

在 HTML 页面上禁用所有表单提交功能的最佳方法是什么，无论它是 GET 还是 POST 表单？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-23T15:45:01.837

你应该能够做到：

```
$('form').submit(false); 
```

从[jQuery 文档](http://api.jquery.com/bind/)：

> 在 jQuery 1.4.3 中，您现在可以传入 false 来代替事件处理程序。这将绑定一个事件处理程序，相当于： function(){ return false; }。稍后可以通过调用：.unbind( eventName, false ) 删除此函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-29T10:16:57.737

用这个：

```
<form id="myform" name="myform" onSubmit="search();return false;" action=""> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T15:46:50.030

使用 jquery 我会这样做

```
$('form').submit(function(event){event.preventDefault();}); 
```

使用 jquery，您通常不使用`.attr(...)`绑定事件侦听器，而是应该使用辅助方法，或者`.bind(...)`

这里是完整的参考：[jQuery 事件](http://api.jquery.com/category/events/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T15:49:21.740

然后你可以使用组合..

```
$('form :submit').attr("disabled", "disabled"); 
```

和

```
$('form').unbind('submit'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-23T15:52:43.753

您可以禁用提交按钮

```
$('form :submit').attr("disabled", "disabled"); 
```

或者只是让提交事件什么都不做

```
$('form').submit(function(e){ e.preventDefault(); }); 
```

这取决于您到底想达到什么目标。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-23T16:06:41.467

## 如果您想阻止表单提交：

我认为防止`<form>`将任何东西发送到任何地方的最佳方法是：

```
$('form').submit( function(e){ 
    e.preventDefault();
}); 
```

这会禁用页面上的所有表单，无需为每个表单单独执行。

## JSFiddle 演示启用/禁用表单提交：

[http://jsfiddle.net/cDLsw/6/](http://jsfiddle.net/cDLsw/6/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-23T15:50:09.073

使用事件委托来防止提交正文中的*所有表单。*

```
$("body").on("submit", "form", function( event ){
    event.preventDefault();
}); 
```

顺便说一句，您的 Javascript 代码禁用页面上的所有链接**并不是一个好方法**。你可以使用类似的东西

```
// use "bind" instead of "on" if you use a jQuery version prior to 1.7
$("a").on( "click", function( ev ) {
    ev.preventDefault();
});

// or use event delegation
$("body").on( "click", "a", function( ev ) {
    ev.preventDefault();
});

// the power of event delegation in action:
// disable BOTH links and form with one event handler
$("body").on( "click", "a, form", function( ev ) {
    ev.preventDefault();
}); 
```

这是一个工作演示[http://jsfiddle.net/pomeh/TUGAa/](http://jsfiddle.net/pomeh/TUGAa/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-14T05:29:27.497

```
<style>[busy]{pointer-events:none;}</style>
<form>....</form>
<form>....</form>
<form>....</form>
<script>
function disableIt(node){
    node.setAttribute('busy','');
    // later re-enable with node.removeAttribute('busy')
}
Array.from(document.querySelectorAll('form')).forEach(disableIt);
// NOTE other functions can return on form.hasAttribute('busy') if needed
</script> 
```

我的另一个答案有一个更具体的一次性示例：[https ://stackoverflow.com/a/64831209/965666](https://stackoverflow.com/a/64831209/965666)

# jquery - JQuery选择最近的父a：link

> ID：10283756
> 
> 赞同：0
> 
> 时间：2012-04-23T15:41:53.250
> 
> 标签：jquery, parent-child, closest, toggleclass

我正在尝试`a:link`根据悬停的子子菜单在导航菜单中为最近的父级切换 CSS 类。我可以让它为最近的父`<li>`标签工作，但不是`a:link`我希望发生此事件的内部。

的HTML：

```
<ul class="menu">
  <li><a href="#">First Parent</a>
     <ul class="sub-menu">
          <li><a href="#">First Child</a></li>
          <li><a href="#">Second Child</a></li>
     </ul></li>
  <li><a href="#">Second Parent</a>
     <ul class="sub-menu">
          <li><a href="#">First Child</a></li>
          <li><a href="#">Second Child</a></li>
     </ul></li>
</ul> 
```

因此，我编写的用于选择`<li>`正在工作的父级的函数是：

```
$("ul.sub-menu").hover(function(){
        $(this).closest("li").toggleClass("parenthovered");
}); 
```

但是我怎样才能让这个类`a:link`为父级切换`ul.menu li`？就像是：

```
$("ul.sub-menu").hover(function(){
        $(this).closest("li a").toggleClass("parenthovered");
}); 
```

但这当然行不通，我只是不确定我需要更改什么语法。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:45:26.780

您可以随时使用：

```
 $("ul.sub-menu").hover(function(){
            $("a", $(this).closest("li")).toggleClass("parenthovered");
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:45:41.693

```
$("ul.sub-menu").hover(function(){
    $(this).siblings('a').toggleClass("parenthovered");
}); 
```

[演示](http://jsfiddle.net/2KhnX/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:45:48.853

您可以简单地`find`嵌套`<a>`在`<li>`您已经拥有的内部。

```
$("ul.sub-menu").hover(function() {
  $(this).closest("li").find("a").toggleClass("parenthovered");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:47:32.493

使用 find 方法获取标签内的 a 标签。

```
$("ul.sub-menu").hover(function(){
        $(this).closest("li").find("a").toggleClass("parenthovered");
}); 
```

# 64-bit - 无法在 Win 7 Prof 上以 64 位模式运行 CMD

> ID：10283757
> 
> 赞同：9
> 
> 时间：2012-04-23T15:41:54.433
> 
> 标签：64-bit, 32-bit, cmd

老实说，我已经完成了我的功课，并尝试了我能想到的一切，但似乎每次打开 CMD 时，我都会得到 32 位版本，无论我从哪里打开它。我努力了：

1.  Windows 启动 orb -> CMD -> 回车
2.  键入“C:\Windows\System32\cmd.exe”
3.  键入“C:\Windows\SysWOW64\cmd.exe”

在每种情况下，我都以管理员权限运行它，并且我关闭了 UAC。我可以说它始终是 32 位，因为在任何情况下我都无法运行 nbstat.exe（我希望从 32 位命令行获得）。

我已经进入 Process Explorer 并且两个版本都是同一 csrss.exe 实例下的节点，这对我来说感觉不对。

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T16:09:06.410

查看进程是否启动 64 位或 32 位的最简单方法是转到任务管理器的进程选项卡，32 位 CMD 将显示为`cmd.exe *32`.

启动 64 位 CMD 的一种方法是使用“我的电脑”并双击`C:\Windows\System32\cmd.exe`.

启动 32 位 CMD 的一种方法是执行相同但双击`C:\Windows\SysWOW64\cmd.exe`。

有点奇怪的观察；似乎如果您从 32 位启动 64 位 CMD，它也会以 32 位启动。这可能就是您一直看到 32 位版本出现的原因。Explorer 是一个 64 位进程，可以在 64 位模式下启动 CMD。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-05T11:57:26.087

通过 Windows 路径重定向的魔力，Windows 生成的命令提示符版本与启动过程的位数相匹配。因此，从 32 位程序启动的命令提示符将是 32 位命令提示符，而从 64 位应用程序启动的命令提示符将是 64 位命令提示符 - [Microsoft Technet](https://social.technet.microsoft.com/wiki/contents/articles/26681.open-64-bit-command-prompt-in-32-bit-command-prompt-to-execute-64-bit-command-prompt-through-sccm.aspx)。

[technet 文章](https://social.technet.microsoft.com/wiki/contents/articles/26681.open-64-bit-command-prompt-in-32-bit-command-prompt-to-execute-64-bit-command-prompt-through-sccm.aspx)建议创建一个指向 64 位版本的命令提示符可执行文件的符号链接，以阻止重定向。

阅读评论表明[存在一种更简单的方法](https://www.samlogic.net/articles/sysnative-folder-64-bit-windows.htm)（不是 Win XP），您可以使用虚拟文件夹 C:\Windows\Sysnative 来获取系统工具的本机版本。

因此，要始终在 64 位窗口上获得 64 位命令提示符，请执行：

```
C:\Windows\sysnative\cmd.exe 
```

# android - 如何将 ImageButton 放置在 x、y 位置？

> ID：10283760
> 
> 赞同：0
> 
> 时间：2012-04-23T15:42:04.993
> 
> 标签：android

我想将 ImageButton 放置在我的视图的 x、y 位置。问题是 Android 在图像周围添加了填充。因为我不知道填充的确切大小，所以我无法将图像按钮放置在确切的位置。所以，我想删除填充。如何以编程方式删除图像周围的填充？button.setPadding(0, 0, 0, 0) 使按钮宽度比位图更短，高度更长。button.getLayoutParams().width 给出负值。到目前为止我尝试的是这样的。

```
protected class MyLayout extends RelativeLayout {
    Bitmap img;
    ImageButton button;

    public MyLayout(Context context) {
        button = new ImageButton(context);
        img = BitmapFactory.decodeResource(getResources(), R.drawable.img); 
        button.setImageBitmap(img);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        button.setLayoutParams(params);
        params.setMargins(x, y, 0, 0);
        button.setBackgroundDrawable(null);
        addView(button, params);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:15:24.327

**编辑**

用这个...

```
 MarginLayoutParams marginParams = new MarginLayoutParams(image.getLayoutParams());  
     int left = someValue;
     int top = someValue;
     marginParams.setMargins(left, top, 0, 0);
     RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(marginParams);
     image.setLayoutParams(layoutParams); 
```

# vb.net - 将图像存储在sql server中

> ID：10283762
> 
> 赞同：0
> 
> 时间：2012-04-23T15:42:11.490
> 
> 标签：vb.net, sql-server-2005

这是我的代码：

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Dim myfilelocation As String = "C:\myPictures\myimage.png"
        Dim conn As New SqlConnection("Data Source=MUSTAFA\MUSTAFA;Initial Catalog=Tijaabo;User ID=sa;Password=123")
        Dim cmd As New SqlCommand("insert into customers(CustomerID,fname) Values('" & CustomerIDTextBox.Text & "','" & FnameTextBox.Text & "')", conn)

        Dim cmd1 As New SqlCommand("update customers set photo = @picturebox where CustomerID=" + CustomerIDTextBox.Text, conn)

Dim param As New SqlParameter("@picturebox", SqlDbType.VarBinary) 

        Dim ImageData As Byte() = IO.File.ReadAllBytes(myfilelocation)
        param.Value = ImageData
        cmd.Parameters.Add(param)

        cmd.Parameters.AddWithValue("@CustomerID", 3)
        Try
            conn.Open()
            cmd.ExecuteNonQuery()
        Catch ex As Exception
            MessageBox.Show(ex.Message)
        Finally
            conn.Close()
        End Try

    End Sub 
```

## -------------------------------------------------- --------------------------------------

以下是我的问题：

1.  由于应用程序存储在数据库中，我怎样才能将该代码检索到 vb.net 中，因为我在数据库中看不到它？

2.  您可以看到图像正在从我的机器作为本地获取其路径位置，因此我想将它放在工作组中的其他计算机能够获取图像的地方，或者如何告诉其他计算机将图像存储在我的机器中并检索从这里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:53:23.890

我认为您的目标是将图像存储在数据库中，因此无需将其存储在网络中或使您的计算机可以访问。

图片不在数据库中，因为您没有运行该`cmd1`命令。

# java - 猜谜游戏java代码错误

> ID：10283763
> 
> 赞同：0
> 
> 时间：2012-04-23T15:42:15.077
> 
> 标签：java

好的，所以这应该是完整代码的一部分，但要点是，用户猜测猜数游戏的答案，并且用户猜对了：

```
if (guess==num){
    System.out.println("You Win!");
    System.out.println("Play Again?? Y/N");

    String play=scan.nextLine();

    if(play.equalsIgnoreCase("y")){
        Game();
    }

    if(play.equalsIgnoreCase("n")){
        System.exit(1);
    } else {
        invalid(); //when playing again, it says you entered an invalid choice which i do not want.

        play=scan.nextLine();

        if(play.equalsIgnoreCase("y")){
            Game();
        }
    }
} 
```

输出是：

...................................................

14

你赢了！

再玩一遍？？是/否

您输入了一个无效的选项，请重新输入 Y/N <<===== 问题出在这里............ ……………………………………………………………………………………………………………………………………

我想要的是用户再次响应播放的输入？问题，但我不明白导致我打印出来的代码的哪一部分您输入了无效的选择，有人可以帮忙吗？可悲的是，我看不到这个问题。我仍然需要无效方法，因为我想告诉用户，当他们对 y/n 问题输入无效答案时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:46:02.430

选择是后，您的代码仍然可以输入无效部分。您需要使用**else if**语句

```
if(play.equalsIgnoreCase("y")){
        Game();
}

else if(play.equalsIgnoreCase("n")){
    System.exit(1);
}

else{
   //...
} 
```

您是否使用带调试功能的编程环境？使用您的原始代码，我建议在行上设置一个断点`System.out.println("You Win!");`，然后逐行观察您的代码所采用的路径。这将帮助您自己了解正在发生的事情。

即使没有调试，您也可以添加更多`System.out`语句来更好地了解程序的流程。

```
String play=scan.nextLine();
System.out.println("My inputted value was " + play);

    if(play.equalsIgnoreCase("y")){
        System.out.println("Beginning new game...");
        Game();
    }

    if(play.equalsIgnoreCase("n")){
            System.out.println("Exiting game...");
            System.exit(1);
        }

    else{ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:46:41.803

```
 if(play.equalsIgnoreCase("y")){
        Game();
    } 
```

即使用户按下 Y，它也会进入下一个 if/else

```
 if(play.equalsIgnoreCase("n")){
            System.exit(1);
    } else {

        invalid(); //when playing again, it says you entered an invalid choice which i do not want.

            play=scan.nextLine();

            if(play.equalsIgnoreCase("y")){
                Game();
            }
        }

    } 
```

既然 play 是 Y，它正在调用

```
invalid(); 
```

# json - 如何将外部远程数据库复制到本地数据库？（沙发数据库/MongoDB）

> ID：10283766
> 
> 赞同：1
> 
> 时间：2012-04-23T15:42:23.233
> 
> 标签：json, mongodb, couchdb, database-replication, database-mirroring

我想扩展通过[Web 服务接口](http://data.wien.gv.at/katalog/baumkataster.html)可用的远程数据库的数据模型。可以通过 HTTP GET 请求数据，并以 JSON 形式交付（[示例请求](http://data.wien.gv.at/daten/wfs?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien%3aBAUMOGD&srsName=EPSG:4326&outputFormat=json&maxfeatures=5)）。也支持其他格式。

```
// URL of the example request.
http://data.wien.gv.at/daten/wfs?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:BAUMOGD&srsName=EPSG:4326&outputFormat=json&maxfeatures=5 
```

JSON 答案的第一个对象。

```
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
       "id": "BAUMOGD.3390628",
       "geometry": {
          "type": "Point",
          "coordinates": [
             16.352910973544105,
             48.143425569989326
          ]
       },
       "geometry_name": "SHAPE",
       "properties": {
          "BAUMNUMMER": "1022 ",
          "GEBIET": "Strassen",
          "STRASSE": "Jochen-Rindt-Strasse",
          "ART": "Gleditsia triacanthos (Lederhülsenbaum)",
          "PFLANZJAHR": 1995,
          "STAMMUMFANG": 94,
          "KRONENDURCHMESSER": 9,
          "BAUMHOEHE": 11
       }
    },
... 
```

我的想法是在我自己的服务器上扩展数据模型（例如添加一个文本字段），从而以某种方式镜像数据库。我偶然发现了[CouchDB](http://couchdb.apache.org/)及其基于文档的架构，感觉适合处理上述 JSON 对象。现在，我就如何**最初**和**定期**复制外部数据库征求意见。

您认为 CouchDB 是一个不错的选择吗？我也想过[MongoDB](http://www.mongodb.org/)。如果可能的话，我想避免构建一个完整的 Rails 后端来设置复制。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:01:06.473

如果远程数据库是静态的（数据不变），那么它可以工作。您只需要找到一种方法来迭代所有记录。一旦你弄清楚了，剩下的就很简单了：1）查询数据；2) 将响应存储在本地数据库中；3）修改你认为合适的。

如果远程数据发生变化，您会遇到很多麻烦（您必须每隔一段时间以相同的方式重新同步）。我要做的是创建一个只有新字段和对原始数据的引用的本地数据库。也就是说，当您从远程服务请求数据时，您还会查看本地数据库中是否有某些内容，并在处理最终结果之前合并这两者。

# excel - 从 VBA (Excel) 执行内置函数

> ID：10283767
> 
> 赞同：3
> 
> 时间：2012-04-23T15:42:26.540
> 
> 标签：excel, vba, evaluate

我需要能够从 VBA (MS Excel) 执行任何类型的内置函数（例如“sum”或“len”）。

我的限制之一是我不能将单元格范围作为参数传递给这些函数。取而代之的是，我应该能够使用严格的值。

我希望能够使用以下应该返回 3 的表达式 SUM(1, 2)，而以下版本 SUM("A1:A2") 对我不起作用。

我设法开发了一些函数来解析我之前的输入并使其包含一个值列表（例如上面的例子，它使用户输入的“A1：A2”看起来像一个由两个值组成的数字数组）。

那么，谁能给我一个使用接收值列表（不仅仅是单元格范围）的内置函数的示例？

我尝试了以下代码，但由于某种未知原因，我无法使其正常工作（我不断收到 1004 错误，说：无法运行宏“SUM”。此工作簿或所有工作簿中可能不提供该宏宏可能被禁用。）：

```
Application.Run "SUM", 2, 2 
```

一些有助于找到解决此问题的宝贵建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:45:03.300

要使用内置的 Excel 工作表函数，您需要执行以下操作：

```
Application.WorksheetFunction.Sum(2,2) 
```

# javascript - Javascript 对象莫名其妙地绑定到 Window 和 Object

> ID：10283770
> 
> 赞同：1
> 
> 时间：2012-04-23T15:42:36.980
> 
> 标签：javascript, jquery

我有 javascript 对象

```
var Bucket = function(id) {
     this.id = id
     this.items = []
}
Bucket.prototype.add_item = function(item) {
     //some uniquness checking code here
     this.items.push(item);
} 
```

出于某种原因，当我实例化对象并尝试添加项目时，出现错误

```
var bct = new Bucket
bct.add_item(some_item) 
```

`'undefined' is not an object (evaluating 'this.items.push')`

即使将项目添加到存储桶的数组中，也会发生此错误

```
console.log(bct.items)
>> [some_item] 
```

我`console.log(this)`在 add_items 方法中使用，我看到两个条目从同一行记录

```
>Object myjavascript.js:28
>DOMWindow myjavascript.js:28 
```

页面上还包含一些其他库

1.  谷歌分析
2.  jQuery
3.  jQuery的颜色框插件
4.  jQuery 缓动

有什么想法将此对象绑定到 Window 吗？

* * *

# 找到它（编辑）

在页面的其他地方，我正在结合我的对象使用 jquery ajax 调用......它正在绑定它......抱歉没有发布所有相关代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:49:42.363

您说“正在添加该项目”，但这无关紧要，因为根据您的日志记录，您对该方法有两次调用，其中一次是正确的。你需要专注于*不正确*的人。

确保您的浏览器中有一个调试器（例如打开了 Web Inspector 的 Chrome），然后像这样修改您的代码：

```
Bucket.prototype.add_item = function(item) {
     if (this === window) debugger;
     //some uniquness checking code here
     this.items.push(item);
} 
```

当发生错误调用时，这将自动暂停您的代码。然后，查看调用堆栈，找出调用`add_item`函数的不是方法。

# java - JavaME Base64InputStream.decode() 限制为 64k 字符串大小

> ID：10283778
> 
> 赞同：0
> 
> 时间：2012-04-23T15:43:05.013
> 
> 标签：java, blackberry, java-me, base64

如何克服字符串大小限制。

似乎对大小大于 64k 的字符串调用解码失败。

```
 is = con.openInputStream();
        String str = new String(IOUtilities.streamToBytes(is), "UTF-8");
        byte[] theArray = Base64InputStream.decode(str); 
```

我尝试过alerts，包括使用

```
 Base64InputStream bs64 = new Base64InputStream(is); 
```

然后尝试从 bs64 流中获取。

然而，似乎读取大尺寸会导致解码错误。（如果原始方式的大小低于 64k，它不会出错。我花了一整天的时间试图弄清楚这个..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:12:06.633

您可以将字符串解码为较小的块。一次解码 3 个字节或多个 3 个字节的块（1024 会很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T07:24:22.303

尝试将字符串分成块（通过将字符串转换为字节）。对每个块（字节块）进行编码，直到你完成对完整字符串的编码。另一方面。解码每个块，然后组合以获取字符串。

注意：不要合并所有块（字节块）然后尝试解码它，因为我这样做了并且得到了解码错误。

# java - 在 Java 中操作数组列表的部分

> ID：10283779
> 
> 赞同：1
> 
> 时间：2012-04-23T15:43:10.750
> 
> 标签：java, arraylist, resize

我有一个大行和列维度的**W矩阵。**每一行代表特征值（填充双值）。矩阵构造为：

```
 Hashmap<Integer,Arraylist<Double>> W = new Hashmap<Integer,Arraylist<Double>>(); 
```

在进行计算时，我需要获取每一行的某些部分并在矩阵中更新它们。我`subList`在`Arraylist`. 但问题是它只返回列表，但我需要 arraylist。因为我已经实现的许多方法都`<Arraylist>`作为参数。那么对于这种情况有什么解决办法呢？

例子

```
 w1 = [1,3 ,4,6,9,1,34,5,21,5,2,5,1]
 w11 = [1,3,4]
 w11 = w11 +1 = [2,4,5]
 This changes w1 to = [2,4 ,5,6,9,1,34,5,21,5,2,5,1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:45:41.937

> 我在 Arraylist 中寻找 subList 方法。但问题是它只返回列表，但我需要 arraylist

这根本不是问题。事实上，您应该尽可能更改您的代码以使用`List`。

A`List`是一个具体类型的接口，例如`ArrayList`实现。以下是完全有效的：

```
List<String> list = new ArrayList<String>();
list.add("hello");
list.add("world"); 
```

我建议将您更改`W`为：

```
Hashmap<Integer, List<Double>> W = new Hashmap<Integer, List<Double>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:28:05.127

您可以子类`ArrayList`化以提供另一个切片的视图`ArrayList`。像这样：

```
class ArrayListSlice<E> extends ArrayList<E> {
  private ArrayList<E> backing_list;
  private int start_idx;
  private int len;
  ArrayListSlice(ArrayList<E> backing_list, int start_idx, int len) {
    this.backing_list = backing_list;
    this.start_idx = start_idx;
    this.len = len;
  }
  public E get(int index) {
    if (index < 0 || idx >= len) throw new IndexOutOfBoundsException();
    return backing_list.get(start_idx + index);
  }
  ... set, others? ...
} 
```

然后你可以做`w11 = new ArrayListSlice<Double>(w1, 0, 3)`。假设您正确实施，任何操作`w11`都将出现在 中。`w1``set`

您可能需要实现 ArrayList 的大多数方法才能完成这项工作。如果他们只是依赖其他人，有些人可能会工作，但这很难从规范中看出。

# mysql - MySQL中MSSQL IDENTITY列的等价物

> ID：10283780
> 
> 赞同：29
> 
> 时间：2012-04-23T15:43:12.103
> 
> 标签：mysql, sql-server, tsql, identity

`IDENTITY`MySQL 中的 MSSQL 列相当于什么？我将如何在 MySQL 中创建此表？

```
CREATE TABLE Lookups.Gender
(
    GenderID   INT         IDENTITY(1,1) NOT NULL,
    GenderName VARCHAR(32) NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-23T15:46:10.357

```
CREATE TABLE Lookups.Gender
(
    GenderID   INT         NOT NULL AUTO_INCREMENT,
    GenderName VARCHAR(32) NOT NULL
); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-21T00:07:47.013

```
CREATE TABLE `Persons` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `LastName` varchar(255) NOT NULL,
  `FirstName` varchar(255) DEFAULT NULL,
  `Address` varchar(255) DEFAULT NULL,
  `City` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=100 DEFAULT CHARSET=latin1; 
```

上面的示例使用`AUTO_INCREMENT`语法。您可以指定特定于表的起始偏移量。

但是，必须全局设置*Increment 。*

**`SET @@auto_increment_increment=10;`**

您还可以为偏移量设置全局默认值，如下所示：

**`SET @@auto_increment_offset=5;`**

要查看当前值，请键入**`SHOW VARIABLES LIKE 'auto_inc%';`**

# android - Android R 无法解决的问题

> ID：10283781
> 
> 赞同：2
> 
> 时间：2012-04-23T15:43:12.607
> 
> 标签：android

我刚刚在eclipse中处理我的android项目，突然出现了这个错误，我的清单文件与我的应用程序的名称匹配等等......！

我注意到的是，自动生成的 Java 文件从 gen 文件夹中丢失，现在它完全是空的。

最初我必须创建一个 default.properties 文件，因为没有一个文件，并且它工作正常，直到我尝试将一个按钮添加到我的一个 xml 文件中。也尝试清理项目，但这也没有解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:50:07.427

此错误通常是由于您的资源之一有错误而引起的。检查以确保 xml 资源文件或可绘制目录中没有错误。在您看到的错误列表中，您应该查看最顶部的错误，看看您是否可以解决此问题。往往会发生的是，您的资源文件之一中的错误导致 R 文件的生成失败。一旦 R 文件无法生成，您将看到大量错误，但它们都是由一个错误引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:01:57.760

从项目名称 -> 属性 -> Java 构建路径 -> 源中删除 gen 文件夹。删除后您将收到一条错误消息。现在以相同的方式再次添加 gen 文件夹。您现在可以看到 R 类。如果问题仍然存在，则尝试同时删除 src 和 gen；再次添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:00:48.043

在 Eclipse 中使用“Project”->“Clean”重新生成 R 文件并修复其他 android 问题。...有时这很有帮助！;D

# jquery-mobile - iphone上的jquery cdn

> ID：10283782
> 
> 赞同：0
> 
> 时间：2012-04-23T15:43:16.243
> 
> 标签：jquery-mobile

出于某种奇怪的原因，当我在 chrome 上加载我的 web 应用程序时，jquery mobile 完美无缺，但是当我在我的 iphone 上尝试它时，它永远不会正确呈现。该页面只是崩溃，看起来非常糟糕。我决定使用cdn，因为有人告诉我它更快。

```
<!-- the three things that jQuery Mobile needs to work -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

我直接从 jquery 站点复制了上面的代码片段。关于为什么会出现不同行为的任何建议？

# c# - Facebook Chat API - 使用电子邮件登录

> ID：10283784
> 
> 赞同：0
> 
> 时间：2012-04-23T15:43:21.407
> 
> 标签：c#, .net, facebook, login

我正在创建一个 Facebook 聊天客户端。我已经通过 agsXMPP 库让它工作了，但是我必须使用用户 ID (user@chat.facebook.com) 登录。有没有办法从用户登录电子邮件中获取用户 ID，或者只是使用用户电子邮件以特殊方式登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:23:11.867

我认为您正在尝试登录错误的服务器；这听起来像是用户如何使用用户名和密码直接登录聊天。要在您的应用程序中执行此操作，您需要使用 API：[https](https://developers.facebook.com/docs/chat/) ://developers.facebook.com/docs/chat/ - 这涉及将用户发送到身份验证对话框，在那里他们批准您的应用程序访问他们的聊天，以及您会取回一个访问令牌，您可以使用该令牌以用户身份登录聊天

# android - 通过窗口管理器注入运动事件？

> ID：10283785
> 
> 赞同：6
> 
> 时间：2012-04-23T15:43:31.430
> 
> 标签：android, events, touch

我想模拟触摸事件。我正在使用此代码

```
MotionEvent.PointerCoords[] coords = { new MotionEvent.PointerCoords() };
coords[0].x = 200;
coords[0].y = 200;
int[] ptrs = { 0 };
MotionEvent event =MotionEvent.obtain(SystemClock.uptimeMillis(),SystemClock.uptimeMillis(), action, 1, ptrs, coords, 0, 1, 1, 0, 0,    InputDevice.SOURCE_TOUCHPAD, 0);
windowManager.injectPointerEvent(event, false); 
```

问题出在这条线上

```
windowManager.injectPointerEvent(event, false); 
```

我无法访问 WindowManger 。当我尝试使用它时

```
 WindowManager windowmanager=(WindowManager) Context.getSystemService(Context.WINDOW_SERVICE); 
```

我收到一条错误消息。“无法从类型 Context 对非静态方法 getSystemService(String) 进行静态引用”

谁能帮我 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T03:02:55.947

这个错误：`I received an error message . "Cannot make a static reference to the non-static method getSystemService(String) from the type Context"`是你的问题。

您需要获取对上下文的引用。应用程序上下文或活动。

一旦你有了一个 Context 实例，你就可以调用`.getSystemService`它的方法。

# visual-c++ - 如何在 Directshow GraphEdit 中使用 H264 DS 过滤器

> ID：10283786
> 
> 赞同：2
> 
> 时间：2012-04-23T15:43:35.560
> 
> 标签：visual-c++, directshow, h.264, mp4, graphedit

我想将实时视频流捕获到 .mp4 文件。我已经从[http://hax264.sourceforge.net/](http://hax264.sourceforge.net/)下载了 H264 DS 过滤器。我想使用 DirectShow 的 GraphEdit 实用程序生成 Graph。谁能帮我实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:08:42.597

您发布的链接不可能：

> HAX264 是用于解码 H264(AVC) 视频的 DirectShow Video Transform Filter

您可以尝试[来自 Monogram 的 x264 DirectShow 过滤器](http://blog.monogram.sk/janos/2009/05/20/monogram-x264-encoder-1050/)或我们的开源[H264 DirectShow 源过滤器](http://videoprocessing.sourceforge.net/)，它实现了 H.264 规范的有限部分。

您可能还想看看[Geraint Davies 的 mp4 mux](http://www.gdcl.co.uk/mpeg4/)。

# javascript - 在 .NET 和 JavaScript 之间使用 UTC 日期

> ID：10283788
> 
> 赞同：0
> 
> 时间：2012-04-23T15:43:38.213
> 
> 标签：javascript, asp.net-mvc, json

我正在使用[ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)，我希望将我的所有 DateTime 值以 UTC 格式存储在服务器上。我希望 DateTime 值的所有传输都采用 UTC 格式。但我想在本地时间在浏览器中显示 DateTimes。我一直感到困惑并且无法使其正常工作。下面是我的过程......

在我的 UI 中，用户可以输入一个日期，我将其组合成一个字符串并用于创建一个 Date 对象。它最终看起来像这样：

```
var dt = new Date("3/23/2012 8:00 AM"); 
```

因此，用户打算为他们的时间上午 8 点创建一个日期。现在我希望以 UTC 格式将其发送到服务器，所以我有这个方法：

```
Date.prototype.toUTC = function ()
{
    var self = this;
    return new Date(self.getUTCFullYear(), self.getUTCMonth(), self.getUTCDate(), self.getUTCHours(), self.getUTCMinutes());
}; 
```

我这样使用：

```
data.startDt = dt.toUTC();  //Data is the object being set to the server 
```

然后我使用 jQuery 进行 Ajax 调用以将数据对象发送到服务器。在服务器上，当我调试并检查传入的数据时，我看到 StartDt（映射到[.NET](http://en.wikipedia.org/wiki/.NET_Framework) DateTime 对象）为 {3/23/2012 12:00:00 PM}。

这是我存储在数据库中的值。我不完全确定它是正确的。

客户端和服务器都位于美国东部 (UTC-05:00)。

现在，当我以 JSON 格式将此日期发送回客户端时，.NET 会发送以下内容：

```
"/Date(1332518400000)/" 
```

在 JavaScript 中，我以这种方式解析它：

```
var dt = new Date(parseInt(serverDt.substr(6)));    //parseInt ingnores last / 
```

我的想法是这`dt`是一个 UTC 日期，但我可以通过调用以本地格式显示它，`toShortTime()`如下所示：

```
Date.prototype.get12Hour = function ()
{
    var h = this.getHours();
    if (h > 12) { h -= 12; }
    if (h == 0) { h = 12; }
    return h;
};

Date.prototype.getAMPM = function ()
{
    return (this.getHours() < 12) ? "AM" : "PM";
};

Date.prototype.toShortTime = function ()
{
    return this.get12Hour() + ":" + this.getMinutes() + " " + this.getAMPM();
}; 
```

但这并没有给我想要的上午 8:00 回来。它给了我 12:00 PM。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:50:39.533

在您的代码中， dt 是 UTC 时间。您需要将其从 UTC 转换为本地时间。
请参阅[Javascript：将 UTC Date() 对象转换为本地时区](https://stackoverflow.com/questions/3741348/javascript-convert-a-utc-date-object-to-the-local-timezone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T17:56:40.547

这个功能对我来说很好用。

```
function ParseDateForSave(dateValue) {
    // create a new date object
    var newDate = new Date(parseInt(dateValue.substr(6)));

    // return the UTC version of the date
    return newDate.toISOString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:02:51.060

`DateTime`您是否正在构建具有适当值的 .NET对象[`DateTimeKind`](http://msdn.microsoft.com/en-us/library/shx7s921.aspx)？您正在向服务器发送一个 UTC 相对值，我猜这是将该值存储为 EDT 相对时间而不是 UTC 相对时间，因此值不正确。正如您所说，`1332518400000`是美国东部时间下午 12 点，而不是 UTC，这表明服务器上存在转录问题：

```
> new Date(1332518400000)
Fri Mar 23 2012 12:00:00 GMT-0400 (Eastern Daylight Time) 
```

# database - SWI-Prolog 列表和递归

> ID：10283798
> 
> 赞同：2
> 
> 时间：2012-04-23T15:44:20.253
> 
> 标签：database, list, recursion, prolog

我有一个数据库看起来像；

```
airport(ist, 90).
airport(saw, 45).
airport(esb, 60).
airport(adb, 60).
airport(erz, 30).
airport(ayt, 90).
airport(mlx, 30).
airport(tzx, 30).

airplane(f1, ist, [esb,tzx,saw]).
airplane(f2, ist, [mlx,esb,erz,esb]).
airplane(f3, ist, [esb,ist,esb,ist]).
airplane(f4, saw, [ayt,saw,ayt,saw]).
airplane(f5, erz, [esb,erz,esb]).
airplane(f6, mlx, [ist,esb,tzx,saw]). 
```

我有一个名为“测试”的谓词将两个列表作为参数。所以，如果你写 testing([ist],X)。你应该得到 X=[esb,mlx]。我写了这段代码。

```
testing([],[]).

testing([D|D1],[L|L1]) :-
    airport(D,_),
    airplane(_,D,[L|_]),
    testing(D1,L1). 
```

这有效，输出为：

```
[8] 60 ?- listConnections([ist],X).
X = [esb] ;
X = [mlx] ;
X = [esb]. 
```

但这不是我想要的。所以第一个问题是我需要像 X=[esb,mlx] 这样的单行答案。第二个问题是列表中不应该有重复的元素。我希望我的问题很清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:48:23.463

您可以使用`setof/3`：

```
testing_set(List, Result) :-
    setof(L, testing(List, L), Result). 
```

您可能感兴趣的页面是[这个 SWI-Prolog 文档页面](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.29%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29)。

请注意，它不会返回，`[esb,mlx]`但是`[[esb], [mlx]]`，它很容易修复。

# emacs - 新框架的 Emacs 钩子

> ID：10283806
> 
> 赞同：11
> 
> 时间：2012-04-23T15:44:52.340
> 
> 标签：emacs, window

每当在 Emacs 中创建新框架时，我都需要一个命令来运行。到目前为止，我一直在使用`after-make-frame-functions`，但是这个钩子只在由`make-frame`. **我实际上需要在`emacsclient -c`命令创建新窗口时运行的东西。**

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T16:00:44.433

我很难理解你的问题。Emacs 服务器`make-frame`在需要创建新框架时调用，因此`after-make-frame-functions`也应该在这种情况下工作。那么你的实际问题是什么？

即使 Emacs 服务器*没有*创建新框架，您是否希望您的函数运行？如果是这样，请尝试将您的功能添加到`server-switch-hook`以及`after-make-frame-functions`.

> `server-switch-hook`是 中定义的变量`server.el`。
> 
> 文档：切换到 Emacs 服务器的缓冲区时运行挂钩。

# iphone - Iphone：UITableView如何检测该行被选中

> ID：10283815
> 
> 赞同：1
> 
> 时间：2012-04-23T15:45:17.020
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uikit

我有一个`UITableView`，我按下了行，但没有松开手指，所以`didSelectRowAtIndexPath`还没有被调用，对吧？

1.  如何检测我点击了哪一行？用什么方法？
2.  如何检测我点击了表格视图？有没有类似的方法`rowIsPressed`？还是`onTableViewTouchDown`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:57:03.943

至少有两种选择：

1）您可以继承 UITableViewCell 并使用您从默认 uiview 中知道的触摸处理。（如`touchesBegan:`等）/或添加自定义 uiview 作为 tablecell 的 contentView。

2）为每个表格单元添加一个手势识别器。

要找出你在哪一行，你可以给每一行一个标签（而不是引用该行）`cellForRow:atIndexPath:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:49:07.380

试试这个

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath         *)indexPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:52:48.747

没有这样的方法可以在抬起手指之前检测到选定的状态......我想你应该重写 UITableView 类并向它添加一个 UIGestureRecognizer 。关于您的第二个问题，我认为您正在谈论此表视图委托方法：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是还有另一种方法可以为您提供当前选定的行。就是这样（直接来自表视图类）：

```
- (NSIndexPath *)indexPathForSelectedRow 
```

希望有所帮助！

# xml - 在 Windows 7 中解析来自世界银行的 xml 数据的 XML

> ID：10283819
> 
> 赞同：0
> 
> 时间：2012-04-23T15:45:34.523
> 
> 标签：xml, windows-phone-7

这是我的 xml 数据的链接

[http://api.worldbank.org/countries/IND/indicators/EN.ATM.CO2E.PC?per_page=10&date=2005:2012](http://api.worldbank.org/countries/IND/indicators/EN.ATM.CO2E.PC?per_page=10&date=2005:2012)

我正在使用以下代码来解析它并显示但无法这样做。

```
 public void Getinfo()
    {
        try
        {
           String url = http://api.worldbank.org/countries/IND/indicators/EN.ATM.CO2E.PC?per_page=10&date=2005:2012";
            WebClient wc = new WebClient();
            wc.OpenReadCompleted += wc_OpenReadCompleted;
            wc.OpenReadAsync(new Uri(url));

        }
        catch (Exception)
        {
            MessageBox.Show("Please retry unable to access Data");

        }
    }
    private void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            MessageBox.Show(e.Error + "");
            return;
        }
        using (Stream s = e.Result)
        {
            XDocument doc = XDocument.Load(s);
            XNamespace wb = "http://www.worldbank.org";

            foreach (var node in doc.Element(wb+"data").Element(wb+"data").Elements(wb+"date"))
            {
               String chk = node.Value.ToString();
               String year1 = "2007";
                if (chk == year1)
                {
                    foreach (var node1 in doc.Element(wb+"data").Element(wb+"data").Elements(wb+"value"))
                    {
                        info1.Text = node1.Value.ToString();
                    }

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:14:14.897

问题来自您的 Linq 请求：

你在这里做什么：

您获取第一个**数据**元素，然后在前一个**数据**元素中再次获取第一个数据元素，然后在第二个**数据**元素中获取所有**日期**。

 **```
data --> enter here
-- data --> then here
-- -- date --> and take all the date element in the parent data node
               (but there is only one date element per data)
-- data
-- -- date 
```

你想做的是：

取第二层的所有**数据**元素，但不要取整个元素，只取每个**数据元素的第一个****日期**元素。

 **```
foreach (var date in doc.Element(wb + "data").Elements(wb + "data").Select(data => data.Element(wb + "date")))
{
    ...
} 
```

我不清楚您想要实现的目标，但是如果您需要同一**数据元素中的****value**元素，则可能不需要仅返回**date**。

 ****另外，为什么要使用第二个 foreach 语句？再一次，您只会收到一个带有该请求的元素。我想你想做的是这样的：

```
foreach (var node in doc.Element(wb + "data").Elements(wb + "data"))
{
    if("2007".Equals(node.Element(wb + "date").Value){
        info1.Text = node.Element(wb + "value").Value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:13:13.813

您尝试获取数据时缺少一些东西。第一个是您对命名空间的使用。这会解析各种元素，并像您一样从 2007 年获得一个。

这不是您的代码的一对一替换，但它旨在向您展示如何遍历树。希望这将为您指明正确的方向。

```
XDocument doc = XDocument.Load(@"C:\temp\wb.xml");

var ns = XNamespace.Get("http://www.worldbank.org");

// Get the root element
var root = doc.Element(ns.GetName("data"));

//Get a collection of the elements underneath the root that are called "data"
var elements = root.Elements(ns.GetName("data"));

//Select only those that are from 2007
var selectedElements = elements.Where(e=>e.Element(ns.GetName("date")).Value.Equals("2007"));

//Iterate through each one
selectedElements.ToList().ForEach(x=>
    {
        var val = decimal.Parse(x.Element(ns.GetName("value")).Value);
        System.Diagnostics.Debug.WriteLine("Value is: {0}", val);
    }); 
```********

# java - 使用 IntelliJ 10.X 测试 HQL 查询

> ID：10283820
> 
> 赞同：1
> 
> 时间：2012-04-23T15:45:36.130
> 
> 标签：java, hibernate, intellij-idea

我正在寻找一种使用 IntelliJ IDEA v.10（终极版）测试 HQL 查询的方法。我已阅读[此问题](https://stackoverflow.com/questions/1043554/how-to-test-hql-queries)的已接受答案中的说明，但它们指的是 IDEA v.8，并且似乎不适用于较新版本的 IDEA。

如果在 IDEA 中无法做到这一点，那么欢迎使用替代建议来测试 Hibernate 查询，但如果可能的话，我宁愿不必使用 Eclipse

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:34:33.840

我有 IntelliJ IDEA 11。我将为这个版本描述它。我希望它是相似的。

1.  在数据源中，您必须添加新的数据源。Idea 可以从您的休眠 Hibernate 或 JPA 配置中导入。
2.  在菜单运行 -> 编辑配置...
3.  创建查询语言控制台运行器。`Use default context`是您的数据源。
4.  运行准备好的运行器，然后您可以编写 HQL 或 SQL。这取决于您的数据源类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:32:02.097

新的 IDEA 版本有一些 UI 差异，但大体相同。

1.  如果您启用了**数据库支持插件，则可以使用**[数据源工具窗口](http://www.jetbrains.com/idea/webhelp/data-sources-tool-window.html)，您不需要使用该`Tools`菜单。

2.  Hibernate facet 需要[启用 Hibernate 插件](http://www.jetbrains.com/idea/webhelp/hibernate.html)。

3.  代替**Java EE View**的是[Persistence 工具窗口](http://www.jetbrains.com/idea/webhelp/persistence-tool-window.html)，您可以从中[打开查询控制台](http://www.jetbrains.com/idea/webhelp/using-hibernate-console.html)。

# progress-4gl - Progress 4gl-内部程序

> ID：10283829
> 
> 赞同：0
> 
> 时间：2012-04-23T15:46:10.243
> 
> 标签：progress-4gl

有没有办法在其**内部过程（.p 文件）中使用*****过程（.p 文件）的变量***？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:11:36.180

像这样？

```
define variable i as integer no-undo.  /* a variable in the main procedure */

procedure internalProcedure:

  message "Internal Procedure (a):" i.
  i = 13.
  message "Internal Procedure (b):" i.
end.

/* main block
 */

i = 1.
message "Main procedure (a):" i.

run internalProcedure.

message "Main procedure (b):" i. 
```

更困难的问题可能是：“是否有办法**阻止**在内部过程中使用全局范围的变量”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:44:54.563

实际问题似乎是：“我有许多调用公共过程的过程。在一种特殊情况下，我需要让公共过程在调用过程中设置一个特殊值，但我不能修改所有其他过程。”

简单但在架构上令人反感的解决方案是使用全局共享变量。

许多人会告诉你，这是一种糟糕的编码技术。他们是对的。但是您并不是在寻求有关最佳实践的建议。

只需在调用者和被调用者中创建这样一个变量。不需要它的程序不会错过它。

您的“正常”程序之一：

```
/* p1.p */

message "p1, I'm normal.".
run common.p. 
```

您的“特殊”计划：

```
/* p2.p */

define new global shared variable special as character no-undo.

message "p2, I'm special!".
run common.p.
message "special = " special. 
```

通用程序：

```
/* common.p */

define new global shared variable special as character no-undo.
message "common stuff...".
if program-name(2) = "p2.p" then special = "special value".
return. 
```

您可以根据需要多次定义 NEW GLOBAL SHARED 变量，并且您只会获得一份副本。“新”不会覆盖任何现有变量（如果您忽略 GLOBAL，它的行为会有所不同）。

您没有要求它，也许您不需要它，但程序名称（2）检查会查看调用堆栈以查看 common.p 是否被 p2.p 调用。

还有其他更复杂的方法可以做到这一点，但它们都归结为同一个问题——你正在为你的“特殊”程序和现在不再通用的“通用”程序之间的一些非常丑陋的耦合创建基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:54:02.137

你是这个意思吗？

在这里，我们有一个名为 ShowTime.p 的通用 .p 文件，其他 .p 文件将运行该文件。您希望它对其中一个 .p 文件以某种方式运行，而对其他文件则以不同的方式运行。为此，我们定义了一个参数。在此示例中，它是一个 LOGICAL 参数，因此该值可以是 YES 或 NO。如您所见，如果 lShowDate 参数为 NO，ShowTime 过程将显示 TIME，如果 lShowDate 参数为 YES，它将显示 DATE。

```
/* ShowTime.p */
DEFINE INPUT PARAMETER lShowDate AS LOGICAL.
IF lShowDate = NO THEN
  MESSAGE STRING(TIME,"HH:MM:SS").
ELSE
  MESSAGE STRING(TODAY,"9999/99/99"). 
```

这是您的五个不相关的 .p 文件之一。它运行 ShowTime.p 过程，向它传递一个 NO 参数，因此 ShowTime 将显示 TIME。

```
/* p1.p */
MESSAGE "P File 1".
RUN ShowTime(INPUT NO) NO-ERROR. 
```

另一个，为什么不呢？

```
/* p2.p */
MESSAGE "P File 2".
RUN ShowTime(INPUT NO) NO-ERROR. 
```

此 .p 文件正在运行 ShowTime，并将 lShowDate 参数设置为 YES，这意味着 ShowTime 过程在此过程中的行为将有所不同，通过显示 DATE 而不是 TIME。

```
/* p5.p */
MESSAGE "P File 5".
RUN ShowTime(INPUT YES) NO-ERROR. 
```

所以基本上你所拥有的是一个程序，ShowTime，它可以做两件事之一。运行这个过程的不相关过程可以通过传递一个参数来告诉它它想要什么。

就您的问题而言：有五个彼此不相关的程序（p1.p，p2.p ... p5.p），共享一个程序（ShowTime.p文件）。共享过程用一个参数进行了修改，因此它只能对一个调用过程（带有 YES 参数的那个）产生影响，而不影响其他四个（带有 NO 参数的那个）。

但是如果你不能改变五个不相关的过程运行共享过程的方式，如果你只能改变共享过程，你就必须对参数以外的东西做出决定。那这个呢：

```
/* DoThing.p */
IF SOURCE-PROCEDURE:NAME = "p5.p" THEN
  MESSAGE "Do one thing".
ELSE
  MESSAGE "Do something else". 
```

这将对五个过程之一做一件事，而对其他四个做另一件事。**

# javascript - 缺少“之前的语句”时出错 - @import

> ID：10283832
> 
> 赞同：2
> 
> 时间：2012-04-23T15:46:19.190
> 
> 标签：javascript, jquery, css

加载我的网站时，我在 Firebug Web Developer 中遇到错误：

```
Error: missing ; before statement
Source File: http://jquery-ui.googlecode.com/svn/tags/latest/themes/base/jquery.ui.all.css
Line: 10, Column: 1
Source Code:
@import "jquery.ui.base.css"; 
```

*这是完整的文件：*

```
/*!
 * jQuery UI CSS Framework 1.8.19
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Theming
 */
@import "jquery.ui.base.css";
@import "jquery.ui.theme.css"; 
```

**有什么建议么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T16:29:49.247

CSS 文件出现 JavaScript 错误的唯一原因是您将 CSS 加载为 JavaScript。

这可能听起来很傲慢，但您是否正在这样做：

```
<script src="jquery.ui.base.css"></script> 
```

如果是，则应改为：

```
<link rel="stylesheet" href="jquery.ui.base.css" /> 
```

当然，如果您使用一些 jQuery 导入东西，这是一个更容易犯的错误，但我们需要查看更多源代码来确定这一点。

# ruby - 宝石已安装，但捆绑器没有得到它

> ID：10283835
> 
> 赞同：0
> 
> 时间：2012-04-23T15:46:27.330
> 
> 标签：ruby, gem, installation, bundler

我使用 gem install mocha 安装了 mocha，它确实安装成功。我的 GEMFILE 中没有特定版本的版本要求。

我仍然收到错误：

```
Could not find mocha-0.10.3 in any of the sources 
```

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:50:07.217

要从 安装 gem `rubygems.org`，您需要`source :rubygems`在 Gemfile 中设置 ，使其看起来像

```
source :rubygems
gem "mocha" 
```

问题也可能是您的 Gemfile.lock 由于某些依赖项而需要较旧的版本，而不是您通过 安装的版本`gem install mocha`，假设这是您所做的。

不过，显示 Gemfile 的内容可能有助于更轻松地解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:57:59.713

看起来那个版本的 mocha[是](http://rubygems.org/gems/mocha/versions/0.10.3)从 RubyGems 中删除的，所以你需要一个更新的版本。如果您没有硬锁定 Gemfile 中的特定版本，请尝试`bundle update mocha`更新您的 Gemfile.lock。否则，请确保您使用了spermy 运算符来指定 Gemfile 中的版本：

```
gem "mocha", "~> 0.10.5" 
```

# c# - 是 - 否 MessageBox 在工作线程中出现得太早

> ID：10283842
> 
> 赞同：0
> 
> 时间：2012-04-23T15:47:23.707
> 
> 标签：c#, dialog, messagebox

我的程序需要向用户显示一个对话框，提示用户选择保存文件夹，然后显示一个是-否按钮消息框，要求用户确认他们希望继续。

这是我的代码：

```
/* Wait until user has selected a save folder */
do { } while (sSaveFolder == null);

/* Cancel operation if user clicks on cancel when in folder selection window */
if (sSaveFolder == "<cancel>")
{
    worker.ReportProgress(0, "Operation Cancelled\r\n\r\n**********\r\n");
    return;
}

/* Check for confirmation */
if (MessageBox.Show("Please confirm whether or not to continue.", "Do you wish to continue?", MessageBoxButtons.YesNo) == DialogResult.No)
{
    worker.ReportProgress(0, "Operation Cancelled\r\n\r\n**********\r\n");
    return;
} 
```

我遇到的问题是我可以运行一次，单击否，工作线程终止。但是，如果我再次单击该按钮以运行工作线程，我会在弹出保存文件夹对话框的同时弹出消息框 - 这显然是有问题的。那么有谁知道为什么会发生这种情况以及如何解决它？

我通过将消息框移动到保存文件夹对话框之前找到了解决我的特定问题的方法，但是，由于这是一个奇怪的问题，我想我会在将来再次询问它。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:51:46.553

我在您的代码中看不到 sSaveFolder 的值将被重置的任何地方。

由于您正在重用同一个对象，因此可能仍会设置先前的值，因此 do...while 完成得非常快，因此会显示消息框。

在显示对话框之前重置 sSaveFolder 的值应该可以解决您的问题。

# c# - 如何更改 Silverlight 导航应用程序中选项卡的颜色？

> ID：10283849
> 
> 赞同：1
> 
> 时间：2012-04-23T15:47:46.250
> 
> 标签：c#, silverlight, navigation

我使用 silverlight 模板创建了一个导航应用程序。我确实有 4 个名为`Home, About, Info, Maps`Now 的选项卡，当我选择任何人时，它工作正常，但看起来不像选择了哪个选项卡。因为选定的一个选项卡没有颜色变化。

请建议我如何更改所选标签的颜色？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:50:28.097

我自己从来没有明确地玩过这个，但是在默认样式下，这种行为是存在的

```
 <Border x:Name="LinksBorder" Style="{StaticResource LinksBorderStyle}">
                <StackPanel x:Name="LinksStackPanel" Style="{StaticResource LinksStackPanelStyle}">

                    <HyperlinkButton x:Name="Link2" Style="{StaticResource LinkStyle}" 
                                 NavigateUri="/About" TargetName="ContentFrame" Content="About"/>
                </StackPanel>
            </Border> 
```

在后面的代码中：

```
 // After the Frame navigates, ensure the HyperlinkButton representing the current page is selected
    private void ContentFrame_Navigated(object sender, NavigationEventArgs e)
    {
        //This is to hide/show the leftside menu
        ApplyConfiguration(ApplicationConfiguration.GetConfiguration());

        foreach (UIElement child in LinksStackPanel.Children)
        {
            HyperlinkButton hb = child as HyperlinkButton;
            if (hb != null && hb.NavigateUri != null)
            {
                if (hb.NavigateUri.ToString().Equals(e.Uri.ToString()))
                {
                    VisualStateManager.GoToState(hb, "ActiveLink", true);
                }
                else
                {
                    VisualStateManager.GoToState(hb, "InactiveLink", true);
                }
            }
        }
    } 
```

注意非活动的转到状态活动。此代码来自一个导航 silverlight 项目的默认模板。保留样式的 StaticResource 应该可以解决问题。然后你可以去创造你自己的风格

# asp.net-mvc-3 - Web.config 中的 MVC3 + Elmah = defaultredirect 不起作用

> ID：10283850
> 
> 赞同：1
> 
> 时间：2012-04-23T15:47:50.087
> 
> 标签：asp.net-mvc-3, elmah

我正在尝试将 MVC3 与 Elmah 链接。一切正常，所有错误都得到处理和记录，但是对于有自定义错误的用户，我遇到了前端问题。我写了全局过滤器

```
public class ElmahHandleErrorAttribute : System.Web.Mvc.HandleErrorAttribute
{
    public override void OnException(ExceptionContext context)
    {
        base.OnException(context);

        var e = context.Exception;
        if (!context.ExceptionHandled   // if unhandled, will be logged anyhow
            || RaiseErrorSignal(e)      // prefer signaling, if possible
            || IsFiltered(context))     // filtered?
            return;

        LogException(e);
    }

    private static bool RaiseErrorSignal(Exception e)
    {
        var context = HttpContext.Current;
        if (context == null)
            return false;
        var signal = ErrorSignal.FromContext(context);
        if (signal == null)
            return false;
        signal.Raise(e, context);
        return true;
    }

    private static bool IsFiltered(ExceptionContext context)
    {
        var config = context.HttpContext.GetSection("elmah/errorFilter")
                     as ErrorFilterConfiguration;

        if (config == null)
            return false;

        var testContext = new ErrorFilterModule.AssertionHelperContext(
                                  context.Exception, HttpContext.Current);

        return config.Assertion.Test(testContext);
    }

    private static void LogException(Exception e)
    {
        var context = HttpContext.Current;
        ErrorLog.GetDefault(context).Log(new Error(e, context));
    }
} 
```

我在 Global.asax 中注册了过滤器

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new ElmahHandleErrorAttribute());
    //filters.Add(new HandleErrorAttribute());
} 
```

但是当引发异常时，处理程序会处理它，但不使用来自 web.config 的默认重定向路径。它在 ~/Shared/Error.cshtml 中查看视图

我在 webconfig 中

```
<customErrors mode="On" defaultRedirect="~/Home/NeutralError">
  <error statusCode="404" redirect="~/Home/NeutralErrorNotFound" />
</customErrors> 
```

有任何想法吗？: |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:22:51.863

`HandleError`默认属性`Error`在共享文件夹中查找视图，而不是根据部分`defaultRedirect`设置的属性工作`customErrors`。您可以告诉`HandleError`寻找不同的视图名称，但我认为在您的情况下您想重定向到其他操作。我希望这会起作用（未经测试），

```
public override void OnException(ExceptionContext context)
{
    base.OnException(context);

    var e = context.Exception;
    if (!context.ExceptionHandled   // if unhandled, will be logged anyhow
        || RaiseErrorSignal(e)      // prefer signaling, if possible
        || IsFiltered(context))     // filtered?
        return;

    LogException(e);

  // newly added
  if (context.Exception is HttpException)
  {
    if(((HttpException)context.Exception).GetHttpCode() == 404)
      context.Result = new RedirectResult("~/Home/NeutralErrorNotFound");
  }
  context.Result = new RedirectResult("~/Home/NeutralError");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:24:14.787

在 OnException 方法中设置基类的视图似乎可以解决这个问题。

```
public override void OnException(ExceptionContext context)
    {
        base.View = "~/views/error/errorindex.cshtml"; // New code here... 
        base.OnException(context);

        var e = context.Exception;
        if (!context.ExceptionHandled   // if unhandled, will be logged anyhow
            || RaiseErrorSignal(e)      // prefer signaling, if possible
            || IsFiltered(context))     // filtered?
            return;

        LogException(e);
    } 
```

# jquery - 使用动画的jQuery幻灯片不流畅

> ID：10283855
> 
> 赞同：0
> 
> 时间：2012-04-23T15:48:19.923
> 
> 标签：jquery, jquery-animate, slideshow

我需要做一个简单的 jquery 幻灯片。我将一些图像放在一个 div 中，并使用 animate 函数更改其边距值。它工作得很好，但问题是幻灯片在更改图像时不流畅。必须隐藏的图像无需滑动就会消失（就像我使用 .hide() 方法一样）。这是我写的代码：

```
$('#slider-container').animate({ marginLeft: "-" + margin_slider + "px"}, 500 ); 
```

而html代码是：

```
<div id="slider">
    <div id="slider-container">
        <img src="image1" />
        <img src="image2" />
        <img src="image3" />
        <img src="image4" />
    </div>
</div> 
```

div 滑块具有固定宽度（等于图像宽度）并且具有溢出：隐藏。我能怎么做？谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:35:49.840

我确实为滑块容器设置了一个宽度，所以它采用了滑块宽度并且图像没有向左浮动，但是一个在另一个之下使得幻灯片不流畅

# javascript - 关于数字 Literals lexical

> ID：10283856
> 
> 赞同：1
> 
> 时间：2012-04-23T15:48:21.167
> 
> 标签：javascript, numbers, lexical

alert(010)，结果是 8。为什么？我阅读了 ecmascript 7.8.3 Numeric Literals。根据 Numeric Literals Lexical，010 是无效的数字文字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:52:53.017

只有在开启严格模式时才会如此：

```
(function(){
"use strict";
010;
})();
SyntaxError: Octal literals are not allowed in strict mode. 
```

否则会破坏向后兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:51:52.870

`010`八进制是`8`十进制。如果它说它无效（链接在哪里？），它可能已经改变，或者你正在使用不是“ECMAScript”之类的不同版本进行操作？

在许多编程语言中，`0`数字文字之前的一个使其成为八进制。

# wpf - WPF数据绑定友好枚举错误

> ID：10283859
> 
> 赞同：1
> 
> 时间：2012-04-23T15:48:44.300
> 
> 标签：wpf, data-binding

为了绑定一个“友好”的枚举，我点击这个链接

[将枚举属性数据绑定到 WPF 中的组合框](https://stackoverflow.com/questions/58743/databinding-an-enum-property-to-a-combobox-in-wpf)

但我有这个错误：无法从“状态”字符串创建“类型”

这是我背后的代码

```
 public enum Status
    {
        [Description("Available.")]
        Available,
        [Description("Not here right now.")]
        Away,
        [Description("I don't have time right now.")]
        Busy
    }

    public Status CurrentStatus { get; set; }

    public MainWindow()
    {
        InitializeComponent();

    } 
```

这是我的 XAML

```
<Grid>
    <ComboBox 
        ItemsSource="{Binding Source={my:Enumeration {x:Type Status}}}" 
        DisplayMemberPath="Description" 
        SelectedValue="{Binding CurrentStatus}"  
        SelectedValuePath="Value"  />

</Grid> 
```

我怎么了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:59:39.353

您缺少命名空间。如果您的代码位于名为的命名空间中，`MyProject`则需要在 xaml 文件顶部添加对它的引用：

```
 <xmlns:proj="clr-namespace:MyProject" /> 
```

然后相应地为您的类型添加前缀：

```
 ItemsSource="{Binding Source={my:Enumeration {x:Type proj:Status}}}" 
```

编辑：查看您现有的标记，使用`my:Status`可能就足够了。

# c# - 向控制台应用程序添加键盘快捷键 - 单声道兼容

> ID：10283860
> 
> 赞同：2
> 
> 时间：2012-04-23T15:48:51.807
> 
> 标签：c#, mono, keyboard, console

我正在检查在我的控制台应用程序运行时按下了哪些键盘按钮和组合。

我想做的一件事是在控制台应用程序中捕获 Ctrl+C，这样它就不会只是退出，而是进行一些整理并优雅地关闭。

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:36:02.733

如果您在 Unix/Linux 下运行，请使用 Mono.UnixSignal

我在我的 Linux 应用程序上使用它。优点是它还会检测重新启动或系统关闭。

这个例子来自[这个 Mono FAQ 页面](http://www.mono-project.com/FAQ%3a_Technical#Operating_System_Questions)

```
// Catch SIGINT and SIGUSR1
UnixSignal[] signals = new UnixSignal [] {
    new UnixSignal (Mono.Unix.Native.Signum.SIGINT),
    new UnixSignal (Mono.Unix.Native.Signum.SIGUSR1),
};

Thread signal_thread = new Thread (delegate () {
    while (true) {
        // Wait for a signal to be delivered
        int index = UnixSignal.WaitAny (signals, -1);

        Mono.Unix.Native.Signum signal = signals [index].Signum;

        // Notify the main thread that a signal was received,
    // you can use things like:
    //    Application.Invoke () for Gtk#
    //    Control.Invoke on Windows.Forms
    //    Write to a pipe created with UnixPipes for server apps.
    //    Use an AutoResetEvent

    // For example, this works with Gtk#    
    Application.Invoke (delegate () { ReceivedSignal (signal); }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:03:43.347

你可以使用[`Console.CancelKeyPress`事件](http://msdn.microsoft.com/en-us/library/system.console.cancelkeypress.aspx)。

> 此事件与 System.ConsoleCancelEventHandler 和 System.ConsoleCancelEventArgs 结合使用。CancelKeyPress 事件使控制台应用程序能够拦截 CTRL+C 信号，以便应用程序可以决定是继续执行还是终止。

# file - Mule ESB：如何检测部分文件以避免传输部分上传的文件？

> ID：10283863
> 
> 赞同：1
> 
> 时间：2012-04-23T15:48:57.387
> 
> 标签：file, partial, esb, file-transfer, mule

我的 Mule ESB 服务器上有一个文件夹，可以指向多个来源（一个 SCP、一个 SFTP 以及其他）。 **每当我检测到一个文件时，我都想将它移动到另一个目录。问题是，我正在移动部分完成的文件，导致我丢失数据。**

我试过使用文件的“fileage”属性，但它似乎不能可靠地工作。我试图尽可能地降低延迟，因为大多数文件都小于 10kb，但有些文件需要大到 100mb。

**有什么方法可以知道文件是部分文件还是完整文件？** 我知道 WinSCP 使用 .filepart 扩展名，但这仅适用于一个应用程序，即使这样，也可以在 WinSCP 的首选项中更改（或完全删除）该扩展名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:00:12.853

**我解决了我自己的问题。**

通过更多测试，结果发现问题出在操作系统级别。在 RedHat 上，“Last Modified”时间戳仅每 ~1000 毫秒更新一次，这对 4kb 文件造成了太大的延迟。在 Windows 上更糟糕的是：“最后修改”仅在传输开始时设置，然后在传输完成时重置。MuleSoft 团队从这个时间戳中提取 fileAge 在技术上是正确的，但是操作系统没有经常更新它以使其正常工作。他们应该改用文件**大小**。我将提交一份临时工单。

# c++ - 从正在运行的进程设置线程优先级

> ID：10283864
> 
> 赞同：1
> 
> 时间：2012-04-23T15:49:06.407
> 
> 标签：c++, multithreading, winapi

我刚刚遇到[Get](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683235%28v=vs.85%29.aspx) / [SetThreadPriority](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686277%28v=vs.85%29.aspx)方法，他们让我想知道 - 线程优先级是否可以*有意义*地设置为高于拥有的进程优先级（我不相信可以以相同的方式以编程方式更改）？

使用这些 API 有什么陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:05:21.883

是的，您可以将线程优先级设置为任何类，包括高于当前进程的类。事实上，这两个值是互补的，提供线程的基本优先级。您可以在您发布的链接的备注部分阅读它。

[您可以使用SetPriorityClass](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686219%28v=vs.85%29.aspx)设置进程优先级。

既然我们已经解决了技术问题，我发现直接操作线程的优先级几乎没有用处。操作系统调度程序足够复杂，可以提高在 I/O 中阻塞的线程的优先级，而不是执行 CPU 计算的线程（当 I/O 中断到达时，I/O 线程将抢占 CPU 线程）。事实上，甚至 I/O 线程也有所不同，例如，键盘 I/O 线程的优先级高于文件 I/O 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:04:57.717

在 Windows 上，线程和进程的优先级使用决定整体调度优先级的算法进行组合：

[Windows 优先级](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)

陷阱？出色地：

如果线程通常在 IO 上被阻塞但必须在其驱动程序发出信号后尽快运行，则提高线程的优先级可能会带来最大的整体收益，例如。必须快速处理缓冲区的视频 IO。

如果线程受 CPU 限制并提高到高优先级，则提高线程的优先级可能会产生最大的整体负面影响，从而阻止正常优先级线程的运行。如果走极端，操作系统线程和任务管理器等实用程序将无法运行。

# c# - 将数据绑定到 ListView 不起作用（Metro UI）

> ID：10283866
> 
> 赞同：0
> 
> 时间：2012-04-23T15:49:18.253
> 
> 标签：c#, xaml, windows-8, microsoft-metro

当我将此代码放入我的 XAML 文件时：

```
<TextBlock Text="{Binding Name}" FontSize="16" Margin="15,0,0,0" /> 
```

它向我展示了`Name`价值，但是当我尝试通过以下方式展示它时`ListView`：

```
<ListView x:Name="ItemListView"
      ItemsSource="{Binding Items}"
      Margin="60,0,0,10">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Name}"  
                       FontSize="24" Margin="5,0,0,0" TextWrapping="Wrap" />
                        <TextBlock Text="{Binding Artist}" 
                       FontSize="16" Margin="15,0,0,0"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

它没有出现:(有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:46:06.003

您正在查看示例中的两个不同对象。在文本框中，您正在查看数据上下文中对象的名称，在列表视图中，您正在查看绑定到的每个项目的 Items[x].Name。如果您需要从数据上下文而不是 Items 集合中引用名称，则需要将源绑定到不继承它的 Element。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:03:10.550

如果页面继承自 LayoutAwarePage，就像默认情况下从模板创建时一样，DataContext 将设置为名为 DefaultViewModel 的属性。您的代码隐藏中公开的属性将不受约束。

# c# - 实施 IDisposable 时需要考虑的任何风险？

> ID：10283867
> 
> 赞同：1
> 
> 时间：2012-04-23T15:49:19.233
> 
> 标签：c#, winforms, .net-3.5

我想创建一个在 using() 语句中调用存储库类的方法。该类目前不是一次性的。在实现 IDisposable 之前我应该​​考虑什么？

IE

```
using(var repo = new RespositoryClass() )
{
   //do work
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:57:28.717

`IDisposable`如果该类使用非托管资源，或者初始化实现它的其他成员，您应该实现。否则，如果您不需要它，请不要使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:55:44.613

仅仅因为您在类中使用`IDisposable`对象并不意味着该类需要实现 IDisposable。

下面的示例类不需要实现`IDisposable`.

```
class NotDisposable
{
  public void someMethod()
  {
    using(SomethingDisposable resource = new SomethingDisposable ())
    {...}
  }
} 
```

这是一个需要实现的类*的*示例`IDisposable`。

```
class SomethingToDispose : IDisposable
{
  private SomethingDisposable resource = new SomethingDisposable();

  public void someMethod()
  {
    //code that uses resource 
  }

  //code to dispose of "resource" in a Dispose method.
} 
```

正如您在第二个示例中看到的那样，该类实际上没有任何地方可以放置`using`声明来处置资源。由于它将一次性对象存储在一个字段中，并且它是负责处置它的人，因此确保它被处置的最佳方法是实现`IDisposable`.

# jquery - 没有间隙的连续滑块动画jQuery

> ID：10283868
> 
> 赞同：1
> 
> 时间：2012-04-23T15:49:21.417
> 
> 标签：jquery, animation, slider, append, continuous

我试图创建一个连续的滑块图像，它会自行循环，我已经成功地让它工作了，但现在我面临的问题是，在图像再次循环之前，有很大一部分过渡带有空白空间

我正在寻找一种可以让图像端到端循环的方法，因此过渡中没有间隙，在此先感谢

[http://jsfiddle.net/Antifaith/tqBMQ/](http://jsfiddle.net/Antifaith/tqBMQ/)

编辑：

好的，我用单独的图像尝试了它，但它让我的大脑流血了，所以我采取了另一种方法，当它到达动画中的某个位置时尝试触发 if 语句 - 唯一的问题是它现在触发 slidetown(); 每秒数十亿次并停止工作 - 今天早上我被分配到别的事情上，真的需要一些帮助！

[http://jsfiddle.net/Antifaith/tqBMQ/1/](http://jsfiddle.net/Antifaith/tqBMQ/1/)

```
$(document).ready(function slidetown(){
$('.rotation').animate({'left' : '960px'} , {

    duration: 15000, 
    easing : "linear",
    complete: function() {
      $(this).css('left','-2028px');
      slidetown();
    }
  });
 var pos = $('.rotation').position();
        if (pos.left < 0) {
           slidetown();
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:51:31.593

我认为诀窍可能是使用多个图像而不是一个大图像。您遇到的问题是动画不会重新启动，直到图像离开您为动画指定的 960 像素区域。

但是，如果您在正确的位置剪切图像（我建议找出图像中的逻辑、​​上下文中断），那么当第一张图像在序列中再次出现时，它应该离开页面。

# c - TCP 非阻塞连接失败，getsockopt OptValue 113 请建议

> ID：10283870
> 
> 赞同：1
> 
> 时间：2012-04-23T15:49:22.853
> 
> 标签：c, linux, sockets, networking, tcp

我创建了一个示例 TCP 连接函数。这使用带有超时的非阻塞套接字。该代码在我们的实验室中运行良好，但在某些网络中 TCP 连接失败并出现错误 115，这意味着 EINPROGRESS。调试后发现`getsockopt()`将 iValopt 设置为 113，我们检查`optvalue`是否等于 0，如果不是则返回失败。

操作系统：Linux Suse10

我的问题是：

1.  这里粘贴的代码对吗？
2.  为什么`getsockopt()`Opt 值设置为 113 而 errno 设置为 115？

我也注意到下面。

*   客户端有多个IP：174.66.45.22、58.68.445.112
*   服务器有多个IP：174.88.69.33、58.46.22.33
*   如果我将绑定地址设置为 174.66.45.22 并连接到 174.88.69.33 总是成功的。
*   如果我将绑定地址设置为 174.66.45.22 并连接到 58.46.22.33 将失败。
*   但是，如果我只是在第一次运行时将绑定地址设置为 58.68.445.112，在第二次运行时我将绑定地址更改为 174.66.45.22，然后连接到 58.46.22.33 是成功的！

你能解释一下为什么吗？

我在这里粘贴的确切代码

```
int tcp_sockconnect_linux(int iSocket, const struct sockaddr* pstSockAddr, unsigned int uiSockAddrLen, unsigned int uiConnectionTimeout)
{
    int iRet  = 0;
    //int iValopt = 0;
    int iLength = 0; 
    struct timeval stTv; 
    fd_set write_fds;

    (void)fcntl((int)(long)iSocket, F_SETFL,  O_NONBLOCK);

    iRet = connect((int)(long)iSocket, (struct sockaddr*) pstSockAddr, uiSockAddrLen); 

    if (iRet < 0)
    { 
        if (errno == EINPROGRESS) 
        { 
            stTv.tv_sec = uiConnectionTimeout; 
            stTv.tv_usec = 0; 
            FD_ZERO(&write_fds); 
            FD_SET((int)(long)iSocket, &write_fds); 

            if (0 < select(((int)(long)(iSocket)) + 1,NULL, &write_fds, NULL, &stTv))
            { 
                iLength = sizeof(int); 

                if (0 > getsockopt((int)(long)iSocket, SOL_SOCKET,SO_ERROR, (void*)(&iValopt), &iLength))
                {
                return -1;
                }

                if (0 != iValopt)
                { 
                return -1;
                }

                return 2;
            } 
            else
            { 
            return -1; 
            } 
        } 
        else
        { 
        return -1; 
        } 
    } 

    return 2;
}

int create_socket(void) 
{
    int iRet, sock_sd; 
    struct sockaddr_in saServer;
    struct sockaddr_in saLocal;     

#ifdef WIN32
    WSADATA wsaData;
    if(WSAStartup(0x101, &wsaData)) 
    {
        printf("Unable to initialize WinSock library.\n");
    }
#endif

    memset (&saLocal,'\0', sizeof(saLocal));  
    saLocal.sin_family      = AF_INET;
    saLocal.sin_addr.s_addr = inet_addr(strBindAddr);
    saLocal.sin_port        = htons(0);

    sock_sd = socket(AF_INET,SOCK_STREAM,0);
    memset (&saServer,'\0', sizeof(saServer));  
    saServer.sin_family      = AF_INET;
    saServer.sin_addr.s_addr = inet_addr (strServerIP); 
    saServer.sin_port        = htons(uiServerPort);  

    iRet = bind((unsigned int)sock_sd,(struct sockaddr*) &saLocal,sizeof(saLocal));
#ifdef WIN32
    if (iRet ==  SOCKET_ERROR)
    {
        printf("\nTCP Bind Failed to LocalIP %s\n",strBindAddr);
    }
#else
    if (-1 == iRet)
    {
        printf("\nTCP Bind Failed to LocalIP %s\n",strBindAddr);
    }
#endif

#ifdef WIN32
    iRet = tcp_sockconnect_win(sock_sd, (struct sockaddr*) &saServer,sizeof(saServer),uiConnectionTimeOut); 
    if (iRet ==  SOCKET_ERROR)
    {
        printf("\nTCP Socket Connect Failed with  ErrorNo = %d  iValopt = %d  LineNo = %d \n",WSAGetLastError(),iValopt,iLineNo);
    }
    else if (2 == iRet)
    {
        printf("\nTCP Socket Connect Success \n");
    }
#else
    iRet = tcp_sockconnect_linux(sock_sd, (struct sockaddr*) &saServer,sizeof(saServer),uiConnectionTimeOut);
    if(-1 == iRet)
    {
        printf("\nTCP Socket Connect Failed with  ErrorNo = %d   iValopt = %d  LineNo = %d\n",errno,iValopt,iLineNo);
    }
    else if (2 == iRet)

    {
        printf("\nTCP Socket Connect Success %d\n",iLineNo);
    }

#endif

#ifdef WIN32
    closesocket (sock_sd);
#else
    close(sock_sd);
#endif

    return 0;
}

int main ()
{
    int iRet = 0;

    printf ("Enter the Bind Address (Local IP): ");
    scanf("%s" ,&strBindAddr);

    printf ("\nEnter the IP Address of Server : ");
    scanf("%s" ,&strServerIP);

    printf ("\nEnter the PORT Number of Server : ");
    scanf("%d" ,&uiServerPort);

    printf ("\nEnter the Connection timeout in Seconds : ");
    scanf("%d", &uiConnectionTimeOut);

    iRet = create_socket();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T05:42:43.577

几天前，即使我也面临同样的问题。以下是我可以解决的方法。

在 WR Stevens 的书，*UNIX® Network Programming Volume 1, Third Edition: The Sockets Networking API* - 16.4 Non-blocking connect: Daytime Client，其中谈到了各种连接的不兼容性，我们可以得到一些答案：

> 正如我们之前所说，各种套接字实现和非阻塞连接存在可移植性问题。首先，有可能在调用 select 之前完成连接并且数据从对等方到达。在这种情况下，套接字在成功时将是可读可写的，就像连接失败一样。我们在图 16.11 中的代码通过调用`getsockopt`和检查套接字的未决错误来处理这种情况。
> 
> 接下来是确定连接是否成功完成，如果我们不能假设可写性是返回成功的唯一方式。各种解决方案已发布到 Usenet。这些将取代我们`getsockopt`在图 16.11 中的调用。
> 
> 1.  调用`getpeername`而不是`getsockopt`. 如果使用 失败`ENOTCONN`，则连接失败，然后我们必须调用`getsockopt`with`SO_ERROR`以获取套接字的未决错误。
>     
>     
> 2.  调用`read`长度为0。如果`read`失败，`connect`failed和`errno`from`read`表示连接失败的原因。当连接成功时，`read`应该返回 0。
>     
>     
> 3.  再打电话`connect`。它应该失败，如果`error`是`EISCONN`，则套接字已经连接并且第一个连接成功。

我尝试了第一个使用`getpeername`，然后仅在`getpeername`失败时才获取错误`ENOTCONN`，并且它对我有用，类似于：

```
if(getpeername(ivSocketId, &addr, &addrlen) < 0)
{
  if (errno == ENOTCONN)
  {
    int sockErr = 0;
    socklen_t sockErrLen = sizeof(sockErr);
    if(getsockopt(ivSocketId, SOL_SOCKET, SO_ERROR,
        &sockErr, &sockErrLen) < 0) 
    {
        // Handle errors, may be throw some exceptions
    }
    if(sockErr == 0)
    {
        //Handle Success scenario..
        return;
    }
    else
    {
        // Handle errors, may be throw some exceptions
    }
  }
  else
  {
      // Handle errors, may be throw some exceptions
  }
} 
```

# c# - IFilter ErrorCode FILTER_E_ACCESS 从字节数组中读取 .rtf（Rick 文本格式）

> ID：10283872
> 
> 赞同：3
> 
> 时间：2012-04-23T15:49:31.280
> 
> 标签：c#, ifilter

我正在使用这个[http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files](http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files)并且它大部分都在工作。

我编写了这个测试来检查过滤器是否会按预期从字节数组中读取。

```
private const string ExpectedText = "This is a test!";
[Test]
public void FilterReader_RtfBytes_TextMatch()
{
    var bytes = File.ReadAllBytes(@"Test Documents\DocTest.rtf");
    var reader = new FilterReader(bytes, ".rtf");
    reader.Init();
    var actualText = reader.ReadToEnd();
    StringAssert.Contains(ExpectedText, actualText);
} 
```

测试失败并出现[ErrorCode : FILTER_E_ACCESS](http://msdn.microsoft.com/en-us/library/ms691080%28v=vs.85%29.aspx)，当我给它文件名时它工作正常。

```
new FilterReader(@"Test Documents\DocTest.rtf", ".rtf"); <-- works 
```

我很困惑为什么会这样。我查看了代码，似乎是 rtf filter dll 返回了错误。这更令人费解。

它适用于其他文件类型，例如；.doc、.docx、.pdf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T08:17:08.097

在底层，使用 iFilter 的具体工作方式是由构造函数定义的：当你使用构造函数时，`FilterReader(byte[] bytes, string extension)`使用 IPersistStream 从内存中加载内容，当`FilterReader(string path, string extension)`- IPersistFile 用于从文件加载时。

为什么 rtf-ifilter 在与 IPersistStream 一起使用时返回错误，恐怕我们无法知道，因为源代码没有打开

在我的情况下，我在构造函数中封装了过滤器的特定内容，并以接下来的方式重构代码：

*   删除所有构造函数
*   删除`public void Init()`方法
*   实现一个自定义构造函数`public FilterReader(string fileName, string extension, uint blockSize = 0x2000)`：

    ```
    #region Contracts

    Contract.Requires(!string.IsNullOrEmpty(fileName));
    Contract.Requires(!string.IsNullOrEmpty(extension));
    Contract.Requires(blockSize > 1);

    #endregion

    const string rtfExtension = ".rtf";

    FileName = fileName;
    Extension = extension;
    BufferSize = blockSize;

    _buffer = new char[ActBufferSize];

    // ! Take into account that Rtf-file can be loaded only using IPersistFile.
    var doUseIPersistFile = string.Compare(rtfExtension, extension, StringComparison.InvariantCultureIgnoreCase) == 0;

    // Initialize _filter instance.
    try
    {
        if (doUseIPersistFile)
        {
            // Load content using IPersistFile.
            _filter = FilterLoader.LoadIFilterFromIPersistFile(FileName, Extension);
        }
        else
        {
            // Load content using IPersistStream.
            using (var stream = new FileStream(path: fileName, mode: FileMode.Open, access: FileAccess.Read, share: FileShare.Read))
            {
                var buffer = new byte[stream.Length];
                stream.Read(buffer, 0, buffer.Length);

                _filter = FilterLoader.LoadIFilterFromStream(buffer, Extension);
            }
        }
    }
    catch (FileNotFoundException)
    {
        throw;
    }
    catch (Exception e)
    {
        throw new AggregateException(message: string.Format("Filter Not Found or Loaded for extension '{0}'.", Extension), innerException: e);
    } 
    ```

# iphone - NSNotificationCenter 内存泄漏

> ID：10283876
> 
> 赞同：2
> 
> 时间：2012-04-23T15:50:04.853
> 
> 标签：iphone, profiling, automatic-ref-counting, memory-leaks, nsnotificationcenter

我正在使用 Instruments 分析我的应用程序，并注意到 Leaks 将以下代码标记为内存泄漏：

```
- (void) onMessage:(DFTopicMessage *) message {

    [[NSNotificationCenter defaultCenter] 
     postNotificationName:@"serverMessage" 
     object:message];

} 
```

更准确地说，标记为泄漏的行是：

```
[NSNotificationCenter defaultCenter] 
```

我在我的项目中使用 ARC，所以我没想到会这样。将非常有兴趣了解此代码有什么问题以及如何避免泄漏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:34:01.847

我正在调试相同的症状。在[另一篇文章](https://stackoverflow.com/questions/4002080/ios-nsnotificationcenter-memory-leak)中建议您检查观察者的选择器是否不会过度保留内存。我想进一步详细说明，您可以简单地注释掉选择器中的所有代码并验证这是发生泄漏的地方。在这种情况下，我建议您通过一次取消注释一行来分而治之，以找到问题的确切根源。递归地应用此技术，直到问题出现在您面前。

# c# - 正则表达式模式匹配

> ID：10283877
> 
> 赞同：0
> 
> 时间：2012-04-23T15:50:06.753
> 
> 标签：c#, regex

嗨，我需要这样做。

```
Actually **ctu** is a good university but **ctu's** is not. There are many **,ctus,** present. 
```

我想做的是，我想像这样替换字符串中的 ctu 。

```
Actually **<s>ctu<e>** is a good university but **<s>ctu's<e>** is not. There are many **,<s>ctus<e>,** present. 
```

但是使用以下模式

```
**\\bctu*(?:['\\\\|""\\\\]*)\\w+\\b** 
```

我得到了输出：

```
A**<s>ctu<e>**ally **<s>ctu<e>** is a good university but **<s>ctu's<e>** is not. There are many **,ctus,**   present. 
```

**实际上，我不想在单词中替换 ctu。我还需要替换`" ,ctus, "`为`" ,<s>ctus<e>, "`** 如何使用正则表达式实现这一点。我在 c# 中需要这个。夏普。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:53:32.740

您是否正在寻找`@"\bctu\b"`("ctu" 两边都有单词边界，因此它匹配`ctu`但不匹配`Actually`, `ctu's`, or `,ctus,`) 作为第一个搜索模式和`",ctus,"`（确切地说是字符串`,ctus,`，无论它可能落在单词中的哪个位置）作为第二个搜索模式? 要同时搜索这两个，您可以使用`@"(\bctu\b|,ctus,)"`.

顺便说一句，在 C# 中，您可以通过使用`@""`表示法（[逐字字符串](http://msdn.microsoft.com/en-us/library/362314fe.aspx)）而不是`""`. 例如，要让正则表达式理解单词边界，它必须看到`\b`，它可以表示为`@"\b"`or `"\\b"`，而文字`\`是`"\\\\"`or `@"\\"`。第一个更容易阅读，尤其是在更复杂的情况下。

如果这不能回答您的问题，请给出预期输入/输出的明确示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:28:16.380

以下正则表达式匹配您的示例中列出的所有情况：

```
@"(\bctu(?:'\w+)?\w*\b)" 
```

然后只需将匹配替换为上面匹配`@"<s>\1<e>"`的`\1`反向引用。

# c# - 工作线程上的 MessageBox

> ID：10283881
> 
> 赞同：5
> 
> 时间：2012-04-23T15:50:11.647
> 
> 标签：c#

我的应用程序有一个工作线程执行一些文件同步。

在同步过程中的某些条件下，我的工作线程需要决定是否继续。因此，我想我会通过显示一个对话框/消息框来征求用户反馈..（是/否）。这将导致工人继续或停止。

现在的问题是：
在非 UI 线程上显示消息框是否安全？
它可能会导致任何潜在问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:52:40.213

> 在非 UI 线程上显示消息框是否安全？

是的，它是安全的。`MessageBox.Show()`是一种静态线程安全方法。

> 它可能会导致任何潜在问题吗？

我认为不是这种情况。但是你确实阻塞了一个线程，而不是当你可以阻止它时你应该做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:53:18.377

MessageBox 不绑定到 UI。这是一个简单的 Win32 API 调用。您可以在任何线程上使用它。

# c# - 使用 DTO 保持干燥

> ID：10283883
> 
> 赞同：6
> 
> 时间：2012-04-23T15:50:22.567
> 
> 标签：c#, entity-framework, oop, dry

目前我正在为[FreeRADIUS](http://freeradius.org/)创建一个网络界面。它只是一个小应用程序，用于简化 Shell 和 SQL 懒惰的同事的突变。我为数据库创建了一个实体框架模型，并希望使用外观模式来封装它。所以我创建了一个名为**Account**的 DTO 类。它存储从三个不同表聚合的数据。这是 Account.cs 的样子：

```
public class Account
{
    public int? Id { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public string GroupName { get; set; }
    public string IpAddress { get; set; }
    public string Route { get; set; }
} 
```

这是我组装并返回单个 Account-DTO 的方法。

```
Account Get(string userName)
{
    // Get the values from the database.
    var check = _entities.Checks.Single(x => x.UserName == userName);
    var userGroup = _entities.UserGroups.Single(x => x.UserName == userName);
    var ipReply = _entities.Replies.Single(x => x.UserName == userName && x.Attribute == "Framed-IP-Address");
    var routeReply = _entities.Replies.Single(x => x.UserName == userName && x.Attribute == "Framed-Route");

    // Populate the DTO
    var account = new Account
    {
        UserName = check.UserName,
        Password = check.Value,
        GroupName = userGroup.GroupName
    };

    if (ipReply != null) account.IpAddress = ipReply.Value;
    if (routeReply != null) account.Route = routeReply.Value;

    return account;
} 
```

这是通过用户提交的 Account-DTO 更新数据库的方法

```
void Update(Account account)
{
    // Get the values from the database. Again.
    var check = _entities.Checks.Single(x => x.UserName == account.UserName);
    var userGroup = _entities.UserGroups.Single(x => x.UserName == account.UserName);
    var ipReply = _entities.Replies.Single(x => x.UserName == account.UserName && x.Attribute == "Framed-IP-Address");
    var routeReply = _entities.Replies.Single(x => x.UserName == account.UserName && x.Attribute == "Framed-Route");

    // Update the possible attributes
    check.Value = account.Password;
    userGroup.GroupName = account.GroupName;
    ipReply.Value = account.IpAddress;
    routeReply.Value = account.Route;

    _entities.SaveChanges();
} 
```

如您所见，我使用完全相同的代码从数据库中检索数据。我怎样才能干掉这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:21:51.483

为什么不简单地将共享代码提取到本地类

```
class AcccountFieldsByName {
// check, userGroup, ipReply, routeReply

    static AcccountFieldsByName Read(... _entities, string userName)    
    {
    return new AcccountFieldsByName {
        check = _entities.Checks.Single(x => x.UserName == userName),
        userGroup = _entities.UserGroups.Single(x => x.UserName == userName),
        ipReply = _entities.Replies.Single(x => x.UserName == userName && x.Attribute == "Framed-IP-Address"),
        routeReply = _entities.Replies.Single(x => x.UserName == userName && x.Attribute == "Framed-Route"),
        }
    }
} 
```

# python - 如何提高 OpenCV 模板匹配的准确性

> ID：10283884
> 
> 赞同：0
> 
> 时间：2012-04-23T15:50:26.063
> 
> 标签：python, image-processing, opencv

我尝试使用 MatchTemplate() 来匹配图像中的数字。例如，图像中的数字是 [0985-977-735]。结果如下：(number, location) [(0, 1), (3, 103), (5, 33), (5, 116), (7, 62), (7, 73), ( 7, 85), (8, 21), (9, 11), (9, 53)]

但在大多数情况下，准确度非常低。

[0983-945-180]: [(0, 113), (1, 93), (3, 31), (4, 62), (5, 74), (8, 103), (9, 11) , (9, 53)] 第一个零和八无法识别。

[0932-509-607] [(0, 103), (2, 31), (3, 21), (5, 54), (6, 92), (7, 113), (9, 72)]第一个，第二个零和前九个无法识别。

[0911-873-752] [(0, 1), (1, 22), (1, 33), (2, 113), (3, 72), (5, 105), (7, 92), (8, 52), (9, 11)] 前七个无法识别。

部分代码如下：

```
import cv
for i in range(10):
    template_im = cv.LoadImage(template_file, cv.CV_LOAD_IMAGE_GRAYSCALE)
    width = original_im.width - template_im.width + 1
    height = original_im.height - template_im.height +1
    result_image = cv.CreateImage((width, height), cv.IPL_DEPTH_32F, 1)
    cv.Zero(result_image)
    cv.MatchTemplate(original_im, template_im, result_image, cv.CV_TM_CCOEFF_NORMED)
    (_, R, _, max_loc) = cv.MinMaxLoc(result_image)

    if R < 0.90:
        pass
    else:
        phone_number_location.append((i, max_loc[0]))
        ...
        ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:33:50.353

您可能希望为此使用 SimpleCV。它是用python编写的。你需要的大部分东西都在里面。我只用 15 行代码编写了一个基本的图像拼接应用程序。希望这可以帮助。使用 github 中的代码，因为模板匹配在 SimpleCV 中是新的。希望这可以帮助。

# c - 在循环中执行后如何访问数组的第一个元素？

> ID：10283885
> 
> 赞同：1
> 
> 时间：2012-04-23T15:50:29.167
> 
> 标签：c, arrays

我想在循环完成执行后访问第一个数组元素。

我有一个存储一些数字的数组，例如 1、2、3、4、5。该数组始终使用索引 0 进行初始化，但我没有使用第 0 个索引来存储任何内容。

所以我想要的是使用像**1-2-3-4-5-1**这样的环形索引，如果我使用来自第 0 个索引的数组，比如**0-1-2-3-4-0**和模数运算，我可以实现这一点。

当我的数组索引从 1 开始时，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:54:22.527

您可以减一、做`%`和加一：

```
a[((i-1)%ARRAY_LEN)+1] 
```

`%`这说明了一个与惯例作斗争的问题：您需要减法、a和加法，而不是简单的运算`%`。与其与 C/C++ 约定作斗争，不如接受它以获得更高的效率和其他人的可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:54:39.890

嗯......当你增加索引时，你可以只使用逻辑而不是取模：

```
if (++index >= 6)
  index = 1; 
```

# java - 关于 Switch 条件语句

> ID：10283886
> 
> 赞同：-3
> 
> 时间：2012-04-23T15:50:29.250
> 
> 标签：java

我有以下我开发的代码..

```
public byte determineCardType(final IInput inputData) {
    byte cardType = UNKNOWN_CARD;
    try {
        if (isWagRewardsLoyaltyCard(inputData))
            cardType = WAG_LOYALTY_CARD_TYPE;
        else if (isDRCard(inputData))   //checking that card scanned and swiped is a DR Card
            cardType = DR_CARD_TYPE;      
        else if (isWagRewardsPartnerCard(inputData))
            cardType = AARP_CARD_TYPE;
        return cardType;
    } catch (Exception e) {
        return UNKNOWN_CARD;
    }
} 
```

请告诉我上面的代码可以在开关循环中调整，如果可以，请告知，提前谢谢。

链接到它的其他代码...

```
if((aarpCardSupport.isAARPCard(input))||(determineCardType(input)==DR_CARD_TYPE)) {
    return true;
} else if((isDRCard(input))&&(isDRLoayltyEnabled())) { //would return 1 for DR card only when isDRLoayltyEnabled returns true 
    return true;
}       
return false ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:57:58.523

Switch 不会帮助您，但条件表达式可以：

```
return isWagRewardsLoyaltyCard(inputData) ? WAG_LOYALTY_CARD_TYPE
     : isDRCard(inputData) ? DR_CARD_TYPE
     : isWagRewardsPartnerCard(inputData) ? AARP_CARD_TYPE
     : UNKNOWN_CARD; 
```

我强烈建议*不要*抓`Exception`，顺便说一句。如果必须，捕获*特定的*异常类型 - 尽管在这种情况下，我至少会在返回之前记录错误。

编辑：至于第二段代码，看起来你只是想要：

```
return aarpCardSupport.isAARPCard(input)
    || determineCardType(input) == DR_CARD_TYPE
    || (isDRCard(input) && isDRLoayltyEnabled); 
```

虽然当返回 true 时为什么`determineCardType(input)`会返回 DR_CARD_TYPE 以外的东西`isDRCard(input)`是一个谜......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:06:32.477

不要这样做。如果你必须这样做，你可以这样做：

```
public byte determineCardType (final IInput inputData) {
    byte cardType = UNKNOWN_CARD;
    try {
      switch (isWagRewardsLoyaltyCard (inputData) ? 1 : 
        (isDRCard (inputData) ? 2 : (isWagRewardsPartnerCard (inputData) ? 3 : 4)))
        {
            case 1: cardType = WAG_LOYALTY_CARD_TYPE; break;
            case 2: cardType = DR_CARD_TYPE; break;
            case 3: cardType = AARP_CARD_TYPE; break;
            default: // UNKNOWN_CARD already default
        }
        return cardType;
    } catch (CardException ce) {
      return UNKNOWN_CARD;
    }
  }
} 
```

但是由于您将 cardType 作为字节返回，因此您可以在设置类型后进行切换。此代码比您的代码更难阅读。Jons 的代码至少是精简的。

我看到您是 switch 语句的新手。所以我稍微详细说明一下。

如果您的输入是整数形式（int、byte、short、Enum），并且您可以将其与 - 主要是中等短的值列表匹配，则 switch 语句很有用。

如果您否则会使用一系列 if/else 语句。案例陈述不一定是互斥的，但大多数时候是互斥的。

在您的情况下，您调用了 3 个返回布尔值的方法，因此输入不是整数。但是你的输出是。

稍后在代码中，您可以编写：

```
 byte cardType = determineCardType (inputDate);
      switch (cardType)
      {
            case WAG_LOYALTY_CARD_TYPE: doWlct (foo, bar); break;
            case DR_CARD_TYPE:   doDct (); break;
            case AARP_CARD_TYPE: doAct (baz); foobar (); break;
            case UNKNOWN_CARD:   System.err.println ("Unknown card");
      } 
```

否则你必须写：

```
 if (cardType == WAG_LOYALTY_CARD_TYPE) 
           doWlct (foo, bar); 
      else if (cardType == DR_CARD_TYPE) 
           doDct ();
      else if (cardType == AARP_CARD_TYPE) {
           doAct (baz); 
           foobar ();
      }
      else ... 
```

由于 Java 1.7 也可以切换字符串，但在此之前，您只能切换整数类型，并且大小写标签必须在编译时保持字面上的常量和已知。

在 OOP 中，switch 语句经常被抛弃，取而代之的是动态调度。

```
interface Card {
    public abstract int authenticate (); 
}

class WagLoyalityCard implements Card {
    public int authenticate () {
       doWlct (foo, bar);
    }
}

class DrCard implements Card {
    public int authenticate () {
       doDct ();
    }
}

// ... and so on

Card card = new DrCard (); 
// authenticate:
card.authenticate (); 

// depending on the card type, DrCard.authenticate () or 
// WagCard.authenticate () gets called. 
```

# odata - 具有延迟执行的 ASP .NET Web API 可查询功能

> ID：10283889
> 
> 赞同：1
> 
> 时间：2012-04-23T15:50:54.290
> 
> 标签：odata, asp.net-mvc-4, asp.net-web-api

我的 api 方法是否应该始终绑定到底层数据源（ORM 的数据上下文）以公开支持 oData 的 Queryable 功能并受益于**Deferred Execution**？

片段

```
public class ProductController : ApiController { 
    public IQueryable<Product> Get() { 
        var dbContext = new DBContext(); 
        return dbContext.Product.AsQueryable(); 
    } 
} 
```

1.  如果我必须始终绑定，如果必须，我如何以及在哪里应用业务验证？例如：我想退回未过期的产品。
2.  直接暴露数据实体，是不是违反了关注点分离，做紧耦合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:07:20.563

您可以应用以下规则：

```
return dbContext.Product.Where(p=> !p.IsExpired).AsQueryable(); 
```

关于你的第二个问题，由你决定。如果您需要公开您的数据，那么您应该这样做。如果要公开数据*的备用视图*，可以创建一个*ViewModel*并公开它。

# jquery - 带有“隐藏延迟”的 jQuery 导航

> ID：10283892
> 
> 赞同：0
> 
> 时间：2012-04-23T15:51:13.643
> 
> 标签：jquery, html, css

我创建了以下导航（来源可以在我的目标和问题描述下方找到）。

**目标**

我希望得到的最终结果是：只要将导航点悬停，就会显示子导航。当您更改导航点时，所有其他主要导航（包括子导航）点应该直接隐藏，但是当您离开完整导航时，应该有几秒钟的延迟，然后一切都隐藏起来。

**问题**

当我在第一个点“主页”上导航时，子导航点“新闻”就会出现。一旦我离开“家”，就会有 250 毫秒的延迟，直到“新闻”消失，到目前为止一切都很好。

现在，如果我尝试将鼠标移动到子导航点“新闻”，当我离开第一个导航点“主页”时，它会隐藏在第二个导航点。

**HTML**

```
<div id="menu">
      <ul id="dropdown">
            <li>
                  <a href="#">Home</a>
                  <ul>
                        <li><a href="#">News</a></li>
                  </ul>
            </li>
            <li>
                  <a href="#">Navlevel 1</a>
                  <ul>
                        <li><a href="#">Navlevel 2</a></li>
                        <li>
                              <a href="#">Navlevel 2</a>
                              <ul>
                                    <li><a href="#">Navlevel 3</a></li>
                                    <li><a href="#">Navlevel 3</a></li>
                                    <li><a href="#">Navlevel 3</a></li>
                              </ul>
                        </li>
                  </ul>
            </li>
      </ul>
</div> 
```

**CSS**

```
/* NAVIGATION ELEMENTS */
ul#dropdown
{
    margin: 0;
    list-style: none;
    color: #FFFFFF;
}

ul#dropdown ul
{ 
    margin: 0;
    list-style: none;
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    border: 1px solid #000000;
}

ul#dropdown ul ul,ul#dropdown ul ul ul
{
    top: -1px;
    left: 100%;
    border: 1px solid #000000;
}

ul#dropdown li
{
    float: left;
    display: inline;
    position: relative;
    width: 165px;
    border-right: 1px solid #ffffff;
    line-height: 50px;
}

ul#dropdown ul li
{
    width: 100%;
    display: block;
    background-color: #e1e6e8;
    border: 0;
    height: 30px;
    line-height: 30px;
}

/* Root Menu */
ul#dropdown a
{
    float: left;
    display: block;
    color: #ffffff;
    text-decoration: none;
    width: 100%;
    text-align: center;
}

ul#dropdown li:hover a:hover
{
    font-weight: bold;
}

/* 2nd Menu */
ul#dropdown li:hover li a
{
    float: none;
    color: #ffffff;
    text-align: left;
    width: 153px;
    padding-left: 10px;
    color: #000000;
}

/* 2nd Menu Hover Persistence */
ul#dropdown li:hover li a:hover
{
    background-color: #aab6bb;
}
/* END NAVIGATION ELEMENTS */ 
```

**查询**

```
$('#dropdown li').mouseenter(function() {
      $('#dropdown li').not(this).children('ul').hide(); // Hide other child lists
      $(this).children('ul').show(); // Show this one
});
$('#dropdown').mouseleave(function() {
      var lists = $('li ul', this);
      setTimeout(function() {
            lists.hide(); // Hide all lists
      }, 250); // After 1/4 second
}); 
```

我希望有人可以帮助我解决这个问题。如果您需要任何其他信息，请告诉我。

非常感谢，罗尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:20:30.140

**更新（代码以及 jsfiddle URL）：** 这里是 jsfiddle 与所需结果 [http://jsfiddle.net/7PFDv/](http://jsfiddle.net/7PFDv/)

*我在您的 CSS 中添加的唯一内容是深色背景（以便可以看到导航）和以下内容*

```
ul#dropdown ul
{
    display: none;
} 
```

*我将您的 jquery 编辑为以下内容*

```
$('#dropdown li').mouseenter(function() {

      $(this).children('ul').show(); // Show this one
});

$('#dropdown>li').mouseleave(function() {

      //$(this).children('ul').hide(); // Show this one
    var lists = $(this).find('ul');
      setTimeout(function() {
            lists.hide(); // Hide all lists
      }, 250); // After 1/4 second

});

$('#dropdown>li li').mouseleave(function() {

      $(this).children('ul').hide(); // hide this one

}); 
```

# c# - 单例事件的异常处理

> ID：10283896
> 
> 赞同：1
> 
> 时间：2012-04-23T15:51:34.240
> 
> 标签：c#, exception, singleton

我正在为一个未以可接受的方式处理异常的全局事件管理器类使用单例模式。

如果在由正在执行的事件之一调用的代码中引发异常，我总是会收到`Exception has been thrown by the target of an invocation.`错误消息。此错误不包含与原始异常相关的信息，因此很难调试任何错误。

有没有办法将原始异常信息传回事件管理器？

```
public class ApplicationSettings
{
    private static EventManager _manager = new EventManager();

    public static EventManager EventManager
    {
        get { return _manager; }
    }
} 
```

事件管理器类：

```
public class EventManager
{
    public event EventHandler<ReportExecutionArgs> ExecuteReportCurrentPage;
    public event EventHandler<ReportExecutionArgs> ExecuteReportNewPage;

    public virtual void OnExecuteReportCurrentPage(object sender, ReportExecutionArgs e)
    {
        try
        {
            if (this.ExecuteReportCurrentPage != null)
                this.ExecuteReportCurrentPage(sender, e);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    public virtual void OnExecuteReportNewPage(object sender, ReportExecutionArgs e)
    {
        try
        {
            if (this.ExecuteReportNewPage != null)
                this.ExecuteReportNewPage(sender, e);
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }
} 
```

其他一些类将处理这些事件

```
ApplicationSettings.EventManager.ExecuteReportNewPage += new EventHandler<ReportExecutionArgs>(reportOpenedNewPage);

private void reportOpenedNewPage(object sender, ReportExecutionArgs e)
    {
        //something in this code throws an error
        LitePage page = new LitePage();
        _tabs.AddPage(page);
        Report report = setReport(page, e);
    } 
```

**编辑**

澄清一下，`OnExecuteReport`方法中的 try/catch 块没有捕获异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:54:21.320

像您描述的那样的A`TargetInvocationException`几乎总是在它的`InnerException`.

# iphone - 将 iphone 转换为 ipad 但旋转 ipad 时屏幕不会自动旋转

> ID：10283897
> 
> 赞同：1
> 
> 时间：2012-04-23T15:51:39.107
> 
> 标签：iphone, ios

我将基于标签栏的 iphone 应用程序转换为具有不同 ~ipad.xib 的 ipad 版本，唯一不同的是 ui 元素大小。现在我的问题是它不能在 ipad 版本中自动旋转屏幕，即我将 ipad 倒置，但 ui 不会倒置旋转。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:03:16.070

`shouldAutorotateToInterfaceOrientation:`您需要为选项卡栏中的所有视图控制器返回 YES，仅适用于 iPad ( `UI_INTERFACE_IDIOM()...`)。iPhone 控制器的默认代码可能仅在纵向时才返回 YES，如果这是您最初创建项目时选择的全部。

这是我用于这种情况的代码（iPhone，仅限纵向，iPad，所有方向）：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        return YES;
    else
        return toInterfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:00:53.140

标签栏控制器不能自动旋转。您必须旋转所有组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:56:08.323

如果是通用应用程序，您可以使用此代码完成您的任务

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    BOOL ret;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
        // iPad-specific code

    if (interfaceOrientation != UIInterfaceOrientationPortrait) {
        ret = YES;
    }else{
        ret = NO;
    }
    } else  {
        // iPhone-specific code

    ret = YES;
    }

 return ret;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T19:35:35.953

您需要修改“支持的设备方向”以包含您的新方向

# php - 在调用插件之前从 smarty 插件中打印分配的值

> ID：10283900
> 
> 赞同：0
> 
> 时间：2012-04-23T15:51:44.567
> 
> 标签：php, smarty, smarty3

我正在尝试围绕 smarty 开发一个广告系统。所以我想出了一个插件，当它在页面上吐出时看起来像这样：

```
{load_ad id=c4ca4238a0b923820dcc509a6f75849b} 
```

问题在于，在该函数内部，我有一个分配了名为 AD_HEAD 的变量。

现在 AD_HEAD 应该显示在标签上方。

所以一个基本的 html 看起来像这样：

```
<html>
<head>
{$AD_HEAD}
</head>
<body>
{load_ad id=c4ca4238a0b923820dcc509a6f75849b}
</body>
</html> 
```

如您所见，AD_HEAD 的位置高于 load_ad。

麻烦是因为它被放置得更高，它会保持空，但是当我把它放在更低的地方然后 load_ad 它会工作。

我怎样才能让它工作，或者我需要以不同的方式开发它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:29:34.780

你可以修改函数来`load_ad`分配两个 Smarty 变量吗？`{$AD_HEAD}``{$AD_BODY}`

然后你的 tpl 看起来像

```
<html>
<head>
{load_ad id=c4ca4238a0b923820dcc509a6f75849b}
{$AD_HEAD}
</head>
<body>
{$AD_BODY}
</body>
</html> 
```

# php - 剥离标签的 nodeValue 属性有多可靠，它与 strip_tags() 相比如何？

> ID：10283902
> 
> 赞同：0
> 
> 时间：2012-04-23T15:51:48.177
> 
> 标签：php, html, dom

```
<?php
function walkDOM($node)
{
    if (! isset($node->childNodes))
        return;

    for ($i = 0; $i < $node->childNodes->length; $i++) {

        $childNode = $node->childNodes->item($i);
        $childNodeName = $childNode->nodeName;

        echo $childNode->nodeName . " - " . $childNode->nodeType . 
             " - \"" . $childNode->nodeValue . "\"\n";
        walkDOM($childNode);
    }
}

function processHTML($s)
{
    $doc = new DOMDocument('1.0', 'UTF-8');
    $success = $doc->loadHTML($s);
    if (! $success) {
        echo "Load HTML failed.\n";
        exit(1);
    }
    echo "Loaded HTML: " . $doc->saveHTML() . "\n";
    walkDOM($doc);
}

$s = '<div>hello, <p>world<big>!</big></p></div>';
processHTML($s);
?> 
```

输出：

```
Loaded HTML: <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div>hello, <p>world<big>!</big></p></div></body></html>

html - 10 - ""
html - 1 - "hello, world!"
body - 1 - "hello, world!"
div - 1 - "hello, world!"
#text - 3 - "hello, "
p - 1 - "world!"
#text - 3 - "world"
big - 1 - "!"
#text - 3 - "!" 
```

从上面的代码和输出中，我们可以看到，当我们访问`nodeValue`any 的属性时，`DOMNode`我们得到了它的内部 HTML，所有标签都被剥离了。我可以使用它来过滤掉所有标签，如下所示：

```
$s = '<div>hello, <p>world<big>!</big></p></div>';
$doc = new DOMDocument('1.0', 'UTF-8');
$doc->loadHTML($s);
echo $doc->childNodes->item(1)->nodeValue . "\n"; 
```

输出：

```
hello, world! 
```

但我也可以这样做`strip_tags`：

```
$s = '<div>hello, <p>world<big>!</big></p></div>';
echo strip_tags($s) . "\n"; 
```

我有两个问题：

1.  将来我可以依靠这种`nodeValue`属性行为来剥离标签或做任何其他我能想象的事情吗？有没有隐藏的惊喜？
2.  使用`nodeValue`剥离标签与使用`strip_tags()`剥离标签有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:03:12.053

如果你只是想去掉标签，有什么复杂的？我认为使用 strip_tags() 函数更快，更好。此外，它可以采用第二个参数来指定不应剥离的标签。

# android - AsyncTask 作为不更新 UI 的众多步骤之一

> ID：10283904
> 
> 赞同：1
> 
> 时间：2012-04-23T15:51:57.483
> 
> 标签：android, android-asynctask

就我而言，我需要从网络中获取一些数据，对其进行处理，然后根据第一次网络查询的结果从网络中获取其他数据。但是，第一个查询可能会产生用户干预的需要......或者不是。

我了解 AsyncTask 如何运行，然后将其结果显示在 UI 对象中。但是，我应该如何将操作“链接”在一起，以便第一个 AsyncTask 派生对象在开始新操作之前正确死亡。

我的想法是，当调用 onPostExecute 时，如果我启动另一个基于 UI 的操作，它不会终止，直到基于 UI 的操作终止。

是否有正确的方法来完成 AsyncTask 进程，将结果发送给调用对象，清理，然后调用对象可以进行自己的处理？

还是我在这里无所事事？

* * *

**编辑：**请注意我的问题是关于 AsyncTask 后台处理以及如何正确使用它来避免执行堆栈溢出。我不是在问我是否应该使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:55:16.443

我认为您应该尝试为您的网络请求使用后台服务并相应地更新 UI。您可以使用意图服务进行网络操作并广播更新到活动以刷新 UI。希望能帮助到你。

编辑：另外，关于取消请求，我认为最好实现一个服务并使用 Activity 上的 bindService() 附加到它。这样，如果有取消请求，您可以通知服务停止它正在做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:57:35.203

基于 UI 的操作不应该（！）阻塞工作流，也许您应该使用 ViewSwitchers 或 BackgroundServices 并最近更新 UI，而不是阻塞某事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:12:14.557

经过大量搜索后，我发现最好的方法是使用消息处理程序。这意味着，在线程操作结束时，它会将带有结果的消息发布到 UI 代码（不是 UI 小部件注释），然后可以干净地终止。

这意味着轻量级和简单的实现。

# c# - Mono for Android 内存泄漏

> ID：10283905
> 
> 赞同：2
> 
> 时间：2012-04-23T15:52:21.613
> 
> 标签：c#, memory, memory-leaks, xamarin.android

我在 Mono for Android 中的垃圾收集器有问题，我正在研究它，并说我必须在每个 OnDestroy() 方法中手动放置 GC.Collect() 以释放我不使用的对象，我也在尝试为 Java.Lang.Objects 使用 Dispose，但应用程序仍在消耗和增加内存。我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T17:52:39.687

主要问题：这是一个实际问题吗？垃圾收集器本质上是不确定的，因此内存使用会发生很大变化。这不一定是问题。这只是事情的一部分。如果您经常用完全局引用或耗尽进程堆，那么这是一个问题。如果您只是看到 grefs 增加但当收集自然发生时它们减少，则可能不值得担心。

如果这是一个问题，我们需要有关问题所在的详细信息。例如，[Bitmap](http://androidapi.xamarin.com/?link=T:Android.Graphics.Bitmap)实例很容易[耗尽内存](http://lists.ximian.com/pipermail/monodroid/2012-April/009704.html)，[Bitmaps 的解决方案](http://lists.ximian.com/pipermail/monodroid/2012-April/009730.html)不一定适用于一般情况。

要获取更多信息，您可以启用[全局引用消息](http://developer.xamarin.com/guides/android/troubleshooting/troubleshooting/#Global_Reference_Messages)以查看何时创建和销毁全局引用。

此外，我们不断更新 GC 启发式方法。适用于 Android 4.1.0 的 Mono 引入了一项更改，`GC.Collet()`一旦我们达到平台最大 gref 值的 80%（模拟器上为 1800 gref）的 gref 阈值，就会自动调用该更改。这应该消除了对`OnDestroy()`call的大部分需求`GC.Collect()`，尽管（一如既往）GC 可能会在“不合时宜的时刻”启动，所以`GC.Collect()`无论如何，显式可能更可取。

# actionscript-3 - 如何取消选择 Flex 4 中的所有复选框

> ID：10283907
> 
> 赞同：0
> 
> 时间：2012-04-23T15:52:24.313
> 
> 标签：actionscript-3, apache-flex, checkbox, flex4, flex4.6

我正在尝试取消选择按钮单击时的所有复选框。我试过创建一个绑定的布尔变量，如下所示：

```
[Bindable]
public var allselected:Boolean; 
```

然后在我的复选框上：

```
<s:CheckBox selected="{allselected}" label="PT Identified" />
<s:CheckBox selected="{allselected}" label="Chart Reviewed"/>
<s:CheckBox selected="{allselected}" label="H&amp;P"/>
<s:CheckBox selected="{allselected}" label="Permit Signed"/> 
```

在一个单独的按钮上单击我将布尔变量设置为 false，并且在我已经检查了一个复选框之后没有任何反应。如果我将布尔变量设置为 true，则所有复选框都会被选中。所以，如果我想全选，那么它可以工作。但是，我想取消选择所有选中的复选框。

复选框仅位于 tilegroup 中，不在数据网格或数据组中。我认为有一种简单的方法可以做到这一点，但我还没有弄清楚。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:41:24.003

我有一个肮脏的解决方案。为复选框提供 id 并为按钮单击使用以下函数：

```
protected function untick_clickHandler(event:MouseEvent):void{
            cb1.selected=false;
            cb2.selected=false;
            cb3.selected=false;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:06:55.533

```
public function findChild(numChilds:int, parent:Object):void
        {
            for (var i:int = 0; i < numChilds; i++)
            {
                var obj:Object = parent.getChildAt(i);
                if(obj.hasOwnProperty('selected'))
                {
                    if(obj.selected == true)
                    {
                        obj.selected = false;
                    }
                }
                if (obj is DisplayObjectContainer)
                {
                    // search for children
                    var children:int = obj.numChildren;
                    findChild(children, obj);
                }
            }
        } 
```

用法：

```
var elems:int = checklistVgroup.numChildren;  // Get the number of elements

findChild(elems, checklistVgroup);            // Use our function 
```

# jsf - JSF 页面自动调用一个方法两次

> ID：10283908
> 
> 赞同：1
> 
> 时间：2012-04-23T15:52:24.363
> 
> 标签：jsf, primefaces, ejb

我对 JSF 有一个奇怪的问题。

我有一个调用方法来获取图像的 PrimeFaces GraphicImage。

现在，我已经编写了这个方法供这个组件使用，所以我希望它只被调用一次，但令人惊讶的是：在同一个页面中，这个方法被调用了两次，并且使用了不同的参数！

```
<pou:graphicImage rendered="true" height="150" style="border: 1px dotted; margin-left: 150px;" value="#{userDataBean.getAvatar()}" width="150"/>

public StreamedContent getImage(Utente u) throws IOException {
    File avatar = new File(FacesContext.getCurrentInstance().getExternalContext().getRealPath("/resources/images/no_avatar.png"));
    if (u.getFoto() == null) {
        return new DefaultStreamedContent(new ByteArrayInputStream(Files.readAllBytes(avatar.toPath())), "image/jpeg");
    }
    return new DefaultStreamedContent(new ByteArrayInputStream(u.getFoto()), "image/jpeg");
}

public StreamedContent getImage() throws IOException {
    return getImage(utente);
} 
```

因此，getImage(Utente u) 是一种可以正常工作的通用方法。

`utente`in`getImage()`是一个用户来自`#{request.getParameter('user')}`

现在，我使用此方法在用户的个人资料中显示头像。

问题是，当我打开个人资料页面时，`getImage()`被调用了两次：第一次，值是正确的，它加载了用户的头像。但它被第二次调用，这次`utente`取值为`#{loginBean.utente}`，即登录用户，导致这一行显示登录用户的头像，而不是我们要显示的用户的头像。

所以这里的问题是：我怎样才能阻止这个方法被调用一次，即使我只写了一次？

我不明白发生了什么：|

# asp.net-mvc - 实体框架 4.0 非映射标量属性 snafu

> ID：10283911
> 
> 赞同：0
> 
> 时间：2012-04-23T15:52:39.337
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我有一个返回（选择）实体集合的导入函数；但是，该函数返回表中不存在的附加列。我想将此列（仅用于选择操作）映射到 Entity 对象，所以我创建了一个部分类并对属性进行了编码，但是，我找不到将相关列映射到我在部分类中编码的属性的方法对于实体对象。我确实尝试通过 EDMX 设计器添加此属性，但出现错误：“未映射的属性：11009”，这是有道理的。我错过了什么？

**编辑**：“我找不到将相关列映射到我在部分类中为实体对象编码的属性的方法”

为了清楚起见：当我转到相关导入函数的“函数导入映射”时，我唯一可用的映射是那些可以与我试图将返回值映射到的表上的列相关联的映射；因为我要映射的列在表上不存在，没有什么可以映射到的。

# regex - Regexp.FindAllStringSubmatch()中，第二个参数是做什么的？

> ID：10283930
> 
> 赞同：3
> 
> 时间：2012-04-23T15:54:15.413
> 
> 标签：regex, go

在这种方法中：

```
func (re *Regexp) FindAllStringSubmatch(s string, n int) [][]string 
```

第二个参数有什么作用？我试过了：

```
re, _ := regexp.Compile("a")
rs := re.FindAllString("aaaaa, ", **1**) // 1 get one 'a', 2 get two 'a's, 3 get three 'a's ...
for _,v := range rs {
    fmt.Println(v)

} 
```

似乎第二个参数是关于它匹配的次数。我对吗？谁能给我一个肯定的答案？官方文档或一些链接是首选。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T16:08:41.290

[来自http://golang.org/pkg/regexp/](http://golang.org/pkg/regexp/)概述部分的引用：

> 如果存在“All”，则例程匹配整个表达式的连续非重叠匹配。与前一个匹配项相邻的空匹配项将被忽略。返回值是一个切片，其中包含相应的非“全部”例程的连续返回值。**这些例程采用一个额外的整数参数 n；如果 n >= 0，该函数最多返回 n 个匹配项/子匹配项。**

# javascript - 如何在用户脚本中创建一个挂钩来评估函数

> ID：10283939
> 
> 赞同：0
> 
> 时间：2012-04-23T11:45:28.507
> 
> 标签：javascript, dom, userscripts

我想计算用于动态解释 JavaScript 代码（例如**eval**和**setTimeout**）的函数调用的数量。我的主要目的是找到**作为参数传递给 eval 和 setTimeout 的字符串**。这是因为恶意脚本通常使用 eval 函数动态评估复杂代码。找到它的一种方法是挂钩该函数，以便可以触发对 eval 函数的每次调用。但我不知道该怎么做。请举例说明这一点。

我通常为 setTimeout 尝试过，但我没有得到正确的结果。

我的代码如下

`var sto = setTimeout; setTimeout = function setTimeout(str){
console.log(str);
}`

我的实际用户脚本是：

```
// ==UserScript==
// @encoding    UTF-8 
// @name        Count_setTimeout
// @run-at      document-start
// ==/UserScript==
addJS_Node("var count=0;");
function Log_StimeoutCreations ()
{
  var sto = setTimeout;
  setTimeout = function(arg, time) 
  {
     if(typeof arg == "string")
        console.log("Insecure setTimeout: ", arg);
     else
        console.log("setTimeout:",arg);   
     count++;
     sto(arg, time);    
  }
}
var waitForDomInterval = setInterval (
function () {
    var domPresentNode;
    if (typeof document.head == "undefined")
        domPresentNode = document.querySelector ("head, body");
    else
        domPresentNode = document.head;
    if (domPresentNode) {
        clearInterval (waitForDomInterval);
        addJS_Node (null, null, Log_StimeoutCreations);           
    }
},
1
);
function addJS_Node (text, s_URL, funcToRun) {
var D                                   = document;
var scriptNode                          = D.createElement ('script');
scriptNode.type                         = "text/javascript";
if (text)       scriptNode.textContent  = text;
if (s_URL)      scriptNode.src          = s_URL;
if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';
var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
targ.appendChild (scriptNode);
}
addJS_Node("document.onreadystatechange = function (){if (document.readyState == 'complete'){if(typeof(unsafeWindow)=='undefined') { unsafeWindow=window; } unsafeWindow.console.log('count--'+count);}}"); 
```

但我什至没有在源代码中查看 setTimeout 函数。此外，我如何实现这一点通过这我将获得内部 eval 函数，即，`eval(eval());`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:28:31.633

你基本上是对的。这是我的代码：

```
var sto = setTimeout;

setTimeout = function(arg, time) {
    if(typeof arg == "string")
        console.warn("Insecure setTimeout: ", arg);

    // call real setTimeout
    sto(arg, time);
}

// ...now all future setTimeout calls will warn about string use...
setTimeout("alert(1);", 1000); 
```

如果你想对它超级正确，而不是留`sto`在允许访问原始的全局命名空间中`setTimeout`，请使用闭包：

```
(function() {
    var sto = setTimeout;
    setTimeout = function(arg, time) {
        if(typeof arg == "string")
            console.warn("Insecure setTimeout!", arg);

        sto(arg, time);
    }
})(); 
```

这样，real`setTimeout`是完全不可访问`sto`的，因为一旦匿名函数结束就不可访问，除非在新的`setTimeout`包装器内。

# c# - FluentValidation：使用 ValidationContext 进行验证

> ID：10283946
> 
> 赞同：3
> 
> 时间：2012-04-23T15:54:46.847
> 
> 标签：c#, validation, mvvm, .net-4.0, fluentvalidation

我在当前项目中使用 FluentValidation。

最近我偶然发现了 AbstractValidators 验证方法

```
ValidationResult IValidator.Validate(ValidationContext<T> validationContext) 
```

我没有找到任何关于为什么要使用这种方法的用例。何时以及如何使用此方法进行验证？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T18:33:10.840

已经有一段时间了，但我不想阻止 Jeremy Skinners 回答我在[Codeplex](http://fluentvalidation.codeplex.com/discussions/353507)上的问题：

> 这个 [验证上下文] 由 FluentValidation 在内部使用。了解其工作原理的最佳机会是实际阅读源代码。这是一个快速的总结：
> 
> 属性链跟踪规则的嵌套深度，例如 customer.Address.Line1
> 
> Ivalidatorselector 用于确定应该运行哪些规则。例如，当您只选择验证特定属性时，这将由不同的 ValidatorSelector 处理。
> 
> 杰里米·斯金纳

# git - git, gitolite 错误推送

> ID：10283947
> 
> 赞同：18
> 
> 时间：2012-04-23T15:54:49.220
> 
> 标签：git, gitolite

我刚刚安装了 gitolite，但是当我推送存储库 gitolite-admin 时出现错误：

```
git push
Counting objects: 9, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (7/7), 605 bytes, done.
Total 7 (delta 1), reused 0 (delta 0)
remote: Empty compile time value given to use lib at hooks/update line 6
remote: Use of uninitialized value in require at hooks/update line 7.
remote: Can't locate Gitolite/Hooks/Update.pm in @INC (@INC contains:  /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .) at hooks/update line 7.
remote: BEGIN failed--compilation aborted at hooks/update line 7.
remote: error: hook declined to update refs/heads/master
To ssh://admin@192.168.0.26/home/admin/repositories/gitolite-admin.git
! [remote rejected] master -> master (hook declined)
error: failed to push some refs to   'ssh://admin@192.168.0.26/home/admin/repositories/gitolite-admin.git' 
```

我不知道我必须做什么。

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T15:58:54.240

谷歌搜索“在挂钩/更新时为使用 lib 提供的空编译时间值”，第一个结果在[Gitolite 常见问题解答](http://sitaramc.github.com/gitolite/emergencies.html#ce)中：

> 你绕过了gitolite。您使用完整路径（即，包括 repositories/ 前缀）克隆了 repo，可以直接在服务器上，也可以通过 ssh 但使用一个可以访问 shell 的密钥。
> 
> 解决方案：与上一个项目符号相同。

上一个项目符号：

> 为 gitolite 使用不同的密钥对。设置页面中有稍长的讨论。另请参阅[为什么绕过会导致问题](http://sitaramc.github.com/gitolite/sts.html#ybpfail) 以及[ssh](http://sitaramc.github.com/gitolite/ssh.html)中的两个文档作为背景。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-28T13:58:22.363

*开始之前：**gitbox**是安装了 git 和 gitolite 的远程机器。**git**用户是 gitolite 在 gitbox 上运行的用户。*

您可以通过 (1) 生成新的密钥对，(2) 在 gitbox 上注册公钥，以及 (3) 通过确保在连接到 gitbox 时始终以**git**用户身份使用您的新的私钥。

对于忍者来说，这可能就足够了。其余的，这里有更多细节：

**步骤 1) 生成新的密钥对**

大多数 IDE 都能够创建新的公钥/私钥对。或者，如果可以访问 Linux 机器，您可以使用以下方法生成自己的机器：

```
ssh-keygen -t rsa -f john_git_rsa 
```

输出将是一组私有（**john_git_rsa**）和公共（**john_git_rsa.pub**）密钥（又名密钥对）。在下一步中，您需要将公钥复制到 gitbox。

**步骤 2) 在 gitbox 上注册新的公钥**

您可以通过 Google 快速搜索了解如何使用 git 管理 gitolite-admin。简而言之，步骤是：（1）克隆 gitolite-admin 存储库；（2）将新的公钥添加到gitolite-admin/keydir/目录；(3) 将更改推送回 gitolite-admin 存储库。推送会触发 gitbox 将 keydir/ 文件夹中的任何新密钥注册到 gitbox 的 git 用户的授权用户列表中。

您的 gitbox 现在已准备好使用**john_git_rsa**私钥接受来自**git**用户身份验证的新连接。

 ****步骤 3) 确保您与 gitbox 的连接使用 git 用户和新私钥**

如果您使用终端连接到 gitbox，请编辑/创建 ~/.ssh/config 文件以包含一个别名，该别名预先配置您与 gitbox 的连接。别名如下所示：

```
Host gitbox
   User git
   Hostname yourgitbox.com
   Port 22
   IdentityFile ~/.ssh/john_git_rsa 
```

现在，执行 >git clone gitbox:reponame.git 或 >git push gitbox:reponame.git 等命令可确保您使用的是 git 用户和适当的私钥。如果没有这个别名，您将不得不执行类似 >git clone ssh://git@yourgitbox.com:22/reponame.git 之类的操作，并找出用于指定要使用的私钥的 ssh 开关 - 不漂亮。*（注意：如果您不使用此别名进行连接，则将使用您的默认 ssh 密钥，并且您将收到权限错误。）*

**或者**，如果您使用 IDE（NetBeans、Eclipse 等）：

您需要找到 IDE 的 SSH 设置并将它们设置为使用您创建的新私钥 (john_git_rsa)，而不是在安装期间生成的默认密钥。您还需要确保推送存储库的 URI 设置为：

```
ssh://git@yourgitbox.com:22/reponame.git 
```

用户名设置为**git**，密码字段为空。这确保当您连接到 gitbox 时，您的 IDE 将提供您刚刚设置的私钥和 git 用户。

现在你的推送应该起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T11:26:31.293

#roberthernandez 的评论非常好，但我想对此添加一些强调。我安装 gitolite（当然还有推送）的大问题在于检查，'~/bin' 目录是否在 PATH 环境变量中。我们需要`export PATH=$PATH:~/bin`用于设置此设置。我认为如果没有这个选项，gitolite 将无法执行他的流程，并且在向您推送时遇到问题。另外，之后您可以`gilotile setup ...`使用`bin/gitolite setup ...`.**

# .htaccess - .htaccess 从域的子目录重写到不同域的子目录

> ID：10283953
> 
> 赞同：1
> 
> 时间：2012-04-23T15:54:59.133
> 
> 标签：.htaccess, mod-rewrite

好的，我发现了一些与非常相似的问题有关的线程，但是使用为我自己的网站提供的答案没有任何运气。基本上我有 2 个站点，映射如下：

```
/public_html/ - points to main domain (www.site1.com)
/public_html/site2.com - points to secondary domain (www.site2.com)
/public_html/portal - points to my target subdirectory 
```

我正在尝试获取对 www.site2.com/portal 的所有请求以透明地加载 www.site1.com/portal，也就是说，我仍然希望 www.site2.com/portal 显示在地址栏中。

```
RewriteCond %{HTTP_HOST} ^(www\.)?site2\.com [NC]
RewriteCond %{REQUEST_URI} ^/portal/(.*)$
RewriteRule ^/(.*) /portal/$1 [L] 
```

根本不起作用

```
RewriteCond %{HTTP_HOST} ^(www\.)?site2\.com$ [NC]
RewriteCond %{REQUEST_URI} ^/portal/(.*)$
RewriteRule ^(.*)$ http://site1.com/portal/$1 [L] 
```

带我到[http://site1.com/portal/site2.com/portal](http://site1.com/portal/site2.com/portal)。

这几天我一直在用头撞墙，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:15:32.613

除非您在 httpd.conf 中启用 mod_proxy，否则您当前的设置将不支持您尝试获取的内容。因此，您可以使用以下 2 个选项：

### 选项 1：启用 mod_proxy 并保留当前目录结构

将此代码放在您`.htaccess`的`public_html/site2.com`目录下：

```
RewriteCond %{HTTP_HOST} ^(www\.)?site2\.com$ [NC]
RewriteRule ^(portal/.*)$ http://site1.com/$1 [L,NC,P] 
```

### 选项 2：保留当前目录结构并创建一个符号链接，如下所示：

```
/path-to/public_html/site2.com/portal -> /path-to/public_html/portal 
```

然后将此代码放在您`.htaccess`的`public_html/site2.com`目录下：

```
Options +FollowSymLinks -MultiViews 
```

恕我直言，选项 #2 对您来说会容易得多，因为它只需要创建一个符号链接（我相信您使用的是`*nix`.

# tsql - 查找过去几个小时内的记录 T-SQL

> ID：10283957
> 
> 赞同：1
> 
> 时间：2012-04-23T15:55:19.117
> 
> 标签：tsql

某个客户在过去 3 小时内获取所有记录的最佳方法是什么？我不太确定如何设置这个sql？

图式

CustID varchar AddressID varchar DateCreated 日期时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:59:08.890

```
SELECT C.* 
FROM Customer C
WHERE C.DateCreated > DATEADD(hour, -3, GetDate()) 
```

*   [添加日期](http://msdn.microsoft.com/en-us/library/ms186819.aspx)
*   [获取日期](http://msdn.microsoft.com/en-us/library/ms188383.aspx)

**编辑**：`"past 3 hours by a certain customer"`

```
SELECT C.* 
FROM Customer C
WHERE C.CustID = @CustID
AND C.DateCreated > DATEADD(hour, -3, GetDate()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T15:56:41.260

您可以使用的一项功能是`DATEADD`. 下面的 T-SQL 将从 MyTable 中获取所有行，其中 MyColumn 的值大于或等于当前日期/时间减去 3 小时。

```
SELECT * 
FROM MyTable 
WHERE MyColumn >= DATEADD(hh,-3,GETDATE()) 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms186819.aspx)了解有关 DATEADD的更多信息。

# java - 添加条件以进行子选择？

> ID：10283963
> 
> 赞同：0
> 
> 时间：2012-04-23T15:55:56.997
> 
> 标签：java, hibernate, criteria, hibernate-criteria

使用基于 Hibernate Criteria 的查询，您可以将条件添加到子选择中吗？

具体来说，开发人员具有以下代码；

```
 criteria.setFetchMode("user", FetchMode.JOIN).add(
                Restrictions.eq("company.id", companyId)); 
```

他们的意图是这样的；

```
select a.* from tableA a where a.user in 
        (select b.user from tableB b where b.companyId = 'companyId') 
```

IE '从该表中选择所有记录，该用户在用户集中具有 companyId = 'companyId' 的用户，详见另一个表。

但是，上述基于 Criteria 的语句没有按预期工作，我相信 setFetchMode 返回的标准与调用它的标准相同，并且 add 语句将 company.id = companyId 子句添加到整个 Criteria（即 tableA）。

他们的意思是让这个“添加”语句应用于 FetchMode（即子选择）而不是 fetchmode 随后作用的 Criteria。

没有使用休眠标准语句的经验，我不确定这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:01:36.457

您可以使用别名完成您尝试做的事情：

```
 criteria.setFetchMode("user", FetchMode.JOIN).createAlias("company","c").add(
                Restrictions.eq("c.id", companyId)); 
```

查看休眠文档的[这一部分以获取更多信息](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html#querycriteria-associations)

# c++ - 使用 RapidXml 解析日文汉字时出错

> ID：10283965
> 
> 赞同：0
> 
> 时间：2012-04-23T15:56:07.860
> 
> 标签：c++, xml, unicode, xml-parsing, rapidxml

当我尝试解析包含特定汉字的 xml 文件时遇到问题：

退

经过调试，我发现问题出在 RapidXml 的这个函数上：

```
struct text_pure_no_ws_pred
{
    static unsigned char test(Ch ch)
    {
        return internal::lookup_tables<0>::lookup_text_pure_no_ws[static_cast<unsigned char>(ch)];
    }
};

const unsigned char lookup_tables<Dummy>::lookup_text_pure_no_ws[256] = 
    {
      // 0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
         0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 0
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 1
         1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 2
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  // 3
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 4
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 5
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 6
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 7
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 8
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // 9
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // A
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // B
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // C
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // D
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  // E
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1   // F
    }; 
```

其中 ch 是汉字退。此函数返回 false。为什么？对于所有其他字符，它返回 true。你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:23:37.857

看起来 Ch 包含一个 Unicode 值。 `static_cast<unsigned char>(0x9000)`为 0。

您需要一个包含超过 256 个值的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:31:44.297

RapidXML 不支持仅 UTF-8 的完整 Unicode。

[http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1character_types_and_encodings](http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1character_types_and_encodings)

~~请参阅：[Rapidxml 和 UTF8](https://stackoverflow.com/questions/4352224/rapidxml-and-utf8)~~

您唯一的选择是：将汉字转换为 UTF-8 并希望它能正常工作。转换为非 Unicode 代码页并希望它适用于 RapidXML。

# c# - LINQ - 对列表进行分组 通过同样是 List 的属性

> ID：10283966
> 
> 赞同：2
> 
> 时间：2012-04-23T15:56:08.137
> 
> 标签：c#, linq, group-by

```
public class Product {
    public List<DateTime> FailureDates { get; set; }
} 
```

我有一个`List<Product>`，然后我试图根据一个`List<DateTime>`在图表中使用的分组。分组应该基于 DateTime 对象的年份。所以我希望最终结果看起来像：

**按年份划分的故障总数**

2012: 1,

2011：5，

2010：3

... 等等。

在 DateTime 对象成为具有以下代码的列表之前，我最初有此工作：

```
return Json.Encode(Products.Where(s => s.FailureDate != DateTime.MinValue).GroupBy(s => s.FailureDate.Year).Select(s => new { Year = s.Key.ToString(), FailureCount = s.Count() }).ToArray()); 
```

但是，现在 DateTime 是一个列表，所以我不确定如何对它进行分组。我认为需要进行合并才能使其正常工作，因此也许 LINQ 代码最终会变得过于混乱，我最好使用非 LINQ 解决方案（例如，遍历我的产品，然后遍历我的日期和建立一个字典来跟踪计数）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T16:00:43.327

这对你有用。

```
var query = from p in Products
            from f in p.FailureDates 
            where f != DateTime.MinValue
            group f by f.Year into g
            select new
            {
              Year = g.Key.ToString(),
              FailureCount = g.Count(),
            } 
```

或者要使用您的示例，只需在这样的产品上添加 SelectMany

```
return Json.Encode(Products.SelectMany(p => p.FailureDates)
                           .Where(s => s != DateTime.MinValue)
                           .GroupBy(s => s.Year)
                           .Select(s => new { Year = s.Key.ToString(), FailureCount = s.Count() }).ToArray()); 
```

# jquery - JSONP+jQuery : 由于错误 80020101 无法完成操作

> ID：10283968
> 
> 赞同：0
> 
> 时间：2012-04-23T15:56:15.923
> 
> 标签：jquery, wcf, jsonp

我有一个 WCF JSONP 服务，我正在尝试使用 jQuery (v 1.7.2)。

服务器端代码：

```
[OperationContract]
[WebGet(BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]

[JSONPBehavior(callback = "method")]
List<string> GetList()
{
    return new List<string> {"test1", "test2"};
} 
```

客户端代码：

```
function showList()
    {
        $.ajax({
            url: 'http://mysite/myservice.svc/GetList',
            dataType: 'jsonp',
            data: { },
            contentType: "application/json",
            success: function (m)
            {
                debugger;
            },
            error: function (err)
            {
                debugger;
            }
            });
        } 
```

发生的情况是：调用了“错误”回调，当我检查`err`参数时，它`err.responseText`包含正确的 JSON 响应：`{"GetListResult":["test1","test2"]}`

为了查看发生了什么，我开始调试 jQuery 本身，我看到的是它无法转换结果`ajaxConvert`方法：

jQuery 1.7.2（未最小化），第 7511 行：`success = ajaxConvert( s, response );`那些异常`Could not complete the operation due to error 80020101.`。

当我单步执行时`ajaxConvert`，我看到它试图做的事情`jQuery.globalEval(response)`会引发上述异常。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:36:02.613

我不知道您是否找到了解决方案，但这可能会有所帮助。我遇到了同样的问题，并用调试器跟踪了事情。我最终发现原因是查询字符串参数。一旦我从 web 服务调用中删除了查询字符串参数，一切都正常了。我希望这有帮助

[http://senseicris.wordpress.com/2012/05/19/jquery-error-80020101-a-fix](http://senseicris.wordpress.com/2012/05/19/jquery-error-80020101-a-fix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:31:43.223

JSON 输出是否包含在回调函数中？JSONP 的一个关键部分是它本质上将 json 数据传递给在 javascript 范围内执行的函数。

函数的名称应该由 jQuery 自动附加到请求 URL 上，即请求应该是：`http://mysite/myservice.svc/GetList?callback=jQuery_random1231`

那么你的 JSONP 输出应该是这样的：

```
jQuery_random1231({ key: 'value', key1: 'value1' .. }); 
```

您的后端显然必须满足这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:40:09.137

我认为问题在于您的服务没有返回 JSONP，而是返回 JSON。eval 函数尝试将字符串评估为 JavaScript 代码 - 如果那将是 JSONP 格式，则该函数将通过评估成功。实际的 JSONP 响应应该是：method({"GetListResult":["test1","test2"]})。

[我想您在这里使用的是 MSDN 示例](http://msdn.microsoft.com/en-us/library/cc716898%28v=vs.90%29.aspx)中的 JSONPBehavior 。

您可以尝试调试该行为以查看它是否正常工作。我个人在将原始流序列化为 JSONP 时遇到了这个类的问题。

如果您在 .NET 4 中，则不再需要使用此行为。您可以改为在 web.config 中更改绑定的配置：

```
<binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" /> 
```

您可能会尝试的另一件事是使用[getJson](http://api.jquery.com/jQuery.getJSON/)方法而不是 ajax 方法。我将那个与 JSONP 一起使用，它可以工作。

干杯，简

# ravendb - RavenDB：如何在我的单元测试中使用 RavenProfiler？

> ID：10283974
> 
> 赞同：1
> 
> 时间：2012-04-23T15:56:43.100
> 
> 标签：ravendb, nancy

我正在使用 NancyFX + RavenDB。我目前正在尝试实施 Ayende 推荐的[非规范化引用](http://ayende.com/blog/4584/ravendb-includes)技术，以从 AggregateRoot 构建域引用。如果您阅读该链接，您会发现诀窍是加载父实例，然后使用 RavenDB 的“包含”语句预取引用的实例。

我已经完成了所有这一切，它似乎可以工作，但我正在努力通过单元测试来确定引用的实例是否真的是预取的。这是我的单元测试中的一个片段来说明：

```
[Fact]
public void Should_preload_the_mentor_mentee_references_to_improve_performance()
{
    //Given
    var db = Fake.Db();
    var mentor = Fake.Mentor(db);
    var mentee = Fake.Mentee(db);
    var relationship = Fake.Relationship(mentor, mentee, db);

    //When
    relationship = db
        .Include("Mentor.Id")
        .Include("Mentee.Id")
        .Load<Relationship>(relationship.Id);
    mentor = db.Load<User>(relationship.Mentor.Id);
    mentee = db.Load<User>(relationship.Mentee.Id);

    //Then
    relationship.ShouldNotBe(null);
    mentor.ShouldNotBe(null);
    mentee.ShouldNotBe(null);
} 
```

上面的单元测试检查我是否可以从我的假数据库（它是 RavenDB 的内存中嵌入式实例）加载我的实例，但它不检查它们是否是预取的。

我想也许我可以使用 RavenProfiler。也许这会计算我可以断言的数据库请求的数量（例如，如果请求> 1，上面的单元测试将失败）。

为了完成这项工作，我必须将 MVCIntegration 包安装到我的单元测试项目中（哎哟）

```
PM> install-package RavenDB.Client.MvcIntegration 
```

我还必须添加对 System.Web 的引用，这让我不寒而栗。我认为这行不通。

然后我将适当的初始化添加到我的 Fake db 提供程序中，如下所示：

```
public class InMemoryRavenSessionProvider : IRavenSessionProvider
{
    private static IDocumentStore documentStore;

    public static IDocumentStore DocumentStore { get { return (documentStore ?? (documentStore = CreateDocumentStore())); } }

    private static IDocumentStore CreateDocumentStore()
    {
        var store = new EmbeddableDocumentStore { RunInMemory = true};
        store.Initialize();
        store.Conventions.IdentityPartsSeparator = "-";
        RavenProfiler.InitializeFor(store); //<-- Here is the Profiler line
        return store;
    }

    public IDocumentSession GetSession()
    {
        return DocumentStore.OpenSession();
    }
} 
```

最后，我尝试在单元测试结束时从 RavenProfiler 检索某种值：

```
var requests = RavenProfiler.CurrentRequestSessions(); 
```

这没有用！它在 RavenProfiler 中失败了，因为 HttpContext 为空——这就是我对 System.Web 的预感。那好吧。

那么，如何计算对我的 RavenDB 实例发出的请求数？这是否可以在不需要 MVC 或 System.Web 的情况下完成，因此可以轻松地将其固定到单元测试中？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:51:45.777

您可以为此使用以下代码：

```
session.Advanced.NumberOfRequests 
```

RavenDB 分析器不会针对嵌入式文档存储运行。

你也可以看看 Raven 源代码中的单元测试，[他们测试这个场景](https://github.com/ayende/ravendb/blob/master/Raven.Tests/Bugs/Includes.cs#L66)。

# javascript - HTML 5 视频切换器无法在 Safari 或 IE 9 中播放

> ID：10283977
> 
> 赞同：1
> 
> 时间：2012-04-23T15:56:46.120
> 
> 标签：javascript, html, html5-video, dom-events

我已经构建了一个非常简单的 HTML 5 视频切换器，它在 Firefox 和 Chrome 中运行良好。`load()`我可以看到 src 值根据需要发生变化，但触发和/或`play()`事件似乎存在问题。我已经进行了编辑`.htaccess`以确保 mime 类型并将视频的路径更改为直接 http 链接。我很确定问题在于加载/播放功能的简单程度，但我正在努力解决此问题或在线查找可靠的文档。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
var videos = new Array();

videos[0] = [
         "poster1.png",
         "video1.mp4",
         "video1.ogv"
         ];
videos[1] = [
         "poster2.png",
         "video2.mp4",
         "video2.ogv"
         ];
videos[2] = [
         "poster3.png",
         "video3.mp4",
         "video3.ogv"
         ];
videos[3] = [
         "poster4.png",
         "video4.mp4",
         "video4.ogv"
         ];

function switchVideo(n) {
    if (n >= videos.length) n = 0;

    var video = $("#video");
    var mp4 = $("#mp4");
    var ogv = $("#ogv");

    video.attr("poster", videos[n][0]);
    mp4.attr("src", videos[n][1]);
    ogv.attr("src", videos[n][2]);

    loadVid();
}

function loadVid() {
    document.getElementById("video").load();
    document.getElementById("video").play();
}
</script>

<div>
<video id="video" poster="poster1.png" height="445px" width="900px" preload>

  <source id="mp4" src="video1.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
  <source id="ogv"  src="video1.ogv" type='video/ogg; codecs="theora, vorbis"'>

  <p>Your user agent does not support the HTML5 Video element.</p>

</video><br>

  <button onClick="switchVideo(0);">Video 1</button>
  <button onClick="switchVideo(1);">Video 2</button>
  <button onClick="switchVideo(2);">Video 3</button>
  <button onClick="switchVideo(3);">Video 4</button>

</div> 
```

# c# - 水晶报表“文件名无效。” 问题

> ID：10283978
> 
> 赞同：4
> 
> 时间：2012-04-23T15:56:47.873
> 
> 标签：c#, visual-studio-2008, crystal-reports-2008

我已经上传了我的 WebApplication 。我的应用程序在带有 Crystal Reports 2008 sp3 的 VS2008 中。我已经上传到并行丛服务器上。我已经在 Bin 文件夹中添加了所有水晶报表所需的 Dll。我的报告路径也是正确的。

我收到的错误是

```
Line 41:         ReportDocument myreport = new ReportDocument();
Line 42:         string reportPath = Server.MapPath("~/CrystalReport.rpt");
Line 43:         myreport.Load(reportPath);
Line 44: 
Line 45:         myreport.SetDataSource(ds);

[COMException (0x800001fb): Invalid file name.]
   CrystalDecisions.ReportAppServer.ClientDoc.ReportClientDocumentClass.Open(Object& DocumentPath, Int32 Options) +0
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.Open(Object& DocumentPath, Int32 Options) +95
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +356

[CrystalReportsException: Load report failed.]
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +418
   CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename, OpenReportMethod openMethod, Int16 parentJob) +895
   CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename) +84
   _Default.CreateReport() in d:\inetpub\vhosts\mydomain.in\subdomains\mysubdomain\httpdocs\Default.aspx.cs:43
   _Default.Page_Load(Object sender, EventArgs e) in d:\inetpub\vhosts\mydomain.in\subdomains\mysubdomain\httpdocs\Default.aspx.cs:21
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

我无法获取错误所在的位置。报告位于根文件夹本身中。所以这有什么问题。还有另一个文件夹 aspnet_client。这是我们需要做的吗？

请耐心等待回复

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T06:29:14.873

同样的问题让我头疼了好一阵子。现在我找到了答案:)

转到`c:\windows\temp` 文件夹并在其上`properties->security` 添加新用户“ `IIS_IUSRS`”并赋予其完整/读写能力。

它为我解决了这个问题。

希望它也适合你:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T16:55:20.117

这是要检查的东西。

您收到此错误是因为**文件名、路径**无效或 CR 无法访问该文件。

如果路径和文件名正常，那么您需要确保**网络服务对您的****Temp**文件夹具有**读/写**权限（通常）。**`C:\windows\Temp`**

 **如果它仍然不能解决问题，那么您的 Temp 文件夹可能已满并且 CR 没有清理垃圾。

如果是这种情况，那么您需要确保您正在适当地**处理**您的 Report 对象并调用**GC**来清理它。

有时 CR 的行为不可预测。我以一种艰难的方式了解到这一点，即使您在`ReportDocument`对象上调用 dispose，然后`GC.Collect()`仍然没有清理**Temp**`.rpt`文件夹中的文件。没有限制。.rpt 文件在 Temp 文件夹中，之后 CR 停止执行进一步的报告请求。

 **奇怪的是，当您`ReportDocument`在函数或事件处理程序中声明对象时，就会发生这种情况。但是，如果您在**页面范围的全局范围内**声明您的 ReportDocument，那么当您调用 Dispose 方法时，水晶报告会愉快地清理临时 .rpt 文件！

我希望这会给您一些解决问题的见解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T07:17:39.653

还要检查的是所有适当的 IIS 角色服务都已添加到服务器上。我们在新安装的生产服务器上发现了同样的问题，但在我们的本地开发环境中没有。事实证明，IIS 是作为服务器角色添加的，但 ASP.NET 和服务器端包含没有作为角色服务添加，因此 Crystal Report Viewer 没有呈现任何报表。

如果您运行的是 Windows Server 2008，则可以通过服务器管理器工具管理这些角色和角色服务。****

# sql - 每晚执行 PostgreSQL 脚本

> ID：10283979
> 
> 赞同：5
> 
> 时间：2012-04-23T15:56:51.590
> 
> 标签：sql, postgresql, crontab, materialized-views

我正在尝试根据[valena.com](http://www.varlena.com/GeneralBits/Tidbits/matviews.html)上的这篇文章模仿快照**物化视图**，并创建了我需要的物化视图。

我的下一个任务是在 PostgreSQL 中每晚执行刷新物化视图脚本。我正在使用 pgAdmin，发现我需要在我的数据库服务器 (Linux) 上安装 pgagent 并通过编写 pgscript 在 pgAdmin 中创建作业。

这是我需要的，还是有更好的方法来每晚运行这个脚本？

```
 for all i in tables that begin with name 'mview_%'
   SELECT refresh_matview(i);
 end loop; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T16:14:27.137

我刚刚在我的 crontab 中放置了一个条目：

```
*/3 * * * * /scripts/matviewsRefresh.sh 
```

这会每三分钟调用一次脚本，您可以对其进行调整。在里面`matviewsRefresh.sh`：

```
 echo 'select matview_refresh_all();' | su - postgres -c "psql MYDBNAME" 
```

当然，`matview_refresh_all`是一个pl/pgsql函数，循环我所有的物化视图，刷新旧的（我加了一个辅助表，记录每个mview最后一次刷新的时间，每个刷新频率不一样）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T17:42:00.633

### 定时任务

@leonbloy 说了什么。

另外，您还可以将 cronjob 放在**postgres 系统用户的 crontab 中**并简化调用：

```
psql mydb -c 'select maint.f_mv_update()' 
```

### 自动刷新物化视图

这是为这样一种环境设计的，在这种环境中，您可以在下班时间锁定表一段时间。如果您没有那么奢侈，您可能希望并行创建新表，然后删除原始表并重命名副本以将阻塞降至最低。

我为我的 mv 机制中的所有对象保留了一个单独的模式`maint`。
我刷新它们的功能：

```
CREATE OR REPLACE FUNCTION maint.f_mv_update()
  RETURNS void AS
$func$
DECLARE
   _r    record;
BEGIN

SET LOCAL work_mem='256MB';               -- more memory for sorting et al?
SET LOCAL client_min_messages=warning;    -- suppress index creation notices

-- With concurrent load you may need to lock some tables to avoid deadlocks
-- LOCK tbl1, tbl2;

FOR _r IN
   -- cast to regclass asserts table name is valid
   SELECT (mv_schema || '.' || mv_tab)::regclass AS tbl 
         ,drop_index
         ,mv_query
         ,create_index
   FROM   maint.mv
   WHERE  active
   ORDER  BY mv_id
LOOP
   IF _r.drop_index IS NOT NULL THEN      -- drop indexes (for performance!)
      EXECUTE _r.drop_index;
   END IF;

   EXECUTE 'TRUNCATE TABLE '   || _r.tbl;
   EXECUTE 'INSERT INTO '      || _r.tbl || ' ' || _r.mv_query;

   IF _r.create_index IS NOT NULL THEN    -- recreate Indexes (also CLUSTER?)
      EXECUTE _r.create_index;
   END IF;

   EXECUTE 'ANALYZE ' || _r.tbl;          -- ANALYZE to refresh statistics
END LOOP;

RESET client_min_messages;

UPDATE maint.mv
SET last_up = localtimestamp(0) WHERE active; -- remember update

END
$func$ LANGUAGE plpgsql VOLATILE SET search_path=maint,pg_temp;

REVOKE ALL ON FUNCTION maint.f_mv_update() FROM public;

COMMENT ON FUNCTION maint.f_mv_update() IS 'Update materialized Views.
Uses table maint.mv'; 
```

结合这个表，所有物化视图都被注册，希望属于这个制度。

```
CREATE TABLE maint.mv
(
  mv_id integer PRIMARY KEY, -- surrogate primary key...
  active boolean NOT NULL DEFAULT true,
  last_up timestamp(0) NOT NULL DEFAULT '2000-1-1 0:0'::timestamp, -- last update
  log_up timestamp(0) NOT NULL DEFAULT now()::timestamp(0), -- last change of row
  mv_schema text NOT NULL, -- Schema of mv table
  mv_tab text NOT NULL, -- Name of mv table
  mv_query text NOT NULL, -- SQL-query to fill mv
  drop_index text, -- SQL to drop indexes before refill
  create_index text, -- SQL to recreate indexes after refill
  note text
);
REVOKE ALL ON TABLE maint.mv FROM public; 
```

示例行：

```
INSERT INTO maint.mv
       (mv_id, mv_schema, mv_tab, mv_query, drop_index, create_index)
VALUES ( 17, 'mv', 'mytbl'
       ,'SELECT mytbl_id, count(*) FROM mytbl GROUP BY 1;'
       ,'DROP INDEX IF EXISTS mv.mytbl_mytbl_id_idx;'
       ,'CREATE INDEX mytbl_mytbl_id_idx ON mv.mytbl (my_tbl_id);'); 
```

称呼：

```
SELECT maint.f_mv_update(); 
```

# codemirror - 基于 JS 的脚本语言的代码镜像

> ID：10283984
> 
> 赞同：1
> 
> 时间：2012-04-23T15:57:23.093
> 
> 标签：codemirror

我正在使用 Code Mirror 进行 SuiteScript 编辑。这种脚本语言是 Javascript 的扩展版本。我需要编辑器中的以下功能

*   API 函数的代码提示，如原生 javascript 函数。

*   许多函数是从对象调用的，但代码提示在点之后不起作用（例如 myObj.apiFunc ），因为它在空格之后起作用

*   来自头文件的代码提示（因为这些文件本身不是内容的一部分，但可以作为代码提示访问头文件中定义的全局变量和函数）

是否可以在不修改核心代码镜像的情况下添加这些功能，因为我不想弄乱核心代码镜像代码。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:05:57.353

听起来您需要带有[类型推断](http://en.wikipedia.org/wiki/Type_inference)的代码提示。你检查过[Tern](http://ternjs.net/)吗，一个由 CodeMirror 的创建者编写的新代码提示引擎？

# javascript - 向 WebView 添加 Java 接口在模拟器上总是表现得很奇怪

> ID：10283985
> 
> 赞同：2
> 
> 时间：2012-04-23T15:57:25.950
> 
> 标签：javascript, android, webview

我正在使用 WebView 加载 URL，然后添加 Java 接口，因为我注入了 JavaScript`onPagefinish()`方法。
当我使用物理设备进行调试时，这似乎工作正常。

但是在我的模拟器上它不起作用。
我观察到这只发生在添加 Java 接口或注入一些 JavaScript 时。

这就是我得到的：

```
W/dalvikvm(580): JNI WARNING: jarray 0x406be3f0 points to non-array object    (Ljava/lang/String;)
I/dalvikvm(580): "WebViewCoreThread" prio=5 tid=9 NATIVE
I/dalvikvm(580):   | group="main" sCount=0 dsCount=0 obj=0x4051ed98 self=0x29b408
I/dalvikvm(580):   | sysTid=588 nice=0 sched=0/0 cgrp=default handle=2733376
I/dalvikvm(580):   | schedstat=( 15943622613 6562821339 1142 )
I/dalvikvm(580):   at         android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
I/dalvikvm(580):   at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
I/dalvikvm(580):   at android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:246)
I/dalvikvm(580):   at android.webkit.WebViewCore.loadUrl(WebViewCore.java:1570)
I/dalvikvm(580):   at android.webkit.WebViewCore.access$1400(WebViewCore.java:53)
I/dalvikvm(580):   at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:956)
I/dalvikvm(580):   at android.os.Handler.dispatchMessage(Handler.java:99)
I/dalvikvm(580):   at android.os.Looper.loop(Looper.java:123)
I/dalvikvm(580):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
I/dalvikvm(580):   at java.lang.Thread.run(Thread.java:1019)
E/dalvikvm(580): VM aborting 
```

我发现了很多关于同一个 VM 中止错误的问题，但没有任何帮助。这是模拟器中的错误，还是根本没有解决方案的问题？

# http-headers - 使用 Special:Export 获取页面的 HTTP 请求

> ID：10283987
> 
> 赞同：0
> 
> 时间：2012-04-23T15:57:28.220
> 
> 标签：http-headers, wikipedia

我如何将 Special:Export 用于我的目的。我从我的应用程序发送下一个标题：

```
string request = "POST en.wikipedia.org/w/index.php?title=Special:Export&action=submit HTTP/1.1\r\n"
                 "Host: en.wikipedia.org\r\n"
                 "Content-Length: 32\r\n"
                 "Content-Type: application/x-www-form-urlencoded\r\n"
                 "Connection: close\r\n\r\n"
                 "catname=&pages=ukraine&curonly=1"; 
```

但它向我呈现有关错误的页面：

> HTTP/1.0 400 错误请求服务器：squid/2.7.STABLE9 日期：2012 年 4 月 23 日星期一 14:45:12 GMT 内容类型：text/html 内容长度：3111 X-Squid-Error：ERR_INVALID_URL 0 X-Cache：来自 amssq46.esams.wikimedia.org 的 MISS X-Cache-Lookup：来自 amssq46.esams.wikimedia.org 的无：80 连接：关闭

我需要创建工具来替换 inwiki 链接以帮助翻译。我确定已经存在一些这样的工具，但我想自己做。

编辑：我使用 c++ 和套接字。

编辑：新要求：

```
string request = "POST https://en.wikipedia.org/w/index.php?title=Special:Export&action=submit HTTP/1.1\r\n"
//string request = "GET https://en.wikipedia.org/w/index.php?title=Special:Export&pages=ukraine&curonly=1\r\n"
                 "Host: en.wikipedia.org\r\n"
                 "User-Agent: MyCoolTool\r\n"
                 "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n"
                 "Accept-Language: en-us,en;q=0.5\r\n"
                 "Accept-Encoding: gzip, deflate\r\n"
                 "Content-Length: 32\r\n"
                 "Content-Type: application/x-www-form-urlencoded\r\n"
                 "Connection: close\r\n\r\n"
                 "catname=&pages=Ukraine&curonly=1"; 
```

当我尝试获取页面时

```
string request = "GET http://en.wikipedia.org/wiki/Ukraine\r\n" ...
                 "User-Agent: YolaTool/0.1\r\n" ... 
```

我有

> 脚本应使用包含联系信息的用户代理字符串，否则它们可能会被 IP 阻止，恕不另行通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:37:21.543

我建议您使用直接支持 HTTP 的高级网络库是有原因的：这样您就不必处理低级细节，并且可以确保它们是正确的。

在您的情况下，问题是在`POST`关键字之后，必须有一个绝对 URI：

```
POST http://en.wikipedia.org/w/index.php?title=Special:Export&action=submit HTTP/1.1 
```

或者，更常见的是绝对路径：

```
POST /w/index.php?title=Special:Export&action=submit HTTP/1.1 
```

请参阅[RFC 2616，第 5.1.2 节](https://www.rfc-editor.org/rfc/rfc2616#section-5.1.2)。

如果您修复此问题，您将收到 403 错误，但这次错误消息清楚地说明了如何解决此问题：

> 脚本应使用包含联系信息的用户代理字符串，否则它们可能会被 IP 阻止，恕不另行通知。

请参阅[维基媒体用户代理政策](http://meta.wikimedia.org/wiki/User-Agent_policy)。

# php - 导致 500 内部服务器错误的脚本

> ID：10283996
> 
> 赞同：1
> 
> 时间：2012-04-23T15:58:23.857
> 
> 标签：php

我的网站最近经常遇到“500 内部服务器错误”，并且主机建议这个 bundle.css.php 脚本可能是原因...

```
<?php
ob_start('ob_gzhandler');
header('Content-Type: text/css');
$files = split(",",$_GET['files']);
foreach($files as $key=>$val){
    if(file_exists($val.'.css')){
        include_once($val.'.css');
    }else{
        echo "\n\n/*** File \"$val\" does not exist. ***/\n\n";
    }
}
?> 
```

用我的主人的话来说......

“它试图将所有输出缓冲到 ob_gzhandler 中。它采用了一个非常不安全的在 GET 变量 'files' 中传递的参数列表，然后试图将这些文件包含到输出中。我不确定究竟是什么列表正在传递参数，但我怀疑您的脚本中某处存在错误，它将大量文件名传递给该脚本，因此试图构建一个太大的缓冲对象。”

这远远超出了我的专业知识，因此任何解决问题的建议都将不胜感激。非常感谢。

* * *

更新

错误日志充满了诸如...之类的行

[Mon Apr 23 15:44:41 2012] [error] [client xx.xx.xx.xx] (12)无法分配内存：无法创建子进程：/opt/suphp/sbin/suphp for /home/ xxxxxy/public_html/xxxx.php，引用者：[http ://www.xxxxxxx.com/wp-content/themes/xxx/style.css](http://www.xxxxxxx.com/wp-content/themes/xxx/style.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:57:51.713

这里要考虑多点，从对代码的解释开始：

您正在启动 gzip 输出缓冲处理程序，发出`Content-Type: text/css`标头，用逗号分隔 GET 表单参数的内容，循环遍历结果数组中的每个元素，包括必要的每个文件或发出 CSS 注释作为日志记录字符串。

您的 PHP 进程很可能没有足够的内存来同时处理输出缓冲和压缩。您的主机也可能有一个应用层防火墙来防止这种情况（有充分理由的类似 mod_security），或者您的 PHP 也可能不支持 GZIP 输出缓冲。

这个脚本是一个巨大的安全漏洞！您可以通过更改表单参数使运行此代码的 Web 服务器从运行它的服务器转储任意文件！不要在生产中使用它！曾经！如果你不明白自己在做什么，或者它“超出了你的专业知识”，你现在应该停止编码并找到一份新工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:07:23.293

为了让这个脚本更安全一些，你应该检查 $_GET 变量是否使用 isset 函数设置，第二你不应该让用户访问你正在使用的变量，因为如果可以的话，很容易将恶意代码注入其中改用 $_POST 或至少检查 $_GET 变量中传递的值是否是字母数字。

# php - LightOpenID 谷歌示例不起作用

> ID：10283999
> 
> 赞同：2
> 
> 时间：2012-04-23T15:58:32.947
> 
> 标签：php, openid, lightopenid

我被调到一个基于 php 的新项目，所以上周我一直在培养我的 php 技能。今天想做一个基于google账号的登录页面。看起来 LightOpenID 就足够了，但我无法让他们的[示例](http://gitorious.org/lightopenid/lightopenid/blobs/master/example-google.php)起作用。无论我尝试什么，我总是得到“用户尚未登录。”。在我看来，验证总是返回 false，尽管当我在 Google 上登录并返回我的页面时，我可以在该 GET 请求中看到带有 openid.claimed_id 和更多参数的数据。

由于我支持公司代理，因此我也在 aws 上运行过它，但没有运气。

我是否需要以任何方式配置我的服务器才能启用它，因为它应该可以工作。一些 PHP 或 Apache 配置？我将我的 ip 放入构造函数中，因为我没有域，但这只是我认为的展示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:33:43.930

事实证明我需要安装 curl。一个简单的 apt-get install php5-curl 就可以了。我猜我已经为我的 php n00bness 付出了代价。