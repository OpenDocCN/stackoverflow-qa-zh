# StackOverflow 问答 10229000-10229999

# android - WebView 的 loadData() 方法存在问题

> ID：10229005
> 
> 赞同：2
> 
> 时间：2012-04-19T13:20:26.300
> 
> 标签：android

直到现在我还在使用 **webView.loadData(str,"texl/html","utf-8");** .

这在 2.3 版本的 Android 中运行良好，但在 4.0 版本的 Android 中没有显示数据。对于 4.0 版本，我不得不使用

**webExpContent.loadData(str,"text/html; charset=UTF-8",null);**

它工作得很好......谁能告诉我这两者之间的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:38:28.127

也许严格模式阻止了在主线程上显示**HTML**内容的可能性。尝试在您的主要活动开始时应用它：

```
StrictMode.ThreadPolicy policy = new  StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# asp.net-mvc - 如何在 MVC 中将参数默认为 Guid.Empty？

> ID：10229006
> 
> 赞同：1
> 
> 时间：2012-04-19T13:20:27.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

对于索引操作，我需要传递 Guid 但它应该为空，因为我正在检查它的编辑或删除操作。

我曾经这样使用过，但出现编译错误：Guid 不能为 null 必须是编译时间常数。或运行时错误：

> 参数字典包含“Mapping.Controllers.HomeController”中方法“System.Web.Mvc.ActionResult Index(System.String, System.Guid)”的不可空类型“System.Guid”的参数“uid”的空条目'。可选参数必须是引用类型、可空类型或声明为可选参数。

```
public ActionResult Index(string userAction, Guid uid = new Guid() )
        {
----
----
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T13:22:48.093

尝试为您的参数使用[可空](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx) `Guid`值：

```
public ActionResult Index(string userAction, Guid? uid = null) 
```

根据您的评论，假设`objModel.Id`是 a `Guid`，您可以使用：

```
objModel.Id != default(Guid) 
```

但是，现在更多地了解您的情况，我会寻找`themarcuz`更好的整体解决方案的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:36:58.400

您应该评估调用者视图中的条件，并调用两个不同的操作，一个用于编辑，一个用于删除。类似的东西（在调用者的视图中）：

```
@if (existGuid)
{
    @Html.ActionLink("Edit", "Edit", new {myGuid = guid})
}
else
{
     @Html.ActionLink("Delete", "Delete")
} 
```

然后在你的控制器中，你会有不同的动作：

```
public ActionResult Edit(Guid myGuid)
{
    // do something here
}
public ActionResult Delete()
{
    // do something here
} 
```

即使我不明白如何在不传递任何参数的情况下删除某些内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:23:40.573

您可以在路由中将该参数指定为可选。

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{guid}", // URL with parameters
                new {controller = "DefaultController", action = "Index", guid = UrlParameter.Optional}); 
```

之后，您不必将 guid 作为 Index 操作中的参数，或者您可以同时拥有这两个操作，例如

`Index()`和`Index(Guid guid)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:06:06.117

您可以创建一个自定义模型绑定器，该绑定器为操作方法参数传递一个`Guid.Empty`值。`null``Guid?`

# video-streaming - 通过网络浏览器流式传输我的视频

> ID：10229007
> 
> 赞同：0
> 
> 时间：2012-04-19T13:20:37.953
> 
> 标签：video-streaming, media, freebsd

我家里有一个媒体服务器，可以很好地与我的媒体播放器和移动计算机上的 upnp 配合使用。我尝试通过互联网使 upnp 可用，但这真的让我害怕人们只是看我的视频，因为 upnp 没有身份验证。

是否有任何基于 Web 的应用程序可以放在密码域后面，但可以让我浏览我的directroeis 并直接在浏览器中播放电影？或者甚至搜索像 youtube 这样的电影？

我使用带有双核 AMD 的 FreeNAS 7，因此它可以处理转码，但运行在一个奇怪的 PHP 版本上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:02:02.847

lighttpd 和 Apache 都有一个用于流式传输 H.264 视频的模块；`/usr/ports/www/lighttpd-mod_h264_streaming`或`/usr/ports/www/mod_h264_streaming`分别。

VLC 端口 ( `/usr/ports/multimedia/vlc`) 也可以进行[流式传输](http://www.videolan.org/streaming-features.html)。它具有可以转码的额外优势。

# scala - 较新的 scaladoc 与较旧的 scala 编译器？

> ID：10229008
> 
> 赞同：1
> 
> 时间：2012-04-19T13:20:41.060
> 
> 标签：scala, sbt, scaladoc

是否可以在为 2.8.1 编写的 Scala 代码上使用来自主干的 scaladoc 而不会出现任何问题？我问是因为主干中的 scaladoc 支持一些在 2.8.1 的 scaladoc 中未实现的附加标签。

我预计不会有任何问题，但我只是想检查一下。

如果是这样，如何从 sbt 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:50:19.187

scaladoc 基于编译器执行的树解析，即使它没有考虑所有内容（例如，函数内部的内容并不重要）。因此，由于在函数、对象的声明中没有重大变化（并且大多数变化是添加，而不是删除）......你应该没有任何问题。

事实上，需要明确的是，应用的不是编译器，而是解析器。

如果我错了，请不要犹豫纠正我。

# android - 有人对Android中真正稳定的TCP客户端有建议吗？

> ID：10229009
> 
> 赞同：0
> 
> 时间：2012-04-19T13:20:41.120
> 
> 标签：android, tcp, client-server

我正在开发一个应用程序，它使用 Android 平板电脑作为自定义 Linux 机器的用户界面。两台设备通过 TCP 连接（Android 为 Client，box 为 Server）。每台服务器只有每 1 个客户端。另外，我使用这个例子来构建我的 TCP 客户端代码：

[http://content.gpwiki.org/index.php/Java:Tutorials:Simple_TCP_Networking](http://content.gpwiki.org/index.php/Java:Tutorials:Simple_TCP_Networking)

我使用相同的编写器和读取器，但使用不同的方法来初始化连接（AsyncTask）。

我的 Android 和远程系统之间的 TCP 交互总是：

```
 1) The Android sends a command to do something.
  2) The Server does it and sends a reply. 
```

我一直在处理 TCP 套接字超时（在 5 秒内）并抛出 IOException 的情况，作为链接丢失，因此我的软件开始与服务器重新建立通信的过程。（5 秒比完成任何现有系统命令所需的时间长得多，顺便说一句）

有几个问题：

```
 1) Establishing (and Re-establishing) WIFI communications to my server takes
     a significant amount of time.  It's not a big deal at start up, but running
     through it again definitely doesn't sit well with the users.

  2) I've seen PLENTY of examples where the command was sent, the server executed
     it, and sent a reply, but for some reason, the reply just doesn't show up in
     my StreamReader. 
```

据我所知，服务器或链接没有任何问题，但我的 Android 只是没有收到响应——而且我已经验证我的服务器肯定在发送它。

任何人都可以推荐一些更“防弹”的 TCP 连接概念的想法吗？也许我可能会忽略这些错误中的一小部分（假设有一种方法可以在它们之后进行清理......有吗？）也许有更可靠的方法来写入和读取套接字？

任何建议将被感激地接受并采取行动。谢谢，R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:01:50.347

显然，答案似乎是 Jens 所建议的。做得很好，先生（我想）...您可以在 Android 设置菜单中访问 WiFi 睡眠设置——但这显然没有帮助。

另一方面，获取 WiFi 锁（使用 WifiManager.createWifiLock ("Tag"); 获取一个）似乎已经很好地完成了这个技巧。

不过，在有人问之前，我根本没有关于锁定或解锁 Wifi 行为的信息。我无法告诉您什么可能会说服您的 WiFi 在您的应用程序中工作或不工作。只能说拿到锁，然后拧电池……

R。

# java - 当我想获取 twitter 访问令牌时，这是怎么发生的？

> ID：10229013
> 
> 赞同：0
> 
> 时间：2012-04-19T13:20:54.223
> 
> 标签：java, twitter, unauthorized, joauth

输出以及堆栈跟踪是：

> [https://api.twitter.com/oauth/authorize?oauth_token=wUVGSompJWvIZc5rHxQ9PEMLT7zDWuRKNx3S6RxF9cs](https://api.twitter.com/oauth/authorize?oauth_token=wUVGSompJWvIZc5rHxQ9PEMLT7zDWuRKNx3S6RxF9cs)
> mZWtTPuWnBDiTuCgIclTID41vpES9juxTPOsoYpwB04
> mZWtTPuWnBDiTuCgIclTID41vpES9juxTPOsoYpw

```
Exception in thread "main" net.oauth.exception.OAuthException: HTTP/1.0 401 Unauthorized

    at net.oauth.consumer.OAuth1Consumer.createOAuthTokenResponse(OAuth1Consumer.java:142)
    at net.oauth.consumer.OAuth1Consumer.requestAccessToken(OAuth1Consumer.java:249)
    at net.oauth.consumer.OAuth1Consumer.requestAccessToken(OAuth1Consumer.java:226)
    at com.auth.Test1OAuth1.main(Test1OAuth1.java:84) 
```

测试代码如下：package com.auth；

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.Map;
import net.oauth.consumer.OAuth1Consumer;
import net.oauth.exception.OAuthException;
import net.oauth.http.HttpClient;
import net.oauth.provider.OAuth1ServiceProvider;
import net.oauth.signature.OAuthSignature;
import net.oauth.signature.impl.OAuthHmacSha1Signature;
import net.oauth.token.oauth1.RequestToken;
import net.oauth.token.oauth1.AccessToken;

public class Test1OAuth1
{
    public static void main(String[] args) throws OAuthException, IOException,
            URISyntaxException
    {

        String client_id = "Consumer key";
        String client_secret = "Consumer secret";

        OAuth1Consumer consumer = new OAuth1Consumer(client_id, client_secret,
                new OAuth1ServiceProvider(
                        "https://api.twitter.com/oauth/request_token",
                        "https://api.twitter.com/oauth/authorize",
                        "https://api.twitter.com/oauth/access_token"));

        System.setProperty("proxySet", "true");
        System.setProperty("proxyHost", "xxx.xxx.xxxx.xxx");
        System.setProperty("proxyPort", "3128");
        HttpClient client = new HttpProxyClient();

        consumer.setClient(client);

        OAuthSignature oAuthSignature = new OAuthHmacSha1Signature();
        RequestToken requestToken = consumer.requestUnauthorizedToken(null,
                "http://127.0.0.1:8080", null, oAuthSignature);

        Map<String, String[]> map = new HashMap<String, String[]>();
        String url = consumer
                .createOAuthUserAuthorizationUrl(requestToken, map);

        System.out.println(url);

        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        String verify = br.readLine();
        System.out.println(verify);
        AccessToken accessToken = consumer.requestAccessToken(null,
                requestToken, verify, oAuthSignature);
        System.out.println(accessToken.getToken());
        System.out.println(accessToken.getTokenSecret());
    }
} 
```

HttpProxyClient 类与 HttpDefaultClient 相同，不同之处如下：

```
 if (System.getProperty("proxySet").equals("true"))
        {
            if (null == proxyLocation)
            {
                proxyLocation = new InetSocketAddress(
                        System.getProperty("proxyHost"),
                        Integer.parseInt(System.getProperty("proxyPort")));
                if (null == proxy)
                {
                    proxy = new Proxy(Proxy.Type.HTTP, proxyLocation);
                }
            }
            URLConnection uc = new URL(s).openConnection(proxy);
            urlConnection = (HttpURLConnection) uc;
        }
        else
        {
            urlConnection = (HttpURLConnection) new URL(s).openConnection();
        } 
```

# html - CSS3 不透明度过渡问题

> ID：10229014
> 
> 赞同：1
> 
> 时间：2012-04-19T13:21:01.463
> 
> 标签：html, firefox, css, css-transitions

我一直在开发一个包含 CSS3 过渡的网站，但我遇到了一个小问题。

每当我将鼠标悬停在已应用它的元素上时，前一个 div 中的文本会在转换完成后模糊并恢复正常。它在 Chrome 和 Safari 中运行良好，但在 Firefox 中运行时出现问题。

我在这里重新创建了这个问题：http: [//jsfiddle.net/fkbc6/](http://jsfiddle.net/fkbc6/)

过渡当前应用于列表项，这显然不起作用。我也尝试将其应用于图像，但无济于事。

任何帮助将不胜感激，因为我完全没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:46:21.187

[http://jsfiddle.net/fkbc6/2/](http://jsfiddle.net/fkbc6/2/)

错误是您应用的 CSS 的变换为 0.5 负度（目的是什么？）并且 Firefox 以一种奇怪的方式重新渲染所有字体，因为样式（在 css btw 中应用了两次）位于示例的顶部 div

```
#wepartner {
    overflow:auto;
    margin:70px auto 70px auto;
    padding-top:80px;
    background:#F6F6F6;
    background:rgba(0,0,0,0.02);
    padding:80px 50px 50px 50px;
    -moz-transform:rotate(0.5deg);
    -webkit-transform:rotate(0.5deg);
    -o-transform:rotate(0.5deg);
    -ms-transform:rotate(0.5deg);
    transform:rotate(0.5deg)
}
#wepartner .content {
    -moz-transform:rotate(-0.5deg);
    -webkit-transform:rotate(-0.5deg);
    -o-transform:rotate(-0.5deg);
    -ms-transform:rotate(-0.5deg);
    transform:rotate(-0.5deg)
} 
```

删除后，一切都应该可以正常工作

**编辑：**哇，事实上你应用了两个具有相同值和不同方向的旋转，小心使用 Ctrl-C Ctrl-V ：P

**编辑2：**这个链接可以帮助你[http://petermolnar.eu/linux-tech-coding/ie8-css-filter-matrix-cleartype-font-bug-fix/](http://petermolnar.eu/linux-tech-coding/ie8-css-filter-matrix-cleartype-font-bug-fix/)

# java - 需要在运行时构造 java 实体以进行 XML 解组

> ID：10229017
> 
> 赞同：1
> 
> 时间：2012-04-19T13:21:23.947
> 
> 标签：java, xml, web-services, maven, jaxb

条件：简单的 web 服务从一些 java 客户端接收到包含一些实体的 XML 文件。

任务：用没有实体类的 JAXB 编组这个 XML：类应该在客户端的编译时加载。

例子：

```
marshaller.marshall(new Shape(), someShape.xml); 
```

客户端应用程序包中没有“形状”类。它应该在编译时加载。

我该如何执行该上传？项目在 Maven 下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:25:23.817

如果您使用的是 maven，请查看 maven-jaxb2-plugin。

[文档在这里。](http://java.net/projects/maven-jaxb2-plugin/pages/Home)

你只需在你的 pom 中添加这样的东西：

```
 <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <generatePackage>com.psed.project.entities</generatePackage>
            </configuration>
            <version>0.8.1</version>
        </plugin> 
```

这将在编译时从您的模式文件中生成所有实体。

# git - Git 最好的方法来分叉已经在存储库中的子模块

> ID：10229018
> 
> 赞同：1
> 
> 时间：2012-04-19T13:21:42.510
> 
> 标签：git, vim

我有一个 git 子模块（来自 github 的 vim 插件），它*已经*在 git 存储库中，并且已经提交了 10 次左右。

我现在想分叉子模块 repo 并进行自己的更改。

我认为这会奏效......但这是一个不好的方法吗？

1.  在 github 上 fork 子模块。
2.  在主仓库中编辑我的`.gitmodules`文件，使其指向我在 github 上的分叉仓库
3.  `git submodule sync`
4.  `git submodule update`

或者这会丢失一些 git 历史跟踪信息/有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:30:55.447

这就是你应该这样做的方式（也许除了`git submodule update`在你完成自己的提交之前不应该做任何事情的情况下）。如果你想让你的模块保持最新，你只需要记住不时从上游获取更改。

为此，只需进入您的子模块，向上游存储库添加一个上游远程并获取上游。

# php - is_numeric 错误地标识了一个浮点数（这是一个随机字符串）

> ID：10229022
> 
> 赞同：0
> 
> 时间：2012-04-19T13:21:55.513
> 
> 标签：php, floating-point, numeric, scientific-notation

我正在寻找变量中的数字，如果找不到，我会引用该字符串 - 否则它不会被引用。例子：

```
$x = '000916846E38516';
if (is_numeric($x)) { echo 'Numeric!'; } else { echo 'Non-numeric!'; } 
```

碰巧该字符串是科学记​​数法，而 PHP 将其识别为数字。我应该如何解决这个问题？只是检查是否有字母字符会更好，还是有另一个类似于 is_numeric 的函数可以排除科学数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:24:07.907

[`is_int()`](http://us2.php.net/manual/en/function.is-int.php)并且[`ctype_digit()`](http://us2.php.net/manual/en/function.ctype-digit.php)都应该为您工作。

[`filter_var()`](http://us2.php.net/manual/en/filter.filters.php)可能会更好，因为您可以设置标志来验证浮点数 ( `FILTER_VALIDATE_FLOAT`) 和整数 ( `FILTER_VALIDATE_INT`)

# amazon-ec2 - AWS Autoscaling 和 Elastic Load Balancing 与直播

> ID：10229023
> 
> 赞同：1
> 
> 时间：2012-04-19T13:21:56.753
> 
> 标签：amazon-ec2, amazon-web-services, load-balancing, red5, autoscaling

目前我正在使用 AWS 自动缩放功能。我在实现负载均衡器和设置自动缩放触发器方面有一个问题。

我有一个 EC2 实例，它是一个红色 5 媒体服务器，它向所有用户广播实时视频流。现在我想知道如果我使用自动缩放功能来扩大/缩小红色 5 个 EC2 实例，那么负载均衡器将如何处理用户会话？

例如，如果用户登录到一个 EC2 实例（红色 5 媒体服务器）并且他正在观看直播，并且由于利用率低，负载均衡器决定关闭该实例。在那种情况下，我们如何处理已建立的会话？

感谢你在期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:53:35.693

您可以为负载均衡器打开粘性会话。这样，如果您启动一个新实例，会话将继续转到特定服务器，并且只有新会话将被定向到新实例。

见：[这篇文章](http://shlomoswidler.com/2010/04/elastic-load-balancing-with-sticky-sessions.html)

这是最近添加的功能，但应该可以解决您对用户并不总是访问同一应用程序服务器的任何担忧。您还可以在共享内存缓存服务器或数据库中备份会话。如果用户丢失了会话，在给他一个新会话之前，检查 memcache 并返回它。

# javascript - 更改“this”的值

> ID：10229025
> 
> 赞同：-3
> 
> 时间：2012-04-19T13:21:59.803
> 
> 标签：javascript

我有这个功能：

```
Number.prototype.f=function()
{
    this=2;//This is not working
}
var x=0;
x.f();
alert(a);//Here I want that x equal 2 
```

我希望 x 最后是 2 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:25:25.220

某种程度上可以做到。数字是按值传递的，而不是引用。所以充其量你可以`y = x.f();`用这个函数调用：

```
Number.prototype.f = function() { return 2; }; 
```

至于你的评论：

> 当我们做 array.push(2); 函数 push 改变了数组！

当然可以。数组是对象，通过引用传递。该函数可能如下所示：

```
Array.prototype.push = function(val) {
    var t = this;
    t[t.length] = val;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:29:17.170

您不能精确地做到这一点，但您可以通过显式使用 Number 构造函数并覆盖该`toString`方法来获得类似的效果。

所以，在理解[这是病态的，不应该在生产代码中看到](http://jsfiddle.net/GFkFU/)：

```
Number.prototype.f = function () {
    this.toString = function () {
        return "2";
    };
}
var x = new Number(0);
x.f();
alert(x); 
```

​我只在 Chrome 中测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:22:42.243

这是不可能的。
^(（双关语）)

数字是不可变的。

# internet-explorer - 如何在 Web 浏览器上触发 SSL 重新握手？

> ID：10229027
> 
> 赞同：3
> 
> 时间：2012-04-19T13:22:04.117
> 
> 标签：internet-explorer, google-chrome, tomcat, ssl, client-certificates

我有一个配置为请求 SSL 客户端证书的 Web 服务器。如果客户端有一个可接受的证书，他们将看到实际内容，但如果没有，我会在没有客户端身份验证的情况下回退到 SSL，并显示一个错误页面，通知他们连接他们的安全令牌并重试。

问题是，即使他们连接了他们的令牌，浏览器也不会重新协商新的 SSL 会话，因为它认为当前会话很好。所以我需要一种方法来使当前的 SSL 会话无效。

我尝试在服务器上执行此操作，这是一个 Tomcat 6：

```
response.setHeader("Connection", "close");          // open new socket next time
response.flushBuffer();

Object sslSessionMgr = request.getAttribute("javax.servlet.request.ssl_session_mgr");
if (sslSessionMgr != null) {
    try {
        Method invalidateSession =
                Class.forName("org.apache.tomcat.util.net.SSLSessionManager").getMethod("invalidateSession");
        invalidateSession.setAccessible(true);
        invalidateSession.invoke(sslSessionMgr);
    } catch (Exception e) {/*ignore*/}
} 
```

但事实证明`sslSessionMgr`总是如此`null`，我想知道我在这里做错了什么。

在客户端当然没有通用的解决方案，但幸运`window.crypto.logout()`的是为 FireFox 解决了问题。我在某处读到 IE 的等价物是`document.execCommand("ClearAuthenticationCache")`或者可能是一些 ActiveX 控件？无论如何，我似乎无法为 IE 或 Chrome 做到这一点。

那么我可以在这里做什么？我可以修复这些解决方案中的任何一个，还是有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:38:11.683

不幸的是，Chrome 尚不支持此功能，如[本期](http://code.google.com/p/chromium/issues/detail?id=90676)所述。

据我所知，该`javax.servlet.request.ssl_session_mgr`技巧仅适用于 Apache Tomcat 7。

# vb.net - 在 VB.net (Windows Phone 7) 中动态更改按钮的文本

> ID：10229028
> 
> 赞同：2
> 
> 时间：2012-04-19T13:22:04.193
> 
> 标签：vb.net, visual-studio, windows-phone-7

嗨，我有一个显示“True”的按钮，当用户按下它时，我希望它显示为“False”。我尝试了以下方法，但它不起作用。有人可以帮忙吗？谢谢

```
 Private Sub buttonTrue_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles buttonTrue.Click

buttonTrue.Content = "False" 
```

按钮的 XML：

```
<Button Content="True" Grid.Row="1" Height="200" Margin="185,260,156,0" Name="buttonTrue" VerticalAlignment="Top" Background="Black" BorderThickness="3" BorderBrush="White" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:18:47.667

您的**XAML**没有`Click`事件处理程序。添加它：`Click="buttonTrue_Click"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:28:47.910

你所拥有的东西在我看来应该可以工作。但我看到的问题是，一旦按钮被点击，它应该说是假的，之后就永远不会改变，因为你没有条件。

我会考虑其他几件事，具体取决于您要查找的内容。

如果您正在寻找在 True 和 False 之间切换的 ToggleButton，那么一件事就是查看它。通过转换器将内容绑定到状态。

另一种情况是，如果您希望按钮仍然与常规按钮显示相同，而不是 ToggleButton（一种状态显示带有黑色文本的白色背景）。那将是使用条件语句并再次通过转换器绑定内容。例如，设置一个 bool 变量，并让事件更改该变量的状态，并使用 NotifyPropertyChanged 来更新 UI。

# c# - 将 DateTime 依赖属性格式化为文本（字符串）

> ID：10229031
> 
> 赞同：0
> 
> 时间：2012-04-19T13:22:11.980
> 
> 标签：c#, .net, wpf, xaml

**编辑：尝试实现转换器时 Gettign Xaml 解析错误**

错误：*在“System.Windows.Markup.StaticResourceHolder”上提供值引发异常。*

```
<DataTemplate>
                    <myClasses:RegistrationButton x:Name="RegistrationButton" HorizontalAlignment="Center" Height="71" Width="148" 
                                                  Margin="10,0,5,0" 
                                                  Style="{DynamicResource ButtonStyleRegistration}"
                                                  Click="RegistrationButton_Click"
                                                  Title="{Binding Title}"
                                                  Oorzaak="{Binding Oorzaak}"

                                                  DuurStilstand="{Binding DuurStilstand, 
                                                        Converter={StaticResource DateTimeConvertor},  
                                                        ConverterParameter=\{0:t\}}"

                                                  BeginStilstand="{Binding BeginStilstand}"
                                                  />
                </DataTemplate> 
```

值转换器：

```
 public class DateTimeConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // Retrieve the format string and use it to format the value.
        string formatString = parameter as string;
        if (!string.IsNullOrEmpty(formatString))
        {
            return string.Format(culture, formatString, value);

        }
        // If the format string is null or empty, simply call ToString()
        // on the value.
        return value.ToString();
    }

    // No need to implement converting back on a one-way binding 
    public object ConvertBack(object value, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

目前我有一个字符串依赖属性，它使用绑定并正确显示所有内容。虽然这个属性应该是 DateTime 。我在我的应用程序中使用字符串进行计算，这应该使用一个 DateTime 值来代替。

当我尝试将其更改为 DateTime 时，除了绑定错误之外什么也没有得到。在属性为字符串类型之前。

```
public static readonly DependencyProperty DuurStilstandProperty =
        DependencyProperty.Register("DuurStilstand", typeof(DateTime), typeof(RegistrationButton), new UIPropertyMetadata(""));

public DateTime DuurStilstand
    {
        get { return (DateTime)GetValue(DuurStilstandProperty); }
        set { SetValue(DuurStilstandProperty, value); }
    } 
```

XAML 绑定：

```
<TextBlock x:Name="tbDuurStilstand" TextWrapping="Wrap" 
                                   Text="{Binding DuurStilstand, UpdateSourceTrigger=PropertyChanged}" 
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" 
                                   Margin="7.5,5,0,0" Height="24.8266666666667"/>

<ListBox.ItemTemplate>
                <DataTemplate>
                    <myClasses:RegistrationButton x:Name="RegistrationButton" HorizontalAlignment="Center" Height="71" Width="148" 
                                                  Margin="10,0,5,0" 
                                                  Style="{DynamicResource ButtonStyleRegistration}"
                                                  Click="RegistrationButton_Click"
                                                  Title="{Binding Title}"
                                                  Oorzaak="{Binding Oorzaak}"
                                                  DuurStilstand="{Binding DuurStilstand}"
                                                  BeginStilstand="{Binding BeginStilstand}"
                                                  />
                </DataTemplate>
            </ListBox.ItemTemplate> 
```

**此处显示错误 (XamlParseException)：**

```
<myClasses:RegistrationButton x:Name="btnTestRegistration" Content="Test Registratie" HorizontalAlignment="Left" Margin="16.8,0,0,118.14" 
            VerticalAlignment="Bottom" Width="119.2" Height="30.2" FontSize="18.667" Click="btnTestRegistration_Click" Style="{DynamicResource ButtonStyleRegistration}" /> 
```

为什么我无法将其更改为 DateTime。

文本块需要一个字符串而不是它当前正在获取的 DateTime。当内容放置在文本块的 .text 属性中时，我如何确保它将 DateTime 转换为字符串？

最好的问候，彼得P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:27:20.103

在这种情况下，我认为最好的解决方案是使用[Binding Converters](http://blogs.msdn.com/b/bencon/archive/2006/05/10/594886.aspx)来往来绑定数据。

```
public class DateTimeConverter: IValueConverter
{
        public object Convert(object value, Type targetType, object parameter, CultureInfo 
        {

           DateTime dt = (DateTime)value;
           //convert back to string from dt 

        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
          string dateTimeString = value as string; 

           //Convert to DateTime from dateTimeString 
        }
    } 
```

定义 ins 说 App.xaml

```
<DateTimeConverter x:Key="DateTimeConverter" /> 
```

并绑定到您的财产

```
<myClasses:RegistrationButton x:Name="RegistrationButton" HorizontalAlignment="Center" Height="71" Width="148" 
                                                  Margin="10,0,5,0" 
                                                  Style="{DynamicResource ButtonStyleRegistration}"
                                                  Click="RegistrationButton_Click"
                                                  Title="{Binding Title}"
                                                  Oorzaak="{Binding Oorzaak}"
                                                  DuurStilstand="{Binding DuurStilstand}"
                                                  BeginStilstand="{Binding BeginStilstand}"
                                                  Converter = {StaticResource DateTimeConverter }

                        /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:27:10.477

好吧，当您谈论转换（从 DateTime 到字符串）时，您可以简单地将**IValueConverter**添加到您的绑定中。以下 MSDN 文章有一个示例，展示了如何将 DateTime 转换为字符串：

[http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.95).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:28:17.450

我认为你的问题在这里：

```
public static readonly DependencyProperty DuurStilstandProperty =
        DependencyProperty.Register("DuurStilstand", typeof(DateTime), typeof(RegistrationButton), new UIPropertyMetadata("")); 
```

您可以使用 DateTime，但 WPF 将需要强制提供给 DateTime 的值，并且您`UIPropertyMetadata([defaultvalue])`是一个无法强制为 DateTime 的空字符串。您应该使用类似 `UIPropertyMetadata(DateTime.MinValue) 的东西。

另外，我建议您将`IValueConverter`s 应用于您的绑定，以便您不依赖 WPF 来强制字符串，这很可能是不可强制的，而是在转换器中有一些逻辑来适当地处理事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:26:13.380

在您的属性定义中，您将默认值设置为空字符串。显然这对于​​ DateTime 是无效的！您需要提供一个实际上与属性类型兼容的默认值。

试试这个：

```
public static readonly DependencyProperty DuurStilstandProperty =
    DependencyProperty.Register("DuurStilstand", typeof(DateTime), typeof(RegistrationButton), new UIPropertyMetadata(DateTime.MinValue)); 
```

您可以将 MinValue 替换为任何对您有意义的默认值（可能是 DateTime.Now）。

为了在绑定日期时实际格式化日期，您可以使用 StringFormat 或转换器，正如其他人所建议的那样。

**编辑**

根据您使用转换器的问题。您需要创建转换器的实例，然后您可以引用它。例如，您可以这样做：

```
<Window.Resources>
    <local:DateTimeConverter x:Key="MyConverter"/>
</Window.Resources> 
```

然后像这样使用它：

```
DuurStilstand="{Binding DuurStilstand, 
      Converter={StaticResource MyConverter},  
      ConverterParameter=\{0:t\}}" 
```

# javascript - IFRAME 中的 HTML target="_top" 不适用于某些链接

> ID：10229037
> 
> 赞同：0
> 
> 时间：2012-04-19T13:22:28.950
> 
> 标签：javascript, html, iframe

我在[这里](http://fr.cars.yahoo.com/footer/)看到了奇怪的情况。这是为了包含在 Iframe 中。其中的每个链接都使用 Javascript 设置为 target=_top。它工作正常，但现在不行。我签入了FF 11。

有 3 列（Yahoo! Auto、Services Yahoo! 和 Tendances Du Web）。在第 1 列中，所有链接都有效（使用 target=_top），但“Neuf et 场合”除外。在其他列上，没有链接尊重 target="_top"。我猜这是导致问题的 JavaScript onclick 事件，但是如何确定它！JavaScript中有很多行代码都是缩小形式的。

**上面的框架[在](http://auto.yahoo.fr/)Iframe 内部**使用。因此，您可以在那里检查工作代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:34:27.757

检查控制台会发现您的页面有几个这种形式的 JavaScript 错误：

> 不安全的 JavaScript 尝试 从 URL [http://fr.cars.yahoo.com/footer/的框架访问具有 URL](http://fr.cars.yahoo.com/footer/) [http://auto.yahoo.fr/](http://auto.yahoo.fr/)的框架 。域、协议和端口必须匹配。

这个错误的原因是因为它被认为是一个安全问题，让帧访问不同的域。'Accueil'、'News' 和 'Essais' 之所以有效，是因为它们指向相对路径（相同的域），但 'Neuf et场合' 指向不同的域。

一个解决方案是重写您的页脚以不使用 iframe。这样，您将不会再遇到链接的跨域问题。如果您无法删除 iframe，则可以使用[easyXDM](http://easyxdm.net/wp/)在框架之间进行通信进行调查。

# javascript - 用javascript动态链接html页面

> ID：10229038
> 
> 赞同：1
> 
> 时间：2012-04-19T13:22:31.907
> 
> 标签：javascript, html, dynamic

这是为 HTML 页面存储五个图像的代码，然后该函数用于一次显示这五个图像。

此代码有效，可以滚动浏览五个图像。

我的问题是是否可以根据特定时间显示的图像定向到不同的 HTML 页面

```
<script type="text/javascript">
    var curImage = 0;
    var cImages = ['1.jpg','2.jpg','3.jpg','4.jpg','5.jpg'];

    function townHousePics(direction) {
        if (direction == 'next') {
            curImage++;
            if (curImage == 5) {
                curImage = 0;
            }        
        } 
        else 
        {
            curImage--;
            // even reset the counter here when
            // its getting 0
        }
        document.images[0].src = cImages[curImage];
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:36:05.590

# html设置

```
<a href='' id='my-anchor-name'><img id='my-image-name' src=''/></a> 
```

# javascript

```
<script type="text/javascript">
    var curImage = 0;
    var cImages = [{aHref:'target1.html',imgHref:'1.jpg'},{aHref:'target2.html',imgHref:'2.jpg'},
{aHref:'target3.html',imgHref:'3.jpg'},
{aHref:'target4.html',imgHref:'4.jpg'},
{aHref:'target5.html',imgHref:'5.jpg'}
];
         function townHousePics(direction) {
                     if (direction == 'next') {
                         curImage = (curImage++)%cImages.length ;
                      else {
                         curimage = (curImage--)%cImages.length;
                     }
                     var img = document.getElementById('my-image-name');
                     var anchor = document.getElementById('my-anchor-name')
                     img.src = cImages[curImage].imgHref;
                     anchor.href = cImage[curImage].aHref;
             }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:33:21.723

### 基于文件名的自动替换

假设您有如下链接：

```
<a href="1.html" id="viewLarge">View Large</a> 
```

您希望随每个图像动态更改。当图像 2.jpg 成为主要图像时，我们将 1.html 替换为 2.html。我们可以将代码的最后一行修改为：

```
// Updated Source of First Image
document.images[0].src = cImages[curImage];
// Parse Image Number from String
var currentNumber = parseInt( curImage, 10 ); // 2.jpg becomes 2
// Get a reference to our 'viewLarge' link
var ourLink = document.getElementById("viewLarge");
// 1.html becomes 2.html when 2 is the currentNumber;
ourLink.href = ourLink.href.replace( /^([0-9]+)/, currentNumber ); 
```

请注意，尽管这有效，但它限制您拥有一个`1.html`为您的`1.jpg`. 这可能是不希望的。你可能想`1.jpg`和`CityLoft.html`. 如果是这种情况，您需要将图像与`cImages`对象中的正确 url 相关联：

### 使用对象存储相关数据

```
var cImages = [{image: '1.jpg', page: 'cityLoft.html'},
               {image: '2.jpg', page: 'townhome.html'}]; 
```

进行此更改后，您只需要恢复代码中的引用。例如，我们将更改以下内容：

```
document.images[0].src = cImages[curImage]; 
```

对此：

```
document.images[0].src = cImages[curImage].image; 
```

我们还需要更新链接到相关页面的代码：

```
document.getElementById("viewLarge").href = cImages[curImage].page; 
```

而已！

# odbc - 提高远程 ODBC 查询的速度？

> ID：10229040
> 
> 赞同：0
> 
> 时间：2012-04-19T13:22:40.417
> 
> 标签：odbc, database-connection

我有一些 ODBC SQL 查询，当从托管数据库的本地环境运行时，需要 4 秒。但是，当它们从远程托管服务器运行时，这些完全相同的查询需要两倍的时间。

我测试了连接速度，两台机器之间的连接速度约为 2 Mb/s，所以这似乎不是问题。

关于在哪里查看或如何改进这些远程查询的执行的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:34:25.140

您是在处理大型结果集还是查询 (B)LOB 字段？所有结果数据都必须通过网络传输，这可能需要一些时间。如果是这样，您可以考虑使用[分页/批处理技术](https://stackoverflow.com/questions/6866257/retrieving-billions-of-rows-from-remote-server)。

# actionscript-3 - as3 以普通影片剪辑的形式访问子项（gotoAndPlay 等）

> ID：10229056
> 
> 赞同：3
> 
> 时间：2012-04-19T13:23:20.373
> 
> 标签：actionscript-3, flash

仍然遇到 as3 的障碍！这次我使用 addChild 从我的库中创建了一个 MC 实例，现在需要访问这个孩子，就好像它是时间线上的普通 MC 但无法让它工作。

如果我通过实例名称来引用它，例如：

```
this.getChildByName("mc1").gotoAndPlay(2); 
```

我得到它不能对 displayObject 执行此操作的错误。

如果我通常将其称为时间轴上的 MC，例如：

```
mc1.gotoAndPlay(2); 
```

然后它找不到它（我认为是因为它是动态创建的。

任何指导都会像往常一样非常感激......

如果你想要一些上下文，我可以弹出我的一些代码。

非常感谢！

凸轮

编辑：感谢您的回复 - 我无法让它工作吗？

```
var mc1:MovieClip = this.getChildByName("mc1") as MovieClip;
if(mc1) { mc1.useHandCursor = true;
mc1.buttonMode = true;
mc1.addEventListener(MouseEvent.CLICK, fillDriveway); 
```

编辑：要求的代码：（我想要的一个例子是 mc1 onClick 到 gotoAndPlay）

```
import flash.display.*

pic.addEventListener(MouseEvent.CLICK,addNewPoint);

var n:Number = 0;
var joinPointsArray:Array = new Array;

function addNewPoint(e:MouseEvent):void {
    n++;
    pointNo.text = String(n);
    if(n==1){
        var nextPoint:MovieClip = new mcstart();
        addChild(nextPoint);
        nextPoint.name = "mc"+pointNo.text;
        nextPoint.x = e.target.mouseX;
        nextPoint.y = e.target.mouseY;
    }else{
        var nextPoint:MovieClip = new newPoint();
        addChild(nextPoint);
        nextPoint.name = "mc"+pointNo.text;
        nextPoint.x = e.target.mouseX;
        nextPoint.y = e.target.mouseY;
    }

    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    joinPointsArray.push(joinPoints);
    joinPoints.graphics.lineStyle(0.5,0xFF0000);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var i:int=2; i<=n; ++i){
        joinPoints.graphics.lineTo(this.getChildByName("mc"+i).x, this.getChildByName("mc"+i).y);
    }
}

pic.addEventListener(MouseEvent.CLICK, addNewPoint);

function fillDriveway(eventObject:MouseEvent) {
    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    for(var p:int=0; p<(joinPointsArray.length); ++p) {
        joinPointsArray[p].alpha = 0;
    }
    this.getChildByName("mc1").alpha = 0;
    joinPoints.graphics.beginFill(0xFFFFFF, 0.7);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var m:int=2; m<=n; ++m){
        joinPoints.graphics.lineTo(this.getChildByName("mc"+m).x, this.getChildByName("mc"+m).y);
    }
    joinPoints.name = "driveshape";
    filledDrive.text = "filled";
}

function undoit(eventObject:MouseEvent) {
    if(n > 0) {
        if(filledDrive.text.indexOf("filled") != -1) {
            this.removeChild(this.getChildAt(this.numChildren -1));
            filledDrive.text = "";
            }else{
            this.removeChild(this.getChildAt(this.numChildren -1));
            this.removeChild(this.getChildAt(this.numChildren -1));
            n--;
            pointNo.text = String(n);
        }
    }
}

undo.addEventListener(MouseEvent.CLICK, undoit);

function maskDrive(eventObject:MouseEvent) {
    if(filledDrive.text.indexOf("filled") != -1) {
        var finishA:MovieClip = new finishMC();
        this.addChild(finishA);
        finishA.x = 310;
        finishA.y = 100;
        finishA.mask = getChildByName("driveshape");
        finishA.gotoAndPlay(2);
    }
}

//BTN Actions
function btn1over(myEvent:MouseEvent) {
    btn1.gotoAndPlay(2);
}
function btn1out(myEvent:MouseEvent) {
    btn1.gotoAndPlay(11);
}
function btn2over(myEvent:MouseEvent) {
    btn2.gotoAndPlay(2);
}
function btn2out(myEvent:MouseEvent) {
    btn2.gotoAndPlay(11);
}
function btn3over(myEvent:MouseEvent) {
    btn3.gotoAndPlay(2);
}
function btn3out(myEvent:MouseEvent) {
    btn3.gotoAndPlay(11);
}

//BTN Calls
btn1.addEventListener(MouseEvent.CLICK, fillDriveway);
btn1.addEventListener(MouseEvent.ROLL_OVER, btn1over);
btn1.addEventListener(MouseEvent.ROLL_OUT, btn1out);
btn1.buttonMode = true;
btn1.useHandCursor = true;
btn2.addEventListener(MouseEvent.CLICK, maskDrive);
btn2.addEventListener(MouseEvent.ROLL_OVER, btn2over);
btn2.addEventListener(MouseEvent.ROLL_OUT, btn2out);
btn2.buttonMode = true;
btn2.useHandCursor = true;
btn3.buttonMode = true;
btn3.useHandCursor = true;
btn3.addEventListener(MouseEvent.ROLL_OVER, btn3over);
btn3.addEventListener(MouseEvent.ROLL_OUT, btn3out); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:18:22.883

您是否尝试将其投射到 MovieClip 中？

```
var mc:MovieClip = this.getChildByName("mc1") as MovieClip;
if(mc)
{
    mc.gotoAndPlay();
} 
```

# ruby-on-rails - 大型机器上的 Rails 应用程序只能获得 60 个请求/秒的基准测试结果

> ID：10229057
> 
> 赞同：4
> 
> 时间：2012-04-19T13:23:20.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, ubuntu-11.04, apachebench

我在一台强大的机器上托管了一个 Rails 应用程序——我认为——它应该能够处理比我给它的负载高得多的负载。以下是来自 ApacheBench 的令人印象深刻的测试结果：

```
ab -kc 250 -n 1000 -H "Accept-Encoding: gzip,deflate" https://www.mysite.com/

Server Software:        nginx/1.0.15
Server Hostname:        www.mysite.com
Server Port:            443
SSL/TLS Protocol:       TLSv1/SSLv3,DHE-RSA-AES256-SHA,2048,256

Document Path:          /
Document Length:        4258 bytes

Concurrency Level:      250
Time taken for tests:   16.498 seconds
Complete requests:      1000
HTML transferred:       4258000 bytes
Requests per second:    60.61 [#/sec] (mean)
Time per request:       4124.432 [ms] (mean)
Time per request:       16.498 [ms] (mean, across all concurrent requests)
Transfer rate:          282.83 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      302 1801 866.3   1623    3583
Processing:   183 1993 867.9   1873    7050
Waiting:      183 1880 864.2   1743    7036
Total:       1397 3794 1389.0   3558   10580

Percentage of the requests served within a certain time (ms)
  50%   3558
  66%   4012
  75%   4179
  80%   4712
  90%   4947
  95%   6411
  98%   8376
  99%   8380
 100%  10580 (longest request) 
```

呸。也许我弄错了，但我觉得我应该能够获得比每秒 60 个请求高得多的请求，并且每个请求的时间比 4.1 秒要低得多。

该应用程序位于 c1.xlarge EC2 实例上（7 GB 内存，20 个 EC2 计算单元，8 个虚拟内核，每个内核有 2.5 个 EC2 计算单元，1690 GB 实例存储 64 位平台，I/O 性能：高）。运行 ApacheBench 基准测试的站点根目录正在被操作缓存，甚至不会触及数据库。对它的单个请求如下所示：

```
Started GET "/" for ##.###.###.## at Thu Apr 19 13:05:50 +0000 2012
  Processing by OneOfMyControllers#index as HTML
  Read fragment views/www.mysite.com/index (1.1ms)
  Completed 200 OK in 2ms 
```

这台机器运行的是 Ubuntu 11.04，我使用的是 Rails 3.1、Ruby 企业版、Passenger 和 nginx。我的 nginx 配置如下所示：

```
worker_processes  8;
worker_rlimit_nofile 65535;

events {
    worker_connections 4096;
}

http {
    passenger_root /usr/lib/ruby/gems/1.8/gems/passenger-3.0.8;
    passenger_ruby /usr/bin/ruby1.8;

    rails_spawn_method smart;
    rails_app_spawner_idle_time 0;
    rails_framework_spawner_idle_time 0;

    passenger_max_pool_size 60;
    passenger_pool_idle_time 1000;

    ssl_session_cache shared:SSL:3m;  # 3MB can hold about 12k SSL cache sessions
    ssl_session_timeout 5m; # average user spends 5 minutes on our site

    include       mime.types;
    default_type  application/octet-stream;

    sendfile       on;
    tcp_nopush     on; # useful with the sendfile option
    tcp_nodelay    off; 

    keepalive_timeout     10;
    send_timeout          10;
    client_body_timeout   10;
    client_header_timeout 10;

    gzip              on;
    gzip_static       on;
    gzip_disable      "MSIE [1-6]\.";
    gzip_comp_level   4;
    gzip_buffers      16 4k;
    gzip_min_length   1000;
    gzip_proxied      any;
    gzip_vary         on;
    gzip_types        text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
    gzip_http_version 1.0; # Amazon CloudFront uses HTTP/1.0                                            

    include /opt/nginx/conf/sites-enabled/*;
} 
```

在 /opt/nginx/conf/sites-enabled/mysite.com 内部，我有：

```
server {
    listen         80;
    server_name    mysite.com;

    rewrite ^/(.*) http://www.mysite.com/$1 permanent;
}
server {
    listen         443;
    ssl            on;
    server_name    mysite.com;

    ssl_certificate           /opt/mysite/ssl/wildcard_gandi_2012/combined-certification.crt;
    ssl_certificate_key       /opt/mysite/ssl/wildcard_gandi_2012/monserveur.key;
    ssl_protocols             SSLv3 TLSv1;
    ssl_ciphers               HIGH:!ADH:!MD5;
    ssl_prefer_server_ciphers on;

    rewrite ^/(.*) https://www.mysite.com/$1 permanent;
}
server {
    listen            80;
    server_name       *.mysite.com www.mysite.com;

    root /opt/mysite/public;

    passenger_enabled on;

    access_log  /opt/mysite/log/nginx_access.log;
    error_log   /opt/mysite/log/nginx_error.log;

    # Set the maximum file upload size to 25 MB.
    client_max_body_size 25M;
}
server {
    listen            443;
    ssl               on;
    server_name       *.mysite.com www.mysite.com;

    ssl_certificate           /opt/mysite/ssl/wildcard_gandi_2012/combined-certification.crt;
    ssl_certificate_key       /opt/mysite/ssl/wildcard_gandi_2012/monserveur.key;
    ssl_protocols             SSLv3 TLSv1;
    ssl_ciphers               HIGH:!ADH:!MD5;
    ssl_prefer_server_ciphers on;

    root /opt/mysite/public;

    passenger_enabled on;

    access_log  /opt/mysite/log/nginx_access.log;
    error_log   /opt/mysite/log/nginx_error.log;

    # Set the maximum file upload size to 25 MB.
    client_max_body_size 25M;

    # Asset caching
    location ~ ^/(assets)/  {
        root /opt/mysite/public;
        gzip_static on;
        access_log off;
        expires 1y;
        add_header Cache-Control public;
        add_header Last-Modified "";
        add_header ETag "";
        break;
    }
} 
```

知道为什么我不能超过 60 个请求/秒吗？有什么明显的我忽略了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:50:40.307

我怀疑你的一个大问题是https。

我刚刚运行了一些比较基准测试，对我来说，在这样一个非常基本的页面上，它们显示出 2-4 倍的速度下降。如果您点击 HTTP 页面，您的指标会增加吗？

还要检查您的乘客状态 ( `rvmsudo passenger-status`) 以检查所有进程是否已加载并在它们之间平均分配请求。

# hibernate - spring mvc 3和hibernate中的多对一映射

> ID：10229063
> 
> 赞同：1
> 
> 时间：2012-04-19T13:23:45.823
> 
> 标签：hibernate, spring-mvc

我有两个表： writers: writer_id(pk, auto increment), writer_name(varchar) 文章：article_id(pk,auto increment), article_name(varchar),writer_id(fk,int)

一位作家可以有不止一篇文章。所以从文章到作者的映射是多对一的。

这是我的文章模型：

```
@Entity
@Table(name = "articles")
public class Article {
   @Id
   @GeneratedValue
   @Column(name = "article_id")
   private Long articleId;

   @Column(name = "article_name", nullable = false, length=20)
   private String articleName;

   private Writer writer;

   public Writer getWriter() {
       return writer;
   }

   public void setWriter(Writer writer) {
       this.writer = writer;
   }
   //rest of setters and getters
} 
```

writer 属性的注释是什么？

这是我的控制器类：

```
public class ArticleController {
    @Autowired
    private ArticleService articleService;

    @RequestMapping(value = "/add", method = RequestMethod.GET)
    public ModelAndView addArticle(@ModelAttribute("article") Article article,BindingResult result) {
    return new ModelAndView("addArticle");
    }

    @RequestMapping(value = "/save", method = RequestMethod.POST)
    public ModelAndView saveArticle(@ModelAttribute("article") Article article,BindingResult result) {
     articleService.addArticle(article);
     return new ModelAndView("redirect:/articles/list");
    }
} 
```

在我的 addArticle.jsp 页面中，我在一个选择框中填充了作者（它的值是 writer_id，标签是 writer_name）。

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:30:10.567

这是一个选项，其他选项可用：

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "writer_fk", nullable = false)
private Writer writer; 
```

在作家中，您可以拥有

```
@OneToMany(mappedBy = "writer")
private Set<Article> articles= new HashSet<Article>(); 
```

# jquery - 垂直滑动菜单

> ID：10229069
> 
> 赞同：0
> 
> 时间：2012-04-19T13:24:02.973
> 
> 标签：jquery

我创建了一个菜单。这是非常基本的，但我遇到了一个到目前为止我还没有弄清楚的问题。

页面加载时。所有链接都隐藏在菜单选项卡中。当用户单击选项卡链接时显示。但是当用户单击任何链接选项卡时再次折叠。因此，每次用户都必须单击选项卡才能单击任何链接。

我希望在用户单击选项卡之前显示链接。

请在下面检查我的代码。请帮忙，这已经两天了，我正在处理这个问题。

```
<a id="doc_test" >
    <img src="../../images/menu_icons/documents_button.png" border="0"  />
</a>
<br />
<div id="docSubLink_test" style="padding-left:10px;display: none;">
    <a class=""  id="d1" href="#" >apple</a><br />
    <a class=""   id="d2" href="#" >grapes</a><br />
    <a class=""   id="d3" href="#" >orange</a><br />
    <a class=""   id="d4" href="#" >peach</a><br />
</div> 
```

Javascript：

```
if($('#docSubLink_test').is(':visible')) {
   $('#doc_test').click(function(){
       alert('1');
       //$('docSubLink_test').css("display","inline");  
       $('#docSubLink_test').slideUp(500);
       //$('docSubLink_test').slideUp('medium'); 
   });
}

if($('#docSubLink_test').is(':hidden')) {
   $('#doc_test').click(function(){
       //alert('1');
       //$('docSubLink_test').css("display","inline");  
       $('#docSubLink_test').show(500);
       //$('docSubLink_test').slideUp('medium'); 
   });
}

//Link to other page
$('#d1').click(function(){  
    $.get('http://www.abc.com/products/doc_test.php?orange',function(data){         
        $('body').html(data); 
    }); 
});
$('#d2').click(function(){          
    $.get('http://www.abc.com/products/doc_test.php?apple',function(data){
        $('body').html(data); 
    }); 
});
$('#d3').click(function(){  
    $.get('http://www.abc.com/products/doc_test.php?peach',function(data){
        $('body').html(data); 
    });
});
$('#d4').click(function(){  
    $.get('http://www.abc.com/products/doc_test.php?grapes',function(data){
        $('body').html(data); 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:45:42.240

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#doc_test').click(function () {
                $('#docSubLink_test').is(':visible') ? $('#docSubLink_test').slideUp(500) : $('#docSubLink_test').slideDown(500);
            });

            $('.subLinkD').click(function () {
                var obj = $(this);

                $('#docSubLink_test').slideUp(500);

                //                $('#loadHerfContent').load(obj.data('href'), function (response, status, xhr) {
                //                    if (status == "error") {
                //                        var msg = "Sorry but there was an error: ";
                //                        $("#loadHerfContent").html(msg + xhr.status + " " + xhr.statusText);
                //                    }
                //                });

                $.get(obj.data('href'), function (data) {
                    $('#loadHerfContent').html(data);
                });
            });
        });
    </script>
</head>
<body>
    <a id="doc_test" style="cursor: pointer; font-size: large; font-weight: bolder;">
        <img src="../../images/menu_icons/documents_button.png" border="0" />Main Tab
    </a>
    <br />
    <div id="docSubLink_test" style="padding-left: 10px; display: none;">
        <a class="subLinkD" id="d1" href="#" data-href="http://www.abc.com/products/doc_test.php?apple">
            apple</a><br />
        <a class="subLinkD" id="d2" href="#" data-href="http://www.abc.com/products/doc_test.php?grapes">
            grapes</a><br />
        <a class="subLinkD" id="d3" href="#" data-href="http://www.abc.com/products/doc_test.php?orange">
            orange</a><br />
        <a class="subLinkD" id="d4" href="#" data-href="http://www.abc.com/products/doc_test.php?peach">
            peach</a><br />
    </div>
    <div id="loadHerfContent">
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:33:08.910

我已经修好了那个。当我用 ajax 结果刷新身体时。所以每次我点击任何链接时，它都会刷新包含菜单本身的整个正文。所以菜单崩溃。Gaby aka G. Petrioli 在评论中给出了正确答案

# c# - 如何在 C# .NET 中捕获打印作业

> ID：10229077
> 
> 赞同：5
> 
> 时间：2012-04-19T13:24:23.380
> 
> 标签：c#, .net, printing

我正在尝试在我们的本地网络中捕获提交给打印机的每个打印作业。我想显示作业的一些属性，例如作业名称、提交时间等。

我尝试了一个while循环，但它没有捕捉到我的打印作业，可能是因为它发生在线程休眠时。有我可以注册和处理的事件吗？我不想将所有 CPU 资源都用于无限循环地执行此任务。

我试过这个：

```
public static void WritePrinterJobs()
    {
        while (true)
        {
            foreach (var job in LocalPrintServer.GetDefaultPrintQueue().GetPrintJobInfoCollection())
            {
                Console.WriteLine(job.Submitter + " " + job.TimeJobSubmitted.ToShortDateString());
            }
            Thread.Sleep(100);
        }
    } 
```

**编辑：** 上面的代码实际上是有效的，如果它对你有用，你不需要去低级，我的错误是没有正确配置默认打印机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:09:08.040

我找到了解决方案。对于那些正在寻找一种处理打印作业事件的方法的人，请看一下：

[FindFirstPrinterChangeNotification](http://msdn.microsoft.com/en-us/library/dd162722%28v=vs.85%29.aspx)

并且还可以找到一个工作代码[监控打印作业](http://www.codeproject.com/Articles/51085/Monitor-jobs-in-a-printer-queue-NET)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-28T04:14:45.273

我有同样的要求，我尝试按照*Mert Akcakaya*在他的回答中提出的建议来实施。***这一切正常，但如果 Windows 服务Print Spooler***停止工作，可能会停止。

所以相反，我使用`WMI`. *此Codeproject*文章[在此处](https://www.codeproject.com/Articles/6592/A-Simple-Approach-for-Controlling-Print-Jobs-using)提供了详细说明

参考这篇*文章*，我写了一段下面的代码来持续监控打印机作业。这里我只对打印作业感兴趣`Spooling`。

```
 internal void MonitorPrinterJobs()
        {                
            try
            {
                Task.Run(async delegate
                   {
                       while (true)
                       {
                           string searchQuery = "SELECT * FROM Win32_PrintJob";
                           ManagementObjectSearcher searchPrintJobs = new ManagementObjectSearcher(searchQuery);
                           ManagementObjectCollection prntJobCollection = searchPrintJobs.Get();
                           foreach (ManagementObject prntJob in prntJobCollection)
                           {
                               string jobName = prntJob.Properties["Name"].Value.ToString();
                               string jobStatus = Convert.ToString(prntJob.Properties["JobStatus"]?.Value);

                               if (jobStatus == "Spooling")
                               {
                                  // do job
                               }
                           }
                           await Task.Delay(100);
                       }
                   });
            }
            catch (Exception ex)
            {
               // handle exception
            }
        } 
```

# c# - 从 A 动态/运行时加载程序集 C，其中 C 和 A 都引用 B

> ID：10229081
> 
> 赞同：0
> 
> 时间：2012-04-19T13:24:40.917
> 
> 标签：c#, reflection, reference, assemblies, runtime

我已经有以下场景工作：

*   程序集`A.exe`：调用 WinForms 应用程序。
*   程序集`B.dll`：由 . 硬引用的类库`A`。
*   程序集`C.dll`：在运行时编译和引用`B`（类从类继承`B`）。

`A.exe`在运行时编译一些代码`C.dll`，加载程序集并调用`((B.BaseClass) C.DerivedClass).BaseMethod();`

`C`如果我作为 DLL编译到磁盘，它会`B.dll`在同一个文件夹中提取。但是，我根本不想写入`C.dll`磁盘。

什么方法最适合实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:36:49.407

我通常会做这样的事情（在您的应用程序早期的某个地方注册 AssemblyResolve，例如在 Program.cs 或 App.xaml.cs 中）：

```
 //Since we'll be dynamically loading assemblies at runtime, we need to add an appropriate resolution path
    //Otherwise weird things like failing to instantiate TypeConverters will happen
    AppDomain.CurrentDomain.AssemblyResolve += CurrentDomain_AssemblyResolve;

private Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
{
    var domain = (AppDomain)sender;

    foreach (var assembly in domain.GetAssemblies())
    {
        if (assembly.FullName == args.Name)
            return assembly;
    }

    return null;
} 
```

# iphone - 在 ios 中的 tableview、uipiceker 和 uidatepicker 视图类中执行滚动

> ID：10229084
> 
> 赞同：0
> 
> 时间：2012-04-19T13:24:47.267
> 
> 标签：iphone, objective-c, uiscrollview

我想以编程方式在表格视图、选择器视图中执行滚动。

程序应根据给定的起点和终点在视图中滚动。如何做到这一点。此代码用于测试 ui 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:46:33.840

`UITableView`您可以使用 以编程方式滚动 a `scrollToRowAtIndexPath:atScrollPosition:animated:`，例如：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:2 inSection:1];
[tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES]; 
```

在`UIPickerView`您使用的情况`selectRow:inComponent:animated:`下，例如：

```
[pickerView selectRow:2 inComponent:0 animated:YES]; 
```

在一个`UIDatePicker`你会使用`setDate:animated:`，例如：

```
[datePicker setDate:[NSDate date] animated:YES]; 
```

# iphone - 第一次点击按钮意味着地图没有显示

> ID：10229086
> 
> 赞同：0
> 
> 时间：2012-04-19T13:24:55.807
> 
> 标签：iphone, android-mapview

我是 iPhone 应用程序开发的新手。我在我的应用程序中开发了地图集成。在我的应用程序中，一个视图具有一个按钮。当我单击此按钮时，意味着第一次不显示地图，（它显示为没有图像）。然后第二次点击意味着地图显示。问题是什么。任何人知道意味着请告诉我。

谢谢。

# ruby-on-rails - Ruby on Rails 为“查找”函数添加双引号

> ID：10229093
> 
> 赞同：2
> 
> 时间：2012-04-19T13:25:13.070
> 
> 标签：ruby-on-rails, oracle10g, double-quotes, legacy-database

我是 ruby​​ on rails 的新手，我遇到了 find 功能的问题。

我创建了一个新的 Web 应用程序，它使用 oracle 增强适配器 gem 连接到旧版 Oracle 数据库。

当我在 rails 控制台中运行以下命令时，我会从数据库中取回数据

```
License.where(license_no: 'L1234') 
```

或者

```
License.find_by_license_no('L1234') 
```

但是，当我尝试使用 find() 函数时，出现错误。IE

```
License.find(:all) 
```

或者 `License.all`

rails 控制台中的错误输出如下：

```
irb(main):003:0> License.find(:all)
  ?[1m?[35mLicense Load (1062.5ms)?[0m  SELECT "LICENSE".* FROM "LICENSE"
ActiveRecord::StatementInvalid: OCIError: ORA-01878: specified field not found i
n datetime or interval: SELECT "LICENSE".* FROM "LICENSE"
        from stmt.c:289:in oci8lib_191.so
        from c:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/activerecord-o
racle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanc
ed_oci_connection.rb:155:in `fetch'
        from c:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/activerecord-o
racle_enhanced-adapter-1.4.1/lib/active_record/connection_adapters/oracle_enhanc
ed_adapter.rb:637:in `block in exec_query'
        from c:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/activerecord-3
.2.2/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in
log' 
```

查看错误输出中的 SQL 命令，我注意到选择语句中添加了双引号。当我尝试在 SQL Developer 中运行 SQL 命令时，出现错误。添加双引号有什么原因吗？有没有办法阻止 ruby​​ on rails 在表名中添加双引号？

**更新**oracle 数据库是 10g，我正在使用带有 ruby​​ 1.9.2p290 的 rails 3.2。我也尝试了以下方法并得到了同样的错误。 `License.all`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:42:25.393

在 Rails 3 中使用 find 函数（取决于您使用的 Rails 版本）的正确格式是：

```
License.where('license_no = ?', 'L1234') 
```

或者

```
License.all 
```

找到所有这些。

如果您使用的是 Rails 2，则格式为：

```
License.find(:all, :conditions =>  ["license_no = ?", "L1234"]) 
```

**在此处查看基于动态属性的**查找器部分：

[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:32:29.553

`Model.find`不接受哈希作为第一个参数。所以它`license_no: 'L1234'`以错误的方式对待你的哈希（）。

[http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find)

# java - 通过列表、同步和使用迭代器进行迭代时出现 ConcurrentModificationException

> ID：10229094
> 
> 赞同：-1
> 
> 时间：2012-04-19T13:25:17.097
> 
> 标签：java, concurrency, synchronization, iterator

如何获得此代码块的 ConcurrentModificationException ？

```
synchronized (list) {
        for (Iterator<?> it = list.iterator(); it.hasNext(); ) {
            Object object = it.next();
            // do something to object without touching list
        }
} 
```

编辑：对不起，这不够具体：//对对象做一些事情不会触及列表

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T13:29:26.817

例如，通过让另一个线程修改列表。

仅仅因为您同步此代码块并不意味着对列表的所有访问都被阻止。它只确保列表上同步的所有其他块不能并行执行。

如果列表由多个线程共享，则它的**所有**使用必须在同一个监视器上同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:27:07.170

如果“做某事”直接或间接地添加或删除某些东西`list`（除了使用`it.remove()`或类似的方法），那么你会得到这个异常。在这种情况下，同步不会阻止它发生。

# objective-c - 使用 libssh2 的 EXC_BAD_ACCESS？

> ID：10229104
> 
> 赞同：1
> 
> 时间：2012-04-19T13:25:50.393
> 
> 标签：objective-c, ios

我终于能够编译 libssh2，但现在我一直看到`EXC_BAD_ACCESS`错误。

这是关于 libssh2 如何工作的基本背景（至少是 GUI）是这样的......

1.  输入命令
2.  输入主机 IP
3.  输入用户名/密码
4.  按下按钮发送 SSH 命令

现在，像这样的简单命令可以`echo Hello World`正常工作，但是作为一个项目的整个想法是能够远程重新启动我的 mac。最初，使用该命令`shutdown -r`不会在远程机器上发生任何事情，并导致应用程序崩溃。然后我有了一个想法，我可以通过使用该命令简单地打开一个重新启动 mac 的 applescript 应用程序，该`open /path/to/restart.app`命令运行良好。机器重新启动，yippee！

除了，应用程序崩溃并出现以下错误：

```
Thread 1: EXC_BAD_ACCESS (code=1, address=_____) 
```

我对objective-c真的很陌生，我不知道如何解决这个问题。在google上查找，我发现它是由以下原因引起的：

1.  内存问题
2.  消息被发送到一个已经被释放的对象（我不确定这是什么意思，有什么帮助吗？）

所以，我猜一旦命令通过 SSH 发送，它就会断开连接，然后疲劳显示结果，但对象已经消失了。

我会为此发布源代码，但它有很多不同的文件，所以我将发布 github 链接：

[https://github.com/x2on/libssh2-for-iOS](https://github.com/x2on/libssh2-for-iOS)

我没有修改任何代码，所以如果有人想复制我的问题，我使用的代码与那里的代码相同。

崩溃日志：

```
Process:         libssh2-for-iOS [38153]
Path:            /Users/USER/Library/Application Support/iPhone Simulator/*/libssh2-for-iOS.app/libssh2-for-iOS
Identifier:      libssh2-for-iOS
Version:         ???
Code Type:       X86 (Native)
Parent Process:  ??? [1]
User ID:         501

Date/Time:       2012-04-18 18:32:03.883 -0400
OS Version:      Mac OS X 10.8 (12A154q)
Report Version:  10

Crashed Thread:  0

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000000000000

External Modification Warnings:
Debugger attached to process.

VM Regions Near 0:
--> __PAGEZERO             0000000000000000-0000000000001000 [    4K] ---/--- SM=NUL  /Users/USER/Library/Application Support/iPhone Simulator/*/libssh2-for-iOS.app/libssh2-for-iOS
    __TEXT                 0000000000001000-0000000000002000 [    4K] r-x/rwx SM=COW  /Users/USER/Library/Application Support/iPhone Simulator/*/libssh2-for-iOS.app/libssh2-for-iOS

Application Specific Information:
iPhone Simulator 272, iPhone OS 5.0 (iPhone/9A334)

Thread 0 Crashed:
0   ???                             0000000000 0 + 0
1   libssh2-for-iOS                 0x00003f39 _libssh2_channel_open + 281
2   libssh2-for-iOS                 0x00004837 libssh2_channel_open_ex + 151
3   libssh2-for-iOS                 0x00003714 -[SSHWrapper executeCommand:] + 212
4   libssh2-for-iOS                 0x00002b22 -[libssh2_for_iOSAppDelegate executeCommand:] + 338
5   CoreFoundation                  0x01603ec9 -[NSObject performSelector:withObject:withObject:] + 73
6   UIKit                           0x0049e5c2 -[UIApplication sendAction:to:from:forEvent:] + 96
7   UIKit                           0x0049e55a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
8   UIKit                           0x00543b76 -[UIControl sendAction:to:forEvent:] + 66
9   UIKit                           0x0054403f -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
10  UIKit                           0x00542e22 -[UIControl touchesBegan:withEvent:] + 264
11  UIKit                           0x004c393f -[UIWindow _sendTouchesForEvent:] + 272
12  UIKit                           0x004c3c56 -[UIWindow sendEvent:] + 273
13  UIKit                           0x004aa384 -[UIApplication sendEvent:] + 464
14  UIKit                           0x0049daa9 _UIApplicationHandleEvent + 8196
15  GraphicsServices                0x01cf8fa9 PurpleEventCallback + 1274
16  CoreFoundation                  0x015d61c5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
17  CoreFoundation                  0x0153b022 __CFRunLoopDoSource1 + 146
18  CoreFoundation                  0x0153990a __CFRunLoopRun + 2218
19  CoreFoundation                  0x01538db4 CFRunLoopRunSpecific + 212
20  CoreFoundation                  0x01538ccb CFRunLoopRunInMode + 123
21  GraphicsServices                0x01cf7879 GSEventRunModal + 207
22  GraphicsServices                0x01cf793e GSEventRun + 114
23  UIKit                           0x0049ba9b UIApplicationMain + 1175
24  libssh2-for-iOS                 0x00003266 main + 134
25  libssh2-for-iOS                 0x00002955 start + 53

Thread 1:
0   libsystem_kernel.dylib          0x921059be kevent + 10
1   libdispatch.dylib               0x01c9e398 _dispatch_mgr_invoke + 918
2   libdispatch.dylib               0x01c9cc9d _dispatch_mgr_thread + 53

Thread 2:: WebThread
0   libsystem_kernel.dylib          0x921027e2 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x92101cc0 mach_msg + 68
2   CoreFoundation                  0x015d613a __CFRunLoopServiceMachPort + 186
3   CoreFoundation                  0x01539605 __CFRunLoopRun + 1445
4   CoreFoundation                  0x01538db4 CFRunLoopRunSpecific + 212
5   CoreFoundation                  0x01538ccb CFRunLoopRunInMode + 123
6   WebCore                         0x03583220 RunWebThread(void*) + 560
7   libsystem_c.dylib               0x9445dd03 _pthread_start + 344
8   libsystem_c.dylib               0x944486ae thread_start + 34

Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0x00000000  ebx: 0x00000007  ecx: 0x07439400  edx: 0x00000000
  edi: 0x00040000  esi: 0x00008000  ebp: 0xbfffbbc8  esp: 0xbfffbb2c
   ss: 0x00000023  efl: 0x00010286  eip: 0x00000000   cs: 0x0000001b
   ds: 0x00000023   es: 0x00000023   fs: 0x00000000   gs: 0x0000000f
  cr2: 0x00000000
Logical CPU: 1

(Binary images removed, too many characters)

External Modification Summary:
  Calls made by other processes targeting this process:
    task_for_pid: 1
    thread_create: 0
    thread_set_state: 32
  Calls made by this process:
    task_for_pid: 0
    thread_create: 0
    thread_set_state: 0
  Calls made by all processes on this machine:
    task_for_pid: 14309
    thread_create: 0
    thread_set_state: 550

VM Region Summary:
ReadOnly portion of Libraries: Total=155.0M resident=50.0M(32%) swapped_out_or_unallocated=105.0M(68%)
Writable regions: Total=36.7M written=2264K(6%) resident=9020K(24%) swapped_out=108K(0%) unallocated=27.9M(76%)

REGION TYPE                      VIRTUAL
===========                      =======
CG image                             16K
CoreAnimation                       532K
MALLOC                             21.8M
MALLOC guard page                    32K
Memory tag=35                      10.8M
SQLite page cache                   288K
Stack                              65.3M
VM_ALLOCATE                         136K
__DATA                             9660K
__LINKEDIT                         55.9M
__PAGEZERO                            4K
__TEXT                             99.1M
__UNICODE                           544K
mapped file                       237.8M
shared memory                        12K
===========                      =======
TOTAL                             501.6M 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:46:03.730

我已经从[https://github.com/x2on/libssh2-for-iOS](https://github.com/x2on/libssh2-for-iOS)下载了示例代码，编译了 libssl & libssh2 和应用程序。当我运行该应用程序时，我遇到了与您非常相似的错误：

```
Thread 1: EXC_BAD_ACCESS (code=2, address=0x12c) 
```

当由于某种原因未建立连接时，我会发生这种情况。例如，如果您不输入任何 IP 地址，则会发生此异常，或者如果您输入的内容不是 IP 地址。

问题似乎出在 x2on 的应用程序中，而不是在 libssh2 或 libssl 中。当我调试应用程序时，我发现当无法建立连接时，调用的变量`session`为NULL。因此，后面的调用`libssh2_channel_open_session`将因此异常而失败，因为它希望其参数不为 NULL。

请参阅以下屏幕截图：

![调试异常](../Images/39bee8159d619c8a0e13b6705e398900.png)

在左下角，您可以看到`session`变量的值。如果它是NULL，那么这就是问题所在。您还可以在右下角的控制台输出窗口中看到问题的原因，在我的情况下，它是“连接失败！”。

无论如何，x2on 的代码似乎是一个非常非常糟糕的代码示例，它忽略了错误，使用了糟糕的编码风格和许多不正确的技术（全局变量，未设置 rootviewcontroller）和其他不好的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:39:55.627

x2on 代码有很多错误；让我们检查一下 executeCommand 例程：

*   它完全忽略了从服务器返回的缓冲区的数据长度：返回的文本没有尾随零，因此如果您对该例程进行多次调用，您将得到尾随垃圾。解决方案：使用 rc1 值来获取它的长度（见下文）。

*   它会循环直到接收到所有数据，但它不会在结果字符串中累积该数据，因此您只会获得收到的最新文本，而不是完整的服务器答案。解决方案：使用 NSMutableString 代替 NSString 并将结果附加到它：

    ```
    NSMutableString *result = [[NSMutableString alloc] initWithString: @""];
    ...
    if( rc1 > 0 ) {
        [result appendString: [[NSString alloc] initWithCString:buffer length: rc1]];
            bytecount += rc1;
        } 
    ```

*   *结果处理不正确；如果你多次调用例程，从第二次调用你会得到一个异常。快速解决方法：

    ```
    if (result) return result;
    else return @"Error - command failed"; 
    ```

# javascript - Google Docs 像素到英寸

> ID：10229109
> 
> 赞同：2
> 
> 时间：2012-04-19T13:26:22.787
> 
> 标签：javascript, google-docs, google-docs-api

有人知道谷歌文档用来将像素转换为英寸的公式吗？

右键单击一个单元格并单击表格属性，然后您会得到下图，注意我打开了 firebug，您可以清楚地看到每个 td 都设置了 px 宽度。我可以使用英寸或毫米或等效值打印到 pdf，但像素不是那么准确。

这一切都是在客户端完成的，因此 javascript 标记...

![在此处输入图像描述](../Images/478c35505123929ba108f76c5d7f40d4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:14:20.893

Haroon，我不确定你要做什么，但 PC 显示器通常是 96DPI，我认为谷歌已经用他们在文档 webapp 中设置的缩放级别模拟了这一点。

我们可以通过截取googledocs的屏幕截图并将其粘贴到paint中，然后测量文档宽度来确认它已接近。

我从油漆中的选择工具中获得了 796 像素。我正在使用 210 毫米宽的 A4 纵向页面。这意味着我们可以做 796/210 来获得我们的像素密度。

`1 millimetre = 3.79 pixels`

乘以 2.54

`1 inch = 96 pixels`

我不知道这是否会与其他显示器分辨率或纸张尺寸保持一致，但我希望它会接近！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-13T03:04:27.780

旧问题和相同的旧答案，但来自不同的来源。当图像被插入谷歌文档时，我一直试图让图像显示“正确”的大小。他们总是太小了。所以我插入了一个已知尺寸并打印出来并手动检查了尺寸。从这些维度我可以确认谷歌确实使用了 96 DPI。

# php - PHP将数组存储到MySQL并检索

> ID：10229110
> 
> 赞同：0
> 
> 时间：2012-04-19T13:26:28.937
> 
> 标签：php, mysql, arrays

```
$array = array('1','2','3','4','5','6','10','100');
$array2 = serialize($array);
if($stmt->prepare("UPDATE `users` SET `dungeon_list` = ? WHERE name = ?")) { $stmt->bind_param('bs',$array2,$user['name']); $stmt->execute(); } 
```

这是我学到的如何将数组存储到 mysql 中。

```
echo unserialize($user['dungeon_list']); 
```

这就是我输出它的方式。它说 Notice: unserialize() [function.unserialize]: Error at offset 0 of 140 bytes in C:\wamp\www\index.php 第 12 行

Dungeon_list 存储为一个 blob，因为我已经学会了使用它来存储它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:27:41.337

尝试在序列化和反序列化之前对数组进行编码和解码，因为如果它在任何数组值中有任何 "、'、: 或 ; ，则序列化会被破坏。

```
//to safely serialize
$safe_string_to_store = base64_encode(serialize($multidimensional_array));

//to unserialize...
$array_restored_from_db = unserialize(base64_decode($encoded_serialized_string)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:40:54.107

我不知道你的内容是什么`$user['dungeon_list']`，最好提供内容。

无论如何，这可能是由 PHP`magic_quotes_gpc`指令引起的。检查它是否设置为 ON 可能是有意义的，如果是，不妨将其设置为 OFF。提供一些深度细节，例如您从哪里/如何获得您的内容`$user['dungeon_list']`并显示 a`var_dump`或`print_r`它的内容。

# iphone - 改变颜色的细节视图

> ID：10229111
> 
> 赞同：0
> 
> 时间：2012-04-19T13:26:28.810
> 
> 标签：iphone, xcode, uitableview, detailsview

我有一个用于三个不同表的详细视图我需要更改表中的一些值（背景图像。瓷砖的颜色）来自或在 xml 中设置颜色，任何人都可以帮助我吗？

这是填充详细视图的代码

```
//Definizione Foto
NSString *photo = mieRicette.foto;
foto.image = [UIImage imageNamed:photo];

//Definizione Foto Orizzontale
NSString *photoOrizz = mieRicette.foto;
fotoOrizz.image = [UIImage imageNamed:photoOrizz];

//definizione Nome Orizzontale
nomeOrizz.font = [UIFont fontWithName:@"populaire" size:37.5];
nomeOrizz.textColor = [UIColor whiteColor];
nomeOrizz.text=mieRicette.nome;

//definizione Dose
dose.font = [UIFont fontWithName:@"populaire" size:25];
dose.textColor = [UIColor whiteColor];
dose.text=mieRicette.dose;

//definizione Nome e suo colore
nome.font = [UIFont fontWithName:@"LegacySerifLT-MediumItalic" size:25];
nome.text = mieRicette.nome;
nome.textColor = [UIColor colorWithRed:55.0f/255.0f green:70.0f/255.0f blue:48.0f/255.0f alpha:1.0f];

//definizione Tempo
tempo.font = [UIFont fontWithName:@"populaire" size:25];
tempo.textColor = [UIColor colorWithRed:55.0f/255.0f green:70.0f/255.0f blue:48.0f/255.0f alpha:1.0f];
tempo.text=mieRicette.tempo;

//definizione Background
NSString *bck = mieRicette.bck;
background.image = [UIImage imageNamed:bck]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:27:50.660

第1步。为每个 tableview 设置标签，如标签 0,1,2

第2步。在detailedviewcontroller中创建一个uiimage实例然后合成它

第三步。在推送详细视图控制器之前，根据tableview设置详细视图控制器的图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:43:37.177

您可以在推送详细视图控制器之前设置详细视图的背景。

# jquery - jqplot 强制刻度为每 15 分钟

> ID：10229113
> 
> 赞同：1
> 
> 时间：2012-04-19T13:26:40.820
> 
> 标签：jquery, time, jqplot

我的数据每 15 分钟显示过去 24 小时的信息。我希望能够用 xaxis 显示 15 分钟或每小时的增量来绘制这些数据。在同一个视图中将显示太多数据，所以我知道它会抽筋并且看起来像一个块。我希望能够使用缩放然后放大这些，这样我们就可以看到我们放大的每 15 分钟。我遇到的问题即使数据是每 15 分钟 x 轴在 06:37 等奇数时间跳动。我希望它总是一个小时或每 15 分钟这可能吗？

我曾尝试使用 tickInterval: '15 minutes' 但似乎没有什么不同。每次我运行它时，我可能有或多或少的值，所以即使设置刻度数也无济于事，除非我在缩放时更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:59:00.473

您的问题似乎与我不久前遇到的问题有关。让 tickInterval 使用日期轴的唯一方法是设置 min 和 max 参数。[请在我对类似问题的其他答案中找到一个示例。](https://stackoverflow.com/a/10233111/613495)

# iframe - Youtube - 如何在嵌入链接中强制 480p 视频质量 /

> ID：10229114
> 
> 赞同：47
> 
> 时间：2012-04-19T13:26:45.440
> 
> 标签：iframe, youtube

How to force 480p video quality for iframed Youtube videos?

Sample code:

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/FqRgAs0SOpU" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-24T09:45:15.490

将以下参数附加到 Youtube-URL：

144p：&vq=小
240p：&vq=小
360p：&vq=中
480p：**&vq=大**
720p：&vq=hd720

例如：

```
src="http://www.youtube.com/watch?v=oDOXeO9fAg4" 
```

变成：

```
src="http://www.youtube.com/watch?v=oDOXeO9fAg4&vq=large" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-03T10:00:24.607

您还可以使用 1080 hd 值：

240p: &vq=小, 360p: &vq=中, 480p: &vq=大, 720p: &vq=hd720, **&vq=hd1080**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:39:19.657

我发现截至 2012 年 5 月，如果您将帧大小设置为使最小像素区域（宽度•高度）高于某个阈值，它会将质量从 360p 提升到 480p，如果您的视频至少640 x 360。

我发现将嵌入帧的帧大小设置为**780** x 480 会触发 480p 质量，而不会扭曲视频（放大）。640 x **585**也以这种方式工作。我也使用了该`&hd=1`参数，但如果您的视频不是以高清（720p 或更高）上传，我怀疑这有很大的控制力。

例如：

```
<iframe width="780" height="480" src="http://www.youtube.com/embed/[VIDEO-ID]?rel=0&fs=1&showinfo=0&autohide=1&hd=1"></iframe> 
```

当然，缺点是通过设置这些静态框架尺寸，您很可能会在侧面或上方和下方看到黑条，具体取决于您的喜好。

如果您不关心控件被截断，您可以继续使用 CSS 并`overflow: hidden`从框架中裁剪黑条，前提是您知道视频的确切尺寸。

希望这会有所帮助，并希望 Embed 方法有一天能再次获得离散的质量参数！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T13:35:19.680

您可以使用[YouTube JavaScript 播放器 API](https://developers.google.com/youtube/js_api_reference)，它本身具有设置播放质量的功能。

```
player.setPlaybackQuality(suggestedQuality:String):Void 
```

> 此功能为当前视频设置建议的视频质量。该功能使视频以新质量重新加载到其当前位置。如果播放质量确实发生了变化，它只会随着正在播放的视频而变化。调用此函数并不能保证播放质量会真正改变。但是，如果播放质量确实发生了变化，onPlaybackQualityChange 事件将触发，并且您的代码应该响应该事件，而不是它调用 setPlaybackQuality 函数的事实。[[资源]](https://developers.google.com/youtube/js_api_reference#Playback_quality)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-19T13:41:04.353

您可以使用该`fmt=`参数并根据下表填写值：

[http://en.wikipedia.org/wiki/YouTube#Quality_and_codecs](http://en.wikipedia.org/wiki/YouTube#Quality_and_codecs)

例如：您的网址将变为：

```
http://www.youtube.com/embed/FqRgAs0SOpU?fmt=35 
```

# asp.net - 跟踪 bin 文件夹中的 dll 来自哪里

> ID：10229117
> 
> 赞同：2
> 
> 时间：2012-04-19T13:26:48.730
> 
> 标签：asp.net, .net

我今天注意到，每当我在我的项目中构建一个 word add 时，Microsoft.Sharepoint.dll 都会被复制到 bin 文件夹中，并随后在发布时包含在内。

有没有一种简单的方法可以查看为什么在发布时包含这个（令人讨厌的大）dll？

它没有被直接引用。项目页面中有 3 个依赖项，我检查了所有这些项目，也没有一个直接引用它。我还需要继续关注这些项目的依赖关系吗？

是否没有某种可以给我提示的构建日志文件？

**编辑**：

问题是我的项目引用了一个项目，该项目引用了一个对 Microsoft.SharePoint.dll 的引用并将本地复制设置为 true 的项目。我不得不从所有项目中删除 dll 并在将本地复制设置为 false 的情况下进行重建。我没有意识到第 3 方 dll 会被复制到我的项目中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:32:28.090

如果这是由于来自另一个 DLL 的依赖而被引入，那么请尝试查看[Dependency Walker](http://www.dependencywalker.com/)中的所有 DLL 。它找到 dll 具有的所有依赖项。这通常仅在它们实际被使用/绑定时，但您也可以使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx)查看所有 DLL 绑定的绑定位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:35:16.277

您可以查看 asp.net 的反射机制，或者如果没有，您可以使用 firebug 运行跟踪以在浏览器上进行交叉引用，

# c# - Ways to increase performance of DataTable.Load()?

> ID：10229118
> 
> 赞同：2
> 
> 时间：2012-04-19T13:26:48.777
> 
> 标签：c#, .net, datatable

I currently use a custom CSV class from Codeproject to create a CSV object. I then use this to populate a DataTable. Under profiling this is taking more time than I would like and I wonder if there is a more efficient way of doing it?

The CSV contains approximately 2,500 rows and 500 columns.

The CSV reader is from: [http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

```
StreamReader s = new StreamReader(confirmedFilePath);
CsvReader csv = new CsvReader(s, true);
DataTable dt = new DataTable();
dt.Load(csv); 
```

I came across a google search suggesting a DataAdapter, but it was only one reference to this? I searched further but didn't find any collaboration.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:20:12.950

CsvReader 快速且可靠，我几乎可以肯定您找不到更快的（如果有的话）来读取 CSV 数据。

限制来自处理新数据的DataTable，2500 * 500就够了。我认为最快的方法是直接 CsvReader->DataBase (ADO.NET) 链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:39:54.573

[试试](http://www.codeproject.com/Articles/11698/A-Portable-and-Efficient-Generic-Parser-for-Flat-F)GenericParser 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:41:36.313

从数据库填充时始终使用`BeginLoadData()`and `EndLoadData()`，因为它们已经自己强制执行约束 - 唯一的缺点是 CSV 文件显然没有，因此只有在整个操作结束后才会引发任何异常。

```
...
dt.BeginLoadData();
dt.Load(csv, LoadOption.Upsert);
dt.EndLoadData(); 
```

**编辑：**`LoadOption.Upsert`仅当`DataBase`为空，或者您不想保留对现有数据的任何先前更改时才使用- 这样更快。

# java - How to set canvas size?

> ID：10229121
> 
> 赞同：9
> 
> 时间：2012-04-19T13:27:06.267
> 
> 标签：java, android, android-canvas, ondraw

I have a class named SeatsPanel where I draw seats (using drawRect) in the onDraw method. The onDraw method uses Canvas as a parameter, but how do you set size of the Canvas? The reason why I'm asking this question is because this class is being inflated in another class. I know that the canvas has the default height and width of the phone, but I need to make it smaller. How can I do this?

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:03:05.890

我试图实现一个简单的应用程序，它在主要活动中绘制一个黑色矩形，即按下按钮绘制。例如，在`MainActivity`：

```
 private Button button1;
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    button1=(Button)findViewById(R.id.button);
    button1.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {
             switch(v.getId()){
                case R.id.button:

                     LinearLayout ll=(LinearLayout)findViewById(R.id.linearLayout1);
                     System.out.println(ll.getWidth()+" "+ll.getHeight());
                     LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ll.getWidth(),ll.getHeight());
                     YourView yourView = new YourView(getBaseContext());
                     yourView.setBackgroundColor(Color.WHITE);
                     ll.addView(yourView,params);
                    break;
             }

        }

    });

} 
```

在`YourView`课堂上：

```
 private Bitmap savedBitmap;
public YourView(Context context) {
    super(context);
}
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    System.out.println(canvas.getWidth()+" "+canvas.getHeight());

    Paint textPaint = new Paint();
    textPaint.setARGB(255, 0, 0, 0);
    textPaint.setTextAlign(Paint.Align.RIGHT);
    textPaint.setTextSize(11);
    textPaint.setTypeface(Typeface.DEFAULT);

    canvas.drawColor(Color.WHITE);
    System.out.println(canvas.getWidth());
    System.out.println(canvas.getHeight());

    canvas.drawRect(200, 20, 500, 100, textPaint);
} 
```

main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Push the button and draw a Rect" />

<Button
    android:id="@+id/button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Button" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:42:01.703

可能不适用于您的情况，但这对我有用

```
Bitmap animation = BitmapFactory.decodeResource(mContext.getResources(), resourceId, mBitmapOptions); //Get a bitmap from a image file

// Create a bitmap for the part of the screen that needs updating.
Bitmap bitmap = Bitmap.createBitmap(animation.getWidth(), animation.getHeight(), BITMAP_CONFIG);
bitmap.setDensity(DisplayMetrics.DENSITY_DEFAULT);
Canvas canvas = new Canvas(bitmap); 
```

这会将画布设置为位图的大小

# android - Android：在ActivityGroup中的Activity之间切换时如何重新获得EditText的焦点

> ID：10229126
> 
> 赞同：0
> 
> 时间：2012-04-19T13:27:28.990
> 
> 标签：android, android-edittext, activitygroup

我在带有 EditText 小部件的 ActivityGroup 中有一个*Activity A。*当切换到*活动 B*（在同一个活动组内）并使用后退按钮再次返回活动 A 时，我在点击 EditText 时无法调出软件键盘。我该如何解决这个问题？似乎是与此类似的焦点问题

[如何让 EditText 重新获得焦点？](https://stackoverflow.com/questions/5758645/how-to-make-edittext-regain-focus)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:47:10.003

将此添加到 Edittext 的 xml 文件中

机器人：焦点=“真”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:29:14.397

通过使用这篇文章中的方法解决了我的问题： [单击后退按钮时调用 onrestart/onresume](https://stackoverflow.com/questions/8378867/call-onrestart-onresume-when-click-on-back-button)

这样，当在活动之间切换时总是调用（子）活动的 onResume() 方法，并且我的 EditText 按预期工作（调出软件键盘）！

# highcharts - How to open highcharts in new window?

> ID：10229127
> 
> 赞同：0
> 
> 时间：2012-04-19T13:27:29.667
> 
> 标签：highcharts

> **Possible Duplicate:**
> [Highchart in new window](https://stackoverflow.com/questions/9843941/highchart-in-new-window)

I want to open bar chart of highcharts in new pop up window. Is it possible to do so? Thanks.

# css - placing a 2 divs over an existing website?

> ID：10229128
> 
> 赞同：0
> 
> 时间：2012-04-19T13:27:39.197
> 
> 标签：css, html

I'm trying to place two divs over the top of an existing website, as in this image:

![enter image description here](../Images/45f46b7a99bd5dbab01f5885c77355c5.png)

I can do this fine in firefox/google chrome etc, but it doesn't seem to work in IE.

Could someone point me to a simple example of how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:56:06.907

将以下代码放在您的脑海中并改`position:absolute`回`position:fixed`您的css

```
<!--[if IE]>
    <style type="text/css">
        .black_overlay {
            position:absolute;
            top: expression(document.compatMode=="CSS1Compat" ? document.documentElement.scrollTop+"px" : body.scrollTop+"px");
        }
    </style>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:48:04.227

您唯一的选择是真正强调使用 z-index。

Z-Index 就像在 HTML 中应用图层一样，在这种情况下，您可能在顶部、中间和底部都有一个图层。因此 3 个 div 像层一样定位。

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:55:33.413

在这里我更新了css。而不是`position:absolute;`我使用的`fixed`所以它不会随着滚动而移动。

[http://jsfiddle.net/5V288/9/](http://jsfiddle.net/5V288/9/)

# google-chrome - CSS3 :empty pseudo class

> ID：10229130
> 
> 赞同：0
> 
> 时间：2012-04-19T13:27:47.920
> 
> 标签：google-chrome, css, css-selectors

I'm new and i have a question about CSS3 and :empty pseudo-class.

I create a web ajax application. In my page layout I've got a sidebar and i want to hide this if is empty. So i wrote:

```
#my_sidebar:empty { display:none;} 
```

For display it when isn't empty i wrote

```
#my_sidebar:not(:empty) { display:block; } 
```

This is working but with chrome the sidebar appear only after one click on the page or on a link. Why? Can someone help me?

Thanks! (excuse me for my terryfing english!!)

EDIT: the html page:

```
 <body id='body'>

<!-- Header -->
<header id="top" class="cf">
    <div id="branding">
        <h1><a href=" " onClick="presenter.homepage()">Project Management</a></h1>
    </div>
    <nav id="nav-user">
        <ul>
          <li><a id="user" href="profilo"><span id="username"></span><img id="avatar" class="avatar"></a></li>
          <li><a id="company" href="azienda">Azienda</a></li>
          <li><a id="logout" href="logout">Logout</a></li>
        </ul>
    </nav>
    <nav id="nav-main">
        <ul class="cf">
         <li>
            <button id="back" onClick="javascript: history.back();" href="#" />&larr;</button></li>
        </ul>
       <!--popup con task finiti -->
        <div id="task-ended" class="cf">
          <div class="triangle-border top">
          <div class="clear"></div>
        </div>

    </div><!--task-ended-->
    <!--popup con task finiti -->
  </nav>
</header>

<!-- Main Body -->
<div id="container" class="cf">
    <div id="loading" style="display:none"><img src="images/loading.gif" /></div>
    <div id="my_sidebar" class="sidebar"></div>
    <div id="main" class="main"></div>
</div>
<footer class="cf" id="footer">

Mentis Project Management 
</footer>
</body> 
```

and css:

```
.sidebar {
 float:right;
 width: 36%;
 text-align:left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:58:34.587

Chrome 错误显然只发生在该`display`属性上，因此您可以改为设置`visibility: hidden;`使其不可见并`position: absolute;`防止空间被保留。这不需要使用`:not(:empty)`.

与往常一样，每当您发现自己将浏览器推向极限时，请停下来问问自己是否有更简单的方法来完成这项工作。根据您的需要，对 jQuery`show()`和`hide()`方法的简单调用也可以正常工作。:)

# python - 2 different blocks of text are merging together. Can I separate them if i know what 1 is?

> ID：10229131
> 
> 赞同：3
> 
> 时间：2012-04-19T13:27:50.783
> 
> 标签：python, regex, pdf, extraction

I've used a number of pdf-->text methods to extract text from pdf documents. For one particular type of PDF I have, neither pyPDF or pdfMiner are doing a good job extracting the text. However, [http://www.convertpdftotext.net/](http://www.convertpdftotext.net/) does it (almost) perfectly.

I discovered that the pdf I'm using has some transparent text in it, and it is getting merged into the other text.

Some examples of the blocks of text I get back are:

```
12324  35th Ed. 01-MAR-12 Last LNM: 14/12 NAD 83 14/12          Corrective             Object of Corrective                                                                                                                   
ChartTitle: Intracoastal Waterway Sandy Hook to Little Egg Harbor Position  
            C HAActRionT    N  Y  -NJ   - S A  N  D Y    H OO    K  ATcO tionLI T TLE EGG HARBOR.  Page/Side: N/A 
(Temp) indicates that the chart correction action is temporary in nature.  Courses and bearings are givCGenD 0in 1 degrees clockwise from 000 true.       
 Bearings RoEf LlighOCtAT seEc tors aSrehre towwsbuardry th Re ivligher Ct fhroanmn seel Lawighartde.d  B Theuoy  5no minal range of lights is expressedf roin mna 4u0tic-24al -mi46les.56 0(NNM ) unless othe0r7w4is-00e n-o05te.d8.8 0 W 
to     40-24-48.585N 074-00-05.967W 
```

and

```
12352 33rd Ed. 01-MAR-11 Last LNM: 03/12 NAD 83 04/12 . . l . . . . Corrective Object of Corrective ChartTitle: Shinnecock Bay to East Rockaway Inlet Position C HAActRionT S H IN N E C OC K B A Y TO AcEtionAS T ROCKAWAY INLET. Page/Side: N/A (Temp) indicates that the chart correction action is temporary in nature. Courses and bearings are givCGenD 0in 1 degrees clockwise from 000 true. (BTeeamringp) s DoEf LlighETtE s ectors aSretat toew Baoratd Ctheh anlighnet lf Droaym beseacoawanr 3d. The nominal range of lights is expressedf roin mna 4u0tic-37al -mi11les.52 0(NNM ) unless othe0r7w3is-29e n-5o3te.d76\. 0 W 
```

and I have discovered that the "ghost text" is **ALWAYS** the following:

```
 Corrective             Object of Corrective              Position
    Action                         Action 
```

(Temp) indicates that the chart correction action is temporary in nature. Courses and bearings are given in degrees clockwise from 000 true.
Bearings of light sectors are toward the light from seaward. The nominal range of lights is expressed in nautical miles (NM) unless otherwise noted.

In the 2nd example I posted, the text I want (with the ghost text removed) is:

```
12352 33rd Ed. 01-Mar-11 Last LNM:03/12 NAD 83 04/12
Chart Title:Shinnecock Bay to East Rockaway Inlet. Page/Side:N/A 
CGD01
(Temp) DELETE State Boat Channel Daybeacon 3 from 40-37-11.520N 073-29-53.760W 
```

This problem occurs just once per document, and does not appear to be totally consistent (as seen above). I am wondering if one of you wizards could think of a way to remove the ghosted text (I don't need/want it) using python. If I had been using pyPDF, I would have used a regex to rip it out during the conversion to text. Unfortunately, since I'm starting out with a text file from the website listed above, the damage has already been done. I'm at a bit of a loss.

Thanks for reading.

EDIT: The solution to this problem looks like it be more complex than the rest of the application, so I'm going to withdraw my request for help.

I very much appreciate the thought put into it by those who have contributed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:14:32.510

鉴于幽灵文本可以以看似不可预测的方式拆分，我认为没有一种简单的自动删除方式不会产生误报。你需要的是几乎人类水平的模式识别。:-)

您可以尝试利用这些消息的格式。大致;

```
<number> <number>[rn]d Ed. <date> Last LNM:<mm>/<yy> NAD <date2>
Chart Title:<text>. Page/Side:<N/A or number(s)> CGD<number> <text>
<position> 
```

使用它，您可以从可预测的元素中提取废话，然后如果您有图表名称列表（“Shinnecock Bay 到 East Rockaway Inlet”）和描述性词语（如“State”、“Boat”、“Daybeacon”）您可以通过找到两个文本块中的损坏单词与单词列表中的单词之间的最小 levenshtein 距离来重建原始单词。

如果您可以安装[poppler](http://poppler.freedesktop.org/)软件，您可以尝试使用`pdftotext`该`-layout`选项以尽可能保留原始 PDF 的格式。这可能会让你的问题消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:02:54.290

您可以递归地找到您的模式“纠正位置操作的纠正对象......”可以包含在您的错位文本中的所有可能方式，

然后，您可以为每个可能的路径解开文本，对它们进行某种拼写检查，然后选择拼写错误最少的那个。或者，由于您大致知道每个子字符串应该出现的位置，您可以将其用作启发式方法。或者您可以简单地使用第一条路径。

一些伪代码（未经测试）：

```
 def findPaths(mangledText, pattern, path)
      if len(pattern)==0:  # end of pattern
           return [path]
      else:
           nextLetter= pattern[0]
           locations = findAllOccurences (mangledText, nextLetter) # get all indices in mangledText that contain nextLetter
           allPaths = []
           for loc in locations:
               paths = findPaths( mangledText[loc+1:], pattern[1:], path + (loc,) )
               allPaths.Extend(paths)
           return allPaths # if no locations for the next letters exist, allPaths will be emtpy 
```

然后你可以这样调用它（可选地从搜索模式中删除所有空格，除非你确定它们都包含在损坏的文本中）

```
 allPossiblePaths = findPaths ( YourMangledText, "Corrective Object...", () ) 
```

那么 allPossiblePaths 应该包含您的模式可以包含在您的损坏文本中的所有可能方式的列表。每个条目都是一个与模式长度相同的元组，包含模式的相应字母在搜索文本中出现的索引。

# php - How to sort array preserving its initial state

> ID：10229132
> 
> 赞同：10
> 
> 时间：2012-04-19T13:27:52.520
> 
> 标签：php, cakephp

Using CakePHP 2.0 here. The title is a bit misleading, so to clear things up - I have session array which is populated with ids of products as user adds them to cart. So this array goes like [0] => 25, [1] => 70 etc. Let's say this array is called $products.

What I want to ask is is there some possibility to have array which I get by using 'find' model's function ('conditions' => array('Product.id' => $products)) to be sorted not by some of Model.field values (as in 'order' option), but by $products array indices, so that when I render the products content in view I would get all those products in cart sorted in such sequence as user were adding them.

Here's an example - Session array $products:

```
[0] => 35,
[1] => 15,
[2] => 25 
```

Then I pass this array to conditions of find function:

```
$list = $this->Product->find('all', array('conditions' => array('Product.id' => $products))); 
```

In the end $list gives me array which sorted by product.id. So instead of having:

```
[0] => Array
    (
        [Product] => Array
            (
                [id] => 35 )),
[1] => Array
        (
            [Product] => Array
                (
                    [id] => 15 )),

[2] => Array
        (
            [Product] => Array
                (
                    [id] => 25 )) 
```

I get:

```
[0] => Array
    (
        [Product] => Array
            (
                [id] => 15 )),
[1] => Array
        (
            [Product] => Array
                (
                    [id] => 25 )),
[2] => Array
        (
            [Product] => Array
                (
                    [id] => 35 )) 
```

So far all the answers doesn't solve my problem. Please, pay closer attention to the example I gave, it's very simple, but the answers provided are in different key.

Again, I need final array **$list** to be sorted by indices of session array **$products**, but I get **$list** sorted by Product.id field, even though I didn't specify any `'find(array('order'=> ...))'` at all and even tried to set it to false.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:21:46.227

不想听起来粗鲁，但对我的问题的所有回答都是关于如何按产品 ID 排序我的数组（这显然不是我问的）或关于执行不合适的手动 sql 查询的建议。似乎我无法正确描述我需要什么，但我试图尽可能清楚，抱歉。

在试图找到如何“禁用蛋糕”时，我偶然发现了一个解决方案。所以基本上你需要做的是有一个数组（我们称之为**$queue**）在其中保存产品 ID，因为它们被添加到购物车，然后在查找模型函数（或分页）中的“订单”选项中，你应该提供它喜欢：

```
'order'=>array('FIELD(Product.id,'.implode(',', $queue).')') 
```

**$queue**可能看起来像这样，例如：

```
[queue] => Array
        (
            [0] => 51
            [1] => 1
            [2] => 11
        ) 
```

最后你得到**$list**数组，其中产品的顺序与**$queue**中的相同。如果你没有指定 'order' 那么你会得到你的**$list**数组，如下所示：

```
 [queue] => Array
            (
                [0] => 1
                [1] => 11
                [2] => 51
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:09:37.877

我想不出一个简单的 SQL 查询可以根据参数列表对结果进行排序。

所以最简单的可能是在从数据库中获取记录后重新排序记录。

```
$records = $this->Product->find('all', array('conditions' => array('Product.id' => $products)));

$sorted_records = array();
foreach($records as $record)
{
  $key = array_search($record['Product']['id'], $products);
  $sorted_records[$key] = $record;
}

ksort($sorted_records);

debug($sorted_records); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:11:36.133

这是有效的 SQL，不知道如何让 cakephp 呈现它，但我认为它会解决您的订购问题：

`SELECT * FROM product WHERE id IN (35, 15, 25) ORDER BY id = 35 DESC, id = 15 DESC, id = 25`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:13:34.540

如果我理解正确，您需要对模型结果进行排序，或者换句话说，在查询上设置一个顺序以以任意方式排序。

这里有两个选项：

1.  指定排序。不熟悉 Cake 但您需要生成的 mysql 是：（`order by id = 25 desc, id = 70 desc, id = etc`猜测会说尝试`order => 'id = 25 desc, id = 70 desc, id = etc'`）您必须从`$products`数组中组装。

2.  创建一个购物篮模型并使用连接查询以正确的顺序获取产品列表（不简单，但可能比依赖会话变量更好）。

**更新**

我已经注意到并确实解决了您的问题，为您提供了您需要生成的 SQL，以及对 Cake 语法的猜测。查看您发布的解决方案，您的 FIELD(id, x, x, x) 正在做同样的事情，但它是一个更清洁的解决方案。找到它做得很好，不过我会删除你的“无意粗鲁”的评论，因为它们通常看起来*有点*粗鲁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T02:35:25.840

我通常处理此类问题的方法是使用内置于 Cake 的 Set 类通过 Product ID 对 $list 进行索引。所以

```
$list = Set::combine($list, '{n}.Product.id', '{n}.Product'); 
```

然后使用您的购物车 ($products) 循环，这已经是您想要的顺序

```
foreach($products as $prod) echo $list[$prod]['Product']['name']; 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T14:17:18.067

我不熟悉 cake 或它的数据库层，但也许你可以添加一点 sql。

相关的 sql 类似于

```
order by field(myTable.myID, 35, 15, 25)
-- or alternatively, more cross database compatible
order by case when myTable.myID = 35 then 1
              when myTable.myID = 15 then 2
              when myTable.myID = 25 then 3
         end 
```

然而，最通用的方法是在 php 代码中重新排序。

```
$products = array(35,15,25);//the ordered array
$records = array_flip($products);
foreach ($list as $row) {
    $id = $row['Product']['id'];
    $records[$id] = $row;
}
print_r($records); 
```

# perl - What is a mouse-drag in the context of `Win32::Console`?

> ID：10229135
> 
> 赞同：0
> 
> 时间：2012-04-19T13:28:22.160
> 
> 标签：perl, winapi, console, mouseevent

What would constitute a mouse-drag when using the `Input` method from [Win32::Console](http://search.cpan.org/perldoc?Win32%3a%3aConsole)?

```
use Win32::Console qw(STD_INPUT_HANDLE ENABLE_MOUSE_INPUT);

my $con_in = Win32::Console->new(STD_INPUT_HANDLE);
$con_in->Mode(ENABLE_MOUSE_INPUT);

sub getch {
    my ( $arg ) = @_;
    my @event = $con_in->Input();
    my $event_type = shift( @event );
    if ( defined $event_type and $event_type == 2 ) { 
        my( $x, $x, $button_state, $control_key, $event_flags ) = @event; 

        my $button_drag = ?;

        return handle_mouse( $x, $y, $button_state, $button_drag, $arg );
    }
} 
```

The `getch` on Linux looks like this:

```
sub getch {
    my ( $arg ) = @_;
    my $c = ReadKey 0;
    if ( $c eq "\e" ) { 
        my $c = ReadKey 0.10;
        # ...
        if ( $c eq '[' ) {
            my $c = ReadKey 0;
            # ...
            if ( $c eq 'M' ) {   
                # On button press, xterm sends CSI M C b C x C y (6 characters).
                my $event_type = ord( ReadKey 0 ) - 32;
                my $x = ord( ReadKey 0 ) - 32;
                my $y = ord( ReadKey 0 ) - 32;
                my $button_drag = ( $event_type & 0x20 ) >> 5;
                my $button_pressed;
                my $low3bits = $event_type & 0x03;
                if ( $low3bits == 0x03 ) {
                    $button_pressed = 0;
                } else {
                    if ( $event_type & 0x40 ) { 
                        $button_pressed = $low3bits + 4;
                    } else { 
                        $button_pressed = $low3bits + 1;
                    }
                }
                return handle_mouse( $x, $y, $button_pressed, $button_drag, $arg );
            }
            # ...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:43:32.597

我找到了一些东西，但我不确定它是否正确。

```
use Win32::Console qw(STD_INPUT_HANDLE ENABLE_MOUSE_INPUT);

my $con_in = Win32::Console->new(STD_INPUT_HANDLE);
$con_in->Mode(ENABLE_MOUSE_INPUT);

sub getch {
    my ( $arg ) = @_;
    my @event = $con_in->Input();
    my $event_type = shift( @event );
    if ( defined $event_type and $event_type == 2 ) { 
        my( $x, $x, $button_state, $control_key, $event_flags ) = @event; 

        my $button_drag = 0;
        # MOUSEEVENTF_MOVE => 0x0001
        $button_drag = 1 if $event_flags & MOUSEEVENTF_MOVE; 
        return handle_mouse( $x, $y, $button_state, $button_drag, $arg );
    }
} 
```

# c - RRD with a high-precision?

> ID：10229137
> 
> 赞同：0
> 
> 时间：2012-04-19T13:28:31.850
> 
> 标签：c, linux, rrd

Is it possible to use RRDs with a high-precision? And by high-precision I mean e.g. in the range of milli-seconds.

If not, are there equally good alternatives to RRD with a C API that work under Linux?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:32:50.977

rrdtool 中的步长是整数，因此不能小于一秒。但是更新可以带有毫秒精度的时间戳，并且会被正确处理。只是您存储样本的频率不能超过每秒一次。

# ruby-on-rails - 创建 redmine 插件

> ID：10229141
> 
> 赞同：2
> 
> 时间：2012-04-19T13:28:47.900
> 
> 标签：ruby-on-rails, ruby, redmine, redmine-plugins

我正在为消息系统创建一个 Redmine 插件。为此，我创建了一个名为“communication.rb”的模型。这里我想创建通信模型和用户模型之间的 Activerecord 关系（这里用户模型已经存在）。

在用户.rb

```
has_many :communications 
```

在通信.rb

```
belongs_to :user 
```

创建插件时如何创建与现有模型的关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:37:18.207

尝试在插件中的某个位置添加：

```
User.class_eval do
  has_many :communications
end 
```

# sqlite - 从错误代码中获取 SQLite3 错误消息

> ID：10229142
> 
> 赞同：1
> 
> 时间：2012-04-19T13:28:56.127
> 
> 标签：sqlite

使用存在（潜在）问题`sqlite3_errmsg()`：

> 在第一个错误和调用这些接口之间的单独线程上可能会发生第二个错误

所以如果我已经有某个函数返回的错误代码，我可以通过其他方式得到相应的错误信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:18:44.970

完成这项工作的功能是

```
SQLITE_PRIVATE const char *sqlite3ErrStr(int); 
```

但被声明为`PRIVATE`aka `static`。

在[文档](http://www.sqlite.org/c3ref/errcode.html)中，他们建议锁定数据库连接，然后阅读错误代码和错误消息。

如果您可以访问源代码，另一种*简单*的解决方案是公开该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T09:13:55.783

您可以使用 sqliteErrStr() 的公共 API 包装器

```
SQLITE_API const char *sqlite3_errstr(int rc); 
```

# javascript - Bug with RegExp in JavaScript when do global search

> ID：10229144
> 
> 赞同：6
> 
> 时间：2012-04-19T13:29:08.480
> 
> 标签：javascript, regex

> **Possible Duplicate:**
> [Javascript regex returning true.. then false.. then true.. etc](https://stackoverflow.com/questions/2630418/javascript-regex-returning-true-then-false-then-true-etc)

First of all, apologize for my bad english.

I'm trying to test string to match the pattern, so I has wrote this:

```
var str = 'test';
var pattern = new RegExp('te', 'gi'); // yes, I know that simple 'i' will be good for this 
```

But I have this unexpected results:

```
>>> pattern.test(str)
true
>>> pattern.test(str)
false
>>> pattern.test(str)
true 
```

Can anyone explain this?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T13:38:21.613

这种行为的原因是 RegEx 不是无状态的。您的第二个`test`将继续在字符串中查找下一个匹配项，并报告它不再找到。进一步的搜索从头开始，`lastIndex`当没有找到匹配时重置：

```
var pattern = /te/gi;

pattern.test('test');
>> true
pattern.lastIndex;
>> 2

pattern.test('test');
>> false
pattern.lastIndex;
>> 0 
```

当有两个匹配项时，您会注意到这种变化是如何变化的，例如：

```
var pattern = /t/gi;

pattern.test('test');
>> true
pattern.lastIndex;
>> 1

pattern.test('test');
>> true
pattern.lastIndex;
>> 4

pattern.test('test');
>> false
pattern.lastIndex;
>> 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:31:01.660

我想你遇到了这个问题：[https ://bugzilla.mozilla.org/show_bug.cgi?id=237111](https://bugzilla.mozilla.org/show_bug.cgi?id=237111)

删除`g`参数可以解决问题。基本上是由于`lastindex`每次执行`test()`方法时都会记住最后一个值的属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T13:36:21.253

引用[MDN Docs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)（强调我的）：

> 当您想知道是否在字符串中找到模式时，请使用测试方法（类似于 String.search 方法）；有关更多信息（但执行速度较慢），请使用 exec 方法（类似于 String.match 方法）。与 exec （或与它结合使用）一样，**在同一个全局正则表达式实例上多次调用 test 将超过上一次匹配。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:43:35.790

这是该[`RegExp.test(str)`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)的预期行为。正则表达式实例（模式）存储可以在`lastIndex`属性中看到的状态；每次您调用“测试”时，它都会更新该值，并且使用相同参数的后续调用可能会也可能不会产生相同的结果：

```
var str="test", pattern=new RegExp("te", "gi");
pattern.lastIndex; // => 0, since it hasn't found any matches yet.
pattern.test(str); // => true, since it matches at position "0".
pattern.lastIndex; // => 2, since the last match ended at position "1".
pattern.test(str); // => false, since there is no match after position "2". 
```

# tomcat - 我应该为 Web 应用程序数据源使用什么 JNDI InitialContext 实现？

> ID：10229148
> 
> 赞同：0
> 
> 时间：2012-04-19T13:29:15.953
> 
> 标签：tomcat, datasource, jndi

我是第一次开始使用 JNDI。我正在使用部署在 tomcat 上的 Spring Mvc 开发 Web 应用程序，连接到 Mysql 数据库。

据我了解，使用 JNDI 数据源的原因是希望在本地和实时服务器上运行应用程序时连接到不同的数据库，但不希望为此更改任何配置；我从 JNDI 检索数据源，它在不同的机器上为我提供了不同的数据源。

我的问题是我不确定我应该为我的 java 对象使用什么 JNDI 上下文？我在网上找到的示例范围倾向于说“从 JNDI 中检索”，而没有说明 JNDI 上下文是什么。

详细地说，我应该使用 LDAP 吗？或者我应该使用tomcat？如果我使用的是 tomcat，那么与全局 JDNI 对象相比，本地 JDNI 对象的意义何在？即，本地的当然意味着当我希望 JNDI 对象不同时我必须更改配置设置，因此为什么我首先要费心在 JNDI 中配置我的数据源？直觉上，我认为全局 tomcat JNDI 上下文将是最好的选择，但我只是有点粗略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:39:56.523

根据我的经验，您使用相同的应用程序并且没有将任何内容硬编码到有关数据库信息的代码中，并且在部署应用程序时仍希望连接到不同的数据库而不进行任何更改。

例如，您移至 DEV -> QA->... -> Prod 可能都具有相同的**JNDI 名称**， 但是它们将在不同的环境中进行不同的配置。使用相同的战争/耳朵，无需任何更改。

**在 tc 上配置的 JNDI 名称（可根据 ENV 更改）——代码在不同环境中移动**

JNDI 在配置方面为您提供松耦合。

# xpages - 将大纲与 XPages 扩展库移动控件一起使用

> ID：10229151
> 
> 赞同：1
> 
> 时间：2012-04-19T13:29:33.423
> 
> 标签：xpages, mobile-controls, xpages-extlib

我正在使用 XPages Extension Library 移动控件为现有 Notes 应用程序创建移动 Web 界面。

当显示具有大量字段的文档时，我想使用手风琴式 UI，以便可以展开或折叠部分页面以显示或隐藏每个窗格中的字段（类似于传统 Notes 客户端应用程序中的部分） .

查看 Ext Lib 演示应用程序中的“Accordion Outline”后，我开始使用 Outline 控件构建页面。在大纲的每个条目（节点）中，理想情况下，我希望放置一个圆形列表，然后将我的字段和控件放入其中。

但看起来大纲中的节点不能包含这种类型的内容——除非我遗漏了什么？

关于哪些控件我可以使用这种类型的 UI 有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:05:31.363

您可以随时使用 xp:panel 并将其指定为 dijit.accordeon（请查找确切名称）dojo 类型。然后你可以在里面放任何东西，包括重复控件等。我想建立你自己的 CC 来保存每个手风琴面板的内容可能是有意义的

# jquery - Ruby on Rails jQuery 按钮单击填充 text_field

> ID：10229152
> 
> 赞同：0
> 
> 时间：2012-04-19T13:29:35.983
> 
> 标签：jquery, ruby-on-rails, ajax, button, textbox

我的 edit.html.erb 页面中有以下表格

```
<%= form_for(@device) do |f| %>

  <%= render 'shared/error_messages', :object => f.object %>

  <%= f.label :name %>
  <%= f.text_field :name %>

  <%= f.label :description %>
  <%= f.text_area :description, :rows => "5" %>

  <%= f.label :device_identifier %>
  <%= f.text_field :device_identifier, :value => @device.device_identifier, :readonly => true, :class => "d-id", :id => "deviceIDfield" %>

  <%= button_tag "New device identifier", :id => "deviceIDbutton", :class => "btn btn-small btn-inverse", :type => "button" %>

  <%= f.submit "Save changes", :class => "btn btn-large btn-primary", :id => "white" %>
<% end %> 
```

单击“新设备标识符”时，我希望 :device_identifier 字段重新生成其当前通过 Ruby 方法 SecureRandom.urlsafe_base64 设置的值。这只是生成一个随机的 base64 编码字符串。我一直在尝试通过 jQuery 来做到这一点，但是我遇到了麻烦，因为我对 Ruby on Rails 和 JQuery 都是新手。

我设置了一个名为 shared.js.erb 的文件，它位于我的 javascripts 目录中。在这里，我有以下代码...

```
$(document).ready(function(){
 $('#deviceIDbutton').click(function () {
     $("#deviceIDfield").val('<%= SecureRandom.urlsafe_base64 %>');
     });
}) 
```

这在我第一次单击按钮时有效（即它使用新字符串更新 device_identifier 字段）但是在此之后停止工作。我认为这是因为 SecureRandom.urlsafe_base64 被调用一次（当文档准备好时......？）而不是每次单击按钮时。有人可以帮帮我吗！，我一直在努力解决这个问题太久了。

我很不确定一些事情，例如为什么我不需要在任何地方使用 :remote => true 以及如果我要使用它放在哪里？

此外，我绝不确定我对 jQuery 应该去哪里有正确的想法，虽然它似乎在我创建的 shared.js.erb 文件中工作，但如果有人可以推荐一种更好/更自然的方式会很好。

还值得一提的是，我的 new.html.erb 文件中有相同的按钮，我想应用相同的功能。

非常感谢！

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:41:46.157

正如您所说，随机字符串仅生成一次，但不会在文档准备好时生成。当您的布局包含 shared.js.erb 时，它会在服务器端呈现。这会“创建”一个包含内容的 shared.js 文件，例如：

```
$(document).ready(function(){
 $('#deviceIDbutton').click(function () {
     $("#deviceIDfield").val('werwe87wer78we7w8erew');
     });
}) 
```

当文档准备好时，ready() 调用中的函数将被执行，并将单击事件上要执行的函数绑定到#deviceIDbutton 元素。因此，每次单击按钮时，都会执行相同的功能，一次又一次地设置相同的随机代码。

您的函数应该远程调用控制器中返回新的安全随机代码的方法。您可以使用 JQuery.get() 执行此操作。

如果代码只是随机生成的代码，您可以使用一些 JavaScript 在浏览器上生成，避免调用服务器端。

对于调用控制器方法的示例，您可以查看[此其他 SO 答案。](https://stackoverflow.com/questions/8695867/ruby-on-rails-jquery-not-calling-the-right-controller-action)

# utf-8 - UTF-8 可以编码多少个字符？

> ID：10229156
> 
> 赞同：127
> 
> 时间：2012-04-19T13:29:46.187
> 
> 标签：utf-8, character-encoding, ascii

如果 UTF-8 是 8 位，是不是意味着最多只能有 256 个不同的字符？

前 128 个代码点与 ASCII 中的相同。但它说UTF-8可以支持多达百万个字符？

这是如何运作的？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-04-19T13:34:12.213

UTF-8 并不总是使用一个字节，它是 1 到 4 个字节。

> 前 128 个字符（US-ASCII）需要一个字节。
> 
> 接下来的 1,920 个字符需要两个字节来编码。这涵盖了几乎所有拉丁字母的其余部分，以及希腊语、西里尔语、科普特语、亚美尼亚语、希伯来语、阿拉伯语、叙利亚语和塔纳字母，以及组合变音符号。
> 
> 基本多语言平面的其余字符需要三个字节，其中包含几乎所有常用字符[12]，包括大多数中文、日文和韩文 [CJK] 字符。
> 
> Unicode 其他平面中的字符需要四个字节，其中包括不太常见的 CJK 字符、各种历史脚本、数学符号和表情符号（象形符号）。

来源：[维基百科](http://en.wikipedia.org/wiki/UTF-8)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-04-19T13:40:04.653

UTF-8 每个字符使用 1-4 个字节：一个字节用于 ascii 字符（前 128 个 unicode 值与 ascii 相同）。但这只需要 7 位。如果设置了最高（“符号”）位，则表示多字节序列的开始；设置的连续高位的数量表示字节数，然后是 0，其余位对值有贡献。对于其他字节，最高两位是 1 和 0，其余 6 位是值。

因此，一个四字节序列将从 11110... 开始（并且 ... = 三个位的值），然后三个字节，每个 6 位的值，产生一个 21 位的值。2^21 超过了 unicode 字符的个数，所以所有的 unicode 都可以用 UTF8 表示。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-07-11T18:58:39.833

# Unicode 与 UTF-8

Unicode 将代码点解析为字符。UTF-8 是 Unicode 的一种存储机制。Unicode 有一个规范。UTF-8 有一个规范。他们都有不同的限制。UTF-8 有不同的上界。

## 统一码

Unicode 被指定为[“平面”。](https://en.wikipedia.org/wiki/Plane_(Unicode))每架飞机携带 2 ^(16 个)代码点。Unicode 中有 17 个平面。总共`17 * 2^16`代码点。第[一个平面，平面 0 或 BMP](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane)，在它所承载的重量方面是特殊的。

与其解释所有的细微差别，我只引用上面关于飞机的文章。

> 17 个平面可容纳 1,114,112 个代码点。其中，2,048 个是代理，66 个是非字符，137,468 个保留供私人使用，剩下 974,530 个用于公共分配。

# UTF-8

现在让我们回到上面链接的文章，

> UTF-8 使用的编码方案被设计为具有更大的 2 ^(31)个代码点（32,768个平面）的限制，即使限制为 4 个字节，也可以编码 2 ^(21个代码点（32 个平面）。 [3]) 由于 Unicode 将码点限制为 UTF-16 可以编码的 17 个平面，因此 0x10FFFF 以上的码点在 UTF-8 和 UTF-32 中无效。

所以你可以看到你可以把不是有效 Unicode 的东西放入 UTF-8 中。为什么？因为 UTF-8 可以容纳 Unicode 甚至不支持的代码点。

UTF-8，即使有四个字节的限制，也支持 2 ^(21)个码位，远远超过`17 * 2^16`

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-07-20T18:38:26.410

根据[这个表](https://en.wikipedia.org/w/index.php?title=UTF-8&oldid=730630603#Description)* UTF-8*应该*支持：

2 ^(31) = 2,147,483,648 个字符

但是，RFC 3629 限制了可能的值，所以现在我们[限制在 4 bytes](https://www.rfc-editor.org/rfc/rfc3629#section-3)，这给了我们

2 ^(21) = 2,097,152 个字符

请注意，这些字符中有很大一部分是“保留”用于自定义使用的，这对于图标字体来说实际上非常方便。

* 维基百科使用了一个 6 字节的表格——他们已经更新了这篇文章。

> **2017-07-11：**更正了重复计算用多个字节编码的相同代码点

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2017-10-29T12:08:12.207

UTF-8 可以潜在地编码 2,164,864 个“字符”。

这个数字是，它来自编码的工作方式：`2⁷ + 2^(11) + 2^(16) + 2^(21)`

*   1 字节字符有 7 位用于编码 `0xxxxxxx`(0x00-0x7F)

*   2 字节字符有 11 位用于编码 `110xxxxx 10xxxxxx`（第一个字节为 0xC0-0xDF；第二个字节为 0x80-0xBF）

*   3 字节字符有 16 位用于编码 `1110xxxx 10xxxxxx 10xxxxxx`（第一个字节为 0xE0-0xEF；连续字节为 0x80-0xBF）

*   4 字节字符有 21 位用于编码 `11110xxx 10xxxxxx 10xxxxxx 10xxxxxx`（第一个字节为 0xF0-0xF7；连续字节为 0x80-0xBF）

如您所见，这比当前的 Unicode（1,112,064 个字符）大得多。

**更新**

我最初的计算是错误的，因为它没有考虑额外的规则。有关更多详细信息，请参阅对此答案的评论。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-04-19T13:35:11.483

UTF-8 是一种*可变长度*编码，每个字符**至少**8 位。
具有较高代码点的字符将占用最多 32 位。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-19T13:35:18.507

引自维基百科：“UTF-8 使用一到四个 8 位字节（在 Unicode 标准中称为“八位字节”）对 Unicode 字符集中的 1,112,064 个代码点中的每一个进行编码。”

一些链接：

*   [http://www.utf-8.com/](http://www.utf-8.com/)
*   [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)
*   [http://www.icu-project.org/docs/papers/forms_of_unicode/](http://www.icu-project.org/docs/papers/forms_of_unicode/)
*   [http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-19T14:25:54.680

查看 Unicode 标准和相关信息，例如他们的常见问题解答条目、[UTF-8 UTF-16、UTF-32 和 BOM](http://unicode.org/faq/utf_bom.html)。这并不是一帆风顺，但它是权威信息，您可能在其他地方读到的关于 UTF-8 的大部分内容都是值得怀疑的。

“UTF-8”中的“8”与以位为单位的*代码单元*的长度有关。代码单元是用于编码字符的实体，不一定是简单的一对一映射。UTF-8 使用可变数量的代码单元对字符进行编码。

可以用 UTF-8 编码的字符集合与 UTF-16 或 UTF-32 完全相同，即所有 Unicode 字符。它们都对整个 Unicode 编码空间进行编码，甚至包括非字符和未分配的代码点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-14T21:52:59.020

虽然我同意 mpen 对当前最大 UTF-8 代码 (2,164,864) 的看法（如下所列，我无法评论他的内容），但如果您删除 UTF-8 的 2 个主要限制，他会下降 2 个级别：只有 4 个字节限制和代码 254 和 255 不能使用（他只去掉了 4 字节限制）。

起始代码 254 遵循起始位的基本排列（多位标志设置为 1，计数 6 个 1，终端 0，无备用位）为您提供 6 个额外字节可使用（6 个 10xxxxxx 组，额外 2^ 36 个代码）。

起始代码 255 不完全遵循基本设置，没有终端 0，但使用了所有位，为您提供了 7 个额外的字节（多位标志设置为 1，计数为 7 个 1，并且没有终端 0，因为使用了所有位; 7 个 10xxxxxx 组，额外的 2^42 个代码）。

将这些添加到最终的最大可呈现字符集为 4,468,982,745,216。这比当前使用的所有字符、旧的或死的语言以及任何被认为丢失的语言都要多。天使或天体脚本有人吗？

除了 254 和 255：128-191 以及其他一些代码之外，UTF-8 标准中还有一些单字节代码被忽略/忽略。有些是由键盘在本地使用的，示例代码 128 通常是一个删除退格键。由于一个或多个原因（[https://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences](https://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences)），其他起始代码（和相关范围）无效。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-11-26T21:29:25.390

Unicode 与 UTF-8 紧密结合。Unicode 特别支持 2^21 个代码点（2,097,152 个字符），这与 UTF-8 支持的代码点数量完全相同。两个系统都为代码点等保留相同的“死”空间和受限区域[。...截至 2018 年 6 月，最新版本 Unicode 11.0 包含 137,439 个字符](https://en.wikipedia.org/wiki/Unicode)

**来自 unicode 标准。** [Unicode 常见问题](https://www.unicode.org/faq/utf_bom.html)

> Unicode 标准对 U+0000..U+10FFFF 范围内的字符进行编码，这相当于 21 位代码空间。

**来自 UTF-8 维基百科页面。** [UTF-8 说明](https://en.wikipedia.org/wiki/UTF-8#Description)

> 由于 2003 年将 Unicode 代码空间限制为 21 位值，UTF-8 被定义为将代码点编码为 1 到 4 个字节，...

# wordpress - 使用子文件夹将 wordpress 部署到实时服务器上的临时 url

> ID：10229157
> 
> 赞同：0
> 
> 时间：2012-04-19T13:29:46.607
> 
> 标签：wordpress

我有一个我在本地和生产服务器上工作的 wordpress 网站。该站点正准备启动，我必须在域转移之前向客户端显示它在实时服务器上工作。不幸的是，给我的临时 url 是 http://[ip address]/~foldername，因此该站点无法正常运行，因为它在错误的位置查找。我在管理员中输入 site_url 和 home_url 后，主页工作正常，但点击内部页面却不行。

我怎样才能让它与这个临时 url 一起工作，但在域切换时它仍然可以工作。我想这可以用 htaccess 来完成，但不确定到底该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:03:20.803

我所要做的就是放在 htaccess 文件的子文件夹中。所以它看起来像这样：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /~subfolder
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /~subfolder/index.php [L]
</IfModule>

# END WordPress 
```

# c# - 如何修改 C# Compact Framework 的 HttpWebRequest 中的“Host”参数？

> ID：10229158
> 
> 赞同：1
> 
> 时间：2012-04-19T13:29:48.323
> 
> 标签：c#, httpwebrequest, compact-framework

我正在尝试更改[HttpWebRequest](http://msdn.microsoft.com/en-us/library/8y7x3zz2.aspx)标头中“主机”参数的值，但出现以下错误：

**“必须使用适当的属性修改此标头。在 System.Net.WebHeaderCollection.ThrowOnRestrictedHeader(String headerName)”**

我正在尝试使用以下代码：

```
HttpWebRequest hbWebRequest = (HttpWebRequest)System.Net.HttpWebRequest.Create(WebService);
hbWebRequest.Method = "POST";
hbWebRequest.Headers["Host"] = WebURL; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T08:51:09.430

发现此链接有帮助 [http://blogs.msdn.com/b/ncl/archive/2009/07/20/new-ncl-features-in-net-4-0-beta-2.aspx](http://blogs.msdn.com/b/ncl/archive/2009/07/20/new-ncl-features-in-net-4-0-beta-2.aspx)

这给出了以下解决方案

```
var request = WebRequest.Create("http://127.0.0.1/") as HttpWebRequest; 
request.Host = "contoso.com"; 
var response = request.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:33:40.943

在 .NET Framework 4.0 中，您可以使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/8y7x3zz2.aspx)类的[Host](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.host.aspx)属性。

```
hbWebRequest.Host = WebURL; 
```

**编辑：这个**[问题](https://stackoverflow.com/questions/1450937/how-to-set-custom-host-header-in-httpwebrequest)的可能重复。

# mysql - Mysql 过程：在条件块中嵌套 begin 语句

> ID：10229162
> 
> 赞同：1
> 
> 时间：2012-04-19T13:30:02.753
> 
> 标签：mysql, triggers, procedure

如果变量存在，我试图只执行一段代码。这是一个代码片段。您可以在 IF 块中嵌套 Begin...End 语句吗？

我已经重新设计了好几次。建议？

```
delimiter //

drop trigger if exists example_trigger;//
create trigger example_trigger AFTER UPDATE on some_table for each row 
BLOCK1: begin

    -- check current status
    DECLARE done BOOLEAN DEFAULT FALSE;

    -- cap check
    if (new.CURRENT_ALLOCATED >= new.TOTAL_ALLOWED_QTY) then
        SET done = TRUE;
    end if; -- cap check end

    -- o 
    if (done != TRUE and new.O_KEY is not null and new.A_KEY is null) then

        OBLOCK: begin
            DECLARE done_o BOOLEAN DEFAULT FALSE;
            DECLARE pd_nbr INT;
            DECLARE no_more_rows BOOLEAN;
            DECLARE cur_pd CURSOR FOR 
                select pd.STATUS_KEY
                from PROD_DEL_V pd
                    join PROD_T p on pd.KEY_NBR = p.KEY_NBR
                where pd.STATUS not in ('PU', 'EX')
                    and p.O_KEY = new.O_KEY;
            DECLARE CONTINUE HANDLER FOR NOT FOUND
                SET done_o = TRUE;  

            -- run updates
            if (done_o != TRUE) then

                -- open cursor
                OPEN cur_pd;        

                -- loop start
                loop_it: LOOP

                    FETCH cur_pd INTO pd_nbr;

                    -- exit loop if..
                    if no_more_rows = TRUE THEN 
                        CLOSE cur_pd;
                        LEAVE loop_it;
                    end if;

                    INSERT INTO STATUS_TABLE (
                        STATUS_KEY
                        , STATUS
                        , NOTE_TXT
                        )
                        (
                        SELECT 
                            PD.STATUS_KEY
                            , 'PU' AS STATUS
                            , concat('example_trigger - MAX has been reached or exceeded [TOTAL_ALLOWED_QTY = ',new.TOTAL_ALLOWED_QTY,' and CURRENT_ALLOCATED = ', new.CURRENT_ALLOCATED, ']') AS NOTE_TXT
                        FROM  PROD_DEL_TABLE PD 
                        WHERE PD.STATUS_KEY = pd_nbr
                        );  

                END LOOP loop_it;

            end if; -- run updates end

        end OBLOCK:; -- end block

    end if; -- o 

    -- a
    if (done != TRUE and new.O_KEY is null and new.A_KEY is not null) then

        ABLOCK: begin
            DECLARE done_a BOOLEAN DEFAULT FALSE;
            DECLARE pd_nbr INT;
            DECLARE no_more_rows BOOLEAN;
            DECLARE cur_pd CURSOR FOR 
                select pd.STATUS_KEY
                from PROD_DEL_V pd
                    join PROD_T p on pd.KEY_NBR = p.KEY_NBR
                    join A_O_T a on a.O_KEY = p.O_KEY
                where pd.STATUS not in ('PU', 'EX')
                    and a.A_KEY = new.A_KEY;
            DECLARE CONTINUE HANDLER FOR NOT FOUND
                SET done_a = TRUE;

            -- run updates
            if (done_a != TRUE) then

                -- open cursor
                OPEN cur_pd;        

                -- loop start
                loop_it: LOOP

                    FETCH cur_pd INTO pd_nbr;

                    -- exit loop if..
                    if no_more_rows = TRUE THEN 
                        CLOSE cur_pd;
                        LEAVE loop_it;
                    end if;

                    INSERT INTO STATUS_TABLE (
                        STATUS_KEY
                        , STATUS
                        , NOTE_TXT
                        )
                        (
                        SELECT 
                            PD.STATUS_KEY
                            , 'PU' AS STATUS
                            , concat('example_trigger - MAX has been reached or exceeded [TOTAL_ALLOWED_QTY = ',new.TOTAL_ALLOWED_QTY,' and CURRENT_ALLOCATED = ', new.CURRENT_ALLOCATED, ']' AS NOTE_TXT
                        FROM  PROD_DEL_TABLE PD 
                        WHERE PD.STATUS_KEY = pd_nbr
                        );  

                END LOOP loop_it;

            end if; -- run updates end

        end ABLOCK; -- end block

    end if; -- a
end BLOCK1; -- end large block
//

delimiter ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:03:22.593

IF 和 BEGIN...END 子句有什么问题？看看这个简单的例子 -

```
CREATE PROCEDURE procedure1(IN Param1 VARCHAR(255))
BEGIN
  IF Param1 = 1 THEN
    BEGIN
      DECLARE i INT;
      -- do something
    END;
  ELSE
    BEGIN
      DECLARE i INT;
      -- do something
    END;
  END IF;
END 
```

# c++ - c ++：向量获取意外数据

> ID：10229172
> 
> 赞同：0
> 
> 时间：2012-04-19T13:30:59.167
> 
> 标签：c++, vector

当我调用下面的函数时，它会将我的输入添加到向量中，但始终会向向量中添加 6 个额外的单元格。任何想法为什么会发生？

这是相关的功能：

```
void seperate_words(string str1, vector<struct wordstype> &vec1)
{
    string temp_str;
    string::iterator is=str1.begin();
    wordstype input_word;
    while (is<str1.end())
    {
        if (((*is)!='-')&&((*is)!='.')&&((*is)!=',')&&((*is)!=';')&&((*is)!='?')&&((*is)!='!')&&((*is)!=':'))
        {
            temp_str.push_back(*is);
            ++is;
        }
        else
        { 
            input_word.word=temp_str;
            vec1.push_back(input_word);
            is=str1.erase(is);
            temp_str.clear();
        }
    }
    input_word.word=temp_str;
    vec1.push_back(input_word);
    temp_str.clear();
} 
```

调用func的主程序的相关区间为：

```
**while(end_flag==-1){
    cin>> temp_string;
    end_flag=temp_string.find(end_str);/*indicates whether the end sign is precieved*/
    seperate_words(temp_string,words_vecref);/*seperats the input into single words and inserts them into a vector*/
} 
int x=words_vec.size();
cout<<x<<" "<<std::endl;
for (vector<struct wordstype>::iterator p_it=words_vec.begin();p_it<words_vec.end();p_it++)
 {cout<<(*p_it).word<<" ";}** 
```

例如：我走在街上，我的向量大小应该只增加 6 个元素（而不是 12 个）

预期输出：只有六个单元格，在每个 oe 中，将是输入中的一个单词，按输入顺序排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:50:13.440

你的字符串末尾有六个标点符号吗？当文本以标点符号结尾时，您会在向量中添加一个额外的空字符串（因为您在 while 循环之外无条件地添加到向量中）

如果你有其中的几个，你就有几个空字符串（这次在 while 循环内）。这些空字符串也可以出现在文本的中间。

这是因为您在推回时不会测试您实际遇到某些文本的位置。您可以通过在 while 循环中调用 push_back 之前和 while 循环之后测试 temp_str 是否不为空来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:33:59.413

当您尝试将元素添加到当前容量无法容纳更多元素的向量时，将调整向量的大小。

如果容量每增加 1 个新的`push_back`，就会产生巨大的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:33:36.857

你打电话

```
vec1.push_back(input_word); 
```

循环内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:50:00.040

你确定是这个函数添加了额外的元素吗？您是否使用调试器对其进行了跟踪？大概您是在通话前后直接检查`size()`而不是检查向量？`capacity()`如果输入字符串中没有任何“特殊”字符会怎样？

我注意到在您的`else`块中，您可能会`temp_str`为推到向量上的对象分配一个空白。也许这与它有关？

# iphone - 在子类 UITextField 中实现 setText:(NSString*)text 方法

> ID：10229173
> 
> 赞同：0
> 
> 时间：2012-04-19T13:30:59.243
> 
> 标签：iphone, ios, uitextfield, subclass

我正在子类`UITextField`化并且需要一种方法来在字段中的文本更改时运行一些代码，我该怎么做？

（在这个类中编写逻辑可以让我在它之外编写更清晰的代码......我的意思是我可以使用`UITextFieldDelegate`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T14:29:58.697

我遇到了需要自定义清除按钮的相同用例。我尝试子类化 UITextField 希望我可以覆盖 setText: 但结果证明这是一个死胡同，因为每次输入或删除字符时都不会像我希望的那样调用它。我想出了以下解决方案：

```
- (void)awakeFromNib {
    [super awakeFromNib];
    self.clearButtonMode = UITextFieldViewModeNever;
    UIButton *clearButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];
    [clearButton setTitle:@"x" forState:UIControlStateNormal];
    [clearButton addTarget:self action:@selector(clearText:) forControlEvents:UIControlEventTouchDown];
    self.rightView = clearButton;
    [self addTarget:self action:@selector(textChanged:) forControlEvents:UIControlEventEditingChanged];
}

- (void)textChanged:(UITextField *)sender {
    self.rightViewMode = sender.text.length > 0 ? UITextFieldViewModeWhileEditing : UITextFieldViewModeNever;
}

- (void)clearText:(UIButton *)sender {
    self.text = @"";
    [self textChanged:self];
} 
```

使用 UIControlEventEditingChanged 我们可以对键盘带来的文本变化做出反应，但不能通过在代码中设置文本。由于我还想响应 clearText: 方法带来的文本，我必须在 clear 之后手动调用 textChanged: 方法。如果文本在其他地方的代码中设置，则需要调用 textChanged 进行补偿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:33:33.453

在您的视图控制器的 .h 文件中，只需定义此委托

```
@interface  yourviewcontroller <UITextFieldDelegate> 
```

之后在 .m 文件中使用下面的代码..

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

              .....Do Somthing Here....

} 
```

这是文本字段文本更改此方法时的委托方法，每次调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T13:35:07.870

**通过不**使用 UITextFieldDelegate 方法，代码如何在它之外更清晰？通过尝试告诉视图类（您的 UITextField）如何响应更改，您有点打破了 MVC 设计范式，而这正是控制器的本意。您能否更深入地了解为什么您认为覆盖 setText 而不是在委托实现中处理事情更清洁？

# c# - 使用 DirectShow.NET 的音频同步问题

> ID：10229176
> 
> 赞同：4
> 
> 时间：2012-04-19T13:31:13.440
> 
> 标签：c#, .net, synchronization, directshow, directshow.net

我已经在 DirectShow.NET 的论坛上开始了一个线程，这里是链接[http://sourceforge.net/projects/directshownet/forums/forum/460697/topic/5194414/index/page/1](http://sourceforge.net/projects/directshownet/forums/forum/460697/topic/5194414/index/page/1) 但不幸的是问题仍然存在...

我有一个应用程序，它从网络摄像头捕获视频并从麦克风捕获音频并将其保存到文件中，由于某种原因，音频和视频永远不会同步，我尝试了以下方法： 1\. 从 ffdshow 编码器开始并更改为 AVI多路复用器 - 问题仍然存在，音频延迟，在视频结束时图片保持冻结，音频继续 2\. 从 AVI 多路复用器更改为 WM ASF 写入器 - 视频在开始时冻结（2 秒），其余视频在-sync（但前两秒不可用） 3\. 创建打印音频和视频时间戳的 SampleGrabber - 看到音频时间戳早于 500 毫秒，但我不知道如何处理这个事实...... 4。尝试手动将 ReferenceClock 设置为捕获过滤器之一（音频/视频），但两者都不会转换为 IReferenceClock 5。创建了一个 SystemClock 并设置它具有 ReferenceClock - 没有区别 6\. 在 grap 上设置 SyncUsingStreamOffset(true) - 时间戳现在更接近但最终结果相同 7\. 尝试将音频和视频保存到两个不同的文件并使用VirtualDub 看看他们是否匹配，他们仍然不...

哦，我忘了提到我也尝试在 GraphEditPlus 中构建图表，但问题仍然存在，这是图表的链接：[http ://www2.picturepush.com/photo/a/8030745/img/8030745.png](http://www2.picturepush.com/photo/a/8030745/img/8030745.png)

目前我正在测试我对 DirectShow.NET 样本中 CapWMV 样本的所有更改。

请任何建议将不胜感激，我很绝望：/

谢谢，

伊兰。

**更新：**

音频和视频之间似乎有一个恒定的 500ms 间隙，如果我使用 virtualDub 将音频延迟 500ms 看起来很好，如何在图表中设置它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:57:53.400

您在音频流上的延迟等于捕获缓冲区的大小。也就是说，您获得了 0.5 秒后开始被捕获的完整缓冲区。您需要使用较小的缓冲区和/或在缓冲区上应用偏移量来调整延迟。

看：

*   [最小化 DirectShow 中的音频捕获延迟](http://sid6581.wordpress.com/2006/10/09/minimizing-audio-capture-latency-in-directshow/)
*   [如何消除 DirectShow 过滤器链中的 1 秒延迟？（使用 Delphi 和 DSPACK）](https://stackoverflow.com/questions/7881420/how-to-eliminate-1-second-delay-in-directshow-filter-chain-using-delphi-and-ds)

[`IAMBufferNegotiation`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389142%28v=vs.85%29.aspx)是关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T20:45:01.123

只是想为我的情况添加解决方案，也许它会对某人有所帮助。

我试图从网络摄像头录制视频以及来自麦克风的音频，视频是高清（1080p）所以我想保存一个以 MPEG4 编码的 AVI 文件，所以我使用了 ffshow-tryous（免费 Mpeg4 编码器）和一个 Avi Mux过滤器，问题是我的一些视频（其中大部分 :) ）有同步问题。

我发现 Avi Mux 不处理同步，它假定数据在适当的时间到达（写在这里 - [http://msdn.microsoft.com/en-us/library/dd407208(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/dd407208(v=vs.85).aspx)），所以我尝试使用处理同步的 WMAsfWriter 并且它运行良好（我上面提到的 2 秒冻结只是 VLC 播放器的一个小故障），但它不适用于高分辨率，我在使用自定义时遇到了麻烦配置文件（过滤器不会连接）。

我也尝试了 Roman 的建议，虽然链接非常有趣且很有前途（我真的建议阅读它们 - 还不能给帖子 +1 ......）它只是没有任何区别：/

我的最终解决方案是放弃 MPEG4，只使用 MPEG2，我从 Avi Mux 切换到 Microsoft MPEG2 Encoder，效果很好，很久以前就应该考虑过 :)

希望这会对其他人有所帮助。

谢谢，

伊兰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T10:19:35.360

我在使用 Xvid MPEG-4 解码器将视频从 WMV 渲染到 AVI 时遇到了同样的问题。

我**不放弃 MPEG-4**的最终解决方案是配置 AviMuxer 设置[ConfigAviMux::SetMasterStream](http://msdn.microsoft.com/en-us/library/windows/desktop/dd312034%28v=vs.85%29.aspx)属性

如从 MSDN 配置[捕获视频到 AVI 文件一文中所述：](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318627%28v=vs.85%29.aspx)

> 如果您从两个单独的设备捕获音频和视频，**最好将音频流设为主流**。这有助于防止两个流之间的漂移，因为 AVI Mux 过滤器会调整视频流的播放速率以匹配音频流。

示例代码：

```
IConfigAviMux _filterAVIMuxerCfg = (IConfigAviMux)_filterAVIMuxer;
_filterAVIMuxerCfg.SetMasterStream(0); // I've add first audio ;) 
```

# django - 在 Django 中更改为类视图时出现问题

> ID：10229178
> 
> 赞同：0
> 
> 时间：2012-04-19T13:31:16.763
> 
> 标签：django, python-2.6, django-class-based-views, django-1.4

升级后，我试图在 Django 中更改为基于类的视图，对此我有两个问题。这是我的代码，简化：

```
# urls.py

urlpatterns += patterns('project.app.views',
    ('^$', 'index'), # Old style
    url(r'^test/$', SearchView.as_view()), # New style
)

# views.py

class SearchView(TemplateView):
    template_name = 'search.html'

    def get_context_data(self, **kwargs):
        messages.success(request, 'test')
        return {'search_string': 'Test'} 
```

当我运行它时，我首先得到错误`name 'SearchView' is not defined`。有谁知道为什么？

试图跳过我添加`from project.app.views import SearchView`的丑陋而不是我希望它工作的方式，但是嘿，我试着看看我是否能让其余的工作。然后我`global name 'request' is not defined`因为`messages`. 这是有道理的，但我如何在这里获取请求对象？

所以我想知道：如何让视图按预期工作以及如何使用消息`get_context_data()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:45:42.857

你看到`name 'SearchView' is not defined`是因为你没有导入`SearchView`到你的`urls.py`. 如果您认为这很难看，那么您可以`search = SearchView.as_view()`使用`views.py`旧样式来引用视图`search`。可以访问该请求`self.request`以添加消息。下面给出了更新的源示例。

```
# views.py
class SearchView(TemplateView):
    template_name = 'search.html'

    def get_context_data(self, **kwargs):
        messages.success(self.request, 'test')
        return {'search_string': 'Test'}

search = SearchView.as_view()

# urls.py
urlpatterns += patterns('project.app.views',
    url('^$', 'index'), # Old style
    url(r'^test/$', 'search'), # New style
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:43:25.523

请一次问一个问题（StackOverflow 指南）。

反正：

*   **这就是基于类的视图的工作方式**。没有自动导入魔法，您只需导入类并使用它的 as_view() 方法。
*   您可以通过 访问视图类中的请求对象`self.request`。

# git - 指示哪些分支跟踪哪些远程分支

> ID：10229180
> 
> 赞同：1
> 
> 时间：2012-04-19T13:31:19.280
> 
> 标签：git

这是我对 Git 的理解：-

如果我克隆一个存储库，那么我最初只会获得主分支的副本。然后我可以表明我想使用标志来跟踪远程`git checkout`分支`-b`。这按预期工作。

所以我的问题是你如何让 Git 告诉你这些信息。如果我输入`git branch -a`，那么它会显示所有分支的混合列表，例如

```
* master
  mybranch
  remotes/origin/master
  remotes/origin/mybranch 
```

我想知道的是除了保持相同的名称之外，我怎样才能知道哪些本地分支正在跟踪哪些远程分支？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T13:38:27.687

> 如果我克隆一个存储库，那么我最初只会获得主分支的副本。然后我可以表明我想使用带有 -b 标志的 git checkout 来跟踪远程分支。这按预期工作。

其实`git checkout -b ...`就是你用什么来创建一个*新*的分支。如果您只是想签出远程中已经存在的分支，则不需要`-b`. 例如，在这里我正在创建一个跟踪的本地分支`remotes/origin/folder-hack`：

```
$ git checkout folder-hack
Branch folder-hack set up to track remote branch folder-hack from amdragon.
Switched to a new branch 'folder-hack' 
```

> 我想知道的是除了保持相同的名称之外，我怎样才能知道哪些本地分支正在跟踪哪些远程分支？

每个分支都有对应的配置`.git/config`。通过查看可以找到与分支关联的*远程*`branch.<BRANCHNAME>.remote`，通过查看可以找到远程分支的名称`branch.<BRANCHNAME>.merge`。所以，从我之前的例子：

```
$ git config --get branch.folder-hack.remote
amdragon
$ git config --get branch.folder-hack.merge
refs/heads/folder-hack 
```

您可以运行`git config --list`并查看`branch...`线条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:01:06.787

尝试

```
git branch -vv 
```

远程分支与跟踪它的本地分支显示在同一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:03:16.860

您可以通过以下方式查看所有远程分支以及哪些本地分支已经跟踪远程：

```
git remote show origin 
```

# c# - 在 WPF 中启用编辑 ListBox 项

> ID：10229181
> 
> 赞同：0
> 
> 时间：2012-04-19T13:31:31.690
> 
> 标签：c#, wpf, xaml, listview, data-binding

我正在编写一个基于列表框的标签控件。

它使用以下模板显示 ListBox 项目：

```
 <Setter Property="ItemTemplate">
            <Setter.Value>
              <DataTemplate>
                <local:TagControl Text="{Binding Path=., Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Remove="RemoveItem" />
              </DataTemplate>
            </Setter.Value>
        </Setter> 
```

我注意到当我更新 TagControl 的文本时，ListBox 中的原始项目没有得到更新。我`ObservableCollection<string>`用作物品来源。

TagControl 实现 INotifyPropertyChanged 并调用事件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:46:52.090

我已经重现了您的问题并可以提供解决方案。`ObservableCollection<string>`使用只读的 IEnumerable 枚举。

如果你`ObservableCollection<string>`用`ObservableCollection<DataItem>`where替换

```
public class DataItem
{
    public string Name{get;set;} 
} 
```

然后绑定到你的DataTemplate中的Name，枚举出来的DataItem是只读的，但是Name属性是读写的，当你编辑列表项中的文本时会更新。

# java - 使用 jodatime 解析日期 01-01-0001

> ID：10229183
> 
> 赞同：3
> 
> 时间：2012-04-19T13:31:36.630
> 
> 标签：java, date, jodatime

如果这个函数被传递了一个无效的日期并且一个 IllegalFieldValueExcption 被抛出，我想返回一个默认的日期`0001-01-01`。但是当运行下面的代码时，创建的日期是`defaultDate`is `0001-01-02`，这是错误的。有没有人看到我做错了什么？

```
public Date unmarshal(String string) {    
    DateTimeFormatter fmt = new DateTimeFormatter(null, DateTimeFormat.forPattern("yyyy-MM-dd").getParser());
    Date defaultDate = DateTime.parse("0001-01-01", fmt).toDate();

    try {
        return formatter.parseDateTime(string).toDate();
    }
    catch (IllegalFieldValueException e) {
        return defaultDate;
    }
} 
```

**编辑：**

我用这些更新了前两行，现在它工作得很好，谢谢！

```
Chronology chrono = GJChronology.getInstance();
Date defaultDate = new DateTime(0001, 01, 01, 10, 0, 0, 0, chrono).toDate(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:50:40.690

您遇到的问题是因为 Joda-Time 中的**默认[年表](http://joda-time.sourceforge.net/key_chronology.html)是 ISO**。该日历系统与当今世界大部分地区的企业使用的日历系统相同。***ISO 系统不适用于 1583 年之前的历史工作，因为它应用了从今天开始的闰年规则***（它是一个预兆日历）。

所以你不应该使用`defaultDate`1583 之前的 ISO 年表。如果您需要使用此类日期，则必须在 Joda-Time 中使用不同的年表。

# mysql - Delphi找到异常的具体原因

> ID：10229186
> 
> 赞同：0
> 
> 时间：2012-04-19T13:32:03.237
> 
> 标签：mysql, delphi, exception, delphi-2010

我有一个连接数据库的应用程序。
使用 BDE 组件和数据库连接的是 MySQL。

现在我正在做一些验证，以检查执行插入语句时是否重复条目。

以下是检查主键属性是否重复条目的代码。

```
var
  error :string; 
  cmpres:integer;
begin
 ...
 /* all my data queries */
  try
    Query1.ExecSQL;
  Except
   on E: Exception do
   /*check if its a Duplicate entry or other exception*/
    begin    
         error := E.Message;
         error := copy(error,length(error)-16,length(error)-2);
         cmpres :=CompareStr(LowerCase(error),'for key '+#39+'primary'+#39) ;
         if cmpres = 0  then
           MessageDlg('Entry already exist',mtError,[mbok],0)
         else
           MessageDlg('Invalid Data Entries',mtError,[mbok],0);
         exit;
    end;
  end;
end; 
```

数据库异常被广泛地放在里面 `EDatabaseError`

谁能告诉我有什么方法可以在不进行消息比较的情况下区分这些错误。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:48:58.287

如果您使用 BDE，则异常应该是 EDBEngineError，而不是 EDatabaseError。你可以这样做：

```
try
    Query1.ExecSQL;
except
    on E: EDBEngineError do
    begin
        for i := 0 to E.ErrorCount - 1 do
        begin
            err := E.Errors[i];
            case err.ErrorCode of
                ... stuff ...
            end;
        end
    end;
end 
```

# entity-framework-4 - Entity Framework 4.3.1 Code First：创建了数据库但没有创建表

> ID：10229190
> 
> 赞同：8
> 
> 时间：2012-04-19T13:32:26.577
> 
> 标签：entity-framework-4, ef-code-first, sql-server-ce, entity-framework-migrations

今天我将一个旧应用程序从 EF 4.2 迁移到 EF 4.3.1。在我的应用程序中，我使用的是 CodeFirst，但在迁移后它停止工作，并且找不到原因。为了清除任何其他可能的问题，我决定创建一个小型控制台应用程序，并使用 ADO 团队发布的数据迁移演练：

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

我完全复制了博客的代码，但是我得到了一些错误，而不是正常工作（创建数据库、创建模式和插入博客）：

*   仅创建数据库，但不创建表
*   我收到此错误`Conversion failed when converting datetime from character string.`“

所有这些都在 SQL Server 2005 express 上。

我使用 SQL Compact 尝试了相同的方法，但结果相同（但错误不同）：

*   仅创建数据库（在本例中为 bin 文件夹中的 sdf 文件），但没有表
*   我得到错误`The format of the specified date or time datepart is not valid. [ String = 2012-04-19T13.21.04.364 ]`

我认为在这两种情况下，问题都在于 EF 希望作为第一次迁移进入的行：

```
INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) 
VALUES ('201204191321184_init', '2012-04-19T13.21.04.364',  ...., '4.3.1'); 
```

显然格式与 . 是错误的，至少在我的语言环境中，它应该是：

这是一个错误还是什么？它以前总是与其他日期时间一起工作。

**更新** 我尝试将它作为显式迁移运行，并使用 -verbose 标志集应用迁移，这就是我得到的：

```
PM> Update-Database -Verbose
Using NuGet project 'ConsoleApplication2'.
Using StartUp project 'ConsoleApplication2'.
Target database is: '|DataDirectory|ConsoleApplication2.ConsoleApplication1.BlogContext.sdf' (DataSource: |DataDirectory|ConsoleApplication2.ConsoleApplication1.BlogContext.sdf, Provider: System.Data.SqlServerCe.4.0, Origin: Convention).
Applying explicit migrations: [201204191356197_Initial].
Applying explicit migration: 201204191356197_Initial.
CREATE TABLE [Blogs] (
    [BlogId] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](4000),
    CONSTRAINT [PK_Blogs] PRIMARY KEY ([BlogId])
)
CREATE TABLE [__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [CreatedOn] [datetime] NOT NULL,
    [Model] [image] NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK___MigrationHistory] PRIMARY KEY ([MigrationId])
)
[Inserting migration history record]
System.Data.SqlServerCe.SqlCeException (0x80004005): The format of the specified date or time datepart is not valid. [ String = 2012-04-19T13.56.45.437 ]
   at System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr)
   at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommandText(IntPtr& pCursor, Boolean& isBaseTableCursor)
   at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior behavior, String method, ResultSetOptions options)
   at System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery()
   at System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteOperations(String migrationId, XDocument targetModel, IEnumerable`1 operations, Boolean downgrading)
   at System.Data.Entity.Migrations.DbMigrator.ApplyMigration(DbMigration migration, DbMigration lastMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ApplyMigration(DbMigration migration, DbMigration lastMigration)
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
The format of the specified date or time datepart is not valid. [ String = 2012-04-19T13.56.45.437 ] 
```

**更新 2** 我安装了 SQL Server Profiler，并分析了那里发生的事情。我通过查询分析器一一执行了所有语句，而失败的是，如上所述，插入迁移。

```
INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) VALUES ('201204231416585_InitialCreate', '2012-04-23T14.16.59.038Z', ...., '4.3.1') 
```

当将数据时间字符串的格式从`2012-04-23T14.16.59.038Z`更改`2012-04-23T14:16:59.038Z`为命令时，我猜 EF 以与我的语言环境不兼容的格式发送数据时间。

谢谢西蒙妮

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T09:53:15.123

感谢 ADO.NET 团队，这是迁移代码中的一个错误。显然，他们在为 DateTime 字段生成代码时忘记指定 InvariantCulture，因此它适用于 EN 语言环境，但不适用于其他语言环境。

要解决这个问题，等待官方修复，您应该指定一个覆盖该`Generate(DateTime defaultValue)`方法的自定义 SqlGenerator：

```
class FixedSqlGenerator : SqlServerMigrationSqlGenerator
{
    protected override string Generate(DateTime defaultValue)
    {
        return "'" + defaultValue.ToString("yyyy-MM-ddTHH:mm:ss.fffK", CultureInfo.InvariantCulture) + "'";
    }
} 
```

然后在 Configuration 类中指定新的 SqlGenerator：

```
SetSqlGenerator("System.Data.SqlClient", new FixedSqlGenerator()); 
```

如果您只想在手动迁移中使用它就足够了，如果您只需要 CodeFirst，则必须在应用程序启动代码或 DbContext 中指定配置。

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<BlogContext, Migrations.Configuration>()); 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:27:00.963

我在一个全新的项目中遇到了同样的问题，就我而言，我通过在 web.config 中指定正确的文化来解决它

```
<globalization enableClientBasedCulture="false" culture="en-US" /> 
```

# asp.net - 如何在母版页中为两个位置的两个子页面提供图像路径？

> ID：10229194
> 
> 赞同：0
> 
> 时间：2012-04-19T13:32:33.950
> 
> 标签：asp.net, visual-studio-2008, master-pages, content-pages, resolveurl

大家好，我的工作环境是asp.net c# vs2008。我的问题是，我在共享文件夹中有一个母版页 outside.master。在里面我有一个图像控件

```
<img src="App_Themes/Home/images/logo.png" /> 
```

我在两个子页面中引用此母版页。一是位于根目录下的Index.aspx，二是在masters文件夹下的registration.aspx。问题是当我运行时，index.aspx 会显示 logo，而 registration.aspx 没有显示 logo。请告诉我如何指定路径，以便我将在两个页面中获得徽标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:47:42.920

波浪号**~**将解析服务器端控件。

所以你需要在**HTML**元素中添加`runat="server"`as 。`img`

 **试试这个：

```
<img src="~/App_Themes/Home/images/logo.png" runat="server"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:41:52.633

尝试以下操作：

```
<img src="~/App_Themes/Home/images/logo.png" runat="server" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:45:51.530

最万无一失的方法是拥有这样的东西

```
<asp:Image runat="server" id="myImage" ImageUrl='<%# Eval("imageFile") %>' /> 
```

然后在代码隐藏中将变量 imageFile 分配给类似的东西`Server.MapPath("App_Themes/Home/images/logo.png");`**

# asp.net - 中继器 PageCount 和 PageIndex

> ID：10229195
> 
> 赞同：1
> 
> 时间：2012-04-19T13:32:41.667
> 
> 标签：asp.net, gridview, asprepeater, page-index-changed

转发器是否有 pageindex 或 pagecount？我可以使用gridview 并且在repeater 中找不到太多，在代码隐藏中也找不到，我将如何在Repeater 中执行PageIndex 和PageCount？

```
 Page <%# rpt.PageIndex + 1 %> of <%# rpt.PageCount %>

<asp:Repeater ID="rpt" runat="server" OnItemCommand="rpt_OnItemCommand" OnItemDataBound="rpt_OnItemDataBound">
    <HeaderTemplate>
           <div >
                <div >
                     Page <%# rpt.PageIndex + 1 %> of <%# rpt.PageCount %>
                </div>
            </div>
     </HeaderTemplate>
     <ItemTemplate ......
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:45:41.453

中继器控件不支持开箱即用的分页，这意味着您必须自己实现它。一种方法（可能也是最简单的方法）是使用[PagedDataSource](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.pageddatasource.aspx)对象，它封装了与分页相关的属性和逻辑。网上有几个关于如何做到这一点的例子：[例子一](http://www.dotnetcurry.com/ShowArticle.aspx?ID=345)，[例子二](http://www.dotnetfunda.com/articles/article980-paging-with-repeater-control-.aspx)，[例子三](http://www.4guysfromrolla.com/articles/081804-1.aspx)。

# css - 某个位置下的图像：绝对；DIV背景图片？

> ID：10229197
> 
> 赞同：0
> 
> 时间：2012-04-19T13:32:48.150
> 
> 标签：css, position, z-index, absolute

我到处搜索，我只是找不到这个问题的答案。

所以我的样式表中有一个 DIV，它是绝对定位的，并带有背景图像。

在那个 DIV 里面，我有一个我想出现在 DIV 背景下的东西。

我试过 z-index 但它似乎不起作用！？这与我的 DIV 上的绝对位置有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:37:10.957

将图像 div 放在绝对定位之前。那应该把它放在另一个div下面。你也可以

```
position: absolute 
```

图像，但仍将其放在 div 之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:13:08.650

position:absolute 在屏幕上下文中。要在 div 上下文中使用 position:absolute，请将父 div 设置为 position:relative，因此，他的具有 p:absolute 的孩子会将其父母的顶部视为 orign。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:36:40.203

无论你做什么，你都不能让子元素出现在它们父元素的背景之下（有关更多信息，请参阅[堆叠上下文](http://www.w3.org/TR/CSS2/visuren.html#layers)。）你需要修改你的 DOM，以便将第二个元素带到 DIV 之外，并在其前面显示背景那个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:49:27.270

确保您的背景图像是 .PNG 或 .GIF 文件格式。这两种文件类型都支持透明度。

# objective-c - 刷新 UITableview 导致 EXC_BAD_ACCESS 错误

> ID：10229199
> 
> 赞同：1
> 
> 时间：2012-04-19T13:32:52.393
> 
> 标签：objective-c, ios, xcode, exc-bad-access

在我的 rss feeder 之类的应用程序中，我有一个包含 NewsItems 的数组，每个项目负责从 Web 异步请求其图像（通过使用 ASCHTTPRequest 库和 NSOperationQueue 方法）

我想在我的 rss feeder 中添加一个刷新功能。我的尝试是再次重新创建一个新数组（并释放所有旧的 NewsItems）并重复请求过程。

但是，如果我在所有 NewsItems 获取它们的图像之前刷新内容，则会导致 EXC_BAD_ACCESS 错误的崩溃。（由于旧项目是 dealloc 并且通过委托对这些项目进行回调..）

我应该如何以更好的方式解决这个问题？这是否意味着我不能简单地释放所有旧项目而不检查它们是否已经完成了它的请求？

抱歉，如果我不能清楚地描述我的问题。期待您的帮助 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:44:17.753

您必须跟踪所有当前的 HTTP 请求。当您希望刷新时，取消所有请求，然后重新创建新阵列。这样，您的异步请求就不会尝试更新已释放的图像。

# hibernate - 如何使用 Hibernate 的 findByNamedQuery 返回 Long 列表？

> ID：10229203
> 
> 赞同：0
> 
> 时间：2012-04-19T13:32:59.103
> 
> 标签：hibernate, stored-procedures, query-optimization, wrapper, named-query

我正在使用 Hibernate 的 getHibernateTemplate().findByNamedQuery() 来在 SQL Server 中执行存储过程（出于优化原因）。存储的过程应该返回一个多头列表。

从我所看到的，我可以返回这样一个列表的唯一方法是创建一个专门为 Hibernate 的包装类，并在我的 @NamedNativeQuery 声明的一部分中使用它：resultClass=LongWrapper.class

这真的是使用 Hibernate 的 findByNamedQuery() 函数返回 long 列表的唯一方法吗？

问题是，我需要优化内存分配和性能，因为存储过程将返回接近一百万个 long，所以我不愿意将已经包装的 Long 包装到我自己的包装类中。似乎是不必要的开销。

有什么建议么？

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:05:42.407

您可以将方法重写为以下内容：

```
@SuppressWarnings("unchecked")
public List<Long> getIds() {
  Session session = getSession();
  Query namedQuery = session.getNamedQuery(QUERY_IDS);
  String queryForIds = namedQuery.getQueryString();
  SQLQuery query = session.createSQLQuery(queryForIds);
  query.addScalar("ID", Hibernate.LONG);
  List<Long> result = query.list();
  return result;            
} 
```

我从[how-do-i-use-hibernates-findbynamedquery-to-return-a-list-of-longs得到了这个解决方案](https://stackoverflow.com/questions/3504751/what-object-type-does-spring-hibernate-template-execute-method-return-for-a-coun)

# jqgrid - 如何在重新加载 JQuery Grid 时保持复选框选择？

> ID：10229205
> 
> 赞同：2
> 
> 时间：2012-04-19T13:33:03.830
> 
> 标签：jqgrid

我有一个 JQuery 网格，每次在服务器上发生某些事件（即更新数据集中）时我都会重新加载它，并在网格中显示最新的数据集。该网格的第一列也有复选框。发生的情况是，假设用户正在选择一些复选框，与此同时，如果网格由于服务器上的数据更新而重新加载，我的网格会重新加载最新的数据集，但我之前的所有复选框选择都会丢失。网格重新加载后如何再次标记这些选中的复选框？

请建议。

```
function PushData() {
    // creates a proxy to the Alarm hub
    var alarm = $.connection.alarmHub;
    alarm.notification = function () {
        $("#jqTable").trigger("reloadGrid",[{current:true}]); 
    };
    // Start the connection and request current state
    $.connection.hub.start(function () {
        BindGrid();
    });
}
function BindGrid() {
    jqDataUrl = "Alarm/LoadjqData";
    var selectedRowIds;
    $("#jqTable").jqGrid({
        url: jqDataUrl,
        cache: false,
        datatype: "json",
        mtype: "POST",
        multiselect: true ,
        postData: {
            sp: function () { return getPriority(); },
            },
        colNames: ["Id", "PointRef", "Value", "State", "Ack State", "Priority", "AlarmDate", "", ""],
        colModel: [
            //{ name: 'alarmId_Checkbox', index: 'chekbox', width: 100, formatter: "checkbox", formatoptions: { disabled: false }, editable: true, edittype: "checkbox" },
            { name: "AlarmId", index: "AlarmId", width: 70, align: "left" },
            { name: "PointRef", index: "PointRef", width: 200, align: "left" },
            { name: "Value", index: "Value", width: 120, align: "left" },
            { name: "AlarmStateName", index: "AlarmStateName", width: 150, align: "left" },
            { name: "AcknowledgementStateName", index: "AcknowledgementStateName", width: 200, align: "left" },
            { name: "Priority", index: "Priority", width: 130, align: "left" },
            { name: "AlarmDate", index: "AlarmDate", width: 250, align: "left" },
            { name: "TrendLink", index: "Trends", width: 100, align: "left" },
            { name: "MimicsLink", index: "Mimics", width: 100, align: "left" }
            ],
        // Grid total width and height
        width: 710,
        height: 500,
        hidegrid: false,
        // Paging
        toppager: false,
        pager: $("#jqTablePager"),
        rowNum: 20,
        rowList: [5, 10, 20],
        viewrecords: true, // "total number of records" is displayed
        // Default sorting
        sortname: "Priority",
        sortorder: "asc",
        // Grid caption
        caption: "Telemetry Alarms",
        onCellSelect: function (rowid, icol, cellcontent, e) {
            var cm = jQuery("#jqTable").jqGrid('getGridParam', 'colModel');
            var colName = cm[icol];
            //alert(colName['index']);
            if (colName['index'] == 'AlarmId') {
                if ($("#AlarmDialog").dialog("isOpen")) {
                    $("#AlarmDialog").dialog("close");
                }
                AlarmDialogScript(rowid)
            }
            else if (colName['index'] == 'Trends') {
                TrendDialogScript(rowid)
            }
            else if (colName['index'] == 'Mimics') {
                MimicsDialogScript(rowid)
            }
            else {
                $("#jqTable").setCell(rowid, "alarmId_Checkbox", true); //Selects checkbox while clicking any other column in the grid
            }
        },
        recreateFilter: true,
        emptyrecords: 'No Alarms to display',
        loadComplete: function () {
            var rowIDs = jQuery("#jqTable").getDataIDs();
            for (var i = 0; i < rowIDs.length; i++) {
                rowData = jQuery("#jqTable").getRowData(rowIDs[i]);
                //change the style of hyperlink coloumns
                $("#jqTable").jqGrid('setCell', rowIDs[i], "AlarmId", "", { 'text-decoration': 'underline', 'cursor': 'pointer' });
                $("#jqTable").jqGrid('setCell', rowIDs[i], "TrendLink", "", { 'text-decoration': 'underline', 'cursor': 'pointer' });
                $("#jqTable").jqGrid('setCell', rowIDs[i], "MimicsLink", "", { 'text-decoration': 'underline', 'cursor': 'pointer' });
                if ($.trim(rowData.AcknowledgementStateName) == 'Active') {
                    $("#jqTable").jqGrid('setCell', rowIDs[i], "AcknowledgementStateName", "", { 'background-color': 'red', 'color': 'white' });
                }
                else if ($.trim(rowData.AcknowledgementStateName) == 'Acknowledged') {
                    $("#jqTable").jqGrid('setCell', rowIDs[i], "AcknowledgementStateName", "", { 'background-color': 'Navy', 'color': 'white' });
                }
            }
            //$("#jqTable").jqGrid('hideCol', "AlarmId") //code for hiding a particular column
        },
        gridComplete: function () {
            $('#jqTable input').bind('mouseover', function () {
                var tr = $(this).closest('tr');
                if ($("#AlarmDialog").dialog("isOpen")) {
                    $("#AlarmDialog").dialog("close");
                }
                AlarmDialogScript(tr[0].id);
            }
            );
        }
    }).navGrid("#jqTablePager",
    { refresh: true, add: false, edit: false, del: false },
    {}, // settings for edit
    {}, // settings for add
    {}, // settings for delete
    {sopt: ["cn"]} // Search options. Some options can be set on column level
    )
    .trigger('reloadGrid', [{page:1, current:true}]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:10:27.340

如果我理解你是正确的，你只需要使用附加参数 i

```
$("#list").trigger("reloadGrid", [{current:true}]); 
```

或者

```
$("#list").trigger("reloadGrid", [{page: 1, current: true}]); 
```

（见[答案](https://stackoverflow.com/a/3808014/315935)）。它的作用与贾斯汀建议的几乎相同。

取决于您在重新加载网格时想要的确切含义，您可能需要保存网格状态，包括所选项目的列表，`localStorage`并在加载网格后重新加载状态。[这个答案](https://stackoverflow.com/a/8547852/315935)详细描述了实现。可以使用版本 4.3.2 中引入的新 jqGrid 事件来简化答案中的相应[演示。](http://www.ok-soft-gmbh.com/jqGrid/ColumnChooserAndLocalStorage2_.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:45:46.680

您可以在重新加载网格之前保存选择，例如在[`beforeRequest`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)事件中：

```
selectedRowIDs = jQuery('#myGrid').getGridParam('selarrrow'); 
```

然后在重新加载网格后，您可以循环`selectedRowIDs`使用并重新选择每个网格`setSelection`。例如：

```
for (i = 0, count = selectedRowIDs.length; i < count; i++) {
    jQuery('#myGrid').jqGrid('setSelection', selectedRowIDs[i], false);
} 
```

您可以在`loadComplete`事件中运行此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:36:22.987

利用

```
recreateFilter: true 
```

你应该完成了

# c# - OnPaint 未触发？

> ID：10229206
> 
> 赞同：1
> 
> 时间：2012-04-19T13:33:05.733
> 
> 标签：c#, .net, winforms, paint

我有一个 WinForm ，我在其中覆盖`OnPaint`，这个表单是*MDI 父级*。`OnPaint`但是，即使`WinForm`与孩子一起显示，也不会触发？我试过用`Invalidate`但`Update`不触发`OnPaint`eather？

我已经尝试过 Paint 事件，但它在这里是一样的吗？

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:40:54.693

当您设置`Form.IsMdiContainer`时，它实际上只是`MdiClient`向表单添加了一个控件。您的子窗体实际上显示在 MdiClient 控件中，而不是窗体本身。正在引发表单的 Paint 事件，但 MdiClient 停靠在表单中，因此您看不到它。您需要改为访问 MdiClient 的绘制事件。

```
public partial class Form1 : Form
{
    public Form1() {
        InitializeComponent();

        mdiClient = Controls[0] as MdiClient;

        if (mdiClient != null) {
            mdiClient.Paint += OnMdiClientPaint;
        }
    }

    private MdiClient mdiClient;

    private void OnMdiClientPaint(object sender, PaintEventArgs e) {
        e.Graphics.FillRectangle(Brushes.Blue, mdiClient.ClientRectangle);
    }
} 
```

# css - 导航链接随机改变颜色

> ID：10229207
> 
> 赞同：0
> 
> 时间：2012-04-19T13:33:17.997
> 
> 标签：css, font-face

我为客户建立了一个导航列表，他们选择使用 [Oswald]() 字体。

现在，当用户滚动链接时，导航箭头会弹出到一侧，指示当前单击哪个链接，它不应该在悬停时变为橙色。我已经完全删除了任何 javascript 和字体，但仍然无法解决问题。

这是问题的屏幕截图[http://cl.ly/043a0q0o0Q392q2m1k20](http://cl.ly/043a0q0o0Q392q2m1k20)

我的CSS（SASS）如下：

```
 #leftnav {

        width: 205px;
        float: left;

        ul {

            li {
                border: 1px solid #fff;
                border-top: 0px;
                background: #cc5816;
                padding: 3px 10px;
                @include gradient($top_color: #d86c07, $bottom_color: #bb5e06);

                a {
                    position: relative;
                    font-family: $main_bold_font;
                    font-size: 16pt;
                    color: #fff;
                    text-decoration: none;
                    text-shadow: $text_shadow;
                }

                a:hover { @extend a; }

                a:visited { @extend a; }

            }

        }

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:42:59.457

我不确定这是否能解决问题。但是，如此[处所述](http://css-tricks.com/remember-selectors-with-love-and-hate/)，我建议将 :hover 和 :visited 的顺序更改为 :visited 和 :hover。也许它有助于分析编译的 css。

# cluster-computing - 我可以在集群 Glassfish 2.1.1 中安装 Liferay 6.1 EE 吗？

> ID：10229208
> 
> 赞同：1
> 
> 时间：2012-04-19T13:33:21.233
> 
> 标签：cluster-computing, liferay-6, glassfish-2.x

我有一个关于在 Glassfish **2.1.1 Web 应用程序服务器的集群环境中安装 Liferay** **6.1** EE的简单问题，问题是我可以这样做吗？如果可以，我需要什么配置，如果不是，为什么，有什么问题？

 **我已经有一个稳定的生产服务器集群并运行带有 Glassfish 2.1.1 的 Liferay 5.2 EE，我只想用当前的集群环境升级 Liferay。

我想尽快得到答案。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:40:13.140

好的，我制作了一个 PoC ，并且似乎可以正常工作，我在 glassfish 2.1.1（使用 JDK 7 32 位）上安装了 Liferay 6.1 CE 作为独立和集群，并且似乎可以正常工作。

关于性能和稳定性，我没有进行任何测试，只是门户网站的运行和启动是的，毫无例外地运行良好，我在安装在带有 JDK 1.7（32 位）的 Windows 上的 Glassfish 2.1.1 上进行了尝试，但对于 64 -bit 在集群模式下失败，因为 Glassfish 2.1.1 中存在 64 位 Windows 操作系统的错误（称为 ClassNotFoundException sun.security.pkcs11.SunPKCS11），但作为独立的在 64 位中也能正常工作。**

# c# - log4net RollingFileAppender 要求在每次日志尝试时调用 Configure()

> ID：10229209
> 
> 赞同：3
> 
> 时间：2012-04-19T13:33:21.707
> 
> 标签：c#, log4net

不确定这里发生了什么，但我的日志记录代码不会写入 rollingFileAppender，除非我在每次调用时调用 XmlConfigurator.Configure()。我已经在下面的代码中打开了调试，并且可以确认当在构造函数中只调用一次 Configure 时，它​​似乎确实在拉入我的配置，但是当实际调用 Log() 时，日志文件没有任何反应或出现在调试窗口中。如果我取消注释 Log() 中对 Configure() 的调用并让它在每次调用时重新配置，那么它工作得很好，但我认为这不是预期的用途。

奖励积分！- 我注意到第一次调用 log.Info() 没有记录，但每次运行过程中的所有后续调用都很好。

谢谢！

```
 public static class LogToFile
{
    public const string RollingFileAppenderName = "RollingFileLogger";

    static LogToFile()
    {
        log4net.Config.XmlConfigurator.Configure();
    }

    public static void Log(string fileNameBase, string message, string context)
    {
        if (fileNameBase == null) throw new ArgumentNullException("fileNameBase");
        if (message == null) throw new ArgumentNullException("message");
        if (context == null) throw new ArgumentNullException("context");

        //log4net.Config.XmlConfigurator.Configure();

        string fileName = string.Format("{0}_{1}.log", fileNameBase, context);
        string fullFileName = Path.Combine(Properties.Settings.Default.LogFilePath, fileName);

        if (!Directory.Exists(Properties.Settings.Default.LogFilePath)) Directory.CreateDirectory(Properties.Settings.Default.LogFilePath);

        LogicalThreadContext.Properties["LogName"] = string.Format(fullFileName);
        ILog log = LogManager.GetLogger(RollingFileAppenderName);

        log.Info(message);
    }
}

    <appender name="rollingFileAppender" type="log4net.Appender.RollingFileAppender">
  <file type="log4net.Util.PatternString" value="%property{LogName}" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="2MB" />
  <countDirection value="-1"/>
  <LockingModel value="log4net.Appender.FileAppender+MinimalLock"/>
  <staticLogFileName value="false" />
  <immediateFlush value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="AlertMessageHandler Message : %-25date [%thread] - %newline%message%newline" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:58:32.883

您的配置文件说日志文件名称设置为使用您在运行时更改的 LogName 属性。我一直认为，如果不重新初始化 appender（通过调用 ActivateOptions）或调用 XmlConfigurator.Configure()，则不允许在运行时更改 appender 的属性，这更容易但会做更多的事情。

同样在您的日志方法中，如果您在设置 LogName**之前**调用 XmlConfigurator.Configure() ，那么我怀疑您的第一次调用会失败（尝试写入 null），而您的第二次调用将写入应该使用的文件第一个电话。

如果在设置 LogName**之后**将 XmlConfigurator.Configure() 移动到，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:34:15.143

实际上 sgmoore 的建议使我找到了解决方案。如果我可以只在 Appender 对象上命名日志文件而不是弄乱配置文件属性，那么调用 ActivateOptions 就可以了。这是工作代码。谢谢！

```
public static class LogToFile
{
    public const string RollingFileLoggerName = "RollingFileLogger";

    public const string RollingFileAppenderName = "rollingFileAppender";

    private static readonly ILog Logger = LogManager.GetLogger(RollingFileLoggerName);

    /// <summary>
    /// Logs to log4net rollingFileAppender
    /// </summary>
    /// <param name="fileNameBase">prefix of log filename</param>
    /// <param name="message">log4net message property</param>
    /// <param name="context">files grouped by context</param>
    public static void Log(string fileNameBase, string message, string context)
    {
        if (fileNameBase == null) throw new ArgumentNullException("fileNameBase");
        if (message == null) throw new ArgumentNullException("message");
        if (context == null) throw new ArgumentNullException("context");

        string fileName = string.Format("{0}_{1}.log", fileNameBase, context);
        string fullFileName = Path.Combine(Properties.Settings.Default.LogFilePath, fileName);

        if (!Directory.Exists(Properties.Settings.Default.LogFilePath)) Directory.CreateDirectory(Properties.Settings.Default.LogFilePath);

        ActivateAppenderOptions(string.Format(fullFileName));

        Logger.Info(message);
    }

    /// <summary>
    /// Update the appender in log4net after setting the log file path
    /// </summary>
    /// <param name="filename"></param>
    private static void ActivateAppenderOptions(string filename)
    {
        var hierarchy = (Hierarchy)LogManager.GetRepository();
        var appenders = hierarchy.GetAppenders();
        foreach (
            var rfa in appenders.OfType<RollingFileAppender>().Where(rfa => rfa.Name == RollingFileAppenderName))
        {
            rfa.File = filename;
            rfa.ActivateOptions();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:01:54.177

尝试以这种方式在您的方法之外声明日志变量：

```
private static readonly ILog log = LogManager.GetLogger(typeof(LogToFile)); 
```

这就是我使用它的方式，我必须解决问题。但是，就我而言，我没有登录静态类。

另外，我的 appender 信息位于我在 XmlConfigurator.Configure() 函数中指定的文件中。

```
log4net.Config.XmlConfigurator.Configure(new FileInfo(configFile)); 
```

# c# - 用于从 C# 中的 JSON 获取键：值的正则表达式

> ID：10229212
> 
> 赞同：2
> 
> 时间：2012-04-19T13:33:28.410
> 
> 标签：c#, regex

获取 az、AZ、0-9、空格、特殊字符以检测 url 的模式是什么

这是我的输入字符串：

> {id:1622415796,姓名:Vincent Dagpin,图片:https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/573992_1622415796_217083925_q.jpg}

这是模式：到目前为止

```
([a-z_]+):[ ]?([\d\s\w]*(,|})) 
```

预期结果：

```
id:1622415796
name:Vincent Dagpin
picture:https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/573992_1622415796_217083925_q.jpg 
```

问题是我不能得到最后一部分..图片网址..

任何帮助请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:38:14.083

我不认为正则表达式是正确的解决方案。C# 已经包含了你在 JavaScriptSerializer 中需要的工具。[在此处](https://stackoverflow.com/questions/7895105/json-deserialize-c-sharp)查看答案以了解方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T21:09:00.413

如果这是您期望的唯一一种 json 输入，并且不太可能进一步解析 json，那么完整的 json 解析器将是矫枉过正。

字符串拆分可能就是您所需要的，`jsonString.Split(',', '{', '}');` 其正则表达式将沿着`[{},]([a-z_]+):[ ]?(.+?)(?=,|})`

如果您可以修改正在发送的 json 字符串，则可以将 RegEx 键入其他内容，例如双引号。这是我正在使用的一个，它需要知道 json 键名。`System.Text.RegularExpressions.Regex("(?<=\"" + key + "\"+ *: *\"+).*(?=\")");`

# svn - 使用svn“覆盖合并” - 甚至可能吗？

> ID：10229213
> 
> 赞同：0
> 
> 时间：2012-04-19T13:33:28.923
> 
> 标签：svn, merge

使用 Subversion，我有两个不同的主干，它们包含基本相同的内容，但其中一个的更新频率低于另一个。为简单起见，我们称它们为“旧主干”和“新主干”。

我想定期将“旧主干”中存在的*所有内容替换为“新主干”中的所有内容。*本质上，我想要的是“复制”所有内容并替换现有内容。

如果我尝试合并，我最终会在“新主干”中删除一些文件，作为两个主干之间的实用合并。这不是我想要的。

以前我习惯于手动复制和替换每个子文件夹，首先删除旧版本中不需要的文件。这是一个艰苦的过程，应该用 Clearcase 中的“覆盖合并”来代替。

有没有办法在不手动浏览每个文件夹的情况下完成此操作？

编辑：这不是一个理想的设置，但由于我无法控制的情况，它就是这样。我仍然想知道我的核心问题的答案：是否可以创建覆盖合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:19:29.690

答案是否定的，Subversion (1.6) 不提供任何覆盖合并功能。我还假设您无法更改配置管理程序。如果可以，那么您应该按照推荐的做法使用 Subversion。发布分支是一件好事(TM)。

但是，我有两个疯狂的想法给你：

1.  如果您不需要保留目标中继的更改或合并历史记录，只需将其删除并将源中继复制到其位置即可。这就像有一个发布分支，但你一直在重新创建它。我不认为这是有价值的。

2.  您可以尝试仅滥用记录并重新集成功能。首先，您将首先将目标干线记录（而不是实际合并）回源干线。这将使 Subversion 认为您已成功合并分支并且它是最新的。之后，您会定期告诉 Subversion 将源主干重新集成到目标主干中。由于重新整合只查看每个分支的尖端，这可能会起作用。如果您尝试，请告诉我们结果！

对于第二个想法，请参考 Subversion 书中的 Advanced Merging 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:54:42.977

SVN 是一个集中的版本控制系统。你不应该有两个树干，这不是它的用途。您应该使用分支和标签。您的旧树干将是一个分支，然后您将树干合并到其中。如果您想要多个存储库并在它们之间进行同步，您应该使用分布式版本控制系统，例如 git。

# regex - 正则表达式在 vi 中搜索包含字符串但*不*以 Q 结尾的行

> ID：10229217
> 
> 赞同：1
> 
> 时间：2012-04-19T13:33:46.130
> 
> 标签：regex, match

使用 vi，我想匹配一个字符串，但前提是该行不以某个字母结尾，比如 Q。

例如，如果文件是：

```
myQ
my 
```

我想匹配第一行而不是第二行。

从阅读相关帖子*看来*，前瞻应该可行：

```
/[?=my][?!Q] 
```

应该只找到第二行，但它会找到第一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:46:11.690

我会选择以下内容

```
/^.\+[^Q]$^/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T12:30:14.797

Vim 有一个与 Perl 不同的正则表达式语法，但我们不应该为了您的目的而需要零宽度匹配。

```
/my\(.*[^Q]\|\)$ 
```

# jquery - jquery如何让每个函数调用最终更新所有？

> ID：10229218
> 
> 赞同：0
> 
> 时间：2012-04-19T13:33:50.903
> 
> 标签：jquery

我有一个函数可以遍历所有“li”元素并收集数据。我也将所有数据推送到数组中。一旦所有“li”循环完成，我需要使用更新的数据调用一次函数吗？

我现在的代码是这样的：但它调用了我的函数的 3 次，因为它获得了 3 次条件。该函数工作正常，我调用该函数是错误的，任何好的建议让它在完成所有循环后调用一次。

```
var pieIndex = [];
$('button.pieDraw', $(accordionBox)).live('click', function () { //done button
    var uls = $(accordionSec.accorGeography).find('ul');

    $.each(uls, function (i, val) {
        pieIndex = []; //i am clearing the array each time to get new value
        var currentLI = $(val).find('li');
        $(currentLI).each(function () {
            if ($(this).hasClass('c_on')) { // this is finding the class 3 times. it's fine
                var functionName = pieFunction[$(this).parent().attr('title') + 'Pie'].fun;
                pieIndex.push($(this).attr('data-index')); // at the last i am getting 1,2,3 it's correct.
                generatePieURL(functionName, curQI, crrentMonth, currentYear, pieIndex);
                //it is calling 3 times. i need only one time to call..
            }
        })

    })

}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:42:42.337

只需将您的函数调用从内部`.each`循环中取出：

```
 $(currentLI).each(function () {
        if ($(this).hasClass('c_on')) { 
            var functionName = pieFunction[$(this).parent().attr('title') + 'Pie'].fun;
            pieIndex.push($(this).attr('data-index')); 
        }
    })
    generatePieURL(functionName, curQI, crrentMonth, currentYear, pieIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:41:46.183

您可以使用`generatePieURL`after your `each`，因为 jQuery`each`是同步的。

所以：

```
var functionName; // will be filled in the following loop (only if the output will be the same at each loop
$(currentLI).each(function(){
  if($(this).hasClass('c_on'))
    ...
    return false; // to stop the each, if not needed anymore
})
if pieIndex.length > 0
  generatePieUrl(...) 
```

# c# - 加载文本文件以快速访问 C# windows 窗体应用程序

> ID：10229219
> 
> 赞同：0
> 
> 时间：2012-04-19T13:33:52.253
> 
> 标签：c#, sql, text

我在另一个stackoverflow上找不到这个答案，我会在这里问。我有一个大约 100000 行的文本文件。我一直在对其进行多次查询，例如

```
string header = isFirstRowHeader ? "Yes" : "No";
string pathOnly = Path.GetDirectoryName(path);
string fileName = Path.GetFileName(path);
string sql = @"SELECT Count(*) as NumberofRecords FROM [" + fileName + "]";

using (OleDbConnection connection = new OleDbConnection(
       @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pathOnly +
       ";Extended Properties=\"Text;HDR=" + header + "\""))
using (OleDbCommand command = new OleDbCommand(sql, connection))
using (OleDbDataAdapter adapter = new OleDbDataAdapter(command))
{
    DataTable dt = new DataTable();
    dt.Locale = CultureInfo.CurrentCulture;
    adapter.Fill(dt);
    return dt;
} 
```

它正在做这个的多个版本。有没有办法加载文本文件，以便我可以更快地运行这样的事情？有没有更好的办法？目前，它需要的时间太长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:04:05.030

你想做什么？

从您的示例看来，您唯一要做的就是获取文件中的记录数。

如果您没有跨越多行的内容，您可能可以安全地只计算行数（标题为-1 行）。

***** *当且仅当*

**编辑：**

因此，计算行数不是一种选择，因为您正在做更复杂的事情。

我刚刚生成了一个包含 100k 记录（大小为 7.7 MB）的示例文件，该文件在 0.43 秒内得到处理。做一个`count(*) .. group by Name`花了 0.58 秒。

你的数字是多少，为什么你认为它花了太长时间？文件在哪里？可能是网络/慢速驱动问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:36:33.780

使用流将文件加载到内存中，请参见[此处](http://support.microsoft.com/kb/304430)。一旦它在内存中，运行您的查询等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T13:44:14.357

您可以使用以下示例：

```
string filename = @"C:\BigTextFile.txt";  
StreamReader sr = System.IO.File.OpenText(filename);

// Process line by line.  
string line = "";  
do  
{  
line = sr.ReadLine();  
}  
while(sr.Peek() != -1);  

// Load all at once and process.  
string alltext = sr.ReadToEnd();  

sr.Close(); 
```

# java - 从 IE9 中的 javascript 检查小程序中是否存在 Java 函数

> ID：10229220
> 
> 赞同：1
> 
> 时间：2012-04-19T13:33:58.570
> 
> 标签：java, javascript, applet, internet-explorer-9

你好 stackoverflow 社区，

我有一些代码几乎可以在所有浏览器上运行，除了....（等等）.... IE9（可能还有其他版本的 IE？）。

所以，我在页面中添加了一个小程序，一切顺利，但我想检查小程序是否已加载，为此，我一直在轮询小程序中的功能是否存在。

例如，假设我的 java 小程序中有这个方法：

```
public int dummy( int a ) {
  return a + 1;
} 
```

所以在我的javascript中，我轮询该函数是否存在（使用jquery，其中#applet是applet标签的id）：

```
var japp = $("#applet").get(0);
if( japp && japp.dummy ) {
  alert( japp.dummy(1) );
} 
```

您会注意到这至少适用于 Chrome 和 Firefox，但不适用于 IE9。

在 IE9 中，无论可访问的方法如何，`japp.dummy`总是返回`undefined`

有谁知道一个好的 IE9 解决方法？

谢谢，-奥兹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:50:06.937

以这种方式尝试：

```
<object id="idOfMyApplet" ... >
    <param> ... </param>
</object>

function testApplet() {
    var myApplet = document.applets.idOfMyApplet;
    if (!myApplet) {
        return false;
    }
    try {
        myApplet.publicTestMethod();
    } catch(ex) { 
        return false;
    }
    return true;
}

var retryCounter = 20;
var appletLoaded = false;

function waitForApplet() {
    if (!testApplet()) {
        if (retryCounter > 0) {
            retryCounter--;
            setTimeout("waitForApplet()", 500);
        }
        return false;
    }
    appletLoaded = true;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:49:18.180

> 我想检查小程序是否已加载，为此，我一直在轮询以查看小程序中的功能是否存在。

不要那样做。相反，让小程序在`init()`. 结束`init()`是小程序准备就绪的时候。

> IE9 在这里失败，而其他浏览器没有。

用“任何浏览器”替换 IE9，您就会遇到与 applet/JRE/JS/浏览器交互挂钩的琐碎问题。不幸的是，这就是小程序的本质。:(

# html - border-radius.htc 在特定页面上的 IE8 中断（在更简单的演示页面中工作）

> ID：10229222
> 
> 赞同：0
> 
> 时间：2012-04-19T13:34:04.570
> 
> 标签：html, css, internet-explorer-8

我使用[border-radius.htc](http://www.htmlremix.com/css/curved-corner-border-radius-cross-browser)在Internet Explorer 9 之前的版本上显示圆角，该版本不支持border-radius CSS 属性。我遵循链接页面和其他地方给出的使用它的语法。它在我制作的这个简单的演示页面上运行良好：http: [//thomasash.philosofiles.com/uploads/examples/css/effects/rounded-corners/rounded-corners-ie-htc1.html](http://thomasash.philosofiles.com/uploads/examples/css/effects/rounded-corners/rounded-corners-ie-htc1.html)

但是，当我以同样的方式将它添加到更复杂的页面时 - [http://www.givingwhatwecan.org/](http://www.givingwhatwecan.org/) - 然后它在 IE6 中工作，但在 IE8 中中断。更具体地说，它甚至不显示应用了border-radius.htc 的div 的棕褐色背景色而“中断”。据我所知，尽管圆角框部分的 HTML 和 CSS 与上面链接的测试页面中的相似。谁能帮我弄清楚是什么破坏了它，以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:46:24.620

好吧，如果您在 CSS 中调用 .htc 文件，请记住它必须与页面相关。例如：

网站根目录：index.html styles/style.css styles/border-radius.htc

CSS：

```
div {
border-radius: 10px 10px 10px 10px;
behavior: url("styles/border-radius.htc")
} 
```

即使在获取背景图像等的 URL 时使用普通的 CSS，对于 .htc 文件，它也必须与文档相关（见上文）。

还请记住，您可能必须通过 Border Radius 为 CSS 使用速记。

还要确保您使用的服务器支持 .htc MIME-TYPE。

我还建议您查看 CSS3PIE，它有更好的文档/常见问题解答和社区来帮助您。

[http://css3pie.com/](http://css3pie.com/)

谢谢，希望对您有所帮助！

# java - 多播 socket.close 需要 3 分钟且 TTL>1

> ID：10229226
> 
> 赞同：4
> 
> 时间：2012-04-19T13:34:14.047
> 
> 标签：java, .net, sockets, multicast

在某些 Windows 机器上，我看到一个多播 socket.close 调用需要大约 3 分钟。

这可以在 Java 和 .NET 中跨各种不同类型的 NIC 和 Windows 风格重现。

它在大多数机器上是不可重现的，但那些拥有它的机器似乎遵循相同的模式。TTL>1 会导致 3 分钟 socket.close 并且任何 TTL==1 似乎几乎立即关闭套接字。

我的问题是有其他人看到这个问题吗？有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T13:29:53.493

我想我已经解决了`Socket.Close()`使用多播 TTL>1 时需要 3 分钟才能完成的谜题：每次启动路由和 RAS 服务 (RRAS) 时都会发生这种情况。此 KB 条目对其进行了解释并提供了一个修补程序：http: [//support.microsoft.com/kb/2555948/en-us](http://support.microsoft.com/kb/2555948/en-us)

`netsh interface ipv4 set global multicastforwarding=disabled`在管理 shell 中使用可以使`Socket.Close()`时间恢复正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:54:38.757

是的，我可以证实这一点。在 UDP 套接字上的 Windows 7 上的 C++ 中的行为相同。我发现不加入您要发送的同一个多播组可以解决我项目中的问题。

# blackberry - 异步加载图像黑莓

> ID：10229230
> 
> 赞同：-3
> 
> 时间：2012-04-19T13:34:26.403
> 
> 标签：blackberry, blackberry-jde, listfield

如何在每一行异步添加图像`ListField`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:25:23.600

跟着这些步骤。

1.  使用模型-视图-控制器 (MVC) 模式来规划您的类层次结构和关系。
2.  加载图像时，使用附加线程加载图像并通知视图侦听器（以 MVC 表示法）。

请注意，单个应用程序最多可以创建 16 个线程。BlackBerry 设备上所有应用程序的线程总数为 128。

因此，如果应用程序已经创建了 16 个线程，则第 17 次尝试失败并抛出 TooManyThreadsError 异常。

同样，如果 BlackBerry 设备上已经创建了 128 个线程并且应用程序尝试创建另一个线程，则会引发 TooManyThreadsError 异常。

# c# - Telerik RadGrid 和使用动态列运行总计

> ID：10229231
> 
> 赞同：2
> 
> 时间：2012-04-19T13:34:29.460
> 
> 标签：c#, asp.net, .net, telerik, radgrid

我有一个 RadGrid，它有一个带有动态列的数据源。我还在 columncreated 事件中使用此代码对数据进行分组并显示组页脚中列的总数：

```
if (e.Column.ColumnType != "GridExpandColumn" & e.Column.ColumnType != "GridGroupSplitterColumn")
    {
        if (e.Column.UniqueName != "Item" && e.Column.UniqueName != "Width" && e.Column.UniqueName != "Type" && e.Column.UniqueName != "Balance")
        {
            ((Telerik.Web.UI.GridBoundColumn)e.Column).Groupable = true;
            ((Telerik.Web.UI.GridBoundColumn)e.Column).DataFormatString = "{0:N0}";
            ((Telerik.Web.UI.GridBoundColumn)e.Column).Aggregate = Telerik.Web.UI.GridAggregateFunction.Sum;
        }
    } 
```

我的客户希望分组页脚总数是一个运行总数。即，如果第一个总数为 100，第二个总数为 25，则第二个页脚中的总数应显示 75。有没有办法使用自定义聚合或任何其他方式来做到这一点？

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:01:42.160

我认为 Telerik 网格中没有任何内置功能/字段/列来显示运行总计，但是您可以在网格的 ItemDataBound 事件中通过计算、存储并将其绑定到页脚模板列来实现这一点，以下是示例代码：

```
protected void RadGrid1_ItemDataBound1(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem dataItem = e.Item as GridDataItem;
        string payment = dataItem["PaymentAmount"].Text;
        decimal fieldValue = decimal.Parse(payment);
        total += fieldValue;
        dataItem["Balance"].Text = total.ToString();
    }

    if (e.Item is GridFooterItem)
    {
        GridFooterItem footerItem = e.Item as GridFooterItem;
        footerItem["PaymentAmount"].Text = "total: " + total.ToString();
    }
} 
```

如果我遗漏了什么，请告诉我。

# asp.net-mvc - webApi 参数数据长度

> ID：10229235
> 
> 赞同：1
> 
> 时间：2012-04-19T13:34:40.987
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

如何配置 WebApi 控制器以读取作为参数传入的所有数据？

客户：

```
 $.post(url,{id:aHugeData}); 
```

控制器：

```
 public class myController : ApiController
  {
   public List<string> Events(List<Event> id) //there must be 30 items, but I see 7
        {
            List<string> artists = new List<string>();
            foreach (Event e in id)
            {
                artists.AddRange(e.artists.artist);
            }
            artists = artists.Distinct().ToList();

            return artists;
        }
 } 
```

在 HttpContext 我看到收到的所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:48:21.427

Form Url Encoded Formatter 不想从
httpRuntime maxRequestLength="80000000" 读取配置，所以在 global.asax 中：

```
 public static void Configure(HttpConfiguration conf)
    {
        conf.Formatters.FormUrlEncodedFormatter.ReadBufferSize = int.MaxValue/10;
    } 
```

# c# - nServiceBus QA 测试工具

> ID：10229240
> 
> 赞同：2
> 
> 时间：2012-04-19T13:34:51.310
> 
> 标签：c#, .net, nservicebus

有没有人知道一个工具或有一个好的 QA 解决方案来单独测试单个 nServiceBus 端点？我们的系统中有多个发布者和订阅者，我们希望单独测试它们。例如，为了测试我们的发布者，我们希望能够拥有一个工具，我们的 QA 可以使用该工具轻松订阅/取消订阅不同的发布者，以便他们可以将消息传递到他们的“QA 队列”以验证消息。为了测试订阅者，我们希望他们能够将消息直接发布到订阅者输入队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:35:06.450

[有一个名为BizUnit](http://bizunit.codeplex.com/)的集成测试框架，它允许您以声明方式定义集成测试。它带有一些用于排队/侦听 MSMQ 的预定义步骤。

由于 NServiceBus 需要消息头信息，您可能必须编写自己的自定义步骤来排队。

虽然这适用于 BizTalk 测试，但它与 BizTalk 的安装或可用没有任何依赖关系。

这是唯一浮现在脑海中的事情。它是测试任何分布式系统的绝佳框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:31:51.533

您可以将一个简单地正确配置为具有预定义端点名称的订阅者的程序集放在一起。唯一的配置是传递端点（消息映射）来修改配置文件。我想您可以将其包装在一个脚本中，然后让 QA 使用命令行参数运行该脚本。PowerShell 浮现在脑海，因为它很容易操作 XML。这可能看起来像“Subscribe-To-EndPoint Messages.dll endpoint_name”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:45:13.383

我们为 pub 条目连接了 wcf 端点。为 qa 创建了一个订阅者，将消息保存在 RavenDB 中。由于在 pub 中具有相同类型的多个处理程序不起作用，因此 wcf 端点消息是新类，主消息作为基类。然后 QA 可以使用 soapui 或其他测试客户端。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T12:51:05.177

为您的端点（ForwardReceivedMessagesTo）打开审计并编写一些代码来验证预期的消息是否最终出现在审计队列中。

# java - 如何为此添加布局

> ID：10229251
> 
> 赞同：0
> 
> 时间：2012-04-19T13:35:29.733
> 
> 标签：java, android, eclipse

我的游戏中有一个课程是从教程中复制的：

```
public class PanelThing extends SurfaceView implements SurfaceHolder.Callback
{
} 
```

我从来没有完全理解这个类是如何工作的，但它似乎完成了这项工作，而且我的游戏已经运行了一段时间。这个 PanelThing 似乎有点像某种布局。在我的游戏的 onCreate 方法中，我有：

```
pt = new PanelThing(this);
game_play_layout = new LinearLayout(this);
game_play_layout.addView(pt);
setContentView(game_play_layout); 
```

现在我需要在 pt 中有一个子布局。我试过这样做`pt.addView(my_child_layout)`，但在 pt.addView 中未定义。是否可以修改 PanelThing，可能使用“扩展”或“实现”以便定义 addView？还是有其他方法可以向 pt 添加布局？

**编辑：**如果您想确切知道为什么我想要 pt 的子布局，请参阅[此问题](https://stackoverflow.com/questions/10224566/one-layout-over-another-at-run-time)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:46:13.683

那么你不能在 SurfaceView 中有子元素。一种可能的解决方案是做类似的事情。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <PanelThing 
       android:layout_width="match_parent"
       android:layout_height="match_parent" />

    <LinearLayout android:visibility="GONE">
    </LinearLayout>
</RelativeLayout> 
```

您可以将横幅添加到可以放置在您喜欢的任何位置的 LinearLayout 中。希望这个解决方案有所帮助。您可以查看[此线程](https://stackoverflow.com/questions/4680803/adding-text-view-to-surface-view)以获得一些帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:58:50.820

a`SurfaceView`不是像这样的布局容器，`LinearLayout`因此您无法向其中添加视图。它更像是您一直在代码中绘制的交互式图像。

您必须将要显示的附加信息添加到您的绘图代码中，`SurfaceView`或者您可以`SurfaceView`使用`FrameLayout`. 确保顶部的布局在您不想阻止下面内容的区域中是透明的。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <PanelThing 
       android:layout_width="match_parent"
       android:layout_height="match_parent" />

    < -- Layout on top here. --
       android:layout_width="match_parent"
       android:layout_height="match_parent" />

</FrameLayout> 
```

# java - Java 项目在 Eclipse 中查找 C++ 项目

> ID：10229252
> 
> 赞同：1
> 
> 时间：2012-04-19T13:35:32.097
> 
> 标签：java, c++, eclipse, project, eclipse-cdt

是否可以在 Eclipse 中更改 C++ 项目的默认外观？我非常喜欢 Java-Projects 数据包（硬盘上的文件夹）的显示方式（com.sth ...）

如何将其应用于我的 C++ 项目？我希望以与用于 JAVA 项目的结构相似的结构显示不同的子文件夹。

是否有使用 CDT 的 Eclipse 插件的编程解决方案，或者我监督的项目资源管理器中是否有设置？

# .net - 怎么做（简单？）linq查询

> ID：10229254
> 
> 赞同：1
> 
> 时间：2012-04-19T13:35:39.273
> 
> 标签：.net, sql, vb.net, linq

我要简化数据库。
这是它的样子：

表：

```
Main: Products: ID, Ref, Price, 
Translation: ID, Product_ID, Language_ID, Name
Images: ID, Product_ID, Path, Index 
```

我是 linq 的新手，我尝试检索所有产品，它们的名称为 language_ID = 1 和索引 = 1 的图像

```
From p In db.Products 
Join t In db.Translate_Products On p.ID_Product Equals t.Product_ID 
Join i In db.Images On p.ID_Product Equals i.Product_ID 
Where t.Language_ID = 1 And i.Index= 0 
Select p, t, i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:01:05.700

```
From p In db.Products 
Join t In db.Translate_Products On p.ID_Product equals t.Product_ID into results1
from r1 in results.DefaultIfEmpty()
Join i In db.Images On p.ID_Product equals i.Product_ID 
into results2
from r2 in results2.DefaultIfEmpty()
Where results.Language_ID = 1 And i.Index= 0 
Select new
{

Productid = p.Productid,
..
..
..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:41:51.203

```
From p In db.Products 
Join t In db.Translate_Products On p.ID_Product equals t.Product_ID 
into results1
from r1 in results1.DefaultIfEmpty()
Join i In db.Images On p.ID_Product equals i.Product_ID     
Where t.Language_ID == 1 And i.Index== 0 
Select new
{

Productid = p.Productid,
..
..
..
} 
```

# android - LinearLayout 背景和图片来自网络

> ID：10229255
> 
> 赞同：0
> 
> 时间：2012-04-19T13:35:39.723
> 
> 标签：android

我必须从互联网上提取图像并将它们应用为 LinearLayout 的背景 - 有可能吗？我还没有看到任何合适的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:41:13.507

只需使用`BitmapFactory`, 加载您的图像（如果需要，调整其大小），使用`BitmapDrawable`并应用它`LinearLayout.setBackgroundDrawable()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:46:35.883

将图像视图设置为线性布局的背景，即：

```
<LinearLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView android:id="@+id/myimageview"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"/>
</LinearLayout> 
```

然后，在您的 Java 中：

```
ImageView mImageView = (ImageView)findViewById(R.id.myimageview);

Bitmap bmImg;

URL myFileUrl = put in your url here;          
try {
       myFileUrl= new URL(fileUrl);
} catch (MalformedURLException e) {
     // TODO Auto-generated catch block
       e.printStackTrace();
}
try {
       HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
       conn.setDoInput(true);
       conn.connect();
       InputStream is = conn.getInputStream();

       bmImg = BitmapFactory.decodeStream(is);
       mImageView.setImageBitmap(bmImg);
} catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
} 
```

希望这可以帮助。另外，请参阅此[参考资料](http://en.androidwiki.com/wiki/Loading_images_from_a_remote_server)（我在其中获得了图像下载代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:48:52.530

当然。

只需获取图像的 InputStream：

```
InputStream is = (InputStream) new URL(url).getContent(); 
```

从流中获取 Drawable：

```
Drawable d = Drawable.createFromStream(is, "src name"); 
```

然后设置LinearLayout Background Drawable：

```
linearLayout.setBackgroundDrawable(d); 
```

这实际上直接从流中设置图像。您可能想使用 ASyncTask 在后台拉下可绘制对象并在之后进行设置：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

您可能还想研究惰性加载器： [http ://evancharlton.com/thoughts/lazy-loading-images-in-a-listview](http://evancharlton.com/thoughts/lazy-loading-images-in-a-listview)

# python - 如何从字符串中获取所需数据

> ID：10229256
> 
> 赞同：-5
> 
> 时间：2012-04-19T13:35:42.127
> 
> 标签：python

例如，我有字符串

```
s = '\r\n<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> \r\n\r\n<p>\r\n\t\r\n\t\t<A HREF="../temp/Table 32012419252223.xls">Click to download</A>\r\n\r\n\t\r\n\t</P>' 
```

我只需`/temp/Table 32012419252223.xls`要从上面的字符串中获取。

其次，我有一个链接，例如

```
link = "www.example.com/flow/hardway/joshing/high" 
```

现在我需要`"joshing/high"`用第一个（`/temp/Table 32012419252223.xls`）的结果替换上面的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:48:10.577

如果要解析 HTML 或 XML 文档，请使用适当的库。使用 lxml 和 xpath 的示例是：

```
from lxml.html.soupparser import fromstring
from urlparse import urljoin

s = 'yourhtml'
h = fromstring(s)
print urljoin(link, h.xpath('//a[1]/@href')[0])) 
```

获取页面上的第一个链接。如果 HTML 更复杂，您还可以使用更复杂的 XPath 表达式。

# java - 返回一个通用对

> ID：10229259
> 
> 赞同：0
> 
> 时间：2012-04-19T13:35:53.307
> 
> 标签：java, generics, instance

我正在尝试创建一个包含泛型方法的程序，该方法包含一个类型参数。它应该返回类 Pair 的一个实例。我不知道我怎样才能退回一对。我的代码如下：

```
public class MinMaxArray
{
  public static <ArrayType extends Comparable<ArrayType>>
                ArrayType getMinMax(ArrayType[] anArray)
            throws IllegalArgumentException
  {
    try
    {

  ArrayType resultMin = anArray[0];
      ArrayType resultMax = anArray[0];
      for (int index = 1; index < anArray.length; index++)
        if (result.compareTo(anArray[index]) < 0) 
          result = anArray[index];
        if (result.compareTo(anArray[index]) > 0)
          result = anArray[index];

  return resultMin;
  return resultMax;
}//try

    catch (ArrayIndexOutOfBoundsException e)
    { throw new IllegalArgumentException("Array must be non-empty", e); }
    catch (NullPointerException e)
    { throw new IllegalArgumentException("Array must exist", e); }
  }//getMinMax
}//class MinMaxArray 
```

对类代码：

```
//Two onjects grouped into a pair.
public class Pair<FirstType, SecondType>
{
  //The first object.
  private final FirstType first;

  //The second object.
  private final SecondType second;

  //Constructor is given the two objects.
  public Pair(FirstType requiredFirst, SecondType requiredSecond)
  {
    first = requiredFirst;
    second = requiredSecond;
  }//Pair

  //Return the first object.
  public FirstType getFirst()
  {
    return first;
  }//GetFirst

  //Return the second object.
  public SecondType getSecond()
  {
    return second;
  }//GetSecond

}//class Pair 
```

我不确定如何让 resultMax 和 resultMin 作为 Pair 返回。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:40:10.263

也许，

```
public static <ArrayType extends Comparable<ArrayType>>
            Pair<ArrayType, ArrayType> getMinMax(ArrayType[] anArray) {
    ...
    return new Pair<ArrayType, ArrayType>(resultMin, resultMax);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:40:28.473

尝试

```
return new Pair<ArrayType, ArrayType>(resultMin, resultMax); 
```

恕我直言，我会使用

```
return new ArrayType[] { resultMin, resultMax }; 
```

* * *

或者您可以将工厂方法添加到 Pair 类

```
public static <FirstType, SecondType> Pair<FirstType, SecondType> of(FirstType first, SecondType second) {
      return new Pair<FirstType, SecondType>(first, second);
} 
```

然后你可以写

```
return Pair.of(resultMin, resultMax); 
```

# c# - 在 WCF 中使用属性

> ID：10229260
> 
> 赞同：3
> 
> 时间：2012-04-19T13:35:57.973
> 
> 标签：c#, wcf

我有一个服务，我想使用我客户的属性：

```
[ServiceContract]
public interface IMyAPI
{
    string UserName { [OperationContract] get; [OperationContract] set; }
    string Password { [OperationContract] get; [OperationContract] set; }

    [OperationContract]
    bool StockQuery(string partNo);
}

public class MyAPI : IMyAPI
{
    public string UserName { get; set; }
    public string Password { get; set; }

    private void CheckSecurity()
    {
        if(this.UserName != "test" && this.Password != "123")
        {
            throw new UnauthorizedAccessException("Unauthorised");
        }
    }

    public bool StockQuery(string partNo)
    {
        this.CheckSecurity();
        if(partNo == "123456")
        {
            return true;
        }
        return false;
    }
} 
```

然后在我的客户上我这样做：

```
Testing.MyAPIClient client = new Testing.MyAPIClient();

client.set_UserName("test");
client.set_Password("123");
Console.WriteLine(client.StockQuery("123456"));
Console.ReadLine(); 
```

问题是，当我调试`UserName`并且`Password`没有被设置时，它们都是空的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T13:40:47.613

默认情况下，WCF 将创建一个新的服务实例来服务每个调用（[PerCall 实例化](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S1)），因此不会记住您的属性集。

`StockQuery`您需要通过服务调用 传递您的安全详细信息。

```
[OperationContract]
bool StockQuery(string partNo,String userName,String password);

public bool StockQuery(string partNo,String userName,String password)
{
    this.CheckSecurity(userName,password);
    if(partNo == "123456")
    {
        return true;
    }
    return false;
} 
```

[您可能会使用PerSession instancing](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S2)摆脱这种方法，其中将使用相同的实例为每个客户端提供服务。

```
[ServiceContract(SessionMode = SessionMode.Required)]
public interface IMyAPI
{
...
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)] 
public class MyAPI : IMyAPI
{
...
} 
```

但与其重新发明轮子，我会考虑使用一些[内置的 WCF security](http://msdn.microsoft.com/en-us/library/ms735093.aspx)。

# c++ - 使用 Visual Studio 2010 是否需要 bscmake？

> ID：10229261
> 
> 赞同：16
> 
> 时间：2012-04-19T13:35:57.977
> 
> 标签：c++, visual-studio-2010

我想知道使用未管理/托管代码**的 Visual Studio 2010 C++ 项目是否仍然需要bscmake。**

我对 bscmake 的理解是，它为每个 cpp 文件生成浏览文件，以便能够在 Visual Studio 中使用诸如“类视图”或“转到定义”之类的东西，...

但是在我自己问了一个关于 bscmake 的问题并阅读了其他类似的问题之后，我不确定 bscmake 的用途以及为什么要使用它。参考：

*   [如何摆脱“BSCMAKE error BK1500: Internal error”编译错误](https://stackoverflow.com/questions/10228627/how-to-get-rid-off-bscmake-error-bk1500-internal-error-compile-errors)
*   [LINK : 致命错误 LNK1000: BuildLibrary 期间的内部错误](http://connect.microsoft.com/VisualStudio/feedback/details/642900/linker-access-violation-link-fatal-error-lnk1000-internal-error-during-buildlibrary)

![关闭 bscmake](../Images/23d9106619cfa7ee2969452f49244746.png)

所以我的问题是：

*   **是否需要激活 bscmake？**
*   **激活 bscmake 的优点/缺点？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T07:58:29.787

VS2010 似乎不再支持 bscmake，请参阅此错误报告： [Per-project Browsing in VS2010](https://connect.microsoft.com/VisualStudio/feedback/details/646058/per-project-browsing-in-vs2010) and [BSC files cannot be used](http://connect.microsoft.com/VisualStudio/feedback/details/514470/bsc-files-cannot-be-used)。因此，您可以通过关闭 SBR/BSC 文件的创建来加快编译时间，因为它们无论如何都没用。

BSC 文件有一个很大的优势，即它们可用于浏览不属于您的解决方案的外部库（例如 MFC）。智能感知似乎无法做到这一点。我个人使用 VisualAssist 作为替代品（对我来说效果很好）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T15:01:17.497

智能感知不需要浏览信息，它用于我从未使用或需要的对象浏览器：http: [//msdn.microsoft.com/en-us/library/kbs280h1%28v=vs.80%29。 aspx](http://msdn.microsoft.com/en-us/library/kbs280h1%28v=vs.80%29.aspx)

主要缺点是构建时间较长，由于无法构建 bsc 文件而导致构建错误。

[主要优点是您可以查看您的类和对象的更多信息，并且显然自 VS2005 http://msdn.microsoft.com/en-us/magazine/cc163658.aspx](http://msdn.microsoft.com/en-us/magazine/cc163658.aspx)以来，它们添加了一些称为“实时浏览”的功能。

但是我不得不说智能感知对我来说工作得很好，而且我使用 VisualAssist，我从来不需要对象浏览器，发现额外的编译时间和构建错误对于大型解决方案来说是如此令人沮丧，以至于我从来没有打开过这个开关。

# json - Spring配置——mvc:annotation-driven、AnnotationMethodHandlerAdapter、JSON

> ID：10229266
> 
> 赞同：2
> 
> 时间：2012-04-19T13:36:07.440
> 
> 标签：json, spring-mvc, annotations

提前感谢任何帮助。

我试图让我的控制器方法之一返回 JSON。从一个简单的测试开始：

```
@RequestMapping(value="/myReqPath", method=RequestMethod.GET)
@ResponseBody
public Map<String, String> myJsonMethod() {

    Map<String, String> response = new TreeMap<String, String>();
    response.put("test", "test");

    return response;

} 
```

据我了解，我需要`<mvc:annotation-driven/>`将其添加到我的 servlet 上下文中才能完成此操作。问题是当我添加它时，它会破坏我的自定义 AnnotationMethodHandlerAdapter。

[B]如何提取和添加`<mvc:annotation-driven/>`从控制器返回 JSON 所需的部分？[/B]

以下是我的 servlet 配置的相关部分：

```
<!--Skipping this for now...
<mvc:annotation-driven/>
-->

<!-- JSON Marshaling -->
<util:constant id="jsonBasicClassIntrospector"
    static-field="org.codehaus.jackson.map.introspect.BasicClassIntrospector.instance" />
<bean id="jsonJaxbAnnotationIntrospector" 
    class="org.codehaus.jackson.xc.JaxbAnnotationIntrospector" />
<bean id="jsonVisibilityChecker" 
    class="org.codehaus.jackson.map.introspect.VisibilityChecker.Std"
    factory-method="defaultInstance" />
<bean id="jsonDefaultTypeFactory" 
    class="org.codehaus.jackson.map.type.TypeFactory"
    factory-method="defaultInstance" />
<bean id="jsonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper">
    <property name="serializationConfig">
        <bean class="org.codehaus.jackson.map.SerializationConfig">
            <constructor-arg ref="jsonBasicClassIntrospector" />
            <constructor-arg ref="jsonJaxbAnnotationIntrospector" />
            <constructor-arg ref="jsonVisibilityChecker" />
            <constructor-arg><null/></constructor-arg>
            <constructor-arg><null/></constructor-arg>
            <constructor-arg ref="jsonDefaultTypeFactory" />
            <constructor-arg><null/></constructor-arg>
        </bean>
    </property>
    <property name="deserializationConfig">
        <bean class="org.codehaus.jackson.map.DeserializationConfig">
            <constructor-arg ref="jsonBasicClassIntrospector" />
            <constructor-arg ref="jsonJaxbAnnotationIntrospector" />
            <constructor-arg ref="jsonVisibilityChecker" />
            <constructor-arg><null/></constructor-arg>
            <constructor-arg><null/></constructor-arg>
            <constructor-arg ref="jsonDefaultTypeFactory" />
            <constructor-arg><null/></constructor-arg>
        </bean>
    </property>
</bean>

...

<!-- My custom  AnnotationMethodHandlerAdapter... -->
<bean id="sessionArgResolver" class="com.SessionParamArgumentResolver"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="customArgumentResolver" ref="sessionArgResolver"/>
</bean> 
```

就目前而言，我的控制器方法被调用，但是浏览器返回 http 状态 406: 406 Not Acceptable - [url]http://localhost:8080/myApp/myReqPath[/url]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:48:44.580

如果您已经有自定义`AnnotationMethodHandlerAdapter`声明，则只需向其中添加`HttpMessageConverter`s 列表：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="customArgumentResolver" ref="sessionArgResolver"/>
    <property name = "messageConverters">
        <list>
            <bean 
                class = "org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name = "objectMapper" ref = "jsonObjectMapper" />
            </bean>
        </list>
    </property>
</bean> 
```

# android - 如何在 ListView 的一行中识别不同的图像？

> ID：10229270
> 
> 赞同：-4
> 
> 时间：2012-04-19T13:36:19.830
> 
> 标签：android

我需要实现一个显示许多图像（超过 1000 个）的 UI。图像的布局如下：

```
(image1)  (image2)  (image3)
  ( image4 )    ( image5 )
  ( image6 )    ( image7 )
     ...
  ( imageN )    ( imageN+1) 
```

我想在 ListView 中显示这些图像，我知道该怎么做。但是，我不知道在显示它们后如何识别单击了哪个图像。单击 ListView 中的小图像后，我需要显示一个大图像。任何答案将不胜感激。

编辑 1：如果 ListView 很难做到这一点，是否可以使用 GridView 来实现这种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:02:52.117

您可以创建一个`ArrayList`of `ImageView`，并在其中添加所有`imageView`对象。然后只需`setOnTouchListener`使用循环调用数组列表的所有元素。在该`OnTouch(View v, MotioNEvent event)`方法中，视图 v 是您的`imageView`.

例如：

```
for(int i=0;i<imageArray.size();i++){
    imageArray.get(i).setOnTouchListener(new OnTouchListener(){
        protected boolean onTouch(View v, MotionEvent event){
            //v is your image on which the touch event happened.
        }
    });
} 
```

# facebook - 相同的代码不适用于与 80 不同的端口

> ID：10229273
> 
> 赞同：0
> 
> 时间：2012-04-19T13:36:23.360
> 
> 标签：facebook, facebook-like

我在同一台机器上有两个环境都使用 apache。一种用于测试，另一种用于演示。顺便说一句，问题是相同的代码（在[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)之后创建）仅适用于在端口 80 上运行的环境。我如何部署 facebook-like非非标准端口上的按钮？两个月前，它适用于两种环境。也许 facebook api 改变了什么？

任何帮助表示赞赏

提前致谢。安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:35:16.960

当您使用包含端口号的完整 URL 指定 og:url 和其他标签时，它是否有效？

# ruby-on-rails - gmaps4rails 在 iside 选项卡时仅显示地图的一半。知道为什么吗？

> ID：10229274
> 
> 赞同：5
> 
> 时间：2012-04-19T13:36:25.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

我一直在环顾四周，但我没有发现这样的问题。

Gmaps4rails 非常适合我！

问题在于插入 JQuery 选项卡时。它加载了一半的地图。它实际上看起来像缺少图片。我可以像往常一样移动/调整大小。但只显示地图的一部分。缺少的部分通常是左/下部分。但是空白部分的大小一直在变化。

同时，在地图上悬停时显示鼠标光标的手在悬停该空白部分时变为箭头（但该部分仍在Google容器内）。

如果我将 gmaps 容器放在 JQuery 选项卡之外，它会完美运行。有没有人见过这个？

看法

```
 #tabs-4
     #gmap
       =gmaps("map_options" => { "detect_location" => true, "auto_zoom" => false, "center_on_user" => true, "zoom" => 17},"markers" => { "data" => @json }) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T13:43:50.977

请参阅此链接[http://jqueryui.com/demos/tabs/#...my_slider.2C_Google_Map.2C_sIFR_etc._not_work_when_placed_in_a_hidden_​​.28inactive.29_tab.3F](http://jqueryui.com/demos/tabs/#...my_slider.2C_Google_Map.2C_sIFR_etc._not_work_when_placed_in_a_hidden_.28inactive.29_tab.3F)

但是在 V3 中 resize 的调用方式不同

试着打电话`google.maps.event.trigger(map, 'resize')`

**编辑**

我发现的每个方法都指的是 JavaScript 的变化。我找到的另一种方式[http://snipplr.com/view/57003/](http://snipplr.com/view/57003/)

```
$('#tabs').tabs({
    show: function (event, ui) {
        google.maps.event.trigger(map, 'resize');
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T23:27:28.427

尽管这个问题已有一年之久，但它准确地描述了我的经历，但接受的答案对我不起作用。这是最终奏效的...

```
$('#tabs').tabs({
  activate: function (event, ui) {
    var center = Gmaps.map.map.getCenter();
    google.maps.event.trigger(map, 'resize');
    Gmaps.map.map.setCenter(center);
  }
}); 
```

也许我使用较新的版本。我需要使用 activate: 而不是 show: 并且地图一旦扩展以填充容器就会偏离中心，因此需要居中代码。希望这可以节省一些时间！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:42:05.837

这是一个常见的问题。您需要确保 API 知道地图大小（目前它认为它的大小为零）。

当地图可见时触发调整大小事件。从文档：

> 当 div 改变大小时，开发者应该在地图上触发这个事件：`google.maps.event.trigger(map, 'resize')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T07:36:51.847

好的，只是对上面发布的内容稍作修改。如果您使用选定的答案，您可能会遇到地图未正确聚焦的错误。@SteveO7 所说的效果很好。我还必须为引导程序对其进行一些调整。这是在 CoffeeScript 中：

```
$('a[data-toggle="tab"]').on 'shown', (e) ->
  if $(e.target).attr('href') == '#tab2'
    center = Gmaps.map.map.getCenter()
    google.maps.event.trigger map, "resize"
    Gmaps.map.map.setCenter(center) 
```

# android - BitmapFactory：从zip中提取的内部图像文件的“解码返回错误”？

> ID：10229275
> 
> 赞同：2
> 
> 时间：2012-04-19T13:36:28.053
> 
> 标签：android, image, decode, bitmapfactory

需要显示从 zip 下载并提取到应用程序的“/files”目录中的图像。据我所知，图像正在正确地进入那里 - 我能够从模拟器中提取它们并从我的桌面查看/打开它们。但是到目前为止，我发现并尝试过的每一次尝试、每一种代码变体都失败了（标签：skia / 文本：---解码器->解码返回错误）。

我最新的构造，它适用于单独下载和未压缩的图像文件：

```
String imgFile = new File(getFilesDir(), "myImage.jpg").getAbsolutePath();

        ImageView myImageView = new ImageView(this); 
        Bitmap bm = null;
        try{

            bm = BitmapFactory.decodeFile(imgFile);
            myImageView.setImageBitmap(bm);

        } finally{

            mainLayout.addView(myImageView);
        } 
```

这是我用来处理 zip 提取的构造。我认为这就是问题所在，但我不知道我可以做些什么不同的事情以及产生什么效果：

```
ZipInputStream zis = new ZipInputStream(fis);
BufferedInputStream in = new BufferedInputStream(zis, 8192);
ZipEntry ze;

while ((ze = zis.getNextEntry()) != null){
    File dest_file = new File(getFilesDir(), ze.getName());
    FileOutputStream fout = new FileOutputStream(getFilesDir() + "/" + ze.getName());
    BufferedOutputStream out = new BufferedOutputStream(fout, 8192);
    byte b[] = new byte[1024];
    int n;

    while ((n = in.read(b,0,1024)) >= 0) {
        out.write(b,0,n);
    }

    for (int c = zis.read(); c != -1; c = zis.read()) { 
        fout.write(c); 
    }

    zis.closeEntry();
    fout.close();
}
zis.close();
fis.close(); 
```

在这里陷入了可怕的停顿。感谢任何解决方案/建议。

# c# - 在 XML 中仅检索一个 Int

> ID：10229284
> 
> 赞同：0
> 
> 时间：2012-04-19T13:37:02.373
> 
> 标签：c#, xml, windows-phone-7

我想知道如何使用 linq 检索看起来完全像这样的 XML？

```
 <int xmlns="http://schemas.microsoft.com/2003/10/Serialization/">20</int> 
```

我应该使用linq吗？我不知道如何找回这个号码。

这是我尝试使用的代码，选择后我被卡住了。有人能帮我吗？

```
public void wc_DownloadTopFolder(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            try
            {
                // Retrieving the Top Folders
                XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);
                int i = from query in xdoc.Descendants("int")
                        select new int
                            {

                            };
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:41:05.627

你可以使用这个：

```
var number = int.Parse(xdoc.Root.Value); 
```

如果你不确定返回的值是一个数字，你应该使用这个：

```
int number;
if(int.TryParse(xdoc.Root.Value, out number))
{
    // you got a number
} 
```

# php - 更新名称中包含点 (.) 的 MySQL 列

> ID：10229287
> 
> 赞同：11
> 
> 时间：2012-04-19T13:37:03.727
> 
> 标签：php, mysql

我的列的名称具有结构`nameUser.Name`，但我无法更新它们。我尝试了几种可能性：

```
// Ideally, I'd like to do this (since the User.Name is 'dynamic', ie, it depends
// on who is logged in):
$userLogged = 'Some.User';
$columnName = 'name' . $userLogged;
mysql_query("UPDATE Industries SET '$columnName'='$name' WHERE id='$id'");
// Another try:
mysql_query("UPDATE Industries SET $columnName='$name' WHERE id='$id'");
// Alternatively, if the above cannot be achieved:
mysql_query("UPDATE Industries SET 'nameSome.User'='$name' WHERE id='$id'");
// Yet another try:
mysql_query("UPDATE Industries SET nameSome.User='$name' WHERE id='$id'"); 
```

但是，上述方法均无效。为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T13:39:14.897

因为这也是`database.table.column`. 你必须像这样引用它们

```
`nameUser.name` 
```

虽然真的，如果你创建/设计了数据库，你不应该使用这样的列名。这只是一个可怕的想法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T13:37:52.337

不要对列名使用单引号，而是使用反引号（在大多数键盘上，在 1 键的左侧）。

像这样：

```
mysql_query("UPDATE Industries SET `nameSome.User`='$name' WHERE id='$id'"); 
```

# java - 当用户完成 JFrame 大小调整时收到通知

> ID：10229292
> 
> 赞同：1
> 
> 时间：2012-04-19T13:37:18.767
> 
> 标签：java, swing, timer, jframe, listener

我在 JFrame 中有一个分形生成组件（JPanel 的子类）。当用户调整窗口大小时，将分形更新为新大小需要相当长的时间。

我目前在 JPanel 上有一个 ComponentListener，但是每次用户在拖动窗口边框时移动鼠标时都会调用它的 componentResized 事件。这意味着分形被告知多次调整大小，并缓慢（在几分钟内）增长到新的大小。

有没有办法在用户*释放*鼠标按钮时得到通知，以便我只能在用户完成调整大小时更改分形大小？

其他人[报告说](https://stackoverflow.com/questions/3919214/java-jframe-resizing)，当侦听器连接到 JFrame 时会发生这种情况，但是由于某种原因，这对我（和[其他人](https://stackoverflow.com/questions/2340987/java-swing-do-something-when-a-component-has-finished-resizing)）不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:22:06.950

而不是每次收到接收事件时开始计算，您只能在收到最后一个事件后使用计时器开始计算，例如在伪代码中（或者至少是我在此处直接键入而不是在我的IDE)

```
private Timer recalculateTimer = new Timer( 20, myRecalculateActionListener );

constructor(){
  recalculateTimer.setRepeats( false );
}
@Override
public void componentResized(ComponentEvent e){
  if ( recalculateTimer.isRunning() ){
    recalculateTimer.restart();
  } else {
    recalculateTimer.start();
  }
} 
```

您仍然可以将此与 Andrews 的建议结合使用，以使用您拉伸的图像，直到计算实际完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:10:47.290

*   您已经查看了[HierarchyListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/HierarchyListener.html)，您可以在其中使用[HierarchyBoundsListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/HierarchyEvent.html)的接口监听[HierarchyEvent](http://docs.oracle.com/javase/6/docs/api/java/awt/event/HierarchyBoundsListener.html)

*   基本上没有错`ComponentListener`，但是您必须将预期的事件包装到`Swing Timer`，在事件重复的情况下，只能调用`Timer#restart()`，输出`Swing Timer`应该是`Swing Action`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T01:00:18.720

有点晚了，但似乎没有人找到正确的答案。我发现当您在窗口`child.updateUI()`的 ComponentListener (`componentResized`块) 内调用时，这个孩子会自行调整其大小并更新其内容。使用计时器是不安全的。

# javascript - Javascript 便签

> ID：10229294
> 
> 赞同：2
> 
> 时间：2012-04-19T13:37:25.883
> 
> 标签：javascript, jquery

为了好玩，我用 javascript 做了一些便签。

当屏幕上有多个便笺时，我希望将选中的那个放在前面。IE。将 z-index 提高到高于其他便笺。目前我正在使用 :hover 使用 CSS 执行此操作，这有点烦人。我想用 javascript/jquery 来做。我试图用 focus() 和 blur() 来做 addClass/removeClass

这是我到目前为止所拥有的

```
$('.darkYellow').click(function() {
    $(this).focus(function() {
        $(this).addClass("index");
    });
});

$('.darkYellow').blur(function() {
    $(this).removeClass("index");
}); 
```

**感谢 Christoph [http://jsfiddle.net/EnigmaMaster/aQMhk/6/](http://jsfiddle.net/EnigmaMaster/aQMhk/6/)**更新和工作****

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T13:39:39.630

类选择器以`.`字符开头，类名不是（嗯，它们可以，但那样是疯狂的）。

```
$(this).addClass("index") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:40:25.710

对于 addClass 不需要包含 '.'

简单地

```
$(this).addClass("index"); 
```

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:51:19.177

您在`$('.darkYellow').click()`便笺实际存在之前打电话。`.click()`将在调用时向每个匹配选择器的元素添加一个事件。你想要的是[`.live()`](http://api.jquery.com/live/)可以处理所有元素，现在和未来的东西，例如

```
$('.darkYellow').live('click', function() {
    $(this).focus(function() {
        $(this).addClass("index");
    });
}); 
```

**更新**

尝试：

```
$('.darkYellow').live('click', function() {
  $(this).addClass("index");
});

$('.darkYellow').live('blur', function() {
  $(this).removeClass("index");
}); 
```

正如其他人指出的那样，对 .focus() 的调用应该是不必要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T14:15:12.530

虽然目前我不知道为什么`.on()`不起作用（这应该是首选方法！），但以下代码应该可以工作：

```
$('.darkYellow').live("click", function() {
        $(".index").removeClass("index");
        $(this).addClass("index");
}); 
```

这就是你所需要的。

1.  单击时的实时事件处理程序（应首选使用 on() ）
2.  查找索引注释并删除类
3.  将类添加到当前的“单击”元素

**[演示](http://jsfiddle.net/dL3kK/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-05T08:55:37.867

这是`toggleFocus()`我最近编写的一个函数，它旨在`.is-focused`在焦点/模糊事件上添加一个 parentNode 类。

[CodePen 演示](https://codepen.io/danielhaim1/pen/PoNompY)

```
function toggleFocus(e) {
    setTimeout(() => {
         e.addEventListener('focus', ({path}) => {
              path[2].classList.add("is-focused");
         }, true);

         e.addEventListener('blur', ({path}) => {
              path[2].classList.remove("is-focused");
         }, true);
    }, 0);
}

const items = document.getElementById('items');
const itemsArray = items.querySelectorAll(".item");

[].forEach.call(itemsArray, (item) => {
    toggleFocus(item)
}); 
```**

# ios - 在 IOS 中使用动态数据创建表的建议

> ID：10229296
> 
> 赞同：3
> 
> 时间：2012-04-19T13:37:44.480
> 
> 标签：ios, objective-c, xcode, cocoa-touch, ios5

我正在尝试使用动态数据创建一个表，但我有点卡住了。这是我的数据的结构方式：

```
NSMutableArray *bigArray; 
```

`bigArray`有很多`NSDictionary`项目。

每个`items`只有一个条目。

`sectionName`是键，NSMutableArray 是值。

`value`NSMutableArray中有很多对象。

我试图尽可能简单地解释这一点，这是我被卡住的部分。

```
//easy
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [bigArray count];
}

//medium
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{    
    // Return the number of rows in the section.
    return [[[[bigArray objectAtIndex:section] allValues] objectAtIndex:0] count];
} 
```

根据我当前的数据结构，我无法弄清楚这部分如何实现此方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   UITableViewCell *cell = [tableView 
                             dequeueReusableCellWithIdentifier:@"MyCell"];

    MyObject *obj = //Need this part

    cell.textLabel.text = obj.name;   

    return cell;

} 
```

简而言之，我正在尝试使用动态数据插入动态部分。我正在寻求更有经验的开发人员的建议，你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:17:48.987

假设我很了解您的数据的结构，我会这样做：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
    }

    //this will get you the dictionary for the section being filled
    NSDictionary *item = [bigArray objectAtIndex:indexPath.section];
    // then the array of object for the section
    NSMutableArray *mutableArray = [item objectForKey:@"sectionName"];
    //you then take the object for the row
    MyObject *obj = [mutableArray objectAtIndex:indexPath.row];

    cell.textLabel.text = obj.name;   

    return cell;
} 
```

不要忘记在属性检查器中为单元原型设置重用标识符

# .net - 从 Windows 服务推送到 IIS

> ID：10229297
> 
> 赞同：1
> 
> 时间：2012-04-19T13:37:52.343
> 
> 标签：.net, windows, wcf, iis, push

我有一个带有红色大紧急按钮的设备。目标是尽快在安全操作员的屏幕上显示紧急消息。

在设备上按下按钮后，一条消息会立即发送到 Windows 服务器。在服务器上经过一些处理后，会在称为“事件工作流”的 Windows 服务中创建键入的紧急消息。

安全操作员的浏览器注册了来自 SignalIR 集线器的 HTTP 推送消息。集线器托管在 IIS 中。

我在这里寻找的缺失链接是如何将恐慌消息从 Windows 服务推送到 SignalIR 集线器。

这是该问题的基本架构概述：http: [//farm8.staticflickr.com/7221/7093312073_b4d33d9678_c.jpg](http://farm8.staticflickr.com/7221/7093312073_b4d33d9678_c.jpg)

谢谢你的帮助，西里

# java - 使会话无效

> ID：10229298
> 
> 赞同：2
> 
> 时间：2012-04-19T13:37:52.730
> 
> 标签：java, jakarta-ee, httpsession

当用户有一个关联的`HttpSession`对象然后想要“注销”应用程序时，您将使该应用程序无效，`HttpSession`这反过来又会将其从 ServletContext 保留的所有会话的映射中删除。但这只会在服务器端删除它，在客户端会发生什么？用户是否仍然保留带有会话 ID 的 cookie，该会话 ID 现在在服务器上不再具有相应的会话对象并继续将其发送到网络服务器？当用户退出后想再次登录时会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:57:54.703

我想 sessionId cookie 仍将保留，但由于此 sessionId 不会匹配服务器内存中的任何会话对象，因此下次用户尝试再次登录时服务器将丢弃它。在服务器端它将是非常透明的，request.getSession() 将自动返回一个新的会话对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:12:32.797

我想补充一下**maksimov**的答案。

尽管 cookie 仍然存在于客户端，但服务器也可以在客户端删除 cookie。Spring Security 在用户注销时执行此操作。这是代码：

```
Cookie cookie = new Cookie(cookieName, null);
String cookiePath = //cookie's path
cookie.setPath(cookiePath);
cookie.setMaxAge(0);
response.addCookie(cookie); 
```

重要的指示是`cookie.setMaxAge(0)`。将 max age 设置为 0 意味着必须删除 cookie。因此，服务器可以通过向客户端发送最大年龄为 0 的相同 cookie 来请求客户端删除 cookie。

# javascript - CKeditor 3.x 插件 - 创建一个将打开新链接的自定义按钮

> ID：10229305
> 
> 赞同：0
> 
> 时间：2012-04-19T13:38:12.327
> 
> 标签：javascript, plugins, ckeditor, html-editor

我正在尝试在 CKEditor 工具栏上创建一个自定义按钮（插件），单击该按钮将在新窗口中打开一个预设 URL - 任何人都可以提供一些帮助，这是我迄今为止在我的 plugin.js 中得到的文件。

我基本上只想说，一旦单击此按钮，就转到新窗口中的 URL。有任何想法吗？

```
CKEDITOR.plugins.add('inserthtml',   {    
requires: ['dialog'],
lang : ['en'], 
init:function(a) { 
var b="inserthtml";
var c=a.addCommand(b,new CKEDITOR.dialogCommand(b));
    c.modes={wysiwyg:1,source:0};
    c.canUndo=false;
a.ui.addButton("inserthtml",{
                label:a.lang.inserthtml.title,
                command:b,
                icon:this.path+"inserthtml.gif"
});
CKEDITOR.dialog.addIframe(b, b, 'http://pixlr.com/express', 800, 640 )} 
}); 
```

我在 Firebug 中遇到的错误

```
CKEDITOR.dialog.addIframe is not a function 
CKEDITOR.dialog.addIframe(b, b, 'http://pixlr.com/express', 800, 640 )} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:48:05.070

不要使用具有无意义变量名的压缩文件，请遵循本教程：[http](http://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin) ://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin并替换该行

```
editor.insertHtml( 'The current date and time is: <em>' + timestamp.toString() + '</em>' ); 
```

随着您的呼叫打开一个窗口：

```
window.open('http://pixlr.com/express'); 
```

# java - 在 Spring3 Web App 中访问 beanFactory 的更好方法

> ID：10229312
> 
> 赞同：1
> 
> 时间：2012-04-19T13:38:25.540
> 
> 标签：java, spring, spring-mvc

我正在尝试找到一种更好的方法来访问 Spring3 Web App 中的 beanFactory。现在我设置了一个 config.xml 文件，其中包含我的系统将要使用的所有服务，并在控制器中添加了一行代码，例如：

```
private static XmlBeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("config.xml")); 
```

在每个控制器中..有没有人知道更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:44:25.433

如果您使用的是 Spring MVC，大概您已经在 web.xml 中定义了一个 servlet 来处理请求，例如：

```
 <servlet>
    <description></description>
    <display-name>dispatcher</display-name>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.html</url-pattern>
  </servlet-mapping> 
```

在这种情况下，您的 web-inf 目录中应该有一个名为 dispatcher-servlet.xml 的 Spring 配置文件。将您的 bean 定义放在那里，它们将被定义并在 servlet 启动时可用。

编辑：

从 Spring 参考的第 3.2.2.1 节将一个 bean 配置文件导入另一个：

```
<beans>

    <import resource="services.xml"/>
    <import resource="resources/messageSource.xml"/>
    <import resource="/resources/themeSource.xml"/>

    <bean id="bean1" class="..."/>
    <bean id="bean2" class="..."/>

</beans> 
```

控制器中的自动装配 bean 示例：

```
@Controller
public class MyController {
  @Autowired
  private MyBeanClass myBeanName;
  ...
} 
```

# mysql - mysql：在避免客户端超时的同时删除重复项

> ID：10229313
> 
> 赞同：0
> 
> 时间：2012-04-19T13:38:26.403
> 
> 标签：mysql, perl

问题：数百个相同的（模式）表。其中一些有一些需要删除的重复数据。我通常的策略是：

```
walk list of tables - for each do
create temp table with unique key on all fields
insert ignore select * from old table
truncate original table
insert select * back into original table
drop or clean temp table 
```

对于较小的表，这很好用。不幸的是，我正在清理的表通常有数以亿计的记录，所以我的工作和客户端连接在我运行它时超时。（因为有数百个这样的表，我使用 Perl 来遍历列表并清理每个表。这是超时发生的地方）。

我正在研究的一些选项：

> mysqldump - 很快，但我不知道如何执行后续的“插入忽略”步骤
> 
> into outfile / load infile - 也很快，但我从远程主机运行，'into outfile' 在 mysql 服务器上创建所有文件。很难清理。
> 
> 在 100K 记录块中进行插入/选择 - 这可以避免数据库超时，但速度很慢。

我确信有更好的方法。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:53:43.027

如果查找重复项的 SQL 查询可以在不超时的情况下完成，我认为您应该能够使用带有 WHERE 子句的 Count() 运算符执行 SELECT，该子句将输出限制为仅具有重复数据的行（Count(DUPEDATA) > 1)。此 SELECT 的结果可以放入临时表中，然后可以将其与主表连接以进行 DELETE 查询。

这种方法利用了 SQL/MySQL 的集合操作优势——无需 Perl 编码。

# javascript - 何时在 Javascript 中使用 MVC？

> ID：10229317
> 
> 赞同：2
> 
> 时间：2012-04-19T13:38:54.340
> 
> 标签：javascript, jquery, model-view-controller

我正在开发一个基于引导程序的框架，该框架将在多个网站上使用。目前我只是为不同的事件编写了大量的 jQuery 函数，而且似乎根本无法扩展。我一直在阅读 MVC for js 并且不确定何时应该使用它或者我是否需要开始应用它。

关于何时需要的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:46:44.743

这个问题的答案很简单……当你的项目变得足够大时使用 MVC。当您编写一个小项目或简单功能时，许多模式最终可能会变得过大。但是总有一天，*不*使用 MVC 之类的东西来组织代码会导致无法维护的混乱。听起来您已经达到了这一点，因此考虑一下如何构建应用程序肯定是有意义的。

我实际上写了一篇关于如何轻松使用 javascript 中的模式而无需引入任何重量级外部依赖项的文章：http:
[//codecube.net/2009/06/mvc-pattern-with-javascript/](http://codecube.net/2009/06/mvc-pattern-with-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:52:29.037

MVC 代表“模型视图控制器”，它是一种编码范式。你可以很容易地使用 JS 将它应用到客户端上。模型只是普通的旧 JS 对象。视图可以使用模板来实现（jQuery 有模板，但其他的如 Mustache、Handlebar 或 Dust 可以说更好）。控制器由事件触发并处理数据流和处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:33:02.090

看看其他一些有助于创建这种结构的库。我个人最喜欢的是 Backbone.js，它非常轻巧但功能强大。

IMO 结构的最佳时间是从一开始就添加到代码结构中，而不是在事后使代码适合结构。

就我个人而言，我认为无论选择什么结构，结构都非常重要，尤其是在 JavaScript 中（因为它是如此该死的可变）对于可维护性、可伸缩性和只是简单的旧帮助其他人了解当他们必须在代码中进行错误修复时发生了什么，他们没有写！:)

# php - 将带有链接的html加载到div中？

> ID：10229318
> 
> 赞同：0
> 
> 时间：2012-04-19T13:39:00.607
> 
> 标签：php, jquery, html, iframe, hyperlink

这是场景：

我有 3 个文件：

**索引.php**：

```
<html><head>
<script type="text/javascript" src="../jquery.js"></script>
<script>
    $(document).ready(function(){
        $("#local").load("FarLinkLoader/farlink.php");
    });
</script>
</head><body>
<div id='local'></div>
</body></html> 
```

**/FarLinkLoader/farlink.php**：

```
<div>
<a href="farfar/farfarlink.php">farfarlink</a>
</div> 
```

**/FarLinkLoader/farfar/farfarlink.php**：

```
text or whatever 
```

问题是，当**`farlink.php`**加载到**`index.php`**链接中**`farlink.php`**时变得无效，链接的引用来自**`index.php`**而不是来自前一个文件。

有没有办法解决？**iframe**擅长于此，它实际上是浏览器中的“浏览器”，因为通过 iframe 加载的页面的相邻文件/目录是从那里引用的，而不是从前一页中的页面加载的，因为它发生在ajax 请求。

替换此所需功能的各种可能性是什么？

期待感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:36:22.383

我知道您说过“绝对 URL 不是解决方案”，但是如果您的所有文件都驻留在同一台服务器上，您可以使用非相对的 URL，并且对于指定的域不是绝对的，但对于服务器的根目录，因此无论它们包含在哪个页面中，都将始终引用同一个文件。只需使用前面的“/”字符和从根目录到每个文件的完整路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T13:52:54.307

我想你可以添加一个小 jQuery 来自动更新加载页面中的所有 URL（未经测试）：

```
$(document).ready(function(){
    $('#local').load('FarLinkLoader/farlink.php', function() {
        $('#local').find('a').each(function() {
            $(this).attr('href', function(i,val) {
                if (val.substr(0,1)!=='/' && val.substr(0,7)!=='http://') {
                    return 'FarLinkLoader/'+val;
                } else {
                    return val;
                };
            });
        });
    });
}); 
```

您还可以在文档标题中放置一个[`<base href="...">`](http://www.w3.org/TR/html401/struct/links.html#h-12.4)标签，但这会影响整个文档中的所有相关链接，并且可能是不可取的。

# php - 需要替换 url href 和标签

> ID：10229320
> 
> 赞同：0
> 
> 时间：2012-04-19T13:39:05.643
> 
> 标签：php, preg-replace

我需要用 seo 链接替换使用 preg_replace 的 href，比如

```
<a href="blabla" class="bla" style="bla">bla</a> 
```

和

```
<a href="blabla.html" class="bla" style="bla">bla</a> 
```

我需要获得 2 个变量，第一个到第二个

我做了这个正则表达式

```
preg_replace('#<a href="(.*?)" (.*?)>(.*?)</a>#',
             '<a href="$1.html">$3</a>'
               ); 
```

它的工作，但如果它们在 href="" 标记之后什么都没有，比如样式或类，则正则表达式不起作用，所以 A 必须有样式和类或其他东西才能工作

是他们忽略 href="" 之后的类或样式标记的任何方式还是使用此正则表达式的任何方式

```
preg_replace('#<a href="(.*?)"(>.*?)</a>#',
             '<a href="$1.html">$2</a>'
               ); 
```

或类似的东西使其仅在没有 3$ 的情况下以 1$ 和 2$ 的形式工作？我的意思是让第二个得到所有的东西`href"" to </a>`！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:42:02.140

为什么不直接使用它`mod_rewrite`呢？

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !\.html
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html 
```

尝试用正则表达式解析 HTML 可能会导致[他来的小马](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

# java - 如何在不使用 JAI、ImageJ、jhlab 库的情况下执行去斑操作？

> ID：10229323
> 
> 赞同：0
> 
> 时间：2012-04-19T13:39:16.917
> 
> 标签：java, image-processing, noise-reduction, imagej

我正在使用 Java Swing 在 Netbeans 中制作应用程序。我想在我的应用程序中实现一些图像处理功能（如在 ImageJ 中），而不使用 ImageJ、JAI 和 jhlab 库。

例如：ImageJ>>Process>>Noise>>Despeckle。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:53:37.440

这可能有帮助

```
private void removeNoise() {
    int iterator;

    for (int row = 0; row < x1; row++) {
        for (int column = 0; column < y1; column++) {
            if (row == 0 || row == x1 - 1 || column == 0
                    || column == y1 - 1) {
                result[row][column] = result[row][column];
                continue;
            } else {
                iterator = 0;
                for (int r = row - 1; r < row + 2; r++) {
                    for (int c = column - 1; c < column + 2; c++) {
                        surround[iterator] = result[r][c];
                        iterator++;
                    }
                }
                result[row][column] =
                        sortMedian(surround, 9);  //calls the sorting method

            }

        }
    }
    setPixel();
}

private int sortMedian(int[] surround1, int x) {
    int i, j, t = 0;
    for (i = 0; i < 9; i++) {
        for (j = 1; j < (9 - i); j++) {
            if (surround1[j - 1] > surround1[j]) {
                t = surround1[j - 1];
                surround1[j - 1] = surround1[j];
                surround1[j] = t;
            }
        }
    }
    return surround1[4];
}

private void setPixel() {
    int[] pixel = new int[1];

    for (int x = 0; x < bi.getWidth(); x++) {
        for (int y = 0; y < bi.getHeight(); y++) {

            pixel[0] = (int) result[x][y];

              rnImage.getRaster().setPixel(x, y, pixel);

            }
        }
    } 
```

# mysql - 将参数传递给 MySQL 脚本命令行

> ID：10229324
> 
> 赞同：32
> 
> 时间：2012-04-19T13:39:20.330
> 
> 标签：mysql, cmd

是否有任何选项可以将参数从命令行传递到 MySQL 脚本？

在此示例中类似于 @start_date ：

```
mysql –uuser_id -ppassword –h mysql-host -A -e 
"set @start_date=${start_date}; source ${sql_script};" >${data_file}; 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-22T05:49:37.633

在网上找到答案[here](http://databobjr.blogspot.com/2011/07/passing-parameters-to-mysql-query.html)。

基本上，假设我们要运行这个查询：

```
Select c_id, c_first_name,c_last_name, c_address,last_modified_date
from customer
where last_modified_date >=@start_date and last_modified_date <= @end_date; 
```

我们可以像这样传递“start_date”和“end_date”：

```
/usr/bin/mysql –uuser_id -ppassword –h mysql-host -A \
    -e "set @start_date=${start_date}; set @end_date=${end_date};\
        source ${sql_script};" > ${data_file} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-24T10:56:42.413

简短的回答：

重击：

```
 mysql -u"$mysql_user" -p"$mysql_user_pw" \
        -e "set @mysql_db='$mysql_db';source \
        00.create-mysql-starter-db.mysql ;" > "$tmp_log_file" 2>&1 
```

mysql:

```
 SET @query = CONCAT('CREATE DATABASE /*!32312 IF NOT EXISTS*/ `'
     , @mysql_db , '` /*!40100 DEFAULT CHARACTER SET utf8 */') ; 
     -- SELECT 'RUNNING THE FOLLOWING query : ' , @query ; 
      PREPARE stmt FROM @query;
      EXECUTE stmt;
      DEALLOCATE PREPARE stmt; 
```

长答案：作为可运行的 bash 和 mysql 应用程序的整个概念：

[https://github.com/YordanGeorgiev/mysql-starter](https://github.com/YordanGeorgiev/mysql-starter)

或者

```
 git clone git@github.com:YordanGeorgiev/mysql-starter.git 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T15:31:36.627

“-e”选项对使用的引号很敏感，请尝试使用双引号：

```
mysql –uuser_id -ppassword –h mysql-host -A -e 
"set @start_date=\"$start_date\"; source \"$sql_script\";" >\"$data_file\";" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-04-06T18:39:43.137

在某些情况下，您可以通过将脚本组合在一起以运行具有不同预定义参数的 SQL 代码来避免使用 bash 代码。

例如：

`do-something-production.sql`

```
USE mydb-prod;
SET @arg=5;
SOURCE do-something.sql; 
```

`do-something-test.sql`：

```
USE mydb-test;
SET @arg=10;
SOURCE do-something.sql; 
```

`do-something.sql`：

```
UPDATE table SET col = (SELECT @arg); 
```

# struts2 - 尝试在 struts2 中上传图像时，图像未上传 msg 无法找到“struts.multipart.saveDir”

> ID：10229328
> 
> 赞同：0
> 
> 时间：2012-04-19T13:39:35.137
> 
> 标签：struts2

尝试在 struts2 中上传图像时，图像未上传并显示以下 msg 无法找到“struts.multipart.saveDir”属性设置。默认为 javax.servlet.context.tempdir

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:42:53.063

由于 S2 的构建 din 功能，您收到此消息。您需要告诉 S2 文件上传拦截器您要将上传的文件放置在文件中的位置，或者使用文件中`struts.multipart.saveDir`的属性`struts.property`或作为文件中的常量，`struts.xml`例如

## Struts 属性文件

```
struts.multipart.saveDir=location of your choice 
```

## struts.xml 文件

```
<constant name="struts.multipart.saveDir" value="your location" /> 
```

如果未设置此属性，则默认为`javax.servlet.context.tempdir`.Sine S2 将上传文件放在临时目录中，以防您未指定 saveDir 但一旦过程完成，为了清理过程，它将删除该临时文件，因此请确保您已设置 saveDir 参数，或者您应该将逻辑放入您的操作类中以从那里选择文件并将其移动到您选择的位置。

有关 S2 文件上传的详细信息，请阅读官方文档

*   [处理文件上传](http://struts.apache.org/2.3.1/docs/handling-file-uploads.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:14:24.417

这是手动配置，一旦文件上传，您必须明确处理保存文件（出于安全原因服务器立即删除文件。）

```
import org.apache.commons.io.FileUtils;

String fullFileName = "d:/temp/"+uploadFileName;

File destFile = new File(fullFileName);

FileUtils.copyFile(upload, destFile); 
```

来源：[文件上传](https://cwiki.apache.org/WW/handling-file-uploads.html)

你可以在 struts.properties 文件中配置它

struts.multipart.saveDir - 上传文件的存放目录。如果未设置此属性，则默认为 javax.servlet.context.tempdir。

将上传的文件放在 /tmp 中。我的应用程序会将它们移动到最终目的地

```
 struts.multipart.saveDir=/tmp 
```

# javascript - 使用“Telerik RadPane”加载多个“内部”链接时出现问题

> ID：10229331
> 
> 赞同：0
> 
> 时间：2012-04-19T13:39:44.507
> 
> 标签：javascript, asp.net, browser, telerik, radpanelbar

我有一个应用程序，其中放置了一些“RadPane”控件并将“ContentUrl”设置为一些“内部”页面。这里的问题是它们一个接一个地加载，而不是同时加载。
我了解浏览器线程的数量是有限的。但由于我使用的是 IE9，线程数是 6，所以至少 6 个窗格应该同时加载，但事实并非如此。
当我使用外部链接而不是内部链接时，事情会按预期工作。
我在 Firefox 和 Chrome 中得到相同的行为。

如何让多个 RadPanes 同时加载带有内部链接的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:08:20.910

最后我得到了答案。
问题不在于“RadPanes”和内部链接，问题在于

**“如果会话正在使用中，一次发出多个请求”**

[点击链接了解更多详情](https://stackoverflow.com/questions/1735107/can-a-single-asp-net-user-make-more-than-one-request-at-a-time-if-the-session-is)

# android - M2e - 生命周期未涵盖插件执行

> ID：10229332
> 
> 赞同：11
> 
> 时间：2012-04-19T13:39:45.543
> 
> 标签：android, eclipse, maven, m2e

操作系统：ubuntu 11.10

Eclipse：面向 Web 开发人员的 Java EE IDE。版本：Indigo Service Release 2 Build id：20120216-1857 Java：jdk1.7.0_03 SDK adb：Android Debug Bridge 版本 1.0.29

尝试使用 m2e android (2.8.4) 在 eclipse 中构建 javaocr。它会导致在 pom.xml 中构建项目时出现错误：

```
Description Resource    Path    Location    Type
Plugin execution not covered by lifecycle configuration: com.jayway.maven.plugins.android.generation2:maven-android-plugin:2.8.4:generate-sources (execution: default-generate-sources, phase: generate-sources)    pom.xml /javaocr-sampler    line 20 Maven Project Build Lifecycle Mapping Problem
Plugin execution not covered by lifecycle configuration: com.jayway.maven.plugins.android.generation2:maven-android-plugin:2.8.4:unpack (execution: default-unpack, phase: process-classes) pom.xml /javaocr-sampler    line 20 Maven Project Build Lifecycle Mapping Problem
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-resources-plugin:2.5:resources (execution: default-resources, phase: process-resources) pom.xml /javaocr-sampler    line 11 Maven Project Build Lifecycle Mapping Problem
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-resources-plugin:2.5:testResources (execution: default-testResources, phase: process-test-resources)    pom.xml /javaocr-sampler    line 11 Maven Project Build Lifecycle Mapping Problem 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>net.sourceforge.javaocr.demos</groupId>
        <artifactId>javaocr-demos-parent</artifactId>
        <version>1.102-SNAPSHOT</version>
    </parent>
    <groupId>net.sourceforge.javaocr.demos</groupId>
    <artifactId>javaocr-sampler</artifactId>
    <packaging>apk</packaging>
    <name>Android sampler</name>
    <description>
        Demo appliocation to gather samples for further training
        of matchers
    </description>
    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>maven-android-plugin</artifactId>
                <version>2.8.4</version>
                <configuration>
                    <sdk>
                        <platform>7</platform>
                    </sdk>
                    <emulator>
                        <avd>16</avd>
                    </emulator>
                    <deleteConflictingFiles>true</deleteConflictingFiles>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>net.sourceforge.javaocr</groupId>
            <artifactId>javaocr-core</artifactId>
            <version>${pom.version}</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.javaocr.demos</groupId>
            <artifactId>javaocr-android-camera-utils</artifactId>
            <version>${pom.version}</version>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.1_r1</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project> 
```

我对 Maven 完全陌生，但已经四处寻找解决方案，但我一无所获。这是一个在 IDEA (AFAIK) 中开发的项目，它应该在那里完美运行，我只是无法让 IDEA 运行：'-/ It javaocr [svn link](http://svn%20co%20https://javaocr.svn.sourceforge.net/svnroot/javaocr%20javaocr)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T18:27:00.250

我有同样的问题。这就是我解决它的方法。在 pom.xml 文件中，更改

```
<artifactId>maven-android-plugin</artifactId>
<version>2.8.3</version> 
```

为了

```
<artifactId>android-maven-plugin</artifactId>
<version>3.4.1</version> 
```

这至少对我来说解决了:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:12:52.777

首先，您使用的是旧版本的 android-maven 插件。您应该升级到最新的 3.1.1：

[http://code.google.com/p/maven-android-plugin/](http://code.google.com/p/maven-android-plugin/)

其次，请参阅第 3 节正确安装 m2e 的 m2e-android 插件的说明：

[http://rgladwell.github.com/m2e-android/](http://rgladwell.github.com/m2e-android/)

您可以通过打开 POM 并单击“生命周期配置未涵盖的插件执行”错误来安装 m2e-android。这将为您提供发现新 m2e 连接器的选项。

选择此项，系统会自动提示您下载并安装 Android 连接器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-19T11:33:51.997

我将 MacOSX 与 Eclipse 4.3 (Krepler) 一起使用。我最初尝试的是使用 Brew 通过终端安装 Maven。它正确安装了 Maven 3.0.4。但是，当我尝试导入任何现成的 Maven 项目（文件 > 导入 > Maven）时，它会显示以下两个错误：

> 未找到处理执行 default-testResources 的市场条目

我所做的是转到 Help > Eclipse Marketplace 并在搜索栏中输入“Maven”并为 Eclipse 安装第一个默认 Maven 客户端。从这一点开始，一切都对我有用。

希望对你也有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T19:20:47.500

当您尝试使用 3.8.2 的 android-maven-plugin 时，这个问题再次出现在 Keppler 中，可能是因为您需要一个 AAR 库。该解决方案记录在这里[https://stackoverflow.com/a/7030657/176859](https://stackoverflow.com/a/7030657/176859)并引导您到这里：[http](http://wiki.eclipse.org/M2E_plugin_execution_not_covered#ignore_plugin_goal) ://wiki.eclipse.org/M2E_plugin_execution_not_covered#ignore_plugin_goal 。或者您可以在“问题”窗口中单击错误，上下文单击以获取快速修复，然后选择一个永久禁用此错误；quickfix 将为 pluginManagement 中的 consumer-aar 生成一个忽略元素，Eclipse 和 Maven 都会很高兴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T12:04:05.277

我有一个类似的问题。在 Window / Preferences / Maven / Installations 中使用嵌入式 Maven。

# python - Python：从不同的for循环一起打印变量

> ID：10229338
> 
> 赞同：0
> 
> 时间：2012-04-19T13:40:03.257
> 
> 标签：python

```
for synset in wn.synsets(wordstr):
    len_lemma_names = len (synset.lemma_names)
    #print len_lemma_names, synset.lemma_names
    count_lemma = count_lemma + len_lemma_names
for synset_scores in swn_senti_synset:
    count_synset = count_synset + 1
    #print count_synset, synset_scores 
```

我试图在 count_synset 前面打印 len_lemma_names 但它不起作用。有没有办法将它们打印在一起？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:49:03.077

我认为您想一起迭代这两者。如果是这种情况，您想使用[`zip`](http://docs.python.org/library/functions.html#zip)，或避免一次将其全部变成一个大列表，[`itertools.izip`](http://docs.python.org/library/itertools.html#itertools.izip)。

```
from itertools import izip

for synset, synset_scores in izip(wn.synsets(wordstr), swn_senti_synset):
    # Now you can deal with both at once in this loop.
    len_lemma_names = len(synset.lemma_names)
    count_lemma += len_lemma_names
    count_synset += 1
    # Mix to taste.
    print len_lemma_names, count_synset 
```

请注意，该`count_synset`部分可能会更好地完成[`enumerate`](http://docs.python.org/library/functions.html#enumerate)（我不知道它的初始值或者您是否想在此代码之外使用它）。

# c# - 根据 ViewModel 的属性更改 div 类

> ID：10229343
> 
> 赞同：9
> 
> 时间：2012-04-19T13:40:26.520
> 
> 标签：c#, asp.net-mvc-3, razor

我正在创建一个基于 Twitter 引导程序的页面。

在特定的 CUD 中，我需要更改一个 div 的类。`class="tab-pane active"`或`class="tab-pane"`取决于我的视图模型的属性。

该属性可能是一个 int，然后对于每个 div，我将在活动选项卡上进行验证。这听起来对吗？

我的想法是：

```
<div(@Model.ActiveTab == 1 ? class="tab-pane active" : class="tab-pane")  id="1"> 
```

但显然这不起作用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T13:42:55.753

试试这样：

```
<div class="tab-pane @(Model.ActiveTab == 1 ? " active" : "")" id="1">
    ...
</div> 
```

或者为了避免这种可怕的标签汤，编写一个自定义 HTML 助手：

```
public static class TabExtensions
{
    private class TabControl: IDisposable
    {
        private readonly ViewContext _viewContext;
        public TabControl(ViewContext viewContext)
        {
            _viewContext = viewContext;
        }

        public void Dispose()
        {
            _viewContext.Writer.Write("</div>");
        }
    }

    public static IDisposable Tab(this HtmlHelper htmlHelper, bool active, object htmlAttributes)
    {
        var div = new TagBuilder("div");
        div.MergeAttributes(new RouteValueDictionary(htmlAttributes));
        div.AddCssClass("tab-pane");
        if (active)
        {
            div.AddCssClass("active");
        }
        htmlHelper.ViewContext.Writer.Write(div.ToString(TagRenderMode.StartTag));
        return new TabControl(htmlHelper.ViewContext);
    }
} 
```

可以这样使用：

```
@using (Html.Tab(Model.ActiveTab == 1, new { id = "tab1" }))
{
    ...
} 
```

在这种情况下会发出：

```
<div class="tab-pane active" id="tab1">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:42:30.130

这应该有效：

```
<div class="@(Model.ActiveTab == 1 ? "tab-pane active" : "tab-pane")"  id="1"> 
```

# .net - 在 .NET 中，使用指针作为函数参数或使用“ref”关键字有什么区别吗？

> ID：10229345
> 
> 赞同：1
> 
> 时间：2012-04-19T13:40:30.457
> 
> 标签：.net, pointers, struct, unsafe, ref

我写了一个结构和函数，我尝试通过引用传递结构（即结构值可以在函数内部修改）。

```
enum RoomType { Economy, Buisness, Executive, Deluxe };

struct HotelRoom
{
    public int Number;
    public bool Taken;
    public RoomType Category;

    public void Print()
    {
        String status = Taken ? "Occupied" : "available";
        Console.WriteLine("Room {0} is of {1} class and is currently {2}", 
            Number, Category, status);
    }
} 
```

现在通过引用传递这个结构，我找到了两种方法。

```
//Using Pointer
private unsafe static void Reserve(HotelRoom* room)
{
    if (room->Taken)
        Console.WriteLine("Cannot reserve room {0}", room->Number);
    else
        room->Taken = true;
}      

//Using ref keyword.
private static void Reserve(ref HotelRoom room)
{
    if (room.Taken)
         Console.WriteLine("Cannot reserve room {0}", room.Number);
    else
         room.Taken = true;
} 
```

有什么区别吗？一般来说，什么时候应该使用指针，什么时候应该使用 ref 关键字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:42:43.053

简单的经验法则：

> 不要使用指针。

指针用于晦涩的互操作或迟钝的优化。
一般来说，您不应该使用不安全的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:45:16.623

指针被认为是不安全的。

如果您在不安全的上下文中编码，例如通过指向函数的指针传递引用，则有人可以将您的指针更改为其他地方的指针，并且您会得到垃圾数据。

如果你使用 ref 关键字，上下文是“安全的”，你不能改变**房间**指向的地方，只能改变像**number**，**take**和**category**这样的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:53:08.443

指针是 C# 语言的有用部分。使用指针并不困难，但应谨慎使用，因为它可能会导致难以诊断的错误。使用指针会干扰垃圾收集器的功能，尤其是当我们在程序中使用许多指针时。因此，在使用指针之前，我们应该考虑它，并可能尝试找到其他方法。有关详细信息，请参阅：
[http](http://www.c-sharpcorner.com/UploadFile/gregory_popek/WritingUnsafeCode11102005040251AM/WritingUnsafeCode.aspx)
://www.c-sharpcorner.com/UploadFile/gregory_popek/WritingUnsafeCode11102005040251AM/WritingUnsafeCode.aspx和
[使用 C# 中的指针](https://stackoverflow.com/questions/2913920/working-with-pointers-in-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T21:19:38.980

在 .net 中，当某些东西经过 时`ref`，被调用的函数会收到一个指针，除非在某些非常有限的情况下，否则禁止复制该指针；除非将指针提供给`unsafe`代码，否则在被调用函数执行期间生成的指针的任何副本都保证在被调用函数返回之前被销毁。如果所讨论的指针指向堆对象的一部分，则与调用站点关联的元数据将使垃圾收集器知道在哪里可以找到对该对象的引用，以便它知道不要打扰它。

由函数或非托管代码创建或传递给它们的指针`unsafe`是不同的。如果一个不安全的函数或非托管代码有一个指向某个东西的指针，它可能会以一种比函数调用更长寿的方式存储它，并且垃圾收集器不知道这种方式。存在可以明确告诉垃圾收集器不要干扰堆对象的方法，但使用此类技术充满危险。

用于`ref`通过引用传递参数，除非有非常强烈的理由使用指针。在两种技术都能正常工作的情况下，它往往与传递指针一样快。

# java - Java 与 python 中的用户输入

> ID：10229354
> 
> 赞同：0
> 
> 时间：2012-04-19T13:41:10.113
> 
> 标签：java, python

又是理解 Java 的问题。当我问上一个关于[Java 中的 Hello world 与 python 的](https://stackoverflow.com/questions/10215225/hello-world-in-java-understanding-the-concept-versus-in-python)问题时，我收到了将这门语言视为理所当然的建议，直到我没有掌握它。但是，我不能采用这种方法，并且对 Java 与 python 中的一些奇怪的事情感到困惑。

这是从用户那里获取输入并在 python 中将 F 转换为摄氏度的程序。

```
def main ():
 fahr = input (" Enter the temperature in F: ")
 cel = ( fahr - 32) * 5.0/9.0
 print " the temperature in C is : " , cel 
```

这非常简单，内部没有任何古怪的事情。

在 Java 中做同样事情的例子：

```
import java . util . Scanner ;

 public class TempConv {
 public static void main ( String [] args ) {
 Double fahr ;
 Double cel ;
 Scanner in ;

 in = new Scanner ( System . in );
 System . out . println (" Enter the temperature in F: " );
 fahr = in . nextDouble ();

 cel = ( fahr - 32) * 5.0/9.0;
 System . out . println (" The temperature in C is : " + cel );

 System . exit (0);
 }

 } 
```

我认为应该发生的是：Scanner 是 Java 类/类/对象的实例，用于获取用户输入并使用

```
Scanner in 
```

创建了一个新对象来接受用户输入。事实证明，我们只是在 Java 中声明为 Scanner 类型（如果我错了，请纠正我）。

现在，如果它是 python，我们将调用新创建的 Scanner 对象的方法，该对象从用户那里获取输入。OMG，Java 中这是什么？我们创造

> 新扫描仪

对象并`System.in`作为参数传递并将其分配给

> 在

再次？

有人可以用pythonic术语向我解释一下，这里发生了什么以及它如何以及为什么与python有很大不同？

任何创造性的建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:47:16.297

你的问题有点乱码，但这是我试图回答的问题。在 Java 中，就像在 Python 中一样，您需要先实例化一个类，然后才能对其调用方法。在 Python 中，您可以这样做：

```
myvar = MyClass(name="example") 
```

在 Java 中，语法非常相似：

```
in = new Scanner(System.in); 
```

就像在 Python 中一样，我们现在可以在其上调用方法，例如：

```
fahr = in.nextDouble(); 
```

这与等效的 Python 代码的外观几乎相同。可能我不了解您的困惑的根源，所以如果这没有帮助，请告诉我，我很乐意更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:49:01.967

将对象声明视为对 None 的隐式赋值。这在 python 中毫无意义，因为变量没有类型，但它们的 VALUES 有（这就是为什么声明一个变量而不给它赋值是没有意义的）。在 Java 中，当您声明一个变量时，您承诺将在其中存储哪些类型的子集，并且由于在做出该承诺和实际具有要放入其中的值之间可能存在一些代码，因此它们是分开完成的陈述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:02:01.587

Java 是一种静态类型语言，使用前必须先声明变量的类型。

```
Scanner input; //This declare a variable of type Scanner but not assign anything to it yet
input = new Scanner(System.in); // This create a new object of Scanner type and assign it to the variable in 
```

这可以缩短为

```
Scanner input = new Scanner(System.in); 
```

假设我们在 Python 中有一个 Scanner 类，大致等效的代码是

```
input_obj = None
input_obj = Scanner() 
```

Python 是动态类型语言，所以不需要声明类型。因此，第一行没有任何用途，可以而且应该省略，这会导致

```
input_obj = Scanner() 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-19T13:48:03.093

我认为您并不真正了解程序和计算机的工作原理。您可以将其视为`Scanner in`为内存中的区域创建一个标签，该标签以类型对象`in`的正确大小命名`Scanner`，然后`in = new Scanner()`实际上在内存中先前保留的该位置创建该对象。您可以认为它与 Python 中的大致相似`in = None` `in = Scanner()`，尽管这并不完全正确。问题是，由于 Python 是松散类型的，它在幕后处理所有簿记，因此允许您使用一行代码执行真正的多个步骤。

# javascript - 通过 Javascript 写入 XML

> ID：10229357
> 
> 赞同：-1
> 
> 时间：2012-04-19T13:41:18.893
> 
> 标签：javascript, xml

嗨，我有一个现有的 XML 文件，想通过 Javascript 添加一个新条目（atm 没有任何形式或类似硬编码的东西），所以我的问题是如何处理它来添加一本新书。

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
</catalog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:43:41.327

```
XML.BeginNode(“Foo”);
XML.Attrib(“Bar”, “Some Value”);
XML.EndNode();
//Produces: <Foo Bar=”Some Value” /> 
```

也检查下面的 URL。

[http://www.codeproject.com/Articles/12504/Writing-XML-using-JavaScript](http://www.codeproject.com/Articles/12504/Writing-XML-using-JavaScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:45:13.327

恐怕 JavaScript 无法按照您的意愿写入本地文件。您可以生成 XML，但不能将其写入/保存到文件...

# java - 我可以在不使用双链表和堆栈数据结构的情况下生成后缀表示法吗

> ID：10229361
> 
> 赞同：-2
> 
> 时间：2012-04-19T13:41:40.393
> 
> 标签：java, stack, queue, abstract-data-type, postfix-notation

我的问题是关于“**后缀**”表示法。在我的项目中，讲师希望我计算后缀符号。编程风格是免费的，但编程语言是 Java。我会用 Java 编写代码，但我不擅长抽象数据类型，例如堆栈、队列。有没有办法在没有堆栈、双链表和队列的情况下计算后缀符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:27:23.937

这就是它与堆栈一起工作的方式：

```
@SuppressWarnings({"rawtypes", "unchecked"})
public static void main(String[] args) {
  final String in = "5 9 + 2 * 6 5 * +";
  final Deque<Object> s = new LinkedList();
  for (String t : in.split(" ")) {
    if (t.equals("+")) s.push((Integer)s.pop() + (Integer)s.pop());
    else if (t.equals("*")) s.push((Integer)s.pop() * (Integer)s.pop());
    else s.push(Integer.parseInt(t));
  }
  System.out.println(s.pop());
} 
```

# mysql - 如何在没有前导空格的数据字段中搜索？

> ID：10229363
> 
> 赞同：2
> 
> 时间：2012-04-19T13:41:43.710
> 
> 标签：mysql, sql

考虑以下消息：

```
id  message
------------------------------------------------------------
1   $AA is the only way to go!
2   This is my $AA. There are many like it.
3   But this is my $AA.
4   My$AA is my swag.
5   For lack of imagination a message with $AA in the middle.
6   Another message with at the end: $AA 
```

我想用 $AA 过滤所有消息：

*   $AA 可以在消息的开头（所以：它后面只有一个空格）
*   $AA 可以在消息的末尾（所以：它之前只有一个空格）
*   $AA 可以在消息中的任何其他位置（由空格包围）
*   $AA 之前和/或之后可以有标点符号：$AA。$AA 或 ($AA)
*   **但不是**任何其他字符（字母和数字）

我通常会使用查询，例如

```
SELECT * FROM messages WHERE message LIKE '%$AA%' 
```

但随后消息 4 也被返回。如何使查询不返回消息 4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:04:01.287

像这样在查询中添加一个空格太容易了-

```
SELECT * FROM table_name WHERE messages LIKE '% $AA%' 
```

这不会覆盖第一行

用这个：

```
SELECT * FROM table_name WHERE messages LIKE '% $AA%' or messages like '$AA%' 
```

# html - 如何使用 Coldfusion 在 IE6 的 Textarea 中添加 CRLF？

> ID：10229366
> 
> 赞同：1
> 
> 时间：2012-04-19T13:41:49.910
> 
> 标签：html, coldfusion, internet-explorer-6, coldfusion-7

如何使用 Coldfusion 7 代码将 CRLF 添加到 Textarea 中？

我尝试了所有我能想到的方法和我找到的每一种方法。没有任何东西适用于 IE6。在 Chrome 和 IE8 中，我尝试的几乎所有东西都可以正常工作......但是，这个应用程序必须在 IE6 中运行。

下面的代码是我为 textarea 构建字符串的方式。

```
<cfset qResults = "">
<cfif myQuery.RecordCount GT 0>
    <cfloop query="myQuery">
        <cfset qResults="#qResults#" 
                          & "#qfield1# #qfield2# #qfield3# &nbsp;|__|&nbsp; " 
                          & Chr(13) & Chr(10)>
    </cfloop>
<cfelse> 
```

如您所见，我刚刚用丑陋的 |__| 分隔不同的查询返回。因为我不能让其他任何工作。

我也尝试过 CR 或 LF，我也尝试过 html 中断。

* * *

@丹·罗伯茨

嗯，这可能是问题所在。这是通过 javascript 动态提取数据。用户单击文本框，从下拉列表中进行选择，然后表单上的其余字段将填充相关信息。上面的代码，实际上位于 popDB.cfm 页面上，它被调用

```
$.post("popDB.cfm", {id: thisValue}, function(data) {
        var dataArr = data.split(','); 
```

稍后在函数中，实际字段由以下内容填充：

```
$('#qResultsID' + iter).html(dataArr[16]); 
```

**我也分别尝试了所有这些方法。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:05:19.527

如果没有其他问题，chr(10) 应该适合你

```
<cfset str = "" />
<cfloop list="item1,item2,item3" index="listitem">
    <cfset str &= listitem & chr(10) />
</cfloop>
<cfoutput><textarea rows="10" cols="10">#str#</textarea></cfoutput> 
```

# android - 如何在从 Android 应用程序发送的电子邮件中包含图像？

> ID：10229367
> 
> 赞同：0
> 
> 时间：2012-04-19T13:41:50.017
> 
> 标签：android, image, email

我需要在从我的应用程序发送的电子邮件中包含一张图片。我已经编写了包含文本的代码，它工作正常。但我不知道如何包含图像。我的图像位于可绘制文件夹中。我该如何包含它？注意：我浏览了很多帖子，但没有任何帮助。

编辑：

我当前的代码如下

```
emailIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body,new ImageGetter() {
    @Override
    public Drawable getDrawable(String source) {
        Drawable drawFromPath;
        //  int path = getActivity().getResources().getIdentifier(source, "drawable", "com.package...");
        drawFromPath = (Drawable) getActivity().getResources().getDrawable(R.drawable.ic_launcher);
        drawFromPath.setBounds(0, 0, drawFromPath.getIntrinsicWidth(),
            drawFromPath.getIntrinsicHeight());
        return drawFromPath;
    }
}, null));
emailIntent.setType("text/html"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:48:51.113

您可以通过设置以下两个值来附加图像：

```
Uri uri = Uri.fromFile(new File("directory's path", "filename"));

intent.setType("image/jpeg");
intent.putExtra(Intent.EXTRA_STREAM, uri); 
```

# c# - 字段填充编辑器

> ID：10229368
> 
> 赞同：0
> 
> 时间：2012-04-19T13:41:51.667
> 
> 标签：c#, .net, asp.net-mvc, html-helper, editorfor

我正在尝试使用默认值填充 editorfor 字段。请帮忙

我的代码：

```
<div class="editor-label">
        @Html.LabelFor(model => model.Country)
</div>
<div class="editor-field">
        @Html.EditorFor(model => model.Country)
</div> 
```

该模型是由实体框架通过我的 SQL 数据库创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:56:39.780

为什么不直接使用模型的构造函数？

```
public class CustomerViewModel
{
    public string Country { get; set; }

    public CustomerViewModel()
    {
        this.Country = "Default value";
    }
} 
```

# string - 如何将图像表单 ui 视图附加到电子邮件正文

> ID：10229370
> 
> 赞同：0
> 
> 时间：2012-04-19T13:41:52.833
> 
> 标签：string, image, ios5, uiview, xcode4

我有一个小的 ui 视图，允许用户选择一个图片形式的相机胶卷，我想将它与我的文本字段一起附加到电子邮件中。

```
.h
 @property (strong, nonatomic) IBOutlet UIImageView *imageView;

 .m
  NSString *emailBody = [NSString stringWithFormat:@(textboxes and other outlets are      here)"%@"imageView.image]; 
```

通过电子邮件发送时，我收到了附加的文本字符串，但没有收到图像？有人可以指出我正确的方向吗，谢谢

代码 4.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:04:16.513

试试这个链接通过电子邮件发送图像

[http://iosdevelopertips.com/email/how-to-send-email-with-attachments-example-using-iphone-camera-to-email-a-photo.html](http://iosdevelopertips.com/email/how-to-send-email-with-attachments-example-using-iphone-camera-to-email-a-photo.html)

如果那不是您想要的，您可能必须使用函数将图像转换为 nsdata

```
NSData *data=UIImageJPEGRepresentation(image, 1.0); 
```

现在通过base64encoding将此数据转换为字符串，然后附加到字符串。

# ios - 使用 iOS 设备进行调试时切换慢速动画

> ID：10229375
> 
> 赞同：62
> 
> 时间：2012-04-19T13:42:22.187
> 
> 标签：ios, xcode, ios5

我正在使用 xCode 4.3.1，我需要使用 iOS Simulator 具有的选项 => Debug -> Toggle Slow Animation 但在使用 iOS 设备进行调试时。

是否可以？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-04-03T13:28:12.407

不可能以与模拟器完全相同的方式，但有一种使用 lldb 实现相同效果的好方法。

使用调试器暂停代码执行，然后输入命令：

```
p [(CALayer *)[[[[UIApplication sharedApplication] windows] objectAtIndex:0] layer] setSpeed:.1f] 
```

进入调试器。

感谢[此链接](http://gavrix.wordpress.com/2013/03/16/how-to-toggle-slow-animations-on-device/)的解决方案。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-19T19:38:49.273

在斯威夫特 3 中：

```
UIApplication.shared.windows.first?.layer.speed = 0.1 
```

或者，如果您在 AppDelegate 中的任何位置并且只使用一个窗口，您可以这样做：

```
window?.layer.speed = 0.1 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-11-25T00:51:45.570

对于**Swift**应用程序：

使用断点暂停代码并输入以下 lldb 命令：

**`(lldb)`**`p UIApplication.sharedApplication().windows.first?.layer.speed = 0.1`

* * *

或者，您显然也可以在代码中的某处更改速度。例如，`#if`在应用程序启动时使用预处理器宏

```
func application(application: UIApplication,
   didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool 
{
    ...

    #if DEBUG
        application.windows.first?.layer.speed = 0.1
    #endif 
```

不要忘记`DEBUG`在“Swift Compiler - Custom Flags”部分的“Other Swift Flags”行中设置符号。您添加`DEBUG`带有`-DDEBUG`条目的符号。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-05-02T23:48:19.247

Swift 5，在 AppDelegate 或 SceneDelegate 类中添加这一行，这取决于您的基础架构：

```
// create and assign window object if not exist. 
self.window = UIWindow(frame: UIScreen.main.bounds)

// starts slow motion 
window?.layer.speed = 0.05 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-10T12:52:51.210

如果您只想在一个视图控制器中减慢应用程序，您可以配置一个断点以在执行命令后继续执行。您将此断点设置在`viewDidAppear`. 然后您可以设置另一个“不可停止”断点，将速度反转为 1X。您在`viewDidDisappear`.

非常简单。可以保留在您的断点列表中停用并在需要时轻松重用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-27T13:48:26.540

在 Objective-c 中效果很好

```
self.window.layer.speed = .1f; 
```

# ms-access - 为什么 VBA CurrentProject.Connection 语句会导致我所有的访问数据库崩溃？

> ID：10229377
> 
> 赞同：3
> 
> 时间：2012-04-19T13:42:27.833
> 
> 标签：ms-access, vba

我正在使用一个遗留数据库 .mdb 数据库，它在 Access 2007 中遇到 CurrentProject.Connection 时会崩溃。

当我将相同的代码添加到**全新的数据库**时，它们也会崩溃。

```
Dim rstDateFields As New adodb.Recordset
rstDateFields.Open "SELECT * FROM defDateFields ORDER BY FieldID", CurrentProject.Connection, adOpenDynamic, adLockOptimistic 
```

引用设置为：VBA、MS ACCESS 12.0 对象库、OLE 自动化、MS Office 14.0 Access db 引擎对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:46:07.487

您向我们展示的代码是非常基本的 ADO，因此很难相信代码本身就是问题的原因。通过在另一台机器上尝试相同的代码来检查问题是否与那台机器隔离。如果它在那里运行而没有错误，则很可能原始机器以某种方式损坏。不幸的是，试图找到并修复破损可能具有挑战性。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:21:17.020

一个猜测：你能确定你的记录集是 ADO 类型吗？您是否对记录集使用了隐式声明，例如“Dim rs as Recordset”？在这种情况下，您的记录集可能是 DAO 类型。

无论如何，我们很乐意帮助你，但你应该给我们更多的代码来理解你的问题！

# java - 大 Permgen 尺寸 + 性能影响

> ID：10229378
> 
> 赞同：8
> 
> 时间：2012-04-19T13:42:29.810
> 
> 标签：java, tomcat6, liferay, portal, permgen

我们在 tomcat 6 上运行 liferay 门户。每个 portlet 都是一个包含的 Web 应用程序，因此它包含 portlet 本身所需的所有库。我们目前有 30 多个 portlet。这样做的结果是，我们的 tomcat 的 permgen 会随着我们部署的每个 portlet 而增加。

我们现在有两条可以遵循的路径。将我们每个 portlet 常用的一些库移动到 tomcat 共享库中。这将包括诸如 spring/hibernate/cxf/.... 之类的东西来减小我们的 permgen 大小或更容易的是增加 permgen 大小。

第二个选项将允许我们将每个 portlet 保持为一个独立的实体。

现在的问题是，增加 permgen 大小是否会对性能产生负面影响？我们目前以 512MB 运行。我几乎没有找到关于这方面的信息。但是发现一些帖子是人们谈论在 1024MB permgen 大小上运行而没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:27:23.087

只要您的服务器上有足够的内存，我无法想象任何事情都会出错。如果您不这样做，那么 Tomcat 甚至都不会启动，可能是因为它无法分配足够的内存。所以，如果它确实启动了，你很好。就我的经验而言，1GB PermGen 是完美的。

大型 PermGen 的缺点是它留给您的系统内存更少，您可以为堆 (Xmx) 分配内存。

另一方面，我建议您重新考虑将 portlet 视为自包含实体的好处。例如：

*   *互操作性问题*：如果允许所有 portlet 潜在地使用相同库的不同版本，则存在一些风险，即它们不会按预期相互合作以及与门户网站本身合作
*   *性能*：PermGen 占用空间只是一件事，但是在 portlet 中到处添加 jar 将需要额外的文件描述符；我不了解 Windows，但从长远来看，这会损害 linux 服务器的性能。
*   *更改自由*：如果您使用 maven 构建您的 portlet，从`lib/ext`lib 切换到 portlet 的`lib`库只是更改依赖范围的问题（这可能对门户库更烦人）；`lib`据我记得，Liferay SDK 还可以通过添加额外的 ant 任务来解决依赖关系并根据需要从 portlet 中删除它们，从而可以轻松地使用 ant 进行类似的切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:50:33.217

PermGen 内存可以通过完全回收进行垃圾回收，因此增加它可能会增加完全回收发生时的 GC 时间。

这些收集不应该经常发生，并且通常仍然需要不到一秒的时间来完全 GC 1GB 的 permgen 内存 - 我只是从（我有点模糊的）内存中提取这个数字，所以如果你真的担心GC 时间到自己的一些计时测试（使用`-verbose:gc`和阅读日志，更多细节[在这里](https://stackoverflow.com/questions/895444/java-garbage-collection-log-messages)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T12:39:32.457

Permgen 尺寸在 OLD Gen 之外 - 所以请不要混淆。同意第二点 - 我们可以尽可能多地增加 permsize - 因为内存非常便宜，但这会引发一些关于我们如何管理代码的问题。为什么我们需要这么多烫发 - JTa 消耗那么多 - 我们正在加载多少类？应用程序正在打开多少个文件描述符（使用 lsof 命令检查）。我们应该尝试回答这些问题。

# php - 正则表达式从 html tsring 获取部分 url

> ID：10229380
> 
> 赞同：0
> 
> 时间：2012-04-19T13:42:30.157
> 
> 标签：php, regex

我正在处理一个完整的 html 文档，我需要提取 url，但前提是匹配所需的域

```
<html>
<div id="" class="">junk
<a href="http://example.com/foo/bar">example.com</a>
morejunk
<a href="http://notexample.com/foo/bar">notexample.com</a>
</div>
</html> 
```

从那个垃圾部分，我需要获取 example.com 的完整 url，而不是其余部分 (notexample.com)。那将是“http://example.com/foo/bar”甚至更好，只有那个 url (bar) 女巫的最后一部分当然每次都会不同。

希望我已经足够清楚了，非常感谢！

编辑：使用 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:24:04.797

正则表达式是您在解析 HTML 时必须避免的事情。这是一个基于 DOM 解析器的代码，可以满足您的需要：

```
$html = <<< EOF
<html>
<div id="" class="">junk
<a href="http://example.com/foo/bar">example.com</a>
morejunk
<a href="http://notexample.com/foo/bar">notexample.com</a>
</div>
</html>
EOF;
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$nodelist = $xpath->query("//a"); // gets all the links
for($i=0; $i < $nodelist->length; $i++) {
    $node = $nodelist->item($i);
    $val = $node->attributes->getNamedItem('href')->nodeValue;
    if (preg_match('#^https?://example\.com/foo/(.*)$#', $val, $m)) 
       echo "$m[1]\n"; // prints bar
} 
```

# sockets - Haskell 中的原始套接字

> ID：10229381
> 
> 赞同：5
> 
> 时间：2012-04-19T13:42:36.500
> 
> 标签：sockets, unix, networking, haskell

Network.Socket 中提供了原始套接字类型，但在绑定套接字附近有一条注释“当前仅支持 Unix 域套接字和 Internet 系列”。如何在 haskell 中使用原始套接字？

作为工作 Python 代码，我想要实现的目标是：

```
import binascii
import socket

# Create raw socket.
ethType = b'FFFF' # 2 bytes, has to be >= 0x0600\. FFFF is "unavailable" by IEEE.
sock = socket.socket(socket.AF_PACKET, socket.SOCK_RAW)
sock.bind( ('lo', int(ethType,16)) )

# Create packet.
srcMac  = b'000000000000' # 6 bytes
destMac = b'000000000000' # 6 bytes
header = binascii.a2b_hex( destMac + srcMac + ethType ) # 14 bytes
message = b'Hello, World!'
sock.send(header + message)

# Receive such packets
while True: print (sock.recv(65535)) 
```

EDIT1：在 Haskell 中，我`sock <- socket AF_PACKET Raw 0xFFFF`用来创建一个套接字，但`bindSocket`需要 a`SockAddr`作为参数，可用的构造函数是

```
SockAddrInet PortNumber HostAddress  
SockAddrInet6 PortNumber FlowInfo HostAddress6 ScopeID   
SockAddrUnix String 
```

但这些似乎都不对。

EDIT2：感谢 Yuras 的评论，我收到了工作包：

```
import Network.Socket
sock <- socket AF_PACKET Raw 0xFFFF
recv sock 0xFFFF 
```

EDIT3：尝试从套接字发送数据包而不绑定它会导致异常：

```
sock <- socket AF_PACKET Raw 0xFFFF
send sock "\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\255\255"
*** Exception: send: does not exist (No such device or address) 
```

这是有道理的，因为内核对于实际传输数据包的接口没有任何线索。有没有办法将（原始）套接字绑定到 Haskell 中的接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:38:58.270

[Network.Pcap](http://hackage.haskell.org/packages/archive/pcap/0.4.5.1/doc/html/Network-Pcap.html#t%3aCallbackBS)可用于发送和接收原始数据。

```
import qualified Data.ByteString.Char8 as B
import Network.Pcap

main = do
    -- open device
    dev <- openLive "lo" 65535 False 0
    setFilter dev "ether proto 0xFFFF" True 0

    -- send
    sendPacketBS dev (B.pack "\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL\255\255Hello, World!")

    -- receive
    loopBS dev (-1) (\_ packet -> putStrLn (show packet)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:36:39.593

有类似的任务，我能想到的唯一方法是使用[FFI](http://www.haskell.org/haskellwiki/FFI_Introduction)。当前`network`（撰写本文时为 2.4.0.1）只知道三个[`SockAddr`](http://hackage.haskell.org/packages/archive/network/2.4.0.1/doc/html/Network-Socket.html#t%3aSockAddr)系列，其中没有一个适用于`AF_PACKET`套接字。需要的是`struct sockaddr_ll`，这是不可用的。

有一个[补丁添加了`SockAddrRaw`](https://github.com/haskell/network/pull/11)，但即使它被合并，它似乎最终还是丢失了。

我的代码很脏（抱歉，这是我第一个“严肃”的 FFI 代码），但我想我还是会分享它。

首先，我创建了`BindPacketHack.hsc`.

```
{-# LANGUAGE CPP, ForeignFunctionInterface #-}

module BindPacketHack (bindPacket) where

import Foreign
import Foreign.C.Types
import Foreign.C.String
import Network.Socket
import Network.Socket.Internal (zeroMemory)

#include <sys/socket.h>
#include <netpacket/packet.h>
#include <net/if.h>

data SockAddrLL = SockAddrLL { family :: CShort
                             , protocol :: CShort
                             , ifindex :: CInt }
   deriving (Eq, Show)

instance Storable SockAddrLL where
    sizeOf _    = (#size struct sockaddr_ll)
    alignment _ = alignment (undefined :: CInt)
    peek _      = error "peek is not implemented, sorry"
    poke ptr sa = do
        zeroMemory ptr (fromIntegral $ sizeOf sa)
        (#poke struct sockaddr_ll, sll_family) ptr (family sa)
        (#poke struct sockaddr_ll, sll_protocol) ptr (protocol sa)
        (#poke struct sockaddr_ll, sll_ifindex) ptr (ifindex sa)

foreign import ccall unsafe "if_nametoindex"
    c_if_nametoindex :: CString -> IO CInt

ifaceIndex :: String -> IO CInt
ifaceIndex name = withCString name c_if_nametoindex

foreign import ccall unsafe "bind"
    c_bind_ll :: CInt -> Ptr SockAddrLL -> CInt -> IO CInt

bindLL :: Socket -> SockAddrLL -> IO Integer
bindLL s sa = alloca $ \ptr -> do
    poke ptr sa
    ret <- c_bind_ll (fdSocket s) ptr (fromIntegral $ sizeOf sa)
    return $ toInteger ret

bindPacket :: Socket -> ProtocolNumber -> String -> IO ()
bindPacket s proto ifname = do
    ifindex <- ifaceIndex ifname
    bindLL s (sockAddrLL (fromIntegral proto) ifindex)
    return () 
```

您可能会注意到，这`SockAddrLL`是不完整的，因此我的实现非常有限。这是因为我只需要这三个字段，其余字段被清零。不过，添加更多是微不足道的。

运行`hsc2hs BindPacketHack.hsc`，它会解析C头文件并`.hs`出现一个文件。现在你可以像这样使用它：

```
s <- socket AF_PACKET Raw eth_PPPoEDiscovery
setFdOption (Fd $ fdSocket s) CloseOnExec True
setSocketOption s Broadcast 1
bindPacket s eth_PPPoEDiscovery "eth0"
send s rawPPPoEPacket -- don't forget Ethernet header 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:06:54.720

首先，你不需要绑定原始套接字来使用它。从`man 7 raw`

> 可以使用 bind(2) 调用将原始套接字绑定到特定的本地地址。如果未绑定，则接收所有具有指定 IP 协议的数据包。

如果要绑定它，则可以使用`bindSocket`，因为原始套接字使用与使用相同的`sockaddr`结构`ip`：

> 原始套接字使用 ip(7) 中定义的标准 sockaddr_in 地址结构

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T13:50:16.137

[Network.Socket](http://hackage.haskell.org/packages/archive/network/2.3.0.11/doc/html/Network-Socket.html)支持此接口。

# html - 使用 NSXMLParser 解析 xml 时如何忽略 parseErrorOccurred

> ID：10229386
> 
> 赞同：0
> 
> 时间：2012-04-19T13:42:43.123
> 
> 标签：html, objective-c, parsing, nsxmlparser

我现在使用 NSXMLParser 来解析 html，但是当遇到 html 中的“br”标签时，它会抛出不匹配的错误并停止解析，因为通常“/br”标签不会出现在 html 中。所以我想忽略这个不匹配错误继续解析，如何处理呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:02:52.663

不是最好的解决方案，但您可能会考虑在解析之前进行一些正则表达式更正，例如：

`$input =~ s/<br>/<br \/>/ig;`

# c# - WCF 和 Delphi - 我应该使用字节 [] 还是字符串？

> ID：10229387
> 
> 赞同：3
> 
> 时间：2012-04-19T13:42:44.490
> 
> 标签：c#, wcf, delphi, unicode

我创建了一个将由 Delphi 7 类使用的 WCF 应用程序。AFAIK，C#`string`类型是`UTF16`，Delphi 的 7`string`类型是`Ansi`.

问题是：由于 C# 和 Delphi 字符串类型不同，我应该用`bytes[]`而不是声明我的所有函数`string`吗？`strings`使用我的方法会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:05:35.263

我认为你需要在 Delphi 中对所有 WideString 进行标记。

*您说您制作了 .NET WCF 服务并供 Delphi 7 客户端使用，但客户端是否也在您的控制之下？你的问题似乎暗示了这种情况。我回答假设这是真的。*

即使您在 .NET 端的 [OperationContract] 具有 byte[] 类型参数，所有默认的合同线序列化程序（SOAP、JASON 等）都将使用 .NET XML 格式，这是（AFAK）所有 UTF- 16.

因此，虽然您可以将参数放入显式字节数组中，但消息有效负载都将是 UTF-16 XML。

# pentaho - Pentaho 报表设计器中的日期参数验证

> ID：10229393
> 
> 赞同：0
> 
> 时间：2012-04-19T13:43:07.693
> 
> 标签：pentaho, pentaho-report-designer

如何在 pentaho 报告设计器中验证日期参数。我在报告/prpt 中使用“fromDate”和“ToDate”参数。因为如果我选择特定的日期范围，我将只获得该特定的日期范围值。它是工作正常...但是如果有人选择像“FromDate > ToDate”这样的日期范围，我想显示一些通知，比如“错误的日期选择”，比如 dat..

在 Pentaho 报表设计器中可以吗？或者通过使用一些java SCript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:32:57.067

你能提供更多的上下文吗？我似乎不明白你的问题。

但是，如果开始日期大于结束日期，请尝试对您的参数使用 IF 公式（因为我相信您将其用作报告中的字段）以将值呈现为“错误的日期选择”，反之亦然.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-02T12:44:24.160

在 Pentaho 报表设计器中，取一个标签进行验证并在属性选项卡中编辑一个值：

```
=IF([FromDate ]>[ToDate];"'ToDate' should be greater than or equal to 'FromDate '";
IF([FromDate ]>TODAY();"'FromDate ' should be less than or equal to 'current date'";"")) 
```

希望这个答案有帮助。

[截屏](https://i.stack.imgur.com/aqfB3.png)

# java - Struts 和委托模式

> ID：10229394
> 
> 赞同：0
> 
> 时间：2012-04-19T13:43:11.563
> 
> 标签：java, design-patterns, jakarta-ee, struts

如何将 Delegate 模式与 struts 框架结合使用，将 Struts Action 类与执行业务逻辑的 Java 类分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:31:39.003

好的，假设您有一个接口，可以生成一些业务逻辑（例如问候用户）：

**商业逻辑**

```
public interface IBussinessLogic{
    public void greetUser(String username);
} 
```

你使用一个实现该接口的类：

**商业逻辑**

```
public class BussinessLogic implements IBussinessLogic{
      public void greetUser(String username) {
            System.out.println("Hello " + username + ".");
      }
} 
```

然后，在您的操作类中，您可以委托，不，抱歉，您**必须**在您的业务逻辑类中委托：

```
...
IBussinessLogic bl = new BussinessLogic();
bl.greetUser(myForm.getUsername());
... 
```

请记住，一个动作有几个职责：控制流、向前返回……但它们都不必实现应用程序的业务逻辑。接口的使用允许您在将来使用不同的 IBussinessLogic 实现重新连接您的应用程序，甚至使用依赖注入或其他技术。

这是委托模式的一个非常简单的例子。您的操作（委托人）信任委托人（BussinessLogic）来完成任务。

# spring - 如何将 Spring bean 注入 JSF 转换器

> ID：10229396
> 
> 赞同：9
> 
> 时间：2012-04-19T13:43:16.923
> 
> 标签：spring, jsf, primefaces

我需要将 Spring bean 注入 JSF（Primefaces）转换器。我尝试使用 EL 解析器注入 bean。但是，bean`null`在转换器内部。

我的 JSF 转换器：

```
public class DepartmentConverter implements Converter  {
    private DepartmentService departmentService;
    //getter setter for this property

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
        //codes
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
        //Codes
    }
} 
```

`faces-config.xml`：

```
<converter>
    <converter-id>DepartmentConverter</converter-id>
    <converter-class>com.studinfo.jsf.converter.DepartmentConverter</converter-class>
    <property>
        <property-name>departmentService</property-name>
        <property-class>com.studinfo.services.DepartmentService</property-class>
        <default-value>#{DepartmentService}</default-value>
    </property>
</converter> 
```

EL解析器：

```
<application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application> 
```

当我调试我的代码时，`departmentService`属性是`null`. 我可以以同样的方式访问托管 JSF bean 中的 Spring bean。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T13:53:43.593

在 JSF 2.3 之前，转换器不是注入目标。将转换器改为 JSF 或 Spring 托管 bean。下面的示例使其成为 JSF 托管 bean：

```
@ManagedBean
@RequestScoped
public class DepartmentConverter implements Converter  {
    // ...
} 
```

并将其用作`#{departmentConverter}`.`DepartmentConverter`

例如

```
<h:inputSome ... converter="#{departmentConverter}" /> 
```

或者

```
<h:someComponent>
    <f:converter binding="#{departmentConverter}" />
</h:someComponent> 
```

不要忘记删除`<converter>`from `faces-config.xml`（如果您使用注释，这本身就已经没有必要了`@FacesConverter`，但除此之外）。

# python - Scapy，无法获得属性“名称”值

> ID：10229399
> 
> 赞同：1
> 
> 时间：2012-04-19T13:43:25.347
> 
> 标签：python, scapy

您好，我发现了这种奇怪的奇怪行为：

```
<pre>
>>> p[11][LEAP]
&lt;LEAP  version=1 reserved=0 length=24 data='[y\xda\xb8\xbfr\xedCN\xbc\xa8\xa7\x84Fk\xff\xb2\x8fn\x94(\x0c\x91\x8d' name='RSAINI' |>
>>> p[11][LEAP].data 
'[y\xda\xb8\xbfr\xedCN\xbc\xa8\xa7\x84Fk\xff\xb2\x8fn\x94(\x0c\x91\x8d'
>>> p[11][LEAP].name
'LEAP'
</pre> 
```

当我想要访问属性“数据”时，我得到它的值，但是当我访问属性“名称”时，我得到字符串“LEAP”而不是“RSAINI”。你能告诉我如何获得属性名称的正确值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:17:48.327

卡雷尔，

使用时会发生什么

```
p[11].getlayer(LEAP).name 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:59:14.557

好的，我这样解决了：p[11][LEAP].fields["name"]。

# javascript - Extjs 3.2。网格视图-存储关联

> ID：10229400
> 
> 赞同：1
> 
> 时间：2012-04-19T13:43:25.783
> 
> 标签：javascript, model-view-controller, extjs, view, store

在我的示例中，网格中记录数据的顺序如下：

1.  添加所需数量的空记录
2.  更改所需单元格中的值

这是必要的，以便仅从服务器传输整个表的更改。在某些情况下，可能没有更改，甚至可能会删除某些数据。但主要思想是数据必须分两步改变。问题是数据的重写可能发生在调用渲染的不同时间。在某些情况下，我们会遇到错误。

```
//error
store.insert(0, new Rec());   
win.show();         
store.insert(0, new Rec());

//no error
store.insert(0, new Rec());     
store.insert(0, new Rec());  
win.show();         

//no error
win.show();         
store.insert(0, new Rec());   
store.insert(0, new Rec()); 
```

我们无法保证 insert 和 show 函数的执行顺序，因为它们可以从不同的异步请求中调用。

**我的问题在下一个；** 为什么存储中的更改取决于视图状态，我们如何保护自己免受这种情况的影响？

[测试用例](http://pastehtml.com/view/bva5t80mf.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:40:56.930

看起来在调用 GridView 的 init() （从 Grid 的 调用）之前，GridView 的商店“添加”事件的侦听器不会添加到视图中`onRender()`。这发生在渲染网格时 (win.show())。您在 #2 (insert-insert-show) 上没有收到错误，因为它从未命中`Ext.fly(rows[0]).addClass(this.firstRowCls);`GridView 中的`processRows()`.

我稍微更改了代码以在 GridViews init 和 onAdd（商店的添加事件的处理程序）中打印出一些日志记录：

```
Ext.onReady(function(){

    var cm = new Ext.grid.ColumnModel({
        columns: [{
                dataIndex: 'common',
                editor: new Ext.form.TextField({allowBlank: false})
            }]
    });

    var store = new Ext.data.Store({
        reader: new Ext.data.JsonReader({
            record: 'plant',
            fields: [{name: 'common', type: 'string'}]
        })
    });

    var grid = new Ext.grid.EditorGridPanel({
        store: store,
        cm: cm,
        region: "center",
        view: new Ext.grid.GridView({
            init : function(grid) {
                console.log("\tinit()");
                this.grid = grid;

                this.initTemplates();
                this.initData(grid.store, grid.colModel);
                this.initUI(grid);
            },
            onAdd : function(store, records, index) {
                console.log("\t\tadding: ", records[0].id);
                this.insertRows(store, index, index + (records.length-1));
            }
        })
    });

    var win = new Ext.Window({
        layout: "border",
        items: [grid],
        width : 300,
        height : 300
    });

    var Rec = grid.getStore().recordType;
  /*   
    console.log("show-insert-insert");
    win.show();

    console.log("\t1st insert");
    store.insert(0, new Rec());

    console.log("\t2nd insert");
    store.insert(0, new Rec());     
   */
    console.log("insert-insert-show");
    console.log("\t1st insert");
    store.insert(0, new Rec());

    console.log("\t2nd insert");
    store.insert(0, new Rec());

    console.log("win.show()");
    win.show();
}); 
```

以下是三种不同情况的控制台：

```
show-insert-insert
    init()
    1st insert
        adding: ext-record-1
    2nd insert
        adding: ext-record-2
    win.show()

insert-show-insert
    1st insert
    win.show()
    init()
    2nd insert
        adding: ext-record-2

Ext.fly(rows[0]) is null
[Break On This Error]   
Ext.fly(rows[0]).addClass(this.firstRowCls);
ext-all-debug.js (line 43959

insert-insert-show
    1st insert
    2nd insert
    win.show()
    init() 
```

如您所见，它实际上将两个项目添加到 Grid（和 GridView）的唯一情况是在 show-insert-insert 案例中。到目前为止我发现的最佳解决方案就是做

```
win.show();
win.hide(); 
```

一开始。到目前为止，我还没有找到更好的解决方案。我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:42:40.973

或者您可以在显示后刷新 GridView

```
win.show();
grid.getView().refresh(); 
```

# flash - Flash ExternalInterface 在 Firefox 下崩溃

> ID：10229402
> 
> 赞同：0
> 
> 时间：2012-04-19T13:43:33.707
> 
> 标签：flash, firefox, firefox-addon, externalinterface

过了一会儿，我开始使用 Flash 及其 ExternalInterface 进行我的项目。在运行嵌入 Flash 和 JavaScript 的用于工作的 html 站点后，我发现它停止工作。我从 asdoc 运行 ExternalInterface 示例，结果相同 - sendToActionscript 不是函数。几个小时后，我想出了解决方案 - 这是由 FF add-one FlashFirebug (3.4.2) 在删除插件后引起的，它开始按预期工作。我希望这篇文章可以为您节省几个小时的挫败感。快乐编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:58:41.303

FlashFirebug 3.5.2 应该可以解决这个问题。试一试。

# django - 使用 IN() 的 django 查询

> ID：10229408
> 
> 赞同：3
> 
> 时间：2012-04-19T13:43:47.350
> 
> 标签：django, django-models

我对这样构建的模型有疑问：

```
class Topping(models.Model):
    name = models.CharField(max_length=30)

class Pizza(models.Model):
    cook = models.ForeignKey(Cook)
    name = models.CharField(max_length=50)
    toppings = models.ManyToManyField(Topping) 
```

我正在尝试选择提供的**厨师**在他的比萨饼上使用的**所有配料。**

 **在 SQL 上我可以使用`select * from Toppings t where t.id IN(select topping_id from Pizzas where cook_id = ?)`或其他方式（肯定更有效：P）。问题是我必须使用 django 模型，因为底层的依赖关系，比如分页。

因为它是许多应用程序使用的数据库，所以如果可以在不更改模型的情况下完成它会很棒......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:50:09.990

```
Topping.objects.filter(pizza__cook=mycook) 
```**

# c# - 从 C# 获取 CPU ID 代码以使用 C++

> ID：10229412
> 
> 赞同：4
> 
> 时间：2012-04-19T13:43:59.347
> 
> 标签：c#, c++, wmi, wql, cpuid

我有这个 C# 代码来获取处理器 ID，但我无法将它传递给 C++，我尝试了很多但我真的做不到，我刚开始使用 C++，我希望能够获得 CPU ID就像我以前用 C# 得到的 C++

这是我在 C# 中的代码：

```
public static string GetProcessorID()
{
  string sProcessorID = "";
  string sQuery = "SELECT ProcessorId FROM Win32_Processor";
  ManagementObjectSearcher oManagementObjectSearcher = new ManagementObjectSearcher(sQuery);
  ManagementObjectCollection oCollection = oManagementObjectSearcher.Get();
  foreach (ManagementObject oManagementObject in oCollection)
  {
    sProcessorID = (string)oManagementObject["ProcessorId"];
  }

  return (sProcessorID);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T13:58:45.000

在 C++ 中它有点长！这是一个完整的工作示例，请注意，如果您将查询从

```
SELECT ProcessorId FROM Win32_Processor 
```

到

```
SELECT * FROM Win32_Processor 
```

然后您可以使用该`QueryValue`函数查询任何属性值。

```
HRESULT GetCpuId(char* cpuId, int bufferLength)
{
    HRESULT result = InitializeCom();
    if (FAILED(result))
        return result;

    IWbemLocator* pLocator = NULL;
    IWbemServices* pService = NULL;
    result = GetWbemService(&pLocator, &pService);
    if (FAILED(result))
    {
        CoUninitialize();
        return result;
    }

    memset(cpuId, 0, bufferLength);
    result = QueryValue(pService, 
            L"SELECT ProcessorId FROM Win32_Processor", L"ProcessorId",
            cpuId, bufferLength);

    if (FAILED(result))
    {
        pService->Release();
        pLocator->Release();
        CoUninitialize();

        return result;
    }

    pService->Release();
    pLocator->Release();
    CoUninitialize();

    return NOERROR;
} 
```

首先你必须做所有的初始化工作，它们被打包到这两个函数中：

```
HRESULT InitializeCom()
{
    HRESULT result = CoInitializeEx(0, COINIT_APARTMENTTHREADED); 
    if (FAILED(result))
        return result;

    result = CoInitializeSecurity(
        NULL,                           // pSecDesc
        -1,                             // cAuthSvc (COM authentication)
        NULL,                           // asAuthSvc
        NULL,                           // pReserved1
        RPC_C_AUTHN_LEVEL_DEFAULT,      // dwAuthnLevel
        RPC_C_IMP_LEVEL_IMPERSONATE,    // dwImpLevel
        NULL,                           // pAuthList
        EOAC_NONE,                      // dwCapabilities
        NULL                            // Reserved
        );

    if (FAILED(result) && result != RPC_E_TOO_LATE)
    {
        CoUninitialize();

        return result;
    }

    return NOERROR;
}

HRESULT GetWbemService(IWbemLocator** pLocator, IWbemServices** pService)
{
    HRESULT result = CoCreateInstance(CLSID_WbemLocator, 0, CLSCTX_INPROC_SERVER, 
        IID_IWbemLocator, reinterpret_cast<LPVOID*>(pLocator));

    if (FAILED(result))
    {
        return result;
    }

    result = (*pLocator)->ConnectServer(
        _bstr_t(L"ROOT\\CIMV2"),    // strNetworkResource
        NULL,                       // strUser  
        NULL,                       // strPassword
        NULL,                       // strLocale
        0,                          // lSecurityFlags
        NULL,                       // strAuthority
        NULL,                       // pCtx
        pService                    // ppNamespace
        );

    if (FAILED(result))
    {
        (*pLocator)->Release();     

        return result;
    }

    result = CoSetProxyBlanket(
        *pService,                      // pProxy
        RPC_C_AUTHN_WINNT,              // dwAuthnSvc
        RPC_C_AUTHZ_NONE,               // dwAuthzSvc
        NULL,                           // pServerPrincName
        RPC_C_AUTHN_LEVEL_CALL,         // dwAuthnLevel
        RPC_C_IMP_LEVEL_IMPERSONATE,    // dwImpLevel
        NULL,                           // pAuthInfo
        EOAC_NONE                       // dwCapabilities
        );

    if (FAILED(result))
    {
        (*pService)->Release();
        (*pLocator)->Release();     

        return result;
    }

    return NOERROR;
} 
```

完成后，您可以运行 WQL 查询，然后必须枚举返回的属性以找到所需的属性（您可以使其更简单，但通过这种方式您可以查询多个值）。请注意，如果您从 Win32_Processor 查询所有值，您将获得大量数据。在某些系统上，我看到完成查询和枚举属性甚至需要 2 秒（因此过滤您的查询以仅包含您需要的数据）。

```
HRESULT QueryValue(IWbemServices* pService, const wchar_t* query, const wchar_t* propertyName, char* propertyValue, int maximumPropertyValueLength)
{
    USES_CONVERSION;

    IEnumWbemClassObject* pEnumerator = NULL;
    HRESULT result = pService->ExecQuery(
        bstr_t(L"WQL"),                                         // strQueryLanguage
        bstr_t(query),                                          // strQuery
        WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY,  // lFlags
        NULL,                                                   // pCtx
        &pEnumerator                                            // ppEnum
        );

    if (FAILED(result))
        return result;

    IWbemClassObject *pQueryObject = NULL;
    while (pEnumerator)
    {
        try
        {
            ULONG returnedObjectCount = 0;
            result = pEnumerator->Next(WBEM_INFINITE, 1, &pQueryObject, &returnedObjectCount);

            if (returnedObjectCount == 0)
                break;

            VARIANT objectProperty;
            result = pQueryObject->Get(propertyName, 0, &objectProperty, 0, 0);
            if (FAILED(result))
            {
                if (pEnumerator != NULL)
                    pEnumerator->Release();

                if (pQueryObject != NULL)
                    pQueryObject->Release();

                return result;
            }

            if ((objectProperty.vt & VT_BSTR) == VT_BSTR)
            {
                strcpy_s(propertyValue, maximumPropertyValueLength, OLE2A(objectProperty.bstrVal));
                break;
            }

            VariantClear(&objectProperty);
        }
        catch (...)
        {
            if (pEnumerator != NULL)
                pEnumerator->Release();

            if (pQueryObject != NULL)
                pQueryObject->Release();

            return NOERROR;
        }
    } 

    if (pEnumerator != NULL)
        pEnumerator->Release();

    if (pQueryObject != NULL)
        pQueryObject->Release();

    return NOERROR;
} 
```

**注意**：如果您需要收集比CPU的*简单*ID更多的信息，此代码很有用。这是一个从 WQL 查询中获取一个（或多个）属性的通用示例（就像您在 C# 中所做的那样）。如果您不需要获取任何其他信息（并且您不认为在 C++ 程序中使用 WMI），那么您可以使用`__cpuid()`评论中发布的内在函数。

## __cpuid()

WMI的`ProcessorId`属性有以下描述：

> 描述处理器功能的处理器信息。对于 x86 类 CPU，字段格式取决于 CPUID 指令的处理器支持。如果支持该指令，则该属性包含 2（两个）DWORD 格式的值。第一个是偏移量 08h-0Bh，这是 CPUID 指令在输入 EAX 设置为 1 时返回的 EAX 值。第二个是偏移量 0Ch-0Fh，这是指令返回的 EDX 值。只有属性的前两个字节是有效的，并且包含 CPU 复位时 DX 寄存器的内容——所有其他字节都设置为 0（零），并且内容为 DWORD 格式。

一个好的实现应该更多地检查*奇怪*的情况，但一个幼稚的实现可能是：

```
std::string GetProcessorId()
{
 int info[4] = { -1 };

 __cpuid(info, 0);
 if (info[0] < 1)
  return ""; // Not supported?!

 // Up to you...you do not need to mask results and you may use
 // features bits "as is".    
 __cpuid(info, 1);
 int family = info[0];
 int features = info[3];

 std::stringstream id;
 id << std::hex << std::setw(4) << std::setfill('0') << family << features;

 return id.str();
} 
```

另请参阅[这篇文章](https://stackoverflow.com/a/53034451/1633272)以获得更好的 C++-ish 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:07:43.767

1.  如果只是将获得的字符串类型的处理器ID（托管代码）发送到非托管代码（c++）的问题，那么您可以尝试各种选项，例如使用COM接口或通过一些中间CLR CLI接口或使用正常的本机dll编写自己编组代码。

2.  另一种方法是创建一个 C# COM 接口并通过调用函数 GetProcessorID() 从 C++ 访问它以获取 sProcessorID

# php - 如何 php 上传具有预定义自定义名称的图像/

> ID：10229413
> 
> 赞同：0
> 
> 时间：2012-04-19T13:44:05.573
> 
> 标签：php, upload, avatar

让我解释一下我希望完成的事情：

我想允许我的用户上传图像作为头像。

我找到了很多 php 上传教程，但我不知道如何将头像作为 user_id.ext 上传到 /avatars 文件夹中。

我希望我很清楚，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:47:15.587

在任何上传脚本中，您都会经历几个基本步骤。首先，您从 $_FILES 获取数据，告诉您临时上传文件在哪里。您根据某些东西验证文件以确保它不是邪恶/恶意/错误的。然后你重命名它并将它移动到有用的地方。在最后一步中，当您将图像移动到要移动的位置时，请借此机会随意命名文件。如果您正在处理用户的帐户，那么获取用户名、id、中间名等并使用它来设置文件名应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:03:10.027

此脚本获取上传的文件并将其另存为`/avatars/$user_id.ext`，`$user_id`从 POST 检索：

```
<?php
if ($_FILES["file"]["error"] > 0) {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
} else {
    move_uploaded_file($_FILES["file"]["tmp_name"], "/avatar/{$_POST['user_id']}.ext");
    echo "Stored in: " . "/avatar/{$_POST['user_id']}.ext";

}    
?> 
```

这是形式：

```
<form method="POST" enctype="multipart/form-data">
<input type="file" name="file">
<input type="hidden" name="user_id" value="<?php echo $user_id ?>">
<input type="submit" value="submit"></form> 
```

# symfony - Doctrine2 & Symfony2 单表插入多个表

> ID：10229415
> 
> 赞同：2
> 
> 时间：2012-04-19T13:44:10.330
> 
> 标签：symfony, doctrine-orm

我有一个带有两个字段的 Symfony2 表单：“A”和“B”。我想使用 Doctrine2 将它们存储在两个不同的表中。

我已经看过[Doctrine - 只用一个 save() 插入多行，](https://stackoverflow.com/questions/5415725/doctrine-insert-multiple-rows-with-just-one-save)但这不是我的情况。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:23:59.360

Solved embedding a B field in A. [Watch here](http://symfony.com/doc/current/cookbook/form/form_collections.html)

# regex - 如何修剪以特定表达式开头的字符串？

> ID：10229419
> 
> 赞同：0
> 
> 时间：2012-04-19T13:44:20.127
> 
> 标签：regex, notepad++, pcre

如何`utm_content`使用 Notepad++ 从文件中的所有 url 中查找和删除参数？

样本数据：

```
http://example.com/content1.html?utm_content=product1
http://example.com/abc2.html?utm_content=homepage
http://example.com/test/?utm_content=sku1234
http://example.com/runapp?utm_content=31231KS
http://example.com/blabla?utm_content=nl-laptops-tablets 
```

期望的结果：

```
http://example.com/content1.html
http://example.com/abc2.html
http://example.com/test/
http://example.com/runapp
http://example.com/blabla 
```

注意：据我了解，Notepad++ 正则表达式使用标准 PCRE (Perl) 语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:51:10.227

据我了解您的需求：

搜索：

```
\?utm_content=.*?" 
```

并替换为`"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:51:59.690

如果这是唯一的一个参数，则搜索`\?utm_content=\w+`或`\?utm_content=.*`用零字符串替换它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T13:59:03.023

使用标准搜索和替换 (Ctrl + R)

编辑：

**搜索：** utm_content

**代替：**

按查找，然后按更换休息。

# r - 使用 image() 绘图并注释行

> ID：10229422
> 
> 赞同：0
> 
> 时间：2012-04-19T13:44:25.230
> 
> 标签：r

我有一个大数据框（下面是类似的小示例），我想使用 image() 显示矩阵中的值。首先，它绘制从右侧第 1 列开始并从右到左的列，但是，我希望它在左侧绘制第 1 列，然后从左到右。

其次，我想在图中添加一个“颜色条”，指示第 1 行和第 2 行具有相同的 $taxid，并且第 3 行和第 4 行具有相同的 $taxid。类似于热图中的“ColSideColors”。

有什么建议么？

谢谢你

```
df<-data.frame(taxid=c("A","A","B","B"),c2=c(1,2,3,4),c3=c(3,4,5,6))
nr<-dim(df)[1]
nc<-dim(df)[2]
z<-as.matrix(log(df[,2:3]))
image(x=1:nc, y=1:nr, z=t(z), axes=FALSE, frame.plot=TRUE) 
```

好的，我现在决定尝试为颜色提示制作一个“瘦”条形图。但是，它不是“堆叠”条形图（尽管高度是一个向量，并且旁边 = FALSE。因此，当我使用布局组合它们时，它抱怨没有足够大的边距。

有关堆叠条形图或其他更复杂解决方案的任何帮助。谢谢

```
layout(matrix(c(1,2),1,2,byrow=FALSE),heights=c(1,1),widths=c(1,9))
barplot(as.vector(table(df$taxid)),width=0.1,beside=FALSE,col=rainbow(length(table(df$taxid))))
image(x=1:nc, y=1:nr, z=t(z), axes=FALSE, frame.plot=TRUE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:58:38.637

您可以使用该`rasterImage`函数将色带添加到现有绘图：

```
tmp <- as.raster(  rev(c('#00ff00','#0000ff')[df$taxid]) ) 
par(xpd=NA)
rasterImage( tmp, 3, 0.5, 3.1, 4.5, interpolate=FALSE) 
```

如果您没有 rasterImage 选项，则可以叠加 2 个图像图。下面我在原始矩阵中添加 2 列 NA 并扩展`x=`参数，以便在右侧添加一个小空白空间，然后我创建一个新矩阵，其中仅在第 4 列（所有其他 NA）中包含滑行信息并使用它使用相同`x=`但使用，`add=TRUE`以便在旧图像之上创建新图像图（但仅在先前的空白区域中添加颜色，并且不会过度绘制感兴趣的图像，因为这些值为 NA）。

```
z2 <- cbind(z, NA, NA)
image(x=c(1:3,3.05, 3.1), y=1:nr, z=t(z2), axes=FALSE)

z3 <- cbind(NA,NA,NA, as.numeric(df$taxid))
image(x=c(1:3,3.05, 3.1), y=1:nr, z=t(z3), add=TRUE, col=c('#00ff00','#0000ff')) 
```

# ios - 免费销售数字内容

> ID：10229430
> 
> 赞同：0
> 
> 时间：2012-04-19T13:44:44.057
> 
> 标签：ios, in-app-purchase

我们想在我们的应用程序中免费出售一些数字内容。我们是否要使用应用内购买以及什么类型？

我们如何设定 0 美元的价格？我们可以更改促销价格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:29:19.497

我认为你不需要在应用内购买这种奇怪类型的内容销售，相反，只需使用一个按钮发出 HTTP 请求来下载该内容，或者只是在应用内解锁它。

你不需要为此连接苹果的服务器，如果你愿意的话，苹果也不会欣赏它。所以不要那样做。

# shell - 删除 Unix 中的递归目录（无限子目录）

> ID：10229433
> 
> 赞同：-1
> 
> 时间：2012-04-19T13:44:56.787
> 
> 标签：shell, unix, command-line

如何在 Solaris 中删除递归目录。

目录结构：**SourceCode/unit_test_cases。**

命令 **cp -rf SourceCode/ SourceCode/unit_test_cases/**：创建了一个递归目录。

目录结构如下所示

```
SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/SourceCode/unit_test_cases/ 
```

我知道“rm -rf SourceCode”是递归删除。但是这个命令给出了错误文件名太长。这是由于递归创建了无限的子目录。所以无法删除目录。

我在 Ubuntu 中尝试过这个，它确定循环递归并打破 @ 一些深度是很聪明的，但在这种情况下 Solaris 似乎很愚蠢。有谁能够帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:47:17.567

简直是

```
 rm -rf PATHS 
```

其中 PATHS 是要删除的一个或多个 PATH（如果您想完全删除该目录，就足够了 SourceCode）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:48:03.607

尝试这个

```
rm -r <your directory> 
```

并注意您要删除的内容。

# wix - 如何从 CustomAction 获取返回码？

> ID：10229434
> 
> 赞同：9
> 
> 时间：2012-04-19T13:45:06.577
> 
> 标签：wix, return-value, custom-action

我的项目中有以下 CustomAction：

```
<CustomAction Id="InstallDriver"
                  Return="check"
                  Execute="deferred"
                  Impersonate="no"
                  FileKey="FileDriverInst"
                  ExeCommand="-install" />

<InstallExecuteSequence>
    <Custom Action="InstallDriver" Before="InstallServices" />
</InstallExecuteSequence> 
```

安装驱动程序的程序会产生有用的返回代码，例如，如果安装失败，因为在先前的驱动程序卸载后需要重新启动系统。

目前，如果返回成功以外的任何内容，我会收到一个对话框，提示“作为设置的一部分运行的程序未按预期完成。” 并且安装失败。这不是最优的。

如何获取和处理返回码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:28:37.527

Windows Installer 不支持处理自定义操作返回值。

对于 EXE 自定义操作，非零返回值被解释为错误并且安装停止。只有 win32 DLL 或 VBScript 自定义动作可以通过其[返回码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369778%28v=vs.85%29.aspx)改变安装行为，但仍然非常有限。

如果您想在安装后重新启动机器，您可以设置[REBOOT](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371101%28v=vs.85%29.aspx)属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-18T22:08:05.897

应要求添加为“答案”：

你的整个设计不是最优的。它超出了 Windows Installer 的进程，并且不是声明性的。安装驱动程序有更好的模式。

这就是 MSI 处理 EXE 调用的方式。您必须编写自己的自定义操作来包装 EXE 调用，然后解释失败原因。对我来说，这只是增加了另一个失败点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-19T19:55:10.503

您无法从 CustomAction 获取返回码，但您可以通过一种方式设置返回码在属性上的内容。这也可能与获取返回码相同。

您必须在您的自定义操作正在执行的脚本/dll 中获取它。否则，返回码只显示在日志中。

例如，如果您有类似的财产

```
<Property="MyCode" Secure="yes"> 
```

然后在 VBScript（或 Jscript）中，您可以获得该属性的值，如下所示：

**VBScript**

```
Session.Property("MyCode") 
```

最初，它是空的。您可以像这样在 VBScript 中设置它：

```
If someCondition = 4 Then
  Session.Property("MyCode") = "4" // For a return code of 4
End If 
```

回到您的 WiX .wxs 文件后，如果您查看属性的值，它现在是 4。您甚至可以在 CDATA 标记中使用它。

例如，仅当 MyCode 等于 4 时才生成对话框。

```
<Publish Dialog="SpawnDialog" ...><![CDATA[ MyCode = 4 ]]></Publish> 
```

# ios - 是否可以使用 Phonegap 获取 iOS 应用推送设置？

> ID：10229445
> 
> 赞同：2
> 
> 时间：2012-04-19T13:45:42.187
> 
> 标签：ios, cordova, push-notification, apple-push-notifications, phonegap-plugins

我使用 Phonegap 1.6 创建了一个应用程序，并成功实现了[Urban Airship Push Plugin](https://github.com/ckihneman/UACordova)。

当用户第一次运行应用程序时，设备会询问标准问题“您是否要允许此应用程序向您发送通知”（类似这样）。我的问题是：我如何知道用户是否回答是或否？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:50:48.523

[负责询问用户是否要启用 PushNotifications 的函数](https://github.com/ckihneman/UACordova/blob/master/iOS/www/PushNotification.js#L7)的回调包含您需要的所有数据。

它看起来像[这样](https://github.com/phonegap/phonegap-plugins/blob/master/iOS/PushNotification/README.md#javascript-interface)：

```
{"type":"7","pushBadge":"1","pushSound":"1","enabled":"1","deviceToken":"blablahblah","pushAlert":"1"} 
```

您应该在每次应用启动时执行此功能。如果用户在设置应用程序中更新推送设置，您将立即获得新数据。

注意：弹出窗口只会出现一次，因此调用注册函数不会在每次启动时都显示警报。

# android - 在 Android 的 Arraylist 中添加位图时堆内存大小增加？

> ID：10229458
> 
> 赞同：-2
> 
> 时间：2012-04-19T13:46:10.017
> 
> 标签：android

我正在制作一个绘画应用程序，在其中绘制多条线时，我必须在 Arraylist 中添加图像的位图。不幸的是，我遇到了内存不足的异常。尽管我增加了堆的大小，但我无法解决这个问题。

我在这样的 Arraylist 中添加当前位图：

```
linesbitmap.add(Bitmap.createBitmap(mBitmap)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:55:46.917

> 在Android的arraylits中添加位图时堆内存大小增加？

当然。如果你往桶里倒更多的水，桶里的水就会更多。如果你把更多的东西放在一个袋子里，袋子里的东西就会更多。如果分配更多内存，您将使用更多内存。这与 Android 没有太大关系——这是计算机在过去约 50 年中的工作方式。

> 我无法处理

使用更少的内存：

*   列表中的位图更少
*   列表中的位图更小（像素更少，颜色深度更低）
*   `recycle()`在将更多内容添加到列表之前删除列表中的位图
*   将数据移出内存并移入文件（例如，保留位图，然后将其从列表中删除）
*   更有效地保存数据（例如，保留有关如何绘制线条的说明，而不是表示线条的位图）
*   等等

> 我也增加了堆的大小

在大多数 Android 版本上，您无法增加堆的大小。

# android - 滚动后 ListView 中项目的 onItemClick 引发 NullPointerException

> ID：10229460
> 
> 赞同：0
> 
> 时间：2012-04-19T13:46:20.617
> 
> 标签：android, listview, nullpointerexception, custom-adapter, onscroll

我开发了一个显示所有 Android 手机联系人的活动，并且我正在使用 ListView 来显示检索到的联系人。问题是直到我不滚动我的 ListView 时，每当我点击任何列表项时 - 它都会显示特定的联系人记录详细信息。但是，当我滚动并单击列表中的任何项目时，应用程序正在崩溃并抛出 NullPointerException。谁能指导我哪里出错以及如何实现我的结果。这可能是一个重复的问题，但我尝试在网上搜索但没有成功。下面是显示联系人的我的活动的代码片段：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contact_manager);

    filterText = (EditText) findViewById(R.id.search_box);     
    filterText.addTextChangedListener(filterTextWatcher); 

    mContactList = (ListView) findViewById(R.id.contactList);
    populateContactList();      

}

private void populateContactList()
{
    // Another class used to retrieve contacts
              ContactAPI contactAPI = ContactAPI.getAPI();
    ContentResolver cr = getContentResolver();
    contactAPI.setCr(cr);

    ArrayList<Contact> a = new ArrayList<Contact>();
    a = contactAPI.newContactList(this).getContacts();

    contactsAL = new ArrayList<Contact>(a);     

    adapter = new CustomAdapter(this, R.layout.contact_entry, a);       

    mContactList.setAdapter(adapter);   

    mContactList.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {               

               ***// The below is the line where I am getting NullPointerException***
        LinearLayout l = (LinearLayout) parent.getChildAt(position);
        TextView tv = (TextView) l.getChildAt(1);

        Intent myIntent = new Intent(view.getContext(), ContactDetailsActivity.class);

        Bundle b = new Bundle();
        b.putString("ContactID", tv.getText().toString());
        myIntent.putExtras(b);

        startActivityForResult(myIntent, 0);
    }
    });

private TextWatcher filterTextWatcher = new TextWatcher() 
{      
    public void afterTextChanged(Editable s) 
    {     

    }      
    public void beforeTextChanged(CharSequence s, int start, int count, int after) 
    {     

    }      
    public void onTextChanged(CharSequence s, int start, int before, int count) 
    {         
        adapter.getFilter().filter(s);
    }  
};

protected void onDestroy() 
{     
    super.onDestroy();     
    filterText.removeTextChangedListener(filterTextWatcher); 
} 
```

* * *

下面是我的自定义适配器类代码片段：

```
private ArrayList<Contact> original; 
private ArrayList<Contact> fitems;
private Filter filter;

private LayoutInflater mInflater;

public CustomAdapter(Context context, int layoutResourceId, ArrayList<Contact> data) 
{
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.original = new ArrayList<Contact>(data);         
    this.fitems = new ArrayList<Contact>(data);
}   

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) 
{       
    ViewHolder holder;

    if (convertView == null) 
    {
        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);         
        convertView = mInflater.inflate(R.layout.contact_entry, null);
        holder = new ViewHolder();          
        holder.txtName = (TextView) convertView.findViewById(R.id.contactEntryText);
        holder.txtID = (TextView) convertView.findViewById(R.id.contactID);

        convertView.setTag(holder);         
    } 
    else 
    {           
        holder = (ViewHolder) convertView.getTag();         
    }

    if(fitems != null)
    {
        Contact ct = fitems.get(position);
        if(ct != null)
        {
            holder.txtName.setText((String)ct.getDisplayName());
            holder.txtID.setText((String)ct.getId());
        }
    }

    //this.notifyDataSetChanged();

    return convertView;
}

@Override
public Filter getFilter() {
    // TODO Auto-generated method stub
    // return super.getFilter();

    if (filter == null)         
        filter = new ContactFilter();      

    return filter;
}

private class ContactFilter extends Filter 
{ 
    @Override 
    protected FilterResults performFiltering(CharSequence constraint) 
    { 
        FilterResults results = new FilterResults(); 
        String prefix = constraint.toString().toLowerCase(); 

        if (prefix == null || prefix.length() == 0) 
        { 
            ArrayList<Contact> list = new ArrayList<Contact>(original); 
            results.values = list; 
            results.count = list.size(); 
        } 
        else 
        { 
            final ArrayList<Contact> list = new ArrayList<Contact>(original); 
            final ArrayList<Contact> nlist = new ArrayList<Contact>(); 
            int count = list.size(); 

            for (int i=0; i<count; i++) 
            { 
                final Contact cont = list.get(i); 
                final String value = cont.getDisplayName().toLowerCase(); 

                if (value.contains(prefix)) 
                { 
                    nlist.add(cont); 
                } 
            } 
            results.values = nlist; 
            results.count = nlist.size(); 
        } 
        return results; 
    } 

    @SuppressWarnings("unchecked") 
    @Override 
    protected void publishResults(CharSequence constraint, FilterResults results) 
    { 
        fitems = (ArrayList<Contact>)results.values; 

        clear(); 
        int count = fitems.size(); 
        for (int i=0; i<count; i++) 
        { 
            Contact cont = (Contact)fitems.get(i); 
            add(cont); 
        } 
    } 
}

static class ViewHolder {
    TextView txtName;
    TextView txtID;
} 
```

* * *

谁能建议我我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:53:41.483

int`onItemClick`调用 CustomAdapter。[getItem(int)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getItem%28int%29)检索`Contact`位置的对象，使用联系人检索开始新活动所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:31:01.290

在您的主要活动中删除设置 onitemclicklistener。

在 CustomAdapter 中，在 getView 方法中，您只需将 clicklistener 添加到 textview

```
holder.txtName.setOnclickListener(new OnClickListener() {

   @Override
  public void onClick() {
  Intent myIntent = new Intent(view.getContext(), ContactDetailsActivity.class);

    Bundle b = new Bundle();
    b.putString("ContactID", holder.txtName.getText().toString());
    myIntent.putExtras(b);

    startActivityForResult(myIntent, 0);

   }
}) 
```

# iphone - 将屏幕切换到 RootViewController 时出现错误

> ID：10229470
> 
> 赞同：0
> 
> 时间：2012-04-19T13:47:13.370
> 
> 标签：iphone, ios, xcode, ipad, screen

我现在很绝望，我需要一些帮助。

所以从一开始：

我制作了一个基于视图的应用程序，我想将其用作主应用程序。我已经构建了另一个基于导航的应用程序。

我将这两个项目合二为一，在我制作的第一个应用程序中拖放导航项目。我将头文件添加到基于视图的 .m 文件中。到目前为止，一切都很好。但是当我添加这段代码时：

```
-(IBAction)search
{  
  RootViewController *search = [[RootViewController alloc] initWithNibName:nil bundle:nil];
  search.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
  [self presentModalViewController:search animated:YES];
} 
```

然后我会得到两个错误，即：

**架构 i386 的未定义符号：“_OBJC_CLASS_$_RootViewController”，引用自：Home.o 中的 objc-class-ref**

**ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）**

所以我在这里要做的是，当我点击主应用程序中的一个按钮时，屏幕需要从另一个应用程序转到主应用程序。我尝试将 RootViewController 更改为 UINavigationController 并且有效，但它当然不是全屏。我需要显示 RootView 控制器。

有人能帮我吗？或者，如果您需要更多信息，请告诉我！iPhone 4S、Mac OS X (10.7.3)、XCODE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:11:47.070

您需要将 RootViewController.m 添加到抱怨的项目中。RootViewController.h 本身不起作用。

# java - Java 固定字段文件格式

> ID：10229476
> 
> 赞同：-1
> 
> 时间：2012-04-19T13:47:32.390
> 
> 标签：java, ascii, marshalling, field, fixed

我想知道对于**固定字段 ascii 文本格式**是否存在类似 JAXB 的东西。对于将 java 对象编组为固定字段 ascii 文本文件（如 JAXB 和 XML）非常有用。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:50:10.397

我找到了这个，我认为这正是我所需要的。请注意，需要 commons-lang 但不是最新版本，我必须使用旧版 v.2.6，否则我找不到 StringUtils。

[http://fixedformat4j.ancientprogramming.com/usage/index.html](http://fixedformat4j.ancientprogramming.com/usage/index.html)

# android - 吐司定位不起作用

> ID：10229480
> 
> 赞同：1
> 
> 时间：2012-04-19T13:47:43.217
> 
> 标签：android, android-layout, android-intent

我厌倦了这段代码：

```
Toast toast = new Toast(this); 
            toast.setText("Please enter your User-Id");
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.show(); 
```

但是吐司仍然显示在底部，这是默认设置。即使下面的这个也不起作用：

```
toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0); 
```

请帮忙。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:54:02.373

您不应该使用 Toast 类的构造函数。

请执行下列操作：

```
Toast toast = Toast.makeText(this, "Please enter your User-Id", Toast.LENGTH_LONG);
toast.setGravity(Gravity.CENTER, 0, 0);
toast.show(); 
```

# c++ - 当我删除基类的指针时“删除”如何工作

> ID：10229481
> 
> 赞同：1
> 
> 时间：2012-04-19T13:47:49.750
> 
> 标签：c++

```
#include <iostream>

using namespace std;
int *p1;
struct base
{
    base():a(10){}
    int a;
    ~base()
    {
        cout << "~base()\n";
    }
};

struct derive:public base
{
    derive():b(5){

        p1=&b;
        cout << p1 << "\n";

    }
    int b;
    ~derive()
    {
        cout << "~derive()\n";
    }
};
int main()
{
    base *p = new derive;
    delete(p);
    cout << *p1;
    return 0;
} 
```

我认为派生的 b 不应该被删除，但是 p1 指向的被删除了。当我删除未发生动态继承时指向派生类的基类指针时，它是如何工作的？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:53:42.867

这是**未定义的行为**，因为基类析构函数不是`virtual`。UB 意味着任何事情都可能发生。

如果基类没有虚拟析构函数，则不要通过基类删除派生对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:54:14.257

对以下代码有什么期望

```
base *p = new derive;
delete(p); 
```

是 p 指向的派生对象被正确清理。这只能在基类具有虚拟析构函数时完成。这不是这里的情况，因此在派生析构函数中发生的任何清理都不会发生，这是一种不健康的情况（或者正如 Luchian 在技术上所说的：未定义的行为）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T13:56:56.033

我不是 100% 我理解这个问题，自从我使用 c++ 以来已经有一段时间了，但我会试一试。

一般来说，如果你有一个要动态分配的对象，你需要有 3 个东西，我的老师曾经称之为“邪恶三部曲”。

1.  复制构造函数
2.  赋值运算符
3.  虚拟析构函数

前两个与制作“深拷贝”有关，而第三个是我们所关心的。

您需要将析构函数标记为虚拟以将其添加到对象虚拟表中，这样析构函数将调用一个链。

所以：

```
class A
{
    public A(A & copy) { ... }
    public static A & operator = (A & rhs) { ... }
    virtual ~A() { ... }
}

class B : A { } // inherits A's destructor via virtual table 
```

# asp.net-mvc - 为什么 ModelState.IsValid 为假，因为条件为真？

> ID：10229483
> 
> 赞同：0
> 
> 时间：2012-04-19T13:47:58.267
> 
> 标签：asp.net-mvc

在 HomeController.cs

```
[HttpPost]
public ActionResult Index(SecurityMappingModel objModel)
{

    //edit code

    if (objModel.Id != Guid.Empty)
    {
        if (ModelState.IsValid)
        {
            mappings = (List<SecurityMappingModel>)Session["Mappings"];
            var objRemove = mappings.FirstOrDefault(m => m.Id == objModel.Id);
            if (objRemove != null)
            {
                mappings.Remove(objRemove);
                mappings.Add(objModel);
                ViewBag.Mappings = mappings;
            }
            Session["Mappings"] = mappings;
return RedirectToAction("Index");
} 
```

在 objModel 内部，其中一个字段的值为 0，因为它是一个文本字段，我正在将值放入其中，但在 Controller oject objModel 内部显示该字段值为 0 :( :( 为什么？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T13:49:06.947

```
if (yourGuid != Guid.Empty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:11:43.960

我也遇到过这种错误。

也许您的问题的解决方案是在您的 Home.cshtml 视图中放置这样的代码：

```
@Html.HiddenFor(model => model.Id) 
```

# iphone - 显示和隐藏键盘时调整表格视图的大小

> ID：10229487
> 
> 赞同：1
> 
> 时间：2012-04-19T13:48:07.130
> 
> 标签：iphone, ios, uitableview, keyboard, uitextfield

我有一个带有 UITableView 和 UITextField 的视图控制器。我订阅了有关键盘何时打开和关闭的通知，并使用有关键盘高度的信息来调整 UITableView 和 UITextField 的大小和位置。

但我有两个问题。

当键盘打开时， UITextField 似乎会自动重新定位 - 如果它定位正确，那就没问题了。它的垂直偏移似乎与 Tab Bar Controller 的高度相同。

如何禁用 UITextField 在键盘打开时尝试重新定位它？

第二个问题是，当键盘打开时，UITableView 的表格部分似乎太长了——我可以滚动到表格中最后一个元素的下方（我猜类似于键盘的高度）。打开键盘时，我像这样设置 UITableView 的新高度（kbSize 是键盘的大小）：

```
CGSize size = self.view.frame.size;
self.tableView.frame = CGRectMake(0,0f, 0,0f, size.width, size.height - kbSize.height); 
```

我在这里想念什么？我是否需要以某种方式设置桌子的“高度”而不仅仅是框架？

谢谢， 奥莱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:12:39.623

如果您在键盘显示时将父类更改`UIViewController`为`UITableViewController`调整视图大小，则操作系统将完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:22:19.983

您只需使用 1 个 viewcontroller 类并在弹出键盘时放入 tableview 开玩笑地将 viewcontroller 框架设置为 y = y-140 ...... 像这样

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.view cache:YES];

    scrollView.frame = CGRectMake(0, -140, 320, 460);
    [UIView commitAnimations];
    return YES;
}
-(BOOL)textFieldShouldReturn:(UITextField *)textField{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.view cache:YES];
    scrollView.frame = CGRectMake(0, 0, 320, 460);
    [UIView commitAnimations];
    [textField resignFirstResponder];
    return YES;
} 
```

# java - 是否可以在 Eclipse 中使用 Emma 覆盖工具来忽略某些行？

> ID：10229489
> 
> 赞同：0
> 
> 时间：2012-04-19T13:48:10.673
> 
> 标签：java, eclipse, emma

使用单元测试查看每个测试的覆盖率时，我在 Eclipse 中使用 Emma 覆盖率工具。但是，某些行不会立即覆盖抽象类中的类声明：

```
public abstract class ... { 
```

是否有可能让艾玛覆盖这条线，或者 - 最好 - 忽略它？

谢谢，阿列克谢蓝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:29:28.260

Emma 已经忽略了无法到达的行，例如类声明。它们未标记为已覆盖，但也不计入总行数。

我刚刚用这段代码验证了它：

```
import junit.framework.TestCase;
public class Test extends TestCase {

    public void testSomething() {

        assertTrue(new Check().check());
    }   
}
abstract class AbstractCheck {

    protected abstract boolean check();
}
class Check extends AbstractCheck {

    @Override
    protected boolean check() {
        return true;
    }
} 
```

它返回 100% 的覆盖率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:31:04.780

我有一个抽象类，它有一堆静态方法，但没有别的。类声明未涵盖。我在 JUnit 测试方法中添加了这个：

```
new AbstractClass() {

}; 
```

类声明被覆盖。但是，在 JUnit 测试之外覆盖它是另一回事，因为没有子类。

# php - 如何将artbitrary数字转换为rgb颜色？

> ID：10229492
> 
> 赞同：4
> 
> 时间：2012-04-19T13:48:13.357
> 
> 标签：php, colors

我有一个拥有大约一百个用户的应用程序。我们有一个日历视图，其中每个用户都可以有多个条目。同一个用户的每个条目应该有相同的颜色，但不同的用户应该有不同的颜色。目前我们在一个数组中手动​​定义了大约 25 种颜色，用户获得的颜色由

```
$color = $colors[$userid % count($colors)]; 
```

我们不想为每个新用户手动添加颜色，为每个用户选择颜色似乎也有点乏味。

是否有一个简单的函数可以将数字（用户 ID）映射到颜色（最好是 RGB）？下一个问题是；有没有办法将功能限制为特定类型的颜色（即只有白色字母可读的颜色）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:00:08.837

我本身没有解决方案，但有一个建议。

首先，由于您希望每个用户的颜色都是唯一的但随机的，您可以从某种数字哈希函数开始。这会给你一个很可能是唯一的随机数。如果您的散列函数不错，并且您的用户有数百个就足够了。

现在你需要把它变成颜色，最好是在光谱的暗端。如果您使用 RGB，则需要三个数字。为了使它们保持黑暗，假设您将总数或 R、G 和 B 保持在 200 以下。当然，这是一个猜测，但它应该很暗。选择一个介于 1 和 3 之间的随机数 [index] - 这就是您要开始的 R、G 或 B。获取一个介于 0 到 200 之间的数字，并将其设置为 color[index1]。现在选择剩余的索引之一，1-3。为此，请选择一个介于 0 和 color[index1] 之间的数字。将剩余数量设置为 200-color[index1]-color[index2]。现在你有一个随机的 RGB 值，应该与白色形成对比。

我意识到我从来没有从那个哈希函数中得到太多用处——也许放弃它，只是使用用户 ID 作为随机（种子）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:58:19.610

您想在色调饱和度亮度或色调饱和度值（HSL 或 HSV）空间中工作。

[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

首先根据色调和饱和度定义一些颜色，并将亮度设置为使文本可读的最高可容忍级别。

然后您可以修复这些颜色的色调和饱和度并降低​​亮度。

因此，假设您从选择 25 种具有不同色调和最大/最小可容忍亮度的可容忍颜色开始。

要为索引生成颜色，请选择基色开始，`base = id % 25`然后根据该颜色中的索引降低亮度`index = (Math.floor(id/25))`。根据该值将亮度设置在可容忍的亮度范围内。所以假设我们每种颜色有 5 个亮度值，将亮度设置为

```
lightness = maxLightness - index*(maxLightness / 4*minLightness) 
```

这只是改变每种颜色的亮度。如果您愿意，可以选择稍微改变饱和度和色调。HSV 和 RGB 之间的转换是一个有据可查的过程。

[PHP HSV转RGB公式理解](https://stackoverflow.com/questions/3597417/php-hsv-to-rgb-formula-comprehension)

# xml - XPATH - 识别文本后选择/查找表中的下一个元素

> ID：10229496
> 
> 赞同：0
> 
> 时间：2012-04-19T13:48:26.653
> 
> 标签：xml, xpath, selenium

抱歉，我是 XPath 和 XML 的新手，但是当我在 Selenium 工作时，我需要一些帮助来通过 XPath 识别元素。由于我正在处理的页面内容更改位置，我首先需要按名称选择顶级 - 然后按位置选择后续子菜单...（隐藏子菜单，直到单击顶级）

示例菜单

Sport1
  场地 1
    比赛 1
    比赛 2
    比赛 3
  场地 2
    比赛 1
    比赛 2
    比赛 3
Sport2
  场地 1
    比赛 1
    比赛 2
  场地 2
    比赛 1
    比赛 2

到目前为止`//a[text()='Sport2']` ，将选择（并扩展）sports2 - 它位于菜单中的任何位置。

并将`//li[2]/ul/li[2]/ul/li[2]/a` 选择 2nd Sport、2nd Venue 然后 2nd Race。

但是我需要的是能够通过文本（如`//a[text()= 'Sports2']`）选择运动，然后选择第二个场地，然后选择第二场比赛......（我想按位置来做这些，因为名字每天都在变化）

我正在尝试的`//a[text()= 'Sports2']/li[2]/ul/li[2]/a`（并且不起作用）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:56:09.813

在可以清晰、轻松地看到 html 代码之前，我只能给您一般建议：

如果您使用的是`WebDriver`（Selenium 2），您可以找到一个元素，然后在其上调用[findElement()](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#findElement%28org.openqa.selenium.By%29) - 这只会搜索底层节点，而不是整个文档：

```
WebElement elem = driver.findElement(By.xpath("//a[text()='Sport2']"));
elem.findElement(By.xpath("./something[something()]")); 
```

如果你不是，那么也许这（来自[XPath 1.0 规范](http://www.w3.org/TR/xpath/)）会有所帮助：

> 位置路径与位置路径`//para[1]`的含义不同`/descendant::para[1]`。后者选择第一个后代 `para`元素；前者选择作为其父母`para`的第一个孩子的所有后代元素。`para`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:45:55.657

一种方法是完全利用与**FindElement**或*By.XPath 相对**的*FindElements 。你可以做到这一点的方式（我决不建议它作为最好的方式，因为它相当凌乱和过度）是首先关注你想要的元素，然后将它们全部抓住。为此，请运行您的代码，如下所示：

 *```
IWebElement sport2 = driver.FindElement(By.XPath("//a[text()= 'Sports2']"));
ReadOnlyCollection<IWebElement> Venues = driver.FindElements(By.XPath("//a[text()= 'Venue']"));
ReadOnlyCollection<IWebElement> Races = Venues[1].FindElements(By.XPath("//a[text()= 'Race']"));
// now you want Races[1] 
```

希望这可以帮助！尽管正如其他人所说，html 将有助于获得更有效的答案。*

# javascript - 动态复选框被重置？

> ID：10229499
> 
> 赞同：0
> 
> 时间：2012-04-19T13:48:40.467
> 
> 标签：javascript, jquery, checkbox, fullcalendar

我显示了一个完整的日历，并在其名称旁边显示了一个带有复选框的资源列表。他们的复选框正确显示，如果我不对他们做任何事情，他们会像往常一样保持检查状态。但是，当我用 jquery 调用 fullcalendar 并去添加或删除资源时，复选框在运行 jquery/fullcalendar 函数后会取消选中。

这是我创建复选框的方式：

```
$(document).ready(function() {

for(p in dsnrs){
            $('#specialists').append(
            '<input type="checkbox" name="designer" id="' + dsnrs[p].name +'" onChange="addOrRem(dsnrs['+p+'] )" />' +dsnrs[p].name+ '<br />');
        }
}); 
```

这是我添加/删除日历资源的功能

```
function addOrRem(spec){
    //alert("Specialist: " + spec.name + ", Checked: " +document.getElementById(spec.name).checked);
    if(document.getElementById(spec.name).checked==true){
        remRes(spec.id);
        addRes(spec);
    }if(document.getElementById(spec.name).checked=false){
        remRes(spec.id);
    }
}
function addRes(spec) {
    $('#calendar').fullCalendar( 'addEventResource', spec );
}

function remRes(id) {
    $('#calendar').fullCalendar( 'removeEventResource', id);
} 
```

这是相关的HTML

```
<div id='designersbox' style='float:left;margin-top:5px'>
   <div id='specialists' onload='specList()'></div>
    <a href="#" onClick="addRes()">Add resource</a>
    <a href="#" onClick="remRes()">Remove resource</a>
</div>
<div id='calbox' style="width:1000px;height:900px;position:relative;float:left;margin-bottom:10px; padding:10px">
    <div id='calendar' style="float:left;height:1000px;width:1000px;"></div>
</div> 
```

我不太确定为什么复选框会被重置。如果我注释掉对添加/删除函数的调用并发出警报，它们就可以正常工作。任何帮助或线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:00:44.910

添加了一个 var，checked = document.getElementById(spec.name).checked;

似乎解决了这个问题。我不确定它为什么起作用，但是用 check==true/false 替换 if 语句而不是不使用变量解决了这个问题。

新功能：

```
function addOrRem(spec){
    //$(":checkbox[value=designer]").attr("checked", true);
    //alert("Specialist: " + spec.name + ", Checked: " +document.getElementById(spec.name).checked);
    var checked = document.getElementById(spec.name).checked;
    if(checked==true){
        remRes(spec.id, '#calendard');
        addRes(spec, '#calendard') ;
    }if(checked==false){
        remRes(spec.id, '#calendard');
    }
} 
```

# git - CVS 到 Git 迁移的具体业务案例有哪些？

> ID：10229501
> 
> 赞同：0
> 
> 时间：2012-04-19T13:48:40.617
> 
> 标签：git, svn, version-control, cvs

我被要求证明将一个小团队从 CVS/SVN 转移到 git 是合理的。

到目前为止，从我的阅读中，我可以确定三个主要好处：

*   速度
*   轻松分支
*   分散式
*   SVN 不提供的更多功能（部分文件提交、暂存等...）

## 速度

由于它的速度，有[一些支持 git 的论据](http://thinkvitamin.com/code/why-you-should-switch-from-subversion-to-git/)，但是，对于提到 Git 的卓越速度的常见回应是 3 秒和 13 秒之间的差异可以忽略不计。

一个真实的例子：

> 我白天做大量工作，晚上回家前完成稳定的工作。
> 在一个大型提交中，我添加了数百个文件以及更改、移动和重构现有文件，CVS 将在我穿上外套并整理我的办公桌之前执行提交。这与 git 有何不同？

## 轻松分支

Git 的分支被许多人称赞为它的强项之一。然而，对于许多工程师来说，CVS/SVN 中的分支似乎就足够了，尤其是使用现代 IDE，无论实际使用哪种 RCS，它都能使整个体验和工作流程几乎相同。

> 当我想尝试一个想法时，我在 Eclipse 中右键单击我的项目节点，选择“切换到不同的分支”，选择“新建”，输入名称然后我就走了，提交和更新而不会“污染主线”为CVS 显然可以。当我确定这个分支中的新想法稳定且良好时，我再次右键单击该项目，选择“与另一个分支或版本合并”，选择 HEAD，我们又回到了 HEAD，但已经实现了工作更改......如何git会改善我的体验吗？

## 真正分布式

使用分布式 RCS 的主要优势似乎是灾难恢复。然而，类似的属性在 CVS 和 SVN 中也是固有的。对于标准实践用法尤其如此：

> 现在我认为这是标准做法，早上要做的第一件事是检查存储库是否有过夜所做的任何更改，并在需要时进行更新/合并，如果我今晚回家发现我的存储库已被烧毁到早上起来，我会迷路的……嗯……什么都没有。我会创建一个新的存储库，将我的本地文件提交到服务器，其他 5 名员工也会这样做，可能会有一些合并大惊小怪，但不会超过我们提交本地更改的情况一个已经存在的服务器，我们又离开了。没什么大不了。

**GIT 分期**

另一个经常提到的功能是暂存区。这在 SVN/CVS 中没有等价物，并且允许开发人员“制作他的提交”以包含在您想要的文件中。 

通常，当提到这一点时，我只会想到变更集。**暂存区有何不同？**

* * *

事实上，我什至看到了使用 Git 的一些**缺点：**

*   本地提交意味着丢失代码的可能性更大，因为我的开发机器比我们的 SVN 服务器更容易受到攻击，而且在我将其推送到我们的公共存储库之前，我的工作处于危险之中。
*   离线工作没有明显的优势，因为大多数开发人员永远不会离线工作。

我觉得好像我一定遗漏或误解了 git 的一些基本知识，并且很难证明切换的商业案例的合理性。我非常感谢您的意见，以更好地理解所涉及的问题，特别是如果您能确定具体的用例，在这些用例中 git 将是一个比 CVS/SVN 从根本上优越的解决方案，而不是简单的渐进式更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:36:54.713

正面击中你的高水平点：

1.  速度是锦上添花
2.  当人们说“容易分支”时，他们实际上的意思是“容易合并”。CVS 并没有真正进行合并，Subversion 开发人员已经承认它的合并方法很糟糕，并且一直保持这种状态。
3.  暂存、部分文件提交等。这些是 Git 支持合并的结果偶尔带来的便利。同样，我认为这本身不是“核心”优势。

要了解真正的优势，Git 让您停止摆弄来回纠缠代码的机制，而专注于您想要的代码在哪里。稳定内核版本的开发和各种长期存在的功能分支就是例证。开发人员的艰苦工作是决定要合并哪些代码。一旦做出决定，这样做的机械过程将由计算机处理。

在具有多个分支的 CVS 上存在问题并且在 Git 中微不足道的最简单的事情之一是修复错误或跨多个分支传播一些其他更改。假设您对主线或一个客户分支进行了更改。在一些 QA 和现场测试之后，您决定其他 3 个客户分支机构也应该得到修复。在 CVS 中，这是一个类似于

1.  `cvs log`固定分支，以识别修复错误的修订版 AB
2.  `cvs diff -rA:B > bugfix.patch`保存更改，以便您可以重新应用它们
3.  `cvs update`到另一个分支
4.  `patch -p1 -i bugfix.patch`应用更改
5.  `cvs commit`记录变化。
6.  对要修复的每个分支重复步骤 3-5。

第 4 步和第 5 步很容易出错，尤其是在存在合并冲突的情况下。除非您非常自律，否则不会记录错误修复首先发生的位置，或者任何容易将其与其他分支相关联的记录。请注意，步骤 1、2、3 和 5 都涉及到与服务器的对话，对于使用 Git 的人来说，这似乎非常缓慢。

相比之下，使用 Git：

1.  `git log`固定分支以识别修复错误的修订 C
2.  `git checkout`要修复的分支
3.  `git cherry-pick C`应用修复。
4.  对要修复的每个分支重复步骤 2 和 3。
5.  `git push`

cherry-pick 步骤将在提交消息中记录错误修复来自哪个提交，以便以后轻松查找。如果存在合并冲突，您必须第一次解决它们，但如果是相同的冲突，Git 的 'rerere' (REpeat REmembered REsolution) 会在之后自动为您解决，从而避免出错的机会。此过程中只有第 5 步涉及与服务器通信，而且速度非常快，因为 Git 确切地知道它需要通过网络发送的最少数据。

For new feature development, Git offers even more power. You can do your work on a branch, without risking messing other people up with your work in progress, and then when it's done, merge that branch to wherever you want. This is the real power of Git, that people who've only used CVS or SVN don't appreciate. `git merge` actually works, and works extraordinarily well. If you want that feature on several branches, you can merge it to each of them, and history will accurately reflect that they all descend from that one feature branch.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:00:12.910

如果您使用 git 的时间足够长，您就会开始意识到它实际上更方便。我没有使用 CVS 的任何经验，但我使用过 SVN（其座右铭是“CVS 做得对”）。

首先，Git 的分布式特性确实是一件幸事。如果不将您的工作推送到另一个存储库（例如 GitHub），您将无法工作一周，因此如果您的计算机发生故障，您并不会真正丢失您的工作。

你所说的“如果我的回购死了，我会创建另一个”有一个问题。你失去了所有的历史！这意味着你之前的所有提交、发布等都消失了。它不像你想象的那么舒服。

此外，您每天提交一次，而我们中的许多人每天执行许多提交。事实上，许多较小的提交更易于管理，并且在出现错误时更容易恢复。使用 Git，每次提交都很快。使用 Svn，所有这些都通过网络和 ssh，这需要更多时间。

集中式存储库还有其他一些不太方便的东西。例如，如果您有一个包含版本化+未版本化内容的目录，那么在 Git 中重命名它很简单。使用 svn 重命名它需要您编写存储库的整个地址（两次）以避免错误地对未版本化的文件进行版本控制。这总是伴随着提交。如果您正在重新组织几个目录，那么您将有尽可能多的无用提交。

在 SVN 中，如果您添加几个文件并提交，然后执行`svn ls`，除非您`svn update`. 但是在 Git 中，由于您拥有存储库，因此不需要这些东西。

最后，它们都起作用了，所以你找不到任何一个重大缺陷，所以你可以转移到另一个。然而，这是一个方便的问题（至少对我来说）。如果你为 Windows 编程，当然你可以做任何事情，但是一旦你在 Linux 中做同样的事情，你会感觉好多了，因为很多事情都变得更有意义了。就像我说的，它们都可以工作，但有些设计更好。我相信 Git vs CVS 或 SVN 就是这种情况。

* * *

我的建议是，试试 Git。使用它一段时间。尝试它的不同功能，几个月后你会得出结论，你更喜欢 Git 还是 CVS。

# php - Wordpress 格式问题 - 存档和间距

> ID：10229503
> 
> 赞同：0
> 
> 时间：2012-04-19T13:48:45.070
> 
> 标签：php, javascript, html, wordpress

所以希望你们能帮助我解决这个谜题，因为我不知道如何解决这个问题。

几个月前，我们更新了我们的网站和博客，为此我复制了数据库和所有旧帖子。但是，出于某种原因，超过 2 年的帖子存在格式问题。整个博客没有正确间隔，而是捆绑在一起。您可以在下面看到一个示例。

[例子](http://www.changecompanies.net/preview/blog/?m=200605)

现在查看帖子，我可以看到没有 html 来表示分段符，它通常看起来像一个文本文档，其中只有几个标签。我一直在手动浏览这些帖子，在必要时添加标签和正确的标签，显然这非常耗时，而且由于有多年的旧博客最终需要更新，我正在寻找一种方法来简化这个问题.

我的理论是，旧网站上有一些 wordpress 插件（我没有管理这个），它修复了格式问题并正确显示了帖子，但是在某个地方它被搞砸了。

有没有人有关于如何修复甚至加快这个过程的建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:58:04.483

好吧，经过几个小时的修补和研究，我想我找到了一种让这个过程更快的方法。我仍然需要手动编辑一些帖子，但至少现在看来我不必重新添加这些`<br>`标签。

这是我找到的资源。 [PS禁用自动格式化](http://wordpress.org/extend/plugins/ps-disable-auto-formatting/installation/)

这是我为加快进程所做的。我应该**注意****备份您的 Wordpress 数据库以执行此**操作是个好主意！

 **1.  下载插件并安装它。

2.  激活插件

3.  转到插件选项屏幕并取消选中标题为“内容格式”的框基本上启用它

4.  转到批处理格式并选择旧帖子开始的日期并选中“允许批处理格式”

5.  单击批量格式化，该插件将格式化您的旧帖子，在适当的地方放置`<br>`标签并在适当的地方放置间距。

6.  浏览到其中一个已编辑的帖子，您会看到它看起来很混乱和奇怪，没关系，不用担心！

7.  现在前往您的插件页面并**停用**插件。停用插件后返回您的一篇帖子，您会看到帖子现在格式正确！

8.  对帖子进行任何其他编辑并点击**更新**，您的旧帖子现在应该再次修复。

这个解决方案并不完美，但从长远来看它会节省我的时间。

谢谢，祝你好运。**

# c++ - 使用 Visual Studio Express 和 SDL2 在 Windows 中破坏 SDL_mixer 2 编译

> ID：10229508
> 
> 赞同：0
> 
> 时间：2012-04-19T13:48:58.527
> 
> 标签：c++, windows-xp, compiler-errors, sdl, sdl-mixer

我试图用 SDL2 编译 SDL_mixer 2 从：
[http](http://hg.libsdl.org/SDL_mixer)
://hg.libsdl.org/SDL_mixer 中检查了最新代码， SDL2 和 SDL_image 也没有问题编译。

编译 SDL_mixer 时出现编译错误：

```
1>Compiling...
1>dynamic_mp3.c
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ')' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2371: 'SDL_Rect' : redefinition; different basic types
1>        d:\cpp\2d\love\lov8\lib\sdl\include\sdl_rect.h(69) : see declaration of 'SDL_Rect'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2371: 'SMPEG_FilterInfo' : redefinition; different basic types
1>        d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(33) : see declaration of 'SMPEG_FilterInfo'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2059: syntax error : 'type'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2059: syntax error : ')'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(46) : error C2061: syntax error : identifier 'SMPEG_FilterCallback'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(48) : error C2059: syntax error : '}'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(56) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(59) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(62) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing ')' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2081: 'SMPEG_Filter' : name in formal parameter list illegal
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2059: syntax error : ')'
1>mixer.c
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ')' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2371: 'SDL_Rect' : redefinition; different basic types
1>        d:\cpp\2d\love\lov8\lib\sdl\include\sdl_rect.h(69) : see declaration of 'SDL_Rect'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2371: 'SMPEG_FilterInfo' : redefinition; different basic types
1>        d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(33) : see declaration of 'SMPEG_FilterInfo'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2059: syntax error : 'type'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2059: syntax error : ')'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(46) : error C2061: syntax error : identifier 'SMPEG_FilterCallback'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(48) : error C2059: syntax error : '}'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(56) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(59) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(62) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing ')' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2081: 'SMPEG_Filter' : name in formal parameter list illegal
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2059: syntax error : ')'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\mixer.c(129) : warning C4090: 'function' : different 'const' qualifiers
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\mixer.c(1145) : warning C4090: 'function' : different 'const' qualifiers
1>music.c
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ')' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2371: 'SDL_Rect' : redefinition; different basic types
1>        d:\cpp\2d\love\lov8\lib\sdl\include\sdl_rect.h(69) : see declaration of 'SDL_Rect'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2371: 'SMPEG_FilterInfo' : redefinition; different basic types
1>        d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(33) : see declaration of 'SMPEG_FilterInfo'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2143: syntax error : missing ';' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2059: syntax error : 'type'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(39) : error C2059: syntax error : ')'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(46) : error C2061: syntax error : identifier 'SMPEG_FilterCallback'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(48) : error C2059: syntax error : '}'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(56) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(59) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\mpegfilter.h(62) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing ')' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2081: 'SMPEG_Filter' : name in formal parameter list illegal
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2143: syntax error : missing '{' before '*'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\visualc\external\include\smpeg.h(180) : error C2059: syntax error : ')'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\music.c(166) : warning C4090: 'function' : different 'const' qualifiers
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\music.c(625) : warning C4047: 'return' : 'Mix_Music *' differs in levels of indirection from 'int'
1>d:\cpp\2d\sdl2.0\sdl-2.0\sdl_mixer\music.c(1529) : warning C4090: 'function' : different 'const' qualifiers 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:02:35.347

Take a look at the PreProcessor Definitions.

Remove these

```
MOD_MUSIC
MOD_DYNAMIC=\"libmikmod-2.dll\"
OGG_MUSIC
OGG_DYNAMIC=\"libvorbisfile-3.dll\"
FLAC_MUSIC
FLAC_DYNAMIC=\"libFLAC-8.dll\"
MP3_MUSIC
MP3_DYNAMIC=\"smpeg.dll\" 
```

If you want to use any of those file types in your audio, you need to get those .dll files as well. I would recommend compiling those libraries statically instead of dynamically to make thing more cross-platform compatible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:07:02.393

我认为您可以删除 MP3_MUSIC 预处理器宏或在搜索路径中包含 smpeg。

# wpf - 如何序列化其源在运行时设置的图像控件？

> ID：10229509
> 
> 赞同：1
> 
> 时间：2012-04-19T13:49:01.870
> 
> 标签：wpf, serialization, wpf-controls

我有一个包含几个控件的网格，最重要的是三个图像控件。我需要复制这个网格。通过将 XAML 保存在 MemoryStream 中进行序列化似乎没有帮助，因为显然，当我在运行时在后面的代码中设置图像控件的源时，此更改不会反映在 XAML 设计器代码中。[技术上是这样，但作为

```
<Image.Source> System.Windows.Interop.InteropBitmap</Image.Source> 
```

我得到了一些奇怪的异常] 那么，我怎样才能序列化我的 Image 控件？更一般地说，我如何克隆我的 Grid 控件以反映加载窗口后对 UI 的任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:06:36.973

如果我正确理解了您的问题，我认为您只需要在运行时创建网格的克隆。如果是这样，请查看这些线程 [如何克隆 WPF 对象？](https://stackoverflow.com/questions/32541/how-can-you-clone-a-wpf-object)

[http://social.msdn.microsoft.com/Forums/en-HK/wpf/thread/e1a63ed2-a432-4c46-8f3b-4f172702cd7c](http://social.msdn.microsoft.com/Forums/en-HK/wpf/thread/e1a63ed2-a432-4c46-8f3b-4f172702cd7c)

**使用此函数克隆对象**

```
public static T DeepClone<T>(T from)
    {
        using (MemoryStream s = new MemoryStream())
        {
            BinaryFormatter f = new BinaryFormatter();
            f.Serialize(s, from);
            s.Position = 0;
            object clone = f.Deserialize(s);

            return (T)clone;
        }
    } 
```

上述功能是由[大角星](https://stackoverflow.com/users/900/arcturus)

# actionscript-3 - 在 2 个 actionscript3 文件 (.as) 之间传递变量

> ID：10229512
> 
> 赞同：-1
> 
> 时间：2012-04-19T13:49:05.030
> 
> 标签：actionscript-3

如何在 2 个 actionscript3 文件 (.as) 之间传递变量？

我有一个主要的 fla 文件和 3 个作为文件，每个都有一个类...我在 AS2 中有一个基本的 knownelge，但在 AS3 中没有太多

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:09:34.300

您似乎正试图从 Flash 中的任何位置访问一些变量。一种方法是使用静态方法和变量创建一些类。例如：

```
package somenamespace {

    class Registry {

        static private var something_:String;

        public function get something():String {
            return something_;
        }

        public function set something(v:String):void {
            if (something_ === v) return;
            something_ = v;
        }

    }

} 
```

然后您可以从 Flash 中的任何位置访问此变量：

```
Registry.something = "example"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:09:17.717

在类之间传递数据的正确方法是通过引用传递。这比在全局范围内维护数据要好，因为它允许您解耦您的类。

如果没有看到你的类和你试图传递的数据，很难给你具体的建议，但这里有一个使用文档类 (Main.as) 和子类 (Child.as) 的简单示例：

主要作为：

```
package {
    class Main extends MovieClip
    {
        private var someData:String;
        //constructor
        function Main()
        {
            //create the data
            someData = "my string";

            //create an instance of child
            var child:Child = new Child(someData);
        }
    }
} 
```

孩子.as:

```
package {
    class Child
    {
        private var someData:String;
        //constructor
        function Child(initData:String)
        {
            someData = initData;
            trace(someData); // my string
        }
    }
} 
```

听起来在您的情况下，您需要一个控制器类来实例化您拥有的类并管理它们之间的关系。这将是上面 Main 类的变体，实例化所有三个类并提取和传递它们的数据。

# c++ - 如何在不重复 C++ 中的值的情况下随机组合两个数组

> ID：10229514
> 
> 赞同：1
> 
> 时间：2012-04-19T13:49:24.943
> 
> 标签：c++, arrays, combinatorics, shuffle

我有两个数组：

```
array1( 'Apple',
        'Pear',
        'Banana',
        'Apricot',
        'Watermelon',
        'Peach',
        'Pineapple',
        'Strawberry',
        'Melon',
        'Pomegranate',
        'Oranges',
        'Tangerine' ); 
```

一个橘子的大小……嗯！我就是忍不住。真是太有趣了……现在让我们回到第二个数组。

```
array2( 'Fruits On Table',
        'Fruits In Basket',
        'Fruits In Fridge' ); 
```

我想生成一个列表或一个数组或一个字符串，任何可以有橘子大小的东西......

可以随机合并这两个数组而不重复第一个数组的东西。这会是这样的：

```
Tangerine( 'Tangerine - Fruits In Fridge',
           'Apple - Fruits On Table',
           'Pear - Fruits In Basket',
           'Peach - Fruits In Fridge',
           'Apricot - Fruits On Table',
           'Oranges - Fruits In Basket',
           'Melon - Fruits In Fridge',
           'Watermelon - Fruits On Table',
           'Pineapple - Fruits On Table',
           'Pomegranate - Fruits In Basket',
           'Strawberry - Fruits In Fridge',
           'Banana - Fruits In Basket' ); 
```

如果你仔细看，它们是从两个数组中随机选择的，并在不重复第一个数组的情况下合并在一起。

那么我怎么能用 C++ 做到这一点呢？我是 C++ 的新手

还有一个关于它的小算法会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:59:45.033

您可以将[random_shuffle](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)应用于第一个数组中的元素。然后遍历这些，从第二个数组中获取随机元素。[例如，您可以使用uniform_int_distribution](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution)生成 0、1、2 的随机数分布。或者你可以省略第二个数组元素的随机化，只按顺序选择它们，然后随机输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:55:07.703

您可以[`std::map`](http://en.cppreference.com/w/cpp/container/map)将第一个数组中的字符串用作键，将组合字符串用作值。即使你的随机化器创建了一个与你已经使用过的水果相同的字符串，它仍然只是地图中的那个水果之一。

如果您这样做直到地图中的条目数与水果数相同，则您拥有所有水果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:56:53.833

您可以实现数字零到 的[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)`N`，其中`N`是 中的项目数`array1`，然后将 的项目`array1[fyPermutation[i]]`与 的随机项目组合`array2`。

```
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <map>
#include <vector>
#include <fstream>
#include <iterator>
#include <algorithm>
#include <list>
#include <sstream>
#include <iostream>
#include <bitset>
#include <ctype.h>

using namespace std;

const char *array1[] = {
    "Apple", "Pear", "Banana",  "Apricot",
    "Watermelon", "Peach", "Pineapple", "Strawberry",
    "Melon", "Pomegranate", "Oranges", "Tangerine"
};

const char *array2[] = {
    "Fruits On Table", "Fruits In Basket", "Fruits In Fridge"
};

vector<int> random_permutation(int n) {
    vector<int> p(n);
    for (int i = 0; i < n; ++i) {
        int j = rand() % (i + 1);
        p[i] = p[j];
        p[j] = i;
    }
    return p;
}

int main(int argc, const char* argv[]) {
    size_t N1 = sizeof(array1)/sizeof(array1[0]);
    size_t N2 = sizeof(array2)/sizeof(array2[0]);
    vector<int> perm = random_permutation(N1);
    vector<string> res;
    for(int i=0 ; i != N1 ; i++) {
        res.push_back(array1[perm[i]] + string(" - ") + array2[rand() % N2]);
    }
    for(int i=0 ; i != res.size() ; i++) {
        cout << res[i] << endl;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T14:05:21.833

你可以像现实生活中的人那样做。您可以将数组视为随机选择的袋子，并在每次选择后删除该项目。这样你就不可能两次采摘水果了！如果您不想损坏原始数组，您可以制作一个副本并将其用作“包”...

当然，天真地做这些事情会有很多性能问题：

[获取随机元素并将其删除](https://stackoverflow.com/questions/9218724/get-random-element-and-remove-it)

[如何在 std::set 中选择随机元素？](https://stackoverflow.com/questions/3052788/how-to-select-a-random-element-in-stdset)

...但是如果您不了解它们是什么以及为什么要避免它们，那么直接跳到 StackOverflowers 提出的复杂的洗牌解决方案似乎有点......可疑。:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T14:19:40.947

您需要一些可以有效地为 array1 中的每个字符串洗牌的东西。这将是一个指针，因此为 array1 中的每个字符串创建一个并将它们存储在一个数组中 - 您必须将 malloc() 数组调整为正确的大小以保存 sizeof(array1) 指针。

随机改组指针数组是一种常见的算法，您可以轻松地在 Google 上搜索它。基本上，取第一个元素并将其与上面的随机元素交换，然后对第二个元素做同样的事情......

然后你有一个随机的 char* 数组到 array1 字符串，没有重复。

改组后，您可以迭代改组的 char* 数组，并且对于每个数组，通过将改组的字符串与随机选择的 array2 字符串连接来组装输出字符串，（您可能希望使用另一个函数将 char* 返回到随机array2 字符串）。在 strcatting 任何东西之前，请注意分配正确的空间量来保存输出，包括空字符！

给你！现在去做吧。

完成后不要忘记 dispose() 东西。

# wcf - 在 Silverlight 4 应用程序中使用 WCF 库

> ID：10229516
> 
> 赞同：1
> 
> 时间：2012-04-19T13:49:33.170
> 
> 标签：wcf, silverlight, silverlight-4.0

尝试向 URI 发出请求时发生错误：

> 'http://localhost:8732/Design_Time_Addresses/WCF/Service1/'。这可能是由于试图
> 
> 在没有适当的跨域策略的情况下以跨域方式访问服务，或者
> 
> 不适合 SOAP 服务的策略。您可能需要联系服务的所有者
> 
> 发布跨域策略文件并确保它允许与 SOAP 相关的 HTTP 标头
> 
> 发送。此错误也可能是由于在 Web 服务代理中使用了内部类型而没有
> 
> 使用 InternalsVisibleToAttribute 属性。请参阅内部异常了解更多信息
> 
> 细节。

从 wcf 返回结果时出现错误

我通过控制台、网站、win 表单使用了这​​个 wcf，它工作正常

我在 WCF 库中使用 2 个 xml 文件：

1.  客户端访问策略.xml
2.  跨域.xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:18:33.677

It used to make my brain hurt too.

I figured out for my use I needed this file:

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

named clientaccesspolicy.xml

The trick is that is has to be at the root of your web server. That being said you need to be able to browse the file. In your case located at:

[http://localhost:8732/clientaccesspolicy.xml](http://localhost:8732/clientaccesspolicy.xml)

If you cannot see the file silverlight will always complain and boy does it complain whenever it can!

I should point out that my policy file is not restrictive, so use it wisely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:26:12.400

哦，那个问题。除了跨域，您不能从 VS2010 运行调试器，这是我从该 localhost URL 收集的。尝试在您的 WCF 所在的域或服务器上发布 silverlight 应用程序。例如，如果您的 Web 服务在 http://10.xx.xx.xx/sites/myWCF 上，则在 http [:](http://10.xx.xx.xx/sites/MySilverlightApp) [//10.xx.xx.xx/sites/MySilverlightApp](http://10.xx.xx.xx/sites/myWCF)上发布您的 silverlight 应用程序。您的调试器将作为[http://localhost:somePort](http://localhost:somePort)运行，即使使用跨域策略文件也肯定会给您带来问题。除此之外，请确保您的 web.service 配置文件是正确的。确保所有接口都有端点绑定，并且主服务位置上有一个主机（听起来很明显，但这是一个常见错误）。

# ios - 将 www 文件夹重新添加到 xcode phonegap 项目

> ID：10229522
> 
> 赞同：2
> 
> 时间：2012-04-19T13:50:03.457
> 
> 标签：ios, xcode, macos, cordova

我不小心从 xcode 中的 phonegap 项目中删除了 www 文件夹。我已将其重新定位并将其移回 finder 中的 xcode 项目文件夹中。但是，它没有出现在 xcode 的项目中。它曾经作为左侧的蓝色文件夹出现。如何让 xcode 项目再次重新识别它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:06:57.043

右键单击项目树 -> 将文件添加到“YourProjectName” -> 选择您的 www 文件夹，确保选中“为任何添加的文件夹创建文件夹引用”，单击“添加”。

# sharepoint - VBA 将 Windows 身份验证传递给 SharePoint

> ID：10229523
> 
> 赞同：7
> 
> 时间：2012-04-19T13:50:05.460
> 
> 标签：sharepoint, vba

我有一个 VBA 项目，它将数据从 Excel 电子表格上传到存储在 SharePoint 上的 Access 数据库。在我升级到 Windows 7 之前一切都很好。以这种方式访问​​时，Windows 7 不会自动将 Windows 身份验证传递给 SharePoint。现在我的项目不会更新我的数据库。如何让我的 VBA 项目将该信息传递给 SharePoint？我已经搜索了 2 天，但没有发现任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:42:07.347

我今天遇到了同样的问题。我想出的解决方法是强制 Windows 资源管理器打开 sharepoint 文件夹，这会触发对用户的身份验证请求。显然，这种解决方案存在许多问题。

# windows - 使用 logman 收集数据

> ID：10229525
> 
> 赞同：0
> 
> 时间：2012-04-19T13:50:08.490
> 
> 标签：windows, logging

我尝试使用 logman 而不是 DDK tracelog 来收集由使用 WPP 的应用程序生成的 *.etl 数据，但在读取 etl 文件并使用 traceview 解码 *.fmt 信息后无法看到任何数据（在 *.etl 中） .

我究竟做错了什么？我像这样生成 *etl

logman start "Session" -o "Trace.etl" -p "{28EE579B-CF67-43b6-9D19-8930E7AAA131}" -ets logman stop "Session" -ets

当使用 traceview 打开生成的 Trace.etl 时，它不仅显示没有收集到的数据的错误。

编辑：我指定我在系统上使用 mofcompiler 注册了我生成的 *.mof 文件，并且通过直接使用 traceview 我可以看到数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:03:07.683

问题是我没有指定任何标志，因此（WPP 消息设置了标志，我没有看到任何数据：

logman start "Session" -o "Trace.etl" -p "{28EE579B-CF67-43b6-9D19-8930E7AAA131}" **0xFFFF** -ets logman stop "Session" -ets

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T19:46:37.513

我正在寻找同样的问题，并在 MSDN 上找到了这个有用的文档：

[CLR ETW 关键字和级别](http://msdn.microsoft.com/en-us/library/ff357720(v=vs.110).aspx)

这些级别具有以下含义：

*   0x5 - 详细
*   0x4 - 信息
*   0x3 - 警告
*   0x2 - 错误
*   0x1 - 严重
*   0x0 - 始终记录

# asp.net-mvc - 从 jquery 移动页面链接到非移动页面-> 未加载 css

> ID：10229530
> 
> 赞同：0
> 
> 时间：2012-04-19T13:50:15.170
> 
> 标签：asp.net-mvc, jquery-mobile

上下文：asp.net MVC 3 应用程序。Page1 是一个使用 jquery mobile 的移动页面，它包含一个指向 Page2 的链接，这是一个使用特定样式表的普通页面。

问题：在我的手机上，当我单击 Page1 上的链接时，它转到 Page2（具有水平滑动效果）但未加载样式表。如果我强制重新加载 Page2 然后加载样式表。此外，在 iphone 上，如果我按下链接以显示“在新窗口中打开”按钮并单击它，它会在新窗口中很好地加载。

调试：如果我在台式计算机上模拟这个（通过强制移动视图），也会发生同样的情况。后退按钮甚至无法正常工作。加载 Page2 时，Firebug 在 Net 选项卡中显示好像我仍在加载 Page1（它显示 Get Page1），即使这是出现的 Page2 的文本（没有 css），并且它没有显示一行说它试图加载css。

**更新：**我使用的是 1.0\. 我刚刚尝试了最新的 1.1，这更糟。单击链接时，Page2 的标题出现在我的 firefox 选项卡中，地址栏显示新的 url 但不显示 Page2（即使 Firebug 显示它加载了一些东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:58:02.943

要关闭 AJAX 页面转换：

```
 $(document).bind("mobileinit", function () {

         $.mobile.addBackBtn = false;
         $.mobile.ajaxEnabled = false;
         $.mobile.ajaxLinksEnabled = false;

     }); 
```

编辑

要将单个链接更改为非 ajax，反之亦然，您可以使用以下代码：

jQuery：

```
$("a").attr("data-ajax", "false"); 
```

或者你可以简单地做`<a href="somepage" data-ajax="false" >Link</a>`

# javascript - 在javascript中删除小数点后两位而不是整数？

> ID：10229531
> 
> 赞同：13
> 
> 时间：2012-04-19T13:50:15.693
> 
> 标签：javascript, numbers, rounding

我有这个 ：

```
i=4.568;
document.write(i.toFixed(2)); 
```

输出 ：

```
4.57 
```

但我不想将最后一个数字四舍五入为 7 ，我该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T13:54:37.447

改用简单的数学；

```
document.write(Math.floor(i * 100) / 100); 
```

[(jsFiddle)](http://jsfiddle.net/eTTjF/2/)

您可以将其粘贴在自己的函数中以供重用；

```
function myToFixed(i, digits) {
    var pow = Math.pow(10, digits);

    return Math.floor(i * pow) / pow;
}

document.write(myToFixed(i, 2)); 
```

[(jsFiddle)](http://jsfiddle.net/eTTjF/1/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T13:54:43.993

只需剪断较长的字符串：

```
i.toFixed(3).replace(/\.(\d\d)\d?$/, '.$1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:54:40.583

一个稍微复杂的方法：

```
var i=4.568,
    iToString = ​i + '';
    i = parseFloat(iToString.match(/\d+\.\d{2}/));
console.log(i); 
```

这有效地获取变量`i`并将其转换为字符串，然后使用正则表达式匹配小数点之前的数字和小数点之后的两个数字，`parseFloat()`然后将其转换回数字。

参考：

*   [`match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)
*   [`parseFloat()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat).
*   [正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)。

# java - 哪个更好，在类中声明全局变量或在 Java 类中声明局部变量？

> ID：10229533
> 
> 赞同：-5
> 
> 时间：2012-04-19T13:50:17.057
> 
> 标签：java, design-patterns

在类中我们通常声明全局变量和局部变量。我经常看到声明全局变量、setter 和 getter。这些每次都是必不可少的吗？如果我可以在不使用这些东西的情况下实现它，可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:05:38.213

通常，您应该始终尝试减少变量、方法、类等的可见性范围。

因此，如果您需要在一个调用序列中使用的某个变量，请使用局部变量和方法参数将其值从一个方法传递到另一个方法。例如，我有 2 个方法`foo()`和`bar()`while`foo`调用`bar`：

```
public void foo() {
    bar();
}
private void bar() {
} 
```

假设两者都在附加一些后缀的相同字符串上工作。您可以使用局部变量，如下例所示：

```
public String foo(String s) {
    s += "foo1"
    bar(s);
    s += "foo2"
    return s;
}
private String bar(String s) {
    s += "bar1"
    return s;
} 
```

或类级别变量：

```
private String s;

public String foo() {
    s += "foo1"
    bar();
    s += "foo2"
    return s;
}
private String bar() {
    s += "bar1"
    return s;
} 
```

第一种方法更好，因为：

1.  它被封装。没有人知道实施的细节。没有人可以从外部影响它。
2.  它更容易阅读：您不必来回查看代码以了解哪些对象参与了实现。
3.  它是线程安全的，无需任何额外的工作，例如同步块或原子变量，因为它从不使用对象级变量。

第二种实现未封装：可以添加更改对象状态并影响下一次调用`foo()`. 您必须在课堂上前后来回了解算法以及受算法影响的变量。它不是线程安全的。运行相同代码的两个并发线程可能会竞争更改相同的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:53:13.157

全局变量是指类成员字段？如果变量只在方法的范围内使用，那么它应该是局部的。如果变量本质上携带了整个类实例的任何状态信息——它应该被声明为类成员字段（使用 setter 和 getter——如果需要将这些字段的访问权限授予其他类）。

关于 Java 类的好总结在这里：[http ://docs.oracle.com/javase/tutorial/java/javaOO/summaryclasses.html](http://docs.oracle.com/javase/tutorial/java/javaOO/summaryclasses.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:54:15.950

我猜您将“全局变量”定义为成员字段变量（在方法的上下文之外定义）。使用成员字段时最好使用 mutators（setter）和 accessors（getter），以便更轻松地更改实现。一个很好的例子是，如果您在获取或设置变量状态时检查字段周围的条件，您可以将更改封装在一个位置，而不是在每次使用时分散。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:57:02.563

Java中没有全局变量。

只有当它是对象的属性时，它才应该存在。例如，不应使用它来存储对象的两个方法调用之间的中间结果。

仅当外部世界需要访问信息时才应定义 Getter。如果不需要，请不要定义 getter。越私有的状态越好，因为它允许类进化而不影响其他类。

只有在需要修改字段并且单独修改该字段与其他字段有意义时，才应修改 setter。

好的规则：

*   更少的状态比更多的状态更好
*   不可变状态优于可变状态
*   一个方法应该总是将一个对象从一个稳定一致的状态带到另一个稳定一致的状态。

# sql - 使用 JET OLEDB Provider，如何使用 WHERE 子句查询无标题文本文件？

> ID：10229534
> 
> 赞同：1
> 
> 时间：2012-04-19T13:50:17.737
> 
> 标签：sql, scripting, vbscript, adodb, jet

这可能是一个愚蠢的问题，但我无法弄清楚正确的语法，或者这是否可能。

我有一个使用 Microsoft.Jet.OLEDB.4.0 Provider 查询的文本文件。文本文件是一个无标题的 CSV，看起来有点像这样：

```
4/11/2012 9:20:19 AM,USERID,GROUPNAME
4/12/2012 9:20:19 AM,USERID2,GROUPNAME3
4/13/2012 10:45:15 AM,USERID3,GROUPNAME2 
```

我可以用 a 查询整个文本文件，`SELECT * FROM...`但我希望能够在其中一列上查询它。`SELECT * FROM myTextFile.txt WHERE column2='USERID'`

我的问题是，没有标题时如何指定列？有没有办法指定第二列？就像是`WHERE {1}='USERID'`

感谢您提前回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:33:14.163

默认情况下，这些字段被命名为 F1、F2、F3 等。

因此，在您的情况下，您可以使 SQL 字符串如下所示：

```
SELECT * FROM myTextFile.txt WHERE F2='USERID' 
```

[编辑] 我刚刚看到@onedaywhen 的评论......他是对的，我已经使用了它并且它有效。

# sql - 极限算子的关系代数

> ID：10229535
> 
> 赞同：3
> 
> 时间：2012-04-19T13:50:28.017
> 
> 标签：sql, relational-algebra

这两个 SQL 查询的关系代数是什么：

```
Select * from film where film_rating = 'PG' limit 20; 
```

我们如何显示限制？

```
Select * from actor, country where first_name='BOB' and country='In'; 
```

其中 first_name 是演员的列，国家是国家表的列...这两个表之间没有关系...它们是独立的表...

那么我们可以在这里使用连接运算符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T19:44:11.217

关于`limit`关系代数。传统的关系代数不支持`limit`SQL 中的任何东西。*Li、Chang、Ilyas 和 Song 在RankSQL: query algebra and optimization for relational top-k queries* (SIGMOD 2005)中已经认识到并研究了这个问题。他们提出了一个单调评分函数*F*，它通过排序算子*tauF*对结果进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:06:13.650

我只是在这里回答关于加入的问题。

演员和电影之间存在着 am : n 的关系。它必须通过一个中间表来实现，比如说`film_actors`。此外，国家/地区表可能有一个像“In”这样的短名称和一个像“India”这样的长名称。

```
SELECT film.title, film_actors.role_type, actor.name, country.long_name
FROM
    film
    LEFT JOIN film_actors ON film.film_id = film_actors.film_id
    LEFT JOIN actor ON film_actors.actor_id = actor.actor_id
    LEFT JOIN country ON actor.country = country.short_name 
```

如果国家/地区表只有一个具有此短名称的列，那么将其包含在您的查询中根本没有意义。仅当国家/地区有一些您想要包含的其他信息时才这样做。

我在这里使用了左外连接。仅当右侧的表可能并不总是有相关记录时才会请求它们。一部动画片可能没有演员。否则使用`INNER JOIN`

# xml - Solr 如何使用 dataimportHandler 从 XML 获取属性值

> ID：10229537
> 
> 赞同：1
> 
> 时间：2012-04-19T13:50:35.567
> 
> 标签：xml, solr, lucene, dataimporthandler

我需要从提供 XML 的 HTTP Web 服务中提取信息，如下所示：

```
<results>
<parametros>
    <param name="mode">xml</param>
</parametros>
<estacions>
    <estacio id="72400" nom="Aeroport"/>
    <estacio id="79600" nom="Arenys de Mar"/>
    <estacio id="79404" nom="Badalona"/>
    ...
</estacions>
</results> 
```

如何获得属性值？例如 id 和 nom 属性？这是我的数据配置文件，但我没有看到如何实现这种情况。

```
<dataConfig>
    <dataSource type="HttpDataSource" />
    <document>
            <entity name="slashdot"
                    pk="link"
                    url=http://_host_/xmlservice/"
                    processor="XPathEntityProcessor"
                    forEach="/estacions"
                    transformer="DateFormatTransformer">
                    <field column="idestacio"       xpath="/estacio.id"   commonField="true" />
                    <field column="nomestacio"      xpath="/estacio.nom"    commonField="true" />                        
            </entity>
    </document>
</dataConfig> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:13:17.220

请参阅[此处](https://stackoverflow.com/questions/7081318/solr-dataimporthandler-can-i-get-a-dynamic-field-name-from-xml-attribute-with-x)如何使用 JavaScript 转换器来操作使用 XPath 提取的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T17:33:05.777

检索属性的 xpath 将是：

```
<field column="idestacio" xpath="/estacions/estacio/@id" commonField="true" /> 
```

xpath 的一个很好的教程是：http: [//zvon.org/comp/r/tut-XPath_1.html#Pages~Attributes](http://zvon.org/comp/r/tut-XPath_1.html#Pages~Attributes)

# c# - 覆盖迪斯科文件

> ID：10229538
> 
> 赞同：1
> 
> 时间：2012-04-19T13:50:38.337
> 
> 标签：c#, asp.net, web-services, asmx, discovery

我有一个 ASMX Web 服务，它部署在反向代理后面。我需要通过更改反向代理错误创建的一些链接来覆盖迪斯科文件。这个文件是即时创建的吗？我们有什么方法可以强制用户使用我们希望他们使用的那个？

# linux - 如何在eclipse中配置nutch？

> ID：10229542
> 
> 赞同：0
> 
> 时间：2012-04-19T13:50:44.560
> 
> 标签：linux, eclipse, nutch

我正在尝试配置环境，以便我可以测试和运行最新的 nutch 主干，但没有任何反应。我的操作系统是 Ubuntu 12.04、Java IDE Eclipse 3.7 Indigo 以及运行 nutch 所需的所有插件。我将很感激给我提供详细教程的链接。我试过这个链接：[http](http://wiki.apache.org/nutch/RunNutchInEclipse) ://wiki.apache.org/nutch/RunNutchInEclipse但我做不到。希望还有其他来源可以找到正确的说明如何在 Eclipse 下运行 nutch。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:48:06.360

我按照该链接中的说明操作并成功了。问题可能是**Eclipse**版本，请尝试使用[**Eclipse for Java EE Developers**](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)。

将这些 jar作为外部 jar 文件添加到您的**主干项目中：** **cyberneko.jar**、**rome-0.9.jar**和**tagsoup-1.2.jar**。你可以通过简单的**谷歌**搜索找到所有这些罐子。

# macos - AppKit：持续时间选择器视图

> ID：10229543
> 
> 赞同：1
> 
> 时间：2012-04-19T13:50:51.497
> 
> 标签：macos, cocoa, time, appkit, nsdatepicker

是否有任何类似于`NSDatePicker`OS X 的视图，但用于选择持续时间（即小时、分钟和秒）而不是整个日期。谷歌搜索没有带来任何有用的东西，而且我还没有成功地定制`NSDatePicker`只适合持续时间——我的尝试在 12 小时（上午和下午）日期模式和不同时区的情况下无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:26:43.277

我认为没有任何现成的解决方案，但是用 3 个无边界文本字段和几个带有冒号的标签来制作自己的解决方案应该不难，所有这些都在一个 NSBox 中，旁边有一个步进器它。

我想我找到了一种适用于 NSDate 选择器的方法。我不确定为什么其中一些有效，但似乎有必要将语言环境设置为使用 24 小时制的地方，例如日本，并为选择器设置日历。我看到的唯一“故障”是在输入一些 1 位数字时有一点延迟（这是 Apple 在 OS X 10.5 中更改的内容，我认为让编辑器等着看你是否想添加第二个数字）。但是，您可以通过跳出该字段或单击另一个字段来立即更新它。所以这里是设置：

```
self.picker.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"ja_JP"];
    self.cal = [NSCalendar currentCalendar];
    self.cal.timeZone = [NSTimeZone timeZoneWithName:@"GMT"];
    self.picker.calendar = self.cal;
    self.picker.timeZone = cal.timeZone; 
```

这是选择器的操作方法：

```
 -(IBAction)dpClick:(NSDatePicker *)sender {
    NSDateComponents *comps = [cal components:NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit fromDate:sender.objectValue];
    NSLog(@"hours=%ld  minutes=%ld  seconds=%ld",comps.hour,comps.minute,comps.second);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:54:15.820

您可以使用该[`-[NSDatePicker setDatePickerElements:]`方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDatePicker_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDatePicker/setDatePickerElements%3a)将日期选择器配置为仅显示日期的时间部分。

# ios - 本机、混合和 Web 应用程序定义

> ID：10229551
> 
> 赞同：0
> 
> 时间：2012-04-19T13:51:11.877
> 
> 标签：ios

谁能帮助我了解 iOS 的混合、本机和 Web 应用程序之间的区别是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:00:48.323

总结：

*   **Native**：它是一个合适的 iPhone 应用程序，使用 Objective-C 和 iPhone SDK 构建。您将通过 App Store 下载并安装到您的手机中。
*   **Web App**它只是一个网页，准备好用你的 iPhone 打开。您通过互联网访问它，您不需要在手机中安装任何东西。它们是用例如 HTML5 构建的
*   **Hybrid**正如你所想象的，它是两者的混合体，它是一个作为原生应用程序构建的应用程序，但通过 Web 实现了一些功能

你可以在这里找到一个很好的介绍：

[http://www.slideshare.net/grigs/native-vs-mobile-web-vs-hybrid-apps-for-mobile-development](http://www.slideshare.net/grigs/native-vs-mobile-web-vs-hybrid-apps-for-mobile-development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:07:01.473

使用 Apple 提供的 ios sdk 构建的应用程序称为原生应用程序。它必须使用 Apple 提供的框架和类来构建。Web 应用程序使用 HTML5、Javascript、CSS 构建，并在 Safari 中加载。[您可以在http://www.apple.com/webapps/](http://www.apple.com/webapps/)上找到网络应用程序。关于混合应用程序，它们也是用 HTML5、JavaScript、CSS 编写的，并使用 phoneGap 等工具编译，这些工具可以编译到不同的平台，如 android、blackberry 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T03:01:36.607

**对于 iOS**，

**原生：-**使用语言是 Objective C 或 swift.tool 是 XCode，硬件是 Mac。具有高级 UI 交互。更快的性能。您可以使用 App-store 下载和安装应用程序。完整（100%）功能。此应用程序可以访问手机的各种设备，例如：相机、通讯录。有时可以在没有互联网的情况下使用这些应用程序。

**Web：-** 这与原生应用程序相反。使用 Web 技术。例如 HTML 5、css、JavaScript。无需安装和升级任何东西。可以通过浏览器访问。因此总是需要互联网连接。但是可以在任何地方运行。无法访问手机的各种设备。

**混合：-**这结合了本机和 Web 的最佳组件。使用 HTML 5、css、JavaScript 构建并由一个瘦的本机容器包装。应用商店分发。也可以访问手机的各种设备。

# css - Boostrap - 右拉导航栏部分中的下拉菜单在左侧显示面板箭头

> ID：10229558
> 
> 赞同：4
> 
> 时间：2012-04-19T13:51:59.727
> 
> 标签：css, twitter-bootstrap

我正在使用引导程序，试图为电子商务创建一个类似于顶级导航栏的 Facebook。我正在向最右上角的链接添加一个下拉列表，因此“帐户”链接显示了与帐户相关的操作的下拉列表。

下拉菜单右对齐，但出现在菜单面板顶部的小箭头左对齐，指向导航栏中的上一个链接。

要查看它，请查看此小提琴（全屏以阻止导航栏折叠）：http: [//jsfiddle.net/v3wgt/1/embedded/result/](http://jsfiddle.net/v3wgt/1/embedded/result/)

这里的代码：http: [//jsfiddle.net/v3wgt/2/](http://jsfiddle.net/v3wgt/2/)

是否有任何修复/解决方法/替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:46:36.157

为了完整起见，解决方案是将`pull-right`类添加到父 UL，如下所示：

```
<ul class="nav pull-right">
   ... your links here
   <li class="dropdown">your dropdown item</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:04:36.293

`div`周围的类`navigation`应该只是`nav`而不是`nav-collapse`-> [fiddle](http://jsfiddle.net/csuXw/)（html区域第5行）

# html - 内联元素方向

> ID：10229559
> 
> 赞同：2
> 
> 时间：2012-04-19T13:52:01.300
> 
> 标签：html, css

是否可以仅使用 css 更改内联元素顺序？

就像我们有这个：

```
<span class="opening_quote">“&lt;/span>
<span class="text">Lorem ipsum...</span>
<span class="closing_quote">”&lt;/span> 
```

*   文本将是多行的。
*   代码应该支持 ie6+ 所以 :after 和 :before 我们不能使用。

但是对于 rtl 方向，我们应该改变引号和文本的顺序：

```
“Lorem ipsum dolor sit amet, consectetur 
adipiscing elit” 
```

至

```
Lorem ipsum dolor sit amet, consectetur”
                        “adipiscing elit 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:06:06.187

您可以将 text-align （如已经建议的那样）`.text` `span`与更改`float`on结合起来，`.opening_quote`以便在需要时正确浮动或将其位置更改为`absolute`with`right: 0;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:08:11.393

您需要创建以下结构：

```
<span class="text">Lorem ipsum...</span>
<span class="opening_quote">“&lt;/span>
<span class="closing_quote">”&lt;/span> 
```

并添加`absolute`到引号取决于方向。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T14:09:25.190

有一个 CSS`direction`属性，当应用于父元素时应该可以满足您的需求。[MDN 链接](https://developer.mozilla.org/en/CSS/direction)

```
<style>
.rtl {direction:rtl;}
</style>

<p class="rtl">
<span class="opening_quote">“&lt;/span>
<span class="text">Lorem ipsum...</span>
<span class="closing_quote">”&lt;/span>
</p> 
```

[看到这个 JSFiddle](http://jsfiddle.net/Thttg/)

# android - 如何在单击 android 手机后退按钮时重置字体大小？

> ID：10229560
> 
> 赞同：0
> 
> 时间：2012-04-19T13:52:18.983
> 
> 标签：android

我有一个 TextView，我将字体大小设置为 26 以单击 TextView。现在我需要在按下 android 手机的后退按钮时将字体大小重置为 22。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:03:03.250

我不确定你为什么要这样做，因为当你点击后退按钮时活动被破坏了，不管这是你想要做什么......

```
public class YourClass extends Activity{

 public static final int INITIAL_FONT_SIZE = 22;
 public static final int ACTIVITY_FONT_SIZE = 26;

public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
        yourTextView.setTextSize(ACTIVITY_FONT_SIZE);
     }

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
       yourTextView.setTextSize(INITIAL_FONT_SIZE);
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

但问题是为什么要在按下后退按钮时重置文本大小，因为再次返回活动会将其重置回 26..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:54:14.397

覆盖此方法

```
 @Override
    public void onBackPressed() 
    {
      // set size here
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:02:07.090

首先，您需要为 TextView 添加 OnClickListener，如下所示

```
TextView t = (TextView)findViewById(R.id.TextView01);
t.setOnClickListener(this); 
```

在

```
public void onClick(View arg0) {
    t.setTextSize(22);

} 
```

并在触发返回键时将 TextView 大小重置为您需要的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:37:02.320

```
@Override
public void onBackPressed() 
{
   yourTextView.setTextSize(22);
} 
```

# sencha-touch-2 - 渲染 Sencha Touch 2 应用程序的最快方法

> ID：10229561
> 
> 赞同：1
> 
> 时间：2012-04-19T13:52:24.863
> 
> 标签：sencha-touch-2

我正在构建一个 Sencha Touch 2 应用程序，我想知道如何构建该应用程序。我是否使用`Ext.create`单独创建对象，然后将该对象作为另一个对象的项目。还是我创建一个对象来设置属性并立即渲染所有内容。所以问题是，什么更快，这个：

```
 Ext.application({
    autosCreateViewport: true,
    useLoadMask: true,
    launch: function(){
        var titleBar = {
            id: 'mainNavigationBar',
            xtype : 'titlebar',
            layout: 'hbox',
            docked: 'top',
            title : 'cSenchaTitleBar',
            items:[]
        };

        var panel ={html:"test",xtype:"panel"}

        containerPanel = Ext.create('Ext.Container', {
            id: 'appContgdfsainer',
            xtype: "mainview",
            fullscreen: true,
            items: [titleBar, panel]

        });
    },
}); 
```

或这个：

```
Ext.application({
    autosCreateViewport: true,
    useLoadMask: true,
    launch: function(){
        var titleBar = Ext.create("Ext.TitleBar",{
            id: 'mainNavigationBar',
            xtype : 'titlebar',
            layout: 'hbox',
            docked: 'top',
            title : 'cSenchaTitleBar',
            items:[]
        });

        var panel = Ext.create("Ext.Panel",{html:"test"});

        containerPanel = Ext.create('Ext.Container', {
            id: 'appContgdfsainer',
            xtype: "mainview",
            fullscreen: true,
            items: [titleBar, panel]

        });
    },
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:04:41.747

两者之间不会有任何区别。这是因为在创建和渲染最终的容器面板之前，实际上没有任何东西是可见的，为此，所有其他组件必须首先实例化。在这两种情况下，这都必须发生。

# android - SQLite 将给定字符串与两列进行比较

> ID：10229570
> 
> 赞同：1
> 
> 时间：2012-04-19T13:52:53.133
> 
> 标签：android, mysql

我有这张桌子：

名字 | 姓

```
 abc       def
 aaa       bbb
 ...       ... 
```

我想进行一个查询，该查询将获取一个字符串并找到

如果此字符串等于（或部分） - "first_name (space) last_name"

例如，一个好的查询将是：

一个

抗体

A B C D

ABC德

啊啊啊啊啊啊

我试过这个选择：

```
String selection = "first_name" + " " + "last_name" + " LIKE '" + GIVEN_STRING + "%'"; 
```

但没有运气

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:59:26.060

SELECT (first_name || " " || last_name) AS full_name WHERE full_name LIKE '%blah%'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:13:09.487

您需要使用`OR`关键字在两列之间进行匹配

```
String query = String.format("SELECT * FROM %s WHERE %s OR %s LIKE '%%%s%%';",
            "tableName", "first_name", "last_name", "matchString"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:56:59.110

我认为您缺少第一个`%`. 像这样：

```
String selection = "first_name" + " " + 
"last_name" + " LIKE '%" + GIVEN_STRING + "%'"; 
```

# mysql - MySQL SELECT WHERE IN LIST 和 NOT IN LIST 在同一 SQL 中

> ID：10229575
> 
> 赞同：1
> 
> 时间：2012-04-19T13:53:07.790
> 
> 标签：mysql, arrays, select, where-in

我有这个：

```
 $ids = "1,2,3,4,5";
    $sqlQuery = "SELECT id, moderation_date
                    FROM table_live
                    WHERE id IN (".$ids.")";

    $q = $this->CI->db->query($sqlQuery);

    if($q->num_rows() > 0) {
        foreach ($q->result() as $row) {
            $arr[] = $row;
        }
    }

    return $arr; 
```

如果 table_live 中存在所有 id 并返回，这将正常工作

```
 array([id] => 1 [moderation_date] => 2012-04-11 12:55:57).... 
```

问题：如果我发送一个 1-2-3-4-5 的 id 列表，其中只有 1-2-5 与 IN LIST 子句匹配，我需要返回列表中的所有内容，并且对于那些不匹配列表的空值.

```
 array([id] => 3 [moderation_date] => null) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:03:00.773

生成一个外连接语句，以便您获得：

```
SELECT ids.id, table_live.moderation_date
FROM (select 1 id union all select 2 union all ....) ids
LEFT JOIN table_live
ON ids.id = table_live.id 
```

其中 ids 是枚举所有值的子查询，如下所示：

```
$ids = '1,2,3,4,5'
$subquery = 'select '.str_replace(',', ' id union all select ', $ids).''
$sql = "SELECT ids.id, table_live.moderation_date
FROM ($subquery) ids
LEFT JOIN table_live
ON ids.id = table_live.id" 
```

一定要选择`ids.id`，不要`table_live.id`。这样，id 将始终显示，并且 moderation_date 仅在 table_live 中存在相应行时才会显示。

另一种方法是保持查询不变，将结果存储在数组中，然后在 php 中合并数组，以便保留所有键，并仅在两个数组中键匹配的地方填写值。

我不太确定您使用的是哪种 db 库，所以我不知道如何获取结果集的数组，但假设您将使用 id 的字符串表示形式将行存储在 php 数组中键和日期作为值，那么这段代码应该可以解决问题：

```
$items = array(
    '1' => NULL
,   '2' => NULL
,   ...
); 
//note: use string keys in order to merge!!
$result = array_merge($items, $resultset); 
```

见： http: [//php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# c# - 在 WPF 用户控件上实现 IsEnabled 属性

> ID：10229577
> 
> 赞同：2
> 
> 时间：2012-04-19T13:53:08.570
> 
> 标签：c#, wpf, mvvm, isenabled

我已经构建了一个用户控件（ctlToolbarEdit），上面有一些按钮 - 但为了简单起见，我们假设有一个按钮：cmdSave。

我希望 ctlToolbarEdit 公开 IsSaveEnabled 属性，当设置为 true 时设置 cmdSave.IsEnabled = true，并且（显然）当 false 设置 cmdSave.IsEnabled = false 时。

最后，我希望能够绑定到该属性.. 我想将 IsSaveEnabled 绑定到视图模型的 IsValid 属性，该视图模型托管控件的表单绑定到

所以。这是 ctlToolbarEdit 背后的代码

```
 private readonly DependencyProperty IsSaveEnabledProperty = DependencyProperty.Register("IsSaveEnabled", typeof(bool), typeof(ctlToolbarEdit));

    public ctlToolbarEdit()
    {
        InitializeComponent();
    }

    public bool IsSaveEnabled
    {
        get { return (bool)GetValue(IsSaveEnabledProperty); }
        set 
        {   
            SetValue(IsSaveEnabledProperty, value);
            cmdSave.IsEnabled = value;
        }
    } 
```

这是托管此用户控件的表单的 XAML：

```
<ctl:ctlToolbarEdit IsSaveEnabled="{Binding IsValid}" /> 
```

作为测试，我还将这行 XAML 添加到托管 ctlToolbarEdit 的表单中（因此它正在复制我试图产生的行为）：

```
<Button Name="cmdSaveTest" Content="Save" IsEnabled="{Binding IsValid}" /> 
```

我的结果是这样的：

*   我添加的按钮按预期工作。每当 IsValid 属性更改时，cmdSaveTest 按钮的 IsEnabled 值就会更改（我可以看到它启用/禁用）。这告诉我 IsValid 属性正在正确触发……换句话说，我可以绑定到该属性，所以我很高兴绑定到该属性和视图模型都可以。

*   ctlToolbarEdit 中的 cmdSave 按钮不执行任何操作。

事实上：我在 ctlToolbarEdit 的属性的 getter 和 setter 上放置了一些断点，这些似乎永远不会触发。

谁能告诉我我忽略了什么痛苦的显而易见的事情？

## 编辑

典型的。你花了几个小时搜索，最后咬紧牙关在 Stack Overflow 上发帖，几乎立刻就能找到可以回答你问题的东西。

我现在知道：

*   我的属性 getter 和 setter 被 CLR 忽略；它直接调用 GetValue 和 SetValue。这就是为什么我的断点没有被兑现（该代码实际上没有触发！）以及 cmdSave 的 IsEnabled 属性不起作用的原因。

所以：这一切都说......那么我如何真正实现我想要实现的目标呢？帮助感激不尽。

## 编辑

好的......所以更多的进步; 我看到你使用 PropertyMetadata。我补充说：

```
, new PropertyMetadata(new PropertyChangedCallback(OnIsSaveEnabledChanged)) 
```

到 IsSaveEnabledProperty DependencyProperty 语句（使其：

```
private readonly DependencyProperty IsSaveEnabledProperty = DependencyProperty.Register("IsSaveEnabled", typeof(bool), typeof(ctlToolbarEdit), new PropertyMetadata(new PropertyChangedCallback(OnIsSaveEnabledChanged))); 
```

但是现在我需要编写的 OnIsSaveEnabledChanged 方法必须是“静态的”，并且我无法在该方法中访问 c​​mdSave。

现在我真的被困住了。有什么帮助吗？

DS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:20:43.400

对于典型的 MVVM 模式，您可以反过来执行此操作：您的命令的 CanExecute/IsEnabled 属性将控制控件上的 IsEnabled 属性。因此，当您的视图模型决定保存不可用时，它会导致您的命令的 CanExecute/IsEnabled 标志为假，并且使用该命令的任何控件都会禁用自己。例如，看看 Button 控件如何与 ICommand 一起工作。

[http://msdn.microsoft.com/en-us/library/ms752308.aspx](http://msdn.microsoft.com/en-us/library/ms752308.aspx)

[http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx#sec10](http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx#sec10)

# service - 知识转移到服务和支持团队

> ID：10229580
> 
> 赞同：2
> 
> 时间：2012-04-19T13:53:20.667
> 
> 标签：service, project-management

我的团队创建了一套工具，正在过渡到服务和支持（两个独立的团队）。我们一直在 Sharepoint、OneNote、电子邮件、TFS、wiki 帖子等地方合作开发 SDK 和技术说明。我对以一种有凝聚力和简洁格式的专业方式传递所有这些资源的集合感兴趣。我正在寻找这样做的方法的建议或可能的链接示例，我可以查看这些示例已经这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:55:11.510

实施此类转移的最佳方法之一是使用诸如[MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)之类的免费软件创建一个内部 Wiki 站点。该网站可以定期更新常见问题和程序。

这种方法的好处是：

*   它对所有客户端都是平台中立的（即，它们只使用 Web 浏览器）。
*   易于多人同时更新和维护。此类更新可以即时执行，而无需以任何方式关闭或禁用站点。
*   它是一个单一的信息存储库，比多个（可能很难找到）不相交的存储库工作得更好。
*   它允许内容提供者和内容消费者之间的交互格式（即，可以直接在 Wiki 站点上提出问题）。
*   它允许分层表示并实现易于搜索，这与人们尝试查找和使用信息的方式非常吻合。
*   它能够跟踪所有编辑的历史和作者身份。

也有一些缺点，因此请考虑到它们：

*   有必要从当前信息数据格式进行转换。
*   内容特定的安全性将难以实施。
*   如果人们临时修改站点，信息质量可能会受到影响。
*   如果没有适当的审查和中央监督，就有可能出现虚假信息、错误信息、偏见和激烈的战争

# vbscript - JET 数据库引擎请求的 VBScript 错误

> ID：10229587
> 
> 赞同：0
> 
> 时间：2012-04-19T13:53:44.413
> 
> 标签：vbscript, jet

我正在尝试通过向 csv 文件发出请求来检索一些信息，但我一直遇到此错误： **没有为一个或多个必需参数提供值，代码 80040E10 来源：Microsoft JET 数据库引擎**

它涉及我脚本的以下行：

```
RECORDSET.Open "SELECT * FROM " & strFile & " WHERE ComputerName = '" & OldComputerName & "'", CONNECTION, 3, 3 
```

但是，如果我在请求之前对 strFile 和 OldComputerName 执行 wscript.echo，它们会显示正确的值。

这是带有请求的脚本的整个部分：

```
dim CONNECTION : set CONNECTION = CreateObject("ADODB.CONNECTION")
dim RECORDSET : set RECORDSET = CreateObject("ADODB.RECORDSET")
CONNECTION.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\\contoso.scom\DP_IT\Rollout\;Extended Properties=""text;HDR=YES;FMT=Delimited"""
strFile = "[CONTOSO-OPR-ComputerList.csv]" 
wscript.echo strfile
wscript.echo OldComputerNameenter 
RECORDSET.Open "SELECT * FROM " & strFile & " WHERE ComputerName = '" & OldComputerName & "'", CONNECTION, 3, 3 
```

我想说这以前有效。我已经好几个星期没碰它了，但似乎有些事情发生了变化，我不知道是什么：/

编辑：如果我对整个请求执行 wscript.echo，它会给我这个：

`SELECT * FROM [CONTOSO-OPR-ComputerList.csv] WHERE ComputerName = 'ABC123'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-15T16:48:24.217

正如用户 69820 的评论所表明的那样，对于简单的 SQL 语句来说，该错误最可能的原因是列名错误。假设“相同的条件（网络、共享、权利......）”（我承认高阶），我认为下一个嫌疑人是（不同的）区域设置确定字段分隔符。

给定德语设置（即“;”分隔符），带有“，”的文件

```
ComputerName,WhatEver
"ABC123",1
"DEF456",2 
```

将导致错误，而

```
ComputerName;WhatEver
"ABC123";1
"DEF456";2 
```

将毫无问题地“工作”。

# asp.net - asp格式的SQL datetime和calendar.selectedDate问题

> ID：10229590
> 
> 赞同：1
> 
> 时间：2012-04-19T13:53:58.687
> 
> 标签：asp.net, sql, vb.net, linq

我正在 VB 中的 asp.net 中构建预约系统 Web 应用程序，

我只是想检查是否已在从日历控件中选择的日期进行了约会。我正在使用 Linq 进行绑定，但是当我需要 ddmmyyyy 时，日历中的格式是 mmddyyyy，我的约会输入 int sql 表，时间为 20/09/2012 10:00:00

尝试在 db.apps 中使用 p 中的 linq，其中 p.date=mycontrol.selecteddate

不产生结果

添加了一些代码：-

```
 Dim myDate As Date = appCalender.SelectedDate

        Dim stat = From a In db.Appointments
                 Where a.dateAndTime = DateTime.Parse(myDate).ToString("ddMMyyyy")
                 Select New With {a.dateAndTime}

        Dim myList As List(Of String) = Nothing
        For Each a In stat

            myList.Add(a.dateAndTime)

        Next

        ListBox1.DataSource = myList
        ListBox1.DataBind() 
```

我不确定代码 DateTime.Parse,,,, 是否正确，我从日历中选择的所选日期有很多约会，但我认为 DateTime 格式没有正确转换为 SQL

SQL 中的约会数据类型是 datetime

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:11:31.307

您没有比较相同的数据类型。

```
Where a.dateAndTime = DateTime.Parse(myDate).ToString("ddMMyyyy") 
```

如果您的数据库（和 Linq）中的列是 DateTime，则“=”右侧的值是一个字符串。它不会匹配。试试这个？

```
Where a.dateAndTime = DateTime.Parse(myDate) 
```

编辑

此外，看起来您只是从日历中获取日期，而不是时间：

```
Dim myDate As Date = appCalender.SelectedDate 
```

但是您说您的日期存储为“20/09/2012 10:00:00”

20/09/2012 10:00:00 != 20/09/2012 00:00:00

这可能是正在发生的事情。

试试这个

```
Dim myDate As DateTime =  DateTime.Parse(appCalender.SelectedDate)

Dim stat = From a In db.Appointments
           Where a.dateAndTime >= myDate And a.dateAndTime < myDate.AddDays(1)
           Select New With {a.dateAndTime} 
```

# ajax - 如果响应数据具有嵌套对象，则 ItemFileReadStore 提取不起作用

> ID：10229592
> 
> 赞同：0
> 
> 时间：2012-04-19T13:54:12.120
> 
> 标签：ajax, json, dojo, store

我正在使用 Dojo 工具包通过 ajax 请求从外部 JSON 源（Web 服务）获取数据。我使用这个检索到的数据来创建一个 ItemFileReadStore，然后我使用它的 fetch 方法来打印它包含的对象的一些属性。

JSON 源具有嵌套属性，这里是一个示例：

```
[    
 {
  "name":"michael",
  "surname":"owen",
  "reference": [
    {
      "code":21,
      "date":"01-01-2001"
    },
    {
      "code":134,
      "date":"11-05-2011"
    }
  ]
 },
 {
  "name":"robert",
  "surname":"foreman",
  "reference": [
    {
      "code":33,
      "date":"11-10-2009"
    }
  ]
 },
] 
```

如您所见，“引用”是一个对象数组，每个对象有两个属性。

问题：我用这些数据创建了一个 ItemFileReadStore，当我尝试获取它时没有显示任何内容。我一直在对此进行测试，并确认它适用于普通结构（没有嵌套对象）。

我想这家商店可能不是很好。

获取代码：

```
var store = ItemFileReadStore({data: response});  
store.fetch( { query: {'name': 'michael'}, onItem: function(item) {
                            console.log(store.getValue( item, 'surname' ));
                        }
                    }); 
```

所以，问题是：我能以某种方式读取嵌套结构吗？也许与另一种商店？使用另一种语法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:15:09.777

答案取决于您想如何使用商店。

新的`dojo.store`API 允许您将函数作为查询传递，并且您可以在函数中进行自定义过滤。

[http://dojotoolkit.org/features/1.6/object-store](http://dojotoolkit.org/features/1.6/object-store)

但是，许多当前的 dojo 小部件仍然使用`dojo.data`API (ItemFileReadStore)。有一个适配器，但您不能将函数传递给查询。

一些像网格这样的小部件，允许您直接设置项目而不必查询。如果是这种情况，您可以使用新的商店 API 来查询并手动将项目设置到网格上。

也有`dojox.json.query`，不过我没用过。

# javascript - 抽象 3rd 方 javascript API 的好方法？

> ID：10229595
> 
> 赞同：2
> 
> 时间：2012-04-19T13:54:14.857
> 
> 标签：javascript, google-maps-api-3, prototypal-inheritance

试图确定一种更好的方法来抽象 3rd 方 javascript API，特别是 Google Maps API 对象。

我的第一次尝试是这样的：

```
nmap.Polygon = function () {
};

nmap.Polygon.prototype = new google.maps.Polygon(); 
```

在我尝试使用 Google Maps API 的其他部分对该对象进行操作之前，这看起来不错。例如：

```
var poly = new nmap.Polygon(options);
poly.setMap(googleMapObject); 
```

这无声无息地失败了。

使用构图模式是我唯一的选择吗？
IE：

```
var Polygon = function(){
  this.realPolygon = new google.maps.Polygon();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:56:22.210

如果您想要的是映射 API 的通用抽象，您应该查看 Mapstraction。支持 Google Maps v3 以及大约 15 个其他提供商。

[http://mapstraction.com/](http://mapstraction.com/)

# iphone - 将 UIButton 添加到 UItableview 单元格

> ID：10229597
> 
> 赞同：1
> 
> 时间：2012-04-19T13:54:16.137
> 
> 标签：iphone, ios, uitableview

我有一个包含 3 个部分的分组表视图，我想为每个部分添加不同的按钮，我在第一部分有 5 个单元格，我只想在第二个、3 个和第 4 个单元格中添加 3 个取消按钮。我的代码看起来像这样

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 3;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if(section == 0)
        return [_arayfirstrow count];
    else if(section == 1)
        return [_arraysecondrow count];
    else  if(section == 2)
        return [_arraythirdrow count];
}
   // Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
   // static NSUInteger nTag = 100;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
        cell.textLabel.font = [UIFont fontWithName:@"Georgia"size:20.0];

    }

    // Set up the cell...
    if(indexPath.section == 0){
            cell.textLabel.text = [_arayfirstrow objectAtIndex:indexPath.row];
        NSString *imageName = [_arayfirstrowimg objectAtIndex:indexPath.row];
        cell.imageView.image = [UIImage imageNamed:imageName];

**//when i add below code for inserting button on the first section ,it successfully adds the button,but i don't need button for 1st and 5th cell..ans also it crashes when i tap the button for 2 or three time**

  CGRect buttonRect = CGRectMake(210, 25, 65, 25);
     UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = buttonRect;
        // set the button title here if it will always be the same
        [button setTitle:@"Action" forState:UIControlStateNormal];
        button.tag = 1;
        [button addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside];

        [cell.contentView insertSubview:button atIndex:0];

       // [usernamebutton release];

    }else if(indexPath.section == 1){
        cell.textLabel.text = [_arraysecondrow objectAtIndex:indexPath.row];
    }
    else if(indexPath.section == 2)
    {
        cell.textLabel.text = [_arraythirdrow objectAtIndex:indexPath.row];

    }
    return cell;
} 
```

有没有办法解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:43:22.667

你可以这样尝试：

```
if(indexPath.section == 0)
{
    if(indexPath.row == 1||indexPath.row == 2||indexPath.row == 3)
    {
        CGRect buttonRect = CGRectMake(210, 25, 65, 25);
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = buttonRect;
        // set the button title here if it will always be the same
        [button setTitle:@"Action" forState:UIControlStateNormal];
        button.tag = 1;
        [button addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside];
        [cell.contentView addSubView:button atIndex:0];
    }
} 
```

你定义了方法`myAction:`吗？如果没有，它可能会使您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:20:20.230

首先，这很容易：

将 UITableViewCell 的子类添加到您的项目中，插入标题并在委托方法中添加单元格，如下所示：

```
static NSString *CellIdentifier = @"SpecialCell";
// static NSUInteger nTag = 100;
YourTableViewCellClass *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (specialCell == nil) {
    specialCell = [[[YourTableViewCellClass alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
} 
```

在您自己的新 Cell 类中添加您喜欢的按钮和视图

```
[self addSubview:button]; 
```

这是您的特殊单元格，即第一部分中您的第 2、第 3 和第 4 个单元格的单元格。

就像你已经做的那样，以与上面相同的方式初始化一个标准单元。现在魔法来了：

```
if(indexPath.section == 0){
    if(indexPath.row == 1||indexPath.row == 2||indexPath.row == 3){
        //add text to buttons of your specialCell
        //add color...
        return specialCell;
    } else {
        return cell;
    }
} 
```

只是一个小概述，它是如何完成的。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T09:54:06.700

```
if(indexPath.section == 0)
{
    if(indexPath.row == 1||indexPath.row == 2||indexPath.row == 3)
    {    

UIButton *deletebtn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [deletebtn setFrame:CGRectMake(170,5, 25, 25)];
            deletebtn.tag=indexPath.row;
            [deletebtn setImage:[UIImage imageNamed:@"log_delete_touch.png"] forState:UIControlStateNormal];
            [deletebtn addTarget:self action:@selector(DeleteRow:) forControlEvents:UIControlEventTouchUpInside];
            [cell addSubview:deletebtn];
}
} 
```

# linux - ARM Linux：有效虚拟内存的特定页面上的总线错误

> ID：10229600
> 
> 赞同：3
> 
> 时间：2012-04-19T13:54:24.257
> 
> 标签：linux, embedded, arm, sigbus

我正在使用嵌入式 ARM Linux 系统，偶尔（但并非总是）在访问虚拟地址 0x2b200000 的页面时，我的应用程序中会出现总线错误。根据编译器/链接器是否将代码或数据放在该地址，我要么在读取变量时遇到总线错误，要么在从该页面获取指令时得到总线错误。在总线错误之后，我 cat /proc/self/maps 并确认该页面确实被映射为在我的进程中有效的东西。

它似乎只是那一页。页面 0x2b201000 和 0x2b1ff000 总是可以的（显然，在完全不同的地方可能有另一个坏地址，我只是碰巧没有访问它）。

我意识到这里有一百万个未知数，但想知道是否有人能指出我的调查方向。系统有自定义驱动程序 .kos 使用保留或隐藏在内核其余部分的物理内存，但我不明白这如何影响虚拟地址。

任何有见地的掘金都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:41:58.497

感谢大家的帮助。我发现了这个问题——行为不端的驱动程序期望某些用户地址是 2MB 对齐的。因此，例如，如果有效的映射地址实际上是 0x2b3cc000，它将错误地对齐到 0x2b200000，并践踏我的应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T18:30:15.180

根据您的系统，您可能具有相同的虚拟->物理映射。如果您有其他工作设备，我会尝试在其上运行。这样您就可以立即确定是软件问题还是硬件问题。

运行用户代码或驱动程序代码时是否发生总线错误？

你说错误并不总是发生。当它发生在一个特定的构建中时，它总是发生在那个构建中还是仍然是零星的？

# android - 无法从本地服务器下载文件到安卓模拟器

> ID：10229601
> 
> 赞同：0
> 
> 时间：2012-04-19T13:54:26.730
> 
> 标签：android, download

我正在尝试从我的模拟器上的本地服务器下载数据，但我没有得到数据。这个任务怎么完成

我的下载活动是

```
public class DownloadZipActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       UnzipManager.startUnzipping();//Downloader.getZipURL();
//        System.out.println("    file     "+file);  
    }
} 
```

我的 Downloader.java 是

```
public class Downloader {

    public static String getZipURL(){
        String result = "";
        InputStream is = null;
        try{
            String url = "http://www.example.com/webservice-demo/File name.zip";
            String thePath = URLEncoder.encode(url, "UTF-8");
            System.out.println("     thePath    "+thePath);
            HttpPost httppost = new HttpPost(thePath);
            HttpParams httpParameters = new BasicHttpParams();

            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

            int timeoutSocket = 3000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

            DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
            Log.e("getZipURL", "Error in http connection "+e.toString());
            return null;
        }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();

            result=sb.toString();
            return result;
        }catch(Exception e){
            Log.e("convertZipURL", "Error converting result "+e.toString());
            return null;
        }
    }       

} 
```

我的 UnZipManager.java 类是

```
public class UnzipManager {

       private static String BASE_FOLDER;

       public static Context localContext;
       /*
       *You can use this flag to check whether Unzipping
       *thread is still running..
       */
       public static boolean isDownloadInProgress;
       /*
        * After unzipping using this flag ,you can check
        * whether any low memory exceptions
        * Occurred or not..and alert user accordingly..
        */
       public static boolean isLowOnMemory;

     public static void startUnzipping()
      {
             /*
             * MAKE SURE THAT localContext VARIABLE HAS BEEN
             * INITIALIZED BEFORE INVOKING THIS METHOD.
             *
             * ALSO MAKE SURE YOU HAVE SET "INTERNET" AND
             * "NETWORK ACCESS STATE" PERMISSIONS IN
             * APPLICATION'S MANIFEST FILE.
             *
             */
             Log.d("DEBUG","In startUnzipping()");
             //UnzipManager.BASE_FOLDER=UnzipManager.localContext.getFilesDir().getPath(); 
            /*
            *
            */
         // Log.d("DEBUG","BASE_FOLDER:"+UnzipManager.BASE_FOLDER);
           UnzipManager.isLowOnMemory=false;
           //Start unzipping in a thread..which is safer
           //way to do high cost processes..
           new UnzipThread().start();
    }

    private static class UnzipThread extends Thread{
             @Override
           public void run()
          {
                     UnzipManager.isDownloadInProgress=true;
                     Log.d("DEBUG","Unzipping----------------------------");
                 URLConnection urlConnection ;
                 try
                {
                      /************************************************
                      *
                      * IF you are unzipping a zipped file save under
                      * some URL in remote server
                      * **********************************************/
                    String url = "http://www.example.com/webservice-demo/Package name.zip";
                    String thePath = URLEncoder.encode(url, "UTF-8");
                     URL finalUrl =new URL(thePath
                           /* Url string where the zipped file is stored...*/);
                     urlConnection = finalUrl.openConnection();

                    //Get the size of the ( zipped file's) inputstream from server..
                         int contentLength=urlConnection.getContentLength();
                         Log.d("DEBUG", "urlConnection.getContentLength():"+contentLength);
                    /*****************************************************
                     *
                     * YOU CAN GET INPUT STREAM OF A ZIPPED FILE FROM
                     * ASSETS FOLDER AS WELL..,IN THAT CASE JUST PASS THAT
                     * INPUTSTEAM OVER HERE...MAKE SURE YOU
                     * HAVE SET STREAM CONTENT LENGTH OF THE SAME..
                     *
                     ******************************************************/
                     ZipInputStream zipInputStream = new ZipInputStream(urlConnection.getInputStream());
                     /*
                      * Iterate over all the files and folders
                      */
                     for (ZipEntry zipEntry = zipInputStream.getNextEntry();
                           zipEntry != null; zipEntry = zipInputStream.getNextEntry())
                          {
                              Log.d("DEBUG","Extracting: " + zipEntry.getName() + "...");

                             /*
                              * Extracted file will be saved with same
                              * file name that in zipped folder.
                              */
                                String innerFileName = BASE_FOLDER + File.separator + zipEntry.getName();
                                File innerFile = new File(innerFileName);
                                 /*
                                  * Checking for pre-existence of the file and
                                  * taking necessary actions
                                  */
                                if (innerFile.exists())
                                {
                                       Log.d("DEBUG","The Entry already exits!, so deleting..");
                                       innerFile.delete();
                                 }

                                /*
                                 * Checking for extracted entry for folder
                                 * type..and taking necessary actions
                                 */
                                if (zipEntry.isDirectory())
                                {
                                     Log.d("DEBUG","The Entry is a directory..");
                                     innerFile.mkdirs();
                                }
                                else
                               {
                                  Log.d("DEBUG","The Entry is a file..");
                                  FileOutputStream outputStream = new FileOutputStream(innerFileName);
                                  final int BUFFER_SIZE = 2048;

                                /*
                                * Get the buffered output stream..
                                * 
                                */
                                 BufferedOutputStream bufferedOutputStream =
                                  new BufferedOutputStream(outputStream,BUFFER_SIZE);
                                         /*
                                         * Write into the file's buffered output stream ,..
                                         */
                                        int count = 0;
                                        byte[] buffer = new byte[BUFFER_SIZE];
                                        while ((count = zipInputStream.read(buffer, 0, BUFFER_SIZE)) != -1)
                                        {
                                               bufferedOutputStream.write(buffer, 0, count);
                                        }
                                         /***********************************************
                                         * IF YOU WANT TO TRACK NO OF FILES DOWNLOADED,
                                         * HAVE A STATIC COUNTER VARIABLE, INITIALIZE IT
                                         * IN startUnzipping() before calling startUnZipping(),
                                         * AND INCREMENT THE COUNTER VARIABLE
                                         * OVER HERE..LATER YOU CAN USE VALUE OF
                                         * COUNTER VARIABLE TO CROSS VERIFY WHETHER ALL
                                         * ZIPPED FILES PROPERLY UNZIPPED AND SAVED OR NOT.
                                         *
                                        * ************************************************
                                        */
                                        /*
                                         * Handle closing of output streams..
                                         */
                                         bufferedOutputStream.flush();
                                         bufferedOutputStream.close();
                                  }
                                 /*
                                  * Finish the current zipEntry
                                  */
                                 zipInputStream.closeEntry();
                            }
                          /*
                          * Handle closing of input stream...
                          */
                           zipInputStream.close();
                             Log.d("DEBUG","--------------------------------");
                           Log.d("DEBUG","Unzipping completed..");
                     }
                     catch (IOException e)
                    {
                             Log.d("DEBUG","Exception occured: " + e.getMessage());
                            if(e.getMessage().equalsIgnoreCase("No space left on device"))
                                  {
                                         UnzipManager.isLowOnMemory=true;
                           }
                           e.printStackTrace();
                   }
                   UnzipManager.isDownloadInProgress=false;
            }
       };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T14:14:47.183

您应该将网址更改为：

```
 url = "http://localhost/example.com/webservice-demo/Package name.zip"; 
```

localhost = 10.0.2.2 是你的模拟器的本地主机我使用这个地址，我没有指定 www，虽然我的文件夹在 www 下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:08:09.937

您应该在 mainfest.xml 文件中添加互联网权限

# javascript - 在 CRM 2011 中为从功能区打开的表单调试 javascript 时，为什么会创建脚本块？

> ID：10229604
> 
> 赞同：5
> 
> 时间：2012-04-19T13:54:34.343
> 
> 标签：javascript, internet-explorer-9, dynamics-crm-2011

## 设置

我正在向现场 CRM 2011 中的自定义实体添加约会。

*   我单击功能区上的“新活动”按钮，选择约会，然后确定。
*   在打开的新窗口中，我按 F12 打开 IE 调试器，然后选择脚本选项卡，在我的 onLoad 函数和 FormScript.js.aspx 文件的 crmForm_window_onload_handler 中设置断点，然后单击开始调试按钮.
*   然后我重新加载约会窗口。

## 问题

crmForm_window_onload_handler 中的断点命中，但是当我进入我的自定义 js Web 资源文件 (appointment.js) 的 onLoad 函数时，而不是进入我的约会.js 文件的 onLoad 函数，它进入了 onLoad我的文件的精确副本，只有它的名称是脚本块（0-99 的一些随机数），即`script block(23)`. 为什么要创建这些脚本块？在保存中，我也在运行此代码：

```
Xrm.Page.getAttribute('new_issyncreqd').setValue(true);
Xrm.Page.getAttribute('new_issyncreqd').setSubmitMode("always"); 
```

但它实际上并没有保存，我猜它与脚本块有关......

* * *

## 更新

我确实弄清楚了为什么更新 IsSyncReqrdField 的代码不起作用。这适用于现场 CRM 2011 版本 V 5.0.9690.1992（汇总 6）。它显然对 Appointment 实体有一个错误，它首先保存实体，然后实际运行自定义 onSave 代码。这是它目前的样子：

```
function crmForm_onsave_handler(eventObj,eventArgs)
{
  try
  {
    var eContext=Mscrm.FormUtility.constructExecutionObject(eventObj,0,eventArgs,null);
    eContext = Mscrm.FormUtility.constructExecutionObject(eventObj,0,eventArgs,eContext)
    Mscrm.Form_onsave();
    eContext=Mscrm.FormUtility.constructExecutionObject(eventObj,1,eventArgs,eContext)
    NEW.Appointment.onSave(eContext); // <-- My custom OnSave Handler 
  }
  catch(e)
  {
    displayError('crmForm', 'onsave', e.description);
  }
} 
```

错误在于该`Mscrm.Form_onsave();`行实际上是将记录保存到数据库中，因此当自定义事件处理程序运行时，它已经被保存，并且在自定义事件处理程序中进行的任何更新都不会更新记录。

这个bug的修复是`bSaveInProgress = true;`在表单的onLoad中设置，然后bSaveInProgress = !isValid; event.returnValue = isValid; 在 onSave 中。将`bSaveInProgress = true;`阻止`Mscrm.Form_onsave();`实际保存记录，并且 event.returnValue 实际上会导致它被创建。它有效并且是一个黑客，但这是我想出解决这个错误的唯一方法......

* * *

## 问题依然存在

为什么要创建和执行脚本块而不是使用已经存在的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:43:30.170

首先，当内联 javascript 来自 XML 或 SVG 文件时，会创建脚本块。

这是一个已知的 IE 问题（扫描“脚本块”）：http: [//msdn.microsoft.com/en-us/ie/ff959805.aspx](http://msdn.microsoft.com/en-us/ie/ff959805.aspx)

您可以通过使用 IE9 中的“网络”选项卡然后捕获表单加载来查看 XML 文件。应该有一些实际上是 XML 的 aspx 文件。一个示例是 RenderGridView.aspx。

所以问题是再次检索 aspx 文件，然后执行内联函数替换前一个脚本块（因为 javascript 作为单个全局文件运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:39:25.150

在设置代码中断之前尝试单击“开始调试”按钮。另外，你用的是IE8还是9？

# c++ - ctime() 和日期/时间转换

> ID：10229610
> 
> 赞同：2
> 
> 时间：2012-04-19T13:54:48.793
> 
> 标签：c++, linux, string, date, ctime

我知道，这种特殊的事情已经被回答了很多次，但我认为，我的问题更多的是与一般 C++ 的东西有关，而不是`ctime()`日期/时间转换。我只是碰巧用这个试了一下。所以，这里是代码：

```
#include <iostream>
#include <ctime>

using std::cout;
using std::endl;
using std::string;

void strTime( int iM, int iD, int iY )
{
    time_t rwTime;
    time( &rwTime );            // current epoch time

    // 1st set:: using tmInfo_11
    struct tm *tmInfo_11; 
    tmInfo_11 = localtime( &rwTime );
    tmInfo_11->tm_mon = iM - 1;
    tmInfo_11->tm_mday = iD; 
    tmInfo_11->tm_year = iY - 1900;
    mktime( tmInfo_11 );
    cout << "tmInfo_11 RESULt: " << tmInfo_11->tm_wday << endl;

    // 2nd set:: using tmInfo_22 //
    struct tm tmInfo_22; 
    tmInfo_22 = *localtime( &rwTime );
    tmInfo_22.tm_mon = iM - 1;
    tmInfo_22.tm_mday = iD; 
    tmInfo_22.tm_year = iY - 1900;
    mktime( &tmInfo_22 );
    cout << "tmInfo_22 RESULt: " << tmInfo_22.tm_wday << endl;
}

int main()
{
    int iMM=12, iDD=9, iYY=2009;
    strTime( iMM, iDD, iYY );
} 
```

我的问题是：这两组代码有什么区别？无论哪种方式，我都可以实现同样的目标。显着的区别是每组的前两行，我不得不承认我没有全部理解。那么，任何人都可以向我解释一下吗？此外，第一剂与其他剂相比有什么优势/劣势？干杯！！

* * *

*只是为了完整起见*，这是我最终得到的代码，它给了我想要的结果。所以，基本上它是为了将来参考：

```
#include <iostream>
#include <fstream>
#include <ctime>

using std::cout;
using std::endl;
using std::string;

tm testTime( int iM, int iD, int iY );

int main()
{
    char tmBuff[20];
    int iMM=12, iDD=9, iYY=2009;

    tm myDate = testTime( iMM, iDD, iYY );
    strftime( tmBuff, sizeof(tmBuff), "%a, %b %d, %Y", &myDate );
    cout << "TESt PRINt TIMe: " << tmBuff << endl;
}

tm testTime( int iM, int iD, int iY ) 
{
    time_t rwTime; 

    struct tm tmTime;
    tmTime = *localtime( &rwTime );

    tmTime.tm_mon = iM - 1;
    tmTime.tm_mday = iD; 
    tmTime.tm_year = iY - 1900;
    mktime( &tmTime );
    return tmTime;
} 
```

**请注意**，它确实需要`*localtime( &rwTime )`指定 （即使 tmTime 之后被覆盖），否则 中的 Year(%Y)`strftime()`不起作用。感谢大家的帮助。干杯！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:59:19.340

第二个变体将结构的数据复制`tm`到您自己的结构中，而第一个变体只是使用指向 中的（静态）结构的指针`localtime`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:29:09.203

两个版本都是有效代码，但我对此有几点评论：

在第一个版本中，您使用的是您不拥有的数据结构。`tmInfo_11`指向由 localtime() 提供和管理的内存。当您的代码增长时，这可能会导致不必要的副作用。所以我认为这是不好的风格。

第二个版本的风格不错，但运行速度可能会慢一些，因为数据结构会被复制。但是您必须非常非常频繁地运行它才能看到相当大的差异。

在第二个版本中，我假设您可以省略对 localtime() 的调用，因为无论如何您都会覆盖结果，除了您显然不使用的时间条目。在第一个版本中，您不能省略 localtime()，因为您需要指向您使用的内存的指针。

你说你不明白这两个版本的区别。因此，我建议再次重温关于指针的课程以及它们何时有效以及何时不在一本好的教科书中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:00:37.303

这两个部分的前两行是关键。`localtime()`在静态缓冲区中创建它的输出，如果您只是将指针指向它产生的内容（如在第一部分中所示）然后再次调用它，您可能会发现它会覆盖您的第一个指针指向的内容。

第二个示例稍微好一些，因为您有效地复制了整个对象，尽管在多线程环境中仍然有可能最终导致损坏。

更好地使用`localtime_r()`它允许您将缓冲区作为参数传递，这样您就不会遇到这个问题。

# javascript - 正则表达式删除列“|” 特点

> ID：10229612
> 
> 赞同：0
> 
> 时间：2012-04-19T13:54:55.487
> 
> 标签：javascript, regex, string

如何`|`使用正则表达式从字符串中删除所有出现的字符？我试过了

```
string.replace(/|/gi,''); 
```

但这似乎不起作用......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T13:56:41.247

正则表达式是`/\|/`，你必须逃避`|`，因为在正则表达式中，`|`用于声明[替代品](http://www.regular-expressions.info/alternation.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:56:50.620

```
string.replace(/\|/gi,'') 
```

由于它是一个特殊字符，因此需要对其进行转义。你`\`用来逃避。

**[现场演示](http://jsfiddle.net/loktar/DAQt9/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T13:57:10.533

管道在正则表达式中具有[特殊含义，您需要对其进行转义：](http://www.regular-expressions.info/alternation.html)

```
string.replace(/\|/g,''); 
```

附带说明一下，当您不处理字母时，您不需要忽略大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T13:59:32.913

我刚试过这个：

```
<script language="javascript">
document.write('A|A');
document.write('A|A'.replace('|','B'));
</script> 
```

输出就是您要查找的内容：

```
A|AABA 
```

# objective-c - 检测内存增长

> ID：10229620
> 
> 赞同：0
> 
> 时间：2012-04-19T13:55:25.933
> 
> 标签：objective-c, c, xcode

我在 xcode 仪器中看到内存增长，所以在尝试消除问题后，我看到在我的音频缓冲区回调方法中，有一个代码块，当我擦除时，问题就解决了。所以，这个回调每秒发生多次并导致增长：

```
 static OSStatus recordingCallback(void *inRefCon, 
                                      AudioUnitRenderActionFlags *ioActionFlags, 
                                      const AudioTimeStamp *inTimeStamp, 
                                      UInt32 inBusNumber, 
                                      UInt32 inNumberFrames, 
                                      AudioBufferList *ioData)
    {

        AudioBuffer buffer;

        buffer.mNumberChannels = 1;
        buffer.mDataByteSize = inNumberFrames * 2;
        //NSLog(@"%ld",inNumberFrames);
        buffer.mData = malloc( inNumberFrames * 2 );
        // Put buffer in a AudioBufferList
        AudioBufferList bufferList;
        bufferList.mNumberBuffers = 1;
        bufferList.mBuffers[0] = buffer;

        OSStatus status;
        status = AudioUnitRender(audioUnit, 
                                 ioActionFlags, 
                                 inTimeStamp, 
                                 inBusNumber, 
                                 inNumberFrames, 
                                 &bufferList); 
..
..
..
 free(buffer.mData); 
```

你能在这里看到一些可能导致这种情况的线吗？是`buffer.mdata`免费的。还有一些我没有释放的东西，它正在增长。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:02:55.033

看起来你忘了释放你的`bufferList`.

# c# - 图像控件的 OnLoad 客户端事件

> ID：10229625
> 
> 赞同：1
> 
> 时间：2012-04-19T13:55:37.187
> 
> 标签：c#, javascript, asp.net, .net, onload

我需要将客户端`onLoad`事件与 ASP.Net Image 控件绑定。我已经尝试了很长时间，但没有成功。

函数名称`onload="onLoadFunction(this)"`

脚本：

```
function onLoadFunction(img) {
     $(img).css("visibility", "visible"); // Using jQuery
     // img.style.visibility = "visible"; // Using just javascript.
 } 
```

标记：

```
<asp:Image ID="imgTopFourImg2" runat="server" width="170px" height="112px" CssClass="ArticleImgHP" border="0" ImageUrl="hello.jpg" OnLoad="onLoadFunction(this)" /> 
```

这对我不起作用，如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:04:27.513

`$("img #xyz").bind("load", function () { $(this).css("visibility", "visible"); });`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:04:57.763

OnLoad 属性用于向 Load 事件添加事件处理程序，该事件是服务器端事件，而不是客户端事件。

如果要创建生成的图像元素的 onload 属性，则需要使用 Attributes 集合

```
imgTopFourImg2.Attributes["onload"] = "onLoadFunction(this)"; 
```

**从评论编辑**

由于图像位于转发器项目内，因此在后面的代码中不可用。处理[ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)事件：

```
void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

          // This event is raised for the header, the footer, separators, and items.

          // Execute the following logic for Items and Alternating Items.
          if (e.Item.ItemType == ListItemType.Item 
                  || e.Item.ItemType == ListItemType.AlternatingItem) 
             {

                var imgTopFourImg2 = e.Item.FindControl("imgTopFourImg2") as Image;
                if (imgTopFourImg2 != null)
                    imgTopFourImg2.Attributes["onload"] = "onLoadFunction(this)";
             }
          }
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:06:17.887

```
$("#imgTopFourImg2").bind("load", function () { $(this).show(); }); 
```

值得研究`show()`and`hide()`方法，因为您已经在使用 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:00:43.533

```
$("img #id").bind("load", function () { $(this).css("visibility", "visible"); }); 
```

# java - 如何从泛型中获取类类型信息？

> ID：10229626
> 
> 赞同：2
> 
> 时间：2012-04-19T13:55:43.053
> 
> 标签：java, generics

我有一个问题，我需要解决替换泛型类型参数的类的类型。这是代码：

```
public class EnumSetPlay {

    private enum SomeEnum {ONE, TWO}

    private static class Test<E extends Enum> {
        private Class<E> clazz = (Class<E>) GenericTypeResolver.resolveTypeArgument(getClass(), Test.class);;

        public void test() {
            for (E element : EnumSet.allOf(clazz))
                System.out.println(element);
        }
    }

    public static void main(String... args) {
        new Test<SomeEnum>().test();
    }
} 
```

我需要获取类类型**SomeEnum**。我尝试使用 spring GenericTypeResolver 类，但出现下一个错误：

 ****```
错误：不兼容的类型
要求：E
找到：对象
其中 E 是一个类型变量：
E 扩展了在类 Test 中声明的 Enum

```**  *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T17:52:39.167

尝试这个：

```
 public class EnumSetPlay {

    private enum SomeEnum {
        ONE, TWO
    }

    private static class Test<E extends Enum<E>> {

        @SuppressWarnings("unchecked")
        private Class<E> clazz = (Class<E>) GenericTypeResolver.resolveTypeArgument(getClass(), Test.class); ;

        public void test() {
            for (E element : EnumSet.allOf(clazz))
                System.out.println(element);
        }
    }

    private static class DummyTest extends Test<SomeEnum> {
    }

    public static void main(String... args) {
        new DummyTest().test();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:01:33.817

我认为这是不可能的，因为*类型擦除*会删除类型信息。一些链接：

*   [http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)
*   [Java 泛型 - 类型擦除 - 何时以及发生什么](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)
*   [http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:27:22.697

正如其他答案中所解释的那样，由于类型擦除，您尝试做的事情根本不可能。如果您要实现您想要做的事情，唯一的解决方案是将类作为构造函数的参数传递：

```
public class EnumSetPlay {

    private enum SomeEnum {ONE, TWO}

    private static class Test<E extends Enum<E>> {
        private Class<E> clazz ;

        public Test(Class<E> clazz) {
            this.clazz = clazz;
        }

        public void test() {
            for (E element : EnumSet.allOf(clazz))
                System.out.println(element);
        }
    }

    public static void main(String... args) {
        new Test<SomeEnum>().test();
    }
} 
```****

# java - 是否有适用于 windows mobile 的 JAVA FX 2.0+ 运行时

> ID：10229631
> 
> 赞同：1
> 
> 时间：2012-04-19T13:56:10.993
> 
> 标签：java, javafx, windows-mobile-6.5

我能找到的最新版本的 JavaFX 运行时是 1.3 Early Access。JavaFX 2.2 SDK 没有移动配置文件。这是否意味着移动设备上的 Java FX 在退出抢先体验之前就已经被淘汰了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:08:57.653

今天，JavaFX 2+ 仅[针对](http://docs.oracle.com/javafx/2.0/system_requirements/jfxpub-system_requirements.htm)台式机/笔记本操作系统——还没有关于移动支持的官方消息。

您可以获得的最接近的移动体验可能是在[Windows 7 平板电脑](http://www.samsung.com/us/computer/tablet-pcs/XE700T1A-A01US)上运行 JavaFX 2+ 。

有关 JavaFX 路线图信息：

*   请参阅[官方 JavaFX 路线图](http://www.oracle.com/technetwork/java/javafx/overview/roadmap-1446331.html)。
*   另请参阅 JavaFX 团队成员的此[JavaFX 常见问题解答](http://blog.netopyr.com/2012/02/23/most-often-asked-questions-about-javafx/)。
*   [请参阅2012 JavaFX Resolutions](http://fxexperience.com/2012/01/2012-javafx-resolutions/)的第 5 点，其中提到了嵌入式操作（*我认为*这是 Oracle 对手机/平板电脑部署的广泛分组）。

路线图上的项目包括：

> **多点触控和手势支持**
> 
> JavaFX 将提供对多点触控和手势的全面支持，以更好地满足台式机、平板电脑和嵌入式设备中对触控显示器的要求。
> 
> **传感器支持**
> 
> JavaFX 将支持设备上的传感器，包括加速度计、陀螺仪和地理位置。

*以下信息基于推测，并非事实。*

提供 Java API 以彻底支持各种移动平台需要的不仅仅是 JavaFX 支持。我认为甲骨文很可能会提供：

*   基于标准（非微型版）Java 运行时的现代移动操作系统的[连接设备配置](http://www.oracle.com/technetwork/java/javame/java-me-overview-402920.html)的更新版本。
*   用于打包Java + JavaFX + CDC Mobile OS 特定扩展的[拼图模块化构建 + 适用于目标操作系统的应用程序的工具。](http://openjdk.java.net/projects/jigsaw/)
*   在标准 Java 平台上连接本地 OS 库以做一些困难的事情的方法。
*   支持 Windows Phone、Windows 8 平板电脑、iOS 和 Android/Linux 变体作为部署目标。

我认为新平台不太可能支持 Windows Mobile 6.5 和 Symbian 等较旧的运行时。我没有任何具体信息表明上述任何一项实际上都会完成，并且依赖于当前官方路线图以外的任何内容来进行实质性关键开发工作将是鲁莽的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:59:50.447

AFAIK，移动配置文件计划在未来发布。AFAIK 尚未就 Oracle 将支持哪些平台进行沟通。

# c# - 00:00 时间格式的正则表达式 > 24

> ID：10229632
> 
> 赞同：2
> 
> 时间：2012-04-19T13:56:17.213
> 
> 标签：c#, asp.net, regex, validation, textbox

我发现了很多 RegEx 示例。例如这个：

```
^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$ 
```

可以使用 9:00 或 09:00。问题是，它仅限于 24 小时，但我需要它来验证持续时间，而不是确切的时间，所以它可能大于 24 小时。

我有一个使用 RegularExpressionValidator 验证的 TextBox。我对正则表达式一无所知，也找不到某种生成器。

你能帮我完成这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:00:09.393

只需使用：

```
^\d+(:[0-5]\d){1,2}$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:06:23.440

如果您不限于使用正则表达式，您可以使用[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)并让[`Parse`](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)时间为您服务。然后，您可以随意访问 、 等的`Days`不同`Hours`属性`Minutes`。

对我来说，这比维护正则表达式要容易得多

# sonarqube - Sonar Eclipse 未使用“与服务器上使用的质量配置文件相同的配置文件”

> ID：10229634
> 
> 赞同：1
> 
> 时间：2012-04-19T13:56:19.377
> 
> 标签：sonarqube

我已经在 Windowx XPSP3 上的 helios 上安装了声纳日食。当我远程分析项目时，它工作正常。但是当我选择在本地分析项目时，它总是在“Sonar Way”配置文件中运行分析。声纳日食的[文档](http://www.sonarsource.org/sonar-eclipse-2-0/)提到“本地分析使用与服务器上用于最新分析的质量配置文件相同的质量配置文件”。

我可能没有正确配置它吗？我已按照文档中提到的所有步骤进行操作。有什么我可能会丢失的设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:37:48.977

哦，这是我的一个错误..误解了文档的内容。文档提到：

> 本地分析使用与服务器上用于最新分析的质量配置文件相同的质量配置文件。

但是在这里，在服务器上意味着不是通过在声纳日食中选择“远程”，而是通过与其他一些运行程序（如简单的 java 运行程序）分析同一个项目。一旦使用简单的 java 运行程序在服务器上分析了相同的项目（具有相同的名称），则在通过 sonar-eclipse 在本地运行时使用该运行期间使用的质量配置文件。这也意味着：

1.  您希望使用声纳 Eclipse 分析的项目应该已经在服务器上使用其他运行程序进行了分析，例如简单的 java 运行程序。
2.  如果在服务器上更改了质量配置文件，使用 sonar-eclipse 远程运行分析没有效果，必须再次使用简单的 java runner 执行分析，以便在本地运行时反映。
3.  在本地运行时，sonar-eclipse 无论如何都必须连接到服务器。

# sql-server-2008 - 将 FLOAT 列覆盖为 VARCHAR

> ID：10229636
> 
> 赞同：2
> 
> 时间：2012-04-19T13:56:30.807
> 
> 标签：sql-server-2008

我有一个表，其中有一个电话号码列定义为 - 准备好 - 一个浮点数！

我想将其更改为 varchar。

我的问题是，我可以即时更改类型，还是必须创建另一列然后复制/转换（第二个选项会破坏已经在使用当前列的某些代码，它可能是挑战找到它们）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:59:32.057

我认为您需要添加新列并复制现有数据，然后删除旧列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:02:17.807

尝试使用 str() 函数。

选择 Str(float_field, 25, 5)

[http://msdn.microsoft.com/en-us/library/ms189527.aspx](http://msdn.microsoft.com/en-us/library/ms189527.aspx)

# java - 在应用程序中切换图像

> ID：10229638
> 
> 赞同：0
> 
> 时间：2012-04-19T13:56:34.000
> 
> 标签：java, android

我已经决定我想为我的应用程序的问题使用图像，就像以前我使用文本一样。

下面的代码更改了存储在字符串数组中的问题。

我现在有一系列图像，也称为问题

我将如何在这里更改每个问题的图像？

而不是 setText 我会用什么？

```
 ques.setText(questions[rnd2]);
if(questions[rnd2]=="x")
{
 change_question(rnd2);
}
}
questions[rnd2]="x"; 
```

提前谢谢你。

KCC人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:14:16.023

如果要将图像设置为 ques (TextView) 本身，请使用它。

ques.setBackgroundResource(imageIds[rnd2]);

[示例 imageIds

```
 imageIds = {R.drawable.img1,R.drawable.img2}
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:01:29.807

```
arr[0] = "R.drawable.q1"; // your image ID
arr[1] = "R.drawable.q2";
arr[2] = "R.drawable.q2";

imageView.setImageBitmap(arr[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:03:22.910

听起来您只想将图像放在资源文件夹中，然后基于此更改视图的背景可绘制对象或图像视图的源可绘制对象。

因此，只需将您想要的图像放在资源文件夹中，例如：

```
if(question == 1)
{
   imageView.setImageResource(R.drawable.question1);
} 
```

因此，只需将这些资源 ID 存储在您的数组中。

# serialization - 查看协议缓冲区消息文件

> ID：10229643
> 
> 赞同：0
> 
> 时间：2012-04-19T13:56:45.570
> 
> 标签：serialization, command-line, protocol-buffers

是否有命令行工具可以查看包含多个协议缓冲区消息（相同消息类型）的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T12:15:23.327

如果您仍然需要此类工具，我们已经构建了它：[http ://temk.github.io/protobuf-utils/](http://temk.github.io/protobuf-utils/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:58:54.293

`Message`如果您知道类型，那么编写自己的应该是微不足道的。例如，在 C++ 中，您可以使用[`Message::DebugString()`](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message#Message.DebugString)或[`Printer`](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.printer)类。

请注意，如果单个文件包含多个序列化`Message`的 s，则需要正确处理它们的解析，因为`ParseFromIstream`,`ParseFromFileDescriptor`等都解析整个文件。我想你可以通过将现有的包装`Message`在一个只包含现有类型`Message`的单个重复字段的新字段中来做到这一点。`Message`

# bash - 如何创建秒表 Bash 脚本以不断显示经过的时间？

> ID：10229644
> 
> 赞同：4
> 
> 时间：2012-04-19T13:56:46.387
> 
> 标签：bash, time, stopwatch, elapsedtime

你可以把它想象成一个非常简单的秒表。我正在尝试编写一个 bash 脚本，该脚本显示自指定日期以来经过的时间并每秒更新一次输出。

首先，在脚本中指定一个 UNIX 日期：`Fri Apr 14 14:00:00 EDT 2011`. 这将是秒表开始的时候。

现在，当您运行脚本时，您会看到...

`06d:10h:37m:01s`

几秒钟后你会看到......

`06d:10h:37m:05s`

我不是想为每一秒打印一个新行。该脚本应该只有 1 行输出，并且每秒更新一次。显然，您可以随时退出脚本并重新启动它，并且由于开始时间是硬编码的，所以它仍然会正常运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:09:31.667

我在长时间运行的脚本中使用以下代码片段。计时器在一个函数（单独的进程）中运行，如果主进程被键盘中断终止，它将被杀死（陷阱）。输出显示从计时器开始经过的时间：

```
... working [hh:mm:ss]  00:07:58 
```

片段：

```
#===  FUNCTION  ================================================================
#          NAME:  progressIndicatorTime
#   DESCRIPTION:  Display a progress indicator with seconds passed.
#    PARAMETERS:  [increment]   between 1 and 60 [sec], default is 2 [sec]
#===============================================================================
function progressIndicatorTime ()
{
  declare default=2                                       # default increment [sec]
  declare increment="${1:-$default}"                      # 1\. parameter or default
  declare format='\b\b\b\b\b\b\b\b%02d:%02d:%02d'         # time format hh:mm:ss
  declare timepassed=0
  declare seconds minutes hours

  [[ ! "$increment" =~ ^([1-9]|[1-5][0-9]|60)$ ]] && increment=$default
  printf " ... working [hh:mm:ss]  00:00:00"
  while : ; do                                            # infinite loop 
    ((seconds=timepassed%60))
    ((minutes=timepassed/60))
    ((hours=minutes/60))
    ((minutes=minutes%60))
    printf "$format" $hours $minutes $seconds
    sleep $increment || break                             # sleep ...
    ((timepassed+=increment))
  done
}    # ----------  end of function progressIndicatorTime  ----------

progressIndicatorTime &                                   # run progress indicator
declare progressIndicatorPid=${!}                         # save process ID
trap  "kill $progressIndicatorPid" INT TERM               # trap keyboard interrupt

#
# run long command
#

kill -s SIGTERM $progressIndicatorPid                     # terminate progress indicator 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T23:36:52.737

艺术可以使用一些工作，但试试这个：

```
#!/bin/bash

ref_date='Thu Apr 19 17:07:39 CDT 2012'
ref_sec=$(date -j -f '%a %b %d %T %Z %Y' "${ref_date}" +%s)
update_inc=1

tput clear
cat <<'EOF'

            [|]     [|]
         _-'''''''''''''-_
        /                 \
       |                   |
       |                   |
       |                   |
        \                 /
         '-_____________-'
EOF

while :
do
  ((sec=$(date +%s) - ${ref_sec}))
  ((day=sec/86400))
  ((sec-=day*86400))
  ((hour=sec/3600))
  ((sec-=hour*3600))
  ((min=sec/60))
  ((sec-=min*60))
  tput cup 6 14
  printf "%.2id:%.2ih:%.2im:%.2is\r" ${day} ${hour} ${min} ${sec}
  sleep ${update_inc}
done

exit 0 
```

请注意，第一个 date 命令的语法适用于 OSX。

对于 GNU 日期，请使用`date --date="${ref_date}" +%s`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:59:36.917

如果你有 Bash4 或 ksh93，你可以使用`printf %()T`语法来打印`strftime`格式。以下示例是以您想要的格式打印的 Bash 4。Bash 精度限制为 1 秒。ksh93 支持浮点数并且需要一些修改。

```
#!/usr/bin/env bash

# To supply a default date/time. To use now as the default, leave empty, or run with a null first arg.
deftime='Fri Apr 14 14:00:00 EDT 2011'

if (( ${BASH_VERSINFO[0]}${BASH_VERSINFO[1]} >= 42 )); then
    unixTime() {
        printf ${2+-v "$2"} '%(%s)T' -1
    }
else
    unixTime() {
        printf ${2+-v "$2"} "$(date '+%s')"
    }
fi

stopWatch() {
    local timestamp="$(date ${1:+'-d' "$1"} '+%s')" curtime day=$((60*60*24)) hour=$((60**2))
    # unixTime -1 timestamp

    while
        unixTime -1 curtime
        (( curtime -= timestamp ))
        printf '%02dd:%02dh:%02dm:%02ds\r' $(( curtime / day )) $(( (curtime / hour) % 24 )) $(( (curtime / 60) % 60 )) $(( curtime % 60 ))
        do sleep 1
    done
}

stopWatch "${1-deftime}" 
```

您可能还对`$SECONDS`变量感兴趣。不幸的是，没有方便的方法来接受您想要的人类可读的日期。这将需要大量的解析工作。date 命令（尤其是 GNU date）可以在有限的范围内做到这一点。

# objective-c - 如何在 ios 5.0 中执行凹凸失真？

> ID：10229645
> 
> 赞同：0
> 
> 时间：2012-04-19T13:56:47.030
> 
> 标签：objective-c, ios, uiimageview, uiimage, core-image

我需要在**ios 5.0**中执行 Bump Distortion ...我的 xcode 没有显示任何错误，而且我没有得到任何输出 ...同时跟踪并打印**Bump 过滤器**实例它打印空值...

任何想法...

*一些帖子显示在 ios 5.0 中不起作用，* 还有其他方法可以执行凹凸失真...

提前致谢....

问候，

间谍网

我的代码...

```
context = [CIContext contextWithOptions:nil];
     CIFilter *bumpDistortion = [CIFilter filterWithName:@"CIBumpDistortion"];
     [bumpDistortion setValue:ciimage forKey:kCIInputImageKey];
     [bumpDistortion setValue:[CIVector vectorWithX:200 Y:150] forKey:@"inputCenter"];
     [bumpDistortion setValue:[NSNumber numberWithFloat:100] forKey:@"inputRadius"];
     [bumpDistortion setValue:[NSNumber numberWithFloat:3.0] forKey:@"inputScale"];

    CIImage *imageOutput = [bumpDistortion outputImage];

    CGImageRef cgimg = [context createCGImage:imageOutput fromRect:[imageOutput extent]];
    UIImage *newImg = [UIImage imageWithCGImage:cgimg];

    [self.imageView setImage:newImg]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:39:42.787

正如 omz 指出的那样，从 iOS 5.1 开始，这个特殊的 Core Image 过滤器就消失了。

但是，您可以使用我的[GPUImage](https://github.com/BradLarson/GPUImage)框架和 GPUImageBulgeDistortionFilter 轻松做到这一点：

![凹凸失真](../Images/43ab20a54d804377589acc0b318f2e8c.png)

要处理 UIImage 并获取 UIImage 结果，您将使用如下代码：

```
UIImage *inputImage = [UIImage imageNamed:@"test.jpg"];
GPUImageBulgeDistortionFilter *stillImageFilter = [[GPUImageBulgeDistortionFilter alloc] init];
UIImage *quickFilteredImage = [stillImageFilter imageByFilteringImage:inputImage]; 
```

您还可以实时对实时视频或预先录制的电影执行此操作。

[我在此答案](https://stackoverflow.com/a/9896856/19679)中展示了您可以使用此框架执行的其他一些扭曲。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:13:04.787

调用`[CIFilter filterNamesInCategory:kCICategoryDistortionEffect]`将显示失真过滤器（例如`CIBumpDistortion`）在 iOS 上根本不可用。

您可以使用相同的方法`kCICategoryBuiltIn`来获取所有可用过滤器的列表。

# blackberry - 使用 rapc 编译时出错

> ID：10229653
> 
> 赞同：1
> 
> 时间：2012-04-19T13:57:06.007
> 
> 标签：blackberry

我给出了以下命令来生成 cod 文件 D:\j2me\j2meSoftware\For Blackberry\BlackBerry\bin>rapc import="C:\temp\net_rim_api.jar" jad="MCSMobileJ2ME.jad" codename=MCSMobileJ2ME -midlet D： \j2me\Product\workspace\MCSMobileJ2ME.mtj.tmp\emulation\MCSMobileJ2ME.jar

它给出了以下错误。我正在使用中间件。我的 MCSMobileJ2ME 类扩展了 MIDLet。

它正在搜索的 init 成员是什么，为什么它在 rim.resources 中搜索并附加了我的类名？

com.rim.resources.MCSMobileJ2MERIMResources：错误！：类：com.mcs.mobile.midlet.MCSMobileJ2MEMidlet 没有成员：

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:34:43.940

在您的 jar 文件上启动 preverify.exe 并指定相同的 net_rim_api.jar。这是为了确保你的 jar 文件符合 RIM API SDK 规则并且里面有兼容的字节码。

当 preverify.exe 成功完成他的工作并且没有错误时，运行 rapc.exe。

# sencha-touch - 验证来自服务器的数据

> ID：10229654
> 
> 赞同：0
> 
> 时间：2012-04-19T13:57:09.933
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个通过 ajax 代理加载数据的商店。我想做的是在商店加载之前检查数据（如属性的值）。

我已经尝试使用商店的“加载前”事件来做到这一点，但是当我尝试从那里获取记录时，`operation.getRecords();`它给了我一个空数组..

我知道 Sencha Touch 中有一些验证系统，但它似乎不包括来自服务器的数据

有人对此有解决方案吗？

**更新**

好的，尽管临时存储是一个解决方案，但我找到了另一个解决方案，它包括在存储加载后检查，然后从中删除脏记录。

此外，在 Sencha 论坛上，有人告诉我“扩展阅读器（json 或 xml...），然后验证 getResponseData（解码对 JavaScript 的响应的方法）中的数据。”

所以我在我的商店里试过这个

```
reader: {
  rootProperty: 'data',
  getResponseData: function(response){
    console.log(response);
    return response;
  }
} 
```

但这并没有改变任何东西，知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:07:59.013

没有干净的方法可以做到这一点。

`beforeload`在发出实际请求之前调用，所以它对你没有用。

我能想到的最干净的方法是监听`load`事件（在临时存储中），然后在那里验证您的数据。如果正确，则将存储数据移动到可见存储中。

# cocoa-touch - 核心动画VS。简单游戏的 Cocos2d 性能

> ID：10229658
> 
> 赞同：2
> 
> 时间：2012-04-19T13:58:01.213
> 
> 标签：cocoa-touch, cocos2d-iphone

我已经使用 Cocoa Touch 有一段时间了，非常喜欢它。对于我的下一个游戏，我希望用户能够用手指追踪路线并让图像跟随该路径。它还将涉及碰撞检测，例如这里有一堵墙。我已经在 Core Animation 中看到过碰撞检测，并且我知道 CGPath() 和类似的函数可能会帮助我跟踪图像要遵循的路径。所以我的问题是，当整个框架中有超过一半的代码与 Cocoa Touch 重复时，为什么还有这么多人使用 Cocos2d。我在这里缺少性能问题吗？我不能制作一个像飞行控制这样的手指追踪游戏，它只使用 Cocoa Touch 来检测墙壁的碰撞。我真的很想在 Interface Builder 中布置关卡。我需要的最低构建要求是游戏能够在 iPhone3g 及更高版本上运行，这意味着我也可以使用 Storyboards。有没有人看到我通过试图躲避 Cocos2d 进入一个痛苦的世界。我应该分解并将该框架用于此类项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:03:31.000

您的问题非常“哲学”，我认为许多开发人员在某些时候为自己思考过同样的疑问。

对我来说，我在几个应用程序中使用了 cocos2d，因为它对游戏典型概念的“开箱即用”支持（最终它是一个*游戏引擎*）：精灵和精灵表；iPhone 图形芯片的原生格式（PVRTC 纹理）；物理引擎和碰撞检测。我也喜欢认为 cocos2d 在处理复杂的 Open GL 方面做得很好，为我节省了大量时间（换句话说，我只会在不使用 Open GL 的情况下使用 Core Automation 编写游戏）。

另一方面，在我看来，核心自动化是一种更广泛的技术，包括对 Quartz 和 Open GL 的支持，但不知何故处于底层图形系统（无论是 Open GL 还是 Quartz）和你的游戏。通过使用 Core Animation，您将不得不（重新）编写许多您已经在 coco2d 中免费找到的代码（就像我上面强调的三点）。还请查看[有关该主题的这篇文章](http://www.angryfishstudios.com/2011/04/sprites-using-only-coreanimation/)。

两条路都可以，在一种情况下你必须掌握一个新的自定义框架（cocos2d）；另一方面，您将需要编写一些“通用”代码来处理基本内容（即，在 Core Automation 之上构建您自己的迷你游戏引擎）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:32:24.073

就屏幕内容而言，Cocos2D 只是 OpenGL 的一个包装器，您想要在 OpenGL 中完成的许多任务已经为您解决了。OpenGL 比 UIKit 更快，并且可以产生更多您可能希望在游戏中使用的图形效果（例如粒子效果，尽管您现在可以在 iOS5 中的 UIKit 中实现这些效果）。

虽然有一些简单的游戏是用 UIKit 制作的，如果你只是用手指拖动图像，UIKit 应该足够快。

# java - 为什么我的 alpha-beta 修剪实现不起作用？

> ID：10229662
> 
> 赞同：1
> 
> 时间：2012-04-19T13:58:06.873
> 
> 标签：java, artificial-intelligence, reversi

我正在使用维基百科伪代码来针对 -

```
function alphabeta(node, depth, α, β, Player)         
    if  depth = 0 or node is a terminal node
        return the heuristic value of node
    if  Player = MaxPlayer
        for each child of node
            α := max(α, alphabeta(child, depth-1, α, β, not(Player) ))     
            if β ≤ α
                break                             (* Beta cut-off *)
        return α
    else
        for each child of node
            β := min(β, alphabeta(child, depth-1, α, β, not(Player) ))     
            if β ≤ α
                break                             (* Alpha cut-off *)
        return β 
```

这是我的java实现 -

```
private int alphabeta(Node newNode, int depth, int alpha, int beta, boolean Player) {
    Integer[] children;
    if(depth == 0 || newNode.allNodesFull()){
        return (newNode.blacknodes() - newNode.whitenodes());
    }
    if(Player == false){
        children = newNode.findMovesBlack();
        Arrays.sort(children);
        for(Integer child: children){
            nodesGenerated ++;
            alpha = Math.max(alpha, alphabeta(new Node(newNode.move(child), true),
                            depth - 1, alpha, beta, !Player));
            if(beta <= alpha)
                break;
        }return alpha;
    }else{
        children = newNode.findMovesWhite();
        Arrays.sort(children);
        for(Integer child: children){
            nodesGenerated ++;
            beta  = Math.min(beta, alphabeta(new Node(newNode.move(child), false), 
                            depth - 1, alpha, beta, !Player));
            if(beta <= alpha)
                break;
        }return beta;
    }
} 
```

在对我的代码进行了一些修改之后，它不再存在提前返回的问题，但是我确实遇到了 alpha 和 beta 永远不会改变的问题

我会解释发生了什么，假设他们工作

findMovesBlack() 和 findMovesWhite() 都返回 Integer[] 数组，其中包含任一玩家可以移动的可能位置，无论轮到谁。对于黑白棋的初始位置，findMovesBlack() 将返回 [19, 26, 37, 44]

如果 findMovesBlack() 和 findMovesWhite() 的长度都为 0，则 allNodesFull() 返回一个布尔值。

blacknodes() 和 whitenodes() 分别返回黑色或白色节点的数量。

Node.move(int coordinate) 返回一个 String[] 数组，其中包含已翻转和放置的新位置。相信我，它工作正常。

a Node(String[] gameboard, boolean player-to-move) 只是使用我们找到的参数设置了一个新位置。

我相信这就是你需要看到的。我已经解决了后端的所有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:29:38.303

答案在于 beta 和 alpha 值的实现。我不得不经常弄乱相对于 = 符号的位置。

# javascript - 在客户端使用 javascript、ajax 或 php 计算填充字段的数量？

> ID：10229666
> 
> 赞同：0
> 
> 时间：2012-04-19T13:58:19.707
> 
> 标签：javascript, forms, count, field

我在一种形式中有 9 个输入和 30 个文本区域。一些输入是自动填充的。我需要计算那些被填满的。

是否有 javascript、ajax 或任何其他脚本语言可以做到这一点？我的表格可以在以下位置看到：

[http://www.41q.org/admin/data/register_form.php](http://www.41q.org/admin/data/register_form.php)

（此网页通过 javascript 包含在另一个安全网页中）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:01:54.573

```
var elements = document.forms['form_register'].elements,
    not_filled = 0;
for( var i = 0, l = elements.length; i < l; i++ ) {
   if( elements[i].value.length === 0 ) {
       // do something to the element?
       not_filled++;
   }
}
console.log(not_filled, " elements were no filled"); 
```

注意：我不确定 JS 是否应该是您运行的唯一验证...始终建议使用服务器端验证。

# jquery - Jquery DateTimePicker 不使用 CSS 显示

> ID：10229668
> 
> 赞同：0
> 
> 时间：2012-04-19T13:58:32.813
> 
> 标签：jquery, css, asp.net-mvc, jquery-ui

我正在使用在这里找到的 DateTimePicker：http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)（请注意，如果我在 Jquery 中使用默认的 DatePicker，也会遇到下面描述的相同问题）。

我已经检查过我是否多次安装/重新安装了适当的 CSS、图像、jquery 版本，但我似乎找不到导致我的 DateTimePicker 看起来像这样的原因：

![http://imgur.com/D1t78](../Images/2ead61041f8ade3d2e1282bf77941daa.png)

如果我删除所有 CSS（包括我网站的默认 MVC CSS），我会失去一周中的几天的蓝色背景（这些不应该由 Jquery UI 主题着色吗？）。

我需要去哪里解决我的问题？

编辑以显示我的代码：

这是我在页面中呈现的 PartialView：

```
<link href="@Url.Content("themes/ui-lightness/jquery-ui-1.8.19.custom.css")" rel="stylesheet"
    type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.19.custom.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-timepicker-addon.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/FillCourseForm.js")" type="text/javascript"></script>
<div id="CourseFormFields">
<p>the string is @ViewBag.selectedString</p>
@using (Html.BeginForm("ApplyToTeach", "Course", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <fieldset>
    <div class="editor-label">
        @Html.LabelFor(model => model.StartDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.StartDate)
        @Html.ValidationMessageFor(model => model.StartDate)
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

和jQuery：

```
$("#StartDate").datetimepicker({
    ampm: true
}); 
```

生成的 HTML（被截断一点以防止大量代码墙）：

```
<!DOCTYPE html>
<html>
<head>
    <title>ApplyToTeach</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="themes/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet"
    type="text/css" />
    <script src="/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-ui-1.8.19.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.min.js"  type="text/javascript"></script>
</head>
<body>
    <div class="page">
       <div id="header">
            <div id="title">
                <h1>St. Paul School of Catechesis</h1>
            </div>

            <div id="logindisplay">
                    [ <a href="/Account/LogOn">Log On</a> ]

            </div>
            <div id="menucontainer">
                <ul id="menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="/Student">Students</a></li>
                    <li><a href="/Course">Courses</a></li>
                    <li><a href="/Instructor">Instructors</a></li>
                </ul>
            </div>
        </div>
        <div id="main">
            <script src="/Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
<div id="originalForm">
<link href="themes/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet"
    type="text/css" />
<script src="/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.8.19.custom.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
<script src="/Scripts/FillCourseForm.js" type="text/javascript"></script>
<div id="CourseFormFields">
<p>the string is </p>
<form action="/Course/ApplyToTeach" method="post">    <fieldset>
        <legend>CourseTemplates</legend>
        <div class="editor-label">
            <label for="StartDate">StartDate</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The StartDate field is required." id="StartDate" name="StartDate" type="text" value="1/1/0001 12:00:00 AM" />
            <span class="field-validation-valid" data-valmsg-for="StartDate" data-valmsg-replace="true"></span>
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form></div>
</div>
<div id ="divToAppend">
</div>
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:41:40.973

我将这是第二个答案，因为我的第一个答案对您的代码有好处。

如果您在 PartialView 中注意到，您将使用 Url.Content 路径作为脚本和 css。但是，您没有像使用脚本那样使用来自根目录的路径作为 jquery-ui.custom.css 路径。笔记...

```
<link href="@Url.Content("themes/ui-lightness/jquery-ui-1.8.19.custom.css")" rel="stylesheet"
    type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script> 
```

我相信它应该是......（替换为 CSS 的适当路径 - 我总是将我的 CSS 放在我项目的 /Content 文件夹中）。

```
<link href="@Url.Content("~/Content/themes/ui-lightness/jquery-ui-1.8.19.custom.css")" rel="stylesheet"
    type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:29:51.453

这可能会或可能不会回答您的问题，但是，在查看您的代码之后，您的 HTML 相当混乱，因为您在 HTML 正文中包含 JavaScript 和 CSS。这并不能保证浏览器会正确执行它。

相反，我建议将 JavaScript 和 CSS 包含在适当的标题中的 _Layout 页面中，或者至少在标题中创建一个部分，以便在您在局部视图中引用它时确保正确放置。这是一个例子......

在您的 _Layout 中：

```
<head>
  <!-- Put your links and scripts first. -->
  <link ...>
  <script ...>
  <!-- Then make sure you include this. -->
  @RenderSection("Header", false)
</head> 
```

然后，在您的局部视图中，您可以这样做：

```
@* At the top of your partial view *@
@section Header {
<link href="@Url.Content("themes/ui-lightness/jquery-ui-1.8.19.custom.css")" rel="stylesheet"
    type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.19.custom.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-timepicker-addon.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/FillCourseForm.js")" type="text/javascript"></script>
} 
```

当 HTML 呈现时，您会发现那些 script 和 link 标签现在已被放置在适当的 HTML 的 Header 部分中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:03:25.733

确保下载日期选择器所需的文件并将它们包含到您的页面中。

[http://jqueryui.com/download](http://jqueryui.com/download)

ui 核心和 datepicker 小部件

# jquery - HTML / CSS定位中的流程图？

> ID：10229669
> 
> 赞同：0
> 
> 时间：2012-04-19T13:58:34.317
> 
> 标签：jquery, html, css, xhtml, flowchart

我正在尝试使用 HTML 和 CSS 制作流程图，但对于我用于行框子框和答案的 div 数量来说，这证明非常困难。

这是我的 Jsfiddle，创建此流程图并定位它们的最佳方法是什么？

这是我迄今为止尝试过的：http: [//jsfiddle.net/xyQPT/7/](http://jsfiddle.net/xyQPT/7/)

可以使用 jquery 来定位 div 吗？甚至用箭头连接它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:19:36.360

我建议为您的子项目使用 UL，然后只需使用背景图像并将文本偏移到背景图像的宽度。这将呈现连接的外观。

# java - Shell 脚本中的 Java DB 连接池

> ID：10229671
> 
> 赞同：0
> 
> 时间：2012-04-19T13:58:38.557
> 
> 标签：java, shell, connection-pooling

当从 shell 脚本调用 java 代码时，连接池数据库连接是否有意义，或者使用单个连接更好？每次调用 shell 脚本后 jvm 不会退出，每次调用脚本时都强制重新创建数据库池/工厂/等？

例如，我有一个调用 shell 脚本的外部进程，然后这个 shell 脚本调用一个 java 类，该类根据调用的操作执行 1 个或多个 DB 操作（查询、插入、更新、删除。）。这是一个独立的批处理过程，它不使用像 tomcat 这样的 servlet 容器。我的外部进程一遍又一遍地调用这个 shell 脚本。

我的环境是一个调用 java 应用程序（main() 方法）的 bash shell 脚本，它利用 spring jdbc 和 commons-dbcp 1.4 进行数据库处理和池化。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:29:59.053

1.  打开数据库连接在资源和性能（响应时间）方面都是非常昂贵的事情。

2.  当**你不使用连接池**时，你获取连接，使用它然后关闭它。每次需要数据库交互时都会重复此操作。

3.  连接池通过创建一个可以重复使用的连接池来避免这种情况，从而节省每次创建连接的时间和资源。

4.  无论您使用**servlet 容器还是独立应用程序**都没有关系。这取决于您的应用程序（网络/独立）与数据库交互的方式。

5.  如果您的应用程序有很多涉及并发数据库访问的并行操作，那么使用连接池将非常有用。

6.  因此**，连接池的选择和相关性**取决于应用程序与 DB 交互的方式，无论其是 Web 应用程序还是独立的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:06:28.453

如果您对数据库有如此多的调用，您应该考虑使用连接池，初始化连接变得昂贵。

否则，对于（或如果）您可以序列化正在运行的任务的批处理，一个 Connection 就足够了。Spring-JDBC 还提供了用于测试的单个连接“池”工厂对象，它也应该适用于您（因此您不必处理样板）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:08:01.457

在您的情况下，连接池可能只有有限的好处，因为您正确地说，每当 JVM 关闭并重新启动时，您都必须再次创建连接池。如果您想从使用`DataSource`接口而不是直接创建连接中受益，您仍然可以使用池。如果你的处理是在单线程中完成的，请确保连接池的大小只有 1。

如果您在同一进程中使用多个线程，那么连接池可能更有意义，您可以从它的功能中受益。

# c# - c# 打开带有电子邮件和友好名称的 Outlook

> ID：10229676
> 
> 赞同：1
> 
> 时间：2012-04-19T13:59:06.337
> 
> 标签：c#, .net, outlook, email

我知道以下能力：

```
"mailto:foo@bar.com?subject=MySubject" 
```

但我想知道是否有一种方法可以在 Outlook 中填充 TO 字段，但要显示一个友好的名称（如 Outlook 那样）而不是电子邮件地址本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:18:56.443

[mailto URL 方案](https://www.rfc-editor.org/rfc/rfc2368)

```
 mailtoURL  =  "mailto:" [ to ] [ headers ]
 to         =  #mailbox
 headers    =  "?" header *( "&" header )
 header     =  hname "=" hvalue
 hname      =  *urlc
 hvalue     =  *urlc 
```

“#mailbox”在 RFC 822 中指定。这意味着它由零个或多个逗号分隔的邮件地址组成，可能包括“短语”和“评论”组件。请注意，必须对“to”中的所有 URL 保留字符进行编码：特别是括号、逗号和百分号 (“%”)，它们通常出现在“邮箱”语法中。

也就是说，在一个简单的测试中，以下内容在 Chrome 打开 Outlook 中似乎对我有用

```
<a href="mailto:'Test' &lt;example@example.com&gt;">Contact via Email</a> 
```

# php - 根据数组值对多维数组进行排序

> ID：10229678
> 
> 赞同：2
> 
> 时间：2012-04-19T13:59:09.107
> 
> 标签：php, arrays, sorting

我有以下数组，它是根据数据库查询的结果加载的

```
 while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {   
            $response->rows[$i]['user_id']=$row['user_id'];
            # Row Data 
            $response->rows[$i]['cell']=array(
                                    $row['user_id'],
                                    $row['aff_code'],
                                    $row['lname'],
                                    $row['fname'],
                                    $new_comm,
                                    $mth_earn,
                                    $status_label);
           $i++;
        } 
```

如何按 $new_comm，（数值）对该数组进行排序？

$new_comm 和 $mth_earn 是根据对数据库的第二次调用计算得出的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:22:31.513

见[usort()](http://www.php.net/usort%28%29)

以下需要 php 5.3，否则将匿名函数替换为通过[create_function()创建的函数](http://www.php.net/create_function%28%29)

```
usort($response->rows, function($a, $b){
    return $b['cell'][4] - $a['cell'][4];
}); 
```

或巧妙实施的排序选项

```
usort($arr, function($a, $b) {
    $sortDescending = false;
    return (1 - 2*$sortDescending) * ($b['cell'][4] - $a['cell'][4]);
}); 
```

# jquery - 如何在 .live 中使用这个 jQuery 代码？

> ID：10229680
> 
> 赞同：0
> 
> 时间：2012-04-19T13:59:14.813
> 
> 标签：jquery

我在我的图像上使用了一些 jQuery 效果。但是当我单击加载更多按钮时，不要使用 JQuery 下一个图像。问题是 Dom 准备好了。所以，我想将我的 jQuery 代码与 .live 一起使用，但我不知道如何使用 .live

请帮帮我，谢谢。

1：

```
 var hoverImg = '<div class="hoverimg"></div>';

$(".thumb").each(function(){
    $(this).children("div").each(function(){
        $(this).find("a").append(hoverImg);
    });
});

$(".thumb div").hover(function() {
    $(this).find(".hoverimg").animate({ opacity: 'toggle' });
});

$(".thumb").hover(function() {
    $(this).find("div").each(function(){
        $(this).find(".shadow").fadeOut(500);
    });
}); 
```

2：

```
var shadowImg = '<div class="shadow"></div>';

$(".thumb").each(function(){
    $(this).children("div").each(function(){
        $(this).append(shadowImg);
    });
}); 
```

3：

```
var c = '';
var d = '';
$('.view-content div.views-row').each(function(){
    c = 0;
    d = 0;
    var i = 1;
    d = $(this).find('.thumbimg').length;
    $(this).find('.thumbimg').each(function(){
        sayi=i++;
        $(this).append('<div class="img_no">0'+sayi+'</div>');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:05:29.057

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

它的工作方式是这样的：

```
$('#select_something_static').on("click", ".something_dynamic", {'anydata':True}, handler); 
```

您在 DOM 的静态顶级元素（动态节点的上升节点）上调用“on”，然后选择动态节点。当事件在上升时触发时，jquery 搜索选择器（在我的例子中是“.something_dynamic”），如果它在那里被触发，则调用处理程序并将数据（在我的例子中为 {'anydata':True}）放入 event.data

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:03:24.907

改为使用`on()`。

1.

```
$(".thumb div").on("hover", function() {
    $(this).find(".hoverimg").animate({ opacity: 'toggle' });
});

$(".thumb").on("hover", function() {
    $(this).find("div").each(function(){
        $(this).find(".shadow").fadeOut(500);
    });
}); 
```

# google-maps-api-3 - 使用 Google 路线进行动画驾驶（Google Maps API V3）

> ID：10229681
> 
> 赞同：0
> 
> 时间：2012-04-19T13:59:17.310
> 
> 标签：google-maps-api-3

有谁知道如何在 API V3 中执行此操作，或者在哪里可以找到有关此选项的信息

[http://translate.google.com/translate?hl=en&sl=en&tl=pl&u=http%3A%2F%2Feconym.org.uk%2Fgmap%2F&anno=2](http://translate.google.com/translate?hl=en&sl=en&tl=pl&u=http%3A%2F%2Feconym.org.uk%2Fgmap%2F&anno=2)

请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:02:49.603

geocodezip 的 Larry 重新处理了许多经济名称示例。

[http://www.geocodezip.com/v3_animate_marker_directions.html](http://www.geocodezip.com/v3_animate_marker_directions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T06:23:47.410

在知道这篇文章之前，我想出了一个解决方案。我认为它简短而简洁，所以我希望它对将来看到这一点的任何人有所帮助。

**第 1 步：**将响应参数传递`directionsService.route()`给我调用它的函数 `driveSim(response)`：

```
directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
       directionsDisplay.setDirections(response);
       driveSim(response);
    };
}); 
```

**第 2 步：**创建初始位置等于响应初始位置的标记，然后遍历`path`对象数组中的所有值，仅此而已。它只是以与任何特定速度无关的固定速度对其进行动画处理。如果您希望这样做，只需使用`console.log(path);`探索`var path`对象中的所有数据，您会发现很容易计算出给定速度所需的延迟。

```
function driveSim (response){
    var path = response.routes[0].overview_path;
    var maxIter=path.length;

    taxiCab=new google.maps.Marker({
       position: path[0],
       map: map, 
    });

    var delay = 20, count = 0;
    function delayed () {
      count += 1;
      taxiCab.setPosition({lat:path[count].lat(),lng:path[count].lng()});
      if (count < maxIter-1) {
        setTimeout(delayed, delay);
      }
    }
    delayed();
} 
```

而且，就是这样。

# c# - 创建电子邮件“收件人：”用户控件？

> ID：10229687
> 
> 赞同：1
> 
> 时间：2012-04-19T13:59:30.167
> 
> 标签：c#, winforms, .net-2.0

我需要一个可选择的文本控件，就像许多电子邮件客户端程序用于其“收件人”地址字段一样。它应该具有相同的功能，例如能够删除整个项目等。

我应该如何从像这样构建自己的控件开始？我需要这种类型的控件，每个项目都以“<<__>>”运算符为界。

我附上了一张图片以获得更好的解释。

![可选择的地址字段项目](../Images/17bf8fdce056eed1a020cac278392d1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:41:06.247

我将从熟悉如何创建[UserControls](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=vs.80%29.aspx)开始。

接下来，我会将问题分解为您看到的组件。顶级用户控件看起来像一个标签（“TO：”）、一个包含其他控件的面板和一个按钮（“+”）。

看起来在 Panel 控件中，您将拥有更多的 UserControl，或者可能是一个子类 TextBox，它们代表每个电子邮件地址。Panel 控件本身需要根据其中的控件数量自动调整大小。

对于实际的电子邮件地址控件，您需要列出您需要的功能，然后确定您是否可以稍微修改一个 TextBox，或者您是否需要结合其他控件（如标签、按钮、文本框）来实现您想要的结果。

# validation - 丰富的表单验证：togglePanel

> ID：10229698
> 
> 赞同：0
> 
> 时间：2012-04-19T14:00:05.130
> 
> 标签：validation, richfaces, seam2

在我的应用程序中，我创建了一个向导。似乎我无法切换面板，因为在未显示的面板上验证失败。

该向导具有以下布局：

```
<rich:modalPanel>
    <f:facet name="header">
        <h:outputText value="#{messages['motivation.title']}" />
    </f:facet>
    <h:messages />
    <rich:togglePanel id="motivationTogglePanel" switchType="ajax" initialState="wiz1" rendered="#{motivationController.enabled}">
        <f:facet name="wiz1">
            <f:subview id="wiz1sub"> 
                <rich:toggleControl value="next" switchToState="wiz2"></rich:toggleControl>
            </f:subview>
        </f:facet>
        <f:facet name="wiz2">
            <f:subview id="wiz2sub"> 
                <h:selectManyCheckbox id="checkBoxList1" required="true" value="#{controller.selectedValue}" layout="pageDirection">
                    <f:selectItems value="#{controller.options}"></f:selectItems>
                </h:selectManyCheckbox>
            </f:subview>
        </f:facet>   
</rich:modalPanel> 
```

modalPanel 从 wiz1 面板开始正确显示。现在，当用户单击 toggleControl 时，什么也没有发生。如果我从组件中删除必填字段，则切换工作。

如何仅对当前显示的组件进行正确验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:02:47.093

要解决此问题，请将 f:subview 替换为 a4j:region。这将解决问题，因为区域限制了服务器端处理（包括验证）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:28:41.813

我已经用普通面板替换了 togglePanel，并使用控制器属性重新渲染了正确的面板。

# delphi - 是否可以在保留现有组件库注册的同时完全重新安装 Delphi XE2（例如更新 #4）？

> ID：10229704
> 
> 赞同：4
> 
> 时间：2012-04-19T14:00:17.857
> 
> 标签：delphi, components, delphi-xe2

我即将安装 Delphi Xe2 更新 #4 - 这是一个完整的重新安装 - 我担心重新安装所有组件库所花费的时间。现在有什么诀窍可以保留这些吗？过去，有必要通过随之而来的许可问题来检查并重新安装它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:43:06.330

如果在卸载时，您选择不删除注册表项，那么您的所有组件注册都会被保留。

# email - 如何在 SalesForce 电子邮件回复中包含用户的电子邮件？

> ID：10229706
> 
> 赞同：0
> 
> 时间：2012-04-19T14:00:19.960
> 
> 标签：email, templates, salesforce

我在 SalesForce 中有一个电子邮件转个案设置。

当我的一位同事通过给用户的电子邮件回复案例时，我如何设置 SalesForce 以在回复电子邮件中自动包含原始电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:50:12.190

管理员设置 -> 通讯模板 -> 电子邮件模板

选择字段类型 -> 电子邮件消息字段 -> 字段 -> 文本字段。

这是您的合并字段。

{!EmailMessage.TextBody}

这对你有用吗？

# java - 向数组添加新项目时的ArrayIndexOutOfBounds？

> ID：10229709
> 
> 赞同：0
> 
> 时间：2012-04-19T14:00:24.953
> 
> 标签：java, arrays, exception, indexoutofboundsexception

为什么这不起作用。我想要做的是在名为 items 的数组中添加一个新的文本字符串

```
final String items[] = {"Java", "JSP", "PHP", "C", "C++"};
int itemsl = items.length + 1;
items[itemsl] = "f"; 
```

这是输出的错误

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 6
    at com.modinstaller.guii$4.actionPerformed(guii.java:127)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:03:35.313

您无法更改 Java 中数组中的元素数量。创建一个新的并复制元素，或使用其中一个`Collection`类，例如`ArrayList`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T14:09:04.373

您实际上对这里的数组有两个误解。

首先，数组的大小是固定的，在创建时就确定了。在这种情况下，您有一个包含 5 个元素的数组。可以替换元素，但是数组创建后不能加减。

除此之外，即使你可以，array.length 已经是数组末尾的一个位置，向它添加 1 会使你超出数组末尾的两个位置。

这是因为数组是从零开始的，所以长度为 5 的数组的元素是零到 4，所以即使这样做`items[items.length]`也会导致 ArrayIndexOutOfBoundsException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:03:38.993

`items[itemsl]`超出范围，因为数组大小小于`itemsl`!

因此，您会得到一个[ArrayIndexOutOfBoundException](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)。

如果您正在寻找一个[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)（其大小可修改的数组） - 您可能想要使用 an[`ArrayList<String>`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)而不是`String[]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T14:06:28.837

我已经离开 Java 几年了……但无论如何，我认为您不能像那样动态地更改数组。

您的语句`int itemsl = items.length + 1`正在创建一个在此处使用时超出数组范围的 int`items[itemsl] = "f";`

考虑使用其中一个 Java 集合来管理您的阵列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T14:04:20.240

您必须创建一个新数组。一旦你创建了一个，你就不能改变它的大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T14:04:41.850

问题与`final`. 您正在写超出数组的边界。

# cakephp - Cake PHP 组件中的“设置”

> ID：10229710
> 
> 赞同：2
> 
> 时间：2012-04-19T14:00:25.253
> 
> 标签：cakephp, cakephp-1.3

如何在 cake php 的组件中使用[Set函数？](http://book.cakephp.org/1.3/view/977/Controller-Methods#set-979)

```
class TestComponent extends Object
{
  //etc

 $this->set('User', $user); 

 } 
```

我收到一个错误

```
Fatal error: Call to undefined method TestComponent::set() 
```

如何纠正？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:10:32.127

```
function startup($controller) { $this->controller = $controller }
function something() {
    $this->controller->set('User',$user);
} 
```

Cake 将 Controller 引用传递给组件的启动函数。您需要在组件中保留一个引用，以便以后在自定义函数中使用。

见这里[http://book.cakephp.org/1.3/en/view/996/Creating-Components#MVC-Class-Access-Within-Components-998](http://book.cakephp.org/1.3/en/view/996/Creating-Components#MVC-Class-Access-Within-Components-998)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T06:05:46.090

由于大多数时候组件方法是从控制器调用的，因此您可以从控制器中的函数返回值。如果要为视图层设置变量，则可以使用

```
$this->Controller->set('varForView',varValue); 
```

这是因为组件有一个用于实例化它的 Controller 实例的类变量。

# c# - AssemblyInfo 版本信息星号

> ID：10229711
> 
> 赞同：51
> 
> 时间：2012-04-19T14:00:26.080
> 
> 标签：c#, .net

它在 C# 项目的 AssemblyInfo.cs 中说，可以使用`*`

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Revision and Build Numbers 
// by using the '*' as shown below:
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

我把它改成这样：

```
[assembly: AssemblyVersion("1.0.*.*")]
[assembly: AssemblyFileVersion("1.0.*.*")] 
```

这是我从编译器得到的错误：

```
error CS0647: Error emitting 'System.Reflection.AssemblyVersionAttribute' attribute -- 'The version specified '1.0.*.*' is invalid'
warning CS1607: Assembly generation -- The version '1.0.*.*' specified for the 'file version' is not in the normal 'major.minor.build.revision' format 
```

它是如何（甚至？）它工作的？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-19T14:01:51.600

“自动”内部版本号的语法（参见[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx)）可以是：

```
[assembly: AssemblyVersion("1.0.0.*")] 
```

或者：

```
[assembly: AssemblyVersion("1.0.*")] 
```

`*`意味着*在此之后一切都是自动的*。您不能拥有自动内部版本号和固定修订号，则此语法不正确：

```
[assembly: AssemblyVersion("1.0.*.0")] 
```

对于`AssemblyFileVersionAttribute`您不能使用`*`特殊字符，因此您必须提供完整且有效的版本号。请注意，如果您**不提供**an `AssemblyFileVersionAttribute`then 您将`FileVersionInfo`自动获得正确的（使用相同版本的`AssemblyVersionAttribute`）。只有在需要设置不同版本时才需要指定该属性。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-19T14:17:45.533

```
[assembly: AssemblyVersion("1.0.*")] 
//[assembly: AssemblyFileVersion("1.0.*")] 
```

只要记住注释 AssemblyFileVersion 行，否则自动生成的程序集版本将始终为“1.0.0.0”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-26T00:02:34.830

那么为什么提供的评论说

```
// You can specify all the values or you can default the Build and Revision Numbers
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

但是构建会生成 CS8357？有人没有收到备忘录。

```
Work around:

 1\. Close all open documents
 2\. In the Solution Explorer, right-click the Project and select Unload Project
 3\. In the Solution Explorer, right-click the Project (now marked as unavailable) and select Edit to access the `.CSPROJ` file
 4\. In the opened window, find `<Deterministic>true</Deterministic>` and change it to `<Deterministic>false</Deterministic>`
 5\. Save the file and ensure that the edit window is closed
 6\. In the Solution Explorer, right-click the Project and select Reload Project

Your build (should then) work. :) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-24T11:19:01.110

在我看来，使用`[assembly: AssemblyVersion("x.y.z.*")]`,`Patch`不应该被自动编号。例如：

> [程序集：AssemblyVersion("1.2.3.*")]

在中使用 '*'`AssemblyVersion`很好，但是按照我们应该使用版本结构`*`中的部分的 seekver.org 进行操作）。`revision``<major version>.<minor version>.<build number>.<revision>`

> 给定版本号 MAJOR.MINOR.PATCH，增加：
> 
> 进行不兼容的 API 更改时的主要版本，
> 
> 以向后兼容的方式添加功能时的次要版本，以及
> 
> 进行向后兼容的错误修复时的补丁版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-19T03:17:54.420

我已经在版本中使用了“*”来简化控制版本，并为客户提供信息。我有一个在手持设备上运行的小程序（PointOfSell），有时会发生更新。:-) 在我的代码中，我使用：

来自 AssemblyInfo.cs 的片段

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.*")]
// Need to comment this line, 
//[assembly: AssemblyFileVersion("1.0.0.0")]
//to avoid the following error:
// ...\Properties\AssemblyInfo.cs(36,32,36,39):
// warning CS7035: The specified version string does not conform to 
// the recommended format - major.minor.build.revision
// warning AL1053: The version '1.0.*' specified for 
// the 'file version' is not in the normal 'major.minor.build.revision' format 
```

检查更新时，我从一个小型 Web 服务向客户端发送一个版本列表。

```
void smsReceive1_OnCabUpdate(object sender, CabDataEventArgs e)
{
    try
    {
        var cabVer = e.CabVersion;
        var sms1 = (SmsService.SmsService)sender;
        SmsService.CabinetVersion progVer = null;
        var exeApp = Path.GetFileName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
        foreach (var item in cabVer)
        {
            if (string.Compare(item.FileName, exeApp, true) == 0)
            {
                progVer = item;
                break;
            }
        }

        var msgForm = new MessageBoxForm();
        if (!forceUpdate && !WillUpdateVersion(progVer))
        {
            Buzzer.Warning();
            sms1.StopReceive();
            msgForm.Message = "\r\nNewest Version！\r\n" +
                "Version\r\n" + progVer.AssemblyVersion.ToString() + "\r\n" +
                "Last Modified：\r\n" + progVer.AssemblyVersion.ToDateTime().ToString("yy/MM/dd HH:mm") + "\r\n" +
                "\r\nNo need to update";
            msgForm.OKShowDialog();
            return;
        }
        // 
        byte[] buffer = e.CabData;
        var filename = "\\ramdisk\\Setup.cab";
        if (File.Exists(filename))
        {
            File.Move(filename, string.Format("{0:yyMMdd_HHmmss}_Setup.cab"));
        }
        var fs = new FileStream(filename, FileMode.Create, FileAccess.Write);
        fs.Write(buffer, 0, buffer.Length);
        fs.Flush();
        fs.Close();
        //
        Buzzer.Warning();
        //Stop SmsReceive
        sms1.StopReceive();
        msgForm.Message = "There is an update.\r\n" +
            "Version \r\n" + progVer.AssemblyVersion.ToString() + "\r\n" +
            "Last Modified：\r\n" + progVer.AssemblyVersion.ToDateTime().ToString("yy/MM/dd HH:mm") + "\r\n" +
            "※After the update\r\nIt will restart automatically";
        msgForm.SetSubMessage("Do you want to update?");
        var resp = msgForm.OKCancelShowDialog(true) == DialogResult.OK;
        if (resp)
        {
            CabFileUpdatePath = filename;
            UpdateApplication = true;
            Invoke((Action)(() => restartApplicationTimer.Enabled = true));
        }
        else
        {
            File.Delete(filename);
        }
    }
    finally
    {
        if (smsReceive1 != null) smsReceive1.ServicePaused = ServiceStatus.None;
    }
}

private bool WillUpdateVersion(SmartShooter.SmsService.CabinetVersion ver)
{
    var appVer = System.Reflection.Assembly.GetExecutingAssembly().GetName().Version;
    if (ver.CompareToExe(appVer) > 0) return true;
    return false;
} 
```

**progVer.AssemblyVersion.ToDateTime().ToString("yy/MM/dd HH:mm")**

最后，这是因为我在版本中使用了'*'。

```
public partial class MyVersion {

    public ushort Build { get; set; }

    public ushort Major { get; set; }

    public ushort Minor { get; set; }

    public ushort Revision { get; set; }

    public override string ToString()
    {
        return string.Format("{0}.{1}.{2}.{3}", Major, Minor, Build, Revision);
    }

    public DateTime ToDateTime()
    { 
        var dt = new DateTime(2000, 1, 1, 0, 0, 0);
        //plus days
        dt = dt.AddDays(Build);
        //plus seconds
        dt = dt.AddSeconds(Revision * 2);
        return dt;
    }
} 
```

我使用“Build”值来查找项目编译的日期，并使用“Revision”来获取精确的时间。

# c++ - 我的向量实现中的错误

> ID：10229714
> 
> 赞同：0
> 
> 时间：2012-04-19T14:00:37.950
> 
> 标签：c++, vector

我正在实现一个向量（使用分配器类）。

```
explicit vector() : Capacity(0), Size(0) // first constructor
{
    buffer = Free = End;
}
explicit vector(size_t sz, const T& initial = T()) // second constructor 
{
    Capacity = sz;
    Size = sz;
    buffer = alloc.allocate(sz);
    for(size_t i = 0; i < sz; i++)
    {
        alloc.construct(buffer+i, initial);
    }
}
template<typename Iterator>
vector(Iterator beg, Iterator lst) // third constructor
{
    std::ptrdiff_t sz(lst - beg);
    buffer = alloc.allocate(sz);
    Iterator index(beg);

    for(size_t i = 0; i < sz; i++)
    {
        alloc.construct(buffer+i, *index++);
    }
    Size = sz;
    Capacity = sz;
}
vector(const vector<T> &rhs)
{
    *this = vector<T>(rhs.begin(), rhs.end());
}

/* .... */

int main()
{
    vector<int> vec1(10, 5);
    vector<int> vec2(vec1.begin(), vec1.end());
    /* .... */
} 
```

这是我定义的构造函数。当我使用第三个构造函数时，我收到错误消息：

```
test.cpp:11:41: error: invalid conversion from ‘vector<int>::iterator {aka int*}’ to ‘long unsigned int’ [-fpermissive] 
```

我得出的结论是编译器将第二个构造函数与第三个构造函数混淆了，因为它们都有两个参数。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:07:39.537

标准向量通过`iterator`在自身内部有一个特殊的类来解决它，并将其用作参数。这意味着虽然参数数量相同，但参数的类型会有所不同。

# java - DecimalFormat 可变组大小

> ID：10229716
> 
> 赞同：2
> 
> 时间：2012-04-19T14:00:44.550
> 
> 标签：java, formatting

在发布问题之前，我已经对该主题进行了一些研究，但找不到答案。

这是我正在尝试做的事情：

输入：一个 7-8 个小数位长的数字（无分数）。

输出：“X XXXXXX X”，其中 X 是一个数字，必须存在。

例如：1234567 => 0 123456 7

我尝试了什么：

```
DecimalFormatSymbols group = new DecimalFormatSymbols();  
group.setGroupingSeparator(' '); 
DecimalFormat idFormat = new DecimalFormat("0,000000,0", group); 
```

但这会打印出类似“0 1 2 3 4 5 6 7”的东西：S我做错了什么？

**编辑：**

如果我这样做，我可以打印我需要的东西：

```
DecimalFormatSymbols group = new DecimalFormatSymbols();  
group.setGroupingSeparator(' ');
group.setDecimalSeparator(' ');
DecimalFormat idFormat = new DecimalFormat("0,000000.0", group); 
```

通过重新阅读手册，我意识到 DecimalFormat 没有办法打印可变长度组（幸运的是我只需要 2 个 - 所以我可以使用小数部分）。但是你将如何“正确”地做到这一点？在这里使用正则表达式/编写我自己的函数可以吗，或者是否有库已经这样做了？

**编辑2：**

只是为了好玩，下面是基于正则表达式的方法:)

```
Random random = new Random();
System.out.println(
      String.valueOf(Math.round(random.nextDouble() * 1e8))
      .replaceAll("(.*)(\\d{6})(\\d)$", "$1 $2 $3")
      .replaceAll("^ ", "0 ")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:12:40.063

我认为您不能`DecimalFormat`为此使用分组分隔符。从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)：

> 如果您提供具有多个分组字符的模式，则最后一个和整数末尾之间的间隔就是所使用的间隔。所以 "#,##,###,####" == "######,####" == "##,####,####"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:51:19.107

您可以将 ICU4J 库的[com.ibm.icu.text.DecimalFormat](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/DecimalFormat.html)类用于同样的目的。它支持可变长度组大小。对于您的特定情况：

```
com.ibm.icu.text.DecimalFormatSymbols dfs = new com.ibm.icu.text.DecimalFormatSymbols();
dfs.setGroupingSeparator(' ');
com.ibm.icu.text.DecimalFormat df = new com.ibm.icu.text.DecimalFormat("0,000000,0", dfs); 
```

对于像“1234567”这样的数字，这应该打印“0 123456 7”。

# ios - iOS 后台和 XMPP 框架

> ID：10229723
> 
> 赞同：1
> 
> 时间：2012-04-19T14:01:18.207
> 
> 标签：ios, xmpp, background-process, xmppframework

因此，我创建了一个简单的 XMPP 应用程序，但除非该应用程序是[此处列出](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)的指定类别之一，否则我似乎无法进行后台处理。

如果应用程序不在前台，我只想保持套接字打开并显示收到的消息通知。

我发现很难找到有关 iOS 后台的良好信息，似乎很多应用程序都设法做到了，但文档似乎更具限制性。

是否可以在后台长时间运行这样的聊天客户端？类似于 Android 服务生命周期的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:06:33.120

当您的应用程序进入后台时，您（客户端）关闭与 xmpp 服务器的连接。当您的应用程序回到前台时，您重新打开连接。如果您的服务器需要向您的客户端发送消息，它必须使用推送通知。当客户端收到通知时，CAN（取决于用户操作）可以回到前台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:28:31.110

这不像在Android中那么容易。为了节省电池，苹果实施了 10 分钟的限制。

只有10分钟，没有后台或无限后台。因此，在您的应用程序中，您必须获得无限。当您的应用程序不完全适合给定列表时，我不知道这是否如此简单。

# perl - 为什么我的 cmd.exe 进程在通过 perl 作为服务启动时没有设置“title”属性？

> ID：10229725
> 
> 赞同：1
> 
> 时间：2012-04-19T14:01:23.600
> 
> 标签：perl, windows-services, cmd, win32-process

我正在让我的 Perl 作为 Windows 上的服务软运行。

为此，我使用 Win32::Daemon 模块来操作 SCM（服务配置管理器）并启动/停止我的服务。

要启动我的服务，我使用*system()* perl 命令。

该命令如下所示：

```
START \"title\" /Dc:\\path\\to\\bat\\script\\dir\\ \"script.bat\" 
```

当我直接从 cmd.exe 启动此命令时，进程的标题设置得很好。

通过我启动的服务启动命令时，该进程的标题为空。任务管理器说启动的命令是：

```
cmd /c ""C:\path\to\script.bat" " 
```

我错过了什么吗？

注意：我肯定会尝试为我的服务设置标题，因为我没有找到比在服务的停止挂钩中启动“taskkill”命令更简洁的方法来停止它，并将标题名称作为参数（不知道如何抓到生成进程的PID）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:05:48.987

我不是 100% 确定您的问题是什么，但***title***命令可能会有所帮助。

当 cmd 进程在 Windows 中启动时，它会获得一个默认的寡妇标题。DOS“标题”命令可以将窗口标题设置为您喜欢的任何内容。

DOS“启动”命令用于将命令拆分（fork？）到一个新窗口，将其与调用 DOS/cmd 窗口分开（除非您使用正确的启动参数将其保持在同一窗口中）。启动命令的一部分是可选的“title”参数，它为您设置窗口标题。

但是您提到作为服务运行...服务通常没有窗口或 GUI，所以我不确定您为什么对窗口标题如此感兴趣。

最后，你可以把

```
title "The title of the window" 
```

在你的批处理脚本中......或者如果你在一个 Perl 程序中，做

```
system "title \"Window title\""; 
```

也将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:52:19.790

尝试执行您的命令。如果我没记错的话，windows 有两个命令shell，如果你使用 cmd.exe，你总是使用新的。

[http://ss64.com/nt/cmd.html](http://ss64.com/nt/cmd.html)

```
cmd.exe /C START \"title\" /Dc:\\path\\to\\bat\\script\\dir\\ \"script.bat\" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T01:05:07.957

您还可以使用 perl 模块[Term::Title](http://search.cpan.org/dist/Term-Title/lib/Term/Title.pm)在控制台上设置标题，它也是跨平台的：

```
use Term::Title 'set_titlebar', 'set_tab_title';

set_titlebar("This goes into the title");

set_titlebar("Title", "And also print this to the terminal");

set_tab_title("This goes into the tab title");

set_tab_title("Tab Title", "And also print this to the terminal"); 
```

# java - 可以在 Java 中为 Range 对象设置开始和结束文本节点吗？

> ID：10229733
> 
> 赞同：-2
> 
> 时间：2012-04-19T14:01:43.163
> 
> 标签：java, xml, dom, cursor

我需要确定光标是否在 XML 范围内。我已经为 Range 设置了开始和结束文本节点。我想 compareBoundaryPoints 方法在这种情况下不能正常工作。当然，我可能是错的。在 Java 中，我使用`com.arbortext.epic.ADocument`,`org.w3c.dom.ranges.Range`导入。 `holeRange_`是一个`org.w3c.dom.ranges.Range`对象。

```
holeRange_ = ((DocumentRange) txtProcessor_.GetDocument()).createRange();
holeRange_.setStart(startNode, 0); //text node
holeRange_.setEndAfter(endNode); //text node 
```

这是单击事件处理程序的主体：

```
Range caretRange = ((ADocument) txtProcessor_.GetDocument()).getInsertionPoint();
    if (caretRange != null) {
     DebugMode.println(caretRange.getStartContainer().getNodeValue());
     DebugMode.println("END_TO_START = " +
      textNodeRange_.compareBoundaryPoints(Range.END_TO_START, caretRange));
     DebugMode.println("START_TO_END = " + 
      holeRange_.compareBoundaryPoints(Range.START_TO_END, caretRange));
    } 
```

当光标在范围内时，输出给出 END_TO_START = -1 和 START_TO_END = -1。根据[检查指定元素是否在选择内](https://stackoverflow.com/questions/9324654/check-if-specified-element-is-inside-selection)，值应该是：END_TO_START = -1 和 START_TO_END = 1。问题是否与它相关： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=148126](https://bugs.eclipse.org/bugs/show_bug.cgi?id=148126)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:02:01.060

累了兄弟！我已经为从 xerces c++ XML 库到 Java 的 Range 对象制作了三个方法 ( `compareBoundaryPoints`, `isAncestorOf`, ) 的小端口。`indexOf`我忘记了 Xerces2 Java。
好吧，我做了一组实验，表明 xerces`compareBoundaryPoints`实现更合适。

# ruby - 是否有任何与 JEE 的 Glassfish 或 JBoss 等效的 Ruby 应用程序服务器？

> ID：10229734
> 
> 赞同：0
> 
> 时间：2012-04-19T14:01:43.183
> 
> 标签：ruby, application-server

我想知道是否有 Ruby 平台提供捆绑服务，例如 Web/Messaging/Workers/Scheduling/...

我目前正在使用 Rails，但我*还*必须管理工作人员、WebSocket 堆栈等的生命周期。

任何想法？*（我看了一下 cerise，它似乎同时死了...... :-()*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:21:50.887

实际上有一个名为[Torquebox](http://torquebox.org/)的项目，它建立在 JBoss AS 之上。它运行 Rails/Sinatra（可能还有任何其他 Rack 应用程序）项目，并集成了消息传递、调度和服务。

# c++ - 存储在静态 const int (c++) 中的对数函数的错误返回值

> ID：10229748
> 
> 赞同：2
> 
> 时间：2012-04-19T14:02:17.827
> 
> 标签：c++, static, int, constants

我在我的应用程序中注意到一件非常奇怪的事情。我的 World 类中有两个静态 const 整数：

```
class World
{
  public:
    static const int CHUNK_SIZE_X = 32;
  private:
    static const int SHIFT_X;
}; 
```

常量*SHIFT_X*在相应的 *.cpp 文件中初始化：

```
const int World::SHIFT_X = Ogre::Math::Log2(World::CHUNK_SIZE_X); 
```

现在奇怪的是，*SHIFT_X*中的值是 4 而不是 5。如果我从任意方法中调用*Ogre::Math::Log2(32) ，它会正确计算 5。*

这到底是怎么回事？我还需要说，这只发生在 Windows 7（使用 Visual Studio Express 10）下。我的应用程序也在 GNU/Linux (Debian Squeeze) 下运行，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:08:22.907

[`Ogre::Math::Log2`](http://www.ogre3d.org/docs/api/html/classOgre_1_1Math.html#ac453f2205d3deb1c29aa9ef806b8a9ec)返回 a`Real`实际上是 a`float`并且您正试图将其存储为 int。因此，如果返回的值是 4.9999999999999998，它在转换后仍然会以 4 结束。如果您想继续使用 an`int`而不是 a `float`，则应将该值四舍五入。

# python - 符合唯一性标准的相似项目总数

> ID：10229751
> 
> 赞同：3
> 
> 时间：2012-04-19T14:02:24.063
> 
> 标签：python

我有一个列表，`rods`它由 和 的元组`length`组成`position`。 `position`对于给定的`length`. `position`我想找到最常见的杆长度，然后是所有唯一（按）相邻杆（包括最频繁）的出现总数。分解：

*   首先我想找到最频繁的杆`length`。
*   然后我想包括所有其他`length`按某些标准相邻的杆（在本例中为 +-1），但前提是它们具有独特的位置 - 尚未考虑（通过原始组中的“最常见”杆，或通过满足相邻标准将“新杆”添加到该组中）。
*   并找到这个新的总频率。

通过排序和使用集合，我可以通过以下方式完成此操作，但也许有更好的解决方案：

```
import itertools
#tuples of (length, position)
rods = [(18, 21), (17, 2), (15, 3), (14, 21), (14, 5), (13, 6), (13, 7),
        (13, 8), (13, 9), (13, 10), (13, 11), (13, 12), (13, 13), (13, 14),
        (13, 15), (13, 16), (13, 17), (13, 18), (13, 19), (13, 20), (13, 21),
        (13, 22), (13, 23), (13, 24), (13, 25), (13, 26), (12, 5), (12, 21),
        (12, 2)]

lengths = [length for length, position in rods]

#gives tuples of lengths and their frequencies:
length_freq = (sorted([(k,len(list(j))) for k,j in itertools.groupby(sorted(lengths))],
               key=lambda x: x[1],reverse=1))
best_length = length_freq[0][0]

#cumulative frequency of rods near best_length, with unique position:
tally = (len(set((best_length,v) for j,v in rods 
         if best_length - 1 <= j <=best_length + 1)))

print length_freq
#output:
#[(13, 21), (12, 3), (14, 2), (15, 1), (17, 1), (18, 1)]
print tally
#output:
#23 
```

注意`23`是此测试数据的正确答案。因为两个杆`length= 14`都位于也被杆占据的点上`length=15`(位置`21`, 和`5`)。`position=21`在for也有重叠`lengths 13 and 12`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:25:59.240

我认为你的整体是一个合理的解决方案，如果有点过度压缩。我的主要建议是将其分解得更多。此外，如果可能，`groupby`最好使用 a或如果没有，而不是在这里使用。用于对预分类材料的惰性操作；如果它没有预先排序并且你不需要它是懒惰的，你可能不应该使用它。`Counter``defaultdict``groupby`

由于[Nolen Royalty](https://stackoverflow.com/a/10230150/577088)提供了`defaultdict`基于 - 的解决方案，因此我将`Counter`在此处使用，但请参阅下面的直接替换。结果是一个 O(n) 算法；因为你的排序，你的是 O(n log n)，所以这是一个轻微的改进。

```
import collections

#tuples of (length, position)
rods = [(18, 21), (17, 2), (15, 3), (14, 21), (14, 5), (13, 6), (13, 7),
        (13, 8), (13, 9), (13, 10), (13, 11), (13, 12), (13, 13), (13, 14),
        (13, 15), (13, 16), (13, 17), (13, 18), (13, 19), (13, 20), (13, 21),
        (13, 22), (13, 23), (13, 24), (13, 25), (13, 26), (12, 5), (12, 21),
        (12, 2)]

lengths = (length for length, position in rods)
length_freq = collections.Counter(lengths)
((best_length, _),) = length_freq.most_common(1)
print best_length

#cumulative frequency of rods near best_length, with unique position:
rod_filter = ((l, p) for l, p in rods if best_length - 1 <= l <= best_length + 1)
tally = len(set((best_length, p) for l, p in rod_filter))

print length_freq
print tally 
```

由于您不能使用`Counter`, 为了完整起见，这里有一个替代方案。它是这两条线的直接替代品：

```
length_freq = collections.Counter(lengths)
((best_length, _),) = length_freq.most_common(1) 
```

只需将它们替换为：

```
length_freq = collections.defaultdict(int)
for l in lengths:
    length_freq[l] += 1
best_length = max(length_freq, key=length_freq.get) 
```

另请注意，我之前的代码有错误；现在已经修好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:20:37.660

这是一个非常简单的方法，对我来说似乎很合理：

```
>>> from collections import defaultdict
>>> rods = [(18, 21), (17, 2), (15, 3), (14, 21), (14, 5), (13, 6), (13, 7),
...         (13, 8), (13, 9), (13, 10), (13, 11), (13, 12), (13, 13), (13, 14),
...         (13, 15), (13, 16), (13, 17), (13, 18), (13, 19), (13, 20), (13, 21),
...         (13, 22), (13, 23), (13, 24), (13, 25), (13, 26), (12, 5), (12, 21),
...         (12, 2)]
>>> neighbor_cutoff = 1
>>> length_to_count = defaultdict(int)
>>> neighbors_for_length = defaultdict(set)
>>> for rod in rods:
...     length_to_count[rod[0]] += 1
...     neighbors_for_length[rod[0]].add(rod[1])
...     for i in range(1, neighbor_cutoff+1):
...         neighbors_for_length[rod[0]-i].add(rod[1])
...         neighbors_for_length[rod[0]+i].add(rod[1])
... 
>>> sorted([(length, length_to_count[length]) for length in length_to_count], key=lambda x: x[1], reverse=True)
[(13, 21), (12, 3), (14, 2), (15, 1), (17, 1), (18, 1)]
>>> [(length, len(neighbors_for_length[length])) for length in neighbors_for_length]
[(11, 3), (12, 23), (13, 23), (14, 23), (15, 3), (16, 2), (17, 2), (18, 2), (19, 1)]
>>> sorted(_, key=lambda x: x[1], reverse=True)
[(12, 23), (13, 23), (14, 23), (11, 3), (15, 3), (16, 2), (17, 2), (18, 2), (19, 1)]
>>> neighbors_for_length
defaultdict(<type 'set'>, {11: set([2, 5, 21]), 12: set([2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26]), 
13: set([2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26]), 
14: set([3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26]),
15: set([3, 21, 5]), 16: set([2, 3]), 17: set([2, 21]), 18: set([2, 21]), 19: set([21])}) 
```

# c# - 将面板绑定到表单

> ID：10229752
> 
> 赞同：2
> 
> 时间：2012-04-19T14:02:32.490
> 
> 标签：c#, winforms

我正在制作一个 Seabattle 游戏，其中船舶隐藏在带有标签数组的面板中。这个标签数组需要有更多或更少的行和列，具体取决于所选的难度级别。

所以我创建了一个新类“游戏板”，其中定义了面板和标签数组。问题是我不知道如何将我在此类中制作的面板绑定到表单..

```
namespace SO_S2_Programmeren_Groep08 {
class GameBoard{

Panel pnlSlagveld;
private Label[,] lblArray;
private int row;
private int column;    

public Label[,] LblArray {
  get { 
    return lblArray; 
  }
  set { 
    lblArray = value; 
  }
}

public int Row {
  get { return row; }
  set { row = value; }
}

public int Column {
  get { return column; }
  set { column = value; }
}

public GameBoard(int row, int column) {
  this.row = row;
  this.column = column;
  CreateLableArray(row, column);
}

public GameBoard() {
  this.row = 7;
  this.column = 9;
  CreateLableArray(row, column);
}

private void CreateLableArray(int ingrow, int ingcolumn) {
  pnlBattleField = new System.Windows.Forms.Panel();
  lblArray = new Label[ingrow, ingcolumn];
  int xpos = 0;
  int ypos = 0;

  for (int row = 0; row < ingrow; row++) {

    for (int column = 0; column < ingcolumn; column++) {
      lblArray[row, column] = new Label();
      lblArray[row, column].Left = xpos;
      lblArray[row, column].Top = ypos;
      lblArray[row, column].Width = 50;
      lblArray[row, column].Height = 50;

      lblArray[row, column].Tag = (char)('A' + column) + (row + 1).ToString();
      lblArray[row, column].Click += lblArray_Click;
      lblArray[row, column].BackColor = Color.Aqua;
      lblArray[row, column].BorderStyle = BorderStyle.FixedSingle;

      pnlBattlefield.Controls.Add(lblArray[row, column]);

      xpos += lblArray[row, column].Width;
    }
    ypos += lblArray[row, 0].Width;
    xpos = 0;
  }
}/*CreateLableArray*/

private void lblArray_Click(object sender, EventArgs e) {
  MessageBox.Show("Clicked on Label " + ((Label)sender).Tag.ToString());
}

} 
```

}

如果你想看更多的课程，请询问！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:10:24.623

您可以执行以下操作之一：

1.  将“GameBoard”制作为表单，然后将面板添加到该表单中。如果您想这样做，我建议创建一个 windows 窗体项目（如果您还没有）并将此代码添加到主窗体（或您添加的新窗体）的代码中，以便您拥有设计器组件和表单的所有视觉工作室功能。

2.  使其成为用户控件并将该用户控件添加到表单中。如果您想这样做，我会在项目中添加一个新的用户控件，并将此代码再次添加到该用户控件中，以便您获得 Visual Studio 支持。

3.  在游戏板内部创建一个`new Form()`并将其添加到其中。（这与 winforms 中的标准表单实践相反，并且您不会获得太多 IDE 帮助，因此我不建议新程序员这样做）。

# iphone - 在 Iphone 中点击按钮时弹出视图？

> ID：10229754
> 
> 赞同：0
> 
> 时间：2012-04-19T14:02:40.397
> 
> 标签：iphone

我有一个 Iphone 应用程序，我想在其中添加一个功能，这样当用户点击一个按钮时，它会弹出一个带有一些文本的视图。当他再次点击它时，我需要另一个文本。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:08:16.810

听起来您需要提供一个模态视图控制器。您将创建一个`UIViewController`来管理您想要“弹出”的视图。然后用于`presentModalViewController:`显示视图。

```
YourPopUpViewController *vc = [[YourPopUpViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:vc animated:YES]; 
```

回过头来，您在`YourPopUpViewController`.

```
[self dismissModalViewControllerAnimated:YES]; 
```

# java - 在哪里可以找到 Web 应用程序中保存的文件

> ID：10229755
> 
> 赞同：0
> 
> 时间：2012-04-19T14:02:42.440
> 
> 标签：java, web-applications, servlets

我在本地主机中有 weblogic。我的 Web 应用程序保存了一些 rdf：

```
String name = UUID.randomUUID().toString();
FileOutputStream fop = null;
try {
    fop = new FileOutputStream(name);
} catch (FileNotFoundException e) {

}
model.write(fop); 
```

当我转到保存此文件的 url 时，出现此错误：

```
XML Parsing Error: no element found
Location: http://url/0260fcff-b53d-4d18-8fb0-fb31f6a6ff1a.rdf
Line Number 1, Column 1: 
```

在我的电脑哪里可以找到这个文件？

PS我尝试只用java应用程序保存这个文件，它可以工作，所以rdf应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:15:35.847

1.  当您在不指定路径的情况下保存文件时，该文件将保存在**调用 JVM**的位置。对于 Web 应用程序，这通常是**bin 文件夹**。所以请检查那个位置（例如，对于 tomcat，它将是 {TOMCAT_HOME}/bin）

2.  您访问文件的方式（`http://url/0260fcff-b53d-4d18-8fb0-fb31f6a6ff1a.rdf)`您希望它位于 Web 应用程序的根目录中。例如，如果您有一个基于 tomcat 的应用程序说 myapp.war，那么您的 Web 应用程序的根目录将是`{TOMCAT_HOME}/webapp/myapp`

3.  这就是通过 URL 访问时找不到生成的文件的原因。

4.  **要使其工作**，请指定文件输入流的路径（绝对路径）（创建具有所需路径位置的 File 对象，在本例中为`{TOMCAT_HOME}/webapp/myapp`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:07:44.997

`System.out.println(new File("."))`会给你路径。但是你应该避免相对路径。为您的应用程序配置绝对路径并使用它。

另请注意，您通常不会将文件存储在应用程序本身中。您将它们存储在一个单独的位置，并通过一个特殊的控制器将它们提供给客户端，该控制器读取它们并将它们流回。

# c# - 正则表达式帮助请用引号提取值

> ID：10229756
> 
> 赞同：0
> 
> 时间：2012-04-19T14:02:43.970
> 
> 标签：c#, regex, express

我一直在尝试为字符串创建 RegEx 将近一天，但仍然没有成功，有人可以帮忙吗？

```
string example (double quotes are options, and can also be single quotes):
    "234"? "<img src=\"http://abc.com/a.jpg\" onclick=\"alert(\"\"working with 'quotes'?\"\");\" />"

and the following groups should be extracted:
    234
    <img src="http://abc.com/a.jpg" onclick="alert(""working with 'quotes'?"");" /> 
```

希望这很清楚，请任何人帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:14:57.880

我不确定这个正则表达式的效率，但这里有一个与你的字符串匹配的。

**规则**

1.  数字周围的引号是可选的，并且可以是单引号。
2.  html 周围的引号是可选的，可以是单引号。
3.  问号后的空格可以是 0 或多个。

**输入**

```
"234"? "<img src=\"http://abc.com/a.jpg\" onclick=\"alert(\"\"working with 'quotes'?\"\");\" />" 
```

**正则表达式**

```
^['"]?(?<number>\d+)['"]?\?\s*['"]?(?<html>\<.*\>)['"]?$ 
```

**输出组**

```
number: 234
html: <img src=\"http://abc.com/a.jpg\" onclick=\"alert(\"\"working with 'quotes'?\"\");\" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:56:08.970

这是一个快速的解决方案（在 JavaScript 中）：

```
var s = "\"234\"? \"<img src=\"http://abc.com/a.jpg\" onclick=\"alert(\"\"working with 'quotes'?\"\");\" />\"";
var matches = s.match(/['"][\d]*['"](?=[\s]*\?)|['"]<[^><]*>['"]/ig); 
```

第一部分`['"][\d]*['"](?=[\s]*\?)`匹配引号内的数字，后跟可选空格和？。
第二部分`['"]<[^><]*>['"]`匹配引号和 <> 内的任何符号（<、> 除外）。

此解决方案的一个缺点是匹配的结果用引号括起来。
希望它可以帮助您实现所需的功能。

# iphone - 使用 xcode 4.3.2 在 iphone 中使用 sqlite 数据库

> ID：10229758
> 
> 赞同：0
> 
> 时间：2012-04-19T14:02:49.947
> 
> 标签：iphone

如何使用 xcode 4.3.2 在 iphone 中使用 sqlite 数据库...。我在查找数据库路径时遇到问题？因为我已经在我的应用程序的数据库文件夹中复制了 FormDB.sqlite ......请帮助我，因为我是 iphone 编程新手......

在 Appdelegate 文件的 applicationDidFinishLaunching 中调用此方法，但它返回 success=false

```
- (void) copyDatabaseIfNeeded {

    //Using NSFileManager we can perform many file system operations.
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:dbPath]; 

    if(!success) {

        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"FormDB.sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

        if (!success) 
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }   
}

- (NSString *) getDBPath {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"FormDB.sqlite"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:31:44.357

在`AppDelegate.h`文件中声明

```
@interface AppDelegate{

        NSString *databaseName;
    NSString *databasePath;

}
-(void) checkAndCreateDatabase;
@end 
```

然后在

```
@implementation AppDelegate{

    - (void)applicationDidFinishLaunching:(UIApplication *)application {
        // Setup some globals
        databaseName = @"FormDB.sqlite";

        // Get the path to the documents directory and append the databaseName
        NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [documentPaths objectAtIndex:0];
        databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

        // Execute the "checkAndCreateDatabase" function
        [self checkAndCreateDatabase];

        // Query the database for all animal records and construct the "animals" array
        [self readAnimalsFromDatabase];

        // Configure and show the window
        [window addSubview:[navigationController view]];
        [window makeKeyAndVisible];
    }
    -(void) checkAndCreateDatabase{
        // Check if the SQL database has already been saved to the users phone, if not then copy it over
        BOOL success;

        // Create a FileManager object, we will use this to check the status
        // of the database and to copy it over if required
        NSFileManager *fileManager = [NSFileManager defaultManager];

        // Check if the database has already been created in the users filesystem
        success = [fileManager fileExistsAtPath:databasePath];

        // If the database already exists then return without doing anything
        if(success) return;

        // If not then proceed to copy the database from the application to the users filesystem

        // Get the path to the database in the application package
        NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

        // Copy the database from the package to the users filesystem
        [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

        [fileManager release];
    }
}
@end 
```

试试这个代码可以帮助你.... :-)

# django - Django 的 id 列表作为表单字段

> ID：10229760
> 
> 赞同：3
> 
> 时间：2012-04-19T14:02:54.020
> 
> 标签：django, django-forms

如果这个问题以前出现在某个地方，我深表歉意，但我找不到任何东西。

所以，问题真的很简单：这些是模仿的行为的任何 django 原生表单域`request.POST.getlist('something')`吗？

在我的 UI 中，用户创建了一个他想要保存的对象列表，这些对象表示为具有相同名称的隐藏输入列表：

```
<input type="hidden" name="cc" value="1045">
<input type="hidden" name="cc" value="1055">
<input type="hidden" name="cc" value="1046"> 
```

`request.POST.getlist`完全符合我的需要，但我不想直接处理请求，我想通过表单来处理它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:54:22.467

感谢您的评论。是的，我发现它`ModelChoiceField`用于`ManyToMany`模型中的字段。在表单方面，它表示为`MultipleChoiceField/TypedMultipleChoiceField`。

所以我决定子类化这个字段并覆盖`validate methods`.

```
class NotValidatedMultipleChoiceFiled(forms.TypedMultipleChoiceField):
    """Field that do not validate if the field values are in self.choices"""

    def to_python(self, value):
        """Override checking method"""
        return map(self.coerce, value)

    def validate(self, value):
        """Nothing to do here"""
        pass 
```

# android - 驻留在 Google TV 上的应用能否确定平台上驻留的其他应用

> ID：10229766
> 
> 赞同：1
> 
> 时间：2012-04-19T14:03:06.593
> 
> 标签：android, google-tv

您好，我正在寻找有关我在 Google TV 上创建和安装的应用程序如何确定平台上的其他应用程序的一些见解。如果我的应用程序确定盒子上还有哪些其他应用程序，我的应用程序可以启动它们吗？可以指示我的应用程序通过 anymot 协议启动它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:12:21.493

> 驻留在 Google TV 上的应用能否确定平台上驻留的其他应用

如果这是一个标准的 Android 应用程序，您可以使用标准的 Android[`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html)来识别设备上的其他内容，无论是手机、平板电脑还是 Google TV。

> 如果我的应用程序确定盒子上还有哪些其他应用程序，我的应用程序可以启动它们吗？

用于`getLaunchIntentForPackage()`获取`Intent`适合用于`startActivity()`启动特定软件包的信息。

> 可以指示我的应用程序通过 anymot 协议启动它们吗？

我不知道那个，对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:20:05.767

请参阅[从您自己的（意图）打开另一个应用程序，](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)了解如何获得启动应用程序的意图。对于 Anymote，您需要使用 intent.toUri(Intent.URI_INTENT_SCHEME) 将意图转换为 uri 字符串。然后使用带有该 uri 的 Anymote fling 消息在 Google TV 设备上启动应用程序。请参阅 Able Remote 应用程序以了解其工作原理。

# java-me - LWUIT 1.4 中的 isPortrait 不起作用？

> ID：10229769
> 
> 赞同：0
> 
> 时间：2012-04-19T14:03:09.477
> 
> 标签：java-me, lwuit, orientation-changes

我正在使用 LWUIT 1.4。我想锁定横向的方向。所以，我用

```
Display.getInstance().isPortrait(); 
```

但它说找不到符号`isPortrait()`？

谁能说出为什么 LWUIT1.4 中没有这种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:09:11.270

First...are you importing the correct `Display`? Is important that you don't import the lcdui `Display`. Second...the correct method is lockOrientation(boolean portrait) . You must write `Display.getInstace().lockOrientation(true);`. I think is `true`value...try to do that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:53:29.987

好吧，我通过获取屏幕高度和宽度使其工作。

如果宽度小于高度，则丢弃它，如果高于允许它

在 Lwuit 以及 Blackberry UIApplication 及其工作中实现了相同的场景

# dynamics-ax-2009 - 如何解决此 Dynamics AX 2009 错误？

> ID：10229774
> 
> 赞同：0
> 
> 时间：2012-04-19T14:03:15.017
> 
> 标签：dynamics-ax-2009, axapta

在进行数据字典同步时，出现以下错误：

“数据库中已经有一个名为‘I_1338SORTINGIDIDX’的对象。” “在 1 个表上同步失败”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:05:41.037

我不记得有同样的情况。通常系统会发现表索引并在需要时重新创建它们。这可能与您的应用程序和数据库之间的 ID 不匹配有关。

如果您有相关数据库的备份，您可以简单地使用 DROP INDEX I_1338SORTINGIDIDX 删除索引 在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ms176118.aspx](http://msdn.microsoft.com/en-us/library/ms176118.aspx)

删除索引后，再次同步，从而重新创建索引。

它似乎是一个用于排序的非聚集索引，因此在没有太多模糊的情况下重新制作它应该是安全的。如果它是聚集索引或主索引，对我来说可能会更麻烦。

祝你好运！

# mysql - 将站点迁移到新服务器后，Sql 查询以不同的方式显示结果

> ID：10229776
> 
> 赞同：0
> 
> 时间：2012-04-19T14:03:21.357
> 
> 标签：mysql, wordpress

我有网站[http://change.is](http://change.is)，我将它迁移到新服务器。现在其中一个 sql 查询显示奇怪的结果。查询如下：

```
SELECT distinct group_concat(pm.meta_value separator ' ') as composer, group_concat(pm.meta_value separator '-') as composer_link FROM $wpdb->postmeta pm where (pm.meta_key='composer_fname_value' OR pm.meta_key='composer_lname_value') and pm.post_id in (SELECT p.ID FROM $wpdb->posts p where p.post_type='quote' AND p.post_status='publish') group by pm.post_id order by group_concat(IF(pm.meta_key='composer_lname_value', pm.meta_value,'')) ASC 
```

解释：

我在自定义帖子类型“引用”的管理部分中有诸如作者名字、作者姓氏（我在此查询中需要的）等元字段。在迁移到新服务器之前，此查询会选择作者的名字然后是作者的姓氏。所以输出变得像（Seteve Jobs，Jeff Bezos）。迁移后，我为此自定义类型“报价”添加了新帖子。但现在它是选择作者姓氏然后作者名字所以输出就像（Diamandis Peter）

点，它只为添加的新帖子选择这个，对于数据库中的旧帖子，它会很好。

请对此提供帮助，或提供替代查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:30:40.400

看起来您想`group_concat`根据关联的 pm.meta_key 订购 pm.meta_values(s)。当 pm.meta_key='composer_lname_value' 时，值应该排在第一位。

在这种情况下，最简单的解决方案似乎是使用可选的 ORDER BY 子句`group_concat`：

```
SELECT distinct 
 group_concat(pm.meta_value order by IF(pm.meta_key='composer_lname_value', 1,0) separator ' ') as composer,
 group_concat(pm.meta_value order by IF(pm.meta_key='composer_lname_value', 1,0) separator '-') as composer_link
 ... the rest of the query being identical... 
```

也许这就是您想在查询末尾使用 ORDER BY 实现的目标，但这会对输出行进行排序，而不是对同一行内的内容进行排序。

# node.js - 如何在 Node.js 中逐行读取 child_process？

> ID：10229779
> 
> 赞同：8
> 
> 时间：2012-04-19T14:03:24.900
> 
> 标签：node.js, readline, child-process

我正在尝试制作一个 Node.js 脚本来分析磁盘使用情况。为此，我全力以赴`du`，但我无法弄清楚如何逐行读取子进程的输出。这是我到目前为止所尝试的：

```
var spawn = require("child_process").spawn,
    rl = require('readline'),
    du = spawn('du', ['/home']);
    linereader = rl.createInterface(du.stdout, du.stdin);

// Read line by line.
//du.stdout.on('data', function (data) {
linereader.on('line', function (data) {
  console.log(data);
}); 
```

`du.stdout.on('data'`只是读取数据块，虽然`readline`应该按行拆分其输入，但它没有，相反，我得到了完全相同的数据（du.stdout 返回一个缓冲区，但调用`.toString()`它会得到与我得到的相同的数据`linereader`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:12:15.667

Readline 在 Node.js 的当前稳定版本 (0.6.14) 中被破坏。我们在这里遇到了同样的问题：

[https://stackoverflow.com/a/10012306/362536](https://stackoverflow.com/a/10012306/362536)

但是，TooTallNate 有一个真正快速的代码片段可以为您解决这个问题： [https ://gist.github.com/1785026](https://gist.github.com/1785026)

在以后的版本中有一个拉取请求来解决这个问题，它应该在 0.7.8 版本中。

# sql - 如何将数据过滤到新列中？sql

> ID：10229780
> 
> 赞同：2
> 
> 时间：2012-04-19T14:03:25.483
> 
> 标签：sql, sql-server

尊敬的 Stackoverflow 用户您好。

在 sql server 上使用 sql

我搜索了论坛和互联网，但没有找到有关我想要实现的目标的信息。主要是因为我不知道正确的术语。

我创建了一个新视图，**我想从列 (ver_klass) 中过滤掉不同的数据到新创建的列。**

下图是我目前的视图。

![在此处输入图像描述](../Images/8851322d384aec87e32cdd1d05dc536a.png)

这就是我想表达的观点：

```
ver_rayon  |ver_metier |ver_secteur
96         |           |
96         |           |
           | M10       |
           | M11       |
           |           |S1
12         |           | 
```

我想知道是否有可能做到这一点，以及如何做到这一点。非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:07:50.513

这可以通过一些`CASE`语句来管理。这个想法是检查第一个字符是否`ver_klass`是`M`或`S`并对每个字符采取不同的操作。所以在第一种情况下，如果它既不是 M,S 则值变为`ver_rayon`。第二种和第三种情况分别查找`M`并`S`存储到这些列。由于该行仅匹配三种情况中的一种，因此其他两种情况为 NULL。

```
SELECT
 ...
 ...
 CASE WHEN LEFT(ver_klass, 1) <> 'S' AND LEFT(ver_klass, 1) <> 'M' THEN ver_klass ELSE NULL END AS ver_rayon,
 CASE WHEN LEFT(ver_klass, 1) = 'M' THEN ver_klass ELSE NULL END AS ver_metier,
 CASE WHEN LEFT(ver_klass, 1) = 'S' THEN ver_klass ELSE NULL END AS ver_secteur, 
```

# c# - 将字符串转换为两个整数？

> ID：10229786
> 
> 赞同：-3
> 
> 时间：2012-04-19T14:03:34.223
> 
> 标签：c#, parsing, int, type-conversion

我有以下形式的字符串：

```
"(number) number" 
```

例如，它可能包含：

```
5 (5) 
```

或者

```
5 (3) 
```

我希望创建一个 int 变量来保存第一个值（在两种情况下都是 5）和第二个 int 变量，它将保存括号中的值（第一种情况下为 5，第二种情况下为 3）。

什么是我解析这个字符串并将信息保存在变量中的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:08:25.857

有趣的方式;-)

```
var s = "5 (3)";
var space = s.IndexOf(' ');
var openParen = s.IndexOf('(')+1; 
var closeParen = s.IndexOf(')');
int firstNumber = int.Parse(s.Substring(0, space));
int secondNumber = int.Parse(s.Substring(openParen, closeParen-openParen)); 
```

或正则表达式方式：

```
var s = "5 (3)";
var match = Regex.Match(s, @"(\d+( \((\d+)\)");
int firstNumber = int.Parse(match.Groups[1].Value);
int secondNumber = int.Parse(match.Groups[2].Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:08:39.897

使用正则表达式：

```
string input = "5 (3)";
string pattern = @"(\d+) \((\d+)\)";
var match = Regex.Match(input, pattern);
if (match.Success)
{
    int x = int.Parse(match.Groups[1].Value);
    int y = int.Parse(match.Groups[2].Value);
    ...
}
else
{
    // Fail
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:09:26.043

对于第三种选择：

看看[String.Split 方法](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)和[Int32.Parse 方法](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:09:59.653

这不是我的想法，所以它可能需要一些更正。您可以将字符串拆分为所有不需要的字符，并删除任何空值。

```
string[] values = stringValues.Split(new char[] {' ','(',')'}, StringSplitOptions.RemoveEmptyEntries);
foreach (string stringValue in values)
{
    int intValue = Convert.ToInt32(stringValue);
    // etc.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T14:10:56.667

使用一些正则表达式！`\d`指定数值并`( )`指定返回值..

```
var regex = new Regex("(\d+) \((\d+)\)");
var match = regex.Match(yourStringVariable); 
```

所以对于`yourStringVariable = "5 (3)"`，输出将是：

```
Console.WriteLine(match.Groups[1].Value); // Prints 5
Console.WriteLine(match.Groups[2].Value); // Prints 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T14:17:53.210

```
my $str = "(5) 3";
my ($x, $y) = $str =~ /\d+/g;
print "$x\t$y\n"; 
```

测试链接：http: [//ideone.com/PzidT](http://ideone.com/PzidT)

* * *

如果您不确定输入是否正好有两个数字，那么更安全的代码是：

```
my $str = "(5) 3 4 (8)"; 
my ($x, $y) = ($str =~ /\d+/g)[0..1]; 
print "$x\t$y\n"; 
```

测试链接：http: [//ideone.com/dBIjh](http://ideone.com/dBIjh)

# javascript - 将 html 表输入值添加到 mysql 数据库表

> ID：10229791
> 
> 赞同：0
> 
> 时间：2012-04-19T14:03:54.390
> 
> 标签：javascript, php, mysql, html-table

我已经广泛搜索了这个问题的答案，但找不到任何答案。

我想使用 php 和 javascript 将 html 表的内容添加到 mysql 数据库中，其中每一行都是一条新记录。

**这是一个表格示例：**

```
<table width="100%" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <th scope="col">ID</th>
    <th scope="col">NAME</th>
    <th scope="col">EMAIL</th>

  </tr>
  <tr id="row">
    <td><input name="ID" type="text" value="20" /></td>
    <td><input name="NAME" type="text" value="Peter" /></td>
    <td><input name="EMAIL" type="text" value="peter@gmail.com" /></td>
  </tr>
  <tr id="row">
    <td><input name="ID" type="text" value="21" /></td>
    <td><input name="NAME" type="text" value="Jhon" /></td>
    <td><input name="EMAIL" type="text" value="jhon@yahoo.com" /></td>
  </tr>
  <tr id="row">
    <td><input name="ID" type="text" value="22" /></td>
    <td><input name="NAME" type="text" value="Mike" /></td>
    <td><input name="EMAIL" type="text" value="mike@hotmail.com" /></td>
  </tr>
</table>

<input name="Btn" type="button" onclick="addRecords()" value="Add"/>
</form> 
```

**还有我尝试过的javascript示例：**

```
<script>
function addRecords()
{
    var row = document.getElementById("row")

    for (x in row)
    {
        $.post="<? $insertSQL = sprintf("INSERT INTO accounts (acc_id, acc_name, acc_email) VALUES (%s, %s)",
                       GetSQLValueString($_POST['ID'], "integer"),
                       GetSQLValueString($_POST['NAME'], "text"),
                       GetSQLValueString($_POST['EMAIL'], "text"));

  mysql_select_db($database_G3CSAdminControlPanel, $G3CSAdminControlPanel);
  $Result1 = mysql_query($insertSQL, $G3CSAdminControlPanel) or die(mysql_error()); ?>"
    }
}

</script> 
```

上面做了什么，它只是将表中的最后一条记录添加到数据库中。我猜我的问题出在php代码上，每个输入也应该放入一个数组中，而不仅仅是行，但不知道该怎么做。

**更新** 我展示的代码只是我正在尝试做的一个例子。行的 id 必须保持不变，因为我使用的是在我的实际网页中创建表的脚本。

基本上我想做以下事情，但是在 PHP 中：

```
<script>
function addRecords()
{
    var row = document.getElementById("row");
    var n = 0;
    var q = 0;
    for (x in "row")
    {
        n++;
        var code = document.getElementsByName("ID")[q].value;
        var desc = document.getElementsByName("NAME")[q].value;
        var price = document.getElementsByName("EMAIL")[q].value;
        alert(code + ' ' + desc + ' ' + price);
        q++;
    }
    alert('There is ' + n + ' rows in the table');
}
</script> 
```

该脚本返回每行中输入的值。我想在 PHP 中做类似的事情，但是将每行中输入的值添加为数据库表中的记录。

因此，与其对每一行执行 Javascript 警报，不如执行一个 PHP 脚本来插入该行的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:16:04.777

您必须唯一标识每一行（ID0、EMAIL0 等）。这在通过 PHP 或脚本构建表时很容易完成。然后在你的 PHP 表单代码中，你在 $_GET 上做一个 foreach 并阅读每个。你现在拥有它的方式，每个后续的 ID、EMAIL 等都覆盖了前一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:18:28.390

您需要插入三个字段。每个都有一些。因此，您需要使用输入字段的名称作为 html 数组。否则在表单发布时，最后一个字段将覆盖之前的字段。

具体来说，编辑您的标记如下：

```
<table width="100%" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <th scope="col">ID</th>
    <th scope="col">NAME</th>
    <th scope="col">EMAIL</th>
  </tr>
  <tr id="row1">
    <td><input name="ID[]" type="text" value="22" /></td>
    <td><input name="NAME[]" type="text" value="Mike" /></td>
    <td><input name="EMAIL[]" type="text" value="mike@hotmail.com" /></td>
  </tr>
  <tr id="row2">
    <td><input name="ID[]" type="text" value="22" /></td>
    <td><input name="NAME[]" type="text" value="Mike" /></td>
    <td><input name="EMAIL[]" type="text" value="mike@hotmail.com" /></td>
  </tr>
  <tr id="row3">
    <td><input name="ID[]" type="text" value="22" /></td>
    <td><input name="NAME[]" type="text" value="Mike" /></td>
    <td><input name="EMAIL[]" type="text" value="mike@hotmail.com" /></td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:21:09.213

与其直接访问您的行，不如先获取您的表格，然后再获取行。

```
var table = document.getElementById('myTable');
for (i=1; i < table.rows.length; i++) {
    var row = table.rows(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:30:41.700

如果您有多个具有相同 id 的元素，例如：

```
 <tr id="row"> 
```

然后是函数：

```
document.getElementById("row") 
```

将只考虑其中的最后一个（这取决于浏览器）。

要真正确定您将真正获得您必须为它们提供不同 ID 的所有元素。喜欢

```
<tr id="row1">...
...
<tr id="row2">...
...
<tr id="row3">...
... 
```

祝你好运！

# html - 似乎不能风格？

> ID：10229792
> 
> 赞同：0
> 
> 时间：2012-04-19T14:03:54.690
> 
> 标签：html, html-table

简单的 CSS：

```
table.tgi
{
    width:100%;
}

table.tgi td.labelcell
{
    text-align:right;
    color:Red;
}

table.tgi td.valuecell
{
    text-align:left;
    color:Green;
} 
```

简单的 HTML：

```
<table id="tgi" runat="server" width="100%">
            <tbody>
            <tr>
                <td class="labelcell">ID:</td>
                <td></td>
                <td class="labelcell">Originator:
                </td>
                <td class="valuecell"><asp:Button ID="Button1" runat="server" Text="Button" /></td>
            </tr>
            <tr>
                <td class="labelcell">Expected Ship Date:</td>
                <td class="valuecell"><asp:TextBox ID="txtExpectedShipDate" runat="server"></asp:TextBox></td>
                <td class="labelcell">Actual Ship Date:</td>
                <td class="valuecell"><asp:TextBox ID="txtActualShipDate" runat="server"></asp:TextBox></td>
            </tr>
            </tbody>
        </table> 
```

但是TD样式不起作用...

# 编辑

我试过这个：

```
table#tgi
{
    width:100%;
}

table#tgi td.labelcell
{
    text-align:right;
    color:Red;
}

table#tgi td.valuecell
{
    text-align:left;
    color:Green;
} 
```

使用 HTML：

```
 <table id="tgi" runat="server">
            <tbody>
            <tr>
                <td class="labelcell">ID:</td>
                <td class="valuecell"></td>
                <td class="labelcell">Originator:</td>
                <td class="valuecell"><asp:Button ID="Button1" runat="server" Text="Button" /></td>
            </tr>
            <tr>
                <td class="labelcell">Expected Ship Date:</td>
                <td class="valuecell"><asp:TextBox ID="txtExpectedShipDate" runat="server"></asp:TextBox></td>
                <td class="labelcell">Actual Ship Date:</td>
                <td class="valuecell"><asp:TextBox ID="txtActualShipDate" runat="server"></asp:TextBox></td>
            </tr>
            </tbody>
        </table> 
```

这不起作用...但是如果我将它更改为一个类它可以工作...但是我想用一个 ID 尝试它？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:05:41.273

如果 tgi，您的表有一个 ID，而不是一个类。

修复 #1

```
<table class="tgi" runat="server" width="100%"> 
```

修复 #2

```
table#tgi
{
    width:100%;
}

table#tgi td.labelcell
{
    text-align:right;
    color:Red;
}

table#tgi td.valuecell
{
    text-align:left;
    color:Green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:06:53.813

由于 tgi 是 table 标记上的一个类，因此您的选择器必须是 table#tgi。有关选择器的更多信息，请参阅[css 标准。](http://www.w3.org/TR/CSS2/selector.html#id-selectors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:07:23.733

你是选择器状态：

```
table.tgi 
```

这意味着一个`table`与类`tgi`。

您的表没有此类，但它具有作为 ID 的值。要选择作为 ID，您需要使用`#`而不是`.`

```
table#tgi 
```

[**-- 见示例 --**](http://jsfiddle.net/Curt/wUq4H/)

# macos - 使用 CFBundleCopyExecutableURL 查看应用程序在 Mac OS X 中是否可执行

> ID：10229793
> 
> 赞同：2
> 
> 时间：2012-04-19T14:03:55.623
> 
> 标签：macos

有人可以告诉我是否只是在伪代码中使用 CFBundleCopyExecutableURL(CFBundleRef) ：

```
if (CFBundleCopyExecutableURL(MyCFBundleRef) == NULL) {NSLog(@"This app is not supported on this system")}; 
```

事实上，是否足以确认一个应用程序是否可以在本地硬件上运行？

我的应用程序的一部分向用户展示了他们的 OSX10.7 系统上的 Applications 文件夹列表，但我希望允许他们拖放（巧妙地！）放置在桌面之类的某个地方的其他应用程序。如果我可以仔细检查他们是否没有尝试引入旧的通用应用程序或通过将操作系统升级到 Lion 时留在他们系统上的类似应用程序，那将会很方便......

我使用了 Apple 提供的一些示例代码来检查标头和当前架构，但是在我尝试过的几个应用程序中失败了：尽管计算机能够运行该程序，但代码返回 false。要查看此代码，请使用“checkexecutablearchitecture”搜索 Xcode 文档，示例代码显示在结果中。我乐观地希望代码已经过时并且现在上面的简单检查就足够了。

谢谢你的帮助！

编辑：我想我已经找到了一个解决方案——当然适合我的场景。我现在正在使用如下的小方法：

```
-(BOOL)isURLExecutable:(NSURL*)appURL;
{
    CFURLRef bundleURL = CFURLCreateFromFileSystemRepresentation(NULL, (uint8_t*)[[appURL path] UTF8String], strlen((const char *)(uint8_t*)[[appURL path] UTF8String]), true);
    CFArrayRef archArrayRef = CFBundleCopyExecutableArchitecturesForURL(bundleURL);

    BOOL isI386 = [(NSArray*)archArrayRef containsObject:[NSNumber numberWithInt:kCFBundleExecutableArchitectureX86_64]] || [(NSArray*)archArrayRef containsObject:[NSNumber numberWithInt:kCFBundleExecutableArchitectureI386]];

    if (archArrayRef != NULL) {
        if (isI386) {
            return TRUE;
        }
        else {
            return FALSE;
        }
    }
    return FALSE;
} 
```

如果有人可以建议我更好的方法，请做！

托德。

# c# - .Net 中的堆数据结构

> ID：10229797
> 
> 赞同：4
> 
> 时间：2012-04-19T14:04:03.533
> 
> 标签：c#, .net, data-structures

> **可能重复：**
> [.Net 中的优先级队列](https://stackoverflow.com/questions/102398/priority-queue-in-net)

.Net 中是否有堆数据结构的实现？

[http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:15:00.650

我一直在学习的这门课可能对你有用。显然我不给你任何保证。

```
public sealed class FibonacciHeap<TKey, TValue>
{
    readonly List<Node> _root = new List<Node>();
    int _count;
    Node _min;

    public void Push(TKey key, TValue value)
    {
        Insert(new Node {
            Key = key,
            Value = value
        });
    }       

    public KeyValuePair<TKey, TValue> Peek()
    {
        if (_min == null)
            throw new InvalidOperationException();
        return new KeyValuePair<TKey,TValue>(_min.Key, _min.Value);
    }       

    public KeyValuePair<TKey, TValue> Pop()
    {
        if (_min == null)
            throw new InvalidOperationException();
        var min = ExtractMin();
        return new KeyValuePair<TKey,TValue>(min.Key, min.Value);
    }

    void Insert(Node node)
    {
        _count++;
        _root.Add(node);
        if (_min == null)
        {
            _min = node;
        }
        else if (Comparer<TKey>.Default.Compare(node.Key, _min.Key) < 0)
        {
            _min = node;
        }
    }

    Node ExtractMin()
    {
        var result = _min;
        if (result == null)
            return null;
        foreach (var child in result.Children)
        {
            child.Parent = null;
            _root.Add(child);
        }
        _root.Remove(result);
        if (_root.Count == 0)
        {
            _min = null;
        }
        else
        {
            _min = _root[0];
            Consolidate();
        }
        _count--;
        return result;
    }

    void Consolidate()
    {
        var a = new Node[UpperBound()];
        for (int i = 0; i < _root.Count; i++)
        {
            var x = _root[i];
            var d = x.Children.Count;
            while (true)
            {   
                var y = a[d];
                if (y == null)
                    break;                  
                if (Comparer<TKey>.Default.Compare(x.Key, y.Key) > 0)
                {
                    var t = x;
                    x = y;
                    y = t;
                }
                _root.Remove(y);
                i--;
                x.AddChild(y);
                y.Mark = false;
                a[d] = null;
                d++;
            }
            a[d] = x;
        }
        _min = null;
        for (int i = 0; i < a.Length; i++)
        {
            var n = a[i];
            if (n == null)
                continue;
            if (_min == null)
            {
                _root.Clear();
                _min = n;
            }
            else
            {
                if (Comparer<TKey>.Default.Compare(n.Key, _min.Key) < 0)
                {
                    _min = n;
                }
            }
            _root.Add(n);
        }
    }

    int UpperBound()
    {
        return (int)Math.Floor(Math.Log(_count, (1.0 + Math.Sqrt(5)) / 2.0)) + 1;
    }

    class Node
    {
        public TKey Key;
        public TValue Value;
        public Node Parent;
        public List<Node> Children = new List<Node>();
        public bool Mark;

        public void AddChild(Node child)
        {
            child.Parent = this;
            Children.Add(child);
        }

        public override string ToString()
        {
            return string.Format("({0},{1})", Key, Value);
        }
    }
} 
```

# asp.net-mvc-3 - asp MVC3部署，app真的很慢

> ID：10229799
> 
> 赞同：0
> 
> 时间：2012-04-19T14:04:13.767
> 
> 标签：asp.net-mvc-3, deployment

我有工作 c# mssql mvc3 应用程序。部署是手动完成的，没问题，添加几个 dll 后一切正常。问题是我的应用程序非常慢。

只是为了在我的联系页面上有粗略的图片，其中控制器只是返回包含一些联系信息的视图，带有一些 css 的纯 html（没什么复杂的）需要 6-7 秒来呈现。

我在欧洲，我的托管服务器在美国，ping 我的服务器（winhost.com）平均为 254 毫秒。加载 winhost.com 主页时只需 2-3 秒即可呈现。

所以我很确定我的配置中有一些东西。在 web.config 中，我将编译调试禁用为 false。我还应该考虑什么？

谢谢

# iphone - 我想在同一视图控制器中同时使用标签栏和导航栏

> ID：10229805
> 
> 赞同：0
> 
> 时间：2012-04-19T14:04:43.813
> 
> 标签：iphone, objective-c, ios, ios4

我从对象库中获取 ViewController 并放置导航控制器，而不是放置与导航控制器相同的选项卡栏......但选项卡栏无法显示在控制器中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:10:19.193

首先在您的委托 .h 文件中声明您的标签栏控制器

```
@property (strong, nonatomic) UITabBarController *tabBarController; 
```

然后声明您的根视图控制器并将其添加到 .m 文件中的导航控制器

```
UIViewController *homeViewController = [[[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil] autorelease];
    UINavigationController *navigationcontroller = [[[UINavigationController alloc] initWithRootViewController:homeViewController] autorelease]; 
```

然后将控制器数组添加到标签栏

```
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:navigationcontroller,secondViewController and so on, nil]; 
```

# android - 使用 android sdk 工具签署私钥

> ID：10229807
> 
> 赞同：0
> 
> 时间：2012-04-19T14:04:51.973
> 
> 标签：android, eclipse

我想在发布应用程序之前签署一个私钥。我想用 sdk 工具来做。我输入这个命令

```
 $ keytool -genkey -v -keystore my-release-key.keystore
-alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

在 cmd 中，我在那个路径上。

```
C:\Users\dmitrym\android-sdks\tools 
```

但是当我运行该命令时，我从命令行得到，$ keytool..不是命令..

如何运行该命令以使其正常工作？文件将在哪个文件夹中输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:08:50.990

keytool 可以在你的 Java/bin 目录中找到（在我的例子中是“c:\Program Files (x86)\Java\jdk1.6.0_26\bin\keytool.exe”）输出应该在你运行的文件夹中

# iphone - 读取 kmz 文件并在地图上显示图像

> ID：10229808
> 
> 赞同：1
> 
> 时间：2012-04-19T14:04:56.793
> 
> 标签：iphone, xcode, mapkit, kml, kmz

我阅读了本教程[Apple kml viewvwer](http://developer.apple.com/library/ios/#samplecode/KMLViewer/Listings/Classes_KMLViewerViewController_m.html#//apple_ref/doc/uid/DTS40010046-Classes_KMLViewerViewController_m-DontLinkElementID_8)文章。它可以帮助我加载 kml，但是当我也加载图像时。我创建文件夹名称文件并在文件夹中写入png图像..在kml文件中，使用图像参考..这是代码

```
self.archive = [ZKDataArchive archiveWithArchivePath:archivePath];
[self.archive inflateAll];
for (int i =0;i < [self.archive.inflatedFiles count]; i++) {

    NSDictionary *fileDict = [self.archive.inflatedFiles objectAtIndex:i]; 
    NSData *fileData = [fileDict objectForKey:ZKFileDataKey];
    NSString *fileName = [fileDict objectForKey:ZKPathKey];
    NSString *ext = [fileName pathExtension];

    NSString* fileToSaveTo;

    if([fileName isEqualToString:@"doc.kml"])
    {

        fileToSaveTo = fileName;
        NSArray* path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
        NSString* documentsDirectory = [path objectAtIndex:0];
        NSLog(@"%@",documentsDirectory);
        [fileData writeToFile:[NSString stringWithFormat:@"%@/%@",documentsDirectory,fileToSaveTo] atomically:YES];

    }
    else{
        fileToSaveTo = [fileName substringFromIndex:6];
        NSLog(@"%@",fileToSaveTo);

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
        NSString *documentsDirectory = [paths objectAtIndex:0];
        // Get documents folder
        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"files"];
        NSLog(@"%@",documentsDirectory);
        [fileData writeToFile:[NSString stringWithFormat:@"%@/%@",dataPath,fileToSaveTo] atomically:YES];
    }
} 
```

但我在地图上看不到图像。图像在文档中是安全的，并且 kml 文件读取完美......但我也想显示图像:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:33:34.850

我无法评论在 iPhone 应用程序中对 kml 的任何使用，但我认为您遇到的问题很可能在此之前发生。

如果您在桌面上查看 Google 地球中的 kml/kmz，它们是否都能正常工作？你没有这样说，但我的猜测是没有。如果是这样，那么这是我无法帮助的问题。

我的建议是实际检查 kmz 文件引用和结构。kmz 文件的一般标准是在存档的根目录中包含一个 doc.kml 文件，并且在该存档的“文件”目录中包含所有资源。因此，所有引用都应该是*相对*的，例如：`<href>files\image.png</href>` 许多生成 kml 的程序将使用在本地工作的绝对引用，但在压缩到 kmz 或被其他人查看时不会使用。

# c# - 是否可以在 C# 项目中使用 XDT？

> ID：10229820
> 
> 赞同：2
> 
> 时间：2012-04-19T14:05:27.037
> 
> 标签：c#, xslt, xdt-transform

我在数据库表中有 XML，需要根据特定条件转换更新值、简单更改。

我做了研究，但只找到了适用于 Web.Config 或 App.Config 的工具/插件：

[http://ctt.codeplex.com/](http://ctt.codeplex.com/)

[http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)

我可以使用 XSLT，但 XDT 似乎更理想、更简单，但我如何在我的 C# 项目中使用它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-07T13:56:30.230

对于看到这篇文章的任何人，有一个 NuGet 包提供了执行此转换的能力：

> 安装包 Microsoft.Web.Xdt

然后，它是这样的：

```
// Some example file paths
var sourceDoc = "web.config";
var transDoc = "web.Debug.config";
var destDoc = "bin\web.config";

// The translation at-hand
using (var xmlDoc = new XmlTransformableDocument())
{
  xmlDoc.PreserveWhitespace = true;
  xmlDoc.Load(sourceDoc);

  using (var xmlTrans = new XmlTransformation(transDoc))
  {
    if (xmlTrans.Apply(xmlDoc))
    {
      // If we made it here, sourceDoc now has transDoc's changes
      // applied. So, we're going to save the final result off to
      // destDoc.
      xmlDoc.Save(destDoc);
    }
  }
} 
```

当然，这是非常基本的检查，但它为您提供了要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:34:31.383

最后找到了一段很好的代码，可以满足我的要求：

[http://petemontgomery.wordpress.com/2010/09/20/microsoft-xdt-language/](http://petemontgomery.wordpress.com/2010/09/20/microsoft-xdt-language/)

[http://code.google.com/p/xdt/](http://code.google.com/p/xdt/)

# php - 通过 PHP 在 XML 中添加条目

> ID：10229822
> 
> 赞同：0
> 
> 时间：2012-04-19T14:05:30.957
> 
> 标签：php, xml

嗨，我期待创建一个表单，让人们将新条目上传到 .xml 文件中。表单不是问题，对我来说问题是如何将新条目（动态和静态）添加到现有的 .xml 文件中。

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<item><provider>Fabian</provider>
<provider_itemid>1</provider_itemid>
<name>Robe der Regalia</name>
<origin>Art: Drop</origin>
<description>Mindest-Stufe: Keine</description>
<extension>CLASSIC</extension>
<position>CHEST</position>
<online_url>www.google.me</online_url>
<lastupdate>28.03.2008 09:58:20</lastupdate>
<realm>Hibernia</realm>
<level>30</level>
<quality>95</quality>
<bonus>20</bonus>
<armor af="30">CLOTH</armor>
<effect id="HITPOINTS">27</effect>
<effect id="ENCHANTMENTS">2</effect>
<effect id="MENTALISM">2</effect>
<effect id="VOID">2</effect>
</item>
</daoc_items> 
```

如果有人有样品就好了！：） 谢谢

更新解决方案

```
<?php
  $daoc_items = array();
  $daoc_items [] = array(
  'name' => 'Skyros-Hammer aus Arkanit',
  'extensions' => 'test',
  'description' => 'test',
  'realm' => 'Midgard',
  'level' => 'Midgard',
  'quality' => "99",
  'bonus' => "99",
  'position' => "99",
  'weapon' => "99",
  'effect' => "99",
  'origin' => "99",
  );
  $daoc_items [] = array(
  'name' => 'Skyros-Hammer aus Arkanit',
  'extensions' => 'test',
  'description' => 'test',
  'realm' => 'Midgard',
  'level' => 'Midgard',
  'quality' => "99",
  'bonus' => "99",
  'position' => "99",
  'weapon' => "99",
  'effect' => "99",
  'origin' => "99",
  );

  $doc = new DOMDocument();
  $doc->formatOutput = true;

  $r = $doc->createElement( "daoc_items" );
  $doc->appendChild( $r );

  foreach( $daoc_items as $item )
  {
  $b = $doc->createElement( "item" );

  $name = $doc->createElement( "name" );
  $name->appendChild(
  $doc->createTextNode( $item['name'] )
  );
  $b->appendChild( $name );

  $extensions = $doc->createElement( "extensions" );
  $extensions->appendChild(
  $doc->createTextNode( $item['extensions'] )
  );
  $b->appendChild( $extensions );

  $description = $doc->createElement( "description" );
  $description->appendChild(
  $doc->createTextNode( $item['description'] )
  );
  $b->appendChild( $description );

  $realm = $doc->createElement( "realm" );
  $realm->appendChild(
  $doc->createTextNode( $item['realm'] )
  );
  $b->appendChild( $realm );

  $level = $doc->createElement( "level" );
  $level->appendChild(
  $doc->createTextNode( $item['level'] )
  );
  $b->appendChild( $level );

  $quality= $doc->createElement( "quality" );
  $quality->appendChild(
  $doc->createTextNode( $item['quality'] )
  );
  $b->appendChild( $quality);

  $bonus= $doc->createElement( "bonus" );
  $bonus->appendChild(
  $doc->createTextNode( $item['bonus'] )
  );
  $b->appendChild( $bonus);

  $position= $doc->createElement( "position" );
  $position->appendChild(
  $doc->createTextNode( $item['position'] )
  );
  $b->appendChild( $position);

  $weapon= $doc->createElement( "weapon" );
  $weapon->appendChild(
  $doc->createTextNode( $item['weapon'] )
  );
  $b->appendChild( $weapon);

  $effect= $doc->createElement( "effect" );
  $effect->appendChild(
  $doc->createTextNode( $item['effect'] )
  );
  $b->appendChild( $effect);

  $origin= $doc->createElement( "origin" );
  $origin->appendChild(
  $doc->createTextNode( $item['origin'] )
  );
  $b->appendChild( $origin);

  $r->appendChild( $b );
  }

  echo $doc->saveXML();
  $doc->save("item.xml")
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:16:33.760

您可以使用 xml 解析器/类中的一种构建，例如 simplexml：

```
$filename = 'my_xml_file.xml';
$items = simplexml_load_file($filename);

$items->item[0]->addChild('tagname', 'value');
$items->asXML($filename); 
```

当然，您必须找到一种方法来确定要将孩子添加到哪个项目（检查该行，说明`$items->item[0]`现在只获得第一个项目）。

阅读[http://nl.php.net/manual/en/book.simplexml.php](http://nl.php.net/manual/en/book.simplexml.php)上的文档，并查看其他 xml 操作类，特别是 DOM，然后选择您最熟悉的类

# ruby-on-rails-3 - 全新安装 Lion 后，我的应用似乎没有在会话中存储任何内容

> ID：10229826
> 
> 赞同：1
> 
> 时间：2012-04-19T14:05:43.533
> 
> 标签：ruby-on-rails-3, osx-lion, authlogic, cancan

我刚刚重新安装了 Lion，现在我的应用程序似乎无法在会话中存储任何内容。

我的应用程序中发生的情况是：

1.  我导航到登录页面
2.  输入有效凭据
3.  该应用程序对我进行身份验证（我已验证 @user_session.save 调用返回 true）
4.  我被重定向到登录用户被重定向到的页面
5.  但是，user_session 实际上是 nil，所以 CanCan 然后引发 AccessDenied 异常
6.  我被重定向到登录页面

在整个过程中，不会显示任何闪烁消息。此外，当引发 AccessDenied 异常时，我的应用程序通常会保存用户尝试访问的最后一页。但是，在我被重定向到登录页面后，会话中没有任何内容。甚至没有典型的“请登录”闪存消息。

在我重新安装之前一切正常。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:16:19.867

原来问题出在我使用子域的事实上。当我使用 localhost:3000 尝试该站点时，会话不会持续。但是，使用 lvh.me 修复了所有问题。

# android - Android NFCDemo：在浏览器上打开 URL

> ID：10229828
> 
> 赞同：1
> 
> 时间：2012-04-19T14:05:52.660
> 
> 标签：android, nfc

我尝试在安卓模拟器上使用安卓[NFCDemo](http://developer.android.com/resources/samples/NFCDemo/index.html)，因为我没有安卓手机。该演示运行良好，但我的问题是如何更改 MockNdefMessage 以在浏览器上打开 URL 标记。这是 NDEF 消息的示例：

```
public static final byte[] SMART_POSTER_URL_NO_TEXT = 
   new byte[] {(byte) 0xd1, (byte) 0x02, (byte) 0x0f, (byte) 0x53, (byte) 0x70, (byte) 0xd1,
            (byte) 0x01, (byte) 0x0b, (byte) 0x55, (byte) 0x01, 
            (byte) 0x67, (byte) 0x6f, (byte) 0x6f, (byte) 0x67, (byte) 0x6c, (byte) 0x65, 
            (byte) 0x2e, (byte) 0x63,(byte) 0x6f, (byte) 0x6d}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:25:48.893

尝试查看官方 DevGuide：NFCBasics 上有一个主题[，](http://developer.android.com/guide/topics/nfc/nfc.html)特别是如何[在 NdefMessage 中定义 URI](http://developer.android.com/guide/topics/nfc/nfc.html#abs-uri)。

# c - 在Linux中使用文件映射和并行处理C中的大文件

> ID：10229831
> 
> 赞同：0
> 
> 时间：2012-04-19T14:06:01.690
> 
> 标签：c, parallel-processing, mpi

我的想法是，每次每个节点都映射一大块文件并处理它。然后它 munmap 这个块并去下一块。

但是，我总是在集群（Openmpi）上失败，但在我的机器上运行良好（mpich）

映射部分是这样的： PAGE 是一个整数 = 4*1000*1000 // 偏移量必须是一个内存页的数量，即 4kb。ntask 是节点总数 mytask 表示当前节点数，因此缓冲区大小设置为总/节点数（statbuf.st_size/ntask）

```
char *
mmaping (char *source)
{
     int src;
     char *sm;
     struct stat statbuf;

     if ((src = open (source, O_RDONLY)) < 0)
    {
        perror (" open source ");
        exit (EXIT_FAILURE);
    }

     if (fstat (src, &statbuf) < 0)
    {
        perror (" fstat source ");
        exit (EXIT_FAILURE);
    }

      sm = mmap (0,(long long)statbuf.st_size/ntask, PROT_READ, MAP_SHARED | MAP_NORESERVE,src, mytask*share*PAGE);

      if (MAP_FAILED == sm)
      {
          perror (" mmap source ");
          exit (EXIT_FAILURE);
      }

      printf("length->%d\n",strlen(sm));

      return sm;
      }

error msg

[kalkyl3:15871] *** Process received signal ***
[kalkyl3:15871] Signal: Segmentation fault (11)
[kalkyl3:15871] Signal code: Address not mapped (1) 
```

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T11:46:45.677

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您可能应该调用 getpagesize() 而不是假设 4kB 页面。无论如何，千字节是 1024 字节，而不是 1000。您确定文件中每个 share*PAGE 大小的块的末尾都有一个空字节吗？因为如果没有，strlen 会很高兴地跑过映射区域的末端和段错误。——格雷格·伊诺泽姆采夫

# iphone - 从其他类到 UITableView 的 NSIndexPath

> ID：10229832
> 
> 赞同：0
> 
> 时间：2012-04-19T14:06:04.140
> 
> 标签：iphone, objective-c, ios, tableview

我有点困惑如何使用 IndexPath 将行添加到 TableView 中。首先我初始化：

```
 tableView = [[UITableView alloc] initWithFrame:self.view.bounds]; 

    //rows code here

    [self.view addSubview:tableView]; 
```

现在在这两者之间，我想在我的表视图中添加一些行。我有一个带有 NSStrings 的 NSArray 包含元素名称。

所以我试试这个：

```
[[self tableView] beginUpdates];
[[self tableView] insertRowsAtIndexPaths:(NSArray *)myNames withRowAnimation:UITableViewRowAnimationNone];
[[self tableView] endUpdates]; 
```

然后我读到我应该首先以某种方式将它添加到 UITableViewDataSource。所以我宣布错了？我问是因为我宁愿避免不必要的传递数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:17:56.673

表视图（以及[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)中的大多数视图）的想法是它们反映了模型的状态。所以，是的，正如您所建议的，让您的数据源维护一个数组：

```
@property (strong, nonatomic) NSMutableArray *array; 
```

对数组进行更改：

```
[self.array addObject:@"New Object"]; 
```

记录哪些行发生了变化...

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[self.array count]-1 inSection:0];
NSArray *myNames = [NSArray arrayWithObject:indexPath]; 
```

然后使用您发布的代码让表视图知道模型不同...

```
[[self tableView] beginUpdates];
[[self tableView] insertRowsAtIndexPaths:myNames withRowAnimation:UITableViewRowAnimationNone];
[[self tableView] endUpdates]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:25:47.733

~~AFAIK 这不是向 UITableView 添加数据的好方法。~~我误解了你想要做什么，在任何一种情况下，你都需要像这样设置你的 tableview 的数据源：

```
tableView = [[UITableView alloc] initWithFrame:self.view.bounds]; 

[tableView setDataSource:self];

[self.view addSubview:tableView]; 
```

然后你需要实现 UITableViewDataSource 协议（可能还有 UITableViewDelegate）。您将需要实现以下数据源方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [myNames count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[[UITableViewCell alloc] initWithCellStyleDefault reuseIdentifier@"MyIdentifier"] autorelease];
    [[cell textLabel] setText:[myNames objectAtIndex:[indexPath row]]];
    return cell;
} 
```

您可能想阅读重用标识符，有必要确保您的表格平滑滚动并且不占用太多内存。

# mysql - Ruby on Rails SQL 查询返回 # 我在 Ruby on Rails 中构建了一个小型 Twitter 克隆。它有一个用户模型、一个微博模型和一个关系模型。关系模型存储关注的用户 ID 和相应的关注用户 ID。我正在尝试添加一个新按钮，使当前用户在他们的微帖子中使用匹配参数关注所有其他用户。我已将该参数添加到 micropost 模型中。问题是，当我在 micropost 模型中查询数据库以查 问问题 问问题 2012-04-19T14:06:32.753 1074 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在 Ruby on Rails 中构建了一个小型 Twitter 克隆。它有一个用户模型、一个微博模型和一个关系模型。关系模型存储关注的用户 ID 和相应的关注用户 ID。我正在尝试添加一个新按钮，使当前用户在他们的微帖子中使用匹配参数关注所有其他用户。我已将该参数添加到 micropost 模型中。问题是，当我在 micropost 模型中查询数据库以查找具有匹配参数的用户时，它返回 # <activerecord::relation:... 为什么要这样做？="" 这是我的包含按钮的表单代码：="" <%="form_for(current_user.relationships.build(:followed_id" =="">current_user.matched_user), :remote => true) do |f| %><%= f.hidden_field :followed_id %><%= f.submit "Found A Matching User - Click Here To Follow Them" %><% end %> 这是用户模型中引用的matched_user定义： def matched_user Micropost.matched_with(self) end 这里是 micropost 模型中引用的matched_with 方法。我尝试了一些不同的方法，所以我记录了每组行的每个错误。 def self.matched_with(user) # matched_microposts = Micropost.find_by_parameter(:parameter) # where("user_id IN (#{matched_microposts}) OR user_id = :user_id", :user_id => user) # ERROR: ActiveRecord::RecordNotFound in RelationshipsController#create # Couldn't find User with id=# <activerecord::relation:0xb59c71dc># matched_id = Micropost.where("parameter = ?", :parameter) # where("user_id IN (#{matched_id}) OR user_id = :user_id", :user_id => user) # ERROR: ActiveRecord::StatementInvalid in Pages#home # SQLite3::SQLException: unrecognized token: "#": SELECT COUNT(*) FROM "microposts" # WHERE (user_id IN (#<activerecord::relation:0xb5b7d3b4>) OR user_id = 101) # matched_ids = Micropost.find_by_sql "SELECT user_id FROM microposts WHERE parameter = :parameter" # where("user_id IN (#{matched_ids})", :user_id => user) # ERROR: ActiveRecord::RecordNotFound in RelationshipsController#create # Couldn't find User with id=# <activerecord::relation:0xb5a38850>end 这是我的关系控制器创建方法： def create @user = User.find(params[:relationship][:followed_id]) current_user.follow!(@user) respond_to do |format| format.html { redirect_to @user } format.js end end 最后，这是我的用户模型！方法： def follow!(followed) relationships.create!(:followed_id => followed.id) end 非常感谢您能提供的任何帮助。这是非常赞赏。 如何强制 Richtextbox 的 Paint 方法不擦除背景颜色 我想问如何强制richtextbox 控件在绘制时不擦除其背景。 我试图处理 WM_ERASEBKGND 消息，但它不起作用。 谢谢 ！ mysqlsqlruby-on-railsrubyactiverecord 4 1 回答 1 This answer is useful 1 首先Model.where返回一个关系对象，您可以将其他运算符链接到该对象（另一个.where或.order，等） 如果您想在 db 中找到记录，则必须使用 , 显式关闭该链，.first甚至使用.last.all.each 第二 - 你为什么要直接将结果插入到字符串中#{matched_ids}？这将调用#to_s关系对象，而不是正确构建要在查询中使用的这些对象的列表 尝试这个： where("user_id IN (?)", matched_ids) 于 2012-04-19T14:17:08.410 回答 Related 0 sql-server - SQL Server 选择更新空值 1 python - Django不断抛出错误时间戳无效 2 codeigniter - 使用 foreach 删除对象中的当前项 - CodeIgniter 2 java - Java 扫描器未正确存储字符串 2 php - 如何在 Wordpress 中使用此布局？这是一个非常简单的问题，我只是真的不明白 3 javascript - 如何使 javascript 匹配字符串的开头？ 2 php - 安装 localhost 并出现错误 1 vertica - 如何在 Vertica 中重新分割投影？ 1 c++ - 模板化函数指针从子类到父类的转换 1 php - PHP 如何使用 MYSQL 检索存储在文档根目录之外的图像？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</activerecord::relation:0xb5a38850></activerecord::relation:0xb5b7d3b4></activerecord::relation:0xb59c71dc></activerecord::relation:...>

> ID：10229843
> 
> 赞同：1
> 
> 时间：
> 
> 标签：mysql, sql, ruby-on-rails, ruby, activerecord

我在 Ruby on Rails 中构建了一个小型 Twitter 克隆。它有一个用户模型、一个微博模型和一个关系模型。关系模型存储关注的用户 ID 和相应的关注用户 ID。我正在尝试添加一个新按钮，使当前用户在他们的微帖子中使用匹配参数关注所有其他用户。我已将该参数添加到 micropost 模型中。问题是，当我在 micropost 模型中查询数据库以查找具有匹配参数的用户时，它返回

```
#<ActiveRecord::Relation:... 
```

为什么要这样做？

这是我的包含按钮的表单代码：

```
<%= form_for(current_user.relationships.build(:followed_id => current_user.matched_user), :remote => true) do |f| %>
<div><%= f.hidden_field :followed_id %></div>
<div class="actions"><%= f.submit "Found A Matching User - Click Here To Follow Them" %></div>
<% end %> 
```

这是用户模型中引用的matched_user定义：

```
def matched_user
Micropost.matched_with(self)
end 
```

这里是 micropost 模型中引用的matched_with 方法。我尝试了一些不同的方法，所以我记录了每组行的每个错误。

```
def self.matched_with(user)         

# matched_microposts = Micropost.find_by_parameter(:parameter)
# where("user_id IN (#{matched_microposts}) OR user_id = :user_id", :user_id => user)

# ERROR: ActiveRecord::RecordNotFound in RelationshipsController#create
# Couldn't find User with id=#<ActiveRecord::Relation:0xb59c71dc>

# matched_id = Micropost.where("parameter = ?", :parameter)
# where("user_id IN (#{matched_id}) OR user_id = :user_id", :user_id => user)

# ERROR: ActiveRecord::StatementInvalid in Pages#home
# SQLite3::SQLException: unrecognized token: "#": SELECT COUNT(*) FROM "microposts"
# WHERE (user_id IN (#<ActiveRecord::Relation:0xb5b7d3b4>) OR user_id = 101)

# matched_ids = Micropost.find_by_sql "SELECT user_id FROM microposts WHERE parameter = :parameter"
# where("user_id IN (#{matched_ids})", :user_id => user)

# ERROR: ActiveRecord::RecordNotFound in RelationshipsController#create
# Couldn't find User with id=#<ActiveRecord::Relation:0xb5a38850>

end 
```

这是我的关系控制器创建方法：

```
def create
@user = User.find(params[:relationship][:followed_id])
current_user.follow!(@user)
respond_to do |format|
format.html { redirect_to @user }
format.js
end
end 
```

最后，这是我的用户模型！方法：

```
def follow!(followed)
relationships.create!(:followed_id => followed.id)
end 
```

非常感谢您能提供的任何帮助。这是非常赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:17:08.410

首先`Model.where`返回一个关系对象，您可以将其他运算符链接到该对象（另一个`.where`或`.order`，等）

如果您想在 db 中找到记录，则必须使用 , 显式关闭该链，`.first`甚至使用`.last``.all``.each`

第二 - 你为什么要直接将结果插入到字符串中`#{matched_ids}`？这将调用`#to_s`关系对象，而不是正确构建要在查询中使用的这些对象的列表

尝试这个：

```
where("user_id IN (?)", matched_ids) 
```

# c++ - C++ 从字符中获取指定部分

> ID：10229844
> 
> 赞同：1
> 
> 时间：2012-04-19T14:06:33.353
> 
> 标签：c++, char

我从文本文件中读取了一行，其中行尾有数字（格式：“some text.001”），我想获取 0 或 0 之后的数字。因此，如果是 001，则为 1，如果是 010，则为 10。我现在得到的：

```
fgets(strLine, 100, m_FileStream);
// Here I need to cut the numbers into myNum
int num = atoi(&myNum); 
```

我尝试使用 strrchr 来获取“。”的位置，但不知道接下来会发生什么。也许我需要strtok，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:08:53.723

一旦你有了你的位置，`.`你可以前进一个`char`并使用`atoi()`：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main()
{
    char buf[20] = "some text.010";
    char* period_ptr = strrchr(buf, '.');
    if (period_ptr)
    {
        printf("%d\n", atoi(++period_ptr));
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:10:07.110

这是一个 C 解决方案，而不是 C++，但应该可以工作：

```
const char *filename = "some text.001";
char *p = strrchr(filename, '.');
if (p != NULL)
{
    int num = atoi(p+1);
    printf("%d\n", num);
}
else
{
    // No extension
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:11:11.877

我认为这应该有效：

```
fgets(..);
int iPos = strLine.find_last_of('0');
string strNum = strLine.substr(iPos, strLine.length()-iPos);
int num = ... 
```

[http://www.cplusplus.com/reference/string/string/find_last_of/](http://www.cplusplus.com/reference/string/string/find_last_of/)

虽然没有测试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:28:55.183

该函数`strtol()`（或变体）是您进行数字转换的朋友 - 更喜欢它，`atoi()`因为您可以更好地控制转换和错误检测。对于 C++ 方法，您可以使用 STL：

```
string s = "some text.001";
size_t p = s.find_last_of('.');
cout << (( p != string::npos ) ? strtol( s.substr(p+1).c_str(), NULL, 0 ) : -1) << endl; 
```

**输出：**

1

# c# - 如何强制 Richtextbox 的 Paint 方法不擦除背景颜色

> ID：10229846
> 
> 赞同：0
> 
> 时间：2012-04-19T14:06:43.157
> 
> 标签：c#, .net, windows, winforms, richtextbox

我想问如何强制richtextbox 控件在绘制时不擦除其背景。

我试图处理 WM_ERASEBKGND 消息，但它不起作用。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:49:08.210

这个例子展示了一个透明的 RichTextBox：

[http://www.codeproject.com/Articles/13197/Alpha-Blended-Transparent-Capable-TextBox-and-Rich](http://www.codeproject.com/Articles/13197/Alpha-Blended-Transparent-Capable-TextBox-and-Rich)

# tsql - 为什么 SQL 函数将小数位更改为全零？

> ID：10229849
> 
> 赞同：2
> 
> 时间：2012-04-19T14:06:57.997
> 
> 标签：tsql, sql-server-2005

好的，我有一个 nvarchar 数字，有 2 个小数位。如果我通过一个非常简单的函数运行它，它会将所有小数位更改为零，我不确定为什么或如何停止它。

这是基本功能（实际上是更大功能的一部分，但这就是导致我的问题的原因）。

```
create FUNCTION [dbo].[z_test](@amt as nvarchar)
RETURNS decimal(18,4)
BEGIN 
declare @amt1 as decimal(18,4)
set @amt1=cast(@amt as decimal(18,4))
return @amt1
END 
```

所以如果我运行这个 SQL 语句

```
select cast('3.48' as decimal(18,4)), dbo.z_test('3.48') 
```

我希望返回的列是相同的。但是我得到的是 3.4800 3.0000

关于为什么会发生这种情况或我如何改变它的任何想法？这是在 SQL Server 2005 中。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:15:21.133

您的输入变量被截断。

根据 MSDN：http: [//msdn.microsoft.com/en-us/library/ms186939.aspx](http://msdn.microsoft.com/en-us/library/ms186939.aspx)

*当在数据定义或变量声明语句中未指定 n 时，默认长度为 1。当未使用 CAST 函数指定 n 时，默认长度为 30。*

给出`NVARCHAR`一个大小，您的函数将按预期工作：

```
create FUNCTION [dbo].[z_test](@amt as nvarchar(10))
RETURNS decimal(18,4)
BEGIN 
declare @amt1 as decimal(18,4)
set @amt1=cast(@amt as decimal(18,4))
return @amt1
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:13:56.433

您应该在函数参数中指定长度`nvarchar`，否则在这种情况下它将假定长度为 1，从而截断您的输入：

```
(@amt as nvarchar(10)) 
```

# c# - 模型内的 ASP.NET MVC3 Razor 查询（foreach 内的 foreach）

> ID：10229850
> 
> 赞同：1
> 
> 时间：2012-04-19T14:06:58.697
> 
> 标签：c#, asp.net-mvc, razor, foreach

我在视图中遇到了从不同实体提取数据的问题。基本上，我有一个桥接实体 CategoryProduct ，它将类别和产品数据结合在一起。我最终想要展示的是一个产品列表以及每个产品的类别——它们的类别。但是，我完全坚持如何使最后一部分 - 显示类别 - 发生。

这是我的模型的代码 -

```
public class Product
    {   
        public int ProductId { get; set; }
        public string Title { get; set; }
        public virtual ICollection<CategoryProduct> CategoryProducts { get; set; }
    }

    public class CategoryProduct
    {
        public int CategoryProductID { get; set; }
        public int CategoryId { get; set; }
        public int ProductId { get; set; }
        public virtual Product Product { get; set; }
        public virtual Category Category { get; set; }
    }

    public class Category
    {
        public int CategoryId { get; set; }
        public string Title { get; set; }
        public virtual ICollection<CategoryProduct> CategoryProducts { get; set; }
    } 
```

我的控制器非常简单，它只是将桥接实体推送到视图：

```
public ActionResult Index()
{
    return View(db.CategoryProducts.ToList());
} 
```

最后，我的视图显示产品和类别，但现在它只是为同一产品创建额外的行，如果它具有不同的类别，例如产品 1：类别 1、产品 1：类别 2 等等。我想去的是产品 1：类别 1，类别 2。

```
@model IEnumerable<ProductsCode.Models.CategoryProduct>
<h2>Index</h2>
<table>
    <tr>
        <th>Title</th>
        <th>Category</th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Product.Title)
        </td>
        <td>
           @foreach (var categories in item)
           {
             @Html.DisplayFor(modelItem => item.Why.Title)            
           }   
        </td>
    </tr>
}
</table> 
```

错误：编译器错误消息：CS1579：foreach 语句无法对“ProductsCode.Models.CategoryProduct”类型的变量进行操作，因为“ProductsCode.Models.CategoryProduct”不包含“GetEnumerator”的公共定义

编辑：添加了另一个 foreach 循环和错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:26:31.633

为什么你不能像这样改变视图模型

```
 public class MyProduct
    {   
        public int ProductId { get; set; }
        public string Title { get; set; }
        public virtual ICollection<Category> CategoryList { get; set; }
    } 
```

并查看

```
@model IEnumerable<ProductsCode.Models.MyProduct>
<h2>Index</h2>
<table>
    <tr>
        <th>Product</th>
        @Html.DisplayFor(modelItem => item.ProductId) 
        <th>Categories for Product</th>
    </tr>

@foreach (var item in Model.CategoryList) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Title)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CategoryId)
        </td>
    </tr>
}
</table> 
```

# html - Opera 中的页脚消失 (11.63)

> ID：10229856
> 
> 赞同：0
> 
> 时间：2012-04-19T14:07:10.177
> 
> 标签：html, css, opera

我通过将包装器最小高度设置为 100% 将页脚粘在网站底部，使用这个 CSS 将页脚的位置设置为绝对 -

```
#footer {
    width:100%;
    height:250px;
    min-height:250px;
    position:absolute;
    background-image:url(../images/footerback.png);
    border-top:2px groove #FFF;
    bottom:0px;
    margin-bottom:-250px;

} 
```

问题似乎偶尔发生，并且可以通过任何放大 Opera 来重新创建（页脚完全消失）。

网站 - [http://www.simplerweb.co.uk/](http://www.simplerweb.co.uk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:13:03.887

这将是您的保证金底部造成的。需要根据您希望页脚的行为方式重新编码，例如。固定在页面的底部，底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:14:36.640

我在 opera 中没有看到任何问题，但是您的 css 中有一些不必要的代码。下面将产生相同的结果：

```
#footer {
    min-height:250px;
    background-image:url(../images/footerback.png);
    border-top:2px groove #FFF;
} 
```

# c# - 在 mvvm 中如何通知在 datagrid 中存储数据？

> ID：10229858
> 
> 赞同：0
> 
> 时间：2012-04-19T14:07:11.583
> 
> 标签：c#, wpf, mvvm

在这里，我正在处理 mvvm。如果文本框发生任何更改，我想在 datgrid 中通知 uodate。代码是什么？

```
 public void Save()
        {if (IsNew)
                _accountCategoryDataSource.Add(_accountCategory); 
```

以上代码用于在数据库中添加数据

以下代码用于在数据网格中加载数据以供查看

```
private void LoadAllAccounts()
        {
            _allAccounts =
                (from account in _accountDataSource.GetAll() as List<Account>
                 select new AccountViewModel(account, _accountDataSource)).ToList();
            Accounts = new ObservableCollection<AccountViewModel>(_allAccounts);

            if (Accounts.Count > 0)
                SelectedAccount = Accounts[0];
        }` 
```

但我不能有代码在数据网格中显示更新它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:12:06.033

您的数据网格 ItemsSource 属性是否绑定到该帐户集合？如果是这样，您的 Account 类和 AccountViewModel 类是否实现了 INotifyPropertyChanged。如果没有，您必须实现该接口才能将更改传播到 UI。

在这里查看更多信息：http: [//msdn.microsoft.com/en-us/library/ms743695.aspx](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

# ssis - 通过不同的路由执行相同的 SSIS 任务

> ID：10229859
> 
> 赞同：0
> 
> 时间：2012-04-19T14:07:15.980
> 
> 标签：ssis, constraints, expression, pipeline

我想在两种不同的条件下执行相同的任务。它们是 1\. 如果作业成功并且 RowCount 为 0。 2\. 如果作业成功并且已经执行了其他任务。

我尝试使用相同的 SQL 执行任务，但无论结果如何，它都不会执行该任务。请看下面的截图。 ![在此处输入图像描述](../Images/8fd9653b54d95af152c66d92736e2b5e.png)

但我复制了那个工作并直接连接到另一个工作。那时，它起作用了。这是否意味着我们不能有不同的路线来执行相同的任务？ ![在此处输入图像描述](../Images/ce87817de68b6b15ec9f61c37b6e967d.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:18:44.863

双击绿色箭头。您将看到以下对话框：

![在此处输入图像描述](../Images/a42aba2b812577a2ae3668463e703abb.png)

选择上图中的“逻辑或”。这将使您的绿线变得虚线。现在您可以将多个箭头连接到同一个任务。

你让任务工作的方式就像一个`AND`，这意味着只有当两个约束都成功时，任务才会执行。

# .net - Windows Server 版本和 WCF 行为

> ID：10229866
> 
> 赞同：2
> 
> 时间：2012-04-19T14:07:30.943
> 
> 标签：.net, windows, wcf, tcp

您认为 Windows Server 版本（我的意思是 2003 和 2008 Win Servers）如何影响 .NET 通信程序的行为 - 使用 System.Net 命名空间、WCF 服务、WCF 客户端中的类的程序？据我所知，.NET Framework 2.0 及更高版本中与网络相关的类和库独立于本机 Windows API，理论上必须在 Win XP、7、2003、2008 中相同地工作

但这个事实真的发生在现实生活中吗？现在我们使用 WCF 服务开发分布式系统，.NET 3.5 上的 Windows 身份框架，我们必须为客户服务器计算机编写要求，但在我们的环境中，我们只使用 Win Server 2008，所以您能否建议我们允许我们的客户使用旧 Windows版本 - 例如 2003 服务器（客户使用它）还是风险太大？

如果您分享您在该领域的一些经验，我将不胜感激 - 更改 Windows 版本的陷阱以及它与 .NET 应用程序的兼容性！

谢谢！

# java - 将数据库源 Bean 添加到 Spring.xml 并出现错误

> ID：10229867
> 
> 赞同：0
> 
> 时间：2012-04-19T14:07:38.450
> 
> 标签：java, spring, spring-mvc

将数据库源 Bean 添加到 Spring.xml 并出现错误。为什么我不能让我的数据源是 Spring.xml 文件？

```
2012-04-19 10:05:47,150 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'jspViewResolver'
2012-04-19 10:05:47,166 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'jspViewResolver' to allow for resolving potential circular references
2012-04-19 10:05:47,215 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Finished creating instance of bean 'jspViewResolver'
2012-04-19 10:05:47,216 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'os400dataSource'
2012-04-19 10:05:47,216 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating instance of bean 'os400dataSource'
2012-04-19 10:05:47,218 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Eagerly caching bean 'os400dataSource' to allow for resolving potential circular references
2012-04-19 10:05:47,227 [main] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2e694f12: defining beans [disasterReliefControllor,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,jspViewResolver,os400dataSource,mysqldataSource,storedProcedure,storedProcedureRecordsWaiting,mySQL,service,database]; root of factory hierarchy
2012-04-19 10:05:47,239 [main] ERROR org.springframework.web.servlet.DispatcherServlet - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'os400dataSource' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.ibm.as400.access.AS400JDBCDriver]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1344)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1067)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:562)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:871)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:443)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:459)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:340)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:307)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.ibm.as400.access.AS400JDBCDriver]
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1341)
    ... 33 more
Apr 19, 2012 10:05:47 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'os400dataSource' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.ibm.as400.access.AS400JDBCDriver]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1344)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1067)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:562)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:871)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:443)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:459)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:340)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:307)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.ibm.as400.access.AS400JDBCDriver]
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1341)
    ... 33 more
Apr 19, 2012 10:05:47 AM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /DisasterReliefWeb threw load() exception
org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessException details (1) are:
PropertyAccessException 1:
org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.ibm.as400.access.AS400JDBCDriver]
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1112)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:857)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1341)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1067)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:562)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:871)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:443)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:459)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:340)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:307)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.IllegalStateException: Could not load JDBC driver class [com.ibm.as400.access.AS400JDBCDriver]
    at org.springframework.jdbc.datasource.DriverManagerDataSource.setDriverClassName(DriverManagerDataSource.java:150)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1101)
    ... 37 more
Caused by: java.lang.ClassNotFoundException: com.ibm.as400.access.AS400JDBCDriver
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.setDriverClassName(DriverManagerDataSource.java:147)
    ... 42 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:10:07.623

确保驱动程序 jar 在类路径中，如错误提示：

```
Caused by: java.lang.ClassNotFoundException: com.ibm.as400.access.AS400JDBCDriver 
```

java webapp的类路径是`YOUR_PROJECT/WEB-INF/lib/`

[在这里](http://www.jarfinder.com/index.php/java/info/com.ibm.as400.access.AS400JDBCDriver)可以找到罐子列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:10:30.107

它就在 StackTrace 的底部：

```
java.lang.ClassNotFoundException: com.ibm.as400.access.AS400JDBCDriver 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T12:05:28.573

我面临同样的问题：

```
org.springframework.beans.factory.BeanCreationException: Error creating
bean with name 'ds' defined in class path resource [applicationContext.xml]: 
Error setting property values; nested exception is             
org.springframework.beans.PropertyBatchUpdateException; 
nested PropertyAccessExceptions 
```

解决方案：

将“ojdbc6.jar”添加到项目路径中。

*   右键单击您的**项目**

*   选择**属性**

*   选择**Java 构建路径**

*   选择标签**库**

*   选择**添加外部罐子**

*   给出jdbc jar的路径

# c# - 查看渲染很慢

> ID：10229873
> 
> 赞同：0
> 
> 时间：2012-04-19T14:07:47.577
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-2

我正在使用具有以下模型的 ASP.NET MVC 2：

```
public class SearchModel
{
    public IList<Category> Categories { get; set; }
}

public class Category
{
    public String Name { get; set; }

    public IList<Field> Fields { get; set; }      
}

public class Field
{
    public String Value { get; set; }

    public Boolean Selected { get; set; }
} 
```

风景：

```
<% using (Html.BeginForm())
  { %>
    <%= Html.EditorFor(m => m.Categories)%>
    <input type="submit" value="Submit" />
<%} %> 
```

在类别的 EditorTemplates 视图中，我为每个字段调用另一个 EditorTemplate 视图，然后呈现一个复选框。

从生成模型到显示包含 6 个类别的视图大约需要 13 秒，每个类别大约有 10 个字段。

有什么建议，我可以做些什么来提高性能？

# sharepoint - SharePoint 如何仅在编辑模式下运行 javascript 文件

> ID：10229875
> 
> 赞同：1
> 
> 时间：2012-04-19T14:07:55.060
> 
> 标签：sharepoint, sharepoint-2010

有没有办法只在 SharePoint 的编辑模式下运行脚本文件？（所有页面布局）

我只想在共享点功能区按钮上单击事件以显示/隐藏特定站点上的某些元素。

如果是，请举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:22:03.960

```
<PublishingWebConrols:EditModePanel ID="test" runat="server" PageDisplayMode="Edit">
     <script type="text/javascript" src="<asp:Literal runat="server" Text='<% $SPUrl:~sitecollection/Style%20Library/js/test.js %>/>" ></script>' 
</PublishingWebControls:EditModePanel> 
```

# c# - 如何在 PNUnit 下使用 NUnit Addins

> ID：10229876
> 
> 赞同：1
> 
> 时间：2012-04-19T14:07:56.730
> 
> 标签：c#, nunit, pnunit

我想使用 NUnit 插件并使用 PNUnit 运行测试。有可能还是我只是做错了什么？它单独工作，但是当我运行 PNunit 时，它会忽略使用 EventListeners 的 NUnit 插件。

提前感谢您的回答，如果没有找到那个愚蠢的询问网络信息，请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:24:18.343

目前这是不可能的；PNUnit 没有设置加载 NUnit 插件所需的环境。

对此有一个例外，即任何具有 [NUnitAddin] 属性并在测试程序集中定义的类都将作为插件加载。因此，您可能能够以这种方式获取您想要加载的插件。

# jquery - 如何将ruby变量传递给jquery

> ID：10229879
> 
> 赞同：4
> 
> 时间：2012-04-19T14:08:06.250
> 
> 标签：jquery, ruby-on-rails

我怎么能做这样简单的事情：

```
 $('#show_history').click(function(){
        var c_user = "#{current_user.id}";
        alert(c_user);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:11:10.777

查看此截屏视频

> [http://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T17:57:39.077

为我`<%=j some_ruby_expression %>`工作

# c++ - c++中如何正确使用虚成员函数

> ID：10229882
> 
> 赞同：0
> 
> 时间：2012-04-19T14:08:12.927
> 
> 标签：c++, oop, virtual

我对以下代码有问题，覆盖的虚拟函数没有执行。不确定我在这里做错了可能是一个愚蠢的错误。无论如何，这是一个游戏项目，我有一个看起来像这样的对象数组（core::array 是一个 irrlicht 数组，类似于向量数组）

```
core::array<GameObject> gameTargets; 
```

这是`GameObject`和`Zombie` 定义

```
class GameObject {
protected:
    scene::ISceneNode* node;
public:
    int ID;
    int hitpoints;

    GameObject() {
        ...
    };

    void setNode(scene::ISceneNode* inode) {
        ...
    }

    virtual void shot(int dmg) {
        ... [BREAKPOINT HERE]
    }

    scene::ISceneNode* getNode() {
        return node;
    }
};

class Zombie : public GameObject {
public:
    static const enum Animation {
        ZOMBIE_WALK,
        ZOMBIE_HURT,
        ZOMBIE_DIE,
        ZOMBIE_TWITCH,
        ZOMBIE_ATTACK,
        ZOMBIE_IDLE
    };

    //We only want to accepted animated mesh nodes for this object
    Zombie(int hp, scene::IAnimatedMeshSceneNode* inode) {
        ...
    }

    //Override the shot function
    void shot(int dmg) {
        ... [BREAKPOINT HERE]
    }

    //Animate the zombie
    void setAnimation(Animation anim) {
        ...
    }
}; 
```

派生类的成员函数永远不会被调用，我正在创建这样的对象

`Zombie target(hp, (scene::IAnimatedMeshSceneNode*)node);`

并像这样调用虚函数

```
for(int i = 0; (u32)i<level->gameTargets.size(); i++) {
    if(selectedNode == level->gameTargets[i].getNode()) {
        level->gameTargets[i].shot(b->damage);
    }
} 
```

其中 b 是指向具有 int 变量损坏的子弹的指针，而 gameTargets 包含 GameObject

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:11:35.027

我怀疑您正在经历切片，因为`gameTargets`数组包含值。我不能确定，因为我不知道`core::array`模板是如何工作的。请参阅[什么是对象切片？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)讨论什么是切片。

要解决此问题，请将原始指针存储为

```
core::array<GameObject *> gameTargets; 
```

或者使用某种引用计数指针，例如

```
core::array<std::shared_ptr<GameObject>> gameTargets; // only available in C++11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:15:33.107

`array<GameObject>`是对象的容器，而不是指针的容器。您添加到其中的每个对象都将是一个 GameObject，而不是派生类之一（如果您添加派生类对象，那么它将被“切片”）。

在不确切知道您的工作的`core::array`情况下，我怀疑您真正打算创建的是一个`std::unique_ptr<GameObject>`（智能指针）数组，类似于

```
core::array< std::unique_ptr<GameObject> > gameTargets;
std::unique_ptr<GameObject> my_zombie(new Zombie);
gameTargets.push_back( my_zombie ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:14:54.213

一个快速的解决方案是将这些父函数作为纯虚函数，如下所示：

```
virtual void shot(int dmg) { } = 0; 
```

// 按照 Frerich Raabe 的建议编辑和使用指针数组

# asp.net-mvc - 在 mvc3 的 webgrid 中进行编辑时，为什么 ModelState.IsValid 为假，因为条件为真？

> ID：10229896
> 
> 赞同：0
> 
> 时间：2012-04-19T14:09:25.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

```
[HttpPost]
public ActionResult Index(SecurityMappingModel objModel)
{

    //edit code

    if (objModel.Id != Guid.Empty)
    {
        if (ModelState.IsValid)
        {
            mappings = (List<SecurityMappingModel>)Session["Mappings"];
            var objRemove = mappings.FirstOrDefault(m => m.Id == objModel.Id);
            if (objRemove != null)
            {
                mappings.Remove(objRemove);
                mappings.Add(objModel);
                ViewBag.Mappings = mappings;
            }
            Session["Mappings"] = mappings;
return RedirectToAction("Index");
} 
```

在 objModel 内部，其中一个字段的值为 0，因为它是一个文本字段，我正在将值放入其中，但在 Controller oject objModel 内部显示该字段值为 0 :( :( 为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:22:47.783

显然您的模型值之一无效。您应该能够通过查看 ModelState.Values 中的项目来找出是哪一个。每个项目都有一个 Errors 属性。此行的结果应至少包含一项：

```
var errors = ModelState.Values.Where(value=>value.Errors.Any()); 
```

# vim - 重新映射 yank (y)、Change (c) 和 Delete (d)

> ID：10229902
> 
> 赞同：4
> 
> 时间：2012-04-19T14:09:38.467
> 
> 标签：vim

我一直在尝试扩展这三个命令（y、c、d）的功能，因此我将在系统剪贴板（“+ 寄存器”）和普通寄存器中都有内容。

到目前为止，这是我想出的：

```
nnoremap Y y$v$"+y$
nnoremap yy 0y$0v$"+y$
vnoremap y ygv"+y
" ------
nnoremap C y$v$"+c
nnoremap cc 0y$0v$"+c
vnoremap c ygv"+c
" ------
nnoremap D y$v$"+d$
nnoremap dd 0y$0v$"+d$
vnoremap d ygv"+d
" ------ 
```

我对这个映射有一些问题：

1.  出于某种奇怪的原因，我必须先获取我的 .vimrc 资源，然后才能真正使用这些新绑定。尝试仅使用 nmap、vmap 甚至 map 似乎根本不起作用。
2.  当我尝试拉动（例如）多行（例如 2yy）时，它会按预期将文本拉入“常规”寄存器（“0）”，但仅将第一行拉入系统剪贴板。
3.  我找不到在正常模式下为 y、c 和 d 创建这种行为的方法。

任何人都可以帮助解决这些问题吗？

我想创建一个函数，也许，所以我可以多次调用它，但我的 vim script-fu 充其量是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:42:15.067

如果你能做到`"+y`，所有这些映射都是无用的。只需添加`set clipboard+=unnamedplus`到您的`~/.vimrc`.

# unit-testing - 单元测试对象/模型转换器

> ID：10229904
> 
> 赞同：1
> 
> 时间：2012-04-19T14:09:49.857
> 
> 标签：unit-testing, object, testing, pojo

有几个地方必须将一个数据对象转换为另一个。例如，来自 web 服务或 REST 服务的传入数据到可持久化的对象中。

有没有一种方法可以单元测试所有传入数据都填充到“传出”对象的正确位置，而无需在测试中复制转换器逻辑？

如果所有领域都被称为相同，并且一个人感觉冒险，反射可以做一些工作..但我不想走那条路..

如果说一个有名字和名字的人由于某些复制+粘贴错误而被转换为名字 == 名字的人，则验收测试不会发现错误。

所以现在我只是跳过测试对象/模型转换，而是好好看看我的转换器。

有没有人知道如何以不同的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:16:26.457

如果您需要测试乘法是否有效，则不应复制乘法逻辑。定义您知道正确的测试数据，并测试乘法是否正常。

```
assert( 4*5, 20 ) 
```

并不是

```
 assert( 4*5, 4*5 ) 
```

这里的测试数据是`4`, `5`, `20`，并且测试将它们联系起来的逻辑是乘法。同样的原则也适用于你的情况。定义测试数据并测试转换产生正确的结果。

（正如您所指出的，通过反射等使测试具有通用性，这违背了测试的目的。）

# java - 如何模拟 KerberosTicket 实例？

> ID：10229908
> 
> 赞同：1
> 
> 时间：2012-04-19T14:10:04.437
> 
> 标签：java, unit-testing, mocking, kerberos

出于单元测试的目的，我想为 javax.security.auth.kerberos.KerberosTicket 实例提供一个模拟。我尝试使用 Mockito 和 PowerMockito，但都以类似的消息失败：

```
org.mockito.exceptions.misusing.MissingMethodInvocationException: 
when() requires an argument which has to be 'a method call on a mock'.
For example:
    when(mock.getArticles()).thenReturn(articles);

Also, this error might show up because:
1\. you stub either of: final/private/equals()/hashCode() methods.
   Those methods *cannot* be stubbed/verified.
2\. inside when() you don't call method on mock but on some other object. 
```

添加 @RunWith 和 @PrepareForTest 注释会导致以下 LinkageException：

```
java.lang.LinkageError:
  loader constraint violation: 
  when resolving method "sun.security.jgss.krb5.Krb5Util.getTicketFromSubjectAndTgs(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/security/AccessControlContext;)Ljavax/security/auth/kerberos/KerberosTicket;"
  the class loader (instance of org/powermock/core/classloader/MockClassLoader) of the current class, 
  org/epo/security/spnego/impl/KerberosUtilsTest, and the class loader (instance of <bootloader>) 
  for resolved class, sun/security/jgss/krb5/Krb5Util, have different Class objects 
  for the type javax/security/auth/kerberos/KerberosTicket used in the signature 
```

我的测试类如下所示：

```
@RunWith(PowerMockRunner.class) 
```

@PrepareForTest({KerberosTicket.class}) 公共类 KerberosUtilsTest {

```
@Test
public void testGetTicketFromSubjectAndTgs() throws LoginException, KrbException, IOException {
    PowerMockito.mockStatic(Krb5Util.class);
    KerberosTicket kerberosTicketMock = PowerMockito.mock(KerberosTicket.class);

    AccessControlContext controlContext = AccessController.getContext();

    // Causes the LinkageError to be thrown
    when(Krb5Util.getTicketFromSubjectAndTgs(-1, "test", "test", "test", controlContext)).thenReturn(
                kerberosTicketMock);

    KerberosTicket actual = new KerberosUtils().getTicketFromSubjectAndTgs(-1, "test", "test", "test",
                controlContext);

    assertEquals(kerberosTicketMock, actual);
} 
```

搜索互联网显示，可以通过更改注释来修复 LinkageError：

```
@PowerMockIgnore({"sun.security.jgss.krb5.Krb5Util", "javax.security.auth.kerberos.KerberosTicket"})
@PrepareForTest({KerberosUtils.class})
@RunWith(PowerMockRunner.class) 
```

运行这个让我回到第一方：

```
org.mockito.exceptions.misusing.MissingMethodInvocationException: 
when() requires an argument which has to be 'a method call on a mock'.
For example:
    when(mock.getArticles()).thenReturn(articles);

Also, this error might show up because:
1\. you stub either of: final/private/equals()/hashCode() methods.
   Those methods *cannot* be stubbed/verified.
2\. inside when() you don't call method on mock but on some other object. 
```

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:40:21.123

的大多数方法`KerberosTicket`都是`final`，但 PowerMockito 应该能够模拟它们。

不要忘记按照 PowerMockito 的要求注释您的测试类以模拟`final`方法

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(KerberosTicket.class) 
```

并在测试中使用`PowerMockito`而不是`Mockito`

```
KerberosTicket mock = PowerMockito.mock(KerberosTicket.class);
PowerMockit.when(mock.getAuthTime().thenReturn(...); 
```

# uml - 这应该被视为 UML 类图中的一个类还是一个类型？

> ID：10229911
> 
> 赞同：0
> 
> 时间：2012-04-19T14:10:11.800
> 
> 标签：uml, android-webview, class-diagram

我正在为我的项目创建类图。我会`WebViews`在课堂上使用一些。我的问题是：

我应该在我的 UML 类图中编写`WebView`类还是只能使用 a`WebView`作为类型？

例如，如果 a 有一个字符串：`String a`，在我的类图中，我会将 a`: String`放在类属性中，但是如果我`WebView wv`在我的类中，我可以对字符串执行相同的操作并在类属性中写入：`wv: WebView`或者我必须编写`WebView`课程然后与我的课程建立关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:04:30.950

简短的回答：你可以做任何一个。

更长的答案：UML 不限制你在这里做什么。没有规则说明哪些类型可以用作属性的值，哪些类型必须显示为关联。

最长的答案其实是一个问题：你想和图表交流什么？类图有利于显示结构——类之间的链接（关联）。那么：你的类和你的 Webview 实例之间的关联有趣吗？例如，WebView 的同一个实例是否也与其他对象相关？*这段*关系有什么有趣的地方吗？WebView 实例可以比你的类的实例更长寿吗？等等。

hth。

# function - Fortran GCC 接口编译器错误？

> ID：10229912
> 
> 赞同：1
> 
> 时间：2012-04-19T14:10:11.813
> 
> 标签：function, gcc, return, fortran, intel-fortran

当我忘记指定接口函数的返回类型时，为什么 GCC 不警告我？对我来说，这种行为接缝出乎意料。你对此有什么看法？

这是测试程序（取消注释第 6 行，它可以正常工作）：

```
program returntest
implicit none
    interface
    function givehalf(Y)
      double precision :: Y
      !double precision :: givehalf !<-- Uncomment this line
    end function givehalf
    end interface
    double precision :: temp

temp=givehalf(5.151515d0)
print*, 'result=   ',temp

end program returntest

function givehalf(Y)
    implicit none
    double precision :: Y
    double precision :: givehalf

    print*, 'Y=        ',Y
    givehalf=Y/2.0d0
    print*, 'return Y/2',givehalf

    return
end function givehalf 
```

结果是这样的：

```
user@bapf028dl:/media/disk> gfortran44 -Wall return-test.f90
user@bapf028dl:/media/disk> ./a.out
  Y=           5.1515149999999998     
  return Y/2   2.5757574999999999     
  result=     -1.0579199790954590     
user@bapf028dl:/media/disk> ifort return-test.f90
user@bapf028dl:/media/disk> ./a.out 
  Y=           5.15151500000000     
  return Y/2   2.57575750000000     
  result=      2.57575750350952 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:32:11.637

编辑：这确实是一个错误。它在 gfortran 4.6 和 4.7 中给出了类型错误。

另外，我建议您为您的功能使用模块。你只有一个地方可以改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:52:12.937

这不是错误。接口块内的接口主体形成一个单独的范围，因此您应该在其中包含一条`implicit none`语句以防止自己犯此类错误。没有它，隐式类型规则就会生效，所以函数应该返回一个`real`.

```
interface
    function givehalf(Y)
        implicit none                 !<-- now you should get an error during compilation
        double precision :: Y
        !double precision :: givehalf !<-- Uncomment this line
    end function givehalf
end interface 
```

# user-interface - 创建自定义 UI 框架的理论

> ID：10229913
> 
> 赞同：0
> 
> 时间：2012-04-19T14:10:13.220
> 
> 标签：user-interface, architecture, frameworks

我想知道是否有人知道我可以阅读一本好书或一系列文章以熟悉 UI 框架内部结构以及它们是如何创建的？

MVVM 周围的东西会很好。确切地说，我想确切地知道 UI 框架是如何从头开始制作的。

它包括布局、控件、渲染（绘制像素或渲染成其他语言，如 HTML）、所有这些元素之间的交互等。

任何有关此的信息都是有帮助的！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:15:31.000

你可以看看这个 MIX 演示[Build Your Own MVVM Framework](http://channel9.msdn.com/Events/MIX/MIX10/EX15)。它来自 Caliburn MVVM 框架的作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:14:27.047

看看[棱镜 4](http://compositewpf.codeplex.com/)。这是一个 MVVM UI 框架。此外，[Prism 4 开发人员指南](http://msdn.microsoft.com/en-us/library/gg406140.aspx)是我找到的关于 MVVM 的最佳参考。

即使您不使用 prism，它也是一个极好的指南，因为它涵盖了 MVVM 概念，例如使用命令、处理对话请求（交互）和深入的视图模型间通信。

# jquery - jQuery 定位元素的每个第 n 个兄弟元素

> ID：10229921
> 
> 赞同：0
> 
> 时间：2012-04-19T14:10:35.153
> 
> 标签：jquery, siblings

我有以下标记：

```
<div class="region">
<div class="award">
<div class="award">
<div class="region">
<div class="award">
<div class="award">
<div class="award">
<div class="award">
<div class="award">
<div class="award"> 
```

如何定位 .region 之后的第三个元素，以便得到类似的东西？

```
<div class="region">
<div class="award">
<div class="award">
<div class="region">
<div class="award">
<div class="award">
<div class="award third">
<div class="award">
<div class="award">
<div class="award third"> 
```

请注意，它不计算第一个 .region 之后的前两个 .award 元素。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:13:13.350

~~`nextUntil`结合`eq`应该这样做：~~

 ~~```
$("div.region").each(function() {
    $(this).nextUntil(":not(.award)").eq(2).addClass("third");
}); 
```~~  ~~不，比这更复杂*一点*，处理第 6 个元素：

```
$("div.region").each(function() {
    $(this).nextUntil(":not(.award)").filter(function(index) {
        return index % 3 == 2;
    }).addClass("third");
}); 
```

[实例](http://jsbin.com/awiqut/2)| [来源](http://jsbin.com/awiqut/2/edit)

在那里，我们抓取每个`.region`元素，让它们的兄弟姐妹直到第一个不是`.award`( [`nextUntil`](http://api.jquery.com/nextUntil)) 的元素，以及[`filter`](http://api.jquery.com/filter)不是每隔三个的元素。

*（不知道为什么我[`map`](http://api.jquery.com/map)在我的[第一个工作副本](http://jsbin.com/awiqut)中使用，`filter`这更有意义。）*~~

# python - 在python中将分隔字符串转换为分层JSON

> ID：10229925
> 
> 赞同：6
> 
> 时间：2012-04-19T14:10:46.873
> 
> 标签：python, json

如何在 python 中将分隔字符串转换为分层 JSON。我在 jQuery 中看到了类似问题的解决方案。我一直在尝试找到一个相同的python解决方案。

[使用 JQuery 将分隔字符串转换为分层 JSON](https://stackoverflow.com/questions/6232753/convert-delimited-string-into-hierarchical-json-with-jquery)

目标是从一堆 URL 中生成一个层次结构的 json，这些 URL 可能如下所示
：运动/网球/大满贯
运动/国际象棋
运动/国际象棋/球员/男子
运动/网球
运动/板球/体育场
运动/网球/球员

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T14:23:02.043

您可以使用字典实现此目的：

```
initial = ["Fred-Jim","Fred","Fred-Jim-Bob", "Fred-Jim-Jack", "John", "John-Jim"]

result = {}

for item in initial:
    hierarchy = item.split('-')
    local_result = result
    for node in hierarchy:
        local_result = local_result.setdefault(node, {})

print result 
```

会给你 ：

```
{
    'John': {
        'Jim': {}
    }, 
    'Fred': {
        'Jim': {
            'Bob': {},
            'Jack': {}
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:16:15.083

你在找`json.dumps()`模块`json`吗？

编辑：哦，好的，我现在明白了。也许是这样的：

```
#paths is a list of strings containing the paths you are scraping from your site.
hierarchy = {}
for path in paths:
    cursor = hierarchy
    for part in path.split('/'):
        if part not in cursor:
            cursor[part] = {}
        cursor = cursor[part] 
```

# grails - Grails - URL 映射/默认操作和流程

> ID：10229927
> 
> 赞同：6
> 
> 时间：2012-04-19T14:10:54.200
> 
> 标签：grails

问题 -

我注意到我测试的一些应用程序从操作提交调用另一个视图/控制器，但是当呈现该页面时，而不是看到：

$控制器/$页面

我懂了：

$控制器/索引

这是 URL 映射配置的问题吗？默认操作？只是好奇，因为它似乎只是 URI 映射到默认值而不是实际操作。

查看代码：

```
<table>
..
<g:actionSubmit class="stats" action="stats" value="View Stats"/>
..
</table 
```

控制器：

```
def stats() {

    def teamId = Team.get(params.id)
    def allPlayers = Player.withCriteria {
            eq('team', teamId)
            and {
                eq('isActive', true)
            }
    }
    [allPlayers:allPlayers, teamId:params.id]
} 
```

网址映射：

```
class UrlMappings {

static mappings = {
    "/$controller/$action?/$id?"{
        constraints {
            // apply constraints here
    }
}
} 
```

**编辑**

我实际上弄清楚了它是什么。这让我更加困惑。

grails actionSubmit 有一个与之相关的操作。那个表格只是一个普通的表格，没有调用：

```
<g:form>
<g:actionSubmit class="stats" action="stats" value="View Stats"/>
<g:actionSubmit class="schedule" action="schedule" value="View Schedule"/>
<g:form> 
```

因此，默认情况下，表单会将操作重定向到 $controller/index。如果在 g:form 标记中添加操作调用，这两个按钮将指向正确的页面，但 URI 现在将是 $controller/$g:form_action。

如果需要 g:form 作为包装器，我想我不明白 actionSubmit 操作的重点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:19:49.050

是的，`index`是所有控制器的默认操作。因此，如果您不指定一个，那就是您将为控制器登陆的页面。

在他们的[网站](http://grails.org/doc/1.3.7/guide/6.%20The%20Web%20Layer.html#6.1.1%20Understanding%20Controllers%20and%20Actions)上有更详细的讨论。即，规则是：

> *   如果仅存在一个操作，则控制器的默认 URI 映射到该操作。
> *   如果您定义一个索引操作，该操作是在 URI /book 中未指定任何操作时处理请求的操作
> *   或者，您可以使用 defaultAction 属性显式设置它：
>     
>     
>     
>     静态默认操作 = “列表”

# c++ - 具有用户给定长度的 C++ 简单数组创建

> ID：10229929
> 
> 赞同：0
> 
> 时间：2012-04-19T14:10:59.770
> 
> 标签：c++, arrays

如何在具有用户给定长度的方法中创建一个数组？我想用随机数填充用户给定长度的向量。

```
 double* Random::quasiRandomUnif(float a, float b, int NN) 
 {
     int i, errcode;

          N_=NN; // here initialize the member N_

          float r[N_];

     VSLStreamStatePtr stream;
     int i, errcode;

     errcode = vslNewStream( &stream, BRNG,  SEED );
     errcode = vsRngUniform( METHOD, stream, N_, r, a, b );

     double* rd = new double[m_N];
     for(int i=0;i<m_N;i++)
         rd[i]=(double)r[i];

     errcode = vslDeleteStream( &stream );

     return rd;
  } 
```

我想到了 N_ 类 Random 的成员，在这个函数的主体中初始化，并带有一些用户给定的值——不可能，因为在数组中分配的空间应该是一个常量。如何处理？

亲切的问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:14:28.950

在 C++ 中，您应该使用`vector`该类：

```
std::vector<double> rd;
for(int i=0;i<m_N;i++) rd.push_back(r[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:13:11.830

使用`new`运算符。

```
float r = new float[m_N]; 
```

完成后记得删除它。

```
delete[] r; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:18:03.433

试试[Boost.ScopedArray](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/scoped_array.htm)。`vector`比没有您自己的原始数组的内存管理开销更简单的语义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:18:12.013

我想问题出在`r`数组上？为什么不也分配`new`呢？然后你可以使用任何你喜欢的表达式作为大小。

# mysql - MySQL：我应该在这个表中创建什么样的索引？

> ID：10229930
> 
> 赞同：0
> 
> 时间：2012-04-19T14:11:08.870
> 
> 标签：mysql, indexing

假设这是表的 SQL 代码：

```
CREATE  TABLE `user_is_in` (
  `id_user` INT NULL ,
  `id_city` INT NULL ,
  `when` DATETIME NULL ,
  INDEX `fk_user` (`id_user` ASC) ,
  INDEX `fk_city` (`id_city` ASC) ,
  CONSTRAINT `fk_user`
    FOREIGN KEY (`id_user` )
    REFERENCES `user` (`id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_city`
    FOREIGN KEY (`id_city` )
    REFERENCES `city` (`id` )
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

该表的用途是存储一种 Foursquare 签到（用户一次在一个地方注册）。

现在我有两个选择：

*   创建一个包含 3 个字段且没有主键的唯一索引：

    唯一索引`id_user_is_in_UNIQUE`（`id_user`ASC、`id_city`ASC、`when`ASC）

*   创建一个额外的经典 id 自动增量字段

我不喜欢第二个选项，因为我想创建对用户和城市的查询（即：搜索在某个日期在一个城市签到的所有用户）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:18:10.040

你应该两者都做。添加一个自动递增的主键并针对所有三列添加唯一性约束。使用单独的系统分配键，如果最终需要，您可以更轻松地为这个新表定义外键。并且对所有三列都具有唯一性约束将确保不会创建重复数据。

一些快速的旁注：

*   由于这是一个关联表，因此您的列确实应该是 `NOT NULL`.
*   您可能希望将一个城市的 CASCADE 删除项向下添加到关联表中。

# wcf - SSL、WCF 服务托管在内部域上，使用应用程序驻留在 DMZ 中

> ID：10229936
> 
> 赞同：1
> 
> 时间：2012-04-19T14:11:13.157
> 
> 标签：wcf, ssl-certificate

**背景资料：**

我有一些 WCF 服务托管在特定端口上的内部服务器上。在防火墙上“打了一个洞”，使该端口上的服务可以从 DMZ 访问。消费网络应用程序托管在 DMZ 中。

内部服务器没有 SSL 证书。

DMZ 服务器确实有 SSL 证书。

**问题：**

从我读过的关于 WCF 的所有内容来看，我的理解是我需要在托管 WCF 服务的服务器上拥有一个 SSL 证书。它是否正确？

目前有人告诉我，我们不知道内部服务器何时会安装 SSL 证书，我需要制定一个 B 计划。

我开始考虑回到 ASMX/WSE，看起来这将是一个问题，因为 WSE 不再受支持，它不与 VS2008 集成，并且与 x64 机器不兼容。

[摇滚]我[硬地]

数据将包含 PII，因此我非常考虑安全性……即使其他人不太关心。

有没有我忽略的选项？我是否误解了 WCF 安全性？建议？

这篇[文章](https://stackoverflow.com/questions/6736172/how-do-i-secure-a-wcf-service-hosted-in-iis-using-basichttp-binding-and-no-ss)似乎有些相似。

* * *

## 更新

感谢 mikey 的回答和评论，我对配置进行了一些更改。它需要一些试验和错误以及额外的谷歌搜索......但它现在*似乎*正在工作（我还没有进行任何广泛的测试）。但是，我不知道这是否足够安全......将我的解决方案添加到原始帖子中，以便我可以将 mikey 的答案标记为答案。

**我的改变**

服务：

```
<behaviors>
    <serviceBehaviors>
        <behavior name="serviceBehavior">
            <dataContractSerializer maxItemsInObjectGraph="6553600" />
            <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
            <serviceMetadata httpsGetEnabled="false" />
            <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
            <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
    </serviceBehaviors>
</behaviors>
<bindings>
    <wsHttpBinding>
        <binding name="customBinding">
            <reliableSession enabled="true" />
            <security mode="None" />
        </binding>
    </wsHttpBinding>
</bindings>
<services>
    <service behaviorConfiguration="serviceBehavior" name="MyApp.WcfServices.MyService">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="customBinding" contract="MyApp.WcfServices.IMyService">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
</services> 
```

网络应用：

```
<bindings>
    <wsHttpBinding>
        <binding name="customBinding" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"         allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="1048576" maxReceivedMessageSize="1048576"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
            <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="true" />
            <security mode="None">
                <transport clientCredentialType="None" />
                <message clientCredentialType="None" negotiateServiceCredential="false" establishSecurityContext="false" />
            </security>
        </binding>
    </wsHttpBinding>
</bindings>
<client>
    <endpoint address="http://[Ip Address]:8943/MyAppWcfServices/Hosts/MyService.svc"
            binding="wsHttpBinding" bindingConfiguration="customBinding"
            contract="MyService.IMyService" name="customBinding" behaviorConfiguration="clientBehavior">
    </endpoint>
</client> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:45:12.220

以下是一些选项：

*   WCF不需要*SSL*。您可以将安全设置为“无” [http://msdn.microsoft.com/en-us/library/ms731172.aspx](http://msdn.microsoft.com/en-us/library/ms731172.aspx)或[http://social.msdn.microsoft.com/forums/en-US/wcf/thread/ 271b1816-173c-4c76-a4c4-fd9fda4b5e91/](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/271b1816-173c-4c76-a4c4-fd9fda4b5e91/) ——那么你就不需要 SSL 证书了。由于流量只在您的 Web 服务器和您的应用程序/wcf 服务器之间传输，因此唯一能够嗅探它的人应该是内部人员……在某些时候，您必须相信您的网络正在按预期工作。对于同一网络上的应用程序和 Web 服务器之间的 Web 服务，我经常只使用 HTTP（而不是 SSL），尤其是在速度成为问题的情况下。

*   在应用服务器上使用自签名证书。确保 DMZ 中的 Web 服务器配置为信任证书（和/或其 CA），您应该一切顺利。

# jquery - 需要 jquery 验证插件（依赖表达式）

> ID：10229937
> 
> 赞同：0
> 
> 时间：2012-04-19T14:11:13.453
> 
> 标签：jquery, jquery-validate

我的地址数据有问题。所以要么输入一个新地址（所有字段都是输入字段，除了性别，选择，它是一个单选按钮），或者你从给定列表中选择一个地址，所以如果你想要列表中的一个（用单选按钮选择 -> `input[@name='select_address'])`，不再需要所有输入字段...

```
rules: {
delivery_gender: 
        {required:"input[@name='select_address'].not(':checked')"} 
```

因此，仅当未选中`gender`输入选择字段时才需要该字段`(input[@name='select_address)`。我究竟做错了什么？

我还尝试了另一种方法：

```
$('input:radio[name=select_address]').click(function() {
    delivery_gender.rules('remove'); 
```

但它也行不通。有任何想法吗？

问题只出现在单选按钮上，因为对于输入字段，我刚刚删除了类：

```
$('input.delivery').removeClass('required error'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:02:48.590

尝试使用[依赖回调](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-callback)：

```
required: function(element) {
    return $("input[name=select_adddress]:checked").val() == "custom";
} 
```

这将检查组中选中的单选按钮的值`select_address`是否等于自定义 - 如果是，则需要性别字段。

[此处的工作示例](http://jsfiddle.net/6YMX4/1/)- 在示例中，您需要选择`custom`以使`gender`字段成为必填项。

# javascript - 防止在多个 .animation 事件期间排队

> ID：10229940
> 
> 赞同：1
> 
> 时间：2012-04-19T14:11:33.780
> 
> 标签：javascript, jquery

```
$(this).animate({'backgroundColor':'red'},600)
       .animate({'color':'#fff'},600); 
```

如何使两个`.animate`事件同时发生，而不是第二个事件等待第一个事件完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:16:38.083

通过在同一个`animate`调用中指定它们：

```
$(this).animate({
   'backgroundColor':'red',
   'color':'#fff'
},600); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:17:27.350

您应该能够在动画语句中指定多个更改的内容。

```
$(this).animate({
    'backgroundColor':'red',
    'color':'#fff'
} ,600); 
```

它就在. [_](http://api.jquery.com/animate/)`.animate()`

# c# - 将变量数据保存到磁盘

> ID：10229944
> 
> 赞同：4
> 
> 时间：2012-04-19T14:11:47.323
> 
> 标签：c#, .net, xna

是否可以将变量从 C# 保存到磁盘，以便稍后在项目的另一个实例中使用它？

例如，我有一个具有 3 个字段的结构，如下例所示：

```
struct MyStruct
{
    byte[] ByteData;
    int MyInt;
    double MyDouble;
}; 
```

我有一个这个结构的实例，假设`MyStruct S`我为我的所有字段赋值。在这一步之后，我想以某种方式将这个变量保存在磁盘中，以便稍后在我的程序中使用这些存储的值。

我知道，我可以将这些值复制到 .txt 文件中，但我想将变量原样保存在磁盘上，以便在项目的下一次运行时将其直接加载到内存中。

是否可以将它以某种方式保存在磁盘上，以便我可以将它按原样加载到我的程序中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:15:08.873

```
public void SerializeObject<T>(string filename, T obj)
   {
      Stream stream = File.Open(filename, FileMode.Create);
      BinaryFormatter binaryFormatter = new BinaryFormatter();
      binaryFormatter.Serialize(stream, obj);
      stream.Close();
   }

   public T DeSerializeObject<T> (string filename)
   {
      T objectToBeDeSerialized;
      Stream stream = File.Open(filename, FileMode.Open);
      BinaryFormatter binaryFormatter = new BinaryFormatter();
      objectToBeDeSerialized= (T)binaryFormatter.Deserialize(stream);
      stream.Close();
      return objectToBeDeSerialized;
   }

[Serializable]
struct MyStruct
{
    byte[] ByteData;
    int MyInt;
    double MyDouble;
} 
```

不要忘记将您的对象标记为可序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:15:11.763

您可以使用序列化，请查看此 MSDN 链接[Serialization](http://msdn.microsoft.com/en-us/library/7ay27kt9%28v=vs.100%29.aspx)。

默认的序列化选项是[binary](http://msdn.microsoft.com/en-us/library/72hyey7b.aspx)和[XML](http://msdn.microsoft.com/en-us/library/90c86ass.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T14:15:17.203

对其进行序列化：http: [//msdn.microsoft.com/en-us/library/et91as27.aspx](http://msdn.microsoft.com/en-us/library/et91as27.aspx)

# android - 在 Android 的电子邮件附件中显示零字节 pdf 文件

> ID：10229945
> 
> 赞同：1
> 
> 时间：2012-04-19T14:11:50.440
> 
> 标签：android, email-attachments

我在电子邮件附件中发送一个 pdf 文件，附件在电子邮件中成功发送，它在电子邮件中显示我作为附件，但是当我下载这个 pdf 时它没有内容，即它的大小为零字节。我错过了一些许可吗？或有关此的任何解决方案？

这是我的代码

```
private void emailSend(String emailString, String subject, String pdfPath){

        String[] email = { emailString };
        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

        emailIntent.putExtra(Intent.EXTRA_EMAIL, email);
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"MY body");
        emailIntent.setType("application/pdf");
        emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(pdfPath));

        startActivity(Intent.createChooser(emailIntent, "Send mail..."));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:45:55.480

[最后我从这篇](https://stackoverflow.com/questions/6078099/android-intent-send-an-email-with-attachment)文章中得到了解决我的问题的方法。

我用

```
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(pdfPath))); 
```

代替

```
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(pdfPath)); 
```

它解决了我的问题。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:42:22.960

我这样做是为了从带有邮件附件的 SD 卡发送任何文件......

```
Intent sendEmail= new Intent(Intent.ACTION_SEND);
       sendEmail.setType("rar/image");
       sendEmail.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new        
         File("/mnt/sdcard/download/abc.rar")));
         startActivity(Intent.createChooser(sendEmail, "Email:")); 
```

# batch-file - 如果在文本文件的列表中找不到文件，批处理文件是否可以删除文件？

> ID：10229947
> 
> 赞同：2
> 
> 时间：2012-04-19T14:11:55.340
> 
> 标签：batch-file, cmd

尝试编写一个批处理文件，该文件将遍历目录中的所有文件，如果在文本文件中找不到文件的第一部分，则删除。

在图像目录中，文件的名称如下：

```
1_a.jpg
1_b.jpg
1_c.jpg
2_a.jpg
3_a.jpg
3_b.jpg 
```

在文件中，列表是

```
2
3 
```

所以此时我想删除

```
1_a.jpg
1_b.jpg
1_c.jpg 
```

通过使用开始：

```
@echo off
wget -N http://www.domain.com/imagelist.txt
FOR /R C:\image-directory\ %%G IN (*.jpg) DO ??????? %%G 
```

我卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:24:16.240

```
@echo off
setlocal
set "folder=c:\somePath"
set "excludeFile=c:\somePath2\someFile.txt"
for /f "eol=: delims=" %%F in ('dir /b /a-d "%folder%" ^| findstr /vibg:"%excludeFile%"') do del "%folder%\%%F" 
```

# bash - 解释bash的一些tips

> ID：10229948
> 
> 赞同：0
> 
> 时间：2012-04-19T14:11:55.603
> 
> 标签：bash, pid

我得到一段 PID 文件控制的代码。

程序员的风格，看不懂。。

我不知道-->

&& 的使用

```
[[ $mypid -ne $procpid ]] **&&** 
```

并正确地重新启动自己（在 MacosX 上不起作用）

```
$0 $@ & 
```

代码完成...

```
function createpidfile() {
  mypid=$1
  pidfile=$2
  #Close stderr, don't overwrite existing file, shove my pid in the lock file.
  $(exec 2>&-; set -o noclobber; echo "$mypid" > "$pidfile") 
  [[ ! -f "$pidfile" ]] && exit #Lock file creation failed
  procpid=$(<"$pidfile")
  [[ $mypid -ne $procpid ]] && {
    #I'm not the pid in the lock file
    # Is the process pid in the lockfile still running?
    isrunning "$pidfile" || {
      # No.  Kill the pidfile and relaunch ourselves properly.
      rm "$pidfile"
      $0 $@ &
    }
    exit
  }
} 
```

我迷路了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:16:38.127

`[[ ! -f "$pidfile" ]] && exit`表示“如果没有名为 $pidfile 的文件，则退出”（使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)） -`exit`如果文件存在，则不会被评估。

`$0 $@ &`：

*   `$0`- 命令行中的第一个参数（表示可执行文件本身）；
*   `$@`- 所有剩余的参数都传递到命令行；
*   `&`- 启动后将进程发送到后台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:16:42.997

```
 command1 && command2 
```

当且仅当 command1 返回退出状态为零时，才会执行 command2。

`$0`是实际二进制文件的名称。

`$@`都是参数。

并且关闭`&`将过程发送到后台。

一切都记录在[bash 手册](http://www.gnu.org/software/bash/manual/bashref.html)中参见例如部分`3.4.2 Special Parameters`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:19:23.270

这是[布尔短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)- 如果`&&`(and) 运算符之前的位计算结果是，`false`则不需要执行第二部分（和之间的块`{`。运算符`}`使用相同的技巧`||`，它只会在以下情况下执行第二个块第一个块返回`false`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T14:17:54.683

1.  `&&`是一个逻辑**AND**。

    如果条件`[[ $mypid -ne $procpid ]]`为真，则块中的代码将`{...}`被执行。

2.  `$0 $@ &`在后台重新启动脚本（使用相同的参数）。

    *   `$0`是调用脚本的命令

    *   `$@`是传递给脚本的所有参数的列表

    *   `&`表示前面的命令应该在后台执行

# c++ - 双桌面全屏模式

> ID：10229949
> 
> 赞同：0
> 
> 时间：2012-04-19T14:11:57.570
> 
> 标签：c++, mfc, directx, direct3d, nvidia

我有一个进入全屏模式的 MFC 应用程序/对话框。我在带有 nVidia GT 330 的 Windows 7 双显示器上运行它。我需要在程序内使其在第二个桌面（不是主显示器）上全屏显示，无需任何用户输入。Direct3D可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:03:48.503

您可以使用 Windows API 将窗口移动到第二个桌面，如果您使用的是 D3D9 或更早版本，则可以切换到全屏（尽管 D3D10 的多显示器示例仍在使用此方法）。如果您有 DXGI，您可以使用 SetFullscreenState 的第二个参数设置使用哪个监视器。

# web - 流媒体？或者它是什么？

> ID：10229952
> 
> 赞同：2
> 
> 时间：2012-04-19T14:12:02.600
> 
> 标签：web, streaming, hosting, bandwidth, host

我有来自两个不同托管公司的 2 个网络主机。一个是托管我的网页，另一个是我上传视频（mp4 格式）的地方。目前我正在使用[http://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)它，因为我可以使用 HTML5，如果客户端不支持 HTML5，它会退回到普通的 FLV 视频播放器。

我收到的视频具有 .avi 或 .mpeg 扩展名。我正在使用 Miro Video Converter 将视频转换为 .mp4，而不是将它们上传到我的辅助网络主机。从那里我可以通过 URL 轻松访问 mp4 格式的视频。一切完成后，我只需将 URL 链接复制并粘贴到我的 HTML 文档中，如下所示：

```
<video
    src="http://66.55.XXX.XXX/university/students/video1.mp4"
    width="640px"
    height="480px"
    id="vidi"
</video> 
```

我已经对视频流进行了研究，但是……我不明白或者……我做得对吗？如果我只是复制粘贴链接，这意味着我正在将视频从网络主机 #1 流式传输到网络主机 #2 吗？这样对吗？

此外，视频具有 1280 x 1024 高清质量，我知道视频是否具有更高质量、缓冲区、加载时间更长。这就是为什么我将视频大小重新调整为 640 x 480 并与 HTML5 兼容的原因。

我使用了多少带宽？还有客户？如果其中一个人（学生）正在观看视频，他使用了多少带宽？我支付了无限存储的网络主机费用，因为我每周上传 10、12 GB 的数据。

我非常担心负载或缓冲时间。目前该网页用于约 30、40 人，但如果全年或整个大学都在使用该网页怎么办？我应该做些什么？

我做的流媒体正确吗？这就是为什么我选择了 2 个不同的网络主机，以获得更多带宽。

对不起，很长的帖子和我的英语。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:11:43.557

> 如果我只是复制粘贴链接，这意味着我正在将视频从网络主机 #1 流式传输到网络主机 #2 吗？这样对吗？

首先，看起来媒体文件是通过纯 HTTP 提供的，没有逻辑。所以我不会称之为“流媒体”，而是称之为“渐进式下载”。（这是托管公司的一种营销策略——如果是视频，它必须是流媒体，对吧？啊……不。）

其次，不：视频不会从 66.55.XXX.XXX 传输到托管您网站的网络服务器。相反，它将直接从 66.55.XXX.XXX 转到网络浏览器。

> 此外，视频具有 1280 x 1024 高清质量，我知道视频是否具有更高质量、缓冲区、加载时间更长。这就是为什么我将视频大小重新调整为 640 x 480 并与 HTML5 兼容的原因。

调整视频大小以减少带宽意味着您需要将视频转码为更小的尺寸。在标签上设置`width`和`height`属性`<video>`只会改变显示的大小。这两个属性对来自服务器的比特率没有影响，因此对缓冲区或加载时间没有影响。

> 我使用了多少带宽？还有客户？如果其中一个人（学生）正在观看视频，他使用了多少带宽？

这里有两个术语需要注意：

*   **流量**：发送的字节数**（*体积*）**
*   **带宽**：发送字节的速率**（*速率*）**

这是一个重要的区别。同样，许多托管公司以营销的名义混淆了这些概念。当心。

这对您的情况有何影响？可以这样想：如果您在托管上有一个 1GB 的视频，并且被观看了 10 次，那就是 10GB 的流量。带宽取决于发送文件的服务器、客户端的网络连接速度以及介于两者之间的网络。根据经验，您无需担心这一点，除了两点：

1.  视频的比特率需要小于客户端和服务器之间网络连接的比特率。如果没有，您将在视频播放期间进行缓冲。
2.  您的托管公司可能（可能！）限制有多少并发用户可以一次观看视频。如果 100 人同时下载视频，每个人平均下载 2mbps，也就是 200mpbs 的带宽！

除非您每天有超过 10-100 名观众，否则我不会过多担心带宽问题。

计算视频带宽的一种简单方法是：

```
bit rate = (bytes * 8) / (time in seconds) 
```

愚蠢的例子：800s 长的 1GB 视频（为清晰起见四舍五入）

```
bit rate = (1,000,000,000 bytes * 8 bits per byte) / (800 seconds)
bit rate = (8,000,000,000 bits)                    / (800 seconds)
bit rate =  10,000,000 bits per second
bit rate =  10,000 kilobits per second
bit rate =  10     megabits per second 
```

> 我支付了无限存储的网络主机费用，因为我每周上传 10、12 GB 的数据。

“无限存储”，嗯，也许吧。如果您在某个时候上传了足够多的数据，有人会注意到并告诉您您的 ToC 已被违反。托管市场就是这样邪恶的。

> 我非常担心负载或缓冲时间。目前该网页用于约 30、40 人，但如果全年或整个大学都在使用该网页怎么办？我应该做些什么？

立刻？还是每天？那些人在看一个视频吗？或者看过的视频？如果您有 10-25 个并发，那么您可能至少应该稍微担心托管公司。

坦率地说，网络/视频托管市场充满了诱饵-n-switch 策略、不透明的定价、黑帮 ToC 和令人费解的营销言论。[使用 Amazon 的AWS](http://aws.amazon.com/)之类的服务可能会为您提供更好的服务。具体来说，使用[Amazon S3](http://aws.amazon.com/s3/)存储您的视频并使用[Amazon CloudFront](http://aws.amazon.com/cloudfront/)将视频流式传输到客户端。所有这一切都对黑幕托管公司具有三个明显的优势：

1.  **公平透明的定价**（包括在线计算器）
2.  **为你使用的东西付费**（而不是更多）
3.  有效的**无限存储和带宽**（AWS 拥有 TB 的带宽和 EB 的存储）

我强烈推荐 AWS 用于您似乎拥有的小型但不平凡的项目。

去全尺寸高清！对于您的观众来说，这是一种更加引人入胜的体验。

祝你好运！

# linux - 无法安装 Joomla 或 Wordpress 组件和插件

> ID：10229955
> 
> 赞同：0
> 
> 时间：2012-04-19T14:12:19.347
> 
> 标签：linux, wordpress, joomla, centos

我无法安装 Joomla 组件或 Wordpress 插件，而且我在 Joomla CMS 中收到一条消息，说它无法写入服务器。

我打电话给托管公司，他们说 HTTP 写入和执行似乎已禁用。

我不确定通过 CMS 中的脚本创建文件或文件夹时会创建什么所有者。在通过 CMS 创建之前，我已经看到了所有者 99 或 root，但是这有什么影响？

如何更改用户的访问权限以确保其正常工作？

我正在使用 Cent OS Linux 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:03:52.013

检查目录权限。为此，请登录管理面板并从顶部菜单中选择“帮助 > 系统信息”。然后选择“目录权限”并检查是否所有需要的目录都是可写的

# c# - 列表的通用列表，转换列表 > 到 IList >

> ID：10229956
> 
> 赞同：6
> 
> 时间：2012-04-19T14:12:21.313
> 
> 标签：c#, .net, generics, ienumerable, ilist

我们正在使用一个对 3D 测量数据执行计算的类库，它公开了一个方法：

```
MeasurementResults Calculate(IList<IList<Measurement>> data) 
```

我想允许使用任何可索引的列表列表（当然是测量）调用此方法，例如：

```
Measurement[][] array;
List<List<Measurement>> list; 
```

使用数组调用方法工作正常，这有点奇怪。这里有一些编译器技巧吗？尝试使用 调用`List`会出现熟悉的错误：

```
cannot convert from 'List<List<Measurement>>' to 'IList<IList<Measurement>>' 
```

所以，我写了一个外观类（也包含一些其他的东西），它的方法在参数和方法之间拆分通用定义，并在必要时转换为 IList 类型：

```
MeasurementResults Calculate<T>(IList<T> data) where T : IList<Measurement>
{
  IList<IList<Measurement>> converted = data as IList<IList<Measurement>>;
  if(converted == null)
    converted = data.Select(o => o as IList<Measurement>).ToList();
  return Calculate(converted);
} 
```

这是解决问题的好方法，还是您有更好的主意？

此外，在测试该问题的不同解决方案时，我发现如果类库方法已使用`IEnumerable`而不是声明`IList`，则可以使用数组和以下方法调用该方法`List`：

```
MeasurementResults Calculate(IEnumerable<IEnumerable<Measurement>> data) 
```

我怀疑还有一些编译器技巧再次起作用，我想知道为什么他们在`IList`工作`List`时没有使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:15:07.717

可以使用 来执行此操作`IEnumerable<T>`，因为它在 中是*协变的`T`*。这样做是不安全的`IList<T>`，因为它同时用于“输入”和“输出”。

特别要考虑：

```
List<List<Foo>> foo = new List<List<Foo>>();
List<IList<Foo>> bar = foo;
bar.Add(new Foo[5]); // Arrays implement IList<T>

// Eh?
List<Foo> firstList = foo[0]; 
```

[有关泛型协变和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的更多信息，请参阅 MSDN 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:21:12.153

假设我们有一个方法

```
void Bar(IList<IList<int>> foo) 
```

在 内`Bar`，添加 a 应该是完全可以接受的`int[]`——`foo`毕竟，`int[]`implements `IList<int>`，不是吗？

但是如果我们`Bar`用 a调用`List<List<int>>`，我们现在会尝试将 a 添加`int[]`到只接受 a 的东西上`List<int>`！这会很*糟糕*。所以编译器不允许你这样做。

> 此外，在测试该问题的不同解决方案时，我发现如果类库方法已使用`IEnumerable`而不是声明`IList`，则可以使用数组和调用该方法`List`：

事实上，因为如果行为契约只是说“我可以**输出** `int`s”，那么就不会出错。进一步研究的关键术语是*协变*和*逆变*，没有人能记住哪个是哪个^。

在您的特定情况下，如果`Calculate`仅*读取*其输入，则将其更改为使用`IEnumerable`绝对是正确的做法-它既允许您传入任何合格的对象，又进一步向读取签名的任何人**传达**此方法是故意的旨在仅**消耗**而不是变异其输入。

* * *

*^*好吧，几乎没有人*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T14:23:09.197

你的实现有一些我会改变的事情。首先，它可能会在原始对象中有对象的结果中插入空值。就个人而言，我更喜欢它扔。

```
MeasurementResults Calculate<T>(IList<T> data) where T : IList<Measurement>
{
    return Calculate(data as IList<IList<Measurement>>
                     ?? data.Cast<IList<Measurement>>().ToList());
} 
```

一个简短的例子就像我个人在你的情况下所做的那样，尽管我怀疑我是否会真正实现该方法。接口是这样写的（我希望如此），如果可能的话，我会尝试在我的实现中使用这些知识，而不是与之抗争。如果您使用您的代码（或类似的代码），对方法中的列表所做的任何更改都不会反映在原始列表中。这是一个传递给该方法的新列表，并且由于签名要求 IList，因此可以进行更改。

除了列表中可能没有空值而不是对象之外，我已经更改为使用 cast 方法，因为这基本上就是您要完成的工作。（Cast 不允许自定义转换运算符）。

# java - 服务在模拟器上启动，但在设备上没有

> ID：10229962
> 
> 赞同：1
> 
> 时间：2012-04-19T14:12:37.890
> 
> 标签：java, android, android-manifest, broadcastreceiver, android-service

我正在尝试学习如何在 Android 中创建服务，我已经做了一个非常简单的服务。问题是它在 AVD 上就像一个魅力，但在物理设备上却不是。只是它没有在启动时启动......

看一下代码：

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.myservice" android:versionCode="1" android:versionName="1.0">
  <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
  <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <receiver android:name=".ServiceStarter" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        <service android:enabled="true" android:name=".MyService" />
  </application>
  <uses-sdk android:minSdkVersion="3" />
</manifest> 
```

服务启动器：

```
package com.example.myservice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import com.example.myservice.MyService;

public class ServiceStarter extends BroadcastReceiver {   
    @Override
    public void onReceive(Context context, Intent intent) {  
          if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())){  
           Intent pushIntent = new Intent(context, MyService.class);  
           //pushIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
           context.startService(pushIntent);  
          }  
    }  
} 
```

并自行服务：

```
package com.example.myservice;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyService extends Service {
    private static final String TAG = "MyService";

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");
    }
} 
```

我在 android 4.0.3 上运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:22:26.863

您需要向您的应用程序添加一个活动，并且用户必须先手动启动该活动，然后您的应用程序才能在 Android 3.1+ 上运行。在那之前，你的`<receiver>`将被忽略。[大约 9 个月前我在博客上写过这个](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)。

# jquery - jQuery 上的 trigger('click') 和 click() 有什么区别

> ID：10229964
> 
> 赞同：7
> 
> 时间：2012-04-19T14:12:43.733
> 
> 标签：jquery, performance

我正在寻找这两者之间的性能差异，我在 SSE 中找不到关于这个主题的好的答案。

一些例子会有很大帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T14:16:29.467

如果您查看 jQuery 代码，您会发现所有`click()`的操作都是执行`trigger('click')`：

```
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

// Handle event binding
jQuery.fn[ name ] = function( data, fn ) {
    if ( fn == null ) {
        fn = data;
        data = null;
    }

    return arguments.length > 0 ?
        this.on( name, null, data, fn ) :
        this.trigger( name );
}; 
```

请注意：

```
 return arguments.length > 0 ?
        this.on( name, null, data, fn ) :
        this.trigger( name ); 
```

换句话说，“如果没有参数传递给`click`，则执行`trigger('click')`”。

# python - 检查字符串A中是否没有多个字符出现？

> ID：10229965
> 
> 赞同：4
> 
> 时间：2012-04-19T14:12:46.650
> 
> 标签：python

我有一个字符串 ,`A = "abcdef"`和几个字符`"a"`,`"f"`和`"m"`. 我想要一个条件来确保没有任何字符出现在 中`A`，即

```
if a not in A and f not in A and m not in A:
    # do something 
```

有一个更好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T14:17:01.117

[集合](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)对此很有用——参见`isdisjoint()`方法：

> 如果集合没有与其他相同的元素，则返回 True。当且仅当它们的交集是空集时，集合是不相交的。
> 
> 2.6 版中的新功能。

```
>>> a = "abcde"
>>> b = "ace"
>>> c = "xyz"
>>> set(a).isdisjoint(set(b))
False
>>> set(a).isdisjoint(set(c))
True 
```

**评论后编辑**

套还是你的朋友。如果我现在更好地关注你，你想要这个（或接近它的东西）：

为了清楚起见，我们将把所有东西都设置为集合：

```
>>> a = set('abcde')
>>> b = set('ace')
>>> c = set('acx') 
```

如果您的字符集中的所有字符都在字符串中，则会发生这种情况：

```
>>> a.intersection(b) == b
True 
```

*如果您的字符串中不*存在任何这些字符，则会发生这种情况：

```
>>> a.intersection(c) == c
False 
```

更接近您的需求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:16:44.790

```
True in [i in 'abcdef' for i in 'afm'] 
```

给出 True 和

```
True in [i in 'nopqrst' for i in 'afm'] 
```

给出错误

# android - 如何开发一个不会出现在 android 启动菜单中的应用程序

> ID：10229966
> 
> 赞同：-3
> 
> 时间：2012-04-19T14:12:55.757
> 
> 标签：android

我如何开发一个不会出现在启动菜单中的应用程序（既不是它的图标也不是启动器）。我将通过其他方式启动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:20:22.103

> 我如何开发一个不会出现在启动菜单中的应用程序（既不是它的图标也不是启动器）

没有任何带有`<intent-filter>`用于`MAIN`操作和`LAUNCHER`类别的活动。

> 我将通过其他方式启动它。

在 Android 3.1+ 上，这种“其他方式”可能不起作用。用户必须手动启动您的一项活动才能使您的应用程序的其他任何内容（例如，`BroadcastReceiver`）正常工作。

# google-maps - 根据时间沿折线移动

> ID：10229967
> 
> 赞同：1
> 
> 时间：2012-04-19T14:12:57.523
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

我正忙于为 GPS Tracks 构建一种“track”播放器。

我的数据库中有某个轨道的所有位置（纬度、经度、高度、时间）。

我能够在地图上显示整个轨道并沿该轨道移动标记（请参阅`http://89.188.9.68/nl/gebruikers/track/trackid/101/#.T5AbauxNs1Y`）。在左边你有一些“开始！！！！”。如果你击中它，他将沿着轨道移动，但基于距离。

我的目标是我可以根据时间移动。最终目标是我有 2 个标记、2 个音轨，并且我可以播放它并查看 2 个标记之间的差异。如果我使用距离，那么两者都是一样的，但我会看到人 1（轨道 1）在哪里以及那个时候人 2 在哪里。

任何人都知道我怎么能做到这一点？或者知道这怎么可能？我的一个想法是，我对每个动作都询问某个人的位置（询问数据库），但这不是太重了吗？

目前我使用 v3，但如果您认为 v2 对此更好，我可以随时切换；）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:32:13.840

我只能想到`setInterval`实际计算时间滴答，如此处所示

[http://jsfiddle.net/KSp4j/](http://jsfiddle.net/KSp4j/)

您提到查询数据库，但在您的示例中，所有点都在源中。我展示的内容需要 HTML 文件中已经加载的数据。我使用一种格式：

```
[
  [time 1st pt. arrived, lat, lng]
  [time 2nd pt. arrived, lat, lng]
  [time 3rd pt. arrived, lat, lng]
   ...
] 
```

并用数组的时间检查经过的时间。

# c++ - 使用 A* JPS 进行 3D 搜索

> ID：10229971
> 
> 赞同：7
> 
> 时间：2012-04-19T14:13:06.110
> 
> 标签：c++, path-finding

如何将[Jump Point Search](http://harablog.wordpress.com/2011/09/07/jump-point-search/)推广到 3D 搜索量？

到目前为止，我已经为涉及三个运动的 3D 立方体定义了修剪规则 - 直线 (0,0,1)、一阶对角线 (0,1,1) 和二阶 (1,1,1) .

我最关心的是[论文](http://users.cecs.anu.edu.au/~dharabor/data/papers/harabor-grastien-aaai11.pdf)中定义的最佳转折点。我一直无法确定它们是如何得出的，因此无法确定我自己的三个维度。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-28T00:46:58.253

与其尝试推导转折点，它有助于在 2D 中使用对算法的直观理解。

因为两个位置之间的最短距离是直线，所以我们知道沿对角线移动是最快的，因为它相当于 1D 中的*两步*。在 3D 中，这意味着对角线相当于*三个*步骤。（实际上，这些值是`sqrt(2)`和`sqrt(3)`）。有了这个，我们选择通过*尽可能多的轴*移动来进行优化……转动沿 2D 轴移动比转动沿 3D 轴移动更糟糕。同样，沿 1D（直线）移动甚至比 2D 移动*更糟糕。***这是跳点的核心假设**。

在剔除算法中，假设如果您在最不理想的轴 (1D) 上跳跃，那么直到出现平行墙之前，没有更高轴阶的最佳转弯（转到 2D 轴）相同的轴顺序。例如，请看[图 2(d)](http://users.cecs.anu.edu.au/~dharabor/data/papers/harabor-grastien-aaai11.pdf)，其中代码在 1D 中看到平行墙，并将 2D 运动添加回列表中。

## 作为启发式

向前计算，直到有一个空间空着（墙在 2 个空间之外），然后将此点添加到跳转列表中。对于跳转列表上的任何一点，跳到一个新的方向。目标 > 2D 向前移动 > 1D 向前移动 > 1D 向后移动 > 2D 向后移动。我们可以将这种启发式推广到任何 n 维......

评估下一个方向，其中 + 朝向目标，n 是增加的维度数量给我们等式... + *n* D > + *n-1* D > ... +1D > 0D > -1D > .. . > - *n-1* D > - *n* D

## 3D中最佳->最差转折点的顺序

1.  3D+ = [1, 1, 1]
2.  2D+ = [1, 1, 0], [1, 0, 1], [0, 1, 1]
3.  1D+ = [1, 0, 0], [0, 1, 0], [0, 0, 1], [-1, 1, 1], [1, -1, 1], [1, 1, - 1]

（下面的次优； [0, 0, 0] 没用，所以我没有包括它）

4.  0D = [1, -1, 0], [1, 0, -1], [-1, 1, 0], [-1, 0, 1], [0, -1, 1], [0, 1，-1]
5.  1D- = [-1, 0, 0], [0, -1, 0], [0, 0, -1], [-1, -1, 1], [1, -1, -1], [-1, 1, -1]
6.  2D- = [-1, -1, 0], [-1, 0, -1], [0, -1, -1]
7.  3D- = [-1, -1, -1]

*哎呀*打字很痛苦，但它应该可以解决您的问题。

请记住，当您“跳跃”时，请跟踪您跳跃的轴顺序；您需要在*同一轴上*找到平行的墙壁。因此，向 [1, 0, 1] 方向移动时，您希望找到位于 [1, 1, 0] 和 [0, 1, 1] 的墙，以便“解锁”方向 [ 1, 1, 1]。

使用相同的逻辑，如果您在一维 [1, 0, 0] 中移动，则检查 [0, 1, 0] 是否有墙以添加 [0, 1, 1] 和 [1, 1, 0]。您还检查 [0, 0, 1] 以添加 [1, 0, 1] 和 [0, 1, 1] 作为跳转点。

希望你明白我的意思，因为它*真的*很难可视化和计算，但是一旦你掌握了它的数学，就很容易掌握。

## 结论

使用 A* 启发式...

*   Dijkstra = 距起点的距离
*   贪婪优先=与目标的距离

然后添加我们的新启发式方法！

*   + *n* D > + *n-1* D > ... +1D > -1D > ... > - *n-1* D > - *n* D
*   如果任何点*n* D 有平行障碍物，您可以为每个开放的*n+1* D 方向添加一个跳跃点。

编辑：您的代码的“并行”定义

*   与您移动方向相同顺序的任何点
*   不是那个方向的下一个点
*   与下一个点具有相同数量的正向和负向维度移动（例如，[1, 1, -1] 平行于 [1, -1, 1] 和 [-1, 1, 1]，但**不**平行于[ 1, 0, 0]

# labview - cam3 无法在 LabVIEW 中加载

> ID：10229974
> 
> 赞同：0
> 
> 时间：2012-04-19T14:13:13.193
> 
> 标签：labview

在**Measurement and Automation Explorer**中，它显示出来并且似乎工作正常，但由于某种原因，我似乎无法在 LabVIEW 程序中使用 IMAQ 加载它。有人对如何使它工作有任何建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:56:35.193

*   IMAQ 不能同时在 MAX 和 LabVIEW 中打开相机。所以关闭MAX（或点击另一个相机......）
*   尝试在LabVIEW中使用Vision Express Acquisition vi加载它，然后将其转换为LV代码（鼠标右键，创建前面板）
*   IMAQ 还是 IMAQdx？

# c# - 后台工作者 c#

> ID：10229977
> 
> 赞同：-2
> 
> 时间：2012-04-19T14:13:16.167
> 
> 标签：c#, winforms

> **可能重复：**
> [如何使用后台工作人员？](https://stackoverflow.com/questions/6481304/how-to-use-a-backgroundworker)

请指出我如何使用 backgroundworker 或我必须使用什么来防止 gui 在应用程序执行一些漫长的过程时冻结？

当我执行 ping 进程或其他任何操作时，Gui 会冻结。这很烦人，我想在它 ping 时显示 ping 不同主机的结果，但它会冻结，直到它停止 ping 列表中的所有主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:15:49.347

这是一个[例子](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx?ppud=4)：

```
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;

namespace SL_BackgroundWorker_CS
{
    public partial class Page : UserControl
    {
        private BackgroundWorker bw = new BackgroundWorker();

        public Page()
        {
            InitializeComponent();

            bw.WorkerReportsProgress = true;
            bw.WorkerSupportsCancellation = true;
            bw.DoWork += new DoWorkEventHandler(bw_DoWork);
            bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
        }
        private void buttonStart_Click(object sender, RoutedEventArgs e)
        {
            if (bw.IsBusy != true)
            {
                bw.RunWorkerAsync();
            }
        }
        private void buttonCancel_Click(object sender, RoutedEventArgs e)
        {
            if (bw.WorkerSupportsCancellation == true)
            {
                bw.CancelAsync();
            }
        }
        private void bw_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            for (int i = 1; (i <= 10); i++)
            {
                if ((worker.CancellationPending == true))
                {
                    e.Cancel = true;
                    break;
                }
                else
                {
                    // Perform a time consuming operation and report progress.
                    System.Threading.Thread.Sleep(500);
                    worker.ReportProgress((i * 10));
                }
            }
        }
        private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if ((e.Cancelled == true))
            {
                this.tbProgress.Text = "Canceled!";
            }

            else if (!(e.Error == null))
            {
                this.tbProgress.Text = ("Error: " + e.Error.Message);
            }

            else
            {
                this.tbProgress.Text = "Done!";
            }
        }
        private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            this.tbProgress.Text = (e.ProgressPercentage.ToString() + "%");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:51:11.560

```
BackgroundWorker worker = new BackgroundWorker();

public Form1()
{
    InitializeComponent();

    worker.DoWork += worker_DoWork;
    worker.RunWorkerCompleted += worker_RunWorkerCompleted;
    worker.RunWorkerAsync();//Calls worker_DoWork on a separate thread.
}

void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)//Runs when worker_DoWork is completed.
{
    //
}

void worker_DoWork(object sender, DoWorkEventArgs e)
{
    //
} 
```

# ruby-on-rails - 如何保持时间，但更改时区？

> ID：10229985
> 
> 赞同：0
> 
> 时间：2012-04-19T14:13:55.617
> 
> 标签：ruby-on-rails, time, zone

我查看了一些 StackOverflow 问题，但似乎没有一个能够解决这个问题。

例如，我的时间是：

```
2012-04-19 08:42:00 +0200 
```

这是通过表单输入的内容。但是所有内容都是相对于它所在的时区显示的。因此，由于计算机以 UTC 工作，因此保存后的时间为：

```
Wed, 18 Apr 2012 23:42:00 PDT -07:00 
```

我如何保持相同的时间，但只是改变区域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:35:46.693

我认为[Time.use_zone](http://api.rubyonrails.org/classes/Time.html#method-c-use_zone)方法可能会对您有所帮助。在我正在使用的应用程序中，我们希望根据当前用户的时区来解释时间。我们的`User`类被赋予了一个`time_zone`属性，它只是一个有效的`ActiveSupport::TimeZone`字符串，我们创建了一个`around_filter`如下：

```
class ApplicationController < ActionController::Base

  around_filter :activate_user_time_zone

  def activate_user_time_zone
    return yield unless current_user # nothing to do if no user logged in
    return yield unless current_user.time_zone && ActiveSupport::TimeZone[current_user.time_zone] # nothing to do if no user zone or zone is incorrect
    Time.use_zone(ActiveSupport::TimeZone[current_user.time_zone]) do
      yield
    end
 end

end 
```

基本上，这将执行控制器操作中的代码，就好像它在当前用户的时区中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:34:16.903

我有同样的要求。请检查[这个](https://stackoverflow.com/q/10176192/517483)和[这个链接](https://stackoverflow.com/q/10198164/517483)也

或者

```
"2012-04-19 08:42:00 +0200".to_time.strftime("%c").to_datetime 
```

# android - Android 中的 FLAG_ACTIVITY_CLEAR_TOP 问题

> ID：10229991
> 
> 赞同：2
> 
> 时间：2012-04-19T14:14:03.297
> 
> 标签：android

我有很多活动，例如 login->main->a,b,c,d->logout [a,b,c,d 是四个活动]。当我登录应用程序时，它会进入主要并完成登录活动。和 main 分别启动每个活动。但是，当我处于 a/b/c/d（任何一个）活动并按注销时，它会进入登录活动`startActivity()`并清除所有以前的活动。但是当我按下它时它无法工作，它会转到 a/b/c/d [最后开始的一个]。我有使用`FLAG_ACTIVITY_CLEAR_TOP`and `FLAG_ACTIVITY_SINGLE_TOP`，但它不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:25:56.893

FLAG_ACTIVITY_CLEAR_TASK 应该可以解决问题。请注意，您需要将此标志与 FLAG_ACTIVITY_NEW_TASK 一起使用。

# android - 如何从android中的搜索栏更改设备音量

> ID：10229992
> 
> 赞同：5
> 
> 时间：2012-04-19T14:14:08.343
> 
> 标签：android

我知道如何从 seekbar 控制媒体播放器的音量。但是我怎样才能从 android 中的 seekbar 更改系统音量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:18:26.033

使用`AudioManager`和方法之类的[`adjustStreamVolume()`](http://developer.android.com/reference/android/media/AudioManager.html#adjustStreamVolume%28int,%20int,%20int%29)。[这是一个示例应用程序](https://github.com/commonsguy/cw-advandroid/tree/master/SystemServices/Volume)，它使用`SeekBar`小部件来调整各种流的音量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T05:46:14.740

可以使用以下代码：

```
import android.app.Activity;

import android.content.Context;

import android.media.AudioManager;

import android.os.Bundle;

import android.widget.SeekBar;

import android.widget.SeekBar.OnSeekBarChangeListener;

public class MainActivity extends Activity {

/** Called when the activity is first created. */

private SeekBar volumeSeekbar = null;

private AudioManager audioManager = null; 

@Override

public void onCreate(Bundle savedInstanceState) 

{

    super.onCreate(savedInstanceState);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    setContentView(R.layout.main);
    initControls();
}

private void initControls()

{

    try
    {
        volumeSeekbar = (SeekBar)findViewById(R.id.seekBar1);
        audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        volumeSeekbar.setMax(audioManager
                .getStreamMaxVolume(AudioManager.STREAM_MUSIC));
        volumeSeekbar.setProgress(audioManager
                .getStreamVolume(AudioManager.STREAM_MUSIC));   

        volumeSeekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
        {
            @Override
            public void onStopTrackingTouch(SeekBar arg0) 
            {
            }

            @Override
            public void onStartTrackingTouch(SeekBar arg0) 
            {
            }

            @Override
            public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) 
            {
                audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                        progress, 0);
            }
        });
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

# asp.net - 如何确定哪个按钮导致回发

> ID：10229995
> 
> 赞同：9
> 
> 时间：2012-04-19T14:14:12.607
> 
> 标签：asp.net, .net, vb.net, postback

我有 2 个按钮控件。当我单击一个时，我试图确定哪一个导致页面加载中的回发。如何确定这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:21:19.563

[本示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.command.aspx)中显示了如何使用 CommandName 和 CommandArgument 。这样你就可以只有一个处理程序。

```
<asp:Button id="Button1"
       Text="Sort Ascending"
       CommandName="Sort"
       CommandArgument="Ascending"
       OnCommand="CommandBtn_Click" 
       runat="server"/>

  <asp:Button id="Button2"
       Text="Sort Descending"
       CommandName="Sort"
       CommandArgument="Descending"
       OnCommand="CommandBtn_Click" 
       runat="server"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:22:51.380

你来自经典的 ASP 背景吗？当我第一次使用 ASP.NET 时，我也想到了同样的问题。

考虑另一种方法：

与其在 Form_Load 中检测回发，然后找出触发它的原因，不如为每个按钮创建一个特定的事件处理程序。这就是 Web 表单的全部意义所在——因此您可以使用与开发 Windows 应用程序非常相似的方式来开发应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T16:31:25.597

真正输入类型按钮在发布请求中发送其值。例如，如果您有，您将进入 Post button-name=Quote ，就像它是简单的文本输入一样。因此，您可以使用如下代码检查 post 是否包含按钮的值（对不起我的 vb）：

`Dim isQuote As Boolean = HttpContext.Current.Request.Form(SubmitQuote.UniqueID) IsNot Nothing`

因此，如果它不是*Nothing* (null)，则帖子已通过 SubmitQuote 按钮发送。

顺便说一句，对我来说 HttpContext.Current.Request("__EVENTTARGET") 也不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-22T16:29:53.287

在我的实现中，我的页面上有几种形式；如果某个按钮控件触发了回发，则需要进一步的操作。

控件属于以下类型，不填充`Request["__EVENTTARGET"]`

*   按钮（在表单的根部）
*   图像按钮（嵌套在 Datagrid 中）

我确定以下按钮控件是否引发了回发，方法是查看`UniqueID`控件的 是否已传递给`Page_Load`子内的表单请求：

```
- ASP.NET:
    <asp:Button ID="Button1" runat="server" />
    <asp:Button ID="Button2" runat="server" /> 
```

为了简单地处理以下嵌套图像按钮是否发起了回发，我利用了调用 javascript 函数的属性，该函数将使用发起控件`OnClientClick`的值填充补充隐藏字段控件的值，然后查看隐藏控件值`UniqueID`同样在`Page_Lode`子中：

```
- ASP.NET:
    <script type="text/javascript">
        function SetSource(SourceID) {
            var hiddenField = document.getElementById("<%=HiddenField1.ClientID%>");
            hiddenField.value = SourceID;
        }
    </script>

    <asp:HiddenField ID="HiddenField1" runat="server" Value="" />
    <asp:ImageButton ID="ImageButton1" runat="server" OnClientClick="SetSource(this.id)" /> 
```

然后`Page_Load`将通过某种方式实现：

```
-VB.NET
     Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.Load
        ' ...
        If Not Page.IsPostBack Then
            If Not String.IsNullOrEmpty(Me.Page.Request.Form(Button1.UniqueID)) Then
                ' ...
            ElseIf Not String.IsNullOrEmpty(Me.Page.Request.Form(Button2.UniqueID)) Then
                ' ...
            ElseIf Not Me.Page.Request.Form(HiddenField1.UniqueID) Is Nothing _
                And Not String.IsNullOrEmpty(Me.Page.Request.Form(HiddenField1.UniqueID)) Then
                ' ...
                HiddenField1.Value = String.Empty
            Else
                ' ...
            End If
        End If
    End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T14:24:41.980

在页面加载检查这个

```
String ButtonID = Request["__EVENTTARGET"]; 
```

# javascript - 在浏览器的开发工具中暂停语句时，如何在该语句之后立即终止执行？

> ID：10229996
> 
> 赞同：9
> 
> 时间：2012-04-19T14:14:16.057
> 
> 标签：javascript, debugging, browser, google-chrome-devtools

假设我有这个功能：

```
function test () {

    // statements 1

    statement_X;

    // statements 2

} 
```

我正在使用浏览器的开发工具逐步完成这些语句。现在，当我在“statement_X”处暂停时，我想终止函数执行（我不希望函数的“statements 2”部分被执行），就好像“statement_X”紧随其后声明`return;`。

我知道 Chrome 有内联脚本编辑，所以我可以在暂停语句之后手动添加 return 语句，然后按 CTRL+S 重新执行整个事情，但我也需要 IE 的这个功能，所以我希望有一个一般解决方案。

提前终止执行似乎是一件很容易的事情（对于浏览器），所以我希望开发工具能够提供这样的功能。

![在此处输入图像描述](../Images/0be6a638df2518bb1c305942ab7e22c9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T23:00:38.893

我在 IE 9 中成功测试了这个，所以我把它贴在这里作为答案：在`statement_X`脚本调试器中暂停时，按 F10 所以`statement_X`仍然执行，然后右键单击封闭函数的最后一行（带有终止函数体的右大括号`}`），然后从下拉菜单中选择“设置下一条语句”。这将跳过执行直到函数结束，就好像在 之后有一个 void return 语句`statement_X`。

![](../Images/1229a3a85e7d2fbc0ebfa0547cb6068c.png)

如果函数的最后一行有任何其他语句，如下面的代码所示，请注意右键单击大括号以使该技术起作用。

```
function test () { alert("statement 1");
    alert("statement 2"); } function test2 () { alert("statement 3"); } 
```

这有时在内联函数的情况下是必要的，或者在不用于调试的缩小脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:17:07.987

如果我理解正确，你不能这样做。

调试器（无论如何都是 Chrome 的调试器）本身是基于 javascript 的。

这些人（最终）使用`eval()`（最终）运行注入的代码。浏览 Chrome 检查器，当您尝试评估某些内容时，调试器代码似乎最终会调用它（我认为）：

```
function (evalFunction, object, expression, isEvalOnCallFrame, injectCommandLineAPI)
{
    // Only install command line api object for the time of evaluation.
    // Surround the expression in with statements to inject our command line API so that
    // the window object properties still take more precedent than our API functions.

    try {
        if (injectCommandLineAPI && inspectedWindow.console) {
            inspectedWindow.console._commandLineAPI = new CommandLineAPI(this._commandLineAPIImpl, isEvalOnCallFrame ? object : null);
            expression = "with ((window && window.console && window.console._commandLineAPI) || {}) {\n" + expression + "\n}";
        }
        return evalFunction.call(object, expression);
    } finally {
        if (injectCommandLineAPI && inspectedWindow.console)
            delete inspectedWindow.console._commandLineAPI;
    }
} 
```

`evalFunction`只是`eval()`.

问题是，我们不能在 eval 中使用 return 语句，即使在硬代码中也是如此。它会一直给你`SyntaxError: Illegal return statement`。

所以不，没有伏都教返回声明。

# jquery - 将内容注入 div

> ID：10229999
> 
> 赞同：0
> 
> 时间：2012-04-19T14:14:24.427
> 
> 标签：jquery

我有一个名为“中间”的 div，其中包含一个 textarea 元素。我想将来自另一个页面的另一个 div 中的一些文本注入到这个 textarea 中。我用 jquery 做这个，使用：

```
$('#IDofTextarea').load('url' +  ' #divToBaInjected'); 
```

这适用于 IE，但不适用于 Firefox。我认为这是因为，注入的内容还包含 html 标签。如果我注入中间，我会得到：

```
<div id="desc">Content of div.</div> 
```

我尝试将内容注入另一个 div，然后使用 getElementById('anotherdiv').innerHTML 将其加载到 textare 中，但它注入了错误（旧）值 od div（仅在 firefox 上，我对缓存问题进行了排序）即）。

那么，有没有办法我可以以某种方式剥离这些标签并仅将文本加载到 textarea 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:56:48.870

您可以实现加载函数的回调，这是您遗漏的可选参数，或者从 $.load 函数更改为 $.ajax 函数并在那里实现回调。我建议使用[ajax 函数](http://api.jquery.com/jQuery.ajax/)来实现该功能，因为它使 AJAX 调用的内部结构更加明确和易于理解。在这种情况下，您需要实现一个名为“success”的函数，该函数将在更改网页的 DOM 之前去除响应周围的 HTML 标记。