# StackOverflow 问答 11727000-11727999

# joomla - VirtueMart 和 Joomla 结帐问题

> ID：11727003
> 
> 赞同：0
> 
> 时间：2012-07-30T18:01:27.530
> 
> 标签：joomla, virtuemart

我有一个 Virtuemart 商店（版本：1.1.9）在 Joomla 版本 1.5.6 上运行

当我尝试结帐时，我的购物车很好，显示正确的项目，然后单击结帐时，下一页仅包含一个标题和一个按钮，没有主要内容。我想不通。结果是我无法完成销售交易，因为单击下一步按钮不会执行任何操作。我假设是因为身体里应该有的东西还没有完成。任何帮助或想法都会很棒！

该站点是 fsrmotorsports.com，如果您有兴趣查看它。

![在弹出窗口中](../Images/9d9aa53b523abf97215a434ce358abb8.png)

![不在弹出窗口中](../Images/b487c11ce60c66104eb1e4a0c9939911.png)

谢谢！

编辑：我会说，在某个时候，这在这个主题中效果很好。当我第一次安装它时，我已经通过这个系统完成了一个订单，所以它一定是虚拟机配置问题或产品配置问题。因为我完成的订单是我最初安装的示例数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:54:27.053

问题是配置文件 (administrator/components/com_virtuemart/virtuemart.cfg.php) 中的结帐订单代码已损坏。

用默认值替换它可以解决问题。

```
// Checkout Steps and their order
global $VM_CHECKOUT_MODULES;
$VM_CHECKOUT_MODULES = array('CHECK_OUT_GET_SHIPPING_ADDR' => array('order' => 1,'enabled'=>1),
        'CHECK_OUT_GET_SHIPPING_METHOD' => array('order' => 2,'enabled'=>1),
        'CHECK_OUT_GET_PAYMENT_METHOD' => array('order' => 3,'enabled'=>1),
        'CHECK_OUT_GET_FINAL_CONFIRMATION' => array('order' => 4,'enabled'=>1)
    ); 
```

# android - 如何放置随机选项的答案？

> ID：11727005
> 
> 赞同：0
> 
> 时间：2012-07-30T18:01:37.087
> 
> 标签：android

大家好，我是整个 android 世界的新手。我从我的琐事应用程序开始，但我无法在这里弄清楚如何随机化用户将选择的选项我的意思是我将提供 4 个选项，但**我想要一个随机选项存储答案**，但我不知道如何实现它。一点帮助将不胜感激？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:05:25.223

如果您有作为项目列表的选项，您可以使用`Collections.shuffle`shuffle 然后将它们显示为单选按钮。

# qt - 使用 QFile 创建带有目录的文件

> ID：11727006
> 
> 赞同：7
> 
> 时间：2012-07-30T18:02:10.213
> 
> 标签：qt

我想知道是否可以一次创建带有目录的文件。例如我想创建文件脚本/myFile.txt。

我写了这样的代码：

```
QFile _file( path );
QDir _dir;

// check if "scripts" folder exists
int _dirExists = _dir.exists( "scripts" );
// if not, create it
if( !_dirExists )
    _dir.mkdir( "scripts" );

// open file in write mode (and text mode) 
int _fileOpened = _file.open( QIODevice::WriteOnly | QIODevice::Text );
if( !_fileOpened ) {
// ... 
```

但我不得不使用 QDir 类，我不喜欢它的样子。我不明白为什么 QFile 不像在大多数此类框架中那样自己创建必要的目录。或者也许我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-07T07:19:45.327

我知道它的战后几年，但 QDir::mkpath 刚刚为我工作。

[http://qt-project.org/doc/qt-4.8/qdir.html#mkpath](http://qt-project.org/doc/qt-4.8/qdir.html#mkpath)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T19:53:17.220

不，我相信您无法一次性创建文件，并且它包含目录。

# c# - 属性：避免代码重复

> ID：11727008
> 
> 赞同：0
> 
> 时间：2012-07-30T18:02:16.813
> 
> 标签：c#, .net, attributes

```
[MyAttribute(Name = "Test123"]
public MyClass
{
    public string Name 
    {
       get { return "Test123"; }
    }
} 
```

是这个代码示例，我需要定义两次名称。一次在属性中，一次在类本身中。有没有办法避免这种重复？

我需要两者，因为有时，我会遍历程序集以查找所有使用*MyAttribute*的类并列出它们（带有名称）。其他时候，我可以访问实例化的对象，所以我不想使用该属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:29:58.960

如果可以将名称放入字符串常量中，那么您可以将该常量用于属性参数和属性的返回值。

如果您需要更改名称，只需更改 const 值。

```
[MyAttribute(MyClass.MyClassName)]
public MyClass
{
    private const string MyClassName = "Test123";

    public string Name 
    {
       get { return MyClass.MyClassName; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:06:36.437

像下面这样的东西可能会起作用。不过，这将是非常低效的。注意，我没有测试下面的代码，但它应该很接近。

```
[MyAttribute(Name = "Test123"]
public MyClass
{
    public string Name 
    {
       get { return ((MyAttribute)(GetType().GetCustomAttributes(typeof(MyAttribute), true).First())).Name; }
    }
} 
```

为什么你首先需要一个属性和一个属性？您需要两者的事实，特别是因为 Name 属性是“静态的”（附加到类型）并且属性是实例，所以闻起来是错误的。

# python - dpkg Python模块？

> ID：11727011
> 
> 赞同：9
> 
> 时间：2012-07-30T18:02:31.763
> 
> 标签：python, linux, apt, deb, dpkg

我正在尝试做一些包操作（a la dpkg），虽然我可以`popen`或者`subprocess.call`如果可能的话我宁愿用python方式做事。

不幸的是，我一直无法找到一个 python 模块来解决这个问题。

我看过参考，`python-deb`但它似乎已经不复存在了。`python-apt`似乎是一个潜在的解决方案，但 AFAICT 它无法处理单个`.deb`文件。

有人知道一个好的 dpkg python 解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T23:20:17.553

实际上，`python-apt`允许您直接使用这些文件。这是一个例子：

```
from apt.debfile import DebPackage
from pprint import pprint
pkg = DebPackage('/tmp/wajig_2.7_all.deb')
pprint(pkg.filelist) 
```

输出：

```
$ ./script.py
['./',
 'etc/',
 'etc/bash_completion.d/',
 ...
 'usr/bin/',
 'usr/bin/wajig'] 
```

遗憾的是，它没有我想的那么完整，但它有很多功能。

（[更多信息](http://apt.alioth.debian.org/python-apt-doc/library/apt.debfile.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T02:09:57.710

Python-apt 可能是执行此操作的规范方式，但如果您需要在非 debian 平台上工作的能力，我已经发布了它的某些部分的本机重新实现的早期版本：

[https://github.com/memory/python-dpkg](https://github.com/memory/python-dpkg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:46:54.950

我对 debs 的 python 模块不太熟悉，但我想指出在 *ix 上调用子进程并不是坏事，它在 Windows 上。Windows 几乎似乎打算将调用事物作为子进程并解析输出，但 *ix 通常使它非常可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:38:20.323

显然 Gdebi 是基于 python 的。如果安装了 gdebi，您可以通过 GDebi 模块访问它的功能。

我似乎找不到任何文档，所以我不确定它是否是一个公共 API，但它可能会奏效。

# javascript - iOS Safari Mobile：为什么 Safari 会很快显示链接 - 而不是取消活动？

> ID：11727012
> 
> 赞同：0
> 
> 时间：2012-07-30T18:02:32.300
> 
> 标签：javascript, html, ios, mobile-safari

我有一个这样的 JavaScript：

```
var nav     = $('#nav_header a');
var current = null;

nav.click( function(event) {
    var key = nav.index($(event.target) );
    if (current != key) {
        // do some fancy stuff
    }
    // works fine on desktop browsers
    event.preventDefault();
    // needed on iOS
    event.stopPropagation();
} 
```

使用这个简短的 HTML：

```
<nav>
    <ol id="nav_header" class="nav_header">
        <li><a href="Link 1">Link 1</a></li>
        <li><a href="Link 1">Link 2</a></li>
    </ol>
</nav> 
```

当我只使用`event.preventDefault();`它时，它在所有桌面浏览器中都能正常工作。但在 iOS 上（在 5.1 上测试）它会在短时间内显示**地址栏。**当我添加`event.stopPropagation();`时，它也停止显示地址栏。但是：它仍然会在一瞬间更改地址，但不会加载链接的页面（因为事件被取消）。为什么会发生这种情况，我该如何预防？我也尝试过`return false;`，但它（当然，正如预期的那样）与`event.stopPropagation();`.

# javascript - 使用自定义 HTML 按钮登录时的权限 url 回调

> ID：11727016
> 
> 赞同：0
> 
> 时间：2012-07-30T18:02:50.753
> 
> 标签：javascript, facebook, facebook-graph-api

我有一个刷新我的网址的 Facebook 按钮`on-login`

```
<fb:login-button perms="email,user_about_me,user_photos" on-login="window.location = 'http://myDomain.com';">Login</fb:login-button> 
```

但是，如果我不想使用标准的 facebook 按钮并决定使用我自己的 javascript 标记，
我似乎很难在登录时获得回调
，这是我的尝试，任何建议或帮助都将不胜感激，
谢谢

```
function fb_oAuth(){
    FB.ui({
            method: "permissions.request", 
            "perms": 'email, user_about_me, user_photos'
        } , function(response) { 
        console.log(response); 
        /* if (response.session) {
                    window.location.href = 'http://www.myDomain.com';
                }  */
        });

        /*  FB.Event.subscribe('auth.sessionChange', function(response) {
                if (response.session) {
                    window.location.href = 'http://www.myDomain.com';
                } else {
                    // The user has logged out, and the cookie has been cleared
                }
        }); */

});

// HTML button
<a href="#" onClick="fb_oAuth(); event.preventDefault();">Login with Facebook</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:36:13.233

使用 FB.login 作为方法 permissions.request 方法不适用于您的 senerio。检查 FB 开发。文档以获取更多信息。

# objective-c - NSXMLParsing.. 解析具有相同节点名称和不同属性值的 xml

> ID：11727018
> 
> 赞同：0
> 
> 时间：2012-07-30T18:03:06.910
> 
> 标签：objective-c, ios, nsxmlparser

我想在iOS中解析下面的xml ..我该怎么做..

```
<RESULTS>
    <ROW>
        <COLUMN NAME="NAME">TEST1</COLUMN>
        <COLUMN NAME="PHONE">4642664</COLUMN>
        <COLUMN NAME="REMARKS"></COLUMN>
        <COLUMN NAME="XCOORD_DMS">238558.000038</COLUMN>
        <COLUMN NAME="YCOORD_DMS">381414.999953</COLUMN>
        <COLUMN NAME="XCOORD_WGS">51.59917692</COLUMN>
        <COLUMN NAME="YCOORD_WGS">25.18448963</COLUMN>
    </ROW>
    <ROW>
        <COLUMN NAME="NAME">TEST2</COLUMN>
        <COLUMN NAME="PHONE">4441303</COLUMN>
        <COLUMN NAME="REMARKS">تسجيل - ترخيص</COLUMN>
        <COLUMN NAME="XCOORD_DMS">231930.999982</COLUMN>
        <COLUMN NAME="YCOORD_DMS">392650.000114</COLUMN>
        <COLUMN NAME="XCOORD_WGS">51.53369833</COLUMN>
        <COLUMN NAME="YCOORD_WGS">25.28606306</COLUMN>
    </ROW>
</RESULTS> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:50:45.640

下面是我写的解析器..

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict {

    if([elementName isEqualToString:@"RESULTS"]) {
        //Initialize the array.
        //appDelegate.maps = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"COLUMN"]) {

        //Initialize the book.
        amaps = [[MapDetails alloc] init];

        dict = [[NSDictionary alloc] initWithDictionary:attributeDict];
        if ([[attributeDict objectForKey:@"NAME"] isEqualToString:@"NAME"]) {
        }

    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
{

    str123=[NSString stringWithFormat:@"%@",string];

}
// this delegate method is called if an error occurs in locating your current location
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {

    NSLog(@"STEP 3: Failed!!! Finding location : %@ ", error);
    if ( kCLErrorDenied) {
    } else {
        // We handle all non-CoreLocation errors here
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"RESULTS"])
        return;
    if([elementName isEqualToString:@"COLUMN"]) 
    {

        amaps.NAME = [NSString stringWithString:str123];

        NSLog(@"%@",amaps.NAME);
        if ([[dict objectForKey:@"NAME"] isEqualToString:@"NAME"]) {

            [arrName addObject:[NSString stringWithFormat:@"%@",amaps.NAME]];

            NSLog(@"arr %@",arrName);

        }
        if ([[dict objectForKey:@"NAME"] isEqualToString:@"ANAME"]) {

            [arrArabName addObject:[NSString stringWithFormat:@"%@",amaps.NAME]];

            NSLog(@"arr %@",arrArabName);

        }
        if ([[dict objectForKey:@"NAME"] isEqualToString:@"YCOORD_WGS"]) {
            [arrLatitude addObject:[NSString stringWithFormat:@"%@",amaps.NAME]];
            NSLog(@"arr %@",arrLatitude);
        }
        if ([[dict objectForKey:@"NAME"] isEqualToString:@"XCOORD_WGS"]) {
            [arrLongitude addObject:[NSString stringWithFormat:@"%@",amaps.NAME]];
            NSLog(@"arr %@",arrLongitude);
        }

    } 
```

}

# java - 在 Java 中查找 char 数组的大小

> ID：11727019
> 
> 赞同：8
> 
> 时间：2012-07-30T18:03:11.083
> 
> 标签：java, arrays

我正在制作一个计算器，我已经将一个字符串转换为一个字符数组，使用

```
char[] b = inputString.toCharArray(); 
```

（inputString 是我的字符串变量）

因为 String 是一个输入，所以我不知道数组会有多大。是否有一种内置方法可以让您找到数组中的元素数量？提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T18:04:19.960

您可以使用`b.length`来找出有多少个字符。

这只是字符数，不是索引，所以如果你用循环遍历它`for`，记得这样写：

```
for(int i=0;i < b.length; i++) 
```

注意`<`（不是 a `<=`）。同样重要的是要注意，由于数组不是一个类，. `length`不是一个函数，所以你以后不应该有括号。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-30T18:33:12.327

不要听这些家伙的任何一个，在这里，试试这个！

```
static int length(final char[] b) {
  int n = 0;
  while (true) {
    try {
      int t = b[n++];
    } catch (ArrayIndexOutOfBoundsException ex) {
      break;
    }
  }
  return n;
} 
```

（开个玩笑……试试吧`b.length`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:04:39.010

`b.length`是查找数组长度的方法

`length`属性确定[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T18:33:06.273

创建数组后，它的大小是固定的。它不能改变。您可以使用`arrayRefVar.length`. 例如，`myList.length`返回 10。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:07:22.373

以上答案有效。此外，如果由于某种原因您需要在实际创建数组之前知道数组大小（用于预处理或某些此类活动），您可以获得字符串的长度（这将等于数组的长度）。

```
inputString.length() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-03T15:30:18.597

b.长度；查找 char[] 数组的长度非常方便且非常有用:)

# cakephp - 数据源中的 delete() 不会在 find() 之后立即触发

> ID：11727028
> 
> 赞同：0
> 
> 时间：2012-07-30T18:03:39.417
> 
> 标签：cakephp, amazon-sqs

我有一个自定义数据源，我们称之为`SQSDatasource`。它工作正常，一般来说，对于`find()`，`save()`，甚至`delete()`。

```
class SQSDatasource extends DataSource {
    public function delete(Model $Model, $conditions = null) {

        // Deliberate break point to ensure that this function is being called
        print_r($conditions);
        exit();

        // I have my proper delete logic here, which works fine usually
    }
} 
```

一个模型，说它`Job`使用`SQSDatasource`. 中没有特别的逻辑`Job`。

然而，我遇到了一个奇怪的异常。

```
class TestShell extends AppShell {
    public $uses = array('Job');

    public function main() {
        // This works fine.
        $job = $this->Job->find('first');

        // The break point never gets called
        $this->Job->delete('TEST!');

        // This gets called
        $this->out('This gets called.');
    }
} 
```

`$this->Job->find()`但是，如果我在调用之前删除`$this->Job->delete()`，它工作得很好。`delete()`会被调用。

有人对这个异常有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:13:44.363

您没有任何用于查找的代码，例如在您的数据源中定义的 read() 函数。我怀疑在那里找到它失败了，因此没有进行删除。

删除查找后，不再有错误，并且删除工作正常。

查看[数据源](http://book.cakephp.org/2.0/en/models/datasources.html)的文档并确保您已启用调试。可能检查日志以查找未显示的任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:34:33.490

我已经设法找出问题所在。我的数据源代码实际上是完整的 , 等的完整实现`read()`。`create()`所有标准的 CakePHP CRUD 函数都可以在我的数据源上正常工作。

我遇到的问题主要是由于以下原因：

1.  `delete()`在 CakePHP 中实际上`find('count')`在允许删除之前做了一个内部操作，这是我没想到的

2.  [amazon-sqs](/questions/tagged/amazon-sqs "显示标记为“amazon-sqs”的问题")的行为。当消息*在*发送中时，它是暂时*不可见*的。

3.  此外，对于[amazon-sqs](/questions/tagged/amazon-sqs "显示标记为“amazon-sqs”的问题")，您不能在不先查询消息的情况下删除消息（因为删除不是通过消息 ID，而是通过消息处理程序）。一旦你开始查询它，它就会暂时不可见，这导致 CakePHP 认为删除是无效的。

# bytearray - 在 Jython 中创建 byte[]

> ID：11727031
> 
> 赞同：7
> 
> 时间：2012-07-30T18:03:53.007
> 
> 标签：bytearray, jython

我正在使用 Jython 进行开发，我需要使用需要 a`byte[]`作为参数的 Java 方法。

我试过了：

```
def randomBytesArray(length):
    data = []
    for _ in xrange(length):
        data.append(chr(random.getrandbits(8)))
    methodThatNeedsBytesArrays(data) 
```

但我得到这个错误：

```
TypeError: methodThatNeedsBytesArrays(): 1st arg can't be coerced to byte[] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-05T07:49:05.637

有时您需要将字节数组传递给函数，以便函数将结果填充字节数组。在这种情况下，发送 Python 字符串将不起作用，因为 Python 字符串是不可变的。相反，使用[jarray 模块](http://www.jython.org/archive/21/docs/jarray.html)创建一个 Java 字节数组：

```
import jarray
bytes = jarray.zeros(100, "b")
length = zlibDeflater.deflate(bytes)
... 
```

# nhibernate - 如何让 NHibernate 使用数据库约束来更改处理顺序？

> ID：11727040
> 
> 赞同：0
> 
> 时间：2012-07-30T18:04:12.927
> 
> 标签：nhibernate

我有一个对外键 (FK) 字段和日期字段具有唯一约束的数据库表，以防止给定 FK 的日期相同。我正在使用 NHibernate（如果相关，则为 1.2）在单个事务中将两条记录保存到同一个 FK 的表中。一个已经存在，日期为 NULL，并且正在更新以具有真实日期；另一个是带有 NULL 日期的插入。似乎发生的事情是 NHibernate 试图在违反约束的更新之前插入（相同的 FK 和 NULL 日期）。

在不将保存分解为多个部分的情况下，是否可以将某些内容添加到映射中以使 NHibernate 意识到在更新之前插入会违反约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:13:23.397

AFAIK 没有在 Flush() 上指定操作顺序的事情。但是，您可以将整个操作放入一个事务中，并`session.Flush();`在更改模型后调用，然后使用`Save()` `SaveOrUpdate()`.

# c# - 从 Web 服务填充的数据表创建水晶报表

> ID：11727041
> 
> 赞同：0
> 
> 时间：2012-07-30T18:04:16.520
> 
> 标签：c#, web-services

我正在尝试创建一个水晶报表，但是我无法直接连接到数据库。我需要从网络服务调用中获取所有数据。我为每个 web 服务调用返回 DataTables。我有什么方法可以将该数据表绑定到 Crystal Report 的 .xsd 文件，或者有没有更好的方法将此信息放入 Crystal Report 中。

```
 protected void GenReport_Clicked(object sender, EventArgs e)
    {

        ReportDocument TestReport = new ReportDocument();
        DataSet ds = new DataSet();
        DataTable dt = webservice.Get_Admin_Dealers();
        ds.Tables.Add(dt);
        dt.TableName = "TestReport";
        TestReport.Load(Server.MapPath("/TestReport.rpt"));
        TestReport.SetDataSource(ds);           
        ReportViewer.ReportSource = TestReport;

    } 
```

正面看起来像

```
asp:Panel ID="reportPanel" runat="server">
        <asp:Button ID="GenReport" runat="server" Text="Generate Report" OnClick="GenReport_Clicked" />
        <CR:CrystalReportViewer ID="ReportViewer" runat="server" AutoDataBind="true"></CR:CrystalReportViewer>
    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:52:20.643

请参阅此 url：[创建一个水晶报表表单 arraylist 或 datatable](http://forums.asp.net/t/1490795.aspx/1)。

# c++ - Boost.Test 自定义测试总结

> ID：11727049
> 
> 赞同：1
> 
> 时间：2012-07-30T18:04:41.677
> 
> 标签：c++, unit-testing, boost, boost-test

有没有办法在运行时使用 Boost Unit Testing 框架读取测试结果（所有通过失败的断言）？

我想要的是生成自定义测试日志，并在每次运行测试后以自定义的人类可读格式将其输出到控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:47:17.400

这样做的方法是让 Boost.Test 输出 XML，然后您将其解析并转换为您的自定义格式。使用[`report_format`和 相关选项](http://www.boost.org/doc/libs/1_52_0/libs/test/doc/html/utf/user-guide/runtime-config/reference.html)设置格式和级别。

# python - IronPython 与 CPython 的文件读取和解析性能

> ID：11727050
> 
> 赞同：1
> 
> 时间：2012-07-30T18:04:52.047
> 
> 标签：python, ironpython

我一直在用 python 开发一个文件阅读器，我希望在其中读取 ~100MB 的 ascii 文件。顶部有一堆标题信息，然后是制表符分隔的列。有些列包含非数字数据（我现在不关心）。我有一个 matlab 实现，可以在不到 1.5 秒的时间内读取一个 30MB 的示例文件。我的 python 阅读器在 CPython 中大约需要 2 秒，但在 IronPython 中大约需要 4 秒。不同之处似乎在于字符串值转换为浮点数的位置，但我无法在 IronPython 中让它更快。

我在这里的最新迭代有以下循环来读取和解析行

```
#-Parse the actual data lines
istep = -1
while len(line) > 0:

    istep += 1
    #-Split the line and convert pasred values to floats
    timestep = line.split();            
    for ichan in numericChannels:                    
        data[ichan].append(float(timestep[ichan]))

    line = f.readline().strip() 
```

`numericChannels`是一个整数列表，指定我要读取的通道。 `data`是一个列表列表，其中子列表是一列数据。

性能上的差异似乎来自浮点转换。关于我可以在 IronPython 上做些什么来加快速度的任何想法？我什至尝试过提前读取文件，然后使用 System.Threading.Task.Parallel.ForEach 构造来解析文件行。那根本没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:09:02.130

a）您说“差异似乎在于字符串值转换为浮点数的位置”-是什么让您这么认为？您是否对代码运行了分析器？

b）如果你有记忆，这样做可能会更快

```
for line in f.readlines(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:18:06.480

在我看来，这样的事情*可能*会快一点。

```
import operator
data=[]
istep = -1
columngetter=operator.itemgetter(*numericChannels)
while len(line) > 0:
    istep += 1
    #-Split the line and convert parsed values to floats
    timestep = line.split()
    data.append(map(float,columngetter(timestep)))
    line = f.readline().strip()

data=zip(*data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T18:59:15.723

在读取文本文件方面，IronPython 似乎比 CPython 慢。我在几个版本的 Python 中运行了这个片段（partest2.txt 文件在一行上有 200,000 个数字）：

```
import sys
import timeit

tmr = timeit.Timer("with open(r'partest2.txt','r') as fid:fid.readlines()")
res = tmr.timeit(number=20)
print(res) 
```

结果：

*   CPython 2.7：1.282
*   CPython 3.3：1.562
*   IronPython 2.6 [.NET 2]：2.196
*   IronPython 2.7 [.NET 4]：2.880

IronPython 运行吐出此警告（不确定它是否会影响任何内容）：

> <string>:1: RuntimeWarning: IronPython 不支持禁用 GC

当正在读取的文件 (partest2.txt) 被更改以使其具有相同的 200,000 个数字时，每个数字都在它自己的行上给出，这是时间（完全不同）

*   CPython 2.7：4.04
*   CPython 3.3：7.61
*   IronPython 2.7 [.NET 4]：20.22
*   IronPython 2.6 [.NET 2]：21.46

哎呀！

# websphere - Websphere 应用服务器在 WAS 6.1 中添加/删除 MIME 类型

> ID：11727051
> 
> 赞同：0
> 
> 时间：2012-07-30T18:05:01.527
> 
> 标签：websphere, mime

我正在使用 WAS 6.1，我尝试通过管理控制台添加 MIME 类型“.msg”（outlook 电子邮件格式）并删除了“.docx”mime 类型

但是，即使在我尝试使用 IE 从我的应用程序打开所有这些“.msg”文件之后，它也没有检测到并显示为乱码，即使我删除了它们，它仍然可以识别“.docx”文件

检查受支持（以便我可以检查 .msg 是否存在）和不受支持的 mime 类型（检查 .docx 已删除）的最佳方法是什么

请让我知道提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:59:20.320

可以从 IBM 的管理控制台完成/检查

# jquery - 使用 jquery 访问手风琴中的标题标签

> ID：11727052
> 
> 赞同：0
> 
> 时间：2012-07-30T18:05:01.777
> 
> 标签：jquery, html, accordion

如何访问手风琴中的标题标签。即样品 1、样品 2 和样品 3。

我尝试使用以下方式访问但没有成功。

```
$("#accordion div h3 a").text() 
```

或者

```
alert($("#accordion div h3").text()) 
```

只给出最后一个手风琴，即

```
alert($("#accordion div a").text()) 
```

输出为 clickhereclickhere...

HTML：

```
 <div id="dia">
    <div id="dialog" title="Detailed FeedBack ">
    <div id="accordion">
    <h3><a href="#">sample 1</a></h3>
    <h3><a href="#">sample 2</a></h3>
    <h3><a href="#">sample 3</a></h3>
    </div>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:08:20.977

你`#accordion`是你的 div 所以你只需要这个

```
$("#accordion h3 a") // <-- gets all a tags under #accordion --> h3 
```

或者你可以使用

```
$("#accordion a") //  <-- gets all a tags under #accordion 
```

取决于您的结构/要求是什么

甚至更具体

```
$("#accordion > h3 > a") 
```

它将返回一个 jquery 对象数组，您可以使用这些对象进行检索

`[index]`// <-- dom 元素 - 允许使用本地 dom 方法

前任。`$("#accordion > h3 > a")[0]`// <-- 获取第一个元素

或者

`.eq(index)` // <-- 允许使用 jQuery 方法 + 链接的 jquery 对象

前任。`$("#accordion > h3 > a").eq(0)`//<-- 获取第一个元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:10:22.907

采用：

```
$("#accordion a").eq(0).text() 
```

访问第一个选项卡链接的文本内容。其他的递增 0。

# c - 二维数组上的指针

> ID：11727056
> 
> 赞同：0
> 
> 时间：2012-07-30T18:05:05.813
> 
> 标签：c, segmentation-fault

我有一个分段错误，想知道我的错误在哪里。

让我解释。

在我的主要声明中，我声明了一个 3D 数组：`int*** Matricegroupegeneralisant`

然后这个main使用了一个函数`recuperationinfoFich(&matricegroupegeneralisant);` 这个函数声明为：`recuperationinfoFich(int* * * * matricegroupegeneralisant)`

此函数`recuperationinfoFich`使用另一个函数`recuperationmatricegroupesgeneralisants(matricegroupegeneralisantA[Ni]);` 此函数声明为`recuperationmatricegroupesgeneralisants( int*** matricegroupegeneralisant)`

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void allocationdynamiquetableautroisdimdentier(int**** Matrice,int nbniveau, int nbligne, int nbcolonne)
{
int i,j;
    *Matrice=(int***) malloc (sizeof(int**)*nbniveau);
    for (i=0; i<nbniveau; i++)
    {
        (*(Matrice))[i]=(int**) malloc (sizeof(int*)*nbligne);  // allocation dynamique de la matrice Matrice
        for (j=0; j<nbligne; j++)
        {
            ((*(Matrice))[i])[j]=(int*) malloc (sizeof(int)*nbcolonne);
        } 
    }
}

void recuperationmatricegroupesgeneralisants(int*** matricegroupegeneralisantA)
{
    (*matricegroupegeneralisantA)[0][1]=1;
}

void recuperationinfoFich(int**** matricegroupegeneralisantA)
{
    allocationdynamiquetableautroisdimdentier(matricegroupegeneralisantA,3, 3, 7);
    recuperationmatricegroupesgeneralisants(matricegroupegeneralisantA[1]);
}

void main(int args, char **argv)
{

    int*** matricegroupegeneralisantA;

    recuperationinfoFich(&matricegroupegeneralisantA);
} 
```

使用 Gdb：

```
(gdb) r
Starting program: /home/larimsna1/Desktop/a.out 

Breakpoint 1, 0x000000000040061a in main ()
(gdb) n
Single stepping until exit from function main,
which has no line number information.

Program received signal SIGSEGV, Segmentation fault.
0x00000000004005c8 in recuperationmatricegroupesgeneralisants ()
(gdb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:42:17.710

我怀疑这个问题与你的分配功能有关。话虽如此，您提供的代码存在许多功能和风格问题。在一个地方，您未能多次取消引用指针，导致您将整数分配给指针类型。当您根本无法传递参数并使用返回值时，您在大多数事务中不必要地使用指针。

这段代码应该做你想做的事，应该能正常工作，而且更容易阅读：

```
// allocation, returns pointer to allocated value
int *** allocationdynamique(int nbniveau, int nbligne, int nbcolonne)
{
    int *** Matrice;
    int i, j;
    Matrice = (int ***) malloc (sizeof(*Matrice) * nbniveau);
    for (i = 0; i < nbniveau; ++i)
    {
        Matrice[i] = (int **) malloc (sizeof(**Matrice) * nbligne);
        for (j = 0; j < nbligne; ++j)
        {
            Matrice[i][j] = (int *) malloc (sizeof(***Matrice) * nbcolonne);
        } 
    }
    return Matrice;
}

// computation, takes 2D array, modifies in place
void recuperationmatrice(int** matrice)
{
    matrice[0][1] = 1;
}

// you shouldn't use void main, its not part of the standard
int main(int args, char **argv)
{
    int*** matrice = allocationdynamique(3, 3, 7);
    recuperationmatrice(matrice[1]);

    return 0; 
} 
```

此外，从文体的角度来看，您的变量名称非常长，您应该在运算符周围使用空格。

此代码中的许多错误都是编译器能够检测到并警告您的错误。它们是可以正确编译的有效 C 代码，但在这种情况和大多数其他情况下，它们是错误编写的，无法按预期工作。您应该使用编译器警告进行编译以消除可能的事故：

```
gcc -Wall -c file.c -o file.o 
```

# android - 充当按钮侦听器的方法，类似于 OnOptionsItemSelected 方法

> ID：11727063
> 
> 赞同：0
> 
> 时间：2012-07-30T18:05:35.727
> 
> 标签：android, button, listener

我想知道是否有一种与该方法类似的`onOptionsItemSelected`方法，但它不是监听选项菜单项，而是监听 UI 中实现的所有按钮。

`onOptionsItemSelected()`方法 ：

```
public boolean onOptionsItemSelected( MenuItem item ) {
    switch( item.getItemId() ) {
        case R.id.item1:
            if( currentPlayer == 1 ) {return true;}
                updateUI( 1 );
            return true;
        case R.id.item2:
            if( currentPlayer == 2 ) {return true;}
                updateUI( 2 );
            return true;
        case R.id.item3:
            if( currentPlayer == 3 ) {return true;}
                updateUI( 3 );
            return true;
        case R.id.item4:
            if( currentPlayer == 4 ) {return true;}
                updateUI( 4 );
            return true;
        default:
            return super.onContextItemSelected( item );
    }
} 
```

现在，我对每个按钮都使用这种方法，而且我有太多了。如果我能找到一种像上面那样工作的方法，它会干净得多。

```
public class MyActivity extends Activity {
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        setContentView(R.layout.content_layout_id);

        final Button button = (Button) findViewById(R.id.button_id);
        button.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    // Perform action on click
                }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:08:15.530

```
public class MyActivity extends Activity implements OnClickListener{
 protected void onCreate(Bundle icicle) {
     super.onCreate(icicle);
     setContentView(R.layout.content_layout_id);

     final Button button = (Button) findViewById(R.id.button_id);
     button.setOnClickListener(this);

  //asign for othe  button if its btn1,btn2,btn3
     btn1.setOnClickListener(this);
     btn2.setOnClickListener(this);
     btn3.setOnClickListener(this);

 }

public void onClick(View v) {
 switch(v.getId() ) {
 case R.id.button_id:
     //put code here for button_id
 break;

 case R.id.button_id_1:
    break;

 default:
     break;
}      
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:14:36.237

```
View.OnClickListsner buttonListener = new View.OnClickListener() {
@Override
publiv oid onClick(View view) {
Swicth(view.getId()) {
your stuff like in your question 
}
}
} 
```

并且不要忘记将此列表器添加到每个按钮，如下所示：

```
butoon1.setOnClickListener(buttonListsner);
button2.setOnClickListsner(buttonListsner); 
```

# box2d - _objc_copyCppObjectAtomic 更新到 XCode 4.4 后未定义的符号

> ID：11727067
> 
> 赞同：1
> 
> 时间：2012-07-30T18:05:48.027
> 
> 标签：box2d, clang, xcode4.4

我刚刚更新到 XCode 4.4，现在得到这个链接器错误：

```
Undefined symbols for architecture armv7:
  "_objc_copyCppObjectAtomic", referenced from:
      -[CLASSNAME box2DBodiesList] in CLASSFILENAME.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

鉴于：@property（只读）std::vector box2DBodiesList；

这是一个 iOS 应用程序。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:23:16.140

当我升级到 XCode 4.4 时，我遇到了同样的问题。

问题可能是该属性被声明为只读，但是您在类实现中为其分配了一个值，可能是在初始化程序中。

您可以通过在头文件中将属性声明为 readwrite 或在实现文件 (.mm) 中的类类别声明中将其重新声明为 readwrite 来解决此问题，如下所示

```
@interface CLASSNAME()
@property(readwrite) std:vector box2DBodiesList;
@end 
```

缺少的函数 _objc_copyCppObjectAtomic 用于复制 CPP 对象（以使用 C++ 数据类型读写属性），并在属性标记为只读时排除（无需复制）。

希望这可以帮助！

/AndLen

# r - 使用 VennDiagram 包在 R 中缩放三重维恩图

> ID：11727068
> 
> 赞同：9
> 
> 时间：2012-07-30T18:05:53.957
> 
> 标签：r, venn-diagram

有谁知道如何让 R 包 VennDiagram 根据集合大小缩放包含 3 个相交集的维恩图的圆圈？

我可以使用 venneular 包实现这种缩放，但与 VennDiagram 相比，我发现在其他图形选项方面这有点受限。

VennDiagram 包文档建议将参数 'scaled' 设置为 TRUE 应该可以解决问题，但我发现这会产生 3 个大小相等的圆圈。

包文档确实暗示 scaled 参数可能仅适用于某些图表：

```
?draw.triple.venn 
```

揭示：

scaled：“布尔值，指示是否根据设置的大小在某些欧拉图中缩放圆的大小”

和

```
?venn.diagram

#Argument Venn Sizes    Class    Description
#scaled    2, 3         logical  Enable scaling for two-set and certain three-set Euler diagrams. 
```

我的代码的玩具示例：

```
require(VennDiagram)

venn.plot <- draw.triple.venn(
    area1 = 70,
    area2 = 250,
    area3 = 500,
    n12 = 30,
    n23 = 60,
    n13 = 10,
    n123 = 5,
    category = c("C1", "C2", "C3"),
    fill = c("blue", "red", "green"),
    scaled=TRUE)

tiff(filename = "test.tiff", compression = "none",type = "quartz",antialias = "none")
grid.draw(venn.plot)
dev.off() 
```

同样，使用“venn.diagram”函数的这段代码不会产生所需的缩放：

```
venn.diagram(x=list(A=c(1:15,16:20), B=c(6:15,21:30,100:150), C=c(11:30,200:300)),
         filename="test.tiff",
         fill = c("blue", "yellow", "red"), scaled=TRUE) 
```

非常感谢

吉姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:47:27.347

所以回答我自己的问题：对于某些配置，在数学上不可能使用圆圈创建一个缩放的 3 路维恩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-10T20:02:54.130

由于数据的潜在误导性视觉表示，三组维恩图的一般缩放被禁用

请尝试使用以下两个工具，

[http://bioinformatics.psb.ugent.be/webtools/Venn/](http://bioinformatics.psb.ugent.be/webtools/Venn/) [http://bioinfogp.cnb.csic.es/tools/venny/index.html](http://bioinfogp.cnb.csic.es/tools/venny/index.html)

对于您的问题，请阅读以下说明：

关键是在draw.triple.venn中设置***overrideTriple***

如果 euler.d == TRUE，则为 19 种特殊情况绘制欧拉图。某些欧拉图在适当的情况下使用特定于两组维恩图的缩放、sep.dist 或偏移参数。该功能默认将三个圆圈以三角形排列，其中两组在顶部，一组在下面。圆圈以顺时针方向对应于 area1、area2 和 area3，area1 在左上角。**NB 由于数据的潜在误导性视觉表示，禁用了三组维恩图的常规缩放。要重新启用，请将任何值分配给变量*overrideTriple***

[http://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf](http://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-04T13:55:52.020

我的解决方案：

```
overrideTriple=T
draw.triple.venn(9, 20, 30, 2, 10, 3, 2, category =
               rep("", 3), rotation = 1, reverse = FALSE, euler.d = F, scaled = F) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T07:39:33.750

我用[Vennerable](https://r-forge.r-project.org/projects/vennerable/)代替。将数据读入维恩对象有点复杂，但它会生成加权/缩放的三组图表 + 图形选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-01T06:57:57.360

如果您考虑不同的方法，我们开发了具有其他形状的 nVennR 包来传达区域大小。

```
mySVG <- plotVenn(list(A=c(1:15,16:20)), list(B=c(6:15,21:30,100:150)), list(C=c(11:30,200:300))) 
```

[准比例维恩图](https://i.stack.imgur.com/nvTug.png)

这个 R 包是初步的，输出控制的选项非常有限。我们正在根据收到的反馈开发一个新版本。还有一个具有更多选项的[Web 版本](http://degradome.uniovi.es/cgi-bin/nVenn/nvenn.cgi)，并且始终可以使用 Inkscape 等外部工具编辑输出。

# nginx - rvm 乘客 nginx

> ID：11727070
> 
> 赞同：0
> 
> 时间：2012-07-30T18:06:04.247
> 
> 标签：nginx, rvm, passenger

我正在尝试将我的应用程序部署到带有 capistrano、rvm、passenger 和 nginx 的 VPS。

我已经在 Debian6 上通过 apt-get 安装了 nginx。

现在看起来好像要安装乘客并运行`passenger-install-nginx-module`我必须根据 modrails 站点将这两个命令作为 sudo 运行。

问题是我使用 sudo 安装了 rvm 系统范围。现在它似乎不允许 sudo gem 安装。我很难理解 rvm 的所有细节。

例如此链接[http://blog.ninjahideout.com/posts/the-path-to-better-rvm-and-passenger-integration](http://blog.ninjahideout.com/posts/the-path-to-better-rvm-and-passenger-integration)建议通过以下方式更新 rvm

> rvm 更新 --head

**这给出了错误：**

> 错误：rvm 更新已被删除。请参阅 'rvm get' 和 rvm 'rubygems' CLI API

所以一件事会导致另一个错误，而另一件事需要升级等。我真的很想在这些问题上得到一些帮助：

*   在服务器上应该使用 sudo 安装 rvm 吗？
*   如果不是，我将无法运行乘客模块安装命令。
*   rvm 网站强烈反对在 [https://rvm.io/rubies/rubygems/](https://rvm.io/rubies/rubygems/)上进行系统范围的安装。当它在系统范围内安装时，您如何运行 sudo gem install Passenger？

我觉得我在这里处于第 22 阶段的情况。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:56:44.563

你永远不应该使用`sudo`RVM，它会丢失所有的 shell 变量——包括那些需要 RVM / Ruby 正常工作的变量。

要更新 RVM，请运行：

```
rvm get head
rvm reload 
```

要在安装 RVM 时安装 gems，`/usr/local/rvm`请确保您的用户在**rvm**组中，您可以使用以下方法进行验证：

```
id 
```

这是[使用 RVM 和 SM 框架的最佳实践部署](https://rvm.io/deployment/best-practices/)。

# flash - 在 wmode:window 中将元素放在 Flash 视频的顶部

> ID：11727071
> 
> 赞同：0
> 
> 时间：2012-07-30T18:06:07.647
> 
> 标签：flash, youtube, z-index

我一直在寻找一种解决方案，可以在 wmode“窗口”中在 youtube 视频之上分层元素。我意识到解决方法是使用“不透明”或“透明”，但这会导致在速度较慢的计算机上使用这两种方法播放时断断续续，因此对于网站以视频为中心的人来说，这并不是真正的解决方法。例如，我尝试设置 iframe 和菜单的 z-index 和位置，但这并没有改变任何东西。我将 iframe 设置为 200，将菜单设置为 10000000，但没有任何改变。那么这样做有什么诀窍吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:15:20.247

以我的经验，没有。您必须使用 a`wmode`来实现此效果，并且使用`wmode`CPU 会更加密集。

# facebook - FB.Event.subscribe 不适用于 auth.login、auth.logout 和 auth.statusChange

> ID：11727076
> 
> 赞同：1
> 
> 时间：2012-07-30T18:06:18.250
> 
> 标签：facebook, facebook-graph-api, plugins

facebook允许我使用弹出窗口登录，这很好。

但我无法使用 FB.Event.subscribe 捕获任何事件。正如许多论坛提到的那样，我尝试订阅 auth.statusChange。似乎没有任何工作。

甚至，这也行不通。怎么了 ？

```
FB.getLoginStatus(function(response) {
            console.log(response);
            }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T06:31:02.060

终于发现问题了。在 facebook 应用程序设置中，我的应用程序域设置为 localhost（它不接受 127.0.0.1）并且我以 127.0.0.1 访问我的 localhost 并且这产生了问题。

当我开始以 localhost 身份访问该站点时，我能够捕获所有事件。注意这一点。

# java - GWT XY 绘图

> ID：11727078
> 
> 赞同：2
> 
> 时间：2012-07-30T18:06:23.963
> 
> 标签：java, gwt

我正在寻找创建 xy 图的 GWT api/示例。这是我在 powerpoint 中制作的示例图像。将有两个其他图，如下例所示，每个点都可以点击，然后在另一个图上突出显示。有没有办法在 GWT 中使用 java 而不是 javascript...

非常感谢

![在此处输入图像描述](../Images/3dabf5fceffba7156362da93222d0cba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:20:01.650

你需要一个面板。JPanel 如果使用swing，Panel for gwt ...然后你在上面画画。

或者看看这是否有帮助

```
 package graphics;

 import java.awt.*;
 import java.awt.geom.*;
 import java.util.*;

public class GraficPainter
{
public final static Boolean drawMonitor = new Boolean(true);
public static final Stroke line = new BasicStroke();
public static final Stroke dashed = new BasicStroke(1, BasicStroke.CAP_BUTT,
                BasicStroke.JOIN_BEVEL, 1.0f, new float[] { 5.0f, 15.0f }, 0f);

public static void drawGrafic(Graphics2D g2, Point2D start, Point2D dim, boolean logx,
                boolean logy, ArrayList<Double>... lists)
{
    g2.setColor(Color.WHITE);
    g2.fillRect((int) start.getX(), (int) start.getY(), (int) dim.getX(), (int) dim
                    .getY());
    g2.setColor(Color.BLACK);
    g2.drawRect((int) start.getX(), (int) start.getY(), (int) dim.getX(), (int) dim
                    .getY());
    if (lists.length <= 0) return;
    if (lists[0].size() <= 1) return;
    synchronized (drawMonitor)
    {
        double max = Double.NEGATIVE_INFINITY;// 2.0/(Mode.teamNb+1);//Double.NEGATIVE_INFINITY;
        double min = Double.POSITIVE_INFINITY;
        final int PODEOCI = 10;
        for (ArrayList<Double> list : lists)
            for (double d : list)
            {
                max = Math.max(max, d);
                min = Math.min(min, d);
            }
        g2.translate(start.getX(), start.getY());
        Path2D[] paths = new Path2D[lists.length];
        for (int i = 0; i < lists.length; i++)
            paths[i] = new Path2D.Double();
        int maxxx = (true | !logx) ? lists[0].size() : Math.max(16, Integer
                        .highestOneBit(lists[0].size()) << 1);
        double dx = dim.getX() / scaleX(maxxx, 1, logx);
        double dy = dim.getY()
                        / (scaleY(max, 1, min, logy) - scaleY(min, 1, min, logy));
        // pochetak X
        g2.drawString("0", 0, (int) (1.04 * dim.getY()));
        // podeoci X
        if (logx)
        {
            g2.setStroke(dashed);
            for (int i = 10; i * 1.1 < maxxx; i *= 10)
            {
                int pozx = (int) scaleX(i, dx, logx);
                g2.drawString(i + "", pozx - 10, (int) (1.04 * dim.getY()));
                g2.drawLine(pozx, 0, pozx, (int) dim.getY());
            }
            for (int i = 20; i * 1.1 < maxxx; i *= 10)
            {
                int pozx = (int) scaleX(i, dx, logx);
                g2.drawString(i + "", pozx - 10, (int) (1.04 * dim.getY()));
                g2.drawLine(pozx, 0, pozx, (int) dim.getY());
            }
            for (int i = 5; i * 1.1 < maxxx; i *= 10)
            {
                int pozx = (int) scaleX(i, dx, logx);
                g2.drawString(i + "", pozx - 10, (int) (1.04 * dim.getY()));
                g2.drawLine(pozx, 0, pozx, (int) dim.getY());
            }
            g2.setStroke(line);
        } else
        {
            for (int i = 1; i < PODEOCI; i++)
                g2.drawString(i * maxxx / PODEOCI + "", (int) scaleX(i
                                * maxxx / PODEOCI, dx, logx),
                                (int) (1.04 * dim.getY()));
        }
        // kraj X
        g2.drawString(maxxx + "", (int) (0.98 * dim.getX()), (int) (1.04 * dim
                        .getY()));
        // ------------------
        // pochetak Y
        g2.drawString(String.format("%5.3f", -min), -50, (int) (0.01 * dim.getY()));
        // podeoci Y
        for (int i = 1; i < PODEOCI; i++)
            g2.drawString(String.format("%5.3f", (-min + i * (-max + min)
                            / PODEOCI)), -50, (int) scaleY((min + (max - min)
                            * i / PODEOCI), dy, min, logy));
        // kraj Y
        g2.drawString(String.format("%5.3f", -max), -50, (int) (0.99 * dim.getY()));
        for (int i = 0; i < lists.length; i++)
            paths[i].moveTo(scaleX(0, dx, logx), scaleY(lists[i].get(0), dy,
                            min, logy));
        int step = Math.max(1, Integer.highestOneBit(lists[0].size()) >> 8);
        for (int k = 0; k < lists.length; k++)
            for (int i = 1; i < lists[k].size(); i += (i > 128) ? step : 1)
                paths[k].lineTo(scaleX(i, dx, logx), scaleY(
                                lists[k].get(i), dy, min, logy));
        for (int k = lists.length - 1; k >= 0; k--)
        {
            g2.setColor(colors[k]);
            g2.draw(paths[k]);
        }
        g2.translate(-start.getX(), -start.getY());
        // System.out.println(min + " " + max);
    }
}

public static final Color[] colors = new Color[] { Color.BLUE, Color.RED,
                new Color(100, 100, 100), new Color(0, 170, 0), Color.PINK };

private static double scaleX(double x, double dx, boolean logx)
{
    return logx ? scaleLogShift(x, dx, 10) : scaleLin(x, dx);
}

private static double scaleY(double y, double dy, double min, boolean logy)
{
    return logy ? scaleLogShift(y, dy, 10) : scaleLin(y - min, dy);
}

private static double scaleLog(double v, double dv)
{
    return Math.log(v + 1) * dv;
}

private static double scaleLogShift(double v, double dv, double shift)
{
    return (Math.log(v + 1 + shift) - Math.log(shift + 1)) * dv;
}

private static double scaleLin(double v, double dv)
{
    return v * dv;
}
} 
```

希望是的；）

在您的主应用程序中使用它...

```
 @Override
public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.setBackground(Color.WHITE);

    GraficPainter.drawGrafic(g2, new Point2D.Double(800, 50), new Point2D.Double(300, 400), false, false, freal,findiv);        

    if (end) {                  
        simulacija.repaint();
    }
} 
```

这确实是旧代码（大学时代），但它工作得非常整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:40:45.357

您可以尝试使用[gFlot](http://code.google.com/p/gflot/)库在 GWT 中构建图表。对我来说，它比 Google Charts API 更简单，它为构建 XY 图表提供了广泛的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:26:15.830

[Google Charts API](https://developers.google.com/chart/interactive/docs/gallery) GWT 小部件可能适合您的需要。特别是，您可以修改[散点图](https://developers.google.com/chart/interactive/docs/gallery)以满足您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T02:48:48.883

[raphael4gwt](http://code.google.com/p/raphael4gwt/)支持多种图表类型 (http://g.raphaeljs.com/)。还可以让您非常轻松地绘制您需要的任何基于矢量图的图形。它基于 SVG 和 IE<9.0 上的 VML，因此您不应该遇到浏览器问题。

# sql - where 子句中的列“关键字”不明确

> ID：11727081
> 
> 赞同：-2
> 
> 时间：2012-07-30T18:06:41.490
> 
> 标签：sql

对，我下面的代码用于从 MYSQL 表中获取行，并在用户输入与存储的关键字匹配时显示它们。最近我决定拥有一张长表是愚蠢的，有时，使用相似的关键字，较高的 id 会排在首位。如果我有多个表格，其中包含“新闻”“电影”等特定部分，我应该避免冲突。

```
 <?php
  if( count($terms) == 0){ // If no terms entered, stop.
echo "No Search Terms Entered.";
    }else{      

 // connect
  $connect = mysql_connect("cust-mysql-123-05", "uthe_774575_0001", "rooney08") or   die('Couldn\'t connect to MySQL Server: ' . mysql_error());
    mysql_select_db("theqlickcom_774575_db1", $connect ) or die('Couldn\'t Select the database: ' . mysql_error( $connect ));

/* Query Statement Building - Terms together */
$query = " SELECT * FROM scan WHERE "; 

$terms = array_map('mysql_real_escape_string', $terms);
$i = 0; 
foreach ($terms as $each) {
      if ($i++ !== 0){
            $query .= " AND ";
      }
      $query .= "keywords LIKE '%{$each}%'";
}

$query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
$numrows = mysql_num_rows($query);
if ($numrows > 0) {

      while ($row = mysql_fetch_assoc($query)) {
            $id = $row['id'];
            $title = $row['title'];
            $description = $row['description'];
            $keywords = $row['keywords'];
            $link = $row['link'];

        echo '<h2><a class="ok" href="' . $link . '">' . $title . '</a></h2>' . PHP_EOL;
                    echo '<p class="kk">' . $description . '<br><br><span class="keywords">' . PHP_EOL;            
                    echo '<p><a class="okay" href="' . $link . '">' . $link . '<br><br><span class="keywords">' . PHP_EOL;
                      }
} else {
    /* Query Statement Building - Terms Separate */
    $query = " SELECT * FROM scan WHERE "; 

    $terms = array_map('mysql_real_escape_string', $terms);
    $i = 0; 
    foreach ($terms as $each) {
          if ($i++ !== 0){
                $query .= " OR ";
          }
          $query .= "keywords LIKE '%{$each}%'";
    }

    $query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
    $numrows = mysql_num_rows($query);
    if ($numrows > 0) {

          while ($row = mysql_fetch_assoc($query)) {
                $id = $row['id'];
                $title = $row['title'];
                $description = $row['description'];
                $keywords = $row['keywords'];
                $link = $row['link'];

                echo '<h2><a class="ok" href="' . $link . '">' . $title . '</a></h2>' . PHP_EOL;
                echo '<p class="kk">' . $description . '<br><br><span class="keywords">' . PHP_EOL;            
                echo '<p><a class="okay" href="' . $link . '">' . $link . '<br><br><span class="keywords">' . PHP_EOL;
                  }

    } else {
          echo "No results found for \"<b>{$k}</b>\""; 
    }
}
//disconnect
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:07:33.377

因为`keywords`扫描和新闻表中都有一个字段，而您的`where`子句类似于`where keywords = 'something'`

你应该改变你的过滤器，`where scan.keywords = 'something'`如果那是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:11:28.033

```
$terms = array_map('mysql_real_escape_string', $terms); 

$keywords = join(',', terms);

$query = "SELECT * FROM scan WHERE keywords IN " . $keywords . " UNION ALL SELECT * FROM news WHERE keywords IN " . $keywords; 
```

# git - 如何在`git rm abc.c`之后恢复文件？

> ID：11727083
> 
> 赞同：19
> 
> 时间：2012-07-30T18:06:53.090
> 
> 标签：git, git-rm

我应该删除另一个文件`git rm abc.c`。但是我删错了。我怎样才能恢复它？

现在，当我发布时`git status`，它说

```
deleted:   abc.c 
```

顺便说一句，我现在还有其他未提交的更改。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-30T18:38:25.607

您需要执行两个命令，第一个将“取消暂存”文件（将其从准备提交的文件列表中删除）。然后，您撤消删除。

如果您阅读`git status`命令的输出（在 using 之后`git rm`），它实际上会告诉您如何撤消更改（在每个步骤之后执行 git status 以查看此内容）。

取消暂存文件：

`git reset HEAD <filename>`

恢复它（撤消删除）：

`git checkout -- <filename>`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-30T18:35:46.840

首先，您需要重置`abc.c`索引中的状态：

```
git reset -- abc.c 
```

然后你需要`abc.c`在你的工作树中恢复：

```
git checkout -- abc.c 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-26T05:45:07.513

如果你不小心做了

```
git rm -rf . 
```

并删除所有，你可以恢复它这样做。

```
git status
git reset HEAD .
git checkout -- . 
```

首先`git status`看看你删除了哪些文件。第二次重置 HEAD`git reset HEAD .` 最后取消暂存所有文件，您可以通过执行还原所有文件`git checkout -- .`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-17T19:23:50.067

如果您不小心使用 git delete 命令 'rm' 删除了文件并想要恢复，请使用以下命令：

```
git reset HEAD^<filename> 
```

恢复文件

# matlab - DefaultAxesColorOrder

> ID：11727084
> 
> 赞同：0
> 
> 时间：2012-07-30T18:07:01.987
> 
> 标签：matlab, plot

```
set(0,'DefaultAxesColorOrder',[1 0 0;0 0 1;1 0 1;0 0 0]);
hold('all');
semilogy(Te, iicollfreq(:,P), Te, iecollfreq(:,P), Te, incollfreq(:,P), Te,iTotcollfreq(:,P)) 
```

这是我的 matlab 代码，用于在同一张图上绘制 4 个单独的数据集，由于某种原因，它不会用 4 种不同的颜色绘制所有内容。如果我在最后删除`[0 0 0]`，我得到三个非常好，但我无法显示第四个颜色。有谁知道如何正确绘制这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:40:54.953

你在你的情节中得到了什么？我无法重现您的问题。

你确定你的情节没有重叠或`iTotcollfreq`不会情节（例如它是全部`Inf`或`NaN`）。您还可以通过添加图例或使用绘图工具来检查是否制作了图表。

您是否尝试过使用随机数据来确保不是这种情况？

```
t = 1:10;
f = @(t)(randn(size(t)));
set(0,'DefaultAxesColorOrder',[1 0 0;0 0 1;1 0 1;0 0 0]);
plot(t,f(t), t,f(t), t,f(t), t,f(t));
legend('show'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:14:37.910

您还可以使用以下语法来指定颜色：

```
plot(X1,Y1,LineSpec,...,Xn,Yn,LineSpec) 
```

这是基于[@Egon](https://stackoverflow.com/a/11727591/97160)代码的示例：

```
t = 1:100;
f = @(t) cumsum(randn(size(t)));
plot(t,f(t),'r',  t,f(t),'b', t,f(t),'m', t,f(t), 'k') 
```

甚至更好：

```
h = plot(t,f(t), t,f(t), t,f(t), t,f(t));
set(h, {'Color'},num2cell([1 0 0;0 0 1;1 0 1;0 0 0],2))
legend(h, {'1','2','3','4'}) 
```

![在此处输入图像描述](../Images/ce759c8eef285c7cb607a5d9c4c0d20e.png)

# paypal - DoDirectPayment 方法的 PayPal 交易问题

> ID：11727086
> 
> 赞同：0
> 
> 时间：2012-07-30T18:07:02.560
> 
> 标签：paypal, paypal-sandbox

我在 PayPal 沙箱中创建了两个测试账户（买家和卖家）。然后尝试通过我的简单网络应用程序转账。我正在使用 DoDirectPayment 方法进行汇款。方法返回以下结果：

`Direct Payment Completed Successfully: Array ( [TIMESTAMP] => 2012%2d07%2d30T17%3a27%3a38Z [CORRELATIONID] => 83da0b009d36d [ACK] => Success [VERSION] => 92%2e0 [BUILD] => 3288089 [AMT] => 10%2e00 [CURRENCYCODE] => USD [AVSCODE] => X [CVV2MATCH] => M [TRANSACTIONID] => 0MJ25519PP687260E )`

交易成功完成，但测试账户资金出现问题。我从 1000.00 美元的账户中转了 10.00 美元，但买家账户金额没有改变。所以卖家得到他的 10.00 美元，他的总和是（200.00 美元 + 10.00 美元 - 费用）。当我以卖家身份登录时，我可以看到带有转账操作的交易历史。但是当我以买家身份登录时，交易历史是空的。
为了检查交易细节，我使用了 GetTransactionDetails 方法。结果如下：有

`GetTransactionDetails Completed Successfully: Array ( [RECEIVERBUSINESS] => lukina_1343245948_biz%40gmail%2ecom [RECEIVEREMAIL] => lukina_1343245948_biz%40gmail%2ecom [RECEIVERID] => 7YKBZRV887SUC [PAYERID] => AJPWLMQCND7SG [PAYERSTATUS] => unverified [COUNTRYCODE] => US [ADDRESSOWNER] => PayPal [ADDRESSSTATUS] => None [SALESTAX] => 0%2e00 [SHIPAMOUNT] => 0%2e00 [SHIPHANDLEAMOUNT] => 0%2e00 [TIMESTAMP] => 2012%2d07%2d30T17%3a27%3a40Z [CORRELATIONID] => 56291b407d388 [ACK] => Success [VERSION] => 92%2e0 [BUILD] => 3386080 [FIRSTNAME] => Joe [LASTNAME] => Bell [TRANSACTIONID] => 0MJ25519PP687260E [RECEIPTID] => 3093%2d6316%2d6806%2d7055 [TRANSACTIONTYPE] => webaccept [PAYMENTTYPE] => instant [ORDERTIME] => 2012%2d07%2d30T17%3a27%3a37Z [AMT] => 10%2e00 [FEEAMT] => 0%2e59 [TAXAMT] => 0%2e00 [CURRENCYCODE] => USD [PAYMENTSTATUS] => Completed [PENDINGREASON] => None [REASONCODE] => None [PROTECTIONELIGIBILITY] => Ineligible [PROTECTIONELIGIBILITYTYPE] => None [L_QTY0] => 1 [L_TAXAMT0] => 0%2e00 [L_CURRENCYCODE0] => USD )`

什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:47:59.863

在沙盒模式下，买家账户不会提取交易中的资金。它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:52:30.363

使用`DoDirectPayment`API，您可以直接向信用卡收费。即使这张信用卡恰好附加到一个有效的 PayPal 账户，它也不会显示在该账户的交易历史中。

这是设计使然。如果您想从某人的 PayPal 账户中扣款（因此不是直接从信用卡中扣款），您可以使用[PayPal Express Checkout](https://www.x.com/developers/paypal/products/express-checkout)。

# javascript - NaN 作为函数结果而不是必要整数的问题

> ID：11727088
> 
> 赞同：0
> 
> 时间：2012-07-30T18:07:08.293
> 
> 标签：javascript, jquery, html, casting

这篇文章是我之前关于 JS 跨度值的文章的延续。在下面的几行中，当我在 Chrome 中打开我的 Javascript 控制台时，我看到我的值接近标签的关闭。假设它们分别是 20 和 10。但是，这些值不在实际的 html 代码中（如下所示）。在我的 javascript 函数中，我只是试图“提取”跨度值，将它们分开，然后返回一个值。我不断得到“NaN”作为我的结果。我是否需要在某处进行类型转换以使函数返回数值？

**注意：值是从历史学家“PI”中读取的**

```
<span id ="LineSpeedGE" class='PIData' data-tag='G2LineSpeedGE'></span> (value of 20)

<span id ="AimPsSpd"    class='PIData' data-tag='G2rCurrentAimPsSpd'></span> (value of 10) 
```

JS功能：

```
 function divide(n1,n2)
 { ans = n1/n2;
     document.write(" "+ans+"<BR>");    
     return ans;
 }

 var a = parseInt($("LineSpeedGE.PIData[data-tag]").data("tag"), 10);
 var b = parseInt($("AimPsSpd.PIData[data-tag]").data("tag"), 10);

divide (a, b); 
```

结果我得到了 NaN 而不是预期的“2”。如果我将常规整数插入变量中，则实际除法很好。我似乎无法“捕获”在我的 html 代码中不可见的跨度的实际值。我怀疑数据类型发生冲突？

这是我原始帖子的链接：[将跨度值存储到 javascript 变量](https://stackoverflow.com/questions/11690632/storing-a-span-value-into-a-javascript-variable)中以供参考，如果这看起来很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:10:19.433

`G2LineSpeedGE`不是数字，也不`G2rCurrentAimPsSpd`是。

`<span id ="LineSpeedGE" class='PIData' data-tag='42'></span>`将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:12:10.840

首先，您的选择器是错误的。

```
$("LineSpeedGE.PIData[data-tag]") 
```

这将查找名为`LineSpeedGE`( `<LineSpeedGE/>`) 的元素。你可能想要：

```
$("#LineSpeedGE.PIData[data-tag]") 
```

`#`使其搜索 ID（如果您按 ID 搜索，则`.PIData[data-tag]`没有必要）。

此外，这些`data-tag`值不是数字。它们是`G2LineSpeedGE`and `G2rCurrentAimPsSpd`，那些不是数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:12:35.637

您的选择器错误，因此您没有返回任何元素。

```
$("LineSpeedGE.PIData[data-tag]") 
```

它缺少`#`，因此您正在寻找一个名为 LineSpeedGE 的元素，而不是一个 id。

```
$("#LineSpeedGE.PIData[data-tag]") 
```

同样的事情适用于`AimPsSpd`. 缺少`#`

也是`G2LineSpeedGE`一个字符串，而不是一个数字，因此在运行 parseInt 时也会导致 NAN。

# wpf - IDataErrorInfo 组合框

> ID：11727090
> 
> 赞同：0
> 
> 时间：2012-07-30T18:07:27.740
> 
> 标签：wpf, idataerrorinfo

我的客户模型如下。客户模型包含验证属性

**客户模型.cs**

```
[IsRequired()]
CustomerID - Int;
[IsRequired()]
CustomerName - String; 
```

**CustomerViewModel 包含以下 2 个属性** 1\. CustomerModel 的 ObservableCollection （这是下拉列表的绑定 Items 源） 2\. 属性返回 CustromerModel 对象作为 Selected Item（绑定到 SelectedItem）

**我的问题：** 我如何提供`ValidatesOnDataErrors=true`组合框？

我需要在 CustomerViewModel 中的 CustomerModel 属性上编写验证属性吗？

请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:16:35.043

IDataErrorInfo 是一种特定于类型的验证实现（与特定于实例相比）。最好使用 ValidationRules。此链接应该有助于如何实施 ValidationRules：http: [//msdn.microsoft.com/en-us/library/system.windows.data.binding.validationrules.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.validationrules.aspx)

# sql - SQL Server 2005 无法创建关系，因为它与自身冲突（？）

> ID：11727091
> 
> 赞同：1
> 
> 时间：2012-07-30T18:07:32.410
> 
> 标签：sql, sql-server, sql-server-2005

考虑下表（省略了不必要的字段）和我试图创建的关系：

```
 Contractor__c               |Task                 |Account
|----------------------------|---------------------|---------------|
|Contractor__c NCHAR(18) NULL|WhatId NCHAR(18) NULL|Id NCHAR(18) PK|
|Id            NCHAR(18) PK  |                     |               |

 FK_Contractor__c_Account
|--------------------------------------|
|PK        |FK                         |
|----------|---------------------------|
|Account.Id|Contractor__c.Contractor__c|

 FK_Task_Contractor__c
|----------------------------|
|PK              |FK         |
|----------------|-----------|
|Contractor__c.Id|Task.WhatId| 
```

听起来和看起来很简单，但是这两种关系都无法保存到数据库中，并且我都收到以下错误：

> 无法创建关系“FK_Contractor__c_Account”。ALTER TABLE 语句与 FOREIGN KEY 约束“FK_Contractor__c_Account”冲突。冲突发生在数据库“Contractors”、表“dbo.Account”、列“Id”中。
> 
> 无法创建关系“FK_Task_Contractor__c”。ALTER TABLE 语句与 FOREIGN KEY 约束“FK_Task_Contractor_c *”冲突。冲突发生在数据库“Contractors”、表“dbo.Contractor* _c”、“Id”列中。

我理解这些消息，因为它无法创建关系，因为它与存在的同名关系冲突，即使实际上没有。有人可以告诉我这里发生了什么吗？

对于任何关心的人，我使用的是 SQL Server 2005 SP4 (9.0.5057)，并且这些表是使用 DBAmp 从 Salesforce 链接服务器创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:09:47.917

此错误消息意味着某些数据不满足约束。这并不意味着发生了一些基于模式的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T13:26:11.983

我遇到了同样的问题...我进入我的主表，在三个提供下拉列表的表中找到了一个 0 id...我将 0 更改为表中的一个值，然后 wala...没有进一步的问题...

# java - NullPointerException 上传文件（struts2 + hibernate）

> ID：11727094
> 
> 赞同：0
> 
> 时间：2012-07-30T18:07:42.580
> 
> 标签：java, hibernate, struts2, websphere

我得到一个空指针异常，似乎无法解决它。我正在使用 Struts2 和休眠。

在我的 ProfileAction 中：

```
public String profilePhoto() {
    String pathToSaveInDB = null;
    String uploadFolder = null;
    String filePath = null;

    try {
        uploadFolder = "profile_pic";
        filePath = servletRequest.getSession().getServletContext().getRealPath("/") + uploadFolder;
        System.out.println("Server path:" + filePath);
        File fileToCreate = new File(filePath, this.userImageFileName);

        System.out.println(this.userImageFileName);
        System.out.println(this.userImage);

        pathToSaveInDB = uploadFolder + "/" + this.userImageFileName;

        FileUtils.copyFile(this.userImage, fileToCreate);

        System.out.println("user id: " + getId());
        System.out.println("photo path: " + pathToSaveInDB);

    } catch (IOException e) {
        e.printStackTrace();
    }
    profileDAO.updateProfilePhoto(Long.parseLong("1"), "test"); <==== just testing
    return SUCCESS;

} 
```

我的个人资料DAOImpl：

```
@Override
public void updateProfilePhoto(Long id, String path) {

    String SQL_QUERY = "update Profile set ProfilePhotoPath = :path" +
        " where UserId = :id";
    try {
        System.out.println(SQL_QUERY);
        Query query = session.createQuery(SQL_QUERY);
query.setParameter("id", id);
query.setParameter("path", path);

        int result = query.executeUpdate();
        System.out.println(result);
    } catch (Exception e) {
        transaction.rollback();
        e.printStackTrace();
    } 
} 
```

我的表格：

```
<s:form action="profilePic" method="post" enctype="multipart/form-data">
            <label for="userImage">Profile Avatar:</label> <br />
            <s:file name="userImage" label="User Image" />
            <s:set name="userId" value="#session.User.id"/>
            <s:hidden name="id" value="%{#userId}" />
            <s:submit value="Upload" />
        </s:form> 
```

错误：

```
java.lang.NullPointerException
com.fotoalbum.dao.ProfileDAOImpl.updateProfilePhoto(ProfileDAOImpl.java:95)
com.fotoalbum.web.ProfileAction.profilePhoto(ProfileAction.java:89)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
java.lang.reflect.Method.invoke(Method.java:611)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:320)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:320)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 
```

该错误特别指出`profileDAO.updateProfilePhoto(Long.parseLong("1"), "test");`在我的 ProfileAction 和`transaction.rollback();`ProfileDAOImpl 中是原因..提前感谢您的帮助:)

如果您需要我发布更多我的代码，请告诉我。干杯~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:22:33.983

我认为你的交易是空的。你从哪里开始交易？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:09:29.877

我认为你的拦截器没有配置好

我遇到了这种问题并通过以下代码清除了.....

行动方法：

```
public String execute() {

    try {
        String filePath = servletRequest.getSession().getServletContext().getRealPath("/");
        System.out.println("Server path:" + filePath);
        File fileToCreate = new File(filePath, this.userImageFileName);

        FileUtils.copyFile(this.userImage, fileToCreate);
    } catch (Exception e) {
        e.printStackTrace();
        addActionError(e.getMessage());

        return INPUT;
    }
    return SUCCESS;
} 
```

struts.xml：

```
 <action name="userImage">
        class="FileUploadAction">

        <interceptor-ref name="fileUpload">

        <param name="maximumSize">2097152</param>

        <param name="allowedTypes">

        image/png,image/gif,image/jpeg,image/pjpeg

        </param>

        </interceptor-ref>

        <interceptor-ref name="defaultStack"></interceptor-ref>

        <result name="success">SuccessUserImage.jsp</result>

        <result name="input">UserImage.jsp</result> 
```

# perl - Perl：打开管道进行写入，但程序没有“等待”STDIN

> ID：11727095
> 
> 赞同：1
> 
> 时间：2012-07-30T18:07:57.863
> 
> 标签：perl, pipe, stdout, stdin

我正在尝试从 perl 脚本运行程序。我将 STDOUT 和 STDERR 重定向到两个不同的文件。我正在运行的程序要求输入我尝试打印到进程句柄的密码，但这不起作用，因为程序会立即打印一个身份验证错误，警告我我没有向 STDIN 写入任何内容。

我使用的代码与此类似：

```
my $s = qq(some_program > someprogram.out 2> someprogram.err);
open(my $f, "|$s") or die "Couldn't run program: $! $?";
# print `cat someprogram.out`; # An error has already been printed here!
print $f "password\n";
close $f or die "$!: $?"; 
```

我已经在 perl 调试器中运行了它，并注意到当调试器运行 open 行时，我可以运行注释掉的打印行并且错误已经在输出文件中。

那么，我忘记做什么才能使它起作用？我如何告诉 open “等待 STDIN”？

- -更新！

我在命令行中做了这样的测试：

```
echo password | some_program 
```

并打印了身份验证错误。所以看起来**some_program**实际上不是从 STDIN 读取，而是从 tty 读取。

有没有办法打印到 tty 以便程序可以从 Perl 中读取密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:29:27.013

考虑`some_program`是一个在其命令行上接受密码的 bash 脚本（Shell），这可以使用`system`perl 中的调用来完成。系统调用，即 Perl 中的程序执行不会因为密码而停止，最好的办法是在使用系统调用调用程序之前询问用户密码。使用反引号执行系统调用，如下所示；

```
my $outfile="/path/to/someprogram.out";
my $errfile="/path/to/someprogram.err";
print "Enter password:\n";
$passwd=<>;
print "some_program $passwd\n";
`some_program $passwd > $outfile 2> $errfile`; 
```

或使用`system();`

```
my $outfile="/path/to/someprogram.out";
my $errfile="/path/to/someprogram.err";
print "Enter password:\n";
$passwd=<>;
my $command="some_program $passwd > $outfile 2> $errfile";
print "$command\n";
system($command); 
```

# git - git diff 看看合并会引入什么

> ID：11727102
> 
> 赞同：4
> 
> 时间：2012-07-30T18:08:17.910
> 
> 标签：git, version-control, merge, git-merge

所以我和一个朋友一直在做一个项目。大多数时候合并是无痛的，因为我们通常在不同的领域工作。

最近，我们越来越多地遇到彼此，造成令人讨厌的合并（截止日期）。

所以我们开始研究方法来看看合并会做什么。我找到了一种使用 git diff 的方法：

```
git diff mybranch...hisbranch 
```

这给出了很好的结果。问题是，因为它使用了最后一个共同的祖先，并且那个祖先越来越远，所以合并中有很多垃圾在我们的任何一个分支中都没有改变。

所以我想知道有没有一种方法可以准确地可视化合并会做什么。

我试过了：

```
git diff $(git-merge mybranch hisbranch) hisbranch 
```

这似乎工作正常，但我想以另一种方式可视化合并，所以我尝试了：

```
git diff $(git-merge hisbranch mybranch) mybranch 
```

但在这种情况下`git-merge: command not found`

有谁知道获得两个分支差异的好方法，显示合并会引入什么？也许突出冲突？

如果没有，是否有任何可视化工具允许手动进行提交，因此可以选择最好的代码版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T20:31:13.577

还有其他方法可以可视化会发生什么，但我发现最简单的是`git merge --no-commit`. 从手册页：

```
--commit, --no-commit
Perform the merge and commit the result. This option can be used to override --no-commit.

With --no-commit perform the merge but pretend the merge failed and do not autocommit, to give the user a chance to inspect and further tweak the merge
result before committing. 
```

基本上，我只是发布`git merge --no-commit <branch>`并检查结果。如果我不喜欢它们，我会发出`git merge --abort`，或者如果我想提交合并，我会正常进行`git commit`.

# c++ - 为什么我的变量从 1 变为 2，然后又变为 1？

> ID：11727105
> 
> 赞同：0
> 
> 时间：2012-07-30T18:08:24.353
> 
> 标签：c++, ifstream, ofstream, gettickcount

我一直在创建一个空闲程序，以在鼠标和键盘处于非活动状态时以分钟为单位进行计数。这是我到目前为止所拥有的：

```
using namespace std;

while(true)
{
    GetLastInputInfo(&last_info);
    tickCount = GetTickCount();
    int minutes = (tickCount - last_info.dwTime) / 60000;
    count++;

    if((minutes >= 1) && (count%3000==0))
    {
        ifstream in("in.txt");
        ofstream out("out.txt");
        float sum;
        in >> sum;
        sum = sum++;
        out << sum;
        out << in.rdbuf();
        out.close();
        in.close();
    }
    std::cout << "Idle Time: " << minutes << " minutes." << std::endl;
}
} 
```

当我让它空闲一分钟时，“sum”说它是 1，然后我关闭程序并再次打开它一分钟，“sum”说它是 2。我关闭程序并再打开一分钟，然后它恢复到 1。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:09:19.533

此行是未定义的行为：

```
sum = sum++; 
```

您不能在序列点之间多次修改变量。你应该只写这个来增加`sum`变量：

```
sum++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:47:30.957

这就是我认为会发生的事情。

in.txt 的内容 1

out.txt 的内容 2 1 2 1

当您将值从 in 读入 sum 时，sum = 1; sum++ 发生，sum 变为 2。

2进入out.txt；然后 1 进入 out.txt。然后你打印“空闲时间”。由于 sum 始终初始化为 1，因此它不断地循环。

尝试注释掉这一行

```
 out << in.rdbuf(); 
```

或以更大的范围声明总和（在文件读取循环之外）

而且你似乎从来没有增加分钟......

编辑：让我们试试这个......

```
if((minutes >= 1) && (count%3000==0))
{
    time_t date = time(NULL); //store the time in our date
tm* timePtr = localtime(&t); //now we can extact dates out of it

    int day = timePtr->tm_mday;
    int month = timePtr->tm_mon;
    int year = 1900 + timePtr->tm_year; //trust me, you gotta 1900 to it.
    char* filename;
    sprintf(filename, "log-%d-%d-%d.txt", day, month, year);
    ifstream in(filename);
 //   float sum; why is this float when we do sum++ below?
    int sum;
    in >> sum;
    sum++;
    in.close();
    ofstream out(filename);
    out << sum;
    out.flush();
    out.close();
} 
```

# c# - 将 Visual Basic 循环转换为 C# 循环

> ID：11727108
> 
> 赞同：-3
> 
> 时间：2012-07-30T18:08:33.610
> 
> 标签：c#, .net

如何将其转换为 C#？

```
For i = IBase36.Length - 1 To 0 Step i - 1

Next 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:10:30.247

```
for (int i = IBase36.Length -1; i >=0; i--)
{
    //Your Treatment
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T18:10:31.817

试试这个：

```
for (int i = IBase36.Length -1; i >=0; i--)
{
    //Do stuff
} 
```

# c# - 动态/上下文敏感的构造函数注入

> ID：11727110
> 
> 赞同：1
> 
> 时间：2012-07-30T18:08:38.310
> 
> 标签：c#, dependency-injection, unity-container, ninject-2, constructor-injection

我想注入构造函数参数 IActionLogger actionLogger，但希望其他参数 largeBucket、smallBucket 和 amountToRetrieve 是上下文相关的（不确定这是否是正确的术语）。

**问题：**

我是否应该将这些构造函数参数设为自动属性并将 IActionLogger actionLogger 参数保留在构造函数中？

基本上，计算会根据 largeBucket、smallBucket 和 amountToRetrieve 变量而有所不同？我将这些变量放在构造函数中，因为我需要事先进行一些设置。

```
public class BucketActionsHandler : IBucketActionsHandler
{
    private List<IAction> _actions = new List<IAction>();
    private Bucket _largeBucket;
    private Bucket _smallBucket;
    private IActionLogger _actionLogger;
    private int _amountToRetrieve;

    public BucketActionsHandler(Bucket largeBucket, Bucket smallBucket, int amountToRetrieve, IActionLogger actionLogger)
    {
        _largeBucket = largeBucket;
        _smallBucket = smallBucket;
        _amountToRetrieve = amountToRetrieve;
        _actionLogger = actionLogger;

        _actions.Add(new LastAction(largeBucket, smallBucket, amountToRetrieve));
        _actions.Add(new EmptySmallerBucketAction(largeBucket, smallBucket, amountToRetrieve));
        _actions.Add(new EmptyLargeBucketAction(largeBucket, smallBucket, amountToRetrieve));
        _actions.Add(new FillLargeBucketAction(largeBucket, smallBucket, amountToRetrieve));
        _actions.Add(new FillSmallBucketAction(largeBucket, smallBucket, amountToRetrieve));
        _actions.Add(new TransferToLargeBucketAction(largeBucket, smallBucket, amountToRetrieve));
        _actions.Add(new TransferToSmallBucketAction(largeBucket, smallBucket, amountToRetrieve));
    }

    private IAction GetNextAction()
    {
        foreach (var action in _actions)
        {
            if (action.SatisfiedCondition())
            {
                return action;
            }
        }
        return null;
    }

    public void CalculateSteps()
    {
        IAction nextAction;
        do
        {
            nextAction = GetNextAction();
            nextAction.Execute();
            if (nextAction == null)
            {
                throw new InvalidOperationException("No valid action available");
            }
        } while(!(nextAction is LastAction));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:50:13.360

> 我是否应该将这些构造函数参数设为自动属性

不，因为这将允许您在注入或创建该服务后对其进行更改，这是一件坏事，因为服务应该是无状态的，或者至少它们的内部状态更改不应影响应用程序的正确性。当您更改服务的状态时，应用程序代码会强制此服务为临时服务（每次请求时都应注入新实例），而应用程序不应该关心。这会将生命周期服务的控制和决策移出[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)（应用程序的启动路径），这会阻碍可维护性。

相反，使用工厂：

```
public interface IBucketActionsHandlerFactory
{
    IBucketActionsHandler Create(
        Bucket largeBucket,
        Bucket smallBucket,
        int amountToRetrieve);
} 
```

您可以将此工厂注入需要它的服务中，并让该服务提供适当的上下文变量：

```
public class SomeService
{
    private IBucketActionsHandlerFactory factory;
    private IBucketRepository repository;

    public SomeService(IBucketActionsHandlerFactory factory,
        IBucketRepository repository)
    {
        this.factory = factory;
        this.repository = repository;
    }

    public void Handle(int amountToRetrieve)
    {
        var largeBucket = this.repository.GetById(LargeBucketId);
        var smallBucket = this.repository.GetById(SmallBucketId);

        var handler = this.factory.Create(largeBucket, smallBucket,
            amountToRetrieve);

        handler.CalculateSteps();
    }
} 
```

工厂将控制创建新的`IBucketActionsHandler`实现：

```
public class BucketActionsHandlerFactory
    : IBucketActionsHandlerFactory
{
    private Container container;

    public class BucketActionsHandlerFactory(
        Container container)
    {
        this.container = container;
    }

    public IBucketActionsHandler Create(
        Bucket largeBucket, Bucket smallBucket,
        int amountToRetrieve)
    {
        return new BucketActionsHandler(
            largeBucket, smallBucket, amountToRetrieve,
            this.container.Get<IActionLogger>());
    }
} 
```

您`BucketActionsHandlerFactory`应该是[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的一部分，在这种情况下，可以将容器/内核注入该工厂（它是 DI 基础设施的一部分）。

这样，应用程序不知道它得到什么类型的处理程序，但仍然能够`BucketActionsHandler`在其当前上下文中得到一个。

或者，您可以为方法提供`largeBucket`、`smallBucket`和`amountToRetrieve`变量`CalculateSteps`。这使您无需工厂：

```
public class BucketActionsContext
{
    public Bucket LargeBucket { get; set; }
    public Bucket SmallBucket { get; set; }
    public int AmountToRetrieve { get; set; }
}

public class BucketActionsHandler : IBucketActionsHandler
{
    private IActionLogger _actionLogger;

    public BucketActionsHandler(IActionLogger actionLogger)
    {
        _actionLogger = actionLogger;
    }

    public void CalculateSteps(
        BucketActionsContext context)
    {
        IAction nextAction;
        do
        {
            nextAction = this.GetNextAction(context);

            if (nextAction == null)
            {
                throw new InvalidOperationException(
                    "No valid action available");
            }

            nextAction.Execute();
        } 
        while(!(nextAction is LastAction));
    }

    private IAction GetNextAction(
        BucketActionsContext context)
    {
        return (
            from action in this.GetActions(context)
            where action.SatisfiedCondition()
            select action)
            .FirstOrDefault();
    }

    private IEnumerable<IAction> GetActions(
        BucketActionsContext context)
    {
        Bucket largeBucket = context.LargeBucket;
        Bucket smallBucket = context.SmallBucket;
        int amountToRetrieve = context.AmountToRetrieve;

        yield return new LastAction(largeBucket, smallBucket, amountToRetrieve);
        yield return new EmptySmallerBucketAction(largeBucket, smallBucket, amountToRetrieve);
        yield return new EmptyLargeBucketAction(largeBucket, smallBucket, amountToRetrieve);
        yield return new FillLargeBucketAction(largeBucket, smallBucket, amountToRetrieve);
        yield return new FillSmallBucketAction(largeBucket, smallBucket, amountToRetrieve);
        yield return new TransferToLargeBucketAction(largeBucket, smallBucket, amountToRetrieve);
        yield return new TransferToSmallBucketAction(largeBucket, smallBucket, amountToRetrieve);    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:30:39.153

您可以手动解析`IActionLogger`并将其手动注入构造函数，同时适当地传递其他参数
*，或者*
您可以在解析时进行依赖覆盖（这就是它在 Unity 中的调用方式），`BucketActionsHandler`这将强制它使用传递的值作为注入的依赖项。

# image-processing - 检测页面是否在网络摄像头的框架中

> ID：11727111
> 
> 赞同：0
> 
> 时间：2012-07-30T18:08:40.010
> 
> 标签：image-processing, opencv, vision

我想扫描一些文档，并且想知道页面何时在相机的“框架中”。我的意思是从相机到页面文档的最佳距离（但不剪切任何文档）。我想循环运行检测程序，以便用户在扫描前校准每个文档的相机距离。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:20:23.757

您可以在图像上应用 OpenCV findContour 来检测文档边缘。为此，您需要确定区分背景和文档的适当阈值。

然后使用轮廓信息，您可以判断文档是否触及图像的限制。

# python - 将动态信息打印到控制台

> ID：11727112
> 
> 赞同：1
> 
> 时间：2012-07-30T18:08:40.803
> 
> 标签：python, windows-console

我有一个小型控制台程序，需要打印几行信息，这些信息在运行应用程序时会动态更新。虽然要打印的数据不多，但它适合一行，我只使用了`'\r'`，但是如何处理多行呢？

最好的（最简单的？通用的？）方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:02:12.060

您可以在文件上打印信息

```
myFile = open('nameFile','w')
myFile.write(data1)
... 
myFile.write(data2)
myFile.write('\n') 
```

并在需要时冲洗：

```
myFile.flush() 
```

你可以通过写 '\n' 得到一个新行。

如果你继续写，你也可以刷新标准输出：

```
import sys
sys.stdout.flush() 
```

当你需要它时，你会得到一个带有 '\n' 的换行符，或者在每次打印结束时省略逗号。

# javascript - javascript正则表达式，无法使+表达式工作

> ID：11727114
> 
> 赞同：1
> 
> 时间：2012-07-30T18:08:44.640
> 
> 标签：javascript, regex

我正在尝试按照 CSS 格式从字符串中提取数字，如下所示：

```
str == "50.1px"

sz = str.match(/+([0-9]|\.)/) 
```

除非我将其转义，否则它会抱怨该`+`表达式，但随后`sz`为空。如果我删除`+`它，它只返回第一个数字。我完全被难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:10:06.373

你应该只使用Javascripts `.parseFloat()`。它会自动去除尾随字符。

```
sz = parseFloat('50.1px');  // 50.1 
```

医疗器械网络：

> parseFloat 解析它的参数，一个字符串，并返回一个浮点数。如果遇到符号（+ 或 -）、数字 (0-9)、小数点或指数以外的字符，则返回该点之前的值并忽略该字符和所有后续字符。允许前导和尾随空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:26:33.337

您可以使用`parseFloat`

或者

您可以使用`jQuery`'s`.height()`和`.width()`API 来获取所选元素的高度和宽度。这些函数会返回相应的不带 px 后缀的高度宽度。

如果您非常喜欢使用正则表达式，那么这是正确的

```
var pattern = /[0-9.]+/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:10:44.080

您必须将 the`+`放在表达式的末尾，例如：

`([0-9])+`

所以你可以使用：

`sz = str.match(/([0-9.])+/)[0]`

# c++ - 抽象类实例的动态初始化

> ID：11727115
> 
> 赞同：1
> 
> 时间：2012-07-30T18:08:50.937
> 
> 标签：c++, abstract-class

可以说我有以下

```
class Parent {
  protected: 
    virtual void overrideMe() = 0;
}

class ChildA : public Parent {
  protected: 
    void overrideMe() = 0{}
}

class ChildB : public Parent {
  protected: 
    void overrideMe() = 0{}
}

class UtilClass {
  public:
  vector<Parent> planes;
  void compute() {
    Parent& p = planes[0];
  }
} 
```

在这种情况下，我会在 UtilsClass 中的 compute() 中出现错误，即“父级”无法初始化。

我想做的是在 UtilClass 中填充数组“平面”（使用 ChildA 或 childB，即非混合类型）并进行一些计算。

我必须在初始化期间使用指针，还是更好地使用模板？我几乎可以肯定模板的使用不是必需的，因为我想将使​​用限制在 Parent 类的唯一子级。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:11:34.317

`vector<Parent> planes;`没有意义，因为 a`Parent`不存在。这是一个抽象类。您可以拥有一个指针向量，或者更好的是智能指针。

即使`Parent`不是抽象的，对象的向量`Parent`也会受到**对象切片**的影响，这可能不是您想要的，因为它会破坏多态性。

```
class UtilClass {
  public:
  vector<Parent*> planes;
  void compute() {
    Parent& p = *planes[0];
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:13:02.157

你不能拥有

```
 vector<Parent> planes; 
```

因为您的 Parent 类是抽象的，不能被实例化。你需要使用类似的东西

```
 vector<Parent*> planes; 
```

相反，如果您想通过使用这种语法创建派生类对象来获得从 Parent 派生的对象向量

```
 Parent* pNewObject = new ChildB;
 planes.push_back(pNewObject) 
```

# android - Android 中的多层首选项？

> ID：11727117
> 
> 赞同：2
> 
> 时间：2012-07-30T18:09:00.023
> 
> 标签：android, android-listview, android-preferences

现在我有一个 PreferenceActivity 和一个 PreferenceFragment。该活动只定义了 onBuildHeaders，它加载了一个 XML 文件，该文件具有一个根对象的首选项标头，然后是它的几个子标头。每个标题都指向 PreferenceFragment 和一个包含屏幕、类别和首选项的 XML 文件。

问题是，这个系统只有 2 层深。左侧面板上有标题，然后该标题的所有内容都在右侧面板的单个列表中。对于某些标头，只有十几个选项，因此可以正常工作。对于其他标题，有 100 多个首选项，这是相当压倒性的，滚动和扫描，以及设备加载（点击打开和打开之间有明显的延迟。）

有什么办法可以让我拥有多层吗？我认为在左侧，用户将能够通过标题“向下钻取”（主要是我在 iOS 中听到的一个术语，IDK 在 Android 中这个术语有多常见），直到它们达到实际存储偏好的级别和右侧面板上有显示吗？

编写我自己的完全自定义系统似乎可行，但耗时。我希望有人知道一些内置的 API，它们将为我实现 3 或 4 层向下钻取首选项。

在有人问之前，是的，我确实需要有这么多偏好（~500）。我被指示制作首选项菜单并给出项目列表（可以很容易地分为 3 或 4 层。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:58:49.880

这实际上很容易。在根标题打开的 XML 文件中，我添加了一个 Preference 项并将 android:fragment 设置为我的 PreferencesFragment 类。为了阐明我的整个系统是如何工作的，我有：

```
public class MyPreferencesActivity extends PreferenceActivity {
    @Override
    public void onBuildHeaders(List<Header> targer) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    } 
```

preference_headers 然后看起来像这样：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >
    <header android:fragment="com.my.androidapp.MyPreferencesFragment" title="General Category >
        <extra android:name="resource" android:value="preferences_general" />
    </header>
    <header... one per category, different titles and extra values for each.
</preference-headers> 
```

MyPreferenceFragment 看起来像这样：

```
public class MyPreferenceFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String name = getArguments().getString("resource");
        int res = getActivity().getResources().getIdentifier(name, "xml", getActivity().getPackageName());
        addPreferencesFromResource(res); 
```

最后，我的首选项文件如下所示：

```
<PreferenceScreen blah...>
    <Preference android:fragment="com.my.androidapp.MyPreferenceFragment" android:title="Drill Down!">
        <extra android:name="resource" android:value="preferences_subgeneral" />
    </Preference>
    <Preference... whatever I want... I can use ordinary preferences or any number of items that can be selected to drill down further still.
</PreferenceScreen> 
```

希望这可以帮助其他人，尤其是其他有大量偏好的人。

# internet-explorer - 为什么 TextRange.parentElement 返回我范围内 FINAL 元素的父级？

> ID：11727120
> 
> 赞同：1
> 
> 时间：2012-07-30T18:09:10.757
> 
> 标签：internet-explorer, internet-explorer-8, contenteditable, textrange

这是我的 HTML：

```
<ul contenteditable>
  <li>Hi there 1</li>
  <li>HI 2 2 2 2 2</li>
  <ul><li>hi 3</li></ul> <!-- I know it's invalid, it's what document.execCommand('indent') yields -->
  <li> hi 4 hi there people 4 here now </li>
</ul> 
```

（下周你可以在[http://www.webdevout.net/test?06&raw看到它）](http://www.webdevout.net/test?06&raw)

我试图确定当前选择的文本（在 IE8 中）是在一个 LI 内还是跨越多个 LI。当我选择 LI 的一和二的全部，然后在控制台中输入以下`document.selection.createRange().parentElement().innerHTML`内容时，*只返回第二个 LI* (HI 2 2 2 2 2 2) 的内容。

**为什么 TextRange.parentElement 返回范围中的最终元素而不是整个范围的父元素？**

[文档](http://msdn.microsoft.com/en-us/library/ie/ms536654%28v=vs.85%29.aspx)说“如果文本范围跨越多个元素中的文本，则此方法返回包含所有元素的最小元素。” 我的最终目标是确定是否选择了多个 LI；我认为“检查 parentElement().nodeName.toUppercase === "LI"" 是否会这样做，但如果 parentElement() 没有返回 parentElement，我就不能这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T23:57:36.497

我以前见过这种东西，它是 IE 中的一个错误。我在[Rangy](http://code.google.com/p/rangy)库中使用的解决方法是使用三个元素的最内层共同祖先：

*   `parentElement()`TextRange的
*   调用 collapse(true) 后的`parentElement()`TextRange 的
*   调用 collapse(false) 后的`parentElement()`TextRange

这是 Rangy 的代码：

```
/*
 This is a workaround for a bug where IE returns the wrong container
 element from the TextRange's parentElement() method. For example,
 in the following (where pipes denote the selection boundaries):

 <ul id="ul"><li id="a">| a </li><li id="b"> b |</li></ul>

 var range = document.selection.createRange();
 alert(range.parentElement().id); // Should alert "ul" but alerts "b"

 This method returns the common ancestor node of the following:
 - the parentElement() of the textRange
 - the parentElement() of the textRange after calling collapse(true)
 - the parentElement() of the textRange after calling collapse(false)
 */
var getTextRangeContainerElement = function(textRange) {
    var parentEl = textRange.parentElement();

    var range = textRange.duplicate();
    range.collapse(true);
    var startEl = range.parentElement();

    range = textRange.duplicate();
    range.collapse(false);
    var endEl = range.parentElement();

    var startEndContainer = (startEl == endEl) ?
        startEl : dom.getCommonAncestor(startEl, endEl);

    return startEndContainer == parentEl ?
        startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);
}; 
```

# delphi - 将表格放在其他表格之上并始终保持专注

> ID：11727126
> 
> 赞同：2
> 
> 时间：2012-07-30T18:09:45.100
> 
> 标签：delphi, delphi-xe2, pascal

我的 DXE2 应用程序中有 form1 和 form2。Form2 由 Form1 显示。我是否可以将 form2 始终保持在最前面并专注于 Form1？主要思想是，即使用户单击 form1，焦点仍应保持在 form2 上，并且 form2 应闪烁以通知用户需要先关闭 form2 才能使 Form1 处于活动状态。我可以在 Delphi 中实现这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T18:17:03.533

Form2的使用`ShowModal`方法。

# java - 减少 SWT 跨平台 jar 大小

> ID：11727129
> 
> 赞同：0
> 
> 时间：2012-07-30T18:09:53.517
> 
> 标签：java, file, size, swt

我使用我找到的清晰解释制作了一个跨平台 SWT jar：[创建跨平台 Java SWT 应用程序](https://stackoverflow.com/questions/2706222/create-cross-platform-java-swt-application)

不过，这需要我打包每个平台的 jar 以使其独立于系统，使 jar 的总大小约为 40MB。对于进行一些解析的项目来说，这有点疯狂。

我曾尝试使用 ProGuard 来减小文件大小，但这并不是很有用。我可以由此得出结论，原则上不可能使用 SWT 创建小型跨平台应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:37:29.527

好吧，您可以让您的程序不包含 SWT jar，并在安装或首次运行时下载正确的 jar。可能不是一个好主意，但可能。否则，我只会在这种情况下使用 Swing。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T10:48:54.287

可以将所有所需平台之间通用的类文件提取到单独的 jar 中。然后从平台特定的 jar 中删除这些公共类。

在运行时，您将公共 jar 和特定于平台的 jar 添加到 URLClassLoader。

为我工作。

这是我用来重新打包 jar 的旧 shell 脚本，我希望它可以工作：

```
#!/bin/bash

ref=""
for jar in *.jar ; do
    base="${jar%%.jar}"
    mkdir "$base"
    ( cd "$base" ; unzip -o ../${jar} ;)
    ref="$base"
done

mkdir common
echo "Base is ${ref}"

( cd "$ref" ; find . -type f ) | while read f ; do
    fd5=`cat "${ref}/${f}" | md5sum`
    echo "Processing ${f}..."
    same="yes"
    for jar in *.jar ; do
        if [[ "x${same}" == "xyes" ]] ; then
            base="${jar%%.jar}"
            if [[ -f "${base}/${f}" ]] ; then
                fd5b=`cat "${base}/${f}" | md5sum `
                if [[ "x${fd5}" == "x${fd5b}" ]] ; then
                    echo " - same ${fd5} == ${fd5b} in ${base}"
                else
                    echo " - different ${fd5} != ${fd5b} in ${base}"
                    same="no"
                fi
            else
                echo " - missing in ${base}"
                same="no"
            fi
        fi
    done
    if [[ "x${same}" == "xyes" ]] ; then
        echo " - IDENTICAL"
        d=`dirname "${f}"`
        mkdir -p "common/${d}"
        cp "${ref}/${f}" "common/${f}"
        for jar in *.jar ; do
            base="${jar%%.jar}"
            rm "${base}/${f}"
        done
    else
        echo " - DIFFERENT"
    fi
done

mkdir jars
( cd "common" ; jar -cvf "../jars/common.jar" * ; )
for jar in *.jar ; do
    base="${jar%%.jar}"
    ( cd "$base" ; jar -cvfm "../jars/${jar}" META-INF/MANIFEST.MF * ; )
done 
```

SWT 4.3 版生成的 jar 大小为：

```
swt_common.jar 521865
swt_linux_x64.jar 1373413
swt_linux_x86.jar 1222447
swt_macosx_x64.jar 1416943
swt_macosx_x86.jar 1514651
swt_win32_x64.jar 1434927
swt_win32_x86.jar 1421738 
```

还要记住，为 MacOS 做一个 click-jar-to-run 风格的 SWT 应用程序是很棘手的（-XstartOnFirstThread 选项问题）。所以你可能会考虑移除 MacOS 平台。

# wpf - 奇怪的“依赖属性字段丢失”错误

> ID：11727138
> 
> 赞同：1
> 
> 时间：2012-07-30T18:10:08.323
> 
> 标签：wpf, xaml, resharper, dependency-properties

ReSharper 抱怨以下 XAML：

```
 <ControlTemplate.Triggers>
          <MultiTrigger>
            <MultiTrigger.Conditions>
              <Condition Property="IsSelectionBoxHighlighted" Value="true"/>
              <Condition Property="IsDropDownOpen" Value="false"/>
            </MultiTrigger.Conditions> 
```

控件模板当然是用于`ComboBox`. 启用解决方案范围检查后，Resharper 会在 上报告`Dependency property field missing`错误`IsSelectionBoxHighlighted`，但不会在 上报告错误`IsDropDownOpen`。我可能想出的唯一区别`IsSelectionBoxHighlighted`是只读的，但在这种情况下应该有所作为吗？

这是一个 Resharper 错误，还是这里发生了其他事情？这对任何人来说都很熟悉吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:20:35.460

`IsSelectionBoxHighlighted is not a DependencyProperty on the System.Windows.Controls.ComboBox class`，相反，它似乎是 Selected ComboBoxItem 的访问器，其中 DependencyProperty 称为 IsHighlighted。

`The property targeted by your Trigger must be a Dependency Property`

另请查看[此错误报告](http://youtrack.jetbrains.com/issue/RSRP-287481?query=%27a)

# javascript - 如何使用 javascript 客户端设置 Python 服务器端

> ID：11727145
> 
> 赞同：15
> 
> 时间：2012-07-30T18:10:37.067
> 
> 标签：javascript, python

因此，已经有一个 Python 程序设置在我必须构建的控制台上运行。我将使用 Javascript 为应用程序构建一个 Web GUI 界面。我将如何：

一种。在不接触原始代码的情况下处理这个 Python 程序的输入/输出。

湾。通过 Javascript 调用向 Python 程序发送控制台输入。我研究了原始 HTTP 请求/AJAX，但我不确定我将如何将其作为输入发送到 Python 程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:42:50.223

一种。处理程序的输入/输出：[Pexpect](http://www.noah.org/wiki/pexpect)。它相当容易使用，阅读一些随它分发的示例应该可以教会你足够的知识来掌握基础知识。

湾。Javascript接口：

好吧，我使用 gevent，它是内置的 WSGI 服务器。（查看什么是[WSGI 服务器](http://wsgi.readthedocs.org/en/latest/index.html)（[另一个](http://webpython.codepoint.net/wsgi_tutorial)））。我应该注意，这个程序将保持一个状态，因此您可以通过将会话 ID 返回到您的 javascript 客户端并将您的 pexpect 会话存储在全局变量或其他容器中来管理打开的会话，以便您可以完成程序的输入和输出跨多个独立的 AJAX 请求。然而，我把它留给你，因为这并不简单。

我的示例将在单击您选择的某些内容后将 POST 请求放入其中。（它实际上不起作用，因为一些变量没有设置。设置它们。）

以下是相关部分：

```
<!-- JavaScript -->
<script src="jquery.js"></script>
<script type="text/javascript">
function toPython(usrdata){
    $.ajax({
        url: "http://yoursite.com:8080",
        type: "POST",
        data: { information : "You have a very nice website, sir." , userdata : usrdata },
        dataType: "json",
        success: function(data) {
            <!-- do something here -->
            $('#somediv').html(data);
        }});
$("#someButton").bind('click', toPython(something));
</script> 
```

然后服务器：

```
# Python and Gevent
from gevent.pywsgi import WSGIServer
from gevent import monkey
monkey.patch_all() # makes many blocking calls asynchronous

def application(environ, start_response):
    if environ["REQUEST_METHOD"]!="POST": # your JS uses post, so if it isn't post, it isn't you
        start_response("403 Forbidden", [("Content-Type", "text/html; charset=utf-8")])
        return "403 Forbidden"
    start_response("200 OK", [("Content-Type", "text/html; charset=utf-8")])
    r = environ["wsgi.input"].read() # get the post data
    return r

address = "youraddresshere", 8080
server = WSGIServer(address, application)
server.backlog = 256
server.serve_forever() 
```

如果您的程序是面向对象的，那么集成它会相当容易。编辑：不需要面向对象。我现在已经包含了一些 Pexpect 代码

```
global d
d = someClass()
def application(environ, start_response):
    # get the instruction
    password = somethingfromwsgi # read the tutorials on WSGI to get the post stuff
    # figure out WHAT to do
    global d
    success = d.doSomething()
    # or success = funccall()
    prog = pexpect.spawn('python someprogram.py')
    prog.expect("Password: ")
    prog.sendline(password)
    i = prog.expect(["OK","not OK", "error"])
    if i==0:
        start_response("200 OK", [("Content-Type", "text/html; charset=utf-8")])
        return "Success"
    elif i==1:
        start_response("500 Internal Server Error", [("Content-Type", "text/html; charset=utf-8")])
        return "Failure"
    elif i==2:
        start_response("500 Internal Server Error", [("Content-Type", "text/html; charset=utf-8")])
        return "Error" 
```

我建议的另一个选择是 Nginx + uWSGI。如果你愿意，我也可以给你一些例子。它为您提供了将网络服务器合并到设置中的好处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T20:58:13.757

要将您的数据从 javascript 透明地传递到外部 Python 程序，您可以使用 WebSocket 协议连接您的服务器和 javascript，并使用 stdin/stdout 从服务器与外部程序进行通信。

这是一个示例 Python 程序`client.py`：

```
#!/usr/bin/env python
"""Convert stdin to upper case."""
for line in iter(raw_input, 'quit'):
    print line.upper() 
```

我已经使用来自[hello world websocket 示例](https://gist.github.com/1380305)的代码创建了一个服务器，并回答了[如何在每个传入连接上创建一个新进程并将所有输入数据重定向到进程的 stdin](https://stackoverflow.com/a/10941971/4279)：

```
#!/usr/bin/python
"""WebSocket CLI interface."""
import sys
from twisted.application import strports # pip install twisted
from twisted.application import service
from twisted.internet    import protocol
from twisted.python      import log
from twisted.web.server  import Site
from twisted.web.static  import File

from txws import WebSocketFactory # pip install txws

class Protocol(protocol.Protocol):
    def connectionMade(self):
        from twisted.internet import reactor
        log.msg("launch a new process on each new connection")
        self.pp = ProcessProtocol()
        self.pp.factory = self
        reactor.spawnProcess(self.pp, sys.executable,
                             [sys.executable, '-u', 'client.py'])
    def dataReceived(self, data):
        log.msg("redirect received data to process' stdin: %r" % data)
        self.pp.transport.write(data)
    def connectionLost(self, reason):
        self.pp.transport.loseConnection()

    def _send(self, data):
        self.transport.write(data) # send back

class ProcessProtocol(protocol.ProcessProtocol):
    def connectionMade(self):
        log.msg("connectionMade")
    def outReceived(self, data):
        log.msg("send stdout back %r" % data)
        self._sendback(data)
    def errReceived(self, data):
        log.msg("send stderr back %r" % data)
        self._sendback(data)
    def processExited(self, reason):
        log.msg("processExited")
    def processEnded(self, reason):
        log.msg("processEnded")

    def _sendback(self, data):
        self.factory._send(data)

application = service.Application("ws-cli")

_echofactory = protocol.Factory()
_echofactory.protocol = Protocol
strports.service("tcp:8076:interface=127.0.0.1",
                 WebSocketFactory(_echofactory)).setServiceParent(application)

resource = File('.') # serve current directory INCLUDING *.py files
strports.service("tcp:8080:interface=127.0.0.1",
                 Site(resource)).setServiceParent(application) 
```

网络客户端部分`sendkeys.html`：

```
<!doctype html>
<title>Send keys using websocket and echo the response</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js">
</script>
<script src="sendkeys.js"></script>
<input type=text id=entry value="type something">
<div id=output>Here you should see the typed text in UPPER case</div> 
```

和`sendkeys.js`：

```
// send keys to websocket and echo the response
$(document).ready(function() {
    // create websocket
    if (! ("WebSocket" in window)) WebSocket = MozWebSocket; // firefox
    var socket = new WebSocket("ws://localhost:8076");

    // open the socket
    socket.onopen = function(event) {
    socket.send('connected\n');

    // show server response
    socket.onmessage = function(e) {
        $("#output").text(e.data);
    }

    // for each typed key send #entry's text to server
    $("#entry").keyup(function (e) {
        socket.send($("#entry").attr("value")+"\n");
    });
    }
}); 
```

尝试一下：

*   [下载这个要点](https://gist.github.com/5376c7eb494e57dd5052)
*   安装`twisted`，`txws`：

    ```
    $ pip install twisted txws 
    ```

*   跑：

    ```
    $ twistd -ny wscli.py 
    ```

*   访问`http://localhost:8080/`

*   点击`sendkeys.html`并输入一些东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:13:05.393

您可能需要[Flask](http://flask.pocoo.org/)以及[json 模块](http://docs.python.org/library/json.html)。

[Django](https://www.djangoproject.com/)是另一种选择，但可能对您的需求来说太高级了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T18:51:38.193

这取决于您要包装的应用程序类型以及您的 GUI 选项如何转换为应用程序命令。但是你在这里有两个目标：

1.  编写一个包装器以允许您读取程序的输出并为其提供输入。

2.  制作一个网络服务器来接收 GUI 事件并将它们转换为命令以传递给您的“包装器”

我做了一些你需要做的事情。

1.  本质上，您需要将套接字流转换为谨慎的命令。实际的工具是[expect](http://en.wikipedia.org/wiki/Expect)，以及它的任何包装器（我使用过[pexpect](http://www.noah.org/wiki/pexpect)，Python 包装器，并且对它有很好的体验）。

2.  这部分可能并不简单。问题是你的底层程序一直在运行，所以你的网络服务器应该是有状态的，以了解跨请求的程序。另一种选择是让您的网络服务器简单地重新附加到进程并发出命令，并在标准输出流中遇到它时发回响应，但您最终可能会得到很长的响应时间，具体取决于程序是。此外，AJAX 请求是异步的，而您的底层程序是同步的，这也是不匹配的。所以是的，这可能会变得非常复杂。这真的取决于你的程序。如果您可以添加一些有关程序和 GUI 的详细信息，它会有所帮助。

# node.js - 尝试通过节点 createBlockBlobFromStream() 将 Blob 上传到 Azure 存储时出现“RequestBodyTooLarge”

> ID：11727146
> 
> 赞同：4
> 
> 时间：2012-07-30T18:10:40.070
> 
> 标签：node.js, azure, azure-storage

当我尝试使用`createBlockBlobFromStream()`azure node sdk 将 100MB 文件上传到 Azure blob 存储时，我收到此错误：

```
error: { code: 'RequestBodyTooLarge',
  message: 'The request body is too large and exceeds the maximum permissible limit.
  maxlimit: '67108864' } 
```

有任何想法吗？最大 blob 大小似乎是 200GB，或 50.000 个块。我检查了常量，块大小设置为 4MB，这是最大的。SDK错误，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T01:49:10.363

[记录](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451)如下：

> 如果您尝试上传大于 64 MB 的块 blob 或大于 1 TB 的页 blob，服务将返回状态代码 413（请求实体太大）。Blob 服务还会在响应中返回有关错误的其他信息，包括允许的最大 Blob 大小（以字节为单位）。

您可能需要检查 createBlockBlobFromStream() 以验证它是否使用小于 4MB 的块来上传大于 64MB 的文件。例如，您可以使用 Fiddler 来验证实际的 REST 操作，这应该会很快显示 createBlockBlobFromStream() 尝试的操作。

# jaxb - 如何使用 JAXB 执行此操作？

> ID：11727149
> 
> 赞同：1
> 
> 时间：2012-07-30T18:10:43.110
> 
> 标签：jaxb

我在网上找不到任何能告诉我如何做到这一点的东西，或者没有遵循我所找到的东西，所以我想我会在这里问。

我有一条要反序列化为 Java 对象的 XML 消息。该消息的格式为：

```
<billing-amount>
    <EUR>100</EUR>
    <GBP>12</GBP>
</billing> 
```

该片段来自对我正在尝试集成的支付网关上的 API 请求的响应。节点内的每个`<billing-amount>`节点代表一个给定货币的数量。`<EUR>`例如，代表欧元。

现在，如果我知道所有可能的货币（嗯，至少是我关心的），我可以创建一个 Java 类，其中包含以下字段，每个字段对应一种可能的货币：

```
public class BillingAmount {
    @XmlElement(name = "EUR")
    @XmlValue
    private Integer euroAmount

    @XmlElement(name = "EUR")
    @XmlValue
    private Integer euroAmount
    ...
} 
```

然后我可以按如下方式使用这个新类 - 使其成为从 XML 消息创建的实际类的字段：

```
@XmlElement(name = "billing-amount")
private BillingAmount billingAmount; 
```

该`billingAMount`对象在实例化时将有一个字段包含欧元金额，另一个字段包含英镑金额。这一切都很好。

但是，我想知道的是，有没有更好的方法呢？JAXB 中有没有一种方法可以使用节点的名称向您正在创建的类添加属性？或者根据列表中节点的名称创建一个类？

基本上我想要的是根据列表中节点的名称创建类。所以这个`BillingAcount`类可能会被替换为一个`XmlElementWrapper`，因为创建一个类只是作为一个容器似乎是一种开销。

谢谢。

# c# - C#中二维平面上对角线的线交点

> ID：11727151
> 
> 赞同：0
> 
> 时间：2012-07-30T18:11:00.403
> 
> 标签：c#, .net, math, 2d, intersection

假设一个二维网格，左上角的单元格为 (0, 0)。选择任意两个点/坐标并在每个点上绘制对角线和对角线。它们可能在网格内部或外部相交。

在附图中，红线是两个点 (300, 200) 和 (700, 800) 的对角线。

如何找出对角线交叉点的坐标？另外，如果直线的斜率为负，公式会有什么不同？

我将在需要高度优化的算法中使用它，因此正确的答案将是最快的计算方式。我不确定这是否可以在没有三角函数的情况下完成。

**注意：** 请记住，红线是真正的对角线/对角线对。换句话说，它们与矩形成 45 度角。这可能会或可能不会帮助选择比矢量计算更优化的公式。

![在此处输入图像描述](../Images/332a43a44a1df57684c329f78eb39700.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:20:11.950

设`D`为两条边长之差。在你的图中，`D=200`. 这是两个白色三角形（外部交点和矩形之间的三角形）的斜边的长度。所以这些三角形的边长是`D/sqrt(2)`，所以外部交点的坐标与矩形角的坐标相差`D/2`。

然后对于您的图表，

```
(x1,y1) = 300-D/2, 200+D/2 = 200,300
(x2,y2) = 700+D/2, 800-D/2 = 800,700 
```

您必须处理所有可能的方向（`x1<x2`, `x1>x2`, ...），但它们都与这个方向对称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:21:30.733

这只是数学。你有 2 行方程

```
y1 = k1 * x1 + b1
y2 = k2 * x2 + b2
If they intersect then y1 == y2 and x1 = x2 so
k1 * x1 + b1 = k2 * x1 + b2
x1 = (b2 - b1) / (k1 - k2) 
```

现在唯一的问题是如何找到k1、k2、b1、b2？简单的！每条线都有 2 个点（来自 graphics.DrawLine(x1, y1, x2, y2)）。在这里使用它们。对于第一行：

```
y1 = k * x1 + b
y2 = k * x2 + b
b = y1 - k * x1
y2 = k * x2 + y1 - k * x1 = k * (x2-x1) + y1
so
k = (y2 - y1) / (x2 - x1) 
```

将其代`k`入`b = y1-k*x1`，您将获得计算精确碰撞点所需的所有值。

# java - 如何为我的项目使用的所有 jar 创建一个内部远程存储库？

> ID：11727153
> 
> 赞同：2
> 
> 时间：2012-07-30T18:11:12.787
> 
> 标签：java, maven, build, jar, repository

目前，我依赖于许多外部远程存储库，但我正在处理的项目要求它必须是内部存储库。大多数 jar 将与外部存储库相同，并且还会有一些自定义的。

我该怎么做呢？我在 Maven 网站上注意到，它说不要 rsync:// 整个目录。我根本不打算这样做，但我想拿大约 30 个罐子。

如果有一种方法可以快速将我想要的内容复制到我的内部存储库中，它们会开箱即用，还是我必须做一些特别的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:15:46.683

设置一个本地 maven 存储库应用程序并让它[代理](http://maven.apache.org/repository-management.html)中心（以及您需要的任何其他存储库）。

# java-me - How to develop Rss Reader App using LWUIT Component in j2me(java)

> ID：11727157
> 
> 赞同：-2
> 
> 时间：2012-07-30T18:11:40.663
> 
> 标签：java-me, lwuit, midp-2.0

I am new to J2me I have a requirement to develop Rss Reading Application using LWUIT in j2me(java)for series 40 Device. 1)I need to read Rss File 2)i need to display Title and Image from Rss xml File on LWUIT List Screen 3)If i click on Title ,i should be able to display Form Screen ,On LWUIT Form i need to display Description and Publish Date from Rss File

any sample Code ,I need help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:45:20.527

Check out the RSS reader component that is a part of LWUIT4IO or standard part of [Codename One](http://www.codenameone.com/).

You can just place it using the GUI builder to create such an application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:29:46.593

To Develope an Rss Reader Application using LWUIT , we can use the below Code:

**RssMidlet:**

```
import com.sun.lwuit.*;
import com.sun.lwuit.animations.Transition3D;
import com.sun.lwuit.events.ActionEvent;
import com.sun.lwuit.events.ActionListener;
import java.util.Vector;
import javax.microedition.midlet.*;

 public class RssMidlet extends MIDlet implements ActionListener {

    private List rssFeedList;
    private Vector rssFeed;
    private Image image;
    private Form form1;

    public RssMidlet() {
        Display.init(this);
        rssFeed = new Vector();
        form1 = new Form();
        form1.setFocus(true);
        form1.addCommandListener(this);
        form1.setScrollableY(true);
        form1.setTransitionInAnimator(Transition3D.createRotation(250, true));
        //Initialize a  List Object with Vector ref rssFeed
        rssFeedList = new List(rssFeed);
        rssFeedList.setRenderer(new NewsListCellRenderer());
        rssFeedList.setFixedSelection(List.FIXED_NONE);
        rssFeedList.setItemGap(0);
        form1.addComponent(rssFeedList);
    }

    public void startApp() {

        String url = "Your Input Rss File Here";
        ParseThread myThread = new ParseThread(this);
        //this will start the second thread
        myThread.getXMLFeed(url);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

        public void addNews(RssModel newsItem) {
        rssFeed.addElement(newsItem);

       form1.show();
    }

    }
} 
```

You can create a **NewsListCellRenderer** class by Referring this Example [LWUIT Blog ContactsRenderer](http://lwuit.blogspot.in/2008/07/lwuit-list-renderer-by-chen-fishbein.html) Example

# regex - 使用正则表达式从一行中提取多个匹配项

> ID：11727158
> 
> 赞同：2
> 
> 时间：2012-07-30T18:11:42.277
> 
> 标签：regex, vb.net, replace, split, matching

我似乎进入了一个非常复杂的领域（无论如何对我来说）。假设我有以下行：

```
1:11:39 "LOGIN ATTEMPT: "47576966" Arlond" 
```

我想做的是分开时间（1:11:39）ID（47576966）和名称（Arlond）。我已经达到了下面的正则表达式，但我对接下来需要做的事情有点迷茫。我知道我的正则表达式不正确，无法获取我需要的一切，这也是我需要帮助以使我的 For 循环正常工作的地方。我一直在寻找如何正则表达式拆分和替换，但到目前为止，我还没有任何运气可以工作。

```
([""'])(?:(?=(\\?))\2.)*?\1

Using TestFile As New IO.StreamReader(My.Settings.cfgPath & "tempRPT.txt", System.Text.Encoding.Default, False, 4096)
        Do Until TestFile.EndOfStream
            ScriptLine = TestFile.ReadLine
            ScriptLine = LCase(ScriptLine)
            If InStr(ScriptLine, "login attempt:") Then
                Dim m As MatchCollection = Regex.Matches(ScriptLine, "([""'])(?:(?=(\\?))\2.)*?\1")
                For Each x As Match In m

                Next
                'builder.AppendLine(ScriptLine)
            End If

        Loop
    End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:03:01.650

关于您的正则表达式，我一直认为最好尽可能明确（例如锚点）。假设您的输入数据的表现与看起来一样好，您可以执行以下操作：

```
^(\d{1,2}:\d{2}:\d{2})\s""LOGIN\sATTEMPT:\s""(\d+)""\s([^""]+)""$ 
```

将其分解为其组件：

```
^                       // Anchor: Start of string (or line).
(\d{1,2}:\d{2}:\d{2})   // Capture one or two digits, colon, two digits, colon, two digits.
\s""LOGIN\sATTEMPT:\s"" // Anchor: match (but don't capture) literal text.
(\d+)                   // Match/capture one or more digits. (maybe you could use \d{8} instead).
""\s                    // Anchor: literal text.
([^""]+)                // Match and capture everything that is not a quote.
""                      // Anchor: Literal quote.
$                       // Anchor: End of string (or line). 
```

`name`如果您的字段被允许包含`"`（双引号）字符，这将被打破。如果事实证明是这种情况，您将不得不修改最后一个子表达式以使其更宽松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:39:21.453

在回答 DavidO 接受的问题时，我只是想表明我已将其分解以更好地理解它。

```
If InStr(ScriptLine, "login attempt:") Then
                Dim m As Match = Regex.Match(ScriptLine, ("(\d{1,2}:\d{2}:\d{2})"))
                hurrburr = m.Value
                'Regex.Replace(ScriptLine, "(\d{1,2}:\d{2}:\d{2})", "")
                Dim mm As Match = Regex.Match(ScriptLine, "(\d{7,8})")
                'ScriptLine = ScriptLine & " " & mm.Value
                hurrburr = hurrburr & " " & mm.Value
                Dim mmm As Match = Regex.Match(ScriptLine, """\s([^""]+)")
                temp = mmm.Value.Replace("""", "")
                hurrburr = hurrburr & " " & temp
                builder.AppendLine(hurrburr)
 End If 
```

# .net - 迁移到 MVC3

> ID：11727165
> 
> 赞同：1
> 
> 时间：2012-07-30T18:12:12.470
> 
> 标签：.net, asp.net-mvc-3, asp.net-mvc-2, spark-view-engine

我试图从 MVC2 迁移到 MVC3。我使用 Spark 视图引擎。更改引用后，我的 Spark 页面基类中只有 2 个错误：

```
The type 'System.Web.Mvc.IView' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null'. C:\Dev\main\app\Web\Html\SparkPageBase.cs

The type 'System.Web.Mvc.IViewDataContainer' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null'.    C:\Dev\main\app\Web\Html\SparkPageBase.cs 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:19:53.713

尝试下载并使用 Spark View Engine for MVC3。

[用于 MVC3 的 Spark 视图引擎](http://sparkviewengine.codeplex.com/releases/view/86901)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:24:04.090

修改 web.config 使其具有以下版本后，看看它是否有效`System.Web.Mvc`

```
<dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
  </dependentAssembly> 
```

# php - 使用 Kohana 3.2 ORM 验证可选字段

> ID：11727166
> 
> 赞同：0
> 
> 时间：2012-07-30T18:12:12.503
> 
> 标签：php, kohana, kohana-orm, kohana-3.2

使用 Kohana 3.2 ORM 验证可选字段的最简单（更简洁）的方法是什么？

*   仅在字段具有某些内容时验证，在修剪过滤器之后，如果可能的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:59:02.947

好吧，也许（：P）我忘记了必填字段和可选字段之间的区别：

```
'city' => array(
            array('not_empty'),
            array('min_length', array(':value', 3)),
            array('max_length', array(':value', 255)),
        ),
'longitude' => array(
            array('is_coordinate'),
        ) 
```

第二个，可选字段“经度”仅在有 Valid::is_coordinate 不接受的内容时才会触发。

第一个，必填字段，由“not_empty”或具有类似行为的东西控制。

关于过滤器，ORM过滤器在规则之前处理，所以这样的事情就足够了：

```
public function filters() {
    return array(
        'longitude' => array(array('trim'))
    );
} 
```

我现在正在测试自己，并且工作得很好。

# matlab - Matlab求和形成矩阵

> ID：11727171
> 
> 赞同：0
> 
> 时间：2012-07-30T18:12:35.700
> 
> 标签：matlab, matrix, sum

我正在寻找快速循环的帮助，以形成一堆值。给定一个 30 向量**x**和另一个 30 向量，这是此类数据**expx**的期望值。我希望能够快速将 30*30=90 个值求和以形成一个对称的 30x30 矩阵。以下是我的 30x30 矩阵的 (k,l) 项：

![在此处输入图像描述](../Images/3d5f10b94be070de2de0b3655b744048.png)

所以**x**构成括号左侧的条目，x_i 和**expx**是右侧部分，即 < x_i > for i=1,2,...,30。您无需担心这些向量由哪些值组成，我已经确定了它们。有谁知道我应该如何形成矩阵的这些元素并将它们放入我的 30x30 矩阵中。

我想我会开始：

```
M=30;
C = zeros(M); 
```

我正在努力得到总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:30:26.907

为什么不这样：

```
M=30;
C = zeros(M);
for k = 1:30
    for l = 1:30
        for i = 1:30
            C(k,l) = (x(k-i+1) - expx(k-i+1)) * (x(l-i+1) - x(l-i+1));
        end
    end
end 
```

# sql-server - 在 Power Pivot 中自联接表

> ID：11727179
> 
> 赞同：1
> 
> 时间：2012-07-30T18:13:02.277
> 
> 标签：sql-server, sql-server-2008, olap, powerpivot

我想知道 Excel Power Pivot 是否可以处理表上的自联接。这是从数据中导出父子关系（我知道这可以在 SSAS 中完成）。

例如考虑以下内容：

```
ID  Level         Individual       ImmediateParent
2   son            Tom               3
3   father         John              4
4   grandpa        Lee               5
5   great grandpa  Sam               6
6   root           Root 
```

我希望 Power Pivot 在生成数据透视表时，在调用该级别时仅显示一个原始数据，例如儿子，以及包含在其中的所有其他数据以进行深入查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:11:01.220

我在表上进行自连接的原因是为了导出父子关系。但在 powerpivot 中，这可以通过“PATH”dax 公式轻松处理。例如，对于问题中的父子关系，dax 公式如下所示：

路径（ID，立即父）。

以下是一些关于使用 PATH 公式创建父子关系的好教程：

[使用dax的父子](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CEoQFjAA&url=http://www.powerpivotblog.nl/powerpivot-denali-parent-child-using-dax&ei=DvAsUNTHM8K6yAHBl4GQDA&usg=AFQjCNFN2nwfmtOrIEs59ZyQqjF1qXP77w&sig2=gej5p3NI_OdKD4DsbuYJ2A)

[Powerpivot 和父子层次结构](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CE4QFjAB&url=http://sqlblog.com/blogs/alberto_ferrari/archive/2011/02/15/powerpivot-and-parent-child-hierarchies.aspx&ei=DvAsUNTHM8K6yAHBl4GQDA&usg=AFQjCNGBh67gH3QIfnhWuhaNHWBVEs8VQg&sig2=t3wGgYurJnyb-88mfONssw)

# r - 在列表中合并列表

> ID：11727180
> 
> 赞同：0
> 
> 时间：2012-07-30T18:13:02.570
> 
> 标签：r

我有一个类似的清单

```
$`1`
[1] 1959   13

$`2`
[1] 2280  178   13

$`3`
[1] 2612  178   13

$`4`
[1] 2902  178   13 
```

结构类似于：

```
structure(list(`1` = c(1959, 13), `2` = c(2280, 178, 13), `3` = c(2612, 
178, 13), `4` = c(2902, 178, 13)......,.Names = c("1", "2", "3", "4"....) 
```

如何组合此列表中的列表并生成如下列表：

```
$`list`
[1] 1959   13
[2] 2280  178   13
[3] 2612  178   13
[4] 2902  178   13 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:31:54.213

这是我能得到的最接近你所要求的矩阵的东西：

```
LIST <- structure(list(`1` = c(1959, 13), `2` = c(2280, 178, 13), `3` = c(2612, 
178, 13), `4` = c(2902, 178, 13)))

cbind.fill <-
function(...) {
    nm <- list(...)
    nm<-lapply(nm, as.matrix)
    n <- max(sapply(nm, nrow))
    do.call(cbind, lapply(nm, function(x) rbind(x, 
        matrix(, n - nrow(x), ncol(x)))))
}

t(do.call('cbind.fill', LIST))
print(X$list, na.print="", quote=FALSE) 
```

或使用`plyr`

```
LIST <- lapply(LIST, function(x) data.frame(t(x)))
library(plyr)
rbind.fill(LIST) 
```

也许你只是不想要名字？

如果是这样的话...

```
names(LIST) <- NULL
LIST 
```

我想我只是没有得到你所追求的输出结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:34:27.360

试试下面的代码。问题是我不太确定您想要什么作为输出；你称它为列表，但它看起来非常像矩阵。假设您确实希望将其作为矩阵，则以下内容应该可以解决问题：

```
x <- list()
x$`1` <- c(1959, 13)
x$`2` <- c(2280, 178, 13)
x$`3` <- c(2612, 178, 13)
x$`4` <- c(2902, 178, 13)

# maximum number of elements in any vector
max <- max(sapply(x, function(y) length(y)))

# make all vectors the same length
x <- lapply(x, function (y){length(y) <- max; y})

# combine them in a matrix
result <- do.call(rbind, x) 
```

结果：

```
> result
  [,1] [,2] [,3]
1 1959   13   NA
2 2280  178   13
3 2612  178   13
4 2902  178   13 
```

您始终可以将此矩阵输出保存为列表的元素。我想从[这里](https://stackoverflow.com/questions/3699405/how-to-cbind-or-rbind-different-lengths-vectors-without-repeating-the-elements-o)开始使长度相等。

如果您希望您的矩阵是数字的，您将无法摆脱 NA（您始终可以将其转换为字符并使 NA 为“”，但进一步使用矩阵可能不是一个好主意） .

可能是我很困惑，并且您毕竟想要一个列表，但正如 Josh 在他的评论中提到的那样，在这种情况下，您的数据一开始是正确的。

# java - 修复java内存泄漏的学习网站

> ID：11727183
> 
> 赞同：3
> 
> 时间：2012-07-30T18:13:08.793
> 
> 标签：java, memory-leaks, visualvm, jhat

学习修复 java 内存泄漏的最佳地点是什么？我一直试图通过 NET 找到好的资源，但令我失望的是，我发现正在讨论的玩具示例。我还能够解决小型玩具转储问题，但现实世界的应用程序转储更具挑战性并且几乎没有提供任何线索。

我尝试过 Jhat、JMap、VisualVM 和 MAT 等工具。

学习修复 Java 内存泄漏的最佳地点是什么？也欢迎推荐一本书。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:13:17.753

There are many kind of memory leaks but in practice the following strategy gives good results (Disclaimer: I'm showing screen shots from [JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html), because my company develops it):

**1\. Check the biggest objects**

"Biggest objects" retain a lot of memory that nobody else is holding on to. In JProfiler, they can be found in the "Biggest objects" view of the heap walker. This often happens with caches.

![enter image description here](../Images/6dae6b19f6a9a6486abbb10b64b6c4cd.png)

**2\. Check classes with a lot of instances**

Sometimes, the references are more intricate and the biggest objects do not give a clue. Classes with a lot of instances can be checked for their incoming references. First, it is helpful to look at cumulated references, to separate valid reference chains from suspicious reference chains.

![enter image description here](../Images/26b8ae229bbe35f2e3e55e54c822c032.png)

Also, checking where instances have been allocated (as opposed to how they are referenced) can often give an insight on what is going on.

![enter image description here](../Images/3e9b35398d93b70acb67cdd4def7d226.png)

Often, this is a multi-step process, selecting reference chains, allocation spots, or making selections based on the contents of objects.

**3\. Search for paths to GC roots**

If that still does not provide a clue, you can select single objects and show their reference chains that lead to garbage collector roots. It helps a lot of you were able to narrow down an object set of suspicious objects before trying to to that, otherwise you may have a lot of candidates.

![enter image description here](../Images/70e1f83a924162ebd2c55b8d0019e54a.png)

There is also a [screen cast](http://blog.ej-technologies.com/2009/04/in-screencast-below-i-show-strategy-for.html) on this topic.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:27:35.413

你试过搜索[互联网](http://java.dzone.com/news/how-fix-memory-leaks-java)吗？有很多[例子](http://www.ibm.com/developerworks/library/j-leaks/)。一个好的搜索引擎会按[相关性](http://www.ibm.com/developerworks/library/j-leaks/)对它们进行排序。

# javascript - for...in 循环的奇怪问题

> ID：11727184
> 
> 赞同：-1
> 
> 时间：2012-07-30T18:13:12.597
> 
> 标签：javascript, arrays, for-loop, for-in-loop

这有效：

```
for (var i = 0; i < this.size(); i++) {
    values.push(this.cards[i].value);
} 
```

但这不是：

```
for (var card in this.cards) {
    values.push(card.value);
} 
```

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T18:17:20.803

因为在`for...in`循环中，变量是键，而不是值。

它应该是：

```
for (var card in this.cards) {
    values.push(this.cards[card].value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T18:16:55.637

```
for (var card in this.cards) {
    values.push(card.value);
} 
```

...`card`将是索引号，而不是值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T18:16:46.947

循环枚举对象的`for..in`属性名称，而不是属性值。应该：

```
for ( var key in this.cards ) {
    values.push( cards[key].value );
} 
```

一个缺点`for..in`是它还枚举继承的属性名称（当然，仅当相应的属性是可枚举的）。

* * *

另外，考虑一下：

```
var values = this.cards.map(function ( card ) {
    return card.value;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T18:25:14.740

因为`for (var x in y)`语法循环对象（键）的属性，如果它是一个数组，它可以是数组的成员，也可以是其他可枚举的属性。

例如：

```
var person={fname:"John",lname:"Doe",age:25}; 

for (x in person)
{
  txt=txt + person[x];
} 
```

将打印出所有属性（JohnDoe25），但数组的成员是元素（例如数组中包含的值）以及原型属性。考虑一下：

```
// Somewhere deep in your javascript library...
Array.prototype.foo = 1;

// Now you have no idea what the below code will do.
var x, a = [1,2,3,4,5];
for (x in a){
    // Now foo is a part of EVERY array and 
    // will show up here as a value of 'x'
} 
```

`x`将`foo`在循环中的某个时刻作为 ' 值出现，但这几乎不是预期的。

我会说不要使用`for(var x in y)`，除非你明白它的作用——不要试图成为一个刺，只是让你免于很多拉头发和抓头的事情，我自己曾经经历过这些：/

# monomac - MonoGame 示例未在 Mountain Lion 上编译

> ID：11727185
> 
> 赞同：2
> 
> 时间：2012-07-30T18:13:23.220
> 
> 标签：monomac, monogame

所以我安装了 MonoFramework、MonoDevelop 和 MonoMac 并下载了最新版本的 MonoGame。我尝试编译示例，但它们都因相同的错误而失败 `Parsing error of #error Unknown platform`。

问题似乎是由于某种原因`#if MONOMAC`而`#elif MONOMAC`被忽略了。

如果我删除了 Windows、XBOX 和 Linux 相关代码并摆脱了`#if MONOMAC`编译和执行的代码。是否发生了变化，我是否应该在平台检查中使用其他东西而不是 MONOMAC（我尝试过`__APPLE__`但`MAC`都没有成功）。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:18:55.093

它应该可以工作。如果您安装 MonoGame 模板，是否允许您为 MacOS 创建 MonoGame 项目？

# ruby - 简单的 ruby reg ex 仅匹配三个单个字符之一

> ID：11727188
> 
> 赞同：0
> 
> 时间：2012-07-30T18:13:36.580
> 
> 标签：ruby, regex

我正在寻找一个简单的 ruby​​ reg ex 来匹配三个字符中的一个且仅一个。例如：“a”或“b”或“c”但不是“ab”、“ac”等。

根据 rubular.com，我尝试过的 /[abc]/ 或 /a|b|c/ 不起作用，因为它们也匹配“ab”、“ac”等。我也尝试过使用 ^ 和 $ 放置，但没有奏效。

我是红宝石新手，一定缺少一些简单的东西。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:24:40.263

```
[1] pry(main)> "a" =~ /^[a-c]$/
=> 0
[2] pry(main)> "ac" =~ /^[a-c]$/
=> nil 
```

但是，`==`如果您特别需要匹配单个字符，为什么不直接使用呢？如果您需要对角色*做*一些事情，您可以将所有内容全部汇总并完全跳过正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:22:54.977

如果你想要的只是捕获重复相同字符的字符串，你可以尝试这样的事情

^([a]+|[b]+|[c]+)$

# html - 如何使div填充td高度

> ID：11727190
> 
> 赞同：0
> 
> 时间：2012-07-30T18:13:46.283
> 
> 标签：html, css, html-table

我有一个有 2 列的表。每个`<td>`元素都包含一个`<div>`元素。如何设置`<div>`元素的高度以填充所有者`<td>`元素？

我也需要让它在 IE 中工作。

在此处检查[jsfiddle](http://jsfiddle.net/eric777/wJ4BR/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:19:35.320

这个怎么样：

```
$("div").each(function(){
    $(this).height( $(this).parent.height() )
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:20:38.087

我假设您不想对每个`td`and都这样做`div`。

```
var calculatedHeight = $('#someTD').innerHeight();

$('#innerDiv').height(calculatedHeight); 
```

为了更通用，您还可以使用类和 SnowBlind 答案的组合，如下所示。

```
$('.someDiv').each(function(){
    var heightToSet =  $(this).parent.innerHeight();
    $(this).height(heightToSet);
}); 
```

**更新**：当您更新单元格（通过 ajax 或但是）并重复上述操作时，您需要有一个自定义事件。但仅限于那个细胞。

```
$('table').delegate('td', 'onCellUpdate', function(){
     // a td triggered this, do something
}); 
```

和..

```
.trigger('onCellUpdate') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:23:19.733

只是一个想法，为什么不尝试在 td 中设置 td 而不是 div 的样式？

这就是我在[这里](http://jsfiddle.net/qu42z/)所做的......

# objective-c - 如何使用 typedef 枚举创建“或”开关？

> ID：11727192
> 
> 赞同：1
> 
> 时间：2012-07-30T18:14:08.413
> 
> 标签：objective-c, xcode, cocoa, enums, typedef

我有点`enums`喜欢 它们的语法看起来很神秘，而且我还没有找到关于它们不可否认的正确使用的明确参考点……但假设我有……

```
typedef enum {
    OrientTop,
    OrientBottom,
    OrientFiesta
}   Orient; 
```

我希望能够像我所做的那样，例如，当多个选择可能适用/需要时，其他常量就可以了……</p>

```
 self.orientation = OrientTop | OrientFiesta;  // NO NO WORK-O! 
```

就像一个人一样……</p>

```
self.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable; 
```

或者也..

```
it = [[NSThing alloc]initOptions: NSStupid | NSSpicy | NSSassy]; 
```

它也会很好......而不是......</p>

```
 if ((o == OrientTop ) || ( o == OrientBottom)) 
```

我可以用……</p>

```
if (o == OrientTop || OrientBottom) 
```

~~最重要的是......如何检查多个案例，á la..~~

```
switch (orientation) {
    case OrientTop | OrientBottom: 
```

~~或者类似的东西......~~ 呃，哦..你们太慢了..所以，呃..我只需要......</p>

```
case OrientLeft:
case OrientRight:  { // blah blah blah
     break;        } 
```

（但对于第一部分..）苹果/比我更聪明的人正在使用什么额外的“秘诀”来给他们`typedef`额外的活力，让我的口味如此，ech..bland ..相比之下?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:51:03.250

看起来好像`typedef`s`NSViewWidthSizable`实际上是位掩码，它允许您如此喜欢的漂亮的 ORing 操作。在某些`UIKit`元素的标题中，您可以看到我的意思：

```
enum {
    UIViewAutoresizingNone                 = 0,
    UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
    UIViewAutoresizingFlexibleWidth        = 1 << 1,
    UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
    UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
    UIViewAutoresizingFlexibleHeight       = 1 << 4,
    UIViewAutoresizingFlexibleBottomMargin = 1 << 5
};
typedef NSUInteger UIViewAutoresizing; 
```

我从一个[非常有用的网站上抢走了它，该网站解释得更详细](http://www.cocoanetics.com/2011/12/bit-masks/)，但是您也可以通过按住来检查任何常量的枚举`Command ⌘</kbd> and clicking the constant or typedef.`

# jquery - 悬停，焦点和val上的jQuery输入不透明度变化

> ID：11727193
> 
> 赞同：3
> 
> 时间：2012-07-30T18:14:14.227
> 
> 标签：jquery, jquery-ui

我正在尝试将输入字段设置为 opacity:0.8; 如果鼠标悬停在输入字段上，并且输入处于焦点状态并且输入中有数据，则渐变为 1.0。

如果上述任何条件不成立，则让输入衰减回 0.8。

我已经将焦点功能与 mouseover/mouseout 和 change 功能混合使用，该功能验证输入的 val() 但我无法获得所需的效果。

任何人都可以帮忙吗？

**HTML**

```
<form id="ajax-contact-form" class="contactForm">
    <label>Simply type your email.</label>
        <input class="textbox" name="email" type="text" value="">
        <input class="sendMessage" name="submit" value="Send Email" type="submit">
</form> 
```

**CSS**

```
 .contactForm .textbox {
    width: 564px;
    height: 46px;
    margin: 0;
    padding: 0 0 0 15px;
    font-size: 16px;
    color: #182A76;
    outline: 0;
    border: 0;
    background: url('../images/form.png') left 97% no-repeat;
    opacity:0.8;
    filter:alpha(opacity=80)
    } 
```

**查询**

```
$(document).ready(function(){
    $("input.textbox").mouseover(function() {
    $('.textbox').fadeTo("slow", 1);
}).mouseout(function() {
    $('.textbox').fadeTo("slow", 0.8);
})

if($("input.textbox").val() === "") {
    $('.textbox').css({ opacity: 0.8});
} else {
    $('.textbox').css({ opacity: 1});

}

$('input.textbox').focus(function() {
        $(this).stop().fadeTo("slow", 1);
    }).blur(function() {
        $(this).stop().fadeTo("slow", 0.8);
    }); 
```

});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:30:57.167

试试这个 -[**演示**](http://jsfiddle.net/kKKbh/)

```
$("input")
    .on("mouseover focus",  function() { 
        $(this).animate({ opacity: 1 }); 
    })
    .on("mouseleave blur", function() {
        if ( $(this).val() == '' && !$(this).is(":focus") ) {
            $(this).animate({ opacity: .4 });
        }
    }); 
```

# javascript - 获取值的javascript代码仅返回 Firefox 中的文件名

> ID：11727194
> 
> 赞同：-1
> 
> 时间：2012-07-30T18:14:16.573
> 
> 标签：javascript

> **可能重复：**
> [<input type='file'> IE 给出完整路径，FF 仅给出文件名（或目录浏览）](https://stackoverflow.com/questions/1676070/input-type-file-ie-gives-full-path-ff-gives-only-filename-or-directory-bro)
> [如何解析 C:\fakepath？](https://stackoverflow.com/questions/4851595/how-to-resolve-the-c-fakepath)

getImage() 函数返回在 IE 中的标记中选择的文件的正确完整路径。但它只返回 Firefox 中的文件名。请帮忙。我需要所有浏览器中的完整路径名..

```
getImage()  {
    var location=document.getElementbyId("photo").value;
}

<body>
    <input type=file; id=photo;>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:15:39.130

较新的浏览器实现不允许您访问完整的文件名。你只需要处理它...

# mysql - ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column

> ID：11727199
> 
> 赞同：0
> 
> 时间：2012-07-30T18:14:53.990
> 
> 标签：mysql, teamcity, rake-test

我正在尝试使用 TeamCity 运行单元和集成测试。

已经配置了一个运行 rake 测试的步骤（默认情况下包括测试负载、清除等）。但是我所有的单元测试都失败了：

`ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'bid_for_referred_user' in 'field list': INSERT INTO`general_settings` ...

我不知道发生了什么，因为我在另一台服务器上设置了另一个版本的 MySQL（5.5）并且大部分测试都通过了。MySQL版本有关系吗？这里我在 CentOS 5.7 上使用 5.0.95。或者只是我忘了在 TeamCiy 中配置一些东西？

# ruby-on-rails - 在 Rails ActiveRecord 验证期间更改或更新属性值

> ID：11727201
> 
> 赞同：8
> 
> 时间：2012-07-30T18:15:15.643
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, activemodel

**摘要**：我正在尝试更改自定义验证器中*的属性值。*`ActiveModel::EachValidator`给定以下原型：

`def validate_each(record, attribute, value)`

尝试设置`value = thing`似乎没有做任何事情——我错过了什么吗？应该有一个聪明的方法来做到这一点......

**详细信息**：我接受 URL 输入作为站点的一部分。我不想只获取 URL 并直接验证它是否返回一条`200 OK`消息，因为这会忽略不以 开头的条目`http`，或者省略前导`www`等。我有一些自定义逻辑来处理这些错误和跟随重定向。因此，如果用户输入*而*`example.org/article`不是`http://www.example.org/article`. 该逻辑在验证中正常工作，但问题是如果有人输入前者，则数据库中存储的值是“错误”的形式，而不是经过良好更新的形式。我可以在验证期间将条目更改为更规范的形式吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T18:19:15.083

你应该让验证来做这件事：**validate** ; 这不是操作模型属性的正确位置。

请参阅 ActiveModel 的**[before_validation](http://apidock.com/rails/ActiveModel/Validations/Callbacks/ClassMethods/before_validation)**回调。这是操作模型属性以准备验证的更合适的位置。

看起来你必须告诉你的 ActiveModel 实现关于回调，至少根据[这个 SO question](https://stackoverflow.com/questions/8936906/whats-the-correct-way-to-make-before-validation-etc-work-in-an-activemodel)。

```
class YourModel
  extend ActiveModel::Callbacks
  include ActiveModel::Validations
  include ActiveModel::Validations::Callbacks

  before_validation :manipulate_attributes

  def manipulate_attributes
    # Your manipulation here.
  end
end 
```

# ms-word - 在 Winword Addin 中的 Range 对象上创建形状

> ID：11727204
> 
> 赞同：0
> 
> 时间：2012-07-30T18:15:23.617
> 
> 标签：ms-word, vsto, add-in

我正在尝试在 winword 插件中的给定 Range 对象上创建一个形状。

目前我只能获得 Range 开头的左侧和顶部，但我找不到该范围的宽度和高度。

这就是我为获得顶部/左侧所做的事情：

```
 float left= r.get_Information(Word.WdInformation.wdHorizontalPositionRelativeToPage);
            float top= r.get_Information(Word.WdInformation.wdVerticalPositionRelativeToPage); 
```

要添加形状，我正在对包含范围的 Selection 对象执行类似的操作：

```
Sel.Document.Shapes.AddShape((int)Office.MsoAutoShapeType.msoShapeRectangle, 
                left, 
                top,
                100, 
                100, r ) 
```

除此之外，每当该范围发生变化（更改其内容）时，我都希望收到通知。

# java - 是否可以检索用于类型标记的泛型类型（即 Class ) 在运行时？

> ID：11727208
> 
> 赞同：2
> 
> 时间：2012-07-30T18:15:53.163
> 
> 标签：java, class, generics, types

Neal Gafter 引入了[类型标记](http://gafter.blogspot.nl/2006/12/super-type-tokens.html)（例如`Class<String>`）。假设在运行时可以访问 的实例`Class<String>`，是否可以在运行时检索泛型类型 ( `String`)？

我正在寻找类似于[Method.getGenericReturnType()](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#getGenericReturnType%28%29)的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:17:09.880

我认为只有字段/方法才有可能。由于类型擦除，我们无法在运行时获取特定于类的泛型类型。如果您可以上课，似乎可以做一些黑客攻击。阅读此[讨论](https://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:20:56.270

与 C# 不同，泛型在 Java 中不存在于运行时。因此，您不能尝试创建泛型类型的实例或尝试在运行时查找泛型类型的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:02:13.380

听起来你想要的是[`ParameterizedType`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/ParameterizedType.html).

您可以通过反射 a`Class`和来自它的对象 ( `Method`, `Field`) 来获得这些。但是，您无法`ParameterizedType`从任何旧`Class`对象中获取 a；`Class`您可以从表示扩展泛型类或接口的类型的实例中获取一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:35:31.150

可以使用 Bob Lee 对 Gafter 的 Gadget 模式的一种变体：

```
public class GenericTypeReference<T> {

    private final Type type;

    protected GenericTypeReference() {
        Type superclass = getClass().getGenericSuperclass();
        if (superclass instanceof Class) {
            throw new RuntimeException("Missing type parameter.");
        }
        this.type = ((ParameterizedType) superclass).getActualTypeArguments()[0];
    }

    public Type getType() {
        return this.type;
    }   

    public static void main(String[] args) {

        // This is necessary to create a Class<String> instance
        GenericTypeReference<Class<String>> tr =
            new GenericTypeReference<Class<String>>() {};

        // Retrieving the Class<String> instance
        Type c = tr.getType();

        System.out.println(c);
        System.out.println(getGenericType(c));

    }

    public static Type getGenericType(Type c) {
        return ((ParameterizedType) c).getActualTypeArguments()[0];
    }

} 
```

上面的代码打印：

```
java.lang.Class<java.lang.String>
class java.lang.String 
```

# ruby-on-rails - 如何使用 Graph API 在 Facebook 帖子中标记用户？

> ID：11727210
> 
> 赞同：2
> 
> 时间：2012-07-30T18:16:14.637
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

我做了一项研究，大多数主题至少有一年的历史。那么，想知道有没有办法使用 Graph API 在 Facebook 墙贴中标记用户？

一些相关但不起作用的解决方案： http: [//digitizor.com/2011/01/24/tag-user-facebook-graph/](http://digitizor.com/2011/01/24/tag-user-facebook-graph/)

wallpost 的 FB 文档提到 message_tags 字段，即“在消息中标记的对象（用户、页面等）”。 [https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

那么是否有可能以某种方式在墙贴中添加一个标签给另一个知道其 ID 的用户？

尝试使用 Koala gem 在 Rails 应用程序中实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:26:38.047

@[id:name] 在帖子的*文本内容*中标记人物的方式已经在很久以前被删除了；它仅适用于通过 Facebook 实际发布的用户，而不是通过 API。

但是，您*可以*在发布帖子时将人们标记为“与您在一起”——但这也需要一个位置，正如 Gil 已经说过的那样，只有在发布时人们实际上与您在一起时才应该这样做。

有关详细信息，请参阅[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:07:35.530

这似乎仍然是 facebook / koala 的错误。我无法使用 @[id:name] 样式让它工作，而且目前看起来没有另一种标记方式。让我知道如果你想出什么办法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-15T12:51:04.440

可以在当前 FB API 中标记或提及 Facebook 帖子中的用户或页面。

可以在此处找到有关每一项的详细信息。

**在 Facebook 帖子中提及用户或页面：** [https ://developers.facebook.com/docs/sharing/opengraph/using-actions#mentions](https://developers.facebook.com/docs/sharing/opengraph/using-actions#mentions)

**在 Facebook 帖子中标记用户或页面：** [https ://developers.facebook.com/docs/sharing/opengraph/using-actions#tags](https://developers.facebook.com/docs/sharing/opengraph/using-actions#tags)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T22:29:12.480

如果您的墙贴更适合作为开放图形操作，您当然可以这样标记用户。然而，行动确实需要被标记的人实际上同时参与了活动。

# animation - QML：如何为整数设置动画（不是真实的）

> ID：11727213
> 
> 赞同：2
> 
> 时间：2012-07-30T18:16:39.443
> 
> 标签：animation, qml, qt-quick

我的问题是我不能为整数设置动画。

我在 Text 元素中将一些结果显示为整数，如下所示：

```
Text
{
 text: someResult
} 
```

我已经定义了行为：

```
Behavior on text
{
 NumberAnimation{ duration: 1000; easing.type: Easing.InOutQuad}
} 
```

问题是动画文本得到实数，我想要整数。

* * *

**示例**：以前的值为 0，我将新值设置为 2，这就是动画的样子：

```
0
0.01
0.05
0.1
0.156
0.36
...
1.81
1.95
2 
```

但我想成为的是：

```
0
1
2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:27:10.993

您可以通过显式地为整数属性设置动画来实现此目的：

```
Text {
    property int value: 0
    text: value
    Behavior on value {
        NumberAnimation { duration: 1000; easing.type: Easing.InOutQuad }
    }
} 
```

# java - 在 JSF2 中使用 GET 参数

> ID：11727214
> 
> 赞同：0
> 
> 时间：2012-07-30T18:16:43.733
> 
> 标签：java, forms, jsf-2, get

我正在尝试在 2 个视图（称为“A”和“B”）之间将表单字段值作为 GET 参数传递。在“B”中，我使用 f:metadata 和 f:viewParam 处理参数。如果我直接使用 URL，这部分效果很好。

但是，现在我想从另一个视图“A”传递字段，但目前没有成功。字段定义如下：

```
<h:form>
<p:inputText id="field1" value="#{A.field1}"/>
<p:inputText id="field2" value="#{A.field2}"/>
[...]
</h:form> 
```

如果我在 Primefaces p:button 中使用 f:param，参数会被传输但不会动态检索（事实上，如果我检查网页 html 代码，表单的初始值是“静态”写入的）。

处理此问题的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:34:42.063

[`h:button`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/button.html)与 一起使用[`f:param`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/f/param.html)：

```
<h:button outcome="B.xhtml" value="Click me!">
    <f:param name="maybe_an_id" value="3" />
</h:button> 
```

这将生成一个普通的 HTML 按钮，点击时带有 Javascript，如下所示：

```
<input type="button" value="Click me!"
  onclick="window.location.href='/path/to/B.xhtml?maybe_an_id=3'; return false;"> 
```

**另请参阅：** [何时应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# image - Safari 6 图像颜色不正确

> ID：11727217
> 
> 赞同：4
> 
> 时间：2012-07-30T18:16:48.993
> 
> 标签：image, safari

我希望我能为这个问题有一个更有帮助的标题，但老实说，我不知道发生了什么。

升级到 safari 6 后，我网站上的某些图像现在看起来颜色较浅？这是一个需要解释的奇怪问题，所以我截取了一些屏幕截图，希望能更好地解释这个问题。

[http://i.imgur.com/TAgH6.png](http://i.imgur.com/TAgH6.png)

左边是我网站的截图，两张图片单独（也在 safari 中）。正如你所看到的，它们在网站上比在它们自己上明显更轻。现在我确定您认为这与图像部分透明或其他原因有关，但这是来自 chrome 的屏幕截图（看起来与 safari 5.2 相同）

[http://i.imgur.com/Eyo4K.png](http://i.imgur.com/Eyo4K.png)

颜色完全没有区别。

这些都是标准的 png-24 图像，就像我说的，在 safari 5.2 中一切看起来都非常正常，并且在所有其他主要浏览器中继续看起来很好。另外，如果我在画布上绘制这些图像而不是使用 IMG 标签，颜色差异就会消失。我没有任何样式可以对 IMG 标签做任何事情，更不用说菜单的重复背景图像不存在这个问题，背景图块也不存在。

如果你有 safari 6 并且想自己去看东西，我的网站是 impiety.net

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:38:53.610

似乎是 Safari 6 中的一个错误。四处搜索发现重复背景图像显示颜色偏移的案例报告，而非重复图像保持正确颜色。在某些情况下，它仅在页面重新加载后发生。看起来太奇怪了，无法解决。应该由苹果修复。

[http://freewaytalk.net/thread/view/114471](http://freewaytalk.net/thread/view/114471)

[https://discussions.apple.com/thread/4146673](https://discussions.apple.com/thread/4146673)

希望能帮助到你。

# javascript - Firefox中的图像损坏或截断

> ID：11727219
> 
> 赞同：6
> 
> 时间：2012-07-30T18:16:58.897
> 
> 标签：javascript, firefox

我下面的代码（以及这里：http: [//jsbin.com/oseruc/1](http://jsbin.com/oseruc/1)）在每次鼠标点击时都会翻阅给定的图像。它在我可以测试的所有浏览器中都能正常工作，除了最新的 Firefox。Firefox 显示错误，例如：

```
`Image corrupt or truncated: [http://upload.wikimedia.org/wikipedia/commons/0/0c/St](http://upload.wikimedia.org/wikipedia/commons/0/0c/St)._Cristopher-D%C3%BCrer.jpg
Image corrupt or truncated: [http://upload.wikimedia.org/wikipedia/commons/0/0c/St](http://upload.wikimedia.org/wikipedia/commons/0/0c/St)._Cristopher-D%C3%BCrer.jpg
Image corrupt or truncated: Rhinoceros.jpg">http://upload.wikimedia.org/wikipedia/commons/b/b9/D%C3%BCrer-_Rhinoceros.jpg
Image corrupt or truncated: [http://upload.wikimedia.org/wikipedia/commons/0/0c/St](http://upload.wikimedia.org/wikipedia/commons/0/0c/St)._Cristopher-D%C3%BCrer.jpg
Image corrupt or truncated: Rhinoceros.jpg">http://upload.wikimedia.org/wikipedia/commons/b/b9/D%C3%BCrer-_Rhinoceros.jpg` 
```

`如果我点击太快，就会发生这种情况。是的，已经看到了这个错误报告：[http ://code.google.com/p/fbug/issues/detail?id=4291](http://code.google.com/p/fbug/issues/detail?id=4291)

任何想法为什么会发生这种情况以及如何解决这个问题？因为我不能忽略这些错误。它们干扰了我的功能。

我的代码：

```
`<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script type="text/javascript">
(function (window) {
    var frames = [
        "http://upload.wikimedia.org/wikipedia/commons/6/65/Duerer_%28Marter_der_zehntausend_Christen%29.jpg",
        "http://upload.wikimedia.org/wikipedia/commons/0/0c/St._Cristopher-D%C3%BCrer.jpg",
        "http://upload.wikimedia.org/wikipedia/commons/b/b9/D%C3%BCrer_-_Rhinoceros.jpg"
    ];

    window.onload = function () {
        var frame_num = 0;
        var image = document.getElementById("image");

        image.onclick = function () {
            frame_num = (frame_num + 1) % frames.length;
            image.src = frames[frame_num];
            return false;
        };
    };
})(window);
    </script>
  </head>
  <body>
    <img id="image" src="http://upload.wikimedia.org/wikipedia/commons/6/65/Duerer_%28Marter_der_zehntausend_Christen%29.jpg" style="position:relative">
  </body>
</html>` 
```

* * *

 `## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T04:07:02.410

当您请求图像太快时，肯定会发生这种情况。我通过使用 setTimeout 查看是否在过去 35 毫秒内请求了图像来解决它。我的应用程序有点不同，但你可以做类似的事情（或者在加载图像之前禁用按钮）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T04:56:38.867

我遇到了完全相同的问题，它影响了所有浏览器 firefox、chrome，即不仅仅是 firefox，只有 firefox在 consol 日志中显示错误消息“*图像损坏或截断”。*只有当 ajax 请求发生得太快导致 beforeSend 函数和 success 函数之间发生冲突时，才会出现该问题。这是我的代码：

```
function loadlist(page, maxrows){
    var orderby = $('.sortby_active').attr('title');
    var category = $('.category_active').attr('title');
    $.ajax({
        type: 'post',
        url: 'gallery_pages.php?page=' + page + '&maxrows=' + maxrows + '&orderby=' + orderby + '&category=' + category,
        beforeSend: function(){
            $('#page_loading').show();
            $('#container').fadeOut(300);
        },
        success: function(data){
            $('#container').html(data);
            $('#container').stop().animate({'bottom': '0px'}, 100);
            n = 0;
            $('#up_arrow').hide();
            $('#scrollup').css('cursor', 'default');
            if(!$('#down_arrow').is(':visible')){
                $('#down_arrow').show();
                $('#scrolldown').css('cursor', 'pointer');
            }
            $('#page_loading').hide();
            $('#container').fadeIn(700);
        }
    });
} 
```

我的代码中的冲突发生在fadeIn 和fadeOut 之间。淡出需要 300 毫秒，如果 ajax 请求发生的速度超过 300 毫秒，它将显示消息和 ajax 响应数据将无法正确显示。解决方案是在成功函数中使用**delay() 。**为了以防万一，我将淡入淡出延迟了 310 毫秒 :)

```
function loadlist(page, maxrows){
    var orderby = $('.sortby_active').attr('title');
    var category = $('.category_active').attr('title');
    $.ajax({
        type: 'post',
        url: 'gallery_pages.php?page=' + page + '&maxrows=' + maxrows + '&orderby=' + orderby + '&category=' + category,
        beforeSend: function(){
            $('#page_loading').show();
            $('#container').fadeOut(300);
        },
        success: function(data){
            $('#container').html(data);
            $('#container').stop().animate({'bottom': '0px'}, 100);
            n = 0;
            $('#up_arrow').hide();
            $('#scrollup').css('cursor', 'default');
            if(!$('#down_arrow').is(':visible')){
                $('#down_arrow').show();
                $('#scrolldown').css('cursor', 'pointer');
            }
            $('#page_loading').hide();
            $('#container')**.delay(310)**.fadeIn(700);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T05:12:10.080

尝试这个：

```
window.onload = function () {
    var frame_num = 0;
    var image = document.getElementById("image");
    function load_next_image() {
        image.onclick = null;
        frame_num = (frame_num + 1) % frames.length;
        image.src = frames[frame_num];
        return false;
    };
    image.onclick = load_next_image;
    image.onload = function() {
        image.onclick = load_next_image;
    }
}; 
```

每当您单击图像时，它会暂时禁用单击处理程序，然后在图像完成加载时重新启用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-23T19:05:05.487

我知道这是旧的，但对于任何偶然发现此**检查并确保文件实际上没有损坏的**人。在浏览了其中几个解决方案后，我要求我的设计师重新创建图像。一旦他上传它，一切都开始按预期工作。``

# javascript - 悬停时打开和关闭模态窗口，失焦时关闭

> ID：11727223
> 
> 赞同：2
> 
> 时间：2012-07-30T18:17:18.780
> 
> 标签：javascript, jquery, html, fancybox

我正在使用 fancybox 作为我的模态窗口。我能够触发模式窗口在悬停时打开，但我也希望它在链接没有悬停时关闭窗口（失焦？）。

```
$("a.mini-view").fancybox().hover(function() {
  $(this).click();
}); 
```

任何帮助表示赞赏。

我添加了mouseout，我不擅长js，所以重构以下会有所帮助：

```
$(document).ready(function() {

  $('a.mini-view').mouseout(function () {
    $.fancybox.close();
  });

  $("a.mini-view").fancybox().hover(function() {
    $(this).click();
  });

  $("a.mini-view").fancybox({
    'overlayShow' : false,
    'autoScale'   : true
  });

}); 
```

如果我从一个链接直接转到另一个链接，而不在两者之间暂停，它就行不通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T23:34:19.443

The main problem with triggering events using `.hover()` or other mouse in/out jQuery methods is called `bubbling`.

For your particular issue, your best bet is using the jQuery plugin [hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html). If you visit their website, they have a good example about what dealing with bubbled events mean.

After you loaded the *hoverIntent* js file, you can create two functions to open/close fancybox that will be called by `hoverIntent` as callbacks :

```
function openFancybox(){
 $(this).trigger("click");
}
function closeFancybox(){
 $.fancybox.close();
} 
```

.... then your `hoverIntent` custom script :

```
$(".mini-view").hoverIntent({
 sensitivity: 7,
 interval:500,
 timeout:0,
 over: openFancybox,
 out: closeFancybox 
}); // hoverIntent 
```

(see documentation to fine-tune your settings)

...last, your `fancybox` custom script will simply look like:

```
$(".mini-view").fancybox({
 'overlayShow' : false,
 'autoScale'   : true
}); // fancybox 
```

[SEE WORKING DEMO](http://www.picssel.com/playground/jquery/mouseEnterLeave_30jul12.html) and feel free to explore the source code.

**SIDE NOTES**:

*   To simplify your code, you could actually apply both plugins in a single step to the same selector :

    ```
     $(".mini-view")
     .fancybox({
      'overlayShow' : false,
      'autoScale'   : true
     })
     .hoverIntent({
      sensitivity: 7,
      interval:500,
      timeout:0,
      over: openFancybox,
      out: closeFancybox 
     }); 
    ```

*   Because the options you used in your code, I assumed you were using fancybox v1.3.4\.

* * *

**UPDATE** [March 2015] :

**[DEMO](http://www.picssel.com/playground/jquery/mouseEnterLeave_24mar15.html)** using the latest versions of Fancybox (v2.1.5) and hoverIntent (v1.8.0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:19:42.117

相信你只需要这样做：

```
$('a.mini-view').blur(function () {
    // close the fancybox
}); 
```

# c++ - C++ .h & .cpp 文件 - 原型错误

> ID：11727226
> 
> 赞同：2
> 
> 时间：2012-07-30T18:17:24.343
> 
> 标签：c++

我遇到了一些我以前从未遇到过的错误，我该如何解决。我是否有某种形式的错误声明。

感谢大家的帮助！！

在currency.h 文件中

```
 public:
   currencyConverter();
   void stringToUpper(string); 
```

我在 currency.cpp 文件中的函数

```
void currencyConverter::stringToUpper(string &s)
{
   for(unsigned int l = 0; l < s.length(); l++)
  {
    s[l] = toupper(s[l]);
  }
} 
```

错误信息：

```
CLEAN SUCCESSFUL (total time: 132ms)
g++ -c -g -Wall -I/opt/local/include main.cpp -o main.o
g++ -c -g -Wall -I/opt/local/include currencyConverter.cpp -o currencyConverter.o
currencyConverter.cpp:25:6: error: prototype for ‘void currencyConverter::stringToUpper(std::string&)’ does not match any in class ‘currencyConverter’
currencyConverter.h:25:9: error: candidate is: void currencyConverter::stringToUpper(std::string)
make: *** [currencyConverter.o] Error 1 
```

已解决的问题：

解决方案是 at .h 文件

void stringToUpper(string&); 而不是 void stringToUpper(string);

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T18:19:12.907

您忘记`&`了 的声明`stringToUpper`。

# ajax - AJAX 请求无法处理 $_SESSION 变量

> ID：11727227
> 
> 赞同：0
> 
> 时间：2012-07-30T18:17:38.370
> 
> 标签：ajax

我有一个处理 AJAX 请求的 JavaScript 文件。此请求处理一个 PHP 文件（工作正常）。但是，当我想在这个 PHP 文件中调用我的`$_SESSION`变量（或在其他 PHP 文件的类中实现的任何静态变量）时，它无法被识别（我`echo`它，我有一个`500 error`）。

在 JS 文件中，我有：

```
$.ajax({
        type: "POST",
        url: "../classes/ajax/myfile.php",
        data: "comment="+encodeURIComponent(text),

        success: function(msg){
            /* PHP returns the automatically assigned ID of the new comment */
        }
    }); 
```

在我的 PHP 文件中，我像这样测试我的变量：

```
require_once '../Account.php'; 
$temp=Account::getCurrentAccount()->getId(); 
echo($temp); 
exit; 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:27:59.390

将此添加到您的 ajax .php 文件中

```
if( !isset( $_SESSION ) ){ session_start(); } 
```

理想情况下，你会在一些常见的配置文件中拥有它......

# objective-c - 错误：“行”未声明的 UI 选择器

> ID：11727228
> 
> 赞同：0
> 
> 时间：2012-07-30T18:17:48.963
> 
> 标签：objective-c, ios, xcode, uipickerview

我很难理解它是如何`pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)rowinComponent:(NSInteger)component`工作的

我已经设置好我的选择器，让我的 NSArray 填充它，我想要做的是显示来自选定行的图像。我试过了：

```
 - (void)viewDidLoad
{

////arrays & objects
arrStatus = [[NSArray alloc] initWithObjects:@"Appstorelogo",@"app",nil];
   //number of colums and rows etc of picker
 }
  -(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
 //One column
return 1;
 }

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:   (NSInteger)component
{
//set number of rows
return arrStatus.count;

 }

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row f orComponent:(NSInteger)component
 {
//set item per row
return [arrStatus objectAtIndex:row];

}
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)rowinComponent:  (NSInteger)component

{

  [imageview setImage:[arrStatus objectAtIndex:row]];

} 
```

但我收到一个错误，告诉我“行”未声明？这里： `[imageview setImage:[arrStatus objectAtIndex:row]];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:44:34.883

看起来你的委托方法是错误的。

你有什么：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)rowinComponent:  (NSInteger)component { 
```

它应该是什么：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component { 
```

**注意(NSInteger)row**和**inComponent**之间有一个空格。这很重要，因为 row 是局部变量的名称，而不是方法名称的一部分。

*还*

似乎您已经用字符串而不是图像填充了该数组。如果您希望拥有 [imageview setImage:..];，我建议创建两个 UIImages 并将它们放入数组中。方法正常工作。

要使用位于 Application Bundle 中的图像创建 UIImage，请使用以下语法：

```
UIImage *image = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"AppleStoreLogo" ofType:@"jpg"]]; 
```

**注意确保您已将图像正确添加到应用程序包中。为此，首先将图像与应用程序的文件夹放在某处。接下来单击并将该图像拖到 XCode 中的资源中。XCode 将询问您是否要将图像添加到包中，选择是。而已 ：）

# objective-c - 在 UIWebView 完全加载后执行操作

> ID：11727229
> 
> 赞同：0
> 
> 时间：2012-07-30T18:18:00.113
> 
> 标签：objective-c, macos, cocoa, uiwebview

当 WebView 完全加载页面时，我有什么方法可以运行一些代码？如果有帮助，这是我用来在视图中打开网页的代码。

```
//Load URL Into WebView
NSString *urlAddress = @"http://example.com";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[[_listenupwebkit mainFrame] loadRequest:requestObj]; 
```

# 我的**.m**文件

```
- (IBAction)SignInButton:(id)sender {
//Load URL Into WebView

NSString *urlAddress = @"http://www.pandora.com/account/sign-in";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[_listenupwebkit setFrameLoadDelegate:delegate];
[[_listenupwebkit mainFrame] loadRequest:requestObj];

loginbutton.hidden = YES;
webkithome.enabled = YES;

} 
```

## **和**

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame*)frame
{
    if(frame == [sender mainFrame]) {
        NSLog(@"viewDidLoad");
    }
} 
```

# 我的**.h**文件

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame*)frame;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:35:02.373

提供一个实现

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame*)frame 
```

在你的`frameLoadDelegate`.

```
[_listenupwebkit setFrameLoadDelegate:delegate];
[[_listenupwebkit mainFrame] loadRequest:requestObj]; 
```

在方法实现中，查看完成的帧是否是主帧：

```
 - (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame*)frame
 {
    if(frame == [sender mainFrame]) { 
```

# objective-c - Objective-C 和 Xcode 中的重复符号错误

> ID：11727233
> 
> 赞同：1
> 
> 时间：2012-07-30T18:18:09.570
> 
> 标签：objective-c

尝试编译我编写的简单程序（密码）时出现以下错误。我知道我有一个重复的符号 _OBJC_METACLASS_$_Cipher，但我不确定是什么导致了这种情况。我试图检查我是否不小心导入了两次东西，但一切都很好。任何帮助深表感谢！:)

```
Ld "/Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Products/Debug-iphonesimulator/Caesar Shift.app/Caesar Shift" normal i386
    cd "/Users/Lukas/Documents/Programming/iPhone Applications/Caesar Shift"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Developer/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Products/Debug-iphonesimulator -F/Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Products/Debug-iphonesimulator -filelist "/Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Intermediates/Caesar Shift.build/Debug-iphonesimulator/Caesar Shift.build/Objects-normal/i386/Caesar Shift.LinkFileList" -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o "/Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Products/Debug-iphonesimulator/Caesar Shift.app/Caesar Shift"

ld: duplicate symbol _OBJC_METACLASS_$_Cipher in /Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Intermediates/Caesar Shift.build/Debug-iphonesimulator/Caesar Shift.build/Objects-normal/i386/CaesarShiftViewController.o and /Users/Lukas/Library/Developer/Xcode/DerivedData/Caesar_Shift-drfzwlpgygkbcifoefghycamkoya/Build/Intermediates/Caesar Shift.build/Debug-iphonesimulator/Caesar Shift.build/Objects-normal/i386/CaesarShiftAppDelegate.o for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:24:50.527

以下是此错误的两个可能原因：

1.  您已经放入`@implementation Cipher`了一个头文件（可能是`Cipher.h`头文件），并且您已经将该头文件导入`CaesarShiftViewController.m`到`CaesarShiftAppDelegate.m`. `@implementation`语句进入文件，而`.m`不是`.h`文件。

2.  您不小心导入`Cipher.m`了`CaesarShiftViewController.m`和`CaesarShiftAppDelegate.m`。您应该导入`Cipher.h`（注意后缀！）。

正如 HachiEthan 在评论中指出的那样，您可能已`Cipher.m`在`Caeser Shift-Prefix.pch`文件中导入（在“支持文件”组中）。该文件由所有`.m`文件自动导入，因此它与我上面的#2 具有相同的效果。

# windows - 具有多种文件类型的 Windows OpenFileDialog

> ID：11727236
> 
> 赞同：0
> 
> 时间：2012-07-30T18:18:36.663
> 
> 标签：windows, filenames, openfiledialog

我想用两种可能的选择打开一个 Windows OpenFileDialog：

```
foo*bar.xml
*.xml 
```

文件名通配符是使用 FileName 属性指定的，但它适用于使用 Filter 属性指定的每个文件选择。

使用 Filter 属性，用户可以选择一组以上的文件*类型*，但是有没有办法在一个对话框中指定不同的文件*名？*

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:37:54.603

> 文件名通配符由 FileName 属性指定

这不起作用，只能使用 Filter 属性来过滤文件。此外，通配符就像`foo*bar.xml`你希望它做的那样，任何超过 * 的东西都会被忽略。通配符根本不像正则表达式。这可以追溯到没有能力实现正则表达式的早期操作系统。绝对在 CP/M，可能早在 RSX。

选项非常有限，您可以通过用 ; 分隔多个通配符来指定它们。分号。喜欢`"Image Files(*.BMP;*.JPG;*.GIF)|*.BMP;*.JPG;*.GIF|All files (*.*)|*.*"`。但这就是你可以推动它的程度。

# android - 以编程方式安装位于 /res/raw 中的 .apk 文件

> ID：11727237
> 
> 赞同：2
> 
> 时间：2012-07-30T18:18:45.603
> 
> 标签：android

我在 /res/raw 目录中为另一个应用程序存储了一个 .apk 文件，并希望提示用户安装它。这是我当前的代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File("android.resource://" + getPackageName() + "/res/raw/myapk.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

但是，当意图运行时，我收到 Parse 错误：`There is a problem parsing the package.`

.apk 文件是 eclipse 在我运行另一个应用程序时在 /bin 目录中创建的文件。

我将如何正确完成这个程序化的本地安装？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T19:12:23.643

我想到了。我最终将我的 .apk 文件放在 /assets 目录中，并以编程方式将其复制到我安装它的 sd 卡中。这是我的代码：

```
AssetManager assetManager = getAssets();
InputStream in = null;
OutputStream out = null;
try {
    in = assetManager.open("myapk.apk");
    out = new FileOutputStream("/sdcard/myapk.apk");
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
        out.write(buffer, 0, read);
    }
    in.close();
    in = null;
    out.flush();
    out.close();
    out = null;
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(new File("/sdcard/myapk.apk")), "application/vnd.android.package-archive");
    startActivity(intent);
}catch(Exception e){
    // deal with copying problem
} 
```

希望这会帮助其他有类似问题的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:22:57.727

```
String path = "file:///android_asset/raw/myapk.apk";

Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(path)), "application/vnd.android.package-archive");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:21:09.310

还在清单文件中添加一项权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

否则会出现“权限被拒绝”错误。

# c# - 查找注册表项值并返回注册表项值路径

> ID：11727239
> 
> 赞同：0
> 
> 时间：2012-07-30T18:18:48.723
> 
> 标签：c#, networking, registry

我有一个在特定键路径中搜索注册表键值的代码。在注册表项`SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}` 中找到所有注册表`0000 , 0001 , 0002 , 0003`项末尾带有等的键。`{4D36E972-E325-11CE-BFC1-08002BE10318}`. 在每个键（例如`0007`）中都调用了子键`NetCfgInstanceId`，其中保存了网络接口卡的 ID 值，如下所示`{C80949A4-CEDA-4F29-BFE2-059856D7F745}`。如果找到值，方法返回键路径！`Cannot convert type 'char' to 'string'`问题是一个错误

```
foreach (string key_value in key.GetValue("NetCfgInstanceId").ToString()) 
```

完整代码是

```
public string key_path(RegistryKey root, string root_path, string search_key)
{
    string path = string.Empty;
    foreach (string keyname in root.GetSubKeyNames())
    {
        try
        {
            using (RegistryKey key = root.OpenSubKey(keyname, true))
            {

                foreach (string key_value in key.GetValue("NetCfgInstanceId").ToString()) 
                {
                    if (key_value == search_key)
                    {
                        string reg_path = (string)key.GetValue("NetCfgInstanceId");
                        path = reg_path;
                    }
                    else
                    {
                        path = "Can't find key !";
                    }
                }
            }
        }
        catch (System.Security.SecurityException)
        {
            //Do nothing !!!
        }
    }
    return path;
}

private void kryptonButton4_Click(object sender, EventArgs e)
{
    var answer = key_path(Registry.LocalMachine, @"SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}", "{C80949A4-CEDA-4F29-BFE2-059856D7F745}");
    MessageBox.Show(answer);
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:32:15.773

Foreach 采用可枚举的值。您正在使用字符串作为该值，因此编译器希望在 foreach 中有一个字符变量。换句话说，您对 GetValue(...).ToString() 的调用不会返回字符串数组，而是返回一个字符串。foreach( var x in stringval ), var 是一个字符。

考虑这样的事情......

```
var kind = key.GetValueKind("NetCfgInstanceId");
if (kind == RegistryValueKind.MultiString)
{
    foreach (var key_value in (string[])key.GetValue("NetCfgInstanceId"))
    {
        if (key_value == search_key)
        {
            string reg_path = (string)key.GetValue("NetCfgInstanceId");
            path = reg_path;
        }
        else
        {
            path = "Can't find key !";
        }
    }
} 
```

这是假设您期望 reg 键中有一个多字符串。如果它可能是单个字符串，则可以使用以下内容...

```
if (kind == RegistryValueKind.ExpandString
   || kind == RegistryValueKind.String)
{
    var key_value = (string)key.GetValue("NetCfgInstanceId");
    if (key_value == search_key)
    {
        path = key_value;
    }
    else
    {
        path = "Can't find key !";
    }
} 
```

# android - 如何减少 Android 相机快门延迟的可变性？

> ID：11727240
> 
> 赞同：8
> 
> 时间：2012-07-30T18:19:05.093
> 
> 标签：android, android-camera

给定一个已知的周期性运动（例如，步行），我想在运动的同一点（即不同时期内的相同时间偏移）拍摄全分辨率快照。但是在 Nexus S（当前运行 OS 4.1.1，但以前的 OS 版本也是如此）上，我看到快门延迟的变化如此之大，以至于我无法准确地计划快照的时间。这是 50 张照片的快门滞后直方图。（我在 Camera.takePicture() 之前用一个 System.nanoTime() 测量了快门延迟，在快门回调开始时用另一个 System.nanoTime() 测量了快门延迟。相机镜头始终被覆盖以消除由于照明引起的任何变化。）

![在此处输入图像描述](../Images/9635cfb15c3a42b70cfc229264894878.png)

我可以在应用程序中做些什么来减少这种快门延迟可变性吗？（在这个应用程序中，平均延迟可以是任何持续时间，但标准偏差必须很小......远小于上面直方图中显示的快门延迟的 0.5 秒标准偏差。）我希望有人有一个聪明的建议. 如果我没有得到任何建议，我会在 Android 错误跟踪器中发布功能请求。

[更新：我按照 RichardC 在https://groups.google.com/forum/?hl=en&fromgroups#!topic/android-developers/WaHhTicKRA0](https://groups.google.com/forum/?hl=en&fromgroups#!topic/android-developers/WaHhTicKRA0)的建议关闭了自动对焦（通过将焦点设置为无穷大） 它有帮助，如图所示以下直方图。有什么想法可以进一步减少快门延迟可变性吗？

![在此处输入图像描述](../Images/c1561bf5965fd192479d0359a8269b53.png)

更新 2：我禁用了剩余的自动参数：白平衡、场景模式、闪光灯。下面的快门延迟时间变化直方图似乎与运行 OS 4.1.1 的 Nexus S 一样好。快门延迟时间的可变性要小得多，也许可以通过在 Camera.takePicture() 中指定一个可选的最小快门延迟时间，如果它在指定的最小值之前准备好，它将延迟快门。我已经向 Android 问题跟踪器发布了一个功能请求。如果您也有兴趣获得该功能，请在[http://code.google.com/p/android/issues/detail?id=35785上“加星”](http://code.google.com/p/android/issues/detail?id=35785)

![在此处输入图像描述](../Images/d0969d8b599a4dd9826a3fc081988519.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:08:50.510

1.  x轴是什么，y轴是什么？

2.  您可以使用低级编码（如 NDK/renderscript）而不是使用 java 。

3.  您也许可以更改相机的设置以使其更快。

# .net - 领域驱动设计：这是否矫枉过正？

> ID：11727242
> 
> 赞同：3
> 
> 时间：2012-07-30T18:19:14.050
> 
> 标签：.net, asp.net-mvc-3, architecture, domain-driven-design

我有一个使用 Entity Developer 生成的域。这将创建我所有的实体和我的数据库表。我使用 NHibernate 来填充通过存储库公开的我的实体。然后我有一个服务层，它将存储库聚合成有用的服务。该层有两种使用方式。第一，我使用服务作为与 Web 层之间的唯一通信方式，并且我希望有朝一日将这些服务用于 WCF。现在，我正在处理我的 web 层，我正在尝试找出与我的服务通信的最佳方式。我的服务目前正在返回实体。我的 Web 层通过控制器中的服务获取这些实体。这可能不是很 DRY/DDD。我假设我的服务层需要通过 DTO 进行接口。DTO 非常适合我的 WCF 服务。至于我的 Web 层，我

所以这就是我的架构最终的样子：

```
Domain
  Entities
  Repository Interfaces
Infrastructure
  NHibernate
  Concrete Repositories
Services
  DTO's
  Concrete Services
  Service Interfaces
  IIS hosted WCF
Website
  ViewModels 
```

我会使用 Automapper 或 ValueInjecter 进行映射（可能是 ValueInjector，因为它能够展平和展平我的实体/DTO。

所以这是矫枉过正吗？我正在使用这种架构的系统非常大（我正在重写所有内容）。我做对了吗？一切都与 Ninject 解耦依赖，因为我可以看到想要随时更改系统的任何部分。任何想法、想法或批评都非常受欢迎和赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T00:06:13.440

这是一种常见的架构，在实践中运行良好。一个核心好处是封装——您的域被服务层（DDD 中的应用程序服务）封装。

就 WCF 服务而言，我认为更适合它们的术语是适配器。这是基于以应用程序服务层为核心的[六边形体系结构](http://alistair.cockburn.us/Hexagonal+architecture)，WCF 将HTTP（或其他绑定）适应它*。*考虑到这一点，应用程序服务应该以与适配器无关的方式实现。这意味着没有 WCF 特定属性或数据协定。WCF 适配器又是围绕应用程序服务的薄层。有些人可能会因为增加了分层而认为这种过度杀伤力，但我发现它是有益的，因为它使应用程序层不受技术特定问题的影响。

这种架构是否矫枉过正取决于项目。回答这个问题的一种方法是确定应用程序是否主要是 CRUD，在这种情况下，DDD 是多余的，使用有助于从数据库读取并将数据直接作为服务公开的技术可能会更好。

看看[这里](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)，对 DDD 中的服务进行更深入的处理。

# .htaccess - htaccess 中的黑名单域

> ID：11727245
> 
> 赞同：0
> 
> 时间：2012-07-30T18:19:30.410
> 
> 标签：.htaccess, blacklist

我找到了一份指南，可以帮助将某些域列入黑名单，使其无法访问您的网站，

```
RewriteCond %{HTTP_REFERER} ^http://.*somebadforum\.com [NC,OR]
RewriteCond %{HTTP_REFERER} ^http://.*example\.com [NC,OR]
RewriteCond %{HTTP_REFERER} ^http://.*lastexample\.com [NC] 
```

问题是它没有说明它是否包含子域。

我们有一些网站试图通过在我们的网站上放置一个指向不存在文件的图像链接来攻击我们，这会导致 404 错误和几千次点击让我们敬酒。

我们甚至无法在其中一些和一些 IP 上找到 IP 来谷歌美国

域是：

```
someblo.blogspot DOT com
someblo.blogspot DOT com DOT br
someblo.blogspot DOT com DOT mn

someblo.blogspot,gogo DOT mn 
```

有人可以启发我们，以便我们可以阻止他们吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T03:52:17.373

看看这里[5G 黑名单 2013](http://perishablepress.com/5g-blacklist-2013/)。它可能会帮助你。

# mysql - 有没有更好的方法来编写以下 SQL？

> ID：11727246
> 
> 赞同：0
> 
> 时间：2012-07-30T18:19:30.610
> 
> 标签：mysql, sql

有没有更简洁的方法在 MySQL 中编写以下代码，而不仅仅是在编程语言中使用循环？table_vw 有很多行和几列，第 s 列的值在 0 到 7 之间

table_vw

```
sth sth_else sth_else ...
7      
.
.
6
.
.
5
.
.
4
.
.
3
.
.
2
.
.
1
.
.
0
.
.

(
SELECT *
FROM table_vw
WHERE sth = 7
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 6
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 5
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 4
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 3
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 2
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 1
LIMIT 12
)
UNION
(
SELECT *
FROM table_vw
WHERE sth = 0
LIMIT 12
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:24:55.610

如果我正确理解您的问题，那么您非常接近。

所有你需要的是

```
Select * 
From table_vw
Where sth <= 7 AND sth >= 0
Limit 12; 
```

where 语句包含您创建的所有联合。

如果您试图在每列中获得有限的 12 个结果，那么您所拥有的可能是完成这一壮举的唯一方法。

# r - How to specify an arbitrary dummy variable contrast in R?

> ID：11727256
> 
> 赞同：1
> 
> 时间：2012-07-30T18:20:24.557
> 
> 标签：r, linear-regression

I know that R automatically creates dummy variables from categorical values, but it also automatically chooses the reference value (I think alphabetically?). How do I specify a different value to be the reference without changing the names of the values? I realize I could probably relabel the factors a,b,c... in the order I prefer, but that seems kind of kludgey to me.

Just to be clear, I'll make up an example. Let's say the factor is **color** and the values are *red*, *blue*, *green*, and *yellow*.

```
mod.lm <- lm(preference ~ color, data = flowers) 
```

The intercept in this case would be for the case **color** = *blue*, but I want to make it *yellow*. How would I go about doing that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:33:04.370

Use `relevel`:

```
 # In this case, the reference category is setosa
model <- lm(Sepal.Length ~ Species, data=iris)
summary(model) 

# Now I want Virginica to be the reference category
iris$Species <- relevel(iris$Species, ref='virginica')
model <- lm(Sepal.Length ~ Species, data=iris)
summary(model) 
```

In your case it could be

```
flowers$color <- relevel(flowers$color, ref='yellow')
lm(preference ~ color, data = flowers) 
```

And this model will give you the estimation using as the ref category '`yellow`'

# c# - 如何在 Visual Studio 2010 中使用水晶报表

> ID：11727257
> 
> 赞同：-2
> 
> 时间：2012-07-30T18:20:28.447
> 
> 标签：c#, visual-studio-2010, crystal-reports

我正在使用 Visual Studio 2010 开发 C# 应用程序。现在我想在我的项目中使用 Crystal Report，但我是第一次使用 Visual Studio 2010。所以当我在项目中添加 Crystal Report 时，它会创建 .mht 文件并要求我下载 SAP 水晶报表..

[http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)

如上链接所示的几个下载选项.. 我尝试下载几个设置，其中包括
1.SAP Crystal Reports，Visual Studio 2010 版本 - 单击一次 2.SAP Crystal Reports，Visual Studio 2010
版本 - 单击一次（32 位)

但是在Visual Studio中安装后仍然没有效果并且仍然要求我下载..

我还想提一提我的系统是 32 位的，这就是为什么我不能选择 64 位的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:42:08.470

我认为这与这里的问题相同：

[在 Visual Studio 2010 中使用 Crystal Reports 2011](https://stackoverflow.com/questions/9324765/use-crystal-reports-2011-in-visual-studio-2010)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:32:00.543

最后我找到了解决方案..

通过下载产品 1)SAP Crystal Reports，Visual Studio 2010 版 - 标准版

由于这可以正常工作并与 Visual Studio 2010 IDE 成功集成..

# c - 共享文件描述符上的共享锁

> ID：11727260
> 
> 赞同：1
> 
> 时间：2012-07-30T18:20:43.373
> 
> 标签：c, linux, locking, file-locking

如果我们想在线程/进程之间共享锁，我们可以在共享文件描述符上同时使用`fcntl`锁定和锁定（不是同时）吗？`flock`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:05:59.077

`fcntl`锁是每个进程的锁。所以你不能在进程之间“共享锁”，但你可以在一个进程的线程之间。

`flock`锁是每个文件的表条目。因此，如果一个进程打开一个文件，然后`fork`多次打开，每个进程的文件描述符副本将操纵同一个锁。（不过，我认为这不是一个非常有用的功能。）

# sql - 全文搜索返回重复键

> ID：11727267
> 
> 赞同：2
> 
> 时间：2012-07-30T18:21:28.733
> 
> 标签：sql, sql-server-2005, full-text-search

我有一个类似下面例子的搜索。问题是如果术语“海滩”多次出现在 myTextColumn 中，则结果会多次返回一个键，例如“我去海滩是因为海滩很酷”。我只需要退回一次。

数据库服务器是 Microsoft SQL 2005

```
 SELECT DISTINCT          
    Src.[Key] AS MyID
  FROM            
    CONTAINSTABLE(MyTable, myTextColumn, N'FORMSOF(INFLECTIONAL,beach )',500) Src
  ORDER BY 
    MyID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T00:16:02.710

事实证明，该问题是由错误的全文搜索索引引起的。它必须使用“不跟踪更改”以及给定语言的正确分词器来重建。

# c# - 解决文本框背景焦点问题

> ID：11727269
> 
> 赞同：3
> 
> 时间：2012-07-30T18:21:35.337
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我有一个简单的问题，但我是 Silverlight 的新手。

我有一个透明的文本框，但是当我获得焦点时，文本框背景会变成白色。

怎么解决？

![在此处输入图像描述](../Images/54dfb6c8e0268dfa0b925b11540904ad.png) ![在此处输入图像描述](../Images/f6e67661931c1c2ceba52d3e0f2dd770.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:38:23.917

您只需要在 VisualStateManager 中为默认控件模板编辑“FocusedState”，或者在资源字典或 UserControl.Resources 等中提供您自己的类似下面提供的模板。

以下是如何将下面的样式模板应用到您的 TextBox 实例

```
<TextBox Style="{StaticResource YourCustomTextBoxStyle}/> 
```

这是一个默认的 WP7 文本框样式模板，其适当的位置已调整...

```
<Style x:Key="YourCustomTextBoxStyle" TargetType="TextBox">  
            <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilyNormal}"/>  
            <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>  
            <Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}"/>  
            <Setter Property="Foreground" Value="{StaticResource PhoneTextBoxForegroundBrush}"/>  
            <Setter Property="BorderBrush" Value="{StaticResource PhoneTextBoxBrush}"/>  
            <Setter Property="SelectionBackground" Value="{StaticResource PhoneAccentBrush}"/>  
            <Setter Property="SelectionForeground" Value="{StaticResource PhoneTextBoxSelectionForegroundBrush}"/>  
            <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>  
            <Setter Property="Padding" Value="2"/>  
            <Setter Property="Template">  
                <Setter.Value> 
                    <ControlTemplate TargetType="TextBox">  
                        <Grid Background="Transparent">  
                            <VisualStateManager.VisualStateGroups> 
                                <VisualStateGroup x:Name="CommonStates">  
                                    <VisualState x:Name="Normal"/>  
                                    <VisualState x:Name="MouseOver"/>  
                                    <VisualState x:Name="Disabled">  
                                        <Storyboard> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledBorder">  
                                                <DiscreteObjectKeyFrame KeyTime="0">  
                                                    <DiscreteObjectKeyFrame.Value> 
                                                        <Visibility>Collapsed</Visibility> 
                                                    </DiscreteObjectKeyFrame.Value> 
                                                </DiscreteObjectKeyFrame> 
                                            </ObjectAnimationUsingKeyFrames> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledOrReadonlyBorder">  
                                                <DiscreteObjectKeyFrame KeyTime="0">  
                                                    <DiscreteObjectKeyFrame.Value> 
                                                        <Visibility>Visible</Visibility> 
                                                    </DiscreteObjectKeyFrame.Value> 
                                                </DiscreteObjectKeyFrame> 
                                            </ObjectAnimationUsingKeyFrames> 
                                        </Storyboard> 
                                    </VisualState> 
                                    <VisualState x:Name="ReadOnly">  
                                        <Storyboard> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledBorder">  
                                                <DiscreteObjectKeyFrame KeyTime="0">  
                                                    <DiscreteObjectKeyFrame.Value> 
                                                        <Visibility>Collapsed</Visibility> 
                                                    </DiscreteObjectKeyFrame.Value> 
                                                </DiscreteObjectKeyFrame> 
                                            </ObjectAnimationUsingKeyFrames> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledOrReadonlyBorder">  
                                                <DiscreteObjectKeyFrame KeyTime="0">  
                                                    <DiscreteObjectKeyFrame.Value> 
                                                        <Visibility>Visible</Visibility> 
                                                    </DiscreteObjectKeyFrame.Value> 
                                                </DiscreteObjectKeyFrame> 
                                            </ObjectAnimationUsingKeyFrames> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="DisabledOrReadonlyBorder">  
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}"/>  
                                            </ObjectAnimationUsingKeyFrames> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="DisabledOrReadonlyBorder">  
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}"/>  
                                            </ObjectAnimationUsingKeyFrames> 
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="DisabledOrReadonlyContent">  
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxReadOnlyBrush}"/>  
                                            </ObjectAnimationUsingKeyFrames> 
                                        </Storyboard> 
                                    </VisualState> 
                                </VisualStateGroup> 
                                <VisualStateGroup x:Name="FocusStates">  
                                    <VisualState x:Name="Focused"/>  <!-- *** Right here is your culprit, I just ripped out the FocusedState Storyboard so it doesnt do anything when focused. *** -->

                                    <VisualState x:Name="Unfocused"/>  
                                </VisualStateGroup> 
                            </VisualStateManager.VisualStateGroups> 
                            <Border x:Name="EnabledBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="{StaticResource PhoneTouchTargetOverhang}">  
                                <ContentControl x:Name="ContentElement" BorderThickness="0" HorizontalContentAlignment="Stretch" Margin="{StaticResource PhoneTextBoxInnerMargin}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="Stretch"/>  
                            </Border> 
                            <Border x:Name="DisabledOrReadonlyBorder" BorderBrush="{StaticResource PhoneDisabledBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="Transparent" Margin="{StaticResource PhoneTouchTargetOverhang}" Visibility="Collapsed">  
                                <TextBox x:Name="DisabledOrReadonlyContent" Background="Transparent" Foreground="{StaticResource PhoneDisabledBrush}" FontWeight="{TemplateBinding FontWeight}" FontStyle="{TemplateBinding FontStyle}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" IsReadOnly="True" SelectionForeground="{TemplateBinding SelectionForeground}" SelectionBackground="{TemplateBinding SelectionBackground}" TextAlignment="{TemplateBinding TextAlignment}" TextWrapping="{TemplateBinding TextWrapping}" Text="{TemplateBinding Text}" Template="{StaticResource PhoneDisabledTextBoxTemplate}"/>  
                            </Border> 
                        </Grid> 
                    </ControlTemplate> 
                </Setter.Value> 
            </Setter> 
        </Style> 
```

[默认情况下，您还可以使用BasedOn](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon%28v=vs.95%29.aspx) Values将相同的模板应用于所有 TextBox 控件。

还有其他方法可以做到这一点，但这是开始学习基础知识的好地方。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:41:25.110

这更容易！

```
 private void TextBox1_GotFocus(object sender, RoutedEventArgs e)
    {
        TextBox tb = (TextBox)sender;
        tb.Background = new SolidColorBrush(Colors.Transparent);
        tb.BorderBrush = new SolidColorBrush(Colors.Transparent);
        tb.SelectionBackground = new SolidColorBrush(Colors.Transparent);
    }

    private void TextBox1_LostFocus(object sender, RoutedEventArgs e)
    {
        TextBox tb = (TextBox)sender;
        tb.Background = new SolidColorBrush(Colors.Transparent);
        tb.BorderBrush = new SolidColorBrush(Colors.Transparent);
        tb.SelectionBackground = new SolidColorBrush(Colors.Transparent);
    } 
```

而且效果很好！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:28:37.933

您所描述的是一种视觉状态。

当文本框获得焦点时，它会在内部触发视觉状态更改，在这种情况下包括白色背景。

看起来您正在使用 WP7，因此您可以从几个地方开始学习控制模板、样式以及如何更改它们。

首先看看[这篇](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-7-using-control-templates-to-customize-a-control-s-look-and-feel.aspx)关于控制模板的文章。

您会发现任何与 Silverlight 4 相关的内容都是相关的。

其次[，获得一份 Expression Blend for Windows Phone 的副本](http://go.microsoft.com/fwlink/?LinkID=185584)。启动一个新的 WP7 项目，将一个 TextBox 拖到您的设计图面上，右键单击 TextBox 并选择 Edit Template。然后你会开始看到改变所说的视觉状态是多么容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:34:11.837

看起来您想要单击以编辑样式。Click-to-edit 控件中有一个带有 xaml 代码的 silverlight 示例[- 怎么做？](https://stackoverflow.com/questions/4067455/click-to-edit-control-how-to-do-it)邮政。

# linux - 如何仅在第一次打开 konsole 时运行特定的 .bashrc 代码

> ID：11727273
> 
> 赞同：0
> 
> 时间：2012-07-30T18:22:03.040
> 
> 标签：linux, bash, shell, konsole

我的 .bashrc 中有一大段代码，每次运行 shell（我通常使用 konsole）时，都会出现一个开关盒，提供使用哪个分支或主干的选项。例子：

```
1) V0230
2) V0300
3) Dev

Enter Option: __ 
```

$PROJECT_HOME 和其他变量是根据所做的选择设置的。

令人讨厌的是，每次我打开一个新标签时，都会打印相同的屏幕。但是我想打开一个新的 konsole 并使用不同的分支，所以，简单的 export a variabe 不能成为解决方案

只有在打开 konsole 新屏幕时才能运行此代码。也许制作`alias konsole=konsole --run <desired-function>`. konsole 的文档没有提供帮助，甚至没有`man konsole`一个`konsole --help`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:11:25.120

只需创建一个别名：

```
$ alias konsole_select_branch='SELECT_BRANCH=true konsole' 
```

在你的`.bashrc`：

```
if [ -n "$SELECT_BRANCH" ]
then
   # select branch
fi 
```

并使用 konsole 或 konsole_select_branch 是否要选择一个分支或只是打开一个选项卡或窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:57:49.567

您可以放置​​一个脚本，`.bashrc`其中部分覆盖`.bashrc`；zsh 自动完成功能做了类似的事情，例如可能做类似的事情

```
 if [ -f $HOME/.somebashthing; ]; then
    . $HOME/.somebashthing
 else
    read SOMETHING
    echo SOMEVAR=$SOMETHING > $HOME/.somebashthing
 fi 
```

这只是一个草图；由您来填写详细信息。

# ruby-on-rails - 如何在 Ajax 请求处理期间显示动画图标 - Rails 3

> ID：11727274
> 
> 赞同：11
> 
> 时间：2012-07-30T18:22:07.400
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, jquery

我正在尝试为每个 ajax 请求显示一个加载指示器，我在 rails 3 应用程序中工作。

**HTML：**

```
<div id="loading-indicator">
 <%= image_tag("loading.gif", :id => "loading-indicator", :style => "display:none") %>
</div> 
```

**CSS：**

```
#loading-indicator {
   position: absolute;
   left: 10px;
   top: 10px;
 } 
```

**loading.js :**我放在assest/javascripts/

```
$(document).ready(function(){
    $(document).ajaxSend(function(event, request, settings) {
        $('#loading-indicator').show();
    });

    $(document).ajaxComplete(function(event, request, settings) {
        $('#loading-indicator').hide();
    });
}); 
```

**我的 application.js 看起来像这样：**

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

它不起作用，没有任何显示。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T18:28:26.420

我通常将这段代码保存到以下情况：

```
$(function() {
  $('#loading-indicator')
    .hide()  // hide it initially.
    .ajaxStart(function() {
      $(this).show(); // show on any Ajax event.
    })
    .ajaxStop(function() {
      $(this).hide(); // hide it when it is done.
  });
}); 
```

**- - 编辑 - -**

这不适用于最新版本的 jQuery。从 jQuery 1.8 开始，该`.ajaxStart()`方法只能附加到`document`. 因此，代码应如下所示：

```
$(function() {
  $('#loading-indicator').hide();  // hide it initially.
  $(document)  
    .ajaxStart(function() {
      $('#loading-indicator').show(); // show on any Ajax event.
    })
    .ajaxStop(function() {
      $('#loading-indicator').hide(); // hide it when it is done.
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-02T04:13:32.823

从技术上讲，您不能对同一文档中的两个不同元素使用相同的“id”两次。即您将 id="loading-indicator" 分配给 div 和 img 标签；这可能会导致 JS DOM 选择和操作错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:26:00.130

问题出在 css 样式标签和 css 位置

我通过这样做来修复它：

**HTML：**

```
<div id="loading-indicator">
 <%= image_tag("loading.gif", :id => "loading-indicator") %>
</div> 
```

**CSS：**

```
#loading-indicator {
   left: 10px;
   top: 10px;
 } 
```

# xml - 我的 jQuery AJAX 请求有什么问题？

> ID：11727276
> 
> 赞同：1
> 
> 时间：2012-07-30T18:22:15.777
> 
> 标签：xml, jquery

我正在尝试向返回 XML 文档的 ASPX 页面发出 jQuery $ajax GET 请求，但无法使其正常工作。我究竟做错了什么？

**jQuery**

```
$(document).ready(function() {
  $("#loading").show();
  $.ajax({
    type: "GET",
    url: "http://www.url.com/reports/xml.aspx",
    dataType: "xml",
    success: parseXml
});

function parseXml(xml) {
    $(xml).find("Year").each(function() {
    $("body").append( $(this).find("RevenueYear").text() + '<br />' });
}});​ 
```

**HTML**

```
<!DOCTYPE html>
<html>
   <head>
   </head>
   <body>

   </body>
</html> 
```

​<strong>XML

```
<root>
   <Year>
      <RevenueYear>2011</RevenueYear>
      <RevenueType>actual</RevenueType>
   </Year>
   <Year>
      <RevenueYear>2012</RevenueYear>
      <RevenueType>estimate</RevenueType>
   </Year>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:40:44.217

[归功于 BNL](https://stackoverflow.com/users/168056/bnl)，他提出了关键问题！

根据[jQuery.ajax()的 jQuery 文档](http://api.jquery.com/jQuery.ajax/)

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

[同源策略深入](http://en.wikipedia.org/wiki/Same_origin_policy)

前段时间，这里有一个[类似的问题](https://stackoverflow.com/questions/11333885/how-to-parse-html-content-using-javascript-or-jquery)- 解决方案非常简单：只需创建一个网络代理（PHP，ASP.NET，...）来传输内容@服务器端，所以你避免相同-起源政策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:29:37.470

您的`parseXml`函数有一些语法错误。你有错误的数量`}`和`)`。

它应该是：

```
function parseXml(xml) {
    $(xml).find("Year").each(function() {
        $("body").append( $(this).find("RevenueYear").text() + '<br />');
    });
} 
```

# android - 找不到 R.java

> ID：11727278
> 
> 赞同：0
> 
> 时间：2012-07-30T18:22:33.167
> 
> 标签：android, r.java-file

我是安卓新手。我刚开始学习android，为了练习，我在包“”下创建了一个项目“温度转换器” `de.vogella.android.temperature`，主要活动为“ConvertActivity”。

在创建项目时，我发现了错误

```
1\. ConvertActivity.java as R.cannot b resolved
2\. AndroidManifest.xml file as "the markup in document following the root element must be well formed"
3\. no R.java in gen folder 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:28:26.440

试试这个应该可以解决问题:)

1）在终端中运行它：rm ~/.android/debug.keystore

2）重建你的项目：去项目->清理->清理下面选择的项目->检查你的项目->确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:58:44.440

尝试以下操作：

1.  删除 R 文件的导入。
2.  然后清理项目。

# haskell - Haskell 构建元组列表

> ID：11727282
> 
> 赞同：0
> 
> 时间：2012-07-30T18:22:43.570
> 
> 标签：haskell, list-comprehension

我正在尝试建立一个元组列表。输入是元组列表，`[([char], int1, int2), ...]`输出是元组列表，如`[([char], int1, int2, (int1/int2)), ...]`. 我知道下面的这段代码是错误的，因为我认为它正在构建一个 tuples 列表的列表`[[(),(),(),()], [(),(),(),()]]`。

代码：

```
{- take a list of labels, values, and weights and return list of labels and fractions -}
fraclist [] = []
fraclist x = [ (y,r,q,z) : y <- first (head x) | r <- scnd (head x) | q <- last (head x) | z <- r/q ] : fraclist tail x

{- helper func to get values from tuples -}
frst (a,b,c) = a
scnd (a,b,c) = b
last (a,b,c) = c 
```

我怎样才能得到所描述的正确的输出形式？另外，我如何输出排序的元组列表，使得z按降序排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:30:14.193

我想你只想

```
fraclist xs = [(y,r,q, r `quot` q) | (y,r,q) <- xs] 
```

（注意：我使用`quot`而不是`(/)`因为您将组件命名为`int1`, `int2`。）

不使用列表推导的变体是

```
fraclist = map (\(y,r,q) -> (y,r,q, r `quot` q)) 
```

您的代码无法编译，在这种情况下，最好发布错误消息，以便人们一眼就能看出可能的原因是什么。

你得到一个解析错误在第`<-`一个

```
fraclist x = [ (y,r,q,z) : y <- first (head x) | r <- scnd (head x) | q <- last (head x) | z <- r/q ] : fraclist tail x 
```

因为第一个将生成的表达式与生成器表达式分开`(y,r,q,z) : y <- first (head x)`之前的表达式格式不正确。`|`我认为这只是一个错字，你也打算使用`|`而不是`(:)`那里。

然后你的列表理解中有几个分隔符，没有扩展名`|`是无效的。`ParallelListComp`但是，代码看起来不像是您在此处尝试的真正的并行列表推导，因为所有三个值都是从同一个列表中提取的。最后，最后一部分`| z <- r/q`再次不是格式正确的，因为`r/q`它不是一个可以在列表推导中从中提取元素的列表。你可能打算`let z = r/q`在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:30:23.113

此代码无法编译（语法错误），但在修复之后（我建议阅读[列表理解的语法](http://learnyouahaskell.com/starting-out#im-a-list-comprehension)（','s vs. '|'s））并进行一些其他更改：

*   使用了列表理解，它负责基本情况和列表上的映射——所以我能够消除`fraclist [] = []`和`head`//业务`tail``:`

*   使用模式匹配从输入元组中提取值——这通常比使用函数分离值更容易阅读

*   为文档目的添加了显式类型签名

这就是我认为你的意思：

```
fraclist :: (Integral t1) => [(t, t1, t1)] -> [(t, t1, t1, t1)]
fraclist xs = [(x, y, z, div y z) | (x, y, z) <- xs] 
```

我将把排序留给你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:44:56.853

这是一个没有列表理解的简单解决方案：

```
import Data.List

-- (string, int1, int2) -> (string int1, int2, (int1/int2))
fraclist list = map generateTuple list
    where generateTuple (label, value, weight) = (label, value, weight, (value)/(weight)) 

sortFracListByValueWeightRatio list = sortBy sorter list
    where sorter (_,_,_,d) (_,_,_,h) = if d > h then GT else LT

testList = [("first",3.0,4.0), ("second",4.0,7.0)] 
```

没什么特别的（我一周只用过haskell）。

**fraclist**通过将 generateTuple 函数映射到列表来工作。**generateTuple**函数只返回一个形式的元组（标题、值、权重、值/权重）。**Map**是一个内置函数，它简单地将给定函数应用于列表的每个元素。

sortFracListByValueWeightRatio （对不起，名字**太长**了）使用内置的**sortBy**函数（来自 Data.List），它使用自定义函数对给定列表进行排序以比较项目。**Sorter**是我的项目比较器，它只是比较价值/重量比并返回 GT 或 LT（大于/小于）。因此，列表项使用自定义比较器进行比较，并根据其答案进行排序。

可读性的显着改进可能是使用类型来描述值而不仅仅是元组。我也在测试列表中使用双打，但这很容易改变。

# html - HTML accesskey 'e' 在 Chrome 中不起作用

> ID：11727283
> 
> 赞同：6
> 
> 时间：2012-07-30T18:22:43.887
> 
> 标签：html, google-chrome, access-keys

我以简单的 html 表单将访问密钥分配`e`给电子邮件输入字段。我目前正在 chrome 中对此进行测试。因此，在按下`Alt`+`e`时，Chrome 菜单不会被切换到电子邮件输入字段，而是被激活。

我应该如何解决这个问题？如何在按下`Alt`+时获得输入元素的焦点`e`。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T20:41:23.217

属性的实现`accesskey`是依赖于浏览器的，[见一些变化](http://en.wikipedia.org/wiki/Access_key)。

它还会干扰浏览器或辅助软件可能具有的内置访问键分配。因此，无障碍专家不建议这样做。

在我的 Chrome 上，当我使用- -`accesskey="e"`时，会关注具有属性的元素。但如果我没有检查它，我就不会知道。`Alt``Shift``E`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-07T13:00:27.787

```
<a href="#U" id="AU" name="U" title="右上方功能區塊" accesskey="U" tabindex="3">:::</a> 
```

给它一个`name="U"`,and `href="#U"` `name=href`，Chrome 就可以了。

# xcode - 你能用 xcode 3 构建 10.7 应用程序吗？

> ID：11727285
> 
> 赞同：0
> 
> 时间：2012-07-30T18:22:50.063
> 
> 标签：xcode, macos

您可以在没有 Mac SDK 10.7 的情况下构建 Mac SDK 10.7 应用程序吗？比如使用旧的 Xcode？

或者你需要一个新的？Xcode 中包含的最早的 10.7 SDK 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:25:08.923

不，你不能。要为 10.7 构建应用程序，您需要 10.7 库，该库仅在 Xcode 4 中可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:37:45.453

您可以构建在 10.7 上运行的应用程序，但为了使用 10.7 特定的 API 调用，您需要在 10.7 或更高版本上使用 Xcode 构建。

最早包含 10.7 SDK 的 Xcode 是 Xcode 4.2 for Lion。请注意，Xcode 4.2 的 Snow Leopard 版本不包含 10.7 SDK。

您可以将较旧的 SDK 拖放到较新版本的 Xcode 中，并且通常可以让它们正常工作，但您不能另辟蹊径。

# c - 两个循环的时间复杂度

> ID：11727288
> 
> 赞同：-1
> 
> 时间：2012-07-30T18:22:58.777
> 
> 标签：c, algorithm, time-complexity

我有两个用 C 编写的循环，其中第一个运行`n`时间，其中`n`是输入字符串的长度。假设输入字符串是：`*& 201 +ACD 3491 AASD 3`。

循环将扫描每个字符，如果遇到数字，它将计算数字的长度，并将指针增加该距离。因此，当指针`p`指向`2`并读取一个整数时，它会将`sscanf`数字 ( `201`) 递增`p`3。两个嵌套循环，其中一个运行`N`时间，另一个运行`M`时间的时间复杂度为`O(N * M)`。

可以肯定地说，我的算法中的时间复杂度也是`O(N * M)`，`M`在该特定迭代中扫描的位数在哪里？如果不是，那么整个事情的时间复杂度是多少？

**编辑：**

这是一些代码

```
char c;
while ((c = fgets(fp)) != EOF) {
    // scans characters, if a digit is encountered, get digit_length
    for (int i = 0; i < digit_length; i++)
        p++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:31:53.250

如果您正在扫描以下所有数字：

```
201
01
1
3491
491
91
1
3 
```

那么时间将是（最坏情况）O（N ^ 2）。如果你以某种方式避免这种情况（你应该这样做），那么它将是 O(N)。

# java - 尝试将多个数字传递给数组

> ID：11727289
> 
> 赞同：0
> 
> 时间：2012-07-30T18:23:02.633
> 
> 标签：java, arrays, list, int

所以，我试图找到一种方法将数字的列表或其他东西（“列表”不是“列表”的实际 Java 定义，而是白话用法）放入数组中。它会是这样的：

```
Land FlintsFinger = new Land(0,0,1,0,9, 1 2 3); 
```

然后后面的数字进入 Land 中的数组（忽略其他数字）。

是否有任何语法可以即时执行此操作？我知道在 Python 中有元组，但在 Java 中有这样的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:25:22.377

你的意思是这样的：

```
public class Land {

    private final int[] values;

    public Land(int... values) {
        this.values = values;
    }
} 
```

或者如果前五个参数有其他含义：

```
public Land(int a, int b, int c, int d, int e, int... values) {
    this.values = values;
} 
```

然后将其称为：

```
new Land(0,0,1,0,9, 1, 2, 3); 
```

编译器将为您将最后三个值放入一个数组中。但是，没有仅使用空格的文字形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:26:32.923

你可以这样做：

```
Land FlintsFinger = new Land(0,0,1,0,9, new int[]{1, 2, 3}); 
```

或者您可以将构造函数更改为：

```
public Land(int fst, int scn, int thr, int frth, int ffth, int... vals){} 
```

并调用它

```
Land FlintsFinger = new Land(0,0,1,0,9,1,2,3); 
```

`public Land(int... vals)`（如果您输入的所有原始值都是整数，则您的构造函数可以缩短）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:26:04.827

```
public Land(Integer int1, Integer... ints){} 
```

你的意思是可变参数：[http ://www.java-tips.org/java-se-tips/java.lang/using-the-varargs-language-feature.html](http://www.java-tips.org/java-se-tips/java.lang/using-the-varargs-language-feature.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:26:23.510

你可以改变你的构造函数来接受一个整数数组

```
int [] params = new int{1,2,3};
Land FlintsFinger = new Land(0,0,1,0,9, params); 
```

# webkit - 桌面应用程序的 Webkit 包装器

> ID：11727290
> 
> 赞同：2
> 
> 时间：2012-07-30T18:23:06.970
> 
> 标签：webkit, wrapper, desktop

我有一个基于 HTML/JS 的桌面应用程序，它需要 WebKit 以合理的速度运行。通常情况下，我会忍受 IE 表现不佳，但它的 JS 引擎太慢了。

我通常会为此去 Appcelerator，但似乎他们已经停止使用桌面 SDK 并将其留给“社区”......

这需要在 Windows PC 上运行，或者我只会使用 Fluid (http://fluidapp.com)...

有没有我可以使用的简单 Webkit 包装器，或者我应该在 Qt 之类的东西中快速构建一个。我有一段时间没有使用 Qt，所以我不得不再次查看它并确保在其中实现了 WebKit...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T22:34:36.750

虽然它有点面向 node.js，[但 AppJS](https://github.com/appjs/appjs)可能会提供您正在寻找的东西。如果它还不支持其他脚本语言，它至少可以提供一个很好的示例。

**更新：在我最初回答之后的时间里，** [node-webkit](https://github.com/rogerwang/node-webkit)似乎扮演了类似的角色，但比 AppJS 聚集并保持了更多的动力。它更集中一点，因为它不会尝试在简单地将 node.js API 暴露给窗口的 JS 上下文的基础上提供更多额外的“框架”。

还有[https://github.com/atom/atom-shell](https://github.com/atom/atom-shell)，我刚刚了解到并且可能类似。

需要注意的另一件事是（可能使用其中任何一个，但至少使用 node-webkit），您**必须**小心应用程序中的任何[类似 XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)的漏洞，攻击者可以利用该漏洞获得对用户本机的完全访问权限。因此，如果您只是需要将离线 Web 应用程序打包到可下载的桌面发行版中，您可能希望研究更多类似 PhoneGap 的解决方案（例如[Mac OS X 作为 PhoneGap 平台](https://stackoverflow.com/questions/12017811/mac-os-x-as-phonegap-platform)）或普通的 Web 视图包装器（如 OP 中提到的）不会像 node.js 那样将整个操作系统级别的原生 API 暴露到 JavaScript 环境中。

# wso2 - 简单的 WSO2 ESB Soap 接口

> ID：11727294
> 
> 赞同：0
> 
> 时间：2012-07-30T18:23:24.587
> 
> 标签：wso2, wso2esb

我自己：WSO2 新手，评估多个 ESB 产品

这是我想用 wso2 ESB 做的事情

1.  应用程序“A”将发送一个邮政编码 (SOAP-WDSL) 到 WSO2-ESB
2.  WSo2 将使用该邮政编码并查询 National WeatherService 并在[http://graphical.weather.gov/xml/SOAP_server/ndfdXMLserver.php?wsdl](http://graphical.weather.gov/xml/SOAP_server/ndfdXMLserver.php?wsdl)
    获取邮政编码 LatLonListZipCode 的 Lati-Long 方法
3.  将经纬度返回到应用程序“A”

有人可以指导我，比如从哪里开始以及需要的组件等等？

我对所有的术语以及复杂的产品名称和层次结构（碳、氧等）感到困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:44:44.527

对于您的要求，您只需要在 WSO2 ESB 中创建一个代理服务来调用此后端服务。（国家气象局）

如果你想开始使用 WSO2 ESB，我建议你先去。[WSO2 ESB 示例指南](http://wso2.org/project/esb/java/4.0.3/docs/samples_index.html)和[WSO2 ESB 配置](http://wso2.org/project/esb/java/4.0.3/docs/samples_index.html)。您可以在哪里开始使用它。

对于您的场景，您可以简单地按照以下步骤创建一个简单的 WSDL 代理，创建一个您以后可以改进的工作场景（例如路由、监控等）

1) 登录 WSO2 ESB。

2）转到代理服务添加部分

3) 选择基于 WSDL 的代理作为模板

4) 提供代理名称、WSDL url、服务名称 (ndfdXML)、WSDL 端口 (ndfdXMLPort) 并勾选 Publish Same Service Contract

并创建服务。

现在您已经通过 WSO2 ESB 公开了相同的服务。您可以转到服务列表部分。获取服务 EPR 详细信息并使用您的应用程序调用服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T03:34:43.997

下面是为初学者完成的一项不错的工作。与您的情况类似 [http://dakshithar.blogspot.com/2012/07/routing-and-service-chaining-with-wso2.html](http://dakshithar.blogspot.com/2012/07/routing-and-service-chaining-with-wso2.html)

# vba - Excel VBA 条件过滤器

> ID：11727297
> 
> 赞同：1
> 
> 时间：2012-07-30T18:23:31.207
> 
> 标签：vba, excel, autofilter

简单的 VBA 问题。我需要一个 VBA 子例程，它将根据条件过滤我的数据（在这种情况下，如果 C 列中的内容等于 11-Jun-12 [41071 in numeric form]）而不循环整个数据集。我在 Internet 上进行了一些过滤，但似乎没有什么是我想要的（或者我只是不明白发生了什么）。为了清楚起见，这是我想要的一个例子：

我想要[http://imgur.com/qebVv](http://imgur.com/qebVv)

去[http://imgur.com/zDncq](http://imgur.com/zDncq)。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:21:05.663

假设电子表格的设置与屏幕截图中显示的一样，您可以执行以下操作

```
Sub DateFilter()
    'hide dialogs
    Application.ScreenUpdating = False
    'filter for records that have June 11, 2012 in column 3
    ActiveSheet.Cells.AutoFilter Field:=3, Criteria1:="6/11/2012"
    'deletes all matching rows
    ActiveSheet.AutoFilter.Range.Delete
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:43:17.430

杰克拉德克利夫，

你的意思是一个简单的自动过滤器，例如：

```
Sub SimpleColumnDateFilter1()

' Quick Recorded Macro
' Select a Column
' Activate Autofilter
' For a range C1 through the rest of C
' Autofilter such that the column will display dates not equal to 11/15/2012

Columns("C:C").Select
Selection.AutoFilter
ActiveSheet.Range("C:C").AutoFilter Field:=1, Criteria1:= _
    "<>11/15/2012", Operator:=xlAnd
End Sub 
```

# php - AJAX 全局阵列存储

> ID：11727298
> 
> 赞同：3
> 
> 时间：2012-07-30T18:23:33.863
> 
> 标签：php, javascript, ajax, arrays, global

长话短说，我正在尝试将返回 AJAX 的 JSON 中的相应数据值存储到这些全局数组中。我知道数组构造正确，因为我已经在 AJAX 中放置了警报，但是当我将它放在 AJAX 之外时，数组仍然是未定义的。

如何导出整个 popData JSON 对象以对其进行处理并将值存储在全局数组中，或者在 AJAX 中填充数组以在调用之外进行？我需要另一个函数可以访问这些数组，以将总体值与用户选择的窄范围值进行比较——如果有人想提出更好的方法，但它必须在 onLoad 上提取总体值已经在 HTML 中完成。我认为这是在服务器上使用最少的 AJAX 调用来做到这一点的最简化的方法，但我愿意接受建议！:D

```
 var popProducers = new Array();
    var popProducersCount = new Array();

    function getPopulationInfo(){

        $.ajax({
            url:phpURL,
            cache:false,
            dataType:"json",
            data: { },
            success:function(popData){

                for (i=0;i<popData.length;i++){

                    //producers and producersCount should be the same length at all times!
                    //If current producer name isn't in array already
                    if(popProducers.indexOf(popData[i].ProducerName) == -1){
                        //add new element to represent new producer quantity (producerCount.length returns number of elements in the array, thus if there are no elements = 0 thus making index 0 equal to 1 and so on)
                        popProducersCount[popProducersCount.length] = 1;
                        //Adds the producer name to the list of producers
                        popProducers[popProducers.length] = popData[i].ProducerName;
                    } else {
                        //Otherwise, it will increment the index of the producersCount array corresponding with the pre-existing producer name's index by 1
                        popProducersCount[popProducers.indexOf(popData[i].ProducerName)] += 1;
                    }

                }

            }
        });

        alert("Population Data Alert: " + popProducers); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:26:31.213

`.ajax()`默认情况下，其底层`XMLHttpRequest()`创建**异步**请求。这只是意味着，您的`alert()`语句在您的`success`处理程序之前遇到。

这里的简单解决方案，将其移动`alert()`到`success`最底部的处理程序中。

如果你想以更合适的方式处理它，你可以像这样使用 jQuerys`Deferred`对象

```
function getPopulationInfo(){
    return $.ajax({
       // lots of stuff
    });
 } 
```

然后像这样称呼它

```
getPopulationInfo().done(function() {
    alert("Population Data Alert: " + popProducers);
}); 
```

通过返回`.ajax()`我们隐式返回的方法 a `Deferred object`。长话短说，您可以为`success`(.done())、`error`(.fail()) 和`complete`(.always())传递一些额外的回调

# php - 导致空白或损坏 cookie 的浏览器竞争条件？

> ID：11727299
> 
> 赞同：1
> 
> 时间：2012-07-30T18:23:56.640
> 
> 标签：php, cookies

浏览器是否有可能偶尔清空 cookie，尤其是在页面更改之前它还没有完成写入 cookie 的情况下？

我们碰巧有一个 cookie 会改变每个请求。

最近我们进行了切换，以便通过 ajax 请求写入 cookie。

代码（恰好在 PHP 中）如下所示：

```
Request
  Cookie: xyz ...
Response
  Ajax Request
    Cookie: xyz ...
  Ajax Response with Set-Cookie: xyz... 
```

每次页面请求都会发生这种情况，但似乎偶尔我们会看到浏览器端的 cookie 被清空。

是否有可能使用 cookie 更改每个请求以防止损坏？

# c++ - 如何在 OpenSSL 中初始化 X509_STORE 对象？

> ID：11727302
> 
> 赞同：0
> 
> 时间：2012-07-30T18:24:06.307
> 
> 标签：c++, cryptography, openssl, x509, ocsp

我正在尝试按照[此处](http://etutorials.org/Programming/secure+programming/Chapter+10.+Public+Key+Infrastructure/10.12+Checking+Revocation+Status+via+OCSP+with+OpenSSL/)所述实现 OpenSSL 的 OCSP 功能，它需要 X509_STORE 对象作为参数。我有要检查吊销状态的 x.509 证书，它是颁发者证​​书和 OCSP 主机的 URL。如何正确初始化具有此信息的 X509_STORE 对象？（我在 XCode 和 OpenSSL v.1.0.0g 中使用 C/C++）

# c# - 如何使用ajax访问带有参数的方法后面的代码

> ID：11727303
> 
> 赞同：0
> 
> 时间：2012-07-30T18:24:10.010
> 
> 标签：c#, jquery, .net, ajax, code-behind

目前我有这个...

```
 public void lnkTag_Click(object sender, EventArgs e){
        ...
    } 
```

它附加到链接按钮的 click() 事件，但问题是当用户在单击一个后尝试返回浏览器时，这需要重新提交表单。

我想把它变成一个传递链接文本值的ajax调用。所以在后面的代码中有这样的方法：

```
 public void lnkTag_Click(string linkText){
        ...
    } 
```

通过 ajax 访问此方法的位置

```
 $('myLinkButton').click(function() {
      $.ajax...
  }) 
```

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:38:57.973

执行以下操作以发送参数值：

```
$('myLinkButton').click(function() {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "yourpage.aspx/lnkTag_Click",
        data: "{'linkText': '" + linkTextValue + "'}",
        dataType: "json",
        success: function(data) {
            //do something if it's successful
        },
        error: function(jqXHR, textStatus, errorThrown) {
            //do something if there's an error
        }
    });
}); 
```

# php - 如何在 PHP 中使用 STRIPOS 选择目录中的部分文本文件并打印部分？

> ID：11727304
> 
> 赞同：0
> 
> 时间：2012-07-30T18:24:14.467
> 
> 标签：php, arrays, stripos

我正在尝试从目录中的文件中读取文本，并将其显示为图像下方的描述文本。我已经能够使用 STRIPOS 函数来分离文本的每个部分，除了最后一部分有问题。最后一部分的标题是“描述：”，实际上是多行。我不知道如何显示更多内容，而不仅仅是显示“描述：”的行。我想从“描述：”打印到文件末尾。我将在此消息中发布我的代码和文本文件。

```
$dirname = 'data';

$dirhandle = opendir($dirname);

$housestextarray = array();

if ($dirhandle)
        {
            while (false !==($file = readdir($dirhandle)))
            {
                if ($file !='.' && $file !='..')
                {
                    array_push($housestextarray, $file);
                }
            }

            closedir($dirhandle); 
        }

    sort($housestextarray);

    foreach ($housestextarray AS $housedescription)
        {
            $housetext = '';

            $description = '';

            $pos = stripos($housedescription, 'house_');

            if ($pos === false)
            {
                //nothing
            } else {
                    $lines_in_file = count(file($housedescription));

                    $fp=fopen($housedescription,"r");

                    for ($cntr = 1; $cntr <= $lines_in_file; $cntr++)
                {
                    $cityline=fgets($fp);
                    $priceline=fgets($fp);
                    $bedroomsline=fgets($fp);
                    $bathsline=fgets($fp);
                    $footageline=fgets($fp);
                    $realtorline=fgets($fp);
                    $grabberline=fgets($fp);

                    $descriptionline=fgets($fp);

                    //print $cityline;
                    //print $descriptionline;

                    //$housetext .= $line;

                    $citypos = stripos($cityline, 'City:');

                    if ($citypos === false)  //found the city line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $city= $cityline."<br />\n";
                        //print $city;
                    } 

                    $pricepos = stripos($priceline, 'Price:');

                    if ($pricepos === false)  //found the city line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $price = $priceline."<br />\n";
                        //print $price;
                    } 

                    $bedroomspos = stripos($bedroomsline, 'Bedrooms:');

                    if ($bedroomspos === false)  //found the city line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $bedrooms = $bedroomsline."<br />\n";
                        //print $bedrooms;
                    } 

                    $bathspos = stripos($bathsline, 'Baths:');

                    if ($bathspos === false)  //found the city line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $baths = $bathsline."<br />\n";
                        //print $baths;
                    } 

                    $footagepos = stripos($footageline, 'Footage:');

                    if ($footagepos === false)  //found the city line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $footage = $footageline."<br />\n";
                        //print $footage;
                    } 

                    $realtorpos = stripos($realtorline, 'Realtor:');

                    if ($realtorpos === false)  //found the realtor line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $realtor = $realtorline."<br />\n";
                        //print $realtor;
                    } 

                    $grabberpos = stripos($grabberline, 'Grabber:');

                    if ($grabberpos === false)  //found the grabber line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $grabber_formatted = str_replace('Grabber:','', $grabberline);
                        $grabber = "<h3>".$grabber_formatted."</h3><br />\n";
                        //print $grabber;
                    } 

                    $descriptionpos = stripos($descriptionline, 'Description: ');
                                                                    if ($descriptionpos === false)  //found the description line first time
                    {
                        //nothing
                    }
                    else
                    {
                        $description .= $descriptionline."<br />";

                        //print $description;

                    }
                }
                    $output = $grabber."<br/>".$city.$bedrooms.$baths;
                    $output .= $price.$footage.$realtor."<br />";
                    $output .= "<br />".$description."<br />";

                    print $output;

            } 
```

这是文本文件内容示例（六个文件之一）：

城市：OceanCove
价格：950,000 美元
卧室：5
浴室：3
影片：3000 平方英尺
房地产经纪人：Shirley Urkiddeng
Grabber：梦幻之家，美景！
描述：
您永远不会厌倦在客厅沙发上观看日落或在后门廊欣赏日出，俯瞰美丽的珊瑚峡谷。千载难逢的机会！

在 Branden 的帮助下更新代码：

```
 function houseDescriptions()
{
    //$DOCUMENT_ROOT = $_SERVER['DOCUMENT_ROOT'];
    //$dirname = $DOCUMENT_ROOT.'data';
$dirname = 'data';

$dirhandle = opendir($dirname);

$housestextarray = array();

if ($dirhandle)
        {
            while (false !==($file = readdir($dirhandle)))
            {
                if ($file !='.' && $file !='..')
                {
                    array_push($housestextarray, $file);
                }
            }

            closedir($dirhandle); 
        }

    sort($housestextarray);

    foreach ($housestextarray AS $housedescription)
        {
                        $housetext = '';

                        $description = '';

                        $data ="";

                        $pos = stripos($housedescription, 'house_');

                        if ($pos === false)
                        {
                            //nothing
                        } else {
                            $file_handle = fopen($housedescription, "r");
                    $data = "";
                    while (!feof($file_handle)) {
                       $filestrings .= fgets($file_handle);
                    }
                    fclose($file_handle);

                    //You'll need to double check the Regex if it doesn't work.
                    $data = preg_split('#\b(City:|Bedrooms:|Baths:|Footage:|Realtor:|Grabber:|Description:)\b#', $filestrings);

                    $city = $data[0];
                    $bedrooms = $data[1];
                    $baths = $data[2];
                    $footage = $data[3];
                    $realtor = $data[4];
                    $grabber = $data[5];
                    $description = $data[6];                    
                    $output = $grabber."<br />".$city.$bedrooms.$baths;
                    $output .= $price.$footage.$realtor."<br />";
                    $output .= "<br />".$description."<br />";

                    print $output;

            }   

        }
        //return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:56:26.443

# 用正确的正则表达式更新

fgets 在尝试从文本文件中获取字符串时可能会出现问题，尤其是长字符串，其中可能存在您在文本编辑程序中看不到的换行符。更好的方法是从文本文件中获取所有信息并将其存储在一个字符串中，然后使用[preg_split()](http://php.net/manual/en/function.preg-split.php)处理所有搜索。下面的代码（假设我的正则表达式是正确的，您可能需要重新检查它）将为您从文本文件中获取所有变量。

```
//Append the file location to the file name
$housedescription = $dirname."/".$housedescription;

//Get all contents of the file and save them into $filestrings
$file_handle = fopen($housedescription, "r");
$data = "";
while (!feof($file_handle)) {
   $filestrings .= fgets($file_handle);
}
fclose($file_handle);

//Remove any pesky \n newlines that were added by the text file
$filestring = preg_replace("/[\n\r]/","",$filestrings); 

//Case Sensitive Regex Search, split the string into an array based on the keywords
$data = preg_split('/(City:|Price:|Bedrooms:|Baths:|Footage:|Realtor:|Grabber:|Description:)/', $filestring, -1, PREG_SPLIT_NO_EMPTY);

//Save all the keywords to vars
$city = "City: ".$data[0];
$bedrooms = "Bedrooms: ".$data[1];
$baths = "Baths: ".$data[2];
$footage = "Footage: ".$data[3];
$realtor = "Realtor: ".$data[4];
$grabber = "Grabber: ".$data[5];
$description = "Description: ".$data[6]; 
```

注意添加了 $filestring = preg_replace("/[\n\r]/","",$filestrings); 这将删除文本文件中任何额外的新行，因此没有
您不想要它们的地方。

当然，绝对理想的做法是将所有数据存储在 mysql 数据库而不是 .txt 文件中，因为它更安全，数据访问速度更快。但是，如果您更喜欢 .txt，请尽量不要多次打开同一个文件。

一些注意事项：[如何使用正则表达式](http://weblogtoolscollection.com/regex/regex.php/)、[fopen](http://php.net/manual/en/function.fopen.php)、[fgets](http://php.net/manual/en/function.fgets.php)、[preg_replace](http://php.net/manual/en/function.preg-replace.php)、[preg_split](http://php.net/manual/en/function.preg-split.php)

# jquery - 插件无法识别“这个”jQuery

> ID：11727307
> 
> 赞同：0
> 
> 时间：2012-07-30T18:24:31.027
> 
> 标签：jquery, plugins

我试图让我的插件识别它被调用的元素，例如：

```
(function($) {
    $('#element').myPlugin({});
})($) 
```

在不同的页面上 -

```
(function($) {
    $.fn.myPlugin = function(settings) {
        var element = $(this);
        $.post('connection.php',{},
            function(output) {
                element.html(output);
            });
    }
})($) 
```

但由于某种原因它不起作用..我很困惑

HTML页面：

```
<body>
    <div id="element">adsf</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:55:50.580

在加载 DOM 之前调用您的函数。尝试添加

```
 $(document).ready(function(){...your code..}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:04:39.473

我认为让你失望的是：

```
(function($) {
    $('#element').myPlugin({});
})($) 
```

和这个不一样：

```
$(function(){
    $('#element').myPlugin({});
}); 
```

所以一切正常，但是 DOM 元素还没有像您预期的那样存在。

# java - 使用 Servlet 对浏览器和 android 应用程序进行相同的登录身份验证

> ID：11727308
> 
> 赞同：2
> 
> 时间：2012-07-30T18:24:34.920
> 
> 标签：java, android, servlets, login

嗨，我正在为 android 本机应用程序构建一个登录模块。该网站有一个登录模块。

我想使用相同的 servlet 来验证浏览器和 android 应用程序的用户 ID 和密码。

我想要

1）如果用户通过浏览器登录，则将用户重定向到新的 jsp 页面 2）如果他通过应用程序请求，我想向 android 应用程序发送成功/错误响应代码。

我擅长将用户重定向到新的 jsp。但是如何检查用户是否通过android应用程序登录。？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:25:13.540

你为什么不在android上使用给定的[httpuser.agent](https://stackoverflow.com/questions/3904467/android-http-user-agent)编写你的应用程序并在你的servlet中过滤掉它？

# sql - 获取表中的每一行重复项

> ID：11727310
> 
> 赞同：1
> 
> 时间：2012-07-30T18:24:39.437
> 
> 标签：sql, duplicates

我有代码可以抓取 SQL 表中的重复项并按跟踪号对它们进行分组。我想看到重复的每一行，而不仅仅是让它们分组。获取重复组的代码如下：

```
Select
      CarrierID
    , Mode
    , TrackingNumber
    , PickupID
    , Reference1
    , Reference2
    , Quantity
    , BilledWeight
    , ActualWeight
    , Zone
    , ServiceLevel
    , PickupDate
    , SenderCompany
    , SenderAddress
    , SenderCity
    , SenderState
    , SenderZip
    , ReceiverCompany
    , ReceiverAddress
    , ReceiverCity
    , ReceiverState
    , ReceiverZip
    , FreightCharge
    , Fuel
    , Accessories
    , TotalCharges
    , WrongName
    , WrongCompany
    , WrongAddress
    , WrongCity
    , WrongState
    , WrongZip
    , WrongCountry
    , CorrectedName
    , CorrectedCompany
    , CorrectedAddress
    , CorrectedCity
    , CorrectedState
    , CorrectedZip
    , CorrectedCountry
    , Count(TrackingNumber) as TrackingNumberTotal
    , Count(TotalCharges) as NumberofDuplicates
from Prasco_GencoShipments
group by 
      TrackingNumber
    , TotalCharges
    , CarrierID
    , Mode
    , TrackingNumber
    , PickupID
    , Reference1
    , Reference2
    , Quantity
    , BilledWeight
    , ActualWeight
    , Zone
    , ServiceLevel
    , PickupDate
    , SenderCompany
    , SenderAddress
    , SenderCity
    , SenderState
    , SenderZip
    , ReceiverCompany
    , ReceiverAddress
    , ReceiverCity
    , ReceiverState
    , ReceiverZip
    , FreightCharge
    , Fuel
    , Accessories
    , TotalCharges
    , WrongName
    , WrongCompany
    , WrongAddress
    , WrongCity
    , WrongState
    , WrongZip
    , WrongCountry
    , CorrectedName
    , CorrectedCompany
    , CorrectedAddress
    , CorrectedCity
    , CorrectedState
    , CorrectedZip
    , CorrectedCountry
having (count(TrackingNumber) > 1 and (count(TotalCharges) > 1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:07:22.897

如果 CTE 可用（也可以通过子选择完成）：

```
WITH dups AS (
        SELECT TrackingNumber, TotalCharges
        FROM Prasco_GencoShipments
        GROUP BY TrackingNumber, TotalCharges
        HAVING COUNT(*) > 1
        )
SELECT ta.*
FROM Prasco_GencoShipments ta
JOIN dups du ON du.TrackingNumber = ta.TrackingNumber AND du.TotalCharges = ta.TotalCharges
ORDER BY
      TrackingNumber
      , TotalCharges
        ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:43:05.707

查找**field1**的重复项（和**field2**，已评论）：

```
SELECT t1.*

    FROM test t1

    INNER JOIN test t2
    ON t2.field1 = t1.field1 -- AND t2.field2 = t1.field2

    WHERE t1.id <> t2.id 
```

[SQLFiddle](http://sqlfiddle.com/#!3/e1864/7)

# azure - 带有新管理门户的 Windows Azure CDN

> ID：11727313
> 
> 赞同：5
> 
> 时间：2012-07-30T18:24:44.737
> 
> 标签：azure

如何使用新的管理门户查找 Windows Azure CDN。需要注意的是，我使用的是预览门户，并在 90 天内免费试用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-26T12:24:18.953

我就此联系了 MS 支持，因为旧的门户链接不再可用。

以下是截至 2013 年 9 月 26 日的回复：

> 我们正在构建下一代 Windows Azure 内容交付网络 (CDN) 架构，在此期间我们不再接受新的 CDN 客户。由于 CDN 功能最近已过渡到新的 Azure 管理门户，我们只为在旧管理门户中使用 CDN 的客户自动启用它，以便他们可以继续管理其 CDN 配置。对于其他所有人，新门户中未启用 CDN 功能。我们强烈建议您等到我们准备好构建我们的下一代 Azure CDN 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:50:21.523

现在，您需要访问以前的门户，您可以通过单击右上角（显示您的电子邮件的位置）找到该门户，然后将显示头像栏，其中包含转到“上一个门户”的选项

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T01:05:58.413

在预览门户中，将鼠标悬停在顶部的绿色预览链接上，然后单击链接“带我到上一个门户”。然后在左侧，单击托管服务、存储帐户和 CDN。

如果您还没有存储帐户，则必须从那里创建一个存储帐户。如果这样做，请从左侧菜单中选择 CDN。在那里，选择您想要的存储帐户，然后单击顶部导航中的新端点按钮。选中启用 CDN 复选框，然后单击确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:33:21.037

我相信该功能不在新门户中。您将不得不使用旧的 (Silverlight) 门户。

# java - 针对大量小额传输的 Netty 应用程序设计

> ID：11727315
> 
> 赞同：3
> 
> 时间：2012-07-30T18:24:49.363
> 
> 标签：java, networking, netty

我正在尝试决定如何设计一个我认为有一些不寻常要求的 Netty 应用程序。基本上有一个客户端发起请求。该请求翻译成英文为“递归地在 /whatever/ 目录下获取一堆小文件，关于这些文件，我只能告诉你它们的名称在 AAAAAAA.bin 和 CCCCCCC.bin 之间”。

因此，服务器需要接受请求，并开始扫描服务器端的一些目录，并开始快速将所有这些小文件流回。性能很重要，但确保我收到了 AAAAAAA.bin 和 CCCCCCC.bin 之间的所有文件也很重要。

那么让客户端和服务器本身基本上异步是一个好的设计吗？换句话说，客户端发起对话，发送请求，并简单地接收一个确认 UUID 令牌或其他东西，然后服务器开始收集文件（可能每个线程一个），联系客户端，并将单个文件传递给它使用 UUID？我认为客户端可以定期询问服务器“您是否完成了流式传输与 UUID 令牌/sometoken/匹配的我的请求？

我不太确定这将如何配置，因为客户端和服务器都将启动对话。或者，也许其他人有更好的设计理念？同样，性能（从请求发起到完成所有文件传输的总时间）至关重要。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:45:54.060

假设您完全控制协议（即您不限于 HTTP），那么可能类似于

1.  客户端连接到服务器并发送目录请求。如果客户端正在重新启动中止的传输，则使用来自 2 的令牌发送请求
2.  服务器对此传输使用唯一令牌进行响应。如果传输正在重新启动，它会使用来自 1 的令牌进行响应。
3.  服务器识别此传输的所有文件，给每个文件一个唯一的 id，并将文件集与 2 中的令牌相关联（可能想在生成令牌之前找出文件）
4.  对于每个文件，服务器都会发送一条包含文件长度、唯一文件 ID、文件（以及任何其他信息，例如文件名）的消息。服务器尽快发送每个文件，并且不等待来自 5 的确认。
5.  客户端使用唯一的文件 ID 确认收到的每个文件。
6.  发送最后一个文件后，服​​务器发送“传输完成”消息。

上述所有通信都发生在单个通道上。重要的一点是您正在流式传输文件并异步接收确认，从而减少网络延迟。

如果您有很多文件，我不会为每个文件使用一个线程。可能是一个线程池，每个要发送的文件都被添加到作业队列中，或者可能每个唯一的目录都被添加到作业队列中，并且一个线程一次处理一个目录。您可能需要同步对 channel.write(..) 的调用。我还假设客户端可以无序地接收文件。

实际上，我最初只使用一个线程来读取文件。一旦它可靠地工作，看看是否有多个线程可以让您通过保持网络繁忙来提高性能（即不等待读取下一个文件）。

当写入通道时，我可能会在包含文件详细信息的对象上写入（唯一的 id、文件数据（如果足够小）、文件名（如果需要）），然后有一个编解码器可以将对象转换为 / 来自通道缓冲区。

根据您的具体情况，客户端可以打开到服务器的多个连接，您可以将连接分配给特定的文件读取线程，从而避免任何通道同步问题。通过这种方式，您可能会获得一些性能提升，但最有可能的是，您只会看到连接之间共享的可用带宽。

# jquery - 解析 JSON 字符串的最佳方法是什么？

> ID：11727316
> 
> 赞同：1
> 
> 时间：2012-07-30T18:24:50.657
> 
> 标签：jquery, json, parsing, getjson

我已经`'jItems'`使用`$.getJSON`. 在页面上，我有一个 jItems 中的项目适合的类别列表。我的愿望是单击一个类别并触发一个功能以仅显示该类别中的项目。`getJson`使用jquery`each()`或`find()`从中提取正确的项目会更好`jItems`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:30:25.007

JSON 的美妙之处在于您不需要解析它。它已经是一个 JavaScript 对象。您需要做的是遍历这些值并为您的类别列表构建输出。

如果没有看到您的 JSON 结构，我无法提出更多建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:02:34.957

这完全取决于您的数据的外观，但这可能会对您有所帮助，我认为：

```
var jsonCats = [
    {"id": "category1", "items": [{"iid":"item1"}, {"iid":"item2"}, {"iid":"item3"}]},
    {"id": "category2", "items": [{"iid":"item4"}, {"iid":"item5"}, {"iid":"item6"}]},
    {"id": "category3", "items": [{"iid":"item7"}, {"iid":"item8"}, {"iid":"item9"}]},
    {"id": "category4", "items": [{"iid":"item0"}]}
];

$.each(jsonCats, function(key, value) {
    var category = $("<li>" + this.id + "</li>");
    var items = this.items;

    $("#categories").append(category);

    category.click(function() {
        $("#items").empty();
        for (var j in items) {
            var item = $("<option>" + items[j].iid + "</option>");

            $("#items").append(item);
        }
    });
}); 
```

To see an example: [http://jsfiddle.net/tive/U63EY/](http://jsfiddle.net/tive/U63EY/)

**EDIT:** Now I read your question again ... it's actually better to use for loops since this is faster. The $.each() is a wrapper of the for loop anyway. (Hence the example :D)

[http://jsperf.com/jquery-each-vs-for-loop/6](http://jsperf.com/jquery-each-vs-for-loop/6)

# c# - Windows 服务“沙盒”

> ID：11727328
> 
> 赞同：1
> 
> 时间：2012-07-30T18:25:27.113
> 
> 标签：c#, windows-services

我们面临着维护大量 Windows 服务的问题。这个想法是将windows服务重新组织到类库中，并将库连接到一个主windows服务。有什么好主意吗？请有任何建议）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:32:31.733

我将您的问题解释为“我们有大量作为服务运行的小型 Windows 应用程序 - 我们如何简化它们？”。

一般来说，许多较小的程序会更好。单个单体应用程序难以维护和测试；当有人需要做一个小的改变时，它可能会给应用程序的许多其他组件带来灾难性的后果。正如上面 Chris Knight 评论的那样，它还可能导致无法在不关闭整个服务的情况下更改一个小型应用程序。

另一方面，很多小程序都存在广度问题。您可能希望确保所有小程序都在一致的框架上运行——即它们都将结果记录到同一个地方，它们都使用标准化的配置系统，并且都在同一个地方进行管理。

我见过人们编写服务的情况，因为他们需要“在特定条件发生时”运行任务，因此他们将其设为持续运行的服务并持续检查该条件。您是否有可能将您的一些服务转变为触发启动单个应用程序？

如果这不是正确的解释，请告诉我:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:11:45.213

在称为 TopShelf 的单个 Windows 服务中有一个用于托管“服务”的框架。您可能要考虑使用它。 [https://github.com/Topshelf/Topshelf](https://github.com/Topshelf/Topshelf)

# c++ - 关于vim的初学者问题

> ID：11727329
> 
> 赞同：1
> 
> 时间：2012-07-30T18:25:32.223
> 
> 标签：c++, windows, vim

问题 #1：如果我有这样的 C++ 代码

```
#include <iostream>

using namesapce std;

int main() {
  int a;
  cin >> a;
  cout << a << endl;
  return 0;
} 
```

我不知道这是否被调用（调试、编译或构建），但我只想在 gvim 中运行这个程序，这样我就可以给它输入并查看输出，并查看诸如“missing ';'之类的错误 " 或 "missing '}'" （就像我在 "Code::Blocks" 中单击 F9 时发生的情况）。exe文件，其他东西对我来说并不重要。

问题 #2：如果我有一个每次都这样编写的 C++ 代码

```
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

using namespace std; 
```

每次使用 vim 打开 .cpp 文件时，如何让 vim 插入此代码？

我有 Windows 7 32 位，我的 .vimrc 文件是我安装 vim 时的默认文件。请尽可能详细。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T18:34:17.490

可能这就是您正在寻找的

[Vi 和 Vim 自动命令：自动将自定义标题添加到文件的 3 个步骤](http://www.thegeekstuff.com/2008/12/vi-and-vim-autocommand-3-steps-to-add-custom-header-to-your-file/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:32:17.493

Q1：您需要先编译您的 C++ 代码以“查看诸如“缺少 ';' 之类的错误。”或“缺少'}'”。然后你可以运行你编译的EXE来确定你的输入和输出值是否有效。在Visual Studio中，点击播放按钮（调试）将同时完成。

Q2：vim 有一组发生的事件允许您执行某些操作，例如将文本附加到扩展名为 .cpp 的新文件中。你会在你的 .vimrc 文件中添加一些代码来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:47:41.190

如果您只想在打开时使用它，请使用 autocmd。你可以像[lipun4u](https://stackoverflow.com/questions/11727329/beginner-questions-about-vim/11727479#11727479)说的那样做：

1.  [Vim 自动命令在文件开头自动添加标题](http://www.thegeekstuff.com/2008/12/vi-and-vim-autocommand-3-steps-to-add-custom-header-to-your-file/)

* * *

那么我建议得到这个插件：[snipMate](http://www.vim.org/scripts/script.php?script_id=2540)

> snipMate.vim 旨在成为一个不显眼、简洁的 vim 脚本，它在 Vim 中实现了 TextMate 的一些片段功能。片段是一段经常输入的文本，您可以使用触发词和制表符将其插入到文档中。

它有几个特点：

1.  支持超过 1 种语言
2.  大量预制片段
3.  **能够制作自己的片段**

因此，这样您就可以为不同的程序设置不同的标题，只需将它们分配给热键即可。

# javascript - 与全局标志一起使用时，Javascript 正则表达式在后续调用中返回 null

> ID：11727331
> 
> 赞同：1
> 
> 时间：2012-07-30T18:25:33.343
> 
> 标签：javascript, regex

> **可能重复：**
> [javascript string exec 奇怪的行为](https://stackoverflow.com/questions/2807670/javascript-string-exec-strange-behavior)

我有一个正则表达式，我正在使用这样

```
new_regex = /^[+-]?(\d+).*\s+(\d+).*\s+([\d\.]+)/g

>>  /^[+-]?(\d+).*\s+(\d+).*\s+([\d\.]+)/g

myregex = new RegExp(new_regex)

>> /^[+-]?(\d+).*\s+(\d+).*\s+([\d\.]+)/g

subject = "+39° 44' 39.28\""
>>  "+39° 44' 39.28"" 
```

以上适用于我每隔一段时间执行以下操作：

```
myregex.exec(subject)
>> ["+39° 44' 39.28", "39", "44", "39.28"] 
```

当我第二次执行它时，它给出了 null

```
 myregex.exec(subject)
 >> null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:29:52.237

是的，这就是`.exec`使用全局标志的方式。如果您将相同的主题传递给它，它将前进到下一个匹配项，直到找不到匹配项并返回`null`：

```
var str = "1111",
    re = /1/g;

re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(str) // null 
```

`execing`您可以通过再次更改主题来重置它：

```
re.exec("") //Will reset it. 
```

重置示例：

```
var str = "1111",
    re = /1/g;

re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(""); //Reset
re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(str); //["1"]
re.exec(str) // null 
```

# json - 在 HighCharts 中使用 Json

> ID：11727332
> 
> 赞同：1
> 
> 时间：2012-07-30T18:25:45.483
> 
> 标签：json, asp.net-mvc-3, highcharts

我正在使用 ViewModel 创建系列，如下所示：

```
namespace AESSmart.ViewModels
{
  public class HighChartsPoint
  {
    public double x { set; get; }
    public double y { set; get; }
    public string color { set; get; }
    public string id { set; get; }
    public string name { set; get; }
  }

  public class HighChartsSeries
  {
    public List<HighChartsPoint> data { set; get; }
    public string name { set; get; }
    public string type { set; get; }
  }

  public class HomeIndexViewModel
  {
    public string HCSeries {get;set;}

    public void setChartData()
    {
      List<HighChartsSeries> allSeries = new List<HighChartsSeries>();
      List<HighChartsPoint> allPoint = new List<HighChartsPoint>();

      allPoint.Add(new HighChartsPoint { x = 49.9, y = 1 });
      allPoint.Add(new HighChartsPoint { x = 71.5, y = 2 });
      allPoint.Add(new HighChartsPoint { x = 106.4, y = 3 });
      allPoint.Add(new HighChartsPoint { x = 129.2, y = 4 });

      allSeries.Add(new HighChartsSeries { 
        data = new List<HighChartsPoint>(allPoint), 
        name = "Series 1", 
        type = "column" 
      });

      JavaScriptSerializer oSerializer = new JavaScriptSerializer();
      HCSeries = oSerializer.Serialize(allSeries);
    }
  }
} 
```

然后在我看来，我是这样设置的`series: @Model.HCSeries`：

```
@section HeadContent {
  <script type="text/javascript">
    var chart;
    $(document).ready(function() {
      chart = new Highcharts.Chart({
        chart: {
          renderTo: "container4",
          type: "column",
        },
        series: @Model.HCSeries
      });
    });
  </script>
} 
```

当我运行程序时，它不显示 HighChart。如果我查看视图源，它看起来如下所示：

```
<script type="text/javascript">
  (function ($) { // encapsulate jQuery
    var chart;
      $(document).ready(function () {
        chart = new Highcharts.Chart({
          chart: {
            renderTo: 'container4',
            type: 'column'
          },
          series: [[{&quot;data&quot;:[
            {&quot;x&quot;:49.9,&quot;y&quot;:1,&quot;color&quot;:null,&quot;id&quot;:null,&quot;name&quot;:null},
            {&quot;x&quot;:71.5,&quot;y&quot;:2,&quot;color&quot;:null,&quot;id&quot;:null,&quot;name&quot;:null},
            {&quot;x&quot;:106.4,&quot;y&quot;:3,&quot;color&quot;:null,&quot;id&quot;:null,&quot;name&quot;:null},
            {&quot;x&quot;:129.2,&quot;y&quot;:4,&quot;color&quot;:null,&quot;id&quot;:null,&quot;name&quot;:null}],
            &quot;name&quot;:&quot;Series 1&quot;,
            &quot;type&quot;:&quot;column&quot;}]]
        });
      });
  })(jQuery);
</script> 
```

如果我手动将数据直接输入到视图中，那么图表会显示。但是，我需要动态创建系列。 **我需要做什么来修复我的代码以便图表显示？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:09:32.257

我认为这是因为您的序列化 JSON 包含`&quot;`而不是`"`.

试试这个：

```
HCSeries = @Html.Raw(oSerializer.Serialize(allSeries)); 
```

# jquery - 防止 jQuery 移动按钮默认行为

> ID：11727333
> 
> 赞同：0
> 
> 时间：2012-07-30T18:25:58.603
> 
> 标签：jquery, cordova

编辑：为了澄清我确实希望#capture-photo 按钮激活，但是当我以编程方式导航到另一个页面时我想重置它。

我目前正在使用 jQuery 作为框架构建一个 Phonegap/Cordova 应用程序。大多数都很好 - 除了一种情况。

我有一个带有导航栏和三个按钮的固定页脚（效果很好）。

两个按钮转到没有 ajax 的常规页面，它们工作得很好。

一个按钮连接到相机界面并触发（即）iPhone 上的相机。如果我取消，我会返回屏幕，但相机按钮现在具有活动状态和样式。

我在失败时触发 changePage 并且页面获取激活但它不会更改按钮状态！？我试图手动删除类但没有成功！？似乎有些东西会延迟为活动状态添加类，直到或某事。

我做错了吗？changePage() 不应该找到并触发它的锚点吗？

在专辑页面中，页脚如下所示：

```
 <div class="footer" data-role="footer" data-position="fixed" data-id="footer-tab">
    <div data-role="navbar" class="nav-glyphish">
     <ul>
        <li><a id="welcome" href="#welcome"></a></li>
        <li><a id="capture-photo"></a></li>
        <li><a id="show-album" href="#album" class="ui-btn-active ui-state-persist"></a></li>
     </ul>
    </div>
  </div> 
```

再说一遍-#capture-photo 按钮没有相应的页面，但是当我单击它时，它会被激活，如果我取消相机-jqm 会捕获一个 changePage 并转到#show-album，但 #capture-photo 按钮仍被标记为活动。

PS我在两个页面上确实有一个相同的页脚（data-role ='footer'），除了它们各自的锚点设置了ui-btn-active和ui-state-persist。我对这个重复的代码感到有点不舒服，但它似乎是解决持久页眉/页脚的唯一方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:05:01.923

所以不幸的是，我以一种丑陋的方式解决了它。在运行 $.mobile.changePage('#album') 之前，我手动触发了所有固定页脚导航栏上的 'vclick' 事件。丑陋，但现在它可以工作......：o

```
// HATE DOING THIS! BUT JQM IS NOT WORKING WITH ME ON THIS.
  $('#welcome #show-album').trigger('vclick')
  $('#album #show-album').trigger('vclick') 
```

# javascript - WebSQL 和 Javascript 操作顺序

> ID：11727341
> 
> 赞同：1
> 
> 时间：2012-07-30T18:26:16.693
> 
> 标签：javascript, web-sql

我的应用程序正在使用 javascript webSQL，并且我在命令执行顺序方面遇到了一些问题。无论我的代码在查询中的顺序如何，都会最后执行。例如，在以下代码中，2 将在 1 之前发出警报：

```
db.transaction(
        function (transaction) {
        transaction.executeSql(
        'SELECT * FROM contacts WHERE id = ?;',
        [id],
        function (transaction, result) {
           alert("1");
           if (result.rows.length != 0) {
            user = result.rows.item(0).name;
           } else {}
        },
        errorHandler);
    });

alert("2");
message = id + '%1E' + name; 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:37:59.830

你什么时候提醒（“2”），你还没有完成交易，所以你传递给它的第二个函数还没有被调用。由于它是`success`我假设的处理程序，因此将在事务成功完成后调用它。第三个参数是查询失败时执行的代码片段，只有当它失败时。

当页面加载了足够的内容以执行 javascript 时，将执行事件处理程序代码之外的任何内容。注意整个页面不需要加载执行`alert("2")`，JS就够了。由于这些语句非常接近，因此在到达并执行 alert("2") 语句之前，事务完成的可能性基本上为 0。

但是，如果您在`alert("2")`db.transaction(...) 和 db.transaction(...) 之间有足够的代码，则可能（在所谓的**竞争条件下**）回调可以在 alert(2) 代码之前执行。

在这种情况下，您要小心使用事件处理程序，尽管这取决于您的成功处理程序所做的事情。如果它修改了页面 DOM，那么我强烈建议将 db.transaction() 和周围的代码包装在绑定到页面加载的事件处理程序中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T18:37:42.717

这不是您问题的答案，但我认为我应该给您一个关于 webSQL 的警告。

自 2010 年 11 月 18 日起，W3C 宣布他们已弃用 Web SQL 数据库推荐草案，并将不再维护它。

因此，虽然它目前可能在浏览器中工作，但我不会在未来依赖它。

# python - 检查列表中的每个元素是否与 Python 中的字符串匹配？

> ID：11727351
> 
> 赞同：3
> 
> 时间：2012-07-30T18:26:53.370
> 
> 标签：python, list

我正在编写一个简单的 if else 循环来检查字符串是否与多个单词匹配，如下所示：

```
if "word1" in data or "word2" in data or "word3" in data:
    .... 
```

我不确定我们是否有更全面的方法来处理这种比较？

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T18:29:34.427

```
if any(word in data for word in ('word1', 'word2', 'word3')):
    ... 
```

如果遇到性能问题，您可能希望在运行比较之前转换`data`为 a 。`set`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T18:29:26.457

你可以做：

```
if any(x in data for x in ('word1', 'word2', 'word3')): 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T18:30:27.980

为什么不是集合相交？

```
if set(["word1", "word2","word3"]) & set(data):
    # do stuff! 
```

# php - 简单的 if 语句（不是简写）

> ID：11727353
> 
> 赞同：4
> 
> 时间：2012-07-30T18:26:56.550
> 
> 标签：php, if-statement

所以今天，就像每天一样，我在编程。继续我的日常工作，打字，听傻朋克和其他各种时髦的曲调。然后出乎意料，我不得不写一些类似的东西：

```
$x = 'a'; // For instance

if ($x == 'a' || $x == 'b') {
    // ...
} 
```

很简单，我说不是太破旧。可是等等！我心想`"there must be an easier way to do that - I'm repeating myself"`。所以我开始尝试使用以下代码解决这个问题：

```
if ($x == ('a' || 'b')) { 
    // ...
} 
```

但是，这是行不通的。完全没有。*总是*如此。如果`$x`等于`a`、或。`b`_ 所以我闷闷不乐，哭了一会儿，决定问 Stackoverflow 是否有人知道原因。`c``cake`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:32:00.480

`||`是逻辑或，它将左侧评估为布尔值（`'a'`在布尔上下文中`true`），如果为真则返回真，否则，它对右侧执行相同的操作。

```
var_dump('a' || 'b');
bool(true) 
```

现在，将此值与一个字符进行比较，根据 PHP 的疯狂规则（[松散比较图](http://php.net/manual/en/types.comparisons.php)），该字符也是正确的：

```
var_dump('a' == true);
bool(true) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:52:15.947

如你所知|| 是一个逻辑运算符，总是返回真或假（换句话说，1 或 0）。因此，代码 ('a' || 'b') 总是返回 true(1)。在上述情况下，$x 包含值，因此由于自动类型对话，$x 也设置为 true(1)，因此它的 if(1 == 1) 并始终返回 true。

试试下面的代码

```
$x = false;
if ($x == ('a' || 'b')) { echo 'true'; } else{ echo 'false';} 
```

总是返回假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:29:45.863

您要求 PHP 评估是否`$x`等于 的值`('a' OR 'b')`，这将始终返回，`true`因为 'a' 和 'b' 都具有非零值。

在这种情况下，您必须单独使用比较运算符，或者使用评论中 nickb 的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T18:31:54.967

它没有用，因为

```
$a = 'a' || 'b'; // true, since 'a' and 'b' considered truthy 
```

在这种情况下，您的字符串文字将被[转换为布尔值。](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

如果你`$x`的 if 不是空字符串或其他被认为是虚假的字符串，它们将是相等的。

但是你可以这样写你的 if：

```
if (in_array($x, array('a', 'b', 'cake')) 
```

如果你觉得它让你的意图更清晰。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T18:32:49.397

我会做：

```
$valid = array('a', 'b');

if (in_array($x, $valid)) {
    ...
} 
```

够简单！

...但是，回想起来，也许你不想要另一种方式来做到这一点？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T18:32:05.543

看看 php 如何将字符串转换为布尔值

```
php > var_dump((bool) "a");
bool(true)
php > var_dump((bool) "b");
bool(true)
php > var_dump((bool) "cake");
bool(true) 
```

所以基本上你问 php if($x == true)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T18:32:17.777

见[http://php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)

# javascript - 如何在 Javascript 中获取 url 的标签值和 & 值？

> ID：11727360
> 
> 赞同：7
> 
> 时间：2012-07-30T18:27:25.737
> 
> 标签：javascript, jquery, url, query-string

我有一个像`http://www.example.com/folder/file.html#val=90&type="test"&set="none"&value="reset?setvalue=1&setvalue=45"`

现在我需要从 # 开始获取 url 的部分，我如何得到它，我尝试使用`window.location.search.substr();`但看起来像搜索？在一个网址中。有没有办法在#之后获取url的值

我如何也从 & 获取部分 url

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T18:29:36.243

```
var hash = window.location.hash; 
```

更多信息：[https ://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)

更新：这将抓取主题标签之后的所有字符，包括任何查询字符串。从 MOZ 手册：

```
window.location.hash === the part of the URL that follows the # symbol, including the # symbol.
You can listen for the hashchange event to get notified of changes to the hash in
supporting browsers. 
```

现在，如果您需要解析查询字符串，我相信您会这样做，请在此处查看：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T18:44:10.787

要获取哈希：

```
location.hash.substr(1); //substr removes the leading # 
```

获取查询字符串

```
location.search.substr(1); //substr removes the leading ? 
```

[编辑 - 由于您似乎有一个排序查询字符串 esq 字符串，它实际上是您的哈希的一部分，以下将检索并将其解析为名称/值配对的对象。

```
var params_tmp = location.hash.substr(1).split('&'),
    params = {};
params_tmp.forEach(function(val) {
    var splitter = val.split('=');
    params[splitter[0]] = splitter[1];
});
console.log(params.set); //"none" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:36:25.650

这将获得`#`和`&`值：

```
var page_url = window.location + "";       // Get window location and convert to string by adding ""
var hash_value = page_url.match("#(.*)");  // Regular expression to match anything in the URL that follows #
var amps;                                  // Create variable amps to hold ampersand array

if(hash_value)                             // Check whether the search succeeded in finding something after the #
{
    amps = (hash_value[1]).split("&");     // Split string into array using "&" as delimiter
    alert(amps);                           // Alert array which will contain value after # at index 0, and values after each & as subsequent indices
} 
```

# c# - 跨 mvc 应用程序将数据保存在缓存中的最佳方法

> ID：11727363
> 
> 赞同：1
> 
> 时间：2012-07-30T18:27:48.750
> 
> 标签：c#, asp.net, caching

在我的应用程序中，我有一个可以从数据库表中读取的学校列表。我想在我网站的许多地方使用此列表，例如注册表单、我网站上的不同下拉列表等。如果不经常更改，跟踪这些数据的最佳方法是什么，我正在考虑存储它在缓存中，但是在应用程序中的什么时候加载该缓存？我是否也使用依赖注入并创建一些自定义类来检索这些数据？数据集不大，最多20所左右的学校。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:21:47.700

它的纯粹设计决定了您要如何维护缓存，具体取决于您接听电话的要求。您可以在 global.aspx 中的应用程序启动事件期间将这些数据加载到应用程序对象/缓存对象中

参考这个

[http://www.asp.net/web-forms/tutorials/data-access/caching-data/caching-data-in-the-architecture-cs](http://www.asp.net/web-forms/tutorials/data-access/caching-data/caching-data-in-the-architecture-cs)

[http://msdn.microsoft.com/en-us/library/dd129907.aspx](http://msdn.microsoft.com/en-us/library/dd129907.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:41:13.980

我会使用依赖注入和存储库模式。注入将在每个会话创建时完成一次。这是在创建存储库并将其存储为单例类时，然后可以将其注入到需要它的每个页面中。

创建存储库后，您可以对数据存储进行一次读取以获取您的学校列表，并将其加载到内部列表中。

这里有一些关于[在 MVC](http://blog.ploeh.dk/SearchView.aspx?q=mvc%20injection)中实现 IOC 的优秀文章，可以帮助您开始学习。

至于存储库模式，有很多不同的实现方式，只需[谷歌](http://goo.gl/zzSVo)搜索即可。

# jquery - jquery mobile mvc 3布局部分视图

> ID：11727367
> 
> 赞同：0
> 
> 时间：2012-07-30T18:28:07.213
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-mobile, asp.net-mvc-partialview

我在 .net 中有一个带有 mvc 3 的项目，我正在尝试实现 jquery mobile，但我对自定义 js 有一些问题，这是 _Layout.Mobile.cshtml 的部分代码

```
<body>
<div data-role="page" id="div_layout">
<div data-role="header">
    <a href="/" data-icon="home">Inicio</a>
    <h1>Title</h1>
</div>
<div data-role="content">
    @Html.Partial("_LogOnPartial")
    @RenderBody()
</div>
<div data-role="footer">
    <h4>Footer text</h4>
</div>
</div>

<script type="text/javascript">...</script>   
<script type="text/javascript" src= "@Url.Content("~/Content/js/utilities.js")">
</script>
</body> 
```

结果html是（图片链接）：

[http://i.imgur.com/1rQyx.png](http://i.imgur.com/1rQyx.png)

_LogOnPartial 部分视图使用了 utility.js 文件中的一些功能，问题是这个 js 文件必须在部分视图之后，如果不是它不起作用，直到这里一切都很好，但是当我在正文部分提交表单时，所有的data-role="content" 中的代码被复制并放置在底部，这是 html 结果（图片链接）：

[http://i.imgur.com/inCEs.png](http://i.imgur.com/inCEs.png)

所以_LogOnPartial部分视图中的内容停止工作，配置文件有ajaxEnabled：true，当我禁用ajax时一切正常，但我想使用jq移动转换，我也无法显示ajaxEnabled的加载消息：false , 有人可以帮助解决这个问题吗？提前致谢。

好的，谢谢您的回答，_LogOnPartial 部分视图代码是

```
<div id = "loginbox">
    <div class="User">
        <label for="login_user">Usuario:</label>
        <input id="login_user" name="login_user" type="text" required id="basic" value="" data-mini="true" />
    </div>
    <div class="Password">
        <label for="login_password">Contraseña:</label>
        <input id="login_password" name="login_password" type="password" required id="basic" value="" data-mini="true" />
    </div>
    <div class="boton_login">
        <button type="submit" id="login" data-theme="a">Login</button>
    </div>
    <div id="login_error_message">
        <span id="login_error_message_desc"></span>
    </div>
</div> 
```

utility.js 的部分内容是

```
$("#login").click(function () {
    alert('this never happens');
    //something
}); 
```

当页面第一次加载时它工作正常，但随后它停止工作（当 ajax 复制内容时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:40:24.420

没有更多代码，很难说出解决方案。实用程序.js 做什么？LogOnPartial 到底是什么？

您面临的重复 data-role="content" 问题是由于 jquery mobile 的 DOM 缓存[http://jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)当您禁用 Ajax 时，此功能不可用需要更长的时间，这就是为什么您不再遇到问题的原因。

您可以查看这个答案[How do do one disable Caching in jQuery Mobile UI](https://stackoverflow.com/questions/4660934/how-does-one-disable-caching-in-jquery-mobile-ui)，它显示了一种在隐藏页面时删除页面的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:45:04.000

问题不在于内容重复，而是在加载新内容后您没有注册回调。您的点击处理程序是`$('#login')`在加载初始内容时设置的，但您需要为新内容重新设置该处理程序。

查看要订阅的事件的事件文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

jQuery Mobile 所做的是向 URL 发出 AJAX 请求，并将内容插入 DOM。然后需要连接新内容。

# c# - 调用 dll 时断点永远不会命中

> ID：11727368
> 
> 赞同：1
> 
> 时间：2012-07-30T18:28:14.850
> 
> 标签：c#, c++, .net, dll

我已将托管 c++ dll 添加到我的 c#.net 项目中（使用“添加资源”）；它发现我试图实例化的类很好，没有编译器错误。但不知何故，我知道我实例化的字段正在获得空引用异常。所以我在设置字段的方法的顶部放置了一个断点......它从未被命中。如果我使用 .dll 中的类注释掉该行，它将到达断点。取消注释，尽管被调用，但该方法永远不会执行。这里发生了什么事？

dll 是 ManagedSpyLib，类是[ControlProxy](http://msdn.microsoft.com/en-us/magazine/cc164593.aspx?code=true&level=root,ManagedSpyLib&file=ControlProxy.cpp)，如果有帮助的话。该调用位于后台工作程序的 DoWork 方法中，该方法肯定是异步启动的——整个线程是否会在不提醒调试器的情况下静默崩溃？我该如何调试呢？

ETA：我在输出窗口或模块窗口中找不到任何关于 dll 的信息。一些谷歌搜索发现了一个修复：将目标更改为 .net 3.5 框架。但我并没有比以前更接近于理解 WTF 正在发生的事情——我的代码有效，但现在我不知道为什么，这更令人费解。有人可以解释这种现象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:34:57.163

调试未知错误/未能在断点处停止的通用步骤：

确保为相关 DLL 加载了 PDB（调试->窗口->模块）。确保来源与您使用的版本相匹配。

在调试时检查输出窗口中是否有任何可疑的痕迹（尤其是关于异常的痕迹）。

考虑中断所有异常（调试-> 异常-> CLR 异常的“抛出时”）。可能需要禁用“仅我的代码”（工具->选项->调试->仅我的代码）以中断*所有*异常。

# python - 如何访问从 JSON 数据树派生的可能存在的元素？

> ID：11727371
> 
> 赞同：3
> 
> 时间：2012-07-30T18:28:20.150
> 
> 标签：python, data-structures, exists

我有一个从 JSON 派生的相当复杂的数据结构`json.load(<filehandle>)`，例如

```
{
    "sensors": {
        "measurements": [
            [
                null, 
                null, 
                null
            ], 
            [
                {
                    "sensor": "Fields 341", 
                    "remote": null, 
                    "mark": "reliable", 
                    "duration": 81.54296875
                }, 
                {
                    "sensor": "Fields 341", 
                    "remote": null, 
                    "mark": "reliable", 
                    "duration": 61.54534875
                },
                {
                    "sensor": "Fields 341", 
                    "remote": null, 
                    "mark": "reliable", 
                    "duration": 61.89378945
                }
            ]
        ]
    }
} 
```

结果是嵌套的字典和列表，例如

```
{u'sensors': {u'measurements': [[None, None, None],
                            [{u'duration': 81.54296875,
                              u'mark': u'reliable',
                              u'remote': None,
                              u'sensor': u'Fields 341'},
                             {u'duration': 61.545348750000002,
                              u'mark': u'reliable',
                              u'remote': None,
                              u'sensor': u'Fields 341'},
                             {u'duration': 61.89378945,
                              u'mark': u'reliable',
                              u'remote': None,
                              u'sensor': u'Fields 341'}]]}} 
```

目标是通过 sqlalchemy 获取数据并将其填充到数据库中。像这样：

```
for item in sensors["measurements"]:
    for j in range(len(sensors["measurements"])):
        DBTable.DBField = item[j]["sensor"]
        ... 
```

这样做的问题是：数据中的任何部分都可以替换，`null/None`以防测量错误（如第一个）。如果是这样，应该分配 DBFields `None`。如果是这种情况，则分配会引发异常：

```
TypeError: 'NoneType' object is unsubscriptable 
```

有没有一种理智的方法可以让 for 循环运行而不引发异常（可能使用某种 .get() ）？如果不是，那么处理这种不存在的数据结构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:53:09.080

您可以使用您喜欢的默认值预先构建字典：

```
defaults = {"sensor": None, "remote": None", "mark": None, "duration": None } 
```

然后你可以这样做：

```
DBTable.DBField = item.get(j, defaults)["sensor"] 
```

您还可以使用 a`collections.defaultdict`作为默认项，这将允许您为访问的任何键提供默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:32:59.800

可能这行得通

```
for item in sensors["measurements"]:
 for j in range(len(sensors["measurements"])):
     try:
        DBTable.DBField = item[j]["sensor"]
     except:
        DBTable.DBField = None 
```

# xtk - 如何更改 [XTK] 中的事件

> ID：11727372
> 
> 赞同：0
> 
> 时间：2012-07-30T18:28:22.287
> 
> 标签：xtk

**您好，我想知道如何更改鼠标事件，因为我想 X.Caption 仅在我右键单击它时才激活。非常感谢您**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:59:35.747

下面的 JSFiddle 展示了如何做到这一点。要实际显示工具提示等，您可以使用任何 JS 库，如 jQuery UI。

[http://jsfiddle.net/haehn/ZpX34/](http://jsfiddle.net/haehn/ZpX34/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:16:09.410

如果我是正确的（其他贡献者，请不要害怕纠正我），您可能需要根据需要编辑 XTK 的内部结构。XTK 为其事件定义了“控件”，例如`X.event.js`从Google Closure Library 获取的。您可以更多地查看 Google Closure 库，因为我还没有完全审查它，但主要是从它派生的，可以与来自、和的事件一起使用。您可以尝试将其包含到您的 Javascript 中并定义您自己的点击事件或与之相关的内容，然后再查看 Google Closure Library。`HoverEvent``PanEvent``X.caption``Goog.ui.Tooltip``Goog.ui.Popup``Goog.ui.PopupBase``Goog.events``Goog.events`

如果我刚刚在上面的小段中写的内容不完全正确或类似的话，当然还有基本的 Javascript DOM 事件可供点击。我不太确定这些将如何与 XTK 一起使用，因为 XTK 使用 WebGL 进行渲染。[您可以在http://www.w3schools.com/jsref/dom_obj_event.asp](http://www.w3schools.com/jsref/dom_obj_event.asp)查看基本事件。如果您自己找到任何解决方案，非常欢迎您将其贡献给 XTK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:31:47.857

我认为有太多的方法没有？更改 xtk 源代码并编译您自己的版本或类似的东西：

```
window.onload = function() {
  myrenderer.config.HOVERING_ENABLED = false; // disabling show caption on mousehover

  var mouse_x, mouse_y;
  myrenderer.interactor.onMouseMove = function(event) {
    mouse_x = event.offsetX;
    mouse_y = event.offsetY;
  }

  myrenderer.interactor.onMouseDown = function(left,middle, right) {
    if (right) {
      var picked_id = myrenderer.pick(mouse_x, mouse_y);
      if (picked_id==-1) throw new Error("No object");
      var picked_object = myrenderer.get(picked_id);
      var mycontainer = myrenderer.container;
      var caption = new X.caption(mycontainer,mycontainer.offsetLeft + mouse_x + 10, mycontainer.offsetTop + mouse_y + 10,myrenderer.interactor);
      caption.setHtml(picked_object.caption);

      // use settimeout or something else to destroy the caption
    }
  }
} 
```

# jquery - 我怎么知道我的 jquery 选择器选择了什么？

> ID：11727375
> 
> 赞同：3
> 
> 时间：2012-07-30T18:28:30.677
> 
> 标签：jquery, jquery-selectors, firebug

所以我有一个普遍的问题。通常，在遍历不同的树元素时，我发现我认为我需要的 JQuery 选择器最终选择了其他东西，或者更糟糕的是，它似乎什么也没选择。

例如，有时使用`.child()`或`.sibling()`很容易忘记实际选择的内容。

有时我可以使用`alert()`s 或 a`console.log()`来隔离问题。有时即使这样也不能解决问题。 **我很好奇是否有人知道任何好技巧来知道我正在使用的选择器实际选择了什么（如果有的话）。** 我不知道是否有任何萤火虫工具，或者其他有用的东西。

有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:39:14.700

有这个[Chrome 扩展](https://chrome.google.com/webstore/detail/kflfpppkpdjeodcbbcicnkpbpefebeli)，我不知道它是否也适用于 Firefox，但你可以随时尝试。

此外，我总是`console.log()` 确保我选择正确的元素，例如在嵌套树上，如果你的目标是`div > ul > li > a` I `console.log($(div ))` 首先，然后我只是添加到 jQuery 选择器

最后我只是`$(element).css('background-color','red');` 所以我可以直观地定位我的目标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:43:47.057

只需使用 chrome 扩展并在控制台面板中编写您的选择器，例如。`$('div#foobar');`然后按回车。它将在下一行显示 div。如果您将鼠标悬停在选定的 div 上，它将在浏览器上显示。

一旦你双击它，它将在`elements`.

同样的事情适用`firefox`于`firebug extension`. 我们直接在firefox中编写选择器`firebug console`来检查我们的选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:32:01.657

我通常使用 console.log() 来查看 [Object object] 并从那里我可以看到里面有什么，或者如果我正在操作特定的东西，很多时候我会做一个快速的

`$(element).css('background', '#000');`

只是为了在页面上直观地看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:37:51.923

一种选择是将查询结果保存在变量中并检查它的“长度”属性。如果长度> 0，你选择了一些东西。

例子：

```
var $listItem = $("li");
if($listItem.length>0) doSomething(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:55:04.637

我曾经这样做过以下方式。
`console.log($('.myElementClass'));`当您将元素悬停在上面时，`firebug console`您可以看到您的元素被突出显示，因此您可以查看它是否是正确的元素。
`alert($('.myElementClass').length);`

# javascript - KnockoutJS - 打印 html 片段

> ID：11727376
> 
> 赞同：0
> 
> 时间：2012-07-30T18:28:33.353
> 
> 标签：javascript, knockout.js, knockout-2.0

我正在尝试`row-fluid`在我的 observableArray 中的每 4 个对象上使用该类渲染一个新的 div。不幸的是，将 html 片段放入 if 块似乎并没有完成任何事情。

还有另一种方法可以做到这一点吗？

```
<!-- ko foreach: detailsVm.addresses -->
    <!-- ko if: $index() % 3 === 0 -->
    <div class="row-fluid">
    <!-- /ko -->

    <div class="span4">
        My Content
    </div>

    <!-- ko if: $index() % 3 === 0 -->
    </div>
    <!-- /ko -->
<!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:02:17.950

一堆（不是很棒的）方法来解决这个问题：

通常，我建议将您的数组映射到更适合在您的视图中绑定的结构。因此，您可以将其映射到行/单元格结构。然后，您可以轻松地循环遍历行/单元格以生成输出。喜欢：http: [//jsfiddle.net/rniemeyer/EdXA2/](http://jsfiddle.net/rniemeyer/EdXA2/)

有点混乱，但你甚至可以这样做：

```
<div class="container" data-bind="foreach: items">
    <!-- ko if: $index() % 3 === 0 -->
    <div class="row-fluid">
        <div class="span4" data-bind="text: name"></div>
        <!-- ko with: $parent.items()[$index() + 1] -->
        <div class="span4" data-bind="text: name"></div>
        <!-- /ko -->
        <!-- ko with: $parent.items()[$index() + 2] -->
        <div class="span4" data-bind="text: name"></div>
        <!-- /ko -->
    </div>
    <!-- /ko -->
</div> 
```

喜欢：http: [//jsfiddle.net/rniemeyer/pfzpq/](http://jsfiddle.net/rniemeyer/pfzpq/)

自定义绑定的一个想法是创建一个绑定，该绑定接受一个数组和许多列，并将其拆分为更小的数组。像这样的东西：http: [//jsfiddle.net/rniemeyer/sHDnR/](http://jsfiddle.net/rniemeyer/sHDnR/)。

```
ko.bindingHandlers.arrayToRows = {
    init: function(element, valueAccessor, all, vm, context) {
        var rows = ko.computed(function() {
            var options = ko.toJS(valueAccessor()),
                data = options.data,
                count = options.count,
                rows = [], row;

            for (var i = 0, j = data.length; i < j; i++) {
                if (i % count === 0) {
                    if (row) {
                        rows.push(row);
                    }
                    row = [];
                }
                row.push(data[i]);
            }

            //push the final row  
            if (row) {
                rows.push(row);
            }

            return rows;

        }, null, { disposeWhenNodeIsRemoved: element });

        ko.applyBindingsToNode(element, { foreach: rows });

        return { controlsDescendantBindings: true };
    }
}; 
```

我还有另一个想法，自定义绑定会在事后包装元素。当我有更多时间时，可能会试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T23:52:40.167

我知道您已经修复了它，但是对未来的想法：在您的上下文中始终存在该包装器 div 是否有害，但每 4 行仅存在一个“流体”类？因为如果不是这样，即使我讨厌渲染不必要的标记，在这样的迭代情况下，有时我会发现只使用 CSS 更容易。就像是：

.container .row:nth-child(4n) { 你的流畅风格 }

# git - 如何使用 Git 合并和更新我的工作目录？

> ID：11727379
> 
> 赞同：0
> 
> 时间：2012-07-30T18:28:50.303
> 
> 标签：git

我从服务器下载最后一个版本

`git fetch`

据我所知，存储库已更新。

我有两个问题：

1.  现在我处理从服务器更改的文件，我想做合并？我什么时候需要进行合并？我需要在 git fetech 之后还是在添加文件时这样做？您能否解释一下合并过程的声明应该是什么？

2.  如果我想更新我的 workign 目录并且我没有任何合并我该怎么做？我试图这样做：

    `git checkout -f "mybranch"`
    `git rebase`
    `git checkout "mybranch"`

可以吗？我有不同的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:33:40.433

在这种情况下，我不合并。如果我有突出的变化，我会

```
git stash
git checkout master #if I'm not on master
git fetch origin
git rebase origin/master
git checkout whateverbranh #if I was not on master
git rebase master #if I was not on master
git stash pop 
```

我认为很多人不这样做。我喜欢它，因为它使我的历史线保持线性。

你不能总是避免合并。在这种情况下，如果服务器上的文件已更改，并且我的提交更改了相同的文件，则我必须在 rebase 期间解决冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:31:15.567

最常见的工作流程是

```
git pull 
# do something useful
git commit
git push 
```

`pull`是公正的`fetch`and `merge`（意味着：合并`remoteName/branchName`到`branchName`）并且在大多数情况下就足够了。

# java - 如何从数组中删除特定元素

> ID：11727381
> 
> 赞同：1
> 
> 时间：2012-07-30T18:28:55.887
> 
> 标签：java, arrays

我已经测试了 char 数组中的不同元素，如果它们不符合条件，我想将它们从数组中删除。有没有办法做到这一点？

这是我到目前为止的代码

```
String s;
    char[] b = inputString.toCharArray();
    b = new char[b.length];
    do
    {

        if(!(b[i]>='0')&&(b[i]<='9')&&(b[i]!='.'))
        {
            s = Character.toString(b[i]);
            if(s.equals("+"))
            {
                t = 1;
            }
            else if(s.equals("-"))
            {
                t = 2;
            }
            else if // and so on

            }
            else
            {
                t = 1029;
            }
            //want to delete element here if they fail if test
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:00:03.217

因为注释不允许良好的代码格式：

在代码的开头，您将`String`内容作为 a并通过将相同大小`char[]`的 new 分配给变量来立即再次丢失它。`char[]`

```
char[] b = inputString.toCharArray();
b = new char[b.length]; 
```

所以之后的循环适用于默认初始化的数组，而不是字符串内容。您需要两个数组引用来进行复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:37:27.600

这应该做你想要的：

```
ArrayList<char> charList = new ArrayList<char>(0);

for (int i= 0; i < b.length; i++) {
    if (b[i] == condition) {
        charList.Add(b[i]);
    }
}

charList.toArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:00:04.437

您的程序有问题：

```
String s;
char[] b = inputString.toCharArray();
b = new char[b.length];
do {
    if(!(b[i]>='0')&&(b[i]<='9')&&(b[i]!='.')) {
        ...
    }
} while... 
```

您正在`char[]`从您的 中创建一个，然后在下一行您在变量中`inputString`分配一个全新的空。实际上永远不会等于,或. 你把那行放错了吗？`char[]``b``b[i]``0``9``i`

然后对于删除的东西，我也建议使用 ArrayList ，您将能够对其进行迭代并轻松删除要删除的特定[索引](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#remove%28int%29)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T18:45:39.707

```
char[] finishedArray = new char[0];
char[] arrayToCheck = new char[]{ 'a', 'b', 'c', 'd', 'e', 'f', 'g' };
for( int i = 0; i < arrayToCheck.length; i++ )
{
    if( !doesNOTMeetSomeCondition( arrayToCheck[ i ] ) )
    {
        //DOES meet keep condition, add to new array
        char[] newCharArray = new char[ finishedArray.length + 1 ];
        for( int j = 0; j < finishedArray.length; j++ )
        {
            newCharArray[ j ] = finishedArray[ j ];
        }
        newCharArray[ finishedArray.length ] = arrayToCheck[ i ];
        finishedArray = newCharArray;
    }
}
//finishedArray contains desired result 
```

如果您可以更改数据结构并且习惯于使用字符串来包含字符，那么**列表**将是更合适的工具。

```
List<String> finishedList = Arrays.asList( 'a', 'b', 'c', 'd', 'e', 'f', 'g' );
for( String charInList : finishedList )
{
    if( doesNOTMeetSomeCondition( charInList.toCharArray()[ 0 ] ) )
    {
        finishedList.remove( charInList );
    }
}
//finishedList contains the desired result 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T18:35:49.270

在这里使用[`switch`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)声明可能是一个更好的主意。与其从数组中消除你不想要的字符（迭代期间的突变是邪恶的，除非你使用 an `Iterator`），你为什么不使用[`StringBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)类来捕获你想要的所有字符*呢*？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T18:36:20.830

您将无法真正删除该元素，但您可以通过执行 b[i] = 0; 之类的操作来更改它。在给定代码的末尾。数组有一定的长度，长度不能改变，所以如果你想删除数组的那部分，我建议改用列表。

```
List temp = b.asList();
Iterator it = temp.iterator();
while(it.hasNext())
{
    if(it.next() == "t")  //your modification code here
        it.remove();
}
char[] newB = temp.toArray(); 
```

我认为这样的事情对你有用。

# wpf - 关闭窗口时关闭窗口

> ID：11727382
> 
> 赞同：3
> 
> 时间：2012-07-30T18:28:57.237
> 
> 标签：wpf

在我的 WPF 主窗口中，我处理 OnClosing 事件 - protected override void OnClosing(CancelEventArgs e)。当 Windows 关闭并尝试关闭打开的程序时，也会触发此事件。但是，当 Windows 关闭时，我希望有一个与用户单击右上角的 X 按钮不同的逻辑。有没有办法区分窗口关闭是由用户启动而不是由系统启动的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:36:00.230

您可以使用[Application.SessionEnding](http://msdn.microsoft.com/en-us/library/system.windows.application.sessionending.aspx)事件来捕获关闭/注销消息，并将不同的逻辑放入其中。

# c - 为什么这个 C 代码给我一个总线错误？

> ID：11727383
> 
> 赞同：3
> 
> 时间：2012-07-30T18:29:02.027
> 
> 标签：c, arrays, function, bus-error

像往常一样，我在这里阅读了很多帖子。我发现了一篇关于总线错误的特别有用的帖子，请参见[此处](https://stackoverflow.com/questions/212466/what-is-a-bus-error)。我的问题是我无法理解为什么我的特定代码给了我一个错误。

我的代码是尝试自学 C。它是对我学习 Java 时制作的游戏的修改。我的游戏目标是获取一个 5049 x 1 的巨大文字文件。随机选择一个单词，将其混杂并尝试猜测它。我知道如何做到这一切。所以无论如何，文本文件的每一行都包含一个单词，例如：

```
 5049
   must
   lean 
   better 
   program 
   now
   ... 
```

所以，我在 C 中创建了一个字符串数组，尝试读取这个字符串数组并将其放入 C 中。我没有做任何其他事情。一旦我将文件放入 C 中，其余的应该很容易。更奇怪的是它符合要求。当我用`./blah`命令运行它时，我的问题就来了。

我得到的错误很简单。它说：

```
zsh: bus error ./blah 
```

我的代码如下。我怀疑这可能与内存或缓冲区溢出有关，但这是完全不科学和直觉的。所以我的问题很简单，为什么这个 C 代码会给我这个总线错误消息？

```
#include<stdio.h>
#include<stdlib.h>

//Preprocessed Functions 
void jumblegame();
void readFile(char* [], int);

int main(int argc, char* argv[])
{
    jumblegame();

}

void jumblegame()
{
    //Load File 
        int x = 5049; //Rows
        int y = 256; //Colums
        char* words[x]; 
        readFile(words,x);

    //Define score variables 
        int totalScore = 0;
        int currentScore = 0; 

   //Repeatedly pick a random work, randomly jumble it, and let the user guess what it is

}

void readFile(char* array[5049], int x) 
{
    char line[256]; //This is to to grab each string in the file and put it in a line. 
    FILE *file;
    file = fopen("words.txt","r");

    //Check to make sure file can open 
    if(file == NULL)
    {
        printf("Error: File does not open.");
        exit(1);
    }
    //Otherwise, read file into array  
    else
    {
        while(!feof(file))//The file will loop until end of file
        {
           if((fgets(line,256,file))!= NULL)//If the line isn't empty
           {
               array[x] = fgets(line,256,file);//store string in line x of array 
               x++; //Increment to the next line 
           }    
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:35:49.427

这条线有几个问题：

```
array[x] = fgets(line,256,file);//store string in line x of array 
```

*   您已经在前`if`一条语句的条件下读取了该行：您要操作的当前行**已经**在缓冲区中，现在您可以使用它`fgets`来获取*下一*行。

*   您每次都尝试分配给相同的数组槽：相反，您需要为数组索引保留一个单独的变量，该变量每次通过循环递增。

*   最后，您尝试使用`=`. 这只会复制引用，不会制作字符串的新副本。所以数组的每个元素都将指向同一个缓冲区：`line`，当你的函数退出时，它将超出范围并变得无效。要使用字符串填充您`array`的字符串，您需要为数组制作每个字符串的副本：使用 为每个新字符串分配空间`malloc`，然后使用[`strncpy`](http://en.cppreference.com/w/c/string/byte/strncpy)将每个字符串复制`line`到新字符串中。或者，如果您可以使用[`strdup`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)，它将负责为您分配空间。

但我怀疑这是您的总线错误的原因：您将数组*大小*传递为`x`，并且在您的循环中，您分配给`array[x]`. 问题在于`array[x]`它不属于数组，数组只有`0`to的可用索引`(x - 1)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:37:15.400

您正在为 x 传递值 5049。第一次说行

```
array[x] = ... 
```

执行时，它正在访问一个不存在的数组位置。

看起来你正在学习 C。太棒了！您需要尽早掌握的一项技能是基本的调试器使用。在这种情况下，如果你编译你的程序

```
gcc -g myprogram.c -o myprogram 
```

然后运行它

```
gdb ./myprogram 
```

（我假设是 Linux），您将获得一个堆栈转储，其中显示发生总线错误的行。这应该足以帮助您自己找出错误，从长远来看，这比问别人要好得多。

调试器还有许多其他有用的方法，但这是最重要的。它为您提供了一个了解正在运行的程序的窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:38:31.047

您将行存储在 readFile 函数内部定义的行缓冲区中，并将指向它的指针存储在数组中。这样做有两个问题：每次读取新字符串并且缓冲区在堆栈中时，您都会覆盖该值，并且一旦函数返回就无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:43:32.197

```
char* array[5049], int x
array[x] = fgets(line,256,file) 
```

您分配给array[x]，这是一个长度= 1的内存位置，您分配一个指针（4个字节）。

另一方面，您读取了 2 次 256 字节，并且丢失了前 256 个字节。

但是最大的错误是你设置了最终条件！feof()，它检查了字符串数组的限制是否溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:48:54.920

你至少有几个问题：

*   `array[x] = fgets(line,256,file)`

    这将地址存储`line`到每个数组元素中。`line`in 在返回时不再有效`readFile()`，因此您将拥有一组无用的指针。即使`line`有更长的生命周期，让所有数组元素都具有相同的指针也没有用（它们每个都指向最后写入缓冲区的任何内容）

*   `while(!feof(file))`

    这是读取文件的反模式。请参阅[http://c-faq.com/stdio/feof.html](http://c-faq.com/stdio/feof.html)和[“错误使用 feof()”](http://www.drpaulcarter.com/cs/common-c-errors.php#4.2)。这种反模式可能导致您的程序循环比您在读取文件时预期的要多。

*   您分配数组来保存 5049 个指针，但您只需读取文件中的任何内容 - 没有检查您是否读取了预期的数字或防止读取太多。您应该考虑在读取文件时动态分配数组，或者有一种机制来确保您读取正确数量的数据（不要太少也不要太多）并在错误时处理错误。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-30T18:35:01.460

我怀疑问题出在`(fgets(line,256,file))!=NULL)`. 读取文件的更好方法是使用`fread()`（参见[http://www.cplusplus.com/reference/clibrary/cstdio/fread/](http://www.cplusplus.com/reference/clibrary/cstdio/fread/)）。指定`FILE*`（C 中的文件流）、缓冲区的大小和缓冲区。该例程返回读取的字节数。如果返回值为零，则已达到 EOF。

```
char buff [256]; 
fread (file, sizeof(char), 256, buff); 
```

# objective-c - 键值编码合规性

> ID：11727387
> 
> 赞同：0
> 
> 时间：2012-07-30T18:29:20.943
> 
> 标签：objective-c, ios5, xcode4.3, key-value

我很愚蠢，没有在编程时不断地测试，所以现在我不确定错误是从哪里出现的。我正在开发一个可编程计算器。当我运行时，它在显示任何内容之前崩溃并给我这个消息：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<CalculatorViewController 0x6a405a0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key description.' 
```

我会使用 NSLog 来查找错误，但是当崩溃发生在任何出现之前，我不知道在哪里尝试它。关于我做错了什么的想法？

这是 CalculatorViewController.m，我省略了一些未完成的注释掉代码的额外属性声明：

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController ()
@property (nonatomic) BOOL userIsEnteringNumber;
@property (nonatomic) BOOL numberIsNegative;
@property (nonatomic,strong) CalculatorBrain *brain;
@end

@implementation CalculatorViewController
@synthesize display = _display;
@synthesize descriptionLabel = _descriptionLabel;
@synthesize userIsEnteringNumber = _userIsEnteringNumber;
@synthesize numberIsNegative;
@synthesize brain = _brain;

-(CalculatorBrain *)brain
{
if (!_brain) _brain = [[CalculatorBrain alloc] init];
return _brain;
}

//This adds a pressed digit to the display label.

- (IBAction)digitPressed:(UIButton *)sender 
{
NSString *digit = sender.currentTitle;

//Enter digit if it wouldn't create a two-decimal-point case.
NSRange range = [self.display.text rangeOfString:@"."];
if (range.location==NSNotFound || (![digit isEqualToString:@"."]))
    if (self.userIsEnteringNumber)
    {
        self.display.text = [self.display.text stringByAppendingString:digit];
        self.descriptionLabel.text = [self.display.text stringByAppendingString:@" "];
    }
    else 
    {
        self.descriptionLabel.text = [self.descriptionLabel.text stringByAppendingString:digit];
        self.descriptionLabel.text = [self.descriptionLabel.text stringByAppendingString:@" "];
        if (![sender.currentTitle isEqualToString:@"."])
        {
            self.display.text = digit;
        }
        else 
        {
            self.display.text = @"0.";
        }
        self.userIsEnteringNumber = YES;
    }
}

//This sets up an operation.

- (IBAction)operationPressed:(UIButton *)sender 
{
if (self.userIsEnteringNumber) [self enterPressed];
NSString *operation = sender.currentTitle;
double result = [self.brain performOperation:operation];
self.display.text = [NSString stringWithFormat:@"%g",result];
{
    NSString *descr = [self.brain description];
    self.descriptionLabel.text = descr;
}
}

- (IBAction)enterPressed 
{
NSCharacterSet *set = [NSCharacterSet decimalDigitCharacterSet];
NSRange range = [self.display.text rangeOfCharacterFromSet:set];
if (range.location==NSNotFound)
{
    [self.brain pushOperandAsVariable:self.display.text];
}
else 
{
    [self.brain pushOperand:[self.display.text doubleValue]];        
}

self.userIsEnteringNumber = NO;
}

@end 
```

这是 CalculatorBrain.m：

```
#import "CalculatorBrain.h"

@interface CalculatorBrain()
@property (nonatomic, strong) NSMutableArray *programStack;
@property (nonatomic,strong)NSDictionary *variableValues;
@end

@implementation CalculatorBrain

@synthesize programStack = _programStack;
@synthesize variableValues = _variableValues;

- (NSMutableArray *)programStack
{
if (!_programStack) _programStack = [[NSMutableArray alloc] init];
return _programStack;
}

- (id)program
{
return [self.programStack copy];
}

//Here are the two types of pushes that the ViewController can implement.  First, operand pushes . . . 

- (void)pushOperand:(double)operand
{
[self.programStack addObject:[NSNumber numberWithDouble:operand]];
}

//. . . and then variable pushes.

- (void) pushOperandAsVariable:(NSString *)variable
{
//Create dictionary
//Move this later on to ViewController but for now leave where it is....
NSMutableArray *variablesUsed = [[NSMutableArray alloc] init];
NSArray *objects = [[NSArray alloc] initWithObjects:[NSNumber numberWithDouble:3],[NSNumber numberWithDouble:4.1],[NSNumber numberWithDouble:-6],[NSNumber numberWithDouble:4.5298], [NSNumber numberWithDouble:3.14159], nil];
NSArray *keys = [[NSArray alloc] initWithObjects:@"x",@"y",@"z",@"foo", @"π", nil];
NSDictionary *variableValues = [[NSDictionary alloc] initWithObjects:objects forKeys:keys];

//Check program for keys
    NSNumber *operand;
for (int i=0; i<keys.count; i++)
{
    if ([[keys objectAtIndex:i] isEqual:variable])
        [variablesUsed addObject:variable];
    operand = [variableValues objectForKey:variable];
}
[self.programStack addObject:operand];
}

- (double)performOperation:(NSString *)operation
{
[self.programStack addObject:operation];
return [[self class] runProgram:self.program];
}

+ (double)popOffStack:(NSMutableArray *)stack
{
double result = 0;
id topOfStack = [stack lastObject];
if (topOfStack) [stack removeLastObject];
if ([topOfStack isKindOfClass:[NSNumber class]])
{
    result = [topOfStack doubleValue];
}

//Here are the results for various operations.

else if ([topOfStack isKindOfClass:[NSString class]])
{
    NSString *operation = topOfStack;
    if ([operation isEqualToString:@"+"]) 
    {
        result = [self popOffStack:stack] +
        [self popOffStack:stack];
    } 
    else if ([@"*" isEqualToString:operation]) 
    {
        result = [self popOffStack:stack] *
        [self popOffStack:stack];
    } 
    else if ([operation isEqualToString:@"-"]) 
    {
        double subtrahend = [self popOffStack:stack];
        result = [self popOffStack:stack] - subtrahend;
    } 
    else if ([operation isEqualToString:@"/"]) 
    {
        double divisor = [self popOffStack:stack];
        if (divisor) result = [self popOffStack:stack] / divisor;
    }
    else if ([operation isEqualToString:@"sin"])
    {
        result = sin([self popOffStack:stack]);
    }
    else if ([operation isEqualToString:@"cos"])
    {
        result = cos([self popOffStack:stack]);
    }
    else if ([operation isEqualToString:@"√"])
    {
        result = sqrt([self popOffStack:stack]);
    }
    else if ([operation isEqualToString:@"π"])
    {
        result = M_PI;
    }
}
return result;
}

+ (double)runProgram:(id)program
{
//Run program.
NSMutableArray *mutableCopyOfProgram;
if ([program isKindOfClass:[NSArray class]]) 
{
    mutableCopyOfProgram = [program mutableCopy];

return [self popOffStack:mutableCopyOfProgram];
}
else return 0;
}

@end 
```

一如既往，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:09:55.080

最常见的原因是您`CalculatorViewController`在故事板或 xib 文件中定义了一个对象，并且图形界面中的某些内容具有指向其上称为“描述”的出口的链接。同时，您在该类的**代码**中不再有`description`出口。

 **这通常可以通过在界面生成器中跟踪杂散引用并摆脱它来解决。**

# magento - Magento 管理菜单链接未显示

> ID：11727389
> 
> 赞同：1
> 
> 时间：2012-07-30T18:29:29.360
> 
> 标签：magento

我在 Magento 中创建了 2 个模块（A 和 B）。这些模块中的每一个都由管理部分管理。

我尝试通过在模块的配置文件中编写以下配置，在每个模块的管理部分的 cms(menu) 下创建一个菜单链接

模块 A>etc>config.xml

```
<adminhtml>
        <menu>
        <a module="A">
                <title>A</title>
                <sort_order>100</sort_order>               
                <children>
                    <items module="A">
                        <title>Manage A</title>
                        <sort_order>0</sort_order>
                          <action>a/adminhtml_a</action>
                    </items>
                </children>
            </a>
        </menu>
  <adminhtml> 
```

模块 B>etc>config.xml

```
<adminhtml>
        <menu>
        <b module="B">
                <title>B</title>
                <sort_order>100</sort_order>               
                <children>
                    <items module="B">
                        <title>Manage B</title>
                        <sort_order>1</sort_order>
                          <action>b/adminhtml_b</action>
                    </items>
                </children>
            </b>
        </menu>
  <adminhtml> 
```

然而，只有模块 B 的链接显示在 CMS 菜单下。如何显示两个链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:10:01.793

以下工作模块 A>etc>config.xml

```
 <menu>
                <cms>
                    <children>
                    <a module="A">
                        <title>A</title>
                        <sort_order>5</sort_order>               
                        <children>
                            <items module="A">
                                <title>Manage A</title>
                                <sort_order>0</sort_order>
                                <action>A/adminhtml_a</action>
                            </items>
                        </children>
                    </a>
                    </children>
                    </cms>

            </menu> 
```

模块 B>etc>config.xml

```
<menu>
                <cms>
                    <children>
                    <b module="B">
                        <title>B</title>
                        <sort_order>6</sort_order>               
                        <children>
                            <items module="B">
                                <title>Manage B</title>
                                <sort_order>0</sort_order>
                                <action>B/adminhtml_b</action>
                            </items>
                        </children>
                    </b>
                    </children>
                    </cms>

            </menu> 
```

# salesforce - 如何在新标签页中打开 VF 页面？

> ID：11727393
> 
> 赞同：0
> 
> 时间：2012-07-30T18:29:37.227
> 
> 标签：salesforce, visualforce

对 VF 来说真的很新，但这是我的 VF 页面。想要的效果是我希望它在同一窗口的新选项卡中打开。

```
 <apex:page standardController="myController__c"  extensions="myExtension" action="    {!actionJackson}">
</apex:page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:49:38.523

如果您在 SFDC 中覆盖了标准 VF 页面，您似乎在尝试引用名为“myController__c”的自定义 sObject 的标准控制器，这是一个奇怪的对象名称，但如果您想导入标准控制器使用您的对象名称作为标准控制器。

如果您尝试为其创建新 VF 页面的自定义 sObject 被称为：“myObject__c”，那么您的页面定义将如下所示：

```
<apex:page standardcontroller="myobject__c" extensions="class1"></apex:page> 
```

现在开始（使用 web-ui）：

`Your Name->Setup->Create->Objects->myObject__c->Standard Buttons and Links->Edit 'View'`（假设您想替换“视图”）

现在选择使用*VisualForce 页面*覆盖并从下拉列表中选择页面的名称。

现在点击链接以查看 SFDC 标准布局中的记录将带您进入新的自定义 vf 页面。编辑也是如此（如果你覆盖它）。

现在您所要做的就是按照 SFDC 上的说明使用和扩展标准控制器或标准列表控制器。

# javascript - Javascript在浏览器中保存文件？

> ID：11727401
> 
> 赞同：0
> 
> 时间：2012-07-30T18:29:54.600
> 
> 标签：javascript

我生成在本地查看的 html 页面。有没有办法可以使用 javascript 将文件保存在用户指定的文件夹中？（如 C:/dev/myapp/here）

我查看[了 MDN 上的 HTML5 File API](https://developer.mozilla.org/en/Using_files_from_web_applications/)并了解当用户选择文件时如何读取文件。没有办法保存文件。我知道如何通过创建图像标签来缓存文件，但我喜欢生成一个按钮，该按钮将启动脚本以下载一系列文件（zip、gif、png、jpg）。我不认为我可以用 javascript 做到这一点，我可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:32:04.457

> 我不认为我可以用 javascript 做到这一点，我可以吗？

不，你不能。

# java - java字符串中的@而不是反斜杠

> ID：11727404
> 
> 赞同：0
> 
> 时间：2012-07-30T18:29:58.363
> 
> 标签：java, string

> **可能重复：**
> [Java 中的原始字符串？](https://stackoverflow.com/questions/1256667/raw-strings-in-java)

在 C# 中，如果出现禁止符号，则可以将 @（“at 符号”）放在字符串之前。例如：

```
@"a\b\c" 
```

在java中我必须放反斜杠

```
"a\\b\\c" 
```

Java中有什么方法可以使这更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:30:54.927

另一种方法可能是对要转义的符号使用等效代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T18:40:47.910

并不真地。不久前我进行了转换，起初我一直在寻找“C# 在 Java 中对于 xyz 的等价物是什么？”

这有时很有帮助，但大多令人沮丧。C# 是一种比 Java 更高级的语言，Java 需要很长时间才能赶上。

随着时间的推移你会习惯它:-)

# javascript - Google 地球 KmlModel 海拔高度

> ID：11727406
> 
> 赞同：0
> 
> 时间：2012-07-30T18:30:10.153
> 
> 标签：javascript, google-earth, google-earth-plugin

我正在使用 google earth 插件在浏览器中操作 google earth 窗口，但是我似乎无法更改 KmlModels 的高度。

有问题的脚本如下所示：（主要是从示例中复制的）

```
 var placemark = ge.createPlacemark('');
    placemark.setName('model');

    // Placemark/Model (geometry)
    var model = ge.createModel('');
    placemark.setGeometry(model);

    // Placemark/Model/Link
    var link = ge.createLink('');

    link.setHref('http://earth-api-samples.googlecode.com/svn/trunk/examples/' +
        'static/splotchy_box.dae');
    model.setLink(link);

    // get center look at location
    var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

    // Placemark/Model/Location
    var loc = ge.createLocation('');
    loc.setLatitude(37.929828);
    loc.setLongitude(-100.02596);

    loc.setAltitude(6562); //Has no effect
    model.setLocation(loc);

    // add the model placemark to Earth
    ge.getFeatures().appendChild(placemark);
    // zoom into the model
    lookAt.setRange(300);
    lookAt.setTilt(80);
    lookAt.setLatitude(37.929828);
    lookAt.setLongitude(-100.02596);
    ge.getView().setAbstractView(lookAt); 
```

有谁知道为什么？无论如何，我的模型总是被固定在地上。这非常令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:34:35.207

添加代码：

model.setAltitudeMode (ge.ALTITUDE_RELATIVE_TO_GROUND);

# jsf - 扩展 PrimeFaces 对列的 dataTable 处理

> ID：11727407
> 
> 赞同：1
> 
> 时间：2012-07-30T18:30:12.813
> 
> 标签：jsf, datatable, primefaces, custom-component

我正在尝试在 dataTable 中扩展 PrimeFaces 的列组件 - 主要是为了创建标题并根据键值自动插入对象的字段，而无需手动插入列标签及其关联的方面。

我的自定义组件覆盖 DataTableRenderer 中有以下内容：

```
@Override
public void encodeEnd(FacesContext context, UIComponent component)
        throws java.io.IOException {
    Object columnOrder = component.getAttributes().get("columnOrder");
    if (columnOrder != null) {

        component.getChildren().clear();

        Application application = context.getApplication();
        ExpressionFactory expressionFactory = application.getExpressionFactory();

        Column column = new Column();

        Object var = component.getAttributes().get("var");
        String varKey = columnOrder.toString();

        UIOutput header = (UIOutput) application.createComponent(HtmlOutputText.COMPONENT_TYPE);
        header.setValue(varKey);
        column.getFacets().put("header", header);

        ValueExpression valExpr = expressionFactory.createValueExpression("#{" + var + "." + varKey + "}", String.class);
        UIOutput cell = (UIOutput) application.createComponent(HtmlOutputText.COMPONENT_TYPE);
        cell.setValueExpression("value", valExpr);

        column.setStyleClass(varKey);
        column.getChildren().add(cell);
        component.getChildren().add(column);

        component.getAttributes().remove("columnOrder");
    }
    super.encodeEnd(context, component);
} 
```

我这么称呼它

```
<my:dataTable var="item" value="#{myBean.collection}" columnOrder="field" /> 
```

标头设置正确，但单元格按字面意思输出*#{item.field}*而不是评估表达式。

列组件上的 setStyleClass 也没有达到预期的效果。

我猜我抓住了错误的一端，并且在这件事上走错了路。

注意。在这个简化的示例中，我假设 columnOrder 是单个字符串，并且标题仅使用键值，而不是在包中查找的键列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:24:01.100

@maple_shaft 一针见血。

通过将代码移动到覆盖 DataTable 而不是 DataTableRenderer 的类中，一切正常。嗯，就是在我也加入了ElContext之后。

更新后的代码如下：

```
@Override
public List<Column> getColumns() {
    if (columns == null) {
        columns = new ArrayList<Column>();

        for (UIComponent child : this.getChildren()) {
            if (child.isRendered() && child instanceof Column) {
                columns.add((Column) child);
            }
        }

        Object columnOrder = this.getAttributes().get("columnOrder");
        if (columnOrder != null) {

            FacesContext context = FacesContext.getCurrentInstance();

            Application application = context.getApplication();
            ExpressionFactory expressionFactory = application.getExpressionFactory();
            ELContext elContext = context.getELContext();

            Column column = new Column();

            Object var = this.getAttributes().get("var");
            String varKey = columnOrder.toString();

            HtmlOutputText header = new HtmlOutputText();
            header.setValue(varKey);
            column.getFacets().put("header", header);

            ValueExpression valExpr = expressionFactory.createValueExpression(elContext, "#{" + var + "." + varKey + "}", String.class);

            HtmlOutputText cell = new HtmlOutputText();
            cell.setValueExpression("value", valExpr);
            column.getChildren().add(cell);

            column.setStyleClass(var + "-" + varKey);
            columns.add(column);

            this.getAttributes().remove("columnOrder");
        }
    }

    return columns;
} 
```

# jpeg - 如何从同一相机拍摄的 jpeg 图像中获取固定量化表

> ID：11727409
> 
> 赞同：1
> 
> 时间：2012-07-30T18:30:14.803
> 
> 标签：jpeg

我正在尝试从不同的相机图像中提取 c# 中的量化表值，对于特定的相机型号，量化表值应该相同，但我发现同一相机型号的量化表是不同的。任何人都可以告诉我提取 QTables 的过程。

感谢和问候索姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:40:30.743

JPEG 查看器可通过输入搜索窗口从多个来源获得* *JPEG VIEWER **将引导您使用可以提取嵌入在 JPEG 照片中的量化表的软件。加上其他数据，例如压缩比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:30:21.000

看起来您有一台带有可变量化表的相机。

# sitecore - 面向营销人员的 Sitecore Web 表单 - 复杂的自定义字段

> ID：11727415
> 
> 赞同：0
> 
> 时间：2012-07-30T18:30:24.617
> 
> 标签：sitecore, custom-fields, web-forms-for-marketers

客户希望能够在 WFFM 表单中显示 Sitecore 项目列表（每个项目包含一个图像和一些 HTML 文本），每个项目旁边都有一个复选框，以允许最终用户选择这些项目中的一个或多个.

在表单设计器中，对于这个特定的字段，我们希望有一个项目选择器，内容编辑器可以使用它来选择要在列表中显示的项目。

这在 WFFM 中可行吗？是否有我可以查看的复杂自定义表单字段的示例？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:52:14.127

我刚刚发现，使用 WFFM 已经提供的 ChechboxList 字段类型和一些 CSS 样式来处理每个项目的内容，可以轻松完成我的要求。感谢和抱歉这个帖子。

# c - 是否可以为所有进程创建全局信号量？

> ID：11727418
> 
> 赞同：2
> 
> 时间：2012-07-30T18:30:45.427
> 
> 标签：c, linux, semaphore

我的代码中的信号量有问题。

这是我构建的结构：

```
struct PipeShm
{
        // doesn't matter 
        sem_t *mutex;
        int init;
        // more fields
}; 
```

在这里我初始化结构：

```
struct PipeShm myPipe ;
myPipe.mutex = NULL;
myPipe.init = 0; 
```

我使用初始化方法：

```
int initMethod()
{
    if (!myPipe.init)
    {
        myPipe.mutex = mmap (NULL, sizeof *myPipe.mutex, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, -1, 0);
        if (!sem_init (myPipe.mutex, 1, 0))
        {
            myPipe.init = TRUE;
        }
        else
            perror ("initMethod");
    }
    return 1;   
} 
```

这是一个使用上述内容的简单 main ：

```
int main()

{
    int spd, pid, rb;
    char buff[4096];

    shm_pipe_init();
    fork();

        // more code goes here 

        return 0;
} 
```

在这条线上`fork();`（如果我错了，请纠正我）`2`进程会有两个不同的信号量，对吧？

如果是这样，我想制作一个全局信号量。那可能吗？

由于我的代码中存在同步问题，我怀疑主要原因是每个创建的进程都有双信号量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:04:25.960

您初始化信号量的代码似乎是正确的，因此您必须在别处寻找同步问题。下面是一个测试程序，它说明了您的代码的工作行为：

```
void do_child () {
    fprintf(stderr, "[%u] child: waiting...\n", (unsigned)time(0));
    sem_wait(myPipe.mutex);
    fprintf(stderr, "[%u] child: sleeping 1...\n", (unsigned)time(0));
    sleep(1);
    fprintf(stderr, "[%u] child: posting...\n", (unsigned)time(0));
    sem_post(myPipe.mutex);
    fprintf(stderr, "[%u] child: done...\n", (unsigned)time(0));
}

void do_parent (pid_t p) {
    fprintf(stderr, "[%u] parent: sleeping 5...\n", (unsigned)time(0));
    sleep(5);
    fprintf(stderr, "[%u] parent: posting...\n", (unsigned)time(0));
    sem_post(myPipe.mutex);
    fprintf(stderr, "[%u] parent: waiting...\n", (unsigned)time(0));
    sem_wait(myPipe.mutex);
    fprintf(stderr, "[%u] parent: waitpid...\n", (unsigned)time(0));
    waitpid(p, 0, 0);
    fprintf(stderr, "[%u] parent: done...\n", (unsigned)time(0));
}

int main () {
    pid_t p;
    myPipe.mutex = NULL;
    myPipe.init = 0;
    initMethod();
    switch ((p = fork())) {
    case 0:  do_child(); break;
    case -1: perror("fork"); break;
    default: do_parent(p); break;
    }
    return 0;
} 
```

我想你已经知道了，但以防万一，信号量并不是真正的互斥体。您可以将互斥锁视为初始化为`1`. 但是，信号量并不能阻止同时发布多个帖子。如果您对信号量有虚假帖子，这将允许多个线程进入关键部分。

# mysql - MySQL 用一个查询从 2 个表中删除

> ID：11727419
> 
> 赞同：0
> 
> 时间：2012-07-30T18:30:51.043
> 
> 标签：mysql, sql

我需要根据一个表中的查询从两个表中删除

表：实体 guid：整数 子类型：整数 time_created：整数（Unix 时间戳）

表：objects_entity guid：整数标题：文本

objects_entity 中的 guid 是 entity.guid 的外键

我需要根据 subtype=17 删除两个表中的相关记录，并且 time_created 在实体中超过 14 天（因此也要删除相关的 objects_entity）

我非常不擅长 SQL，通过查看我创建的示例：

```
DELETE entities, objects_entity FROM entities a INNER JOIN objects_entity b on b.guid = a.guid AND a.subtype =17 AND a.time_created < UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 14 DAY)) 
```

但这给出了错误：

```
#1109 - Unknown table 'entities' in MULTI DELETE 
```

这超出了我的范围，因为与上面相同的选择语句可以正常工作......该表存在。

任何想法我的语法有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:33:10.473

你需要更换

```
DELETE entities, objects_entity 
```

和

```
DELETE a, b 
```

因为你用`a`and给你的表起别名`b`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T18:34:38.367

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
tbl_name[.*] [, tbl_name[.*]] ...
FROM table_references
[WHERE where_condition] 
```

或者

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
FROM tbl_name[.*] [, tbl_name[.*]] ...
USING table_references
[WHERE where_condition] 
```

# django - django CLI 脚本和数据库路由器：无法导入名称连接

> ID：11727420
> 
> 赞同：0
> 
> 时间：2012-07-30T18:30:53.383
> 
> 标签：django, command-line-interface, sharding

`myapp`我为文件中的应用程序制作了一个数据库路由器`/myproject/myapp/routers.py`

```
class ShardingRouter(object):

    def db_for_read(self, model, **hints):
        return 'default'

    def db_for_write(self, model, **hints):
        return 'default'

    def allow_relation(self, obj1, obj2, **hints):
        return None

    def allow_syncdb(self, db, model):
        return None 
```

在`settings.py`我有：

```
from django.db import connections
DATABASE_ROUTERS = ['myproject.myapp.routers.ShardingRouter',] 
```

这适用于通过 wsgi 运行的普通应用程序，但我有一个 CLI 脚本`/myproject/parser_jobs.py`，它以 cron 开头或从 CLI 手动启动：

```
import os, sys
if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")
...
...
if __name__ == "__main__":
    do_some_long_boring_work() 
```

现在，当我运行此脚本时，出现导入错误：

```
Traceback (most recent call last):
  File "/hosting/myproject/myproject/parser_jobs.py", line 20, in <module>
    import settings
  File "/hosting/myproject/myproject/settings.py", line 46, in <module>
    from django.db import connections
  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'myproject.myproject' (Is it on sys.path?): cannot import name connections 
```

看起来它找到了 settings.py，但是在导入时它失败了`from django.db import connections`。如果我评论这个字符串，它可以工作，但没有我的数据库路由器:(我可以在`using()`任何地方添加，但这并不酷。

因此，网站运行良好，但 cli 脚本失败。请帮忙！

* * *

更新：`/hosting/myproject/myproject/parser_jobs.py` 在我添加数据库路由器之前，从 cli 工作得很好

`pprint`在`sys.path`这个脚本中：

```
['/hosting/myproject/myproject',
 '/hosting/myproject',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/pymodules/python2.7'] 
```

* * *

更新：wsgi 脚本，网站可以很好地使用它：

```
import os
import sys

path = '/hosting/myproject'
if path not in sys.path:
    sys.path.insert(0, path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:08:05.193

`settings.py` 我的脚本与当我将它从移动`/hosting/myproject/myproject/parser_jobs.py`到`/hosting/myproject/parser_jobs.py` （django1.4 manage.py 应该在哪里）时它在同一个文件夹中，它变得正常工作。

`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")`我也改成`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")`

现在它起作用了！

在以前的位置`parser_jobs.py`只能在没有 db 路由器的情况下工作

# libvlc - LibVLC：选框和全屏问题

> ID：11727423
> 
> 赞同：2
> 
> 时间：2012-07-30T18:31:01.400
> 
> 标签：libvlc

我目前正在尝试使用 LibVLC 播放视频并有一些问题：

1.  在具有多个屏幕的计算机上，如何告诉 LibVLC 在特定屏幕上显示全屏？
2.  我尝试使用`libvlc_video_set_marquee_int`. 经过一些跟踪和错误后，我发现，当我在启动视频约 70 毫秒后暂停主线程然后设置选取框文本时，它可以工作。为什么？我怎样才能做得更好？
3.  我想显示字幕文本，但没有视频标题（LibVLC 在开头显示视频标题或文件名）。我读到您可以通过将`--no-video-title-show`选项传递给`libvlc_new()`. 但是，这有两个问题：首先，文档说不应该传递选项。好吧，好吧...但其次，使用此选项对选取框文本有一个奇怪的影响：您可以设置文本，但无论`libvlc_marquee_Timeout`设置为什么，它都会闪烁一次并立即消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T22:28:17.037

就在今天早上，我想我是在视频论坛上的人们的帮助下弄明白的。我应该提一下，我正在使用 linux 系统，我不知道您使用的是什么操作系统，但我知道存在一些差异。这是我所做的：

首先，我发现首先让选取框在命令行上工作很有用。这是有关该主题的讨论的链接：

[http://forum.videolan.org/viewtopic.php?f=13&t=110743](http://forum.videolan.org/viewtopic.php?f=13&t=110743)

对我有用的命令行选项：

```
 cvlc --extraintf=http:logger --verbose=2 --file-logging --logfile=vlc-log.txt --sub-source="marq{marquee=marquee text here}" test.mpg 
```

我遇到了一个问题，即使使用上述命令，我也无法显示选框。在我的 gentoo 系统上，我需要在启用 fontconfig 和 truetype 的情况下重建 vlc。

现在，随着 cvlc 在视频上显示选框，我又回到了 libvlc。我错过了一些东西，所以我在这里开始了另一个讨论：

[http://forum.videolan.org/viewtopic.php?f=32&t=110783](http://forum.videolan.org/viewtopic.php?f=32&t=110783)

下面提供了 C / libvlc 代码片段，它们最终允许我在没有文件名选框的情况下按需显示选框。

主要：

```
const char * const vlc_args[] = {
"--extraintf=http:logger",
"--verbose=1",
"--file-logging",
"--logfile=/home/user/data/logs/vlc",
"--no-video-title-show",                // <- this option disables the filename marquee
"--sub-filter=marq"};                   // <- this option allows the on demand marquee to display properly

vlc_inst = libvlc_new (sizeof(vlc_args) / sizeof(vlc_args[0]), vlc_args); 
```

在按键回调中：

```
 libvlc_video_set_marquee_int(media_player, 0, 1);       /* enable marquee */
        libvlc_video_set_marquee_int(media_player, 6, 32);      /* set marquee font size */
        libvlc_video_set_marquee_int(media_player, 7, 2000);    /* set marquee timeout (ms) */
        libvlc_video_set_marquee_string(media_player, 1, "on demand marquee string here"); 
```

希望其中一些可以帮助您获得有效的解决方案。

# android - 横向模式下的 AutoCompleteTextView 提示

> ID：11727425
> 
> 赞同：5
> 
> 时间：2012-07-30T18:31:26.837
> 
> 标签：android, autocomplete, landscape, autocompletetextview

我`AutoCompleteTextView`在我的应用程序中使用自定义适配器，它在纵向模式下完美运行。然而，在水平模式下，软件键盘占据了大部分屏幕，文本视图使用覆盖按钮而不是适配器提供的视图。

我找不到关于它如何在幕后工作的清晰文档。似乎在横向模式下`AutoCompleteTextView`绕过了适配器的`getView()`方法，`getItem()`使用原始字符串进行了一些肮脏的工作并呈现项目本身。

更糟糕的是，它似乎`AutoCompleteTextView`准确地呈现了两个自动完成提示列表：标准下拉和覆盖按钮同时（如果我们将 imeOptions 设置`flagNoExtractUi`为防止`AutoCompleteTextView`横向扩展，这很明显）。

我想在两种情况下都提供我自己的视图——但到目前为止，我只为下拉菜单做到了。为覆盖列表提供自定义视图的任何更改？

很抱歉，由于排名低，我还不能发布图片。如果有人需要，我可以发给他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:28:18.850

I just encountered this issue myself. Like you said, in landscape the TextView is basing its autocomplete hints on the result of `getItem()`. I don't really see a way to provide anything other than text in this scenario, but a simple solution to get the correct text to show in landscape is to override `toString()` for the object you are basing the hint on.

For instance, in my scenario I am using a list of Contact objects to populate my autocomplete hints, so I overrode `toString()` in my Contact class to get it to show "FirstName LastName" instead of a raw object representation like "Contact@a2a6d4d3a5."

# maven - 尝试构建骨架 Mule 云连接器时出错。

> ID：11727437
> 
> 赞同：1
> 
> 时间：2012-07-30T18:32:04.690
> 
> 标签：maven, mule, connector

因此，我正在按照在线教程构建云连接器，但我什至无法生成骨架！ [教程 1](http://www.mulesoft.org/documentation/display/MULE3USER/Using+the+Archetype) [教程 2](http://blogs.mulesoft.org/build-your-cloud-connector-in-5-easy-steps/)

[使用Mule Cloud Connect Development Kit](http://www.mulesoft.org/documentation/display/MULE3USER/How+to+Build+a+Cloud+Connector)提供的 create-cloud-connector.bat 脚本出现以下错误

```
> [INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.170s
[INFO] Finished at: Mon Jul 30 13:00:57 EDT 2012
[INFO] Final Memory: 7M/122M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (org.mule.tools:mule-cloud-connector-archetype:2.0.16) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我可能做错了什么？

*   我更新了 Maven settings.xml 文件
*   第一个问题是“新连接器使用的云服务的名称 [默认：]”我可以在那里输入任何内容吗？（或者它必须像现有服务一样吗？如果我正在构建一个不存在的服务怎么办？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:28:30.233

看起来本教程指向的是 maven 甚至找不到的相当旧版本的原型（2.0.16）。

我建议用以下命令替换生成步骤

```
mvn archetype:generate -DarchetypeGroupId=org.mule.tools.devkit -DarchetypeArtifactId=mule-devkit-archetype-cloud-connector -DarchetypeVersion=3.3.0 
```

您可以[在此处找到更多信息](https://github.com/mulesoft/mule-devkit)

# android - 活动移到后面开始活动

> ID：11727439
> 
> 赞同：2
> 
> 时间：2012-07-30T18:32:06.713
> 
> 标签：android, android-intent, android-activity

我发现使用留在后台的应用程序很难开始新的活动。这是我的代码：

```
public class App1 extends Activity{

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        registerReceiver(batteryInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    }

    private BroadcastReceiver batteryInfoReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context c, Intent i) {
            Toast.makeText(getApplicationContext(), "TEST", Toast.LENGTH_LONG).show();
            Intent intent = new Intent("App2.intent.action.Launch");
            intent.putExtra("startedByApp", true);
            startActivity(intent);
        }
    }

    @Override
    public void onBackPressed() {
        moveTaskToBack(true);
    }
}

public class App2 extends Activity{

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Toast.makeText(getApplicationContext(), "TEST 2", Toast.LENGTH_LONG).show();
    }
} 
```

当 App1 在前台时，它工作正常。当 App1 在后台 (moveToBack) 显示“TEST”时，它不会启动 App2（我的屏幕上没有“TEST 2”。

伙计们，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:14:12.167

你需要一面旗帜`intent.addFlag(Intent.FLAG_ACTIVITY_NEW_TASK);`

# jython - 为 Jython 设置 java.library.path 时遇到问题

> ID：11727440
> 
> 赞同：0
> 
> 时间：2012-07-30T18:32:09.513
> 
> 标签：jython, unsatisfiedlinkerror

我正在处理一些遗留代码。尝试通过 Jython 在我们的代码中运行 python 脚本时，我得到了 UnsatisfiedLinkError。我尝试使用“-D”选项来设置 java.class.path 选项，但它似乎并没有解决问题。对于以下示例，`Durandal.jar`可在`C:\scm\main\core\isidurandal\durandal\build`

```
"C:\Program Files\Java\jdk1.6.0_31\bin\java.exe" -Xint "-Dpython.path=c:\scm\main\core\isidurandal\durandal\scripts\lib" "-Dpython.home=c:\bin\jython2.5.2" "-Djava.library.path=c:\scm\main\core\isidurandal\durandal\build" -classpath "c:\bin\jython2.5.2\jython.jar;c:\scm\main\core\isidurandal\durandal\build\durandal.jar;c:\scm\main\core\isidurandal\japanese\build\durandalJapanese.jar;c:\scm\main\core\isidurandal\biometrics\build\MtiBiometrics.jar" org.python.util.jython  tools\alignSequences.py

=========================================================
Monolithic library init failed with UnsatisfiedLinkError:
java.lang.UnsatisfiedLinkError: no durandal in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
        at java.lang.System.loadLibrary(System.java:1028)
        at com.interactivesys.durandal.base.Library.<clinit>(Unknown Source)
        at com.interactivesys.durandal.recognition.Library.<clinit>(Unknown Sour
ce)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.python.core.Py.loadAndInitClass(Py.java:895)
        at org.python.core.Py.findClassInternal(Py.java:830)
        at org.python.core.Py.findClassEx(Py.java:881)
        at org.python.core.packagecache.SysPackageManager.findClass(SysPackageMa
nager.java:133)
        at org.python.core.packagecache.PackageManager.findClass(PackageManager.
java:28)
        at org.python.core.packagecache.SysPackageManager.findClass(SysPackageMa
nager.java:122)
        at org.python.core.PyJavaPackage.__findattr_ex__(PyJavaPackage.java:137)

        at org.python.core.PyObject.__findattr__(PyObject.java:863)
        at org.python.core.imp.import_name(imp.java:849)
        at org.python.core.imp.importName(imp.java:884)
        at org.python.core.ImportFunction.__call__(__builtin__.java:1220)
        at org.python.core.PyObject.__call__(PyObject.java:357)
        at org.python.core.__builtin__.__import__(__builtin__.java:1173)
        at org.python.core.imp.importFromAs(imp.java:978)
        at org.python.core.imp.importFrom(imp.java:954)
        at org.python.pycode._pyx0.f$0(tools\alignSequences.py:18)
        at org.python.pycode._pyx0.call_function(tools\alignSequences.py)
        at org.python.core.PyTableCode.call(PyTableCode.java:165)
        at org.python.core.PyCode.call(PyCode.java:18)
        at org.python.core.Py.runCode(Py.java:1261)
        at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:235
)
        at org.python.util.jython.run(jython.java:247)
        at org.python.util.jython.main(jython.java:129)
Traceback (most recent call last):
  File "tools\alignSequences.py", line 1, in <module>
    from com.interactivesys.durandal.recognition import Library
java.lang.UnsatisfiedLinkError: com.interactivesys.durandal.base.ResourceLocator
.resolvePath(Ljava/lang/String;)Ljava/lang/String;
        at com.interactivesys.durandal.base.ResourceLocator.resolvePath(Native M
ethod)
        at com.interactivesys.durandal.base.Library.<clinit>(Unknown Source)
        at com.interactivesys.durandal.recognition.Library.<clinit>(Unknown Sour
ce)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.python.core.Py.loadAndInitClass(Py.java:895)
        at org.python.core.Py.findClassInternal(Py.java:830)
        at org.python.core.Py.findClassEx(Py.java:881)
        at org.python.core.packagecache.SysPackageManager.findClass(SysPackageMa
nager.java:133)
        at org.python.core.packagecache.PackageManager.findClass(PackageManager.
java:28)
        at org.python.core.packagecache.SysPackageManager.findClass(SysPackageMa
nager.java:122)
        at org.python.core.PyJavaPackage.__findattr_ex__(PyJavaPackage.java:137)

        at org.python.core.PyObject.__findattr__(PyObject.java:863)
        at org.python.core.imp.import_name(imp.java:849)
        at org.python.core.imp.importName(imp.java:884)
        at org.python.core.ImportFunction.__call__(__builtin__.java:1220)
        at org.python.core.PyObject.__call__(PyObject.java:357)
        at org.python.core.__builtin__.__import__(__builtin__.java:1173)
        at org.python.core.imp.importFromAs(imp.java:978)
        at org.python.core.imp.importFrom(imp.java:954)
        at org.python.pycode._pyx0.f$0(tools\alignSequences.py:18)
        at org.python.pycode._pyx0.call_function(tools\alignSequences.py)
        at org.python.core.PyTableCode.call(PyTableCode.java:165)
        at org.python.core.PyCode.call(PyCode.java:18)
        at org.python.core.Py.runCode(Py.java:1261)
        at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:235
)
        at org.python.util.jython.run(jython.java:247)
        at org.python.util.jython.main(jython.java:129)

java.lang.UnsatisfiedLinkError: java.lang.UnsatisfiedLinkError: com.interactives
ys.durandal.base.ResourceLocator.resolvePath(Ljava/lang/String;)Ljava/lang/Strin
g; 
```

我的理解是，当尝试访问不在类路径中的库时，通常会发生此错误，但我认为我已经在命令行上正确设置了它。再说一次，我对 Jython 还不是很熟悉（对 Java 或 Python 不是很熟悉），所以我有点不知所措。

*编辑：*看起来这可能是尝试在 64 位 Java 下运行 32 位 DLL 的问题。如果事实证明是这样，我将修改我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:56:32.777

事实上，事实证明，答案是它是一个 32 位 DLL，而我试图用 64 位 Java 运行它。不是很直观的错误信息...

# duplicates - 链接器命令失败，退出代码为 1：重复符号

> ID：11727444
> 
> 赞同：11
> 
> 时间：2012-07-30T18:32:16.480
> 
> 标签：duplicates, symbols

```
ld: duplicate symbol _velocityX in \
/Users/Student/Library/Developer/Xcode/DerivedData/finalproject-ffzevekmatxvhrgisgeleoijyllr/Build/Intermediates/finalproject.build/Debug-iphonesimulator/finalproject.build/Objects-normal/i386/Level2ViewController.o \
and \
/Users/Student/Library/Developer/Xcode/DerivedData/finalproject-ffzevekmatxvhrgisgeleoijyllr/Build/Intermediates/finalproject.build/Debug-iphonesimulator/finalproject.build/Objects-normal/i386/Level1ViewController.o \
for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

更新：添加了 \ + 换行符以提高可读性

我不知道我的项目有什么问题，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-14T03:24:19.660

我有同样的问题。但这是我的错。:)。你可能写了 a`#import file.m`而不是`#import file.h`. 所以编译资源会复制符号file.o。- 而已！^^ 要查看它，您删除该错误文件，构建 --> 显示错误行 --> 然后重新复制它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-27T05:28:12.067

我遇到了同样的错误，这是因为我在两个单独的 .m 文件中定义了一个同名的常量。一旦我更改了其中一个的名称，它就会编译。

例如在我的 ViewController.m 我有：

```
#import "ViewController.h"
const int IPHONE4 = 480; 
```

在我的 Menu.m 中：

```
#import "Menu.h"
const int IPHONE4 = 480; 
```

我将 Menu.m 更改为：

```
#import "Menu.h"
const int IPHONE4H = 480; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-16T05:09:45.357

我在尝试将一些框架集成到我的应用程序中时遇到了同样的错误。

首先我使用的是 Sparrow——一个图形库，默认情况下我有一个 main.m 文件，在我尝试集成同样依赖于 FacebookSDK 的 Parse 之前一切都很好。在 FacebookSDK 文件夹中，有一个名为 Scrumptious 的示例应用程序，其中还有一个 main.m，这是我的问题的根源。我删除了示例应用程序目录，一切正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T18:58:16.213

您可能`double _velocityX`在一个头文件中包含`Level1ViewController.c`和`Level2ViewController.c`，当头文件应该有时`extern double _velocityX`，并且*恰好其中一个*文件`.c`应该有`double _velocityX`. （假设`_velocityX`is的类型`double`，这似乎是合理的，并且还假设这是 C 或 C++ 而不是 Fortran 或其他东西）。

# java - JTextArea JLabel 比较两个txt。文件逐行

> ID：11727448
> 
> 赞同：1
> 
> 时间：2012-07-30T18:32:30.650
> 
> 标签：java, swing, jtextfield, jtextarea, compareto

大家。通过在同一区域显示，我已经完成了我的代码两个 txt 文件。

但我想逐行比较两个 txt 文件。我想用彩色线显示差异，最后，不同的字母或单词，不同的线我要加粗。

我该如何开始？

谢谢现在，我的代码在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:42:16.793

`JTextArea`可能会产生合适的视图，但您仍然需要对差异进行建模。我会看看[Eclipse](http://www.eclipse.org/platform/)或[NetBeans](http://platform.netbeans.org/screenshots.html)平台，或者可能是[`svnview`](http://code.google.com/p/svnview/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:10:16.963

您可能需要要求用户上传两个版本的文件。

在服务器中，您需要逐行比较，并将文件差异的行号存储在另一个文件或位置

然后，在显示时，获取行号并给它们适当的装饰（即粗体等）。

# c# - SqlCommand.CommandTimeout 已达到

> ID：11727449
> 
> 赞同：0
> 
> 时间：2012-07-30T18:32:31.703
> 
> 标签：c#, asp.net, .net, sql, timeout

> **可能重复：**
> [如何捕获 SQLServer 超时异常](https://stackoverflow.com/questions/29664/how-to-catch-sqlserver-timeout-exceptions)

我有以下代码：

```
using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["MainDll"].ToString()))
{
    connection.Open();
    using (SqlCommand command = new SqlCommand(sql.ToString(), connection))
    {
        command.CommandType = CommandType.Text;
        command.CommandTimeout = 300;
        returnCode = (string)command.ExecuteScalar();
        //Dispose();
    }
} 
```

我如何知道何时达到超时？我想在超时后抓住它并用 SQL 做一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:39:33.967

只有在抛出错误时才能知道达到了 Timeout

所以我建议尝试处理异常，如果捕获到 TimeOut 异常，那是你可以根据你的要求做的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:51:03.267

```
try {
  //your code
}
catch (SqlException ex) {
  if (ex.Number == -2) { //System.Data.SqlClient.TdsEnums.TIMEOUT_EXPIRED
    //handle timeout
  }
  else {
    throw;
  }
}
finally {
  //cleanup
} 
```

资料来源：[这个](https://stackoverflow.com/questions/29664/how-to-catch-sqlserver-timeout-exceptions)SO 线程。

# android - 使用 Android 4.X 编译但支持 API 级别 9

> ID：11727452
> 
> 赞同：7
> 
> 时间：2012-07-30T18:32:35.900
> 
> 标签：android, intellij-idea, actionbarsherlock

我正在开发一个使用 ActionBarSherlock 的应用程序。正如它的[文档](http://actionbarsherlock.com/usage.html)指出的那样：

> [...] 该库要求**它和您的项目都使用 Android 4.0 或更高版本进行编译。**该项目还要求您在您的编辑器和您可能使用的任何构建系统中都使用 JDK 1.6 进行编译。

因此，这意味着我将针对 Android 4.X 编译我的应用程序（和库），但在我的清单中，我声明我的目标是（例如）API 级别 9。

这一切都很好，但有一些事情让我感到不安。从[常见问题解答](http://actionbarsherlock.com/faq.html)：

> **使用库时，我应该在清单中定位什么 API 级别？**
> 
> 需要以 API 级别 11 或更高版本为目标，因为它会导致 Android 在较新的设备上运行时自动添加本机操作栏。由于您将针对新的 API 进行编译，但您的应用程序可能会在具有旧版本 Android 的设备上运行，**因此必须特别注意避免使用或正确检查和调用在您的最低 SDK 版本之后引入的任何方法。**

这意味着，我必须*手动*检查每个方法调用，所以我不使用目标 API 级别中不可用的任何方法（在我的情况下为 9）？这对我来说听起来不对。

有没有办法告诉我的 IDE（IntelliJ），我只使用 API 级别 9（所以我不会对不存在的方法/类进行任何自动完成，也不要意外使用它们）和然后选择针对另一个Android版本编译它？

或者我可以使用一些自动检查（在编译时运行）来检查吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T19:50:01.460

ADT 的 lint 功能应该通过在为错误的 API 版本进行 API 调用时发出警告来解决此问题。

您应该使用可用的最新 SDK（目前为 4.1）编译 ABS 和您的项目。您的清单应具有`targetSdkVersion`尽可能高的版本（理想情况下与您的编译 SDK 匹配），并且`minSdkVersion`应设置为您支持的最低版本。

Lint 与 IntelliJ IDEA 部分集成，也可作为命令行工具使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:42:03.003

您暂时将目标 SDK 设置为各种较低的 SDK 并使用它进行调试。然后，您的最终构建是使用最新的 SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:04:26.347

与往常一样，您应该将 targetSdk 设置为清单和 project.properties 文件中可用的最大值（正如 google 在他们的视频中推荐的那样），以便 ADT&SDK 能够相应地优化 ADK。

将 minSdk 设置为您希望从中支持您的应用程序的那个，并让 Lint 告诉您是否有任何问题，以防您使用太新的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:46:07.853

设置类似于您在清单中提到的构建目标。

# iphone - UIView setHidden 不起作用

> ID：11727453
> 
> 赞同：4
> 
> 时间：2012-07-30T18:32:37.447
> 
> 标签：iphone, objective-c, storyboard

我正在为 iphone 编写一个应用程序，并试图创建一个具有两个不同视图的视图控制器。所以我在情节提要的初始视图之上创建了一个子视图。我在 .h 中为新视图创建了一个出口。我想在按下按钮后显示 resultsView，因此我将视图设置为隐藏在属性中。

```
@interface ViewController : UIViewController 
{
UIView *resultsView;
}
@property (nonatomic, retain) IBOutlet UIView *resultsView;
- (IBAction)buttonTapped:(id)sender; 
```

在我的 .m 中，我有以下代码

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize resultsView;

- (IBAction)scanButtonTapped:(id)sender
{
[resultsView setHidden = NO];
} 
```

我也试过

```
resultsView.hidden = NO; 
```

这些都不起作用，我尝试 NSLog 来检索 resultsView.hidden 的 BOOL，它仍然是 YES。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T18:42:34.153

如果`resultsView`是`NULL`或`nil`，那么您没有在界面生成器或代码中正确分配它。确保在故事板/xib 文件中拖动插座连接，或在代码中分配它，例如`viewWillAppear`

如果未调用该函数，则该操作未链接到界面生成器中的按钮。为确保连接正确，您可以 ctrl+单击（或右键单击）并从按钮拖动到视图控制器，然后`scanButtonTapped`从出现的“已发送操作”列表中进行选择

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-12T10:08:44.923

另一种选择 - 检查您是否`[? setHidden:]`在 UIThread 中运行代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:41:17.537

最可能的解释是`resultsView`当您尝试设置 hidden 属性时 id nil 。

请检查您的代码以进行初始化`resultsView`，如果您需要更多帮助，请发布其中的一些相关部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-27T07:55:34.740

如果您正在设计 a`@IBDesignable` `UIView`并且正在使用 swift，则不知何故`view.hidden = isHidden`不起作用。

解决方法如下。

```
view.setValue(isHidden, forKey: "hidden") 
```

我希望这可以帮助那里的人。

# php - 从 PHP 调用 Windows DLL

> ID：11727455
> 
> 赞同：0
> 
> 时间：2012-07-30T18:32:37.907
> 
> 标签：php, windows, dll

我正在尝试使用 PHP 从 DLL 中调用函数。

根据我的研究，我需要先从命令行执行以下操作：

```
REGSVR32 MyDLL.dll 
```

然后我可以做类似的事情：

```
<?php
    $my_dll = new COM(‘MyDLL.Functions’);
    $text_to_be_encryopted = ‘This needs to be encrypted.’;
    $output_text = $my_dll->EncryptString($text_to_be_encryopted);
    echo $output_text
?> 
```

问题是我无法让 Windows 注册 DLL。我收到以下消息：

moduleMyDLL.dll 可能与您正在运行的 Windows 版本不兼容。检查模块是否与 regsvr32.exe 的 x86（32 位）或 x64（64 位）版本兼容

我在 Windows 32 和 Windows 64 系统上进行了尝试，结果相同。任何想法（或另一种方法）>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:53:41.460

我知道我在 Windows 7 上遇到了这个问题。尝试开始->cmd->（右键单击）以管理员身份运行，然后运行命令。我花了无数个小时正常运行命令提示符，然后意识到这就是问题所在。

# javascript - 动态创建 html 元素后，是否有触发事件？

> ID：11727457
> 
> 赞同：2
> 
> 时间：2012-07-30T18:32:40.543
> 
> 标签：javascript, asp.net, html, .net-3.5, dynamic-html

这是一个愚蠢的问题，对此感到抱歉。

我正在从 ASP.NET 服务器控件动态创建 html 元素。在创建元素或创建所有元素之后，有没有办法强制事件在其中一个上触发？我知道它是从服务器到客户端的，但我正在寻找解决方法。文档中是否有任何内容可以监听正在添加的 html 或任何内容？

我正在创建这样的控件：

```
protected override void RenderContents(HtmlTextWriter output)
{
    // htmlString is a dynamically built string of html
    output.Write(htmlString);
} 
```

这些元素是一系列级联下拉列表，用户可以保存其中的选定值。因此，如果我在创建项目时选择了项目的值，则无法启动该事件，该事件会调用数据库以获取数据以填充其依赖控件。这里有一个“无回发”规则（不是我的规则）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:35:42.740

您可以输出 javascript 作为渲染的一部分并将[事件绑定](http://triaslama.wordpress.com/2008/07/22/four-ways-javascript-binding-event-listeners/)到动态创建的控件。

jQuery 使[绑定事件](http://api.jquery.com/category/events/)变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:40:16.333

如果需要，从 RegisterClientScriptBlock() 触发 Function()

示例用法：

`ClientScript.RegisterClientScriptBlock(GetType(), "sas", "<script> alert('Inserted successfully');</script>", false);`

或者，您可以在这些新项目上设置点击等实时事件。

```
$(document).on('click', '#exampleThing', function () {
    // what you want to do
}); 
```

# floating-point - 如何在 php 中生成评级系列？

> ID：11727460
> 
> 赞同：0
> 
> 时间：2012-07-30T18:32:52.217
> 
> 标签：floating-point, rating, series

我如何在 php 中生成浮动评级系列
像：

```
0.1
0.2
0.3
0.4
...
...
1
...
9.8 
9.9
10

for($i=10; $i<=1; $i++)
{
  echo  $i;
  $data[] =  $i/10;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:32:52.217

```
for($i=1; $i<=100; $i++)
{
    echo floatVal($i/10)."<br>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:39:25.260

使用本机[`range`](http://php.net/manual/en/function.range.php)功能：

```
$range = range(0.1, 10, 0.1); 
```

# ms-access - 将变量字符串插入单元格的前缀

> ID：11727461
> 
> 赞同：1
> 
> 时间：2012-07-30T18:32:53.077
> 
> 标签：ms-access

我有一个文本字段，其数据的长度范围为 3 到 6。所有单元格都需要包含一个长度为 6 的字符串。我想插入“0”作为前缀，零的数量等于单元格长度和 6 之间的差异。

所以：

```
123
1123
11123
111123 
```

将会：

```
000123
001123
011123
111123 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T18:10:12.963

在更新查询中，将字段的值更新为 format(field,"000000")

# sas - SAS：在 PROC EXPORT 中限制变量

> ID：11727469
> 
> 赞同：5
> 
> 时间：2012-07-30T18:33:27.227
> 
> 标签：sas

我有一个 PROC EXPORT 问题，我想知道您是否可以回答。

我有一个包含 800 多个变量和超过 200K 观察值的 SAS 数据集，我正在尝试将变量的子集导出到 CSV 文件（即我需要所有记录；我只是不想要所有 800 多个变量）。我总是可以创建一个临时数据集“保留”我需要的字段并在该临时数据集上运行 EXPORT，但我试图避免额外的步骤，因为我有大量记录。

为了证明这一点，考虑一个具有三个变量的数据集，名为 x、y 和 z。但是，我希望通过 PROC EXPORT 生成的文本文件只包含 x 和 y。我对以下解决方案的尝试并不完全奏效。

**SAS 代码**

当我运行以下代码时，我并没有得到我需要的东西。如果您运行此代码并查看生成的文本文件，它在每一行的末尾都有一个逗号，并且标题包含数据集中的所有变量。此外，我在日志中收到了一些我不应该收到的消息。

```
data ds1;
      do x = 1 to 100;
            y = x * x;
            z = x * x * x;
            output;
      end;
run;

proc export data=ds1(keep=x y)
      file='c:\test.csv'
      dbms=csv
      replace;
quit; 
```

这是生成的文本文件的前几行（“C:\test.csv”）

```
x,y,z
1,1,
2,4,
3,9,
4,16, 
```

**SAS 日志**

```
9343  proc export data=ds1(keep=x y)
9344      file='c:\test.csv'
9345      dbms=csv
9346      replace;
9347  quit;

9348   /**********************************************************************
9349   *   PRODUCT:   SAS
9350   *   VERSION:   9.2
9351   *   CREATOR:   External File Interface
9352   *   DATE:      30JUL12
9353   *   DESC:      Generated SAS Datastep Code
9354   *   TEMPLATE SOURCE:  (None Specified.)
9355   ***********************************************************************/
9356      data _null_;
9357      %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
9358      %let _EFIREC_ = 0;     /* clear export record count macro variable */
9359      file 'c:\test.csv' delimiter=',' DSD DROPOVER lrecl=32767;
9360      if _n_ = 1 then        /* write column names or labels */
9361       do;
9362         put
9363            "x"
9364         ','
9365            "y"
9366         ','
9367            "z"
9368         ;
9369       end;
9370     set  DS1(keep=x y)   end=EFIEOD;
9371         format x best12\. ;
9372         format y best12\. ;
9373         format z best12\. ;
9374       do;
9375         EFIOUT + 1;
9376         put x @;
9377         put y @;
9378         put z ;
9379         ;
9380       end;
9381      if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
9382      if EFIEOD then call symputx('_EFIREC_',EFIOUT);
9383      run;

NOTE: Variable z is uninitialized.
NOTE: The file 'c:\test.csv' is:
      Filename=c:\test.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=30Jul2012:12:05:02,
      Create Time=30Jul2012:12:05:02

NOTE: 101 records were written to the file 'c:\test.csv'.
      The minimum record length was 4.
      The maximum record length was 10.
NOTE: There were 100 observations read from the data set WORK.DS1.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds

100 records created in c:\test.csv from DS1.

NOTE: "c:\test.csv" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.12 seconds
      cpu time            0.06 seconds 
```

有什么想法可以解决这个问题吗？我在 Windows 7 上运行 SAS 9.2。

任何帮助，将不胜感激。谢谢。

*   卡尔提克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T20:05:24.363

根据 Itzy 对我的问题的评论，这是答案，这正是我所需要的。

```
proc sql;
    create view vw_ds1 as 
        select x, y from ds1;
quit;

proc export data=vw_ds1
    file='c:\test.csv'
    dbms=csv
    replace;
quit; 
```

谢谢您的帮助！

# python - 如何将字符文字放在python字符串中

> ID：11727475
> 
> 赞同：3
> 
> 时间：2012-07-30T18:33:56.150
> 
> 标签：python, regex, string-literals

我正在尝试在 python 中编写一个正则表达式，其中涉及的字符之一是 \001 字符。将 \001 放入字符串中似乎不起作用。我也试过'string' + str(chr(1))，但正则表达式似乎没有抓住它。请看在上帝的份上，有人帮助我，我整天都在为此苦苦挣扎。

```
import sys
import postgresql
import re

if len(sys.argv) != 2:
    print("usage: FixToDb <fix log file>")
else:
    f = open(sys.argv[1], 'r')
    timeExp = re.compile(r'(\d{2}):(\d{2}):(\d{2})\.(\d{6}) (\S)')
    tagExp = re.compile('(\\d+)=(\\S*)\001')
    for line in f:
        #parse the time
        m = timeExp.match(line)
        print(m.group(1) + ':' + m.group(2) + ':' + m.group(3) + '.' + m.group(4) + ' ' + m.group(5));
        tagPairs = re.findall('\\d+=\\S*\001', line)
        for t in tagPairs:
            tagPairMatch = tagExp.match(t)
            print ("tag = " + tagPairMatch.group(1) + ", value = " + tagPairMatch.group(2)) 
```

这是输入的示例行。为了便于阅读，我将 '\001' 字符替换为 '~'

15:32:36.357227 R 1 0 0 0 8=FIX.4.2~9=0067~35=A~52=20120713-19:32:36~34=1~49=PD~56=P~98=0~ 108=30~10=134

输出：

15:32:36.357227 R 标签 = 8，值 = FIX.4.29=006735=A52=20120713-19:32:3634=149=PD56=P98=0108=3010=134

所以它不会停留在 '\001' 字符处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:40:11.637

`chr(1)`应该可以正常`"\x01"`工作`"\001"`。（请注意，它`chr(1)`已经返回了一个字符串，因此您不需要这样做`str(chr(1))`。）在您的示例中，看起来您同时拥有*and* `"\001"` *，* `chr(1)`因此除非您的数据中连续有两个字符，否则这将不起作用。

您说正则表达式“似乎没有抓住它”，但是您没有给出输入数据的示例，因此无法说出原因。

编辑; 好的，看起来问题与`\001`. 这是经典的贪心问题。您的`\S*`tagExp 表达式中的 将匹配一个`\001`字符（因为该字符不是空格。所以`\S*`正在吞噬整行。`\S*?`用于使其不贪婪。

编辑：正如其他人所指出的，您的反斜杠看起来也有问题。在正则表达式中，您面临一个反斜杠加倍的问题：Python 使用反斜杠作为它自己的字符串转义符（如`\t`制表符、`\n`换行符），但正则表达式也将反斜杠用于它们自己的目的（例如，`\s`用于空格）。`"\001"`通常的解决方案是使用原始字符串，但如果您想使用转义，则不能这样做。但是，您可以为您的`timeExp`正则表达式使用原始字符串。然后在您的其他正则表达式中，将反斜杠加倍（除了 on `\001`，因为您希望将其解释为字符代码转义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:20:23.917

而不是使用`\S`来匹配可以是任何非空白字符的值，包括`\001`，您应该使用`[^\x01]`，它将匹配任何不是 的字符`\001`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T10:32:00.233

@Sam Mussmann，不...

`1`(十进制) **=** `\001` (八进制) **<>** `\x01` (UNICODE)

# image-processing - 检测纸上的符号

> ID：11727485
> 
> 赞同：2
> 
> 时间：2012-07-30T18:34:44.980
> 
> 标签：image-processing, opencv, aforge, vision

我想检测用户在一张纸上绘制的符号。该符号将由文档指定，因此每个用户都绘制相同的符号，但由于每个用户的独特笔迹，当然会存在差异。

1.  我应该选择什么样的符号？什么是容易识别的，但也使得检测能够容忍微小的修改（每个用户的手）？

2.  我应该使用什么模式匹配方法/算法来检测文档图像中的符号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:10:29.597

该问题涉及文档图像分析的一个方面，这很有趣，但非常初级。

1.  对于您的问题 1\. 最好由您自己决定。你真的想不出任何这样的符号吗？假设您有时间尝试一些符号和识别结果……很简单，可以自己回答。提示：考虑手机上的触摸屏。他们通常有手势识别——通常用于锁定屏幕，甚至是快捷方式。通常使用什么样的手势 - 请看这里的[屏幕截图](https://play.google.com/store/apps/details?id=com.gestureshortcuts&hl=en)。
2.  识别更有趣。假设符号绘制在一张清晰可见的纸上，并且可以很容易地作为一个对象从图像中分离出来（通过连接的组件，在 OpenCV 中可用），尝试匹配 Moments。OpenCV 中存在简单矩或 Hu 不变矩。对于简单的手绘符号，这些就足够了。

# xslt - 如何使用 xQuery

> ID：11727493
> 
> 赞同：4
> 
> 时间：2012-07-30T18:35:24.963
> 
> 标签：xslt, xquery

我有一个 xsl 文件，我目前正在一次获取所有记录，将它们作为隐藏开始，并在用户选择 id ( `<xsl:for-each select"">`) 时显示它们。id 值当前存储为用户单击该 id 选择的 javascript 变量。

我想使用 xQuery 来获取记录，但只获取与用户选择的 ID 匹配的记录。此外，我通常了解 xQuery 中规则背后的逻辑，我只是​​不明白如何在我的 xsl 文件中实际使用它。是否可以使用 xQuery 将 id（js 变量）的值与使用 xQuery 仅获取具有匹配 id 的记录的值进行比较？

感谢您的时间，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T21:21:00.010

XQuery 是一种独立于 XSLT 的语言，而不是嵌入在 XSLT 中的语言。因此，根据您启动 XSLT 的方式，您可以寻找一种并行方法来启动 XQuery。例如，您可以尝试[XQIB](http://www.xqib.org/documentation.php)（我没有尝试过，但看起来很有希望）。

如果您需要更多帮助，请告诉我们您是如何运行 XSLT 处理器的，以及您的数据源是什么。

**但是**... 完全不清楚 XQuery 是否真的是您想要的。听起来您并不需要 XQuery 来完成在 XSLT 中无法完成的事情。我什至不确定你没有想到 jQuery ......这是一种完全不同的动物。

如果您能告诉我们更多关于这些记录的来源，将会很有帮助；它们以什么形式存储（XML DOM？）；以及您需要对它们做什么。那么最好的解决方案可能是我们向您展示如何在 XSLT（或 Javascript）中执行您想要执行的操作。

## 更新

看着您的新评论，我意识到我可能误解了您试图在哪里运行 XQuery。您在上面提到了 javascript，我假设您想在浏览器中运行 XQuery，但现在我想我得出了错误的结论——您实际上是想在服务器上运行它吗？

无论您在何处运行它，XSLT 或 XQuery 都可以选择“仅与用户选择的 ID 匹配的记录”。但是，如果 XSLT/XQuery 正在服务器上运行，为了使其工作，您必须在用户选择 ID 后进行页面刷新或 AJAX 调用，以让服务器上的程序知道选择的 ID是。我不确定您是否已经设置了该架构，或者您是否仍在尝试弄清楚如何使用 AJAX 调用来根据用户输入检索数据。

听起来您永远不想将整组记录从服务器发送到客户端，甚至最初都不想（对吗？）。在这种情况下，用户如何知道可用 ID 的集合是什么？

无论如何，您的问题可能归结为“如何从 ASP.NET 运行 XQuery？” 我没有尝试这样做，但这篇文章可能会有所帮助：[在 ASP.NET 中使用 Saxon.NET](http://www.pietsieg.com/sections/XQuery/ArtXQueryBeg.aspx)；或者这个：[使用 XQuery 查询 XML 数据](http://www.4guysfromrolla.com/articles/071603-1.2.aspx)。

但同样，我认为 XQuery 可能不是您想要的。XQuery 不是 XSLT 中使用的查询语言——它更像 XPath。XQuery 是您可以用来*代替*XSLT 或在它旁边使用的东西。因此，如果您使用 XSLT 并且想要根据用户选择的 ID 过滤记录，假设您已经知道用户选择的 ID，那么简单的方法是在 XSLT/XPath 中，而不是启动单独的处理器。例如，你可以说

```
 <xsl:for-each select="//record[@ID = $usersChosenID]"> ... 
```

让我知道这是否接近您的解决方案。有多种方向可以扩展这个解释，但我不想花时间在没有痒的地方抓挠。

# javascript - 如何加速getJSON数组数据

> ID：11727495
> 
> 赞同：0
> 
> 时间：2012-07-30T18:35:36.727
> 
> 标签：javascript, ajax, arrays, json

我在服务器端有一个巨大的数组（4MB）数据。现在我正在使用 jquery`getJSON`方法来获取数组数据并在浏览器上呈现整个数组。事实证明，获取数组数据太慢了。可能主要时间花在了 JSON 解析上，也可能不是。从服务器获取此类数组数据的最佳/最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:57:23.193

4 兆字节是要一次性发送客户端的大量数据吗？与其试图加快 JavaScript 处理 JSON 的速度，我怀疑你最好的办法是找出一些策略来更多地分解数据（这样你一次可以使用更少的数据）。

我的意思是，你真的需要一次全部吗？可能值得考虑为返回的 JSON 添加一些服务器端过滤，以便尝试将其限制为仅用于执行您的应用程序应该执行的任何操作所需的数据？

例如，如果您计划显示大量产品列表，可能只加载前 50-100 个，然后当用户向下滚动页面时再次调用以加载下一个 50-100 等等？

# c# - Math.Pow 中 VB 中的奇怪转换

> ID：11727497
> 
> 赞同：2
> 
> 时间：2012-07-30T18:35:42.377
> 
> 标签：c#, .net, pow

此代码工作正常

```
Dim bc As Long = Math.Pow(36, ((IBase36.Length - 1) - i)) 
```

**！在 VB Math.Pow 下返回 DOUBLE 数据类型。**

当我将它转换成 C# 时，我得到了

```
long bc = Math.Pow(36, ((IBase36.Length - 1) - i)); 
```

我有一个演员语法问题。

怎么可能解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:38:51.967

```
long bc = (long)Math.Pow(36, ((IBase36.Length - 1) -i)); 
```

() 是C#中的[强制转换运算符。](http://msdn.microsoft.com/en-us/library/0z4503sa)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:43:34.073

可能在 VB 中，您有[Option Strict](http://msdn.microsoft.com/en-US/library/zcd4xwzs%28v=VS.80%29.aspx) **Off**或根本没有声明（默认关闭）

来自 MSDN

```
Visual Basic allows conversions of many data types to other data types. 
Data loss can occur when the value of one data type is converted to a data type with 
less precision or smaller capacity. A run-time error occurs if such a narrowing 
conversion fails. Option Strict ensures compile-time notification of these narrowing 
conversions so they can be avoided. 
```

所以我将更改VB代码

```
Option Strict On

Dim bc As Long = CType(Math.Pow(36, ((IBase36.Length - 1) - i)), Long) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:39:19.540

`Math.Pow`具有返回类型`double`，在 C# 中不能隐式转换为`long`，因此必须通过类型转换显式完成。我不精通 VB.NET，但那里的转换规则可能不那么严格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:08:31.593

在 C# 中，如果你想要一个结果，你必须告诉编译器 Math.Pow 是 long 或 double 类型。

在控制台应用程序中检查这一点。

```
int value = 2;
string power = "6";
Console.WriteLine("" + (long)Math.Pow(value, (Convert.ToInt16(power) - 1)));
Console.ReadKey(); 
```

# php - 非对象上的 Slim 框架成员函数 render()

> ID：11727501
> 
> 赞同：0
> 
> 时间：2012-07-30T18:35:58.527
> 
> 标签：php, slim

嘿，所以我正在设置一些类，以使我的路线远离我的 index.php，

**索引.php**

```
require 'library/Slim/Slim.php';

$app=new Slim();
$app->map('/api/:class/:method(/:args1(/:args2(/:args3)))', function ($class,$method) use ($app) {

    $args=array_slice(func_get_args(), 2);
    require_once('library/controllers/'.str_replace('.','/',$class).'.php');

        $Class=substr($class,strrpos($class,'.'));
        $controller=new $Class($app);

        if(method_exists($controller,$method)) $controller->{$method}($args);

})->via('GET', 'POST');

$app->run(); 
```

我打电话给这样的东西__http://domain.com/api/photos/recent/args/args/args

**测试班照片**

```
<?php

class photos {

    private $app;

    public function __contruct() {
        $this->app = Slim::getInstance();
    }

    public function recent() {

        $this->app->render('test.html');

    }

} 
```

我只是想运行一个 Slim 实例来渲染，但由于某种原因没有得到它？测试 HTML 与 photos.php 位于同一目录中

我究竟做错了什么？我因致命错误而死

**PHP 致命错误：在第 13 行的 /library/controllers/photos.php 中的非对象上调用成员函数 render()**

# android - 无法在模拟器浏览器中使用 Intent-Filter 启动 Activity

> ID：11727503
> 
> 赞同：0
> 
> 时间：2012-07-30T18:36:01.210
> 
> 标签：android, intentfilter

我是 Android 新手，正在试验 Android 的一些功能以准备项目工作。在我提出这个问题之前，我会声明我已经花了几个小时在谷歌上搜索这个问题，即使在 Stack Overflow 上也只能找到相同的答案。我相信我已经遵循了 Stack Overflow 和其他网站上给出的建议（大多是相同的答案），但未能解决我的问题。

我的问题是，每当用户单击链接时，我希望能够从模拟器的浏览器中启动我的活动。这仅用于测试目的；下一步是对意图过滤器数据进行额外的过滤。

我可以从我自己的 WebView 和消息中让我的活动显示在活动选择器对话框中。但是，它从未显示在浏览器中。为了确保我的代码中没有其他任何内容，我创建了一个非常简单的应用程序来演示该问题。

我的活动只是加载了一个带有 TextView 的简单布局。下面是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mycompany"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk 
        android:minSdkVersion="14"/>

    <uses-permission 
        android:name="android.permission.INTERNET"/>

    <application 
        android:label="@string/app_name" 
        android:icon="@drawable/ic_launcher">

        <activity 
            android:name="MyActivity"
            android:label="@string/app_name">

            <intent-filter>
                <action 
                    android:name="android.intent.action.MAIN"/>
                <category 
                    android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>

            <intent-filter>
                <action 
                    android:name="android.intent.action.VIEW"/>
                <category 
                    android:name="android.intent.category.DEFAULT"/>
                <category 
                    android:name="android.intent.category.BROWSABLE"/>
                <data 
                    android:scheme="http"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我还检查了浏览器的默认操作，它们是空的。有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T03:09:11.130

如果您希望能够让意图过滤器在浏览器中工作，您必须导航到一个页面并单击包含您正在过滤的 URL 的链接。将其输入地址栏中将始终转到 URL，并且永远不会提示运行应用程序。

# java - 如何使用Java远程连接PostgreSQL

> ID：11727509
> 
> 赞同：1
> 
> 时间：2012-07-30T18:36:20.063
> 
> 标签：java, jdbc

我一直在做一个需要我们连接到我们的 PostgreSQL 数据库的项目。我可以使用本地 IP（即 192.168.1.145）在本地将我的代码连接到 PostgreSQL 数据库，因为我用公共 IP 替换了本地 IP，这会引发错误：

这是我用来连接数据库的代码

```
private static final String DRIVER = "org.postgresql.Driver";
//private static final String URL = "jdbc:postgresql://192.168.1.145:5432/ResumeDatabase";
private static final String URL = "jdbc:postgresql://71.555.555.555:5432/ResumeDatabase";
private static final String USERNAME = "defaultuser";
private static final String PASSWORD = "password";

private static Connection getConnection() throws Exception {
    Class.forName(DRIVER);
    Connection conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);
    return conn;
  } 
```

以下是我得到的错误：

```
 Adding a resume
    org.postgresql.util.PSQLException: Connection refused. Check that the hostname and port    are correct and that the postmaster is accepting TCP/IP connections.
    ID ----------- 0
    Added Resume
    at
    org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:136)
        at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:125)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:30)
    at org.postgresql.jdbc3.Jdbc3Connection.<init>(Jdbc3Connection.java:24)
    at org.postgresql.Driver.makeConnection(Driver.java:393)
    at org.postgresql.Driver.connect(Driver.java:267)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at com.ssati.resumeformatter.data.dao.ResumeDAO.getConnection(ResumeDAO.java:247)
    at com.ssati.resumeformatter.data.dao.ResumeDAO.addResume(ResumeDAO.java:105)
    at com.ssati.resumeformatter.data.dao.ResumeDAO.main(ResumeDAO.java:318)
Caused by: java.net.ConnectException: Operation timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
        at org.postgresql.core.PGStream.<init>(PGStream.java:62)
    at     org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:76)
    ... 11 more 
```

谢谢！

# jquery - 我可以在不提前知道元素 ID 的情况下使用 option:selected 吗？

> ID：11727510
> 
> 赞同：0
> 
> 时间：2012-07-30T18:36:21.957
> 
> 标签：jquery, jquery-ui, jqgrid

我有一个带有下拉（选择）列的 jqGrid。当 select 的 selected 选项发生变化时，我需要运行一些验证。我已经`change`很好地触发了事件，但我无法弄清楚获取所选选项所需的语法。通常，这很[简单](https://stackoverflow.com/questions/1643227/jquery-get-selected-text-from-dropdownlist)：

```
$("#someDropDownId option:selected").text(); 
```

我可以在运行时构造下拉列表的 ID，但我一生都无法弄清楚如何获取选定的文本。

```
var rowId = $("#grid").jqGrid('getGridParam', 'selrow');
var selectId = rowId + '_Description';
//selectId is the ID of the select element, how do I get the selected value now?? 
```

我尝试了各种组合方式，例如 ，`$("selectId option:selected").text();`但我无法弄清楚。有没有可能，如果有，语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:49:25.043

您可能只使用以下`on()`方法：

```
$('select').on('change', function(e){
    var selectedOptionText = $(this).find('option:selected').text();
}); 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/NW75w/)。

或者，更简单地说：

```
$('select').on('change', function(e){
    var selectedOptionText = $(this).find('option').eq(this.selectedIndex).text();
}); 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/NW75w/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:44:08.563

如果您在事件处理程序中，您可以这样做`$(this).val();`

或`$(this).find("option:selected").text();`为文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:47:14.153

而不是`$("selectId option:selected").text()`做`$("#selectId").val()`

# asp.net-mvc - 使用 AJAX 时，我是回发整个数组还是仅回发数组的一个元素？

> ID：11727512
> 
> 赞同：1
> 
> 时间：2012-07-30T18:36:27.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, viewmodel

我没有在 (AJAX Control Toolkit) for Webforms 之外使用 AJAX。所以请原谅我的无知。但是现在我正在使用 MVC 3 和 JQuery，我想知道处理这个问题的方法是什么。基本上，我的页面会得到一个`List<ViewModel>`. 但是当我回发时，我是回发整个`List<ViewModel>`还是只回发需要更新的一个元素？处理这个的正常方法是什么？现在，假设我的 ViewModel 是：

```
public class activePlayer   
{
    public int UserID {get; set;};
    public string LastName {get; set;};
    public string FirstName {get; set;};
    public string Class {get; set;};
    public int XP {get; set;};
    public string activeWeapon {get; set;};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:04:27.477

请注意，术语“回发”与 ASP.net Web 表单更相关。在使用 MVC 框架时，您将向所需路由发送“http post”。

关于您的问题，您很可能会将您需要编辑的用户 ID 发布到编辑结果中：

```
Public ViewResult Edit(int id)
{
  activePlayer model = // lookup model here
  return View("Edit", model)
} 
```

这反过来将呈现一个编辑视图：

```
@model <yourproject.Models.activePlayer>

@using(@Html.BeginForm())
{
  @Html.HiddenFor(m => m.UserID)
  <div>
    <div clas="editor-label>@Html.LabelFor(m => m.LastName)</div>
    <div clas="editor-field>@Html.EditorFor(m => m.LastName)</div>
  </div>
  <div>
    <div clas="editor-label>@Html.LabelFor(m => m.FirstName)</div>
    <div clas="editor-field>@Html.EditorFor(m => m.FirstName)</div>
  </div>
  // .. remaining fields
  <input type="submit" />
} 
```

# javascript - JavaScript 请求/操作框架或工具包？

> ID：11727513
> 
> 赞同：1
> 
> 时间：2012-07-30T18:36:32.233
> 
> 标签：javascript, frameworks, request, operation

我正在用 JavaScript 构建一个复杂的应用程序，它需要向服务器发出多个请求。有时该请求无法在发送时完成，并且需要添加信息。我希望能够让服务器在请求的响应中通知应用程序需要更多信息并描述如何检索该信息。

例如，假设用户尝试执行其当前权限级别不允许的操作。服务器需要向应用程序询问覆盖授权码，这基本上意味着应用程序需要弹出一个对话框，询问管理员密码。

我想要某种抽象所有这些的框架。可能是一个主要的“请求”或“操作”类，我可以定义子请求类来定义请求的可能解释。我不确定这样的事情是否已经存在。

所以我想我的问题是：1）这样的框架存在吗？2）是否有关于这个主题的文章（平台和语言不可知，我可以从任何来源了解它们是如何工作的）。我知道像 Dojo 和 ExtJS 这样的框架在他们的数据存储中使用了类似的东西，但我不确定它是否正是我所需要的，或者它是如何工作的。

感谢您为我提供正确方向的任何帮助，谢谢。

**编辑：**

应该指出一点，我正在寻找从用于实际将数据发送到服务器的技术中抽象出来的东西。这样我就可以在不同的 ajax 技术上使用相同的框架。

基本上我正在寻找可以帮助我弄清楚如何创建自定义“应用程序协议”的框架或文章。这方面的一个例子是：

```
{
    type: 512,
    success: true,
    data: { some: "data" }
} 
```

我知道我必须自己设计协议，但我需要帮助的是创建一个“类”或自动解释该协议的东西，而不是仅仅进行冗余`onSuccess`回调

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:21:34.580

我从事过一个名为 Pomegranate Framework 的开源项目，它可以满足您的需求（在某种程度上）。也许您可以扩展它以满足您的需求。它带有一个接近您所要求的应用程序层，但您需要实现适合您的协议。这是它的地址：

[石榴框架](http://sourceforge.net/projects/pome-framework/)

我还没有时间来记录它，但它附带了一堆可能对您有用的示例。您可能还想看看它的示例页面：

[石榴框架示例](http://pome-framework.sourceforge.net/)

我想您希望看到标题为“在客户端处理服务器错误”的 021 示例。我希望这是你正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:59:35.737

使用[Dojo](http://dojotoolkit.org/reference-guide/dojo/Deferred.html)和[jQuery](http://api.jquery.com/category/deferred-object/)的`Deferred`对象进行回调。它是`Promise`设计模式的一种实现。每个动作都有一个成功回调链和一个失败回调链，两个链可以在链的各个点发散或合并，并且链可以分支以创建子延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:22:05.860

如果您知道客户端上应用程序的状态（并且只有少数错误原因，并且您不需要来自服务器的详细信息），则可以并且应该使用 HTTP 状态代码。据我所知`200`是唯一一个有正文的，所以你不能（或不应该，总是添加标题，但我会远离那条路径）传输任何其他东西 - 但每个框架都应该为你提供在发送请求时传递错误处理程序的方法。在作为错误处理程序传递的回调函数中，您只需执行相应状态要求的任何操作。

它受协议支持，无论您是否传递 HTML、JSON 或其他任何内容，每个值得使用的库都支持基于状态代码的错误回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:42:20.823

由于您基本上是在谈论“服务器端推送事件”，因此您需要一些技术来允许您的服务器脚本向您的客户端发送数据。

有一些众所周知的方法，如 COMET、Flash Sockets 和城里最新的 WebSockets。

由于 WebSockets 可能是所有这些中最复杂的东西，因此您应该以此为目标。不幸的是，它的浏览器支持仅限于大多数浏览器的“最新版本”，如果您对此感到满意，请立即使用它们。如果你想为旧版浏览器做一些后备，最常用的框架应该是[`socket.IO`](http://socket.io/).

但即使是 socketIO 也只是为你抽象了所有不同的通信技术。无论如何，围绕它自己构建一个可靠的管理框架应该是相当容易的。所以我在这方面的回答是，我不知道有任何库或框架可以处理这类东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T02:30:35.883

使用 ExtJs 有多种方法可以实现这一点。

最简单的方法是使用[Ext.Ajax.request()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)提供`url`, `params`, `method`。然后在您的成功处理程序中，检查服务器响应以及它是否需要来自用户的其他数据 - 显示一个额外的凭据对话框，并发送另一个请求，其中包含将解锁服务器端脚本的额外凭据详细信息。

请注意，`success`请求方法的处理程序在其`options`参数中将请求的配置对象返回给您，因此您可以很容易地再次调用相同的请求，这次只需添加额外的凭据。

这是一个演示这个概念的[jsfiddle 代码](http://jsfiddle.net/kAkuC/)（我已经展示了对所有调用都使用成功和全局处理程序 - 我希望你能够从这里弄清楚如何使用它）。还有一个[类似](http://jsfiddle.net/kAkuC/2/)的，我相信它更符合您的需求。

我很乐意提供进一步的帮助，只要问问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T00:33:42.557

如果你想要抽象和可测试性，我强烈推荐 AngularJS。[angular $q](http://docs.angularjs.org/api/ng.%24q)是[Kris Kowal 的 Q](https://github.com/kriskowal/q)的实现。您可以创建服务来隐藏您调用服务器的方式，并允许您在将来更改服务器的实现方式，这不会很痛苦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T04:23:27.537

它看起来像服务器推送的问题，即无论发生变化，数据都会被推送到客户端有以下选项

*   [](http://directwebremoting.org/dwr/documentation/reverse-ajax/index.html.)**通过 DWR 框架[**反向 AJAX 。**](http://directwebremoting.org/dwr/documentation/reverse-ajax/index.html.)**
***   Ajax 推送引擎[http://www.ape-project.org/](http://www.ape-project.org/)**

 **商业 [网络同步](http://www.frozenmountain.com/websync)

您可以像这样使用长轮询机制

(

```
function poll(){
    $.ajax({ url: "server", success: function(data){
         myobject.setValue(data.value);

    }, dataType: "json", complete: poll, timeout: 30000 });
})(); 
```

[您将在ajax 推送服务器](https://stackoverflow.com/questions/1407624/ajax-push-server)上获得更多信息**

# java - 来自 BroadcastReceiver 的 SmsManager.sendTextMessage 在 CDMA 手机上没有任何作用

> ID：11727515
> 
> 赞同：0
> 
> 时间：2012-07-30T18:36:48.213
> 
> 标签：java, android, sms, cdma

我有一个 BroadcastReceiver 来处理这个`android.provider.Telephony.SMS_RECEIVED`动作，并在某些情况下发送一条短信作为回复。我的应用程序具有`android.permission.SEND_SMS`，并且在 GSM 手机上运行良好。但是，它不适用于我目前唯一可用的 CDMA 手机，我怀疑它只出现在 CDMA 手机上。它适用于我尝试过的所有 GSM 手机，其中不少。`logcat`不显示错误或警告，仅`D/SMSSMSSMSSMS( 260): TeleService: 4098`每次`sendSms`调用。此外，我在一个 Activity 中尝试了完全相同的代码，它工作得非常好。

我正在使用的代码：

```
private void sendSms(String destination, String message) {
    if(preferencesManager.smsRepliesEnabled()) {
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage(destination, null, message, null, null);
    }
} 
```

`preferencesManager.smsRepliesEnabled()`按预期工作，并且`destination`设置`message`正确。我添加了一个`Log.d`声明来确认所有这三个。同样，`PhoneNumberUtils.isWellFormedSmsAddress(destination)`返回`true`.

**编辑**：根据@wojci 的建议，我添加了一个`sentIntent`并记录了结果代码。结果代码为`RESULT_ERROR_GENERIC_FAILURE`，额外`errorCode`设置为`-1`。但是，当我从 Activity 尝试完全相同的代码时，它可以正常工作`RESULT_OK`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:11:14.523

您写道，您使用以下内容发送文本： smsManager.sendTextMessage(destination, null, message, null, null);

为什么你不使用[sentIntent](http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29)参数，它可以告诉你你的消息是否被网络接受？

从文档中：

```
sentIntent  if not NULL this PendingIntent is broadcast when the message is successfully sent, or failed. The result code will be Activity.RESULT_OK for success, or one of these errors:
RESULT_ERROR_GENERIC_FAILURE
RESULT_ERROR_RADIO_OFF
RESULT_ERROR_NULL_PDU 
```

也许它可以为您提供更多线索，说明为什么您的 SMS 发送无法按预期工作。

# url - Symfony2。自定义 URL 的问题。Urlencoding

> ID：11727517
> 
> 赞同：0
> 
> 时间：2012-07-30T18:37:06.850
> 
> 标签：url, symfony, urlencode

我的包裹中有以下路线

```
/{category} 
```

我有名称的类别

```
Category/Brand 
```

如果 url 是这样的：

```
domain.com/Company/Brand 
```

然后我得到关于 / 符号的错误 500。

但如果我在树枝上

```
company.name|url_encode() 
```

然后我得到

```
Company%2F%Brand 
```

（代码可能有误，暂时不记得了）

但尽管如此 Symfony 告诉我没有路由匹配

并给我404。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:18:05.167

您的所有类别名称都是这样的，还是只有其中一些？

如果它们都遵循此结构，则可以将路由更改为：

```
/{company}/{brand} 
```

并更改相应的控制器以接受两个变量而不是一个。稍后您可以将它们连接起来或对它们做任何您需要的事情

如果只有其中一些具有这种结构，您可以尝试用创建链接的控制器中的某些字符组合替换目录分隔符，然后在控制器中为该路由反转此替换。例如，在显示链接的模板的控制器中，您可以

```
$nameEncoded = str_replace ('/','%%%%',$companyName); 
```

将此变量传递给模板并使用它来生成链接，然后在接收控制器中执行：

```
$nameDecoded = str_replace ('%%%%','/',$companyName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:56:18.990

如果您的路由是 /{category} 并且您键入的 URL 是 domain.com/Company/Brand，则该错误是正常的。

您必须像这样在 routing.yml 中配置您的路线：

```
Company/{category} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:57:13.477

行！

我在[这里](https://stackoverflow.com/a/3567207/737629)找到了解决方案。

```
    #PUBLICATION 网址
    ＃＃＃_出版物：
        模式：/{username}/{category}/{publicationid}
        默认值：{ _controller: ###:Default:publication }
        要求：
          _方法：获取
          类别：.+
          用户名：.+
          出版物编号：\d+                               
    #CATEGORY - 应该在最后，以匹配所有其他 URL
    ＃＃＃_类别：
        模式：/{类别}
        默认值：{ _controller：###：默认值：类别}
        要求：
          _方法：获取
          类别：.+

```

# php - 我想从我的表中取出我的用户并用 html 表显示它们

> ID：11727520
> 
> 赞同：0
> 
> 时间：2012-07-30T18:37:20.593
> 
> 标签：php, mysql, html-table

我想从我的表中取出我的用户并用 html 表显示他们。我希望显示他们的姓名头像。所有这些信息都在表中。我想在一个有 4 列的表中显示所需的行数。

这是我要求的完整代码：

```
<html><head><title>MySQL Table Viewer</title></head><body>
<?php
$db_host = '';
$db_user = '';
$database = '';
$db_pwd = '';
$table = '';
if (!mysql_connect($db_host, $db_user, $db_pwd))
die("Can't connect to database");
if (!mysql_select_db($database))
die("Can't select database");
// sending query
$result = mysql_query("SELECT * FROM {$table} WHERE livedj=1");
if (!$result) {
die("Query to show fields from table failed");
}
$max_rows = 6;
$max_cols = 4;
echo "<table>";
$rows = 1;
while ($rows <= $max_rows)
{
echo "<tr>";
$cols = 1; // reset columns to 1 for each row
while ($cols <= $max_cols)
{
     echo "<td>". $row['name'] . "<br />
     <img src=\"http://myurl/path/to/pics/" . $row['avatar'] . "\" height=\"150\" width=\"150\" /></td>";
     $cols++; // column counter
}
echo "</tr>";
$rows++;  //row counter
}
echo "</table>";
?>
</body></html> 
```

这只会给出一个包含正确表格的页面，但它没有显示来自 mysql 的任何信息......

是的，我已经删除了这里的数据库和密码设置，并且我的副本具有正确的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:41:17.740

您需要遍历结果集中的每一行。例如：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT * FROM Persons");

while($row = mysql_fetch_array($result))
  {
  echo $row['FirstName'] . " " . $row['LastName'];
  echo "<br />";
  }

mysql_close($con);
?> 
```

PS：您最好使用较新的 API 之一，而不是使用 mysql_connect()/mysql_query() 和朋友：

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

*   [mysqli_query](http://www.php.net/manual/en/mysqli.query.php)

*   [PDO::查询](http://www.php.net/manual/en/pdo.query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:52:36.407

我希望您的意思是说您的 SQL 表有 6 个数据字段（7 个带有您似乎在 WHERE 子句中使用的“livedj”），以及所需的尽可能多的数据条目。

我还假设您希望您的输出看起来像这样：

```
+------+--------+-----------------------------+
| Name | Avatar | Other stuff (email,fb,...)  |
+------+--------+-----------------------------+
| John | :-)    | blah                        |
| ...  |  ...   | ...                         |
+------+--------+-----------------------------+ 
```

那么该代码将是：

```
<?php
$result = mysql_query("SELECT name, address, twitter, email, facebook, avatar FROM {$table} WHERE livedj=1 ");
if (!$result) {
die("Query to show fields from table failed");
}
echo "<table border='1'>";

while($row = mysql_fetch_array($result)){
  echo "<tr><td>".$result["name"]."</td><td>"
  ."<img alt='avatar' src='path/to/img/folder/".$result["avatar"]." /></td><td>"
  .$result["address"]."</td><td>".$result["email"]."</td><td>"
  .$result["twitter"]."</td><td>".$result["facebook"]"</td></tr>\n";
}
echo "</table>
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:41:39.130

你不是`</table>`在 for 循环的末尾丢失了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:42:46.690

```
while ($row = mysql_fetch_array($result))
echo "<tr><td><img src=\"http://myurl.com/images/" . $row['avatar'] . "\" height=\"150\" width=\"150\" /><br />" . "<span style=\"text-align:center;\">" . $row['name'] . "</span></td></tr>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:44:02.883

您需要添加更多表格数据标签才能获得多列。

例如

```
<table>
 <tr>
   <td>Column 1</td>
   <td>Column 2</td>
   <td>Column 3</td>
 <tr>
</table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T18:46:50.847

```
echo '<table>';

while($row = mysql_fetch_array($result))   {   
  echo "<tr>";
  echo "<td>".$row['name']."</td>";
  echo "<td>".$row['facebook']."</td>";
  echo "<td>".$row['twitter']."</td>";    
  echo "</tr>";   
} 

echo '</table>'; 
```

输出将是：

名称1 Facebook1 Twitter1

名称2 Facebook2 Twitter2

名称3 Facebook3 Twitter3

# jquery - HoverCard 中的 Bootstrap 下拉按钮

> ID：11727521
> 
> 赞同：0
> 
> 时间：2012-07-30T18:37:26.170
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用[hovercard](http://designwithpc.com/Plugins/Hovercard/)来显示用户的小型个人资料卡。在这个悬停卡片中，我试图包含一个 Twitter Bootstrap 下拉按钮。

该按钮包含在 html 中，并且 css 工作正常（与实际的 javascript 一起打开下拉菜单）。问题是看不到下拉菜单。

看一下图像以获得更好的解释： ![示例问题](../Images/1e0fd5eca13546150839c1ddd2f1f880.png)

第二个示例悬停卡是默认结果。如您所见，下拉菜单的一小部分正在显示，但由于某种原因，它被悬停卡框的边界隐藏。

在第一个示例中，我删除了默认的引导 css 位置选项，并且下拉列表继承了静态位置。使用静态时，可以看到菜单，但它会增加悬停卡片框的大小。

我需要发生的事情是，当单击胡萝卜时，下拉框/列表在悬停卡的“顶部”打开，而不是扩展悬停卡的尺寸，而是让下拉菜单作为具有自己尺寸的自己的对象。

顺便说一句 - 我已经检查了悬停卡和下拉菜单的 z-index，并且下拉菜单的 z-index 更高，所以这不应该是问题。

编辑：实际示例标记

```
<div class="hc-preview" style="z-index: 0; "><a class="profilecard hc-name" rel="hovercard" data-type="custom" data-width="370" data-url="/omega/ajaxProfile/ProfileCard?eid=1" href="/omega/profile/profile/view/id/1" style="z-index: 0; "><img class="avatar thumb" src="/omega/images/1_darth-maul.png" alt="Avatar"></a><div class="hc-details" style="width: 370px; background-color: rgb(255, 255, 255); display: none; background-position: initial initial; background-repeat: initial initial; "><div class="s-card s-card-pad"><link rel="stylesheet" type="text/css" href="/omega/assets/5583cf06/css/bootstrap-yii.css">

<div class="hovercard">

<img class="thumb align-left" src="/omega/images/1_darth-maul.png" alt="Paul Johesphat"><h1>
Paul Johesphat<span class="badge badge-success" rel="tooltip" data-original-title="This person is an expert in our community">Expert</span></h1>
<h2>Advisor</h2>

<h2>
</h2>

<div class="clearfix"></div>
<div style="float:right; display:block;">

<div id="loading"></div>

<div id="connect-button1">
<div class="btn-group open">
  <button class="btn"><i class="icon-ok"></i> Friend</button>
  <button class="btn dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
            <li>
            <span class="instruct">Add to List:</span>
            </li>
            <li class="divider"></li>

<div id="list">
<li>
<a href="#" id="yt0">Acquaintance</a></li>

<li>
<a href="#" id="yt1">Close Friend</a></li>

<li>
<a href="#" id="yt2">Colleague</a></li>

<li>
<a href="#" id="yt3">Prospect</a></li>

</div>
        <li class="divider"></li>
        <li><a id="1" class="remove" href="/omega/friendship/friendship/removerequest">Remove Connection Request</a></li>
  </ul>
</div></div></div></div></div></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:44:16.173

这似乎是一个`overflow: hidden`问题。

您应该尝试将样式`overflow: visible`应用于下拉菜单的父树。它可能在附近`<div style="float:right; display:block;">`。

# sql - SQLPlus 序列 - 多个表

> ID：11727523
> 
> 赞同：1
> 
> 时间：2012-07-30T18:37:37.270
> 
> 标签：sql, oracle, sequence, sqlplus

我在[这里](https://stackoverflow.com/questions/7949343/sqlplus-auto-increment-error)尝试使用 Dennis 的解决方案作为 Oracle 数据库中 auto_increment 的实现。假设我创建一个序列如下：

```
CREATE SEQUENCE auto_increment
  START WITH 1
  INCREMENT BY 1; 
```

如果我想要多个表中的 auto_increment 行为，我可以只对所有表使用这个序列吗？或者我需要每张桌子一个单独的序列吗？也就是说，一个表的序列增量是否会受到另一个使用该序列的表的影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:40:57.823

是的，如果您使用相同的序列，序列访问将相互影响。但是，您的问题的语气使我认为您希望序列是连续的。

不要被愚弄，序列不是连续的。唯一可以保证的是检索到的数字是唯一的，并且按升序排列（在您的情况下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:41:21.900

您可以对许多表使用相同的序列。这样做是非常规的，它会导致对序列的更多争用，并且如果由于环境之间的导出和导入等原因需要重置序列值，这会使生活变得更加困难，但它会工作。

当然，如果序列为表 A 提供值 1，它永远不会为 B 上定义的触发器提供相同的值。由于序列不会生成无间隙的值集（即，您可以保证将有“无论您创建多少序列，每个表中都缺少”值），这不应该是一个主要的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:38:01.163

序列是连续的。然而，有很多事情会导致序列中的间隙，例如回滚、提交（因为序列生成器发布序列而不管提交或回滚），以及多个表的相同序列。

# iis-6 - Asp.net MVC Web Api Http 放置和删除请求失败

> ID：11727525
> 
> 赞同：3
> 
> 时间：2012-07-30T18:37:39.130
> 
> 标签：iis-6, asp.net-web-api

我正在使用 Asp.net MVC 4 **Web Api**项目。我的应用程序使用 mvc 来实现一个网站。它向 web api 发出 http 请求以实现服务器功能。

对控制器的常规页面请求工作正常，并且能够显示网页。该应用程序能够向 api 发出**get**和**post**请求。但是当它试图**放置**或**删除**网络请求时，它会得到

**“加载资源失败：服务器响应状态为 501（未实现）”**

该应用程序托管在 iis 6 上。

该应用程序在运行本地 cassani 服务器实例时工作，并且能够发出**放置**和**删除**请求，但是一旦从**iis**执行应用程序，它就无法按预期工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T19:51:28.357

我尝试了上面评论中的所有建议，但都没有奏效。

我必须将 ASP.NET 4.0 dll 添加到主目录选项卡上配置区域的通配符映射中。这对我有用。请记住取消选中“验证文件存在”复选框。

编辑：我在这里发布了一个关于实现这一点的确切过程的博客：http: [//www.proworks.com/blog/2012/11/14/how-to-fix-aspnet-mvc-web-api-http-放置和删除请求失败/](http://www.proworks.com/blog/2012/11/14/how-to-fix-aspnet-mvc-web-api-http-put-and-delete-requests-failing/)

# security - adfs：token解密证书和依赖方签名验证证书的区别

> ID：11727526
> 
> 赞同：2
> 
> 时间：2012-07-30T18:37:40.300
> 
> 标签：security, single-sign-on, saml, claims-based-identity, adfs

我正在尝试使用 ADFS 设置依赖方 (SP)。ADFS 识别并响应没有签名的请求。但 ADFS 无法验证签名的 AuthRequest。我有一个证书导入到依赖方的“签名验证证书”部分，但该证书似乎没有用于依赖方请求的签名验证。

相反，它似乎使用“令牌解密”证书。我不明白这个证书的目的。有人可以解释一下这两个证书之间的区别以及如何用另一个自签名证书（DER 或 pem 格式）替换“令牌解密”证书吗？谢谢

仅供参考：发送到 ADFS 的示例 AuthnRequest

```
<saml2p:AuthnRequest xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol" Destination="https://adfs-sj1.sjlab.local/adfs/ls/" ID="_422d0bb72b1120db737695464793dedf4ea8ddd2" IssueInstant="2012-07-30T21:52:47.501Z" Version="2.0">
    <saml2:Issuer xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">spid</saml2:Issuer>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
            <ds:Reference URI="#_422d0bb72b1120db737695464793dedf4ea8ddd2">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                <ds:DigestValue>S5b7PCF8WscoOX++EcpyjQNW4q0=</ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>g1PXYERi48Q/vGXNBPwZlteyihQmt3eo9+MIQlBdC8MqTsm8GdvE1Nq4osszEyprAK5Q6Uv5QV/UgctUWGV2hUxLc5bpXVwpaYaoywH0XPXArROR1EyGVz2g5YAjgGxpU0YbxJIk+2A1DblE0alYSK/88oHHcmpwp6dmgwmvfXcRA83DnVCeIZoKSPuNTqSLb6UKk+QxUABieuAb1ecsQmJsEjUXcrPq+RPL1+goNhC4/vbPatuK90ZyZe5CljwAtWXmqoBzWexxgWdzs4E9zIc/aQi/HFioGz0EnPiipgBjHRlV+Gv0iFV1dS++a24+F7H2NG6aZSGipcyj2kJMDg==</ds:SignatureValue>
    </ds:Signature>
</saml2p:AuthnRequest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T19:44:41.577

好文章：[AD FS 2.0：如何替换 SSL、服务通信、令牌签名和令牌解密证书](http://social.technet.microsoft.com/wiki/contents/articles/2554.ad-fs-2-0-how-to-replace-the-ssl-service-communications-token-signing-and-token-decrypting-certificates.aspx)。

服务通信证书本质上是 IIS SSL 证书，具有相同的用途。

令牌解密证书用于与其他声明提供者进行通信。他们使用此证书的公钥加密令牌，而 ADFS 使用私钥解密。

Token-Signing 证书用于对发送给 RP 的令牌进行签名，以证明它确实来自 ADFS。

另外，当您在使用 FedUtil 时选择加密选项时，您会在 RP 端使用另一个证书来加密令牌。在这种情况下，它是双重加密的——SSL 加 RP 证书。

你的问题有点令人困惑。ADFS 始终对 RP 令牌进行签名。这不是可选的。你能澄清一下吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-11T10:27:49.983

*   **服务通信**— 此`SSL`证书用于加密所有客户端与`AD FS`服务器的连接。

*   **令牌签名**——该`x.509`证书用于对发送给中继方的令牌进行签名，以证明它确实来自`AD FS`.

*   **Token-Decrypting** — 此`x.509`证书用于在传输层`SAML`再次加密之前加密令牌的有效负载。`SSL`它很少使用。

希望这能回答你原来的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T04:10:43.210

仅当请求与依赖方签署而不是直接转到 Idp 时才使用依赖签名证书。而且在大多数情况下很少使用。

但是，当通过元数据 XML 创建依赖方时，它总是将签名证书配置为证书是元数据 XML 的一部分。

简而言之，与 ADFS 签名和解密证书相比，依赖方签名证书并不总是在纯 ADFS 场景中使用。您必须了解用户场景。

有很好的幻灯片[https://www.slideshare.net/musre/understanding-claim-based-authentication](https://www.slideshare.net/musre/understanding-claim-based-authentication)来解释 IDP 和 RP

# php - 变量设置为假

> ID：11727530
> 
> 赞同：0
> 
> 时间：2012-07-30T18:37:48.447
> 
> 标签：php

我写了这个非常简单的代码：

```
$foo=false;
echo $foo;//It outputs nothing 
```

为什么？不应该输出`false`吗？我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:39:01.953

`false`打印到页面时计算为空字符串。

采用

```
echo $foo ? "true" : "false"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T18:38:32.253

字符串“false”不等于`false`。转换`false`为字符串时，会得到一个空字符串。

你所拥有的是隐含地这样做： `echo (string) $foo;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:33:13.313

如果您想在回显测试等时看到“真”或“假”字符串，您总是可以使用这样的简单函数：

```
// Boolean to string function
function booleanToString($bool){
    if (is_bool($bool) === true) {
        if($bool == true){ 
            return "true";  
        } else { 
            return "false";
        } 
    } else { 
        return NULL;
    }
} 
```

然后使用它：

```
// Setup some boolean variables 
$Var_Bool_01 = true;
$Var_Bool_02 = false;

// Echo the results using the function
echo "Boolean 01 = " . booleanToString($Var_Bool_01) . "<br />"; // true
echo "Boolean 02 = " . booleanToString($Var_Bool_02) . "<br />"; // false 
```

# c# - 使用 Entity Framework 执行简单查询时出现严重的性能问题

> ID：11727534
> 
> 赞同：1
> 
> 时间：2012-07-30T18:37:53.093
> 
> 标签：c#, performance, entity-framework, entity-framework-4

我有一个相当通用的 CRUD webapp，它根据几个数据库表的内容动态生成页面。我正在使用 Entity Framework 4.0 将这些数据从数据库中提取出来，但是我遇到了严重的性能问题。我已经设法迭代到一个包含足够内容的问题，我可以在下面详细说明。

我有一个包含**页面表单**列表（〜200）的表格。每个表单都有一个或多个**字段**（总共约 4000 个），每个字段可能有一些**参数**（总共约 16000 个）。

我在下面附上了我的模型的屏幕截图：

![实体模型](../Images/ed132e238d7fd7477700faf77f9dcd23.png)

关联的实体对象如下：

```
public class Form
{
    public int FormID { get; set; }
    public string FormName { get; set; }

    public IList<FormField> FormFields { get; set; }

}

public class FormField
{
    public int FieldID { get; set; }
    public string FieldName { get; set; }
    public int FormID{ get; set; } 

    public IList<FormFieldParameter> FormFieldParameters { get; set; }
    public Form ParentForm { get; set; }

}

public class FormFieldParameter
{
    public int FieldParamID{ get; set; }
    public string Value{ get; set; }
    public int? FieldID { get; set; }

    public FormField ParentField { get; set; }
} 
```

以下代码提取 ID 为“1”的表单的所有数据。

```
EntityConnection myConnection = new EntityConnection("name=myModel");

if(conn.State != ConnectionState.Open) {
    conn.Open();
}
ObjectContext context = new ObjectContext("name=myModel");
context.ContextOptions.LazyLoadingEnabled = false;

ObjectQuery<PageForm> myObjectSet = context.CreateObjectSet<PageForm>()
                                           .Include("FormField.FormFieldParameter");

//Edit: I missed this part out, sorry. In hindsight, this was exactly what was
//causing the issue.
IEnumerable<PageForm> myObjectSetEnumerable = myObjectSet.AsEnumerable();
IQueryable<PageForm> myFilteredObjectSet = myObjectSetEnumerable.Where(c => c.FormID == 1)
                                                                .AsQueryable();

List<PageForm> myReturnValue = myFilteredObjectSet.toList(); 
```

现在，虽然这确实有效，但它运行得非常糟糕。查询需要一秒钟才能运行，全部用于`myFilteredObjectSet.toList()`调用。我在我的数据库上运行了一个分析器以查看导致延迟的原因，并发现正在生成以下查询：

```
SELECT 
[Project1].[FormID] AS [FormID], 
[Project1].[FormName] AS [FormName], 
[Project1].[C2] AS [C1], 
[Project1].[FormID1] AS [FormID1], 
[Project1].[FieldID] AS [FieldID], 
[Project1].[FieldName] AS [FieldName], 
[Project1].[C1] AS [C2], 
[Project1].[FieldParamID] AS [FieldParamID], 
[Project1].[Value] AS [Value], 
[Project1].[FieldID1] AS [FieldID1]
FROM ( SELECT 
    [Extent1].[FormID] AS [FormID], 
    [Extent1].[FormName] AS [FormName], 
    [Join1].[FieldID] AS [FieldID], 
    [Join1].[FieldName] AS [FieldName], 
    [Join1].[FormID] AS [FormID1], 
    [Join1].[FieldParamID] AS [FieldParamID], 
    [Join1].[Value] AS [Value], 
    [Join1].[FieldID1] AS [FieldID1], 
    CASE WHEN ([Join1].[FieldID] IS NULL) THEN CAST(NULL AS int) WHEN ([Join1].[FieldParamID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1], 
    CASE WHEN ([Join1].[FieldID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C2]
    FROM  [dbo].[PageForm] AS [Extent1]
    LEFT OUTER JOIN  (SELECT [Extent2].[FieldID] AS [FieldID], [Extent2].[FieldName] AS [FieldName], [Extent2].[FormID] AS [FormID], [Extent3].[FieldParamID] AS [FieldParamID], [Extent3].[Value] AS [Value], [Extent3].[FieldID] AS [FieldID1]
        FROM  [dbo].[FormField] AS [Extent2]
        LEFT OUTER JOIN [dbo].[FormFieldParameter] AS [Extent3] ON [Extent2].[FieldID] = [Extent3].[FieldID] ) AS [Join1] ON [Extent1].[FormID] = [Join1].[FormID]
)  AS [Project1]
ORDER BY [Project1].[FormID] ASC, [Project1].[C2] ASC, [Project1].[FieldID] ASC, [Project1].[C1] ASC 
```

sql profiler 上显示的此查询的持续时间表明此查询需要很长时间才能运行。查询的有趣之处在于，它根本没有过滤——它返回的是整个树！我不明白为什么它会返回所有内容，因为过滤器`myObjectSet.Where(c => c.FormID == 1)`非常明确。实际返回的对象仅包含一个条目，这是我所期望的。

我的整个数据访问层都遇到了这个问题，它的性能令人震惊。我不知道为什么生成的查询不包含过滤器 - 也不知道如何告诉它这样做。有人知道答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T23:13:21.727

## TL;DR 删除`AsEnumerable`调用并将其替换为`AsQueryable`调用，它应该可以解决大部分性能问题（除了实际的数据库执行成本很慢，这是通过在您正在过滤/加入的列上添加索引来解决的）。

*解释实际发生的事情......*

一旦你打电话`AsEnumerable`，你现在就在实体框架之外，进入了 LINQ-to-objects 的世界。这意味着它将在枚举时对数据库执行查询。再次调用并不重要`AsQueryable`，这仅意味着您正在创建针对内存结构的查询。

有效的执行是这样的。

1.  创建对象查询，包括链接到表单的所有 FormFieldProperties
2.  将当前 IQueryable 实例转换为可枚举。
3.  针对可枚举实例添加谓词，该实例将仅返回 FormID 值为 1 的项目。
4.  调用 ToList，它将所有值从可枚举源复制到列表。

现在，直到第 4 步，查询实际上还没有查询数据库。当您调用 时`ToList`，它会在第一步中执行查询（如您所见）。此查询可能很昂贵并且需要一段时间，因为它返回的数据量和/或丢失的索引可能会提高其性能。

一旦该查询完成并具体化，它的结果将包含在一个枚举器中。

现在，每个对象都被迭代并检查它是否匹配在步骤 3 中添加的谓词。如果匹配，则将其返回给迭代它的任何人（在本例中为 ToList 函数）。

现在该值已返回，它被添加到使用这些值创建的列表中。

最后，您从该`ToList`方法中得到一个列表，它完全符合您的要求，但它在内存中而不是在数据库中完成了所有这些操作。

# ruby-on-rails - 食品的 Rails 搜索（全文与语义）

> ID：11727537
> 
> 赞同：2
> 
> 时间：2012-07-30T18:38:03.873
> 
> 标签：ruby-on-rails, search, full-text-search, thinking-sphinx, semantic-analysis

我正在尝试为 Rails 中的杂货店构建搜索界面。我的数据库中存储了几种杂货店产品，但我正在努力寻找一种搜索它们的好方法。

到目前为止，我已经使用[Thinking Sphinx](http://freelancing-god.github.com/ts/en/)对产品进行了全文搜索。这适用于某些项目，例如“eggs”，但对于其他搜索有几个问题，例如“lime”。

例如，当我搜索“石灰”时，我得到以下返回的项目：

*   Diet Sierra Mist 柠檬酸橙冰箱伴侣苏打水
*   G2 柠檬青柠低热量电解质饮料
*   Deer Park Berry Lime 苏打水
*   海洋喷雾鸡尾酒配酸橙蔓越莓汁
*   复古苏打水石灰
*   可乐饮食与石灰苏打轮廓瓶
*   可乐饮食与石灰苏打冰箱包
*   Diet Sierra Mist 柠檬酸橙冰箱伴侣苏打水
*   Refreshe Soda Diet 柠檬酸橙冰箱包
*   刷新苏打柠檬酸橙
*   Refreshe 苏打水柠檬酸橙冰箱包
*   Sierra Mist 天然柠檬酸橙苏打水
*   ... ETC

我真正想要的是真正的水果，它们在我的数据库中列为以下产品：

*   大石灰
*   有机酸橙
*   预先包装好的石灰钥匙

如何让我的搜索更智能？

值得注意的是，我确实有很多关于每种产品的分类数据。我基本上有一个完整的“食物树”，其中每个产品都是树的一个根节点。

例如，对于“Limes Large”产品，我有以下类别：

水果和蔬菜 > 新鲜水果 > 柑橘 > 大柠檬

如何更好地使用这些类别来改进我的搜索？

在我的研究中，我开始相信我需要使用语义搜索而不是全文搜索。我遇到了Ruby 的[Picky gem](http://florianhanke.com/picky/index.html)，它看起来很有希望，但我不确定我是否有正确的方法。

语义搜索可以帮助我进行更好的搜索吗？Picky 是否适合以这种方式分类的数据？还有其他见解吗？任何指导将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:53:51.293

我是 Picky 的开发者——所以我有点偏见；）

如果我理解正确，您的问题似乎是：

> 鉴于我的产品名称中包含“石灰”一词，并且其中一些产品未归类为水果，其中一些产品未归类为水果，但作为饮料，您希望用户能够过滤查询，以便仅搜索水果。

我希望我理解正确。

Picky的主要模式是分类搜索。也就是说，如果有人在查询中输入“limefruit”，Picky 会找到类似 (name:lime, type:fruit) 之类的内容，以及所有其他组合，例如。（公司：石灰，类型：饮料）。或者用户可以通过一个漂亮的界面预先定义，他搜索水果：“type:fruit Lime”，这将告诉 Picky 只查找类型为“fruit”的结果，以及任何类别中的“lime”。

但是，由于您想根据某物是否属于某个类别进行过滤，我认为分面搜索最适合此类任务。Picky 最近添加了多面搜索。所以你会做这样的事情：

`picky_search.search "lime"`

显示石灰的结果，但也使用边显示“石灰”的所有可能类型

`picky_search.facets :type, filter: "lime"`

你会得到一个可能类型的散列，像这样：`{ :fruit => 3, :beverage => 150 }`. 然后，如果用户单击“fruit”，您将向 Picky 发送另一个查询，这次使用前置过滤器：

`picky_search.search "type:fruit lime"`或者`picky_search.search "type:fruit name:lime"`如果已经很清楚该人正在以“石灰”的名义搜索。

这只会返回水果类型的石灰。

这只是一个简单的概述，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:12:50.663

至于“类别”，您可能还想考虑使用标记系统。那里有许多标记宝石。这样，正在搜索的内容与您创建的任何其他数据结构或“树”无关。

为了方便起见，您可以使用它，以便在创建项目时自动放置在项目上的标签基于其在树中的位置和/或项目名称。这使得它可以在需要时轻松更改，但同时具有树系统的易用性，同时仍然具有标签系统的窄搜索功能。

一个好的起点将是波纹管。

[https://github.com/mbleigh/acts-as-taggable-on#readme](https://github.com/mbleigh/acts-as-taggable-on#readme)

这样你就可以得到像 Diet Sierra Mist Lemon Lime Fridge Mate Soda 这样的东西，没有用 Lemon 标记，所以它不会出现，但你仍然可以标记像 Sunny D 这样的东西，标记为“Orange Juice”。同时通过使用默认标签不会对您的后端用户造成困难！

至于实际搜索，使用谷歌搜索系统可能是值得的，同时不支付广告费用。您可以使用标签作为关键字来缩小结果范围。我相信这对搜索引擎优化也有帮助，同时将搜索交给谷歌，这意味着支持基本上是有保证的。

# c# - MS Test 单元测试引发的事件内容

> ID：11727541
> 
> 赞同：2
> 
> 时间：2012-07-30T18:38:14.830
> 
> 标签：c#, visual-studio-2010, events, moq, mstest

我正在使用**Microsoft 的 Visual Studio 测试工具**和**Moq**进行单元测试。我有一个引发事件的方法，我需要验证事件的消息是否正确。

例如，该方法调用这行代码：

```
_myEventPublisher.RaiseEvent(new MyEvent(message: myMessage)) 
```

我需要验证 myMessage 的内容是否正确。

我可以通过单元测试中的这行代码成功验证是否引发了事件：

```
For<IMyEventPublisher>()
                .Verify(x => x.RaiseEvent(It.IsAny<IMyEvent>()), Times.Exactly(1)); 
```

但我不知道如何验证 IMyEvent.Message 字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:44:41.150

```
It.Is<IMyEvent>(m => Message == expected) 
```

代替

```
It.IsAny<IMyEvent>() 
```

# javascript - 使用本地存储存储字段值

> ID：11727546
> 
> 赞同：0
> 
> 时间：2012-07-30T18:38:26.043
> 
> 标签：javascript, jquery, html, cookies, local-storage

我创建了一个 Web 应用程序，以简化将网站提交到目录的过程，但我遇到了一些问题。每当我关闭窗口时，这些字段都会变为空白，并且复选框未被选中。我一直在做的解决这个问题只是每次都对站点信息进行硬编码，并在关闭页面之前向 HTML 中的复选框添加一个选中的值。

我想做的是使用本地存储来存储这些字段的值，带有“保存”和“清除”按钮。~~不幸的是，每次我看到饼干，我的头都会爆炸。~~我只使用了 7 个具有不同名称的文本字段和 40 个具有不同名称的复选框。我真的很感激我能得到的任何帮助。

[http://bearce.me/seo/](http://bearce.me/seo/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:42:18.277

Cookie 不是存储表单信息的好机制，尤其是因为它们可以被服务器和浏览器之间的任何人拦截（中间人攻击）。

它们不适合的另一个原因是它们不是为保存大量数据而设计的，因此如果用户输入了大量文本，它就会丢失。

考虑使用[本地存储](http://diveintohtml5.info/storage.html)——这就是它的用途。

# eclipse - Eclipse 语法着色未正确显示

> ID：11727561
> 
> 赞同：4
> 
> 时间：2012-07-30T18:39:04.137
> 
> 标签：eclipse, syntax-highlighting

我对 Eclipse 有点问题。直到现在我还没有遇到任何问题，所以我愿意在某个地方设置一些损坏的设置。发生的事情是我从 Sublime Text 2 移到了 Eclipse。（我真的很想留下来，但不能。）我尝试将 Sublime Text 2 主题导入 Eclipse，它似乎工作。但我现在可以对 Javascript 的设置进行任何更改。

我转到 Preferences -> Javascript -> Syntax Coloring 并输入我想要的所有颜色。它工作得很好。我关闭 Eclipse 并打开它，它们都消失了。我回到偏好，颜色仍然存在，只是没有出现。我改变一种颜色，它就出现了。关闭，重新打开，重复。我不知道出了什么问题，但我只想保留我放入的颜色。这可能是什么原因造成的？

编辑：完全忘记了。在 Windows 7 上运行最新版本的 Eclipse (20120614-1722)。我从 Eclipse for Java Developers 开始，并安装了网页编辑器插件。

# vb.net - 处理大量控件（根据范围视图动态删除和创建新实例）

> ID：11727567
> 
> 赞同：0
> 
> 时间：2012-07-30T18:39:28.787
> 
> 标签：vb.net, winforms, dynamic, user-controls, controls

我需要实现一种方法来处理面板中的大量控件而不会破坏容量，并且如果可能的话只进行一次加载或不加载。

我想听听您对我的解决方案及其可行性的看法和看法。

是否可以创建一个线程来实际处理不在范围视图中的控件并创建一个在范围内的新实例。

我正在考虑一个线程，因为我不希望 UI 被阻塞。我只想“流式传输控制”。

这样做的最佳方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:44:37.287

使用虚拟模式的 Datagridview 解决了这个问题！

# c# - 重载Get-参数名称在功能上很重要吗？

> ID：11727569
> 
> 赞同：0
> 
> 时间：2012-07-30T18:39:33.237
> 
> 标签：c#, rest, parameters, asp.net-web-api, naming

当我使用以下代码时：

```
public HttpResponseMessage Get()
{
    return Request.CreateResponse(HttpStatusCode.OK, "Empty!");
}

public HttpResponseMessage Get(int id)
{
    return Request.CreateResponse(HttpStatusCode.OK, id);
} 
```

请求完全按照他们应该的方式工作。 `GET: api/controller`以“Empty！”`GET: api/controller/12`为主体返回，以“12”为主体返回 200。

但是，一旦我将代码更改为：

```
public HttpResponseMessage Get()
{
    return Request.CreateResponse(HttpStatusCode.OK, "Empty!");
}

public HttpResponseMessage Get(int itemId) //changed parameter name
{
    return Request.CreateResponse(HttpStatusCode.OK, itemId);
} 
```

一切都达到默认方法并返回“空！”

我认为这是许多命名约定问题之一，但我找不到任何说明参数必须命名为特定值的文档或其他帖子。

这似乎是一个语义问题，但我想知道为什么我必须将我的参数命名为特定的东西，或者我做错了什么。为什么这不能简单地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:45:39.967

约定是在 RouteConfig.cs 中的 Routing 表中定义的，如果更改参数名称，则应相应更改：

```
 routes.MapHttpRoute(
          name: "DefaultApi",
          routeTemplate: "api/{controller}/{itemId}",
          defaults: new { itemId = RouteParameter.Optional }
      ); 
```

# c# - 如果我有详细的数据类型，会有问题吗？

> ID：11727571
> 
> 赞同：2
> 
> 时间：2012-07-30T18:39:45.010
> 
> 标签：c#, oop, list, dictionary

在我的应用程序开发中，我得出结论，我需要这个变量。

```
IDictionary<string, IDictionary<Levels, IList<Problem>>> PackageDictionaryForProblems
IDictionary<string, IDictionary<Levels, IList<ProblemRule>>> PackageDictionaryForProblemRules 
```

但是因为我需要访问字典的每个键，所以这很痛苦。我认为创建一个类以避免写入所有数据类型是一个不错的选择：

```
public class PackageDictionaryForProblems : IDictionary<string, IDictionary<Levels, IList<Problem>>>
{ }

// the sane for the second dictionary 
```

你怎么看待这件事？只创建这个类是一个好习惯吗？还是我需要为每个类创建几个类？IE

```
public class ProblemCollection : IList<Problem>
{ } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:43:08.577

runtype 定义多级集合的两个选项之间没有区别，例如

```
IDictionary<string, IDictionary<Levels, IList<Problem>>> PackageDictionaryForProblems 
```

或定义/使用类似的类型

```
public class PackageDictionaryForProblems : IDictionary<string, IDictionary<Levels,     IList<Problem>>>
{ } 
```

没有任何进一步的功能`PackageDictionaryForProblems`，它只是作为`IDictionary<string, IDictionary<Levels, IList<Problem>>>`.

您最终仍然会得到相同的内存分配、访问时间等。添加该自定义类型只会简化代码的可读性（或者不会……我个人发现查看`IDictionary<string, IDictionary<Levels, IList<Problem>>>`定义以理解数据结构更容易。这只是个人偏爱）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:46:45.543

> 只创建这个类是一个好习惯吗？

使用自定义类的主要优点，尤其是在这种情况下，是它允许您简化访问。

嵌套字典访问通常可以通过添加更高级别的成员函数来简化，因为“单一访问”通常需要检查可以添加新字典等的包装字典。将其包装到一个简单的 API 可以显着简化类型的使用。

但是，如果您只是直接公开底层类型，那么创建此类与仅使用内置类型相比几乎没有优势。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T18:50:46.187

我倾向于避免嵌套超过一层的泛型类型，除非类型是原始类型（例如`string`或`int`）。我可能会重构，以便您拥有一个从`Level`s映射到 s 的通用类`T`：

```
class LevelMapping<T> {
  IDictionary<Level, T> Mapping {get; set;}

  // constructors/methods etc
} 
```

现在你可以拥有一个`IDictionary`of `string`to `LevelMapping`s。

```
IDictionary<string, LevelMapping<Problem>> PackageDictionaryForProblems;
IDictionary<string, LevelMapping<ProblemRule>> PackageDictionaryForProblemRules; 
```

这当然取决于您在此处映射的具体内容。可能更适合用特殊方法包装整个字典以更好地反映您的域（或者根本不包装它！）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T18:47:47.790

我使用额外类的三个原因：

1.  可读性。
2.  轻松添加额外的方法和属性以及覆盖
3.  轻松更改类型（只需替换基本类型，而不是在我的代码中寻找实例化对象的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:42:12.807

就我个人而言，我认为没有理由仅仅为某些现有功能起别名而创建类。

# python - 打印python Post请求

> ID：11727572
> 
> 赞同：1
> 
> 时间：2012-07-30T18:39:45.917
> 
> 标签：python, http-post, urllib2

我正在尝试使用我的 python 脚本打印我正在执行的 POST 请求。我想知道是否有一种方法可以打印发布请求，以便查看参数是如何通过脚本传递的，我希望将其与浏览器进行比较。我通读了 urllib2 api，但找不到可以帮助我打印 POST 请求的函数。非常感谢对此的任何指示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:01:30.293

如果您使用[`urllib2.Request`](http://docs.python.org/library/urllib2.html?highlight=urllib2#urllib2.Request)，则必须提供 POST 请求的主体作为*application/x-www-form-urlencoded*字符串。

由于您负责构建 POST 正文，因此您可以轻松地打印或记录它。

**编辑**

还有[`urllib2.Request.get_data()`](http://docs.python.org/library/urllib2.html?highlight=urllib2#urllib2.Request.get_data). 也许你可以给我们这个。

**编辑 2**

像这样使用它：

```
req = urllib2.Request("http://example.com/", "foo:bar")
print req.get_method()    # => 'POST'
print req.get_data()      # => 'foo:bar'

res = urllib2.urlopen(req)
print res.getcode()       # => 200
print res.headers.items() # => [('transfer-encoding', 'chunked'), ... 
```

# phpunit - OSX 10.8 山狮梨/PHPUnit 不工作

> ID：11727574
> 
> 赞同：18
> 
> 时间：2012-07-30T18:39:50.300
> 
> 标签：phpunit, pear, osx-mountain-lion

我已经安装了 Mountain Lion，但我无法让 phpunit 工作。

```
$ pear config-get bin_dir
/Users/greg/pear/bin

$cd /Users/greg/pear/bin
$ls 
pear*
peardev*
pecl*
phpunit*

$phpunit
-bash: phpunit: command not found 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-02T07:30:14.923

阅读这篇博文：http: [//vanderveer.be/blog/2012/10/12/setting-up-my-perfect-developer-environment-on-osx-10-dot-8-mountain-lion-10-dot -8-2-最终版/](http://vanderveer.be/blog/2012/10/12/setting-up-my-perfect-developer-environment-on-osx-10-dot-8-mountain-lion-10-dot-8-2-final-edition/)

```
$ sudo cp /private/etc/php.ini.default /private/etc/php.ini
$ sudo php /usr/lib/php/install-pear-nozlib.phar
$ pear config-set php_ini /private/etc/php.ini
$ pecl config-set php_ini /private/etc/php.ini  
$ sudo pear upgrade-all 
```

为我工作。

# google-app-engine - 通过部署脚本部署 GAE 服务器，无需使用 App 启动器

> ID：11727575
> 
> 赞同：0
> 
> 时间：2012-07-30T18:39:58.533
> 
> 标签：google-app-engine, deployment

有没有一种方法可以在不使用 GAE 启动器的情况下部署 GAE 服务器。我想通过终端/命令行部署我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:14:04.383

该工具称为 appcfg.py 或用于 java 的 appcfg.sh。

请参阅[https://developers.google.com/appengine/docs/python/tools/uploadinganapp](https://developers.google.com/appengine/docs/python/tools/uploadinganapp)或[https://developers.google.com/appengine/docs/java/tools/uploadinganapp](https://developers.google.com/appengine/docs/java/tools/uploadinganapp)

# iphone - iOS 在另一个应用程序中打开文件 - 权限

> ID：11727576
> 
> 赞同：1
> 
> 时间：2012-07-30T18:40:01.687
> 
> 标签：iphone, ios, url, file-permissions

我有一个文件（准确地说是 Autodesk dwf 文件），我将其作为资源包含在我的应用程序中。

我想使用 [UIApplication openURL:otherapp://path/to/my/file.dwf] 之类的东西在另一个程序中打开文件；

另一个应用程序支持自定义 url 方案。当我的代码运行时，另一个应用程序被打开，但文件没有。

这是因为该文件位于我的应用程序的资源目录中，并且不允许其他应用程序“在该沙箱中播放”吗？如果是这样，我可以将文件放在手机文件系统的哪个位置，以便两个应用程序都有权打开它？

也许我缺少一些更基本的东西。

谢谢

# java - Apache POI 仅将最后一个单元格保存到新创建的文件中

> ID：11727582
> 
> 赞同：2
> 
> 时间：2012-07-30T18:40:26.417
> 
> 标签：java

因此，我从 excel 文件中的工作表中的选定单元格中提取数据，然后尝试将其写入另一个文件。数据在 vatAdata 数组中被很好地携带，据我所知，它被写入 for 循环中的单元格，因为它在插入后打印出每个单元格（仅用于调试目的）。但是当我稍后打开文件时，只有最后一个单元格中有数据，所有其他单元格都为空。知道是什么导致了这个问题吗？

```
for(int i=0;i<vatAdata.length;i++){
        Cell cellInsert=sheet.createRow(rowIndex).createCell(colIndex+i);
        cellInsert.setCellType(vatAtype[i]);
    //  System.out.println(cellInsert.);
        if(vatAtype[i]==0){
            cellInsert.setCellValue(Double.parseDouble(vatAdata[i]));
            System.out.println(cellInsert.getNumericCellValue()+" written");
        }
        else{
            cellInsert.setCellValue(vatAdata[i]);
            System.out.println(cellInsert.getStringCellValue()+" written");
        }
    }

    FileOutputStream out=new FileOutputStream("/home/chris/Documents/test.xlsx");
    wb.write(out);
    out.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:58:48.413

```
cellInsert=sheet.createRow(rowIndex).createCell(colIndex+i); 
```

您需要将新的 Row 值保存到变量中才能重用它。

```
row = sheet.createRow(rowIndex);
cellInsert = row.createCell(colIndex+i); 
```

# python - 查找并替换整行python

> ID：11727583
> 
> 赞同：0
> 
> 时间：2012-07-30T18:40:30.873
> 
> 标签：python, regex, file, replace

我有一个这样的文件..

```
xxxxxxxxxxxxxxx
xxxxxxxxxxxxxxx
xxxxxxxxxxxxxxx
a b c invalid #seperated by tab
xxxxxxxxxxxxxxx
xxxxxxxxxxxxxxx 
```

我需要替换`a b c invalid`为`a b reviewed rd # separated by tab` 基本上任何以无效结尾的行，我需要替换该行，`reviewed rd // separated by tab`但我必须保留该行的第一个和第二个单词（仅替换第 3 个和第 4 个）。

我已经开始做这样的事情，但这不会完全符合我的要求。

```
f1 = open('fileInput', 'r')
f2 = open('fileInput'+".tmp", 'w')
for line in f1:
    f2.write(line.replace('invalid', ' reviewed'+\t+'rd'))
f1.close()
f2.close() 
```

`regex`可以是一个选择，但我还不是很好。有人可以帮忙吗。

PS a、b 和 c 是变量。我无法对“a”、“b”、“c”进行精确搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:48:40.347

```
f1 = open('fileInput', 'r')
f2 = open('fileInput+".tmp"', 'w')
for line in f1:
    if line[:-1].endswith("invalid"):
        f2.write("\t".join(line.split("\t")[:2] + ["reviewed", "rd"]) + "\n")
    else:
        f2.write(line)
f1.close()
f2.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:32:53.027

```
import re

pattern = re.compile(r'\t\S+\tinvalid$')
with open('data') as fin:
    with open('output', 'w') as fout:
        for line in fin:
            fout.write(pattern.sub('\treviewd\trd', line)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:07:33.450

```
with open('input.tab') as fin, open('output.tab', 'wb') as fout:
    tabin = csv.reader(fin, delimiter='\t')
    tabout = csv.writer(fout, delimiter='\t')
    for row in tabin:
        if len(tabin) != 4:
            continue # or raise - whatever
        if row[-1] == 'invalid':
            tabout.writerow(row[:2] + ['reviewed', 'rd']) 
```

# c# - 将 XML 元素与 LINQ 合并

> ID：11727585
> 
> 赞同：0
> 
> 时间：2012-07-30T18:40:38.767
> 
> 标签：c#, linq, linq-to-xml

我有两个 XML 文档。我的目标是用第二个 Xml 文档的全部内容替换第一个文档中的一个节点。所以第一个文档 - **Parent**看起来像这样：

```
<Root>
    <AgencyName = "Some Agency"/>
    <Originator = "Some other Agency"/>
    <Type = "AnonymousType"/>
    <Details/>
</Root> 
```

第二个文档 - **children**如下所示：

```
<Root>
    <Details>
        <Detail1>
            ...
        </Detail1>
        <Detail2>
            ...
        </Detail2>
        <Detail3>
            ...
        </Detail3>
    </Details>
</Root> 
```

该节点`<Details/>`必须替换为第二个文档的内容。我正在尝试使用 Linq to XML 来执行此操作。第一个文档在 XDocument 类中表示，第二个文档在 XElement 类中表示。有几个子属性`<Detail/>`，我没有在这里列出。

我试图用这个 XElement 类替换第一个文档中的元素。如果我尝试这样的事情，

```
ParentDoc.Element("Details").ReplaceAll(children); 
```

它不太可能奏效。**我应该如何更换？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:51:11.370

```
var doc = XDocument.Load(@"C:\Tools\test.xml");
var doc2 = XDocument.Load(@"C:\Tools\test2.xml");
var children = doc2.Root.Element("Details");
var parentNode = doc.Root.Element("Details");
parentNode.ReplaceWith(children); 
```

顺便说一句，您的 xml 不正确，因此您会遇到异常。

我试过了

```
<Root>
    <AgencyName name= "Some Agency"/>
    <Originator name= "Some other Agency"/>
    <Type name= "AnonymousType"/>
    <Details/>
</Root> 
```

和

```
<Root>
    <Details>
        <Detail1>
           asdf
        </Detail1>
        <Detail2>
            asde
        </Detail2>
        <Detail3>
            eere
        </Detail3>
    </Details>
</Root> 
```

并得到

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
  <AgencyName name="Some Agency" />
  <Originator name="Some other Agency" />
  <Type name="AnonymousType" />
  <Details>
    <Detail1>
           asdf
        </Detail1>
    <Detail2>
            asde
        </Detail2>
    <Detail3>
            eere
        </Detail3>
  </Details>
</Root> 
```

# xstream - 如何使用xstream删除xml中的空格和回车

> ID：11727587
> 
> 赞同：2
> 
> 时间：2012-07-30T18:40:44.323
> 
> 标签：xstream

我正在尝试将（删除空格和回车）线性化为紧凑的 XML。

输入是

```
<?xml version="1.0" encoding="UTF-8"?> 
<books> 
    <book> 
       <title>Basic XML</title> 
       <price>100</price> 
       <qty>5</qty> 
    </book> 
    <book> 
        <title>Basic Java</title> 
        <price>200</price> 
        <qty>15</qty> 
    </book> 
</books> 
```

输出如下。

77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4gDQo8Ym9va3M+IA0KICAg PGJvb2s+IA0KICAgICAgIDx0aXRsZT5CYXNpYyBYTUw8L3RpdGxlPiANCiAgICAgICA8cHJpY2U+ MTAwPC9wcmljZT4gDQogICAgICAgPHF0eT41PC9xdHk+IA0KICAgPC9ib29rPiANCiAgIDxib29r PiANCiAgICAgPHRpdGxlPkJhc2ljIEphdmE8L3RpdGxlPiANCiAgICAgPHByaWNlPjIwMDwvcHJp Y2U+IA0KICAgICA8cXR5PjE1PC9xdHk+IA0KICAgPC9ib29rPiANCjwvYm9va3M+

要转换的代码如下。

公共类 XMLCompactTest {

```
public void testCompact() throws SAXException, IOException,
        ParserConfigurationException {

    final InputStream is =
            XMLCompactTest.class.getResourceAsStream("/example.xml");

    final byte[] bytes = IOUtils.toByteArray(is);
    final byte[] compactedBytes = compactXml(bytes);

    final String after = new String(compactedBytes);

    System.out.println(after);
}

 public static byte[] compactXml(final byte[] value)
        throws SAXException, IOException, ParserConfigurationException {

    final ByteArrayOutputStream bout = new ByteArrayOutputStream();
    final XStream xs = new XStream();
    xs.autodetectAnnotations(true);
    xs.setMode(XStream.ID_REFERENCES);
    //xs.marshal(value, new CompactWriter(new OutputStreamWriter(bout, "UTF-8")));
    xs.marshal(value, new CompactWriter(new OutputStreamWriter(bout)));

    return bout.toByteArray();
} 
```

}

非常感谢任何帮助，我已经提到了其他处理压缩 xml 的答案，它们似乎对我不起作用。我正在使用 xstream 1.4.3。

我期待单行压缩和解码的 xml。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:44:22.397

你在这里做的是编组一个字节数组。这当然会给出一些奇特的结果。

我会简单地`compactXml()`手动编写方法。

```
public static String compactXml(final byte[] value) {
   String in = new String(value, "UTF-8");
   StringBuffer sb = new StringBuffer();
   for(int i=0;i<in.length();i++) {
      char c = in.charAt(i);
      if(c != '\n' || c != ' ') {
         sb.append(c);
      }
   }
return sb.toString();
} 
```

# python - python3中使用locals的类闭包

> ID：11727588
> 
> 赞同：2
> 
> 时间：2012-07-30T18:40:45.657
> 
> 标签：python, functional-programming, scheme, closures

我发现这篇文章看起来很有趣 [http://okmij.org/ftp/Scheme/oop-in-fp.txt](http://okmij.org/ftp/Scheme/oop-in-fp.txt)

所以我尝试编写一个用 Python 实现的类闭包（只是一个玩具），如下所示：

```
def clos(x,y):
    def getx():
        print(x)
    def gety():
        print(y)
    def setx(i):
        nonlocal x
        x = i
    def sety(i):
        nonlocal y
        y = i
    lc = locals()
    return lambda x,*y:lc[x](*y)

k=clos(1,2)
k("getx")
k("gety")
k("setx",2)
k("getx") 
```

但是，我认为`lc = locals()`看起来很笨拙。但我不能`return lambda x,*y:locals()[x](*y)`在下面的句子中使用，因为它会构建一个不同的环境。

有什么技巧可以让它看起来更简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:06:09.857

怎么样

```
return (lambda lc: lambda x,*y:lc[x](*y))(locals()) 
```

# python - PIL image.open() 适用于某些图像但不适用于其他图像

> ID：11727598
> 
> 赞同：20
> 
> 时间：2012-07-30T18:41:25.557
> 
> 标签：python, image, python-imaging-library, noaa

我定期使用 PIL 从 NOAA 打开 AREA 文件。在我收到的最后一批图像中， image.open() 命令根本不起作用。这是我编写的一个简单代码，它产生相同的结果。它将使用一个月前的文件而不是今天的文件打开、旋转和执行正常任务。

```
from PIL import Image
im = Image.open("path/to/file")
im.show() 
```

这是错误：

```
File "image_goes.py", line 2, in <module>
im = Image.open("path/to/file")
File "/usr/lib/python2.6/dist-packages/PIL/Image.py", line 1980, in open
raise IOError("cannot identify image file")
IOError: cannot identify image file 
```

这是我尝试过的：

1.  在两台不同的机器上打开图像。
2.  更改文件的文件夹以防出现权限问题
3.  重新下载图像，以及另外两个批次，都使用 FTP 手动和我们的自动脚本。

我的假设是我们的下载脚本存在问题并且它没有完全下载文件，但是这个假设被拒绝了，因为新文件的大小正确并且我使用 FTP 客户端手动下载了它们并得到了同样的结果。

我唯一的其他理论是，今天的 NOAA 文件存在问题，或者它们已以 PIL 无法再处理它们的方式进行更改，但我认为这不太可能。

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T05:21:30.147

也许是内容实际上并未同步到磁盘。尝试`Image.open(open("path/to/file", 'rb'))`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-29T02:27:58.047

为了

```
im = Image.open("path/to/file") 
```

尝试

```
im = Image.open(r"path/to/file") 
```

也就是说，`r`在路径字符串之前放一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T13:50:24.943

您可以使用`cv2`读取图像。

```
im = cv2.imread(path) 
```

而且，对于打开/显示，您可以使用：

```
cv2.imshow() 
```

# windows - 检测 Windows 上的软件卸载

> ID：11727599
> 
> 赞同：0
> 
> 时间：2012-07-30T18:41:35.663
> 
> 标签：windows, logging, uninstallation

我想将卸载事件记录到我自己的桌面应用程序的网络服务器上。有没有办法可以检测到 Windows 上的卸载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:49:05.950

您的安装程序会覆盖 Installer.OnAfterUninstall 方法

[http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.onafteruninstall(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.onafteruninstall(v=vs.100).aspx)

在那里，您可以回调您的网络服务器。

请务必对卸载时没有互联网连接的可能性进行编程。此外，请注意，某些防火墙可能会阻止您从卸载程序连接到服务器的尝试，或提示用户允许连接。

如果您为桌面应用程序使用 Microsoft 以外的安装程序（例如 NSIS 或其他），则可能存在类似的钩子。

# c# - 如何使用静态数据填充视图模型

> ID：11727602
> 
> 赞同：1
> 
> 时间：2012-07-30T18:41:40.140
> 
> 标签：c#, asp.net-mvc, json

我有一个控制器，用于将`JSON`数据列表传递给我的视图。目前我正在使用`Linq to Entities`填充 Viewmodel，但由于它是一个只有 15 对的静态列表，我想对 Viewmodel 进行硬编码，但我不知道该怎么做。这是我的控制器

```
public JsonResult GetSites()
    {
        var sites = context.vAaiomsSites.Select(s => new vAaiomsSitesVM
        {
            ID = s.ID,
            SiteName = s.SiteName
        }).OrderBy(s => s.SiteName);

        return Json(sites, JsonRequestBehavior.AllowGet);
    } 
```

我只需要这样的数组：

SiteID: 1, SiteName : 易货岛

SiteID: 2, SiteName: Cape Lisburne

....12 次以上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:45:50.523

`List<T>`使用集合初始化器创建ViewModel的数组（或）：

```
public JsonResult GetSites()
{
    var sitesArray = new vAaiomsSitesVM[]
        {
            new vAaiomsSitesVM
            {
                ID = 1,
                SiteName = "Barter Island"
            },

            new vAaiomsSitesVM
            {
                ID = 2,
                SiteName = "Cape Lisburne"
            }

            // And so on...
        };

    var sites = sitesArray.OrderBy(s => s.SiteName);
    return Json(sites, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:46:03.937

如果你真的想硬编码，你可以这样做。

为您的 ViewModel 创建一个类

```
public class Site
{
  public int SiteID { set;get;}
  public string SiteName { set;get;}
} 
```

并在您的 Action 方法中

```
public JsonResult GetSites()
{
   var list=new List<Site>();
   list.Add(new Site{ SiteID=1, SiteName="SiteName 1" } );
   list.Add(new Site{ SiteID=2, SiteName="SiteName 2" } );
   //13 more times !!!!
  return Json(list, JsonRequestBehavior.AllowGet);  
} 
```

但是**你为什么要HardCode呢？**我建议您尽可能避免这种情况。如果您担心每次都查询数据库，您可以考虑将数据存储在中间缓存层中并从中获取数据，从而避免调用数据库。三思而后行。

# bash - 如何在不产生两个进程的情况下以不同用户身份运行 nohup？

> ID：11727604
> 
> 赞同：9
> 
> 时间：2012-07-30T18:42:01.303
> 
> 标签：bash, process, nohup

我正在尝试 nohup 一个命令并以不同的用户身份运行它，但是每次我这样做时都会产生两个进程。

例如：

```
$ nohup su -s /bin/bash nobody -c "my_command" > outfile.txt & 
```

这肯定会以无人身份运行 my_command，但是还有一个我不想显示的额外过程：

```
$ ps -Af
.
.
.
root ... su -s /bin/bash nobody my_command
nobody ... my_command 
```

如果我杀死根进程，nobody 进程仍然存在......但是有没有办法根本不运行根进程？由于获取 my_command 的 id 并杀死它有点复杂。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-06-03T08:02:21.717

这可以通过以下方式实现：

```
su nobody -c "nohup my_command >/dev/null 2>&1 &" 
```

并在 pidFile 中写入“my_command”的 pid：

```
pidFile=/var/run/myAppName.pid
touch $pidFile
chown nobody:nobody $pidFile
su nobody -c "nohup my_command >/dev/null 2>&1 & echo \$! > '$pidFile'" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T17:50:16.817

```
nohup runuser nobody -c "my_command my_command_args....." < /dev/null >> /tmp/mylogfile 2>&1 & 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-16T06:54:54.843

如果用户使用 nologin shell，运行如下：

```
su - nobody -s /bin/sh -c "nohup your_command parameter  >/dev/null 2>&1 &" 
```

或者：

```
runuser - nobody -s /bin/sh -c "nohup your_command parameter  >/dev/null 2>&1 &" 
```

或者：

```
sudo su - nobody -s /bin/sh -c "nohup your_command parameter  >/dev/null 2>&1 &"

sudo runuser -u nobody -s /bin/sh -c "nohup your_command parameter  >/dev/null 2>&1 &" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:02:43.993

您最好创建一个小脚本，例如`/usr/local/bin/start_my_command`：

```
#!/bin/bash
nohup my_command > outfile.txt & 
```

使用`chown`and`chmod`将其设置为可执行并由 拥有`nobody`，然后运行`su nobody -c /usr/local/bin/start_my_command`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-02T19:59:40.037

在会话上运行它的注意事项是，如果您在后台运行，则有一个与会话关联的作业，并且后台作业可能会被终止（ su -c 解决了这个问题）。

要取消进程与 shell 的关联（以便您可以退出 shell 但保持进程运行），请使用`disown`.

# unit-testing - C ++我如何运行makefile输出

> ID：11727606
> 
> 赞同：2
> 
> 时间：2012-07-30T18:42:05.150
> 
> 标签：unit-testing, netbeans, makefile, cppunit

C ++我如何运行makefile输出

下面是我的MakeFile，我想问一下如何运行我的unitTest.cpp，因为当我用NetBean MakeFile 时，使用下面的MakeFile，main.exe 实际上是main.cpp 输出

但我想运行 unitTest.cpp 的输出

我如何运行 unitTest.cpp

```
# ExampleTests Project

SRCS = main.cpp currencyConverter.cpp unitTest.cpp

HDRS = currencyConverter.h unitTest.h

PROJ = main

# Remaining lines shouldn't need changing

# Here's what they do:

#   - rebuild if any header file or this Makefile changes

#   - include CppUnit as dynamic library

#   - search /opt/local for MacPorts

#   - generate .exe files for Windows

#   - add -enable-auto-import flag for Cygwin only

CC = g++

OBJS = $(SRCS:.cpp=.o)

APP = $(PROJ).exe

CFLAGS = -c -g -Wall -I/opt/local/include

ifeq (,$(findstring CYGWIN,$(shell uname)))

  LDFLAGS = -L/opt/local/lib

else

  LDFLAGS = -L/opt/local/lib -enable-auto-import

endif

LIBS = -lcppunit -ldl

all: $(APP)

$(APP): $(OBJS)

    $(CC) $(LDFLAGS) $(OBJS) -o $(APP) $(LIBS)

%.o: %.cpp $(HDRS)

    $(CC) $(CFLAGS) $< -o $@

clean:

    rm -f *.o $(APP) 
```

下面是我的 unitTest.cpp

```
#include "unitTest.h"
#include "currencyConverter.h"

CPPUNIT_TEST_SUITE_REGISTRATION(unitTest);

unitTest::unitTest() {
}

unitTest::~unitTest() {
}

void unitTest::setUp() {
}

void unitTest::tearDown() {
}

void stringToUpper(string&);

void unitTest::testStringLowerToUpper()
{
string str = "ILOVECPLUSPLUS";
string str2 = "IloveCplusplus";

cout << "\nChecking if string 1 '" << str << "' equals string 2 '" << str2 << "'";
CPPUNIT_ASSERT_EQUAL(str,str2);

//this part i will use my stringToUpperFunction to test.
currencyConverter c;

c.stringToUpper(str2);

cout << "\nChecking if string 1 '" << str << "' equals string 2 '" << str2 << "'";
CPPUNIT_ASSERT_EQUAL(str,str2);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:52:01.330

将另一个目标（例如`testrunner.exe`）添加到您要测试的 .cpp 文件 + 您的 testsuite .cpp 文件 + 另一个构成您的 testrunner 应用程序的 main() 的 .cpp 文件到您的 make 文件中。有了这个，您可以添加另一个目标测试，这取决于`testrunner.exe`只调用 testrunner.exe 可执行文件。

# javascript - document.getElementById(foo).value 带有 html 编码的特殊字符？

> ID：11727612
> 
> 赞同：0
> 
> 时间：2012-07-30T18:42:18.390
> 
> 标签：javascript, special-characters

我似乎无法在简单的输入文本字段中正确呈现特殊字符。例如在下面

```
&#233; 
```

应该是 é 但呈现为原始值

```
document.getElementById("inputKeyword").value ="Cherchez par mot cl&#233;" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:47:19.920

那是html编码，它在javascript中没有用。

```
document.getElementById("inputKeyword").value = "Cherchez par mot clé"; 
```

或者

```
document.getElementById("inputKeyword").value = "Cherchez par mot cl\u00e9"; 
```

# tcp - TCP 是否需要验证？

> ID：11727615
> 
> 赞同：0
> 
> 时间：2012-07-30T18:42:22.907
> 
> 标签：tcp

我必须实现一个非常短的应用程序，每隔几秒钟向服务器发送一次数据包，当服务器收到它们时，它会向客户端发送响应，然后客户端才会继续发送另一个数据包。这听起来不错，但我们使用的是 TCP，服务器收到数据包后立即响应，而不是后处理或类似的东西。所以这让我想知道，你为什么要做这样的事情？客户端有一个队列，我保存所有数据包并执行以下操作：

```
try {
    send packet // exception is thrown if connection is lost
    remove packet from queue
} catch exception {
    try to reconnect 
} 
```

*所以在这种情况下，只有发送*成功，数据包才会从队列中删除。

对此有任何想法吗？这是最佳实践吗？如果有人能为我解决这个问题，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:49:45.213

一种选择是将数据包放入队列并发送它们。发送后将它们移动到“待定”队列中。另一端*处理*完它们后，您将它们标记为已完成。然后你就会遇到其他问题。如果另一端处理它们但 ack 永远不会到达你的端怎么办？这是一个相对研究的问题，如果您需要确定，我建议您研究分布式事务和两阶段提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:46:15.257

在某些情况下，发送是不够的。如果必须接收到您推出的数据绝对至关重要，那么您应该等待远程端接收/处理数据包的确认。

即使网络级别的东西运行良好并且数据包到达目的地，该目的地机器仍可能崩溃或以其他方式丢失数据。如果您在发送时删除，那么该数据就消失了。等待来自远程端的确认至少可以让您重新发送损坏/丢失的数据包。

# javascript - 在 IE 中调用 find next 时不要在 Codemirror 中突出显示光标

> ID：11727619
> 
> 赞同：0
> 
> 时间：2012-07-30T18:42:37.523
> 
> 标签：javascript, css, codemirror

我将 CodeMirror 用于高亮 xml。它使搜索变得完美，但是当我尝试*查找*未在 IE8 中突出显示的下一个光标时（在其他版本中我没有尝试过）。

有没有人遇到过类似的问题？

它在演示中也不起作用（使用 IE8）：

[http://codemirror.net/demo/search.html](http://codemirror.net/demo/search.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:02:28.023

问题已通过更改解决

```
    .CodeMirror-搜索{
       边框：1px 实心#E9D9D9；
       背景：RGBA（255、255、255、.4）；
    }

```

至

```
    .CodeMirror-搜索{
      背景图像：网址（不透明度.png）；
    }

```

其中 opacity.png 是 25% 不透明度 png 1x1px 文件

# excel - 使用宏清除工作表的内容，而不清除剪贴板

> ID：11727620
> 
> 赞同：1
> 
> 时间：2012-07-30T18:42:38.867
> 
> 标签：excel, clipboard, vba

如何使用宏清除 Excel 工作表的内容，而不清除剪贴板的内容？

我目前正在使用下面的代码（通过单击工作表上的按钮调用），但这会清除剪贴板中的数据，这些数据是我从其他来源复制的，并希望粘贴到清除的工作表中

```
Sub clearly()  
    Dim ws As Worksheet  
    For Each ws In ThisWorkbook.Worksheets  
        ws.UsedRange.ClearContents  
    Next ws  
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:19:22.360

> 我从其他来源复制的，并想**粘贴到清除的工作表中**

为什么不创建一个临时表并将数据粘贴到那里，然后清除所有表。完成后将数据从临时表复制到相关表并删除临时表？

看到这个（**尝试和测试**）

```
Sub clearly()
    Dim ws As Worksheet, wsTemp As Worksheet

    '~~> Create a Temp Sheet
    Set wsTemp = Sheets.Add

    '~~> Copy clipboad data to temp sheet
    wsTemp.Range("A1").PasteSpecial xlPasteAll

    '~~> Clear contents of all sheets except temp sheet
    For Each ws In ThisWorkbook.Worksheets
        If ws.Name <> wsTemp.Name Then ws.Cells.ClearContents
    Next ws

    '~~> Copy data from temp sheet to relevant sheet
    wsTemp.Cells.Copy Sheets("Sheet1").Cells

    '~~> Delete temp sheet
    Application.DisplayAlerts = False
    wsTemp.Delete
    Application.DisplayAlerts = True
End Sub 
```

# npapi - 如何在 NPAPI 插件中实现回调函数

> ID：11727624
> 
> 赞同：0
> 
> 时间：2012-07-30T18:42:48.147
> 
> 标签：npapi, browser-plugin

我正在为嵌入式本机浏览器 (Linux) 开发 NPAPI 插件。我想要一个来自 javascript 的回调函数，它将在我的插件中调用回调函数。根据键盘按键产生的事件。我必须将事件连续发送到浏览器窗口。我对此完全陌生，需要帮助。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:05:29.167

如果您使用的是 FireBreath，[关于触发事件的文档](http://www.firebreath.org/display/documentation/Firing+Events+from+JSAPI)已经涵盖了这一点。

如果你正在编写一个普通的 NPAPI 插件，你的插件应该实现[`addEventListener(type, listener, ...)`](https://developer.mozilla.org/en/DOM/element.addEventListener)& [`removeEventListener()`](https://developer.mozilla.org/en/DOM/element.removeEventListener)。
由于您已经知道如何向插件添加可编写脚本的函数，您只需要添加对这两个函数的支持。

**`addEventListener()`**你得到以下论点：

*   `type`- 应该是一个标识事件的字符串
*   `listener`- 应该是一个对象，保留并存储它
*   `useCapture`- 应该是一个布尔值，可选的，如果不存在的话`false`

要存储监听器，您可以使用一个[`multimap<SomeStringType,NPObject*>`](http://www.cplusplus.com/reference/stl/multimap/)成员，事件字符串作为键，监听器对象作为值。不要忘记[留住](https://developer.mozilla.org/en/NPN_RetainObject)听众。

要**触发一个事件**，您可以获取[`equal_range()`](http://www.cplusplus.com/reference/stl/multimap/equal_range/)它并[`NPN_InvokeDefault()`](https://developer.mozilla.org/en/NPN_InvokeDefault)与侦听器对象一起使用。

**`removeEventListener()`**接收相同的参数，`addEventListener()`然后您应该[`erase()`](http://www.cplusplus.com/reference/stl/multimap/erase/)为该事件字符串指定侦听器。不要忘记[释放](https://developer.mozilla.org/en/NPN_ReleaseObject)侦听器对象。

*为了尊重`useCapture`相应地扩展上述内容。*

# php - jquery不在IE中发布数据

> ID：11727625
> 
> 赞同：2
> 
> 时间：2012-07-30T18:42:52.860
> 
> 标签：php, jquery

我创建了一个简单的表单，当我选择任何东西时，我有一个组合框，我将一个函数放在 onchange 事件中，以便调用它。

然后我通过 jquery 在一个帮助文件中发送这些数据

```
<script type="text/javascript">
$.noConflict();
function Searchwine(obj,str) {  
{queryString: ""+str+""}, function(data){           
    jQuery.post("http://www.site.com/search/helper/autosuggest.php", {queryString: ""+str+""}, function(data){          
        if(data.length >0) {
jQuery('#windatano').html(data);
}
</script> 
```

我正在使用此代码通过javascript在自动建议中发布数据并在windatano中打印jquery的重播`id`

--> 它在 crome 和 ff 和其他所有浏览器中工作正常，但在 IE 中它不工作

有什么帮助吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:23:12.380

IE 不支持跨域 ajax 调用，不管它是否 getJSON。学到了艰难的方法...我最终添加了一个本地 php 文件，该文件使用 curl 来获取结果并将它们返回到脚本，这是使 ie 处理跨域请求的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:46:54.560

您不正确地使用 jQuery。

正确的语法是（对于 POST）

```
$.post([URL], {
        var: value,
        var2: value
    }, function(data) {
        //callback goes here
    }
); 
```

如果您想像 GET 一样传入查询字符串，只需将其附加到`?`.

例如：

```
"http://www.site.com/search/helper/autosuggest.php?" + str 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:17:31.173

不能做跨域ajax请求，如果请求url在另一个域，这个失败，如果域相同，使用相对路径：

```
jQuery.post("/search/helper/autosuggest.php".... 
```

如果你需要跨域ajax请求，你必须使用jsonp（http://api.jquery.com/jQuery.getJSON/#jsonp）

如果你使用 post 方法，queryString 定义一个 get vars，你需要使用 data 选项

```
jQuery.ajax({
    url: '/search/helper/autosuggest.php',
    type: 'POST',
    data: data,
    sucess: function (data) {
         if (data) jQuery('#windatano').html(data);
    }
}); 
```

当数据可以是对象格式时：

```
var data = {
    a_var = 'value',
    other_var: 'other value'
}; 
```

对不起我的英语

# android - 在 XMPP 中定期发送当前位置

> ID：11727631
> 
> 赞同：-1
> 
> 时间：2012-07-30T18:43:12.987
> 
> 标签：android, geolocation, xmpp, asmack

我正在尝试将用户的当前位置从 android 发送到服务器和其他移动设备。为了实现这一点，我正在使用 XMPP。

到目前为止，我已经使用 asmack 库成功地与 Android 的 XMPP 服务器建立了连接。但现在我不知道如何将用户的当前位置发送到服务器和其他 android 移动设备。

在搜索时我遇到了这个[XEP-0080](http://xmpp.org/extensions/xep-0080.html/)，但我不知道如何使用它。

到目前为止，我打算做

1.  连接 XMPP 服务器
2.  获取已连接或在线用户
3.  与所有人共享位置

任何人都可以建议我的路线图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:13:08.630

要遵循该规范，您只需

*   连接 XMPP 服务器
*   通过 PEP 或[pubsub发布您的位置](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/index.html)

使用任何一种方法，其他用户都可以订阅地理位置节点，他们将收到位置事件。您不直接向他们发送消息，而是遵循 pubsub 模型。

# c++ - 是否可以将 mex 代码转换为 C++ 代码？

> ID：11727638
> 
> 赞同：5
> 
> 时间：2012-07-30T18:43:57.850
> 
> 标签：c++, mex

我已经编写了一些 mex (c++) 代码，我使用了 mxArrays，以及一些其他的 Matlab 函数，我想知道是否可以通过包含适当的标头并进行一些小的更改来轻松地将其转换为 C++ 代码？

编辑：通过“转换”，我的意思是我想编译和运行我的代码而不依赖（使用）matlab。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:30:04.767

您可以使用 SimulinkCoder 使其可执行 - 因此您可以在没有 Matlab 的情况下运行它......但您仍然必须在每次更改代码时使用 Matlab 来使其可执行。

*   使用您指定 mex 文件的单个 S-Function 模块制作基本 Simulink 模型。
*   使用 SimulinkCoder (Real Time Workshop) 从 Simulink 模型中生成可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:52:26.687

正如上面评论中提到的，这项工作很大程度上取决于您使用的 MATLAB 函数的性质。由于您已成功地将大部分 MATLAB 代码移植到 C++，我建议您继续这样做，直到您不再依赖 MATLAB 库来构建。

您是否依赖任何工具箱功能？如果是这样，这可能是比您意识到的更大的任务。

祝你好运！

# mysql - 如何列出存储在 MySQL 中的层次结构中的所有直接和间接子类型

> ID：11727642
> 
> 赞同：0
> 
> 时间：2012-07-30T18:44:22.420
> 
> 标签：mysql

我面临一个非常普遍的问题。我有一个大型对象层次结构，每个对象类型之间的关系都存储在 DB 表中（id、name、supertype_id）。现在，如果我有一个层次结构 A<-B<-C<-D。我如何列出 B 的所有子类型。不仅那些直接相关的，当然 B 可以有许多直接子类型，不仅 C 和 C 也可以有许多子类型等等。

现在我可以获取所有数据并在数据库之外对其进行处理，但是我将如何使用 SQL 过程来完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:56:31.740

[这是一个很好的资源](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)。MySQL 在层次结构方面不是很好，但可以通过一些工作来完成。

# sql - SQL：为每个不同的值选择三行

> ID：11727648
> 
> 赞同：4
> 
> 时间：2012-07-30T18:44:40.717
> 
> 标签：sql, select, timestamp, where

对于每个不同的名称，我想选择具有最早时间戳（或 UNIXTIME 中的最小数字）的前三行。什么是正确的查询？

开始表：

```
Name         Log-in Time
--------     -----------------
Don          05:30:00
Don          05:35:32
Don          07:12:43
Don          09:52:23
Don          05:32:43
James        03:30:00
James        03:54:23
James        09:51:54
James        14:43:34
James        43:22:11
James        59:43:33
James        20:12:11
Mindy        05:32:22
Mindy        15:14:44
Caroline     10:02:22
Rebecca      20:43:32 
```

茶几：

```
Name         Log-in Time
--------     -----------------
Don          05:30:00
Don          05:35:32
Don          07:12:43
James        03:30:00
James        03:54:23
James        09:51:54
Mindy        05:32:22
Mindy        15:14:44
Caroline     10:02:22
Rebecca      20:43:32 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:59:58.693

```
WITH Table (Name, LoginTime, Row) AS
(
    SELECT 
       Name,
       LoginTime,
       ROW_NUMBER() OVER (PARTITION BY Name ORDER BY LoginTime)
    FROM SomeTable
)
SELECT 
   Name,
   LoginTime
FROM Table
WHERE 
   Row <= 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:58:26.987

ansi 标准方法实际上看起来适用于以下内容：

[http://www.sqlfiddle.com/#!2/b814d/15](http://www.sqlfiddle.com/#!2/b814d/15)

```
SELECT
    NAME
    , LOGIN
FROM (
    SELECT 
        test_first.NAME,
        test_first.LOGIN,
        COUNT(*) CNT
    FROM 
        TABLE_NAME test_first
    LEFT OUTER JOIN 
        TABLE_NAME test_second
        ON (test_first.NAME = test_second.NAME)
    WHERE 
        test_first.LOGIN <= test_second.LOGIN
    GROUP BY  
        test_first.NAME, test_first.LOGIN) test_order
WHERE 
    test_order.CNT <= 3
ORDER BY 
    NAME ASC, LOGIN ASC 
```

# c# - 如何附加和更新现有实体？

> ID：11727649
> 
> 赞同：0
> 
> 时间：2012-07-30T18:44:43.873
> 
> 标签：c#, entity-framework

我想在我的网页上构建一个断开连接的对象：

```
var entity = new MyEntity();
entity.ID = IdFromPage;
entity.Name = UpdatedNameFromPage; 
```

将它连接到我的对象上下文，然后调用 context.Save()

但我该怎么做呢？我不想使用 linq 来提取这样的实体......

```
var entityFromPage = new MyEntity();
entity.ID = IdFromPage;
entity.Name = UpdatedNameFromPage;

var connectedEntity = _db.MyEntities.Where(x => x.ID == IdFromPage).First();
connectedEntity.ID = entityFromPage.ID;
connectedEntity.Name = entityFromPage.Name; 
```

因为这个脚本的第二部分可能很大，我不想重新映射所有内容。我只想将其插入 ID 上，然后调用 Save() 这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:46:39.003

你不必。

如果您知道它已经存在于数据库中，

```
objectcontext.YourEntities.Attach(entity);
objectcontext.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);       
objectcontext.SaveChanges(); 
```

（如果是新实体，则将其添加到上下文中）

# ibm-midrange - 具有不同的记录格式与具有单独的显示文件

> ID：11727650
> 
> 赞同：0
> 
> 时间：2012-07-30T18:44:50.437
> 
> 标签：ibm-midrange, rpgle, rpg

对于在 AS400 上开发的应用程序的每个类别有不同的显示文件是否更好，或者创建不同的记录格式（或同一 DSPF 中的多个文件的 RECORD 格式类型）是合适的。

我有 4 个屏幕要显示。我应该在 1 个 DSPF 中创建 4 个不同的 DSPF 文件或 4 种不同的格式类型，请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:31:13.753

没有包罗万象的规则。

假设您有一个调用客户查询程序的菜单。客户查询反过来调用一个程序来验证用户，这样她就可以看到不允许低级别用户看到的机密客户信息。菜单将是一个程序、一个显示文件、一种记录格式。客户查询将是一个程序，一个显示文件和几种记录格式：一种按姓名搜索，一种按身份证号搜索，一种按电话号码搜索，一种显示结果。身份验证程序将是一个程序、一个显示文件和一种记录格式（甚至可以是一个窗口）。

您将有意义的记录格式放在一起。您不会将应付账款记录格式放在客户查询显示文件中，因为它们放在一起没有意义。

操作系统并不特别关心显示文件中有多少记录格式。这完全取决于你想如何组织你的工作。

# c# - 在运行时从不同的文件加载 Properties.Settings

> ID：11727654
> 
> 赞同：7
> 
> 时间：2012-07-30T18:45:06.907
> 
> 标签：c#, app-config

有没有办法在运行时从默认文件以外的其他文件加载设置`App.config`？我想在加载默认配置文件后执行此操作。

我使用`Settings.Settings`Visual Studio 中的 GUI`App.config`为我创建文件。配置文件最终看起来像这样：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
        <configSections>
            <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
        <section name="SnipetTester.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    </configSections>
      <applicationSettings>
        <SnipetTester.Properties.Settings>
          <setting name="SettingSomething" serializeAs="String">
            <value>1234</value>
          </setting>
        </SnipetTester.Properties.Settings>
      </applicationSettings>
    </configuration> 
```

在代码中，我可以访问这样的设置：

```
Console.WriteLine("Default setting value:  " + Properties.Settings.Default.SettingSomething); 
```

这个想法是，当应用程序运行时，我应该能够在运行时指定一个配置文件，并让应用程序将配置文件加载到`Properties.Settings.Default`对象中，而不是使用默认`app.config`文件。配置文件的格式相同，但设置的值会不同。

我知道用`ConfigurationManager.OpenExeConfiguration(configFile);`. 但是，在我运行的测试中，它不会更新`Properties.Settings.Default`对象以反映配置文件中的新值。

* * *

在考虑了一段时间之后，我已经能够提出一个我更喜欢的解决方案。我确信它有一些陷阱，但我认为它会为我需要它做的事情工作。

本质上，`Properties.Settings`该类是由 Visual Studio 自动生成的；它为您生成类的代码。我能够找到代码的生成位置并添加一些函数调用来自行加载配置文件。这是我的补充：

```
internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase 
{
    //Parses a config file and loads its settings
    public void Load(string filename)
    {
        System.Xml.Linq.XElement xml = null;
        try
        {
            string text = System.IO.File.ReadAllText(filename);
            xml = System.Xml.Linq.XElement.Parse(text);
        }
        catch
        {
            //Pokemon catch statement (gotta catch 'em all)

            //If some exception occurs while loading the file,
            //assume either the file was unable to be read or
            //the config file is not in the right format.
            //The xml variable will be null and none of the
            //settings will be loaded.
        }

        if(xml != null)
        {
            foreach(System.Xml.Linq.XElement currentElement in xml.Elements())
            {
                switch (currentElement.Name.LocalName)
                {
                    case "userSettings":
                    case "applicationSettings":
                        foreach (System.Xml.Linq.XElement settingNamespace in currentElement.Elements())
                        {
                            if (settingNamespace.Name.LocalName == "SnipetTester.Properties.Settings")
                            {
                                foreach (System.Xml.Linq.XElement setting in settingNamespace.Elements())
                                {
                                    LoadSetting(setting);
                                }
                            }
                        }
                        break;
                    default:
                        break;
                }
            }
        }
    }

    //Loads a setting based on it's xml representation in the config file
    private void LoadSetting(System.Xml.Linq.XElement setting)
    {
        string name = null, type = null, value = null;

        if (setting.Name.LocalName == "setting")
        {
            System.Xml.Linq.XAttribute xName = setting.Attribute("name");
            if (xName != null)
            {
                name = xName.Value;
            }

            System.Xml.Linq.XAttribute xSerialize = setting.Attribute("serializeAs");
            if (xSerialize != null)
            {
                type = xSerialize.Value;
            }

            System.Xml.Linq.XElement xValue = setting.Element("value");
            if (xValue != null)
            {
                value = xValue.Value;
            }
        }

        if (string.IsNullOrEmpty(name) == false &&
            string.IsNullOrEmpty(type) == false &&
            string.IsNullOrEmpty(value) == false)
        {
            switch (name)
            {
                //One of the pitfalls is that everytime you add a new
                //setting to the config file, you will need to add another
                //case to the switch statement.
                case "SettingSomething":
                    this[name] = value;
                    break;
                default:
                    break;
            }
        }
    }
} 
```

我添加的代码公开了一个`Properties.Settings.Load(string filename)`函数。该函数接受配置文件名作为参数。它将解析文件并加载它在配置文件中遇到的任何设置。要恢复到原始配置，只需调用`Properties.Settings.Reload()`.

希望这可以帮助别人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:02:58.563

这取决于应用程序的类型：

1.  Web 应用程序和 Windows 应用程序 -如果您愿意将配置文件存储在与应用程序相同的文件夹（或子文件夹）中，请使用[configSource xml 属性](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)
2.  创建一个[设置提供程序](http://msdn.microsoft.com/en-us/library/system.configuration.settingsprovider.aspx)并实现[IApplicationSettingsProvider](http://msdn.microsoft.com/en-us/library/System.Configuration.IApplicationSettingsProvider.aspx)。样品[在这里](http://www.codeproject.com/Articles/20917/Creating-a-Custom-Settings-Provider)和[这里](http://www.codeproject.com/Articles/136152/Create-a-Custom-Settings-Provider-to-Share-Setting)。您可能还需要使用[IConfigurationManagerInternal](http://msdn.microsoft.com/en-us/library/system.configuration.internal.iconfigurationmanagerinternal%28v=vs.100%29.aspx)接口来替换默认的 .NET 配置管理器。在实施提供程序时，不要忘记在用户设置和应用程序设置以及漫游配置文件之间做出区别。

如果您想快速入门，只需反编译[LocalFileSettingsProvider](http://msdn.microsoft.com/en-us/library/system.configuration.localfilesettingsprovider.aspx)类（默认设置提供程序）并将其更改为您的需要（您可能会发现一些无用代码并且可能需要复制它所依赖的所有类）。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:56:38.493

看看使用 ExeConfigurationFileMap 和 ConfigurationManager.OpenMappedExeConfiguration。

请参阅[破解 .Net 2.0 配置的奥秘](http://www.codeproject.com/Articles/19675/Cracking-the-Mysteries-of-NET-2-0-Configuration#t2_1)

> ExeConfigurationFileMap 允许您在调用 OpenMappedExeConfiguration() 时专门配置机器、exe、漫游和本地配置文件的确切路径名，全部或部分。您不需要指定所有文件，但在创建配置对象时将识别并合并所有文件。使用 OpenMappedExeConfiguration 时，重要的是要了解所有级别的配置直至您请求的级别将始终被合并。如果指定自定义exe和本地配置文件，但不指定机器和漫游文件，则会找到默认机器和漫游文件，并与指定的exe和用户文件合并。如果指定的文件没有与默认文件正确保持同步，这可能会产生意想不到的后果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T10:30:25.703

您可以包含这些类型，这样您就不需要每次都手动更新源。

`private void LoadSetting(System.Xml.Linq.XElement setting) { string name = null, type = null; 字符串值=空；

```
 if (setting.Name.LocalName == "setting")
        {
            System.Xml.Linq.XAttribute xName = setting.Attribute("name");
            if (xName != null)
            {
                name = xName.Value;
            }

            System.Xml.Linq.XAttribute xSerialize = setting.Attribute("serializeAs");
            if (xSerialize != null)
            {
                type = xSerialize.Value;
            }

            System.Xml.Linq.XElement xValue = setting.Element("value");
            if (xValue != null)
            {
                if (this[name].GetType() == typeof(System.Collections.Specialized.StringCollection))
                {
                    foreach (string s in xValue.Element("ArrayOfString").Elements())
                    {
                        if (!((System.Collections.Specialized.StringCollection)this[name]).Contains(s))
                            ((System.Collections.Specialized.StringCollection)this[name]).Add(s);
                    }
                }
                else
                {
                    value = xValue.Value;
                }

                if (this[name].GetType() == typeof(int))
                {
                    this[name] = int.Parse(value);
                }
                else if (this[name].GetType() == typeof(bool))
                {
                    this[name] = bool.Parse(value);
                }
                else
                {
                    this[name] = value;
                }

            }
        }` 
```

# multithreading - 线程、Coro、Anyevent 混淆

> ID：11727655
> 
> 赞同：4
> 
> 时间：2012-07-30T18:45:08.087
> 
> 标签：multithreading, perl, coroutine, anyevent

我对 perl 相对较新，甚至对 perl 中的线程也较新。我有一个 perl 脚本，它从 3 个不同的来源获取输入。（2 个 LDAP 查询和一个不总是存在的文件）因为某些部分可能比其他部分花费更长的时间，所以我决定使用线程和队列。在开发过程中，测试脚本的各个组件效果很好，但将它们放在一起后，性能似乎下降了。

基本结构是这 2 个线程：（读取文件或读取 AD 条目）-> Queue1 -> 2 个线程：（清理数据）-> Queue2 -> 3-4 个线程（与现有的本地 LDAP 条目比较）。几个线程将统计信息报告回主脚本，一旦所有线程完成，就会发送一封电子邮件，其中包含该运行的所有统计信息和状态。

我正在使用 dequeue_nb，我认为这会有所帮助，但没有运气。

性能冲击似乎在排队。在寻找提高性能的技巧时，我遇到了几篇文章，说 perl 线程不好，可以使用 coro、POE、Anyevent、IO:async 等。

这似乎不是一个“事件”问题，所以我认为 AnyEvent 或 POE 不会是我所看到的方式，coros 似乎一次只使用一个 CPU，所以我不确定这也行。我考虑过使用它们的组合，但后来我的头开始受伤。有没有人对如何修复/排除我的脚本或如何实现其他模块之一有任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:17:31.887

并行性的一个问题是*同步*。它是性能杀手，很糟糕，如果可能的话应该避免。

## 运维架构

让我们看看你的架构：

```
+--------------+--------------+
|   Input 1    |   Input 2    |
+--------------+--------------+
|           QUEUE A           |
+--------------+--------------+
|   Scrub 1    |   Scrub 2    |
+--------------+--------------+
|           QUEUE B           |
+---------+---------+---------+
| Compare | Compare | Compare |
+---------+---------+---------+ 
```

### 讨论

队列 A 必须跨四个线程同步；穿过 5-6 的队列 B。任何时候只有一个线程可以访问队列，所以大部分时间你的线程将*等待，不工作*！

## 并行管道架构

稍微不同的架构可能如下所示：

```
+-----------+    +-----------+
|  Input 1  |    |  Input 2  |
+-----------+    +-----------+
| QUEUE  1A |    | QUEUE  2A |
+-----------+    +-----------+
|  Scrub 1  |    |  Scrub 2  |
+-----------+    +-----------+
| QUEUE  1B |    | QUEUE  2B |
+-----+-----+    +-----+-----+
| Cmp | Cmp |    | Cmp | Cmp |
+-----+-----+    +-----+-----+ 
```

### 讨论

在这里，A 队列只与两个线程相关联（-> 等待较少），B 队列只与三个线程相关联。对于类似的输入大小/复杂性，这种架构应该执行得更快。如果 Input 2 相当短，整个 Pipeline 2 将在 Pipeline 1 完成一半之前运行。但是，它比为每个管道使用单个进程要好得多。

## 草坪洒水器架构

### 概念

更好的架构会尝试将进程的输出分布到多个队列中。（相反，当队列为空时，让线程从多个队列中获取输入是不好的。）

每个队列写入应该转到不同的队列：

```
 +-----------+   +-----------+
  |  Input 1  |   |  Input 2  |
  +-----------+   +-----------+
        |      \ /      |
  +-----------+   +-----------+
  | QUEUE  1A |   | QUEUE  2A |
  +-----------+   +-----------+
  |  Scrub 1  |   |  Scrub 2  |
  +-----------+   +-----------+
        / | \ \   / / | \      

+-------+-------+-------+-------+
| Q. 1B | Q. 2B | Q. 3B | Q. 4B |
+-------+-------+-------+-------+
|  Cmp  |  Cmp  |  Cmp  |  Cmp  |
+-------+-------+-------+-------+ 
```

这可以确保每个线程具有相同的工作负载，但不能确保所有线程同时完成。

### 讨论

所有队列在 3 个线程之间共享。问题是两个线程在写入队列时会相互阻塞。如果 Queue 写入访问之间的时间明显大于写入持续时间，这应该没有问题，否则可以混入第二种架构。

因此，这种架构是否有意义取决于您的确切要求。

对于均匀大小的输入，它的速度较慢，但​​在不规则输入上表现更好。

## 附录

### 实施时：

使用什么框架是次要的架构。如果您只传递文本字符串，我强烈建议您使用管道。如果您必须传递 Perl 数据类型或对象，您可能必须接受使用真实队列的额外开销：将非共享变量添加到队列时，还必须进行深层复制（请参阅@Leon Timmermans 答案）到所有同步开销。

### 关于可扩展性：

架构 1 和 3 的线程数不固定。我强烈建议使用这种灵活性来对不同的组合进行基准测试。经验法则是您应该使用*n*到*2n 个*线程，其中 n 是处理器（或硬件线程）的数量。这可以看作是一个阶段的线程的最大合理数。除此之外，您只会受到内存损失而没有加速。当一个阶段处理输入的速度比提供的速度快时，可能会更早地达到性能饱和点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:51:06.813

您将什么样的数据放入队列中？AFAIK 简单数据比复杂结构更便宜，因为它需要被克隆并至少复制两次。我一直在计划编写一个更快的队列实现（实际上大部分工作已经完成），但还没有发布。

# ruby-on-rails - 使用 sqlite3 在 rails 3.1.4 中联合的正确方法？

> ID：11727656
> 
> 赞同：0
> 
> 时间：2012-07-30T18:45:08.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有 3 个表`payment_logs`，在我们`sourcings`的`purchasings`rails 应用程序中。payment_log 属于采购或采购，但不能同时属于两者。采购和采购都有一个col `project_id`。我们要提取`all payment_logs with its project_id = project_id_search`（从搜索页面传递的 project_id_search）。我们还需要一个 ActiveRecord 作为返回的结果集。这是单个查询，假设 payment_logs 保存 ActiveRecord 结果集：

1.  使用其采购的 project_id = project_id_search 选择所有 payment_logs

    payment_logs = payment_logs.joins(:sourcing).where("sourcing.project_id = ?", project_id_search)

2.  使用其购买的 project_id = project_id_search 选择所有 payment_logs

    payment_logs = payment_logs.(:purchasing).where("purchasings.project_id = ?", project_id_search)

我们需要联合 1 和 2 以获取所有 project_id = project_id_search 的 payment_logs。实现它的正确方法是什么？我们没有在 rails 中找到 union 并且 find_by_sql 返回了一个不是我们想要的数组。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:40:36.913

```
payment_logs.where(["
  payment_logs.sourcing_id IN (
                                SELECT id FROM sourcings WHERE sourcings.project_id = ? 
                              ) 
  OR payment_logs.purchasing_id IN 
                              (
                                SELECT id FROM purchasings WHERE purchasings.project_id = ? 
                              )", project_id_search, project_id_search]) 
```

很多 SQL，但它应该可以工作

选项 2（两个 SQL 请求...）：

```
payment_logs = []
payment_logs << PaymentLog.joins(:sourcing).where("sourcings.project_id" => project_id_search)
payment_logs << PaymentLog.joins(:purchasing).where("purchasings.project_id" => project_id_search)
payment_logs.uniq! #In case some records have both a sourcing and a purchasing 
```

选项 3，使用`squeel`gem：[https ://github.com/ernie/squeel](https://github.com/ernie/squeel)

```
PaymentLog.where{(source_id.in Sourcing.where(:project_id => project_id_search)) | (purchasing_id.in Purchasing.where(:project_id => project_id_search))} 
```

我喜欢这个解决方案 :) 此外，无论何时您对生成的 SQL 有疑问，从控制台或其他任何地方，您都可以在 ActiveRecord 查询的末尾添加 .to_sql 以仔细检查生成的 SQL

# javascript - Javascript：获取页面元素的内容并将其用作变量？

> ID：11727657
> 
> 赞同：1
> 
> 时间：2012-07-30T18:45:08.720
> 
> 标签：javascript, element, countdown

所以我在一个页面上有两个脚本：

*   第一个从数组中随机选择一个数字并将其插入一个名为“数字”的元素中。
*   第二个是倒计时脚本，它从被解释为分钟和秒的两个变量开始倒计时。一旦倒计时达到零，它就会播放声音。

目前，第二个脚本都是手动设置的，因此分钟和秒数被硬编码到脚本本身中。我希望第二个脚本采用第一个脚本插入页面的任何数字，并将其用作其变量。

这是我希望它如何工作的更好示例：

您加载页面，它告诉您只有 (X) 分钟空闲（X = 由第一个脚本插入），无论 (X) 是什么，都充当第二个脚本中的“分钟”变量，现在在页面其他地方显示从 (X) 分钟开始的倒计时。

第一个脚本的输出插入到：

```
<span id="minutes"></span> 
```

这是第二个脚本的代码（需要更改的那个）：

```
var interval;
var minutes = 5;
var seconds = 0;
window.onload = function() {
    countdown('countdown');
}

    function play(file) {
var embed = document.createElement("embed");

embed.setAttribute('src', file);
embed.setAttribute('hidden', true);
embed.setAttribute('autostart', true);

document.body.appendChild(embed);
}

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element);
        if(seconds == 0) {
            if(minutes == 0) {
                el.innerHTML = "Time's up!";                    
                clearInterval(interval);
    play('alarm.mp3');
                return;
            } else {
                minutes--;
                seconds = 60;
            }
        }
        if(minutes > 0) {
            var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
        } else {
            var minute_text = '';
        }
        var second_text = seconds > 1 ? 'seconds' : 'second';
        el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
        seconds--;
    }, 1000);
} 
```

我试过改变

```
var minutes = 5;
var seconds = 0; 
```

到

```
var minutes = document.getElementById(minutes);
var seconds = 0; 
```

（第二个脚本在第一个脚本之后运行）

...但它似乎不起作用，只是从“空”分钟开始。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:47:30.653

## 解决方案：

```
var minutes = Number(document.getElementById('minutes').innerHTML); 
```

## 解释：

您可能是指字符串分钟：（添加引号）

```
var minutes = document.getElementById('minutes');
var seconds = 0; 
```

但这会返回 DOM 对象。innerHTML 将返回`<span>`标签内的内容

```
var minutes = document.getElementById('minutes').innerHTML; 
```

但是你需要意识到它在任何地方都是一个字符串，所以你可能已经进行了隐式类型转换的地方`string + number`现在必须显式地进行，或者更改代码以允许隐式转换，或者在你处理它时首先实例化分钟。

因此我们使用`Number()`

# perl - ActivePerl 和 PPM

> ID：11727671
> 
> 赞同：1
> 
> 时间：2012-07-30T18:46:37.253
> 
> 标签：perl, activeperl

我在运行 XP 的 Windows 32 位机器上安装了 ActivePerl 5.14.2。我的问题是我正在尝试使用 PPM 安装一些模块，但没有成功。

根据 ActiveState 的网站，从他们的存储库中安装模块所需要做的就是 " `ppm install module name`" ，例如：`http://code.activestate.com/ppm/Template-Toolkit/`

每次我尝试这个或任何其他模块时，我都会得到：“ `No Perl script found in input`”

即使我只做“ `ppm`”，我也会收到相同的消息，即使 GUI 应该运行。

当我从开始菜单使用 GUI 运行 PPM 时，出现此错误：“ `Failed 500 Can't connect to ppm4.activestate.com:8080 (connect: timeout)`”</p>

我虽然这可能是我的连接，所以`cmd.exe`我使用了 set`HTTP_PROXY`命令然后尝试了`ppm install`，但仍然没有运气。那么有什么办法可以安装这些模块吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T22:12:30.030

从命令提示符调用`cpan`提示符。转到`cmd`并只需键入`cpan`. 如果您成功输入`cpan`提示它们，则您的 Perl 安装可能没有问题。要从 cpan 提示符安装模块，只需使用

```
cpan>install Module::Name 
```

下面的屏幕截图显示了安装模块的命令`Net::Stomp`

![在此处输入图像描述](../Images/dbe88de6c2ea29e8885ba603a47cc655.png)

如果以上都不起作用，请检查您的 FTP 数据和连接端口是否需要添加到 Windows 防火墙例外（端口 20（FTP 命令端口）和 21（FTP 数据端口））。

或者（如果您不想将端口 20 21 添加到异常中），您可以转到 cpan 提示符并使用`ftp_proxy`by

```
cpan> o conf ftp_proxy http://your.ftpproxy.com 
```

然后发出安装命令。或者您可以更新您的 ../CPAN/config.pm 文件以对`ftp_proxy`参数进行永久更改。

下一步是尝试将 FTP_PASSIVE 模式设置为 1。默认情况下，此`libnetcfg`配置设置为 0。要更改此查找`libnetcfg.bat`文件（应位于 C:\Perl\bin 某处），请在编辑器中打开该文件并替换

```
ftp_int_passive      0 
```

至

```
ftp_int_passive      1 
```

再次，查看您的超时错误，您的网络似乎阻止您访问 CPAN ftp 镜像，如果您在公司 VPN 中，这通常会发生。对此的解决方案只能是代理服务器。

# mysql - MySQL连接表与其他记录的字符串

> ID：11727682
> 
> 赞同：2
> 
> 时间：2012-07-30T18:47:19.410
> 
> 标签：mysql

你能帮我把“ `preference`”表中的所有记录都变成返回结果`string`中的一个吗？`p.data`

我只能想到`CONCAT`，但我的内部连接只选择了 1 条记录。

**示例查询**

```
SELECT 
    u.userid, 
    p.data

FROM user u

INNER JOIN preference p ON (
  p.userid = u.userid
)

WHERE u.userid = 1 
```

**期望的输出**

```
userid  |  data
--------------
1       | 1,2,3,4,5
2       | 1,2,3,4
3       | 1,2,3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:49:23.030

MySQL 正是[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)执行这个功能：

```
SELECT
  u.userid,
  GROUP_CONCAT(p.data) AS data
FROM
  user u
  INNER JOIN preference p ON u.userid = p.userid
WHERE u.userid = 1
GROUP BY u.userid 
```

由于您的`WHERE`条款，您只能获得一排。删除该`WHERE`子句以返回所有用户的行。`LEFT JOIN`如果要返回表中没有相关行的用户，请将其切换为 a `preference`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:50:02.030

没关系你的内部加入只加入一个领域。您必须添加分组依据

```
SELECT 
    u.userid, 
    GroupConcat(p.data) as Data

FROM user u

INNER JOIN preference p ON (
  p.userid = u.userid
)
--WHERE u.userid = 1 With this you not gonna get the desired output.
group by u.userId 
```

# php - 输入类型密码值？

> ID：11727686
> 
> 赞同：1
> 
> 时间：2012-07-30T18:47:32.767
> 
> 标签：php, javascript, html, forms, input

您好，我对以下问题有疑问：

我有两个输入字段。一个是登录用户名，即另一个是密码。现在我想设置这两个字段的值。我的问题是密码。我打算意识到以下内容：

HTML：

```
<input 
type="text"
id="log_password" 
name="log_password" 
value="<?php echo ($log_password);?>" 
onfocus="if(this.value=='Password')this.value='';this.type='password'"
onblur="if(this.value=='') this.value=this.defaultValue;"/> 
```

PHP：

```
$log_password = "Password";

if(isset($_POST['submit'])){

    $log_password = $_POST['log_password'];

        if(empty($log_password)){
            $errors['log_password'][]="No password given";
            $_POST['log_password'] = "Password";
            $log_password = $_POST['log_password'];
    }       
} 
```

问题是这一直有效到将提交表单的地步。如果出现错误，由于`type="text"`标签，密码再次可见。那么我该如何解决这个问题，如果有人可以帮助我，我真的很感激。多谢。

更新：

```
<div class="small2"> 
<?php if (!isset($errors['log_password'])):?>
<input 
type="<?= $passwordVal == "" ? "text" : "password" ?>" 
id="log_password" name="log_password" 
value="<?php echo ($log_password);?>" 
placeholder="Passwort" 
onfocus="if(this.value=='Passwort')this.value=''" 
onblur="if(this.value=='') this.value=this.defaultValue;"/>
<?php endif;?>

<?php if (isset($errors['log_password'])):?>
<input class="log-err" 
type="<?= $passwordVal == "" ? "text" : "password" ?>" 
id="log_password" name="log_password" 
value="<?php echo ($log_password);?>" 
placeholder="Passwort" 
onfocus="if(this.value=='Passwort')this.value=''" 
onblur="if(this.value=='') this.value=this.defaultValue;"/>
<?php endif;?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:48:42.750

采用

```
<input type="password" placeholder="Password" ... /> 
```

如果您***必须***将其用作文本字段（为了显示“密码”），您应该使输入类型有条件：

```
<?php
    // in case of error, the value that the user entered will be passed back via GET (POST?)
    $passwordVal = isset($_GET['log_password']) ? $_GET['log_password'] : "";
?>

<!-- if ($passwordVal) is an empty string, type is "text", else type is "password". -->
<input type="<?= $passwordVal == "" ? "text" : "password" ?>" ... /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:21:55.080

正如马特正确建议的那样，您可以使用**占位符**标签。

但是要让占位符起作用，您不能设置“值”。解决方案当然是使用条件类型，或者使用 jQuery 框架。你可以做这样的事情..

```
<?
    $your_pass = 'bla-bla-bla';
?>
<!DOCTYPE html>
<html>
    <head>
        <title>Test page</title>
        <!-- Load jQuery library from Google repository -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>
    <body>
        <form action="#">
            <input type="password" name="log_password" id="log_password" />
        </form>
    </body>
    <script>

        $(document).ready(function() {
            /* execute this by jQuery when document is ready */

            /* must use traditional javascript to change input's type attribute */
            document.getElementById('log_password').setAttribute('type', 'text');

            /* set empty value attribute of input with id "log_password" */
            $('input#log_password').attr('val','');

            /* set placeholder attribute */
            $('input#log_password').attr('placeholder','Password');

            $('input#log_password').focus(function(){
                /* when input with id log_password is focus.. */
                $(this).attr('placeholder','');

                /* set the value as you prefer... */
                $(this).val('<?=$your_pass?>');

                /* reset type of input to password */
                document.getElementById('log_password').setAttribute('type', 'password');
            });
        });
    </script>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:51:12.737

我认为，如果有错误，您需要将类型从“文本”更改为“密码”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T18:58:03.190

编写你认为是函数的代码，然后通过加载页面、焦点事件和模糊事件调用它。Matt 的解决方案很好，但我认为它仅限于支持 HTML5 的浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T19:53:04.023

文档上的脚本如何准备检查 log_password 值是否为密码并更改类型。

哦，抱歉，请参阅 deste 的帖子 +1

# opendir - 按字母倒序从目录中返回固定数量的项目

> ID：11727687
> 
> 赞同：0
> 
> 时间：2012-07-30T18:47:36.057
> 
> 标签：opendir

我在按日期标记的目录中有文件（例如，2012-07-05.xls、2012-07-04.xls），我只想列出（并链接）该目录中的最后 10 个文件，从最新的。我可以按正确的顺序轻松生成列表，但无法弄清楚如何将其限制为 10（也不会返回目录的“.”和“..”条目）。

这就是我现在所拥有的。接受所有建议。

```
<?php
$path = $_SERVER[DOCUMENT_ROOT]."/path/";
$dh = @opendir($path);

$files = array();
while (false !== ($file = readdir($dh))) {
            array_push($files, $file);
        }

rsort($files);
foreach ($files as $file){
    echo "<li><a href=\"$file\">";
    echo($file)."</a></li>";

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:11:59.887

如果你使用[scandir](http://www.php.net/manual/en/function.scandir.php)，你可以添加一个排序参数作为第二个参数。然后你可以用[array_slice](http://php.net/manual/en/function.array-slice.php)拼接数组来得到你想要的元素。

$array = scandir($path); $files = array_slice($array, 0, 10);

获取您想要的文件或跳过前 2 个元素，因为 . 和 .. 你可以做 array_slice($array, 2, 10);

# iphone - 创建许多 UIColors 的最佳实践？

> ID：11727691
> 
> 赞同：2
> 
> 时间：2012-07-30T18:48:08.883
> 
> 标签：iphone, objective-c, ios, memory-management

我有一个表格视图，其中包含数百个使用该`drawRect:`方法绘制的自定义绘制的 UITableViewCell。这些单元格都共享相同的颜色样式。所以，在每个`drawRect:`，我做这样的事情：

```
-(void)drawRect:(CGRect)rect
{
    UIColor *bgColor = [UIColor colorWithWhite:0.9 alpha:1.0];
    UIColor *textColor = [UIColor colorWithWhite:0.98 alpha:1.0];
    UIColor *strokeColor = [UIColor colorWithWhite:0.6 alpha:1.0];
    /* use colors */
} 
```

因此，当您向下滚动表格时，它会被调用数百次。不过，我不确定我正在做的事情是否有效。有没有更好的方法来创建这些颜色，也许有一些可重用性？我应该将这些颜色缓存在某个全局变量中吗？我正在做的事情是昂贵的还是微不足道的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:00:16.977

首先，您应该使用 Instruments 进行分析，以查看这些调用是否花费了大量时间。如果是这种情况，则将它们设为静态变量并在首次使用时对其进行初始化：

```
-(void)drawRect:(CGRect)rect
{
    static UIColor *bgColor;
    static UIColor *textColor;
    static UIColor *strokeColor;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        bgColor = [UIColor colorWithWhite:0.9 alpha:1.0];
        textColor = [UIColor colorWithWhite:0.98 alpha:1.0];
        strokeColor = [UIColor colorWithWhite:0.6 alpha:1.0];
    });

    /* use colors */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:21:31.320

> 有没有更好的方法来创建这些颜色，也许有一些可重用性？

您的单元格可以包含一个`MONSharedCellStuff`对象，该对象可以由创建单元格的控制器创建和设置。接口可以采用以下形式：

```
@interface MONSharedCellStuff : NSObject

@property (nonatomic, copy, readonly) UIColor * bgColor;
@property (nonatomic, copy, readonly) UIColor * textColor;
@property (nonatomic, copy, readonly) UIColor * strokeColor;

@end 
```

你也可以使用这个实例来共享其他不可变的东西（常见的图像或字体）。

或者，单元可以在初始化期间自己创建和保存它们（尽管这比正确共享需要更多的时间和内存）。这对于简单的情况很好。

有了这么多的细胞，有效地重用细胞很重要。

> 我应该将这些颜色缓存在某个全局变量中吗？

不，创建单元的控制器可能是缓存和创建它们的好地方。

> 我正在做的事情是昂贵的还是微不足道的？

请参阅内存和 CPU 分析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T09:18:36.867

为此，我写了[一篇](http://www.alexedge.co.uk/blog/2013/07/08/speeding-up-uicolor-categories/)关于使用 UIColor 类别的博客文章。

# java - JUnit RemoteTestRunner NoClassDefFoundError Junit4 Eclipse 3.7.2

> ID：11727692
> 
> 赞同：0
> 
> 时间：2012-07-30T18:48:14.170
> 
> 标签：java, junit

我正在尝试将 JUnit 测试添加到我现有的 Eclipse 3.7.2 项目中，似乎 JUnit 没有正确添加到项目中。我试图手动添加 JUnit jar。我尝试了其他几种运行配置修改，它们都导致相同的错误。当我添加 JUnit 测试时，我创建的新项目也会出现此错误。

```
java.lang.NoClassDefFoundError: org/eclipse/jdt/internal/junit/runner/RemoteTestRunner
Caused by: java.lang.ClassNotFoundException: org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:29:57.503

您是否将 Eclipse 安装到您无法写入的目录中？Windows 7 UAC 可以防止某些文件被写入，尤其是在 C:\Program Files.... 最好将 Eclipse 安装在您可以写入的目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:27:15.363

这可能是由类路径问题引起的。首先确保您的构建路径中肯定有 junit.jar。

在 Eclipse Indigo 中：转到“Package Explorer”右键单击 > 'Build Path' > 'Configure Build Path' > 在 Libraries 选项卡中。那里应该是junit.jar。

通常在 Eclipse 中创建测试用例会将这个 jar 添加到构建路径中。

如果您有构建路径冲突，也可能发生相同的异常。转到 Window > Show View > 'Markers' 会显示项目的问题。（就我而言，有一个循环引用）

# node.js - 获取 req 参数中的文件数，bodyParser，Express，NodeJS

> ID：11727696
> 
> 赞同：0
> 
> 时间：2012-07-30T18:48:38.843
> 
> 标签：node.js, express

使用 Express 和 bodyParser 将多个文件发布到 nodejs 应用程序。

每个请求中文件的数量都会发生变化。需要获取在服务器上发布的文件数。

我试过使用

```
req.files.length 
```

但它给出了未定义的。我如何知道发布请求中发布的文件数量？另外如何遍历每个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:05:20.063

回答我自己。

它应该像这样迭代

```
for (x in files){
    //code for handling each object in json.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:47:40.263

`name`您可以使用 的 获取和迭代文件集合的长度`<input>`：

```
// example: <input type="file" name="images" multiple>

req.files.images.length;

req.files.images.forEach(function (file, i) {
    // ...
}); 
```

[您可以在Connect 存储库](https://github.com/senchalabs/connect)中找到这样的示例：[`examples/upload.js`](https://github.com/senchalabs/connect/blob/master/examples/upload.js)

# python - 错误：无效模式 ('r') - 无法在 Python 2.7 中使用 LingPy 进行同源分析

> ID：11727701
> 
> 赞同：0
> 
> 时间：2012-07-30T18:48:50.527
> 
> 标签：python, compiler-errors, linguistics

我正在使用适用于 Python 2.7 的 LingPy 1.0.1 库，尝试对我创建的单个制表符分隔的西班牙语-英语单词列表进行同源分析。该列表名为 SE.lxs，如下所示：

```
ID  Words   Spanish
1   dog     pero
2   cat     gato
3   water   agua
4   table   meza
5   hand    mano
6   red     rojo
7   blue    azul
8   green   verde
9   person  persona
10  girl    chica 
```

我认为这是此处定义的适当格式：http: [//lingulist.de/lingpy/docu/lingpy.lexstat.LexStat.html](http://lingulist.de/lingpy/docu/lingpy.lexstat.LexStat.html)

但是，当我运行命令时：

```
lex = LexStat(get_file('C:\Python27\SE.lxs')) 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    lex = LexStat(get_file('C:\Python27\SE.lxs'))
  File "C:\Python27\lib\site-packages\lingpy-1.0.1-py2.7-win32.egg\lingpy\lexstat.py", line 62, in __init__
    self._init_lxs(infile)
  File "C:\Python27\lib\site-packages\lingpy-1.0.1-py2.7-win32.egg\lingpy\lexstat.py", line 278, in _init_lxs
    txt = array(loadtxt(infile),dtype="str")
  File "C:\Python27\lib\site-packages\lingpy-1.0.1-py2.7-win32.egg\lingpy\algorithm\misc.py", line 454, in loadtxt
    f = open(infile)
IOError: [Errno 22] invalid mode ('r') or filename: 'C:\\Python27\\lib\\site-packages\\lingpy-1.0.1-py2.7-win32.egg\\lingpy\\test/tests/lxs/C:\\Python27\\SE.lxs' 
```

可以在这里找到问题的图片：http: [//i.imgur.com/XdLig.png](http://i.imgur.com/XdLig.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:16:46.710

实际上，get_file（归咎于我的错误文档）是一个简单的快捷功能，可以帮助我访问文本文件夹中的一些测试模块。因此，如果您想对某些语言进行分析，则不需要 get_file 参数。只需确保 lxs 文件位于加载库的文件夹中。我不确定 Windows，但在 Linux 上这通常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:09:13.700

Wooble 是对的——显然 .lxs 文件的位置必须在以下两个目录中（对于 Python 2.7）

```
C:\Python27\Lib\site-packages\lingpy-1.0.1-py2.7-win32.egg\lingpy\test\tests
C:\Python27\Lib\lingpy-1.0.1\lingpy\test\tests 
```

# jquery - 隐藏行后 TableSorter 重新分页

> ID：11727704
> 
> 赞同：1
> 
> 时间：2012-07-30T18:49:09.710
> 
> 标签：jquery, tablesorter

在四处寻找并没有找到答案之后，就到这里了。

我有一个用tablesorter 分页的表格，我将在底部添加一些按钮，单击这些按钮将隐藏表格中的某些行（即过滤它）。

有没有办法在行被隐藏后重新分页（即刷新它），以便表保持分页，但行仍然隐藏？在隐藏行的那一刻，第一页缺少行，并且后续页面的行不隐藏。

# matlab - 从现有矩阵的列创建新向量

> ID：11727706
> 
> 赞同：0
> 
> 时间：2012-07-30T18:49:13.220
> 
> 标签：matlab, vector, matrix, assign

我想从现有矩阵的列中创建新向量。我的代码如下所示：

```
Matrix=[1 2 3;4 5 6;7 8 9];
A=Matrix(:,1);
B=Matrix(:,2);
C=Matrix(:,3); 
```

我发现这段代码不是很优雅，特别是如果我有很多列，这就是为什么我要寻找类似的东西：

```
[A B C]=Matrix; 
```

但是Matlab说矩阵不能分配给多个值。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:58:53.870

使用[mat2cell](http://www.mathworks.nl/help/techdoc/ref/mat2cell.html)拆分原始矩阵并[处理](http://www.mathworks.nl/help/techdoc/ref/deal.html)将拆分后的数据分配给结果变量 A、B 和 C：

```
m = mat2cell(Matrix,size(Matrix,1),ones(1,size(Matrix,2)))
[A,B,C] = deal(m{:}) 
```

不幸的是，需要中间变量（但是，如果您喜欢单行，则可以使用 FEX 函数[dealcell](http://www.mathworks.com/matlabcentral/fileexchange/10162-dealcell)解决此问题）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T19:03:15.080

你为什么想做这个？（只是好奇）Matlab 旨在处理矩阵。因此命名为 Matrix 实验室......但遗憾的是它仍然是可能的。

我确信有一个更优雅的解决方案，但我会让你思考一下。这应该让你继续前进。

```
Matrix=[1 2 3;4 5 6;7 8 9];

for i=1:size(Matrix,2) %number of rows
  eval(sprintf('A%d = Matrix(:,i)', i));
end 
```

A1 =

```
 1
 4
 7 
```

A2 =

```
 2
 5
 8 
```

A3 =

```
 3
 6
 9 
```

# android - 如何更改日期选择器中的文本大小？

> ID：11727707
> 
> 赞同：12
> 
> 时间：2012-07-30T18:49:14.833
> 
> 标签：android, android-layout, android-widget, android-datepicker

datepicker 中的默认文本大小对我的应用程序来说太大了。[我已经看到了一种建议在此处](https://stackoverflow.com/questions/8837480/android-honeycomb-datepicker-text-color)更改它的方法，但是四处寻找嵌套在 datepicker 类中的文本视图似乎很笨重且容易出错。

有更好/更清洁的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-05-07T10:10:57.470

将主题设置为`DatePicker`布局并添加`android:textSize`到它对我有用。

在您的布局的 xml 中添加一个`DatePicker`应用主题，如下所示 -

```
<DatePicker xmlns:android="http://schemas.android.com/apk/res/android"
            android:theme="@style/NumberPickerStyle"
            android:datePickerMode="spinner"
            android:calendarViewShown="false"
            android:layout_gravity="center_horizontal"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"/> 
```

然后像这样定义`NumberPickerStyle`in`styles.xml`指定`android:textSize`-

```
<style name="NumberPickerStyle">
        <item name="android:textSize">@dimen/number_picker_text_size</item>
</style> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-08T05:36:51.693

更改 datepicker/timepicker/numberpicker 字体大小的最简单方法是自定义主题。

在样式文件中，通过以下方式设置默认字体大小。

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- Customize your theme here. -->
    <item name="android:textSize">22sp</item>
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-23T17:04:27.350

肖恩的方法在选择器本身的 UI 中产生了一些故障，以防有多个选择器，我认为将文本大小应用于选择器下的所有组件并不完美。下面是我用过的，它完美无缺，没有任何 UI 故障。

```
<style name="PickerTheme" parent="Theme.AppCompat.NoActionBar">
    <item name="android:editTextStyle">@style/PickerEditText</item>
</style>

<style name="PickerEditText" parent="ThemeOverlay.AppCompat.Dark">
    <item name="android:textSize">24sp</item>
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:27:42.160

使用以下代码：

```
ViewGroup childpicker = (ViewGroup)datePicker.findViewById(Resources.getSystem().getIdentifier("month", "id", "android"));

EditText mornthEt = (EditText)childpicker.getChildAt(1);// month widget

//change textsize and textcolor for mornthEt

mornthEt.setTextSize(30);

mornthEt.setTextColor(Color.GREEN); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-02T06:37:19.883

肖恩的代码有效。但它也在改变所有其他组件的字体大小（textViews，按钮等......）所以这是解决方案。

为时间选择器创建不同的样式并将其用于时间选择器主题。

```
<style name="my_time_picker_style">
    <item name="android:textSize">24sp</item>
</style> 
```

并在你的时间选择器上使用它

```
android:theme="@style/my_time_picker_style" 
```

看视频，我是怎么做的[https://youtu.be/JMJ2ujhk9c0](https://youtu.be/JMJ2ujhk9c0)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-05T09:28:12.547

使用下面的代码

```
 DatePicker picker = (DatePicker)findViewById(R.id.dp_date);
    ViewGroup childpicker

     = (ViewGroup)
    findViewById(Resources.getSystem().getIdentifier("month" /*rest is:
    day, year*/, "id", "android"));

    EditText textview = (EditText)
    picker.findViewById(Resources.getSystem().getIdentifier("timepicker_input",
    "id", "android"));
    textview.setTextSize(30);
    textview.setTextColor(Color.GREEN); 
```

# android - tileMode="repeat" 在 Android 4.1 果冻豆上损坏

> ID：11727712
> 
> 赞同：1
> 
> 时间：2012-07-30T18:49:31.150
> 
> 标签：android, drawable, android-4.2-jelly-bean

我的应用在几个地方使用了平铺背景，当我在 Android 4.1 Jelly Bean 模拟器中进行测试时，这些背景根本不会出现。我试着放一张普通的图片，它显示得很好。所以我想知道 tileMode="repeat" 是否已被弃用？虽然我在网上找不到任何这样说的信息。这是我的背景 xml 文件：

反向重复.xml

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:src="@drawable/greenchecker" 
android:tileMode="repeat" /> 
```

这是我在按钮中使用它的地方：

greenchecker_btn.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="false" android:state_enabled="true"
          android:state_focused="false" android:drawable="@drawable/backrepeat" />
    <item android:state_pressed="true" android:state_enabled="true"
          android:drawable="@drawable/backrepeat_over" />
    <item android:state_pressed="false" android:state_enabled="true"
          android:state_focused="true" android:drawable="@drawable/backrepeat" />
    <item android:state_pressed="false" android:state_enabled="false"
          android:state_focused="false" android:drawable="@drawable/backrepeat" />
    <item android:state_pressed="false" android:state_enabled="false"
          android:state_focused="true" android:drawable="@drawable/backrepeat" />

</selector> 
```

有人知道为什么这在 4.1 中停止工作了吗？据我所知，适用于所有其他版本。谢谢！

编辑 -

似乎通过用 png 替换 gif 平铺文件解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:46:57.327

似乎通过用 png 替换 gif 平铺文件解决了这个问题。

# jquery - Ruby on rails - 使用 jquery GET 方法更新表

> ID：11727719
> 
> 赞同：0
> 
> 时间：2012-07-30T18:50:20.910
> 
> 标签：jquery, ruby-on-rails, ruby, ajax

我正在使用 Rails 和 jquery。

我的问题是当我尝试通过使用 get 方法发送参数来更新资源表时，它不起作用。

我的控制器

```
class ResourcesController < ApplicationController
       ...

       # PUT /resources/18
       def update
          @resource.update_attributes(params[:resource])
       end

       ...
end 
```

文件

```
$.get("/resources/18", {color: blue, size: 15}, function(data)
{

}); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:55:39.237

该`update`操作需要 a `PUT`，而不是 a `GET`。所以你必须做一个不同的请求。

```
$.ajax({
  type: 'put',
  url: '/resources/18', 
  data: {resources: {color: blue, size: 15}}
}); 
```

# css - 如何更改 HTML5 表单验证消息中的图像？

> ID：11727721
> 
> 赞同：6
> 
> 时间：2012-07-30T18:50:32.930
> 
> 标签：css, html, google-chrome, webkit, validation

使用[这篇文章](http://trac.webkit.org/wiki/Styling%20Form%20Controls#)，我正在更改一些 HTML5 表单验证弹出窗口的样式。但是，除了我添加的新的红色 X 之外，我的错误弹出窗口在错误中仍然有默认的橙色感叹号。如何摆脱橙色感叹号（见下图）。到目前为止，我只在 Chrome 中进行测试。

![示例错误消息](../Images/bc09ad9d064253c4a6277f55d5d40526.png)

这是我在那篇文章中使用的 CSS：

```
::-webkit-validation-bubble-message 
{
    color: #eee;
    background: #000;
    border-color: #444;
    -webkit-box-shadow: 4px 4px 4px rgba(100,100,100,0.5);
}

::-webkit-validation-bubble-message:before {
    content: "";
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-right: 4px;
    background: url(/myPath/myImage.png)
}

::-webkit-validation-bubble-arrow {
    background: #000;
    border-color: #444;
    -webkit-box-shadow: 0 0 0 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T23:22:59.490

尝试：

```
input::-webkit-validation-bubble-icon {
display: none;
} 
```

或者，当然：

```
input::-webkit-validation-bubble-icon {
background: url(http://google.com/favicon.ico);
} 
```

Jsfiddle在这里：http: [//jsfiddle.net/xhqhV/](http://jsfiddle.net/xhqhV/)

# uitableview - IB中的UITableViewController tableView Header

> ID：11727722
> 
> 赞同：0
> 
> 时间：2012-07-30T18:50:43.083
> 
> 标签：uitableview

我已经搜索过了，找不到任何解释。我不能成为第一个遇到这个问题的人......在这里讨论 tableView 页眉和页脚，而不是部分页眉。

用 XIB 创建了一个 UITableViewController。在 IB 中的 tableView 中添加了一个 UIView 作为标题。在将 tableView 添加到 UIViewController 而不是包装在 UITableViewController 之前，我已经这样做了一百次。当我构建时，标题视图不会出现。如果我在 viewDidLoad 中滚动我自己的标题 UIView，它确实会出现。

因此，我将标题 UIView 移动到 XIB 文件的根级别。将其连接到 IBOutlet 属性。将其分配给 viewDidLoad 中的 self.tableView。没有什么。实际上，头部 UIView 是 nil。就好像它并没有真正从笔尖加载。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:30:44.640

嗯，你每天都会学到新东西。我正在使用 [[aTVC alloc] init] 初始化 UITableViewController 实例这对于普通的 UIViewControllers 工作正常，但是如果您将它与 UITableViewController 一起使用而没有专门的 initWithNibName 它似乎有自己的想法，并创建了 self.tableView稀薄的空气。

因此，当从 NIB 分配 UITableViewController 时，请使用 initWithNibName：

希望这可以减轻其他人的胃灼热。

# sql - sql查询返回多个日期，只需要最新日期

> ID：11727727
> 
> 赞同：1
> 
> 时间：2012-07-30T18:51:04.857
> 
> 标签：sql, sql-server, tsql

我有一个查询，它按名字、姓氏、用户 ID 和他们完成事件的日期返回用户。

我希望查询每个用户只返回一行，但有些用户在多个日期完成了相同的事件。我不能使用 distinct 因为日期不同，并且出于同样的原因我不能使用 group by。

如何让查询仅返回事件完成的最新日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:52:18.677

您应该使用`group by`, 并`MAX`在日期字段上执行

就像是...

```
Select firstname, lastname, userid, max(datecompleted) 
from events
group by firstname, lastname, userid 
```

取决于您的数据结构。

# c# - 在 Windows8 Metro 应用程序上执行 SSL

> ID：11727728
> 
> 赞同：2
> 
> 时间：2012-07-30T18:51:10.630
> 
> 标签：c#, ssl, microsoft-metro

我正在尝试实现一个简单的 C# XMPP 客户端，它可以与 facebook 聊天服务器交换消息。在 facebook 聊天 api 页面（[https://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)）上，它指定需要通过 TLS 发送消息才能成功设置，这导致了我的问题。我无法在 Win8 Metro 中成功执行 SSL/TLS。

所以为了在 Win8 Metro 中做 SSL，我基本上遵循了这个网站：http: [//msdn.microsoft.com/en-us/library/windows/apps/Hh780595.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780595.aspx)

这是我所拥有的：

```
var socket = new StreamSocket();
var host = new HostName("chat.facebook.com");
await socket.ConnectAsync(host, "5222", Windows.Networking.Sockets.SocketProtectionLevel.Ssl); 
```

所以在第三行，我收到以下错误：

提供给函数的令牌无效（HRESULT 异常：0x80090308）

我不确定这到底是什么意思。有没有人有这方面的经验或知道另一种使用 SSL/TLS 成功连接到 facebook 聊天服务器的方法？

# ruby - 使用 node_list 拒绝 Couchbase Ruby 客户端连接

> ID：11727733
> 
> 赞同：0
> 
> 时间：2012-07-30T18:51:18.463
> 
> 标签：ruby, couchbase

我已经在同一个存储桶（默认）中的 2 个服务器（192.168.56.4 和 192.168.56.5）上设置了 couchbase。我可以单独连接每个，但在传递 node_list arg 时不能，如下所示：

当我这样做时它会连接：

```
client = Couchbase.connect("http://192.168.56.4:8091/pools/default") 
```

或者

```
client = Couchbase.connect("http://192.168.56.5:8091/pools/default") 
```

但是当我尝试时收到拒绝连接错误：

`c = Couchbase.connect( :pool => "default", :port => 8091, :node_list => ['http://192.168.56.4', 'http://192.168.56.5'])`

或者

`c = Couchbase.connect( :pool => "default", :port => 8091, :node_list => ['192.168.56.4', '192.168.56.5'])`

或者

`c = Couchbase.connect( :pool => "default", :node_list => ['http://192.168.56.4:8091', 'http://192.168.56.5:8091'])`

以及我尝试过的其他组合......

那么，关于我做错了什么有什么想法吗？

顺便说一句，以防万一有人问，在它们之间复制数据时，它们似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:31:45.957

根据开发团队的说法，似乎它没有在 gem 1.1.x 分支中实现。所以需要安装 1.2.x 版本（审查版本，在我写这篇文章的时候）或者你可以自己去实现它。

这并不难，因为您只需要实现一个循环遍历节点列表的方法，尝试连接到第一个可用的服务器。

# sql-server-2008 - SQL Server 2008 - 如何从数据库中导出/备份最近 3 个月的数据？

> ID：11727740
> 
> 赞同：0
> 
> 时间：2012-07-30T18:51:39.700
> 
> 标签：sql-server-2008, import, export

我需要对生产 SQL Server 2008 数据库进行故障排除，因此我只想导出/备份其中包含的最近 3 个月的数据，以便将其导入测试 SQL 框并尝试解决那里的问题。生产和测试 SQL Server 位于两个不同的林/域中。你能告诉我什么是更好的方法吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:56:17.210

**你问的不可能**

除非您在每个单独的表中都有时间戳，否则不可能识别“最近 3 个月的数据”。

即使您确实有时间戳，仅尝试从时间戳在过去 3 个月内的所有表中提取所有行也可能导致状态不一致。例如，您可以有一个 Customer 表和一个 Orders 表。给定客户可能已有 5 个月大，但该客户可能有 1 天前的订单。拉 1 天订单但不拉它引用的 5 个月大的客户将导致没有客户的订单。

简而言之，在一般情况下，我看不出如何从实时数据库中执行此操作。如果您有一个相当简单的架构，请分享它。也许有针对您的具体情况的解决方案。

**替代**

如果无法对数据进行切片，并且您关心的是数据量，请考虑以不同的方式对数据进行切片。也许为 10% 的客户或类似的东西提取数据。如果您共享您的架构（假设它不是太复杂），我可以提出更具体的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:59:06.543

您需要使用时间戳，编写自己的迁移代码，遍历每个表并获取最近 3 个月的数据并转储到新数据库中。

# jquery - 锁定元素相对于另一个元素的位置

> ID：11727742
> 
> 赞同：1
> 
> 时间：2012-07-30T18:51:50.003
> 
> 标签：jquery, css

当我的页面加载时，我找到`div_left`页面上的位置并设置顶部，`div_right`以便它们并排显示。这是我发现的唯一方法，因为我的页面很复杂，有多种表格等。查找/设置位置的代码是这样的：

```
function findPos() {
    var curLeft = curTop = 0;
    var obj = $("#div_left");
    var position = obj.position();
    curLeft = position.left;
    curTop = position.top;
    moveToPos(curLeft, curTop);
}

function moveToPos(newLeft, newTop) {
    $("#div_right").css({
        position: "absolute",
        top: newTop + "px",
        left: (newLeft + 550) + "px"
    });
} 
```

出现在这些 div 上方的元素会定期改变大小，主要是通过`.toggle()`. 我发现`div_right`当它上面的元素“扩展”或“收缩”时，它不会随页面元素的其余部分移动。有没有办法“附加”`div_right`到某物或使其成为某物的孩子，这样我就不必每次都以编程方式移动它？由于`.toggle()`动画，这将是痛苦的。

**编辑 1**

![在此处输入图像描述](../Images/afe5c53b210461973914fdf056c18da6.png)

所以你可以看到，我不能在更大的 div 中包含`div_left`and `div_right`，因为我会切穿`form1`. 据我所知，表格不能拆分。

**编辑 2**

基本 HTML：

```
<form id="form1">
<table id="table1"></table>
<div id="div_left"></div>
</form>

<div id="div_right">
<form id="form2"></form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:23:19.813

你能试着解释一下你的代码与这个工作小提琴有什么不同吗？[http://jsfiddle.net/FFnyA/2](http://jsfiddle.net/FFnyA/2)

编辑：为后代发布代码

# html

```
<form method='post' id='form1'>
    <div id='table_container'>
        <table><tr><td>1</td><td>2</td></tr></table>
    </div>
    <div id='div_left'>
    </div>
</form>
<div id='div_right'>
    <form method='post' id='form2'>
    </form>
</div>
<div style='clear:both'></div>
<div id='other_content'>
    <p>Look at me</p>
</div>​ 
```

# css

```
#table_container
{
    background-color: pink;
}
#div_left
{
    float: left;
    width: 100px;
    height: 100px;
    background-color: lime;
}
#div_right
{
    float: left;
    width: 100px;
    height: 100px;
    background-color: cyan;
}
​ 
```

[摆弄 Huangism](https://stackoverflow.com/users/1058134/huangism)建议中的代码[http://jsfiddle.net/FFnyA/6/](http://jsfiddle.net/FFnyA/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:14:26.710

好吧，我确信代码比那张图片更复杂，但是您可以尝试将 div_right 放在 div_left 内，并且 div_left 将相对定位， div_right 将绝对定位。将 div_right 的 CSS "left" 放在 div_left 和 top:0 的 width + margin-right ；你应该有你在图片中的东西。

这是假设 div_left 是固定宽度

更新：像这样

[http://jsfiddle.net/FFnyA/5/](http://jsfiddle.net/FFnyA/5/)

# php - 如何在 while 循环中填充数组并在每次迭代时获得新的范围？

> ID：11727746
> 
> 赞同：1
> 
> 时间：2012-07-30T18:52:02.737
> 
> 标签：php, arrays, loops, while-loop

问题是我只得到来自表的最后一个值。我认为这是因为我在将其值引用到同一个对象的同时构建数组，并且它不断变化。我知道 while 循环不会为每个迭代创建一个新的范围，这**是**问题所在。

**为每次迭代获得新范围的最佳方法是什么？**

**代码：**

```
 $namesArray= array();
        while ($row=mysql_fetch_array($result))
        {
        $nameAndCode->code = $row['country_code2'];
        $nameAndCode->name = $row['country_name'];           
        array_push($namesArray,$nameAndCode);

        } 
return $namesArray; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T18:54:47.630

您需要在每次迭代时创建一个新对象：

```
while ($row=mysql_fetch_array($result))
{
    $nameAndCode = new stdClass;
    $nameAndCode->code = $row['country_code2'];
    $nameAndCode->name = $row['country_name'];           
    $namesArray[] = $nameAndCode;
} 
```

否则，您将一遍又一遍地引用同一个对象，而只是覆盖其值。

如果您不需要对象，您也可以使用数组执行此操作：

```
while ($row=mysql_fetch_array($result))
{
    $nameAndCode = array();
    $nameAndCode['code'] = $row['country_code2'];
    $nameAndCode['name'] = $row['country_name'];           
    $namesArray[] = $nameAndCode;
} 
```

或更简洁地说：

```
while ($row=mysql_fetch_array($result))
{
    $namesArray[] = array( 
        'code' => $row['country_code2'],
        'name' => $row['country_name']
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:03:09.617

我会选择类似的东西：

```
$namesArray=array();
while($row=mysql_fetch_array($result)){
  $nameAndCode=array("code"=>$row["country_code2"],
                     "name" => $row["country_name"]);
  array_push(&$namesArray,$nameAndCode);
}; 
```

我也会尝试通过`$namesArray`引用传递，就像 Viktor 提到的那样。我的代码创建了全新的数组来推动每次迭代，这确保你不会覆盖任何东西。此外，如果您想通过索引访问数组来将内容添加到数组中，您应该使用以下命令：

```
// This is the right way
$someArray["foo"]="bar";
$someArray["baz"]="quux";
// This is wrong, it's only for OOP
$someArray->foo="bar";
$someArray->baz="quux"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:55:05.790

尝试

```
array_push(&$namesArray,$nameAndCode); 
```

我认为`array_push`需要一个引用或指针。

你不使用有什么原因`$namesArray[]`吗？而不是上面的：

```
$namesArray[] = $nameAndCode; 
```

# ios - AnySlider - video.js 导致 iOS 失败 - 此 JS 文件是否有部分构建？

> ID：11727758
> 
> 赞同：1
> 
> 时间：2012-07-30T18:52:46.747
> 
> 标签：ios, flash, video, anythingslider

我在 AnySlider 幻灯片中放置了几个视频以及每个视频中的其他内容类型。除了 iPhone 3 和 iPhone 4 上的 iOS 之外，它们在我测试过的所有浏览器上都能正常运行。我使用的是 AnythingSlider 视频控制器 1.3 测试版（AnythingSlider 1.8.6 下载仍然附带的那个）。

如果我将 jquery.anythingslider.video.js 排除在外，视频将在 iPhone 上播放。问题是如果没有 video.js，放置在滑块内的任何视频即使在单击下一个/上一个并前进后仍将继续播放。如果视频没有音频（但我的一些视频有音频，所以当您查看完全不同的幻灯片时您仍然会听到它），这不会是一个缺点。

我在 jquery.anythingslider.video.js 中找到了关于 iOS 崩溃的问题。这似乎是由于此脚本使用的 Flash 处理而发生的。任何使用 Flash 的东西，即使它是 JS 中函数的一部分（或者很多时候仅用作后备），似乎都会让 iPhone 绊倒。

我的问题是：是否存在 jquery.anythingslider.video.js 的部分构建，它只会在幻灯片前进时自动停止视频，同时不包含 Flash 引用，以便它仍然可以成功地与 iOS 一起使用？

感谢您花时间阅读本文以及您可能有的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:39:30.577

嗯，我不知道 iOS 在尝试访问 flash 时会崩溃，我得调查一下。

我不太确定您使用的是哪种视频，但如果它只是 HTML5 视频，那么[视频 wiki 文档](https://github.com/ProLoser/AnythingSlider/wiki/Video#wiki-noext)有一个示例，说明如何在没有扩展名的情况下控制 HTML5 视频 -[演示](http://jsfiddle.net/Mottie/Cm479/5107/)

```
$('#slider').anythingSlider({
    // pause video when out of view
    onSlideInit: function(e, slider) {
        var vid = slider.$lastPage.find('video');
        if (vid.length && typeof(vid[0].pause) !== 'undefined') {
            vid[0].pause();
        }
    },
    // continue playing video if already started
    onSlideComplete: function(slider) {
        var vid = slider.$currentPage.find('video');
        if (vid.length && typeof(vid[0].pause) !== 'undefined' && vid[0].paused && vid[0].currentTime > 0 && !vid[0].ended) {
            vid[0].play();
        }
    },
    // pause slideshow if video is playing
    isVideoPlaying : function(slider){
        var vid = slider.$currentPage.find('video');
        return (vid.length && typeof(vid[0].pause) !== 'undefined' && !vid[0].paused && !vid[0].ended) ? true : false;
    }
}); 
```

# javascript - 使用函数原型挂钩 document.createElement

> ID：11727759
> 
> 赞同：5
> 
> 时间：2012-07-30T18:52:56.293
> 
> 标签：javascript

我想以这样的方式连接到 document.createElement 函数，每次创建 div 元素时，我的钩子都会将“foo”属性附加到 div。这是我目前拥有的：

```
<script>
    window.onload = function () {
        console.log("document loaded");
        document.prototype.createElement = function (input) {
            var div = document.createElement(input);
            console.log("createElement hook attached!");
            if (input == "div")div.foo = "bar";
            return div;
        }

        document.body.addEventListener('onready', function () {
            var div = document.createElement("div");
            console.log(div.foo);
        });

    }
</script> 
```

当我在 Chrome 中运行它时，我收到一条错误消息

```
Uncaught TypeError: Cannot set property 'createElement' of undefined test.html:4 window.onload 
```

（我更改了上面错误消息中的行号以匹配我的代码）

我在这里错了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T18:57:56.060

*   `document`没有`.prototype`, 因为它是实例对象而不是构造函数
*   你在你的新函数中调用 new `document.createElement`，它最终会递归。您需要在某处存储对旧引用的引用，然后调用它。
*   您正在设置属性而不是属性
*   这是非常脆弱的事情，不能保证有效。它似乎在 chrome 和 firefox 中工作，但在旧 IE 中不起作用

尝试这个

```
document.createElement = function(create) {
    return function() {
        var ret = create.apply(this, arguments);
        if (ret.tagName.toLowerCase() === "div") {
            ret.setAttribute("foo", "bar");
        }
        return ret;
    };
}(document.createElement) 
```

[http://jsfiddle.net/NgxaK/2/](http://jsfiddle.net/NgxaK/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:10:46.657

我建议不要覆盖现有函数，因为它们将来可能会变为只读。我建议对 DOM 进行后处理（快速遍历 div 比拦截每个元素的创建要快）和/或修改插入 div 的代码以添加您的属性。或者，如果您真的想修改创建的节点，更好的方法是 Mutation Observers (HTML5)：

[http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)

这比使用 HTML4 中已弃用的突变事件要好得多，并且覆盖全局变量通常被认为是一种不好的做法，除非您正在创建 shim 或 polyfill。

# python - 在不呈现重定向页面的情况下进行重定向

> ID：11727760
> 
> 赞同：2
> 
> 时间：2012-07-30T18:52:57.803
> 
> 标签：python, redirect, flask

在用户提交一些数据以创建新对象后，我希望后端将他重定向到对象详细信息，像往常一样：

我正在做类似的事情：

```
if obj.is_valid():
    obj.save()
    flash('%s created' % obj, )
    return redirect(url_for('provider', provider_id=obj.id)) 
```

但是通过 curl 做 te 请求（我正在构建一个 API，用 curl 测试它）

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<title>Redirecting...</title>
<h1>Redirecting...</h1>
<p>You should be redirected automatically to target URL: <a href="/provider/11">/provider/11</a>.  If not click the link.
user@box 
```

这很不幸，因为我只想要`/provider/:id`中间步骤的响应。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T01:31:44.717

[实际上，Flask 在这里按照RFC 2616 第 10.3.2 节](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.2)的定义做了正确的事情

> 新的永久 URI 应该由响应中的 Location 字段给出。除非请求方法是 HEAD，否则*响应的实体应该包含一个简短的超文本注释，其中包含指向新 URI 的超链接。*

[强调我的]

引用[RFC 2119](https://www.rfc-editor.org/rfc/rfc2119)，本段可以解释为：

> HTTP 服务器必须包含带有 30X 重定向的简短超文本注释，*除非它们有充分的理由避免这样做*

没有人使用浏览器或任何常见的 HTTP 库会看到该页面 - 客户端将遵循`Location`RFC 2616 相关部分中指定的标头中提供的重定向。

抛开悬而未决的演讲不谈，如果您正在构建 JSON API，并且除了状态代码和必要的标头之外什么都不提供，您可以通过使用[`Flask.errorhandler`](http://flask.pocoo.org/docs/api/#flask.Flask.errorhandler)装饰器或为适当的方法注册自己的错误处理程序来做到这一点[`Flask.register_error_handler`](http://flask.pocoo.org/docs/api/#flask.Flask.register_error_handler)：

```
@app.errorhandler(302)
def minimal_redirect():
    return u"", 302 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:16:58.120

用于`-L`指示 curl 它应该遵循 HTTP 重定向，并且只显示最终响应：

```
$ curl -s http://www.exyr.org|grep '<title>' 
<title>301 Moved Permanently</title>
$ curl -s -L http://www.exyr.org|grep '<title>'
  <title>Exyr.org</title> 
```

在`man curl`：

```
 -L, --location
          (HTTP/HTTPS)  If  the server reports that the requested page has
          moved to a different location (indicated with a Location: header
          and  a  3XX  response code), this option will make curl redo the
          request on the new place. If used together with -i, --include or
          -I, --head, headers from all requested pages will be shown. When
          authentication is used, curl only sends its credentials  to  the
          initial  host.  If a redirect takes curl to a different host, it
          won't be able to intercept the user+password. See  also  --loca‐
          tion-trusted  on how to change this. You can limit the amount of
          redirects to follow by using the --max-redirs option.

          When curl follows a redirect and the request is not a plain  GET
          (for example POST or PUT), it will do the following request with
          a GET if the HTTP response was 301, 302, or 303\. If the response
          code  was  any  other  3xx code, curl will re-send the following
          request using the same unmodified method. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T05:04:48.463

我有类似的查询，因为烧瓶在重定向到目的地本身之前重定向到**重定向页面。**

只是删除`code`实际解决了问题。您还可以为每个`code`.

```
redirect(url_for('home'), code=302) 
```

至，

```
redirect(url_for('home')) 
```

或者正如@Sean Vieira 指出的那样，使用这个装饰器来处理重定向

```
@app.errorhandler(302)
def custom_redirect():
    # Return template 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:31:47.677

您可以简单地删除`redirect`响应的 HTTP 正文。

```
res = redirect(url_for('provider', provider_id=obj.id))
res.data = ""
return res 
```

# c# - 提交页面时尝试获取文本区域的值

> ID：11727761
> 
> 赞同：0
> 
> 时间：2012-07-30T18:53:00.570
> 
> 标签：c#, jquery

嗨，我在控制页面上有 textarea，它使用 jQuery 我“变成”了一个简单的 HTML 文本编辑器（允许用户加粗文本并创建简单的无序列表）。

提交页面时，我试图获取 textarea 中的值并处理到数据库中（保留 textarea 内的 html 标记）但我找不到控件，因此无法获取里面的标记它。

所以页面类似于（它在工作的服务器上，所以这是来自内存）。

```
<div id="zone">
   <textarea id="txtDescription" cols="20" rows="2"></textarea>
</div> 
```

当表单提交时，我正在运行

```
HtmlTextArea zArea = (HtmlTextArea)Page.FindControl("txtDescription"); 
```

尽管我没有收到任何错误，但 zArea 的值始终为空。

可能是我以错误的方式进行此操作，因此非常欢迎任何帮助。

谢谢，克雷格

已编辑* *** 应用 runat=server 方法允许我在页面后面的代码中引用该值，但我现在正在努力使用 jQuery 来“查找”控件。母版页包含如下 jQuery 代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#ctl00_myJobZoneAddition_txtHTMLArea').jqte();
    });
</script> 
```

此母版页具有对 control.ascx 页面的引用

```
<myWeb:JobZoneAddition ID="myJobZoneAddition" runat="server"/> 
```

并且在这个控件上存在实际的文本区域：

```
<textarea id="txtHTMLArea" runat="server" cols="20" class="jobDescription" name="txtHTMLArea" rows="8"></textarea> 
```

任何关于如何在不命名 ctl00_myJobZoneAddition_txtHTMLArea 的情况下访问此文本区域的帮助都会受到极大的欢迎。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:54:37.463

您好，您必须将值为“server”的属性 runat 添加到您的控件中

```
 <textarea id="txtDescription" cols="20" rows="2" runat="server"></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:59:16.810

通过将**runat="server"**属性添加到您的 textarea 控件，您将能够从代码隐藏中访问您的控件，如下所示：

```
string description = txtDescription.value; 
```

**编辑：**根据您对我的回答的评论，您似乎需要使用客户端 ID。当您将**runat="server"**添加到控件时，它将在代码隐藏中可见。但是，您现在无法从客户端（例如您的 jQuery）以相同的方式访问该控件。您必须使用控件的**ClientID**，而不是通常使用的 ID 属性。这是一个例子：

```
$(document).ready(function () {
    $('#<%= txtDescription.ClientID %>').click(...)
}); 
```

如果您运行您的应用程序并查看源代码，您会看到“txtDescription”被一个唯一值替换。此值称为客户端 ID。

# ide - 将图像目录添加到makefile

> ID：11727762
> 
> 赞同：0
> 
> 时间：2012-07-30T18:53:05.837
> 
> 标签：ide, makefile, anjuta

我有一个本地文件夹，其中包含我想在我的程序中使用的图标。该目录是 src 目录中的 /images/icons。

当我制作 tarball 时，没有出现带有图像的目录，所以我想我必须将它包含在 makefile 中。如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T23:22:30.167

`Makefile.am`Anjuta 中包含自动安装图像的代码：

```
@$(NORMAL_INSTALL)
if test -d $(srcdir)/pixmaps; then \
  $(mkinstalldirs) $(DESTDIR)$(datadir)/pixmaps/$(PACKAGE); \
  for pixmap in $(srcdir)/pixmaps/*; do \
    if test -f $$pixmap; then \
      $(INSTALL_DATA) $$pixmap $(DESTDIR)$(datadir)/pixmaps/$(PACKAGE); \
    fi \
  done \
fi 
```

但它希望您的图像在`project_root/pixmaps`. 如果图像在那里，`make dist`将包括图像。您可以将路径更改为`pixmaps`in `Makefile.am`（项目根目录中的路径），或将图像移动到`pixmaps`.

# ios - iOS 中支持的 SVG 功能

> ID：11727764
> 
> 赞同：4
> 
> 时间：2012-07-30T18:53:17.883
> 
> 标签：ios, html, svg

我似乎找不到 iOS 支持的 SVG 功能的好列表，我得到的最好的是：

[http://caniuse.com/#cats=SVG](http://caniuse.com/#cats=SVG)

我正在研究开发一个使用大量视觉元素的网页的可行性，我们想使用 SVG，我对 SVG 没有深入的了解，所以我想知道主要的兼容性、性能和缺乏功能问题是什么在 iOS Safari 中。

从上面的链接看来我不能使用：SMIL 动画。动画作为 SVG 标签，对吗？该链接说：“Safari 中的部分支持是指不在 HTML 文件中工作。” 所以只要 SVG 不在 HTML 文件中，它就可以工作？所以这意味着我根本无法使用它？我还可以使用 Javascript 制作动画吗（例如使用 jQuery SVG）？

SVG 过滤器，现在我不完全知道它涵盖的内容。iOS 上的 SVG 是否支持渐变？其他不支持的有用过滤器（阴影）呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:07:09.967

除了过滤器之外，几乎所有东西都可以工作。当它说不在 HTML 中时，它指的是旧的 HTML，而不是 XHTML，提供了适当的 mimetype。

我建议要么购买便宜的 iPod touch（最新的运行 ios 6），要么购买带有 xcode 的 Mac，因此需要使用模拟器进行测试，否则这不会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:03:16.993

对于浏览器测试：[http](http://browsershots.org/) ://browsershots.org/让魔法发生，输入您的网页 url 到框等待 - 查看屏幕截图并查看它们是如何呈现的或完全是 svg？我知道，这不是最好的方法，但它是一个开始，因为它使用选定的浏览器来呈现您的页面 :)

**编辑：**

此外，如果看到渲染图像还不够，还有一个工具[http://spoon.net/browsers/可以在其中](http://spoon.net/browsers/)**免费**在正确的浏览器中使用您的页面

# django - django 模型：objects.all().delete() 没有

> ID：11727766
> 
> 赞同：11
> 
> 时间：2012-07-30T18:53:30.383
> 
> 标签：django, django-models

我正在尝试清除并重新加载我的 django 模型中的表格，并且

```
>>> models.PuzzleSum.objects.all().count()
2644
>>> models.PuzzleSum.objects.all().delete()
>>> models.PuzzleSum.objects.all().count()
2535 
```

……怎么回事？总是神奇的数字 109。我知道我可以进入数据库并手动删除它们（或循环直到它们全部消失）但我很好奇。

（顺便说一句，Mac OS X Lion 上的 Django 1.3.1）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T07:23:41.497

是的，Django 将所有对象存储在一个字典中，然后将它们一一删除。这就是为什么只删除唯一项目的原因，因为它会迭代它们。这是来自 Django [Collector](https://github.com/django/django/blob/master/django/db/models/deletion.py)类，它收集模型以供删除：

```
self.data = SortedDict([(model, self.data[model])
                        for model in sorted_models]) 
```

进而：

```
# delete instances
for model, instances in self.data.iteritems():
    query = sql.DeleteQuery(model)
    pk_list = [obj.pk for obj in instances]
    query.delete_batch(pk_list, self.using) 
```

只要您覆盖了`__hash__`模型，当模型存储在 self.data 字典中时，只会存储唯一的模型，然后将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:48:08.030

将我上面的评论转换为问题的答案：

由于我想使用“重复”的特定定义，我在 PuzzleSum 中覆盖了**hash**和**eq 。**猜猜看：我有 109 个不同的哈希值。Django 必须在其删除逻辑的内部某处使用一组对象。

# c# - 如何检查 WPF TextBox TextChange 事件中添加文本的长度？

> ID：11727767
> 
> 赞同：4
> 
> 时间：2012-07-30T18:53:34.620
> 
> 标签：c#, wpf

我的 WPF TextBox 有一个`TextChanged`事件，如下所示：

```
private void textMatch_TextChanged(object sender, TextChangedEventArgs e)
{
    var m = e.Changes;//here I can see e.Changes has what I'm looking for
    //do some other stuff here.
} 
```

但是，我想做的是检查添加的文本的长度。显然，`e.Changes`包含该值，但我无法找到以*编程*方式找到它的方法，我也无法在网上找到任何示例。

*我目前的检查方法是在每次更改文本时存储当前长度并确保新长度仅增加 1，但这对我来说有点像黑客攻击。*

有没有人试过这个？如何使用 ? 找出添加文本的长度`TextChangedEventArgs`？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:58:16.397

您正在寻找的是如何从TextChange 集合中提取`TextChange`对象。`e.Changes`以下应该有效：

```
int added = e.Changes.ElementAt(0).AddedLength; 
```

但是，如果您想要*看起来更具体*的东西，您可以使用：

```
int added = e.Changes.FirstOrDefault().AddedLength; 
```

因为`e.Changes`据我所知*，目前*将始终包含单个`TextChange`项目，我想即使在 WPF 文本框的未来实现中，它也将始终是第一个。

***对于对我来说似乎真的没有必要的***Non-Linq**实现，您可以使用以下庞大的代码：**

 **```
var x = e.Changes.GetEnumerator();
x.MoveNext();
int added = x.Current.AddedLength; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-19T20:51:52.623

对于 TextBox，计数似乎始终为 1，因为 TextBox 不能包含字符以外的任何内容。

但我发现此搜索有关 TextChange 的答案，只是想向其他人提供 TextChange.Changes.Count 在与 RichTextBox 一起使用时可以大于 1 的知识。

这个结果可能有点令人困惑。

如果您只是学习使用此功能，请注意，无论您是输入单个字符还是粘贴多行，Count 都可以为 1。

但是字体系列更改可以包括多个更改，实际上似乎每个选定的单词都有 1 个应用了更改的字体系列。但是，另一方面，对字体大小、下划线、粗体或斜体的更改可能会导致计数 = 0。

对于 RichTextBox，TextChange 是由符号更改而不是字符更改引起的。因此，您可以粘贴“Hello To All The World”并获得单个 TextChange，因为它是包含粘贴文本的单个 TextElement。**

# axis - Apache 轴日志记录 - 在 Jira 插件中使用时出现 ClassCastException

> ID：11727768
> 
> 赞同：1
> 
> 时间：2012-07-30T18:53:39.383
> 
> 标签：axis, jira-plugin, apache-commons-logging, atlassian-plugin-sdk

我的 Jira 5.0 插件已损坏，但有以下异常：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        ...
Caused by: java.lang.ExceptionInInitializerError
    at org.apache.axis.description.OperationDesc.<clinit>(OperationDesc.java:65)
    at com.xyz.germander.AddTestTrackLinkDialogAction.doConfirm(AddTestTrackLinkDialogAction.java:23)
    ... 148 more
Caused by: java.lang.ClassCastException: org.apache.commons.logging.impl.SLF4JLogFactory cannot be cast to org.apache.commons.logging.LogFactory
    at org.apache.axis.components.logger.LogFactory.getLogFactory(LogFactory.java:41)
    at org.apache.axis.components.logger.LogFactory.<clinit>(LogFactory.java:33)
    ... 150 more 
```

作为参考，这是抛出 ClassCastException 的方法：

```
private static final org.apache.commons.logging.LogFactory getLogFactory() {
    return (org.apache.commons.logging.LogFactory)
        AccessController.doPrivileged(
            new PrivilegedAction() {
                public Object run() {
                    return DiscoverSingleton.find(org.apache.commons.logging.LogFactory.class,
                                   org.apache.commons.logging.LogFactory.FACTORY_PROPERTIES,
                                   org.apache.commons.logging.LogFactory.FACTORY_DEFAULT);
                }
            });
} 
```

...作为进一步参考，org.apache.commons.logging.LogFactory.FACTORY_DEFAULT 是“org.apache.commons.logging.impl.LogFactoryImpl”，FACTORY_PROPERTIES 应该是要搜索的属性文件的名称，其中在我的 org.apache.commons.logging jar 中是“commons-logging.properties”。

我尝试在插件的资源目录中创建一个 commons-logging.properties 文件；该文件包含以下内容：

```
priority=1
org.apache.commons.logging.Log=org.apache.commons.logging.impl.LogFactoryImpl 
```

...但它似乎被忽略了，因为 getLogFactory() 仍然得到 SLF4JLogFactory 并且无法转换它。所以它看起来像：

*   这个 commons-logging.properties 文件需要在其他地方
*   我需要将日志记录类设置为别的
*   该项目配置错误，可能在 Jira 级别，或者可能在插件或 Maven 或......我什至不知道

我很困惑，并希望得到任何指导。

[这里](https://stackoverflow.com/questions/11464763/getting-slf4jlogfactory-exception-while-trying-to-access-web-services-from-confl)有一个类似的问题，除了海报在 getLogFactory 中从 org.apache.axis.attachments.AttachmentsImpl 而不是 org.apache.axis.description.OperationDesc 的初始化中得到了相同的异常。（也是一个 Confluence 插件，而不是 Jira。）但是没有人在那里回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:57:34.523

仅包括 axis-1.3-atlassian-1 结果

`java.lang.ClassNotFoundException: org.apache.axis.transport.http.AdminServlet`

由于我的应用程序需要 AdminServlet，它包含在 appache 轴库中。最后，当我将两者都包括在内时，它对我来说很好。

```
 <dependency>
        <groupId>org.apache.axis</groupId>
        <artifactId>axis</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>axis</groupId>
        <artifactId>axis</artifactId>
        <version>1.3-atlassian-1</version>
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:20:39.723

发现：Atlassian 分叉了轴库，Jira 现在使用的是 axis-1.3-atlassian-1，而不是 Apache 最新的 axis-1.4；axis-1.3-atlassian-1 使用 1.0.4 版本的 commons-logging，而不是像 axis-1.4 那样的 1.1.1。

将插件的依赖关系从axis-1.4更改为axis-1.3-atlassian-1解决了这个问题。我怀疑 SLF4JLogFactory 可以在 1.0.4 中转换为 org.apache.commons.logging.LogFactory 而不是 1.1.1，但我还没有测试过。

如果在 Jira 中，请务必将依赖项的范围指定为“已提供”，否则您会因为内容被加载两次而遇到问题。这是一个 pom 片段：

```
 <dependency>
        <groupId>axis</groupId>
        <artifactId>axis</artifactId>
        <version>1.3-atlassian-1</version>
        <scope>provided</scope>
    </dependency> 
```

# javascript - 尝试为函数和 passvariable 设置超时 - 不起作用

> ID：11727777
> 
> 赞同：1
> 
> 时间：2012-07-30T18:54:28.410
> 
> 标签：javascript, jquery

基本上我有一个通过这个的函数......我需要在点击按钮后 1/3 秒执行这个函数，所以我想做的是：

```
setTimeout("somefunction(this)", 3000); 
```

据我所知， setTimeout("", x); 与“”一起使用，但它不起作用。

我试过没有“”，但我尝试过它也行不通：

```
 setTimeout("somefunction("+this+")", 3000); 
```

仍然无法正常工作。确实喜欢一个小时的尝试。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:57:00.903

您需要使用闭包

```
var that = this;
setTimeout( function(){ somefunction(that); }, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:56:50.220

超时是异步事件，因此上下文丢失。保存它的一种方法是通过立即执行的函数绑定它。

```
setTimeout((function(that) {
    return function() { somefunction(that); };
})(this), 3000); 
```

另一种方法是引用变量中的外部范围，正如@epascarello 的回答所示。

传递函数引用总是比传递字符串好`setTimeout`，`setInterval`因为后者是被评估的，而评估是邪恶的。

# email - 使用 PHP 发送邮件时 DKIM 签名未验证

> ID：11727780
> 
> 赞同：6
> 
> 时间：2012-07-30T18:54:51.500
> 
> 标签：email, php, dkim

我在 gmail/hotmail 将来自我的服务器的电子邮件过滤为垃圾邮件时遇到问题。Spam Assassin 分数很低，所以我知道我的 IP 不在任何黑名单之类的名单上，这意味着 gmail/hotmail 使用过滤器阻止电子邮件通过。

我做了一些研究并阅读到使用 DKIM 可能会解决我遇到的问题。我继续在我的服务器上启用了 DKIM。现在，当我使用我的电子邮件客户端发送电子邮件时，位于此处的工具 ( [http://www.brandonchecketts.com/emailtest.php](http://www.brandonchecketts.com/emailtest.php) ) 报告 DKIM 签名有效。

下一步是在我的 PHP 邮件中实现 DKIM 签名。所以我继续使用这个位于此处 ( *http://sourceforge.net/projects/dkim-class-php/* ) 的 DKIM 类，它是 PHPMailer 的衍生产品。

但是，当我现在发送电子邮件时，尽管包含 DKIM 签名，但我从验证工具中收到了一个奇怪的错误。

```
result = fail
Details: message has been altered 
```

您可以在此处查看完整报告：[http ://www.brandonchecketts.com/emailtest.php?email=K86KTXpMbl%40www.brandonchecketts.com](http://www.brandonchecketts.com/emailtest.php?email=K86KTXpMbl@www.brandonchecketts.com)

感谢您的帮助，我正在拼命地尝试使这项工作正常进行，并且已经将我的头撞在墙上几个小时了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:21:39.810

我在这里给出了答案：[在基于 PHP 的 SMTP 客户端中设置 DomainKeys/DKIM](https://stackoverflow.com/questions/2799611/setting-up-domainkeys-dkim-in-a-php-based-smtp-client/13022092#13022092)

基本上，您需要确保提供 MTA 添加到外发电子邮件的所有标题。因为不同的系统配置不同，所以没有一种适合所有的解决方案。

查看签名失败的消息源（并给出***消息更改***错误）以确定添加了哪些标头。通常，您的 MTA 将添加***Message-ID***和***Date***标头（如果缺少 Date 标头，它也可能导致垃圾邮件刺客得分较低，因此您也可以包含它！）。

另一个常见的错误是您在对消息签名后自己更改了消息，因此请确保在您签署消息后不对您的代码进行任何修改。

在确定添加了哪些标头之后，您应该在签名之前自己将这些标头添加到电子邮件中（并因此覆盖添加它们的 MTA 的默认行为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T19:22:51.177

我发现 php mail() + postfix 与 dkim 的奇怪行为：

如果你做

```
$headers .= "From: USER <$from_email>\n"; 
```

DKIM 将不正确，但如果您这样做：

```
$headers .= "From: USER <" . $from_email . ">\n"; 
```

一切都好！奇怪的。很奇怪。还建议用户制作

```
trim($emailContent) 
```

# django - Django：如何在其他网站的小部件中访问登录用户的数据？

> ID：11727781
> 
> 赞同：0
> 
> 时间：2012-07-30T18:54:52.847
> 
> 标签：django, authentication

我有一个 web 应用程序，用户只有在登录时才能执行特定操作。我开发了一个小部件，其他用户可以放在他们的网站上。我使用 pinax 作为 webapp 的基础。但是在我的小部件上我即使用户在我的网站上登录，我也无法获取当前登录的用户。

# java - ajax 调用 jsr 286 中的 apache 文件上传

> ID：11727782
> 
> 赞同：1
> 
> 时间：2012-07-30T18:54:54.110
> 
> 标签：java, ajax, portlet, jsr286

我正在以 portlet 的形式使用 apache 文件上传。我注意到 PortletFileUpload 类仅服务于操作请求。我正在使用 JSR286，我想在单击提交按钮时调用 serveresource 方法。这是可能的还是有任何解决方法可以实现这一目标？

# jquery - 在更改时获取选定的选项文本

> ID：11727784
> 
> 赞同：0
> 
> 时间：2012-07-30T18:54:58.697
> 
> 标签：jquery, html

我正在尝试做一些非常简单的事情，但它对我不起作用。我要做的就是在更改所选选项时获取所选选项的文本，如下所示：

```
<select id = "myselect">
  <option value = "1">One</option>
  <option value = "2">Two</option>
  <option value = "3">Three</option>
</select> 
```

然后在 JavaScript 中：

```
$("#myselect").change(function () {
     var text = $(this).find("option[selected]").html();
     alert(text);
}); 
```

简单吧？问题是我只是得到空值。当我检查 DOM 时，我发现更改选定选项不会更改任何选项的“选定”属性。更改选项通常不会更新 DOM 吗？我很确定我以前做过。我在这里缺少什么？我正在使用 FireFox 13.0.1 版进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:58:26.943

这应该使用 jQuery 来完成：

```
$("#myselect").change(function () {
    var text = $(':selected',this).text();
    alert(text);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Svt3G/1/)**

或者，如果您只想使用纯 JavaScript：

```
document.getElementById('myselect').onchange = function() {
    alert(document.getElementById("myselect")[document.getElementById("myselect").selectedIndex].innerHTML);
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DZZqU/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:57:00.733

您想使用`:selected`选择器。[在此处](http://api.jquery.com/selected-selector/)查看示例

```
$( '#myselect' ).change(function () {
    var text = $( this ).children( 'option:selected' ).text();
    alert( text );
}); 
```

**现场演示：http:** [//jsfiddle.net/xjhFf/](http://jsfiddle.net/xjhFf/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T18:58:03.527

```
$(this).find("option:selected").html(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T18:58:38.690

改成

```
 var text = $(this).find("option:selected").html(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:57:34.650

您可以使用该`selectedIndex`属性并通过其索引检索该项目。

# java - Easymock 不兼容的返回值类型错误

> ID：11727785
> 
> 赞同：4
> 
> 时间：2012-07-30T18:54:59.673
> 
> 标签：java, unit-testing, junit, easymock

我正在尝试为这段特定的代码创建一个 EasyMock，这样 innerfValue 的类型就是 IJavaValue，它是 IJavaObject 的子类。我已经尝试了通过模拟 innerfValue 然后只是假设 aJavaValue 指向 innerfValue 并模拟 sendmessage 方法来处理这个问题的传统方法，就好像它是 innerfValue 的方法一样，但它一直没有工作，当我到达当我这样做时，它给了我一个不兼容的返回值类型（在这种情况下，symbolvalue 是我在我的模拟 innerfValue 对象上调用 sendmessage 方法后返回的模拟对象，而不是作为另一段代码中的 symbolValue 的 saem ):

```
EasyMock.expect(((IJavaObject)symbolValue).toString()).andReturn("aValue"); 
```

这是一段代码

```
IJavaObject aJavaValue = (IJavaObject)innerfValue.getValue();
IJavaObject symbolValue = (IJavaObject) ((IJavaObject)aJavaValue).sendMessage(
    "toString", "()Ljava/lang/String;", null, thread, false);
value = symbolValue.toString(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T01:33:49.780

EasyMock 不能模拟 toString() 方法。这就是我遇到问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T19:32:29.383

我知道我的问题在哪里。

如果您使用的是 EasyMock.createMockBuilder(XXX.class)

确保你记得 addMockedMethod("methodName").createMock();

# javascript - 使用 javascript 获取 svg 文本值

> ID：11727787
> 
> 赞同：4
> 
> 时间：2012-07-30T18:55:04.167
> 
> 标签：javascript, svg

更新：

所以让我使用实际的代码......我有这个javascript......

```
window.writeText = function(form) {
  var text;
  form.catnumber2.value = "PING";
  text = document.getElementByName('cat2Number').innerHtml;
  return alert(text);
}; 
```

但我没有收到预期的警报框。

当我通过视图/开发人员/视图源（我在 chrome 中）查看源时，svg 没有显示，但是当我使用视图/开发人员/开发人员工具时....我可以看到以下 svg....

```
<svg height="594">
    <g ID="MasterG">
        <text name="cat2Number">"$1234"</text>
    </g>
</svg> 
```

知道我做错了什么吗？为什么我在“查看源代码”中看不到 svg 代码，但在“开发者工具”中可以看到？这是我问题的原因吗？这就是我的警报框不会“警报”的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:12:02.617

经过几秒钟的谷歌搜索并找到这个[https://stackoverflow.com/a/9602772/1217408](https://stackoverflow.com/a/9602772/1217408)

我创建了这个使用的 JSFiddle 示例：http `textContent`: [//jsfiddle.net/hVyTJ/1/](http://jsfiddle.net/hVyTJ/1/)

原始的[http://jsfiddle.net/hVyTJ/](http://jsfiddle.net/hVyTJ/)使用标准 DOM 遍历从根 SVG 元素获取文本元素。而更新直接通过 ID 定位文本元素。

至于查找属性值，您可以`getAttributeNS`按照此处所述使用：http: [//www.carto.net/svg/manipulating_svg_with_dom_ecmascript/](http://www.carto.net/svg/manipulating_svg_with_dom_ecmascript/)

编辑：

正如 Phrogz 所指出的，一个简单的`getAttribute`调用通常就足够了。阅读评论了解更多详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T00:35:40.250

您可以调用`text()`以返回`svg:text`元素的文本内容。

```
// assume svgCont is an svg element
var label = svgCont.append("svg:text").text("hello, world!");

// print the text content to the console
console.log( label.text() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T11:55:56.203

# 只使用 dom 方法

```
const svg = document.querySelector(`[data-uuid="live_map_svg"]`);

const shape = svg.querySelector(`text`);

const text = shape.innerHTML;
// const text = shape.textContent;

setTimeout(() => {
  svg.insertAdjacentHTML(`beforebegin`, text);
}, 1000);
```

```
.svg-box{
 width: 500px;
 height: 500px;
 background: #ccc;
 color: red;
 font-size: 16px;
}

[data-uuid="live_map_svg"]{
  font-size: 16px;
}
```

```
<div class="svg-box">
  <svg
    data-uuid="live_map_svg" id="live_map_svg"
    width="100%" height="100%"
    viewBox="0 0 100 100"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink">
    <text x="30" y="50" fill="#369acd">A Area</text>
  </svg>
</div>
```

# android - 如何将 Drawable 保存在资源文件夹中？

> ID：11727790
> 
> 赞同：1
> 
> 时间：2012-07-30T18:55:07.887
> 
> 标签：android, resources, drawable

我想保存这个：

> 私人可绘制图标；图标 = pk.getApplicationIcon(procInfos.get(1).processName);

我得到图标然后我想将它保存在资源文件夹中。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:02:26.870

资源在运行时是只读的；您不能在“资源文件夹”中“保存”任何内容。欢迎您将数据保存到内部或外部存储。

在这种情况下，我怀疑您是否应该这样做，因为这些图标是为了从 动态读取`PackageManager`，而不是存储。毕竟，这些图标不仅会随着应用程序的更新而改变，而且您没有这些图标的权利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:03:45.427

如果要在编译时在应用程序中保存静态文件，请将文件保存在项目`res/raw/`目录中。你可以打开它`openRawResource()`，传递`R.raw.<filename> resource ID`. 此方法返回一个`InputStrea`m，您可以使用它来读取文件（但您不能写入原始文件）。`sqlite`您可以在数据库中动态保存图像[这里](http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html)是一个教程。`You can't save the image at Runtime in application folders.`

# testing - 从 iframe 切换回来时，WATIR 在父级上找不到链接或按钮

> ID：11727793
> 
> 赞同：0
> 
> 时间：2012-07-30T18:55:33.480
> 
> 标签：testing, watir, watir-webdriver

我在 Ubuntu Linux/Firefox 13 和 WATIR 上。（watir-webdriver-0.6.1）我有一个网页，其中包含指向大约 16 个 iframe 的链接。所有链接都像这样......单击“11”将显示一个名称和 ID 都等于“page_11”的 iframe "

```
 <a href="javascript:nextPage(8);">9</a>
 <a href="javascript:nextPage(9);">10</a>
 <a href="javascript:nextPage(10);">11</a>
 <a href="javascript:nextPage(11);">12</a> 
```

单击数字会将 iframe 放入页面，页面上是另一个评论框（主页）

这是我 ** DO ** 知道的，因为我已经通过脚本验证了它。该页面将显示所有 16 个链接。我有我的 WATIR 脚本来单击第 11 个链接。它会这样做，它填充文本框，然后使用 browser.frame(:index,0).locate 方法返回主页面并填写位于 iframe 所在位置下方的评论框填写。

这些都不是问题。

问题是试图让脚本然后单击标有“12”的链接。（需要依次遍历这些 iframe）

它无法再次在主页上找到链接（或相关的按钮）。我最终......

```
[remote server] file:///tmp/webdriver-profile20120730-32067-1haylz3/extensions/fxdriver@googlecode.com/components/command_processor.js:5780:in `unknown': Element is not currently visible and so may not be interacted with (Selenium::WebDriver::Error::ElementNotVisibleError) 
```

我的脚本（相关部分）如下......

```
#!/usr/local/bin/ruby
require 'rubygems'
require 'watir-webdriver'
require "webdriver-user-agent"
require 'headless'
require 'thread'

#Firefox 13 path below. Doesn't work with 14
Selenium::WebDriver::Firefox.path = '/home/janie/Downloads/firefox/firefox'

profile = Selenium::WebDriver::Firefox::Profile.new
profile.native_events = false;
browser=Watir::Browser.new :firefox, :profile => profile

browser.goto("http://myurl/test")       
browser.link(:text,"11").click
browser.frame(:name,"page_11").locate
puts "Text fields "
puts browser.frame(:name,"page_11").text_fields.length

$counter=0
#This if loop works like a champ
if browser.frame(:id,"page_11").text_fields.length > 0
   puts "Found and iterating through Text Boxes"
   while $counter < browser.frame(:id, "page_11").text_fields.length do
       browser.frame(:id, "page_11").text_field(:index, $counter).set("Robot_Test")
   end
end

#Now go back to the main page
browser.frame(:index,0).locate

#The below works too so I know I am back on the top level/parent
if browser.text.include? "This is the main page"
  puts "--> Test Passed. Found the test string"
else
  puts "--> Test Failed! Could not find:"
end

#Now we are back in the main page again
browser.text_field(:name,"COMMENTS").set("ROBOT_TEST")
#The above works great

#And now the problem.....
browser.link(:text,"12").click 
```

轰隆隆！我收到上面的找不到元素错误。

由于某种原因，它不再看到主页或按钮上的链接。知道是什么原因造成的吗？我整天都在寻找这个，这是关于在我可以运行这个脚本之前剩下的唯一一件事，其他一切都很好。

有谁知道如何在 Watir 中解决这种行为？非常感谢！珍妮

PS - 我尝试在 Chrome 中进行测试，我得到了..

```
/usr/local/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok': Element must be displayed to click (Selenium::WebDriver::Error::ElementNotVisibleError) 
```

只是想我会添加。

HTML 非常庞大，所以我试图尽可能简洁。

**注意，更多故障排除：** .....显然问题似乎是脚本没有成功跳转回父帧索引：0

脚本修改...

```
puts "Javascript links in page"
puts browser.links(:text, /^\d+$/).length 
```

第15页中的 Javascript 链接
（正确）

```
puts "Link attribute of index:3"
puts browser.link(:index,3).text 
```

索引的链接属性：3
2
（正确）

```
browser.link(:text,"2").click 
```

（是的，工作正常）

```
#Refocus just to be safe 
browser.frame(:index,0).locate 
```

（上面的行是没有意义的。focus 和 refocus back to frame:index:0 没有区别）

```
#We're supposed to be back in parent. Let's check the no. of links again
puts "Javascript links in page - after"
puts browser.links(:text, /^\d+$/).length 
```

页面中的 Javascript 链接 -
15之后
（这让我觉得一切都很好）

```
puts "Link attribute of index:3"
puts browser.link(:index,3).text 
```

应该像上面一样返回“2”，但没有值和下面的错误消息.....

```
/usr/local/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.5.8/lib/watir-webdriver/elements/element.rb:365:in `assert_exists': unable to locate element, using {:text=>"3", :tag_name=>"a"} (Watir::Exception::UnknownObjectException)
    from /usr/local/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.5.8/lib/watir-webdriver/elements/element.rb:95:in `click' 
```

**注2：更基本**：

```
 puts "Clicking link 2"
   browser.link(:text,"2").click 
```

没问题

```
 puts "Clicking link 3"
   browser.link(:text,"3").click 
```

错误

```
/usr/local/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok': Element must be displayed to click (Selenium::WebDriver::Error::ElementNotVisibleError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:50:23.403

可能是 Watir-Webdriver 中的错误，不完全确定没有 html 来重现它，但您可以尝试以下操作（在您尝试单击 12 链接之前）：

```
browser.window(:url => the_url_of_your_page).use 
```

如果 Watir-Webdriver 内部出现问题，它可能会“刷新”页面的 HTML。你永远不会知道！

除此之外，在单击使第一个 iFrame 出现的链接后，我会使用 Firebug 之类的东西来查看页面是否有不同之处。

如果没有任何变化，请确保您可以先单击第 12 页，然后再执行任何其他操作。如果您收到的错误是正确的，则页面上可能存在一个隐藏元素，其文本与您尝试选择的链接相同，在本例中为 12。为确保不是这种情况，您可以始终 `p links(:text => "12").count`使用返回页面上带有该文本的链接数。

除此之外，我真的不确定。

# c++ - 在 C++ 中枚举装饰的 DLL 函数

> ID：11727796
> 
> 赞同：3
> 
> 时间：2012-07-30T18:55:40.627
> 
> 标签：c++, dll

在我的项目中，我需要在运行时加载 DLL，在此之前我没有关于它们的信息。我需要能够用 LoadLibrary 和 GetProcAddress 来枚举函数及其（装饰的）名称（这是对我的要求）。名称可能经过修饰，也可能不经过修饰，显然 GetProcAddress 需要修饰名称（如果有的话）。

有没有合理的方法来做到这一点？

我可以使用 Depends 和其他工具自己提取修饰名称，但这需要在运行时完成。使用[UnDecorateSymbolName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681400%28v=vs.85%29.aspx)之类的函数，必须有一种方法可以将我缺少的修饰名称取出。我尝试了 SymEnumSymbols 但未修饰名称。

请注意，我不是在询问调用函数，只是在没有 .DEF 文件的情况下从 DLL 中枚举名称。我在 Visual Studio 2010 上，假设所有 DLL 都将在 Visual Studio 上编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:38:50.610

如果您想在运行时使用 C++ 枚举 DLL 函数，请尝试使用 Matt [Pietrek](http://www.wheaty.net/downloads.htm)的 PEDUMP（包含代码）。他展示了如何实现此功能。

在输出快照下方，显示了 DLL 的修饰导出函数：

![在此处输入图像描述](../Images/f2efa7ae9180e7026feb2fd1b00d4de1.png)

# shell - 执行windows批处理文件

> ID：11727797
> 
> 赞同：0
> 
> 时间：2012-07-30T18:55:41.177
> 
> 标签：shell, unix, batch-file, plink, pscp

**我现在在做什么——**

1.  `MachineB`从`MachineA`（Windows 环境）执行 shell 脚本。
2.  然后等待 shell 脚本完成它的任务，在我的例子中，它会将输出写入一个文本文件。
3.  在 shell 脚本完成所有任务后，意味着它完成了将所有内容写入 txt 文件，然后将该 txt 文件`MachineA`从`MachineB`.

所以为此我写了一个`Windows Batch file`可以完成上述任务的，它对我来说工作得很好。下面是我目前使用的 Windows Bat 文件。

```
plink uname@machineB -m email.sh 
pscp  uname@machineB:/export/home/uname/jk_attachment22.txt C:\PLINK\foo.txt 
```

但是通过使用上面的windows批处理文件，我需要输入两次密码，这很痛苦，首先我需要输入第一行，然后再输入第二行。

**我的问题是-**

那么有什么方法可以通过`password`在命令提示符下键入一次来运行上述 Windows 批处理文件。任何建议将不胜感激。

这是我在寻找时所拥有的`/.ssh folder`。

**更新：**

```
bash-3.00$ cd ~/.ssh
bash-3.00$ pwd
/home/uname/.ssh
bash-3.00$ ls -lt
total 2
-rw-r--r--   1 uname   gid-uname     489 Jul 26 18:55 known_hosts 
```

所以我需要在这里做一些其他的改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:01:19.463

我会使用 ssh 密钥跳过密码和身份验证。 [http://www.debian-administration.org/articles/152](http://www.debian-administration.org/articles/152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:02:20.183

在命令行实用程序中使用 -pw 选项。

假设您将批处理文件命名为 TWINKIE.BAT。在命令提示符下，您将键入“TWINKIE 密码”，其中“密码”是您要使用的实际密码。

```
C:\>twinkie password 
```

“密码”作为第一个命令行变量 %1 传递到您的批处理文件中。您的批处理文件将是：

```
plink -pw %1 uname@machineB -m email.sh
pscp  -pw %1 uname@machineB:/export/home/uname/jk_attachment22.txt C:\PLINK\foo.txt 
```

# haskell - 如何让我的模块实现用户定义的数据类（当前使用字符串）

> ID：11727800
> 
> 赞同：0
> 
> 时间：2012-07-30T18:55:54.580
> 
> 标签：haskell

我对 Haskell 还不是很熟悉，但是当我自己做一些练习时，我遇到了一个似乎将来可能会出现的问题。即使不是，我也想知道将来如何做到这一点。

假设我有一个模块

```
module UserType where

data ThisModulesData = UserData String | ThisModulesInternal Int

moduleMethod :: (ThisModulesData -> Int) -> ThisModulesData -> Int
moduleMethod func dat = case dat of
    UserData _             -> func dat
    ThisModulesInternal i -> i

processList :: (ThisModulesData -> Int) -> [ThisModulesData] -> Int
processList func xs = sum $ map (moduleMethod func) xs 
```

然后，如果我想使用这个模块，我会有类似的东西

```
dataList :: [ThisModulesData]
dataList = [UserData "Type1", UserData "Type2", ThisModulesInternal 8]

processFunction :: ThisModulesData -> Int
processFunction (UserData command) = case command of
    "Type1" -> 1
    "Type2" -> 2
    _       -> 0
processFunction _ = 0

result :: Int
result = processList processFunction dataList 
```

我想做的是用更像haskell的东西替换字符串，这样它是类型安全的，如果我有可能会引发编译错误

```
dataList = [UserData "Wrong", UserData "ThisIsWrong", ThisModulesInternal 97] 
```

谢谢。感谢 StackOverflow 的帮助，我在学习 Haskell 方面玩得很开心。

编辑：

为了澄清，我希望我的模块文件保持静态，并且在模块的用户实现中发生需要更改的事情（例如，如果我想添加“type3”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:44:46.717

使用类型参数。

```
module UserType where

data ThisModulesData a = UserData a | ThisModulesInternal Int

moduleMethod :: (a -> Int) -> ThisModulesData a -> Int
moduleMethod func dat = case dat of
    UserData x            -> func x
    ThisModulesInternal i -> i

processList :: (a -> Int) -> [ThisModulesData a] -> Int
processList func xs = sum $ map (moduleMethod func) xs 
```

接着

```
data Ours = Type1 | Type2
type OurData = ThisModulesData Ours

dataList :: [OurData]
dataList = [UserData Type1, UserData Type2, ThisModulesInternal 8]

processFunction :: Ours -> Int
processFunction command = case command of
    Type1 -> 1
    Type2 -> 2

result :: Int
result = processList processFunction dataList 
```

注意，我还更改了 的定义，`moduleMethod`这样 eg`processFunction`就不必为`ThisModulesInternal`.

# java - 在 Java EE 框架中使用 Mysql 进行 Google 地图

> ID：11727801
> 
> 赞同：5
> 
> 时间：2012-07-30T18:55:55.913
> 
> 标签：java, mysql, jsp, google-maps, jakarta-ee

我正在使用 Java EE 开发一个 Web 应用程序，该应用程序从 MySql 数据库中获取人员的地址并在 Google 地图上显示他们的位置。

目前我正在手动进行，因为我不知道如何在 JSP 中集成 Google 地图。请给我一些使用 Java 的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:52:56.673

首先，从数据库中获取所有地址的列表，然后使用谷歌地理编码器服务，获取这些地址的经纬度。这是示例代码（[http://code.google.com/p/gmaps-samples/source/browse/trunk/geocoder/java/GeocodingSample.java?r=2476](http://code.google.com/p/gmaps-samples/source/browse/trunk/geocoder/java/GeocodingSample.java?r=2476)）。然后你可以在地图上创建谷歌地图标记。这里是示例代码[http://www.paulwest.co.uk/article.php/using-google-maps-api-to-mark-your-location-and -地址](http://www.paulwest.co.uk/article.php/using-google-maps-api-to-mark-your-location-and-address)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:50:18.897

嘿伙计们，这段代码最终帮助了它，感觉非常高兴，非常感谢::

```
<sql:setDataSource var="enterdata" 
                driver="com.mysql.jdbc.Driver" 
                user="root" password="root" 
                url="jdbc:mysql://localhost/enterdata" />
            <sql:query var="list" dataSource="${enterdata}" 
            sql= "SELECT * from cropdata where FarmerName=\"${param.FarmerName}\"" />
            <script type="text/javascript" src="http://maps.google.com/maps/api/js?      sensor=false"></script>

           <script type="text/javascript">

var markers = [<c:forEach var="s" items="${list.rows}">
    ['Farmer Name :${s.FarmerName}<br>Crop Type:${s.CropName}',${s.Latitude},${s.longitude}],
            </c:forEach>        
];

function initializeMaps() {
var latlng = new google.maps.LatLng(markers[0][1],markers[0][2]);
var myOptions = {
    zoom: 18,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.SATELLITE,
    mapTypeControl: false
};
var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
var infowindow = new google.maps.InfoWindow(), marker, i;
for (i = 0; i < markers.length; i++) {  
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(markers[i][1], markers[i][2]),
        map: map
    });
    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            infowindow.setContent(markers[i][0]);
            infowindow.open(map, marker);
        }
    })(marker, i));
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:10:50.097

首先，应该使用一个servlet。此 servlet 从数据库中获取数据并将其转换为 json 格式。

并且使用 ajax，获取 json 数据，然后使用 Google map JavaScript API。

# html - 在 RoR 中将带有 html 的字符串大写

> ID：11727802
> 
> 赞同：1
> 
> 时间：2012-07-30T18:55:59.663
> 
> 标签：html, ruby-on-rails, ruby

我正在用 RoR 构建一个网络应用程序。我该怎么做：

```
<b>this is my text</b> 
```

并将第一个单词大写，所以看起来像这样

```
<b>This is my text</b> 
```

我尝试过使用 capitalize 方法，但它不适用于 HTML。有没有办法做到这一点，最好不必安装任何额外的宝石？

（对于它的价值，字符串只包含`<b>`标签和文本。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:05:21.307

可能不是最优雅的解决方案，但应该可以完成这项工作：

```
yourstring[3,1] = yourstring[3,1].capitalize 
```

如果开头只有 <b>。您可能希望使用正则表达式来查找第一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T18:24:26.163

最简单的方法实际上是使用 CSS[`text-transform`属性](http://www.w3schools.com/cssref/pr_text_text-transform.asp)。假设你的字符串总是小写：

```
<b style="text-transform: capitalize;">this is my text</b> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:39:22.890

你可以做这样的事情，如果你在一个字符串变量中有多个粗体元素，可能需要扩展。

```
t = "<b>this is my text</b>"

t.gsub!(/(<b>)(.*)(<\/b>)/, "#{$1}#{($2).capitalize}#{$3}") 
```

使用这种方法你有更多的灵活性。如果您的标签发生变化，或者有时您没有标签，您可以轻松修改正则表达式以进行补偿。值得一提的是，这也可以，但更难扩展。

```
t =~ /(<b>)(.*)(<\/b>)/
t =  "#{$1}#{($2).capitalize}#{$3}" 
```

# php - 如何在不本地存储的情况下直接向用户输出 EXCEL 文件？

> ID：11727803
> 
> 赞同：0
> 
> 时间：2012-07-30T18:56:01.470
> 
> 标签：php, ajax, phpexcel

我正在使用 PHPExcel 生成带有从数据库中获取的信息的 excel 文件（对吗？）他可以访问它。

我怀疑这是正确的做法，我正在寻找的只是将文件发送到浏览器而不将其保存在服务器上。

**如何在不本地存储的情况下直接向用户输出 EXCEL 文件？**

代码：

```
$fileName  = "Request_" . $idRequest . "_Update.xls";
$objWriter = PHPExcel_IOFactory::createWriter($excel, 'Excel5');
$objWriter->save($fileName);
$objPHPExcel = PHPExcel_IOFactory::load($fileName);

echo json_encode(array(
        "ExitCode" => 0,
        "Message" => "Success",            
        "data" => $request,
        "File" => "../reports/$fileName"
    )); 
```

一旦我收到接收它`File`的`$.ajax`呼叫，只需将其添加到锚标记：

```
$.ajax({
       ...
       success : function(response){
           $('#container').append('<a href="'+response.File+'">Here is your file</a>
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:04:42.070

看一下这个。

```
//    reset all output buffering
    while (ob_get_level() > 0) {
        ob_end_clean();
    }
    header('Content-type: application/ms-excel');
    header('Content-Disposition:  inline; attachment; filename='.$filename);

    // we can't send any more headers after this
    flush();

    $excel = new PhpExcel();
    $excel->setActiveSheetIndex(0);
    $sheet = $excel->getActiveSheet();
    // in this example, $data was an array in the format row => value
    //  data structure is not relevant to issue
    foreach ($data as $key => $value) {
         // add data to sheet here
         $sheet->SetCellValue('A' . $key, $value);
         // etc...
    }
    $writer = new PHPExcel_Writer($excel);
    // push to browser
    $writer->save('php://output'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:01:27.093

[对此问题](https://stackoverflow.com/questions/761682/how-to-open-a-file-using-javascript)的已接受响应显示了如何处理提供文件以供下载的成功响应，或由 js 处理的失败响应（例如，显示在当前 html 页面中）而没有 mime 类型问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:00:23.587

您可以发送一个

`header("Content-Disposition: attachment; filename=\"file.xls\"");`

强制下载，然后

`header("Content-type:application/vnd.ms-excel");`

说浏览器您正在发送一个 excel 文件，最后只是将该文件作为 html 回显`table`：

```
<?php
header("Content-Disposition: attachment; filename=\"file.xls\"");
header("Content-type:application/vnd.ms-excel");
echo "<html><table>...</table></html>";  // your table data here..
?> 
```

Excel 可以`.html`用 s 打开文件，`<table>`所以应该没有问题。

# erlang - 带有沙发底座的 Erlang 视图

> ID：11727806
> 
> 赞同：0
> 
> 时间：2012-07-30T18:56:10.990
> 
> 标签：erlang, views, couchdb, couchbase

有人在 Couchbase 中使用 Erlang 视图吗？如果是这样，你会做什么，你的经验是什么？

我正在考虑从 CouchDB 迁移到 Couchbase ......

谢谢灭霸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:45:52.330

Couchbase Server 2.0 仅支持 JavaScript 视图。但是，我们对执行 JavaScript 的方式进行了重大更改，因此不再有性能方面的原因来使用 Erlang 编写视图。

详细信息：我们从 Spidermonkey 迁移到 V8，并且我们现在有一个进程内模型，因此我们不必在进程之间发送数据。

以下是 2.0 的 Couchbase 视图的详细信息：http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views.html)

# java - HashMap Java 示例以避免冲突

> ID：11727811
> 
> 赞同：6
> 
> 时间：2012-07-30T18:56:27.053
> 
> 标签：java, hashmap

我`HashMap`在 java 中使用来存储密钥和`Object <Key,Object>`. 我阅读了关于 hashmap 冲突的信息，并试图通过使用链表来避免它。

我在网上做了一些搜索，但找不到如何执行此操作的示例。

有人可以指出我使用链表实现哈希图的在线资源吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T18:58:58.910

Java HashMap 已经以这种方式为您处理冲突。您需要做的就是确保您正在覆盖和实现密钥`hashCode()`和`equals()`方法。

每个都`hash code`将映射到一个特定的“桶”。每个桶都包含一个用于冲突情况的链表。

避免（或更确切地说是*最小化*）冲突的唯一方法是创建一个散列函数，该函数在整个 HashMap 中创建最佳的值分布。根据 HashMap 的密度和 HashMap 的质量`hash code`，冲突几乎是不可避免的，因此需要覆盖这两种方法。

**编辑**：OP要求举个例子

要覆盖这两种方法：

```
public class MyObject {
  String var1;
  int var2;

  //...
  public boolean equals(Object obj) {
    if(obj == null) return false;
    if(this == obj) return true;      // Reference equality
    if(!(obj instanceof MyObject)) return false;
    MyObject myObj = MyObject(obj);
    return (var1.equals(myObj.var1)) && (var2 == myObj.var2); 
  }
  public int hashCode {
     return var1.hashCode() ^ var2;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T19:02:29.537

仅当您使用与`object`key 相同或`object`与具有相同[哈希码](https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode())和[equals](https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))的 key 不同时才会发生冲突。

为了正确使用 HashMap，您应该在关键类中正确实现 hashCode 和 equals 方法。阅读 Object 文档和[这篇文章](https://www.journaldev.com/21095/java-equals-hashcode)。

如果要按键存储多个对象，则应创建列表的 HashMap。

这是一个简单的例子：

```
HashMap<Object, List<Object>> map = new HashMap<Object, List<Object>>();
map.put(key, new LinkedList<Object>);
map.get(key).add(object); 
```

# internet-explorer - 如何获得对 HTA 打开的对话框的 IE9 标准支持？

> ID：11727815
> 
> 赞同：3
> 
> 时间：2012-07-30T18:56:34.603
> 
> 标签：internet-explorer, modal-dialog, hta

我正在将我的一些旧 HTA 从 Quirks 转换为 IE9 标准。但是，HTA 打开的模态和非模态对话框似乎不支持 IE9 标准模式。

测试对话框：

```
<!DOCTYPE html>
<html>
<head>
<title>TestDialog</title>
<meta http-equiv="x-ua-compatible" content="ie=9" />
</head>
<body>
<svg>
    <circle cx="100" cy="100" r="50" fill="#0f0" />
</svg>
</body>
</html> 
```

在 HTA 主页中：

```
<button onclick="showModalDialog(...)">Modal</button>
<button onclick="showModelessDialog(...)">Modeless</button> 
```

从 HTA 打开 TestDialog 时，它是空的。如果主页是常规的 html 文档，则绿色圆圈会出现在对话框中。从 HTA 打开时，对话文件本身是 htm 还是 hta 没有区别。

我也测试过`addEventListener()`，但它也不会在对话框中工作。

那么，从 HTA 打开时，我可以“强制”对话框支持 IE9 标准吗？

* * *

**编辑**

从 HTA 打开的模态和非模态对话框似乎处于 IE8 级别。在 Windows7 中使用 IE10 时也会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:14:33.093

这个问题中的关键字的快速谷歌给了我微软 MSDN 网站上的这个页面：http: [//msdn.microsoft.com/en-us/subscriptions/ms536496 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/subscriptions/ms536496(v=vs.85).aspx)

您的问题的答案在页面上。答案是在`x-ua-compatible`您的 HTML 部分中添加一个元标记`<head>`。

去引用：

> 默认情况下，HTA 在兼容性视图中显示网页，在 IE7 标准模式下显示标准模式内容，在 IE5 (Quirks) 模式下显示怪癖模式内容。要利用当前版本的 Internet Explorer 可用的功能，请使用 meta 元素为您的 HTA 定义 X-UA-Compatible 标头

标签看起来像这样：

```
<meta http-equiv="x-ua-compatible" content="ie=9"> 
```

以上是根据MSDN网站。事实上，我建议使用`content="ie=edge"`会比指定 IE9 模式更好。否则，当您升级到 IE10 时，您将失去 IE10 中的任何新功能。

# java - 如何编写将按下 Shift、Home 和 End 键盘按钮的 Java 代码？

> ID：11727819
> 
> 赞同：0
> 
> 时间：2012-07-30T18:56:41.037
> 
> 标签：java

我在谷歌上能找到的只是添加侦听器和事件以等待按钮被按下的代码。

我正在努力让代码真正按下按钮。

我知道 KeyModifier.SHIFT 和 Key.HOME 存在，但我不知道如何使用它们或者它们是否是正确的关键字。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:03:02.637

看看机器人类：[http](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html) ://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html 但要小心，因为我发现自己陷入循环或者只是卡住了我的鼠标和键盘被机器人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:00:43.737

尝试查看“机器人”类：

*   [http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html#keyPress%28int](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html#keyPress%28int)

# python - 使用 python 读取 .vtk 文件

> ID：11727822
> 
> 赞同：20
> 
> 时间：2012-07-30T18:56:45.337
> 
> 标签：python, vtk

我得到了一个旧格式的 vtk 文件（我认为它是一个非结构化网格），我想用 python 读取它并输出一个 .npy 文件，因为我知道如何处理它。

该文件是来自 ATHENA 的转储文件，因此具有密度、速度、磁场以及坐标。

我是一个非常程序化的程序员，所以所有这些对象都令人困惑......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T21:15:04.410

Here is the solution that I came up with, the trick was turning on ReadAllVectorsOn().

```
import numpy
from vtk import vtkStructuredPointsReader
from vtk.util import numpy_support as VN

reader = vtkStructuredPointsReader()
reader.SetFileName(filename)
reader.ReadAllVectorsOn()
reader.ReadAllScalarsOn()
reader.Update()

data = reader.GetOutput()

dim = data.GetDimensions()
vec = list(dim)
vec = [i-1 for i in dim]
vec.append(3)

u = VN.vtk_to_numpy(data.GetCellData().GetArray('velocity'))
b = VN.vtk_to_numpy(data.GetCellData().GetArray('cell_centered_B'))

u = u.reshape(vec,order='F')
b = b.reshape(vec,order='F')

x = zeros(data.GetNumberOfPoints())
y = zeros(data.GetNumberOfPoints())
z = zeros(data.GetNumberOfPoints())

for i in range(data.GetNumberOfPoints()):
        x[i],y[i],z[i] = data.GetPoint(i)

x = x.reshape(dim,order='F')
y = y.reshape(dim,order='F')
z = z.reshape(dim,order='F') 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-18T17:52:39.527

[meshio](https://github.com/nschloe/meshio)（我的一个项目）知道 VTK 格式，所以你可以简单地

```
pip install meshio 
```

接着

```
import meshio
mesh = meshio.read('file.vtk')
# mesh.points, mesh.cells, ... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-10T01:31:02.247

这是一个使用 VTK Python SDK 将多边形数据从 VTK 文件中读取到 numpy 数组中的脚本：

```
import sys

import numpy
import vtk

reader = vtk.vtkPolyDataReader()
reader.SetFileName(sys.argv[1])
reader.Update()

polydata = reader.GetOutput()

for i in range(polydata.GetNumberOfCells()):
   pts = polydata.GetCell(i).GetPoints()    
   np_pts = numpy.array([pts.GetPoint(i) for i in range(pts.GetNumberOfPoints())])
   print np_pts 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-15T00:54:32.113

值得一提的是，在其最新版本中，yt 项目[http://yt-project.org/](http://yt-project.org/)包括对 ATHENA 的支持，这意味着无论如何这是使用 python 分析模拟数据的方式。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-31T23:01:16.043

你试过用paraview吗？(http://www.paraview.org/) 它可以让您直观地了解幕后发生的事情，并且可以以多种不同的方式输出文件。我建议这样做，因为我不知道您的数据是什么样的。[http://www.vtk.org/Wiki/VTK/Examples/Python](http://www.vtk.org/Wiki/VTK/Examples/Python)也可能有一个适合您的示例。就个人而言，我会玩 paraview 并从那里开始。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-09-14T09:39:09.247

这是从旧 VTK 文件中读取点的简短片段：

```
import numpy as np
import vtk

filename = 'model.vtk'

reader = vtk.vtkGenericDataObjectReader()
reader.SetFileName(filename)
reader.Update()

points = np.array( reader.GetOutput().GetPoints().GetData() ) 
```

变量`points`是 (N,2) 或 (N,3) 数组，其中 N 是点数。

# ios - 应用商店提交-新发布列表

> ID：11727829
> 
> 赞同：0
> 
> 时间：2012-07-30T18:56:59.953
> 
> 标签：ios, app-store-connect

这与代码无关，但这是我在使用 iPhone 应用程序时遇到的问题。

我提交了两个应用程序（单独的二进制文件），一个用于 iphone，一个用于 ipad。它们的名称和屏幕截图略有不同，但图标图形相同。这两个应用程序都获得了 Apple 的批准，但只有 iPad 版本在 iTunes 的类别中的“查看全部”列表中列出。我想知道为什么iphone版本没有出现在对应列表中。

我的问题是，这是我做过的事情还是苹果做过的事情？

# iphone - 将 UIButton 隐藏为 IBAction

> ID：11727832
> 
> 赞同：1
> 
> 时间：2012-07-30T18:57:01.887
> 
> 标签：iphone, xcode, uibutton

通常隐藏 UIButton 并不难，但我将其设置为 IBAction 而不是 IBOutlet。这是必要的，因为当按下按钮时，会弹出文本，但我希望按钮消失。解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:01:42.220

您可能像这样声明了您的 IBAction：

```
- (IBAction)myButtonAction; 
```

它应该是：

```
- (IBAction)myButtonAction:(id)sender; 
```

因为那你可以在方法中做

```
- (IBAction)myButtonAction:(id)sender
{
    if([sender respondsToSelector:@selector(setHidden:)])
        [sender setHidden:YES];
} 
```

所有的 IBAction 都可以支持接收它们的发送者作为一个函数。但是，如果不同的 UI 元素调用该函数，它也会被隐藏。此外，使用上述方法，您将无法取消隐藏按钮，如果您需要这样做，您可能最好使用 IBOutlet - 在 5.0+ 中，您可以使用`weak`不保留的关键字如果对象被销毁，引用并自动为零，在 4.x 中，您只需要记住在 viewDidUnload 上将其设置为 nil。

# node.js - Express.js 使用 .is() 检查请求类型不起作用

> ID：11727836
> 
> 赞同：4
> 
> 时间：2012-07-30T18:57:23.470
> 
> 标签：node.js, express

我正在尝试检查内容的类型，但它似乎不起作用。这是外壳上的输出：

```
$ node app.js
# Request http://localhost:3000 via browser
CLIENT DOES NOT WANT XML, JSON, OR HTML
text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

这是 app.js 脚本的内容：

```
var express = require('express');
var app = express.createServer();

app.get('/', function(req, res) {
    if (req.is('xml')) {
        console.log("CLIENT WANTS XML");
    } else if (req.is('json') || req.is('html')) {
        console.log("CLIENT WANTS JSON OR HTML");
    } else {
        console.log("CLIENT DOES NOT WANT XML, JSON, OR HTML");
        console.log(req.header('Accept'));
    }
});

app.listen(3000); 
```

我希望`text/html`Accept 标头触发`req.is('html')`函数，甚至`application/xhtml+xml`Accept 标头触发`req.is('xml')`，但该`else`语句实际上会运行。我正在使用 Express 3.0.0 rc1 和 Node 0.8.1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:04:32.770

原来我应该使用`.accepts()`, 而不是`.is()`.

# php - 子域类似于 $_SERVER['SERVER_NAME']; 重定向？

> ID：11727843
> 
> 赞同：0
> 
> 时间：2012-07-30T18:57:59.470
> 
> 标签：php, redirect

我有一个通过自定义 php 文件重定向的表单（使用重力表单构建）。

如果我将重定向到“/custom_redirect.php”，表单会将我发送到“http://www.subdomain.mydomain.com/:/custom_redirect.php”，这会导致 404，因为“/:”或“ :/" 但是你想看看它。

如果我通过“http://www.mydomain.com/custom_redirect.php”获取它，它会正常工作。但我需要先获取它们来自的 URL，以便将其包含在

```
header( 'Location: .........') 
```

如果我抓住

```
$x = $_SERVER['REQUEST_URI'];
$y = $_SERVER['SERVER_NAME']; 
```

他们打印

```
(x).... /custom_redirect-x.php?JOHN+DOE&title=FOO+BAR
(y).... www.mydomain.com 
```

类似于 $y, "$_SERVER['SERVER_NAME'];",

...有没有办法抓住子域，所以我可以结束

```
(y).... www.SUBDOMAIN.mydomain.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:14:13.133

你想[`parse_url`](http://dk2.php.net/manual/en/function.parse-url.php)结合起来看[`$_SERVER['HTTP_REFERER']`](http://dk2.php.net/manual/en/reserved.variables.server.php)

```
 $info = parse_url($_SERVER['HTTP_REFERER']);
 echo $info['host']; 
```

# c# - ASP.NET 未知输出异常和连接 SQL Server 的消息

> ID：11727847
> 
> 赞同：-1
> 
> 时间：2012-07-30T18:58:05.353
> 
> 标签：c#, asp.net, sql-server-2008, webpage

我创建了一个新网站。我添加了一个 Web 表单`Default2.aspx`，通过从工具箱中拖动它来创建一个网格视图。然后添加以下代码

```
 <asp:GridView ID="GridView1" runat="server"><Columns>
 <asp:TemplateField HeaderText="Email" >
 <ItemTemplate>
 <asp:Label ID="lbl_Email" Text='<%# Bind("User_Email")%>' runat="server"></asp:Label>
 </ItemTemplate>
 <ItemStyle Font-Size="15px" />
 </asp:TemplateField>
 <asp:TemplateField HeaderText="First Name" >
 <ItemTemplate>
 <asp:Label ID="lbl_first_name" Text='<%# Bind("User_First_Name")%>'   runat="server">     </asp:Label>
 </ItemTemplate>
 <ItemStyle Font-Size="15px" />
 </asp:TemplateField>
 <asp:TemplateField HeaderText="Last Name" >
 <ItemTemplate>
 <asp:Label ID="lbl_last_name" CssClass="aLinkButton" Text='<%# Bind("User_Last_Name")%>' runat="server"></asp:Label>
 </ItemTemplate>
 <ItemStyle Font-Size="15px" />
 </asp:TemplateField>
 </Columns>
    </asp:GridView> 
```

然后在`aspx.cs`页面中我添加了以下代码将表格绑定到我的 gridview1

```
public partial class Default2 : System.Web.UI.Page
{
   string strcon = "Server=BLR-MTP-IBM-91;Database=IBM;Trusted_Connection=True;";
// connection string //

SqlConnection con = new SqlConnection();
// opened connection

SqlCommand com = new SqlCommand(); // for query

DataSet ds = new DataSet();

SqlDataAdapter da;

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bindgrid();
    }
}

private void bindgrid()
{
    ds.Clear();
    con.ConnectionString = strcon;
    com.Connection = con;
    con.Open();

    string strquery = "select * from users;";

    da = new SqlDataAdapter(strquery, con);

    da.Fill(ds);

    GridView1.DataSource = ds;
    GridView1.DataBind();
    con.Close();

    }
} 
```

在我的 SQL Server 2008 R2 中，我创建了一个名为的数据库`IBM`和一个列名为的表

```
User_Email, User_First_Name, User_Last_Name 
```

错误窗口中没有显示错误。在输出窗口中，我可以看到以下消息：

工具 - 选项 - 调试 - 删除断点并仅启用我的代码，我删除了很多。我删除了一些但我不确定。问题是什么。我是个新手。头破了好久。终于来解决堆栈溢出问题了。

> 30319))：已加载 'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website4\e495d551\13a31e82\App_global.asax.9ug4n6nu.dll'，符号已加载。'WebDev.WebServer40.EXE'（托管 (v4.0.30319)）：加载 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\System.Web.Mobile\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.Mobile .dll''WebDev.WebServer40.EXE'（托管 (v4.0.30319)）：加载 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Activation\v4.0_4.0.0.0__31bf3856ad364e35\System。 ServiceModel.Activation.dll''WebDev.WebServer40.EXE'（托管（v4.0.30319））：加载'C：\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\System.Web.Extensions\v4.0_4.0.0.0__31bf3856ad364e35 \System.Web.Extensions.dll''WebDev.WebServer40.EXE'（托管（v4.0.30319））：加载'C：（托管 (v4.0.30319)）：已加载“C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website4\e495d551\13a31e82\App_Web_wzu153su.dll”，已加载符号。“WebDev.WebServer40.EXE”（托管（v4.0.30319））：已加载“A_e34e3632_6676_413f_a677_eaf48e7b990b”“WebDev.WebServer40.EXE”（托管（v4.0.30319））：已加载“C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL \System.Web.Entity\v4.0_4.0.0.0__b77a5c561934e089\System.Web.Entity.dll''WebDev.WebServer40.EXE'（托管（v4.0.30319））：加载'C:\WINDOWS\Microsoft.Net\ assembly\GAC_MSIL\System.Data.Services.Design\v4.0_4.0.0.0__b77a5c561934e089\System.Data.Services.Design.dll''WebDev.WebServer40.EXE'（托管（v4.0.30319））：加载'C： \WINDOWS\Microsoft.NET\Framework\v4.0.30319\临时 ASP。NET 文件\website4\e495d551\13a31e82\App_Web_tn3t0nc2.dll'，已加载符号。'WebDev.WebServer40.EXE'（托管 (v4.0.30319)）：加载 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\Microsoft.Web.Infrastructure\v4.0_1.0.0.0__31bf3856ad364e35\Microsoft.Web.Infrastructure .dll''WebDev.WebServer40.EXE'（托管 (v4.0.30319)）：加载 'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website4\e495d551\13a31e82\App_Web_vccklmdo。 dll'，已加载符号。程序“[3668] WebDev.WebServer40.EXE: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。0__31bf3856ad364e35\Microsoft.Web.Infrastructure.dll''WebDev.WebServer40.EXE'（托管（v4.0.30319））：加载'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website4 \e495d551\13a31e82\App_Web_vccklmdo.dll'，已加载符号。程序“[3668] WebDev.WebServer40.EXE: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。0__31bf3856ad364e35\Microsoft.Web.Infrastructure.dll''WebDev.WebServer40.EXE'（托管（v4.0.30319））：加载'C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website4 \e495d551\13a31e82\App_Web_vccklmdo.dll'，已加载符号。程序“[3668] WebDev.WebServer40.EXE: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:06:03.670

尝试将我们的代码拆分成块，首先看看你是否能够获得你的数据库连接？如果它成功完成而不是进行数据检索。一旦完成，就可以进行数据绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:44:51.253

你用什么数据库？这个连接字符串看起来不像是一个 sql server。它应该看起来像：Data Source=.;Initial Catalog=Northwind;Integrated Security=True

如果您确定连接正确，请尝试从 gridView 中删除模板。保留默认的空 gridView 控件。当数据到来时，网格应该显示数据集包含的所有内容。我现在用 sql server 试过了，它可以工作。

如果它不起作用，我认为与 db 的连接是错误的。但我猜应该抛出一些错误。当然在您的测试表中您有任何数据吗？;)

您是否在页面源代码中看到了一个空的网格表？渲染了吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T19:08:29.273

尝试

```
string strquery = "SELECT * FROM users" 
```

# asp.net - 无法加载文件或程序集“System.Core，版本=3.5.0.0”

> ID：11727852
> 
> 赞同：3
> 
> 时间：2012-07-30T18:58:23.253
> 
> 标签：asp.net, .net, visual-studio-2010, visual-studio, asp.net-4.0

我有一个最近升级为在 .NET 4.0 上运行的 ASP.NET 3.5 解决方案。尽管如此，该解决方案中的大多数项目似乎仍以 .NET 3.5 框架为目标。

话虽如此，我现在无法调试任何这些项目。我收到以下错误：

```
解析器错误消息：无法加载文件或程序集“System.Core，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

```

```
=== 预绑定状态信息 ===  
日志：用户 = 我的用户名
日志：DisplayName = System.Core，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35  
     （完全指定）
日志：Appbase = file:///C:/Projects/myprojectpath/
日志：初始 PrivatePath = C:\Projects\myprojectpath\bin
调用程序集：（未知）。
===
LOG：此绑定在默认加载上下文中开始。
LOG：使用应用程序配置文件：C:\Projects\myprojectpath\web.config   
日志：使用 C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config 中的机器配置文件。
日志：政策后参考：System.Core，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35
LOG：之前看到过相同的绑定，但由于 hr = 0x80070002 失败。

```

我已经手动编辑了我的项目文件，如此[处所述，](https://stackoverflow.com/questions/1302488/the-type-or-namespace-name-linq-does-not-exist-in-the-namespace-system-data/4331322#4331322)并添加了以下几行：

```
<Reference Include="System.Core">
  <RequiredTargetFramework>3.5</RequiredTargetFramework>
</Reference> 
```

但这并没有什么好处。有人可以解释为什么我收到此错误消息以及如何解决它吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:40:25.197

我碰巧使用了以下控件：

```
<assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>

        </assemblies> 
```

相反：

```
 <assemblies>
            <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>

        </assemblies> 
```

或相反亦然。你可能想检查一下。或者将整个项目（框架或页面）迁移到 .net 4.0 中。有时当我需要处理不同的框架时，我会删除目标框架行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:40:37.307

就我而言，web.config 中有一行必须删除。

```
<pages enableEventValidation="true">
    <namespaces>
        <add namespace="System.Linq"/>
    </namespaces>
    <controls>
        <!--<add tagPrefix="asp" namespace="System.Linq" assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>-->
    </controls>
</pages> 
```

（实际上我也能够安全地发表评论`<add namespace="System.Linq"/>`。

# gcc - 获取当前的 GCC 架构

> ID：11727855
> 
> 赞同：43
> 
> 时间：2012-07-30T18:58:35.327
> 
> 标签：gcc

`-march`如果我不提供任何参数，如何找出当前架构的默认参数是什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-31T11:56:45.740

`gcc -dumpmachine`给你目标三元组，例如`x86_64-unknown-linux-gnu`

如果`gcc -v`显示 GCC 配置了一个`--with-arch`选项（或`--with-arch-32`和/或`--with-arch-64`），那么这将是默认设置。

如果没有`--with-arch`选项（并且如果没有使用自定义规范文件），则使用的拱门将是目标的默认设置。

对于 x86，直到并包括 GCC 4.4，32 位的默认值是`-march=i386`，64 位的默认值是`-march=x86-64`（注意连字符而不是下划线。）

对于带有 GCC 4.5 和更高版本的 x86，默认架构是从目标三元组推断出来的，即配置为`i586-pc-linux-gnu`表示默认为`-march=i586`，配置为`core2-pc-linux-gnu`表示默认为`-march=core2`。

其他一些平台也从目标三元组推断出默认拱门（并且在 GCC 4.4 之前已经这样做了），因此例如`ultrasparc2-sun-solaris2.10`暗示`-march=ultrasparc2`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-25T20:00:36.097

我在打印默认值和参数的[GCC 邮件列表](https://gcc.gnu.org/ml/gcc-help/2011-11/msg00250.html)中找到了这个 gem ：`-march``mtune`

```
$ echo | gcc -v -E - 2>&1 | grep cc1
 /usr/lib/gcc/x86_64-unknown-linux-gnu/4.9.0/cc1 -E -quiet -v - -mtune=generic -march=x86-64 
```

基本上，您正在从 stdin 编译一个空文件，并在此过程中打印命令。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-02T23:25:34.960

您可以使用`gcc -Q --help=<type>`列出给定的当前选项值`<type>`。因此：

```
$ gcc -Q --help=target | grep march
  -march=                           x86-64
$ gcc -m32 -Q --help=target | grep march
  -march=                           i686
$ i686-w64-mingw32-gcc -Q --help=target | grep march
  -march=                           pentiumpro 
```

编辑：实际上，这个选项并不像看起来那么有用，因为特定于目标的默认值[不会反映在 output 中](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=39851)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-30T20:14:48.187

运行命令

```
gcc -v 
```

将显示如下内容：

```
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/lto-wrapper
Target: x86_64-unknown-linux-gnu
Configured with: /build/src/gcc-4.7.1/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --disable-libstdcxx-pch --enable-libstdcxx-time --enable-gnu-unique-object --enable-linker-build-id --with-ppl --enable-cloog-backend=isl --disable-ppl-version-check --disable-cloog-version-check --enable-lto --enable-gold --enable-ld=default --enable-plugin --with-plugin-ld=ld.gold --with-linker-hash-style=gnu --enable-multilib --disable-libssp --disable-build-with-cxx --disable-build-poststage1-with-cxx --enable-checking=release
Thread model: posix
gcc versie 4.7.1 (GCC) 
```

这`Target:`条线就是你想要的。您应该能够从中推断出足够的信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T21:23:43.273

我认为答案是没有任何等价物。要么您不指定`-march=`并且编译器使用体系结构的最小指令集，要么您指定`-march=`并且它使用您要求的任何 cpu 模型的功能。所以没有办法写一个`-march=`相当于省略选项的`-march`选项。

也许如果你解释是什么激发了这个问题，我们可以改进这个答案。

# android - Android：如何在 IntentService 中获取调用活动的上下文？

> ID：11727856
> 
> 赞同：3
> 
> 时间：2012-07-30T18:58:35.313
> 
> 标签：android, intentservice

如果我打电话

```
Intent intent = new Intent(ReadingActivity.this, AdService.class);
startService(intent); 
```

从类的`onCreate`方法中`MyActivity`，如何`MyActivity.this`从类的`onHandleIntent()`方法中访问`IntentService`

```
@Override
protected void onHandleIntent(Intent arg0) {
    // TODO Auto-generated method stub
    ((BookLib) getApplication()).createAd(I need to pass the calling activities context here);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T19:10:35.633

> 如何从 IntentService 类的 onHandleIntent 方法中访问 MyActivity.this

你没有。

进入`createAd()`活动。如果时间是一个问题，请使用 an`AsyncTask`而不是`IntentService`.

An`IntentService`主要用于您希望工作与*任何*活动分离的情况（例如，即使用户离开您的 UI 继续做其他事情，文件下载也应该继续）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:10:23.200

`Activity`在我看来，您似乎正在尝试与您的和进行双向通信`Service`。不要向您的服务发送一个，而是`Intent`考虑[绑定](http://developer.android.com/guide/components/bound-services.html#Binder)到它。

编辑：回应 CommonsWare 的评论：

绑定到的问题在哪里`IntentService`？我已经发布了运行良好的应用程序，其中包含一个绑定的`IntentService`. 您没有提供任何证据来支持您的主张。

从[这里](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)：

> 服务既可以启动，也可以绑定连接。在这种情况下，只要服务已启动或有一个或多个带有`Context.BIND_AUTO_CREATE`标志的连接，系统就会保持服务运行。一旦这两种情况都不成立，`onDestroy()`就会调用服务的方法并有效地终止服务。从`onDestroy()`.

文档清楚地表明系统支持同时绑定和启动。使用`IntentService`常规`Service`并不会改变这一点。即使您在处理 后明确停止服务`Intent`，只要仍然绑定了某些东西，Android 就会让它继续运行。

此外，根据 OP 试图做什么，`IntentService`可能不再需要。

# imagemagick - ImageMagick 批量调整大小性能

> ID：11727860
> 
> 赞同：14
> 
> 时间：2012-07-30T18:58:52.973
> 
> 标签：imagemagick

```
转变 \
   原始.jpg \
  -质量 85 \
  -色彩空间 RGB \
  -profile /var/tmp/sRGB.icm \
  -条 \
  -profile /var/tmp/sRGB.icm \
  -过滤兰佐斯\
  -写mpr：17JPCONV1-原始\
  +删除\
mpr:17JPCONV1-original -crop '3000x2001+0+491' -resize '190x126!>' -write thumbWide.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '75x75!>' -write thumbStandard.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '163x163!>' -write hpSmall.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '1024x1019!>' -write jumbo.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '190x189!>' -write articleInline.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '2048x2037!>' -write superJumbo.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '592x589!>' -write tmagArticle.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '3000x2983!>' -write popup.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '640x640!>' -write square640.jpg +delete \
mpr:17JPCONV1-original -crop '3000x1689+0+647' -resize '3000x1688!>' -write videoSmall.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '503x500!>' -write slide.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '151x151!>' -write moth.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2001+0+491' -resize '337x225!>' -write hpMedium.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2001+0+491' -resize '395x264!>' -write sfSpan.jpg +delete \
mpr:17JPCONV1-original -crop '3000x1689+0+647' -resize '3000x1688!>' -write videoLarge.jpg +delete \
mpr:17JPCONV1-original -crop '3000x1689+0+647' -resize '511x288!>' -write hpLarge.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '320x320!>' -write square320.jpg +delete \
mpr:17JPCONV1-original -crop '3000x1689+0+647' -resize '600x338!>' -write articleLarge.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2001+0+491' -resize '3000x2000!>' -write videoThumb.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '150x150!>' -write thumbLarge.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '533x530!>' -write blog533.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '151x151!>' -write blogSmallInline.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '362x360!>' -write tmagSF.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '190x190!>' -writefilmstrip.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '480x478!>' -write blog480.jpg +delete \
mpr:17JPCONV1-original -crop '3000x2983+0+0' -resize '427x425!>' -write blog427.jpg +delete \
mpr:17JPCONV1-original -crop '2981x2983+8+0' -resize '50x50!>' -write blogSmallThumb.jpg +delete \
mpr:17JPCONV1-original -crop '3000x1401+0+791' -resize '151x70!>' miniMoth.jpg;

```

我正在尝试使用一个命令从原始文件生成约 30 个作物（使用一个命令比对每个作物使用一个命令要快得多）。但是，这需要相当长的时间（约 30 秒）才能完成。有什么建议可以加快速度吗？调整大小命令可以通过 OpenCL 利用 GPU 吗？

更新：

*   使用 -thumbnail 而不是 -resize 可以改善情况
*   （感谢@AR 的提示）使用 libjpeg-turbo 编译 ImageMagick 也将时间缩短了 20%

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-30T19:47:58.377

您应该检查您的 ImageMagick 安装是否带有 OpenCL 支持：

```
convert -list configure | grep FEATURES 
```

如果确实如此（就像我的一样），您应该会看到如下内容：

```
FEATURES      HDRI OpenCL 
```

这个命令

```
convert -version 
```

还应该提供有关支持的功能的信息。

如果没有，您应该查看已编译的最新版本的 ImageMagick，该版本已编译 OpenCL 支持。或者如果您自己从源代码构建包，请确保使用 OpenCL。

* * *

**更新：**

等一下。还有另一个功能可以帮助您，称为*OpenMP*（用于*多处理*）。

启用 OpenMP 后，ImageMagick 命令可以在系统的所有内核上并行执行。因此，如果您有一个四核系统并调整图像大小，则调整大小发生在 4 个核心上（如果您有超线程，甚至是 8 个）。

您现在还可以使用内置`-bench`选项让 ImageMagick 为您的命令运行基准测试。例如：

```
convert logo: -resize 500% -bench 10 logo.png
  Performance[1]: 10i 0.689ips 1.000e 14.420u 0:14.510 
```

此命令`-resize 500%`告诉 ImageMagick 运行`convert`命令以将内置 IM`logo:`图像在每个方向上缩放 500%。该`-bench 10`部分告诉它在循环中运行相同的命令 10 次，然后打印性能结果：

*   由于我没有启用 OpenMP，因此我只有 1 个线程 ( `Performance[1]:`)。
*   它报告它运行了 10 次迭代 ( `10i`)。
*   速度接近每秒 0.7 次迭代 ( `0.689ips`)。
*   用户分配的总时间为 14.420 秒。

您应该使用以下命令了解您的系统是如何设置资源限制的：

```
识别 -list 资源
  文件区内存映射磁盘线程时间
  -------------------------------------------------- ------------------
   192 4.295GB 2GiB 4GiB 无限制 1 无限制

```

你可以看到我当前系统的设置（默认值——我没有调整它们）。列标题中的每个关键字都可以使用您的系统来拉皮条。

*   `files`定义 ImageMagick 将使用的最大同时打开的文件。
*   、`memory`和资源限制以字节`map`为单位定义。*要将它们设置*为不同的值，您可以使用 SI 前缀，例如 500MB）。`area``disk`

 *如果我在这个系统上***有***OpenMP for ImageMagick，我可以运行

```
convert -limit thread 2 
```

为了启用 2 个并行线程，重新运行基准测试，看看它是否真的有所作为，如果有，有多少。我可以将限制设置为 4 甚至 8 并重复练习....

* * *

**最后**，您可以试验一下 ImageMagick 像素缓存的内部格式，称为`MPC`(Magick Pixel Cache)。有人说，对于大型操作，这里的性能会有所提高，但我没有个人经验。

首先将您的基础图片转换为 MPC：

```
convert input.jpeg input.mpc 
```

然后才运行：

```
convert input.mpc [...your long-long-long list of crops...] 
```

看看这是否可以大大节省您的时间。

很可能您甚至可以“内联”（使用特殊`mpr:`符号）使用这种 MPC 格式，类似于您应用使用将图像读入命名内存寄存器的`mpr:`格式（*内存程序寄存器）的技巧。*但是我从来没有尝试过这种技术来解决现实世界的问题，所以我不能说它在现实生活中是如何发挥作用的。

* * *

**更新 2：**

还有一个想法：

首先检查您的确切 ImageMagick 版本：运行`convert -version`。

如果您的 ImageMagick 在其版本字符串中有一个`Q16`（或什`Q32`至或`Q64`）（意思是，它的内部进程认为所有图像都具有 16 位通道深度，与 相比，这需要双倍的内存`Q8`）——这是现在的默认值——你可以测试通过切换到 Q8 构建，您将获得哪些性能优势。（你会用质量损失来支付你的性能胜利，你必须检查你是否能忍受它......）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-30T23:17:02.467

您的 CPU 时间将用于 3 个任务：

*   JPEG解压；
*   调整大小；
*   JPEG再压缩

（裁剪本身可能需要你 1% 的时间。）

要解码 JPEG，只需执行一次，将结果保存在 RAM 中，然后重复用于每个输出。（详情如下。）这样，成本将是微不足道的。

要编码 JPEG，请使用 libjpeg-turbo；相同的 API，但如果您使用 x86-{32,64} 或 ARM 硬件，则加速 2-4 倍。

要调整大小，ImageMagick 以使用除了 PhotoShop 和 GIMP 之外的任何其他软件大约 100 倍的 CPU 而闻名。这包括所有照片查看器。它在每个像素上做多个三角函数，而其他人只做一个乘法。有时，如果您查看图像边缘附近的像素，您会发现 ImageMagick 选择了比其竞争对手更好的颜色。但是如果你认为 HTML5、Flash、Silverlight、Java、GD（流行于 Perl、PHP 和 Python 网络应用程序）等看起来不错，那么你不需要这种伪 AI（人工智能）。您也许可以将 GPU (OpenCL) 马力或更多 CPU (OpenMP) 投入 ImageMagick，但何必呢？

为了提高效率，ImageMagick（事实上的标准）的等价物是 Imlib2。它几乎可以在与 ImageMagick 一样多的操作系统/语言环境中使用。

您的“转换”shell 命令相当于调用 Imlib2 的 10-20 行高级语言：解压缩 JPEG，然后反复裁剪、调整大小和压缩 JPEG。

没有裁剪（或多个输出）的示例是： [使用 Perl 拉伸、调整大小或缩略图](https://stackoverflow.com/questions/486874/how-can-i-stretch-or-resize-an-image-using-perl)

如果您想要其他示例，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-02T16:03:48.213

**聚会迟到了，但如果有人有同样的问题，这是我目前的方法。** 如果您要批量处理基本变换但要处理数千张图像，那么根据我的经验，您不会从 openMP 中获得太多好处，因为 openMP 对于“多核”大型复杂变换很有用。我的解决方案是一个 bash 脚本，用于并行生成各个进程。

```
#!/bin/bash
counter=0
for i in tif/*.TIF;
do
    y=${i%.TIF}
    ((counter++))
    if [ -s gif$y.gif ];then
        :
    else
        gm convert $i gif$y.gif &
    fi
    if [ $counter -eq 30 ];then 
        ((counter =0))
        wait
    fi
done
wait 
```

这会将“tif”目录中的所有 TIF 文件转换为“giftif”目录中的 gif。如果您必须停止此脚本，它将在下一次停止的地方继续。这会消耗我 MBP 中的所有 16 个内核，并且比单核方法快 12-14 倍，而我目前正在转换 150,000 张图像。*

# xcode - 函数内的预期表达式错误

> ID：11727871
> 
> 赞同：0
> 
> 时间：2012-07-30T18:59:24.103
> 
> 标签：xcode, function, media-player, fullscreen, ibaction

所以我正在尝试编写一个几乎只是播放媒体播放器的 IBAction 的函数。这在我正在编写的代码中是必要的，因为将使用多个视频，因此为了使我的代码更简洁，我想编写该函数，以便媒体播放器的代码进入一次而不是多次。当我尝试下面的代码时，它表明我在 IBAction 上有一个错误，指出“预期的表达式”。有任何想法吗？代码中还包含一个注释掉的 if 语句，该语句不起作用。基本上我希望这样当我单击全屏媒体播放器中提供的默认“完成”按钮时，窗口将关闭。现在所有完成按钮所做的就是停止视频，但我希望媒体播放器也关闭。

```
void moviePlayer (id vidName, id type);

void moviePlayer (id vidName, id type){

-(IBAction)playMovie{

NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"vidName" ofType:@"type"]];

MPMoviePlayerController *playerViewController = [[MPMoviePlayerController alloc] init];
playerViewController.contentURL = url;
if (self.interfaceOrientation == UIInterfaceOrientationLandscapeLeft || self.interfaceOrientation == UIInterfaceOrientationLandscapeRight){
    playerViewController.view.frame = CGRectMake(0, 0, 1030, 768);
}
else{
    playerViewController.view.frame = CGRectMake(0,0, 768, 1004);
}
[playerViewController setControlStyle: MPMovieControlStyleFullscreen];
[playerViewController setScalingMode:MPMovieScalingModeAspectFit];
playerViewController.view.AutoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
[self.view addSubview:playerViewController.view];
[playerViewController play];
/*if (playerViewController == stop){
 [self.playerViewController.view removeFromSuperview];

 }*/

self.playerViewController = playerViewController;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:04:41.183

看这部分代码：

```
void moviePlayer (id vidName, id type){

-(IBAction)playMovie{ 
```

您启动一个 C 函数并且不关闭它，然后尝试启动 Objective C 方法。可能这会更好？

```
void moviePlayer (id vidName, id type){
}
-(IBAction)playMovie{
    // other code
} 
```

# ruby-on-rails-3 - ActiveAdmin 表单不尊重：multiple => false

> ID：11727873
> 
> 赞同：2
> 
> 时间：2012-07-30T18:59:29.877
> 
> 标签：ruby-on-rails-3, activeadmin, formtastic

我正在使用 ActiveAdmin 并尝试执行 as: `:select`，`:collection`这不是多选。

我的代码是：

```
form do |f|
  f.input :users, :as => :select, :input_html => { :size => 1}, :multiple => false, collection: User.where(role:1), include_blank: false
end 
```

这是在哪里`/admin/businesses.rb`。关系是用户和企业之间存在habtm。我已经尝试重新排列我的选项，如[github issue](https://github.com/justinfrench/formtastic/issues/745)所示。我也看过一个[类似的 stackoverflow question](https://stackoverflow.com/questions/11399139/collection-select-within-activeadmin)。

但是，当我尝试使用 时`:multiple => false`，会生成以下代码：

```
<select id="business_user_ids" multiple="multiple" name="business[user_ids][]" size="1">    
<option value="4">Pilgrim</option>
<option value="5" selected="selected">Mary</option>
<option value="6" selected="selected">Bob</option>
<option value="7">Billy</option>
<option value="8">Ash</option></select> 
```

注意有两个被选中，多个的代码设置为`multiple`。有谁知道这是为什么？

另外，我试图弄清楚如何将另一个字段显示为可选字段。

例如，我有 f.inputs :users。有没有办法重命名：users 显示的内容？现在，它显示 users.name，但我想要 users.email。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:59:27.330

我也刚好碰到这个问题。经过一些代码跟踪后，我发现它与底层的 Formtastic 库是二重奏的。

Formtastic 优先于现有反射（has_many 和 has_and_belongs_to_many）而不是您传入的选项，以决定它是否是多重的。

我认为这是因为在 ?-to-many 关系上强制进行单选会导致一些混乱。就像你的数据一样，已经有两个选中了，严格单选应该显示什么？但我稍后可能会向 Formtastic 提出这个问题。

如果您仍然需要该功能，您可以通过将以下代码放在 config/initializers/formtastic.rb 中进行猴子修补

```
module Formtastic
  module Inputs
    class SelectInput
      def multiple_with_options_fix?
        return false if options[:multiple] === false
        multiple_without_options_fix?
      end

      alias_method_chain :multiple?, :options_fix
    end
  end
end 
```

对于您的第二个问题，您只需将以下代码添加到您的模型中。

```
class User < ActiveRecord::Base
  .....

  def to_label
    self.email
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T06:00:27.107

虽然 formtastic 在选项哈希中忽略 :multiple => true ，但在 input_html 选项中确实尊重它。试一试：

```
f.input :users, :as => :select, :input_html => { :size => 1, :multiple => false }, :multiple => false, collection: User.where(role:1), include_blank: false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:39:19.720

我不确定我是否正确理解了您的问题。您只想更改输入元素的标签还是更改显示的属性类型？如果它只是标签值，那么你可以使用

f.inputs :users, :label=>"Email"

我认为没有任何干净的方法可以在运行时更改标签。您可以通过检查参数哈希中的“动作”值来实现它。因此，例如，当您在新操作上显示此视图时，您可以说

```
<% if params[:action]="new"%>
f.inputs :users, :label=>"Email"
<%else%>
f.inputs :users, :label=>"Name"
<%end%> 
```

希望能帮助到你

# oracle - PL/SQL 异常/转到/循环

> ID：11727875
> 
> 赞同：0
> 
> 时间：2012-07-30T18:59:45.983
> 
> 标签：oracle, exception, plsql

我有一个程序应该有选择地从系统中清除作业。它用于`dbms_schedule.drop_job`执行此操作。

我希望能够在光标中循环遍历一组作业，每个作业都被删除。如果因为作业不存在而引发异常，我想捕获异常并继续循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:19:01.670

没有真正需要这样做。为什么不[`ALL_SCHEDULER_JOBS`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2046.htm#i1587306)使用正确的模式和作业名称将光标内部连接到 ？

这样你就可以保证这份工作确实存在。如果你想做一些除了忽略错误之外的事情，例如更新列表，你可以很容易地在代码中完成；无需使用异常进行流量控制。

如果您真的想使用异常，则可以使用[用户定义的异常](https://stackoverflow.com/questions/6020450/oracle-pl-sql-raise-user-defined-exception-with-custom-sqlerrm)。或者（不一定是一个好主意）绝对抓住一切；例如：

```
begin
   -- some stuff
   begin
      dbms_scheduler.drop_job(job_name => 'my_job');
   exception when others then
      -- do some stuff
   end;

end; 
```

# iphone - iOS 共享文件

> ID：11727883
> 
> 赞同：2
> 
> 时间：2012-07-30T19:00:04.360
> 
> 标签：iphone, ios, file-permissions

> **可能重复：**
> [如何将文件从一个应用程序传输到同一 iOS 设备中的另一个应用程序？](https://stackoverflow.com/questions/7034942/how-can-i-transfer-files-from-one-application-to-another-in-the-same-ios-device)

我有一个从网络下载到应用程序文档目录的应用程序中的文件。我想在另一个应用程序中打开这个文件（使用自定义 url 方案）。

我遇到了权限问题，因为应用程序是沙盒的，其他应用程序无法在我的应用程序的文档目录中看到该文件。

我可以将文件放在哪里以便其他应用程序可以读取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:06:22.387

您不能按照您的解释执行此操作。

您需要做的是设置您的应用程序以“接受”某些类型的文件。为此，您将您的应用程序“注册”为例如 PDF 文件的可能接收者。

查看此文档：[https ://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html%23//apple_ref/doc/uid/TP40010411-SW1](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html%23//apple_ref/doc/uid/TP40010411-SW1)

您应该查看 UIDocumentInteractionController 类。

# python - 可以使用“easy_install”安装 django-rosetta 包

> ID：11727887
> 
> 赞同：0
> 
> 时间：2012-07-30T19:00:21.397
> 
> 标签：python, django, osqa, django-rosetta

我在 bluehost 上安装了 django 1.2.4、Python 2.6.6 和最新的 osqa[july2012]。我想使用 Rosetta 翻译 osqa 应用程序[工作正常]。我在 Mac 上使用带有 ssh 连接的终端。

osqa 在这里

```
 ~/.local/lib/python2.6/site-packages/osqa/ 
```

当我想安装 Rosetta 时，我运行`easy_install django-rosetta`并收到以下错误：

```
 error: can't create or remove files in install directory
The following error occurred while trying to add or remove files in the installation directory: [Errno 30] 
Read-only file system: '/usr/lib/python2.6/site-packages/test-easy-install-28753.write-test'The installation directory you specified (via --install-dir, --prefix, or
    the distutils default setting) was:/usr/lib/python2.6/site-packages/ 
```

我怎样才能使它可写？osqa、django 和 python 的安装很顺利，但 Rosetta 就是不想要。我已经`easy_install django-rosetta`在根目录和站点包目录中运行了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:55:19.833

从长远来看，你最好使用`virtualenv`

# jquery - 第二次以错误的偏移量加载地图

> ID：11727889
> 
> 赞同：1
> 
> 时间：2012-07-30T19:00:31.230
> 
> 标签：jquery, google-maps-api-3, dialog

我制作了一个测试页面，您可以在其中检查确切的问题。

第一次点击它显示完美的地图但是当你关闭弹出窗口一次又一次点击`gmap`然后弹出窗口打开但`gmap`显示四分之一。

[这是测试页面的链接](http://e-hotelspro.com/gmap.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:24:08.010

`Init()`每次用户单击`gmap`链接时，您都会调用。这个函数每次都会创建一个谷歌地图。

我看到两种可能的解决方案：

1.  仅在用户第一次打开对话框时创建地图。当用户关闭对话框时，jQuery 实际上隐藏了对话框 div。地图仍然保留在那里，因此当您重新显示对话框时无需创建新地图。（在每次用户单击元素时创建新地图之前`var map = null;`，全局声明并测试是否`map`等于。`null``gmap`

2.  对话框关闭时清理地图 div。

**对话框关闭时的清理**

尝试使用此代码`map`在对话框关闭时清理元素：

```
<script type="text/javascript">
   $('document').ready(function () {
       $("#popup_container").dialog({
           autoshow: false,
           modal: true,
           border: 10,
           width: 500,
           height: 340,
           close: function(event, ui) {
              $('#map').html('');
           }
       });

       $('#gmap').click(function () {
           Init(); // initialize the map
           $("#popup_container").dialog("open");
       });
   });
</script> 
```

**另请注意，您需要将参数`dialog()`作为单个对象传递给方法。**

# java - 需要从实体经理那里得到一个以上的结果

> ID：11727890
> 
> 赞同：2
> 
> 时间：2012-07-30T19:00:33.510
> 
> 标签：java, jpa, openjpa

在过去的一段时间里，我一直在努力解决这个问题。与所有那些询问如何仅从JPA 查询中获得*一个结果的问题完全相反，我需要***多个**结果——我需要所有这些结果。我最终调用了实体管理器的`find()`方法，但它并没有得到所有的嵌套结果。

“父”类

```
@Entity
@Table(name = "LANGUAGE")  
public class LanguageData extends PersistedAuditedData<Long> {

@Id
@Column
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

@Column(name = "ISO6391ALPHA2CODE")
private String iso6391Alpha2Code;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "languageData")
@MapKeyColumn(name = "LANGUAGE_ID")
private Map<Long, LanguageDataLocalization> localizations;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "localizationLanguage")
@MapKeyColumn(name = "LANGUAGE_LOCALIZATION_ID")
private Map<Long, LanguageDataLocalization> languagesLocalized;

/**
 * Private no-arg constructor for reflection-based 
     * construction inside JPA providers.
 */
@SuppressWarnings("unused")
private LanguageData() {
    // Fields initialized by JPA.
}

    // Plus getters for the fields.

} 
```

“儿童”班

```
@Entity
@Table(name = "LANGUAGE_LOCALIZATION")
public class LanguageDataLocalization extends PersistedAuditedData<LanguageLocalizationKey>{

@EmbeddedId
private LanguageLocalizationKey id;

@Column(name = "REFERENCE_NAME")
private String name;

@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "LANGUAGE_ID", insertable = false, updatable = false)
private LanguageData languageData;

@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "LANGUAGE_LOCALIZATION_ID", insertable = false, updatable = false)
private LanguageData localizationLanguage;

/**
 * Private no-arg constructor for reflection-based JPA provider instantiation.
 */
@SuppressWarnings("unused")
private LanguageDataLocalization() {
    // Fields initialized by JPA.
}

    // Plus getters for fields.
} 
```

“儿童”课程的钥匙。

```
@Embeddable
public class LanguageLocalizationKey {

@Column(name = "LANGUAGE_ID")
private Long languageId;

@Column(name = "LANGUAGE_LOCALIZATION_ID")
private Long languageLocalizationId;

/**
 * No-arg constructor, for use by JPA provider implementation.
 * <h1>DO NOT USE!</h1>
 * <p>Ideally, this should be <code>private</code>, 
     * however OpenJPA doesn't appear to be allowing that at the moment   
 * (unsure of cause).  This constructor does not initialize any data.</p>
 */
@SuppressWarnings("unused")
public LanguageLocalizationKey() {
    // Field initialization performed by JPA provider.
}

    // Plus getters
} 
```

并像这样使用：

```
@Transactional(readOnly = true, propagation = Propagation.SUPPORTS)
private Collection<LanguageDataLocalization> getLocalizationsById(final Long id, final Collection<String> localeCodes) {
    try {
        if (localeCodes == null || localeCodes.isEmpty()) {
            final LanguageData data = entityManager.find(LanguageData.class, id);
            if (data == null) {
                return Collections.emptyList();
            } else {
                return data.getlocalizations().values();
            }
        } else {
            List<LanguageDataLocalization> results = entityManager.createNamedQuery("FIND_LANGUAGE_BY_ID", LanguageDataLocalization.class)
                                                                    .setParameter("iso6391Alpha2Codes", localeCodes)
                                                                    .setParameter("languageId", id)
                                                                    .getResultList();
            return results;
        }
    } catch (NoResultException e) {
        // TODO: add logging
        return Collections.emptyList();
    }
} 
```

定义`named-queries.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="1.0"
xmlns="http://java.sun.com/xml/ns/persistence/orm" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm
                    http://java.sun.com/xml/ns/persistence/orm_1_0.xsd ">

<named-query name="FIND_LANGUAGE_BY_ID">
    <query>
        SELECT localized 
        FROM LanguageDataLocalization localized
        JOIN localized.localizationLanguage local
        WHERE localized.id.languageId = :languageId
        AND local.iso6391Alpha2Code IN :iso6391Alpha2Codes
    </query>
</named-query>
</entity-mappings> 
```

`LANGUAGE`数据（Derby 内存数据库，很确定这并不重要）：

```
ID,  ISO6391ALPHA2CODE
123, en
137, fr 
```

`LANGUAGE_LOCALIZATION`数据

```
LANGUAGE_ID, LANGUAGE_LOCALIZATION_ID, REFERENCE_NAME
123,         123,                      English
123,         137,                      anglais 
```

实际的问题是，当在*没有*任何语言环境数据（`localeCodes`为空或空）的情况下进行查询时，`data.getLocalizations().values()`在`entityManager.find()`返回仅包含本地化语言名称数据*之一*的列表之后（法语，但我假设那是 SQL '随机'）。如果我明确地查询它们（单独或一起），**我**能够获得两种本地化，所以我知道数据在*那里*，并且 JPQL 查询有效。

在未查询特定语言时，我该怎么做才能使其返回两种（全部，当我有超过 2 种语言的本地化数据时）本地化？

* * *

实际查询似乎是这样的（删除了一些结果列）：

```
SELECT t0.LANGUAGE_ID, t0.LANGUAGE_LOCALIZATION_ID, 
       t1.ISO6391ALPHA2CODE, 
       t0.REFERENCE_NAME 
FROM LANGUAGE_LOCALIZATION t0 
LEFT OUTER JOIN LANGUAGE t1 
ON t0.LANGUAGE_LOCALIZATION_ID = t1.id 
WHERE t0.LANGUAGE_ID = ? [params=?] 
```

这似乎并没有以任何方式限制行数。（`to.LANGUAGE_ID`匹配多于一行）。特别是因为，在同一个数据集上，以下得到两个结果行（再次删除了一些结果列）：

```
SELECT t0.LANGUAGE_ID, t0.LANGUAGE_LOCALIZATION_ID, 
       t2.id, t2.ISO6391ALPHA2CODE, 
       t3.id, t3.ISO6391ALPHA2CODE, 
       t0.REFERENCE_NAME 
FROM LANGUAGE_LOCALIZATION t0 
INNER JOIN LANGUAGE t1 
ON t0.LANGUAGE_LOCALIZATION_ID = t1.id 
LEFT OUTER JOIN LANGUAGE t2 
ON t0.LANGUAGE_ID = t2.id 
LEFT OUTER JOIN LANGUAGE t3 
ON t0.LANGUAGE_LOCALIZATION_ID = t3.id 
WHERE (t0.LANGUAGE_ID = ? AND t1.ISO6391ALPHA2CODE IN (?, ?)) [params=?, ?, ?] 
```

（这提出了为什么它同时具有`t1` *和* `t3`的问题，但目前这是一个不太关心的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:09:20.627

你能启用 SQL 生成调试，以便我们可以看到真正的 sql 代码吗？

在休眠状态下，它类似于： `<property name = "hibernate.show_sql" value = "true" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:48:46.910

我终于弄清楚出了什么问题——
我将一对多的映射映射到了错误的列上。`LanguageData`需要修改的定义为：

```
@Entity
@Table(name = "LANGUAGE")
public class LanguageData extends PersistedAuditedData<Long> {

@Id
@Column
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

@Column(name = "ISO6391ALPHA2CODE")
private String iso6391Alpha2Code;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "languageData")
@MapKeyColumn(name = "LANGUAGE_LOCALIZATION_ID")
private Map<Long, LanguageDataLocalization> localizations;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "localizationLanguage")
@MapKeyColumn(name = "LANGUAGE_ID")
private Map<Long, LanguageDataLocalization> languagesLocalized;

/**
 * Private no-arg constructor for reflection-based construction inside JPA providers.
 */
@SuppressWarnings("unused")
private LanguageData() {
    // Fields initialized by JPA.
}

// Plus getters for fields
} 
```

我的地图应该包含的概念是正确的，但我没有考虑它们应该如何键控（离开*另一*列）。

# c# - 更新单元格并保存 Excel 后，基于此单元格的公式不会重新计算

> ID：11727898
> 
> 赞同：4
> 
> 时间：2012-07-30T19:01:40.587
> 
> 标签：c#, excel, openxml

你好，

我使用 XML SDK 来更新 excel 文件中的一些单元格。

这是我用来更新给定文本的单元格的代码（及其工作正常）。

```
WorksheetPart worksheetPart = GetWorksheetPartByName(spreadSheet, sheetname);

spreadSheet.WorkbookPart.Workbook.CalculationProperties.ForceFullCalculation = true;

spreadSheet.WorkbookPart.Workbook.CalculationProperties.FullCalculationOnLoad = true;

    if (worksheetPart != null)
    {
       Cell cell = GetCell(worksheetPart.Worksheet, columnName, rowIndex);
       cell.CellValue = new CellValue(text);
       cell.DataType = new EnumValue<CellValues>(CellValues.Number);
       // Save the worksheet.
       worksheetPart.Worksheet.Save();
    } 
```

另一方面，现在我想再次打开 excel 文件并从其公式基于前一个单元格的其他单元格获取更新的值，但即使使用以下行我也无法做到：

```
spreadSheet.WorkbookPart.Workbook.CalculationProperties.ForceFullCalculation = true;

spreadSheet.WorkbookPart.Workbook.CalculationProperties.FullCalculationOnLoad = true; 
```

你知道为什么我没有得到更新的值吗？

谢谢

问候。

何塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T00:39:36.337

在此处查看文森特的回答： [OpenXML - 在单元格更新后刷新 Excel 工作表](https://stackoverflow.com/questions/16818508/openxml-refresh-excel-sheet-after-cell-update)

> Open XML SDK 不会刷新公式的计算结果。只有 Excel 可以做到这一点（或其他电子表格软件）。因此，即使您将 ForceFullCalculation 和 FullCalculationOnLoad 设置为 true，您也只会告诉 Excel 强制执行完整计算并在加载电子表格文件时执行此操作。
> 
> 这就是为什么您总是获得“旧”值的原因。因为没有“新”价值可言。
> 
> 要对此进行测试，您可以将 CellValue（Cell 类的）设置为“3.14159”，而 CellFormula 保持不变。即使您专门将单元格值设置为“3.14159”，Excel 也会计算并显示公式的正确值。[当然，除非您的公式计算结果为 PI...]
> 
> 为了解决这个问题，您要么拥有一个计算引擎来读取公式并为您计算结果。或者保存电子表格并运行 Excel（在互操作模式下）来计算所有公式，但这首先违背了使用 Open XML SDK 的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T20:22:16.970

对包含公式的每个单元格执行以下函数。

```
public void ReCalcuateFormula(Cell cell)
{
    if (cell.CellFormula != null)
        cell.CellFormula.CalculateCell = new BooleanValue(true);
} 
```

# html - 导航栏以较小的分辨率包装

> ID：11727900
> 
> 赞同：8
> 
> 时间：2012-07-30T19:01:45.547
> 
> 标签：html, css, navbar

我正在尝试将 HTML5/CSS3 作为学习过程，但我正在努力创建一个导航栏，以链接到我页面中的其他部分。我从找到的教程中改编了代码，它可以工作，但只有在 1080p 分辨率下查看时，如果宽度更小，条形图会缠绕到其他线条上。

无论用户使用什么分辨率，如何确保导航栏只占用一行（缩小以适应）？

![图像](../Images/f3d5fab9af87c99a9422221c627c7884.png)

这是导航栏的 CSS 代码。请注意，在导航下，我将宽度设置为 33.3%，并将填充设置为相同，以便使按钮居中。不知道是不是这个原因。

```
nav {
    display:block;
    position: absolute;
    left:0; 
    white-space:nowrap; 
    margin: 0 auto; 
    width: 33.3%; 
    background-color:#ff6600;
    padding-left: 33.3%; 
    padding-right: 33.3%; 
} 

nav ul { 
    margin: 0 auto; 
    width: 100%; 
    list-style: none;
    display: inline;
    white-space:nowrap; 
} 

nav ul li { 
    float: left;
    position: relative;
    white-space:nowrap; 
} 

nav ul li a { 
    display: block; 
    margin: 0 auto; 
    width: 150px; 
    font-size: 16px;
    font-family: century gothic; 
    line-height: 44px; 
    text-align: center; 
    text-decoration: none; 
    color:#575757;
    white-space:nowrap; 
} 

nav ul ul { 
    width: 200px;
    position:absolute; 
    top:-99999px; 
    left:0; 
    opacity: 0; 
    -webkit-transition: opacity .4s ease-in-out; 
    -moz-transition: opacity .4s ease-in-out; 
    -o-transition: opacity .4s ease-in-out; 
    transition: opacity .4s ease-in-out; 
    z-index:497; 
    background:#333; 
    padding: 2px; 
    border:1px solid #444; 
    border-top:none; 
    box-shadow:#111 0 3px 4px; 
}

nav ul ul li a { 
    display: block;
    width: 200px;
    text-align: left;
    padding-left: 3px;
    font-size: 14px;    
}   

nav ul li:hover>ul{
    opacity: 1; 
    position:absolute; 
    top:98%; 
    left:0;

}

nav ul li a:hover { 
    color: #fff;
    background-color: #cc3300 
} 

nav ul li.selected a { 
    color: #fff; 
    background-color: #cc3300; 
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T20:13:33.647

你几乎做对了。您的 css 的问题在于它`white-space: nowrap;`仅适用于`inline`元素 - 但您正在使用`float`. 即使您将`display: inline;`属性设置为此类元素，浮动元素也会变为块级（不会应用）。所以 - 如果你用你的花车替换你的财产`display: inline-block;`- 你的`white-space`财产将工作:)

`inline-block`s 的一个活生生的例子`white-space`可以在这里看到：http: [//jsfiddle.net/skip405/wzgcH/](http://jsfiddle.net/skip405/wzgcH/)

至于您的定心方法 - 有一个更好的解决方案。（您可以删除`padding`并设置适当的宽度）特别是如果您使用内联块。只需设置`text-align: center;`他们的*父母*- 你就会把它放在中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:59:58.213

问题是您将`nav`宽度设置为仅 33.3%，其余为填充。然后，当调整大小超过某个点时，小的允许空间会将所有元素推到彼此下方。为了阻止这种情况发生，你可以做两件事，将导航宽度设置为 100%，第二，如果你根本不希望它调整大小，那么你必须给它一个所有元素`min-width`的总和'`a`宽度放在一起。`max-width`除非您使用响应式设计，否则您也应该很可能也给它一个。这是我与您修改后的 css 放在一起的演示：http: [//jsfiddle.net/c3HE6/](http://jsfiddle.net/c3HE6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T04:13:22.823

另一个不错的选择是，如果您不想更改导航栏中每个元素的显示属性，只需将导航栏的样式指定为具有最小宽度。当您减小屏幕尺寸时，这可以防止换行。

# ruby-on-rails - 使用电子表格 gem 导出 Excel 文件

> ID：11727901
> 
> 赞同：3
> 
> 时间：2012-07-30T19:01:47.993
> 
> 标签：ruby-on-rails, ruby, gem, spreadsheet

我正在尝试从我的铁路应用程序中导出一个 .xls 文件，但似乎无法让它工作。我是 ruby​​ 和 rails 的新手...这是我的代码示例...

```
def results
    book = Spreadsheet::Workbook.new
    sheet1 = book.create_worksheet do |row|
    row << [ 'name', 'address', 'date', 'amount' ]
    results.each do |r|
    row << [ r.name, r.address, r.date, r.amount ]
    send_data(sheet1, :type => "application/xls", :filename => "#{client.client_id} #{source.source_id} - search results - #{DateTime.now.strftime("%m.%d.%y")}.xls")
end 
```

我在 xls 文件中得到的输出是 ... #< Spreadsheet::Worksheet:0x5fb8fd8>

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:22:10.027

你看过这里的文档吗？ [http://spreadsheet.rubyforge.org/GUIDE_txt.html](http://spreadsheet.rubyforge.org/GUIDE_txt.html)

听起来您正在使用同时用于读取和写入的语法的混合。

您应该执行以下操作：

```
sheet1 = book.create_worksheet
sheet1.row(0) << [ 'name', 'address', 'date', 'amount' ]
results.each_with_index do |r, i|
  sheet1.row(i+1) << [ r.name, r.address, r.date, r.amount ]
end 
```

我没有尝试过，但它应该离需要的不远:)

# php - 试图让粘性页脚工作

> ID：11727902
> 
> 赞同：2
> 
> 时间：2012-07-30T19:01:58.060
> 
> 标签：php, wordpress, footer, sticky

我无法让粘性页脚工作。本质上，我希望它完全符合这个演示的功能

[http://matthewjamestaylor.com/blog/bottom-footer-demo.htm](http://matthewjamestaylor.com/blog/bottom-footer-demo.htm)

我已经尝试了大约十几个教程试图让它工作，但我就是做不到。有人可以帮我吗？这是我的网站（运行 Wordpress 3.4.1）

[http://hgsupport.x10.mx/support/](http://hgsupport.x10.mx/support/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:23:01.877

```
position: fixed;
bottom: 0; 
```

那是相关的CSS。[您可以在http://jsfiddle.net/ZZYPK/](http://jsfiddle.net/ZZYPK/)看到一个示例

编辑：带有大量示例文本的示例以显示它位于页面底部：http: [//jsfiddle.net/ZZYPK/1/](http://jsfiddle.net/ZZYPK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:30:18.893

我和你有同样的问题，这为我解决了！

这是CSS：

```
html{
   height: 100%;
}
body{
   height: 100%;
}
.wrapper {
   min-height: 100%;
   height: auto !important;
   height: 100%;
   margin: 0 auto -100px auto;
   /*The -100px mentioned above needs to be the exact height of the footer.*/
}
.footer{
   height: 100px;
   clear: both;
   position: relative;
}
.nudge{
   height: 100px;
   clear: both;
} 
```

HTML 格式如下：

```
<html>
  <body>
    <div class="wrapper">
      Your main content goes in here
      <div class="nudge"></div>
      <!--The nudge div should remain empty and makes space for the negative margin assigned above.-->
    </div><!--END class="wrapper" -->
    <footer>
      Your footer content goes in here
    </footer>
  </body>
</html> 
```

轻推是网络上所有其他解决方案和其他答案中所缺少的。

来源：[http ://www.davidjrush.com/blog/2009/01/css-sticky-footer/](http://www.davidjrush.com/blog/2009/01/css-sticky-footer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:26:18.867

尝试查看此设置是否符合您的需求：http: [//jsfiddle.net/yceaS/](http://jsfiddle.net/yceaS/)。

关键部分是将`div`内容和页脚分开包装，`div`然后使用`CSS`规则来修复定位

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:13:19.190

也许在你的 CSS 中有这样的东西？

```
#footer
{position: fixed; bottom: 0;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T19:16:12.260

在您链接的示例中使用 Chrome Inspector（它向您显示 DOM 树、应用于元素的 CSS 规则，为您提供真正的 JS 控制台以及更多工具和信息），我看到他将以下 CSS 应用于他的页脚 div ：

```
#footer{
    position: absolute; /* Allows you to position the element anywhere
                           you want without affecting other elements */
    bottom: 0;  /* Distance from bottom of element to bottom of page set to 0 */
    height: 60px; /* Footer is 60 pixels high, not too important */
    width: 100%;  /* width of footer is all the width of the parent element, which
                    is all available space here. */
} 
```

如果您希望页脚停留在*屏幕*底部，而不是页面，您必须在上面的代码中`position: absolute`替换为。`position: fixed`

查看源代码（在大多数浏览器中为 Ctrl-U）并查看 CSS 也可以。

# asp.net-mvc-4 - 连接字符串问题

> ID：11727903
> 
> 赞同：1
> 
> 时间：2012-07-30T19:02:00.037
> 
> 标签：asp.net-mvc-4, azure-storage, entity-framework-4.3

我在 MVC 4 项目中的 connectionString 有问题。

该项目的结构如下：

```
Solution
   -MVC4-web app project
   -Custom DBContext project
   -Portable Area project (MvcContrib) 
```

我正在使用在线 Azure 数据库进行存储，并且我的所有模型都在自定义数据库上下文中。该项目编译 find，我什至让 MvcContrib 与 MVC4 和 Razor 视图引擎一起工作。

在 Azure 上创建新数据库后，我尝试在 DBContext 项目上运行更新数据库。我收到以下错误：

> “...从数据库获取提供程序信息时出错。这可能是由实体框架使用不正确的连接字符串引起的。...提供程序：SQL 网络接口，错误：26 - 定位服务器/指定实例时出错... "

我的 connectionString 在 DbContext 项目的 App.Config 文件中：

```
<connectionStrings>
   <add name="CortexModelContext" providerName="System.Data.SqlClient" connectionString="Server=tcp:k5bqinuyr5.database.windows.net,1433;Database=databaseName;User ID=myname@k5bqinuyr5;Password=MySecretPassword;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" />
</connectionStrings> 
```

我究竟做错了什么？我已经对密码和连接字符串进行了双重检查。它是从 windowsazure.com 上的门户网站复制粘贴的。这里还有什么问题？我觉得我已经尝试了一切来解决这个问题。

如果这篇文章中缺少其他信息，请告诉我，我会提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:41:45.420

当您在单独的项目中拥有上下文时，Update-Database 命令往往无法正常工作。大概您的 MVC 4 项目的 web.config 文件中也有您的连接字符串？

如果是这样，请使用以下命令：

```
Update-Database -ProjectName <DbContextProject> -StartupProjectName <MvcProject> 
```

用相关项目的名称替换占位符。那应该做的工作。

干杯，院长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:35:41.553

这里的问题是我的所有项目中都没有连接字符串。当我将当前仅在我的 DbContext 项目的 App.config 中的连接字符串添加到`web.config`启动项目时，一切正常。

还好我没有用一整天的时间来解决这个问题，或者其他什么。

# binding - 带有 optioncaption 的 Knockout.js optgroup 选择

> ID：11727904
> 
> 赞同：1
> 
> 时间：2012-07-30T19:02:10.867
> 
> 标签：binding, foreach, knockout-2.0

我在 knockout.js 中实现了一个分组选择框，它的灵感来自（我通过查看） [KnockoutJS - RP Niemeyer 的选择与 optgroup 和 javascript 对象的绑定值，](https://stackoverflow.com/questions/11189660/knockoutjs-binding-value-of-select-with-optgroup-and-javascript-objects) 但它有点不同。它看起来像这样。

```
<select name="Field" data-bind="foreach: FieldList.Groups, value:Field" >
    <optgroup data-bind="attr: {label: Label}, foreach: Children">
        <option data-bind="text: Text, value: Value"></option>
    </optgroup>
 </select> 
```

我的视图模型看起来像

```
var viewmodel = {
    Field: 2,
    Groups:{
      Label:"Field 1",
      Children:[
         { Text:"Field1", Value:1 },
         { Text:"Field2", Value:2 }
      ]
    } 
```

像这样的东西，无论如何它都很好用。但是，我确实需要将“请选择...”作为第一个选项。

鉴于这是一个 foreach 循环

a) optionsCaption 绑定不起作用并且

b）我不能只在其中添加选项，因为它会为每个组重复。

只是为了确保没有人可以帮助我，我将添加此约束。我实际上是代码生成（只是服务器上的一些 C#）html，虽然我可以做很多自定义的东西，但我不能在输出中添加任意文本，即注释。也就是说我不能做无容器的 foreach 因为我只能发出 htmltags 而不是 html 注释。

。

如果有人有任何想法，请告诉我，我将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:57:47.993

好吧，所以我决定自己装订。这比我预期的要容易得多。我会把它贴在这里。我只是直接从源代码中撕下来并稍微修改了一下。变化真的很简单，我强烈建议你比较两者，看看我在做什么。现在，有一些警告。

a) 为了我自己的方便，我基本上硬编码了一些“约定”，因为我不太确定如何使它对任何类型模型都足够通用。基本上你应该看看我正在使用的视图模型，如果你不能/不想重现类似的东西，你可能不得不更改代码以反映这一点。但这很简单（使用 firebug :)）

b）它正在为单选更新模型的选定值，但我没有尝试使用多选。我正在使用其他东西进行多项选择。但是我从原始的“选项”绑定中留下了该代码。

- -更新 - -

想通了 c. 它可以更新视图模型。

----结束更新---

c）如果您更改模型，我不确定它是否会更新选择。坦率地说，当我意识到我似乎无法让它更新常规选择框上的选择选项时，我正在测试它，所以我对此有点犹豫。我会在/如果我弄明白的时候更新。

d) 您必须包含 ensureDropdownSelectionIsConsistentWithModelValue 函数，因为它是 ko 中的“私有”函数，您无法从外部访问它。

```
function ensureDropdownSelectionIsConsistentWithModelValue(element, modelValue, preferModelValue) {
    if (preferModelValue) {
        if (modelValue !== ko.selectExtensions.readValue(element))
            ko.selectExtensions.writeValue(element, modelValue);
    }

    // No matter which direction we're syncing in, we want the end result to be equality between dropdown value and model value.
    // If they aren't equal, either we prefer the dropdown value, or the model value couldn't be represented, so either way,
    // change the model value to match the dropdown.
    if (modelValue !== ko.selectExtensions.readValue(element))
        ko.utils.triggerEvent(element, "change");
}

ko.bindingHandlers['groupedSelect'] = {
'update': function (element, valueAccessor, allBindingsAccessor) {
    if (ko.utils.tagNameLower(element) !== "select")
        throw new Error("options binding applies only to SELECT elements");

    var selectWasPreviouslyEmpty = element.length == 0;
    var previousSelectedValues = ko.utils.arrayMap(ko.utils.arrayFilter(element.childNodes, function (node) {
        return node.tagName && (ko.utils.tagNameLower(node) === "option") && node.selected;
    }), function (node) {
        return ko.selectExtensions.readValue(node) || node.innerText || node.textContent;
    });
    var previousScrollTop = element.scrollTop;

    var value = ko.utils.unwrapObservable(valueAccessor());
    value = value.groups();
    var selectedValue = element.value;

    // Remove all existing <option>s.
    // Need to use .remove() rather than .removeChild() for <option>s otherwise IE behaves oddly (https://github.com/SteveSanderson/knockout/issues/134)
    while (element.length > 0) {
        ko.cleanNode(element.options[0]);
        element.remove(0);
    }

    if (value) {
        var allBindings = allBindingsAccessor();
        if (typeof value.length != "number")
            value = [value];
        if (allBindings['optionsCaption']) {
            var option = document.createElement("option");
            ko.utils.setHtml(option, allBindings['optionsCaption']);
            ko.selectExtensions.writeValue(option, undefined);
            element.appendChild(option);
        }
        for (var a= 0, b = value.length; a < b; a++) {
            var optGroup = document.createElement("optgroup");
            ko.bindingHandlers['attr'].update(optGroup, ko.observable({label: value[a].label()}));
            var children = ko.utils.unwrapObservable(value[a].children());
            for (c=0, d=children.length; c<d; c++){
                var option = document.createElement("option");

                // Apply a value to the option element
                var optionValue = typeof allBindings['optionsValue'] == "string" ? value[a].children()[c][allBindings['optionsValue']] : value[a].children()[c];
                optionValue = ko.utils.unwrapObservable(optionValue);
                ko.selectExtensions.writeValue(option, optionValue);

                // Apply some text to the option element
                var optionsTextValue = allBindings['optionsText'];
                var optionText;
                if (typeof optionsTextValue == "function")
                    optionText = optionsTextValue(value[a].children()[c]); // Given a function; run it against the data value
                else if (typeof optionsTextValue == "string")
                    optionText = value[a].children()[c][optionsTextValue]; // Given a string; treat it as a property name on the data value
                else
                    optionText = optionValue;                // Given no optionsText arg; use the data value itself
                if ((optionText === null) || (optionText === undefined))
                    optionText = "";

                ko.utils.setTextContent(option, optionText);
                optGroup.appendChild(option);
            }
            element.appendChild(optGroup);
        }

        // IE6 doesn't like us to assign selection to OPTION nodes before they're added to the document.
        // That's why we first added them without selection. Now it's time to set the selection.
        var newOptions = element.getElementsByTagName("option");
        var countSelectionsRetained = 0;
        for (var i = 0, j = newOptions.length; i < j; i++) {
            if (ko.utils.arrayIndexOf(previousSelectedValues, ko.selectExtensions.readValue(newOptions[i])) >= 0) {
                ko.utils.setOptionNodeSelectionState(newOptions[i], true);
                countSelectionsRetained++;
            }
        }

        element.scrollTop = previousScrollTop;

        if (selectWasPreviouslyEmpty && ('value' in allBindings)) {
            // Ensure consistency between model value and selected option.
            // If the dropdown is being populated for the first time here (or was otherwise previously empty),
            // the dropdown selection state is meaningless, so we preserve the model value.
            ensureDropdownSelectionIsConsistentWithModelValue(element, ko.utils.unwrapObservable(allBindings['value']), /* preferModelValue */ true);
        }

        // Workaround for IE9 bug
        ko.utils.ensureSelectElementIsRenderedCorrectly(element);
    }
} 
```

用法

```
<select data-bind="groupedSelect:FieldList,optionsText:'Text',optionsValue:'Value',optionsCaption:'-- Please Select --',value:FieldEntityId"> 
```

视图模型

```
"FieldList":{
    "groups":[
        {"label":"SomeGroup1","children":[
            {"Text":"field1","Value":"1"},
            {"Text":"field2","Value":"2"}
        ]},
        {"label":"SomeGroup 2","children":[
            {"Text":"field3","Value":"3"},
            {"Text":"field4","Value":"4"}
        ]}
    ]
} 
```

我想如果您有任何问题或意见，请告诉我。
还让我解释一下为什么模特看起来，嗯，有点奇怪。我真的只是从看起来像这样的 C# 模型序列化

```
public class GroupSelectViewModel
{
   public GroupSelectViewModel()
   {
       groups = new List<SelectGroup>();
   }

   public List<SelectGroup> groups { get; set; }
}   
public class SelectGroup
{
    public string label { get; set; }
    public IEnumerable<SelectListItem> children { get; set; }
} 
```

SelecListItem 是使用帕斯卡符号的 ac# 类。

# java - ResultSet 对象是什么样的？

> ID：11727913
> 
> 赞同：0
> 
> 时间：2012-07-30T19:02:51.867
> 
> 标签：java, database, jdbc

它是像数组还是像数据库/excel表？或者是其他东西 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:04:36.907

我认为了解这一点的最好方法是查看这里的 javadoc

[http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

在 javadoc 中，您有获取和使用此类对象的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:05:59.417

它依赖于 JDBC 驱动程序，`ResultSet`只是一个接口。但原则上，您可以获得的最接近的是`Iterator`. `ResultSet`一次给你一个结果，并允许查询是否还有更多结果。理论上`ResultSet`也可以一次获取一条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:06:04.697

取自 javadocs：

> 表示数据库结果集的数据表，通常通过执行查询数据库的语句生成。

[http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

# mysql - 如果日期时间为 0000-00-00 00:00:00 则更改为 NOW();?

> ID：11727918
> 
> 赞同：1
> 
> 时间：2012-07-30T19:03:05.833
> 
> 标签：mysql

这个问题说明了一切。基本上是一个类似于 的函数`IFNULL`，但是`IF(PARAMTER)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:06:50.153

MySQL`IF()`函数将完成我们需要的操作：

```
IF(mycol='0000-00-00 00:00:00',NOW(),mycol) 
```

这相当于（更详细，更符合 ANSI 标准）：

```
CASE WHEN mycol = '0000-00-00 00:00:00' THEN NOW() ELSE mycol END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:04:59.513

用于选择：

```
SELECT CASE YourDate WHEN '0000-00-00 00:00:00' THEN NOW() ELSE YourDate END 
FROM ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:10:37.927

一个简单的更新语句会起作用吗？

```
UPDATE `table` SET `column` = NOW() WHERE `column` = '0000-00-00 00:00:00' 
```

# android - 是否可以使用 SimpleCursorAdapter 格式化双精度？

> ID：11727921
> 
> 赞同：2
> 
> 时间：2012-07-30T19:03:09.860
> 
> 标签：android, listview, simplecursoradapter, double-precision

我使用以下 SimpleCursorAdapter：

```
String campos[] = { "nome_prod", "codbar_prod",
        "marca_prod", "formato_prod", "preco"};
int textviews[] = { R.id.textProdName, R.id.textProdCodBar, R.id.textProdMarca,
        R.id.textProdFormato, R.id.textProdPreco };
CursorAdapter dataSource = new SimpleCursorAdapter(this, R.layout.listview,
        c_list, campos, textviews, 0); 
```

这很好用。但是“campos[]”中的“preco”来自一个 double 值。我可以以某种方式格式化它，以便我的光标（它提供一个列表视图）将在点后显示这个双精度数（如货币价值）？

我可以用一些简单的方式来做吗，比如在某处使用“%.2f”，还是我必须继承 CursorAdapter？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:18:05.523

您不需要继承 CursorAdapter。只需创建一个 ViewBinder 并将其附加到适配器，它将转换光标特定列的值。像这样：

```
dataSource.setViewBinder(new ViewBinder() {
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

        if (columnIndex == 5) {
                Double preco = cursor.getDouble(columnIndex);
                TextView textView = (TextView) view;
                textView.setText(String.format("%.2f", preco));
                return true;
         }
         return false;
    }
}); 
```

# c# - Expression Blend 中的自定义事件

> ID：11727924
> 
> 赞同：1
> 
> 时间：2012-07-30T19:03:27.877
> 
> 标签：c#, .net, wpf

我正在开发自己的 FTP 客户端，我想使用表达式混合创建一个不错的 GUI。我想知道如何创建自定义事件，以便在上传完成时触发动画。换句话说，有没有一种方法可以订阅甚至表达混合/创建我自己的事件？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:52:21.513

只需在您的 ViewModel 中添加一个`public`名为的新属性`bool DownloadCompleted { get; set; }`，然后使用 a`ControlStoryboardAction`和 a`DataTrigger`来观察`DownloadCompleted`属性的变化`true`...然后将启动动画。

这里有一个很好的解释如何做到这一点。

*   [http://www.basarat.com/2011/05/expression-blend-starting-storyboard.html](http://www.basarat.com/2011/05/expression-blend-starting-storyboard.html)

*   [http://www.silverlightbuzz.com/2009/10/12/animating-with-storyboards-in-blend/](http://www.silverlightbuzz.com/2009/10/12/animating-with-storyboards-in-blend/)

无需创建自己的事件来通知已完成的下载，但是，如果您愿意，您可以这样做...只需选择一个`EventTrigger`...并指向`SourceName`您的 XAML 中具有该事件的命名元素引发它或（如果它是冒泡事件，那么您可以灵活地在其他元素上观看事件......只要事件通过它们冒泡）。

# php - 只有 .php 文件中的 php 代码？

> ID：11727925
> 
> 赞同：1
> 
> 时间：2012-07-30T19:03:27.473
> 
> 标签：php

一个非常基本的问题：

我正在创建一个 WordPress 页面模板。

我有一个文件：pagetemplatename.php

显然该文件的名称末尾有 .php：此文件中的所有内容都是 php 代码吗？或者 CSS 和其他代码可以放在这个文件中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:05:44.817

您的文件可能如下所示：

```
 <html>
   <body>
     <?php some php code ?>
     <h1>test</h1>
     <?php some more php?>
   </body>
 </html> 
```

整个文件可以是 php，或者您可以使用`<?php ... />`标签指示您希望 php 在哪里执行。

在这里查看[介绍](http://php.net/manual/en/introduction.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T19:05:34.147

脚本语言总是需要标记语言来显示。所以无论你可以在 HTML 中做什么，你都可以在 .php 页面上做同样的事情

你可以写

CSS、JS 和 HTML

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:08:46.277

您可以分离和组合您的 PHP / HTML / CSS / Javascript / XML / 等页面。

您可以将 PHP 代码直接放在 HTML 标记之间，或者使用某种模板系统将后端代码和设计分开。

# javascript - 冲突事件监听器 (?) Javascript DrawPad 意外行为

> ID：11727926
> 
> 赞同：1
> 
> 时间：2012-07-30T19:03:31.640
> 
> 标签：javascript, jquery, html, canvas

我正在使用 HTML5 画布和 JS 制作一个小型绘图板脚本。

我遇到了一个问题，我认为这可能是由使用 2 个“mouseup”事件侦听器引起的，但我不确定 - 所以我想知道是否有人可以查看代码。

问题是，当拖动画笔大小滑块时，如果在仍将鼠标悬停在滑块上时不放开鼠标 - 您尝试在画布上绘制的第一条线会中途停止。

**实际链接：** www.ronjrtech.com/draw

**粘贴箱：http :** [//pastebin.com/hCbPkSRF](http://pastebin.com/hCbPkSRF)

我确实知道代码本身有点混乱..

如果还有什么我可以解释的，请告诉我！

提前致谢 ：）

# c# - 我如何避免 BackTrack 算法（n-queens）中的函数堆栈内存使用

> ID：11727927
> 
> 赞同：0
> 
> 时间：2012-07-30T19:03:32.837
> 
> 标签：c#, stack-overflow, n-queens

我开始在 C# 上进行一些编码，并尝试了 n-queen 的问题，并稍作改动（queen 也有骑士权力）。在限制之后，由于一次又一次地调用该函数，它开始显示 stackoverflow 问题。

谁能帮我理解我面临的问题。下面是 n-queens 问题的代码。

```
private int[] BackTrack(int queenRow, int column)
{
    for (int i = column; i < size; i++)
    {
        if (CheckValidMove(queenRow, i))
        {
            queenPosition[queenRow++] = i;
            if (queenRow < size)
                return BackTrack(queenRow, 0);
            else
            {
                done = true;
                return queenPosition;   
            }
        }
        else
            continue;
    }
    if ((queenRow - 1) >= 0 && ((queenPosition[queenRow - 1] + 1) <= size))
    {
        return BackTrack(queenRow - 1, queenPosition[queenRow - 1] + 1);
    }
    else
    {
        return queenPosition;
    }
} 
```

1.  这里`queenPosition`（由函数返回）是具有放置女王的列号的数组。就像`queenPosition` 4-queen 将是 (2->0->3->1)。4x4 棋盘中的位置。

2.  `CheckValid`函数验证位置是否合适。

3.  有一些我不知道的概念，内存被浪费了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-30T19:09:57.293

尝试改变

```
 if ((queenRow - 1) >= 0 && ((queenPosition[queenRow - 1] + 1) <= size))
    {
       return BackTrack(queenRow - 1, queenPosition[queenRow - 1] + 1);
    }
    else
    {
        return queenPosition;
    } 
```

至

```
 if (!((queenRow - 1) >= 0 && ((queenPosition[queenRow - 1] + 1) <= size)))
    {
       return queenPosition;
    }

    return BackTrack(queenRow - 1, queenPosition[queenRow - 1] + 1); 
```

您需要帮助编译器并将其[优化](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/05/11/tail-call-improvements-in-net-framework-4.aspx)为[尾](http://www.thomaslevesque.com/2011/09/02/tail-recursion-in-c/) [递归](http://www.codeproject.com/Articles/43234/C-A-Method-for-Tail-Call-Recursion)。

它可能根本没有得到优化，这取决于参数和返回值，但值得一试。

[Lauschke Consulting 的](http://www.lauschkeconsulting.com/nqueens.html)关于这个问题的好读物N-Queens Problem Solutions

祝你好运！

# cakephp-2.0 - Cakephp 2.0 验证码组件发出警告

> ID：11727929
> 
> 赞同：2
> 
> 时间：2012-07-30T19:03:47.560
> 
> 标签：cakephp-2.0

我正在使用带有 cakephp 2.0 的验证码组件。虽然进展顺利，但我发现这个组件存在问题。

```
Warning: Argument 1 passed to Component::__construct() must be an instance of ComponentCollection, none given, called in ... 
```

当我试图找到解决方案时，它在某处注释中给了我两行代码。

```
_controller = $collection->getController();
parent::__construct($collection, $settings);

function startup( ) {
     $this->Controller = $this->_controller;
} 
```

解决方案代码是这样的，它以错误结束了我。

验证码组件链接为[http://www.devarticles.in/](http://www.devarticles.in/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:58:39.677

我找到了 Cakephp 2.0 的解决方案。在您正在创建实例的控制器中这样做..

```
$myvideo = new MyVideoComponent(new ComponentCollection()); //make instance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:26:53.990

[请从作者的网站](http://www.devarticles.in/cakephp/simple-captcha-component-for-cakephp/)下载适用于 CakePHP 2.x 的有效验证码组件

# php - 为什么每次我尝试运行该文件时浏览器都会尝试下载 php 文件？

> ID：11727930
> 
> 赞同：0
> 
> 时间：2012-07-30T19:03:58.440
> 
> 标签：php, html, lighttpd

我刚开始使用 php，遇到了很多麻烦。每次我尝试启动我的 php 页面时，我的浏览器都会尝试让我下载它。我的php代码如下。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<?php $uri = $_SERVER['REQUEST_URI'];?>
<?php echo $uri;?>
<?php $host = $_SERVER['HTTP_HOST'];?>
<?php echo $host;?>
<?php echo $_SERVER['REQUEST_URI'];?>
<?php echo $_SERVER['HTTP_HOST'];?>
</body>
</html> 
```

如果您可以提供帮助，请告诉我为什么会发生这种情况，我该如何解决它，以及我能做些什么来防止这种情况在未来发生。谢谢你的帮助。

信息：

```
Server-LightTPD for windows
Editors attempted-notepad and dreamweaver
*most success with dreamweaver...(I think) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:13:34.620

您需要配置您的轻量级服务器以使用 PHP。以下是在 lighty 上安装 PHP 作为快速 CGI 的示例说明。

[https://wiki.ubuntu.com/Lighttpd%2BPHP](https://wiki.ubuntu.com/Lighttpd%2BPHP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:06:39.290

然后下载 Apache...

您需要确保 Apache 已被告知 .php 文件应被视为 PHP 脚本。这意味着以下之一：

```
LoadModule php5_module        modules/libphp5.so    # on windows, this'd be a .dll instead
AddHandler php5-script php 
```

和/或

```
AddType application/x-httpd-php php
in your httpd.conf file. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:10:37.060

你安装了 Apache、PHP 吗？如果您是初学者，请安装 wamp 或 xamp。适用于 PHP、Apache、Mysql 的软件包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:14:15.590

我不是 lighttpd 的用户，但您需要修改站点的 lighttpd 配置以将数据代理到 PHP，以便 PHP 返回数据。在`nginx`我使用的 中，这是由`proxy_pass`命令完成的。可能有这样一个命令（不确切但类似），您可以在其中将信息代理到 lighttpd。如果您在 Debian 上，您可以使用`php-fpm`（`php5-fpm`在 Ubuntu 上）运行它，然后代理到 127.0.0.1 上的 tcp 套接字。请注意，最新的 php5-fpm 配置为使用 UNIX 套接字而不是 tcp 侦听器。

另外，我相信您只能将 TCP 套接字与 lighttpd 一起使用，但我还没有深入检查过这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T17:04:16.403

听起来您没有在服务器安装上启用 php。您可能需要将以下内容添加到您的 lighttpd.conf

```
fastcgi.server = (
    ".php" => (
            (
                   "bin-path" => "C:\Path\to\php-cgi.exe -c C:\Path\to\php.ini",
                   "socket" => "C:\tmp\php.socket",
                   "max-procs" => 2,
                   "idle-timeout" => 20,
                   "bin-environment" => (
                       "PHP_FCGI_CHILDREN" => "2",
                       "PHP_FCGI_MAX_REQUESTS" => "1000"
                    )
            )
      )
) 
```

未能从此处下载 WLMP 项目[http://en.wlmp-project.net/](http://en.wlmp-project.net/)将 Lighttpd、MySQL 和 PHP 整合到一个整洁的包中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T19:09:36.953

首先你需要下载 Apache，我建议 XAMPP 并将 .PHP 文件放在 Apache 附带的 HTdocs 文件夹中。启动 Apache 服务器并打开 Web 浏览器，然后转到 http://localhost/YOUFILEHERE.PHP

听起来您正试图在不通过 PHP 服务器的情况下本地打开 PHP 文件:)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-07-30T19:07:03.487

我从未听说过 LightTPD，但 XAMPP（Apache、MySQL、PHP 包）对我很有帮助，根本不需要配置，我猜这就是您的 LightTPD 安装所需要的。

[http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)

如果您愿意接受简单的替代方案，那就是...

# hex - 除了文件扩展名之外，是否有指示文件类型的指示器？

> ID：11727932
> 
> 赞同：0
> 
> 时间：2012-07-30T19:04:08.380
> 
> 标签：hex, sd-card, file-extension, fat32

我正在尝试使 .txt 文件看起来像 .jpg 文件，以便可以使用 Eye-Fi SD 卡通过 wi-fi 发送它。该卡仅发送 .jpg 文件有几个原因。一个原因是图片从 SD 卡到计算机的传输路径如下所示：

相机将照片写入 EYE-FI SD -> EYE-FI 连接到本地路由器 -> 本地路由器上传到 EYE-FI 服务器 -> EYE-FI 服务器上传到您的计算机。

[解释]

服务器端可能有一些过滤器，所以我找到了一些[软件](http://kin.klever.net/iii/description "软件")这允许用户绕过 eye-fi 服务器，所以现在我知道我只处理 SD 卡。很高兴知道没有其他人在查看我的文件。经过一些实验，我发现我可以将 .jpg 文件放在卡上，并在拍照后将它们传输。我还发现图片必须以短格式命名；一个不超过 8 个字符的名称（不包括文件扩展名），这可能与卡被格式化为 fat32 的事实有关（卡可以重新格式化并且仍然可以使用）。我尝试将 .txt 文件上传到卡上，并给它一个类似的格式，并将其重命名为 .jpg 文件。它确实传输，这向我表明除了文件扩展名之外可能还有其他东西，它表示文件的格式。

[问题]

1) 有没有办法欺骗 .txt 文件，使它们看起来像 .jpg 文件？

2) 是否有某种程序我可以使用（用于 linux）来处理卡上的值，这样我就可以弄清楚是什么触发了上传？有什么想法可以触发上传吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:22:02.147

1）是的，文件中有十六进制值表明它是.jpg。如果你用十六进制编辑器打开一个 .jpg 文件，你会注意到有一些标题行包含一堆关于图像如何压缩的信息，有时是什么制作了图像，一些固件信息等。在编辑器中，你可以找到字符串“FF D8”，这表示图像文件的开头。紧随其后的是“FF C0”。接下来的 6 个字节包含有关图像大小的信息，并且（我猜）被任何显示图像的软件使用。jpg 文件的结尾由 2 个字节“FF D9”表示。有趣的是，我玩弄了我正在使用的 jpg 文件，似乎您可以在“FF D9”之后放置文本，并且仍然可以运行 jpg。我认为这很整洁。[资源](http://www.unfiction.com/dev/tutorial/definitions.htm "资源")

不过，这些都不需要让 eye-fi 上传文件。正如我在我的问题中所说，卡需要文件的名称是短格式（这意味着标题不能超过 8 个字符）并且需要具有可接受的文件扩展名，在我的情况下，我使用了“.jpg” . 我写了一个文本文件，并将其保存为“text.jpg”。我发现传输文件需要最小大小，这很奇怪。

我为此选择的十六进制编辑器很幸运，它对打开文件很有用，但我还没有弄清楚它是否可以打开卷。好像不能。

# java - 在java中将30天添加到日期

> ID：11727933
> 
> 赞同：31
> 
> 时间：2012-07-30T19:04:11.777
> 
> 标签：java

为什么当我在今天加上 30 天时，我得到了今天 - 30，当我加上 20 时，它增加了？

这是一个样本

```
import java.text.DateFormat;
import java.util.Date;

public class DatePlus
{

    public static void main(String[] args)
    {
        Date now = new Date();
        Date now1 = new Date();
        Date now2 = new Date();
        DateFormat currentDate = DateFormat.getDateInstance();

        Date addedDate1 = addDays(now2, 20);
        Date addedDate2 = addDays(now1, 30);
        System.out.println(currentDate.format(now));
        System.out.println(currentDate.format(addedDate1));
        System.out.println(currentDate.format(addedDate2));
    }

    public static Date addDays(Date d, int days)
    {
        d.setTime(d.getTime() + days * 1000 * 60 * 60 * 24);
        return d;
    }
} 
```

“这是控制台”

```
Jul 30, 2012
Aug 19, 2012
Jul 10, 2012 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-30T19:08:07.687

使用日历。 [http://docs.oracle.com/javase/6/docs/api/java/util/GregorianCalendar.html](http://docs.oracle.com/javase/6/docs/api/java/util/GregorianCalendar.html)

伪代码：

```
Calendar c= Calendar.getInstance();
c.add(Calendar.DATE, 30);
Date d=c.getTime(); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-30T19:12:40.173

这是因为`30 * 1000 * 60 * 60 * 24`溢出`Integer.MAX_VALUE`，而`20 * 1000 * 60 * 60 * 24`没有。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-30T19:09:28.593

1.  `Date`不受人类使用的任何日历系统的约束。它只代表时间点。加30 天`Date`毫无意义，就像给*红色*加 20 天一样。

2.  添加的常用方法`1000 * 60 * 60 * 24`是错误的。您正在添加 86400 秒，但一天不一定长 86400 秒。[由于dst](/questions/tagged/dst "显示标记为“dst”的问题")，它可能会更长或更短一小时。*由于闰秒*，它可能会更长或更短一秒。

3.  您*应该*做的是转换`Date`为`Calendar`( 它实际上代表一些日历系统，例如`GregorianCalendar`. 然后只需添加天数：

    ```
    Calendar calendar = new GregorianCalendar(/* remember about timezone! */);
    calendar.setTime(date);
    calendar.add(Calendar.DATE, 30);
    date = calendar.getTime(); 
    ```

4.  [`DateUtils.addDays()`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/DateUtils.html#addDays%28java.util.Date,%20int%29)从 Apache Commons Lang使用：

    ```
    DateUtils.add(date, 30); 
    ```

    这不违反上面写的内容，它转换为`Calendar`下面的内容。

5.  或者完全避免这个地狱，去[乔达时间](http://joda-time.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-30T19:15:13.743

`days`是一个整数。

30 * 1000 * 60 * 60 * 24 是 2,592,000,000，大于 2,147,483,647（Java 中最大的 int）。你有一个缓冲区溢出，你的结果是一个相当小的负数（以二进制检查，转换回 int 作为 2 补码）

简单的解决方法是将其中一个值转换为 long，以便表达式的结果存储为 long，它可以保存该值而不会溢出。

```
 (long) days * 1000L * 60 * 60 * 24 
```

总是建议使用 Calendar 或其他 api（我听说过 JodaTime，但没有使用它）来操作日期。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-04T08:45:24.900

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-30T19:18:57.197

您在计算中遇到整数溢出。天数 * 1000 * 60 * 60 * 24 的值大于天数 = 30 时允许有符号整数的最大值，但天数 = 20 时则不允许。当您递增一个有符号整数时，它的最大可能值，而不是增加值，符号翻转并变为负数！这就是您的日期倒退的原因 - 您正在向其添加一个负数。

要解决此问题，您可以使用 long 数据类型，它的最大值比整数大得多，如下所示：

```
long secondsToAdd = days;
secondsToAdd *= (1000*60*60*24);
d.setTime(d.getTime() + secondsToAdd); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-10T15:28:45.977

**使用此功能：**

```
public static String addToCurrentDate(String format,int day,int month,int year){

        DateFormat dateFormat = new SimpleDateFormat(format);

        Calendar calendarInstance = Calendar.getInstance();
        calendarInstance.add(Calendar.YEAR, year);
        calendarInstance.add(Calendar.MONTH, month);
        calendarInstance.add(Calendar.DATE, day);
        return dateFormat.format(calendarInstance.getTime());
    } 
```

# ruby-on-rails - Ruby 元编程在给定模型上生成 ActiveRecord 关联？

> ID：11727934
> 
> 赞同：1
> 
> 时间：2012-07-30T19:04:15.643
> 
> 标签：ruby-on-rails, ruby, activerecord, gem, metaprogramming

我将我的应用程序的一部分提取到一个 Gem 中，这涉及创建一些新的 ActiveRecord 模型。目前，这些模型看起来像这样：

```
Class Wordcount < ActiveRecord::Base
  belongs_to :keyword
  belongs_to :article
end

Class Keyword < ActiveRecord::Base
  has_many :wordcounts
  has_many :articles, :through => :wordcounts
end 
```

gem 将连接到任何带有 String 或 Text 字段的 ActiveRecord 模型，而不仅仅是我`Article`在现有 Rails 应用程序中定义的模型，该代码来自该应用程序。

我需要做什么才能根据 gem 的功能应用到的模型生成相关的 AR 关联？我希望最终得到：

```
has_my_gem_functionality :on => [:field1, :field2, ...] 
```

并将其余部分安全地封装在宝石中。

我假设我还必须对迁移进行元编程。我认为我想做的事情相对简单，只是离我的舒适区有点太远了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:20:34.320

**使用源代码，卢克！:)**

只需看看其他一些做类似事情的宝石的来源。例如：

*   [充当可标记](https://github.com/mbleigh/acts-as-taggable-on/) *（包括迁移）*
*   [activerecord-embedding](https://github.com/iblue/activerecord-embedding) *（一个非常小的 gem，可以做一些关联）*

# objective-c - ctframe 不更新 ctlines

> ID：11727944
> 
> 赞同：1
> 
> 时间：2012-07-30T19:04:51.840
> 
> 标签：objective-c, ios, xcode

我使用核心文本来显示来自网络的一些 json 文本。内容是从填充到 UITABLEVIEW 的 nsdictionary 中提取的。

我的问题是 ctframe 不想更新最新内容，它不断重绘旧文本。我已经调试过了，我很确定 ctframesettercreateframe 正在使用最新的 NSAttributeString

这是我的代码，我在每个点调用这个函数来显示一个新的文本。标记解析器只返回一个 NSAtributeString

```
- (void)assign_text:(NSString*)text{
self.text = text;

CGMutablePathRef path = CGPathCreateMutable(); //1
CGPathAddRect(path, NULL, self.bounds );

MarkupParser *markup = [[MarkupParser alloc]init];
NSAttributedString* attString = [markup attrStringFromMarkup: self.text];

CFAttributedStringRef a = (__bridge_retained CFAttributedStringRef)attString;
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(a); //3

ctFrame =  CTFramesetterCreateFrame(framesetter, CFRangeMake(0, [attString length]), path, NULL);

CFRelease(a);
CFRelease(path);
CFRelease(framesetter);

}

- (void)drawRect:(CGRect)rect
{

CGContextRef context = UIGraphicsGetCurrentContext();

// Flip the coordinate system
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
CGContextTranslateCTM(context, 0, self.bounds.size.height);
CGContextScaleCTM(context, 1.0, -1.0);
CTFrameDraw((CTFrameRef)ctFrame, context);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:09:51.210

修改`ctFrame`实例变量后，您需要向自己发送`setNeedsDisplay`消息：

```
ctFrame = CTFramesetterCreateFrame(...);
[self setNeedsDisplay]; 
```

[阅读*View Programming Guide for iOS*](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW10)中的视图绘制周期。

# iphone - 未找到 CPTAnnotation.h

> ID：11727950
> 
> 赞同：0
> 
> 时间：2012-07-30T19:05:15.747
> 
> 标签：iphone, ipad

我最近切换到开发者版本 4.5 并发现 CPTAnnotation.h not found 问题，以前没有。知道我错过了什么。这与coreplot有关。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:33:36.443

`CPTAnnotation`不是 iOS SDK 的一部分，而是 CorePlot 库的一部分。确保已将库添加到项目中（[方法](http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)如下）并导入头文件：`#import "CorePlot-CocoaTouch.h"`

# android - Android：按三个字符串数组之一对对象列表进行排序

> ID：11727953
> 
> 赞同：1
> 
> 时间：2012-07-30T19:05:22.010
> 
> 标签：android, eclipse, sorting

好的。所以我正在制作一个小的电子书商店应用程序。我在 strings.xml 中有一个包含书籍列表的字符串数组。每个数组项包含四段数据，包括其封面图像的路径、标题、作者和流派。在下面的代码中，我为数组中的每本书创建了一个 View 对象，并将它们打印到屏幕上。我目前使用的是 Tabs+Swipe 布局，共有三个选项卡：Title、Author 和 Genre。我想要做的是按标题、作者或流派对视图数组进行排序，具体取决于选择的选项卡。任何人都知道我可以做到这一点的任何方式吗？

```
public static class SectionFragment extends Fragment {
    private static ScrollView outerLayout;
    private static LinearLayout innerLayout;
    private static LayoutParams params;
    private static ArrayList <String []> bookData = new ArrayList <String []> ();
    private static String [] bookList;

    public SectionFragment () { }

    @Override
    public View onCreateView (LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        params = new LayoutParams (LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        outerLayout = new ScrollView (context);
        outerLayout.setLayoutParams(params);
        innerLayout = new LinearLayout (context);
        innerLayout.setLayoutParams(params);
        innerLayout.setOrientation(LinearLayout.VERTICAL);

        bookList = res.getStringArray(R.array.bookList);

        for (int i = 0; i < bookList.length; i++) {
            View bookView = new View (context);
            bookView = inflater.inflate(R.layout.grid_cell, null);

            ImageView bookCover = (ImageView) bookView.findViewById(R.id.bookCover);
            TextView bookTitle = (TextView) bookView.findViewById(R.id.bookTitle);
            TextView bookAuthor = (TextView) bookView.findViewById(R.id.bookAuthor);
            TextView bookGenre = (TextView) bookView.findViewById(R.id.bookGenre);

            bookData.add(bookList[i].split("\\|"));
            try {
                bookCover.setImageDrawable(Drawable.createFromStream(
                        context.getAssets().open(bookData.get(i)[0]), null));
            } catch (IOException e) {
                e.printStackTrace();
            }
            bookTitle.setText(bookData.get(i)[1]); 
            bookAuthor.setText("by " + bookData.get(i)[2]);
            bookGenre.setText(bookData.get(i)[3]);

            innerLayout.addView(bookView);
        }

        outerLayout.addView(innerLayout);
        return outerLayout;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:11:05.930

bookList 包含整个数据，因此如果作者选择根据作者姓名重新排列您的 booklist 数组，则只需根据标准创建排序方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:49:58.707

1.  您必须在运行时以编程方式修改您的字符串数组。得到你的完整阵列`bookList = res.getStringArray(R.array.bookList);`
2.  执行简单的字符串操作并将字符串拆分为最多 3 个数组，一个用于标题、作者和流派，您可以使用 Arrays.sort() 按字母顺序对它们进行排序。当然，你需要在这里使用一个循环和一些编程逻辑，所以当你按标题排序时，例如：bookTitleByTitle[0] 必须对应 bookAuthorByTitle[0] 和 bookGenreByTitle[0]。顺便说一句，使用 Arrays.sort() 会破坏您的原始数组，因此请复制您的数组。（不是克隆！）。
3.  按作者和流派重复。

这将是我的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:20:58.117

所以我建议你创建一个 Book 类，它封装了 imageFilename、标题、作者和流派（这使得排序更容易）。

```
public class Book{
private String imageName;
private String title;
private String author;
private String genre;

public Book(String image, String title1, String author1, String genre1)
{
  imageName = image;
  title = title1;
  author = author1;
  genre = genre1;
}
public String getImageName()
{
 return this.imageName;
}
public String getTitle()
{
 return this.title;
}
public String getAuthor()
{
return this.author;
}
public String getGenre()
{
 return this.genre;
}
} 
```

然后在 SectionFragment 类中使用以下代码。据我所知，这应该有效。据我所知，排序逻辑等是正确的。唯一可能出现的问题可能是由于 switch 语句中的参数 (getArguments.getInt(SectionFragment.ARG_SECTION_NUMBER)) 哦！此外，当您发布 getItem(i) 的代码时，您发布了以下内容：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter 
{ 
@Override 
public Fragment getItem(int i) { 
Fragment fragment = new SectionFragment(); 
// Bundle args = new Bundle(); 
// args.putInt(SectionFragment.ARG_SECTION_NUMBER, i + 1); 
// fragment.setArguments(args); 
return fragment; 
} 
```

确保取消注释最后三行，因为它们在我在下面提供的代码中的以下 switch 语句中很重要（以确定我们正在处理的片段。）

```
public static class SectionFragment extends Fragment {
private static ScrollView outerLayout;
private static LinearLayout innerLayout;
private static LayoutParams params;
private static ArrayList <String []> bookData = new ArrayList <String []> ();
private static String [] bookList;
private static ArrayList<Book> bookList = new ArrayList<Book>();

public SectionFragment () { }

@Override
public View onCreateView (LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    params = new LayoutParams (LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    outerLayout = new ScrollView (context);
    outerLayout.setLayoutParams(params);
    innerLayout = new LinearLayout (context);
    innerLayout.setLayoutParams(params);
    innerLayout.setOrientation(LinearLayout.VERTICAL);

    bookList = res.getStringArray(R.array.bookList);
    for(int i = 0; i < bookList.length; i++)
    {
     String filename = bookList[i].split("\\|")[0];
     String title = bookList[i].split("\\|")[1];
     String author = bookList[i].split("\\|")[2];
     String genre = bookList[i].split("\\|")[3];
     Book book = new Book(filename, title, author, genre);
     bookList.add(book);
    }

    switch(getArguments.getInt(SectionFragment.ARG_SECTION_NUMBER))
    {
    // I am assuming the first fragment is Title
    case(1): Collections.sort(bookList, new Comparator<Book> {
    public int compare(Book a, Book b)
    {
     return a.getTitle().compareTo(b.getTitle());
    }
    });
    break;

    case(2): Collections.sort(bookList, new Comparator<Book> {
    public int compare(Book a, Book b)
    {
     return a.getAuthor().compareTo(b.getAuthor());
    }
    });
    break;

    case(3): Collections.sort(bookList, new Comparator<Book> {
    public int compare(Book a, Book b)
    {
     return a.getGenre().compareTo(b.getGenre());
    }
    });
    break;
    }       

    for (int i = 0; i < bookList.length; i++) {
        View bookView = new View (context);
        bookView = inflater.inflate(R.layout.grid_cell, null);

        ImageView bookCover = (ImageView) bookView.findViewById(R.id.bookCover);
        TextView bookTitle = (TextView) bookView.findViewById(R.id.bookTitle);
        TextView bookAuthor = (TextView) bookView.findViewById(R.id.bookAuthor);
        TextView bookGenre = (TextView) bookView.findViewById(R.id.bookGenre);

        try {
            bookCover.setImageDrawable(Drawable.createFromStream(
                    context.getAssets().open(bookList.get(i).getImageName()), null));
        } catch (IOException e) {
            e.printStackTrace();
        }
        bookTitle.setText(bookList.get(i).getTitle()); 
        bookAuthor.setText("by " + bookList.get(i).getAuthor());
        bookGenre.setText(bookList.get(i).getGenre());

        innerLayout.addView(bookView);
    }

    outerLayout.addView(innerLayout);
    return outerLayout;
}
} 
```

# java - 数字签名不受信任。Java 将不允许对此应用程序进行任何访问

> ID：11727955
> 
> 赞同：18
> 
> 时间：2012-07-30T19:05:30.773
> 
> 标签：java, macos, java-web-start, sign, osx-mountain-lion

我有一个 Java Web Start 应用程序，我已经在 Windows 7、Linux 和 Mac OS X 10.7 上进行了测试（一切正常）。

在 Mac OS X 10.8 Mountain Lion 上，出现以下错误，没有选择“允许”的选项。

错误如下所示： ![http://i.stack.imgur.com/7sXoO.png](../Images/a66d967dd2feb2ca10e072e3db444388.png)

有谁知道这个的解决方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-31T10:01:50.073

刚刚找到了一个解决方案：进入系统首选项-> 安全和隐私，并选中允许从任何地方下载应用程序的框（您可能需要单击锁定才能对此进行更改）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:59:07.710

这是因为 Mountain Lion 中的一项新功能被称为“**看门**人”。以下是简要说明：

**选择应用程序的安装位置：** Gatekeeper 为您提供了三种安全选项，用于下载和安装适用于 Mac 的应用程序。您可以从任何地方下载和安装应用程序，并享受 OS X Lion 提供的相同保护。为获得最大的安全性，请选择仅允许安装 Mac App Store 中的应用程序。或者从 Mac App Store 下载并安装应用程序以及使用开发者 ID 签名的应用程序。

**网守警报：** 如果您从没有开发人员 ID 的开发人员处下载并尝试安装应用程序，Mountain Lion 会提醒您。

**手动覆盖：** 如果您收到来自身份不明开发者的应用程序的警报，您仍然可以选择安装它。按住 Control 键单击安装程序或应用程序图标以显示上下文菜单。选择打开，您将看到一个允许您安装应用程序的对话框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T09:36:01.403

我有同样的问题。我还要补充一点，一旦安装了应用程序并且您知道它正在工作。您可以恢复您更改的设置，以便在您的 OS X 安全方面放心。

问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-04T10:48:52.567

点击“显示详细信息”

勾选“始终信任”...“”，它指的是所涉及的过期（或其他）证书

单击继续，并授权更改证书信任设置，“更新设置”，将其添加到您的钥匙串

如果“允许”仍然显示为灰色，请重新启动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T13:36:31.267

我建议转到命令行并使用以下命令

```
$ sudo installer -pkg /path/to/installer -target / 
```

并查看输出。如果您收到有关安装程序不受信任的错误消息，并且您知道来源是准确的并且无论如何您都想安装它，那么

```
$ sudo installer -pkg /path/to/installer -allowUntrusted -target / 
```

这是 MacOS 10.8 和更早版本的安装程序使用不同于 Mountain Lion 喜欢的代码签名工具的问题。或者我被告知。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-11T04:01:01.903

这与 Gatekeeper 无关。我有 Java 7（JRE build 1.7_09），我确实有这个弹出窗口。我还允许安全中的所有内容。我使用的网站是用于银行业务的，但请注意 mydlink 也不起作用，Yahoo 金融屏幕也不起作用。这与我在 2003 年在我的 Jaguar 背上所经历的完全一样，当时 Java RE 完全在外面。现在，Apple 将其交给 Oracle 并查看发生了什么（更不用说 Java 窗口上的字体分辨率。
它没有访问证书（或缺少签名）。如果 Oracle 的任何人都可以为这个平台编程，那么解决方案将很简单. Appe 已经修好了它，现在他们从我们下面拉了地毯。Java 不是未来，但告诉我的银行...

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-10-25T20:18:52.263

好的，他修好了，只需将您的时钟设置为手动并恢复几年，然后安装程序并将您的日期和时钟设置回自动
排序

# facebook - Facebook 商店访问令牌稍后发布到墙上

> ID：11727959
> 
> 赞同：0
> 
> 时间：2012-07-30T19:05:54.253
> 
> 标签：facebook, facebook-access-token

不推荐使用offline_access 是否可以存储用户的access_token 并在将来某个时候发布到该用户的墙上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:15:58.783

是的，但如果你想让这些令牌在一两个小时内有用（现在默认过期），你需要将它们换成一个长寿命的令牌（60 天的生命周期）。

有一个专门用于此权限删除的[手册页](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/)，您感兴趣的部分是[场景 4：客户端 OAuth 和通过新端点延长 Access_Token Expiration Time](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/#extend_token)。归结为简单地在服务器端添加一个 http 请求，然后将令牌保存到该端点以供以后使用：

```
https://graph.facebook.com/oauth/access_token？             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN

```

结果应该是一个访问令牌和一个接近 60 天的过期时间。

# java - 触发 JTabbedPane 切换选项卡的 HTML

> ID：11727964
> 
> 赞同：2
> 
> 时间：2012-07-30T19:06:09.573
> 
> 标签：java, html, swing, jtabbedpane, jeditorpane

现在我想要实现的目标是让 HTML 链接（每个链接都有一个专用的选项卡）触发 setSelectedComponent JTabbedPane 函数。换句话说，与其跳到“全部”选项卡上的部分（这是页面的 html 版本所做的），我希望它切换选项卡。请注意，如果这是不可能的，是否可以让他们像在浏览器中那样跳到各个部分（因为这也不是本机工作）？

```
<nav>
    [ <a href="gameplayhelp.php#Basic">Basic</a> | 
    <a href="gameplayhelp.php#Maps">Maps</a> | 
    <a href="gameplayhelp.php#Quests">Quests</a> | 
    <a href="gameplayhelp.php#NPCs">NPCs</a> | 
    <a href="gameplayhelp.php#Monsters">Monsters</a> | 
    <a href="gameplayhelp.php#Items">Items</a> | 
    <a href="gameplayhelp.php#Marketplace">Marketplace</a> | 
    <a href="gameplayhelp.php#Skills">Skills</a> | 
    <a href="gameplayhelp.php#Storage">Storage</a> ]
</nav> 
```

![在此处输入图像描述](../Images/364596a73eb53b5e6c92d179cdf494d8.png)

这是创建此图像的相关代码。上面的大部分代码会解析我的网站并将 HTML 分成页面主体（变量：htmlContent）和每个帮助部分（变量：helpSection）。

```
JScrollPane scrollPane = new JScrollPane();
JEditorPane editorPane = new JEditorPane();
scrollPane.setViewportView(editorPane);
editorPane.setEditorKit(kit);
editorPane.setEditable(false);
editorPane.setContentType("text/html");
editorPane.setText(htmlContent);
editorPane.setCaretPosition(0);
tabbedPane.addTab("All", null, scrollPane, "All gameplay help");

for(String s: navLinks){
    tabbedPane.addTab(s, null, new JScrollPane(new JEditorPane("text/html", helpSection.get(0))), s + " gameplay help");
    helpSection.remove(0);
} 
```

如果有人想看一下我正在解析的html，它是：

[http://www.kisnardonline.com/gameplayhelp.php](http://www.kisnardonline.com/gameplayhelp.php)

提前感谢您对此的任何帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T23:22:45.463

好的，我刚刚查了一下，似乎评论中的那个被截断了：P

[关注超文本链接](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:59:07.853

这是我的最终解决方案：

```
public void hyperlinkUpdate(HyperlinkEvent event) {
    if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
        Pattern p = Pattern.compile(".*?(?:[a-z][a-z]+).*?(?:[a-z][a-z]+).*?((?:[a-z][a-z]+))",Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
        Matcher m = p.matcher(event.getDescription());
        if (m.find()){
            String word1=m.group(1);
            System.out.println(word1);
            if (navLinks.contains(word1)){
                tabbedPane.setSelectedIndex(navLinks.indexOf(word1)+1);
            }
        }
    }
  } 
```

# python - PyQt Combobox 向项目添加功能

> ID：11727965
> 
> 赞同：2
> 
> 时间：2012-07-30T19:06:12.990
> 
> 标签：python, pyqt

如何将功能添加到特定选择。我有一个带有服务器选项的组合框

```
server 1
server 2
server 3 
```

我还有一个按钮，我想做的是当用户选择其中一个服务器时，例如，如果他选择服务器 1，当用户按下按钮时，该按钮会向 mysql 数据库发出下载数据的信号。我知道如何发出信号，但我不明白如何将组合框的选项连接到按钮，以便我可以下载正确的服务器数据。

组合框代码：

```
import sys
from PyQt4 import QtGui, QtCore

class server(QtGui.QWidget):
    """
    An basic example combo box application
    """

    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.setWindowTitle('server')
        # Set the window dimensions
        self.resize(250,50)

        self.vbox = QtGui.QVBoxLayout()
        self.setLayout(self.vbox)

        self.combo = QtGui.QComboBox()
        self.vbox.addWidget(self.combo)

        self.combo.addItem('server1')
        self.combo.addItem('server2')
        self.combo.addItem('server3')

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    gui = server()
    gui.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:12:15.563

首先，有新型信号/插槽连接。代替

```
self.connect(self.combo, QtCore.SIGNAL('activated(QString)'), self.combo_chosen) 
```

你可以做

```
self.combo.activated.connect(self.combo_chosen) 
```

但是您不需要为您的任务连接到组合的信号。

> 我还有一个按钮，我想做的是当用户选择其中一个服务器时，例如，如果他选择服务器 1，当用户按下按钮时，该按钮会向 mysql 数据库发出下载数据的信号。

连接到您的按钮`clicked`信号。在信号处理程序中检查您[选择的组合选项](http://qt-project.org/doc/qt-4.8/qcombobox.html#currentIndex-prop)并采取相应的操作。

# linux - Bash命令只移动一些文件？

> ID：11727966
> 
> 赞同：9
> 
> 时间：2012-07-30T19:06:13.090
> 
> 标签：linux, bash, shell

假设我的当前目录中有以下文件：

```
1.jpg
1original.jpg
2.jpg
2original.jpg
3.jpg
4.jpg 
```

是否有终端/bash/linux 命令可以执行类似的操作

```
if the file [an integer]original.jpg exists,
    then move [an integer].jpg and [an integer]original.jpg to another directory. 
```

执行这样的命令会导致 1.jpg、1original.jpg、2.jpg 和 2original.jpg 在它们自己的目录中。

**注意** 这不一定是一个命令。我可以是简单命令的组合。也许类似于将原始文件复制到新目录。然后对新目录中的文件进行一些正则表达式过滤，以从旧目录中获取仍然需要复制的文件名列表等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T20:00:16.180

打开扩展 glob 支持将允许您编写类似正则表达式的模式。这可以处理具有多位整数的文件，例如“87.jpg”和“87original.jpg”。然后可以使用 Bash 参数扩展从找到的文件的名称中去除“原始”，以允许您将两个相关文件一起移动。

```
shopt -s extglob
for f in +([[:digit:]])original.jpg; do
    mv $f ${f/original/} otherDirectory
done 
```

* * *

在扩展模式中，`+( x )`匹配括号内的一个或多个内容，类似于正则表达式`x+`。这里，`x`是任何数字。因此，我们匹配当前目录中名称由 1 个或多个数字后跟“original.jpg”组成的所有文件。

`${f/original/}`是`bash`' 模式替换的一个例子。它从 的值中删除字符串“original”的第一次出现`f`。所以如果`f`是字符串“1original.jpg”，那么`${f/original/}`就是字符串“1.jpg”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T19:21:02.947

好吧，不是直接的，但它是一个单线器（编辑：不再）：

```
for i in [0-9].jpg; do
  orig=${i%.*}original.jpg
  [ -f $orig ] && mv $i $orig another_dir/
done 
```

编辑：也许我应该指出我的解决方案：

*   `for i in [0-9].jpg`: 对每个以一个数字为文件名的 jpg 文件执行循环体。将整个文件名存储在`$i`
*   `orig={i%.*}original.jpg`：保存`$orig`“原始文件”的可能文件名
*   `[ -f $orig ]`：通过`test(1)`（`[ ... ]`东西）检查原始文件是否`$i`存在。如果是，请将两个文件移至`another_dir`. 这是通过以下方式完成`&&`的：只有在测试成功时才会执行它之后的部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T20:25:01.893

这应该适用于任何严格的数字前缀，即`234.jpg`

```
for f in *original.jpg; do
  pre=${f%original.jpg}
  if [[ -e "$pre.jpg" && "$pre" -eq "$pre" ]] 2>/dev/null; then
    mv "$f" "$pre.jpg" targetDir
  fi
done 
```

`"$pre" -eq "$pre"`如果不是整数，则给出错误

编辑：
如果存在`original.jpg`并且`.jpg`两者都存在，这将失败。
`$pre`然后是空字符串并且`"$pre" -eq "$pre"`是真的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:24:02.963

以下内容可行且易于理解（替换`out`为输出目录，并替换`{1..9}`为您的数字的实际范围。

```
for x in {1..9}
do
if [ -e ${x}original.jpg ]
then
mv $x.jpg out
mv ${x}original.jpg out
fi
done 
```

您显然也可以将其作为单行输入。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T19:14:10.273

您可以使用 Regex 语句在您正在查看的文件名中查找“匹配项”。然后对找到的“匹配项”执行操作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-30T19:18:52.243

`integer=0; while [ $integer -le 9 ] ; do if [ -e ${integer}original.jpg ] ; then mv -vi ${integer}.jpg ${integer}original.jpg lol/ ; fi ; integer=$[ $integer + 1 ] ; done`

请注意，这里的“lol”是目标目录。您可以将其更改为您喜欢的任何内容。此外，您可以更改`9`in`while [ $integer -le 9 ]`以检查大于 9 的整数。现在它从 0* 开始，并在检查 9* 后停止。

编辑：如果你愿意，你可以用回车替换我的代码中的分号，这样可能更容易阅读。此外，您可以通过这种方式将整个块粘贴到终端中，即使这可能不会立即显现出来。

# unique - Teradata 标识列和“dbname.tablename 中的唯一主键重复错误”

> ID：11727972
> 
> 赞同：0
> 
> 时间：2012-07-30T19:06:42.727
> 
> 标签：unique, identity, teradata

我使用以下定义为 Teradata 标识列创建了一个表：

```
      默认生成的 ID 整数作为身份
           （从 1 开始
            增加 1
            最小值 0
            最大值 100000000
            无循环），
----
      唯一主索引 (ID)

```

几个月来，ID 列一直正常工作，自动为该列生成唯一值。然而，在过去的一个月里，ELMAH*间歇性地*从我们的 .NET 4.0 ASP.NET 应用程序中报告以下异常：

`Teradata.Client.Provider.TdException: [Teradata Database] [2801] Duplicate unique prime key error in DATABASENAME.TABLENAME.`

我能够通过打开 SQL 助手并使用原始 SQL 将一堆记录插入到表中来复制它。正如预期的那样，大多数时候它会成功插入，但其他时候它会抛出上述异常。

出现此错误的原因似乎是 Teradata 正在尝试为其先前生成的该列生成一个值。

有谁知道如何了解正在发生的事情？至少，我想要一些方法来更深入地调试这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:56:51.433

我建议更改身份列的定义，`GENERATED ALWAYS`以防止应用程序或 ETL 进程提供可能已使用的值。事实上，Teradata 建议，如果您将`IDENTITY`列用作 UPI 的一部分，则应将其定义为`GENERATED ALWAYS ... NO CYCLE`

**编辑：**

如果您的业务要求必须能够提供一个值，我也会考虑使用超出您为该`IDENTITY`列预留的值范围的域。您可以使用负域或超出 IDENTITY 列一个数量级的范围。个人偏好是使用否定域。

# google-apps-script - 如何通过 Google Apps 脚本访问不同 Google 电子表格上的数据？

> ID：11727975
> 
> 赞同：16
> 
> 时间：2012-07-30T19:06:49.573
> 
> 标签：google-apps-script

我正在我的 Google 站点上编写 Google Apps 脚本，并尝试使用在 Google 电子表格中的 2 个不同选项卡上提供的数据。从我认为我从文档中理解的内容来看，我可以`SpreadsheetApp`通过使用该方法在站点脚本上使用类中的所有可用`openById()`方法。

无论如何，这是我试图做的

```
function doGet(e) {

    var doc = SpreadsheetApp.openById(SPREADSHEET_ID_GOES_HERE).getActiveSheet();
    SpreadsheetApp.setActiveSheet(doc.getSheetId()[1]);

    //....
} 
```

我得到错误

> 找不到方法 setActiveSheet（。（第 4 行）

我正在从这个链接中提取我的工作：[Storing Data in Google Spreadsheets](https://developers.google.com/apps-script/storing_data_spreadsheets)以及 Building User Interfaces 下列出的 Ui Service 部分。

有人看到我在这两行中做错了什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-30T20:46:19.050

setActiveSheet 只能用于 UI 显示的电子表格，即您在浏览器中打开的电子表格中的表格。

使用 SpreadsheetApp.openById 您正在打开一个电子表格以访问其数据，但它不会在您的浏览器中打开。它没有用户界面。

[我在https://developers.google.com/apps-script/class_spreadsheetapp?hl=es-ES#openById](https://developers.google.com/apps-script/class_spreadsheetapp?hl=es-ES#openById)找到了这条评论：

```
// The code below opens a spreadsheet using it's ID and gets the name for it.
// Note that the spreadsheet is NOT physically opened on the client side.
// It is opened on the server only (for modification by the script).
var ss = SpreadsheetApp.openById("abc1234567"); 
```

一些示例假设您的脚本正在运行到您的电子表格中。这不是您的情况，因为您将脚本作为服务运行，它应该有自己的用户界面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T22:16:07.713

我认为@megabyte1024 解决了语法错误，但在回答您对@YoArgentina 的评论时：

> 您是否碰巧知道如何通过不在电子表格内运行的服务访问不同选项卡上的数据？

这种有帮助吗？

```
var ss = SpreadsheetApp.openById(SPREADSHEET_ID_GOES_HERE);
var sheets = ss.getSheets();
// the variable sheets is an array of Sheet objects
var sheet1A1 = sheets[0].getRange('A1').getValue();
var sheet2A1 = sheets[1].getRange('A1').getValue(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T22:10:33.033

您需要分别访问每个工作表。

```
var ss = SpreadsheetApp.openById(SPREADSHEET_ID_GOES_HERE);
var sheet = ss.getSheets()[0]; // "access data on different tabs"
ss.setActiveSheet(sheet); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T20:52:59.573

这两行至少有一个问题。第一个是[setActiveSheet](https://developers.google.com/apps-script/class_spreadsheetapp#setActiveSheet)方法参数是一个Sheet类对象，getSheetId方法返回一个整数值。顺便说一下，这种方法 (getSheetId)[没有记录](https://developers.google.com/apps-script/class_sheet)。如果 SpreadsheetApp 没有活动的电子表格，则可能会发生第二个问题。在这种情况下，有“请先选择一个活动的电子表格”。错误。使用[SpreadsheetApp.setActiveSpreadsheet](https://developers.google.com/apps-script/class_spreadsheetapp#setActiveSpreadsheet)方法设置活动电子表格。

# jquery - 无效的 JSON 原语：103,104,105。- jqgrid - 将数组传递给控制器 动作时

> ID：11727977
> 
> 赞同：0
> 
> 时间：2012-07-30T19:07:15.020
> 
> 标签：jquery, asp.net-mvc, json, jqgrid, jqgrid-asp.net

我正在使用多选功能来选择多行并传递给控制器​​。javascript如下：

```
onClickButton: function (ids) {

var grid = $("#employee");
var rowid = grid.jqGrid('getGridParam', 'selarrrow');

var count = rowid.length;
var rowData;
var colData = [];

for (var i = 0; i < count; i++) {
   rowData = $("#employee").getRowData(rowid[i]);
   colData[i] = rowData.ID;
                            }

$.ajax({
    type: 'POST',
    url: '/Home/Create/' + colData,
   //data: { id: colData },
    dataType: "json"
    });
} 
```

我的控制器动作如下：

```
public ActionResult Create(string id){
JavaScriptSerializer ser = new JavaScriptSerializer();
var myList = ser.Deserialize<List<string>>(id);} 
```

我正在将 colData 创建为一个数组，目前正在向其中添加四个 ID（“102,103,104,105”）。当我调试并查看 colData 时，它包含“102,103,104,105”。然后，我将它作为字符串传递给控制器​​操作，然后反序列化它。当我反序列化它时，它会抱怨“无效的 JSON 原语：103,104,105”。

我看过其他帖子，但找不到与我的问题相关的任何内容。当我使用“data: { id: colData }”传递 colData 时，id 返回为 null。

请帮我解决这个问题，我已经被这个问题困扰了一段时间。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T02:47:04.420

当您通过 ajax 调用发送数据时，您需要像这样对数据进行字符串化

 `````
$.ajax({
        type: 'POST',
        url: '@Url.Action("AddMe")',
        contentType: 'application/json; charset=utf-8',
        data:JSON.stringify({Id: colData}),
        dataType: "json",
success:function(){
       //do sth here
         }

         error: function () {
//do sth here
        }

        }); 
````  `我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:42:11.013

我想出了问题的解决方案。不要将 colData 作为数组发送，而是使用 Json.stringify 将它们作为字符串传递给控制器​​，如下所示。

var data = Json.stringify(colData);

然后，将“数据”传递给控制器​​。控制器操作仍应将其作为字符串检索，反序列化“id”将适当地返回字符串列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:33:59.047

我会尝试使用以下格式的 jsonstring。

```
var jsonstring = {idarray:[{"value":"102"},{"value":"103"}]} 
```

代码隐藏：

```
 public class Idarray
{
    public string value { get; set; }
}

public class RootObject
{
    public List<Idarray> idarray { get; set; }
} 
`````

# .net - 只需要使用 XmlReader 来从 WCF 跟踪文件收集错误消息的代码

> ID：11727989
> 
> 赞同：1
> 
> 时间：2012-07-30T19:08:27.773
> 
> 标签：.net, wcf, xmlreader

我正在使用以下方法从 WCF 跟踪文件中收集错误消息。这段代码的问题是`XPathDocument`使用。如果文件中有任何错误，则不会加载该文档。

有没有人有复制该方法的代码、示例或示例，但仅使用`XmlReader`. 我试图避免完全失败并跳过任何格式不正确的“E2ETraceEvent”元素。

例如，我试图避免的一个例外是“名称不能以 '<' 字符开头，十六进制值 0x3C。第 1 行，位置 15716165。”

```
/// <summary>
/// Generates a list of error messages from the specified trace file.
/// </summary>
public static List<string> GatherErrorMessages(string path, string entryHeader, string entryFooter)
{
    List<string> oResult = new List<string>();

    XmlReaderSettings oSettings = new XmlReaderSettings();

    oSettings.ConformanceLevel = ConformanceLevel.Fragment;

    using (FileStream oStream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Delete | FileShare.ReadWrite))
    {
        XPathDocument oDocument = new XPathDocument(XmlReader.Create(oStream, oSettings));
        XPathNavigator oNavigator = oDocument.CreateNavigator();

        XmlNamespaceManager oManager = new XmlNamespaceManager(oNavigator.NameTable);
        oManager.AddNamespace("e", "http://schemas.microsoft.com/2004/06/E2ETraceEvent");
        oManager.AddNamespace("s", "http://schemas.microsoft.com/2004/06/windows/eventlog/system");

        XPathNodeIterator oEvents = oNavigator.Select("/e:E2ETraceEvent", oManager);

        while (oEvents.MoveNext())
        {
            XPathNavigator oErrorNode = oEvents.Current.SelectSingleNode("s:System/s:SubType[@Name=\"Error\"]", oManager);

            if (oErrorNode != null)
            {
                XPathNavigator oErrorMessageNode = oEvents.Current.SelectSingleNode("e:ApplicationData/text()", oManager);

                oResult.Add(entryHeader + oErrorMessageNode.Value + entryFooter);
            }
        }
    }

    return oResult;
} 
```

# asp.net-membership - AspNet Membership：警告：发生致命错误 9001

> ID：11727994
> 
> 赞同：0
> 
> 时间：2012-07-30T19:08:37.797
> 
> 标签：asp.net-membership

我正在建立一个新网站，该网站使用 asp.net 会员资格。这工作正常，但是今天当我尝试登录或执行任何操作（例如在 asp.net 配置向导中添加新用户/角色）时，我得到：

```
Warning: Fatal error 9001 occurred at Jul 30 2012  7:52PM. Note the error and time, and contact your system administrator. 
```

在网上搜索，似乎提示日志已满，但网站主机告诉我有足够的可用空间，所以我真的不知道下一步该尝试什么。

以前有没有人遇到过这个问题，如果有，您是如何解决的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T07:40:41.907

我最近也遇到过这个问题，经过大量研究，当数据库设置为自动关闭时，这似乎很常见。我将所有数据库设置为 AUTO CLOSE = FALSE。首先是一个数据库，然后是两个，然后是所有数据库。我只是重新启动了 SQL Server 实例服务，而不是恢复数据库。解决此症状的另一种方法是使有问题的数据库脱机并重新联机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:03:19.023

事实证明这是一个数据库问题。我什至无法创建新表或删除表，最终不得不恢复数据库，这解决了所有问题。

# selenium - 断言是否存在任何一个元素？

> ID：11727998
> 
> 赞同：0
> 
> 时间：2012-07-30T19:09:08.083
> 
> 标签：selenium

我正在使用 selenium api 并想编写一个条件来断言是否存在两个元素中的任何一个。

虽然我看到的唯一选项是单个元素的 assertElementPresent(locator)

在 Selenium 中有一个很好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:42:43.860

对于复杂的条件表达式，您可以尝试使用 Webdriver API 中的 XPath 谓词：

```
 def typeToFieldNamed(label: String, value: Any) {
    val field = webdriver.findElement(By.xpath("(//input|//textarea)[preceding::div[position()=1 and .='" + label + "']]"))
    field.click()
    field.sendKeys(chord(CONTROL, HOME))
    field.sendKeys(chord(CONTROL, SHIFT, END))
    field.sendKeys(value.toString)
  } 
```