# StackOverflow 问答 12006000-12006999

# jstl - 如何将 jstl 添加到 Liferay portlet？

> ID：12006007
> 
> 赞同：9
> 
> 时间：2012-08-17T12:39:16.337
> 
> 标签：jstl, liferay

我一直在 SO 和其他地方寻找这里，但我还没有找到这个问题的确切答案。所以这里是：

在我的 Liferay portlet 中添加支持以使用 JSTL 标签的最佳方式是什么？

当然，我找到了关于如何将 taglib 添加到 Web 应用程序的通用答案，但不是专门针对 Liferay。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T12:39:16.337

您只需要添加`jstl-api.jar`和`jstl-impl.jar`到您的 portlet 依赖项。

这些 jar 文件已经在 Liferay 中`webapps/ROOT/WEB-INF/lib`。

所以只需将其添加到文件**liferay-plugin-package.properties**：

```
portal-dependency-jars=jstl-api.jar,jstl-impl.jar 
```

# asp.net-mvc - 查看不渲染 MVC 4

> ID：12006016
> 
> 赞同：1
> 
> 时间：2012-08-17T12:39:47.317
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4

我有一个视图，当我单步执行代码时没有调用它，我看到它到达控制器中的操作并返回视图，但它不加载它只是停留在当前页面上的视图。

当在特定页面上单击一个按钮时，会生成一个 ajax 帖子，调用不会加载的下一页。

我的控制器动作如下所示：

```
public ActionResult Comparison(int[] y)
        {
            CostModel.Getsuff(y);        

            return View(CostModel);
        } 
```

我的路线图如下所示：

```
routes.MapRoute(
        name: "Compare",
        url: "Category/Comparison/{*xxxx}",
        defaults: new { Controller = "Category", Action = "Comparison" }
       ).RouteHandler 

= new CategoriesRouteHandler(); 

public class CategoriesRouteHandler : IRouteHandler
        {
            public IHttpHandler GetHttpHandler(RequestContext requestContext)
            {
                IRouteHandler handler = new MvcRouteHandler();
                var vals = requestContext.RouteData.Values;
                var list = vals["xxxx"].ToString().Split(',');
                int[] y= new int[list.Length];
                for (int i=0; i < list.Length; i++)
                  int.TryParse(list[i].ToString(),out y[i]);

                vals.Add("y", y);
                return handler.GetHttpHandler(requestContext);
            }
        } 
```

我的阿贾克斯

```
 $.ajax({ 
       type: "POST", 
      url: '@Url.Action("Comparison", "Category",  new { Categories = "PLACEHOLDER"})'.replace('PLACEHOLDER', arr),
       dataType: "json", 
       traditional: true, 
       success: function(msg){alert(msg)} 
    } ); 
```

正如我之前提到的，当我跟踪它时，它可以很好地执行 ajax 调用并在控制器上执行操作，它只是不启动视图。我认为这可能与该区域未在任何地方定义的事实有关？所以也许它把它扔掉了，在 MVC 4 中看不到任何地方来指定不同的区域，但我是 MVC 的新手。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:41:02.247

> 正如我之前提到的，当我跟踪它时，它可以很好地执行 ajax 调用并在控制器上执行操作，它只是不启动视图。

这就是 AJAX => 保持在同一页面上的全部意义。如果要替换当前页面，请不要使用任何 AJAX。使用普通的`Html.ActionLink`.

如果您的控制器操作仅返回 a`PartialView`并且您只想刷新页面的一部分，则可以在`success`回调中执行此操作：

```
$.ajax({ 
    type: "POST", 
    url: '@Url.Action("Comparison", "Category",  new { Categories = "PLACEHOLDER"})'.replace('PLACEHOLDER', arr),
    traditional: true, 
    success: function(result) {
        $('#someIdToRefresh').html(result);
    } 
}); 
```

另请注意，我已删除`dataType: 'json'`，因为您的控制器操作未返回任何 JSON。它回来了`text/html`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:43:04.850

从您的操作方法中，您将返回 HTML（呈现的视图），而您的 Ajax 调用需要 JSON 作为响应的格式。

我相信响应到达时会引发异常。

# python - 无法分配给操作员

> ID：12006018
> 
> 赞同：3
> 
> 时间：2012-08-17T12:39:58.210
> 
> 标签：python, python-2.7, variable-assignment

```
i = 0
num = 0
while i <= 1000:
    if i % 3 and i % 5 == 0:
        num + i = num <--- Adding Up Numbers Divisable by 3 & 5...
    i += 1
print num 
```

错误：***无法分配给操作员（第 5 行）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T12:42:50.780

你确定你不想要：

```
num = num + i 
```

或等效地：

```
num += i 
```

?

`sum`请注意，使用,`range`和生成器表达式可以更轻松地完成此操作：

```
sum( x for x in range(0,1000,5) if x % 3 == 0 )
                            #^only take every 5th element (0, 5, 10, 15 ...)
                                    #^ Also only take elements divisible by 3 
```

如果您打算仅在 python 2.x 上运行此代码，则可以更改`range`为`xrange`上述表达式。此外，在阅读其他人的代码时，您有时会看到在这种类型的上下文中`if x % 3 == 0`编写`if not x % 3`，但我更喜欢第一个版本（对我来说似乎更明确一点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:42:09.597

```
num + i = num <--- Adding Up Numbers Divisable by 3 & 5... 
```

您不能为表达式赋值。

另外，为什么不每次加 5 并检查它是否能被 3 整除？你已经知道它可以被5整除...

# gridview - ScrollViewer GridView XAML

> ID：12006020
> 
> 赞同：6
> 
> 时间：2012-08-17T12:40:04.510
> 
> 标签：gridview, windows-8, windows-runtime, winrt-xaml, scrollviewer

我目前正在构建一个 Windows 8 XAML C# 应用程序。在一个页面中，我有一个用于水平滑动和滚动的滚动查看器。我有几个控件，它们与 scorllviewer 配合得非常好。但是当您滚动并且您的光标位于 ListView / GridView 的顶部时，该控件将处理 scrollnig 而不是 scrollviewer。滑动不会发生这种情况，但是使用鼠标滚轮会停止滚动查看滚动。有人知道如何禁用此行为或有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:18:13.080

我在这里找到了解决方法：[msdn workaround](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ae9b452-81a6-4994-803c-22ec26bdf1ea/)

基本上，您必须执行以下操作：

基础 XAML：

```
 <Grid Name="BaseElement">
        <ScrollViewer Name="MainScrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" VerticalScrollMode="Auto">
            <GridView />
            <GridView />
        </ScrollViewer>
    </Grid> 
```

1.  向根元素添加一个新的 Handler：

    ```
    BaseElement.AddHandler(PointerWheelChangedEvent, new PointerEventHandler(Bubble_PointerWheelChanged), true); 
    ```

2.  实现 Handler 来处理滚动：

    ```
    private void Bubble_PointerWheelChanged(object sender, PointerRoutedEventArgs e)
    {
        // Could walk up the tree to find the next SV or just have a reference like here:
        MainScrollViewer.ScrollToHorizontalOffset(MainScrollViewer.HorizontalOffset - e.GetCurrentPoint(null).Properties.MouseWheelDelta);
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:47:45.207

在解决这个问题很长一段时间后，我决定改变策略。至少在我的解决方案中，我将内部*GridView*更改为*ItemsControl*。这样我就可以处理所有的点击/点击，但仍然让滚动按预期工作。

当然，此解决方案并不适合所有人，因为有时您还需要所有选择的东西。但对我来说，它起作用了，因为我只需要点击/点击项目。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T07:55:39.237

1.在View.cs中添加这段代码：

```
 private void ThumbnailViewer_OnMouseWheel(object sender, MouseWheelEventArgs e)
    {
        ThumbnailViewerScroller.ScrollToHorizontalOffset(ThumbnailViewerScroller.HorizontalOffset - e.Delta);
    } 
```

2.在Xaml中添加代码：

```
 <ScrollViewer
            x:Name="ViewerScroller"               
            MouseWheel="ThumbnailViewer_OnMouseWheel">
<StackPanel>
...
</StackPanel>
</ScrollViewer> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T07:15:16.460

有史以来最好的解决方案。

```
public class CustomGridView : GridView
{
    protected override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        var sv = this.GetTemplateChild("ScrollViewer") as UIElement;
        if (sv != null)
            sv.AddHandler(UIElement.PointerWheelChangedEvent, new PointerEventHandler(OnPointerWheelChanged), true);
    }

    private void OnPointerWheelChanged(object sender, PointerRoutedEventArgs e)
    {
        e.Handled = false;
    }
} 
```

更多信息：[ScrollViewer 中的 GridView](http://briandunnington.github.io/gridview-in-a-scrollviewer.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-02T04:56:09.593

我也有同样的问题。然后我尝试从下面线程中提到的网格模板中删除滚动条..它对我来说很好..

[https://stackoverflow.com/a/10305608/2444509](https://stackoverflow.com/a/10305608/2444509)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T15:36:09.173

这也是我看到的问题。它在触摸中不存在 - 似乎仅在使用鼠标滚轮时发生。我还不知道解决方法。我不认为有一个。

# jasperserver - 将租户 ID 和用户 ID 添加到临时缓存

> ID：12006024
> 
> 赞同：1
> 
> 时间：2012-08-17T12:40:25.810
> 
> 标签：jasperserver

我们启用了临时缓存，但我们使用自定义查询执行器来检索数据。对于 jasperserver，它看起来像是在使用一个数据源，而它可能与以前不同。

我们有一个 jasperserver (4.7)0 的多租户设置。

在此，我们有几个临时视图，对于每个租户和用户来说都是相同的。我们有一个自定义查询执行器，可确保报告在正确的数据库等上运行。

但是当我们打开 adhoc 缓存时，它会缓存某个 adhoc 视图的结果。为了防止其他用户看到错误的数据（来自缓存），我们希望将tenantId 和 UserId 添加到临时缓存键中，或者可能从自定义查询执行器中插入该参数。

有人知道这是否可能吗？

问候，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:19:57.033

一种方法是创建您自己的 DefaultCacheKeyInterceptor 版本，并添加一个用户对象（即使报告中没有指定）。

然后编辑applicationContext-datarator.xml，把keyInterceptor bean定义的class entry改成你自己的class。

# android - Android ProgressDialog 恼人的错误

> ID：12006028
> 
> 赞同：0
> 
> 时间：2012-08-17T12:40:42.263
> 
> 标签：android, multithreading, gps, progressdialog

我正在构建一个使用 GPS 来确定用户当前国家/地区的应用程序。现在，由于 GPS 需要一段时间才能找到位置，所以在搜索时我想显示一个 ProgressDialog。

所以在我的 LocationListener 中，我调用了一个我在调用之前声明的 ProgressDialog

```
pd 
```

在它显示的部分下方，我创建了一个线程来做 GPS 的东西。由于某种原因，ProgressDialog 没有显示：/

这是我的代码：

```
pd = ProgressDialog.show(TipCalculatorActivity.this, "", "Looking for GPS satellites...");
        new Thread() 
        {
          public void run() 
          {
             try
               {
                Geocoder geocoder = new Geocoder(TipCalculatorActivity.this, Locale.getDefault());
                List<Address> addresses;
                try {
                    addresses = geocoder.getFromLocation(lat, lng, 1);
                    countryCode = addresses.get(0).getAddressLine(2);
                }catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Toast.makeText(TipCalculatorActivity.this, "Location is not available, please try again later.", Toast.LENGTH_LONG).show();
                    finish();
                }
                if(countryCode==null){
                    Toast.makeText(TipCalculatorActivity.this, "Location is not available, please try again later.", Toast.LENGTH_LONG).show();
                    finish();
                }
                Toast.makeText(TipCalculatorActivity.this, countryCode, Toast.LENGTH_LONG).show();

              }
            catch (Exception e)
            {
                Log.e("tag",e.getMessage());
            }
        // dismiss the progressdialog   
          pd.dismiss();
         }
        }.start(); 
```

这里有什么问题？！

谢谢！

**编辑**

我的新代码：我调用 AsyncTask 的地方：

```
 LocationListener onLocationChange=new LocationListener() {
    public void onLocationChanged(Location loc) {
        //sets and displays the lat/long when a location is provided
        lat = loc.getLatitude();
        lng = loc.getLongitude();

        MyAsyncTask task = new MyAsyncTask(TipCalculatorActivity.this, lng, lat);
        task.execute();
        Toast.makeText(TipCalculatorActivity.this, "Done :D", Toast.LENGTH_LONG).show();

    } 
```

异步任务：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Result>{

private Activity activity;
private ProgressDialog progressDialog;

private double longitude;
private double latitude;
private String countryCode;

public MyAsyncTask(Activity activity, double longitude, double latitude) {
    super();
    this.activity = activity;
    this.longitude = longitude;
    this.latitude = latitude;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    ProgressDialog.show(activity, "", "Looking for GPS satellites...");
}

@Override
protected Result doInBackground(Void... v) {
    Geocoder geocoder = new Geocoder(activity, Locale.getDefault());
    List<Address> addresses;
    try {
        addresses = geocoder.getFromLocation(latitude, longitude, 1);
        countryCode = addresses.get(0).getAddressLine(2);
    }catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(activity, "Location is not available, please try again later.", Toast.LENGTH_LONG).show();
    }
    if(countryCode==null){
        Toast.makeText(activity, "Location is not available, please try again later.", Toast.LENGTH_LONG).show();
    }
    Toast.makeText(activity, countryCode, Toast.LENGTH_LONG).show();
    return null;
}

@Override
protected void onPostExecute(Result result) {
    progressDialog.dismiss();
    Toast.makeText(activity.getApplicationContext(), "Finished.", 
    Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:43:08.297

如果我是你，我会为此使用 AsyncTask：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Result>{

                        private Activity activity;
                        private ProgressDialog progressDialog;

                        private long longitude;
                        private long latitute;

            public MyAsyncTask(Activity activity, Long longitude, Long latitude) {
                            super();
                this.activity = activity;
                this.longitude = longitude;
                this.latitude = latitude;
            }

            @Override
            protected void onPreExecute() {
            super.onPreExecute();
                progressDialog = ProgressDialog.show(activity, "Loading", "Loading", true);
            }

            @Override
            protected Result doInBackground(Void... v) {
            //do your stuff here
            return null;

            }

            @Override
            protected void onPostExecute(Result result) {
                progressDialog.dismiss();
                Toast.makeText(activity.getApplicationContext(), "Finished.", 
                        Toast.LENGTH_LONG).show();
            }

} 
```

从活动中调用它：

```
MyAsyncTask task = new AsyncTask(myActivity.this, lng, lat);
task.execute(); 
```

# android - 使用两种不同的布局，每次方向更改时内存增加

> ID：12006040
> 
> 赞同：0
> 
> 时间：2012-08-17T12:41:38.890
> 
> 标签：android, android-layout, android-orientation

我正在为纵向和横向模式使用不同的布局。如果我使用两种不同的布局，每次更改方向时内存是否会增加？以前如何使用相同的内存或空闲活动内存负载？我用了：

```
<activity android:name=".LoginOnline"
 android:configChanges="orientation|keyboardHidden" > 
```

在清单文件中的活动和覆盖`onconfigurationchanged`方法中以防止重新创建活动但内存仍未释放！

```
public void onConfigurationChanged(Configuration newConfig) {
    String userr = user.getText().toString();
    String passs = pass.getText().toString();
    boolean rme = rememberme.isChecked();
    setContentView(R.layout.loginonline);
    login = (Button) findViewById(R.id.loginonline);
    user = (EditText) findViewById(R.id.username);
    pass = (EditText) findViewById(R.id.password);
    rememberme = (CheckBox) findViewById(R.id.remeberme);
    user.setText(userr);
    pass.setText(passs);
    rememberme.setChecked(rme);
    login.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            login(user.getText().toString(), pass.getText().toString());
            if (rememberme.isChecked()) {
                saveLoginDetails();
            } else {
                removeLoginDetails();
            }
        }
    });
    super.onConfigurationChanged(newConfig);
} 
```

但是每次方向改变时，内存仍然会增加。为什么？

# java - super.(something) 应该放在哪里？

> ID：12006043
> 
> 赞同：0
> 
> 时间：2012-08-17T12:41:49.937
> 
> 标签：java, android, super

我想知道`super.onPreExecute()`例如应该放在哪里？或者换句话说，这是正确的代码：

```
@Override
protected void onPreExecute() {
    super.onPreExecute();
    RelativeLayout parent = (RelativeLayout) findViewById(R.id.layoutHomeInfo);
    RelativeLayout.LayoutParams params = (LayoutParams) parent.getLayoutParams();
    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    progress = new ProgressBar(mContext);
    parent.addView(progress, params);
} 
```

或者

```
@Override
protected void onPreExecute() {
    RelativeLayout parent = (RelativeLayout) findViewById(R.id.layoutHomeInfo);
    RelativeLayout.LayoutParams params = (LayoutParams) parent.getLayoutParams();
    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    progress = new ProgressBar(mContext);
    parent.addView(progress, params);
    super.onPreExecute();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:43:22.670

哪里都行。

两者都没有错，这完全取决于您**何时**想要调用父函数，*这*完全取决于**您**（开发人员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:45:29.820

您正在调用`super class method`，放置位置取决于功能。例如，假设您正在初始化一些组件（在您的方法中）并渲染 ui（超级类），那么您将在您的方法中初始化它们，然后调用将渲染 UI 的超级方法。

# java - 打开 JDK 7 和 Oracle JDK 7 Soap 客户端

> ID：12006053
> 
> 赞同：1
> 
> 时间：2012-08-17T12:42:18.227
> 
> 标签：java, soap, cxf, openjdk

我使用 cxf 开发了一个 java soap 客户端。这个应用程序在我使用包含的 jdk v6 运行它的 mac 上运行良好。我创建的服务，例如将图像上传到 magento 安装，但在这里我将介绍问题。

在 Apache Cxf 中，我关闭了分块以避免“残缺”的 xml 请求。现在我体验到，由于开放的 jdk，我的客户端应用程序无法在 ubuntu 等 Linux 发行版上运行。我通过安装 openjdk 7 和 oracle jdk 7 在我的 mac 上对此进行了测试，并且出现了相同的错误。

尽管如此，我还是拒绝将来自客户端的请求分块，因此上传失败。

我读到这可能是 openjdk 和一些 xml-libs 的问题，但我找不到关于这个主题的任何真正精确甚至有用的信息。

也许你们中的某个人可以帮助我。

提前致谢。

这是请求和响应：

```
编号：5
地址：http://dev.magento.com/index.php/api/v2_soap/index/
编码：UTF-8
内容类型：文本/xml
标头：{Accept=[*/*],
SOAPAction=[""]}
消息：出站消息（保存到 tmp 文件）：
文件名：
/var/folders/z6/91v2ntss00s1786v_1_5y2540000gn/T/cxf-tmp-636617/cos5007091721474555391tmp
（消息被截断为 102400 字节）

有效载荷：

            552f069112dde557bc577735fc4eb8bf
            5540

                        /9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gODAK/9sAQwAGBAUGBQQ
--------------------------------------
14168 [主要] 信息
org.apache.cxf.services.MagentoService.Mage_Api_Model_Server_Wsi_HandlerPort.Mage_Api_Model_Server_Wsi_HandlerPortType
- 入站消息
----------------------------
编号：5
响应码：200
编码：UTF-8
内容类型：文本/xml；字符集=UTF-8
标头：{Cache-Control=[max-age=31536000]，connection=[close]，
内容长度=[275]，内容类型=[文本/xml；字符集=UTF-8],
日期=[格林威治标准时间 2012 年 8 月 17 日星期五 12:52:16]，到期日=[2013 年 8 月 17 日星期六
12:52:16 GMT]，服务器=[Apache]，Vary=[Accept-Encoding]}
有效载荷：

            102
            Ungültiger Bildtyp。

--------------------------------------

```

这是一个跟踪：

```
javax.xml.ws.soap.SOAPFaultException：不支持的图像类型
    在 org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156)
    在 $Proxy28.catalogProductAttributeMediaCreate（未知来源）
    在 at.myproject.soap.service.product.media.ProductAttributeMediaServiceImpl.create(ProductAttributeMediaServiceImpl.java:61)
    在 at.myproject.magento.service.sync.product.ProductSyncServiceImpl.updateProduct(ProductSyncServiceImpl.java:275)
    在 at.myproject.magento.service.sync.product.ProductSyncServiceImpl.updateProducts(ProductSyncServiceImpl.java:185)
    在 at.myproject.magento.service.sync.product.ProductSyncServiceImpl.syncronize(ProductSyncServiceImpl.java:145)
    在 at.myproject.magento.scheduler.jobs.ProductSyncJob.execute(ProductSyncJob.java:21)
    在 org.quartz.core.JobRunShell.run(JobRunShell.java:213)
    在 org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:557)
引起：org.apache.cxf.binding.soap.SoapFault：Ungültiger Bildtyp。
    在 org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.unmarshalFault（Soap11FaultInInterceptor.java:75）
    在 org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:46)
    在 org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:35)
    在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    在 org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage（AbstractFaultChainInitiatorObserver.java:113）
    在 org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:69)
    在 org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:34)
    在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    在 org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:798)
    在 org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1656)
    在 org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1521)
    在 org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1429)
    在 org.apache.cxf.transport.AbstractConduit.close（AbstractConduit.java:56）
    在 org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:659)
    在 org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    在 org.apache.cxf.endpoint.ClientImpl.doInvoke（ClientImpl.java:532）
    在 org.apache.cxf.endpoint.ClientImpl.invoke（ClientImpl.java:464）
    在 org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)
    在 org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)
    在 org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)
    在 org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)
    ... 8 更多

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:08:40.327

我可以通过将这些库添加到我的 pom 来解决这个问题，

```
 <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-xjc</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2.1</version>
    </dependency> 
```

，在咨询了[Apache 的 CXF](http://cxf.apache.org/faq.html#FAQ-CanCXFrunwithJDK1.6%3F)的常见问题解答之后。

我使用 OS X 最新的 jdk 6 和新的 openjdk7 和 oracle jdk7 运行了我的集成测试。

# .net - 以更高的性能将数据从 Web 导出到 Excel

> ID：12006062
> 
> 赞同：1
> 
> 时间：2012-08-17T12:42:40.160
> 
> 标签：.net, performance, excel, export

我们使用的是不同的框架，我不能使用 .NET GridView。我们有不同的集合类型和专门的网格。（不继承自 .NET 控件）我需要将数据从 Web 导出到 MS-Excel。这是代码。

```
 Me.Response.Clear()
   Me.Response.ContentEncoding = System.Text.Encoding.GetEncoding(1254)
   Me.Response.AddHeader("Content-Disposition", "Attachment;filename=Calls.xls")
   Me.Response.AddHeader("Content-type", "application/ms-excel")
            For n As Integer = 0 To Calls.Count - 1
                Me.Response.Write(Calls(n).ID & Chr(9))
                Me.Response.Write(Calls(n).ID & Chr(9))
                Me.Response.Write(Calls(n).DateCreated & Chr(9))
                Me.Response.Write(Calls(n).Employee.Name & Chr(9))
                Me.Response.Write(Calls(n).NetDurationInText & Chr(9))
                Me.Response.Write(Calls(n).Result.Name & Chr(9))
                Me.Response.Write(vbCrLf)
                If n Mod 50 = 0 Then
                    Me.Response.Flush()
                End If
            Next
    Me.Response.End() 
```

但是在排数超过2000-3000之后，网站反应很慢。尽管我每 50 行刷新一次，但 2k-3k 行大约需要 5 分钟。我尝试每 100-200 行刷新一次，还尝试将字符串直接写入 Response（我的意思是 Response.Write("") ）当我调试时，它循环并且所有时间都在“for循环”中传递。

有没有比这种方式更快地导出数据的更好主意？

注意：“Calls”是继承自 System.Collections.CollectionBase 的集合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:24:32.713

如果关闭，请发表评论，我将删除。我是 C#，所以我可能会误解。在您的代码中，看起来您正在构建整个 srtBl，然后再编写它。

```
 For n As Integer = 0 To Calls.Count - 1
        Me.Response.Write(Calls(n).ID & Chr(9))
        Me.Response.Write(Calls(n).DateCreated & Chr(9))
        Me.Response.Write(Calls(n).Employee.Name & Chr(9))
        Me.Response.Write(Calls(n).Customer.Link.Name & Chr(9))
        Me.Response.Write(Calls(n).Vendor.Link.Name & Chr(9))
        Me.Response.Write(Calls(n).Result.Name & Chr(9))
        Me.Response.Write(vbCrLf)
        If n Mod 50 = 0 Then
            Me.Response.Flush()
        End If
    Next
    Me.Response.End() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:00:58.617

我发现了问题。这与我的收藏有关。我可以说这是我发现的将数据导出到 excel 的最佳方式。

# android - AsyncTask 没有进展到 onPostExecute()

> ID：12006063
> 
> 赞同：1
> 
> 时间：2012-08-17T12:42:45.987
> 
> 标签：android, android-asynctask, android-webview, jsoup

我`AsyncTask`用来加载 a`div`中的 a `WebView`，同时显示 a `ProgressDialog`。内容已加载并`ProgressDialog`显示，但它不会因为执行未进入而消失`onPostExecute()`。你能告诉我我做错了什么吗？

```
package xx.xxx.xxx;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.select.Elements;
import org.jsoup.nodes.Document;

import android.R.string;
import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class NewsActivity extends Activity {
    private WebView wView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.news_main);

        new LoadNews().execute("");
    }

    private class LoadNews extends AsyncTask<String, Integer, String> {
        private ProgressDialog Dialog = new ProgressDialog(NewsActivity.this);

        @Override
        protected String doInBackground(String... params) {
            String url = "http://www.example.com/example";

            Document doc;
            try {
                doc = Jsoup.connect(url).get();
                Elements ele = doc.select("div#examplediv");

                String html = ele.toString();
                String mime = "text/html";
                String encoding = "utf-8";

                wView = (WebView)findViewById(R.id.wvNews);
                wView.loadDataWithBaseURL(url, html, mime, encoding, null);
            } catch (IOException e) {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPreExecute()
        {
            Dialog.setMessage("please wait...");
            Dialog.show();
        }

        protected void onPostExecute(Void unused)    
        {
            try
            {
                if(Dialog.isShowing())
                {
                    Dialog.dismiss();
                }
            } catch(Exception e) {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:50:55.457

实际上，您的`AsyncTask`类实现是错误的..

你的代码有很多错误，

1.  您正在尝试访问`doInBackground()`Android 中不允许的 UI (WebView)。由于 doInBackground 在工作线程中运行，而您的 Activity Ui (WebView) 在 MainUI 线程中。

2.  的参数`onPostExecute()`和返回类型`doInBackground()`不匹配。

请通过 Android Developers 的[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)类，了解它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:55:49.787

从我在您的代码中可以看到，您已经`ProgressDialog`在`AsyncTask`. 如果您查看[文档，`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)您会发现您应该只通过该`onPostExecute`方法处理 UI 元素，这`WebView`也是如此。

我建议您在`onCreate`方法外部定义变量之后，在方法中获取对 UI 元素的引用，`onCreate`以便其他方法也可以访问它们。此外，您应该在执行您的方法`ProgressDalog`之前定义和实例化您的。然后关闭方法中的对话框。`AsyncTask``onCreate``onPostExecute`

# iphone - 带有大图像的 UITableView 单元格中的滚动滞后

> ID：12006066
> 
> 赞同：0
> 
> 时间：2012-08-17T12:42:54.850
> 
> 标签：iphone, uitableview, uiimageview

我创建了一个原型`UITableViewCell`，并用包含图像路径和单元格标签文本的字符串的字典填充它。我在我的应用程序中使用与较大图像视图相同的图像大小`UITableViewCell`，`UIImageView`并且一些图像非常大.. 例如 300w x 800h 和 300 kb 大小。所以每个单元格总共加载了大约 500 kb 的内容。因此，当我运行该应用程序时，在第一次向下滚动 UITableView（创建单元格时）时，我会遇到滚动滞后。

如果我这样离开它，它会通过 App Store 审核还是可能因此被拒绝？听说过任何案例吗？

我知道我可以为 UITableViewCell 制作一些较小的图像。那么，`UIImageView`（旧款 iPhone 和视网膜）的首选像素尺寸是多少？（或者是否有最大 kb 加载限制`UITableViewCell`？）

如果你要说 44 和 88 点，研究告诉我这是*它本身的**默认高度* ，与尺寸无关，如果有的话，也与 kb 限制无关。`UITableViewCell` *`UIImageView`*

 *最后：还有其他（苹果认可的方法）可以避免滞后吗？就像在滚动开始之前创建单元格之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:47:58.053

尝试使用[LazyLoading](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394-Intro-DontLinkElementID_2)。如果图像来自服务器。这是滞后（延迟）的主要问题，并且由于 hte 单元被重用，所以每当您滚动时，它每次都会加载图像。

另外，由于您说图像非常大，因此请尝试将图像转换为较小的尺寸。**图像的大小未预定义为 44 或 88 或任何值。我们可以根据单元格的高度设置大小。**

**编辑** 正如 Kristoffer 所说，这些图像来自他的主捆绑包，而不是来自服务器，您能否尝试更改`cellForRowAtIndexPath`行

```
static NSString *CellIdentifier = @"Cell"; 
```

和

```
NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d%d",indexPath.row,indexPath.section]; 
```

不太确定它是否会起作用。但它会停止重用单元格所以你的单元格不会重新加载单元格中已经加载的图像。*

# php - 如何在phonegap中的localhost上加载php文件

> ID：12006067
> 
> 赞同：0
> 
> 时间：2012-08-17T12:42:55.523
> 
> 标签：php, html, cordova, android-emulator, phonegap-plugins

您好，我是 phonegap 的新手。我正在创建一个带有登录验证的 html 文件。我在 php 文件中的验证代码。我在android模拟器上运行。那个时候这个 php 文件不能在模拟器上运行，我该怎么办？

```
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>

        <link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />

        <link rel="stylesheet" href="my.css" />
        <style>
            /* App custom styles */
        </style>
        <script src="jquery.min.js"> </script>
        <script src="jquery.mobile-1.1.1.min.js"> </script>
        <script src="my.js">
        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-role="content" style="padding: 15px">
                <div data-role="fieldcontain">
                <div id="message" style="display: none;"></div>
                    <fieldset data-role="controlgroup">
                        <label for="textinput1">
                            Email:
                        </label>
                        <input name="" id="textinput1" placeholder="" value="" type="text" />
                    </fieldset>
                </div>

<script type="text/javascript">
$(document).ready(function(){
    $('#btnValidate').click(function() {

        $('#message').hide(500);

        $.ajax({
            type : 'POST',
            url : 'http://localhost/JQuery/php',
            dataType : 'json',
            data: {
                email : $('#textinput1').val()
            },
            success : function(data){
                $('#message').removeClass().addClass((data.error === true) ? 'error' : 'success')
                    .text(data.msg).show(500);
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {

                $('#message').removeClass().addClass('error')
                    .text('There was an error.').show(500);
            }
        });

        return false;
    });
});
</script>

<a data-role="button" data-inline="true"  id="btnValidate" data-transition="fade" href="#page1">Submit</a>
            </div>
        </div>
        <script>
            //App custom javascript
        </script>
    </body>
</html> 
```

这是我的html代码。我在哪里不正确，所以请高大我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:57:46.720

在 Android 模拟器中运行 PhoneGap 应用程序时，localhost 和 127.0.0.1 指的[是 Android 模拟器环回接口](http://developer.android.com/tools/devices/emulator.html#networkaddresses)。可以使用IP地址10.0.2.2访问开发机

```
$.ajax({
    type : 'POST',
    url : 'http://10.0.2.2/JQuery/php',
    dataType : 'json',
    data: {
        email : $('#textinput1').val()
    }... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:51:08.753

您将需要使用系统的 IP 地址（例如 192.168.1.2）或设置虚拟主机来访问您的 php 文件。Android 模拟器作为单独的虚拟机加载，因此您无法访问 localhost 以获取 php 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:02:36.467

为您的系统分配 IP 并使用该 IP 地址 http://183.82.166.97:9696/index.php

我在 httpd.conf 中这样配置

Listen 9696 DocumentRoot "D:/PHPworkspace/HWsite" DirectoryIndex index.php AllowOverride All Allow from All
AllowOverride All Allow from All

# ios - 在用户注销时保留 CoreData 对象的最佳方法（NSUserDefaults？）

> ID：12006069
> 
> 赞同：0
> 
> 时间：2012-08-17T12:43:00.610
> 
> 标签：ios, core-data, nsuserdefaults, persistent

我为应用程序开发了一项功能，将其信息存储在 CoreData 对象中。当我关闭应用程序时，这些数据仍然存在，但在用户注销并重新登录时不会存在。我需要数据来保持。一些注意事项：

1) 应用程序的其他一些数据被上传到服务器。这不是一个选择。

2) 我终生无法找到用户注销时应用程序的任何其他本地数据是如何保留的。

3) 我的老板建议使用 NSUserDefaults - 在其中保存 CoreData 对象的最佳方法是什么？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:50:19.890

CoreData 没有用户在您的应用程序中登录我们的概念。您的 CoreData 数据库不持久的唯一合乎逻辑的解释是，当用户注销事件发生时，您的应用程序正在删除数据（或数据库）。

# vim - 如何在 vim 中使用 solarized colortheme 从 termtrans 切换到 !termtrans？

> ID：12006076
> 
> 赞同：1
> 
> 时间：2012-08-17T12:43:21.653
> 
> 标签：vim, command, color-scheme

当我将 vim 中的颜色主题从深色切换到浅色背景时，我还想将 termtrans 选项切换为关闭（然后再次打开），因为我无法更改终端的背景颜色。我怎样才能做到这一点？

背景：我确实将我的终端设置为具有深色背景和透明度的日晒调色板。我经常在 vim 中使用 solarized colortheme 进行编码，也可以使用深色选项。由于我的终端是透明的，我确实设置了透明背景的选项。我喜欢使用浅色选项编写非代码文本。因此，我可以使用 -Key 快速切换颜色。但是，由于设置了termtrans，终端的深色显示出来，终端根本不亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:47:25.063

您确实可以更改终端设置。但是再次要求一个光日晒主题更简单。

将您的切换映射到（我假设您使用切换）： `map <F5> :set background=light<CR>:let solarized_termtrans=0<CR>:colorscheme solarized<CR>`

# android - 在 IntelliJ IDEA 中使用“实施方法”时参数名称错误

> ID：12006078
> 
> 赞同：4
> 
> 时间：2012-08-17T12:43:25.700
> 
> 标签：android, intellij-idea

我正在使用 IntelliJ IDEA 进行 Android 开发。但是有一件事让我非常恼火。当我使用“实施方法”功能时，它会生成如下内容：

```
new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
    }

    @Override
    public void onNothingSelected(AdapterView<?> adapterView) {
    }
} 
```

参数名称不一致，我希望看到如下内容：

```
new OnItemSelectedListener() {
    @Override
    public void onItemSelected (AdapterView<?> parent, View view, int position, long id) {
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
    }
} 
```

如何让 IDEA 生成正确的参数名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:49:19.227

需要源代码才能在代码完成中获取正确的参数名称。Android SDK 直到 4.0 平台版本（API 版本 14）才捆绑源代码，从那时起，源代码就可以开箱即用：

![来源](../Images/67edad2c719a8759528f9f5eeb2db1a1.png)

如果您使用的是旧平台版本，[请参阅我的解决方法答案](https://stackoverflow.com/a/8998234/104891)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:47:57.787

我怀疑你没有附加资源，所以 IDEA 只使用 .jar 来生成代码。编译的类没有关于参数名称的信息。

所以，只需附上来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T08:57:41.077

我对 spring 有完全相同的问题`BeanPostProcessor`。源是通过 Maven 附加的，但 intelliJ 坚持命名方法参数`o`，`s`而不是`bean`and `beanName`。当我导航到班级时，我可以看到来源和常规名称。

编辑 - 通过重新启动 IntelliJ 解决了问题：连接源后，您需要重新启动。

# java - Java:: 在不同的类中使用鼠标侦听器对象

> ID：12006079
> 
> 赞同：2
> 
> 时间：2012-08-17T12:43:29.423
> 
> 标签：java, arrays, swing, graphics, paintcomponent

大家好，

我正在尝试为多点触控屏幕编写动画角色。我希望我的对象有 5 只眼睛，并且每只眼睛的瞳孔都可以以不同的方式拖放，当然是在眼睛内。

我试图在一个班级中完成所有这些，问题似乎是为五个学生中的每一个分配鼠标处理程序！换句话说，如果我移动一个瞳孔，所有的瞳孔都在移动。

然后，我只为学生使用了定制课程。当我单独使用它时，瞳孔是可拖动的。但是，当我在眼睛类中使用它作为对象时，瞳孔是静态的！没有记录点击，没有跟踪鼠标活动。

我查看了教程，鼠标处理程序的其他相关问题，但没有取得任何进展。在最终发布到这里之前，我从各种教程和建议中更改了十几次代码。我错过了提示的任何想法？任何指针将不胜感激。

提前致谢。

PS：我知道我还没有限制眼睛内的瞳孔运动。

主眼类代码：

```
package rollEyes;

import java.awt.*;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class FiveEyes extends JPanel
{
    private static final long serialVersionUID = 1L;
    private static final int SIZE = 512;
    private int a = SIZE / 2;
    private int b = a;
    private int r = 4 * SIZE / 5;
    private int n;
int circleSize=30;
Pupil dc = new Pupil(1);

    public FiveEyes(int n) 
    {
        super(true);
        this.setPreferredSize(new Dimension(SIZE, SIZE));
        this.n = n;
    }

    @Override
    protected void paintComponent(Graphics g) 
    {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setColor(Color.black);
        a = getWidth() / 2;
        b = getHeight() / 2;
        int m = Math.min(a, b);
        r = 4 * m / 5;
        int r2 = Math.abs(m - r) / 2;

        int numOfEyes = 5;
    for (int i = 0; i < numOfEyes ; i++) 
            {
            Graphics2D g2d2 = (Graphics2D) g;
                double t = 2 * Math.PI * i / n;
                int x = (int) Math.round(a + r * Math.cos(t));
                int y = (int) Math.round(b + r * Math.sin(t));
                drawEyeSockets(g2d2, x,y, 2*r2,2*r2);
            }
    }

    public static void main(String[] args) 
    {
        EventQueue.invokeLater(new Runnable() 
        {
        @Override
            public void run() 
        {
                create();
            }
        });
    }

    public void drawEyeSockets(final Graphics2D g2, int x, int y, int w, int h)
    {
        g2.drawOval(x,y,w,h);
        dc.drawCircle(g2, x+12, y+12);
    }

    private static void create() 
    {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        FiveEyes fivey = new FiveEyes(5);
        f.add(fivey);
        f.pack();
        f.setVisible(true);
    }

} 
```

瞳孔类的代码：

```
package rollEyes;

import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Pupil extends JPanel 
{
private static final long serialVersionUID = 1L;
int radius=50;
int x_after = 50;
int y_after = 50;
MouseHandler mh ;
private static int n =1;
public Pupil(int n) 
{
    super(true);
}

protected void paintComponent(Graphics g) 
{
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    drawCircle(g2d,x_after,y_after); 
}

public  void drawCircle(final Graphics2D g2d, int x, int y) 
{
        g2d.setColor(Color.BLUE);
        g2d.fillOval(x, y, radius/2, radius/2);
        mh = new MouseHandler();
        this.addMouseListener(mh);
        this.addMouseMotionListener(mh);
}

private static void create() 
{
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Pupil dc = new Pupil(n);
    f.add(dc);
    f.pack();
    f.setVisible(true);
}

public static void main(String[] args) 
{
    EventQueue.invokeLater(new Runnable() 
    {
        @Override
        public void run() 
        {
            create();
        }
    });
}

private class MouseHandler extends MouseAdapter
{
    boolean circleClicked=false;
    public void mouseReleased(MouseEvent e) 
    {
        circleClicked = false;
    }   
    public void mousePressed(MouseEvent me) 
    {
            circleClicked = true;
    }
        public void mouseDragged(MouseEvent me) 
        {
            if (circleClicked) 
        {
            x_after = me.getX();
            y_after = me.getY();
            repaint();
        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:56:26.127

您有 Pupil 扩展 JPanel，但实际上不应该这样做。相反，使用您在当前 Pupil 课程中学到的概念——如何绘制一个可移动的圆圈，并在更大的 FiveEyes 课程中扩展它，只是这次创建一个`List<Pupil>`并绘制它们。我的建议：

*   使瞳孔不扩展 JPanel。而是给它机器在某些位置绘制圆圈并更改该位置。
*   此外，您还需要通过给它一个 contains(Point p) 方法来识别它的圆圈是否已被单击。一种方法是使用 Shape 对象，或者您可以滚动您自己的方法。
*   给 FiveEyes 一个`List<Pupil>`实际上是一个的`ArrayList<Pupil>`，并用 Pupil 对象填充它。
*   在 FiveEyes`paintComponent(...)`方法中，遍历这个 List 告诉每个 Pupil 绘制自己。
*   在您的 FiveEyes MouseAdapter 的`mousePressed(...)`方法中，遍历您的瞳孔列表以查看是否单击了瞳孔。如果是，请移动它。
*   或者，您可以创建一个 Pupil BufferedImage，将其放入 ImageIcon，然后将其放入 JLabel，然后让您的 FiveEyes 类的 MouseAdapter 拖动标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:58:10.003

首先，这段代码

```
 mh = new MouseHandler();
    this.addMouseListener(mh);
    this.addMouseMotionListener(mh); 
```

只能调用一次。您正在向组件添加数百万个鼠标处理程序！

你需要五个实例`Pupil`，每只眼睛一个。现在，你只有一个，所以渲染当然只会产生一个结果。

最后，您必须确保一次只有一只眼睛是“活动的”（即不是所有的眼睛都应该接收鼠标事件或者不是所有的眼睛都应该处理它们）。

# django - 如何用兼容 iPad 的小部件替换多对多小部件？

> ID：12006081
> 
> 赞同：2
> 
> 时间：2012-08-17T12:43:42.777
> 
> 标签：django, django-orm

个人认为 Django 的 ManyToManyField 关系的内置小部件不是特别好。尤其是在 iPad 上使用它时，该小部件既不直观也不实用（您没有按住 ctrl 按钮进行多选）。

![在此处输入图像描述](../Images/02baf1e2d51d5cfda458d1a8c1677b64.png)

所以我现在正在与这个问题作斗争一个星期，试图用包含每个下拉列表的表单制作一个表单集。

![在此处输入图像描述](../Images/e5c3416204723a9bc5f5e7cdff29eb97.png)

到目前为止，我[尝试实现上述解决方案也没有结果。](https://stackoverflow.com/questions/11974924/how-to-pass-in-a-parameter-to-the-form-within-the-formset#comment15982256_11974924)

所以我想也许现在是退后一步并询问社区的好时机：你会在我的情况下做什么？如果给您这样的要求，您将如何替换 M2M 小部件？我有什么选择？

我刚刚根据Stackoverflow 上的这个[问题](https://stackoverflow.com/questions/3006401/django-custom-widget-for-manytomany-field)了解了管理 M2M 小部件。

`django.contrib.admin.widgets.FilteredSelectMultiple`

它有点大而且不是很漂亮，但可以胜任。我找到了本[教程](http://jayapal-d.blogspot.co.uk/2009/08/reuse-django-admin-filteredselectmultip.html)并遵循了每一步。但该小部件仍显示为普通的 M2M 小部件，而不是管理小部件。css 和 js 已正确加载（未显示 404），但仍显示旧的小部件。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:07:44.547

尝试使用`chosen`库。你可以从这里下载它：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)。

要将其与 django 尝试`django-chosen`应用程序集成。您可以`PIP`从`github`.

# android - 摩托罗拉 fire xt-530 中未找到闪光模式手电筒

> ID：12006086
> 
> 赞同：1
> 
> 时间：2012-08-17T12:43:56.123
> 
> 标签：android

我正在尝试为我的 motorola fire xt-530 创建一个手电筒应用程序。检查响应切换按钮的此代码。

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            if (getApplicationContext().getPackageManager().hasSystemFeature(
                    PackageManager.FEATURE_CAMERA_FLASH)) {
                camera = Camera.open();
                params = camera.getParameters();
                List<String> flashModes = params.getSupportedFlashModes();
                if (flashModes == null) {
                    Toast.makeText(getApplicationContext(), "No Flash Found",
                            Toast.LENGTH_SHORT).show();
                } else {
                    camera.startPreview();
                    if (flashModes.contains(Parameters.FLASH_MODE_TORCH)) {
                        Toast.makeText(getApplicationContext(),
                                "Torch Mode Found", Toast.LENGTH_SHORT).show();
                        params.setFlashMode(Parameters.FLASH_MODE_TORCH);
                        camera.setParameters(params);
                        camera.takePicture(null, null, null);
                    } else {
                        Toast.makeText(getApplicationContext(),
                                "Torch Mode Not Found", Toast.LENGTH_SHORT).show();
                    }
                }
            } else {
                Toast.makeText(getApplicationContext(), "Not Available",
                        Toast.LENGTH_SHORT).show();
            }
        } else {
            camera.stopPreview();
            camera.release();
            Toast.makeText(getApplicationContext(), "Not Checked",
                    Toast.LENGTH_SHORT).show();
        } 
```

未找到火炬模式。没有扎根。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:59:38.347

并非所有 Android 手机都支持手电筒模式（我相信你的手机就是其中之一）。然而，一种解决方案是根手机并设置支持它的自定义 ROM。另一种可能是尝试使用 FLASH_MODE_ON 解决方法，或者您甚至可以尝试触发 FLASH MODE TORCH，即使它不在支持的列表中。我有几个案例。

# paypal - 贝宝在 vbulletin

> ID：12006090
> 
> 赞同：-4
> 
> 时间：2012-08-17T12:44:13.013
> 
> 标签：paypal, payment, vbulletin

我想在 vbulletin 中集成 paypal 付款方式。我是 vbulletin 和支付网关的新手。我已经完成了从 vbulletin 控制面板实施付费订阅的过程，并且能够订购订阅。但问题是，当我在贝宝支付页面上订购订阅时，我插入了我的测试帐户用户名和密码，但返回了电子邮件和密码不正确的消息。我找不到错误在哪里？提前感谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:15:12.847

您的问题似乎是由在真实的 PayPal 站点中使用沙箱详细信息引起的，如果这就是“插入我的测试帐户用户名和密码”的意思。如果您想使用沙箱进行测试付款，请编辑 vBulletin 中的 class_paypal.php 文件并将 www.paypal.com 的实例替换为 sandbox.paypal.com 或更好，只需创建 1 美元订阅并尝试使用真实的 PayPal 地址： )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:59:56.947

同意前面的回答。

在 vBulletin adminCP 中，您可以测试 vBulletin 与 PayPal 的通信。

如果失败，则说明设置问题。如果成功，则说明您的测试帐户存在登录问题。

# database - Magento 和 Selenium RC 测试与数据库访问

> ID：12006091
> 
> 赞同：1
> 
> 时间：2012-08-17T12:44:12.990
> 
> 标签：database, magento, testing, selenium

Selenium 是前端测试框架，但如果测试用例涉及数据库，例如客户注册工作流怎么办？

我认为固定是必要的。关于如何将 Mage::app() 自动加载到 selenium rc 测试用例的任何线索？

为单元测试 *magento_unit_tests* 创建单独的数据库可能也是一个好主意，就像在[EcomDev_PHPUnit](https://github.com/IvanChepurnyi/EcomDev_PHPUnit)单元测试框架中创建的一样？

欢迎任何其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:12:44.010

通常这些类型的测试是针对具有单独数据库的站点的克隆运行的。您需要确保在运行测试之前备份数据库，这样无论测试进行何种类型的更改，您都可以始终恢复到已知状态。

# java - 如何继续使用 jsp 和 servlet 制作聊天应用程序

> ID：12006094
> 
> 赞同：1
> 
> 时间：2012-08-17T12:44:25.100
> 
> 标签：java, jsp, servlets, chat

我使用 java 开发了一个聊天应用程序。但现在我的挑战是在 web 应用程序中构建一个聊天应用程序。我不知道如何继续。我们可以像在 java 中那样使用套接字吗？

请给我一个建议来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:46:38.097

我建议您使用[websocket](http://en.wikipedia.org/wiki/WebSocket)，因为它们在服务器和 html 客户端之间实时交换（推送而不是拉取）数据非常有效。它们是双向的，大致相当于您习惯的套接字（因此得名）。在客户端，它们使用与 ajax 客户端相同的基于回调的逻辑，但这并不意味着它们不快。

这是一个教程：http: [//java.dzone.com/articles/creating-websocket-chat](http://java.dzone.com/articles/creating-websocket-chat)

谷歌搜索“java chat websocket”会给你其他结果。

# javascript - JavaScript：如何检查字符是否为 RTL？

> ID：12006095
> 
> 赞同：23
> 
> 时间：2012-08-17T12:44:48.240
> 
> 标签：javascript, unicode, right-to-left, bidi

如何以编程方式检查浏览器是否将某些字符视为 JavaScript 中的 RTL？

也许创建一些透明的 DIV 并查看文本的放置位置？

**一点上下文。**Unicode 5.2 添加了 Avestan 字母支持。因此，如果浏览器支持 Unicode 5.2，它会将 U+10B00 之类的字符视为 RTL（目前只有 Firefox 支持）。否则，它将这些字符视为 LTR，因为这是默认设置。

我如何以编程方式检查这个？我正在编写一个 Avestan 输入脚本，如果浏览器太笨，我想覆盖双向方向。但是，如果浏览器确实支持 Unicode，则不应覆盖双向设置（因为这将允许混合 Avestan 和 Cyrillic）。

我目前这样做：

```
var ua = navigator.userAgent.toLowerCase();

if (ua.match('webkit') || ua.match('presto') || ua.match('trident')) {
    var input = document.getElementById('orig');
    if (input) {
        input.style.direction = 'rtl';
        input.style.unicodeBidi = 'bidi-override';
    }
} 
```

但是，很明显，在 Chrome 和 Opera 开始支持 Unicode 5.2 之后，这会降低脚本的可用性。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-12T03:09:29.203

```
function isRTL(s){           
    var ltrChars    = 'A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF'+'\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF',
        rtlChars    = '\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC',
        rtlDirCheck = new RegExp('^[^'+ltrChars+']*['+rtlChars+']');

    return rtlDirCheck.test(s);
}; 
```

[**游乐场页面**](http://codepen.io/vsync/pen/rcwui)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-02T17:38:28.503

I realize this is quite a while after the original question was asked and answered but I found vsync's update to be rather useful and just wanted to add some observations. I would add this in comment to his answer but my reputation is not high enough yet.

Instead of a regular expression that searches from the start of the line zero or more non-LTR characters and then one RTL character, wouldn't it make more sense to search from the start of the line zero or more weak/neutral characters and then one RTL character? Otherwise you have the potential for matching many RTL characters unnecessarily. I would welcome a more thorough examination of my weak/neutral character group as I merely used the negation of the combined LTR and RTL character groups.

Additionally, shouldn't characters such as LTR/RTL marks, embeds, overrides be included in the appropriate character groupings?

I would think then that the final code should look something like:

```
function isRTL(s){           
    var weakChars       = '\u0000-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u2BFF\u2010-\u2029\u202C\u202F-\u2BFF',
        rtlChars        = '\u0591-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC',
        rtlDirCheck     = new RegExp('^['+weakChars+']*['+rtlChars+']');

    return rtlDirCheck.test(s);
}; 
```

## Update

There may be some ways to speed up the above regular expression. Using a negated character class with a lazy quantifier seems to help improve speed (tested on [http://regexhero.net/tester/?id=6dab761c-2517-4d20-9652-6d801623eeec](http://regexhero.net/tester/?id=6dab761c-2517-4d20-9652-6d801623eeec), site requires Silverlight 5)

Additionally, if the directionality of the string is unknown, my guess is that for most cases the string will be LTR instead of RTL and creating an `isLTR` function would return results faster if that is the case but as OP is asking for `isRTL`, will provide `isRTL` function:

```
function isRTL(s){           
    var rtlChars        = '\u0591-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC',
        rtlDirCheck     = new RegExp('^[^'+rtlChars+']*?['+rtlChars+']');

    return rtlDirCheck.test(s);
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-01T02:15:09.690

测试希伯来语和阿拉伯语（我知道的唯一现代 RTL 语言/字符集从右到左流动，除了我没有研究过的任何与波斯相关的）：

```
/[\u0590-\u06FF]/.test(textarea.value) 
```

更多的研究表明：

```
/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(textarea.value) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T13:17:16.610

首先解决标题中的问题：

JavaScript 中没有用于访问字符的 Unicode 属性的工具。您需要为此目的找到一个库或服务（如果您需要可靠的东西，恐怕这可能很困难）或从 Unicode 字符“数据库”（特定格式的文本文件的集合）中提取相关信息) 并编写自己的代码来使用它。

然后是消息正文中的问题：

这似乎更加绝望了。但由于这可能适用于有限数量的知识渊博并了解 Avestan 的用户，因此以适当的方向显示一串 Avestan 字符以及它们的图像并要求用户单击一个可能不会太糟糕按钮，如果顺序错误。您可以将此选择保存在 cookie 中，以便用户只需执行一次（每个浏览器；尽管它应该是相对短暂的 cookie，因为浏览器可能会更新）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T15:20:58.440

感谢您的评论，但似乎我自己做了这个：

```
function is_script_rtl(t) {
    var d, s1, s2, bodies;

    //If the browser doesn’t support this, it probably doesn’t support Unicode 5.2
    if (!("getBoundingClientRect" in document.documentElement))
        return false;

    //Set up a testing DIV
    d = document.createElement('div');
    d.style.position = 'absolute';
    d.style.visibility = 'hidden';
    d.style.width = 'auto';
    d.style.height = 'auto';
    d.style.fontSize = '10px';
    d.style.fontFamily = "'Ahuramzda'";
    d.appendChild(document.createTextNode(t));

    s1 = document.createElement("span");
    s1.appendChild(document.createTextNode(t));
    d.appendChild(s1);

    s2 = document.createElement("span");
    s2.appendChild(document.createTextNode(t));
    d.appendChild(s2);

    d.appendChild(document.createTextNode(t));

    bodies = document.getElementsByTagName('body');
    if (bodies) {
        var body, r1, r2;

        body = bodies[0];
        body.appendChild(d);
        var r1 = s1.getBoundingClientRect();
        var r2 = s2.getBoundingClientRect();
        body.removeChild(d);

        return r1.left > r2.left;
    }

    return false;   
} 
```

使用示例：

```
Avestan in <script>document.write(is_script_rtl('') ? "RTL" : "LTR")</script>,
Arabic is <script>document.write(is_script_rtl('العربية') ? "RTL" : "LTR")</script>,
English is <script>document.write(is_script_rtl('English') ? "RTL" : "LTR")</script>. 
```

它似乎工作。:)

# c++ - 无法在 pthread_create 函数中将 '*void(MyClass::*)(void*) 转换为 void*(*)(void*)

> ID：12006097
> 
> 赞同：5
> 
> 时间：2012-08-17T12:44:52.700
> 
> 标签：c++, pthreads, friend, friend-function

我正在尝试使用“CameraManager”类创建一个新线程，但出现以下错误：

> 无法在 pthread_create 函数中将 '*void(CameraManager:: * )(void*) 转换为 void*( * )(void*)

我在 cameramanager.h 文件中定义：

```
public:
void *dequeueLoop(void *ptr); 
```

并在 cameramanager.cpp

```
void CameraManager::startDequeuing(){
dequeuing = true;
dequeueThreadId = pthread_create(&dequeueThread, NULL, &CameraManager::dequeueLoop, NULL);
}

void *CameraManager::dequeueLoop(void *ptr){
while(dequeuing){
    highSpeedCamera->dequeue();
    highSpeedCamera->enqueue();
} 
```

我不想将 dequeueLoop 声明为静态函数我也尝试通过以下方式将 dequeueLoop 声明为类友函数，但是它在类变量“highSpeedCamera”和“dequeuing”上没有作用域，编译器也告诉我没有在这个范围内声明“dequeueLoop”

为了使 dequeueLoop 成为我所做的朋友功能：

相机管理器.h

```
public:
friend void *dequeueLoop(void *ptr); 
```

相机管理器.cpp

```
void CameraManager::startDequeuing(){
    dequeuing = true;
    dequeueThreadId = pthread_create(&dequeueThread, NULL, &CameraManager::dequeueLoop, NULL);
}
void *dequeueLoop(void *ptr){
    while(dequeuing){
        highSpeedCamera->dequeue();
        highSpeedCamera->enqueue();
    }
} 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:55:42.197

> 我不想声明`dequeueLoop`为静态函数

如果你想使用 pthreads，那么你需要一个静态或非成员函数作为入口点。您可以将指向对象的指针传递给此函数，将其用作非静态成员函数的蹦床：

```
static void * dequeueEntry(void * self) {
    return static_cast<CameraManager*>(self)->dequeueLoop();
}

dequeueThreadId = pthread_create(
    &dequeueThread, NULL, 
    &CameraManager::dequeueEntry, // <-- pointer to trampoline function
    this);                        // <-- pointer to object for member function 
```

或者，如果你有一个现代编译器，你可以使用标准线程库来代替：

```
std::thread thread(&CameraManager::dequeLoop, this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:52:52.087

如果您希望该函数成为该类的成员，则它*必须*是`static`. 这是因为线程函数将被直接调用，并且没有有效的`this`指针。这可以通过使用包装函数来解决，该函数传递实际对象，然后调用正确的成员函数：

```
void *dequeueLoopWrapper(void *p)
{
    CameraManager *cameraManager = static_cast<CameraManager*>(p);
    camereraManager->dequeueLoop();
    return nullptr;
}

// ...

void CameraManager::startDequeuing()
{
    dequeuing = true;
    dequeueThreadId = pthread_create(&dequeueThread, NULL, dequeueLoopWrapper, this);
} 
```

但是，我建议您开始使用新标准库中的[线程支持：](http://en.cppreference.com/w/cpp/thread)

```
void CameraManager::startDequeuing()
{
    dequeuing = true;
    myThread = std::thread(&CameraManager::dequeueLoop, this);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:50:32.453

除非它是静态的，否则不能将指向成员函数的指针用作函数指针。您必须使 dequeueLoop 成为一个自由函数，或者编写一个自由函数作为它的包装器。

要访问自由函数中的类成员，您应该让函数将其`this`指针作为 pthread_create 的最后一个参数传递。然后让自由函数将它的参数转换为指向类的指针。

# c# - WebDriver Visual Studio 2010 和 ReSharper APPCRASH

> ID：12006100
> 
> 赞同：2
> 
> 时间：2012-08-17T12:44:55.467
> 
> 标签：c#, firefox, nunit, webdriver, resharper

我们使用带有 ReSharper 的 Visual Studio 2010 来处理和运行我们的 webdriver (2.25.1) 测试。每当我启动我的测试时，浏览器（Firefox 12）就会启动，但几秒钟后我得到一个窗口“任务运行程序应用程序已停止工作”，详细信息部分包含以下内容：

在这种情况下：Firefox：12.0.0 NUnit：2.5.10（与 ReSharper 捆绑） Visual Studio：2010 WebDriver：2.25.1

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: JetBrains.ReSharper.TaskRunner.CLR4.MSIL.exe
  Application Version:  6.1.37.86
  Application Timestamp:    4ef0c42d
  Fault Module Name:    clr.dll
  Fault Module Version: 4.0.30319.269
  Fault Module Timestamp:   4ee9d6e1
  Exception Code:   c00000fd
  Exception Offset: 0000000000008daa
  OS Version:   6.1.7601.2.1.0.256.4
  Locale ID:    1033
  Additional Information 1: d161
  Additional Information 2: d161e6195854b08ee25ee662a5207f62
  Additional Information 3: ffbe
  Additional Information 4: ffbe17c9618e32bb213796ac6f7261de 
```

我已经尝试过更改 NUnit 和 Webdriver 版本，但结果是一样的。

当我使用不同的 firefox (7.0.1) 时，我得到了这个：Firefox：7.0.1 NUnit：2.5.10（与 ReSharper 捆绑）Visual Studio：2010 WebDriver：2.25.1

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: plugin-container.exe
  Application Version:  7.0.1.4288
  Application Timestamp:    4e83b8cd
  Fault Module Name:    NPSWF32_11_3_300_271.dll
  Fault Module Version: 11.3.300.271
  Fault Module Timestamp:   502701bf
  Exception Code:   c0000005
  Exception Offset: 002fba12
  OS Version:   6.1.7601.2.1.0.256.4
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\WINDOWS\system32\en-US\erofflps.txt 
```

我也尝试更改 ReSharper 的版本，但结果是一样的。

所以，我认为根本原因在 webdriver 和 firefox 之间，但我不知道我应该/可以做什么。有谁知道如何解决或修复它，因为目前我无法完成我的工作。

提前致谢！

# sql-server - SQL server R2 企业版下载？

> ID：12006103
> 
> 赞同：2
> 
> 时间：2012-08-17T12:45:14.760
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我找不到此下载的链接。SQL Server R2 企业版。我不需要 Service Pack 1，我首先需要 R2 企业版，然后我可以升级到 SP1。我当前的版本是 SQL server 2008 企业版。

我找不到任何地方可以下载这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:54:51.873

[你可以在这里](http://www.microsoft.com/de-de/download/search.aspx?q=sql%20server%202008%20r2&fs=producttype~%255eApplication%2524&p=0&r=10&t=&s=price~Descending)下载快速版和评估版，但你不能下载企业版那么容易。如果您购买了产品，您可以这样做 - 然后您将获得下载文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:53:06.323

它的支付

[SQL-Server-2008-R2-企业版](http://www.microsoftstore.com/store/msstore/en_US/pd/SQL-Server-2008-R2-Enterprise-Edition-25-Client-Access-Licenses/productID.221628500)

# spring - Spring Data MongoDB：访问和更新子文档

> ID：12006105
> 
> 赞同：8
> 
> 时间：2012-08-17T12:45:31.343
> 
> 标签：spring, mongodb, spring-data, spring-data-document

Spring Data 和 MongoDB 的第一次实验很棒。现在我有以下结构（简化）：

```
public class Letter {
  @Id
  private String id;
  private List<Section> sections;
}

public class Section {
  private String id;
  private String content;
} 
```

加载和保存整个 Letter 对象/文档就像一个魅力。（我使用 ObjectId 为 Section.id 字段生成唯一的 ID。）

```
Letter letter1 = mongoTemplate.findById(id, Letter.class)
mongoTemplate.insert(letter2);
mongoTemplate.save(letter3); 
```

由于文档很大（200K），有时应用程序只需要子部分：是否有可能查询子文档（部分），修改并保存它？我想实现一个像

```
Section s = findLetterSection(letterId, sectionId);
s.setText("blubb");
replaceLetterSection(letterId, sectionId, s); 
```

当然还有如下方法：

```
addLetterSection(letterId, s); // add after last section
insertLetterSection(letterId, sectionId, s); // insert before given section
deleteLetterSection(letterId, sectionId); // delete given section 
```

我看到最后三种方法有些“奇怪”，即加载整个文档、修改集合并再次保存它，从面向对象的角度来看可能是更好的方法；但是第一个用例（“导航”到子文档/子对象并在该对象的范围内工作）似乎很自然。

我认为MongoDB可以更新子文档，但是SpringData可以用于对象映射吗？感谢您的任何指示。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T12:19:53.853

我想出了以下仅切片和加载一个子对象的方法。好像没问题？我知道并发修改的问题。

```
Query query1 = Query.query(Criteria.where("_id").is(instance));
query1.fields().include("sections._id");
LetterInstance letter1 = mongoTemplate.findOne(query1, LetterInstance.class); 
LetterSection emptySection = letter1.findSectionById(sectionId);
int index = letter1.getSections().indexOf(emptySection);

Query query2 = Query.query(Criteria.where("_id").is(instance));
query2.fields().include("sections").slice("sections", index, 1);
LetterInstance letter2 = mongoTemplate.findOne(query2, LetterInstance.class);
LetterSection section = letter2.getSections().get(0); 
```

这是加载所有部分但省略其他（大）字段的替代解决方案。

```
Query query = Query.query(Criteria.where("_id").is(instance));
query.fields().include("sections");
LetterInstance letter = mongoTemplate.findOne(query, LetterInstance.class); 
LetterSection section = letter.findSectionById(sectionId); 
```

这是我用于仅存储单个集合元素的代码：

```
MongoConverter converter = mongoTemplate.getConverter();
DBObject newSectionRec = (DBObject)converter.convertToMongoType(newSection);

Query query = Query.query(Criteria.where("_id").is(instance).and("sections._id").is(new ObjectId(newSection.getSectionId())));
Update update = new Update().set("sections.$", newSectionRec);
mongoTemplate.updateFirst(query, update, LetterInstance.class); 
```

很高兴看到 Spring Data 如何与 MongoDB 的“部分结果”一起使用。

任何意见高度赞赏！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-26T10:48:09.140

I think Matthias Wuttke's answer is great, for anyone looking for a generic version of his answer see code below:

```
@Service
public class MongoUtils {

  @Autowired
  private MongoTemplate mongo;

  public <D, N extends Domain> N findNestedDocument(Class<D> docClass, String collectionName, UUID outerId, UUID innerId, 
    Function<D, List<N>> collectionGetter) {
    // get index of subdocument in array
    Query query = new Query(Criteria.where("_id").is(outerId).and(collectionName + "._id").is(innerId));
    query.fields().include(collectionName + "._id");
    D obj = mongo.findOne(query, docClass);
    if (obj == null) {
      return null;
    }
    List<UUID> itemIds = collectionGetter.apply(obj).stream().map(N::getId).collect(Collectors.toList());
    int index = itemIds.indexOf(innerId);
    if (index == -1) {
      return null;
    }

    // retrieve subdocument at index using slice operator
    Query query2 = new Query(Criteria.where("_id").is(outerId).and(collectionName + "._id").is(innerId));
    query2.fields().include(collectionName).slice(collectionName, index, 1);
    D obj2 = mongo.findOne(query2, docClass);
    if (obj2 == null) {
      return null;
    }
    return collectionGetter.apply(obj2).get(0);
  }

  public void removeNestedDocument(UUID outerId, UUID innerId, String collectionName, Class<?> outerClass) {
    Update update = new Update();
    update.pull(collectionName, new Query(Criteria.where("_id").is(innerId)));
    mongo.updateFirst(new Query(Criteria.where("_id").is(outerId)), update, outerClass);
  }
} 
```

This could for example be called using

```
mongoUtils.findNestedDocument(Shop.class, "items", shopId, itemId, Shop::getItems);
mongoUtils.removeNestedDocument(shopId, itemId, "items", Shop.class); 
```

The `Domain` interface looks like this:

```
public interface Domain {

  UUID getId();
} 
```

Notice: If the nested document's constructor contains elements with primitive datatype, it is important for the nested document to have a default (empty) constructor, which may be protected, in order for the class to be instantiatable with null arguments.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-23T16:22:34.213

### 解决方案

这就是我对这个问题的解决方案：

### 对象应该更新

```
@Getter
@Setter
@Document(collection = "projectchild")
public class ProjectChild {
  @Id
  private String _id;

  private String name;

  private String code;

  @Field("desc")
  private String description;

  private String startDate;

  private String endDate;

  @Field("cost")
  private long estimatedCost;

  private List<String> countryList;

  private List<Task> tasks;

  @Version
  private Long version;
} 
```

### 编码解决方案

```
 public Mono<ProjectChild> UpdateCritTemplChild(
       String id, String idch, String ownername) {

    Query query = new Query();
    query.addCriteria(Criteria.where("_id")
                              .is(id)); // find the parent
    query.addCriteria(Criteria.where("tasks._id")
                              .is(idch)); // find the child which will be changed

    Update update = new Update();
    update.set("tasks.$.ownername", ownername); // change the field inside the child that must be updated

    return template
         // findAndModify:
         // Find/modify/get the "new object" from a single operation.
         .findAndModify(
              query, update,
              new FindAndModifyOptions().returnNew(true), ProjectChild.class
                       )
         ;

  } 
```

# php - Codeigniter 控制器，javascript console.log()

> ID：12006110
> 
> 赞同：3
> 
> 时间：2012-08-17T12:45:35.360
> 
> 标签：php, javascript, codeigniter

有没有一种（简单的）方法可以将一些变量从 Codeigniter 控制器回显到浏览器控制台？

就像是

```
public function my_controller_method() {
   if (testing_out_something) {
      $result = "looks like it works";
      $this->log_to_javascript_console->write($result);
   }
} 
```

我看到了[这个 javascript 类](http://codeigniter.com/user_guide/libraries/javascript.html)，但它看起来更像是 jQuery，我只想为调试目的做一些简单的事情。

我想另一种方法是将它发送到视图，但我现在不希望我的视图改变，我只想确保我的数据正在发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:48:12.467

这个链接可以帮助你：

[http://www.codeforest.net/debugging-php-in-browsers-javascript-console](http://www.codeforest.net/debugging-php-in-browsers-javascript-console)

[http://sarfraznawaz.wordpress.com/2012/01/05/outputting-php-to-browser-console/](http://sarfraznawaz.wordpress.com/2012/01/05/outputting-php-to-browser-console/)

# ios - 我可以在 iOS6 模拟器中添加存折应用程序吗？

> ID：12006111
> 
> 赞同：3
> 
> 时间：2012-08-17T12:45:37.653
> 
> 标签：ios, ios-simulator, passbook

我可以创建 Sample.pkpass。

自然地，我从 iOS Provisioning Portal 创建了一个 Pass Type ID、sample.cer、sample.p12。

我还创建了 logo.png、logo@2x.png、pass.json、manifest.json。然后我创建了 S/MIME 签名、zip 压缩文件。然后，我在 iOS6 模拟器上尝试了 sample.pkpass 到 Safari。

```
http://localhost/sample/sample.pkpass 
```

我可以看到我的登机牌。然后，我按下屏幕右上角的“添加”按钮。然后，我的登机牌从屏幕上消失了。

所以，我启动了 Passbook 应用程序，但我看不到我的登机牌。

是因为应用程序在模拟器中运行吗？

# php - 带有 Zend 的 Google Analytics API

> ID：12006119
> 
> 赞同：0
> 
> 时间：2012-08-17T12:45:59.440
> 
> 标签：php, api, zend-framework, google-analytics

我正在寻找从 Google Analytics 接收数据的最简单方法，并且我找到了这个库，但在 API 更改后它似乎无法正常工作。

[http://healthycod.in/2011/07/google-analytics-and-zend-framework/](http://healthycod.in/2011/07/google-analytics-and-zend-framework/)

我正在寻找适用于当前 google api 的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:05:48.873

该组件在版本 1.12 中被添加到 Zend Framework 中，在该版本中它已更新为与当前版本的 API 一起使用。1.12 尚未发布，但如果您迫不及待，可以使用候选发布版：http: [//framework.zend.com/download/latest](http://framework.zend.com/download/latest)（向下滚动到底部）

# php - 使用链接自动登录网站，仅从 Intranet 访问此链接

> ID：12006121
> 
> 赞同：1
> 
> 时间：2012-08-17T12:46:06.100
> 
> 标签：php, security, intranet

我有以下情况。

我们有一个用 PHP 编写的网站，用户需要登录才能访问该网站。

现在不同的客户都有登录详细信息，但我们还需要提供一个自动登录功能，其中给出一个链接并将其存储在客户内部网内的页面上，在该内部网内工作的所有员工都应该能够使用此链接自动登录到网站.

然而问题是，如果在 Intranet 外部访问此链接，则客户端不应自动登录，而应使用用户名和密码。有没有办法检查链接是否在客户端的 Intranet 中被访问。

我考虑过验证外部 IP 地址，但如果 ISP 使用 DHCP 分配 IP 地址，这可能会改变。

不幸的是，该网站不能在 Intranet 中托管。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:48:48.440

好吧，这很*hacky*，但是您可以做的是在您的 PHP 代码中对某个 cookie 进行 cookie 检查。

让办公室中的*每个人都*可以访问将 cookie 添加到浏览器的页面，然后**限制对该页面的访问**。

然后允许拥有该 cookie 许可的人绕过您的 PHP 代码中的登录。

# java - jsp发送邮件

> ID：12006128
> 
> 赞同：-3
> 
> 时间：2012-08-17T12:46:32.543
> 
> 标签：java, jsp, email

我正在尝试设计一个 jsp 页面，我可以在其中发送电子邮件，但是在核心 java 中正确运行的代码在 jsp 代码中使用时给了我异常。我相信我已将 mail.jar 正确放置在 lib 中。

当前的jsp代码是：

```
<%@ page contentType="text/html; charset=iso-8859-1" language="java" import="java.sql.*" errorPage="" %>

                <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

                <html>
                <body>

                <%@ page import="java.util.Properties" %>               
                <%@ page import="javax.mail.Message" %>
                <%@ page import="javax.mail.MessagingException" %>
                <%@ page import="javax.mail.PasswordAuthentication" %>
                <%@ page import="javax.mail.Session" %>
                <%@ page import="javax.mail.Transport" %>
                <%@ page import="javax.mail.internet.InternetAddress" %>
                <%@ page import="javax.mail.internet.MimeMessage" %>

                <%
                Properties props = new Properties();
                        props.put("mail.smtp.host", "smtp.gmail.com");
                        props.put("mail.smtp.socketFactory.port", "465");
                        props.put("mail.smtp.socketFactory.class",
                                "javax.net.ssl.SSLSocketFactory");
                        props.put("mail.smtp.auth", "true");
                        props.put("mail.smtp.port", "465");

                 Session.getDefaultInstance(props,
                            new javax.mail.Authenticator() {
                                protected PasswordAuthentication getPasswordAuthentication() {
                                    return new PasswordAuthentication("prakash.d2222","**************");
                                }
                            });

                        try {

                            Message message = new MimeMessage(session);
                            message.setFrom(new InternetAddress("from@no-spam.com"));
                            message.setRecipients(Message.RecipientType.TO,
                                    InternetAddress.parse("prakash_d22@rediffmail.com"));
                            message.setSubject("hi");
                            message.setText("12345" +
                                    "\n\n No spam to my email, please!");

                            Transport.send(message);

                            System.out.println("Done");

                        } catch (MessagingException e) {
                            throw new RuntimeException(e);
                        }
                %>
                </body>
                </html> 
```

我看到的错误是：

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 37 in the jsp file: /pizza/page/ssl.jsp
The constructor MimeMessage(HttpSession) is undefined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:48:47.990

正如错误消息告诉您的那样，[没有`MimeMessage`构造函数采用`HttpSession`](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMessage.html). 有一个构造函数接受 a ，这似乎是您要使用的构造函数，但 an*不是*a 。[`javax.mail.Session`](http://docs.oracle.com/javaee/6/api/javax/mail/Session.html)[`HttpSession`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)`javax.mail.Session`

传递`Session.getDefaultInstance()`您当前正在丢弃的由返回的值。

```
Session mailSession = Session.getDefaultInstance(props,
    new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("prakash.d2222","**************");
        }
});

// ...

Message message = new MimeMessage(mailSession); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:57:01.060

```
Message message = new MimeMessage(session ); // error 
```

在 JSP 页面中 session 是一个隐式对象，实际上是 javax.servlet.http.HttpSession。

我认为您对 HttpSession 和邮件 javax.mail.Session.Session 感到困惑。更改您的代码，例如 - ...

```
 Session mailSession = Session.getDefaultInstance(props,
                                new javax.mail.Authenticator() {
                                    protected PasswordAuthentication 
                                          getPasswordAuthentication() {
                                        return new PasswordAuthentication
                                          ("prakash.d2222","**************");
                                    }
                                }); 
```

...

```
Message message = new MimeMessage(mailSession ); 
```

...

# c# - 绘制带纹理的 3D 三角形时如何校正透视？

> ID：12006132
> 
> 赞同：4
> 
> 时间：2012-08-17T12:46:49.443
> 
> 标签：c#, 3d, gdi

我一直在从事一个 3D 渲染项目作为技术练习，看看我是否可以复制许多 3D 框架已经做的事情：从加载模型到绘制三角形到准备绘制的缓冲区。

这是我设法制作的示例 ![程序输出渲染](../Images/eb4d3fbf01be17c3d89bf459fd82f005.png)

正如您从屏幕截图中看到的那样，我在绘制表面纹理时遇到了障碍。我发现的这个[维基百科链接](http://en.wikipedia.org/wiki/Texture_mapping)解释了仿射与非仿射。与此类似的其他一些关于[透视正确纹理映射](http://www.lysator.liu.se/~mikaelk/doc/perspectivetexture/)的链接会更详细地介绍它。

我仍然不明白如何在绘制像素时校正我的 UV 坐标。

**我的引擎目前如何使用三角形：** 将 3D 顶点数据转换为 2D 屏幕数据调用绘制三角形，传递 0 和 1 之间的深度和绘制三角形内的纹理细节每条垂直线是通过沿三角形的 3 个边缘进行插值来绘制的

我已经在链接中进行了更改，但我得到了除以零的错误。如果我忽略它们，则不会绘制任何内容。

**问题**

如何校正在每个像素处选择的 UV 坐标。目前，在每个像素上，我都知道 0.0 到 1.0 之间的深度，即明显的 UV。

任何帮助将非常感激。先感谢您。

汤姆：）

**更新：**

解决方案，使用 Andreas Brinck 的答案。它工作正常。下面是它现在工作的屏幕截图。

![工作正确的透视纹理映射](../Images/393dda94c35d9d029152e0798d3d0c0d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:52:27.927

不是在三角形上插值 u 和 v，而是插值 u/z、v/z 和 1/z（在顶点处计算）并检索透视正确坐标为 (u/z) / (1/z) 和 (v/ z) / (1/z)。

# c# - 将用户添加到 Active Directory 组导致“访问被拒绝”

> ID：12006135
> 
> 赞同：0
> 
> 时间：2012-08-17T12:47:02.673
> 
> 标签：c#, asp.net, active-directory, active-directory-group

我正在开发一个 C# Asp.net 站点，该站点将用户添加到 Active Directory 并将它们分配给安全组。

整个脚本运行良好，除了一个问题。我可以将用户添加到组，但是在尝试将用户添加到应用程序池的身份所属的组时，我得到了“拒绝访问”异常。

我认为这是一个 Windows 权限问题，但我不确定需要什么权限。过去我们在使用较旧的 VB 脚本时也遇到过同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:00:57.260

我在设计用于活动目录管理的网站时遇到了这种问题。目前不允许执行环境管理AD。因此，通过 IIS，我们将默认帐户更改为本地系统，该帐户具有完全权限（例如，他几乎无法重新启动系统）并且无法登录（安全第一）。这适用于您冒充您的网站。

如果没有，您将需要高级组和用户管理。AD 权限非常敏感。

**编辑：** 在您的情况下，使用特定帐户不是问题。在您的管理员登录时检查身份，并使用本地系统模拟。您的应用程序环境会好的，只有您的管理员可以访问。

# eclipse - How do LogService and LogReaderService in Equinox work along?

> ID：12006137
> 
> 赞同：5
> 
> 时间：2012-08-17T12:47:08.320
> 
> 标签：eclipse, logging, osgi, equinox

I'm developing a OSGi Equinox bundle and I'd like to add some logging to it, mostly to be redirected to the OSGi console, just for debugging purposes.

After discarding the usage of log4j, since there are a couple of logging services in Equinox (LogService and ExtendedLogService), I found this article describing how to use the LogService:

[OSGi Log Service](http://www.eclipsezone.com/eclipse/forums/t85084.html)

So I came up with an Activator that looks like this:

```
package org.example.servlet;

import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;
import org.osgi.framework.ServiceReference;
import org.osgi.service.log.LogService;
import org.osgi.util.tracker.ServiceTracker;
import org.eclipse.equinox.log.ExtendedLogService;

public class Activator implements BundleActivator {

private static BundleContext context;
private ServiceTracker logServiceTracker;
private LogService logService;

static BundleContext getContext() {
    return context;
}

/*
 * (non-Javadoc)
 * @see org.osgi.framework.BundleActivator#start(org.osgi.framework.BundleContext)
 */
public void start(BundleContext bundleContext) throws Exception {
    Activator.context = bundleContext;      
    // create a tracker and track the log service
    logServiceTracker = new ServiceTracker(context, LogService.class.getName(), null);
    logServiceTracker.open();

    // grab the service
    logService = (LogService) logServiceTracker.getService();

    if(logService != null)
        logService.log(LogService.LOG_INFO, "Yee ha, I'm logging!");
}

/*
 * (non-Javadoc)
 * @see org.osgi.framework.BundleActivator#stop(org.osgi.framework.BundleContext)
 */
public void stop(BundleContext bundleContext) throws Exception {
    Activator.context = null;
} 
```

Well, I never see the logged message in the OSGi console...looking for some more info, I found this thread:

[How to use Equiniox's LogService ?](http://www.eclipsezone.com/eclipse/forums/t85084.html)

Some answers suggest that I should implement a LogServiceReader object that actually listens for logging events and (this is just my guess), redirects logged messages to whatever (file, console, etc...)

Now my question, more than how to implement this interface, is how do I do the binding between my implementation of the LogServiceReader and the LogService used in the Activator...

Thanks! Alex

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:51:29.373

To answer the question directly:

A LogService is a service responsible for storing log messages. A LogReaderService is a service responsible for reading these log messages and dispatching them to log listeners. The binding between these is done automatically. What you will do yourself is log messages to the LogService on the one side, and possibly bind LogListeners to the LogReaderService, that will write out the logs somewhere, for example the console, on the other side.

To solve your problem of the logs not appearing, you need to do a few additional things.

First of all, did you install a bundle offering an implementation of the LogService and the LogReaderService into your osgi container?

You can check for the presense of an org.osgi.service.log.LogService by adding something like this to your Activator:

```
if(logService != null){ 
        System.out.println("There is a LogService available"); 
        logService.log(LogService.LOG_INFO, "Yee ha, I'm logging!"); 
} 
else { 
        System.out.println("There is no LogService available"); 
} 
```

Or just type "bundles" in the equinox console and look for a bundle offering an org.osgi.service.log.LogService and an org.osgi.service.log.LogReaderService.

If no LogService is available, install one. For example:

```
install http://oscar-osgi.sf.net/repo/log/log.jar 
```

The org.apache.log4j equinox dependency offers such a service too.

Start and stop your own bundle again. It should now print "There is a LogService available".

Now your messages are logged to the LogService and processed by the LogReaderService, but still, since there might be no LogListeners registered with this service(depending on other bundles started),

You might need to have to add a LogListener yourself in your bundle Activator.

For an example bundle Activator who does this, check [http://blog.kornr.net/index.php/2008/12/09/understanding-the-osgi-logging-service](http://blog.kornr.net/index.php/2008/12/09/understanding-the-osgi-logging-service).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:46:58.903

Well, just in case someone else is interested in the subject. I found a really nice wiki in Google Code explaining how OSGi logging system works that is a 'must read':

[Understanding OSGi Logging](http://code.google.com/p/osgi-logging/wiki/UnderstandingTheOSGiLogging)

Since I only want to use a log to print in console, the solution proposed there works for me. Only problem was finding an implementation of the LogService that worked as expected. The one pointed out in the [article](http://oscar-osgi.sf.net/repo/log/log.jar) actually works, but implements version 1.1 while what current LogService specification is at [version 1.3](http://www.osgi.org/javadoc/r4v41/org/osgi/service/log/package-summary.html) as far as I know. So what I did was, downloaded the sources from the previous implementation and adapted that implementation to my taste and to latest version (1.3) specification. You can find sources [here](http://oscar-osgi.sf.net/repo/log/log-src.jar).

Obviously, you can also use yours or any others implementation of the LogService interfaces, up to you.

Besides, if you plan to use a back-end existing logging service, such as commons-logging, or sl4j, etc...I recommend these links, they provide great info about where to start:

[Building backend](http://code.google.com/p/osgi-logging/wiki/BuildingTheBackEnd) [OSGi logging overview](http://ekkes-corner.blogspot.com.es/2008/09/logging-in-osgi-enterprise-applications.html)

This was overkill for me, since all I wanted was a way to print messages in the OSGi console, but without having to use log4j, fragments and the like.

Hope somebody found this useful

Regards, Alex

# web-applications - 在 url 栏中显示 webapp 的图像

> ID：12006140
> 
> 赞同：0
> 
> 时间：2012-08-17T12:47:24.427
> 
> 标签：web-applications, browser

我有一个网络应用程序，我想在 URL 中放置一个小图像。类似于 StackOverflow 的东西会：

![网站图标](../Images/f4ef16aaf263b5dba2e3efd32cd3f062.png)

我不太了解这是什么以及它是如何实现的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:53:18.650

该图像称为网站图标。在您的 HTML 头中，插入以下内容：

```
<link rel="shortcut icon" href="http://website.com/iconpath.ico" /> 
```

看起来[这个站点](http://www.prodraw.net/favicon/index.php)可以将您拥有的图像转换为 *.ico 文件

干杯!

# asp.net - 有没有办法使用 DataBinder.Eval 语句作为 ASPX 页面中特定数组的索引？

> ID：12006141
> 
> 赞同：1
> 
> 时间：2012-08-17T12:47:28.540
> 
> 标签：asp.net, vb.net, databinder

有没有办法使用 DataBinder.Eval 语句作为 ASPX 页面中特定数组的索引？

我正在尝试开发一个包含参考书目列表的页面，为此我使用了 ASP.NET 2.0 中继器控件。

我对 ASP.NET 很陌生，所以我仔细阅读了有关[格式化 DataBinder.Eval 数据](https://stackoverflow.com/questions/275194/formatting-databinder-eval-data)和[在标记中使用 if 条件中的值](https://stackoverflow.com/questions/11117962/using-values-within-if-conditions-in-mark-up)的各种答案，它们都处理 DataBinder.Eval 语句的使用，但我坚持我的数组（称为 Refbib() ）......

我试过这个：

```
<%# RefBib(System.Convert.ToInt32((DataBinder.Eval(Container.DataItem, "id")!="") ? DataBinder.Eval(Container.DataItem, "id"):0))%> 
```

我收到一条错误消息 BC30203: Identifier expected

有人可以解释我的语法有什么问题吗？

# annotations - TomEE Plus 似乎在应用程序大战中找不到“ejb-jar.xml”

> ID：12006143
> 
> 赞同：1
> 
> 时间：2012-08-17T12:47:36.880
> 
> 标签：annotations, openejb, apache-tomee, ejb-jar.xml

我的主要目标是将为 WebSphere 编写的 EJB 2.x 应用程序迁移到可部署到 Tomcat 服务器的 Web 应用程序。但我希望这几乎*是一对一的*迁移。

所以我设置了一个 TomEE (apache-tomee-plus-1.0.0) 并将子目录 '/apps' 的配置保留为部署目录。

当我将“*.war”文件放入“/apps”目录时，OpenEJB 成功解压缩存档并加载它。但是我在日志中没有看到 EJB 加载。我认为 OpenEJB 忽略了“/apps/BdbWeb/META-INF”中的“ejb-jar.xml”。

日志片段：

```
INFO main OpenEJB.startup.config - Extracting jar: C:\Entwicklung\apache-tomee-plus-1.0.0\apps\BdbWeb.war
INFO main OpenEJB.startup.config - Extracted path: C:\Entwicklung\apache-tomee-plus-1.0.0\apps\BdbWeb
DEBUG main OpenEJB.options - Using default 'openejb.tempclassloader.skip=none'  Possible values are: none, annotations, enums, all or NONE or ALL
DEBUG main OpenEJB.options - Using default 'openejb.webservices.enabled=true'
DEBUG main OpenEJB.options - Using default 'tomee.jaxrs.deploy.undeclared=false'
DEBUG main OpenEJB.options - Using default 'openejb.webservices.enabled=true'
DEBUG main OpenEJB.options - Using default 'openejb.check.classloader=false'
INFO main OpenEJB.options - Using 'openejb.descriptors.output=false'
INFO main OpenEJB.options - Using 'openejb.descriptors.output=false'
INFO main OpenEJB.options - Using 'openejb.validation.output.level=VERBOSE'
INFO main OpenEJB.startup.config - Enterprise application "C:\Entwicklung\apache-tomee-plus-1.0.0\apps\BdbWeb.war" loaded. 
```

当我向Java 类添加至少一个注释（例如@Remote 或@Stateful）时，我会看到相应的日志条目。于是 OpenEJB 找到了 Annotations。

但是有很多类和一个很大的 ejb-jar.xml 文件！我想避免手动为每个类添加正确的注释......！所以我希望你能帮助我找到错误。

也许是*结构问题*？我在war文件中有以下结构：

*   BdbWeb.war
    *   页面
        *   **.jsp*
    *   图片
        *   **.jpg*
    *   元信息
        *   ejb-jar.xml
        *   清单文件
        *   openejb-jar.xml（手工创建；希望这会有所帮助 - 但事实并非如此）
    *   样式表
        *   **.css*
    *   网络信息
        *   班级
            *   德
                *   *包含类的目录*
            *   log4j.xml
            *   休眠.cfg.xml
        *   库
            *   **。罐*
        *   web.xml
    *   索引.jsp

我已经将`openejb.servicemanager.enabled`'system.properties' 文件中的属性 设置为，`true`但这仅生成了一个没有实体或 bean 条目的 xml 文件。

我该怎么做才能获得 OpenEJB 使用的给定 ejb-jar.xml？

顺便说一句：自己创建的“openejb-jar.xml”真的有必要吗……？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:24:05.863

只需稍作调整：“.WARs 中的 EJB”功能所需的 Java EE 7 位置是`WEB-INF/ejb-jar.xml`

对我们来说，检查这一点并发出警告是个好主意。我在[这里为它创建了一张票](https://issues.apache.org/jira/browse/TOMEE-381)

旁注：

*   不，`openejb-jar.xml`没有必要
*   `openejb.servicemanager.enabled`也不需要设置

您是否在文档中看到了`openejb.servicemanager.enabled`TomEE 所需的内容？如果是这样，指向文档的指针会很棒——我会确保它被删除。

# .net - .net 4.0.1 安装 Visual Studio 2012 后转换为平台 4.5

> ID：12006144
> 
> 赞同：1
> 
> 时间：2012-08-17T12:47:41.053
> 
> 标签：.net, visual-studio-2012

我刚刚将 Visual Studio 2012 与 Visual Studio 2010 并排安装。如果我创建了一个以 .net 4.0.1 为目标的项目并构建，该项目现在以 .net 4.5 为目标，这是不应该的。

这是目标文件中的错误还是？

# c# - 如何在没有安装 SQL Server 的机器上运行带有 SQL 数据库的应用程序

> ID：12006152
> 
> 赞同：3
> 
> 时间：2012-08-17T12:47:59.793
> 
> 标签：c#, sql, database, deployment, connection

我开发了一个应用程序，它有一个显示来自 SQL 数据库的一些数据的滑块。我正在使用 Visual Studio 2010 和 Microsoft SQL Server 2008。

事实上，当我部署它并在我的个人计算机上运行它时，我的应用程序没有遇到任何问题。当我在另一台机器上尝试时出现问题，问题是应用程序无法连接 SQL 数据库。我试图找出问题的原因，所以我在两台机器上部署后尝试了它，其中一台安装了 SQL Server，另一台没有 SQL Server。该应用程序在安装了 SQL Server 的机器上运行良好，并且无法连接到另一台机器上的数据库。

这是我在我的应用程序中使用的连接字符串>>

> connectionString="数据源=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\KBank.mdf;Integrated Security=True;用户实例=True"

因此，如果有一种方法可以让我在不需要机器安装 SQL Server 的情况下运行应用程序，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:51:48.693

您需要更改连接字符串以指定安装数据库的计算机。类似于以下内容：

> connectionString="Data Source=machine\SQLEXPRESS;AttachDbFilename=|DataDirectory|\KBank.mdf;Integrated Security=True;User Instance=True"

请注意：另一台机器上的数据库需要正确配置，才能从其他机器上访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:52:22.097

您需要执行以下操作之一：

*   在安装过程中包括在客户端计算机上安装 SQL Server Express
*   在您和您的客户有权访问的服务器上使用集中式 SQL 服务器

您可以使用其他数据访问策略，例如将数据序列化为 XML，或使用[SQLite](http://www.sqlite.org/quickstart.html)等不同的数据库 或使用 Web 服务，但简单地说，如果您的客户端计算机上未安装 SQL Server Express，您可以t 强制它工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:51:04.977

您的连接字符串正在使用 localhost，它通过`.`连接字符串中的 表示。如果机器没有安装 SQL Server，这将不起作用，因此您需要将连接字符串更改为远程机器（安装了 SQL Server 的机器，即您的个人计算机）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T12:51:47.403

如果您不想安装 SQL Server Express，您可以通过 sql server compact(http://en.wikipedia.org/wiki/SQL_Server_Compact) 使用嵌入式 SQL Server，或者使用实际的网络数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T06:28:02.520

如果您使用 centerl 数据库安装在服务器计算机和其他所有客户端计算机都可以访问该服务器。

如果是你可以通过以下方式：

首先，您将程序更改为在程序启动时将文件 DSN 写入硬盘

使用以下代码作为示例

```
 private void MakeDSN()
        {
            try
            {
                if (!System.IO.Directory.Exists(@"C:\OTPub"))
                {
                    System.IO.Directory.CreateDirectory(@"C:\OTPub");
                }

                if (File.Exists(@"C:\OTPub\Ot.dsn"))    //delete ErrorLogFile
                {
                    File.SetAttributes(@"C:\OTPub\Ot.dsn", FileAttributes.Temporary);
                    File.Delete(@"C:\OTPub\Ot.dsn");
                }
                string con = "[ODBC]";
                string driver = "DRIVER=SQL Server";
                string uid = "UID=sa";
                string DB = "DATABASE=OTData";
                string server = "SERVER=10.63.210.111";

                var tw = new StreamWriter(@"C:\OTPub\Ot.dsn", true); // make file in location
                using (tw)
                {
                    tw.WriteLine(con);   //write  dataline
                    tw.WriteLine(driver);
                    tw.WriteLine(uid);
                    tw.WriteLine(DB);
                    tw.WriteLine(server);
                }

                lbserver.Text="LOGIN "+server;
            }
            catch (Exception)
            {
                MessageBox.Show("File DSN Error!");
            }
        } 
```

输入您的服务器IP为 `string server`

现在您可以在单独的类中使用连接

```
using System.Data.Odbc;

  class DataBaseConnection
    {
        private OdbcConnection conn1 = new OdbcConnection(@"FILEDSN=C:/OTPub/Ot.dsn;" + "Uid=sa;" + "Pwd=123;"); 

        //insert,update,delete
        public int SetData(string query)
        {
            try
           {
                conn1.Open();
                OdbcCommand command = new OdbcCommand(query, conn1);
                int rs = command.ExecuteNonQuery();
                conn1.Close();
                return rs;
            }
            catch (Exception ex)
            {
                conn1.Close();
                throw ex;
            }
        }

        //select
        public System.Data.DataTable GetData(string sql)
        {
            try
            {
                conn1.Open();
                OdbcDataAdapter adpt = new OdbcDataAdapter(sql, conn1);
                DataTable dt = new DataTable();
                adpt.Fill(dt);
                conn1.Close();
                return dt;
            }
            catch (Exception ex)
            {
                conn1.Close();
                throw ex;
            }
        }
    } 
```

现在您可以编写以下代码来连接数据库所需的不同位置，

```
 DataBaseConnection db = new DataBaseConnection(); 
```

如果您需要 SELECT 查询：

```
DataTable dt = db.GetData("SELECT * From TestTable"); 
```

如果您需要插入、更新、删除查询

```
int i=db.SetData("INSERT INTO TestTable(name,address,tel) VALUES (testname,Colombo,0777125896) "); 
```

此方法无需任何配置即可使用连接数据库。

重要提示：出于安全目的，请记住在退出应用程序时删除 DSN 文件。

希望对你有帮助！

# android - Facebook 相册照片未在 Android 中显示

> ID：12006154
> 
> 赞同：0
> 
> 时间：2012-08-17T12:48:07.273
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试获取专辑的所有照片...我正在获取专辑列表以及它们的照片，但所有照片都是示例图像。

这是代码::

```
try {

response = EditPhotoActivity.facebook.request(HelperActivity.wallAlbumID+ "/photos");
            JSONObject json = null;
        json = Util.parseJson(response);
                                JSONArray photos = null;
                                photos = json.getJSONArray("data");
                                for (int i = 0; i < photos.length(); i++) {
                                    JSONObject a = null;

                                    a = photos.getJSONObject(i);
                                    String id = a.getString("id");

                                    URL img_value = new URL(
                                            "http://graph.facebook.com/" + id
                                                    + "/picture?type=normal");
                                    Bitmap mIcon1 = BitmapFactory
                                            .decodeStream(img_value
                                                    .openConnection()
                                                    .getInputStream());

                                    phtoID.add(mIcon1);
                                    Log.d("photo size", "" + phtoID.size());

                                }
                                next();
                                albumLength = phtoID.size();
                                Log.d("albumLength", "" + albumLength);

                            } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:49:15.743

我认为您无需单独调用即可获取给定 ID 的相册中的照片。查看此专辑的 Facebook Graph API 调用， http: [//graph.facebook.com/10150146071791729/photos](http://graph.facebook.com/10150146071791729/photos)

在`data`数组中，数组中的每个元素都有一个`source`字段，该字段包含指向图像原始源的链接。而不是这样做：

```
String id = a.getString("id");

URL img_value = new URL("http://graph.facebook.com/" 
    + id + "/picture?type=normal"); 
```

尝试这样做：

```
String src = a.getString("source");
URL img_value = new URL(src); 
```

让我知道这是否有帮助。

# php - 使用 php curl 从具有多个提交的网站中提取数据

> ID：12006156
> 
> 赞同：0
> 
> 时间：2012-08-17T12:48:20.923
> 
> 标签：php, html, curl, extract

我必须通过多次提交从网站中提取数据，这必须自动完成......流程如下......

1.  转到此页面...http://www.licindia.in/premium_calculator.htm。
2.  选择一些东西然后提交。这将带我进入一个表格
3.  在那里填写表格并提交...
4.  获取生成的 html。并提取数据。

我之前使用 curl 远程登录网站，但我似乎无法让它正常工作。

```
$url="http://www.licindia.in/premium_calculator.htm";
$postdata = "thepostdata"
$cookie = "cookie.txt" ;
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0");
curl_setopt($ch,CURLOPT_COOKIESESSION,false); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt ($ch, CURLOPT_REFERER, $referer);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch);
curl_close($ch); 
```

我尝试过这样的事情......这不是实际的事情......但这很相似

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:02:31.940

我认为您的第一个问题是您链接的页面上的表单实际上是从`iframe`.

您将希望使用 that`iframe`的 url，因为 cURL 不会`iframe`从父页面加载源。

# r - 如何在 R 中制作彩色网格？

> ID：12006161
> 
> 赞同：9
> 
> 时间：2012-08-16T23:57:31.757
> 
> 标签：r, data-visualization

假设我在 R 中有一个矩阵对象，其值：

```
aa <- matrix(c(0,4,1,10,3,2,1,6,0), ncol=3) 
```

我想用那个比例制作一个像图像中的人物一样的人物。

任何人都可以帮助我使用可以帮助我在 R 中完成这种类型的图形的功能吗？还是那种类型的图形彩色网格的名称？

![我怎样才能在 R 中做到这一点？](../Images/dd60a1fc176c278e791081dde7b6eaa1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T00:19:17.210

看`image`功能。对于比例，您可能需要`colorscale`plotrix 包中的函数。还有其他函数也可用于这些类型的图形：`rasterImage`，在 lattice 包中等。如果您想要完全控制`levelplot`，您甚至可以使用多次调用和其他函数从头开始创建它。`rect`但`image`对于您展示的内容来说，这可能是最快/最简单的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T12:26:07.957

或者你可以使用 package `raster`。

```
library(raster)
r <- raster(xmn = 0, xmx = 3, ymn = 0, ymx = 3, nrows = 3, ncols = 3)
r[] <- 1:9
plot(r) 
```

![在此处输入图像描述](../Images/7176a1797de59bc6373c4c5e995d4386.png)

# visual-c++ - 如何在 mfc 中更改静态文本控件的背景颜色（按下按钮或计时器时）？

> ID：12006168
> 
> 赞同：11
> 
> 时间：2012-08-17T12:48:52.940
> 
> 标签：visual-c++, mfc

我知道它可以用 OnCtlColor() 来完成，但是在加载表单并且要绘制静态文本时它会改变颜色，我想在加载表单后执行它，也许有一个计时器，我搜索了一个解决方案但我没有找到一个明确的，这是我写的：

```
void CTabFive::OnBnClickedButton1()
{
    // TODO: Add your control notification handler code here
    CWnd* pWnd = this->GetDlgItem(IDC_Chromosome1);
    CDC* dc = pWnd->GetDC();
    dc->SetBkColor(RGB(200,0,0));
    pWnd->Invalidate();
    pWnd->UpdateWindow();
    Invalidate();
    UpdateWindow();
    //flag = true;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T14:04:00.427

不需要计时器。在这里，我有一个初始化为 false 的类的 bool m_coloured 成员，并在按下按钮时切换。OnCtlColor 将根据 m_coloured 的值绘制为红色或系统颜色。效果很好。

```
HBRUSH Cmfcvs2010Dlg::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor)
{
    HBRUSH hbr = CDialogEx::OnCtlColor(pDC, pWnd, nCtlColor);

    if (nCtlColor == CTLCOLOR_STATIC && pWnd->GetDlgCtrlID() == IDC_LABEL)
    {
        DWORD d = GetSysColor(COLOR_BTNFACE);

        COLORREF normal = RGB(GetRValue(d), GetGValue(d), GetBValue(d));
        COLORREF red = RGB(255, 0, 0);

        pDC->SetBkColor(m_coloured ? red : normal);

    }
    return hbr;
}

void Cmfcvs2010Dlg::OnBnClickedButton1()
{
    m_coloured = !m_coloured;
    Invalidate();
} 
```

# bash - 从本地机器远程启动的解耦进程

> ID：12006169
> 
> 赞同：0
> 
> 时间：2012-08-17T12:48:57.543
> 
> 标签：bash, process, ssh, terminal

我需要 ssh 到一台机器并启动一个运行几个小时的测试的 bash 脚本，这些测试在整个执行过程中不需要人工交互。

有什么方法可以让我的运行脚本与我的 shell 分离，以便我可以关闭终端并随意关闭我的本地计算机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:50:59.820

当然，使用`nohup`：

```
nohup ./program & 
```

或者，在内部启动程序`screen`或`tmux`然后分离。

# java - “？”是什么意思？在Java中是什么意思？

> ID：12006170
> 
> 赞同：12
> 
> 时间：2012-08-17T12:49:02.303
> 
> 标签：java, ternary-operator, conditional-operator

我不知道问号 ( `?`) 在 java 中代表什么，我正在做一个小程序，一个 Nim 游戏。正在看一本书，寻求帮助，看到了这样的说法：

```
int pinsToTake = (min >= 2) ? 2 : 1; 
```

我不明白，它`?`代表什么，它可以与 if 语句有关，但你把它放在一个变量中吗？可以是`:`“别的”吗？（我刚才说的这件事可能会产生很大的误导）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-17T12:50:34.277

> someval = (min >= 2) ? 2：1；

这称为三元运算符，可以用作`if-else`. 这相当于

```
if((min >= 2) {
   someval =2;
} else {
   someval =1
} 
```

按照本[教程](http://www.devdaily.com/java/edu/pj/pj010018)了解更多信息和用法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T12:50:40.880

它`ternary operator`也称为**条件运算符**，看看[参考](http://en.wikipedia.org/wiki/%3F%3a#Java)

像`Object bar = foo.isSelected() ? getSelected(foo) : getSelected(baz);`

例如。`operand1 ? operand2 : operand3`

> *   如果操作数 1 为真，则返回操作数 2，否则返回操作数 3
> *   操作数 1 必须是布尔类型
> *   操作数 1 可以是计算结果为布尔类型的表达式
> *   操作数 1 和操作数 2 必须是可提升的数字类型或可转换的对象引用，或者为 null
> *   如果操作数 2 或操作数 3 之一是字节，另一个是短整数，则返回值的类型将是短整数
> *   如果操作数 2 或操作数 3 之一是 byte、short 或 char，而另一个是适合其他操作数范围的常量 int 值，则返回值的类型将是其他操作数的类型
> *   否则，正常的二进制数字提升适用
> *   如果操作数 2 或操作数 3 之一为空，则返回的类型将是另一个操作数的类型
> *   如果操作数 2 和操作数 3 都是不同的类型，则其中一个必须兼容（可转换）到另一个类型 [引用](http://www.janeg.ca/scjp/oper/ternary.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T12:52:31.463

它的意思是：

```
if(min >= 2) 
   someval =2;
else 
   someval =1 
```

它被称为[三元运算符](http://en.wikipedia.org/wiki/?%3a)也 请参阅这个 java[示例](http://java.about.com/b/2009/06/06/java-term-of-the-week-ternary-operator.htm)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-17T12:59:21.493

那是一个三元运算符。[查看 Oracle 的文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)以获取更多信息。长话短说，它是一个 if-else 语句，可以在一行中完成并在方法内部使用并定义变量值。

句法：

```
boolean_expression ? do_if_true : do_if_false; 
```

与 if-else 语句的并行性：

```
if(boolean_expression)
    //do_if_true;
else 
    //do_if_false; 
```

`do_if_true`我没有故意使用括号，因为你只能在and中执行一行代码`do_if_false`。

使用示例：

```
boolean hello = true;
String greetings = hello ? "Hello World!" : "No hello for you..."; 
```

这将设置`someString`为`"Hello World!"`因为布尔变量`hello`评估为真。另一方面，你可以嵌套这个表达式：

```
boolean hello = true;
boolean world = false;

String greetings = hello ? (world ? "Hello World!" : "Hello Stranger!") : "No hello for you..."; 
```

在这种情况下，问候语将具有一个值`"Hello Stranger!"`；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T12:51:30.927

它被称为[三元 If 运算符](http://en.wikipedia.org/wiki/?%3a#Java)，它只是一个简写形式`if...else`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T12:51:48.153

"? :" 是一个三元运算符，相当于 if else 语句。

在您的示例中：

```
 pinsToTake = (min >= 2) ? 2 : 1 
```

如果 min >= 2 然后将 2 分配给 pinsToTake，否则分配 1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T12:52:05.837

```
max = (a > b) ? a : b; 
```

(a > b) ? 一：乙；是一个表达式，它返回两个值之一，a 或 b。
测试条件 (a > b)。如果为真，则返回第一个值 a。如果为假，则返回第二个值 b。
返回哪个值取决于条件测试，a > b。条件可以是任何返回布尔值的表达式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T12:52:07.317

它被称为条件运算符。这就是它的工作原理。如果 min 大于或等于 2，那么后面的第一个值？此处为 2 将分配给相应的变量，否则将分配此处为 1 的第二个值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-17T12:53:26.103

[这个链接](http://www.quora.com/Java-programming-language/What-does-a-colon-and-question-mark-mean-in-Java-and-how-would-one-succinctly-explain-this-bit-of-code-to-beginners)会告诉你所有你需要的。

存档摘要：

> 它被称为条件运算符。这是一个三元运算符，需要三个术语：
> 
> 布尔表达式？经验 1 : 经验 2
> 
> BooleanExpression 被评估。如果为真，则整个表达式的值为 Expr1。如果为假，则整个表达式的值为 Expr2。
> 
> 因此，它的用途与 if 语句相同，但它是一个术语而不是整个语句。这意味着您可以将其嵌入到无法使用整个语句的地方。

# ios - UIScrollView setZoomScale 将应用的旋转设置回零

> ID：12006171
> 
> 赞同：6
> 
> 时间：2012-08-17T12:49:02.683
> 
> 标签：ios, uiscrollview, rotation, calayer, zooming

我一直在研究地图替换很长一段时间。整个事情在 a 的`UIScrollView`支持下工作`CATiledLayer`。

要旋转我的地图，我会旋转图层本身。（使用`CATransform3DMakeRotation`）到目前为止效果很好=）

但是，如果我调用`setZoomScale`方法`CATransform3D`，将提交到我的图层的方法是将旋转重置为 0。

我的问题是，有没有办法在`zoomscale`不丢失应用旋转的情况下设置我的滚动视图？

捏合手势也存在同样的问题。

//附加信息

要围绕当前位置旋转，我必须编辑锚点。也许这也是缩放的问题。

```
- (void)correctLayerPosition {
    CGPoint position    = rootView.layer.position;
    CGPoint anchorPoint = rootView.layer.anchorPoint;
    CGRect  bounds      = rootView.bounds;
    // 0.5, 0.5 is the default anchorPoint; calculate the difference
    // and multiply by the bounds of the view
    position.x              = (0.5 * bounds.size.width) + (anchorPoint.x - 0.5) *    bounds.size.width;
    position.y              = (0.5 * bounds.size.height) + (anchorPoint.y - 0.5) * bounds.size.height;
    rootView.layer.position = position;
}

- (void)onFinishedUpdateLocation:(CLLocation *)newLocation {
    if (stayOnCurrentLocation) {
        [self scrollToCurrentPosition];
    }
    if (rotationEnabled) {
        CGPoint anchorPoint        = [currentConfig layerPointForLocation:newLocation];
        anchorPoint.x              = anchorPoint.x / rootView.bounds.size.width;
        anchorPoint.y              = anchorPoint.y / rootView.bounds.size.height;
        rootView.layer.anchorPoint = anchorPoint;
        [self correctLayerPosition];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T07:17:12.247

您可以实现`scrollViewDidZoom:`委托方法并将两个转换连接起来以达到预期的效果：

```
- (void) scrollViewDidZoom:(UIScrollView *) scrollView
{
    CATransform3D scale = contentView.layer.transform;
    CATransform3D rotation = CATransform3DMakeRotation(M_PI_4, 0, 0, 1);

    contentView.layer.transform = CATransform3DConcat(rotation, scale);
} 
```

**编辑**

我有更简单的想法！如何在附加了旋转变换的情况下向层次结构添加另一个视图？这是建议的层次结构：

*   滚动视图
    *   ContentView - 返回的那个`viewForZoomingInScrollView:`
        *   RotationView - 带有旋转变换的视图
            *   MapView - 包含所有图块的视图

我认为性能在这里不应该是任何问题，值得尝试。

# javascript - jQuery UI 菜单栏，绝对左侧位置子菜单

> ID：12006172
> 
> 赞同：0
> 
> 时间：2012-08-17T12:49:07.460
> 
> 标签：javascript, jquery, html, css, jquery-ui

我使用菜单栏小部件创建了一个 jQuery UI 导航菜单。它按我的预期工作，只是我希望它的行为略有不同。正如您在此处看到的[http://jsfiddle.net/hcharge/DebVr/](http://jsfiddle.net/hcharge/DebVr/)子菜单展开并相对于单击的链接定位。

我希望它展开并固定在导航栏的左侧，无论单击哪个链接，子菜单都将始终保持相同的宽度。比如这张图...

![在此处输入图像描述](../Images/3f85bf7bfa73bf9b9454bf012befe640.png)

我尝试设置相对于容器的位置并绝对定位子菜单，但是我认为 jQuery UI 定位覆盖了这一点。任何建议都会很棒，干杯。

编辑：这需要用 JS 来完成，因为它必须是点击而不是触发下拉菜单的悬停动作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:32:32.903

为什么不只使用 CSS 来完成这一切？

见[http://jsfiddle.net/DebVr/8/](http://jsfiddle.net/DebVr/8/)

注意：为了看到白色边框，背景是蓝色的。

**编辑：**

如果你想要一些功能，你可以在以后添加它，但我认为基础应该是 CSS。

在此处查看具有某些功能的代码：http: [//jsfiddle.net/DebVr/11/](http://jsfiddle.net/DebVr/11/)

```
var links=$('#bar1>li>a').each(function(index,obj) {
  obj.tabindex=index+1;
});
$('#bar1>li>a').focus(
    function(){$(this).siblings('ul').show();}
);
$('#bar1>li>a').blur(
    function(){$('#bar1>li>ul').hide();}
); 
```

**编辑2：**

如果要在单击时再次隐藏子菜单，请使用以下代码：

```
var links=$('#bar1>li>a').each(function(index,obj) {
  obj.tabIndex=index+1;
});
$('#bar1>li>a').focus(function(){
    $(this).siblings('ul').addClass('show');
});
$('#bar1>li>a').mousedown(function(){
    $(this).siblings('ul').toggleClass('show');
});

$('#bar1>li>a').blur(function(){
   $(this).siblings('ul').removeClass('show');
}); 
```

和 CSS：

```
#bar1>li>ul.show{
    display:block;
} 
```

在这里看到它：http: [//jsfiddle.net/DebVr/16/](http://jsfiddle.net/DebVr/14/)

**编辑 3**：

在上面的代码中，我替换`obj.tabindex`为`obj.tabIndex`，并更新了 jsfiddle。

问题是，如果您单击子菜单，锚点会失去焦点，然后子菜单就会消失。在 Chrome 上，可以很容易地修复将`focus`事件设置为`#bar1>li`而不是`#bar1>li>a`，但随后该事件在 firefox 上不起作用......我正在研究解决方案，但同时您可以使用[http://jsfiddle.net/DebVr/ 16/](http://jsfiddle.net/DebVr/14/)。

**编辑4：**

最后，固定代码：http: [//jsfiddle.net/DebVr/18/](http://jsfiddle.net/DebVr/18/)

它适用于 Chrome、Firefox 和 IE。

# scrollbar - Visio 2013：限制形状中显示的线条

> ID：12006177
> 
> 赞同：-1
> 
> 时间：2012-08-17T12:49:30.610
> 
> 标签：scrollbar, overflow, visio, office-2013

# Visio 2013：为隐藏溢出创建滚动条

.

我有超过 112 项的清单。其中，对于一个简单的图表来说是广泛的。我希望只有 4 行可见，并有一个滚动条来查看overflow.ties。

例如，我有一个托管在每台服务器上的站点列表。显示所有服务器的所有站点会降低图表的可读性。我需要将最大显示行数设置为 4。其余的需要隐藏。您应该能够使用滚动条查看这些内容。

这是 HTML 中的常见做法。希望也能找到使用 Visio 2013 的方法。

例如：

```
domain1.com
domain2.com
domain3.com
domain4.com
--Overflow--
domain5.com
domain6.com
andmanymore.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:42:46.370

提供已过滤的数据，而不是在 visio 中进行过滤。即：已经用字符串填充列表字段，其中域由 CHR(10) 分隔。此操作在 excel/access/VBA 中更容易实现。我会发送草稿，但我看不到在答案中添加附件的可能性。HTH，否则请不要犹豫询问详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:24:57.597

我猜您在用户定义的字段中有域列表。现在使用以下公式添加另一个字段 mid(prop.yourlist,controls.start,prop.numberOfCharactersToDisplay) 其中： controls.start 将是添加用于滚动列表的控件，prop.numberof.. 要显示的字符数。

现在插入要在您的形状中显示的新字段。完毕。

这些公式当然会在字符串中的任何位置截断您的域。如果您希望它始终显示完整的行，您应该查找换行符 (find(char(10), yourList)

高温高压

# php - 如何使用 PHP 在字符串中查找内容

> ID：12006181
> 
> 赞同：0
> 
> 时间：2012-08-17T12:49:42.077
> 
> 标签：php

我对 PHP 有点陌生，因为我之前在 ASP 经典中编写过代码，但它真的不一样

我有 3 个包含以下文本的字符串：

```
$str1 = "is simply dummy text of the printing $$ 6/4r $$ and typesetting industry"
$str2 = "is simply dummy text of the printing $$ 11/11tr $$ and typesetting industry"
$str3 = "is simply dummy text of the printing $$ 15/6 $$ and typesetting industry" 
```

我怎样才能在单独的变量中获取和`6/4r`退出？`11/11tr``15/6`

1.  我认为它类似于搜索`$$`
2.  请问，下一个字符是空格吗？
3.  请问，下一个字符是数字吗？
4.  问，下一个字符是 '/'

当所有这些都是真的时，我想抓住`6/4r`它并将它放在一个单独的变量中。

我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:53:03.683

怎么样`explode`：

```
var_dump(explode('$$', $str1));

array(3) {
 [0] => string(37) "is simply dummy text of the printing "
 [1] => string(6) " 6/4r " 
 [2]=>  string(25) " and typesetting industry"
} 
```

所以`trim($array[1])`总是会返回你想要的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:53:39.410

正则表达式：

```
$str = 'is simply dummy text of the printing $$ 6/4r $$ and typesetting industr';

preg_match('|\$\$(.*)\$\$|',$str,$match);

echo $match[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:58:42.390

用于`preg_match`查找美元符号之间的所有内容（不是空格）

```
function getValue($str){
    $pattern = '/\$\$\s*([^\$\s]+)\s*\$\$/i';
    if(preg_match($pattern, $str, $match)){
        return $match[1];
    }
    return false;
}

echo getValue($str1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:54:09.983

我不知道这是否是最好的方法，但我会使用爆炸功能

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
$pieces = explode(' \$\$ ', $str1);
//Should contain 6/4r
echo $pieces[1]; 
```

# php - 如何以编程方式停止使用特定端口的进程

> ID：12006184
> 
> 赞同：0
> 
> 时间：2012-08-17T12:50:08.220
> 
> 标签：php, linux, tcp, process, port

我有一个进程在我的 Linux 机器的端口上运行。我想要做的是不断检查端口是否正常。该端口是从另一个 Linux 机器接收数据的 TCP 端口，但是当访问数据时，它会崩溃并卡在：

```
"Address already in use" message 
```

我想检查它是否崩溃并停止使用该端口的进程，以便我可以释放端口并重新启动进程。我需要使用 php 或 bash 脚本来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:00:05.757

好吧，经过一番谷歌搜索后，我来到了[monit](http://mmonit.com/monit/)。该工具可以安装在服务器上，并且可以监视您选择的程序，如果它们没有运行则启动它们，或者如果它们没有相应地响应则重新启动它们......

从网站：

> 如果 sendmail 没有运行，Monit 可以自动重新启动 sendmail 或者如果 apache 正在使用过多的资源（例如，如果 DoS 攻击正在进行） Monit 可以停止或重新启动 apache 并向您发送警报消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T13:19:28.433

> sudo fuser -k 80/tcp
> 
> sudo fuser -k 443/tcp

专门来回答这个问题，而这种方法只是针对杂乱的服务器组织的一个补丁。

这就是说，因为我猜它应该在 4 年后修复。

# php - facebook分享使用php

> ID：12006191
> 
> 赞同：-1
> 
> 时间：2012-08-17T12:50:38.813
> 
> 标签：php, javascript, html, facebook, facebook-graph-api

我在该页面上有一个页面有多个图像。在每个图像上都有自己的共享和喜欢按钮。当我单击共享按钮时，我想共享该特定图像，但那没有发生，请帮助我。这是我的代码..

```
<script type="text/javascript">
        var str;
        function fbs_click(u,val)
        {
            var i;

            var imgobj=document.getElementById(val).getElementsByTagName('img');
            for(i=0;i<imgobj.length;i++){
                str=imgobj[i].src;
                //document.write("<br>");
            }
            alert(str);
            //This is to show fb popup for sharing passed pageurl
            window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u),'sharer','toolbar=0,status=0,width=626,height=436');
            return false;
        }
    </script>

<!--This is for setting img for fb like -->
<script type="text/javascript">document.write('<link rel="image_src" type="image/jpeg"  href="'+str+'">');</script>

$url="http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];

<div class='sharebutton'>
                            <a href='#' onclick='return fbs_click(\"$url\",\"$src_value\");' class='fb_share_link'>Share on Facebook</a>
                        </div> 
```

我已经粘贴了代码很短只是了解你我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:41:35.467

问题是，您只发送页面 url。Facebook 根据 url 索引其点赞数。

由于 Facebook 不知道用户打算分享页面上的哪个图像，它会抓取页面的默认元标记，这就是显示在用户时间轴上的内容。由于每张照片的 url 都是相同的，因此共享任何一张照片都会导致所有照片的计数器都增加。

完成这项工作的一种方法是为您网站上的每个图像创建一个单独的页面，并将其传递给您的 onclick 函数。该页面具有 Facebook 解析器可以使用的图像的特定元数据。当用户点击该链接时，在该页面上有一个脚本将他们重定向回您的主页（最好是右侧照片上的锚点）。对于没有启用 javascript 的人，您需要有一些方法可以优雅地失败。

# c - opengl无法绘制网格

> ID：12006198
> 
> 赞同：1
> 
> 时间：2012-08-17T12:50:51.933
> 
> 标签：c, opengl, mesh

已解决：我不确定如何...感谢您的所有帮助。

我试过`glDisable(GL_CULL_FACE);`了，但网格仍然不可见。

基本上，我正在尝试使用显示列表在 OpenGL 中绘制网格（由顶点、法线和纹理坐标制成）。网格为 .obj 格式（从 3ds max 2013 导出）

问题是网格不可见。

绘制我正在使用的显示列表`glCallLists (list, 1);`

我已经验证我可以通过在屏幕中心绘制一个点来将东西绘制到屏幕上，并且效果很好。

相机是否有可能位于网格内？如果是这样，我可以启用 OpenGL 状态以允许我查看一组顶点的内部吗？

我知道我拥有的数据都是有效的，通过在将每个顶点、法线和纹理坐标打印到文件中，然后再将其添加到显示列表中进行验证，它看起来是有效的。

我没有`glTranslatef`或没有类似的东西，我的投影矩阵是这样设置的：

```
glMatrixMode (GL_PROJECTION);
glLoadIdentity ();
gluPerspective (45.0, (float)1024/(float)768, -9999, 9999);
glMatrixMode (GL_MODELVIEW);
glLoadIdentity (); 
```

如果你想看看 .obj 文件，这里是： http: [//pastebin.com/PpG3vG5e](http://pastebin.com/PpG3vG5e)

这就是我创建显示列表的方式：

```
list = glGenLists (1);
glNewList (list, GL_COMPILE);
glBegin (GL_TRIANGLES);

for (i = 0; i < data.face_count; i++)
{
    // first vert
    normal[0][0] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[0]]->e[0];
    normal[0][1] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[0]]->e[1];
    normal[0][2] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[0]]->e[2];
    tex[0][0] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[0]]->e[0];
    tex[0][1] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[0]]->e[1];
    tex[0][2] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[0]]->e[2];
    vert[0][0] = (float)data.vertex_list[data.face_list[i]->vertex_index[0]]->e[0];
    vert[0][1] = (float)data.vertex_list[data.face_list[i]->vertex_index[0]]->e[1];
    vert[0][2] = (float)data.vertex_list[data.face_list[i]->vertex_index[0]]->e[2];

    // second vert
    normal[1][0] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[1]]->e[0];
    normal[1][1] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[1]]->e[1];
    normal[1][2] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[1]]->e[2];
    tex[1][0] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[1]]->e[0];
    tex[1][1] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[1]]->e[1];
    tex[1][2] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[1]]->e[2];
    vert[1][0] = (float)data.vertex_list[data.face_list[i]->vertex_index[1]]->e[0];
    vert[1][1] = (float)data.vertex_list[data.face_list[i]->vertex_index[1]]->e[1];
    vert[1][2] = (float)data.vertex_list[data.face_list[i]->vertex_index[1]]->e[2];

    // third vert
    normal[2][0] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[2]]->e[0];
    normal[2][1] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[2]]->e[1];
    normal[2][2] = (float)data.vertex_normal_list[data.face_list[i]->normal_index[2]]->e[2];
    tex[2][0] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[2]]->e[0];
    tex[2][1] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[2]]->e[1];
    tex[2][2] = (float)data.vertex_texture_list[data.face_list[i]->texture_index[2]]->e[2];
    vert[2][0] = (float)data.vertex_list[data.face_list[i]->vertex_index[2]]->e[0];
    vert[2][1] = (float)data.vertex_list[data.face_list[i]->vertex_index[2]]->e[1];
    vert[2][2] = (float)data.vertex_list[data.face_list[i]->vertex_index[2]]->e[2];

    for (j = 0; j < 3; j++)
    {
        glNormal3f (normal[j][0], normal[j][1], normal[j][2]);
        glTexCoord3f (tex[j][0], tex[j][1], tex[j][2]);
        glVertex3f (vert[j][0], vert[j][1], vert[j][2]);
    }
}

glEnd ();
glEndList (); 
```

编辑：我试过这样的事情：

```
glTranslatef (0, 0, 5);
glCallList (mesh);
glTranslatef (0, 0, 0); 
```

但它们也不起作用:(

编辑：

@datenwolf 这是我用来绘制它的代码：

```
Draw_Begin ();
Mdl_Draw (list, 0.0f, 0.0f, 0.0f);
Draw_End (); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:13:27.330

这个

```
gluPerspective (45.0, (float)1024/(float)768, -9999, 9999); 
```

是错的。在透视投影中，近平面距离和远平面距离必须具有相同的符号，即均为正或均为负。此外，近平面的绝对值必须小于远平面的绝对值。*并且近平面距离必须是非零*的。在数学符号中：

*sgn(近) = sgn(远) ^ 0 < |近| < |远|*

通常近和远都被选为正数。此外，根据经验，应选择尽可能远的近剪裁平面。远平面可以放置在无穷远处（利用同质矩阵的一些属性），但通常放置得尽可能靠近以最大化深度缓冲区分辨率。

# ubuntu - 如何在ubuntu中打开dll和exe文件

> ID：12006203
> 
> 赞同：1
> 
> 时间：2012-08-17T12:50:58.847
> 
> 标签：ubuntu, dll, exe, ubuntu-12.04

我有几个 dll 和 exe 文件。我的笔记本电脑安装了 ubuntu 12.04 版。谁能给我建议我现在应该做什么以便文件在 Ubuntu 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:58:55.340

您可以从 Ubuntu 存储库安装 Wine 并尝试使用它执行文件。AFAIK 许多 Windows 程序都可以通过开箱即用的 Wine 安装来执行，对于某些程序，您必须采取额外的步骤（例如添加一些库），而有些程序则不能使用它运行。

另一种选择是设置一个安装了 Windows 的虚拟机，以执行您需要的程序。

# c# - 如何在 Socket 类中使用动态端口？

> ID：12006209
> 
> 赞同：1
> 
> 时间：2012-08-17T12:51:15.993
> 
> 标签：c#, .net, sockets, networking, ports

我只是在学习网络，我相信有一种叫做“动态端口”的东西。我无法理解这一点，我将如何实现使用动态端口的服务器？设置套接字时，我必须绑定到特定端口，就像：

```
using (Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
{
    IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 1234);
    socket.Bind(endPoint);
    socket.Listen(10);
    using (Socket handler = socket.Accept())
    {
        /* ... */
    }
} 
```

我需要明确设置我想要监听的端口（1234）。据我了解动态端口，客户端向随机端口发送请求，服务器以某种方式确定哪个应用程序将获取这些请求并做出响应。

客户怎么说

> 我希望我的请求得到“MyCustomService01”应用程序的响应？

**有人可以澄清并提供一些示例代码吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:00:31.527

`socket`是你的监听器，发送到临时端口；如果您仔细查看`handler`，尤其是`.LocalEndPoint`and `.RemoteEndPoint`，您应该会发现它已经配置为动态端口。基本上，您不必在这里做任何特别的事情 - 只需通过`handler`.

# php - 博客文章和公共层

> ID：12006211
> 
> 赞同：0
> 
> 时间：2012-08-17T12:51:28.227
> 
> 标签：php, joomla, joomla1.5, joomla2.5, joomla-extensions

我正在使用Joomla设计一个网站，很简单，我的网站上有一个页面是存储所有新闻标题（每个都是href）并且每个href都指向一篇完整的文章，我想在所有的地方发布一个图片文章，我可以将我的图像放在 joomla 文件夹中的哪里，以便在每个文章标题之后，图像就会显示出来？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:03:38.363

要在每篇文章中插入图像，您必须按照以下步骤操作：

1.  管理->进入文章管理器->点击文章（查看文章详情）。2.现在您可以看到您放置文章内容的版本。现在在同一个编辑器上有一个图像选项。选择它并从您放置图像的文件夹中选择图像。
2.  现在申请或保存文章。

因此，您将为 joomla 中的每篇文章添加图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:59:03.100

您可以将图像放入您想要的任何文件夹中。您所要做的就是转到后端的每篇文章，并通过输入路径手动插入图像。更简单的做法是在“图像”文件夹中创建一个文件夹，这样插入路径就不会太长。

作为 fr 插入，我不确定您是否希望自动插入所有图像，但我很确定这是不可能的。

# html - 在 Sencha 中使用路由的后退按钮支持

> ID：12006219
> 
> 赞同：1
> 
> 时间：2012-08-17T12:51:48.733
> 
> 标签：html, cordova, sencha-touch, extjs, sencha-touch-2

我是 Sencha 的新手。谁能解释一下如何使用 Sencha touch2 Routing 在 android 中支持后退按钮。我已经浏览了 Sencha 文档，他们在那里解释了诸如“#products/123”之类的场景。但在我的情况下，只有视图会改变而不是总是像“../index.html”的url。

让我们考虑一下我有一个登录页面。在登录按钮点击它导航到主页。现在在设备后退按钮上点击它应该导航回登录。那么我应该在路由中输入什么格式：{}。

请任何人用简单的代码解释我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:01:16.433

在您的按钮操作中，您应该像这样重定向：

```
 control: {
        'button[action=login]' : {
            tap: function() {
                this.redirectTo('login');
            }
        } 
```

然后在控制器中添加路由：

```
config: {
    refs: {
        main: 'main'
    },

    routes: {
        'login': 'showLogin'
    }
} 
```

最后在 showDetail 函数中更改视图，url 应该显示类似 index.html#detail 的内容：

```
showLogin: function() {
    this.getMain().push({
        xtype: 'loginView'
    });
} 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:08:18.933

在做了很多谷歌搜索之后，终于用适当的例子得到了答案。所以这是供参考[http://thanksmister.com/?p_=336](http://thanksmister.com/?p_=336)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T05:32:17.117

您还可以通过定义后退按钮及其引用来更好地控制自己，而不是使用默认值。

```
Ext.define('Mov.view.BackButton', {
    extend: 'Ext.Button',
    alias: 'widget.backbutton',

    config: {
        hidden: true,
        id: 'back',
        ui: 'back',
        text: 'Back',
        backStack: {

        }
    },

    addToBackStack: function(dispatchOptions) {
        var found = false;
        this.backStack.forEach(function(el) {
            found = found || (Ext.encode(el) == Ext.encode(dispatchOptions));
        });
        if (!found) {
            this.backStack.push(dispatchOptions);
        }
        this.show();
    },

    clearBackStack: function() {
        this.backStack = [];
        this.hide();
    },

    handler: function(button, event) {
        var dispatchOptions = this.backStack.pop();

        Ext.dispatch(dispatchOptions);

        if(this.backStack.length === 0) {
            this.hide();
        }
    }
}); 
```

然后在应用程序的导航栏上应用此小部件。（初始视图的 onInitialize 效果很好）。

```
nav = this.getNavigationBar(),
nav.setBackButton(Ext.widget('backbutton')); 
```

@jurodr 有一个很好的路由、引用和控制示例，它与这个自定义组件配合得很好。

# ios - iTunes 中的“无效二进制文件”

> ID：12006221
> 
> 赞同：1
> 
> 时间：2012-08-17T12:52:01.330
> 
> 标签：ios, itunes

我刚刚尝试将我的应用程序提交到 iTunes，经过几个步骤，我以为它终于通过 Application Loader 上传了，但是当我看到状态显示“无效二进制”时，我意识到它还没有上传。我尽最大努力找出可能的原因，但没有成功。请如果有人可以帮助我。不，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:08:41.583

这通常发生在您没有正确对应用程序进行代码签名时。您可以在您的 iTunes Connect 帐户上找到有关此的所有信息。苹果一步一步地解释它。

如果您这样做并且仍然获得 Invalid Binary 状态，那么您可能需要重新下载您的证书并通过 XCode 更新您的配置文件。此外，重新检查您的方案是否配置正确。

此链接也可能对您有所帮助：

[https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/AboutYourFirstAppStoreSubmission/AboutYourFirstAppStoreSubmission.html#//apple_ref/doc/uid/TP40011375-CH1-SW1](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/AboutYourFirstAppStoreSubmission/AboutYourFirstAppStoreSubmission.html#//apple_ref/doc/uid/TP40011375-CH1-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T21:17:31.223

当您在 iTunes 连接上看到无效的二进制文件时，请检查您的电子邮件，有时苹果会向您发送电子邮件，其中包含有关问题的详细信息。

# c++ - 如何关闭套接字

> ID：12006223
> 
> 赞同：9
> 
> 时间：2012-08-17T12:52:04.963
> 
> 标签：c++, sockets

在 Ubuntu 上运行 c++。我以这种方式打开套接字：

```
socket(AF_PACKET, SOCK_RAW, IPPROTO_RAW)) 
```

在使用结束时我需要做什么？只要程序运行，就会使用一些套接字，我需要一段时间检查它们吗？看看socket是否还存在？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T12:55:04.417

套接字一直存在，直到您调用`close`它的文件描述符。由于您有一个原始 IP 套接字，因此没有“活着”的概念。用完就关闭它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T12:59:06.937

正如其文档/手册页所说，socket() 返回一个打开的文件描述符，如果失败则返回 -1。这意味着您必须像关闭任何其他文件描述符一样关闭它：

```
close(sockfd); 
```

# android - 应用程序中的安全信用卡交易

> ID：12006229
> 
> 赞同：0
> 
> 时间：2012-08-17T12:52:23.517
> 
> 标签：android, security, credit-card

我希望能够（通过信用卡）向使用我的应用程序的人销售产品。放入一些 EditText 并让他们给我他们的详细信息很容易，但问题当然是安全性。在应用程序中进行安全信用卡交易的好方法是什么？

**我最关心**的问题- 其他人制作了一个看起来相同的假应用，具有相同的图标和应用名称，并让潜在用户下载他们的假应用并窃取他们的信用卡信息。（人们甚至可以拥有相同的开发者帐户名称吗？）

**到目前为止我所知道**的 - Google Play 提供的应用程序的包名称是唯一的，因此用户可以识别包名称是否不应该是。但是，对于典型用户来说，这不是一个好的解决方案。

我不打算存储信用卡详细信息或任何东西。我只想能够安全地进行一次性卡交易。任何建议都将受到超级欢迎并获得很多支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:06:50.443

您需要做的就是能够使用 Authorize.Net 或任何支付网关 API 进行支付。

Authorize.Net - [Android SDK](http://developer.authorize.net/downloads/)

[Boku 移动计费](http://www.boku.com/merchants/#mobile-billing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:56:06.530

既然您声明您将使用您的应用程序向用户销售产品，我假设您会将用户详细信息存储在数据库中的某个位置是吗？此外，您将使用用户名和密码进行某种身份验证，因此这意味着即使其他人制作与您完全相同的应用程序，他们也不会拥有用户的用户名和密码（假设您散列您的用户名和他们的密码）或他/她在注册您的应用程序时提供的用户的真实姓名。即使黑客很聪明并且只使用一个虚拟登录页面，即无论输入的用户名和密码如何，您都已登录我相信如果用户没有看到一条消息说“Hi X（真实姓名用户）”，当他们登录您的应用程序时（前提是您具有显示用户的某些功能）s 登录应用程序时的真实姓名，这很容易实现）。说了这么多，我还没有听说过有人复制整个应用程序（如果你制作一个复杂的应用程序，这绝非易事）只是为了窃取用户的信息。

关于安全地接受用户的信用卡信息并对其收费的问题，接受用户详细信息的最受信任、行业接受和安全的方式之一是使用[Stripe.com](https://stripe.com/)。更重要的是，他们有一个很好的 RESTful API，您可以通过它拨打电话并以最安全的方式从用户的信用卡中收取必要的金额。这样做的好处是您不必将信用卡信息存储在任何地方，只需使用一次即可调用 Stripe API（顺便说一句，它在 Java 中可用）。

# vim - vim 是否支持非 ASCII 命令？

> ID：12006232
> 
> 赞同：3
> 
> 时间：2012-08-17T12:52:27.747
> 
> 标签：vim, localization

我经常用俄语写文字。我`set langmap`用于将俄语字符翻译成英语，因此命令`i`也`d`适用于俄语布局。

但它不适用于从`:`like开始的命令——vim`:wq`转换`Ж`为`:`langmap 中描述的那样，但其他字符不受影响，我想`:цй`改用`:wq`.

我试图用`:command цй wq`做别名，但取`E182: Invalid comand name`.

你对如何翻译有想法`Жцй`吗`:wq`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:59:49.390

您可以使用`cmap`或`cabbrev`。例如

```
cmap цй wq

cabbrev цй wq 
```

`cabbrev`可能是您想要的，因为您不必在`Space`之后输入。

# javascript - Javascript的异步加载

> ID：12006237
> 
> 赞同：1
> 
> 时间：2012-08-17T12:52:36.797
> 
> 标签：javascript, asynchronous

我正在尝试在我的页面上异步加载所有 Facebook/Twitter/Google 用具，以阻止它们减慢页面加载速度。我以为我有正确的代码来做这件事，但它似乎不起作用。

所有代码位都保存在一个 php 文件中，如下所示：

```
 <!-- Facebook -->
<div id="fb-root"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=xxxxxxxxxxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Google +1 -->
<script type="text/javascript">
  window.___gcfg = {lang: 'en-GB'};
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<!-- Twitter -->
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script>

<!-- Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxxxxx-x']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

当我在webpagetest.org 上测试一个页面时，页面加载时间约为5 秒，我可以看到在页面完成之前对facebook 等的请求有所减少。当我删除脚本时，页面加载下降到更可观的 1.9 秒。

那是我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:00:51.733

您也可以尝试使用 javascript **defer**属性：

```
<script defer="defer"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:02:08.840

对于现代浏览器，您还可以使用

`<script type="text/javascript" async src="..."></script>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:58:06.053

你可以做一件事：

```
<html>
    <head>
    </head>
    <body>
      ....
      ....
      <script src='http://....'/>
      <script src=''/>
    </body>
</html> 
```

它将在加载页面的重要内容后立即加载脚本。您可以通过这种方式优先加载要加载的内容和脚本。

# symfony - Symfony 2 中的可选嵌入形式

> ID：12006240
> 
> 赞同：1
> 
> 时间：2012-08-17T12:52:42.280
> 
> 标签：symfony, symfony-forms

我的系统中有两个实体：`Person`和`Phone`以下代码。

```
class Person
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=100)
     */
    private $name;

    /**
     * @ORM\Column(type="string", length=100)
     */
    private $lastName;

    /**
     * @ORM\OneToOne(targetEntity="Phone", cascade={"persist"})
     */
    private $phone;
};

class Phone
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="PhoneType")
     */
    private $type;

    /**
     * @ORM\Column(type="integer")
     */
    private $countryCode;

    /**
     * @ORM\Column(type="integer")
     */
    private $regionCode;

    /**
     * @ORM\Column(type="integer")
     */
    private $number;
}; 
```

我还有一个表单来创建和更新一个人（使用电话），所以我有`PersonType`一个嵌入表单，代表电话（`PhoneType`）。

我的问题是一个人可以选择拥有电话，但如果该人有电话，则所有电话字段都是必需的。因此，如果用户在所有电话字段上都没有写任何内容，则表示一个没有电话的人，这种情况是有效的。但如果用户填写了至少一个表单字段，则所有其他字段都是必需的。

如果未填写所有电话字段，我尝试通过将电话设置为 null 来采取一种方法，这是`setPhone`在`Person`实体中实现的。但是有一个空电话，Symfony 告诉我所有电话字段都是必需的，但没有填写。我相信 Symfony 不会验证手机，因为我认为 Symfony 会直接在个人实体上应用验证。有一个空电话，为什么告诉我所有电话字段都没有填写？

有没有办法做我想做的事（最好不修改我所有的控制器和表单类型，即在实体或验证组件级别）？

**编辑：**抱歉，有一点没有提到，如果用户填写电话字段，所有电话字段都需要使用不同的验证器单独验证（检查字段是否是格式正确的数字，检查正确的长度等）。但是，如果用户将所有电话字段留空，则应忽略每个字段的验证。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:59:06.810

我会尝试这种方法：

在您的电话实体中创建其他方法，该方法验证所有字段是否为空或所有字段不为空（这两种情况都是正确的） - 然后返回 true。如果某些字段为空，而某些字段不返回 false。为您的新方法添加一个断言注释 - 这将是您的新约束。

```
/**
 * @Assert\True(message = "Fill all fields or leave all them blank")
 */ 
```

这应该有效。

更多信息请看这里： [http ://symfony.com/doc/master/book/validation.html#getters](http://symfony.com/doc/master/book/validation.html#getters)

**编辑：**

试试这个：

将您的自定义验证方法（检查是否填充任何电话字段）定义为回调（在类的顶部）：

```
 * @Assert\Callback(methods={"checkPhoneFields"})
 */
 class Phone { 
```

接下来，您标记必须使用验证组验证的字段，例如。

```
/**
 * @ORM\Column(type="string", length=16, groups={"phone_validation"})
 */
private $number; 
```

最后一件事，在您的自定义约束方法中，如果任何字段不为空，您需要打开“phone_validation”组：

```
public function checkPhoneFields(ExecutionContext $context) {
    if (/* fields are not empty */) {
        $context->getGraphWalker()->walkReference($this, 'phone_validation', $context->getPropertyPath(), true);
    } 
```

这应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T13:15:51.180

对于那些路过的人，使用较新版本的 Symfony，您可以：

```
/**
 *
 * @Assert\Callback()
 */
public function validatePhone(ExecutionContextInterface $context)
{
    if (/* Fields are not empty */)
    {
        $context->validate($this->getPhone(), 'phone', array("phone_validation"));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:14:48.253

做这个：

首先在您的电话实体上，将字段声明为“可为空”，如下所示：

```
/**
 * @ORM\Column(type="integer", nullable=true)
 */
private $countryCode; 
```

这将允许这些字段具有空值。

然后您需要声明一个验证器，该验证器将检查是否没有字段或所有字段都已填写

```
class Phone {

...
/**
 * @Assert\True(message = "Phone must be empty of fill all fields")
 */
public function isPhoneOK()
{
    // check if no field is null or all of them are
    // return false if these conditions are not met
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:21:01.733

也可以使用一个非常简单的数据 Transformer 来解决这个问题。

1.  创建您的电话数据转换器：

    ```
    class PhoneTransformer implements DataTransformerInterface
    {
        public function transform($phone)
        {
            if (is_null($phone))
                return new Phone();

            return $phone;
        }

        public function reverseTransform($phone)
        {
            if (is_null($phone))
                return null;

            if (!$phone->getType() && !$phone->getCountryCode() /* ... Test if phone is not valid here */)
                return null;

            return $phone;
    } 
    ```

2.  然后只需在您的 PhoneType 表单中添加此转换器：

    ```
    class PhoneType extends AbstractType
    {
        public function buildForm(FormBuilder $builder, array $options)
        {
            $builder
                /* Add fields here :
                ->add( ... )
                */
                ->prependNormTransformer(new PhoneTransformer())
            ;
        }
    } 
    ```

有关如何实现数据转换器的更多详细信息，请参阅[http://symfony.com/doc/2.0/cookbook/form/data_transformers.html](http://symfony.com/doc/2.0/cookbook/form/data_transformers.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T17:14:00.690

frankie567 的回答对我很有用。对于 symfony >= 3.0：

```
/**
 *
 * @Assert\Callback()
 */
public function validatePhone(ExecutionContextInterface $context)
{
    if (/* Fields are not empty */)
    {
        $validator = $context->getValidator();

        $validator->inContext($context)
            ->atPath('phone')
            // you can pass custom validation instead of null, like new Assert\Valid()
            ->validate($this->getPhone(), null, array('phone_validation'));   
    }
} 
```

# html - 字体大于它周围的“元素”

> ID：12006241
> 
> 赞同：2
> 
> 时间：2012-08-17T12:52:44.900
> 
> 标签：html, css, text, containers, font-size

我经历过，如果我将特定的 p 标签字体大小设置为 55px，则包含字体的实际元素小于字体本身。

因此字体与上面的元素重叠。当然我可以在那里设置一些填充，但是为什么 - 我称之为“虚构”对象，因为它只是由我的浏览器制作的 - 没有得到与内容相同的大小 - 在这种情况下是字体？顺便说一句，这个“想象中的”容器始终具有相同的高度。p-text 的大小是 12px 还是 55px 都没有关系。在我的情况下，这个高度总是 15px ......

感谢您提供有关此事的提示。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:57:29.520

尝试减少行高：

```
.imaginary {
    font-size: 18px;
    line-height: 18px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:00:00.190

这间接/直接影响您的答案：

```
 <style>
    html, body, div, span, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, img, ol, ul,
    li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
      margin:0;
      padding:0;
      border:0;
      font-size:100%;
      font:inherit;
      vertical-align:baseline;
    }
  </style> 
```

因此，请确保在使用 css 时至少具有上述代码行。

# ios - 有没有办法确定iOS中的实际时间和日期（不是设备的时间）

> ID：12006245
> 
> 赞同：13
> 
> 时间：2012-08-17T12:52:58.143
> 
> 标签：ios, gps, cellular-network

在 iOS 中，我需要知道实际时间 (UTC)，而不是设备的时间。换句话说，用户应该不可能篡改时间或日期。

任何需要网络连接的东西都不好（因此访问时间服务器不是一种选择）。

AFAIK，有两种理论方法可以实现这一目标：

*   使用 GPS 卫星信号的时间戳
*   从运营商处获取当前时间

问题是 iOS 中的任何 API 都不会公开此信息。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:48:00.960

您可能找到的大多数解决方案（包括从 CoreLocation 获取 GPS 数据以访问时间信息）都是有缺陷的，因为它们取决于实际设备来访问时间。您将需要连接到时间服务器（我建议检查 NTP 服务器）。我正在查看核心电话框架，但找不到任何可以提供网络时间的东西。您可能想要填写错误报告并请求苹果扩展其中一个类以包含时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:56:06.740

您可以查看 NSTimeZone 中的 secondsFromGMTForDate: 和 secondsFromGMT。如果在设备时间更改时 GMT 偏移量增加/减少，这些提供了一种将时间戳更正为 GMT（并可能转换为 UTC）的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T14:52:21.580

您无法获取原始 GPS 数据，并且 CLLocation 的时间戳属性在`locationManager:didUpdateLocations`: 中设置为系统时钟

# c# - 存储和显示按钮网格/多个布局

> ID：12006252
> 
> 赞同：1
> 
> 时间：2012-08-17T12:53:34.377
> 
> 标签：c#, wpf

我正在使用带有 MVVM 的 WPF 构建一个销售点应用程序。

其中一个功能是屏幕上会有一个网格/面板，例如 10 x 10 个按钮，例如每个库存项目 1 个按钮。

我需要做的是允许用户创建新布局或编辑现有布局，他们可以在其中添加新按钮或删除按钮等。

所以理论上用户可以有许多不同的布局，他们可以从中选择在屏幕上显示。

每个按钮都将链接到数据库中的库存产品，并具有颜色、文本、图像等属性。

所以我在想，如果我将用户控件设置为 10 x 10 按钮或使用统一网格，我可以绑定到按钮集合。我还考虑将每个布局的每个布局按钮存储为 XML，并阅读它以创建某种集合并将其绑定到网格。

例如，用户可以在 10 种不同的屏幕/网格布局之间进行选择，每个布局都有自己的一组按钮，这些按钮可能位于不同的位置，或者具有不同的文本等。

我的问题是，这是将按钮和布局存储为 XML 的最佳方法吗？我怎么能直接将网格/统一网格绑定到按钮集合？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:04:08.800

总体方法对我来说看起来不错。至于将按钮集合绑定到网格，您可以使用`ItemsControl`自定义`ItemsPanel`模板：

```
 <ItemsControl ItemsSource="{Binding Buttons}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="10" Columns="10" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button>
                    <!-- bind button color, content, etc -->
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

# html - 如何在剃刀文件的 IF 语句中使用 @Url.Content？

> ID：12006257
> 
> 赞同：0
> 
> 时间：2012-08-17T12:53:54.447
> 
> 标签：html, image, razor, asp.net-mvc-4

我有一个 mvc 4 项目，我在其中使用如下所示的图像引用：

```
<img alt="Progress Update" class="projectListNotificationIcon" src="@Url.Content("~/Images/progressUpdateIcon.png")"/> 
```

@Url.Content 是它在该项目的本地副本和实时服务器副本上工作所必需的。这很好用，但是我还有另一个地方可以在 2 个不同的图像之间进行选择，并且代码如下所示：

```
var imagePath = (item.IsOverdue) ? "../../Images/lateIcon.png" : "../../Images/onTimeIcon.png"; 
```

如何在上面的 if 语句中使用 @Url.Content 的一些排列？我目前的做法适用于本地项目，但不适用于服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:56:08.513

尝试：

```
<img src="@((item.IsOverdue) ? Url.Content("~/path/img1.jpg") : Url.Content("~/path/img2.jpg"))" alt="whatever" /> 
```

使用波浪号 (~) 符号可能是关键，因为它解析了相对于站点根目录的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T02:56:18.247

```
<img src="@(item.IsOverdue ? "~/path/img1.jpg" : "~/path/img2.jpg")"  /> 
```

`~`使用 asp.net mvc 4 以符号开头的 url会自动转换为站点相对路径。在这里阅读[http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2](http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2)

# c++ - 用 jni 展示 hello world swing

> ID：12006264
> 
> 赞同：2
> 
> 时间：2012-08-17T12:54:40.737
> 
> 标签：c++, swing, qt, java-native-interface

这是我的 main.cpp 代码：

```
#include <jni.h>
#include <QDebug>
int main(int argc, char *argv[]) {
    JavaVM *jvm;
    JNIEnv *env;
    jstring jstr;
    jobjectArray args;
    jclass stringClass;

    JavaVMInitArgs vm_args;
    JavaVMOption options[3];

    options[0].optionString = "-Djava.compiler=NONE";
    options[1].optionString = "-Djava.classpath=.";
    options[2].optionString = "";

    vm_args.version = JNI_VERSION_1_6;
    vm_args.nOptions = 3;
    vm_args.options = options;
    vm_args.ignoreUnrecognized = JNI_TRUE;

    jint res = JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args);
    if (res < 0) {
        qDebug()<<"Can't create Java VM\n";
        exit(1);
    };
    jclass cls = env->FindClass("HelloWorldSwing");
    if (cls == 0) qDebug()<<"Sorry, I can't find the class";
    jmethodID get_main_id =
    env->GetStaticMethodID(cls,"main","([Ljava/lang/String;)V");

    jstr=env->NewStringUTF("hola que tal");
    stringClass=env->FindClass("java/lang/String");
    args=env->NewObjectArray(1,stringClass,jstr);

    env->CallStaticVoidMethod(cls,get_main_id,args);

    jvm->DestroyJavaVM();
    qDebug()<<"Java VM destroy\n";

}//end main. 
```

HelloWorldSwing 是一个显示带有“Hello world”文本的 jframe 的类，但不显示任何内容，如果我在 java 类中编写 system.out.println("hello world")，则可以正常运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:54:06.273

您在 VM 有机会显示 UI 之前将其销毁。

对 System.out.println 的调用是同步的，因此它发生在您销毁 VM 之前。

创建 UI 涉及在单独的线程上创建和调度事件。如果您只是在销毁 VM 之前暂停几秒钟，我想您会看到您的 UI 出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:21:59.317

问题出在java的主类中。JNI 调用 main 方法，当此方法结束时，程序结束。我只是`guithread.join ();`在 main 方法中放了一个并且所有运行都正确。

# python - Python 没有在 Linux 中释放内存

> ID：12006265
> 
> 赞同：2
> 
> 时间：2012-08-17T12:54:42.040
> 
> 标签：python, memory, memory-management

我已经看到两年前发布的一些相关问题，但我想知道最近是否有任何解决方案。

我有一本巨大的字典。我的记忆中大约有 4 个字典（每个 500 MB 大小）。当我继续运行程序时，我需要删除这 4 个字典之一并将内存释放给操作系统。因此，我不可能像之前的一些帖子中提到的那样开始一个新的内存分配子进程。

这里有一些代码来说明这个问题：

```
import cPickle
import resource
import gc
import time

mem = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
print "memory usage:", mem
test_dict = {}
for i in range(100000):
    test_dict[i] = "AAAAAAAA"
    if i%10000 == 0:
        mem = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
        print "memory usage:", mem

mem = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
print "memory usage: (dict created): ", mem
del test_dict
mem = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
print "mem usage: (dict deleted)", mem
gc.collect()
mem = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
print "mem usage (garbage collection)", mem
print "sleeping for a few seconds"
time.sleep(30)
gc.collect()
mem = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
print "memory usage after sleeping ", mem 
```

这是结果。内存以 KB 为单位报告。

```
memory usage: 5152
memory usage: 8316
memory usage: 9176
memory usage: 9176
memory usage: 12076
memory usage: 12076
memory usage: 12076
memory usage: 12076
memory usage: 12076
memory usage: 12076
memory usage: 17548
memory usage: (dict created):  17548
mem usage: (dict deleted) 17548
mem usage (garbage collection) 17548
sleeping for a few seconds
memory usage after sleeping  17548 
```

如您所见，内存似乎根本没有释放。我在我的 Ubuntu 11.10 机器上用 Python 2.7.2 试过这个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:03:31.280

根据`man getrusage`：

> ```
> ru_maxrss (since Linux 2.6.32)
>     This is the maximum resident set size used (in kilobytes). 
> ```

如果我理解正确，则表示**峰值**使用量而不是**当前**使用量。

**编辑：**

另外值得一看Python 官方文档中的[内存管理](http://docs.python.org/c-api/memory.html)文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T13:07:27.863

正如 Ihor Kaharlichenko 指出的那样，`ru_maxrss`是该程序的使用高峰期。考虑以下与您的程序非常相似的程序：

```
import time
time.sleep(10)
string = ' ' * int(5e8) # 500 MB string
time.sleep(10)
string = None # the huge string is automatically GC'd here
time.sleep(10) 
```

如果你观察它的内存使用情况`top`，你会发现它在前 10 秒内非常小，然后在一段时间内飙升至约 500 MB，然后再次下降。您的程序表现出相同的行为。

# javascript - 骨干关系需要后端吗？

> ID：12006266
> 
> 赞同：0
> 
> 时间：2012-08-17T12:54:42.210
> 
> 标签：javascript, backbone.js, indexeddb, backbone-relational

试验骨干关系；我正在使用 Indexeddb 来存储我的所有数据，是否可以在没有后端的情况下使用骨干关系并让它与 Indexeddb 对话？

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:29:17.750

这是一个类似问题的[链接。](https://stackoverflow.com/questions/8545350/do-i-have-to-use-a-backend-when-using-backbone-js)

TL/DR：如果您不需要在服务器端检索或存储数据，则无需进行后端逻辑开发。

> 1.  后端不是必需的。
> 2.  如果您的应用程序不需要后端，Backbone 可以完全工作而无需任何后端。
> 3.  这取决于您的应用程序。如果您想检索某些输入的值并计算结果，那么 Backbone 不会为您执行此操作 - 它会帮助您构建代码。如果您的应用程序很简单并且不需要对模型、视图和集合或路由的支持，那么使用 Backbone 毫无意义。很难回答这个问题。

# python - Django 模型是如何工作的？

> ID：12006267
> 
> 赞同：21
> 
> 时间：2012-08-17T12:54:48.627
> 
> 标签：python, django, django-models

所以我可以像这样创建 Django 模型：

```
from django.db import models

class Something(models.Model):
    title = models.TextField(max_length=200) 
```

我可以像这样使用它：

```
thing = Something()
#set title
thing.title = "First thing"
#get title
thing.title 
```

一切正常，但我想了解它是如何工作的。

```
title = models.TextField(max_length=200) 
```

在上面的非Django Python代码中定义了models.TextField类型的类变量标题，我也可以像这样访问它`thing.__class__.title`：（[链接](http://getpython3.com/diveintopython3/iterators.html#a-plural-rule-iterator)）

但是在 Django 中，当我创建Something 的实例时，我突然有了一个标题属性，我可以在其中获取/设置文本。并且`thing.__class__.title`在做thing.title时无法使用So clear访问它我不是在访问类变量“title”而是一些生成的属性/属性，或者？

我知道字段最终出现在 thing._meta.fields 但如何？**发生了什么以及如何？**

1、Django是否在幕后创建属性“title”？

2、类变量“title”怎么了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T13:24:01.943

我认为它很难击败 Django 文档对此的[说法](https://code.djangoproject.com/wiki/DevModelCreation)。

> Model 类（参见 base.py）有一个**元类**属性，它将 ModelBase（也在 base.py 中）定义为用于创建新类的类。所以模型库。**调用new**来创建这个新的 Example 类。重要的是要意识到我们在这里创建的是类对象，而不是它的实例。换句话说，Python 正在创建最终将绑定到我们当前命名空间中的示例名称的东西。

基本上，[元类](http://en.wikipedia.org/wiki/Metaclass#Python_example)定义了如何创建类本身。在创建期间，可以将其他属性/方法/任何东西绑定到该类。这个[stackoverflow答案](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)给出的例子，大写了一个类的所有属性

```
# remember that `type` is actually a class like `str` and `int`
# so you can inherit from it
class UpperAttrMetaclass(type): 
    # __new__ is the method called before __init__
    # it's the method that creates the object and returns it
    # while __init__ just initializes the object passed as parameter
    # you rarely use __new__, except when you want to control how the object
    # is created.
    # here the created object is the class, and we want to customize it
    # so we override __new__
    # you can do some stuff in __init__ too if you wish
    # some advanced use involves overriding __call__ as well, but we won't
    # see this
    def __new__(upperattr_metaclass, future_class_name, 
                future_class_parents, future_class_attr):

        attrs = ((name, value) for name, value in future_class_attr.items() if not name.startswith('__'))
        uppercase_attr = dict((name.upper(), value) for name, value in attrs)

        return type(future_class_name, future_class_parents, uppercase_attr) 
```

以类似的方式，Django 的模型元类可以消化您应用于该类的属性，并添加各种有用的属性用于验证/等，包括偶数方法和非类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:49:37.970

python is extremely powerfull and permit the developer to use intrespection.

django use a lot of metaclass. and it seem that models.Model use it too. see in django\db\models\base.py

```
class Model(object):
    __metaclass__ = ModelBase 
```

i think the metaclass just take the classes attributes such a the Field and for all new instance for these Model subclass,create the apropriate variable.

1) yes, django create the instance variable of property "title" automaticaly 2) in the same way, the metaclass move the fields into the meta class...

# c# - C# - 表单组合框捕捉关闭

> ID：12006271
> 
> 赞同：2
> 
> 时间：2012-08-17T12:55:18.390
> 
> 标签：c#, .net, combobox

我有一个内置在 Visual Studio 和 C# 中的 winform。直到最近，组合框的行为都符合预期。但是，在添加功能时，我移动了所有表单元素，现在两个组合框在可以选择一个选项之前快速关闭（尽管您可以使用滚轮或箭头键选择一个项目）。下拉事件中的代码没有改变。我很茫然-有人遇到过这样的事情吗？

这是下拉事件的代码： -

```
 void comboBoxTargetServer_DropDown(object sender, System.EventArgs e)
    {
        comboBoxTargetServer.Items.Clear();
        comboBoxTargetDatabase.Items.Clear();
        comboBoxTargetDatabase.Items.Add("");
        comboBoxTargetDatabase.Enabled = false;
        //ActiveForm.Cursor = Cursors.WaitCursor;

        List<string> sqlServers = SQLUtilities.ListSQLServers();
        sqlServers.Sort();
        foreach (string sqlServer in sqlServers)
        {
            comboBoxTargetServer.Items.Add(sqlServer);
        }

        //ActiveForm.Cursor = Cursors.Arrow;
        comboBoxTargetDatabase.Enabled = true;            
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:02:13.137

一旦 ComboBox 下降，您将清除所有项目。这将清空它，因此 DropDown 中没有任何内容，因此列表将消失。您应该选择一个不同的事件来填充它。事实上，数据在应用程序的一次运行的上下文中是静态的吗？如果是这样，请在 Form Load 上填写 ComboBox 并保留它。

# sql-server - 设置 IDENTITY_INSERT ON 不起作用

> ID：12006273
> 
> 赞同：54
> 
> 时间：2012-08-17T12:55:34.887
> 
> 标签：sql-server, sql-server-2008, tsql

我想将一个表`Equipment`从一个数据库复制`MyDBQA`到我们的测试数据库`MyDB`。表中有一个标识列，它是主键（int，非空）。

但我得到一个错误：

> 消息 8101，级别 16，状态 1，第 2 行
> 只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“MyDB.dbo.Equipment”中的标识列指定显式值。

我的脚本：

```
SET IDENTITY_INSERT [MyDB].[dbo].[Equipment] ON
INSERT INTO [MyDB].[dbo].[Equipment]  SELECT * FROM [MyDBQA].[dbo].[Equipment]
SET IDENTITY_INSERT [MyDB].[dbo].[Equipment] OFF 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-08-17T12:56:50.033

如消息所示，您可能只是缺少列列表

```
SET IDENTITY_INSERT [MyDB].[dbo].[Equipment] ON

INSERT INTO [MyDB].[dbo].[Equipment]
            (COL1,
             COL2)
SELECT COL1,
       COL2
FROM   [MyDBQA].[dbo].[Equipment]

SET IDENTITY_INSERT [MyDB].[dbo].[Equipment] OFF 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-17T12:57:56.720

错误消息的相关部分是

```
...when a column list is used... 
```

您没有使用列列表，而是使用`SELECT *`. 改为使用列列表：

```
SET IDENTITY_INSERT [MyDB].[dbo].[Equipment] ON 

INSERT INTO [MyDB].[dbo].[Equipment] (Col1, Col2, ...)
SELECT Col1, Col2, ... FROM [MyDBQA].[dbo].[Equipment] 

SET IDENTITY_INSERT [MyDB].[dbo].[Equipment] OFF 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T23:56:21.593

在 VB 代码中，当尝试提交`INSERT`查询时，您必须在同一个 'executenonquery' 中提交双重查询，如下所示：

```
sqlQuery = "SET IDENTITY_INSERT dbo.TheTable ON; INSERT INTO dbo.TheTable (Col1, COl2) VALUES (Val1, Val2); SET IDENTITY_INSERT dbo.TheTable OFF;" 
```

我使用`;`分隔符而不是 GO。

为我工作。迟到但有效率！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T19:39:01.667

这是 Microsoft 关于使用 SET IDENTITY_INSERT 的文章，如果其他人像我一样在尝试重新创建已删除的记录同时保持原始标识列值时发现这篇文章，这可能对他们看到这篇文章有所帮助。

使用原始标识列值重新创建已删除的记录：http: [//msdn.microsoft.com/en-us/library/aa259221 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa259221(v=sql.80).aspx)

# c# - 如何在不使用自动回发和更新面板的情况下获取标签中的下拉列表选择值 asp.net

> ID：12006279
> 
> 赞同：1
> 
> 时间：2012-08-17T12:56:25.023
> 
> 标签：c#, asp.net

如何在没有自动回发的情况下在标签中获取下拉列表选择的值，并在 asp.net 中更新面板。我想要此代码的客户端脚本我有以下代码：-

```
protected void DropDownList1_TextChanged(object sender, EventArgs e)
{
    Label1.Text = DropDownList1.SelectedValue;
   // DropDownList1.Attributes["onclick"] =
   //"Label1.Text=this.options[this.selectedIndex].value";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:30:46.553

如果您不想使用 jquery（不是每个人都这样做！:)），您可以使用标准 javascript

```
<script language="javascript" type="text/javascript">
    function setLabelText() {
        var dropdown = document.getElementById("DropDownList1");
        document.getElementById("Label1").innerHTML = dropdown.options[dropdown.selectedIndex].text;
    }

</script>
<asp:DropDownList ID="DropDownList1" ClientIDMode="Static" runat="server" AutoPostBack="false" onchange="setLabelText();">
  <asp:ListItem Value="1" Text="One" />
  <asp:ListItem Value="2" Text="Two" />
</asp:DropDownList>

<asp:Label ID="Label1" runat="server" Text="Label" ClientIDMode="Static"></asp:Label> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:03:59.787

在您的 CS 代码中，添加一个属性，例如：

```
ddlMyDrop.attributes.add("onchange","SetLabel(this,lblCtrl)"); 
```

在您的 JS 代码中...

```
function SetLabel(sender, target){
    $(target).val($(sender).val());
} 
```

这假设您引用 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:20:02.620

You can do this fairly easily with jQuery. Label's turn into `span` and DropDownList into `select` on client side. Keep in mind that asp.net loves to append strings to the resultant content id's, *e.g.* MainContent_...

```
$(document).ready(function () {
    $('#MainContent_DropDownList1').change(function () {
        try {
            $('#MainContent_Label1').text($(this + "option:selected").text());
        } catch (err) {
            alert(err);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T23:42:58.870

不使用 jQuery 或 Javascript，因为这是对现有站点的修复，并且不是那样设计的。Well I have gotten to a point where when the DropDownList is selected and does it's postBack I do my logic of setting the textBox readOnly status to true or false. 我现在遇到的问题是 selectValue 不一致。它在 selct 字段中显示的内容不是发布回页面的内容。假设我有 None, 5.00, 10.00, 15.00, 20.00 作为我的选择。我首先选择 10.00 并返回 None 然后我选择 20.00 它显示 10.00。它回发先前的选择值。整个网站是从页面背后的代码编写的。aspx 页面完全是从 .vb 页面写入的。一切都写入asp标签。这是代码；

```
 If Page.IsPostBack Then
                If product_option_is_required > 0 then
                    myTextBox.ReadOnly= true
                Else
                    myTextBox.ReadOnly= false
                End if
                For Each child_control As Control In productOptions.Controls
                    If TypeOf child_control Is DropDownList Then
                        Dim child_ddl As DropDownList = child_control
                        tempName = products.getProductDependant("product_option_name",product_option_id)
                        tempSelectText = products.getProductSelectDependant("product_option_detail_name",child_ddl.SelectedValue)
                        priceDependant.Text ="here" & child_ddl.ID & " " & child_ddl.SelectedIndex & " " & child_ddl.SelectedValue & " --" & tempSelectText
                        If child_ddl.Text = "None" then
                            myTextBox.ReadOnly = true
                            myTextBox.Text = "If selected above enter name"
                        Else
                            myTextBox.ReadOnly = false
                            myTextBox.Text = ""
                        End if
                    End If

                next
            End if 
```

# android - 翻译我的应用

> ID：12006280
> 
> 赞同：2
> 
> 时间：2012-08-17T12:56:32.557
> 
> 标签：android, internationalization, translation

What I want to do is provide the user with a spinner which contains several languages, when a language is selected, the app will tr​​anslate to that language.

我有不同的字符串文件，但我不知道如何实现它。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:59:53.107

在 res 文件夹中，尊重这一点：

```
res/
       values/
           strings.xml
       values-es / (here for spanish values)
           strings.xml
       values-fr /
           strings.xml (here for french values) 
```

Android 在运行时根据设备的区域设置加载适当的资源。

有关详细信息，请参阅[此](http://developer.android.com/training/basics/supporting-devices/languages.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:01:37.223

您只需将不同`string.xml`的文件放在不同的值文件夹中，每个文件夹都命名为**values-XX**，其中 XX 是要使用的语言。

例如 values-en 用于英语， values-fr 用于法语等。

# c - va_list过程中的for循环，继续漫无目的地使用（？）K＆R

> ID：12006281
> 
> 赞同：1
> 
> 时间：2012-08-17T12:56:34.667
> 
> 标签：c, pointers, for-loop, continue, kernighan-and-ritchie

下午好！我对以下代码有一些疑问。

[1] for循环中的中间条件是什么意思？; `*p;`和`; *sval;` - 到达输入字符串的结尾？如果是，如何确定？

[2] 我不明白那个复杂的 for 循环。

假设如果条件不满足`*p == %`，那么我们立即进入 switch。现在让我们考虑相反的情况，尽管 ，我们输入每个其他字符`%`，如果满足，那么我们使用 continue 并在`switch`之后继续。那这两种情况有什么区别呢？我一定是大错特错了，但我现在2个多小时都找不到我的错误……

```
#include <stdarg.h>
/* minprintf: minimal printf with variable argument list */
void minprintf(char *fmt, ...)
{
    va_list ap; /* points to each unnamed arg in turn */
    char *p, *sval;
    int ival;
    double dval;

    va_start(ap, fmt); /* make ap point to 1st unnamed arg */

    for (p = fmt; *p; p++) {         /* [1] */
        if (*p != '%') {
            putchar(*p);
            continue;                /* [2] */
        }
        switch (*++p) {
        case 'd':
            ival = va_arg(ap, int);
            printf("%d", ival);
            break;
        case 'f':
            dval = va_arg(ap, double);
            printf("%f", dval);
            break;
        case 's':
            for (sval = va_arg(ap, char *); *sval; sval++)
                putchar(*sval);
            break;
        default:
            putchar(*p);
            break;
        }
    }
    va_end(ap); /* clean up when done */
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:02:25.910

当我们 时`continue`，我们只是打印字符，完全跳过开关。循环通过格式行查找 (1) 终止零，或 (2) 百分号。

当到达终止零时，循环结束：

```
for (p = fmt; *p; p++)
//            ^^^ Here is the condition: *p != 0 is implied 
```

当达到百分号时，将以下符号作为格式字符，并根据它解释下一个可变参数。

* * *

这个程序有一个错误 - 当百分号是格式字符串的最后一个字符时，它会在格式字符串的末尾产生读取（未定义的行为）。试试这个：

```
minprintf("%\0bug!bug!bug!"); 
```

`\0`跳过模拟的行尾标记，并生成`bug!bug!bug!`输出。其原因是语句`p`头中的无条件 pre_increment of `switch`。要解决此问题，请将以下案例添加到`switch`：

```
 case '\0':
    p--; // reverse the ++p from the header of the switch
    break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:04:27.820

*p *sval - 指向字符串中字符的解引用指针。在 C 中，字符串以“\0”符号结束。因此，如果我们从 p, sval 点为零的地方获得的值显然已经到达字符串的末尾

2 in loop continue 用于跳过它后面的所有语句并返回到循环头执行 (;;statement)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:06:09.737

*   [1] 是继续循环，直到它没有得到字符串的空终止字符`'\0'`。
*   [2] 如果不是，则打印字符`'%'`。如果`'%'`字符串中的下一个字符标识如何打印`va_arg`列表中的下一个字符。

# macos - 使 NSWindow 拒绝键盘事件

> ID：12006285
> 
> 赞同：0
> 
> 时间：2012-08-17T12:56:50.610
> 
> 标签：macos, cocoa, events, nswindow

我有一个应用程序，我的要求是在顶部有一个窗口，但它应该拒绝所有键盘事件。我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:05:20.130

您可以覆盖 AcceptFirstResponder: 在其内容视图上返回值为 NO 。

# drag - 如何在 Open Laszlo 5.0 中将视图拖到具有 html 内容的视图上？

> ID：12006286
> 
> 赞同：1
> 
> 时间：2012-08-17T12:56:58.177
> 
> 标签：drag, openlaszlo, lzx

我正在尝试将内容拖到 OL5.0 中的 html 内容上。观察结果是我能够毫无问题地从 laszlo 组件拖动到 html 组件。我能够从 laszlo 拖到 html 到 laszlo。但是，如果我将该视图拖到 html，然后释放它，然后从 html 拖，它就不起作用。

这是代码。

```
<canvas>

   <view bgcolor="green" width="20" height="20" onmousedown="dragger.setAttribute('applied', true);this.bringToFront();" onmouseup="dragger.setAttribute('applied', false)">
                <dragstate name="dragger"/>

    </view>  

    <view y="50" width="100%" height="300" bgcolor="blue" onmousedown="res.apply()" onmouseup="res.remove()">
        <resizestate name="res"/>
        <dragstate name="drg"/>
        <text width="100%" bgcolor="gray" onmousedown="parent.drg.apply()" onmouseup="parent.drg.remove()">Drag here</text>
        <html id="ht" src="http://localhost:8080/lps-5.0.x/htmlTest/resource/text.html" x="15" y="15" width="${parent.width - 30}" height="${parent.height - 30}"/>
    </view>         
</canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:32:05.023

我一直在 OpenLaszlo 2006 中进行编程，当我尝试使用 OpenLaszlo <html> 类时，它一直非常不稳定、错误和不可预测。我不建议在任何应用程序中使用该特定类。

# rest - 有没有办法跳过失败的迁移？

> ID：12006290
> 
> 赞同：0
> 
> 时间：2012-08-17T12:57:01.933
> 
> 标签：rest, migration

我想在我的服务器上为 ruby​​ on rails 项目运行迁移，但是我在 postgres 中遇到了这种错误-

PGError：错误：关系“last_message_read”已经存在：CREATE TABLE“last_message_read”（“id”序列主键，“message”字符变化（255），“company_id”整数）

所以，我想继续我的迁移，但它没有发生 - 我想忽略那些失败的迁移并继续其余的迁移......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:09:50.373

您的迁移有问题。只需重置您的数据库（`rake db:reset`）。

# c++ - 链接器错误 - 未定义的参考

> ID：12006291
> 
> 赞同：2
> 
> 时间：2012-08-17T12:57:15.027
> 
> 标签：c++, linker, linker-errors, netbeans-7.1

我有一个依赖于日志记录项目的项目，当我构建这个其他项目时，我收到以下链接器错误：

日志项目构建良好，但是当我将此项目中的日志项目用作链接器选项中的库时，它会生成以下错误，在我的日志项目中，我确实有一个 logger.cpp，其中定义了 wxRegKey。

```
../logging/dist/Debug/MinGW_1-Windows/liblogging.a(Logger.o): In function `ZN7Logging6Logger17CreateRegistryKeyEv':
c:\logging/impl/Logger.cpp:125: undefined reference to `_imp___ZN8wxRegKeyC1ENS_6StdKeyERK8wxString'
c:\logging/impl/Logger.cpp:127: undefined reference to `_imp___ZN8wxRegKeyC1ENS_6StdKeyERK8wxString'
c:\logging/impl/Logger.cpp:129: undefined reference to `_imp___ZNK8wxRegKey6ExistsEv'
c:\logging/impl/Logger.cpp:135: undefined reference to `_imp___ZN8wxRegKeyD1Ev'
c:\logging/impl/Logger.cpp:140: undefined reference to `_imp___ZN8wxRegKeyC1ENS_6StdKeyERK8wxString'
c:\logging/impl/Logger.cpp:142: undefined reference to `_imp___ZNK8wxRegKey6ExistsEv'
c:\logging/impl/Logger.cpp:143: undefined reference to `_imp___ZN8wxRegKey6CreateEb'
c:\logging/impl/Logger.cpp:149: undefined reference to `_imp___ZNK8wxRegKey6ExistsEv'
c:\logging/impl/Logger.cpp:152: undefined reference to `_imp___ZN8wxRegKeyD1Ev'
c:\logging/impl/Logger.cpp:155: undefined reference to `_imp___ZN8wxRegKeyC1ENS_6StdKeyERK8wxString'
c:\logging/impl/Logger.cpp:156: undefined reference to `_imp___ZNK8wxRegKey6ExistsEv'
c:\logging/impl/Logger.cpp:157: undefined reference to `_imp___ZN8wxRegKey6CreateEb'
../logging/dist/Debug/MinGW_1-Windows/liblogging.a(Logger.o): In function 
`ZN7Logging6Logger13GetLoggStatusEv':
c:\logging/impl/Logger.cpp:169: undefined reference to     
`_imp___ZNK8wxRegKey8HasValueEPKc'
c:\logging/impl/Logger.cpp:170: undefined reference to 
`_imp___ZNK8wxRegKey10QueryValueEPKcPl'
c:\logging/impl/Logger.cpp:176: undefined reference to 
`_imp___ZN8wxRegKey8SetValueEPKcl'

../logging/dist/Debug/MinGW_1-Windows/liblogging.a(Logger.o): In function  
`ZN7Logging6Logger12SetLoggLevelEv':
c:\logging/impl/Logger.cpp:186: undefined reference to    
`_imp___ZNK8wxRegKey8HasValueEPKc'
 c:\logging/impl/Logger.cpp:193: undefined reference to 
`_imp___ZN8wxRegKey8SetValueEPKcRK8wxString'
c:\logging/impl/Logger.cpp:200: undefined reference to `_imp__wxConvUTF8'
../logging/dist/Debug/MinGW_1-Windows/liblogging.a(Logger.o): In function 
`ZN12wxStringBase4InitEv':
C:/wxWidgets-2.8.12/include/wx/string.h:270: undefined reference to   
`_imp__wxEmptyString'
../logging/dist/Debug/MinGW_1-Windows/liblogging.a(Logger.o): In function `wxStringBase':
C:/wxWidgets-2.8.12/include/wx/string.h:368: undefined reference to   
`_imp___ZN12wxStringBase4nposE'
C:/wxWidgets-2.8.12/include/wx/string.h:368: undefined reference to 
`_imp___ZN12wxStringBase8InitWithEPKcjj'
../logging/dist/Debug/MinGW_1-Windows/liblogging.a(Logger.o): In function 
 `ZNK8wxRegKey10QueryValueEPKcR8wxString':
C:/wxWidgets-2.8.12/include/wx/msw/registry.h:167: undefined reference to    
`_imp___ZNK8wxRegKey10QueryValueEPKcR8wxStringb'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/MinGW_1-Windows/abcproject.dll] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2
make[2]: Leaving directory `/c/abcproject'
make[1]: Leaving directory `/c/abcproject'

 BUILD FAILED (exit value 2, total time: 34s) 
```

logger.h 中包含文件的顺序

```
 #include <vector>
 #include <sstream>
 #include <string>
 #include <ctime>
 #include <windows.h>
 #include <winbase.h>
 #include <wx/wx.h>
 #include <wx/thread.h>
 #include <wx/log.h>
 #include <wx/app.h>
 #include <wx/msw/registry.h>
 #include <wx/utils.h>
 #include <map> 
```

请帮忙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T13:00:41.267

您显然忽略了包含定义`wxRegKey`该类的多个函数的库。这就是链接器说它找不到的内容。你确定*logger.cpp*定义了它`wxRegKey` *的*所有方法吗？

我怀疑你的源代码实际上并没有*定义*任何相关`wxRegKey`的东西，因为它实际上是来自外部库的一个类。*您没有定义*该类，而是*包含*了一个声明该类的头文件。该*定义*位于一个外部文件中，您需要告诉您的构建系统是哪个文件。

您有*链接*错误，而不是*编译*错误，因此`#include`语句的顺序无关紧要。当您看到您在此处报告的错误时，编译器已经完成了所有编译。编译器已将您的文本源代码转换为二进制目标代码，现在链接器正试图将所有二进制文件收集在一起以形成最终的可执行程序。二进制文件引用了一些函数，编译器被告知将在其他地方定义，现在链接器正试图找到这些定义，但它不能。

如果你不知道函数是在哪里定义的，或者如何告诉你的构建系统在哪里找到它们，那么你可能不得不发布另一个问题：我需要链接什么才能使用 wxRegKey？如何在 NetBeans 项目中链接 wxWidgets？我不知道这些问题的答案，因为我从未使用过这些工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:16:13.240

似乎您忘记了将库添加`wxBase`到链接器命令行，因为甚至`wxString`-symbols 都没有解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:02:56.757

你似乎使用`wxwidgets`. 您确定在链接最终可执行文件时链接了正确的库吗？请查看传递给链接器的命令。

# tomcat7 - HTTPS 不适用于 tomcat 中的自签名证书

> ID：12006297
> 
> 赞同：0
> 
> 时间：2012-08-17T12:57:38.003
> 
> 标签：tomcat7

我是 tomcat 中 https 配置的新手。我用谷歌搜索了很多，但这并没有解决我的问题。我在上面部署了一台 ec2 机器和 tomcat。我尝试创建易于生成的自签名证书。我使用了我的域 www.test.com（使用我的服务器名称更改了测试）并生成了密钥库文件。然后我按照 tomcat docs 的 ssl howto 中的描述为 https 配置编辑了 conf/server.xml。但是 https 不起作用。虽然当我执行“curl https://localhost:8443 -k”时我可以得到响应，但它在浏览器中不起作用。需要很长时间才能做出回应，然后我一无所有。我需要证书还是仅适用于密钥库文件？请告诉我 。
请帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:30:45.990

嗨，感谢您的回答，我发现了我的问题，并想解释我的解决方案 1.) Curl 正在工作，但在浏览器中没有响应。我必须从 aws 中的安全组手动打开端口 8443。那时它正在工作:)。

2.) 对于所有其他人，如果他们遇到“无法从回复建立链”的问题 i) 请检查您的密钥库文件。用于生成 CSR 是否相同？ii) 安装您的证书颁发机构提供的中间证书。对于其中一些，您可以按照 [https://www.sslcertificaten.nl/download/Root_Certificaten/](https://www.sslcertificaten.nl/download/Root_Certificaten/) 分别使用别名主要和次要 **$JAVA_HOME/bin/keytool -import -alias primary -keystore sslkey -trustcacerts -file primary_cert.crt -storepass我的通行证**

**$JAVA_HOME/bin/keytool -import -alias secondary -keystore sslkey -trustcacerts -file secondary_cert.crt -storepass mypass** iii) 最后导入你的证书 **$JAVA_HOME/bin/keytool -import -alias tomcat -keystore sslkey -trustcacerts -file www_mydomain_com. p7b -storepass mypass**

希望这有助于欢呼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:01:29.300

如果`curl`可行，则问题出在浏览器或 servlet 中 - SSL 设置应该是正确的。检查 Tomcat 的日志文件是否有错误，并在 servlet 中设置断点以查看发生了什么。

# c - 使用头文件最有效的方法是什么

> ID：12006298
> 
> 赞同：1
> 
> 时间：2012-08-17T12:57:40.620
> 
> 标签：c, file, header

因此，目前在我的编程中，我现在已经创建了相当多的函数并将其存储在单独的 C 文件中，我在项目之间经常使用这些函数。

我的问题是将它们实施到其他项目中的最简单、最有效的方法是什么？目前我只是为每个新项目制作一个头文件，其中包含我想要使用的所有自定义函数的函数原型。

然后我让项目中的每个 C 文件都包含这个“主”头文件。在这个头文件中，我还包含了每个 C 文件使用的头文件，因此每个 C 文件都有一个头文件；我们就叫它吧`master.h`。

我觉得我这样做完全错了。我应该为每个 C 文件制作头文件并将它们包含在主头文件中吗？还是应该只为每个 C 文件创建头文件并根据需要包含它们？如果我这样做，一切如何仍然联系在一起？

在项目中使用头文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:12:17.653

1.  没有包含其他头文件的头文件。让`.c`文件这样做 - 使编译更快。

2.  使用前向声明。使重新编译更快，因为它不需要打开其他文件，如果有任何简单的更改，该`make`命令将花费很长时间编译很多东西。

3.  `.c`如果它们在逻辑上适合在一起，则将函数在头文件和相应文件中组合在一起。对于静态库，链接器会挑选出适当的位。对于动态库，如果当前不在内存中，它们会在运行时加载（因此可以被其他二进制文件使用）。

4.  没有`master.h`. 只需让库包含相关的函数（例如数学函数、输入/输出函数等）。各种项目可以选择“n”选择他们需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:08:56.427

我建议不要有一个`master.h`文件，因为你的整个项目最终会过于耦合。每次更改`master.h`所有源文件时都需要重新编译，这会显着减慢构建过程。相反，尝试创建`.h`具有相关功能的文件。C 库是一个很好的灵感来源：`stdlib.h`等`math.h`。

为了使用这些头文件，您应该将它们包含在 each`.c`中，就像使用标准 C 头文件一样：

```
#include <math.h>
#include <stdio.h> 
```

至于链接，这是一个完全不同的主题。如果您的大部分函数都是内联的，则您不必担心链接问题。否则，您应该在`.c`名称与您的标题类似的文件中定义它们（例如，`utils.c`for`utils.h`等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:20:39.607

为所有文件创建一个头`.c`文件。将类似的功能分组到一个`.c`文件中。不要忘记在每个头文件中添加头保护。

例如考虑一个头文件`one.h`，它应该包含以下标题保护。

```
#ifndef ONE_H
#define ONE_H

//give your function prototypes here.

#endif //ONE_H 
```

标头保护将有助于避免双重包含。

# wpf - 如何将我的 WPF 应用程序的新版本安装指向 SQL Server CE 数据库

> ID：12006304
> 
> 赞同：0
> 
> 时间：2012-08-17T12:58:12.437
> 
> 标签：wpf, sql-server-ce

我有一个运行良好的 WPF 应用程序。这个应用程序有一个为用户保存一些内容的 SQL Server CE 数据库。

为清楚起见，当前应用程序称为版本 1。

我最近编辑了版本 1 以包含新功能，因此实际上 WPF 应用程序现在是版本 2。

版本 1 包括为用户保存一些数据的 SQL Server CE 数据库。

在第 2 版中，我只添加了一些功能。所以我想要实现的是版本 2 指向已安装的先前版本 1 应用程序的 SQL Server CE 数据库。

目前，当我部署第 2 版时，它会创建一个新的 SQL Server CE 数据库，并且不会像我希望的那样指向第 1 版 SQL Server CE 数据库。

我想指出版本 1 SQL Server CE 数据库的原因是用户已广泛使用版本 1，我不希望他们丢失数据。

我希望这使我的查询更加清楚。

请任何人指出我正确的方向。

亲切的问候，地理

# jsf - Tomahawk MyFaces 文件上传组件未显示在屏幕上

> ID：12006312
> 
> 赞同：0
> 
> 时间：2012-08-17T12:59:02.030
> 
> 标签：jsf, myfaces

我正在尝试使用 tomahawk MyFaces 文件上传组件 t:inputFileUpload。我按照[JSF 2.0 File upload](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload)中的示例进行了更改，而不是将文件复制到 /lib，我使用了 maven。没有错误或警告，但文件上传组件未显示。屏幕上仅显示提交按钮。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:37:24.817

检查呈现的 HTML 页面。也许它仍然包含`<t:inputFileUpload>`. 在这种情况下，您可能忘记将前缀的命名空间添加`t`到您的文件中，如下所示：

```
xmlns:t="http://myfaces.apache.org/tomahawk" 
```

如果未定义前缀，则标签根本不会被处理并直接呈现到输出。

# jquery - 如何在使用 Jquery Isotope 插件动态插入项目后将默认过滤器应用于容器？

> ID：12006315
> 
> 赞同：3
> 
> 时间：2012-08-17T12:59:15.453
> 
> 标签：jquery, filter, jquery-isotope

我正在使用同位素插件。我有一个空容器，我要在其中添加项目`$(document).ready(...`

所有这些项目都已正确添加，同位素的布局和链接过滤工作正常。

但是，我希望能够在将某个项目类附加到容器之后直接对它们应用过滤器，或者在插入期间甚至更好。

怎么做？

要恢复，我有一个“.home”过滤器，我想在所有项目都附加到容器后应用它，而不是需要单击“home”过滤器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T16:37:46.300

如果你有一些简单的东西

```
<ul id="filters">
    <li><a href="#" data-filter=".home">Show all</a></li>
    <li><a href="#" data-filter=".what">What?</a></li>
    <li><a href="#" data-filter=".when">When?</a></li>
    <li><a href="#" data-filter=".why">Why?</a></li>
    // and so forth...
</ul> 
```

一旦完全构建了 DOM，您就可以运行一个函数来预设过滤

```
$(function() {
    // Isotope stuff...
    $container.isotope({filter: '.home'});
    // more Isotope stuff...
}); 
```

和同位素已被初始化。请参阅[此修改后的 DeSandro fiddle](http://jsfiddle.net/RRgjD/)，其中过滤了初始视图以仅显示红色元素。

**更新**将初始内容加载到一个空的#container（通过Ajax？），您可以使用[插入方法](http://isotope.metafizzy.co/docs/adding-items.html)或只是隐藏#container，直到所有元素都已加载和排序。关于 Ajax 和成功初始化 Isotope，另请参见[此处的 SO 答案](https://stackoverflow.com/a/9657833/963514)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-26T07:38:14.207

您可以使用同位素初始选项。

请检查这个基于“[组合过滤器”官方示例的](http://isotope.metafizzy.co.s3-website-us-east-1.amazonaws.com/filtering.html#combination-filters)[代码笔](https://codepen.io/mohamad-abouasy/pen/XogPPm)。

```
// init Isotope
var $grid = $('.grid').isotope({
  itemSelector: '.color-shape',
  filter: '.initial-filter-class' //use this class with the items you want to load initially.
}); 
```

例如：

```
 <div class="color-shape small round red initial-filter-class"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-11T16:59:20.430

我参加聚会有点晚了，但我昨天和 Isotope 一起工作时遇到了同样的问题，最终以不同的方式解决了它。

假设我有一组过滤器按钮，很像 Systembolaget 的：

```
<div id="filters">
  <button data-filter="*">Show all</button>
  <button data-filter=".hidden">Archived</button>
  <button data-filter="*:not(.hidden)">Current</button>
</div> 
```

也许我只想在用户完成加载页面时显示“当前”过滤器。我为与我想要的过滤器匹配的 CSS 选择器设置了一个变量。稍后我们将使用此变量。

```
var $grid;
var filterValue = "*:not(.hidden)"; 
```

接下来，我需要初始化我的内容。我已经准备好我的内容，所以我跳过了这一步，但如果你打算异步加载内容，你可以使用 JavaScript Promise。

这是我从[Google 的 Promise 介绍文章](https://developers.google.com/web/fundamentals/primers/promises)中获取的示例：

```
var promise = new Promise(function(resolve, reject) {
  var content = [];

  // do a thing, possibly async, then…

  if (content.length > 0) {
    resolve(content);
  }
  else {
    reject(Error("Nothing loaded"));
  }
}); 
```

这是我用来设置同位素网格和事件监听器的函数：

```
function init() {
  // Initialize isotope and the filter method we want to use
  $grid = $('.grid').isotope({
    itemSelector: '.grid-item',
    filter: function() {
      return filterValue ? $(this).is(filterValue) : true;
    }
  });

  // Event listener for the filter buttons
  $('#filters').on('click', 'button', function() {
    filterValue = $(this).attr('data-filter');

    $(this).addClass('active')
           .siblings().removeClass('active');

    // Refresh the isotope grid to display the filtered items
    $grid.isotope();
  });
} 
```

一旦你定义了 Promise 应该做什么，你就可以初始化你的同位素网格。您需要将它嵌套在`then`方法中，以便它仅在 promise 成功解决后运行。这还允许您设置在内容加载步骤失败的情况下应该运行的任何后备。

```
promise.then(function(results) {

  // Function defined in the last code snippet
  return init();

}, function(err) {
  // Error: "Nothing loaded"
  console.log(err); 

  // If you have a banner hidden on the page, you can display it
  $('.message').show();
}); 
```

如果您不需要使用承诺（例如我的情况），那么您需要做的就是：

```
init(); 
```

# objective-c - RestKit：如何将 URL 参数映射到对象属性

> ID：12006320
> 
> 赞同：2
> 
> 时间：2012-08-17T12:59:24.807
> 
> 标签：objective-c, ios, restkit

我有像这样的 REST 服务方法

```
/GetOfficeDocument?officeId=259 
```

它返回一个文档数组。应用程序中的文档是一个与办公室有关系的 NSManagedObject 对象。如何将`officeId`参数映射到`office`我的关系`Document`？

我知道我应该覆盖`objectLoader:willMapData:`，但我不知道我应该在这个方法中具体做什么。文档没用。

**UPD。**服务器的响应如下所示：

```
[{"AddedDate":"\/Date(1261484400000+0400)\/","Title":"Some text","Uri":"\/Document\/News\/851"}] 
```

如您所见，`officeId`不包含在响应中，仅包含在 URL 中。我可以在`objectLoader:willMapData:`使用中提取它

```
[[[loader URL] queryParameters] objectForKey:@"officeId"] 
```

但接下来我应该把它放在哪里？可映射数据参数是一个可变数组，我应该在那里放置什么？不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:48:07.893

您可以尝试`OfficeId`在响应中返回的每个文档项中注入值，如下所示：

```
- (void)objectLoader:(RKObjectLoader *)loader willMapData:(inout __autoreleasing id *)mappableData
{
    NSString *officeId = [[[loader URL] queryParameters] objectForKey:@"officeId"];

    NSMutableArray *newMappableData = [[NSMutableArray alloc] initWithCapacity:[*mappableData count]];

    for (NSDictionary *documentDict in *mappableData)
    {
        NSMutableDictionary = newDocumentDict = [documentDict mutableCopy];
        [newDocumentDict setObject:officeId forKey:@"OfficeId"];
        [newMappableData addObject:newDocumentDict];
    }

    *mappableData = newMappableData;
} 
```

`Document`并在映射中使用类似于以下内容的内容：

```
[documentMapping mapAttributes:@"AddedDate", @"Title", @"Uri", @"OfficeId", nil];
[documentMapping mapKeyPath:@"" toRelationship:@"office" withMapping:officeMapping];
[documentMapping connectRelationship:@"office" withObjectForPrimaryKeyAttribute:@"OfficeId"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:33:20.503

我通常添加`RKObjectMapping`到 managedObject 类

将此添加到您的 Document.h

```
 + (RKObjectMapping *)objectMapping; 
```

将此方法添加到您的 Document.m

```
+ (RKObjectMapping *)objectMapping {
RKManagedObjectMapping *mapping = [RKManagedObjectMapping mappingForClass:[self class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
     mapping.primaryKeyAttribute = @"word";
    [mapping mapKeyPath:@"word" toAttribute:@"word"];
    [mapping mapKeyPath:@"min_lesson" toAttribute:@"minLesson"]; 
```

}

当然，您应该更改 Document 对象属性的关键路径。每对都是服务器上响应的键的名称，它对应于 managedObject 上的 keyPath。

然后，当您初始化时，`objectManager`您可以为您拥有的每个 managedObject 设置映射。

```
 RKManagedObjectStore *store = [RKManagedObjectStore objectStoreWithStoreFilename:databaseName usingSeedDatabaseName:seedDatabaseName managedObjectModel:nil delegate:self];
objectManager.objectStore = store;

 //set the mapping object from your Document class
[objectManager.mappingProvider setMapping:[SRLetter objectMapping] forKeyPath:@"Document"]; 
```

你可以在这里找到一个很棒的教程[——RestKit 教程](http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/)。在文章的中间，您将找到有关映射的数据。

# java - Ebean：奇怪的结果

> ID：12006323
> 
> 赞同：1
> 
> 时间：2012-08-17T12:59:45.833
> 
> 标签：java, database, playframework-2.0, ebean

这是我的主题的数据成员：

```
public class Topic extends Model {  
@Id  
protected long id;  
public String title;  
public String content;  
@ManyToOne  
@JoinColumn(name = "forumId")  
public Forum forum;  // this is a reference to the topic's forum. 
```

**在 postgresql 中保存为 bigint 的论坛属性（论坛类的 id）**

这是我的主题查找器：

```
public static Finder<Long,Topic> find = new Finder<Long,Topic>(Long.class, Topic.class); 
```

现在，我正在尝试**使用 Finder**做最简单的事情。按论坛 ID 检索主题。
我尝试了很多变化，这是其中之一：

```
public static List<Topic> getTopicsByForum(long id) {
    Forum forum = Forum.getById(id);
    return find.where().gt("forumId", forum).findList();
} 
```

我得到错误的结果。我必须做错事，但不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:30:23.687

使用 Ebean，您可以直接访问属性，所以试试这个：

```
public static List<Topic> getTopicsByForum(Long forumId) {
    return find.where().eq("forum.id", forumId).findList();
} 
```

# json - iTunes API 和 HTTPS

> ID：12006325
> 
> 赞同：0
> 
> 时间：2012-08-17T12:59:49.653
> 
> 标签：json, api, ssl, https, itunes

我想知道这里是否有人可以澄清是否可以通过 https 调用 iTunes 和 Flickr API。这是一个 Facebook 应用程序。

由于通过 JSon 的非 https 调用，这两个 API 在应用程序中被阻止。我尝试了一些修复，但 iTunes 和 Flickr 似乎没有为他们的 API 提供 https。我在浪费时间吗？

任何帮助或指导将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:43:46.480

iTunes 搜索 API 刚刚获得对 https 的支持。您可以在此处的附属资源网站上找到公告：http:
[//www.apple.com/itunes/affiliates/resources/blog/secure-links-to-itunes---content-and-tools.html](http://www.apple.com/itunes/affiliates/resources/blog/secure-links-to-itunes---content-and-tools.html)

# javascript - AngularJS：templateUrl 延迟控制器的构造，依赖代码中断

> ID：12006326
> 
> 赞同：5
> 
> 时间：2012-08-17T12:59:51.497
> 
> 标签：javascript, angularjs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:13:18.617

当你在同一个模块中定义多个指令时，你可以分配一个优先级来处理指令的执行顺序。在你的情况下，给予“外部”比内部更高的优先级。因此，无论何时加载模板，指令都会按顺序执行。

查看指令中的“指令定义对象”以[获得](http://docs.angularjs.org/guide/directive)更多解释。

我希望答案。

但是，当您说“外部”控制器依赖于“内部”控制器时，它看起来并不好。在我个人看来，一个控制器不应该与另一个控制器捆绑在一起。我不确定您的用例，但应该有一种方法可以打破两个控制器之间的依赖关系。

# php - 如何为不同的php文件使用单独的php版本

> ID：12006330
> 
> 赞同：8
> 
> 时间：2012-08-17T13:00:07.630
> 
> 标签：php, .htaccess

我有一个站点（基于 ZEND 框架）并托管在 1and1 服务器上。

1and1 服务器使用 PHP 版本 5.2.17 和 5.4.5。我只需要对几个文件使用 PHP 5.4.5 版。这是因为如果我使用 PHP 5.4.5，我的其他一些文件会显示错误，但使用 PHP 5.2.17 可以正常执行。

在我的 .htaccess 文件中，下面的行是早先编写的以使用 PHP 5.2.17

```
AddType x-mapp-php5 .php 
```

要使用 PHP 5.4.5，我必须使用下面的行（使用此代码的说明可在 1and1 常见问题页面上找到）

```
AddHandler x-mapp-php6 .php 
```

常见问题网址：

*   [http://faq.1and1.com/scripting_languages_supported/php/7.html](http://faq.1and1.com/scripting_languages_supported/php/7.html)
*   [http://faq.1and1.com/scripting_languages_supported/php/6.html](http://faq.1and1.com/scripting_languages_supported/php/6.html)

有没有办法只对那些特定文件使用 PHP 5.4.5？

我尝试在 .htaccess 中使用以下行，但它不起作用：

```
AddType x-mapp-php5 .php
AddHandler x-mapp-php6 FilenameController.php 
```

**编辑**

我试图编辑 5.2 代码。我正在使用 PEAR 包创建与 PHP 5.2.17 一起工作的 Excel 表，但在 PHP 5.4.5 上显示以下错误

> 致命错误：无法重新声明 _PEAR_call_destructors()

# 附录

`.htaccess`对文件的这种更改

```
AddType x-mapp-php5 .php 
AddHandler x-mapp-php6 .php6 
SetEnv APPLICATION_ENV development 
Options -MultiViews 
<IfModule mod_rewrite.c> 
  RewriteEngine On 
  RewriteBase / 

  RewriteRule ^FilenameController\.php$ FilenameController.php6  [L] 

  RewriteCond %{REQUEST_FILENAME} -s [OR]
  RewriteCond %{REQUEST_FILENAME} -l [OR] 
  RewriteCond %{REQUEST_FILENAME} -d 
  RewriteRule ^.*$ - [NC,L] 

  RewriteRule ^.*$ index.php [NC,L] 
</IfModule> 
```

如果我将 FilenameController.php 的文件名更改为 FilenameController.php6 并且当我尝试访问其生成的页面时，会生成 404“找不到页面”错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T00:55:24.713

为什么不只是

```
AddHandler x-mapp-php6 .php6 
```

并将您的 5.4 脚本重命名为 php6？您甚至可以通过在`.htaccess` 文件中执行以下操作来向用户隐藏它：

```
RewriteEngine On
RewriteBase   /
RewriteRule   ^FilenameController\.php$   FilenameController.php6 [L] 
```

这对那个脚本文件的 .php6 扩展名做了内部指导。:-)

但是，让我强调一下：您只能根据*每个请求*而不是每个文件来选择要使用的脚本引擎。例如：`http:/yourdomain.com/FilenameController.php`将由 PHP 5.4 RTS 处理，所有包含的文件将使用 PHP 5.4 编译和执行；`http:/yourdomain.com/index.php`将由 PHP 5.2 RTS 处理，所有包含的文件都将使用 PHP 5.2 编译和执行。

您不能使用 5.4 编译应用程序中的文件，而使用 5.2 编译其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:06:06.437

> 1and1 服务器使用 PHP 版本 5.2.17 和 PHP 版本 5.4.5。

我很好奇这件事的细节。

假设您将 php 作为 Apache 模块 (mod_php) 运行，您一次只能在同一个 Apache 安装上运行一个版本。您确定您的服务器甚至允许同时使用两者吗？更有可能的是，您可以重新启动 Apache 并让它以不同的版本运行。如果是这种情况，你不能真正配置你的出路，以免你想通过 cgi 设置 php。

# android - 已收到 TTS 但没有语音输出

> ID：12006336
> 
> 赞同：0
> 
> 时间：2012-08-17T13:00:28.753
> 
> 标签：android, notifications, text-to-speech

我正在尝试使用 TextToSpeech 但我遇到了一些奇怪的问题。

让我简单解释一下我的应用程序的架构。此应用程序将用于公交时间。用户可以将他们的巴士添加到通知中。如果有任何变化，服务器将通知订阅者。我想在这个应用程序中使用 TTS。

我实现了 Android GCM 和通知系统，唯一的问题是 TTS。

`GCMIntentService.onMessage`方法调用下面的 generateNotification 方法：

```
public static void generateNotification(Context context, String message) {
        int icon = R.drawable.icon_small;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);       

        Bundle b = new Bundle();
        b.putString(EXTRA_MESSAGE, message);
        b.putString(READABLE_MESSAGE, message);

        Intent notificationIntent = new Intent(context, BusAlerts.class);
        notificationIntent.putExtra("CallType", CallType.NOTIFICATION);
        notificationIntent.putExtra("MessageReceived", b);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent,  Intent.FLAG_ACTIVITY_NEW_TASK);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.defaults |= Notification.DEFAULT_VIBRATE | Notification.DEFAULT_SOUND;
        long[] vibrate = { 1000 };
        notification.vibrate = vibrate;          
        notificationManager.notify(0, notification);
    } 
```

此代码成功生成通知。这是 BusAlerts.codes（一些修剪过的 ;)）

```
public class BusAlerts extends Activity implements OnInitListener {
private static TextToSpeech myTts;

@Override
    public void onCreate(Bundle savedInstanceState) {
        myTts = new TextToSpeech(this, null);
}

@Override
protected void onStart() {
        super.onStart();

//readableMessage extracts from bundles

speak(readableMessage);
}

public void speak(String text)
    {
         myTts.speak(text, TextToSpeech.QUEUE_FLUSH, null);     
    }
@Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
         if (myTts != null) {
             myTts.shutdown();
             myTts.stop();
             myTts = null;
            }
    }
public void onInit(int status) {
         if (status == TextToSpeech.SUCCESS) {

                int result = myTts.setLanguage(Locale.UK);

                if (result == TextToSpeech.LANG_MISSING_DATA
                        || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                    Log.e("TTS", "This Language is not supported");
                } 
                else{
                    if (myTts.isLanguageAvailable(Locale.UK) == TextToSpeech.LANG_AVAILABLE || myTts.isLanguageAvailable(Locale.UK) == TextToSpeech.LANG_COUNTRY_AVAILABLE)
                        myTts.setLanguage(Locale.UK);
                }

            } else {
                Log.e("TTS", "Initilization Failed!");
            }

    } 
```

如果用户从通知中打开此类，一切正常，但没有声音出现。当我调试它时，我看到如下情况。 ![在此处输入图像描述](../Images/b42aa024e44ce360722f23f94c7fc5b1.png)

但是，如果用户按下主页按钮并重新打开应用程序（相同的活动恢复），用户可以听到声音。它的情况是这样的。 ![在此处输入图像描述](../Images/033ecc8ec48dc3bfc462727f1a15c236.png)

我注意到 mCachedParamters 和 mITts 不同；但我不知道为什么。我已经卡了一个星期，找不到解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:12:16.957

你应该打电话

```
speak(readableMessage); 
```

仅在调用 OnInit 之后。通过在 Onstart 中调用它，您无法保证这一点。这就是当你回到应用程序时它被初始化并且你能听到的原因

# iphone - Pinterest 的第一个标签是 UITableView 还是 UIWebView？

> ID：12006339
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:00:39.533
> 
> 标签：iphone, ios, uitableview, uiwebview, pinterest

我想知道下一张图片中使用了哪个视图？

UITableView 还是 UIWebView？

我一直想知道如何判断视图是否嵌入到 Web 视图中。
无论如何，有人知道这个特定观点的答案吗？

![在此处输入图像描述](../Images/7c77cc271c6a603bdd25efae9aed4357.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:06:10.880

您可以使用此委托方法将单个高度设置为单个 UITableViewCell

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

# web-applications - 获取域名

> ID：12006341
> 
> 赞同：0
> 
> 时间：2012-08-17T13:00:45.333
> 
> 标签：web-applications, domain-name

假设我决定下一个项目的理想域名是 foo.com。我检查了当前存在的内容，并得到了 404。我检查了 whois 的联系信息并发送电子邮件以购买该域，但它在没有这样的地址的情况下被退回。我再次检查了whois，它说该域将在几个月后到期。

最好的下一步是什么？如果我等到到期日，我可以领取域名吗？除非当前所有者更新它，大概。当前指向 404 的域被更新的可能性有多大？

我还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:08:56.277

有些服务允许您“延期订购”一个域，这意味着提供商会在它可用时为您购买。

有人保留该域可能有很多原因，即使没有公开可用的 HTML 内容或连接的邮件服务器。

这似乎很遥远，也许值得为您的项目考虑一个新名称！

# objective-c - 在多个朋友的墙中发布消息

> ID：12006342
> 
> 赞同：0
> 
> 时间：2012-08-17T13:00:46.633
> 
> 标签：objective-c, facebook, post, ios4

我正在开发一个应用程序，我想在 facebook 上的多个用户的墙上发布消息，例如“轮到你玩特定游戏了”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:09:37.483

这样做的唯一方法是使用服务器端脚本在朋友提要上发布

您可以使用 Graph API 通过向范围发出 POST 请求`/PROFILE_ID/feed`（而 PROFILE_ID 是朋友的 facebook id - 或用户名）来 POST 到朋友的提要，更多信息请参见：http: [//developers.facebook.com/docs/reference/ api/user/#posts](http://developers.facebook.com/docs/reference/api/user/#posts)（在创建段下）

为了在多个朋友源上发布 - 您需要循环执行此操作（强烈不推荐 - facebook 自动评级不喜欢它，因为它看起来像垃圾邮件，并且您的应用程序可能会被阻止）

[另一种方法（而不是代码中的循环）是使用此处](http://developers.facebook.com/docs/reference/api/batch/)描述的批处理请求概念来一次创建多个图形 api 调用

为了代表用户发布帖子，他必须授予您`publish_stream`许可（甚至更好 - `publish_actions`）。可以在此处找到有关扩展权限的更多详细信息 - [http://developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)

编辑：自 2013 年 2 月以来，不再可以通过图形 API 在其他用户墙上发帖。所以你可以看到这个答案不再相关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:35:51.607

不，您不能通过 IOS FB SDK 进行多次发布。尽管文档说您可以使用 api 的“To”参数，但它不允许通过单个调用在多个墙上发布。

相反，您需要在多个调用中执行此操作。或者您可以通过游戏请求向多个用户发送通知。但目前在墙上张贴似乎是不可能的。

# jquery - jQuery表单验证

> ID：12006344
> 
> 赞同：1
> 
> 时间：2012-08-17T13:00:51.520
> 
> 标签：jquery, forms, validation

如果有人使用 jquery 将文本字段留空，我只是想打印一条错误消息。但它没有被显示。这是html代码：

```
 <form id="form1" runat="server">
    <div>
    <table>
     <tr>
    <td>
   <label>Name</label></td>
   <td> <input class="required" type="text" name="name" id="name" /><span>(required)</span></td>
     </tr><tr>
    <td><br/><label>Address</label></td>
    <td><input class="required" type="text" name="address" id="address"/><span>(required)</span></td></tr>
     </table>
    </div>
    </form> 
```

这是 Jquery 代码。

```
$(document).ready(function () {
   var requiredFlag = ' * ';
    $('form :input').filter('.required').next('span').text(requiredFlag).end();
    if ($(this).is('.required')) {
       if (this.value == '') {
       var errorMessage = 'This is a required field';
                             };
            $('span></span').text(errorMessage).appendTo($(this));
                             }; 
}); 
```

可能是我错过了一些东西。帮助专家。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:07:31.387

1.  `this`在您的代码中指的是`window/document`对象而不是`input`元素；
2.  您的代码中有一些拼写错误 => `$('span></span')`;
3.  您的代码中没有`event handler`用于验证`inputs`
4.  您的标记中有 span 元素，无需生成新元素
5.  您可以使用表单`submit`事件来验证输入
6.  选择`:input`器已被弃用

试试这个：

```
var errorMessage = 'This is a required field';
$('form input.required').next().text('*');

$('form').submit(function(){
   var errors = 0;
   $('input.required', this).each(function(){
       if (this.value == '') {
          $(this).next().text(errorMessage);
          errors++;
       }
   })
   if (errors > 0) {
     return false // prevents the default action of the event if there are errors
   }
}) 
```

1.  [`submit()`](http://api.jquery.com/submit/)
2.  [`next()`](http://api.jquery.com/next/)
3.  [`each()`](http://api.jquery.com/each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:07:41.477

我认为这不是一个好的选择器： `$('span></span')`. 使用 jquery [Siblings](http://api.jquery.com/siblings/) 选择器，并使用 .text() 或 .html() 函数更改跨度文本 [http://api.jquery.com/html/](http://api.jquery.com/html/)

# ruby-on-rails - Thor Gem - 在任务之前发送参数

> ID：12006353
> 
> 赞同：0
> 
> 时间：2012-08-17T13:01:59.003
> 
> 标签：ruby-on-rails, ruby, thor

我知道的令人困惑的描述，请参见示例：

```
Foo < Thor

  desc "bar","bar method"
  def bar
    puts "Hello from bar #{options[:id]}"
  end

  desc "nar","nar method"
  def nar
    puts "Hello from nar"
  end
end 
```

这很简单。因此，如果我打电话（雷神已经以这种方式设置为使用类名作为第一个标识符）。现在没有 id，所以什么都没有打印。

```
foo bar
> Hello from bar
foo nar
> Hello from nar 
```

最后的问题是，我怎样才能使用 Thor 以这种形式向方法发送参数？

```
foo 12 bar
> Hello from bar 12
foo nar 
> Hello from nar 
```

我想做的是在任务名称之前传递参数栏，这对Thor来说可能吗？

抱歉，这个问题令人困惑，但目前简化我复杂代码的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:59:03.770

您拥有 Ruby 的强大功能，因此您可以：

```
class Foo < Thor
  desc "bar","bar method"
  def bar(id)
    puts "Hello from bar #{id}"
  end

  def method_missing(m, *args, &block)
    if m.is_a? Integer  ## Might not work. May need to_i and an exception check.
      bar(m)
    end
  end
end 
```

这不在我的脑海中，所以你的里程可能会有所不同......

# java - Reflecting *.class file

> ID：12006356
> 
> 赞同：1
> 
> 时间：2012-08-17T13:02:05.570
> 
> 标签：java, reflection

How to get java.lang.Class from *.class file?

I have a folder whicj contains *.class files. I need to reflect them all to java.lang.Class. I've read [this](https://stackoverflow.com/questions/738393/how-to-use-urlclassloader-to-load-a-class-file#738422) answer and did so, as stated in the first option:

```
 URL[] classUrl = new URL[1];
        classUrl[0] = new URL("file:" + classFilesFolder);
        URLClassLoader ucl = new URLClassLoader(classUrl);
        Class c = ucl.loadClass("I DON'T KNOW CLASS NAMES HERE!"); 
```

The problem is that I don't know names of classes that I'm reflecting. How can I solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:25:05.047

If `classFilesFolder` is `/home/user` and the files inside the folder have names like `/home/user/com/something/My.class`, the class name (including the package) will be `com.something.My`. So the class name is the full file name, with `classFilesFolder` removed, then change all forward slashes to dots and remove `.class` at the end.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:48:56.633

You can use [asm](http://asm.ow2.org/) to [parse a class file](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassReader.html), and then call [`getClassName()`](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassReader.html#getClassName%28%29) to find the name.

# php - 整合邮件黑猩猩邮件功能

> ID：12006357
> 
> 赞同：1
> 
> 时间：2012-08-17T13:02:06.067
> 
> 标签：php, api, mailchimp

我正在使用 mail chimp api 向我网站中的用户发送邮件。当我运行我的代码时， `{"aws_type":null,"aws_code":null,"http_code":500,"message":"Please setup the integration first"}`会显示一条错误消息。

我用这个代码

```
 $apikey = 'api_key';

$to_emails = array('rohith038@gmail.com');
$to_names = array('You', 'Your Mom');

$message = array(
    'html'=>'Yo, this is the <b>html</b> portion',
    'text'=>'Yo, this is the *text* portion',
    'subject'=>'This is the subject',
    'from_name'=>'Me!',
    'from_email'=>'verifed@example.com',
    'to_email'=>$to_emails,
    'to_name'=>$to_names
);

$tags = array('WelcomeEmail');

$params = array(
    'apikey'=>$apikey,
    'message'=>$message,
    'track_opens'=>true,
    'track_clicks'=>false,
    'tags'=>$tags
);

$url = "http://us1.sts.mailchimp.com/1.0/SendEmail";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url.'?'.http_build_query($params));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec($ch);
echo $result;
curl_close ($ch);

$data = json_decode($result);
echo "Status = ".$data->status."\n"; 
```

在此之前是否有任何整合。如果有人知道请回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:17:58.160

好像您正在使用 Amazon STS，因此正如本文所述，您需要先完成与 Amazon 服务的集成步骤。

[http://apidocs.mailchimp.com/sts/](http://apidocs.mailchimp.com/sts/)

[https://groups.google.com/forum/#!topic/mailchimp-api-discuss/JvSxQDQfIq4/discussion](https://groups.google.com/forum/#!topic/mailchimp-api-discuss/JvSxQDQfIq4/discussion)

# ruby-on-rails - 路由重定向

> ID：12006360
> 
> 赞同：0
> 
> 时间：2012-08-17T13:02:13.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3

登录后，我希望将用户定向到

> example.com/me

并不是

> example.com/users/$ID_NUMBER

我已将以下内容添加到我的 routes.rb

> 匹配 '/me'，到：'users#show'

和 users_controller

> ```
> @user = current_user
> redirect_to me_url 
> ```

但是，我得到重定向循环。我可以毫无问题地调用 example.com/me，但在登录步骤中我不能直接去那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:11:00.373

您需要在您的`routes.rb`

```
match '/me' => 'users#show', :as => :me 
```

该`:as => :me`部分是创建`me_url`和`me_path`帮助者的原因。

[**导轨路由**](http://guides.rubyonrails.org/routing.html)

# django - App Engine WSGI 中间件分析器

> ID：12006363
> 
> 赞同：2
> 
> 时间：2012-08-17T13:02:19.713
> 
> 标签：django, google-app-engine, python-2.7, wsgi, cprofile

我有一个 Django 应用程序，我决定将它移植到 Google App Engine。
我决定使用 NDB 作为我的数据库并移植了所有模型（包括 django 用户）。在阅读文档一周后（App Engine 文档很糟糕，给出的示例通常已经过时并且不再工作）并移植应用程序，当我运行它时它真的很慢：1s-2s 延迟与空数据库。
ndb 查询不需要太多时间（少于 50 毫秒），并且[Appstats](https://developers.google.com/appengine/docs/python/tools/appstats)应用程序没有向我显示任何其他内容。
我决定使用[cProfile](http://docs.python.org/library/profile.html)并创建了一个 wsgi 中间件，但我不知道如何打印输出。pstats 方法给我打印输出或将其保存到文件，我不能在 wsgi 处理程序中做任何事情。
我的代码如下：

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapp.settings")
from django.core.handlers import wsgi

from webob import Request
class AppProfiler(object):  
    def __init__(self, app):
        self.app = app
    def __call__(self, environ, start_response):  
        from django.core.files.base import ContentFile 

        self.req = Request(environ)
        import cProfile, pstats
        prof = cProfile.Profile()
        prof = prof.runctx("self.get_resp()", globals(), locals())

        print "<pre>"
        stats = pstats.Stats(prof)
        #stats.dump_stats(output)
        stats.print_stats(80)
        print "</pre>"

        body = self.resp.body # here i should append the stats data
        self.resp.body = body

        return self.resp(environ, start_response)

    def get_resp(self):
        self.resp = self.req.get_response(self.app)

app = wsgi.WSGIHandler() 
profiler = AppProfiler(app) 
```

如何将探查器统计信息附加到正文？
或者有没有更好的方法来找出是什么减慢了我的应用程序？
我在我的 django 视图中使用了很多模块导入是否有 App Engine 方法来导入模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:22:30.650

已经有一个很棒的 WSGI 应用程序，您可以轻松地将其集成到名为**google-app-engine-mini-profiler**的项目中。

> gae_mini_profiler 是一个快速的 WSGI 应用程序，它提供对现有 GAE 项目的无处不在的分析。它为您在生产站点上选择的用户公开 RPC 统计信息和标准分析输出。只有来自您选择的用户的请求才会被分析，其他人不会遭受任何性能下降。

请看一下作者 Ben Kamens 的这篇[博文，或者直接访问](http://bjk5.com/post/6944602865/google-app-engine-mini-profiler)[repo](https://github.com/kamens/gae_mini_profiler)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:57:58.980

首先，我认为 cProfile 不会工作，因为它是一个 C 库。

当你解决这个问题时，我能想到的最简单的事情就是将你的分析器数据输出到日志中。

```
import logging
logging.info("timing info") 
```

1-2 秒对于启动请求来说并不少见 - 即，如果 App Engine 必须启动一个新实例来处理您的请求。日志将指示哪些请求是启动请求。

如果您正在运行许多请求，并且它们仍然需要很长时间，那么您的代码中的某个地方就有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:11:29.673

你应该使用appstats。这个工具正是为此而制作的。 [https://developers.google.com/appengine/docs/python/tools/appstats](https://developers.google.com/appengine/docs/python/tools/appstats)

# c - 使用 KV 存储管理 G-WAN 中的缓存

> ID：12006364
> 
> 赞同：1
> 
> 时间：2012-08-17T13:02:24.993
> 
> 标签：c, web-applications, webserver, g-wan

我目前正在使用 G-Wan Web 服务器在 C 中开发一个 Web 应用程序，我想使用 G-Wan 附带的 KV Store 来存储生成的网页和页面显示次数的计数器.

KV 存储是一个哈希映射，可用于存储复杂数据，例如结构。

这就是我用来存储 HTML 数据和一个整数的计数器：

```
typedef struct
{    
  char* HTML;    
  int nbDisplays;    

} my_data; 
```

Web 服务器正在使用多个线程，并且 KV 存储在线程之间共享。

为了更新字段 nbDisplays 我正在使用原子操作 __sync_fetch_and_add (...) 但我不知道更新作为指针的字段 HTML 的最佳方法是什么。

这个会比较好吗：

1.  使用存储在 KV 中的现有结构构建一个新结构，获取当前值并使用 G-WAN 提供的 add() 函数将其添加到 KV 存储（此函数用新结构替换旧结构）
2.  或者直接更新存储在 KV 存储中的结构的值？

我不习惯在多线程环境中编程，我害怕一些“奇怪”的行为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:12:37.490

`kv_add()`被记录为原子操作。您可以使用它来更新您的计数器，但这比仅使用原子操作来增加`nbDisplays`计数器**而不接触 HTML 指针**（页面名称不会更改）要慢。

但是 G-Wan KV Store 的功能并没有使它看起来像一个`hash map`. 您不能使用`hash map`.

# r - 移除 NA 后重新添加它们

> ID：12006366
> 
> 赞同：1
> 
> 时间：2012-08-17T13:02:25.370
> 
> 标签：r

R 中的许多操作都需要从数据集中删除 NA。就我而言，我想使用 kmeans 将连续测量分为三个因素：

```
kmeans.2006<-kmeans(na.omit(media.2006), 3) 
```

这显然会创建一个与 media.2006 长度不同的向量。我想要做的是将此向量替换为 media.2006 （或相同长度的新向量）。我想我想做的是写一个类似下面的循环，但告诉计数器跳过任何 NA。

```
kmeans.2006<-kmeans(na.omit(media.2006), 3)

n <- length(media.2006)
k <- length(kmeans.2006)

media.factor.2006 <- rep(NA, n)

for(i in 1:n){
 for(j in 1:k){
media.factor[i] <- ifelse(is.na(media.2006[i]) != TRUE, kmeans.2006[j], media.2006[i])
 }
} 
```

需要明确的是，这不起作用，但我想像这样的事情会起作用，如果我可以告诉 j-counter 跳过 i-counter 遇到（请原谅双关语）NA的情况。有任何想法吗？

作为参考，我有：

```
> dput(media.2006)
c(NA, NA, NA, 0L, 0L, 0L, 385L, 0L, 51L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 47L, 20L, NA, 0L, 16L, 116L, 84L, 20L, NA, 0L, 3L, 
28L, 940L, 741L, 177L, 984L, 0L, 27L, 19L, 294L, 79L, 1L, 17L, 
152L, 35L, 87L, 946L, 0L, 0L, 0L, 27L, 10L, 9L, 395L, 25L, 0L, 
0L, 0L, 0L, 58L, 1198L, 0L, 0L, 0L, NA, 19L, 0L, 19L, 2L, 0L, 
2L, 25L, 0L, 0L) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:10:39.763

这比你想象的要容易。

```
media.factor.2006 <- rep(NA, length(media.2006))
media.factor.2006[!is.na(media.2006)] <- kmeans.2006$cluster 
```

`is.na`返回一个逻辑向量，`length(media.2006)`然后`!`将其反转，因此您告诉用 kmeans.2006 替换 media.2006 中不是 NA 的所有内容。

# java - 更改 JComboBox 箭头按钮的图标

> ID：12006367
> 
> 赞同：3
> 
> 时间：2012-08-17T13:02:28.350
> 
> 标签：java, swing, jcombobox, look-and-feel, synth

谢谢您的回复

但这就是我想做的：

当在可编辑的组合框中按下一个键时，我希望 jcombobox 的弹出菜单自动出现，并获取其中写入的文本，但是当我更改箭头按钮的图标时，图标更改但弹出菜单没有' t 按下键时出现。

当我尝试在 Windows 外观中执行此操作时，它运行良好，没有任何问题，但在 Synth 外观中，它不起作用。我搜索了两天，但我无法解决问题。

我尝试使用文档侦听器，但没有任何改变，或者我没有正确使用它

我希望这次能澄清我的问题

```
JTextField editor;
.
.
.
editor = (JTextField) jComboBox1.getEditor().getEditorComponent();

\\ 

editor.addKeyListener(new KeyAdapter() {
@Override
public void keyReleased(KeyEvent e) {

    if (jComboBox1.isDisplayable())
    {
        jComboBox1.setPopupVisible(true);
    }

         System.out.println(editor.getText());
}
});

\\ change arrowbutton icon

jComboBox1.setUI(new SynthComboBoxUI() {

   @Override
   protected JButton createArrowButton() {
      JButton btn = new JButton();
      btn.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Image/error3.png")));
      return btn;
   }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:20:14.520

1.  不要使用[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)，使用 DocumentFilter 过滤不需要的字符或[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

2.  [JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)返回 Document（派生`JTextField`或`JFormattedTextField`来自`JComboBox`/ `JSpinner`）

3.  将[Icon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)放入保存到`xml file`for的定义中`Synt`，您可以通过从 JComboBOx 派生 SynthButtonUI 来测试它

4.  从 Synth L&F 到使用`Nimbus`

5.  使用[Custom Look and Feel](https://stackoverflow.com/questions/3954616/look-and-feel-in-java/3954646#3954646)，其中一部分`BasicXxxUI`直接覆盖方法

# vba - EXCEL制表符分隔导出通过公式

> ID：12006368
> 
> 赞同：0
> 
> 时间：2012-08-17T13:02:31.917
> 
> 标签：vba, csv, excel

我想从 excel 生成一个制表符分隔文件（使用公式来设置字符串）我不想使用另存为函数的原因是我将从一个电子表格生成许多不同的 csv/txt 文件以及何时你保存，主文件的扩展名被改变了。

这就是我在 Excel 中的功能，该函数必须将所有列与中间的选项卡连接起来，Desc 字段必须用双引号封装。

![在此处输入图像描述](../Images/7dd158519cafdc28fc9cc4d4049d35ae.png)

当我将单元格 D2 的内容复制到文本编辑器中时，返回以下字符串

"Toyota Corrola ""在这里描述"""

如您所见，Excel 决定将双引号放入整个字符串并转义原始引号...

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:56:39.930

为什么不将要放置的数据复制到 .csv 文件中，打开一个新的 Excel 实例，将数据粘贴进去，然后另存为 .csv 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:26:39.827

尽管 Excel 制表符分隔导出工作完美，但我需要尽快在所选内容上生成制表符分隔文件。

找到/编辑了下面的代码并为其分配了一个 Excel 宏快捷方式：

```
 Sub QuoteCommaExport()
    Dim DestFile As String
    Dim FileNum As Integer
    Dim ColumnCount As Integer
    Dim RowCount As Integer

    ' Prompt user for destination file name.
    DestFile = InputBox("Enter the destination filename" & _
      Chr(10) & "(with complete path and extension):", _
      "Quote-Comma Exporter", "C:\myTabFile.txt")
    ' Obtain next free file handle number.
    FileNum = FreeFile()

    ' Turn error checking off.
    On Error Resume Next

    ' Attempt to open destination file for output.
    Open DestFile For Output As #FileNum
    ' If an error occurs report it and end.
    If Err <> 0 Then
      MsgBox "Cannot open filename " & DestFile
      End
    End If

    ' Turn error checking on.
    On Error GoTo 0

    Dim topString
    For ColumnCount = 1 To Selection.Columns.Count

        If ColumnCount < Selection.Columns.Count Then
            topString = topString & """" & ActiveSheet.Cells(ColumnCount, 1).Text & """" & vbTab
            Else
            topString = topString & """" & ActiveSheet.Cells(ColumnCount, 1).Text & """"
        End If
    Next ColumnCount
    Print #FileNum, topString

    ' Loop for each row in selection.
    For RowCount = 1 To Selection.Rows.Count
      ' Loop for each column in selection.
      For ColumnCount = 1 To Selection.Columns.Count

         ' Write current cell's text to file with quotation marks.
         Print #FileNum, """" & Selection.Cells(RowCount, _
            ColumnCount).Text & """";
         ' Check if cell is in last column.
         If ColumnCount = Selection.Columns.Count Then
            ' If so, then write a blank line.
            Print #FileNum,
         Else
            ' Otherwise, write a comma.
            ' Print #FileNum, ",";
              Print #FileNum, vbTab;
         End If
      ' Start next iteration of ColumnCount loop.
      Next ColumnCount
    ' Start next iteration of RowCount loop.
    Next RowCount

    ' Close destination file.
    Close #FileNum
End Sub 
```

# iphone - 在 iPhone 中访问动态创建的文本字段的文本？

> ID：12006377
> 
> 赞同：0
> 
> 时间：2012-08-17T13:02:58.663
> 
> 标签：iphone, uitextfield

我已经动态创建了文本字段我需要访问在文本字段中输入的文本。请帮助我做到这一点。

```
 -(void)createHHDynamicFieldForYValue:(int )yVal
  {

NSString *lblStr=[[NSString alloc]initWithString:[[healthyHeartFieldsAry objectAtIndex:tagHHCount] objectForKey:@"TestName"]];

dynamicHealthyHeartLbl=[[UILabel alloc] initWithFrame:CGRectMake(50,yVal,278,45)];
dynamicHealthyHeartLbl.backgroundColor=[UIColor clearColor];
dynamicHealthyHeartLbl.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
dynamicHealthyHeartLbl.textAlignment = UITextAlignmentLeft;
dynamicHealthyHeartLbl.text=lblStr;
dynamicHealthyHeartLbl.font = [UIFont boldSystemFontOfSize:18];
[healthyHeartScrollView addSubview:dynamicHealthyHeartLbl];
[dynamicHealthyHeartLbl release];
[lblStr release];

dynamicHealthyHeartImgVw=[[UIImageView alloc] initWithFrame:CGRectMake(375, yVal, 278,kTxtImgHgVal)];
dynamicHealthyHeartImgVw.image=[UIImage imageNamed:@"birth_date.png"];
dynamicHealthyHeartImgVw.backgroundColor=[UIColor clearColor];
[healthyHeartScrollView addSubview:dynamicHealthyHeartImgVw];
[dynamicHealthyHeartImgVw release];

dynamicHealthyHeartTxtFld=[[UITextField alloc] initWithFrame:CGRectMake(380,yVal,278,kTxtImgHgVal )];
dynamicHealthyHeartTxtFld.borderStyle = UITextBorderStyleNone;
dynamicHealthyHeartTxtFld.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
dynamicHealthyHeartTxtFld.textAlignment=UITextAlignmentLeft;
dynamicHealthyHeartTxtFld.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
dynamicHealthyHeartTxtFld.font = [UIFont systemFontOfSize:18];
dynamicHealthyHeartTxtFld.backgroundColor = [UIColor clearColor];
dynamicHealthyHeartTxtFld.autocorrectionType = UITextAutocorrectionTypeNo;
dynamicHealthyHeartTxtFld.returnKeyType = UIReturnKeyDone;
dynamicHealthyHeartTxtFld.clearButtonMode = UITextFieldViewModeWhileEditing;
dynamicHealthyHeartTxtFld.autocapitalizationType=UITextAutocapitalizationTypeNone;
dynamicHealthyHeartTxtFld.delegate = self;
dynamicHealthyHeartTxtFld.placeholder=[[healthyHeartFieldsAry objectAtIndex:tagHHCount] objectForKey:@"TestName"];
dynamicHealthyHeartTxtFld.tag=tagHHCount;
[healthyHeartScrollView addSubview:dynamicHealthyHeartTxtFld];
[dynamicHealthyHeartTxtFld release];

[healthyHeart_TxtFldAry addObject:dynamicHealthyHeartTxtFld];

[dynamicHealthyHeartTxtFld release];

tagHHCount++;

}

int YVal=35;
tagHHCount=0;
NSLog(@"healthyHeartFieldsAry Count %d",[healthyHeartFieldsAry count]);
for (int i=0; i<[healthyHeartFieldsAry count]; i++)
{
    [self createHHDynamicFieldForYValue:YVal];
    YVal=YVal+80;
} 
```

在 TextField 中完成了编辑

```
 - (void)textFieldDidEndEditing:(UITextField *)textField
    {
        if(enteredHealthyHeart)
        {
            for(int i=0;i<[healthyHeart_TxtFldAry count];i++)
            {
                if(textField == [healthyHeart_TxtFldAry objectAtIndex:i])
                {
                    getHHTag=textField.tag;
                    //              UITextField *tempTxtFld=[healthyHeart_TxtFldAry objectAtIndex:getHHTag];

                dynamicHealthyHeartTxtFld=[healthyHeart_TxtFldAry objectAtIndex:getHHTag];
                if([dynamicHealthyHeartTxtFld.text length]>0)
                {
                    NSString *tempStr=dynamicHealthyHeartTxtFld.text;
                    NSLog(@"tempStr %@",tempStr);
                    if(![self checkForDecimalValue:tempStr])
                    {
                    Custom_Alert *alert=[[Custom_Alert alloc] initWithTitle:@"Alert" message:@"Please Enter Numeric Values" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [alert show];
                    [alert release];

                }
                else
                {

                    if(([tempStr intValue] >= [[[healthyHeartFieldsAry objectAtIndex:getHHTag] objectForKey:@"MinVal"] intValue])&&([tempStr intValue] <= [[[healthyHeartFieldsAry objectAtIndex:getHHTag]objectForKey:@"MaxVal"]intValue]))
                    {
                        NSLog(@"validation Succcess!!!");
                    }
                    else
                    {
                        Custom_Alert *alert=[[Custom_Alert alloc] initWithTitle:@"Alert" message:@"Please check the Details" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                        [alert show];
                        [alert release];
                    }

                }
            }

            [textField resignFirstResponder];
            //return YES;

        }
    }

} 
```

}

我想知道如何访问 textField 文本。如何识别输入了哪些文本字段文本。有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:05:10.993

只要您有对 textField 的引用，它只是一个属性

`textField.text`将返回当前输入到 textField 中的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:07:38.223

如果您在`interface`文件中声明了文本字段，则可以通过它的实例变量访问它：

```
NSLog(@"text from textfield: %@", dynamicTextField.text); 
```

或通过属性：

```
NSLog(@"text from textfield: %@", self.dynamicTextField.text); 
```

`for`但是，如果您在循环中创建许多文本字段，请执行以下操作：

在创建 textField 时，说：

```
dynamicTextField.tag = x; 
```

其中“x”是循环的递增整数。

现在，要访问它的价值，说：

```
for(UITextField *texter in self.view.subviews)
   if(texter.tag == 1)//or any other tag number you have specified on creating the textField
       NSLog(@"textfield with tag 1 contains text: %@", texter.text); 
```

您只需要记住将哪个标签号分配给所需的文本字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:18:37.033

您已经创建了**UITextFiled** Obejct 的属性，然后您可以访问它`txtFiled.text`并且`[txtFiled text]`两者都可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:10:02.780

在此方法`- (void)textFieldDidEndEditing:(UITextField *)textField`中，参数是用户输入的文本字段。

用于`textField.text`从文本字段中获取数据并`textField.tag`用于获取标签（用于识别文本字段）。

```
NSlog(@"%@",textField.text); //print the text content
NSlog(@"%d",textField.tag); //print the tag 
```

# jquery - 使用 jQuery 向链接添加参数

> ID：12006379
> 
> 赞同：1
> 
> 时间：2012-08-17T13:03:04.603
> 
> 标签：jquery, html, jquery-ui, jquery-selectors, dom-events

我是 JavaScript/jQuery 的新手。我有以下由框架自动生成的 HTML 代码。

```
<tr class="alternate-row">
    <td>17 July, 2012</td>
    <td>AM Shipment</td>
    <td>Generated</td>
    <td>
        <form method="post" action="" id="ListTruckSheets_o_7" class="basic-form" onsubmit="javascript:submitFormDisableSubmits(this)" name="ListTruckSheets_o_7">//I have the name of this form.
            <input type="hidden" name="shipmentId"  value="10310" id="ListTruckSheets_shipmentId_o_7">
            <input type="hidden" name="Report" id="truckSheet_o_7" onclick="javascript:setSelectedRoute(this, 10310);">
            <input type="hidden" name="abstractReport" id="routeAbstract_o_7" onclick="javascript:setSelectedRoute(this, 10310);">
            <input type="hidden" name="milkDeliverySchedule" id="deliverySchedule_o_7"  onclick="javascript:setSelectedRoute(this, 10310);">
            <input type="hidden" name="cancelShipment" id="ListTruckSheets_cancelShipment_o_7">
        </form>
        <td>
            <a class="buttontext" href="/myportal/control/KVGenerateTruckSheet.txt?shipmentId=10310&amp;reportTypeFlag=trucksheet"  target="_blank" onclick="javascript:setSelectedRoute(this, 10310);" title="Report">Truck Sheet Report</a>
        </td>
        <td>
            <a class="buttontext" href="/myportal/control/KVGenerateTruckSheet.txt?shipmentId=10310&amp;reportTypeFlag=abstract" target="_blank" onclick="javascript:setSelectedRoute(this, 10310);" title="Abstract Report">Route Abstract Report</a>
        </td>
        <td>
            <a class="buttontext" href="/myportal/control/MilkDeliveryScheduleReport.txt?hipmentId=10310&amp;reportTypeFlag=milkDeliverySchedule" target="_blank" onclick="javascript:setSelectedRoute(this, 10310);" title="Milk Delivery Schedule">Delivery Schedule</a>
        </td>
        <td>
            <form method="post" action="/myportal/control/cancelLMSShipment" target="_blank"    onsubmit="javascript:submitFormDisableSubmits(this)" name="ListTruckSheets_o_7_0_o_cancelShipment">
                <input name="shipmentId" value="10310" type="hidden">
            </form>
            <a class="buttontext" href="javascript:document.ListTruckSheets_o_7_0_o_cancelShipment.submit()">Cancel</a>
        </td>
</tr> 
```

使用 onclick 我调用了一个 JavaScript 函数，该函数获取 url 并向其添加参数。我有表单的名称或 ID（'ListTruckSheets_o_7'）。使用表单名称或 Id 我需要找到父 tr 并确定我想要的正确 td 并将参数设置为它的 url。这是我目前正在搞乱的代码。

```
function setSelectedRoute(existingUrl, shipmentId) {
     var form = $("input[value=" + shipmentId + "]").parent(); //formName: ListTruckSheets_o_7
     var routeId = form.find("option:selected").text();
     var resultUrl = existingUrl + "&facilityId=" + routeId;
     $('.buttontext').attr('href', resultUrl); // this is setting resultUrl to all the .buttontext class elements but I need to set resultUrl to only specific selected td.
} 
```

所以，可能是，我需要找到父 tr 并返回到特定的 td 并将 resultUrl 设置为它。我不知道该怎么做。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:11:01.697

您可以对此进行测试：

```
form
  .closest('tr')   // go parent tr of form
  .find('.specific_selected_td') // find td, here specific_selected_td is 
                                 // assumed class to selected td
                                 // you may have something different 
  .find('a')  // find anchor tag within that specific td
  .attr('href', resultUrl); // set href 
```

## 编辑后

改变

```
$('.buttontext').attr('href', resultUrl); 
```

到

```
$(existingUrl).attr('href', resultUrl); 
```

这里，`existingUrl`指的是被点击的`a`。

# php - PHP在已知字符内查找字符串

> ID：12006383
> 
> 赞同：0
> 
> 时间：2012-08-17T13:03:19.157
> 
> 标签：php, preg-match, strstr

请检查以下内容：

```
$email  = 'name@example.com';
$domain = strstr($email, '@');
echo $domain; // prints @example.com 
```

有没有办法可以在没有 .com 的情况下返回 @example？

所以，基本上我需要在一个字符串中搜索一组我不知道的字符，这些字符存在于我知道的一组字符之间。

所以，在下面我想返回“狗”：

$string = "我曾经养过一只名叫spot的宠物狗";

我可以使用以下方法获取字符串的最后一部分：

```
$pet_type = strstr($string, 'pet '); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:11:06.473

或使用 2 次爆炸

```
$email  = 'name@example.com';
        $email  = explode( '@', $email);
        $email = explode('.', $email[1]);

        $email = $email[0];
        echo $email; 
```

返回：示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:07:18.463

您自己在标签中回答问题。使用[regex/preg_match](http://php.net/manual/en/function.preg-match.php)您可以查找模式并提取匹配的值。

[这是](http://webcheatsheet.com/php/regular_expressions.php)正则表达式的介绍，它看起来很吓人但并不神圣，它很合乎逻辑:)

对于您的域示例，您可以执行以下操作：

```
preg_match("@[^\.]+", $email, $matches);
$domain = $matches[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:09:53.600

尝试`substr()`结合`strpos()`

```
$start = strpos($email, '@');
$length = strpos($email, '.com') - $start;
$domain = substr($email, $start, $length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:10:39.373

```
$email = 'name@host.com';
$at_pos = strpos($email, '@');
$dot_pos = strpos($email,'.');
$domain_length = $dot_pos - $at_pos;
$domain = substr($email,$at_pos,$domain_length);
echo $domain; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T13:11:57.840

我经常使用它，因为它使常规表达变得更加简单。您可以将 ^ 添加到 aa 范围以反转它。[^aeiou] 是除 a、e、i、o 和 u 之外的所有字符的第 th 范围。

对于您的示例，请尝试

```
@[^\.]+ 
```

这将匹配“@example”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T13:13:39.327

你可以试试：

```
$str = '';
$email  = 'name@example.com';
$domain = strstr($email, '@');
$domain = str_split($domain);
foreach($domain as $split){
$str .= $split;
if($split == '.'){
break;
}
}
echo $str; // prints @example 
```

或者：

```
$email  = 'name@example.com';
$email = strstr($email, '@');
$email = explode(".", $domain);
echo $email[0]; // prints @example 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T13:17:33.633

你需要**正则表达式**。

```
preg_match('/@(\w+)\.com/', $email, $match);
$domain = $match[1]; 
```

见：[http ://www.php.net/manual/fr/book.pcre.php](http://www.php.net/manual/fr/book.pcre.php)

基本上，在`preg_match()`调用中，我正在测试字符串`$email`是否具有以下序列：一个 at 符号，然后是使用括号 ( `(\w+)`) 在组中捕获的任何正数的单词字符，然后是一个点（转义 :）`\.`，最后是`com`. 如果匹配成功，则将捕获组放入`$match`数组中，并且可以使用它们从左到右的位置索引进行检索。

根据您在输入中期望的字符类型，可以改进匹配模式。总体而言，正则表达式比简单的字符串替换要慢，但功能要强大得多。值得学习它们的工作原理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T13:19:50.273

```
preg_match('/\@([a-zA-Z0-9-]+)?/', 'test@site-test.com', $matches);

Array ( [0] => @site [1] => site ) 
```

`$matches[0]`是你想要使用的。

# .net - 在 VB.NET 中实现属性

> ID：12006389
> 
> 赞同：1
> 
> 时间：2012-08-17T13:03:35.693
> 
> 标签：.net, vb.net

我有一堂`MyVisible`有属性的课*`Visible`*。

我有一个`MySuperVisible`实现接口的类`ISuperVisible`，它还包含属性*`Visible`*。

我应该如何在“MySuperVisible”类中实现接口“ISuperVisible”的“Visible”属性？

```
Class MySuperVisible
  Inherits MyVisible
  Implements ISuperVisible

... 

Private Property PrivatePropertyPlaceholder Implements ISuperVisible.Visible
  Get
    Return MyBase.Visible
  End Get
  Set
    MyBase.Visible = value
  End Set
End Property 
```

实施私有财产是唯一的解决方案吗？

PS。MySuperVisible 继承了 MyVisible，所以我需要实现一个已经存在于基类中的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:11:39.913

有趣的问题。我认为`Shadows`关键字可能是去这里的合适方式。这使得事情比`PrivatePropertyPlaceholder`：

```
Public Shadows Property Visible As Boolean Implements ISuperVisible.Visible
    Get
        Return MyBase.Visible
    End Get
    Set(value As Boolean)
        MyBase.Visible = value
    End Set
End Property 
```

# vb.net - 在图片框内运行另一个应用程序

> ID：12006392
> 
> 赞同：0
> 
> 时间：2012-08-17T13:03:48.917
> 
> 标签：vb.net, process

这是我用来在图片框内运行另一个应用程序的示例代码：

```
Imports System.Diagnostics
Imports System.Runtime.InteropServices
Public Class Form1
    <DllImport("user32.dll")> Public Shared Function SetParent(ByVal hwndChild As IntPtr, ByVal hwndNewParent As IntPtr) As Integer
    End Function

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        Dim Process1 As New Process
        Process1.StartInfo.FileName = "notepad.exe"
        Process1.Start()

        Do Until Process1.WaitForInputIdle = True
            Application.DoEvents()
        Loop
        SetParent(Process1.MainWindowHandle, PictureBox1.Handle)

    End Sub
End Class 
```

因此，我能够在我的 VB2010 WindowsForm 中托管另一个应用程序并且它工作正常。但问题是，在 Windows7 中，Windows 会请求权限（无论您是否要允许 EXE 运行）。单击“允许”按钮后，exe 应用程序将在它自己的窗口中打开，而不是作为 PictureBox 的子窗口

我认为当 Windows 请求许可时，它正在跳过 SetParent() API 调用。我真的很感激任何建议。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:57:52.160

很抱歉延迟发布解决方案。VBForums.com 的 EdgeMeal 帮助我找到了解决此问题的方法。您可以在此处查看详细信息：[vbforums.com 上的线程](http://www.vbforums.com/showthread.php?687825-RESOLVED-Running-another-application-inside-a-picturebox-issue-with-Windows7-permission)

而对于提升权限，也就是在应用启动时请求Admin权限，我们需要改变这个`requestedExecutionLevel`值。要更改此设置，请转到项目属性（项目菜单 --> 属性）。然后从`Application`选项卡中，单击`View Windows Settings`按钮。这将打开`app.manifest`文件。在此，更改以下行（未注释的行）：

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

至：

```
<requestedExecutionLevel  level="requireAdministrator" uiAccess="false" /> 
```

每当您运行应用程序时，这都会询问管理员权限。即使您从 IDE 运行它，它也会要求以管理员权限重新打开 IDE。

顺便说一句，我假设您将使用 VB2010。以上步骤适用于VB2010（不知道其他版本是否也一样）。

希望它对正在解决同样问题的人有所帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T09:12:55.013

`Do Until`您可以在and之间使用以下语句`SetParent`：

> System.Threading.Thread.Sleep(250)

# performance - CFScript 查询性能很差

> ID：12006396
> 
> 赞同：2
> 
> 时间：2012-08-17T13:04:01.623
> 
> 标签：performance, coldfusion

我在 ColdFusion 中运行一个非常简单的查询。如果我在 cfquery 标记中运行它，它会在大约 20 毫秒内完成。如果我在 cfscript 中使用查询对象，大约需要 500 毫秒才能完成。它似乎不是查询本身——调试输出表明查询在两种情况下都在大约 10 毫秒内完成。知道发生了什么吗？

CFQuery 版本：

```
<cfquery name="selUsers" datasource="m112dev_2">
  SELECT * FROM Users
  WHERE User_ID = 3
</cfquery> 
```

CFScript 版本：

```
<cfscript>
  q = new Query();
  q.setDataSource('m112dev_2');
  q.setName('selUsers');
  selUsers = q.execute(sql="SELECT * FROM Users
                            WHERE User_ID = 3
                     ").getResult();
</cfscript> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:07:33.317

我找到了解决方案：

## 开启组件缓存

一旦我打开它，我得到基本相同的性能。我认为问题在于 ColdFusion 实际上是在不同的组件（C:\ColdFusion9\CustomTags\com\adobe\coldfusion\base.cfc）中运行查询，所以如果没有缓存路径解析，它每次都必须找到该 CFC。

# c# - 如何适应移动设备

> ID：12006397
> 
> 赞同：1
> 
> 时间：2012-08-17T13:04:00.927
> 
> 标签：c#, asp.net, css, mobile

我已经建立了一个在 PC、笔记本电脑和 Ipad 设备上功能齐全的网站。我想把它扩展到手机上。我面临的问题是我不确定最好的方法。我目前在我的网站中使用主题。我认为最好的方法是检测设备并根据它是手机还是 PC 来更改主题。我发现的许多示例都显示了在链接样式表时如何执行此操作。

`<link rel="stylesheet" media="screen and (min-device-width: 800px)" href="800.css" />`

我应该通过链接的样式表来做到这一点，还是我可以以某种方式使用主题来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:41:54.513

大多数`Desktop + Mobile`主题的工作方式类似于以下代码。最好的方法是使用`@media`查询（[检查这个链接](http://css-tricks.com/css-media-queries/)和[这个](http://css-tricks.com/resolution-specific-stylesheets/)）。与其使用更多样式表，不如只使用一个。

```
@media screen and (min-device-width: 801px) {
    /* Your style here */
}

@media screen and (max-device-width: 800px) {
    /* Your style here for mobile  */
} 
```

# python - Python 鼻子测试跳过某些测试

> ID：12006400
> 
> 赞同：13
> 
> 时间：2012-08-17T13:04:10.843
> 
> 标签：python, pylons, nosetests

我正在为用 python 编写的 Web 应用程序进行测试。

假设我的 test_login.py 模块中有 5 个测试。

每一个测试都是一个类。

通常有一个扩展 TestFlow 类的基础测试，这是我们预定义的测试类。

然后此模块中的其他测试扩展了该基础测试。

例如 ：

```
#The base test 

TestLogin(TestFlow):
    #do login_test_stuff_here

#Another test in the same module

TestAccountDetails(TestLogin)
    #do account_details_test_stuff_here

... 
```

它实际上非常方便，因为为了测试，例如 AccountDetails 用户必须登录，所以我可以从 TestLogin 测试继承，我准备以登录用户的身份测试其他功能。

所有测试都在 Project/project/tests 文件夹中。

我们使用带有选项 --with-pylons 的鼻子测试来运行测试。

我的问题是，是否有办法将某些 TestClass 标记为“不要测试这个”。

因为我不想浪费时间直接执行这些“基础测试”，因为它们将由继承自它们的其他测试执行。

这些测试可能会有音调，我想尽可能地节省每一秒。

我已经找到了类似 Skip、SkipTest 或 @nottest 的东西，但这些仅适用于**ceratin** TestClass 中的 test_methods，所以我认为它不会在这里工作，如果我对每个测试用例都有一个类的话。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T10:14:25.373

[通过指定属性http://nose.readthedocs.org/en/latest/plugins/attrib.html](http://nose.readthedocs.org/en/latest/plugins/attrib.html)可以完成如下形式的鼻子测试

> 通常在测试时，您会希望根据标准而不是简单地通过文件名来选择测试。例如，您可能希望运行除慢速测试之外的所有测试。您可以通过在测试方法上设置属性来使用属性选择器插件来做到这一点。这是一个例子：
> 
> ```
> def test_big_download():
>     import urllib
>     # commence slowness...
> 
> test_big_download.slow = 1 
> ```
> 
> 分配属性 slow = 1 后，您可以通过运行排除该测试和所有其他具有 slow 属性的测试
> 
> ```
> $ nosetests -a '!slow' 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-19T06:50:26.830

实际上，您也可以将 skiptest 用于 Classes。

```
import unittest

@unittest.skip("Class disabled")
class TestLogin(TestFlow):
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T14:29:47.450

[http://nose.readthedocs.org/en/latest/writing_tests.html](http://nose.readthedocs.org/en/latest/writing_tests.html)

> 编写测试
> 
> 与 py.test 一样，鼻子测试不必是 unittest.TestCase 的子类。默认情况下，与配置的 testMatch 正则表达式 ((?:^|[\b_\.-])[Tt]est) 匹配的任何函数或类 - 即在单词边界处具有 test 或 Test 或在 - 或 _ 之后) 并且存在于也匹配该表达式的模块中，将作为测试运行。为了与遗留的 unittest 测试用例兼容，nose 也会像 unittest 一样从 unittest.TestCase 子类加载测试。与 py.test 一样，nose 按照它们在模块文件中出现的顺序运行功能测试。TestCase 派生的测试和其他测试类按字母顺序运行。

注意上面的正则表达式和规则。将您的函数/方法/类命名为与 regex 不匹配，它们将不会运行。

话虽如此，我不建议您建议为测试链接继承。这是沮丧和混乱的秘诀。

你可能会更好地制作一个 mixin 类，或者定义一个没有任何实际测试的基类 - 但有很多继承类可以调用和使用的辅助函数。

如果您查看更流行的软件包的测试，它们几乎都使用这种方法。

# c# - 方法返回一个不在表中的值

> ID：12006404
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:04:35.293
> 
> 标签：c#, methods, return-value

此方法采用输入参数（电子邮件地址）。如果它存在于表中，则返回值（电子邮件），如果不存在，则不应返回任何值，但此方法始终返回相同的值（参数）。

我错过了什么吗？

```
private static string findEmailSubscription(string emailAddress)
    {
        try
        {
            //Fetch email Address
            using (DataAccess data = new DataAccess("Email"))
            {
                DynamicEntity[] emails = data.Adapter.Execute(
                    "SELECT EmailAddress FROM table " +
                    "WHERE EmailAddress=@EmailAddress; ",
                    ExecuteCommandType.Text,
                    new Object[,] {
                    {"EmailAddress", emailAddress ?? (object)DBNull.Value}
                });
            }

            return emailAddress;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:06:40.010

看看你的代码：

```
return emailAddress; 
```

那是无条件的。你根本没有*使用*你的`emails`变量。你期望这如何工作？（并不是说这无论如何都可以是您的完整代码，因为您有一个`try`没有`catch`或`finally`...的块）

请注意，具有返回类型的方法不能“不返回任何值”。它永远不会返回（不好）、抛出异常或返回值。这就是它所能做的。它可以返回一个空引用......这是你想要它做的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:08:20.557

您返回的值与作为 parameter 传递的值相同。

```
findEmailSubscription(string emailAddress)
(..)
return emailAddress; 
```

你应该做

```
return emails ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:14:36.110

您总是返回电子邮件地址。您在方法主体中所做的事情不会以任何方式改变 retun 值。如果您想根据查询返回的内容返回某些内容，您需要检查查询结果并从那里构造一个返回值（即，如果找到则返回电子邮件地址，如果没有则返回 null）。

如果您想要原始结果集，您可以随时返回`emails`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:00:05.603

感谢 Jon 给了我极好的提示。我重新编写了运行良好的方法：

```
public string previousEmail   //Global variable - gets value from other source

public string FindEmailSubscription()
{
   try
   {
      string email = null;

      using (DataAccess data = new DataAccess())
      {            
          data.Execute(
               "SELECT EmailAddress FROM table " +
                "WHERE EmailAddress=@EmailAddress; ",
                new SqlParameter("@EmailAddress", previousEmail));

          if (data.Read())
              email = data.GetValue<string>(0);
      }
      return email;
   }
   catch (Exception ex)
   {
       MessageBox.Show(ex);
   }
} 
```

# android - iframe 无法在安卓手机上播放视频

> ID：12006409
> 
> 赞同：0
> 
> 时间：2012-08-17T13:05:18.927
> 
> 标签：android, iframe, video-streaming

我有一个不寻常的问题。它可能更多的是关于移动而不是 html/php。问题在于 iframe。

我在 iframe 中有一个视频播放器。当我单击播放按钮时 - 在所有浏览器上都可以正常工作，但在 Android 手机上却不行。它已显示，但单击后 - 未执行任何操作。但是 - 当我单击并按住按钮 > 菜单出现 > 我选择打开并且它工作正常。太诡异了...

一般来说，我在其中一个 html 页面上有这个：

```
 <iframe src="http://jupiters.captive-portal.com/generic/ign-games/1.html" name="i1" target="_top" frameset frameborder=0 id="i1"></iframe> 
```

此 iframe 中的内容部分在 php / 部分在 html 中。这就是全部：

```
<? 
$vidurl1 = "http://content.captive-portal.com/files/video/movie-news/vid1.mp4";
$thumburl1 = "http://content.captive-portal.com/files/video/movie-news/thumb1.jpg";
?> 
```

@import url("http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/ui-lightness/jquery-ui.css");

```
 <a href="<?=$vidurl1;?>" class="player" style="display:block;width:480px;height:360px;">
                <img src="<?=$thumburl1;?>" alt="Thumbnail for video"/>
            </a>

                <script type="text/javascript">
                    var video = document.createElement("video"),
                    idevice = /ip(hone|ad|od)/i.test(navigator.userAgent),
                    noflash = flashembed.getVersion()[0] === 0,
                    simulate = !idevice && noflash;
                    // REMOVE THE FOLLOW LINE TO DISABLE THE CODEC CHECK
                    simulate = simulate &&  !!(video.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/, ''));
                    flowplayer("a.player", {
                        src:"http://video.captive-portal.com/flowplayer/flowplayer.commercial-3.2.11.swf",
                        wmode: "opaque"
                    }, {
                        key: "#$4871c81e02586ce7fdb",
                        clip: {
                            autoPlay: true,
                            scaling: "fit",
                            }
                    }
                    ).ipad( controls: true, simulateiDevice: simulate );

                </script> 
```

我知道这可能意义不大，但是它在所有浏览器上都可以正常工作，但在 Android 上却不行。有什么我应该知道的才能让它工作吗？也许 iframe 会阻止播放器？有什么替代方法吗？

使用这种方法的原因是我每周需要将这个 iframe 中的内容实现到很多页面，我不想修改 5 个页面。相反，我修改了由 iframe 注入的页面，它在我提到的 5 个页面上显示更新。这就是它在我的测试模式下的工作方式：[测试页面](http://test.captive-portal.com/ign/ign-movies/1.html)

这对我来说至关重要，因此我将非常感谢发布的任何想法。先感谢您。P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:10:06.817

好的，我已经解决了这个问题。这是玩家的错。此选项适用于不同的播放器，因此如果有人遇到相同的问题，我建议更换播放器。不工作的是flowplayer。

# xml - 列出索引错误（即使它存在）？

> ID：12006413
> 
> 赞同：0
> 
> 时间：2012-08-17T13:05:33.390
> 
> 标签：xml, google-app-engine, xml-parsing

我正在运行一个 for 循环来从一些 XML 中获取内容，它工作正常，直到我达到第 29 次迭代。那时它给了我这个错误：

```
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
  return self.handle_exception(e, self.app.debug)   
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
  return method(*args, **kwargs)   
File "J:\Art & Graphic Design\Graphic Design\Websites\lawvoter-dev\cron_congressman.py", line 64, in get
  birthday      = re.findall("<birthday>(.*)</birthday>",element)[0] 
IndexError: list index out of range 
```

代码是：

```
for element in members:
            title         = re.findall("<title>(.*)</title>",element)[0]
            role          = re.findall("<role_type_label>(.*)</role_type_label>",element)[0]
            name_sortable = re.findall("<name_sortable>(.*)</name_sortable>",element)[0]
            firstname     = re.findall("<firstname>(.*)</firstname>",element)[0]
            lastname      = re.findall("<lastname>(.*)</lastname>",element)[0]
            gender        = re.findall("<gender_label>(.*)</gender_label>",element)[0]
            birthday      = re.findall("<birthday>(.*)</birthday>",element)[0]
            party         = re.findall("<party>(.*)</party>",element)[0]
            state         = re.findall("<state>(.*)</state>",element)[0]
            description   = re.findall("<description>(.*)</description>",element)[0]
            start_date    = re.findall("<startdate>(.*)</startdate>",element)[0]
            end_date      = re.findall("<enddate>(.*)</enddate>",element)[0]
            website       = re.findall("<website>(.*)</website>",element)[0]
            bioguideid    = re.findall("<bioguideid>(.*)</bioguideid>",element)[0]
            osid          = re.findall("<osid>(.*)</osid>",element)[0]
            pvsid         = re.findall("<pvsid>(.*)</pvsid>",element)[0]
            twitterid     = re.findall("<twitterid>(.*)</twitterid>",element)[0]
            youtubeid     = re.findall("<youtubeid>(.*)</youtubeid>",element)[0]

            member = Congressman(title=title, role=role, name_sortable=name_sortable, firstname=firstname, lastname=lastname, gender=gender, birthday=birthday, party=party, state=state,
                                 description=description, start_date=start_date, end_date=end_date, website=website, bioguideid=bioguideid, osid=osid, pvsid=pvsid, twitterid=twitterid, youtubeid=youtubeid)
            member.put() 
```

我真的不明白为什么会弹出这个错误？它在前 29 次迭代中总是能正常工作吗？以防万一，数据模型中的每个元素也设置为“default=None”。但是，当我查看 XML 本身并转到发生错误的确切行时，该值实际上就在那里。任何人都知道为什么即使值存在它也会出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:15:38.423

看起来像

```
birthday      = re.findall("<birthday>(.*)</birthday>",element)[0] 
```

返回一个空列表，您正在尝试提取不在列表中的第一个元素，它会抛出

```
IndexError: list index out of range 
```

像这儿：

```
>>> l = []
>>> l[0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
>>> 
```

编辑：

```
import re, logging

def findelement(item, element):
    i = re.findall(item, element)
    if not i:
        logging.info('no item found for %s with element %s' %(item, element))
        return ''
    return i[0]

for element in members:
    title = findelement("<title>(.*)</title>", element)
    ... 
```

# php - 来自 HTML 表单的 MySQL 查询 - 输入可以使用通配符吗？

> ID：12006414
> 
> 赞同：2
> 
> 时间：2012-08-17T13:05:32.847
> 
> 标签：php, mysql, user-input, wildcard

我已经看过了，虽然我已经看到了很多关于在原始 PHP 中使用通配符的解释，但是当用户输入想要使用通配符时，我没有找到任何可以帮助我的东西。我对 PHP 和 MYSQL 很陌生。应该使用哪个符号？

基本上，用户从 MYSQL 数据库请求给定等级的数据，可以是简单的数字或数字后跟字母或加号。我希望他们能够专门请求 6a（工作正常）或 6 后跟通配符以返回 6a、6a+、6b 等（我不知道该怎么做）。

更多详情：

我有以下表格：

```
<form name="gradereturn" method="POST" action="gradequery.php">
<input type="text" name="Grade" value="Grade">
<input type="submit" name="Submit1" value="Retrieve"> 
```

和 PHP：

```
<?php
$grade = $_POST['Grade'];
if (isset($_POST['Submit1'])) {
    mysql_connect("localhost", "**details**", "**details**") or die(mysql_error());
    mysql_select_db("**details**") or die(mysql_error());
    $result = mysql_query("SELECT * FROM routes WHERE Grade='$grade'") or die(mysql_error());  
    $row = mysql_fetch_array( $result );
    echo "Line - Colour - Grade<br />";
    while($row = mysql_fetch_array($result)){
        echo $row['Line']. " - ". $row['Colour']. " - ". $row['Grade'];
        echo "<br />";
    }
}
else print ("Please enter your required grade above");
?> 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:47:51.043

使用`LIKE`并确保您也逃脱`$grade`：

```
$grade = mysql_real_escape_string($grade);
$sql = "SELECT * FROM routes WHERE Grade LIKE '{$grade}'";
$result = mysql_query($sql); 
```

然后他们可以指定`6`或`6%`或`6?`等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T13:17:44.910

You will want to use the LIKE command.

```
$result = mysql_query("SELECT * FROM routes WHERE Grade LIKE '$grade%'") 
```

This tells SQL to find all entries in `routes` where `Grade` starts with `$grade`.

For more information on `LIKE` - [MySQL Reference](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

# javascript - 接受 POST 请求的 Node.js 服务器

> ID：12006417
> 
> 赞同：66
> 
> 时间：2012-08-17T13:05:43.227
> 
> 标签：javascript, node.js, nodes

我试图让 javascript 与 Node.js 服务器通信。

**POST 请求（网络浏览器）**

```
var http = new XMLHttpRequest();
var params = "text=stuff";
http.open("POST", "http://someurl.net:8080", true);

http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

alert(http.onreadystatechange);
http.onreadystatechange = function() {
  if (http.readyState == 4 && http.status == 200) {
    alert(http.responseText);
  }
}

http.send(params); 
```

现在 Node.js 服务器代码如下所示。在用于 GET 请求之前。我不确定如何使它与 POST 请求一起使用。

**服务器 (Node.js)**

```
var server = http.createServer(function (request, response) {
  var queryData = url.parse(request.url, true).query;

  if (queryData.text) {
    convert('engfemale1', queryData.text, response);
    response.writeHead(200, {
      'Content-Type': 'audio/mp3', 
      'Content-Disposition': 'attachment; filename="tts.mp3"'
    });
  } 
  else {
    response.end('No text to convert.');
  }
}).listen(8080); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-08-17T14:23:10.980

以下代码显示了如何从 HTML 表单中读取值。正如@pimvdb 所说，您需要使用 request.on('data'...) 来捕获正文的内容。

```
const http = require('http')

const server = http.createServer(function(request, response) {
  console.dir(request.param)

  if (request.method == 'POST') {
    console.log('POST')
    var body = ''
    request.on('data', function(data) {
      body += data
      console.log('Partial body: ' + body)
    })
    request.on('end', function() {
      console.log('Body: ' + body)
      response.writeHead(200, {'Content-Type': 'text/html'})
      response.end('post received')
    })
  } else {
    console.log('GET')
    var html = `
            <html>
                <body>
                    <form method="post" action="http://localhost:3000">Name: 
                        <input type="text" name="name" />
                        <input type="submit" value="Submit" />
                    </form>
                </body>
            </html>`
    response.writeHead(200, {'Content-Type': 'text/html'})
    response.end(html)
  }
})

const port = 3000
const host = '127.0.0.1'
server.listen(port, host)
console.log(`Listening at http://${host}:${port}`) 
```

如果您使用[Express.js](http://expressjs.com/)和[Bodyparser](https://www.npmjs.com/package/body-parser)之类的东西，那么它看起来像这样，因为 Express 将处理 request.body 连接

```
var express = require('express')
var fs = require('fs')
var app = express()

app.use(express.bodyParser())

app.get('/', function(request, response) {
  console.log('GET /')
  var html = `
    <html>
        <body>
            <form method="post" action="http://localhost:3000">Name: 
                <input type="text" name="name" />
                <input type="submit" value="Submit" />
            </form>
        </body>
    </html>`
  response.writeHead(200, {'Content-Type': 'text/html'})
  response.end(html)
})

app.post('/', function(request, response) {
  console.log('POST /')
  console.dir(request.body)
  response.writeHead(200, {'Content-Type': 'text/html'})
  response.end('thanks')
})

const port = 3000
app.listen(port)
console.log(`Listening at http://localhost:${port}`) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-23T11:22:18.797

在 nodejs 中接收 POST 和 GET 请求：

1).服务器

```
 var http = require('http');
    var server = http.createServer ( function(request,response){

    response.writeHead(200,{"Content-Type":"text\plain"});
    if(request.method == "GET")
        {
            response.end("received GET request.")
        }
    else if(request.method == "POST")
        {
            response.end("received POST request.");
        }
    else
        {
            response.end("Undefined request .");
        }
});

server.listen(8000);
console.log("Server running on port 8000"); 
```

2）。客户 ：

```
var http = require('http');

var option = {
    hostname : "localhost" ,
    port : 8000 ,
    method : "POST",
    path : "/"
} 

    var request = http.request(option , function(resp){
       resp.on("data",function(chunck){
           console.log(chunck.toString());
       }) 
    })
    request.end(); 
```

# android - Android - 取消警报时是否有延迟？

> ID：12006420
> 
> 赞同：0
> 
> 时间：2012-08-17T13:05:51.723
> 
> 标签：android, alarmmanager, alarm

其他一些 Android 开发人员能否确认或否认我在使用警报管理器时看到的内容。我每 60 秒设置一次闹钟。然后我随机取消警报，但都在 60 秒之前。当我取消有时长达 30 秒的警报时，我看到了延迟。

基本上，设置闹钟后 30-40 秒，我取消了闹钟，但它仍然响起。我假设警报管理器正在后台取消警报，并且可能需要一段时间才能完成该过程。其他人可以确认这是有道理的还是听起来像有其他问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:52:13.357

所以我的问题的真正答案是否定的！取消警报时没有明显的延迟。

事实证明我错了（谢谢Zapl！）。我正在取消意图，但我错过了一个刚刚被触发的新意图，其中有一个稍微更新和不同的意图动作。感谢您让我知道我取消警报缓慢的想法是不正确的。

# iphone - 在 iPhone 中使用 Event Kit 删除事件

> ID：12006421
> 
> 赞同：2
> 
> 时间：2012-08-17T13:06:04.313
> 
> 标签：iphone, ios, ekeventkit, ekevent

我在我的 iOS 应用程序中使用 Event Kit 并使用 Event Kit 创建一个事件。我可以创建它，但我也想赋予删除的能力。但我无法做到这一点。我知道 EKEventStore 有一种删除事件的方法，但我无法创建事件对象。我将事件标识符作为字符串，但我无法使用它创建事件对象。有人可以指导我这样做吗？

问候潘卡伊

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T06:11:19.550

[将此](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventClassRef/Reference/Reference.html)称为event.eventIdentifier更改值。因此，您必须跟踪您为事件设置的 event.title 并访问该事件并将其删除

```
NSDate *startDate = <EVENT_START_DATE>;
NSDate *endDate = <EVENT_END_DATE>;

NSPredicate *predicateForEvents = [eventStore predicateForEventsWithStartDate:startDate endDate:endDate calendars:[NSArray arrayWithObject:[eventStore defaultCalendarForNewEvents]]];
//set predicate to search for an event of the calendar(you can set the startdate, enddate and check in the calendars other than the default Calendar)

NSArray *events_Array = [eventStore eventsMatchingPredicate: predicateForEvents];                        
//get array of events from the eventStore

for (EKEvent *eventToCheck in events_Array) 
{
    if( [eventToCheck.title isEqualToString: @"yourEventTitle"] ) 
    {
         NSError *err;
         BOOL success = [eventStore removeEvent:eventToCheck span:EKSpanThisEvent error:&err];
         NSLog( @"event deleted success if value = 1 : %d", success );
         break;

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T13:31:42.900

当你创建一个事件时，像这样保存它的 id：

```
NSString* str = [[NSString alloc] initWithFormat:@"%@", event.eventIdentifier]; 
```

传递 id 删除事件，这里是代码

```
EKEventStore* store = [[EKEventStore alloc] init];
    EKEvent* event2 = [store eventWithIdentifier:str];
    if (event2 != nil) {  
        NSError* error = nil;
        [store removeEvent:event2 span:EKSpanThisEvent error:&error];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-08T23:29:03.447

在 iOS 上使用 eventWithIdentifier查看[EKEvent](https://stackoverflow.com/questions/12820501/ekevent-with-eventwithidentifier-on-ios)

我还发现以下代码有效

```
// eventWithIdentifier returns nil for the external identifier
//EKEvent *eventToRemove = [eventStore eventWithIdentifier:self.expiryCalendarExternalIdentifier];
// So I'm using this method, which seems to work.
- (EKEvent *) getEventForIdentifer: (NSString *) eventIdentifier {
    EKEventStore *eventStore = [Settings getEventStore];
    NSArray *items = [eventStore calendarItemsWithExternalIdentifier:eventIdentifier];
    if ([items count] == 1) {
        return items[0];
    } else {
        [LogFile write:@"getEventForIdentifer: more than one occurrence of event, or no event!"];
        return nil;
    }
} 
```

此代码的示例（未经测试）：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];

EKEvent *newCalendarEvent = [EKEvent eventWithEventStore:eventStore];
// Just because we created an EKEvent, the calendarItemExternalIdentifier property of that event has been set.

// I store calendarItemExternalIdentifier (an NSString) in a Core Data
// object, and later fetch it back from core data. 
// Something like:
NSManagedObjectSubclass *coreDataObject = ...
coreDataObject.externalId = newEvent.calendarItemExternalIdentifier;

// So, now let's say we pull the calendarItemExternalIdentifier string from 
// Core Data, and want to remove the event.

NSString *externalId = ... // get calendarItemExternalIdentifier from Core Data

// getEventForIdentifer method from above
EKEvent *eventToRemove = [self getEventForIdentifer:externalId];

NSError *anError = nil;
[eventStore removeEvent:eventToRemove span:EKSpanThisEvent error:&anError];
if (anError) {
   // Something has gone wrong. Report the error.
} 
```

# database - 将嵌套数据保存在数据库中

> ID：12006423
> 
> 赞同：1
> 
> 时间：2012-08-17T13:06:09.417
> 
> 标签：database, db2

我有一些分层数据（目前有 6 个级别）。每个级别都有不同的属性。

我为每个级别添加了一个单独的表，并在每个表中为父级别添加了一个外键。但我不知道这是否是正确的方法。

```
Level1: id, ColA, ColB, ColC
Level2: id, ColD, ColE, ColF, level1_Id
Level3: id, ColG, ColH, level2_Id
Level4: id, ColI, ColJ, ColK, ColL, level3_Id
Level5: id, ColM, level4_Id
Level6: id, ColN, ColO, level5_Id 
```

随着时间的推移会有更多的关卡。因此设计必须灵活，以便我可以添加或删除一些级别。当然，性能必须保持。

我应该遵循哪种设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:21:41.933

恐怕这不是最好的方法，因为它不够灵活，无法为您提供无限的关卡和性能。

这个问题被称为“分层数据模型”，有几种方法可以实现它。大多数可移植格式称为“嵌套集”模型。其他模型是邻接模型，以及来自 Oracle 和 Microsoft 的供应商特定模型。

这是可以帮助您入门的内容

[http://www.evanpetersen.com/item/nested-sets.html](http://www.evanpetersen.com/item/nested-sets.html) http://www.sqlsummit.com/AdjacencyList.htm

# php - mysql查询查找类别

> ID：12006428
> 
> 赞同：0
> 
> 时间：2012-08-17T13:06:21.373
> 
> 标签：php, mysql, mysqli

我有一个这样的产品表

```
id   |   name   | category 
--------------------------
1    |   name1  |  2,1,5,8,9
2    |   name2  |  2,1
3    |   name3  |  5,8 
```

我有一个像这样的类别表

```
id   |   catname   
----------------
1    |   cat_name1  
2    |   cat_name2  
5    |   cat_name3 
8    |   cat_name3 
9    |   cat_name3 
```

每个产品可以有多个类别。与该产品关联的类别在产品表中名为“类别”的行中保存为“1,5,8,7”，其中每个代表类别表的 id。

现在我想显示特定类别下的所有产品。

我对处理这个问题的查询有点困惑。

这是保存此类数据的正确格式吗？请指教

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:12:37.207

关联表：产品类别将简化您想要的查询。

假设 ProductCategory 表包含列（prod_id、cat_id），您的查询（基于类别名称）将是：

```
 SELECT p.name FROM products p,product_category pc ,category c
  WHERE c.name='your_categ' 
  AND c.id = pc.categ_id
  AND p.id = pc.prod_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:08:14.190

我会为产品类别映射添加一个额外的表。

```
SELECT p.name 
 FROM products p 
   JOIN product_category pc ON  p.id=pc.prod_id 
   JOIN Category c ON c.id = pc.categ_id
 WHERE c.name='Category' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T13:10:24.180

不，这不是存储产品类别的正确方法，表格未根据 3NF 进行规范化。由于一个产品可以属于许多类别并且一个类别被分配给许多产品，因此您必须有一个 M:N（多对多）表，例如。`products_categories(prod_id, categ_id)`而是搜索此表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T13:19:50.603

```
SELECT * 
FROM products 
WHERE 
    category LIKE "ID,%" OR 
    category LIKE "%,ID,%" OR 
    category LIKE "%,ID" 
```

上面的查询应该可以工作 - 注意性能问题，因为其他人建议链接表是唯一的方法。

# asp.net-mvc-3 - 如何使用自定义用户主体获取自定义角色提供程序

> ID：12006429
> 
> 赞同：2
> 
> 时间：2012-08-17T13:06:24.547
> 
> 标签：asp.net-mvc-3, roleprovider, role, security-roles

长期潜伏者第一次海报..

尝试为 MVC 实现一个简单的自定义角色和成员资格提供程序。

已经实现了角色和成员资格提供者类并将它们连接到我的 web.config 中。添加了代码来针对自定义数据库验证我的用户，它工作正常。

但是，我不喜欢我的角色提供者在每个请求上访问数据库的方式，所以我添加了一些代码来尝试从身份验证票证中读取它，如下所示：

自定义角色提供者：

```
public override string[] GetRolesForUser(string username)
   {
       if (HttpContext.Current.User != null)
       {
           return ((UserPrincipal)HttpContext.Current.User).Roles.ToArray();
       }
       else
       {
           UserPrincipal user = orchestrator.GetUserByLoginID(username);
           return user.Roles.ToArray();
       }
   } 
```

然后我在 global.asax 中添加了这段代码，以使用自定义用户主体对象将角色和其他一些有用的用户信息保存到 cookie 中：

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e) 
    {
        HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket =      FormsAuthentication.Decrypt(authCookie.Value);

            JavaScriptSerializer serializer = new JavaScriptSerializer();

            UserPrincipalModel userFromTicket = serializer.Deserialize<UserPrincipalModel>(authTicket.UserData);

            UserPrincipal newUser = new UserPrincipal();
            newUser.UserId = userFromTicket.UserId;
            newUser.FullName = userFromTicket.Fullname;
            newUser.Email = userFromTicket.Email;
            newUser.Roles = userFromTicket.Roles;
            newUser.Identity = new GenericIdentity(userFromTicket.Username);

            HttpContext.Current.User = newUser;
        }
    } 
```

我的用户主体类：

```
 public class UserPrincipal : IPrincipal
{
    public UserPrincipal() { }
    public UserPrincipal(int userId, string userName, string fullName, string password)
    {
        UserId = userId;
        UserName = userName;
        FullName = fullName;
        Password = password;
    }
    public virtual int UserId { get; set; }
    public virtual string UserName { get; set; }
    public virtual string FullName { get; set; }
    public virtual string Email { get; set; }
    public virtual string Password { get; set; }        
    public virtual IEnumerable<string> Roles { get; set; }

    public virtual IIdentity Identity { get; set; }

    public virtual bool IsInRole(string role)
    {
        if (Roles.Contains(role))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

   //public string[] GetRolesForUser()
   //{
   //    return Roles;
   //}
} 
```

但是，当我运行此命令时，当角色提供者尝试访问 cookie 中的自定义 UserPrincipal 对象时，出现以下错误

“无法将‘System.Web.Security.RolePrincipal’类型的对象转换为‘MyApp.Domain.UserPrincipal’类型”

就像自定义角色提供者使用自己的角色特定主体覆盖存储在票证中的自定义用户主体一样。

只是想知道我正在尝试做的事情是否有缺陷，或者是否有更简单的方法。不想重新发明轮子。

任何人都有一个自定义角色提供程序的示例，它不会在每次请求角色时都访问数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:49:03.650

在这里更改：

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e) 
```

到这里：

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs e) 
```

基本上，默认角色提供程序的内部工作是在您设置 HttpContext.Current.User 属性后设置它，从而覆盖您所做的。

您也可以尝试清除默认角色提供程序，它似乎在 mvc3 和 asp.net Web 表单中工作，但在 mvc 4 中失败。

```
<membership>
  <providers>
    <clear />
  </providers>
</membership>
<profile>
  <providers>
    <clear />
  </providers>
</profile>
<roleManager enabled="false">
  <providers>
    <clear />
  </providers>
</roleManager> 
```

# javascript - knockout.js 映射导致 IE9 上的无限递归

> ID：12006433
> 
> 赞同：1
> 
> 时间：2012-08-17T13:06:33.533
> 
> 标签：javascript, internet-explorer, recursion, knockout.js, knockout-mapping-plugin

通过我的 knockout.js 映射，我在 IE 上进行了无休止的递归。更熟悉 KO 的人可以发现我做错了什么吗？

我有以下 knockout.js 映射：

```
 var mapping = {
            create: function(options) {
                return new MyViewModel(options.data);
            },
            'ChildItems': {
                create: function(options) {
                    return new ChildVM(options.data);
                }
            }
        } 
```

当我渲染页面时。5 次 IE 中有 1 次以以下无限递归堆栈结束（导致“SCRIPT28：堆栈空间不足”）。IE 的调用栈：

```
 fromJS
    MyViewModel
    create
    Anonymous Function
    withProxyDependentObservable
    createCallback
    updateViewModel
    fromJS
    MyViewModel
    create
    Anonymous Function
    withProxyDependentObservable
    createCallback
    updateViewModel
        ... 
```

我的视图模型构造函数：

```
 function MyViewModel(data) {
            var self = this;
            this.$type = 'MyViewModel';

            [some observables]         
            ...

            ko.mapping.fromJS(data, mapping, this);
        } 
```

视图模型的初始化是通过调用 json 端点来完成的：

```
 $.ajax({
                url: 'http://my.end/point',
                type: 'POST',
                data: JSON.stringify(payload),
                contentType: 'application/json; charset=utf-8',
                success: function(data) {
                    window.vm = ko.mapping.fromJS(data, mapping);
                    ko.applyBindings(window.vm)
                    }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:24:23.847

您应该将映射对象划分为 2 个对象。第一个用于映射视图模型，第二个用于子视图。

```
var mapping = {
            create: function(options) {
                return new MyViewModel(options.data);
            }
        }

var childrenMapping = {
                'ChildItems': {
                    create: function(options) {
                        return new ChildVM(options.data);
                    }
                }
} 
```

您的 ajax 请求保持不变。更新 MyViewModel 函数以使用 childrenMapping ：

```
 function MyViewModel(data) {
            var self = this;
            this.$type = 'MyViewModel';

            [some observables]         
            ...

            ko.mapping.fromJS(data, childrenMapping, this);
        } 
```

问题的根本原因是映射的递归调用。当您调用`ko.mapping.fromJS(data, mapping);`淘汰赛调用创建规则时，将创建 MyViewModel 对象。在 MyViewModel 的构造函数中，`ko.mapping.fromJS`由于使用相同的映射选项，您调用了相同的创建规则，该规则创建了使用相同选项调用的 MyViewModel 对象`ko.mapping.fromJS`。

# javascript - 带有缩放脚本事件的图表 HTML

> ID：12006439
> 
> 赞同：0
> 
> 时间：2012-08-17T13:06:56.450
> 
> 标签：javascript, html, database, charts

我正在寻找一个 html 应用程序的图表（如果可能，免费），它可以放大和缩小，但有一个特殊的事件，缩放事件。我需要这个，因为我无法在数据库中加载包含 32000000 条记录的图表中的所有点，但我可以创建预览之类的东西，如果用户想要它，请放大它并加载该范围内的所有点。

我有一个关于机器的第二到第二个记录的表，在 3 天内我得到了大约 32M 的记录，所以用户不可能全部阅读，而且看一个非常硬的图表是完全没用的。有时，用户可能需要非常精确地查看某个时刻，这就是想法，进行缩放并加载它（Json、Ajax 等）。

任何想法？

PD：请不要闪光

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:34:34.827

Flot 可能是您想要的：[http ://code.google.com/p/flot/](http://code.google.com/p/flot/)

它支持可以让您制作缩放功能的选择事件：http: [//people.iola.dk/olau/flot/examples/zooming.html](http://people.iola.dk/olau/flot/examples/zooming.html)

# javascript - 基于jQuery的下拉导航菜单

> ID：12006440
> 
> 赞同：1
> 
> 时间：2012-08-17T13:06:56.700
> 
> 标签：javascript, jquery, drop-down-menu, navigation

我正在尝试创建动画（几乎没有）下拉菜单。如果您查看我的页面的源代码，则可以使用 JS 文件。我有它基本上工作。

**我的问题是**：当我将鼠标悬停在主菜单中的某个内容上，然后直接向下进入弹出（向下）的子菜单时，如果我将鼠标悬停在该菜单中的某个内容上并离开它会留下来。

[http://lmiah.site11.com/slide%20down%20box%20menu%20new/mainTest.html](http://lmiah.site11.com/slide%20down%20box%20menu%20new/mainTest.html)

**为了减少混淆，我将举一个直接的例子**：

如果您将鼠标悬停在“职业”上，然后直接向下移动，然后将鼠标悬停在“员工推荐”上，然后将鼠标完全从菜单上移开，菜单仍然会保留，直到您再次将鼠标悬停在“职业”上。

任何帮助，将不胜感激！

**编辑：**我发现它与`a href="# class="subMenuFloat"`每当我将鼠标悬停在这些链接上（它们是隐藏下拉菜单中的链接）有关时，我的下拉 div 仍然存在。我不知道为什么会发生这种情况，但如果我只是将鼠标悬停在 li 上并错过了链接，它就会正确退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:29:19.287

这是在 jquery 中使用悬停功能时的常见问题，因为您使用的选择器实际上是从一个元素移动到另一个元素。这是我这样做的方式，基本上你在菜单的 li 中设置了一个 div 或 li 。例子：

```
<ul class="menu-hover">
  <li class="menu one">Menu Option One
    <div> Here is the drop down menu</div>
  </li>
  <li class="menu two">Menu Option One
    <div> Here is the drop down menu</div>
  </li>
</ul> 
```

jQuery 将是

基本上这是说，当您将鼠标悬停在菜单中的一个 li 上时，隐藏该菜单下的所有 div，这将是您的下拉菜单中的所有菜单，然后显示悬停的 li 下的 div。您需要将 li 位置设为相对位置，将 div 设为绝对位置。所以理论上 div 包含在 li 下，因此当你悬停时它会保持打开状态。

```
$(".menu-hover li").hover(function(){ 

 //Hide each div on hover
  $(".menu div").each(function(){
    $(this).hide();
  });

  $("div", this).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:51:30.397

**演示：http:** [//jsbin.com/welcome/13456](http://jsbin.com/welcome/13456)

不使用菜单插件的示例，这只是一个概念证明

```
$(function() {
    var flag = false;
    $('#mainMenu li.mainMenuItems').hover(function() {
        if (!flag)
            $(this).find('.submenu').slideDown(500);

    }, function() {
        if (!flag)
            $(this).find('.submenu').slideUp(500);
    });

    $('#mainMenu li.mainMenuItems .submenu').hover(function() {
        flag = true;
    }, function() {
        $(this).slideUp(500);
        flag = false;
    });
}); 
```

# sql - SQL 嵌套 if 语句在 count 中

> ID：12006442
> 
> 赞同：1
> 
> 时间：2012-08-17T13:07:04.180
> 
> 标签：sql, ms-access, if-statement, count, nested

这是我所拥有的：

```
SELECT   Count(*) AS cnt 
FROM     tblOccurrence AS x 
WHERE    (((x.OccurrenceDate) Between DateAdd('m',-6,Date()) And Date()) 
         AND ((Exists ( SELECT * 
                        FROM tblOccurrence AS y 
                        WHERE y.TechID = x.TechID AND DATEADD ('d', -1, x.[OccurrenceDate]) = y.[OccurrenceDate]))=False) 
                        AND ((x.TechID)= " & Me.tbxTechID.Text & ")) 
GROUP BY x.TechID; 
```

这用于计算员工缺勤的“发生”，如果员工无故缺勤 1 天，则为 1 次。如果他们连续 5 天没有理由，这仍然是一次。

直到有人指出，如果员工有 MF 轮班并在周五和周一打电话，这只会发生 1 次。为了让事情变得更加艰难，我们的员工轮班非常大（MF，周二至周六，周日至周一，M-周二和周五至周六等）......所以我建立了一张桌子，可以容纳所有不同的班次（大约其中 8 个）有 9 列：

```
ID - ShiftName - Sunday - Monday - Tuesday - Wednesday - Thursday - Friday - Saturday 
```

ShiftName 是一个带有简短描述的文本字段（Mon-Fri、Tue-Fri、Sun-Thu 等），然后是一周中的几天的 Yes/No 字段。然后复选标记是预定的日期。

所以我希望每个人都对两件事提出意见，

1.  这是捕捉我需要捕捉的东西的“好”方式吗？
2.  考虑到周末无故缺勤但计为 1 次，该 SQL 语句将如何更改以使出现次数正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:45:00.120

在表 tblOccurrence 中再增加一列会更容易实现。调用这个新列，即：occuranceCounter。使用触发器填充此列。每当您在 tblOccurence 中插入新行时，此触发器都会填充occuranceCounter 列。

触发逻辑：检查员工的班次，检查上次缺勤日期，当前缺勤日期，如果根据员工班次连续天数，则保持发生计数与上次缺勤发生计数相同，否则将发生计数加一。

如果员工轮班数据随时间发生变化，那么添加员工轮班历史表会很有帮助。

# c# - 是否有任何不使用支持拦截的 JIT 编译的 IoC 框架？

> ID：12006446
> 
> 赞同：1
> 
> 时间：2012-08-17T13:07:20.423
> 
> 标签：c#, dependency-injection, inversion-of-control, jit

iOS 上的 Mono 似乎不支持 JIT 编译，似乎至少有 StructureMap、Ninject 和 Simple Injector 使用。它可以通过反射在 Ninject 中替换它来关闭，但它的扩展似乎并非如此，至少是拦截一个。有没有不使用 JIT 编译但有拦截的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:51:56.747

您可以使用 Griffin.Container。但默认拦截包使用城堡代理。因此，您必须自己添加该功能。

拦截功能是使用装饰器实现的。

实现[IInstanceDecorator](https://github.com/jgauffin/Griffin.Container/blob/master/Source/Griffin.Container/IInstanceDecorator.cs)类并使用`container.AddDecorator()`.

*   Griffin.Container 文章： http: [//www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container](http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container)
*   Castle代理拦截器：[https ://github.com/jgauffin/Griffin.Container/tree/master/Source/Griffin.Container.Interception](https://github.com/jgauffin/Griffin.Container/tree/master/Source/Griffin.Container.Interception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:20:30.913

看到这些了吗？

[https://github.com/grumpydev/TinyIoC](https://github.com/grumpydev/TinyIoC)

[http://ioc.codeplex.com/](http://ioc.codeplex.com/)

OpenNETCF.IoC（第二个链接）已将 Mono 列为受支持。

# bash - bash shell“你想继续[Y / n]”

> ID：12006457
> 
> 赞同：1
> 
> 时间：2012-08-17T13:07:50.797
> 
> 标签：bash, shell

我想编写一个脚本来自动执行 `sudo apt-get remove ffmpeg x264 libvpx libav-tools-dev libx264-dev`. 此命令显示在执行的中间：`Would you like to continue [Y / n]?` 我希望我的脚本执行，而不必要求我输入“Y”来继续。

我在此命令之后添加了: `echo -e "Y\r"`，但不考虑？

```
#!/bin/bash
sudo apt-get remove ffmpeg x264 libav-tools libvpx-dev libx264-dev

echo -e "Y\r" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T13:13:39.977

自动回答这些问题的最通用方法是使用[该`yes`实用程序](http://man.cx/yes)并将其通过管道传输到任何其他程序询问它们。例如

```
yes | sudo apt-get remove ffmpeg x264 libav-tools libvpx-dev libx264-dev 
```

但是，正如@Rohan 所说，在这种情况下，`apt-get`内置了等效的功能，因此请改用它。

（注意。您可以自定义字符串`yes`输出。例如，可以对每个问题回答“n”，例如：

```
yes n | sudo apt-get remove ffmpeg x264 libav-tools libvpx-dev libx264-dev 
```

)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T13:09:58.673

指定`-y`您的`apt-get`命令：

`sudo apt-get remove ffmpeg x264 libav-tools libvpx-dev libx264-dev`

从`apt-get --help`

```
-y  Assume Yes to all queries and do not prompt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-24T02:29:08.453

只需添加一个**是**标志，它就会起作用。

> sudo apt-get -y 删除 ffmpeg x264 libav-tools libvpx-dev libx264-dev

# javascript - 页面加载后可以用 javascript/Jquery 重写/修改 URL

> ID：12006461
> 
> 赞同：2
> 
> 时间：2012-08-17T13:08:16.023
> 
> 标签：javascript, jquery, url, url-rewriting, client-side

是否可以在不通过 jQuery/Javascript 重新加载页面的情况下重写 URL？

假设您有以下网址：

`http://stackoverflow.com/questions/ask`

我们可以附加值吗：`/pId=XYZ`

所以你可以得到

`http://stackoverflow.com/questions/ask/pId=XYZ`

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T13:11:53.977

您可以在不重定向的情况下更改的是 url 的哈希部分：

```
document.location.hash = "whatever"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T13:09:30.817

是的，您可以，而且您不需要 jquery：只需使用 History API：[https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

请注意，在复杂的 ajax 应用程序中处理历史记录通常有点痛苦，因为您必须处理页面的状态序列化、状态加载等。而且你不能像许多 ajaxified 网站一样将它应用到设计糟糕的网站上。这不适用于像 IE9 这样的“旧”浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:12:44.927

是的，我们可以，但仅限于实现[pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)的浏览器。

[在此处](https://stackoverflow.com/q/7922918/3287)[查看](https://stackoverflow.com/q/4966090/3287)[其他](https://stackoverflow.com/q/5527617/3287) [答案](https://stackoverflow.com/q/9340121/3287)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T13:14:52.883

你可以得到当前的网址

```
var url = document.location.href; 
```

然后将部分添加到 url

```
url += "/mySubFolder"; 
```

我的帖子的其余部分不适合这个问题......我应该更仔细阅读:(！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T10:37:22.580

遇到这个问题后，我认为@DenysSéguret 的答案正是你所需要的。

当浏览器支持时，您可以使用

```
window.history.pushState(stateObj, title, url); 
```

或者

```
window.history.replaceState(stateObj, title, url); 
```

正如@DenysSéguret 所述，您可以在
[https://developer.mozilla.org/en-US/docs/Web/API/History_API找到文档](https://developer.mozilla.org/en-US/docs/Web/API/History_API)

# wix - 绑定 WIX FileVersion 子值？

> ID：12006466
> 
> 赞同：9
> 
> 时间：2012-08-17T13:08:29.113
> 
> 标签：wix

在 WIX 中，我可以这样做来为我的 MSI 自动生成一个合适的版本号：

```
<?define ProductVersion="!(bind.FileVersion.MyMainExecutable)" ?>
<Product Version="$(var.ProductVersion)" ... /> 
```

这会产生一个像“1.0.1.0”这样的字符串，但我只想要前三个部分：“1.0.1”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-07T03:52:02.247

没有办法只获取 bound 的前三个字段`FileVersion`。但是，如果您可以将四个部分的版本分配给`Product/@Version`（这是完全有效的，尽管主要升级只会查看前三个字段），那么您可以使用以下命令访问主要、次要、构建和修订的每个部分变量：

```
!(bind.property.ProductVersion.Major)
!(bind.property.ProductVersion.Minor)
!(bind.property.ProductVersion.Build)
!(bind.property.ProductVersion.Revision) 
```

希望这会很有用。

# javascript - 从 JSON 制作 javascript var (array)

> ID：12006467
> 
> 赞同：0
> 
> 时间：2012-08-17T13:08:37.893
> 
> 标签：javascript, jquery, json

在一页（API 页面）上，我有一个这样的 PHP 数组：

```
$arr = array("headline1" =>
         array("name" => "Headline 1",
               "description" => "Description of headline 1",
               "items" => array(
                        array("name"=>"John", "lastname"=>"Doe"),
                        array("name"=>"Peter", "lastname"=>"Pan")
                        )
                ),
         "headline2" => array("name" => "Headline 2",
               "description" => "Description of headline 2",
               "items" => array(
                        array("name"=>"Alexander", "lastname"=>"Doe"),
                        array("name"=>"Steven", "lastname"=>"Smith")
                        )
                ),
         "headline3" => array("name" => "Headline 3",
               "description" => "Description of headline 3",
               "items" => array(
                        array("name"=>"John", "lastname"=>"Doeh"),
                        array("name"=>"Peter", "lastname"=>"Pans")
                        )
                )
         ); 
```

并且脚本从这个数组创建 json 编码版本：

```
echo json_encode($arr); 
```

所以，我的问题是其他页面上的javascript。我想使用 jQuery $.getJSON 函数来检索这些数据并使 var 像这样：

```
var categoryData = {
headline1: {
    name: "Headline 1",
    description: "Description of headline 1",
    items: [
        {
            name: "John",
            lastname: "Doe"
        },
        {
            name: "Peter",
            horoscope: "Pan"
        }
    ]
},

headline2: {
    name: "Headline 2",
    description: "Description of headline 2",
    items: [
        {
            name: "Alexander",
            lastname: "Doe"
        },
        {
            name: "Steven",
            horoscope: "Smith"
        }
    ]
},

headline3: {
    name: "Headline 3",
    description: "Description of headline 3",
    items: [
        {
            name: "John",
            lastname: "Doeh"
        },
        {
            name: "Peter",
            horoscope: "Pans"
        }
    ]
}
}; 
```

如何使用 jQuery $.getJSON 函数实现这一点？

编辑 ：

我的其他 Javascript 函数（jQuery 移动函数）

```
 function showCategory( urlObj, options )
{

var categoryData = [];
$.getJSON('http://localhost/tst/sig.php', function(json) {
  categoryData = json;
});

var categoryName = urlObj.hash.replace( /.*category=/, "" ),

    // Get the object that represents the category we
    // are interested in. Note, that at this point we could
    // instead fire off an ajax request to fetch the data, but
    // for the purposes of this sample, it's already in memory.
    category = categoryData[ categoryName ],

    // The pages we use to display our content are already in
    // the DOM. The id of the page we are going to write our
    // content into is specified in the hash before the '?'.
    pageSelector = urlObj.hash.replace( /\?.*$/, "" );

if ( category ) {
    // Get the page we are going to dump our content into.
    var $page = $( pageSelector ),

        // Get the header for the page.
        $header = $page.children( ":jqmData(role=header)" ),

        // Get the content area element for the page.
        $content = $page.children( ":jqmData(role=content)" ),

        // The markup we are going to inject into the content
        // area of the page.
        markup = "<p>" + category.description + "</p>",

        // The array of items for this category.
        cItems = category.items,

        // The number of items in the category.
        numItems = cItems.length;

    // Generate a list item for each item in the category
    // and add it to our markup.
    for ( var i = 0; i < numItems; i++ ) {
        markup += "<div data-role='collapsible' data-theme='a' data-content-theme='e'><h3>" + cItems[i].name + "</h3><p>"+ cItems[i].horoscope +"</p></div>";
    }
    markup += "</ul><p><a href='#one' data-rel='back' data-role='button' data-inline='true' data-icon='back'>Vratite se nazad</a></p>   ";

    // Find the h1 element in our header and inject the name of
    // the category into it.
    $header.find( "h1" ).html( category.name );

    // Inject the category items markup into the content element.
    $content.html( markup );

    // Pages are lazily enhanced. We call page() on the page
    // element to make sure it is always enhanced before we
    // attempt to enhance the listview markup we just injected.
    // Subsequent calls to page() are ignored since a page/widget
    // can only be enhanced once.
    $page.page();

    // Enhance the listview we just injected.
    $content.find( ":jqmData(role=collapsible)" ).collapsible();
    $content.find( ":jqmData(role=button)" ).button();

    // We don't want the data-url of the page we just modified
    // to be the url that shows up in the browser's location field,
    // so set the dataUrl option to the URL for the category
    // we just loaded.
    options.dataUrl = urlObj.href;

    // Now call changePage() and tell it to switch to
    // the page we just modified.
    $.mobile.changePage( $page, options );
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:18:02.290

[`jQuery.getJSON`](http://api.jquery.com/jQuery.getJSON/) is asynchronous and needs a callback function, you can't directly assign the results to a variable. To use it, you need to make the output of your PHP script a single [JSON string](http://json.org) - no "`var catData =`" before the "object literal", and no semicolon behind. Also don't forget to serve the JSON with the [appropriate MIME type](https://stackoverflow.com/q/477816/1048572).

# android - Android 无限循环进度对话框 AsyncTask

> ID：12006469
> 
> 赞同：1
> 
> 时间：2012-08-17T13:08:55.433
> 
> 标签：android, gridview, android-asynctask, android-lazyadapter

我得到了无尽的加载，我的 gridview 没有显示。我的 xml 网址正常工作，一切似乎都很好。我的代码有问题吗？我刚刚修改了一些代码，我想在这里学习 Asynctask。请帮我

CustomizedListView.class

```
 public class CustomizedListView extends Activity {
        // All static variables
        private ProgressDialog pDialog;
        static final String URL = "http://XXXXXX";
        // XML node keys
        ArrayList<HashMap<String, String>> songsList;
        static final String KEY_SONG = "song"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_TITLE = "title";
        static final String KEY_ARTIST = "artist";
        static final String KEY_DURATION = "duration";
        static final String KEY_THUMB_URL = "thumb_url";
        static String IMAGE_POSITION;
        GridView grid;
        LazyAdapter adapter;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.grid_layout);
            //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

            //StrictMode.setThreadPolicy(policy); 

             songsList = new ArrayList<HashMap<String, String>>();

             new loadGridView().execute();

            grid = (GridView) findViewById(R.id.grid_view);
            grid.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
                    String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
                    String url = ((TextView) view.findViewById(R.id.duration)).getText().toString();
                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(),SingleMenuItemActivity.class);
                    in.getIntExtra(IMAGE_POSITION, position);
                    in.putExtra(KEY_TITLE, title);
                    in.putExtra(KEY_ARTIST, artist);
                    in.putExtra(KEY_THUMB_URL,url);
                    startActivity(in);      

                }
            });
        }

        class loadGridView extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(
                        CustomizedListView.this);
                pDialog.setMessage("Loading websites ...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }

            @Override
            protected String doInBackground(String... args) {
                // updating UI from Background Thread

                        XMLParser parser = new XMLParser();
                        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
                        Document doc = parser.getDomElement(xml); // getting DOM element

                        NodeList nl = doc.getElementsByTagName(KEY_SONG);
                        // looping through all song nodes <song>
                        for (int i = 0; i < nl.getLength(); i++) {
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();
                            Element e = (Element) nl.item(i);
                            // adding each child node to HashMap key => value
                            map.put(KEY_ID, parser.getValue(e, KEY_ID));
                            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

                            // adding HashList to ArrayList
                            songsList.add(map);
                        }

                        return null;

                    }   
@Override
                    protected void onPostExecute(String args) {
                // dismiss the dialog after getting all products
                adapter=new LazyAdapter(CustomizedListView.this, songsList);        
                grid.setAdapter(adapter);
                pDialog.dismiss();
            }

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:23:32.163

你必须使用

> 适配器=新的懒惰适配器（活动名称.this，歌曲列表）；

您根本没有使用 doInbackground 的功能。由于您再次调用 runOnuithread 。去掉它。

移动适配器相关调用到 Ui 线程可能在 OnpostExecute

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:24:31.573

使用上下文

```
public LazyAdapter(Context context, ArrayList<HashMap<String, String>> d) {
        context = context;
        data=d;
        inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(context.getApplicationContext());
    } 
```

并将 Context 引用放入您的 AsyncTask 构造函数。我想在方法中填充适配器的最佳位置

```
 void onPostExecute(String args) {
// fill your adapter here
        } 
```

反而`doInBackground();`

# android - 在 Android 中删除不需要的滚动条

> ID：12006471
> 
> 赞同：0
> 
> 时间：2012-08-17T13:08:55.757
> 
> 标签：android

我在我的应用程序的几个 UI 中使用滚动。我在应用程序中有不需要的滚动。

文件之一的 XML。

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:windowSoftInputMode="stateHidden|adjustResize|adjustPan" >

        <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="720dp"
            android:layout_centerHorizontal="true" >

            <include
                android:id="@+id/includeheadersetting"
                android:layout_width="fill_parent"
                android:layout_height="70dp"
                layout="@layout/header_settings" >
            </include>

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/includeheadersetting"
                android:layout_marginLeft="24dp"
                android:layout_marginTop="50dp"
                android:gravity="center"
                android:text="Camera"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView1"
                android:layout_alignRight="@+id/textView1"
                android:layout_below="@+id/textView1"
                android:layout_marginTop="34dp"
                android:gravity="center"
                android:text=" Id"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView2"
                android:layout_below="@+id/textView2"
                android:layout_marginTop="36dp"
                android:gravity="center"
                android:text="Ref 1    "
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/textView3"
                android:layout_below="@+id/textView3"
                android:layout_marginTop="30dp"
                android:gravity="center"
                android:text="Ref 2    "
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="bold" />

            <ToggleButton
                android:id="@+id/toggleButtonCamera"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView1"
                android:layout_alignParentRight="true"
                android:layout_marginRight="31dp"
                android:text="ToggleButton" />

            <EditText
                android:id="@+id/editText_Settings_ID"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/toggleButtonCamera"
                android:layout_below="@+id/toggleButtonCamera"
                android:layout_marginTop="17dp"
                android:layout_toRightOf="@+id/button2"
                android:ems="10" >

                <requestFocus />
            </EditText>

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView4"
                android:layout_below="@+id/textView4"
                android:layout_marginLeft="23dp"
                android:layout_marginTop="20dp"
                android:text="Cancel"
                android:textStyle="bold" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/editText_Settings_MerchantID"
                android:layout_alignTop="@+id/button2"
                android:text="Process Refund"
                android:textStyle="bold" />

            <EditText
                android:id="@+id/editText_Settings_ref1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/editText_Settings_MerchantID"
                android:layout_below="@+id/editText_Settings_MerchantID"
                android:layout_toRightOf="@+id/button2"
                android:ems="10" />

            <EditText
                android:id="@+id/editText_Settings_ref2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/editText_Settings_ref1"
                android:layout_below="@+id/editText_Settings_ref1"
                android:layout_toRightOf="@+id/button2"
                android:ems="10" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

类似的是其他 UI 的编码。如何删除不需要的卷轴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:02:32.940

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:windowSoftInputMode="stateHidden|adjustResize|adjustPan" >

        <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_centerHorizontal="true" > 
```

# c# - 另一个“这有设计模式吗？”

> ID：12006475
> 
> 赞同：1
> 
> 时间：2012-08-17T13:09:10.590
> 
> 标签：c#, design-patterns

我有两个独立的类，ClassA 和 ClassB，它们派生自同一个基类，但具有不同的业务逻辑。我需要定义第三个类 ClassC，它也派生自同一个基类。这个类将是现有两个类的组合，即，根据某些标准，每当调用 ClassC 的 DoSomething() 方法时，我想从 ClassA 或 ClassB 调用该方法（这些不是静态方法），基于某些标准。（请注意，对于 ClassC 的每个实例，确定我想要 ClassA 还是 ClassB 逻辑的标准都可以改变）。是否有特定的设计模式可以帮助我开始使用？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:10:55.753

我听起来你需要看看状态或策略模式。您基本上想要的是委托而不是继承。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:18:28.093

似乎您需要使用组合而不是继承。查看复合模式：[http](http://en.wikipedia.org/wiki/Composite_pattern) ://en.wikipedia.org/wiki/Composite_pattern 在维基百科示例中，它用于实现树状结构。在您的示例中，您没有树，因此您只需应用自定义逻辑并调用 ClassA 或 ClassB 实现，而不是迭代子级。

# jquery - 使用 cakephp 和 Jquery 动态下拉

> ID：12006477
> 
> 赞同：0
> 
> 时间：2012-08-17T13:09:19.487
> 
> 标签：jquery, dynamic, drop-down-menu, input, cakephp-2.2

大家好，都想根据 cakephp 2.2 应用程序中的国家/地区选择为 Cities 生成动态下拉列表。我对 cakephp 很陌生。此外，我几乎找不到任何教程，因为它们大多是 1.3 或 1.2 版本。我在个人资料添加视图中有国家和城市的下拉菜单。这是我在国家控制器中的代码：

```
 public function citylist() {
         $this->layout=false;
         Configure::write('debug', 0);
         if($this->request->is('ajax')){    
        $country=$this->Country->read(null, $this->request['url']['country_id']);
        $code=$country['Country']['country_code'];
        $cities=$this->Country->City->find('list',array('conditions' =>array('City.country_code' => $code),'recursive' => -1,'fields' => array('id', 'name')));
        $this->set('cities',$cities);
}} 
```

我的jQuery代码是这样的：

```
$(document).ready(function(){
$('#ProfileCountryId').live('change', function() {
if($(this).val().length != 0) {
  $.getJSON('/crush/countries/citylist',
              {country_id: $(this).val()},
              function(cities) {
                if(cities !== null) {
                  populateCityList(cities);
                }
    });
  }
});
});

      function populateCityList(cities) {
var options = '';

$.each(cities, function(index, city) {
options += '<option value="' + index + '">' + city + '</option>';
});
$('#ProfileHomeLocation').html(options);
$('#city-list').show();
} 
```

我尝试进行更改，但它确实令人困惑，因为在差异示例中我看到了非常不同的方式。我不确定是否将该请求类型检查为 ajax，还是应该通过 request->data 或 params[url] 获取参数值。

我遵循了这两个现有的答案，这让我更加困惑。 [cakephp 在 ajax 中传递下拉值](https://stackoverflow.com/questions/9498560/cakephp-pass-dropdown-value-in-ajax/12004026#12004026) [在 CakePHP 2.2 中连接被重置问题](https://stackoverflow.com/questions/11520404/the-connection-was-reset-issue-in-cakephp-2-2)。

这个错误很奇怪，第一次加载页面时它在控制台中显示错误“加载资源失败：服务器响应状态为 500（内部服务器错误）”。但是，如果我加载重新加载，然后在下拉列表中选择第一个值。它给出了错误

> GET [http://example.com/crush/countries/citylist?country_id=103](http://example.com/crush/countries/citylist?country_id=103) 500（内部服务器错误） jQuery.ajaxTransport.sendjquery-1.7.2.js:8240 jQuery.extend.ajaxjquery-1.7.2.js:7719 jQuery.each.jQuery.(匿名函数)jquery-1.7.2.js:7245 jQuery.extend.getJSONjquery-1.7.2.js:7262(匿名函数)citylist.js:4 jQuery.event.dispatchjquery-1.7.2 .js:3332 jQuery.event.add.elemData.handle.eventHandle

不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:19:30.947

在像您这样涉及动态下拉框的情况下，我使用 ajax() jQuery 的方法来检索数据并替换元素的全部内容`select`。因此，您可以返回完整的 HTML`option`元素并将元素的内容替换`select`为`$('myselectelement').html(data)`. 这工作正常。

# javascript - 需要帮助将新数据放入表中，使用 JQuery

> ID：12006480
> 
> 赞同：0
> 
> 时间：2012-08-17T13:09:24.733
> 
> 标签：javascript, jquery, html-table

我对 JS 和客户端非常陌生，请帮助我实现这一目标：

每次我将主题添加到数据库时，我都希望它出现在表格中。

html

```
 {% block main-menu %}
        <h3>Existing Subjects</h3>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Documents</th>
                    <th>Followers</th>
                    <th>Created</th>
                    <th>Updated</th>
                    <th>Posted By</th>
                </tr>
            <tbody>
            {% if subjects %}
                    <tr id="subject-description-main-menu-list">
                        <th id="subject-name"></th>
                        <th id="subject-docs"></th>
                        <th id="subject-followers"></th>
                        <th id="subject-created"></th>
                        <th id="subject-updated"></th>
                        <th id="subject-posted-by"></th>
                    </tr>
            {% endif %}
            </tbody>
        </table>
    {% endblock %} 
```

这是我的jQuery：

```
function fill_subject_table_in_main_content() {
    $("#subject-description-main-menu-list").text('');
    $.get("/subject/list/", function(data){
        var FIELDS = ['name', 'num_of_followers', 'created_time', "created_by"];
        for( var i=0; i<data.length; i++) {
            for ( var j=0; j<FIELDS.length; j++) {
                $("#subject-description-main-menu-list").append('<th>'+data[i]['fields'][FIELDS[j]]+'</th>');
            }
        };
    }, 'json');
} 
```

我通过 get 方法获得的数据是正确的，但它出现在一行中......但我希望它是一个表格......

现在看起来像这样：

```
Existing Subjects
Name    Documents   Followers   Created                           Updated   Posted By
Math 140       NONE             1         2012-08-17 08:04:02      NONE       r English 102 1   2012-08-17 08:04:14 r 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:24:28.080

首先，您将[标题标签](http://www.w3schools.com/tags/tag_th.asp)附加到表中。你会想要“td”。其次，您在 $("#subject-description-main-menu-list") 上调用 .append ，这是一行。您应该将行附加到表并将数据附加到每一行。

就像是：

```
for( var i=0; i<data.length; i++) {
var newRow = document.createElement("tr");
for ( var j=0; j<FIELDS.length; j++) {
    $(newRow).append('<td>'+data[i]['fields'][FIELDS[j]]+'</td>');
}
$("#yourTableId").append(newRow); 
```

};

# javascript - 仅当设备基于 iOS 时如何运行 jQuery 代码？

> ID：12006481
> 
> 赞同：2
> 
> 时间：2012-08-17T13:09:25.197
> 
> 标签：javascript, jquery, html, ios

> **可能重复：**
> [检测设备是否为 iOS](https://stackoverflow.com/questions/9038625/detect-if-device-is-ios)

这是我想做的事情：

```
<script type="text/javascript">
        // Run This code if device is iOS based
        window.addEventListener('DOMContentLoaded',function() {
            $("body").queryLoader2({
                barColor: "#37201b",
                backgroundColor: "#c2a875",
                percentage: true,
                barHeight: 5,
                completeAnimation: "grow"
            });
       });
        // if it is not iOS run this code
        $(document).ready(function () {
            $("body").queryLoader2({
                barColor: "#37201b",
                backgroundColor: "#c2a875",
                percentage: true,
                completeAnimation: "grow",
                barHeight: 5
            });
        });
        </script> 
```

而不是评论我写什么来使它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:12:21.647

```
jQuery(document).ready(function($){
    var deviceAgent = navigator.userAgent.toLowerCase();
    var agentID = deviceAgent.match(/(iPad|iPhone|iPod)/i);
    if (agentID) {     
        window.addEventListener('DOMContentLoaded',function() {
            $("body").queryLoader2({
                barColor: "#37201b",
                backgroundColor: "#c2a875",
                percentage: true,
                barHeight: 5,
                completeAnimation: "grow"
            });
       });     
    }
    else
    {
        $(document).ready(function () {
            $("body").queryLoader2({
                barColor: "#37201b",
                backgroundColor: "#c2a875",
                percentage: true,
                completeAnimation: "grow",
                barHeight: 5
            });
        });
    }
}); 
```

# ruby-on-rails - 使用三个 collection_selects 进行动态过滤

> ID：12006486
> 
> 赞同：0
> 
> 时间：2012-08-17T13:09:39.710
> 
> 标签：ruby-on-rails, search, filter

我有一个所有用户的列表，我希望其他用户能够根据用户的三个伞属性进行过滤：

1.  行业（用户现在工作的行业以及用户之前工作过的行业）
2.  公司（用户现在工作的公司以及过去的公司）
3.  学校（用户上过的任何学校）。

这些属性是从 LinkedIn 中提取的，因此每个行业/公司/学校在我的用户模型中都是自己的数据字段（当前/过去一个/过去两个/等）。

这是我的架构的一部分，用于展示我的用户模型：

```
create_table "users", :force => true do |t|
    ...
    t.string   "first_name"
    t.string   "last_name"
    ...
    t.string   "current_company"
    t.string   "past_company_one"
    t.string   "past_company_three"
    ...
    t.string   "current_industry"
    t.string   "past_industry_one"
    t.string   "past_industry_two"
    t.string   "past_industry_three"
    ...
    t.string   "school_zero_name"
    t.string   "school_one_name"
   ...
end 
```

我想要三个 collection_select 字段（行业/公司/学校），用户可以使用它们来*动态*过滤返回给他们的用户列表。它的外观和功能与此处的三个选择/过滤器字段非常相似：[https ://angel.co/startups](https://angel.co/startups)

不确定从哪里开始，并且真的可以使用一些帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:13:22.840

我会考虑在单独的模型上使用 3 个属性表示。因此，您最终将拥有 Company、Industry 和 School 模型来存储用户过去和当前的公司、行业和学校条目。

这样，每个公司/学校/行业都可以拥有更多属性，例如用户工作/上学的时间段。这样一来，一旦您在 3 个模型与 User 模型之间建立了模型关联，就如同说 user.companies 或 user.schools 一样简单。您还可以在公司和行业模型中添加一个字段来指示用户当前工作的公司或行业，以区分用户过去工作过的公司/行业。

像这样的东西：

```
class User < AR::Base
  has_many :companies
  has_one  :current_company, :class_name => "Company", :conditions => { :current => true }
end

class Company < AR::Base
  # == Schema attributes
  #
  #  id               :integer(4)      not null, primary key
  #  name             :integer(4)
  #  user_id          :integer(4)
  #  current          :boolean         :default => false, :null => false
  #  start_date       :date
  #  end_date         :date

  belongs_to :user
end 
```

# rotation - vpython“相对”旋转框架

> ID：12006487
> 
> 赞同：1
> 
> 时间：2012-08-17T13:09:49.337
> 
> 标签：rotation, vpython

我试图弄清楚如何相对于当前位置旋转框架对象。

例如，一个物体指向北方，我说绕 y 轴旋转 180 度。在那之后我说：倾斜 90 度它从“世界”的角度倾斜它。所以它指向下方而不是向上。（很抱歉这个令人困惑的故事，如果你尝试下面的代码并使用你的上下左右键，你就会明白我的意思）。

任何帮助将不胜感激。

```
 import time
    import numpy
    from visual import *

    # initialize variables
    pitch_degrees = 0
    roll_degrees = 0
    yaw_degrees = 0

    xangle = 0.0
    yangle = 0.0
    zangle = 0.0

    # create the airplane frame. this will be our working object.
    airplane = frame(make_trail=True)
    # below are the elements that create the airplane
    body = cone(frame=airplane, pos=(50,0,0), axis=(-150,0,0), radius=10)
    body2 = cone(frame=airplane, pos=(50,0,0), axis=(50,0,0), radius=10)
    wing = box(frame=airplane, pos=(35,0,0), size=(30,3,180))
    tail = box(frame=airplane, pos=(-75,0,0), size=(20,3,50))
    aileron = box(frame=airplane, pos=(-75,12,0), size=(20,24,3))
    cabin = ellipsoid(frame=airplane, pos=(30,5,0), axis=(1,0,0),size=(45,24,12))
    #painting
    for obj in airplane.objects:
        obj.color = color.red

    body.color = color.white
    cabin.color = (0.5, 0.5, 0.5)
    cabin.opacity = 0.8

    # I'm experiencing some jitter in my screen when starting up (yay ati....)
    time.sleep(2)

    # loop forever
    while True:
            # are there any keys pressed? if so, act on them.
            if scene.kb.keys: # event waiting to be processed?
                    s = scene.kb.getkey() # get keyboard info
                    if (s == 'up'):
                            pitch_degrees = pitch_degrees - 1
                    if (s == 'down'):
                            pitch_degrees = pitch_degrees + 1
                    if (s == 'left'):
                            roll_degrees = roll_degrees - 1
                    if (s == 'right'):
                            roll_degrees = roll_degrees + 1

            # convert degrees to radians
            zangle = numpy.radians(pitch_degrees)
            xangle = numpy.radians(roll_degrees)

            # execute the actual rotation.
            # but this should be relative to its current rotation :(
            airplane.rotate(angle=zangle,axis=(0,0,1))
            airplane.rotate(angle=xangle,axis=(1,0,0))

            # some delay because i'm a dirty boy
            time.sleep(0.005) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T21:34:31.673

创建一个自定义类，它是飞机而不是框架。这样，您可以为飞机类提供一个方法，该方法可以相对于飞机的位置和方向旋转类中的每个项目（机翼、机尾等）。因此，该类将包含一个表示其位置的向量以及一个表示其方向的向量。然后使用旋转数学分别围绕飞机的方向向量旋转每个项目。

抱歉，我会在评论中发布此内容，但我没有足够的声誉:)

# api - 除了 Web 浏览器之外，还有 W3C DOM 的实现吗？

> ID：12006490
> 
> 赞同：3
> 
> 时间：2012-08-17T13:09:54.333
> 
> 标签：api, dom, w3c

所以我们都知道[`DOM`（文档对象模型）](http://www.w3.org/DOM/)是一个在 Web 浏览器中表示 HTML 页面的接口，您可以使用 JavaScript 与它进行交互。

有时我会读到关于需要 Web 浏览器才能使用 DOM 的评论。但这是真的吗？

**难道没有其他的 DOM 实现，例如服务器端 JavaScript 引擎、屏幕抓取工具、单元测试框架、除 JavaScript 之外的其他编程语言等吗？**

或者这真的从来没有做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:11:27.937

> 有时我会读到关于需要 Web 浏览器才能使用 DOM 的评论。但这是真的吗？

当然不是。你的理解是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:26:44.300

您正在寻找的术语是“[无头浏览器](http://blog.arhg.net/2009/10/what-is-headless-browser.html)”，是的，它们确实存在。无需启动 IE、Chrome 或 firefox 实例即可执行 JavaScript 并从 DOM 中挖掘数据。查看[Phantom.js](http://phantomjs.org/)或[Zombie.js](http://zombie.labnotes.org/)。

与此主题相关的许多其他问题：

*   [真正的无头浏览器](https://stackoverflow.com/q/4719902/402706)
*   [适用于 Python 的无头浏览器（需要 Javascript 支持！）](https://stackoverflow.com/q/6025082/402706)
*   [无头互联网浏览器？](https://stackoverflow.com/q/814757/402706)

# java - 在 Windows 7 中指定 GRADLE_USER_HOME

> ID：12006491
> 
> 赞同：6
> 
> 时间：2012-08-17T13:09:56.943
> 
> 标签：java, build, gradle

如何配置`GRADLE_USER_HOME`选项？我的 Windows 用户名包含一个空格（`C:\Users\Baz Foo`），我认为构建因此失败。

```
E:\workspace-sts-3.0.0.RELEASE\agweb\ag-client\ag-shared\build\classes\main
error: Class com.acme.client.conn.rmi.SessionRMIImpl not found.
error: Class Foo\.gradle\caches\artifacts-13\filestore\xerces\xercesImpl\2.1
0.0\jar\9161654d2afe7f9063455f02ccca8e4ec2787222\xercesImpl-2.10.0.jar not found
.
error: Class Foo\.gradle\caches\artifacts-13\filestore\xml-apis\xml-apis\1.4
.01\jar\3789d9fada2d3d458c4ba2de349d48780f381ee3\xml-apis-1.4.01.jar;C:\Users\Baz
not found.
error: Class Foo\.gradle\caches\artifacts-13\filestore\provided\jbpm\3.0.4\j
ar\f2a9f8f32e59b335e069b5444f6c36a30abf0845\jbpm-3.0.4.jar;C:\Users\Baz not fou
nd.
error: Class Foo\.gradle\caches\artifacts-13\filestore\log4j\log4j\1.2.16\bu
ndle\7999a63bfccbc7c247a9aea10d83d4272bd492c6\log4j-1.2.16.jar;C:\Users\Baz not
found.
5 errors ... 
```

我添加了一个环境变量`GRADLE_USER_HOME`并将其设置为`C:\Users\Baz Foo\.gradle`并尝试过，`--gradle-user-home="C:\Users\Baz Foo\.gradle"`但它们都不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T11:42:18.180

我已明确定义`GRADLE_USER_HOME`指向没有空格的路径（例如：）`E:\gradle-repository`。该`gradle-repository`文件夹包含初始化脚本（`init.gradle`文件，请参阅[Gradle 初始化脚本](http://gradle.org/docs/current/userguide/init_scripts.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-21T08:29:51.180

只需根据此处的建议将其配置到您选择的目录（并且可能在您的系统驱动器之外）

[允许独立于用户配置文件指定 Gradle 缓存的位置](https://github.com/gradle/gradle/issues/1319)，它在下面引用。

您可能也想更改您的初始化脚本：

[初始化脚本](https://docs.gradle.org/current/userguide/init_scripts.html)

## 当前行为

可以通过在命令行上提供它（通过`-g`或`--gradle-user-home`），通过将其作为系统属性（`gradle.user.home`）提供，或通过设置环境变量（`GRADLE_USER_HOME`）来配置 gradle 用户主目录的位置，通过默认值（通常`USER_HOME/.gradle`）。

在此目录下的项目中，有些是用户提供的配置文件，如 gradle.properties、init.gradle、init.d 下的任何文件，以及用户可能为这些文件创建的任何文件。

其他项目是缓存目录，例如缓存、本机和包装器。这些通常包含信息缓存，如果需要，这些信息可能会在以后重新获取，并且随着时间的推移会变得非常大。

最后，还有作业管理项，例如 daemon 下的那些。

在这些项目中，除了用户配置文件之外，所有项目都存在用户主目录的共享文件系统存在问题。最明显和最严重的是，并非所有共享文件系统都具有与本地文件系统相同的锁定行为，当用户尝试同时在多台机器上使用守护进程时会导致非常奇怪的结果。但是，缓存也会引起问题，因为大型共享文件系统通常具有限制用户在其共享空间中拥有的存储量的配额。因此，用户可能希望将大型可替换缓存放置在本地磁盘上，远离他们的主目录。

目前，无法配置这些缓存和特定于主机的部分与用户配置文件所在的位置分开。都可以在 下找到`GRADLE_USER_HOME`。因此，用户有几个选项来解决问题：

他们可以使用从他们的`GRADLE_USER_HOME`目录到其他目录的符号链接，以便配置文件位于 下`USER_HOME`，但是通过跟随符号链接到下`/var/tmp`或类似位置的符号链接可以找到缓存。这还要求用户让他们的登录脚本确保`/var/tmp`在每次登录后都存在下面的目录，以防它们被破坏（或者如果用户登录到他们以前没有使用过的机器）。他们可以使用`GRADLE_USER_HOME`环境变量来在本地文件系统的某个位置找到它们的整个目录（包括用户配置文件和缓存），例如在`/var/tmp`. 这还要求用户让他们的登录脚本确保该目录存在并且用户的每用户配置文件被复制到其中。期望的行为

最佳情况下，应该可以为所有这些缓存目录提供备用位置。如果它们继续位于`GRADLE_USER_HOME`默认情况下很好，但是能够一次重定位所有缓存（可能`GRADLE_USER_CACHE`默认为`GRADLE_USER_HOME`并且如果它不存在将创建目标目录）或每个子目录的单个缓存目录`GRADLE_USER_HOME`（因此您可以将包装器、本机、守护程序和缓存定位在不同的位置 - 可能将包装器、本机和缓存定位在大于用户主目录的共享卷上，并将守护程序定位在本地卷上以避免锁定和处理问题.)

由于这将允许缓存位置与用户配置位置分开配置，因此用户配置可能可用于指定缓存配置。例如，用户的 gradle.properties 文件可能指定新的基本缓存目录或新的单个缓存目录。

**语境**

如评论中所述，我添加了支持原始票证：

*这对我来说很重要——我的组织使用分布式文件系统作为主目录，具有相当严格的配额。这意味着在人们可以使用 gradle 构建东西之前，他们必须在本地磁盘上设置一个 gradle 用户主目录，或者从他们的 gradle 用户主目录到本地磁盘上的某个位置的符号链接。向用户解释如何做到这一点……比应该做的要困难得多。它对球场也没有多大好处：“嘿，试试这个很棒的构建工具！......但首先你需要执行这个丑陋的kludge。”*

使用环境变量或 gradle 属性使其更易于配置意味着能够说“将此行添加到您的`.profile`”或“将此行添加到您的`.gradle/gradle.properties`”，而不是“在您的登录脚本中运行这段长代码块几个目录和指向它们的符号链接，否则一切都会爆炸”。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-17T13:17:38.517

必须开始->运行->cmd打开命令提示符，然后键入

`dir c:\users /x`

并记下简称 - 应该类似于`Baz~1`

尝试使用短名称。这是一个 DOS 宿醉。

# android - 无法在 Touch 上更改 RelativeLayout 背景

> ID：12006494
> 
> 赞同：0
> 
> 时间：2012-08-17T13:10:04.087
> 
> 标签：android, background, runtime, android-relativelayout

我有一个奇怪的问题。我有一个继承自`RelativeLayout`. 我膨胀到一个xml。此布局的默认背景图像在 xml 中设置，我尝试在运行时更改它：

```
if(event.getAction() == MotionEvent.ACTION_DOWN) {
    System.out.println("Action down");
    this.setBackgroundResource(R.drawable.event_cell_selected);
}
else if(event.getAction() == MotionEvent.ACTION_CANCEL) {
    System.out.println("Action down");
    this.setBackgroundResource(R.drawable.event_cell);
} 
```

资源`event_cell`和`event_cell_selected`都是 .png 文件。另外，我看到了我的日志。我真的不能说这里发生了什么。

[编辑] 谢谢大家的快速回答。logcat中没有错误，这是我膨胀的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:background="@drawable/event_cell"
android:paddingBottom="@dimen/padding_small"
android:paddingLeft="14dp"
android:paddingRight="14dp"
android:paddingTop="@dimen/padding_large" >

<TextView
    android:id="@+id/textViewMonth"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="juil."
    android:textColor="@color/event_header"
    android:textSize="19dp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/textViewDay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/textViewMonth"
    android:layout_marginBottom="@dimen/margin_small"
    android:text="TextView"
    android:textColor="@color/event_header"
    android:textSize="15dp" />

<TextView
    android:id="@+id/textViewTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="TextView"
    android:textColor="@color/event_header"
    android:textSize="17dp" />

<ImageView
    android:id="@+id/imageViewSeparator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/textViewDay"
    android:layout_marginBottom="@dimen/margin_small"
    android:src="@drawable/event_title_descr_separator" />

<TextView
    android:id="@+id/textViewDescription"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/imageViewSeparator"
    android:ellipsize="end"
    android:maxLines="2"
    android:text="TextView"
    android:textColor="@android:color/black"
    android:textSize="12dp" /> 
```

这是我的根 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/navigationBarView" >

    <LinearLayout
        android:id="@+id/eventsLinearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="@dimen/margin_small"
        android:paddingRight="@dimen/margin_small" >

    </LinearLayout>
</ScrollView> 
```

膨胀的RelativeLayout被添加到scrollView的linearlayout

[编辑] 好的，为了解决这个问题，我最终以编程方式（而不是通过 xml）设置了我的默认背景图像。这就是诀窍。Android有时真的会有奇怪的行为......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:21:40.293

向您展示布局 xml 和膨胀代码。我敢打赌，问题如下：在您的 xml 中，您使用的是 RelativeLayout 作为根。这意味着然后膨胀您正在将xml中定义的相对布局添加到代码中创建的相对布局（由您自己的继承自RelativeLayout的类定义）。这意味着在 xml 中定义的背景显示在您在代码中更改的背景之上。尝试`<merge>`在您的布局根目录中使用而不是`<RelativeLayout>`

您可以在此处阅读有关“合并”布局标签的信息 [http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html)

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="@drawable/event_cell"
    android:paddingBottom="@dimen/padding_small"
    android:paddingLeft="14dp"
    android:paddingRight="14dp"
    android:paddingTop="@dimen/padding_large" >

    <TextView
        android:id="@+id/textViewMonth"
        android:textStyle="bold" />

   .............

</merge> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:24:34.697

我看到的一个问题是`System.out.println("Action down");`在您的两种情况下都重复。尝试在日志中查找问题时，这可能会导致问题。

* * *

另外，你说：

> 我尝试在运行时更改它，当它被触摸时......

如果您只想在触摸时更改它，请尝试使用 an`OnClickListener`而不是`Touch`您正在使用的东西。

* * *

另外，您的第二个条件是`MotionEvent.ACTION_CANCEL`，应该是`ACTION_UP`吗？

# ruby-on-rails - Rails - 根据 url 为同一操作显示不同的表单

> ID：12006495
> 
> 赞同：2
> 
> 时间：2012-08-17T13:10:08.797
> 
> 标签：ruby-on-rails, forms, ruby-on-rails-3.2

我有一个简单的客户端模型，其中包含一些字段和一个基本表单。访问它的 url 是`/clients/new`，这导致`clients#new`方法。我需要做的是创建一条通往经销商的新路线，这将导致相同的方法和相同的表单，但带有一些新字段，例如经销商的名称。

示例：url`/reseller/clients/new`指向该方法`clients#new`并显示一个新单元格，其中包含表单的新输入`new`。

我创建了一个方法来检查 url 并在路由中设置会话`"reseller"`，因此我的单元格可以处理是否显示新字段。但这导致我遇到有关模型验证的问题，因为如果新字段显示在视图中，它们的存在是`true`. 我必须访问模型内​​部的会话才能创建正确的验证，这听起来不是正确的路径。

我想知道如何以适当的方式实现我的目标？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:13:02.227

解决了。

为此，我创建了一个名为`Reseller`. 有了这个，模型`Client`就有了`accepts_nested_attributes_for :reseller`。这样，我可以在`Reseller`模型的单元格中呈现表单，并使用 设置其中的所有字段`:presence => true`，而无需条件语句。如果 url 有`"reseller"`，则单元格将呈现表单并进行验证。

# java - JPA - 扩展 java 字符串、日期

> ID：12006499
> 
> 赞同：-2
> 
> 时间：2012-08-17T13:10:30.677
> 
> 标签：java, jpa

是否可以声明一个类型

```
@????? // Embeddable? 
class MyDate extends java.util.Date implements Serializable{

    //.. lots of logic, but no new fields

} 
```

并将其包含在映射中

```
class Person {

   @????
   MyDate birthdate;

} 
```

我已经尝试过 Embeddable/Embedded 但我收到此错误消息

```
[junit] 7109  venses  WARN   [main] openjpa.MetaData - "birhtdate" declares a null indicator column ""birthdate_null"" whose JDBC type is not compatible with the expected type "integer". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:28:48.423

是的，可以按如下方式定义 MyDate 类型：

```
public class MyDate extends java.util.Date {
} 
```

并将其用作实体中的持久属性：

```
@Entity
public class SomeEntity {
    @Id private int id;

    MyDate date
} 
```

这是可行的，因为它是 Serializable 类型，因此默认情况下它被认为是简单类型并持久化到数据库中。不需要额外的注释。但是你不能对 String 做同样的事情，因为你不能扩展 final 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:20:41.200

`String`是`final`；`Date`不是。你不能扩展前者；您可以扩展后者，但我不建议这样做。

继承表明您的新类具有与其父类不同的行为。我真诚地怀疑您在`MyDate`. 我敢打赌，“很多逻辑”是被误导的。`java.util.Date`例如，如果您认为您的新课程将在`JODA`. 使用图书馆；不要重新发明。`Date`我敢肯定，您的“大量逻辑”不会对您如何表示 a或将其存储在 SQL 数据库中产生任何影响。

你应该重新考虑你的初衷。

# .htaccess - .htaccess 仅适用于特定文件夹脚本

> ID：12006500
> 
> 赞同：2
> 
> 时间：2012-08-17T13:10:34.423
> 
> 标签：.htaccess, mod-rewrite

`.htaccess`好的，我对RewriteRule有一个小问题。

我在本地创建了一个简单的网站，它使用 RewriteRule 的网址，例如：

```
http://localhost/ <- main page
http://localhost/log/ <- log page
etc. 
```

我的 .htaccess 文件中有这个：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /script
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

AuthUserFile c:\data\mysite\.htpasswd
AuthType Basic
AuthName "Secret place"
require valid-user 
```

由于该站点已准备就绪并且基本上只是一个有用的脚本，因此我将内容移至`http://mysite/script/`

当我打开时一切正常`http://mysite/script/`，但是当我点击一个 url 时，它会`http://mysite/script/log/`在浏览器栏中打开，但会加载`http://mysite/`首页内容。

意思是，重定向不允许我阅读必要的`log`内容，但认为这是对首页的重写（因为主站点没有值`script/log/`。

现在，如何设置它以加载**真实** `mysite/script/log`内容？

提前致谢。

*编辑：*

这是`.htaccess`主站点根目录上的文件：

```
RewriteEngine On

RewriteCond %{HTTP:range} !(^bytes=[^,]+(,[^,]+){0,4}$|^$)
RewriteRule .* - [F]

RewriteCond %{HTTP_HOST} ^mysite\.com
RewriteRule (.*) https://www.mysite.com/$1 [R=301,QSA,L]

RewriteCond  %{QUERY_STRING} (\&ch_lang\=[]{2}|)
RewriteRule  ^one-of-links$ ?main_page_extend=4011%1 [L]

php_value memory_limit 512M 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:15:02.690

您需要将 更改`RewriteBase`为`/script`。否则，当重写`/index.php`发生时，它会转到文档根目录的 index.php（您的首页），而不是脚本中的那个。

# android - 如何在maven项目的POM文件中为gmail发件人添加additionnal.jar？

> ID：12006503
> 
> 赞同：1
> 
> 时间：2012-08-17T13:10:41.973
> 
> 标签：android

如何在maven项目的POM文件中为gmail发件人添加additionnal.jar？我添加了 2 个罐子：1\. Mail.jar 2\. POM.xml 中的 activation.jars 依赖项，它们是 maven 官方罐子。

但是我无法在发送 gmail 所需的 POM.xml 中添加附加nal.jar 依赖项，由于没有添加此 jar，我收到以下异常“未找到类异常 javax.activation.dataHandler”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T15:03:45.747

您需要从[javamail-android 项目](http://code.google.com/p/javamail-android/downloads/list)下载所有 3 个 jar ，然后将它们安装到您的 repo 中。

所以对于additionnal.jar，使用类似的东西 -

```
> mvn install:install-file -Dfile=additionnal.jar -DgroupId=javamail-android -DartifactId=additionnal -Dversion=1.0.0 -Dpackaging=jar 
```

然后将依赖项添加到您的 POM 文件中 -

```
<dependency>
  <groupId>javamail-android</groupId>
  <artifactId>additionnal</artifactId>
  <version>1.0.0</version>
</dependency> 
```

然后应该对其他两个 jar 文件进行适当的修改来重复此操作。

由于这些 jar 之间的相互依赖关系，我不相信您可以将 mail.jar 和 activation.jar 的“官方”版本与 javamail-android 库中的那些混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:34:40.113

你不能在没有阴影的情况下将 javax.* 东西添加到 android 应用程序中。寻找替代品。你想做什么？

# java - 从无状态服务设置 sessionScoped bean？

> ID：12006505
> 
> 赞同：0
> 
> 时间：2012-08-17T13:10:46.757
> 
> 标签：java, jakarta-ee, servlets

我有一个网络服务。这个 WS 被注入了一个 sessionscoped bean。我想在执行 webservice 方法后的某个时间使用该 bean。但是 bean 总是空的：

```
@Stateless class Webservice () {
    @Inject SessionBean sessionBean;

    public exposedMethod() {
        sessionBean.setParam("test");
    }
}

@WebServlet class Servlet() {
    @Inject SessionBean sessionBean;

    public doGet(..) {
        String test = sessionBean.getParam();
        System.out.println(test); //null;
    }
}

@SessionScoped SessionBean() implements Serializable {
    private param;
    void getParam() { return param; }
    void setParam(String param) { this.param = param; }
} 
```

执行：1.调用WS 2.转到/myapp/servletname

结果：“null”这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:13:03.447

更正注释。一定是

```
@Inject SessionBean sessionBean; 
```

# vim - vim：如何使用相同的键循环浏览选项列表？

> ID：12006508
> 
> 赞同：3
> 
> 时间：2012-08-17T13:10:57.860
> 
> 标签：vim

我想循环浏览用于拼写检查的语言列表，例如

```
:setlocal spell spelllang=en_EN
:setlocal spell spelllang=en_US
:setlocal spell spelllang=de
:setlocal spell spelllang=fr
:setlocal nospell 
```

用一个按键。
一种明显的方法是将它们中的每一个放在一个单独的键上，例如 F1 到 F5。但这对我仅有的几个功能键来说很难。所以我试着把它们放在一个功能键上，它会*重新映射自己*以循环浏览列表。但事实证明，映射的长度会随着 O(N^2) 的增加而增加。我相信有一种更优雅的方式可以使用 vim 函数来实现这一点，我确信它可以将状态保存在变量中的某个位置。可悲的是，我的 vim 编程功能还不足以解决这个问题。（不，我不想在 gvim 中使用菜单）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:29:10.747

试试这个：

```
nnoremap <F2> :call CycleLang()<CR>

fun! CycleLang()
    let langs = ['', 'en_gb', 'en_us', 'de', 'fr']

    let i = index(langs, &spl)
    let j = (i+1)%len(langs)
    let &spl = langs[j]

    if empty(&spl)
        set nospell
    else
        set spell
    endif
endfun 
```

# data-structures - 多维数组的数据结构，其中维数在运行时确定

> ID：12006514
> 
> 赞同：0
> 
> 时间：2012-08-17T13:11:07.203
> 
> 标签：data-structures, multidimensional-array

我需要处理具有一组属性的数据，其中属性的数量将在运行时确定。例如，一个数据集可能包含动物，属性可能包括性别、物种、年龄等，其中每个属性都可以用整数（或枚举）表示。我希望能够沿任何维度进行迭代，这样我就可以快速计算男性的总数或狗的数量等。

我正在考虑这样的Java接口：

```
public interface DynamicMultidimensionalStore<T>
{
  Object getPoint(List<Integer> coordinates);
  void setPoint(List<Integer> coordinates, T item);
  Iterator<T> iterate(int dimension, List<Integer> remainingCoordinates);
  DynamicMultidimensionalStore<T> getSlice(int dimension, int offset);
} 
```

首先，必须有一个名称；立方体？我看到它类似于[http://en.wikipedia.org/wiki/Spatial_index#Spatial_index](http://en.wikipedia.org/wiki/Spatial_index#Spatial_index)但这些似乎更关注空间关系而不是迭代任意轴。

我能想到的唯一结构是一个将数据存储在线性数组中并执行指针运算来计算偏移量的类。

有更好的解决方案吗？我认为随着数组变得更加稀疏（或随着维度的增加），我的方法会变得不那么有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:33:28.617

如果我正确理解了您的问题，那么可行的“稀疏解决方案”如下。将您的数据集表示为一个字典列表，每个变量一个字典。通过将项目的引用插入到每个字典中来存储项目，由相关属性键入。所以你最终会得到像

```
{
  feet = {1: {<slug>}, 2: {<bird>, <person>}, 4: {<dog>}},
  fur  = {yes: {<dog>}, no: {<slug>, <bird>, <person>}},
  ...
} 
```

在这里，`<slug>`应该被读作指向您的对象类型的单个实例的引用/指针。我对 Java 了解不多，因此无法具体说明，但是 C++ 中的实现可以使用`std::map`键控参数的可能值。然后这些值将被存储为一些通用集合：要么`std::list`或也许`std::set`。如果您更喜欢，也许`std::multimap`会更适合-我不完全确定。

计算具有给定属性的对象应该非常快：您将查询在哈希表中查找的某个容器的长度。主要的缺点是您有`n*k`指针（或引用或或...），其中`n`是对象`k`的数量和轴的数量。这对您来说可能合适，也可能不合适。

# asp.net-web-api - 为什么具有可为空参数的 ApiController 方法的 ModelState.IsValid 失败？

> ID：12006524
> 
> 赞同：19
> 
> 时间：2012-08-17T13:11:49.357
> 
> 标签：asp.net-web-api, model-binding

我有一个接受多个参数的 ApiController 方法，如下所示：

```
 // POST api/files
    public HttpResponseMessage UploadFile
    (
        FileDto fileDto,
        int? existingFileId,
        bool linkFromExistingFile,
        Guid? previousTrackingId
    )
    {
        if (!ModelState.IsValid)
            return Request.CreateResponse(HttpStatusCode.BadRequest);

        ...
    } 
```

当我对此进行 POST 时，我将`FileDto`对象放在请求的正文中，并将其他参数放在查询字符串中。

我已经发现我不能简单地省略可为空的参数——我需要将它们放在查询字符串中并带有一个空值。因此，当我不想为可空参数指定值时，我的查询如下所示：

```
http://myserver/api/files?existingFileId=&linkFromExistingFile=true&previousTrackingId= 
```

这确实与我的控制器方法匹配，并且当执行该方法时，可以为空的参数确实是`null`（如您所料）。

**但是**`ModelState.IsValid`，对返回的调用`false`，当我检查错误时，它抱怨两个可为空的参数。（模型的其他位没有错误）。消息是：

> 需要一个值，但请求中不存在该值。

为什么它认为一个值是必需的/不存在的？当然（a）可空值*不需要*一个值，并且（b）一个值（某种）存在 - 以某种方式为空？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-27T13:08:15.173

除了第一个答案之外，如果您将所有可选项移动到方法声明的末尾，您应该能够让您的代码工作允许省略 url 上的前缀，并且我总是将它们设置为 NULL 以进行良好的衡量：

```
FileDto fileDto,
bool linkFromExistingFile,
Guid? previousTrackingId = null,
int? existingFileId = null 
```

**但**

好点re：带有前缀的空URL值......它与NULL相同......考虑字符串，是`?q=`空字符串还是空字符串？

我试图在引发这些错误的框架中找到确切的逻辑（并继续寻找），但在我的实验过程中，我确实发现直接在 URL 参数上指定活页夹似乎绕过了逻辑并允许在前缀后使用空值没有模型绑定错误。

像这样：

```
public class ValuesController : ApiController
{
    // GET api/values
    public IEnumerable<string> Get(
        [FromUri(BinderType = typeof(TypeConverterModelBinder))] string q = null,
        [FromUri(BinderType = typeof(TypeConverterModelBinder))] int? value = null)
    {
        if (!ModelState.IsValid)
        {
            throw new HttpResponseException(HttpStatusCode.BadRequest);
        }

        return new string[] { value.HasValue ? value.Value.ToString() : "", q };
    }     
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-26T09:07:47.767

我通过将所有参数移动到一个类来解决这个问题。

```
public class UploadFileModel {
   public FileDto FileDto { get; set; }
   public int? ExistingFileId { get; set; }
   public bool LinkFromExistingFile { get; set; }
   public Guid? PreviousTrackingId { get; set; }
}

public HttpResponseMessage UploadFile([FromUri]UploadFileModel model)
{
   // ...
} 
```

# php - $.ajax({...}); 中的变量

> ID：12006526
> 
> 赞同：0
> 
> 时间：2012-08-17T13:11:56.707
> 
> 标签：php, javascript, jquery, foreach

我有一个 foreach 循环（php），我希望 jquery 为每个循环发布数据`$value`。
当我创建变量 `var description = $('#<?php echo $value;?>').val();`
并且`alert(description);`它工作正常时，但是当我尝试在其中使用它时， `$.ajax({.... });`
它只显示第一个值。

为什么？

代码：

```
$('#edit_<?php echo $bid;?>').click(function(){
<?php 
foreach($Languages as $key => $value){  
?>
        var description = $('#<?php echo $value;?>').val();
        alert(''+description+' - <?php echo $value;?>'); // <-- HERE ir alerts the right value 
        $.ajax({
            url: "sqlx.php",
            data: "description="+ description +"&file=<?php echo $image; ?>&client=<?php echo $client; ?>&kategory=<?php echo $xkatid; ?>&language=<?php echo $value;?>", // <-- in this line it sends only first $value
            type: "post",
            success: function(){
                $('#ok<?php echo $bid;?>').fadeIn(100);
                $('#ok<?php echo $bid;?>').fadeOut(1000);
                window.setTimeout(function() {
                $(".xclose<?php echo $bid;?>").trigger('click');
                }, 800);

            }
        });
<?php } ?>
return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:21:12.820

将所有 php vars 放入 javascript vars 并在 javascript 中循环它们，而不是让 php 一遍又一遍地生成相同的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:24:25.333

如果您在服务器端循环，则存在重复的 var 定义（for `description`），您最好在 javascript 中执行循环

```
 var bid = <? echo json_encode($bid);?>;
  var server_data = <? echo json_encode($Languages);?>;
  $("#edit_"+bid).click(function(){
      for(var i in server_data){
          var value = server_data[i];
          //here your ajax code enters while you have value and bid variables in the javascript
      }
  }); 
```

编辑：刚刚注意到你也有`image`等`$client`变量 - 你应该应用相同的方法，首先将值作为 javascript vars，然后在 javascript 中使用它们

# actionscript-3 - 如何使用速度因子在 2 帧之间循环？AS3 Flash 开发

> ID：12006529
> 
> 赞同：0
> 
> 时间：2012-08-17T13:11:59.683
> 
> 标签：actionscript-3, flash, flashdevelop

我很高兴来到这里！让我问..我有一个功能：

```
trace(figurasQuePiscarao) = 1,4,5,6,8,14,15

velocidadePiscaFigura:Number = 5

function enterFramePisca(e:Event):void {
                volta++
                if (volta >= objConfig.velocidadePiscaFigura * 3 )
                    volta = 0
                if (volta == objConfig.velocidadePiscaFigura)
                    trace('blink1')
                    for (var i:int = 1; i < objComunicacao.figurasQuePiscarao.length; i++ ) {
                        if(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[i])) {
                            MovieClip(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[i])).gotoAndStop(2)
                        }
                    }
                if (volta == (objConfig.velocidadePiscaFigura * 2))
                    trace('blink2')
                    for (var j:int = 1; j < objComunicacao.figurasQuePiscarao.length; j++ ) {
                        if (getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[j]))
                            MovieClip(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[j])).goToAndStop(3)

                    }
            } 
```

调试器的输出是：blink1blink2blink1blink2blink1blink2blink1blink2blink1...。

所以 enterFrame 没问题...但我希望这些 moviclips 改变框架..但他们都坚持留在第 2 帧..我希望这在 2 和 3 之间变化..循环..使用速度因子'velocidadePiscaFigura' ..感谢您的帮助，抱歉英语不好...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:20:34.880

我认为这可能是一个简单的拼写错误：

```
MovieClip(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[j])).goToAndStop(3) 
```

`goToAndStop(3)`应该是`gotoAndStop(3)`吧？

编辑：

此外，您应该正确使用`{}`括号`;`：

```
velocidadePiscaFigura:Number = 5;

function enterFramePisca(e:Event):void {
            volta++;
            if (volta >= objConfig.velocidadePiscaFigura * 3 ) {
                volta = 0;
            }
            if (volta == objConfig.velocidadePiscaFigura) {
                trace('blink1');
                for (var i:int = 1; i < objComunicacao.figurasQuePiscarao.length; i++ ) {
                    if(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[i])) {
                        MovieClip(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[i])).gotoAndStop(2);
                    }
                }
            }
            if (volta == (objConfig.velocidadePiscaFigura * 2)) {
                trace('blink2');
                for (var j:int = 1; j < objComunicacao.figurasQuePiscarao.length; j++ ) {
                    if (getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[j])) {
                        MovieClip(getChildByName("mcF" + objComunicacao.posicoesQuePiscarao[j])).gotoAndStop(3);
                    }
                }
            }
        } 
```

# php - PHP 标头语法

> ID：12006530
> 
> 赞同：-5
> 
> 时间：2012-08-17T13:12:02.403
> 
> 标签：php

我正在尝试创建一个注册和登录系统，但在我使用的这段代码中出现语法错误

```
header('Location: Profile.php'); 
```

在上下文中，此代码的使用如下：

```
/* send email to new Customer */
$emess = "You have sucessfully registered. ";
$emess .= "Your new username and password are:  ";
$emess .= "\n\n\t$loginName\n\t";
$emess .= "$password\n\n";
$emess .= "We appreciate your interest. \n\n";
$emess .= "If you have any questions or problems, ";
$emess .= " email service@ourstore.com";
$subj = "Your new customer registration"
# $mailsend=mail("$email","$subj","$emess");
header('Location: Profile.php'); 
```

在我学习 PHP 时，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T13:12:56.533

您缺少一个分号：

```
$subj = "Your new customer registration"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:18:16.397

as mentioned above, you are missing a semicolon

when you have an internal server error you can look for the error in the log file,

or enabling errors printing on screen (DONT enable it on production) with

```
 ini_set("display_errors",true);
 error_reporting(E_ALL); 
```

# c# - 如何在 Windows 窗体 C# 中将扩展 ASCII 转换为十进制？

> ID：12006533
> 
> 赞同：0
> 
> 时间：2012-08-17T13:12:12.677
> 
> 标签：c#, winforms, ascii, extended-ascii, asciiencoding

我正在编写一个 Windows 应用程序。在将**扩展 ASCII [128-256]**转换为其十进制等效项时遇到问题。

当我从 jar 文件中接收到扩展的 ASCII 比如说“Œ”时，它会像这样进入 C# 应用程序：�.

我能知道如何将其转换为等效的十进制数 [即] 140。

```
string textToConvert = "Œ";
Encoding iso8859 = Encoding.GetEncoding("iso-8859-1");
Encoding unicode = Encoding.Unicode;
byte[] srcTextBytes = iso8859.GetBytes(textToConvert);
byte[] destTextBytes = Encoding.Convert(iso8859,unicode, srcTextBytes);
char[] destChars = new char[unicode.GetCharCount(destTextBytes, 0, destTextBytes.Length)];
unicode.GetChars(destTextBytes, 0, destTextBytes.Length, destChars, 0);
System.String szchar = new System.String(destChars);

MessageBox.Show(szchar); 
```

请帮我。我应该如何进行？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T14:28:41.260

我想你正在寻找这样的东西

```
 String str="œ";
    var bytes = Encoding.GetEncoding("Windows-1252").GetBytes(s);
    string binStr = string.Join("", bytes.Select(b => Convert.ToString(b, 2)));
    int decimalEquivalent=Convert.ToInt32(binStr,2);
    Console.WriteLine(decimalEquivalent); 
```

这适用于 ASCII [128-255]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:08:07.447

你有错误的编码。正如 Hans 所指出的，iso-8859-1 编码没有字符 128-159。根据[这篇文章](http://en.wikipedia.org/wiki/Western_Latin_character_sets_%28computing%29)，有 3 种编码包含您要查找的字符。有iso-8859-15，Windows-1252，另一个是mac。由于这来自一个 jar 文件，因此应该是独立于操作系统的，我会说正确的编码是 iso-8859-15。

使用正确的编码，您对 GetBytes 的调用应该返回一个包含十进制值的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:08:49.037

首先，ISO-8859-1 中的 140 是 U+008C - ISO-8859-1 在数字和代码点之间具有直接的一对一映射 - 而 U+008C 是一个控制字符。众所周知，它没有`Œ`（众所周知，如果在通常情况下使用它，法国人必须不使用连字，而`Æ`被包括在内是因为在某些语言中它是为了支持它是一个单独的字母“ ash”而不是在法语中使用的连字。脾气变大了）。

```
string textToConvert = "Œ"; 
```

'"Œ"' 是一个字符串。它与“扩展 ascii”无关。它是由 UTF-16 在幕后实现的，但你甚至不应该这样想，而是一个与数字、字节或编码无关的字符串，直到你开始读取和写入流（如文件）。

```
 Encoding iso8859 = Encoding.GetEncoding("iso-8859-1"); 
```

如上所述，您当然不希望这样。您可能想要`GetEncoding("Windows-1252")`，因为这是与 8859-1 匹配的 Windows 编码，只是它取出了一些控件并放入了更多字母，包括`Œ`在 position `140`。假设您以这种方式更改它...

```
byte[] srcTextBytes = iso8859.GetBytes(textToConvert); 
```

好的，此时——如果你改用 CP-1252——你有一个单字节的字节数组，值为 140 (0x8C)。

```
byte[] destTextBytes = Encoding.Convert(iso8859,unicode, srcTextBytes);
char[] destChars = new char[unicode.GetCharCount(destTextBytes, 0, destTextBytes.Length)];
unicode.GetChars(destTextBytes, 0, destTextBytes.Length, destChars, 0);
System.String szchar = new System.String(destChars);

MessageBox.Show(szchar); 
```

我不知道你想在这里做什么。你从一个字符串开始，你以一个字符串结束，这是怎么回事？

让我们放弃这一点，从头开始。

如果你有一个字符串并且你想要它在 CP-1252 中代表它的字节，那么：

```
byte[] result = Encoding.GetEncoding("Windows-1252").GetBytes(inputString); 
```

如果你在 CP-1252 中有一些字节并且你想要它们代表的字符串：

```
string result = System.Text.Encoding.GetEncoding("Windows-1252").GetString(inputBytes); 
```

如果您想在 Windows-1252 中读取或写入流（文件、网络流等），请使用使用该编码创建的 StreamReader 或 StreamWriter：

```
using(TextReader reader = new StreamReader(source, Encoding.GetEncoding("Windows-1252"));
using(TextWriter writer = new StreamWriter(sink, Encoding.GetEncoding("Windows-1252")); 
```

# c# - 如何在 C# 水晶报表 Visual Studio 2010 中进行打印预览

> ID：12006534
> 
> 赞同：2
> 
> 时间：2012-08-17T13:12:15.363
> 
> 标签：c#, visual-studio-2010, printing, crystal-reports-2010

我有一个应用程序，它有两个选项，打印报告或预览报告。我有以下代码来打印报告-

```
FCPMS.Reports.rptPanelStudy crtrptPanelStudy = new FCPMS.Reports.rptPanelStudy();
crtrptPanelStudy.FileName = tReportFileName; -(refers to the file location on the  computer)
crtrptPanelStudy.DataDefinition.FormulaFields["PANELNUM"].Text = "'5'";
foreach (Table tblTable in crtrptPanelStudy.Database.Tables)
{
    tiInfo = tblTable.LogOnInfo;
    tiInfo.ConnectionInfo = ciConnection;
    tblTable.ApplyLogOnInfo(tiInfo);
}

crtrptPanelStudy.PrintToPrinter(1, false, 0, 0); 
```

这可以正常工作并打印报告。但是我很难找到类似的代码来简单地使用此报告打开打印机预览。有谁知道我该怎么做？我所需要的只是在没有实际打印报告的情况下弹出打印机预览。任何帮助，将不胜感激。

我也尝试使用打印对话框 -

```
PrintPreviewDialog printpreview = new PrintPreviewDialog();
printpreview.Document = crtrptFlowRangeSummary;
printpreview.ShowDialog(); 
```

但是在第二行得到了这个错误

> 错误 35 无法将类型隐式转换`FCPMS.Reports.rptFlowRangeSummary`为`System.Drawing.Printing.PrintDocument`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:36:14.060

我不确定您是如何实现或声明 crtrptFlowRangeSummary 的，但您可以在下面尝试此代码。

这也假设您有这样声明的事件

```
private void CrystalReportPrintPreviewForm_Load(object sender, EventArgs e)
{
    if(crtrptFlowRangeSummary !=null)
    crystalReportViewer1.ReportSource = crtrptFlowRangeSummary;
}

CrystalReportPrintPreviewForm crystalReportPrintPreview = 
       new CrystalReportPrintPreviewForm(crtrptFlowRangeSummary);
crystalReportPrintPreview.ShowDialog(); 
```

# groovy - 创建字符串文字并期待一个新实例

> ID：12006538
> 
> 赞同：2
> 
> 时间：2012-08-17T13:12:25.863
> 
> 标签：groovy

也许我只是疯了，或者我忘记了事情应该如何运作。但是我正在追查一个错误（在学习一些 Groovy 时），发现以下断言失败了。我想我认为当使用字符串文字时，会为其创建一个新的 String 实例。我错了吗？

```
String one = 'one'
String two = 'one'

// I thought this should fail, but it doesn't
assert one.is(two) == false

one = new String("one")
two = new String("one")

// This works as expected
assert one.is(two) == false 
```

通过使用 dump() 方法，我可以看到它们确实是同一个 String 实例。任何帮助或指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:18:14.020

当您使用字符串文字时，Java 允许它们被实习，因此您获得相同的实例..

VM 规范中的[第 2.3 节](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html#20359)提到了这一点。

> 字符串字面量，更一般地说，作为常量表达式的值的字符串是“内部的”，以便使用 String.intern 方法共享唯一的实例。

Groovy 也遵循这个规则

# jquery - 是否可以在从主视图调用部分视图的同时将 JSON (ID) 返回到主视图

> ID：12006543
> 
> 赞同：0
> 
> 时间：2012-08-17T13:12:57.357
> 
> 标签：jquery, json, asp.net-mvc-3

示例 - 单击按钮

```
$('#btn').click(function () {
    var flag = false;
    var b;
    $.ajax({
        type: 'GET',
        url: '/Test/PV1/' + $('#Elements').val(),
        data: null,
        success: function (data) {
            alert(data.pageID);
        }
    });
    return false;
}); 
```

在控制器中

```
public ActionResult PV1(int id)
{
    //-- here i need to make a call to the partial view as well as return the pageID to the main view
} 
```

是否可以在从主视图调用部分视图的同时将 JSON (ID) 返回到主视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:34:41.047

您可以将事件从您的部分传给您的父母（尽管它通常不被认为是最佳实践）。

IE。在您的父母中，具有将 ID 设置为某物的功能。然后在您的部分 onSuccess 中调用该函数。

例如。

**父视图**

```
function doSomethingWithId(id){
    // do whatever you wanted to with the id now that its in the parent view
} 
```

**局部视图**

```
$('#btn').click(function () {
var flag = false;
var b;
$.ajax({
    type: 'GET',
    url: '/Test/PV1/' + $('#Elements').val(),
    data: null,
    success: function (data) {
        doSomethingWithId(data.pageID);
    }
});
return false; 
```

});

# ruby-on-rails - 如何一键获取子模型（记录）？

> ID：12006544
> 
> 赞同：2
> 
> 时间：2012-08-17T13:12:57.030
> 
> 标签：ruby-on-rails

我正在开发 Rails 3.2.6 应用程序。我有一个`Status`模型，一个`Event`模型和一个`Photo`模型。

**事件**

```
Has_many :statuses 
```

**地位**

```
Belongs_to :event
Has_one :photo 
```

**照片**

```
Belongs_to :status 
```

我想获取属于选定事件的所有状态消息（这工作正常），但我也想获取属于每个状态消息的照片。我怎样才能做到这一点？

这是我获取属于某个事件的状态消息的方式：

```
@event = Event.find_by_id (params[:event_id])
@event.statuses 
```

如何在输出中获取每个状态消息的相关照片？我已经开始了，我想我应该做这样的事情？但这只会获取照片，不会将它们与相应的状态消息“合并”。

```
@photos = @event.statuses.collect {|status| status.photo} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:23:13.817

如果您想减少查询，您可以执行以下操作

```
@statuses = Status.where(:event_id=>params[:event_id]).includes(:photo).all 
```

那么您将能够像这样访问

```
@statuses.each do |status|
    status.event_id # access the status
    status.photo # access the photo
    # status.nil? will check whether photo is there or not
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:24:30.477

您可以尝试在一个查询中选择所有内容：

```
@event = Event.where(:id => params[:event_id]).includes(:statuses => :photo).first 
```

请注意，如果没有链接`first`，它将返回 的实例`ActiveRecord::Relation`，而不是`Event`模型实例。然后你可以做

```
@photos = @event.statuses.map(&:photo).compact 
```

**编辑**

OK 注意到您对某些没有照片的状态的评论。IIRC（我现在没有办法检查这一点），`includes`将执行 LEFT JOIN（可能取决于底层数据库适配器），返回带有和不带照片的状态，因此您必须要么 nil-check 单个`status.photo`refs或用于像我上面所做的那样`compact`过滤掉 nil 对象`@photos`，具体取决于您的目的。

# datacontext - 获取架构信息时的 Linqpad TypeLoadException

> ID：12006552
> 
> 赞同：0
> 
> 时间：2012-08-17T13:13:53.690
> 
> 标签：datacontext, linqpad, connection-timeout, typeloadexception

尝试将大型数据库加载到 linqpad 时出现以下错误。我可以连接到同一台服务器上的较小数据库，但不能连接到这个较大的数据库。该数据库是 Dynamics GP 数据库。不是实际的 DYNAMICS 之一，而是默认的“TWO”之一。

```
System.TypeLoadException 
```

* * *

> 从程序集“TypedDataContext_iuhmuv”中键入“LINQPad.User.TypedDataContext”。版本=0.0.0.0，文化=中性 PublicKeyToken=null'

约束比当前实现允许的更多的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T02:01:08.543

`ushort.MaxValue - 15`CLR 对每个类的方法施加了硬性限制。任何数据库都不太可能有比这更多的表，但是我遇到过*存储过程*数量荒谬的数据库。您的数据库可能有超过 65K 的存储过程/函数？

如果是这样，您可以通过编辑连接（右键单击，属性）并取消选中“包含存储过程和函数”复选框来告诉 LINQPad 不要为它们创建方法。

# ruby-on-rails-3 - content_for 的输出未在 HTML 中的所需位置生成

> ID：12006559
> 
> 赞同：0
> 
> 时间：2012-08-17T13:14:53.913
> 
> 标签：ruby-on-rails-3, yield, content-for

**导轨：3.0.11**

**Ruby：ruby 1.9.3dev（2011-09-23 修订版 33323）[i686-linux]**

这是我的自定义布局文件：

**custom_layout.html.haml**

```
!!!
%html{ :xmlns => "http://www.w3.org/1999/xhtml", :"xml:lang" => "en", :lang => "en" }
  %head
    %meta{ :"http-equiv" => "Content-Type", :content => "text/html; charset=utf-8" }
    %title= SERVICE_NAME
    = render "shared/js_and_css"
  %body
    #wrapper.container_12
      #main.grid_12
        .grid_9.omega
          - flash.each do |name, message|
            = content_tag :p, message, :id => "flash_#{name}"
          = yield
        = yield :side_nav

    = render "layouts/footer" 
```

查看文件：**personal_information.html.erb**

```
<div class="c1">
  <div class="c2">
    <div class="headings">
      <h1><%= t("general.edit_personal_information")%></h1>
    </div>
    <div class="info-area">
      <%= form_for @user, :html => { :multipart => true, :id => "user_form" }  do |f| %>
         <%= render :partial => "form", :object => f %>
      <% end %>
    </div>
  </div>
</div>

<% content_for :side_nav do %>
  <%= '<div class="grid_3 alpha">&nbsp;</div>'.html_safe  %>
<% end %> 
```

生成的 HTML：

```
<body>
    <div class="container_12" id="wrapper">
        <div class="grid_12" id="main">
            <div class="grid_9 omega">
                <div class="c1">
                  <div class="c2">
                    <div class="headings">
                        <h1>Edit profile</h1>
                    </div>
                    <div class="info-area">
                        <form>
                            <!-- FORM ELEMENTS HERE -->
                        </form>
                      </div>
                 </div>
                </div>     
            </div>
        </div>
    </div>
    <div class="grid_3 alpha">&nbsp;</div>
</body> 
```

使用**content_for :side_nav**设置的内容在**div id="wrapper"**之后呈现，而不是在**div class="grid_9 omega"**之后呈现。任何人都可以解释是什么导致了这种奇怪的行为，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:42:10.380

您错过了`=`- 您只是在评估代码，但没有将其分配给视图。这应该解决它：

```
<%= content_for :side_nav do %>
  <%= '<div class="grid_3 alpha">&nbsp;</div>'.html_safe  %>
<% end %> 
```

你可以摆脱插值：

```
<%= content_for :side_nav do %>
  <div class="grid_3 alpha">&nbsp;</div>
<% end %> 
```

# http - 如何使用 Webservice 客户端工具查看所有 HTTP 流量信息

> ID：12006561
> 
> 赞同：0
> 
> 时间：2012-08-17T13:15:01.090
> 
> 标签：http, rest, web

我正在使用 Browser Rest Client 来执行 Webservice 调用

我的查询是，是否可以查看 Web 服务调用被打到的服务器（服务器的 IP 地址）之类的信息？

目前我正在使用 HttpFox 和 Firefox，我只获得了像请求数据这样的基本信息。

请让我知道这是否可能？

提前致谢 。

# linq - Linq to xml解析属性时如何处理NullReferenceException

> ID：12006562
> 
> 赞同：0
> 
> 时间：2012-08-17T13:15:07.190
> 
> 标签：linq, exception-handling, linq-to-xml, nullreferenceexception

我有一个简单的 xml。

```
 var FieldsInData = from fields in xdoc.Descendants("DataRecord")
                           select fields; 
```

现在我在 FildsInData 中有 n 个不同的 XElement 项目。

```
 foreach (var item in FieldsInData)
        {
            //working
            String id = item.Attribute("id").Value;
            //now i get a nullReferenceException because that XElement item has no Attribute called **fail**
            String notExistingAttribute = item.Attribute("fail").Value;
        } 
```

使用该失败属性，我得到 nullReferenceException，因为它不存在。有时是，有时不是。我该如何优雅地处理它？

我尝试使用 value.SingleOrDefault(); 但我得到另一个例外，因为它是 Char 的 IEnumerable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:22:38.140

只是为了添加另一种方法来执行此操作，您还可以滥用扩展方法进行空检查：

```
public static class XmlExtensions 
{
    public static string ValueOrDefault(this XAttribute attribute) 
    {
        return attribute == null ? null : attribute.Value;
    }
} 
```

然后像这样使用它：

```
string notExistingAttribute = item.Attribute("fail").ValueOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:17:41.930

您只需要检查`null`：

```
String notExistingAttribute = "";

var attribute =  item.Attribute("fail");
if(attribute != null)
    notExistingAttribute = attribute.Value; 
```

# asp.net - 如何动态确定post-asp.net后的控制路径？

> ID：12006565
> 
> 赞同：0
> 
> 时间：2012-08-17T13:15:28.073
> 
> 标签：asp.net

我有一些 JS 代码位于 userControl 中。userControl 位于内容占位符内，更糟糕的是，将来可以从许多页面重用服务器端脚本。

该 JS 负责通过 JSON 创建对页面的发布请求。

在 IE 中：元素的名称很好 - 例如姓名、姓氏、地址

但在 Firefox 中，我也得到了服务器端控件的前缀。

例如：

ctl00_ContentPlaceHolder_UserControl1_Name

ctl00_ContentPlaceHolder_UserControl1_Surname

ctl00_ContentPlaceHolder_UserControl1_Address

一旦我收到了 post 值，我希望有一些聪明的方法可以动态地确定控件的路径，这样我就可以获得真正的表单元素名称。

这可能吗？这是一个 .net v2 解决方案，因此我无法像 v4 解决方案那样更改配置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:17:54.603

You should be able to stash away the `ClientID` property of the controls you want in a javascript object.

# javascript - 跨域ajax请求jquery获取CSV

> ID：12006574
> 
> 赞同：1
> 
> 时间：2012-08-17T13:16:16.903
> 
> 标签：javascript, ajax, jquery, csv

我想使用跨域 AJAX 请求获取 CSV。我正在使用 jquery。

我知道我们可以使用 JSONP 来进行跨域 ajax 请求，但在这里我必须获取 CSV 而不是 JSON。

它是一个 Intranet 站点，需要登录，所以我不能使用 YQL。

有没有其他办法。下面是我的代码

```
 $.ajax({
        url: 'http://si-dtp-219:3333/WS/WS/dshbrdData?reportname=Svt',
        dataType : 'text',
        callback : callbackFunction,
        crossDomain : true,
        type: 'GET',
        timeout: 50000,
        success: function(res) {
            callbackFunction(JSON.stringify(res));
        },
        complete: callbackFunction,
         error: function(x, t, m) {
            if(t==="timeout") {
                alert("got timeout");
            } else {
                console.log(x);
                console.log(t);
                console.log(m);
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:24:27.593

对于我们的 Intranet 站点，我们经常使用代理脚本来处理这个问题。也就是说，您在 Intranet 中编写一个代表您发出请求的脚本。如果您使用的是 PHP，它可能很简单：

```
<?php
echo file_get_contents("whatever_url");
?> 
```

然后在您的 Javascript 应用程序中，您只需对域内的此页面进行 AJAX 调用。这样就完全没有跨域问题（来自客户端的请求是对其域内的页面，服务器端请求对其域没有限制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:55:37.290

好吧，您仍然可以使用 JSONPish 调用。您应该做的是在您的 URL 中添加一个脚本标签，该标签为该值分配一个变量，而不是对该数据执行您想要的操作。您应该使用纯 JS 而不是 jQuery，因为它需要 JSON 格式。

[http://devlog.info/2010/03/10/cross-domain-ajax/](http://devlog.info/2010/03/10/cross-domain-ajax/)

# android - 手动将元素添加到光标

> ID：12006579
> 
> 赞同：0
> 
> 时间：2012-08-17T13:16:36.377
> 
> 标签：android, cursor, android-cursoradapter

我有一个`Cursor`从我的数据库中获取一些类别，但我需要手动添加一个不在数据库中的类别，所以它们都可以在`ListViewActivity`. 我获得类别的方式如下：

```
Cursor categories = myDbHelper.getCategoriesCursor(
                    categorySelected, Tools.getLanguage());
            startManagingCursor(categories);
            CategoriesCursorAdapter categoriesAdapter = new CategoriesCursorAdapter(
                    getApplicationContext(), categories);
            setListAdapter(categoriesAdapter); 
```

我想用我想要的字段创建一个新`ArrayList<String>`的并将其传递给`Adapter`但是我仍然无法获取这些值并将它们添加到`categories`列表中。

我怎么能这样做？

非常感谢提前

编辑：这是在“我的 DatabaseHelper”中获取类别的方法

```
public Cursor getCategoriesCursor(int parentId, int language) {
        try {
        String sql = "";
        if (parentId == 0) {
            sql = "SELECT 0 as '_id', 'Agenda' as 'name_category', 0 as 'sort' UNION ALL SELECT categories._id, name_categories.name_category, categories.sort "
                    + "FROM categories JOIN name_categories ON categories._id = name_categories.category_id "
                    + "WHERE categories.parent_id = " + parentId
                    + " AND name_categories.language_id = " + language + " ORDER BY sort";
        } else {
            sql = "SELECT categories._id, name_categories.name_category "
                    + "FROM categories JOIN name_categories ON categories._id = name_categories.category_id "
                    + "WHERE categories.parent_id = "
                    + parentId
                    + " AND name_categories.language_id = " + language + " ORDER BY sort";
        }
        Log.d("XS2TheWorld", sql);
        return myDataBase.rawQuery(sql, null);
        } catch (Exception e) {
            try {
                copyDataBase();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            return getCategoriesCursor(parentId, language);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:34:29.543

更简单：我刚刚修改了我的 SQL 查询并且它有效

# php - Soundcloud api 访问令牌 (Oauth2)

> ID：12006580
> 
> 赞同：1
> 
> 时间：2012-08-17T13:16:41.453
> 
> 标签：php, api, oauth, access-token, soundcloud

## 测试 php-soundcloud

我尝试使用脚本[php-soundcloud](https://github.com/mptre/php-soundcloud) (Oauth 2)，但在用户登录后遇到问题。
我完全按照教程 wiki：[https ://github.com/mptre/php-soundcloud/wiki/Oauth-2](https://github.com/mptre/php-soundcloud/wiki/Oauth-2)

当用户接受应用程序时，它会返回以下 URL：`http://mywebsite.com/?code=123456789123456789`

我得到了正确的信息，`$_GET['code']`但该函数`accessToken()`不会检索信息，它给了我一个**HTTP 代码 401**错误（见下图）。

![HTTP 代码 401 soundcloud](../Images/fe3dd63385737fbe44fcfdc1c4fec9d6.png)

这是我的代码（最基本的）：

```
<?php

include 'Services/Soundcloud.php';
$soundcloud = new Services_Soundcloud('_myClientId_', '_ClientSecret_', '_RedirectUri_');

echo '<a href="' . $soundcloud->getAuthorizeUrl() . '">Connect with SoundCloud</a><br />';

try {
    $accessToken = $soundcloud2->accessToken($_GET['code']);
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    exit($e->getMessage());
} 
```

这是 soundcloud 的 HTTP 状态代码：http: [//developers.soundcloud.com/docs/api/guide#errors](http://developers.soundcloud.com/docs/api/guide#errors)
他们说代码 401 是：确保您向我们发送一个`client_id`或`access_token`.
但我一定会发送正确的 id 和 token！：/

如果有人已经操作过 SoundCloud API 并且知道我为什么会收到此错误，请告诉我任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:44:12.117

好的，我找到了！太简单了......
我没有看到`setAccessToken()`将令牌添加到类的函数

```
try {
    $accessToken = $soundcloud2->accessToken($_GET['code']);
    // this is the part that I was missing
    $soundcloud2->setAccessToken($accessToken["access_token"]);
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    exit($e->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T20:23:46.557

atmon3r 的回答肯定是错误的。对 setAccessToken() 的调用完全没有必要，因为对 accessToken() 的调用已经设置了访问令牌。此外，他在调用 accessToken() 时遇到了异常，因此在发出异常的代码*之后*添加一行代码不可能修复它。

我遇到了同样的错误，在我的情况下**，它是由调用 Services_Soundcloud 构造函数而没有第三个 (redirect_uri) 参数引起的**。添加此参数（首先应该没有必要，因为它完全没用，但 SoundCloud API 的设计非常糟糕）使它对我有用（无需调用 setAccessToken）。

除了 API 构思不周（因为它只允许在应用程序中配置一个固定的返回 url [本身已经是一个愚蠢和严重的限制] 并且同时需要它作为参数 [当它只能有一个有效的value])，PHP 库是有缺陷的，如果您在没有必需的第三个参数的情况下调用构造函数，它不会抛出异常。

请注意，return_url 的值必须与应用程序中配置的值匹配。

# arrays - 循环遍历一个json对象并计算不同数组中具有相同值的元素

> ID：12006582
> 
> 赞同：1
> 
> 时间：2012-08-17T13:16:47.653
> 
> 标签：arrays, json, count, for-in-loop

我想遍历一个 json 对象并计算不同数组中具有相同值的元素。这是我的对象的示例

```
var testconn =
{"_total": 3,
    "values":
    [
        {
            "articlesRead": [
                { "articleId": 1001 },
                { "articleId": 1002 },
                { "articleId": 1003 },
                { "articleId": 1004 },
                { "articleId": 1005 },
                { "articleId": 1006 }
            ]
        },
        {
            "articlesRead": [
                { "articleId": 1001 },
                { "articleId": 1002 },
                { "articleId": 2001 },
                { "articleId": 2002 },
                { "articleId": 2003 },
                { "articleId": 2004 }
            ]
        },
        {
            "articlesRead": [
                { "articleId": 1001 },
                { "articleId": 3001 },
                { "articleId": 3002 },
                { "articleId": 3003 },
                { "articleId": 3004 },
                { "articleId": 3005 }
            ]
        }
    ]
} 
```

我想计算数组中存在多少个 ID。所以对于这个例子，我应该有： 1001 x 3 1002 x 2 1003 x 1 1004 x 1 2001 x 1 等

我正在像这样循环我的对象

```
for (i = 0; i < testconn.values.length; i++) {
    var c = testconn.values[i];
    for (j = 0; j < c.articlesRead.length; j++) {
        var a = c.articlesRead[j];
        for (var key in a) {
            if (a[key] is bigger then 1) {
                count a[key]
            }
            return number of

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:45:43.683

只需使用一个对象将值存储为键并递增它：

```
var id={};
for (var i = 0; i < testconn._total; i++) {
    var c = testconn.values[i];
    for (j = 0; j < c.articlesRead.length; j++) {
        var a = c.articlesRead[j];
        id[a.articleId]= id[a.articleId] ? ++id[a.articleId]: 1;
    }
}
console.log(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:48:40.013

这是一个简单的方法，使用 4 个嵌套的 for 循环，虽然可能不是最有效的。

```
var list = testconn.values;
var dict = {};  

for(var i in list){
    for(var j in list[i]){
        for(var k in list[i][j]){
            for(var l in list[i][j][k]){
                var key = list[i][j][k][l];
                dict[key] = dict[key] ? ++dict[key] : 1;
            }
        }
    }
} 
```

Dict 现在是您想要的关联数组。

# css - HTML 电子邮件字体在 Opera Mail 中自动缩放？

> ID：12006583
> 
> 赞同：2
> 
> 时间：2012-08-17T13:17:10.907
> 
> 标签：css, opera, html-email

我有一封 HTML 电子邮件，其字体大小使用内联 CSS 中的像素（16 像素）。大多数客户端都按预期工作，但在 Opera 的邮件面板 (v12.01) 中，当我缩小视口的宽度时，字体大小也会按比例缩小。

这也发生在我测试过的所有其他 HTML 电子邮件中。

有没有其他人遇到过这种情况，有没有人有解决方法？

**2012 年 8 月 29 日更新：**

我在电子邮件右上角的扳手菜单下找到了一个选项，名为“适合宽度”。取消选中此选项会导致 Opera Mail 的行为更像标准电子邮件客户端。

所以关于解决方法的问题仍然存在......当电子邮件创建者知道电子邮件自动适应视口宽度时，这种行为是否可以被电子邮件中的一行代码覆盖？我正在寻找与网站可用的解决方案类似的东西：[https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:25:20.220

您应该在需要该字体大小的最内部元素中使用字体大小的值。例如，给一个`font-size:15px;`表是行不通的，而是你应该给这个表`font-size:15px;`的各个`td`元素。

# asp.net - 应用程序中两个 iframe 的会话问题

> ID：12006584
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:15.930
> 
> 标签：asp.net

我有一个应用程序，其中我使用了两个 iframe 来显示外部应用程序的内容。

我的外部站点的设计方式是，一旦您登录该站点，它将显示内容，否则它会一次又一次地显示登录屏幕（如果您未登录）。

我有一个将登录到外部站点的 url(http:Ipaddress/pagename?username=abcd&password=abcd)

我将此网址设置为第一个 iframe 源并将另一个网址设置为另一个 iframe

这样做我得到了登录并看到了第一个 iframe 的所需输出，但得到了第二个 iframe 的登录屏幕，但是在另一个回发期间，我登录了两个 iframe 并看到了所需的输出。

我希望 iframe 在第一次通话时都应该登录。（不知道为什么没有为第二个 iframe 创建会话）

请帮帮我，谢谢 Saurabh Gupta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:35:41.983

我认为它与 p3p 策略有关，您可以检查以下问题/答案 [Cookie 已阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)

另一种解决方案是使用 iFrame 代码的包装页面：

```
<!DOCTYPE HTML>
<body>
<script type="text/javascript">
$(function(){
    $('body').append('<form id="cookiesHack" action="http://yourUrl.com/" method="get"></form>');
    $('#cookiesHack').submit();
});
</script>
</body> 
```

# jquery - 将不同的图像更改/裁剪为动态调整大小的大小（根据浏览器的）div

> ID：12006587
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:26.400
> 
> 标签：jquery, css

我知道有大约一千个线程有同样的问题。如果我告诉你我读了所有这些，我会撒谎，但我肯定读了很多。

我目前的问题是：我目前有一个 div 可以根据浏览器的大小调整大小，并且底部有一个带有“菜单”的页脚。现在，我在 div 中放置了一些淡入淡出的“背景”图像（我使用引号是因为它们没有设置为 css 属性背景图像，因为你不能使用 jquery 转换和 css3 转换是IE 中不支持）。我用`$(window).resize`为了实现这一点（这样我还解决了图像过度拉伸 div 到菜单不会显示的点的问题）。到目前为止一切顺利，当图像不适合浏览器的宽度/高度比例时，问题就出现了。当然，我尝试根据屏幕的像素动态使用最大宽度、高度等来解决这个问题，并且在某种程度上它起作用了。我说在某种程度上是因为某些图像的纵横比是“错误的”，当我调整它们的大小时（一些在高度，一些在宽度），它们会在屏幕边缘留下空白。如果它只是一张图像，我会手动剪切该图像并使其适合。问题是我有很多。

我解决这个问题的想法是：当调整到浏览器的宽度或浏览器的高度时，每个图像都会留下空白。我想将图像调整为不会留下空白的大小，并裁剪（或剪切）超出屏幕高度/宽度的图像的其他部分。

我不知道如何实现这一点。我在 jquery 中搜索了一些图像裁剪，发现了我不想要的东西。选择图片的一部分很麻烦……我不知道。

有任何想法吗？我可以回答任何问题或提供有关我的代码的更多详细信息。

非常感谢！

我改变图像的功能：

```
$(function() {
        $imgs = $('.bgChange'),
        imgAmount = $imgs.length;

    $($imgs.css('position', 'absolute').hide().get(0)).show();

    window.setInterval(swapImages, tiempo);

    function swapImages() {
        var $currentImg = $($imgs[current]);
        if(current == imgAmount-1) current = -1;
        var $nextImg = $($imgs[++current]),
            speed = 1500;
        $currentImg.fadeOut(speed,function(){$nextImg.fadeIn(speed);});

    }
}); 
```

我的 .bgChange 课程

```
.bgChange
{
margin:0;
border:0;
padding:0;
z-index:-1;
position:absolute;
} 
```

我的 div 与图像（它使用一些我不理解的 css 属性来适应屏幕的大小，并且在一个单独的文件中。如果有人需要它，我可以粘贴它们）：

```
<div id="DummyFondo">
        <img class='bgChange' src="img/bg03.jpg" alt="" />
        <img class='bgChange' src="img/foto_2.jpg" alt="" />
        <img class='bgChange' src="img/Semillas2.jpg" alt="" />
         ....goes on
</div> 
```

我的调整大小功能：

```
$(window).resize(function()
{
    ResizeImages();
}); 
```

resizeImages 方法不起作用，这是我想要更改的方法。我尝试过类似的方法

```
function ResizeImages()
{

    $imgs = $('.bgChange'),
    imgAmount = $imgs.length;
    for(a = 0; a < imgAmount; a = a + 1)
    {
        var $currentImg = $($imgs[a]);
        $currentImg.css("max-width", $(window).width() + "px" + " !important;");
        $currentImg.css("max-height", $(window).height() + "px" + " !important;");
    }

} 
```

并将这些内容更改为高度、宽度、最小宽度等。这里是我想放置“裁剪”逻辑的地方：我决定裁剪哪一侧（以及裁剪本身）的计算

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:22:05.613

首先，这是我将要解释的一个小演示，它根据您的规范调整图像大小以适合**窗口**`div`（您可以轻松地将其更改为适合一个或任何其他容器元素）：[指向小演示](http://goo.gl/Ne8dO)。

我的想法是，你总是调整到任何尺寸（高度/宽度）更大的尺寸，然后，为了“裁剪”你拥有的较小尺寸中的多余量，你将定位“拉”到适当的负值。这是在该演示中调整大小的代码：

```
function resizeImg() {
    var curimg = $('.bgChange');
    var ww = $(document).innerWidth(), hh = $(document).innerHeight();
    if(hh > ww) {
        curimg.height(hh);
        var lft = - Math.floor((curimg.width() - ww) / 2);
        curimg.css({"top":"0px", "left":lft});
    }
    else if(ww > hh) {
        curimg.width(ww);
        var tp = - Math.floor((curimg.height() - hh) / 2);
        curimg.css({"left":"0px", "top":tp});
    }
} 
```

我希望这对你有任何帮助！如果代码的任何部分含糊不清，我很乐意解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:22:03.240

您需要支持哪些浏览器？CSS3 可以这样排序：

```
.backgroundDiv {
    background-size: cover;
} 
```

jQuery 可以在旧版浏览器中实现这一点：http: [//louisremi.github.com/jquery.backgroundSize.js/demo/](http://louisremi.github.com/jquery.backgroundSize.js/demo/)

# sql - 分组问题（Teradata SQL）

> ID：12006589
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:34.647
> 
> 标签：sql, teradata

我收到错误“选定的非聚合值必须是关联组的一部分”

当我添加行“，current_date - pmnt_rlse_dt as “Days since Paid”时，我开始收到此错误

我知道这与 group by 有关，但我还没有弄清楚。

```
 select ee.alias_last_nm || ', ' || ee.alias_first_nm as "Custodian"
   ,clm.i_sys_clm
   ,clm.c_clm as "Claim Number"
   ,clm.i_pol as "Policy Number"
   ,clm.n_lst as "Last Name"
   ,clm.n_fst as "First Name"
   ,clm.c_sta_clm as "Status"
   ,mx_dt as "Last Payment Date"

from ltc_p.vltc_clm_mo clm

left join (select indiv_sorce_syst_cd
            ,sorce_upc_indiv_id
            ,alias_last_nm
            ,alias_first_nm
from edw_p.upc_indiv_alias_v2
where row_end_dt = '9999-12-31' and
indiv_sorce_syst_cd = 'ORG') ee
on clm.c_ams_clm = ee.sorce_upc_indiv_id

inner join(select sorce_claim_id
            ,max(pmnt_rlse_dt) as mx_dt
            ,current_date - pmnt_rlse_dt as "Days Since Paid"
from ltc_p.claim_pmnt pp

having  max(pmnt_rlse_dt) is not null) as d
on clm.i_sys_clm = d.sorce_claim_id

where clm.c_sta_clm = 'AC'
order by 1,2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:03:36.277

您的错误消息与`MAX`在派生表查询中使用该函数`d`而不使用 GROUP BY 子句有关。

但是，我猜目的是返回每个 sorce_id 的最大 pmnt_rlse_dt。如果是这样，请尝试使用 OLAP 窗口函数：

```
inner join(
   select  sorce_claim_id
         , pmnt_rlse_dt   as mx_dt
         , current_date - pmnt_rlse_dt as "Days Since Paid" 
   from    ltc_p.claim_pmnt
   where   pmnt_rlse_dt is not null
   qualify row_number() over (partition by sorce_claim_id
                              order by pmnt_rlse_dt desc) = 1
   ) as d 
```

该`QUALIFY`表达式需要一点时间才能完全理解，但它非常强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:20:02.120

您没有按子句分组。

在对数据进行分组时，您只能使用 max 和 have 等聚合函数

# vb6 - vb 6 编译错误'用户定义类型未定义'

> ID：12006595
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:43.147
> 
> 标签：vb6

当我尝试编译代码时，在 vb 6 中出现错误“未定义用户定义的类型”。谁能告诉我我需要做什么来解决这个错误。以下是我收到错误的行

```
objINI As clsMPT_INI_COnfig 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:26:29.560

将包含该类的类文件添加回项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:35:12.730

您正在尝试创建 clsMPT_INI_CONfig 的实例。您必须将其创建为一个类，或者确保您已导入具有此类的正确库。

clsMPT_INI_CONfig 不是 VB 预定义的类。因此，如果不针对其原始来源，就不能隐式调用它。

# iphone - 向 didSelectAnnotation MapKit 添加位置特定的 Tap 功能

> ID：12006597
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:46.287
> 
> 标签：iphone, parameters, annotations, mkmapview

我在 mapView 上放了许多注释。这适用于下面的代码

```
float userLatitude = [[userDict objectForKey:@"lat"]floatValue];
float userLongitude = [[userDict objectForKey:@"long"]floatValue];
NSString *someString = [someArray objectAtIndex:i];
NSString *anotherString = [anotherArray objectAtIndex:i];

    CLLocationCoordinate2D loopCoord = {.latitude =  userLatitude, .longitude =  userLongitude};

    MapAnnotationViewController *addAnnotation = [[MapAnnotationViewController alloc] initWithCoordinate:loopCoord];
        self.localImage = [UIImage imageNamed:@"first.png"];
        [addAnnotation setTitle:someString];
        [addAnnotation setSubTitle:anotherString];
        [mainMapView addAnnotation:addAnnotation]; 
```

我本质上想添加一个自定义触摸，即使当一个人触摸地图上的每个注释时也会触发。该方法需要从地图上的特定位置触发（不是标准的 didSelect）我如何标记或将每个注释中的参数传递给委托方法：

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 
```

我如何获得这样的代码：

```
UITapGestureRecognizer *singleFingerTap = 
  [[UITapGestureRecognizer alloc] initWithTarget:self 
                                          action:@selector(handleSingleTap:)];
[self.view addGestureRecognizer:singleFingerTap];
[singleFingerTap release];

//The event handling method
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
  CGPoint location = [recognizer locationInView:[recognizer.view superview]];

  //Do stuff here...
} 
```

传递给`didSelectAnnotationView`每个特定的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:26:40.027

我相信传统的方法是创建一个实现 MKAnnotation 协议的类并将您的自定义数据存储在其中。您需要将标题、副标题和坐标作为标准存储，并且可以添加 touchSelector。然后当 didSelect 方法被调用时，其中一个参数是 MKAnnotationView，它有一个名为 annotation 的属性。将其转换为您的自定义类，然后访问该选择器属性。

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
 {
   MyAnnotationClass *myAnno = (MyAnnotationClass *)view.annotation;
   //Do something with myAnno.touchSelector;
} 
```

这是一个关于在您自己的 MKAnnotation 兼容类中 [存储数据的问题：在 MKAnnotation 中存储数据？](https://stackoverflow.com/questions/5939223/store-data-in-mkannotation)

# sql - 将前导零添加到记录 + 演员

> ID：12006599
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:56.487
> 
> 标签：sql, sql-server

我的表中的每条记录都有一个增量字段。

我想在数字中添加前导零，以使它们的字符数相同，而且数字前面的 CAST() 字母作为标识符。

添加前导零；

```
SELECT RIGHT('00000' + CONVERT(VARCHAR, No_), 6) 
```

添加我的标识符；

```
SELECT 'FC' + CAST(No_ as varchar(50)) 
```

将这两个语句组合到一个字段的正确语法是什么？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:20:38.967

尝试

```
SELECT 'FC' +RIGHT('00000' + CONVERT(VARCHAR, No_ ), 6) 
```

**结果**：No_ = 1

```
FC000001 
```

对于 No_ = 222

```
FC000222 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:20:00.777

只需使用这个：

```
SELECT 'FC' + RIGHT('00000' + CONVERT(VARCHAR, No_), 6) 
```

# h.264 - Processing RTP stream

> ID：12006600
> 
> 赞同：0
> 
> 时间：2012-08-17T13:17:58.223
> 
> 标签：h.264, rtsp, rtp, rtsp-client

Here is some debug info from extracting H.264 from RTP:

* * *

fragmentTypeBits: 7, start_bit: 0, end_bit: 64, RTP payload: 6742E01EDB02C0417845

-> Write SPS

* * *

fragmentTypeBits: 8, start_bit: 128, end_bit: 64, RTP payload: 68CE30A480

-> Write PPS

* * *

fragmentTypeBits: 6, start_bit: 128, end_bit: 64, RTP payload: 06E501AF80

-> skip

* * *

fragmentTypeBits: 28, start_bit: 128, end_bit: 0, RTP payload: 7C85B80000ACAC06C50A0860113B6300072AA32D7D08FDEBD2F8FC06BB80F04D3A65F1B7D0...

-> Write fragmented data... new frame

* * *

fragmentTypeBits: 28, start_bit: 0, end_bit: 0, RTP payload: 7C05FBED4F8D2C4F4A3B80C7149A7C506414B01E911444....

-> Write fragmented data... frame fragment

* * *

*... (multiple times same start end bits = 0) ...*

* * *

fragmentTypeBits: 28, start_bit: 128, end_bit: 0, RTP payload: 7C81E606C50A2F2ED1F2FDC9774972E1E4385A93CF89D225EE49A546AA6DB9FA

-> Write fragmented data... new frame

* * *

Is it fine to have start bit set though there was no end bit set before ?

Also, is it fine to have start / end bits set in the same time ?

And is it fine to have end bit set without having start bit set before ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:38:07.397

来自 RFC 3984：

```
Fragments of the same NAL unit MUST be sent in consecutive order with
ascending RTP sequence numbers (with no other RTP packets within the
same RTP packet stream being sent between the first and last
fragment).  Similarly, a NAL unit MUST be reassembled in RTP sequence
number order. 
```

基本上，第一个分段单元应该有一个起始位设置（即片段类型 = 28），并且分段单元应该有一个递增的序列号，直到最后一个设置了结束位。

设置另一个起始位，或没有起始位的结束位，或无序的序列号，都是不正确的。

# java - Java URL Protocols: classpath:/?

> ID：12006602
> 
> 赞同：13
> 
> 时间：2012-08-17T13:18:00.450
> 
> 标签：java, spring, classpath

I've seen some Spring code that read config files and other resources directly off the runtime classpath using the `classpath:/some/path/to/resource` URL protocol.

Is this a Spring construct or a Java construct?

I can't find any documentation besides this question - [URL to load resources from the classpath in Java](https://stackoverflow.com/questions/861500/url-to-load-resources-from-the-classpath-in-java), which doesn't indicate either way.

If it's a Java construct, can anyone point me to its official documentation?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T13:20:07.687

Well you can always register URL handlers. Java also has a file:/// and jar: handler. Also class.getResource will by default read from the classpath.

[http://code.google.com/p/madura-classpath-protocol-handler/](http://code.google.com/p/madura-classpath-protocol-handler/)

apparently it is a spring feature.

"You can see these standard handlers, and associated implementation classes,in the JDK's RT.JAR file. Look for classes whose fully-qualified name starts with sun.net.www.protocol.For example,the class sun.net.www.protocol.http.Handler defines the HTTP protocol handler. Class sun.net.www.protocol.ftp.Handler defines the FTP protocol handler class."

[http://java.sun.com/developer/onlineTraining/protocolhandlers/](http://java.sun.com/developer/onlineTraining/protocolhandlers/)

"Exception in thread "main" java.net.MalformedURLException: unknown protocol: classpath" (says java 1.6)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T15:33:22.023

类路径：特定于spring。Spring 的资源解析机制（即`PathMatchingResourcePatternResolver`或其他实现）知道`"classpath:"`和“classpath*:”前缀。

它接受并解析为`ClassPathResource`对象，这些对象恰好实现了 springs`Resource`接口。

`Resource`接口，除其他外，有一个方法`getInputStream()`可以用来获取内容，而不必知道它是什么类型的资源。

这与任何 URL 协议处理完全分开，因此您不一定能够直接将其添加为协议处理程序。

但是，您可以将`ClassPathResource`类本身用作协议处理程序的一部分。

# unix-socket - trying out unix network programming

> ID：12006603
> 
> 赞同：2
> 
> 时间：2012-08-17T13:18:01.680
> 
> 标签：unix-socket

I have been studying unix network programming and have been running servers on 127.0.0.1\. But i want to try it on a bigger scale just to spice things up and also get more practical. So, i want host my server applications out on the net. I have heard that there are servers out there which allow you to create an http page and upload it and then view it as an internet user. So, are there other such servers which sublet few ports so that people can run their applications on them.

**Note:** using my friends' computers as a remote device for server and then connecting to it is not feasible as they use Windows and i have to run unix server

**UPDATE:** If my question was not clear, here is an another way i can put it in.

There are services running on ports of different hosts on the internet..like smtp server on port 25 at a particular ip...we can telnet to port 25 of that ip and communicate with that service...in the same way are there any sites which provide a particular port and an ip, so that i can upload my service's object file on that host by ftp, cause that service to run on my assigned port and then using my client on my computer connect to that service over the internet

# c# - 无法从 C# 中的编码字符串创建图像

> ID：12006612
> 
> 赞同：1
> 
> 时间：2012-08-17T13:18:31.807
> 
> 标签：c#

我正在开发一个需要从 Base64 编码字符串写入 .png 图像文件的应用程序。为了做到这一点，我有以下代码：

```
byte[] tempBytes = Convert.FromBase64String(base64EncodedString);
using (MemoryStream memoryStream = new MemoryStream(tempBytes))
{
  System.Drawing.Image image = System.Drawing.Image.FromStream(memoryStream);
  image.Save("C:\\inetpub\\wwwroot\\MySite\\test.png");
} 
```

执行此代码时，我收到以下错误：

```
System.ArgumentException Parameter is not valid. 
```

堆栈跟踪的相关部分如下所示：

```
at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData) 
```

据我了解，这意味着我的 base64encodedString 不是有效图像。但是，我不知道如何确定原因可能是什么。上面的代码在服务器上运行。我正在从我也编写的客户端应用程序传递编码字符串。我已经在客户端和服务器端打印了编码字符串以确保它们匹配。考虑到这两个匹配，这意味着我没有正确编码字符串。我该如何追溯原因。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:23:22.710

您可能需要先序列化图像。（然后在解码时反序列化）

# sql-server-2008 - SQL Server : returning sum value from inner select over rownum

> ID：12006614
> 
> 赞同：0
> 
> 时间：2012-08-17T13:18:36.100
> 
> 标签：sql-server-2008

I'm on this site every day, but I've never posted before. I'm having the hardest time understanding why my query is taking so long.

Because SQL Server doesn't support returning a range of rows, we've had to get pretty fancy, so we're using a

```
SELECT FROM 
    (SELECT ROW_NUMBER() AS rownum...) 
WHERE rownum BETWEEN foo AND bar] 
```

statement.

The inner select returns ~13,000 rows in < 1 second (run separately). One of the columns returned is a `SUM()` from a joined table.

The outer select takes approximately 14 seconds to return the inner select values with a range of 500 - 1000\. However, if I comment out the returned SUM, it takes < 1 second - which is what I would expect.

My question is, why does just the act of returning that SUM in the outer query take so long?

Examples below

Example full query (~14 seconds):

```
SELECT yadayada, number
FROM (SELECT yadayada, SUM(innerNum) AS number, 
          ROW_NUMBER() OVER (ORDER BY yadayada DESC) AS rownum
      FROM table1
      JOIN table2 ON table1.id = table2.id
      GROUP BY yadayada)
WHERE rownum BETWEEN 500 AND 1000 
```

Example inner query (< 1 second):

```
SELECT yadayada, SUM(innerNum) AS number, 
          ROW_NUMBER() OVER (ORDER BY yadayada DESC) AS rownum
FROM table1
JOIN table2 ON table1.id = table2.id
GROUP BY yadayada 
```

Example full query w/o returned SUM (< 1 second):

```
SELECT yadayada --, number (commented out, still returned in inner query)
FROM (SELECT yadayada, SUM(innerNum) AS number, 
          ROW_NUMBER() OVER (ORDER BY yadayada DESC) AS rownum
      FROM table1
      JOIN table2 ON table1.id = table2.id
      GROUP BY yadayada)
WHERE rownum BETWEEN 500 AND 1000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:18:54.350

我将冒险进行两个猜测，这可能会解释这个问题。

首先，当您测量内部子查询时，您是测量第一行出现之前的时间还是整个结果集出现之前的时间？我的猜测是你在看第一行。

我的第二个猜测是你有一个关于 yadayada 和 id 的索引。这意味着子查询只能使用索引来满足。当您包含附加列 innerNum 时，查询引擎实际上必须从其中一个表中读取页面。

因此，整个查询的开销是两件事的组合：

*   需要返回完整的结果集
*   需要访问原始表中的页面

我可能完全离开了，但这可能会给你一些关于可能导致问题的想法。二

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:12:58.597

```
Just try this:

;WITH CTE as 
(
SELECT yadayada, SUM(innerNum) AS number, 
          ROW_NUMBER() OVER (ORDER BY yadayada DESC) AS rownum
      FROM table1
      JOIN table2 ON table1.id = table2.id
      GROUP BY yadayada
)

select yadayada, number from CTE where rownum between 500 and 1000 
```

# php - Stripping encapsulating characters in PHP using sscanf

> ID：12006615
> 
> 赞同：2
> 
> 时间：2012-08-17T13:18:42.200
> 
> 标签：php, string, scanf

Using PHP to call a Java app, the Java app returns a string encapsulated by "[....]", I need to remove the outside brackets and maintain what's inside -a mix of integers, strings, and other special chars like (, etc.. I'm using sscanf successfully later in the process, so I'm a little lost as to why this particular step is so difficult.

Input:

```
 $str = [(123)[334.5 : 765.1] string] 
```

Non-functional code:

```
$format = '[%s]';
sscanf($str,$format,$output); 
```

Later in the process I'm successfully using sscanf to parse the inside string using:

```
$format = '(%d) [%f : %f] %s'; 
```

I'm missing something big here...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:24:44.113

假设字符串*总是*包裹在 [...] 中并且您不需要检查格式不正确的字符串，您可以简单地删除第一个和最后一个字符：

```
$str = substr($str, 1, -1); 
```

*编辑*：这比使用 trim() 和朋友更可靠，因为 ltrim/rtrim 将删除所有前导/尾随方括号，而不仅仅是第一个和最后一个。如果您的字符串曾经包含类似“[[value]..]”的内容，这可能是一个问题 - 您将留下“value]..”。

*另一个编辑*：如果您*确实*需要检查字符串的格式是否正确，很容易验证第一个和最后一个字符是方括号：

```
if ((substr($str, 0, 1) == '[') && (substr($str, -1) == ']')) {
    $str = substr($str, 1, -1);
} else {
    //Something went wrong - the string is not wrapped in [brackets].
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:24:14.987

您可以使用[ltrim](http://www.php.net/manual/en/function.ltrim.php) () 和[rtrim](http://www.php.net/manual/en/function.rtrim.php) () 函数来摆脱外部括号：

```
$str = '[(123)[334.5 : 765.1] string]';
$str = ltrim($str, "[");
$str = rtrim($str, "]");
echo $str; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-08-23T22:24:28.593

来源：[https](https://www.php.net/manual/en/function.sscanf.php#:%7E:text=s%20stops%20reading%20at%20any%20whitespace%20character) ://www.php.net/manual/en/function.sscanf.php#:~:text=s%20stops%20reading%20at%20any%20whitespace%20character 。

> **格式**
> 字符串的解释格式，在 sprintf() 的文档中进行了描述，但有以下区别：
> 
> [...]
> 
> *   s 在任何空白字符处停止读取。

您的格式字符串失败，因为大括号之间有空格字符。

假设`string`输入字符串末尾的子字符串不包含右大括号，则可以改为使用包含右大括号的否定字符类。

代码：（[演示](https://3v4l.org/MpdHV)）

```
$str = '[(123)[334.5 : 765.1] string]';

var_export(
    sscanf($str, '[(%d)[%f : %f] %[^]]]')
); 
```

输出：

```
array (
  0 => 123,
  1 => 334.5,
  2 => 765.1,
  3 => 'string',
) 
```

# ios - Entitlements.plist versus Appname.Entitlements

> ID：12006616
> 
> 赞同：3
> 
> 时间：2012-08-17T13:18:53.837
> 
> 标签：ios, xcode, push-notification, apple-push-notifications, entitlements

I'm implementing APNS (iOS5, Xcode4) into an application and I'm getting the error:

```
"The executable was signed with invalid entitlements." 
```

Research on SO and google is telling me to use Entitlements.plist but I already have Appname.Entitlements, the keys seem to be pretty much identical, and unless I'm missing something adding an Entitlements file is gone from the new file templates.

So What is the difference between these two? Do I need to just add a plist name "Entitlements"?

Also to verify:

-- My provisioning profile supports APNS. -- I am using the correct Distribution profile. -- I'll be doing an Enterprise distribution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:45:30.210

根据[技术说明 TN2250](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG31)，您应该只删除权利文件。

> 如果您在 Target > Build Settings 中定义自定义代码签名权利文件，您可以尝试完全删除该配置并重新构建/重新提交。通常情况下，代码签名权利的定义是不必要的。如果您的应用程序使用自定义钥匙串访问共享或 iCloud，您只需指定自定义代码签名权利文件。否则，请从 Xcode 项目的 Target > Build Settings 上的所有构建配置中删除 Code Signing Entitlements 配置，重新构建并重新尝试提交/验证。

# html - Div width inside an iframe

> ID：12006617
> 
> 赞同：0
> 
> 时间：2012-08-17T13:18:57.843
> 
> 标签：html, iframe, text, width

I have an iframe and with it a body and a div

```
 <iframe name="myiframe">
    <html><head></head>
    <body>
    <div style="width: 100%;">This is my test text</div>
    </body>
    </html>
 </iframe> 
```

The iframe has specific width. Let's say 100px. And the div get the 100% of it. The problem is that the text I have in the div is not all visible. I can see only what fits to 100px and the rest is hidden, while I want it to split into two lines in case is not fit.

Does anyone know how I can do that?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:30:45.300

首先，请注意身体不应该在头部（如您的示例所示）。

接下来，我相信 iframe 中的文本是浏览器不支持 iframe 时查看的内容。要正确使用 iframe，您必须将 html 保存到单独的文件中并使用 src 属性将文件加载到框架中。

像这样的东西应该工作：

page1.html

```
<html>
<head></head>
<body>
    <iframe src="page2.html">
        <p>Your browser does not support iframes.</p>
    </iframe>
</body>
</html> 
```

page2.html

```
<html>
<head></head>
<body>
<div style="width: 100%;">This is my test text</div>
</body>
</html> 
```

有关更多信息，请查看 W3Schools：

*   [http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)
*   [http://www.w3schools.com/html/html_iframe.asp](http://www.w3schools.com/html/html_iframe.asp)

# vb.net - DataAdaptor.Fill(DataSet) - Primary Key Violation Error

> ID：12006619
> 
> 赞同：1
> 
> 时间：2012-08-17T13:19:00.090
> 
> 标签：vb.net, sql-server-2008, ado.net

**Platform** : V4.0, SQL Server 2008, Windows 2003.

Below code throws SqlException on `FillMethod`:

> "Primary Key Violation Error. Insert to the Table Failed".

Not sure why in Fill Method. Its not happening every time. Column1 and Column2 - Composite Key.

```
Dim ObjDAdapter As SqlDataAdapter
String selectstring = "select * from Table where Column1 = 'A' and Column2 = 'B'"
ObjDAdapter = New SqlDataAdapter(selectString, myConnection)
ObjDAdapter.Fill(Dataset) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:26:45.970

我有类似的代码来用 SQL 查询中的行填充数据集，它工作正常。看看这是否有帮助：

```
Dim ObjDAdapter As SqlDataAdapter
String selectstring = "select * from Table where Column1 = 'A' and Column2 = 'B'"
ObjDAdapter = New SqlDataAdapter(selectString, myConnection)
ObjDAdapter.AcceptChangesDuringFill = False
ObjDAdapter.Fill(Dataset) 
```

唯一的变化是将 AcceptChangesDuringFill 设置为 false。

但听起来您创建的本地数据表的主键设置可能与 SQL 表不同。

即，如果您的 SQL 表有两个字段设置为主键，但您的本地表只有一个字段设置作为键，当它尝试将行插入本地表时，您可能会遇到零星的键冲突错误。

# ruby-on-rails - 使用 Capybara 从复选框组中选择元素

> ID：12006623
> 
> 赞同：0
> 
> 时间：2012-08-17T13:19:40.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara

我有很多这样的行：

```
<input id="car_ids_" name="car_ids[]" value="142" type="checkbox"> Car 142
<input id="car_ids_" name="car_ids[]" value="143" type="checkbox"> Car 143
<input id="car_ids_" name="car_ids[]" value="144" type="checkbox"> Car 144
<input id="car_ids_" name="car_ids[]" value="145" type="checkbox"> Car 145 
```

我想要这种行为，因为我在这个 railscast 中看到了它： [http: //railscasts.com/episodes/165-edit-multiple?view=asciicast](http://railscasts.com/episodes/165-edit-multiple?view=asciicast)

当我测试自己时，它可以工作，但是当我尝试使用 Capybara 选择一些元素时，我不知道如何？

```
before(:each) do
  check "car_ids_:first"
  check "car_ids_:last"
end 
```

我总是

```
Capybara::ElementNotFound:
       cannot check field, no checkbox with id, name, or label 'car_ids_:first' found 
```

你能帮我看看这是怎么回事吗？我想选择 fe 的第二个和第三个元素？

更新：

```
 find(:css, "#car_ids_[value='#{@car1.id}']").set(true)
  => find(:css, "#car_ids_[value='#{@car1.id}']").checked?
  ==> "checked"
  find(:css, "#car_ids_[value='#{@car2.id}']").set(nil)
  => find(:css, "#car_ids_[value='#{@car1.id}']").checked?
  ==> nil
  find(:css, "#car_ids_[value='#{@car3.id}']").set(true)
  => find(:css, "#car_ids_[value='#{@car1.id}']").checked?
  ==> "checked"

  select("Deactivate", :from => "car_action")

  click_button "Submit"

  page.body.should have_content "Updated cars!"

  @user.cars[0].active?.should == true
  @user.cars[1].active?.should == false
  @user.cars[2].active?.should == true 
```

但最后，复选框值没有传递给控制器​​！我不知道为什么....复选框似乎已选中（但如果我用 save_and_open_page 打开页面，它们也没有被选中？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:35:14.637

最简单的方法是告诉水豚通过标签检查框。如果您可以使用@cars 集合，则可以执行以下操作：

```
[@cars[1], @cars[2]].each do |car|
  check("Car #{car.id}")
end 
```

**编辑**

根据您在下面的评论，如果您想专门访问第二个和第三个元素而不考虑它们所指的集合项，您可以将您的输入包装在一个带有一些 id 的 div 中（以缩小选择器范围），例如`car-checkboxes`，然后执行这：

```
find(:css, "#car-checkboxes input:nth-child(2)").click 
```

或者

```
find(:css, "#car-checkboxes input:nth-child(2)").set(true) 
```

# excel - Find and Replace dynamic values

> ID：12006628
> 
> 赞同：0
> 
> 时间：2012-08-17T13:19:56.037
> 
> 标签：excel, vba, dynamic, replace

I am trying to search a sheet for a certain value, in this case "ALAE". After finding this instance, I then need to go down and replace all the subsequent fields with a reference value found on another worksheet.

For example, the field has "ALAE" as a column heading, then below that there are two "2"s. I need to go to the reference sheet, look up what 2 means, and replace the value with the text version. The location of "ALAE" will always change, as well the number of fields beneath the heading. I need to dynamically do this each time the macro is run.

Currently, the code will replace the first "2" but not the second.

here is the code i have so far

```
Sub Reference()

Dim macroSheet As Worksheet
Dim LastRow As Long
Dim strSearch As String
Dim aCell As Range, bCell As Range
Dim x As Integer

Set macroSheet = Sheets("Treaty Year Preview")
With macroSheet
     LastRow = .Range("A" & Rows.Count).End(xlUp).Row
     strSearch = "ALAE"
     Set aCell = .Range("A1:R" & LastRow).Find(What:=strSearch, LookIn:=xlValues, _
                                                        Lookat:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                                                        MatchCase:=True, SearchFormat:=False)
     If Not aCell Is Nothing Then
        x = 1
        Set bCell = aCell
         Do
            aCell.Offset(x) = Application.WorksheetFunction.VLookup(aCell.Offset(x), Worksheets("ALAE ULAE").Range("A:B"), 2)
            x = x + 1

        Loop Until aCell.Offset(x) Is Nothing

    End If 'If Not aCell is Nothing Then
End With 'With macroSheet
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:54:37.797

试试这个代码。我认为它以更简单的方式提供了您想要的东西。根据我在您的帖子中读到的内容，我已经做到了最好，但是如果有任何遗漏或错误，请发表评论，如果需要，我会进行调整。

代码被大量注释，以解释我的更改。:)

```
Sub Reference() 'given your post explanation and what I see, there is no need to pass a variable into the sub

    Dim macroSheet As Worksheet
    Dim lastRow As Long
    Dim strSearch As String
    Dim aCell As Range, bCell as Range
    ' the rest of the variables I removed because they were superfolous (yuck - bad spelling, i know!)

    Set macroSheet = Sheets("Treaty Year Preview")

    With macroSheet 'now we are working with the macroSheet, no need to reference it any more

        lastRow = .Range("A" & Rows.Count).End(xlUp).Row

        strSearch = "ALAE"

        Set aCell = .Range("A1:A" & lastRow).Find(What:=strSearch, LookIn:=xlValues, _
                                                            LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                                                            MatchCase:=True, SearchFormat:=False)

        If Not aCell Is Nothing Then

            Set bCell = aCell

            Do

                'basically find the value 1 below the found cell and replace it with the value in the lookup table
                'I wasn't sure how your ALAE lookup table is organized, but you may need to change the ALAE!B:C reference to fit your needs.
                'i changed to vlookup because I am more familiar with that than lookup function
                aCell.Offset(1) = .Application.WorksheetFunction.VLookup(aCell.Offset(1), "ALAE!B:C", 2, False)

                'reset aCell to find the next one
                Set aCell = .Range("A1:A" & lastRow).Find(What:=strSearch, After:=aCell, LookIn:=xlValues, _
                                                            LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                                                            MatchCase:=True, SearchFormat:=False)

            Loop Until aCell Is Nothing or aCell.Address = bCell.Address 'it will keep looping unless aCell returns nothing

        End If 'If Not aCell is Nothing Then

    End With 'With macroSheet

End Sub 
```

# linux - Bash script run order, why does it queue the read command?

> ID：12006629
> 
> 赞同：2
> 
> 时间：2012-08-17T13:19:59.110
> 
> 标签：linux, bash, shell, unix

I'm very confused at the moment.

What I want to do is create a listener function, that wait for two commands - and the thing is it should only listen every two hundred milliseconds and ignore the other input from the user.

```
function foo() {

    read -sN1 _input

    case "${_input}" in

        A) echo 'Option A';;
        B) echo 'Option B';;
    esac
}

while true; do
    sleep 0.2
    foo
done 
```

If I "hammer" the A-key (or UP-key) ten times, it writes "Option A" ten times (although, slowly) - when it should only had time to write it at most three times. Why is that - and how do I fix it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:24:26.950

您的终端缓冲程序的输入。为了让你的程序忽略它在睡眠时收到的输入，你应该在调用之前清除输入缓冲区`read`。据我所知，在 bash 中没有办法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:27:24.090

您可以将睡眠功能放在标准输入关闭的块中：

```
 {
    sleep 0.2
  } <&- 
```

或者，您可以在睡眠后立即清除（读取和丢弃）标准输入缓冲区：

```
sleep 0.2
read -t 1 -n 10000 discard 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:42:31.147

这就是我想出的有效方法。这不是*很好*，但它有效。

```
function inputCommand() {

    _now=`date +%s%N | cut -b1-13`
    _time=$(($_now-$_timeout))

    if [ $_time -gt 500 ]; then
            $1
            _timeout=`date +%s%N | cut -b1-13`
    fi
}

function keyPressUp() {

    echo "Key Press Up"
}

function waitForInput() {

    unset _input
    read -sN1 _input

    case "${_input}" in

            A) inputCommand "keyPressUp";;
    esac
}

while true; do

        waitForInput
done 
```

# java - How are fractions represented in computers?

> ID：12006635
> 
> 赞同：8
> 
> 时间：2012-08-17T13:20:13.597
> 
> 标签：java, language-agnostic, floating-point, bits, fractions

Since computers think in terms of "1" and "0" how do they calculate and represent fractions such as 7.50 ? I know Java and JavaScript and if required for the answer you can use them as an example .

**Edit**: I was watching this [MIT video on hashing by Prof. Cormen](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/lecture-7-hashing-hash-functions/) at 46:31 seconds he explains the multiplication hash function using a modular wheel which is a unit circle with several points in it and the points denote fractions. This prompted me to ask this basic question here in SO .

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T14:09:43.087

在计算机上表示除整数以外的数字的最常见方法是使用浮点，尤其是 IEEE 754 浮点。您可能熟悉，整数通常使用硬件位来表示二进制数字，因此物理属性（如电荷或缺电、高电压或低电压、一个方向或另一个方向的磁场）用于表示位（0 和 1），这些位的序列构成一个数字（例如 11010），我们将其解释为二进制以表示一个数字（11010 [2]是 16+8+2 = 26）。我们通常不会想到它，但这个数字的右侧有一个“小数点”：“11010”。当我们在它的右边有更多的位时，我们只需要小数点，它代表分数。例如，11010.11 [2]是 16 + 8 + 2 + 1/2 + 1/4 = 26.75。为了从整数变为浮点，我们使小数点浮动。除了表示数字的位之外，我们还有一些额外的位可以告诉我们将小数点放在哪里。

所以，我们可能有三个位，比如 010，来表示小数点的位置，而其他位，比如 1101011，来表示值。小数点位 010 可能会将小数点向左移动两个位置，从而更改“1101011”。到“11010.11”。

在单精度 IEEE 754 中，有 1 个符号位（告诉我们 + 或 -）、8 个指数位和 23 个值位（用于“有效数”或“分数”）。指数位的值 0 和 255 是特殊的。对于指数位的其他值，我们减去 127 以获得范围从 -126（小数点左移 126 位）到 127（小数点右移 127 位）的指数。有效位被解释为二进制数字，除了我们稍微修改它们：我们写“1”，然后是小数点，然后是有效位的 23 位，所以我们有类似“1.1101011000...”的内容。作为替代方案，您可以将其视为一个整数：“1”然后是 23 位，没有插入小数点，形成一个 24 位二进制数字，但指数通过额外的 23 进行调整（因此减去 150 而不是 127） .

在双精度 IEEE 754 中，有 1 个符号位、11 个指数位和 52 个有效位。

还有其他不太常见的浮点格式。一些较旧的使用十六进制作为基数（使用指数表示四位而不是一位的移位）。浮点格式的一种重要类型是十进制，其中指数表示 10 的幂。在十进制浮点中，有效位可以是二进制整数，也可以是二进制编码的十进制数（其中每四位表示十进制数字) 或者它可以是混合的（根据自定义方案，位组用于指示少量十进制数字）。

浮点数的一个重要特性是它们不能表示所有实数（当然，即使在有限范围内）甚至所有有理数。这迫使数学运算返回四舍五入为可表示数字的结果，这对于不熟悉使用浮点的人来说会带来无穷无尽的问题。这个属性反过来成为十进制浮点的一个特性：它适用于处理货币面额和其他通常以十进制操作的与人类相关的数字，因为大多数舍入错误可以通过仔细使用十进制浮点来消除。科学家和数学家更多地使用与自然相关的数字或纯数字而不是人为污染的数字，他们往往更喜欢二进制浮点，因为它更广泛可用并且得到硬件的良好支持。

还有其他方法可以在计算机中表示非整数。另一种常见的方法是定点。在定点中，一个位序列，例如 1101011，用一个已知的固定位置的小数点来解释。该位置将固定在对特定应用有用的位置。所以位 1101011 可以代表数字 11010.11 [2]. 定点的一个优点是它很容易用标准硬件实现。要添加两个定点数，我们只需将它们添加为整数即可。为了将两个定点数相乘，我们将它们相乘，就好像它们是整数一样，但是结果在小数点之后的位置是原来的两倍，所以我们要么移动位以进行调整，要么编写代码，使结果此类操作使用小数点后的已知位数进行解释。一些处理器有指令通过调整乘法来支持定点效果。

数字也可以缩放为整数。例如，要使用美国货币，我们只需将美元金额乘以 100，然后用整数进行所有算术运算。小数点仅在显示最终结果时插入（并在从人类读取数据时进行解释）。另一种常见的缩放比例是通过乘以 255 来表示像素强度（从 0 到 1），以便从 0 到 1 的分数适合 8 位字节。

还有软件提供扩展精度（使用几个基本算术类型的单位来提供额外的精度）或任意精度（使用动态数量的单位来提供所需的精度）。与硬件支持的算术相比，此类软件非常慢，并且通常仅用于特殊目的。此外，扩展精度具有与浮点基本相同的属性；只是舍入误差更小，没有消失。任意精度具有相同的缺陷，只是它的动态精度可能允许您将误差缩小到足够小，以便您可以获得在必要间隔内的最终结果（可能有证据证明您已经这样做了）。

另一种表示非整数的方法是使用分数。您可以存储一个分子和一个分母，并以与学校教的方式大致相同的方式进行算术运算：乘以分子和乘以分母。通过将两个分数转换为具有公分母来相加，然后添加分子。这种算术是有问题的，因为分母很快就会变大，因此您需要扩展精度或任意精度来管理它们。

您还可以用符号或复合表达式来表示数字。例如，不是将 2 的平方根存储为数值，您可以将其存储在一个数据结构中，该数据结构表示应用于数字 2 的平方根运算。使用这种表示执行除了最简单的运算之外的任何运算都需要非常复杂的软件才能管理表达式，组合它们，找到归约，等等。这种表示用于专门的数学软件，例如 Maple 和 Mathematica。

最后，你可以用任何你想要的方式来表示数字。我们的现代处理器是通用计算设备，其速度和存储容量已达到极限，因此您可以编写用字符串或数据结构或任何其他技术表示数字的算法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T13:49:26.393

It is a massively complex subject and can require specialist hardware depending on the size of the precision involved.

The very basic answer is that it is a x bit variable - split up 3 ways -

For example a 32 bit FP would be:

```
1 bit for the sign (-/+)

8 bits for the exponent (power) of 10

23 bits for the significant numbers. 
```

Think of Excel when you put a huge FP into a cell and it does something like 1.23E-01 - what this means is 1.23 multiplied by 10 to the power -1 - in other terms 0.123.

So in binary this would be: 01000000011110110000000000000000

Broken down:

```
0 = sign bit - positive

010000000 - exponent - one (edit: first bit is sign bit of exponent)

11110110000000000000000 - signifant figures of 123 
```

Anyway this is really rough and my binary is rusty so someone please correct mistakes.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:28:18.760

有趣的是，我最近正在阅读与我正在研究一些金融事物并需要进行浮点运算的同一主题。我强烈推荐阅读文章[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

还可以看看[Joel Spolsky](http://www.joelonsoftware.com/items/2007/09/26b.html)关于软件浮点数的这篇文章。

# json - 是否可以使用 DataContractJsonSerializer 序列化不同的属性集？

> ID：12006639
> 
> 赞同：0
> 
> 时间：2012-08-17T13:20:23.690
> 
> 标签：json, wcf, rest

我正在使用 WCF 和 JSON 构建一个（希望如此）RESTful 服务。

例如：

```
[DataContract]
public class Person
{
    // This member is serialized.
    [DataMember]
    internal string FullName;

    // This is serialized even though it is private.
    [DataMember]
    private int Age;

    // This is not serialized because the DataMemberAttribute 
    // has not been applied.
    private string MailingAddress;

    // This is not serialized, but the property is.
    private string telephoneNumberValue;

    [DataMember]
    public string TelephoneNumber
    {
        get { return telephoneNumberValue; }
        set { telephoneNumberValue = value; }
    }
} 
```

我需要从 WCF 方法返回一个没有电话号码的 Person 对象（即仅带 FullName 和 Age），所以我想知道是否可以仅使用 Person 类和 WFC 方法的属性属性来完成它？

谢谢

五。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T10:47:23.120

或者，您可以使用 [DataMember(EmitDefaultValue=false)] 并将您不想序列化的字段设置为 null 或根本不初始化

例如

```
[DataContract]
public class Person
{
    // This member is serialized.
    [DataMember]
    internal string FullName;

    [DataMember( EmitDefaultValue=false)]
    public string TelephoneNumber
    {
        get { return telephoneNumberValue; }
        set { telephoneNumberValue = value; }
    }
} 
```

然后你可能有 2 种方法以 2 种不同的方式加载\创建 Person

```
public Person LoadWithPhone() 
    {
        return new Person() { FullName = "Name", TelephoneNumber = "123456" };
    }

 public Person LoadWithoutPhone() 
    {
        return new Person() { FullName = "Name" }; //TelephoneNumber is null
    } 
```

然后当序列化由第二种方法创建的人时，电话号码将不会被序列化这在从数据库加载对象时可能很有用，您可以有几种方法来加载不同的列，或者有一种方法正在动态构建查询并仅使用请求的字段初始化对象.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:54:05.603

简单的答案是您不能这样做，但这里有一个示例，说明您无需大量工作即可实现相同目标。

您将需要有两个`Person`类，一个有`PhoneNumber`属性`DataMember`，一个没有。最好的方法可能是从主类创建两个子`Person`类

```
[DataContract]
public class PersonWithoutPhone
{
    private Person _p;

    public PersonWithoutPhone(Person p)
    {
        _p = p;
    }

    [DataMember]
    internal string FullName
    {
        get { return _p.FullName; }
    }

    [DataMember]
    private int Age
    {
        get { return _p.Age; }
    }

    public string TelephoneNumber
    {
        get { return _p.TelephonNumber; }
    }
}

[DataContract]
public class PersonWithPhone
{
    private Person _p;

    public PersonWithoutPhone(Person p)
    {
        _p = p;
    }

    [DataMember]
    internal string FullName
    {
        get { return _p.FullName; }
    }

    [DataMember]
    private int Age
    {
        get { return _p.Age; }
    }

    [DataMember]
    public string TelephoneNumber
    {
        get { return _p.TelephonNumber; }
    }
} 
```

# .net - 检查 .NET Framework 是否存在

> ID：12006644
> 
> 赞同：0
> 
> 时间：2012-08-17T13:20:38.667
> 
> 标签：.net, windows, .net-3.5

我已经管理了面向 .NET Framework 3.5 的应用程序。如果用户没有安装框架，我需要它来显示带有一些文本和下载链接的消息框。这样做的正确和简单的方法是什么？

到目前为止，我认为没有什么比编写本机引导程序更好的了，它将检查框架的存在并在其他情况下显示消息框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:24:50.723

您可以使用[注册表检查](https://stackoverflow.com/questions/10714331/how-check-is-net-framework-installed-or-not).net 框架及其版本
**参考：**
[如何确定安装了 Microsoft .NET 框架的版本和服务包级别](http://msdn.microsoft.com/en-us/kb/kbarticle.aspx?id=318785)

编辑：在 SO 线程上检查[这个答案](https://stackoverflow.com/a/198959/770710)[如何判断是否安装了 .NET 3.5 SP1？](https://stackoverflow.com/questions/198931/how-do-i-tell-if-net-3-5-sp1-is-installed).

# c# - 为什么写入 MemoryStream 比写入文件慢？

> ID：12006647
> 
> 赞同：15
> 
> 时间：2012-08-17T13:20:42.167
> 
> 标签：c#, .net, file-io, azure, memorystream

在我的 Azure 角色代码中，我下载了一个 400 兆字节的文件，该文件被分成 10 兆字节的块并存储在 Blob 存储中。我`CloudBlob.DownloadToStream()`用于下载。

我尝试了两种选择。一个是使用`FileStream`- 我创建一个“写入”`FileStream`并将块一个接一个地下载到同一个流中而不倒带，所以我最终得到一个原始文件。另一种选择是`MemoryStream`通过传递一个比原始文件大小稍大的数字作为流大小（以避免重新分配）并将块下载到该对象中来创建一个对象`MemoryStream`——这样我最终得到了一个`MemoryStream`保存原始文件数据的对象。

这是一些伪代码：

```
var writeStream = new StreamOfChoice( params );
foreach( uri in urisToDownload ) {
    blobContainer.GetBlobReference( uri ).DownloadToStream( writeStream );
} 
```

现在唯一的区别是它`FileStream`在一种情况下是a `MemoryStream`，在另一种情况下是a，其余的都是一样的。事实证明，a 大约需要 20 秒，a`FileStream`大约需要 30 秒`MemoryStream`- 是的，`FileStream`结果更快。根据`\Memory\Available Bytes`性能计数器，虚拟机在创建之前有大约 1 GB 的可用内存`MemoryStream`，所以这不是由于分页。

为什么写入文件比写入文件要快`MemoryStream`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:47:18.143

乔恩可能在那里。最可能*的*解释是，

1.  内存实际上是由管理程序调出到磁盘的。
2.  管理程序交换文件位于速度较低的磁盘（例如本地磁盘）上。
3.  VM 的文件系统位于快速的企业磁盘（例如 SAN）上。

不管内存是否更快，你真的不应该分配这么大的内存块。在此处阅读有关[LOH 与 SOH](https://stackoverflow.com/questions/12002443/how-do-i-force-release-memory-occupied-by-memorystream/12002636#12002636) 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T11:39:43.263

在调试模式 (VS) 下使用 MemoryStream 时，速度非常慢，即使数据量很小。在没有附加调试器的情况下运行它与 FileStream 相当甚至更快。

首先，我对此感到困惑并最终来到了这里。现在我对 MemoryStream 很好。

# erlang - 使用 SockJS-erlang 推送，Howto？

> ID：12006648
> 
> 赞同：1
> 
> 时间：2012-08-17T13:20:46.897
> 
> 标签：erlang, websocket, push, comet

我想构建一个动态网络应用程序，我发现 sockjs 非常有前途。

但是，我不知道如何将数据从服务器推送到客户端。文档（包含两个小示例）显示了一些 « echo server » 示例。

但我会得到的是：

*   用户打开与 sockjs 的连接，然后我得到一个 PID 或 id
*   然后我可以向这个 pid 发送消息以推送到浏览器

我不知道该怎么办。

这是他们的处理程序

```
service_echo(_Conn, init, state)        -> {ok, state};
service_echo(Conn, {recv, Data}, state) -> Conn:send(Data);
service_echo(_Conn, closed, state)      -> {ok, state}. 
```

我想要这样的东西

```
service_push(Conn, init, state) ->
    Pid = Conn:pid(),
     ---- here get user ID from cookies or another way ----
    push_service:register(user,UserID,Pid),
    {ok, state};

service_echo(Conn, {recv, Data}, state) -> do_something:with(Data);

service_echo(Conn, closed, state) -> service_push:unregister(Conn:pid()). 
```

然后我可以将信息发送到 Conn 的 Pid，这个 Conn 会将数据发送到客户端。

我不知道怎么写。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:11:54.293

好吧，pid 隐藏在“Conn”记录下。只是传递'Conn'。每当你想发送一些东西时，调用'Conn:send(Data)'，就是这样。

在这个模型中，即使连接关闭，您显然仍然可以绕过 Conn。为了“正确”地做到这一点，您可以在每次创建连接时创建一个 gen_server 并将 Conn 封装在那里。这样，您的代码将负责在您的应用程序和 sockjs 之间传递数据。

这是我的代码（但对于更复杂的项目）： [https ://github.com/rabbitmq/rabbitmq-web-stomp/blob/master/src/rabbit_ws_sockjs.erl#L56](https://github.com/rabbitmq/rabbitmq-web-stomp/blob/master/src/rabbit_ws_sockjs.erl#L56)

# jsf - 在无状态模式下运行 JSF（状态保存为 0 成本）

> ID：12006649
> 
> 赞同：5
> 
> 时间：2012-08-17T13:20:52.647
> 
> 标签：jsf, jsf-2, primefaces, myfaces, jsf-stateless

我最近遇到了由 Rudi 开发的[JSF](http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead/) (Mojarra) 的无状态扩展，它声称以更低的内存/ CPU 成本和更低的延迟提供了巨大的性能改进，状态保存的内存开销为 0，并且还告别了陈旧的视图（回发将始终有效）。这一切似乎令人印象深刻！

我是一个天真的 JSF 开发人员，参与了将 JSF 用于高性能 Internet 应用程序的项目。我想知道在迁移到 JSF 中的无状态页面之前应该担心哪些问题。我已经用这个无状态项目测试了我的应用程序（大多数东西都可以无缝运行，除了一些），但我想知道在迁移之前我应该​​考虑的事情。

我知道已经有人[提议](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-1055)在官方 JSF 规范中包含无状态模式功能，但我不确定这需要多长时间，直到这个 JSF 扩展对我有很大帮助。

另外，有没有人也在生产环境中使用无状态 JSF 项目？

--

**更新：** 对于那些使用 Myfaces 的人，Thomas Andraschko 重新实现了无状态扩展，并[建议将其添加到 Myfaces 核心项目](https://issues.apache.org/jira/browse/MYFACES-3465)中。

* * *

将 JSF 2.1.3 与无状态扩展和 Primefaces 3.4 快照一起使用。

# android - 如何在项目中附加javadoc

> ID：12006651
> 
> 赞同：0
> 
> 时间：2012-08-17T13:21:05.003
> 
> 标签：android, eclipse, javadoc

我使用“生成 javadoc”选项为我的应用程序创建了一个 javadoc，并为我的项目创建了一个 jar 文件。现在，当我将此 jar 添加到其他项目时，我还通过项目属性为该 jar 添加了 javadoc（即项目 - > 属性 - > Java 构建路径 - > my.jar 展开 jar 文件单击库旁边的“>”箭头名称来展开库引用并使用编辑按钮设置 Javadoc 位置）仍然当我悬停方法 javadoc 窗格说

*该元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。*

所以谁能告诉我添加 javadoc 或 mi 任务的步骤是什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:27:27.530

好的，我自己找到了一个答案，用我们必须检查的方法添加方法信息

```
 export java files and resources. 
```

生成jar文件时的选项

# java - 将 SQL 查询转换为 HQL

> ID：12006654
> 
> 赞同：2
> 
> 时间：2012-08-17T13:21:13.100
> 
> 标签：java, sql, hql

我需要将此 SQL 查询转换为 HQL

```
select
        * 
    from
        ( select
            routemaste0_.ROUTE_ID as col_0_0_,
            routemaste0_.ROUTE_CODE as col_1_0_,
            routemaste0_.START_PLACE_ID as col_2_0_,
            routemaste0_.END_PLACE_ID as col_3_0_,
            routemaste0_.IS_ACTIVE as col_4_0_,
            routemaste0_.LINKED_ROUTE as col_5_0_
        from
            OPRS_ROUTE_MASTER routemaste0_
            inner join OPRS_ROUTE_HALTS routehalts0_
                 on routemaste0_.route_id = routehalts0_.route_id
        where routehalts0_.PLACE_ID = '51'
        order by
            routemaste0_.ROUTE_ID ASC  ) 
```

我试过这种方式

```
SELECT    rm.id , 
          rm.routeCode , 
          rm.startPlaceId , 
          rm.endPlaceId , 
          rm.active , 
          rm.linkedRoute 
FROM      RouteMaster rm  
          INNER JOIN  rm.routeHalts AS rh 
WHERE     rm.id = rh.routeId  
          AND  rh.placeId = :PlaceId  
ORDER BY  rm.id  ASC 
```

但没有得到预期的结果。我担心的是我需要`inner join on`执行条件。

有人能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:31:26.917

我认为问题的原因可能是 route_id 不是任何表中的主键。这就是为什么我建议你在这种情况下尝试 Theta 风格加入：

```
SELECT  rm.id , rm.routeCode , rm.startPlaceId , rm.endPlaceId , rm.active, rm.linkedRoute 
FROM RouteMaster rm, RouteHalts rh
WHERE rm.routeId = rh.routeId AND rh.placeId = :PlaceId  
ORDER BY  rm.id  A 
```

在您的 HQL 查询变体中，您不需要*rm.id = rh.routeId* 部分在 where 条件中。

# directshow - c ++ builder：使用directshow将视频转换为png-snapshots

> ID：12006656
> 
> 赞同：0
> 
> 时间：2012-08-17T13:21:25.987
> 
> 标签：directshow, c++builder, video-capture, coronasdk, samplegrabber

感谢您的帮助，我能够更好地搜索正确的单词来使用 directshow。我在这里找到了如何使用 SampleGrabber 对象的教程：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd407288%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407288%28v=vs.85%29.aspx)

我可以实现它并对其进行一些修改，这样它不仅可以保存第一帧，还可以将每个帧保存为 PNG。为此，我使用电晕。但是，我只是猜测了一些东西，不太清楚哪些缓冲区包含我的数据以及以哪种形式。

所以，我基本上有 3 个问题：
我使用 SavePNG 对吗？生成的图像是颠倒的！
我可以用连接到相机的视频替换 BaseFilter 吗？
包含 pBuffer 我的 Imagedata，所以我可以通过简单地键入 pBuffer[123] 来获取 rgb 字节信息？

我正在使用 embarcadero 的 C++-Builder (XE2 16)。

这是我在网站上找到的代码，稍作修改（删除了错误处理以获得更好的视图。在每个 hr=... 之后有一个失败检查）：

```
void __fastcall TForm1::btn_kameraClick(TObject *Sender)
{
HRESULT hr = S_OK;
    IGraphBuilder *pGraph = NULL;
    IMediaControl *pControl = NULL;
    IMediaEventEx *pEvent = NULL;
    IBaseFilter *pGrabberF = NULL;
    ISampleGrabber *pGrabber = NULL;
    IBaseFilter *pSourceF = NULL;
    IEnumPins *pEnum = NULL;
    IPin *pPin = NULL;
    IBaseFilter *pNullF = NULL;
    BYTE *pBuffer = NULL;

    hr = CoCreateInstance(CLSID_FilterGraph, NULL,CLSCTX_INPROC_SERVER,IID_PPV_ARGS(&pGraph));
    hr = pGraph->QueryInterface(IID_PPV_ARGS(&pControl));
    hr = pGraph->QueryInterface(IID_PPV_ARGS(&pEvent));
    hr = CoCreateInstance(CLSID_SampleGrabber, NULL, CLSCTX_INPROC_SERVER,IID_PPV_ARGS(&pGrabberF));
    hr = pGraph->AddFilter(pGrabberF, L"Sample Grabber");
    hr = pGrabberF->QueryInterface(IID_PPV_ARGS(&pGrabber));

    AM_MEDIA_TYPE mt;
    ZeroMemory(&mt, sizeof(mt));
    mt.majortype = MEDIATYPE_Video;
    mt.subtype = MEDIASUBTYPE_RGB24;

    hr = pGrabber->SetMediaType(&mt);
    hr = pGraph->AddSourceFilter(L"C:/Users/Julian/Desktop/homogenität/1,1x_2,7y.mpg", L"Source", &pSourceF);
    hr = pSourceF->EnumPins(&pEnum);
    while (S_OK == pEnum->Next(1, &pPin, NULL))
    {
        hr = ConnectFilters(pGraph, pPin, pGrabberF);
        SafeRelease(&pPin);
        if (SUCCEEDED(hr))break;
    }
    hr = CoCreateInstance(CLSID_NullRenderer, NULL, CLSCTX_INPROC_SERVER,IID_PPV_ARGS(&pNullF));
    hr = pGraph->AddFilter(pNullF, L"Null Filter");
    hr = ConnectFilters(pGraph, pGrabberF, pNullF);
    hr = pGrabber->SetOneShot(TRUE);
    hr = pGrabber->SetBufferSamples(TRUE);
    long evCode=0;
    long cbBuffer=0;
    hr = pControl->Run();
    hr = pEvent->WaitForCompletion(INFINITE, &evCode);
    hr = pGrabber->GetCurrentBuffer(&cbBuffer, NULL);
    pBuffer = (BYTE*)CoTaskMemAlloc(cbBuffer);
    hr = pGrabber->GetConnectedMediaType(&mt);

    CComQIPtr< IMediaSeeking, &IID_IMediaSeeking > pSeeking( pGraph );

//  for(int i=0;i<10;i++){
    bool hui=true;int i=0;
    while(hui){
    REFERENCE_TIME Start = i * UNITS;
    hr = pSeeking->SetPositions( &Start, AM_SEEKING_AbsolutePositioning,NULL, AM_SEEKING_NoPositioning );
//  Sleep(10);
    hr = pEvent->WaitForCompletion(INFINITE,&evCode);
    if(hr!=0)hui=false;
    hr = pGrabber->GetCurrentBuffer(&cbBuffer, (long*)pBuffer);
    if ((mt.formattype == FORMAT_VideoInfo) &&(mt.cbFormat >= sizeof(VIDEOINFOHEADER)) &&(mt.pbFormat != NULL))
    {
        VIDEOINFOHEADER *pVih = (VIDEOINFOHEADER*)mt.pbFormat;

//      hr = WriteBitmap(("hui"+(String)i+".bmp").c_str(), &pVih->bmiHeader, mt.cbFormat - SIZE_PREHEADER, pBuffer, cbBuffer);
        hr = SavePNG(i,pBuffer, pVih->bmiHeader.biWidth, pVih->bmiHeader.biHeight);
    }
    else hr = VFW_E_INVALIDMEDIATYPE;
    i++;
    }
    FreeMediaType(mt);

done:
    CoTaskMemFree(pBuffer);
    SafeRelease(&pPin);
    SafeRelease(&pEnum);
    SafeRelease(&pNullF);
    SafeRelease(&pSourceF);
    SafeRelease(&pGrabber);
    SafeRelease(&pGrabberF);
    SafeRelease(&pControl);
    SafeRelease(&pEvent);
    SafeRelease(&pGraph);

}
bool SavePNG(int i, Byte* m_pImageData,long m_Width,long m_Height)
{
    // Make sure there is image data

    if (!m_pImageData)
        return false;

    stringstream FilePath;
    FilePath << "hui"<< i<<".png";
    // Create a corona image
    corona::Image* pImage = corona::CreateImage(m_Width, m_Height, corona::PF_R8G8B8, m_pImageData);

    // Make sure the image was created
    if (!pImage)
        return false;

    // Save the image to a PNG file
    corona::SaveImage(FilePath.str().c_str(), corona::FF_PNG, pImage);

    // Delete the corona image
    delete pImage;

    // Nothing went wrong
    return true;
} 
```

我希望我没有做任何可怕的错误......我真的试图研究一切^^有人知道我上面的3个问题吗？我在这里发现了一些非常错误的地方，我也很感激你告诉我，所以我可以修复和改进。

问候，朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:16:10.967

现在，当您拥有 24 位 RGB 格式的视频帧时，您只需将其压缩为 PNG。您可以在这里选择：

*   [库](http://www.libpng.org)
*   [GDI+](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535407%28v=vs.85%29.aspx)
*   [WIC](http://msdn.microsoft.com/en-us/library/windows/desktop/gg430028%28v=vs.85%29.aspx)

可能，C++ bulder 也有要涵盖`PNG`的本地类。

您使用的 PS DirectShow API 不是 DirectX，它是 Windows 核心 SDK 的一部分。

# python - 我应该如何序列化包含 pygame 表面的游戏对象？

> ID：12006672
> 
> 赞同：1
> 
> 时间：2012-08-17T13:22:40.713
> 
> 标签：python, pygame

为了轻松保存游戏的游戏状态，我倾向于序列化`game`包含所有游戏实体（又名演员）的对象。

我遇到的一个常见问题是你不能pickle [pygamesurfaces](http://www.pygame.org/docs/ref/surface.html)，所以如果你的actor类看起来像这样：

```
class Actor(object):

  def __init__(self, **kwargs):
      self._image = kwargs['image']
      self.pos = kwargs['pos']
      ...

  def act(self):
      ...

  def draw(self, surface):
      surface.blit(self._image, self.pos) 
```

你不能只用[python pickle/cpickle](http://docs.python.org/library/pickle.html)模块腌制它。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:23:19.887

解决方案不是尝试序列化表面，而是从您的游戏/游戏实体中删除它们并使用[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)等技术，例如在恢复游戏状态后再次获取它们。

因此，与其将表面直接传递给实体，不如将其传递给负责存储/检索表面的对象：

```
class Actor(object):

  def __init__(self, **kwargs):
    self._image_getter = kwargs['image_getter']
    self.pos = kwargs['pos']
    ...

  def draw(self, surface):
    surface.blit(self._image_getter(), self.pos) 
```

`image getter`可能看起来像这样：

```
class SurfaceCapsule (object):

    def __init__(self, resource_manager, key):
        self._res = resource_manager
        self._key = key

    def __call__(self):
        return self._res[self._key] 
```

请注意，我在这里使用了一个类，因为方法本身也是不可选择的。

而不是像这样创建您的实体：

```
actor = Actor(image=resource_manager[key]) 
```

你会像这样创建它们：

```
actor = Actor(image_getter=SurfaceCapsule(resource_manager, key)) 
```

`resource_manager`管理游戏所有表面的对象在哪里。

```
class RessourceManager(dict):

    def __getitem__(self, key):
        # implement lazy loading if you want, or load all images at startup
        # load surface is necessary, cache it, and return it

    def __load_surface_by_key(key):
        # load stuff 
```

在保存你的游戏状态之前，你必须先保存`clear()`它，然后你就可以愉快地序列化它了。

* * *

另一种方法是外包演员的绘图，因此您只需将标识符存储到演员的表面。

```
class Actor(object):

  def __init__(self, **kwargs):
    self.image_key = kwargs['image_key'] 
```

在你的游戏课上：

```
def draw(self):
    for actor in self._actors:
        self._screen.blit(resource_manager[actor.image_key], actor.pos) 
```

但是如果你的演员使用多个表面来代表他们自己，这有点麻烦。

# scala - Scala - 隐式方法参数不起作用

> ID：12006673
> 
> 赞同：1
> 
> 时间：2012-08-17T13:23:03.037
> 
> 标签：scala, implicit-conversion, implicit

我编译以下代码

```
def foo(implicit x: Int, x2: Int) = println(x2 + x)
implicit val x : Int = 2
foo(1) 
```

但是编译器抱怨参数的数量。如果只有参数标记为隐式，为什么上面的方法会起作用`x`，但在这个例子中不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:50:17.923

你必须把隐含的参数是一个单独的，它自己的括号：

```
scala> def foo(x2: Int)(implicit x: Int) = println(x2 + x)
scala> implicit val x: Int 2
scala> foo(1)
3 
```

如果将非隐式参数和隐式参数放在同一个括号中，则必须显式传递两个参数，否则编译器会抱怨参数数量错误。当 Scala 编译器看到参数被标记为隐式并且没有显式传递参数时，它会尝试查找隐式参数。但是编译器会在检查隐式之前检查是否传递了正确数量的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:24:55.457

这将按您的意愿工作：

```
def foo(x2: Int)(implicit x: Int) = println(x2 + x)
implicit val x : Int = 2
foo(1) 
```

我对 Scala 内部结构和规范不是太深入，所以我无法深入解释为什么会这样，但你必须用一组额外的括号传递隐含。

编辑：因为我很好奇，所以我浏览了互联网。我不会重新输入我刚刚找到的所有内容，因此您可以在此处找到更详细的信息：http: [//daily-scala.blogspot.de/2010/04/implicit-parameters.html](http://daily-scala.blogspot.de/2010/04/implicit-parameters.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T14:02:39.523

隐式参数是全有或全无。要么显式传递所有这些，要么不传递任何一个，编译器为所有选择隐式。

在示例中，您应该将参数传递给`foo`，因此您必须传递所有内容。如果你只有一个参数`foo`，它会起作用，因为参数的数量是正确的（并且参数将被显式传递）。如果您在`foo`没有传递任何参数的情况下调用，它也会起作用，因为它会`implicit val x`为两个参数选择。

# objective-c - 在选择时更改标签。UIpickverView

> ID：12006682
> 
> 赞同：0
> 
> 时间：2012-08-17T13:23:37.047
> 
> 标签：objective-c, ios, uipickerview

我现在使用的代码不起作用，每次我加载它并在 UIPickerView 中滚动时，它都会自动使用“else”语句的值。

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
if ([pickerView selectedRowInComponent:0]) {
    [label setText:@"row1"];
}
if ([pickerView selectedRowInComponent:3]) {
    [label setText:@"row2"];
}
if ([pickerView selectedRowInComponent:4]) {
    [label setText:@"row3"];
}
else {
     [label setText:@"row else"];
}
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:02:51.753

尝试这个：

因为您在返回类型中使用 numberOfComponentsInPickerView = 1 。

那么，为什么要与 rowInComponent api 进行比较。

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent: (NSInteger)component {

   if(row == 0)
     [label setText:@"row3"];

   else if(row == 1)
     [label setText:@"row3"];

   else if(row == 3)
     [label setText:@"row3"];

   else
     [label setText:@"other"]; // this line will be called when row will be 2 or >3
  } 
```

有多少行 **——pickerView:numberOfRowsInComponent:**方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:45:54.510

您将所有条件都基于此方法的返回值：`selectedRowInComponent`它返回一个整数值。因为它返回该组件中选定行的索引，所以您的值可能是从 -1 到 X，X 是您在组件中拥有的行数。

如果您希望在其中一行上选择任何内容时更新文本，您需要查看您选择的行索引是否大于 -1，这意味着在您的选择器视图中实际选择了一行。

所以试试更像这样的东西：

```
if ([pickerView selectedRowInComponent:0] > -1) {
    [label setText:@"row1"];
}
else if ([pickerView selectedRowInComponent:3] > -1) {
    [label setText:@"row2"];
}
else if ([pickerView selectedRowInComponent:4] > -1) {
    [label setText:@"row3"];
}
else {
     [label setText:@"row else"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:28:54.227

使用与此类似的代码。

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

{
if (pickerView.tag==1)
  {
    if (row == 0)
    {
          [label setText:@"row1"];
    }

   else if (row == 1)
    {
         [label setText:@"row2"];

    }

   else if (row == 2)
    {
            [label setText:@"row3"];

    }
   else{
            [label setText:@"row else"];

       }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:30:14.343

与其创建许多 if 语句，不如尝试将 if 语句变成“else if”语句。

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:    (NSInteger)component {
if ([pickerView selectedRowInComponent:0]) {
    [label setText:@"row1"];
}
else if ([pickerView selectedRowInComponent:3]) {
    [label setText:@"row2"];
}
else if ([pickerView selectedRowInComponent:4]) {
    [label setText:@"row3"];
} 
else {
     [label setText:@"row else"];
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T13:39:39.860

原因是它不满足任何这些条件，selectedRowInComponent 返回一个 NSInteger，而不是布尔值。因此，您必须更新 if 条件以包含一个值，例如

```
 [selectedRowInComponent:1]==1 
```

# c# - 将 Linq DynamicQuerable 用于 Not IN sql 类型的操作

> ID：12006695
> 
> 赞同：0
> 
> 时间：2012-08-17T13:24:22.137
> 
> 标签：c#, linq, dynamic-linq

我正在使用 Linq DynamicQuerable 代码。我有一个整数数组和一个字符串，表示我想用作排除过滤器的字段。

例如

```
IQuerable GetItemsWithoutExcluded(IQuerable qry, string primaryKey, List<int> excludedItems) {
        // psuedo code
        return qry.Where("p=>! p.primaryKey in excludedItems");
    } 
```

知道如何使用 DynamicQuerable 完成此任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:33:10.783

您可以在没有动态 LINQ 的情况下执行此操作。Dynamic-LINQ 不是该框架的成熟公民。通过改变你完成这项任务的方式，你可以使用更有效的过滤器。您现在拥有它的方式需要为每个排除调用该方法。

尝试这样的事情

```
 List<int> allKeys = new List<int>{1,2,3,4,5,6};            
        List<int> excluded = new List<int>{ 1, 2, 3 };

        var query = from included in allKeys
                    where !excluded.Contains(included)
                    select included;

        foreach (var item in query)
            Console.WriteLine(item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:46:38.343

我会使用普通的 LINQ 像下面这样实现它：

```
public static IQueryable<T> Exclude<T>(this IQuerable<T> qry, Expression<Func<T, int>> keySelector, List<int> excludedItems)
{
    var keyGroups = qry.GroupBy(keySelector);
    var includedGroups = keyGroups.Where(g => !excludedItems.Contains(g.Key));
    return includedGroups.SelectMany(g => g);
} 
```

然后它可以像这样使用：

```
public class MyClass
{
    public int Key { get; set; }
}

IQueryable<MyClass> source = // Get source data (DataContext/ObjectContext/ISession etc.)
var excludedKeys = new List<int> { 1, 3, 11 };
var result = source.Exclude(item => item.Key, excludedKeys); 
```

**动态 LINQ 更新**

```
IQuerable GetItemsWithoutExcluded(IQuerable qry, string primaryKey, List<int> excludedItems)
{
    if(excludedItems.Count == 0)
        return qry;

    var keyChecks = excludedItems.Select(i => String.Format("p.{0} != {1}", primaryKey, i));
    var constraint = String.Join(" && ", keyChecks )
    return qry.Where("p => " + constraint);
} 
```

# c++ - 概括应用程序的用户界面

> ID：12006707
> 
> 赞同：0
> 
> 时间：2012-08-17T13:24:40.150
> 
> 标签：c++, c, linux, automatic-generalization

我正在使用 C 语言工作并为嵌入式设备创建应用程序。这些应用程序主要包括捕获数据并将其存储到数据库中以执行注册。这涉及到许多小部件，如框架、按钮、复选框、单选按钮、小部件列表框、文本框、条目、组合框等。所有这些小部件都是使用 X 库创建的。

我尝试使用 CSV 文件使应用程序通用化，列出用户想要创建的所有小部件，然后根据 CSV 文件中提到的信息相应地创建这些小部件。

我正在创建的 CSV 文件包括以下内容

1.  小部件名称
2.  小部件类型
3.  小部件数据输入类型/最大长度/最小长度............等

请提出其他一些方法，或者我该如何改进当前的方法本身？我还通过 CSV 本身提供的信息创建数据库。我可以说这是一种“数据驱动的用户界面”方法。我需要一些建议。请给我一些好的建议。

平台：Linux、GCC编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:00:01.923

也许不是你要找的东西，但 WxWidgets 有一种名为 XRC 的格式。它的窗口被描述为 XML：[http](http://docs.wxwidgets.org/2.9.4/overview_xrc.html) ://docs.wxwidgets.org/2.9.4/overview_xrc.html 。你真的用 C 写你的 GUI 吗？我想这可能是对嵌入式产品的限制。无论如何，您可能会从该网站获得好主意。我没有使用它，所以我没有提供具体的反馈。

# html - HTML 表单中的提交按钮

> ID：12006710
> 
> 赞同：0
> 
> 时间：2012-08-17T13:24:49.807
> 
> 标签：html, button, submit

我正在尝试创建一个 HTML 表单，最后我添加了一个提交按钮：

```
<submit submitLabel="Save"/> 
```

是否有可以配置的属性，以便在按下按钮时不仅将数据保存在表单中，而且重定向到另一个 HTML 表单？也许是为了在 HTML 表单之间创建一个工作流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:28:35.910

单击表单中的提交按钮，向您在定义的页面发出 POST/GET 请求`<form action="_____"`

您可以将第二个表单放在另一个页面（您在`action`属性中定义的页面）

甚至更好 - 您可以使用 AJAX，并避免重新加载页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:34:06.727

有一些方法可以做到这一点，但这也取决于您使用的语言。单独的 HTML 并不能解决问题。您还需要一种服务器端语言，例如 ASP 或 PHP

当我使用 php 时，我只需创建一个表单并确保将操作标记到下一页。在那里我可以输入下一个表格，但我也可以处理我刚刚获取的信息。

请参阅下面的示例

```
 <form method="post" action="the place of the next form plus where processing happens.php">

     put here your fields

     <button name="btn_moveon" type="submit" >Go further to next page</button> 
     </form> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:28:15.163

您可以通过代码或表单标记的 ACTION 属性来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:28:58.243

不，没有这样的元素。您必须在服务器端使用服务器运行的任何编程语言（例如 PHP、ASP 等）执行此操作。

# sql - 查找一列中的一行数据在另一列中不存在的位置

> ID：12006713
> 
> 赞同：0
> 
> 时间：2012-08-17T13:24:58.247
> 
> 标签：sql, sql-server-2005

所以我试图找出一种方法，将一列的每一行与另一列中的所有行进行比较，并过滤掉与之比较的列中不存在的那些。我了解如何逐行比较两列，如下所示：

```
select table1.column1
from table1 inner join
     table2 on table1.id = table2.id
where column1 <> column2 
```

但我想将 column1 中 table1 的行与 table2 中 column2 的所有行进行比较，并找到 column1 中根本不存在于 column2 中的行。所以它就像具有这些值的列：

```
Column1        Column2
1              2
2              1
4              3
5              5
7              6 
```

在 SQL 之后，它会变成这样：

```
Column1
4
7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:32:54.907

尝试不输入：

```
select table1.column1
from table1
where table1.column1 not in (select table2.column2 from table2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:32:34.967

```
select column1 from table1 as t1 where not exists
(select column2 from table2 as t2 where t1.id=t2.id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:33:42.517

如果您比较 2 个表之间的列

```
SELECT table1.column1 FROM table1
WHERE table1.column1 NOT IN
(SELECT table2.column2 as column1 FROM table2) 
```

如果将 column1 和 column2 与同一张表进行比较

```
SELECT table1.column1 FROM table1
WHERE table1.column1 NOT IN
(SELECT table1.column2 as column1 FROM table1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:44:33.790

```
select t1.id
from ... t1
left join ... t2 on t1.id = t2.id
where t2.id is null 
```

# linux - 列出所有用户以及他们上次阅读邮件的时间，通过管道传输到多个输出

> ID：12006714
> 
> 赞同：3
> 
> 时间：2012-08-17T13:25:00.493
> 
> 标签：linux, bash, pipe

我有一个系统，我想做一些清理工作，所以我想获取所有用户帐户和他们访问邮件的最后日期。它是一个 Debian 系统。

到目前为止，我得到了这个：

```
cut -d: -f1 /etc/passwd | xargs -n1 finger | grep "Mail last read" 
```

但我不知道如何在 Mail 前面写下那个用户名 last read Sun Aug 12 03:06 2012 (CEST)

谢谢编辑：这是示例手指输出：

```
/bla# finger xxxxx
Login: xxxxx                         Name: xxxxx xxxxx
Directory: /home/xxxxx               Shell: /bin/true
Never logged in.
Mail last read Sun Aug 12 03:17 2012 (CEST)
No Plan. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:33:36.713

使用 -B 选项：

```
... | grep -B3 "Mail last read" | awk '/Login:/ {name=$2} /Mail last read/ {print name, $0}' 
```

假设包含“登录：名称：”的行出现在手指输出中邮件状态之前的 3 行。该`awk`命令打印 grep 输出的第一行的第二个字段，以及包含邮件状态的行。

# c# - 在我的所有项目中获得可访问课程的最佳方式

> ID：12006716
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:25:08.153
> 
> 标签：c#, unit-testing, visual-studio-2008, code-coverage, ncover

我需要在我的代码中声明覆盖排除的属性，问题是我有一个项目组，我希望在需要时可以从所有项目访问它的地方创建它，现在我将它放在命名空间，所以它会更容易使用，它在每个项目中声明如下：

```
public class CoverageExcludeAttribute : Attribute
{

} 
```

有没有更好的方法来实现这个目标，它可以在我的项目组中的任何地方访问并且只声明一次，而不必将其命名空间（*例如*通过使用全局命名空间）添加到我使用该属性的每个文件中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:55:27.793

虽然我实际上同意 P.Brian.Mackey 的观点，但我认为唯一的方法就是正如 DjKraze 所说：

创建一个新的 ClassLibrary 类型的微项目，添加一个包含 Coverage(..) 类的单个 .cs 文件，并确保该类不在命名空间块内。然后构建它，并为每个其他项目对您刚刚创建的那个微项目做一个添加引用。这样它肯定会工作，并且您将有一个方便的地方放置任何进一步的“通用代码”随处可用。

但是，每个项目都必须使用参考进行更新。这是最低要求 - 总而言之，如果您想使用任何东西而不是复制，则必须参考它。

抱歉，对于这种事情几乎没有其他选择！另一种方法是……呃，复制。您可以轻松设置一个简单的预构建脚本，将给定的 .cs 文件复制到您的每个项目，但是将文件“添加”到 .csproj 的构建列表有点困难，仍然可以使用一些 Ruby 或Python 或朋友...

嗯..说，可能可以编写一个预构建脚本来自动注入对微项目的引用..但我不知道这是否值得做。您有超过 50-100 个项目吗？否则，可能不值得..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:05:42.407

**这只适用于VS2010及以上**

如果您想要在每个项目中定义一些源代码，但没有项目引用，请查看 NuGet 提供的一些功能，尤其是[Source Code Transformations](http://docs.nuget.org/docs/creating-packages/configuration-file-and-source-code-transformations)。这些允许在将 NuGet 包添加到项目时向项目中添加一些源代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T13:35:32.713

您可以使用依赖注入 [http://en.wikipedia.org/wiki/Dependency_injection](http://en.wikipedia.org/wiki/Dependency_injection)

最流行的是：Microsoft Unity、Ninject、NHibernate、StructureMap、Autofac。

祝你好运！

# tfs - TF400018: 本地版本表被锁定

> ID：12006719
> 
> 赞同：1
> 
> 时间：2012-08-17T13:25:20.043
> 
> 标签：tfs, visual-studio-2012

在 TFS 和 VS 2012 RC 中得到以下内容，有人知道修复吗？MS网站上似乎不存在。

> TF400018: 无法打开本地工作区 COMPUTERNAME;MYNAME 的本地版本表。该进程无法访问该文件，因为它正被另一个进程使用

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:48:39.083

我们也经历过这个。迁移到 RTM 可以减少这种情况发生，但仍然会发生很多。

当使用本地工作区（vs 2012 中的一个新功能）时，会创建一个基于本地文件的数据库来管理您在本地进行的更改。当您更改源文件时，需要更新此文件基础数据库。如果此更新与定期检查更改的正常更新任务冲突，则会出现此错误。此问题的原因通常是您使用本地工作区的项目比预期的多，或者您的磁盘 I/O 太慢。

解决方法是：

1.  用ssd替换你的磁盘。拥有更好的 I/O 可以减少这个问题的发生。
2.  切换回基于服务器的工作区。（更好地处理这个）
3.  使用 TFS-GIT 连接器并使用 git 进行离线支持。
4.  将您的工作区映射分成几部分，以便它们包含更少的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T10:04:06.060

请删除 %Temp% 文件夹下的文件，并以“以管理员身份运行”模式打开项目。它适用于我。

问候， 卡马拉杰

# pylons - pylons mako 如何检查变量是否存在

> ID：12006720
> 
> 赞同：6
> 
> 时间：2012-08-17T13:25:22.053
> 
> 标签：pylons, mako

在 django 中，我们可以这样做：

```
views.py : 

    def A(request):
        context = {test : 'test'}
        return render_to_response('index.html', context , context_instance = RequestContext(request))

    def B(request):
        context = {}
        return render_to_response('index.html', context , context_instance = RequestContext(request))

index.html:

        {% if test %}
            {{ test }}
        {% endif %} 
```

并且让我们的模板渲染没有错误，即使我使用`method B`, where 变量`'test'`不存在，但我仍然可以将它放在模板中。

我想在控制器中对 pylons + mako 做同样的事情：

```
foo.py

    def A(self):
        c.test = 'test'
        return render('index.html')

    def B(self):
        return render('index.html')

index.html :

        % if c.test:
            ${'c.test'}
        % endif 
```

在 Django 中，我可以做到这一点，但在 Pylons 中，我得到一个错误，无论如何要检查是否`'c.test'`存在？

错误：AttributeError：'ContextObj'对象没有属性'test'

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-09T17:47:52.923

我有一个类似的问题，我有多个使用相同模板的视图，需要测试是否设置了变量。我查看了 chris 引用的文档，并找到了另一种解决此问题的方法，无论`mako.strict_undefined`其设置方式如何。本质上，您调用对象`get()`上的方法`context`。在您的示例中，您可以执行以下操作：

```
% if context.get('test', UNDEFINED) is not UNDEFINED:
  ${test}
% endif 
```

或者

```
${context.get('test', '')} 
```

这将像存在一样打印，`${test}`如果不存在则打印一个空字符串。

不幸的是，您似乎无法使用最直观的`in`运算符。`context`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T13:32:28.423

来自[mako Docs on Context Variables](http://docs.makotemplates.org/en/latest/runtime.html#context-variables)：

```
% if someval is UNDEFINED:
    someval is: no value
% else:
    someval is: ${someval}
% endif 
```

文档将其描述为**引用不在当前上下文中的变量名**。Mako 会将这些变量设置为 value `UNDEFINED`。

我检查像这样的变量：

```
% if not someval is UNDEFINED:
    (safe to use someval) 
```

但是，如果 pylons/pyramid 具有`strict_undefined=True`设置，则尝试使用未定义的变量会导致`NameError`引发 a。他们为这样做提供了一个简短的哲学理由，而不是简单地用空字符串替换未设置的变量，这似乎与 Python 哲学一致。我花了一段时间才找到这个，但阅读[Mako 运行时的整个部分](http://docs.makotemplates.org/en/latest/runtime.html)将清楚 Mako 如何接收、设置和使用上下文变量。

**编辑**：
为完成起见，文档解释了[此处](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/environment.html#mako-strict-undefined)`strict_undefined`的设置。您可以通过在您的 .ini 文件之一中设置它来更改此变量：

```
[app:main]
...
mako.strict_undefined = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:32:46.983

有点晚了，所以每当您在模板上使用控制器上不存在的变量时，pylons 都会引发错误，要禁用错误，只需将其放入您的 environment.py ：

```
config['pylons.strict_tmpl_context'] = False 
```

# sql - 在 MS ACCESS 中获取用于出席的虚拟记录

> ID：12006722
> 
> 赞同：1
> 
> 时间：2012-08-17T13:25:34.447
> 
> 标签：sql, ms-access, ms-access-2007

有如下考勤表：

```
| ATID | STID | ATDATE    | PRESENT |
..........................................................
| 1    |  25  | 6/8/2012  | true    |
| 2    |  25  | 7/8/2012  | true    |
| 3    |  25  | 15/8/2012 | true    |
| 4    |  25  | 19/8/2012 | false   |
| 5    |  25  | 25/8/2012 | true    | 
```

数据在上面的表格中，但我需要这样：

```
| STID | ATDATE    | PRESENT |
..........................................................
|  null  | 1/8/2012   | null    |
|  null  | 2/8/2012   | null    |
..
..
|  25    | 6/8/2012   | true    |
|  25    | 7/8/2012   | true    |
..
..
|  null  | 30/8/2012  | null    |
|  25    | 31/8/2012  | true    | 
```

记录少于一个月的天数，但我需要的记录取决于一个月的天数，显示表中的记录和其他记录应该是虚拟的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:36:05.637

您将需要创建一个日历表，其中包含每个相关日期的条目，并使用它来加入您的出勤表。

```
 SELECT CalDate,STID,ATDATE,PRESENT 
 FROM Calendar
 LEFT JOIN Attendances
 ON Calendar.CalDate=Attendance.ATDATE 
```

这只是日历表的众多用途之一。

# python - 找到中心不同点所成的最大角度

> ID：12006723
> 
> 赞同：0
> 
> 时间：2012-08-17T13:25:47.737
> 
> 标签：python, math, coordinate-systems, algebra

下面给出的是一个示例图像，其中“中心点”是 (x0,y0)（车轮的中心）。其他点是辐条的另一端。“中心点”和辐条另一端之间的距离可能不同（不同长度的辐条）。这些点都在笛卡尔坐标系中。

我需要在这里找到任意两个连续辐条所形成的最大角度。在此图中，所有角度都相同，但假设缺少任何一个辐条，那么我们将该角度作为原点处的最大角度。

我的看法：我正在计算每个边缘相对于 x 轴的角度，一次减去前一个（给出两个辐条之间的角度）。我正在跟踪最大的角度，如果遇到比前一个更大的角度，每次都会更新它。我的方法有效，但只是想知道是否有任何有效的方法可以找到相同的方法。

![带辐条的轮子](../Images/0218095a25e25aead3e20da5038ccb6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:06:59.317

假设您想要两个辐条之间的角度，我建议您将数据点转换为极坐标/复坐标，这在`cmath`模块中很容易，并允许您执行以下操作（`phase`仅取出关于中心的角度）：

```
import cmath

def largest_spoke_angle(centre, peripheral):
     per_from_centre = [complex(z[0]-centre[0], z[1]-centre[1]) for z in peripheral]
     per_angles = [cmath.phase(z) for z in per_from_centre]
     per_angles.sort()

     differences = [ per_angles[n+1]-per_angles[n] for n in range(len(per_angles)-1)] \
                    + [per_angles[0] +2*cmath.pi - per_angles[-1]]

     return max(differences)#in radians

centre = (0.,0.)
peripheral = [(1.,2.),(3.,4.),(3.,5.)]
print largest_spoke_angle(centre, peripheral) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:53:46.763

我想我会做这样的事情：

```
angles = [get_angle_from_xaxis(origin,point) for point in points]
#make sure the angles are in order
angles.sort()  
#need to compare last one with first one
angles.insert(0,angles[-1]-360.0)  #360 if degrees, otherwise 2*math.pi.
#Now calculate the difference between adjacent angles and take the maximum
maxangle = max( angles[i] - angle for i,angle in enumerate(angles[:-1],1) ) 
```

这基本上就是您描述的解决方案。我唯一添加的是最后一个和第一个之间的检查以及确保我们的角度顺序正确的排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-18T17:35:52.313

@user1597034 的答案是正确的。但无法确定哪些辐条导致的角度最大。

下面的代码找到两个最大角度向量的索引：

```
import cmath
import numpy as np

center = (0.,0.)
peripheral = np.array([(-1.,-1.),(0.,1.),(1.,-0.55), (0,-1), (-1,1)])

per_from_centre = [complex(z[0]-center[0], z[1]-center[1]) for z in peripheral]
per_angles = [cmath.phase(z) for z in per_from_centre]
id_ord = np.argsort(per_angles,axis=-1) # order index 
per_angles.sort()

differences = [ per_angles[n+1]-per_angles[n] for n in range(len(per_angles)-1)] \
               + [per_angles[0] +2*cmath.pi - per_angles[-1]]

# ----- so far, same code in relation to @user1597034  -----

# find index of adjacent angles of greater angle
max_value = max(differences) # maximum value
for i in range(len(differences)):
    if max_value == differences[i]:
        if i == (len(differences)-1):
            pairs = [id_ord[0], id_ord[-1]]
        else:
            pairs = [id_ord[i]] + [id_ord[i+1]]
        print('pair index of largest angle:',pairs) 
```

[![在此处输入图像描述](../Images/1226ab90732a1131ed8d85a48980420d.png)](https://i.stack.imgur.com/dlPxI.png)

**最大角度的对索引：** [2, 1]

# android - 在 android 中为通知设置振动、灯光或声音的组合

> ID：12006724
> 
> 赞同：7
> 
> 时间：2012-08-17T13:25:50.493
> 
> 标签：android, android-notifications

我想为用户提供选择灯光、声音或振动或这三者的组合的选项，用于警报`Notification`。

在 android 文档中，我看到有一个选项可以选择`DEFAULT_ALL`在所有三种警报方法中的使用位置。

否则，可以选择其中任何一个（`DEFAULT_LIGHTS`, `DEFAULT_VIBRATE`, `DEFAULT_SOUND`）。

有什么方法可以组合例如`SOUND`and `VIBRATION`but no`LIGHTS`和其他组合？

* * *

**编辑**

`Notification.Builder's`（来自prolink007的回答）方法`setDefaults(int default)`说：

> 该值应为以下字段中的一个或多个与**位或**组合：DEFAULT_SOUND、DEFAULT_VIBRATE、DEFAULT_LIGHTS。

这个应该怎么用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-17T13:31:27.660

[Notification.Builder API 11](http://developer.android.com/reference/android/app/Notification.Builder.html)或[NotificationCompat.Builder API 1](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)提供了几种不同的方法来设置这些类型的警报。

*   设置灯（...）
*   设置声音（...）
*   设置振动（...）

* * *

> 该值应为以下字段中的一个或多个与位或组合：DEFAULT_SOUND、DEFAULT_VIBRATE、DEFAULT_LIGHTS。

未经测试，但我相信如果你愿意，你会做这样的事情`SOUND`，`VIBRATION`并且`LIGHTS`：

```
setDefaults(DEFAULT_SOUND | DEFAULT_VIBRATE | DEFAULT_LIGHTS); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-16T19:35:13.930

我知道这个答案已经回答了一段时间，但只是想提供我的解决方法，它非常适用于灯光、振动和声音的多种组合，在您向用户提供启用或启用选项的情况下很有用禁用它们。

```
int defaults = 0;
if (lights) {
    defaults = defaults | Notification.DEFAULT_LIGHTS;
}               
if (sound) {
    defaults = defaults | Notification.DEFAULT_SOUND;
}
if (vibrate) {
    defaults = defaults | Notification.DEFAULT_VIBRATE;
}
builder.setDefaults(defaults); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-09T23:24:04.510

为了便携性，我更喜欢[NotificationCompat](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)。
用户可能更喜欢他/她的默认值。在 NotificationCombat 中，您可以将振动、灯光和声音设置为用户的默认设置，如下所示：

```
.setDefaults(-1) 
```

其中“-1”与 DEFAULT_ALL 匹配：http: [//developer.android.com/reference/android/app/Notification.html#DEFAULT_ALL](http://developer.android.com/reference/android/app/Notification.html#DEFAULT_ALL)

并不是说您必须请求 VIBRATE 权限，否则您会收到错误消息。将此添加到您的 Android 清单文件中：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T07:15:37.063

在果冻豆设备上，仅当通知优先级设置为最大或默认时，led 才有效，请再次检查。以下代码片段在 jb 设备上对我来说工作正常。

```
notification.setLights(0xFF0000FF,100,3000);
notification.setPriority(Notification.PRIORITY_DEFAULT); 
```

在这里，我显示蓝色 LED 通知通知，它将保持打开 100 毫秒并关闭 3000 毫秒，直到用户解锁他的设备。

并检查您是否使用 NotificationCompat（兼容性）类而不是忽略 setDefaults 方法并使用 SetLight、SetSound、Setvibration 等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-01T06:36:24.250

我遇到了同样的问题，但在登陆这里后得到了更好的解决方案。这是一个科特林：

```
fun getDefaults(val isSoundOn: Boolean, val isVibrate: Boolean, val isLightOn: Boolean): Int {
    var defaults = 0
    if (isLightOn && isSoundOn && isVibrate)
        return Notification.DEFAULT_ALL
    if (isLightOn) {
        defaults = defaults or Notification.DEFAULT_LIGHTS
    }
    if (isSoundOn) {
        defaults = defaults or Notification.DEFAULT_SOUND
    }
    if (isVibrate) {
        defaults = defaults or Notification.DEFAULT_VIBRATE
    }
    return defaults
} 
```

# php - 将数组存储在 cookie 中是否安全？

> ID：12006725
> 
> 赞同：1
> 
> 时间：2012-08-17T13:25:52.103
> 
> 标签：php, arrays, security, cookies

我有一个脚本，它需要对数组进行洗牌，然后将它们存储到一个 cookie 中，这样用户只会对数组进行一次洗牌。

这是脚本：

```
$shufflecookie = $_COOKIE['shuffle'];

if (isset($_COOKIE['shuffle'])) {
  $items = unserialize(gzuncompress(base64_decode($shufflecookie)));
}
else {
  shuffle($items);
  $items_serialized = base64_encode(gzcompress(serialize($items)));
  setcookie("shuffle", $items_serialized, 0, "/");
} 
```

这样做安全吗？或者也许有更好的方法来存储这些数据？谢谢

UPD。感谢您的帮助。我所做的只是用会话替换cookie。所以新代码是：

```
$shufflecookie = $_SESSION["shuffle"];

if (isset($_SESSION["shuffle"])) {
  $items = unserialize(gzuncompress(base64_decode($shufflecookie)));
}
else {
  shuffle($items);
  $items_serialized = base64_encode(gzcompress(serialize($items)));
  $_SESSION["shuffle"] = $items_serialized;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:49:31.580

自从提出问题以来，您似乎已经用次要答案更新了问题。

在 cookie 中存储数据的一个缺点是它以明文形式存储在客户端电脑上（除非首先加密服务器端）。即使您确实加密了数据，用户也总是有可能设法解密它。取决于 cookie 的生存时间，cookie 也有可能在浏览器的生命周期之后仍然存在（即关闭后）。这引入了一种可能性，即在稍后请求页面时将 cookie 中的数据发送回服务器之前，可能不是您的客户端更改了 cookie 中的数据。

另一方面，将信息存储在会话中有助于确保信息存储在服务器端并阻止客户端查看此信息。通常在使用会话时，您只需将会话 ID 存储在 cookie 中即可识别用户属于哪个会话。

因此，任何应该安全的数据都应该保存在会话而不是 cookie 中。

# ios - 如何将具有不同公司和开发者名称的应用程序上传到 Apple 应用商店？

> ID：12006726
> 
> 赞同：6
> 
> 时间：2012-08-17T13:25:52.443
> 
> 标签：ios, app-store, app-store-connect, ios-provisioning

它应该很容易，但我找不到任何方法来为应用商店应用程序**的开发人员字段定义不同的名称。**

例如：大多数 Electronic Arts 游戏都有不同的公司和开发者名称。命令与征服红色警报**游戏属于美国艺电**公司，但它是**由 EA Swiss Sarl**公司开发的。

我怎样才能做到这一点？

![不同公司和开发商名称的示例](../Images/6c29cb3755b00cc19f78ba066e9943cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:32:28.910

第一次提交申请时，Apple 会要求您选择公司名称，因为它会出现在 iTunes 中。

> 公司名称（艺术家姓名）——将在 App Store 上显示的公司名称。例如，上面在 iTunes Connect 中看到的“Cyber​​interactive”直接指将出现在 App Store 产品页面左上角的名称。您的公司名称是 App Store 中应用程序的组织元数据的关键部分，因为当客户单击此名称时，他们将被引导到一个页面，该页面包含通过您的开发者帐户发送的所有当前正在运行的应用程序。

但请注意，之后无法更改：

> 重要提示：一旦在此页面上提交，您的主要语言和公司名称将无法编辑。这些设置将应用于添加到您帐户的所有应用程序。在继续之前确保这些设置是正确的。

[iTunesConnect 开发人员指南 (PDF)](http://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)中详细解释了所有内容

**编辑**

条款非常混乱。我自己也糊涂了。我的回答中提到的*公司名称是“Electronic Arts”。*我意识到您在谈论**真实的**公司名称（EA Swiss SARL），这是您公司的法定名称，列在 Apple 会员中心的“组织资料”中。我检查了我的帐户，它不能更改。[我相信您可以通过devprograms@apple.com](http://devprograms@apple.com)联系 Apple Dev 支持并要求他们更改您的法定名称。但他们可能需要法律文件才能这样做。

# mysql - 每次我选择时，表中的行数都会不断变化，有人能解释一下吗？

> ID：12006727
> 
> 赞同：5
> 
> 时间：2012-08-17T13:25:56.787
> 
> 标签：mysql, sql, phpmyadmin

我导入了一堆数据，预期的行数应该是`41856`.

现在每次我使用 进入表格时`phpMyAdmin`，我都会看到不同数量的行。没有任何东西连接到它会改变行数。

在这里，我添加了几张桌子的屏幕截图，彼此相隔几秒钟。

41,610 条记录、41,759 条记录、41,647 条记录……

![在此处输入图像描述](../Images/5d2ee9a6056d0bd7bde3cbf19dc44400.png) ![在此处输入图像描述](../Images/cdff64ba2ce33f1c908400c6c6ce2cac.png) ![在此处输入图像描述](../Images/04fb818cc608ae5bccad48524f1685ab.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T13:29:48.337

一些存储引擎，例如 MyISAM 和 ISAM，会存储准确的计数。但是对于其他存储引擎，例如 InnoDB，这个值是一个近似值，可能与实际值相差 40% 到 50%。在这种情况下，请使用 SELECT COUNT(*) 来获得准确的计数。”

# java - 正确同步的程序是否仍然允许数据竞争？（第一部分）

> ID：12006730
> 
> 赞同：5
> 
> 时间：2012-08-17T13:26:06.050
> 
> 标签：java, multithreading, memory-model

JLS有两个结论：

*   C1：如果一个程序没有数据竞争，那么该程序的所有执行将看起来是顺序一致的：`data-race-free => sequentially consistent`
*   C2：如果一个程序正确同步，那么该程序的所有执行将看起来是顺序一致的：`correctly synchronized => sequentially consistent`

如果 C1 的反义词为真，那么我们可以得出结论：

*   C3：如果一个程序正确同步，那么它就没有数据竞争：`correctly synchronized => data-race-free`

但遗憾的是，JLS 中并没有这样的说法，所以我得出第四个结论：

*   C4：一个程序可以正确同步并且有数据竞争。

但我对这种方法并不满意，我想证明这个结论是正确的（或错误的），即使是以非正式的方式或样本方式。

首先，我认为显示包含数据竞争的多线程程序的顺序一致执行的代码段有助于理解和解决这个问题。

经过认真考虑，我仍然找不到合适的样品。那么请给我这样的代码段好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T15:00:43.507

一个很好的例子可能是 String 的哈希码：

```
private int hash; // Default to 0

public int hashCode() {
    int h = hash;
    if (h == 0 && count > 0) {
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

这里存在数据竞争，因为哈希可以由不同的线程写入和读取，并且没有发生之前的关系（没有同步）。

但是程序是顺序一致的，因为线程不可能看到不是字符串的实际哈希码的哈希码（当线程执行哈希码方法时，它可以看到 0 并重新计算值，这是确定性的，或者它看到一个有效值）。这是有效的，因为 int 写入是原子的。

**编辑**

这个（几乎）相同的代码被破坏并且可能返回 0 的哈希码：

```
public int hashCode() {
    if (hash == 0 && count > 0) { //(1)
        int h = hash;
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return hash; //(2)
} 
```

因为 (1) 和 (2) 可以重新排序：(1) 可以读取非空值，而 (2) 将读取 0。这在第一个示例中不会发生，因为计算是在局部变量上进行的，并且返回value 也是那个局部变量，根据定义，它是线程安全的。

**编辑 2**

关于您的提议 C4，[我认为这是不可能的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-400)：

> 当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步。
> 
> 如果程序正确同步，则程序的所有执行都将显示为顺序一致（第 17.4.3 节）。

因此，如果程序正确同步：

*   所有的执行看起来顺序一致。
*   所有顺序一致的执行都没有数据竞争

因此我们可以得出结论，所有执行都没有数据竞争，因此程序没有数据竞争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:31:02.020

竞争条件意味着让程序的输出取决于谁首先到达特定点。例如，如果您有 2 个线程：T1 和 T2，如果您的程序输出为 X，如果 T1 首先到达程序中的点 P，并且如果程序的输出是 Y，如果 T2 先到达点 P，那么您就有竞争条件。

在伪代码中：

```
 Global variable i initialized to 6;
 Thread 1: 
       aquire(lock l)
             increment global variable i, i.e. i++;

 Thread 2: 
       aquire(lock l)
             double the value of global var i, i.e.: i*=2; 
```

如果 T1 获得锁 l 第一和 T2 秒，则 i 的值将是 14 如果 T2 获得锁 l 第一和 T1 秒，则 i 的值将是 13

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T00:43:22.363

[http://rsim.cs.illinois.edu/Pubs/popl05.pdf](http://rsim.cs.illinois.edu/Pubs/popl05.pdf)

证明似乎是这样的：

假设一个正确同步的程序的执行包含数据竞争，我们可以发现一个包含数据竞争的顺序执行，违反了“正确同步的程序”的定义[C1]

因此执行不能包含数据竞争。[C3] 从那里，可以证明执行是顺序一致的。[C2]

所以C3为真，用来证明C2。

# javascript - 如何在 multiSelect 下拉清单中使选项强制/只读

> ID：12006733
> 
> 赞同：1
> 
> 时间：2012-08-17T13:26:25.750
> 
> 标签：javascript, jquery, html, css, multi-select

我正在使用[jQuery MultiSelect 插件](http://labs.abeautifulsite.net/archived/jquery-multiSelect/demo/)。我有一个要求 - 默认选择英语，用户不能删除英语。

我尝试过（它使英语始终被检查，但值被删除）：

查询：

```
jQuery("#language").multiSelect({
    oneOrMoreSelected: '*',
    selectAll: false,
    noneSelected: 'Check some languages!'
}, function(objCheckbox) {
    if (jQuery(objCheckbox).val() == "English") {
        jQuery(objCheckbox).attr("checked", "checked");
    }
});​ 
```

HTML：

```
<select id="language" name="language" multiple="multiple" style="width:300px;">
    <option value="English" selected="selected">English</option>
    <option value="Hindi">Hindi</option>
    <option value="Spanish">Spainish</option>
    <option value="Urdu">Urdu</option>
    <option value="French">French</option>
    <option value="Bengali">Bengali</option>
</select>​ 
```

如果有帮助，这里是[jsfiddle 表示。](http://jsfiddle.net/VEZMR/1/)谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:14:00.290

您正在使用的插件无法执行此操作，但只需对插件稍作更改，您就可以轻松实现此行为，

1.  [从http://labs.abeautifulsite.net/archived/jquery-multiSelect/jquery.multiSelect.js](http://labs.abeautifulsite.net/archived/jquery-multiSelect/jquery.multiSelect.js)下载插件的源代码并将其保存在项目的库中

2.  使用将本地保存的文件加载到您的项目中`<script src="..THE FILE PATH..."></script>`

3.  替换行号 73 与`var html = '<label><input type="checkbox" name="' + id + '[]" value="' + option.value + '"' + (option.disabled?' disabled="disabled"':'');`

4.  替换行号 442 与：`suboptions.push({ text: $(this).html(), value: $(this).val(), selected: $(this).attr('selected'),disabled: $(this).is(":disabled") });`

5.  将第 449 行替换为：`options.push({ text: $(this).html(), value: $(this).val(), selected: $(this).attr('selected'),disabled: $(this).is(":disabled") });`

6.  在您的 html 代码中 - 将`disabled="disabled"`属性添加到`option`您要禁用的

7.  你完成了

此实现不需要回调函数

这是一个小提琴： http: [//jsfiddle.net/KGUmR/](http://jsfiddle.net/KGUmR/) （我添加了已编辑插件的缩小源，因为我不想托管它 - 请查看 Javascript 方块的底部以供插件使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:04:08.163

这对你有帮助吗？

[http://jsfiddle.net/zorro/VEZMR/9/](http://jsfiddle.net/zorro/VEZMR/9/)

# c# - 在 Internet Explorer 8 和 9 中播放非 pcm (gsm) ".wav" 文件

> ID：12006735
> 
> 赞同：1
> 
> 时间：2012-08-17T13:26:41.380
> 
> 标签：c#, asp.net, audio, wav, gsm

再会。帮助我解决我的问题。请。

我需要在 Internet Explorer 8 和 9 中播放“.wav”文件（GSM 6.10、8000 Hz、1 个通道、每个样本 0 位、块对齐：65、每秒平均字节数：1625）。

IE9 在 [embed] WMP 中播放此文件，但 IE8 不是。我试图将它转换为 mp3 或 wma（仅适用于 IE8），但它不起作用。

请帮助我，原谅我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:38:37.290

多媒体对于网络浏览器来说并不是一件容易的事情。首先，所有浏览器的实现方式略有不同。支持 IE 可能是一场噩梦，因为微软倾向于将某些东西从一个版本的 IE 更新到另一个版本，这意味着你最终可能会使用大量杂乱的代码来构建网站以支持 IE6、IE7、IE8、IE9 (IE10...) 以及如 FireFox、Chrome、Safari 等。

最好支持网络标准，而不是浏览器！所以...

1.  如果适用，您应该使用新的 HTML5*音频*元素 (mp3 / ogg)
2.  使用支持您的格式的后备媒体播放器。（您已经提到您使用的是嵌入式 WMP，但也有免费的 flash/silverlight。）您使用不支持音频元素的后备。

3.  附加：考虑使用 Modernizr 检查浏览器支持的标准/功能： [http ://www.modernizr.com/](http://www.modernizr.com/)

在此处研究 HTML 5 音频标签：http: [//www.w3schools.com/html5/tag_audio.asp](http://www.w3schools.com/html5/tag_audio.asp)

在此处研究以 HTML 格式播放音频：http: [//www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:49:31.870

马修·莱顿，谢谢你的回答。HTML 5 不是我的，因为 IE 9 不支持`<audio>`标签中的“GSM-wav”。我找到了这个解决方案，它对我有用：

```
 <object id="Player_O" classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"
                        codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="70px" 
                        type="application/x-oleobject" width="400px">
                        <param name="url" value="C:\1.wav">
                        <param name="autostart" value="false">
                        <embed id="Player_E" height="70px" 
                            pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" 
                            src="file:///C:/1.wav" type="application/x-mplayer2" width="400px"></embed>
                        </param>
                        </param>
                    </object> 
```

# django - UserProfile 的 Django 表单问题

> ID：12006736
> 
> 赞同：2
> 
> 时间：2012-08-17T13:26:41.510
> 
> 标签：django, forms

我想创建一个“更新用户的个人资料”页面让用户修改他们的个人资料，所以我想出了以下模型：

```
class Profile(models.Model):
    user = models.OneToOneField(User)

    nick_name = models.CharField(blank=True,max_length=100)
    school = models.CharField(blank=True,max_length=100)
    motto = models.CharField(blank=True,max_length=100)

class ProfileForm(ModelForm):
    class Meta:
        model = Profile 
```

我的观点被设计为：

```
@login_required
def update_profile_view(request):
    if request.method == 'POST':
        user = request.user
        try:
            profile = user.get_profile()
        except Exception:
            profile = Profile.objects.create(user=user)
        form = ProfileForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            profile.nick_name = cd['nick_name']
            profile.school = cd['school']
            profile.motto = cd['motto']
            profile.save()
            return HttpResponseRedirect('/main_page/')
    else:
        form = ProfileForm()
    return render(request, 'update_profile.html', {'form':form}) 
```

用户和个人资料之间的关系显然是 1to1，通过请求我可以确定当前用户。所以表单的用户字段不需要填写。不幸的是，这无法通过“form.is_valid()”测试。在调用“is_valid”之前似乎很难修改表单。为简单起见，我不想创建自己的表单类，也不想编写自定义表单验证。有没有其他方法可以解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:36:52.043

您的视图可以大大简化：

```
@login_required
def update_profile_view(request):
    try:
        profile = Profile.objects.get(user=request.user)
    except Profile.DoesNotExist:
        profile = None

    form = ProfileForm(request.POST or None, instance=profile)

    if request.method == 'POST':            
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/main_page/')
    return render(request, 'update_profile.html', {'form':form}) 
```

无需像您正在做的那样手动分配字段。Django ORM 知道如何自动进行插入和更新。因此，如果您只是将 ProfileForm 传递给 Profile 的一个实例，它就会知道要进行更新。如果没有配置文件的实例，它将执行插入。

现在，如果您想让用户的分配在 UI 中透明，您需要`user`从表单中排除该字段并自行分配。有几种不同的方法可以做到这一点。

我还建议`reverse`在您的重定向中利用，这样您就没有硬编码的路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:39:04.870

你基本上有两种选择：

1 ProfileForm的修改：

```
 class ProfileForm(ModelForm):
        class Meta:
            model = Profileclass
            exclude = ('user',) 
```

2 如下更改此行：

```
form = ProfileForm(request.POST, instance=profile)
if form.is_valid():
    updated_profile = form.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:35:33.920

您可以在表单的 init 方法 (self.fields['user'].required = False) 中将用户字段的值设置为不需要，或者在模型中设置用户不可编辑 (editable=False)。

在您的视图方法中，调用 profile = form.save(commit=False)，然后执行 profile.user = your_user 和 profile.save()

您不必手动将清理后的数据应用到配置文件，因为 ModelForm 会执行此操作。

# python - Wxpython如何在windows中改变仪表进度条的颜色

> ID：12006741
> 
> 赞同：1
> 
> 时间：2012-08-17T13:26:59.650
> 
> 标签：python, user-interface, python-3.x, wxpython

我正在使用 WxPython 作为 Windows 中的 GUI 在 Python 中设计软件。我想在我的应用程序中更改仪表进度条的默认颜色。请帮助...提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:07:39.070

您可以尝试使用 SetForegroundColour 或 SetBackgrounColour 之类的方法，但由于仪表包含本机小部件，我不确定它们是否会产生任何效果。幸运的是，有一个名为 PyGauge 的通用仪表小部件：wx.lib.agw.pygauge

我认为它不如原生的漂亮，但你绝对可以改变颜色。wxPython 演示包中有几个 PyGauge 示例。

# jquery - jQuery HTML 字符串已更改，没有任何修改

> ID：12006745
> 
> 赞同：0
> 
> 时间：2012-08-17T13:27:04.687
> 
> 标签：jquery, html

我的动态创建的 HTML 字符串有问题。

该代码正在循环中执行。

首先，我进入`else`代码块。

在第二个循环的迭代中，我进入了`if(found.length > 0) {}`代码块，在第一行中，我看到返回的 HTML 没有关闭输入的 slash `/`。为什么 ？

```
var newHtml = $('');

if(file.updateWithId !== 0) {
   var found = $(newHtml).find('input.del-file-cb[file-id="' + file.updateWithId + '"]');

   if(found.length > 0) {
       var replaceValue = found.parent().parent().html(); //here I see changed HTML
       found.parent().parent().find('label.label-none:eq(0)').text(file.name);
       found.parent().parent().find('label.label-none:eq(1)').text(file.type);
       rowsAppends = rowsAppends.replace(replaceValue, $(newHtml).html());
       newHtml = $(rowsAppends);
   }
 } else {
     rowsAppends += '<tr><td class="text-left"><label class="label-none">' + file.name + '</label></td><td><label class="label-none">' + file.type + '</label></td><td><input class="del-file-cb" file-id="' + file.file_id + '" type="checkbox" /></td></tr>';
     newHtml = $(rowsAppends);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:11:11.483

html() 方法的输出取决于浏览器，并且可能并不总是与原始源匹配。[jQuery 文档](http://api.jquery.com/html/)说：

> 此方法使用浏览器的 innerHTML 属性。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，如果属性值仅包含字母数字字符，Internet Explorer 有时会省略属性值的引号。

例如，[至少有一份报告](http://bugs.jquery.com/ticket/4509)称 Internet Explorer 会从自闭合标签（如`<input>`. 您可能对此无能为力。

# javascript - 大图像可防止 div 淡入

> ID：12006754
> 
> 赞同：0
> 
> 时间：2012-08-17T13:28:02.950
> 
> 标签：javascript, jquery, image

我有这个设置：

```
<div id="container1">
    <!-- content from one section -->
</div>
<div id="container2" style="display:none;">
    <div id="sub-container">
        <img src="image1.png" />
        <img src="image2.png" />
        <!-- 20 or so images sit here -->
    </div>
</div> 
```

`container1`最初显示。在 document.ready 上，除了前四个图像之外的所有图像都被隐藏起来，以便构建一个旋转木马。用户单击一个按钮，`container1`淡出和`container2`淡入。

用户第一次单击按钮时，`container2`不会淡入，而是直接跳转到可见状态。第二次，淡入正常工作。

所涉及的图像相当可观（总大小约为 10MB），但这并不是问题，因为该页面旨在在本地查看。如果我有一个或两个图像，问题就不会出现这一事实告诉我，浏览器正在努力同时加载图像和淡入。第二次加载时，图像已被缓存并正常淡入。

我尝试了一种像这样的预加载形式：

```
/* take the div outside the viewport but still render it */
.hide {
    position: absolute;
    top: -9999px;
    left: -9999px;
}

var cacheContainer = "<div class='hide'></div>",
    $images = $("#sub-container img");
// move the images to the container
$(cacheContainer).appendTo("body").append($images);

// hopefully 500ms would be enough for the images to render?
setTimeout(function () {
    images.appendTo("#sub-container");
    doGallery(); // build carousel
},500); 
```

...然而，这会导致同样的问题 -`container2`第一次弹出而不是消失，之后工作得很好。

有任何想法吗？

* * *

根据要求，这是我用来隐藏/显示容器的内容：

```
$(document).ready(function() {
    var $currentTab = $("#container1"),
        $newTab,
        newTabName;

    // a couple of more unrelated setting up functions go here

    doImageCaching(); // the function I've got above

    $("#container2").hide();

    $("#tab-links>a").click(function(e) {
        e.preventDefault();

        // probably a bit cheeky doing it this way but oh well
        newTabName = $(this).attr("id").replace("-btn", "");
        if($currentTab.attr("id") === newTabName) {
            return;
        }
        $newTab = $("#" + newTabName);

        $newTab.stop(true, true).fadeToggle(200);
        $currentTab.stop(true, true).delay(100).fadeToggle(200);
        $currentTab = $newTab;
        $newTab = null;
    });
}); 
```

以下`#tab-links`供参考：

```
<div id="tab-links">
    <a id="container1-btn" href="#">show container 1</a>
    <a id="container2-btn" href="#">show container 2</a>
</div> 
```

* * *

**编辑 2**所以我刚刚注意到一些新的东西：所以我第二次切换到`container2`它时会像往常一样淡入淡出。如果我等待 10 秒左右，然后尝试`container2` *再次*切换到，问题再次出现。

所以在我看来加载 DOM 与此无关，我正在处理 Chrome 的内部存储器。因此它会加载图像，然后在它们再次隐藏时“忘记”它们。哎呀。

是否有人对如何防止浏览器“忘记”图像有任何想法，或者这是我不应该采取的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:08:40.830

所以我最终将我的超高质量 PNG 转换为超高质量 JPG - 这导致文件大小减少了大约 20-30%，而外观质量几乎没有任何降低。我的问题也消失了。

这个故事的寓意是：即使您正在开发一个不上线的页面，您仍然需要优化您的图像。

感谢大家的帮助。

# c# - 保存隐藏字段中的值

> ID：12006755
> 
> 赞同：0
> 
> 时间：2012-08-17T13:28:03.683
> 
> 标签：c#, asp.net, .net, html, vb.net

我有一个由两个不同用户使用的页面。如果登录用户是“user1”，我会显示所有 8 个字段，如果是“user2”，我会显示 8 个字段中的 7 个。这是我用来隐藏 user2 的一个字段的 html 代码。

```
 <%If User1 Then%>   
   <tr>
      <td>
         <cc1:Label ID="lblTextBox1" runat="server" />
         <cc1:TextBoxId ID="txtTextBox1" runat="server" LabelId="lblTextBox1" Columns="20" />
     </td>    
  </tr>
<%End If%> 
```

现在，当 aspx.vb 页面加载时，它会将所有这些控件一起填充，但是由于上面的 html 代码，这一字段仍然隐藏。当点击页面上的保存按钮时，保存方法不会尝试区分user1和user2，而是从所有控件中提取值并保存。

我的问题是当 user2 'saves' 时，'hidden' 文本框的值变成了 null，尽管在填充其他控件时，这个字段也被填充了。不知何故，值在保存时变成了“”

为什么会这样？对此的最佳解决方案/解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:46:34.460

您是否考虑过在代码中设置可见性，而不是使用渲染块？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:03:32.230

```
<asp:Panel id="pnlForUser2" runat="server">
<tr>
    <td>
        <cc1:Label ID="lblTextBox1" runat="server" />
        <cc1:TextBoxId ID="txtTextBox1" runat="server" LabelId="lblTextBox1" Columns="20" />
    </td>    
</tr>
</asp:Panel> 
```

在后面的代码中：

```
if(Page.User.Identity.Name.Equals("user2"))
    pnlForUser2.Visible = true; 
```

或使用速记运算符`??`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:11:33.847

一个快速而肮脏的解决方法是将该控件的值显式保存到 ViewState 或 Session 中并手动重新填充它。该问题可能源于页面上所有经典的 ASP 样式代码块。

# php - 带有 PHP 的 Websocket 服务器

> ID：12006761
> 
> 赞同：5
> 
> 时间：2012-08-17T13:28:16.033
> 
> 标签：php, ajax, websocket, socket.io

我目前正在开发一个 PHP 应用程序，它将使用 websockets 进行客户端-服务器通信。我多次听说 PHP 不应该用于服务器应用程序，因为缺少线程机制、内存管理（循环引用）或不方便的套接字库。

到目前为止，一切都运行良好。我使用 phpws 作为 websocket 库和 Doctrine DBAL 来访问不同的数据库系统；PHP 是 5.3.8 版本。服务器最多应为 30 个客户端提供服务。然而，尤其是在最后几天，我读了几篇文章，说明 PHP 对于长时间运行的应用程序无效。

现在我不知道我是否应该继续使用带有 PHP 的 websockets 或重建整个服务器端应用程序。我用 Socket.IO 尝试过 Python，但没有得到预期的结果。

我想我有以下选择：

*   保持一切原样。
*   让应用程序结合 Socket.IO 使用 Ajax - 例如，运行一个服务器端脚本，当数据提交到服务器时调用客户端的 ajax 调用。

最后一点听起来很有趣，尽管它需要一些工作.. 服务器一次执行所有客户端请求会不会是个问题？

你会推荐什么？PHP的内存管理问题（每次客户端向服务器发送数据时我都使用gc_collect）仍然有效吗？除了不使用 PHP 作为服务器的明显原因（没有线程，...）之外，还有其他原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:23:49.093

您可以尝试在服务器上另一个端口上的节点服务器上运行您的 socket.io（也就是说，如果您没有使用像 goDaddy 这样的托管计划）。

我正在使用它，性能非常令人满意。我在端口 80 上有一个 apache 服务器，为我的 php 文件提供服务，我的服务器-客户端通信是使用在端口 8080（开发）或 843（产品）上运行 socket.io 的 Node.js 服务器完成的。

Node.js 真的很轻，性能也很好，但是你需要把它作为一个服务器来运行。[Nodejitsu.com](http://nodejitsu.com/)是一个托管解决方案，它具有可用的 websocket 协议并且处于测试阶段，所以它现在仍然是免费的。请注意，您需要使用 socket.io 监听端口 80，这是他们网络的限制。

如果您希望所有页面都可以在端口 80 上访问，那么您将需要像[varnish](https://www.varnish-cache.org/about)这样的反向代理。

我希望这会有所帮助！祝你今天过得愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:46:02.090

> 除了不使用 PHP 作为服务器的明显原因（没有线程，...）之外，还有其他原因吗？

是的，许多套接字函数彼此不兼容，调试起来很麻烦。

我自己尝试了类似的东西，然后沮丧地放弃了我认为有意义的每个功能都没有达到我的预期

# windows - 使文件归SYSTEM所有

> ID：12006764
> 
> 赞同：0
> 
> 时间：2012-08-17T13:28:18.790
> 
> 标签：windows

出于安全原因，我有一个文件需要归 NT AUTHORITY\SYSTEM 所有。我一生都无法在批处理文件中弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:38:28.507

像这样：

```
icacls foo /setowner "NT AUTHORITY\SYSTEM" 
```

请注意，您需要在提升的命令窗口中运行才能使其正常工作。

# java - JSON 到 Java 对象

> ID：12006765
> 
> 赞同：1
> 
> 时间：2012-08-17T13:28:19.920
> 
> 标签：java, json, object, gson

我有点坚持以下问题。

从 MongoDB 我得到这个 JSON 字符串，我想得到“照片”的所有值并将它们放在一个 ArrayList 中。我找到了一些例子，但它们对我不起作用。我正在使用 GSON，但 JSON 解决方案也可以。

从 MongoDB 返回：

```
 [ { "url" : "/photos/avatar-1.jpg" , "photo" : "avatar-1.jpg" , "description" : "test     1"} , { "url" : "/photos/avatar-2.jpg" , "photo" : "avatar-2.jpg" , "description" : "test 2"} , { "url" : "/photos/avatar-3.jpg" , "photo" : "avatar-3.jpg" , "description" : "test 3"} , { "url" : "/photos/avatar-4.jpg" , "photo" : "avatar-4.jpg" , "description" : "test 4"}] 
```

放入 ArrayList 不是问题，而是获取“照片”值。如果有人可以给我一个关于如何循环遍历 4 个数组和“照片”值的 System.out.println 的示例，那就太好了！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:37:03.653

使用出色的[json-simple](http://code.google.com/p/json-simple)库，您应该能够执行以下操作：

```
String json = "[{\"photo\": \"1.png\"}, {\"photo\": \"2.png\"}, " +
                "{\"photo\": \"3.png\"}, {\"photo\": \"4.png\"}]";
JSONArray photos = (JSONArray)JSONValue.parse(json);
for (int index = 0; index < photos.size(); index++) {
    JSONObject photoObj = (JSONObject)photos.get(index);
    System.out.println(photoObj.get("photo"));
} 
```

显然，将文字 JSON 文本替换为您从数据库中获取的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:37:24.853

```
jsonString =[...];
Gson gson = new Gson();
PhotoDTO[] photos = gson.fromJson(jsonString, PhotoDTO[].class);

for(PhotoDTO photo : photos){
   System.out.println("photo -> " + photo.getPhoto());
} 
```

*PhotoDTO 类定义*

```
class PhotoDTO
{
  String url;
  String photo;
  String description;
  // setters & getters methods
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:55:50.497

另一个不创建 DTO 的选项，使用 Gson 类`StringMap`：

```
String json = "[ { \"url\" : \"/photos/avatar-1.jpg\" , \"photo\" : \"avatar-1.jpg\" , \"description\" : \"test     1\"} , { \"url\" : \"/photos/avatar-2.jpg\" , \"photo\" : \"avatar-2.jpg\" , \"description\" : \"test 2\"} , { \"url\" : \"/photos/avatar-3.jpg\" , \"photo\" : \"avatar-3.jpg\" , \"description\" : \"test 3\"} , { \"url\" : \"/photos/avatar-4.jpg\" , \"photo\" : \"avatar-4.jpg\" , \"description\" : \"test 4\"}]";   

Gson gson = new Gson();     
Type type = new TypeToken<List<StringMap<String>>>(){}.getType();
List<StringMap<String>> stringMaps = gson.fromJson(json, type);
for (StringMap<String> map:stringMaps) {
    System.out.println(map.get("photo"));
} 
```

**编辑**

进口：

```
import com.google.gson.Gson;
import com.google.gson.internal.StringMap;
import com.google.gson.reflect.TypeToken; 
```

# facebook-graph-api - 是否可以使用 Facebook API 获得洞察力指标

> ID：12006769
> 
> 赞同：0
> 
> 时间：2012-08-17T13:28:28.667
> 
> 标签：facebook-graph-api

我有兴趣使用 Facebook API 获取此页面 (https://developers.facebook.com/docs/opengraph/insights/) 上的所有可用数据。是否可以获取原始数据以与我自己的绘图工具一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:58:10.107

是的。您可以使用[Graph API](https://developers.facebook.com/docs/reference/api/insights/)或[FQL](https://developers.facebook.com/docs/reference/fql/insights/)查询见解表。

洞察文档不是很清楚，尤其是在 FQL 中，您需要一次手动地询问数据点。即使您使用 API，FQL 文档也值得一读，因为它定义了所有可用的不同指标。

访问[Graph API Explorer](https://developers.facebook.com/tools/explorer)，获取具有扩展权限的访问令牌并`read_insights`在`/PAGE_ID_OR_USERNAME/insights`搜索框中键入。你会看到一些可用的东西。

您可以通过将参数添加到 url 的末尾来向下钻取。例如，为`/PAGE_ID_OR_USERNAME/insights/page_fan_adds_unique/day?since=-1 month`您提供一个 json 对象，其中包含大约过去一个月每天添加的唯一页面粉丝。

您只能获取您拥有管理员权限的页面的洞察数据。

# php - 排序多维数组

> ID：12006771
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:28:30.047
> 
> 标签：php, arrays, sorting, dimension

> **可能重复：**
> [对多维数组进行排序](https://stackoverflow.com/questions/648405/sort-a-multi-dimensional-array)

如何对以下数组进行排序？array_multisort 似乎没有做这项工作。

```
Array
(
    [2009] => Array
        (
            [name] => 2009
            [20100923WO2010107543A2] => 20100923WO2010107543A2
        )

    [2006] => Array
        (
            [name] => 2006
            [20080403US20080078500A1] => 20080403US20080078500A1
        )

    [1984] => Array
        (
            [name] => 1984
        )

) 
```

排序形式

```
Array
(
    [1984] => Array
        (
            [name] => 1984
        )

    [2006] => Array
        (
            [name] => 2006
            [20080403US20080078500A1] => 20080403US20080078500A1
        )

    [2009] => Array
        (
            [name] => 2009
            [20100923WO2010107543A2] => 20100923WO2010107543A2
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:30:39.810

您似乎正在尝试根据键对数组进行排序。使用`ksort()`.

# windows - 如何使用 .pfx 和 .cer 文件创建自签名证书？

> ID：12006777
> 
> 赞同：11
> 
> 时间：2012-08-17T13:28:54.027
> 
> 标签：windows, iis, certificate, self-signed

在 IIS 7.5 Windows Server 2008 中，如何使用 .pfx（包含私钥）和 .cer（包含公钥）文件创建自签名证书？

我使用了这个指南：[http ://technet.microsoft.com/en-us/library/cc753127(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc753127(v=ws.10).aspx)

我在 IIS 中创建了证书。当我导出它时，它只导出 .pfx 文件，而不是 .cer 文件。

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T16:42:46.237

Once the self-signed certificate is created in IIS:

1.  Select your certificate in IIS under Server Certificates.
2.  Click on View.
3.  Select the Detail tab.
4.  Click the "Copy to File" button.
5.  Follow instructions in Certificate Export Wizard to create an X.509 (.CER) certificate.

# android - 通用软件混色器的 Proguard 问题

> ID：12006779
> 
> 赞同：0
> 
> 时间：2012-08-17T13:28:59.470
> 
> 标签：android, proguard, commonsware-cwac

我正在尝试`ColorMixer`在`PreferenceActivity`. 这在部署到模拟器时以及在没有 proguard 的情况下导出时效果很好。但是当我在配置 proguard 的情况下导出它时，应用程序崩溃了。

我使用了最新的 Android SDK 附带的 proguard 配置。我添加了两行以至少可以看到代码“中断”的位置，并添加了两行以确保 proguard 使 CommonsWare 的内容保持不变。

```
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable
-keep class com.commonsware.** { *; }
-keep interface com.commonsware.** { *; } 
```

**错误：**

```
08-17 12:58:13.199: E/AndroidRuntime(922): FATAL EXCEPTION: main
08-17 12:58:13.199: E/AndroidRuntime(922): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test/com.test.MainActivity}: android.view.InflateException: Binary XML file line #5: Error inflating class java.lang.reflect.Constructor
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.os.Looper.loop(Looper.java:137)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.reflect.Method.invokeNative(Native Method)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.reflect.Method.invoke(Method.java:511)
08-17 12:58:13.199: E/AndroidRuntime(922):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-17 12:58:13.199: E/AndroidRuntime(922):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-17 12:58:13.199: E/AndroidRuntime(922):  at dalvik.system.NativeStart.main(Native Method)
08-17 12:58:13.199: E/AndroidRuntime(922): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class java.lang.reflect.Constructor
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.createItem(GenericInflater.java:397)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.createItemFromTag(GenericInflater.java:430)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.rInflate(GenericInflater.java:481)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.rInflate(GenericInflater.java:493)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.inflate(GenericInflater.java:326)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.inflate(GenericInflater.java:263)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:269)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:1411)
08-17 12:58:13.199: E/AndroidRuntime(922):  at com.test.MainActivity.onCreate(SourceFile:14)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.Activity.performCreate(Activity.java:5008)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-17 12:58:13.199: E/AndroidRuntime(922):  ... 11 more
08-17 12:58:13.199: E/AndroidRuntime(922): Caused by: java.lang.reflect.InvocationTargetException
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-17 12:58:13.199: E/AndroidRuntime(922):  at android.preference.GenericInflater.createItem(GenericInflater.java:383)
08-17 12:58:13.199: E/AndroidRuntime(922):  ... 22 more
08-17 12:58:13.199: E/AndroidRuntime(922): Caused by: java.lang.RuntimeException: Exception finding R class
08-17 12:58:13.199: E/AndroidRuntime(922):  at com.commonsware.cwac.parcel.ParcelHelper.<init>(SourceFile:37)
08-17 12:58:13.199: E/AndroidRuntime(922):  at com.commonsware.cwac.colormixer.ColorPreference.<init>(SourceFile:39)
08-17 12:58:13.199: E/AndroidRuntime(922):  ... 25 more
08-17 12:58:13.199: E/AndroidRuntime(922): Caused by: java.lang.ClassNotFoundException: com.test.R
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.Class.classForName(Native Method)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.Class.forName(Class.java:217)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.Class.forName(Class.java:172)
08-17 12:58:13.199: E/AndroidRuntime(922):  at com.commonsware.cwac.parcel.ParcelHelper.<init>(SourceFile:34)
08-17 12:58:13.199: E/AndroidRuntime(922):  ... 26 more
08-17 12:58:13.199: E/AndroidRuntime(922): Caused by: java.lang.NoClassDefFoundError: com/test/R
08-17 12:58:13.199: E/AndroidRuntime(922):  ... 30 more
08-17 12:58:13.199: E/AndroidRuntime(922): Caused by: java.lang.ClassNotFoundException: com.test.R
08-17 12:58:13.199: E/AndroidRuntime(922):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-17 12:58:13.199: E/AndroidRuntime(922):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-17 12:58:13.199: E/AndroidRuntime(922):  ... 30 more 
```

**首选项.xml：**

```
<PreferenceCategory android:title="TitleCat" >
    <com.commonsware.cwac.colormixer.ColorPreference
        android:key="key"
        android:summary="Summary2"
        android:title="Title2" />
</PreferenceCategory> 
```

**ColorPreferenec.java 的第 39 行**

```
ParcelHelper parcel=new ParcelHelper("cwac-colormixer", ctxt); 
```

我将 CWAC-Parcel.jar 添加到 ColorMixer 项目，并将其添加到 Build Path。我根据需要在我的测试项目（包`com.test`）的构建路径上添加了 ColorMixer 项目

有谁知道我应该更改什么设置才能让它与 proguard 一起使用，因为我认为它与 ColorMixer 或 Parcel 无关。（因为它表明 ColorPreference 正在从 R 包中“请求”数据）

# java - (Axis + Jetty) 前缀自动生成的前缀命名空间

> ID：12006782
> 
> 赞同：0
> 
> 时间：2012-08-17T13:29:11.433
> 
> 标签：java, namespaces, jetty, axis2

我需要一个旧软件（不是我开发的）来测试旧设备。设备通过网络服务与服务器“对话”。这些 web 服务是由轴自动生成的（轴接受一个类并从它的方法中创建 web 服务）。

问题是：设备被开发为读取这样的 xml：

```
<ns:getReferenceCurveResponse xmlns:ns="http://services.teste.org" xmlns:ax22="http://data.teste.org/xsd" xmlns:ax23="http://util.java/xsd">  
<ns:return type="org.teste.ReferenceCurve">  
<ax21:createdOn>2012-08-16 17:00:59.0</ax21:createdOn>  
<ax21:endPoint>9.2</ax21:endPoint>  
<ax21:fiberId>21</ax21:fiberId>  
<ax21:id>42</ax21:id> 
```

现在网络服务是这样的：

```
<ns:getReferenceCurveResponse xmlns:ns="http://services.teste.org" xmlns:ax22="http://data.teste.org/xsd" xmlns:ax23="http://util.java/xsd">  
<ns:return type="org.teste.ReferenceCurve">  
<ax22:createdOn>2012-08-16 17:00:59.0</ax22:createdOn>  
<ax22:endPoint>9.2</ax22:endPoint>  
<ax22:fiberId>21</ax22:fiberId>  
<ax22:id>42</ax22:id> 
```

正如您所注意到的，命名空间中的前缀已从 ax21 更改为 ax22，这会产生错误，因为设备被编码为前缀 ax21。

我已经挖了一个解决方案，但找不到。我已经重新编译了服务器端，也没有成功。我找不到任何地方可以更改此命名空间前缀，因为它是由 Axis2 自动生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:21:29.500

好吧，它已经徘徊了一天，所以我会用绝对错误的方式来处理这个问题，因为码头是这里的标签之一

您可以使用 servlet 过滤器并即时调整响应以修复该名称空间问题....但这将是糟糕的糟糕:)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:50:18.490

我找不到任何东西来解决这个问题。

由于它用于本地测试（服务器端已启动并在客户端中运行）并且由于此更改只会影响服务器端，因此我设法将命名空间前缀“ax22”更改为“ns”

您可以通过将此标记添加到 services.xml 来做到这一点：

```
<schema schemaNamespace="http://your.package.inverted/xsd"/> 
```

就像，如果你有 com.google.something 包，它应该是这样的：

```
<schema schemaNamespace="http://something.google.com/xsd"/> 
```

# android - Android: SkImageDecoder:: 工厂返回 null

> ID：12006785
> 
> 赞同：31
> 
> 时间：2012-08-17T13:29:25.957
> 
> 标签：android

我正在使用我的本地主机来获取图像并在 ImageView 中查看。出于某种原因，我收到了 Factory 返回的 null 错误。我已经多次查看代码，但我看不出有什么问题。任何帮助，将不胜感激！

GalleryZoom.java

```
public class Zoom extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.gallery_zoom);

        String selection = getIntent().getExtras().getString("image");
        Toast.makeText(this, selection, Toast.LENGTH_LONG).show();

        new backgroundLoader().execute();       
    }

    private class backgroundLoader extends AsyncTask<Void, Void, Void> {
        Bitmap bmp;

        @Override
        protected Void doInBackground(Void... params) {

            bmp = DecodeBitmapSampleSize(getIntent().getExtras().getString("image"), 48, 64);
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);

            ImageView image = (ImageView) findViewById(R.id.imageZoom);
            image.setImageBitmap(bmp);
        }

    }

    public Bitmap DecodeBitmapSampleSize (String strURL, int reqWidth, int reqHeight) {
        InputStream in = null;
        Bitmap bmp = null;

        in = OpenHttpConnection(strURL);
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(in, null, options);

        options.inSampleSize = calculateSampleSize(options, reqWidth, reqHeight);

        options.inJustDecodeBounds = false;
        bmp = BitmapFactory.decodeStream(in, null, options);
                return bmp;
    }

    private InputStream OpenHttpConnection(String strURL) {

        try {
            URL url = new URL(strURL);

            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            InputStream in = new BufferedInputStream(connection.getInputStream());
            return in;
        } catch (Exception exception) {
            exception.printStackTrace();
            return null;
        }
    }

    public static int calculateSampleSize(BitmapFactory.Options options,
            int reqWidth, int reqHeight) {

        final int width = options.outWidth;
        final int height = options.outHeight;
        int inSampleSize = 1;

        if (width > reqWidth || height > reqHeight) {
            if (width > height) {
                inSampleSize = Math.round((float) height / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }
        }
        return inSampleSize;
    }

} 
```

LogCat 日志

```
08-13 21:55:19.578: I/MemoryCache(3197): MemoryCache maximum limit is 6MB
08-13 21:55:19.658: I/MemoryCache(3197): cache size = 24600, length = 1
08-13 21:55:19.688: I/MemoryCache(3197): cache size = 24600, length = 1
08-13 21:55:19.708: I/MemoryCache(3197): cache size = 24600, length = 1
08-13 21:55:19.708: I/MemoryCache(3197): cache size = 24600, length = 1
08-13 21:55:20.628: I/MemoryCache(3197): cache size = 71600, length = 2
08-13 21:55:20.678: I/MemoryCache(3197): cache size = 101408, length = 3
08-13 21:55:26.228: I/MemoryCache(3197): MemoryCache maximum limit is 6MB
08-13 21:55:26.228: I/MemoryCache(3197): MemoryCache maximum limit is 6MB
08-13 21:55:26.998: D/skia(3197): --- SkImageDecoder::Factory returned null 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-25T05:46:11.347

我遇到了同样的问题。而且我确保下载图像的 url 是正确的。通过调试代码，我发现第一次解码后inputstream中的位置变量设置为1024。所以我在第二次解码之前添加了**inputstream.reset() 。**这样可行。希望可以帮助别人。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-21T15:19:17.790

环顾四周后，我得到了最好的解决方案。

正如#jia George 指出的那样，您应该在第一次解码后重置输入流，问题是不支持某些时间重置，但您可以将输入流包装在 BufferedInputStream 中，这很好。

```
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true; 
BufferedInputStream buffer=new BufferedInputStream(is);
BitmapFactory.decodeStream(buffer,null,options);
buffer.reset();

    // Calculate inSampleSize
options.inSampleSize = calculateInSampleSize(options, reqWidth,reqHeight);

    // Decode bitmap with inSampleSize set
options.inJustDecodeBounds = false; 
BitmapFactory.decodeStream(buffer,null,options); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-20T23:44:47.420

这可能是一种罕见的情况，但对于那些使用[Picasso](http://square.github.io/picasso/)的人来说，如果您尝试从 URL 加载图像但 URL 未引用图像，则会看到此错误。

例如：
[http](http://www.google.ca)
://www.google.ca 而不是：
[https ://www.google.ca/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png](https://www.google.ca/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-24T18:42:53.107

从图库应用程序返回的 Intent 读取流时，我遇到了类似的问题。inputstream.reset() 抛出一个 IOException，正如 Shellum 上面提到的，所以我通过关闭流并再次重新打开它来解决它。很简单，而且成功了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-25T08:46:17.823

与 Picasso 一样，确保您的 url 正确，只需将开发程序中的链接复制并粘贴到您的网络浏览器中

我输入：

[http://lorepixel.com/600/400/city](http://lorepixel.com/600/400/city)

代替

[http://lorempixel.com/600/400/city](http://lorempixel.com/600/400/city)

# jquery - jQuery DatePicker 在所选日期的末尾自动添加一个“：”

> ID：12006786
> 
> 赞同：0
> 
> 时间：2012-08-17T13:29:29.057
> 
> 标签：jquery, asp.net, web-applications

## 更新：我不想手动指定日期格式，因为不同的文化可能有不同的日期格式。结果，如果我指定了澳大利亚标准的dateFormat，并且用户在中国，也可能会引起问题。所以我想要的是如何用jQuery自动提取与当地文化相关的dateFormat。

我在 jQuery DatePicker 上发现了一个有趣的问题。

当我在我的机器上运行我的 Web 应用程序时，一切都很顺利，完全没有问题。但是当我在 Web 服务器上配置它之后，jQuery DatePicker 中选定日期的值将在末尾自动添加一个“:”（一个空格和一个冒号）。

例如，实际选择的日期是 08/23/2012，tbDate.Vale 将是 08/23/2012 ：

我可以很容易地修复购买 trim() 和 substring() 方法，但如果我这样做，我必须更改我应用 DatePicker 的所有代码，然后重新编译代码，然后将 dll 上传到服务器。

所以我想问两个问题： 1\. 为什么会这样？2.如何以通用和全局的方式修复它？（比如在 Web.config 文件中添加一些配置）

我在等你的答案。

提前致谢。

这是jQuery参考

```
 <script src="Resource/JS/jquery-1.7.2.min.js" type="text/javascript"></script>
<link href="Resource/css/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
<script src="Resource/JS/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script> 
```

弹出 DatePicker 的函数：

```
 function showDatePicker(datepicker) {
            var id = "#" + datepicker;
            $(function () {
                $(id).datepicker();
            });
        }

    </script> 
```

输入组件：

```
<input id="tbActionDate" type="text" runat="server"  class="datePickerControl" clientidmode="Static"  onclick="showDatePicker('tbActionDate');" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:37:45.990

您可以指定日期的格式 - 检查您是否要求它添加“：”。

```
$( ".selector" ).datepicker( "option", "dateFormat", "yy-mm-dd" ); 
```

在[jQuery UI DatePicker 文档](http://jqueryui.com/demos/datepicker/)中有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:38:32.203

您可以像这样控制日期字符串的格式：

```
var DatePicker = $('#DatePicker_TextBox').datepicker();

DatePicker.datepicker('option',
{
   dateFormat: 'DD, d MM, yy',
   numberOfMonths: [1, 2],
   showWeek: 'true' 
}); 
```

# node.js - 将变量从 mongoose 中间件传递给模型删除函数的回调

> ID：12006787
> 
> 赞同：0
> 
> 时间：2012-08-17T13:29:36.817
> 
> 标签：node.js, mongoose

在从数据库中删除记录之前，我正在使用中间件进行一些预处理。但是，如果我可以将有关此预处理结果的一些信息从中间件传递给模型删除回调，那将非常有用。这有可能吗？

```
Movie.pre('remove', function(next) {
  var result = true;
  next();
});

movie.remove(function(err, result) {
  if (result === true) {
     // do something
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:31:43.487

您不能注入`result`回调`remove`参数，但这会起作用：

```
Movie.pre('remove', function(next) {
  this.result = true;  // Add a result property to the movie object being removed
  next();
});

movie.remove(function(err) {
  if (movie.result === true) {  // result property is available from the middleware
     // do something
  }
}); 
```

# mysql - 仅选择具有同类最后时间戳的记录

> ID：12006789
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:29:49.637
> 
> 标签：mysql

我有一个存储用户位置的表。我想选择每个用户的最新位置。

我试过的

```
SELECT lat, lng, address, idUser, timestamp FROM locations ORDER BY timestamp DESC LIMIT 1

SELECT lat, lng, address, idUser, MAX(timestamp) FROM locations 
```

当然，这两个给了我所有用户中的最后一个位置。表的结构很简单：

```
CREATE TABLE `locations` (
  `idLocation` int(11) NOT NULL auto_increment,
  `idUser` int(11) NOT NULL,
  `address` varchar(255) NOT NULL,
  `lat` float(10,6) NOT NULL,
  `lng` float(10,6) NOT NULL,
  `timestamp` timestamp NOT NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`idLocation`),
  KEY `idUser` (`idUser`)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:35:30.597

```
SELECT
  idUser,
  lat,
  lng,
  MAX(timestamp) AS "MostRecentTime"
FROM table_name
GROUP BY idUser, lat, lng 
```

供参考：[返回最大值](http://wiki.lessthandot.com/index.php/Returning_The_Maximum_Value_For_A_Row)

根据您的平板电脑，我不确定您为什么要添加一个数字作为 LocationId。跟踪用户位置更改的次数？我假设它是为了这个目的——如果是为了找到最新的位置，那么跟踪最近的时间戳会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:39:59.723

我在此页面中找到了解决方案，使用自加入。获取每个用户的最新时间戳，然后通过自加入获取行的其余部分。

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

```
SELECT
l.idUser,
l.lat,
l.lng,
l.timestamp
FROM (
select idUser, max(timestamp) as maxtimestamp
from locations group by idUsuario)
as max inner join locations as l on l.idUsuario = max.idUsuario and l.timestamp = max.maxtimestamp
GROUP BY idUsuario 
```

# android - 在创建运行时 editText 对象时出现异常

> ID：12006790
> 
> 赞同：2
> 
> 时间：2012-08-17T13:29:52.493
> 
> 标签：android, android-edittext

我尝试以`EditText`这种方式在运行时创建一个对象：

```
EditText et=new EditText(MyActivity.this); 
```

我在其他平板电脑的三星银河标签中遇到了以下异常，它运行良好。

```
android.os.Handler.<init>(Handler.java:121)
android.sec.clipboard.ClipboardExManager$1.<init>(ClipboardExManager.java:90)
android.sec.clipboard.ClipboardExManager.<init>(ClipboardExManager.java:89)
android.app.ContextImpl$8.createService(ContextImpl.java:292)
android.app.ContextImpl$ServiceFetcher.getService(ContextImpl.java:199)
android.app.ContextImpl.getSystemService(ContextImpl.java:1158)
android.view.ContextThemeWrapper.getSystemService(ContextThemeWrapper.java:79)
android.app.Activity.getSystemService(Activity.java:3932)
android.widget.EditText.<init>(EditText.java:68)
android.widget.EditText.<init>(EditText.java:62)
android.widget.EditText.<init>(EditText.java:58) 
```

`com.example.myProject.MyActivity.insertTextBox(MyActivity.java:8249) com.example.myProject.MyActivity$19.run(com.example.myProject.MyActivity.java:8057)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:13:34.657

我已经解决了这个问题，只需从 xml 布局中添加一个视觉上消失的视图，然后在 linearlayout 中添加所有视图运行时，它的工作正常。我不知道是什么问题，但它已经解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:42:08.347

您确实应该发布更多代码以使问题变得明显。

根据您提供的少量信息，我的猜测是您尝试`EditText`在初始化上下文之前创建它。

`onCreate()`如果该代码尚不存在，请尝试在方法中移动该代码。

# objective-c - nsnumberformatter numberfromstring 返回 nil

> ID：12006791
> 
> 赞同：2
> 
> 时间：2012-08-17T13:29:57.240
> 
> 标签：objective-c, nsnumber, nsnumberformatter

我有一个包含纯数字的字符串，但 numberFromString 返回 nil。知道为什么吗？

我的代码：

```
NSString *fText = @"33";
NSNumberFormatter *formatter;
NSNumber *fNum = [formatter numberFromString:fText];
NSLog(@"Number is %i", [fNum integerValue]; 
```

打印 0，并调试为 NIL。

我在格式化程序属性中遗漏了什么吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T13:32:43.477

您的 NSNumberFormatter 未初始化，因此为 nil，并为 NSNumber 返回 nil。尝试：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc]init];
NSNumber* fNum = [formatter numberFromString:fText]; 
```

它应该工作。

# maven - 是否存在包含所有 JBOSS 运行时 jar 的 maven JBOSS 依赖项？

> ID：12006793
> 
> 赞同：4
> 
> 时间：2012-08-17T13:30:09.477
> 
> 标签：maven, jboss

我有一个将作为战争部署到 JBOSS 5.1 的 Maven 应用程序。我想知道如何获取它，以便 Maven 可以在编译时使用 JBOSS 5.1 jar（即 common/lib 文件夹中的所有 jar 以及运行时 JBOSS 可用的任何其他资源），但不将它们捆绑到 war 文件中。

我以为我可以只包含某种具有提供范围的 JBOSS 依赖项来执行此操作，但是我找不到这样的依赖项。我已经做了很多搜索，但无法真正找到这样的依赖关系。有很多引用指向中央 JBOSS 存储库并从那里提取依赖项。我认为只有一个全局依赖项包含所有 JBOSS 运行时 jar。奥斯有这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-31T14:35:16.053

如果你需要的不仅仅是标准的 Java EE API，比如 JBoss 包或者解决一些兼容性问题，你可以使用这个依赖：

**对于 JBoss / Java EE 7 规范 API**

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-7.0</artifactId>
    <version>1.0.1.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

**对于 JBoss/Java EE 6 规范 API**

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>3.0.2.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

**对于 JBoss WildFly 8.2.0.Final 完整的运行时依赖项**

```
<dependency>
    <groupId>org.wildfly</groupId>
    <artifactId>wildfly-parent</artifactId>
    <version>8.2.0.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

现在，您还可以使用这些 POM 文件来提取您需要的特定依赖项。

这在远程调试时很有用，可以让您的 IDE 自动解析服务器依赖项 jar 和当前加载的源，或出现在堆栈跟踪中……在开发模式下。

在生产 MAVEN 构建中，您可能只需要这种配置（取决于您的 JBoss 版本）： http: [//www.mastertheboss.com/jboss-server/wildfly-8/maven-configuration-for-java-ee- 7-projects-on-wildfly](http://www.mastertheboss.com/jboss-server/wildfly-8/maven-configuration-for-java-ee-7-projects-on-wildfly)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:12:37.687

考虑到 JBoss 是一个 EE 容器，添加 JavaEE 依赖就足够了。

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

提供的范围确保应用程序部署到服务器后使用 JBoss 自己的库。

# php - 确定使用 jquery 提交表单时返回的内容

> ID：12006794
> 
> 赞同：0
> 
> 时间：2012-08-17T13:30:10.217
> 
> 标签：php, jquery

使用 jquery 时是否可以识别页面返回的内容？我在这里使用 jquery 提交一个表单，如下所示：

```
$("#sform").submit(function() {
    $.ajax({
        type: "POST",
        data: $(this).serialize(),
        cache: false,
        url: "user_verify.php",
        success: function(data) {
            $("#form_msg").html(data);
        }
    });
    return false;
}); 
```

​​​

user_verify.php 页面执行其通常的验证工作，并返回错误消息或成功将用户添加到数据库。如果它的错误是一堆错误消息或成功通常是“您已成功注册”。如果它的错误消息返回或成功消息，我可以以某种方式识别使用 jquery。这样，如果出现错误，我可以在表单中使用该数据，或者如果成功，我可以关闭表单并显示成功消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:36:49.923

是的，就是这样：

```
success: function(data) {
    $("#form_msg").html(data);
} 
```

您可以`data`以任何您想要的方式进行操作。您可以从服务器端返回 JSON（使用`dataType`）编码字符串并在`success`函数中处理数据

```
success: function(data) {
    if(data->success == 'ok'){
       // hide the form, show another hidden div.
    }
} 
```

所以`user_verify.php`应该打印例如：

```
// .... queries 
$dataReturn = array();
$dataReturn['success'] = 'ok';
$dataReturn['additional'] = 'test';
echo json_encode($dataReturn);
die; // to prevent any other prints. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:37:42.683

如果错误，你可以让你的 php 返回 0 所以你在里面做这样的事情

```
 success: function(data) {
       if(data==0){
       //do error procedure
       }else{
        //do success procedure
       }
    } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:50:16.797

你可以这样做：

```
$.ajax({
type:"POST", //php method
url:'process.php',//where to send data...
cache:'false',//IE FIX
data: data, //what will data contain 
//check is data sent successfuly to process.php
//success:function(response){
//alert(response)
//} 
success: function(){ //on success do something...
$('.success').delay(2000).fadeIn(1000);  
//alert('THX for your mail!');
} //end sucess 
}).error(function(){ //if sucess FAILS!! put .error After $.ajax. EXAMPLE :$.ajax({}).error(function(){}; 
alert('An error occured!!');
$('.thx').hide();
});
 //return false prevent Redirection
  return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:07:26.313

您可以在“成功”回调函数中检查“数据”参数。我注意到您的代码中存在问题。看看这一行：

```
data: $(this).serialize(), 
```

在 $.ajax jquery 方法中，“this”绑定到全局窗口对象而不是 $('#sform')

# .net - LINQ to JSON 选择某些元素

> ID：12006795
> 
> 赞同：1
> 
> 时间：2012-08-17T13:30:11.217
> 
> 标签：.net, json, linq

我有以下 JSON：

```
{"response":[2939,
{"mid":6581,"date":1345018696,"out":0,"uid":84175314,"read_state":1,"title":" ... ","body":"Text1"},
{"mid":6578,"date":1344984256,"out":0,"uid":32438192,"read_state":1,"title":" ... ","body":"Text2"}
]} 
```

使用 Newtonsoft JSON 库，我只需要选择这部分（然后将数据添加到我的对象中）

`{"mid":6581,"date":1345018696,"out":0,"uid":84175314,"read_state":1,"title":" ... ","body":"Text1"}, {"mid":6578,"date":1344984256,"out":0,"uid":32438192,"read_state":1,"title":" ... ","body":"Text2"}`

（源 JSON 中有超过 2 个元素）

到目前为止，我已经写了以下内容：

```
JObject jRes = JObject.Parse(json);
JArray jAr = (JArray)jRes["response"];

var query =
                    from msg in jAr
                    select new 
                    {
                        mid = (int)jAr["mid"],
                        date = (int)jAr["date"],
                        outt = (short)jAr["out"],
                        uid = (int)jAr["uid"],
                        read_state = (short)jAr["read_state"],
                        title = (string)jAr["title"],
                        body = (string)jAr["body"],
                    }; 
```

我想限制查询以跳过数组中的第一个对象，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:07:37.167

```
var query = from msg in jAr
            where  !(msg is JValue)
            select new
            {
                mid = (int)msg["mid"],
                date = (int)msg["date"],
                outt = (short)msg["out"],
                uid = (int)msg["uid"],
                read_state = (short)msg["read_state"],
                title = (string)msg["title"],
                body = (string)msg["body"],
            }; 
```

# windows - Perl chdir 不起作用

> ID：12006798
> 
> 赞同：3
> 
> 时间：2012-08-17T13:30:17.463
> 
> 标签：windows, perl, chdir

以前的帖子可能有用：[Perl system() call failed with return code 65280](https://stackoverflow.com/questions/11989196/perl-system-call-failed-with-return-code-65280/11995663#11995663)

同样，我多次使用此代码，但在这里不起作用。我已经从 PATH 中移动了所有其他 perl 实例。

资源：

```
$targetDir = "M\:\\bldforge_AOMS_DEV";
print ("targetDir=$targetDir\n");

chdir($targetDir) or die "Cant chdir to $dir $!";
$current_dir = `cd`;
print "\nCurrent dir = $current_dir\n" 
```

输出：

```
Z:\>ccperl test.pl
targetDir=M:\bldforge_AOMS_DEV

Current dir = 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:40:24.817

为了确保您确实在 ClearCase 视图中，我会使用[`cleartool pwd`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_pwd.htm)：

```
$current_dir = `cleartool pwd`; 
```

这甚至可以在 Windows 上工作：

> 该`cleartool pwd`命令列出当前工作目录。
> 此命令旨在用于交互式 cleartool 和 multitool 会话，以及用于模拟交互式会话的批处理文件或 shell 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:54:01.337

要获取当前工作目录，您应该使用[`Cwd`](http://perldoc.perl.org/Cwd.html)'s`getdcwd`函数：

```
use Cwd;

my $current_dir = getdcwd 'M:'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:41:46.740

您正在`pwd`与`cd`. `cd`仅打印到**STDERR**，即它静默成功。

我的观点是，这`cd`对你的情况没有用。

# javascript - Javascript 画布选择器

> ID：12006801
> 
> 赞同：1
> 
> 时间：2012-08-17T13:30:26.907
> 
> 标签：javascript, canvas

我不确定这在 Javascript 中是否可行，我相当肯定它会。

我有一个在线销售帆布印刷品的客户。他们需要一种解决方案，使客户能够首先选择图像，然后选择颜色，然后选择尺寸，并且所有这些都显示在同一页面上的“模拟”画布上。

[![例子](../Images/a47f2b7a4641c246b25736c38fd33ce1.png)](https://i.stack.imgur.com/oURkW.png)

然后，这将进行到贝宝购物车结账。

有没有人知道这样做的方法，或者可以指出我可以浏览的网站的方向？

谢谢！乔娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:09:35.130

这几乎正​​是 Fabric.js，作为 JavaScript 画布库，最初是为（好吧，用于衬衫）制作的：http: [//fabricjs.com](http://fabricjs.com)

还有许多其他类似的库，但底线是它很有可能。看看 Fabric.js、Kinetic.js、easel.js，开始学习吧！

# c - C 内存分配初始化和处理

> ID：12006802
> 
> 赞同：0
> 
> 时间：2012-08-17T13:30:28.133
> 
> 标签：c, memory-management, pointer-arithmetic

我在这里的任务遇到了麻烦。我需要创建一个全局空闲内存块并对其进行 malloc。由于类型转换和处理错误，在初始化它时遇到了一些麻烦。

就像 C 中第一个数组实际上是指向第一个元素的指针的数组一样，我的内存块需要与我可以使用指针算法来定位内存块的地方相似。

```
//global variable
static byte *memory = NULL;

void allocator_init(u_int32_t size){

     *memory = (byte*) malloc(size);
} 
```

指向这些内存地址的地址/指针将​​通过结构/链接存储为内存块的标头。

```
typedef struct _header {
    int signiture;
    int size;
    header* next;
    header* prev;
} header; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:32:06.887

删除`*`：

```
*memory = (byte*) malloc(size);
^ 
```

您可能还想放弃演员阵容，但这是您的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:33:27.370

您需要将 malloc 的返回值分配给指针本身，而不是指针指向的字节。（无论如何，如果您取消引用最初的 NULL 指针，您的程序将出现段错误。）

```
memory = malloc(size); 
```

另外，不要caat malloc 的返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:35:16.307

`*memory = (byte*) malloc(size);`- 此语句意味着您正在尝试将堆内存块的地址作为值分配给`*memory`. 这`memory`是有`NULL`，所以它会崩溃。

您必须将地址分配给变量，例如，`memory = (byte*) malloc(size);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T16:27:48.180

在您的标头结构中，由于结构引用自身，因此将内部标头指针声明为“struct _header * name;”。我认为其他人已经达到了所有其他要点:)

# python - 如何使用多个 IO 流处理选择错误？

> ID：12006803
> 
> 赞同：2
> 
> 时间：2012-08-17T13:30:36.757
> 
> 标签：python, io

我有以下选择：

```
try:
    rlst, wlst, plst = select.select(
        [x.fileno() for x in self.rlist],
        [x.fileno() for x in self.wlist], 
        [x.fileno() for x in self.plist])
except select.error, err:
    [...] 
```

其中`self.rlist`、`self.wlist`和`self.plist`是 IO 流列表（套接字、PIPE、文件等）。现在，我假设当其中一个流因任何原因失败时，此选择可能会失败。

如何找出哪些流导致了错误？我真正想做的是从列表中删除该 IO 流并继续选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:00:25.643

引用[Socket Programming HOWTO](http://docs.python.org/howto/sockets.html)：

> select 的一个非常讨厌的问题：如果在这些套接字的输入列表中的某个地方是一个已经严重死亡的套接字，则 select 将失败。然后，您需要遍历所有这些列表中的每个该死的套接字并执行 a`select([sock],[],[],0)`直到找到坏的套接字。超时 0 意味着它不会花费很长时间，但它很丑陋。

# actionscript-3 - 控制访问类型或锁定与主场景相关的外部 swf？

> ID：12006816
> 
> 赞同：0
> 
> 时间：2012-08-17T13:31:45.590
> 
> 标签：actionscript-3, flash, external

我问，我有一个调用外部 swf 的 as3 播放器。我在 swf 中使用 mouse_move 事件，而另一个 swf 有按钮。我想要那个锁 swf 交互。主要是，用户不能在 swf 中使用按钮或者不能工作的对象有 mouse_move 事件。

如何锁定交互/更改访问类型外部 swf 与主播放器？

谢谢大家的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:56:27.547

设置在那个孩子 SWF -`mouseChildren = false;`

喜欢：

```
 var loader : Loader = new Loader();

    loader.load( new URLRequest( "child.swf" ) );

    this.addChild( loader );

    loader.mouseChildren = false; 
```

这将禁止任何鼠标与加载的电影交互。

# jquery - 为什么我的 mouseout fadeOut 工作，然后又淡入？

> ID：12006817
> 
> 赞同：0
> 
> 时间：2012-08-17T13:31:54.740
> 
> 标签：jquery, html, css

我有一个 div，其中有一个嵌套元素，当悬停在 div 上时会显示。这行得通。

在鼠标移出时，嵌套元素应该隐藏，它确实如此，但随后立即再次淡入，就好像我刚刚在初始 div 上执行了悬停一样。

我已经制作[了一个 jsfiddle 来复制这里的问题](http://jsfiddle.net/jSStY/1/)。

html是：

```
<div class="add_bag_large_wrap">

<div class="add_bag_large_droid" style="margin: 90px auto;">
        I am a button.
    <div class="add_includes">
        <p>Show on hover, hide on mouseout</p>

    </div>
</div> 
```

​</p>

JS：

```
 $('.add_bag_large_droid').live('hover',function(){

     $(this).children('.add_includes').fadeIn();         

 }).mouseout(function(){

     $('.add_includes').fadeOut();

 });
 ​ 
```

CSS：

```
.add_bag_large_wrap {
position: relative;
width: 390px;
height: 96px;
margin: 36px auto;
}

.add_bag_large_droid {
background: #ccc;
width: 390px;
height: 96px;
cursor: pointer;
background-size: 390px 192px;
position: static;
}

.add_includes {
background: #000; padding: 18px; color: #fff; position: absolute; 
bottom: 110px; left: 50%; margin-left: -148px;
display: none;
text-align: left;
}

.add_includes p {
font-size: 11px; color: #fff; margin: 0;
} 
```

是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:34:38.797

也改变你的 JS 代码：

```
 $('.add_bag_large_droid').hover(function(){
     $(this).find('.add_includes').fadeIn();         
 }, function(){
     $(this).find('.add_includes').fadeOut();
 }); 
```

使用`live()`：

```
$('.add_bag_large_droid').live({
    mouseover: function() {
        $(this).find('.add_includes').fadeIn();  
    },
    mouseout: function() {
        $(this).find('.add_includes').fadeOut();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:44:33.653

尝试这个

```
$('.add_bag_large_droid').hover(function(){

     $(this).children('.add_includes').fadeIn();         

 },function(){

     $('.add_includes').fadeOut();

 });
 ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:37:46.877

如果您的`.add_bag_large_droid`元素在 DOM 最初加载时不存在，您希望使用它`delegate`来委托您的事件，而不是`live`：

```
$('.add_bag_large_wrap').delegate('add_bag_large_droid',{
    'mouseover': function(){
        $(this).children('.add_includes').fadeIn();         
    },
    'mouseout': function(){
        $('.add_includes').fadeOut();
    }
}); 
```

`$('.add_bag_large_wrap')`表示当 DOM 加载时保证存在的最近的祖先。如果是另一个元素，请更改选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:38:46.627

试试这个代码...

```
$('.add_bag_large_droid').mouseover(function(){

     $(this).children('.add_includes').fadeIn();         

 });

 $('.add_bag_large_droid').mouseout(function(){

     $('.add_includes').fadeOut();

 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T13:39:56.300

```
$('.add_bag_large_droid').hover(
    function() {
         $(this).children('.add_includes').fadeIn();
    },
    function() {
         $('.add_includes').fadeOut();
    }
); 
```

这应该可行，您可以使用 hover() 绑定 mouseenter 和 mouseleave 事件，上面与下面相同：

```
$(selector).mouseenter(handlerIn).mouseleave(handlerOut); 
```

您还可以使用：

```
$(selector).mouseover(handlerIn).mouseout(handlerOut); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T13:40:37.503

使用最新版本的 jquery，它应该如下所示：

```
$(".add_bag_large_droid").on({
  mouseenter: function(){
         $(this).children('.add_includes').fadeIn();  
  },
  mouseleave: function(){
         $(this).children('.add_includes').fadeOut();  
  }});
​ 
```

但是您设置 jquery 版本 1.6.4：在这种情况下，脚本将是相同的，但使用`live`而不是`on`.

代码：http: [//jsfiddle.net/jSStY/4/](http://jsfiddle.net/jSStY/4/)

# cocoa - 在飞行中分离窗户

> ID：12006818
> 
> 赞同：0
> 
> 时间：2012-08-17T13:31:57.030
> 
> 标签：cocoa, nswindow, nsviewcontroller

晚上好。

我有两个控制器。称它们为 NSViewController1 和 NSViewController2。控制器放置在一个 NSWindow 上并具有一些网络逻辑。在程序运行时从内存中删除它们不是很好。

我想创建按钮。如果用户单击按钮，则单个窗口应在两个窗口上分开。第一个新窗口应该包含 NSViewController1，第二个窗口应该包含 NSViewController2。如果切换是动画的，那就更好了。

![在此处输入图像描述](../Images/6d646857aa2819cda0b5b69faa8e3e75.png)

实现所描述行为的最佳方法是什么？可能有人看到有这个任务的开源项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:59:41.210

如果你有一个控制器来控制你的窗口控制器和你的视图控制器，那将是最好的。如果单击该按钮，您可以向该控制器发送消息并从窗口中删除第二个视图并将其添加到另一个窗口。当然，还要调整那些框架。我想这没什么大不了的。

# nhibernate - nHibernate 聚合查询

> ID：12006819
> 
> 赞同：0
> 
> 时间：2012-08-17T13:31:58.657
> 
> 标签：nhibernate, projection, queryover

我正在尝试将以下 SQL 查询放入 nHiberate QueryOver 语句中，但我失败了。

```
Select top 15 percent
    People.personId
,People.Name
    ,SUM(Marks.Score)
from 
    People
    inner join [sessions] on [sessions].PersonId = People.PersonId
    inner join Marks on Marks.SessionId = [Sessions].SessionId
group by
    People.Name
    ,People.PersonId
order by
    SUM(Marks.Score) asc 
```

我的对象是：

*   人
*   会议
*   标记

具有明显的 FK 约束（人员 --> 会话 --> 标记）。

有人可以给我一些建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:26:49.280

使用 . 连接很容易`.Join()`。如果您已经在映射中定义了这些关系，那么您甚至不必指定连接的方式。
我通常觉得使用起来更方便`JoinAlias`。聚合是使用完成的（请参阅[此处](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)`Projections`的别名和投影）。

当然，您需要一个简单的总和投影和一个分组投影。

对于结果，您可以使用 an`object []`并强制转换它（如上面的链接中所示），或者您可以定义自定义 DTO，然后使用`AliasToBeanResultTransformer`. （[这](http://ayende.com/blog/2706/nhibernate-for-sql)是一篇相当古老的博客文章；语法现在已更改为允许 lambda 表达式）。

关于前 15% - 我不确定。
`QueryOver().Take()`允许一个常数；不确定是否有对百分比的本机支持。
不过，您可以实现自己的投影。看[这里](https://stackoverflow.com/questions/7257585/nhibernate-querover-with-paging-while-selecting-top-1-of-subquery)。

**编辑：一个简单的投影示例**
我有多懒惰？我刚刚从[github](https://gist.github.com/939649)复制了这个。
它有连接、别名、投影......你需要的一切。我添加了一个 SUM 投影只是为了好玩。
请注意所有其他属性是如何分组的，当然：

```
Customer customer = null;
    Employee employee = null;
    OrderHeader orderHeader = null;

    var orderHeaders = Session.QueryOver<Order>()
        .JoinAlias(o => o.Customer, () => customer)
        .JoinAlias(o => o.Employee, () => employee)
        .SelectList(list => list
            .SelectGroup(o => o.OrderedOn).WithAlias(() => orderHeader.OrderedOn)
            .SelectGroup(o => customer.Name).WithAlias(() => orderHeader.Name)
            .SelectGroup(o => employee.FirstName).WithAlias(() => orderHeader.FirstName)
            .SelectGroup(o => employee.LastName).WithAlias(() => orderHeader.LastName)
            .SelectSum(o => employee.Salary).WithAlias(() => orderHeader.JhonnysProjectionExample))
        .TransformUsing(Transformers.AliasToBean<OrderHeader>())
        .List<OrderHeader>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:25:02.717

`TOP n PERCENT`是一个非标准的 SQL 结构（我可能会补充一个非常有用的结构）

任何 NH 查询方法都不支持此功能。只需将其保留为 SQL。

# php - 使用 php 将类型“字符串”转换为 base64

> ID：12006820
> 
> 赞同：0
> 
> 时间：2012-08-17T13:32:06.087
> 
> 标签：php, base64, xml-rpc

这是一个共同的 xmlrpc 问题。我有一串来自 .wav 文件的数据。我读入了文件，`file_get_contents()`然后我必须将该信息提交给 xmlrpc 服务器（我没有创建）。它采用 base64 格式的 .wav 音频数据。我试过使用`base64_encode()`，但这也返回“字符串”类型。我想也许[This php guide](http://php.net/manual/en/function.xmlrpc-set-type.php) on`xmlrpc_set_type`会有所帮助，但这会返回一个对象，其中包含一个包含base64编码字符串的数组。

有没有办法将我正在使用的字符串设置为 base64 类型？

这就是我到目前为止所拥有的，这会产生错误：

```
$data = base64_encode(file_get_contents('myfile.wav', NULL, NULL, 44));
$request = xmlrpc_encode_request('service',array('AudioData'=>$data)); 
```

我也试过这个：

```
$data = file_get_contents('myfile.wav', NULL, NULL, 44);
$request = xmlrpc_encode_request('service',array('AudioData'=>xmlrpc_set_type($data, 'base64'))); 
```

这是我得到的回应：

```
["faultCode"]=> int(0) ["faultString"]=> string(155) "request contains string value where base64 expected 
```

# 编辑：

我知道 base64 不是一种类型。显然，我使用的服务器除了一串 base64 编码的数据，所以我的问题是如何使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:37:10.110

该`xmlrpc_set_type`函数可用于在 XML-RPC 请求中将值“标记”为特定类型（base64 或 datetime）。它返回一个布尔值，指示操作是否成功。

基本上，发生的情况是该值与其类型一起包装在标准 PHP 类对象中，并且作为引用传递的变量`xmlrpc_set_type`保存该对象而不是原始原始值。

调用`xmlrpc_encode_request`时，为了声明值类型，先前作为引用传递的相同变量`xmlrpc_set_type`应嵌入`$params`作为第二个参数传递的数组中。

请注意，这些功能仍被认为是实验性的，应谨慎使用。

例子：

```
<?php

$method = 'app.service';

// $value contains raw content
xmlrpc_set_type($value, 'base64'); 

// $request contains base64 encoded content
$request = xmlrpc_encode_request($method, array($value); 
```

# c# - 枚举本地计算机上的组成员身份时出错

> ID：12006822
> 
> 赞同：1
> 
> 时间：2012-08-17T13:32:06.757
> 
> 标签：c#

我正在尝试检查用户是否是以下组的成员：

```
if (conditionalGroup != null)
            {
                if (!currentUser.IsMemberOf(conditionalGroup))
                {
                    _logger.Debug("Adding user to Specific group.");
                    conditionalGroup.Members.Add(currentUser);
                    conditionalGroup.Save();
                }

                conditionalGroup.Dispose();
            } 
```

但是它失败了：`An error (1789) occurred while enumerating the group membership. The member's SID could not be resolved.`

该组是本地计算机上的用户组。我也对 IIS_IUSRS 组做同样的事情，那个很好。这只是今天在我的构建机器上开始的，并且以前一直有效。这是一个错误还是我做错了什么？

这是我创建用户的方式：

pc = new PrincipalContext(ContextType.Machine); currentUser = UserPrincipal.FindByIdentity(pc, u.UserName);

```
 if (currentUser == null)
            {
                currentUser = new UserPrincipal(pc)
                    {
                        Name = u.UserName,
                        Description = u.UserDescription,
                        UserCannotChangePassword = false,
                        PasswordNeverExpires = true
                    };

                currentUser.SetPassword(u.UserPassword);
                currentUser.Save();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:50:01.603

On Windows, you usually see all users and groups with their names. But. sometimes occassionally you find a user or group that is displayed not by name, but by it's SID. This happens when the System find an entry that claims to refer to such ID, but the ID is not registered or not found in the System's name table/database.

The easiest way to see that is to borrow someone's pendrive with NTFS partition on it and some user-files created on remote machine that has different accounts. Browse, rightclick, see Permissions, voila lots of SIDs.

Start with inspecting your group that 'fails', ie. in SystemTools there's an applet ComputerManagement where you can browse most of the User and Groups registrations. View that Group, see its members and check if all of them are seen by-name, and none by "S-1-5..." number. If you find numeric one, try checking the classification support.microsoft.com/kb/243330 - maybe you will guess how that user got added there and why he is unnamed.

Anyways, which line of that code fails actually? IsMemberOf or Members.Add or Save?

# excel - 来自另一个工作表的 VLOOKUP

> ID：12006823
> 
> 赞同：0
> 
> 时间：2012-08-17T13:32:14.507
> 
> 标签：excel, vlookup

有人可以帮助我完成以下 VLOOKUP 查询。

我在一个电子表格的 A 列中有数据，我需要将此列中包含的数据与另一个打开的电子表格中的 A 列进行匹配，如果它们匹配，则将第一个电子表格中的 B 列与 B 列中包含的数据相匹配第二个电子表格。

任何人都可以提供帮助，因为我不确定如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:45:38.003

在 sheet2 的单元格 B* 中（其中 * 是行号）`=vlookup(A*, 'Sheet1'!A:B, 2, FALSE)`

# javascript - 如何使用javascript检测手机开/关的GPS和WIFI？

> ID：12006830
> 
> 赞同：1
> 
> 时间：2012-08-17T13:32:41.390
> 
> 标签：javascript, gps

我正在为智能手机写一个网站。我使用 javascript: **navigator.geolocation.getCurrentPosition**来获取位置。

不过，在执行此功能之前，我需要检测 GPS（和 Wifi）的开启或关闭。我已经搜索过，但我没有看到任何方法来检测 GPS（和 Wifi）的开启或关闭。

请帮助我如何**通过 javascript 或 jquery**检测它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:57:53.627

你不能只用 Javascript 来做到这一点。您需要研究像[Phonegap](http://phonegap.com/)这样的框架。

Phonegap 让您仅使用 javascript 构建移动应用程序，并提供执行您要求的事情的方法。

如果您只想要一个普通的*网站*（而不是应用程序）来做到这一点，那么据我所知，目前这是不可能的。

# javascript - 在wordpress主题中添加fancybox灯箱而不使用插件

> ID：12006835
> 
> 赞同：0
> 
> 时间：2012-08-17T13:33:05.770
> 
> 标签：javascript, wordpress, fancybox, themes

我希望我的帖子图像在一个精美的灯箱中打开。我有两个具有两个不同主题的 wordpress 网站。我正在为灯箱中的图像使用此代码

```
<div id="gallery-1" class="gallery galleryid-25830 gallery-columns-3 gallery-size-thumbnail">
<a title="image-title" href="image-url"><img class="attachment-thumbnail alignleft" title="image-title" src="image-url" alt="" width="150" height="150" /></a>
</div> 
```

此代码适用于一个主题，但在另一个主题中，它会转到图像的 url。我检查了我的主题文件，发现fancybox没有jquery或js文件。所以我想知道如何将这些文件添加到我的主题中，以及我应该在我的 CSS 文件中进行哪些更改。请有人，帮助我。我是编码新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:45:06.240

问题是你的插件fancybox 将明确要求jquery 作为HTML 脚本中的预头加载项之一，以便浏览器初始化jquery 功能。您必须从源提供 jquery 包或使用外部 CDN（Google、MS 等）。

这可以通过在[此处](https://developers.google.com/speed/libraries/devguide#jquery)的 HTML jquery CDN 代码中进行编码或下载/安装[WP PLUGINS](http://wordpress.org/extend/plugins/ajax-google-libraries-cdn/)来完成，该插件会自动配置为最新的 jquery CDN 包。

在确保 jquery 是标头代码的一部分之后，您的花哨的盒子应该可以工作（或者给您一些指示它正在尝试运行）。享受 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:12:49.717

轻松使用“条件灯箱”或“nextgen 画廊插件”或许多其他侧边灯箱 WP 插件，如果您使用 BP，请考虑只有少数插件，如“fancybox”4 buddypress（不支持）。如果在不使用插件的情况下启用 wordpress 侧边灯箱，请参阅此页面：[http ://fearlessflyer.com/2011/04/how-to-add-lightbox-to-wp-without-plugin/](http://fearlessflyer.com/2011/04/how-to-add-lightbox-to-wp-without-plugin/)

# objective-c - 使用选择器或块将协议的基类属性设置为方法

> ID：12006840
> 
> 赞同：0
> 
> 时间：2012-08-17T13:33:21.660
> 
> 标签：objective-c, selector, objective-c-blocks, class-method

我正在创建一个将用于 iOS 网格视图的接口/协议。我试图在类中封装尽可能多的信息，给类及其子类的用户留下很少的信息。我坚持回调方法或委托应该是什么。在 C 或 C++ 中，我需要一个函数指针作为参数传递给在触摸事件上调用的方法。在Objective C（我相当新）中，我对块和选择器感到困惑。从我所看到的Apple方式是使用选择器。所以这个类应该需要一个方法被设置为当检测到触摸事件时会发生什么的选择器。我不想做大量的子类化，因为这会限制可重用性并在每次使用此接口时强制执行更多编码。我包括有限的代码，到目前为止我使用选择器所做的工作，但我愿意接受有关如何使用块来完成相同操作以及为什么会更好的建议。我没有测试过这个，我目前正在设计它。

```
@protocol Grid <NSObject>
@required

/*! @brief Initializer for base class */
- (id) init:(UIView *)parent withSelector:(SEL)selector;
/*! @brief Draw the actual view */
- (void) draw:(CGRect) rect;
/*! @brief Reload the data */
- (void) reload;
@end 
```

标题具有误导性，自从发布此问题以来，我对 Objective-C 中的工作方式有了更好的了解。这是关于抽象基类、继承和多态性，而不是将选择器设置为属性或委托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:44:28.867

您应该做的是要求该类（可能是委托）符合您的协议。你可以这样做。

```
@interface GridView : UIView {
    id<Grid> delegate;
}

...

@end 
```

并让用户指定委托属性。在这一点上，您对委托的所有了解就是它符合 Grid 协议，因此您可以确定它实现了所有必需的方法。请注意，您永远不应该在协议中使用任何类型的 init 方法，因为您的类 ( `GridView`) 永远不必分配自己的委托，这完全违背了目的。

在您将用作委托的类中，您必须确保它符合`Grid`协议，以便它可以用作委托。看起来像这样。

```
@interface GridDelegateObject : NSObject <Grid> {
...
}

...

@end 
```

并且您必须至少为`Grid`协议中所需的方法提供实现。

那么您应该将`GridView`实例的委托设置为`GridDelegateObject`.

`[gridViewInstance setDelegate:gridDelegateObjectInstance];`

然后你可以调用`gridDelegateObject`从你的`Grid`协议中实现的所有方法`gridViewInstance`，就像这样。

```
-(void)someMethod {
    [delegate reload];
} 
```

或类似的东西。这将调用 reload 函数`gridDelegateObjectInstance`。

# php - php 填写动态列表中选中的内容

> ID：12006842
> 
> 赞同：0
> 
> 时间：2012-08-17T13:33:25.880
> 
> 标签：php, checkbox

我的问题延伸到[这篇文章](https://stackoverflow.com/questions/2544770/showing-selected-values-on-a-multiselect-box)的答案，我找不到我正在寻找的其他内容。

当从 mySQL 表（动态）中提取选项时，如何在复选框列表中自动选择（选中）选项？

这是我到目前为止所拥有的：

从表中拉出委员会（通讯）：

```
while ($row = mysql_fetch_assoc($comm)){
    foreach ($row as $v){
        $comms[] = $v;
        }
} 
```

用整洁的 PHP 输出漂亮的 HTML（我需要帮助的部分）：

```
 foreach ($comms as $comm){
       ?????????
    } 
```

我怎样才能输出类似的东西？：

```
<input type="checkbox" name="committee" value="blue" checked="checked" />blue<br />
<input type="checkbox" name="committee" value="green"  />green<br />
<input type="checkbox" name="committee" value="orange"  />orange<br />
<input type="checkbox" name="committee" value="purple" checked="checked" />purple<br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:36:51.580

假设您的颜色存储在一个数组中，并且您的数据以数组形式返回（如果您使用`mysql_*`函数，则可能不是这种情况），您可以打印出每个复选框，然后比较其值以查看它是否在“已检查”列表中“ 颜色：

```
<?php
$colors = array('blue', 'green', 'orange', 'purple');

$data = array('blue', 'purple');//array pulled from database.

foreach($colors as $color): ?>
    <input type="checkbox" name="committee" value="<?= $color ?>" <?= in_array($color, $data) ? 'checked="checked" ' : '' ?>/><br />
<?php endforeach; ?> 
```

顺便说一句，你应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:38:39.130

您需要检查几件事。如果有人已经尝试提交表单，那么他们的回复将是`$_REQUEST`（和`$_POST`或`$_GET`，取决于您的表单的提交方法）；然后你可以把每一行写成：

```
<input type="checkbox" name="committee[]" value="green" <?php if ($_REQUEST['committee'] == 'green') { echo "checked"; } ?> />green<br /> 
```

如果它来自数据库，您可以签入`$comms`“

```
<input type="checkbox" name="committee[]" value="green" <?php if (in_array($comms, 'green') { echo "checked"; } ?> />green<br /> 
```

您可以通过提前确定是否重新提交并使用来自正确位置的结果填充单个数组来提高代码效率：

```
<?php

if ([form is submitted]) {
    $comms = $_REQUEST["committee"];
} else {
    $comms = getCommsFromDatabase();
}

?> 
```

这也让您有机会清理来自 $_REQUEST 的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:39:33.557

```
while ($row = mysql_fetch_assoc($comm)){
    foreach ($row as $v){
        $comms = $v;
        }
} 
```

假设 $v 具有 Checked 属性，您可以在其中打印值

```
 foreach($coms as $key => $value)
   {
      $checked = "";
      $color = $value['color'];
      if($value['checked'] == 'checked')
      $checked = "checked = 'checked'";
      echo "<input type='checkbox' name='committee' value='$color' $checked />$color<br />"; 
```

}

# php - Android 版本的代码不像桌面互联网浏览器那样工作

> ID：12006844
> 
> 赞同：0
> 
> 时间：2012-08-17T13:33:26.863
> 
> 标签：php, javascript, android

我有我一直在 android 上测试的网站代码，但是当我将它与运行具有相同参数的相同代码的桌面的结果进行比较时，它表明它不能在 android 上运行。

我已经查看了结果变化的代码，并且有一个出现问题的时间范围。选项是 PHP 运行不正确（很高兴确认，但这不可能是问题，因为 PHP 运行服务器端意味着 android 和桌面的行为相同）或 Javascript 没有获取信息从页面上的字段正确。

如果是第二种情况，则信息来自`<option value ="importantpart">`a`<select>`和 a 的输入`<input type="text">`。

有什么具体的方法可以让我从这两个地方获取信息。此外，在一个相关但问题中，iOS 浏览器是否需要进行类似的更改，或者相同的更改是否有效。

目前它是在 javascript 以表单运行时获取的

```
var whatever = $("#fieldID").val(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:00:52.117

*   尝试将 $_REQUEST、$_GET 和 $_POST 转储到日志文件，并从您的桌面和您的 android 执行相同的请求。
*   有什么不同吗？注意像换行符和空格这样的细微差别！

# java - JavaMail，如果接收者邮件错误，不抛出异常

> ID：12006845
> 
> 赞同：1
> 
> 时间：2012-08-17T13:33:31.637
> 
> 标签：java

此代码段发送邮件：

```
if (m.send()) {
    Log.i("MAIL SENDER: ", "Succesfully");
    Toast.makeText(getApplicationContext(),
    "The log file has been sent",
    Toast.LENGTH_LONG).show();

} else {

    throw new MailException();
} 
```

如果接收者的邮件不正确，例如`example@gmail.co`不是`example@gmail.com`代码运行到第一个 if 块。为什么当接收器不正确时会发生这种情况。有人可以帮我吗？

邮件设置从 SharedPreferences 中检索，并在此方法中检查：

```
public static boolean isValidEmailAddress(String email) {
    boolean result = true;
    try {
        InternetAddress emailAddr = new InternetAddress(email);
        emailAddr.validate();
    } catch (AddressException ex) {
        result = false;
    }
    return result;
} 
```

当用户在文本字段中输入电子邮件地址并点击确定时，会发生以下情况：

```
if (isValidEmailAddress(mail)) 
            editor.putString("Tomail", mail);
else
    Toast.makeText(getApplicationContext(), "Invalid", Toast.LENGHT_LONG).show(); 
```

这只会检查邮件是否包含 a`@`并且因此它是有效的。

在我的发送方法中：

```
public SendMail(Context c) {
    this();

    sharedPrefs = PreferenceManager.getDefaultSharedPreferences(c);
    _host = sharedPrefs.getString("host", null);
    _port = sharedPrefs.getString("port", null);
    _sport = sharedPrefs.getString("port", null); 
    _user = sharedPrefs.getString("mail", null);
    _pass = sharedPrefs.getString("pw", null); 

}

public boolean send() throws Exception {
    Properties props = _setProperties();

    if (!_user.equals("") && !_pass.equals("") && _to.length > 0
            && !_from.equals("") && !_subject.equals("")
            && !_body.equals("")) {

        Session session = Session.getInstance(props,
                new GMailAuthenticator(_user, _pass));

        MimeMessage msg = new MimeMessage(session);

        msg.setFrom(new InternetAddress(_from));

        InternetAddress[] addressTo = new InternetAddress[_to.length];
        for (int i = 0; i < _to.length; i++) {
            addressTo[i] = new InternetAddress(_to[i]);
        }
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

        msg.setSubject(_subject);
        msg.setSentDate(new Date());

        // setup message body
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText(_body);
        _multipart.addBodyPart(messageBodyPart);

        // Put parts in message
        msg.setContent(_multipart);

        // send email
        Transport.send(msg);

        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:59:39.727

这是因为邮件是异步协议。基本上，邮件不会传递到目的地，它只是传递到您的本地邮件服务器，该服务器对其进行了一些智能操作。最终。几个小时后。

如果出现问题，邮件的发件人会收到一封带有错误消息的邮件，因此您最好确保地址正确。

这意味着仅在以后检查接收方地址。没有办法验证它们。`digulla@home`你可以做一些简单的模式匹配验证来检查损坏的域名，但是当新的顶级域可用并且我得到我的电子邮件地址时，这将在几个月内停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:47:13.563

`validate()`在`isValidEmailAddress()`方法中使用遵循 RFC822 的语法规则。不幸的是，“example@gmail.co”被认为是有效邮件，因此它返回 true。[您可以在此处](http://mythic-beasts.com/~pdw/cgi-bin/emailvalidate)使用 RFC822 检查邮件的有效性。

文档：[`validate()`InternetAddress 类](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/InternetAddress.html#validate%28%29)

* * *

**更新：**你将不得不做额外的验证，看看[http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/)

# amazon-s3 - NSURLCacheStorageNotAllowed 仍然缓存

> ID：12006850
> 
> 赞同：3
> 
> 时间：2012-08-17T13:33:44.693
> 
> 标签：amazon-s3, uikit, nsurlrequest, http-caching

我在 S3 上有一个 JSON 文件，我正在使用 NSURLConnection 通过 HTTP 下载。我将连接设置为使用缓存策略，`NSURLCacheStorageNotAllowed`但我仍然看到旧版本的数据返回。我改为`NSURLRequestReloadIgnoringLocalAndRemoteCacheData`并且缓存行为有效。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T14:51:25.350

由于不理解 和 之间的区别，这是一个错误`NSURLCachedStoragePolicy`，`NSURLRequestCachePolicy`请在此处查看我的答案：

[https://stackoverflow.com/a/24783824/1800915](https://stackoverflow.com/a/24783824/1800915)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T07:40:36.070

到今天为止，看起来`NSURLRequestReloadIgnoringLocalAndRemoteCacheData`实际上什么也没做。来自 OS 10.9.1 中的 NSURLRequest.h：

![NSURLRequest.h 的截图](../Images/0d300dae339be5c8320cea2b4cb81f5b.png)

看起来最好的选择可能是使用它`NSURLRequestReloadIgnoringLocalCacheData`。（除非 Apple 只是忘记更新其头文件以删除该评论。）

# javascript - 在转换后的 UL 列表中添加选择选项

> ID：12006853
> 
> 赞同：0
> 
> 时间：2012-08-17T13:33:56.987
> 
> 标签：javascript, jquery

我正在使用脚本将 UL 转换为选择下拉框：

```
$(function() {
$('ul.cat-nav').each(function() {
    var $select = $('<select id="category" />');
    $(this).find('a').each(function() {
        var $option = $('<option />');
        $option.attr('value', $(this).attr('href')).html($(this).html());
        $select.append($option);
    });
    $(this).replaceWith($select);
    });
}); 
```

这很好用，但我想添加一个“选择一个”的初始选项作为第一个选项。当我将此代码添加到上面时，它不会添加初始选项：

```
$("#category").html("<option value='#'>Choose One</option>"); 
```

关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:43:18.953

`<option>`解决方案是在添加其余选项之前添加“选择一个” 。

更改您的代码以包含添加的行：

```
$(function() {
$('ul.cat-nav').each(function() {
    var $select = $('<select id="category" />');

    $select.append("<option value='#'>Choose One</option>");

    $(this).find('a').each(function() {
        var $option = $('<option />');
        $option.attr('value', $(this).attr('href')).html($(this).html());
        $select.append($option);
    });
    $(this).replaceWith($select);
    });
}); 
```

[例如，请参见这个 jsfiddle。](http://jsfiddle.net/ZhKWr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:36:05.400

尝试使用

```
$("#category").prepend("<option value='#'>Choose One</option>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:37:47.040

代替

```
var $select = $('<select id="category" />'); 
```

和

```
var $select = $('<select id="category"><option value="#">Choose One</option></select>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T13:44:10.237

Pedro 确实是正确的，只是添加了您需要使用不同的 JQuery 方法的原因。

.html() 将替换所选 HTML 对象的内容，而 .prepened() 将在所选项目之前添加数据（这是您想要的）。

[http://api.jquery.com/html/](http://api.jquery.com/html/)

[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

# c++ - 为什么指向函数的指针的大小与指向成员函数的指针的大小不同？

> ID：12006854
> 
> 赞同：31
> 
> 时间：2012-08-17T13:33:58.757
> 
> 标签：c++, pointers, function-pointers, member-function-pointers

指针不就是地址吗？或者我错过了什么？

我测试了几种类型的指针：

*   指向任何变量的指针都是相同的（在我的平台上为 8B）
*   指向函数的指针与指向变量的指针大小相同（再次为 8B）
*   指向具有不同参数的函数的指针 - 仍然相同 (8B)

但是指向成员函数的指针更大 - 在我的平台上为 16B。

三件事：

1.  为什么指向成员函数的指针更大？他们还需要什么信息？
2.  据我所知，该*标准*没有说明指针的大小，**只是**它`void*`必须能够“包含”任何指针类型。换句话说，任何指针都必须能够转换为`void*`，对吧？如果是这样，那么为什么`sizeof( void* )`是 8，而`sizeof`指向成员函数的指针是 16？
3.  是否还有其他大小不同的指针示例（我的意思是，对于**标准**平台，而不是一些稀有和特殊的）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-17T13:35:53.420

在最正常的情况下，你几乎可以想到

```
struct A {
    int i;
    int foo() { return i; }
};

A a;
a.foo(); 
```

作为

```
struct A {
    int i;
};
int A_foo( A* this ) { return this->i; };

A a;
A_foo(&a); 
```

（开始看起来像`C`，对吗？）所以您会认为指针`&A::foo`与普通函数指针相同。但是有一些复杂性：多重继承和虚函数。

所以想象我们有：

```
struct A {int a;};
struct B {int b;};
struct C : A, B {int c;}; 
```

它可能是这样布置的：

![多重继承](../Images/3abdb11c478c1a9b2e8d905aee1c9bad.png)

如您所见，如果您想用 an`A*`或 a指向对象`C*`，则指向起点，但如果您想用 a 指向它，`B*`则必须指向中间的某个位置。

因此，如果`C`从某个成员函数继承`B`并且您想指向它然后在 a 上调​​用该函数`C*`，则它需要知道对`this`指针进行洗牌。该信息需要存储在某个地方。所以它与函数指针混为一谈。

现在，对于每个具有`virtual`函数的类，编译器都会创建一个名为*virtual table*的列表。然后，它将指向该表的额外指针添加到类（*vptr*）。所以对于这个类结构：

```
struct A
{
    int a;
    virtual void foo(){};
};
struct B : A
{
    int b;
    virtual void foo(){};
    virtual void bar(){};
}; 
```

编译器最终可能会变成这样： ![在此处输入图像描述](../Images/62c893534362176fef93964080a0ef9a.png)

所以指向虚函数的成员函数指针实际上需要成为虚表的索引。所以成员函数指针实际上需要 1) 可能是函数指针，2) 可能是`this`指针的调整，以及 3) 可能是 vtable 索引。为了保持一致，每个成员函数指针都需要具备所有这些功能。所以这是`8`指针的`4`字节，调整的`4`字节，索引的字节，`16`字节总数。

我相信这实际上在编译器之间存在很大差异，并且有很多可能的优化。可能没有人真正按照我描述的方式实现它。

有关*更多*详细信息，请参阅[此](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)（滚动到“成员函数指针的实现”）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-17T13:37:28.927

基本上是因为它们需要支持多态行为。请参阅 Raymond Chen 的一篇不错的[文章](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T13:55:42.000

一些解释可以在这里找到： [成员函数指针的底层表示](https://web.archive.org/web/20160412092414/http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=142)

> 尽管指向成员的指针表现得像普通指针，但在幕后它们的表示是完全不同的。实际上，在某些情况下，指向成员的指针通常由一个最多包含四个字段的结构组成。这是因为指向成员的指针不仅要支持普通的成员函数，还要支持虚成员函数、具有多个基类的对象的成员函数以及虚基类的成员函数。因此，最简单的成员函数可以表示为一组两个指针：一个保存成员函数的物理内存地址，第二个指针保存 this 指针。但是，在虚拟成员函数、多重继承和虚拟继承等情况下，指向成员的指针必须存储附加信息。因此，你可以' t 将指向成员的指针转换为普通指针，也不能在指向不同类型成员的指针之间安全地转换。块引用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:38:15.260

我猜它与`this`指针有关......也就是说，每个成员函数还必须具有它们所在类的指针。然后指针使函数的大小更大一些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T10:33:46.757

将指向成员函数的指针表示为如下的一些主要原因`{this, T (*f)()}`：

*   它在编译器中的实现比实现指向成员函数的指针更简单`T (*f)()`

*   它不涉及运行时代码生成或额外的簿记

*   与`T (*f)()`

*   C++ 程序员对指向成员函数的指针的大小没有足够的要求等于`sizeof(void*)`

*   在执行期间生成运行时代码实际上是当前 C++ 代码的一个禁忌

# c# - 在哪里复制 gsdll32.dll 以使 PDF 到图像转换器在我的 WPF 应用程序中工作？

> ID：12006855
> 
> 赞同：7
> 
> 时间：2012-08-17T13:34:00.517
> 
> 标签：c#, wpf, ghostscript, ghostscriptsharp

我的项目给出错误..

> *无法在 DLL 'gsdll32.dll' 中找到名为 'gsapi_new_instance' 的入口点。*

尝试使用 Ghost-script Interpreter dll 'gsdll32.dll' 将 .pdf 转换为图像格式时

即使我尝试将这个 dll 复制到所有需要的地方，如许多论坛中所说的那样

Win\System32 或在项目目录中..错误仍然相同..:(

我使用了 Ghost-script 给出的 PDFConvert.cs 类，并在我的转换按钮单击上编写了以下代码：

```
private void btnConvert_Click(object sender, RoutedEventArgs e)
{
  //First We Check whether the Dll is present

    if (!File.Exists(AppDomain.CurrentDomain.BaseDirectory + "\\gsdll32.dll"))
    {
        MessageBox.Show("The library 'gsdll32.dll' required to run this program is not present! download GhostScript and copy \"gsdll32.dll\" to this program directory");
        return;
    }
    if (string.IsNullOrEmpty(txtSingleFile.Text))
    {
        MessageBox.Show("Enter the File name");
        txtSingleFile.Focus();
        return;
    }
    else if (!File.Exists(txtSingleFile.Text))
    {
        MessageBox.Show("The File Does not exists");
        txtSingleFile.Focus();
    }

    else
        ConvertPdfToImage(txtSingleFile.Text);
} 
```

我的 ConvertPdfToImage 方法是这样的：

```
//The Ghost-Script Class Object Creation:
PdfToImage.PDFConvert converter = new PdfToImage.PDFConvert();
public void ConvertPdfToImage(string filename)
{
    //bool converted = false;
    System.IO.FileInfo input = new FileInfo(filename);
    string outPut = string.Format("{0}\\{1}{2}", input.DirectoryName, input.Name, txtExtensionName.Text);

    converter.OutputFormat = txtExtensionName.Text;

    outPut = outPut.Replace(txtExtensionName.Text, string.Format("{1}{0}", txtExtensionName.Text, DateTime.Now.Ticks));
    converter.Convert(input.FullName, outPut);
    lblConvertingResult.Content = string.Format("{0}:File Converted..!!", DateTime.Now.ToShortTimeString());
} 
```

我相信这个错误是因为 gsdll32.dll 库的错位造成的，因为相同的代码在 Ghost-Script Interpreter API 提供的示例演示中运行良好。请建议我应该保留 dll-gsdll32.dll 的确切位置。 ！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-21T17:54:02.843

我知道这个问题有点老了，但如果有人有这个问题，我会这样解决：从 Visual Studio [http://www.nuget.org/packages/GhostScriptSharp/下载并安装 GhostScriptSharp 包](http://www.nuget.org/packages/GhostScriptSharp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T07:43:37.513

尝试使用 dll 的完整路径，而不仅仅是名称。
就像如果你的 dll 保存在 D:\TestApplication\bin\gsdll32.dll 那么，

```
[DllImport("gsdll32.dll", EntryPoint="gsapi_new_instance")] 
```

以上声明将

```
[DllImport("D:\\TestApplication\\bin\\gsdll32.dll", EntryPoint="gsapi_new_instance")] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-31T19:00:07.543

我终于弄明白了。我下载了最新的 DLL，更改了代码以查找更新的 dll，它工作正常。

# apache - Mod_Proxy 502-代理错误间歇性

> ID：12006860
> 
> 赞同：6
> 
> 时间：2012-08-17T13:34:17.940
> 
> 标签：apache, tomcat, proxy, tomcat7, mod-proxy

我正在使用 Apache 2.2.16 和 Tomcat 7.0.16。我有 3 个执行 3 个不同战争文件的 Tomcat 实例。为了绕过请求，我使用 mod_proxy 配置了 httpd。

3个Tomcat实例分别运行在8080、8090、8099。找到下面的httpd配置

```
ProxyPass /bor `http://localhost:8080/bor/
ProxyPass /borcafews/ `http://localhost:8090/borcafews/
ProxyPass /borechws/ `http://localhost:8099/borechws/ 
```

我在 8090 和 8099 中间歇性地收到 502 代理错误。所以我在 httpd.conf 中设置了以下变量

```
<Location /borcafews/>
SetEnv force-proxy-request-1.0 1
SetEnv proxy-nokeepalive 1
</Location>` 
```

设置此配置后，borcafews 没有给出任何代理错误，但 borechws 间歇性地出现 502-代理错误。

`proxy: Error reading from remote server returned by /borechws/services/bor (20014)Internal error: proxy: error reading status line from remote server localhost:8099`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T20:26:03.550

我不确定这是您的 Apache 配置中的错误：您的 tomcat 应用程序完全有可能返回错误的答案。

使用 tcpdump 或 tshark 捕获相关端口上的流量。这将验证您的 tomcat 应用程序正在返回有效的 HTTP 响应。

# android - 提高识别率的图像预处理步骤

> ID：12006866
> 
> 赞同：3
> 
> 时间：2012-08-17T13:34:42.360
> 
> 标签：android, ocr, tesseract

我正在为我的项目使用 TessBaseAPI 制作一个简单的 OCR Android 应用程序。我已经完成了一些图像预处理步骤，例如二值化和图像增强。但他们的结果是 50% 到 60%。我们怎样才能提高识别率？

我包括两个示例图像。

[http://imageshack.us/photo/my-images/94/1school.jpg/](http://imageshack.us/photo/my-images/94/1school.jpg/)

[http://imageshack.us/photo/my-images/43/15071917.jpg/](http://imageshack.us/photo/my-images/43/15071917.jpg/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:22:54.630

上述命令的以下添加适用于您的第二个图像：

```
-negate \
-deskew 40% \
+repage \
-crop 393x110+0+0 \ 
```

他们为结果添加了适当水平的去偏斜和裁剪，让 Tesseract 的生活变得更轻松......

所以完整的命令应该如下，它会在我的系统上产生正确的结果：

```
convert 15071917.jpg            \
   -type grayscale              \
   -negate                      \
   -gamma 1                     \
   -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  \
   -normalize -normalize -normalize -normalize -normalize -normalize -normalize -normalize -normalize -normalize \
   -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle \
   -negate                      \
   -deskew 40%                  \
   +repage                      \
   -crop 393x110+0+0            \
    15071917.png                \
&&                              \
tesseract 15071917.png OUT && cat OUT.txt

  Tesseract Open Source OCR Engine v3.01 with Leptonica
    Page 0
    TESCO 
```

这是原始图片（左）和修改后的命令的结果图片（右）： ![](../Images/a1b87bd82688c2bae0db5a4c2f87800b.png) ![](../Images/5a6dafb05b136203709ef8fd1e78e53c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:18:09.293

此命令适用于我的第一个图像文件。我正在使用 ImageMagick 版本`6.7.9-0 2012-08-17 Q16`：

```
convert 1school.jpg                           \
    -scale 1000%                              \
    -blur 1x65535 -blur 1x65535 -blur 1x65535 \
    -contrast                                 \
    -normalize                                \
    -despeckle                                \
    -despeckle                                \
    -type grayscale                           \
    -sharpen 1                                \
    -posterize 3                              \
    -negate 1school.tif                       \
&&                                            \
tesseract 1school.tif OUT && cat OUT.txt

  Tesseract Open Source OCR Engine v3.01 with Leptonica
    Page 0
     '
    SCHOOL
    ZONE 
```

第二张图片需要不同的命令：

```
convert 15071917.jpg            \
   -type grayscale              \
   -negate                      \
   -gamma 1                     \
   -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  -contrast  \
   -normalize -normalize -normalize -normalize -normalize -normalize -normalize -normalize -normalize -normalize \
   -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle -despeckle \
    15071917.tif                \
&&                              \
tesseract 1school.tif OUT && cat OUT.txt

  Tesseract Open Source OCR Engine v3.01 with Leptonica
    Page 0
    TE§§IO 
```

好吧，第二个没那么成功。但你明白了……

这是生成的图像。左边是原件，右边是命令的结果：

![第一个原件](../Images/0ca8ffde8b97715be3cb5a1a745013ad.png) ![修改了第一个原件](../Images/d7a9a5a1525cca1f99f06e96467b7e25.png)
![](../Images/a1b87bd82688c2bae0db5a4c2f87800b.png) ![](../Images/0425cb7ea8de9a96f1da3483857a17b4.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T23:33:56.940

我今天学了些新东西。在 Tesseract 3.01 中，让 OCR 工作的最简单方法似乎是首先对文本进行*纠偏。*

这是一个非常简单的命令，它只是剪切图像并稍微裁剪它，但不对原始图像进行*任何*对比度或颜色更改操作：

```
 convert 15071917.jpg  \
      -background pink  \
      -shear -0x6       \
      -crop 350x80+0+24 \
       tesco.jpg        \
  &&                    \
  tesseract tesco.jpg a  &&  cat a.txt

     Tesseract Open Source OCR Engine v3.01 with Leptonica
     TESCO 
```

![](../Images/a1b87bd82688c2bae0db5a4c2f87800b.png) ![](../Images/f8e97921d2cec599e4f7bfd8887149f4.png)

# ios - 从iOS中的推文按钮回调？

> ID：12006876
> 
> 赞同：0
> 
> 时间：2012-08-17T13:35:36.347
> 
> 标签：ios, facebook, twitter, mobile-safari

我希望用户能够共享页面。它专门针对 iOS 用户。最佳做法是使用 Safari 本身的共享按钮，因此用户不必登录等。但我想跟踪链接是否已通过 Twitter/Facebook 共享。是否有某种回调可以监视服务器端或其他方式，以跟踪 iOS (6) 上网页的共享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:59:15.877

我不了解服务器端，但您可以跟踪用户何时完成 iOS SDK 中的帖子。这是一个`TWTweetComposeViewController`完成处理程序的示例，它将在用户成功发布推文时通知您。我会给你一个 Facebook 的例子，但 iOS 6 仍处于保密协议之下。

此外，无需在 Safari 中执行此操作。如果用户在系统偏好设置中链接了他们的 Twitter 帐户，他们将不会被提示使用 a 登录`TWTweetComposeViewController`，对于 iOS 6 Facebook 作曲家也应该如此。

```
[tweetViewController setCompletionHandler:^(TWTweetComposeViewControllerResult result) {

    switch (result) {
        case TWTweetComposeViewControllerResultCancelled:
            break;
        case TWTweetComposeViewControllerResultDone:
              //some code representing a successful tweet here! 
            break;
        default:
            break;
    }
    [self dismissModalViewControllerAnimated:YES];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:39:40.403

听起来您必须创建一个链接，该链接转发到您管理的服务器，记录您希望从链接中获取哪些信息，然后将该用户转发到您要将其发送到的实际链接。您基本上是在他们前往他们想要的站点的途中拦截他们，并且可以从该链接跟踪您想要的内容。许多网站都采用这种做法。

以 Facebook 为例，每当您点击外部链接时，您实际上是点击了一个链接，该链接首先由 Facebook 服务器处理以记录您的操作，然后将您转发到正确的站点。

# ruby-on-rails-3 - 太阳黑子 - solr - 如何进行精确匹配

> ID：12006877
> 
> 赞同：11
> 
> 时间：2012-08-17T13:35:39.127
> 
> 标签：ruby-on-rails-3, solr, sunspot

```
articles = Article.search do |s|
    s.fulltext "Java Script"
end 
```

我如何告诉太阳黑子，比如给我所有与“Java Script”完全匹配的结果现在正在得到“Java，Unix Scripting”之类的结果（我认为我用于词干提取的边缘 n gram 采用了这个脚本结果）

我在堆栈溢出中发现了几个问题。不幸的是，没有人按照我想要的方式回答。因此我在这里发布这个问题。我要求版主不要将其标记为重复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-06T19:21:59.447

这是您可以添加到控制器以使“引用值”返回完全匹配的内容。

```
 @search = Program.search do
     fulltext params[:search].gsub( '"', '"\\' ) unless params[:search].blank? 
     //...
  end 
```

如果您正在搜索这样的文本...

```
the fox jumped over the tree 
```

*   搜索**fox over** 将返回 1 行。

*   然而，搜索**“fox over”**（引号）将返回 0 行。

*   搜索**“fox jumped”**（也在引号中）将返回 1 行。这是完全匹配的。

# django - Django FormWizard.as_view condition_dict callable 多次调用？

> ID：12006878
> 
> 赞同：3
> 
> 时间：2012-08-17T13:35:40.373
> 
> 标签：django, formwizard

以下是我如何设置 FormWizard 的片段。当我点击这个视图函数时，“bar”被打印一次，“foo”被打印 7 次：

```
# views.py
def _show_repair_item_form_condition(wizard):
    print 'foo'
    return True

@login_required
def workshop(request):
    print 'bar'
    cw = WorkshopWizard.as_view([WorkshopRepairItemFormSet, EmptyForm], condition_dict={'0': _show_repair_item_form_condition})
    return cw(request) 
```

我查看了 as_view 函数的实现，找不到任何导致这种情况发生的错误痕迹。网络上也没有关于此问题的文档。

有任何想法吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T14:24:12.890

我知道这是一个迟到的答案，但这不是一个错误，没有什么可担心的。查看条件函数的调用堆栈，您会在wizards/views.py 中找到调用：`callable(condition)`当然`condition = condition(self)`两者都调用了该函数。对于前者，`wizard.storage.current_step`将是`None`。这是 Django 1.6 的源代码：

```
def get_form_list(self):
    """
    This method returns a form_list based on the initial form list but
    checks if there is a condition method/value in the condition_list.
    If an entry exists in the condition list, it will call/read the value
    and respect the result. (True means add the form, False means ignore
    the form)

    The form_list is always generated on the fly because condition methods
    could use data from other (maybe previous forms).
    """
    form_list = SortedDict()
    for form_key, form_class in six.iteritems(self.form_list):
        # try to fetch the value from condition list, by default, the form
        # gets passed to the new list.
        condition = self.condition_dict.get(form_key, True)
        if callable(condition):
            # call the value if needed, passes the current instance.
            condition = condition(self)
        if condition:
            form_list[form_key] = form_class
    return form_list 
```

# linux - SVN/TRAC 提交后挂钩错误

> ID：12006879
> 
> 赞同：1
> 
> 时间：2012-08-17T13:35:44.570
> 
> 标签：linux, svn, unix, trac, post-commit

我是管理 SVN 和 Trac 的新手（目前正在学习如何）。我们有一个票务系统设置，因此用户需要为每个提交留下评论，至少需要一个票证参考号。除了用户收到如下所示的提交后挂钩错误外，一切似乎都正常工作：

![在此处输入图像描述](../Images/1fe39c236b658574682f4cad0dbc8bbf.png)

我一直在摸索 SVN 中的提交后挂钩脚本，但到目前为止还没有多少运气。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:22:41.940

在 Trac 更改后，这似乎是一个问题 - 我发现了相关[问题](http://trac-hacks.org/ticket/8617)*. 发现*trac.ini*中的**repository_dir**为空，导致该错误。

 *> Trac 12 更改了存储库的设置方式，允许单个 trac 实例有多个存储库。repository_dir 键不再是在 trac 中配置存储库的唯一方法，但以前是配置存储库的“方式”。

*   使用谷歌缓存检索页面*

# python - 用于参数的 matplotlib 滑块

> ID：12006883
> 
> 赞同：1
> 
> 时间：2012-08-17T13:35:55.090
> 
> 标签：python, numpy, matplotlib

我一直在尝试用两个参数绘制一个函数，这些参数可以变化以查看不同的行为。我想使用滑块来改变参数。

在我的搜索中，我遇到了改变轴但不是数学函数部分的滑块。

因此，如果我的两个参数 Gmax 和 Km 是轴，我有以下代码应该可以工作：

```
 from matplotlib.widgets import Slider
    import numpy as np

    Gmax=1
    Km= 1

    def f(S):
        s1 = Gmax*S  #G_max
        e1 = S + Km #K_m
        return divide(s1,e1)

    S=arange(0,100,0.1)

    ax = subplot(111)
    subplots_adjust(left=0.15, bottom=0.25)
    l = plot(f(S))
    grid(False)
    title('Playing with sliders')
    xlabel('time')
    ylabel('concentration')

    axcolor = 'lightgoldenrodyellow'
    axGmax = axes([0.15, 0.1, 0.65, 0.03], axisbg=axcolor)
    axKm = axes([0.15, 0.15, 0.65, 0.03], axisbg=axcolor)

    sGmax = Slider(axGmax, 'Gmax', 0.1, 3.0, valinit=1)
    sKm = Slider(axKm, 'Km', 0.01, 1.0, valinit=1)

    def update(val):
        s1 = Gmax*S * sGmax.val 
        e1 = S + Km * sKm.val
        l.set_ydata(y)    
        ax.set_ylim(y.min(), y.max())  
        draw()

    sGmax.on_changed(update)
    sKm.on_changed(update)

    show() 
```

所以我想我的问题是是否有参数命令而不是轴滑块的 ax 命令？或者如果有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:24:01.033

您的代码几乎是正确的，但您应该更改`l = plot(f(S))`为，`l, = plot(f(S))`因为 plot() 返回一个列表。然后您可以调用`l.set_ydata(...)`设置新值。

这是代码：

```
import matplotlib.pyplot as plt
import pylab
import numpy as np

def f(S, Gmax, Km):
    s1 = Gmax*S   # G_max
    e1 = S + Km  # K_m
    return np.divide(s1, e1)

def update(val):
    l.set_ydata(f(S, sGmax.val, sKm.val))

S = np.arange(0, 100, 0.1)

ax = plt.subplot(111)
plt.subplots_adjust(left=0.15, bottom=0.25)
l, = plt.plot(f(S, 1.0, 1.0))
plt.grid(False)
plt.title('Playing with sliders')
plt.xlabel('time')
plt.ylabel('concentration')

axcolor = 'lightgoldenrodyellow'
axGmax = plt.axes([0.15, 0.1, 0.65, 0.03], facecolor=axcolor)
axKm = plt.axes([0.15, 0.15, 0.65, 0.03], facecolor=axcolor)

sGmax = pylab.Slider(axGmax, 'Gmax', 0.1, 3.0, valinit=1)
sKm = pylab.Slider(axKm, 'Km', 0.01, 1.0, valinit=1)

sGmax.on_changed(update)
sKm.on_changed(update)

plt.show() 
```

# java - JDBC连接打开还是关闭？

> ID：12006891
> 
> 赞同：0
> 
> 时间：2012-08-17T13:36:33.857
> 
> 标签：java

我有一个带有 JDBC 连接的 Java 应用程序，它执行许多不同的任务。我的问题是什么最适合性能：

*   在应用程序运行期间打开连接？
*   根据执行的任务关闭并重新打开连接并创建新的连接变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:39:19.747

连接重用是最好的方法，因为每次打开一个新连接都不是一个轻量级的操作。
这就是为什么会有[连接池](http://en.wikipedia.org/wiki/Connection_pool)。您有一组由池缓存和管理的连接。每次您获得连接并将其返回时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:45:31.407

您应该考虑重新使用连接，而不是每次都创建一个新连接

我推荐了 Semaphore 类来管理[连接](http://www.javamex.com/tutorials/synchronization_concurrency_semaphore2.shtml)；

# python - Amazon S3 Python S3Boto 403 当签名有“+”号时被禁止

> ID：12006894
> 
> 赞同：6
> 
> 时间：2012-08-17T13:36:48.443
> 
> 标签：python, django, amazon-s3, amazon-web-services, boto

我正在使用`Django`并且`S3Boto`每当签名中有`'+'`签名时，我都会得到一个`403 Forbidden`. 如果`'+'`签名中没有签名，我就可以得到资源。这里有什么问题？

**更新：**

回购位于：[https ://github.com/boto/boto](https://github.com/boto/boto)

相关文件是：

```
boto/utils.py
boto/s3/connection.py 
```

**注意：** 我对 Python 很陌生。我尝试修改代码，但仍然无法正确完成编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:35:09.857

我的时间有点短（因为现在是凌晨 1:30），所以很遗憾我还没有给你的代码示例，但我相信这是因为应该对 URL 中的值 + 进行编码。所以从github，你的网址......

```
https://s3.amazonaws.com/dragonflysco/static/js/plugins/blockui.js?Signature=+tahbTacs5Vkzt5jQ+hZULzGPhE=&Expires=1345019173&AWSAccessKeyId=AKIAJNCPYIZVZXKOPCHA 
```

真的应该

```
https://s3.amazonaws.com/dragonflysco/static/js/plugins/blockui.js?Signature=%2BtahbTacs5Vkzt5jQ+hZULzGPhE=&Expires=1345019173&AWSAccessKeyId=AKIAJNCPYIZVZXKOPCHA 
```

（注意：我用 %2B 替换了 +）

见[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

为了修复代码，我将添加一个 URLEncoding 函数来构建 URL 查询字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:39:29.697

简而言之，问题不在于 S3Boto，而在于稍后在 url 上发生的一些“取消引用”调用。

我在这里回答了一个类似的问题：

[不一致的 SignatureDoesNotMatch Amazon S3 与 django-pipeline、s3boto 和存储](https://stackoverflow.com/questions/11820566/inconsistent-signaturedoesnotmatch-amazon-s3-with-django-pipeline-s3boto-and-st/12262106#comment16459418_12262106)

请在那里查看我的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:05:26.327

我刚刚提交了我希望在 boto 中解决此问题的方法。请参阅[https://github.com/boto/boto/commit/a01a5d1a1e88f79ed5db52639d3674d9eb5e45dc](https://github.com/boto/boto/commit/a01a5d1a1e88f79ed5db52639d3674d9eb5e45dc)。请让我知道这是否可以解决问题。

# css - 使用什么作为网站大小？

> ID：12006895
> 
> 赞同：0
> 
> 时间：2012-08-17T13:36:49.093
> 
> 标签：css

我正忙于建立一个网站，我想我应该使用什么作为高度/宽度？

然后我有点困惑，我听到每个人都说 1024 * 768 .. 但是哪个是宽度，哪个是高度..

是这样：高度 1024 * 宽度 768 还是宽度 1024 * 高度 768？

或者是否有新的更好的规模来构建您的网站？

如果我错过了重复，请发布它，我会在那里查找。

PS感谢大家在此之前对我的所有问题的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:39:05.820

他们的意思是：

> 宽度 = 1024 像素
> 
> 高度 = 768 像素

一般`x * y`是指`width * height`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:39:16.273

第一个是宽度。

“新的更好的尺寸”是使所有尺寸的网站规模都超过一些荒谬的最小值。这也将使其可访问和可缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:39:52.343

1024 宽和 768 高。它在PC、笔记本电脑上的标准分辨率。建议创建适合其分辨率的网站。

# php - php注册脚本相同的昵称

> ID：12006901
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:37:00.187
> 
> 标签：php, letters

我想知道如何检查我的数据库中是否存在登录名。此时我正在使用`mysql_num_rows()`，但两个小时前我意识到这对我的网站不安全，因为如果我用昵称注册：Paul 和我的朋友用昵称注册：PauL，我的网站让注册这些昵称......我不知道如何检查单词是否等于同一个单词只是不同的字母......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:45:14.850

假设您的意思是大写和小写的混合。例如， paul,Paul,PAUL,pAUL 在数据库中应视为单个名称。

然后，您应该使用此 sql 查询来检查名称是否已经存在：

```
SELECT * FROM table1 WHERE LOWER(table1.nickname) = LOWER('PaUl') 
```

这会将“昵称”列中的数据转换为小写，并在执行相等检查之前将“PaUl”转换为小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:39:14.007

```
SELECT whatever FROM users WHERE UCASE(username) = 'USERNAMEINUPPERCASE'; 
```

基本上，如果您使用该`UCASE()`函数，则将表中的用户名（为了查询）转换为大写，然后与您想要的大写版本进行比较，使您的查询不区分大小写。

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:39:26.490

在进行比较之前，请`strtolower()`在两个变量上使用该函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:39:36.533

您可以在`SELECT`查询中定义它

```
SELECT * FROM `table` WHERE LOWER(`Nickname`) = LOWER($nickname) 
```

但取决于您的排序规则`*_ci`是否区分大小写或`_cs`区分大小写。如果你有`*_ci`你没有什么可担心的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T13:44:40.397

首先，用户名应该是唯一的并且不区分大小写；在数据库中将用户名的字段排序规则设置为 utf8_unicode_ci 或 utf8_general_ci。

然后运行您当前的查询。

```
SELECT * FROM users WHERE username = '$_var' 
```

# javascript - 使用 HTML 数据检测 ANDROID 中的 WebView 点击

> ID：12006905
> 
> 赞同：0
> 
> 时间：2012-08-17T13:37:18.037
> 
> 标签：javascript, android, html, webview, onclick

我正在尝试查找用户是否单击了 android 中的 webview。WebView 包含一些加载的 html/javascript。我想知道用户是否点击了 webview。

谢谢您的帮助。

代码是这样的：

//....//

```
 wv = (WebView) findViewById(R.id.webView1);

    wv.getSettings().setJavaScriptEnabled(true);

    wv.setBackgroundColor(Color.TRANSPARENT);
    String html = "<html><body style='margin:0;padding:0;'><script='text/javascript' src='URL'></script></body></html>";

    wv.loadData(html, "text/html", "utf-8"); 
```

//....//

谢谢您的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T09:35:20.643

在您的 android 应用程序中创建处理程序，例如

```
wv.addJavascriptInterface(new JavaScriptHandler(this),"MyHandler"); 
```

并在您的 HTML 中使用带有您的 android 处理程序的动作侦听器回调方法，然后您可以从 android 监控您的 webview 活动[类似的示例在这里](http://blog.objectgraph.com/index.php/2012/03/16/android-development-javascript-bridge-example-fully-explained/)

# html - 如何在小屏幕上显示表格

> ID：12006914
> 
> 赞同：0
> 
> 时间：2012-08-17T13:37:49.973
> 
> 标签：html, forms, mobile

我正在尝试创建一个可以在移动设备上轻松显示的网页，但我遇到了麻烦，希望有人能指出我正确的方向。请理解，我是编程新手，并且正在学习。

不幸的是，我无法在这里显示我的代码，但这里有一个指向相关页面的链接：

[移动设备表格](http://cigarpipesmokerinsurance.com/mobile.html)

有没有人看到任何会阻止我的表单在较小的屏幕上显示而无需使用滚动条的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:49:05.727

我建议您放弃表单的固定宽度表格布局，而改用自然流动布局。以下是前几个字段的示例：

```
<form name="contactinfo" method="post" action="process.php" onsubmit="return validateForm();">
    <fieldset>
        <legend>Application Request Form</legend>
        <div>
            <label for="name">Full Name</label><br>
            <input type="text" name="name" id="name">
        </div>
        <div>
            <label for="email">E-Mail</label><br>
            <input type="email" name="email" id="email">
        </div>
        ...
    </fieldset>
</form> 
```

这将立即帮助布局适应不同的设备，它也是表单的更好标记。

其他建议：

*   将所有样式放在 CSS 中。
*   将您的 JavaScript 移动到页面底部（即验证功能）
*   考虑一下你是否真的需要一个重置按钮？它的用例是什么？

# git - 提交代码时多久评论一次？

> ID：12006915
> 
> 赞同：4
> 
> 时间：2012-08-17T13:37:50.907
> 
> 标签：git, svn, comments

**COMMENTING**提交的最佳实践是什么？

一点背景。

*   我们所有的项目都使用版本控制（Subversion / SVN / Git），
*   他们中的大多数都被 2 个或更多的开发人员所触动，
*   我们使用 Springloops 来托管我们的版本控制，因为它*“正常工作”*并且比让内部开发人员维护它更便宜，
*   因为我们的许多客户都有特殊的设置，而且为多个用户设置这些环境是可行的，所以我们很少为本地开发环境而烦恼。大多数客户在云中都有一个开发位置，然后是一个实时位置。Springloops 被配置为自动将每个提交推送到开发服务器，并且开发人员必须手动推送到实时位置。

我们的政策是评论您提交的所有内容，但我们中的一些人最近*反对*这个想法。

评论所有内容的问题是双重的，它的工作量更大，用处也更少。以下是我们看到的问题：

1.  它鼓励人们发表评论，涵盖已经在版本控制中的内容（即我将第 42 行更改为废话）。您可以进行比较以获得相同的信息！

2.  或者，它会用无用的评论填充您的评论流，如果您想搜索评论，这将是一个巨大的痛苦。

    *   *IE8 的边距问题*
    *   *IE8 中对边距的另一个修复*
    *   *恢复上一个修复并在 IE8 中尝试其他有边距的东西*

这些事情中的任何一个都只会增加很多时间，并且不会增加任何价值。仅当评论足够具体且足够稀有以至于您可以扫描所有内容时，评论才有用。

我们被告知 Git 以比 Subversion 更智能的方式处理这个问题，我们愿意改变，显然拥有一个本地开发环境并且只提交批量更改也会有所帮助，但根据我们的用例，这可能是效率方面的净损失。

我很想听听人们评论提交的最佳实践是什么，感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T13:53:38.373

Git 不会为你解决问题；你需要回答这个“简单”的问题：如何增加评论的价值？

一些指导方针：

1.  不要在评论中提及提交本身显而易见的任何内容（例如更改了哪一行）。现代工具将在屏幕上并排显示提交消息和提交。重复工作是没有意义的。

2.  相反，解释你为什么做出改变——这通常并不明显。是错误报告吗？包括错误的 ID。是不是你发现了什么？

3.  如果您发现自己经常处于必须在一次提交中提交多个修复的情况，那么您需要学会集中注意力。更改代码时不要随心所欲。做一件事，完成它，提交它。然后做接下来的事情。

    如果您在途中偶然发现某事，请记下（在纸上或在您一直悬停在屏幕一角的额外文本编辑器中）。**不要总是打扰你的工作！**多任务/递归代码编辑对质量和压力水平有严重影响。

你仍然会得到一长串“Fixed IE8 margin”提交，但这本身不是问题。当您说“我们要搜索评论”时，您必须想出一种方法将有用的信息放入评论中，以使搜索变得合理。例如，始终对错误 ID 使用相同的格式。纯文本不利于搜索，尤其是应该简洁的提交消息。

只是省略评论不是解决方案，它要么是懒惰，要么是反社会的标志（“谁在乎别人是否对此有问题？”）或训练不佳（“我不知道该写什么”）。

第一个和最后一个可以通过训练来解决。第二个是摆脱风险（即解雇那个人）。

世界上没有任何版本控制工具可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:52:44.530

我的经验法则是，如果我不能用不到两句话总结提交的更改，那么距离上次提交的时间太长了。

至于在那句话中写什么，我从不说任何特定于行或特定于文件的内容，因为该信息嵌入在提交中。我通常会用简单的英语提到具体的变化，就像我会向不属于该项目的人解释它一样。

这非常有效，因为无论是我还是其他人几个月后，他们都可以阅读提交日志，就像项目如何开发的故事一样。我什至写过一些只是复制和粘贴我的提交日志的博客文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T13:41:35.537

我的理念是：

1.  尽快提交
2.  提交前更新和构建
3.  提交前的差异
4.  不要破坏 BUILD：提交后更新并测试 BUILD

所有这些都是每个团队成员都必须遵守的个人纪律问题。如果人们破坏了构建，构建经理会“鼓励”在午夜唤醒他们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T13:43:03.683

所有签入都应该有注释，但它不应该真正模仿更改本身。注释应该是关于更改内容的快速一般注释，而不是更改实施的细节，正如您所说，可以在更改本身中找到。

# jquery - 列宽设置 - HTML 表格

> ID：12006917
> 
> 赞同：0
> 
> 时间：2012-08-17T13:38:02.483
> 
> 标签：jquery, html, css

我有一个 HTML 表格，如[http://jsfiddle.net/Lijo/JN8Pm/1/](http://jsfiddle.net/Lijo/JN8Pm/1/)所示。该表由asp.net中的gridview生成。因此，我不能在“tr”中向“td”添加一个类。【这是很多论坛的建议；但由于gridview，这对我不起作用]

我怎样才能

1.  将 Emp ID 列的背景颜色设置为红色？
2.  将 Emp ID 列的宽度设置为 300px？

**参考**：

请参阅以下两个表格样式

```
1\. table-layout:fixed;
2\. word-wrap:break-word; 
```

1.  [在表格中使用“自动换行：断词”](https://stackoverflow.com/questions/5889508/using-word-wrap-break-word-within-a-table)
2.  [HTML 表格中的自动换行](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)
3.  [使用 jQuery 调整 HTML 表格单元格宽度](https://stackoverflow.com/questions/10993901/adjusting-html-table-cell-width-using-jquery)
4.  [当总宽度超过 100% 时表格单元格被隐藏](https://stackoverflow.com/questions/13599659/table-cells-get-hidden-when-total-width-is-more-than-100)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:54:17.250

您可以在此处查看实时示例：http: [//jsfiddle.net/JN8Pm/8/](http://jsfiddle.net/JN8Pm/8/)

```
var table = $('#detailContentPlaceholder_grdTransactions'),
    trs = table.find('tr'),
    headTr = table.find('.second'),
    empHeader = $($(headTr).children('th')[1]);

table.width(table.width() + 300);

empHeader.css('background-color', 'red');
empHeader.width(300);

for (var i = 2; i < trs.length; i += 1) {    
    var td = $($(trs[i]).children('td')[1]);
    td.css('background-color', 'red');
    td.width(10);
}​ 
```

它正在改变 EmplID 列的颜色和大小。我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:51:01.073

你可以使用 jquery 做这样的事情

```
 $('tr').each(function(index) {
     if (index > 1){
        $($(this).children()[1]).css("background-color","Red");

     }
     $($(this).children()[1]).css("width","300px");
}); 
```

[http://jsfiddle.net/JN8Pm/6/](http://jsfiddle.net/JN8Pm/6/)

宽度变化在 jsfiddle 中似乎并没有真正起作用，但它应该是这样的

# sql - 如何遍历对象并插入 SQL Server 2008

> ID：12006919
> 
> 赞同：1
> 
> 时间：2012-08-17T13:38:12.060
> 
> 标签：sql, vb.net, sql-server-2008

我正在使用`VB.NET`AND`SQL SERVER 2008`

我有我需要的对象数组，`INSERT`这`SQL SERVER 2008`是对象![在此处输入图像描述](../Images/58f9da70465f7aabeb092b24dfddae65.png)

这个对象将`Inserted`在三个表中：

*   第一个表将包含报告信息：[id ,reportName , description , style ] 插入此信息后，我将使用第二个表的`@@IDENTITY`this`Row``FK`

*   第二个表：[id，id_first_table，comment，complete，finished，name，started，outcome]

**问题**将与第三个表一起出现我如何循环检查清单`Element`并使用第二个表 ID 将其插入到第三个表中，直到元素末尾

像 ：

```
 [id , id_second_table, 101 ,820] 
 [id , id_second_table'sameid', 101,831] 
```

这是我尝试过的：

```
 DECLARE @reportId INT , @fieldId INT  

 INSERT INTO    
 dbo.tblReport(strReportName,strReportDescription,strReportStyle,
 strScource,dtmCreated)
 VALUES ('caustic' , 'titration caustic', 'simple table' ,'user' ,  getdate()) 
 SELECT @reportId = @@IDENTITY

 INSERT INTO dbo.tblReportFields   
 (lngReports,strFieldName,bolComment,bolComplete,bolFinished,
 bolOutCome,bolStarted,bolUser)
 VALUES (@reportId ,'caustic titration' , 1,0,1,0,0,0)
 SELECT @fieldId = @@IDENTITY 

 --LOOP AND INSERT ALL THE checklist Element 

  INSERT INTO dbo.tblReportTask (lngReportFields,lngChecklist,lngTask)
  VALUES (@fieldId, 814 , 1443) 
```

任何关于这样做的最佳方式的想法也将被考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:06:28.883

好的，您的信息有点难以处理，因为您的对象和 SQL 语句不完全匹配。但是，这基本上是您的操作方式。我希望你能把它和你的问题联系起来。

这就是插入 Report 和 ReportFields 表的方式。我没有包含 ReportFields 表的 SQL，因为它类似于 Report 之一。

```
 Dim reportID As Integer = 0
  Dim fieldID As Integer = 0
  Using tmpCONN As New SqlConnection(tmpConnStr)
    Dim tmpSQL As New StringBuilder
    tmpSQL.AppendLine("INSERT INTO dbo.tblReport(strReportName,strReportDescription,strReportStyle,strScource,dtmCreated) ")
    tmpSQL.AppendLine(" VALUES ")
    tmpSQL.AppendLine("(@NAME, @DESC, @STYLE, @SOURCE,@CREATED); ")
    tmpSQL.AppendLine("SELECT SCOPE_IDENTITY() AS ScopeID; ")
    Using tmpCMD As New SqlCommand(tmpSQL.ToString, tmpCONN)
      tmpCMD.Parameters.AddWithValue("@NAME", Obj.Name)
      tmpCMD.Parameters.AddWithValue("@DESC", Obj.Description)
      tmpCMD.Parameters.AddWithValue("@STYLE", Obj.Stype)
      tmpCMD.Parameters.AddWithValue("@SOURCE", Obj.Source)
      tmpCMD.Parameters.AddWithValue("@CREATED", Date.Now)
      reportID = tmpCMD.ExecuteScalar
    End Using

    'Do same type of insert here for the ReportFields table.  Instead of reportID,'
    'it would return fieldID.'

    'This is the loop to insert to Tasks'
    For Each chk As chkObj In Obj.Checklist
      tmpSQL = New StringBuilder
      tmpSQL.AppendLine("INSERT INTO dbo.tblReportTask (lngReportFields,lngChecklist,lngTask) ")
      tmpSQL.AppendLine(" VALUES ")
      tmpSQL.AppendLine("(@FIELD_ID, @CHECK_ID , @TASK) ")
      Using tmpCMD As New SqlCommand(tmpSQL.ToString, tmpCONN)
        tmpCMD.Parameters.AddWithValue("@FIELD_ID", fieldID)
        tmpCMD.Parameters.AddWithValue("@FIELD_ID", chk.cl_id)
        tmpCMD.Parameters.AddWithValue("@FIELD_ID", chk.ts_id)
        tmpCMD.ExecuteNonQuery()
      End Using
    Next
  End Using 
```

# java - 在android中20秒后终止无限循环

> ID：12006922
> 
> 赞同：0
> 
> 时间：2012-08-17T13:38:16.537
> 
> 标签：java, android, time, timer

我有一个无限 for 循环，我想运行这个 for 循环 20 秒，然后我想终止循环，那么我该怎么办？

这是我在android中的代码：

```
do {
    rl += Character.toString((char) in.read());
    // Log.i("RL", "" + rl);
    if (rl.contains("<") && checkStream(rl)) {
        // Log.i("RL INSIDE", "" + rl);
        getNumerAndStatusFromRLString(rl);
        rl = "";
    }
    if (20 SECONDS COMPLETED) {
        Log.i("<rl>", "exit");
        break;
    }
} while (true); 
```

那么我能做些什么来检查 20 秒是否已完成，现在该终止了。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:40:53.057

我认为其中一个选项可能是在循环之前获取时间，而循环检查是否经过 20 秒。

如下所示：不确定效率。

```
 long startTime=   System.currentTimeMillis();
do {

......

     long currTime=  System.currentTimeMillis();
     long elapsedtime = currTime - startTime;
     if(elapsedtime > 20000)
      {
      break;
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:02:17.657

使用[计时器任务](http://developer.android.com/reference/java/util/Timer.html)，您可以指定任务运行的时间长度。

**一个警告购买者**：使用的这组函数需要重复频率，但作为一次性定时的事情，您可以通过使用可以发出取消信号的处理程序来绕过它！

一个例子是这样的：

```
private Timer myTimer = new Timer();
private final int CANCEL_EXECUTION = 0x100;
private Handler myHandler = new Handler();

public void runFor20Sec(){
   myTimer.schedule(new TimerTask(){
       @Override
       public void run(){
          // Do something here
          myHandler.obtainMessage(CANCEL_EXECUTION).sendToTarget();
       }
    }, System.currentTimeMillis(), 2000);
}
public class myHandler extends Handler{
    @Override
    public void handleMessage(Message msg){
        switch(msg.what){
           case CANCEL_EXECUTION :
               myTimer.cancel();
               break;
        }
    }
} 
```

# java - Asp.net 中的 NTLM 身份验证

> ID：12006923
> 
> 赞同：1
> 
> 时间：2012-08-17T13:38:24.043
> 
> 标签：java, asp.net, single-sign-on, windows-authentication, ntlm

看完[这篇文章](http://msdn.microsoft.com/en-us/library/ff647076.aspx)。我有一些关于 NTLM 身份验证的问题。

当我在 asp.net 网站中应用 NTLM 时

1.  质询/响应过程是否发生在 Web 浏览器和 IIS 之间？
2.  验证成功后，客户端中存储的凭据在哪里？因为在那之后，我不再需要输入用户名和密码了。所以我认为存储的凭据必须传递给服务器才能以某种方式进行身份验证。
3.  我可以只使用 SSO 的可用凭据吗？如果可以，如何制作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:05:13.977

1.  是的，IIS 向客户端发送质询，您的 Web 浏览器将根据质询计算响应。

2.  这取决于浏览器。它*应该*在内存中缓存您提供的凭据，以便它可以响应未来的挑战。

3.  这也取决于浏览器。Windows 上的某些浏览器使用该[`InitializeSecurityContext`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375506%28v=vs.85%29.aspx)功能执行 NTLM/SPNEGO 身份验证。在这种情况下，如果您与远程计算机有信任关系或者您有“影子帐户”设置（这样您在本地和远程计算机上具有相同的用户名/密码），则应该可以使用单点登录。某些浏览器，但是，请使用他们自己的 NTLM 库，而不是使用系统身份验证机制，例如 Firefox。在这种情况下，单点登录不可用。

# r - 绘制多个变量：标签点

> ID：12006928
> 
> 赞同：2
> 
> 时间：2012-08-17T13:38:44.943
> 
> 标签：r, variables, plot, label

我有一个包含 10-15 个条目的 data.frame，如下所示：

```
 group time1     time2    time3 
1      F18  4394.500  21043.50 14949.00 
2      F25  4678.000  23727.65 15683.12 
3      F30  4909.775  23487.60 16724.40 
```

我用以下方式绘制：

```
plot(variable[,2:4]) 
```

这样就出现了 time1、time2 和 time3 的 3 行 3 行图。

是否可以使用存储在组（F18，F25 ...）中的值来标记数据点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:20:00.623

我还建议使用 ggplot2（或 lattice）。

但是，您可以

*   用于`text`在给定位置显示标签文本

*   根据组使用颜色（仅当组相对较少时才有意义

*   请注意，`plot (data.frame)`实际使用`pairs`.

放在一起：

```
df <- data.frame (group = sample (LETTERS[1:3], 10, replace=TRUE), 
                  x = rnorm (10), y = runif (10), z = rnorm (10))

panel.text <- function(x, y, text, ...)
  text (x, y, labels = text)

pairs (df[-1], text = df$group, lower.panel = panel.text, # label with name
    pch = 20, col = as.numeric (df$group))                # label with color 
```

![配对面板功能](../Images/c7b8d70767c851bbfeabbf3b7171ad92.png)

# android - 单击时更改文本和行颜色

> ID：12006931
> 
> 赞同：0
> 
> 时间：2012-08-17T13:38:55.713
> 
> 标签：android, android-layout, android-listview

我的自定义适配器中有这些代码行：

```
int colorPos = position % colours.length;
vi.setBackgroundColor(colours[colorPos]); 
```

`colours`定义如下：

```
private int[] colours = new int[] { R.drawable.row_colour, R.drawable.row_colour2 }; 
```

我使用它，因此当用户单击我的其中一行时，背景颜色会发生变化。我有每一行交替的颜色，所以这就是为什么有两个`R.drawable.row_colour`s。初始颜色应该是灰色的，但所有的行都是黑色的。当我点击每一行时，它会变成这种棕色。这是我的 row_colour 和 row_colour2 代码：

**行颜色**

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_focused="true" android:state_pressed="false" android:color="#ABCC2A" />
  <item android:state_focused="true" android:state_pressed="true" android:color="#ABCC2A" />
  <item android:state_focused="false" android:state_pressed="true" android:color="#ABCC2A" />
  <item android:color="#424242" />
</selector> 
```

**行颜色2**

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_focused="true" android:state_pressed="false" android:color="#ABCC2A" />
  <item android:state_focused="true" android:state_pressed="true" android:color="#ABCC2A" />
  <item android:state_focused="false" android:state_pressed="true" android:color="#ABCC2A" />
  <item android:color="#1B1B1B" />
</selector> 
```

我需要更改背景的颜色，但是使用此代码无法正常工作。我需要这些行在它们被点击时和`#424242`之间交替。提前感谢您提供的任何信息`#1B1B1B``#ABCC2A`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:57:02.643

如果您从适配器中的方法 getView 以编程方式更改颜色，则必须通过 set 方法或其他方法更新适配器中的状态...然后调用强制 ListView 重绘其状态的函数，因此通过在适配器上调用 getView 来重建列表项。我尝试了 ListView.invalidate() 并且它有效，但 BaseAdapter.notifyDataSetChanged() 也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:09:47.330

假设您希望颜色仅在用户按下项目时暂时改变，只需删除 state_focused 元素，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" android:color="#ABCC2A" />
  <item android:color="#424242" />
</selector> 
```

但是，如果您希望颜色保持更改，则需要扩展适配器或列表并存储已选择的项目，或者扩展每个项目的根布局以存储是否已选择。然后，在您的自定义适配器中，在提供视图时，查询此信息并修改背景颜色以适应。总而言之，实现本应简单的事情的一种混乱而复杂的方式。我听说另一种方法是在您的项目的扩展根布局中实现 Checkable 接口，但个人从未在此方面取得成功。

# c# - 想知道为什么在派生类和基类中没有命中静态构造函数

> ID：12006936
> 
> 赞同：1
> 
> 时间：2012-08-17T13:39:13.930
> 
> 标签：c#, .net, oop, c#-4.0, constructor

这是我帮助自己理解处理许多场景的构造函数的一个小示例。我很惊讶为什么这个场景中的静态构造函数根本没有受到影响。

我非常了解静态构造函数，甚至体验过它们的工作方式。我知道，首先是派生类中的静态构造函数被命中，然后是基类中的静态构造函数，然后是任何其他构造函数。但是我不知道为什么在这种特殊情况下，我“ENFORCE”基类参数化构造函数起作用，这是静态构造函数没有被命中的原因吗？这是我可以怀疑/理解的，但是我可能错了。但我不能同意这一点，如果这将成为原因。

这是我现在在 VS 2010 中工作的代码：

```
 public class MyBaseClass
    {
        public MyBaseClass(int x)
        {
        }
        static MyBaseClass()
        {
        }
    }

    public class MyDerivedClass : MyBaseClass
    {
        public MyDerivedClass(int i)
            : base(5)
        {
        }
        public MyDerivedClass() : base(2)
        {
        }
        static MyDerivedClass()
        {
        }
        public static void Main()
        {
            new MyDerivedClass();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-01T08:30:22.527

我不明白为什么 series0ne 的答案是 -ve 标记的。这是对构造函数如何工作的详细解释，并附有示例。

但是，我想指出的一件事是，除了默认/特定构造函数之外，还将调用基类和派生类的静态构造函数，只需将“new B()”作为唯一语句即可。您无需声明 A 类型（或 B 类型）的变量并分配给它以确保调用 base 的静态构造函数。（矛盾的评论 - series0ne 2012 年 8 月 17 日 14:09）

以下是一个示例（我写来验证）及其结果：

```
class A
{
    static A()
    {
        Console.WriteLine("Static A.");
    }

    public A()
    {
        Console.WriteLine("Non-Static A.");
    }
}

class B : A
{
    static B()
    {
        Console.WriteLine("Static B.");
    }

    public B()
    {
        Console.WriteLine("Non-Static B.");
    }
}

void Main()
{
    new B();
}

Static B.
Static A.
Non-Static A.
Non-Static B. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T13:53:57.217

**编辑 - 不一致和不完整的测试导致我的答案不正确，为了清晰、简洁和正确的答案，这篇文章已经完全更新。**

**静态和非静态构造函数的区别：**

在第一次使用对象之前会自动调用静态构造函数。它的目的是在自身的任何实例化发生之前设置自身的任何静态字段/属性/对象（等）。因此，如果我将类 A 定义为具有静态构造函数，并创建 A 的实例，则静态构造函数将在实例化 A 之前执行。

例如，假设我构造了 A 的两个实例，我只看到 A 的静态构造函数一次......为什么！？因为对于特定的对象类型，静态构造只需要发生一次。除此之外，执行静态构造毫无意义，因为它已经完成了！

**考虑本练习的以下代码：**

```
 public class A
    {
        static A()
        {
            Console.WriteLine("Hello from static A");
        }

        public A()
        {
            Console.WriteLine("Hello from non-static A");
        }
    }

    public class B : A
    {
        static B()
        {
            Console.WriteLine("Hello from static B");
        }

        public B() : base() //explicit so you know B() will call A()
        {
            Console.WriteLine("Hello from non-static B");
        }
    } 
```

**考虑以下 A 的实例化及其结果：**

```
class Program
{
    static void Main(string[] args)
    {
        A instance_1 = new A();

        Console.Read();
    }
} 
```

**结果：** *来自静态 A 的 Hello，来自非静态 A 的 Hello*

由于 A 在本例中被实例化一次，因此调用静态 A，然后调用非静态 A

**考虑以下 A (x2) 的实例化及其结果：**

```
class Program
{
    static void Main(string[] args)
    {
        A instance_1 = new A();
        A instance_2 = new A();

        Console.Read();
    }
} 
```

**结果：** *来自静态 A 的 Hello，来自非静态 A 的 Hello，来自非静态 A 的 Hello*

由于 A 被实例化了两次，因此静态 A 被调用一次（因为静态 A 是一次性操作），非静态 A 被调用两次以创建 A 的两个实例

**考虑从 A 分配给 B 的以下实例及其结果：**

```
 class Program
    {
        static void Main(string[] args)
        {
            A instance_1 = new B();

            Console.Read();
        }
    } 
```

**结果：** *来自静态 B 的 Hello，来自静态 A 的 Hello，来自非静态 A 的 Hello，来自非静态 B 的 Hello*

现在 A 和 B 都是静态构造的（仅第一次），因为 B 是 A 的后代。这也很明显，非静态 B 调用非静态 A。因为 A 是祖先或 B

**最后考虑这个例子......**

```
class Program
{
    static void Main(string[] args)
    {
        A instance_1 = new B();
        B instance_2 = new B();

        Console.Read();
    }
} 
```

**结果：** *来自静态 B 的问候，来自静态 A 的问候，来自非静态 A 的问候，来自非静态 B 的问候，来自非静态 A 的问候，来自非静态 B 的问候*

同样，A 和 B 是静态构造的（仅一次），但非静态 A 和非静态 B 重复，因为它们现在是 B 的两个实例，因此对于对象的每个新实例都会发生非静态构造

值得注意的是，静态构造和非静态构造调用在继承中的工作方式似乎相反。IE 在最后一个例子中，静态 B 在静态 A 之前被调用，但是非静态 A 在非静态 B 之前被调用！

# css - DIVITIS 和使用多个类

> ID：12006942
> 
> 赞同：1
> 
> 时间：2012-08-17T13:39:25.043
> 
> 标签：css

我在 CSS 中创建了许多基本类，例如“rounded”、“hidden”、“red”、“floated”等……我像乐高积木一样使用它们，以获得所需的结果。为什么？因为我的网站是动态渲染的，而且它们可能有多种选择。我不想为每个可能的组合创建一个类，所以我决定创建多个类并将每个 div 分配给五个甚至六个不同的类。另一方面，我听说了 DIVITIS 问题。我知道我使用的所有 div 都是必需的。但我的问题是：

**这些事情有问题吗？我的意思是，为了在不同的设备上渲染它，或者渲染时间等等......**

***使用示例：***

```
<div class="block spgreen toprounded">
<div class="boxnm left nmquart blue mkPln btn topLrounded"><h1 class="pdg txtCenter">Inicio</h1></div>
<div class="boxnm left nmquart green mkPln btn active"><h1 class="pdg txtCenter">Navegar</h1></div>
<div class="boxnm left nmquart orange mkPln btn"><h1 class="pdg txtCenter">Aprender</h1></div>
<div class="boxnm left nmquart red mkPln btn topRrounded"><h1 class="pdg txtCenter">Compartir</h1></div>
</div> 
```

**编辑：**
每个 css 类的属性不超过 5 个。

**编辑2：**
我的设计基于“块”和“盒子”。块具有自动溢出功能，并且盒子总是浮动的。它们可以有 4 种不同的尺寸（宽度）：25%、50%、75%、100%。然后我创建了一个“魔法属性”列表，比如：阴影、圆角等等……为了像我一样控制所有的东西。问题是这对于谷歌索引我的页面是否是“错误的”，或让安卓手机渲染它，或或或...

*一些CSS可能是：*

```
div.block{ /* Block lines (will contain floated boxes) */
 position:relative;
 overflow:auto;
}
div.box{
 position:relative;
 margin:.5%; /* +1% (both-sides) */
}
 div.box.nm{
 margin:0;
}

/* Position */
.center{
 margin:.5% auto !important;
}
.left{
 float:left;
}
.right{
 float:right;
 text-align:right;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:44:44.170

就我个人而言，我更喜欢将 css 类命名为它们是什么，而不是它们的样子，例如：

```
<div class="menu">...
<label class="caption">... 
```

然后，我将创建一个设置为红色的类定义，并将所有类设置为它。

例如 .menu, .menu .caption{color:red};

等等等等

这样您就可以定义完全不同的样式，并且 css 命名保持不变。如果您有名为 的类`red`，`rounded`等等，您就会被这种样式所困扰，否则名称将变得毫无意义。

当然，这可能与您的“动态渲染”无关，但您还没有说这意味着什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:48:15.427

我想这与 Divitis 本身无关。[divitis](http://www.webdesignerdepot.com/2010/03/fight-div-itis-and-class-itis-with-the-960-grid-system/)的经典（嗯，more-o-less ...）定义是关于在不需要它们的地方使用包装器。当有人使用过多的通用容器，用类定义它们的语义时，它实际上被称为*classitis*。)

但我想在这里指出另一个问题：通过这种约定，您实际上将 CSS 作业（样式）...移回了 HTML。例如，如果您需要更改某些块的颜色，则无需触摸 CSS 文件 - 您可以编辑 HTML 本身（将“红色”类替换为“橙色”类）。我不认为这是 CSS 和 HTML 应该如何协作的方式，至少可以这么说。)

相反，在我们的环境中，我们使用逻辑块，但它们只是它 - 逻辑块。而且我们并不孤单：如果您仔细检查 Twitter Bootstrap 框架的约定，我猜您会看到相同的方法。HTML 中的逻辑块，CSS 中的样式——当然，也很少使用通用块。就我而言，一个有说服力的例子是 Bootstrap 的图标样式：当`<i>`使用元素而不是更通用的`spans`.

# android - Android - 停止 MediaPlayer 下载更多内容但继续播放缓冲内容

> ID：12006949
> 
> 赞同：1
> 
> 时间：2012-08-17T13:39:42.547
> 
> 标签：android, android-mediaplayer

我有一个 MediaPlayer，可以播放来自 URL 的内容，MP3 可以长达一个小时。显然，在播放时，MediaPlayer 会将内容进一步缓冲到 MP3 中。我想做的是在某些点停止 MediaPlayer 并允许它继续播放它已经缓冲的内容。那可能吗？我在文档中找不到任何使它看起来像的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:52:01.683

您可以播放部分下载的文件（至少它适用于视频文件）。下载直到达到所需的文件长度并开始播放本地文件。

# iphone - iOS Safari 不接受 3rd 方 cookie

> ID：12006953
> 
> 赞同：3
> 
> 时间：2012-08-17T13:39:59.950
> 
> 标签：iphone, ios, cookies, mobile-safari

我有一个向 Http 响应添加 cookie 的网络服务。请求有时可以是跨域的。我一直在寻找文章说 iOS Safari 当前默认阻止 3rd 方 cookie（将“接受 Cookie”选项设置为“我访问过的网站”）。

在我们的服务器 (domain.com) 上进行测试，并向我们的跨域服务 (tracker.domain.com) 执行请求时，它工作正常（即使我们先清除所有 cookie）。但是我们已将 Web 服务提供给具有相同设置的客户（html 页面在 domain.com 上，对我们服务的请求发送到 customer.domain.com），每个请求都会创建一个新会话。客户服务器为两台服务器的 IIS7 中的标头设置了正确的 p3p 策略。

为什么选择阻塞？

# ruby - 无法将 Fixnum 转换为字符串 (TypeError)

> ID：12006955
> 
> 赞同：2
> 
> 时间：2012-08-17T13:40:01.030
> 
> 标签：ruby

在一台电脑上我在 ruby​​ 1.8.6 上得到这个，在另一台电脑上我得到错误

```
irb(main):001:0> buff = "12345678"
 => "12345678"
 irb(main):002:0> buff[4] =0x30
  => 48
   irb(main):003:0> buff
 => "12340678"
 irb(main):004:0> @new0 = "123456789"
 => "123456789"
  irb(main):005:0> @new0[4] = 0x30 
 => 48

 > @buff ="123456789"
 => "123456789" 
  > @buff
 => "123456789" 
 > @buff[4]= 0x30
 TypeError: can't convert Fixnum into String
from (irb):3:in `[]='
from (irb):3

  > @buff[4] = 0x30 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:51:15.160

好像您在第二个示例中使用的是 Ruby 1.9。该`[]=`方法已更改，仅接受字符串。

您可以使用以下方法将整数值转换为字符串[`chr`](http://www.ruby-doc.org/core-1.9.3/Integer.html#method-i-chr)：

```
@buff[4] = 0x30.chr 
```

并使用以下命令检索字符的字节值：

```
@buff[4].ord
# => 48 
```

# mongodb - Mongodb - 数据库命中

> ID：12006956
> 
> 赞同：2
> 
> 时间：2012-08-17T13:40:01.823
> 
> 标签：mongodb, mongohq, database

我想要一个带视图计数器的指南部分。目前我担心性能。我想实时拥有它，所以如果有人查看该页面，我想增加计数器。

我担心是因为，如果我每天有 1000000 次观看会怎样。所以我必须打我的数据库 1000000 次，以增加计数器。（仅在一个指南上！）

**我在计算性能影响时遇到问题。这是更新整数的大性能损失还是小性能损失？**

我的解决方法是缓存视图并仅在每个 x 视图中提交它们。这会将 db 命中减少 x 倍。（例如 x=100）

我目前正在使用 mongohq.com，似乎他们有一个统一的定价模式，所以我只为存储付费，而不是为读/写付费。

我问是因为我不想滥用他们的定价模式。

编辑：

这是我增加观看次数的代码。

```
public static void increaseViews(String title) throws UnknownHostException,
            MongoException, DbAuthException {
        Datastore ds = DatabaseConnect.getInstance().getDatastore();
        Query<UserGuides> q = ds.createQuery(UserGuides.class).field("title")
                .equal(title);
        UpdateOperations<UserGuides> ops = ds.createUpdateOperations(
                UserGuides.class).inc("views");
        ds.update(q, ops);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:57:58.137

免责声明：我是 MongoHQ 的创始人

使用 $inc 运算符来执行此操作对性能造成的影响很小。MongoDB 有一个很好的方法来做到这一点。

例如，您的查询可能如下所示：

```
db.pages.update({page: "index"}, {$inc: {hits: 1}}) 
```

Mongo 可以非常快速地处理这些问题，并且非常适合您正在做的事情。如果您到达您滥用计划的地方，我们会礼貌地让您知道；）

# c# - c# 从 LINQ 对象填充树视图

> ID：12006957
> 
> 赞同：1
> 
> 时间：2012-08-17T13:40:06.553
> 
> 标签：c#, winforms

我有一个 linq 对象，我正在尝试使用 c# winforms 填充树视图。

样本

```
Column 1   Column 2   Column 3        
Test 1     Item A     Sub Item 1      
Test 1     Item A     Sub Item 2      
Test 1     Item A     Sub Item 3      
Test 1     Item B     Sub Item 1      
Test 1     Item B     Sub Item 2     
Test 1     Item B     Sub Item 3 
```

并像填充树视图

```
Test 1 (CheckBox)
------Item A (CheckBox)
-------------Sub Item 1  (CheckBox)
-------------Sub Item 2  (CheckBox)
-------------Sub Item 3  (CheckBox)
------Item B (CheckBox)
-------------Sub Item 1  (CheckBox)
-------------Sub Item 2  (CheckBox)
-------------Sub Item 3  (CheckBox) 
```

实现这一目标的最简单方法是什么？

谢谢Sp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:49:32.713

Well, if you perform the following query:

```
var query = data.GroupBy(item => item.Column1)
                .Select(group => group.GroupBy(item => item.Column2))
                .Select(group => group.Select(innerGroup => 
                    innerGroup.GroupBy(item => item.Column3))); 
```

You will have all of the items grouped first by column1, then 2 and 3, so It's already in a tree structure. Now you just need to have 3 nested `for` loops to add the items to the treeview.

```
foreach (var outermostGroup in query)
{
    //add node for outermostGroup's key
    foreach (var middleGroup in outermostGroup)
    {
        //add child node of the above node for middleGroup key
        foreach (var innerGroup in middleGroup)
        {
            //add child node of the above node for innerGroup key
        }
    }
} 
```

Clearly this code only works if there are a fixed number of columns with a fixed (max) depth. If you don't know the number of columns and can have an arbitrary depth then you'd need a fairly radically different approach.

# c# - 高级形式的 Rad 调度程序文本框

> ID：12006958
> 
> 赞同：0
> 
> 时间：2012-08-17T13:40:08.460
> 
> 标签：c#, asp.net, telerik

我正在努力`RadScheduler`

```
<telerik:RadScheduler ID="RadScheduler1" runat="server" DataEndField="End" DataKeyField="ID"
        DataRecurrenceField="RecurrenceRule" DataRecurrenceParentKeyField="RecurrenceParentID"
        DataSourceID="SchedulerDataSource" DataDescriptionField="Description" Height="700px"
        DataStartField="Start" DataSubjectField="Subject" EnableEmbeddedSkins="true"
        Skin="Windows7" OnAppointmentCreated="RadScheduler1_AppointmentCreated" AdvancedForm-Enabled="true"
        OnAppointmentDataBound="RadScheduler1_AppointmentDataBound1" OnDataBound="RadScheduler1_DataBound"
        StartInsertingInAdvancedForm="true">
        <AppointmentContextMenuSettings EnableDefault="true" />
        <AdvancedForm Modal="true" />
        <TimelineView UserSelectable="false" />
        <ResourceTypes>
            <telerik:ResourceType DataSourceID="RoomsDataSource" ForeignKeyField="RoomID" KeyField="ID"
                Name="Room" TextField="RoomName" />
            <telerik:ResourceType DataSourceID="DocDataSource" ForeignKeyField="DoctorID" KeyField="UID"
                Name="DoctorName" TextField="first_name" />
            <telerik:ResourceType DataSourceID="PatientDataSource" ForeignKeyField="PatientID"
                KeyField="UID" Name="PatientName" TextField="FullName" />
            <telerik:ResourceType DataSourceID="TypeDataSource" ForeignKeyField="TypeID" KeyField="UID"
                Name="Type" TextField="UtilityValue" />
            <telerik:ResourceType DataSourceID="SqlClinic" ForeignKeyField="CompanyId" KeyField="CompanyId"
                Name="Clinic" TextField="CompanyName" />
        </ResourceTypes>
        <ResourceStyles>
            <telerik:ResourceStyleMapping Text="DoctorName" BackColor="Chocolate" />
        </ResourceStyles>
        <AppointmentTemplate>
            <div>
                <asp:Panel ID="RecurrencePanel" CssClass="rsAptRecurrence" runat="server" Visible="false" />
                <asp:Panel ID="RecurrenceExceptionPanel" CssClass="rsAptRecurrenceException" runat="server"
                    Visible="false" />
                <asp:Panel ID="ReminderPanel" CssClass="rsAptReminder" runat="server" Visible="false" />
                <%#Eval("Subject") %>

            </div>
            <hr />
            <div>
                           Doctor: <strong>
                    <%#Container.Appointment.Resources.GetResourceByType("DoctorName").Text%>
                </strong>
                <br />
                Patient: <strong>
                    <%#Container.Appointment.Resources.GetResourceByType("PatientName").Text%>
                </strong>
                <br />
                Room: <strong>
                    <%#Container.Appointment.Resources.GetResourceByType("Room").Text%>
                </strong>
                <br />
                Type: <strong>
                    <%#Container.Appointment.Resources.GetResourceByType("Type").Text%>
                </strong>
                <br />
                Clinic : <strong>
                    <%#Container.Appointment.Resources.GetResourceByType("Clinic").Text%>
                </strong>
                <br />

            </div>
        </AppointmentTemplate>

    </telerik:RadScheduler>
    <telerik:RadToolTipManager ID="RadToolTipManager1" runat="server" OnAjaxUpdate="RadToolTipManager1_AjaxUpdate">
    </telerik:RadToolTipManager>
    <asp:SqlDataSource ID="SchedulerDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        DeleteCommand="DeleteAppointments" DeleteCommandType="StoredProcedure" InsertCommand="INSERT INTO [Appointments] ([Subject], [Start], [End], [RecurrenceRule], [RecurrenceParentID], [Description], [RoomID],[DoctorID],[PatientID],[TypeID],[CompanyId]) VALUES (@Subject, @Start, @End, @RecurrenceRule, @RecurrenceParentID, @Description, @RoomID,@DoctorID,@PatientID,@TypeID,@CompanyId) select @@Identity"
        SelectCommand="SearchAppointmentsDefault" SelectCommandType="StoredProcedure"
        UpdateCommand="UPDATE [Appointments] SET [Subject] = @Subject, [Start] = @Start, [End] = @End, [RecurrenceRule] = @RecurrenceRule, [RecurrenceParentID] = @RecurrenceParentID, [Description] = @Description, [RoomID] = @RoomID,[DoctorID]=@DoctorID,[PatientID]=@PatientID, [TypeID]=@TypeID,[CompanyId]=@CompanyId WHERE [ID] = @ID">
        <InsertParameters>
            <asp:Parameter Name="Subject" Type="String" />
            <asp:Parameter Name="Start" Type="DateTime" />
            <asp:Parameter Name="End" Type="DateTime" />
            <asp:Parameter Name="RecurrenceRule" Type="String" />
            <asp:Parameter Name="RecurrenceParentID" Type="Int32" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter Name="RoomID" Type="Int32" />
            <asp:Parameter Name="DoctorID" Type="Int32" />
            <asp:Parameter Name="PatientID" Type="Int32" />
            <asp:Parameter Name="TypeID" Type="Int32" />
            <asp:Parameter Name="CompanyId" Type="Int32" />
        </InsertParameters>
        <DeleteParameters>
            <asp:Parameter Name="AuditId" Type="Int64" />
            <asp:Parameter Name="ID" Type="Int64" />
        </DeleteParameters>
    </asp:SqlDataSource>
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="RadScheduler1">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadScheduler1" />
                </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>
    <asp:SqlDataSource ID="RoomsDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SELECT [ID], [RoomName] FROM [Rooms]"></asp:SqlDataSource>
    <asp:SqlDataSource ID="DocDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SELECT [UID], [first_name] FROM [Teacher]"></asp:SqlDataSource>
    <asp:SqlDataSource ID="PatientDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SelectPatients" SelectCommandType="StoredProcedure">
    </asp:SqlDataSource>
    <asp:SqlDataSource ID="TypeDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="SELECT [UID], [UtilityValue] from [utility] where utilityGroup='Type'">
    </asp:SqlDataSource>
    <asp:SqlDataSource ID="SqlDoctor" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="GetTeacherInfoForScheduler" SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:Parameter Name="companyId" Type="string" />
        </SelectParameters>
    </asp:SqlDataSource>
    <asp:SqlDataSource ID="SqlClinic" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="getCompanies" SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:Parameter Name="Company" Type="string" />
        </SelectParameters>
    </asp:SqlDataSource>

by using this I can able to get the patients names but they are loading in dropdown,
<telerik:ResourceType DataSourceID="PatientDataSource" ForeignKeyField="PatientID"
                KeyField="UID" Name="PatientName" TextField="FullName" /> 
```

有4000名患者。DropDown 不允许基于文本的搜索。用户必须滚动浏览数千名患者才能找到他们正在寻找的患者。

`autocompletefield`是否有更适合我需要的控件，例如？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:00:58.010

好吧，你已经在使用 Telerik，你可以使用[ComboBox](http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/autocompleteclientside/defaultcs.aspx)

话虽如此，jQuery 也有一些简单的方法可以做到这一点。我发现的最好的插件之一是[SelectToAutocomplete 插件](https://github.com/JamieAppleseed/selectToAutocomplete)。它将采用您的标准选择框并使其令人敬畏。

# java - 番石榴是否为定义字符范围提供任何支持？

> ID：12006964
> 
> 赞同：3
> 
> 时间：2012-08-17T13:40:36.380
> 
> 标签：java, guava, range

Guava 能够定义离散域的范围，然后创建一个代表这些数字的集合。

是否可以在现代英文拉丁字母的字符上创建范围？

也许[这](http://code.google.com/p/guava-libraries/wiki/RangesExplained#Discrete_Domains)表明这是不可能的，但我并不真正理解他们对离散域的定义：

> 离散域始终表示其类型的整个值集；它不能表示部分域，例如“素数”、“长度为 5 的字符串”或“午夜时间戳”。

不是所有长度为 5 的字符串都是离散集吗？一组所有可能的拉丁字符不是离散域的定义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:58:21.087

你真的需要`Range`在你的代码中吗？

也许您可以使用`CharMatcher`? 它只支持封闭的范围，并且有一组有限的操作（和，或，否定），但如果这对你来说足够了，它可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T15:14:55.463

由于 Guava Ranges 必须是连续的，因此您可能无法使用单个 Range，但您当然可以创建多个 Range 对象并组合它们的集合表示以获取范围内的值的集合。

```
DiscreteDomain<Character> domain = new DiscreteDomain<Character>(){
  // Implement DiscreteDomain for Character type
};

Range<Character> lower = Ranges.closed('a','z');
Range<Character> upper = Ranges.closed('A','Z');

HashSet<Character> set = new HashSet<Character>();
set.addAll(lower.asSet(domain));
set.addAll(upper.asSet(domain)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T16:38:05.063

其实，一切皆有可能，只是可能没有意义。即使“所有长度为 5 的字符串”也是适当排序的间隔，但是在`Range`support `Comparable`but no的情况下`Comparator`，您需要先包装字符串（这使得生成的 Range 非常无用）：

```
@RequiredArgsConstructor
private static class WrappedString implements Comparable<WrappedString>, Supplier<String> {
    @Override
    public String get() {
        return value;
    }
    @Override
    public int compareTo(WrappedString o) {
        final String s1 = get();
        final String s2 = o.get();
        return ComparisonChain.start()
            .compare(s1.length(), s2.length())
            .compare(s1, s2)
            .result();
    }
    @NonNull private final String value;
}

public static Range<WrappedString> rangeOfWrappedStringsOfLength(int length) {
    final char[] a = new char[length];
    final WrappedString lower = new WrappedString(new String(a));
    Arrays.fill(a, Character.MAX_VALUE);
    final WrappedString upper = new WrappedString(new String(a));
    return Ranges.closed(lower, upper);
} 
```

A`CharMatcher`已经是一个谓词，并且“宇宙”是所有字符的集合，很容易将匹配器转换为 a `Set`：

```
private final static ImmutableSet<Character> allChars;
static {
    final ImmutableSet.Builder<Character> builder = ImmutableSet.builder();
    for (int i=Character.MIN_VALUE; i<=Character.MAX_VALUE; ++i) builder.add((char) i);
    allChars = builder.build();
}

public static ImmutableSet<Character> toSet(CharMatcher matcher) {
    return FluentIterable.from(allChars).filter(matcher).toImmutableSet();
} 
```

但我怀疑它是否有效。

# memory - 如何在带有 32b PCI 设备的 x86_64 系统上使用 DMA 内存

> ID：12006965
> 
> 赞同：1
> 
> 时间：2012-08-17T13:40:36.417
> 
> 标签：memory, pci, dma

在具有 32 位设备（例如旧 NIC）的 x86_64 系统上：在 NIC 和 DRAM 之间进行 DMA 时，内存地址是否必须在较低的内存中（低于 4GB）？

顺便问一下，OS如何知道为PCI设备保留的内存地址空间资源，即BAR中存储的地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:25:40.747

请参阅有关[PCI 配置空间](http://en.wikipedia.org/wiki/PCI_configuration_space)的 Wikipedia 条目。PCI BAR 位用于传达内存寻址要求，并在 PCI 枚举期间进行配置。

如果 PCI 设备是 32 位的（意味着它只能处理 32 位地址），它可能会将“Locatable”值设置为“0”（任何 32 位），从而将地址保持在 4GB 以下。

如果设备可以处理 64 位地址，它会将“Locatable”设置为 2。

同样，在配置期间，PCI 设备通过 BAR 传达其内存需求，操作系统最终设置 BAR 地址。

引用有问题的维基百科部分：

> 当对指定 BDF 组合供应商 ID 寄存器的读取成功时，BIOS 或 OS 知道它存在。它将所有 1 写入 BAR，并以 0 的形式读回设备请求的内存大小，其中不关心地址所在的位置。（原文如此）

总结一下：
这取决于设备硬件的能力。

在 PCI 设备枚举期间，一旦主机操作系统找到了 PCI 设备，它就会使用 BAR 位向设备询问内存地址位置信息。它在两步过程中使用 BAR 本身，首先确定内存大小要求，然后配置基地址。

# jquery - jQuery resizable 为每个方向指定不同的最大值

> ID：12006968
> 
> 赞同：2
> 
> 时间：2012-08-17T13:40:47.843
> 
> 标签：jquery, jquery-ui, resizable, jquery-ui-resizable

我会在可调整大小的 div 上指定不同的最大约束。例如，我希望北方向最大调整大小为 20 像素，南方向最大调整大小为 200 像素。

我可以很容易地用 maxHeight 只在一个方向上完成它，并将手柄限制在一个方向上，但我不能同时管理这两个方向。

这绝对不可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:55:21.057

请注意，jQuery 和 jQuery UI 是不一样的。

**jQuery UI 可调整大小的小部件为您提供了一组选项**。如您所见，其中之一是**maxHeight**，但也有**minHeight**。当然还有宽度的等价物。

如果你有一个**固定高度的项目**（100px），你可以简单地使用这个代码来获得 20px 北和 200px 南：

```
$("#resizable").resizable(
{
    maxHeight: 300,
    minHeight: 80
}); 
```

现在，如果你不知道它的**变量 height**，你总是可以用 jQuery 找到它：

```
$("#resizable").resizable(
{
    maxHeight: parseInt($("#resizable").height(),10)+200,
    minHeight: parseInt($("#resizable").height(),10)-20
}); 
```

更好的是，如果您希望能够以20px/200px**的步长调整它的大小**，您可以尝试使用 stop 事件：

```
$("#resizable").resizable(
{
    maxHeight: parseInt($("#resizable").height(),10)+200,
    minHeight: parseInt($("#resizable").height(),10)-20,
    stop: function(event,ui)
    {
        $("#resizable").resizable("option","maxHeight",parseInt($("#resizable").height(),10)+200);
        $("#resizable").resizable("option","minHeight",parseInt($("#resizable").height(),10)-20);
    }
}); 
```

现在，如果你想**用两个不同的手柄增加它的高度**但有不同的限制，你可以使用手柄的类来强制另一个限制：

```
var originalHeight = parseInt($("#resizable").height(),10);
$("#resizable").resizable(
{
    maxHeight: originalHeight+20,
    minHeight: originalHeight, // decrease height impossible
    start: function(event,ui)
    {
        if($(event.originalEvent.target).hasClass('ui-resizable-s'))
        {
            $("#resizable").resizable("option","maxHeight",originalHeight+200);
        }
        else
        {
            $("#resizable").resizable("option","maxHeight",originalHeight+20);
        }
    }
}); 
```

如果您不想稍后将元素调整为更小，您还可以在停止事件中添加类似的内容：

```
,
stop: function()
{
    $("#resizable").resizable("option","minHeight",parseInt($("#resizable").height(),10));
} 
```

# java - 如果我尝试在 jdk6 上使用我使用 jdk7 编写的类，我会遇到问题吗？

> ID：12006975
> 
> 赞同：2
> 
> 时间：2012-08-17T13:41:38.877
> 
> 标签：java, compatibility, java-7

我确实计划检查 API 并确保我只使用 jdk6 库，但是这里的一些兼容性帖子让我有点紧张。

我需要将一些文件上传到 jdk6 计算机上，但我使用 jdk7 在我的计算机上运行 eclipse，我没有时间检查文件是否会编译。我需要他们能够编译。我能做些什么来避免麻烦吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:44:53.713

使用`-target`java 1.7 编译器的密钥确保您的代码可以在 jvm 6 上完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:47:31.557

在 Eclipse 中，使用 JDK 合规性属性。右键项目，Java Compiler -> Compiler compliance level -> 1.6

# android - 将 onTouch ACTION_MOVE 限制为一个视图

> ID：12006979
> 
> 赞同：2
> 
> 时间：2012-08-17T13:41:56.220
> 
> 标签：android

我正在实现一个应用程序，它使用屏幕的一部分作为触摸板，供用户操作机械设备。我想将触摸板行为限制为仅此`View`。

但是，如果用户将手指**放在**其中`View`并将其移到 my**之外**，那么当用户在.`View``onTouch()` `Handler``ACTION_MOVE``View`

即使事件来自该边界之外，`View`传入的ID`onTouch()`仍然是原始ID ！`View``View's`

为什么它会这样做，我怎样才能将事件限制在该范围内`View`？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:59:50.197

尝试使用[Fragments](http://developer.android.com/guide/components/fragments.html)。

每个片段都有自己的 UI 事件处理程序。我希望这对你来说已经足够了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:52:48.470

我在 SO 的其他地方找到了答案-

[Android：检测用户是否触摸并拖出按钮区域？](https://stackoverflow.com/questions/6410200/android-how-to-detect-if-use-touches-and-drags-out-of-button-region)

我不得不移动“return false”；在“//用户移动到边界之外”的大括号内声明，但否则我能够完整地使用它。所以，感谢[Entreco](https://stackoverflow.com/users/563904/entreco)。

# php - 在 PHPDoc 中记录控制器操作的好方法？

> ID：12006980
> 
> 赞同：6
> 
> 时间：2012-08-17T13:41:59.537
> 
> 标签：php, model-view-controller, comments

我试图找出一种在 php mvc 框架中记录控制器操作的好方法。有一种方法可以将操作的 url 粘贴在其中，这对我来说非常重要，我的问题是我似乎无法找到一种方法将其放入 phpdoc 的架构中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:56:07.010

我真的不明白你的问题/问题。您可以在 phpdoc 块中放置任何您想要的内容，包括控制器操作的相关 URL（如果需要，您甚至可以使用标记）：

```
/**
 * This is some foo action.
 *
 * URL: /foo/bar/baz
 */
public function fooAction(/* ... */) {
    // ...
} 
```

也就是说，如果您特别想使用自定义标签之类的`@url`东西，那么您只需要[使用`-ct`命令行选项](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html#using.command-line.customtags)告诉 phpdoc 当它遇到您的自定义标签时您不希望它抛出解析错误：

```
# Will specify custom tag @url
phpdoc -ct url ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:50:51.667

解决方案取决于您用来生成文档的软件。

我有一个类似的问题并切换到[doxygen](http://www.doxygen.nl/)。Doxygen 允许您将自定义信息添加到您的文档注释中，例如@action_url，并且可以生成和输出 HTML、pdf、手册页等...

# iframe - https需要加密

> ID：12006981
> 
> 赞同：0
> 
> 时间：2012-08-17T13:42:00.080
> 
> 标签：iframe, encryption, asp-classic, https

我们有一个在 https 上运行的网站，我们目前正在我们网站上的一个页面上的 iframe 中加载第三方网站的页面。这个第三方网站再次在 https 上运行，并使用推荐 URL 作为我们的域名（它检查请求是否来自我们的网站，然后只加载他们的页面）。当我们加载他们的页面时，我们正在传递 iframe src 中的一些参数。展望未来，我们必须发送更多参数（登录 ID 等）。您是否建议使用加密传递这些参数，或者因为这两个网站都在 https 上运行，所以它们无论如何都是安全的，因此不需要加密？非常感谢萨米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:45:38.883

如果允许用户查看这些参数，我不会尝试加密数据，因为您已经在使用 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:45:56.503

如果它在 iframe 中，客户端将看到传递的 url。这意味着除非您希望客户端看到它们，否则您应该加密它们。

# php - 为 json 格式化一个数组

> ID：12006982
> 
> 赞同：0
> 
> 时间：2012-08-17T13:42:01.577
> 
> 标签：php

我正在使用 FullCalendar jquery 插件在我的网站上显示日历。我能够硬编码一些在我的日历上显示得很好的值。格式应为：

```
echo json_encode(array(

        array(
            'id' => 1136,
            'title' => "Understanding Health-Care Regulations (Part II) and COBRA Compliance Strategies",
            'start' => "2011-11-17",
            'url' => "/www/conferences/conference.php?ID=1136"
        ),

        array(
            'id' => 1154,
            'title' => "Making the Most of your Membership",
            'allDay' => false,
            'start' => "Wed, 18 Nov 2011 11:00:00 EST",
            'url' => "/www/conferences/conference.php?ID=1154"
        ),
        array(
            'id' => 1137,
            'title' => "2011 Annual Human Resources Conference",
            'start' => "2011-11-29",
            'url' => "/www/conferences/conference.php?ID=1137"
        ),

    )); 
```

当试图模仿这个数组结构时，我正在使用这个：

```
$conferences = dbStoredProc('cp_meeting_get_list_new');
$events = array();

foreach ($conferences as $c){
    $push = array(
        'id'        => $c['ID'],
        'title'     => $c['name'],
        'start'     => date("Y", $c['epochDate']) . "-" . date("M", $c['epochDate']) . "-" . date("d", $c['epochDate']),
        'url'       => '/events/details.php?id' . $c['ID'],
    );
    array_push($push, $events);
}
echo json_encode($events); 
```

当我回显我的`$events`变量时，我得到`[]`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T13:43:53.400

```
array_push($push, $events); 
```

应该

```
array_push($events, $push); 
```

要不就

```
$events[] = $push; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:47:19.233

正如 xdazz 所说，您需要将参数切换为`array_push`. 或者，使用 [] 语法将项目推送到数组的末尾：

```
$events[] = $push; 
```

此外，您可以将多个格式说明符传递给`date`，因此您的起始行可以写为：

```
date("Y-M-d", $c['epochDate']), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:44:59.880

你最好只使用将数据附加到数组中

```
$events[] = $push; 
```

它比必须查找参数的顺序更快，更不容易混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:47:14.420

你的 PHP 有缺陷。尝试这个：

> ```
> $conferences = dbStoredProc('cp_meeting_get_list_new');
> $events = array();
> 
> foreach ($conferences as $c){
>    $events[] = array(
>        'id'        => $c['ID'],
>        'title'     => $c['name'],
>        'start'     => date("Y-M-d", $c['epochDate']),
>        'url'       => '/events/details.php?id' . $c['ID']
>     );
> }
> echo json_encode($events); 
> ```

# c# - 无法使用 asp.net 选择禁用或不可选择的菜单项

> ID：12006990
> 
> 赞同：0
> 
> 时间：2012-08-17T13:42:34.697
> 
> 标签：c#, asp.net

我已经对我遇到的这个错误进行了一些研究，但没有运气。我正在使用一个 asp.panel，里面有几个控件。如果满足某些条件，面板将可见或不可见。如果它是可见的，我会有一些文本框和一个按钮。当我单击按钮时，我收到此错误：“无法选择禁用或不可选择的菜单项。”

这是aspx代码：

```
<asp:Panel ID="pnlTrocaSenha" runat="server" Visible="false">

       <asp:Label ID="Label3" runat="server" Font-Size="XX-Small">Este é o seu primeiro 
acesso ao sistema. Favor cadastrar sua senha:</asp:Label>
        <br />
        <asp:TextBox ID="txtSenha" runat="server" TextMode="Password"></asp:TextBox>
        <asp:RequiredFieldValidator ID="rfvSenha" runat="server" ControlToValidate="txtSenha"
            Display="Dynamic" ErrorMessage="Senha Requerida">Senha Requerida</asp:RequiredFieldValidator>
        &nbsp; &nbsp;<br />
        <asp:Label ID="Label4" runat="server" Font-Size="XX-Small">Confirme a senha</asp:Label>
        <br />
        <asp:TextBox ID="txtConfirma" runat="server" TextMode="Password"></asp:TextBox>
        <asp:CompareValidator ID="cvSenha" runat="server" ControlToCompare="txtSenha" ControlToValidate="txtConfirma"
            Display="Dynamic" ErrorMessage="*">Senha não bate com a confirmação</asp:CompareValidator>
        <asp:RequiredFieldValidator ID="rfvConfirma" runat="server" ControlToValidate="txtConfirma"
            Display="Dynamic" ErrorMessage="Confirmação Requerida"></asp:RequiredFieldValidator>
        <br />
        <br />
        <asp:Button ID="btnTrocar" runat="server" Text="Confirmar" CssClass="btnPadrao" OnClick="btnTrocar_Click" /><br />
        <asp:Label ID="lblMsg" runat="server" Text=""></asp:Label>
    </asp:Panel>

protected void Page_Load(object sender, EventArgs e)
        {
            Session["estado"] = null;
            if(Request.QueryString["acao"] != "sair")
                base.Page_Load(sender, e);

            if (!Page.IsPostBack)
            {
                if (Request.QueryString["acao"] == "sair")
                {
                    Sair();
                }

                var usuario = (CUsuario) Session["usuario"];
                if (!usuario.getSenhaAlterada())
                {
                    pnlTrocaSenha.Visible = true;
                }
                else
                {
                    pnlTrocaSenha.Visible = false;
                }
            }
        }

protected void btnTrocar_Click(object sender, EventArgs e)
        {
            if (Page.IsValid)
            {
                if (!Util.ValidarSenhaForte(txtSenha.Text))
                {
                    lblMsg.Text = "A senha precisa ter no minimo 8 caracteres e conter numeros e letras";
                    return;
                }
                string senhaCriptografada = FormsAuthentication.HashPasswordForStoringInConfigFile(this.txtSenha.Text, "MD5");
                var usuario = (CUsuario) Session["usuario"];
                DBAccess dao = new DBAccess();
                usuario.setSenha(senhaCriptografada);
                usuario.setSenhaAlterada(true);
                dao.AtualizarUsuario(usuario, Session["idUsuario"].ToString(), (CUsuario)Session["usuario"]);
                pnlTrocaSenha.Visible = false;
            }
        } 
```

我认为只有在使用 asp.menu 时才会出现此错误....在此先感谢。

# .net - 从 .Net 4.0 到 4.5 的重定向解决方案 - 如何重定向 NuGet 包？

> ID：12006991
> 
> 赞同：216
> 
> 时间：2012-08-17T13:42:36.880
> 
> 标签：.net, nuget, visual-studio-2012, .net-4.5

我已将当前针对 VS2010 中的 .NET 4.0 的解决方案迁移到 VS2012，现在我想将其重新定位到 .Net 4.5

我不确定的是 NuGet 包。例如，我在 VS2010 中从 EF4 更新的 EF5 实际上是 EF 4.4，如您在此处看到的：

```
 <Reference Include="EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\packages\EntityFramework.5.0.0\lib\net40\EntityFramework.dll</HintPath>
    </Reference> 
```

我还可以在项目的 packages.config 中看到以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="EntityFramework" version="5.0.0" targetFramework="net40" />
</packages> 
```

所以我的问题是：

将当前设置为面向 .NET 4.0 的所有 NuGet 包重新定位为面向 .NET 4.5 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-08-17T20:35:44.180

**NuGet 2.1**提供了一项功能，使这变得更简单：只需`update-package -reinstall -ignoreDependencies`从包管理器控制台执行。

**NuGet 2.0**不能很好地处理重新定位您的应用程序。为了更改包的目标框架，您必须卸载并重新安装包（记下您已安装的包，以便重新安装它们）。

必须卸载并重新安装软件包的原因是：

*   安装包时，我们确定您项目的目标框架
*   然后我们将其与包内容匹配，找到合适的 \lib\ 文件夹（和 \content\ 文件夹）
*   程序集引用添加了指向包的 \lib\ 文件夹的提示路径，以及正确的子文件夹（例如 \lib\net40）
*   内容文件从 packages \content\ 文件夹复制，带有正确的子文件夹（例如 \content\net40）
*   我们在 packages.config 文件中记录用于安装包的 targetFramework
*   更改项目的目标框架后，提示路径仍指向 net40
*   当您卸载包时，我们会检查 packages.config 中记录的 targetFramework 以查看要从您的项目中删除的目标框架的库/内容
*   当您重新安装软件包时，我们会检测您更新的目标框架并引用/复制正确的库/内容

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-10-10T20:42:45.403

对于那些对`update-package -reinstall <packagename>`命令有问题的人，请考虑使用`-ignoreDependencies`标志运行它，如下所示：

```
update-package -reinstall <packagename> -ignoreDependencies 
```

此标志将单独保留您的包依赖项，否则即使您最初想要重新安装的包仍然保持其版本相同，它们也可能会被更新。

更多信息[在这里](http://docs.nuget.org/docs/workflows/reinstalling-packages)。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-02-25T16:23:01.733

在尝试接受的答案失败后，我想建议一个风险较小的命令：

```
Update-Package <PackageName> -ProjectName <ProjectName> -Reinstall -IgnoreDependencies 
```

欲了解更多信息：http: [//blog.nuget.org/20121231/a-quick-tutorial-on-update-package-command.html](http://blog.nuget.org/20121231/a-quick-tutorial-on-update-package-command.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-01T13:37:23.530

在尝试重新安装软件包解决方案时，我遇到了一个依赖错误（尽管使用了`-ignoreDependencies`标志），并且每个项目的所有*packages.config*文件都已被删除。在 VS2013 中，似乎*packages.config*不会被刷新回磁盘并重新添加，直到所有升级的依赖项/引用都重新附加到项目中。

在我的情况下，有效的方法是通过将项目名称添加到命令中来一次升级`-ProjectName` *每个*项目`update-package`。在这种情况下，*packages.config*会随着每个项目的升级而更新。

对于非常大的解决方案可能不实用，但似乎是一个合理的折衷方案，仍然利用尽可能多的项目的自动升级并隔离有问题的项目，而不会在失败时删除解决方案中的每个*packages.config*。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-16T04:02:50.697

在 Visual Studio for Mac 2019 中，右键单击 Packages 文件夹会在菜单中显示“重新定位”选项。这解决了项目中需要重定向的所有包的重定向问题。看起来在 Visual Studio for Mac 的工具菜单下没有 NuGet 包管理器（至少在我的），所以我无法启动包管理器控制台。

[![Packages 右键菜单下的 Retarget 菜单选项](../Images/39178bc9bb1fa5a69433f795a580568a.png)](https://i.stack.imgur.com/LSij8.png)

# jquery - 切换类上的jQuery setTimeout

> ID：12006992
> 
> 赞同：2
> 
> 时间：2012-08-17T13:42:39.937
> 
> 标签：jquery, toggle, settimeout

我有一个仅在遇到特定媒体查询时出现的按钮。现在它工作正常，按钮出现，单击按钮将显示sidenav。再次单击将关闭菜单。

我的问题是——我也有一个可以切换的类，叫做“open”。这使我能够使用不同的图标来表示打开和关闭。但我需要延迟切换类，以便在菜单栏关闭之前图标不会改变。

```
$(document).ready(function() {
        /* prepend category button */
        $('.side-bar').before('<div id="button"><p class="sidebar-button"> Menu </p></div>'); //insert html for menu button

            $(".sidebar-button").click(function() { //click menu button and do..

                setTimeout(function(){ //i added this..

              $(".side-bar").slideToggle(); //toggle sidebar
              $(this).toggleClass("open"); // toggle class on button for 'open'
            });
        },5000); // other part of the seTimeout
    }); 
```

实现这一目标的最佳方法是什么？用于此问题的实时示例：http: [//jsfiddle.net/rXt39/2/](http://jsfiddle.net/rXt39/2/)

**编辑**

**这可能有助于寻找类似事物的人。我在这里找到了解决方案：**

[jQuery 和 setTimeout](https://stackoverflow.com/questions/7085925/jquery-and-settimeout?rq=1)

**注意：**我最终在下面的答案中更改了我的代码。它现在运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:45:47.253

完成后使用菜单回调来切换图标

```
 $reference = $(this)

      $(".side-bar").slideToggle(function(){
            $reference.toggleClass("open");           
      }); 
```

我在 CSS 中添加了一个 .open 类，以便在展开时将单词菜单变为黄色。

[解决方案](http://jsfiddle.net/rXt39/6/)

# r - 如何在R中绘制日期部分的发生率？

> ID：12006994
> 
> 赞同：1
> 
> 时间：2012-08-17T13:42:44.547
> 
> 标签：r, date, plot

我有一个 .csv 文件中的数据，显示不同团队在不同日期收到的查询。查询输入如下：

```
Team,Date_received,Date_answered
Team 1,31/01/10,05/02/10
Team 3,05/03/10,17/04/10
... 
```

我想绘制一个图表，显示每个团队在过去六个月的每一个月中收到了多少查询，但我是 R 新手，而且进展不快。我查看了时间序列文档（在 O'Reilly 的 R in a Nutshell 中），但它似乎比我需要的要复杂得多。

到目前为止，我已读取数据并将日期字符串转换为 POSIXlt，如下所示：

```
c_data <- read.table("~/data.csv", header=T, sep=",")
c_data$Date_received <- as.Date(c_data$Date_received, "%d/%m/%y")
c_data <- as.POSIXlt(c_data$Date_received)
... 
```

但从那里我迷路了。我想要做的是从 POSIXlt 字段中提取月份，计算每个月每个“团队”字符串的发生率并将它们相互绘制，但我不知道哪些函数处理这些事情，我正在努力文档。

我知道我在这里处于早期阶段，所以即使只是指向我应该阅读的函数的指针也会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:46:00.743

从一些虚拟数据开始：

```
c_data <- data.frame(Team=paste("team", sample(1:3,10, replace=TRUE)), 
                    Date_received=paste(sample(1:31,10,replace=TRUE), sample(1:12,10,replace=TRUE), rep(10,10,replace=TRUE), sep="/"))
c_data
    Team Date_received
1  team 3       13/7/10
2  team 1        2/5/10
3  team 2       14/5/10
4  team 1       15/4/10
5  team 1       25/1/10
6  team 3       30/4/10
7  team 3       23/9/10
8  team 3        7/9/10
9  team 2        7/6/10
10 team 2        4/6/10 
```

首先，您必须将日期声明为 Date 对象。

```
c_data$Date_received <- as.Date(c_data$Date_received, "%d/%m/%y") 
```

要提取月份，没有比这更简单的了：

```
c_data$month <- format(c_data$Date_received, "%m")
c_data$month
[1] "07" "05" "05" "04" "01" "04" "09" "09" "06" "06" 
```

然后，要找到每个团队每月的发病率，您只需根据您的团队和月份制作表格：

```
t_data <- table(c_data$Team, c_data$month)
t_data

         01 04 05 06 07 09
  team 1  1  1  1  0  0  0
  team 2  0  0  1  2  0  0
  team 3  0  1  0  0  1  2 
```

现在作为 data.frame （用于绘图目的）：

```
d_data <- as.data.frame(t_data)
d_data
     Var1 Var2 Freq
1  team 1   01    1
2  team 2   01    0
3  team 3   01    0
4  team 1   04    1
5  team 2   04    0
6  team 3   04    1
7  team 1   05    1
8  team 2   05    1
9  team 3   05    0
10 team 1   06    0
11 team 2   06    2
12 team 3   06    0
13 team 1   07    0
14 team 2   07    0
15 team 3   07    1
16 team 1   09    0
17 team 2   09    0
18 team 3   09    2

# Back to Date objects
d_data$Var2 <- as.Date(paste("1",d_data$Var2,"10",sep="/"), "%d/%m/%y") 

library(ggplot2)
ggplot(d_data, aes(Var2, Freq, group = Var1, color = Var1)) +
geom_line() 
```

![在此处输入图像描述](../Images/4005b7d955e289a387873d8fc8450c60.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:55:31.087

查看**润滑**包

这里有一个例子

```
df <- read.table(header=TRUE, text="
Team Date_received Date_answered
Team1 31/01/10 05/02/10 
Team3 05/03/10 17/04/10
             ") 

require(lubridate)
date_Received <- dmy(df$Date_received)

month(date_Received) 
```

我希望这有帮助