# StackOverflow 问答 12285000-12285999

# html - tablerows 悬停在通过 CSS 设置样式的偶数/奇数表

> ID：12285001
> 
> 赞同：2
> 
> 时间：2012-09-05T15:36:23.887
> 
> 标签：html, css

表格行上设置的偶数/奇数样式但表格行悬停不起作用。
*试试看：http: [//jsfiddle.net/w7brN/](http://jsfiddle.net/w7brN/)*

**CSS 样式：**

```
#table_even tr:hover { background-color:#fffbae!important; } /* hovering */

#table_even tr:nth-child(odd) td { background-color:#fbfbfb } /*odd*/
#table_even tr:nth-child(even) td { background-color:#e8ecee } /* even*/ 
```

**HTML 代码：**

```
<table id="table_even" style="width: 100%">
    <tr>
        <td>##</td>
        <td>##</td>
    </tr>
    <tr>
        <td>##</td>
        <td>##</td>
    </tr>
    <tr>
        <td>##</td>
        <td>##</td>
    </tr>
</table> 
```

怎么解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:38:30.923

您需要重新排序 CSS 并添加`<td>`类似这样的内容：

```
 #table_even tr:nth-child(odd) td {
    background-color: #fbfbfb
} /*odd*/
#table_even tr:nth-child(even) td {
    background-color: #e8ecee
} /* even*/
#table_even tr:hover td {
    background-color: #fffbae;
} /* hovering */ 
```

否则，nth-child 规则将始终优先于悬停，以及您将背景颜色添加到s 之前`<tr>`，而不是`<td>`s 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:42:04.553

在 IE 中，必须 `<!DOCTYPE>`为`:hover`选择器声明 a 才能作用于该元素以外的其他`<a>`元素。

见[http://www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:45:58.193

我们不能有

```
$(this:even).css & $(this:odd).css 
```

会让生活更轻松吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:07:13.793

您可以通过为偶数和奇数表行设置 CSS 来实现

```
tr {background:#663366;}
tr:hover {background:#FF6633;}
tr.odd {background:#CCCCCC;}

$(document).ready(function () {$("tr:odd").addClass("odd");}): 
```

请参阅此处的示例[http://jsfiddle.net/Cpp3p/](http://jsfiddle.net/Cpp3p/)

它不能在 jsfiddle 中完全工作，但可以在大多数浏览器中工作

干杯！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-20T14:15:47.453

```
#table_even tr:hover { background-color:#fffbae!important; } /* hovering */ 
```

您只是缺少`td`. 尝试：

```
#table_even tr:hover td{ background-color:#fffbae!important; } /* hovering */ 
```

# c# - 您在哪里手动将断言插入到 VS2010 中的自动编码 ui 测试代码中？

> ID：12285002
> 
> 赞同：0
> 
> 时间：2012-09-05T15:36:23.803
> 
> 标签：c#, visual-studio-2010, automation

我目前正在自动化烟雾测试，并且正在尝试学习如何使用 C# 手动将断言插入 UImap.Designer.cs 文件。我正在尝试学习如何手动执行此操作，但我没有关于将断言放在哪里的方向，并且我发现的所有文献仅涵盖如何使用 VS2010 附带的 CodedUI 测试生成器工具添加断言。谁能指导我到我需要插入断言的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:02:56.733

不要在设计器文件中包含任何内容。每次重建 UIMap 时它都会被覆盖。

其次，一般来说，这应该是在测试自己。当你查看一个测试类时，它应该很容易看到它正在断言和验证**什么。**断言不应该被隐藏在 UIMap 中。

第三，您选择 Coded UI 有什么原因吗？像 Selenium 这样的东西会给你更多的灵活性，但我只是提到这一点，以防你的项目可以灵活地改变。

# ruby-on-rails - NilClass:Class 的未定义方法“model_name” - Rails 应用程序

> ID：12285003
> 
> 赞同：0
> 
> 时间：2012-09-05T15:36:28.100
> 
> 标签：ruby-on-rails, ruby, forms

所以我在堆栈上看到了其他关于这个的文章，而且很多时候人们没有做@post = post.new。我读了一些在哪里使用复数...？？

我在讨论代码中遇到此错误的任何方式：

**模型**

```
class Discussion < ActiveRecord::Base
  has_many :comment
  belongs_to :author
  attr_accessible :author_id, :content, :title

  validate :comment, :presence => true
  validate :title, :presence => true
end 
```

**讨论控制器**

```
class DiscussionsController < ApplicationController
  def index
    @discussion = Discussion.new
    @discussions = Discussion.all
  end

  def create
    @discussion = Discussion.create(params[:discussion])
    if @discussion.save
      redirect_to tasks_path, :flash => {:success => 'Created a new discussion'}
    else
      redirect_to tasks_path, :flash => {:error => 'Failed to create a discussion'}
    end
  end
end 
```

**讨论表**

```
<%= form_for @discussion do |f| %>

    <p><%= f.label :title %>
    <%= f.text_field :title %></p>

    <p><%= f.label :content %>
    <%= f.text_area :content %></p>

<% end %> 
```

**讨论路线**

```
 resources :discussions do
    resources :comments
  end 
```

现在据我所知，我这样做是正确的，因为我有一个基本上以相同方式设置的任务表单 - 但我已经查看了我的代码几个小时，并在谷歌上搜索并尝试了其他示例，现在我看到了：

```
undefined method `model_name' for NilClass:Class

Extracted source (around line #1):

1: <%= form_for @discussion do |f| %>
2: 
3:  <p><%= f.label :title %>
4:  <%= f.text_field :title %></p> 
```

这应该意味着我从控制器中遗漏了一些东西......它是否像拼写错误一样愚蠢？>.>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:09:19.900

你试过把它放在你的讨论控制器中吗？

```
def new
  @discussion = Discussion.new
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:47:34.467

您必须添加 :method => :post 到表单以创建对象，否则表单将通过 GET 请求提交。

```
<%= form_for @discussion , :method => :post do |f| %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:49:29.790

我相信您的问题是您正在尝试在任务表单上创建讨论，但只定义了讨论控制器而不是任务控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:11:31.710

那是具有 form_for的**索引视图吗？**

如果没有，那么您应该向控制器添加一个**新**`@discussion = Discussion.new`操作并在那里执行而不是在您的**索引**操作中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T18:48:42.533

如果您的模型关系与您提供的完全一样，那么它们是不正确的

```
class Discussion < ActiveRecord::Base
  has_many :comment #has_many :comments
  belongs_to :author
  attr_accessible :author_id, :content, :title

  validate :comment, :presence => true #valide :comments, :presence => true
  validate :title, :presence => true
end 
```

# github - 错误：“非快进”GitHub

> ID：12285008
> 
> 赞同：1
> 
> 时间：2012-09-05T15:36:44.897
> 
> 标签：github, egit

我正在尝试将一些文件从 Eclipse 推送到 GitHub 的远程存储库。但我收到此错误“拒绝推送 - 非快进”。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:38:39.687

这意味着您推送到的远程存储库在您的本地存储库之前——其他人进行了其他更改。
您需要先提取并合并这些更改。

# php - 如何从php中的多维数组中删除重复项

> ID：12285009
> 
> 赞同：-3
> 
> 时间：2012-09-05T15:36:45.523
> 
> 标签：php, multidimensional-array, duplicates

> **可能重复：**
> [PHP 从多维数组中删除重复值](https://stackoverflow.com/questions/3598298/php-remove-duplicate-values-from-multidimensional-array)

我有一个像这样的数组：

```
Array
(
    [prom] => Array
        (
            [cab] => Array
                (
                    [0] => Array
                        (
                            [code] => 01
                            [price1] => 1000
                            [price2] => 2000
                            [available] => 2
                            [max] => 2
                            [gca] => 2
                        )

                    [1] => Array
                        (
                            [code] => 04
                            [price1] => 870
                            [price2] => 2500
                            [available] => 3
                            [max] => 4
                            [gca] => 10
                        )

                    [2] => Array
                        (
                            [code] => 01
                            [price1] => 1000
                            [price2] => 2000
                            [available] => 2
                            [max] => 2
                            [gca] => 2
                        )

                    [3] => Array
                        (
                            [code] => 05
                            [price1] => 346
                            [price2] => 1022
                            [available] => 10
                            [max] => 2
                            [gca] => 20
                        )

                )
           [cab1] => Array........

        )
    [prom1] = Array....
) 
```

我要做的是删除每个 [cab*] 数组中的重复项。

所以有类似的东西：

```
Array
    (
        [prom] => Array
            (
                [cab] => Array
                    (
                        [0] => Array
                            (
                                [code] => 01
                                [price1] => 1000
                                [price2] => 2000
                                [available] => 2
                                [max] => 2
                                [gca] => 2
                            )

                        [1] => Array
                            (
                                [code] => 04
                                [price1] => 870
                                [price2] => 2500
                                [available] => 3
                                [max] => 4
                                [gca] => 10
                            )

                        [2] => Array
                            (
                                [code] => 05
                                [price1] => 346
                                [price2] => 1022
                                [available] => 10
                                [max] => 2
                                [gca] => 20
                            )

                    )
               [cab1] => Array........

            )
        [prom1] = Array....
    ) 
```

知道有`array_unique`结合`array_map`删除重复..但我知道它只适用于二维数组..我能做什么？有人可以帮我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:39:35.830

试试看：-

```
function super_unique($array)
{
  $result = array_map("unserialize", array_unique(array_map("serialize", $array)));

  foreach ($result as $key => $value)
  {
    if ( is_array($value) )
    {
      $result[$key] = super_unique($value);
    }
  }

  return $result;
}

$input =  super_unique($myarray);
echo "<pre>";
print_r($input); 
```

# c# - 将 LINQ 序列化为实体到 JSON

> ID：12285018
> 
> 赞同：0
> 
> 时间：2012-09-05T15:37:21.293
> 
> 标签：c#, json, linq, entity-framework, serialization

我正在尝试将 linq 中的 Venue/Showtime 关系序列化为 Javascript，并且很难弄清楚对它们进行分组，基本上我有来自 linq 的以下输出

```
Venue ID |  Venue Name        |   Party Name             | Party ID
74          CityStars Cinema      Late Night (3am)         2
74          CityStars Cinema      Sunrise (6am)            3
74          CityStars Cinema      Morning (9am)            4
74          CityStars Cinema      Noon (12pm)              5
74          CityStars Cinema      After Noon (3pm)         6 
```

现在我的查询是这样的：

```
JavaScriptSerializer rSerialize = new JavaScriptSerializer();               
var enVenues = from v in db.Venues
               join t in db.VenueTimes on v.ID equals t.VenueID
               join p in db.VenueParty on t.PartyID equals p.ID
               select new
               {
                   VenueID = v.ID,
                   VenueName =  v.TitleEn,
                   PartyName = p.NameEn,
                   PartyID = p.ID
               };

rMovie.VenuesArray = rSerialize.Serialize(enVenues); 
```

但我想做的是按地点名称将 linq 分组为如下所示：

```
{[
"VenueID" : 74, 
"VenueName" : "CitySars Cinema", 
"VenueShowtimes" : [ {"Late Night", 2}, {"Sunrise" , 3}, etc... ]
]} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:11:34.000

这是（这是一个很好的练习）：

```
public class Venue
{
    public int VenueId {get; set;}
    public string VenueName {get; set;}
    public string PartyName {get; set;}
    public int PartyId {get; set;}
}

class Program
{
    static void Main(string[] args)
    {
        List<Venue> venues = new List<Venue>()
        {
            new Venue() { VenueId = 74,
                          VenueName = "CityStars Cinema",
                          PartyName = "Late Night (3am)",
                          PartyId = 2},

            new Venue() { VenueId = 74,
                          VenueName = "CityStars Cinema",
                          PartyName = "Sunrise (6am)",
                          PartyId = 3},

            new Venue() { VenueId = 74,
                          VenueName = "CityStars Cinema",
                          PartyName = "Morning (9am)",
                          PartyId = 4},

            new Venue() { VenueId = 74,
                          VenueName = "CityStars Cinema",
                          PartyName = "Noon (12pm)",
                          PartyId = 5},

            new Venue() { VenueId = 74,
                          VenueName = "CityStars Cinema",
                          PartyName = "After Noon (3pm)",
                          PartyId = 6},
        };

        var venuesGrouped = venues.GroupBy(v => v.VenueName).
                    Select(group =>
                        new
                        {
                            VenueId = group.First().VenueId,
                            VenueName = group.Key,
                            VenueShowTimes = "[" + group.
                Select(v => string.Format(@"{{{0}, {1}}}", v.PartyName, v.PartyId)).
                Aggregate((party1, party2) =>  party1 + ", " + party2) + "]"
                        });

        foreach (var venue in venuesGrouped)
        {
            Console.WriteLine(
            string.Format("{{[\"VenueID\" : {0},\n\"VenueName\" : {1}\n,\"VenueShowTimes\": {2}]}}",
            venue.VenueId, venue.VenueName, venue.VenueShowTimes));
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:11:06.000

以 Leniel 的代码为基础，这是一个使用您的版本`JavaScriptSerializer`并且应该与您的 select 语句一起使用的版本：

```
var venuesGrouped = enVenues.GroupBy(v => v.VenueName)
         .Select(group =>
             new
             {
                 VenueId = group.First().VenueId,
                 VenueName = group.Key,
                 VenueShowTimes = group.Select(v => new { PartyName = v.PartyName, PartyId = v.PartyId })
             });

string jsonresult = rSerialize.Serialize(venuesGrouped); 
```

# cakephp - 使用 CakePDF 生成的电子邮件 PDF

> ID：12285024
> 
> 赞同：0
> 
> 时间：2012-09-05T15:37:39.453
> 
> 标签：cakephp

我正在使用 CakePHP 2、CakeEmail 和 CakePDF 插件

我正在尝试基于视图生成 PDF 并将其附加到电子邮件中。我已经阅读了自述文件，但仍然不明智。我是否必须在服务器上实际创建文件？

到目前为止，这是我的代码（已发送电子邮件但没有 PDF）。

```
// Build PDF as attachment
        $CakePdf = new CakePdf();
        $CakePdf->template('email_view', 'default');
        //get the pdf string returned
        $pdf = $CakePdf->output();

        // SMTP Options
        $this->Email->smtpOptions = array(

            // Only to be used internally
            'port'=>'25',
            'timeout'=>'30',
            'host' => '111.111.111.111',
            'username'=>'',
            'password'=>''
         );
        $this->Email->template = 'newExpenseClaim';
        $this->Email->from    = 'Expense Tracker <james@test.com>';
        $this->Email->to      = 'james@test.com'; 
        $this->Email->subject = 'New Expense Claim Submitted - Please Review';
        $this->Email->sendAs = 'both';
        $this->Email->delivery = 'smtp';

        $this->Email->attachments = $pdf;

        // Set username & url in email
        $this->set('user', $fu['User']['name']);
        $this->set('ms', $ms);
        $this->Email->send();
        $this->set('smtp_errors', $this->Email->smtpError); 
```

这是我从 github 上读的：

[https://github.com/ceeram/CakePdf](https://github.com/ceeram/CakePdf)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:33:59.597

我最终得到了这个工作，这是我所做的：

```
// Build PDF
$CakePdf = new CakePdf();

// Add disbursements onto array
$merged = array_merge($expenseClaim, $expenseTotal, $approvedBy, $disbursements);

$CakePdf->viewVars($merged);
$CakePdf->template('email_view', 'default');
$filename = 'expense-claim-' .$id. '.pdf';
$CakePdf->write(APP . 'files' . DS . $filename); 
```

基本上，我将需要传递给 PDF 视图的所有数据合并到一个数组中，然后使用 viewVars() 传递它。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:53:59.997

我正在使用 TCPDF。我就是这样做的。使其适应您的代码：

```
$pdf->Content($cvData);
$content = $pdf->Output($cvFileName, 'S');
file_put_contents(TMP . $cvFileName, $content);
$this->Email->attachments = array($cvFileName=>TMP . $cvFileName); 
```

# math - 树遍历方法的大 O 表示法

> ID：12285031
> 
> 赞同：0
> 
> 时间：2012-09-05T15:38:07.707
> 
> 标签：math

对于树结构中的每个节点（在前序遍历中）也必须触及所有祖先节点的方法的大 O 运行时复杂度是多少？O（n * avg（树高））？那就是我们的方法/函数的运行时复杂度是 O(n * avg(tree-height))？（在平均情况下）。

也许 avg(tree-height) 可以定义为 (min + max) / 2，但是 hm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:46:49.147

我可能误解了，但如果你说你需要遍历所有节点（n），然后触摸每个节点的每个祖先（最坏的情况：在*平衡*二叉树中记录 n），那么我认为它会是`O(n*Log(n))`. 常数不适用于大 O 表示法，但（如下面的@interjay 所指出的）平均值可能适用。

假设一棵不平衡的树，你接触所有祖先的最坏情况大约是`n/2`，也就是大 O 中的 n。

# c# - C# System.Security.SecurityException 请求 FileIOPermission 失败错误

> ID：12285033
> 
> 赞同：1
> 
> 时间：2012-09-05T15:38:10.437
> 
> 标签：c#

我编写了一个 C# 程序，它接受 3 个输入并将它们写入服务器上的文本文件。该程序在 XP 计算机上运行良好，但 Windows NT 计算机给出以下错误：

> System.Security.SecurityException：请求“System.Security.Permissions.FileIOPermission，mscorlib，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”类型的权限失败

两者都从同一服务器位置运行 .exe 文件，并且 Windows NT 计算机能够打开并保存对文本文件的更改。

# objective-c - 如何有效地从 iOS 中的文档目录中读取多个图像

> ID：12285036
> 
> 赞同：0
> 
> 时间：2012-09-05T15:38:21.873
> 
> 标签：objective-c, ios, performance

我正在开发一个在 Documents 目录中保存多个图像的应用程序。这些图像最多可以有 100 个。现在使用以下方法从 Documents 目录中读取图像。对 Documents 目录中的所有图像调用此方法。

```
UIImage *currentImage = [UIImage imageWithContentsOfFile:pathOfFileInDocumentsDictory]; 
```

所以在更糟糕的情况下，这个方法将运行 100 张图像，我使用 XCode 检查过这个方法大约需要 100 毫秒。因此，如果我没记错的话，这使 100 张图像需要 10 秒。我想让它高效。有没有更好的方法可以在更短的时间内有效地读取这些图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:42:24.380

使用运行循环，您可以这样做：

```
-(void) loadInBackground {

    [self performSelectorInBackground:@selector(_loadInBackground) withObject:nil];

}

-(void) _loadInBackground {

    // Do all your heavy loading here
    UIImage *currentImage = [UIImage imageWithContentsOfFile:pathOfFileInDocumentsDictory];
    [self performSelectorOnMainThread:@selector(loadedImage:) withObject:currentImage waitUntilDone:YES];

}

-(void) loadedImage:(UIImage*)img {

    // Do something with the loaded image
    anImageView.image = img;

} 
```

# java - 玩！框架 - 向后兼容性

> ID：12285041
> 
> 赞同：0
> 
> 时间：2012-09-05T15:38:38.543
> 
> 标签：java, web, playframework, playframework-2.0, backwards-compatibility

我目前正在开发一个由 Play 提供支持的新网站！框架 2.0，我有两个问题：

1.  在不久的将来会有更新的版本吗？
2.  如果上述答案是“是”，是否会有向后兼容性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:46:02.523

Branch 2.x 是当前最新的稳定版本，没有新版本的计划。

你可以使用它，而且我认为下一个革命性版本至少需要很长时间。

# sql - SQL - 删除具有相同名称的列

> ID：12285042
> 
> 赞同：0
> 
> 时间：2012-09-05T15:38:38.777
> 
> 标签：sql

> **可能重复：**
> [同一表上的内连接和左连接](https://stackoverflow.com/questions/12284502/inner-and-left-join-on-the-same-tables)

我目前有这个声明

```
SELECT A.*, B.* FROM A a INNER JOIN B b ON A.x = B.x 
```

但是，A 和 B 都有第二个通常命名的列：y。我只想拥有 A 中的 y 列（不包括 B 中的列），而不删除 A.* 和 B.* 部分（每个表中的许多其他列可能总是存在也可能不存在）。这可能吗？

例子

一个

```
x  y  
0  3
1  4
2  5 
```

乙

```
x  y
0  8
1  null
9  7 
```

结果

```
x  y
0  3
1  4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:47:21.363

看看 [SQL exclude a column using SELECT * [except columnA] FROM tableA?](https://stackoverflow.com/questions/729197/sql-exclude-a-column-using-select-except-columna-from-tablea) 第二个答案。不是最佳解决方案，但您可以将其用作解决方法。通常，您应该明确指定完整的列列表。

# php - PHP目录权限检查

> ID：12285045
> 
> 赞同：5
> 
> 时间：2012-09-05T15:38:44.587
> 
> 标签：php

我有一个 PHP 脚本需要检查目录的权限以确保它是可写的。到目前为止，我所拥有的是：

```
$perms = substr(sprintf('%o', fileperms($folder)), -4);
if ($perms == "0777" || is_writable('temp'.DS)) 
{
    //code here
} 
```

这是一个足够的检查吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T15:41:53.193

无需手动检查权限，使用[`is_writable`](http://php.net/manual/en/function.is-writable.php)and就足够了[`is_dir`](http://php.net/manual/en/function.is-dir.php)：

```
if (is_dir($myDir) && is_writable($myDir)){
   //do stuff
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T15:42:37.187

PHP`is_writable()`应该足够了。以下是 PHP 手册中的描述：

> 文件名参数可能是一个目录名，允许您检查目录是否可写。

有关详细信息，请参阅[http://php.net/manual/en/function.is-writable.php 。](http://php.net/manual/en/function.is-writable.php)

# php - 如何查找已上传的数据量？

> ID：12285047
> 
> 赞同：1
> 
> 时间：2012-09-05T15:38:53.207
> 
> 标签：php, ajax

我正在尝试制作一个基于 ajax 的进度条。但是，我不知道如何计算上传了多少数据，我想将其显示为上传数据的百分比。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:41:23.900

您可以使用 APC 或 PEAR 包上传进度。

[http://pecl.php.net/package/uploadprogress](http://pecl.php.net/package/uploadprogress)

有一段时间没有这样做了，我记得 Webkit 存在问题并且必须使用 iframe。可能想调查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:00:57.573

尝试这个：-

演示网址：--

[http://jquery.malsup.com/form/progress.html](http://jquery.malsup.com/form/progress.html)

您可以从此 url 下载 jQuery 文件并添加 html 标签

[http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js)

[http://malsup.github.com/jquery.form.js](http://malsup.github.com/jquery.form.js)

尝试这个：

这是我的 html 标记：

```
<!doctype html>
<head>
<title>File Upload Progress Demo #1</title>
<style>
body { padding: 30px }
form { display: block; margin: 20px auto; background: #eee; border-radius: 10px; padding: 15px }

.progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
.bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
.percent { position:absolute; display:inline-block; top:3px; left:48%; }
</style>
</head>
<body>
    <h1>File Upload Progress Demo #1</h1>
    <code>&lt;input type="file" name="myfile"></code>
        <form action="upload.php" method="post" enctype="multipart/form-data">
        <input type="file" name="uploadedfile"><br>
        <input type="submit" value="Upload File to Server">
    </form>

    <div class="progress">
        <div class="bar"></div >
        <div class="percent">0%</div >
    </div>

    <div id="status"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<script>
(function() {

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('form').ajaxForm({
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    complete: function(xhr) {
     bar.width("100%");
    percent.html("100%");
        status.html(xhr.responseText);
    }
}); 

})();       
</script>

</body>
</html> 
```

我的PHP代码：

```
<?php
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

# html5-video - Anythingslider html 5 视频自动播放

> ID：12285052
> 
> 赞同：1
> 
> 时间：2012-09-05T15:39:29.380
> 
> 标签：html5-video, anythingslider, autoplay

请我需要你的帮助伙计们！

我正在使用 Anythingslider 在 HTML5 视频和其他内容之间滑动，但是当我在视频标签中添加自动播放属性时，Anythingslider 只播放音频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:48:50.273

您确定视频没有隐藏在另一个元素后面吗？使用 z-index 播放，因为视频应该可见。过去我遇到过一些问题，例如视频在滚动时忽明忽暗。

我最终在灯箱中播放视频，因为随着轮播继续滚动，任何滑块都会让视频播放。此外，如果您使用无限滚动条，在两个地方播放视频也会出现问题。

如果您使用的是 JW Player 之类的东西，您将能够设置一些操作来暂停幻灯片或类似视频上的视频，但基本的 youtube 嵌入将是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:37:42.833

不要将自动播放属性添加到 HTML5 视频。可能发生的情况是视频的克隆副本（仅限第一张和最后一张幻灯片）正在播放视频，但您听到的只是音频，因为面板不在视图中。您不想自动播放的原因是，即使 AnySlider 从另一张可见的幻灯片开始，它仍然会自动播放，并且在您循环浏览面板之前它不会停止。

如果您希望在面板可见时自动播放视频，您必须在完成的回调中添加一些脚本（下面的代码不需要视频扩展；[演示](http://jsfiddle.net/Mottie/ycUB6/495/)）：

```
var playvid = function(slider) {
    var vid = slider.$currentPage.find('video');
    if (vid.length) {
        // autoplay
        vid[0].play();
    }
};

$('#slider').anythingSlider({

    // Autoplay video in initial panel, if one exists
    onInitialized: function(e, slider) {
        playvid(slider);
    },
    // pause video when out of view
    onSlideInit: function(e, slider) {
        var vid = slider.$lastPage.find('video');
        if (vid.length && typeof(vid[0].pause) !== 'undefined') {
            vid[0].pause();
        }
    },
    // play video
    onSlideComplete: function(slider) {
        playvid(slider);
    },
    // pause slideshow if video is playing
    isVideoPlaying: function(slider) {
        var vid = slider.$currentPage.find('video');
        return (vid.length && typeof(vid[0].pause) !== 'undefined' && !vid[0].paused && !vid[0].ended);
    }

});​ 
```

# zend-framework - Zend_Log 用一个新的 writer 替换现有的 writer

> ID：12285053
> 
> 赞同：0
> 
> 时间：2012-09-05T15:39:33.443
> 
> 标签：zend-framework, zend-log

这是我的问题：我想使用现有的 Zend_Log 实例（我的应用程序中已经存在的实例），但我想将我的日志写入另一个文件（与现有写入器中的日志文件路径相同，但名称不同）。你们知道我该怎么做吗？到目前为止，我只找到了一个基于 Zend_Log 实例 + 少数编写器 + 过滤器的解决方案 -> 每个日志条目都写入不同的文件名。现有的 Zend_Log 实例只有一个写入器（Zend_Log_Writer_Stream 类的实例）。我的印象是这样的事情真的很微不足道，但我找不到它。我当前的解决方案是创建一个 Zend_Log 的新实例并添加一个新的编写器。欢迎提出任何建议 :) 我希望这不是一个愚蠢的问题 :D 我不是 ZF 大师。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:33:40.037

在当前的实现中，你不能从 Zend_Log 中分离一个 writer。

您的选择是：

*   添加新的编写器到 Zend_Log 并让自己接受将有两个日志的事实。
*   创建新的 Zend_Log，只附加一个写入器。

# python - 在 django 中从 SSO + OpenID 对用户进行身份验证，用于谷歌应用自定义域

> ID：12285058
> 
> 赞同：1
> 
> 时间：2012-09-05T15:39:40.610
> 
> 标签：python, django, oauth, google-apps, google-openid

经过大量阅读和研究后，我发现以下[库](https://github.com/simul14/django-googleappsauth)最适合我的需求：使用自定义谷歌应用域注册/登录用户。

我做了以下设置：

```
GOOGLE_APPS_DOMAIN = 'example.com'
GOOGLE_APPS_CONSUMER_KEY = 'example.com'
GOOGLE_APPS_CONSUMER_SECRET = '*sekret*'
# domain where your application is running
GOOGLE_OPENID_REALM = 'http://*.hudora.biz/'
    GOOGLE_OPENID_ENDPOINT = 'https://www.google.com/accounts/o8/ud' 
```

添加了自定义中间件和其他东西。

但是从现在开始，我在哪里更进一步，显示表单并将表单发布到 url，我如何询问用户信息，文档中没有给出。

*   有人可以帮我吗？
*   我如何为用户提供登录/注册的功能？
*   如何自定义视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:29:02.527

你快到了。为了在您的本地主机上对其进行测试，您需要执行以下操作：

1.  您需要在[Google API 控制台](https://code.google.com/apis/console/)注册一个应用程序（注册时，请将您的域 127.0.0.1:8000 或您的服务器运行的确切位置）

2.  您需要检查项目的范围，例如。日历或地图等

3.  您需要获取密钥。

4.  一旦你得到了秘密，把它们放在你的设置文件中，如上所述。将 example.com 和 *.hudora.biz 更改为 127.0.0.1:8000

5.  从[库视图](https://github.com/simul14/django-googleappsauth/blob/master/googleappsauth/views.py)中导入视图以进行登录和注销，并将它们映射到您的 url，可能是登录/注销。

这就是所有需要的。希望能帮助到你！

# tinymce - Orchard cms 将 data-mediapicker-uploadpath 添加到自定义类型

> ID：12285059
> 
> 赞同：1
> 
> 时间：2012-09-05T15:39:43.963
> 
> 标签：tinymce, orchardcms

我在 orchard cms 中创建了一个自定义类型，它有两列布局

它有 2 个标题文本文件和 2 个内容 HTML 风格文件

继承人迁移：

```
public class MigrationTwoColumnPageType : DataMigrationImpl
{
    public int Create()
    {
        // Define the project type 
        ContentDefinitionManager.AlterTypeDefinition("TwoColumnPage", cfg => cfg
            .WithSetting("Stereotype", "Content")
            .CommomPart()
            .AutoroutePart()
            .WithPart("TitlePart")
            .WithPart("MenuPart")
            .WithPart("TagsPart")
            .WithPart("PublishLaterPart")
            .WithPart("TwoColumnPage")
            .Creatable()
            .Draftable());

        return 1;

    }

    public int UpdateFrom1()
    {
        // Define project part - having a part with the same name will create fields in the project type
        ContentDefinitionManager.AlterPartDefinition("TwoColumnPage", builder => builder
           .TextField("Column1Title", Flavour.Large)
           .TextField("Column1Text", Flavour.Html)
           .TextField("Column2Title", Flavour.Large)
           .TextField("Column2Text", Flavour.Html)
           .Attachable());

        return 2;
    }   
} 
```

注意：TextField 是一种自定义扩展方法，可以让事情变得不那么冗长

当我尝试使用媒体选择器将图像上传到这些内容字段之一时，我收到一个未找到文件夹的错误，-我已将其追溯到未设置请求查询字符串上的媒体路径

```
// media directory to save uploaded files into
    var mediaPath = Request["uploadpath"]; 
```

在 ../../Orchard.MediaPicker/Views/admin/Tab_Url.cshtml

有没有办法使用归档设置进行设置？

似乎对于我创建的任何页面都可以正常工作，但是自定义类型....如何设置此值？

**更新**

这是页面的 xml 元数据...

```
<!--Exported from Orchard-->
<Orchard>
  <Recipe>
    <Name>Generated by Orchard.ImportExport</Name>
    <Author>admin</Author>
  </Recipe>
  <Metadata>
    <Types>
      <Page ContentTypeSettings.Creatable="True" ContentTypeSettings.Draftable="True" TypeIndexing.Included="true" DisplayName="Page">
        <NavigationPart />
        <CommonPart DateEditorSettings.ShowDateEditor="true" />
        <PublishLaterPart />
        <TitlePart />
        <AutoroutePart AutorouteSettings.AllowCustomPattern="true" AutorouteSettings.AutomaticAdjustmentOnEdit="false" AutorouteSettings.PatternDefinitions="[{Name:'Title', Pattern: '{Content.Slug}', Description: 'my-page'}]" AutorouteSettings.DefaultPatternIndex="0" />
        <BodyPart />
        <TagsPart />
        <LocalizationPart />
      </Page>
    </Types>
    <Parts>
      <NavigationPart ContentPartSettings.Attachable="True" />
      <CommonPart ContentPartSettings.Attachable="True" />
      <PublishLaterPart ContentPartSettings.Attachable="True" />
      <TitlePart ContentPartSettings.Attachable="True" />
      <AutoroutePart ContentPartSettings.Attachable="True" />
      <BodyPart ContentPartSettings.Attachable="True" BodyPartSettings.FlavorDefault="html" />
      <TagsPart ContentPartSettings.Attachable="True" />
      <LocalizationPart />
    </Parts>
  </Metadata>
</Orchard> 
```

这是我的自定义类型的 XML 元数据，使用 TestFiledSetting 而不是 BodyPartSetting

```
<!--Exported from Orchard-->
<Orchard>
  <Recipe>
    <Name>Generated by Orchard.ImportExport</Name>
    <Author>admin</Author>
  </Recipe>
  <Metadata>
    <Types>
      <TwoColumnPage Stereotype="Content" OwnerEditorSettings.ShowOwnerEditor="false" ContentTypeSettings.Creatable="True" ContentTypeSettings.Draftable="True" DisplayName="Two Column Page">
        <CommonPart />
        <AutoroutePart AutorouteSettings.PatternDefinitions="[{Name:'/Title', Pattern: '/{Content.Slug}', Description: 'my-page'}]" />
        <TitlePart />
        <MenuPart />
        <TagsPart />
        <PublishLaterPart />
        <TwoColumnPage />
      </TwoColumnPage>
    </Types>
    <Parts>
      <CommonPart ContentPartSettings.Attachable="True" />
      <AutoroutePart ContentPartSettings.Attachable="True" />
      <TitlePart ContentPartSettings.Attachable="True" />
      <MenuPart ContentPartSettings.Attachable="True" />
      <TagsPart ContentPartSettings.Attachable="True" />
      <PublishLaterPart ContentPartSettings.Attachable="True" />
      <TwoColumnPage ContentPartSettings.Attachable="True">
        <Column1Title.TextField TextFieldSettings.Required="True" TextFieldSettings.Flavor="Large" TextFieldSettings.Hint="" />
        <Column1Text.TextField TextFieldSettings.Required="True" TextFieldSettings.Flavor="Html" TextFieldSettings.Hint="" />
        <Column2Title.TextField TextFieldSettings.Required="True" TextFieldSettings.Flavor="Large" TextFieldSettings.Hint="" />
        <Column2Text.TextField TextFieldSettings.Required="True" TextFieldSettings.Flavor="Html" TextFieldSettings.Hint="" />
      </TwoColumnPage>
    </Parts>
  </Metadata>
</Orchard> 
```

两者都没有提到 data-mediapicker-uploadpath 。我还是迷路了！

# c++ - 字符串长度函数wrt空字符的奇怪行为？

> ID：12285060
> 
> 赞同：1
> 
> 时间：2012-09-05T15:39:50.733
> 
> 标签：c++, string

我有这段代码说：

```
 std::string str("ashish");  
 str.append("\0\0");  
 printf("%d", str.length()); 
```

它正在打印 6 但如果我有这个代码

```
 std::string str("ashish");  
 str.append("\0\0",2);  
 printf("%d", str.length()); 
```

它正在打印 8 ！为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:41:35.120

这是因为`str.append("\0\0")`使用空字符来确定字符串的结尾。所以“\0\0”的长度为零。另一个重载 ,`str.append("\0\0",2)`只取你给它的长度，所以它附加了两个字符。

从标准：

> ```
>  basic_string&
>    append(const charT* s, size_type n); 
> ```
> 
> 7         *要求：* `s`指向至少`n`包含`charT`.
> 
> 8         次*抛出：* length_error 如果 size() + n > max_size()。
> 
> 9         *效果：*该函数用`*this`长度为的字符串替换控制的字符串，该字符串`size() + n`的第一个`size()`元素是由控制的原始字符串的副本`*this`，其余元素是初始`n`元素的副本`s`。
> 
> 10         *返回：* `*this` .
> 
> ```
>  basic_string& append(const charT* s); 
> ```
> 
> 11         *要求：* `s`指向至少`traits::length(s) + 1`包含`charT`.
> 
> 12         *效果：*呼叫`append(s, traits::length(s))`。
> 
> 13         *返回：* `*this` .
> 
>                                                                *— [string::append] 21.4.6.2 p7-13*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:43:41.063

从文档：

> `string& append ( const char * s, size_t n );`
> 
> 追加由 s 指向的字符数组中的前 n 个字符形成的字符串的副本。
> 
> `string& append ( const char * s );`
> 
> 附加由 s 指向的以空字符结尾的字符序列（C 字符串）形成的字符串的副本。此字符序列的长度由第一次出现的空字符确定（由 traits.length(s) 确定）。

第二个版本（您的第一个版本）考虑了空终止符（在您的情况下正是第一个字符）。第一个没有。

# javascript - 如何挂钩到 window.print 对话框关闭事件以调用函数

> ID：12285061
> 
> 赞同：2
> 
> 时间：2012-09-05T15:39:50.903
> 
> 标签：javascript, javascript-events

如何挂钩到 window.print 对话框关闭事件来调用函数？

我正在使用 jQuery 插件**[Datatables](http://datatables.net/)**和**[Table tools 插件](http://datatables.net/extras/tabletools/)**从网页打印数据。

### 默认行为

*   将表格数据格式化为仅在页面上可见的元素
*   显示一个 div，告诉用户单击浏览器上的打印按钮。
*   用户打印后，用户必须按`Esc`，这会使页面看起来与单击打印按钮之前一样。

![默认数据表示例](../Images/f7255891d800560aa79c5c1a86964243.png)

### 期望的行为

*   数据格式相同
*   不要显示点击打印按钮的说明
*   称呼`window.print();`
*   打印对话框关闭后，使页面看起来与单击打印按钮之前一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:18:07.377

不需要 JavaScript，这个 CSS 解决方案怎么样？这也应该适用于所有浏览器。

```
@media print
{
 /* Add here any selector for ('root') elements you do not want to be printed. */
 .header, .footer, .floating-print-instructions
 {
  display: none;
 }
} 
```

请注意，如果选择器匹配在其属性中具有显式`display: block`（和相似）的元素`style`等（或使用 JavaScript），它可能仍会显示。

另外，我相信一些浏览器（Internet Explorer？）有`beforeprint`事件`afterprint`，我想你可以听他们并采取相应的行动，但这并不是真正的跨浏览器实现，它比普通的 CSS 稍微复杂一些。

您可以通过监听 keyup/keydown 事件来了解用户按下了 Cotrol + P。但是，用户可以使用其他方式（菜单、工具栏按钮）进行打印。此外，在某些浏览器 (Chrome) 中，`window.print()`它是部分异步的（只有`window.close()`调用在它之后同步运行），因此您的代码可能会在它之后运行。

# java - NCSA 请求处理程序在 pax-web 1.1.4 中不起作用

> ID：12285065
> 
> 赞同：3
> 
> 时间：2012-09-05T15:40:01.857
> 
> 标签：java, pax, pax-web

我尝试在 pax-web 1.1.4 中启用 NCSA 请求日志记录。推荐的[方法](http://team.ops4j.org/browse/PAXWEB-269)不起作用。该文件已创建，但它保持为空。查看源代码，我发现 Jetty 服务器的 pax Web 实现将请求传递给 JettyServerHandlerCollection，它假定每个处理程序都应该对应一个上下文。所以我看起来不可能只使用 org.ops4j.pax.web.log.ncsa.* 选项。

我是否遗漏了什么或此功能在 pax web 中不起作用？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:12:29.197

是的，这是 Pax-Web 中的一个错误，已在[PAXWEB-416上归档](http://team.ops4j.org/browse/PAXWEB-416)

# .net - 安装 VS 2012 后缺少框架

> ID：12285069
> 
> 赞同：5
> 
> 时间：2012-09-05T15:40:32.340
> 
> 标签：.net, .net-4.0, .net-2.0, visual-studio-2012, .net-4.5

所以我有两台机器我安装了 2012 并且它们没有安装相同的框架，正确的看起来像这样

机器A截图： ![在职的](../Images/157b5615b3792116ab6c0500d81bfe28.png)

但不正确的看起来像这样

机器 B 截图： ![在此处输入图像描述](../Images/854fb0fb138c95f64a52afc301be95f4.png)

请注意，第二个屏幕截图/机器 B 中缺少以下包

*   Microsoft .Net Framework 4 客户端配置文件
*   Microsoft .Net Framework 4 扩展

因此，当我在 2010 年打开 2010 年项目时，我现在收到此错误

![在此处输入图像描述](../Images/3df26f08b4e63ac089c87f742e843e84.png)

不工作的机器缺少 Visual Studio 2010 和 2012 中的 2.0 框架

![在此处输入图像描述](../Images/339e110d817a7e292b7fb23633294348.png)

但我已经安装了 .net 2.0 框架，但仍然收到相同的消息，并且该框架没有出现在 Visual Studio 2012 和 2010 中。

![在此处输入图像描述](../Images/5eeebbfb862a144cd6b3ecb4ba35b7b0.png)

任何人都知道为什么以及我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:55:05.787

应该通过 Windows 更新（它将检测您在下一次计划更新中缺少的内容）或通过重新启动 Visual Studio 安装，我相信有一个修复现有安装的选项。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:19:39.950

您需要安装 .NET Framework 2.0 和 3.5（这是您的项目要求的），这取决于您的 Windows 版本，但对于 Windows 7 和更高版本，您需要打开控制面板的程序和功能小程序，并且点击打开或关闭 Windows 功能，然后启用 .NET Framework 3.5，在早期的 Windows 版本中，您需要从 Microsoft 的网站下载并安装它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:39:29.317

卸载所有与框架 4 相关的东西，不要碰任何其他版本。重新安装框架 4。它还应该安装/更新/修复 v2。

# linux - linux蓝牙低功耗源代码

> ID：12285072
> 
> 赞同：2
> 
> 时间：2012-09-05T15:40:36.330
> 
> 标签：linux, bluetooth, linux-kernel, bluetooth-lowenergy

上网后，没找到，linux中蓝牙低功耗实现的源代码。

bulez 已经实施了吗？好心劝告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:34:55.750

我得出了同样的结论，在这一点上没有标准的“即用型解决方案”。

一种选择是使用蓝牙 4.0 USB 加密狗，例如[Bluegiga BLED112 加密狗](http://www.bluegiga.com/BLED112_Bluetooth_low_energy_dongle)。加密狗基本上实现了完整的 BLE 堆栈，并被系统识别为串行端口（linux 中的 ttyACM 设备）。串行端口上有一个二进制协议来与蓝牙堆栈交互（配置、连接到设备等）。

Bluegiga 为二进制协议提供了一个 C API，并且有一个开源的[Java 实现](https://github.com/SINTEF-9012/bglib)。我们在 linux 上使用两者都没有问题。

# c# - 为什么 Sitecore 从 C# API 发布草稿项目，我该如何阻止它这样做？

> ID：12285080
> 
> 赞同：9
> 
> 时间：2012-09-05T15:41:09.403
> 
> 标签：c#, sitecore, publish, sitecore6, sitecore-workflow

我正在使用 Sitecore 发布 API 运行我的 Sitecore 主数据库的计划发布。我在一天中以预定的时间间隔调用一个 Web 服务，它运行以下代码（为了便于阅读而略微压缩）：

```
// grab the root content node from sitecore
Item contentNode = dbSource.Items[ID.Parse("{0DE95AE4-41AB-4D01-9EB0-67441B7C2450}")];

PublishOptions options = new PublishOptions(sourceDatabase, targetDatabase, PublishMode.Smart, lang, DateTime.Now);

options.RootItem = contentNode;

options.Deep = true;

Publisher p = new Publisher(options);

p.PublishAsync(); 
```

当我们运行上面的代码时，它会发布内容节点中的所有内容，包括所有后代，而不管工作流状态如何。就好像它完全忽略了工作流程。这不是我们所追求的，并且在我们的实时网站上造成了很多问题。

如果我们在 Sitecore Desktop 中运行相同的操作，它会发布内容节点中的所有内容，包括所有可发布的后代**（**即在最终工作流程阶段）。***它不会发布树中仍处于草稿模式的任何项目。这是必需的行为。***

我尝试通过使用以下 using 语句围绕上述代码以非管理员用户身份实现代码：

```
string userName = @"sitecore\******";

Sitecore.Security.Accounts.User user = Sitecore.Security.Accounts.User.FromName(userName, true);

user.RuntimeSettings.IsAdministrator = false;

using (new Sitecore.Security.Accounts.UserSwitcher(user))
{
    ...
} 
```

不幸的是，这没有任何效果。

有什么明显的我遗漏了，还是我做得对而 Sitecore 做错了？有人可以帮忙吗？

我还注意到一个奇怪的事情是，当在实时数据库中查看已发布的草稿项目时，在 Sitecore 桌面中完全没有显示任何字段或元数据。他们还显示“当前项目没有“英语：英语”版本的警告。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T15:51:48.847

问题可能是您的 Web 服务未在启用了工作流的站点上下文中运行。

在代码中执行此操作的最简单方法是使用 a`SiteContextSwitcher`更改为“shell”站点。

```
using (new SiteContextSwitcher(SiteContextFactory.GetSiteContext("shell")))
{
    //do your publish
} 
```

至于没有版本的已发布项目：理论上，即使定期发布也会发生这种情况。工作流限制项目版本的发布，而不是项目本身。在您的代码中，在迭代项目时以及在其他情况下，您需要`item.Versions.Count > 0`在渲染之前检查是否。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T14:24:33.713

***TL；DR*根内容节点具有另一种语言的版本，删除该版本，或仅以英语发布阻止以草稿模式发布项目**

好的，所以在尝试了@techphoria414 的建议代码之后，很明显上下文不是问题。发布者毕竟遵守了工作流程，但问题是根内容节点具有另一种语言的版本（日语 - 不要问我这是如何到达那里的），但后代节点没有日语版本一点也不。事实上，我们的主数据库仅配置为将英语作为一种语言，因此管理员以外的用户甚至不可能添加另一种语言的版本。

我进行了一些测试，发现发布者忽略了以另一种语言存在的项目的工作流程。考虑以下场景：

1）您添加一个文件夹和下面的任何项目（“测试工作流程项目”），它具有工作流程。不要提交项目，将其保留在版本 1，处于草稿模式（即不应发布）。**包含文件夹**只有一种语言（英语）的一个版本：

![您添加一个文件夹和下面有工作流的任何项目](../Images/4b6d46d097cf3ac970f1c796c320928c.png) ![文件夹只有英文版](../Images/214ad031f73b2785be607f5ff39f513b.png)

2）您将具有深度发布的文件夹发布到您的网络数据库（使用我的问题中的代码）。这会导致以下结果（添加了文件夹，但未添加草稿“测试工作流程项目”）。这是预期的行为 - 耶！

![您使用深度发布发布文件夹](../Images/42893548943f3d78dacd0c77290eae25.png)

3) 将新版本添加到包含不同语言**的文件夹中。**

![以不同的语言将新版本添加到包含文件夹](../Images/57237657c70ac9394e5a78bd2f59c23d.png)

4) 现在选择日语作为语言，检查子项目的工作流程状态。请注意，在装订线中它不再说它处于草稿模式，但根本没有日语版本（如右图所示）。

![既然选择了日语作为语言，请检查子项目的工作流状态](../Images/a94aa099be4a2a59d9358cb2d93c52fc.png)

5）将所有语言的**包含文件夹**发布到网络数据库，与以前完全相同。现在请注意，“测试工作流项目”已经发布，但根本没有任何版本。**这就是我们发布时发生的情况，除了根内容节点，这意味着发布了无数不应该发布的项目**

![使用完全相同的代码再次发布](../Images/44229c34c71886bcc9bae7d2d4c30460.png)

现在，为什么我们的根内容节点有一个日文版本是一个完全的谜，但至少我们已经弄清楚了为什么我们的草稿项目会被发布，这样我们就可以在未来阻止它。我怀疑这与升级 Sitecore 有关，因为有 2 个日语版本大致对应于过去 2 年的升级日期。

# c++ - c ++变量赋值，这是一种正常的方式..？

> ID：12285081
> 
> 赞同：8
> 
> 时间：2012-09-05T15:41:12.850
> 
> 标签：c++, variables, styles, variable-assignment

这可能是一个愚蠢的问题，但我还是有点好奇……最近我在做我以前同事的一个项目，我注意到他真的很喜欢用这样的东西：

```
int foo(7); 
```

代替：

```
int foo = 7; 
```

这是用 C++ 语言做的正常/好方法吗？它有什么好处吗？（*或者这只是他喜欢的一些愚蠢的编程风格......？*）

这真的让我想起了如何在类构造函数中分配类成员变量的一个好方法......像这样：

```
class MyClass
{
public:
   MyClass(int foo) : mFoo(foo)
   { }

private:
   int   mFoo;
}; 
```

而不是这个：

```
class MyClass
{
public:
   MyClass(int foo)
   {
      mFoo = foo; 
   }

private:
   int   mFoo;
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T15:46:04.093

对于基本类型，没有区别。使用与现有代码一致并且看起来更自然的任何一个。

否则，

```
A a(x); 
```

执行**直接初始化**，并且

```
A a = x; 
```

执行**复制初始化**。

第二部分是成员初始化列表，在 StackOverflow 上有很多关于它的问答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:47:50.660

两者都是有效的。对于内置类型，它们做同样的事情；对于类类型，存在细微差别。

```
MyClass m(7);  // uses MyClass(int)
MyClass n = 3; // uses MyClass(int) to create a temporary object,
               // then uses MyClass(const MyClass&) to copy the
               // temporary object into n 
```

明显的含义是，如果`MyClass`没有复制构造函数，或者它有一个但不可访问，则尝试构造失败。如果构造成功，则允许编译器跳过复制构造函数并`MyClass(int)`直接使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T15:49:56.243

以上所有答案都是正确的。只需添加 C++11 支持另一种方式，即他们所说的用于初始化变量的通用方式。

```
int a = {2} ; 
```

或者

```
int a {2} ; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T16:12:57.040

我更喜欢使用括号样式......虽然我总是使用空格来区分函数或方法调用，我不使用空格：

```
int foo (7); // initialization
myVector.push_back(7); // method call 
```

我更喜欢全面使用它进行初始化的原因之一是因为它有助于提醒人们这*不是*一项任务。因此，赋值运算符的重载将不适用：

```
#include <iostream>

class Bar {
private:
    int value;
public:
    Bar (int value) : value (value) {
        std::cout << "code path A" << "\n";
    }
    Bar& operator=(int right) {
        value = right;
        std::cout << "code path B" << "\n";
        return *this;
    }
};

int main() {
    Bar b = 7;
    b = 7;
    return 0;
} 
```

输出是：

```
code path A
code path B 
```

感觉就像等号的存在掩盖了差异。即使它是“常识”，我也喜欢让初始化看起来与赋值明显不同，因为我们能够这样做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T16:08:52.237

你的问题根本不是一个愚蠢的问题，因为事情并不像看起来那么简单。假设你有：

```
class A {
  public:
    A() {}
}; 
```

和

```
class B {
  public:
    class B(A const &) {}
}; 
```

写作

```
B b = B(A()); 
```

要求 B 的复制构造函数是可访问的。写作

```
B b = A(); 
```

还要求 B 的转换构造函数 B(A const &) 未显式声明。另一方面，如果你写

```
A a;
B b(a); 
```

一切都很好，但如果你写

```
B b(A()); 
```

这被编译器解释为一个函数 b 的声明，它接受一个无名参数，该参数是一个返回 A 的无参数函数，导致神秘的错误。这被称为[C++ 中最令人头疼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-05T15:46:33.080

这是初始化变量的 C++ 风格 - C++ 为基本类型添加了它，因此可以将相同的形式用于基本类型和用户定义类型。这对于旨在为任何一种类型实例化的模板代码来说可能非常重要。

您是否喜欢将其用于基本类型的正常初始化是一种风格偏好。

请注意，C++11 还添加了[统一初始化语法](http://en.wikipedia.org/wiki/C++11#Uniform_initialization)，它允许对所有类型使用相同的初始化样式 - 甚至像 POD 结构和数组这样的聚合（尽管用户定义的类型可能需要有一个新类型的构造函数，该构造函数需要一个初始化列表以允许与它们一起使用统一的语法）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-05T15:54:09.483

其他几个好的答案指出了构造“就地”（`ClassType v(<constructor args>)`）和创建临时对象并使用复制构造函数复制它（`ClassType v = <constructor arg>`）之间的区别。我认为还需要补充两点。首先，第二种形式显然只有一个参数，所以如果你的构造函数接受多个参数，你应该更喜欢第一种形式（是的，有一些方法可以解决这个问题，但我认为直接构造更简洁易读 - 但是，正如已经指出的那样，这是个人喜好）。

其次，如果您的复制构造函数所做的事情与您的标准构造函数有很大不同，那么您使用的形式很重要。大多数时候情况并非如此，有些人会争辩说这样做是个坏主意，但语言确实允许这种情况（尽管如此，你最终会遇到所有的惊喜，是你自己的错）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-05T15:43:29.160

这只是初始化某些东西的语法：-

```
SomeClass data(12, 134); 
```

这看起来很合理，但是

```
int data(123); 
```

看起来很奇怪，但它们的语法相同。

# java - 为什么当字段上的可更新=假时休眠会做areEqual

> ID：12285089
> 
> 赞同：2
> 
> 时间：2012-09-05T15:41:37.640
> 
> 标签：java, spring, hibernate

当我对表中的其他字段进行保存时，我有一个不想更新的 blob 字段。尽管我已将该字段指定为可更新 = 假，但 Hibernate 似乎正在执行 areEqual 检查。因为该字段是延迟加载的，所以它是空的，当它对保存进行 areEqual 检查时我得到一个 ClassCastException 。当它不可更新时，为什么要在该字段上进行比较？

所以我的领域被指定为：

```
@Basic(fetch = FetchType.LAZY)
@Column(
    insertable = true,
    updatable = false,
    name = "documentData"
)
@Lob private Blob documentData; 
```

在 org.springframework.data.repository.CrudRepository.save() 我收到以下错误：

```
java.lang.ClassCastException: org.hibernate.bytecode.instrumentation.spi.LazyPropertyInitializer$1 cannot be cast to java.sql.Blob
    at org.hibernate.type.descriptor.java.BlobTypeDescriptor.areEqual(BlobTypeDescriptor.java:45)
    at org.hibernate.type.AbstractStandardBasicType.isEqual(AbstractStandardBasicType.java:196)
    at org.hibernate.ejb.event.EJB3FlushEntityEventListener.copyState(EJB3FlushEntityEventListener.java:79)
    at org.hibernate.ejb.event.EJB3FlushEntityEventListener.invokeInterceptor(EJB3FlushEntityEventListener.java:66)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.handleInterception(DefaultFlushEntityEventListener.java:334)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.scheduleUpdate(DefaultFlushEntityEventListener.java:285)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:164)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:225)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:403)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:75)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:512)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:394)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.data.jpa.repository.support.LockModeRepositoryPostProcessor$LockModePopulatingMethodIntercceptor.invoke(LockModeRepositoryPostProcessor.java:91)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy216.save(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:51:33.493

您可以制作`@PreUpdate`方法，该方法将在更新之前加载延迟加载的字段

```
 @PreUpdate
  private void loadField()
  {
     getDocumentData();  
  } 
```

# c++ - Oracle 11gR1 或 R2 客户端上是否有设置可以在 ODBC API 调用中将 SELECT COUNT(*) 返回的数据类型从 DOUBLE 更改为 LONG？

> ID：12285091
> 
> 赞同：3
> 
> 时间：2012-09-05T15:41:44.240
> 
> 标签：c++, oracle, count, odbc

*当前使用 ODBC API 调用Oracle Client 10g* （所有版本）、11gR1 (v11.1.0.6) 的C++ 应用程序返回一个 LONG（4 字节整数） `SELECT COUNT(*) from tablename`

将 Oracle 客户端更改为 11gR1 (v11.1.0.7) 或更高版本（11.2.xy 等），并且同一语句返回 DOUBLE（相当于 oracle NUMBER 数据类型的 8 字节浮点值）。

由于后端数据库是相同的版本，因此必须有一个客户端设置（我推测）已更改此聚合 SQL 函数的默认行为以返回双精度而不是长整数。我希望找到这样的设置，我既可以通过 ODBC API 调用以编程方式设置，也可以在 Oracle 客户端配置本身中进行设置。

我什至尝试使用`SQL CAST`使其成为一个，`INT SELECT CAST(COUNT(*) AS INT) FROM tablename` 但仍然返回一个`DOUBLE`（8 字节浮点数）。

注意：鉴于我使用 ODBC，我已经编写了许多通用 C++ 代码，支持将返回值设为 LONG，因为 10 年来通过 ODBC 一直如此。如果可能的话，我想保持这一点，而不必在我的应用程序中编写 ORACLE 特定代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:45:21.370

聚合函数`count`返回一个`INTEGER`，它通常被称为`NUMBER(38,0)`。Oracle 数据库中的所有数值都以 Oracle`NUMBER`格式存储。

> 字节数：
> 
> [圆形（（长度（p）+s）/2）+1](http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i16209)
> 
> p = 精度；
> s = 0 表示正数，1 表示负数；
> 0和负无穷大消耗1个字节，正无穷大消耗2个字节；

```
select round((length(38)+0)/2)+1 from dual; --20 bytes 
```

试试这个（未测试）..

```
select vsize(count(*)) from tablename;
select dump(count(*)) from tablename; 
```

[OCI外部数据类型](http://docs.oracle.com/cd/B19306_01/appdev.102/b14250/oci03typ.htm)可以进行数据类型转换/映射。

# haskell - 获取列表中间元素的最有效方法是什么？

> ID：12285092
> 
> 赞同：2
> 
> 时间：2012-09-05T15:41:44.863
> 
> 标签：haskell, functional-programming

我想得到一个列表，但最后一个和第一个元素。最有效的方法是什么？

```
middle = init . tail 
```

或者：

```
middle = tail . init 
```

在删除 n-first 元素和 n-last 元素的情况下？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T15:53:25.917

无论哪种方式都没有关系（很多）。请注意，这`tail`是 O(1)，`init`而是 O(n)。如果您选择第`tail`一个，则`init`必须检查 (n-1) 个构造函数，总共检查了 n 个构造函数。

如果取第`init`一个，则`init`检查 n 个构造函数并`tail`检查 1，总共检查 n+1 个构造函数。

因此，这样做的效率会稍微高一点`init . tail`，但效率不会高到你应该担心的程度。

这同样适用于从列表的前端和末尾删除前 k 个元素，但它可能会产生更大的不同。如果您首先删除初始元素，那么在删除最终元素时不必检查它们，并且您可以节省一些时间，所以您应该这样做

```
dropLast k . drop k 
```

它检查 n 个构造函数，而不是

```
drop k . dropLast k 
```

它检查 n+k 构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T18:28:31.417

两者实际上是相同的。您正试图在错误的位置进行优化。如果您的代码确实需要进行这种优化，那么您可能不需要列表，请使用 Data.Sequence 或 Data.Vector 之类的东西。

# ios6 - 单个视图 Xcode 中的多个 TableView

> ID：12285093
> 
> 赞同：0
> 
> 时间：2012-09-05T15:41:45.787
> 
> 标签：ios6

我有一个有两个表视图的视图，我希望其中一个是 twitter 提要，另一个是 RSS 提要。问题是它们显示的内容完全相同。我尝试过使用另一个控制器，但我不能这样做，因为我无法弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T16:26:25.333

不确定您是否仍在寻找问题的答案，但无论如何它也可能对其他人有所帮助。我已经成功尝试了以下方法：您可以`tableviewcontroller`为每个`tableview`. 在您的表格视图控制器中，`viewDidLoad`您可以`alloc init`将表格视图的数据源和委托设置为您各自的`tableviewcontrollers`. 最后，将控制器的视图设置为控制器的`tableview`视图`tableview`。以下代码说明了我的意思：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // ...
    if(!self.tweeterTableViewController)
    {
        self.tweeterTableViewController = [[TweeterTableViewController alloc] init];
    }
    if(!self.rssTableViewController)
    {
        self.rssTableViewController = [[RssTableViewController alloc] init];
    }

    [self.tweeterTableView setDataSource:self.tweeterTableViewController];
    [self.tweeterTableView setDelegate:self.tweeterTableViewController];
    self.tweeterTableViewController.view = self.tweeterTableViewController.tableView;

    [self.rssTableView setDataSource:self.rssTableViewController];
    [self.rssTableView setDelegate:self.rssTableViewController];
    self.rssTableViewController.view = self.rssTableViewController.tableView;

    // ...
} 
```

# javascript - 根据文本值禁用复选框

> ID：12285095
> 
> 赞同：3
> 
> 时间：2012-09-05T15:41:51.790
> 
> 标签：javascript, jquery

当用户在文本区域中输入文本时，我需要禁用复选框，否则它将处于活动状态。我已经尝试了最相关的事件，但我无法让它发挥作用。onkeydown 在第一次按下时禁用，如果用户输入内容然后将其删除，onchange 将起作用。他们离开文本区域后似乎没有任何东西可以禁用它。

```
<script type="text/javascript">

    function enable_cb(textarea) { 
       if ($(textarea).val() != "" ) { 
        $("input.cmb").removeAttr("disabled"); 
    } 
    else { 
        $("input.cmb").attr("disabled", true); 
    } 
} 

</script>
Comments:<br />
<p><textarea name="issue" id="issue_ta" cols="50" rows="10" class="help" tabindex="2" title="Enter Detailed Description" onchange="enable_cb(this);"></textarea></p>
<p><input name="no_issue" type="checkbox" id="no_issue" class="cmb" />No Issues to Report</p>
<p class="label">Enter Current Vehicle Mileage:</p>
<p><input type="tel" name="record_mileage" class="required" tabindex="3" title="&nbsp;Enter Current Mileage&nbsp;" size="25"/></p>
<p><input type="submit" name="Submit" value="Send"/></p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:52:39.163

删除 onclick 处理程序并执行以下操作：

```
$(function() {
    $("#issue_ta").on('change keyup', function() {
        $("input.cmb").prop("disabled", this.value.length); 
    });
}); 
```

[**小提琴**](http://jsfiddle.net/c7u5b/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:48:10.380

谢谢大家。每个回应都让我朝着正确的方向前进。

```
 <script type="text/javascript">
 function enable_cb(textarea) {
    if ($(textarea).val() !== "") {
        $("input.cmb").prop("disabled", true);
    }
    else {
        $("input.cmb").prop("disabled", false);
    }
}
</script>

     Comments:<br />
<p><textarea name="issue" id="issue_ta" cols="50" rows="10" class="help" tabindex="2" title="Enter Detailed Description" onblur="enable_cb(this);"></textarea></p>
<p><input name="no_issue" type="checkbox" id="no_issue" class="cmb" />No Issues to Report</p>
<p class="label">Enter Current Vehicle Mileage:</p>
<p><input type="tel" name="record_mileage" class="required" tabindex="3" title="&nbsp;Enter Current Mileage&nbsp;" size="25"/></p>
<p><input type="submit" name="Submit" value="Send"/></p>
</form>​ 
```

[小提琴链接](http://jsfiddle.net/EDa4r/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:43:13.927

这个

```
 $("input.cmb").attr("disabled", true); 
```

应该是这个

```
 $("input.cmb").attr("disabled", "disabled"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T15:54:57.257

为什么不对 textArea 使用 blur 事件。这将确保在 textarea 失去焦点后执行代码。

试试这个代码..

```
// Your Markup..
Comments:<br />
<p><textarea name="issue" id="issue_ta" cols="50" rows="10" class="help" tabindex="2" title="Enter Detailed Description" ></textarea></p>
<p><input name="no_issue" type="checkbox" id="no_issue" class="cmb" />No Issues to Report</p>
<p class="label">Enter Current Vehicle Mileage:</p>
<p><input type="tel" name="record_mileage" class="required" tabindex="3" title="&nbsp;Enter Current Mileage&nbsp;" size="25"/></p>
<p><input type="submit" name="Submit" value="Send"/></p>​

// Your jQuery code..
​$(function() {
    $('#issue_ta').on('blur' , function(){
       var val =  $('#issue_ta').val();
        if(val == ''){
           $('#no_issue').attr('disabled', true);                 
        }
        else{
             $('#no_issue').attr('disabled', false);    
        }
    });
});​ 
```

您可以查看此小提琴以获取工作示例 [http://jsfiddle.net/sushanth009/A46py/](http://jsfiddle.net/sushanth009/A46py/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T15:49:21.613

“他们离开文本区域后似乎没有什么可以禁用它。”

`.blur`在这种情况下会很有帮助 - 它会检测用户何时离开元素，然后您可以应用您想要的效果。[.blur 文档](http://api.jquery.com/blur/)

# c# - 匿名用户的连接字符串

> ID：12285097
> 
> 赞同：0
> 
> 时间：2012-09-05T15:41:57.523
> 
> 标签：c#, sql-server, connection-string

我有一个用于将数据上传到受限数据库的网站。通常，当我为 SQL Server 插入构建连接字符串时，它来自内部用户，因此我可以使用 Windows 身份验证，当用户无权访问数据库时，最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:47:57.903

没错，阅读这篇文章 msdn 非常有趣

链接： http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.71).aspx)

链接： http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:47:09.443

最佳做法是授权您的网站运行所在的 IIS APPpool...您可以通过在 sqlserver 中创建用户来简单地做到这一点...例如 IISApppool\Yourapppoolname。您可以在 IIS 管理器中找到运行站点的池的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:45:00.863

您必须使用特定于网站的 SQL 用户。

# ruby-on-rails - Vagrant、VirtualBox、Capistrano、db:migrate - 无法连接到服务器

> ID：12285105
> 
> 赞同：2
> 
> 时间：2012-09-05T15:42:14.740
> 
> 标签：ruby-on-rails, capistrano, vagrant, dbmigrate

我刚刚完成了“部署 Rails”一书的工作，但我卡在 capaistrano 调用 db:migrate 的地方。

我已经设置了两个虚拟机——app und db——每个虚拟机都可以完美地工作。虚拟机应用程序托管在 nginx/unicorn 和虚拟机数据库托管 PostgreSQL。我可以“vagrant ssh”进入虚拟机，一切看起来都不错。

这是我定义了两个 VM 的 Vagrant 文件（我使用的是 Vagrant 1.0.3 版）：

```
Vagrant::Config.run do |config|

  config.vm.define :app do |app_config|
    app_config.vm.customize ["modifyvm", :id, "--name", "app", "--memory", "512"]
    app_config.vm.box = "lucid64_rb193_pp2719"
    app_config.vm.host_name = "app"
    app_config.vm.forward_port 22, 2200, :auto => true
    app_config.vm.forward_port 80, 8080
    app_config.vm.network :hostonly, "33.33.13.37"
    app_config.vm.share_folder "puppet", "/etc/puppet", "../log4job_ops"
  end

  config.vm.define :db do |db_config|
    db_config.vm.customize ["modifyvm", :id, "--name", "db", "--memory", "512"]
        db_config.vm.box = "lucid64_rb193_pp2719"
        db_config.vm.host_name = "db"
        db_config.vm.forward_port 22, 2201, :auto => true
        db_config.vm.forward_port 5432, 5432
        db_config.vm.network :hostonly, "33.33.13.38"
        db_config.vm.share_folder "puppet", "/etc/puppet", "../log4job_ops"
  end
end 
```

如您所见，发送到端口 8080 的数据被转发到应用程序 VM 的端口 80，并且运行良好。

当 PostgreSQL 监听端口 5432 时，我设置了 4532(Host)->4532(VM) 的端口转发。

但是，当运行“cap deploy:cold”或“cap deploy:migrate”时，它会收到以下错误消息（cap deploy:migrate）：

```
 * executing `deploy:migrate'
  * executing "ls -x /var/log4job/releases"
    servers: ["localhost"]
    [localhost] executing command
    command finished in 37ms
  * executing "cd /var/log4job/releases/20120905140228 && bundle exec rake RAILS_ENV=production  db:migrate"
    servers: ["localhost"]
    [localhost] executing command
*** [err :: localhost] rake aborted!
*** [err :: localhost] could not connect to server: Connection refused
*** [err :: localhost] Is the server running on host "localhost" and accepting
*** [err :: localhost] TCP/IP connections on port 5432?
*** [err :: localhost] could not connect to server: Connection refused
*** [err :: localhost] Is the server running on host "localhost" and accepting
*** [err :: localhost] TCP/IP connections on port 5432?
*** [err :: localhost] 
*** [err :: localhost] Tasks: TOP => db:migrate => environment
*** [err :: localhost] (See full trace by running task with --trace)
    command finished in 4128ms
failed: "sh -c 'cd /var/log4job/releases/20120905140228 && bundle exec rake RAILS_ENV=production  db:migrate'" on localhost 
```

问题：

1.  我究竟做错了什么？

2.  是在虚拟机“app”上运行的“rake db:migrate”命令。我假设，因为项目源代码部署到 /var/log4job/releases/20120905140228

3.  如果我在上面 nr 2 的假设是正确的，难怪它不起作用。PostgreSQL 在虚拟机“db”上运行。但是你到底是如何设置这种类型的服务的呢？我是否在 database.yml 中配置了错误的数据库连接。

这是 database.yml 的生产部分：

```
production:
  adapter: postgresql
  template: template0
  username: log4jobuid
  password: log4jobpwd
  database: wl_prod
  host: localhost
  encoding: unicode
  port: 5432 
```

舒尔。它说它应该听“localhost”;-) 但是我如何配置它，以连接到另一个 VM（“db”VM）？

欢迎任何提示！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:15:34.403

好，我知道了！

找到答案的最佳方法是写下问题;-)

我犯的错误都在database.yml中

它应该如下所示：

```
production:
  adapter: postgresql
  template: template0
  username: log4jobuid
  password: log4jobpwd
  database: wl_prod
  host: 33.33.13.38
  encoding: unicode
  port: 5432 
```

“host:”的 IP 地址应该是 DB VM 的 Vagrant 文件中规定的 IP 地址：

```
db_config.vm.network :hostonly, "33.33.13.38" 
```

现在我们知道，您可以使用虚拟机的 IP 地址从例如一个虚拟机“app”连接到另一个虚拟机“db”。

您还应该确保，您说明数据库的正确数据库名称、用户和密码。就我而言，我让 puppet 创建数据库，所以我在两边都使用相同的设置（现在 ;-)

# tridion - 在 tridion 发布时将外部多媒体文件推入打包

> ID：12285106
> 
> 赞同：5
> 
> 时间：2012-09-05T15:42:22.157
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

当我们从 tridion 发布一些页面/动态组件时，是否可以在发布时将一些外部多媒体文件/内容（例如：jpg 图像）添加到当前执行/渲染包中。这样最终的传输包就会有这个二进制文件原创发布内容？这是否可以通过自定义 tridion 渲染器/解析器来实现？如果是，请提供一些输入。

**注意：* *发布时需要推入打包的二进制内容在 tridion 中不作为多媒体组件存在，它位于 tridion CMS 之外的其他文件位置。相反，我们在已发布的组件中使用了一些存根多媒体组件/page 有一些虚拟图像。我们计划在发布（渲染/解析）时用原始图像替换存根图像。

由于我们在 DAM 工具中存储了大量的二进制内容，我们不希望将这些数据重新创建为 tridion 中的多媒体组件，因此我们希望通过查询 DAM 工具来使用该数据并将其附加到 tridion 包中，并带有一些逻辑参考计划来维护存根多媒体comp tcmid与某些映射数据库中的原始内容之间的一对一映射以供参考）。

请让我们知道是否有任何解决方案可以在发布时将外部二进制内容附加到包中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T15:52:00.817

最好的——也是最简单的方法——是使用 Tridion 提供的开箱即用的机制。创建一个新的多媒体组件，在资源类型下拉列表中选择“外部”，然后键入对象的 URL。只要您可以使用 URL 对其进行寻址，它就会完全按照您的意愿工作（项目将被添加到包裹中并发送到交付服务器）。

如果这对您来说还不够好，那么可以，您可以自己将其添加到包中。我过去曾使用类似这样的代码完成此操作：

```
FileInfo file = // Weird logic to get a FileInfo object from external system
Item item = package.GetItem("My original Item");
item.SetAsStream(file.OpenRead()); 
```

这用我想要的实际文件替换了我原始组件的内容。如果原始组件也是多媒体组件，这将适用于您。如果不是，只需使用您自己的名称等创建一个新项目。如果可能，请改用开箱即用的流程。

PS：[文件信息类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T07:20:45.447

正如 Nuno 所建议的，最好的方法是使用具有“外部”资源类型的多媒体组件。您可能不需要手动创建这些，您可以使用核心服务或 API 程序自动化。

我之前使用的另一种方法是在运行时创建 zip 文件并使用以下代码将其添加到包中。希望它可能会有所帮助。

```
using (MemoryStream ms = new MemoryStream())
                {
                    zip.Save(ms);
                    downloadAllInOneURL = String.Format("ZipAsset{0}.zip", uniqueZipID);
                    downloadAllInOneURL = m_Engine.PublishingContext.RenderedItem.AddBinary(ms, downloadAllInOneURL, "", "application/zip").Url;
                    downloadAllInOneSize = getSize(ms.Length);

                } 
```

# outlook - 在“发件人”字段上过滤的 Outlook 发送规则

> ID：12285110
> 
> 赞同：1
> 
> 时间：2012-09-05T15:42:24.083
> 
> 标签：outlook, outlook-2010

我使用 Outlook (ms exchange) 并有一个个人和一个组收件箱（我使用个人资料登录）。我正在尝试设置一个规则，如果我将电子邮件“发件人”发送到组电子邮件，则将在组收件箱中保存已发送电子邮件的副本，如果我将已发送电子邮件的副本保存在我的个人收件箱中，我正在尝试设置另一条规则发送电子邮件“来自”我的个人电子邮件。但是，我无法在组收件箱中设置规则，因为规则是客户端的，并且组配置文件通常未登录，并且无法设置过滤“发件人”字段或标题内容的发送规则。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:33:19.817

如果您不能使用“通过指定帐户”的[规则条件](http://office.microsoft.com/en-us/outlook-help/manage-email-messages-by-using-rules-HA010355682.aspx)，则需要创建[Outlook 加载项](http://msdn.microsoft.com/en-US/office/hh128768)或[VBA 宏](http://msdn.microsoft.com/en-us/library/office/ee814736.aspx)。

您不能将[`Conditions.From`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._ruleconditions.from.aspx)过滤器用于发送规则。你得到...

> 无效操作。无法启用此规则条件，因为该规则是只读的或对该规则类型无效，或者该条件与该规则的另一个条件冲突。

您可以附加到并在检查后[`MailItem.Send`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemevents_10_event.send)修改[`MailItem.SaveSentMessagesFolder`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.savesentmessagefolder)[`MailItem.Sender`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.sender)

# javascript - Javascript 对象返回垃圾值

> ID：12285112
> 
> 赞同：1
> 
> 时间：2012-09-05T15:42:31.773
> 
> 标签：javascript, mootools

我正在尝试将值分配给 javascript 对象，这样做时，一些垃圾值最终会出现在那里，这些值看起来像是数组方法，如“push”、“pop”、“splice”等。以下是我的代码。

```
function myTest(){
var userArray = new Object();
var req = new Request.JSON({
url: '/myTest.php',
method: 'post',
noCache: true,
data: 'userID=999',

onSuccess: function(json){       
    for(var key in json){
      userArray = json[key];
      for (var row in userArray){
        alert(row)   // This returns values like '$family','push','pop', 'reverse' etc.
        }
    }
},
onException: function(xhr){
  alert("Unable to process your request");
},
onFailure: function(xhr){
  alert("Unable to connect to the server");
}
}).send();
} 
```

我不确定我在这里缺少什么，但看起来我确实是。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:45:50.613

永远不要在数组上使用 for...in。时期。您看到的垃圾值是数组原型的属性。

请参阅此[相关问题](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:45:32.383

```
for (var row in userArray){
        if(userArray.hasOwnProperty(row))
           alert(row) ;  
        } 
```

详情[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)。基本上， for 循环将采用所有可用的属性/功能。并且您必须检查它是仅属于该对象还是被继承。

# python - 在 Python 中，如何从前一个块中的最后一个元素开始将列表拆分为大小均匀的块？

> ID：12285115
> 
> 赞同：4
> 
> 时间：2012-09-05T15:42:37.080
> 
> 标签：python, list

转换列表的最pythonic方法是什么：

```
mylist = [0,1,2,3,4,5,6,7,8] 
```

成`n`总是从前一个块的最后一个元素开始的元素块。最后一个块的最后一个元素应该与第一个块的第一个元素相同，以使数据结构循环。像：

```
[
[0,1,2,3],
[3,4,5,6],
[6,7,8,0],
] 
```

假设下`len(mylist) % (n-1) == 0`。所以它总是很好地工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:45:21.600

那么简单的解决方案呢？

```
splitlists = [mylist[i:i+n] for i in range(0, len(mylist), n-1)]
splitlists[-1].append(splitlists[0][0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:45:39.337

一个涉及 numpy 的不太直接的解决方案（为了矫枉过正）：

```
from numpy import arange, roll, column_stack

n = 4    
values = arange(10, 26)  
# values -> [10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25]

idx = arange(0, values.size, n)   # [ 0  4  8 12]
idx = roll(idx, -1)               # [ 4  8 12  0] 

col = values[idx]                 # [14 18 22 10]

values = column_stack( (values.reshape(n, -1), col) )

[[10 11 12 13 14]
 [14 15 16 17 18]
 [18 19 20 21 22]
 [22 23 24 25 10]] 
```

# c - 为什么`volatile`没有区别？

> ID：12285118
> 
> 赞同：2
> 
> 时间：2012-09-05T15:42:42.147
> 
> 标签：c, volatile

根据维基百科网站：

[http://en.wikipedia.org/wiki/Volatile_variable](http://en.wikipedia.org/wiki/Volatile_variable)

我复制了它的示例代码在我的笔记本电脑中进行测试，但两者没有区别！这是我的 GCC 版本信息：

```
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

C源代码是

```
/* volatile_var.c */
#include <stdio.h>
int main() {
        /* in no_volatile_var.c there is no volatile here */
        volatile int a = 10, b = 100, c = 0, d = 0;
        printf("%d\n", a + b);

        a = b;
        c = b;
        d = b;

        printf("%d\n", c + d);
        printf("%d\n", a);
        return 0;
} 
```

我编译了 no_volatile_var.c 和 volatile_var.c

```
gcc -S *.c 
```

但是下面的输出是一样的

```
 .section    __TEXT,__text,regular,pure_instructions
    .globl  _main
    .align  4, 0x90
_main:
Leh_func_begin1:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    subq    $32, %rsp
Ltmp2:
    movl    $10, -12(%rbp)
    movl    $100, -16(%rbp)
    movl    $0, -20(%rbp)
    movl    $0, -24(%rbp)
    movl    -12(%rbp), %eax
    movl    -16(%rbp), %ecx
    addl    %ecx, %eax
    xorb    %cl, %cl
    leaq    L_.str(%rip), %rdx
    movq    %rdx, %rdi
    movl    %eax, %esi
    movb    %cl, %al
    callq   _printf
    movl    -16(%rbp), %ecx
    movl    %ecx, -12(%rbp)
    movl    -16(%rbp), %ecx
    movl    %ecx, -20(%rbp)
    movl    -16(%rbp), %ecx
    movl    %ecx, -24(%rbp)
    movl    -20(%rbp), %ecx
    movl    -24(%rbp), %edx
    addl    %edx, %ecx
    xorb    %dl, %dl
    leaq    L_.str(%rip), %rdi
    movl    %ecx, %esi
    movb    %dl, %al
    callq   _printf
    movl    -12(%rbp), %ecx
    xorb    %dl, %dl
    leaq    L_.str(%rip), %rdi
    movl    %ecx, %esi
    movb    %dl, %al
    callq   _printf
    movl    $0, -8(%rbp)
    movl    -8(%rbp), %eax
    movl    %eax, -4(%rbp)
    movl    -4(%rbp), %eax
    addq    $32, %rsp
    popq    %rbp
    ret
Leh_func_end1:

    .section    __TEXT,__cstring,cstring_literals
L_.str:
    .asciz   "%d\n"

    .section    __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support
EH_frame0:
Lsection_eh_frame:
Leh_frame_common:
Lset0 = Leh_frame_common_end-Leh_frame_common_begin
    .long   Lset0
Leh_frame_common_begin:
    .long   0
    .byte   1
    .asciz   "zR"
    .byte   1
    .byte   120
    .byte   16
    .byte   1
    .byte   16
    .byte   12
    .byte   7
    .byte   8
    .byte   144
    .byte   1
    .align  3
Leh_frame_common_end:
    .globl  _main.eh
_main.eh:
Lset1 = Leh_frame_end1-Leh_frame_begin1
    .long   Lset1
Leh_frame_begin1:
Lset2 = Leh_frame_begin1-Leh_frame_common
    .long   Lset2
Ltmp3:
    .quad   Leh_func_begin1-Ltmp3
Lset3 = Leh_func_end1-Leh_func_begin1
    .quad   Lset3
    .byte   0
    .byte   4
Lset4 = Ltmp0-Leh_func_begin1
    .long   Lset4
    .byte   14
    .byte   16
    .byte   134
    .byte   2
    .byte   4
Lset5 = Ltmp1-Ltmp0
    .long   Lset5
    .byte   13
    .byte   6
    .align  3
Leh_frame_end1:

.subsections_via_symbols 
```

根据Wiki的解释，应该有区别，易失版应该比非易失版大。我将它们编译成二进制，发现大小也是一样的。

问题：

*   我的 llvm-gcc 会导致这种情况吗？（稍后我将在 Linux 上测试这些代码）还是 Wiki 的解释是错误的？
*   它们都编译了相同的二进制代码（仅根据它们的大小），因此它们的打印结果是相同的。但是根据Wiki的解释，两者打印的屏幕输出不同吗？

* * *

**更新**

这个问题是由于维基百科在优化设置上的错误，与标题所说的无关。我应该关闭这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:53:05.247

使用`gcc -O3`打开优化，您应该会看到不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:52:48.893

volatile 关键字只是对编译器的一个提示，即外部线程可能随时更改此变量，因此在优化依赖于不会发生这种情况的假设时应该小心。但是您的应用程序没有任何其他线程，因此没有理由区别对待它。

您可以尝试使用更高的优化设置（-O3 命令行参数）编译程序 - 这可能会导致编译器对非易失版本进行优化，而易失版本禁止使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:01:36.423

如果我们将变量声明为 volatile，编译器就无法进行优化。

# r - 如何从 netcdf 文件可视化地图？

> ID：12285120
> 
> 赞同：5
> 
> 时间：2012-09-05T15:42:47.347
> 
> 标签：r, dictionary, ggplot2, netcdf

我有一个 netcdf 文件，我想将土壤深度图可视化

```
 [1] "file C:\\Users\\SoilDepth-gswp.nc has 3 dimensions:"
     [1] "x   Size: 360"
     [1] "y   Size: 150"
     [1] "land   Size: 15238"
     [1] "------------------------"
     [1] "file C:\\SoilDepth-gswp.nc has 3 variables:"
     [1] "float nav_lon[x,y]  Longname:Longitude Missval:1e+30"
     [1] "float nav_lat[x,y]  Longname:Latitude Missval:1e+30"
     [1] "float SoilDepth[land]  Longname:Soil depth Missval:1.00000002004088e+20" 
```

似乎我必须将纬度与经度以及土地点连接起来才能获得土壤深度的地图。我真的很困惑。任何人都可以帮我处理这种数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T08:06:28.687

我更喜欢使用该`ggplot2`包进行可视化。使用@plannapus 的优秀解决方案：

```
require(reshape)
require(ggplot2); theme_set(theme_bw())
land_df = melt(land)
ggplot(aes(x = X1, y = X2, fill = value), data = land_df) + 
  geom_raster() + coord_equal() + 
  scale_fill_continuous(na.value = "transparent") 
```

![在此处输入图像描述](../Images/9ac1e4e490a7863d3ba867c495084573.png)

* * *

如果要更改轴的标题，请*不要*更改 中的变量名称`aes`。这些值指的是数据中的列，更改它们会导致您得到错误，没有在 中命名`X`的轴`land_df`。如果要更改放置在轴上的名称：

```
ggplot(aes(x = X1, y = X2, fill = value), data = land_df) + 
  geom_raster() + coord_equal() + 
  scale_fill_continuous(na.value = "transparent") + 
  scale_x_continuous("X") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T07:23:30.783

```
library(ncdf)
# I'm assuming this is the netcdf file you are working with:
download.file("http://dods.ipsl.jussieu.fr/gswp/Fixed/SoilDepth.nc", destfile="SoilDepth.nc")
soil <- open.ncdf("SoilDepth.nc")
#The way to extract a variable is as following:
soil$var[[3]] -> var3 # here, as shown in your question, SoilDepth is the 3rd variable
get.var.ncdf(soil, var3) -> SoilDepth

dim(SoilDepth)
[1] 15238 
```

正如您在 netcdf 文件的摘要中所说，该变量仅`SoilDepth`取决于维度`land`而不取决于维度`x`，`y`因此我不确定在绘制此数据集时这会给您带来什么影响。

**编辑**

事实证明，有一个链接`x`,`y`和的键`land`：

```
download.file("http://dods.ipsl.jussieu.fr/gswp/Fixed/landmask_gswp.nc", destfile="landmask.nc")
landmask <- open.ncdf("landmask.nc")
landmask$var[[3]] -> varland
get.var.ncdf(landmask, varland) -> land
sum(land==1)
[1] 15238 
```

所以为了绘制：

```
# The values where stored in an expected order, hence the transpose
land = t(land)
land[land==1] <- SoilDepth
land[land==0] <- NA
land = t(land)
image(land) 
```

![在此处输入图像描述](../Images/fb324a920a61baa73daf10d040dc48b2.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T07:15:51.343

你想用 R 可视化它吗？

如果使用其他软件进行可视化没有问题，您可以使用**ncBrowse**，[在此处](http://www.epic.noaa.gov/java/ncBrowse/)可用，或**Panoply**，由 NASA 提供，您可以在此处下载更复杂的[软件](http://www.giss.nasa.gov/tools/panoply/)。

如果你想使用 R，你可以使用`ncdf`package. `get.var.ncdf`借助该功能，您将能够提取数据。由于`sp`包和`spplot`功能，您可以绘制它或使用`rgl`包（或其他`scatterplot`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-22T20:31:23.090

要快速查看文件，您可以使用 ncview。这些地图不是特别漂亮，但对于了解给定文件的外观非常有用。这也很容易在远程服务器上工作。

见这里： http: [//meteora.ucsd.edu/~pierce/ncview_home_page.html](http://meteora.ucsd.edu/~pierce/ncview_home_page.html)

# android - Android - 试图创建一个微调图像来告诉用户等待，但它不接受 .gif 图像

> ID：12285122
> 
> 赞同：0
> 
> 时间：2012-09-05T15:42:50.143
> 
> 标签：android, android-layout, android-animation

我看到了一些例子，对于我需要的东西来说似乎有点矫枉过正，所以我只想做一些简单的事情，比如：

在我的活动中，我会这样做：

```
ProgressBar bar = bar=(ProgressBar)findViewById(R.id.progress); 
```

然后在我的布局中我会这样做：

```
<ProgressBar android:id="@+id/progress"
    style="?android:attr/progressBarStyleHorizontal"
    android:src="@drawable/ajax-loader"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

我已将此图像[http://problemio.com/img/ajax-loader.gif](http://problemio.com/img/ajax-loader.gif)放入我的图像目录中。

但是我收到一个编译错误，即 .gif 文件不应该在这些目录中。这是错误：

```
res\drawable-hdpi\ajax-loader.gif: Invalid file name: must contain only [a-z0-9_.] 
```

我也不确定我是否正确创建了进度条布局。我在这里的正确方法是什么？还是我完全偏离了轨道？:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:44:45.890

您的可绘制名称不正确，因为错误消息明确指出。你必须这样命名你的图像`ajax_loader`NOT `ajax-loader`。这样做的原因是 ADT 创建了`R`具有自动分配的已用资源 ID 的数组。而且由于`R`只是常规的 Java 代码，所有标识都是基于文件名构建的，因此这样的名称`ajax-loader`是无效的，因为您应该能够引用这个可绘制对象，因为这`R.drawable.ajax-loader`意味着**从 R.drawable.ajax 变量中减去加载器变量**。这不是您想要的（出于同样的原因，您不能在资源名称中包含空格）。另一件事是您应该使用 PNG 作为资源，而不是 GIF。如果您想要动画，请将您的 GIF 动画转换为单独的图像并使用[Android 的帧动画功能](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)。

因此，为了解决您的问题，您应将资源重命名`ajax_loader.gif`为正确的命名方案。但是，它将被拒绝，因为它是 GIF 而不是 PNG。我的建议是将此 GIF 加载到 IE GIMP 中，将每个帧保存为单独的可绘制对象（即`ajax_loader_01.png`等`ajax_loader_02.png`）。并`ajax_loader.xml`在`res/drawable`文件夹中创建，内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false">
    <item android:drawable="@drawable/ajax_loader_01" android:duration="200" />
    <item android:drawable="@drawable/ajax_loader_02" android:duration="200" />
    ...
</animation-list> 
```

然后将其用作布局中的可绘制对象（因此您应该单独引用`R.drawable.ajax_loader`，而不是单独的框架）。调整持续时间以匹配 GIF 动画，您就完成了。

# php - 使用 php 向 Google Cloud Messaging 发送通知给了我未经授权的错误 401

> ID：12285123
> 
> 赞同：1
> 
> 时间：2012-09-05T15:42:57.017
> 
> 标签：php, android, push-notification, android-c2dm, google-cloud-messaging

搜索有关如何使用 GCM 但使用 PHP 而不是 servlet 发送通知的一些信息，我发现了这个：[GCM with PHP (Google Cloud Messaging)](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)

我测试了这些问题的响应的工作代码，我还为浏览器应用程序创建了一个密钥（带有引用者），并且我授予了这个 ip 的权限：*.mywebsite.com/*（te php 文件在这个 url 上：“ [http： //www.mywebsite.com/~jma/cHtml5/cap/kk.php](http://www.mywebsite.com/~jma/cHtml5/cap/kk.php) ")

但我收到了这个回复：**未经授权的错误 401**

我做错了什么？

这是 php 文件：

```
<?php
    // Replace with real server API key from Google APIs        
    $apiKey = "fictional key";

    // Replace with real client registration IDs
    $registrationIDs = array( "APA91asdasdSDGGS232S13S4213abGqiNhCIXKjlxrkUYe_xTgTacNGB5n16b380XDd8i_9HpKGRHkvm8DDet4_WK3zumjDEKkTRWLgPS7kO-BrKzWz7eWFQaDD9PJ8zA6hlSqL9_zH21P8K22ktGKmo_VIF6YAdU9ejJovrKBTpgQktYkBZBf9Zw","APAasdasd32423dADFG91bHYYxYB7bFiX5ltbJt6A-4MBiNg7l4RS4Bqf3jIfYviaaUfZ810XJo2o66DY9-jdeJk_JR8FIZCyrmCv-eu_WLkGZ8KaoHgEDR_16H2QPm98uHpe1MjKVXbzYc4J89WMmcIrl5tHhWQnIQNzaI6Zp6yyFUNUQ");

    // Message to be sent
    $message = "Test Notificación PHP";

    // Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'registration_ids' => $registrationIDs,
        'data' => array( "message" => $message ),
    );

    $headers = array(
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
    );

    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt( $ch, CURLOPT_URL, $url );
    curl_setopt( $ch, CURLOPT_POST, true );
    curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
    //curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    //curl_setopt($ch, CURLOPT_POST, true);
    //curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $fields ));

    // Execute post
    $result = curl_exec($ch);

    // Close connection
    curl_close($ch);
    echo $result;
    //print_r($result);
    //var_dump($result);
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T16:00:47.990

解决了！！！

您必须为服务器应用程序使用密钥（具有 IP 锁定）而不是浏览器密钥

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T07:32:21.043

您需要在服务器端编码的 API 密钥字段中使用服务器应用程序的密钥。创建服务器密钥时，不要在 IP 地址字段中输入任何内容。

# java - 返回计算结果为 true 的 QueryDSL BooleanExpression

> ID：12285124
> 
> 赞同：12
> 
> 时间：2012-09-05T15:43:00.480
> 
> 标签：java, null, querydsl

假设我有`CustomerQueryInfo`具有以下属性的 bean：

*   字符串名
*   字符串姓氏
*   Status枚举状态

我想使用此类型的对象执行“ **QueryDSL**`List<Customer>` ”搜索，该对象将返回客户列表。

如果其中一个字段`CustomerQueryInfo`是`null`，我不想在搜索中使用它。因此`CustomerQueryInfo`，所有三个**字段都设置为`null`**的对象将返回**所有客户**。

我正在寻找使用 QueryDSL 执行此类搜索的最佳实践。

像这样可以吗：

```
private BooleanExpression isFirstNameLike(String firstName){
    if(firstName==null)
        return true BooleanExpression somehow;
    return QCustomer.customer.firstName.like(firstName);
}

private BooleanExpression isStatutEq(StatusEnum status){
    if(status==null)
        return true BooleanExpression somehow;
    return QCustomer.customer.status.eq(status);
} 
```

然后：

```
return query.from(customer).where(isFirstNameLike(customerQueryInfo.getFirstName).and(isLastNameLike(customerQueryInfo.getLastName).and(isStatusEq(customerQueryInfo.getStatus))).list; 
```

1.  我如何返回一个`BooleanExpression`评估为真的？
2.  如果上述方法不可取，那么推荐的最佳做法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2017-10-09T17:25:28.500

> 如何返回计算结果为 true 的 BooleanExpression？

```
BooleanExpression alwaysTrue = Expressions.asBoolean(true).isTrue(); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-05T17:51:48.803

您可以安全地使用这样的空谓词

```
private BooleanExpression isFirstNameLike(String firstName){
    return firstName != null ? customer.firstName.like(firstName) : null;        
}

private BooleanExpression isStatusEq(StatusEnum status){
    return status != null ? customer.status.eq(status) : null;
} 
```

并使用 where 的可变参数方面

```
query.from(customer)
     .where(
         isFirstNameLike(customerQueryInfo.getFirstName()),
         isLastNameLike(customerQueryInfo.getLastName()),
         isStatusEq(customerQueryInfo.getStatus()))
     .list(customer); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-01T16:27:47.813

使用 java 8 和 BooleanBuilder，您可以实现如下优雅的方式：

Java 8 可选和 Lambda

```
public final class ProductQuery {
    public static BooleanExpression nameEqualTo(String name){
        return ofNullable(name).map(QProduct.product.name::eq).orElse(null);
    }
} 
```

布尔构建器

```
BooleanBuilder where = new BooleanBuilder()
    .and(ProductQuery.nameEqualTo(name)); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-13T01:34:56.140

我创建了一个 QueryDSLHelper 类，该类具有在添加表达式之前执行 null 检查的静态方法。像这样的东西：

```
public static void goe(BooleanBuilder builder, DateTimePath<Date> path, Date value) {
    if(date!=null) {
        builder.and(path.goe(value));
    }
}

public static void like(BooleanBuilder builder, StringPath path, String value) {
    if(value!=null) {
        builder.and(path.like(value));
    }
} 
```

现在我可以静态导入这些方法并在一行中调用它们：

```
 like(builder, book.isbn, isbn); 
```

这在实现 'filter' 或 'filterByExample' 查询时非常有用且非常干净/易读。

虽然，蒂莫的上述答案可能是更好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-23T09:18:53.040

你可以这样做：

```
private BooleanExpression isFirstNameLike(String firstName){
    final QCustomer customer = QCustomer.customer;
    return customer.firstName.isNull().or(customer.firstName.like(firstName));
}

private BooleanExpression isStatutEq(StatusEnum status){
    final QCustomer customer = QCustomer.customer;
    return customer.status.isNull().or(customer.status.eq(status));    
} 
```

或者，如果您想真正匹配`firstName`和/或状态，请更改

```
.isNull().or(...) to isNotNull().and(...) 
```

# c# - 如何序列化自定义类的实例，以便具有相同类的所有应用程序都可以读取它？

> ID：12285125
> 
> 赞同：0
> 
> 时间：2012-09-05T15:43:00.587
> 
> 标签：c#, serialization

我尝试使用`BinaryFormatter`带有一个公共字段（字符串）的类，但是，另一个应用程序中的相同类无法反序列化它。

如果可能，我希望该类包含其自身类型（递归）的字段，但如果不是 - `string`s、`int`s 和`byte`数组是最重要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:56:29.877

如果您不能在应用程序之间共享一个类库，您可以在客户端（消费者）应用程序中创建一个镜像类，并将其所有属性映射到“初始”类的属性+一些辅助信息。这将是您的代理类。然后，您应该控制反序列化过程。例如，使用 xml 来保存数据。如果安全性至关重要，您可以加密文件的内容并在应用程序之间共享公钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:56:45.117

BinaryFormatter 将在输出中包含完整的类型名称（包括程序集和命名空间）。您需要使用自定义 SerializationBinder 来读取它：

```
public class CustomBinder : SerializationBinder
{
    static string assemblyToUse = typeof (MyObject).Assembly.FullName;
    public override Type BindToType(string assemblyName, string typeName)
    {
        if (typeName.EndsWith("MyType"))
            return typeof(MyTypeInThisAssembly);
        return base.BindToType(assemblyName, typeName);
    }
}

var formatter = new BinaryFormatter{Binder = new CustomBinder()};
var obj = formatter.Deserialize(...) 
```

这样做的缺点是必须在每个程序集中包含 CustomFormatter 的代码，我猜这不是你想要的。这可能会让您不得不使用自定义格式输出（如[JSON](http://json.codeplex.com/)或[协议缓冲区](http://code.google.com/p/protobuf-net/)）

# tsql - TSQLT 单元测试 - 数据类型文本和文本在等于运算符中不兼容

> ID：12285130
> 
> 赞同：2
> 
> 时间：2012-09-05T15:43:34.810
> 
> 标签：tsql, tdd, sql-server-2008-r2, tsqlt

我从 AssertEqualsTable 中收到此错误“数据类型文本和文本在等于运算符中不兼容。”

然后

“'TableCompare' 过程试图返回 NULL 状态，这是不允许的。将返回状态 0。”

```
select   *
    into #Actual
    from [dbo].[InvoiceOut];

--make expected table an empty table of #actual's structure because we truncate so it should be empty.
    SELECT TOP(0) *
    INTO #Expected
    FROM #Actual;

EXEC tSQLt.AssertEqualsTable '#Expected', '#Actual'; 
```

--相关表格信息的一部分

```
CREATE TABLE [dbo].[InvoiceOut](
...
    [InsertField] [text] NULL,
    [DeductibleText] [text] NULL,
    [BarcodeText] [text] NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:27:40.193

我认为您无法比较文本字段值，这可以解释错误。

此外，不推荐使用 text 数据类型以支持 varchar(MAX)。

看到[这个](https://stackoverflow.com/questions/564755/sql-server-text-type-vs-varchar-data-type)

# android - 在我的手机上测试用 eclipse 制作的应用程序

> ID：12285133
> 
> 赞同：0
> 
> 时间：2012-09-05T15:43:41.477
> 
> 标签：android, windows, driver

我有一个问题，同时遵循以下指令：http: [//developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)我被重定向到这个列表：http: [//developer.android.com/tools/extras /oem-usb.html#Drivers](http://developer.android.com/tools/extras/oem-usb.html#Drivers)。

上面写着“不过，Galaxy Nexus 驱动程序由三星分发（型号为 SCH-I515）。”

我使用的是 Galaxy nexus 和戴尔笔记本电脑（Windows 7、64），我与瑞典和英语支持人员进行了交谈，但他们都不知道如何找到这个驱动程序。

真的不知道在哪里可以问这个，所以我希望这里有人以前做过这个并且知道如何找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:50:42.590

我不是 100% 肯定我理解你的要求，因为我可能发现这有点太快了。按照您的指示，我最终访问了这个网站。 [银河连结](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)。我单击“下载”下方的“**查看所有下载****”**，然后单击“**软件**”，在其中找到**Device(Install),USB Driver (Software) (ver.1.4.6.0)**。

# php - 更改 Sphinx 最大查询长度

> ID：12285136
> 
> 赞同：1
> 
> 时间：2012-09-05T15:44:01.477
> 
> 标签：php, sphinx

我在启用扩展匹配模式的情况下使用带有 PHP 的 Sphinx 2.0.4。当我尝试使用 Sphinx 查询语言时，如果我使用 10 个或更少的单词，我只能得到结果。例如，如果我搜索类似的东西，`a | b`它会正常工作，但如果我搜索`a | b | c | d | e | f | g | h | i | j | k`它，即使有匹配项，也总是不会返回任何结果。有人知道增加此限制的设置吗？我在配置文件中四处寻找，但我所做的更改似乎没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:53:32.487

你确定这是问题吗？我使用查询的时间比这长得多（例如，有超过 100 个 or'ed 关键字），效果很好。

其实刚试过...

```
select * from sample8 where match('one | two | three | four | five | six | seven | eight | nine | ten | eleven | twelve');
<SNIP>
20 rows in set (0.28 sec)

select * from sample8 where match('a | b | c | d | e | f | g | h | i | j | k');
<SNIP>
20 rows in set (1.14 sec) 
```

建议发布一个实际的 REAL 查询失败，而不是一个假的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T07:30:21.250

如果您使用非 SPH_MATCH_EXTENDED/SPH_MATCH_EXTENDED2 匹配模式，则仅使用来自查询的 10 个关键字。Extended2 是默认模式，支持查询语言，不仅是 SPH_MATCH_BOOLEAN 模式等布尔运算符。

Andrew Aksyonoff 在这里说[http://sphinxsearch.com/forum/view.html?id=1743](http://sphinxsearch.com/forum/view.html?id=1743)关于限制。

有关匹配模式的更多信息，请参阅 [http://sphinxsearch.com/docs/current.html#matching-modes](http://sphinxsearch.com/docs/current.html#matching-modes)

# c++ - 如何在 C++ 程序中使用命令行参数？

> ID：12285138
> 
> 赞同：4
> 
> 时间：2012-09-05T15:44:25.640
> 
> 标签：c++, windows, cmd, command-line, command-line-arguments

我知道要使用命令行参数，我必须这样做。

`int main(int argc, char* argv[])`

现在我读到的大多数关于接受命令行参数的文档都解释了这种情况，如下所示：

> 命令行参数在 DOS 或 Linux 等命令行操作系统中的程序名称之后给出，并从操作系统传递给程序。

所以我知道打开我的程序的唯一方法是像我一样正常打开它，要么开始调试，要么打开 exe 文件

现在看来，要使用命令行参数，必须以不同的方式打开程序，使用命令行（例如 Windows 命令提示符），然后在其后写入参数。

所以我的问题是

如何使用命令行打开我的程序，以及如何在程序名称后输入参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:48:25.983

为简单起见，我假设您使用的是 Windows 7。

最简单的方法是打开一个 DOS 框，然后将应用程序拖放到它上面。这将插入可执行文件的路径。之后，您可以开始输入您希望传递的命令行参数。它最终应该看起来像这样：

```
C:\Users\cscott> "C:\Users\cscott\Documents\myApp.exe" argument1 argument2 
```

注意：正如评论中提到的，这在 windows vista 上不起作用，我在撰写本文时并不知道这一事实。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:49:49.757

我假设您使用的是 IDE，我会大胆猜测它是 Visual Studio。如果我是对的，有两种方法 - 一种，打开包含已构建可执行文件的文件夹 - 默认情况下它将位于 {Solution Directory}/{Project Directory}/bin/{Build Configuration} 中。在那里运行命令行。另一个选项是打开项目属性，然后在“调试”选项卡下（在 VS 2010 - 它因版本而异）将您的命令行标志放在标有“命令行参数”的框中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T15:49:45.903

将参数传递给程序的一些方法：

*   打开**命令提示符**（如`cmd.exe`Windows 上的 PowerShell 或 PowerShell），然后键入： `your_program.exe arg1 arg2 arg3`.
    您可以在快捷方式或脚本（如批处理或 sh 脚本）中执行相同的操作。

*   在 IDE 中编辑运行配置。
    例如，Eclipse 允许您为每个运行配置分别设置命令行参数。这在开发和调试过程中很有帮助。

*   在 Windows 上，**将文件拖放**到可执行文件上。拖动文件的文件名将作为命令行参数传递。

*   在 Windows 上，将文件扩展名与文件类型（`assoc`命令）相关联，并将该文件类型与运行程序的命令（命令）相关联`ftype`。现在，当这样一个文件被打开时，无论是在命令解释器中还是通过双击，在幕后发生的事情是你的程序以该文件的路径作为参数运行。

*   从另一个程序以编程方式运行您的可执行文件并将参数作为变量传递。
    例如在 Python 中：
    `subprocess.call(['my_program.exe','arg1','arg2'])`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T15:47:51.787

在 Windows 中，您必须使用命令提示符导航到您的可执行位置，并且可以通过说`Myexe.exe first_arg second_arg`.

或者，您可以右键单击您的 exe 文件，然后在文件设置中指定一些命令行参数，以便在双击打开它时提供给它。

另一种方法是编写一个简单的批处理脚本，它只调用你的程序`C:/Full/Path/To/Your/Program/app.exe first_arg second_arg`并运行它。

在 Visual Studio 或您首选的 IDE 中，您可以在项目设置中选择从 IDE 内部执行时为您的程序指定一些命令行参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T15:49:35.230

这是我在linux中使用的一个简单示例

```
./myprogram args1 args2 
```

你可以像这样解析它

```
int
main (int argc, char **argv)
{
  if (argc >= 2) {
     std::string param(argv[1]);
  }
  ///etc
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T16:44:59.087

有东西会启动你的程序。这取决于传递它的论点。所有常用的 shell 都会解析命令行（尽管并不总是以相同的方式）以向您显示参数。在 Windows 下，左键单击桌面和任务栏中的按钮将打开一个配置窗口，其中有一个“快捷方式”选项卡，您可以在其中输入命令行作为“目标：”。Unix 下的 rc 文件（在启动时执行）基本上是 shell 脚本，而 cron 文件（定时启动）也需要一个命令行（而不仅仅是一个孤立的命令）。等等。

在其他情况下，您可以将文件类型（扩展名）映射到当您单击该类型的文件或下载该文件时将执行的命令。在这种情况下，如果不出意外，您至少会获得文件的完整路径。

在您只能获取文件名的少数情况下，编写自己的 shell 脚本以在调用您的程序时添加额外的参数是相当容易的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T15:47:25.467

您可以通过打开命令提示符和 cd 到路径并输入 exe 名称后跟参数来执行此操作：

```
 eg: bob.exe bob dylan 
```

你的exe是bob，两个参数是bob和dylan ...

...或者您可以创建快捷方式并右键单击，选择属性，快捷方式并将参数添加到目标字段的末尾。

```
"C:\bob.exe" /bob dylan 
```

您的 IDE 中可能有一个选项，具体取决于它是什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-05T15:49:44.563

您可以在从命令提示符启动时编写，您可以创建快捷方式并在名称后添加参数，您可以在调试时在某些 IDE 中添加参数，或者您可以使用某些参数与其他程序一起调用您的程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-05T15:46:45.480

```
<path of your program> <Arguments separated by space> 
```

# java - 在 Java 中编码特殊的 HTML 字符 < > / "

> ID：12285142
> 
> 赞同：0
> 
> 时间：2012-09-05T15:44:47.403
> 
> 标签：java, html

我正在使用 Java 1.6.0

我正在寻找在 Java 中编码特殊 HTML 字符的正确方法

我的 HTML

> ```
>  <div id="sliceXML">Florida</div> 
> ```

我正在尝试使用以下 Java 将 String xmlMatch 定义为上述 div 标记的内容（在本例中为佛罗里达州）。但是我相信我没有正确定义我的 startTag 或 endTag。

我的爪哇

```
String testContent = contentPara;
String startTag = "\"sliceXML\">";                      
String endTag = "</div";                                        
String xmlMatch = null; 

int startPosition = testContent.indexOf(startTag);  

if(startPosition >1){

    int subStringIndex = startPosition + startTag.length();                                 
    int endPosition = testContent.indexOf(endTag, subStringIndex);              

    if(endPosition >= startPosition){
        xmlMatch = testContent.substring(subStringIndex, endPosition);
        out.println(xmlMatch.length()); 

    //out.println(startTag);

    out.println("Florida".equals(xmlMatch));
    out.println("florida".equals(xmlMatch));
}   
 } 
```

任何帮助都非常有用。这也可以让我在[这里回答以前的相关问题](https://stackoverflow.com/questions/12268002/searching-for-a-string-in-a-hashtable-java)

**编辑**

**解决方案**

正如我在下面解释的那样，我相信我的问题在于正斜杠`String endTag = "</div";`为了解决这个问题，我只是将结束标签更改为`String endTag = "<";`

我仍然不知道为什么会这样，如果有人能回答，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:48:25.120

我真的会使用一个 HTML 解析器，例如名称混乱的[JTidy](http://jtidy.sourceforge.net/)（它是一个 HTML 漂亮的打印机，但也为您提供了一个 HTML 结构的 DOM 接口）。

它将使您免于诸如解析和处理字符实体和编码之类的头痛。

# javascript - 从头开始水平视差滚动 - 无插件（jQuery）

> ID：12285146
> 
> 赞同：3
> 
> 时间：2012-09-05T15:44:55.657
> 
> 标签：javascript, jquery, parallax

有谁知道我可以找到一个关于如何通过 js 表单从头开始（即没有插件）进行水平视差滚动的教程？或者可以给我举个例子

我花了很多时间谷歌搜索它，但只能找到使用插件的教程

我想从头开始做的原因是因为我想完全了解视差是如何真正起作用的。

我不介意使用*jQuery 库*，我只是不想依赖插件来获得效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:47:36.890

**一个简单的教程**

见：[http ://www.egstudio.biz/easy-parallax-with-jquery/](http://www.egstudio.biz/easy-parallax-with-jquery/)

您可以将该代码应用于 5/6 元素（使用不同`scaling`的 ），并根据用户的鼠标创建出色的简单视差效果。

这是一个例子，感谢[Shmiddty](https://stackoverflow.com/users/1585400/shmiddty)：http: [//jsfiddle.net/4kG6s/1](http://jsfiddle.net/4kG6s/1)

> “这是与@PezCuckow 答案中的代码相同的设置”

通过缩放我的意思是这样的（从上面编辑）

```
var strength1 = 5;
var strength2 = 10;
var strength3 = 15;
$("html").mousemove(function(e){
    var pageX = e.pageX - ($(window).width() / 2);
    var pageY = e.pageY - ($(window).height() / 2);
    var newvalueX = ;
    var newvalueY = height * pageY * -1;
    $('item1').css("background-position", (strength1 / $(window).width() * pageX * -1)+"px "+(strength1  / $(window).height() * pageY * -1)+"px");
    $('item2').css("background-position", (strength2 / $(window).width() * pageX * -1)+"px "+(strength2  / $(window).height() * pageY * -1)+"px");
    $('item3').css("background-position", (strength3 / $(window).width() * pageX * -1)+"px "+(strength3  / $(window).height() * pageY * -1)+"px");
}); 
```

* * *

如果没有 jQuery 之类的库，则视差效果将很难实现，您需要手动实现所有动画，而不是使用库中提供的功能。

话虽如此，但类似下面的近似指南实现了非常差的视差效果，其中背景以不同的速度移动。

CSS：

```
#bg1, #bg2, #bg3 {
    background-image:url('stars.gif');
    height: 100%;
    width: 100%;
    position: absolute;
    left: 100%;
} 
```

HTML：

```
<div id="bg1"></div>
<div id="bg2"></div>
<div id="bg3"></div> 
```

JS：

```
while(true) {
  document.getElementById('bg1').style.left = (document.getElementById('bg1').style.left) - 4 + 'px';
  document.getElementById('bg2').style.left = (document.getElementById('bg2').style.left) - 10 + 'px';
  document.getElementById('bg3').style.left = (document.getElementById('bg3').style.left) - 20 + 'px';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:05:40.990

这是一个粗略简单的视差滚动实现：http: [//jsfiddle.net/4kG6s/](http://jsfiddle.net/4kG6s/)

```
function AnimateMe(){
    $("#background").css("background-position", "-=2");
    $("#middleground").css("background-position", "-=4");
    $("#foreground").css("background-position", "-=8");    
}

setInterval(AnimateMe, 100); 
```

虽然此实现为背景位置设置动画，但概念保持不变。前景的移动速度比背景快，并且层层叠叠。从概念上讲，这很简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-07T09:19:26.753

@PezCuckow 的答案中的代码但没有 jQuery（即纯粹在 java 脚本中）：http: [//jsfiddle.net/Gurmeet/s26zxcnf/1/](http://jsfiddle.net/Gurmeet/s26zxcnf/1/)

HTML：

```
<div onmousemove="update(event)">
    <div id="background">
    </div>
    <div id="middleground">
    </div>
    <div id="foreground">
    </div>
</div> 
```

JS：

```
var strength1 = 50;
var strength2 = 100;
var strength3 = 200;

var background = document.getElementById('background');
var middleground = document.getElementById('middleground');
var foreground = document.getElementById('foreground');

function update(e){
var pageX = e.clientX - (window.innerWidth / 2);
var pageY = e.clientY - (window.innerHeight / 2);
background.style.backgroundPosition = (strength1 / window.innerWidth * pageX * -1)+"px "+(strength1  / window.innerHeight * pageY * -1)+"px";
middleground.style.backgroundPosition = (strength2 / window.innerWidth * pageX * -1)+"px "+(strength2  / window.innerHeight * pageY * -1)+"px";
foreground.style.backgroundPosition = (strength3 / window.innerWidth * pageX * -1)+"px "+(strength3  / window.innerHeight * pageY * -1)+"px"; 
```

};

# c++ - 矢量:: 擦除分段错误

> ID：12285147
> 
> 赞同：1
> 
> 时间：2012-09-05T15:44:57.140
> 
> 标签：c++, vector, segmentation-fault, erase

我在这段代码中遇到了分段错误，我不明白为什么：

```
vector <double> *point;
for (int i = 0; i < point->size(); i += 3) {
    for (int j = i + 3; j < point->size(); j += 3) {
        if (distance((*point)[i], (*point)[i + 1],(*point)[i + 2], (*point)[j],(*point)[j + 1], (*point)[j + 2]) < treshold){
             point->erase(point->begin() + j, point->begin() + j * 3);
             j -= 3;
        }
    }
} 
```

point 是点坐标的向量，类似于 (x1,y1,z1,x2,y2,z3,...,xn,yn,zn)。距离它是一个计算给定 6 坐标的 2 点之间的欧几里得距离的函数。基本上我会做的是“如果两点彼此太近，删除其中一个”。但我得到分段错误。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:47:54.607

```
vector <double> *point; 
```

声明一个未初始化的指针，您尝试使用`point->size()`.

因此，未定义的行为和崩溃。

我会选择一个简单的对象

```
vector <double> point; 
```

或者，*如果您必须*使用动态内存：

```
vector <double> *point = new vector<double>; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T16:08:54.123

`erase`线路错了。你有`j * 3`当你可能的意思`j + 3`。

# ldap - 通过 SSL 连接到 LDAP

> ID：12285151
> 
> 赞同：0
> 
> 时间：2012-09-05T15:45:11.163
> 
> 标签：ldap

我正在开发一个项目并连接到 LDAP 服务器以验证用户。设置 LDAP 服务器时出现问题：

我使用 ldp.exe 来测试连接：

**- 当我在服务器上运行 ldp.exe（在 Windows 服务器上，ldp.exe 和 LDAP 服务器在同一台计算机上）时，我可以通过 SSL（端口 636）连接到 LDAP。**

**- 但是在 Windows 7 上运行 ldp.exe 时，我只通过端口 389 连接到 LDAP 服务器，但通过 SSL（端口 636）失败（返回 0x51）**

我的服务器出了什么问题？请帮帮我！非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:32:08.580

第一个想法是：检查网络配置。您可以从“Windows 7 机器”开始。请检查防火墙是否没有阻止 636。另一个防火墙可能位于“Windows 7 机器”和服务器之间，允许 389 并阻止 636。您可以尝试使用“telnet”或“tracert”等用户工具进行检查。

要检查的第二件事是服务器端的证书。如果要启用 SSL 证书，则必须使用证书和证书颁发机构。我的问题是：您当前的配置是什么？

在 Microsoft 的官方文档中，0x51 被视为： LDAP_SERVER_DOWN 0x51 无法联系 LDAP 服务器。所以这不是很有帮助，而是 LDAP 服务器的“标准情况”:-)。

# objective-c - 如何在 NSOperation 中实现 NSRunLoop

> ID：12285153
> 
> 赞同：18
> 
> 时间：2012-09-05T15:45:23.453
> 
> 标签：objective-c, ios, objective-c-blocks, objective-c-runtime

我发布这个问题是因为我在这个主题上看到了很多困惑，因此我花了几个小时调试 NSOperation 子类。

问题是当你执行异步方法时，NSOperation 对你没有多大好处，这些方法在异步回调完成之前*实际上是不完整的。*

如果 NSOperation 本身是回调委托，由于回调发生在不同的线程上，它甚至可能不足以正确完成操作。

假设您在主线程中，并且您创建了一个 NSOperation 并将其添加到 NSOperationQueue 中，NSOperation 中的代码会触发一个异步调用，该调用回调 AppDelegate 或视图控制器上的某些方法。

您不能阻塞主线程，否则 UI 将被锁定，因此您有两种选择。

**1) 创建一个 NSOperation 并将其添加到具有以下签名的 NSOperationQueue 中：**

[NSOperationQueue addOperations:@[myOp] waitUntilFinished:?]

祝你好运。异步操作通常需要一个运行循环，因此除非您将 NSOperation 子类化或使用块，否则它不会工作，但如果您必须通过在回调完成时告诉它来“完成”NSOperation，那么即使是块也不会工作。

所以......你使用类似于以下内容的子类 NSOperation 以便回调可以告诉操作何时完成：

```
//you create an NSOperation subclass it includes a main method that
//keeps the runloop going as follows
//your NSOperation subclass has a BOOL field called "complete"

-(void) main
{

    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

    //I do some stuff which has async callbacks to the appDelegate or any other class (very common)

    while (!complete && [runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);

}

//I also have a setter that the callback method can call on this operation to 
//tell the operation that its done, 
//so it completes, ends the runLoop and ends the operation

-(void) setComplete {
    complete = true;
}

//I override isFinished so that observers can see when Im done
// - since my "complete" field is local to my instance

-(BOOL) isFinished
{
    return complete;
} 
```

**好的 - 这绝对行不通 - 我们已经解决了这个问题！**

**2）**这种方法的第二个问题是，在 runLoops 必须正确终止的情况下（或者实际上从回调中的外部方法调用中完全终止），可以说上面的方法确实有效（它没有）

当我调用它时，让我们在主线程中假设第二个 Im，除非我希望 UI 锁定一段时间，并且不绘制任何东西，否则我不能在 NSOperationQueue addOperation 方法上说“waitUntilFinished:YES”......

**那么如何在不锁定主线程的情况下完成与 waitUntilFinished:YES 相同的行为呢？**

由于 Cocoa 中有很多关于 runLoops、NSOperationQueues 和异步行为的问题，我将发布我的解决方案作为对这个问题的回答。

请注意，我只回答我自己的问题，因为我检查了 meta.stackoverflow，他们说这是可以接受和鼓励的，我希望**下面的答案可以**帮助人们理解为什么他们的 runloops 被锁定在 NSOperations 以及他们如何从外部正确完成 NSOperations回调。（其他线程的回调）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T16:19:04.703

**问题#1的答案**

我有一个 NSOperation，它在其主要方法中调用一个异步操作，该方法在操作外部回调，我需要告诉操作其完成并结束 NSOperation：

下面的代码是从上面修改的

```
//you create an NSOperation subclass it includes a main method that
//keeps the runloop going as follows
//your NSOperation subclass has a BOOL field called "complete"
//ADDED: your NSOperation subclass has a BOOL field called "stopRunLoop"
//ADDED: your NSOperation subclass has a NSThread * field called "myThread"
-(void) main
{
    myThread = [NSThread currentThread];
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

    //I do some stuff which has async callbacks to the appDelegate or any other class (very common)

    while (!stopRunLoop && [runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);

    //in an NSOperation another thread cannot set complete 
    //even with a method call to the operation
    //this is needed or the thread that actually invoked main and 
    //KVO observation will not see the value change
    //Also you may need to do post processing before setting complete.
    //if you just set complete on the thread anything after the 
    //runloop will not be executed.
    //make sure you are actually done.

    complete = YES;

}

-(void) internalComplete
{
    stopRunloop = YES;
}

//This is needed to stop the runLoop, 
//just setting the value from another thread will not work,
//since the thread that created the NSOperation subclass 
//copied the member fields to the
//stack of the thread that ran the main() method.

-(void) setComplete {
    [self performSelector:@selector(internalComplete) onThread:myThread withObject:nil      waitUntilDone:NO];
}

//override isFinished same as before
-(BOOL) isFinished
{
    return complete;
} 
```

**问题 #2 的答案**- 你不能使用

```
[NSOperationQueue addOperations:.. waitUntilFinished:YES] 
```

因为您的主线程不会更新，但是您还有几个 OTHER 操作在此 NSOperation 完成之前不得执行，并且它们中的任何一个都不应阻塞主线程。

进入...

```
dispatch_semaphore_t 
```

如果你有几个依赖的 NSOperation 需要从主线程启动，你可以将调度信号量传递给 NSOperation，*记住这些是 NSOperation 主方法内部的异步调用*，所以 NSOperation 子类需要等待这些回调完成. 来自回调的方法链接也可能是一个问题。

通过从主线程传入信号量，您可以使用 [NSOperation addOperations:... waitUntilFinished: NO] 并且仍然阻止其他操作执行，直到您的回调全部完成。

创建 NSOperation 的主线程代码

```
//only one operation will run at a time
dispatch_semaphore_t mySemaphore = dispatch_semaphore_create(1);

//pass your semaphore into the NSOperation on creation
myOperation = [[YourCustomNSOperation alloc] initWithSemaphore:mySemaphore] autorelease];

//call the operation
[myOperationQueue addOperations:@[myOperation] waitUntilFinished:NO]; 
```

... NSOperation 的代码

```
//In the main method of your Custom NSOperation - (As shown above) add this call before
//your method does anything
//my custom NSOperation subclass has a field of type dispatch_semaphore_t
//named  "mySemaphore"

-(void) main
{
    myThread = [NSThread currentThread];
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

    //grab the semaphore or wait until its available
    dispatch_semaphore_wait(mySemaphore, DISPATCH_TIME_FOREVER);

    //I do some stuff which has async callbacks to the appDelegate or any other class (very common)

    while (!stopRunLoop && [runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);

    //release the semaphore
    dispatch_semaphore_signal(mySemaphore);

    complete = YES;

} 
```

当你在另一个线程上的回调方法调用 NSOperation 3 上的 setComplete 时，事情会发生，

1.  运行循环将停止，允许 NSOperation 完成（否则不会）

2.  信号量将被释放，允许共享信号量的其他操作运行

3.  NSOperation 将完成并被释放

如果您使用方法 2，您可以等待从 NSOperationQueue 调用的任意异步方法，知道它们将完成运行循环，并且您可以以任何您喜欢的方式链接回调，同时永远不会阻塞主线程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-26T13:43:54.703

我没有详细阅读这些答案，因为这些方法a）太复杂了，b）没有按照设计使用的方式使用 NSOperation。你们似乎正在破解已经存在的功能。

解决方案是继承 NSOperation 并覆盖 getter isConcurrent 以返回 YES。然后您实现 - (void)start 方法并开始您的异步任务。然后您负责完成它，这意味着您必须在 isFinished 和 isExecuting 上生成 KVO 通知，以便 NSOperationQueue 可以知道任务已完成。

（更新：这是您将 NSOperation 子类化的方式）（更新 2：添加了如果您的代码在后台线程上工作时需要处理 NSRunLoop 的方式。例如 Dropbox Core API）

```
// HSConcurrentOperation : NSOperation
#import "HSConcurrentOperation.h"  

@interface HSConcurrentOperation()
{
@protected

    BOOL _isExecuting;
    BOOL _isFinished;

    // if you need run loops (e.g. for libraries with delegate callbacks that require a run loop)
    BOOL _requiresRunLoop;
    NSTimer *_keepAliveTimer;  // a NSRunLoop needs a source input or timer for its run method to do anything.
    BOOL _stopRunLoop;
}
@end

@implementation HSConcurrentOperation

- (instancetype)init
{
    self = [super init];
    if (self) {
        _isExecuting = NO;
        _isFinished = NO;

    }
    return self;
}

- (BOOL)isConcurrent
{
    return YES;
}

- (BOOL)isExecuting
{
    return _isExecuting;
}

- (BOOL)isFinished
{
    return _isFinished;
}

- (void)start
{

    [self willChangeValueForKey:@"isExecuting"];
    NSLog(@"BEGINNING: %@", self.description);
    _isExecuting = YES;
    [self didChangeValueForKey:@"isExecuting"];

    _requiresRunLoop = YES;  // depends on your situation.
    if(_requiresRunLoop)
    {
       NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

       // run loops don't run if they don't have input sources or timers on them.  So we add a timer that we never intend to fire and remove him later.
       _keepAliveTimer = [NSTimer timerWithTimeInterval:CGFLOAT_MAX target:self selector:@selector(timeout:) userInfo:nil repeats:nil];
       [runLoop addTimer:_keepAliveTimer forMode:NSDefaultRunLoopMode];

       [self doWork];

       NSTimeInterval updateInterval = 0.1f;
       NSDate *loopUntil = [NSDate dateWithTimeIntervalSinceNow:updateInterval];
       while (!_stopRunLoop && [runLoop runMode: NSDefaultRunLoopMode beforeDate:loopUntil])
       {
           loopUntil = [NSDate dateWithTimeIntervalSinceNow:updateInterval];
       }

    }
    else
    {
      [self doWork];
    }
}

- (void)timeout:(NSTimer*)timer
{
    // this method should never get called.

    [self finishDoingWork];
}

- (void)doWork
{
    // do whatever stuff you need to do on a background thread.
    // Make network calls, asynchronous stuff, call other methods, etc.

    // and whenever the work is done, success or fail, whatever
    // be sure to call finishDoingWork.

    [self finishDoingWork];
}

- (void)finishDoingWork
{
   if(_requiresRunLoop)
   {
      // this removes (presumably still the only) timer from the NSRunLoop
      [_keepAliveTimer invalidate];
      _keepAliveTimer = nil;

      // and this will kill the while loop in the start method
      _stopRunLoop = YES;
   }

   [self finish];

}
- (void)finish
{
    // generate the KVO necessary for the queue to remove him
    [self willChangeValueForKey:@"isExecuting"];
    [self willChangeValueForKey:@"isFinished"];

    _isExecuting = NO;
    _isFinished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];

}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T19:07:57.247

我不确定为什么你会想要 NSOperation 的所有开销只用于运行循环，但我想如果你使用的是操作队列设计，那么它可能会很有用。我这么说的原因通常是你只需在后台执行一个选择器并从那里调用 CFRunLoopRun 。

除此之外，下面是一个使用运行循环的示例 NSOperation 子类。只需将其子类化并覆盖 willRun 并调用需要运行循环才能工作的方法。一旦所有调用的方法都完成了，所有的运行循环源都被处理了——操作将自动结束。您可以通过在 willRun 方法的延迟后放置一个简单的执行选择器并在 completeOperation 中放置一个断点来测试它，您将看到操作将持续到完成执行所需的时间。此外，如果您在延迟之后执行其他操作，那么操作将继续运行。正如我所说，只要有一些东西需要运行循环才能运行，它就会一直运行，即使它们是在它启动后添加的。

不需要停止方法，因为一旦一切都完成并且没有更多的源可以处理，它将自动结束。

**MHRunLoopOperation.h**

```
#import <Foundation/Foundation.h>

@interface MHRunLoopOperation : NSOperation

// Override and call methods that require a run loop.
// No need to call super because the default implementation does nothing.
-(void)willRun;

@end 
```

**MHRunLoopOperation.m**

```
#import "MHRunLoopOperation.h"

@interface MHRunLoopOperation()

@property (nonatomic, assign) BOOL isExecuting;
@property (nonatomic, assign) BOOL isFinished;

@end

@implementation MHRunLoopOperation

- (BOOL)isAsynchronous {
    return YES;
}

- (void)start {
    // Always check for cancellation before launching the task.
    if (self.isCancelled)
    {
        // Must move the operation to the finished state if it is canceled.
        self.isFinished = YES;
        return;
    }

    // If the operation is not canceled, begin executing the task.
    [self willChangeValueForKey:@"isExecuting"];
    [NSThread detachNewThreadSelector:@selector(main) toTarget:self withObject:nil];
    _isExecuting = YES;
    [self didChangeValueForKey:@"isExecuting"];
}

- (void)main {
    @try {
        // Do the main work of the operation here.

        [self willRun];

        CFRunLoopRun(); // It waits here until all method calls or remote data requests that required a run loop have finished. And after that then it continues.

        [self completeOperation];
    }
    @catch(...) {
        // Do not rethrow exceptions.
    }
}

-(void)willRun{
      // To be overridden by a subclass and this is where calls that require a run loop are done, e.g. remote data requests are started.
}

-(void)completeOperation{
    [self willChangeValueForKey:@"isFinished"];
    [self willChangeValueForKey:@"isExecuting"];

    _isExecuting = NO;
    _isFinished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
}

@end 
```

到底是什么，这也是一个示例子类:-)

```
@interface TestLoop : MHRunLoopOperation

@end

@implementation TestLoop

// override
-(void)willRun{
    [self performSelector:@selector(test) withObject:nil afterDelay:2];
}

-(void)test{
    NSLog(@"test");

    // uncomment below to make keep it running forever
    //[self performSelector:@selector(test) withObject:nil afterDelay:2];
}

// overridden just for demonstration purposes 
-(void)completeOperation{
     NSLog(@"completeOperation");
     [super completeOperation];
}

@end 
```

只需像这样测试它：

```
TestLoop* t = [[TestLoop alloc] init];
[t start]; 
```

# objective-c - 在运行时为 Storyboard 中 UITableViewCell 中的选定状态设置不同的方面/动作

> ID：12285154
> 
> 赞同：0
> 
> 时间：2012-09-05T15:45:26.447
> 
> 标签：objective-c, uitableview, uistoryboard

我有一个带有几个 UITableView 的故事板。我想为 UITableViewCell 选择不同的显示类型的选定状态。我解释得更好。

直接进入代码我想要一个驱动突出显示类型的枚举或标志。

```
-(void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
     switch(cellViewMode) {
       case Simple:
         [self simpleCell:selected];
         break;

       case Full:
         [self fullCell:selected];
         break;

       default:
         // default method...
         break; 
    }
} 
```

我正在寻找基于视图控制器类型设置此 cellViewMode 标志一次且永不更改的最佳方法，考虑到实际上我以故事板的通常推荐方式调用我的单元格，其中声明了标识符，而不是之前在 cellForRow: 中有一个静态 NSString *cellIdentifier 和一个 if 检查单元格存在的时候：

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    Obj *obj = // get obj from datasource
    MyTableViewCell *cell = [table dequeueReusableCellWithIdentifier:MyTableCellIdentifier]; // <-- this is how it is done in storyboard
    cell.cellTitle.text=obj.titleForCell;
    cell.cellDescr.text=obj.descriptionForCell;

    return cell;
} 
```

我已经指定我需要一个标志，但我对其他解决方案持开放态度，比如类别，或者任何可能以优雅的方式运作良好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:42:43.540

经过少量研究，我通过使用单元格标识符属性轻松解决了这个问题，但由于标识符的性质，使用了“if”语句。

```
-(void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
     if(self.reuseIdentifier==SimpleConstant) {
         [self simpleCell:selected];
         return;
     }

     if(self.reuseIdentifier==FullConstant) {
         [self fullCell:selected];
         return;
     }

     // handle other default case...
} 
```

我个人不喜欢这样使用“if”语句，但我没有找到更好的解决方案。

# c# - windows phone 7 中的应用程序栏项目

> ID：12285159
> 
> 赞同：0
> 
> 时间：2012-09-05T15:45:45.323
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我有一个名为 item_1 和单选按钮 button_1 的应用程序栏菜单项，我将 item_1 的 IsEnabled 属性设置为 false；因此，当我检查 button_1 时， item_1 的 IsEnabled 属性应该设为 true；为此，我在 C# 中编写了以下代码

```
 public void button_1_checked(object sender,RoutedEventArgs e)
 {
    this.item_1.IsEnabled=true;
    -----rest of the code----
 } 
```

但这给出了 NullReferenceException ，我应该怎么做才能启用 item_1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:52:26.837

这是因为 ApplicationBar 没有通过 Name 属性正确绑定。您需要通过代码访问它：

```
var button1 = (ApplicationBarIconButton) ApplicationBar.Buttons[0];
button1.IsEnabled = true; 
```

此链接可能对您有所帮助：[如何：在代码中创建应用程序栏](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431786%28v=vs.92%29.aspx)

# windows - cygwin 下 Windows 上 getArgs 的不正确行为

> ID：12285162
> 
> 赞同：1
> 
> 时间：2012-09-05T15:45:54.483
> 
> 标签：windows, haskell, command-line, cygwin

我试图将引号中的星号符号作为命令行参数传递到我的控制台应用程序中，当我使用 得到它时`System.Environment.getArgs`，我实际上得到了当前目录中的文件列表。这是错误的，因为我将星号括在引号中，因此不应替换引号中的文本。如何在 cygwin 下的 Windows 中获取没有这种替换的命令行参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:29:19.073

如果将其括在单引号中，`'*'`它不会被扩展，但两个引号会进入`getArgs`（见下文）的结果，因此您需要稍后将其删除。

在 windows 中扩展的原因`"*"`是，由于空格，引号作为全局文件名的一部分是合法的。你可能想`del "temp file *.dat"`在某个时候。

```
module ListArgs where
 import System.Environment
 main = getArgs >>= print 
```

给出：

```
[1 of 1] Compiling ListArgs             ( ListArgs.hs, ListArgs.o )
Linking ListArgs.exe ...

D:\Files\Andrew\prog\haskell\utils>ListArgs.exe *
["HereDoc.hs","IOutils.lhs","SugaredApplicative.hs","ListArgs.exe","ListArgs.hi","ListArgs.hs","ListArgs.o"]

D:\Files\Andrew\prog\haskell\utils>ListArgs.exe "*"
["HereDoc.hs","IOutils.lhs","SugaredApplicative.hs","ListArgs.exe","ListArgs.hi","ListArgs.hs","ListArgs.o"]

D:\Files\Andrew\prog\haskell\utils>ListArgs.exe '*'
["'*'"]

D:\Files\Andrew\prog\haskell\utils>ListArgs.exe '*
["'*"]

D:\Files\Andrew\prog\haskell\utils>ListArgs.exe -*
["-*"] 
```

# jquery - jquery：试图获取文本字段.onfocus（）的值

> ID：12285167
> 
> 赞同：0
> 
> 时间：2012-09-05T15:46:08.760
> 
> 标签：jquery

我正在为购房者构建一个计算器。每次用户在字段中输入数字时，最终购买价格都会更新。有几个字段实际上占总购买价格的 6 倍。我希望 6 个月的计算仅在输入该特定字段后显示。

目前 t 有效，但不能计算正确的数量。但是，如果您返回文本字段并输出文本，他的计算器可以正常工作。最终购买价格每次都正确计算。

[http://coyle.webedgemedia.com/Admin/BidSheet/47](http://coyle.webedgemedia.com/Admin/BidSheet/47)

[http://jsfiddle.net/webedge/7fyV5/](http://jsfiddle.net/webedge/7fyV5/)（CSS 没有正确通过，但您可以了解正在发生的事情）

我确信它与 DOM 有关，当我从它中取出时不知道该值，但我认为 .on() 函数会帮助解决这个问题。任何帮助表示赞赏。

```
$('.currency').on("blur", function () {

    var purchasePrice = 0;
    var futureSalesPrice = $('#txtFutureSales').length > 0 ? $('#txtFutureSales').val().replace("$", "").replace(",", "") : 0;
    var purchaseLoan = $('#txtPurchaseLoan').length > 0 ? $('#txtPurchaseLoan').val().replace("$", "").replace(",", "") : 0;
    var remodeling = $('#txtRemodeling').length > 0 ? $('#txtRemodeling').val().replace("$", "").replace(",", "") : 0;
    var utilities = $('#txtUtilities').length > 0 ? $('#txtUtilities').val().replace("$", "").replace(",", "") : 0;
    var HOADues = $('#txtHOADues').length > 0 ? $('#txtHOADues').val().replace("$", "").replace(",", "") : 0;
    var Insurance = $('#txtInsurance').length > 0 ? $('#txtInsurance').val().replace("$", "").replace(",", "") : 0;
    var Taxes = $('#txtTaxes').length > 0 ? $('#txtTaxes').val().replace("$", "").replace(",", "") : 0;
    var LoanInterestCarry = ('#txtLoanInterestCarry').length > 0 ? $('#txtLoanInterestCarry').val().replace("$", "").replace(",", "") : 0;
    var Inspection = $('#txtInspection').length > 0 ? $('#txtInspection').val().replace("$", "").replace(",", "") : 0;
    var SaleTitle = $('#txtSaleTitle').length > 0 ? $('#txtSaleTitle').val().replace("$", "").replace(",", "") : 0;
    var RealEstateSales = $('#txtRealEstateSales').length > 0 ? $('#txtRealEstateSales').val().replace("$", "").replace(",", "") : 0;
    var ProjectedProfit = $('#txtProjectedProfit').length > 0 ? $('#txtProjectedProfit').val().replace("$", "").replace(",", "") : 0;

    utilities = utilities * 6;
    HOADues = HOADues * 6;
    Insurance = Insurance * 6;
    Taxes = Taxes * 6;
    LoanInterestCarry = LoanInterestCarry * 6;

    $('.currency').formatCurrency();

    purchasePrice = futureSalesPrice - purchaseLoan - remodeling - Insurance - utilities - HOADues - Taxes - LoanInterestCarry - Inspection - SaleTitle - RealEstateSales - ProjectedProfit;

    $('#txtUtilities').on("blur", function () {
        $('.utilitiesMonthly').text(utilities).formatCurrency();
    });

    $('#txtHOADues').on("blur", function () {
        $('.hoaMonthly').text(HOADues).formatCurrency();
    });

    $('#txtInsurance').on("blur", function () {
        $('.insuranceMonthly').text(Insurance).formatCurrency();
    });

    $('#txtTaxes').on("blur", function () {
        $('.taxesMonthly').text(Taxes).formatCurrency();
    });

    $('#txtLoanInterestCarry').on("blur", function () {
        $('.loanInterestCarry').text(LoanInterestCarry).formatCurrency();
    });

    $('.price').text(purchasePrice).formatCurrency();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:10:12.693

我将代码从 .on() 函数中提取出来，并决定在 .keyup() 上更新它

```
$('#txtFutureSales').on("keyup", function () {
        $('#txtRealEstateSales').val(($(this).val().replace("$", "").replace(",", "")) * .06).formatCurrency();
    }); 
```

由于变量超出范围，因此可以很容易地`$(this)`获取输入的值。

可能有一种更快的方法来做到这一点，但它确实有效。我仍然会接受任何建议。

# iphone - 在单个 UIView 中显示多个图像

> ID：12285169
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:46:14.250
> 
> 标签：iphone, ipad, uiview, uiimageview, xcode4.3

我希望用户从相机库中选择图像，它们将显示在单个视图应用程序内的单个图像视图中。任何想法、教程或代码都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:48:35.667

对于我认为您正在尝试做的事情，这是一个很好的教程:) 我自己写得更简单，所以不妨将它链接起来。

[http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker](http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker)

# boost - 第一次尝试使用 boost::asio 时生成错误

> ID：12285179
> 
> 赞同：1
> 
> 时间：2012-09-05T15:46:50.113
> 
> 标签：boost, boost-asio

我在其他项目中使用了 boost 的许多部分。我想尝试使用 boost asio，但第一步失败了。给定最少的代码。.

```
#include <boost/asio.hpp> 

int main()
{
    return 0;
} 
```

并在 Mac 上编译

> 清除; g++ client.cpp -I/path_to_boost/ -o clientapp

我得到错误

> 架构 x86_64 的未定义符号：
> “boost::system::system_category()”，引用自：__static_initialization_and_destruction_0(int, int)in ccLQRfXY.o boost::asio::error::get_system_category() in ccLQRfXY.o boost:: system::error_code::error_code() in ccLQRfXY.o "boost::system::generic_category()"，引用自：__static_initialization_and_destruction_0(int, int)in ccLQRfXY.o ld：未找到架构 x86_64 collect2 的符号: ld 返回 1 个退出状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:51:46.630

Boost.Asio 依赖于 Boost.System，所以你也应该链接 libboost_system。

# c# - 在主线程上继续任务

> ID：12285180
> 
> 赞同：5
> 
> 时间：2012-09-05T15:46:54.640
> 
> 标签：c#, multithreading, task

我知道在主线程上有一个类似的问题：[ContinueWith a Task on the Main thread](https://stackoverflow.com/questions/11397163/continuewith-a-task-on-the-main-thread)

但这个问题更多的是针对 wpf，我无法让它在控制台应用程序上运行。

我想在不同的线程上执行一个方法，当该方法完成后，我想继续在主线程上执行。我不想加入方法。无论如何，这就是我所拥有的：

```
class Program
{
    static void Main(string[] args)
    {
        Thread.CurrentThread.Name = "MAIN";

        DoWork(x =>
        {
            Console.Write("Method successfully executed. Executing callback method in thread:" +
                "\n" + Thread.CurrentThread.Name);
        });

        Console.Read();
    }

    static void DoWork(Action<bool> onCompleteCallback)
    {
        Console.Write(Thread.CurrentThread.Name); // show on what thred we are executing

        Task doWork = new Task(() =>
        {
            Console.Write(Thread.CurrentThread.Name); // show on what thred we are executing
            Thread.Sleep(4000);
        });

        Action<Task> onComplete = (task) =>
        {                
            onCompleteCallback(true);
        };

        doWork.Start(); 

        // this line gives an error!
        doWork.ContinueWith(onComplete, TaskScheduler.FromCurrentSynchronizationContext());                       
    }
} 
```

**如何在主线程上执行 onCompleteCallback 方法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:52:24.953

> 但这个问题更多的是针对 wpf，我无法让它在控制台应用程序上运行。

您不能在控制台应用程序中执行此操作（无需大量工作）。TPL 中内置的用于将回调封送到线程的机制都依赖于已安装的线程`SynchronizationContext`。这通常由用户界面框架安装（即：`Application.Run`在 Windows 窗体中，或在 WPF 的启动代码中等）。

在大多数情况下，它之所以有效，是*因为*主线程有一个消息循环，并且框架可以将消息发布到消息循环上，然后该消息循环被拾取并运行代码。对于控制台应用程序，它只是一个“原始”线程——没有可以放置消息的消息循环。

当然，您可以安装自己的上下文，但这会增加很多可能不必要的开销。

* * *

在控制台应用程序中，通常不需要“返回”控制台线程。通常，您只需等待任务，即：

```
class Program
{
    static void Main(string[] args)
    {
        Thread.CurrentThread.Name = "MAIN";

        Task workTask = DoWork();

        workTask.Wait(); // Just wait, and the thread will continue
                         //  when the work is complete

        Console.Write("Method successfully executed. Executing callback method in thread:" +
                "\n" + Thread.CurrentThread.Name);
        Console.Read();
    }

    static Task DoWork()
    {
        Console.Write(Thread.CurrentThread.Name); // show on what thred we are executing

        Task doWork = new Task(() =>
        {
            Console.Write(Thread.CurrentThread.Name); // show on what thred we are executing
            Thread.Sleep(4000);
        });

        doWork.Start(); 

        return doWork;
    }
} 
```

# java - 这个java异常'java.lang.ArrayIndexOutOfBoundsException'的原因是什么？

> ID：12285182
> 
> 赞同：0
> 
> 时间：2012-09-05T15:46:56.500
> 
> 标签：java, exception, serial-port

我在我的项目中使用 comm.jar 从 com 端口读取数据，但是当我侦听并等待来自 com 端口的任何数据时，此异常......

```
Exception in thread "Win32SerialPort Notification thread" java.lang.ExceptionInInitializerError
        at getsmsf1.IncomingSms.<init>(IncomingSms.java:160)
        at getsmsf1.Sms.lineReceived(Sms.java:563)
        at getsmsf1.Sms.serialEvent(Sms.java:463)
        at com.sun.comm.Win32SerialPort.sendDataAvailEvent(Win32SerialPort.java:649)
        at com.sun.comm.NotificationThread.run(Win32SerialPort.java:878)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 65533
        at getsmsf1.PduCodec.<clinit>(PduCodec.java:299)
        ... 5 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:49:25.657

```
java.lang.ArrayIndexOutOfBoundsException: 65533 
```

似乎是根本原因。看来您正在尝试超出范围的索引 65533。

```
Win32SerialPort Notification thread 
```

只是发生此异常的线程名称。

# iphone - 3d 游戏如何在 idevice 中存储纹理（假设需要大量纹理）？

> ID：12285183
> 
> 赞同：1
> 
> 时间：2012-09-05T15:46:59.507
> 
> 标签：iphone, ios, opengl-es

我一直想知道，一个典型的 3d 游戏是如何实现纹理上传的。（考虑一个 3D 游戏 TempleRun，似乎没有一个纹理重新加载整个“运行”就完成了）

我正在为 iphone 开发一个简单的 2d 游戏，我已经在主场景本身中得到“内存警告级别 1..2”。我以前解决过这个问题，但我想知道他们是否是一种新方法。

他们是在做一些特殊的动态纹理上传、新的纹理格式还是使用像 PVRTC 纹理、纹理图集等好的旧技术？

我只想知道他们是否有任何新技术来处理 iPhone 中的大纹理（特殊扩展）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:00:35.393

我知道在 Unity 3D 引擎中，纹理和材质被存储为图像文件，或者在运行时作为资源动态加载，引擎本身负责在内存中分配和释放资源。

3D 引擎负责所有内存管理并充分利用它。

# flash - Flash 源代码管理和网络发布 - 如何？

> ID：12285185
> 
> 赞同：0
> 
> 时间：2012-09-05T15:47:05.063
> 
> 标签：flash, version-control, publishing

我们使用 SVN 对 ASP.NET MVC 网站 (Visual Studio IDE) 进行源代码控制，并且我们正在嵌入一个小型 Flash 应用程序。.FLA 大约 27MB，但 .SWF 输出只有大约 0.3MB

是否有我们的设计师可以在源代码控制中使用的前体/布局格式，以便

1.  我们不会为 Flash IDE 中的每个调整提交/更新 27MB 的二进制文件。
2.  除了原始二进制文件备份之外，我们还从源代码控制中获得了一些好处（比如能够判断单个二进制图像资产何时被修改）。
3.  贡献者即使没有 Flash IDE，也可以查看源资源和 actionscript 文件。

理想情况下，我希望为艺术家提供一种无痛的方式，以一种不会丢失数据的方式将他/她的所有资源保存在我们的项目中。如果有必要，我想，将大型 .FLA 文件保存在外部 SVN 路径中，该路径未在主分支中检出，但理想情况下仍引用可见资产以确保一致性。将最终输出保留在主源路径中，因为所有开发人员都需要输出来测试站点。

[该文档](https://softwareengineering.stackexchange.com/questions/52138/do-you-keep-intermediate-files-under-version-control)说 FLA 是源文件，但我想知道我是否遗漏了一些东西，因为我正在查看的是 27MB。它似乎也包含了所有资产。

这两篇文章阐明了一些观点，但没有回答我的问题： [Flash Source Control - Best Practices](https://stackoverflow.com/questions/749373/flash-source-control-best-practices) [Free Flash IDE for editing .fla files](https://stackoverflow.com/questions/1645829/free-flash-ide-for-editing-fla-files)

编辑：刚刚发现[这个](https://stackoverflow.com/questions/1454139/version-control-for-adobe-flash-projects#4251479)，正在阅读......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:27:28.430

我从来没有做过你链接到的 SVN 选项，所以我试了一下，看看它是如何工作的（我和你在一起，这是个好主意）它占用了我的 950kb（swf 为 20kb）FLA 并将所有对象放在我的进入他们自己的 xml 文件，并使我的总文件大小增加一倍（现在超过 2mb）。我也没有看到可行的 fla，它可能会引用原始文件...

无论如何，这是我的建议：FLA 不仅是基于时间线的动画文件，它还存储所述文件的本地库。因此，正如您所说，用于生成的 SWF 的每个图像都包括在内。（它存储您使用的所有内容，字体除外）由于您的最终产品非常小，我将假设您的 FLA 中有一些未使用的大图像（从库中删除它们）。对于基于矢量的程序来说，300kb 仍然相当大。我敢肯定，你可以变得更小。使用在 illustrator 或 Flash 中绘制 UI 等的矢量。光栅图像只会占用文件大小并使您的网站加载速度变慢。

这就是我要做的：用外部 .as 文件中的所有动作脚本重新组织 fla，这些文件可以在任何文本编辑器中轻松查看。（解决列表中的第三项）

如果您想要从 fla 中取出图像和艺术品，然后动态加载它们。我会评估资源的数量，您可以链接一个 XML 文件以将项目动态导入舞台并将它们放在它们所属的位置（这也会减少swf 的大小...同时解决列表中的第二项）

通过从库中删除不必要的文件，然后将数据导入舞台，您将大大减少 FLA 文件的大小；因此，解决您列表中的第一项。

注意事项：使用外部 .as 文件并不意味着您可以在不打开 Flash IDE 的情况下更改 Flash 文件的功能，它只是意味着您可以在没有 IDE 的情况下查看正在发生的事情。当您发布 swf 时，它会将代码编译到 swf 中，据我所知，您无法运行时编译（如果您发现可以，请告诉我我已经尝试了很长时间的 b/c）。将图像导入 IDE 意味着当您在 Flash 中时，您将看不到它们（除非它们在您的库中扩大了您的 fla 大小），因此您可能想要导入图像、定位它、动态导入它然后删除它。 )

如果你将我链接到 swf，或者如果你被允许分享 fla，我也许可以提供一些其他的见解。希望对你有帮助，祝你好运！

# jquery - .each() 覆盖 DOM 对象中的类

> ID：12285194
> 
> 赞同：0
> 
> 时间：2012-09-05T15:47:26.733
> 
> 标签：jquery, each

我在名为“con_questions”的 jquery 变量中有一个名为“contain_questions”的对象。

顾名思义，这个对象包含多个称为“问题”的类。

现在是否有可能在这些类上使用 .each 或类似的东西？

我一直在玩 .each() 并且似乎无法理解。

任何建议表示赞赏...

DOM 中有多个问题，我只关心 .closest() 一个： var con_questions = $(this).closest("div.question").find("div.question_type_bed").first();

现在我想遍历这个对象中的所有类。这个对象中有多个类，我需要对它们进行 .each 处理，但是我更习惯于对页面上的所有特定类进行 .each() 处理，而不仅仅是某个对象中的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:08:24.783

```
$($(con_questions).attr("class").split(" ")).each(function () {
    // 'this' will be assigned to each class name
    alert("A class from con_questions: " + this);
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:50:51.157

这是你想要做的吗？您可以使用 $.each 循环对象或数组。

```
$.each(con_questions.contain_questions.questions, function(index,value){
    $("<div />").html(value).appendTo("body");
}); 
```

# asp.net - 如何在 Asp.net C# 中使用 LDAP 在 Active Directory 中搜索用户

> ID：12285196
> 
> 赞同：3
> 
> 时间：2012-09-05T15:47:34.470
> 
> 标签：asp.net, c#-4.0, active-directory, ldap-query

如何在 asp.net c# 中从我的 Active Directory 服务器中获取所有记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:47:34.470

**在LDAP**中创建一个连接字符串，提供可以与服务器通信并具有管理员权限的**用户名**和**密码。**

假设 DC 是**me.com**，**用户名**和**密码**是具有**管理员权限**的用户 ID 的密码。

```
 DirectoryEntry rootDSE = rootDSE = new DirectoryEntry("LDAP://OU="",OU=" ",dc="me",dc=com", username, password);

    DirectorySearcher search = new DirectorySearcher(rootDSE);

    search.PageSize = 1001;// To Pull up more than 100 records.

     search.Filter = "(&(objectClass=user)(!userAccountControl:1.2.840.113556.1.4.803:=2))";//UserAccountControl will only Include Non-Disabled Users.
      SearchResultCollection result = search.FindAll();

         foreach (SearchResult item in result)
        {
            if (item.Properties["cn"].Count > 0)
            {
                DisplayName = item.Properties["cn"][0].ToString();
            }
            if (item.Properties["mail"].Count > 0)
            {
                EmailAddress = item.Properties["mail"][0].ToString();
            }
            if (item.Properties["SamAccountName"].Count > 0)
            {
                DomainName = item.Properties["SamAccountName"][0].ToString();
            }
            if (item.Properties["department"].Count > 0)
            {
                Department = item.Properties["department"][0].ToString();
            }
            if (item.Properties["title"].Count > 0)
            {
                title = item.Properties["title"][0].ToString();
            }
            if (item.Properties["company"].Count > 0)
            {
                company = item.Properties["company"][0].ToString();
            }
            if (item.Properties["DistinguishedName"].Count > 0)
            {
                memberof = item.Properties["DistinguishedName"][0].ToString();
            }
            if (item.Properties["AccountExpirationDate"].Count > 0)
            {
                string aaa = item.Properties["AccountExpirationDate"][0].ToString();
            }

              dt.Rows.Add(DisplayName, EmailAddress, DomainName, Department, title, company, memberof);
             DisplayName = string.Empty;
             EmailAddress = string.Empty;
             DomainName = string.Empty;
             Department = string.Empty;
             title = string.Empty;
             company = string.Empty;
             memberof = string.Empty;

               rootDSE.Dispose(); 
```

通过这种方式，我们可以从我们的域服务器中提取所有记录。

# jquery - 使用带有 .On 的实时事件进行 jQuery 拖放

> ID：12285204
> 
> 赞同：1
> 
> 时间：2012-09-05T15:47:51.053
> 
> 标签：jquery, draggable, live

我已将此示例用于 Jquery Live Dragable：

[使用实时事件的 jQuery 拖放](https://stackoverflow.com/questions/1805210/jquery-drag-and-drop-using-live-events)

但是想将它转换为使用 jquery 1.7 中的 .on 尝试了各种排列，有人可以帮忙吗？

这是我使用 .live 创建 .livedragable 方法的工作代码：

```
(function ($) {
$.fn.liveDraggable = function (opts) {
  $(this).live("mousemove.liveDraggable", function() {
      $this = $(this);
     $this.draggable(opts);
      $this.off('mousemove.liveDraggable'); // kill the mousemove
  });
  return $();
 };
}(jQuery)); 
```

这是对livedraggable的调用：

```
 $(".item").liveDraggable({
            revert: true
    }); 
```

我使用它是因为我有许多通过 ajax 从数据库加载的可拖动对象。

我现在尝试过：

```
 this.on("mousemove",".liveDraggable", function() { 
```

但它不起作用。

**更新** 终于通过 Joel Purra 的回答得到了这个（见下文），效果很好！

```
(function ($) {
  $.fn.liveDraggable = function (draggableItemSelector, opts) {
    // Make the function chainable per good jQuery plugin design
    return this.each(function(){
      // Start the event listener for any contained draggableItemSelector items

    $(this).on("mouseenter", draggableItemSelector, function() {
        var $this = $(this);

        // If the item is already draggable, don't continue
        if($this.data("is-already-draggable") === true)
    {
      return;
    }
    // Make the item draggable
    $this.draggable(opts);

    // Save the fact that the item is now draggable
    $this.data("is-already-draggable", true);
     });
   });
  };
}(jQuery)); 
```

加上选择器

```
$(function() {     
  $("#my_div").liveDraggable(
   ".item",
    {
      revert: true
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:29:44.767

我不知道你想要实时拖放事件的原因，但我会在黑暗中试一试，猜测它与几个月前我需要的非常相似。

基本上我有一些可拖动的 div。我通过 ajax 向屏幕添加了更多的 div，但是因为它们是在触发可拖动事件后加载的，所以新的 div 不会拖动。手指交叉我就在这里。

我通过基本上设置我的代码来解决它，无论我在页面中添加了多少项目，都可以一次又一次地调用可拖动函数。请参阅此示例：http: [//jsfiddle.net/BLMTw/](http://jsfiddle.net/BLMTw/)

试试上面的链接，当您单击“添加框”链接并尝试拖动它不拖动的新框时，您会看到。现在取消注释显示示例的行并重试。它有效，因为我再次触发了可拖动。

抱歉，如果我的需求有误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:37:28.507

**编辑：**我会`.liveDraggable(...)`在包含`.item`您将从数据库中添加的所有内容的容器上调用自定义函数。不过，函数和调用需要重写。试试这段代码。我也切换到了[`mouseenter`event](http://api.jquery.com/mouseenter/)，因为它执行的频率不`mousemove`高 - 但有足够的时间来保持功能。

```
(function ($) {
  $.fn.liveDraggable = function (draggableItemSelector, opts) {
    // Make the function chainable per good jQuery plugin design
    return this.each(function(){
      // Start the event listener for any contained draggableItemSelector items
      this.on("mouseenter", draggableItemSelector, function() {
        var $this = $(this);

        // If the item is already draggable, don't continue
        if($this.data("is-already-draggable") === true)
        {
          return;
        }

        // Make the item draggable
        $this.draggable(opts);

        // Save the fact that the item is now draggable
        $this.data("is-already-draggable", true);
      });
    )};
   };
}(jQuery)); 
```

在页面加载时调用该函数一次。这假设您将添加您的`.item`inside `<div id="my-item-container"></div>`。

```
$("#my-item-container").liveDraggable(
  ".item",
  {
          revert: true
  }); 
```

**原始答案：**您可能混淆了 jQuery 的 CSS 选择器和[jQuery 的事件命名空间](http://docs.jquery.com/Namespaced_Events)的语法。

您在[`.live(...)`](http://api.jquery.com/live/)通话中收听的事件只有在事件已明确命名空间时`mousemove.liveDraggable`才会从代码中触发- 我在您的示例中看不到任何此类代码。`.liveDraggable`监听事件将不起作用，因为它将被 jQuery 过滤掉。也是如此[`.on(...)`](http://api.jquery.com/on/)。

`.on("mousemove", ".liveDraggable", function ...)`如果您使用该类`.liveDraggable`来区分您的可拖动对象，您仍然可以使用。

由于您要立即关闭侦听器，因此请查看[`.one(...)`](http://api.jquery.com/one/).

# java - SVNKit - 提交工作副本并强制存储库成为精确副本

> ID：12285206
> 
> 赞同：1
> 
> 时间：2012-09-05T15:47:54.860
> 
> 标签：java, svn, svnkit

使用 SVNKit 库编写 Java 应用程序我面临以下问题

_1。犯罪

*   客户应提交可能已过时的工作副本
*   提交后，存储库必须包含与提交前的工作副本完全相同的内容，即使工作副本已过时
*   如果工作副本已过时，服务器更改将丢失

_ 2\. 更新

*   客户应该更新他可能包含本地更改的工作副本
*   更新后，工作副本必须包含与存储库完全相同的内容
*   如果工作副本有本地更改，更新后它们必须很多

使用 SVNKit 库是否容易？

**我对“强制提交”部分的实际想法**

一个。存储库端：处理恢复到«工作副本版本»

湾。客户端：处理接受任何冲突本地更改的更新

C。客户端：处理提交

我不确定这是否容易，尤其是对于第二点，是否有任何高级 API 方法可以做到这一点？«强制提交»部分对我来说是最紧迫的..

**我对“强制更新”部分的实际想法**

*   我处理了一个简单的更新，但我不确定会丢失本地更改

    ```
     final File localProjectDirectory = new File(localProjectDirectoryPath);
        final SVNClientManager cm = SVNClientManager.newInstance(new DefaultSVNOptions());
        final SVNUpdateClient uc = cm.getUpdateClient();
        final SVNRevision svnHeadRevision = SVNRevision.HEAD;
        final SVNDepth svnRecursiveDepth = SVNDepth.fromRecurse(true);
        final boolean allowUnversionedObstructions = false;
        final boolean depthIsSticky = true;
        uc.doUpdate(localSyncProjectDirectory, svnHeadRevision, svnRecursiveDepth, allowUnversionedObstructions, depthIsSticky); 
    ```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:10:41.130

好吧，这听起来有点乱。svn 的工作是多个程序员正在处理相同的源代码。所以说你希望 repo 成为你工作副本的精确副本意味着你想删除/恢复 repo 中其他人的更改。这是没有意义的。您所问的实际上是一项日常任务。您检查了代码，对其进行了一些更改，在此期间其他人检查了相同的代码，对其进行了更改，然后提交了更改

现在您必须以一种不会“破坏”其他人的努力的方式提交您的更改，对吗？使用 eclipse 或您正在使用的任何 svn 工具进行 svn 同步。如果您不确定，请在继续下一部分之前备份整个项目

如果没有冲突并且这很重要，那么首先从存储库中检出代码，然后再检入您的代码。

如果有冲突怎么办，在这种情况下，你必须在更新和提交之前解决它们，所以一一转到冲突的行，将它们集成到你的代码中，当你完成一个类/文件时，将其标记为“冲突得到解决”。

解决所有冲突后，按照第一步中的说明进行操作，即从 repo 更新，然后提交您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:11:56.733

我正在使用 SVNnotifier 将所有内容同步在一起。

[http://svnnotifier.tigris.org/](http://svnnotifier.tigris.org/) 也是另一个我忘记名字的程序，但明天我会得到它。

希望能帮助到你！

# javascript - 语法错误：缺少：属性 id 之后

> ID：12285213
> 
> 赞同：3
> 
> 时间：2012-09-05T15:48:05.983
> 
> 标签：javascript

```
$('.pagination ul li').each({ 
if( $(this).index(this) > 2  )
{
   $(this).hide();
}
 }); 
```

SyntaxError: missing : after property id 有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T15:49:21.177

`function`使用前面的关键字`{}`，否则它将被解释为对象文字。

```
$('.pagination ul li').each(function() { 
    if ($(this).index(this) > 2) {
        $(this).hide();
    }
}); 
```

此外，`$(this).index(this)`不符合您的预期。是否要检查元素所在的索引是否大于 2？请改用此修订版：

```
$('.pagination ul li').each(function(idx) { 
    if (idx > 2) {
        $(this).hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:49:41.627

你需要通过`.each`一个`function`. 如果没有`function()`，它将被读取为对象 ( `{}`)。

```
$('.pagination ul li').each(function(){ 
    if($(this).index(this) > 2){
        $(this).hide();
    }
}); 
```

PS`$(this).index(this)`不会像您认为的那样做。它会在里面搜索`this`，`this`因此它总是返回`0`。

如果您想要 中的索引`li`，请`ul`使用 中的索引参数`.each`。

```
$('.pagination ul li').each(function(index){ 
    if(index > 2){
        $(this).hide();
    }
}); 
```

PPS 如果您只想隐藏具有 s 的`li`s `index > 2`，那么您可以更轻松地执行此操作：

```
$('.pagination ul li:gt(2)').hide(); 
```

# c# - 在处理应用程序时丢失了一些键盘键

> ID：12285215
> 
> 赞同：0
> 
> 时间：2012-09-05T15:48:12.487
> 
> 标签：c#, visual-studio-2008, keyboard

今天，在开发 Web 应用程序时，我丢失了一些键盘键。即使我一次又一次地按下它们，它也没有任何影响。一旦我关闭 Visual Studio 并再次打开它，这些键就会再次起作用。它主要是输入、删除和退格键。

有谁知道这个问题的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:52:15.913

这种情况每隔一段时间就会发生一次，我相信你可以点击`Alt + Enter`让键再次响应，而不是关闭 Visual Studio 并再次打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:03:39.143

我遇到过这样的问题。我必须按 Alt + Enter 键或 Ctrl + Tab 键才能将其取回。

查看此 Microsoft connect 对此类问题的回答。[http://connect.microsoft.com/VisualStudio/feedback/details/534869/arrow-keys-stop-working-in-editor](http://connect.microsoft.com/VisualStudio/feedback/details/534869/arrow-keys-stop-working-in-editor)

我也有这样的问题，因为我安装了 ReSharper，它占用了大量内存。而且我不知道我做了什么，但我已经有一段时间没有发生过这种事了。但是，如果您安装了 resharper 或其他插件，请检查它是否使用了大量内存。

# magento - Magento：在页脚中显示特定类别的产品

> ID：12285216
> 
> 赞同：12
> 
> 时间：2012-09-05T15:48:23.593
> 
> 标签：magento

我正在为页脚构建一个“本月产品”块。它应该加载一个类别的产品并显示第一个。

这是我的模板文件`custom/featured-product.phtml`：

```
<?php $_productCollection = $this->getLoadedProductCollection() ?>

<div class="featured-product">
    <h2><?php echo $this->__('Product of the Month') ?></h2>

    <?php foreach ($_productCollection as $_product): ?>
        <div class="item">
            <a class="product-image" href="<?php echo $_product->getProductUrl() ?>">
                <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(200); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
            </a>

            <a class="product-name" href="<?php echo $_product->getProductUrl() ?>"><?php echo $this->htmlEscape($_product->getName()) ?></a>

            <?php echo $this->getPriceHtml($_product, true) ?>
        </div>

        <?php
        // Note: Exit after first product.
        break;
        ?>
    <?php endforeach ?>
</div> 
```

它只是 Magento 产品列表模板的简化版本：`catalog/product/list.phtml`

# 
在职的

在 CMS 页面中嵌入块时，它可以正常工作。例子：

```
{{block type="catalog/product_list" category_id="13" template="custom/featured-product.phtml" }} 
```

# 
不工作

通过 嵌入块时`local.xml`，它会失败。返回正确的标记，但未加载指定的类别。而是加载了一组*随机*（我不知道它们是如何选择的）产品。

我的代码`local.xml`：

```
<default>
    <reference name="footer">
        <block type="catalog/product_list" name="custom.featuredProduct" as="product_of_the_month" category_id="13" template="custom/featured-product.phtml" />
    </reference>
</default> 
```

为了完整起见，我`page/html/footer.phtml`像这样显式地渲染块：

```
<?php echo $this->getChildHtml('product_of_the_month') ?> 
```

# 
有任何想法吗？

我最好的猜测是我`local.xml`的不正确。我需要加载父块吗？

# 
[更新]

我的原始代码使产品页面崩溃。解决方法*不是*将代码如此依赖于 Magento 核心文件：`catalog/product/list.phtml`. 特别避免这一行：

```
<?php $_productCollection = $this->getLoadedProductCollection() ?> 
```

# 
[解决方案]

此处包含带有用于 CMS 页面和 LayoutXML 示例的工作版本： [https ://stackoverflow.com/a/12288000/1497746](https://stackoverflow.com/a/12288000/1497746)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T18:58:06.627

使用 Alan Storm 的建议找到了一个可行的解决方案。

**/template/custom/featured-product.phtml**

```
<?php
$_categoryId = $this->getCategoryId();

$_productCollection = Mage::getModel('catalog/category')->load($_categoryId)
    ->getProductCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('status', 1)
    ->addAttributeToFilter('visibility', 4)
    ->setOrder('price', 'ASC');
?>

<div class="featured-product">
    <h2><?php echo $this->__( $this->getLabel() ); ?></h2>

    <?php foreach ($_productCollection as $_product): ?>
        <div class="item">
            <a class="product-image" href="<?php echo $_product->getProductUrl() ?>">
                <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(200); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
            </a>

            <a class="product-name" href="<?php echo $_product->getProductUrl() ?>"><?php echo $this->htmlEscape($_product->getName()) ?></a>

            <?php echo $this->getPriceHtml($_product, true) ?>
        </div>

        <?php
        // Note: Exit after first product.
        break;
        ?>
    <?php endforeach ?>
</div> 
```

简而言之，集合是手动生成的，而不是接收集合（就像我最初的尝试那样）：

```
<?php $_productCollection = $this->getLoadedProductCollection() ?>
<?php $_collectionSize = $_productCollection->count(); ?> 
```

# 
在 CMS 页面中使用：

```
{{block type="core/template" category_id="13" label="Product of the Month" template="custom/featured-product.phtml" }} 
```

# 
在模板中使用：

**/layout/local.xml**

```
<default>
    <reference name="footer">
        <block type="core/template" name="custom.featuredProduct" as="featured_product" template="custom/featured-product.phtml">
            <action method="setData"><key>category_id</key><value>13</value></action>
            <action method="setData"><key>label</key><value>Product of the Month</value></action>
        </block>
    </reference>
</default> 
```

**/template/page/html/footer.phtml**

```
<?php echo $this->getChildHtml('featured_product') ?> 
```

# 
有用的资源：

如何获得产品集合：

*   [http://overlycaffeinated.com/2011/02/get-all-sale-products-from-a-category-in-magento/](http://overlycaffeinated.com/2011/02/get-all-sale-products-from-a-category-in-magento/)
*   [Magento 产品按类别](https://stackoverflow.com/questions/272818/magento-products-by-categories)

使用魔法 getter/setter：

*   [https://stackoverflow.com/a/4008251/1497746](https://stackoverflow.com/a/4008251/1497746)
*   [https://stackoverflow.com/a/4006374/1497746](https://stackoverflow.com/a/4006374/1497746)
*   [http://www.magestore.com/blog/2012/02/29/magento-cetificate-pass-variables-from-layout-to-block/](http://www.magestore.com/blog/2012/02/29/magento-cetificate-pass-variables-from-layout-to-block/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T16:35:23.523

首先，多年来我遇到了随机问题，使用布局更新 xml 属性节点来设置块上的值（除了`template`, `as`, `name`, `type`, or之外`class`，所以尝试这样的事情

```
<default>
    <reference name="footer">
        <block type="catalog/product_list" name="custom.featuredProduct" as="product_of_the_month" template="custom/featured-product.phtml">
            <action method="setCategoryId"><id>13</id></action>
        </block>
    </reference>
</default> 
```

或这个

```
<default>
    <reference name="footer">
        <block type="catalog/product_list" name="custom.featuredProduct" as="product_of_the_month" template="custom/featured-product.phtml">
            <action method="setData"><key>category_id</key><value>13</value></action>
        </block>
    </reference>
</default> 
```

可能会有所帮助，这将是我的第一步。

之后，我会查看加载集合的代码块

```
#File: app/code/core/Mage/Catalog/Block/Product/List.php
class Mage_Catalog_Block_Product_List extends Mage_Catalog_Block_Product_Abstract
{
    ...
    public function getLoadedProductCollection()
    {
        return $this->_getProductCollection();
    }        
    ...
    protected function _getProductCollection()
    {
        if (is_null($this->_productCollection)) {
            $layer = $this->getLayer();
            /* @var $layer Mage_Catalog_Model_Layer */
            if ($this->getShowRootCategory()) {
                $this->setCategoryId(Mage::app()->getStore()->getRootCategoryId());
            }

            // if this is a product view page
            if (Mage::registry('product')) {
                // get collection of categories this product is associated with
                $categories = Mage::registry('product')->getCategoryCollection()
                    ->setPage(1, 1)
                    ->load();
                // if the product is associated with any category
                if ($categories->count()) {
                    // show products from this category
                    $this->setCategoryId(current($categories->getIterator()));
                }
            }

            $origCategory = null;
            if ($this->getCategoryId()) {
                $category = Mage::getModel('catalog/category')->load($this->getCategoryId());
                if ($category->getId()) {
                    $origCategory = $layer->getCurrentCategory();
                    $layer->setCurrentCategory($category);
                }
            }
            $this->_productCollection = $layer->getProductCollection();

            $this->prepareSortableFieldsByCategory($layer->getCurrentCategory());

            if ($origCategory) {
                $layer->setCurrentCategory($origCategory);
            }
        }

        return $this->_productCollection;
    }                
} 
```

该`getLoadedProductCollection`方法包装了对 的调用`_getProductCollection`，并且`_getProductCollection`是实际加载集合的位置。

所以，一些临时的调试代码在

```
protected function _getProductCollection()
{
    var_dump(__METHOD__);
    var_dump($this->getCategoryId());
    Mage::Log(__METHOD__);
    Mage::Log($this->getCategoryId());
} 
```

可以帮助确保您的类别 ID 从布局更新 XML 到块。

但是，如果您更深入地查看`_getProductCollection`，您会注意到在某些情况下它会**重置**类别 ID。

```
if ($this->getShowRootCategory()) {
    $this->setCategoryId(Mage::app()->getStore()->getRootCategoryId());
}
...
if (Mage::registry('product')) {
    // get collection of categories this product is associated with
    $categories = Mage::registry('product')->getCategoryCollection()
        ->setPage(1, 1)
        ->load();
    // if the product is associated with any category
    if ($categories->count()) {
        // show products from this category
        $this->setCategoryId(current($categories->getIterator()));
    }
}
... 
```

如果其他一些 Magento 代码设置了该`show_root_category`属性，或者您在注册表中有产品对象的页面上，Magento 将覆盖您的类别 ID。

使事情变得更加复杂，一旦加载集合，它就会被设置在受保护的属性上

```
$this->_productCollection = $layer->getProductCollection(); 
```

没有公共 getter 方法。

在这里进行的方法是无数的。如果是我，我会考虑以下其中一项

1.  使用自定义块类扩展`Mage_Catalog_Block_Product_List`并具有重置集合上的类别或加载新集合的方法

2.  自己加载集合，而不依赖于中的代码`product/list`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:45:50.470

我在 Magento CE 1.7.0.2 下成功地重现了这个问题。

首先，我创建了一个包含以下内容的 local.xml：

```
<default>
    <reference name="footer">
        <block type="catalog/product_list" name="custom.featuredProduct" as="product_of_the_month" category_id="13" template="custom/featured-product.phtml" />
    </reference>
</default> 
```

我发现，缺少一些包装 XML 元素并添加了一些额外的行：

```
<?xml version="1.0"?>
<layout>
    <default>
        <reference name="footer">
            <block type="catalog/product_list" name="custom.featuredProduct" as="product_of_the_month" category_id="13" template="custom/featured-product.phtml" />
        </reference>
    </default>
</layout> 
```

添加所需的 XML 元素后，它就可以工作了。

# python - Python-QTableWidget：单击标题中的排序时如何捕获信号

> ID：12285221
> 
> 赞同：1
> 
> 时间：2012-09-05T15:48:25.000
> 
> 标签：python, pyqt4, qtablewidget, signal-handling

在用我`self.ui.tableWidget.resizeRowToContents`为每一行使用的一些文本填充 tableWidget 时。之后：`self.ui.tableWidget.setSortingEnabled(1)`，排序按预期工作，但行不再根据内容调整大小，实际上它们保留了以前的高度。

```
name                              name v                 name v
---------                         ---------              ---------
text2                             text1line1             text1line1
---------  after sort is clicked: ---------   expected:  text1line2
text1line1                                               text1line3
text1line2                        text2                  ---------
text1line3                                               text2
---------                         ---------              --------- 
```

我的想法是在单击标题排序时捕获信号，然后再次`self.ui.tableWidget.resizeRowToContents` 遍历所有行。 **如何捕捉到这个信号？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:42:05.040

无需`resizeRowToContents`为添加的每一行调用。

相反，在表格填满后，调用[`resizeRowsToContents`](http://doc-snapshot.qt-project.org/4.8/qtableview.html#resizeRowsToContents)插槽，它将一次调整所有行的大小。

然后，您可以将同一插槽连接到[`sortIndicatorChanged`](http://doc-snapshot.qt-project.org/4.8/qheaderview.html#sortIndicatorChanged)信号，以便在对列进行排序时调整行的大小：

```
# ... fill table, then:
self.ui.tableWidget.setSortingEnabled(True)
self.ui.tableWidget.resizeRowsToContents()
self.ui.tableWidget.horizontalHeader().sortIndicatorChanged.connect(
    self.ui.tableWidget.resizeRowsToContents) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:23:29.153

您可以连接到的标头对象上有信号：http: [//doc.qt.nokia.com/4.7-snapshot/qheaderview.html](http://doc.qt.nokia.com/4.7-snapshot/qheaderview.html)

```
header = self.ui.tableWidget.horizontalHeader()
header.sortIndicatorChanged.connect(self.fixRowSizes) 
```

您还可以尝试在填充时为行设置调整大小模式：

```
# grab the header object
row_header = self.ui.tableWidget.verticalHeader()

# populate some data
self.ui.tableWidget.setRowCount(100)
self.ui.tableWidget.setColumnCount(100)
for row in range(100):
    for col in range(100):
        self.ui.tableWidget.setItem(row, col, QTableWidgetItem(str(row * col)))

    # mark each row to automatically resize to contents
    row_header.setResizeMode(row, QHeaderView.ResizeToContens) 
```

这种方法的缺点是当设置为 ResizeToContents 时，用户对大小的控制被禁用。只要您的用户不打算/不需要手动调整大小 - 这是一个很好的方法。

# jsf-2 - JSF2 h:outputLink 无法正确编码

> ID：12285222
> 
> 赞同：2
> 
> 时间：2012-09-05T15:48:28.323
> 
> 标签：jsf-2, character-encoding, url-encoding, mojarra

使用 Mojarra 2.1.7

**代码**

```
<h:outputLink value="index.jsf">Login page
    <f:param name="test" value="! åöä"></f:param>
</h:outputLink> 
```

**输出：** index.jsf?test=%21+åöä

一些角色逃脱了，但其他角色没有。显然很难处理。

为什么会这样，有人知道管理这个的好方法吗？

[http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)

似乎被使用，因为它用 + 解析空间。

> 所有其他字符都是不安全的，并且首先使用某种编码方案将其转换为一个或多个字节。然后每个字节由 3 个字符的字符串“%xy”表示，其中 xy 是字节的两位十六进制表示。推荐使用的编码方案是 UTF-8。但是，出于兼容性原因，如果未指定编码，则使用平台的默认编码。

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:19:23.083

您不会将 JSF 生成的 HTML 代码与您在浏览器的状态或地址栏中看到的任何内容混淆吗？当然，它已经在生成的 HTML 代码中完全进行了 URL 编码。我刚刚做了一个快速测试，根据浏览器中的*查看源代码*，它生成了（假设您没有更改 UTF-8 的 JSF2/Facelets 默认响应编码）以下 HTML：

```
<a href="index.jsf?test=%21+%C3%A5%C3%B6%C3%A4">Login page</a> 
```

但实际上，`index.jsf?test=%21+åöä`当您悬停链接时，Chrome 和 Firefox 会显示在浏览器的状态栏中，单击链接时也会显示在地址栏中。这只是浏览器特定的功能，这是完全不同的事情。

我不确定你的具体问题是什么，因为你没有告诉任何关于它的事情，但是你提出问题的方式给我的印象是请求 URL 没有被有问题的 servletcontainer 正确地 URL 解码，因此你访问请求参数时收到[mojibake 。](http://en.wikipedia.org/wiki/Mojibake)

正如您现在可能已经猜到的，这必须在 servletcontainer 方面解决。还不清楚您使用的是哪一个，因此这里有一些 Tomcat 和 Glassfish 的示例：

*   在 Tomcat 中，您需要将Tomcat 中元素的`URIEncoding`属性设置为.`<Connector>``server.xml``UTF-8`

    ```
    <Connector ... URIEncoding="UTF-8"> 
    ```

*   在 Glassfish 中，您需要`<parameter-encoding>`添加`/WEB-INF/glassfish-web.xml`：

    ```
    <parameter-encoding default-charset="UTF-8" /> 
    ```

至于“解析”（实际上，“编码”是正确的术语）空格`+`，我不确定你为什么指出这一点，但这只是 URL 查询字符串中的空格应该如何编码。我认为您期望它是`%20`，但这只是 URL 的层次结构部分（查询字符串之前的部分，由 分隔`?`）中的空格应该如何编码。

# windows - 将发布 dll 与调试主应用程序 exe 混合

> ID：12285226
> 
> 赞同：3
> 
> 时间：2012-09-05T15:48:35.713
> 
> 标签：windows, visual-c++

假设我有一个具有主要可执行文件和许多 dll 的可视 C++ 应用程序。我有 2 个配置发布和调试。

我只是想知道使用 mix 可能会产生什么影响，我的意思是使用 debug dll 和 release main exe 或 debug exe 和 release dll。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:16:37.287

我认为主要的潜在问题是 DLL 不会使用与可执行文件相同的运行时库。

这意味着您不能共享运行时对象，例如文件描述符，并且您不能在一个中分配内存并在另一个中释放它 - 尽管如果您遵循最佳实践并始终从分配它的同一模块。

如果您在 DLL 和可执行文件之间共享非 POD（例如类的实例），也可能会出现问题。我不确定类实例是否保证在调试和发布之间是二进制兼容的。

# sql-server - 如何在使用openquery时加入链接服务器表和sql server表

> ID：12285228
> 
> 赞同：6
> 
> 时间：2012-09-05T15:48:46.480
> 
> 标签：sql-server, openquery

我使用 openquery 语法从链接服务器读取数据。

```
SELECT * FROM OPENQUERY(LinkServer, 'SELECT * FROM Product') 
```

我想将此链接服务器表与 Sql 服务器表连接起来以获得我的最终结果。现在我这样做，有一个临时表。

```
SELECT * 
INTO #Temp_Products
FROM OPENQUERY(TREPO, 'SELECT ID, Name FROM Products')

SELECT * FROM #TEMP_PRODUCTS A
INNER JOIN ORDERED_PRODUCTS B
ON A.ID = B.ID 
```

但是由于链接服务器产品表包含大量记录，因此需要花费一些时间才能将其填充到临时表中。所以我认为如果我事先加入两个表，而不是提取所有产品信息，它可以提高性能。

这个可以吗。？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T16:10:13.113

我没有能力对此进行测试，但它确实提供了`#tempTable`通过直接加入远程服务器来绕过该选项的机会（如果这种连接是可能的）

```
SELECT  A.* 
  FROM  OPENQUERY(TREPO, 'SELECT ID, Name FROM Products') A
 INNER 
  JOIN  ORDERED_PRODUCTS B
    ON  A.ID = B.ID 
```

以下是有关链接服务器查询的一些信息的链接，以及可能遇到的一些陷阱：http: [//sqlblog.com/blogs/linchi_shea/archive/2009/11/06/bad-database-practices-abusing-linked-服务器.aspx](http://sqlblog.com/blogs/linchi_shea/archive/2009/11/06/bad-database-practices-abusing-linked-servers.aspx)

# iphone - 如何将 CFArrayRef 转换为 NSArray？

> ID：12285231
> 
> 赞同：9
> 
> 时间：2012-09-05T15:48:50.237
> 
> 标签：iphone, ios, nsarray

> **可能重复：**
> [如何将 CFArrayRef 设置为 NSMutableArray](https://stackoverflow.com/questions/8761461/how-to-make-an-cfarrayref-to-an-nsmutablearray)

我知道有很多关于这个问题的信息，但是每个答案都是“这很容易。你可以做免费的桥接。”，然后没有提到实际的源代码。我知道免费桥接和投射的平均值。我想知道确切的源代码“如何将 CFArrayRef 转换为 NSArray？” . 请任何人！！！！！！！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-05T16:03:08.713

好吧，首先你必须知道你是否使用 ARC，因为规则会有所改变。接下来，你需要知道你真正想用你的演员做什么。你只是想使用价值，还是转移所有权？

我将假设 ARC，因为，IMO，所有新代码都应该使用 ARC（而 ARC 是铸造问题更普遍的地方）。

```
CFArrayRef someArrayRef = ...;
NSArray *array = (__bridge NSArray*)someArrayRef; 
```

上面的代码将 CF 引用转换为`NSArray*`可以在当前上下文中使用的一个。没有发生所有权转让。 `someArrayRef`仍然持有它的引用，你仍然必须手动释放`someArrayRef`，否则它会泄漏。

```
CFArrayRef someArrayRef = ...;
NSArray *array = CFBridgingRelease(someArrayRef); 
```

在这段代码中，您不仅获得了演员阵容，而且还获得了所有权转移。 `someArrayRef`现在不再持有引用，因此不需要手动释放。相反，当`array`释放时，对象将释放（假设在其他地方没有其他引用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T15:52:47.163

你应该能够投射它：

```
CFArrayRef *myLegacyArray = ...

...

NSArray *myArray=[(NSArray *)myLegacyArray copy]; 
```

# php - 从对象中获取变量类型

> ID：12285233
> 
> 赞同：5
> 
> 时间：2012-09-05T15:49:03.470
> 
> 标签：php

我试图获取变量类型但我不知道为什么，总是说变量是一个字符串。

这是我的对象：

**$问题**

```
stdClass Object
        (
            [reply_id] => 8
            [q_key] => 35BBs2xy1346230680
            [answer] => 1
        )

echo $question->answer." is a ".gettype($question->answer); 
```

**输出是：**

> 1 是一个字符串

但是1是一个整数...

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:02:23.173

如果该值是从 a 传递的`$_GET`，`$_POST`则它会自动被视为字符串。如果它是从[mysql 查询返回的，它将作为字符串返回](https://stackoverflow.com/questions/5323146/mysql-integer-field-is-returned-as-string-in-php)。

充其量，您可以使用[settype](http://www.php.net/manual/en/function.settype.php)将其设置为整数。话虽如此，PHP 在类型及其值方面非常[自由。](http://php.net/manual/en/language.types.type-juggling.php)

设置类型示例：

```
<?php
$foo = "5bar"; // string
$bar = true;   // boolean

settype($foo, "integer"); // $foo is now 5   (integer)
settype($bar, "string");  // $bar is now "1" (string)
?> 
```

类型注释：

PHP 不需要（或支持）在变量声明中显式定义类型；变量的类型由使用变量的上下文决定。也就是说，如果给变量$var赋值一个字符串值，那么$var就变成了一个字符串。如果将一个整数值分配给 $var，它就会变成一个整数。

PHP 自动类型转换的一个示例是加法运算符“+”。如果任一操作数是浮点数，则这两个操作数都被计算为浮点数，结果将是浮点数。否则，操作数将被解释为整数，结果也将是整数。请注意，这不会改变操作数本身的类型；唯一的变化是如何计算操作数以及表达式本身的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:15:15.223

我使用 EZsql 来获取对象...我没有定义变量。我认为 is_numeric() 函数可以完成这项工作:)

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:53:58.437

这是因为您分配此变量的方式。这是示例：

```
$a = 1;
var_dump($a);
$a = "1";
var_dump($a); 
```

这将产生：

```
int(1)
string(1) "1" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:55:07.147

您没有将其定义为字符串，而是以这种方式定义：

```
$question->answer = 1; 
```

您需要这样定义它：

```
$question->answer = "1"; 
```

PHP 也适用于隐式变量，因此它可以自动将数字答案声明为整数。为了解决这个问题，如果`$var = "1"`，以这种方式定义它：

```
$question->answer = strval($var); 
```

# php - Code Igniter 文件上传 - 无文件类型

> ID：12285235
> 
> 赞同：0
> 
> 时间：2012-09-05T15:49:17.833
> 
> 标签：php, codeigniter, file-upload

在过去的一个小时里，我一直在搜索 Code Igniter 论坛，试图弄清楚这一点：

我正在使用 Code Igniter 为 Web 应用程序编写文件上传处理程序。到目前为止，我有以下代码来处理上传：

```
public function send() {        
    $config = array(
        'upload_path' => 'path/to/my/upload/directory',
        'allowed_types' => 'pdf'
    );

    $this->load->library('upload', $config);

    $this->upload->do_upload('pdf_upload');

    echo "<pre>";
    print_r($this->upload->data());
    echo "</pre>";
    exit();
} 
```

而我的观点：

```
<?= $errors ?> <br />
<?= form_open_multipart('/Upload_test/send') ?>
    <p><label for="pdf_upload">File: (PDF ONLY)</label> <input type="file" name="pdf_upload" id="pdf_upload" /></p>
    <p><input type="submit" /></p>
</form> 
```

当我提交选择了有效 PDF 文件的表单时，我会从以下位置获得以下输出`print_r()`：

```
Array
(
    [file_name] => my_file.pdf
    [file_type] => 
    [file_path] => path/to/my/upload/directory/
    [full_path] => path/to/my/upload/directory/my_file.pdf
    [raw_name] => my_file
    [orig_name] => 
    [client_name] => my_file.pdf
    [file_ext] => .pdf
    [file_size] => 4190
    [is_image] => 
    [image_width] => 
    [image_height] => 
    [image_type] => 
    [image_size_str] => 
) 
```

**文件类型为空白。**这可能是什么原因造成的？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:58:49.117

我在一个相关但不重复的问题中找到了答案：[在 Codeigniter 中上传 - 不允许您尝试上传的文件类型](https://stackoverflow.com/questions/7495407/uploading-in-codeigniter-the-filetype-you-are-attempting-to-upload-is-not-allo)

> 如果您使用的是 Codeigniter 2.1.0 版，则上传库中存在错误。有关详细信息，请参阅[http://codeigniter.com/forums/viewthread/204725/ 。](http://codeigniter.com/forums/viewthread/204725/)
> 
> 基本上我所做的是修改文件上传类中的几行代码（位置：./system/libraries/Upload.php）
> 
> 1）修改行号1044
> 
> 从：
> 
> ```
> $this->file_type = @mime_content_type($file['tmp_name']);
> return; 
> ```
> 
> 对此：
> 
> ```
> $this->file_type = @mime_content_type($file['tmp_name']);
> if (strlen($this->file_type) > 0) return; 
> ```
> 
> 2）修改行号1058
> 
> 从：
> 
> ```
> @exec('file --brief --mime-type ' . escapeshellarg($file['tmp_path']), $output, $return_code); 
> ```
> 
> 对此：
> 
> ```
> @exec('file --brief --mime-type ' . escapeshellarg($file['tmp_name']), $output, $return_code); 
> ```
> 
> 正如您可能看到的，第 1058 行尝试使用不存在的数组值。

# jquery - jquery 1.8.1：如何让模态窗口居中

> ID：12285236
> 
> 赞同：0
> 
> 时间：2012-09-05T15:49:17.807
> 
> 标签：jquery, windows, modal-dialog, center

```
 /**
     * Opens a new modal dialog
     * This is for items that are scrollable
     * @param divIdFront the div element of modal dialog.
     * @param divIdBack the background screen element div (so we can grey out).  
     */
    function navCenterModalOpenScroll(divIdFront, divIdBack) {
        if ($(divIdBack).length) {
            $(divIdBack).height($(document).height());
            $(divIdBack).width($(document).width());
            $(divIdBack).show();
        }

        if ($(divIdFront).length) {
            var frontElem, x, y;
            frontElem = $(divIdFront);
            x = parseFloat($(window).width() - frontElem.outerWidth()) / 2;
            y = parseFloat($(window).height() - frontElem.outerHeight()) / 2;

            x = (x > 0) ? x : 0;
            y = (y > 0) ? y : 0;

            x += $(document).scrollLeft();
            y += $(document).scrollTop();

            frontElem.css("left", x);
            frontElem.css("top", y);

            frontElem.show();
            if (!document.all) {
                frontElem.focus();
            }

            $('body').css("overflow", "auto");
        }
    }

<div align="center" id="divIdFront" class="frameFront header" style="display:none;">
    <table width="365px"></table>
</div>

<div id="divIdBack" class="frameBack"></div> 
```

这不再居中，而是始终出现在屏幕的左上角。

# python-3.x - 使用for循环将输入分成两部分

> ID：12285240
> 
> 赞同：1
> 
> 时间：2012-09-05T15:49:29.383
> 
> 标签：python-3.x

这就是我陷入困境的地方，试图使用网络课程学习 Python。

> > 编写一个程序，输入形式为 «number1»+«number2» 的单个输入行，其中这两个都表示正整数，并输出两个数字的和。例如，在输入 5+12 上，输出应为 17。

我们不应该使用 split() 或任何导入。

我认为解决方案是使用 Character 及其值为 43 的子字符串，但我不确定。我唯一确定的是，解决方案很简单，不需要花哨的功能或导入。

这是我认为可能接近解决方案的内容

```
S = input()
for position in range(0,len(S):
      #code for substrings 5 to number1, and 12 to number2
result = int(number1)+int(number2)
print(result) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T03:18:10.217

**回答**

```
S = input()
for position in range(0, len(S)):
plus=S[position]
    if (plus!="+"):
      continue
    number1=int(S[0:position])
    number2=int(S[position+1:len(S)])
    print(number1+number2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:00:55.733

使用[`str.partition`](http://docs.python.org/dev/library/stdtypes.html#str.partition)：

```
line = raw_input()
num1, _, num2 = line.partition('+')
print(int(num1) + int(num2)) 
```

如果您不能使用`str.partition`并且想要使用`for`循环，那么`enumerate`应该会有所帮助：

```
for i, c in enumerate(line):
    if c == '+':
        # what goes here? 
```

# oracle - 同一日期多次出现时的Oracle COUNT

> ID：12285244
> 
> 赞同：0
> 
> 时间：2012-09-05T15:49:33.657
> 
> 标签：oracle, count, subquery

这就是我想做的事情。

计算某个 id 的代码多次出现时的 DISTINCT 日期数。

```
ex:
id,site,code,date
1,01,A,08/20/2012
2,01,A,08/21/2012
1,01,A,08/20/2012 
```

这是我认为它的样子，但显然是错误的......如果我没有任何意义，请告诉我。并感谢您对此进行调查

```
SELECT 
id,
site,
code,
(select count(distinct date)
  from table b
  where code = 'A' and b.id = a.id and count(distinct date) > 2) subquery
from table a

result goal:
1,01,A,1
2,01,A,0 or null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:58:23.577

```
select "id", "site", "code", 
    count(distinct "date") - 1 as AdditionalDistinctDateCount
from MyTable
group by "id", "site", "code", "date" 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!4/872a8/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:57:45.843

我会用一个按 id 和日期聚合的子查询来解决这个问题，然后再按 id 聚合：

```
select t.*, tsum.numTwiceOrMore
from (select distinct id, site, code
      from t
     ) t join
     (select id, sum(case when cnt > 1 then 1 else 0 end) as numTwiceOrMore
      from (select id, date, count(*) as cnt
            from t
            group by id, date
           ) tsum
      group by id
     ) tsum
     on t.id = tsum.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:58:35.907

您不能在`where`计算它的查询的子句中引用聚合；但这就是该`having`条款的用途：

```
SELECT id, site, code,
    (select count(distinct date)
    from table b
    where code = 'A' and b.id = a.id
    having count(distinct date) > 2) subquery
from table a; 
```

但是不要认为这会得到你想要的。目前尚不清楚您是否要显示包含超过一天的条目的任何`id`（和`site`，和？您使用什么标准？）的整行，或者只是日期的计数。`code`

* * *

好的，我想我已经明白你的意思了......你只想显示日期的数量，**如果**a`code`出现不止一次 a `id`，大概在任何网站上？您可以为此使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)；使用 CTE 获取您提供的数据作为示例：

```
with t as (
    select 1 as id, '01' as site, 'A' as code, date '2012-08-20' dt from dual
    union all select 2, '01', 'A', date '2012-08-21' from dual
    union all select 1, '01', 'A', date '2012-08-20' from dual
)
SELECT distinct id, site, code,
    case when code_count_for_id > 1 then dt_count else null end as dates
FROM (
    SELECT id, site, code, dt,
        count(distinct dt) over (partition by id, code) dt_count,
        count(*) over (partition by id, code) as code_count_for_id
    FROM t
)
ORDER BY id, code;

        ID SI C      DATES
---------- -- - ----------
         1 01 A          1
         2 01 A 
```

因此，在内部查询中，`dt_count`计算为`id`and`code`组合的不同日期数，并`code_count_for_id`计算为该组合出现的次数。

然后在外部查询中`case`决定是显示`dt_count`还是`null`取决于`code_count_for_id`.

# c# - 创建类型 customType 的列表

> ID：12285247
> 
> 赞同：3
> 
> 时间：2012-09-05T15:49:38.447
> 
> 标签：c#, list, types

我正在尝试创建在运行时设置的自定义类型的列表。这怎么可能？

这是我的代码：

```
Type customType = typeof(string); // or someOtherVariable.GetType();

List<customType> ls = new List<customType>(); // Error: The type or namespace name `customType' could not be found 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:51:30.817

如果要实例化某个反射类型的通用列表，则必须使用反射来执行此操作：

```
var type = typeof(string);

var list = typeof(List<>);
var listOfType = list.MakeGenericType(type);

var instance = Activator.CreateInstance(listOfType); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T15:51:39.180

你不能做这个。泛型集合在编译时是强类型的。您也许可以发出/codegen 一个新类并在需要时动态编译它，但这是一个非常不同的问题

# css - 为什么这个 CSS 限制不显示容器高度？

> ID：12285248
> 
> 赞同：0
> 
> 时间：2012-09-05T15:49:40.927
> 
> 标签：css, html, browser, cross-browser

我有一个应该有最大高度的 CSS div。它的 CSS 有：

```
div#feed
    {
    border: 2px solid black;
    float: right;
    height: 80%;
    max-height: 80%;
    overflow-y: hidden;
    width: 200px;
    } 
```

当条目被添加到 div 时，它会不断增长，直到它被屏幕底部截断（并且仍然不断增长）。此行为在 Chrome、Firefox、IE8 和 IE9 中是一致的。

有没有一种很好的跨浏览器方式来做我在上面的 CSS 中尝试的事情？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:00:17.983

以百分比指定高度仅适用于其父元素具有指定高度的元素。因此，如果父级具有计算出的高度，它将起作用，但是如果高度是自动的，则不会。

如果你想让基于 % 的高度起作用，你需要为每个元素指定一个高度，一直到 DOM 给 body 100% 高度。

但是，如果您可以给父母一个固定的高度，那么问题就解决了。

# python - Python：将 JSON 添加到现有 JSON 中

> ID：12285258
> 
> 赞同：3
> 
> 时间：2012-09-05T15:50:20.943
> 
> 标签：python, json, dictionary

假设我有两个 json 文件。我希望能够同时加载两者，然后将第二个条目添加到第一个条目中。这可能包括添加字段或列表条目。类似于以下示例：

file1.json: { "fruit": [ { "name": "apple", "color": "red" }, { "name": "orange", "color": "orange" } ] }

file2.json: { "fruit": [ { "name": "strawberry", "color": "red", "size": "small" }, { "name": "orange", "size": "中等的” } ] }

结果：{“水果”：[{“名称”：“苹果”，“颜色”：“红色”}，{“名称”：“橙色”，“颜色”：“橙色”，“大小”：“中等” }，{“名称”：“草莓”，“颜色”：“红色”，“尺寸”：“小”}]}

起初我想将它们加载到字典中并尝试更新：

```
import simplejson

filea = open("file1.json", 'r')
dicta = simplejson.loads(filea.read())

fileb = open("file2.json", 'r')
dictb = simplejson.loads(fileb.read())

filea.close()
fileb.close()

dicta.update(dictb) 
```

由于两个字典都有一个“fruit”条目，我希望它们会合并，但它只是用 dictb 中的条目覆盖了 dicta 中的条目。

我意识到我可以编写代码来循环遍历这个示例，但是我使用的实际文件要大得多且复杂得多。我想知道在我重新发明轮子之前是否有一个图书馆已经做了类似的事情。对于它的价值，我使用的是 Python 2.6.2。

感谢您的任何意见或建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T16:02:50.313

您需要扩展检查每个值的列表。Python 现在无法根据`name`字典项合并它们：

```
def merge(lsta, lstb):
    for i in lstb:
        for j in lsta:
            if j['name'] == i['name']:
                j.update(i)
                break
        else:
            lsta.append(i)

for k,v in dictb.items():
    merge(dicta.setdefault(k, []), v) 
```

所以`dicta`变量将是：

```
{'fruit': [{'color': 'red', 'name': 'apple'}, 
           {'color': 'orange', 'name': 'orange', 'size': 'medium'},
           {'color': 'red', 'name': 'strawberry', 'size': 'small'}]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:13:44.313

给定列表中已解析的 json `parsed_json`：

```
transformed_data = []
for data in parsed_json:
    transformed_data.append({})
    for fruit in data['fruit']:
        fruit_copy = fruit.copy()
        transformed_data[-1][fruit_copy.pop('name')] = fruit_copy
merged_fruit = defaultdict(dict)
for name, values in transformed_data.iteritems():
    merged_fruit[name].update(values) 
```

您可以使用 2.7+ 中的 dict 理解来做到这一点，但您说的是 2.6.2。鉴于您的陈述，在现实世界中，您正在合并多个字段，您可以在将`transformed_data`成员设置为您想要的源中的任何字段时更改键。如果您不关心破坏原始解析数据，您也可以删除`copy`.

# javascript - Javascript更改为aspx文件

> ID：12285262
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:50:46.683
> 
> 标签：javascript, .net, html

我的应用程序有一个水平选项卡，其代码在主文件中。每个 aspx 页面都添加了 masterpagefile，因此水平选项卡出现在每个页面中。现在我有一个场景，如果我单击水平选项卡中的任何选项卡，特定选项卡名称必须更改颜色，其余选项卡将保持蓝色，即应用程序选项卡颜色。但由于代码在主文件中，不知道如何处理。我想在主文件中进行更改，但看起来我需要添加一些隐藏变量。有没有办法在每个 aspx 中添加 javascript 来做同样的事情？这是我在主文件中的代码：

```
 <div id="header">
    <ul id="navigation" title="Navigation" tabindex="200">
    <li><a href="Home.aspx">Home</a></li>
    <li><a href="NIITS.aspx">About NREPP</a>
        <ul>
        <li><a href="Contacts.aspx">Contacts</a></li>
        <li><a href="Search.aspx">Search</a></li>
        </ul>
    </li>
</div> 
```

每个 aspx 文件中的页面标记，例如联系人文件如下：

```
<%@ Page Title="Contacts" Language="C#" MasterPageFile="~/NIITS.master" AutoEventWireup="true" CodeBehind="Contacts.aspx.cs" Inherits="Contacts" %> 
```

我可以在这个 aspx 文件中编写什么 javascript，以便将 tabname(contacts) 更改为黑色。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:59:31.753

您不需要使用 javascript 来实现这一点。

在服务器端运行元素，并在您的`.aspx`文件中，使用`Master.FindControl()`. 然后，您可以应用 css 类进行样式设置。

例如，在您的母版页中，您可以将`Home`导航链接行更改为：

```
<li><a id="navHome" runat="server" href="Home.aspx">Home</a></li> 
```

然后在您的`Home.aspx`文件中，将以下内容添加到您的代码后面：

```
protected void Page_Init(){
    ((HtmlControl)Master.FindControl("navHome")).Attributes["class"] += " active"
} 
```

这将为您的锚元素添加一个额外的`active`类，然后您可以对其进行样式设置：

```
#navigation a.active {
   font-weight:bold;
} 
```

# c# - 使用数据库中的更新模型添加只读视图

> ID：12285264
> 
> 赞同：0
> 
> 时间：2012-09-05T15:50:49.617
> 
> 标签：c#, sql-server, asp.net-mvc-3, view, model

*我正在尝试使用数据库中的更新模型*将只读视图添加到实体数据模型*.edmx 文件中的选项。我一直在谷歌上搜索这个问题，我去的每个网站和我点击的问题都说我需要添加一个主键。我知道添加这个视图是可能的，因为我在使用同一个数据库之前已经这样做了，我只是不记得我是怎么做到的。我无法向视图添加键，因为它是只读的，因此该答案对我不起作用。我知道这个问题以前曾被问过，但老实说，他们都链接回相同的问题，但没有提供好的答案。我 100% 确定我可以将此视图添加到实体模型中，并且在我弄清楚之后，如果没有其他人可以告诉我怎么做，我将在这里发布如何做到这一点。与此同时，我想我会问你们是否知道如何将这个视图添加到模型中。谢谢你的帮助！希望你有一个美好的一天！*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:42:39.070

即使使用只读视图，它也需要 PK（唯一标识行）才能从数据库中正确检索。

此外，PK 必须是不可为空的字段。我不得不在我的视图的选择语句中添加 ISNULL(Field, 0) 作为字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:43:49.570

好吧，我记得我也遇到过同样的情况。

如果相同：

使用 xml 编辑器（Visual Studio，打开方式...）打开您的 edmx。

您应该在文件中引用您的视图，但已发表评论。

如果这仍然是真的（这是我的情况），可以在这里找到解决方案：http: [//social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/fbc69ed3-dd2e-4308-bbf2-0ce330526a4f](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/fbc69ed3-dd2e-4308-bbf2-0ce330526a4f)

第一个解决方案（添加键）是可以的：您将键添加到模型，而不是视图。但是如果你从数据库中更新模型，这些更改将会丢失......*

# visual-c++ - 如何在 MinGW 中使用audiere dll

> ID：12285266
> 
> 赞同：0
> 
> 时间：2012-09-05T15:50:50.703
> 
> 标签：visual-c++, dll, linker, mingw, name-mangling

我正在使用用 MinGW g++ 编译器编译的 wxWidgets 构建一个项目。我也在使用 wxWidgets 平台的一个组件来播放 mp3 声音片段，但它不可靠，所以我去寻找另一个解决方案。我找到了 audiere 并从他们的网站下载了 1.9.4 版本。该软件包包含一个 *.lib 文件和一个 *.dll。我试图将它添加到我的项目中，但它不起作用（我认为是因为我下载的包是在 MSVC 中编译的）。

我使用名为 lib2a 的工具创建了一个 *.def 文件，以将 MSVC 库转换为可以与 MinGW 一起使用的 .a 库。def 文件有这些定义...

> LIBRARY "audiere.dll" EXPORTS _AdrCreateLoopPointSource@4 _AdrCreateMemoryFile@8 _AdrCreatePinkNoise@0 _AdrCreateSampleBuffer@20 _AdrCreateSampleBufferFromSource@4 _AdrCreateSquareWave@8 _AdrCreateTone@8 _AdrCreateWhiteNoise@0 _AdrEnumerateCDDevices@0 _AdrGetSampleSize@4 _AdrGetSupportedAudioDevices@0 _AdrGetSupportedFileFormats@0 _AdrGetVersion@0 _AdrOpenCDDevice@4 _AdrOpenDevice @8 _AdrOpenFile@8 _AdrOpenMIDIDevice@4 _AdrOpenSampleSource@8 _AdrOpenSampleSourceFromFile@8 _AdrOpenSound@12 _AdrOpenSoundEffect@12

当我去链接我的项目时，我收到以下错误：

> *** MinGWUnicodeRelease/AlphaPanel.o:AlphaPanel.cpp:(.text+0x8291): 未定义引用`_imp__AdrOpenDevice@8' *** MinGWUnicodeRelease/AlphaPanel.o:AlphaPanel.cpp:(.text+0x82db): undefined reference to`*imp* _AdrOpenSampleSource@8' *** MinGWUnicodeRelease/AlphaPanel.o:AlphaPanel.cpp:(.text+0x830f): 未定义引用`_imp__AdrOpenSound@12' *** MinGWUnicodeRelease/AlphaPanel.o:AlphaPanel.cpp:(.text+0x87ce): undefined reference to`*imp* _AdrOpenDevice@ 8' *** MinGWUnicodeRelease/AlphaPanel.o:AlphaPanel.cpp:(.text+0x8818): 未定义对`_imp__AdrOpenSampleSource@8' *** MinGWUnicodeRelease/AlphaPanel.o:AlphaPanel.cpp:(.text+0x884c): undefined reference to`*imp* _AdrOpenSound@12' 的引用

例如，在我的代码中，函数是“OpenDevice”...在 def 文件中它是 >“_AdrOpenDevice@8”，但在我的未定义引用链接错误中，它是“ *imp* _AdrOpenDevice@8”。所以我的头在旋转，不知道此时该做什么。

有没有一种简单的方法可以解决 dll 中的名称修改问题？

也许用二进制编辑器编辑它以“修复”名称并让它与我现有的代码一起工作（没有下载整个audiere代码来重新编译和创建dll [如果可能的话]使用MinGW ...我想避免如果可以的话）...我的起点是一个 *.lib 文件和一个在 MSVC 中创建的 dll，但我需要在 MinGW 中使用它。

有人对如何做到这一点有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:28:36.530

我想出了如何在 Windows 中使用 audiere ......（这是我的解决方案，但如果你想使用它并且你需要做类似的事情，你可能会发现这作为起点很有用）......

我收到一大堆关于拥有虚拟函数但没有虚拟析构函数的警告消息......不知道如何摆脱这些，但它仍然有效。

1) 下载适用于 windows 的 1.9.4 包的二进制文件 2) 从这个包中，您只需要 3 个文件。audiere.h、audiere.dll 和audiere.lib 位于不同的目录中。3) 将audiere.lib 重命名为audiere.a 4) 将audiere.dll 复制到您的可执行文件将运行的目录，以便在运行时可以找到它。5) 将audiere.a 复制到链接器目录，并将其添加到项目中的文件列表中。6) 将audiere.h 复制到所有其他*.h 文件所在的源目录。7) 在源代码的 *.h 文件中，添加 #include "audiere.h"（注意不是） 8) 同样在 *.h 文件中，添加以下作为全局变量（我不使用命名空间，所以我指定完全限定名称）

```
audiere::AudioDevicePtr device;
audiere::OutputStreamPtr sound; 
```

9) 在您的 *.cpp 文件中，在构造函数中，添加以下内容：

```
device = audiere::OpenDevice(); 
```

10）添加一个计时器，以便您可以监控声音剪辑何时播放完毕。对我来说，它每秒发射 4 次。剪辑完成后，计时器停止。这是我的代码：

```
void MyClass::OnTimerEvent( wxTimerEvent& event )
{
   bool restartTimer = true;
   bool isItPlaying;

   timer.Stop();
   isItPlaying = sound -> isPlaying();
   // check status of audio clip

   if (isItPlaying == false)
      timer.Start(250);
   else {
      // re-enable any controls you disabled while audio clip was playing

   } // end else
} // end OnTimerEvent 
```

11）在您真正想要启动（加载和播放）声音剪辑的代码中 - 添加如下内容：

（请注意，您需要 char_str 方法将其从 wxString 对象中提取出来）

```
fileName.sprintf(wxT("c:\\testsound.mp3"));
sound = audiere::OpenSound(device, fileName.char_str(), true);
sound -> play();
timer.Start(250); 
```

12) 假设您已经加载了剪辑并且想要再次播放它而不重新加载它。在这种情况下，只需重复步骤 11 中的最后两行（声音 -> play(); 和 timer.Start(250);）

简而言之，这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T04:06:36.807

请原谅，您的源代码在*哪个*.h 文件中？*:) 告诉人们使用哪些文件可能会有所帮助。

# jdbc - 为什么我可以使用 SELECT 而不是 CALL 调用 HSQL 函数？

> ID：12285267
> 
> 赞同：2
> 
> 时间：2012-09-05T15:50:55.670
> 
> 标签：jdbc, hsqldb, sql-function

根据[HSQL 文档](http://hsqldb.org/doc/guide/sqlroutines-chapt.html)，只有 SQL 过程需要`CALL`语法。我正在编写一个 SQL 函数，但我不能`SELECT`从它。我只能`CALL`这样。谁能看到我错过的东西？这是我的代码

```
public static void main(String[] args) throws Exception {
    Class<?> driverClass = Class.forName("org.hsqldb.jdbcDriver");
    JDBCDriver driver = (JDBCDriver) driverClass.newInstance();
    Properties props = new Properties();
    props.setProperty("user", "sa");
    props.setProperty("password", "");
    Connection c = driver.connect("jdbc:hsqldb:mem:aname", props);
    execute(c, "CREATE TABLE T (i INT)");
    execute(c, "INSERT INTO T VALUES (1)");
    execute(c, "CREATE FUNCTION f() RETURNS TABLE (i INT) READS SQL DATA " +
            " RETURN TABLE (SELECT * FROM T)");
    System.out.println("Call returns the ResultSet:");
    execute(c, "{ CALL f() }");
    try {
        execute(c, "SELECT * FROM f()");
    } catch (Exception e) {
        System.out.println("Select throws the exception:");
        System.out.println(e);
    }
}

private static void execute(Connection c, String sql) throws SQLException {
    Statement s = c.createStatement();
    try {
        s.execute(sql);
        ResultSet rs = s.getResultSet();
        if (rs != null) {
            printResultSet(rs);
        }
    } finally {
        s.close();
    }
}

private static void printResultSet(ResultSet rs) throws SQLException {
    try {
        while (rs.next()) {
            int columnCount = rs.getMetaData().getColumnCount();
            for (int i = 1; i <= columnCount; i++) {
                System.out.println(rs.getObject(i));
            }
        }
    } finally {
        rs.close();
    }
} 
```

我得到输出：

```
Call returns the ResultSet:
1
Select throws the exception:
java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: F 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:17:07.310

选择此函数返回的表的正确语法如下：

```
SELECT * FROM TABLE(F()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:24:12.757

好像还没有实现。

> 目前 HSQLDB FUNCTION 不能有 out 参数。它可以返回由 execute() 调用返回的单值结果或表。

[http://sourceforge.net/tracker/index.php?func=detail&aid=3530755&group_id=23316&atid=378134](http://sourceforge.net/tracker/index.php?func=detail&aid=3530755&group_id=23316&atid=378134)

# javascript - 使用 .on('click' 和 .click 有什么区别？

> ID：12285269
> 
> 赞同：0
> 
> 时间：2012-09-05T15:50:57.130
> 
> 标签：javascript, jquery

> **可能重复：**
> [.on('click') 与 .click() 之间的区别](https://stackoverflow.com/questions/9122078/difference-between-onclick-vs-click)

处理 div 的点击时，使用 .on 和 .click 有什么区别：

```
 $('#myDiv').on('click' , function(e) {
    });

    $('#myDiv').click(function(e) {
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:52:44.267

两者是一样的...

`.click`内部将调用`.on`方法。

如果您看到 jQuery 源代码的这一部分。

```
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
    "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
    "change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

    // Handle event binding
    jQuery.fn[ name ] = function( data, fn ) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }

        return arguments.length > 0 ?
            this.on( name, null, data, fn ) :
            this.trigger( name );
    }; 
```

你可以看到所有的方法都在依次调用`.on`方法。如此下去会降低你的一级。

这是`.on`jQuery 中的实现。

```
jQuery.fn.extend({

    on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
        var origFn, type;

        // Types can be a map of types/handlers
        if ( typeof types === "object" ) {..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:53:55.530

后者是前者的捷径。

`.on`更“低级*”*和灵活。您可以将事件的第二个参数约束添加到选择器，例如：

```
$('#myDiv').on('click' , "span.icon", function(e) {
    // this event will be fired when a click is made on a span.icon inside the #myDiv 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:53:07.883

根据[文档](http://api.jquery.com/click/)，从 jQuery 1.7 .click() 开始：

> 此方法是 的快捷方式`.bind("click", handler)`，也适用于 `.on("click", handler)`

# c# - int.parse 中未处理格式异常

> ID：12285271
> 
> 赞同：1
> 
> 时间：2012-09-05T15:51:02.207
> 
> 标签：c#, formatexception

我得到了这个例外

> FormatException 未处理，输入字符串的格式不正确。

在以下声明中

```
int amnt = int.Parse(Console.ReadLine()); 
```

我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:58:01.033

我建议如下：

```
int parsedInt = 0;

if (int.TryParse(Console.ReadLine(), out parsedInt))
{
    //do success work
}
else
{
    //do failed work
} 
```

# java - 通过parcelable类

> ID：12285273
> 
> 赞同：2
> 
> 时间：2012-09-05T15:51:04.700
> 
> 标签：java, android, class, bundle, parcelable

我有个问题。我有这个可打包的课程：

```
public class parametros implements Parcelable {

private String n="";
private String id="";

private  String[] e1= {"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"};
private  String[] e2= {"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"};
private  String[] e3= {"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"};
private  String[] e4= {"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"};
private  String[] e5= {"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"};
private  String[] e6= {"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"};
private  String[] e7= {"99","99","99","99","99","99","99","99","99","99","99","99","99","99","99","99","99","99","99","99"};

public parametros() {}

///////// SET/////////
public void setId(String i)
{
    id = i;
}

public void setN(String no)
{
    n = no;
}

public void sete1(String dir, int pos)
{
    e1[pos] = dir;
}

public void sete2(String mar, int pos)
{
    e2[pos] = mar;
}

public void sete3(String mar, int pos)
{
    e3[pos] = mar;
}

public void sete4(String mar, int pos)
{
    e4[pos] = mar;
}

public void sete5(String dir, int pos)
{
    e5[pos] = dir;
}

public void sete6(String per, int pos)
{
    e6[pos] = per;
}

public void sete7(String vel, int pos)
{
    e7[pos] = vel;
}

////////// GET/////////

public String getId()
{
    return id;
}

public String getN()
{
    return n;
}

public String get1(int pos)
{
    return e1[pos];
}

public String get2(int pos)
{
    return e2[pos];
}

public String get3(int pos)
{
    return e3[pos];
}

public String get4(int pos)
{
    return e4[pos];
}

public String get5(int pos)
{
    return e5[pos];
}

public String get6(int pos)
{
    return e6[pos];
}

public String get7(int pos)
{
    return e7[pos];
}

public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    // TODO Auto-generated method stub
    dest.writeString(n);
    dest.writeString(id);
    dest.writeStringArray(e1);
    dest.writeStringArray(e2);
    dest.writeStringArray(e3);
    dest.writeStringArray(e4);
    dest.writeStringArray(e5);
    dest.writeStringArray(e6);
    dest.writeStringArray(e7);
}

public parametros(Parcel in) {

    id = in.readString();
    n = in.readString();
    in.readStringArray(e1);
    in.readStringArray(e2);
    in.readStringArray(e3);
    in.readStringArray(e4);
    in.readStringArray(e5);
    in.readStringArray(e6);
    in.readStringArray(e7);
}

public static final Parcelable.Creator<parametros> CREATOR =
        new Parcelable.Creator<parametros>() {
            public parametros createFromParcel(Parcel in) {
                return new parametros(in);
            }

            public parametros[] newArray(int size) {
                return new parametros[size];
            }
        }; 
```

}

在主要活动中：

```
 Intent alert = new Intent(MainActivity.this,alert.class);
parametros param1 = new parametros();
param1.setNombreboya("SAG");
alert.putExtra("ob", param1);
startActivity(alert); 
```

我得到了参数：

```
Bundle b = getIntent().getExtras();
parametros param = b.getParcelable("ob"); 
```

但是在开始崩溃时出现此错误：

运行时异常：无法实例化活动 componentInfo{previsiones/alert} java.langNullPointerxception

为什么会出现这个错误？谢谢 ：）

# wpf - ControlTemplate 中的子元素

> ID：12285276
> 
> 赞同：0
> 
> 时间：2012-09-05T15:51:11.880
> 
> 标签：wpf, styles

在我们的应用程序中，所有视图都有一个“基本”布局。为了重用通用代码，我为它创建了一个 BaseControl 类和一个模板。

我想要实现的是从“BaseControl”派生的每个控件的通用标题和页脚栏

XAML 中的具体视图：

```
<my:BaseControl x:Class="SampleView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         xmlns:my="clr-namespace:UserInterface" d:DesignWidth="924">
<Grid>
    //This elements are not visible - why?
</Grid> 
```

公共基类（没有 XAML，但有模板）

```
public class BaseControl : System.Windows.Controls.UserControl{} 
```

模板：

```
<Style TargetType="{x:Type my:BaseControl}" BasedOn="{StaticResource {x:Type UserControl}}">
<Setter Property="Template">
<Setter.Value>
            <ControlTemplate>
              <Grid>
                ....snip
                <Border Grid.Row="0" Name="SomeCommonUsedBorder">

                <ContentPresenter>
                  //every thing placed between
                  //<SampleView> and </SampleView> should go here
                 </ContentPresenter>

                ....snip
                //some other commonly used elements goes here
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

示例视图看起来像预期的那样，但是我在派生控件中编写的所有内容都是不可见的。

感谢您的任何提示和想法

曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:04:55.553

发布此问题几分钟后，我找到了答案。我必须为 ControlTemplate 定义 TargetType。否则 TargetType 是 Control。并且 Control 本身没有 Content 属性。

```
<ControlTemplate TargetType="{x:Type UserControl}"> 
```

# html - mac webkit浏览器中的div滚动条

> ID：12285278
> 
> 赞同：0
> 
> 时间：2012-09-05T15:51:27.537
> 
> 标签：html, css, macos

我在另一个里面有一个 div。内部 div 比外部 div 大，我希望外部 div 滚动以显示隐藏的内容。我将其标记为溢出：自动，它工作正常。

但是，由于业务限制，我还需要滚动条出现在外部 div 上。这适用于 Windows 上的所有浏览器。它也适用于 Mac 上的 Firefox。在 Mac 上的 Safari/Chrome 上，我希望在滚动 div 的内容时看到滚动条，就像滚动任何网页时一样。相反，我可以滚动内容，但滚动条永远不会出现。我该怎么做才能让滚动条正确显示？

这是我所拥有的：

```
<style type="text/css">
.inner {
    width: 300px;
    height: 300px;
}
.outer {
    width: 100px;
    height: 100px;
    overflow: auto;
}
</style>

<div class="outer">
<div class="inner">asdf qwer qwer asdf</div>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T16:31:51.687

我认为溢出：滚动；将工作 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T17:56:28.823

我无法弄清楚为什么......但我去了@HenrikAmmer的回答。这对我的解决方案来说已经足够了。

# jasperserver - 如何删除 JasperReports Server 的输入控件中的管道分隔符？

> ID：12285283
> 
> 赞同：0
> 
> 时间：2012-09-05T15:51:40.333
> 
> 标签：jasperserver

在输入控件中指定多个可见字段时，我可以去哪里删除管道分隔符？

![在此处输入图像描述](../Images/1e4f7cf052ac01a15b8aba2222d38073.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:56:23.467

只能给你一个指针，因为我还不需要这样做...对于每个报告都有一个自定义点，使您能够覆盖输入控件的默认表示，您可以在其中指定一个替代 JSP 来执行此操作。JasperReports Server 应该有一些文档来说明如何执行此操作。

# jquery - 带有 jquery 的 CSS 选项卡（与 ios 兼容）

> ID：12285285
> 
> 赞同：0
> 
> 时间：2012-09-05T15:51:51.627
> 
> 标签：jquery, css, ios, mobile, tabs

我正在尝试使我的 css 选项卡与移动设备兼容，尤其是 IOS。我还想在我的页面上使用 3 个不同的选项卡。我没有jquery知识，所以我试图找到一个例子。我发现的最好的例子是使用这种结构；

```
<ul id="tabs">
<li><a href="#" name="tab1">One</a></li>
<li><a href="#" name="tab2">Two</a></li>
<li><a href="#" name="tab3">Three</a></li>
<li><a href="#" name="tab4">Four</a></li>    
</ul>

<div id="content"> 
<div id="tab1">...</div>
<div id="tab2">...</div>
<div id="tab3">...</div>
<div id="tab4">...</div>
</div> 
```

它的jQuery是；

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function() {
    $("#content div").hide(); // Initially hide all content
    $("#tabs li:first").attr("id","current"); // Activate first tab
    $("#content div:first").fadeIn(); // Show first tab content

    $('#tabs a').click(function(e) {
        e.preventDefault();
        if ($(this).closest("li").attr("id") == "current"){ //detection for current tab
         return       
        }
        else{             
        $("#content div").hide(); //Hide all content
        $("#tabs li").attr("id",""); //Reset id's
        $(this).parent().attr("id","current"); // Activate this
        $('#' + $(this).attr('name')).fadeIn(); // Show content for current tab
        }
    });
});
</script> 
```

有一个小问题。我不想将 id 用于标签。我用类更改了 id，然后修改了 CSS。我试图修改脚本，但它不起作用:(我的页面上有三个不同的选项卡组，这就是我将其更改为类的原因。我的新选项卡是；

```
<ul class="tabs">
<li><a href="#" name="tab1">One</a></li>
<li><a href="#" name="tab2">Two</a></li>
<li><a href="#" name="tab3">Three</a></li>
<li><a href="#" name="tab4">Four</a></li>    
</ul>

<div class="tabs_content"> 
<div id="tab1">...</div>
<div id="tab2">...</div>
<div id="tab3">...</div>
<div id="tab4">...</div>
</div> 
```

并尝试将 jQuery 更改为；

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function() {
    $(".tabs_content div").hide(); // Initially hide all content
    $(".tabs li:first").attr("id","current"); // Activate first tab
    $(".tabs_content div:first").fadeIn(); // Show first tab content

    $('.tabs a').click(function(e) {
        e.preventDefault();
        if ($(this).closest("li").attr("id") == "current"){ //detection for current tab
         return       
        }
        else{             
        $(".tabs_content div").hide(); //Hide all content
        $(".tabs li").attr("id",""); //Reset id's
        $(this).parent().attr("id","current"); // Activate this
        $('#' + $(this).attr('name')).fadeIn(); // Show content for current tab
        }
    });
});
</script> 
```

你能帮我用jQuery吗？或者给我一个更好的例子来展示同一页面中的多个标签表？提前感谢

编辑：当我使用一个选项卡组时，现在随着更改，其他选项卡组的内容被隐藏:)

这是CSS文件；

```
 .tabs{
      overflow: hidden;
      width: 100%;
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .tabs li{
      float: left;
      margin: 0 .5em 0 0;
    }

    .tabs a{
      position: relative;
      background: #ddd;
      background-image: linear-gradient(to bottom, #fff, #ddd);  
      padding: .7em 3.5em;
      float: left;
      text-decoration: none;
      color: #444;
      text-shadow: 0 1px 0 rgba(255,255,255,.8);
      border-radius: 5px 0 0 0;
      box-shadow: 0 2px 2px rgba(0,0,0,.4);
    }

    .tabs a:hover,
    .tabs a:hover::after,
    .tabs a:focus,
    .tabs a:focus::after{
      background: #fff;
    }

    .tabs a:focus{
      outline: 0;
    }

    .tabs a::after{
      content:'';
      position:absolute;
      z-index: 1;
      top: 0;
      right: -.5em;  
      bottom: 0;
      width: 1em;
      background: #ddd;
      background-image: linear-gradient(to bottom, #fff, #ddd);  
      box-shadow: 2px 2px 2px rgba(0,0,0,.4);
      transform: skew(10deg);
      border-radius: 0 5px 0 0;  
    }

    .tabs #current a,
    .tabs #current a::after{
      background: #fff;
      z-index: 3;
    }

    .tabs_content
    {
        background: #fff;
        padding: 2em;
        height: 220px;
        position: relative;
        z-index: 2; 
        border-radius: 0 5px 5px 5px;
        box-shadow: 0 -2px 3px -2px rgba(0, 0, 0, .5);
    }

My new settings are;

Script is;

    <script type="text/javascript" src="jquery-1.8.1.js"></script>

    <script>
    $(function(){
        //INIT IS NOT NECESSARY IF YOU FOLLOW MY CODE

    $("#tabs a").click(function(){
        //ADD ACTIVE CLASS
        $(this).parent().siblings().removeClass("current");
        $(this).parent().addClass("current");
        //SHOW CONTENT
        $(".content-holder").removeClass("current");
        var myIndex = $(this).parent().index(); // gets the index of the LI clicked
        $(".content-holder").eq(myIndex).fadeIn();
    });
    });
    </script>
HTML is;

        <ul class="tabs">
        <li class="tab current"><a href="#" name="tab1">One</a></li>
        <li class="tab"><a href="#" name="tab2">Two</a></li>
        <li class="tab"><a href="#" name="tab3">Three</a></li>
        <li class="tab"><a href="#" name="tab4">Four</a></li>    
        </ul>

        <div class="content"> 
        <div class="content-holder current" id="tab1">content1</div>
        <div class="content-holder" id="tab2">content2</div>
        <div class="content-holder" id="tab3">content3</div>
        <div class="content-holder" id="tab4">content4</div>
        </div>

and my css is;
.tabs{
  overflow: hidden;
  width: 100%;
  margin: 0;
  padding: 0;
  list-style: none;
}

.tabs li{
  float: left;
  margin: 0 .5em 0 0;
}

.tabs a{
  position: relative;
  background: #ddd;
  background-image: linear-gradient(to bottom, #fff, #ddd);  
  padding: .7em 3.5em;
  float: left;
  text-decoration: none;
  color: #444;
  text-shadow: 0 1px 0 rgba(255,255,255,.8);
  border-radius: 5px 0 0 0;
  box-shadow: 0 2px 2px rgba(0,0,0,.4);
}

.tabs a:hover,
.tabs a:hover::after,
.tabs a:focus,
.tabs a:focus::after{
  background: #fff;
}

.tabs a:focus{
  outline: 0;
}

.tabs a::after{
  content:'';
  position:absolute;
  z-index: 1;
  top: 0;
  right: -.5em;  
  bottom: 0;
  width: 1em;
  background: #ddd;
  background-image: linear-gradient(to bottom, #fff, #ddd);  
  box-shadow: 2px 2px 2px rgba(0,0,0,.4);
  transform: skew(10deg);
  border-radius: 0 5px 0 0;  
}

.tabs #current a,
.tabs #current a::after{
  background: #fff;
  z-index: 3;
}

.content
{
    background: #fff;
    padding: 2em;
    height: 220px;
    position: relative;
    z-index: 2; 
    border-radius: 0 5px 5px 5px;
    box-shadow: 0 -2px 3px -2px rgba(0, 0, 0, .5);
}

.content-holder {
    display:none;
}
.content-holder.current {
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:58:06.743

救命的 jQuery UI：jqueryui.com/demos/tabs 它们是开箱即用的嵌套。

请参阅此示例： http: [//jsbin.com/ubaq​​e](http://jsbin.com/ubaqe)在[这里](http://forum.jquery.com/topic/jquery-ui-tabs-is-nesting-possible)找到。

[你说你“用类改变了 id 然后修改了 CSS”——看看这些变化会很有帮助。在您粘贴“新标签”的地方，似乎没有什么不同，除了您遗漏了 jQuery！]

[只有 3 个选项卡并不能解释为什么你宁愿使用类而不是 ID。]

[如果您保留代码原样，只删除第 4 个选项卡`<li>`和`<div>`html，现有的 jQuery 应该有效地显示您在#content 中的 div（现在有省略号的位置）中放置的任何内容。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:00:12.487

我建议将您的“当前”更改为一个类，而不是使用一个 ID。

```
$(function(){
    //INIT IS NOT NECESSARY IF YOU FOLLOW MY CODE

    $("#tabs a").click(function(){
        //ADD ACTIVE CLASS
        $(this).parent().siblings().removeClass("current");
        $(this).parent().addClass("current");
        //SHOW CONTENT
        $(".content-holder").removeClass("current"):
        var myID = $(this).attr("name");
        $("#" + myID).fadeIn();
    });
}); 
```

我最初会像这样设置你的 HTML，你可以摆脱不必要的 JS 初始化

```
<ul class="tabs">
    <li class="tab current"><a href="#" name="tab1">One</a></li>
    <li class="tab"><a href="#" name="tab2">Two</a></li>
    <li class="tab"><a href="#" name="tab3">Three</a></li>
    <li class="tab"><a href="#" name="tab4">Four</a></li>    
</ul>

<div class="content"> 
    <div class="content-holder current" id="tab1">...</div>
    <div class="content-holder" id="tab2">...</div>
    <div class="content-holder" id="tab3">...</div>
    <div class="content-holder" id="tab4">...</div>
</div> 
```

像这样设置CSS：

```
.content-holder {
    display:none;
}
.content-holder.current {
    display:block;
} 
```

如果您的内容容器始终遵循与导航相同的顺序，您也可以只执行 $.index() 并使用它来设置您的活动......例如：

```
$("#tabs a").click(function(){
    //ADD ACTIVE CLASS
    $(this).parent().siblings().removeClass("current");
    $(this).parent().addClass("current");
    //SHOW CONTENT
    $(".content-holder").removeClass("current");
    var myIndex = $(this).parent().index(); // gets the index of the LI clicked
    $(".content-holder").eq(myIndex).fadeIn();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:30:44.213

我设置了一个可以处理多个选项卡集的插件。

```
(function ($) {
    $.fn.tabset = function () {
        var $tabsets = $(this);
        $tabsets.each(function (i) {
            var $tabs = $('li.tab a', this);
            $tabs.click(function (e) {
                var $this = $(this);
                    panels = $.map($tabs, function (val, i) {
                        return $(val).attr('href');
                    });
                $(panels.join(',')).hide();
                $tabs.removeClass('selected');
                $this.addClass('selected').blur();
                $($this.attr('href')).show();
                e.preventDefault();
                return false;
            }).first().triggerHandler('click');
        });
      };
})(jQuery); 
```

您必须将 html 包装在包含选项卡和内容的 div 中。您还需要更新锚点以使用标准哈希标签，见下文：

```
<div class="tabset">
    <ul class="tabs">
        <li class="tab"><a href="#tab1">One</a></li>
        <li class="tab"><a href="#tab2">Two</a></li>
        <li class="tab"><a href="#tab3">Three</a></li>
        <li class="tab"><a href="#tab4">Four</a></li>    
    </ul>

    <div class="panel" id="tab1">...</div>
    <div class="panel" id="tab2">...</div>
    <div class="panel" id="tab3">...</div>
    <div class="panel" id="tab4">...</div>
</div> 
```

你可以这样称呼它：

```
$('div.tabset').tabset(); 
```

您可以在以下位置看到一个包含三个选项卡集的工作示例：http: [//jsfiddle.net/rustyjeans/XVp5X/](http://jsfiddle.net/rustyjeans/XVp5X/)

# qt - 将 QProcess::state() 获取到 QString 以进行某些操作

> ID：12285286
> 
> 赞同：1
> 
> 时间：2012-09-05T15:51:56.963
> 
> 标签：qt, qt4

我想获得 QProcess 状态，如果 state() 返回“正在运行”，那么我想做一些操作，但如果我这样做

```
QProcess myprocess;
QString mystring = myprocess.state()
if(mystring=="Running")
 {
//*My code
 }
else
 {
//*Other code
 } 
```

但实际上这给了我错误`error: conversion from 'QProcess::ProcessState' to non-scalar type 'QString' requested`

我知道我这样做是错误的。无论如何可以指出我正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:12:58.543

```
QProcess myprocess;

if(myprocess.state()==QProcess::Running)
 {
//*My code
 }
else
 {
//*Other code
 } 
```

myprocess.state() 返回[枚举 QProcess::ProcessState](http://qt-project.org/doc/qt-4.8/qprocess.html#ProcessState-enum)

# asp.net - 如何在 ASP.Net MVC 中手动切换会话上下文

> ID：12285287
> 
> 赞同：0
> 
> 时间：2012-09-05T15:51:59.670
> 
> 标签：asp.net, json, asp.net-mvc-3, session-state

有没有办法手动切换 ASP.Net 会话或可扩展性机制，允许您提供一种插入 cookie 解析器的方式，该解析器将提取您使用 Javascript 创建的 cookie？

背景 我们正在尝试将 Node UI 与 ASP.NET MVC JSON 服务层（不是 Web API）集成，并利用 ASP.NET 的分布式会话支持，使用 SQL 作为持久性存储。

# android - Android：MySQL 数据库游标导致 IllegalStateException（无法从 CursorWindow 读取行 *、列 *...）

> ID：12285297
> 
> 赞同：0
> 
> 时间：2012-09-05T15:52:27.223
> 
> 标签：android, database, cursor, illegalstateexception

我试图从一个从数据库中获取信息的微调器中获取一个字符串。使用时

```
spinner.getSelectedItem().toString(); 
```

我得到像“android.database.sqlite.SQLiteCursor@412f3ff8”这样的字符串。为了获得已解析的字符串，我尝试使用游标查询数据库，但它会导致 IllegalStatException，同时 LogCat 中出现一条消息说“无法从具有 3 行 2 列的 CursorWindow 读取第 1 行第 2 列。”。

行和列的数字是正确的，因为应该在那里找到的单元格包含我要查询的值。

这是我使用的代码：

```
int selection = (int) spinner.getSelectedItemId(); //I get the selected item id.
        Cursor selectioncursor = db.getAllSubjects(); //This is a query getting all the contents from the table
        selectioncursor.moveToPosition(selection); //The id I got earlier equals the number of the row, the data is stored in, so I move the cursor to the correct row.
        String subject = selectioncursor.getString(2); //Now the cursor should get the string from column 2 which is the one containing all the values (first column is "_id" of course) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-17T04:06:50.710

```
 static void llenaMiSpinner(Cursor cursor, String dato, Spinner spinner, Context context) {
        cursorsimpleAdapter = new SimpleCursorAdapter(context,
                android.R.layout.simple_spinner_item,
                cursor,
                new String[]{dato},
                new int[]{android.R.id.text1},
                SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER
        );
        spinner.setAdapter(cursorsimpleAdapter);
    }

// aqui puedes obtener tu informacion :) 
  @Override
    public void onItemSelected(AdapterView<?> adapterView, View view, int position, long l) {
        int vista = adapterView.getId();
        switch (vista) {
            case R.id.spinner:
                c3 = (Cursor) adapterView.getItemAtPosition(position);
                objetoid = c3.getString(c3.getColumnIndex(recursoBD.Objeto.OBJ_ID));
                break;
            case R.id.spinner2:
                Cursor c4 = (Cursor) adapterView.getItemAtPosition(position);
                marcaId = c4.getString(c4.getColumnIndex(recursoBD.Marca.MAR_ID));
                break;

            case R.id.spinner3:
                //obteiendo ID del Eje que fue Selecionado
                Cursor c1 = (Cursor) adapterView.getItemAtPosition(position);
                ejeSelection = c1.getString(
                        c1.getColumnIndex(recursoBD.Eje.EJE_ID));
                activeTramoSpinner(ejeSelection);

                break;
            case R.id.spinner4:
                Cursor c2 = (Cursor) adapterView.getItemAtPosition(position);
                tramoSelection = c2.getString(c2.getColumnIndex(recursoBD.Tramo.TRAMO_ID));

                break;
            case R.id.spinner5:
                Cursor c5 = (Cursor) adapterView.getItemAtPosition(position);
                id_usuario = c5.getString(c5.getColumnIndex(recursoBD.Usuario.USU_ID));
                break;
        }
    }

llenaMiSpinner(cursorDispo, DISPO_NAME, objetos, this); 
```

# zsh - 在 Mountian Lion 上的 Gentoo 前缀中安装 zsh 失败

> ID：12285304
> 
> 赞同：-1
> 
> 时间：2012-09-05T15:52:44.687
> 
> 标签：zsh, gentoo

这是我第一次在 Mac OS 上使用 gentoo 前缀。

gentoo 前缀的安装花了一些时间，但一切都很顺利。我使用这个脚本在 Mac 上安装 gentoo 前缀：http: [//overlays.gentoo.org/proj/alt/browser/trunk/prefix-overlay/scripts/bootstrap-prefix.sh ?format=txt](http://overlays.gentoo.org/proj/alt/browser/trunk/prefix-overlay/scripts/bootstrap-prefix.sh?format=txt)

但是，当我尝试安装 zsh 时，zsh 的编译一直失败。

我使用的命令只是“emerge zsh”，但我每次都收到以下错误消息：

```
>>> Source configured.
>>> Compiling source in ~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/work/zsh-5.0.0 ...
make 
make[1]: Entering directory `~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/work/zsh-5.0.0/Src'
cd .. && ~/Gentoo/bin/bash $top_srcdir/Src/mkmakemod.sh Src Makemod
creating Src/Makemod.in
~/Gentoo/bin/bash: line 8: 42534 Illegal instruction: 4  ~/Gentoo/bin/bash $top_srcdir/Src/mkmakemod.sh Src Makemod
make[1]: *** [Makemod] Error 132
make[1]: Leaving directory `~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/work/zsh-5.0.0/Src'
make: *** [all] Error 1
 * ERROR: app-shells/zsh-5.0.0 failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=app-shells/zsh-5.0.0'`,
 * the complete build log and the output of `emerge -pqv '=app-shells/zsh-5.0.0'`.
 * The complete build log is located at '~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/temp/build.log'.
 * The ebuild environment file is located at '~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/temp/environment'.
 * Working directory: '~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/work/zsh-5.0.0'
 * S: '~/Gentoo/var/tmp/portage/app-shells/zsh-5.0.0/work/zsh-5.0.0' 
```

任何人都知道这可能的原因以及我应该如何使它工作？

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:40:31.663

似乎是由 bash 引起的。

在您的 .profile 或 .bashrc 添加以下内容：

```
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8" 
```

我希望这会顺利。

# microsoft-sync-framework - 同步框架并添加列

> ID：12285307
> 
> 赞同：0
> 
> 时间：2012-09-05T15:52:52.920
> 
> 标签：microsoft-sync-framework

好吧，我正在探索 Sync Framework 2.1。它工作得很好，直到我改变了一个表并添加了一个列。有很多关于这个主题的文章。这是我的方法

1.  更改表并在数据库中添加一列（主，从）
2.  重命名跟踪表（例如，从 todos_tracking 到 todos_tracking_back）
3.  删除原来的提供范围
4.  创建一个与前者同名的新范围，跳过创建跟踪表
5.  将跟踪表重命名为原始名称（例如，从 todos_tracking_back 到 todos_tracking）

所有这一切只是为了不丢失变化的轨迹。特别适用于大型数据表。

结果如何？当我更新现有行或删除它时，更改不会反映在同步中。但是，当我插入新行时，会反映更改。

有人有这种事情的经验吗？

在我的工作中，有时我们需要更改表以添加新列。现在我们需要同步数据库。

希望清楚。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:47:15.997

在第 3 步中，当您删除范围时，您实际上删除了同步内容的同步知识。您可能只是取消配置和重新配置。

跟踪表只存储更改的内容，不存储同步的内容。那在范围表的知识列中。

由于您删除了范围同步知识，因此 sync fx 无法判断两个数据库中的表是否包含相似的数据。然后它会尝试将现有行从一个数据库应用到另一个数据库，您很可能会遇到冲突。

尝试订阅 ApplyChangesFailed 事件，您应该会看到冲突触发。

新插入将起作用，因为这些是以前不存在的行。

# ruby - 使用 rvm 构建 ruby 1.9.3 通用版本时出错

> ID：12285310
> 
> 赞同：0
> 
> 时间：2012-09-05T15:53:03.423
> 
> 标签：ruby, rvm, 32bit-64bit

我正在尝试使用带有`sudo rvm install 1.9.3 --universal`命令的 rvm 构建 32 位/64 位版本的 ruby​​。

失败了，日志文件如下：

```
linking shared-object tcltklib.bundle
ld: in /usr/local/lib/libxml2.2.dylib, file was built for unsupported file format which is not the architecture being linked (i386) for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [../../.ext/universal-darwin11.4.0/tcltklib.bundle] Error 1
make[1]: *** [ext/tk/all] Error 2
make: *** [build-ext] Error 2 
```

消息说 libxml 是用 64 位构建的，但使用它的 tcltk 是 32 位的。可能有什么问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:47:44.373

您是否尝试过使用此标志`--without-tk --without-tcl`...当然，如果您不需要**tk**。

其他解决方案是也使用 --universal 重新编译所有库，但这可能是一项繁琐的工作。

# iphone - CodeSign 错误：SDK“iOS 5.1”中的产品类型“应用程序”需要代码签名

> ID：12285311
> 
> 赞同：1
> 
> 时间：2012-09-05T15:53:03.157
> 
> 标签：iphone, ios, ios5, code-signing, codesign

我知道这个问题已经问过很多次了。但是他们都没有帮助我解决我的问题。我正在 Ipod 上测试我的应用程序。它工作得很好。但是当我去**配置文件**（检查任何内存泄漏）时，它会抛出以下错误

```
CodeSign error: code signing is required for product type 'Application' in SDK 'iOS 5.1' 
```

当我使用模拟器进行测试时，哪个有效？

我真的很困惑这里发生了什么？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:57:49.020

你能把你的构建设置的屏幕截图吗？那里出了点问题。您通常可以在设备上安装吗？还请检查您的临时配置文件是否已过期或未在构建设置中的调试和发布中选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:03:55.517

确保您的配置文件已正确加载。您可能需要从 Apple Developer 的网站重新下载并重新安装 .mobileprovision 文件。

在重新安装/安装正确的配置文件后，请务必将摘要信息中的发布和调试签名身份设置为正确的设置。

对于发布你想使用发行版和调试你想使用你的开发人员。还要确保您的设备正确用于开发。您可能需要去 xcode 中的管理器并重新配置。

# java - 在 JUnit 中使用 Blobstore

> ID：12285312
> 
> 赞同：3
> 
> 时间：2012-09-05T15:53:03.857
> 
> 标签：java, google-app-engine

我正在尝试测试一些使用 Blobstore API 的代码，但我并没有真正了解如何将一些文件放入 Blobstore。以下不起作用：

```
private BlobKey createBlob(String path) throws Exception {
    FileService fileService = FileServiceFactory.getFileService();
    AppEngineFile file = fileService.createNewBlobFile("foobar");
    FileWriteChannel writeChannel = fileService.openWriteChannel(file, true);
    OutputStream output = Channels.newOutputStream(writeChannel);

    // copy files, guava-style
    InputStream input = new FileInputStream(path);
    assertNotNull(input);
    ByteStreams.copy(input, output); 
    input.close();

    // just in case...
    output.flush();
    output.close();
    writeChannel.close();

    // U NO WORK!!!
    BlobKey blobKey = fileService.getBlobKey(file);
    assertNotNull(blobKey);
    return blobKey;
} 
```

我的配置：

```
new LocalServiceTestHelper(
    new LocalBlobstoreServiceTestConfig()
        //.setNoStorage(true)
        .setBackingStoreLocation("war/WEB-INF/appengine-generated"),
    new LocalFileServiceTestConfig()
).setUp(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:48:03.357

以下测试运行成功

```
public class TestBlobstore {
  private static final LocalServiceTestHelper helper = 
    new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig(),
                               new LocalBlobstoreServiceTestConfig()
                              );

  public TestBlobstore() {
  }

  @Before
  public void setUp() {
    helper.setUp();
  }

  @Test
  public void testBlobstore() throws Exception {
    System.out.println(createBlob("test.txt"));
  }

  private BlobKey createBlob(String path) throws Exception {
    FileService fileService = FileServiceFactory.getFileService();
    AppEngineFile file = fileService.createNewBlobFile("foobar");
    FileWriteChannel writeChannel = fileService.openWriteChannel(file, true);
    OutputStream output = Channels.newOutputStream(writeChannel);

    // copy files, guava-style
    InputStream input = new FileInputStream(path);
    assertNotNull(input);
    ByteStreams.copy(input, output); 
    input.close();

    // just in case...
    output.flush();
    output.close();
    writeChannel.closeFinally();

    // U NO WORK!!!
    BlobKey blobKey = fileService.getBlobKey(file);
    assertNotNull(blobKey);
    return blobKey;
  }
} 
```

两个修改：

*   用户 LocalBlobstoreServiceTestConfig 而不是 LocalFileServiceTestConfig
*   writeChannel.closeFinally(); 而不是 writeChannel.close()

希望这有帮助。

# jqgrid - 次要 jqgrid 在主要的编辑形式

> ID：12285316
> 
> 赞同：0
> 
> 时间：2012-09-05T15:53:19.160
> 
> 标签：jqgrid, edit

我目前正在尝试将辅助 jqgrid 添加到主 jqgrid 的编辑表单中并遇到一些困难。

我正在尝试做的是有一个包含两列的主网格 - ID、描述。添加/编辑其中一个行时，我希望第二个网格代表“ID”字段，允许用户搜索已经在另一个位置预定义的特定 ID。描述字段将是一个普通的编辑字段。

如果这不是直接的选项，是否可以在添加/编辑表单中添加一个按钮以显示模式形式的第二个网格，然后在该网格中选择一行时将选定的“ID”传递回编辑表单？

任何建议/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:19:45.487

这是我的一篇较旧的帖子，但是看到它没有得到回答，我将发布我终于想通的答案。

关键是几个步骤

1.  在 colModel 中使用自定义元素定义您的子网格字段：

    `editoptions: {custom_element: MeasureCreate, custom_value:MeasureValue}`

2.  MeasureCreate(value,options) 方法将一个新表插入到编辑网格中

    `var el = document.createElement("table"); return el;`

3.  MeasureValue(value,options) 返回子网格设置的 var 的值

    `return selectedmeasure;`

4.  在编辑/添加选项中设置一个 onIntializeForm 方法

5.  在 onIntializeForm 函数中创建新网格

    `$('{mygridcolumn}').jqGrid(........................................`

6.  在新网格的 onSelectRow 事件中，在选择行时设置您的值

    `onSelectRow: function(ids) {selectedmeasure = ids;}`

# css - 两列和边框中的div动态宽度

> ID：12285317
> 
> 赞同：0
> 
> 时间：2012-09-05T15:53:19.567
> 
> 标签：css, html

在创建具有两个动态大小列和它们之间的搜索框以及左侧和右侧的可单击选项卡的导航栏时，我遇到了有趣的问题。这是页面的代码：

```
<html>
<head>
<style>
.nav{
font-size: 14px;
width: 100%;
background-color: black;
color:white;
}

.nav .l-table {
display: table;
position: relative;
width: 100%;
}

.nav .l-table .l-cell {
display: table-cell;
position: relative;
text-align: center;
width: 95px;
}

.nav .l-table .l-cell.clickable {
background: gray;
}

.nav .l-table .l-cell.stretch{
min-width: 60px;
width: auto;
border-right: 1px solid;
}
</style>
</head>
<body>

<nav class="nav">
    <div class="l-table">
        <div class="l-cell clickable">
            <a href="#">Home</a>
        </div>

        <div class="stretch l-cell"></div>

        <div style="width:300px;" class="l-cell clickable">
                   <input type="text" value="Search"></input>
        </div>

        <div class="stretch l-cell"></div>

        <div class="l-cell clickable">
            <a href="#">Login</a>
        </div>
</div>
</nav>

</body>
</html> 
```

请注意在调整窗口大小时两个黑色区域是如何缩小的。这是我想要的行为，以便导航栏根据屏幕大小调整其大小。

我遇到的问题是我不需要元素，但是当我从 css`border-right`中`.nav .l-table .l-cell.stretch`删除它们时，行为变得不同并且 width: auto 不起作用。

您可能知道可能是什么问题吗？移除边框会导致这种情况很奇怪，对我来说这似乎是一个错误。

您还有其他建议如何使用不同的 css 进行相同的导航吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:37:42.533

您正在使用相当混乱的固定和可变宽度属性。如果您的问题允许，我可以建议仅使用相对宽度定义。

那是：

```
.nav .l-table .l-cell {
display: table-cell;
position: relative;
text-align: center;
width:5%;
min-width: 95px;
}

.nav .l-table .l-cell.clickable {
background: gray;
}

.nav .l-table .l-cell.clickable2 {
background: gray;
width:20%;
min-width:300px;
}

.nav .l-table .l-cell.stretch{
min-width: 60px;
width: 35%;
} 
```

（clickable2 类用于中心搜索框。在此处更改类名并摆脱线条样式的宽度。）

# algorithm - 应用动态规划技术的子问题的独立性

> ID：12285318
> 
> 赞同：5
> 
> 时间：2012-09-05T15:53:20.033
> 
> 标签：algorithm, recursion, complexity-theory, dynamic-programming

通过动态规划技术解决算法的两个标准是

1.  子问题应该是独立的。
2.  子问题应该重叠。

我想我明白重叠意味着什么。它基本上意味着子问题具有可能相同的子子问题。因此，我们不是一次又一次地解决子子问题，而是一次解决，把它放在一个哈希表或数组中，然后可以查找它所需的嵌套时间。但是第 1 点（即**子问题的独立性）**在这里意味着什么？如果它们有一些共同的子子问题，我们如何称它们为独立的？我的意思是在这个阶段这对我来说听起来非常违反直觉。

**编辑**：这个标准实际上是[在著名的书中给出的：CLRS 在动态编程一章中介绍算法。](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:34:51.480

请告诉我们您在哪里阅读 DP 适用于重叠和独立子问题的问题。我不认为这是正确的，出于与您给出的相同直观原因 - 如果问题重叠，它们就不是独立的。

我通常将独立的子问题作为分而治之的算法的标准，而我将重叠的子问题和*最佳子结构*作为动态编程系列的标准。（直观地说，最优子结构是指一个更大问题的最优解是由子问题的最优解组成的。经典的例子是图问题中的最短路径：如果你知道从 A 到 B 的最短路径经过C，那么你也知道从 A 到 B 的最短路径经过 C 的那*部分恰好是从 A 到 C 的最短路径。）*

**更新：**哦，我明白了——是的，我想他们确实提到了独立性。但是我没有像您那样强调这一点。意思是，他们在最优子结构的更大和更重要概念的背景下或作为一种理解方式提到了独立性。

他们所说的独立性的具体含义是，即使两个问题重叠，它们也是“独立的”，因为它们不相互作用——一个问题的解决方案并不真正依赖于另一个问题的解决方案。他们实际上使用了我所做的相同示例，最短路径。最短路径问题的子问题是较小的独立最短路径问题：如果从 A 到 B 的最短路径经过 C，那么从 A 到 C 的最短路径不使用从 C 到 C 的最短路径中的任何边B.相比之下，*最长路径*问题不具有子问题的独立性。

我不认为 CLRS 提出独立性是错误的，但我确实认为他们使用的语言有点模棱两可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-21T23:58:24.360

正如 CLRS 中所提供的，作者解决了子问题的独立属性和重叠属性之间的区别。他们写，

> “动态规划依赖于既独立又重叠的子问题似乎很奇怪。虽然这些要求可能听起来自相矛盾，但它们描述了两个不同的概念，而不是同一轴上的两个点。同一问题的两个子问题如果它们是独立的不共享资源。如果两个子问题确实是作为不同问题的子问题出现的同一个子问题，则它们是重叠的”（CLRS 第 3 版，386）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:39:41.687

我认为这些标准的措辞很糟糕，因为重叠和独立具有某种冲突的含义。

无论如何，为了能够有效地使用你需要的 DP 方法

1.  可以根据更简单的问题递归定义的问题
2.  部分解决方案的概念，其中剩余部分的解决方案不取决于您如何到达当前点

示例：如果您想计算从第一行开始在矩阵中移动并且每个步骤都在下一行并且在同一列或相邻列中移动时的最大和路径是什么，您可以将当前总和用作“状态” ，当前行和当前列，因为对于解决方案，用于到达当前位置的路径无关紧要。

```
1  4 [3] 2  1  4  9
2  1 [3] 1  2  3  1
9 [8] 3  0  1  2  9
0 [0] 2  4  1  6  3
1  2 [6] 3  0  4  1 
```

在上面的模式中，这条路径的总和为 3+3+8+0+6。为了使总和最大化，您可以观察到从某个点经过的路径的最大值可以作为到达那里的最大值和从那里到矩阵末端的最大值。因此，解决方案可以拆分为独立的子问题，您可以缓存从矩阵的给定点到最后的最大总和的结果（独立于您如何到达该点）。

```
def maxsum(x, y):
    if (x, y) in cache:
        return cache[(x, y)]

    if y == height - 1:
        return matrix[y][x]

    if x == 0:
        left = -1
    else:
        left = matrix[y][x] + maxsum(x-1, y+1)

    center = matrix[y][x] + maxsum(x, y+1)

    if x == width-1:
        right = -1
    else:
        right = matrix[y][x] + maxsum(x+1, y+1)

    result = cache[(x, y)] = max(left, center, right)
    return result 
```

如果我添加到规则中允许不超过三个“9”但是你不能只使用坐标作为状态，因为后面的子问题（到最后）将受到前一个的影响（即有多少个“9” “你在到达中间位置时已经收集了）。

您仍然可以使用动态编程方法，但具有更大的状态空间，例如将收集到的“9”的数量添加到当前状态表示中。

```
def maxsum(x, y, number_of_nines):
    if (x, y, number_of_nines) in cache:
        return cache[(x, y, number_of_nines)]
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T05:25:43.353

我不认为子问题应该是依赖的。事实上，如果子问题是独立的，那就太好了，但这不是必需的。

具有相关子问题的 dp 问题的一个很好的例子是： [Paint Houses - Algorithmic questions](https://stackoverflow.com/q/45401569/3769451) (paint house problem)

在这里，子问题的解决方案取决于前一个房子的颜色。这种依赖性可以通过向 dp 数组添加一个维度并根据前一个房子的颜色构建解决方案来解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-10T14:23:37.873

子问题是独立的。

分而治之并不存在独立。例如。在合并排序中。子问题在划分后合并，这意味着解决方案有共同的子问题。一切都需要合并，没有一条路可以给出答案。每个子问题都共享子问题，需要解决这些子问题才能获得最终答案。

```
 (1, 4)
                     /         \
             (1, 2)             (3, 4)
          /        \            /       \
      (1,1)         (2,2)  (3,3)          (4,4)
          \          /          \        /
              (1,2)               (3, 4)
                      \         /  
                         (1, 4) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-27T03:10:25.317

我的理解是子问题应该独立于父级更大的问题来解决。就像回溯子问题一样，确实取决于您在更大的问题中选择的解决方案。

# mysql - 无法重新打开表 mysql

> ID：12285328
> 
> 赞同：0
> 
> 时间：2012-09-05T15:53:45.040
> 
> 标签：mysql, stored-procedures

我有以下过程说明`can't reopen table`为什么会出现此错误。这是查询：

```
DECLARE rangee INT;
DECLARE uid BIGINT;

SET @rangee = plimitRange * 10; 
SET @uid    = puserid;

DROP TEMPORARY TABLE IF EXISTS Rangee;
CREATE TEMPORARY TABLE Rangee(max BIGINT,min BIGINT);

PREPARE STMT FROM
'INSERT INTO Rangee
select max(postid),MIN(postid) from
(
select wall.postid from wall,posts where  
wall.postid = posts.postid and posts.userid=?
order by wall.postid desc LIMIT 10 OFFSET ?
)m;
';

 EXECUTE STMT USING @uid,@rangee;
 DEALLOCATE PREPARE STMT;

 select comments.comment,comments.postid,user.name,comments.userid 
 from user,posts,comments where 
 posts.postID = comments.postid and 
 comments.postid<=(select max from Rangee) and 
 comments.postid>=(select min from Rangee) and posts.userid = puserid and 
 user.userid=comments.userid order by comments.postid desc; 
```

在这里，我从另一个表中插入值`min`和`max id's`临时表，以便我可以使用这些值在最终查询中检索我的数据。但是在我指定范围的最终查询中，即包含`(select max from Rangee)`并`(select min from Rangee)` 给出此错误的行.我该如何解决它。最小值和最大值的值返回正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:45:47.060

```
<UPDATE> 
```

然后忘记整个过程，在一个查询中完成：

```
select comments.comment,comments.postid,user.name,comments.userid 
 from 
 user
 INNER JOIN comments ON user.userid=comments.userid
 INNER JOIN posts ON posts.postID = comments.postid
 WHERE 
 comments.postid <=  
 (select MAX(postid) from
    (
    select wall.postid from wall,posts where  
    wall.postid = posts.postid and posts.userid=?
    order by wall.postid desc LIMIT 10 OFFSET ?
    )sq1
 )

 and 
 comments.postid >= 
 (select MIN(postid) from
    (
    select wall.postid from wall,posts where  
    wall.postid = posts.postid and posts.userid=?
    order by wall.postid desc LIMIT 10 OFFSET ?
    )sq2
 ) 
 and 
 posts.userid = puserid 
 order by comments.postid desc; 
```

就是这样。

```
</UPDATE> 
```

老答案...

```
DECLARE rangee INT;
DECLARE uid BIGINT;

SET @rangee = plimitRange * 10; 
SET @uid    = puserid;

PREPARE STMT FROM
'select @max_postid := MAX(postid), @min_postid := MIN(postid) from
(
select wall.postid from wall,posts where  
wall.postid = posts.postid and posts.userid=?
order by wall.postid desc LIMIT 10 OFFSET ?
)m;
';

 EXECUTE STMT USING @uid,@rangee;
 DEALLOCATE PREPARE STMT;

 select comments.comment,comments.postid,user.name,comments.userid 
 from user,posts,comments where 
 posts.postID = comments.postid and 
 comments.postid<=@max_postid and 
 comments.postid>=@min_postid and posts.userid = puserid and 
 user.userid=comments.userid order by comments.postid desc; 
```

您根本不需要临时表。而且这样做也很糟糕，`comments.postid <= (select max from Rangee)`因为这可能会返回不止一行。您至少应该使用过`comments.postid <= (select MAX(max) from Rangee)`.

也读[这个](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html)。

# c - 在 Mac OS X 和 Ubuntu 中将 atoi() 用于 C 时的不同结果

> ID：12285342
> 
> 赞同：4
> 
> 时间：2012-09-05T15:55:03.543
> 
> 标签：c, glibc, atoi

这是我在 Mac OS X（10.8.1、64 位和 10.6.8、32 位）和 Ubuntu（10.04、32 位）上运行的代码：

```
printf("%d\n", atoi("2147483648"));
// returns -2147483648 in Mac OS X 10.8.1 and 10.6.8
// returns 2147483647 in Ubuntu 
```

这是我在谷歌搜索后发现的：http://gynvael.coldwind.pl/?id= [365](http://gynvael.coldwind.pl/?id=365)

输出在不同系统上有所不同有什么原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T15:57:19.267

这并不奇怪，因为标准[没有指定](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)行为：

> 当转换后的值超出 int 的可表示值范围时会发生什么，没有标准规范。

该[`strtol`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)函数在返回中为您提供更多信息，因为它设置`errno`为`ERANGE`当值不适合 a 时`long int`。

# scala - Scala Lift - MongoDB 从查询中返回特定字段

> ID：12285345
> 
> 赞同：0
> 
> 时间：2012-09-05T15:55:21.373
> 
> 标签：scala, mongodb, lift

我有以下内容：

```
User_Model.findAll(

    ("online" -> ("$gt" -> (

        (System.currentTimeMillis() / 1000) - 60

    ))

) 
```

我要做的是以某种方式定义将返回每条记录的哪些字段，而不是拉出整个对象。

在此先感谢您的帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:32:34.697

我不知道电梯，但根据[这个](http://scala-tools.org/mvnsites/liftweb-2.4/net/liftweb/mongodb/record/MongoMetaRecord.html)和[这个](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)你应该能够做这样的事情：

```
User_Model.findAll(
    qry = ("online" -> ("$gt" -> ((System.currentTimeMillis() / 1000) - 60))), 
    keys = ("myfield" -> 1)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:31:47.587

以防万一有人在寻找参考，这就是我最终这样做的方式：

```
User_Model.findAll(

    ("online" -> ("$gt" -> (

        (System.currentTimeMillis() / 1000) - 60)

    )),

    ( /* Field names */

        ("uid" -> 1) ~ ("name" -> 1)

    ),

    Empty

) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T16:19:30.320

阅读基本文档有助于：

[http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)

将其应用于任何语言或框架留给您作为练习。

# python - 如何导入 __init__.py 中定义的变量？

> ID：12285349
> 
> 赞同：5
> 
> 时间：2012-09-05T15:55:39.690
> 
> 标签：python

我对导入的工作方式有点困惑。认为：

```
package/
    __init__.py
    file1.py 
```

在`__init__.py`：

```
from file1 import AClass
__version__ = '1.0' 
```

在`file1.py`：

```
Class AClass(object):
    def bar():
        # I want to use __version__here, but don't want to pass
        # it through the constructor. Is there any way?
        pass 
```

如果我使用`from . import __version__`它`file1.py`只是说`ImportError: cannot import name __version__`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:58:26.863

你有一个循环依赖，因为两个文件`import`互相尝试。移动`__version__`到一个单独的模块，比如说`package/version.py`，然后在其他两个模块中导入

```
from .version import __version__ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:58:40.013

尝试：

```
__version__ = '1.0'
from file1 import AClass 
```

您需要在导入模块之前分配常量，以便在您尝试导入它时它会就位。

*编辑：* larsmans 建议避免循环依赖是个好主意。

# fortran - Fortran 中的 FGETC 库名称？

> ID：12285354
> 
> 赞同：2
> 
> 时间：2012-09-05T15:56:06.800
> 
> 标签：fortran, fgetc

是否有一个库可以显式链接到我的 Fortran 代码以查找 FGETC 函数？我收到 fgetc 函数的未解析外部符号的链接器错误，我尝试使用“USE IFPORT”，但这破坏了很多其他东西。我在 Visual Studio 2008 中构建并使用 Intel Fortran Composer XE 2011 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:03:27.963

由于`FGETC`是英特尔在模块中打包的非标准功能，`IFPORT`我不确定您是否有任何替代使用关联它的方法。如果使用关联整个模块会导致问题，您可能会侥幸逃脱

```
use ifport, only : fgetc 
```

# entity-framework - 在 CodeFirst EF 中创建相互引用的关系

> ID：12285355
> 
> 赞同：1
> 
> 时间：2012-09-05T15:56:07.400
> 
> 标签：entity-framework, ef-code-first, relationships

我在设置数据库所需的正确关系时遇到了一些问题。

用文字...我想拥有一个可以多个（零：多个）**分支机构的****公司**

 **在**公司**上，我希望能够指定将存在的**HeadOffice**将存在于**Branch**表中（零：一）

我希望看到的是具有以下字段的**公司**表：Id、Name、HeadOfficeId 以及我希望看到的**分支：Id、TradingAs、Name、Firm_Id**

相反，我看到：

**公司**表具有以下字段：Id、Name、HeadOfficeId

**我希望看到的**分支：Id、TradingAs、Name、Firm_Id、Firm_Id1****

 **模型类如图所示

```
public class Firm
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Branch> FirmBranches { get; set; }

    public virtual LawFirmBranch HeadOffice { get; set; }
}

public class Branch
{
    public int Id { get; set; }
    public string TradingAs {get;set;}
    public string Name {get;set;}

    public Firm Firm { get; set; }

} 
```

我知道这会导致循环引用类型问题，我很高兴将 Firm HeadOffice 最初设置为 Null，直到 FirmBranches 属性中有值。

有什么方法可以指定 HeadOffice 具有 null 或一种类型的关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:02:20.533

如果您想在模型中明确执行此操作，可以通过数据注释执行此操作：

公共类公司 { public int Id { 获取；放; } 公共字符串名称 { 获取；放; }

```
public virtual ICollection<Branch> FirmBranches { get; set; }

[ForeignKey("HeadOffice")]
public int? FirmId {get;set;}

public virtual LawFirmBranch HeadOffice { get; set; } 
```

}

如果你不想在你的代码中暴露这个，你需要通过 fluent 来做到这一点：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Firm>()
            .HasOptional(f => f.HeadOffice)
            .WithOptionalDependent();
    } 
```

这将创建：

![在此处输入图像描述](../Images/3f46349990ed6966f4f61b705d76175e.png)

如果您想更改键的名称，您需要在流式映射的末尾添加一个映射：

```
 modelBuilder.Entity<Firm>()
            .HasOptional(f => f.HeadOffice)
            .WithOptionalDependent()
            .Map(m => m.MapKey("YourKeyName")); 
```****

# c# - 访问 ListView 复选框

> ID：12285357
> 
> 赞同：0
> 
> 时间：2012-09-05T15:56:22.590
> 
> 标签：c#, .net, wpf

我试图弄清楚如何修改嵌入在 ListView/GridView 中的复选框的状态。问题是该复选框取决于单独 DataGrid 中某些记录的批准状态。（例如，我使用复选框作为批准状态 True = 全部批准，False = 无，null = 部分批准）。

由于 DataContext 是一个实体，它没有我可以用来处理它的布尔值。

```
<ListView x:Name="EmployeeNameListBox" Height="330" ItemsSource="{Binding}" SelectedValuePath="ID" SelectionChanged="EmployeeNameListBoxSelectionChanged">
    <ListView.View>
        <GridView AllowsColumnReorder="False" >                           
            <GridViewColumn>
        <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox IsThreeState="True" Checked="EmployeeCheckBoxChecked" Unchecked="EmployeeCheckBoxChecked" x:Name="CheckBoxHero"/>                                                  
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock>
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0}, {1} - {2}">
                                    <Binding Path="LastName" />
                                    <Binding Path="FirstName" />
                                    <Binding Path="EmployeeNumber" />
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

这是我尝试更新审批状态的地方：

```
foreach (var employee in this.employees)
{
    var records = from a in this.dailyActivities where a.Employee == employee select a;

    var approvedRecords = from r in records where r.IsApproved == true select r;

    if (approvedRecords.Count() == 0)
    {
        // None Approved checkbox state = false
    }
    else if (approvedRecords.Count() == records.Count())
    {
         // All Approved checkbox state = true
    }
    else
    {
         // Some Approved Set Checkbox state to null
    }                
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:12:37.283

在您的 ViewModel 类中创建一个`Nullable bool (bool?)`包装器属性（我假设您使用的是 MVVM 模式）并使用`RelativeSource`.

将您的逻辑放入`getter`该属性中-

```
public bool? IsRecordApproved
{
  get
  {
     .....
     // Your logic here
  }
} 
```

每当您希望在 UI 上更新属性时，请在您的属性上引发属性更改事件。（`INotifyProeprtyChanged`事件应该由您的 ViewModel 类实现）

# java - 构造条件SQL语句的设计模式

> ID：12285358
> 
> 赞同：0
> 
> 时间：2012-09-05T15:56:23.243
> 
> 标签：java, oracle, design-patterns

我有一个问题。

我有 SQL，我需要附加不同类型的“限制”，甚至进行连接。这取决于用户的搜索条件。

该 SQL 将涉及不同的表，因为它可以搜索一对多的关系，因此休眠 ORM 不能支持我的要求。

请问是否有设计模式可以帮助构建此类 SQL 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:01:12.190

我确实有一个类似的要求，我有一种无上下文的语言来定义搜索条件，解析`ParseEntry`为`ParseTree`类似于`Restrictions`. 我使用 a`SQLQueryGeneratorVisitor`访问解析表并生成 SQL 查询，`HibernateCriteriaGeneratorVisitor`如果需要为单个实体生成条件，则类似于 a。因此，我基本上使用了[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)模式，使解析树和条目可访问，以便可以生成不同类型的条件（SQL/Hibernate 或将来的其他东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:29:17.970

适合表示语言语句问题的设计模式是[解释器模式](http://en.wikipedia.org/wiki/Interpreter_pattern)。但在开始编写 SQL 解析器之前，请查看[ANTLR](http://www.antlr.org/grammar/list)。更重要的是，问自己两个问题：

1.  不同 SQL 的数量是否证明了开发通用 SQL 解释器解决方案而不是编程（仅 if-else 语句）我的 5-10 个不同查询的努力？
2.  我是否详细查看了 Hibernate 参考手册？

# html - 如何在 Dynamics AX 中解码/取消转义 HTML

> ID：12285359
> 
> 赞同：1
> 
> 时间：2012-09-05T15:56:26.343
> 
> 标签：html, xml-serialization, decode, dynamics-ax-2009, microsoft-dynamics

我在通过 AIF Web 服务获得的 XML 请求中编码了一些 HTML。

我得到的文本当然是转义的 - 我得到 <br> 而不是 <br> 。

有没有正确的解码方法？我不想为基本的东西写一些东西，然后处理接下来十年的错误报告，因为我忘记了一个我不知道存在的重音字符......

蹩脚的部分是，当我将特殊的 HTML/XML 字符提供给 XMLTextWriter 时，它会正确地对它们进行编码，但如果我将相同的 XML 提供给 XMLTextReader，它就不会解码它们。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:02:53.877

```
static void HtmlDecode(Args _args)
{
    str input   = '&lt;br&gt;';
    str output  = System.Web.HttpUtility::HtmlDecode(input);
    ;

    info(output);
} 
```

结果：`<br>`

# java - Java项目中的版本控制？

> ID：12285363
> 
> 赞同：2
> 
> 时间：2012-09-05T15:56:34.373
> 
> 标签：java, version-control

如果我通过 Netbeans 创建一个新的 Java 项目，它的结构如下：

*   建造
*   距离
*   源代码
*   构建.xml
*   清单文件

我的问题是，我需要将 build 和 dist 置于版本控制之下吗？还是仅仅放置 src、build.xml 和 manifest.mf 就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:57:33.727

只需 src、build.xml 和 manifest.mf 就足够了。dist 和 build 应该由您用来构建的任何内容构建。（maven、NetBean 等）

如果您提交 dist 并构建，那么您正在复制您的代码。src、build.xml 和 manifest.mf 详细说明了项目的人类可读部分。build 和 dis 是它的机器转换部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:58:01.623

通常，构建工件不受版本控制，并被添加到 svn:ignore 或 p4:ignore 或 cvs:ignore 列表中，这样它们就不会出现在任何同步过程中。

# django - 字段不允许过滤（不使用关系）

> ID：12285364
> 
> 赞同：2
> 
> 时间：2012-09-05T15:56:35.850
> 
> 标签：django, tastypie

我对 django 和 sweetpie 有疑问

给出以下代码：

```
class CandidatePollResource(ModelResource):
    class Meta:
        queryset = Candidate.objects.all()
        resource_name = "candidate-poll"
        filtering = {"status": ALL }

class Candidate(Profile):
    """
    This profile stores all information about a candidate.
    """
    status = models.CharField(_('status'), max_length=15, blank=True, choices=CANDIDATE_STATUS_CHOICES)

class Profile(models.Model):
    """
    Abstract basic class all profiles should inherit.
    """
    user = models.OneToOneField(CustomUser,related_name='%(class)s',)
    invitationdate = models.DateField(_('invitationdate'), null=True, blank=True)
    confirmationdate = models.DateField(_('confirmationdate'), null=True, blank=True)
    activation_key = models.CharField(_('activation_key'), max_length=32, blank=True)
    # Adding of "class" here is important for this to work. See
    # http://thedjangoforum.com/board/thread/417/reverse-query-name-for-field-clash/?page=1
    created_by = models.ForeignKey(CustomUser, related_name='%(class)s_created', blank=True, null=True)

    objects = ProfileManager()

    class Meta:
        abstract = True 
```

每次我们尝试调用过滤结果集（`http://localhost:3000/api/v1/candidate-poll/?status__exact=new`）时，我总是收到以下错误

`The 'status' field does not allow filtering.`

如何在该字段上启用过滤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:54:43.207

我认为您的语法并不完全正确。代替：

```
filtering = {"status": ("exact", "in",), } 
```

尝试：

```
filtering = {"status": [ "exact", "in" ] } 
```

如果这不起作用，您可以尝试：

```
filtering = {"status": ALL } 
```

并从那里开始。`ALL`应该允许一切，所以如果它不起作用，这将意味着问题出在其他地方。

有关更多信息，请查看[Tastypie 文档](http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-30T07:13:53.820

一起去

过滤 = { '状态' : ['精确'] }

现在您可以在 URL [http://localhost:3000/api/v1/candidate-poll/?status=new](http://localhost:3000/api/v1/candidate-poll/?status=new)中使用，并且该字段被过滤，只有状态为新的 json 数据

# sql - 使用主 ID 字段联合两个不同的表

> ID：12285366
> 
> 赞同：0
> 
> 时间：2012-09-05T15:56:45.460
> 
> 标签：sql, sql-server-2008

我有两张桌子

```
MD_Master（医疗检查）
ID
...

CD_Personal（个人支票）
ID
...
```

两个表中的每个字段名都是不同的名称、类型和数据。

但是，每个都有一个 Primary Key `Id`，并且可能会相互冲突。

即`Id` `101`可以同时存在于`MD_Master`和`CD_Personal`

我想创建一个组合两个表（组合`MD_Medical`和`CD_Personal` `Id`字段）的视图，但我不知道如何处理`Id`s.

我希望视图有一个`Numeric(19,0)`for `Id`。

是否可以选择并合并这两个不同的表并创建一个唯一的 ID？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:06:49.540

目前尚不清楚您在这里尝试做什么，但您可以在每一行上创建一个标识符，类似于：

```
SELECT Id, 'M' as tbl
FROM MD_Master
UNION ALL
SELECT Id, 'P' as tbl
FROM CD_Personal 
```

这将允许您通过查看记录来自哪个表来区分每一行。然后，如果您有相同的记录，`ID`您将知道来自哪个表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:05:06.343

你可以尝试这样的事情：

```
declare @medical table(id int, checks varchar(10))

declare @personal table(id int, checks varchar(10))

insert into @medical 
select 1, 'abc1'
union
select 2, 'abc2'

insert into @personal
select 1, 'abc1'
union
select 2, 'abc22'

;WITH CTE AS (
select *, 'M' As Src from @medical 
union
select *, 'P' As Src from @personal
)

SELECT checks, src, ROW_NUMBER() over (order by checks, id) new_id FROM CTE 
```

在你的情况下：

```
SELECT checks, src, ROW_NUMBER() over (order by [checks], id) new_id 
FROM 
(

SELECT id, [Medical checks] Checks, 'M' as Src FROM MD_Master
UNION ALL
SELECT id, [Personal checks] Checks, 'P' as Src FROM CD_Personal

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:02:15.867

也许您可以将 ID 与阻止冲突的东西连接起来？如有必要，您可以再次解析它，即...

```
SELECT CONVERT(varchar, ID) + 'MD', FirstName, LastName, DOB FROM MD_Master
UNION
SELECT CONVERT(varchar, ID) + 'CD', FirstName, LastName, DOB FROM CD_Personal 
```

之后你想对数据做什么？

# wordpress - 如何使用 wordpress 元框中的单个复选框值？

> ID：12285368
> 
> 赞同：0
> 
> 时间：2012-09-05T15:56:55.657
> 
> 标签：wordpress, loops, checkbox, meta

我正在尝试使用元框复选框在悬停时隐藏/显示。问题是如果任何帖子选中了复选框，它会显示 div。我需要它根据复选框是否被选中来切换 div “on”和“off”。任何帮助将不胜感激。这是我的functions.php中的代码：`// Checkbox Meta add_action("admin_init", "checkbox_init");

```
function checkbox_init(){
add_meta_box("checkbox", "Check to Show Bubbles", "checkbox", "homefeature", "normal",    "high");
}

function checkbox(){
global $post;
$custom = get_post_custom($post->ID);
$field_id = $custom["field_id"][0];

echo '<label>Show Bubbles?</label>';
$field_id_value = get_post_meta($post->ID, 'field_id', true);
if($field_id_value == "yes") {
$field_id_checked = 'checked="checked"';
}
echo ' <input type="checkbox" name="field_id" value="yes" '.$field_id_checked.' />';
}

// Save Meta Details
add_action('save_post', 'save_details');

function save_details(){
 global $post;

  if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
   return $post->ID;
}

update_post_meta($post->ID, "field_id", $_POST["field_id"]);
}

function custom_content($id) {
$field_id = get_post_meta($id, 'field_id', true);

if($field_id == yes) {
     echo '<script type="text/javascript">';
         echo '$("this").mouseover(function() {';
     echo "$('#mainFeatureFlashBG').css({'display' : 'block'})";
     echo '}</script>'; 
}
else{
   echo '<script type="text/javascript">';
       echo '$("this").mouseover(function() {';
   echo "$('#mainFeatureFlashBG').css({'display' : 'none'})";
   echo '}</script>';
}
}` 
```

这是我的php：

```
 <ul>  
            <!-- Begin Miller Beer Logo Query-->                      
            <?php
            $args=array(
              'beerlogo'=>'miller',
              'post_type' => 'homefeature',
              'post_status' => 'publish',                
              'posts_per_page' => -1
            );
            $my_query = null; 
            $my_query = new WP_Query($args); 
            if( $my_query->have_posts() ) {

              while ($my_query->have_posts()) : $my_query->the_post(); ?>
                 <li class="image-rollover"><a href="<?php echo     esc_url(get_post_meta($post->ID, 'homefeature_custom_link', true));
            ?>"><?php the_post_thumbnail('full'); ?>               
            <?php
        //Is the Checkbox for Bubbles Checked?
        custom_content(get_the_ID());               
    ?>             

             </a>
            </li> 

                <?php
              endwhile;
            } 
            wp_reset_query(); 
            ?>
        </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:40:08.100

您应该检查：

```
<?php

if(get_post_meta($post->ID,'field_id',true) != '') {
 // do something, output div
} ?> 
```

请参阅此处的功能参考：

[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

# .net - .NET - 为什么只允许在单元测试期间处理标准输出？

> ID：12285370
> 
> 赞同：1
> 
> 时间：2012-09-05T15:57:02.093
> 
> 标签：.net, unit-testing, disposable, dispose

首先，我想指出我真的不想处理标准输出......我只想知道为什么我会看到所描述的行为。我没有写描述的错误代码。

我使用 .NET 4 进行单元测试，使用 .NET 3.5 进行测试的代码。我使用 MSTest for .NET 4 作为我的测试框架。

最近，我一直在使用一个由于处理标准错误输出的错误而引发错误的库。（请参阅[LibTiff.NET ReadDirectory is given System.ObjectDisposedException Only during Unit Tests](https://stackoverflow.com/questions/12114992/libtiff-net-readdirectory-is-giving-system-objectdisposedexception-only-during-u/12117105)）。

这是他们的代码相对的样子：

```
using (TextWriter stderr = Console.Error)
{
    ...
} 
```

基本上，在不运行单元测试时，即使专门处理标准输出也不处理，但在运行单元测试时，是允许的。

**谁能解释为什么标准输出仅在单元测试的上下文中是一次性的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:37:08.697

在已处置的对象上调用方法将抛出`ObjectDisposedException`. 例如：

```
var textWriter = Console.Error;
textWriter.Dispose();
textWriter.WriteLine("Test"); 
```

最后一行应该抛出异常。除了它并不总是这样。

如果您仔细阅读 BCL 源代码，您会看到`Console`要么使用`StreamWriter`（真正的同步流编写器）连接到“真实”流（例如控制台错误流），要么使用`StreamWriter.Null`.

“真实”`StreamWriter`以一种特殊的方式构造，因此它是不可关闭的。这意味着即使您关闭它（或处置它），它也会继续按预期运行。

因此，如果您有一个“真正的”控制台流，您可以`Console.Error`在不关闭基础流的情况下关闭任意次数。你也不会得到任何`ObjectDisposedException`。

如果没有附加到`Console.Error`关闭的“真实”流，则将关闭不表现出特殊不可关闭行为`StreamWriter`的底层流（在这种情况下），如果您尝试使用后者，您将获得一个.`Stream.Null``StreamWriter``ObjectDisposedException`

**底线是，`ObjectDisposedException`如果您在没有真正控制台流的应用程序中过早关闭控制台流编写器，您可以获得一个。**

上述信息也适用于`Console.Out`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:09:09.137

问题可能是由于 MSTest 使用标准输出流。除了将计时写入流中，当您运行测试时，标准输出实际上存储并在测试结果中可用。通过处理标准输出流，您可能会干扰测试框架本身的操作。

话虽这么说，这是一个错误 - 所以你的测试向你展示了你不应该做的事情......幸运的是，图书馆已经纠正了这个错误，所以你将来应该会很好。

# elasticsearch - elasticsearch 返回的方面数

> ID：12285371
> 
> 赞同：5
> 
> 时间：2012-09-05T15:57:08.970
> 
> 标签：elasticsearch, faceted-search

我有使用 elasticsearch 0.19.9 的多面查询。但是，我想返回计数 > 0 的所有方面。

根据文档，我应该能够：

```
{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "all_terms" : true
            }
        }
    } 
```

}

据我了解，即使计数为 0，这也应该给我所有方面。

但是，这仍然只返回计数前 10 个方面。这是默认大小。唯一似乎影响返回面数的事情是通过实际设置将返回的面数`"size" : N` 在哪里`N`。

我可以将其设置为一个非常高的数字，但这似乎有点骇人听闻。

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:31:25.477

你没有做错什么。你猜对了！在 github 上有一个[未解决](https://github.com/elasticsearch/elasticsearch/issues/1776)的问题，使术语方面类似于[术语统计方面](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-stats-facet.html)，它允许您设置 size=0 以获取所有术语。现在你只需要使用一个高值，这有点棘手，我同意。另一方面，请注意不要返回太多条目！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T08:43:40.893

```
{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "size" : 2147483647,
                "all_terms" : false
            }
        }
    }
} 
```

删除“count: 0”的唯一方法是将“all_terms”设置为 false，并在 Elasticsearch 实例中将您的大小数字设置为尽可能高和不可能（上面的示例是整数中的最大有符号值） PHP 可以有）。

这可能不是最好的方法，但这是迄今为止唯一已知的方法。Facet 过滤器目前不适用于此功能（除非他们更新和改进了 Elasticsearch 来做到这一点）。

# asp.net - 如何将过滤后的列表传递到操作参数 ASP.NET MVC

> ID：12285372
> 
> 赞同：0
> 
> 时间：2012-09-05T15:57:11.247
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

嗨，我有一个包含两列的 WebGrid：

> 1-Name
> 2-Action 绑定到另一个控制器动作。单击时，我将重定向到该操作，参数应该是`List<Test>` 项目列表。

输出：请求转到控制器，但参数为空集合，我是否遗漏了什么。

看法：

```
@model IEnumerable<Test>
<div id="testGrid">
    @{
        var grid = new WebGrid(ajaxUpdateContainerId: "testGrid", canSort: true);
        grid.Bind(Model);   
        @MvcHtmlString.Create(
            @grid.GetHtml(
                columns: grid.Columns
                    (
                        grid.Column(Html.DisplayNameFor(model => model.Name).ToHtmlString(),
                        header: Html.DisplayNameFor(model => model.Name).ToHtmlString()),
                        grid.Column("Action", header: "Action", format: @<a href="@Url.Action("LoadTest", "NewController", 
                        new
                        {
                            ingredients = Model.Select(t=>t.Id==@item.Id).ToList()
                        }
                        )" class="edit-btn"></a>)  
                    )
                ).ToString()
             )
    }
</div> 
```

控制器代码

列表为空。

```
public ActionResult LoadTest(List<Test> testItems)
        {
            //...test code.
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:16:01.663

您的 Url.Action 正在创建与控制器期望的变量不同的变量：

将您的操作从成分更改为 testItems：

```
 grid.Column("Action", header: "Action", format: @<a href="@Url.Action("LoadTest", "NewController", 
                        new
                        {
                            testItems = Model.Select(t=>t.Id==@item.Id).ToList()
                        } 
```

或更改您的控制器以期望一个称为成分的参数：

```
public ActionResult LoadTest(List<Test> ingredients )
        {
            //...test code.
        } 
```

另外，您是否更新了 Global.asax 以期待这种类型的路线？此示例假设您将名称保留`testItems`为参数。

```
 routes.MapRoute(
         "Test route", // Route name
         "NewController/{action}/{testItems}", // URL with parameters
         new { controller = "NewController", action = "LoadTest" } // Parameter defaults
     ); 
```

# c++ - C++ Win32 错误

> ID：12285375
> 
> 赞同：-8
> 
> 时间：2012-09-05T15:57:19.843
> 
> 标签：c++, winapi

我为 Win32 做了一个类，但我不知道为什么会发生这个错误。

这是代码：

主文件

```
using namespace std;
#include "WindowManager.h"

#define   WIDTH     700
#define   HEIGHT    500
#define   VERSION   0.1

int WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPreviousInstance,LPSTR lpcmdline,int nCmdShow)
{
    WindowManager window("TalkToMe", 100, 100, WIDTH, HEIGHT);

    while(window.isWindowOpen())
    {
        window.PekMessage();
    }

    return 0;
} 
```

窗口管理器.h

```
#pragma once

#include <Windows.h>

class WindowManager
{
private:
    MSG msg;
    HWND window;

    int stat;
public:
    WindowManager(LPCTSTR title,int x, int y, int width, int height);
    ~WindowManager();
    LRESULT CALLBACK WindowProcedure(HWND winhan,UINT uint_Message,WPARAM parameter1,LPARAM parameter2);

    inline bool isWindowOpen()   { return stat != -1; }
    int  getStat()               { return stat; }
    void PekMessage();
}; 
```

窗口管理器.cpp

```
#include "WindowManager.h"

void WindowManager::PekMessage()
{
    if(PeekMessage(&msg, window, 0, 0, PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}

LRESULT CALLBACK WindowManager::WindowProcedure(HWND winhan,UINT uint_Message,WPARAM parameter1,LPARAM parameter2)
{
    switch(uint_Message)
    {
        case 16: // exit button
            stat = -1;
        break;
    }

    return DefWindowProc(winhan,uint_Message,parameter1,parameter2);
}

WindowManager::WindowManager(LPCTSTR title,int x, int y, int width, int height)
{
    stat = 0;

    WNDCLASSEX wnd;
    wnd.cbSize = sizeof(wnd);
    wnd.style  = CS_HREDRAW | CS_VREDRAW;
    wnd.lpfnWndProc = WindowProcedure;
    wnd.cbClsExtra  = 0;
    wnd.cbWndExtra  = 0;
    wnd.hInstance   = GetModuleHandle(NULL);
    wnd.hIcon       = NULL;
    wnd.hCursor     = LoadCursor(NULL,IDC_ARROW);
    wnd.hbrBackground = GetSysColorBrush(NULL);
    wnd.lpszClassName = "TalkToMe";
    wnd.lpszMenuName  = NULL;
    wnd.hIconSm = LoadIcon(NULL, IDI_APPLICATION);

    RegisterClassEx(&wnd);

    window = CreateWindowEx(WS_EX_CONTROLPARENT, wnd.lpszClassName, title, 
        WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX | WS_VISIBLE, x, y, width, height,NULL, NULL, 
        GetModuleHandle(NULL), NULL);
}

WindowManager::~WindowManager()
{
    DestroyWindow(window);
} 
```

这是奇怪的构建失败：

```
1>------ Build started: Project: Client, Configuration: Debug Win32 ------
1>  WindowManager.cpp
1>c:\users\user\documents\visual studio 2012\projects\talktome\talktome\windowmanager.cpp(31): error C3867: 'WindowManager::WindowProcedure': function call missing argument list; use '&WindowManager::WindowProcedure' to create a pointer to member
1>c:\users\user\documents\visual studio 2012\projects\talktome\talktome\windowmanager.cpp(31): error C2440: '=' : cannot convert from 'LRESULT (__stdcall WindowManager::* )(HWND,UINT,WPARAM,LPARAM)' to 'WNDPROC'
1>          There is no context in which this conversion is possible
1>  Generating Code...
1> Compiling...
1>  Main.cpp
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:59:20.177

这是可以预料的。`WindowManager::WindowManager`有一个隐藏的`this`参数，因此它不遵守`wnd.lpfnWndProc`.

要解决此问题，您需要定义一个辅助函数，如下所示：

```
LRESULT CALLBACK HelperWindowProcedure(HWND winhan,UINT uint_Message,WPARAM parameter1,LPARAM parameter2)
{
    if (uint_Message == WM_CREATE)
    {
       /* Retrieve "this" sent through CreateWindowEx */
       WindowManager *wm = (WindowManager *)(((LPCREATESTRUCT) lParam)->lpCreateParams);
       /* And store it as window-private date */
       SetWindowLongPtr(winhan, GWLP_USERDATA, wm);
    }

    /* Retrieve WindowManager from window-private data */
    WindowManager *wm = (WindowManager *)GetWindowLongPtr(winhan, GWLP_USERDATA);
    /* Forward window message to WindowManager */
    wm->WindowProcedure(winhan, uint_Message, parameter1, parameter2);
}

WindowManager::WindowManager()
{
    ...
    /* use helper window procedure */
    wnd.lpfnWndProc = HelperWindowProcedure;
    ...
    /* send "this" through WM_CREATE */
    window = CreateWindowEx(WS_EX_CONTROLPARENT, wnd.lpszClassName, title, 
       WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX | WS_VISIBLE, x, y, width, height,NULL, NULL, 
       GetModuleHandle(NULL), this);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:08:58.623

正如 user1202136 所提到的，C++ 类方法具有隐式参数，无论何时调用它都会传递给函数。它保存指向类实例（`this`指针）的指针，并允许您访问类变量。为了解决这个问题，您可以将`WindowProcedure`方法设为静态并`GWL_USERDATA`在窗口内存中使用来存储您的类实例（`this`指针）。查找`GetWindowLongPtr`更多信息。创建窗口时，您需要`this`通过参数传递指针，并在处理消息时`lpParam`使用它来存储它。`SetWindowLongPtr``WM_CREATE`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-05T16:05:46.950

检查解决方案：

```
wnd.lpfnWndProc = (WNDPROC)WindowProcedure; 
```

或者

```
LRESULT WNDPROC WindowManager::WindowProcedure(HWND winhan,UINT uint_Message,WPARAM parameter1,LPARAM parameter2) 
```

# caching - 为什么用 @webapp2.cached_property 装饰 Jinja2 实例

> ID：12285376
> 
> 赞同：6
> 
> 时间：2012-09-05T15:57:21.223
> 
> 标签：caching, properties, jinja2, webapp2

webapp2 网站（[http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html](http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html)）有使用教程`webapp2_extras.jinja2`，代码如下。

我的问题是：为什么缓存`webapp2_extras.jinja2.Jinja2`实例返回`return jinja2.get_jinja2(app=self.app)`？我查看了 的代码，`@webapp2.cached_property`发现它把`Jinja2`实例缓存在了一个 的实例中`BaseHandler`，请求后会被销毁，为什么还要缓存呢？我在这里错过了什么吗？

```
导入 webapp2

从 webapp2_extras 导入 jinja2

类 BaseHandler（webapp2.RequestHandler）：

    @webapp2.cached_property
    def jinja2（自我）：
        # 返回缓存在应用注册表中的 Jinja2 渲染器。
        返回 jinja2.get_jinja2(app=self.app)

    def render_response(self, _template, **context):
        # 渲染一个模板并将结果写入响应。
        rv = self.jinja2.render_template(_template, **context)
        self.response.write(rv)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:03:02.683

[在这里](http://webapp2.readthedocs.io/en/latest/api/webapp2.html#webapp2.cached_property)您可以找到有关`cached_property`.

`BaseHandler`稍后将经常调用该课程。我的理解是，为了避免`jinja2.get_jinja2(app=self.app)`每次调用的开销，这种引用只在第一次被评估，然后在以后多次返回，即每次调用视图时。

要在代码中看到这种情况，请参阅[此](https://github.com/fRuiApps/cpfthw/blob/master/webapp2/views.py)示例，其中每个视图都派生自同一个`BaseHandler`类。

# cakephp - 如何让视图缓存在 PagesController 中以每个操作为基础工作

> ID：12285377
> 
> 赞同：2
> 
> 时间：2012-09-05T15:57:24.243
> 
> 标签：cakephp, caching, cakephp-2.0

我已经为我的 Cake 应用程序中的其他控制器/操作成功设置了视图缓存。但是 PagesController 似乎根本没有缓存任何东西。

在 PagesController.php 的顶部，我有：

```
var $cacheAction = array (
     'display/index/' => array('callbacks' => false, 'duration' => '+1 week'),
     'index' => array('callbacks' => false, 'duration' => '+1 week'),
     '/' => array('callbacks' => false, 'duration' => '+1 week'),

); 
```

但是，当我通过“/”或“/pages/index/”访问主页时——没有任何缓存。

PagesController 在视图缓存方面是否遵循与其他控制器不同的规则？我很茫然...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:51:20.983

虽然它会缓存 PagesController 中的所有内容，但这对我有用（放在`display()`方法之前）：

```
public $cacheAction = '1 week'; 
```

编辑：这在`display()`方法中使用时也有效：

```
$this->cacheAction = '1 week'; 
```

# c++ - 现代 C++ 版本的表达式树 https://gist.github.com/2934374

> ID：12285385
> 
> 赞同：0
> 
> 时间：2012-09-05T15:58:21.470
> 
> 标签：c++, c++11

[https://gist.github.com/2934374](https://gist.github.com/2934374)

所以我对这种比较以及评论中出现的糟糕的 C++ 解决方案很感兴趣，但我必须承认我自己很难写出一个好的解决方案 :-)

我目前的尝试是这样的，问题是：

*   创建树时复制环境，我希望创建树后变量可以更改
*   它看起来仍然很丑

那么我怎么能把它压扁一点并绑定变量，这样它们就会受到变化的影响呢？

```
#include <map>
#include <string>
#include <iostream>
#include <functional>
using namespace std;

/* environ */
map<string,int> variables = { { "a" , 3 }, { "b", 4 }, { "c", 5 } };

function<int(int,int)> add = [] (int lp, int rp) { return lp + rp; };
function<int(int,int)> mlt = [] (int lp, int rp) { return lp * rp; };

/* impl */
struct Var {
    Var(int v) : p_v(v) {};
    int eval() { return p_v; };

private:
    int p_v;
};

template <typename LP, typename RP>
struct Op {
    Op(function<int(int,int)> op, LP lp, RP rp) : p_op(op), p_l(lp), p_r(rp) {};
    int eval() { return p_op(p_l.eval(), p_r.eval()); }
private:
    function<int(int,int)> p_op;
    LP p_l;
    RP p_r;
};

Var var(int val) { return Var(val); }

template <typename LP, typename RP>
auto op(function<int(int,int)> op, LP lp, RP rp) -> Op<LP,RP>
{
    return Op<LP,RP>(op,lp,rp);
}

Var operator "" _var(const char *key, size_t length)
{ return Var(variables[key]); }

/* gcc is failing me
Var operator "" _num(int val)
{ return Var(val); }
*/

int main()
{
    auto tree = op ( add, "a"_var, op ( mlt, var ( 2 ), "b"_var ));
    cout << tree.eval() << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:22:36.827

您正在重新发明标准绑定机制。用户无需编写任何胶水代码。

```
auto tree = bind(plus<int>(), ref(variables["a"]), bind(multiplies<int>(), 2, ref(variables["b"])));
cout << tree(); 
```

[http://liveworkspace.org/code/f06fd83b5d7bcbf4829306d4e590da38](http://liveworkspace.org/code/f06fd83b5d7bcbf4829306d4e590da38)

`std::ref`使它成为一个*引用*，而不是一个值——这意味着你可以绑定一个变异操作。

# c - 有没有办法打印调用我的 C 二进制文件的进程的 PID

> ID：12285387
> 
> 赞同：4
> 
> 时间：2012-09-05T15:58:25.687
> 
> 标签：c, bash, unix, gcc, solaris

我需要知道哪个 perl 脚本正在使用我的 C CLI。

使用 bash，我可以使用以下命令轻松打印“谁”运行脚本：

```
CALLER=$(ps ax | grep "^ *$PPID" | awk '{print $NF}')
echo $CALLER 
```

到目前为止，我一直在使用它作为包装器，但这并不理想。有没有办法从 C 中获取这些信息？

（我正在运行带有 gcc 的 UNIX）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:01:21.347

您应该`getpid`从`getppid`.`<unistd.h>`

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>

int
main(void)
{
    printf("%ld%ld", (long)getpid(), (long)getppid());
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T16:00:36.207

使用`getppid`. 看`man 2 getppid`，[这里是](http://linux.die.net/man/2/getpid)linux 手册页。

> getppid() 返回调用进程的父进程ID

*两个*p，因为这是针对“父进程”的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T16:01:48.243

用于[`getppid()`](http://linux.die.net/man/2/getppid)获取进程父进程的进程 ID。

# mercurial - 合并 - 我可以更改被识别为相似的内容吗

> ID：12285390
> 
> 赞同：0
> 
> 时间：2012-09-05T15:58:39.000
> 
> 标签：mercurial, merge, meld, kdiff3

是否可以控制合并工具如何识别相似的代码块？特别是融合，但也欢迎任何替代工具的建议。如果它是相关的，我正在使用 mercurial。

我正在开发一个系统，该系统具有生成初始 get/set 函数的代码生成器，一个相当常见的情况是两个开发人员各自添加了一个字段，并且在库的末尾生成了新的 get/set 函数。在合并方面，不可避免地存在合并冲突。

我想要的是合并工具将这些识别为单独的函数，而不是同一函数的修改版本。

Meld 至少从一个足够漂亮的视图开始，显示了添加到每个版本的功能：

![初始合并状态](../Images/d8c377c9d956b1ad6d4776645816a159.png)

不幸的是，在我拉过第一个它之后，它现在认为这些功能已经在一个系统上进行了修改，而不是将它们视为两个独立的功能。这也是我最初在 KDiff3 中看到的相同合并结果：

![不是我想要的！](../Images/b286acf2a81e54a0e172e56128867b3e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:34:12.570

使用 KDiff3，您可以放置​​手动同步标记以强制它认为行是相等的。例如，请参阅[此答案和屏幕截图。](https://stackoverflow.com/a/5117210/23118)

# spring - Spring“XStreamMarshaller”在解组时无法识别映射到 XML 的 Java 类

> ID：12285393
> 
> 赞同：1
> 
> 时间：2012-09-05T15:58:41.137
> 
> 标签：spring, spring-mvc, xstream

最近遇到了我与 Spring 一起使用的 XStream 的问题。我们有一个 REST 应用程序，我们在其中使用 XStream 编组和解组 XML。我们已经配置如下图，

```
<bean id="xStreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
     <property name="annotatedClasses">
     <list><value>com.bestbuy.commerce.repobjects.OfflineOrderRepresentation</value></list>
     </property>
  <property name="autodetectAnnotations" value="true" /> 
</bean> 
```

并且这个 XStreamMarshaller 被配置为 HttpMessageconverter，如图所示，

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
    <util:list>
            <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
                  <property name="marshaller" ref="xStreamMarshaller" />
                  <property name="unmarshaller" ref="xStreamMarshaller" />
                 </bean>
    </util:list>
     </property>
</bean> 
```

这里的问题是，当我发布正确的 XML 时，它应该与相应的 XStream 注释类“OfflineOrderRepresentation”匹配，但这是随机发生的，有时我收到语法不正确的消息，如果我重新启动服务器，问题会随机修复。

下面是我得到的错误日志，

```
[org.springframework.http.converter.xml.MarshallingHttpMessageConverter@712625b0]
   [org.springframework.web.bind.annotation.support.HandlerMethodInvoker] 
       Reading [com.bestbuy.commerce.repobjects.OfflineOrderRepresentation] 
             [org.springframework.http.converter.xml.MarshallingHttpMessageConverter@712625b0]
                [org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver] 
                          [com.bestbuy.commerce.controllers.OrderController@799a92d1]: 
                              org.springframework.http.converter.HttpMessageNotReadableException: Could not read [class com.bestbuy.commerce.repobjects.OfflineOrderRepresentation]; 
```

# ios - AudioFileReadBytes 来自内存块，而不是文件

> ID：12285394
> 
> 赞同：0
> 
> 时间：2012-09-05T15:58:47.850
> 
> 标签：ios, caf

我想缓存 CAF 文件，然后在播放时将它们转换为 PCM。

例如，

```
char *mybuffer = malloc(mysoundsize);
FILE *f = fopen("mysound.caf", "rb");
fread(mybuffer, mysoundsize, 1, f);
fclose(f);

char *pcmBuffer = malloc(pcmsoundsize);
// Convert to PCM for playing
AudioFileReadBytes(mybuffer, false, 0, mysoundsize, &numbytes, pcmBuffer); 
```

这样，每当播放声音时，压缩的 CAF 文件就已经加载到内存中，从而避免了磁盘访问。如何使用“AudioFileID”打开一块内存以使 AudioFileReadBytes 满意？我可以使用另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:39:38.503

我自己没有这样做，但是从文档中我认为您必须使用`AudioFileOpenWithCallbacks`和实现从内存缓冲区读取的回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-24T09:51:02.253

你可以用`AudioFileStreamOpen`

* * *

```
fileprivate var streamID: AudioFileStreamID?

public func parse(data: Data) throws {

        let streamID = self.streamID!
        let count = data.count
        _ = try data.withUnsafeBytes { (bytes: UnsafePointer<UInt8>) in
            let result = AudioFileStreamParseBytes(streamID, UInt32(count), bytes, [])
            guard result == noErr else {

                throw ParserError.failedToParseBytes(result)
            }
        }
    } 
```

您可以将数据存储在内存中`callback`

```
func ParserPacketCallback(_ context: UnsafeMutableRawPointer, _ byteCount: UInt32, _ packetCount: UInt32, _ data: UnsafeRawPointer, _ packetDescriptions: Optional<UnsafeMutablePointer<AudioStreamPacketDescription>>) {
    let parser = Unmanaged<Parser>.fromOpaque(context).takeUnretainedValue()

    /// At this point we should definitely have a data format
    guard let dataFormat = parser.dataFormatD else {
        return
    }

    let format = dataFormat.streamDescription.pointee
    let bytesPerPacket = Int(format.mBytesPerPacket)
    for i in 0 ..< Int(packetCount) {
        let packetStart = i * bytesPerPacket
        let packetSize = bytesPerPacket
        let packetData = Data(bytes: data.advanced(by: packetStart), count: packetSize)
        parser.packetsX.append(packetData)
    }

} 
```

[github repo](https://github.com/coyingcat/mPlayer)中的完整代码

# windows - System.BadImageFormatException：无法加载文件或程序集

> ID：12285400
> 
> 赞同：2
> 
> 时间：2012-09-05T15:59:20.003
> 
> 标签：windows

我使用 Visual Studio 2010 开发了一个 Windows 服务应用程序，以便集成两个应用程序。

在我的 WinService 中，我调用目标应用程序开发人员提供的一些 API DLL 文件，在从源应用程序获取信息后在目标应用程序中创建一些信息。

所以我的 Windows 服务就像一些中间件应用程序一样工作。

当我运行该服务时，我收到以下错误：

```
System.BadImageFormatException: Could not load file or assembly 'Interop.ErpBS800, Version=8.5.0.0, Culture=neutral, PublicKeyToken=e076e239d0e78a42' or one of its dependencies. An attempt was made to load a program with an incorrect format.
File name: 'Interop.ErpBS800, Version=8.5.0.0, Culture=neutral, PublicKeyToken=e076e239d0e78a42'
   at MaeilKitWintouch.Primavera.CreateDocument(Facturas fac)
   at MaeilKitWintouch.MaeilKitWintouch.ExecuteRequest()

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

在我的 Windows 7 x86 笔记本电脑中，一切正常，但在 Windows Small Business Server 2011 Essentials 64 位中，我收到了该错误。

我有平台目标 = 任何 CPU 和目标框架 = .NET 4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:07:16.467

您的应用程序可能在 64 位模式下运行（这是允许的，因为您将 Platform Target 设置为*Any CPU*）并尝试加载 32 位库。

博客文章*[Compiling .NET for a specific Target Platform (Any CPU vs x86 vs x64)](http://www.dottodotnet.com/2010/04/compiling-net-for-specific-target.html)*很好地总结了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T20:40:57.410

我对这个错误的解决方案有点不同，经过 4 天的“平台战争”，如果我更改为 x86/x64，我会遇到同样的错误......

我所做的是：

1.  从 Visual Studio 中卸载所有项目和对冲突 DLL 的引用（还用引用注释所有代码行），项目必须运行没有错误。
2.  在主应用程序中，转到属性 -> 编译 -> 高级编译选项 -> Tarjet CPU - 并在此处更改为 x86
3.  重新编译项目
4.  将项目/引用加载到 DLL
5.  测试是否工作正常
6.  取消注释所有代码行并重新编译

# c# - 将数据行从一个表复制到不同数据库c#中的另一个类似表

> ID：12285407
> 
> 赞同：1
> 
> 时间：2012-09-05T15:59:40.973
> 
> 标签：c#, sql-server-2008

我在 database1 中有 tableA，在 database2 中有 tableA，它们的列数和名称基本相同。但两者都有不同的数据。我正在尝试从 database1/tableA 中获取一行并将其插入 database2/tableA。

这就是我的想法：

```
SqlConnection conn = new SqlConnection("database1")
SqlCommand cmd = new SqlCommand("Select * from tableA where id = 1");
connection.Open()
SqlDataReader reader = cmd.ExecuteReader();

if(reader !=null )
var data = reader;

connection.Close(); 
```

然后我执行与上述相同的步骤打开一个新连接并尝试将数据变量值插入到 database2 中的 tableA 中。

这是正确的方法吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:06:45.407

我会使用数据库间查询来做到这一点。在 MSS 2005/2008 中，您可以将两个服务器“链接”在一起，只要它们可以互相看到。完成后，您可以通过以点表示法指定链接服务器名称、数据库、模式所有者和表来引用链接数据库的表。这将允许插入选择：

```
INSERT INTO TableA --in database1
{
   /*columns*/
}
SELECT /*columns*/ from remoteServer.database2.dbo.TableB
WHERE /*dupe-checking, other conditions*/ 
```

如果两个数据库在同一台服务器上，你甚至不必链接；只需在远程数据库上的表前面加上数据库名称和架构所有者（或者如果它是默认的“dbo”，请在数据库名称和表名之间使用两个点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:03:12.223

您可以改用此查询

```
INSERT INTO DATABASE2.dbo.TABLEA T1
SELECT * FROM DATABASE1.dbo.TABLEA T2
WHERE T2.ID = 1 
```

如果两个数据库位于同一服务器中，则以下 c# 代码应该可以工作。

```
SqlConnection conn = new SqlConnection("Enter Connection String of DB, in which you insert the records.(in ur example it is,DATABASE2)");
            string cmdText=@"INSERT INTO DATABASE2.dbo.TABLEA T2
                             SELECT * FROM DATABASE1.dbo.TABLEA T1
                             WHERE T1.ID = 1";
            SqlCommand cmd = new SqlCommand(cmdText, conn);
            cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T06:27:56.223

```
 string connection_String = @""; //your connection string
        try
        {
            using (SqlConnection con = new SqlConnection(connection_String))
            {
                string sql = "INSERT INTO table_copy_to " +
                    "(column1, column2, column3 ... columnn) " +
                "SELECT column1, column2, column3 ... column FROM table_copy_from";
                con.Open();
                using (SqlCommand cmd = new SqlCommand(sql, con))
                {
                    int rowEffected = cmd.ExecuteNonQuery();
                    if (rowEffected > 0)
                    {
                        Console.WriteLine("Excuted Successfully ...");
                    }
                    else
                    {
                        Console.WriteLine("Some problem occur");
                    }
                } 
            }
        }

        catch (Exception ex)
        {
            Console.WriteLine("Exception : " + ex);
        } 
```

# android - 在另一个片段中时如何获取从片段列表中选择的列表项

> ID：12285408
> 
> 赞同：0
> 
> 时间：2012-09-05T15:59:46.197
> 
> 标签：android, fragment

假设我有一个带有 6 个选项的 FragmentList，单击它会将我带到另一个 List Fragment。我如何才能在新片段的 6 列表中选择项目？我必须对这个类（ItemRolesList）做些什么才能让我能够在另一个类中选择项目，例如这个类（Item1List类）下面的一个。请张贴代码。此链接不是很有帮助，因为当我尝试执行它所说的操作时，我不明白发生了什么导致我的应用程序崩溃：http: [//developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

```
public class ItemRolesList extends ListFragment{
ArrayList<String> itemRoles;
TestAdapter mDbHelper;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    mDbHelper = new TestAdapter(getActivity()); 
    mDbHelper.createDatabase();
    mDbHelper.open();

    //////Get what we need from the database/////////
    itemRoles = mDbHelper.getTableColumn("role", new String[] {"name"});  
    /////////////////////////////////////////////////

    //Now close the database.
    mDbHelper.close();        

    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, itemRoles));

    ///////////////////////////////////////////////////////////
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String libraryList;

    //Get the position the user clicked.
    Fragment newFragment = null;

    libraryList = l.getItemAtPosition(position).toString();

    if(libraryList.equals("Item1")){
        newFragment = new Item1List();

    }else if (libraryList.equals("Item2")){
        newFragment = new Item2List();

    }else if (libraryList.equals("Item3")){
        newFragment = new Item3List();

    }else if (libraryList.equals("Item4")){
        newFragment = new Item4List();

    }else if (libraryList.equals("Item5")){
        newFragment = new Item5List();

    }else if (libraryList.equals("All Items")){
        newFragment = new AllItemsList();

    }

    FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(R.id.tab2, newFragment);
    transaction.addToBackStack(null);
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    transaction.commit();
}
    } 
```

如果他们要单击其中一个选项，这是其中一个类。我必须在这个类中做什么才能获得在上一个 ListFragment 类中选择的项目？

```
public class Item1List extends ListFragment{

ArrayList<String> specificItemType;
TestAdapter mDbHelper;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    mDbHelper = new TestAdapter(getActivity());     
    mDbHelper.createDatabase();
    mDbHelper.open();

    specificItemType = mDbHelper.getMultiTableData("item.[name]", "item", "item_role", "item.[id]", "item_role.[item_id]", "role_id = 4");

    //Close the database.
    mDbHelper.close();

    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, specificItemType));

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:14:53.160

您必须使用活动将数据从一个片段传递到另一个片段。您可以在一个片段中使用 getActivity() 来获取活动，然后到达另一个片段。

你可以检查这个答案：

[在片段及其容器活动之间传递数据](https://stackoverflow.com/questions/9343241/passing-data-between-a-fragment-and-its-container-activity)

# wordpress - wordpress 元框中标题上的 strpos() 无法找到“-”

> ID：12285409
> 
> 赞同：1
> 
> 时间：2012-09-05T16:00:00.770
> 
> 标签：wordpress, title, strpos, meta-boxes

我正在为 wordpress 编写一个简单的元框，并且在保存数据时遇到了一个小问题。

元框在我的“创建文章”页面中有两个文本字段。保存帖子时，这些将保存为 post-meta。

在保存时，我检查字段是否已填写 - 如果它们为空，我将获取帖子标题并提取我需要的数据。这个想法是采用第一个“-”之前的所有内容。如果没有减号，则整个标题应保存在我的自定义字段中。现在，这无法在标题中找到“-”（尽管有一个）并且每次都返回整个标题：

```
function get_from_title($title) {
  $pos = strpos($title, '-');

  if ($pos) {
    return trim(substr($title, $pos));
  }
  else {
    $pos = strpos($title, '–'); //added this since two different signs could be used

    if ($pos) {
      return trim(substr($title, $pos));
    }
    else {
      return $title;
    }
  }
} 
```

调用 get_from_title 的函数通过 get_the_title( $post_id ) 获取标题，这可以正常工作。

wordpress 是否以某种方式对标题进行了编码？为什么 strpos 找不到减号？我应该寻找什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:10:31.913

我回复了您在 WordPress 论坛中就该主题开始的主题。[你可以在那里](http://wordpress.org/support/topic/custom-metabox-strpos-not-finding-the-character-in-the-post-title?replies=2)找到你的答案。

或者，这就是我所说的。:)

> 是啊。这是一个棘手的问题。那么，当我们清楚地看到一个连字符时，为什么 strpos 不能在标题中找到一个连字符呢？因为一个都没有。呵呵。
> 
> WordPress 在这里所做的是将连字符（减号）转换为破折号。
> 
> 这会给你一个深蹲： `$pos = strpos( $title, '-' );`
> 
> 你要这个： `$pos = strpos( $title, '&#8211;' );`

让我知道你的结果如何。:)

# iphone - UIActionsheet showinview 没有从底部动画

> ID：12285410
> 
> 赞同：0
> 
> 时间：2012-09-05T16:00:01.823
> 
> 标签：iphone, ios4

嗨，我正在我的应用程序中做一个自定义操作表，我注意到一个小问题。

解雇是可以的，但在执行 [actionSheet showInView:self.view] 时，

动作表动画不是从最底部开始的。

它出现在距离底部 200 像素的地方，然后一直向上滚动。

这是一个已知的问题？我将在下面粘贴我的代码。

在进行解雇时，它从顶部到底部的动画非常流畅。

提前感谢您的帮助！

```
 actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

    CGRect pickerFrame = CGRectMake(0, 40, 0, 0);
    datePickerView = [[UIDatePicker alloc] initWithFrame:pickerFrame];

    [actionSheet addSubview:datePickerView];

    [actionSheet showInView:self.view];
    [actionSheet setBounds:CGRectMake(0, 0, 320, 480)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T11:47:33.453

这是工作正常的代码。：

```
 UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    actionSheet.backgroundColor = [UIColor clearColor];
    UIImageView *background = [[UIImageView alloc] init];
    [background setBackgroundColor:[UIColor whiteColor]];
    [background setFrame:CGRectMake(0,0, 345, 250)];
    background.contentMode = UIViewContentModeScaleToFill;
    [actionSheet addSubview:background];

    UIButton *cancelButton = [UIButton buttonWithType: UIButtonTypeCustom];
    cancelButton.frame = CGRectMake(5, 160, 320, 100);

    [cancelButton addTarget:self action:@selector(cancelButtonClicked:)forControlEvents:UIControlEventTouchUpInside];
    cancelButton.adjustsImageWhenHighlighted = YES;
    [cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
    [cancelButton setTitleColor:[UIColor colorWithRed:21/255.0f green:117/255.0f blue:222/255.0f alpha:1.0f] forState:UIControlStateNormal];
    cancelButton.titleLabel.textAlignment = NSTextAlignmentCenter;

    cancelButton.titleLabel.font = [UIFont fontWithName: @"Helvetica Neue" size: 22];

    [actionSheet addSubview: cancelButton];

    UIButton *airdropButton = [UIButton buttonWithType: UIButtonTypeCustom];
    airdropButton.frame = CGRectMake(0,3, 100,80);
    [airdropButton setImage:[UIImage imageNamed:@"airdrop.png"] forState:UIControlStateNormal];

    airdropButton.adjustsImageWhenHighlighted = YES;
    UILabel *line=[[UILabel alloc]initWithFrame:CGRectMake(0,90,345,1)];
    [line setBackgroundColor:[UIColor grayColor]];

    UIButton *messageButton = [UIButton buttonWithType: UIButtonTypeCustom];
    messageButton.frame = CGRectMake(10,95,80,80);
    [messageButton setImage:[UIImage imageNamed:@"message.png"] forState:UIControlStateNormal];

    messageButton.adjustsImageWhenHighlighted = YES;

    UIButton *mailButton = [UIButton buttonWithType: UIButtonTypeCustom];
    mailButton.frame = CGRectMake(80,95,100,80);
    [mailButton setImage:[UIImage imageNamed:@"mail.png"] forState:UIControlStateNormal];
    mailButton.adjustsImageWhenHighlighted = YES;

    UIButton *twitterButton = [UIButton buttonWithType: UIButtonTypeCustom];
    twitterButton.frame = CGRectMake(160,95,80,80);
    [twitterButton setImage:[UIImage imageNamed:@"twitter.png"] forState:UIControlStateNormal];

    twitterButton.adjustsImageWhenHighlighted = YES;

    UIButton *facebookButton = [UIButton buttonWithType: UIButtonTypeCustom];
    facebookButton.frame = CGRectMake(230,95,80,80);
    [facebookButton setImage:[UIImage imageNamed:@"facebook.png"] forState:UIControlStateNormal];

    facebookButton.adjustsImageWhenHighlighted = YES;

    [actionSheet addSubview: airdropButton];
    [actionSheet addSubview:line];
    [actionSheet addSubview:messageButton];
    [actionSheet addSubview:mailButton];
    [actionSheet addSubview:facebookButton];
    [actionSheet addSubview:twitterButton];

    [actionSheet showInView:myProfileTable];
    [actionSheet setFrame:CGRectMake(0,340,345,250)]; 
```

看看这个，如果你有任何问题告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:59:11.280

删除这一行：

[actionSheet setBounds:CGRectMake(0, 0, 320, 480)];

# java - java中的运行时与编译时内存分配

> ID：12285412
> 
> 赞同：4
> 
> 时间：2012-09-05T16:00:09.863
> 
> 标签：java, allocation

我对java中的内存分配是在运行时还是编译时发生感到困惑。

例如：

```
class Test{
  int a;
  public Test(){
    a=10;
  }
};

// somewhere else
Test t = new Test(); 
```

是`a`在运行时分配还是在编译时分配？如果在编译时，如何在直接获取已编译 .class 文件的 VM 上运行 java？

还：

*   什么时候`a`赋值`10`？

*   它如何用于参考变量`t`？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T16:00:37.787

编译时没有内存分配发生。仅在加载和运行时。

编译时生成 .class 文件就是这样。

请记住，您需要有一个主类来运行程序。当您使用带有 .class 文件的类路径的 Java 运行程序时，将执行诸如加载和链接等步骤，

类加载器将文件加载到 permgen。

当 main 方法被调用时，会创建栈并放置局部变量

当运行时遇到**new**时，它会在堆上创建对象并在那里分配所需的内存，就像测试所需的内存一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T16:03:06.337

局部变量和方法参数（如原语或引用）在编译时理论上在堆栈上分配了一个位置。

在运行时，这不能保证反映它在内存中的布局方式。

堆上的对象分配只发生在运行时。

> java怎么可能在直接编译.class文件的VM上运行。

只有 VM 知道如何编译代码，因此无法在编译时进行内存分配。

> 什么时候赋值 10

在分配发生的行。鉴于它没有被使用，JIT 可以丢弃它，因此它可能根本不会发生。

> 同样的问题也代表参考变量 t。

`t``=`在构造对象之后分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T11:51:11.880

在java中，除非创建在运行时创建的对象，否则不会加载类，因此在加载类时，您的任何成员变量（如“a”）将获得空间对于对象而言，它将在运行时分配空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T17:58:04.970

好吧，这个有点笨拙，我不确定您是否会从整个线程中得到您想要的确切答案，因为实际上，您要问的是编译器的内部结构，大多数人真的不在乎。

在大多数情况下，Java 编译器使用自动内存管理，因此真正由编译器决定它将做什么或不做什么，并且这可以在版本之间改变。

但在我开始解释之前，我想澄清一下我的符号：

1.  当引用不是原始的 Java 对象时，我将使用 [Object]。
2.  当引用内存中具有值和标识符的位置时，我将使用 [object]。
3.  我将使用 [primitive] 来指代由 Java 中的一种基本类型（int、double、float 等，不包括字符串）组成的 [object]
4.  字符串是java中的一种特殊情况，虽然它是一个对象，但它的处理方式可能与其他对象不同。

    [object] 有一个特殊的属性。它有一个值和一个标识符，标识符被解析为一个值的过程以及它发生的时间取决于绑定的类型。

    有静态绑定，其中绑定可以在编译时解析，其值或方法在编译时是已知的。这也称为“早期”绑定。例如。

    整数a = 0；// AND //直接函数调用，例如 print();

    还有动态绑定，其中标识符与值或子程序与程序之间的绑定直到运行时才会发生。这也称为“后期”绑定。例如。

    public void foo(java.util.List list) { list.add("bar"); }

    还有一种混合类型的绑定，但我不打算谈论它，因为我还没有发现 Java 拥有它。

    现在，绑定也与作用域密切相关，作用域是变量“存在”在特定作用域中的想法。这是我真的不想讨论的话题（范围界定有点像熊）并使这篇文章成为小说而不是中篇小说。

    Java 中内存分配的工作方式取决于以下几点：

    1.  如果在编译时已知对 [Object]、[object] 或 [primitive] 的引用，并且是否可能发生静态绑定，则编译器可能会为这些对象分配内存（请注意我没有t 使用括号）在编译时。

    2.  如果在编译时无法知道对 [Object]、[object] 或 [primitive] 的引用，并且必须使用动态绑定，那么编译器可能会在运行时为这些对象分配内存。

    Java 对待在运行时分配的对象的方式有所不同，这取决于哪个绑定用于什么类型。

    1.  静态绑定
        *   作为一种 [Object] 的对象将在编译时将其引用放置在堆栈上，但在运行时将其内存分配在堆上。（懒惰的）。
        *   作为一种 [primitive] 的对象将在运行时绑定和分配。
        *   字符串是一种特殊情况，但通常像 [Object] 的情况一样处理
    2.  后期装订
        *   堆栈和堆上的分配在运行时完成。

    总而言之，不用担心。这样做让你很头疼。

    如果我对此有任何误解，请有人告诉我。我有点生疏了。

# iphone - 如何在iOS中的大按钮内绘制小按钮

> ID：12285423
> 
> 赞同：2
> 
> 时间：2012-09-05T16:00:37.810
> 
> 标签：iphone, ios, uibutton, uikeyboard

我已经做了一个按钮。当我点击它时，它变大了，但字母不在好位置。我想在大按钮内放另一个按钮。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:10:11.570

如果您只想添加第二个按钮作为第一个按钮的子视图，您可以使用：

```
UIButton *mySmallButton = [[UIButton alloc] initWithFrame:CGRectMake:(0, 0, 50, 50)];
[mySmallButton setBackgroundColor:[UIColor redColor]];
[myBigButton addSubview:mySmallButton]; 
```

但是，如果您只是想修改第一个按钮的文本大小/对齐方式，则可以使用这些：

```
[[myBigButton titleLabel] setTextAlignment:UITextAlignmentCenter];
[[myBigButton titleLabel] setFont:[UIFont systemFontOfSize:24]]; 
```

# asp.net - ASP.NET MVC 3 上传文件最大大小

> ID：12285432
> 
> 赞同：0
> 
> 时间：2012-09-05T16:01:14.217
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-web-api, wcf-web-api

我正在尝试使用 ASP.NET Web API 控制器上传大文件

1.  我可以上传到 2 GB。
2.  但是超过 2 GB 我无法上传。
3.  这是[Web API](https://en.wikipedia.org/wiki/ASP.NET_MVC_Framework#Apache_License_2.0_release)控制器和 ASP.NET 的限制吗？
4.  我应该进行任何配置更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:37:58.790

看起来它已从 .NET 4.5 开始投票并完成，请参阅*[ASP.NET 中的最大上传大小为 2 GB。增加它](http://aspnet.uservoice.com/forums/41199-general/suggestions/2642879-maximum-upload-size-in-asp-net-is-2gb-increase-it?tracking_code=5805b1d13655be23d0395513447ba9f7)*。但是，它需要在 IIS 8.0 中解决，请参阅*[请分享如何使用 ASP.NET 4.5 在 IIS 8.0 上上传大于 2 GB（不拆分）的文件？](http://aspnet.uservoice.com/forums/41199-general-asp-net/suggestions/3122276-please-share-how-to-upload-files-larger-then-2gb-)*.

否则，您可能需要查看第三方（付费、开源）解决方案，以获得更优雅的分块上传大文件的方法（带有进度条指示器等）。

# haskell - 在haskell中计时命令执行

> ID：12285435
> 
> 赞同：1
> 
> 时间：2012-09-05T16:01:25.463
> 
> 标签：haskell, io, timing

我有一段看起来像这样的代码：

```
start <- getCPUTime
(_, _, _, ph) <- createProcess (shell shellCmd) 
end <- (waitForProcess ph >> getCPUTime)
print start
print end 
```

如您所见，代码应该在执行之前和之后运行命令`shellCmd`并打印`getCPUTime`值。但是，它工作不正确：时间差始终为零或`15625000000`（0.015 秒）。据我了解，原因是懒惰，但不知道如何解决。我在 Internet 上找到了一些示例（其中一个在上面），但没有一个对我有用。

这样做的正确方法是什么，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:05:48.417

我的第一个想法是你的 shell 命令真的很快——甚至可能是无效的。然后我阅读了以下文档`getCPUTime`：

```
Computation getCPUTime returns the number of picoseconds
CPU time used by the current program 
```

因此，您分叉的进程不会计入您的 CPU 时间。`getCurrentTime`也许你想通过from挂钟时间`Data.Time`？

# jquery - 如何让按钮可以点击一次？

> ID：12285437
> 
> 赞同：3
> 
> 时间：2012-09-05T16:01:28.590
> 
> 标签：jquery

> **可能重复：**
> [单击事件触发后，如何删除事件处理程序？](https://stackoverflow.com/questions/740794/how-can-i-remove-the-event-handler-once-the-click-event-has-fired)

我正在尝试使用 live 将点击事件分配给按钮，并希望用户只能触发一次。有什么办法吗？

```
//I only want the alert show once and disable the click event... 
$('#testBtn').live('click', function(){
    alert('hey ya');
}) 
```

**请注意：**按钮是动态创建的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:03:53.987

您也可以使用`one()`委托处理程序（在 jQuery 1.7+ 中）并将已弃用的`live()`函数替换为以下内容：

```
$(document).one('click', '#testBtn', function(){
    alert('hey ya');
}); 
```

替换`document`为最近的非动态父级。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T16:02:45.207

您可以使用[`one`](http://api.jquery.com/one/)功能：

```
$('#testBtn').one('click', function(){
    alert('hey ya');
}) 
```

演示：http: [//jsfiddle.net/SEjYK/](http://jsfiddle.net/SEjYK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:02:48.680

使用`one()`：

```
$('#testBtn').one('click', function(){
    alert('hey ya');
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:03:25.837

```
$('#testBtn').one('click', function() {
    alert('hey ya');
}); 
```

希望这可以帮助！

编辑：如果您绝对想使用“现场”：

```
$('#testBtn').live('click', function() {
    $(this).die('click');
    alert('hey ya');
}); 
```

如果您想使用“一个”，只需在生成动态对象并将其附加到文档后运行第一个代码片段。

如果您使用的是“live”类型的方法，但我建议使用“on”，因为 live 已被弃用：

```
$(document).on('click', '#testBtn', function() {
    $(this).die('click');
    alert('hey ya');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T16:16:24.380

你可以这样做，这可能是运行速度最快的..去 jsperf.com 检查

```
$('#testBtn').bind('click', function() {
       $(this).unbind('click');
       alert('Clicked and unbound!');
});​ 
```

[http://jsfiddle.net/usZSU/](http://jsfiddle.net/usZSU/)

编辑：我认为这是运行最快的添加 3 个测试用例 - [http://jsperf.com/one-event](http://jsperf.com/one-event) 运行 2-3 次以获得最佳结果.. 每次我运行它时，绑定速度最快，一个慢 3% .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T16:19:47.280

此页面上已经有更明智的答案，但是如果您坚持使用`.live()`而不是`one()`那么这将满足您的要求...

```
//I only want the alert show once and disable the click event... 
$('#testBtn').live('click', function(){
    $(this).die('click');
    alert('hey ya');
}); 
```

`.die('click')`将删除单击事件处理程序，因此它不会再次触发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T16:47:55.713

最好的选择是使用 .one 而不是 live 作为按钮。这更有意义.. 如果您不想使用它，那么您可以在页面中使用 Hiddenfield，并在触发点击事件时设置标志值..

下次单击按钮时检查标志值，如果它已经执行过一次，则不要运行其中的代码..

检查这个例子 [http://jsfiddle.net/sushanth009/Fakb5/](http://jsfiddle.net/sushanth009/Fakb5/)

另请注意 .live 在当前的 jQuery 版本中已被弃用。最好使用 .on() 代替

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-05T16:03:36.397

您可以使用 unbind 删除所有点击事件：

```
 $('#testBtn').unbind('click');
 $('#testBtn').unbind('live'); 
```

# json - 从托管 bean 调用 Servlet doPost 方法

> ID：12285442
> 
> 赞同：0
> 
> 时间：2012-09-05T16:01:42.780
> 
> 标签：json, jsf, servlets, primefaces, atmosphere

我有一个 servlet 方法，我需要在其中传递一个 json 对象。此 json 对象将在托管 bean (JSF) 之一中创建。我只是尝试将 bean 注入 servlet 以获取 json 对象，但我得到运行时异常，可能是不可能的。所以我想从 JSF bean 调用 servlet。任何想法如何从bean调用？

## 小服务程序

```
private static final long serialVersionUID = 1L;
TopicController topicController;
TopicBean topicBean;
List<JsonTopicObj> jsonTopicList;
public void doGet(HttpServletRequest req, HttpServletResponse res)
        throws IOException {

    // here code for subscription

    Meteor mateor = Meteor.build(req).addListener(
            new MyAtmosphereResourceEventListener());

    boolean isLongPolling = true;
    if (mateor.transport() == LONG_POLLING) {
        isLongPolling = true;
    } else {
        isLongPolling = false;
    }
    System.out.println(" Now in the Get method of Atmosphere");
    // create the broadcaster for the particular topic
    String topicId = "default"; // for all users right now
    Broadcaster broadcaster = BroadcasterFactory.getDefault().lookup(
            topicId, true);
    //set that broeadcaster
        mateor.setBroadcaster(broadcaster);
        mateor = mateor.resumeOnBroadcast(isLongPolling);
        mateor.suspend(-1);

}

    public void doPost(HttpServletRequest req, HttpServletResponse res)
            throws IOException {} 
```

## JSF 豆

```
@ManagedBean(name = "testController")
@RequestScoped
public void listAllTopics() {
        JsonTopicObj jsonTopicObj;
        StringWriter out = new StringWriter();
        JsonFactory jfactory = new JsonFactory();
        ObjectMapper mapper = new ObjectMapper();
        jsonTopicList = new ArrayList<JsonTopicObj>();

        for (int i = 0; i < topicBean.getTopicVOArray().length; i++) {
            jsonTopicObj = new JsonTopicObj();
                   ......................

                         }
                   mapper.writeValue(out, jsonTopicList); 
```

现在我需要调用 servlet dopost 方法并发送“out.toString()”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:51:20.240

您的第一个控件在哪里？它是否先到托管 bean，然后是 servlet，这个 bean 负责转发到 servlet？如果是这样，您可以创建 JSON 对象，从 FacesContext 获取您的请求和响应并将请求分派给 servlet。

FacesContext 给出您的请求和响应，然后您可以发送您的请求。

# php - 使用 cURL 脚本 (php) 复制 img 时出错

> ID：12285443
> 
> 赞同：2
> 
> 时间：2012-09-05T16:01:44.117
> 
> 标签：php, parsing, curl, web-crawler, userscripts

我制作了一个不错的简单用户脚本：
当我浏览网页时，我可以在 1 次单击
我的用户脚本 中为任何图像“添加书签”

1.  获取img src
2.  抓取网页的url
3.  将 .jpg .png .gif 复制到我的服务器

一切正常，但在某些情况下，脚本无法复制文件...
实际上文件已创建但不包含 img 数据，它仅包含错误网页的内容：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /data/x/xxx_xxx_x.jpg on this server.</p>
<p>Additionally, a 403 Forbidden
error was encountered while trying to use an ErrorDocument to handle the request.</p>
<hr>
<address>Apache Server at xxxxxxxx.net Port 80</address>
</body></html> 
```

“复制”代码（php）：

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $urlimg); 
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
set_time_limit(300); # 5 minutes for PHP 
curl_setopt($ch, CURLOPT_TIMEOUT, 300); # and also for CURL 
$path = $dirpix.'/'.$aa.'/'.$mm;
if ( ! is_dir($path)) {
    mkdir($path);
}
$outfile = fopen($path.'/'.$id.'.'.$ext, 'wb'); 
curl_setopt($ch, CURLOPT_FILE, $outfile); 
curl_exec($ch); 
fclose($outfile); 
curl_close($ch); 
```

也许该网站阻止了那种“复制”脚本？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:45:22.213

我能想到的2件事是，

1.  为您的 curl 请求设置用户代理。因为从你所说的来看，你可以查看图像但是 curl 得到 403 错误，很可能是服务器端的 userAgent 过滤。

2.  将引用者添加到您的 curl 请求。您可以将引用信息从您的用户脚本发送到 php 脚本。您必须发布或获取`window.location.href`' 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:34:16.493

对于正确的工作添加

```
$agent= 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11';

curl_setopt($ch, CURLOPT_USERAGENT, $agent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T19:42:18.587

试试下面的代码，它在我的服务器上运行良好。它是经过测试的代码：-

```
<?php

$img[]='http://i.indiafm.com/stills/celebrities/sada/thumb1.jpg';
$img[]='http://i.indiafm.com/stills/celebrities/sada/thumb5.jpg';

$path="images/";

foreach($img as $i){
    save_image($i, $path);
    if(getimagesize($path.basename($i))){
        echo '<h3 style="color: green;">Image ' . basename($i) . ' Downloaded OK</h3>';
    }else{
        echo '<h3 style="color: red;">Image ' . basename($i) . ' Download Failed</h3>';
    }
}

//Alternative Image Saving Using cURL seeing as allow_url_fopen is disabled - bummer
function save_image($img,$fullpath='basename'){
    if($fullpath!='basename'){
        $fullpath = $fullpath.basename($img);
    }
    $ch = curl_init ($img);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
    $rawdata=curl_exec($ch);
    curl_close ($ch);
    if(file_exists($fullpath)){
        unlink($fullpath);
    }
    $fp = fopen($fullpath,'x');
    fwrite($fp, $rawdata);
    fclose($fp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-27T13:30:40.810

我很难使用这种方法访问我的 DLink 相机。

但最后我发现了问题：身份验证。

不要忘记身份验证。

感谢所有贡献者，这是对我有用的解决方案。

```
 <?php

function download_image1($image_url, $image_file){
    $fp = fopen ($image_file, 'w+');              // open file handle

    $ch = curl_init($image_url);

$agent= 'Accept:image/jpeg,text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11';

curl_setopt($ch, CURLOPT_USERAGENT, $agent);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,true);
curl_setopt($ch, CURLOPT_TIMEOUT, 400);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
curl_setopt($ch, CURLOPT_REFERER, "http://google.com");
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); // Follows redirect responses.
curl_setopt($ch, CURLOPT_USERPWD, "user:password");

$raw=curl_exec($ch);
if ($raw === false) {
    trigger_error(curl_error($ch));
}

curl_close ($ch);
$localName = $image_file; // The file name of the source can be used locally       
if(file_exists($localName)){
    unlink($localName);
}

$fp = fopen($localName,'x'); 
fwrite($fp, $raw);
fclose($fp);

}

download_image1("http://url_here/image.jpg","/path/filename.jpg"); // to access DLink cameras
// be sure you have rights to the path
?> 
```

上面的代码可能有一些冗余，因为我打开 fopen 两次。老实说，我不会更正，因为它正在工作！

# javascript - jquery.grep 意外行为

> ID：12285446
> 
> 赞同：1
> 
> 时间：2012-09-05T16:02:14.333
> 
> 标签：javascript, jquery

我使用 jquery.grep 遇到了一个有趣的发现，想知道是否有人知道为什么会这样。在我的代码中，我使用 grep 从数组中过滤掉某些项目，然后将结果分配回原始数组以进行更多过滤。

例如

```
orderedGroups = jquery.grep(orderedGroups, function{}` ...) 
```

期望的结果是，其父 id 是数组中另一个项目的 id 的项目被过滤掉——只留下不匹配的（父）项目。

我发现这实际上创建了一个同名的单独对象。换句话说，执行 a `console.log(orderedGroups[1])`, 显示一个未显示在`console.log(orderedGroups)`

这是我的代码：

```
var a = ['a', '1', '0']; // represents [name, id, parent id]
var b = ['b', '2', '1'];
var c = ['c', '3', '0'];
var d = ['d', '4', '2'];
var e = ['e', '5', '0'];
var f = ['f', '6', '2'];

var groups = [a, b, c, d, e, f];

var orderedGroups = groups;
for (var i = 0; i < groups.length; i++) {
    for (var sg = 0; sg < groups.length; sg++) {
        if (groups[i][1] == groups[sg][2]) {
            orderedGroups = jQuery.grep(orderedGroups, function(value) {
                return value != groups[sg];
            });
        }
    }
}

console.log(orderedGroups)
console.log(orderedGroups[1])​ 
```

有没有人见过这个，如果有，你能解释为什么会这样吗？

谢谢

# javascript - 逐渐增长的 iframe onclick

> ID：12285450
> 
> 赞同：0
> 
> 时间：2012-09-05T16:02:19.230
> 
> 标签：javascript, iframe

我试图使 iframe 从链接（链接是中心点）逐渐增长。它将成为链接的大小，然后增长到 iframe 的大小。会有其他链接，因此它们将具有相同的效果。有任何想法吗？对不起，我是新手

```
<html>  
<head>
<link rel="stylesheet" href="Css/style.css" type="text/css" media="screen" />
<script language="JavaScript" type="text/javascript">
function makeFrame(src) {
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("onmouseout","closeFrame()")
ifrm.setAttribute("src","");
ifrm.style.display = "block";
ifrm.style.width = "640px";
ifrm.style.height = "400px";
ifrm.style.marginLeft = "325px";
ifrm.style.marginTop = "125px";
ifrm.style.position = "absolute";
ifrm.style.top="0px";
ifrm.style.color="red";
ifrm.style.zIndex= "101";
document.body.appendChild(ifrm);

}
function closeFrame(){
ifrm.style.display = "none";
}
</script>

</head>
<body>
<img src="" onclick=makeFrame() height="100px" width="100px" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:19:18.830

您可以创建另一个动画所需行为的函数，即为 iframe 的高度和宽度添加小增量的函数。

```
<script>
function grow () {
    ifrm = document.getElementById('amazingIFrame');
    if (ifrm.style.width < 500) {
        ifrm.style.width += 10;
    } else {
        clearInterval(interval);  // stop growing when it's big enough
    }
}
function startGrow() {
    makeFrame(src); // create the frame first
    interval = setInterval("grow()", 10);  // grow every 10 ms
}
</script> 
```

那么你可以有

```
<img onClick="startGrow();"> 
```

文档中的某处。

您可能还必须随着位置的增长调整位置以使其保持居中，但想法就在那里。

当用户将鼠标悬停在链接上时，听起来您正试图打开一个框。有比 iframe 更好的方法，例如动态加载内容的 div。

# xml - 可以通过 SOAP 在 InDesign 服务器中调用 JSXBIN 脚本吗？

> ID：12285453
> 
> 赞同：0
> 
> 时间：2012-09-05T16:02:33.957
> 
> 标签：xml, soap, jsx, indesign-server

我正在向在 Windows VPS 上运行的 InDesign Server 发出 SOAP 请求。我们已经在这台服务器上运行 JSX 脚本很长时间了，所以我们知道它运行良好。然而，第三方开发公司向我们提供了一个 JSXBIN 文件来运行，我们在运行它时没有任何成功。

这是我们的要求：

```
POST / HTTP/1.1
Host: indesign-server.local:8081
Connection: Keep-Alive
User-Agent: PHP-SOAP/5.2.6-1+lenny16
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Content-Length: 747

<SOAP-ENV:Envelope>
    <SOAP-ENV:Body>
    <ns1:RunScript>
        <runScriptParameters>
            <scriptLanguage>javascript</scriptLanguage>
            <scriptFile>\\server-ip\filestore\indesign-scripts\dev-server\ResizeScript\UKtoUSsizes.jsxbin</scriptFile>
            <scriptArgs>
                <name>FOLDER</name>
                <value>\\server-ip\filestore\dev\templates\18461</value>
            </scriptArgs>
            <scriptArgs>
                <name>TEMPLATE</name>
                <value>template</value>
            </scriptArgs>
            <scriptArgs>
                <name>SCRIPT-PATH</name>
                <value>\\server-ip\filestore\indesign-scripts\dev-server</value>
            </scriptArgs>
            </runScriptParameters>
        </ns1:RunScript>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是我得到的回复：

```
HTTP/1.1 200 OK
Server: gSOAP/2.7
Content-Type: text/xml; charset=utf-8
Content-Length: 537
Connection: close

<SOAP-ENV:Envelope>
    <SOAP-ENV:Body>
        <IDSP:RunScriptResponse>
            <errorNumber>48</errorNumber>
            <errorString>File or folder does not exist</errorString>
            <scriptResult/>
        </IDSP:RunScriptResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我们认为路径是正确的，所以要么`scriptLanguage`是错误的，要么是二进制文件内部有错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:34:23.760

啊哈，我从 Windows 事件日志中发现这个错误发生在特定的行号上，如果我们使用等效的 JSX 脚本，也会发生同样的情况。它还没有工作，但至少回答了这个问题：是的，*可以*在 InDesign Server 中调用 JSXBIN 编码的脚本。

# php - 将 px 添加到顶部和左侧属性

> ID：12285466
> 
> 赞同：1
> 
> 时间：2012-09-05T16:03:29.300
> 
> 标签：php, regex

所以我得到了这个程序，它给了我一堆带有一些内联样式的 html 输出。

它通常看起来像这样：

```
<DIV style="position:absolute;top:126;left:324"><nobr><span class="ft010"><b>2011</b></span></nobr></DIV>
<DIV style="position:absolute;top:126;left:386"><nobr><span class="ft010"><b>2010</b></span></nobr></DIV> 
```

现在我知道这是一团糟，但这是我得到的，现在改变它不是一个选择。然而，我需要做的是在 top 和 height 属性之后获取一个正则表达式来输入 px 。所以我想要的看起来像这样：

```
<DIV style="position:absolute;top:126px;left:324px"><nobr><span class="ft010"><b>2011</b></span></nobr></DIV>
<DIV style="position:absolute;top:126px;left:386px"><nobr><span class="ft010"><b>2010</b></span></nobr></DIV> 
```

html 输出为一个长字符串，因此我需要找到所有出现的 top 和 left 并在数值后添加 px 。我一直在尝试许多不同的解决方案，但仍然无法做到正确。如果有人可以帮助我找到适合我的问题的正确正则表达式，那就太好了。我对那些东西很害怕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:23:47.463

```
$html = preg_replace('%(top|left|right|bottom)(:[0-9]{1,4})(;|")%', '$1$2px$3', $html); 
```

这应该搜索任何 CSS 位置关键字，后跟冒号、数字（1-4 位长）和双引号 ( `"`) 或分号 ( `;`)。

然后它将获取所有这三个部分（括号内的部分）并在正确的位置将它们缝合在一起`px`。

[http://codepad.viper-7.com/UjYCV3](http://codepad.viper-7.com/UjYCV3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:07:01.567

你试过这个吗？

```
$html=str_replace(';left:','px;left:',$html);
$html=str_replace('"><nobr>','px"><nobr>',$html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:21:13.930

我认为你需要这样的东西：

```
$html=preg_replace('/(.+)(left|top|bottom|right):([\d]+)(.+)/i','$1$2:$3px;$4',$html); 
```

我没有测试过，但我认为正则表达式写得很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:24:42.633

比Febi 更合适的答案是：

```
$html = preg_replace("/(?:left|top|right|bottom|width|height)\s*:\s*\d+/","$0px",$html); 
```

# web-services - Coldfusion扩展组件缺少参数

> ID：12285467
> 
> 赞同：0
> 
> 时间：2012-09-05T16:03:32.147
> 
> 标签：web-services, coldfusion, components, cfc

我正在尝试使用远程函数获取 CFC (webCFC) 以返回不同 CFC (objCFC) 的实例。

以下是 CFC：

```
#webCFC
component { 
    remote function displayCFC(version=1) {
        if(version==1) {
            return new baseCFC();
        } else {
            return new objCFC();
        }
     }
 }

#baseCFC
component 
    accessors="true"
    persistent="true"
{
    property name="name" default="pete";    
}

#objCFC
component 
    extends="baseCFC"
    persistent="true"
    accessors="true"
{
    property name="age" default="30";
} 
```

如果我调用这个 URL：**/webCFC.cfc?method=displayCFC&returnFormat=json**，我会得到这个响应：

```
{
"name" : "pete"
} 
```

这很好。如果我调用此 URL：**/webCFC.cfc?method=displayCFC&returnFormat=json&version=2**，则响应缺少来自*baseCFC的属性*

```
{
"age" : 30
} 
```

我希望响应看起来像这样：

```
{
"name" : "pete",
"age" : 30
} 
```

我知道我可以在 objCFC 上使用 setName() 和 getName() 函数，它肯定扩展了*baseCFC* ，但如果我通过浏览器访问 CFC，扩展属性不会显示。

有可能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:01:22.037

这可能与`seralizejson`错误有关（不确定何时会没有错误）。

一种解决方法是实现您自己的方法`getMemento()`或`toJSON()`方法，该方法在结构中返回所有所需的属性。然后`serializeJSON`是那个结构。

# android - adobe AIR 移动应用程序的获利方法

> ID：12285468
> 
> 赞同：2
> 
> 时间：2012-09-05T16:03:32.817
> 
> 标签：android, apache-flex, mobile, flash-builder, flex4.6

我正在使用带有 sdk 4.6 的 adobe flash builder 开发 android 应用程序。谁能告诉我除了 Admob 之外我可以使用哪些获利方法。我曾经使用airpush和startapp和android sdk。是否可以将它们与 adobe 移动开发一起使用？我找不到任何可用于他们的本机 api。

另外，请告诉我 adobe sdk 4.6 支持的最小 android 版本是什么？支持安卓2.1吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:45:49.100

[Adobe AIR 原生扩展](http://www.adobe.com/devnet/air/articles/using-ane-in-flash.html)可用于通过 Google 和 Amazon 进行应用内购买

# java - 从 Java 中的 FileDescriptor 获取路径

> ID：12285469
> 
> 赞同：3
> 
> 时间：2012-09-05T16:03:33.510
> 
> 标签：java, security, permissions, jsm

关于我的问题的一些快速背景：

我正在编写一个将域类型强制规范转换为 Java 安全管理器代码的编译器。简而言之，DTE 定义“类型”（对象），为这些类型分配路径；然后定义“域”（主题），并定义域对各种类型的权限（rwxdc）。我需要在 JSM 中尽可能地模拟这种行为。

目前我正在研究写权限。我已经成功覆盖了 JSM 的 checkWrite(String filename) 方法。列表中的下一个是 checkWrite(FileDescriptor filedescriptor)，而这个被证明更棘手。由于 DTE 的定义方式，我需要路径信息来确定是否允许写入操作。

*   是否可以从 FileDescriptor 中提取路径数据？我猜不是——我检查了文档和各种教程，但没有发现任何迹象表明我可以通过任何方式获取这些信息（但是，我很高兴被显示错误；那会让我的工作更轻松）。

*   如果上述答案是否定的，有人可以提出可行的解决方法吗？例如，有什么方法可以让我编写本机代码来做我想做的事并将其绑定到我的自定义 JSM 类中？我可以做这样的“高级”事情，但我需要一些想法如何开始。

*   还是我*唯一*的选择基本上是拒绝所有使用 FileDescriptor 的写权限？我非常想避免这种情况，因为这是一个糟糕的解决方案，但如果这是我需要知道的现实。

非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:24:38.060

简短的回答是否定的，因为文件独立于用于访问该文件的路径（至少在任何重要的操作系统上）。

一种可能的解决方法是使用方面框架捕获打开文件的调用，并将引用的文件描述符放入`WeakHashMap<FileDescriptor,File>`. 然后，您只需在需要验证写入时查看此映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-27T10:36:11.300

希望不会被反射限制阻止，但现在你可以使用它（代码基于另一个答案），从 Android O 开始：

```
val file = File(filesDir, "ff")
file.parentFile!!.mkdirs()
val fileOutputStream = FileOutputStream(file)
val fd = fileOutputStream.fd
val method = fd.javaClass.getMethod("getInt$")
val fdId = method.invoke(fd)
val path = Paths.get("/proc/self/fd/$fdId")
val filePath = Files.readSymbolicLink(path)
Log.d("AppLog", "filePath:$filePath") 
```

虽然不确定 FileChannel。它的实现文件（“FileChannelImpl”）应该具有“path”（文件路径字符串类型）和“fd”，即 FileDescriptor，但两者都通过反射隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-14T06:19:17.760

java中从**FileDescriptor**获取路径的解决方案：

**这个怎么运作：**

我们知道文件描述符包含描述符 id 来定位当前进程中打开的文件。

[什么是文件描述符，用简单的术语解释？](https://stackoverflow.com/questions/5256599/what-are-file-descriptors-explained-in-simple-terms)

如果我们知道描述符 id，那么我们可以通过以下 java 代码轻松找到文件路径：

```
Path path = Paths.get("/proc/self/fd/"+fd_id);
System.out.println(Files.readSymbolicLink(path)); //return file path in file descriptor 
```

这里：

> fd_id 文件描述符 id (0,1,2 .....)
> 
> /proc 它的目录包含系统中运行的所有进程
> 
> /self 当前运行的java类进程id
> 
> /fd 文件描述符目录
> 
> //fd_id 文件描述符id

***SafeFileDescriptor.java***

```
import java.io.FileDescriptor;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.file.Paths;
import java.nio.file.Files;
import java.nio.file.Path;  
public class SafeFileDescriptor {

 static {
    System.load("Documents/java native interface exmples/libSafeFileDescriptor.so");
}

private native int getFDid(FileDescriptor fd);

public static void main(String[] args) throws IOException{  
    FileOutputStream fout = new FileOutputStream("Documents/test.txt");
    FileDescriptor fd=fout.getFD();
    int fd_id = new SafeFileDescriptor().getFDid(fd);
    Path path = Paths.get("/proc/self/fd/"+fd_id);
    System.out.println(Files.readSymbolicLink(path));
}
} 
```

`getFDid()`是用于获取给定文件描述符对象的描述符 id 的本机方法

以下代码是`getFDid()`本机方法的实现

***安全文件描述符.h***

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class SafeFileDescriptor */

#ifndef _Included_SafeFileDescriptor
#define _Included_SafeFileDescriptor
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     SafeFileDescriptor
 * Method:    getFDid
 * Signature: (Ljava/io/FileDescriptor;)I
 */
JNIEXPORT jint JNICALL Java_SafeFileDescriptor_getFDid
  (JNIEnv *, jobject, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

从 java 文件 SafeFileDescriptor.java 创建 SafeFileDescriptor.h

```
javac -h dir SafeFileDescriptor.java 
```

用您的目录替换“dir”以存储 SafeFileDescriptor.h

***安全文件描述符.c***

```
#include <jni.h>
#include "SafeFileDescriptor.h"

JNIEXPORT jint JNICALL Java_SafeFileDescriptor_getFDid
  (JNIEnv *env, jobject this_object, jobject fdObject) {

    jclass fileDescriptor = (*env)->GetObjectClass(env,fdObject);

    jfieldID id_fd = (*env)->GetFieldID(env, fileDescriptor, "fd", "I");

    return (*env)->GetIntField(env,fdObject,id_fd);
} 
```

编译**SafeFileDescriptor.c**

```
gcc -fPIC -I"$JAVA_HOME/include" -I"$JAVA_HOME/include/linux" -shared -o libSafeFileDescriptor.so SafeFileDescriptor.c 
```

将**libSafeFileDescriptor.so**文件添加到 java 类文件

```
System.load("Documents/java native interface exmples/libSafeFileDescriptor.so"); 
```

# java - 为什么axis2 1.6.2 java2wdsl.sh会忽略复杂类型的类成员

> ID：12285474
> 
> 赞同：0
> 
> 时间：2012-09-05T16:03:40.023
> 
> 标签：java, jaxb, wsdl, axis2

假设我有一个 ClassA，它包含一些 String 类型的成员和 ClassB 数组的 1 个成员，而 ClassB 数组又只包含一个 String 成员。像这样的东西：

```
public class ClassB{

    private String string1;
    public ClassB(){
        string1 = "value1";
    }
}

public class ClassA{

    private String string1;
    private String string2;
    private ClassB[] classB = null;

    public ClassA(){
        string1 = "value1";
        string2 = "value2";
        classB = new ClassB[2];
        classB[0] = new ClassB();
        classB[1] = new ClassB();
    }
} 
```

现在我在端点类中定义了一个成员函数，如下所示：

```
//...
public ClassA getClassA(){
    return new ClassA();
}
//... 
```

这段代码显然是无用的和不完整的，甚至可能是错误的，因为我是从脑海中写出来的，但它证明了我的观点。

当我在这个类（或类似结构）上运行 java2wsdl.sh 时，我得到一个 .wsdl 文件，但数组 ClassB[] 被忽略。我知道axis2默认使用JAXB序列化，我尝试使用注释控制输出但无济于事。

如何更改行为以便 ClassB[] 包含在 .wsdl 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:59:15.890

完成这项工作的一个必要（但可能不是充分）条件是将 ClassB 声明为静态。

# facebook - 群组供稿中的帖子包含不可用的内容

> ID：12285479
> 
> 赞同：8
> 
> 时间：2012-09-05T16:04:00.640
> 
> 标签：facebook, posts, facebook-group, facebook-feed

我是 facebook 中一个私人群组的管理员，我想使用 facebook API 来删除所有群组帖子。

我使用图形 api 资源管理器生成具有 read_stream、friends_group 和 user_groups 权限的访问令牌。

当我使用[https://graph.facebook.com/GROUP_ID/feed?access_token=TOKEN](https://graph.facebook.com/GROUP_ID/feed?access_token=TOKEN)访问群组帖子时，我得到每个帖子的数据数组，但标题元素具有值

**“附件不可用此附件可能已被删除，或者共享它的人可能无权与您共享它。”** 并且所有其他字段（例如链接，消息等）都不存在。

如果我使用浏览器打开 facebook 组，我可以看到所有帖子。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T19:44:25.670

此问题似乎已得到纠正。只要我拥有有效的身份验证令牌，我就可以访问我的私人群组的所有群组内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T01:44:49.197

下面是我在 JSON 对象中获取组帖子的代码。此 JSON 对象包含“数据”的 JSON 数组。这进一步包含用于消息（或帖子状态）的单独 JSON 数组。

```
GraphRequest.newGraphPathRequest(
            accessToken, "/id/posts",
            new GraphRequest.Callback() {
                @Override
                public void onCompleted(GraphResponse      graphResponse) {

                    try {
graphResponse.getRawResponse();

                        m=graphResponse.getJSONObject();
                        JSONArray n=m.getJSONArray("data");
                        messages=new String[n.length()];
                        for(int i=0;i<n.length();i++) {
                            JSONObject a = n.getJSONObject(i);
                            messages[i]=a.optString("message");
                        }

                        list.setAdapter(new   ArrayAdapter<String>   (fb.this,android.R.layout.simple_list_item_1,messages));

                    } catch (Exception e) {
                        Toast.makeText(fb.this, "error is: " +   e.toString(), Toast.LENGTH_LONG).show();
                    }
                }
            }).executeAsync(); 
```

# php - 在 PHP 中将数组作为单独的参数传递

> ID：12285481
> 
> 赞同：1
> 
> 时间：2012-09-05T16:04:10.600
> 
> 标签：php

我有一个这样的数组

```
array('item1', 'item2', 'item3'); 
```

有人知道我如何将每个项目分别传递给一个函数吗？

例如：

```
hello_world('item1', 'item2', 'item3'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T16:06:01.460

```
hello_world($array[0], $array[1], $array[2]) 
```

或者

```
call_user_func_array('hello_world', $array) 
```

[http://php.net/call_user_func_array](http://php.net/call_user_func_array)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T16:06:08.993

[http://www.php.net/manual/en/function.call-user-func-array.php](http://www.php.net/manual/en/function.call-user-func-array.php)

```
call_user_func_array('func',$myArgs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:05:21.023

该`array_map`功能可以帮助您[http://www.php.net/manual/es/function.array-map.php](http://www.php.net/manual/es/function.array-map.php)

# vba - 在 VBA 中隐藏/替换代码

> ID：12285482
> 
> 赞同：0
> 
> 时间：2012-09-05T16:04:15.640
> 
> 标签：vba, hide

我有一大段代码为我手动定义了一个数组的每个元素，这些元素非常长并且位于我的一个函数的开头。如果可能的话，我想隐藏代码或将其设置在其他地方，而不以任何方式改变其当前含义。我想避免使数组成为全局的。从调用函数的所有地方传递数组也是不合理的。

有没有办法让代码简单地放在其他地方，而 VBA 将它视为函数的一部分，即好像我在函数开头定义了所有元素？我想象有某种“Sub”实际上不是代码的 Sub（我可能称它为“Excerpt”），其中的元素填充在那里，函数中的一行按名称调用“Excerpt”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:08:53.633

您可以从函数返回一个数组，这样它就可以单独存在于一个模块中；

```
public Function getArr() as string()
    Dim arr(10) as string
    ...
    arr(5) = "Cakey"
    getArr = arr
End Function 
```

调用

```
Dim arry() as string: arry = getArr()
msgbox arry(5) 
```

# select - 为什么使用 HSQLDB 的“SELECT DISTINCT”不起作用？

> ID：12285487
> 
> 赞同：1
> 
> 时间：2012-09-05T16:04:40.680
> 
> 标签：select, distinct, hsqldb, jdbctemplate

我有个问题。当我尝试在 HSQLDB 中使用“选择不同的”时，结果流返回我所有的行，而不是我只返回不同的行。

我尝试了以下语法：

```
SELECT DISTINCT FROM ratings UserID order by UserID;
SELECT DISTINCT (UserID) FROM ratings order by UserID;
SELECT DISTINCT UserID FROM ratings;
SELECT DISTINCT (UserID) FROM ratings; 
```

它们都不起作用。问题是什么？

如果有人能够帮助我，我将不胜感激。谢谢你。

我执行操作的功能代码如下：

```
private void readUserFile(String filename) {

    try {

        //Verify if file users exists
        boolean exists = (new File(filename)).exists();

        if (!exists) {
            //If file users not exists create one, bases on distinct users that exist in ratings table 

            ResultSet rsUsers = jdbcTemplate.getDataSource().getConnection().createStatement().executeQuery("SELECT DISTINCT UserID FROM ratings order by UserID;");

            List<String> users = new ArrayList<String>();

            while (rsUsers.next()) {

                users.add(String.valueOf(rsUsers.getInt(1)));                  
            }

            rsUsers.close();

            //Create and write to file
            BufferedWriter f = null;
            f = new BufferedWriter(new FileWriter(filename));

            for (String user : users) {
                f.write(user);
                f.newLine();
            }
            f.close();

        }

        PreparedStatement prstInsert = con.prepareStatement("INSERT INTO users VALUES (?)");
        BufferedReader in = new BufferedReader(new FileReader(filename));
        int i = 0;
        while (true) {
            String s = in.readLine();
            if (s == null) { // end of file 
                log.info("Total imported users: " + i);
                break;
            }
            i++;

            int userid = Integer.parseInt(s);
            prstInsert.setInt(1, userid);

            if (i != 0 && Math.round((double) i / 100) == ((double) i / 100)) {
                log.info("Imported users: " + i);
            }
            prstInsert.executeUpdate();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

# r - 如何在 LDA 中进行分类器（手动）

> ID：12285488
> 
> 赞同：0
> 
> 时间：2012-09-05T16:04:42.617
> 
> 标签：r, classification, lda

我正在尝试在 R 中制定 LDA 的分类规则，这是使用欧几里得距离，`g(x)= t(w)x - wo`，`w`是我的特征向量，`x`我的测试数据，`wo`两个类的平均值。

我的问题是，如何将模型（项目数据）传递给模型预测（`True`- `False`）？谢谢你

# android - 我可以从其他应用安装一个应用，然后在打开它时立即启动它的意图吗？

> ID：12285493
> 
> 赞同：1
> 
> 时间：2012-09-05T16:04:55.037
> 
> 标签：android, android-intent, android-package-managers

**背景：**我有一个应用程序需要使用来自其他应用程序的意图。如果在需要它的意图时没有安装这个其他应用程序，我想提供它以供下载和安装。

**问题：**如果下载的应用程序在安装后立即打开（由用户），我需要它来打开第一个应用程序所需的特定意图，而不是正常打开它。见下图。

我有哪些可用选项，是否有通用模式？提前致谢。

![在此处输入图像描述](../Images/6b55cb3da2b0c0d14cd2bb429a07765d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:30:15.417

> 如果下载的应用程序在安装后立即打开（由用户），我需要它来打开第一个应用程序需要的特定意图，而不是正常打开它。

这是不可能的，严格来说。没有什么可以阻止用户按打开，这将正常运行——您无法更改它。

如果你是，嗯，“猴子蹦床”应用程序的作者，你可以想出各种技巧来识别它是在从，嗯，“动物奥运会”安装后打开的，所以它可以相应地路由它的逻辑（使用自定义粘性广播，让第二个应用程序使用一些 IPC 来询问第一个应用程序“哟，我应该做一些特别的事情吗？”等）。

还可以想象，`ACTION_PACKAGE_ADDED`在用户单击完成或打开（或主页或返回或其他）之前将进行广播。在这种情况下，您可以收听该广播，确定刚刚安装的应用确实涉及猿翻筋斗，然后调用`startActivity()`. 这对用户来说会有点刺耳，因为他们会突然从安装过程转移到这个新应用程序中。而且，由于没有记录确切的时间`ACTION_PACKAGE_ADDED`，您的里程可能会有所不同（例如，用户仍然有机会在广播进入您的应用程序之前点击打开）。

# javascript - 帐单地址与送货地址 jQuery 相同

> ID：12285495
> 
> 赞同：7
> 
> 时间：2012-09-05T16:05:09.913
> 
> 标签：javascript, jquery, jquery-ui

我无法使用 jQuery 将帐单地址复制到送货地址上。我已经使用没有自定义 jQuery 元素的纯简表单成功地做到了这一点。但是当我将自定义 UI 添加到复选框时，它似乎破坏了代码。我尝试了几次代码更改，但都没有工作。

当用户点击“我的帐单地址与我的送货地址相同”时，什么也没有发生。这是我的 jQuery 代码：

```
<script type="text/javascript">
$(document).ready(function(){ 
    $('#check-address').click(function(){
        if($('#check-address').attr('checked')){
            $('#address-field1').val($('#address-field').val());
            $('#city-field1').val($('#city-field').val());
            $('#zip-field1').val($('#zip-field').val());
            var state = $('#state-field option:selected').val();
            $('#state-field1 option[value=' + state + ']').attr('selected','selected');
        } else { 
            //Clear on uncheck
            $('#address-field1').val("");
            $('#city-field1').val("");
            $('#zip-field1').val("");
            $('#state-field1 option[value=Nothing]').attr('selected','selected');
        };

    });
});
</script> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:07:47.737

您正在使用 jquery 1.7 。你应该使用 prop 而不是 attr

```
 $('#check-address').prop('checked')

       $(elem).attr('checked')    // returned true (Boolean) prior to 1.6
        $(elem).attr('checked')   // now returns "checked" (string) versions after 1.6
        $(elem).prop('checked')    // now returns true (Boolean) versions after 1.6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T16:13:55.057

您用来美化复选框（或其他任何功能）的插件将 替换为`<input type="checkbox"/>`，`div`并*模拟*复选框上的事件。

它不会传播`click`事件，但***会***传播 a `change`，因此您应该改为监听它；

```
$('#check-address').change(/* function */); 
```

为了改进您的代码，您可能希望将检查替换为`attr('checked')`，`prop('checked')`但无论如何您的代码仍然可以工作。jQuery 文档中概述了这样做的原因`prop()`；[http://api.jquery.com/prop](http://api.jquery.com/prop)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T16:06:55.983

[**选项演示**](http://jsfiddle.net/sRt6G/3/)

```
$('#check-address').attr('checked') 
```

~~应该~~可以

```
$('#check-address').is(':checked') 
```

* * *

正如评论中所指出的，有很多方法可以给这只猫剥皮。[http://jsfiddle.net/sRt6G/1/](http://jsfiddle.net/sRt6G/1/) `this.checked`似乎是最简单的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T16:10:17.773

可能是您试图进行复选框的单击事件。你有没有尝试过：

```
$('#check-address').on('change', function (e) {... 
```

和

```
 if ($('#check-address').is(":checked").... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-22T21:35:14.890

这也可能有帮助。

```
$('input[name=city\\[' + this.value + '\\]]').val($('input[name=city\\[1\\]]').val()); 
```

[演示](http://jsfiddle.net/ugdgzj1n/)

填写顶部的表格，然后使用复选框复制字段的值。

它适用于动态创建的字段。如果表单是硬编码的，则替换`this.value`为字段的索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-19T00:20:11.317

您可能想尝试以下代码： $("input.billingAddress").on("change",function(){

```
 var val1 = $("input.street").val();
            var val2 = $("input.suitNumber").val();
            var val3 = $("input.city").val();
            if(this.checked)
            {
                $("input.streetb").val(val1);
                $("input.suitNumberb").val(val2);
                $("input.cityb").val(val3);
            }

            else
            {
                $("input.streetb").val("");
                $("input.suitNumberb").val("");
                $("input.cityb").val("");
            }

            }); 
```

# java - 在 JToolBar 中使用 for 循环添加动态加载图像

> ID：12285496
> 
> 赞同：0
> 
> 时间：2012-09-05T16:05:11.180
> 
> 标签：java, swing, jpanel, imageicon, jtoolbar

> **可能重复：**
> [关于使用 Java Swing 在循环中动态加载图像的问题](https://stackoverflow.com/questions/12269567/issue-regarding-dynamically-loading-images-in-loop-using-java-swing)

谁能告诉我如何在 JToolBar 中使用 for 循环动态添加图像。我尝试了很多，但它不适用于动态加载图像。我想创建工具栏，在其中循环加载图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:16:55.817

[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)特别适合添加`JButton`实例，每个实例都有不同的`Icon`，所以我提倡使用[`ImageIcon`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html). [可以在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html#eg)找到完整的示例，在对您之前问题的[答案](https://stackoverflow.com/a/12269926/230513)的评论中引用了更多示例。

# c++ - 对于跨平台游戏，我是否必须使用 OpenGL 数据类型（GLint、CLchar、...）？

> ID：12285502
> 
> 赞同：29
> 
> 时间：2012-09-05T16:05:22.210
> 
> 标签：c++, opengl, types, cross-platform

我有一个简短的问题。为什么 OpenGL 为标准类型（如 int、unsigned int、char 等）提供自己的数据类型？我是否必须使用它们而不是在 C++ 数据类型中构建？

例如 OpenGL 等价于`unsigned int`is`GLuint`和对于 ac 字符串有`GLchar*`而不是`char*`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-05T16:09:34.577

> 例如 OpenGL 等价`unsigned int`于`GLuint`

不，它不是，这正是你应该在与 OpenGL 交互时使用 OpenGL 的数据类型的*原因。*

`GLuint`不“等同于” `unsigned int`。*要求*`GLuint`大小为32 位。它的大小*始终*为32 位。*大小可能*是 32 位。它可能是 64 位的。你不知道，C 不会告诉你（在 之外）。**`unsigned int` *`sizeof`***

 ***这些数据类型将针对每个平台定义，并且它们可能针对*不同*平台进行不同的定义。您使用它们是因为，即使它们的定义不同，它们的尺寸也总是相同的。OpenGL API 期望和要求的大小。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T16:14:59.893

我不是 的专家`OpenGL`，但通常框架/平台（如`OpenGL`、`Qt`等）会定义自己的数据类型，以便底层数据类型的含义和容量在不同的操作系统中保持相同。通常这种行为是使用 C/C++ 预处理器宏获得的，但对于什么`GLuint`，它似乎只是一个`typedef`in `gl.h`：

```
typedef unsigned int GLuint; 
```

所以答案是肯定的。您应该使用框架的数据类型来确保您的代码在该框架内跨操作系统具有良好的可移植性。***

# iphone - iOS 中的笔记本式侧边栏

> ID：12285506
> 
> 赞同：0
> 
> 时间：2012-09-05T16:05:36.047
> 
> 标签：iphone, ios, cocoa

是否有类似于“2Do”应用程序中的开源垂直侧标签栏？我正在寻找一些看起来像笔记本选项卡的东西，它可以控制详细视图并且可以移动、删除或编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:41:53.840

如果您真的想获得创意，但视图中有一个 UISegmentedControl，则将视图旋转 90 度。对于文本，您将一个接一个地绘制到一个又高又窄的视图中，这样文本就会下降。创建一个图像，并将其用于每个段的图像。不确定它的外观，但您显然可以免费获得 UISegmentedControl 中的所有逻辑。

# php - 忽略空单元格PHPExcel

> ID：12285511
> 
> 赞同：9
> 
> 时间：2012-09-05T16:05:52.917
> 
> 标签：php, phpexcel

我正在使用库[PHPExcel](http://phpexcel.codeplex.com/)来读取 Excel 文件中的数据。我遇到的问题是，当我使用类似的东西时：

```
$obj = PHPExcel_IOFactory::load($file);
$data = $obj->getActiveSheet()->toArray(null,true,true,true); 
```

为了加载我的文件并将其内容转换为数组，我在数组中获取了 Excel 文件的所有列和行，即使其中没​​有任何数据也是如此。库 PHPExcel 中是否有一种方法或某些东西可以告诉它忽略我的 Excel 工作表中不包含任何数据的单元格？（而不是在 my 中有一堆空的关联数组`$data`）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T14:06:09.810

如果您的问题在于获取真实数据的空列，并且您想避免这些，您可以执行以下操作：

```
$maxCell = $sheet->getHighestRowAndColumn();
$data = $sheet->rangeToArray('A1:' . $maxCell['column'] . $maxCell['row']); 
```

这将返回仅表示包含真实数据的区域的数组。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-29T10:43:28.420

我的情况有这个解决方案

```
$maxCell = $objWorksheet->getHighestRowAndColumn();
$data = $objWorksheet->rangeToArray('A1:' . $maxCell['column'] . $maxCell['row']); 
```

将所有空字符串的所有行返回为：

```
[1] => Array
        (
            [0] => 
            [1] => 
            [2] => 
            [3] => 
            [4] => 
            [5] => 
            [6] => 
            [7] => 
            [8] => 
            [9] => 
            [10] => 
            [11] => 
            [12] => 
            [13] => 
        ) 
```

删除这些空行

```
$data = array_map('array_filter', $data); 
```

将返回

[1] => 数组 ( )

这是最后的解决方案：

```
 $maxCell = $objWorksheet->getHighestRowAndColumn();
        $data = $objWorksheet->rangeToArray('A1:' . $maxCell['column'] . $maxCell['row']);
        $data = array_map('array_filter', $data);
        $data = array_filter($data); 
```

将返回一个只有填充行的数组..希望有所帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T20:37:11.380

不，没有。toArray() 方法返回第一个参数 (NULL) 以表示一个空单元格。然后，您可以应用标准 PHP 数组函数，例如 array_filter() 来消除空单元格。

```
foreach($data as $key => &$row) {
    $row = array_filter($row,
                        function($cell) {
                            return !is_null($cell);
                        }
           );
    if (count($row) == 0) {
        unset($data[$key]);
    }
}
unset ($row); 
```

这将消除每个为 NULL（空）值的单元格，以及只包含空单元格的每一行。它将保留数组键，因此您的数组键仍将为您提供单元格引用。

请注意，包含空字符串的单元格不是空单元格，因此将保留这些单元格，尽管可以修改 array_filter() 回调以删除它们。

# android - 在 TextView中支持标签的方法

> ID：12285515
> 
> 赞同：1
> 
> 时间：2012-09-05T16:06:12.190
> 
> 标签：android, html, textview

我想要将`highlight`我的文本的某些部分显示在`TextView`. 我知道我们可以`SpannableString`在 Android 中使用来突出显示我的文本的某些部分。但我想知道，我们如何使用`<span>`html 标签来做同样的事情。我试图达到这一点，使用如下代码：

```
String str = "<span style=\"background-color:#ffff00\"> Highlighted </span> Text";
TextView tv = (TextView) findViewById(R.id.textView);
tv.setText(Html.fromHtml(str)); 
```

但显示的文本是没有跨度标签的相同文本。

怎么了 ？我怎么能不使用做同样的事情`SpannableString`？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T16:20:20.293

> 怎么了 ？

`Html.fromHtml()`在它支持的标签方面受到限制。这是几年前[的一篇博客文章](http://commonsware.com/blog/2010/05/26/html-tags-supported-by-textview.html)`fromHtml()`，显示了当时支持的标签名册。即使在[当前代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/Html.java)中（截至撰写本文时），也没有生成`BackgroundColorSpan`您正在寻找的内容。

没有什么可以阻止某人创建一个更丰富的 HTML->`Spanned`转换器来处理此类`<span>`标签，尽管我目前不知道有任何存在。

因此，目前，您将被困在`BackgroundColorSpan`自己的应用程序中。[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/RichText/Search)，我用它`BackgroundColorSpan`来突出显示在字符串中搜索特定子字符串的结果。

# java - 使用java从远程服务器更新文件的简单方法？

> ID：12285517
> 
> 赞同：0
> 
> 时间：2012-09-05T16:06:26.717
> 
> 标签：java

我希望使用 Java 访问远程服务器，访问文件并更新我的文件，或者更新服务器上的文件。

有没有一种简单的方法可以使用用户名@主机和密码访问远程服务器，这将允许我上传和下载文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:07:44.803

您可以使用[JSch](http://www.jcraft.com/jsch/)通过 ssh 远程访问文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:08:39.043

使用合适的工具来完成工作：[rsync](https://en.wikipedia.org/wiki/Rsync)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:41:21.133

如果您想在打开 ssh 连接的同时连接到机器，要运行 OS 命令，您可以使用 trilead。这是将打开连接的方法的示例。

```
 public static Connection newConnectionNoPassword(String host, String username, File privateKey) {
    Connection newConn = new Connection(host);
    try {
        newConn.connect(); // Ignoring ConnectionInfo returned value.
        //If the authentication was successful the authenticated connection will be returend
        if ( newConn.authenticateWithPublicKey(username, privateKey, null)){
            return newConn;
        }else{
            newConn.close();
            return null;
        }
    } catch (IOException ioe) {
        newConn.close();
        ioe.printStackTrace();
        return null;
    }
} 
```

如果您使用 maven，您可以通过将以下依赖项添加到您的 pom.xml 来获取它：

```
 <dependency>
        <groupId>com.trilead</groupId>
        <artifactId>trilead-ssh2</artifactId>
        <version>build213-svnkit-1.3-patch</version>
    </dependency> 
```

为了从服务器上传\下载文件，您可以使用 trilead SCPClient。以下是从远程服务器下载文件到本地文件夹的示例：

```
 public void downloadFiles(String[] remoteFiles, String localDir) throws IllegalArgumentException, IOException {
    checkNotEmpty(localDir);
    checkNotEmpty(remoteFiles);

    File dir = new File(localDir);
    if (!dir.exists() || !dir.mkdirs()) {
        throw new IOException("Failed to create local directory : " + localDir);
    }

    SCPClient scp = new SCPClient(this.conn);
    try {
        scp.get(remoteFiles, localDir);
    } catch (IOException e) {
        throw new IOException("Failed to copy remote files to local folder", e);
    }
} 
```

希望能帮助到你..

# java - 谜题：这个片段有什么问题

> ID：12285518
> 
> 赞同：3
> 
> 时间：2012-09-05T16:06:29.653
> 
> 标签：java, swing, jtable, tablerowsorter

...以及它是如何发生的（当然可以猜测:-)

```
@Override
public int convertChildIndexToModel(int modelIndex) {
    return getRowSorter() != null ? getRowSorter()
            .convertRowIndexToView(modelIndex) : modelIndex;
}

@Override
public int convertChildIndexToView(int viewIndex) {
    return getRowSorter() != null ? getRowSorter()
            .convertRowIndexToModel(viewIndex) : viewIndex;
} 
```

是的，白痴是我;-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:11:14.753

调用`convertRowIndexToView`，`modelIndex`反之亦然。一定是一些复制粘贴错误:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:12:33.383

是因为你应该打电话`convertRowIndexToModel`，`convertChildIndexToModel`反之亦然吗？

# c# - 易于访问的控件阵列

> ID：12285524
> 
> 赞同：1
> 
> 时间：2012-09-05T16:06:51.277
> 
> 标签：c#, wpf, xaml, microsoft-metro

我对整个 XAML 很陌生。

我需要创建一个具有*恒定*行数和列数（例如 2x5）的表格（网格），并`TextBlock`在每个单元格中放置一个。

我怎样才能正确地做到这一点，所以我可以轻松地更改单元格的数据？

例如，我想创建一个接受 1 个整数作为偏移量的函数：

```
void fillDate(int offset) 
```

并从偏移量开始填充单元格。

即使用 `fillData(3)' 为 2x5 调用函数将生成下表：

```
 | | |1|2
3|4|5|6|7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:56:06.050

试试看这个。在这里，您使用*ListBox*作为项目数组的容器，使用*UniformGrid*作为占位符（您可以将行数和列数绑定到类的属性以在运行时更改它们）

```
<Window x:Class=MyWindowClass ... >
    ... 
<ListBox 
 ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=MyWindowClass}, Path=myItems}">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Columns="{Binding Path=ColumnsInArray}"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=MyField}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

</Window> 
```

在代码中，您只需要更改集合的元素

```
class MyWindowClass: INotifyPropertyChanged
{
    public MyWindowClass():base()
    {
         ...
         InitializeComponent();
         myItems = new ObservableCollection<MyObject>();
         myItems.Add(new MyObject);// First Element
         myItems.Add(new MyObject);// Second Element
         ...
         myItems.Add(new MyObject);// Last Element
         ...
    }

    int columns=5;
    public int ColumnsInArray
    {
        get{return columns;} 
        set {columns=value; NotifyPropertyChanged("ColumnsInArray");}
    }

    public ObservableCollection<MyObject> myItems
    {
        get{ ... }
        set{ ... }
    } 
```

设置项

```
 void setItem(int index,MyObject newObject)
    {
        ...
        myItems[index]=newObject;
        ...
    }

    void setItem(int x, int y, MyObject newObject)
    {
        ...
        int index = y*columns+x;
        setItem(index,newObject);
        ...
    } 
```

INotifyPropertyChanged

```
 public event PropertyChangedEventHandler PropertyChanged;
    void NotifyPropertyChanged( string prop )
    {
        if( PropertyChanged != null ) 
        PropertyChanged( this , new PropertyChangedEventArgs( prop ) );
    }

}

public class MyObject
{
    public string MyField{get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:17:15.863

这没什么特别的，并且来自 Silverlight/XAML 背景，但可能或多或少会起作用。您可能需要针对细微的 API 差异进行调整（在没有 VS 的情况下在记事本中编写）并且未经测试，但应该为您提供入门所需的内容。

```
private void fillDate(int offset)
{
    int rows = 2;
    int columns = 5;
    int currentEntry = 1;

    for(int rowIndex = 0; rowIndex < rows; rowIndex++)
    {
        for (int columnIndex = 0; columnIndex < columns; columnIndex++)
        {
            if (currentEntry > offset)
            {
                TextBlock textEntry = new TextBlock();
                textEntry.Text = currentEntry.ToString();
                Grid.SetRow(textEntry, rowIndex);
                Grid.SetColumn(textEntry, columnIndex);
            }
            currentEntry++;
        }
    }
} 
```

编辑：刚刚意识到您可能想要一个在“空”单元格中没有文本的 TextBlock，在这种情况下，将内部循环的代码替换为：

```
TextBlock textEntry = new TextBlock();
Grid.SetRow(textEntry, rowIndex);
Grid.SetColumn(textEntry, columnIndex);
if (currentEntry > offset)
    textEntry.Text = currentEntry.ToString();
currentEntry++; 
```

编辑：根据您的评论，在创建控件时首先运行一个方法来构建网格并填充所有文本字段并将它们存储在某种列表中：

```
private int Rows = 2;
private int Columns = 5;
private TextBlock[][] TextEntries;

private void CreateTextBlocks()
{
    TextEntries = new TextBlock[Rows][];
    for (int rowIndex = 0; rowIndex < rows; rowIndex++)
    {
        entries[rowIndex] = new string[columns];
        for (int columnIndex = 0; columnIndex < columns; columnIndex++)
        {
            TextBlock textEntry = new TextBlock();
            Grid.SetRow(textEntry, rowIndex);
            Grid.SetColumn(textEntry, columnIndex);
            myGrid.Children.Add(textEntry);

            TextEntries[rowIndex][columnIndex] = textEntry;
        }
    }
} 
```

然后随后运行另一种方法来根据需要更改值：

```
private void fillDate(int offset)
{
    int currentEntry = 1;

    for(int rowIndex = 0; rowIndex < Rows; rowIndex++)
    {
        for (int columnIndex = 0; columnIndex < Columns; columnIndex++)
        {
            TextBlock textEntry = TextEntries[rowIndex][columnIndex]

            if (currentEntry > offset)
                textEntry.Text = currentEntry.ToString();
            else
                textEntry.Text = String.Empty;

            currentEntry++;
        }
    }
} 
```

# android - AsyncTask 中的 FileInputStream 错误

> ID：12285531
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:07:16.843
> 
> 标签：android, android-asynctask, fileinputstream

我已将一些代码从普通方法移至 AsyncTask doInBackground 方法，除了文件读取器外，一切正常。我得到“无法解决上下文”。我已经尝试完全删除“context.getApplicationContext()”，但这只是让我“对于 AlarmReceiver.backgroundputFTP 类型的方法 openFileInput(String) 未定义”。请问有人有什么想法吗？

```
public void putFTP(Context context)
     {
         new backgroundputFTP().execute();  
     }

  private class backgroundputFTP extends AsyncTask< Void, Void,Void >
  {  

        @Override  
        protected Void doInBackground(Void... params) 
        {  
     //
 // Push query result text file to FTP server
 //

  FTPClient client = new FTPClient();
  FileInputStream fis = null;
  Looper.prepare(); 

  try {
      client.connect(ipAddress);
      client.enterLocalPassiveMode();
      client.login(user, pass);

      //
      // Create an InputStream of the file to be uploaded
      //
      filename = "sdcardstats.txt";
      fis = context.getApplicationContext().openFileInput(filename); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:00:31.360

```
 fis = context.getApplicationContext().openFileInput(filename); 
```

你在哪里定义了这个上下文？尝试这个 。

```
public Context cContext ;
public void putFTP(Context context)
     {
           cContext = context;
         new backgroundputFTP().execute();  
     }

  private class backgroundputFTP extends AsyncTask< Void, Void,Void >
  {  

        @Override  
        protected Void doInBackground(Void... params) 
        {  
     //
 // Push query result text file to FTP server
 //

  FTPClient client = new FTPClient();
  FileInputStream fis = null;
  Looper.prepare(); 

  try {
      client.connect(ipAddress);
      client.enterLocalPassiveMode();
      client.login(user, pass);

      //
      // Create an InputStream of the file to be uploaded
      //
      filename = "sdcardstats.txt";
      fis = cContext.openFileInput(filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:16:44.070

尝试这个：

```
fis = YourActivity.this.getContext().openFileInput(filename); 
```

`YourActivity`是`Activity`您拥有 AsyncTask 的地方

# asp.net-mvc - 如何遍历 ViewModel 中的所有属性

> ID：12285533
> 
> 赞同：0
> 
> 时间：2012-09-05T16:07:28.090
> 
> 标签：asp.net-mvc

我的 asp.net MVC 视图中有很多重复的代码

```
 <div class="editor-label">
        @Html.LabelFor(model => model.MyProperty)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.MyProperty)
        @Html.ValidationMessageFor(model => model.MyProperty)
    </div> 
```

我想把它包装成这样：

```
foreach (System.Reflection.PropertyInfo item in Model.GetType().GetProperties()) 
```

并在整个过程中重用相同的局部视图。但我不能完全正确地理解语法。

我怎样才能使它更通用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:12:30.757

这就是 Display 和 EditorTemplates 的用途。

你只需要`@Html.EditorForModel()`为你的模型定义一个通用模板。

# c# - 在 oracle c# 中更新记录时出现超时错误

> ID：12285537
> 
> 赞同：0
> 
> 时间：2012-09-05T16:07:40.153
> 
> 标签：c#, oracle11g, enterprise-library

在更新特定表中的记录时出现超时错误。但我可以在同一张表中插入记录。

插入、更新发生在 DBTransaction 中。能够通过 Toad 更新相同的记录。

使用企业数据库进行数据访问组件。

如何确定导致此问题的路由原因。请指教。

# http - 为什么 Firefox 不发送 If-Modified-Since 标头？

> ID：12285538
> 
> 赞同：10
> 
> 时间：2012-09-05T16:07:41.757
> 
> 标签：http, firefox, http-headers, browser-cache

根据 Firebug，这是第一次检索资源时的响应标头：

```
Accept-Ranges   bytes
Cache-Control   public, max-age=86400
Content-Language    en
Content-Length  232
Content-Location    http://localhost/myapp/cacheTest.html
Content-Type    text/html; charset=WINDOWS-1252
Date    Wed, 05 Sep 2012 15:59:31 GMT
Last-Modified   Tue, 01 May 2012 05:00:00 GMT
Server  Restlet-Framework/2.0.3
Vary    Accept-Charset, Accept-Encoding, Accept-Language, Accept 
```

我点击离开，然后点击返回，这是发送到服务器的请求标头：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Host    localhost
Referer http://localhost/myapp/cacheTest2.html
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0 
```

因此，服务器自然不能像我想要的那样发送 304，而是再次发送整个资源。

这发生在 Firefox 14 中，我认为这可能是一个错误，所以我升级了。但它仍然在 Firefox 15 中发生。Chrome 没有问题。

我已经尝试过使用和不使用“Expires”标题，这没有区别。Firefox 只是拒绝发送 If-Modified-Since 标头。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-05T16:29:18.917

好吧，我觉得自己像个傻瓜，但决定把我的骄傲放在一边，而不是仅仅删除这个问题，告诉解决方案是什么，以防其他人做过同样的事情......

曾几何时，为了测试某些东西，我在 Firefox 中关闭了缓存。我重新打开它，现在它正在发送标题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-18T11:58:56.263

对我来说，问题是`Last-Modified`我发送的响应中的日期不完全是 RFC 1123。Chrome 不介意；它很高兴地将我格式错误的时间戳发送回`If-Modified-Since`标题中。然而，Firefox 悄悄地忽略了它。

我可以从您的标题中看到这不是您的情况的原因，但无论如何我都会发布这个答案，因为我花了一段时间才意识到这是问题所在，也许有一天，其他人会拥有同样的问题。

这是在 Linux，FWIW（准确地说是 Mint 17）下，但我希望这两种浏览器在其他操作系统下的行为方式相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-30T03:23:07.690

对我来说，当我从地址栏加载网站时，Firefox (ESR 60.4.0) 没有为某些资源（如 CSS、JS）发送“ *If-Modified-Since* ”或“ *If-None-Match ”标头。*

但是，当使用“ctrl+r”请求重新加载时，它发送了两个标头，但资源仍然被“ *200 OK* ”重新加载，即使它们应该返回“ *304 Not modified* ”

经过一番跟踪，我发现这是由于 apache 2.4.25 deflate 模块造成的。如果资源被压缩，它们实际上不会被缓存（也就是说，它们将在下次访问时重新加载）。[当进一步研究它时](https://stackoverflow.com/q/896974/2600099)，事实证明这是由于使用 deflate 时的 ETag 处理。

所以对我来说最合理的组合是使用“ **FileETag None** ”，现在当我执行“ctrl-r”时，即使是压缩文档，我也能正确得到“304”。

令人惊讶的是，即使在那之后它仍然显示绿色“ *200 OK* ”，表示完全检索 od CSS 和 JS（在详细的“请求标头”面板中没有“ *If-Modified-Since* ”），这让我抓狂，直到我发现这个专栏有时是**FAKED**（还有另一列称为“ **Transferred** ”，如果它说“ **cached** ”而不是字节数，这意味着 Firefox 实际上是从内部缓存中获取值，而不是从它显示的网络“200 OK”请求中获取的。检查服务器端的 access_log 确认没有网络活动，所以那部分只是糟糕的 UI）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T14:14:04.980

另一个可能导致 Firefox 不缓存请求的原因是磁盘是否已满。至少在 OSX 上。

这更加令人费解，因为此时 safari 仍然可以正确缓存请求，而 firefox 至少可以将请求缓存在内存中。

清除缓存并在磁盘上腾出一些空间会有所帮助。

# jquery - jqGrid + twitter bootstrap (2.1.0)：导航栏改变风格

> ID：12285539
> 
> 赞同：4
> 
> 时间：2012-09-05T16:07:43.050
> 
> 标签：jquery, jqgrid, twitter-bootstrap

我试图弄清楚如何解决这个问题，但我似乎无法找到解决方案。

我正在使用 jqGrid 4.4.1 (jQuery UI 1.8.23)，我刚刚开始使用 twitter 引导程序。
正如你在这个[小提琴](http://jsfiddle.net/vandalo/ZHRaD/)中看到的那样，导航栏很乱。
页面选择器元素比应有的长得多。
这是一个没有 twitter 引导的 jqGrid的[小提琴。](http://jsfiddle.net/vandalo/3Yqpc/)

有没有人可以尝试帮助我解决这个问题？
还有其他我应该注意的问题吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T11:18:11.170

我认为您应该包括其他 CSS 样式，例如

```
input.ui-pg-input {
    width: auto;
    padding: 0px;
    margin: 0px;
    line-height: normal
}
select.ui-pg-selbox {
    width: auto;
    padding: 0px;
    margin: 0px;
    line-height: normal
} 
```

​见[http://jsfiddle.net/ZHRaD/14/](http://jsfiddle.net/ZHRaD/14/)

**更新**：[答案中](https://stackoverflow.com/a/13865495/315935)[的演示](http://www.ok-soft-gmbh.com/jqGrid/FortAwesome/FortAwesome.htm)展示了如何使用[Font Awesome 图标](http://fortawesome.github.com/Font-Awesome/)。这可能是你想要的。

# coldfusion - CFFILE 上传所有问题 - Coldfusion 9

> ID：12285540
> 
> 赞同：1
> 
> 时间：2012-09-05T16:07:44.487
> 
> 标签：coldfusion, coldfusion-9

我正在尝试使用此代码将文件上传到我的服务器，但给了我一个错误。

这是代码：

```
 <cfif isdefined("form.submit")> 
   <cffile action="uploadall" destination="#expandpath('../../images/Uploads/after')#"> 
 </cfif> 
 <cfform action="#cgi.script_name#" enctype="multipart/form-data"> 
   <cfinput type="file" name="attachment1"><br> 
   <cfinput type="file" name="attachment2"><br> 
   <cfinput type="file" name="attachment3"><br> 
   <cfinput type="submit" name=" submit" value="submit"> 
 </cfform> 
```

这是错误：

> 以下信息仅供网站开发人员用于调试目的。
> 
> 处理请求时发生错误
> 
> 无效的内容类型：application/x-www-form-urlencoded。
> 
> 文件上传操作要求表单使用 enctype="multipart/form-data"。
> 
> 错误发生在 E:\sites\Example.Com\testing\handlers\upload\after.cfm：第 20 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:24:51.480

我看到您已经转向了不同的解决方案，但我想回答您的问题，因为答案很疯狂（并且是 Coldfusion 中一些奇怪的陷阱的刻板印象）。问题是[`<cfform>`根本不支持 enctype 属性](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fb7.html)。如果要上传文件，则必须使用普通的`<form>`. 很奇怪，对吧？

（我想您可以更改 XSLT，以便带有文件输入的 cfform 会自动正确设置 enctype。但是为什么它不开箱即用地执行此操作超出了我的理解。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:09:00.893

您在目标属性中引用的目录结构是否存在 '"#expandpath('../../images/Uploads/after')#"'？

如果目标属性不是绝对路径，那么它是相对于 ColdFusion 的临时目录的。与您的 Web 根目录或正在运行的模板无关。

这是[此处文档的描述](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7388.html)

上传文件的目录的路径名。如果不是绝对路径（以驱动器号和冒号开头，或者正斜杠或反斜杠开头），则它是相对于由 GetTempDirectory 函数返回的 ColdFusion 临时目录的。

# sql - 如何在 SQL 中将数字显示为 $#,###？

> ID：12285545
> 
> 赞同：0
> 
> 时间：2012-09-05T16:07:53.767
> 
> 标签：sql, tsql, number-formatting

该字段设置为 MONEY。

我想选择 [field_name] 作为 $#,###。

我试过

```
SELECT CAST([field_name] AS DECIMAL (1, 3))
FROM ... 
```

但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:14:54.793

有一种货币数据类型，但它不会在“货币”前面加上货币符号。你需要 SELECT '$' + Cast(CAST([field_name] AS DECIMAL (1, 3)) AS VARCHAR(4)) 但是你真的应该避免这种方法。格式化应该只在 UI 中完成，然后 UI 应该知道国家和货币符号货币数据类型允许您添加（SUM 聚合）内容而不会丢失小的变化，浮动数字数据类型将在相当简单的情况。

高温高压

伊恩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:18:45.440

```
declare @v money
set @v = 1234.567 
select '$' + parsename(convert(varchar(20), @v, 1), 2) 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/d41d8/4177)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:13:30.453

你可以这样做：

> [http://www.techrepublic.com/article/displaying-money-values-in-currency-format-in-sql/5803705](http://www.techrepublic.com/article/displaying-money-values-in-currency-format-in-sql/5803705)
> 
> 读者还想知道如何获取金额前面的货币符号，例如 $1,320.00。
> 
> ```
> SELECT 
>     Quantity, 
>     '$' + CONVERT(varchar(12), Unitprice, 1) AS Unitprice, 
>     '$' + CONVERT(varchar(12), Quantity * UnitPrice, 1) AS Amount 
>  FROM [Order Details] 
> ```

# java - JVM 究竟是如何解释字节码的？

> ID：12285551
> 
> 赞同：3
> 
> 时间：2012-09-05T16:08:20.987
> 
> 标签：java, jvm

> **可能重复：**
> [什么是字节码以及 JVM 如何处理它们](https://stackoverflow.com/questions/2203248/what-are-bytecodes-and-how-does-the-jvm-handle-them)

当 JVM 纯粹解释字节码（而不是 JITing 或两者之间的东西）时，它究竟是如何解释字节码的？

想到的一种方法是为每个字节码设置一个本机函数，该函数将 JVM 状态作为参数。可以使用查找表来获取给定字节码的函数指针，然后调用该函数。这是它的作用，还是在纯解释情况下有更有效的方法？

# python - python - 多处理 - 静态树遍历 - 性能增益？

> ID：12285553
> 
> 赞同：1
> 
> 时间：2012-09-05T16:08:27.580
> 
> 标签：python, tree, multiprocessing, traversal

我有一个节点树，其中每个节点都有一个 id（节点号）、一个子节点列表和一个债务指标。然后给我一个节点列表，我要找到它的债务。为此，我使用递归函数。

这一切都很好，但我想加快这个过程。我一直在研究多处理，但是每次尝试时，与根本不使用其他进程相比，计算时间都会增加（进程数越高，运行时间越长）。

由于试图理解许多不同的示例，我的代码看起来像是垃圾，所以我发布了这个伪代码。

```
class Node:
    id = int
    children = int[]
    debth = int

function makeNodeTree() ...

function find(x, node):
    for c in node.children:
        if c.id == x: return c
        else:
            if find(x, c) != None: return result
    return None

function main():
    search = [nodeid, nodeid, nodeid...]

    timerstart
    for x in search: find(x, rootNode)
    timerstop

    timerstart
    <split list over number of processes>
    <do some multiprocess magic>
    <get results>
    timerstop

    compare the two 
```

我已经尝试了各种不同的树大小，看看是否有任何收益，但我还没有找到这样的案例，这让我觉得我做错了什么。我想我要的是使用多处理来进行这种遍历并提高性能的示例/方式。

我知道有很多方法可以组织节点以使这项任务变得容易，但我想检查可能的（？）性能提升，如果有可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:34:20.953

多处理有开销，因为每次添加进程都需要时间来设置它。此外，如果您使用标准 Python 线程，则不太可能获得任何加速，因为所有线程仍将在一个处理器上运行。所以三个想法（1）你真的那么大，你需要加快速度吗？(2) 生成子进程 (3) 不要在每个节点上使用并行性，只在顶部几个级别使用以最小化开销。

# java - Lucene -- 过滤具有特定字段的文档

> ID：12285557
> 
> 赞同：1
> 
> 时间：2012-09-05T16:08:45.210
> 
> 标签：java, search, lucene

关于我之前的问题（[Lucene downgrade 3.6.0 to 3.5.0](https://stackoverflow.com/questions/12284384/lucene-downgrade-3-6-0-to-3-5-0)）我想知道如何过滤掉那些有或没有特定字段的文档（在 Lucene 3.5.0 中）（无论该字段的内容）。在 Lucene 3.6.0 中有一个[FieldValueFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/FieldValueFilter.html)类可用于执行此操作。[这里](https://stackoverflow.com/questions/3710089/find-all-lucene-documents-having-a-certain-field)问了同样的问题，但我不确定如何使用 API 完成同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:31:45.680

最后我自己找到了解决方案。我使用[了 TermRangeFilter](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/TermRangeFilter.html)。我使用的字段包含 ID（存储为字符串），因此我使用了以下过滤器：

```
Filter filter = new TermRangeFilter("field", "0", null, true, false); 
```

同样的事情也可以用这个短代码来实现：

```
Filter filter = TermRangeFilter.More("filter", "0"); 
```

这个解决方案似乎有效。我希望这会对某人有所帮助！

# iphone - iPhone 中 GLSL ES 2.0 上来自多个点源的 2D 照明

> ID：12285565
> 
> 赞同：1
> 
> 时间：2012-09-05T16:09:36.377
> 
> 标签：iphone, c++, opengl-es, opengl-es-2.0, cocos2d-x

因为我是一个完全没有着色器的菜鸟，所以在尝试使用 2D 照明系统时遇到了一些问题，该系统基本上用 2D 黑色纹理覆盖屏幕，在明亮区域所在的地方有透明孔。

由于我只使用一个纹理，我想我必须在片段着色器中执行此操作，对吗？

片段着色器：

```
#ifdef GL_ES
precision mediump float;
#endif

// Texture, coordinates and size
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform vec2 textureSize;

uniform int lightCount;

struct LightSource
{
    vec2 position;
    float radius;
    float strength;
};

uniform LightSource lights[10];

void main()
{
    float alpha = 1.0;

    vec2 pos = vec2(v_texCoord.x * textureSize.x, v_texCoord.y * textureSize.y);

    int i;
    for (i = 0; i < lightCount; i++)
    {
        LightSource source = lights[i];

        float distance = distance(source.position, pos);

        if (distance < source.radius)
        {
            alpha -= mix(source.strength, 0.0, distance/source.radius);
        }
    }

    gl_FragColor = vec4(0.0, 0.0, 0.0, alpha);
} 
```

问题是性能真的很糟糕（不能以 60fps 的速度运行 2 盏灯，屏幕上什么也没有），有什么建议可以让它更好，甚至可以用不同的方法来解决这个问题吗？

顺便说一句，我是从 cocos2d-x 做这个的，所以如果有人有任何使用 cocos2d 元素的想法，我也会欢迎 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:04:12.537

我完全同意蒂姆。如果你想提高总速度，你必须避免 for 循环。我建议您，如果灯光数组大小始终为 10，则将循环语句与循环内容的 10 个副本交换。您应该知道，您在循环语句中声明的任何变量都将在循环结束时被释放！因此，将循环分成十个部分是一个好主意（丑陋，但这是一个老派的把戏；））））
此外，我还建议您在每个语句中添加一些 println ，看看哪些指令在搞乱。我敢打赌，混合操作是罪魁祸首。我对 cocos2d 一无所知，但是，可以在流程结束时进行独特的调用来混合，并总结距离和优势？似乎在某个时候有'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:07:04.690

我会尝试的两件事（不能保证有帮助）

1.  删除 for 循环，只需在两个灯中进行硬编码。如果驱动程序没有正确处理 for 循环，它们可能会很昂贵。很高兴知道这是否会减慢您的速度。

2.  if 语句可能很昂贵，而且我认为这不是一个很好的应用`mix`（你正在做一个`a*(1-c) + 0.0 * c`，并且该术语的后半部分毫无意义）。我可能会尝试替换这个 if 语句：

    ```
    if (distance < source.radius)
    {
        alpha -= mix(source.strength, 0.0, distance/source.radius);
    } 
    ```

    用这一行：

    ```
    alpha -= (1.0-min(distance/source.radius, 1.0)) * source.strength; 
    ```

# javascript - Javascript在一种颜色上闪烁文本更长

> ID：12285566
> 
> 赞同：0
> 
> 时间：2012-09-05T16:09:39.973
> 
> 标签：javascript, timer

我有个问题。我希望将文本从黄色闪烁（或闪烁）到灰色，但我希望黄色文本的显示时间比灰色文本长。

我拥有的代码对每种颜色的工作时间相同。

```
function flashtext(ele,col) {
var tmpColCheck = document.getElementById( ele ).style.color;

   if (tmpColCheck === 'grey') {
       document.getElementById( ele ).style.color = col;
   } else {
       document.getElementById( ele ).style.color = 'grey';
   }
 } 

setInterval(function() {
    flashtext('flashingtext','yellow');
}, 700 ); //set an interval timer up to repeat the function 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:15:30.263

像这样的东西，你的意思是？

```
function flashtext(id, col) {
    var grey = true,
        el = document.getElementById(id);
    (function f() {
        grey = !grey;
        el.style.color = grey ? 'grey' : col;
        setTimeout(f, grey ? 500 : 1000);
    })();
}; 
```

演示在[http://jsfiddle.net/alnitak/8LYG2/](http://jsfiddle.net/alnitak/8LYG2/)

此代码使用局部变量`grey`来存储当前状态，而不是尝试从元素中读取它。这既非常有效，又消除了浏览器可能将`.style.color`属性转换为另一种格式的风险。

然后内部闭包负责切换状态，更改元素的样式，然后以适当的超时再次递归排队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:14:54.657

您可以使用`setTimeout`：

```
function flashtext(ele,col) {
    var tmpColCheck = document.getElementById( ele ).style.color,
        time;
    if (tmpColCheck === 'grey') {
        document.getElementById( ele ).style.color = col;
        time=1400;
    } else {
        document.getElementById( ele ).style.color = 'grey';
        time=700;
    }
    setTimeout(function(){flashtext('flashingtext','yellow')},time);
}
flashtext('flashingtext','yellow'); 
```

[**演示**：http://jsfiddle.net/EfpEP/](http://jsfiddle.net/EfpEP/1/)

**编辑**：

但是可以稍微改进一下：

```
function flashtext(ele,col) {
    var style = document.getElementById(ele).style;
    (function main(){
        var cond=style.color === 'grey';
        style.color=cond?col:'grey';
        setTimeout(main,cond?1400:700);
    })();
}
flashtext('flashingtext','yellow'); 
```

[**演示**：http://jsfiddle.net/EfpEP/3/](http://jsfiddle.net/EfpEP/3/)

Alnitak 有存储颜色的好主意，因为浏览器可以将其更改为另一种语法。`document.getElementById`但是他的代码每次都在调用。然后，按照他的想法，我认为最好的方法是：

```
function flashtext(ele,col) {
    var style = document.getElementById(ele).style,
        cond=style.color === 'grey';
    (function main(){
        cond=!cond;
        style.color=cond?col:'grey';
        setTimeout(main,cond?1400:700);
    })();
}
flashtext('flashingtext','yellow'); 
```

[**演示**：http://jsfiddle.net/EfpEP/4/](http://jsfiddle.net/EfpEP/4/)

**编辑2：**

但是如果你要使用类似的东西

```
flashtext('flashingtext','yellow');
flashtext('flashingtext2','blue');
... 
```

你最终会冻结浏览器。

相反，您应该使用

```
function FlashText(){
    var arr=[],
        cond=false,
        started=false;
    this.add=function(el,col){
        if(typeof el==='string'){el=document.getElementById(el);}
        arr.push([el.style,col]);
    }
    this.start=function(){
        if(started){return;}
        started=true;
        main();
    }
    function main(){
        cond=!cond;        
        for(var i=0,l=arr.length;i<l;i++){
            arr[i][0].color=cond?arr[i][1]:'grey';
        }
        setTimeout(main,cond?1400:700);
    };
}
var flash=new FlashText();
flash.add('flashingtext','yellow');
flash.add('flashingtext2','blue');
flash.start(); 
```

您还可以调用通过引用传递元素：（`flash.add(document.getElementById('flashingtext'),'yellow')`也许您有一个变量，其中包含一个没有 id 的元素）。

但尽量不要在`flash.start()`. 如果你这样做，元素将是黑色（或默认颜色），直到`main`被调用（可能是 1.4 秒）。

[**演示**：http://jsfiddle.net/EfpEP/6/](http://jsfiddle.net/EfpEP/6/)

# unity3d - 如何隐藏统一按钮

> ID：12285568
> 
> 赞同：1
> 
> 时间：2012-09-05T16:09:45.177
> 
> 标签：unity3d

我想创建一个按钮，当您按下它时，将打开一个新按钮。我知道如何制作两个按钮，但是一旦单击，我就无法隐藏第一个按钮。

到目前为止，这是我的代码：

```
#pragma strict

function Start () 
{
}

function Update () 
{
}

var isButtonVisible  :  boolean  =  true;  

var buttonRectangle  :  Rect     =  Rect(100, 100, 100, 50);

function OnGUI ()
{
    var NewButton = GUI.Button(Rect (Screen.width / 2 - 75, Screen.height / 2 -25,150,50), "this is also a button");

    if ( isButtonVisible ) 
    {
        if ( GUI.Button(Rect (Screen.width / 2 - 75, Screen.height / 2 -25,150,50), "button") ) 
        {
            isButtonVisible = false;

            if ( isButtonVisible ) 
            {
                return NewButton;
            }
        }
    }
} 
```

我是编程新手，所以这个问题可能有点不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:22:40.387

我同意“Happy Apple's”的解决方案，如果您想集成反向功能，您可以简单地更改代码，如下所示：

```
var isButtonVisible : boolean = true;
var buttonRectangle : Rect = Rect(100, 100, 100, 50);

function OnGUI ()

{

if(isButtonVisible)
{

    if(GUI.Button(Rect(Screen.width/2 - 75,Screen.height/2 - 25,150,50),"button"))
    {
        isButtonVisible = false;
    }

}
else
{

    if(GUI.Button(Rect(Screen.width/2 - 75,Screen.height/2 -25,150,50),"this is also a button"))
    {
        isButtonVisible = true;
    }

}

} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:27:19.537

这只是一个逻辑错误。首先，您在另一个 if (isButtonVisible) 括号内检查 if (isButtonVisible)，这是多余的。其次，如果我们知道我们希望第二个按钮出现的条件（第一个按钮被点击）和所述按钮被点击的布尔标志（isButtonVisible == false），我们可以分支 isButtonVisible 条件以显示第二个按钮错误的。

假设您希望第一个按钮使另一个按钮出现并在单击时隐藏，这应该做您想要的（尽管它只会在逻辑上以一种方式流动，即第一个按钮将隐藏自己并显示第二个按钮，但不可逆）。所以你的原始代码非常接近。

```
var isButtonVisible  :  boolean  =  true;  

var buttonRectangle  :  Rect     =  Rect(100, 100, 100, 50);

function OnGUI ()
{
    if ( isButtonVisible ) 
    {
        if ( GUI.Button(Rect (Screen.width / 2 - 125, Screen.height / 2 -175,150,50), "button") ) 
        {
            isButtonVisible = false;
        }
    }
    else
    {
        var NewButton = GUI.Button(Rect (Screen.width / 2 - 75, Screen.height / 2 -25,150,50), "this is also a button");
    }
} 
```

诚然，有几种更好的方法可以实现这一点，但我希望它能解决你的问题。

# node.js - Node.js Express：要求/在另一个应用程序中使用一个应用程序

> ID：12285578
> 
> 赞同：7
> 
> 时间：2012-09-05T16:10:31.503
> 
> 标签：node.js, express, require

我面临以下情况。为了进一步模块化我的软件开发，我编写了一些独立的标准模块。例如基于 Express 和 Passport 的登录模块，允许用户使用各种社交服务登录。该模块还包含用于用户管理、登录、注册、配置文件等的 UI。

现在，我要做的就是将 Auth 应用程序文件夹（包含 express 应用程序，所有它的路由、视图、模型、设置和依赖项）放入另一个 Express 应用程序（例如，CMS），然后加载它与类似的东西`require('./lib/auth/app.js')`。我知道这是可能的，看看[Kue](http://learnboost.github.com/kue/)。

我该怎么做呢？以及如何管理命名空间问题？我当然可以附加`/auth/`到每条路线，但我可以想象设置（`app.use()`'s）和公用文件夹会与'父'app.js'设置和公用文件夹冲突。

提前致谢，

费边

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:23:51.650

我想我找到了答案。所以，我发现[了这个问题](https://stackoverflow.com/questions/8514106/how-to-mount-express-js-sub-apps)和[这个](https://stackoverflow.com/questions/8514106/how-to-mount-express-js-sub-apps)问题。猜猜我的术语是关闭的。

我通过做一些事情解决了我的问题。首先，我将所有路由和 url 更改为“命名空间”（不是真的，但这确实有效）。现在所有路线都`/auth/`在他们面前。我对所有链接都做了同样的事情，所以一切正常。

接下来，我从我的 app.js 中删除了服务器部分。所以，而不是这样做：

`require('http').createServer(app).listen(app.get('port'));`

我只是做：

`module.exports = app;`

我向 app 对象添加了一些自定义方法：

```
app.isLoggedIn = auth.isLoggedIn;
app.notLoggedIn = auth.notLoggedIn; 
```

然后，在我的根应用程序中，我只需执行以下操作来加载`auth`应用程序。路由、公共文件和所有其他东西都会神奇地发生。很酷。

```
var auth = require('./vendor/auth/app');
var app  = express();

app.configure(function() {
    app.use(auth); // use our auth app

    // do a lot of root-app related stuff...
}); 
```

还要做的事情：

我的`auth`应用程序使用了一些会话内容。根据第二个[链接](https://stackoverflow.com/questions/7650981/how-to-share-sessions-in-mounted-express-apps)，如果我理解正确，`app.use(session...)`我的`auth`应用程序中的内容会被`app.use`. 另外，我想定义一个 EJS 助手来生成我的网址（类似于`site_url('/facebook/callback')`然后指向的东西`/auth/facebook/callback`）。最后，我需要包含我的根应用程序中的设置。我正在考虑将我的整个`app.js`(in `auth`) 包装在一个函数中，我将一个配置对象传递给该函数。像这样：

```
module.exports = function(config) {
    var app = express();

    app.set('config', config);
    // various app settings, routes, etc

    // return app so it's available in my root.
    return app;

} 
```

我希望这会有所帮助，如果您需要更多信息，我会看看是否可以将一些代码发布到要点上。让我知道！

# ms-access - MS Access VBA 交叉表报表图例排序顺序

> ID：12285579
> 
> 赞同：2
> 
> 时间：2012-09-05T16:10:37.633
> 
> 标签：ms-access, vba

这个问题很难解释，我有一个带有堆积条形图的访问报告，以显示随时间变化的百分比填充，就像这个例子中的一样：[点击这里](http://www.ozgrid.com/Excel/stacked-column.htm)

我拥有的图表的图例是一个数字后跟名称，例如

> 1-芒果
> 2-苹果
> 3-香蕉

ETC

我想根据上述格式对其进行排序，但是当我有超过**10 个项目时， 10-Pineapple 出现在 1-mango 之前，而它应该出现在 9-somefruit 之后**。访问报告的基础查询使用交叉表查询，其中项目被创建为

**列标题：[PrefixPriorityNumber]&"-"&[FruitName]**

我什至使用了排序：升序，但它仍然不会影响我想要显示的自定义排序。

我还尝试用谷歌搜索“排序字母数字字符串”，但这显然不止于此。感谢您提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:31:13.857

问题是你得到一个文本排序。您需要格式化前缀号码。

```
 Column heading: Format([PrefixPriorityNumber], "00") & "-" & [FruitName] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:02:59.403

要么使用另一个数字，如 Remou 建议的那样（01 而不是 1），要么开始使用字母。A > 9、B > A 等。

# email - CDO HELO 剥离特殊字符导致接力被拒绝

> ID：12285582
> 
> 赞同：1
> 
> 时间：2012-09-05T16:10:42.493
> 
> 标签：email, cdo.message

我有 C++ 代码，它利用 CDO 根据触发事件发送电子邮件。我在下面包含了部分代码。问题是，当应用程序在带有嵌入式破折号（例如 SERVER-ABC-123）的服务器上运行时，客户站点的某些邮件服务器将拒绝请求，并显示 550 错误以表示中继被拒绝。HELO 数据包包含带有破折号的服务器名称，我认为这是问题的根本原因。

是否有强制 CDO 包含 FQDN 的方法？

这是 SMTP 跟踪信息

客户端 => 服务器：HELO SMCABUTELC03\x0d\x0a 服务器 => 客户端：250 int2.unimax.pvt 你好 sm-cabu-telc03.swna.wdpr.unimax.com [192.168.24.25]，很高兴见到你\x0d\x0a客户端 => 服务器：MAIL FROM：\x0d\x0a 服务器 => 客户端：550 5.7.1 ... 中继被拒绝。发件人：corp.2n.admin@sm-cabu-telc03.swna.wdpr.unimax.com 不以 SMCABUTELC03\x0d\x0a 结尾

```
CDO::IMessage* cdoMessage = NULL;
CDO::IConfiguration* cdoConfiguration = NULL;

cdoConfiguration->get_Fields(&cdoFields);

cdoFields->get_Item( _variant_t( cdoSendUsingMethod), &cdoField1);
cdoField1->put_Value( _variant_t( (long) CDO::cdoSendUsingPort));
cdoField1->Release();
cdoField1 = NULL;

cdoFields->get_Item( _variant_t( cdoSMTPServer), &cdoField2);
cdoField2->put_Value( _variant_t( emailHostName.gets()));
cdoField2->Release();
cdoField2 = NULL;

cdoFields->get_Item( _variant_t( cdoSMTPServerPort), &cdoField3);
cdoField3->put_Value( _variant_t( emailHostPort));
cdoField3->Release();
cdoField3 = NULL;

cdoFields->get_Item( _variant_t( cdoSMTPAuthenticate), &cdoField4);
if ( emailUserName.size() == 0 )
{
    cdoField4->put_Value( _variant_t( (long) CDO::cdoAnonymous));
}
else
{
    cdoField4->put_Value( _variant_t( (long) CDO::cdoBasic));
}
cdoField4->Release();
cdoField4 = NULL; 
```

# excel - VB脚本将所有工作表数据复制到另一个Excel工作表

> ID：12285592
> 
> 赞同：0
> 
> 时间：2012-09-05T16:11:32.470
> 
> 标签：excel, vbscript

是否可以将所有工作簿表中的数据从一个 excel 表（*例如：A.xls*）复制到另一个现有的 excel（*例如：B.xls*）。

是否可以使用 VB 实现逻辑，无论 A.xls 中的工作簿表的数量如何（即它应该将 A.xls 的所有页面的所有数据*复制*到*B.xls*）

我感谢任何形式的帮助，因为我不是编程背景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:12:09.017

虽然我开始认为您想将多个选项卡中的所有数据复制到一个选项卡，但如果您真的想将数据保存在单独的选项卡上，您可以使用类似这样的方法来循环 A.xlsx 中的工作表并复制他们到 B.xlsx：

```
Sub copy_sheets()
    Dim eapp As Excel.Application
    Dim wkbk_from As Workbook
    Dim wkbk_to As Workbook
    Dim wksh As Worksheet

    Set eapp = CreateObject("Excel.Application")
    Set wkbk_from = eapp.Workbooks.Open("C:\Documents\Miscellaneous-DT\Excel\a.xlsx")
    Set wkbk_to = eapp.Workbooks.Open("C:\Documents\Miscellaneous-DT\Excel\b.xlsx")
    eapp.Visible = True

    For Each wksh In wkbk_from.Worksheets
       wksh.Copy After:=wkbk_to.Worksheets(Worksheets.Count)
    Next wksh
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T05:04:02.010

好吧，经过大量的努力和学习一些基础知识，我能够得到代码

这是有效的代码

```
Set objExcel = CreateObject("Excel.Application") 
objExcel.Visible = True
Set objPasteData = objExcel.Workbooks.Open("C:\A.xlsx") 'Copy From File
Set objRawData= objExcel.Workbooks.Open("C:\B.xls")             'Paste To File
Set obj1 = objPasteData.WorkSheets("RawData") 'Worksheet to be cleared
obj1.Cells.Clear
countSheet = objRawData.Sheets.Count

For i = 1 to countSheet
    objRawData.Activate
    name = objRawData.Sheets(i).Name

    objRawData.WorkSheets(name).Select
    objRawData.Worksheets(name).Range("A2").Select

    objExcel.ActiveSheet.UsedRange.Select
    usedRowCount1 = objExcel.Selection.Rows.Count

    objExcel.Range("A2:H" & usedRowCount1).Copy
    objPasteData.Activate
    objPasteData.WorkSheets("RawData").Select
    objExcel.ActiveSheet.UsedRange.Select
    usedRowCount2= objExcel.Selection.Rows.Count

    objPasteData.Worksheets("RawData").Range("A"& usedRowCount2 + 1 ).PasteSpecial Paste =xlValues

Next
objPasteData.Save 
```

感谢@Nilpo 和@ryanp 的指导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:21:12.223

将所有数据从一个工作表复制到另一个工作表的最简单方法是对包含所有填充单元格的区域使用复制和粘贴操作。

```
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True

Set objWorkbook1= objExcel.Workbooks.Open("C:\test1.xls")
Set objWorkbook2= objExcel.Workbooks.Open("C:\test2.xls")

Set objRange = objWorkbook1.Worksheets("Sheet1").UsedRange.Copy
objWorkbook2.Worksheets("Sheet1").Range("A1").PasteSpecial objRange

objWorkbook1.Save
objWorkbook1.Close

objWorkbook2.Save
objWorkbook2.Close 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:02:07.447

您说现有文件 b.xls，但是如果您覆盖所有内容，那没关系，为什么不使用

```
CreateObject("Scripting.FileSystemObject").CopyFile "a.xls", "b.xls", true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-20T14:24:17.337

我昨天有同样的任务，不得不花费大量时间寻找解决方案的各个部分。由于某种原因，在 vbs 中命名常量不可用（至少在较新的 Excel 版本中）。下面的脚本经过测试并证明可以在较新的 Excel (2016) 中工作

```
outputFiletype = 51 'type_xlsx

' I assume you want to use the script for different files, so you can pass the name as a parameter
If Wscript.Arguments.Count < 1 Then
    Wscript.Echo "Please specify a name of the Excel spreadsheet to process"
Else
    inputFilename = Wscript.Arguments(0)
    outputFilename = Replace(inputFilename, ".xlsx", "_calc.xlsx")

    Set objExcel = CreateObject("Excel.Application")
    objExcel.DisplayAlerts = False
    ' if you want to make the excel visible (otherwise if it is failed it will hang in a process list)
    'objExcel.Application.Visible = True

    Set currentWorkbook = objExcel.Workbooks.Open(inputFilename)
    Set newWorkbook = objExcel.Workbooks.Add()

    i = 0
    For Each current_sheet In currentWorkbook.Worksheets
        If current_sheet.Visible Then ' copying only the visible ones
            i = i + 1

            Dim new_sheet
            If newWorkbook.Sheets.Count < i Then
                newWorkbook.Sheets.Add , newWorkbook.Sheets(i-1) ' after the last one
            End If
            Set new_sheet = newWorkbook.Sheets(i)
            new_sheet.Name = current_sheet.Name

            current_sheet.UsedRange.Copy
            new_sheet.Select
            new_sheet.UsedRange.PasteSpecial 13 'xlPasteAllUsingSourceTheme - Everything will be pasted using the source theme
            new_sheet.UsedRange.PasteSpecial 8  'xlPasteColumnWidths - Copied column width is pasted
            new_sheet.UsedRange.PasteSpecial 12 'xlPasteValuesAndNumberFormats - Values and Number formats are pasted.
        End If
    Next
    newWorkbook.SaveAs outputFilename, outputFiletype
    currentWorkbook.Close False
    newWorkbook.Close False
    objExcel.Quit
End If 
```

# asp.net-mvc - Visual Studio ASP.NET 开发服务器不断返回旧页面

> ID：12285594
> 
> 赞同：5
> 
> 时间：2012-09-05T16:11:34.030
> 
> 标签：asp.net-mvc, visual-studio, debugging, asp.net-development-serv, disable-caching

我创建了一个基于 ASP.NET 4 的网站。起初，我运行默认站点，因为它是由 Visual Studio ASP.NET 4 Internet 应用程序模板生成的。我刚刚点击了调试按钮，IE 启动了，它连接`http://localhost:1341/`并加载了我网站的默认欢迎页面。一切似乎都很好，所以我开始重新设计 Index.cshtml。

重新设计后，我再次启动了网站。在导航时，我注意到如果单击浏览器的“后退”按钮，我将获得第一页的缓存旧版本，我必须在浏览器中点击“刷新”才能获得新版本。

所以我加了

```
 <meta http-equiv="PRAGMA" content="NO-CACHE"> 
```

和

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        // prevent caching
        HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        HttpContext.Current.Response.Cache.SetValidUntilExpires(false);
        HttpContext.Current.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore();
    } 
```

到我的网站。

然后我使用 IE 选项清除了 IE 缓存。我还清理了我的 Local\Temp 文件夹。

但是在浏览器中点击后退按钮时，我仍然在 IE 开发人员工具的网络选项卡中得到了结果 304。

获得重新设计的新页面的唯一方法是使用缓存->始终从服务器刷新。我可以出于开发目的这样做，但这只是让我心烦意乱——当我点击返回时，它总是从哪里得到那个非常旧的页面？

调试时，在 Visual Studio 中的解决方案资源管理器中会出现一个新的树项。这个新项目称为脚本文档。在它下面，有一个 Windows Internet Explorer 项目，其中包含 localhost 项目......当我打开它时 - 是的，那是当我点击返回按钮时进入 IE 的旧页面！Visual Studio（或 ASP.NET 开发服务器）在哪里存储“localhost”页面？

如何摆脱卡住的页面并阻止 IE（或者也可能是 ASP.Dev 服务器）缓存我的 localhost/首页？如何永久删除该旧页面？

我希望，新页面不会以相同的方式缓存，因为我添加到它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:19:25.420

添加

```
<meta http-equiv="CACHE-CONTROL" content="NO-CACHE"/>
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT"> 
```

# xcode - 如何让 Jenkins 推送到 GitHub 但不触发构建推送

> ID：12285596
> 
> 赞同：3
> 
> 时间：2012-09-05T16:11:36.620
> 
> 标签：xcode, git, jenkins

## 设置

我有一个 Mac mini 设置，Jenkins 从 GitHub 拉下一个 repo 并执行 Xcode 构建。因为 mini 与互联网隔离，我每 15 分钟轮询一次 GitHub 的更改。

在开始 Xcode 构建之前，我让 Jenkins 执行以下脚本来增加我的项目构建号并将结果提交到 repo：

```
#!/bin/sh

agvtool bump -all
/usr/local/git/bin/git commit -a -m "This is Jenkins, updating your build numbers, sir." 
```

在构建之后，我设置了一个构建后操作来运行另一个从 GitHub 拉取然后推送的脚本，如下所示：

```
#!/bin/sh

/usr/local/git/bin/git pull origin develop
/usr/local/git/bin/git push origin develop 
```

## 问题

因为 Jenkins 每次运行时都会执行提交和推送到 GitHub，所以下一次轮询会找到它上次推送的更改，无论是否有其他实际更改，都会创建一个新的构建。

## 问题

我的设置中是否有一些奇怪的东西我应该做不同的事情？我希望 Jenkins 更新我的 Xcode 目标的内部版本号并提交并将结果推送到 GitHub。这种配置显然实现了这一点，但具有每 15 分钟构建一次的副作用，而不是根据需要每 15 分钟构建一次。

Jenkins 正在咨询 lastSuccessfulBuild 的 SHA1 以确定是否有更改，但它是在我提交之前这样做的。有没有办法将当前构建的 SHA1 设置为版本号凹凸提交产生的​​哈希值？像这样：

```
#!/bin/sh

agvtool bump -all
/usr/local/git/bin/git commit -a -m "This is Jenkins, updating your build numbers, sir."
NEW_SHA=$(/usr/local/git/bin/git rev-parse HEAD)
# Some awesome Jenkins-fu to set the SHA1 of the current build to NEW_SHA 
```

这样，当 Jenkins 下次比较哈希时，它不会构建，除非自提交版本号以来发生了变化。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:26:19.027

我认为[这个 SO 问题](https://stackoverflow.com/questions/1774610/hudson-infinite-loop-polling-for-changes-in-git-repository)回答了您的问题，但我不能肯定地说，因为我们没有在轮询分支上进行构建版本增量。我还会在构建之前执行 git push，这样您就不必担心在构建过程中提交代码时会发生多少合并。值得庆幸的是，如果您保持原样，您将不必担心 Xcode 项目合并的方式。

# sql - SQL Server 2008 结果不一致

> ID：12285598
> 
> 赞同：2
> 
> 时间：2012-09-05T16:11:47.133
> 
> 标签：sql, sql-server, tsql

我刚刚将一些随机导致错误的代码发布到生产环境中。我已经通过完全改变我进行查询的方式解决了这个问题。然而，它仍然困扰着我，我不知道是什么导致了问题，所以想知道是否有人可能知道答案。我在存储过程中有以下查询。我不是在寻找关于使用嵌套函数调用和类似的东西进行查询不是一个好习惯的评论:-)。只是真的想找出为什么它不能始终如一地工作。随机查询中的函数将返回一个非数字值并导致连接错误。但是，如果我立即重新运行查询，它工作正常。

```
SELECT      cscsf.cloud_server_current_software_firewall_id,
                dbo.fn_GetCustomerFriendlyFromRuleName(cscsf.rule_name, np.policy_name) as rule_name,
                cscsf.rule_action,
                cscsf.rule_direction,
                cscsf.source_address,
                cscsf.source_mask,
                cscsf.destination_address,
                cscsf.destination_mask,
                cscsf.protocol,
                cscsf.port_or_port_range,
                cscsf.created_date_utc,
                cscsf.created_by
    FROM        CLOUD_SERVER_CURRENT_SOFTWARE_FIREWALL cscsf
    LEFT JOIN   CLOUD_SERVER cs
    ON          cscsf.cloud_server_id = cs.cloud_server_id
    LEFT JOIN   CLOUD_ACCOUNT cla
    ON          cs.cloud_account_id = cla.cloud_account_id
    LEFT JOIN   CONFIGURATION co
    ON          cla.configuration_id = co.configuration_id
    LEFT JOIN   DEDICATED_ACCOUNT da
    ON          co.dedicated_account_id = da.dedicated_account_id
    LEFT JOIN   CORE_ACCOUNT ca
    ON          da.core_account_number = ca.core_account_id
    LEFT JOIN   NETWORK_POLICY np 
    ON          np.network_policy_id = (select dbo.fn_GetIDFromRuleName(cscsf.rule_name))
    WHERE       cs.cloud_server_id = @cloud_server_id
    AND         cs.current_software_firewall_confg_guid = cscsf.config_guid
    AND         ca.core_account_id IS NOT NULL
    ORDER BY    cscsf.rule_direction, cscsf.cloud_server_current_software_firewall_id 
```

如果你注意到加入

```
ON          np.network_policy_id = (select dbo.fn_GetIDFromRuleName(cscsf.rule_name)) 
```

调用一个函数。

这是该功能：

```
ALTER FUNCTION [dbo].[fn_GetIDFromRuleName]
(
    @rule_name              varchar(100)
)
RETURNS varchar(12)
AS
BEGIN
    DECLARE     @value      varchar(12)

        SET @value = dbo.fn_SplitGetNthRow(@rule_name, '-', 2)
        SET @value = dbo.fn_SplitGetNthRow(@value, '_', 2)
        SET @value = dbo.fn_SplitGetNthRow(@value, '-', 1)

    RETURN      @value
END 
```

然后调用此函数：

```
ALTER FUNCTION [dbo].[fn_SplitGetNthRow]
(
    @sInputList     varchar(MAX),
    @sDelimiter     varchar(10) = ',',
    @sRowNumber     int = 1
)
RETURNS varchar(MAX)
AS
BEGIN
    DECLARE     @value      varchar(MAX)

    SELECT      @value = data_split.item
                        FROM
                        (
                            SELECT *, ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as row_num FROM dbo.fn_Split(@sInputList, @sDelimiter)
                        ) AS data_split
                        WHERE
                        data_split.row_num = @sRowNumber

    IF          @value IS NULL
        SET     @value = ''

    RETURN      @value  
END 
```

最后调用这个函数：

```
ALTER FUNCTION [dbo].[fn_Split] (
    @sInputList VARCHAR(MAX),
    @sDelimiter VARCHAR(10) = ','
) RETURNS @List TABLE (item VARCHAR(MAX))
BEGIN
    DECLARE @sItem VARCHAR(MAX)
    WHILE CHARINDEX(@sDelimiter,@sInputList,0) <> 0
        BEGIN
            SELECT @sItem=RTRIM(LTRIM(SUBSTRING(@sInputList,1,CHARINDEX(@sDelimiter,@sInputList,0)-1))), @sInputList=RTRIM(LTRIM(SUBSTRING(@sInputList,CHARINDEX(@sDelimiter,@sInputList,0)+LEN(@sDelimiter),LEN(@sInputList))))
            IF LEN(@sItem) > 0
                INSERT INTO @List SELECT @sItem
        END

    IF LEN(@sInputList) > 0
        INSERT INTO @List SELECT @sInputList -- Put the last item in
    RETURN
END 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:29:47.347

它“随机”返回不同内容的原因与 SQL Server 如何优化查询以及它们在哪里短路有关。

解决问题的一种方法是更改​​ fn_GetIDFromRuleName 的返回值：

```
return (case when isnumeric(@value) then @value end) 
```

或者，更改连接条件：

```
on np.network_policy_id = (select case when isnumeric(dbo.fn_GetIDFromRuleName(cscsf.rule_name)) = 1)
                                       then dbo.fn_GetIDFromRuleName(cscsf.rule_name) end) 
```

潜在的问题是评估的顺序。“case”语句解决问题的原因是它在转换之前检查数值，*并且*SQL Server 保证 case 语句中的计算顺序。需要注意的是，在转换像“6e07”或“1.23”这样的数字时仍然会遇到问题，这些数字是数字，但不是整数。

为什么有时会起作用？好吧，显然查询执行计划正在发生变化，无论是静态的还是动态的。失败的情况可能在 WHERE 条件排除的行上。为什么它会尝试进行转换？问题是转换发生在哪里。

转换发生的位置取决于查询计划。反过来，这可能取决于读取相关表 cscf 的时间。如果它已经在成员中，那么它可能会被读取并尝试转换为查询中的第一步。然后你会得到错误。在另一种情况下，另一个表可能是过滤器，并且在转换之前删除了行。

无论如何，我的建议是：

*   永远不要在查询中进行隐式转换。
*   使用 case 语句进行显式转换。
*   不要依赖 WHERE 子句来过滤数据以进行转换。使用 case 语句。

# iphone - 钥匙串访问代码泄漏

> ID：12285602
> 
> 赞同：0
> 
> 时间：2012-09-05T16:12:08.317
> 
> 标签：iphone, xcode, cocoa-touch, memory-leaks

这是泄漏： ![在此处输入图像描述](../Images/ea771e3ead379c750a46087598b4e5a3.png)

这是我的代码：

```
+(NSString *)getSecureValueForKey:(NSString *)key {

    // Retrieve a value from the keychain
    NSDictionary *result;
    NSArray *keys = [[[NSArray alloc] initWithObjects: (NSString *) kSecClass, kSecAttrAccount, kSecReturnAttributes, nil] autorelease];
    NSArray *objects = [[[NSArray alloc] initWithObjects: (NSString *) kSecClassGenericPassword, key, kCFBooleanTrue, nil] autorelease];
    NSDictionary *query = [[NSDictionary alloc] initWithObjects: objects forKeys: keys];

    // Check if the value was found
    OSStatus status = SecItemCopyMatching((CFDictionaryRef) query, (CFTypeRef *) &result);
    [query release];
    if (status != noErr) {
        // Value not found
        return nil;
    } else {
        // Value was found so return it
        NSString *value = (NSString *) [result objectForKey: (NSString *) kSecAttrGeneric];
        return value;
        [result release];
    }
}

+(BOOL)storeSecureValue:(NSString *)value forKey:(NSString *)key {
    // Get the existing value for the key
    NSString *existingValue = [self getSecureValueForKey:key];

    // Check if a value already exists for this key
    OSStatus status;
    if (existingValue) {
        // Value already exists, so update it
        NSArray *keys = [[[NSArray alloc] initWithObjects: (NSString *) kSecClass, kSecAttrAccount, nil] autorelease];
        NSArray *objects = [[[NSArray alloc] initWithObjects: (NSString *) kSecClassGenericPassword, key, nil] autorelease];
        NSDictionary *query = [[[NSDictionary alloc] initWithObjects: objects forKeys: keys] autorelease];
        status = SecItemUpdate((CFDictionaryRef) query, (CFDictionaryRef) [NSDictionary dictionaryWithObject:value forKey: (NSString *) kSecAttrGeneric]);
    } else {
        // Value does not exist, so add it
        NSArray *keys = [[[NSArray alloc] initWithObjects: (NSString *) kSecClass, kSecAttrAccount, kSecAttrGeneric, nil] autorelease];
        NSArray *objects = [[[NSArray alloc] initWithObjects: (NSString *) kSecClassGenericPassword, key, value, nil] autorelease];
        NSDictionary *query = [[[NSDictionary alloc] initWithObjects: objects forKeys: keys] autorelease];
        status = SecItemAdd((CFDictionaryRef) query, NULL);
    }

    // Check if the value was stored
    if (status != noErr) {
        // Value was not stored
        return false;
    } else {
        // Value was stored
        return true;
    }
} 
```

你能帮我修一下吗？每次我在钥匙串中访问或存储数据时都会发生泄漏。我已经很久没有在没有 ARC 的情况下进行编程了，我就是无法追踪这个泄漏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:16:50.967

创建后释放，`keys`返回前*释放*，实际上是释放在您的存储安全值方法期间创建的新对象。`objects``query``result` *`value`*

 *此时，您的选择是，了解内存管理的实际工作原理，或者只是打开 ARC 并让它为您处理大部分工作。*

# docx - 如何为 Word 2010 (.docx) 文档/模板提供 MySQL 数据库中的数据？

> ID：12285603
> 
> 赞同：1
> 
> 时间：2012-09-05T16:12:09.587
> 
> 标签：docx, mailmerge

用来自 MySQL 数据库的数据替换 .docx 文档（Word 2010）中的占位符的最佳方法是什么？

我可以使用服务器端语言打开文件并为每个占位符进行字符串替换吗？

是否有任何现有的工具/库可用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:11:25.120

**披露：我领导[docx4j](http://www.docx4java.org/trac/docx4j)项目 **

有大量可用的现有工具/库！

是的，您可以只进行字符串替换，但这是一种脆弱的方法，因为 Word 可能已经在运行中拆分了字符串。

您可以使用 MERGEFIELD 或内容控制数据绑定。

docx4j 支持所有三种方法，但内容控制数据绑定是最强大的。

*   [内容控件合并XML](https://github.com/plutext/docx4j/blob/master/src/samples/docx4j/org/docx4j/samples/ContentControlsMergeXML.java)
*   [合并字段](https://github.com/plutext/docx4j/blob/master/src/samples/docx4j/org/docx4j/samples/FieldsMailMerge.java)
*   [变量替换](https://github.com/plutext/docx4j/blob/master/src/samples/docx4j/org/docx4j/samples/VariableReplace.java)

特别要考虑的一件事是**“重复”**。如果你想在 Word 中说表中的一行，对于 MySQL 表中的每个匹配行，那么你需要一种方法来实现这一点。

docx4j 通过围绕表格行的“重复”内容控件来做到这一点；无论您选择哪种解决方案，我都会预先确保它可以处理重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T07:36:46.907

披露：我为 Invantive 工作。

使用 Invantive Composition ( [http://www.invantive.com/products/invantive-composition](http://www.invantive.com/products/invantive-composition) )，您可以使用数据库（IBM DB2、Oracle、MySQL、Teradata 和 SQL）中的数据填充 Word 文档（信件、法律诉状、保险单）服务器），然后手动完全更改内容。它适用于通过中央 Web 服务和带有查询的模型访问数据库的真正 Microsoft Word 最终用户（制作模板的人和使用模板的人）。Invantive Composition 允许嵌套重复的数据组和布局。使用单击一次集成到 Microsoft Word。

过去，我个人也一直在使用 JasperReports ( [http://community.jaspersoft.com/project/jasperreports-library](http://community.jaspersoft.com/project/jasperreports-library) ) 使用 JasperReports 的 RTF 输出目标生成字母。只要您不想编辑超过几个字的输出并且具有 Java/SQL 开发技能，它是免费的并且可以正常工作。就像 Invantive Composition 一样，它适用于大量不同的报告。

只要能完全控制环境，也可以考虑使用RTF作为中间语言（不针对最终用户，只针对真正的开发者）。将文档另存为 RTF，替换您需要替换的部分文本，编写一个接受参数并转储返回结果 RTF 的 Web 服务。需要一些时间来生成更复杂的表格（表格显然是人类在编写 RTF 规范之后发明的东西 :-) 这种方法仅适用于数量非常有限的模板，并且当您有足够的开发人员时间来启动它时运行并稳定。

作为一名独立审阅者，我也看到了使用 XML 模板的案例，但结果不如 JasperReports。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T19:54:33.647

如果您想使用 PHP，最完整​​的可用解决方案是[PHPDocX](http://www.phpdocx.com)。

您可以在教程中查看如何用来自任何数据源（如 MySQL DB）的数据替换占位符变量。

特别是，您可以使用不定数量的条目填充表格行，并且您可以删除整个 Word 文档块，具体取决于提供给应用程序的数据或构建动态 Word 图表。

您可以查看可用的 DEMO 以获得一个简单但非常说明性的示例（其内部工作原理在教程部分中进行了解释）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-16T12:29:43.670

*披露：我领导 docxgenjs 项目*

我认为您不必自己编写所有代码，这就是为什么我为 docx创建了一个**[类似 Mustache 的模板引擎](http://mustache.github.io/)**

演示：

[http://javascript-ninja.fr/docxgenjs/examples/demo.html](http://javascript-ninja.fr/docxgenjs/examples/demo.html)

回购

[https://github.com/edi9999/docxgenjs](https://github.com/edi9999/docxgenjs)

它是基于 JS 的，可以在客户端和服务器端工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T17:37:29.973

您可以使用开放的[Open XML SDK并像](http://www.microsoft.com/en-us/download/details.aspx?id=5124)[这样](http://geekswithblogs.net/DanBedassa/archive/2009/01/16/dynamically-generating-word-2007-.docx-documents-using-.net.aspx)替换占位符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T16:18:28.167

是的，您可以使用服务器端语言来做到这一点。检查apache POI。

[http://poi.apache.org](http://poi.apache.org)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-20T11:59:30.947

您好，我阅读了上面的评论，尤其是评论，Ivantive 看起来令人印象深刻——但我需要的解决方案要简单得多。在 Word 中使用 Selection.Range.InsertDatabase 从 access 数据库或 excel 电子表格甚至只是另一个 word 文档中获取记录。使用访问解决方案，您可以选择要获取的记录的布局，并让它根据字段（例如 ID）仅获取特定的记录。谷歌上面的话，它会带你到 MS 指导和一个示例 VB 脚本。在短短几分钟内工作得很好。现在寻找 VB 脚本，询问该人他们想要从 dbase 获得什么 ID，我们就完成了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-11T02:34:18.650

它使用具有与 java 对象合并字段的 docx 模板（这些对象具有您从 mysql 或任何其他来源加载的信息）。xdoc 报告是一个 java 语言的项目，项目的主页是[https://code.google.com/p/xdocreport/](https://code.google.com/p/xdocreport/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-14T05:39:25.940

*披露：我创建了 templ4docx 项目 *

你好

您可以使用 maven 中央存储库上的 templ4docx java 库，因此您可以将其添加到您的 maven 依赖项中：

```
<dependency>
    <groupId>pl.jsolve</groupId>
    <artifactId>templ4docx</artifactId>
    <version>2.0.0</version>
</dependency> 
```

示例用法：

```
 Docx docx = new Docx("E:\\template.docx");
    Variables variables = new Variables();
    variables.addTextVariable(new TextVariable("${firstName}", "John"));
    variables.addTextVariable(new TextVariable("${lastName}", "Sky"));
    docx.fillTemplate(variables);
    docx.save("E:\\filledTemplate.docx"); 
```

您可以在此处找到更多详细信息：http: [//jsolve.github.io/java/templ4docx/](http://jsolve.github.io/java/templ4docx/)

# java - 使用 bcrypt 编写自定义 tomcat 领域

> ID：12285604
> 
> 赞同：5
> 
> 时间：2012-09-05T16:12:14.473
> 
> 标签：java, authentication, tomcat, hsqldb, bcrypt

我正在开发一个使用 Tomcat 7.0 作为应用程序服务器的基于 Java 的 Web 应用程序。[在对先前问题](https://stackoverflow.com/questions/12221811/properly-transmitting-and-securing-users-passwords-for-a-web-app)的有用回复之后，我决定使用 bcrypt 将密码安全地存储在我的 HSQLDB 中。但是 Tomcat 的默认 Realm 实现不能处理 bcrypt，所以我需要自己编写；这是我编写自定义领域的唯一原因，尽管在所有其他方式中普通的 JDBCRealm 都可以工作。我一直在谷歌搜索并查看示例，但我对几点感到困惑。

首先，我应该扩展 RealmBase 还是 JDBCRealm？我发现的大多数示例都使用 RealmBase，但到目前为止，我已经成功地将 JDBCRealm 用于应用程序（因为它仍在开发中，我开始以明文形式存储密码并仅使用 JDBCRealm 来处理身份验证），以及一个答案Code Ranch 上的一个[问题](http://www.coderanch.com/t/134381/Security/Tomcat-Security)建议只是扩展它。不过，我不确定在这种情况下我需要重写哪些方法。只是身份验证方法，还是更多？如果这样做，JDBCRealm 是否仍然能够处理和管理用户角色、getPrincipal 等等？

其次，在上面链接的 CodeRanch 示例中，除非我遗漏了什么，否则 getPassword 方法似乎正在返回未加密的密码。因为我将使用 bcrypt，这是不可能的，而且无论如何这似乎是不可取的，我想。在此[博客文章](http://sureshkk.wordpress.com/2009/05/07/custom-realm-in-tomcat/)中的其他示例中，getPassword 似乎只是直接从数据库返回密码。那么哪种方式是正确的呢？我找不到 getPassword 的确切用途；文档没有说。是否可以为此返回存储在数据库中的加密值？

如果有人能告诉我应该扩展什么类，应该重写什么方法，以及 getPassword 应该返回什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T01:37:19.320

好吧，经过反复试验，我想出了如何做到这一点。我扩展了 JDBCRealm 并且只覆盖了 authenticate 方法，它工作得很好。我将[BCrypt.java](http://www.mindrot.org/projects/jBCrypt/)放在与我的自定义领域相同的目录中，这段代码有效：

```
import java.security.Principal;
import org.apache.catalina.realm.JDBCRealm;
public class BCryptRealm extends JDBCRealm
{
  @Override
  public Principal authenticate(String username, String credentials)
  {
    String hashedPassword = getPassword(username);
    // Added this check after discovering checkpw generates a null pointer
    // error if the hashedPassword is null, which happens when the user doesn't
    // exist. I'm assuming returning null immediately would be bad practice as
    // it would let an attacker know which users do and don't exist, so I added
    // a call to hashpw. No idea if that completely solves the problem, so if
    // your application has more stringent security needs this should be
    // investigated further.
    if (hashedPassword == null)
    {
      BCrypt.hashpw("fakePassword", BCrypt.gensalt());
      return null;
    }
    if (BCrypt.checkpw(credentials, hashedPassword))
    {
      return getPrincipal(username);
    }
    return null;
  }
} 
```

# javascript - 自动缩放图像以匹配文本高度

> ID：12285608
> 
> 赞同：29
> 
> 时间：2012-09-05T16:12:39.097
> 
> 标签：javascript, html, css, image

我有一个图像，我想将它与一些文本内联使用，但我需要它来匹配文本高度。我知道它是可能的，`<img src="img.jpg" height=16>`甚至是`<img src="img.jpg" height="100%">`，但前者不随文本大小缩放，而后者似乎使它成为 div 的大小，而不是文本高度。任何人都可以帮忙吗？

示例 HTML：

```
<body>
This is a test <img src="img.jpg">
</body> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-05T16:47:17.057

### 您是否尝试过将图像高度设置为 1em？

```
img {height: 1em;} 
```

### 在这里查看小提琴：http: [//jsfiddle.net/yAr7z/](http://jsfiddle.net/yAr7z/)

# ruby-on-rails - 从 rails 中的 assets 文件夹提供大型媒体文件

> ID：12285609
> 
> 赞同：1
> 
> 时间：2012-09-05T16:12:44.277
> 
> 标签：ruby-on-rails, asset-pipeline

我想将一些相当大的声音文件放入我在 rails 的 assets 文件夹中。

```
/app/assets/sounds
--- file1.wav
----file2.wav 
```

通过以下 URL 调用它们时

```
http://localhost:3000/assets/file1.wav 
```

Rails (3.2.x) 该文件将被“提供”（不知何故），但我永远无法在浏览器中播放它。

但是，如果我将这些文件放入公共文件夹中，它们将被提供并可以播放。

我认为这与公用文件夹没有被导轨接触而是由机架（afaik）提供服务的事实有关。我找到了使用 send_file 的解决方案，但这真的需要吗？

# php - 使用 SPL_AUTOLOAD_REGISTER 时命名空间如何工作？

> ID：12285610
> 
> 赞同：4
> 
> 时间：2012-09-05T16:12:48.797
> 
> 标签：php, namespaces, spl-autoload-register

我今天正在学习如何使用命名空间和自动加载`PHP`，我似乎遇到了障碍。当我不使用`spl_autoload_register`但相反时，事情似乎起作用了`require_once`。

我的文件夹结构很少：

```
- index.php
- class/
  - Users.php 
```

在我的`index.php`文件中，我有：

```
<?php
require_once('class/Users.php');

echo User::get(1); 
```

在我的`class/Users.php`文件中，我有：

```
<?php

Class User {
    function get($id) {
        return $id;
    }
} 
```

这工作得很好，返回的ID`1`

理想情况下，我会想使用自动加载功能，我发现`spl_autoload_*`这是我试图做的，但没有成功：

在我的`class/Users.php`文件中，我有：

```
<?php
namespace Users; // Added a namespace

Class User {
    function get($id) {
        return $id;
    }
} 
```

在我的`index.php`文件中，我有：

```
<?php
// Changed to using spl_autoload_register using an anonymous function to load the class 
spl_autoload_register(function($class){
    include('class/' . $class . '.php');
});

echo Users\User::get(1); // Added the Users namespace 
```

但我收到一个错误：

```
`Class 'Users\User' not found in /Applications/MAMP/htdocs/index.php on line 7` 
```

不太确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:06:33.987

我认为您应该在命名空间路径的前面添加 \。

**例子**

```
\Users\User::get(1); 
```

如果您必须使用基本路径，例如 Traversable() 您还需要这样做

```
new \Traversable() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:10:29.553

使用完整的类名作为参数调用自动加载器，包括命名空间。在您的示例中，这是`Users\User`，所以您最终会这样做

```
include('class/Users\User.php'); 
```

这失败了，因为类定义不在一个名为的目录中`Users`（顺便说一下，`include`会发出一个警告，它找不到包含扩展文件名的文件，这个警告会让事情变得更清楚——你是否禁用了错误报告？）

当找不到文件时让自动加载器在现场发生故障可能是一个好主意，这样故障模式就会更加明显。例如，您可以将其更改为

```
require('class/' . $class . '.php'); // require will end the script if file not found 
```

或类似的东西

```
$result = @include('class/' . $class . '.php'); // see documentation for include
if ($result === false) {
    die("Could not include: 'class/$class.php'");
} 
```

# vim - [f] 向前跳到下一行的一个字母

> ID：12285614
> 
> 赞同：3
> 
> 时间：2012-09-05T16:13:05.797
> 
> 标签：vim

假设在下一段中，我的光标位于第一句中***的***第一个（希望我可以突出显示它，但我不能这样......）。按`ff`两次后，我会在第一句话中***傻瓜***，然后是***of***。再按它会让我无处可去。

```
Some people are confident because they are fools. Leonard had the look of
someone who was confident because, so far, he'd never found reason not to be. He
would step off a high building in the happy state of mind of someone who
intended to deal with the problem of the ground when it presented itself. 
```

我需要修改什么才能跨行“移动”，以便进一步按下`ff`将使 Vim 跳到下一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:20:23.477

除了 Vim 的源代码，没有什么可以修改的。`fFtT`是线性的，你无能为力。看`:h left-right-motions`

您可以使用`/f`, 不限于当前行，但它不像需要另一个按键那样快。

或者像[easymotion](http://www.vim.org/scripts/script.php?script_id=3526)这样的插件。

你知道你可以`;`重做以前的`fFtT`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:25:31.543

有几个解决方案，但没有一个完全符合您的要求。通常在这种情况下我会做`ff`一系列的`;`字符来重复`f`。当我到达行尾时，我点击`+`然后继续`;`。同样，您可以使用`,`to 后退和`0<BS>`返回一行。

另一种选择是编写`set wrap`没有硬中断的行，但由于各种原因，用户可能觉得不理想。

尽管这看起来像是胡说八道，但它实际上在某些情况下很有用。例如，如果没有找到任何内容，该`:norm`命令将跳过一行。`ff`您可以将其用于`:norm`多行的复杂命令，以在继续执行命令之前检查特定字符。

# 编辑：

有一个插件可以做到这一点：[https ://github.com/dahu/vim-fanfingtastic](https://github.com/dahu/vim-fanfingtastic)

# android - 如何解决库冲突（apache commons-codec）

> ID：12285615
> 
> 赞同：8
> 
> 时间：2012-09-05T16:13:04.677
> 
> 标签：android, apache, conflict, nosuchmethoderror, apache-commons-codec

我对 Android 库有疑问。

我想使用库 org.apache.commons.codec.binary.Hex（1.6 版）中的方法 Hex.encodeHexString(Byte Array)

在我的 Android 平台（SDK 2.3.1）上，commons-codec 库版本 1.3 已经存在，但此版本中尚不存在该方法（仅 encodeHex() ）。

我将 1.6 版的 jar 库添加到我的 Eclipse 项目中（进入 /libs 目录），但是当我在 Emulator 上运行项目时，我得到了这个：

```
E/AndroidRuntime(1632): FATAL EXCEPTION: main
E/AndroidRuntime(1632): java.lang.NoSuchMethodError: org.apache.commons.codec.binary.Hex.encodeHexString 
```

我怎样才能指出好的库在哪里？

我在 Mac OS X 上使用带有 Java 1.6.0 的 Eclipse Juno

对不起我的英语不好，提前谢谢！

编辑：我的问题显然可以用 jarjar 工具解决。 [http://code.google.com/p/google-http-java-client/issues/detail?id=75](http://code.google.com/p/google-http-java-client/issues/detail?id=75)

有人可以用这个工具帮助我吗？我不知道如何创建 Ant Manifest 或 jar 文件。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-04T11:24:09.207

迟到的回复，但可能对某人有用。

使用[Maven Shade 插件解决的问题](http://maven.apache.org/plugins/maven-shade-plugin/)

该插件允许在编译时重命名冲突库的包名。

用法 ：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <executions>
            <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
                </goals>
            <configuration>
                    <relocations>
                        <relocation>
                                <pattern>org.apache.commons</pattern>
                                    <shadedPattern>com.example.shaded.org.apache.commons</shadedPattern>
                        </relocation>
                    </relocations>
                        <promoteTransitiveDependencies>true</promoteTransitiveDependencies>
            </configuration>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-24T13:21:08.100

nbe_42 的答案的扩展版本，带有完整的文档......

commons-codec-shaded jar 项目：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>commons-codec</groupId>
    <artifactId>commons-codec-shaded</artifactId>
    <name>Apache Commons Codec (shaded)</name>
    <!-- The version of this project specifies the Apache Commons Codec version which will
         be used, it must therefore match an existing (and preferably current) version. -->
    <version>1.9</version>
    <packaging>jar</packaging>

    <!--
      *************************************************************
       Rationale for this "shaded" version of Apache Commons Codec
      *************************************************************

      Context:
        Android includes an outdated version (v1.3) of commons-codec as an internal library.
        This library is not exposed in the Android SDK so app developers who want to rely on
        commons-codec need to treat it as an addition dependency and include it in the APK
        of their app. However, at runtime Android will always favour its internal version of
        the library which causes trouble when app code tries to call methods that don't
        exist in v1.3 but do exist in the version the developer expected to be using.

      Solution:
        After experimenting with many different variations the current (and final) solution
        to this problem is implemented in this project and does not require big hacks or
        changes in projects which depend on commons-codec, expect for declaring dependency
        on commons-codec-shaded (i.e. this project) instead of the original commons-codec.
        What we do here is take the "original" commons-codec library (currently version 1.9)
        and use the maven-shade-plugin to "shade" it, which means we modify the package name
        of the library (both in the compiled classes and the sources jar) in order to avoid
        the clash with Android's version. The package name is changes from
        "org.apache.commons.codec" to "shaded.org.apache.commons.codec". The result is
        published to the local Maven repository for other projects to use by simple
        dependency declaration on this project. Because we only apply the shading to
        commons-codec itself (and not to other classes using it; which is possible using the
        shade plug-in but doesn't work in combination with android-maven-plugin) any client
        classes which make use of commons-codec will have to import the new "shaded" package
        name instead of the old one.

      Issue on android-maven-plugin github which I posted to discuss all this:
        https://github.com/jayway/maven-android-plugin/issues/487
    -->

    <description>
     The Apache Commons Codec package contains simple encoder and decoders for
     various formats such as Base64 and Hexadecimal.  In addition to these
     widely used encoders and decoders, the codec package also maintains a
     collection of phonetic encoding utilities.
    </description>
    <url>http://commons.apache.org/proper/commons-codec/</url>
    <organization>
        <name>The Apache Software Foundation</name>
        <url>http://www.apache.org/</url>
    </organization>
    <licenses>
        <license>
            <name>The Apache Software License, Version 2.0</name>
            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
            <distribution>repo</distribution>
        </license>
    </licenses>

    <contributors>
        <contributor>
            <name>Matthias Stevens</name>
            <email>m.stevens {at} ucl.ac.uk</email>
            <roles>
                <role>Shading for use on Android</role>
            </roles>
        </contributor>
        <!-- see commons-codec:commons-codec pom for original contributors/developers -->
    </contributors>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
        <commons-codec-package>org.apache.commons.codec</commons-codec-package>
        <shading.prefix>shaded</shading.prefix>
        <shaded-commons-codec-package>${shading.prefix}.${commons-codec-package}</shaded-commons-codec-package>
        <commons-codec-src-folder>${project.build.directory}/commons-codec-src</commons-codec-src-folder>
        <commons-codec-res-folder>${project.build.directory}/commons-codec-res</commons-codec-res-folder>
        <manifest.path>${project.build.directory}/MANIFEST.MF</manifest.path>
        <!-- plugin versions -->
        <dependency-plugin-version>2.9</dependency-plugin-version>
        <compiler-plugin-version>3.2</compiler-plugin-version>
        <antrun-plugin-version>1.7</antrun-plugin-version>
        <jar-plugin-version>2.5</jar-plugin-version>
        <source-plugin-version>2.4</source-plugin-version>
        <shade-plugin-version>2.3</shade-plugin-version>
        <bundle-plugin-version>2.5.3</bundle-plugin-version>
        <!-- taken/modified from: http://svn.apache.org/repos/asf/commons/proper/commons-parent/trunk/pom.xml -->
        <commons.osgi.symbolicName>${shaded-commons-codec-package}</commons.osgi.symbolicName>
        <commons.osgi.export>${shaded-commons-codec-package}.*;version=${project.version};-noimport:=true</commons.osgi.export>
        <commons.osgi.import>*</commons.osgi.import>
        <commons.osgi.dynamicImport />
        <commons.osgi.private />
    </properties>

    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>${commons-codec-src-folder}</sourceDirectory>      
        <resources>
            <resource>
                <!-- txt files in shaded\org\apache\commons\codec\language\bm -->
                <directory>${commons-codec-res-folder}</directory>
                <includes>
                    <include>${shading.prefix}/**/*.txt</include>
                </includes>
            </resource>
            <resource>
                <!-- LICENSE & NOTICE files -->
                <directory>${commons-codec-res-folder}/META-INF</directory>
                <targetPath>META-INF</targetPath>
                <includes>
                    <include>*.txt</include>
                </includes>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <!-- fetch & unpack commons-codec sources and resources -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>${dependency-plugin-version}</version>
                <executions>
                    <execution>
                        <id>unpack_commons-codec_sources_and_resources</id>
                        <phase>process-sources</phase>
                        <goals>
                            <goal>unpack</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <!-- commons-codec sources -->
                                <artifactItem>
                                    <groupId>commons-codec</groupId>
                                    <artifactId>commons-codec</artifactId>
                                    <!-- the project version specifies the commons-codec version to use: -->
                                    <version>${project.version}</version>
                                    <classifier>sources</classifier>
                                    <overWrite>true</overWrite>
                                    <excludes>**/*.txt,META-INF/*</excludes>
                                    <outputDirectory>${commons-codec-src-folder}</outputDirectory>
                                </artifactItem>
                                <!-- commons-codec resources (in package) -->
                                <artifactItem>
                                    <groupId>commons-codec</groupId>
                                    <artifactId>commons-codec</artifactId>
                                    <!-- the project version specifies the commons-codec version to use: -->
                                    <version>${project.version}</version>
                                    <classifier>sources</classifier>
                                    <overWrite>true</overWrite>
                                    <includes>org/**/*.txt</includes>
                                    <!-- apply shading: -->
                                    <outputDirectory>${commons-codec-res-folder}/${shading.prefix}</outputDirectory>
                                </artifactItem> -->
                                <!-- commons-codec resources (in META-INF) -->
                                <artifactItem>
                                    <groupId>commons-codec</groupId>
                                    <artifactId>commons-codec</artifactId>
                                    <!-- the project version specifies the commons-codec version to use: -->
                                    <version>${project.version}</version>
                                    <classifier>sources</classifier>
                                    <overWrite>true</overWrite>
                                    <includes>META-INF/*.txt</includes>
                                    <outputDirectory>${commons-codec-res-folder}</outputDirectory>
                                </artifactItem> -->
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <!-- compile commons-codec sources -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>${compiler-plugin-version}</version>
                <configuration>
                    <source>${maven.compiler.source}</source>
                    <target>${maven.compiler.target}</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>${jar-plugin-version}</version>
                <executions>
                    <execution>
                        <!-- jar unshaded classes (& resources) -->
                        <id>jar-unshaded</id>
                        <phase>package</phase>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                    <execution>
                        <!-- rejar shaded classes (& resources), with proper manifest partially generated by bundle plugin -->
                        <id>jar-shaded</id>
                        <!-- runs after bundle plugin has done its work to generate bundle manifest -->
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                        <configuration>
                            <archive>
                                <manifestFile>${manifest.path}</manifestFile>
                                <manifestEntries>
                                    <Specification-Title>${project.name}</Specification-Title>
                                    <Specification-Version>${project.version}</Specification-Version>
                                    <Specification-Vendor>${project.organization.name}</Specification-Vendor>
                                    <Implementation-Title>${project.name}</Implementation-Title>
                                    <Implementation-Version>${project.version}</Implementation-Version>
                                    <Implementation-Vendor>${project.organization.name}</Implementation-Vendor>
                                    <Implementation-Vendor-Id>org.apache</Implementation-Vendor-Id>
                                    <Implementation-Build>${implementation.build}</Implementation-Build>
                                    <X-Compile-Source-JDK>${maven.compiler.source}</X-Compile-Source-JDK>
                                    <X-Compile-Target-JDK>${maven.compiler.target}</X-Compile-Target-JDK>
                                </manifestEntries>
                            </archive>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <!-- attach sources jar -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <version>${source-plugin-version}</version>
                <configuration>
                    <archive>
                        <manifest>
                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                            <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                        </manifest>
                    </archive>
                </configuration>
                <executions>
                    <execution>
                        <!-- jar unshaded sources -->
                        <id>attach-unshaded-sources</id>
                        <!-- <phase>package</phase> (default) -->
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                    <execution>
                        <!-- rejar shaded sources -->
                        <id>attach-shaded-sources</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <!-- apply the shading to main jar and sources jar -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>${shade-plugin-version}</version>
                <executions>
                    <execution>
                        <id>shading-main-jar-and-sources-jar</id>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <!-- (not needed as it is the one and only artifact/dependency)
                            <artifactSet> 
                                <includes>
                                    <include>commons-codec:*</include>
                                </includes>
                            </artifactSet>
                            -->
                            <relocations>
                                <relocation>
                                    <pattern>${commons-codec-package}</pattern>
                                    <shadedPattern>${shaded-commons-codec-package}</shadedPattern>
                                </relocation>
                            </relocations>
                            <createDependencyReducedPom>false</createDependencyReducedPom>
                            <!-- (only needed when dependency reduced pom is generated)
                            <dependencyReducedPomLocation>${project.build.directory}/dependency-reduced-pom.xml</dependencyReducedPomLocation> 
                            <keepDependenciesWithProvidedScope>true</keepDependenciesWithProvidedScope> 
                            <promoteTransitiveDependencies>true</promoteTransitiveDependencies>
                            -->
                            <createSourcesJar>true</createSourcesJar>
                            <shadeSourcesContent>true</shadeSourcesContent>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>${antrun-plugin-version}</version>
                <executions>
                    <execution>
                         <!-- unpack shaded classes & sources for manifest generation and re-jarring -->
                        <id>post-shading-tasks</id>
                        <phase>package</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <!-- Unjar shaded classes for generation of manifest -->
                                <echo>Deleting unshaded classes...</echo>
                                <delete dir="${project.build.directory}/classes"/>
                                <echo>Unjarring shaded main jar...</echo>
                                <unzip src="${project.build.directory}/${project.artifactId}.jar" dest="${project.build.directory}/classes"/>
                                <!-- delete to prevent dual inclusion in new main jar -->
                                <delete dir="${project.build.directory}/classes/META-INF/maven"/>
                                <!-- Unjar shaded sources -->
                                <echo>Deleting unshaded sources...</echo>
                                <delete dir="${commons-codec-src-folder}"/>
                                <echo>Unjarring shaded sources jar...</echo>
                                <unzip src="${project.build.directory}/${project.artifactId}-sources.jar" dest="${commons-codec-src-folder}"/>
                                <!-- delete to prevent dual inclusion in new sources jar -->
                                <delete dir="${commons-codec-src-folder}/META-INF"/>
                            </target>
                        </configuration>
                    </execution>
                    <execution>
                            <id>delete-orginals</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <target>
                                    <echo>Deleting unshaded jar files...</echo>
                                    <delete>
                                        <fileset dir="${project.build.directory}" includes="**/original-*.jar" />
                                    </delete>
                                </target>
                            </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <!-- taken/modified from: http://svn.apache.org/repos/asf/commons/proper/commons-parent/trunk/pom.xml -->
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>${bundle-plugin-version}</version>
                <configuration>
                    <archive>
                        <forced>true</forced>
                    </archive>
                    <excludeDependencies>true</excludeDependencies>
                    <manifestLocation>${project.build.directory}</manifestLocation>
                    <instructions>
                        <!-- stops the "uses" clauses being added to "Export-Package" manifest entry -->
                        <_nouses>true</_nouses>
                        <!-- Stop the JAVA_1_n_HOME variables from being treated as headers by Bnd -->
                        <_removeheaders>JAVA_1_3_HOME,JAVA_1_4_HOME,JAVA_1_5_HOME,JAVA_1_6_HOME,JAVA_1_7_HOME,JAVA_1_8_HOME</_removeheaders>
                        <Bundle-SymbolicName>${commons.osgi.symbolicName}</Bundle-SymbolicName>
                        <Export-Package>${commons.osgi.export}</Export-Package>
                        <Private-Package>${commons.osgi.private}</Private-Package>
                        <Import-Package>${commons.osgi.import}</Import-Package>
                        <DynamicImport-Package>${commons.osgi.dynamicImport}</DynamicImport-Package>
                        <Bundle-DocURL>${project.url}</Bundle-DocURL>
                    </instructions>
                </configuration>
                <executions>
                    <execution>
                        <id>bundle-manifest</id>
                        <!-- runs after the unjarring of the shaded classes -->
                        <phase>integration-test</phase><!--  default is: process-classes -->
                        <goals>
                            <goal>manifest</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

在 (apk/apklib/aar/jar) 项目中，您要使用阴影库：

```
<!-- ... -->
<dependency>
    <groupId>commons-codec</groupId>
    <artifactId>commons-codec-shaded</artifactId>
    <version>1.9</version>
</dependency>
<!-- ... --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T15:09:28.393

这是由于与 Android 一起打包的旧 (1.2) 版本的 Commons Codec 与您的新版本冲突导致的命名空间冲突。虽然阴影是一个很好的解决方法，但我认为从长远来看它不是一个可持续的解决方案。这是一个系统性问题，任何打包在 Android 中的开源库都会出现这种问题。我已向 Google 提交了一个问题。如果你同意，我鼓励你给它“加注星标”，这样它就会得到它需要的关注。这是链接 - [https://code.google.com/p/android/issues/detail?id=160578](https://code.google.com/p/android/issues/detail?id=160578)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-22T09:00:43.783

关于nbe_42的maven shade插件，插件块放在pom.xml文件的哪个位置很重要，不然maven会漏掉。

对我有用的是把它放在`<build> <plugins>`pom.xml 块的末尾：

```
<build>
<plugins>
{all other plugins}
...
{shade plugin}
</plugins>
</build> 
```

最初我在块的开头有它，maven 没有运行它。

要创建 .jar 文件，请从 apache.org 下载 commons-codec-1.8-src.zip 源 .zip 存档。打开包装。pom.xml 文件将位于存档的基本目录中。如上所述在 pom.xml 文件中插入 nbe_42 的插件块并运行：

```
mvn install 
```

这将为您构建、测试、替换和安装插件。

成功输出应如下所示：

```
[INFO] --- maven-shade-plugin:2.2:shade (default) @ commons-codec ---
[INFO] Replacing original artifact with shaded artifact.
...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
...` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T16:20:04.070

您是否将库添加到项目的构建路径中？完成后，您应该能够从 jar 文件中调用该方法。

如果它在不添加库的情况下构建良好，那么您可能正在针对较新版本的 android 构建，然后有效地部署到较旧版本，我发现了`String.isEmpty()`2.1 中没有的困难方式，但是当我编写代码时，它构建好我正在反对 4.1

您可能需要将 jar 与您的项目一起导出（同样，您可以在配置构建路径时执行此操作）。

希望这可以帮助

# cocoa - NSTextView 结束编辑操作，如 NSTextField

> ID：12285618
> 
> 赞同：4
> 
> 时间：2012-09-05T16:13:23.597
> 
> 标签：cocoa, nstextview

如何检测 NSTextView 上的结束编辑操作，就像在 NSTextField 上一样？我无法将其视为一项行动或其代表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T16:16:39.187

您可以注册通知，例如`NSTextDidEndEditingNotification`.

如果你想使用委托模式，那么你应该检查`NSTextDelegate`协议。文档[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTextDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40008624)。结束编辑时发送的方法是`textDidEndEditing:`。

`NSTextView`是 的子类`NSText`，因此最好也检查该类的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nstext_Class/Reference/Reference.html)。

## 例子

`NSTextView`有一个`NSTextViewDelegate`属性，您可以使用它来获得有关更改的通知。委托方法只是获取“结束编辑”通知的便捷方法，与`control:textShouldEndEditing`您可能从`NSTextField`例如 中知道的不同。

```
class SomeViewController: NSViewController, NSTextViewDelegate {

    var textView: NSTextView!

    func loadView() {

        super.loadView()

        textView.delegate = self
    }

    func textDidBeginEditing(notification: NSNotification) {

        guard let editor = notification.object as? NSTextView else { return }

        // ...
    }

    func textDidEndEditing(notification: NSNotification) {

        guard let editor = notification.object as? NSTextView else { return }

        // ...
    }
} 
```

# installation - 如何创建安装捆绑包？

> ID：12285622
> 
> 赞同：0
> 
> 时间：2012-09-05T16:13:30.620
> 
> 标签：installation, package, packaging

我有一个需要 .net 2 和 .net 4 框架和 adobe reader 的应用程序，我想在安装软件之前安装它们，我应该怎么做？请引导我走向正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:24:26.023

这通常是通过添加您需要的软件包作为主安装程序的先决条件来完成的。大多数商业设置工具以一种或另一种方式支持先决条件。这是一个可以帮助您入门的列表： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

选择一个工具并尝试使用它来创建您的安装程序并为其添加先决条件。我推荐 Advanced Installer 或 InstallShield。如果你想要一个免费的解决方案，你可以试试 WiX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T10:50:41.580

您需要的基本上是[套件安装](http://www.advancedinstaller.com/user-guide/tutorial-creating-suite-installations.html)。我包含的链接显示了如何使用 Advanced Installer 执行此操作（免责声明：我使用此工具）。这是一个商业工具，但它使您免于学习编写 Wix/NSIS 项目的代码，因为它完全是 GUI 驱动的，因此您无需编写任何代码即可构建安装程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:24:41.647

使用[NSIS](http://nsis.sourceforge.net)作为您的安装程序，您可以参考以下页面以获取有关检测和安装 .NET 的帮助：

*   [如何确保安装了所需版本的 .NET Framework](http://nsis.sourceforge.net/How_to_insure_a_required_version_of_.NETFramework_is_installed)
*   [如果尚未安装特定版本的 .NET，如何自动下载和安装](http://nsis.sourceforge.net/How_to_Automatically_download_and_install_a_particular_version_of_.NET_if_it_is_not_already_installed)

# pointers - 结构副本的问题

> ID：12285623
> 
> 赞同：0
> 
> 时间：2012-09-05T16:13:32.750
> 
> 标签：pointers, compiler-errors, visual-studio-2005, c89

在尝试从一个位置复制到另一个位置时，我在使用标准 C 编译器的 Visual Studio 2005 中遇到了编译器问题。

这些类型在文件中定义如下：

```
definition.h

#define MAX 7

typedef struct{
   char    recordtext[18];
   boolean recordvalid;
}recordtype;

typdef recordtype tabletype[MAX];

typedef struct{
   tabletype table;
}global_s; 
```

让我们假设一个 global_s“对象”在某处被实例化和初始化，并创建了一个指向该结构的指针。

```
#include "definition.h"

global_s global;
global_s* pglobal = &global;
init(&pglobal); 
```

同时，在另一个文件中（这就是我的问题所在）我正在尝试创建一个本地 tabletype 对象，并用全局表成员填充它，使用 get 方法来保护全局（假设它是“静态的”）

```
#include "definition.h"

extern global_s* pglobal;

tabletype t;
gettable(&t);

void gettabl (tabletype* pt)
{
   *pt = pglobal->table;
} 
```

当我去编译时，gettable函数中的行会抛出一个编译器错误“错误C2106：'='：左操作数必须是左值。看起来这应该表现为正常的复制操作，事实上，如果我对一个更基本的结构执行类似的操作我没有得到错误。例如，如果我复制一个只包含两个整数的结构。

有没有人对为什么这个操作似乎不正确有一个可靠的解释？

（免责声明：出于示例目的，我已将此代码开发为我的实际代码的清理版本，因此它在语法上可能不是 100% 正确，如果有人指出问题或需要澄清的内容，我将编辑问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:35:22.587

它是结构中的数组；他们不能被分配。您应该为每个结构定义一个 operator=()，并在数组上使用 memcpy，或者在循环中逐个元素地复制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T12:48:27.080

（如果您想获得对全局变量的引用）：

我不确定这是否正确（以及问题），但我认为除了函数原型之外，数组和指针（指向数组 1\. 元素）并不完全相同。指向数组的指针和指向数组的 1\. 元素的指针是有区别的）

也许获取数组的地址：

```
*pt = &(pglobal->table); 
```

无论如何，最好不要获取整个数组的地址，而是获取第一个元素的地址，以便生成的指针可以直接用作记录数组（无需取消引用）

```
recordtype* gettable (size_t* puLength)
{     
    *puLength = MAX;     
    return &(pglobal->table[0]);        
} 
```

（如果您想要表格的副本）：

数组不能在 C90 中就地复制，当然你必须提供目标内存。然后，您将定义一个函数 get table，如下所示：

```
void gettable (recordtype * const targetArr)
{
    size_t i = 0;
    for (; i < MAX; i++) targetArr[i] = pglobal->table[i];
    return;
} 
```

gettable 的一个完全等效的函数原型是：

```
void gettable(recordtype[] targetArr); 
```

当涉及到函数参数时，数组通过引用作为指向第一个元素的指针提供。您可以再次请求指向整个数组的指针，并在 gettable 中取消引用它。但是你总是必须逐元素复制。

您可以使用 memcopy 作为 1-liner 来完成这项工作。现代编译器应该生成同样有效的代码AFAIK。

# c - 使控制台窗口有些静态

> ID：12285624
> 
> 赞同：1
> 
> 时间：2012-09-05T16:13:37.303
> 
> 标签：c, static, console

对不起，如果标题很差，我想不出更好的。

我最近看到一个用 C++ 编写的小型控制台记忆游戏程序，它启发了我（只是为了它）在 C 中进行复制（主要是因为这个程序的某些方面对我来说很突出）。

当我看到控制台窗口如何产生某种静态效果时，我很感兴趣，例如，如果你翻转了一张“卡片”：

```
//Console Screen Before "Card Flip"     
  1 2 3 
1 * * *
2 * * *
3 * * * 
Flip Which Card? (x,y): _ 
```

可以说我输入`1,1`的程序可能的输出可能是：

```
//Console Screen After "Card Flip"
   1 2 3 
 1 9 * *
 2 * * *
 3 * * *
 Flip Which Card? (x,y): _ 
```

这实际上是促使我复制程序的原因，老实说，我唯一的目标是复制这种静态控制台。我的猜测是这个程序的作者只是在每次用户输入后清除屏幕并重新打印更新的矩阵（在本例中为未屏蔽的值 1,1）。

所以我决定为类似程序的初始化编写一种设置屏幕：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    int flips, x, y;
    do
{
    printf("*****Game Setup*****");
    printf("\n\tGrid Size (x):_");
    printf("\nGrid Size (y): ");
    printf("\nAmount of Flips (0 is Unlimited): \n");
    scanf("%d", &x);
    system("cls");
}
while(x <= 0);
do
{
    printf("*****Game Setup*****");
    printf("\nGrid Size(x): %d", x);
    printf("\n\tGrid Size(y):_");
    printf("\nAmount of Flips (0 is Unlmited): \n");
    scanf("%d", &y);
    system("cls");
}
while(y <= 0);
do
{
    printf("*****Game Setup*****");
    printf("\nGrid Size(x): %d", x);
    printf("\nGrid Size(y): %d", y);
    printf("\n\tAmount of Flips (0 is Unlmited):_\n");
    scanf("%d", &flips);
    system("cls");
}
while(flips < 0);
if(!flips) printf("Beginning %d by %d Memory Game with Unlimited Flips...", x ,y);
else printf("Beginning %d by %d Memory Game with %d Flips...", x, y, flips);

return 0;
} 
```

它按预期工作，但我觉得可能有更好的方法来实现同样的效果，这样做会成倍地增加我的代码长度，而且效率不高。不仅如此，而且通过使用这种方法，“UI”充其量是糟糕的，我认为如果我能以某种方式适当地移动闪烁的输入光标会更好

例如：

```
*****Game Setup*****
Grid Size (x): _
Grid Size (y): 
... 
```

然后我会输入`1`例如，光标会简单地“移动”到下一个区域：

```
*****Game Setup*****
Grid Size(x): 1
Grid Size(y): _
... 
```

`%n`我正在考虑以某种方式使用说明符完成后者，`printf`尽管我不太确定这是否可能（我对 知之甚少`%n`）。

那么有没有更好的方法来做到这一点（更有效）？如果是这样，有没有办法如上所述“移动”光标？你会怎么做这样的事情？

这整个概念真的让我的好奇心达到了顶峰。

# python - 从 URL 字符串解析站点/域名

> ID：12285628
> 
> 赞同：1
> 
> 时间：2012-09-05T16:13:50.387
> 
> 标签：python, parsing, url

> **可能重复：**
> [从 python 中的 URL 获取站点名称](https://stackoverflow.com/questions/508183/get-site-name-from-a-url-in-python)

对于这样的 URL：

```
http://twitter.com/pypi
http://www.wolframalpha.com/input/?i=python 
```

我想拉出`'http://twitter.com'`或`'http://wolframalpha.com'`部分。

以下代码有效，但我正在寻找一种更清洁的方法的建议......

```
'/'.join(url.split('/',3)[:3]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:15:40.623

您可以使用（在 Python 3 之前`urllib.parse`命名）模块：[`urlparse`](http://docs.python.org/library/urlparse.html)

```
>>> from urllib.parse import urlparse
>>> urlparse("http://twitter.com")
ParseResult(scheme='http', netloc='twitter.com', path='', params='', query='', fragment='')
>>> r = urlparse("http://twitter.com")
>>> r.scheme + '://' + r.netloc
'http://twitter.com' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:22:00.573

另一种（可读性较差）方法`urlparse`：

```
>>> from urlparse import urlparse, urlunparse
>>> urlunparse(urlparse("http://twitter.com/pypi")[:2] + ("",) * 4)
'http://twitter.com' 
```

# php - 从 PayPal 立即购买按钮捕获数据

> ID：12285630
> 
> 赞同：0
> 
> 时间：2012-09-05T16:14:03.880
> 
> 标签：php, forms, paypal

我已经对此进行了研究，并且我已经看到一些地方说您可以为此使用 CURL，但我不相信这会像我所追求的那样工作。

我想做的是在我正在开发的网站和 PayPal 网站之间建立一个临时保留页面。此保留页面的唯一目的是在数据库中缓存有关正在购买的物品的数据，以便可以将其与 PayPal 返回的数据进行检查，作为一项额外的安全措施。（按钮已经动态加密）

所以，我想做的是有这样一个场景：

1.  点击立即购买按钮
2.  表单提交数据到holding页面
3.  保持页面将数据添加到数据库
4.  持有页面将用户和数据发送到 PayPal 以处理交易

当然，问题在于传输`$_POST`数据并不简单。有人对如何使用 PHP 进行此操作有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:17:35.537

创建您自己的按钮并隐藏真正的贝宝按钮。单击您的按钮后，执行 AJAX 发布并执行服务器端处理。

如果响应正常，则呈现 HTTP 200 响应并在 $.ajax 中成功，触发点击真正的立即购买按钮（或触发贝宝 API，但这在您的设置中有效）

如果响应不好，请呈现 HTTP 402 响应并在您的 onerror 中，做任何您想做的事情来提醒用户它失败了。

这样，您不需要两次重定向用户 - 这有点刺耳......

无论您有什么形式，您都可以使用 jQuery 将表单作为 AJAX 发送..

这样的事情应该做：

```
var data = $('form').serialize();
$.post('url', data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:47:28.230

Having created, for example, `holding.php`, have a look at this blog post: [http://davidwalsh.name/curl-post](http://davidwalsh.name/curl-post)

Or you could put into the database the things you want to compare with before the page where the button is?

# java - 字符串比较，Java

> ID：12285631
> 
> 赞同：0
> 
> 时间：2012-09-05T16:14:11.747
> 
> 标签：java, string

```
class Compare
{
    public static void main(String args[])
    {
        String S1 = "Daniel";
        String S2 = "DANIEL";
        String S3 = "Daniel";
        String S4 = "daniel";

        System.out.println(S1.equals(S2));
        System.out.println(S1.equals(S3));
        System.out.print(S4.equalsIgnoreCase(S2));
    }
} 
```

并且输出是： false true false 当它忽略大小写时，它应该是“true”......对吗？oO

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:16:21.670

是的，它应该，它对我有用。这是我从您的确切程序中得到的输出：

```
false
true
true 
```

我的猜测是，您要么复制/粘贴了错误的内容，要么被 IDE 愚弄（正如其中一条评论所建议的那样）。

# c# - GDI+ 从图像创建蒙版

> ID：12285632
> 
> 赞同：1
> 
> 时间：2012-09-05T16:14:16.593
> 
> 标签：c#, asp.net, gdi+

我喜欢能够将图像从画布中分离出来，并单独留下背景。结果应该像下面的 ImageB.png（白色区域是透明的）。我在下面编写的代码在 asp.net C# webform 中。

**ImageA.png**（带背景的图像）

![ImageA（带背景的图像）](../Images/b8faf4333dfaf9f6d34e5bde764c4fbf.png)

**ImageB.png**（带女士的图片，白色区域应该是透明的）

![图片已从背景中删除](../Images/8536b048f1a562f6417a177bd36a6a72.png)

ASP.NET C# 网络表单代码。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //Load image
        Bitmap loadImage = new Bitmap(Server.MapPath("ImageA.png"));
        //Create a canvas to work on
        Bitmap canvas = new Bitmap(loadImage.Width, loadImage.Height);
        // create graphic on canvas
        Graphics graphicOnCanvas = Graphics.FromImage(canvas);
        graphicOnCanvas.DrawImage(loadImage, 0, 0, loadImage.Width, loadImage.Height);//Draw the graphic to the canvas

        //*****REMOVE IMAGE FROM BACKGROUND ?????????????????????? ********/

        #region Output image on screen
        MemoryStream msOut = new MemoryStream();
        canvas.Save(msOut, ImageFormat.Png);//must leave as png to output as png
        canvas.Dispose();//Dispose the canvas
        Byte[] BitmaptoBytes = msOut.ToArray();
        //convert bitmapholder to byte[] - ended
        BitmaptoBytes = null;
        Response.ClearHeaders();
        Response.ContentType = "image/png";//to product a better jpeg we have to use this because event if using the codec to do it it still doesn't look good http://msdn.microsoft.com/en-us/library/aa479306.aspx
        //disable 1 line below to prevent download from viewing
        // Response.AddHeader("Content-Disposition", "attachment; filename=" + ProductImage.Substring(0, ProductImage.Length - Reverse(ProductImage).Split('.')[0].Length-1) + ".png");//changing the file name extension
        Response.AddHeader("Content-Length", msOut.Length.ToString());
        msOut.WriteTo(Response.OutputStream);//Sending image out
        Response.End();
        loadImage.Dispose();
        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:43:48.797

您可能需要检查每个像素（使用[WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)）并确定当前像素是否为“背景”像素（您可以通过精确的“模糊”匹配或 alpha 测试来做到这一点） - 然后将其替换为白色或您想要的任何其他颜色。

[下面](https://stackoverflow.com/questions/4231032/rgb-parade-in-wpf)介绍如何访问 WriteableBitmap 中的所有像素。

# azure - Windows Azure 工具：警告：无法删除目录

> ID：12285634
> 
> 赞同：3
> 
> 时间：2012-09-05T16:14:23.223
> 
> 标签：azure

有谁知道这个的解决方案？使用最新版本的 Azure 工具，每次我进行构建时，我都会在输出窗口中看到这些消息：

```
Windows Azure Tools: Warning: Unable to delete directory APPROOT.
Windows Azure Tools: Warning: Unable to delete directory WEBUX.
Windows Azure Tools: Warning: Unable to delete directory APPROOT. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:37:30.410

安吉拉，很可能应用程序已打开这些文件夹的句柄，并且构建过程无法删除文件夹/文件，因此它可以使用新的二进制文件进行更新。此问题特定于您的计算机，而不是 Windows Azure。

如果您无法确定正在使用哪个应用程序，您可以重新启动计算机，这样您就知道没有任何应用程序正在使用，然后启动 Visual Studio 并清理/重建您的应用程序，看看您是否仍然看到此错误。如果您仍然看到错误，我可以提供一些其他故障排除信息以进一步帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:32:05.750

我也遇到了这个错误。Azure SDK 1.7 添加了一种向角色提供“额外”文件资源的新方法。为了修复我的这个错误，我手动删除了 Azure 项目下的文件夹，退出 VS 后配置文件角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:20:11.520

正如 Avkash 提到的，某些应用程序正在使用您的文件......一些对我有用的建议：

1) 防止防病毒软件检查构建文件夹 2) 禁用 Windows 搜索服务 3) 禁用任何查看构建文件夹的自动备份或自动同步服务

高温高压

# c# - 恢复css类名

> ID：12285636
> 
> 赞同：0
> 
> 时间：2012-09-05T16:14:33.690
> 
> 标签：c#

如何恢复通过 JQuery 在我的`<asp:TextBox>`组件中添加的 Css 类？

例子：

**ASPX**

`<asp:TextBox ID='txtTest' runat='server' CssClass='inputText'></asp:TextBox>`

**查询**

`$('#txtTest').addClass('testClass');`

**页面渲染**

`<input type='text' ID='txtTest' CssClass='inputText testClass' />`

**代码背后**

如何恢复`testClass`通过 Jquery 在我的`<asp:TextBox>`组件中添加的内容？

我试过了`this.txtTest.CssClass`，但只回来`inputText`上课。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:23:53.190

您将无法检索此内容，因为甚至没有在请求中提交对样式的更改。ASP.NET 将根据“它所知道的”对象重建对象，即在这种情况下的原始标记。

如果您必须跟踪这一点，那么您将不得不将新类添加到隐藏元素并在代码隐藏中检索它：

```
<input type="hidden" id="addedClasses" name="addedClasses" /> 
```

然后是 jQuery 部分：

```
$('#txtTest').addClass('testClass');
$('#addedClasses').val('testClass'); 
```

在后面的代码上：

```
string addedClasses = Request.Params["addedClasses"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:19:17.093

我能想到的唯一方法是将 TextBox 的类放入`Hidden`带有 javascript 的字段中，并通过 POST 将其发送回服务器。

# c++ - c++中未定义类的成员变量的构造顺序吗？

> ID：12285638
> 
> 赞同：5
> 
> 时间：2012-09-05T16:14:42.417
> 
> 标签：c++

> **可能重复：**
> [成员字段、构造顺序](https://stackoverflow.com/questions/6308915/member-fields-order-of-construction)

如果我的班级有两个这样的成员：

```
class A
{
    int a;
    int b;
    A() {}
}; 
```

和的构造*顺序*是否*未定义*？`a``b`

 *如果我使用`cl`，那么无论我以何种顺序调用构造函数，成员总是按照它们在类中声明的顺序构造。在这种情况下，它总是`a`then `b`，即使我定义了如下构造函数`A`：

```
A() : b(), a() {} 
```

但我假设这只是特定编译器的行为。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T16:16:39.403

不，成员是按照声明它们的顺序构造的。

建议您以相同的顺序排列初始化列表，但您不需要这样做。如果您不这样做，那将非常令人困惑，并且可能导致难以检测的错误。

例子：

```
struct Foo {
    int a; int b;
    Foo() : b(4), a(b) { }  // does not do what you think!
}; 
```

这种构造实际上是未定义的行为，因为您正在读取初始化程序中的未初始化变量`a(b)`。

* * *

标准参考（C++11、12.6.2/10）：

> — 然后，直接基类按照它们出现在 base-specifier-list 中的声明顺序进行初始化（无论 mem-initializers 的顺序如何）。
> 
> — 然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:16:39.107

初始化的顺序与类中的声明顺序相同。

如果构造函数的初始化列表中的顺序不同，那么编译器通常会发出警告。例如对于类：

```
class A {
public:
    A() : b(1), a(b) {}
private
    int a;
    int b;
}; 
```

GCC 将警告：

```
$ g++ -Wall c.cc
c.cc:5: error: expected `:' before ‘int’
c.cc: In constructor ‘A::A()’:
c.cc:6: warning: ‘A::b’ will be initialized after
c.cc:5: warning:   ‘int A::a’
c.cc:3: warning:   when initialized here 
```

这是因为它很容易导致错误。在上面的示例中， 的值`a`将是未指定的。*

# ruby - 红宝石和赛璐珞

> ID：12285639
> 
> 赞同：5
> 
> 时间：2012-09-05T16:14:43.880
> 
> 标签：ruby, concurrency, celluloid

由于一些限制，我想将我当前的项目从 EventMachine/EM-Synchrony 切换到赛璐珞，但我在联系它时遇到了一些麻烦。我正在编写的项目是一个网络收割机，它应该尽可能快地抓取大量页面。

为了基本了解赛璐珞，我在本地 Web 服务器上生成了 10.000 个虚拟页面，并希望通过这个简单的赛璐珞片段抓取它们：

```
#!/usr/bin/env jruby --1.9

require 'celluloid'
require 'open-uri'

IDS = 1..9999
BASE_URL = "http://192.168.0.20/files"

class Crawler
  include Celluloid
  def read(id)
    url = "#{BASE_URL}/#{id}"
    puts "URL: " + url
    open(url) { |x| x.read }
  end
end

pool = Crawler.pool(size: 100)

IDS.to_a.map do |id|
   pool.future(:read, id)
end 
```

据我了解赛璐珞，期货是获得触发请求响应的方法（类似于 EventMachine 中的回调），对吧？另一件事是，每个参与者都在自己的线程中运行，所以我需要某种批处理请求，因为 10.000 个线程会在我的 OSX 开发机器上导致错误。

所以创建一个池是要走的路，对吧？但是：上面的代码遍历了 9999 个 URL，但只有 1300 个 HTTP 请求被发送到 Web 服务器。因此，限制请求和遍历所有 URL 会出现问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:13:03.557

一旦创建了所有期货，您的程序可能就会退出。使用赛璐珞，未来将开始执行，但在你对未来对象调用 #value 之前，你不能保证它会完成。这也适用于池中的期货。可能您需要做的就是将其更改为以下内容：

```
 crawlers = IDS.to_a.map do |id|
    begin
      pool.future(:read, id)
    rescue DeadActorError, MailboxError
    end
  end

  crawlers.compact.each { |crawler| crawler.value rescue nil } 
```

# php - 如何格式化数组以通过 Drupal 中的 Rest API 更新问题？

> ID：12285640
> 
> 赞同：0
> 
> 时间：2012-09-05T16:14:43.567
> 
> 标签：php, api, drupal, rest, redmine

我想添加一个关于 Redmine 问题的注释。我为此使用 Drupal 和 PHP。

我可以获取数据并发布问题，因此我知道通过 API 与 Redmine 的连接很好。

我在[http://www.redmine.org/projects/redmine/wiki/Rest_api查看了 Redmine API 的文档](http://www.redmine.org/projects/redmine/wiki/Rest_api)

在问题创建的底部，它提供了以下格式：

```
PUT /issues/[id].json
{
"issue": {
  "subject": "Example issue (was: Test issue)",
  "notes": "Changing the subject" 
}
} 
```

现在，例如，当我创建一个问题时，该数组是一个简单的一维数组。我需要为这个问题更新过程传递的数据数组的结构是什么。

我的问题创建数组的示例：

```
$redmineIssueArray = array();
$redmineIssueArray['project_id'] = 2;
$redmineIssueArray['subject'] = $typeBug . " $date";
$redmineIssueArray['priority_id'] = 4;
$redmineIssueArray['description'] = $bugDesc;
$redmineIssueArray['assigned_to_id'] = 2; 
```

请注意，从 Drupal 中的 redmine 模块更新问题的功能是：

```
redmine_rest_api_issue_update(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:40:51.410

如果您不必使用 Drupal 函数，请使用[PHPActiveResource](https://github.com/lux/phpactiveresource)并且更新问题将很容易，例如：

```
// find and update an issue
$issue->find(2);
echo $issue->subject;
$issue->set('subject', 'This is the new subject')->save ();
// update status
$issue->set('status_id', 2)->save(); 
```

# php - 将推送聊天消息保存到数据库中

> ID：12285648
> 
> 赞同：2
> 
> 时间：2012-09-05T16:15:14.257
> 
> 标签：php, mysql, chat, pusher

我正在使用推送服务（http://pusher.com）构建一个聊天小部件，我需要将用户发送的所有消息保存到数据库中，以便在一段时间后可以访问它。我正在使用 mysql 数据库，我想到的唯一方法是每次触发聊天消息事件时都进行新的插入，但恐怕它不会像应有的那样快。

在这种情况下，您希望使用哪些数据库和技术来保存聊天消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T18:53:58.737

您可以采取的一种方法是使用 MySQL 的`INSERT DELAYED`. 执行此操作时，客户端不必等待插入完成。相反，服务器将对插入进行排队并尽可能执行它们。因此，处理聊天的进程/线程将不必等待它们。但是您仍然可以将聊天记录存储在可以检索的数据库中。假设您正在使用推送器在“实时”消息进入时共享它们，因此不需要立即访问聊天历史记录，这可能对您有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:45:59.120

除非您打算创建一个包含数千人的聊天系统，否则我相当确定结构合理的 mysql 解决方案可以毫无问题地处理这个问题。在我工作的地方，我们有一个基于 php 和 mysql 的 Intranet 聊天解决方案，它运行完美（对于我们约 100 人的中型团队）。

我确实有一个建议是确保您了解 mysql 索引。确保您的聊天系统真正充分利用索引。您可以通过这种方式大大提高性能。

如果并发真的成为你的问题，我听说很多人对 node.js 有很好的体验。但是，如果您对 php 和 mysql 感到满意，我会说先走那条路。

快乐编码！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-14T16:01:37.963

（我知道这很旧，但是）这里有一个有趣的演示（尽管在 Rails 中），它可以满足您的要求。它包括一个可能的模式。 [https://github.com/dipth/pusher_demo](https://github.com/dipth/pusher_demo)

# c# - OpenGL/TK TexSubImage2D 不能修改透明像素

> ID：12285650
> 
> 赞同：0
> 
> 时间：2012-09-05T16:15:27.190
> 
> 标签：c#, opengl, transparency, textures, opentk

我已经用这种方法加载了一个图像：

```
 public static int LoadTexture(string file)
    {
        Bitmap bitmap = new Bitmap(file);

        int tex;

        GL.GenTextures(1, out tex);
        GL.BindTexture(TextureTarget.Texture2D, tex);

        System.Drawing.Imaging.BitmapData data = bitmap.LockBits(new System.Drawing.Rectangle(0, 0, bitmap.Width, bitmap.Height),
            System.Drawing.Imaging.ImageLockMode.ReadOnly, System.Drawing.Imaging.PixelFormat.Format32bppArgb);

        GL.TexImage2D(TextureTarget.Texture2D, 0, PixelInternalFormat.Rgba, data.Width, data.Height, 0,
            OpenTK.Graphics.OpenGL.PixelFormat.Bgra, PixelType.UnsignedByte, data.Scan0);

        bitmap.UnlockBits(data);

        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)TextureMinFilter.Linear);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMagFilter, (int)TextureMagFilter.Linear);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapS, (int)TextureWrapMode.Repeat);
        GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapT, (int)TextureWrapMode.Repeat);

        Console.WriteLine("[ImageDisplay] Loaded image: " + file);

        return tex;
    } 
```

我需要修改此图像中的像素，所以我使用了这个：

```
GL.TexSubImage2D(TextureTarget.Texture2D, 0, X, Y, 1, 1, OpenTK.Graphics.OpenGL.PixelFormat.Rgb, PixelType.UnsignedInt, new uint[] { 0xFFFF0000 }); 
```

我的问题是只有非透明像素变为红色，透明像素根本没有变化。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:35:59.453

```
OpenTK.Graphics.OpenGL.PixelFormat.Rgb, PixelType.UnsignedInt, new uint[] { 0xFFFF0000 } 
```

您声明的[像素传输格式](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_format)是`GL_RGB`. 这意味着 3 个组件：按顺序排列的红色、绿色和蓝色。

[像素传输类型](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_type)是，这`GL_UNSIGNED_INT`意味着***每个分量***都是一个无符号整数。因此，您应该为每个像素提供一个由 3 个无符号整数组成的数组。

如果您希望每个组件都是 unsigned *byte*，那么您应该使用它作为您的类型。你的数组应该是一个无符号字节数组。

# .net - wso2 WSRegistryService .Net 客户端

> ID：12285659
> 
> 赞同：0
> 
> 时间：2012-09-05T16:16:12.447
> 
> 标签：.net, wso2, wso2carbon

您好，我正在尝试通过“AdminServiceWSDLs”向 ESB 添加新的代理服务？

我唯一能做的是：

```
using wso2.localhost;
...
WSRegistryService service = new WSRegistryService(); 
```

你能给我一个简单的例子来说明如何向 ESB 添加新的代理服务吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:04:11.953

如果您需要添加代理服务，您可以通过 UI 轻松完成。请参考以下[链接](http://wso2.org/project/esb/java/4.0.3/docs/user_guide.html#Proxy)。如果您的要求是以编程方式实现它，您需要查看这个[线程](http://wso2.org/forum/thread/10598)。请注意线程中的源代码位置现在可能已更改。

# apache - 从 *.example.com 和 example.com 重定向到 foo.example.com

> ID：12285660
> 
> 赞同：0
> 
> 时间：2012-09-05T16:16:14.213
> 
> 标签：apache, .htaccess, redirect

如何将所有用户从 *.example.com 和 example.com 重定向到 foo.example.com？

我的服务器正在使用 Apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:22:12.067

假设您想将 *.example.com/xyx 重新路由到 foo.example.com/xyz，您可以这样做。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^foo\.example\.com$ [NC]
RewriteRule ^(.*)$ http://foo.example.com/$1 [R=301,L] 
```

尽管我应该注意到，如果您将它们指向不同 IP 地址上的站点，您可能需要考虑通过 DNS 配置进行此类域范围的重定向。

# jquery - 使用内联块时jquery显示/隐藏

> ID：12285665
> 
> 赞同：9
> 
> 时间：2012-09-05T16:16:23.833
> 
> 标签：jquery

我有一些看起来像这样的 HTML 和 CSS：

```
<div id="TheContainer">
<div class="MyDivs"></div>
<div class="MyDivs" id="ThisDiv"></div>
</div>

#TheContainer{text-align:center;}
.MyDivs{margin:0px auto;display:inline-block;}
#ThisDiv{display:none;} 
```

我正在使用`inline-block`and margin:0px auto 以便`MyDivs`它们居中在`TheContainer`. 问题是当我这样做时：

```
$('#TheContainer').children().hide();
$('#ThisDiv').show(); 
```

then`ThisDiv`不再居中，因为显示从无变为块而不是像我在 CSS 定义中那样的内联块。

我知道我可以写作`.css('display','none')`，`.css('display','inline-block')`但我想知道是否有办法通过保持`.show()`

感谢您的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:20:08.260

您可以对 jQuery 进行扩展...

```
$.fn.showInlineBlock = function () {
    return this.css('display', 'inline-block');
}; 
```

用途是：

```
$('#whatever').showInlineBlock(); 
```

[jsFiddle 演示](http://jsfiddle.net/et2mZ/)

# java - 使用 IP 多播发现正在运行的 ActiveMQ 消息代理

> ID：12285666
> 
> 赞同：0
> 
> 时间：2012-09-05T16:16:24.597
> 
> 标签：java, delphi, activemq, multicast

[Apache ActiveMQ](http://activemq.apache.org/)代理支持使用[IP 多播](http://en.wikipedia.org/wiki/Multicast)进行[发现](http://activemq.apache.org/discovery.html)。此功能在默认的“演示”配置中激活（见下文）。我想用其他语言（Delphi / Free Pascal）实现发现功能。网络上是否有一些最小的代码示例或介绍页面显示如何在 Java 中实现？

如果我理解正确，多播将触发消息代理的应答，其中包含有关消息代理的 IP 和端口的信息。但我无法弄清楚客户端需要指定哪个端口（ActiveMQ[文档](http://activemq.apache.org/multicast-transport-reference.html)）。

但是我看不到多播客户端应该使用哪个端口。

```
<!-- Create a TCP transport that is advertised on via an IP multicast
              group named default. -->
  <transportConnector name="openwire" uri="tcp://localhost:61616"
                      discoveryUri="multicast://default"/>
  ... 
```

* * *

更新：我找到了[http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html)并尝试使用这个示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:24:31.783

最好的文档来源始终是代码本身。如果您查看 SVN for ActiveMQ 的源代码并浏览 org.apache.activemq.transports.discovery 包，您应该非常了解发现位的工作原理，默认端口也都在代码中。

> svn co [https://svn.apache.org/repos/asf/activemq/trunk](https://svn.apache.org/repos/asf/activemq/trunk) activemq

# java - 强制用户不要在java中的jTextField中输入数字条目

> ID：12285667
> 
> 赞同：0
> 
> 时间：2012-09-05T16:16:33.417
> 
> 标签：java

如何为用户锁定键盘，使用户无法在 a 中输入任何数值`JTextField`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:30:28.287

```
javax.swing.InputVerifier 
```

适用于大多数简单的任务。

这是我前几天敲掉的一个：

```
public class TexFieldValidator extends InputVerifier {

   String regex;
   String errorMsg;
   JDialog popup;

   public TexFieldValidator(String regex, String errorMsg) {
      this.regex = regex;
      this.errorMsg = errorMsg;
   }

   @Override
   public boolean verify(JComponent input) {
      boolean verified = false;
      String text = ((JTextField) input).getText();
      if (text.matches(regex)) {
         input.setBackground(Color.WHITE);
         if (popup != null) {
            popup.dispose();
            popup = null;
         }
         verified = true;
      } else {
         if (popup == null) {
            popup = new JDialog((Window) input.getTopLevelAncestor());
            input.setBackground(Color.PINK);
            popup.setSize(0, 0);
            popup.setLocationRelativeTo(input);
            Point point = popup.getLocation();
            Dimension dim = input.getSize();
            popup.setLocation(point.x - (int) dim.getWidth() / 2, point.y + (int) dim.getHeight() / 2);
            popup.getContentPane().add(new JLabel(errorMsg));
            popup.setUndecorated(true);
            popup.setFocusableWindowState(false);
            popup.getContentPane().setBackground(Color.PINK);
            popup.pack();
         }
         popup.setVisible(true);
      }

      return verified;
   }
} 
```

[从这里](http://www.javalobby.org/java/forums/t20551.html)偷来的。

使用示例：

```
iDTextField.setInputVerifier(new TexFieldValidator("[a-zA-Z0-9]{3}", "ID must be 3 alphanumerics.")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:21:52.007

您可以为此目的使用[DocumentFilter或](http://download.oracle.com/javase/1.7/docs/api/javax/swing/text/DocumentFilter.html)[JFormattedTextField](http://download.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)。

# design-patterns - 我们可以说外观和适配器在设计模式上或多或少相同吗？

> ID：12285669
> 
> 赞同：2
> 
> 时间：2012-09-05T16:16:37.330
> 
> 标签：design-patterns

```
Can we Say facade and Adapter are more or less in design patterns ? 
```

维基百科将其解释为：-

```
 Adapter Converts one interface to another so that it matches what the client is 
 expecting while Facade Provides a simplified interface. 
```

查看 wiki [http://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)中的 UML 表示和适配器模式[http://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)我无法区分它们。有人可以解释一下两者的主要区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:22:45.187

设计模式将`Adapter`一个类接口“转换”为另一个客户期望/可以使用的接口。即它促进了与不兼容接口的“合作”。
即将一个类的现有接口改编成客户端可以使用的接口*。*

设计模式为系统的`Facade`一组接口提供了统一的接口。它使调用代码更容易在外观上操作系统（外观这个词来自法语，字面意思是“正面”或“正面”；外观或外观通常是建筑物的一个**外侧**，但不总是，前面。为了隐藏不那么令人愉快或可信的现实而保持的外表）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:22:31.823

专门用于当`Adapter`您需要使类适应特定接口时。

这`Facade`是关于将杂乱的界面隐藏在一个简单的界面后面，该界面可以满足您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:48:43.357

A`Facade`可以是 an `Adapter`，反之亦然，但它们通常具有不同的意图。A`Facade`通常用于 API 以降低使用更简单功能的障碍。而一个`Adapter`有助于弥合需要通信的两个不兼容接口之间的差距。An`Adapter`还可以实现两个系统的解耦，因此它们每个都只需要依赖于`Adapter`接口。

# jquery - jQuery悬停不能按需要工作

> ID：12285675
> 
> 赞同：0
> 
> 时间：2012-09-05T16:16:40.843
> 
> 标签：jquery

当悬停在幻灯片上时，我想让轮播的箭头出现和消失。我已经尝试过了，但没有太大成功：

```
$("#slideshow").hover(function(){$('.control').fadeOut(500);$('control').fadeIn(500);}); 
```

[完整代码在这里](http://jsfiddle.net/asWeb/EsGLn/4/)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:18:24.850

我认为您之前`.control`在`.fadeIn(...)`通话中错过了一个点。

此外，您可以稍微简化代码并消除错误。

```
$('.control')
    .fadeOut(500)
    .fadeIn(500); 
```

当然，这只会“闪烁”控件-有关正确功能，请参见@AndrewR 的答案 =)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:23:47.403

我认为您使用错误的语法来`hover()`执行您想做的事情。hover() 方法接受两个回调，一个用于 onmouseover 事件（悬停），一个用于 onmouseout 事件（关闭悬停）。

```
$('#slideshow').hover(
    function(){
        $('.control').fadeIn(500);
    },
    function(){
        $('.control').fadeOut(500);
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:19:40.060

只需将您的`.fadeOut()`和`.fadeIn()`调用链接在一起即可。您不想无缘无故地选择相同的元素集两次。

```
$('.control').fadeOut(500).fadeIn(500); 
```

# css - 更改文本原点和方向 - CSS

> ID：12285686
> 
> 赞同：1
> 
> 时间：2012-09-05T16:17:26.067
> 
> 标签：css

我想如果这在 CSS 中是可能的。看，我有一个文本“这是我的文本”。我知道如何使用`float: right`or`text-align right`或来正确定位它`direction:rtl`。但是是否有可能修复文本原点然后方向？我的话应该是这样的；

```
 txet ym si sihT 
```

浮动在页面的右侧。如果这不能用纯 CSS 完成，还有什么其他可能性？

`transform`注意：我不想要可以使用各种属性完成的镜像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:27:01.647

```
<p>This is my text</p> 
```

CSS

```
p {
    unicode-bidi:bidi-override;
    direction:rtl;
} 
```

输出

txet ym si sihT

# google-maps-api-3 - 旋转谷歌地图图标导致裁剪

> ID：12285689
> 
> 赞同：2
> 
> 时间：2012-09-05T16:17:37.060
> 
> 标签：google-maps-api-3, google-maps-markers

我正在使用内置的 google.maps.SymbolPath.FORWARD_CLOSED_ARROW 图标。如果我使用旋转属性，箭头会在地图上被裁剪。我怎样才能防止这种情况？我尝试使用 anchor 和 scale 属性，但这些并没有影响问题。

这是代码：

```
var cp2 = new google.maps.Marker({
    position: new google.maps.LatLng(somelat, somelng),
    title: "testtitle",
    icon: {
        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
        rotation: 270,
        scale: 3
    }
});
cp2.setMap(map); 
```

# javascript - 如何在 IE9 中使用 JavaScript 重置/删除样式属性？

> ID：12285690
> 
> 赞同：0
> 
> 时间：2012-09-05T16:17:39.140
> 
> 标签：javascript, internet-explorer-9

我有一个使用[Prototype JS 框架](http://www.prototypejs.org/)的非常简单的网页微调器：

框架`nav`：

```
Event.observe(
    'doit',
    'click',
    function(){
      parent.window.frames.cont.spinner.removeAttribute('style');
    },
    false); 
```

框架`cont`（这是 中的第一个元素`<body>`）：

```
<div id="spinner" style="display: none;"></div> 
```

CSS：

```
#spinner {
    width: 50px;
    height: 50px;
    position: fixed;
    top: 50%;
    left: 50%;
    background: url(spinner.gif) transparent no-repeat center;
    margin-left: -25px;
    margin-top: -25px;
    z-index: 2;
} 
```

`<div>`很简单，它是一个以框架为中心的固定位置`cont`，并在浏览器加载页面时隐藏（也是为了避免在非 JS 浏览器中出现问题）。当用户单击`nav`框架中的按钮时，该`style`属性将被删除，并且用户会看到微调器，直到下一页接管。这在 Firefox 中工作得很好，但 IE 9 拒绝工作。这是我从他们的标准`F12`界面中发现的：

*   只有一个具有 ID 的元素`spinner`。
*   运行`parent.window.frames.cont.spinner.removeAttribute('style')`或`parent.window.frames.cont.document.getElementById("spinner").removeAttribute("style")`在*控制台*选项卡中返回`true`但会导致*下一个*元素被隐藏！这不会以任何明显的方式反映在*HTML*选项卡中 - 隐藏的元素仍然有`style="display: block;"`.

我尝试使用 Prototype 的[show()](http://www.prototypejs.org/api/element/show)，它在 Firefox 中有效，但在 IE9 中无效...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:21:00.327

当添加/删除类更容易时，为什么要删除样式属性？无论如何，如果您要做的只是显示/隐藏一个 div，为什么不只更改“显示”样式属性呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:57:26.990

无需尝试删除样式属性，只需将“display”属性设置为“block”即可。

```
document.getElementById("spinner").style.display = "block" 
```

# php - 创建递归类别树函数

> ID：12285694
> 
> 赞同：6
> 
> 时间：2012-09-05T16:17:44.830
> 
> 标签：php, tree, categories

我有一个包含一堆类别的数据库，有些是孩子：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => Home Improvement
            [slug] => Home-Improvement
            [parent] => 
            [user_id] => 1
            [order] => 1
        )

    [1] => Array
        (
            [id] => 2
            [name] => Asbestos Abatement & Removal
            [slug] => Asbestos-Abatement-Removal
            [parent] => 1
            [user_id] => 1
            [order] => 8
        )

    [2] => Array
        (
            [id] => 3
            [name] => Asphalt & Asphalt Products
            [slug] => Asphalt-Asphalt-Products
            [parent] => 1
            [user_id] => 1
            [order] => 9
        )

    [3] => Array
        (
            [id] => 4
            [name] => Bathroom
            [slug] => Bathroom
            [parent] => 1
            [user_id] => 1
            [order] => 10
        )

    [4] => Array
        (
            [id] => 5
            [name] => Kitchen Cabinets
            [slug] => Kitchen-Cabinets
            [parent] => 1
            [user_id] => 1
            [order] => 11
        )

    [5] => Array
        (
            [id] => 6
            [name] => Ceilings
            [slug] => Ceilings
            [parent] => 1
            [user_id] => 1
            [order] => 12
        )

    [6] => Array
        (
            [id] => 7
            [name] => Cleaning
            [slug] => Cleaning
            [parent] => 1
            [user_id] => 1
            [order] => 13
        )

    [7] => Array
        (
            [id] => 8
            [name] => Closet Organizers & Accessories
            [slug] => Closet-Organizers-Accessories
            [parent] => 1
            [user_id] => 1
            [order] => 14
        )

    [8] => Array
        (
            [id] => 9
            [name] => Concrete
            [slug] => Concrete
            [parent] => 1
            [user_id] => 1
            [order] => 15
        )

    [9] => Array
        (
            [id] => 10
            [name] => Contractors & Service Providers
            [slug] => Contractors-Service-Providers
            [parent] => 1
            [user_id] => 1
            [order] => 16
        ) 
```

我试图输出的是这样的：

```
<ul>
    <li>Parent
        <ul>
            <li>Child</li>
        </ul>
    </li>
    <li>Parent with no Children</li>
</ul> 
```

我正在尝试在 PHP 中构建递归树脚本，但我被卡住了。这是我到目前为止所拥有的。我被困在 else: 和 endif; 之间该怎么做。在 foreach 中。（我使用这种语法只是为了在这里更容易阅读。）有什么建议吗？

```
echo $this->categories->makeTree(0, $this->db->get('categories')->result_array());

public static function makeTree($parent, $array)
{
  if (!is_array($array)) return '';

  $output = '<ul>';

  foreach($array as $key => $value):
    if ($value['parent'] == $parent):
        $output .= '<li>';

        if ($value['parent'] == NULL):
            $output .= $value['name'];
        else:

        endif;
    endif;

    $output .= '</li>';
  endforeach;

  $output .= '</ul>';
  return $output;
} 
```

**编辑 1**

尽管我在 foreach 循环中有一个数据库调用，但我能够让它工作，这可能不是最好的主意：

```
public function makeTree($parent, $array)
{
  if (!is_array($array)) return FALSE;

  $output = '<ul>';

  foreach($array as $key => $value):
    if ($value['parent'] == $parent):
        $output .= '<li>';

        if ($value['parent'] == NULL):
            $output .= $value['name'];

            $subcategories = ci()->db->get_where('categories', array('parent' => $value['id']));

            if ($subcategories->num_rows() > 0):
                $output .= $this->makeTree($value['id'], $subcategories->result_array());
            endif;
        else:
            $output .= $value['name'];
            $output .= '</li>';
        endif;
    endif;

  endforeach;

  $output .= '</ul>';
  return $output;
} 
```

**编辑 2**

这是我的最终解决方案，重用数组而不是执行数据库查询：

```
public function makeTree($parent, $array)
{
  if (!is_array($array) OR empty($array)) return FALSE;

  $output = '<ul>';

  foreach($array as $key => $value):
    if ($value['parent'] == $parent):
        $output .= '<li>';

        if ($value['parent'] == NULL):
            $output .= $value['name'];

            $matches = array();

            foreach($array as $subkey => $subvalue):
                if ($subvalue['parent'] == $value['id']):
                    $matches[$subkey] = $subvalue;
                endif;
            endforeach;

            $output .= $this->makeTree($value['id'], $matches);

        else:
            $output .= $value['name'];
            $output .= '</li>';
        endif;
    endif;

  endforeach;

  $output .= '</ul>';

  return $output;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T08:02:33.853

虽然这似乎已回答，但请看[这里](https://stackoverflow.com/a/11240578/697154)。使用显示的函数，您只需一次迭代即可将平面数据转换为嵌套数据。从该嵌套数据创建 ul-list 非常容易。例如：

```
function nested2ul($data) {
  $result = array();

  if (sizeof($data) > 0) {
    $result[] = '<ul>';
    foreach ($data as $entry) {
      $result[] = sprintf(
        '<li>%s %s</li>',
        $entry['name'],
        nested2ul($entry['children'])
      );
    }
    $result[] = '</ul>';
  }

  return implode($result);
}

echo nested2ul(array(flat2nested( $yourFlatData )); 
```

这种方法的好处是您不必为了找到子元素而一次又一次地重复输入数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:47:10.927

这是我的最终解决方案，重用数组而不是执行数据库查询。如果您有更好的解决方案，请发布！

```
public function makeTree($parent, $array)
{
  if (!is_array($array) OR empty($array)) return FALSE;

  $output = '<ul>';

  foreach($array as $key => $value):
    if ($value['parent'] == $parent):
        $output .= '<li>';

        if ($value['parent'] == NULL):
            $output .= $value['name'];

            $matches = array();

            foreach($array as $subkey => $subvalue):
                if ($subvalue['parent'] == $value['id']):
                    $matches[$subkey] = $subvalue;
                endif;
            endforeach;

            $output .= $this->makeTree($value['id'], $matches);

        else:
            $output .= $value['name'];
            $output .= '</li>';
        endif;
    endif;

  endforeach;

  $output .= '</ul>';

  return $output;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:09:58.133

我通常使用这样的东西，请注意

第一，这段代码使用了已弃用的**mysql_***

第二你应该有一个名为 level 的数据库字段，如果为 NULL 它是主类别，如果它有一个数字，它是该数字作为 id 的类别的子类别

```
function getFamilies($level = 0) {
    $level++;
    $sql = "SELECT id from families WHERE level IS NULL";
    if (mysql_num_rows($result) > 0) {
        echo "<ul>";
            while($row = mysql_fetch_assoc($result)) {
                echo "<li>".$row['id'];
                    getSubFamilies($level, $row['id']);
                echo "</li>";
            }
        echo "</ul>";
    }
}

function getSubFamilies($level, $id) {
    $level++;
    $sqlSubFamilies = "SELECT id  FROM families WHERE level = ".$id."";
    $resultSubFamilies = mysql_query($sqlSubFamilies);
    if (mysql_num_rows($resultSubFamilies) > 0) {
        echo = "<ul>";
            while($rowSubFamilies = mysql_fetch_assoc($resultSubFamilies)) {
                echo "<li>".$rowSubFamilies['id'];
                    getSubFamilies($level, $rowSubFamilies['id']);
                echo "</li>";
            }
        echo "</ul>";
    }
}

getFamilies($level = 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:55:38.183

尝试这个：

```
$cats = $this->db->get('categories')->result_array();

echo $this->categories->makeTree(0, $cats);

public static function makeTree($parent, $array)
{
  if (!is_array($array)) return '';

  $output = '<ul>';

  foreach($array as $key => $value):
    if ($value['parent'] == $parent):
        $output .= '<li>';

        if ($value['parent'] == NULL):
            $output .= $value['name'];
        else:

        endif;
    endif;

    $output .= '</li>';

    $output .= $this->categories->makeTree($value['parent'], $cats);

  endforeach;

  $output .= '</ul>';
  return $output;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-09-07T00:19:23.187

我认为这种使用**匿名函数**的方法非常简单。

```
//--------------------------- PRINT NESTED CATEGORIES
$cats_childs = array();

$q = $db->query("SELECT id, parent, name FROM categories");

while ($r = $db->row($q))
{
    $cats_childs[$r['parent']][$r['id']] = $r;
}

$nested2ul = function($data) use (&$nested2ul, &$cats_childs) {
    if (!empty($data)) {
        echo '<ul>';
        foreach ($data as $r) {
            echo '<li>';
            echo $r['name'];
            $flat2ul($cats_childs[$r['id']]);
            echo '</li>';
        }
        echo '</ul>';
    }
};

echo $nested2ul($cats_childs[0]); 
```

# javascript - 在页面加载时调用多个 Javascript 函数

> ID：12285695
> 
> 赞同：0
> 
> 时间：2012-09-05T16:17:47.747
> 
> 标签：javascript, html, jsp

我一直在尝试在页面加载时从 html 正文中调用 4 个 JS 函数。这些函数中的每一个都调用 JSP servlet 从数据库中获取数据并填充到相应的列表框中。我正在尝试预填充列表框的编辑屏幕上工作。

我正在尝试这样的事情：

```
 //call the JS to prepopulate the metadata
    function populateOnPageLoad(){
        populateA(); 
        populateB();
        populateC();
        populateD();
    } 
```

我还尝试在 body onload 中直接调用所有 4 个函数。似乎它只能调用 populateD() 并在列表框中显示数据。我已经在插入操作中测试了其中的每一个，并且 JSP servlet 工作正常。我什至更改了这些函数的顺序以检查它是否只调用最后一个函数，但它似乎并没有那样工作。

这可能是什么问题以及可能的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:26:02.917

您应该查看`window.onload`而不是`document.body.onload`.
此外，而不是设置`window.onload`使用`window.addEventListener('load',populateOnPageLoad,false);`或

```
window.addEventListener('load',populateA,false);
window.addEventListener('load',populateB,false);
window.addEventListener('load',populateC,false);
window.addEventListener('load',populateD,false); 
```

如果您使用 ajax，请确保您没有覆盖`XMLHttpRequest`以前调用的对象（即确保它们不共享范围/变量名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:43:25.587

我在加载页面时将记录 ID（我正在尝试编辑）传递给 populateOnPageLoad()。当我这样做时，它将先前记录中的相关数据填充到相应的列表框中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:10:27.530

尝试这个，

```
function populateOnPageLoad(){
    setTimeOut(populateA(),500); 
    setTimeOut(populateB(),500);
    setTimeOut(populateC().500);
    setTimeOut(populateD(),500;
} 
```

# c# - 使用 ASP.NET Web Api 导出文件下载

> ID：12285698
> 
> 赞同：0
> 
> 时间：2012-09-05T16:17:54.850
> 
> 标签：c#, jquery, ajax, asp.net-mvc-4, asp.net-web-api

我正在将 CSV 导出添加到使用 ASP.NET Web API 实现的服务中。

目前我有一个视图模型（包含结果过滤的详细信息），它通过 ajax POST 请求发送到 Web API 控制器。然后在 UI 上呈现 JSON 响应。这工作得很好。

现在我想将相同的视图模型发布到另一个控制器，让我们命名它`ExportController`。然后我需要将文件下载给用户。

我的点子：

1.  将视图模型发布到服务，将其存储在持久存储（数据库或内存缓存，无关紧要）中的某个位置，并将导出令牌返回给用户。（出口令牌是指用于识别此特定出口的一条信息）

2.  然后使用 URL 中的令牌执行`GET`来自 的请求，`iframe`并获取文件作为对该请求的响应。

我现在在 UI 上拥有的东西：

```
var exportUrl = "URL to ExportController"
$.ajax(exportUrl, {
   type: 'POST',
   contentType: 'application/json',
   data: postData
})
.success(function(data) {
    // this should download the file
    $('#export').attr('src', exportUrl + '&exportToken=' + data);
}); 
```

这里的“#export”是`iframe`用于下载文件的元素。

这是导出后端的原始草图：

```
public class ExportController : ApiController
{
    ...

    // GET /api/Export
    public string Get(string exportToken)
    {
        // get filters from DB
        var filters = ExportArgumentProvider.GetFilters(exportToken);

        // get data
        var result = DataSource.GetData(filters);

        return result;
    }

    // POST /api/Export
    public string Post(FilterInput filters)
    {
        var guid = Guid.NewGuid();

        // save filters to DB
        ExportArgumentProvider.AddFilter(guid, filters);

        return guid.ToString();
    }
} 
```

*这个伪代码显然是行不通的，请忽略Get方法的返回类型。*

**所以，问题：**

1.  是否有更简单的方法来进行此导出（不将过滤器状态存储在数据库中）。
2.  这种方法是否合理（状态存储在数据库等中），还是应该以其他方式完成此类任务？
3.  ASP.NET Web API 是否适合此类任务，或者我应该求助于通常的 ASP.NET 控制器进行导出？

**更新**：发布到服务器的数据可能超过 URL 长度限制，因此通过 GET 请求传递它并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:59:06.770

我建议将这两个请求合二为一：使“导出” URL 采用所有参数，以便“即时”执行导出。有一点限制，您只能将这么多数据填充到查询字符串中，因此这可能对您不起作用，但我建议您这样做（因为它会大大简化问题）。

假设“postData”（在组件的第一部分）“足够小”，那么您只需将其序列化为您的“导出”URL 的查询字符串，然后将端点组合在一起（以便导出 URL 处理过滤数据/等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:01:55.133

对于这个项目，我放弃了创建干净的 RESTful 后端并转换`ExportController`为通常的 MVC 控制器。然后我能够在`Post`方法中更改这一行

```
ExportArgumentProvider.AddFilter(guid, filters); 
```

进入

```
Session[exportId] = filters; 
```

`Get`并用该方法做同样的事情。

我仍然认为在数据库中存储过滤器的方法要好得多，但是

1.  我在这里并不需要 REST API。
2.  它在代码中引入了太多的开销，比我想添加的“只是为了 API 的纯度”要多得多。

# google-bigquery - 使用 bq 命令行工具运行批处理查询

> ID：12285699
> 
> 赞同：1
> 
> 时间：2012-09-05T16:17:57.033
> 
> 标签：google-bigquery

似乎该标志`--batch`在`bq query`命令中设置时没有用：

```
bq query "SELECT name,count FROM mydataset.mytable WHERE myfield = 'condition' ORDER BY count DESC LIMIT 6" --batch 
```

上面的命令立即运行查询。

我正在运行 BigQuery CLI 2.0.7 版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:00:28.020

命令标志解析器的工作方式如下：

`bq [global flags] <command> [command flags] [command parameters]`

不幸的是，解析器会默默地丢弃在参数之后指定的标志，所以不清楚这就是你的命令行发生的事情。

要指定`--batch`，您必须立即将其放在“查询”之后，如下所示：

`bq query --batch "SELECT name,count FROM mydataset.mytable WHERE ..."`

由于批处理模式查询可能需要很长时间，我建议您异步运行查询，如下所示：

`bq --nosync query --batch "SELECT name,count FROM mydataset.mytable WHERE ..."`

# api - 亚马逊产品广告 API - 商品无法访问

> ID：12285700
> 
> 赞同：7
> 
> 时间：2012-09-05T16:18:01.293
> 
> 标签：api, amazon-web-services, amazon, amazon-product-api

当我尝试对 Apple Ipod B001F7AHOG 进行查找时，出现错误：

`This item is not accessible through the Product Advertising API.`

任何人都知道这是为什么以及是否有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:03:09.560

有些产品只是从他们的 PA 数据库中丢失。

如果它没有出现在这里：[https](https://asintool.com/asin-lookup.php?text=B001F7AHOG&ip=1) ://asintool.com/asin-lookup.php?text=B001F7AHOG&ip=1你可以打赌它只是不在数据库中。

本周我在某处读到，苹果产品特别有这个问题是有原因的，但我现在找不到。

PS：确保您使用的是正确的国家代码。（'de'，'com'，'co.uk'，'ca'，'fr'，'co.jp'，'it'，'cn'，'es'）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-08T16:46:25.980

他们的 PA 数据库中缺少 Apple ipod。我今天遇到了同样的问题。

这是我发现的：[https ://forums.aws.amazon.com/thread.jspa?threadID=98171#](https://forums.aws.amazon.com/thread.jspa?threadID=98171#)

虽然不是很有用，令人沮丧。

[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ErrorMessages.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ErrorMessages.html)

> AWS.ECommerceService.ItemNotAccessible
> 
> 某些产品无法使用产品广告 API 进行操作或查看。当您在请求中使用的产品 ID 无法通过产品广告 API 获得时，您将收到此错误消息。

# php - 连接到 www.googleapis.com:443 PHP google anaytlics api 的未知 SSL 协议错误

> ID：12285701
> 
> 赞同：3
> 
> 时间：2012-09-05T16:18:12.963
> 
> 标签：php, ssl, curl, google-analytics-api

我正在使用 google anaytlics api，我正在查询 100 个站点的访问量，这个过程大约需要 6 分钟左右。问题是它会运行一些结果，直到出现以下错误。

未捕获的异常“apiIOException”和消息“HTTP 错误：(0) 连接到 www.googleapis.com:443 的未知 SSL 协议错误

我正在使用 oauth 2.0 key ，我在 api 控制台上增加了每秒的用户请求，但仍然没有运气。它一定与 SSL 有关，我只是不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-23T12:01:05.793

由于请求限制，您会收到错误消息。

每个 IP 地址每秒 10 次查询 (QPS)。在 API 控制台中，有一个类似的配额，称为每位用户每 100 秒的请求数。默认情况下，它设置为每个用户每 100 秒 100 个请求，并且可以调整为最大值 1,000。但是对 API 的请求数被限制为每个用户每秒最多 10 个请求。

[您可以从这里](https://developers.google.com/analytics/devguides/config/mgmt/v3/limits-quotas)找到更多信息。

# mysql - 将 mysql db 从 linux 移动到 windows

> ID：12285707
> 
> 赞同：1
> 
> 时间：2012-09-05T16:18:37.127
> 
> 标签：mysql, windows, linux, mysqldump

我正在尝试将我的数据库从 linux 服务器移动到我的 windows 本地计算机。我创建了一个 mysql 转储并尝试在我的 Windows 机器上恢复。当脚本文件（转储文件）在本地机器上执行时，它会引发错误号。[1105.](http://forums.mysql.com/read.php?22,19755,27901#msg-27901)在很多桌子上。任何帮助表示赞赏。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:21:07.780

执行此操作可能会遇到问题 - Windows 使用不区分大小写的文件系统，而 Linux 区分大小写。MyIASM 可能因此而中断 - 表名与文件名直接相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:24:28.963

1) 是的：您绝对可以将 MySql 数据库从 Linux 导入 Windows。是的，转储文件绝对是最好的方法:)

2) 问题是“为什么我在导入时收到 Mysql 错误 1105”？

3）不幸的是，这个错误有点笼统。有许多不同的可能根本原因。

您引用的链接给出了*许多*不同的原因：

*   [http://forums.mysql.com/read.php?22,19755,305448#msg-305448](http://forums.mysql.com/read.php?22,19755,305448#msg-305448)

    例如：

> 就我而言，问题在于引用的字段未标记为唯一，因此返回了此（不相关的）错误消息。

建议：

识别特定的表，将 sql dump 命令直接剪切/粘贴到 mysql 中，然后以这种方式进行调试。

附录：

1) 请剪切/粘贴*确切的*错误信息。

如果可能，请

2) 在导致错误的 dbexport 中剪切/粘贴 SQL 行。

# c# - rtsenable 无法按预期工作

> ID：12285722
> 
> 赞同：1
> 
> 时间：2012-09-05T16:19:45.593
> 
> 标签：c#, serial-port

我编写了一个简单的 winform 应用程序来读取从微控制器接收到 RS232 DE9 串行端口的数据。我需要控制何时发送数据，因此我为此控制了 RtsEnable 属性。程序结构类似于这样。

```
byte[] data = new byte[serialPort1.BytesToRead];
serialport1.RtsEnable = true;

private void serialPort1_DataReceived(object sender,
System.IO.Ports.SerialDataReceivedEventArgs e)
{
    serialPort1.Read(data, 0, data.Length);
    serialport1.RtsEnable = false;
    this.Invoke(new EventHandler(ProcessData));
    serialport1.RtsEnable = true;
} 
```

现在，问题很简单。当 RtsEnable 一开始设置为 true 时，实际上并没有设置为 true。当然，当我调试时，它显示为 RtsEnable = true。但是当我检查电路中的电压时，RTs 仍然不高。

我认为我的电路没有问题，因为我手动检查了 serail 端口的电压输出。所以，我认为这与我的代码有关。

知道为什么会这样吗？提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-24T10:05:01.863

RtsEnable 不设置 RTS，它只允许设置它。要设置（拉低）RTS（以及类似的 DTR），您需要将握手设置为 XonXoff。

例子：

```
 private void btnReset_Click(object sender, EventArgs e)
    {
        comm.MycomPort.RtsEnable = true;
        comm.MycomPort.Handshake = System.IO.Ports.Handshake.XOnXOff;
        comm.MycomPort.RtsEnable = false;
    } 
```

这将暂时将 RTS 拉低（或 DTR，如果您使用 MycomPort.DtrEnable）它将保持低电平直到禁用，因此您可以添加一个计时器以在任何时间保持低电平。

# abap - 获取方法调用的值（如 sy-subrc） - WebDynpro

> ID：12285724
> 
> 赞同：3
> 
> 时间：2012-09-05T16:19:49.963
> 
> 标签：abap, webdynpro

我正在尝试进行错误检查。当用户输入不存在的航空公司代码时，页面应显示错误消息。问题是：我正在使用 BAPI_FLIGHT_GETLIST BAPI，当我执行 EXECUTE_BAPI_FLIGHT_GETLIST 方法并尝试获取 sy-subrc 值时，它总是得到 0。我的代码是这样的：

```
...
 data lo_componentcontroller type ref to ig_componentcontroller .
    lo_componentcontroller =   wd_this->get_componentcontroller_ctr( ).

      lo_componentcontroller->execute_bapi_flight_getlist(
       airline = lv_query                          " bapisflkey-airlineid
*       destination_from =                  " bapisfldst
*       destination_to =                    " bapisfldst
*       max_rows =                          " bapisflaux-bapimaxrow
      ).

  if sy-subrc <> 0.
          wd_this->error_check(
          ).
  endif. 
```

即使运营商代码不存在，错误消息也不会出现。方法 error_check() 也可以正常工作，因为如果我在调用 if 语句之前采用它，则会显示消息。希望我在解释自己。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T19:10:13.163

该 BAPI 没有设置 sy-subrc。它使用与所有 BAPI 一样的返回表。

这是 BAPI 签名。

```
 FUNCTION BAPI_FLIGHT_GETLIST.
*"----------------------------------------------------------------------
*"*"Lokale Schnittstelle:
*"  IMPORTING
*"     VALUE(AIRLINE) LIKE  BAPISFLKEY-AIRLINEID OPTIONAL
*"     VALUE(DESTINATION_FROM) LIKE  BAPISFLDST STRUCTURE  BAPISFLDST
*"       OPTIONAL
*"     VALUE(DESTINATION_TO) LIKE  BAPISFLDST STRUCTURE  BAPISFLDST
*"       OPTIONAL
*"     VALUE(MAX_ROWS) LIKE  BAPISFLAUX-BAPIMAXROW OPTIONAL
*"  TABLES
*"      DATE_RANGE STRUCTURE  BAPISFLDRA OPTIONAL
*"      EXTENSION_IN STRUCTURE  BAPIPAREX OPTIONAL
*"      FLIGHT_LIST STRUCTURE  BAPISFLDAT OPTIONAL
*"      EXTENSION_OUT STRUCTURE  BAPIPAREX OPTIONAL
*"      RETURN STRUCTURE  BAPIRET2 OPTIONAL
*"---------------------------------------------------------------------- 
```

该表`RETURN`将包含您的成功或错误消息，而不是 sy-subrc。

# c++ - 类重构：带参数的继承

> ID：12285725
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:19:51.120
> 
> 标签：c++, qt

我有一个使用这种形式声明的类

```
MainWindow(QWidget *parent) :
        QMainWindow(parent),
        ui(new Ui::MainWindow)
{
    ...
} 
```

我想用这种形式重构它，如下所示：

```
class MainWindow : QMainWindow, ui 
{
    MainWindow(QWidget *parent)
    {
        ...
    }
} 
```

但是我删除了第一种形式的参数。这个参数是什么意思？

如何将它们保持在第二种形式？请向我解释第一种语法（或指向教程）。我不明白带参数的继承。

编辑：

我现在明白了这个问题，该类是在一个单独的 .h 文件中初始化的，我乍一看并没有看到。我想：方法定义之后是继承运算符，而它是成员初始化运算符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:22:32.427

这是构造函数的实现，调用基类构造函数并在初始化列表中初始化数据成员：

```
MainWindow(QWidget *parent) :
        QMainWindow(parent),   // call base class constructor
        ui(new Ui::MainWindow) // initialize data member ui
{
    ...
} 
```

该类很可能继承自`QMainWindow`并具有一个`Ui::MainWindow*`名为 的数据成员`ui`。您的第二个代码片段似乎是声明类的错误尝试。没有这样的“参数继承”，所以你不能做你问的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:21:54.877

首先是`constructor`with `initializer-list initialization`，这个例子很好。第二个示例永远不会编译，因为它的语法错误。看看这个例子[在这个特定的情况下，使用成员初始化列表和在构造函数中赋值有区别吗？](https://stackoverflow.com/questions/4589237/c-initialization-lists)有关第一种语法的解释。

# android - 果冻豆和 setBeamPushUris()

> ID：12285726
> 
> 赞同：1
> 
> 时间：2012-09-05T16:19:57.267
> 
> 标签：android, nfc, android-4.2-jelly-bean, android-beam

我在玩 JB 和 Beam。我使用了 android 提供的示例代码，但我像这样填充了我的 uri 数组：

`NfcAdapter m_adapter = NfcAdapter.getDefaultAdapter(this); Uri uri1 = Uri.parse("http://www.effinnov.com") Uri myuri[] = new Uri[] {uri1}; m_adapter.setBeamPushUris(myuri, this);`

我得到这个错误：

E/NFC (3101)：Uri 需要有方案文件或方案内容

有人可以给我一些建议吗？

此外，我不知道该怎么想：“Android Beam™ 现在支持通过蓝牙传输大量有效负载。当您使用新的 setBeamPushUris() 方法或新的回调接口 NfcAdapter.CreateBeamUrisCallback 定义要传输的数据时，Android 会放手将数据传输到蓝牙或其他替代传输以实现更快的传输速度。这对于大型有效负载（例如图像和音频文件）特别有用，并且不需要设备之间可见的配对。您的应用不需要额外的工作来利用传输通过蓝牙。”

=> 这是否意味着传输不再使用NFC？或者它使用 NFC 它的内容很小而且蓝牙 oterwise？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:23:05.890

> 有人可以给我一些建议吗？

您可以发送本地文件。`http://`您不能直接从URL传送网页内容。

> 这是否意味着传输不再使用NFC？

AFAIK，它不会将 NFC 用于传输内容，其中“传输”我的意思是`setBeamPushUris()`. NFC 无线电用于启动传输，包括设置蓝牙连接。NFC 也用于非光束场景，例如读取 NFC 标签。

# node.js - 在 Express 2.x 的 Route Handler 中访问 Redis

> ID：12285729
> 
> 赞同：1
> 
> 时间：2012-09-05T16:20:03.057
> 
> 标签：node.js, routes, express, redis

我使用 CLI 创建了一个 Express 2.x 应用程序。所以我有一个路由目录和一个 index.js。现在，在 app.js 中，我已连接到 Redis，并且它可以正常工作。

我在这里从 app.js 调用 routes/index.js 文件中的函数：

```
app.post('/signup', routes.myroute); 
```

myroute 函数包含从 Redis 获取密钥的代码。

现在，我得到了 redis 没有定义的错误。如何将 redis 对象从 app.js 传递到 routes/index.js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:23:51.497

**最简单的解决方案**

你可能有一个 require() 函数，它在你的 app.js 中包含了一个 redis 库。只需将该行添加到 index.js 文件的顶部即可。

如果您使用的是 node_redis 模块，只需包含以下内容：

```
var redis = require("redis"),
client = redis.createClient(); 
```

**替代方法**

如果您希望重用现有连接，请尝试将`client`变量传递给 index.js 中的函数：

*应用程序.js*

```
app.post('/signup', routes.myroute(client)); 
```

*index.js*

```
exports.myroute = function(client) {
    // client can be used here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:41:35.053

您使用的是 Express，因此使用的是 Connect，因此请使用 Connect 中间件。特别是会话中间件。Connect 的会话中间件具有存储的概念（存储会话内容的地方）。该存储可以在内存中（默认）或数据库中。因此，使用 redis 存储 (connect-redis)。

```
var express = require('express'),
    RedisStore = require('connect-redis')(express),
util = require('util');

var redisSessionStoreOptions = {
    host: config.redis.host, //where is redis
    port: config.redis.port, //what port is it on
    ttl: config.redis.ttl, //time-to-live (in seconds) for the session entry
    db: config.redis.db //what redis database are we using
}

var redisStore = new RedisStore(redisSessionStoreOptions);
redisStore.client.on('error', function(msg){
    util.log('*** Redis connection failure.');
    util.log(msg);
    return;
});
redisStore.client.on('connect', function() {
    util.log('Connected to Redis');
});

app = express();

app.use(express.cookieParser());  
app.use(express.session({ 
        store: redisStore, 
        cookie: {   path: '/', 
                    httpOnly: true, //helps protect agains cross site scripting attacks - ie cookie is not available to javascript
                    maxAge: null }, 
        secret: 'magic sauce',  //
        key: 'sessionid' //The name/key for the session cookie
    })); 
```

现在，Connect 会话魔术将会话详细信息放在传递到每个路由的“req”对象上。这样，您不需要到处传递 redis 客户端。让 req 对象为您工作，因为无论如何您都可以在每个路由处理程序中免费获得它。

确保你做了： npm install connect-redis

# jquery - 垂直 jquery 动画

> ID：12285734
> 
> 赞同：1
> 
> 时间：2012-09-05T16:20:09.963
> 
> 标签：jquery, jquery-animate, toggle

我希望实现以下目标：

要单击的图像，它将垂直向上动画一定数量的像素（比如说 50）。然后我想再次单击它，然后它会动画回到原来的位置。

到目前为止，我的代码不起作用。

```
$("#content").click(function() {
$("#content").animate(
        {"left": "toggle"},
        "slow");
}); 
```

在这种情况下，内容只是一个 div。我可以做点击按钮的简单教程，它会向左或向右移动 div，但我不能让 div 成为按钮，也不能让它向上或向下。

帮助表示赞赏，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:35:30.320

尝试以下操作：

**HTML**

```
<a href="#" class="moveMe"><img src="..." /><span>Move Me</span>​&lt;/a> 
```

**CSS**

```
.moveMe {
    position: relative;
    display: block;
    width: 200px;
    height: 200px;
    overflow: hidden;
}

.moveMe img {
    position: absolute;
    top: 0;
    left: 0;
    width: 200px;
    height: 250px;
}

.moveMe span {
    position: absolute;
    display: block;
    bottom: 0;
    left: 0;
    padding: 10px 0;
    width: 100%;
    color: #fff;
    text-align: center;
    background: #000;
} 
```

​<strong>JS

```
$(document).ready(function(){
    var toggled = false;
    $('.moveMe').bind('click', function(e){
        e.preventDefault();

        if (toggled){
            $('img', this).stop().animate({top: '0'}, 'slow');
            toggled = false;
        } else {
            $('img', this).stop().animate({top: '-50px'}, 'slow');
            toggled = true;
        }
    });
});​ 
```

[JSFiddle 这里](http://jsfiddle.net/y7d9H/1/)

调整 CSS`width`并`height`根据需要进行调整。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:32:45.710

尝试这个：

```
$(document).ready(function() {
    var up = false;
    $("#content").click(function() {
       var newTop = "+=50px";
       if (up) {
          newTop = "-=50px";
       }           
       $(this).animate({ top: newTop}, "slow");
       up = !up;
    });
}); 
```

编辑：我在`$(document).ready()`上面为你添加了。另请注意，在 jsFiddle 中查看此动画时出现的“条纹”仅限于 jsFiddle，并且不会在页面上经常出现。

祝你好运！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:32:05.477

试试这个：

```
$(function(){
 var originalHeight = $("#content").height();
 $("#content").click(function() {
   var $this = $(this);
   $("#content").animate(
      {height: ($this.height()==originalHeight ? (originalHeight+50):originalHeight)},    
      "slow");
  });
}); 
```

**[演示](http://jsfiddle.net/9DSZf/)**

希望这会有所帮助。

# php - 将多个值传递给 PHP 购物车

> ID：12285735
> 
> 赞同：1
> 
> 时间：2012-09-05T16:20:18.340
> 
> 标签：php, mysql, post, store, cart

首先，这是我的第一个 PHP 商店，所以如果我看起来有点愚蠢，我深表歉意。

简短形式：如何将一组值传递给`$_SESSION`PHP 购物车的变量，而不为页面上的每个项目使用单独的表单？

这是情况。我正在尝试创建一个商店。每个页面上的产品将从 MySQL 数据库中调用，并按成本进行组织。这一切都完美无缺。

我遇到的问题涉及项目选项。其中一些物品，如棒球帽、T 恤和其他各种商品，将有多种尺寸/颜色。我现在组织这个的方式是，MySQL 表中与条件匹配的每个条目都输出到自己的表单中，如果适用，还可以选择大小和颜色。我遇到的问题是，虽然我显然可以将这些发布到另一个页面，但我似乎无法将它们分配给变量。

我很想完全取消表格，并使用这样的超链接：添加到购物车但我不确定这是一个选项，我需要在某些项目上传递尺寸和颜色的值。

我知道这已经做过，而且经常这样做，但我似乎无法让谷歌在这里帮助我。任何建议/提示/技巧将不胜感激。

以下是我当前的代码，使用我开始时认为会很好的多种表单方法：

```
<?php
while($row = mysql_fetch_array($data)){
  echo "<form method='post' action='addcart.php'>";
  echo "<tr><td><img width='100' width='100' src='itemImages/" . $row['itemIMG'] . "'/></td>
  <td>" . $row['itemNAME'] . "</td>
  <td><p id='description'>" . $row['itemDESC'] . "</p></td> <td>";
  //Color dropdown population happens here
  if($row["itemCOL1"] != ' '){
    echo "<select name=colors>";
    $finished = 'false';
    $i = '0';
    $colrow = mysql_fetch_array($coldata);
    while($finished != 'true'){
       if($colrow[$i] != ' '){  
         echo "<option value=" . $colrow[$i] . ">" . $colrow[$i] . "</option>";
         $i++;
    } else {
      echo "</select>";
      $finished='true';
    }
   }
  }
//Size option dropdown handled here
if($row['itemHSIZ'] != "N"){
  echo "<select name=prodSizes>";
  echo "<option value=X-Small>X-Small  </option>";
  //Sizes omitted for brevity
  echo "</select>";
  }
echo "<input type='hidden' name='prodName' value='" . $row['itemNAME'] . "' />";
echo "<input type='submit' name='submit' value='Submit' /></form>";
};
//...and above here.
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:41:11.833

我想您可以将表单打开并在您的 while 循环之外移动表单关闭，以使所有项目都采用一种形式，从而发布一篇文章：

```
<?php
  echo "<form method='post' action='addcart.php'>";
while($row = mysql_fetch_array($data)){
  echo "<tr><td><img width='100' width='100' src='itemImages/" . $row['itemIMG'] . "'/></td>
  <td>" . $row['itemNAME'] . "</td>
  <td><p id='description'>" . $row['itemDESC'] . "</p></td> <td>";
  //Color dropdown population happens here
  if($row["itemCOL1"] != ' '){
    echo "<select name=colors>";
    $finished = 'false';
    $i = '0';
    $colrow = mysql_fetch_array($coldata);
    while($finished != 'true'){
       if($colrow[$i] != ' '){  
         echo "<option value=" . $colrow[$i] . ">" . $colrow[$i] . "</option>";
         $i++;
    } else {
      echo "</select>";
      $finished='true';
    }
   }
  }
//Size option dropdown handled here
if($row['itemHSIZ'] != "N"){
  echo "<select name=prodSizes>";
  echo "<option value=X-Small>X-Small  </option>";
  //Sizes omitted for brevity
  echo "</select>";
  }
echo "<input type='hidden' name='prodName' value='" . $row['itemNAME'] . "' />";
};
echo "<input type='submit' name='submit' value='Submit' /></form>";
//...and above here.
mysql_close($con);
?> 
```

如果这不是你的意思，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:51:57.850

有几种方法可以使用 JavaScript。您可以使用 JavaScript 使用附加到添加到购物车按钮/链接的 onclick 事件对 php 脚本进行 ajax 调用，或者您可以在选择选项时使用 JavaScript 将参数添加到添加到购物车链接。

那有意义吗？

PS不要像那样在p标签上使用id。您希望保持 id 值唯一。

# c# - 将 onCallback 转换为异步

> ID：12285740
> 
> 赞同：1
> 
> 时间：2012-09-05T16:20:34.410
> 
> 标签：c#, multithreading, task, async-await

**我怎么能转换方法：**

```
static void DoWork(Action<bool> onCompleteCallback)
{            
    Task doWork = new Task( ()=>Thread.Sleep(2000) );

    Action<Task> onComplete = (task) => {
        onCompleteCallback(true); // should execute on the main thread
    };

    doWork.ContinueWith(onComplete, TaskScheduler.FromCurrentSynchronizationContext());
    doWork.Start();                        
} 
```

**到异步。**

如果我将其转换为 Async 会有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:24:17.673

使用`async`and的部分原因`await`是为了避免回调。通过使用新的`async`支持，您的方法本身可以返回一个`Task`（或`Task<T>`），您可以直接使用`await`它，完全避免了传入回调的需要。

如果你想使用新的 async/await 设置，你可以这样写：

```
static Task DoWork()
{
     return Task.Run( () => /* Your work */ Thread.Sleep(2000) );            
}; 
```

区别实际上在于您如何称呼它。您只需编写以下代码，而不是使用回调：

```
await DoWork();
// Do your callback work here - it'll automatically be mapped into the right sync context and happen after the above completes 
```

当然，您可以仍然传递回调，并将其写为：

```
static async Task DoWork(Action<bool> onCompleteCallback)
{            
     await Task.Run( ()=>Thread.Sleep(2000) ); // Or use Task.Delay(2000) if you just want a pause...
     onCompleteCallback(true);
}; 
```

这只是违背了使用新支持的目的（在某种程度上），因为主要优点之一是您不再需要传递回调并将您的逻辑“由内而外”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:23:39.947

你通常会写：

```
static async Task DoWorkAsync(Action<bool> onCompleteCallback)
{            
    await Task.Delay(2000); // Simpler than starting a new task
    onComplete(true); // Will automatically be called on the original context
} 
```

请注意，您的方法*可以*返回`void`，但从异步方法返回通常更干净，`Task`以便您可以将其与其他异步操作组合。

如评论中所述，您应该查看是否可以重新设计代码，以便您不需要传递回调。不过，我们需要更多关于调用代码的上下文来为您提供进一步的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:24:16.553

你会这样做：

```
static Task DoWork(Action<bool> onCompleteCallback)
{            
    await Task.Delay(2000);
    onCompleteCallback(true);
} 
```

实际上，它变得更简单。

因为您的函数最初是从 UI 线程调用的，所以您可以调用回调，因为您的方法已经在 UI 线程上执行。

# php - 如何更新 Doctrine MongoDB 中的嵌入文档？

> ID：12285741
> 
> 赞同：6
> 
> 时间：2012-09-05T16:20:39.870
> 
> 标签：php, mongodb, doctrine, doctrine-odm

我有一个嵌入了文档的文档。当我第一次创建一个对象时，一切正常，但是当我尝试更新一个文档时，嵌入的文档没有得到更新。

```
/** @MongoDB\Document */
class DocumentA
{
    /** @MongoDB\EmbedOne(targetDocument="DocumentB") **/
    protected $docB;

    /** @MongoDB\String */
    protected $valueA;
}

/** @MongoDB\EmbeddedDocument */
class DocumentB
{
    /** @MongoDB\String */
    protected $valueB;
} 
```

在我的应用程序中，我查询文档、更新值并将它们保存到数据存储中。

```
// Variant A – Does not work
$document = ... // find from data store
$document->setValueA('Hello World');
$document->getDocB()->setValueB('foo baz');

$om->persist($document);
$om->flush(); 
```

如果我不更新嵌入文档，而是设置一个新文档，一切正常：

```
// Variant B - Does work
$document = ... // find from data store
$document->setValueB('Hello World 2');
$document->setDocB(new DocumentB());
$document->getDocB()->setValueB('foo baz 2');

$om->persist($document);
$om->flush(); 
```

正如我所说，变体 B 工作正常。但是，在我的应用程序中，文档更复杂，每次我必须更新嵌入文档时为嵌入文档创建一个新对象是不切实际的。有没有办法告诉 Doctrine ODM 查看嵌入文档的值来决定是否应该更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:29:58.557

我遇到了完全相同的问题。事实证明，UnitOfWork 似乎无法计算嵌入其他文档的文档变更集，尽管我无法弄清楚为什么......结果，当我比较实际值和原始值时，单位工作显示两者的价值相同。与您的变体 A 交谈，当您

```
$document->getDocB()->setValueB('foo baz'); 
```

工作单元对旧值和新值都显示“foo baz”，并且不会将其识别为更改，因此不会更新它。

无论如何，这会导致一种解决方法：

```
$document = ... // find from data store
$document->setValueA('Hello World');
$docB = $document->getDocB();
$docB->setValueB('foo baz');
$om->detach($docB);
$om->persist($document);
$om->flush(); 
```

这使得工作单元将 $document 的 docB 识别为新设置的文档，并将按预期刷新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:02:47.587

MongoDB 只有原子操作。您有以下选择： 1\. 查询文档，找到合适的子文档，更新整个文档或其部分。优点：简单的逻辑缺点：非原子 2\. 使用位置 $ 运算符是您的子文档在列表中。

# stl - std::map 的预分配 ，如何正确预分配？

> ID：12285742
> 
> 赞同：1
> 
> 时间：2012-09-05T16:20:52.757
> 
> 标签：stl, map

问题：

我正在处理非常大的数据集，最多 8 * 1024 * 1024 个身份；

1.  我预先分配了一个结构数组，由 void * 部分指向。
2.  “空闲”指针被压入堆栈，在使用时弹出，并在从 hash_map 中删除时压入。（这接近 256mb 的内存）

3.  我已经确定大部分系统时间/性能消耗在 std::hash_map 的添加操作中。

结构顺序；std::hash_map 订单数据库；

我真正想做的就是将 MAX_ORDERS 传递给构造函数：

std::hash_map OrderDatabase(MAX_ORDERS);

// 并让它预先分配容器，以便插入/删除不涉及 malloc/free。

建议表示赞赏！我试图严格遵守 STL/C++ 作为旁注。

编辑/更新：

我还尝试了以下方法：

hash_map 地图测试；hash_map::allocator_type MapAlloc = MapTest.get_allocator();

对 *ary = MapAlloc.allocate(MAX_ORDERS); // 这里的问题是 ulonglong 是 const！

想法是将每个都推入堆栈，然后弹出分配，并使用 insert 而不是 maptest[id] = ptr;

//更新2：

1.  创建stack<pair *> pointer_stack，并推送预分配的指针，
2.  弹出一个指针。赋值；
3.  插入 hash_map：
4.  找到该项目，获取指向地址的指针：尽管我调用了 insert，但 hash_map 似乎分配了一个新对。

这使得移除和推送到堆栈是不可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:33:04.237

你必须使用`map`吗？即使您`malloc`使用自定义分配器解决了缓慢的问题，`map`'s 的实现仍然需要多次执行树重新平衡，我认为您无法改变这一点。

如果映射是只读的（即唯一的用途`insert`是在使用前填充它），只需有一个键/索引对的排序数组，并使用二进制搜索。然后搜索将与 一样快`map`，并且消耗的内存要少得多。为方便起见，您始终可以使用`operator[]`和迭代来包装它。

C++11`unordered_map`允许通过`reserve()`方法进行预分配。搜索/插入/删除将花费恒定的时间。但是，它会比 std::map 消耗更多的内存。

# ruby - Ruby 用单反斜杠替换双反斜杠

> ID：12285747
> 
> 赞同：3
> 
> 时间：2012-09-05T16:21:12.573
> 
> 标签：ruby, replace, backslash

我似乎无法在 Ruby 中用单个反斜杠替换双反斜杠。我想我会用另一个反斜杠来逃避反斜杠。

```
1.9.3-p194 :001 > line = "this\\is\\a\\test"
  => "this\\is\\a\\test"
1.9.3-p194 :002 > line.gsub("\\\\", "\\")  # Nothing
  => "this\\is\\a\\test" 
```

那没有用，所以我决定尝试找到至少可以替代的匹配。

```
1.9.3-p194 :003 > line.gsub("\\", "_")  # This works for replacing \\
  => "this_is_a_test"
1.9.3-p194 :004 > line.gsub("\\", "\\")  # Nothing
  => "this\\is\\a\\test" 
```

我仍然找不到在 Ruby 中执行此操作的简单方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:26:22.213

有了这条线...

`line = "this\\is\\a\\test"`

...您实际上创建了一个如下所示的字符串：

`this\is\a\test`

...因为每个都`\\`将被识别为一个斜线。当然，您将无法替换双斜杠，因为您的字符串中没有。

`line.gsub("\\", "_")`line 就是这样做的：用符号替换字符串中的所有*单*斜杠。`_`

`line.gsub("\\", "\\")`只是变相的无操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-08T14:08:12.637

我认为这将完成这项工作：`str.gsub('\\',"\/")`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-07-13T09:51:23.400

这应该适用于用单斜杠替换双斜杠：

```
str.gsub(/\\\\/,"\\/") 
```

# variables - 执行脚本生成控制器时出错：没有这样的属性：f 对于类：SimpleTemplateScript1

> ID：12285752
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:21:30.697
> 
> 标签：variables, grails, groovy

好的，我想在这里为所有人节省一些时间，我猜这不是最聪明的方法。所以在这里我得到了我正在做的事情。请慢慢来，因为我刚出生在圣杯世界。让我知道我的方法没问题，或者是否有更聪明的方法。

我有两张表 abc 和 def。我想根据一些规则将数据从 abc 移动到 def。对于我的项目，我预计将来会出现几种这样的情况（映射表 klm 与 xyz，pqr 与 jkl 等等），因此需要泛化）。

Abc 和 Def 类如下所示

```
class Abc {

String firstAbc
String secondAbc

static constraints = {
    firstAbc(nullable:true)
    secondAbc(nullable:true)
}
}

class Def {

String fieldA
String someRandomField

static constraints = {

}
} 
```

我创建了一个名为 Mappings 的域类（它将作为所有未来映射的父级），如下所示

```
class Mappings {

String inputTable // in this case this will be abc
String inputField // can be firstAbc or secondAbc
String inputValue // some value

String outputTable // def in this case
String outputField // either of fieldA or someRandomField
String outputValue
} 
```

然后我扩展了 Mappings 以创建名为 AbcDefMapping 的特定实例，如下所示

```
class AbcDefMapping extends Mappings {
} 
```

将 abc 与 def 映射的规则存储在 AbcDefMapping 中。一个这样的规则可能是当 abc.firstAbc 为“jack”时，将“jacky”存储在 def.fieldA 中。在这种情况下，映射的值将是 inputTable = abc inputField = firstAbc inputValue = “jack” outputTable = def outputField = fieldA outputValue = “jacky”</p>

我想在 Controller.groovy 中添加一个名为 transform() 的方法来满足需要，以便将来我只需创建域类、映射类并生成控制器。这就是我的变换方法到目前为止的样子。但在我解决手头的问题之前，我不能再进一步了。如果我解决了这个问题，也许我会进入下一步。过去几天的挣扎众所周知

```
def transform(){
    def csplit = []
    def count = 0
    for (i in ${className}){
        if (i == i.toUpperCase() && count!=0){
            csplit.add(count)

        }
        count++
    }
    def inputs = ${className.substring(0,3)}.list() // here instead of manually inserting 3, I need to insert csplit[0].length
    def inputTable = ${className}.substring(0,1).toLowerCase() + ${className}.substring(1,3) //replace 3 with csplit[0].length
    def mappings = ${className}.executeQuery(" from ${className} acm  where acm.inputTable = '" + inputTable + "'  order by acm.inputField, acm.inputValue, acm.outputField, acm.outputValue")
    println mappings

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:42:47.277

`Controller.groovy`模板实际上是一个巨大的字符串。这意味着其中的任何内容`${}`都会被评估并替换到字符串中。

很难猜出你实际上想要做什么。你目前拥有的：

```
def f = 5
def inputs = ${className.substring(0,f)}.list() 
```

将尝试生成与之匹配的代码，但没有变量`f`，只有一个读取的字符串，`def f = 5`它将最终出现在生成的控制器中。当您实际使用 value`5`时，可以正确评估 GString 中的表达式。

# python - Python字典 - 在元组中找到第二个产生最小值的键

> ID：12285754
> 
> 赞同：0
> 
> 时间：2012-09-05T16:21:37.870
> 
> 标签：python, dictionary

> **可能重复：**
> [Python 字典 - 在产生最小值的 2 字符字符串中查找第二个字符](https://stackoverflow.com/questions/12284913/python-dictionaries-find-second-character-in-a-2-character-string-which-yields)

我想提交元组键的第一项并返回该键的剩余项，以最小化元组键值。

例如：

```
d = {('a','b'): 100,
     ('a','c'): 200,
     ('a','d'): 500} 
```

如果我要进去`'a'`，我想回来`'b'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:24:20.873

```
def func(d,y):
    lis=sorted((x for x in d.items() if x[0][0]==y),key=lambda x:x[1])
    return lis[0][0][1]

d ={('a','b'):100,('a','c'):200,('a','d'):500,('b','c'):1000,('b','e'):100} 
```

输出：

```
>>> func(d,'a')
'b'
>>> func(d,'b')
'e' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:27:58.057

这里不需要排序：

```
>>> d ={('a','b'):100,('a','c'):200,('a','d'):500,('b','c'):1000,('b','e'):100}
>>> def func(d, k0):
...     return min((k for k in d if k[0] == k0), key=d.get)[1]
... 
>>> func(d, 'a')
'b'
>>> func(d, 'b')
'e' 
```

这通过使用生成器表达式来仅给出字典中第一个元素与输入匹配的键，并将字典中的关联值用作关联的“权重”（不幸的是，在此上下文中命名为“键”）。字典有一个`.get`方法可以返回给定特定键的值，所以这是很自然的使用方法。

请注意，在平局的情况下，这将返回一个任意键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:26:25.393

```
 def minval(my_dict,var_name):
      return min(filter(lambda x: x[0][0] == var_name,my_dict.items()),key=lambda x:x[1])[0][1]

  print      minval(d,'a') 
```

我认为 Ashwins 的答案可能会更好，因为 pythonic 简单优于复杂标准，而且它们可能在时间尺度上执行相似......他甚至可能更快......

# php - PHP会话页面刷新不起作用

> ID：12285755
> 
> 赞同：2
> 
> 时间：2012-09-05T16:21:45.000
> 
> 标签：php, javascript, html, session, refresh

我设置了一个 php 页面，以便用户可以单击链接进行登录，然后会弹出一个带有登录凭据的弹出窗口 (signin.php)。当他们填写信息并单击登录按钮时，信息在 signinfinal.php 中得到验证。当他们正确登录时，我正在尝试创建一个会话。因此，当他们登录或关闭弹出窗口时，我希望他们所在的主页（index.php）刷新，并且我希望“登录 | 注册”链接更改为“嗨，（用户名）！” 我将所有这些设置为一个名为 '$var' 的 php 变量，变量中有一些 javascript。

奇怪的是，我能够在多个浏览器上注册和登录我的计算机，页面刷新并正确存储了我的会话，但其他用户报告说即使刷新页面后会话也无法正常工作。这是一个棘手的问题，如果有人可以帮助我解决它，我将不胜感激。

这是 index.php 顶部的代码...

```
 <?php 
         // this starts the session 
         session_start(); 
         $var = "";
         $varcontact = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballrealit.com/contact.php\");' class='three'>Contact</a>";
         // echo variable from the session, we set this on our other page 
         if ($_SESSION['userid'] == "") {
                $var = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballrealit.com/register.html\");' class='two'>Register</a> | <a href='JavaScript:newPopup(\"http://www.yourfantasyfootballrealit.com/signin.php\");' class='two'>Sign In</a>";
            } else {
            $var = "Hello, ".$_SESSION['userid'] ."! | " . "<a href=\"http://www.yourfantasyfootballreality.com/logout.php\" class='two'>Log Out</a>";
            }
         ?> 
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <script src="jquery-1.8.1.js"></script>
            <script src="jquery.easing-1.3.pack.js"></script>
            <script src="jquery-easing-compatibility.1.2.pack.js"></script>
            <script src="coda-slider.1.1.1.pack.js"></script>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <link rel="icon" href="http://www.indiana.edu/favicon.ico" />
            <title>YourFantasyFootballReality</title>
            <link rel="stylesheet" type="text/css" href="mystyle.css" />

            <script type="text/javascript">
            // Popup window code
            function newPopup(url) {
                popupWindow = window.open(url,'popUpWindow','height=450,width=600,left=10,top=10,resizable=no,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
            }
    function closeWin() {
        document.write("<p>This is 'myWindow'</p>");
    }
    </script>

        </head>
            <body>
<!--Login and Register links-->
                    <div class="enter">
                        <?=$var?>
                    </div> 
```

这是signin.php的所有代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>Sign In</title></head>
<body onunload="window.opener.location.reload();">
<h1>Sign In</h1>

<form action="signinfinal.php" method="POST">

 <table cellpadding="2" cellspacing="0" border="0">
   <tr>
     <td width="130"> User ID: </td>
     <td width="140"> <input name="UserID" type="text"> </td>
     <td width="300" rowspan="7" valign="top"> </td>
   </tr>
   <tr><td> Password: </td>
     <td><input name="Password" type="password" size="15"></td>
   </tr>
   <tr>
     <td colspan="2"><input type="submit" value="Sign In" name="action">
    </td>
   </tr>
 </table>
</form>
</body>
</html> 
```

这是signinfinal.php的所有代码......

```
<?php

session_start();
//$id = $_SESSION['userid'];
//$pw = $_SESSION['password'];

//this connects to the database
$con = mysql_connect("localhost","yourfan_jeengle","armyjoe");
mysql_select_db("yourfan3_demo", $con);

 //this is the info the user entered stored as variables
 $UserID    = $_POST["UserID"];
 $Password  = $_POST["Password"];
 $Action    = $_POST["action"];

 //this filters throught the variables to check against mysql injections
 $UserID = (filter_var($UserID, FILTER_SANITIZE_STRING));
 $UserID = (filter_var($UserID, FILTER_SANITIZE_URL));
 $Password = (filter_var($Password, FILTER_SANITIZE_STRING));
 $Password = (filter_var($Password, FILTER_SANITIZE_URL));

 //this is the variables that displays errors and correct instructions
 $errors = "";  

 //this gets the password from the userid entered by user
 $result = mysql_query("SELECT Password FROM Users WHERE User_ID = '$UserID'");
 $row = mysql_fetch_array($result);
 $newresult = $row['Password'];

 if (strcmp($Action, "Sign In") == 0) {
 //this what happens when the user enters data for the first time and the info is wrong
 if (($newresult == $Password) && (($UserID) && ($Password))) {
    $greeting = "Welcome, " . $UserID;
    $_SESSION['userid'] = $UserID;
    $what="Log Out";
 } else { 
    $errors .= "<li> Incorrect Credentials!";
    $what="Sign In";
 }
 if ($errors) { $color = "#ffcccc"; $fontColor = "brown"; }
 } else {
    header("Location: http://www.yourfantasyfootballrealit.com/logout.php");
 }

 ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head><title>Sign In</title></head>

<body onunload="window.opener.location.reload();">

<h1>Sign In</h1>

<?=$greeting?>

<form action="signinfinal.php" method="POST">

 <table cellpadding="2" cellspacing="0" border="0">
   <tr>
     <td width="130"> User ID: </td>
     <td width="140"> <input name="UserID" type="text" value="<?=$UserID?>"></td>
     <td bgcolor="<?=$color?>" width="300" rowspan="7" valign="top"><font color=<?=$fontColor?>><ul> <?=$errors?></font> </ul> </td>
   </tr>
   <tr> <td> Password: </td><td><input name="Password" type="password" size="15" value="<?=$Password?>"></td></tr>
   <tr><td colspan="2"><input type="submit" value="<?=$what?>" name="action">
   </tr>
 </table>

</form>
</body>
</html> 
```

如有必要，这是 logout.php 中的内容...

```
<?php
session_start();
session_destroy();
?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Log Out</title>

<script language="JavaScript">
var time = null
function move() {
window.location = 'http://www.yourfantasyfootballreality.com'
}
</script>

<!--<meta http-equiv="REFRESH" content="1;url=http://www.yourfantasyfootballreality.com/"></HEAD>-->
<BODY>

<body onload="timer=setTimeout('move()',000)">
<script language="javascript">
<!--
setTimeout("self.close();",0000)
//-->
</script>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:53:45.077

```
**index.php file**

         if (!isset($_SESSION['userid'])) {
                $var = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballrealit.com/register.html\");' class='two'>Register</a> | <a href='JavaScript:newPopup(\"http://www.yourfantasyfootballrealit.com/signin.php\");' class='two'>Sign In</a>";
            } else {
            $var = "Hello, ".$_SESSION['userid'] ."! | " . "<a href=\"http://www.yourfantasyfootballreality.com/logout.php\" class='two'>Log Out</a>";
            }
         ?>
**signupfinal.php file**

<?php

@session_start();
//$id = $_SESSION['userid'];
//$pw = $_SESSION['password'];

//this connects to the database
$con = mysql_connect("localhost","yourfan_jeengle","armyjoe");
mysql_select_db("yourfan3_demo", $con);

 //this is the info the user entered stored as variables
 $UserID    = $_POST["UserID"];
 $Password  = $_POST["Password"];
 $Action    = $_POST["action"];

 //this filters throught the variables to check against mysql injections
 $UserID = (filter_var($UserID, FILTER_SANITIZE_STRING));
 $UserID = (filter_var($UserID, FILTER_SANITIZE_URL));
 $Password = (filter_var($Password, FILTER_SANITIZE_STRING));
 $Password = (filter_var($Password, FILTER_SANITIZE_URL));

 //this is the variables that displays errors and correct instructions
 $errors = "";  

 //this gets the password from the userid entered by user
 $result = mysql_query("SELECT * FROM Users WHERE User_ID = '$UserID' and password='$Password'");
 $row = mysql_fetch_array($result);
if(mysql_num_rows($result) >0 ){
    $_SESSION['userid']=$UserID;
    header("location:index.php");
}
else{
    echo 'failes to login';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:40:04.603

我认为 signinfinal.php 中的条件应该是，您在成功登录后将用户发送到 logout.php。所以改变条件。

```
if (!$errors) { $color = "#ffcccc"; $fontColor = "brown"; }
} else {
header("Location: http://www.yourfantasyfootballrealit.com/logout.php");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:41:26.000

在您的页面上，`session_start();`需要成为`<?php`标签之后的第一件事。没有其他东西可以出现在它之前 - 没有空格，没有评论，什么都没有。

所以代替这个：

```
<?php 
         // this starts the session 
         session_start(); 
```

你需要这个：

```
<?php
session_start(); 
```

> 笔记：
> 
> 要使用基于 cookie 的会话，必须在向浏览器输出任何内容之前调用 session_start()。 [（资源）](http://www.php.net/manual/en/function.session-start.php)

此外，您没有在`signin.php`页面上启动会话，这在技术上可能无关紧要，但我也会将上述代码添加到该页面。

另外，您的 IF 语句不正确。

应该：

```
 if (strcmp($Action, "Sign In") == 0) {
          //this what happens when the user enters data for the first time and the info is wrong
          if (($newresult == $Password) && (($UserID) && ($Password))) {
             $greeting = "Welcome, " . $UserID;
             $_SESSION['userid'] = $UserID;
             $what="Log Out";
          } else { 
             $errors .= "<li> Incorrect Credentials!";
             $what="Sign In";
          }
          if ($errors) { $color = "#ffcccc"; $fontColor = "brown"; {
          // Do something... you have nothing here
          } else {
             header("Location: http://www.yourfantasyfootballrealit.com/logout.php");
          }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T16:05:58.073

将错误报告设置为 0，这将停止对屏幕的各种输出，会话将正常工作。这解释了为什么它适用于一个服务器配置而不是另一个。确保将错误输出到文件。

# c++ - 使用c++程序控制linux终端

> ID：12285763
> 
> 赞同：-2
> 
> 时间：2012-09-05T16:22:05.303
> 
> 标签：c++, c, linux, terminal

我可以使用以下命令在终端中打开一个程序：

```
stringstream s;
s<<"./~/rajat/app -parameter";
system(s.str().c_str()); 
```

我的应用程序继续在终端中运行，我想做的是从同一个程序中关闭这个应用程序，然后使用新参数再次打开它。这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:26:28.790

您不能使用`system`. 从（BSD）`man 3 system`：

> 调用进程*等待*shell 完成命令执行，忽略 SIGINT 和 SIGQUIT，并阻塞 SIGCHLD。

因此，您的应用程序将一直阻塞，直到启动的程序完成或终止。

您可以通过在[此处](http://linux.die.net/man/3/fork)和[此处](http://linux.die.net/man/3/exec)`fork`使用/ `exec`- 手册页来启动程序来获得所需的行为。这就是幕后所做的。您将启动子流程并在您的应用程序中保持控制。`system`

使用`fork`，您将获得已启动进程的进程 ID，并且使用该 ID，您可以使用-[此处](http://linux.die.net/man/3/kill)`kill`的手册页- 终止程序并重新启动该程序。

四处寻找`fork`/`exec`示例，这个网站上可能有很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:30:38.960

`system()`只允许您启动另一个进程并取回其退出代码。您无法控制其他进程的生命周期。

如果要启动其他进程并对其进行控制，则需要使用其他方法。经典的方法是将`fork()`你自己的进程分成两个，`exec()`另一个进程在子进程中。然后，父母将从`fork()`呼叫中获得孩子的 PID，然后可以在您想终止它时从父母向孩子发送合适的信号。

这有点混乱（尤其是当您开始不得不处理 SIGHUP 并清理僵尸进程时），但我不知道有一个标准或 Boost 库会为您做这些讨厌的事情。不过，您可能应该在开始手动编写之前检查一下。

如果您确实选择了`fork()`，则有大量在线指南将带您了解几十年来围绕它建立的细节和成语。

# ruby - Sinatra 自定义 SASS 目录

> ID：12285777
> 
> 赞同：1
> 
> 时间：2012-09-05T16:23:05.210
> 
> 标签：ruby, sinatra, haml, sass

我在使用我的 haml 模板进行 sass 工作时遇到问题。

最近我的主要 sinatra.rb 应用程序中有以下代码：

```
require 'sinatra'
require 'dm-core'
require 'dm-migrations'
require 'haml'
require 'sass'
require 'shotgun'

set :views, :sass => 'views/css', :haml => 'template', :default => 'views'

helpers do
def find_template(views, name, engine, &block)
    _, folder = views.detect { |k,v| engine == Tilt[k] }
    folder ||= views[:default]
    super(folder, name, engine, &block)
end
end

get '/css/styles.css' do
sass :styles
end

get '/' do
haml :index
end

I have following application directory structure:
site
|site.rb
|-sass > styles.scss (my scss file generate css realtime using sass --watch sass:css command                                   
|-css > styles.css 
|-template > index.haml 
```

我在模板文件夹中的 index.haml 文件渲染得很好。

我的 index.haml 模板：

```
!!! XML
!!!
%html
%head
    %title Some title
    %meta{"http-equiv" => "Content-Type", :content => "text/html; charset=utf-8"}
    %link{"rel" => "stylesheet", "href" => "views/css/styles.css", "type" => "text/css"}
%body
    %h1 Some h1 
    %p Some p 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:45:12.807

您需要将 sass 视图目录设置为正确的目录。

```
set :views, :sass => 'views/sass', :haml => 'template', :default => 'views' 
```

如果你想让 sass 返回渲染后的 styles.css，那么它需要从 sass 文件所在的位置开始。如果您希望它返回实际的 .css 输出，则不要在您的路由中渲染它，只需返回文件即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:47:43.873

您已经给出了视图文件的路径，而不是渲染 SASS 文件的路径的路径。

```
%link{"rel" => "stylesheet", "href" => "/css/styles.css", "type" => "text/css"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:12:12.507

我找到了解决方案。

```
require 'sinatra'
require 'dm-core'
require 'dm-migrations'
require 'haml'
require 'sass'
require 'shotgun'

set :views, :scss => 'views/', :haml => 'template', :default => 'views'

helpers do
def find_template(views, name, engine, &block)
    _, folder = views.detect { |k,v| engine == Tilt[k] }
    folder ||= views[:default]
    super(folder, name, engine, &block)
end
end

get '/css/:name.css' do
  scss :styles
end

get '/' do
  haml :index
end 
```

如您所见，而不是：

```
get '/css/styles.css' do
  sass :styles
end 
```

它应该是：

```
get '/css/:name.css' do
  scss :styles
end 
```

然后我把我的styles.scss 放到我的/views 文件夹中。但是，您可以通过编辑 :scss => ' .scss 文件的路径来修改目标目录：

```
set :views, :scss => 'views/', :haml => 'template', :default => 'views' 
```

# user-interface - 我如何添加或导入 pyqt 和 sip 到 Python

> ID：12285782
> 
> 赞同：3
> 
> 时间：2012-09-05T16:23:25.273
> 
> 标签：user-interface, qt4, python-3.x, pyqt4

我无法导入这个。我是新手，所以请使用我可以遵循的外行话：p。河岸说我需要啜饮。但是我安装的pyqt下载中有一个sip文件夹，所以我已经有了它吗？这个网站上有一些相关的问题，这导致我尝试这些方法：..我的pyqt文件夹是PyQt-win-gpl-4.9.4。所以我输入： sys.path.append('C:\Program Files\PyQt-win-gpl-4.9.4\sip') 这很好，在'sip'文件夹内，它有一堆像QtCore这样的文件夹等等..我尝试像这样导入：

```
from sip import QtCore 
```

ImportError：没有名为 sip 的模块

或者

```
import sip 
```

ImportError：没有名为 sip 的模块

有人可以告诉我我做错了什么吗？我应该刚刚在原始 Python 文件夹中安装 PyQt 吗？我真的希望能够在尝试学习代码的同时键入代码，因为它变得非常混乱。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:26:33.597

文件夹名称`PyQt-win-gpl-4.9.4`属于*源*包。

对于 Windows，您需要的是*二进制*包。二进制包包含 PyQt 开发所需的一切（包括 Qt 本身）。唯一的要求是您首先安装了 Python。

回到[河岸下载页面](http://www.riverbankcomputing.com/software/pyqt/download)，向下滚动一下，你会找到一个 Python 不同版本的安装程序列表。下载适合您系统的那个，然后运行它。

完成后，启动 Python 解释器并执行以下操作：

```
from PyQt4 import QtCore, QtGui 
```

以确保一切正常。

如果您需要教程，[PyQt Wiki](https://wiki.python.org/moin/PyQt)是一个不错的起点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-19T12:53:59.817

将 sip.pyd 从文件夹**PyQt5_sip-4.19.12-py3.7-win-amd64.egg 复制**到**PyQt5-5.11.2-py3.7-win-amd64.egg**对我有用.....它没有似乎是正确的方法，但至少你不会等待修复的到来......如果仍然不起作用，请告诉我......

# java - runnable构造的线程对象覆盖run方法

> ID：12285787
> 
> 赞同：5
> 
> 时间：2012-09-05T16:23:34.433
> 
> 标签：java, scjp

鉴于此示例代码：

```
Runnable r = new Runnable() {
  public void run() {
    System.out.print("Cat");
  }
};
Thread t = new Thread(r) {
  public void run() {
    System.out.print("Dog");
  }
};
t.start(); 
```

为什么输出是狗而不是猫？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:27:26.073

`run`in的实现`Thread`只是调用`Runnable`构造函数中提供的，如果有的话。您正在覆盖该代码，因此如果新线程只是简单地调用其`run`方法，`Runnable`则忽略 。当然，您应该能够查看源代码以检查...（我刚刚这样做了，虽然我不打算在这里发布源代码，但它完全符合我的描述。）

你真正暴露的是一个封装问题——`Thread` *不应该*有这些不同的、潜在的冲突的方式来表达线程应该做什么。基本上，您几乎*不*应该直接扩展`Thread`。仅仅因为它的设计很糟糕并不意味着你必须滥用那个糟糕的设计；）

编辑：这实际上以某种迂回的方式记录在案。[`start()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29)记录为：

> 使该线程开始执行；Java 虚拟机调用该线程的 run 方法。

并[`run()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#run%28%29)记录为：

> 如果该线程是使用单独的 Runnable 运行对象构造的，则调用该 Runnable 对象的 run 方法；否则，此方法不执行任何操作并返回。

因此，该`run()`方法按 per 调用`start()`，但是您已经覆盖`run()`了 ，这是*唯一*将调用`Runnable`构造函数中提供的方法的方法。

请注意，如果您重写了这样的方法：

```
Thread t = new Thread(r) {
  public void run() {
    super.run();
    System.out.print("Dog");
  }
}; 
```

然后输出将是“CatDog”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:26:12.630

您已被覆盖`Thread.run`，因此它不会执行可运行文件。相反，它只打印“狗”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:27:04.953

这是因为函数`run()`被覆盖了。并`t`调用此函数：

```
public void run() {
System.out.print("Dog");
} 
```

`cat`您将在执行时获得 o/p`r.start()`将调用该函数

```
 public void run() {
    System.out.print("Cat");
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:30:10.067

看一下源代码`java.lang.Thread`：

```
public void run() {
    if (target != null) {
        target.run();
    }
} 
```

`target`是构造函数用来分配变量的`Runnable`字段。当您覆盖 中的方法时，您正在更改调用的行为`Thread``Thread(Runnable)``r``run``Thread``run`

```
System.out.print("Dog"); 
```

而不是打电话

```
if (target != null) {
    target.run();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T16:31:56.560

这是一个匿名类，您正在重新定义/覆盖`run`. 你在你的`Runnable`内部使用传入的`run`吗？不，你没有。所以问题是，你为什么期望它打印`Cat`？

```
 new Thread(r) {
  public void run() {
    System.out.print("Dog");
  }
}; 
```

# silverlight - Datagrid 按钮工具提示绑定

> ID：12285789
> 
> 赞同：0
> 
> 时间：2012-09-05T16:23:42.067
> 
> 标签：silverlight, xaml, binding, silverlight-4.0

我有一个对象列表作为数据网格的项目源。我也有带有工具提示的按钮，但我希​​望工具提示是“可本地化的”/动态的。我不想在对象的类上显式添加另一个属性（会很难看）所以相反，我想在 UserControl 中创建一个字符串并执行类似的操作

```
public string ThisTag { get { return "someString"; } } 
```

在 xaml 上

```
<Button ...>
   <ToolTipService.ToolTip>
      <Tooltip Style={StaticResource ToolTipStyle} Tag={Binding Source=thisUserControl.ThisTag} />
... 
```

样式

```
<Style x:Name="ToolTipStyle" TargetType="ToolTip">
   <Setter Property="Template">
       <Setter.Value>
           <ControlTemplate TargetType="ToolTip">
               <Grid>
                  <TextBlock Text="{TemplateBinding Tag}" Foreground="{StaticResource AnotherResource}"></TextBlock>
... 
```

1.  这是可能的还是有类似的简单方法来绑定到属性？
2.  绑定到字符串的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:43:10.770

如果对象是可本地化的资源，最好使用实际的 .ResX 文件。[有关如何在 XAML 中使用这些](http://msdn.microsoft.com/en-us/library/dd882554%28v=vs.95%29)的很好的介绍，请参阅此处（基本上，您将 .ResX 引用为静态 XAML 资源）。

但是，如果您真的只想绑定到代码隐藏属性，这也应该是可能的。这是正确设置`Source`属性的问题。您可以通过引用根元素来做到这一点`DataContext`，即：

```
<Button Content="button text">
    <ToolTipService.ToolTip>
        <TextBlock Text="{Binding Path=DataContext.ThisTag,ElementName=LayoutRoot}" />
    </ToolTipService.ToolTip>
</Button> 
```

`LayoutRoot`控件/窗口/页面中根元素的名称在哪里。

[1\. 请注意，Silverlight 5 支持使用`AncestorType`in 相对绑定，但 Silverlight 4 不支持。
2\. 另请注意，您要使用`ToolTipService.ToolTip`(`Tag`是一种在任何 XAML 元素中嵌入数据的方式，它实际上不显示任何内容。)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:06:21.213

我不能让 Binding Path 和 ElementName 样式正常工作，所以我决定制作一个像这样的自定义类

```
public class LocalizedDatagridButtonsTooltips
{
   public string TooltipOne { get { return SomeMethodToTranslate("This Phrase"); } }
   ...
} 
```

在 App.xaml 中创建类的实例（取决于声明类的位置）。“本地”在 xaml 上声明。

```
<local:LocalizedDatagridButtonsTooltips x:Key="LocalizedTooltips"/> 
```

然后在 xaml 中设置标签或需要字符串的任何元素（在我的情况下，标签属性需要绑定）

```
<Tooltip Tag="{Binding Source={StaticResource LocalizedTooltips}, Path=TooltipOne}" > 
```

我从这里得到了解决方案：

[http://www.c-sharpcorner.com/uploadfile/dpatra/using-static-resource-in-silverlight-3-application/](http://www.c-sharpcorner.com/uploadfile/dpatra/using-static-resource-in-silverlight-3-application/)

这些解决方案也适用于 4-5（我认为 SL 5 具有“AncestorType”accr. dbaseman）。

# javascript - 以编程方式获取无线接入点列表

> ID：12285792
> 
> 赞同：4
> 
> 时间：2012-09-05T16:23:48.717
> 
> 标签：javascript, api, node.js, geolocation

这是一个通用的编程问题，尽管我更喜欢**Node.js**的解决方案。是否有用于检索无线接入点列表及其相关数据（SSID、MAC 地址等）的 JavaScript 或 .NET API？我使用**TamperData**来查看当您与 Firefox 共享您的位置并获得此请求 URL 时会发生什么：

`https://maps.googleapis.com/maps/api/browserlocation/json?browser=firefox&sensor=true&wifi=mac:b8-c7-5d-07-6e-cf|ssid:TV2 Network|ss:-58&wifi=mac:00-13-10-8d-a7-32|ssid:LUBIN|ss:-61&wifi=mac:62-4c-fe-9c-08-18|ssid:airportthru|ss:-73&wifi=mac:00-24-93-0c-49-e0|ssid:Custom Gifts Memphis|ss:-87&wifi=mac:98-fc-11-69-35-46|ssid:linksys|ss:-87&wifi=mac:00-0f-cc-6d-ba-ac|ssid:3333|ss:-88&wifi=mac:40-b7-f3-5b-2c-60|ssid:ATT456|ss:-88&wifi=mac:00-c0-02-7d-5f-4e|ssid:iHub_0060350392e0|ss:-89&wifi=mac:00-24-b2-d5-df-9a|ssid:Memphis CPA|ss:-89&wifi=mac:06-02-6f-c3-06-27|ssid:3333|ss:-89&wifi=mac:00-27-0d-55-c3-20|ssid:custard|ss:-90&wifi=mac:a2-a1-15-0d-a8-68|ssid:SETUP|ss:-90&wifi=mac:00-0f-cc-76-5b-2c|ssid:3545 2340|ss:-92&wifi=mac:c0-3f-0e-6e-ac-34|ssid:patricia|ss:-92`

...它在执行时返回一个 JSON 对象，它正是我正在寻找的：*latitude and longitude coordinates*。此示例的对象是：

`{ "accuracy" : 49.0, "location" : { "lat" : 35.06993630, "lng" : -89.88568730 }, "status" : "OK" }`

**好奇：**这里的准确性如何表示？我相当肯定这不是一个百分比，因为列出的访问点较少的其他请求会返回一个更高的整数。例如，当删除除第一个以外的所有 WAP 时，我得到的准确度为`43000.0`.

我一直在研究**Node**版本的[prey](https://preyproject.com/)与类似的 Google 服务交互的方式，它遵循传递 WAP 列表及其信息的相同方式。我正在尝试提取他们完成此任务的代码位，但我什至无法让项目正常运行。如果有人有任何信息，我将不胜感激，因为我有一个利用这种技术的精彩项目。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-06T16:11:12.910

这实际上只能通过 Java 小程序或主机上的应用程序来实现。Chrome 和其他浏览器通过在用户计算机上安装应用程序来实现这一点。此应用程序通过 Https 请求安全地转发数据，并将您的 mac id 和 ssid 传递给 Google。在这里，Google 会回复您对您所在位置的最佳猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T17:57:45.823

node_wifi_location npm 包从本地机器的无线网卡[中](https://github.com/swdyh/node_wifi_location)检索可用无线接入点的列表，并可选择将它们传递给 Google 位置 API 以检索机器的位置。它依赖于操作系统的 wifi 命令行实用程序，因为每个平台都有自己的 API 用于访问 wifi 硬件。在任何浏览器中都没有用于检索接入点列表的 JavaScript API，只有一个用于检索位置的 API（[HTML5 地理定位 API](http://dev.w3.org/geo/api/spec-source.html)）。

```
var wifiLocation = require('wifi_location');

wifiLocation.wifiTowers(function (err, accessPoints) {
    // accessPoints contains an array of access point objects
    // with ssid, mac_address, signal_strength keys 
});

wifiLocation.location(function (err, location) {
    // location contains the location object from the Google Maps API
}); 
```

# mysql - 为 EC2 上的高流量调整 php-fpm、nginx、mysql

> ID：12285797
> 
> 赞同：2
> 
> 时间：2012-09-05T16:24:00.453
> 
> 标签：mysql, nginx, amazon-ec2, redis, php

我正在寻找优化我在 EC2 上的设置。CentOS 6, nginx 1.0.15, php 5.4.4 with php-fpm, xcache 2.0.0, mysql 5.5.24-55-log, redis 2.4.10, EC2 High Cpu XLarge (c1.xlarge 8 cores, 7G ram)对于高流量站点，写入每个请求。生成的网络请求非常小（javascript 片段）。

基本上，它是一个 100% 的动态环境（插入或更新）。在每个 Web 请求上，我都需要在 memcached 中进行快速查找，然后在每个页面请求中记录一些属性。我在世界各地有几台 EC2，每天帮助处理超过 6 亿个请求。这个想法是我记录数据并每小时转储它以由其他机器处理。每台机器每天已经处理了大约20M。我尝试了一些数据存储，一些注释如下：

**MySQL**

*   使用每小时表来存储数据，因此在 2012 年 9 月 5 日上午 11 点专门写入 log_2012_09_05_11。

*   使用临时存储

*   事实证明，MyISAM 对我来说比 innodb 快。我玩过缓冲池，我似乎总是用 myisam 获得更好的性能。也可以在此处接受有关调整的任何建议，但查询速度很快。Myisam 锁定时间非常小。

*   我使用 xdebug 对代码进行了分析，在高负载下，98% 的时间都花在了连接 mysql 上。然后我能够通过使用 mysqli 的持久连接来获得更好的性能。

*   **Max ~2200 rps** , 之后获取网关超时和缓慢响应

*   服务器负载最大 1 或 2（8 核机器）

**雷迪斯**

*   我真的认为这会很棒，但似乎 php 是瓶颈。

*   **最大 ~5-600 rps**。

*   这是写像“log_2012_09_05_11_12345”这样的键，12345 每小时来自一个INCR 计数器。

*   每 15 分钟保存到磁盘一次（如果我没记错的话，操作大约需要 2 分钟）

**我可以从这台 EC2 机器和 100% 写入场景中实际期望每秒多少个请求？我受 EC2 的磁盘性能或 php 或 mysql 的约束吗？我可以将其配置为使用更多 CPU 或更好地使用它正在使用的资源吗？**

**PHP-FPM** [http://pastebin.com/raw.php?i=9n2cpqrq](http://pastebin.com/raw.php?i=9n2cpqrq)

**NGINX (nginx.conf)** [http://pastebin.com/raw.php?i=XuVBKr8m](http://pastebin.com/raw.php?i=XuVBKr8m)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:49:07.593

我真的认为您需要考虑将架构组件拆分到不同的系统上。例如，您注意到您在临时存储上运行 MySQL。这对于 MySQL 来说似乎很奇怪，因为您的数据很容易丢失。您是否考虑过使用 Amazon RDS？

此外，您是否考虑将 ElasticCache 或 SimpleDB 用于您的键值存储，而不是 REDIS。

我想我的主要观点是，如果您正在处理大量的请求，您真的应该将您的服务堆栈分成多个可以相互独立扩展的层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T20:55:30.257

关于性能要提一件事，不要使用 EBS 驱动器，除非作为 RAID 并具有专用吞吐量。与短暂的相比，它们真的很糟糕。我将 hi1.4xlarge 用于数据库，其临时驱动器位于 SSD 上。

# sql - 子查询 - 加入

> ID：12285798
> 
> 赞同：0
> 
> 时间：2012-09-05T16:24:04.203
> 
> 标签：sql, join, subquery

除了一个连接语句之外，我还试图获取一个子查询，该语句将显示所有客户的名字和姓氏，这些客户有一个名为“Dress Shirt”的项目的订单。然后我必须报告按 LastName 升序排序的结果，然后按 FirstName 降序排序。这就是我所拥有的，但它一直给我“未选择行”：

```
SELECT FirstName, LastName
FROM HW2G_CUSTOMER, HW2G_ORDER_ITEM
WHERE Item IN 
    (SELECT Item
     FROM HW2G_ORDER_ITEM
     WHERE Item = ‘DressShirt’)
ORDER BY LastName ASC, FirstName DESC; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:28:37.400

第一个问题是您正在两个表之间进行交叉连接。第二个是IN中的子查询没有返回任何结果。'Dress Shirt" 可能不是一个有效值。但是，考虑一个更像是这样的查询：

```
SELECT distinct FirstName, LastName
FROM HW2G_CUSTOMER c join
     HW2G_ORDER_ITEM i
     on c.customerID = i.customerID
WHERE i.Item = ‘Dress Shirt’
ORDER BY LastName ASC, FirstName DESC; 
```

这不会解决问题（即字符串“Dress Shirt”），但它是前进的更好语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:37:08.603

你肯定不想要你现在拥有的东西，因为你正在做一个交叉连接。看看这个小提琴：

[http://www.sqlfiddle.com/#!3/30abb/5](http://www.sqlfiddle.com/#!3/30abb/5)

```
SELECT FirstName, LastName
FROM HW2G_CUSTOMER WHERE CustomerId IN
    (SELECT CustomerId
     FROM HW2G_ORDER_ITEM
     WHERE Item = 'Dress Shirt')
ORDER BY LastName ASC, FirstName DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:26:07.607

```
-- maybe a bit cleaner than @aqinas 's solution?
WITH wanted AS (
  SELECT DISTINCT CustomerId
     FROM HW2G_ORDER_ITEM
     WHERE Item = 'Dress Shirt'
   )
SELECT FirstName, LastName
FROM HW2G_CUSTOMER cus
JOIN wanted wa ON wa.CustomerId = cus.CustomerId
ORDER BY LastName ASC, FirstName DESC
 ; 
```

# entity-framework-4 - IDictionary 错误：LINQ to Entities 无法识别“Boolean get_Item(System.String)”方法，

> ID：12285806
> 
> 赞同：1
> 
> 时间：2012-09-05T16:24:26.763
> 
> 标签：entity-framework-4, lambda, linq-to-entities

我的 WCF 实体框架代码中有这行代码

```
if (criteria.AccommodationTypes != null && criteria.AccommodationTypes.Count > 0)
   result = result.Where(a => criteria.AccommodationTypes[a.Type]); 
```

执行时会导致此错误

```
LINQ to Entities does not recognize the method 'Boolean get_Item(System.String)' method, and this method cannot be translated into a store expression. 
```

住宿类型是一个字典。我可以看到问题在于 EF 无法将我的代码转换为 SQL，这就是它失败的原因，但我看不到我需要编写什么查询来执行此功能。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:35:53.453

对于将来遇到类似问题的任何人，这就是我解决它的方法。我在字典中创建了我感兴趣的所有值的列表（对应的布尔值为真的那些），然后在该列表的查询中执行包含。

```
var types = (from type in criteria.AccommodationTypes where type.Value select type.Key).ToList();

if (criteria.AccommodationTypes != null && criteria.AccommodationTypes.Count > 0)
  result = result.Where(a => types.Contains(a.Type)); 
```

# c++ - 是否有一个不会被省略的移动构造的简单示例？

> ID：12285811
> 
> 赞同：7
> 
> 时间：2012-09-05T16:24:53.283
> 
> 标签：c++, c++11, move-semantics

我正在努力学习移动语义，以便将其介绍给我的学生。我一直在使用高度简化的向量或类似字符串的类来管理内存，并且其成员输出消息以展示它们的活动。我正在尝试开发一组简单的示例来向学生展示。

RVO 和 gcc 4.7 中其他地方的构造省略和 clang 积极地消除了复制和移动构造，所以虽然我可以很容易地看到工作中的移动分配，但我唯一一次在工作中看到移动构造是如果我在 gcc 4.7 中关闭构造省略使用 -fno-elide-constructors。

显式复制构造语句

```
MyString newString(oldString); 
```

即使启用了省略，也会调用复制构造函数。但是像

```
MyString newString(oldString1 + oldString2); 
```

由于省略，不调用移动构造函数。

任何明确使用 std::move 的东西都不会是一个简单的例子，因为解释 std::move 必须在以后进行。

所以我的问题是：即使省略了复制/移动构造函数，是否有一个简单的代码示例会调用移动构造？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:32:45.430

简单的示例是返回的函数的参数。该标准明确禁止在这种情况下省略移动（不是他们可以......）：

```
std::vector<int> multiply( std::vector<int> input, int value ) {
   for (auto& i : input )
      i *= value;
   return input;
} 
```

此外，您可以显式请求移动构造，以获得更简单但更人为的示例：

```
T a;
T b( std::move(a) ); 
```

嗯......还有一个不涉及`std::move`（从技术上讲可以省略，但大多数编译器可能不会）：

```
std::vector<int> create( bool large ) {
   std::vector<int> v1 = f();
   std::vector<int> v2 = v1;       // modify both v1 and v2 somehow
   v2.resize( v2.size()/2 );
   if ( large ) {
      return v1;
   } else {
      return v2;
   }
} 
```

而优化器可以通过将代码重写为：

```
std::vector<int> create( bool large ) {
   if ( large ) {
      std::vector<int> v1 = f();
      std::vector<int> v2 = v1;       // modify both v1 and v2 somehow
      v2.resize( v2.size()/2 );
      return v1;
   } else {
      std::vector<int> v1 = f();
      std::vector<int> v2 = v1;       // modify both v1 and v2 somehow
      v2.resize( v2.size()/2 );
      return v2;
   }
} 
```

我非常怀疑编译器是否会真正做到这一点。请注意，在每个代码路径中，返回的对象是已知的`v1`并且`v2`是在创建之前创建的，因此优化器可以在重写后在返回位置找到正确的对象。

可以省略复制/移动的情况在 12.8/31 中进行了描述。如果您设法编写不属于这些类别的代码并且该类型具有移动构造函数，则将调用移动构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:34:19.130

嗯，让我们看看：

*   `MyString newString(oldString)` **是**副本。这里没有什么可以忽略的；我们最终得到了*两个*对象。

*   `MyString newString(oldString1 + oldString2);`从临时副本中复制，因此可以省略副本并直接就地构建连接。

这是一个非常便宜的不可消除移动构造的示例：

```
MyString boo()
{
    MyString s("Hello");
    return std::move(s);   // move-construction from the local "s", never elided
} 
```

显式转换使`s`RVO 不符合条件，因此返回值将从 移动构造`s`。

# iphone - 无法在我的 StoryBoard 中使用 accessoryButtonTappedRowWithIndexPath

> ID：12285812
> 
> 赞同：0
> 
> 时间：2012-09-05T16:24:59.133
> 
> 标签：iphone, objective-c, ios5

***令人震惊的是，此问题仍未解决（2012 年 9 月 25 日）。在我的多本书和其他有经验的 iOS 开发人员中研究过这个问题。我原以为添加 pushViewController 代码会修复它，但没有解决。如果有人可以帮助我，请告诉我？如果有人知道这个问题的答案，赏金仍然代表这个问题。***

我正在尝试在我的应用程序中为 accesoryButtonTappedRowWithIndexPath 方法构建代码，但是当您单击每个单独的披露按钮时，我无法找到如何进入新的 UI 视图窗口。我买了几本书，比如《开始 IOS 5 开发》。在 Table Views 部分中，我看到了一个如何完成的示例，但我似乎无法将其放入我的。这是我现在列出的代码。The message class where I am trying to display a "message" when the disclosure button is selected to prove that it is working is not pulling up. 我看到它可以在书中的代码中访问，但我无法让它在我的工作中工作，所以我可以让它进入下一个视图。任何人都可以帮助我吗？下面的屏幕显示，当您单击表格的单元格时，我的其他方法操作可以正常弹出消息警报。

非常感谢。

![第三](../Images/6faf2e0a34ead2e4e681fbcc1679419b.png) ![第二](../Images/a5024ba1197cdfa45b7e67af336f32aa.png) ![第一](../Images/a1686d1a741a6fba26a3e97df1436537.png) ![nbhoodcontroller_push](../Images/3911eca79e60d087e6567e572c5c1053.png) ![ns_log](../Images/170fd70fdf9459ed0f1855899fb36e71.png)

```
- (void)tableView:(UITableView *)tableView 
accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{

if (NbhoodDetailController == nil) 
{
    NbhoodDetailController = [[LWWDisclosureDetailController alloc]initWithNibName:@"LWWDisclosureDetail" bundle:nil];

}
NbhoodDetailController.title = @"Getting Neighborhood Details";
NSUInteger row = [indexPath row];
NSString *SelectedNeighborhood = [ListBlocks objectAtIndex:row];
NSString *DetailMessage = [[NSString alloc]
                           initWithFormat:@"You pressed the button for the Neighborhood   %@ to invest in.", SelectedNeighborhood];
NbhoodDetailController.title = SelectedNeighborhood;
NbhoodDetailController.message = DetailMessage;// <-- the "message" class isn't accessible for some reason as well so I can click on the disclosure button and give a message. 
```

以下索引代码处的行单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath//returns instances of the UITableViewCell class rows that have to     be populated into the table view.  
{
static NSString *NeighborhoodDBListCellIdentifier = @"NeighborhoodDBListCellIdentifier";

UITableViewCell *cell = [tableView    dequeueReusableCellWithIdentifier:NeighborhoodDBListCellIdentifier];//as table view cells   scroll off the screen, they are placed into a queue of cells available to be reused. So im   using those cells for the new rolls that scroll on the screen to assign them to.

if(cell == nil)//in case of no spare reuseable cells we create new ones here. If   dequeueReusableCellWithIdentifier doesn't have any to spare.
{
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleDefault 
            reuseIdentifier:NeighborhoodDBListCellIdentifier];
}
//assigning the images for the rows and also the disclosure buttons for each row
UIImage *image = [UIImage imageNamed:@"rowControlsIcon.png"];
cell.imageView.image = image;
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

NSUInteger row = [indexPath row];
cell.textLabel.text = [ListBlocks objectAtIndex:row];//the output results of what the    cell is goes to the textLabel in the TableViewCell as text.  Like "Armour Neighhborhood"

return cell;

} 
```

![我如何让 segue 为我的另一个可以正常切换的屏幕工作的示例](../Images/fd9cd65f2328dd49209cc85af9a82117.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:14:38.483

仅创建要显示的新控制器是不够的。您还必须在方法结束时将其传递给导航控制器`accessoryButtonTappedForRowWithIndexPath:`，如下所示：

```
[self.navigationController pushViewController:NbhoodDetailController
                                     animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:39:12.053

当你使用故事板时，你需要 `- (id)instantiateViewControllerWithIdentifier:(NSString *)identifier` 在你的 UIStoryboard 上实例化你的视图控制器

例子 ：

```
// if your storyboard file name is MainStoryboard_iPhone.storyboard then use @"MainStoryboard_iPhone" as the parameter
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
                                                     bundle:[NSBundle bundleForClass:[self class]]];
NbhoodDetailController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"Your view controller identifier"];
// You need to set the view controller identifier in IB 
```

然后你可以将它推送到导航堆栈

```
[self.navigationController pushViewController:viewController animated:YES]; 
```

另一种方法是使用segue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:55:56.917

打破较早的评论线程......我认为您的问题在于创建控制器。而不是这个：

```
NbhoodDetailController = [[LWWDisclosureDetailController alloc]
    initWithNibName:@"LWWDisclosureDetail"
    bundle:nil]; 
```

做这个：

```
NbhoodDetailController = [[LWWDisclosureDetailController alloc]
    initWithNibName:@"LWWDisclosureDetail"
    bundle:[NSBundle mainBundle]]; 
```

这只是一个猜测，真的。逐步了解实际成功创建的内容会很有趣。

# parallel-processing - 混合使用单线程和多线程配方运行 make

> ID：12285813
> 
> 赞同：4
> 
> 时间：2012-09-05T16:25:07.247
> 
> 标签：parallel-processing, makefile, openmp

我有一个编译和运行相当大的程序集的生成文件，以产生输出。有些程序是单线程的，有些程序使用 OpenMP 在多个 CPU 内核上运行。相当多的任务需要很长时间才能运行，所以传递一个“-j”选项来让单线程程序并行运行会很有用。但是，OpenMP 任务已经使用了所有可用的 CPU 内核（以及相当多的 RAM），因此它们应该一次运行一个。

是否有一个标志可以附加到 makefile 中使用 OpenMP 的任务，以防止其他任务与其并行运行，同时允许其他任务在其他时间并行运行？我认为 .NOTPARALLEL 特殊目标完全禁用了所有并行性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:52:08.280

我能想到三种可能：

1) 如果它们相互依赖，make 将不会并行运行任务。因此，您可以尝试通过向要单独运行的目标添加错误的依赖项来欺骗 make。例如，声明您的 OpenMP 目标依赖于所有串行目标的输出。

2）您也可以将您的 Makefile 拆分为两个不同的：一个用于不会并行运行的 OpenMP 目标，另一个用于串行目标。这意味着您在 OpenMP 和串行目标之间没有交叉依赖关系。

3）拆分编译和运行。使用 bash 脚本随心所欲地运行。

# sql-server - SQL Server / EF - 数据库设计

> ID：12285820
> 
> 赞同：0
> 
> 时间：2012-09-05T16:25:23.673
> 
> 标签：sql-server, asp.net-mvc, entity-framework

我目前要开始一个新项目来帮助处理投诉。我已经计算出所有领域等。但在这样做时，我意识到我需要不止一种类型的投诉。它们是客户投诉、供应商投诉或缺陷投诉。它们共享许多相同的字段，但略有不同，因此我不确定如何在 SQL Server 数据库和/或使用 EF 中进行设计。该应用程序将是一个使用 C# 的 ASP.NET MVC 4 应用程序，因此我可以利用 Code First，但正如我所说，我不确定如何设计这些实体：

所有 3 种投诉类型共享以下列：

```
ComplaintType (int), Department (int), 
Code (int), DefectReference (string), Cause (int) 
```

客户投诉和供应商投诉共享以下列：

```
ComplaintText (string), Orders (collection), Rectification (string) 
```

以下是客户投诉特有的列：

```
AccountNumber (string), CustomerName (string) 
```

最后，以下是供应商投诉特有的字段：

```
SupplierNumber (string), SupplierName (string) 
```

所以我的问题是：

1.  我将如何处理这个创建我的模型以与 EF Code First 或
2.  我将如何使用 SQL Server 进行设计？

谢谢

注意：还有更多列（ID 等），但我在本例中将其缩短了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:35:21.280

有几种方法可以在 Code First 中实现继承，这完全取决于您希望在 SQL 中表示的表的方式。

您是否想要一个针对所有类型的投诉表，其中某些字段根据它是什么类型而保留为空？为此，您将使用[Table Per Hierarchy](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)。

您是否想要一个包含公共字段的主投诉表，然后是包含基于类的额外列的关系表？为此，您将使用[每种类型](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)的表。

如果您希望每个投诉类型有一个表，并且每个表中都表示公共字段？这是[每种具体类型的表格](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)

就个人而言，根据您所拥有的，我可能会倾向于 Table Per Type。这是一个简短的示例：

```
public abstract class Complaint 
{
    public int ComplaintType { get; set; }
    public int Department { get; set; }
    public int Code  { get; set; }
}

[Table("CustomerComplaint")]
public class BankAccount : Complaint
{
    public string ComplaintText { get; set; }
    public string Rectification { get; set; }
}

[Table("SupplierComplaint")]
public class SupplierComplaint: Complaint
{
    public string SupplierNumber { get; set; }
    public string SupplierName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:35:03.727

是的，通常 EF Code First 策略是最佳选择。

您应该创建一个`Complaint`类并将该类使用（委托）到`Supplier`,`Customer`和`Defect`类中。继承层次结构可能会损害您的设计可扩展性。总是喜欢组合而不是继承。

# jquery - jQuery .on() - 元素“在文档中”事件

> ID：12285837
> 
> 赞同：0
> 
> 时间：2012-09-05T16:26:24.377
> 
> 标签：jquery, events, javascript-events, event-handling

当元素出现在文档中时，我正在使用 jQuery 的`.on()`函数将事件处理程序附加到元素：

```
$(document).on('change', '#elementId', handlerFunction); 
```

我还想`handlerFunction`在元素成为文档的一部分时调用，而不仅仅是在`change`触发事件时调用。有没有我可以添加到列表中的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:28:39.430

在您的处理程序函数中添加此行

```
$('#elementId').trigger('change'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:29:52.197

你可以使用jQuery的[load()函数：](http://api.jquery.com/load-event/)

```
$('#elementId').load(handlerFunction); 
```

套用jQuery的网站：

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

# jquery - Windows 上的 CSS 行为调整大小

> ID：12285840
> 
> 赞同：0
> 
> 时间：2012-09-05T16:26:30.200
> 
> 标签：jquery, css, sharepoint, fluid

这是一个共享点站点。在功能区上工作。我在右侧的用户菜单之前添加了几个链接。在将窗口大小调整到一半时，菜单链接消失。我宁愿将链接文本缩短为像几个字母一样，但即使在大幅调整窗口大小后，整个菜单仍然存在。就像“浏览”和“页面”标签缩小一样，我想要类似的行为。我们怎样才能做到这一点？它甚至可行吗？ [http://imageupload.org/en/file/239598/ss.jpg.html](http://imageupload.org/en/file/239598/ss.jpg.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:49:58.103

是的，请参考这张图表[http://sharepointexperience.com/csschart/csschart.html](http://sharepointexperience.com/csschart/csschart.html)。它显示了您需要在 css 中为每个对象调整的内容。

例如，这里是您可以自定义的站点操作属性：

![在此处输入图像描述](../Images/18c529b29d818300c3f33c8a1d65eec2.png)

# treeview - 如何生成重嵌套 Outlook 文件夹的 TreeView？

> ID：12285843
> 
> 赞同：0
> 
> 时间：2012-09-05T16:26:49.770
> 
> 标签：treeview, outlook

我正在开发一个独立的 Outlook 应用程序。用户需要从派生自 olPublicFoldersAllPublicFolder 的列表中选择 Outlook 文件夹。所选文件夹可能位于公用文件夹的根目录中，也可能位于另一个文件夹的子文件夹中。

以前我使用的是 NameSpace 对象的 .PickFolder 方法。这可行，但我宁愿创建自己的选择器对话框，该对话框集成到我自己的应用程序中。

问题是公用文件夹与子文件夹严重嵌套。遍历所有这些以尝试创建 TreeView 对象会引发 Exchange 错误（我遇到了“打开”项目的 RPC 限制）。

所以我的问题是，生成 Outlook 文件夹和任何子文件夹（也可能包含子文件夹等）的 TreeView 的最佳方法是什么？我认为 Folders 对象的 GetTable 方法可以完成此操作，但它似乎仅限于 Items 而不是文件夹。

我想到的一种解决方案是在用户每次展开相应根文件夹的树时动态添加一个代表子文件夹的 TreeViewItem。但是我对如何做到这一点有些迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:04:39.230

嗯，这就是我想出的。可能有更好的方法来处理这个......但基本上我构建了一个代表每个文件夹的 TreeViewItem。如果存在任何子文件夹，我希望显示扩展器图形，但显然我无法添加子文件夹对象，因为这最终会在遍历它们时引发 RPC 限制错误。

```
public partial class MainWindow : Window
{
    Microsoft.Office.Interop.Outlook.Application olApp = Marshal.GetActiveObject("Outlook.Application") as Microsoft.Office.Interop.Outlook.Application;
    Microsoft.Office.Interop.Outlook.NameSpace olNs;

    public MainWindow()
    {
        InitializeComponent();
        BuildTree();
    }

    public void BuildTree()
    {
        olNs = olApp.GetNamespace("MAPI");
        Folder rootFolder = olNs.GetDefaultFolder(OlDefaultFolders.olFolderInbox) as Folder;

        TreeViewItem tvi = new TreeViewItem();
        tvi.Header = rootFolder.Name;
        tvi.Tag = rootFolder;   //store Folder object in TreeViewItem tag
        tvi.Expanded += new RoutedEventHandler(tvi_Expanded);   //Add expander event

        //Check for subfolders within this folder
        if (rootFolder.Folders.Count > 0)
        {
            //Add placeholder item to add expander graphic
            tvi.Items.Add("");
        }
        tv_MyTree.Items.Add(tvi); //main TreeView object
    }

    private void tvi_Expanded(object sender, RoutedEventArgs e)
    {
        TreeViewItem svi = sender as TreeViewItem;  //source/sender TreeViewItem
        svi.Expanded -= (tvi_Expanded); //Remove expander event, otherwise any expanders that are clicked later will trigger this method

        Folder f = svi.Tag as Folder;

        if (f.Folders.Count > 0)
        {
            svi.Items.Clear();  //clear list - effectively removes placeholder, rebuilds tree
            foreach (Folder sub in f.Folders)
            {
                TreeViewItem tvi = new TreeViewItem();
                tvi.Header = sub.Name;
                tvi.Tag = sub;
                tvi.Expanded += new RoutedEventHandler(tvi_Expanded);
                if (sub.Folders.Count > 0)
                {
                    tvi.Items.Add("");
                }
                svi.Items.Add(tvi);
            }
        }
    }
} 
```

# c# - 我应该模拟 ControllerContext 来对我的 JsonNetResult 数据进行单元测试吗

> ID：12285844
> 
> 赞同：0
> 
> 时间：2012-09-05T16:26:50.553
> 
> 标签：c#, asp.net-mvc, unit-testing, json.net

我在我的 asp.net mvc 4.0 项目中使用 JsonNetResult 类：

[http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx](http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx)

如何对我的 c# 类是否正确转换为 json 格式进行单元测试？

Json 转换是在 ExecuteResult 方法中执行的，这似乎是不可能的

根据 www 模拟。

有些人甚至说这对于 json 测试来说是太多的模拟工作。

有人说为什么不直接测试 JsonConvert.SerializeObject(_data); 方法。

我将很高兴听到有关该主题的一些专业建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:32:30.727

如果您想测试您的 C# 类是否可以序列化，请尝试直接对其进行序列化，请记住单元测试专注于测试一个特定操作，您提供的链接可以做几件事。为了对其进行单元测试，您必须创建一个在给定当前状态的情况下完成大部分工作的方法，而不是使用隐式状态。

直接序列化，只要调用`if (Data != null)`给它的内容就是你想给的信息。请注意，您需要提供的一条信息是要写入的流，因为它`Response`直接写入。

# sql - SQL - 查询优化

> ID：12285845
> 
> 赞同：0
> 
> 时间：2012-09-05T16:26:53.313
> 
> 标签：sql, query-optimization

假设您有以下表格：

```
TABLE Car
car_id
num

TABLE Car_description
dsc_id
car_id
model

TABLE Result
res_id
car_id
race_num
result 
```

任务是为我们拥有超过 2 辆汽车和 Car.num、Car_description.model 的比赛选择最高、平均分数以获得最佳汽车。解决它的一种方法是编写以下查询。

```
select r.race_num,
       MAX(score) as MaxScore,
       AVG(score) as AvgScore,
       MAX(case when seqnum = 1 then c.carnum end) as TopCarNum,
       MAX(case when seqnum = 1 then cd.model end) as TopCarModel
from (select r.*,
             ROW_NUMBER() over (partition by race_num order by score desc) as seqnum
      from Result r
     ) r left outer join
     Car c
     on c.car_id = r.car_id left outer join
     Car_Description cd
     on c.car_id = d.car_id
group by r.race_num
having COUNT(*) > 2 
```

但是这里我们在内部查询中对结果表进行排序，而不是选择最大元素，我认为这会很耗时。是这样吗？我们该如何优化呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:46:26.777

我不确定这是否有助于提高性能，但请尝试

```
SELECT r.race_num,
   MAX(score) as MaxScore,
   AVG(score) as AvgScore,
   MAX(case when mr.max_score IS NOT NULL then c.carnum end) as TopCarNum,
   MAX(case when mr.max_score IS NOT NULL then cd.model end) as TopCarModel
FROM Result LEFT OUTER JOIN 
    (SELECT r.race_num, MAX(score) max_score FROM Result r GROUP BY r.race_num) mr 
    ON Result.res_num = mr.res_num AND Result.score = mr.max_score
 LEFT OUTER JOIN Car c
 ON c.car_id = Result.car_id 
 LEFT OUTER JOIN Car_Description cd
 ON c.car_id = d.car_id
 GROUP BY r.race_num
 HAVING COUNT(*) > 2 
```

# python - GAE Python - 将日期“钳制”成“树”结构

> ID：12285846
> 
> 赞同：1
> 
> 时间：2012-09-05T16:26:55.543
> 
> 标签：python, google-app-engine, date, datetime

我需要将python中的日期分解为：年、月、日和时间（小时）。

我有一个对象列表，每个对象都有一个日期属性：

```
startDate=db.DateTimeProperty(auto_now_add=True) 
```

date 属性包含年、月、日和时间。

我希望创建一个新的嵌套列表（字典），其中：

外部列表- 是一个年份列表（至少存在一个输入日期）-> 每年内部是一个月份列表（该年至少存在一个输入日期）-> 在此内部天（与月份相同 - 输入列表中存在的天数）-> 在其中一个时间列表（小时）......每个我们指向它的各自对象。

我希望这很容易理解。

如果我得到下面的列表作为输入：

```
{obj1 -> (2000 Dec 18 9:00AM), obj2 -> (2000 Dec 19 1:00PM)} 
```

它会把它们夹在一起，所以我会有

```
(2000) -> (Dec) -> {(18) -> (9:00AM) -> obj1 ,(19) -> (1:00PM) -> obj2} 
```

我希望这是有道理的..

基本上我有很多带有日期的事件，我想像这样列出它们：

```
Year ->
Month(s) of interest->
Day(s) of interest->
(event times)
.
.
.

Another Year ->
Relevant Month(s) ->
Relevant Day(s) ->
(event times)
.
.
. 
```

代替：

```
(Event1 : complete date & time) , (Event2 : complete date & time) , (event3 : complete date & time) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:57:38.197

```
class a: ## Using this class just to explain
    def __init__(self,y,m,d,t):
        self.y=y
        self.m=m
        self.d=d
        self.t=t

o1 = a(2000,12,18,9) ## Just assuming integers here. you can choose immutable objects here
o2 = a(2000,12,19,13)
o3 = a(2001,11,18,9)
o4 = a(2000,11,18,6)
o5 = a(2000,12,6,7)

l=[o1,o2,o3,o4,o5]

d={}

for o in l:
    if o.y not in d:
        d[o.y] = {}
    # print d
    if o.m not in d[o.y]:
        d[o.y][o.m]={}
    if o.d not in d[o.y][o.m]:
        d[o.y][o.m][o.d]={}
    if o.t not in d[o.y][o.m][o.d]:
        d[o.y][o.m][o.d][o.t]=o 
```

您可以尝试生成格式更好的输出：

```
for k,v in d.items():
    for j,h in v.items():
        print k,j,h 
```

我得到的输出为：

```
2000 11 {18: {6: <__main__.a instance at 0x0232E9E0>}}
2000 12 {18: {9: <__main__.a instance at 0x0232E940>}, 19: {13: <__main__.a instance at 0x0232E990>}, 6: {7: <__main__.a instance at 0x0232EA08>}}
2001 11 {18: {9: <__main__.a instance at 0x0232E9B8>}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:59:41.897

```
ytree = {}
for obj in objects :
  dt = obj.time_field
  year = dt.year
  month = dt.month
  day = dt.day
  hour = dt.hour

  if not ytree.get(year):
    ytree[year] = {}
  if not ytree[year].get(month):
    ytree[year][month] = {}
  if not ytree[year][month].get(day):
    ytree[year][month][day] = {}
  if not ytree[year][month][day].get(hour):
    ytree[year][month][day][hour] = []
  ytree[year][month][day][hour].append(obj.event_name) 
```

# android - 将 ANE 与 APK 打包

> ID：12285849
> 
> 赞同：0
> 
> 时间：2012-09-05T16:27:08.500
> 
> 标签：android, air, apk, adt

Adobe 文档缺少这一非常重要的部分，而 ADT 本身的“文档”是由一个患有非常严重的强迫症的人编写的，因此无法理解它。我需要一个真正成功的人的建议。

下面是我的 Ant 脚本中的一些内容，它应该打包 APK，我需要在其中包含 ANE 文件：

```
 <target name="package-android-quiet"
          description="Packages Android .apk">
    <echo>${source-dir}</echo>
    <exec executable="${adt}" failonerror="true">
      <arg line="-package"/>
      <arg line="-target apk-debug"/>
      <arg line="-storetype PKCS12"/>
      <arg line="-keystore ${certificate}"/>
      <arg line="-storepass ${password}"/>
      <!-- what goes into ${ane}? -->
      <arg line="${ane}"/>
      <arg line="${output}"/>
      <arg line="${application-xml}"/>
      <arg line="${input}"/>
      <arg line="-C ${source-dir}" />
    </exec>
  </target> 
```

假设我有文件 Foo.ane 和 Bar.ane 在`${source-dir}`我如何告诉打包程序使用它们？到目前为止，我收到一个错误：

> 在目标平台上找不到应用程序所需的本机扩展“Foo”的实现。

如果您可以通过任何其他方式做到这一点，因为它们是自动/跨平台的 - 建议离开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:52:23.433

有时它只是发布问题帮助......命令行帮助上的 grep 最终显示了一个`-extdir`选项，这似乎是我正在寻找的。

# matlab - 在不同的值上绘制 matlab 函数

> ID：12285850
> 
> 赞同：1
> 
> 时间：2012-09-05T16:27:10.660
> 
> 标签：matlab, plot

我在 Matlab 中有 3 个函数：

```
function [turbine] = turbem(a,t)

turbine=zeros(size(a));
c1=a<90;
c2=a>90 & a<270;
c3=a>270;

turbine(c1)=0;
turbine(c2)=t*0.5*(1+cos((a*pi)/90));
turbine(c3)=0;

end 
```

```
function [compressor]=compem(a,c)

compressor=zeros(size(a));
c1=a<=90;
c2=a>90 & a<270;
c3=a>=270;

compressor(c1)=abs(cos((a*pi/180)))*c;
compressor(c2)=0;
compressor(c3)=abs(cos((a*pi/180)))*c;

end 
```

```
function [plume]=plumem(a,p)

plume=zeros(size(a));
c1=a<90;
c2=a>=90 & a<=270;
c3=a>270;

plume(c1)=(a/90)*p;
plume(c2)=1*p;
plume(c3)=((360-a)/90)*p;

end 
```

所有函数都计算出飞机上发动机不同部分的热量排放值，具体取决于从某些角度看发动机的某些部分的角度。

下一部分允许我输入值，并获得所需的端点，即总排放量，具体取决于可以看到的发动机数量。

```
a=input('Enter Azimuth Angle');
t=input('Enter Turbine Emission Component');
c=input('Enter Compressor Emission Component');
p=input('Enter Plume Emission Component');
b=input('Enter Body Emission Component');

engemission=(turbem(a,t)+compem(a,c)+plumem(a,p)+b)
totalengines=(e1(a)+e2(a)+e3(a)+e4(a))
totalemission=totalengines*engemission 
```

e1(a)、e2(a) 等如下所示： function engine1=e1(a)

```
engine1=zeros(size(a));
c1=a<=45;
c2=a>45 & a<155;
c3=a>=155;

engine1(c1)=1;
engine1(c2)=0;
engine1(c3)=1;

end 
```

基本上，我希望能够从各个角度绘制这个的各个方面`0:5:360`。我想看到一个 , , 的图表，`turbem`最后是从 0 到 360 的所有值，以 5 为增量。`compem``plumem``totalemission`

这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:37:47.947

不是接收 a 的输入，而是将 a 定义为 0->360 度，步长为 5，然后转换为弧度。

```
a=pi*(0:5:360)/180; 
```

然后完全按照您的操作计算这些角度的发射分量，然后使用极坐标图来呈现它们

```
polar(a,totalemission); 
```

对于您没有明确保存的术语，`turbem(a,t)`您应该将它们存储在一个新变量中，例如`turbineEmission`这样您就可以在不重新计算的情况下绘制它们。

我没有详细检查你的实现，但它似乎已经充分矢量化，可以让这种方法正常工作。需要注意的一点是，最好不要将逻辑数组存储到 c1、c2 和 c3 变量中。所以例如在 e1 你会使用

```
engine1(a<=45)=1;
engine1(a>45 & a<155)=0;
engine1(a>=155)=1; 
```

更新：好吧，忽略最后一部分。看起来 2011b 上的两个实现之间的速度差异可以忽略不计（感谢 Matlab！）

# facebook - 如何：通过 Facebook 强制描述共享网址？

> ID：12285851
> 
> 赞同：0
> 
> 时间：2012-09-05T16:27:10.833
> 
> 标签：facebook

我正在使用[https://m.facebook.com/sharer.php?u=myUrl](https://m.facebook.com/sharer.php?u=myUrl)共享“myUrl”，如何强制描述共享链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:05:44.420

不要使用共享器，它已经被弃用了一段时间。您是否查看过社交插件 - 点[赞按钮](https://developers.facebook.com/docs/reference/plugins/like/)并添加 OG 标签，例如 og:description，这将让您与预定义的描述共享您的 URL。

# opengl-es - 添加 UIView 作为 openGLView 的子视图在打开场景时显示闪烁

> ID：12285852
> 
> 赞同：0
> 
> 时间：2012-09-05T16:27:18.847
> 
> 标签：opengl-es, cocos2d-iphone, uikit, init

当我在 cocos2d 场景初始化中向 openGLView 添加子视图时，会显示闪烁

```
-(id) init
{
if( (self=[super init])) {

    _overlay = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
    self.overlay.alpha = 0.6f;
    [[[CCDirector sharedDirector] openGLView] addSubview:_overlay];
    ....
} 
```

有谁知道如何避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:50:22.403

修复了此更改：

```
EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                               pixelFormat:kEAGLColorFormatRGB565
                               depthFormat:0
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0]; 
```

我曾经有：

```
multiSampling:YES
numberOfSamples:4]; 
```

# msbuild - 在解决方案构建时创建网站 webdeploy 包

> ID：12285853
> 
> 赞同：1
> 
> 时间：2012-09-05T16:27:22.873
> 
> 标签：msbuild, msdeploy, webdeploy, msbuild-wpp

我有一个 VS 2010 WCF 服务解决方案，我想通过 web 部署包部署到 IIS 7.5 服务器。我希望在构建 WCF 服务项目时生成 Web 部署包。我已经看到了如何在构建后通过将用于 Web 部署的 MS Build 目标导入 .csproj 来启动 Web 部署打包的其他示例。但是我不能把我的头绕在我可能会或可能不会这样做的事情上。

我希望我的 web 部署包在目标服务器上部署时执行以下任务：

*   在目标服务器上创建一个带有应用程序池的新网站，以使用 NETWORK SERVICE 身份的目标框架 4.0
*   添加站点绑定以在特定端口上启用 net.tcp 并启用 http 和 net.tcp 协议
*   在这个新站点下创建一个 Web 应用程序以指向特定的文件系统文件夹
*   运行 .bat 文件以启动几个 net.tcp 相关服务以支持非 http WCF 激活

从我读过的关于 web 部署的任何内容来看，其中一些可以通过 webdeploy 清单文件完成，包括特定的提供程序。我不明白的是告诉 MS 构建打包机制传递提供程序以包含在清单和值中。我对 Web 部署相当陌生，任何解决此问题的帮助/指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:00:13.797

前三项可以使用提供程序完成，如果您将和属性都[`appHostConfig`](http://technet.microsoft.com/en-us/library/dd569080%28v=ws.10%29.aspx)设置为 ，则应该包含它。`IncludeIisSettings``UseIis``true`

最后一项可以通过[`runCommand`](http://technet.microsoft.com/en-us/library/ee619740%28v=ws.10%29.aspx)提供者作为清单的一部分或通过[`preSync`/`postSync`](http://technet.microsoft.com/en-us/library/dd569089%28v=ws.10%29.aspx)来完成。

WPP（MSDeploy 之上的 MSBuild 东西）不支持`preSync`/ `postSync`，但您可以使用以下`runCommand`命令显式包含提供程序`MsDeploySourceManifest`：

```
<!-- Create a WebProjectName.wpp.targets file in the root 
     of your web application (WebProjectName)
-->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <AfterAddContentPathToSourceManifest>
      $(AfterAddContentPathToSourceManifest);
      AddPostSyncProviders
    </AfterAddContentPathToSourceManifest>
  </PropertyGroup>

  <Target Name="AddPostSyncProviders">
    <MsDeploySourceManifest Include="runCommand">
      <Path>absolute path to exe on target machine</Path>
    </MsDeploySourceManifest>
  </Target>
</Project> 
```

仅供参考 -[根据这个问题](https://stackoverflow.com/questions/4867758/msdeploy-runcommand-using-relative-path)`runCommand`，只能在目标机器上执行绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:10:30.687

我采用的方法是使用 MSBuild 构建包并使用 MSDeploy 将其部署到服务器。我使用以下命令行，就我而言，我使用的是巡航控制：

```
/p:Configuration=Release 
/p:MSDeployPublishMethod=WMSVC 
/p:DeployOnBuild=True 
/p:DeployTarget=Package 
/p:CreatePackageOnPublish=True 
/p:DeployIisAppPath=$(SolutionName)/$(ProjectName) 
/p:MsDeployServiceUrl=https://<servername>:8172/MsDeploy.axd 
/p:AllowUntrustedCertificate=True 
/p:username=<username>
/p:password=<password>
/p:EnablePackageProcessLoggingAndAssert=True
/p:PackageLocation=$(WorkingMainDir)$(ProjectName)$(ProjectType)\Package\$(SolutionName).zip
/p:IntermediateOutputPath=$(WorkingMainDir)$(ProjectName)$(ProjectType)\Temp\
/p:AutoParameterizationWebConfigConnectionStrings=true
/p:UseWPP_CopyWebApplication=true 
```

然后我使用 msdeploy 部署生成的包，以下链接（已接受的答案）是关于如何执行此操作的好文章：

[msdeploy（Web 部署）因 401 身份验证问题而失败](https://stackoverflow.com/questions/4428562/msdeploy-web-deploy-failing-with-401-auth-issues)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-13T16:49:42.737

尝试过，但此后项目无法加载： < MsDeploySourceManifest > 下面的元素 < Path > 无法识别。

# python - 什么是一种快速算法，可以找到一条至少遍历加权无向图的每个节点一次的短路径？

> ID：12285858
> 
> 赞同：4
> 
> 时间：2012-09-05T16:27:41.363
> 
> 标签：python, search, artificial-intelligence, computer-science, heuristics

我的问题如下：

我有一个无向图。每条边都有一个成本（或权重）。其中一个节点标记为 S。我想从 S 开始并至少访问每个节点一次。允许多次访问一个节点。允许沿着一条边多次移动，尽管这会使解决方案更加昂贵——以 3 的成本移动一条边两次将使总路径的成本增加 6。该图有一些“死胡同”节点，所以有时我们*必须*不止一次地遍历一条边。

什么是执行此操作的快速算法？这是一个众所周知的问题吗？

我在找什么：

相当快——我们在这里讨论的图形的相对大小是 40 - 50 个节点的顺序。所以算法希望不会超过 10 - 15 秒。

合理最优——我不是在寻找绝对最优。任何有趣的启发式方法来指导搜索以使解决方案接近最优就足够了。

我将用python写这个。因此，如果您知道该算法的任何 python 实现，那是最好的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:10:22.863

这是旅行推销员问题的一个版本，[维基百科的文章](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Heuristic_and_approximation_algorithms)对此有很好的概述，对各种不同的启发式方法都有很好的概述。

标准 TSP 和您的算法之间的最大区别在于，TSP 通常只强制每个节点进行一次访问，而您允许多次访问。这个问题在[这个](https://stackoverflow.com/questions/1458048/variation-of-tsp-which-visits-multiple-cities)SO question 中得到了很好的回答。

[这家伙](http://blog.showmedo.com/python-showmedos/solving-the-travelling-salesman-problem-tsp-with-python/)记录了他的 Python TSP 解决方案，[这](http://www.python.org/doc/essays/graphs/)是关于如何在 Python 中实现图形内容的非常有用的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:44:27.023

## 单源最短路径

如果你有一个节点 $s$ 并且想要找到到节点 $t$ 的最短路径。

如果图具有非负边权重，[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)将在 $O(|E| + |V|\log |V|)$ 时间内找到最优答案。

但是，如果图包含负边权重，[Bellman-Ford 算法](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)将在 $O(|V||E|)$ 时间内找到最优答案，但受限于图不包含负权重循环的约束。

## 全对最短路径

*这是为了找到图中任意*两个节点$u,v$之间的最短路径。它可以通过[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)在时间 $O(|V|^3) 中求解。$ 与 Bellman-Ford 方法类似，该图不得包含负权重循环。

负权循环约束的原因是最短路径可以不断地走循环并减少其权重（如下所示）。

![在此处输入图像描述](../Images/1fca1ad901109bbbd554691eda8ce656.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:07:56.357

使用迭代有限深度优先搜索

看

[http://en.wikipedia.org/wiki/Depth-limited_search](http://en.wikipedia.org/wiki/Depth-limited_search)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T18:13:55.497

一种简单的方法是为您的图构建*最小生成树*并在其上进行（深度优先）遍历，跳过已经访问过的节点。

这被证明不超过最佳 TSP 路径的两倍。你绝对可以用启发式方法做得更好，但它是一个初学者（也很容易实现）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T16:30:53.340

编辑 3：不，仍在寻找

* * *

编辑2：

我们去darksky，我已经很久没有这样做了哈哈

[Djikstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

D 的算法找到从您的起始节点和图中的每个其他节点的最短距离。

这是一个看起来可以合理修改以使用您的代码的python实现：

[Python 实现](http://code.activestate.com/recipes/119466-dijkstras-algorithm-for-shortest-paths/)

* * *

编辑：正如评论中正确指出的那样， A* （在一次迭代中）用于单个路径。因此，不满足您访问每个节点一次的要求。我仍然认为 TSP 比您面临的问题要复杂得多，因为您可以访问节点 > 1 次。

原件：A*

[A* 维基文章](http://en.wikipedia.org/wiki/A%2a_search_algorithm)

我喜欢在大学里解决这个问题，享受吧！

# mysql - 从特定文件位置导入 mysql 数据库的脚本

> ID：12285860
> 
> 赞同：1
> 
> 时间：2012-09-05T16:27:58.397
> 
> 标签：mysql

> **可能重复：**
> [是否可以从 url 将 sql 文件导入 mysql 数据库](https://stackoverflow.com/questions/5745920/is-it-possible-to-import-sql-file-to-mysql-database-from-a-url)

我想将一个 SQL 文件导入我的数据库。问题是我不能把这个文件放到我的电脑上，因为它太大了。

我想使用MySQL通过它的**URL从服务器导入它。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:36:26.667

如果文件可通过 URL 访问，您可以执行以下操作：

```
curl 'http://whatever' | mysql -u username -p db_name 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T16:32:12.113

您是否考虑过只使用 mysql 命令行，例如：

```
mysql -h hostname -u username -p db_name < /path/to/dump_script.sql 
```

在这里查看更多信息

[http://dev.mysql.com/doc/refman/5.5/en/mysql.html](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)

# iphone - 在 ios 6 上使用我的应用获取当前用户的位置时遇到问题

> ID：12285861
> 
> 赞同：0
> 
> 时间：2012-09-05T16:28:08.517
> 
> 标签：iphone, core-location, locationmanager, ios6

我的应用程序在 iOS 5 上运行良好，我得到了普通用户的位置信息。但是在 iOS 6 上安装我的应用程序时，我的应用程序无法获取用户的位置（我没有询问权限位置的弹出窗口，并且在位置服务中我没有我的应用程序的图标。其他应用程序喜欢`Instagram`并且`Path`有iOS 6 定位服务中应用程序的图标）。当我使用下面的代码检查此问题时，`NSlog`显示：`Unable to determine, possibly not available`

我不明白为什么会这样。我尝试过其他应用程序，例如 Instagram 或 Path。我们仍然得到普通用户的位置。我在 中研究了 iOS 6 更改方法委托`CLLocationManagerDelegate`，但我认为这不是原因，因为我的应用程序没有请求获取用户位置的权限。

```
if ([CLLocationManager locationServicesEnabled]) {
        NSLog(@"Location Services Enabled");
        switch ([CLLocationManager authorizationStatus]) {
            case kCLAuthorizationStatusAuthorized:
                NSLog(@"We have access to location services");
                break;
            case kCLAuthorizationStatusDenied:
                NSLog(@"Location services denied by user");
                break;
            case kCLAuthorizationStatusRestricted:
                NSLog(@"Parental controls restrict location services");
                break;
            case kCLAuthorizationStatusNotDetermined:
                NSLog(@"Unable to determine, possibly not available");
                break;
            default:
                break;
        }
    }
    else {
        NSLog(@"Location Services Are Disabled");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:29:48.913

我也有同样的问题。对于我的应用程序，之所以会出现这种情况，是因为我检查了 locationServices 是否已启用，并且仅当它为 true 时才开始更新位置 ([self.locationManager startUpdatingLocation]。)

```
+ (BOOL)locationServicesEnabled {
    if (([CLLocationManager locationServicesEnabled]) && ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized)) {
        return YES;
    } else {
        return NO;
    } 
} 
```

没有检查的 [self.locationManager startUpdatingLocation] 看起来不错，但可能会产生其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:11:53.240

我认为您的问题是，您只需检查位置是否可用，但不要使用它。所以 iOS 从不请求许可，因为它没有被使用。你的支票工作正常！

使用像[这样](http://mobileorchard.com/hello-there-a-corelocation-tutorial/)的教程，它会起作用。所以我为我解决了它！

# c# - 我应该在界面上使用反引号约定吗？

> ID：12285865
> 
> 赞同：4
> 
> 时间：2012-09-05T16:28:24.857
> 
> 标签：c#, generics, type-parameter

当您有一个具有不同类型参数重载的泛型类时，似乎普遍接受您在文件名中使用反引号语法：

```
MyType.cs
MyType`1.cs
MyType`2.cs 
```

接口也一样吗？例如：

```
IRepository.cs
IRepository`2.cs 
```

你有这些相应的类型参数：

```
public interface IRepository { 
```

和

```
public interface IRepository<T, in TId> { 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T16:31:12.073

文件约定只是个人/团队的偏好。你可以这样做，如果你愿意的话。

我个人倾向于将这些放在同一个文件中。如果我正在寻找`IRepository`，我会假设任何和所有`IRepository`接口都是相似的，并且都代表一个“存储库”，所以我只会在同一个地方寻找它们。这将避免需要找出``2`要搜索的 .etc 文件中的哪些。对我来说，“IRepository`5.cs”并不比在一个文件中找到这些更易读或更容易被发现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:30:51.757

是的。
此约定适用于所有类型的类型——类、接口和委托。

# maven - m2eclipse（在 Mule Studio 1.3.0 中）没有为我的附加资源目录创建源文件夹

> ID：12285866
> 
> 赞同：1
> 
> 时间：2012-09-05T16:28:34.577
> 
> 标签：maven, m2eclipse, mule

我在项目的 pom.xml 中添加了以下内容：

```
<resources>
    <resource>
        <directory>src/main/app</directory>
    </resource>
    <resource>
        <directory>src/main/resources</directory>
    </resource>
</resources> 
```

我正在运行基于 Eclipse 3.6 (Helios) 的 Mule Studio 1.3.0。我通过更新站点添加了 m2eclipse 1.1.0.20120530-0009。

问题是目录 src/main/app 没有作为源文件夹出现，因此它的内容不在类路径中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:09:30.627

从 mule 的角度来看，将**src/main/app**文件夹添加为资源并不完全正确。

事实上，这会弄乱生成的[Mule 应用程序结构](http://www.mulesoft.org/documentation/display/MULE3USER/Application+Format)，并且 app 文件夹的内容最终会出现在 zip 的根目录和 classes 文件夹中。

相反，**src/main/app**文件夹应该是测试资源的一部分，您可以通过将以下插件添加到您的 maven 构建中来做到这一点：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>build-helper-maven-plugin</artifactId>
<version>1.7</version>
<executions>
    <execution>
        <id>add-source</id>
        <phase>generate-sources</phase>
        <goals>
            <goal>add-test-source</goal>
        </goals>
        <configuration>
            <sources>
                <source>${basedir}/src/main/app/</source>
            </sources>
        </configuration>
    </execution>
</executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:51:01.730

您需要告诉 m2e 更新其配置。右键单击您的项目 > Maven > 更新项目...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:21:20.727

只是为了让未来的读者继续阅读，这就是我现在在我的 pom 中拥有的东西：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>build-helper-maven-plugin</artifactId>
  <version>1.7</version>
  <executions>
    <execution>
      <id>add-test-resource</id>
      <goals>
        <goal>add-test-resource</goal>
      </goals>
      <configuration>
        <resources>
          <resource>
            <directory>src/main/app</directory>
          </resource>
        </resources>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# iphone - 使用 NSDateFormatter 解析 GMT-5 +DST

> ID：12285870
> 
> 赞同：1
> 
> 时间：2012-09-05T16:28:39.270
> 
> 标签：iphone, ios, date

我很难将日期从字符串转换为以下格式的 NSDate：

```
2012-09-05 12:00 GMT-5 +DST 
```

到目前为止，我有这个代码：

```
NSString *myDateStr = @"2012-09-05 12:00 GMT-5 +DST";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"YYYY-MM-DD HH:mm:ss Z"];
NSDate *date = [formatter dateFromString:myDateStr]; 
```

我无法控制日期字符串的格式，因为它来自 API。

我可能需要编写一个自定义格式化程序来解析这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:28:25.793

Pass your date string to this function, which would return NSDate object.

You can recheck if you are getting the correct value as **GMT-5 +DST is same as CDT**. [Reference](http://wwp.greenwichmeantime.com/time-zone/usa/central-time/central-daylight-time.htm)

Setting the timeZone as CDT would give you the same result.

```
-(NSDate *)timeConvert:(NSString *)string
{
      NSString *firstString = [string substringToIndex:16];
      NSString *lastString = [string substringFromIndex:17];

      NSLog(@"%@, %@", firstString, lastString);
      NSTimeZone *timeZone = [NSTimeZone  timeZoneWithName:lastString];
      NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
      [formatter setDateFormat:@"yyyy-MM-dd HH:mm"];
      [formatter setTimeZone: timeZone];

      NSDate *date = [formatter dateFromString:firstString];

      return date;
} 
```

# wcf - WCF REST、PerCall、Castle.Core 拦截器性能问题

> ID：12285876
> 
> 赞同：2
> 
> 时间：2012-09-05T16:29:32.037
> 
> 标签：wcf, rest, service, intercept

我有 n 层应用程序，其中“WCF REST 服务应用程序”位于顶部。出于性能考虑，上下文模式为 PerCall 如下

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] 
```

我还有一个 Intercept (Castle.Core) 用于记录目的，就像这样：

*   [拦截器](http://docs.castleproject.org/Default.aspx?Page=Interceptors&NS=Windsor)
*   [记录 AOP 方式](http://ayende.com/blog/3474/logging-the-aop-way)

实施：

```
public static readonly ProxyGenerator generator = new ProxyGenerator();

public static T Create<T>(object target, ILog log)
{
    return (T)generator.CreateInterfaceProxyWithTarget(typeof(T), target, new LoggingInterceptor(log));
}

private class LoggingInterceptor : IInterceptor
{
        ...
} 
```

拦截器：

```
IUserHandler handler = ObjectFactory.Create<IUserHandler>(new UserHandler(), log);

handler.GetUsers(); 
```

通过使用拦截器，每个方法调用都有大约 0.3 秒的额外时间，这是相当多的。为什么？！有没有另一种方法可以让拦截器在没有如此巨大的性能开销的情况下工作？！

# windows-phone-7 - 在 Windows Phone 7 应用程序中绑定数据时页面不滚动

> ID：12285880
> 
> 赞同：0
> 
> 时间：2012-09-05T16:30:07.833
> 
> 标签：windows-phone-7, windows-phone-7.1

我在 windows phone 7 应用程序开发中工作。我正在应用程序中实现几个页面，如仪表板和好友列表、聊天列表。

加载页面后，我正在调用相关页面的仪表板、朋友和聊天列表的更新并绑定这些结果。由于数据量大，这个过程需要一些时间。在此过程中，如果我滚动页面，它不会滚动。

在加载过程中，如果我们单击页面的任何其他控件也不起作用。

请提出任何解决方案？

谢谢&问候基肖尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:22:35.837

提前抱歉一般性答案，但你的问题不是很具体。

最有可能导致您的问题的事情是：
- UI 线程上发生了许多不应该/不需要的活动
- 一次加载比必要更多的项目
- 在可能合适的情况下不使用虚拟化列表这样做

# javascript - 从确认框中预填充输入文本框

> ID：12285886
> 
> 赞同：0
> 
> 时间：2012-09-05T16:30:21.257
> 
> 标签：javascript, input, textbox, confirm, autofill

有谁知道我可以实现以下目标的方法？

当用户在输入框中输入 1 时，会弹出一个警报，但我希望用户能够确认新值并自动用最小值填充输入字段或取消并且该字段保持空白。

到目前为止，我有以下代码：

```
function Form_Validator(theForm)
{
    var err = false;
    var field;
    var msg = 'Please correct the following to continue...\n';
    var alpha = /\w/;
    var numeric = /[^0-9^\s]/;
    var emailvalidator = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;

    var teststr = '';

        if(theForm.prod_quantity.value == '1'){
        msg += '\nThe minimum order amount is 2.';
        if (!err){
            field = theForm.prod_quantity;
            err = true;
        }
    }

        if (!err){
        return true;
    }
    else{
        alert(msg);
        field.focus();
        return false;
    }
}

<b>Quantity:</b> <input type="text" class="prod_quantity" name="prod_quantity"  />
<input type="submit" value="" class="add-basket-btn"/> 
```

我设法让一个警告框出现，但是我不知道如何让它自动填充，以便在他们点击确定时值变为 2。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:37:49.060

使用简单的`confirm()`对话框而不是`alert()`条件，并在输入框中设置所需的值：

```
if (confirm (msg)) {  // ask for confirmation
   // set the new value 
   theForm.prod_quantity.value = 2;
} else {
   // leave the box blank
   theForm.prod_quantity.value = '';
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:38:35.763

```
// ...
var orderAmount = confirm(msg);
if ( orderAmount ) theForm.prod_quantity.value = "2"; 
```

# java - JmDns.create 不绑定到 InetAddess

> ID：12285889
> 
> 赞同：1
> 
> 时间：2012-09-05T16:30:31.437
> 
> 标签：java, jmdns

我正在运行 Ubuntu。尝试创建 JmDNS 服务`JmDNS.create()`但未绑定到 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:31:54.667

这是一个错误，您需要创建 `JmDNS.create(InetAddressString)`这个才能工作。

# php - 使用 jwagener 的 recorder.js 和 recorder.swf 将录音上传到服务器

> ID：12285890
> 
> 赞同：1
> 
> 时间：2012-09-05T16:30:36.443
> 
> 标签：php, audio

我正在尝试在客户端录制音频并将其运送到服务器进行处理。我已经成功地能够在客户端录制和播放音频。当我需要将信息发布到服务器时，我的问题就出现了。

我正在使用 jwageners 的 recorder.js：[https ://github.com/jwagener/recorder.js#readme](https://github.com/jwagener/recorder.js#readme)

我在站点的主目录中有一个 crossdomain.xml 文件。内容如下

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM
"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
   <allow-access-from domain="*" secure="false"/>
</cross-domain-policy> 
```

根据他的文档，发布请求如下所示：

```
 function upload(){
     Recorder.upload({
        method: "POST",                            
        url: "http://localhost/fagaudio/recorder/recorder_server.php",  
        audioParam: "audiofile",           
         params: {                                  
           "name": "test.wav",
         },
        success: function(responseText){           
            alert(responseText); 
        },
        error: function(){                  

        }
      });
  } 
```

在服务器端（recorder_server.php）我正在尝试这样的事情：

```
print_r($_POST);
$name = $_POST['name'];
$content = file_get_contents('php://input');
$fh = fopen("audio/".$name, 'w') or die("can't open file");
fwrite($fh, $content);
fclose($fh); 
```

print_r 语句返回以下内容：

数组（[名称] => test.wav [文件名] => audio.wav [上传] => 提交查询）

似乎没有任何原始 php 发布数据，并且文件被保存为空。我在做什么明显有问题吗？我已经尝试过使用 WAMI 记录器，它工作得很好，但问题是我需要能够通过 javascript 将信息发布到服务器，而 wami 只是在每次录制后自动这样做。

提前感谢您的任何帮助或意见。此外，如果有人熟悉其他免费的 javascript/flash 记录器，请指出他们的方向。我已经通过堆栈溢出搜索了一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:55:33.423

尝试将以下代码放入php文件中，

```
 $save_folder = dirname(__FILE__) . "/audio";
if(! file_exists($save_folder)) {
  if(! mkdir($save_folder)) {
    die("failed to create save folder $save_folder");
  }
 }

$key = 'filename';
$tmp_name = $_FILES["audiofile"]["tmp_name"];
$upload_name = $_FILES["audiofile"]["name"];
$type = $_FILES["audiofile"]["type"];
$filename = "$save_folder/$upload_name";
$saved = 0;
if(($type == 'audio/x-wav' || $type == 'application/octet-stream') && preg_match('/^[a-zA-Z0-9_\-]+\.wav$/', $upload_name) ) {

  $saved = move_uploaded_file($tmp_name, $filename) ? 1 : 0;
 }

  print ($saved ? "Saved" : 'Not saved');

exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:59:43.707

使用这个[https://github.com/cykod/FlashWavRecorder](https://github.com/cykod/FlashWavRecorder)

我用过这个，效果很好。

您可以录制，播放，也可以将录制的文件上传到服务器，这里也使用了recorder.js。

# javascript - 渲染主干视图时收到通知

> ID：12285900
> 
> 赞同：1
> 
> 时间：2012-09-05T16:30:53.783
> 
> 标签：javascript, backbone.js, coffeescript, backbone-views

我正在研究一个`Backbone.View`应该将集合呈现为可滚动列表的方法。

作为初始渲染的一部分，我需要访问一些布局属性（例如`clientWidth`），这些属性仅在视图被渲染后才可用。

我的问题是，*我怎么知道视图何时被添加到 DOM 中？*

* * *

使用 a`Backbone.View`通常有两种方法可以将视图附加到 DOM：

1.  创建视图>渲染它>附加它：

    ```
    view = new MyList().render()
    $('#dummy').append(view.$el) 
    ```

2.  创建视图并就地渲染：

    ```
    new MyList({el: '#dummy'}).render() 
    ```

*注意：我知道 (1) 和 (2) 并不完全等价，这不是重点。*

* * *

让我们考虑一下我的列表是这样定义的：

```
class MyList extends Backbone.View
    render: ->
        @$el->html( ... )
        @

    layout: ->
        max = $el.scrollWidth - $el.clientWidth
        # ... disable / enable scrolling arrows based on max ... 
```

* * *

在 MyList 附加到 DOM 之后，如何确保调用 layout()？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T07:00:02.650

我遇到了这个问题，并且有一些可以提供帮助的模式。Backbone 为您提供工具，但不告诉您如何使用它们。在使用它时建立良好的模式非常重要。我使用了两种不同的模式来帮助解决这个问题。

1) 根据您的应用程序的工作方式，确保在渲染视图并将其附加到 DOM 后始终调用`attached()`方法或触发视图上的事件可能容易或困难。`attached`就我而言，这很容易，因为我创建了一个架构，我可以在一个中心位置处理它。

2）如果您总是在渲染后立即将元素附加到 DOM - 特别是在您渲染后的任何时候而不通过在异步回调中延迟附加，那么在您的 render() 函数中，您可以推迟调用`layout()`或任何需要运行的东西附着后。像这样：

```
var MyList = Backbone.View.extend({
  render: function() {
    /* rendering logic goes here */

    // Notice that the timeout is 0 - you can actually not even pass this argument
    // but I wanted to emphasize that there is no delay given.
    setTimeout(this.layout, 0);

    return this;
  },

  layout: function() {
    // This code won't be run until after this.el is attached to the DOM
  }
});

var view = new MyList().render();
$('#dummy').append(view.$el); 
```

Javascript 一直是单线程的。I/O 可以异步完成，但是任何需要 JS 引擎时间的东西都不能与其他 JS 代码并行运行。当您在`setTimeout()`没有最后一个参数或它的值的情况下调用时，`0`实际上会将其排队等待在当前执行的代码完成后尽快运行。

如果您遵循始终在调用后立即附加到 DOM 的模式，则可以利用这一事实`render()`——在当前执行的代码完成运行并将控制权返回给 JS 引擎以运行接下来排队的任何内容之前的任何时间。当排队的函数`setTimeout(func, 0)`运行时，您就可以知道您的视图已附加到 DOM。请注意，这与 what [`_.defer()`](http://documentcloud.github.io/underscore/#defer)does 相同，但我想为您解释一下。

再一次，模式的建立非常重要。如果您从来没有保持一致并且没有在应用程序中建立模式，那么您就没有任何保证，并且您将失去依靠这种机制的能力——以及您可能能够建立的其他机制。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:44:22.280

这是一个看似困难的问题。有[DOM Mutation Events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)，但是 AFAIK 这些没有跨浏览器实现，并且无论如何都被弃用了。[Mutation Observers](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)似乎是执行此操作的新方法，但同样，我不确定兼容性。

一个万无一失但昂贵/混乱的方法是轮询以查看身体是否在祖先链中的某个位置。

```
whenInserted = function ($el, callback) {
  check = function () {
    if ($el.closest('body').length) { // assuming a jQuery object here
      callback();
    } else {
      setTimeout(check, 100);
    }
  };
  check();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T06:43:47.713

我对其中一些答案的糟糕程度感到惊讶。JQuery 方法是同步的。

因此，在 Backbone.View 渲染函数中，您有几个不错的选择：

//只调用一个函数

```
 render:function(){

          //first, use Backbone/jQuery to append to DOM here

           //second 

   this.callSomeFunctionToSignifyRenderIsDone();

      return this;
    } 
```

//触发一个事件

```
render:function(){

   //use Backbone/jQuery to append to DOM here

   Backbone.Events.trigger('viewX-rendered'.); //trigger an event when render is complete

  return this;
} 
```

或者，万一您的渲染方法具有异步代码，您可以将可选回调传递给渲染函数：

```
render: function(callback){

   //use Backbone/jQuery to append to DOM here

  if(typeof callback === 'function'){
     callback(null,'viewX-rendered'); //invoke the error-first callback
}
} 
```

考虑到从渲染返回“this”以链接 Backbone 调用是首选模式，那么前两个选择可能是更好的选择。

最后，如果您当前的渲染方法确实是异步的，也就是说，将内容附加到 DOM 的 jQuery 代码正在异步发生，那么您可以使用 jQuery 像这样将侦听器附加到 DOM 元素

[https://gist.github.com/azat-co/5898111](https://gist.github.com/azat-co/5898111)

# javascript - 在Javascript中对哈希值实施蛮力攻击

> ID：12285901
> 
> 赞同：1
> 
> 时间：2012-09-05T16:31:01.140
> 
> 标签：javascript, hash, brute-force, cracking

在我解决实际问题之前，我想澄清一些事情，因为我知道“使用 javascript 暴力破解”在脱离上下文时听起来是多么荒谬:)。

我正在为我的学士论文工作，最后我的目标是实现一个基于 Javascript 的概念验证哈希破解器。这个想法是这样工作的：用户可以提交一个哈希值以及有关所使用算法的信息。（其他）用户也可以点击网站上的按钮参与破解过程。服务器的任务是接受提交的“订单”并将其拆分为范围，具体取决于可用工人的数量。然后将范围发送给单击所述按钮的客户。

我目前遇到两个大问题，即如何实际实现这个蛮力功能。所以我现在的主要问题是，坦率地说，我还没有真正适应 Javascript。对于初学者，我只会使用硬编码字符集：字母数字、大小写字母，没有特殊字符。问题是老实说，我完全不知道如何实际实现尝试所有字符组合的功能，以及如何编程。我可以想象使用一个包含字符集的普通数组，然后是两个字符串。一个字符串将包含范围，另一个将包含尝试过的组合。所以我不得不以某种方式遍历 charset 数组，而字符串可能使用级联的 for 循环或其他东西，但我真的被“如何”的问题所困扰:)。我不 不希望你们中的任何人真正为我提供这样一个函数的完整源代码（除非你当然想要），但我真的很感激一些关于如何实现这样一个蛮力函数的提示或解释。在这一点上，我也不关心性能或优化编码，而是全面编码，或者你可能想要的任何东西:)

对不起，如果我对我的问题中的一些细节感到模糊。如果是这样，请告诉我，我当然会尝试进一步澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:57:26.467

字母表上的蛮力风格功能。可能有更简单的方法可以做到这一点。

```
function brute(alphabet, match, int_start, int_stop){
    var a = alphabet, al = 0,                     // for alphabet
        m = match.toString(), ml = m.length,      // for our compare
        i = int_start || 0, j = int_stop || 0,    // range of numbers to test
        k = 0, l = 0, add = 0, sub = 0, diff = 0, // for building test string
        test = '', found = false;                 // test string and result

    if(i < 0) throw 'int_start must be at least 0';

    if(a.constructor !== undefined){           // We need a string or array as
        if( a.constructor.name !== 'String' && // our alphabet so we check for
            a.constructor.name !== 'Array' )   // correct input and modify if
                a = a.toString();              // necessary, or if we can't, 
    }
    else throw 'Bad alphabet type';            // we throw an error

    al = a.length;    // shorthand length

    add = al;                             // when i=0, we start prefix here
    while(add <= i - sub) sub += add,     // then work out what we have to
                          add = add * al; // prefix our number with

    diff = add - sub; // shorthand to save calculations

    while( i < j ){   // actual brute force loop starts here
        test = '';       // empty any previous string
        k = diff + i;    // convert our number from "x" to "1x"

        while(k > 0){           // build it as a string
            l = k % al;         // get index of digit
            test = a[l] + test; // add digit to string
            k = ( k - l ) / al; // move digits along
        }

        test = test.substring(1); // cut off the initial "1" we added

        if(test.length === ml && test === m){ // compare test to what you want
            found = true;
            break;
        }

        i++;                  // prepare for our next loop
        if(i - sub === add)   // and if we need another digit
            sub += add,       // then recalculate our prefix
            add = add * al,   // and then
            diff = add - sub; // update the shorthand 
    }

    // brute force ended, let's see what we've got

    if(found === false) i = -1; // if not found, return -1 as index

    return [i, test, m]; // index found, string found with, what we were looking for
} 
```

然后通过例如使用

```
brute('0123abcd', '0c', 0, 20); // [14, "0c", "0c"] 
```

# google-apps-script - 更改文本框中的文本时出错

> ID：12285902
> 
> 赞同：0
> 
> 时间：2012-09-05T16:31:01.530
> 
> 标签：google-apps-script

我创建了一个简单的 UI，只有几个文本框和几个按钮。这个概念基本上是我维护的电子表格的投票应用程序。当脚本运行时，它会将电子表格的每一行显示到文本框中，并允许用户对该项目进行投票。我手动创建了 UI：

```
function BuildUI() {
var app = UiApp.createApplication().setTitle("Voting Machine").setWidth(700);
var doc = SpreadsheetApp.getActiveSpreadsheet();
var buttonWidth = "125px";

// Panels
var mainPanel = app.createVerticalPanel();
var horzPanel = app.createHorizontalPanel();
var buttonGrid = app.createGrid(1,3);

// Textboxes
var txtCat = app.createTextBox().setName("txtCat").setId("txtCat");
var txtIdea = app.createTextBox().setName("txtIdea").setId("txtIdea");

// Handlers
var handler = app.createServerHandler();
handler.setCallbackFunction("recordVote");
handler.addCallbackElement(txtCat).addCallbackElement(txtIdea);

// Buttons
var voteNo = app.createButton("No").setId("voteNo")
  .addClickHandler(handler).setWidth(buttonWidth);
var voteMaybe = app.createButton("Maybe").setId("voteMaybe")
  .addClickHandler(handler).setWidth(buttonWidth);
var voteYes = app.createButton("Yes").setId("voteYes")
  .addClickHandler(handler).setWidth(buttonWidth);

horzPanel.add(txtCat).add(txtIdea)
buttonGrid.setWidget(0, 0, voteNo)
  .setWidget(0, 1, voteMaybe)
  .setWidget(0, 2, voteYes);
mainPanel.add(horzPanel).add(buttonGrid);

app.add(mainPanel);
doc.add(app);
} 
```

问题是当我调用 NextIdea 函数时出现错误：

```
function NextIdea() {
var app = UiApp.getActiveApplication();
... Get the next row of the spreadsheet ...
app.getElementById("txtCat").setText("TestValue"); // <--- This is the error line 
```

在我尝试在文本框中设置文本的行中，我收到错误消息“对象不允许添加或更改属性”。在调试窗口中，它给了我一个对象编号，但没有属性并且尝试`.getText`返回未定义。

这两个都由我的 ProcessVotes 函数触发，该函数由电子表格中的自定义菜单项调用：

```
function ProcessVotes() {
BuildUI();
NextIdea();
} 
```

这是我第一次尝试创建 GAS，不确定我缺少什么。我确实看到很多`return app;`在函数末尾使用的示例，但我的印象是仅在脚本作为服务发布时使用。我正在尝试在电子表格中使用它（使用`onOpen`而不是`onGet`等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:54:54.207

在这部分：

```
function NextIdea() {
var app = UiApp.getActiveApplication();
... Get the next row of the spreadsheet ...
app.getElementById("txtCat").setText(nextRowCat) // <--- This is the error line 
```

什么是 nextRowCat ？它应该是一个字符串（然后你忘记了''）？它是一个带有字符串值的变量吗？

无论如何，它应该是一个字符串;-)

根据您的评论进行编辑：您是否尝试过使用这个新版本的代码（`.setText("TestValue")`）？

此外，我在您的主要功能（您创建 UI 实例应用程序的那个）中没有看到任何显示（应用程序）.​​.....我想如果您显示整个代码或至少一个简化但'出现错误的可运行代码。

关于`getText()`返回未定义，这是一种正常行为：在 textBox 上没有这样的方法...（[请参阅文档](https://developers.google.com/apps-script/class_textbox)）检索其值的常用方法是`e.parameter.textBoxName`在处理函数中使用。

# python - Flask - 如何创建自定义 abort() 代码？

> ID：12285903
> 
> 赞同：34
> 
> 时间：2012-09-05T16:31:05.103
> 
> 标签：python, flask, abort

Flask 通过使用`abort()`或当错误真正发生时有一个很好的错误处理程序。

从 Flask 文档中有一个错误 404 处理程序的示例：

```
@app.errorhandler(404)
def not_found(error):
    return render_template('404.html'), 404 
```

因此，我尝试创建自定义错误代码，例如

```
if False:
    abort(777)

@app.errorhandler(777)
def something_is_wrong(error):
    return render_template('777.html'), 777 
```

但它不起作用，Werkzeug 调试器说： LookupError: no exception for 777

我发现[这个问题](https://stackoverflow.com/questions/11278671/is-there-an-easy-way-to-abort-with-status-code-429)说我应该这样做：

```
if False:
    return '777 error', 777 
```

不幸的是，上面的代码产生了白屏，甚至 Werkzeug 调试器也没有出来

我知道我可以简单地做：

```
if False:
    return render_template('777.html') 
```

但如果我使用`abort()`. 有没有办法创建自定义错误代码？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-05T16:40:31.460

可能的 HTTP 状态代码列表由 Internet 号码分配机构修复，因此您无法添加自定义状态代码。Werkzeug 认识到这一点并试图阻止您向浏览器发送无意义的代码。查看[状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)以找到与您的错误匹配的代码并使用该代码。

编辑：**向 Werkzeug/Flask 添加状态码**

```
import werkzeug.exceptions as ex
from flask import Flask, abort

class PaymentRequired(ex.HTTPException):
    code = 402
    description = '<p>You will pay for this!</p>'

abort.mappings[402] = PaymentRequired

app = Flask(__name__)

@app.route('/')
def mainpage():
    abort(402)

@app.errorhandler(402)
def payme(e):
    return 'Pay me!'

app.run() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-11T10:37:48.017

根据对问题的阅读，这可能会派上用场。

有一种更简单的方法可以为特定异常添加客户错误页面处理，您可以这样做：

```
class MyCustom404(Exception):
    pass

@app.errorhandler(404)
def page_not_found(error):
    return render_template("errors/404.html"), 404

@app.errorhandler(MyCustom404)
def special_page_not_found(error):
    return render_template("errors/custom_404.html"), 404 
```

...然后在您需要时触发您的新处理程序

```
raise MyCustom404 
```

请参阅[此处的文档](http://flask.pocoo.org/docs/api/#flask.Flask.errorhandler)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-29T00:10:27.850

就我而言，Flask==0.11.1 Werkzeug==0.11.10

例如，我使用 abort http 状态代码 451。

如果你想使用 abort() 和一个代码，一个 int 数字，比如 abort(451)，首先你应该创建一个自定义 HTTPException，一个 HTTPException 的子类。然后将你的 HTTPException 附加到`default_exceptions`.

```
from werkzeug.exceptions import HTTPException, default_exceptions,  Aborter
class UnavailableForLegalReasons(HTTPException):
    code = 451
    description = 'BIG BROTHER IS WATCHING YOU'

default_exceptions[451] = UnavailableForLegalReasons
abort = Aborter()  # don't from flask import abort

@app.errorhandler(451)
def uflr(e):
    return e, 451

@app.route('/debug')
def debug():
    abort(451) 
```

然后当你在浏览器中访问路径时，你可以看看这个 [![在此处输入图像描述](../Images/f294bd6f831380b86ac6027779bd13d1.png)](https://i.stack.imgur.com/ipiYv.png)

但是http原因短语是未知的，

你可以改变它

```
from werkzeug.http import HTTP_STATUS_CODES
HTTP_STATUS_CODES[451] = 'Unavailable For Legal Reasons'  # or even empty 
```

[![在此处输入图像描述](../Images/40645c0144dedb89f68af9878ea711b3.png)](https://i.stack.imgur.com/zQdky.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T07:13:45.270

您还可以使用[Flask API](http://www.flaskapi.org/)及其错误处理系统：

[http://www.flaskapi.org/api-guide/exceptions/](http://www.flaskapi.org/api-guide/exceptions/)

# jquery - 使用colorbox iframe提交后的jQuery追加

> ID：12285907
> 
> 赞同：0
> 
> 时间：2012-09-05T16:31:14.447
> 
> 标签：jquery, append, colorbox

如果您可以帮助我使用下面的代码。出于某种原因，它没有将行**附加**`#appendAffiliate`到即将提交的表格中。我使用颜色框作为模式对话框。

注意：这仅在以彩盒模式提交表单时发生。

```
HTML:
<a href="page/frame.php" class="colorbox-iframe"></a>

frame.php FILE (modal):
<form>....</form>

table markup:
<table width="100%" id="appendAffiliate">
<thead>
  <tr>
   <th>Name</th>
   <th>Discount</th>
  </tr>
</thead>
<tbody></tbody>
</table> 
```

JAVASCRIPT：

```
$('.colorbox-iframe').colorbox({
 overlayClose: false,
 iframe: true,
 scrolling: false,
 innerWidth: 200,
 innerHeight:150
});

$('form').submit(function(){
    $.ajax({
     type: 'post',
     url: 'json/json.php',
     data: $(this).serialize(),
     dataType: 'json',
     cache: false,
     success: function(data) {
      if ( data.ok ) {

   // None working     
   $('#appendAffiliate').append('<tr><td>test</td><td>test</td></tr>');
   $('#appendAffiliate > tbody').append('<tr><td>test</td><td>test</td></tr>');        
   $('#appendAffiliate tbody:last').append('<tr><td>test</td><td>test</td></tr>');

        $('input[type="submit"]').prop('disabled',true);

        setTimeout(function(){
          $('input[type="submit"]').prop('disabled',false);
          **parent.$.fn.colorbox.close();**             
        },2000);
      } else {

      }
     }
    });
   return false;
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:39:10.973

你应该追加到`thead`

代码

```
$('#appendAffiliate thead').append('<tr><td>test</td><td>test</td></tr>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:42:03.837

您的帖子没有明确区分父表单（调用 ColorBox 的页面）中的标记/js 和 ColorBox 显示的内容中的标记/js。

如果表在父级中，请务必在进行追加时参考父级。（您可能正在尝试附加到子页面中可能不存在的节点。）

# php - PHP imagejpeg（）无法打开目录

> ID：12285911
> 
> 赞同：1
> 
> 时间：2012-09-05T16:31:57.650
> 
> 标签：php, gd

每次我尝试使用 编写图像`imagejpeg()`时，都会收到以下错误：

```
Warning: imagejpeg() [function.imagejpeg]: Unable to open '/home/userdir/public_html/files/images/thumbs/ 
```

我已经检查过，这个目录有`777`权限，所以它应该能够写入它。

更奇怪的是，给出的目标文件路径`imagejpeg()`实际上是：

```
/home/userdir/public_html/files/images/thumbs/small/1113/XM324980.jpg 
```

我已经检查过了，权限设置为`777`一路。该文件尚不存在。

为什么打开“thumbs”目录写入目录时会遇到问题`thumbs/small/1113/`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:57:26.407

`imagejpeg()`只会在目标目录中创建图像，但您使用了另外两个子目录来`small/1113`创建您必须使用该`mkdir`功能的目录。请确保您首先创建了它，然后在其中创建图像。

# javascript - 为什么firefox开发者控制台指的是script.js？

> ID：12285913
> 
> 赞同：0
> 
> 时间：2012-09-05T16:32:04.077
> 
> 标签：javascript, ajax, events, firefox, console

Firefox 开发人员 Web 控制台突然在 script.js 中的一行显示“突变事件已弃用......”，但我没有使用这样的脚本。

当我单击查看有问题的行时，将突出显示以下代码：

```
e=true;break}if(!e)return false;if(""!=t){e=false;for(k=0;k<f.length;++k)if(t==f[k]){e=true;break}if(!e)return false;if(""!=u&&c){e=false;for(k=0;k<s.length;++k)if(u==s[k]){e=true;break}if(!e)return false}}else if(!b)return false;return true}if(isMozillaFirefox||isGoogleChrome||isAppleSafari){doc.addEventListener("DOMNodeInserted",j,false);doc.addEventListener("DOMNodeInsertedIntoDocument",h,false)}if(isInternetExplorer)if(getBrowserVersion()>=9){doc.addEventListener("DOMNodeInserted",j,false);doc.addEventListener("DOMNodeInsertedIntoDocument", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:49:05.047

我禁用了所有插件并一个接一个地再次启用它们来测试 Web 控制台。如果这有助于其他人遇到同样的错误，对我来说导致问题的插件称为：**DivX Plus Web Player HTML5 `<video>`2.1.2.145**

# sql-server - 在 SSIS 中将数据导出到 PDF 文件

> ID：12285919
> 
> 赞同：0
> 
> 时间：2012-09-05T16:32:21.560
> 
> 标签：sql-server, ssis, pdf-generation

是否可以在 SSIS 中将数据导出为 PDF 文件？

目前我正在使用平面文件目标将其导出到 txt 文件。我正在使用脚本重命名文件，因此我尝试将其重命名为 Filename.pdf，但是当我尝试打开它时，它只是说它已损坏。

在我所做的任何搜索中，我似乎都找不到任何相关内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:36:21.097

简单地更改扩展名不会帮助您将文件保存为 PDF 格式。您必须调用 pdf 创建程序才能将平面文件保存为 PDF。您可以使用 powershell，也可以在 .net 中编写自定义代码来执行此操作。

# java - 是否可以检测到输出的去向 - 到终端还是到管道/文件？

> ID：12285921
> 
> 赞同：4
> 
> 时间：2012-09-05T16:32:27.910
> 
> 标签：java, scala, io, jvm

`less`例如，当我正在编写将文本输出到标准输出并使用颜色（通过转义序列）的程序时，如果输出到其他程序（如, ）或文件，我想禁用这些颜色`grep`，因为颜色代码会混淆输出。

是否可以从Java进程中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:56:44.313

我通过以下方式解决了它（在[此处](https://stackoverflow.com/questions/1403772/how-can-i-check-if-a-java-programs-input-output-streams-are-connected-to-a-term)描述）：

[System.console()](http://java.sun.com/javase/6/docs/api/java/lang/System.html#console())将返回`Console`对象，如果有一些终端连接到应用程序，`null`如果您将输出管道输出到其他应用程序或将其保存到文件，它将返回。

因此它变成了一个简单的检查：

```
if (System.console() == null) {
  // ... no console, print dull plaintext
} else {
  // we have a console, now we can output colors as well
} 
```

（在 Linux Mint 10 上测试）

# php - 教义对产品有问题，但对开发没有问题

> ID：12285923
> 
> 赞同：2
> 
> 时间：2012-09-05T16:32:31.153
> 
> 标签：php, symfony, doctrine-orm

我之前在本地计算机和目标主机上测试了 Symfony 的 web 应用程序，在两种环境中：prod 和 dev - 都运行良好。所以我在本地计算机上完成了一个里程碑，仍然只在 dev 上进行测试。一切正常。但是 - Doctrine 现在似乎不适用于 prod - 我不知道它为什么以及如何停止工作。

这就是我所看到的——这段代码（来自 DefaultController.php）在 prod 和 dev 上都有效：

```
 $tags = $this->getDoctrine()
            ->getRepository("MyWebBundle:Tag"); 
```

但这（多一行）仅适用于开发，但不适用于生产：

```
 $tags = $this->getDoctrine()
            ->getRepository("MyWebBundle:Tag")
            ->find(1); 
```

在 prod 中，最后一行导致网页“死亡”。毫无疑问，发生了错误，但我在日志中没有任何消息，当然在 prod env 中 Symfony 是沉默的。我不知道如何解决这个问题......最奇怪的是 prod 早些时候工作正常。

更新：好的，我跟踪了导致工作和不工作的代码部分（但在产品中，在开发中总是有效）。数据库中有一些关系（标记多对一到类别）。这是 Entity/Tag.php 中的这部分代码：

```
/**
* @ORM\ManyToOne(targetEntity="Category")
* @ORM\JoinColumn(name="id_category", referencedColumnName="id_category", nullable=true)
*/
protected $category; 
```

有趣的是 Symfony2 对此并不冗长......当我从 Tag.php 中删除它时，我的 webapp 工作正常。如果我将它重新输入到这个文件中，它不会......

更新：经过进一步研究，我可以看到实际上所有的关系都是有问题的（在产品中，而不是在开发中）。我以上述方式向数据库编写了额外的“人工”（用于测试目的）查询，并且都给出了两种效果之一： **当表位于分层依赖关系之上时，一切正常（我们称其为 A 类型）** **当表有关系，Symfony 只是停止工作而没有任何消息（我们称之为 B 类型......* *

我还尝试用空表和已完成的表进行测试。“B 型”表有以下两种情况： 为 **空时有效** **存储数据（有关系）时无效**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:34:29.183

在你的`app.php`改变

```
$kernel = new AppKernel('prod', false); 
```

至

```
$kernel = new AppKernel('prod', true); 
```

这将使用 prod 环境并启用调试来启动您的应用程序

# mysql - mysql 连续列

> ID：12285926
> 
> 赞同：0
> 
> 时间：2012-09-05T16:32:39.597
> 
> 标签：mysql

一个表的值如下，相同的数字可以按任何顺序重复。100,102,101 是重复值，对于这些值，只有当它们是连续值时，我才需要生成相同的数字。

```
100
101
102
100
100
103
104
102
102
105
106
101
101 
```

输出应该是

```
100    1
101    2
102    3
100    4
100    4
103    5
104    6
102    7
102    7
105    8
106    9
101    10
101    10 
```

请帮忙查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:42:09.273

在这里您的查询：

```
SET @t1=0;
SET @tp=-1;

select   
  @t1 := @t1 + (case when @tp=n then 0 else 1 end) as c, 
  n,
  @tp := n
from nums
order by n; 
```

检查它：[http ://sqlfiddle.com/#!2/b136e/9/2](http://sqlfiddle.com/#!2/b136e/9/2)

**解释**

你需要两个变量。第一个是柜台。第二个变量是记住以前的值。对于您显示计数器的每一行。当前一个值不等于行值时，您增加计数器。

**测试：**

```
create table nums( n int );
insert into nums values (100), (101), (101), (102); 
```

结果：

```
| C |   N | @TP := N |
----------------------
| 1 | 100 |      100 |
| 2 | 101 |      101 |
| 2 | 101 |      101 |
| 3 | 102 |      102 | 
```

# css - 在 IE7 和 IE8 中的无序列表项上破坏 CSS 不透明度

> ID：12285929
> 
> 赞同：0
> 
> 时间：2012-09-05T16:32:58.640
> 
> 标签：css, html, html-lists, opacity, styling

我对 IE7 和 IE8 的 CSS 不透明度属性有疑问。在 IE9/FF/Chrome/Safari/Opera 上，下面的代码可以正常工作，因为不透明度属性可以正常工作。

我已经读到应用不透明度的元素必须具有“布局”，但是我已经尝试过了，虽然我在 IE8 上取得了一些成功（它杀死了其他 CSS 属性），但它在 IE7 上不起作用*。*

IE7 和 IE8 是否有简单、低风险的解决方案？

```
<div id="link_contents">
    <ul>
        <li><a>Poulter</a></li>
        <li><a>Lawrie</a></li>
        <li><a>Hanson</a></li>
    </ul>
</div>

    #link_contents ul {
        width: 200px;
        height: 110px;
        padding-top: 40px;
    }

    #link_contents ul a {
        font-size: 14pt;
        color: #000;            
        background-color: #FFFFFF;
        padding: 3px;
        opacity: 0.75;
        filter: alpha(opacity=75);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:38:50.293

我很确定你会在 IE7 上不走运，但请查看此链接： [http ://css-tricks.com/css-transparency-settings-for-all-broswers/](http://css-tricks.com/css-transparency-settings-for-all-broswers/)

IE7&8 具有真正粗略的 CSS 兼容性，幸运的是几乎没有人再使用这些版本的 IE。我认为这个链接应该可以帮助你。您可能还需要 IE 的条件 CSS，这在现在几乎所有网站中都很常见。谷歌“条件 CSS IE”了解更多信息。

希望它有帮助，祝你好运！

# usrp - USRP2 感应到的量级单位是多少

> ID：12285932
> 
> 赞同：0
> 
> 时间：2012-09-05T16:33:27.087
> 
> 标签：usrp

我刚开始使用 USRP，所以出现了一个基本问题：USRP2 正在感应的样本是什么？（单位，幅度）注意：我已经在文件中捕获了一些数据，但我的问题仍然存在

数据实施例：0.0029651010408997536，0.0027672448195517063，0.0026872570160776377，0.0026175084058195353，0.0025307394098490477，0.0033219337929040194，0.00809861347079277，0.010622795671224594，0.007327878847718239，0.00381132448092103，0.0028107648249715567，0.0026527538429945707，0.0033667022362351418，0.003682398237287998，0.010910660959780216，0.02414804883301258，0.02014402113854885，0.007897491566836834，0.0037226155400276184，0.0036899647675454617，0.004084467887878418，0.011853039264678955，0.16679257154464722，0.8468319177627563 ，1.0807441473007202，0.34814727306365967，0.03349483758211136，0.008172730915248394，0.009116406552493572，0.006185914855450392，0.00622738478705287，0.007180056534707546，0.008053596131503582，0.00642054621130228，0.005508296191692352，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:17:20.780

您的问题：样本以 IQ 对的形式提供给您——因此您看到的是实数对和虚数对，每对都是样本。

获得支持：要获得支持，您应该查看邮件列表： http: [//lists.ettus.com/mailman/listinfo/usrp-users_lists.ettus.com](http://lists.ettus.com/mailman/listinfo/usrp-users_lists.ettus.com)

或者，对于 GNU Radio： [https ://lists.gnu.org/mailman/listinfo/discuss-gnuradio](https://lists.gnu.org/mailman/listinfo/discuss-gnuradio)

一般来说，社区几乎只使用这些列表来提供支持。

# c# - 将 Delphi 代码翻译成 C# (Blowfish)

> ID：12285933
> 
> 赞同：1
> 
> 时间：2012-09-05T16:33:28.973
> 
> 标签：c#, delphi, encryption, blowfish, encryption-symmetric

我不是 Delphi 开发者，但我必须将此 delphi 代码转换为 C#：

```
Function EncodeClave(Clave:String):String;
 var
   R: String;
   FStringFormat:Integer;
 begin
   FStringFormat:=4196;
 with TCipher_Blowfish.Create('CLAVE', nil) do
  try
    Mode := TCipherMode(0);
    R := CodeString(Clave, paEncode, FStringFormat);
    Result := R;
  finally
    Free;
  end;
 end; 
```

我在研究中发现了以下网站：

[http://www.bouncycastle.org/csharp/](http://www.bouncycastle.org/csharp/)

和

[http://www.schneier.com/code/blowfish.cs](http://www.schneier.com/code/blowfish.cs)

我不明白这条线：

```
FStringFormat:=4196; 
```

为什么有预定义的格式大小？河豚（DECUtil）是否有另一种转变？

和模式：

```
Mode := TCipherMode(0); 
```

在Cipher的delphi源码中

> （http://www.koders.com/delphi/fidE1F5EC890EF9FD7D5FFEB524898B00BC8403B799.aspx）参数“模式”具有以下顺序：cmCTS、cmCBC、cmCFB、cmOFB、cmECB、cmCTSMAC、cmCBCMAC、cmCFBMAC

所以我想在delphi中模式0是cmCTS ...但实际上我不知道。

结果示例： user : ADMIN pass : ADMIN ---> pass : fAtP3sk=

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:20:23.887

变量 (4196)的值`FStringFormat`等于使用*[DECUtil](http://www.koders.com/delphi/fid3A096DAFAC89AB57E0A0C6D0E32761283D0516D7.aspx)*单元中定义的`fmtMIME64`const，其定义如下

```
 fmtMIME64      = $1064;     // MIME Base 64 
```

此值用于格式化传递给 CodeString 方法的字符串。在这种情况下，这条线

```
 R := CodeString(Clave, paEncode, FStringFormat); 
```

`Clave`以 MIME Base 64 格式返回变量的值。

现在关于这条线

模式 := TCipherMode(0);

您正在将 Mode 属性设置为枚举的第一个值。

```
 TCipherMode = (cmCTS, cmCBC, cmCFB, cmOFB, cmECB, cmCTSMAC, cmCBCMAC, cmCFBMAC); 
```

在这种情况下相当于写。

```
Mode := cmCTS; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:22:02.640

查看 Delphi 对象[TCipher_Blowfish](http://www.koders.com/delphi/fid2115DA85B11A0ED7F92F8CA29DD530C16FC9C96D.aspx)的源代码，有一些为字符串格式声明的常量。

```
fmtMIME64      = $1064;     // MIME Base 64 
```

“$”在 delphi 中定义了一个十六进制数，因此在您的示例代码中使用了 $1064 = 4196。

TCipherMode(0);

TCipherMode 是对以下枚举类型的引用：

```
TCipherMode = (cmCTS, cmCBC, cmCFB, cmOFB, cmECB, cmCTSMAC, cmCBCMAC, cmCFBMAC); 
```

所以 TCipherMode(0) = cmCTS

如果您进行这些替换，代码会更容易理解：

```
Function EncodeClave(InputString:String):String;
 var
   BlowfishObj: TCipher_Blowfish;
 begin

  BlowfishObj := TCipher_Blowfish.Create('CLAVE', nil);
  try

    BlowfishObj.Mode := cmCTS;  // (Cipher Text Stealing)
    Result := BlowfishObj.CodeString(InputString, paEncode, fmtMIME64);

  finally
    BlowfishObj.Free;
  end;
 end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:14:45.027

```
var 
  FStringFormat: Integer; 
begin 
  FStringFormat := 4196; 
```

是相同的

```
Int32 FStringFormat; 
FStringFormat = 4196; 
```

在 C# 中。

`FMode := TCipherMode(0);`' 是整数到枚举值的类型。Delphi 枚举与 C# 中的枚举几乎相同；默认情况下，它们从 开始`0`，因此枚举

```
type
  TCipherMode = ( cmCTS, cmCBC, cmCFB, cmOFB, cmECB, cmCTSMAC, cmCBCMAC, cmCFBMAC); 
```

表示它`cmCTS`的数值为`0`、`cmCBC`1 等。

代码应该已经正确编写

```
FMode := cmCTS; 
```

这不仅减少了要输入的字符，而且对于将来阅读它的人（比如你）来说更清晰。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:41:31.033

```
FStringFormat:=4196; 
```

这纯粹只是给变量赋值，`FStringFormat`是一个声明的整数值，现在你给它一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T01:38:41.637

首先感谢所有答案！

我不知道我是否可以在这里发布解决方案，但如果我可以帮助任何人......

最后，我已经将 delphi 代码转换为 DLL，如下所示：

```
library crypto;

   uses
  Cipher in '\Source\Cipher.pas',
  DECUtil in '\Source\DECUtil.pas',
  Hash in '\Source\Hash.pas',
  SysUtils;

{$R *.res}

Function EncodeClave(Clave:String):String;
var
  R: String;
  FStringFormat:Integer;
begin
  FStringFormat:=4196;
  with TCipher_Blowfish.Create('CLAVE', nil) do
  try
    Mode := TCipherMode(0);
    R := CodeString(Clave, paEncode, FStringFormat);
    Result := R;
  finally
    Free;
  end;
end;

function MsgEncode(pIn: PWideChar; out pOut: PWideChar): LongBool; stdcall;
var
  sOut: string;
  BuffSize: Integer;
begin
  sOut := EncodeClave(pIn);
  BuffSize := SizeOf(Char)*(Length(sOut)+1);
  GetMem(pOut, BuffSize);
  FillChar(pOut^, BuffSize, 0);
  Result := Length(sOut)>0;
  if Result then
    Move(PChar(sOut)^, pOut^, BuffSize);
end;

procedure BlockFree(p: Pointer); stdcall;
begin
  FreeMem(p);
end;

exports
  MsgEncode,
  BlockFree;

begin
end. 
```

并像这样在 C# 中使用这个 DLL：

```
class Program
    {
        [DllImport("crypto.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool MsgEncode(string pIn, out IntPtr pOut);

        [DllImport("crypto.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
        public static extern void BlockFree(IntPtr p);

        static void Main(string[] args)
        {
            IntPtr pOut;

            string encode = "admin";
            string encoded = "";

            if (MsgEncode(encode, out pOut))
                encoded = Marshal.PtrToStringAnsi(pOut);
            BlockFree(pOut);

            Console.WriteLine("String Encoded '" + encode + "' : " + encoded);
        } 
```

它不是超级干净，但做的工作......

# iphone - 视图加载时打开 UIImagePickerController

> ID：12285934
> 
> 赞同：1
> 
> 时间：2012-09-05T16:33:37.567
> 
> 标签：iphone, objective-c, uiimagepickercontroller, uistoryboard

我有一个 UIViewController，我想在加载视图时为相机打开一个 UIImagePickerController。

A. 我写了以下内容： EDITED - 我现在正在使用 viewDidAppear

```
- (void)viewDidAppear:(BOOL)animated{
    imagePicker = [[UIImagePickerController alloc] init];
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    }
    else{
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }
    [imagePicker setDelegate:self];
    [self presentModalViewController:imagePicker animated:YES];
} 
```

问题是，在用户拍摄快照或从文件夹中选择图像后 - 它继续再次加载 UIImagePicker - 我怎样才能让它只调用一次？

B. 我希望相机显示在一个矩形内（可以是 UIImage 或 UIView）而不是全屏，这样我就可以离开顶部导航栏。

我怎样才能实现上述目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T16:16:34.973

只需将您的操作实施到 viewDidLoad 方法中。这就是我所做的，现在它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:12:55.820

对于案例 A，最好将其放入，`viewDidAppear`而不是`viewWillAppear`避免动画冲突（和 wait_fences 错误）

对于案例 B，您要么需要捕获会话，要么需要`UIImagePickerController`使用转换来调整。由于以下`UIImagePickerController`属性，您可以做到这一点：

*   [`cameraViewTransform`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/cameraViewTransform)更改`CGAffineTransform`应用于显示相机/视频的视图。因此，您将能够缩小它，例如
*   [`showsCameraControls`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/showsCameraControls)`NO`如果您打算添加自己的控件，则可以设置为隐藏默认的`UIButtons`iOS控件
*   [`cameraOverlayView`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/cameraOverlayView)这允许您在相机视图的任意`UIView`顶部放置。您通常使用具有 a 的`backgroundColor = [UIColor clearColor]`视图并向其添加一些子视图，尤其是`UIImageView`在需要时添加一些装饰性（例如框架），一些`UIButton`s 来触发相机（并根据需要使用它们对应的`takePicture`,`startVideoCapture`和`stopVideoCapture`方法）并替换build-it 相机控件您使用以前的属性隐藏，依此类推`UIImagePickerController``IBAction`

在您的情况下，如果您想保留常规相机的按钮，但只想更改框架并使其不是全屏，`cameraTransform`那么该属性通常就是您需要的。在周围添加装饰框架将简单地包括使用`UIImageView`for`cameraOverlayView`属性并使用它来显示装饰框架的图像（图像的中心是透明的，因此相机视图通过它可见，当然）

* * *

[编辑] 请注意（根据文档）该`cameraTransform`属性仅在捕获电影时可用（当`sourceType == UIImagePickerControllerSourceTypeCamera`）。所以你可以用它让用户从它的相机里拍照，但是如果你想用你`UIImagePickerController`的从库中选择一张图片，你就不能使用`cameraTransform`（这很合乎逻辑，因为它看起来很奇怪在屏幕上）。因此，请务必仅在这种情况下使用它，尤其`UIImagePickerControllerSourceTypeCamera`是在设备上没有源类型时避免使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:42:51.450

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self getMediaFromSource:UIImagePickerControllerSourceTypeCamera];

}
- (IBAction)TakePhoto:(id)sender {
    [self getMediaFromSource:UIImagePickerControllerSourceTypeCamera];
}

- (void)getMediaFromSource:(UIImagePickerControllerSourceType)sourceType{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init]; 
    picker.delegate         = self; 
    picker.allowsEditing        = NO; 
    picker.sourceType           = sourceType; 
    [self presentModalViewController:picker animated:YES];

    [picker release];
}

#pragma mark - UIImagePickerController delegate methods
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    [picker dismissModalViewControllerAnimated:YES];
    [self.tabBarController setSelectedIndex:1];
}
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker { 

    [picker dismissModalViewControllerAnimated:YES];
    [self.tabBarController setSelectedIndex:1];
} 
```

更新了 B 部分。cameraOverlayView 的示例代码

```
- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType
 {
    self.imagePickerController.sourceType = sourceType;

if (sourceType == UIImagePickerControllerSourceTypeCamera)
{
    // user wants to use the camera interface
    //
    self.imagePickerController.showsCameraControls = NO;

    if ([[self.imagePickerController.cameraOverlayView subviews] count] == 0)
    {
        // setup our custom overlay view for the camera
        //
        // ensure that our custom view's frame fits within the parent frame
        CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;
        CGRect newFrame = CGRectMake(0.0,
                                     CGRectGetHeight(overlayViewFrame) -
                                     self.view.frame.size.height - 10.0,
                                     CGRectGetWidth(overlayViewFrame),
                                     self.view.frame.size.height + 10.0);
        self.view.frame = newFrame;
        [self.imagePickerController.cameraOverlayView addSubview:self.view];
    }
 }
} 
```

[http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)

我建议使用“cameraOverlayView”来尝试创建某种伪导航栏，其中交互将按您的预期工作。

“您可以自定义一个图像选择器控制器来自己管理用户交互。为此，请提供一个包含您要显示的控件的覆盖视图，并使用“捕获静止图像或电影”中描述的方法。您可以显示自定义覆盖视图作为默认控件的补充或替代。UIImagePickerController 类的自定义覆盖视图在 iOS 3.1 及更高版本中通过 cameraOverlayView 属性可用。有关代码示例，请参阅 PhotoPicker 示例代码项目。

重要 UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。”

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

# android - Android：如何将对象列表传递到 ListView

> ID：12285935
> 
> 赞同：2
> 
> 时间：2012-09-05T16:33:37.040
> 
> 标签：android, android-listview

我有课

```
public class User
{
   UUID id;
   String name;
} 
```

我想将这个传递给 ListView：仅列出并显示“名称”。但是当列表视图中的项目将被选中时，我想知道所选项目的“id”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:55:01.010

首先，我将创建一个包含两条信息的类。

```
public class MyItem {

public final String name;
public final String id;

public MyItem(String name, String id) {
    this.name = name;
    this.id = id;
 }

} 
```

然后制作一个可以支持这个类的自定义适配器。

```
public class CustomAdapter extends ArrayAdapter<MyItem> {

private Context context;
private ArrayList<MyItem> items;
private LayoutInflater vi;

public EntryAdapter(Context context,ArrayList<MyItem> items) {
    super(context,0, items);
    this.context = context;
    this.items = items;
    vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    final Item i = items.get(position);
    if (i != null) {
            v = vi.inflate(R.layout.list_item, null); //custom xml for desired view
            //do what ever you need to

    }
    return v;
     }

     } 
```

填充 MyItem 的数组，然后使用该数组创建您的自定义适配器。

```
items = new ArrayList<MyItem>(); // then populate it
myAdapter = new CustomAdapter(this, items); 
```

现在设置 ListView 并使用 OnItemClickListener

```
myList.setAdapter(myAdapter);

    myList.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parentView, View view, int position,
                long id) 
        {
                ((MyItem)myAdapter.getItem(position)).id); //this line gets you the id of the clicked item

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:46:06.650

将对象存储到数组列表中，比如

```
Arraylist<User> al = new ArrayList<User>(); 
```

然后使用将对象添加到arraylist

```
 User user = new User(); 
 user.id = somevalue;
 user.name = someNameValue;
 al.add(user); 
```

接下来在 onitemclick() 中获取单击的项目，然后使用 arraylist 项目显示它

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

Toast.makeText(this, "item clicked is " + arg2+al.get(arg2).id+"  "al.get(arg2).name,     
 Toast.LENGTH_SHORT)
 .show();
}
} 
```

# azure - Azure 实例从 Extra small 更改为 Small 虚拟机大小后挂起

> ID：12285937
> 
> 赞同：1
> 
> 时间：2012-09-05T16:33:40.100
> 
> 标签：azure

实例已挂起或大约 3 小时未响应。上面写着“UPDATE IN PROGRESS 正在进行更新操作。一旦完成，您将能够调整配置设置。” 在预览 UI 中。旧 UI 中的状态是实例的“等待主机...”和角色的“正在初始化...”。

如何复活实例？唯一可用的操作是删除。我应该删除实例并使用相同的存储创建一个新实例，但是为什么可以更改大小？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:12:40.713

如果您有能力从门户重新启动/重启实例，请这样做，在迁移过程中，VM 会卡住，您可以通过重新启动来恢复，但有时这些选项在门户中被禁用，因此您无法执行任何操作。

如果您没有可见的方法来恢复您的实例，您可以删除虚拟机并从同一操作系统 VHD 创建新虚拟机。这是一个已知问题，此建议是不时给出的。希望在预览功能之后，这个问题将得到解决。

# android - Android：同时缩放两个画布

> ID：12285940
> 
> 赞同：1
> 
> 时间：2012-09-05T16:33:47.527
> 
> 标签：android, canvas, scale, multi-touch

我正在创建一个多点触控应用程序，该应用程序依赖于具有多个用户看不到的“命中框”的图像，但在触摸时会执行操作。

我创建了一个画布和位图来保存 hitbox 信息。但是，在 onDraw 中平移和缩放视图的画布与具有命中框区域的位图不同。

具体代码见下文。（hitbox 和 b 是位图， hb 是画布）任何帮助表示赞赏。

```
public TouchImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    mBackground = this.getBackground();
    mBackground.setBounds(0, 0, mBackground.getIntrinsicWidth(), mBackground.getIntrinsicHeight());
    this.setBackgroundResource(android.R.color.transparent);
    // Create our ScaleGestureDetector

    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());

    hitbox = BitmapFactory.decodeResource(context.getResources(), R.drawable.hitbox);

    b = hitbox.copy(Bitmap.Config.ARGB_8888, true);

    hb = new Canvas(b);
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    super.onDraw(hb);

    canvas.save();
    hb.save();

    canvas.translate(mPosX, mPosY);
    hb.translate(mPosX, mPosY);

    canvas.scale(mScaleFactor, mScaleFactor);
    hb.scale(mScaleFactor, mScaleFactor);

    mBackground.draw(canvas);
    canvas.restore();
    hb.restore();
} 
```

# html - Safari 不会从 HTML 5 媒体元素请求视频或音频？

> ID：12285942
> 
> 赞同：0
> 
> 时间：2012-09-05T16:33:56.137
> 
> 标签：html, safari, html5-video, html5-audio

到目前为止，我一直在开发的内容已在 Chrome 中运行，并且使用后备方案 IE8。

我不明白的是：Safari 只是不会开始加载`<video>`或`<audio>`内容。

![野生动物园6](../Images/fef642800122d1eb505deb21d01183e8.png)

Safari 6 不会加载，iOS 5 的 Safari 也不会：

![ios5](../Images/ee92aebd12d091558f2fdb6c58ffc54a.png)

我的代码在适当的时候调用`.load()`了元素（至少对于 Chrome），那么给出了什么？

这是视频声明：

```
<video width="800" height="600" class="faces" id="facesVideo">
  <source src="video/grid.mp4" type="video/mp4" />
  <source src="video/grid.ogv" type="video/ogg" />
</video> 
```

音频是动态声明的，但有同样的问题。

在调用之前我是否需要等待 Chrome 不需要的一些 DOM 事件`.load()`？

让 Safari 开始缓冲直到元素可以触发需要`canplaythrough`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:37:09.937

由于 Safari 不支持`.load()`,`preload="auto"`必须添加到您希望 Safari 在播放前缓冲的任何 HTML5 媒体元素。去搞清楚。

即元素应如下所示：

```
<video width="800" height="600" class="faces" id="facesVideo" preload="auto">
  <source src="video/grid.mp4" type="video/mp4" />
  <source src="video/grid.ogv" type="video/ogg" />
</video> 
```

# html - 如何检测网页拦截器然后对其采取行动？

> ID：12285943
> 
> 赞同：0
> 
> 时间：2012-09-05T16:33:57.747
> 
> 标签：html, css, facebook, iframe, blocked

我在[这里](http://flip-o-matic.net)有一个网站，作为我学校的学生，他们屏蔽了 Facebook 之类的网站，但在我的网站上我有一个 Facebook iframe。

因此，当我在学校加载网站时，我会看到 Facebook 喜欢按钮应该位于的网络拦截器屏幕。

那么无论如何是否检测到任何网络拦截器，然后是否有网络拦截器禁用 iframe 或它所在的 div？

我什至不知道这是否可能，但如果有人知道如何将不胜感激。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:35:35.417

您可以尝试从中加载任何图像或脚本`facebook.com`并查看它是否出现错误。
（如果 Facebook 更改其 URL，请确保更改您的代码）

# c++ - HWND的动态数组中相同的ID

> ID：12285945
> 
> 赞同：3
> 
> 时间：2012-09-05T16:34:13.313
> 
> 标签：c++, winapi, visual-studio-2008

我正在学习 WinAPI 并尝试编写井字游戏。我正在使用将显示 X、O 或空图像的按钮。存储在动态数组（HWND）中的按钮。为什么所有这些按钮都具有相同的 ID？

```
if(GetDlgCtrlID(hBtns[0][0]) == GetDlgCtrlID(hBtns[0][1]))
    MessageBox(hWndDlg,_T("TheSame"),_T(""),NULL); 
```

出现MessageBox！，为什么。请帮忙。

```
//KA_SHAG
//Miwa_Mikitin
//XXXOOO
#include<windows.h>
#include<tchar.h>
#include"resource.h"

//Main Proc
BOOL CALLBACK DialogProc(HWND hWndDlg,UINT message,WPARAM wParam,LPARAM lParam);
//EnumChildProc
BOOL CALLBACK DisableEnableButtons(HWND hwnd,LPARAM lParam);

HWND** hBtns;//Global Dynamic Array of Buttons
int size = 150;//Size of Side of field, Button Size = size/nButtons

//BITMAPS
HBITMAP hBmpX,hBmpO,hBmpNone;
/////////

void CreateButtons(HWND hWndDlg,int nBtnsOld,int nBtnsNew);
void LoadBitmaps();

INT WINAPI WinMain(HINSTANCE hIns,HINSTANCE hPrevIns,LPSTR cmdLine,INT nShowCmd)
{   
    HWND hWndDlg = CreateDialog(hIns,MAKEINTRESOURCE(IDD_DIALOG1),NULL,DialogProc);

    MSG msg;
    ShowWindow(hWndDlg,1);

    while(GetMessage(&msg,NULL,0,0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return msg.wParam;
}

BOOL CALLBACK DialogProc(HWND hWndDlg,UINT message,WPARAM wParam,LPARAM lParam)
{
    HINSTANCE hIns = GetModuleHandle(0);            
    static int nBtnsOld = 5;//intitial N of Buttons on a row|col
    static int nBtnsNew;//next update N of Buttons on a row|col
    static BOOL isPlaying = false;
    static BOOL isMyMove = true;

    switch(message)
    {
    case WM_INITDIALOG:
        {       
            LoadBitmaps();
            CreateButtons(hWndDlg,nBtnsOld,nBtnsOld);
        }
        return true;

    case WM_COMMAND:
        if(HIWORD(wParam) == BN_CLICKED)
        {
            //Resize the Button field
            if(LOWORD(wParam) == IDC_BTNSETSIZE)
            {       
                //Determine wich RadioBtn is Checked
                if(IsDlgButtonChecked(hWndDlg,IDC_RADIO33))
                    nBtnsNew = 3;//set new nBtns
                if(IsDlgButtonChecked(hWndDlg,IDC_RADIO44))
                    nBtnsNew = 4;//set new nBtns
                if(IsDlgButtonChecked(hWndDlg,IDC_RADIO55))
                    nBtnsNew = 5;//set new nBtns
                ///////////////////////////////////////////
                //If no difference than ignore
                //else Create new Array of Btns
                if(nBtnsOld != nBtnsNew)
                {
                    CreateButtons(hWndDlg,nBtnsOld,nBtnsNew);
                    nBtnsOld = nBtnsNew;
                }
                /////////////////////////////////////////
                return true;
            }
            if(LOWORD(wParam) == IDC_BTNBEGIN)
            {   
                //Enum Buttons,CheckBox,RadioBtns
                //then Disable or Enable them depending on isPlaying var
                //if TRUE - ENABLE
                //else Disable
                EnumChildWindows(hWndDlg,DisableEnableButtons,isPlaying);
                //switch isPlaying )
                isPlaying = !isPlaying;
                //switch begin Button Text
                if(isPlaying)
                    SetWindowText(GetDlgItem(hWndDlg,IDC_BTNBEGIN),_T("Закінчити гру"));
                else
                    SetWindowText(GetDlgItem(hWndDlg,IDC_BTNBEGIN),_T("Почати гру"));
                /////////////////////////////////////////////////////////////////////
                return true;
            }
            //When Playing
            if(isPlaying)
            {
                //Determine HWND of Pressed Btn
                HWND pressedBtn = GetDlgItem(hWndDlg,LOWORD(wParam));
                HBITMAP propBmp;
                if(isMyMove)
                    propBmp = hBmpX;
                else
                    propBmp = hBmpO;
                //Change BMP
                SendMessage(pressedBtn,
                    BM_SETIMAGE,IMAGE_BITMAP,
                    (LPARAM)propBmp);
                //WHY???
                if(GetDlgCtrlID(hBtns[0][0]) == GetDlgCtrlID(hBtns[0][1]))
                    MessageBox(hWndDlg,_T("TheSame"),_T(""),NULL);

                return true;
            }
        }
        return true;
    case WM_CLOSE:
        DestroyWindow(hWndDlg);
        PostQuitMessage(0);
        return TRUE;
    }

    return FALSE;
}

void CreateButtons(HWND hWndDlg,int nBtnsOld,int nBtnsNew)
{

    HINSTANCE hIns = GetModuleHandle(0);//main instance

    //Destroy Buttons
    if(hBtns)
    {
        for(int i=0;i<nBtnsOld;i++)
            for(int j=0;j<nBtnsOld;j++)
                DestroyWindow(hBtns[i][j]);
        ////////////////////////////////    
        //Free memory
        for(int n=0;n<nBtnsOld;n++)
            delete[]hBtns[n];
        delete[]hBtns;  
    }
    /////////////////////////////////
    //Allocate new memory
    hBtns = new HWND*[nBtnsNew];
    for(int n=0;n<nBtnsNew;n++)
        hBtns[n] = new HWND[nBtnsNew];
    ////////////////////////////////
    int x =0;//offset x
    int y =0;//offset y
    //tchar[] for diff name s of btns

    //Create Buttons & assign to hBtns Array
    for(int i=0;i<nBtnsNew;i++)
    {
        for(int j=0;j<nBtnsNew;j++)
        {

            hBtns[i][j] = CreateWindowEx(
                NULL,_T("Button"),
                NULL,
                WS_CHILD | WS_VISIBLE | BS_BITMAP | BS_NOTIFY ,
                x,y,size/nBtnsNew,size/nBtnsNew,
                hWndDlg,NULL,
                hIns,NULL);
            //Set Default Image On Btns
            SendMessage(hBtns[i][j],BM_SETIMAGE,IMAGE_BITMAP,(LPARAM)hBmpNone);

            x+=size/nBtnsNew;

        }
        y+=size/nBtnsNew;
        x=0;
    }
}

BOOL CALLBACK DisableEnableButtons(HWND hwnd,LPARAM lParam)
{
    //Lparam is a BOOL if true Button will be Enabled
    //else Buttons will be Disabled
    if( GetDlgCtrlID(hwnd) == IDC_RADIO33 ||
        GetDlgCtrlID(hwnd) == IDC_RADIO44 ||
        GetDlgCtrlID(hwnd) == IDC_RADIO55 ||
        GetDlgCtrlID(hwnd) == IDC_CHECKMOVE ||
        GetDlgCtrlID(hwnd) == IDC_BTNSETSIZE)
        EnableWindow(hwnd,lParam);//<---lParam is BOOL

    return TRUE;
}

//BOOL CALLBACK DrawBmpOnBtn(HWND hwnd,LPARAM lParam)
//{
//
//  SendMessage(hwnd,BM_SETIMAGE,
//  return TRUE;
//}

void LoadBitmaps()
{
    HINSTANCE hIns = GetModuleHandle(0);//main instance

    hBmpX = LoadBitmap(hIns,MAKEINTRESOURCE(IDB_BMP_X));
    hBmpO = LoadBitmap(hIns,MAKEINTRESOURCE(IDB_BMP_O));
    hBmpNone = LoadBitmap(hIns,MAKEINTRESOURCE(IDB_BMP_NONE));
} 
```

项目（VS2008）在这里：[http ://www.filehosting.org/file/details/372626/XXXOOO.rar](http://www.filehosting.org/file/details/372626/XXXOOO.rar)

PS当执行程序时 - 下按钮允许绘制蓝色按钮，上按钮设置蓝色按钮的数量，但检查一些radioBtn。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:43:26.997

按钮句柄不相等，但您尚未为它们设置控件 ID。您可以通过在调用中添加以下内容来做到这一点`CreateWindowEx`：

```
hBtns[i][j] = CreateWindowEx(
                NULL, _T("Button"),
                NULL,
                WS_CHILD | WS_VISIBLE | BS_BITMAP | BS_NOTIFY,
                x, y, size/nBtnsNew, size/nBtnsNew,
                hWndDlg,
               (HMENU)<your_control_id>,
                hIns, NULL); 
```

您必须`<your_control_id>`为每个按钮用一个唯一的 id 替换该部分。

我的猜测是`GetDlgCtrlID()`调用失败，因此返回 0。阅读更多关于[`GetDlgCtrlID()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645478%28v=vs.85%29.aspx)和[`CreateWindowEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:46:01.257

控制 ID 不会自动分配。将控件 ID 作为`HMENU`参数传递给（在[的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)`CreateWindow`中虽然没有很详细地提到这一点）。[`CreateWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)

当然，设置它们的常用方法是在资源编辑器中创建对话框，并为每个子窗口提供一个控件 ID，然后您可以使用它`HWND`在运行时查找每个子窗口。但是当您自己创建子窗口时，您已经拥有了每个子窗口`HWND`，因此您不妨直接使用它。这并不难编码，但更容易掌握 - 例如，如果您添加更多控件，则无需在任何地方添加更多 ID。

当收到一条`WM_COMMAND`消息时，在 中包含窗口的对话框 ID `WPARAM`，您可以`HWND`从 中获取`LPARAM`，并以这种方式识别您的子窗口。请[参阅`WM_COMMAND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647591%28v=vs.85%29.aspx).

# java - 运行已部署的应用程序时 Flex 安全登录失败

> ID：12285948
> 
> 赞同：0
> 
> 时间：2012-09-05T16:34:18.820
> 
> 标签：java, apache-flex, security, https, blazeds

我有一个 Flex 应用程序，但在安全登录/注销我的 Java 服务器应用程序时遇到问题。它在开发环境中运行良好（FlashBuilder 运行 Flex 并与 Apache Tomcat 通信），但是当我们尝试使用在同一个 Tomcat 上部署的导出的 flex 应用程序时失败。

我们有一个大型、复杂的应用程序，它有一个 Flex 前端和一个 Java 后端，它在 Tomcat 上作为 Web 应用程序运行。我们希望登录/注销过程使用 HTTPS，以便用户名和密码被加密并且不受某些安全问题的影响。

不安全登录的工作方式是通过 BlazeDS RPC 调用一个名为 login 的方法。用户的凭据作为方法的参数。 *（顺便说一句：这是推荐的登录方式吗？）*

安全登录的工作方式不同。令牌是从提供用户 ID 和密码的通道集创建的，并且 AsyncResponder 调用成功或失败函数。登录代码显示在下面的更新 #2 中。

当我在 Flash Builder 中针对 Apache Tomcat（版本 7.0.29）运行我的应用程序时，安全登录和注销成功。无论我处于标准运行模式还是调试模式，这都有效。

但是，一旦我创建了我的应用程序并将其部署到我的服务器，它就会失败并出现一个非常普遍的错误。

我确信我已经正确设置了 Tomcat 的 HTTPS 端（因为应用程序在开发环境中工作）。我相信问题在于当 Flex 应用程序从`file:///...index.html`它运行时可以工作，但是一旦我尝试从`http://localhost:8080/MyApp/`它运行它就会失败。

这几天我一直在拉头发。任何人都可以提供的任何指针、文档等将不胜感激。

我决定不在这个问题中包含 services-config.xml、remoting-config.xml 等文件，因为它们很大并且包含的​​内容超出了此处的相关内容，但我可以根据要求提供它们。

**更新：1**

在查看了我发布的代码后，我在这个问题上犯了一个错误。login RPC 方法用于不安全的登录尝试，而通过 mx.messaging.ChannelSet 登录则用于安全登录。我已经更新了问题以反映这一点。

**更新：2**

返回的错误是`mx.rpc.events.FaultEvent`具有以下字段的：

```
Fault String: Send failed
Fault Code: Client.Error.MessageSend 
```

登录功能（Flex 端）为：

```
public function login(username:String, password:String, loginFunction:Function = null, failureFunction:Function = null):void {
    if (_usingSecuredConnection) {
        this.loginSuccessFunction = loginFunction;
        this.loginFailureFunction = failureFunction;

        // Make sure that the user is not already logged in.
        if (_channelSet.authenticated == true) {
            AlertUtil.alertError("You are already logged in!");
            return;
        }

        token = _channelSet.login(username, password);
        token.addResponder(new AsyncResponder(loginResultEvent, loginFaultEvent));
    } else {
        // Defer to API
    SecurityAPI.login(username, password, [onLoginResultNonSecured, loginFunction], [onLoginFailure, failureFunction]);
    }
} 
```

在尝试安全登录时，它总是会导致调用函数 loginFaultEvent 并使用上述 FaultEvent 调用。

**更新 3**

我确信这现在是一个跨域问题。尝试从 http 访问 https 是问题所在。但是，我将我认为非常宽松的跨域文件放在了我的 Tomcat 服务器的 ROOT webapp 中，但它没有帮助。有人知道我在做什么错吗？它是Tomcat7的错误位置还是我的跨域文件有错误？（注意：8443 是我的安全端口）

**跨域.xml：**

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all" />
    <allow-access-from domain="*" secure="false" to-ports="8443"/>
    <allow-http-request-headers-from domain="localhost" headers="*" secure="false"/>
</cross-domain-policy> 
```

**更新 4**

我现在已经克服了这个问题：这是一个跨域问题，通过在我的 tomcat 服务器的 ROOT webapp 目录中放置一个跨域文件来解决。该跨域文件的内容是：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-access-from domain="*" secure="false"/>
</cross-domain-policy> 
```

我的 flex 应用程序现在可以使用 IE9 和 Chrome 很好地通信 HTTP 和 HTTPS。

但是它仍然无法在 Firefox 上运行。

谢谢，

菲尔

# c# - DI 一个继承自 EventArgs 的类？

> ID：12285951
> 
> 赞同：1
> 
> 时间：2012-09-05T16:34:49.057
> 
> 标签：c#, events, c#-4.0, dependency-injection, moq

我试图 DI 一个继承 EventArgs 的类。当我将这个类放入我拥有的一个单独的类中时，我不断收到错误消息，说“没有隐式引用转换”。

下面是 VerificationStatusEventArgs 类的声明。

```
namespace Jimbob.CsvImporter.DataVerification
{
    public interface IVerificationStatusEventArgs
    {
        string SummaryMessage { get; set; }

        bool CarriedOutToCompletion { get; set; }

        List<String> ErrorLog { get; set; }
    }

    public class VerificationStatusEventArgs:EventArgs, IVerificationStatusEventArgs
    {
        public string SummaryMessage { get; set; }

        public bool CarriedOutToCompletion { get; set; }

        public List<String> ErrorLog { get; set; }
    }
} 
```

我试图将它注入到下面的类中，但不能使用接口声明事件。

```
public interface ICsvFileVerification
{
//Error here (1)
    event EventHandler<IVerificationStatusEventArgs> VerificationCompleted;

    event EventHandler UpdateProgressBar;

    //..
}

public class CsvFileVerification : ICsvFileVerification
{
    IUserInputEntity _entity;
    IEntityVerification _entityVerification;
    IVerificationStatusEventArgs _dataVerificationStatus;

    public CsvFileVerification(IEntityVerification entityVerification, IVerificationStatusEventArgs dataVerificationStatus)
    {
        _entityVerification = entityVerification;
        _dataVerificationStatus = dataVerificationStatus;
    }
//Error here (2)
    public event EventHandler<IVerificationStatusEventArgs> VerificationCompleted;
    public event EventHandler UpdateProgressBar;

    public void VerifyDataManagerAsync()
    {
        _dataVerificationStatus.CarriedOutToCompletion = true;
        _dataVerificationStatus.ErrorLog = new List<string>();

        if (!_cancelToken.IsCancellationRequested)
        {
            try
            {
                _entityVerification.VerifyUserInputManager(_entity, _dataVerificationStatus.ErrorLog);
                if (_dataVerificationStatus.ErrorLog.Count > 0)
                {
                    _dataVerificationStatus.CarriedOutToCompletion = false;
                    _dataVerificationStatus.SummaryMessage = "Verification of user inputs failed.";
                    return;
                }

                VerifyDataTypes();
            }

            catch (Exception Ex)
            {
                //...
            }

            finally
            {
                //Call method to raise event.
                OnVerificationStatusEventArgs(this, _dataVerificationStatus);
            }
        }
        else
        {
            _dataVerificationStatus.SummaryMessage = "Operation was canceled before the task could be started." + Environment.NewLine;
            _dataVerificationStatus.CarriedOutToCompletion = false;
            OnVerificationStatusEventArgs(this, _dataVerificationStatus);
        }
    }

    /// <summary>
    /// Raises an event on the GUI thread which should be used to notify the user that the task is
    /// completed and, if relevant, the exception message that was thrown.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    protected virtual void OnVerificationStatusEventArgs(object sender, IVerificationStatusEventArgs e)
    {
//Error here (3)
        EventHandler<IVerificationStatusEventArgs> TempHandler = VerificationCompleted;

        //Avoid possible race condition.
        if (TempHandler != null)
        {
            TempHandler(this, e);
        }
    } 
```

错误：（1）、（2）和（3）：

```
The type 'Jimbob.CsvImporter.DataVerification.IVerificationStatusEventArgs' cannot be used as type parameter 'TEventArgs' in the generic type or method 'System.EventHandler<TEventArgs>'. 

There is no implicit reference conversion from 'Jimbob.CsvImporter.DataVerification.IVerificationStatusEventArgs' to 'System.EventArgs'. 
```

主要目的是让我可以测试 VerifyDataManagerAsync()。我想这实际上可以通过 VerificationStatusEventArgs 类的一个实例来完成。

c# 聊天中有人建议这在 .net 4.0 中是不可能的？是这种情况还是有解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:48:41.363

定义：

```
delegate System.EventArgs<TEventArgs> where TEventArgs : EventArgs 
```

意味着您放在括号内的任何内容都必须继承自`EventArgs`. `IVerificationStatusEventArgs`不继承`EventArgs`。您可以通过创建继承自然后从其继承的抽象类来更改继承链`EventArgs`。

```
public abstract class VerificationStatusEventArgsBase : EventArgs
{
    //some abstract methods here
}

public class VerificationStatusEventArgs : VerificationStatusEventArgsBase 
{
    //implement your abstract methods
} 
```

然后它应该工作。

[PS 您可以在此处](http://msdn.microsoft.com/en-us/library/d5x73970)阅读有关泛型约束的信息。

# xmpp - XMPP 与 DDP 协议

> ID：12285953
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:34:51.470
> 
> 标签：xmpp, meteor

如果有的话，XMPP 和 Meteor 的 DDP 如何比较？

就技术而言，DDP 能否被认为优于 XMPP？或者每个人都擅长的适当的一般应用程序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:36:26.453

粗略看民进党，我认为两者并没有真正的可比性。

*   XMPP 是一种与语言无关的实时异步通信规范。它支持许多东西，例如聊天、多用户聊天和 pubsub 等等。

*   DPP（对我来说是全新的）似乎只是一种基于 Javascript 的服务器推送和发布订阅方式。

我不确定 DPP 与使用 BOSH 和现有的基于 XMPP Javascript 的客户端库来完成相同的事情有何不同。最后，XMPP 功能更加丰富，并且在所有主要（和最晦涩​​的）语言中都得到支持，而 DPP 似乎更针对一组特定的基于 Javascript 的用例。它可能比更通用的基于 XMPP 的解决方案更好地执行此任务，但我真的不知道。

# sql-server - 每个数据库实例一个或多个用户？

> ID：12285958
> 
> 赞同：1
> 
> 时间：2012-09-05T16:35:10.147
> 
> 标签：sql-server, instance

这是一个非常基本/基本的问题，也许很基本，我找不到答案。

在 SQL Server 2012 中，可以在主机服务器上创建多个数据库实例。但是多个用户可以使用同一个实例，还是将一个实例分配给特定用户？

换句话说：是否会创建一个“营销”实例，以便所有营销人员共享该实例？（相同的登录）

或者，它是一个实例 pr。用户？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:36:24.497

每个用户一个实例对我来说听起来效率低得离谱。没有人可以共享公共数据，每次添加/删除用户时都必须创建/删除一个实例。

如果您使用该设计，您将如何处理存档每个人的数据？

我会选择一个实例，多个用户。我会进行身份验证/授权，以确保人们只看到他们有权获得的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:37:34.423

物理（或虚拟）服务器“机器”可以有许多 SQL Server 实例。

每个 SQL Server 实例可以有许多数据库。

每个数据库可以被许多（真的很多）用户同时使用。

**编辑**

重新 - 你的营销部门场景

正如 duffymo 所说，虽然 SQL 服务器实例确实允许您直接添加 Active Directory 用户（登录名）并将他们分配给一个或多个数据库（作为用户）的权限，同时分配角色和权限，这通常只适用于 2或 2.5 层软件架构（即用户在他/她的桌面上运行一个应用程序，每个桌面连接到 SQL 数据库）。如今，应用程序将是集中式的（例如 Web 或 SOA），只有应用程序服务器会连接到数据库，处理用户安全/访问控制问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:38:02.727

“实例”是在服务器上完全独立安装的 SQL 引擎。每个实例可以支持多个数据库，每个数据库可以同时连接多个用户。

# memory-management - 如果变量被分配到堆栈上，如何随时检索它们？

> ID：12285965
> 
> 赞同：2
> 
> 时间：2012-09-05T16:35:34.787
> 
> 标签：memory-management, callstack

据我了解，每个线程通常只获得一个堆栈（而进程中的所有线程通常共享一个堆）。我一直认为堆栈用于在函数调用发生时存储程序计数器（PC）的值。但后来我在某处读到某些变量类型，例如`integer`or`boolean`也被分配到堆栈上。既然栈上的值是通过严格的 FILO 方式管理的，那么如何随时检索这些变量呢？

例如，在声明 之后`int a, b, c;`，我可以在它们的范围内随时以任何顺序对这些变量做任何我想做的事情。这是怎么做到的？为什么 value 不在`c`堆栈顶部并因此隐藏 values `a, b`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:44:09.490

调用堆栈也用于局部变量，也用于将参数传递给函数。

您是对的，“值类型”是在堆栈上传递的，而引用类型是在堆上分配的，但是当引用类型用作参数时，指向该堆位置的指针仍将在堆栈上传递。

尽管堆栈通常被“感知”为 LIFO 缓冲区，但也有与调用堆栈相关的帧或基指针，可用于直接访问当前堆栈指针上方或下方的内存。这就是函数仍然可以在不更改堆栈指针的情况下随机访问参数的方式。

这张[来自 Wikipedia 的图表](http://en.wikipedia.org/wiki/Call_stack#Structure)可能有助于可视化这一点，但请注意，许多人会认为堆栈应该“向下”增长。

[此处](http://eli.thegreenplace.net/2011/02/04/where-the-top-of-the-stack-is-on-x86/)的这篇博文解释了英特尔调用堆栈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:47:35.357

首先，我建议您应该对堆栈进行更多研究（请参阅[Wikipedia](http://en.wikipedia.org/wiki/Call_stack)和[Stack Explanation](http://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap/)以及其他通过谷歌搜索/CS 书籍）。

但是，对于您的具体问题，所有不是堆生成的变量都在堆栈上。这通常包括您在未直接堆分配的特定函数中定义的任何内容（通过`new`C++ 和 Java 中的运算符）。在某些语言中，所有内容都是堆分配的，只有指向这些堆结构的指针存储在堆栈中（就像在 Python 中一样）。您将看到各种语言之间的这些细微变化。

因此，您关于整数和布尔值始终在堆栈上的陈述是不正确的。如果您在函数中定义它们，它们在堆栈上，如果您使用构建它们，它们在堆上`new`。请注意，对于 Java，如果您使用`int`原语，它通常是基于堆栈的，而`Integer`对象是基于堆的——但这是 Java 超出基本堆栈知识的更高级的细微差别。

您可以`int a, b, c;`在同一范围内访问所有变量，因为它为该函数堆栈范围内的所有 3 个变量腾出了空间。当函数返回时，这些变量会随着堆栈向上移动而被清除。在那之前，所有 3 个都存在，因为整个作用域块同时是堆栈的 FILO 结构的一部分，并且将持续存在直到您返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:50:48.150

这个问题有很多答案，具体取决于您在什么环境中工作。当然，您不应该将处理器堆栈（与机器代码 POP 和 PUSH 一起使用）指令与堆栈（或更正确的堆栈帧）使用类似于 python 解释器或 .net 运行时

但简短的回答是堆栈的顶部只是一个内存位置，所以你只需使用偏移量

如果你按 a,b,c

所以 b 的地址将是堆栈地址 - 4。

# c++ - 视觉工作室编译器？

> ID：12285967
> 
> 赞同：0
> 
> 时间：2012-09-05T16:35:38.690
> 
> 标签：c++, windows, winmain

我尝试完成[本](http://johnnie.jerrata.com/winsocktutorial/#creatingalisteningsocket)教程，但我不知道要使用哪个 VS 2008 项目，因为我尝试的所有内容都给了我一个`error C2731: 'wWinMain' : function cannot be overloaded`错误（对于我从教程中更改`APIENTRY _tWinMain()`with方法的 Win32 项目），或者很多`WINAPI WinMain()`之类的错误`error LNK2019: unresolved external symbol _closesocket@4 referenced in function _WinMain@16`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:39:39.493

引用同一教程：

> 请记住，本教程中提供的任何代码**都应该与 Winsock 库链接，通常是 wsock32.lib 或类似名称的东西。**此外，当在您自己的 IDE（Dev-C++、Microsoft VC++、C++ Builder 等）中使用与教程中完全相同的代码时，请选择使用 WinMain() 构建 Windows 项目以避免错误。

要完成此使用：

```
#pragma comment(lib, "wsock32.lib") 
```

在您的源文件中（无关紧要），或将其添加到项目链接器选项中。

另请注意，[根据最新的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737582%28v=vs.85%29.aspx)，正确的库名称是`Ws2_32.lib`.

# javascript - 元素问题 Internet Explorer

> ID：12285968
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:35:42.580
> 
> 标签：javascript, internet-explorer-9, mouseover

我在我的网站上使用 mouseoverfunction，它在 firefox、chrome 和 safari 上完美运行。

`background-color`但是在 IE9+ 上，如果我没有任何元素，它就找不到我的鼠标悬停功能`div.arrow_wrap`。`Background-color:transparent`也不起作用，也不起作用`opacity:0`。它的样子`arrow_wrap`是空的。这真的很奇怪！`fadeOut`在我的代码中，如果我有`mouseenter`某些元素并且`fadeIn`如果鼠标离开这些元素，我选择了箭头图标。这适用于 IE。那么为什么我必须`background-color`在我的元素上使用 ( `div.arrow_wrap`) 才能让它在 IE 中也能正常工作。

现在，*我*的 css 和 javascript 中的箭头 ( `.rsArrowIcn`)已设置为函数。这确实适用于除 IE 之外的所有浏览器。但是如果删除并选择让它在我的 css 中可见，它确实在 IE 中工作。所以在 IE 中发生的事情真的很奇怪。`display:none``display:block``mouseover``display:none`

如果有人回答我的问题，我将非常感激！该网站是： http: [//mlido.se/site/work/adcourse/](http://mlido.se/site/work/adcourse/)

我的代码是： http: [//pastebin.com/W9wrAz8n](http://pastebin.com/W9wrAz8n)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:46:24.330

我认为您处于兼容模式

进入工具菜单

选择兼容性视图设置

删除您的网站并删除所有复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:50:54.160

这可以通过将背景设置为平铺透明 gif 即在旧版本的 IE 上修复

```
background: url(images/trans.gif); 
```

# c - 使用“系统调用”而不是直接调用函数的原因是什么？

> ID：12285969
> 
> 赞同：8
> 
> 时间：2012-09-05T16:35:49.497
> 
> 标签：c, linux, operating-system

[系统调用](http://www.kernel.org/doc/man-pages/online/pages/man2/syscall.2.html)允许在 Linux 中进行间接系统调用。使用它的原因是什么 - 为什么它比直接调用函数更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T16:44:40.833

有时内核会添加系统调用，C 库需要一段时间才能支持它们。

或者也许你正在一个旧的 Linux 发行版上编译，但想在一个较新的发行版上运行。

示例代码：

```
// syscall 277 is sync_file_range() on x86_64 Linux.  The header
// files lack it on scc-suse10 where we compile, but the
// performance benefits are substantial, so we just call it
// directly.  FIXME someday.
#define SYNC_FILE_RANGE_WRITE 2
    syscall(277, fd, done, n, SYNC_FILE_RANGE_WRITE); 
```

`syscall`但总的来说，如果你的编译环境中的 C 库有你需要的东西，那么使用它并没有什么好处。（一方面，它比使用特定于 Linux 的接口更不便携，因为系统调用号因 CPU 而异。）

# android - 跟踪我当前位置和/或速度的 Android 服务

> ID：12285973
> 
> 赞同：0
> 
> 时间：2012-09-05T16:36:13.477
> 
> 标签：android, performance, service, gps, location

我想编写一个**服务**来跟踪我当前的位置（以及一个不同的服务来满足我的速度）。我看过一些代码示例，但它们都是针对活动而不是针对服务的。我希望服务跟踪直到我停止它。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:56:28.593

> 我想编写一个 SERVICE 来跟踪我当前的位置（以及我的速度的不同服务）。

您可以使用一项服务完成这两项任务。您不需要两项服务。

> 我该怎么做？

调用您的. `requestLocationUpdates()`_ 致电您的. 收集您提供给的位置和速度数据。确保用户可以完全控制何时调用和调用。此外，请求适当的许可（例如，）。`LocationManager``onCreate()``Service``removeUpdates()``onDestroy()``Service``onLocationChanged()``LocationListener``requestLocationUpdates()``startService()``stopService()``ACCESS_FINE_LOCATION`

# python-2.7 - scrapy 电子邮件统计信息或错误

> ID：12285974
> 
> 赞同：0
> 
> 时间：2012-09-05T16:36:19.717
> 
> 标签：python-2.7, scrapy

我的项目中有多个蜘蛛，我同时运行它们。我希望每个爬虫在**ERROR**或**COMPLETION 完成**时收到一封带有**STATS**或**ERROR的电子邮件**

我去尽管医生

[http://doc.scrapy.org/en/latest/topics/extensions.html](http://doc.scrapy.org/en/latest/topics/extensions.html)

我在项目 settings.py 中添加了这些设置

```
EXTENSIONS = {
    'scrapy.contrib.statsmailer.StatsMailer': 500,
}

STATSMAILER_RCPTS=['abc@gmail.com'] 
```

但我无法收到任何电子邮件，我确定我遗漏了任何帮助，我想我需要设置 SMTP 服务器然后它会工作，但我不知道如何配置它或其他什么我发送统计信息电子邮件所需的操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:34:15.793

看看[源码](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/statsmailer.py)。注意线

```
 crawler.connect(o.stats_spider_closed, signal=signals.stats_spider_closed) 
```

源文档 cleary stats

> 当蜘蛛完成抓取时，StatsMailer 扩展程序会发送一封电子邮件

SatsMailer 仅连接到单个信号。为什么不创建自己的扩展（您可以复制粘贴现有代码）并将其连接到[Scarpy 的信号之一](http://scrapy.readthedocs.org/en/latest/topics/signals.html?highlight=signals#module-scrapy.signals)

# mysql - 在 MySQL 中插入之前触发生成唯一 ID

> ID：12285977
> 
> 赞同：0
> 
> 时间：2012-09-05T16:36:35.063
> 
> 标签：mysql, triggers

一个很简单的问题，但是如何在 MySQL 中创建一个触发器，在插入之前为“ID”列生成唯一的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:41:55.883

你不需要触发器。只需在表结构中使用“auto_increment”选项设置列。

[auto_increment 的文档](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

# c - 递归查找数组的最大元素

> ID：12285978
> 
> 赞同：6
> 
> 时间：2012-09-05T16:36:56.877
> 
> 标签：c, arrays, recursion

考虑这段代码，它计算数组的最大元素。

```
#include <stdio.h>

int maximum(int arr[], int n)
{
    if (n == 1) {
        return arr[0];
    } else {
        int max = maximum(arr, n-1);
        printf("Largest element : %d\n", max);
        return 5; // return arr[n-1] > max ? arr[n-1] : max;
    }
}

int main()
{
    int array[5] = {5, 23, 28, 7, 1};
    printf("Maximum element of the array is: %d", maximum(array, 5));
    return 0;
} 
```

为什么该`else`块被称为四 (4) 次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:41:47.773

该函数是递归的，因此会被多次调用。

当你第一次开始时，n=5。它将占用 else 块（n 不是 1）。然后，您再次使用 n-1 (n=4) 调用最大值。再次，使用 else 块。

总而言之，该函数在 n 达到 1 之前被调用了 4 次，然后它使用 if 块并返回 ar[0]。

正如其他人所提到的，所编写的函数不会返回列表的最大值。奇怪的是，它似乎总是返回 5，除非列表数组大小为 1，在这种情况下，它返回该元素的值。

相反，递归方法通常涉及每次将列表分成两半，然后在列表最终分成元素对时返回每对的最大值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:47:09.550

这就是它被编码的目的......

看一看：

从 main 我们用 5 调用最大值，然后在 else 我们用 n-1 再次调用该函数。

```
maximum(array, 5)  //first call from main, hit the else n=5, so recall with n-1
maximum(ar, 4)     //second call from maximum, hit the else n=4, so recall with n-1
maximum(ar, 3)     //third call from maximum, hit the else n=3, so recall with n-1
maximum(ar, 2)     //fourth call from maximum, hit the else n=2, so recall with n-1
maximum(ar, 1)     //fifth call from maximum, n==1 now so do the if and return 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T16:48:48.610

一种可能的递归解决方案是比较前一个元素和当前元素。

```
#include <stddef.h>

static int max(int a, int b) {
    return a > b ? a : b;
}
int max_array(int *p, size_t size)
{
    if (size > 1)   return max(p[size-1], max_array(p, size-1));
    else            return *p;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T16:46:52.067

实际上它只被调用了 4 次。

正如您所声明的，递归规则是：如果 n==1，则返回 ar[0]，否则返回 n-1 个元素的最大值。

因此，else 部分被调用为 5、4、3 和 2。

但是，这种递归还不够好。由于您的函数被调用 n-1 次，因此您只需支付递归的开销（例如堆栈），但与迭代相比没有任何优势。

如果你真的想要这个任务的递归，试着把数组分成 2 并将每一半传递给递归函数。

简单的伪代码（不能正确处理奇数）：

```
int max(int arr[], int n)
{
    if (n<=1)
        return arr[0];
    return MAX(max(arr, n/2), max(arr+n/2, n/2));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T16:54:11.743

```
int maximum(int ar[], int n)
{
  int max;
  if(!n)
    return ar[n];
  max =maximum(ar,n-1);
  return ar[n]>max?ar[n]:max;
} 
```

# tsql - SSRS - 在多值参数上使用 LEFT() 函数？

> ID：12285984
> 
> 赞同：1
> 
> 时间：2012-09-05T16:37:13.080
> 
> 标签：tsql, parameters, ssrs-2008

我在尝试将 LEFT() 函数与允许用户选择所有值的多值参数一起使用时遇到了一些问题。在我的数据集中，我使用以下代码：

```
 SELECT * FROM TABLE WHERE AccountValue BETWEEN 10000 and 50000
 AND CodeValue IN ('',100,LEFT(@Parameter,3)) 
```

基本上，应该在矩阵中拉取的结果是所有介于 10000 和 50000 之间的帐户，其代码值为空白、100 或用户在参数中选择的值的左 3 个字符。参数中的值如下：'200 - Finance'、'300 - Admin'、'400 - HR'等。表中code列的值为100、200、300、400等。所以我使用LEFT 函数用于拆分参数的字符串值。如果用户只选择一个参数，这很好用。但是当他们选择多个或全部时，它会弄乱查询的语法，返回错误“左函数需要 2 个参数”。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:12:04.097

每个人都设法通过在参数属性中为参数指定标签和值来解决此问题。标签是用户所看到的，如“财务”、“管理员”等。它们的值是代码值 001/002/等。然后将数据集的子句设置为

```
WHERE CodeValue IN ('',100,@Parameter) 
```

# regex - 正则表达式嵌套可选组

> ID：12285985
> 
> 赞同：2
> 
> 时间：2012-09-05T16:37:16.877
> 
> 标签：regex

我试图捕捉这样的字符串的粗体部分：

> 1.  '捕获字符串末尾的年份范围**1995-2010** '
>     
>     
> 2.  '如果没有年份范围，只需捕获单年 **2005** '
>     
>     
> 3.  '捕获后跟括号的年/年范围，包括括号**2007-2012（58 个月）** '

此正则表达式适用于 1 和 2，但我无法让它适用于 3：

```
/(\d+([-–— ]\d+( \(\d+ months\))?)?$)/ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:52:29.330

这个正则表达式工作得很好。:)

```
/(?:(?:\d{4}[-–— ])?\d{4})(?: \(\d+ months\))?$/ 
```

我的正则表达式和 Jonah 的主要区别在于我的包含`?:`意味着不捕获子组。当您在正则表达式中分组时，它会自动返回该组中的内容，除非您告诉它不要这样做，而且我发现有时当使用诸如`replace`or之类的方法时这些组被捕获时`split`，它可能会有点错误，这可能是你的问题也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:17:10.143

试试这个正则表达式：

```
/\d{4}(?:[-–— ]\d{4})?(?:\s*\([^)]+\))?$/gm 
```

这个捕获了括号中的所有内容。如果您需要特定于括号中文本“（数字）个月”的正则表达式，那么您可以使用它：`\d{4}(?:[-–— ]\d{4})?(?:\s+\(\d+\smonths\))?$`

测试链接：[RegexPal](http://regexpal.com/?flags=gm&regex=%5Cd%7B4%7D%28?%3a%5B-%E2%80%93%E2%80%94%20%5D%5Cd%7B4%7D%29?%28?%3a%5Cs%2a%5C%28%5B%5E%29%5D%2b%5C%29%29?%24&input=capture%20a%20year%20range%20at%20the%20end%20of%20a%20string%201995-2010%0Aif%20there%27s%20no%20year%20range%20just%20capture%20the%20single%20year%202005%0Acapture%20a%20year/year%20range%20followed%20by%20a%20parenthesis,%20including%20the%20parenthesis%202007-2012%20%2858%20months%29%0Atrying%20out%20another%20example%201990%20%2823%20weeks%29%0Atrying%20out%20another%20example%201995-2002%20%28x%20days%29%0Atrying%20out%20another%20example%202050%20%28%28blah%20bl%29%0Atrying%20out%20another%20example%202050%E2%80%943000%0Atrying%20out%20another%20example%202050-3000%0Atrying%20out%20another%20example%202050%E2%80%933000%0A)或[RegExr](http://regexr.com?32282)

示例文本：

*   捕获字符串末尾的年份范围 1995-2010
*   如果没有年份范围，则仅捕获 2005 年
*   捕获后跟括号的年/年范围，包括括号 2007-2012（58 个月）
*   尝试另一个例子 1990 年（23 周）
*   尝试另一个示例 1995-2002（x 天）
*   尝试另一个示例 2050 (blah blah)
*   尝试另一个例子 2050—3000
*   尝试另一个示例 2050-3000
*   尝试另一个示例 2050–3000

和 JavaScript 代码：

```
var regex = /\d{4}(?:[-–— ]\d{4})?(?:\s*\([^)]+\))?$/gm; //multiline enabled
var input = "your input string"; 
if(regex.test(input)) {
  var matches = input.match(regex);
  for(var match in matches) {
    alert(matches[match]);
  } 
} else {
  alert("No matches found!");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:53:00.477

以下正则表达式在示例 Perl 脚本中适用于我。它应该可以在 JavaScript 中使用：

```
/(\d{4}([-–— ]\d{4})?( \(\d+ months\))?)$/ 
```

1.  我们首先匹配一个 4 位数的年份：`\d{4}`
2.  然后我们匹配一个可选的分隔符，后跟另一个 4 位数的年份：`([-–— ]\d{4})?`
3.  最后，我们匹配可选的月份部分：`( \(\d+ months\))?`

`\s*`如果您的数据并不总是遵循这个严格的模板，您可能需要在需要的地方插入空格匹配 ( )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:10:46.830

如果我正确理解您的需求，它实际上在这里工作正常：[Gskinner RegExr](http://gskinner.com/RegExr/?3227j) 只是交替哪个句子是最后一个，因为 $ 不会计算换行符，只是字符串的结尾。

# javascript - 使用 JS 滑动或卷起图像

> ID：12285986
> 
> 赞同：0
> 
> 时间：2012-09-05T16:37:17.990
> 
> 标签：javascript, jquery, html, slider, image-gallery

[如本示例页面](http://www.fedne.com/qstest.htm)所示，我有两个向上和向下滚动的 JS 按钮 。

现在只是改变图像没有效果，我需要应用幻灯片或滚动效果来使图像看起来循环，像这样[但](http://www.jscodes.com/codes/code21/)上下，

JS代码是从ASP.net页面动态生成的，这里是向上按钮的JS，

```
var my_slots = ['_', 'x', 'y', 'z', '0', '1',
                '2', '3', '4', '5', '6', '7', '8', '9'];

$("#sslot_img0_u").live('click', function() {
    image = document.getElementById('sslot_img' + '0');
    image.setAttribute('src', do_up('0', image.getAttribute('alt')));
    $("#hstring").val(my_slots[2]);
    return false;
});

function do_up(key1, key2) {
    image = document.getElementById('sslot_img' + key1);
    if (Number(key2) == my_slots.length - 1) {
        image.setAttribute('alt', '0');
        $get('sslot_hf' + key1).value = my_slots[0];
        return "http://www.fedne.com/" + my_slots[0] + '.gif';
    } else {
        image.setAttribute('alt', (Number(key2) + 1));
        $get('sslot_hf' + key1).value = my_slots[Number(key2) + 1];
        return "http://www.fedne.com/" + my_slots[Number(key2) + 1] + '.gif';
    }
} 
```

是否有可能在按钮而不是 div 点击事件上获得这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:41:35.360

您想要的是使用 jquery animate() 函数实现，并调整元素的位置属性。但是，您正在使用的是更改现有值/图像。方法不同。

您可能希望在 Chrome 中的所需结果上右键单击 -> 检查元素以获得更清晰的图片。

我希望你的问题是正确的。抱歉，如果我没有。

编辑 - 也查看 jquery slide() 函数文档。可能你需要的就在那里。

# sql-server-2008 - 表编辑时的 SSMS 行为

> ID：12285999
> 
> 赞同：1
> 
> 时间：2012-09-05T16:38:06.560
> 
> 标签：sql-server-2008, primary-key, ssms

当我右键单击 SSMS 2008 中的表名并选择“编辑前 200 名”时，是什么决定了结果顺序？假设我希望“编辑前 200 条”始终显示表的前 200 条记录，但基于表的降序主键。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:22:24.820

要获得此行为，您可以更改表的主键以降序而不是升序排序。选择前 X 和编辑前 X 功能似乎基于主键排序顺序。

右键单击表格，单击设计。然后在设计窗口中右键单击并选择“索引/键”。进入主键的列并将排序顺序更改为您希望它出现的顺序。这可能会产生副作用（没有 order by 子句的查询、对 ASC 进行排序的查询必须进行排序等）。

另一个没有副作用的选项是执行 Edit Top X Rows 命令，然后右键单击结果并选择 Pane -> SQL。您可以编辑 select 语句以包含您选择的 order by 子句并执行它以允许您编辑结果行。