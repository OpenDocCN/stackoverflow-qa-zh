# StackOverflow 问答 10857000-10857999

# java - 由于某种原因，Android toast 未在 UI 上显示

> ID：10857000
> 
> 赞同：0
> 
> 时间：2012-06-01T20:34:36.393
> 
> 标签：java, android, broadcastreceiver

我正在做类似于这里讨论的内容： [Android BroadcastReceiver inside Activity](https://stackoverflow.com/questions/4555215/android-broadcastreceiver-within-activity)

我有运行有或没有 UI 的应用程序。当屏幕关闭时，它只是在后台工作。当 UI 开启且可见时 - 我想让用户知道刚刚发生了一些事情。

因此，我按照上面主题中的示例并在我的`Activity`. 我注册`onResume`和注销`onPause`

```
private BroadcastReceiver uiNeedToBeUpdatedReceiver = new BroadcastReceiver()
    {
        @Override
        public void onReceive(Context context, Intent intent)
        {
            // TODO Auto-generated method stub
            Toast.makeText(BaseActivity.this, "received", Toast.LENGTH_LONG);
        }
    };

@Override
    protected void onPause()
    {
        Log.d(LOG_TAG, "onPause");
        super.onPause();

        // TODO: Unregister broadcast receiver
        unregisterReceiver(uiNeedToBeUpdatedReceiver);
    }

@Override
    protected void onResume()
    {
        Log.d(LOG_TAG, "onResume");
        super.onResume();

        // TODO: Register for broadcast events
        IntentFilter filter = new IntentFilter();
        filter.addAction("com.my.uineedtobeupdated");
        registerReceiver(uiNeedToBeUpdatedReceiver, filter); 
```

在我在后台运行的内部我`AsyncTask`这样做：

```
// Send broadcast - if UI active it will see it:
        Intent broadcast = new Intent();
        broadcast.setAction("com.my.uineedtobeupdated");
        MyApplication.Me.sendBroadcast(broadcast); 
```

好吧，一切正常。我收到广播，我在调试器中看到我正在运行 Toast 应该显示的行。但我没有看到任何吐司弹出。

是线程问题吗？我虽然如果我收到广播它应该在 UI 线程上？为什么我会观察到这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T20:36:21.133

不仅要创建 Toast，而且要实际显示它。简单的方法：

```
Toast.makeText(BaseActivity.this, "received", Toast.LENGTH_LONG).show(); 
```

当然，您也可以：

```
Toast myToast = Toast.makeText(BaseActivity.this, "received", Toast.LENGTH_LONG);
myToast.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:36:52.423

```
Toast.makeText(BaseActivity.this, "received", Toast.LENGTH_LONG); 
```

你正在制作一个`Toast`，但你没有展示它。您需要调用`show`它，如下所示：

```
Toast.makeText(BaseActivity.this, "received", Toast.LENGTH_LONG).show(); 
```

# django - 如何为 .po 翻译文件提供数据？

> ID：10857006
> 
> 赞同：3
> 
> 时间：2012-06-01T20:35:04.017
> 
> 标签：django, internationalization, gettext, po

在 Django 中运行`django-admin.py makemessages -l de`创建翻译文件后，您可以使用纯文本编辑器或 Poedit 来填写它们。

Poedit 的优势在于它为输入这些数据提供了专门的 UI。但是，当我在单词之间切换时，我不断收到一条错误消息：

> MyBookmarks/locale/de/LC_MESSAGES/django.po:7：标题字段“Project-Id-Version”仍然具有初始默认值

这是什么？是否有任何了解 Django 国际化或 po / GNU gettext 的普通用户的人遇到此错误消息？

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T04:54:55.843

我猜 Django 保留了用户可自定义的 .po 文件的标题，因此您可以将“PACKAGE VERSION”替换为更具描述性的内容，例如“MY FABULOUS APP v.1.0”。

要在给定路径中的任何相关文件上执行此操作，您可以从命令行和 *nix 环境中使用此命令（或任何**sed**和**find**可用的地方）

```
find <YOUR_PATH_HERE> -type f -name '*.po' -exec sed -e s'/PACKAGE VERSION/<YOUR_APP_NAME> <YOUR_APP_VERSION>/g' -i.bak {} \; 
```

该命令将替换每个 .po 文件中的上述文本，并且还将保存每个文件的未修改的备份文件。

因此，在您的情况下，命令将是：

```
find MyBookmarks/ -type f -name '*.po' -exec sed -e s'/PACKAGE VERSION/MyBookmarks v.1.0/g' -i.bak {} \; 
```

我经常在我的 fabfile 中包含这个命令，它使用 POedit 1.5.x 解决了这个问题（但应该也适用于以前的版本）。

注意：**对于每个 .po 文件，您只需执行一次**。下次您将启动*./manage.py makemessages 时，* Django 会记住该设置。

# objective-c - 自定义 UIView 不接收触摸事件

> ID：10857009
> 
> 赞同：1
> 
> 时间：2012-06-01T20:35:14.127
> 
> 标签：objective-c, ios, cocoa-touch, uiview

我的应用程序正在读取博客文章的 JSON 提要并显示它们。我创建了一个名为 PostView 的 UIView 子类，并将一个笔尖连接到它上面。显示工作正常，但是，我无法让任何触摸事件工作。

在笔尖中，我有一个 UIButton，其功能应该是执行 segue（显示给定帖子的评论）。我只是想 NSLog 一些东西，但它不起作用。我尝试在代码中的 for 循环之后放置按钮，并且这些操作工作正常，因此我的 addTarget 方法没有错误。

我还尝试在多个地方将 setUserInteractionEnabled 设置为 YES，也没有帮助。我实在想不通这个。

有什么建议么？

更新：

```
for (NSDictionary * post in json) {
    DMBasePostView *nextPost = [DMBasePostView alloc];
    nextPost = [newPost init];
    [nextPost setFrame:CGRectMake(...)];

    // (setting of post-specific stuffs here cut out...)

    // adding target for UIButton:
    [nextPost.showCommentsButton addTarget:self action:@selector(testMethod:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:nextPost];
} 
```

这基本上就是我在 ViewController 中显示帖子的方式。PostView 具有必要的 awakeFromNib 方法，因此它可以正确显示笔尖布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T13:10:02.020

问题是我在控制器中操纵了 PostView 的高度，但没有操纵添加的 UIView 子视图，因此 uibutton 不知何故超出了其父视图的范围。我没有想到它，因为它仍然显示正确，但它没有响应触摸。我必须修复超级视图的高度，它解决了我的问题。

# php - 使用 php curl 获取 .aspx 页面时遇到问题

> ID：10857012
> 
> 赞同：2
> 
> 时间：2012-06-01T20:35:21.210
> 
> 标签：php, asp.net, curl

我正在尝试使用 curl 登录到一个安全的 aspx 站点，并检索一些帐户的数据。
该页面使用 aspx __VIEWSTATE 来跟踪浏览器的状态。从这里检查请求标头是顺序：

用户从 Login.aspx（包括 __VIEWSTATE）GETS
用户 POSTS __VIEWSTATE、loginName 和 loginPassword 到 login.aspx -> 服务器响应 302 用户GETS Submissions.aspx

submits.aspx 是由 __EVENTTARGET=dgrdSubmissions$ctl0x$ctl00 引用的不同客户端的表，其中第一个 $ctl0x 代表该客户端的行。

用户*POSTS_VIEWSTATE、* _EVENTTARGET 和一个 AdvisorView 参数到 submits.aspx -> 服务器响应 302 用户GETS Policy.aspx

这在浏览器中运行良好（Chrome - 该网站在 Firefox 中出现可疑中断并显示消息：引发了“System.Web.HttpUnhandledException”类型的异常），但在我的 php 脚本中，GET Policy.aspx 使用登录页面而不是预期响应客户信息。

这是我的代码（减去错误检查和页面显示）：
Helper Functions：

```
function curl_page($url){
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
$data=curl_exec($ch);
curl_close($ch);
return $data;
}

function curl_ssl_page($url="",$postdata=""){
$ch = curl_init();
$cookie = 'cookie.txt';
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch);

return $result;
}

function curl_get_page($url=""){

$ch = curl_init();
$cookie = 'cookie.txt';
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

$result = curl_exec ($ch);
return $result;
} 
```

页面

```
Pages - Login:

if(isset($_POST['user-name'])) {
    //GET login page
    $url = "http://www.gryphinonline.ca/Login.aspx";
    $login_page = $this->curl_page($url);

    // get viewstate
    $regexViewstate = '/__VIEWSTATE\" value=\"(.*)\"/i';
    $regexEventVal  = '/__EVENTVALIDATION\" value=\"(.*)\"/i';

$viewstate = $this->regexExtract($login_page,$regexViewstate,1);
$eventval = $this->regexExtract($login_page, $regexEventVal,1);

//Post to login page
$postdata = '__VIEWSTATE='.rawurlencode($viewstate)
     .'&txtLoginName='.$_POST['user-name']
     .'&txtPassword='.$_POST['password']
     .'&Start=Login+%2F+Ouverture+de+session';

$this->curl_ssl_page($url,$postdata);
header("Location:http://url-edited/submissions");
}

Pages - Submissions:
    $url = "http://www.gryphinonline.ca/Submissions.aspx";
$submissions = $this->curl_get_page($url);

$dom = new DOMDocument();
@$dom->loadHTML($submissions);

// scrape for data including viewstate
$view = $dom->getElementById('dgrdSubmissions'); 
if(!$view) header("Location://url-edited/login");

    $h_data = $dom->getElementsByTagName('div');
$h_data = $h_data->item(0);

if(isset($_POST['__EVENTTARGET'])){
    $postdata=array();
    foreach ($_POST as $key => $value) {
        $postdata[]=$key.'='.$value;
    }
    $postdata = implode('&', $postdata);

    $this->curl_ssl_page($url,$postdata);
    header("Location:http://url-edited/policy");        
}

Pages - Policy:
    $url = "http://www.gryphinonline.ca/Policy.aspx";
$policy = $this->curl_get_page($url); 
```

据我所知，所有的 HTTP 请求和 cookie 都是相同的。有人知道这里发生了什么吗？这可能与该网站的 Firefox 问题有关，还是我误解了一些基本的东西？

我已经在这几天了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:55:40.407

原来我忘记将 POST 字符串进行 urlencode 提交。

# spss - Create Neural Network is missing from Analyze Tab in Spss 19.0

> ID：10857021
> 
> 赞同：0
> 
> 时间：2012-06-01T20:35:43.537
> 
> 标签：spss

I want to create Neural Networks using the IBM SPSS 19.0 version. I read the manual and it says that you go to Analyze -> Neural Networks but I cannot find any Neural Networks at this tab. Can anyone help me please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:40:03.100

NN 是您可能没有的可选功能。转到附加组件菜单（并非在所有版本中都可用）以查看您未获得许可的选项。

# java - 获取 java.lang.IllegalStateException：添加 BigDecimal 变量后无法执行活动的方法。

> ID：10857023
> 
> 赞同：0
> 
> 时间：2012-06-01T20:35:52.553
> 
> 标签：java, android

全部——我的项目（计算技巧）运行良好，直到我添加了一些 BigDecimal 变量来帮助舍入。现在，当我点击“计算”时，应用程序强制关闭，logcat 显示：

```
 06-01 14:24:21.246: W/dalvikvm(15364): threadid=1: thread exiting with uncaught exception (group=0x40a4a1f8)
06-01 14:24:21.256: E/AndroidRuntime(15364): FATAL EXCEPTION: main
06-01 14:24:21.256: E/AndroidRuntime(15364): java.lang.IllegalStateException: Could not execute method of the activity
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.View$1.onClick(View.java:3044)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.View.performClick(View.java:3511)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.View.onKeyUp(View.java:6078)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.widget.TextView.onKeyUp(TextView.java:5636)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.KeyEvent.dispatch(KeyEvent.java:2623)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.View.dispatchKeyEvent(View.java:5500)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1879)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1361)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.app.Activity.dispatchKeyEvent(Activity.java:2324)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1806)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3327)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3300)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2460)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.os.Looper.loop(Looper.java:137)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.reflect.Method.invokeNative(Native Method)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.reflect.Method.invoke(Method.java:511)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at dalvik.system.NativeStart.main(Native Method)
06-01 14:24:21.256: E/AndroidRuntime(15364): Caused by: java.lang.reflect.InvocationTargetException
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.reflect.Method.invokeNative(Native Method)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.reflect.Method.invoke(Method.java:511)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at android.view.View$1.onClick(View.java:3039)
06-01 14:24:21.256: E/AndroidRuntime(15364):    ... 24 more
06-01 14:24:21.256: E/AndroidRuntime(15364): Caused by: java.lang.NumberFormatException: Invalid float: ""
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.StringToReal.invalidReal(StringToReal.java:63)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.StringToReal.parseFloat(StringToReal.java:289)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at java.lang.Float.parseFloat(Float.java:300)
06-01 14:24:21.256: E/AndroidRuntime(15364):    at com.tip.ping.TippingActivity.calculateNumbers(TippingActivity.java:47)
06-01 14:24:21.256: E/AndroidRuntime(15364):    ... 27 more 
```

我的代码是：

```
 public class TippingActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    public void calculateNumbers(View view) {
        EditText text = (EditText)findViewById(R.id.edit_bill);             
        String value;
        value = text.getText().toString();      
        float bill = Float.parseFloat(value);
        BigDecimal billbd;
        billbd = new BigDecimal(bill);

        EditText text2 = (EditText)findViewById(R.id.edit_tip);
        String value2;
        value2 = text2.getText().toString();    
        if(!value2.contains("."))
            value2 = "."+value2;
        float tip = Float.parseFloat(value2);
        BigDecimal tipbd;
        tipbd = new BigDecimal(tip);

        EditText text3 = (EditText)findViewById(R.id.edit_people);
        String value3;
        value3 = text3.getText().toString();

        TextView answer = (TextView) findViewById(R.id.answer);
        String answers;
        answers = answer.getText().toString();
        float answerf = Float.parseFloat(answers);
        BigDecimal answerbd;
        answerbd = new BigDecimal(answerf);
        answerbd.setScale(2);   
        TextView quick_answer = (TextView) findViewById(R.id.quick_answer);
        String qanswers;
        qanswers = quick_answer.getText().toString();
        float qanswerf = Float.parseFloat(qanswers);
        BigDecimal qanswerbd;
        qanswerbd = new BigDecimal(qanswerf);       

        float l3 = Float.parseFloat(value3);
        BigDecimal l3bd;
        l3bd = new BigDecimal(l3);

        qanswerbd = billbd.multiply(tipbd).add(billbd);
        qanswerbd.setScale(2, RoundingMode.HALF_UP);
        String resultbd;
        resultbd = qanswerbd.toString();   

        quick_answer.setText(resultbd);     
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:40:01.693

看起来像一个空的浮点值，但如果没有行号就很难说（第 47 行是...？）

> 引起：java.lang.NumberFormatException：无效浮点数：“”

```
EditText text = (EditText)findViewById(R.id.edit_bill);
String value = text.getText().toString(); 
```

如果您此时记录/打印，是否会返回任何内容`value`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:47:50.717

看起来您正在尝试从空字符串解析浮点数。在使用输入之前，您需要对输入进行一些健全性检查，或者至少围绕诸如 Float.parseFloat 之类的函数进行检查，这可能会因 Try-Catch（在这种情况下为 NumberFormatException）而失败，为用户提供某种有用的反馈（干杯，也许）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:39:15.543

你确定你已经在 AndroidManifest.xml 中声明了 TippingActivity 吗？

# git - 从 bash 脚本克隆 Git

> ID：10857024
> 
> 赞同：13
> 
> 时间：2012-06-01T20:35:59.327
> 
> 标签：git, bash, ssh, git-clone

我正在尝试自动化我与 Git 构建脚本的交互，但我遇到了以下问题。

这可以从命令行工作：

```
git clone git@github.xxxx.com:blablabla/reponame.git /Users/myname/dev/myfolder 
```

现在我也想做同样的事情，但来自我的脚本。我有以下内容：

```
#/bin/bash

repository="git@github.xxxx.com:blablabla/reponame.git"

localFolder="/Users/myname/dev/myfolder"

git clone $repository" "$localFolder 
```

这给了我这个错误

> GitHub SSH 访问暂时不可用 (0x09)。致命：远端意外挂断

对此的任何启示将不胜感激

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-02T11:52:33.160

你的意思是`git clone "$repository" "$localFolder"`，我希望？

跑步`git clone $repository" "$localFolder`是完全不同的东西：

*   因为两个变量都不在双引号内，所以它们的内容是字符串拆分和全局扩展的；因此，如果它们包含空格（通常是 中的字符`$IFS`），它们可以成为多个参数，并且如果它们包含 glob（`*`、`[...]`等），则这些参数可以用文件名替换（或者简单地从生成的参数列表中删除，`nullglob`如果选项已启用）
*   因为两个参数之间的空格被引用，所以在传递给`git`.

因此，对于您提供的值，此脚本运行的内容将是：

```
git clone "git@github.xxxx.com:blablabla/reponame.git /Users/myname/dev/myfolder" 
```

...这与

```
git clone git@github.xxxx.com:blablabla/reponame.git /Users/myname/dev/myfolder 
```

...因为它将`/Users/myname/dev/myfolder`路径作为 URL 的一部分。

# haskell - What's so bad about Template Haskell?

> ID：10857030
> 
> 赞同：265
> 
> 时间：2012-06-01T20:36:19.323
> 
> 标签：haskell, template-haskell

It seems that Template Haskell is often viewed by the Haskell community as an unfortunate convenience. It's hard to put into words exactly what I have observed in this regard, but consider these few examples

*   Template Haskell listed under "The Ugly (but necessary)" in response to the question [Which Haskell (GHC) extensions should users use/avoid?](https://stackoverflow.com/a/10849782/208257)
*   Template Haskell considered a temporary/inferior solution in [Unboxed Vectors of newtype'd values](http://www.haskell.org/pipermail/libraries/2012-May/017815.html) thread (libraries mailing list)
*   Yesod is often criticized for relying too much on Template Haskell (see [the blog post](http://www.yesodweb.com/blog/2011/04/yesod-template-haskell) in response to this sentiment)

I've seen various blog posts where people do pretty neat stuff with Template Haskell, enabling prettier syntax that simply wouldn't be possible in regular Haskell, as well as tremendous boilerplate reduction. So why is it that Template Haskell is looked down upon in this way? What makes it undesirable? Under what circumstances should Template Haskell be avoided, and why?

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-06-01T20:57:38.203

避免使用 Template Haskell 的一个原因是它作为一个整体根本不是类型安全的，因此与“Haskell 精神”的大部分内容背道而驰。以下是一些例子：

*   你无法控制一段 TH 代码会生成什么样的 Haskell AST，除了它会出现在哪里；你可以有一个 type 的值[`Exp`](http://hackage.haskell.org/packages/archive/template-haskell/latest/doc/html/Language-Haskell-TH-Syntax.html#t:Exp)，但你不知道它是否是一个表示 a`[Char]`或 a`(a -> (forall b . b -> c))`或其他的表达式。如果可以表示一个函数只能生成某种类型的表达式，或者只能生成函数声明，或者只能生成数据构造函数匹配模式等，那么 TH 会更可靠。
*   您可以生成无法编译的表达式。`foo`您生成了一个引用不存在的自由变量的表达式？运气不好，您只会在实际使用代码生成器时看到这一点，并且只有在触发特定代码生成的情况下才会看到。单元测试也非常困难。

TH 也是完全危险的：

*   在编译时运行的代码可以做任意事情`IO`，包括发射导弹或窃取你的信用卡。您不希望必须查看您下载的每个 cabal 软件包来搜索 TH 漏洞。
*   TH 可以访问“模块私有”函数和定义，在某些情况下完全打破封装。

然后有一些问题使 TH 函数作为库开发人员使用起来不那么有趣：

*   TH 代码并不总是可组合的。假设有人为镜头制作了一个生成器，而且通常情况下，该生成器的结构只能由“最终用户”直接调用，而不能由其他 TH 代码调用，例如一个类型构造函数列表，用于生成作为参数的镜头。在代码中生成该列表很棘手，而用户只需编写`generateLenses [''Foo, ''Bar]`.
*   开发人员甚至不**知道**可以组合 TH 代码。你知道你会写`forM_ [''Foo, ''Bar] generateLens`吗？`Q`只是一个 monad，所以你可以在它上面使用所有常用的函数。有些人不知道这一点，正因为如此，他们创建了具有相同功能的基本相同函数的多个重载版本，这些函数会导致一定的膨胀效应。此外，大多数人在`Q`monad 中编写他们的生成器，即使他们不必这样做，这就像编写`bla :: IO Int; bla = return 3`; 您正在为函数提供比它需要的更多“环境”，并且该函数的客户端需要提供该环境作为其效果。

最后，有一些事情会让最终用户使用 TH 函数变得不那么有趣：

*   不透明度。当 TH 函数具有 type`Q Dec`时，它​​绝对可以在模块的顶层生成任何东西，并且您完全无法控制将生成什么。
*   单体主义。除非开发人员允许，否则您无法控制 TH 函数生成多少；如果你找到一个生成数据库接口**和**JSON 序列化接口的函数，你不能说“不，我只想要数据库接口，谢谢；我会滚动我自己的 JSON 接口”
*   运行。TH 代码运行时间相对较长。每次编译文件时都会重新解释代码，并且通常，运行的 TH 代码需要大量的包，这些包必须被加载。这大大减慢了编译时间。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-03T15:16:49.023

这只是我个人的看法。

*   用起来很丑。`$(fooBar ''Asdf)`就是不好看。肤浅的，当然，但它有所贡献。

*   写的更难看。引用有时有效，但很多时候你必须手动进行 AST 嫁接和管道。[API](http://www.haskell.org/ghc/docs/latest/html/libraries/template-haskell-2.7.0.0/Language-Haskell-TH.html)大而笨重，总有很多你不关心但仍需要调度的案例，而你关心的案例往往以多种相似但不相同的形式存在（数据与新类型、记录-style 与普通构造函数，等等）。写起来很无聊和重复，而且复杂到不能机械化。[改革提案](https://gitlab.haskell.org/ghc/ghc/-/wikis/template-haskell/blog-post-changes)解决了其中的一些问题（使引用更广泛适用）。

*   舞台限制是地狱。不能拼接同一个模块中定义的函数是其中较小的一部分：另一个后果是，如果你有一个顶级拼接，模块中它之后的所有内容都将超出它之前的任何内容的范围。具有此属性的其他语言（C、C++）通过允许您转发声明事物使其变得可行，但 Haskell 不这样做。如果您需要拼接声明或其依赖项和依赖项之间的循环引用，那么您通常会被搞砸。

*   这是没有纪律的。我的意思是，大多数时候当你表达一个抽象时，这个抽象背后都有某种原则或概念。对于许多抽象来说，它们背后的原理可以用它们的类型来表达。对于类型类，您通常可以制定实例应该遵守和客户可以假设的规律。如果您使用 GHC 的[新泛型特性](http://www.haskell.org/haskellwiki/GHC.Generics)来抽象任何数据类型（在界限内）的实例声明的形式，您会说“对于 sum 类型，它像这样工作，对于产品类型，它像这样工作”。另一方面，模板 Haskell 只是宏。这不是想法级别的抽象，而是 AST 级别的抽象，它比纯文本级别的抽象更好，但只是适度的。*

*   它将您与 GHC 联系在一起。理论上另一个编译器可以实现它，但在实践中我怀疑这是否会发生。（这与各种类型系统扩展形成对比，虽然它们目前可能只由 GHC 实现，但我可以很容易地想象被其他编译器采用并最终标准化。）

*   API 不稳定。当新的语言特性被添加到 GHC 并更新 template-haskell 包以支持它们时，这通常涉及对 TH 数据类型的向后不兼容的更改。如果您希望您的 TH 代码与不止一个版本的 GHC 兼容，您需要非常小心并且可能使用`CPP`.

*   有一个一般原则，您应该为工作使用正确的工具，并且使用最小的就足够了，在这个类比中，Haskell 模板就是[这样的](https://i.stack.imgur.com/XNu8H.png)。如果有一种方法不是 Template Haskell，那么它通常是可取的。

Template Haskell 的优点是你可以用它来做其他任何方式都做不到的事情，而且它是一个很大的功能。大多数情况下，使用 TH 的东西只能在直接作为编译器功能实现的情况下才能完成。TH 是非常有益的，因为它可以让您做这些事情，并且因为它可以让您以更轻量级和可重用的方式对潜在的编译器扩展进行原型设计（例如，请参阅各种镜头包）。

总结一下为什么我认为 Template Haskell 存在负面情绪：它解决了很多问题，但是对于它解决的任何给定问题，感觉应该有一个更好、更优雅、更规范的解决方案更适合解决该问题，一种不是通过自动生成样板来解决问题，而是通过消除对样板的*需要*。

*虽然我经常觉得`CPP`对于它可以解决的那些问题有更好的功率重量比。

编辑 23-04-14：我在上面经常试图得到的，并且直到最近才确切得到的是，抽象和重复数据删除之间有一个重要的区别。适当的抽象通常会导致重复数据删除作为副作用，而重复通常是抽象不足的明显迹象，但这并不是它有价值的原因。适当的抽象是使代码正确、可理解和可维护的原因。重复数据删除只会使它更短。模板 Haskell 和一般的宏一样，是一种重复数据删除工具。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-06-02T02:54:36.663

我想谈谈 dflemstr 提出的一些观点。

我不认为您不能对 TH 进行类型检查这一事实令人担忧。为什么？因为即使有错误，它仍然是编译时间。我不确定这是否加强了我的论点，但这在本质上与您在 C++ 中使用模板时收到的错误相似。我认为这些错误比 C++ 的错误更容易理解，因为您将获得生成代码的漂亮打印版本。

如果一个 TH 表达式/准引用者做了一些非常先进的事情，以至于棘手的角落可以隐藏，那么也许它是不明智的？

我最近一直在研究的准引号（使用haskell-src-exts / meta）打破了这个规则 - [https://github.com/mgsloan/quasi-extras/tree/master/examples](https://github.com/mgsloan/quasi-extras/tree/master/examples)。我知道这会引入一些错误，例如无法在广义列表推导中拼接。但是，我认为[http://hackage.haskell.org/trac/ghc/blog/Template%20Haskell%20Proposal](http://hackage.haskell.org/trac/ghc/blog/Template%20Haskell%20Proposal)中的一些想法很有可能最终会出现在编译器中。在那之前，用于将 Haskell 解析为 TH 树的库几乎是完美的近似。

关于编译速度/依赖关系，我们可以使用“zeroth”包内联生成的代码。这至少对给定库的用户来说是件好事，但对于编辑库的情况，我们不能做得更好。TH 依赖项可以使生成的二进制文件膨胀吗？我认为它遗漏了编译代码未引用的所有内容。

Haskell 模块的编译步骤的分段限制/拆分确实很糟糕。

RE Opacity：这对于您调用的任何库函数都是相同的。您无法控制 Data.List.groupBy 会做什么。您只是有一个合理的“保证”/约定，版本号会告诉您有关兼容性的一些信息。什么时候改变有点不同。

这就是使用 zeroth 获得回报的地方——您已经对生成的文件进行了版本控制——因此您将始终知道生成代码的形式何时发生了变化。但是，对于大量生成的代码来说，查看差异可能有点麻烦，所以这是一个更好的开发人员界面会派上用场的地方。

RE Monolithism：您当然可以使用自己的编译时代码对 TH 表达式的结果进行后处理。过滤顶级声明类型/名称的代码不会太多。哎呀，您可以想象编写一个通用的函数。对于修改/去单体化准引用器，您可以在“准引用器”上进行模式匹配并提取使用的转换，或者根据旧的转换创建一个新的。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-06T11:55:41.937

这个答案是针对 illissius 提出的问题逐点回答的：

> *   用起来很丑。$(fooBar ''Asdf) 看起来不太好。肤浅的，当然，但它有所贡献。

我同意。我觉得 $( ) 被选择让它看起来像是语言的一部分——使用熟悉的 Haskell 符号托盘。但是，这正是您/不/想要的用于宏拼接的符号。它们肯定融合得太多了，而这个美容方面非常重要。我喜欢 {{ }} 拼接的外观，因为它们在视觉上非常不同。

> *   写的更难看。引用有时有效，但很多时候你必须手动进行 AST 嫁接和管道。[API][1] 大而笨重，总有很多你不关心但仍需要调度的案例，而你关心的案例往往以多种相似但不相同的形式存在（数据与新类型，记录样式与普通构造函数，等等）。写起来很无聊和重复，而且复杂到不能机械化。[改革提案][2] 解决了其中的一些问题（使引用更广泛适用）。

然而，我也同意这一点，正如“TH 的新方向”中的一些评论所观察到的，缺乏良好的开箱即用 AST 引用并不是一个严重的缺陷。在这个 WIP 包中，我试图以库的形式解决这些问题：[https](https://github.com/mgsloan/quasi-extras) ://github.com/mgsloan/quasi-extras 。到目前为止，我允许在比平常更多的地方进行拼接，并且可以在 AST 上进行模式匹配。

> *   舞台限制是地狱。不能拼接同一个模块中定义的函数是其中较小的一部分：另一个后果是，如果你有一个顶级拼接，模块中它之后的所有内容都将超出它之前的任何内容的范围。具有此属性的其他语言（C、C++）通过允许您转发声明事物使其变得可行，但 Haskell 不这样做。如果您需要拼接声明或其依赖项和依赖项之间的循环引用，那么您通常会被搞砸。

我之前遇到过循环 TH 定义不可能的问题……这很烦人。有一个解决方案，但它很丑 - 将循环依赖中涉及的内容包装在一个 TH 表达式中，该表达式结合了所有生成的声明。这些声明生成器之一可能只是一个接受 Haskell 代码的准引用器。

> *   这是没有原则的。我的意思是，大多数时候当你表达一个抽象时，这个抽象背后都有某种原则或概念。对于许多抽象来说，它们背后的原理可以用它们的类型来表达。当你定义一个类型类时，你通常可以制定实例应该遵守和客户可以假设的规律。如果您使用 GHC 的 [新泛型特性][3] 对任何数据类型（在范围内）抽象实例声明的形式，您可以说“对于 sum 类型，它的工作方式是这样的，对于产品类型，它的工作方式是这样的”。但是 Template Haskell 只是愚蠢的宏。这不是思想层面的抽象，而是 AST 层面的抽象，它比纯文本层面的抽象更好，但只是适度的。

只有当你用它做无原则的事情时，它才是无原则的。唯一的区别是，通过编译器实现的抽象机制，您对抽象没有泄漏更有信心。也许使语言设计民主化听起来确实有点吓人！TH 库的创建者需要很好地记录并清楚地定义他们提供的工具的含义和结果。原则性 TH 的一个很好的例子是派生包：[http](http://hackage.haskell.org/package/derive) ://hackage.haskell.org/package/derive - 它使用 DSL，因此许多派生 / 指定 / 实际派生的例子。

> *   它将您与 GHC 联系在一起。理论上另一个编译器可以实现它，但在实践中我怀疑这是否会发生。（这与各种类型系统扩展形成对比，虽然它们目前可能只由 GHC 实现，但我可以很容易地想象被其他编译器采用并最终标准化。）

这是一个很好的观点 - TH API 非常大而且笨重。重新实现它似乎很困难。然而，实际上只有几种方法可以解决表示 Haskell AST 的问题。我想复制 TH ADT 并将转换器编写为内部 AST 表示可以让您在其中获得很多好处。这相当于创建 haskell-src-meta 的（不是微不足道的）努力。它也可以通过漂亮地打印 TH AST 并使用编译器的内部解析器来简单地重新实现。

虽然我可能是错的，但从实现的角度来看，我认为 TH 并不像编译器扩展那么复杂。这实际上是“保持简单”的好处之一，而不是让基础层成为一些理论上有吸引力的、静态可验证的模板系统。

> *   API 不稳定。当新的语言特性被添加到 GHC 并更新 template-haskell 包以支持它们时，这通常涉及对 TH 数据类型的向后不兼容的更改。如果您希望您的 TH 代码与不止一个版本的 GHC 兼容，您需要非常小心并且可能使用`CPP`.

这也是一个很好的观点，但有些戏剧化。虽然最近增加了 API，但它们并没有引起广泛的破坏。另外，我认为通过我前面提到的优越的 AST 引用，可以大大减少实际需要使用的 API。如果没有构造/匹配需要不同的函数，而是用文字表示，那么大部分 API 都会消失。此外，您编写的代码将更容易移植到类似于 Haskell 的语言的 AST 表示。

* * *

总之，我认为 TH 是一个强大的、半被忽视的工具。减少仇恨可能会导致更活跃的库生态系统，鼓励实施更多语言功能原型。据观察，TH 是一个强大的工具，它可以让你/做/几乎任何事情。无政府状态！嗯，我认为这种能力可以让你克服它的大部分限制，并构建能够采用非常有原则的元编程方法的系统。值得使用丑陋的黑客来模拟“正确”实现，因为这样“正确”实现的设计将逐渐变得清晰。

在我个人理想的涅槃版本中，大部分语言实际上会从编译器中移出，进入这些种类的库中。功能作为库实现的事实不会严重影响它们忠实抽象的能力。

Haskell 对样板代码的典型回答是什么？抽象。我们最喜欢的抽象是什么？函数和类型类！

类型类让我们定义一组方法，然后可以在该类的所有泛型函数中使用这些方法。然而，除此之外，类帮助避免样板的唯一方法是提供“默认定义”。现在这里是一个无原则的特性的例子！

*   最小绑定集不可声明/编译器可检查。这可能导致由于相互递归而产生底部的无意定义。

*   尽管这会产生极大的便利和强大的功能，但由于孤立实例 [http://lukepalmer.wordpress.com/2009/01/25/a-world-without-orphans/](http://lukepalmer.wordpress.com/2009/01/25/a-world-without-orphans/) 这些将让我们修复优雅的数字层次结构！

*   追求类似 TH 的方法默认功能导致[http://www.haskell.org/haskellwiki/GHC.Generics](http://www.haskell.org/haskellwiki/GHC.Generics)。虽然这是很酷的东西，但我使用这些泛型调试代码的唯一经验几乎是不可能的，因为诱导的类型的大小和 ADT 与 AST 一样复杂。[https://github.com/mgsloan/th-extra/commit/d7784d95d396eb3abdb409a24360beb03731c88c](https://github.com/mgsloan/th-extra/commit/d7784d95d396eb3abdb409a24360beb03731c88c)

    换句话说，这追求了 TH 提供的特性，但它必须将语言的整个领域，即构造语言，提升为类型系统表示。虽然我可以看到它对您的常见问题很有效，但对于复杂的问题，它似乎容易产生一堆比 TH 黑客更可怕的符号。

    TH 为您提供输出代码的值级编译时计算，而泛型则强制您将代码的模式匹配/递归部分提升到类型系统中。虽然这确实以一些相当有用的方式限制了用户，但我认为这种复杂性不值得。

我认为拒绝 TH 和类似 lisp 的元编程导致偏爱方法默认值之类的东西，而不是更灵活、宏扩展之类的实例声明。避免可能导致不可预见结果的事情的原则是明智的，但是，我们不应忽视 Haskell 强大的类型系统允许比许多其他环境更可靠的元编程（通过检查生成的代码）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-07T10:14:42.390

Template Haskell 的一个相当实用的问题是，它仅在 GHC 的字节码解释器可用时才有效，并非所有架构都如此。因此，如果您的程序使用 Template Haskell 或依赖于使用它的库，它将无法在具有 ARM、MIPS、S390 或 PowerPC CPU 的机器上运行。

这在实践中是相关的：[git-annex](http://git-annex.branchable.com/)是一个用 Haskell 编写的工具，可以在担心存储的机器上运行，这些机器通常有非 i386-CPU。[就个人而言，我在NSLU 2](http://en.wikipedia.org/wiki/NSLU2)上运行 git-annex （32 MB RAM，266MHz CPU；您知道 Haskell 在此类硬件上工作正常吗？）如果它使用 Template Haskell，这是不可能的。

（这些天，ARM 上的 GHC 情况正在改善很多，我认为 7.4.2 甚至可以工作，但重点仍然存在）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-01-05T20:46:07.627

为什么 TH 不好？对我来说，归结为：

> 如果您需要生成如此多的重复代码，以至于您发现自己试图使用 TH 来自动生成它，*那么您做错了！*

想想看。Haskell 的一半吸引力在于其高级设计允许您避免必须用其他语言编写的大量无用样板代码。如果您*需要*编译时代码生成，那么您基本上是在说您的语言或应用程序设计失败了。我们程序员不喜欢失败。

有时，当然，这是必要的。但有时你可以通过对你的设计更聪明一点来避免需要 TH。

（另外一个就是 TH 是相当低级的，没有什么宏大的高层设计，GHC 的很多内部实现细节都暴露出来了，这使得 API 很容易发生变化……）

# c# - 使用单一方法的 Visual Studio C# 不一致的屏幕行为

> ID：10857039
> 
> 赞同：0
> 
> 时间：2012-06-01T20:36:53.587
> 
> 标签：c#, visual-studio

我手上有一个小秘密。我创建了一个表单，提示用户进行一些输入，然后显示一个 CancelOK 消息框来显示输入。用户可以通过单击提交按钮或按 Enter 键来输入输入。诀窍是，如果用户取消，我希望 MessageBox 关闭并且文本字段中的原始文本再次突出显示。这是代码：

```
namespace WindowsFormsManualAdditions
{
    public partial class ManualAdditionsForm : Form
    {
        public ManualAdditionsForm()
        {
            InitializeComponent();
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Enter)
            {
                additionsAction();
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            additionsAction();
        }

        private void additionsAction()
        {
            DialogResult btn = MessageBox.Show(textBox1.Text + " additions are being added manually", "Confirm Manual Additions", MessageBoxButtons.OKCancel);
            if (btn == DialogResult.OK)
            {
                MessageBox.Show("Hellow World!");
                this.Close();
            }
            else
            {
                textBox1.SelectionStart = 0;
                textBox1.SelectionLength = textBox1.Text.Length;
            }
        }
    }
} 
```

神秘的是，当我运行这个表单时，当调用 addedsAction() 方法时会发生两种不同的事情：

1) 用户输入数据，按回车键，选择取消，消息框消失，原文突出显示。

2) 用户输入数据，点击提交按钮，选择取消，消息框消失但原文未突出显示。

但是两个动作都调用了同一个方法，即additionsAction()，那么行为怎么会不同呢？！

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:39:46.853

行为是不同的，因为在按钮上单击鼠标的动作会从文本框中移除焦点，而按下键则不会。

当 DialogResult 不是时，尝试添加对[Control.Focus()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focus.aspx)或[Control.Select()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.select.aspx)`OK`的调用：

```
textBox1.SelectionStart = 0;
textBox1.SelectionLength = textBox1.Text.Length;
textBox1.Focus();
// Or
textBox1.Select(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:39:46.963

单击 Button1 时，textBox1 没有焦点，因此没有选择文本。

# php - getting value of array 3 levels deep

> ID：10857046
> 
> 赞同：-2
> 
> 时间：2012-06-01T20:38:06.327
> 
> 标签：php, arrays

How may I retrieve the value for [terms] from the following array to make up the string (20,21,22..., n)? Your help is most appreciated.

```
 Array
(
    [post_type] => Array
        (
            [0] => hotel
        )

    [posts_per_page] => 15
    [tax_query] => Array
        (
            [0] => Array
                (
                    [taxonomy] => facility
                    [field] => id
                    [terms] => 20
                )

            [1] => Array
                (
                    [taxonomy] => facility
                    [field] => id
                    [terms] => 21
                )

            [2] => Array
                (
                    [taxonomy] => facility
                    [field] => id
                    [terms] => 22
                )
            .
            .
            .
            [*n*] => Array
                (
                    [taxonomy] => facility
                    [field] => id
                    [terms] => *n*
                )

            [relation] => AND
        )

    [orderby] => title
    [order] => ASC
    [post_status] => publish
    [paged] => 1
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:39:49.337

尝试这个：

```
$terms = array();
foreach( $array['tax_query'] as $item)
    $terms[] = $item['terms'];

echo '(' . implode( ',', $terms) . ')'; 
```

# php - reCaptcha 给出一个没有描述的错误

> ID：10857054
> 
> 赞同：0
> 
> 时间：2012-06-01T20:38:37.063
> 
> 标签：php, recaptcha

好的，所以我正试图让验证码在这里工作，我有一个看起来像这样的小错误检测。我不会粘贴整个页面，因为那会太长，只有要领

第 1 页

```
 <?php require_once($_SERVER['DOCUMENT_ROOT'] . '/include/recaptchalib.php');
  echo recaptcha_get_html($reCaptcha_publickey); ?>
    <?php  echo $_SESSION['devtest'];?> 
```

第2页

```
if (!$resp->is_valid) 
{
    $_SESSION['devtest'] = $resp->error . "testzzz"; // DEVELOPING, DELETE THIS
    $errors = $errors . "'1',";
    // Returns errors to page1
} 
```

现在 $errors 确实有“1”，它与 devtest 的“testzzz”部分相呼应，但它没有显示错误。有人知道我在做什么错吗？谢谢

编辑：我大部分时间都遵循本指南，我只更改了 if 语句的代码[https://developers.google.com/recaptcha/docs/php](https://developers.google.com/recaptcha/docs/php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:51:55.550

`$resp->error`是你正在寻找的，`$resp->is_valid`是一个布尔值，我认为它已被弃用，因为 reCaptcha 成为谷歌主要工具的一部分，所以你可能正在检查一个不存在的变量。所以`(!$resp->is_valid)` 总是返回 TRUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:26:57.350

自己修好了……我不知道为什么默认的谷歌代码不起作用，只是简单

更换

if (!$resp->is_valid)

和

如果（$resp->错误）

它出于某种原因起作用

# ios - Using UDIDs or Serial Keys to provision iPads - AppStore approval

> ID：10857058
> 
> 赞同：0
> 
> 时间：2012-06-01T20:38:47.000
> 
> 标签：ios, app-store, appstore-approval, udid

I work for a company that makes kiosk applications. We currently use custom windows tablets for our kiosks, but we're planning to move to using an iPad for all our kiosk apps. We need to have one single app on the app store and the workflow that we show is customized based on client. We identify which client a request is coming from by the iPad's device identifier (udid). We associate this internally with a workflow on the server side and return the appropriate workflow.

So, to recap, we need to create workflows for each single iPad and the iPads are identified by deviceId. A valid workflow is needed by the device to start functioning. Ignoring that the UDID API has been deprecated for a minute, My question then is, does Apple allow this kind of deployment if we publish the app to the App Store?

Another alternate approach we were thinking about was to build a licensing infrastructure on our side. The client would get the iPad, call us for a license key and when the key is entered correctly, we populate our database with the deviceId and a workflow automatically.

Thanks,
Teja.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:50:25.257

我建议使用 ipad 的 mac 地址形成您通常会提供普通应用程序的网络服务器，您需要向此应用程序添加普通功能，例如有关产品或公司的信息，或有关如何注册或购买的信息，您必须为其添加一些可用性，以便苹果不会拒绝您的应用程序不完整或演示

之后，您将需要注册 iPad 的 mac 地址并在服务器上对其进行身份验证，如果 ipad 获得身份验证，那么您将展示 kiosk 买家将使用的全功能应用程序。

希望对你有帮助

# python - python: How to extract records from a natural language file only delimiter is 5 characters from the beginning of the record

> ID：10857060
> 
> 赞同：1
> 
> 时间：2012-06-01T20:39:06.110
> 
> 标签：python, parsing, text

I need to extract individual records from log files generated from a fairly archaic system and get them ready for database input. These flat files are all I can extract (and just formatting the query took weeks). Here is an example of a file with two records. The only delimiter I see is "/11 S11-" which is itself at a regular spot 5 characters in, but not quite at the beginning or end.

For those watching, yes, this is related to [my other newb question](https://stackoverflow.com/questions/10855951/pyparsing-extract-variable-length-variable-content-variable-whitespace-substr). I have looked at the python documentation, some google results, and some [related](https://stackoverflow.com/questions/2474216/python-to-extract-data-from-a-file) [questions](https://stackoverflow.com/questions/2573698/how-to-extract-a-couple-marked-strings-from-a-line-python). So, my questions are

a) how to use a delimiter that starts 5 characters into the record?

b) how to grab these big chunks of natural language?

c) how to get rid of the whitespace after newlines? This is probably the easiest part: I can specify in the query how much long each field is. Right now, the accessionDate is 10 characters long, the accessionNumber is 10 characters long, the patMedicalRecordNum is 15 characters long. So the whitespace on the finalDxText is 35 characters.

```
01/01/11  S11-55555 20/444-55-6666 A.  PROSTATE AND SEMINAL VESICLES, PROSTATECTOMY:                           
                                   -  ADENOCARCINOMA.                                                      

                                   TOTAL GLEASON SCORE:  GLEASON 5+4=9                                     
                                   TUMOR LOCATION:  BILATERAL                                              
                                   TUMOR QUANTITATION:  15% OF PROSTATE INVOLVED BY TUMOR
                                   EXTRAPROSTATIC EXTENSION:  PRESENT AT RIGHT POSTERIOR                   
                                   SEMINAL VESICLE INVASION:  PRESENT                                      
                                   MARGINS:  UNINVOLVED                                                    
                                   LYMPHOVASCULAR INVASION:  PRESENT                                       
                                   PERINEURAL INVASION:  PRESENT                                           
                                   LYMPH NODES (SPECIMENS B AND C):                                        
                                      NUMBER EXAMINED:  25                                                 
                                      NUMBER INVOLVED:  1                                                  
                                      DIAMETER OF LARGEST METASTASIS:  1.7 mm                              
                                   ADDITIONAL FINDINGS:  HIGH-GRADE PROSTATIC INTRAEPITHELIAL NEOPLASIA,   
                                      ACUTE AND CHRONIC INFLAMMATION, INTRADUCTAL EXTENSION OF INVASIVE    
                                      CARCINOMA                                                            

                                   PATHOLOGIC STAGE:  pT3b N1 MX                                           

                               B.  LYMPH NODES, RIGHT PELVIC, EXCISION:                                    
                                   -  ONE OF SEVENTEEN LYMPH NODES POSITIVE FOR METASTASIS (1/17).         

                               C.  LYMPH NODES, LEFT PELVIC, EXCISION:                                     
                                   -  EIGHT LYMPH NODES NEGATIVE FOR METASTASIS (0/8).                     
01/02/11  S11-4444 20/111-22-3333 PROSTATE AND SEMINAL VESICLES, PROSTATECTOMY:                               
                                  - ADENOCARCINOMA.                                                        
                                    GLEASON SCORE:  3 + 3 = 6 WITH TERTIARY PATTERN OF 5\.                                             
                                    TUMOR QUANTITATION:  APPROXIMATELY 10% BY VOLUME.                      
                                    TUMOR LOCATION:  BILATERAL.                                            
                                    EXTRAPROSTATIC EXTENSION:  NOT IDENTIFIED.                             
                                    MARGINS:  NEGATIVE.                                                    
                                    PERINEURAL INVASION:  IDENTIFIED.                                      
                                    LYMPH-VASCULAR INVASION:  NOT IDENTIFIED.                              
                                    SEMINAL VESICLE/VASA DEFERENTIA INVASION: NOT IDENTIFIED.              
                                    LYMPH NODES:  NONE SUBMITTED.                                          
                                    OTHER:  HIGH GRADE PROSTATIC INTRAEPITHELIAL NEOPLASIA.                
                                   PATHOLOGIC STAGE (pTNM):  pT2c NX. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:54:15.303

# 分隔符

我可能会摆脱困境，但看看你的记录，特别是在`01/01/11 S11-55555 20/444-55-6666`，`01/01/11`对我来说有点像约会。

因此，从您的输入来看：

*   您可以`mm/dd/yy`使用例如非常简单的正则表达式和`re.match`.
*   看起来每条记录中的数据都是缩进的，所以看起来一行没有缩进意味着它是一个分隔符。

# 空白

`my_string.strip`返回`my_string`去除初始和尾随空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:15:55.597

This is an idea:

```
 chunky = open(file, 'r')
    for line in chunky:
        if line>'00':                            # It's a starting line
            linedata = line.split(None, 3)       # separates line in four pieces
            chunk = linedata[3].strip()
        else:
            chunk += ' ' + line.strip() 
```

And for a newb: a part of a string: line[a:b] in which a is the first you need starting at 0 and b is the first you don't need. Your S11 would be linedata[1][0:3]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:10:45.460

我会尝试这样的事情：

```
import re                                # regex module

in_string = """Text from above"""

records = []                             # list to store all records in order
record = ""                              # string to store current record

for line in in_string.splitlines():      # go through each line of the input
    if re.match('\d\d/\d\d/\d\d',line):  # match the date at the start 
        records.append(record)           # add current record to list
        record = ""                      # start new current record
    record += line.strip()               # add line (without whitespace) to current record
records.append(record)                   # add last record to records list 
```

这将输出以下内容：

> ['',
> 
> '01/01/11 S11-55555 20/444-55-6666 A. 前列腺和精囊，前列腺切除术：- 腺癌。总 GLEASON 评分： GLEASON 5+4=9 肿瘤位置： 双侧肿瘤定量： 15% 的前列腺参与肿瘤EXTENSION: PRESENT AT RIGHT POSTERIORSEMINAL VESICLE INVASION: PRESENTMARGINS: UNINVOLVEDLYMPHOVASCULAR INVASION: PRESENTPERINEURAL INVASION: PRESENTLYMPH NODES (SPECIMENS B AND C):NUMBER EXAMINED: 25NUMBER INVOLVED: 1DIAMETER OF LARGEST METASTASIS: 1.7 mmADDITIONAL FINDINGS: HIGH-GRADE PROSTATIC INTRAEPITHELIAL NEOPLASIA,ACUTE AND慢性炎症，侵袭性癌症病理阶段的导管内扩展：pT3b N1 MXB。淋巴结，右盆腔，切除：- 17 个淋巴结转移阳性之一 (1/17).C. 淋巴结，左盆腔，切除：
> 
> '01/02/11 S11-4444 20/111-22-3333 前列腺和精囊，前列腺切除术：- 腺癌。格里森评分：3 + 3 = 6，三级模式为 5\. 肿瘤定量：约 10% 按体积.肿瘤位置：双侧。前列腺外扩展：未确定。边缘：阴性。神经周围浸润：已确定。淋巴血管浸润：未确定。精囊/输精管浸润：未确定。淋巴结：未提交。其他：高级别前列腺内皮内.病理阶段（pTNM）：pT2c NX。']

注意：这是一个糟糕的正则表达式，它将匹配任何以“nn/nn/nn”开头的行

您可能希望在行之间添加一个空格 - 例如`record += line.strip()+' '`

祝你好运！

* * *

[您可以在这里](http://regexpal.com/)使用正则表达式 (regex/re) - 将您的正则表达式 (ie `\d\d/\d\d/\d\d S11`) 放在顶部的框中，将您的文本放在底部的框中​​。

# jquery - Proper way to remove and add new html with jQuery

> ID：10857061
> 
> 赞同：5
> 
> 时间：2012-06-01T20:39:15.363
> 
> 标签：jquery, html, append

I have two div elements inside another. At times, from user interactivity, these two items are removed, and two new elements are placed.

Is it proper to remove the existing elements first? Or just overwrite the html? Or does it even matter?

```
$('#item1').remove();
$('#item2').remove();
$('#itemWindow').append(newItem1);
$('#itemWindow').append(newItem2); 
```

Or simply

```
$('#itemWindow').html(newItem1);
$('#itemWindow').append(newItem2); 
```

One is less code, but should the item be removed instead? The items do not have any listeners, but if they did does that make a difference?

I'm an ActionScript developer diving into JS and jQuery. In AS, if any listeners exist, it's proper to remove the item first to sever any ties to the object, for proper memory collection. Are these rules the same with JS and jQuery?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:42:41.523

他们没有区别。所以你可以继续使用第二种方法。当你使用这个

```
$('#itemWindow').html(newItem1); 
```

`$('#item1')`并将 `$('#item2')`被替换。因此，您可以跳过手动删除它们。

正如@glavić 在评论中提到的，如果你在`html`这里查看 jQuery 源代码中的方法 定义[https://github.com/jquery/jquery/blob/master/src/manipulation.js#L213](https://github.com/jquery/jquery/blob/master/src/manipulation.js#L213) 你会在最后发现它有这些行

```
 if ( elem ) {
    this.empty().append( value );
 } 
```

在这种情况下`elem`是真的。所以元素将是`emptied`，然后新元素将是`appended`。

如果他们有侦听器，那么您必须以某种方式绑定侦听器，以便它可以与动态添加的元素一起使用，例如使用[$.on](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:53:30.643

如果 item 有任何监听器，那么第一种方法更合适。`.remove()`删除项目本身和所有绑定事件。如果项目被删除但不是事件，将来可能会发生错误。但如果没有有界事件，可以使用第二种方法 - 因为代码更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:43:15.770

$('#item1').remove(); 将删除 id 为 item1 的元素

$('#item1').html(newItem1); 将在 id 为 item1 的元素中设置 html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:47:05.413

如果您想具体说明您实际要删除的内容，比如说您有一个需要删除的元素，而不是另一个，那么我推荐第一种方法。如果您只是要每次都替换所有内容，那么请随意使用，或者，唯一的问题是什么对您来说更具可读性。

# php - Komodo Edit Function and Require autocompletion

> ID：10857062
> 
> 赞同：3
> 
> 时间：2012-06-01T20:39:22.167
> 
> 标签：php, autocomplete, intellisense, komodo, komodoedit

I'm not sure what to call it so I'm calling it hints. I notice that whenever I'm calling a function, and I hover over that line, little popup bubbles appear that show me the first comment in said function definition. Helps keep track of what that function does or the possible parameters.

But that doesn't always happen, just sometimes. I was wondering if there's a preference I could change so it always does.

Also, if I'm writing and I include or require a file, if that file has functions in it, I'd like it to be able to recognize the function I'm calling from that file and display hints. Is there maybe an option to point the editor toward the included file so it can do that?

And finally, it's looking like it won't detect functions/methods with hinting that are inside of a class. Any workarounds?

Thanks, I wonder if I'm missing a shortcut or something.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:18:46.943

> 我想知道是否有我可以改变的偏好，所以它总是如此。

[代码约定](http://docs.activestate.com/komodo/7.0/editor.html#PHP_AutoComplete)、[API 目录](http://community.activestate.com/xpi/cake-php)、[智能感知设置](http://docs.activestate.com/komodo/7.0/prefs.html#code_intel)或[宏](https://stackoverflow.com/questions/5439730/calltips-docstring-while-viewing-function-list)可以提供帮助。

> 是否有可能将编辑器指向包含的文件以便它可以做到这一点？

[转到 Edit=>Preferences=>Languages，然后在PHP](http://docs.activestate.com/komodo/4.4/prefs.html#PHP)或相关语言下添加文件路径。

> 最后，它看起来不会检测到类内部带有提示的函数/方法。任何解决方法？

使用[PHPDoc/JSDoc](http://community.activestate.com/forum-topic/getting-more-your-php-and-javascript-code)来解决这个问题。

# vb.net - ODBC reading of BMC AR System / Remedy data to VS2010/VB .NET

> ID：10857063
> 
> 赞同：0
> 
> 时间：2012-06-01T20:39:36.857
> 
> 标签：vb.net, visual-studio-2010, odbc, remedy

**Edit** MY goal is this, I need to do read data from a Remedy Database using a VB .Net app. /**Edit** I am trying to read data from the AR System ODBC driver in a VS 2010 VB windows form. I have added a connection in the data connections via , a system dsn, connection string pulled from a working excel data pull, and built a connection string based via the wizard. I can test connection, and it comes back 'test connection succeeded'. When I click ok and the Data connection goes to my server explorer, it expands to tables, view, and procedures and viewing/refreshing those causes errors such as: Column 'Table_Cat' does not belong to table Tables. Error [im00][ar system odbc driver] not supported

I am aware there is the api out there, however this has a problem in that the api acts like a login session from the client, which limits you to one login session. This not feasible for the task at hand as the user needs to remain logged into remedy, and the app I'm writing will be read only for data.

The goal is a billboard app that will display certain tickets, kind of like a stock ticker. There will be no editing of ticket data from remedy, I just need to read the tickets and provide tallies and alerts for our helpdesk.

It seemed so easy when I sat down, but now 4 hours later and a mind numbing amount of irrelevant google results, I'm almost wondering if I'm going to have to report back that it cannot be done with out the api and creating more remedy accounts. Not having to create additional remedy accounts was part of of the request put to me. Tags: Visual Studio 2010 BMC AR System Remedy ODBC VB.NET

**Update** So I have done the code by hand and now seem a few steps forward, but still blind.

Ok, so if i export my excel query it looks like this from the dqy file export.dqy

```
DRIVER={AR System ODBC Driver};ARServer=xxxxxx;ARServerPort=xxxxx;UID=xxxx;PWD=xxxx;ARAuthentication=;SERVER=NotTheServer
SELECT "EN:HelpDesk"."Company Name", "EN:HelpDesk"."Call Status", "EN:HelpDesk"."Caller Region", "EN:HelpDesk"."Next Action", "EN:HelpDesk"."Detailed Description(FTS)", "EN:HelpDesk".Device, "EN:HelpDesk"."Submitted-by", "EN:HelpDesk".Impact, "EN:HelpDesk"."Arrival Time", "EN:HelpDesk"."Call Id", "EN:HelpDesk".Market  FROM "EN:HelpDesk" "EN:HelpDesk"  WHERE ("EN:HelpDesk"."Call Status"<>'Closed') AND ("EN:HelpDesk"."Submitted-by"<>'nis') AND ("EN:HelpDesk".Impact='High') AND ("EN:HelpDesk".Market='DCIN') AND ("EN:HelpDesk"."Caller Region"<>'UK') 
```

First off, these quotes look wrong to me, but it seems to work because if I leave them, executing the command doesn't fail, however it doesn't return data to my data grid view in vb. Second the EN:Helpdesk looks odd to me but again same results as the quotes. I have tried changing the quotes to brackets [ ] but receive errors once I do.

Here is my code:

VB Code

```
Imports SystemM My goal 
Imports System.Data
Imports System.Data.Odbc
Imports System.Data.SqlClient

Sub Main()

    Dim sql As String

    Dim connectionString As String = "DRIVER={AR System ODBC Driver};ARServer=xxx;ARServerPort=xxx;UID=xxx;PWD=xxx;ARAuthentication=;SERVER=NotTheServer"

    sql = "SELECT ""EN:HelpDesk"".""Company Name"", ""EN:HelpDesk"".""Call Status"", ""EN:HelpDesk"".""Caller Region"", ""EN:HelpDesk"".""Next Action"", ""EN:HelpDesk"".""Detailed Description(FTS)"", ""EN:HelpDesk"".Device, ""EN:HelpDesk"".""Submitted-by"", ""EN:HelpDesk"".Impact, ""EN:HelpDesk"".""Arrival Time"", ""EN:HelpDesk"".""Call Id"", ""EN:HelpDesk"".Market  FROM EN:HelpDesk WHERE (""EN:HelpDesk"".""Call Status""<>'Closed') AND (""EN:HelpDesk"".""Submitted-by""<>'nis') AND (""EN:HelpDesk"".Impact='High') AND (""EN:HelpDesk"".Market='DCIN') AND (""EN:HelpDesk"".""Caller Region""<>'UK')"

    Dim bindingSource1 As New BindingSource()

    Me.SQLDS_reportresults.DataSource = bindingSource1

    Dim myAdapter = New OdbcDataAdapter(sql, connectionString)

    Dim commandBuilder As New OdbcCommandBuilder(myAdapter)

    Dim table As New DataTable()

    table.Locale = System.Globalization.CultureInfo.InvariantCulture

    myAdapter.Fill(table)

    bindingSource1.DataSource = table

    Me.SQLDS_reportresults.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCellsExceptHeader)

End Sub 
```

Project is a windows forms with a button to activate main(), a textbox (textbox1) and a datagridview(SQLDS_reportresults).

As the code stands, this causes no errors, but my datagridview never populates. Since there are no errors, I'm inclined to think my connection is working , and that my command is being executed,making my problem lay in code, however given the funky use of quotes and en:helpdesk in the sql command, I'm also concerned that is malformed and causing the where portion to return no results.

Anyone have any suggestions / ideas?

I need a way to display these results in app, and right now I don't care how just as long as I can see some data at all.

I've been googling and looked at the vb examples in the api zip but that is not related to opening a odbc connection and I found that of little help in my research.

I almost feel like I'm missing something simple or obvious.

When i run odbcad32.exe my ar system odbc driver shows 7.00.01.02 which is what I assume is installed on everyones machines as I used the remedy install set provided to me by the IT/Software admins to build this dev box.

# php - 将 PHP 路径更改为 MAMPs PHP

> ID：10857068
> 
> 赞同：9
> 
> 时间：2012-06-01T20:39:56.753
> 
> 标签：php, macos, mamp

我在 OSX 10.5.8 上使用 MAMP 运行 PHP

因此，如果我想从控制台运行脚本，我总是需要编写

```
/applications/mamp/bin/php5.3/bin/php path/to/script 
```

这很烦人。有没有办法将默认路径更改为 php 以便我可以编写

```
php path/to/script 
```

并且仍然使用 MAMPs PHP 版本？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-01T20:42:25.183

在您的主目录上创建一个名为的文件`.bash_profile`（如果您还没有此文件），并将其添加到文件中：

```
export PATH=/Applications/mamp/bin/php5.3/bin:$PATH 
```

然后退出并重新启动 Terminal.app

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-09T07:36:11.500

# 使用最新的 MAMP 版本的 PHP

> 你需要编辑 .bash_profile

```
open -a TextEdit ~/.bash_profile 
```

> 如果在主目录下找不到 bash_profile，则创建 .bash_profile：

```
 touch ~/.bash_profile 
```

> 使用最新的 MAMP 版本的 PHP

```
PHP_VERSION=`ls /Applications/MAMP/bin/php/ | sort -n | tail -1`
export PATH=/Applications/MAMP/bin/php/${PHP_VERSION}/bin:$PATH 
```

（在进行更改后使用 source ~/.bash_profile 以确保它们生效。）

来源：[如何覆盖 PHP 的路径以使用 MAMP 路径？](https://stackoverflow.com/questions/4145667/how-to-override-the-path-of-php-to-use-the-mamp-path)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-03T22:31:02.603

最简单的方法是重写别名。只需将下面的 cmd 复制/粘贴到终端中以供临时使用或将其写入 .bash_profile 以使其永久化。

对于 MAMP

```
$ alias php=/applications/mamp/bin/php5.3/bin/php 
```

对于 XAMPP

```
$ alias php=/Applications/XAMPP/bin/php 
```

对于 AMPPS

```
$ alias php=/Applications/AMPPS/php-5.6/bin/php 
```

通过我们的新别名运行 php

```
$ php -v 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-25T01:39:34.290

```
vi ~/.bash_profile

//add
export PATH=/path/to/php/bin:$PATH

source ~/.bash_profile 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-19T05:57:01.807

除了 bfvaretto 很好的答案：由于 .bash_profile 在登录时执行，您需要重新启动系统才能使更改生效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-12T20:04:26.157

我不确定这是否特定于 MAMP 3.0，但您需要为 MAMP 3.0 执行以下路径。确保将 PHP 版本更改为您用于服务器的版本。

再次进入 ~/.bash_profile

```
export PATH=/Applications/MAMP/bin/php/php5.5.10/bin:$PATH 
```

# c++ - 成员函数返回位集，继承自基类

> ID：10857069
> 
> 赞同：0
> 
> 时间：2012-06-01T20:40:00.793
> 
> 标签：c++, inheritance, polymorphism, bitset

因此，我正在尝试为我的一个项目创建一个基类，该基类将继承几个类。我的问题是我试图从其中一个方法返回一个 std::bitset，问题是在每个子类中都会返回不同大小的位集，所以我正在寻找一种方法来声明一个返回位集的方法大小未知，对于子类已知的基类完全未知。此外，我保证基类是抽象的，不会单独使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T20:42:28.303

你不能那样做，大小`std::bitset`是其类型的一部分，不同大小`std::bitset`的s是不同的*不相关*类型。您可以使用*type-erasure*来抽象差异，但在您的特定情况下，仅使用动态位集会更简单，例如*Boost*中可用的位集。

[http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html](http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html)

如果您的基类只是一个实用程序类，不打算从外部世界使用，那么您可以将其设置为根据`std::bitset`大小参数化的模板类：

```
template< int Size > class base
{
    typedef std::bitset< Size > bitset_type;
};

class derived : base< 128 > { ... }; 
```

但是，您的每个类都将继承自不同的*不相关*基类。

# spring - Spring 集成、JMS 入站通道网关和事务

> ID：10857076
> 
> 赞同：0
> 
> 时间：2012-06-01T20:40:51.980
> 
> 标签：spring, spring-integration

我正在使用配置有 jms:message-driven-channel-gateway 的 SI。我的用例是从队列接收消息，通过 JDBC 将其保存到数据库，从队列提交消息，然后让该消息根据其类型继续流经各种渠道。如果消息随后出错，这没关系，因为我将原始信息存储在数据库中，因此可以重播。

我的问题是在数据库持续存在后立即尝试从队列中提交事务。这实际上是中间流程，我只能让 Spring 事务管理在最后尝试并正确提交。这是不合适的，因为如果在数据库持久化之后抛出错误，它仍然会将消息留在 JMS 队列中，因为这是外部事务的起源。

那么，有没有一种简单的方法可以从 JMS 队列中提取消息，保存到数据库，然后将其提交出队列？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:02:25.743

您需要在 DB 提交后去异步 - 在 DB 更新后使用 ExecutorChannel 或 QueueChannel；然后下游流将在另一个线程上运行，并且事务将在切换后提交。

# hwnd - FindWindow() 找不到我的窗口 [C++]

> ID：10857078
> 
> 赞同：4
> 
> 时间：2012-06-01T20:41:18.257
> 
> 标签：hwnd, findwindow

这不是一个复杂的问题。我无法找到属于 iTunes 的句柄。但是，尽管 iTunes 在后台运行，但它一直告诉我它找不到窗口。所以我继续检查我是否错过了输入窗口名称，但 spy++ 指出我使用了正确的窗口名称和类名（见下文）。我确定这是一个小错误，但我似乎找不到它。有没有人有见识？提前致谢。

```
 HWND hwnd;
        hwnd = FindWindow((LPCWSTR)"iTunes",(LPCWSTR)"iTunes");
    if (hwnd != 0){
        cout << "WINDOW FOUND" << endl;
    } else { 
        cout << "WINDOW NOT FOUND" << endl; 
        cout << hwnd << endl;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:43:50.207

您使用的 ANSI 字符串似乎是`FindWindow`.

许多Win32函数实际上是一对函数和一个宏。例如，`FindWindow`大致定义如下：

```
HWND WINAPI FindWindowA(LPCSTR lpClassName, LPCSTR lpWindowName);
HWND WINAPI FindWindowW(LPCWSTR lpClassName, LPCWSTR lpWindowName);

#if (UNICODE)
#  define FindWindow FindWindowW
#else
#  define FindWindow FindWindowA
#endif 
```

尝试显式调用`FindWindowA`或使用这样的宽字符串：

```
HWND hwnd = FindWindow(L"iTunes", L"iTunes"); 
```

# java - Netbeans 生成的 WAR 在 Glassfish Server 3.1 中不起作用

> ID：10857082
> 
> 赞同：0
> 
> 时间：2012-06-01T20:41:37.307
> 
> 标签：java, servlets, netbeans, glassfish-3, war

我曾多次尝试将 Netbeans WAR 网络服务部署到 Glassfish 中，但它返回此错误：

```
 Error occurred during deployment: Exception while loading the app : 
java.lang.IllegalStateException: ContainerBase.addChild: start:     
org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: 
javax.servlet.ServletException: 
com.sun.xml.ws.transport.http.servlet.WSServletException:
 WSSERVLET11: failed to parse  
runtime descriptor: java.lang.RuntimeException: MASM0015: Class [  
com.sun.xml.ws.tx.runtime.TxTubeFactory ] does not implement [ 
com.sun.xml.ws.assembler.dev.TubeFactory ] interface. 

Please see server.log for more details. 
```

无论我在 Eclipse 中生成什么 WAR，都可以在 Glassfish 中使用，但我尝试从 Netbeans 导入这个项目，但没有成功。Glassfish 也返回同样的错误。日志不会扩展可能问题的信息。

顺便说一句，在用于 Netbeans 的嵌入式 Glassfish 中，Web 服务的工作方式非常棒，但是导入它会导致 Glassfish 服务器（另一台计算机）出错

有什么建议么？我需要在 Glassfish 服务器中更改任何配置吗？

谢谢大家的想法和解决方案。

克里斯蒂娜

从服务器 .LOG 中提取

```
[#|2012-05-31T10:16:59.951-    
0430|INFO|glassfish3.1|com.sun.xml.ws.wstx|_ThreadID=40;_ThreadName=Thread-1;|[failed 
to localize] HOST_AND_PORT_LOOKUP_FAILURE_2015(https://192.168.2.43:8080)

java.lang.ClassNotFoundException: com.sun.enterprise.webservice.WsTxUtils

[#|2012-05-31T10:16:59.990- 
0430|SEVERE|glassfish3.1|com.sun.xml.ws.wspolicy.jaxws.PolicyWSDLParserExtension|_ThreadID=    40;_ThreadName=Thread-1;|WSP1007: Policy exception occured when finishing WSDL parsing.
com.sun.xml.ws.policy.PolicyException: [failed to localize]  
WSP_0071_ERROR_MULTIPLE_ASSERTION_CREATORS_FOR_NAMESPACE(http://schemas.xmlsoap.org/ws/2004/08/addressing,     com.sun.xml.ws.security.addressing.impl.policy.AddressingPolicyAssertionCreator,     com.sun.xml.ws.addressing.impl.policy.AddressingPolicyAssertionCreator)

Caused by: com.sun.xml.ws.policy.PolicyException: [failed to localize]     WSP_0071_ERROR_MULTIPLE_ASSERTION_CREATORS_FOR_NAMESPACE(http://schemas.xmlsoap.org/ws/2004    /08/addressing,     com.sun.xml.ws.security.addressing.impl.policy.AddressingPolicyAssertionCreator,     com.sun.xml.ws.addressing.impl.policy.AddressingPolicyAssertionCreator)

[#|2012-05-31T10:16:59.990-    0430|FINE|glassfish3.1|javax.enterprise.system.container.web.org.glassfish.web.loader|_Thre    adID=143;_ThreadName=Thread-    1;ClassName=org.glassfish.web.loader.WebappClassLoader;MethodName=clearReferences;|Could     not set field tm to null in class com.sun.xml.ws.tx.at.ATCoordinator
java.lang.NoClassDefFoundError: Could not initialize class     com.sun.xml.ws.tx.at.ATCoordinator

[#|2012-05-31T10:16:59.990-    0430|FINE|glassfish3.1|javax.enterprise.system.container.web.org.glassfish.web.loader|_Thre     adID=143;_ThreadName=Thread-    1;ClassName=org.glassfish.web.loader.WebappClassLoader;MethodName=clearReferences;|Could     not set field wsatCoordinatorService to null in class com.sun.xml.ws.tx.at.ATCoordinator
java.lang.NoClassDefFoundError: Could not initialize class     com.sun.xml.ws.tx.at.ATCoordinator 
```

[#|2012-05-31T10:16:59.990-0430|FINE|glassfish3.1|javax.enterprise.system.container.web.org.glassfish.web.loader|_Thread ID=143;_ThreadName=Thread-1; ClassName=org.glassfish.web.loader.WebappClassLoader;MethodName=clearReferences;|无法在 com.sun.xml.ws.tx.at.ATCoordinator java.lang.NoClassDefFoundError 类中将字段 wsatCoordinatorService 设置为 null：无法初始化类 com .sun.xml.ws.tx.at.ATCoordinator

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T17:25:33.747

类似的事情最近发生在我身上。发生的事情是，最初我打算将应用程序部署到 Tomcat7，因此 Netbeans 在我的库部分中包含了一些 Metro jar。然后我决定改为部署到 Glassfish，但是这些 Metro jar 显然是导致您看到的问题的原因。我刚刚从 Netbeans 的库部分中删除了 Metro jar，重新部署，一切正常。

这是一个关于正在发生的事情的更多讨论的链接：[https](https://java.net/jira/browse/WSIT-1636) ://java.net/jira/browse/WSIT-1636 。

# c# - 将 ListView 绑定到没有命名属性的 ArrayList 项的 ObservableCollection

> ID：10857085
> 
> 赞同：0
> 
> 时间：2012-06-01T20:42:10.590
> 
> 标签：c#, listview, arraylist, observablecollection

首先：

```
 <ListView Height="259" HorizontalAlignment="Left" Margin="7,6,0,0" Name="dataListView" VerticalAlignment="Top" Width="899">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="240" Header="Test" />
                    <GridViewColumn Width="50" Header="Result" />
                    <GridViewColumn Header="Column 3" />
                </GridView>
            </ListView.View>
        </ListView> 
```

是我的 XAML 文件中的定义。

然后当测试开始时，我运行：

```
dataListView.ItemsSource = tr.TestResultCollection; 
```

在 TestRunner.cs 中，我创建了 ArrayLists 的 Observable 集合，如下所示：

```
ObservableCollection<ArrayList> _testResultCollection = new ObservableCollection<ArrayList>(); 
```

并公开这样称呼他们：

```
 public ObservableCollection<ArrayList> TestResultCollection
        { get { return _testResultCollection; } } 
```

最后，当我添加到集合中时，我使用：

```
_testResultCollection.Add(SummaryVerificationTestCase1(dbs, dbd)); 
```

它将一个 ArrayList 添加到集合中。（是的，ArrayLists 的集合，我知道......）

但是，每列中显示的是 (Collection), (Collection, (Collection)。

我明白为什么了。但是，我不完全确定最整洁的方法是什么。通常在每个 GridViewColumn 中，您会提供如下绑定：

> DisplayMemberBinding="{绑定测试结果}"

但是 ArrayList 没有命名组件，只有索引 (0-2)。

有没有办法将每列绑定到各个索引？还是我已经错过了一些简单的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:58:14.910

在绑定路径中指定索引：

```
 <GridViewColumn Width="240" Header="Test" DisplayMemberBinding="{Binding Path=[0]}"/>
       <GridViewColumn Width="50" Header="Result" DisplayMemberBinding="{Binding Path=[1]}"/>
       <GridViewColumn Header="Column 3" DisplayMemberBinding="{Binding Path=[2]}"/> 
```

# python - 如何从 CustomTreeCtrl 获得复选框选择

> ID：10857090
> 
> 赞同：1
> 
> 时间：2012-06-01T20:42:34.450
> 
> 标签：python, wxpython

我正在使用带有复选框的 CustomTreeCtrl，但我不知道如何确定选择了哪些复选框。我查看了[http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.TreeCtrl.html#GetSelection](http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.TreeCtrl.html#GetSelection)并将其放在一起：

```
import string
import os
import sys
import wx
import wx.lib.agw.customtreectrl as CT

class MyFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent, -1, "CustomTreeCtrl Demo")        

        custom_tree = CT.CustomTreeCtrl(self, agwStyle=wx.TR_DEFAULT_STYLE)
        root = custom_tree.AddRoot("The Root Item")

        for y in range(5):
            last = custom_tree.AppendItem(root, "item %d" % y)

            for z in range(5):
                item = custom_tree.AppendItem(last,  "item %d" % z, ct_type=1)

            self.Bind(CT.EVT_TREE_ITEM_CHECKED, self.ItemChecked)

    def ItemChecked(self, event):
            print("Somebody checked something")
            print(event.GetSelections())

app = wx.PySimpleApp()
frame = MyFrame(None)
app.SetTopWindow(frame)
frame.Show()
app.MainLoop() 
```

当我选中一个框时，我得到了 Traceback：“AttributeError：'TreeEvent' 对象没有属性'GetSelections'”关于如何读取哪些框被选中的任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:01:47.133

有问题的`event`对象没有`GetSelections`方法。它确实有一个`GetSelection`，它将告诉您在该事件中选择了哪个项目。如果您想获取所有选定的项目 inside `ItemChecked`，请重命名`custom_tree`为`self.custom_tree`，然后您就可以调用`self.custom_tree.GetSelections()`inside `ItemChecked`。

如果将来您想知道某些事件对象可以使用哪种方法，您可以放入`print(dir(event))`您的处理程序。

自定义树控件没有获取选中项的方法。您可以做的一件事是`self.checked_items`在您的框架中创建一个列表，并在您的`ItemChecked`方法中维护它。此列表可以保存项目的字符串值或项目本身。例如，

```
class MyFrame(wx.Frame):
    def __init__(self, parent):
        # ....
        self.checked_items = []
        # ....

    def ItemChecked(self, event):
        if event.IsChecked():
            self.checked_items.append(event.GetItem())
            # or to store the item's text instead, you could do ...
            # self.checked_items.append(self.custom_tree.GetItemText(event.GetItem()))
        else:
            self.checked_items.remove(event.GetItem())
            # or ... 
            # self.checked_items.remove(self.custom_tree.GetItemText(event.GetItem())) 
```

# javascript - 在 JavaScript 函数中返回 undefined

> ID：10857093
> 
> 赞同：0
> 
> 时间：2012-06-01T20:42:57.290
> 
> 标签：javascript, undefined

当我调用这个函数时，发送例如：abc 作为参数，函数返回：undefinedcba。我不知道为什么它会在我的返回值中添加“未定义”。我可能忽略了一些明显的东西，但我无法发现它。谢谢你。

```
function FirstReverse(str) { 
    var str_arr1 = new Array();
    var ans = '';
    for(i=0; i < str.length; i++) {
        str_arr1.push(str.charAt(i));
    }
    for(j=str.length; j >= 0; j--) {
        ans += str_arr1[j];
    }
    return ans; 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T20:45:09.050

字符串是 0 索引的。 `str[str.length]`不存在。

`j`需要从`str.length - 1`.

要不就`return str_arr1.join();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:47:04.473

字符串的索引从 0 开始，因此`string.length`总是比字符串中最后一个字符的索引大一个数字。

在第二个 for 循环中，使用

```
for(var j=str.length -1; j >= 0; j--) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:49:18.103

因为当您传递 'abc' 时，其中只有 3 个字符。所以数组`str_arr`在索引 0、1 和 2 处有元素。但是你正在循环`str.length`ie 3 次并且`str_arr[3]`没有定义。

你应该做这个，

```
function FirstReverse(str) {  
  var str_arr1 = new Array();
  var ans = '';
  for(i=0; i < str.length; i++) {
    str_arr1.push(str.charAt(i));
  }
  for(j=str.length-1; j >= 0; j--) {
    ans += str_arr1[j];
  }
  return ans;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:51:43.730

看起来你想反转一个字符串，你可以在这个 javascript one liner 中做到这一点

```
function reverse(s){
    return s.split("").reverse().join("");
} 
```

你得到一个未定义的原因是因为你`j`以 开头`str.length`，而它应该`str.length-1\. str_arr1[str.length]`是超出范围的，因此将是未定义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T20:45:32.327

错误在第二个`for`语句中。查看解决方案：

```
function FirstReverse(str) { 
    var str_arr1 = new Array();
    var ans = '';
    for(i=0; i < str.length; i++) {
        str_arr1.push(str.charAt(i));
    }
    for(j=str.length-1; j >= 0; j--) {
        ans += str_arr1[j];
    }
    return ans;
} 
```

# templates - 在多个域上重用模板

> ID：10857096
> 
> 赞同：0
> 
> 时间：2012-06-01T20:43:06.577
> 
> 标签：templates, grails, reusability

我正在尝试在多个域上重用模板。模板如下所示：

```
<div id="emailEntry">
    <Table>
        <tr class="prop">
        <td valign="top" class="name">
            <label for="email" id="email"><g:message code="default.email.label" default="Primary e-mail address* :" id="email" /></label>
        </td>
        <td valign="top" class="value ${hasErrors(bean: instanceToUse, field: 'email', 'errors')}">  
            <g:textField name="email" value="${instanceToUse?.email}"/> 
        </td>
    </tr>       
    </Table>
</div> 
```

我的观点是这样称呼这个模板：

```
<g:render template="/templates/frmEmailTableEntry" /> 
```

我的班级“客户”和“员工”都有电子邮件属性。所以我的问题是，如果我想为类“ **customer** ”和“ **employee** ”重用模板“frmEmailTableEntry”，我应该把什么放在模板中的“ **instanceToUse ”中。**我读到了关于声明 var 的渲染，但我不太确定如何通过它。请帮我解决一下这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:48:44.213

在模板中放入什么并不重要。如果你保持原样，你可以像这样在其他 gsp 中使用它：

```
//say the instance you wish to use is "customerInstance"
<g:render template="/templates/frmEmailTableEntry" model="[instanceToUse: customerInstance]" /> 
```

这将传递`customerInstance`到`${instanceToUse}`模板中的变量中。

# c - 只是好奇，为什么这不会导致段错误？

> ID：10857105
> 
> 赞同：1
> 
> 时间：2012-06-01T20:43:50.823
> 
> 标签：c, char, segmentation-fault

所以我的理解是，一个 C 字符串，例如“0123456789”，实际上会占用一个由 11 个字符组成的数组，其中 10 个字符用于正文，一个字符用于终止 null。如果这是真的，那么为什么下面的代码不会导致某种错误？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char ** argv){

    char * my_string = "0123456789";
    /* my string should occupy 11 bytes */

    int my_len = strlen(my_string);
    /* however, strlen should only return 10, 
        because it does not count the null byte */

    char * new_string = malloc(my_len);
    /* allocate memory 10 bytes wide */

    memcpy(new_string, my_string, my_len);
    /* copy the first 10 bytes from my_string to new_string
        new_string should NOT be null terminated if my understanding
        is correct? */

    printf("%s\n", new_string);

    /* Since new_stirng is NOT null terminated it seems like this should
        cause some sort of memory exception.
        WHY DOES THIS NOT CAUSE AN ERROR?

    */

    return 0;
} 
```

由于`new_string`不是空终止，我希望`printf`永远读取，直到它到达一些其他应用程序内存，或者随机放置在某处的 0x00 并且崩溃或打印一些奇怪的东西。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:48:45.053

您创建了[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。该行为取决于编译器和平台。它可能会崩溃。它可以工作。它可以让你敬酒。它可能会将您的计算机坍塌成一个奇点并吸收太阳系。

在您的情况下，内存可能`new_string[11]`已经`0`是 ，即`'\0'`，或者终止空字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T20:46:47.613

因为它是未定义的行为。未定义的行为并不意味着段错误，尽管这是一种可能性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T20:51:06.787

在您的情况下，您从 malloc 获得的特定内存块以前从未使用过（由您的程序），并且它可能在分配时被操作系统零初始化。因此，第 11 个字节可能为零，因此没有错误。在运行时间较长的程序中，malloc 可能会返回第 11 个字节不为 0 的脏内存块，因此您将在 printf 语句中遇到问题。在实践中，如果在分配区域结束之前没有空值，您将打印垃圾（直到遇到第一个空值）或段错误。

（正如其他人所说，这种行为在形式上是未定义的，我只是在解释你所看到的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T20:47:21.267

> 或随机放置的 0x00 某处...打印一些奇怪的东西。

这是通常观察到的行为。实际会发生什么是不确定的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T20:51:01.160

这是未定义的行为。在某些情况下，它可能会导致崩溃，这取决于我想象的内存布局

# wpf - 可调整大小的剪切路径

> ID：10857109
> 
> 赞同：0
> 
> 时间：2012-06-01T20:44:24.793
> 
> 标签：wpf

我有一个对象：一个 ListView，当窗口调整大小时，这个 listview 会调整大小。现在它也有一个剪辑路径，但剪辑不会随其余部分一起调整大小。这在WPF中甚至可能吗？

# angularjs - AngularJS 和生成的元素

> ID：10857110
> 
> 赞同：5
> 
> 时间：2012-06-01T20:44:33.300
> 
> 标签：angularjs

我们有一些第三方 javascript 组件正在生成一些 html 元素。我想将它与 AngularJS 结合起来。

我试过这段代码

```
<div ng-controller="ExpensesCtrl">
    <form id="expensesform">
        <input type="text" ng-model="expense.name" />
        <input type="text" ng-model="expense.amount" />
    </form>
    <button ng-click="add()">Add</button>expense | json
</div> 
```

* * *

```
function ExpensesCtrl($scope) {

    $scope.expense = {};
    $scope.add = function () {
        $("#expensesform").append("<input type='text' ng-model='expense.age' />");
    };
} 
```

[http://jsfiddle.net/tChNh/](http://jsfiddle.net/tChNh/)

但它不像例外那样工作。

有没有机会让这个工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T13:56:53.837

这是错误的方法，但是对于这种特殊情况，您需要执行以下操作：http: [//jsfiddle.net/wXZL7/1](http://jsfiddle.net/wXZL7/1)。注入 $compile 服务。

同样，这不是使用 Angular 的正确方法。Angular 的做法是“你不必在控制器中弄乱 DOM，让 HTML 和指令来做”。

您想创建一个指令来包装生成元素的任何内容并让它执行。阅读指令指南以获取示例：[http ://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T22:41:28.110

角度方式，让您的模型完美同步，并动态添加或删除输入类型将使用[http://jsfiddle.net/3BVMm/1/](http://jsfiddle.net/3BVMm/1/)

你应该提供我们在这里谈论的插件，也许 Angular 只用几个代码就可以把这个插件吹走......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T15:22:37.010

我找到了这个答案：[Compiling dynamic HTML strings from database](https://stackoverflow.com/questions/18157305/angularjs-compiling-dynamic-html-strings-from-database)

也许它可以帮助其他人。它描述了如何使用该`$compile`服务让 Angular 了解已知代码。

# xtk - 未找到 Volume.slicing_()

> ID：10857112
> 
> 赞同：0
> 
> 时间：2012-06-01T20:44:44.063
> 
> 标签：xtk

尝试使用此方法时出现“错误：volume.slicing_ is not a function”。它位于[http://api.goxtk.com/symbols/src/_Users_d_Projects_X_objects_volume.js.html](http://api.goxtk.com/symbols/src/_Users_d_Projects_X_objects_volume.js.html)的 api 文档和源代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:53:50.723

您可能可以通过查看来显示单个图像

[http://jsfiddle.net/haehn/qxMtk/](http://jsfiddle.net/haehn/qxMtk/)

和

[http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/gh-pages/13/#run](http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/gh-pages/13/#run)

# android - 实现 CursorAdapter，newView 出现问题

> ID：10857119
> 
> 赞同：0
> 
> 时间：2012-06-01T20:45:28.013
> 
> 标签：android

我创建了一个 CursorAdapter 但我不断收到以下错误：

```
06-01 20:36:58.890: E/AndroidRuntime(21204): java.lang.ClassCastException: android.view.View cannot be cast to android.view.ViewGroup 
```

这是我的代码：

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent)
{
    final LayoutInflater inflater = LayoutInflater.from(context);

    //***The error originates from this line***
    final View view = inflater.inflate(R.layout.competitor_autocomplete_list_item, parent, false);

    TextView stockNameTextView = (TextView) view.findViewById(R.id.autocomplete_stock_name); 
    TextView stockSymbolTextView = (TextView) view.findViewById(R.id.autocomplete_stock_symbol);        

    String stockName = cursor.getString(cursor.getColumnIndex(StournamentConstants.TblStocks.COLUMN_NAME)); 
    String stockSymbol = cursor.getString(cursor.getColumnIndex(StournamentConstants.TblStocks.COLUMN_EXTERNAL_ID)); 

    stockNameTextView.setText(stockName);
    stockSymbolTextView.setText(stockSymbol);       

    return view;
} 
```

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

    <TextView
    android:id="@+id/autocomplete_stock_name"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="#95B9C7"
    android:padding="10dp"        
    android:textColor="#000"
    android:textSize="16sp" />

    <TextView
    android:id="@+id/autocomplete_stock_symbol"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="#95B9C7"
    android:padding="10dp"        
    android:textColor="#000"
    android:textSize="16sp" />
</LinearLayout> 
```

我基本上想使用带有两个 TextViews 的 LinearLayout，但又使用带有两个 TextViews 的 View，因为我认为这会解决这个错误。我尝试转换为其他类型，但我被卡住了 - 我不明白我在这里做错了什么。

谁能看到我错过了什么？谢谢！

* * *

更新

我将布局更改为使用`LinearLayout`. 现在我收到以下错误：06-02 00:48:15.820: E/AndroidRuntime(32157): java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams

离开后方法如下：

```
@Override
public void bindView(View view, Context context, Cursor cursor)
{           
    ((LinearLayout) view).addView(view);
} 
```

这是抛出异常后的打印堆栈

```
06-02 00:53:37.031: E/AndroidRuntime(32327): FATAL EXCEPTION: main
06-02 00:53:37.031: E/AndroidRuntime(32327): java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.ListView.measureScrapChild(ListView.java:1163)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.ListPopupWindow.buildDropDown(ListPopupWindow.java:1095)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.ListPopupWindow.show(ListPopupWindow.java:524)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.AutoCompleteTextView.showDropDown(AutoCompleteTextView.java:1062)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.AutoCompleteTextView.updateDropDownForFilter(AutoCompleteTextView.java:939)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.AutoCompleteTextView.onFilterComplete(AutoCompleteTextView.java:921)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:285)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.os.Looper.loop(Looper.java:137)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at java.lang.reflect.Method.invokeNative(Native Method)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at java.lang.reflect.Method.invoke(Method.java:511)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-02 00:53:37.031: E/AndroidRuntime(32327):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:54:18.973

您不能将视图放在其他视图中。您需要一个 ViewGroup 来执行此操作，因此会出现错误。如果您在布局 xml 文件中切换回 LinearLayout，错误应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:58:52.453

尝试这个：

```
View view = inflater.inflate(R.layout.competitor_autocomplete_list_item, parent, false); 
```

**编辑**

我错过了你从线性布局改变。Renard 是正确的，将其改回（不要尝试强制转换），它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:54:48.787

我为子孙后代记录了这一点。

误导我的是我不明白我必须复制我`newView()`在`bindView()`.

我看到人们`TextView`像这样绑定一个单曲：`((TextView) view).setText(item);`并且认为我必须做同样的事情以防我通过 a`View`并且因为你不能`setText()`在`View`我做了这样的事情：`((LinearLayout) view).addView(view);`。

好吧，我宁愿忘记这件事，即使发生在我身上。如果您有兴趣在 CursorAdapter 中使用 LinearLayout，这是正确的代码：

```
@Override
public View bindView(Context context, Cursor cursor, ViewGroup parent)
{
  TextView stockNameTextView = (TextView) view.findViewById(R.id.autocomplete_stock_name); 
  TextView stockSymbolTextView = (TextView) view.findViewById(R.id.autocomplete_stock_symbol);        

  String stockName = cursor.getString(cursor.getColumnIndex(TournamentConstants.TblStocks.COLUMN_NAME)); 
  String stockSymbol = cursor.getString(cursor.getColumnIndex(TournamentConstants.TblStocks.COLUMN_EXTERNAL_ID)); 

  stockNameTextView.setText(stockName);
  stockSymbolTextView.setText(stockSymbol);       
} 
```

# macos - 启动和/或控制 Mac 程序的方法？

> ID：10857123
> 
> 赞同：0
> 
> 时间：2012-06-01T20:45:41.907
> 
> 标签：macos, cocoa, mechanize

有没有办法在不同时间以编程方式启动 Mac 程序，或者更好的是，一旦你启动了应用程序，调度程序/计时器/控制器可以在不同时间发送应用程序命令？

类似于 Ruby 和 Perl Mechanize 库（与 Nokogiri 结合），允许脚本登录和导航网站。

即使使用苹果脚本也会很有趣。但我需要在不同的时间向应用程序发送命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:09:11.227

您可以使用**[launchd](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html)**来运行该`osascript`命令，该命令允许您执行 AppleScripts。

`osascript`用法示例：

```
$ # Using an AppleScript file
$ osascript QuitFinder.scpt
$
$ # Using a command
$ osascript -e 'tell app "Finder" to quit' 
```

您可以运行`man osascript`以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:21:42.097

我没用过它，它的价格是 20 美元，但如果 AppleScript 还不够用，你需要向应用程序发送虚假的鼠标手势/击键，[Keymando](http://keymando.com/)可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:54:36.463

Applescript + iCal 怎么样

[http://www.dssw.co.uk/blog/2011/01/12/how-to-use-ical-to-run-an-applescript/](http://www.dssw.co.uk/blog/2011/01/12/how-to-use-ical-to-run-an-applescript/)

# jquery - jquery.ui datepicker 本地化 - 在语言之间切换

> ID：10857124
> 
> 赞同：2
> 
> 时间：2012-06-01T20:45:43.583
> 
> 标签：jquery, jquery-ui, localization, datepicker

```
jQuery(document).ready(function ($) {

    $.datepicker.setDefaults($.datepicker.regional[""]);
    var lng = $(".language").text().substr(0, 2);
    $("#dtFrom").datepicker({ dateFormat: 'mm-dd-yy' },
    $.datepicker.regional[lng]
  );
    $("#dtTo").datepicker({ dateFormat: 'mm-dd-yy' },
    $.datepicker.regional[lng]
  );
}); 
```

我的问题：正如上面的代码，如果 'lng' 等于 'fr' 我的日期选择器仍然是英文，如果我注释掉第一行 ($.datepicker.setDefaults($.datepicker.regional[""]);) 我的datepicker 总是呈现法语（不管 'lng' 的值如何）。图我错过了一些简单的东西。任何想法如何让这个日期选择器以正确的语言（基于“lng”的值的法语或英语）呈现它的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:45:59.130

这在 jQuery UI Docs 中有很好的解释。

这是演示：

```
$(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
    $( "#datepicker" ).datepicker( $.datepicker.regional[ "fr" ] );
    $( "#locale" ).change(function() {
        $( "#datepicker" ).datepicker( "option", $.datepicker.regional[ $( this ).val() ] );
    });
}); 
```

为了使您的代码模仿演示，这就是我要更改的内容：

```
jQuery(document).ready(function($) {
    $.datepicker.setDefaults($.datepicker.regional[""]);
    var lng = $(".language").text().substr(0, 2);
    $("#dtFrom,#tdTo").datepicker( $.datepicker.regional[lng] )
        .datepicker( "option", "dateFormat", "mm-dd-yy" );
});​ 
```

# c# - 如何选择 EditorFor 在视图上显示的属性

> ID：10857131
> 
> 赞同：1
> 
> 时间：2012-06-01T20:47:12.753
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

当我这样做时`Html.EditorFor(c => Model)`，它会遍历所有属性并以表单形式创建输入元素。

但是我需要一些`Bind(Include="Name")`我喜欢的东西来了解哪些元素实际上会为我创建，`EditorFor`因为我不需要用户填写哪些属性。`ID``ModifiedSince`

我知道我可能需要使用`System.ComponentModel.DataAnnotations`可能，但与 Web 表单相比，MVC 社区似乎缺乏文档。

长话短说，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:49:02.100

```
[ScaffoldColumn(false)]
public int ID { get; set; }

[ScaffoldColumn(false)]
public DateTime ModifiedSince { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:50:09.850

用`[HiddenField(DisplayValue=false)]`

```
[HiddenField(DisplayValue=false)]
public int Id {get; set;} 
```

# jquery - 在引导弹出框内使用交互式元素

> ID：10857136
> 
> 赞同：18
> 
> 时间：2012-06-01T20:48:03.277
> 
> 标签：jquery, twitter-bootstrap, popover

我在点击链接时成功使用了引导弹出框。我在弹出框内有一些表单元素：一个文本字段、复选框和一个按钮。我可以使用 jquery.live() 附加按钮侦听器，但在该按钮侦听器中，我似乎无法访问正确的表单元素。如果我在控制台日志中追踪它们，它们就存在，但它们的值始终保持原始默认值，所以如果我去 $('#txtComment').val(); 无论我在字段中输入什么，字符串总是相同的。

是否有任何示例、教程或源代码可以查看在引导弹出窗口中使用任何类型的交互性的东西？

这就是我设置弹出框的方式：

```
this.commentLink.popover({
  trigger: 'manual',
  placement: 'right',
  html : true,
  content: function () {
    return $('#commentPopout').html();
  }
}).popover('hide');

//jquery.on won't work here so we use live
$('#btnSubmitComment').live('click', this.proxy(this.commentSubmitClick)); 
```

然后我这样做是为了成功展示它：

```
this.commentLink.popover('show'); 
```

这是按钮点击功能：

```
commentSubmitClick: function(e){
  console.log($('#txtComment').val());//always shows default text regardless of what I've actually typed in the field
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T11:12:45.660

语法改变了。[Kalin C Ringkvist](https://stackoverflow.com/a/10885738/675065)的答案需要稍作修改：

```
var popover = this.commentLink.data('popover').tip(); 
```

注意方法`tip()`而不是`$tip`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-04T17:49:35.940

耶！弄清楚了。为什么，哦，为什么没有记录？我想念在 actionscript 中工作。

```
var popover = this.commentLink.data('popover').$tip;
var comment = popover.find('#txtComment').val();//gives correct string 
```

此代码必须在弹出框实际可见时运行，因为当它不可见时元素不存在。

-哦，不推荐使用 jquery.live() ，但是一旦创建了弹出框，您可以使用此 $tip 变量来获取按钮引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:33:21.317

对于绑定了事件的可变数量的按钮/链接，这是我的做法（脱离之前已回答的内容）：

```
var list = $('<ul/>');
myCollections.items.each(function(item){
    var row = $('<li/>');
    row.append(item.get('id')));
    row.append($('<a/>').addClass('delete').html('remove'));
    list.append(row);
});

$(this.el).find('a').popover({ content: list }).on('click', function(){
    var popover = $(this).data('popover').tip();
    $(popover).find('.delete').on('click', removeitem);
});

function removeitem(){ // code to remove the item here }

// The HTML (in the popover) would look like this:
<ul>
    <li>1<a class="delete">remove</a></li>
    <li>2<a class="delete">remove</a></li>
    <li>3<a class="delete">remove</a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:04:01.827

我使用了另一个技巧来将函数附加到弹出框中的元素。我刚刚在显示弹出框的元素上添加了另一个单击侦听器。在单击侦听器中，启动了一个具有一定超时时间的函数（例如 500 毫秒）。该功能启动后，您应该能够访问您的弹出框元素。这是代码：

```
 <!-------- HTML ----------->
        <a class="btn" id="popover_btn">show popover</a>

        /******* JAVASCRIPT *******/
        $('#popover_btn').popover({
            html: true,
            placement: 'top',
            trigger: 'click',
            title: 'add new value',
            content: '<input id="ttt" type="text"/>'
        });

        $('#popover_btn').click(function() {
            setTimeout(function() {
                // here you can write your "ON SHOW" code
                console.debug($('#ttt').length);        // Outputs 1 - the element is there
            }, 500);
        }); 
```

# facebook-graph-api - 如何获取公司 Facebook 帐户的用户名/名称？

> ID：10857138
> 
> 赞同：1
> 
> 时间：2012-06-01T20:48:10.610
> 
> 标签：facebook-graph-api

现在我正在使用图形 API 浏览器，并且我有一个公司类型的 Facebook 帐户。但是，以下命令不返回“用户名”/“名称”字段。我确实在个人资料页面 -> 基本信息 -> 名称/用户名（两者）中设置了正确的用户名

[http://graph.facebook.com/11234545656556](http://graph.facebook.com/11234545656556)（这个号码暂时是假的）

这是我收到的回复：

```
{"id": "11234545656556",   
 "link": "http://www.facebook.com/profile.php?id=11234545656556",   
 "timezone": 0,   
 "locale": "en_US",   
 "verified": true,   
 "updated_time": "2012-05-31T22:32:52+0000",   
 "type": "user"} 
```

但是，如果我查询自己的个人帐户，我会收到预期的响应：

```
{"id": "11234512345",
 "name": "John Doe",
 "first_name": "John",
 "last_name": "Doe",
 "link": "http://www.facebook.com/people/John-Doe/11234512345",
 "gender": "male",
 "locale": "en_US"} 
```

那么我该怎么做才能获得公司帐户的用户名/名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:36:14.430

企业帐户无法使用 API 正常工作，而且它们没有名称或用户名。它们存在于 Facebook 上，专门用于管理页面和应用程序 - 它们应该可以很好地使用页面和广告 API，但 API 中的大多数其他调用将不起作用（例如，它们也没有性别、朋友、帖子等)

如果您在谈论页面，则访问方式会有所不同-有关详细信息，请参阅页面登录文档-https: [//developers.facebook.com/docs/howtos/login/login-as-page/](https://developers.facebook.com/docs/howtos/login/login-as-page/)

具体来说，您授权应用程序获得`manage_pages`权限，然后您可以调用 API`/me/accounts`以获取访问令牌，然后您可以使用该令牌代表页面执行操作

# sql - SQL经典asp - 条件语句

> ID：10857140
> 
> 赞同：0
> 
> 时间：2012-06-01T20:48:27.497
> 
> 标签：sql, asp-classic

我不是 SQL 专家，并且在我的一些现有经典 asp 代码中发现了一个错误，因此它不能在所有情况下工作。我希望有一些出色的 sql 经验的人可以帮助我编写更复杂的情况，即两种情况都发生时

`If intItemType = SV_ITEM_TYPE_MATRIX`然后使用这部分 SQL

```
LEFT OUTER JOIN usd_matrixSets MS " &_
    "ON MS.itemID = SI.itemID " &_ 
```

但是当`intItemType <> SV_ITEM_TYPE_MATRIX` 它被忽略时。

如您所见，我已经为两种/或两种情况编写了代码，但这实际上并没有涵盖两种情况都可能发生的情况。

这是代码：

```
If intItemType = SV_ITEM_TYPE_MATRIX Then   
    strSQL = "SELECT SI.itemID, itemType, itemText, minimumValue, maximumValue, dataType, MS.matrixSetType, MS.matrixSetID " &_
             "FROM usd_SurveyItem SI " &_
             "LEFT OUTER JOIN usd_matrixSets MS " &_
             "ON MS.itemID = SI.itemID " &_
             "WHERE surveyID = " & intSurveyID &_
             " AND itemType " &_
             "In(" & SV_ITEM_TYPE_TEXTAREA & "," &_
                    SV_ITEM_TYPE_SINGLE_LINE & "," &_
                    SV_ITEM_TYPE_DATE & "," &_
                    SV_ITEM_TYPE_CHECKBOXES & "," &_
                    SV_ITEM_TYPE_RADIO & "," &_
                    SV_ITEM_TYPE_DROPDOWN & "," &_
                    SV_ITEM_TYPE_MATRIX & "," &_
                    SV_ITEM_TYPE_UPLOAD_FILE & ")" &_
             " AND pageID = " & intPageNumber &_
             " ORDER BY pageID, SI.orderByID "

        else            
    strSQL = "SELECT SI.itemID, itemType, itemText, minimumValue, maximumValue, dataType" &_
             " FROM usd_SurveyItem SI " &_
             "WHERE surveyID = " & intSurveyID &_
             " AND itemType " &_
             "In(" & SV_ITEM_TYPE_TEXTAREA & "," &_
                    SV_ITEM_TYPE_SINGLE_LINE & "," &_
                    SV_ITEM_TYPE_DATE & "," &_
                    SV_ITEM_TYPE_CHECKBOXES & "," &_
                    SV_ITEM_TYPE_RADIO & "," &_
                    SV_ITEM_TYPE_DROPDOWN & "," &_
                    SV_ITEM_TYPE_MATRIX & "," &_
                    SV_ITEM_TYPE_UPLOAD_FILE & ")" &_
             " AND pageID = " & intPageNumber &_
             " ORDER BY pageID, SI.orderByID "      

        end if 
```

我的问题是，有时我的数据库中同时拥有 SV_ITEM_TYPE_MATRIX 和其他人。我怎样才能重写这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:01:45.977

您应该始终执行 LEFT JOIN，并让额外的值 (`MS.matrixSetType`和`MS.matrixSetID`)`NULL`在它不是的时候出现`SV_ITEM_TYPE_MATRIX`。

类似的东西（我将使用参数来避免 SQL 注入漏洞）：

```
SELECT 
    SI.itemID, itemType, itemText, minimumValue, maximumValue, dataType, 
    MS.matrixSetType, MS.matrixSetID 
FROM usd_SurveyItem SI
LEFT OUTER JOIN usd_matrixSets MS ON 
    MS.itemID = SI.itemID 
    AND @intItemType = SI.itemType
WHERE
    surveyID = @intSurveyID  
    AND itemType IN (
       ...
    )
    AND pageID = @intPageNumber 
ORDER BY 
    pageID, SI.orderByID 
```

# java - 需要帮助我自己的搜索引擎实现的基本 sql 查询

> ID：10857145
> 
> 赞同：1
> 
> 时间：2012-06-01T20:48:40.297
> 
> 标签：java, sql, sql-server-2008, jdbc

我在java（eclipse）中做一个搜索引擎实现我有一个名为的表`tbl_index`，我在其中保存所有关键字，并在其中保存一个名为列的列`keyWord`，我在列中保存一个URL `url`。

现在，如果一个搜索词包含多个单词，我将如何编写查询来查找包含所有单词的所有 URL。

**表信息：**

第 1 列：`keyWord (nvarchar(50))`

第 2 列：`url (varchar(800))`

这两个统称为表的主键。请提出一种我不必改变我的表结构的方法。尽管指出我当前模式中的任何错误都会有所帮助。

还请建议一些好的索引技术来索引我从网站的 html（列`keyWord`）中获得的关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:17:45.517

Try this:

```
select distinct
  url 
from 
  tbl_index a 
where 
  (select count(*) from tbl_index b where a.url=b.url and b.keyword in ('word 1', 'word 2' . . .)) = n 
```

where `n` is the number of keywords you are searching for and 'word 1', 'word 2' etc are the keywords.

I suggest you create three tables: one with one row for each unique URL, with a numeric id and the url name, a second table with one row for each unique keyword, with a numeric id and the keyword and then a cross-reference table with all the pair url id - keyword id:

```
create table urls (
  url_id int identity,
  url varchar(800),
  primary key (url_id)
)

create table keywords (
  keyword_id int identity,
  keyword nvarchar(50),
  primary key (keyword_id)
)

create table urlkeys (
  url_id int,
  keyword_id int,
  primary key (url_id, keyword_id)
) 
```

In this way you should reduce the size of the data. The query above becomes something like this:

```
select 
  url
from
  urls
where (select count(*) from urlkeys join keywords on urlkeys.keyword_id=keywords.keyword_id where urlkeys.url_id=urls.url_id and keywords.keyword in ('word 1', 'word 2' . . .)) = n 
```

It would be a good idea to have an index on the `keyword` column

**P.S.** this is the outline of a simplistic SQL solution, but as various people already pointed out in comments this is a problem best solved using a full-text search solution. As soon as you try to do something like stemming, proximity search, partial word searches, wildcards etc etc. any SQL-based solution will fall short.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:04:06.430

这基本上是两步过程。

A. 首先将您的搜索词分解成单独的词，如下所示：

```
String[] words = searchTerm.split("\\W+"); 
```

B. 然后通过遍历 words 数组来构建您的查询并创建如下查询：

```
Select url from tbl_index where keyword in ('word1', 'word2', 'word3'); 
```

这里 word1, word2, word3 基本上是`words[0], words[1], words[2]`等。

PS：您可能不想在表中**精确匹配**关键字，在这种情况下，我建议`rlike`在 MySQL 查询中使用子句以获得正则表达式功能。

# django - Django 视图 - 从 models.py 调用数据并显示它

> ID：10857154
> 
> 赞同：1
> 
> 时间：2012-06-01T20:49:42.693
> 
> 标签：django, django-models, django-templates, django-views

我试图在 postlogin.html 页面上显示我在 models.py 中的内容，但即使数据库中有数据，页面也不会显示任何内容。我想我在views.py中使用部分（posts = NewRecipePost.objects.all（）.order_by（“-post_date”））调用数据时遇到了麻烦。下面的代码只是代码的一部分，所有内容都正确导入并正确缩进。

我会很感激你的建议。谢谢

模型.py

```
from django.db import models
class NewRecipePost(models.Model):
    title = models.CharField('title', blank=False, max_length=50 )
    post_date = models.DateField(auto_now_add=True)
    ingredients = models.TextField('ingredients', max_length=1000)
    content = models.TextField('content', max_length=1000)

    def __unicode__(self):
        return self.title 
```

表格.py

```
from recipeapp.models import NewRecipePost

class NewRecipeForm(forms.ModelForm):

    class Meta:
        model = NewRecipePost 
```

视图.py

def my_view（请求，用户名）：

```
posts = NewRecipePost.objects.all().order_by("-post_date")

if request.method == 'POST':
    form = NewRecipeForm(request.POST)
    if form.is_valid():
        form.save()
else:
    form = NewRecipeForm()
variables = RequestContext(request, {'form':form,'username':username, 'posts':posts})

return render_to_response('postlogin.html',variables) 
```

postlogin.html

```
 <ul>
                {% for post in posts.object_list %}
                    <div>{{post.title}}</div>
                    <div>{{post.post_date}}</div>
                    <ul>
                        <div>{{post.ingredients}}</div>
                        <div>{{post.content}}</div>
                    </ul>
                {% endfor %}

            </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:54:31.887

`posts.object_list`不存在。您只能`object_list`与`Paginator`尚未设置的实例一起使用。只需将其更改为即可`{% for post in posts %}`。

# .htaccess - htaccess 301 从多个 url 重定向到单个 joomla 站点

> ID：10857161
> 
> 赞同：0
> 
> 时间：2012-06-01T20:51:00.203
> 
> 标签：.htaccess, redirect, joomla

我在服务器上设置了一个 joomla 站点，有 4 个指向它的 url。我想让这些网站中的 3 个重定向到第 4 个，以提高网站在搜索引擎上的位置。如果网址是：

web1.com.ar web1.com www.web1.com.ar www.web1.com

我希望他们所有人都将流量重定向到 www.web1.com

问题是我在网站上使用 joomla，所以 99% 的时间人们应该进入像“www.web1.com.ar/index.php/stuff/morestuff/something.html”这样的网址

我不想丢失人们可能制作的任何书签，或者我在 Facebook 上的链接。

我一直在寻找并试图了解应该如何编码，但到目前为止我还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:20:25.467

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^((www\.)?web1\.com\.ar|web1\.com)$ [NC]
RewriteRule ^ http://www.web1.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:08:17.117

在根目录中找到的 .htaccess 文件中，如果没有，则将 htaccess.txt 重命名为 .htaccess ，然后在第 30 行左右，您应该会找到以下内容：

```
##  Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

#
#  mod_rewrite in use

RewriteEngine On 
```

然后在它下面添加这个

```
RewriteCond %{HTTP_HOST} ^web1.com$
RewriteRule ^/?$ "http\:\/\/www\.web1\.com" [R=301,L]

RewriteCond %{HTTP_HOST} ^web1.com.ar$ [OR]
RewriteCond %{HTTP_HOST} ^www.web1.com.ar$
RewriteRule ^/?$ "http\:\/\/www\.web1\.com" [R=301,L] 
```

您的链接仍然有效，但如果有任何链接到直接 url，它们将被重定向。

您还可以在您的 configuration.php 中查找显示以下内容的行：

```
var $live_site = ''; 
```

将其更改为

```
var $live_site = 'http://www.web1.com'; 
```

# java - Java to exe 与引用的硒库

> ID：10857171
> 
> 赞同：1
> 
> 时间：2012-06-01T20:52:10.653
> 
> 标签：java, selenium, exe, jsmooth

我对此进行了一些研究，但似乎无法弄清楚如果程序引用了库如何使程序工作。我有一个依赖于 selenium 2.12 库的 java 程序，我需要将该程序制作成一个 exe，因为我必须在几台没有安装 java 的计算机上运行这个程序。我研究了似乎每个人都推荐的 JSmooth。有没有人有这方面的经验可以帮助我进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:43:35.593

AFAIK JSmooth 不允许您在没有安装 java 的计算机上运行 java，如果它没有发现它已经安装，它只会下载 Java。

您应该告诉 JSmooth 您需要的外部依赖项（罐子），将它们放在类路径中，如此处所述[http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N10166](http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N10166)。

如果您随后计划为您的应用程序创建和安装程序，您还需要在其中包含这些 jar。

# php - 刷新后如何显示新添加的（通过Javascript）DOM元素？

> ID：10857175
> 
> 赞同：-1
> 
> 时间：2012-06-01T20:52:40.350
> 
> 标签：php

我有一个乘以 DOM 元素的 JavaScript 函数。

我打了 2 次（例如），我得到了 3 个这样的元素：

```
<!-- How to show all my new Elements after refresh? -->
<tr id="toBeMultiplied">
    <td>
        <!-- How to echo the value of this input? -->
        <input type="text" name="numbers[]" /> 
    </td>
    <td>
        <!-- How to echo the value of this input? -->
        <input type="text" name="titles[]" />
    </td>
    <td>
        <!-- How to echo the value of this input? -->
        <input type="text" name="lengths[]" />
    </td>
</tr> 
```

但这只是大Form的一小部分！当我点击提交时，我刚刚创建的那些新元素就会消失。

所以，我想让**我的新元素不会消失**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:16:51.970

您可以计算 POST 上的数字数组中有多少值。

例如： `$i = count($_POST['numbers'])`

然后创建一个循环，该循环将打印表单的次数与以前一样多。

如果您最终使用`$i`作为元素的计数，则可以将以前的值填回表单中，如下所示：`$_POST['numbers'][$i]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:03:18.253

您可以使用 jQuery 拦截 POST 语句并获取新创建的元素并通过 AJAX json 发送数据。

第二个选项是在添加行的函数中包含一个 AJAX 请求，并在会话中放入一些内容，上面写着“嘿，我有 +1 蘑菇行！”

# ember.js - Ember.js 控制器未收到有关 Ember.Select.selection 属性更改的通知

> ID：10857176
> 
> 赞同：0
> 
> 时间：2012-06-01T20:52:51.553
> 
> 标签：ember.js

这是解决这个问题的js小提琴：http: [//jsfiddle.net/3W47s/9/](http://jsfiddle.net/3W47s/9/)

这是代码：

```
<script type="text/x-handlebars">
{{view TitleSelect
  contentBinding="App.titlesController"            
  selectionBinding="App.titlesController.currentTitle"}}

<p>Selected: {{App.titlesController.currentTitle.name}}
(ID: {{App.titlesController.currentTitle.id}})</p> 
```

​ //---------------------------------

```
TitleSelect = Ember.Select.extend({
    multiple: true,
    optionLabelPath: "content.name",
    optionValuePath: "content.id"
});

window.App = Ember.Application.create({
    ready: function(){
        console.info("Hello jsfiddle!:");
        var itemArray = [{name: 'Item 1', id: 1}, {name: 'Item 2', id: 2}];
        App.titlesController.set('content', itemArray);
    }
});

App.titlesController = Ember.ArrayController.create({
    currentTitle: null,
    testProperty: function(){
      console.info("CurrentTitle changed!");
    }.property("currentTitle")
});​ 
```

为什么绑定到 App.titlesController.currentTitle.name 和 App.titlesController.currentTitle.name 的值没有在视图中更新？为什么选择更改时不执行'testProperty'中的打印语句？

这与这个 jsfiddle 非常相似，只是它是多选而不是单选：http: [//jsfiddle.net/zgLCr/64/](http://jsfiddle.net/zgLCr/64/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:51:44.500

见[http://jsfiddle.net/3W47s/18/](http://jsfiddle.net/3W47s/18/)

selection 的值是一个对象数组，我知道但在我的原始示例代码中弄错了。

# excel-2007 - excel公式出现问题

> ID：10857178
> 
> 赞同：0
> 
> 时间：2012-06-01T20:53:06.690
> 
> 标签：excel-2007, excel-formula

我有两个 Excel 表（例如：Sheet1 和 Shee2），在 Sheet1 的单元格 A1 中使用以下公式：

```
=if(istext(search("Yes", 'Sheet2'!A1),"TRUE", "FALSE") 
```

此代码将在单元格 A1 的 Sheet2 中搜索值“Yes”，并在 Sheet1、A1 中写入 TRUE 或 FALSE，具体取决于值“Yes”是否存在。

我遇到的问题是，我希望公式不仅在 Sheet2 中搜索 A1，而且在 A1 到 A3 中搜索，如果任何两个单元格包含值“是”，那么公式应该返回“TRUE”，否则返回“FALSE”。

我试过这个：

```
=if(istext(search("Yes", 'Sheet2'!A1:A3),"TRUE", "FALSE") 
```

但是如果从 A1 到 A3 的任何一个单元格包含值“是”，则此公式将返回“TURE”。

我将感谢您对此提供的帮助。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:00:39.813

```
=IF(COUNTIF('Sheet2'!A1:A3,"*Yes*")>=2,"TRUE", "FALSE") 
```

# google-analytics - 为什么我的 Google Analytics（分析）报告中显示屏幕分辨率（未设置）？

> ID：10857179
> 
> 赞同：5
> 
> 时间：2012-06-01T20:53:19.117
> 
> 标签：google-analytics, screen-resolution

当我查看 Audience -> Technology -> Browser & OS 的报告时，我看到数据显示如下：

![在此处输入图像描述](../Images/995b180786f991b0e96189d6b65ed60f.png)

有人知道为什么不设置屏幕分辨率吗？

我听说`https`可以干预 GA 变量，但我们的网站不使用`https`. 我们有使用 cookie 的专有登录/身份验证方法。未经身份验证的用户会被重定向到我们的单点登录站点，但它也不会使用`https`。

感谢您对此的任何帮助...只是想弄清楚如何报告这些访问者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:40:50.567

因为他们没有启用 javascript，并且 Google Analytics 依赖于无法访问浏览器功能的 .gif 请求。

[这里有更多信息](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T15:47:35.223

我参加这个聚会迟到了，但我在这里找到了答案：

[Google Analytics（分析）报告中未设置的内容](http://www.businesscatalystseo.com.au/seo-tips/what-is-not-set-in-google-analytics)

本质上，不支持 Flash 的浏览器会在屏幕分辨率下触发此未设置类别。它不是 Javascript，也不是跟踪 gif 或任何类似的东西。我们的网站上确实有一些 Flash，这就是为什么它出现的原因。

根据这篇文章，由于其他原因，您也会在其他区域获得未设置。希望这可以帮助其他在这里绊倒的人。

# juice-ui - Juice-UI - 按钮导致双重回发

> ID：10857181
> 
> 赞同：1
> 
> 时间：2012-06-01T20:53:25.813
> 
> 标签：juice-ui

我有一个用于发布表单的 JuiceUI 按钮控件。当我这样做时，我会收到双重回发。我注意到我的数据库中有双重条目，并认为我可能是在双击该按钮，但是当我调试过这个时，我发现事实并非如此。我在回发函数中放了一个断点，它确实被调用了两次，每次堆栈跟踪看起来都一样。不知道发生了什么。任何帮助，将不胜感激。请参阅下面的按钮控件代码。

```
<button id="mBtnPrevious" runat="server" onserverclick="BtnPreviousClick">Previous</button>
                                <juice:Button TargetControlID="mBtnPrevious" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:42:57.883

这似乎不是 JuiceUI 问题。我通过进行以下更改解决了这个问题（注意 type="button"）：

```
<button id="mBtnPrevious" runat="server" onserverclick="BtnPreviousClick">Previous</button> 
```

到

```
<button id="mBtnPrevious" runat="server" type="button" onserverclick="BtnPreviousClick">Previous</button> 
```

这似乎是一个浏览器兼容性问题，因为它没有双重回发某些浏览器，但在其他浏览器中确实如此。看起来在某些浏览器上它使用 type="submit" 作为默认值，这可能导致了双重回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:48:50.370

使用您提供的代码，我没有看到您描述的行为。页面运行正常。Juice UI Button 的代码中也没有会导致额外回发的事件。我建议删除标签并从那时开始调试。

# jquery - jqGrid中的本地数据问题

> ID：10857185
> 
> 赞同：2
> 
> 时间：2012-06-01T20:53:42.357
> 
> 标签：jquery, jqgrid

我对 jqGrid 有一个奇怪的问题。我注意到的是，如果我有一个数据数组，其中只有一个项目，它什么也不显示。（检查 html 元素那里没有数据）。数组中有 2 个项目，它只显示第一个项目。基本上它似乎正在丢弃数组中的最后一项。

数据类型是“本地”，我有一个用于数据字段的数据数组。我以前从未注意到这个问题，因为我通常有很多数据，而不仅仅是 1 或 2 个项目。没什么特别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:39:44.440

您提到了`rowNum: -1`jqGrid 不再支持的代码。目前最简单的解决方案是设置`rowNum`一个大数字。

有关更多信息和其他潜在解决方法，请参阅[此问题](https://stackoverflow.com/questions/1237096/how-to-show-all-rows-in-the-jqgrid/1557987#1557987)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:51:30.197

将大小设置为数组大小几乎完全修复了它。问题仍然是 getDataIds 方法。正在运行 4.3.2 升级到 4.3.3 完全修复它。

# replace - 如何为 8,000 多个 HTML 文件查找和替换带有空格的字符串

> ID：10857187
> 
> 赞同：0
> 
> 时间：2012-06-01T20:53:59.063
> 
> 标签：replace

我想在我的 8,000 个（加）记录（html 文件）中执行查找和替换，但问题是我将替换的字符串包含空格。

我想找到所有具有实例的文件，以便我可以在标签关闭`</head>`之前插入我的谷歌分析。`<head>`

**我的谷歌分析看起来像这样：**

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'XX-XXXXXXXX-X']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

找到`</head>`结果后应该是这样的：

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'XX-XXXXXXXX-X']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head> 
```

在我的服务器上，我有**FTP**和**SSH**访问权限。我应该使用什么方法来快速和轻量级地替换它们？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:19:21.787

使用`sed`所有 html 文件。

`sed 's/<\/head>/before end head/' input.html`

只需根据需要替换“结束头之前”。不要忘记`\`正确使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:00:23.950

您需要[sed append](http://www.gnu.org/software/sed/manual/sed.html#Other-Commands)命令。

# c# - 未设置 WPF 依赖属性

> ID：10857193
> 
> 赞同：11
> 
> 时间：2012-06-01T20:54:30.053
> 
> 标签：c#, .net, wpf, xaml

我正在尝试通过 XAML 将依赖项属性绑定到我的自定义 WPF 控件。

这是我注册依赖属性的方式：

```
public static readonly DependencyProperty AltNamesProperty = 
    DependencyProperty.Register ("AltNames", typeof(string), typeof(DefectImages));

public string AltNames
{
    get { return (string) GetValue(AltNamesProperty); }
    set { SetValue(AltNamesProperty, value); }
} 
```

以下是我在 XAML 中的称呼：

```
<DataGrid.Columns>                
    <DataGridTemplateColumn IsReadOnly="True">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <StackPanel Name="StackPanel1" Grid.Column="0" Width="950">
                    <TextBlock FontSize="16" TextDecorations="None" Text="{BindingPath=StandardName}" Foreground="Black"  FontWeight="Bold" Padding="5,10,0,0"></TextBlock>
                    <TextBlock Text="{Binding Path=AltNames}"TextWrapping="WrapWithOverflow" Padding="5,0,0,10"></TextBlock>
                    <!-- this part should be magic!! -->
                    <controls:DefectImages AltNames="{Binding Path=AltNames}"></controls:DefectImages>
                </StackPanel>
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

我知道`AltNames`我试图绑定的属性是一个有效的属性，因为我可以在文本块中显示它就好了。我是否错误地注册了 Dependency 属性？

我需要做什么才能`AltNames`在后面的代码中分配正确的值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T23:03:22.333

感谢@Danko 让我开始。我注册了一个回调来设置属性更改时的值。
这是我最终得到的结果：

```
private static void OnDefectIdChanged(DependencyObject defectImageControl, DependencyPropertyChangedEventArgs eventArgs)
{
  var control = (DefectImages) defectImageControl;
  control.DefectID = (Guid)eventArgs.NewValue;
}

/// <summary>
/// Registers a dependency property, enables us to bind to it via XAML
/// </summary>
public static readonly DependencyProperty DefectIdProperty = DependencyProperty.Register(
    "DefectID",
    typeof (Guid),
    typeof (DefectImages),
    new FrameworkPropertyMetadata(
      // use an empty Guid as default value
      Guid.Empty,
      // tell the binding system that this property affects how the control gets rendered
      FrameworkPropertyMetadataOptions.AffectsRender, 
      // run this callback when the property changes
      OnDefectIdChanged 
      )
    );

/// <summary>
/// DefectId accessor for for each instance of this control
/// Gets and sets the underlying dependency property value
/// </summary>
public Guid DefectID
{
  get { return (Guid) GetValue(DefectIdProperty); }
  set { SetValue(DefectIdProperty, value); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:37:54.727

如果属性影响控件的呈现方式，也许您需要指定`PropertyMetadata`参数。`DependencyProperty.Register`例如：

```
DependencyProperty.Register("AltNames", typeof(string), typeof(DefectImages), 
                              new FrameworkPropertyMetadata( null,
                              FrameworkPropertyMetadataOptions.AffectsRender ) ); 
```

# android - Android EditText 的控制键盘类型（仅限数字）

> ID：10857200
> 
> 赞同：1
> 
> 时间：2012-06-01T20:55:08.923
> 
> 标签：android, android-softkeyboard, android-keypad

我有一个自定义的 EditText 用于输入数字序列。我在类的构造函数中设置了 DigitsKeyListener (getInputType() = 2)。

这在 Galaxy S (4.0) 上做了“正确的事”。当视图获得焦点时出现的键盘只有数字、“空格”、句号、逗号、破折号、退格和“完成”。

但是，在较旧的 2.2 设备上，出现的键盘有字母和更广泛的符号，我不需要这些符号。

我在网上找到了一个建议：

```
 setRawInputType(Configuration.KEYBOARD_12KEY); 
```

在初始化结束时。该值为“3”。当我这样做时，两部手机的情况正好相反。Galaxy S 上的键盘现在有字母（在每个数字旁边，就像在电话上一样），而 2.2 设备上的键盘是我想要的（即基本上是一个计算器）。

是否有一种统一的方法来获得跨版本工作的“计算器”键盘，或者这是我需要为 SDK 版本 <= X 做一件事而为版本 > X 做另一件事的情况？

如果是这样，“X”的值应该是多少？这是否随着特定的主要版本而改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:58:40.107

您应该将`inputType`属性设置为`"number"`，或执行等效的运行时调用。

# database - Prolog 在单独的数据库文本文件中插入、修改和删除事实

> ID：10857202
> 
> 赞同：4
> 
> 时间：2012-06-01T20:55:25.670
> 
> 标签：database, prolog

我有一个包含很多事实的 prolog 数据库文件`knowledge.pl`。例如：

```
father_of(joe,paul).
father_of(joe,mary).
mother_of(jane,paul).
mother_of(jane,mary).
male(paul).
male(joe).
female(mary).
female(jane). % and so on. 
```

每次我的程序再次执行时，都会查阅这个文件 (consult/1)。

我希望能够通过直接在这个数据库文本文件中写入或删除来插入、修改和删除我想要的事实（其中一些是直接的，另一些是满足某些特定条件的）。

类似assertz、retract 和retractall 之类的东西，但要修改此文本文件，以便更改永久保留在那里。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:23:23.483

您可以创建所需的事实并将它们写入（相同）文件或修改数据库，然后将其保存在文件中。

不同之处在于，第一种方法将加载旧文件的数据库，而第二种方法将在执行期间更改它。

从你提出问题的方式来看，我假设你想做第二个；为此，您应该：

1）将所有要更改的谓词声明为[动态](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.14%27,swi%28%27/doc/Manual/dynamic.html%27%29%29) 2）在执行期间断言、撤回等 3）将新数据库写入文件。你可以使用[Listing/1](http://www.swi-prolog.org/pldoc/man?predicate=listing/1)

要编写，您可以执行以下操作：

```
tell(knowledge),
.....
told. 
```

或者您可以使用其他一些[io 谓词](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.16.1%27,swi%28%27/doc/Manual/IO.html%27%29%29)。也许使用[set_prolog_IO/3](http://www.swi-prolog.org/pldoc/doc_for?object=set_prolog_IO/3)将是最简单的方法。

现在，如果您想要第一个，您应该构造谓词（可能使用[univ 运算符](http://www.swi-prolog.org/pldoc/doc_for?object=%28=..%29/2)）或其他字符串操作谓词，然后将它们写入文件

编辑：

有 listing/0 但会列出所有加载的谓词（你可能不想要的东西）。经过一番搜索，我找到了[source_file/2](http://www.swi-prolog.org/pldoc/doc_for?object=source_file/2)；所以你可以做类似的事情

```
findall(X,source_file(X,FileName),L). 
```

请注意， source_file/2 需要**绝对**文件名。您可以使用[absolute_file_name/2](http://www.swi-prolog.org/pldoc/man?predicate=absolute_file_name/2)来获取它的方式 source_file/2 格式化谓词有点奇怪（我期待像 foo/1 这样的东西）但看起来您可以将它提供给 Listing/1 并且它工作正常所以你可以做类似的事情：

```
save(FileName):-
    absolute_file_name(FileName,Abs),
    findall(X,source_file(X,Abs),L),
    tell(FileName),
    maplist(listing,L),
    told. 
```

另一方面，您始终可以拥有一个包含要存储在文件中某处的谓词的列表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T22:27:50.723

如果您使用的是 SWI-Prolog，则有多种选择：

在寻找*prolog 持久性*时，我陷入了[持久性](http://www.swi-prolog.org/pldoc/doc/swi/library/persistency.pl)：一个乍一看可能有用的模块。

然后是'[外部表](http://www.swi-prolog.org/pldoc/doc_for?object=section%280,%270%27,swi%28%27/doc/packages/table.html%27%29%29)'的库，即存储在文件中并建立索引。如果您有不适合内存的数据，或者加载/保存整个数据集需要太长时间，您应该使用它。

否则，thanosQR 的答案建议使用“老式”处理持久性的方法。

# python - 如何将 pystache 与金字塔集成？

> ID：10857206
> 
> 赞同：3
> 
> 时间：2012-06-01T20:55:43.210
> 
> 标签：python, template-engine, pyramid, mustache

我想在我的金字塔应用程序中使用 pystache 提供的基于类的视图，但我不完全确定如何正确集成这两者。我已经读过[这个](https://stackoverflow.com/questions/8169606/how-to-change-the-template-engine-in-pyramid)，但它没有谈到使用基于类的视图。

如果我想使用基于类的视图，我将如何为 pystache 创建一个新的渲染器？有人可以帮我吗？

此外，虽然我已经知道 mustache 是如何工作的，但我似乎无法找到有关 python 实现 (pystache) 的太多信息。有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T10:52:34.797

实现一个`MustacheRendererFactory`：

```
class MustacheRendererFactory(object):
  def __init__(self, info):
    self.info = info

  def __call__(self, value, system):
    package, filename = resolve_asset_spec(self.info.name)
    template = os.path.join(package_path(self.info.package), filename)
    template_fh = open(template)
    template_stream = template_fh.read()
    template_fh.close()
    return pystache.render(template_stream, value) 
```

更新您的配置器设置，可能在`__init__.py`：

```
def main(global_config, **settings):
  config = Configurator(settings=settings)
  # ...
  # Use Mustache renderer
  config.add_renderer(name='.mustache',
    factory='myapp.mustacherenderer.MustacheRendererFactory')
  # ... 
```

在您的视图中使用：

```
@view_config(route_name='myview', renderer='myapp:templates/notes.mustache')
def my_view(request):
  # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:21:21.033

在金字塔中，渲染器视图参数是一个字符串，它不能是一个类。因此，没有办法只说

```
@view_config(route_name='someroute', renderer=MyClassBasedView) 
```

最简单的解决方案可能是手动调用渲染器。

```
return Response(pystache.render(ViewClass)) 
```

如果你真的想使用金字塔渲染器系统，你可以使用“类的点路径+扩展”形式的假渲染器字符串。然后渲染器工厂将解析虚线路径以获取类并返回渲染器。

我必须说我不确定我是否理解您将如何在金字塔中使用基于 pystache 类的视图。使用返回值的方法定义类似乎比返回字典更复杂，并且在这些方法中计算值而不是在金字塔视图中进行计算可能会导致代码更加混乱。不过，继承可能有一些我没有考虑过的优点。

* * *

至于 pystache，文档似乎仅限于[pypi 页面](http://pypi.python.org/pypi/pystache)，但[代码](https://github.com/defunkt/pystache)干净且易于阅读（我在回答问题之前略读了一下）。

# javascript - 如何用符号对数组进行排序？

> ID：10857207
> 
> 赞同：1
> 
> 时间：2012-06-01T20:55:44.187
> 
> 标签：javascript, arrays

我有一个像这样的带有十进制值的数组

`["$79.34", "$99.23", "$149", "$139.34", "$379", "$199.00", "$5", "$9", "$14", "$39", "$59", "$24", "$29", "$189", "$10,$20", "$500", "$1", "$4", "$8.66", "$2", "$19", "$18", "$11", "$15", "$40", "$89", "$100", "$400.15", "$30,$119", "$15,$30"]`

对于我的商店，我不知道如何使用 javascript 对它们进行排序？（或任何与此相关的`$`符号）似乎对我造成了问题？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:05:45.453

```
var prices = [...]
prices.sort(function(a,b) { return (a.substring(1)) - (b.substring(1)); }) 
```

会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:02:50.040

编辑：我写了一个[JSFiddle 来证明这一点](http://jsfiddle.net/qVbz5/29/)

```
function sortPrices(priceStrings) 
{
    //first sanitize the data
    for (var i = 0; i < priceStrings.length; i++) 
    {
        if (priceStrings[i].toString().search(",") != -1) 
        {
            var splits = priceStrings[i].toString().split(",");
            priceStrings.splice(i, 1)
            priceStrings = priceStrings.concat(splits);
            i--;
        }
    }
    var prices = [];
    for (var i = 0; i < priceStrings.length; i++) 
    {
        priceStrings[i] = priceStrings[i].toString().replace("$", "");
        prices.push(parseFloat(priceStrings[i]));
    }

    prices.sort(function(a,b){return a - b});

    return prices;
}​ 
```

# perl - 正确且可移植的 utf8 文件名规范化

> ID：10857208
> 
> 赞同：12
> 
> 时间：2012-06-01T20:55:44.623
> 
> 标签：perl, utf-8, portability

还有另一个 perl/utf8 问题：

代码：

```
use 5.012;
use utf8;
use strict;
use warnings;
use feature qw(unicode_strings);

use open qw(:std :utf8);
use Encode qw(encode decode);
use charnames qw(:full);
use Unicode::Normalize qw(NFD NFC);

my $name = "\N{U+00C1}";        # Á (UPPERCASE A WITH ACUTE)

opendir(my $dh, ".") || die "error opendir";
while(readdir $dh) {
    say "ENC-OK" if      decode('UTF-8', $_)   =~ $name; #never true
    say "NFC-OK" if NFC( decode('UTF-8', $_) ) =~ $name; #true
}
closedir $dh; 
```

上面的代码将为文件名中包含的每个文件打印 NFC-OK `Á`。但是永远不会在 NFD 编码的文件系统上打印 ENC-OK，因为 opendir 永远不会`Á`以 \x00C1 的形式返回，而是“A”、“accent”...

问题：如何为任何操作系统正确编写上述代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:21:48.620

进一步来说，

```
NFC( decode('UTF-8', $_) ) =~ quotemeta( NFC( $name ) ) 
```

和

```
NFD( decode('UTF-8', $_) ) =~ quotemeta( NFD( $name ) ) 
```

适用于每个文件名，无论其形式如何。

...好吧，只要它是 UTF-8 编码的。Windows 上不会出现这种情况，除非使用 chcp 65001。

# java - 使用 Apache POI 从 Excel 中读取单元格时出现问题

> ID：10857209
> 
> 赞同：1
> 
> 时间：2012-06-01T20:55:50.810
> 
> 标签：java, excel, apache-poi

我正在尝试使用 Apache POI 读取旧的（2007 年之前和 XLS）Excel 文件。我的程序走到行的末尾并向上迭代，直到找到既不是空也不是空的东西。然后它会重复几次并抓取这些单元格。该程序可以很好地阅读在 Office 2010 中制作的 XLSX 和 XLS 文件。

我收到以下错误消息：

```
Exception in thread "main" java.lang.NumberFormatException: empty String
    at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source)
    at java.lang.Double.parseDouble(Unknown Source) 
```

在线：

```
num = Double.parseDouble(str); 
```

从代码：

```
str = cell.toString();

if (str != "" || str != null) {
    System.out.println("Cell is a string");
    num = Double.parseDouble(str);
} else {
    System.out.println("Cell is numeric.");
    num = cell.getNumericCellValue();
} 
```

其中`cell`是文档中最后一个不为空或不为空的单元格。当我尝试打印第一个不为空或 null 的单元格时，它什么也不打印，所以我认为我没有正确访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:12:49.367

也许您在空白单元格中阅读的原因是由于使用了 Apache POI 的正确子组件来读取 Excel 文件。对 XLS 格式使用 HSSF（可怕的电子表格格式），对 XLSX 格式使用 XSSF（XML 电子表格格式）。

* * *

至于代码本身，您可能需要优化您的布尔表达式。您现在拥有它的方式，因为您使用的是 or 运算符 ( `||`)，

*   if 语句的第一部分将执行 if `str != null`，并且
*   if 语句的`else`一部分将执行 if `str == null`。

if 语句的第一部分将`NumberFormatException`在调用`Double.parseDouble`if 时抛出一个 if `str`cannot be parsed as a number。

也许以下代码片段会对您有所帮助：

```
if (str == null || str.trim().isEmpty()) {
    // handle null and empty strings
} else if (cell.getType() == Cell.CELL_TYPE_NUMERIC) {
    System.out.println("Cell is numeric.");
    num = cell.getNumericCellValue();
} else {
    // If the cell is not numeric, Double.parseDouble(str) 
    // will most likely throw a NumberFormatException
} 
```

要了解更多信息`Cell`，请阅读其[Javadoc](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Cell.html#getCellType%28%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:41:27.247

最好评估细胞类型，然后做你需要的。我使用此代码处理单元格数据（检查我是否处理空白单元格）：

```
switch (cell.getCellType()) {
    case Cell.CELL_TYPE_STRING:
        str = cell.toString().trim();
        break;
    case Cell.CELL_TYPE_NUMERIC:
        if (DateUtil.isCellDateFormatted(cell)) {
            //you should change this to your application date format
            objSimpleDateFormat = new SimpleDateFormat("dd/MM/yyyy");
            str = objSimpleDateFormat.format(cell.getDateCellValue());
        } else {
            num = cell.getNumericCellValue();
            str = String.valueOf(cell.getNumericCellValue());
        }
        break;
    case Cell.CELL_TYPE_BLANK:
        str = "";
        break;
    case Cell.CELL_TYPE_ERROR:
        str = "";
        break;
    case Cell.CELL_TYPE_BOOLEAN:
        str = String.valueOf(cell.getBooleanCellValue());
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:17:58.980

如果我们都知道是什么代码行号导致了异常，那就太好了。

我怀疑你的第一行代码是原因。对象单元格可以为空，空地址不能转换为字符串类型。您可以通过代码检查。

注意：该代码适用于 Office 2010 很好，但我认为此类问题可能发生在任何 Excel 版本中。

# iphone - 向键盘添加 .com 按钮，如 Safari

> ID：10857213
> 
> 赞同：0
> 
> 时间：2012-06-01T20:56:39.990
> 
> 标签：iphone, objective-c, ios, xcode

我想在我的基本键盘上添加一个 .com 按钮，就像 safari 在用户输入文本框时提供的一样。如果没有一些疯狂的编码，这可能吗？如果是这样，怎么办？谷歌上的搜索并没有被证明提供太多信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T20:58:48.567

这很简单，您必须执行以下操作

```
//field is the UITextField outlet you have in your viewcontroller
field.keyboardType = UIKeyboardTypeURL; 
```

阅读更多

[UI键盘类型](https://stackoverflow.com/questions/1117980/uikeyboard-type)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:59:49.313

`keyboardType`财产是你的朋友。将其设置为`UIKeyboardTypeURL`。您可以在代码中或在 Interface Builder 中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:00:20.147

它在 Apple 的 iOS 平台文档中。您要查找的键盘是 URL 特定键盘。[在此处](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)阅读有关此事的信息

顺便说一句：这是[我的谷歌搜索的第二个结果](https://www.google.no/webhp?hl=en&tab=ww#hl=en&newwindow=1&safe=off&sclient=psy-ab&q=.com+keyboard+ios&oq=.com+keyboard+ios&aq=f&aqi=q-A3&aql=&gs_l=hp.3..33i29l3.22626.22815.1.22986.3.3.0.0.0.0.109.249.2j1.3.0...0.0.v9dWhXXXEfA&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=d2f5f37bb887a40c&biw=1483&bih=934)

# javascript - 在javascript中存储没有数据库的数据结构

> ID：10857214
> 
> 赞同：0
> 
> 时间：2012-06-01T20:56:48.787
> 
> 标签：javascript, data-structures

不要被长片段吓倒，我认为对于你们中的一些人来说，这很容易。

希望标题能说明我问题的主要信息。我想做的是`key:value`结合对象和数组对来构建数量。

**信息**

*   它可以*更轻松地使用*[EJS](http://embeddedjs.com/)进行模板化，以便在配置中包含整个 html 元素。
*   该配置包含大约 30*个项目*
*   这些完全是逻辑问题，也是为了进一步发展
*   我不会为此使用数据库
*   它应该是动态的和可扩展的

**例子**

```
var items = {
    basic: {
        someKey: [
            {
                id: 'title',
                title: 'Title', 
                type: 'text', ...
            }, ...
        ], ...
    }, ...
} 
```

在定义了这些东西（稍后需要它们用于单个操作）之后，我尝试进入一个结构，以便我可以使它更容易以供以后使用。

```
var sections = [
    {
        title: 'Basic',
        rows: [{
            columns: [
                { title: 'Default', items: items.basic.someKey }, ...
            ]
        }]
    }, ...
] 
```

某种输出会是这样的：

```
<input type="<%= item.type %>" id="<%= item.id %>" value="<%= item.value %>" placeholder="<%= item.ph %>"> 
```

*   你会怎么做那些事情？
*   有没有更好的解决方案？
*   将它存储在 javascript 中的方法是否比从 xml 解析它们更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:13:13.157

我想你可能想看看[JSON](http://www.json.org/)。大量用于解析和生成它的库，并且它基于 JavaScript 的一个子集，因此您根本不必过多地更改语法。

# javascript - Javascript：处理用户生成脚本的最佳方式

> ID：10857215
> 
> 赞同：4
> 
> 时间：2012-06-01T20:56:51.743
> 
> 标签：javascript, security, eval, user-input

情况是这样的：我有一些 JavaScript 可以创建一个交互式对话（并通过动态元素创建以漫画的形式显示它......这很有趣）。该页面允许用户调整设置，改变脚本产生的对话。作为一个理论示例，其中一个复选框可以是“使用 cussing”，如果选中此框，脚本只会将 cuss 词添加到返回的字符串中。好的，很简单。乐趣。

它目前只使用一个模板（“漫画”有一个非常具体和明确的目的）来生成对话；这个模板被硬编码到 JavaScript 中。我希望用户能够创建自己的模板，然后将其转换为像硬编码版本一样执行的脚本，并且还可以通过复选框选项进行控制。**编辑：**为了澄清，用户不直接编写脚本。他们编写了一个表示（我现在正在考虑使用 JSON），当其他人使用模板打开页面时，该页面将把它变成一个脚本并执行它。

这带来了一些问题。最明显的是恶意用户的攻击。**编辑：**虽然用户不会自己编写脚本，但由于一切都是客户端，他们可以很容易地看到我的解析脚本，并且可能能够弄清楚如何插入一些东西。不过，并不是真的太担心这一点。**结束编辑。**我确信有一些标准的方法可以解决这个问题，并且由于目前没有交互服务器端 - 一切都是客户端 - 我主要担心的是这样的用户不能通过分享他的坏版本来伤害另一个用户的体验。现在，我只是在一开始就通过全局替换不在集合中的所有字符来剥离字符串：

`str.replace(/[^a-zA-Z...]/g,'')`.

另一个问题是如何将他们的模板提供给页面以供其他人欣赏。正如我所说，没有服务器端交互，我想保持这种状态。我不想创建 MySQL 表等来存储它们的模板。不幸的是，这意味着我能想到的唯一可行的方法是将他们的模板放在 URL 的查询字符串中。讨厌，那个。这确实对字符长度施加了限制——如果我没看错的话，只要 2,000 就可以与旧版 IE 兼容。（我还想过生成一个 HTML 文件的文本，他们可以复制粘贴，保存为这样，托管在某个地方，并将地址发送到我的页面中的 URL，然后将其加载到 iFrame 中......哈. 是的。不是用户友好的 - 涉及保存为他们的文件类型

第三个问题是一旦页面从他们那里收到模板，使其安全，并将其转换为脚本，我应该如何执行该脚本？自从我第一次开始使用 Javascript 以来，我就听说 eval 是邪恶的，所以我避免使用它。显然做`new Function(txt)`同样邪恶（尽管我以前做过很多次）。我愿意接受这些邪恶的说法......但是还有什么选择？我搜索了谷歌，我能找到的最接近我的情况是[这个 StackOverflow 问题，涉及远程代码](https://stackoverflow.com/questions/4605073/alternatives-to-eval-for-running-remote-code)。接受的答案建议动态创建一个脚本标签，其中 textContent 设置为脚本字符串。这对我来说也是最好的解决方案吗？

**概括**

我需要访问用户生成的文本（最好不要将其存储在服务器端），在避免攻击的同时将其解析为 Javascript，然后使用`eval()`.

1.  将他们的模板作为查询字符串存储在 URL 中，然后可以共享，这是将模板获取到页面的唯一方法吗？
2.  我应该注意哪些安全漏洞，以及防范恶意用户的标准方法是什么？
3.  eval 有哪些替代方法可以执行未硬编码到脚本中、远程检索的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:09:37.040

正如@pst 所说，使用模板功能（和参数）的 JSON 表示，并且只运行受信任的代码。

也许像

```
{
  border: { color: '#BADA55' },
  layout: { columns: 2, rows: 4 }
} 
```

然后只需使用循环、处理程序数组、`switch...case`级联或类似方法对其进行解析。

稍微压缩一下，这可以容纳一个非常详细的模板，少于 2000 个字符。

* * *

jsfiddle 通过在不同域名的 iframe 中提供不受信任的代码来安全地运行不受信任的代码，因此，如果这是一个选项并且您*真的*想评估一些不受信任的代码，那就这样做吧。如果您坚持防止“伤害体验”，您最终仍会做出声明性表示（或尝试完美净化它，直到您意识到自己做不到）。

# php - 用php ping 域名获取ip

> ID：10857217
> 
> 赞同：1
> 
> 时间：2012-06-01T20:56:54.213
> 
> 标签：php, ping

所以我可能很笨，这可能很简单。我有一个包含大约 300 个域名的文本文件。我不想手动 ping 它们，所以我正在编写一个简单的小 php 脚本来 ping 域名返回 ip 地址，然后回显它们

我在文本文件中有域，我可以读取文件并输出名称，但是第二次尝试对它们执行 ping 操作，我得到的只是一个空白列表

*   像我说的点可能错过了一些如此愚蠢的东西，但我感谢任何帮助

    ```
     <?php

     $names = file('sites.txt');
     foreach ($names as $name) {
     $testping = exec("ping  $name");
      echo '<li>' . $testping . '</li>';
     }

      ?> 
    ```

    新代码* ***

    ```
     $names = file('sites.txt');
     foreach ($names as $name) {

       $ip = gethostbyname($name);

      echo '<li>' . $ip . '</li>';
      }

       ?> 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T20:58:01.947

如果您的最终目标是获取 IP 地址，请查看[`gethostbyname()`](http://php.net/gethostbyname)：

```
$names = file('sites.txt');
 foreach ($names as $name) {
     $ip = gethostbyname($name);
     echo '<li>' . $ip. '</li>';
 } 
```

```
echo $ip; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:58:23.793

gethostbyname() 将返回您输入的任何域的 IP 地址。 [http://php.net/manual/en/function.gethostbyname.php](http://php.net/manual/en/function.gethostbyname.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:13:21.557

@BrandonBraner 正是我想做的！只有列表中的最后一个条目有效的原因是 PHP 正确读取了这些行，但在末尾附加了一个字符。最后一行没有这样做 - 不要问我为什么。也许是换行符。

要绕过它，请使用 substr：

```
 $names = file('mysites.txt');
foreach ($names as $name) {

   $mydomain = substr($name, 0, -1);
   $ip = gethostbyname($mydomain);

  echo '<li>' . $ip . '</li>';
  } 
```

为我做了诀窍。然后，您需要做的就是在域列表中添加一个空的最后一行。

# c++ - IN6_SET_ADDR_UNSPECIFIED 未在此范围内声明

> ID：10857218
> 
> 赞同：0
> 
> 时间：2012-06-01T20:56:57.960
> 
> 标签：c++, linux

我目前正在将 Visual Studio C++ 代码移植到 Linux。我正在使用 Ret Hat 版本。当我编译代码时，我得到这个错误：

错误：“IN6_SET_ADDR_UNSPECIFIED”未在此范围内声明

您能否让我知道相同的 linux 等效项是什么。如果没有等效功能，我如何编辑它以在 linux 和 windows 上工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:29:50.090

一点谷歌搜索发现这一点：

```
inline void IN6_SET_ADDR_UNSPECIFIED(struct in6_addr *a) 
{ 
   memset(a->s6_bytes,0,sizeof(struct in6_addr)); 
} 
```

...您可能可以使用它。

# android - Android 多部分 POST 请求

> ID：10857222
> 
> 赞同：1
> 
> 时间：2012-06-01T20:57:21.830
> 
> 标签：android, apache-httpcomponents

这更像是一个逻辑问题而不是编程问题。我想使用多部分数据（来自 Android 应用程序的图像）执行 POST 请求。

我正在尝试遵循网络上的教程，该教程使用名为 MultiPartEntity 的类，据说包含在 Apache Commons 中。

我有最新版本的 Apache HttpComponents（据我了解是 Apache Commons HTTP 模块的继承者），但它不包含此类。

HttpComponents 中是否有不同的等效类？我错过了什么吗？我搜索了所有我能找到的文档都无济于事。

出于说明目的，我的导入屏幕截图：

![在此处输入图像描述](../Images/0d7d931aaff02f0d4eb7f6d8ed18683d.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:56:16.687

该类包含在`httpmime`jar 中。例如，您可以[在此处](http://mvnrepository.com/artifact/org.apache.httpcomponents/httpmime)下载。

# wpf - 带有可选文本的 TextBlock 并在单击时将所有文本复制到剪贴板

> ID：10857223
> 
> 赞同：1
> 
> 时间：2012-06-01T20:57:25.133
> 
> 标签：wpf, xaml, clipboard

目前在我的 WPF 应用程序中，我有一个只读的多个文本框。所以用户可以选择文本然后`Ctrl`++ `C` `Ctrl`。`V`但我想让这个任务更简单：

*   如果用户只是左键单击文本框（或显示我的文本的另一个控件），则所有文本都将复制到剪贴板

但是用户仍然可以像以前一样选择文本

任何想法以 XAML 风格做到这一点？

* * *

解决了，我会自动将所选的任何文本复制到剪贴板。知道如果双击文本框会选择所有文本，用户只需双击即可复制剪贴板中的所有文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:08:55.997

至于鼠标悬停动画。获取鼠标悬停动画并在鼠标位于按钮边界内时更改指针。这是有关鼠标悬停事件的链接：

[http://dotnetdud.blogspot.com/2009/01/how-to-use-c-mouseover-events-in.html](http://dotnetdud.blogspot.com/2009/01/how-to-use-c-mouseover-events-in.html)

以下是在文本框 mouseclick 事件上设置剪贴板数据的方法：

```
private void textbox_mouseClick(object sender, EventArgs e)
    {
    if (((TextBox)sender).Text == string.Empty)
        return;
    else
       {
        try
         {
        Clipboard.SetText(((TextBox)sender).Text);
         }
        catch (Exception ex)
         {
           // Do something w/ exception 
         }
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:01:29.853

对于剪贴板问题，您可以创建一个 onclick 处理程序并使用 C# 中的内置剪贴板功能（[如何在 C# 中将数据复制到剪贴板](https://stackoverflow.com/questions/3546016/how-to-copy-data-to-clipboard-in-c-sharp)）。

对于工具提示，您需要使用 onload 处理程序和 C# 中的内置工具提示功能：

```
System.Windows.Forms.ToolTip ToolTip1 = new System.Windows.Forms.ToolTip();
ToolTip1.SetToolTip(this.textBox1, "Hello"); 
```

没有做太多动画，但如果我没记错的话，你也可以设置一个 onhover 处理程序。（编辑：MouseHover 事件处理程序可能是您正在寻找的。）

编辑：基本上，事件处理程序是你的朋友。

# android - 如何在 Android 上调用其他应用程序的默认活动？

> ID：10857224
> 
> 赞同：0
> 
> 时间：2012-06-01T20:57:31.340
> 
> 标签：android

如何在 Android 上调用其他应用程序的默认活动？例如，我希望我的应用程序调用我手机上的特定 pdf 阅读器（我有很多 pdf 阅读器应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:02:19.393

`Intents`为之使用。这是[示例](http://developer.appcelerator.com/blog/2011/09/sharing-project-assets-with-android-intents.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:02:27.177

将`ACTION_VIEW`Intent 与 Uri 一起使用，该 Uri 指向 SD 卡（或`MODE_WORLD_READABLE`您的应用程序本地文件存储中）上的文件。您还应该将 MIME 类型设置为`application/pdf`.

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("path-to-document"));
intent.setType("application/pdf");
startActivity(intent); 
```

上面的代码将启动一个活动选择器，用户可以在其中选择所需的应用程序来查看给定的 pdf。我不建议强制使用特定的应用程序（因为用户可能没有在他或她的设备上安装它），但如果你必须，你可以使用

```
intent.setPackage("com.package.name") 
```

只需确保检查应用程序是否已安装（或将代码包装在`try-catch`语句中以确保`ActivityNotFoundException`不会抛出 an）。

# c# - 使用 C# 和 WPF 的异步网络

> ID：10857229
> 
> 赞同：0
> 
> 时间：2012-06-01T20:57:42.667
> 
> 标签：c#, wpf, asynchronous

我正在编写一个 wpf 应用程序来通过 TCP 控制嵌入式设备。写入设备很容易，但我无法接收数据包。

我创建了一个 tcp NetworkStream 并使用 NetworkStream.BeginRead() 来监听 TCP 数据。但是，一旦我编写了一个完整的数据包，我想更新我的 GUI 以反映新信息。似乎不允许我从异步回调线程中执行此操作。

似乎有一种方法可以通过调度程序一次一个请求来执行此操作，但我几乎需要更新我的 GUI 上的每个控件。我不是为每个数据包案例和每个 WPF 控件编写调度程序函数。如何从我的异步线程完全访问 WPF 控件？

**编辑：** 这是一个代码示例：

```
NetworkUnion union = (NetworkUnion)ar.AsyncState;
                union.BytesRead += tcpStream.EndRead(ar);

                if (union.BytesRead < union.TargetSize)
                    tcpStream.BeginRead(union.ByteArray, union.BytesRead, union.TargetSize - union.BytesRead, new AsyncCallback(ReadCommandCallback), union);
                else
                {
                    NetworkUnion payload = new NetworkUnion();
                    NetworkPacket pkt = (NetworkPacket)union.getArrayAsStruct();

                    // Respond to the packet
                    // Read the payload
                    payload.ByteArray = new byte[pkt.payloadSize];
                    tcpStream.Read(payload.ByteArray, 0, pkt.payloadSize);

                    // Determine what the payload is!
                    switch (pkt.code)
                    {
                        case (int)PacketCode.STATE:
                            payload.ObjectType = typeof(NetworkState);
                            NetworkState state = (NetworkState)payload.getArrayAsStruct();
                            Handle.fuelGauge.Value = Convert.ToDouble(state.mainFuel);
                            break; 
```

当我尝试更新电量计时，我得到一个 InvalidOperationException，调用线程无法访问，因为另一个线程拥有该对象

使用“Handle”变量是因为它来自静态实用程序类

主要问题是，我真的必须更换每一行

```
Handle.fuelGauge.Value = Convert.ToDouble(state.mainFuel); 
```

和

```
Handle.fuelGauge.Dispatcher.Invoke(
                                System.Windows.Threading.DispatcherPriority.Normal,
                                new Action(
                                    delegate()
                                    {
                                        Handle.fuelGauge.Value = Convert.ToDouble(state.mainFuel);
                                    }
                            )); 
```

? 似乎过于重复了。这样做会更容易：

```
Handle.mainWindow.Dispather.Lock();
Handle.fuelGauge.Value = Convert.ToDouble(state.mainFuel);
change everything else...
Handle.mainWindow.Dispatcher.Unlock(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:15:55.997

Generally, in .NET, you need to marshal UI requests back to the main UI thread. This is a common scenario when trying to update UI after a network read, because when using Sockets, you are usually always receiving data on some other (threadpool) thread.

So, in your code which receives the data, you should wrap up the bytes into some useful object, and marshal that back to an entry point method on the main UI thread which can then take responsibility for farming out UI updates, on the now correct thread.

There are many ways to do this, but perhaps a more flexible approach than some, would be for your callers of the socket code to pass in a SynchronizationContext object, which can then be used to marshal the received data to.

See here for more info on [SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx "SynchronizationContext")

You won't need to post back every socket call, just move your swithc statement, that decides how to handle a packet, into a class on the UI thread, and invoke to that method. Then, that method can do UI updates as normal, as all calls *from* it are already marshalled correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:27:01.730

不，你不需要像你说的那样替换每一行。像这样的东西怎么样：

```
NetworkUnion union = (NetworkUnion)ar.AsyncState;
            union.BytesRead += tcpStream.EndRead(ar);

            if (union.BytesRead < union.TargetSize)
                tcpStream.BeginRead(union.ByteArray, union.BytesRead, union.TargetSize - union.BytesRead, new AsyncCallback(ReadCommandCallback), union);
            else
            {
                NetworkUnion payload = new NetworkUnion();
                NetworkPacket pkt = (NetworkPacket)union.getArrayAsStruct();

                // Respond to the packet
                // Read the payload
                payload.ByteArray = new byte[pkt.payloadSize];
                tcpStream.Read(payload.ByteArray, 0, pkt.payloadSize);

                // Determine what the payload is!
                double yourvalue = new double(); 
                switch (pkt.code)
                {
                    case (int)PacketCode.STATE:
                        payload.ObjectType = typeof(NetworkState);
                        NetworkState state = (NetworkState)payload.getArrayAsStruct();
                        yourvalue = Convert.ToDouble(state.mainFuel);
                        break;
            /**
                Other Cases....

            */
         // After the switch 

                    Handle.fuelGauge.Dispatcher.Invoke(
                            System.Windows.Threading.DispatcherPriority.Normal,
                            new Action(
                                delegate()
                                {
                                    Handle.fuelGauge.Value = yourvalue;
                                }
                        )); 
```

# math - 计算椭圆上的点

> ID：10857231
> 
> 赞同：5
> 
> 时间：2012-06-01T20:58:09.720
> 
> 标签：math, trigonometry, ellipse

假设我有两个点 A 和 B 位于椭圆的圆周上，它们与中心点形成角度 X。现在说点 A 移动到新点 C。如何计算 B 的新点以使角度 X 保持不变？指向某种代码的指针将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T21:09:06.503

为什么不使用从椭圆中心测量角度的椭圆的极坐标形式？？？[http://en.wikipedia.org/wiki/Ellipse#Polar_form_relative_to_center](http://en.wikipedia.org/wiki/Ellipse#Polar_form_relative_to_center)从这个等式中，如果你知道 A 和 B 之间的角度值（比如 theta），并且你知道新点 C 的中心角值（说 phi），那么可以使用角度（theta + phi）从这种极坐标形式计算出所需的点 D

# alpha - 在 three.js 中，alpha 通道工作不一致

> ID：10857233
> 
> 赞同：3
> 
> 时间：2012-06-01T20:58:16.133
> 
> 标签：alpha, three.js, zbuffer

我正在three.js 中构建一个“剪纸”世界。我所有的模型都是简单的“平面”，我用带有 alpha 通道的 PNG 对它们进行纹理处理，以将平面修剪成更令人愉悦的形状。

奇怪的是：透明度会根据平面的位置和相机的位置而出人意料地出现和消失。

症状 1：如果平面部分位于地平面下方，则透明度起作用，但如果我将其移动到地平面上方，则透明区域将填充为白色。

症状 2：建立在症状 1 的基础上：如果我现在四处移动相机以使外观矢量几乎与平面平行，则透明度再次开始工作。

有什么想法吗？看起来有点像优化出错或可能是 z-write 问题？无论 alpha 值如何，纹理都会写入 z 吗？如果是这种情况，我认为它不会对位置或摄像机角度敏感。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T00:40:35.010

您需要`transparent`在材质中将标志设置为 true。

```
new THREE.MeshBasicMaterial( { map: transparent_map, transparent: true } ); 
```

# xcode - 将 BackgroundImage 设置为 UITableView Section (viewForHeaderInSection)

> ID：10857241
> 
> 赞同：0
> 
> 时间：2012-06-01T20:58:51.660
> 
> 标签：xcode, uitableview, tableview, sections

我试过了

```
 - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, 100)];
    headerView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    headerView.opaque = NO;
    headerView.backgroundColor= [UIColor blackColor];

    return [headerView autorelease];
} 
```

但是如何为这些部分设置**BackgroundImage**？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:01:55.960

您可以将背景颜色设置为带有图像的图案：

```
headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myBackground.png"]]; 
```

# asp.net-mvc - 使用 ASP .net MVC HTML 帮助器在表格内呈现 DIV 标记

> ID：10857245
> 
> 赞同：1
> 
> 时间：2012-06-01T20:59:00.693
> 
> 标签：asp.net-mvc

我正在尝试使用 ASP .net MVC 中的 HTML Helper 方法在 table td 标记内呈现一些 DIV。由于某种原因，没有呈现 div。这是我的示例代码。我的模型有两个属性 ID 和一个字符串列表。这些字符串基本上是 HTML DIV 标签。

```
<table>
<tr>
 <th>ID</th>
 <th>Schedule</th>
</tr>
<% foreach (var item in Model) { %>
  <tr>
    <td><%: Html.DisplayFor(modelItem => item.ID) %></td>
    <td>
       <% foreach (var bar in item.Details)
        {
           Html.DisplayFor(modelItem => bar);
        }       
        %>
    </td>
   </tr>
 <% } %>
</table> 
```

该视图使用 ID 而非 DIV 标记填充。有人可以指出我可能做错了什么。

谢谢，贾维德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:08:39.733

你错过了`<%: %>`周围的`Html.DisplayFor`

```
<td>
   <% foreach (var bar in item.Details) { %>
       <%: Html.DisplayFor(modelItem => bar) %>
   <% } %>
</td> 
```

因为`Html.DisplayFor`不直接写入 Response 只是将呈现的模板返回为 a `MvcHtmlString`，所以它需要与`<%: %>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:13:44.717

您可以将 jQuery 的 .getJSON 与 .html 方法结合使用来生成包含 DIV 的 HTML 标记：

```
 <script>
        $(document).ready(
                        function () {
                            $("#Button2").click(
                                    function () {
                                        $("#ohyeah").html("blah blah blah");
                                        var jsonlisteningobject = {};
                                        $.getJSON("/home/somefoo", null, function (data) {
                                            var div = $('#ohyeah');
                                            div.html("<td>" + data.someNumber + "</td><td>" + data.someString1 + "</td><td>" + data.someString2 + "</td><td>" + data.someListofStrings[3] + "</td>");
                                        }
                                            );
                                        $.getJSON("/home/someHTML", null, function (data) {
                                            $("#someHTMLstuff").html(data);

                                        });
                                    }
                                );

        });
    </script> 
```

'someHTMLstuff' 和 'ohyeah' 可以是页面上的 DIV 元素。

# windows - 设置我的本地服务器以模仿顶级域，例如 www.mydevsite.com

> ID：10857247
> 
> 赞同：2
> 
> 时间：2012-06-01T20:59:17.167
> 
> 标签：windows, wamp

如何设置本地服务器，以便如果您在本地计算机上访问类似 www.my-dev-branch.com 的内容，它会指向您系统上的文件，例如 'c:/wamp/www/www.my-dev -copy.com'

注意，我在使用 WAMP 的 Windows 7 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:05:03.293

通常这种事情是通过操作C:\WINDOWS\SYSTEM32\DRIVERS\ETC 中的**hosts文件来完成的**

你像这样添加一行

```
127.0.0.1       www.my-dev-branch.com 
```

请记住，在 Win7 中，这条路径在正常视图中是隐藏的。
您需要直接在资源管理器窗口的地址栏中键入路径。
当然需要**管理员权限**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:35:06.850

我在下面找到了我想要的东西：

[http://www.infotales.com/seting-up-local-domains-windows-apache-wamp/](http://www.infotales.com/seting-up-local-domains-windows-apache-wamp/)

```
Recently had to setup local domains for my php projects. Normally I use http://localhost/project_directory urls for normal project, but for a new project I had to setup few local domains. For existing projects I still need localhost (127.0.0.1) available along local domains like project.localhost.com. Setting up local domains and virtual hosts is easy and I found it worth sharing.
I am using Windows Vista Business with WampServer Version 2.0 installed. This method should also work for standalone apache installation.
First we need to add host entry in windows host. To do this, open file
C:\Windows\System32\drivers\etc\hosts
in some text editor, by using Open With menu from right click.
Note that C: represent your drive where windows is installed, in most cases it will be C: but it can be different.
You will see content smiler to
# Copyright (c) 1993-2006 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
# 102.54.94.97 rhino.acme.com # source server
# 38.25.63.10 x.acme.com # x client host
127.0.0.1 localhost
::1 localhost
Now add this line
127.0.0.1 project.localhost.com

at the end. Here you can add any custom domain like projectname.local etc.
The line added tells windows to resolve to local IP when ever this domain name is requested by browser etc. Be sure not to add any live existing domains as they will be resolved to localhost instead of live host.
Now we need to add virtual host entry in Apache server so we can server our project files. For this apache config file which in this case is
C:\wamp\bin\apache\Apache2.2.11\conf\httpd.conf
. Open the file with text editor and find following lines
# Virtual hosts
# Include conf/extra/httpd-vhosts.conf
The second line tells conf file to include another configuration file which contains virtual host configurations. The line is commented by default so we have to enable it.
Now remove
#
sign from start of the second line and save file, so the line will look
Include conf/extra/httpd-vhosts.conf
.
Now open file
C:\wamp\bin\apache\Apache2.2.11\conf\extra\httpd-vhosts.conf
to add virtual host entries.
Add following lines to the file.
<VirtualHost 127.0.0.1>
DocumentRoot "C:/websites/myproject/public/"
ServerName project.localhost.com
ServerAlias project.localhost.com
</VirtualHost>
You may also need to remove any example virtual hosts.
After this restart your apache and test the url http://project.localhost.com/ in browser. 
```

# python - 与 ipython 并行的 Python 名称空间问题

> ID：10857250
> 
> 赞同：10
> 
> 时间：2012-06-01T20:59:29.580
> 
> 标签：python, python-2.7, parallel-processing, ipython

我开始尝试使用 IPython 并行工具并遇到问题。我用以下命令启动我的 python 引擎：

```
ipcluster start -n 3 
```

然后下面的代码运行良好：

```
from IPython.parallel import Client

def dop(x):
    rc = Client()
    dview = rc[:]
    dview.block=True
    dview.execute('a = 5')
    dview['b'] = 10
    ack = dview.apply(lambda x: a+b+x, x)
    return ack

ack = dop(27)
print ack 
```

返回 [42, 42, 42] 应该的。但是如果我将代码分成不同的文件：dop.py：

```
from IPython.parallel import Client

def dop(x):
    rc = Client()
    dview = rc[:]
    dview.block=True
    dview.execute('a = 5')
    dview['b'] = 10
    print dview['a']
    ack = dview.apply(lambda x: a+b+x, x)
    return ack 
```

并尝试以下操作：

```
from dop import dop
ack = dop(27)
print ack 
```

我从每个引擎得到错误：

```
[0:apply]: NameError: global name 'a' is not defined
[1:apply]: NameError: global name 'a' is not defined
[2:apply]: NameError: global name 'a' is not defined 
```

我不明白...为什么我不能将函数放在不同的文件中并导入它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T02:40:16.020

快速回答：如果您希望函数能够访问引擎的全局命名空间，请使用 [1]`@interactive`装饰您的函数：`IPython.parallel.util`

```
从 IPython.parallel.util 导入交互式
f = 交互式（λ x：a+b+x）
ack = dview.apply(f, x)

```

实际解释：

IPython 用户命名空间本质上是模块`__main__`。当您这样做时，这是运行代码的地方`execute('a = 5')`。

如果您以交互方式定义函数，则其模块也是`__main__`：

```
拉姆 = λ x: a+b+x
林.__模块__
'__主要的__'

```

当引擎反序列化一个函数时，它会在函数模块的适当全局命名空间中执行此操作，因此`__main__`客户端中定义的函数也定义在`__main__`引擎上，因此可以访问`a`.

将其放入文件并导入后，函数不再附加到`__main__`，而是附加到模块`dop`：

```
从多普进口多普
dop.__模块__
“滴”

```

该模块中通常定义的所有函数（包括 lambda）都将具有此值，因此当它们在 Engine 上解压缩时，它们的全局命名空间将是`dop`模块的命名空间，*而不是* `__main__`，因此您的 'a' 不可访问。

出于这个原因，IPython 提供了一个简单的`@interactive`装饰器，它可以将任何函数解包，就好像它被定义在 中一样`__main__`，而不管函数实际定义在哪里。

有关差异的示例，请参考`dop.py`：

```
从 IPython.parallel 导入客户端
从 IPython.parallel.util 导入交互式

a = 1

定义 dop(x):
    rc = 客户端（）
    dview = rc[:]
    dview['a'] = 5
    f = λ x: a+x
    返回 dview.apply_sync(f, x)

定义 idop(x):
    rc = 客户端（）
    dview = rc[:]
    dview['a'] = 5
    f = 交互式（λ x: a+x）
    返回 dview.apply_sync(f, x)

```

现在，`dop`将使用 dop 模块中的`idop`“a”，并将使用引擎命名空间中的“a”。两者之间的唯一区别是传递给 apply 的函数被包装在[`@interactive`](https://github.com/ipython/ipython/blob/master/IPython/parallel/util.py#L227)：

```
从dop导入dop，idop
打印 dop(5) # 6
打印 idop(5) # 10

```

[1]：在 IPython >= 0.13（即将发布）中，`@interactive`也可以作为`from IPython.parallel import interactive`.

# jquery - 从 fancybox-inner div 中删除白色背景色

> ID：10857251
> 
> 赞同：1
> 
> 时间：2012-06-01T20:59:32.820
> 
> 标签：jquery, fancybox, fancybox-2

有没有办法从 fancybox-inner div 中删除白色背景颜色？

这是我正在尝试的..

```
$(".fancybox").fancybox({padding : 0, background: 'none'}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T22:28:36.467

您可以通过内联`CSS`声明对其进行更改。

链接到 fancybox *css*文件后，添加以下内容：

```
 .fancybox-skin {
      background-color: #ff0000; /* or whatever */
    } 
```

该选择器的默认值为：

```
.fancybox-skin {
    background: none repeat scroll 0 0 #F9F9F9;
    border-radius: 4px 4px 4px 4px;
    color: #444444;
    margin: 0;
    padding: 0;
    position: relative;
    text-shadow: none;
} 
```

最终，您可以使用回调选项`background-color`在脚本中更改，例如：`beforeShow`

```
$(".fancybox").fancybox({
 beforeShow: function(){
  $(".fancybox-skin").css("backgroundColor","transparent");
 }
}); 
```

**`transparent`如果您想*删除*它，我使用的**通知**`none`（在这种情况下不是有效值）**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T21:09:45.270

[http://fancyapps.com/fancybox/#helpers](http://fancyapps.com/fancybox/#helpers)

在第 2 版中，有一种方法可以通过助手：

```
$(".fancybox").fancybox({
    helpers:  {
        overlay : {
            css : {
                'background-color' : '#fff'
            }
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:02:56.070

您应该能够向 fancybox-inner div 添加一个额外的类，例如：

```
class="white" 
```

然后把它放在那里：

```
background: #FFF; 
```

它将覆盖默认值。**

# excel - Excel中的二次和三次回归

> ID：10857252
> 
> 赞同：54
> 
> 时间：2012-06-01T20:59:33.840
> 
> 标签：excel, regression

我有以下信息：

```
 Height    Weight

    170     65
    167     55
    189     85
    175     70
    166     55
    174     55
    169     69
    170     58
    184     84
    161     56
    170     75
    182     68
    167     51
    187     85
    178     62
    173     60
    172     68
    178     55
    175     65
    176     70 
```

我想在 Excel 中构建二次和三次回归分析。我知道如何通过 Excel 中的线性回归来做到这一点，但是二次和三次呢？我搜索了很多资源，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-09-07T19:19:29.137

`LINEST`您需要对 Excel 的函数使用未记录的技巧：

```
=LINEST(known_y's, [known_x's], [const], [stats]) 
```

## 背景

常规*线性*回归（使用您的数据）计算为：

```
=LINEST(B2:B21,A2:A21) 
```

`m`根据以下公式返回单个值，即线性斜率 ( )：

![在此处输入图像描述](../Images/db0f5303ee917b4b40d04e369cdd9873.png)

对于您的数据：

![在此处输入图像描述](../Images/6917f7ec981fe084f7af0e498ae7a43c.png)

是：

![在此处输入图像描述](../Images/0b5b1c3da9870a3fae80a9ff0ea1b72d.png)

## 无证招数 1

您还可以使用 Excel 使用一个公式计算回归，该公式使用与`x`不同的指数`1`，例如 x ^(1.2)：

![在此处输入图像描述](../Images/8a9f1d0b0908fbd7a87ff1629ff43c80.png)

使用公式：

```
=LINEST(B2:B21, A2:A21^1.2) 
```

为您提供的数据：

[![在此处输入图像描述](../Images/0065bff7f771b03b0765b005a2583e35.png)](https://i.stack.imgur.com/mNrqb.png)

是：

[![在此处输入图像描述](../Images/ef4d70167ceae2bc168600b9bd6c7ae2.png)](https://i.stack.imgur.com/czzHF.png)

## 你不限于一个指数

Excel 的`LINEST`函数还可以计算多个回归，同时使用不同`x`的指数，例如：

```
=LINEST(B2:B21,A2:A21^{1,2}) 
```

> **注意：**如果语言环境设置为欧洲（十进制符号“，”），则逗号应替换为分号和反斜杠，即`=LINEST(B2:B21;A2:A21^{1\2})`

现在 Excel 将同时使用 x ¹和 x ²计算回归：

![在此处输入图像描述](../Images/4c41c90164ce0d9b00405458a8fb1c17.png)

## 如何实际做到这一点

不可能的棘手部分是没有明显的方法来*查看*其他回归值。为此，您需要：

*   选择包含您的公式的单元格：

    ![在此处输入图像描述](../Images/51a0da194a239016fe24e214e73f570e.png)

*   将选择扩展到左侧 2 个空格（您需要选择至少 3 个单元格宽）：

    ![在此处输入图像描述](../Images/43eff1018a2168c8ef32c6cbe0a4e835.png)

*   按`F2`

*   按`Ctrl`+ `Shift`+`Enter`

    ![在此处输入图像描述](../Images/91d51924fcabad725762390a26a4ef75.png)

您现在将看到您的 3 个回归常数：

```
 y = -0.01777539x^2 + 6.864151123x + -591.3531443 
```

## 奖金喋喋不休

我有一个函数，我想使用*一些*指数执行回归：

> y = m×x ^k + b

但我不**知道**指数。所以我将`LINEST`函数更改为使用单元格引用：

```
=LINEST(B2:B21,A2:A21^F3, true, true) 
```

然后使用 Excel 输出完整的统计信息（第 4 个参数`LINEST`）：

![在此处输入图像描述](../Images/3f5983b552a842f9d07eaaae2d0a626e.png)

我告诉**Solver**最大化 R ²：

![在此处输入图像描述](../Images/6ab872561d0d3b049a7c04a7155a3058.png)

它可以计算出最好的指数。哪个适合你的数据：

[![在此处输入图像描述](../Images/cb0ce0598996c27451260c381153834d.png)](https://i.stack.imgur.com/BT60n.png)

是：

[![在此处输入图像描述](../Images/27a20012a81a6ccab927edd922a243c5.png)](https://i.stack.imgur.com/XU611.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-15T17:52:40.617

我知道这个问题有点老了，但我想我会提供一个替代方案，在我看来，这可能会更容易一些。如果您愿意在数据集中添加“临时”列，可以使用 Excel 的分析工具库→数据分析→回归。进行二次或三次回归分析的秘诀是定义**输入 X 范围：**。

如果您要进行简单的线性回归，您只需要 2 列 X 和 Y。如果您要进行二次回归，则需要 X_1、X_2 和 Y，其中 X_1 是**x**变量，X_2 是**x^ 2** ; 同样，如果你在做三次，你需要 X_1, X_2, X_3, & Y 其中 X_1 是**x**变量， X_2 是**x^2**和 X_3 是**x^3**。请注意**输入 X 范围**如何从 A1 到 B22，跨越 2 列。

![Excel 中二次回归分析的输入](../Images/0e2dc8b0ca8bbb3783ff0ff30c3ef670.png)

下图是回归分析的输出。我强调了常见的输出，包括 R-Squared 值和所有系数。

![Excel中二次回归分析的系数](../Images/23061b51b5ff71e994b20d593310febd.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-26T00:45:18.563

上一个答案中描述的 LINEST 函数是可行的方法，但显示输出的 3 个系数的更简单方法是另外使用 INDEX 函数。在一个单元格中，输入： =INDEX(LINEST(B2:B21,A2:A21^{1,2},TRUE,FALSE),1) （顺便说一下，我使用的 B2:B21 和 A2:A21 只是第一个回答这个问题的发帖人使用了相同的值……当然，您会适当地更改这些范围以匹配您的数据）。这给出了 X^2 系数。在相邻的单元格中，再次键入相同的公式，但将最后的 1 更改为 2...这给出了 X^1 系数。最后，在下一个单元格中，再次键入相同的公式，但将最后一个数字更改为 3... 这给出了常数。我确实注意到这三个系数非常接近，但与使用图表选项卡下的图形趋势线功能得出的系数并不完全相同。

# javascript - div中的文本到数组中进行排序

> ID：10857257
> 
> 赞同：0
> 
> 时间：2012-06-01T20:59:54.890
> 
> 标签：javascript, jquery

我正在尝试将特定类的所有文本放入一个数组中。

以下在理论上有效，但它将它们放入对象中，而不是数组中，并且 .map 显然在大多数版本的 IE 中广泛不受支持:(

```
var valuesArr = $('.'+sort_column);
var valuesArr =  valuesArr.map(function(){return $(this).text().trim();}); 
```

有什么方法可以将所有值放入我刚刚丢失的简单数组中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:01:37.780

简单迭代：

```
var array = [];

$(".elements").each(function() {
    array.push($.trim($(this).text()));
});

console.log(array); 
```

或者使用 jQuery`map`方法：

```
var array = $(".elements").map(function() {
    return $.trim($(this).text());
}).get();

console.log(array);​ 
```

**演示：http:** [//jsfiddle.net/f6cmR/](http://jsfiddle.net/f6cmR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:02:40.547

使用[$.map 之](http://api.jquery.com/map/)类的

```
var valuesArr = $('.'+sort_column);
var valuesArr =  $.map(valuesArr,function(){
                      return $(this).text().trim();
                     }).get(); 
```

`$.map`返回一个 jQuery 对象。

> jQuery 对象类似于数组，但它们不是数组！在 .map() 调用结束时调用 .get() 的原因是将 jQuery 对象转换为真正的数组。该数组的元素是回调返回的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:14:11.313

您可以使用`$.makeArray()`将 jQuery 对象转换为数组，然后从元素映射文本：

```
var valuesArr = $.makeArray($('.elements'))
    .map(function() {
        return $(this).text().trim();
    }); 
```

# java - import wavemaker 语句无法解析

> ID：10857259
> 
> 赞同：1
> 
> 时间：2012-06-01T20:59:59.067
> 
> 标签：java

我正在接管其他人编写的代码，并且不得不手动查找他们用于该项目的所有内容，因为他们没有发送所需的所有内容。（其中一个国外的合同工作协议。）无论如何，我很难找到一些东西。他们导入了 com.wavemaker.runtime.data、com.wavemaker.runtime.services 和 com.wavemaker.json.type，我不知道如何让这些未解决的错误消失。我已将 WaveMaker 移动到与我的项目相同的文件夹中，并且在我的机器和 Internet 上搜索了高低的 .jar 文件，但无济于事。请帮忙？？（仅供参考，我正在使用 Eclipse 和 Java）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:45:11.710

这很简单，您必须将 jars 添加到 eclipse 配置路径（即：~/WaveMaker/projects/wm_example_project/lib），当您找到它时，请确保将所有这些库添加到您的构建路径。

# jquery - 带有 ASP.NET 的慢 jquery 插件

> ID：10857260
> 
> 赞同：0
> 
> 时间：2012-06-01T21:00:02.627
> 
> 标签：jquery, asp.net, html

我在 vb.net 中使用带有文字和中继器控制的 Jquery 插件。不幸的是，插件的性能非常慢，我将其范围缩小到以下代码：（我在 html 页面中使用了文字）

```
Sub GetAllItems()
Dim dt As DataTable = altharaaonline.DXNitems.GetAllDXNitems()
Dim Lt_Body As String = ""
For i = 0 To dt.Rows.Count - 1
    Lt_Body += "<li class=""item mix_row""><div class=""outer box""> <a href=""#"" class=""product-image""><img src=""" & dt.Rows(i).Item("ImgUrl").ToString & """ alt=""" & dt.Rows(i).Item("ProductNameEnglish").ToString & """ width=""117px"" height=""165px"" /></a><div class=""ic_caption""><h2 class=""product-name""><a href=""Item.aspx?id=" & dt.Rows(i).Item("Id").ToString & """ title=""" & dt.Rows(i).Item("ProductNameEnglish").ToString & """ </a></h2><div class=""actions""><button style=""display:none;"" type=""button"" title=""Add to Cart"" class=""button btn-cart""> <span> <span>Add to Cart</span> </span> </button><a rel=""example_group"" href=""./images/zoom1.jpg"" class=""fancybox quickllook"" id=""fancybox170"">Quick look</a><div class=""price-box""> <span class=""regular-price""> <span class=""price"">" & dt.Rows(i).Item("SellingPrice").ToString & "</span> </span> </div></div></div></div></li>"
Next
Literal1.Text = Lt_Body

End Sub 
```

虽然 Jquery 代码是：

```
typeof YUI!="undefined"&&(YUI._YUI=YUI);var YUI=function(){var a=0,b=this,c=arguments,d=c.length,e=function(a,b){return a&&a.hasOwnProperty&&a instanceof b},f=typeof YUI_config!="undefined"&&YUI_config;e(b,YUI)?(b._init(),YUI.GlobalConfig&&b.applyConfig(YUI.GlobalConfig),f&&b.applyConfig(f),d||b._setup()):b=new YUI;if(d){for(;a<d;a++)b.applyConfig(c[a]);b._setup()}return b.instanceOf=e,b};(function(){var a,b,c="3.4.1",d=".",e="http://yui.yahooapis.com/",f="yui3-js-enabled",g=function(){},h=Array.prototype.slice,i={"io.xdrReady":1,"io.xdrResponse":1,"SWF.eventHandler":1},j=typeof window!="undefined",k=j?window:null,l=j?k.document:null,m=l&&l.documentElement,n=m&&m.className,o={},p=(new Date).getTime(),q=function(a,b,c,d){a&&a.addEventListener?a.addEventListener(b,c,d):a&&a.attachEvent&&a.attachEvent("on"+b,c)},r=function(a,b,c,d){if(a&&a.removeEventListener)try{a.removeEventListener(b,c,d)}catch(e){}else a&&a.detachEvent&&a.detachEvent("on"+b,c)},s=function(){YUI.Env.windowLoaded=!0,YUI.Env.DOMReady=!0,j&&r(window,"load",s)},t=function(a,b){var c=a.Env._loader;return c?(c.ignoreRegistered=!1,c.onEnd=null,c.data=null,c.required=[],c.loadType=null):(c=new a.Loader(a.config),a.Env._loader=c),YUI.Env.core=a.Array.dedupe([].concat(YUI.Env.core,["loader-base","loader-rollup","loader-yui3"])),c},u=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},v={success:!0};m&&n.indexOf(f)==-1&&(n&&(n+=" "),n+=f,m.className=n),c.indexOf("@")>-1&&(c="3.3.0"),a={applyConfig:function(a){a=a||g;var b,c,d=this.config,e=d.modules,f=d.groups,h=d.rls,i=this.Env._loader;for(c in a)a.hasOwnProperty(c)&&(b=a[c],e&&c=="modules"?u(e,b):f&&c=="groups"?u(f,b):h&&c=="rls"?u(h,b):c=="win"?(d[c]=b.contentWindow||b,d.doc=d[c].document):c!="_yuid"&&(d[c]=b));i&&i._config(a)},_config:function(a){this.applyConfig(a)},_init:function(){var a,b=this,d=YUI.Env,f=b.Env,g;b.version=c;if(!f){b.Env={core:["get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"],mods:{},versions:{},base:e,cdn:e+c+"/build/",_idx:0,_used:{},_attached:{},_missed:[],_yidx:0,_uidx:0,_guidp:"y",_loaded:{},_BASE_RE:/(?:\?(?:[^&]*&)*([^&]*))?\b(simpleyui|yui(?:-\w+)?)\/\2(?:-(min|debug))?\.js/,parseBasePath:function(a,b){var c=a.match(b),d,e;return c&&(d=RegExp.leftContext||a.slice(0,a.indexOf(c[0])),e=c[3],c[1]&&(d+="?"+c[1]),d={filter:e,path:d}),d},getBase:d&&d.getBase||function(c){var d=l&&l.getElementsByTagName("script")||[],e=f.cdn,g,h,i,j;for(h=0,i=d.length;h<i;++h){j=d[h].src;if(j){g=b.Env.parseBasePath(j,c);if(g){a=g.filter,e=g.path;break}}}return e}},f=b.Env,f._loaded[c]={};if(d&&b!==YUI)f._yidx=++d._yidx,f._guidp=("yui_"+c+"_"+f._yidx+"_"+p).replace(/\./g,"_");else if(YUI._YUI){d=YUI._YUI.Env,f._yidx+=d._yidx,f._uidx+=d._uidx;for(g in d)g in f||(f[g]=d[g]);delete YUI._YUI}b.id=b.stamp(b),o[b.id]=b}b.constructor=YUI,b.config=b.config||{win:k,doc:l,debug:!0,useBrowserConsole:!0,throwFail:!0,bootstrap:!0,cacheUse:!0,fetchCSS:!0,use_rls:!1,rls_timeout:2e3},YUI.Env.rls_disabled&&(b.config.use_rls=!1),b.config.lang=b.config.lang||"en-US",b.config.base=YUI.config.base||b.Env.getBase(b.Env._BASE_RE);if(!a||!"mindebug".indexOf(a))a="min";a=a?"-"+a:a,b.config.loaderPath=YUI.config.loaderPath||"loader/loader"+a+".js"},_setup:function(a){var b,c=this,d=[],e=YUI.Env.mods,f=c.config.core||[].concat(YUI.Env.core);for(b=0;b<f.length;b++)e[f[b]]&&d.push(f[b]);c._attach(["yui-base"]),c._attach(d),c.Loader&&t(c)},applyTo:function(a,b,c){if(b in i){var d=o[a],e,f,g;if(d){e=b.split("."),f=d;for(g=0;g<e.length;g=g+1)f=f[e[g]],f||this.log("applyTo not found: "+b,"warn","yui");return f.apply(d,c)}return null}return this.log(b+": applyTo not allowed","warn","yui"),null},add:function(a,b,c,d){d=d||{};var e=YUI.Env,f={name:a,fn:b,version:c,details:d},g,h,i=e.versions;e.mods[a]=f,i[c]=i[c]||{},i[c][a]=f;for(h in o)o.hasOwnProperty(h)&&(g=o[h].Env._loader,g&&(g.moduleInfo[a]||g.addModule(d,a)));return this},_attach:function(a,b){var c,d,e,f,g,h,i,j=YUI.Env.mods,k=YUI.Env.aliases,l=this,m,n=l.Env._loader,o=l.Env._attached,p=a.length,n,q=[];for(c=0;c<p;c++)d=a[c],e=j[d],q.push(d),n&&n.conditions[d]&&l.Object.each(n.conditions[d],function(a){var b=a&&(a.ua&&l.UA[a.ua]||a.test&&a.test(l));b&&q.push(a.name)});a=q,p=a.length;for(c=0;c<p;c++)if(!o[a[c]]){d=a[c],e=j[d];if(k&&k[d]){l._attach(k[d]);continue}if(!e)n&&n.moduleInfo[d]&&(e=n.moduleInfo[d],b=!0),b||d.indexOf("skin-")===-1&&d.indexOf("css")===-1&&(l.Env._missed.push(d),l.Env._missed=l.Array.dedupe(l.Env._missed),l.message("NOT loaded: "+d,"warn","yui"));else{o[d]=!0;for(m=0;m<l.Env._missed.length;m++)l.Env._missed[m]===d&&(l.message("Found: "+d+" (was reported as missing earlier)","warn","yui"),l.Env._missed.splice(m,1));f=e.details,g=f.requires,h=f.use,i=f.after;if(g)for(m=0;m<g.length;m++)if(!o[g[m]]){if(!l._attach(g))return!1;break}if(i)for(m=0;m<i.length;m++)if(!o[i[m]]){if(!l._attach(i,!0))return!1;break}if(e.fn)try{e.fn(l,d)}catch(r){return l.error("Attach error: "+d,r,d),!1}if(h)for(m=0;m<h.length;m++)if(!o[h[m]]){if(!l._attach(h))return!1;break}}}return!0},use:function(){var a=h.call(arguments,0),b=a[a.length-1],c=this,d=0,e,f=c.Env,g=!0;c.Lang.isFunction(b)?a.pop():b=null,c.Lang.isArray(a[0])&&(a=a[0]);if(c.config.cacheUse){while(e=a[d++])if(!f._attached[e]){g=!1;break}if(g)return!a.length,c._notify(b,v,a),c}return c._loading?(c._useQueue=c._useQueue||new c.Queue,c._useQueue.add([a,b])):c._use(a,function(c,d){c._notify(b,d,a)}),c},_notify:function(a,b,c){if(!b.success&&this.config.loadErrorFn)this.config.loadErrorFn.call(this,this,a,b,c);else if(a)try{a(this,b)}catch(d){this.error("use callback error",d,c)}},_use:function(a,b){this.Array||this._attach(["yui-base"]);var d,e,f,g,h=this,i=YUI.Env,j=i.mods,k=h.Env,l=k._used,m=i._loaderQueue,n=a[0],o=h.Array,p=h.config,q=p.bootstrap,r=[],s=[],u=!0,v=p.fetchCSS,w=function(a,b){if(!a.length)return;o.each(a,function(a){b||s.push(a);if(l[a])return;var d=j[a],e,f;d?(l[a]=!0,e=d.details.requires,f=d.details.use):i._loaded[c][a]?l[a]=!0:r.push(a),e&&e.length&&w(e),f&&f.length&&w(f,1)})},x=function(c){var d=c||{success:!0,msg:"not dynamic"},e,f,g=!0,i=d.data;h._loading=!1,i&&(f=r,r=[],s=[],w(i),e=r.length,e&&r.sort().join()==f.sort().join()&&(e=!1)),e&&i?(h._loading=!1,h._use(a,function(){h._attach(i)&&h._notify(b,d,i)})):(i&&(g=h._attach(i)),g&&h._notify(b,d,a)),h._useQueue&&h._useQueue.size()&&!h._loading&&h._use.apply(h,h._useQueue.next())};return n==="*"?(u=h._attach(h.Object.keys(j)),u&&x(),h):(q&&h.Loader&&a.length&&(e=t(h),e.require(a),e.ignoreRegistered=!0,e.calculate(null,v?null:"js"),a=e.sorted),w(a),d=r.length,d&&(r=h.Object.keys(o.hash(r)),d=r.length,h.log("Modules missing: "+r+", "+r.length,"info","yui")),q&&d&&h.Loader?(h._loading=!0,e=t(h),e.onEnd=x,e.context=h,e.data=a,e.ignoreRegistered=!1,e.require(a),e.insert(null,v?null:"js")):d&&h.config.use_rls&&!YUI.Env.rls_enabled?(i._rls_queue=i._rls_queue||new h.Queue,g=function(a,b){var c=function(b){x(b),a.rls_advance()},d=a._rls(b);d?(a.rls_oncomplete(function(a){c(a)}),a.Get.script(d,{data:b,timeout:a.config.rls_timeout,onFailure:a.rls_handleFailure,onTimeout:a.rls_handleTimeout})):c({success:!0,data:b})},i._rls_queue.add(function(){i._rls_in_progress=!0,h.rls_callback=b,h.rls_locals(h,a,g)}),!i._rls_in_progress&&i._rls_queue.size()&&i._rls_queue.next()()):q&&d&&h.Get&&!k.bootstrapped?(h._loading=!0,f=function(){h._loading=!1,m.running=!1,k.bootstrapped=!0,i._bootstrapping=!1,h._attach(["loader"])&&h._use(a,b)},i._bootstrapping?(h.log("Waiting for loader","info","yui"),m.add(f)):(i._bootstrapping=!0,h.log("Fetching loader: "+p.base+p.loaderPath,"info","yui"),h.Get.script(p.base+p.loaderPath,{onEnd:f}))):(u=h._attach(a),u&&x()),h)},namespace:function(){var a=arguments,b=this,c=0,e,f,g;for(;c<a.length;c++){g=a[c];if(g.indexOf(d)){f=g.split(d);for(e=f[0]=="YAHOO"?1:0;e<f.length;e++)b[f[e]]=b[f[e]]||{},b=b[f[e]]}else b[g]=b[g]||{}}return b},log:g,message:g,dump:function(a){return""+a},error:function(a,b,c){var d=this,e;d.config.errorFn&&(e=d.config.errorFn.apply(d,arguments));if(d.config.throwFail&&!e)throw b||new Error(a);return d.message(a,"error"),d},guid:function(a){var b=this.Env._guidp+"_"+ ++this.Env._uidx;return a?a+b:b},stamp:function(a,b){var c;if(!a)return a;a.uniqueID&&a.nodeType&&a.nodeType!==9?c=a.uniqueID:c=typeof a=="string"?a:a._yuid;if(!c){c=this.guid();if(!b)try{a._yuid=c}catch(d){c=null}}return c},destroy:function(){var a=this;a.Event&&a.Event._unload(),delete o[a.id],delete a.Env,delete a.config}},YUI.prototype=a;for(b in a)a.hasOwnProperty(b)&&(YUI[b]=a[b]);YUI._init(),j?q(window,"load",s):s(),YUI.Env.add=q,YUI.Env.remove=r,typeof exports=="object"&&(exports.YUI=YUI)})(),YUI.add("yui-base",function(a){function m(a,b,c){var d,e;b||(b=0);if(c||m.test(a))try{return k.slice.call(a,b)}catch(f){e=[];for(d=a.length;b<d;++b)e.push(a[b]);return e}return[a]}function n(){this._init(),this.add.apply(this,arguments)}var b=a.Lang||(a.Lang={}),c=String.prototype,d=Object.prototype.toString,e={"undefined":"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},f=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g,g=/^\s+|\s+$/g,h=a.config.win,i=h&&(!!h.MooTools||!!h.Prototype);b.isArray=!i&&Array.isArray||function(a){return b.type(a)==="array"},b.isBoolean=function(a){return typeof a=="boolean"},b.isFunction=function(a){return b.type(a)==="function"},b.isDate=function(a){return b.type(a)==="date"&&a.toString()!=="Invalid Date"&&!isNaN(a)},b.isNull=function(a){return a===null},b.isNumber=function(a){return typeof a=="number"&&isFinite(a)},b.isObject=function(a,c){var d=typeof a;return a&&(d==="object"||!c&&(d==="function"||b.isFunction(a)))||!1},b.isString=function(a){return typeof a=="string"},b.isUndefined=function(a){return typeof a=="undefined"},b.trim=c.trim?function(a){return a&&a.trim?a.trim():a}:function(a){try{return a.replace(g,"")}catch(b){return a}},b.trimLeft=c.trimLeft?function(a){return a.trimLeft()}:function(a){return a.replace(/^\s+/,"")},b.trimRight=c.trimRight?function(a){return a.trimRight()}:function(a){return a.replace(/\s+$/,"")},b.isValue=function(a){var c=b.type(a);switch(c){case"number":return isFinite(a);case"null":case"undefined":return!1;default:return!!c}},b.type=function(a){return e[typeof a]||e[d.call(a)]||(a?"object":"null")},b.sub=function(a,c){return a.replace?a.replace(f,function(a,d){return b.isUndefined(c[d])?a:c[d]}):a},b.now=Date.now||function(){return(new Date).getTime()};var j=a.Lang,k=Array.prototype,l=Object.prototype.hasOwnProperty;a.Array=m,m.dedupe=function(a){var b={},c=[],d,e,f;for(d=0,f=a.length;d<f;++d)e=a[d],l.call(b,e)||(b[e]=1,c.push(e));return c},m.each=m.forEach=k.forEach?function(b,c,d){return k.forEach.call(b||[],c,d||a),a}:function(b,c,d){for(var e=0,f=b&&b.length||0;e<f;++e)e in b&&c.call(d||a,b[e],e,b);return a},m.hash=function(a,b){var c={},d=b&&b.length||0,e,f;for(e=0,f=a.length;e<f;++e)e in a&&(c[a[e]]=d>e&&e in b?b[e]:!0);return c},m.indexOf=k.indexOf?function(a,b){return k.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;++c)if(c in a&&a[c]===b)return c;return-1},m.numericSort=function(a,b){return a-b},m.some=k.some?function(a,b,c){return k.some.call(a,b,c)}:function(a,b,c){for(var d=0,e=a.length;d<e;++ 
```

可以在此页面的“新产品”部分查看正在做什么的示例。[http://www.palmmart.net/default.aspx](http://www.palmmart.net/default.aspx)

我也使用了中继器，它的速度也一样。

当我在没有 IIS 的 html 中打开它时，它工作得非常顺利，如下所示：http: [//palmmart.net/main.html](http://palmmart.net/main.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:28:52.733

从外观上看，您不仅没有使用 jQuery（您正在使用 YUI），而且看起来前端并不是您的问题。我的猜测是在服务器上连接一堆长字符串会大大降低您的网站速度。

尝试使用 a`StringBuilder`代替：

```
Dim sb As New System.Text.StringBuilder
Dim dt As DataTable = altharaaonline.DXNitems.GetAllDXNitems()
For i = 0 To dt.Rows.Count - 1
    sb.Append("huge long string")
Next

Literal1.Text = sb.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:34:05.193

您发布的代码不是 jQuery，而是 YUI。

YUI 是另一个 Javascript 库，它做了很多与 jQuery 相同的事情。您发布的 JS 代码是整个 YUI 库的源代码。

在您的网站上同时运行 YUI 和 jQuery 很好，但完全没有必要，而且可能会很慢。

最重要的是，当我加载您的页面时，我还看到您已经包含了原型库。这是*另一个*库，其功能与 jQuery 几乎相同。同样，在您的站点中有多个库在做同样的事情（并且可能相互冲突）是没有意义的。

然而，话虽如此，您网站上真正的性能问题根本不是 Javascript。这是您提供的大量海量图像。在浏览器中使用不错的开发工具包（例如 Chrome Dev Tools 或 Firefox 的 Firebug）打开您的页面，然后查看页面加载图表——您会发现您的一些图片需要 5、10 甚至 20 秒才能下载. 其中一些的大小超过一兆。难怪事情进展得如此缓慢。

这是你问题的很大一部分。解决这个问题，事情就会大大改善。

您还希望摆脱多个库 - 可能坚持使用 jQuery，但摆脱其他库。

您的代码也存在其他问题，但我会将这些问题留给一个单独的问题，或者我可能整晚都在这里输入这个答案。

# php - 将表格单元格内容添加到 PHP $_POST

> ID：10857270
> 
> 赞同：0
> 
> 时间：2012-06-01T21:01:03.007
> 
> 标签：php, html

据我了解，检索 $_POST 数据的唯一方法是使用`name`元素的属性，如下所示：

```
<INPUT type="text" name="txt"> 
```

和 PHP 部分：

```
<?php $text = $_POST["txt"]; ?> 
```

我有一个包含纯文本单元格的表格，例如：

```
<td class="textField" id="txt1"> Some text </td> 
```

有没有办法在这些表格单元格中发布文本并使用类或 id 检索它们？也许有一个聪明的方法来解决这个问题？`<td>`没有名称属性，因此是我提出问题的原因。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:15:35.823

您可以使用 ajax，使用 javascript 从表中获取值。JQuery 是一个很好的库：

[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:02:24.893

`$_POST`并`$_GET`来自请求。这意味着浏览器将它们与标头一起发送，PHP 为它们提供了一个接口，包括`$_POST`、`$_GET`、`$_COOKIE`和`$_REQUEST`。浏览器不会在请求中发送表的内容。

如果您试图将字段设置为“只读”，那么您将走错路。如果一个字段是只读的，你永远不应该相信浏览器会重新发送相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:14:09.490

要从许多具有相同名称的表单字段中检索值（因为您在 PHP 中使用循环生成它们），请在字段名称后附加括号。
简单的例子：

```
<form method="post">
<input type=text name="myfield[]">  
<input type=text name="myfield[]">  
<input type=text name="myfield[]">  
<input type=text name="myfield[]">  
</form> 
```

如果您添加到您的代码：

```
<?php print_r($_POST); ?> 
```

您会注意到 $_POST 变量填充了一个名为“myfield”的数组，该数组具有从 $_POST['myfield'][0] 到 $_POST['myfield'][3] 的 4 个值。然后，您可以在 PHP 中使用 foreach 循环来检索所有值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:15:21.170

最终为我工作的解决方案是使用 jQuery 获取数据，将其编码为 JSON，然后将其添加到其余表单数据的串行数组中。

```
$("#orderForm").submit(function(e) {
    e.preventDefault();

    // Get NON-INPUT table cell data
    var subtotal = new Array();
    $('#priceTable td.subtotal').each(function() {
        subtotal.push($(this).html());
    });

    // Get all INPUT form data and organize as array
    var formData = $(this).serializeArray();

    // Encode with JSON
    var subArray = JSON.stringify(subtotal);

    // Add to formData array
    formData.push({name: 'sub', value: subArray});

    // Submit with AJAX
    $.ajax({
        url: "submitOrder.php",
        data: formData,
        type: 'post',
        success: function(data) {
            alert(data);
        }
    });
}); 
```

在 PHP 方面：

```
$subtotals = json_decode($_POST['sub']); 
```

# javascript - 以毫秒 (UTC) 为单位获取当前日期（不使用字符串）

> ID：10857272
> 
> 赞同：23
> 
> 时间：2012-06-01T21:01:09.200
> 
> 标签：javascript, date, utc, milliseconds

好吧，你可能认为这个问题已经被问过了，但我认为它还没有。我读过的所有解决方案都有这种“拼图”技术（如`getUTCMonth() + getUTCMinutes + ...`）。但是因为我只想比较两个 UTC (!) 日期之间经过的秒数，所以这不适用。

众所周知，您可以通过以下方式获取当前（非 UTC）日期：

```
var d = new Date();
var t_millis = d.getTime(); 
```

但这不是我想要的。我希望以 UTC*和*毫秒为单位获得当前系统日期，所以根本不要乱用字符串。AFAIK 该变量`t_millis`将包含 GMT 中当前时间戳的毫秒值，而不是 UTC。（因为`d`也是在格林威治标准时间。*除非*getTime() 进行某种隐式时区转换，即在给出毫秒*之前*添加偏移量，但我从未在任何地方读到过）

那么除了将偏移量添加到时间值之外，真的没有其他方法了吗？我非常想念`getUTCTimeMillis()`其他语言中已知的功能。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-12-06T02:09:12.083

This is an old question but for the sake of the new visitors here is **THE CORRECT ANSWER**:

```
Date.now(); 
```

It returns the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-01T21:09:10.007

无论您所在的时区如何，时间的毫秒值都将是相同的。也就是说，地球上没有任何时区彼此相差大于零的毫秒数。（它们可能相差整数小时甚至分钟，但不是秒或毫秒。）

也就是说，您返回的值`getTime()` *是*相对于 UTC 的时间戳。如果地球上不同地点的两个 Web 浏览器同时创建一个 Date 对象，它们都会从中获得相同的值`.getTime()`（假设时钟是同步的，这当然是极不可能的）。

这里：1338585185539 ​​这是我刚刚从浏览器获得的时间戳。我在德克萨斯州的奥斯汀，现在是下午 4 点 13 分（所以时间戳会稍微早一点）。将其插入您机器上的 Date 实例中，然后查看它的内容。

（*编辑*——为了后代的缘故，那个时间戳是从 2012 年 6 月 1 日开始的。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-03T17:12:25.357

怎么样：

```
var now = new Date();
var utc_now = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),  now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());
console.log('UTC: ' + utc_now) // correct UTC time but wrong timezone!
console.log('UTC (in ms): ' + utc_now.getTime()) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-09T15:23:44.323

我已经使用这个功能来解决这个问题。

```
function getUTCNow()
{
    var now = new Date();
    var time = now.getTime();
    var offset = now.getTimezoneOffset();
    offset = offset * 60000;
    return time - offset;
} 
```

*   getTime 函数返回自客户端时区 1970 年 1 月 1 日 00:00:00 以来经过的毫秒数。
*   getTimezoneOffset 以分钟为单位返回客户端时区和 UTC 之间的偏移量。
*   偏移量 = 偏移量 * 60000；此操作以毫秒为单位转换分钟。
*   减去偏移量得到自 1970 年 1 月 1 日 00:00:00 UTC 以来经过的毫秒数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-02T23:31:11.110

要从 UTC 日期获取时间戳，您需要考虑该日期的时区和夏令时。例如，1 月或 7 月的日期可能意味着 1 小时的差异。

下面的选项就是这样做的。

```
Date.prototype.getUTCTime = function () {
    return this.getTime() - (this.getTimezoneOffset() * 60000);
}; 
```

它可以用于：

```
var date = new Date();
var timestamp = date.getUTCTime(); 
```

# linux - Linux X86-64 汇编和 printf

> ID：10857273
> 
> 赞同：4
> 
> 时间：2012-06-01T21:01:23.327
> 
> 标签：linux, assembly, x86-64, binary-data

我正在阅读一些 linux 汇编手册，并找到了有关使用 printf() 函数的想法。我需要它以二进制形式将寄存器值以二进制形式输出到终端，但现在我只是尝试用文本测试该函数。

我被卡住了，因为当我使用 pushq 而不是 pushl 时出现段错误。如何更改此程序以输出字符串和二进制形式的寄存器？

```
.data
input_prompt:
    .string "Hello, world!"

printf_format:
    .string "%5d "

printf_newline:
    .string "\n"

size:
    .long 0

.text
.globl main
main:
    pushq $input_prompt
    call  printf

    movl  $0, %eax
    ret 
```

它由 GCC 编译为：

```
gcc tmp.S -o tmp 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T21:03:58.063

Linux（和 Windows）[x86-64 调用约定](http://x86-64.org/documentation/abi.pdf)的前几个参数*不在*堆栈中，而是在寄存器中

请参阅[http://www.x86-64.org/documentation/abi.pdf](http://www.x86-64.org/documentation/abi.pdf)（第 20 页）

具体来说：

> 1.  如果类是 MEMORY，则在堆栈上传递参数。
> 2.  如果类是 INTEGER，则使用序列 %rdi、%rsi、%rdx、%rcx、%r8 和 %r9 的下一个可用寄存器。
> 3.  如果类是 SSE，则使用下一个可用向量寄存器，寄存器按从 %xmm0 到 %xmm7 的顺序获取。
> 4.  如果类是 SSEUP，则在最后使用的向量寄存器的下一个可用的八字节块中传递八字节。
> 5.  如果类是 X87、X87UP 或 COMPLEX_X87，则在内存中传递。

该类`INTEGER`是适合通用寄存器的任何内容，因此您也可以将其用于字符串指针。

# android - 何时使用 Android 活动？

> ID：10857283
> 
> 赞同：1
> 
> 时间：2012-06-01T21:01:50.187
> 
> 标签：android, android-activity, android-intent

我是 Android 开发的新手，所以我不知道正确的编码范例。我正在创建一个资金管理应用程序，到目前为止，我有一个运行应用程序所有不同屏幕的主/启动器活动：加载、菜单、人员等。

我应该为每个屏幕创建一个单独的活动吗？在一个应用程序中使用较小的活动有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:07:19.847

> 我应该为每个屏幕创建一个单独的活动吗？

至少在手机上，可能是的。

> 在一个应用程序中使用较小的活动有什么好处？

否则你会用完屏幕空间。

现在，您可能希望考虑将您的 UI 组织成片段，以便一个屏幕较大的设备，一个活动可以加载几个片段，以充分利用空间，同时保持“每个活动一个片段”模型- 屏幕设备，如手机：

![在此处输入图像描述](../Images/161ad52d136b4f9c565ca0a6b0a3655f.png)

# android - 阅读照片时Android权限被拒绝

> ID：10857284
> 
> 赞同：0
> 
> 时间：2012-06-01T21:01:55.167
> 
> 标签：android, gallery, photos, permission-denied

我正在尝试从 Android 设备图库中读取照片以显示在我的应用中。

我的应用程序允许用户从图库中选择图像，并且 onActivityResult() 方法中的此代码保存文件名以供以后使用：

```
if (resultCode == Activity.RESULT_OK) {
      String[] filePathColumn = {MediaStore.Images.Media.DATA};

      Cursor cursor = getActivity().getContentResolver().query(data.getData(), filePathColumn, null, null, null);
      cursor.moveToFirst();

      int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
      String filename = cursor.getString(columnIndex);
      cursor.close();
} 
```

然后我稍后尝试在另一个活动中显示照片，如下所示：

```
 ImageView photoImageView = (ImageView) itemView.findViewById(R.id.photoImageView);
  Uri uri = Uri.fromFile(new File(photoFilename));
  Log.i("AddInformationDialog", "URI found: " + uri);
  photoImageView.setImageURI(uri) 
```

但是我收到了这个 Permission Denied 错误：

```
WARN/ImageView(14618): Unable to open content: file:///mnt/sdcard/dcim/Camera/2012-05-31_09-37-03_660.jpg
    java.io.FileNotFoundException: /mnt/sdcard/dcim/Camera/2012-05-31_09-37-03_660.jpg (Permission denied)
    at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method) 
```

我查看了清单权限，并没有看到明确允许应用程序从文件系统读取的权限。我错过了什么？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:37:35.440

**改写**

我无法重新创建您的错误，可能是 Droid Bionic 特定问题。我能想到的唯一事情是：该文件不允许读取访问，或者它有一个锁定阻止读取。这是在黑暗中拍摄的：

```
 ImageView photoImageView = (ImageView) itemView.findViewById(R.id.photoImageView);
  File file = new File(photoFilename);
  file.setReadable(true);
  Uri uri = Uri.fromFile(file);
  Log.i("AddInformationDialog", "URI found: " + uri);
  photoImageView.setImageURI(uri); 
```

# jquery - jQuery 的 preventDefault() 是否适用于表单的提交事件？

> ID：10857288
> 
> 赞同：0
> 
> 时间：2012-06-01T21:01:59.893
> 
> 标签：jquery

我有这样的表格：

```
<form method="post" action="/WebApp/forgotpassword" id="forgot-password">
    <input type="email" name="email" id="email">
    <input type="submit" value="Submit" id="submitBtn">
</form> 
```

使用以下 jQuery 1.7.2 代码：

```
$('form#forgot-password').on('submit', function(e) {
    console.debug('Form submit');
    e.preventDefault();
    return false;
}); 
```

果然，我点击了Submit按钮，然后在控制台中打印出“Form submit”。但是，浏览器（在我的例子中是 Firefox）仍然重定向到 /WebApp/forgotpassword 处的服务返回的 JSON。

我还没有看到任何其他问题似乎表明 jQuery 已损坏，所以我认为我使用错了。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:30:35.693

谢谢你的回答。他们完全正确。这个问题是技术债务的一个很好的例子：

系统远端的某个人直接绑定到所有按钮的点击事件，做了一些手动的 JS 表单验证，然后手动提交父表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:11:29.667

是的 preventDefault 将停止事件，您可能还想调用 stopPropagation 。

# image - 如何使用 codeigniter 和 sql server 2005 数据库从图像数据类型创建缩略图？

> ID：10857297
> 
> 赞同：0
> 
> 时间：2012-06-01T21:02:39.533
> 
> 标签：image, sql-server-2005, codeigniter, thumbnails

我正在使用最新的 codeigniter 框架和 SQL Server 2005 开发 Web 应用程序。在我的数据库中，我有一个表，其中包含一个带有图像数据类型的列。从[这里](https://stackoverflow.com/questions/2630711/help-reading-binary-image-data-from-sql-server-into-php)我知道如何用这个来检索该图像：

```
$q = "Get_Picture_Test_SP @pk_rms_id=1443546";
$res = mssql_query($q);

$row = mssql_fetch_assoc($res);

$image = $row['picture'];

function hex2bin($h)
{
    if (!is_string($h)) return null;
    $r='';
    for ($a=0; $a<strlen($h); $a+=2) { $r.=chr(hexdec($h{$a}.$h{($a+1)})); }
    return $r;
 }

$image = hex2bin($image); 
```

我想知道的是如何从该图像中制作缩略图以使网页加载更快？如果我使用来自某个路径的图像，我知道如何制作缩略图（希望我没有错）：

```
$config['image_library'] = 'gd2';
$config['source_image'] = '/path/to/image/mypic.jpg';
$config['create_thumb'] = TRUE;
$config['maintain_ratio'] = TRUE;
$config['width']     = 75;
$config['height']   = 50;

$this->load->library('image_lib', $config); 

 $this->image_lib->resize(); 
```

我仍然不知道如何从图像数据类型创建缩略图。希望任何人都可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:03:33.727

```
$this->load->library('image_lib');

$config['image_library'] = 'gd2';
$config['source_image'] = '/path/to/image/mypic.jpg';
$config['create_thumb'] = TRUE;
$config['maintain_ratio'] = TRUE;
$config['width']     = 75;
$config['height']   = 50;

$this->image_lib->initialize($config);

if ( ! $this->image_lib->resize())
{
    echo $this->image_lib->display_errors();
} 
```

在您的代码中，您忘记初始化配置..所以请使用此代码确保图像路径正确..希望这会起作用。

# android - 无法在 OpenCV Android 示例中链接本机库

> ID：10857301
> 
> 赞同：12
> 
> 时间：2012-06-01T21:03:07.053
> 
> 标签：android, opencv, android-ndk

我有 OpenCV 代码 (c++)，我想在 Android 中使用它。为此，我必须使用[Android NDK](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html)。我下载[了用于 Android 开发的 OpenCV 包](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/)（版本 2.4.0）并按照该手册执行了所有步骤。基本示例（仅限 Java API）运行没有问题。示例 #3 *（教程 3（高级）- 添加本机 OpenCV）*从 ndk-builder 正确构建。但是当我尝试从 eclipse 在设备上运行/调试它时总是出现异常：

```
Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lorg/opencv/samples/tutorial3/Sample3View; 
```

在这一行：

```
System.loadLibrary("native_sample"); 
```

这是完整的 logcat 日志：

```
05-31 23:41:45.976: W/ActivityThread(9708): Application org.opencv.samples.tutorial3 is waiting for the debugger on port 8100...
05-31 23:41:45.983: I/System.out(9708): Sending WAIT chunk
05-31 23:41:45.983: I/dalvikvm(9708): Debugger is active
05-31 23:41:46.179: I/System.out(9708): Debugger has connected
05-31 23:41:46.179: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:46.382: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:46.585: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:46.788: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:46.983: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:47.186: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:47.389: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:47.585: I/System.out(9708): waiting for debugger to settle...
05-31 23:41:47.788: I/System.out(9708): debugger has settled (1463)
05-31 23:41:47.819: D/szipinf(9708): Initializing inflate state
05-31 23:41:47.866: I/Sample::Activity(9708): Instantiated new class org.opencv.samples.tutorial3.Sample3Native
05-31 23:41:48.909: D/dalvikvm(9708): threadid=1: still suspended after undo (sc=1 dc=1)
05-31 23:41:51.770: I/Sample::Activity(9708): onCreate
05-31 23:41:59.283: W/dalvikvm(9708): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lorg/opencv/samples/tutorial3/Sample3View;
05-31 23:42:01.965: D/AndroidRuntime(9708): Shutting down VM
05-31 23:42:01.965: W/dalvikvm(9708): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-31 23:42:01.999: E/AndroidRuntime(9708): FATAL EXCEPTION: main
05-31 23:42:01.999: E/AndroidRuntime(9708): java.lang.ExceptionInInitializerError
05-31 23:42:01.999: E/AndroidRuntime(9708):     at org.opencv.samples.tutorial3.Sample3Native.onCreate(Sample3Native.java:21)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.os.Looper.loop(Looper.java:130)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at android.app.ActivityThread.main(ActivityThread.java:3835)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at java.lang.reflect.Method.invokeNative(Native Method)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at java.lang.reflect.Method.invoke(Method.java:507)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at dalvik.system.NativeStart.main(Native Method)
05-31 23:42:01.999: E/AndroidRuntime(9708): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load native_sample: findLibrary returned null
05-31 23:42:01.999: E/AndroidRuntime(9708):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at java.lang.System.loadLibrary(System.java:554)
05-31 23:42:01.999: E/AndroidRuntime(9708):     at org.opencv.samples.tutorial3.Sample3View.<clinit>(Sample3View.java:48)
05-31 23:42:01.999: E/AndroidRuntime(9708):     ... 14 more 
```

我找到了相同问题的解决方案，但没有一个对我没有帮助：

1.  [适用于 Android 的本机 OpenCV 示例引发 UnsatisfiedLinkError](https://stackoverflow.com/questions/7645301/native-opencv-samples-for-android-throws-unsatisfiedlinkerror)
2.  [java.lang.UnsatisfiedLinkError：无法加载 opencv_java：findLibrary 返回 null](https://groups.google.com/forum/?fromgroups#!topic/android-opencv/NpnKPVdwzJ4)
3.  [适用于 Windows 的主要 OpenCV-Android 安装和运行问题](https://groups.google.com/forum/?fromgroups#!topic/android-opencv/OPgSzWRxBXo)（无答案）

我还在不同的设备和 Android API 版本上对其进行了测试。

我的系统配置：

```
astor@astor-K42Jv:~$ uname -a
Linux astor-K42Jv 3.2.0-24-generic-pae #39-Ubuntu SMP Mon May 21 18:54:21 UTC 2012 i686 i686 i386 GNU/Linux 
```

* * *

我已经尝试解决这个问题 4 晚（这是我的空闲时间:)），但没有运气。我的论文真的需要这个，所以任何帮助都将不胜感激。

* * *

**更新：**我已经在 Windows 7 (64) 上测试了这个样本，但结果是一样的。

看来这是 OpenCV 错误。

* * *

**更新：**构建日志：

```
astor@astor-K42Jv:/opt/eclipse-android/workspace/OpenCV-2.4.0-samples/tutorial-3-native$ ndk-build 
Install        : libnative_camera_r2.2.0.so => libs/armeabi-v7a/libnative_camera_r2.2.0.so
Install        : libnative_camera_r2.3.3.so => libs/armeabi-v7a/libnative_camera_r2.3.3.so
Install        : libnative_camera_r3.0.1.so => libs/armeabi-v7a/libnative_camera_r3.0.1.so
Install        : libnative_camera_r4.0.0.so => libs/armeabi-v7a/libnative_camera_r4.0.0.so
Install        : libnative_camera_r4.0.3.so => libs/armeabi-v7a/libnative_camera_r4.0.3.so
Install        : libnative_sample.so => libs/armeabi-v7a/libnative_sample.so 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-03T09:44:47.933

哇哦！

最后我自己找到了解决这个问题的方法！

我决定调试行：

```
System.loadLibrary("native_sample"); 
```

为此，我从 Android-SDK 下载了 android 源代码，然后将源文件夹*(/opt/android-sdk-linux/sources/android-15)*附加到我的项目中。在此之后，我发现错误是：

```
Cannot load library: link_image[1936]:    37 could not load needed library 'libopencv_java.so' for 'libhello-jni.so' (load_library[1091]: Library 'libopencv_java.so' not found) 
```

实际上这个库不在`lib`目录中。我不知道为什么，但`ndk-build`忽略了它。所以我决定手动复制和加载它。为此，我复制`libopencv_java.so`并`/opt/OpenCV-2.4.0/libs/armeabi-v7a`编辑了 java 代码：

```
static {
    System.loadLibrary("opencv_java"); //load opencv_java lib
    System.loadLibrary("native_sample");
} 
```

实际上类似的问题是：

1.  [无法在必需品中加载 Opencv 库](https://stackoverflow.com/questions/9491799/can-not-load-opencv-libraries-in-necessitas)
2.  [Android OpenCV：无法打开相机包装库](https://stackoverflow.com/questions/9958549/android-opencv-cannot-dlopen-camera-wrapper-library)

从第二个解决方案中，我发现我可以使用[dlopen](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlopen.html)加载库，但我还没有尝试过。

因此，我将编写简单的 bash 脚本来为自己完成（只是复制）。

谢谢大家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-15T02:52:01.630

而不是将您的本机库加载为

```
static{
    System.loadLibrary("YOUR_LIBRARY");
} 
```

在“BaseLoaderCallBack”中的“onManagerConnected”方法连接opencv管理器后加载库。以下是我为我工作的代码片段

```
public void onManagerConnected(int status) {
                switch(status){
                case LoaderCallbackInterface.SUCCESS:
                    Toast.makeText(getApplicationContext(), "manager connected", Toast.LENGTH_LONG).show();
                    System.loadLibrary("MYNATIVELIB");
                    break;
                default:
                    super.onManagerConnected(status);
                    break;
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:15:43.457

您比实际问题处于更高的水平。运行时请参阅[“NDK 入门”](http://developer.android.com/sdk/ndk/index.html)

```
 cd <project>
    <ndk>/ndk-build 
```

... 它说什么？（记住使用 cygwin 窗口而不是 dos 提示符）。

# python-3.x - 返回插入换行符的字符串

> ID：10857304
> 
> 赞同：0
> 
> 时间：2012-06-01T21:03:39.177
> 
> 标签：python-3.x

我有一个函数可以返回另一个文件提取并使用的 HTML 代码。但是，代码是在一大段中返回的，我需要将它分成适当的行。这很容易打印，但我需要以这种方式返回它以便下一个文件提取它。

现在输出：

`'<abbr title = 6 style="font-size: 800%">spam</abbr> &nbsp; &nbsp;<abbr title = 5 style="font-size: 800%">page</abbr> &nbsp; &nbsp;<abbr title = 4 style="font-size: 800%">penguin</abbr> &nbsp; &nbsp;<abbr title = 2 style="font-size: 800%">stem</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">has</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">love</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">these</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">spamming</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">spammer</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">your</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">webpage</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">program</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">stemming</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">stemmer</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">were</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 800%">word</abbr> &nbsp; &nbsp;<abbr title = 1 style="font-size: 1600.0%">by</abbr> &nbsp; &nbsp;'`

期望的输出：

`<abbr title = 6 style="font-size: 800%">spam</abbr> &nbsp; &nbsp;`

`<abbr title = 5 style="font-size: 800%">page</abbr> &nbsp; &nbsp;`

`<abbr title = 4 style="font-size: 800%">penguin</abbr> &nbsp; &nbsp;`

ETC.....

这是我正在使用的功能：

```
def mtcURL(URL):
a = getURL(URL)
COUNT = a[0]
WORD = a[1]
NUMBER = 800
i = 0
all_lines = ""

while i < len(a[1]):
    if i == len(COUNT)-1:
        ratio = COUNT[i] / 2
        NUMBER = NUMBER / (ratio)
    else:
        try:
            ratio = COUNT[i]/COUNT[i+1]
        except IndexError:
            pass
    first = '<abbr title = '
    second = 'style="font-size: '
    third = '%">'
    fourth = '</abbr> &nbsp; &nbsp;'
    htmlLine = first + str(COUNT[i])+ ' ' + second + str(NUMBER)+ third + WORD[i] + fourth    
    all_lines += htmlLine
    i += 1
return all_lines 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:09:02.733

利用，

```
all_lines = all_lines + htmlLine + "\n" 
```

# c# - TreeView 不会填充

> ID：10857306
> 
> 赞同：0
> 
> 时间：2012-06-01T21:03:43.493
> 
> 标签：c#, winforms, treeview

我得到了一个不会填充的树视图，当我添加节点时，它们不会显示在 UI 中，但它们在对象中，当我在 Visual Studio 中设置它们显示的节点时，

我尝试了一切

```
TreeView.Refresh();
TreeView.BeginUpdate();
TreeView.Focus(); 
```

我对此感到恼火，我曾多次使用 TreeView 但这从未发生过？

更新：

我使用以下代码添加节点：

```
PathSelectTree.Nodes.Add("hello?"); 
```

更新 2：

当我之前添加节点时

```
InitializeComponent(); 
```

有用...

更新 3：

添加节点在表单加载事件中，但我也尝试了按钮单击事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:56:56.607

检查没有 EndUpdate的`Treeview.BeginUpdate`内部。`Initializecomponent`

尝试也打电话`TreeView.EndUpdate()`，只是为了确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:40:52.247

好吧，伙计们，对不起，浪费了你们的时间，

我曾有一个

```
初始化组件
```

在我的构造函数和表单加载事件中，

我真的很抱歉，

# javascript - phonegap 应用程序中的用户配置文件

> ID：10857307
> 
> 赞同：0
> 
> 时间：2012-06-01T21:03:45.833
> 
> 标签：javascript, ios, cordova

我正在计划使用 html/js 和 phonegap 开发 iPhone 应用程序。我计划拥有用户个人资料以及一个“朋友”提要，以吸引您的朋友所做的操作。

是否可以合并用户配置文件？我是否必须有一个非移动版网站供用户登录并在其个人资料中输入内容，然后使用 JSON 之类的东西从用户个人资料中提取数据并在应用程序中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:07:42.620

是的，您实际上可以将数据存储在本地数据库中，还可以使用 ajax 同步（发送和接收）数据。你当然需要一个管理主数据库的网络服务器。我不确定，但我认为您必须将服务器的域列入白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:08:11.593

事实上，您必须提供一些服务器端存储来保存用户配置文件、历史记录和/或操作

iPhone 应用程序将由您将实现的服务器端接口提供数据

# php - 使用 DateTime::CreateFromFormat 在 php 中将日期时间转换为字符串

> ID：10857311
> 
> 赞同：0
> 
> 时间：2012-06-01T21:04:05.430
> 
> 标签：php, datetime

```
$expdate2 = "06/01/2012";
$time = '6 months';

$expdate2 = date_create($expdate2);
date_add($expdate2, date_interval_create_from_date_string($time));
$expdate = DateTime::createFromFormat("m/d/Y", $expdate2);
$expdate = $expdate->format('m/d/Y'); 
```

我的日期添加工作正常，但我需要将日期恢复为字符串。基本上我从字符串 06/01/2012 开始，我也想添加不同数量的月份。Php.net 说要使用`DateTime::createFromForma`t 但我收到错误，

> PHP 警告：DateTime::createFromFormat() 期望参数 2 为字符串，PHP 中给出的对象 致命错误：调用非对象中的成员函数 format()

当我尝试将参数 2 转换回字符串时，参数 2 如何成为字符串？

# c++ - 是否有任何语言接近 C/C++ 但易于自动并行化？

> ID：10857313
> 
> 赞同：0
> 
> 时间：2012-06-01T21:04:12.123
> 
> 标签：c++, c, parallel-processing, fortran

这来自[关于自动并行化的维基百科文章](http://en.wikipedia.org/wiki/Automatic_parallelization)

> 由于以下原因[2]，编译器或工具的自动并行化非常困难：
> 
> 1.  使用间接寻址、指针、递归和间接函数调用的代码很难进行依赖性分析；
>     
>     
> 2.  循环的迭代次数未知；
>     
>     
> 3.  对全局资源的访问在内存分配、I/O 和共享变量方面很难协调。

如您所见，第一点的问题主要与编程语言有关。在 C/C++ 中，您会遇到第 1 点中提到的所有问题。所以我的问题是，我们是否有一种接近 C/C++ 但没有这些问题的语言。我知道 Fortran 可以满足要求，但它甚至不像 C/C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:10:26.827

有几个标准介绍了 C 和 C++ 中的并行化语法。一个例子是[Unified Parallel C](http://en.wikipedia.org/wiki/Unified_Parallel_C)，另一个是[openCL](http://en.wikipedia.org/wiki/OpenCL)，两者的用途截然不同。

可能最符合您要求的是[OpenMP](http://en.wikipedia.org/wiki/OpenMP)。它扩展了 C 和 C++ 语言，因此您可以告诉编译器并行化您的代码（以及在哪里执行）。

函数式编程语言（例如 Lisp、Haskell 和 F#）本质上是高度可自动并行化的，但也与 C 和 C++ 等过程和 OOP 语言有很大不同

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T21:28:25.980

FORTRAN 有一些独特的功能（可能最好描述为缺乏功能），这些功能允许干净、自动的并行化；然而，随着最近对 FORTRAN 的所有添加，尚不清楚该语言的现代等价物是否保持这种区别。

就逻辑结构而言，与 C 和 C++ 相比，FORTRAN 并没有走得太远。然而，为了处理复杂的数据结构，FORTRAN 的根倾向于跨多个关联数组存储结构，然后使用特定字段作为“下一个”索引。这避免了指针，但提供了类似的灵活性。

当我更多地使用该语言时，我已经看到了哈希表、树和其他结构的 FORTRAN 实现；但是，它肯定不是为了简单地表示这样而编写的，而且我想这样的代码很难并行化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:32:41.767

如果您在 GPU 上寻找并行化

有微软的[AMP](http://techreport.com/discussions.x/21134 "安培")

PGI 编译器和未来更多的编译器将支持 openmp，如[Open ACC](http://www.openacc-standard.org/%20%22Open%20ACC)

Caps 还发布了另一个类似 openMP 的编译器，称为[HMPP](http://www.caps-entreprise.com/hmpp.html)

# c# - 安全性 WCF 配置不起作用：抛出安全令牌请求包含无效或格式错误的元素

> ID：10857317
> 
> 赞同：0
> 
> 时间：2012-06-01T21:04:19.690
> 
> 标签：c#, xml, asp.net-mvc, wcf, config

我认为我的配置有问题。我正在尝试获得包含在 IIS 中的受密码保护的安全性（尚未实现），但我遇到了各种异常。这次我收到了一个安全令牌无效或格式错误的元素异常。这是我的配置：

主持人：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
      <binding name ="WSHttpBinding_ISVC1">
        <security mode="Message">
          <message clientCredentialType="UserName" establishSecurityContext="false"/>
        </security>
      </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SVCBehaviors">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="blahblah.SVCValidator, TrademarkGlobal.Web"/>
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="blahblah.SVC"
         behaviorConfiguration="SVCBehaviors">
        <endpoint address="" binding="wsHttpBinding"
   contract="blahblah.ISVC" name="WSHttpBinding_ISVC1"/>
        <endpoint contract="IMetadataExchange"
           binding="mexHttpBinding" address="mex"/>
      </service>
    </services>
  </system.serviceModel>
</configuration>

CLIENT: 
   <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_ISVC1">
          <security mode="Message">
            <message clientCredentialType="UserName" establishSecurityContext="false"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:64609/SVC.svc" binding="wsHttpBinding"
          bindingConfiguration="WSHttpBinding_ISVC1" contract="ISVC">
      </endpoint>
    </client>
  </system.serviceModel> 
```

SVC 文件 (svc.svc):

```
<%@ServiceHost Service="blahblah.SVC" %> 
```

服务（SVC 和 ISVC）现在只返回一个基本字符串。

SVCVALIDATOR.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ServiceModel;
using System.IdentityModel.Selectors;
public class SVCValidator : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {
        if (userName == null || password == null)
        {
            throw new ArgumentNullException();
        }
        if (userName != "gooduser" && password != "goodpass")
        {
            throw new Exception("Incorrect Username or Password");
        }
    }
} 
```

用于运行的控制器操作：

```
 public class SVCController : Controller
{
    public ActionResult Index(string user = "bad", string pass = "bad")
    {
        using (SVCClient client = new SVCClient())
        {
        //SVCClient client = new SVCClient("WSHttpBinding_ISVC");
        client.ClientCredentials.UserName.UserName = user;
        client.ClientCredentials.UserName.Password = pass;
        ViewBag.Message = client.Test();
        return View("RunningSVC");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T02:34:14.730

您不要在服务器中使用绑定配置。

您的配置有一个名称：

```
 <bindings>
      <wsHttpBinding>
      <binding name ="WSHttpBinding_ISVC1">
        <security mode="Message">
          <message clientCredentialType="UserName" establishSecurityContext="false"/>
        </security>
      </binding>
      </wsHttpBinding>
    </bindings> 
```

但 Endpoint 并未引用该配置名称。正确的端点应该是：

```
 <endpoint address="" binding="wsHttpBinding"
   contract="blahblah.ISVC" name="WSHttpBinding_ISVC1" bindingConfiguration="WSHttpBinding_ISVC1" /> 
```

请让我知道这是否解决了问题。

# wcf - 如何让 WCF Data Contract Serializer 相信 WSDL 是 doc/lit/wrapped

> ID：10857318
> 
> 赞同：0
> 
> 时间：2012-06-01T21:04:19.620
> 
> 标签：wcf, svcutil.exe, contract-first

我尝试按照[http://blogs.msdn.com/b/donsmith/archive/2006/10/06/handcrafting-wcf_2d00_friendly-wsdls.aspx](http://blogs.msdn.com/b/donsmith/archive/2006/10/06/handcrafting-wcf_2d00_friendly-wsdls.aspx)的指导来创建 WCF svcutil 将相信的 WSDL文档/文字包装格式。这样做时，svcutil 应该在 C# 中生成一个服务接口和代理代码，该代码使用数据协定序列化程序，以及包装器操作上的 OperationContractAttributes。相反，我得到了一个奇怪的双重包装，其中 BlahResponse1 类嵌套在 BlahResponse 类中，svcutil 告诉我 WSDL 没有包装，它将创建 MessageContracts 而不是 OperationContracts。

为了服务使用者的代码可读性，我想去掉 BlahResponse1 类，并让 svcutil 相信 WSDL 已包装。如何做到这一点？也许还有，一个人怎么不*这样*做？

我已经看到建议在架构中的一些但不是所有元素上设置 nillable="true" ，这些元素将成为数据合同。哪个应该是可空的，为什么？是否需要有不可为 nillable 的元素，设置 nillable="true" 是不好的？

如上面的链接所示，我尝试将架构划分为两个命名空间，但这似乎不起作用（或者被另一个问题掩盖了）。关于模式命名空间、导入与包含以及声明顺序有什么重要的吗？

我会包括模式/WSDL，但它们是专有的。此外，非常大并且分布在许多文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:38:08.517

XMLSpy 使用默认名称“参数”创建消息部分。这几乎是 .NET svcutil.exe 自动生成数据合约和操作合约所需的。Svcutil.exe 需要将所有消息部分命名为“参数”（注意末尾添加的“s”）。

# objective-c - 纯文本文件作为 iOS 中只有几个值的配置文件有什么缺点？

> ID：10857319
> 
> 赞同：1
> 
> 时间：2012-06-01T21:04:24.500
> 
> 标签：objective-c, xml, database, plist

为什么要使用 plists 和 xml 文件？如果我只想存储几个值，可以使用纯文本文件还是违反 Objective-C 最佳实践？

- - - -编辑 - - - -

我不确定这是否应该放在单独的帖子中，所以我将它放在这里......

如果我正在制作一个应用程序，用户可以在其中设计纸杯蛋糕并将其保存为他们的偏好（颜色、味道、大小），我应该使用哪种方法。我想我的用户不会做出数百种设计，但有些人不可避免地会做出大量设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:07:05.920

我会说这很好，但是考虑到它们使读取 plist 文件变得多么容易，我的问题是为什么要打扰？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:11:22.890

常用 plist 的主要原因是原生 API 可以轻松处理这些。您可以使用一个命令直接从 plist 加载 NSArray/NSDictionary。

当您将有许多相似数据出现时，将使用 SQL 数据库。例如，如果您需要记录社交应用程序的联系人，您将使用包含 id、姓名、年龄、性别、电话号码、电子邮件等的数据库。

除此之外，还有自定义二进制格式，但这些格式专门用于正在处理的任何项目。根据您需要完成的工作，文本文件可能适合您，但可能会有更好的答案。使用文本文件没有任何问题，但这些并不常用，因为您必须编写自己的方法来解析它们。真的，在我告诉你哪个选项最好之前，我需要更多地了解你将存储什么类型的数据。

回答您的编辑的编辑：

为此，最好的办法是使用 SQL 数据库，因为每个纸杯蛋糕都将具有各种属性，例如名称、使用的蛋糕混合物类型、糖霜类型、糖霜颜色、洒是/否等. 这对于 SQL 数据库来说是完美的，因为 dbs 具有命名列（即“name”、“mixType”等），并且表中的每一行对于这些列中的每一个都有不同的值。

这也可以用 plist 来实现，但效率不高，而且会使用更多磁盘空间（尽管如果您只是将它用于纸杯蛋糕，则不会太多）。我假设你有一个 Cupcake 类，所以你可以像这样实现一个加载函数：

```
+(id)cupcakeWithContentsOfFile:(NSString*)file {
    if((self = [super init])) {
        NSDictionary* plist = [NSDictionary dictionaryWithContentsOfFile:file];
        self.flavor = [plist objectForKey:@"flavor"];
        // Etc.
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T21:18:21.790

这是个有趣的问题。我实际上有一个应用程序确实使用简单的文本文件来存储应用程序使用的数据。因为原始代码来自一个windows/mac程序，又想保持数据文件一致，所以windows不提供pfile类型的操作。我在 windows 上编写了所有代码以读取文件，并且由于它都是 ANSI-C，因此可以很好地传输到 MacOS X。

将其移植到 iPhone 和 iPad 上时，移植代码仍然很容易，不仅将数据文件重写为 PList 格式，而且还重写了 PList 读取代码。

对于我从头开始的所有未绑定 Windows 的应用程序，我都使用了 PLists。

这实际上是我反复讨论的一个问题。PList 和/或 XML 读取和处理肯定不会像精心设计的文本文件格式那样具有高性能，因为由于所有多余的标签可能是必要的，也可能不是必需的，因此两者都很臃肿。如果您正在尝试开发具有多种数据类型的单个数据文件，那么这可能是更简单的方法，但如果您正在寻找更少的数据大小，并且可能更快地执行，那么格式化您自己的文件可能会更好。我知道这不是一个确定的答案。

所以最后，它不是“最佳实践”之类的东西，而是一种偏好类型的东西。

# objective-c - 如何处理 iPad 旋转？

> ID：10857326
> 
> 赞同：2
> 
> 时间：2012-06-01T21:05:33.417
> 
> 标签：objective-c, ipad, orientation, rotation

我有一个iPad应用程序的核心组成，它相对简单。但是我想添加对纵向模式的支持（目前在横向模式下工作）。麻烦的是，它是一个非常定制的、独特的界面，由不同的 uiimage、标签等组成

那么当用户旋转 iPad 时，如何处理所有这些对象的移动呢？最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:13:28.313

如果您在界面构建器中设计了界面，您可以通过界面构建​​器建立 GUI 元素之间的关系，并首先查看它对旋转的作用。这可能对您有用，我知道我设计的一些界面不是一个选项，而其他界面则可以正常工作。

否则，您可能必须自己编写所有定位代码。根据我的经验，做到这一点的最佳方法可能是使用预处理器指令来定义两个方向中所有元素的位置。这样，您编写用于操作的例程，然后在第一次运行后可能需要进行的小调整可以只是预处理器指令文件中的数字调整。

[http://bynomial.com/blog/?p=85](http://bynomial.com/blog/?p=85)

[http://the.ichibod.com/kiji/how-to-handle-device-rotation-for-uiviews-in-ios/](http://the.ichibod.com/kiji/how-to-handle-device-rotation-for-uiviews-in-ios/)

# mysql - 主键是否可能不是自动增量？

> ID：10857327
> 
> 赞同：4
> 
> 时间：2012-06-01T21:05:40.360
> 
> 标签：mysql, sql, insert, auto-increment

我正在尝试在已经有 3 行的表中插入一个元素。

它是一个名为***usuarios*** =[ **id** (primary, autoincrement), **fid** , **first_name** , **last_name** ..]的表

所以已经有 3 行的 id 为：**0,1,2**

当我尝试执行此查询时（注意我没有为 id 属性设置值）

```
INSERT INTO usuarios (fid,email,pass,first_name,last_name,avatar,bday,fecha,id_loc,id_loc_from) 
       VALUES       (-1,'toni@ideadeia.com','72253f579e7dc003da754dad4bd403a6','','','',NOW(),NOW(),'','') 
```

我得到这个mysql错误：

```
Duplicate entry '0' for key 1 
```

额外：我不知道这 3 个项目是如何插入的（如果通过界面，通过控制台查询，..）

所以问题是，我怎样才能确保它`Primary Key`是自动增量的，如果不是；如何设置？（这能解决问题吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:15:38.163

如果您有权更改表，则应该能够使用此语句将其设置为自动增量：

```
ALTER TABLE usuarios  modify id INT(11) NOT NULL AUTO_INCREMENT; 
```

尽管我已经看到了建议删除列并重新创建它的错误报告，但如果由于某种原因上述方法不起作用。这些帖子中推荐的语法是：

```
ALTER TABLE usuarios  
         DROP COLUMN id;

ALTER TABLE usuarios  
         ADD COLUMN idINT(11) NOT NULL AUTO_INCREMENT FIRST; 
```

**警告：**首先在测试数据库中执行此操作。如果表使用它作为外键，您需要小心执行此操作。它充其量可能会失败，或者最坏的情况可能会破坏所有关系。

[MySql 参考手册](http://dev.mysql.com/doc/refman/4.1/en/example-auto-increment.html)中有大量信息。

# ruby - 在字符串数组中找到一个字符串

> ID：10857329
> 
> 赞同：0
> 
> 时间：2012-06-01T21:05:47.020
> 
> 标签：ruby

我想在任何给定单词的所有字符串的数组中找到位置。

```
 phrase = "I am happy to see you happy."
 t = phrase.split
 location = t.index("happy") # => 2 (returns only first happy)

  t.map { |x| x.index("happy") } # => returns  [nil, nil, 0, nil, nil, nil, 0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:13:05.890

这里有一个方法

```
phrase = "I am happy to see you happy."
t = phrase.split(/[\s\.]/) # split on dot as well, so that we get "happy", not "happy."

happies = t.map.with_index{|s, i| i if s == 'happy'} # => [nil, nil, 2, nil, nil, nil, 6]
happies.compact # => [2, 6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:20:00.337

```
phrase = "I am happy to see you happy."    
phrase.split(/[\W]+/).each_with_index.each_with_object([]) do |obj,res|
  res << obj.last if obj.first == "happy"
end
#=> [2, 6] 
```

# php - 使用php以表格形式回显mysql查询结果

> ID：10857331
> 
> 赞同：0
> 
> 时间：2012-06-01T21:05:53.317
> 
> 标签：php, css

我有一个正在写的小购物车，目前正面临如何将 MySQL 表结果显示为表格显示的问题。我有一个执行整个数据库搜索并返回结果的代码，我的问题是像大多数购物车一样显示结果。

这是我想要实现的一个例子。

```
<table>

<tr>
<td>First mysql result row comes here</td>
<td>Second Mysql result row comes here</td>
</tr>

<tr>
<td>third mysql result row comes here</td>
<td>fourth Mysql result row comes here</td>
</tr>

</table> 
```

请注意，它`<td>`每行显示两个。

我很难找到答案。可以使用css完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:11:39.427

```
<table>
<?php
$tr = false;

foreach( $results_from_database as $result ) {
    $tr = !$tr;

    if( $tr ) {
        echo '<tr>';
    }

    echo "<td>$result</td>";

    if( !$tr ) {
        echo '</tr>';
    }
}

// if there's odd amount of results, add an empty cell and close the tr tag
if( $tr ) {
    echo '<td></td></tr>';
}
?>
</table> 
```

# c++ - OpenGL：调用 glewInit() 后 glGetError() 返回无效枚举

> ID：10857335
> 
> 赞同：23
> 
> 时间：2012-06-01T21:06:17.023
> 
> 标签：c++, opengl, freeglut, glew

我使用 GLEW 和 freeglut。出于某种原因，在调用 glewInit() 后，glGetError() 返回错误代码 1280，即使 glewExperimental = GL_FALSE 也是如此。

我无法编译着色器，glGetProgramInfoLog() 返回“顶点着色器在调用 glLinkProgram() 之前没有成功编译。链接失败。” 我之前能够编译着色器。

重新安装驱动程序没有帮助。

这是我的代码：

```
int main(int argc, char* argv[])
{
    GLenum GlewInitResult, res;

    InitWindow(argc, argv);

    res = glGetError(); // res = 0

    glewExperimental = GL_TRUE;
    GlewInitResult = glewInit();    

    fprintf(stdout, "ERROR: %s\n", glewGetErrorString(GlewInitResult)); // "No error"
    res = glGetError(); // res = 1280

    glutMainLoop();

    exit(EXIT_SUCCESS);
}

void InitWindow(int argc, char* argv[])
{
    glutInit(&argc, argv);

    glutInitContextVersion(4, 0);
    glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
    glutInitContextProfile(GLUT_CORE_PROFILE);

    glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE,
    GLUT_ACTION_GLUTMAINLOOP_RETURNS);

    glutInitWindowPosition(0, 0);
    glutInitWindowSize(CurrentWidth, CurrentHeight);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

    WindowHandle = glutCreateWindow(WINDOW_TITLE);

    GLenum errorCheckValue = glGetError();

    if (WindowHandle < 1)
    {
        fprintf(stderr, "ERROR: Could not create new rendering window.\n");
        exit(EXIT_FAILURE);
    }

    glutReshapeFunc(ResizeFunction);
    glutDisplayFunc(RenderFunction);
    glutIdleFunc(IdleFunction);
    glutTimerFunc(0, TimerFunction, 0);
    glutCloseFunc(Cleanup);
    glutKeyboardFunc(KeyboardFunction);
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-01T21:17:40.537

Did you see the comment on this wiki page?

[http://www.opengl.org/wiki/OpenGL_Loading_Library](http://www.opengl.org/wiki/OpenGL_Loading_Library)

It mentions why this occurs, and it says "in some cases you may still get GL_INVALID_ENUM after specifying glewExperimental depending on your glew version".

It sounds like it might be safe to ignore as long as you're not seeing any other problems.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-24T04:12:18.817

似乎 glew 不能正常工作......对我来说最简单的解决方案是使用 libepoxy。它不需要任何初始化的东西。只需更换您的

```
#include <GL/glew.h> 
```

和

```
#include <epoxy/gl.h>
#include <epoxy/glx.h> 
```

并删除所有 glew 代码。如果您使用 gcc，您还必须将“-lGLEW”替换为“-lepoxy”。而已。例如我有类似的东西：

```
g++ main.cpp -lepoxy -lSDL2 -lSDL2_image -lSDL2_mixer -lglut -lGLU -o main 
```

在其他人之前保持环氧树脂标志似乎很重要。

# actionscript-3 - AS3 继承

> ID：10857338
> 
> 赞同：0
> 
> 时间：2012-06-01T21:06:29.260
> 
> 标签：actionscript-3, inheritance

当“子类”扩展“超类”时，当它继承其方法和属性时，它会创建与“超类”区分开来的方法和属性？

或者，如果我创建一个“子类”的实例并尝试修改一个从“超类”继承的属性，我是否也在修改超类属性？

谢谢。

**编辑**

```
package {

    public class SubClass extends SuperClass {

        public function SubClass() {
            trace('superclass value n='+superClass.n+'\n');
            trace('subclass changes inherited n'+'\n');
            n = 3;
            trace('subclass value n='+n+'\n');
            trace('superclass value n='+superClass.n+'\n');
        } 
    } 
} 
```

返回我：

```
superclass value n=-1;
subclass changes inherited n;
subclass value n=3;
superclass value n=3; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:56:49.223

我将简要解释一下。

我们有两个类——子类和超类。

SuperClass 有四种方法：

*   私有函数方法Private():void;
*   受保护的函数方法Protected():void;
*   公共函数方法Public():void;
*   内部函数方法Internal():void;

从子类你：

1.  无法访问 methodPrivate():void;
2.  可以访问 methodProtected():void; 但就像您的私有方法一样，这意味着您无法从子类外部访问它。
3.  可以访问 methodPublic():void; 如果从子类外部也可以访问所有内容。
4.  方法内部（）：无效；可用于 SuperClass 包中的类。

但是，您可以覆盖这些方法。重写不会改变 SuperClass 的方法，而只会在 SubClass 中改变它们。

```
override public function methodPublic() : void {
    // your additional code
    super.methodPublic(); // eventually calling the same method of SuperClass, you can pass arguments to it also
} 
```

如您所知，您的 SuperClass 也可以有变量，也可以是公共的、受保护的、私有的或内部的。您不能覆盖它们，但是您可以使用 getter 或 setter 来执行此操作。

您可以使用“super”一词访问创建为公共或受保护的变量，如下所示： super.someVariable 。

所以一切都取决于你，如果你想在 SuperClass 和 SubClass 中创建不同的同名变量，只需在 SuperClass 中声明一个为私有变量。如果您想拥有一个 SuperClass 和 SubClass 都可以访问的变量 - 只需将其声明为受保护或公共。

希望这很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:26:10.087

当您创建一个扩展超类的空白子类时，您正在创建一个为父类提供相同接口（具有相同实现）的新类。

也就是说，如果您的父类包含一个方法`doSomething`，那么您的子类即使没有实际编写它，也将拥有该`doSomething`方法。对此的一个警告是，如果方法被标记`private`，在这种情况下，继承类 SubClass 将无权访问。

```
package {

    public class SuperClass {

        public function SuperClass():void {
            self.doSomething();
        }

        public function doSomething():void {
            trace("doing something");
        }
}

package {

    import SuperClass;

    public class SubClass extends SuperClass {

        public function SubClass():void {}
    }
} 
```

一旦建立了这种关系，您就可以决定调用`doSomething`SubClass 实例的行为是否与 SuperClass 中定义的默认实现不同。如果您想要相同的行为，请保持原样。如果您想要不同的行为，则使用关键字覆盖父类的方法`override`。

```
package {

    import SuperClass;

    public class SubClass extends SuperClass {

        public function SubClass():void {}

        override public function doSomething():void {
            trace("doing another thing instead");
        }
    }
} 
```

现在调用`doSomething`SubClass 实例的东西将得到修改的行为。但是没有触及默认实现。SuperClass 的实例不会被方法的这种覆盖所修改。只有 SubClass 的实例会受到影响。

属性也是如此。

有一个例外，那就是静态属性。静态属性是类的属性，而不是类实例的属性。静态属性不会被继承。静态属性如下所示：

```
package {

    public class SuperClass {

        public static var i:int = 0;

        public function SuperClass():void {
        }

        public function doSomething():void {
            trace("doing something");
        }
} 
```

SubClass 类不会引用静态属性 i。但是，SubClass 实例可以更改 SuperClass 的静态值。举个例子：

```
package {

    import SuperClass;

    public class SubClass extends SuperClass {

        public function SubClass():void {}

        override public function doSomething():void {
            trace("changing something in SuperClass");
            SuperClass.i = 1;
        }
    }
} 
```

现在，SuperClass 的静态变量`i`的值是 1，而不是 0。这样，SubClass 就有可能（尽管任何具有正确访问权限的代码都具有相同的潜力）来更改 SuperClass 的属性。

我希望这有帮助。

# c++ - C++ 操纵器？

> ID：10857343
> 
> 赞同：2
> 
> 时间：2012-06-01T21:07:05.240
> 
> 标签：c++

c++ 标准如何定义对操纵器的识别或一般的操纵器？

例如：

```
using namespace std;
ostream& hello_manip(ostream& os){
  os<<"Hello there, fine fellow!"; return os;
}
int main(){
  cout<<hello_manip;
} 
```

代码**cout << hello_manip**似乎被翻译成**operator<<( cout, hello_manip )**或**cout.operator<<(hello_manip)**，但它采用了**hello_manip( cout )**的形式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T21:11:05.450

有一个重载`operator<<`接受一个函数指针并调用它。不涉及魔法。

标准的第 27.7.3.6.3 节描述了对像您这样的简单机械手的处理。

> `basic_ostream<charT,traits>& operator<<(basic_ostream<charT,traits>& (*pf) basic_ostream<charT,traits>&))`
> 
> 1.  影响：无。不作为格式化输出函数（如 27.7.3.6.1 中所述）。
> 2.  回报：`pf(*this)`。
> 
> `basic_ostream<charT,traits>& operator<<(basic_ios<charT,traits>& (*pf) basic_ios<charT,traits>&))`
> 
> 1.  效果：呼叫`pf(*this)`。此插入器不作为格式化输出函数（如 27.7.3.6.1 中所述）。
> 2.  回报：`*this`。
> 
> `basic_ostream<charT,traits>& operator<<(ios_base& (*pf)(ios_base&))`
> 
> 1.  效果：呼叫`pf(*this)`。此插入器不作为格式化输出函数（如 27.7.3.6.1 中所述）。
> 2.  回报：`*this`。

更复杂的操纵器（接受参数和携带状态）是通过返回具有自己`operator<<`重载的函子对象来实现的。

# javascript - 在 Backbone.js 视图中禁用特定事件

> ID：10857348
> 
> 赞同：4
> 
> 时间：2012-06-01T21:07:24.110
> 
> 标签：javascript, backbone.js, backbone-events

我正在研究一个嵌套的主干视图，如果单击该视图，它将创建同一视图的新实例。我只想禁用特定事件，而不是全部；在这种情况下，单击。我尝试使用 undelegateEvents()，但这会禁用所有功能。关于如何做到这一点的任何想法？

这是我正在处理的一段代码：

```
var View = Backbone.View.extend({
    events: {
        "mousedown": "start",
        "mouseup": "over"
    },

    start: function() {
        var model = this.model;

        var v = new View({
            model: model,
        });
        v.undelegateEvents(); //I just want to disable mousedown
        v.render();
    },

    over: function() {
        /*
        some code here
        */
    },

    render: function() {
        /*
        some code here
        */
    }
}); 
```

这个想法是禁止在第二个实例化视图中单击，同时保留其他事件。第一个将包含所有事件。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T21:45:46.673

您可以在调用时指定要使用的事件[`delegateEvents`](http://backbonejs.org/#View-delegateEvents)：

> **委托事件** `delegateEvents([events])`
> 
> 使用 jQuery 的`delegate`函数为视图中的 DOM 事件提供声明性回调。如果未直接传递**事件**`this.events`哈希，则用作源。

所以你可以做这样的事情：

```
var v = new View({
    model: model,
});
v.undelegateEvents();
var e = _.clone(v.events);
delete e.mousedown;
v.delegateEvents(e);
v.render(); 
```

您可能希望将该逻辑推送到 View 上的方法中：

```
detach_mousedown: function() {
    this.undelegateEvents();
    this.events = _.clone(this.events);
    delete this.events.mousedown;
    this.delegateEvents();
}

//...

v.detach_mousedown(); 
```

当您只想为一个对象更改它时，您需要使用`this.events = _.clone(this.events)`技巧来避免意外更改“类” （即 this.constructor.prototype.events）。`events`您还可以为`View`构造函数设置一个标志，该标志将在其内部执行类似的操作`initialize`：

```
initialize: function() {
    if(this.options.no_mousedown)
        this.detach_mousedown()
    //...
} 
```

另一种选择是拥有一个没有`mousedown`处理程序的基本视图，然后将其扩展为具有`mousedown`处理程序的视图：

```
var B = Backbone.View.extend({
    events: {
        "mouseup": "over"
    },
    //...
});
var V = B.extend({
    events: {
        "mousedown": "start",
        "mouseup": "over"
    },
    start: function() { /* ... */ }
    //...
}); 
```

您必须复制`B.events`内部`V`或使用手册弄乱，`extend`因为`events`不会[`_.extend`](http://underscorejs.org/#extend)合并属性，它只是批发替换东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T14:00:39.777

这是一个简单的示例，展示了如何在 Backbone 视图中委托或取消委托事件

```
Backbone.View.extend({

    el: $("#some_element"),

    // delete or attach these as necessary
    events: {
        mousedown: "mouse_down",    
        mousemove: "mouse_move",
        mouseup: "mouse_up",
    },  

    // see call below
    detach_event: function(e_name) {
        delete this.events[e_name]
        this.delegateEvents()
    },  

    initialize: function() {        
        this.detach_event("mousemove")      
    },  

    mouse_down: function(e) {       
        this.events.mousemove = "mouse_move"
        this.delegateEvents()       
    },

    mouse_move: function(e) {},

    mouse_up: function(e) {}

}) 
```

# actionscript-3 - Actionscript：如何从未嵌入的 mxml 文件中调用嵌入的图像？

> ID：10857349
> 
> 赞同：1
> 
> 时间：2012-06-01T21:07:42.480
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我在我的 Flex mxml 文件（脚本部分）中嵌入了一个图像，使用：

```
<fx:Script>
   <![CDATA[
   import com.views.myTitleWindowFile;
   ...
   [Embed(source="com/assets/image_error.png")]
   public static const IMG_ERROR:Class;
   ... 
```

它工作正常。现在我想在名为 myTitleWindowFile（用于 spark TitleWindow 组件）的 mxml 文件中使用相同的图像，如上所示导入。myTitleWindowFile.mxml 在这一行给出错误：

```
Alert.show("Please enter a value.", "Error",Alert.OK,null,null,IMG_ERROR); 
```

错误状态：`1120: Access of undefined property IMG_ERROR.`知道我做错了什么吗？提前感谢您的任何评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:31:29.920

您`myTitleWindowFile`不应该访问其父级中的任何资源。它很容易导致您希望`myTitleWindowFile`在应用程序的另一个尚未`IMG_ERROR`定义的区域中重用它。

我只是`IMG_ERROR`在`myTitleWindowFile`本地声明并访问它。它使您的代码更清洁、更便携。

# c++ - 使用 gdb 和 codelite 在 C++ 中调试无限循环

> ID：10857351
> 
> 赞同：2
> 
> 时间：2012-06-01T21:07:45.317
> 
> 标签：c++, gdb, codelite

我有一个非常大的代码，当我尝试在 codelite 中运行它时，codelite 界面变得无响应，我必须杀死它。这通常发生在无限循环的情况下。

我试图在代码的多个位置放置断点以查找问题，但到目前为止没有运气。从我开始运行程序开始，执行会在一段时间后停止。检测这种无限循环的最佳方法是什么？Codelite 没有“停止”按钮 AFAIK。

**编辑：** 我最终添加了很多 cout 语句并在终端而不是 gdb 中运行可执行文件。这有助于在很长一段时间后找到程序在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:11:21.330

最简单的方法是运行代码一段时间，然后使用调试器暂停执行而不使用断点。如果幸运的话，调用堆栈应该会指出您遇到的代码位。

如果失败，您将需要在代码中添加日志记录语句。

# ironpython - IronPython DSL 将常量转换为 C# 类型

> ID：10857353
> 
> 赞同：0
> 
> 时间：2012-06-01T21:07:49.143
> 
> 标签：ironpython, dsl, fluent-interface

我正在 IronPython 中实现 DSL。

假设我有一个用 C# 实现的值层次结构，要在 Iron python 中使用：

```
 public abstract Value
 {

 }

 public abstract DoubleValue : Value
 {
   // Constructors...      

   public double magnitude;

   // Arithmetic operators overloaded...
 }

 public abstract FractionValue : Value
 {
   // Constructors....

   public int numerator;
   public int denominator;

   // Arithmetic operators overloaded...
 } 
```

由于 C# 中的运算符重载，我可以在 Python 中执行此操作：

```
 # a, b are of type Value
 def Sum(a,b):
    return a + b 
```

一切正常，该函数返回一个类型 = 值的对象。

但如果我想使用 PythonConstant：

```
 # a is of type Value
 def Sum5(a):
     return a + 5 
```

你得到一个错误类型，因为常量 5 不是 Value 类型。

一种解决方案是重载 + 运算符以工作整数，例如：

```
public DoubleValue operator+(DoubleValue, int) 
```

但是随后您会得到大量可能的组合，并最终在 Value 框架中出现数百个重载。无论如何，您仍然会遇到此问题：

```
def ReturnFive():
    return 5 
```

在这种情况下，返回的值不是 Value 类型，您应该执行以下操作：

```
def ReturnFive():
    return DoubleValue(5.0) 
```

但这对我的 DSL 来说是一种非常丑陋的语法。

你会推荐什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:10:19.253

这是 DSEL 的主要问题：它们并不总是与原生类型很好地配合。通常你需要包装原生类型；一种选择是引入一个名称非常短的函数（例如`_`），它包装传入的值并触发运算符重载。

IronPython 只有三种感兴趣的数字类型——System.Int32 (int)、System.Double (float) 和 System.Numerics.BigInteger (long)——所以没有太多需要处理的情况。

在 C# 方面，你会有类似的东西：

```
class Value {
    static Value WrapLiteral(object literal) {
        if(literal is System.Double) {
            return DoubleValue((System.Double)literal);
        } // etc ...
    }
} 
```

当您为用户脚本创建范围时，使用短名称添加该函数：

```
scope.SetVariable("_", Value.WrapLiteral); 
```

然后从用户端，用户只需要做：

```
def ReturnFive():
    return _(5) 
```

它仍然有点难看，但还不错。

# python - for循环中Python列表的连续索引，没有指定索引

> ID：10857358
> 
> 赞同：1
> 
> 时间：2012-06-01T21:08:20.767
> 
> 标签：python, list, iterator

我可以使用以下“ [Pythonic](http://docs.python.org/glossary.html#term-pythonic) ”语法在不指定索引的情况下循环遍历 Python (v.2.6) 列表：

```
the_list = [2, 3, 5, 7, 11, 13]
for item in the_list:
    print item + 2 
```

但是如果我想对两个连续的索引执行操作，我想我必须指定索引号，并相应地更改`for`循环范围：

```
the_list = [2, 3, 5, 7, 11, 13]
for i in xrange(len(the_list)-1):
    print the_list[i] + the_list[i+1] 
```

那是对的吗？或者有没有办法保持 Pythonic 并避免使用表达式`xrange(len(the_list)-1)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:10:43.753

我喜欢模块[`pairwise`](http://docs.python.org/library/itertools.html#recipes)文档中列出的食谱：`itertools`

```
def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b) 
```

然后...

```
for x, x_next in pairwise(the_list):
    ... 
```

您也可以只`zip`列出带有自身切片的列表：

```
for x, x_next in zip(the_list, the_list[1:]):
    ... 
```

# c# - InvalidCastException：无法将 x 类型的 COM 对象转换为接口类型 y

> ID：10857360
> 
> 赞同：1
> 
> 时间：2012-06-01T21:08:22.353
> 
> 标签：c#, visual-studio-2010, com, visual-c#-express-2010

我在#1 机器上使用 Visual C# Express 2010 编写了一些 C# 代码。这些代码依赖于一些已注册 DLL 的 COM 对象。它在 #1 机器上编译并运行良好。COM 对象是从名为 BostonWorkstation 的程序安装的，该程序安装在 #1 和 #2 机器上。

*   机器1：
    *   上写的代码。
    *   已安装 Visual C# 2010 Express。
    *   “BWS”DLL 已注册。
    *   程序运行得很好。
    *   具有 .NET 版本：v4.0、v4、v3.5、v3.0、v2.0
    *   32位

*   机器2：
    *   “BWS”DLL 已注册。
    *   程序错误`System.InvalidCastException`（如下）。
    *   未安装 Visual C# 2010 Express。
    *   有 .NET 版本：v4、v3.5、v3.0、v2.0、v1.1
    *   32位

*   机器 3：
    *   “BWS”DLL 未注册。
    *   已安装 Visual C# 2010 Express。
    *   程序错误（如预期）：`System.Runtime.InteropServices.COMException (...): Retrieving the COM class factory for component with CLSID {...} failed due to the following error: 80040154 Class not registered (...)`
    *   32位

当我尝试在机器#2 上运行该程序（在机器 1 上编译）时，它也具有相同的注册 DLL，但程序无法运行。我还尝试在机器#3 上运行它，该机器甚至没有 DLL，并且出现了预期的不同错误。

机器 2 上的运行时错误：

> 1 无法加载 BostonWorkstation，错误：System.InvalidCastException：无法将“System.__ComObject”类型的 COM 对象转换为接口类型“BostonWorkStation70.BostonWorkStation”。此操作失败，因为 IID 为“{8C8144EF-ADB7-48FD-A5BB-6E55B8382B3E}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） . 在 C:\Documents and Settings\user\My Documents\Visual Studio 2010\Projects\project1\TestBWS\CodeFile1.cs:line 67 中的 TestBWS.LoginForm()

（Visual Studio 文件夹引用只是编译时路径）

检查机器 1 上的注册表，我发现：

> HKEY_CLASSES_ROOT\接口{8C8144EF-ADB7-48FD-A5BB-6E55B8382B3E}

默认 REG_SZ 值为`BostonWorkStation`

编码：

```
 using BostonWorkStation70; //line 1

    ...

    try
    {
        bwsLogin = new BostonWorkStation(); //line 67
    }
    catch (Exception e)
    {
        Console.WriteLine("1 Unable to load BostonWorkstation, error: " + e);
        System.Console.ReadLine(); //pause the debug window
        return false;
    } 
```

我曾尝试运行 ProcMon 来比较机器进程日志，但仅此程序就有数千个条目，而且我没有看到任何缺失的参考资料。我进行了比较，但成功的流程日志的行数是原来的 5 倍。

据我了解，在机器 2 上运行程序使其将 BWS 对象创建为泛型`System.__ComObject`（而不是`BostonWorkStation70.BostonWorkStation`），我不知道为什么。DLL 等在机器 2 上绝对正确，否则我会`Class not registered`在运行时收到该错误。

为什么编译后的程序不能在机器 2 上运行？所有依赖的 COM/DLL 都在上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:49:28.743

如果该错误消息来自 2 号机器，即您所说的“未安装 Visual C# 2010 Express”。

为什么它从默认的 Visual Studio 项目文件夹中运行？

C:\Documents and Settings\user\My Documents\Visual Studio 2010\Projects\project1\TestBWS\CodeFile1.cs:第 67 行

你可能还有其他问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:56:03.360

您是否在第二台机器上使用 regsvr32.exe 从库中注册了您的 COM 对象类？

为了检查我是否会在第一台和第二台机器上搜索注册表以查找所有可能的`{8C8144EF-ADB7-48FD-A5BB-6E55B8382B3E}`字符串条目。如果搜索结果不同，则可能是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:29:46.970

如果 BostonWorkstation 组件是非托管的 - 在依赖walker 中打开它们以确保它们的所有依赖 dll 都存在。

奇怪的是它们是非托管组件并使用 MSVCRT 10。在这种情况下，您需要在机器 2 上安装[VS 2010 CRT 。](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

# html - 用 html 页面编写的 ColdFusion

> ID：10857361
> 
> 赞同：0
> 
> 时间：2012-06-01T21:08:23.443
> 
> 标签：html, coldfusion, cfmail

我对 ColdFusion 很陌生（这是我处理它的第二天），我正在实现一个简单的 HTML 页面。我在此页面上有一个反馈表，当用户点击提交时，我想将表单的内容通过电子邮件发送给自己。我必须使用 cfmail 来完成。

为了在实现之前试用它，我创建了以下 cfmail.cfm 文件：

```
<cfmail from="#form.from#" to="myemailaddress" type="html">
    Some text
</cfmail> 
```

并将文件名传递给我的表单的 action 属性。每次我在表单上单击提交时，它都会打开上述文件。

我在网上找到的所有示例几乎都显示了相同的内容，但显然我离这里很远。

我是否以错误的方式使用 cfmail？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:01:05.790

就像 Evik 在评论中所说的那样，添加一个主题，因为它是 cfmail 标签的必填字段。

```
<cfmail to="#form.mailto#" from="#form.mailFrom#" subject="#form.subject#">
  #form.body#
</cfmail> 
```

还要检查 ColdFusion 管理员中的邮件设置`Setting > Mail`。您还可以在管理员中查看邮件日志。

我建议为 ColdFusion 使用 Adob​​e 在线文档。我几乎每天都会提到它，它们很棒。

这是 CF8 的 cfmail 的链接，但在底部它链接到其他版本。

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_m-o_01.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_m-o_01.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T12:36:38.900

如果它只是打开文件并且没有抛出 ColdFusion 错误（它应该没有主题），那么您很可能在 ColdFusion 安装中遇到问题，或者更有可能在您的开发 Web 服务器的设置中没有处理 cfm 脚本（ IIS 或 Apache，取决于平台）。

# c# - 如何在使用 MVC 4 WebAPI Restful 服务时从 IIS 7.5 获取详细的错误消息？

> ID：10857362
> 
> 赞同：1
> 
> 时间：2012-06-01T21:08:37.447
> 
> 标签：c#, asp.net-mvc

假设我在控制器中有一个工作方法。伪代码可能是：

```
public IEnumerable<ViewMP3> MyMP3(string token, string id)
{ 
using (ControlDbContext db = new MyDbContext())
{ List<ViewMP3> list = ...some list linq statement

return list;
}} 
```

我使用 HttpClient 使用 WebAPI 并且没有产生错误。现在，假设我故意抛出一个错误： throw new ArgumentException("hello"); //插入到上面的方法中

如何获得真正详细的错误消息。我只能得到 IIS 7.5 详细错误 - 500.0 - 内部服务器错误。注意：为了不混淆问题，我将 WebAPI 服务的错​​误输出以字符串的形式传递回客户端。该错误源自服务内部，但只会产生 500.0 错误。通常会返回 JSON，但是当设置了已知错误条件时，我会更改代码以获取字符串格式的响应并传递给客户端。这就是我知道错误包含什么的方式。

我尝试启用“将错误发送到浏览器”。我已将 IIS 错误页面功能设置更改为详细错误。我已将 Web.Config 更改为包含

```
<customErrors mode="Off" />
<compilation debug="true" targetFramework="4.0" /> 
```

和

```
<httpErrors errorMode="Detailed">
<remove statusCode="500" subStatusCode="-1" />
</httpErrors> . 
```

我已授予包含 Web 文件的文件夹的 IIS_IUSRS 权限。

当天早些时候，我遇到了一个真正的错误，由于一般的 500.0 错误，几乎无法排除故障。知道我还能做些什么来获取详细的错误消息吗？

谢谢！

# java - 使用 querydsl 如何从一对多关系产生的一组对象中检查特定对象？

> ID：10857377
> 
> 赞同：17
> 
> 时间：2012-06-01T21:09:40.723
> 
> 标签：java, jpa, querydsl

我有一个 Person JPA 实体，我的 Person 有多个地址（从 Person 到 Address 的 OneToMany 关系）。我希望能够对所有拥有粒子邮政编码的人进行查询，但在查看 querydsl 文档后我不确定如何正确处理集合。

我可以访问这些地址，但我不确定如何处理它们：

```
QPerson qPerson = QPerson.person;
personDao.findAll(qPerson.addresses._SPECIFICADDRESS_.zip.eq('73130')); 
```

如何获得我正在寻找的*SPECIFICADDRESS ？*

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-02T07:02:34.633

尝试这个

```
QPerson qPerson = QPerson.person;
personDao.findAll(qPerson.addresses.any().zip.eq('73130')); 
```

# javascript - 使用 jQuery 将 POST-body 设置为 JSON 对象

> ID：10857382
> 
> 赞同：20
> 
> 时间：2012-06-01T21:10:07.203
> 
> 标签：javascript, jquery, json

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-01T21:15:17.617

Add the processData parameter to your ajax request and set it to false. Additionally, you need to stringify your object to turn it into JSON.

```
var data = { "user" : "me!" };
$.ajax({
    type: "POST",
    url: "/api/user/create",
    processData: false,
    contentType: 'application/json',
    data: JSON.stringify(data),
    success: function(r) {
    }
}); 
```

`JSON.stringify` will not work in older versions of IE unless you implement it. [http://json.org](http://json.org)

# django - 从 django 中的 formview 保存 modelform 数据

> ID：10857384
> 
> 赞同：2
> 
> 时间：2012-06-01T21:10:13.797
> 
> 标签：django, django-forms, django-class-based-views

所以我是 django 的新手，我正在为基于类的视图的文档而苦苦挣扎。不太确定我在这里做错了什么，但这就是问题所在：

我在表单上填写适当的数据，单击提交，然后我被重定向到相同的 url 以及一些`get`与我在表单中提交的内容相对应的参数。数据库中没有添加任何新内容。单击提交时，我想在数据库中创建一个新`Advertisement`行。

我有一个 ModelForm 如下：

```
class NewAdForm(ModelForm):
    class Meta:
            model = Advertisement
            exclude = ('campaign',)

    def __init__(self, campaign, *args, **kwargs):
            super(NewAdForm, self).__init__(*args, **kwargs)
            self.campaign = campaign 
```

我也有一个 FormView：

```
class AddAdvertView(FormView):
    form_class = NewAdForm
    template_name = 'advertisers/newad.html'

    def get_form_kwargs(self):this
            kwargs = super(AddAdvertView, self).get_form_kwargs()
            kwargs['campaign'] = get_object_or_404(Campaign, id__exact = self.kwargs['campaign_id'])
            return kwargs

    def form_valid(self, form):
            form.save(commit = True)
            return super(AddAdvertView, self).form_valid(form) 
```

这是模板：

```
<form action="" method="get">
{{ form.as_p }}
<input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:59:43.557

你使用的任何理由`method="get"`？FormView 类可能需要一个 POST 来触发验证和保存。GET 通常只用于呈现初始表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:26:10.313

这可能是因为您缺少 CSRF 令牌，但它确实应该给您一个错误。不过，请尝试：

```
<form action="" method="get">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit"/>
</form> 
```

此外，虽然它没有解释为什么不保存表单，但您需要`success_url`在您的 上指定 a `FormView`，用户在成功提交表单后应重定向到的 URL。实际上，我从未尝试过将其关闭，但视图可能会将您带回表单，仅仅是因为它不知道该去哪里。

# ruby-on-rails - 在 Ruby On Rails 上使用 PhantomJS 对动态页面进行服务器端渲染

> ID：10857385
> 
> 赞同：4
> 
> 时间：2012-06-01T21:10:15.713
> 
> 标签：ruby-on-rails, dynamic, seo, server-side, phantomjs

我有一个 90% Javascript 的网页。所有的网站都是动态呈现的。

我希望这些内容也由服务器呈现，以便 Google 可以抓取和索引我的所有内容和链接。

我知道，为了不被google禁止，动态页面和服务器渲染页面的内容必须几乎相同。

我不想编写两个不同的页面（在这种情况下，一个来自带有 Handlebars 的客户端，另一个来自带有 ERB 的服务器）。

所以我想到了 PhantomJS。我想要的是，当我从 google 获得 _escaped_fragment_ 参数时，我使用 PhantomJS 打开没有该参数的页面，然后从 PhantomJS 将其呈现为 HTML 并将其从服务器返回给 Google。这样，我不必为任何东西创建两个不同的页面。

我知道我也可以将 Handlebars 用于服务器端模板，但无论如何我都必须编写两次代码。

有谁知道如何用 PhantomJS 完成这个？有没有其他方法可以不重复逻辑和代码两次并让谷歌索引站点？

谢谢！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T11:46:03.017

是的你可以。

将以下内容添加到您的 Javascript 密集型页面

```
<meta name="fragment" content="!"> 
```

当 Google bot 找到这个标签时，它会发出一个新的 http GET 请求。这一次，它将添加`?_escaped_fragment_=`到您的 URL。

因此，如果您使用 Javascript 的网页位于：

```
www.mysite.com/mypage 
```

Google 将使用以下 URL 发出新的 GET：

```
www.mysite.com/mypage?_escaped_fragment_= 
```

在您的 Ruby GET 处理程序中，您只需使用未转义的 URL 调用 PhantomJs（只需进行字符串替换）。在您的 PhantomJs javascript 代码中，等待页面呈现，然后使用常规 javascript 提取 HTML 并将其返回到您的 Ruby GET 处理程序，您只需使用 HTML 文本字符串响应 GET。

通过这种方式，您不必编写两次代码。该解决方案是通用的，可以对任何内容进行快照。

# java - 如何在 Java 中发布

> ID：10857386
> 
> 赞同：1
> 
> 时间：2012-06-01T21:10:21.957
> 
> 标签：java, post, web

我有一些看起来像这样的东西：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

grant_type=assertion&assertion_type=http%3A%2F%2Foauth.net%2Fgrant_type%2Fjwt%2F1.0%2Fbearer&assertion=eyJhbGciOiJSUzI1NiIs 
```

我将如何在 Java 中使用它？我已经拥有所有信息，所以我不需要解析它。

基本上我需要使用 3 个不同的数据进行 POST，并且使用 curl 一直对我有用，但我需要在 java 中进行：

```
curl -d 'grant_type=assertion&assertion_type=http%3A%2F%2Foauth.net%2Fgrant_type%2Fjwt%2F1.0%2Fbearer&assertion=eyJhbGciOiJSUzI1NiIsInR5i' https://accounts.google.com/o/oauth2/token 
```

我切断了一些数据，以便更容易阅读，所以它不会工作。

所以一个大问题是 curl 可以工作，而我尝试的大多数 Java 教程都会给我 HTTP 响应错误 400。

就像我应该像这样编码日期：

```
String urlParameters = URLEncoder.encode("grant_type", "UTF-8") + "="+ URLEncoder.encode("assertion", "UTF-8") + "&" + URLEncoder.encode("assertion_type", "UTF-8") + "=" + URLEncoder.encode("http://oauth.net/grant_type/jwt/1.0/bearer", "UTF-8") + "&" + URLEncoder.encode("assertion", "UTF-8") + "=" + URLEncoder.encode(encodedMessage, "UTF-8"); 
```

或不：

```
String urlParameters ="grant_type=assertion&assertion_type=http://oauth.net/grant_type/jwt/1.0/bearer&assertion=" + encodedMessage; 
```

使用它作为代码：

```
URL url = new URL(targetURL);
URLConnection conn = url.openConnection();
conn.setDoOutput(true);

OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());

writer.write(urlParameters);
writer.flush();
String line;
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
while ((line = reader.readLine()) != null) {
     System.out.println(line);
}
writer.close();
reader.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:12:48.727

使用类似[HttpClient](http://hc.apache.org/httpcomponents-client-ga/)或类似的东西。

它可以将预 URL 编码的数据发布到 URI，尽管我不知道您是否可以向它抛出一个完整的请求主体——可能需要将其解析出来，但也可能有用于此的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:25:08.190

这是一个简单的 Apache HttpClient 示例，其中包含来自[其文档](http://hc.apache.org/httpclient-3.x/methods/post.html)的请求正文（稍作修改以显示执行的工作原理）：

```
HttpClient client = new HttpClient();
PostMethod post = new PostMethod("http://jakarata.apache.org/");
NameValuePair[] data = {
    new NameValuePair("user", "joe"),
    new NameValuePair("password", "bloggs")
};
post.setRequestBody(data);
int returnCode = client.execute(post);
// check return code ...
InputStream in = post.getResponseBodyAsStream(); 
```

有关更多信息、示例和教程，请参阅[Apache HttpClient 站点](http://hc.apache.org/httpcomponents-client-ga/index.html)。[此链接](http://www.java2s.com/Code/Java/Apache-Common/HttppostmethodExample.htm)也可能对您有所帮助。

# c# - 使用表达式树映射？有可能实现这一点吗？

> ID：10857388
> 
> 赞同：3
> 
> 时间：2012-06-01T21:10:24.070
> 
> 标签：c#, .net-4.0

```
public static MapFrom Map(this IDataReader idr, params string[] columns)
{
     return new MapFrom { Columns = columns };
}
public static IEnumerable<TEntity> To<TEntity>(this MapFrom from, Func<TEntity, object> map)
{
     // logic here.
}    

public IEnumerable<FooEntity> Execute()
{
    using (DbCommand cmd = db.GetStoredProcCommand("GetListOfFoo"))
    {
        using (IDataReader idr = db.ExecuteReader(cmd))
        {
            return idr.Map("FooID", "FooOfPooAmount", "AnotherFooColumn", "BarID")
              .To<FooEntity>(x => new object[]{
                          x.FooID, x.FooOfPooAmount, x.AnotherFoo, x.BarID
            });
         }
     }
} 
```

我希望使用数据阅读器并创建一个易于使用且性能良好的简单映射器。我没有太多使用表达式树，但我觉得可能需要它们。我想要做的是检查 x 与其数组（lambda 表达式）的*关系*，然后使用这种关系自动适当地映射值并创建一个新的 Foo 实体列表。

MapFrom 只是一个容器，用于承载信息并允许流畅的扩展方法。

这些杂技的要点是有一种简单的方法来指定关系。我意识到我可以轻松地以不同的形式执行类似的操作，但我希望能够“流畅地”列出列 [1]（如将列名键入为字符串，后跟逗号，然后是下一个列名），然后列出对象按顺序排列属性并从中推断映射。可以实现上面的**To**方法吗？表达式树在这里合适吗？我想我可以很容易地从 FooEntity 属性类型推断数据读取器字段的类型转换。

[1] 在这种情况下，我的意思不是像“Fluent API”中那样流利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:58:47.887

我在这里写了您的*MapFrom*类，而不是您必须编写代码将值从列复制到 FooEntity 实例的属性并使用该`yield return`语句返回您的实体集合，因此向*MapFrom*类添加另一个方法：

```
public class MapFrom
{
    private readonly IDictionary<string, string> columnMapDictionary =
        new Dictionary<string, string>();

    public MapFrom(string[] columns)
    {
        foreach (var column in columns)
        {
            columnMapDictionary.Add(column, null);
        }
    }

    public void To<T>(params Expression<Func<T, object>>[] properties)
    {
        var index = 0;
        foreach (var columnMap in columnMapDictionary.ToDictionary(k => k.Key))
        {
            var member = (properties[index++].Body as MemberExpression);
            var propertyName = member.Member.Name;
            columnMapDictionary[columnMap.Key] = propertyName;  
        }
    }
} 
```

将其用作：

```
var mapper = new MapFrom("Name", "Surname");
mapper.To<FooEntity>(p => p.FirstName, p => p.LastName); 
```

# web-services - 使用 Ext.Ajax.request 响应状态 0

> ID：10857390
> 
> 赞同：2
> 
> 时间：2012-06-01T21:10:38.527
> 
> 标签：web-services, extjs, sencha-touch

我想用 AJAX 调用 Web 服务，我使用了这个代码： 代码：

```
 Ext.Ajax.request({
   url: 'http://localhost:4305/Service/test',
     success : function(response) {
     Ext.getCmp('res').setValue(response.responseText);
     var user = eval('('+ response.responseText+ ')'); 
    if(user !== "null") {
    Ext.Msg.alert("Bienvenue Monsieur",user);
    Ext.getCmp('res').setValue(response.status);
  }
   else {Ext.Msg.alert("Mot de passe ou login incorrecte","veuillez reeseyer");}
     },
     failure: function(response) {
  Ext.getCmp('res').setValue(response.status);
    }
    }); 
```

当我在我的浏览器（chrome）中测试它时它可以工作，但是当我在安卓模拟器上测试它时它返回一个 0 作为状态码。我应该修改我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T04:31:49.603

状态是 HTTP 状态代码（例如 404 表示未找到页面，500 表示服务器错误等）。我假设 Android 模拟器可能不会发回有意义的 HTTP 状态代码。你看过`response.responseText`失败回调吗？您可能需要直接调试您的服务以查看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:25:57.547

我认为问题出在您的 url。从 localhost 调用任何服务可能会被 android 模拟器阻止，因为模拟器本身在本地主机上运行。在其他系统上托管您的服务，然后尝试调用它。

# javascript - 如何使标签可见/不可见？

> ID：10857393
> 
> 赞同：19
> 
> 时间：2012-06-01T21:11:03.470
> 
> 标签：javascript, html, label

我有这些日期和时间字段，我想为时间设置一个 javascript 验证。

如果格式无效，则应使标签可见，否则应不可见。

这是我到目前为止的代码。

```
 <td nowrap="nowrap" align="left">
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td align="right" nowrap="nowrap">
                        <span id="startDateLabel">Start date/time: </span>
                        <input id="startDateStr" name="startDateStr" size="8" onchange="if (!formatDate(this,'USA')) {this.value = '';}" />
                        <button id="startDateCalendarTrigger">...</button>
                        <input id="startDateTime" type="text" size="8" name="startTime" value="12:00 AM" onchange="validateHHMM(this.value);"/>
                        <label id="startTimeLabel" visible="false">Time must be entered in the format HH:MM AM/PM</label>
                        <BR>
                        <span id="endDateLabel">End date/time: </span>
                        <input id="endDateStr" name="endDateStr" size="8" onchange="if (!formatDate(this,'USA')) {this.value = '';}" />
                        <button id="endDateCalendarTrigger">...</button>
                        <input id="endDateTime" type="text" size="8" name="endTime" value="12:00 AM" onchange="validateHHMM2(this.value);"/>
                        <label id="endTimeLabel" visible="false">Time must be entered in the format HH:MM AM/PM</label>
                    </td>
                </tr>
            </table>
        </td> 
```

问题是标签在加载时显示，无论我设置为可见。我试过可见性=“隐藏”，它仍然出现。

这是验证部分：

```
 <script>
function validateHHMM(inputField) {
    var isValid = /^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/.test(inputField.value);

    if (isValid) {
        document.getElementById("startTimeLabel").style.visibility = "hidden";
    }else {
        document.getElementById("startTimeLabel").style.visibility = "visible";
    }

    return isValid;
}
function validateHHMM2(inputField) {
    var isValid = /^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/.test(inputField.value);

    if (isValid) {
        document.getElementById("endTimeLabel").style.visibility = "hidden";
    }else {
        document.getElementById("endTimeLabel").style.visibility = "visible";
    }

    return isValid;
}
 </script> 
```

那么，我该怎么做呢？谷歌显示了不同的验证方法，但没有显示如何隐藏/显示标签

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-01T21:14:05.387

您正在寻找显示：

```
document.getElementById("endTimeLabel").style.display = 'none';
document.getElementById("endTimeLabel").style.display = 'block'; 
```

**编辑：**您还可以轻松地重用您的验证功能。

**HTML：**

```
<span id="startDateLabel">Start date/time: </span>
<input id="startDateStr" name="startDateStr" size="8" onchange="if (!formatDate(this,'USA')) {this.value = '';}" />
<button id="startDateCalendarTrigger">...</button>
<input id="startDateTime" type="text" size="8" name="startTime" value="12:00 AM" onchange="validateHHMM(this.value, 'startTimeLabel');"/>
<label id="startTimeLabel" class="errorMsg">Time must be entered in the format HH:MM AM/PM</label><br />

<span id="endDateLabel">End date/time: </span>
<input id="endDateStr" name="endDateStr" size="8" onchange="if (!formatDate(this,'USA')) {this.value = '';}" />
<button id="endDateCalendarTrigger">...</button>

<input id="endDateTime" type="text" size="8" name="endTime" value="12:00 AM" onchange="validateHHMM(this.value, 'endTimeLabel');"/>
<label id="endTimeLabel" class="errorMsg">Time must be entered in the format HH:MM AM/PM</label> 
```

**Javascript：**

```
function validateHHMM(value, message) {
    var isValid = /^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/.test(value);

    if (isValid) {
        document.getElementById(message).style.display = "none";
    }else {
        document.getElementById(message).style.display= "inline";
    }

    return isValid;
} 
```

[现场演示](http://jsfiddle.net/dA356/2/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-01T21:15:14.560

更改`visible="false"`为`style="visibility:hidden"`您的标签..

* * *

或者更好地使用一个类来显示/隐藏标签..

```
.hidden{
   visibility:hidden;
} 
```

然后在你的标签上添加`class="hidden"`

并使用您的脚本删除该类

```
document.getElementById("endTimeLabel").className = 'hidden'; // to hide 
```

和

```
document.getElementById("endTimeLabel").className = ''; // to show 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-01T21:14:12.330

你可以试试

```
if (isValid) {
    document.getElementById("endTimeLabel").style.display = "none";
}else {
    document.getElementById("endTimeLabel").style.display = "block";
} 
```

单独那些行

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-04T08:56:26.337

您可以将显示属性设置为无以隐藏标签。

```
<label id="excel-data-div" style="display: none;"></label> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-01T21:16:38.233

您应该能够通过设置隐藏/显示它：

```
.style.display = 'none';
.style.display = 'inline'; 
```

# php - 如何防止自动请求？

> ID：10857401
> 
> 赞同：1
> 
> 时间：2012-06-01T21:11:43.553
> 
> 标签：php, security

我想知道如何设置一个经过身份验证的用户可以通过简单的图形交互（单击按钮左右）从应用程序或网页向服务器发送不可重放的请求/消息的系统。很奇怪，一定不能建立一个自动化系统来取代用户交互自动化请求，因为这会完全破坏我的整个项目。此外，由于这个动作必须经常重复，它不应该实现像 chaptas 之类的无聊的东西。

一个实际的例子：假设登录后显示的网页显示一个向服务器发送请求的按钮。我如何确定请求已发送，因为用户实际上单击了该按钮，并且不是某种机器人伪造了消息？

这甚至可以检查吗？我敢肯定，我很确定一定有一些我缺少的简单实现，如果这是一个微不足道的问题，我很抱歉。此外，如果解决方案被隐藏（因为我已经搜索了很多！），请指出它。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:01:41.543

您可以像一个简单的问题一样使用非图形验证码。
生成 0 到 10 之间的两个随机整数的简单加法。
添加一个文本字段以询问结果。
结果很容易找到（对于人类而言），并且输入速度非常快。

**示例**：
7+5 的结果是什么？在这里写下你的结果：[ *_* ]

它应该只阻止机器人和非常年轻或非常愚蠢的人。

# c++ - 为什么 push_back() 会导致 malloc() 数据崩溃？

> ID：10857402
> 
> 赞同：0
> 
> 时间：2012-06-01T21:11:43.827
> 
> 标签：c++, visual-c++, malloc, stdvector

为什么会崩溃？我确实发现 malloc() 不调用构造函数，所以我自己手动调用了它们，但它仍然崩溃，我不明白为什么。

PS。我知道 std::vector 和 new[] 存在。不要告诉我使用vectors/new[] 作为答案。

```
struct MyStruct {
    vector<int> list;
};
void make_crash(){
    MyStruct *array = (MyStruct *)malloc(100*sizeof(MyStruct));
    MyStruct element; // initialize element here since malloc() doesnt do it.
    array[0] = element; // copy, everything should be alright?
    array[0].list.push_back(1337); // nope, BANG!
    // The above line makes these:
    // First-chance exception at 0x7c970441 in test.exe: 0xC0000005: Access violation reading location 0xbaadf005.
    // First-chance exception at 0x00401cd0 in test.exe: 0xC0000005: Access violation reading location 0xbaadf00d.
    // Unhandled exception at 0x00401cd0 in test.exe: 0xC0000005: Access violation reading location 0xbaadf00d.
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T21:14:11.907

在`array[0] = element;`您调用`operator=`of的行上`array[0]`。由于`array[0]`未初始化，因此这是未定义的行为。调用任何方法或运算符，包括`operator=`在尚未调用其构造函数的对象上，都是未定义的行为。

要解决您的问题，您要么需要使用placement new 来调用构造函数，`array[0]`要么只使用`new`代替`malloc`. 除非您有充分的理由使用`malloc`，否则后者更可取（甚至更好：使用向量）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T21:14:32.307

这不是就地初始化元素的方式。（隐式创建的）赋值运算符（调用向量的赋值运算符）正在一个不存在的对象上调用，这显然是个坏消息。

您必须改用placement new：

`new (array) MyStruct;`

对于数组：

`new (array) MyStruct[100];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:21:54.340

当你分配给一个`MyStruct`

```
array[0] = element; 
```

首先尝试破坏结构的旧成员 - 但没有任何，因为它们从未被构造。繁荣！

获得一百个`MyStruct`s 的最简单方法是使用另一个向量

```
vector<MyStruct>  v(100); 
```

无需使用`malloc`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T22:58:39.513

```
MyStruct *array = (MyStruct *)malloc(100*sizeof(MyStruct)); 
```

这就是你出错的地方。

`array`不是指向一个或多个`MyStruct`对象的指针，无论您给它什么类型。的返回值`malloc`是 a `void*`。C++ 的规则不允许你从 a 隐式`void*`转换为其他类型，这就是为什么你必须把它`(MyStruct*)`放在那里的原因。仅需要明确的演员表就应该告诉您您正在做一些阴暗的事情。

C++ 的规则规定，如果您将 a 显式`void*`转换为 some `Type*`（在某些特殊类型之外），则*仅*`void*`当您进行转换的最初 a`Type*`本身被转换为 a 时，这才是合法的`void*`。这不是原因；这`void*`来自`malloc`并且从来不是一个`MyStruct*`. 您在对编译器撒谎，因此会引发未定义的行为。因此崩溃。

如果您想要*定义*的行为，那么您需要实际使用 C++，而不是您正在发明的这种“我不敢相信它不是 C++”的语言。例如：

```
void *block = malloc(100 * sizeof(MyStruct));
MyStruct* array = new(block) MyStruct[100]; 
```

请注意这里完全没有演员表操作。

当然，删除这个数组很痛苦：

```
for(int i = 99; i >= 0; --i)
  array[i].~MyStruct();

free(block); 
```

请注意，您必须以与它们构建时相反的顺序向后销毁它们。

* * *

> 想知道这些东西是如何在内部工作的。new[] 是否会产生一些额外的内存来告诉我的 CPU 一些 malloc 没有的东西？以及为什么/什么/如何在没有 new[] 的情况下模仿它？还是新的安置？我如何用 CPU 的原始二进制代码编写它？有可能吗？神奇的 new[] 到底是什么？

所有这些都取决于实现。就语言而言，究竟发生了什么是明确定义的。除其他外，放置 new 将调用对象的构造函数。数组放置 new 将调用数组中所有对象的构造函数，从第一个到最后一个。如果其中一个抛出，那么它将在任何先前构造的对象上调用析构函数，然后发出异常。

正在做的事情是依赖于实现的，只不过是继承是如何实现的等等。显然，编译器会为它发出一些代码，但同样，发出的确切内容取决于实现。

只要您实际上是在编写 C++，就不可能“用 CPU 的原始二进制代码编写它”。要实现placement new，您必须能够调用类的构造函数。而且...嗯，这就是placement new 的*用途*。您甚至不允许获得指向构造函数的成员指针（即使可以，成员指针的内容也取决于实现，并且它们并不总是指向某个汇编函数的裸指针）。因此，如果没有特定于平台的陪审团操纵，甚至无法识别构造函数代码。

您可以通过查看生成的程序集来调用placement new，了解如何为特定系统执行此操作。但是每个编译器都会有所不同。

# ios - 找出 NSLogs 来自哪里？

> ID：10857404
> 
> 赞同：0
> 
> 时间：2012-06-01T21:11:49.357
> 
> 标签：ios, console, nslog

在我的应用程序中，我收到以下 3 个 NSLog：

```
AudioStreamBasicDescription:  2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved
2012-06-01 17:05:43.397 App[1579:707] authenticateWithCompletionHandler: enter
2012-06-01 17:05:43.399 App[1579:707] authenticateWithCompletionHandler: exit 
```

但是，我**不**知道这些 NSLog 是从哪里来的。有没有办法在不通过我项目中的每一堂课的情况下找出答案？

这些日志真的让我很烦，让实际看到真正的控制台输出变得更加困难。

任何意见，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:19:08.133

按`command + shift + f` write NSLog 并按 Enter键在项目范围内搜索 NSLog

如果您找不到 nslog，那么它们是从 SDK 中生成的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:18:00.710

是的，在 Xcode 中转到左侧的小搜索栏（见图），然后搜索正确的关键字。

![在此处输入图像描述](../Images/8cca2ab1eb7b4c052ed803170527527d.png)

注意：我猜你在项目中导入了一些 Game Center 的东西，它们可能来自那里

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T21:18:31.800

您可以尝试搜索 "NSLog(@"authenticateWithCompletionHandler" 如果没有产生任何结果，那么正如 Omar 所提到的，它可能来自操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T21:26:03.463

你真的应该把你的 NSLog 写得更详细。提供尽可能多的信息。您可能会考虑做的一件事是将所有 NSLog 语句替换为宏（IE：MYLog），如下所示：

```
#define MYLog(msg) NSLog(__FILE__ "(" __LINE__ "): " msg); 
```

然后，就像使用 NSLog 一样使用 MYLog。

注意：你可能需要稍微改变一下，因为 Obj-C 使用 '@' 前缀的字符串作为 NSStrings，而 NSLog 需要一个 NSString。我对预处理器不是很好，所以我不知道该怎么做，但我假设你会使用 '##' 预处理器运算符。

# concrete5 - 来自电子邮件的 Concrete5 表单动态

> ID：10857405
> 
> 赞同：1
> 
> 时间：2012-06-01T21:11:51.883
> 
> 标签：concrete5

我将默认表单块用于简单的联系表单。但是，不是电子邮件总是来自同一个（管理员）电子邮件，我想让它动态地提取用户填写联系表时提供的电子邮件。这会很难吗？我已经在询问他们的电子邮件......我只需要在发送电子邮件时获取该回复并将其设置为“发件人”字段。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:12:34.447

请参阅[http://www.concrete5.org/documentation/how-tos/developers/add-ability-in-contact-form-to-reply-to-the-submitter/](http://www.concrete5.org/documentation/how-tos/developers/add-ability-in-contact-form-to-reply-to-the-submitter/)

更新：以上链接已损坏，您可以在此处找到操作方法：[https ://legacy-documentation.concrete5.org/tutorials/add-ability-in-contact-form-to-reply-to-the-submitter](https://legacy-documentation.concrete5.org/tutorials/add-ability-in-contact-form-to-reply-to-the-submitter)

# php - 在 cron 上运行 PHP 脚本。日志输出不正确

> ID：10857408
> 
> 赞同：3
> 
> 时间：2012-06-01T21:12:03.860
> 
> 标签：php, cron

我有一个在 cron 上运行的 PHP 脚本，它具有以下功能：

1.  处理队列中的项目
2.  如果项目处理成功，则 processQueueItem() 方法返回 true。如果不成功，则返回 false。
3.  在 while 循环中重复 50 分钟

该代码还包括将信息输出到我设置的日志的回声。

这是代码：

```
<?php
require_once('/var/www/vhosts/com-ext.com/httpdocs/745_TheYGSGroup/LWC_API/com/MindFireInc/LookWhosClicking/class.LWC.php');    
require_once('/var/www/vhosts/com-ext.com/httpdocs/745_TheYGSGroup/LWC_API/com/MindFireInc/Database/class.DB.php');
require_once('/var/www/vhosts/com-ext.com/httpdocs/745_TheYGSGroup/includes/classes.php');

echo date("M d Y H:i:s"), " cron.processQueue.php has started.", "\n";

$consumer = new Consumer;

set_time_limit(3300);
$RUNS_MIN = 10;
$itemCount = 0;

$startedOn = time();
$expireOn = $startedOn + (60 * $RUNS_MIN); // In Sec
while( time() < $expireOn ) {

    if( $consumer->processQueueItem() )
        $itemCount++;

    if( $itemCount % 60 == 0 )
        echo date("M d Y H:i:s"), " Script still running... ", $itemCount, " processed.\n";

}

echo date("M d Y H:i:s"), " cron.processQueue.php has ended. Processed ", $itemCount, " items. \n"; 
```

?>

processQueueItem() 工作正常（这就是我没有在这篇文章中包含脚本的原因）并且输出工作正常，但是我对已处理项目的计数表现得很奇怪。

如果脚本运行并且队列为空，它将休眠(60) 并为 processQueueItem() 返回 false。它输出“cron.processQueue.php 已启动”以及 50 行“脚本仍在运行... 0 已处理”行。最后它输出“已结束”脚本。这是一个例子：

```
Jun 01 2012 11:00:02 cron.processQueue.php has started.
Jun 01 2012 11:01:02 Script still running... 0 processed.
Jun 01 2012 11:02:02 Script still running... 0 processed.
Jun 01 2012 11:03:02 Script still running... 0 processed.
Jun 01 2012 11:04:02 Script still running... 0 processed.
Jun 01 2012 11:05:02 Script still running... 0 processed.
Jun 01 2012 11:06:02 Script still running... 0 processed.
Jun 01 2012 11:07:02 Script still running... 0 processed.
Jun 01 2012 11:08:02 Script still running... 0 processed.
Jun 01 2012 11:09:02 Script still running... 0 processed.
Jun 01 2012 11:10:02 Script still running... 0 processed.
Jun 01 2012 11:11:02 Script still running... 0 processed.
Jun 01 2012 11:12:02 Script still running... 0 processed.
Jun 01 2012 11:13:02 Script still running... 0 processed.
Jun 01 2012 11:14:02 Script still running... 0 processed.
Jun 01 2012 11:15:02 Script still running... 0 processed.
Jun 01 2012 11:16:02 Script still running... 0 processed.
Jun 01 2012 11:17:02 Script still running... 0 processed.
Jun 01 2012 11:18:02 Script still running... 0 processed.
Jun 01 2012 11:19:02 Script still running... 0 processed.
Jun 01 2012 11:20:02 Script still running... 0 processed.
Jun 01 2012 11:21:02 Script still running... 0 processed.
Jun 01 2012 11:22:02 Script still running... 0 processed.
Jun 01 2012 11:23:02 Script still running... 0 processed.
Jun 01 2012 11:24:02 Script still running... 0 processed.
Jun 01 2012 11:25:02 Script still running... 0 processed.
Jun 01 2012 11:26:02 Script still running... 0 processed.
Jun 01 2012 11:27:02 Script still running... 0 processed.
Jun 01 2012 11:28:02 Script still running... 0 processed.
Jun 01 2012 11:29:02 Script still running... 0 processed.
Jun 01 2012 11:30:02 Script still running... 0 processed.
Jun 01 2012 11:31:02 Script still running... 0 processed.
Jun 01 2012 11:32:02 Script still running... 0 processed.
Jun 01 2012 11:33:02 Script still running... 0 processed.
Jun 01 2012 11:34:02 Script still running... 0 processed.
Jun 01 2012 11:35:02 Script still running... 0 processed.
Jun 01 2012 11:36:02 Script still running... 0 processed.
Jun 01 2012 11:37:02 Script still running... 0 processed.
Jun 01 2012 11:38:02 Script still running... 0 processed.
Jun 01 2012 11:39:02 Script still running... 0 processed.
Jun 01 2012 11:40:02 Script still running... 0 processed.
Jun 01 2012 11:41:02 Script still running... 0 processed.
Jun 01 2012 11:42:02 Script still running... 0 processed.
Jun 01 2012 11:43:02 Script still running... 0 processed.
Jun 01 2012 11:44:02 Script still running... 0 processed.
Jun 01 2012 11:45:02 Script still running... 0 processed.
Jun 01 2012 11:46:02 Script still running... 0 processed.
Jun 01 2012 11:47:02 Script still running... 0 processed.
Jun 01 2012 11:48:02 Script still running... 0 processed.
Jun 01 2012 11:49:02 Script still running... 0 processed.
Jun 01 2012 11:50:02 Script still running... 0 processed.
Jun 01 2012 11:50:02 cron.processQueue.php has ended. Processed 0 items. 
```

但是，如果队列中有 100 个项目（队列正在以大约每秒 1 个项目的速度处理），则脚本会完成所有项目，给出其最后一个“脚本仍在运行...”的输出，然后停止。由于此脚本在 cron 上运行，因此日志中列出的下一项是“cron.processQueue.php 已启动”。这是一个例子：

```
May 31 2012 16:30:01 pullData.php has started.
May 31 2012 16:31:18 Script still running... 60 processed.
May 31 2012 16:32:33 Script still running... 120 processed.
May 31 2012 16:33:48 Script still running... 180 processed.
May 31 2012 16:35:03 Script still running... 240 processed.
May 31 2012 16:36:19 Script still running... 300 processed.
May 31 2012 16:37:34 Script still running... 360 processed.
May 31 2012 16:38:50 Script still running... 420 processed.
May 31 2012 16:40:05 Script still running... 480 processed.
May 31 2012 16:41:21 Script still running... 540 processed.
May 31 2012 16:42:36 Script still running... 600 processed.
May 31 2012 16:43:51 Script still running... 660 processed.
May 31 2012 16:45:05 Script still running... 720 processed.
May 31 2012 16:46:22 Script still running... 780 processed.
May 31 2012 16:47:37 Script still running... 840 processed.
May 31 2012 16:48:52 Script still running... 900 processed.
May 31 2012 16:50:09 Script still running... 960 processed.
May 31 2012 16:51:31 Script still running... 1020 processed.
May 31 2012 16:52:46 Script still running... 1080 processed.
May 31 2012 16:54:01 Script still running... 1140 processed.
May 31 2012 16:55:16 Script still running... 1200 processed.
May 31 2012 16:56:32 Script still running... 1260 processed.
May 31 2012 16:57:47 Script still running... 1320 processed.
May 31 2012 16:59:02 Script still running... 1380 processed.
May 31 2012 17:00:17 Script still running... 1440 processed.
May 31 2012 17:01:33 Script still running... 1500 processed.
May 31 2012 17:02:48 Script still running... 1560 processed.
May 31 2012 17:30:01 cron.processQueue.php has started. 
```

我不太确定为什么我的进程在它有一些项目之后没有结束，然后在脚本的一次运行中没有项目。如果这没有任何意义，我真的很抱歉，但任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:33:22.613

问题肯定是`while`循环：

```
while( time() < $expireOn ) { 
```

此循环将一直运行到时间到期，并且**不**考虑队列的状态。您需要执行以下操作：

```
$continue = true;
while( time() < $expireOn && !($continue === false)) {

    if( $continue = $consumer->processQueueItem() ) 
```

这将导致循环在返回`while`后停止。`$consumer->processQueueItem()``false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:24:27.117

我敢打赌，问题在于 $consumer->processQueueItem()。它可能正在工作，但您可能没有返回 TRUE（或者根本没有任何值 [void]），因此您的项目计数器永远不会增加

# node.js - 找不到模块“现在”-nowjs 和 nodejs

> ID：10857409
> 
> 赞同：2
> 
> 时间：2012-06-01T21:12:15.673
> 
> 标签：node.js, nowjs-sockets

我在我的主文件夹（/home/myname/）中安装了 nodejs。到目前为止没有问题。然后我安装了 nowjs 并且有一个警告：

> 检查节点路径：未找到

现在，当我尝试这个例子时：http: [//nowjs.com/doc/example](http://nowjs.com/doc/example)我得到了错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^ Error: Cannot find module 'now'
    at Function._resolveFilename (module.js:334:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:357:17)
    at require (module.js:368:17)
    at Object.<anonymous> (/var/www/www.mydomain.de/htdocs/helloworld_server.js:7:13)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Array.0 (module.js:470:10) 
```

我猜路径有问题......有人知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:41:11.893

之前试试这个：

```
npm config set global true && \
     echo 'export NODE_PATH="'$(npm root -g)'"' >> ~/.bashrc && \
     . ~/.bashrc 
```

# binary-search-tree - 如何证明一棵完整的二叉树有 \lceil n/2 \rceil 叶？

> ID：10857414
> 
> 赞同：0
> 
> 时间：2012-06-01T21:13:01.633
> 
> 标签：binary-search-tree

给定具有 n 个节点的完全二叉树。我试图证明一棵完整的二叉树正好有 \lceil n/2 \rceil 叶。我想我可以通过归纳来做到这一点。

对于 h(t)=0，树是空的。因此，没有叶子，并且对一棵空树的主张成立。

对于 h(t)=1，树有 1 个节点，这也是一个叶子，所以该声明成立。在这里我被卡住了，我不知道选择什么作为归纳假设以及如何进行归纳步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:32:55.173

如果根节点不是叶子，那么它有两个子树，您可以递归求解。每个子树的叶子比非叶子节点多一个，因此当您将根（它的非叶子节点比叶子节点多一个！）和两个子树一起添加时，您会比非叶子节点多一个叶子，或者换句话说，叶子节点占节点数量的一半，四舍五入。

# javascript - 如何在 jQuery 中复制它？

> ID：10857415
> 
> 赞同：0
> 
> 时间：2012-06-01T21:13:03.180
> 
> 标签：javascript, jquery

我有这个代码：

```
/* Modify the footer row to match what we want */
var nCells = nRow.getElementsByTagName('th');
nCells[1].innerHTML = iPageCPSV;
nCells[2].innerHTML = iPageCGV;
nCells[3].innerHTML = iPagePPSV;
nCells[4].innerHTML = iPagePGV; 
```

它按原样工作得很好。但是，我`<tr>`现在在该部分中添加了另一个。而且我无法弄清楚如何`<th>`在第二个中填充`<tr>`

```
<tfoot>
    <tr style="background-color: #DDDDDD;">
        <th align="right" colspan="6">
            Page Total:
        </th>
        <th align="left"></th>
        <th align="left"></th>
        <th align="left"></th>
        <th align="left"></th>
    </tr>
    <tr style="background-color: #DDDDDD;">
        <th align="right" colspan="6">
            Downline Total:
        </th>
        <th align="left"></th>
        <th align="left"></th>
        <th align="left"></th>
        <th align="left"></th>
    </tr>
</tfoot> 
```

在我添加第二个之前`<tr>`，`<th>`一切正常。它仍然有效，我只是不知道如何将数据填充到第二行。谁能帮我修改现有的 JavaScript 或告诉我如何将它复制到 jQuery 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:19:02.637

没有 jQuery...

```
var foot = nRow.getElementsByTagName('tfoot')[0];
foot.rows[0].cells[1].innerHTML = iPageCPSV;
foot.rows[0].cells[2].innerHTML = iPageCGV;
foot.rows[0].cells[3].innerHTML = iPagePPSV;
foot.rows[0].cells[4].innerHTML = iPagePGV;

foot.rows[1].cells[1].innerHTML = iPageCPSV;
foot.rows[1].cells[2].innerHTML = iPageCGV;
foot.rows[1].cells[3].innerHTML = iPagePPSV;
foot.rows[1].cells[4].innerHTML = iPagePGV; 
```

或与...

```
var foot = $('tfoot').first();

foot.children().each(function(i, row) {

    row.cells[1].innerHTML = iPageCPSV;
    row.cells[2].innerHTML = iPageCGV;
    row.cells[3].innerHTML = iPagePPSV;
    row.cells[4].innerHTML = iPagePGV;
}); 
```

更现代的解决方案...

```
var rows = nRow.getElementsByTagName('tfoot')[0].rows,
    data = [iPageCPSV, iPageCGV, iPagePPSV, iPagePGV];

[].forEach.call(rows, function(el, i) {
    data.forEach(function(item, ii) {
        el.cells[ii + 1].innerHTML = item;
    });
}); 
```

* * *

由于每个单元格需要不同的数据，我建议将它们全部放在一个数组中，获取所有元素的集合，然后将两者配对......

```
var data = [iPageCPSV, iPageCGV, iPagePPSV, iPagePGV, 'foo', 'bar', 'baz', 'buz'];

$('tfoot > tr > th:not(:first-child)').html(function(i, el) {
    return data[i];
}); 
```

# python - Python调用模块

> ID：10857417
> 
> 赞同：3
> 
> 时间：2012-06-01T21:13:05.987
> 
> 标签：python

我试图调用模块，但由于某种原因它给了我错误。data.py 包含一个项目列表，在 main.py 中我试图迭代并打印这些项目。但我收到以下错误。

错误

```
Import error: No module named Basics 
```

data.py 和 main.py 都位于 c:/python27/basics/

数据.py

```
bob={'name':'bobs mith','age':42,'salary':5000,'job':'software'}
sue={'name':'sue more','age':30,'salary':3000,'job':'hardware'}
people=[bob,sue] 
```

主文件

```
from Basics import data

if __name__ == '__main__':
    for key in people:
        print(key, '=>\n  ', people[key]) 
```

如果我只提供导入数据，那么我会收到以下错误

名称错误：名称“人”未定义。

**更新：**

新代码：

```
from Basics import data

if __name__ == '__main__':

    for key in data.people:
        print(key, '=>\n  ', data.people[key]) 
```

TypeError：列表索引必须是整数，而不是字典

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:15:24.550

You will need `__init__.py` in your Basics directory

And

you will need to have that directory in your `PYTHON_PATH` or `sys.path`

To use people you need to do either of these.

```
from Basics.data import people 
```

Or

```
from Basics import data
print data.people 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:17:04.013

Did you make an `__init__.py` in `c:/python27/basics/` ?

Also it is probably good practice to make the case of the import `Basics` match the case of the directory `basics`. It doesn't matter on windows I think, but it certainly will under unix.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T11:12:59.283

对于第二部分，“people”对象是一个包含两个字典的列表。所以你想这样做：

```
for person in people:
  for key in person:
     print(key, '=>\n  ', person[key]) 
```

# c# - 使用 C# 访问 JSON 数据

> ID：10857424
> 
> 赞同：2
> 
> 时间：2012-06-01T21:13:32.393
> 
> 标签：c#, google-maps-api-3, json.net

我有一段时间从下面的 JSON 返回中访问数字距离“值”。我正在使用 JSON.NET 3.5 库。该程序因以下原因而死：

编译器错误消息：CS0119：“System.Xml.Linq.Extensions.Elements(System.Collections.Generic.IEnumerable, System.Xml.Linq.XName)”是一个“方法”，在给定的上下文中无效

源错误：

```
Line 64: GeoElements Elements =     JsonConvert.DeserializeObject<GeoElements>geoResponse.ToString());
Line 65: 
Line 66: count2 = geoResponse.Elements.Length;
Line 67: for (int j = 0; j < count2; j++)
Line 68: { 
```

这是 JSON 返回，后面是 C# 代码隐藏：

```
 {
    "destination_addresses" : [ "3095 E Patrick Ln, Las Vegas, NV 89120, USA" ],
    "origin_addresses" : [ "Vegas @ Advanced Tech Academy (E), Las Vegas, NV 89106, USA" ],
    "rows" : [
       {
          "elements" : [
             {
                "distance" : {
                   "text" : "13.4 mi",
                   "value" : 21573
                },
                "duration" : {
                   "text" : "24 mins",
                   "value" : 1429
                },
                "status" : "OK"
             }
          ]
       }
    ],
    "status" : "OK"
 } 
```

* * *

```
 public partial class maproute : System.Web.UI.Page
{ 

    public class GeoDistance
    {
        public string value { get; set; }
        public string text { get; set; }
    }
    public class GeoElements
    {
        public GeoDistance distance { get; set; }
    }

    public class GeoResult        
    {
        public GeoElements[] Elements { get; set; }             
    }         
    public class GeoResponse       
    {            
        public string Status { get; set; }           
        public GeoResult[] Rows { get; set; }
    } 

    public int parseDistance(string stream)
    {
        //process response file
        GeoResponse geoResponse = JsonConvert.DeserializeObject<GeoResponse>(stream);
        int dist = 0;
        int count = 0;
        int count2 = 0;
        try
        {
        if (geoResponse.Status == "OK")
        {
            count = geoResponse.Rows.Length;
            for (int i = 0; i < count; i++)
            {
                GeoElements Elements = JsonConvert.DeserializeObject<GeoElements>(geoResponse.ToString());

                count2 = geoResponse.Rows[i].Elements.Length;
                for (int j = 0; j < count2; j++)
                {
                    dist = geoResponse.Rows[i].Elements[j].distance.value;

                    //dist = dist/1609.3;  
                } 

                //dist = dist/1609.3;  
            }   

        }  

            //    dist = 4;  
        }
        catch(Exception ex)
        {
            Response.Write("DEBUG: ");
            Response.Write("Status: " + geoResponse.Status);
            Response.Write("</br>");
            Response.Write("Results: " + geoResponse.Rows.Length);
            Response.Write("</br>");                
        }
        return dist;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:04:17.233

终于找到问题了。我的课程定义错误。找到[http://json2csharp.com/](http://json2csharp.com/)我需要做的就是将我从 Google 获得的 JSON 数据放入框中，它为我生成了正确的类结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:17:02.273

Elements is array in JSON, but single value in your classes, making it array should work:

```
public GeoElements[] elements { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:37:24.873

> 反序列化的类型必须是数组或实现集合接口，如 IEnumerable、ICollection 或 IList。

它完全按照它在锡上所说的：你需要一个数组`GeoElements`来反序列化你的 JSON。你`GeoElement`在你的代码中是一个单一的值。它是您的 json 中的一个数组。因此，要么继承类中的`IList/ICollection`接口`GeoElement`，要么将 GeoElement 声明为 GeoElements 数组

```
class GeoElement : ICollection { ... } 
```

或者

```
GeoElement[] elements = JSONConverter.Deserialize(stream); 
```

# java - 本地 java 应用程序与 gwt 浏览器应用程序通信

> ID：10857434
> 
> 赞同：2
> 
> 时间：2012-06-01T21:14:14.933
> 
> 标签：java, gwt, browser

我的机器上运行了一个本地 Java 应用程序。我想将一些字符串数据发送到我的 gwt 浏览器应用程序。如果不使用 Java Robot 类，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:13:57.887

我目前正在做类似的事情，尽管我想让我的 GWT 应用程序来控制客户端上的 JAVA 机器人。

[进去](https://blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx)看看

JavaFX 似乎允许在 JFX-WebEngine 中的 JavaScript 和网站之间进行通信。可悲的是，我无法测试它如何与 GWT 应用程序一起使用，因为代码通常是模糊的，而且我不知道执行该 ATM 的正确 GWT 代码：

```
class Bridge {
    public void exit() {
        Platform.exit();
    }
}
...
JSObject jsobj = (JSObject) webEngine.executeScript("window");
jsobj.setMember("java", new Bridge()); 
```

可悲的是，我也没有时间在 GWT atm 中寻找合适的方法来做到这一点。但也许你可以从中找到一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T01:45:36.773

你试过[HttpClient](http://hc.apache.org/httpcomponents-client-ga/)吗？它允许模仿浏览器请求

# jsf-2 - 使用 JSF Liferay Portlet 的 PortletSession

> ID：10857437
> 
> 赞同：0
> 
> 时间：2012-06-01T21:14:24.777
> 
> 标签：jsf-2, liferay, portlet

我正在开发一个 JSF 2 Portlet，但我需要获取全局会话变量。

该请求适用于：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
    PortletRequest request = (PortletRequest) facesContext.getExternalContext().getRequest(); 
```

但会话为空：

```
PortletSession session = request.getPortletSession(false); 
```

如果将此代码放在 liferay-portlet.xml 文件中可以正常工作，但我不能进行 IPC：Inter Portlet 通信

```
<!-- Portlet session -->
    <private-request-attributes>false</private-request-attributes>
    <private-session-attributes>false</private-session-attributes> 
```

我如何在不使用最后一个代码的情况下获取和设置变量会话？

谢谢

今天我尝试了这个：

```
FacesContext facesContext = FacesContext.getCurrentInstance(); 
PortletRequest request = (PortletRequest) facesContext.getExternalContext().getRequest(); 
HttpServletRequest httpRequest = PortalUtil.getHttpServletRequest(request); 
HttpSession session = httpRequest.getSession(true); 
System.out.println(session.getAttribute("XXXX")); 
```

但为空

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:34:36.153

### 警告：`<private-session-attributes>false</private-session-attributes>`已知与 Liferay Faces 一起使用[会导致内存泄漏](https://issues.liferay.com/browse/FACES-2094)。使用风险自负！

重新排序它将起作用！

```
<portlet>
    <portlet-name>distribution</portlet-name>
    <icon>/icon.png</icon>
    <instanceable>false</instanceable>
    <private-session-attributes>false</private-session-attributes>
            ...
            ...
            ...
            ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:07:49.200

有 2 个选项：

1）在PortletSession中设置属性时，使用这个方法public void setAttribute(String name, Object value, int scope)，其中scope应该是`PortletSession.APPLICATION_SCOPE`

当您执行此操作时，请将其更改为您的`liferay-portlet.xml`

```
<private-request-attributes>false</private-request-attributes>
<private-session-attributes>false</private-session-attributes> 
```

### 警告：`<private-session-attributes>false</private-session-attributes>`已知与 Liferay Faces 一起使用[会导致内存泄漏](https://issues.liferay.com/browse/FACES-2094)。使用风险自负！

2）使用`HttpSession`代替`PortletSession`，为了得到`HttpSession`，请使用`PortalUtil.getHttpServletRequest(portletRequest)`and从httpServletRequest，得到HttpSession。

希望这可以帮助。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T21:51:24.473

### 警告：`<private-session-attributes>false</private-session-attributes>`已知与 Liferay Faces 一起使用[会导致内存泄漏](https://issues.liferay.com/browse/FACES-2094)。使用风险自负！

我解决了配置 liferay-portlet.xml 的问题

1.) 我只更改了 liferay-portlet.xml：

```
<private-session-attributes>false</private-session-attributes> 
```

2.) 在我创建的 Java 类中：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
PortletRequest request = (PortletRequest) facesContext.getExternalContext().getRequest();
PortletSession session = request.getPortletSession(false); 
```

如果您获得会话属性

```
session.getAttribute("XXXXXX",PortletSession.APPLICATION_SCOPE); 
```

如果您设置会话属性

```
session.setAttribute("NAME","VALUE",PortletSession.APPLICATION_SCOPE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:40:54.087

克里斯蒂的第二个选项对我有用。当我设置

```
<private-session-attributes>false</private-session-attributes> 
```

它导致我的 portlet 部署失败。解析 xml 文件时出错。

我不知道为什么。Liferay 版本 6.1.1

# c# - PredicateBuilder 创建 where 条件列表

> ID：10857441
> 
> 赞同：0
> 
> 时间：2012-06-01T21:14:37.140
> 
> 标签：c#, linq, linq-to-sql

我有这样的事情：

```
class myClass {
  protected ICollection<Expression<Func<event_info, bool>>> _whereConditionsList = new List<Expression<Func<event_info, bool>>>();

  public void main() {
    _whereConditionsList.Add(ev => ev.createdby == 6);
    var query = from ev in dataConnection.event_info
                where ev.isdeleted == 0
                select ev;
    if (_whereConditionsList.Count() > 0) {
      var predicate = PredicateBuilder.True<event_info>();

      foreach (var whereCond in _whereConditionsList) {
        predicate = predicate.And(whereCond);
      }
      query = query.Where(predicate);
    }
  evInfo = query.ToList(); 
} 
```

但它在将其实际转换为 SQL 代码时遇到了问题，因为它在进入 query.ToList() 时会抛出此错误：

```
System.NotSupportedException: The LINQ expression node type 'Invoke' is not supported in LINQ to Entities.
 ...
 at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
 ... 
```

我的方法做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T03:45:58.087

原来必须这样做： [Combine Predicates in Linq-to-entities](https://stackoverflow.com/questions/10875547/combine-predicates-in-linq-to-entities)

概要：query.AsExpandable().Where()

# java - Manually serializing Jersey Response

> ID：10857444
> 
> 赞同：0
> 
> 时间：2012-06-01T21:15:09.070
> 
> 标签：java, jersey

I have a resource:

```
@Path("/")
public class Resource {

   @GET
   public Response getResponse() {
       //..
       final GenericEntity<List<BusinessObject>> entity = new GenericEntity<List<BusinessObject>>(businessobjects) { };
       return Response.status(httpResultCode).entity(entity).build();
   }

} 
```

I want to unit test this method without using a Jersey client, but I don't know how to get the body of the Response object. I can't see a method that works. Here's the test method:

```
@Test
public void testMethod() {
    Resource resourceUnderTest = new Resource();
    Response response = resourceUnderTest.getResponse();
    List<BusinessObject> result = ???;
} 
```

I can get the result I want if I go though a Jersey Client, but I would rather just call the method directly without making any HTTP requests.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:58:10.670

```
List<BusinessObject> result = (List<BusinessObject>)response.getEntity(); 
```

这将返回您传递给响应构建器的实体方法的对象。Response 对象不序列化结果。查看前面的方法，getEntity 可能会返回 GenericEntity>，所以您需要这样的代码。

```
GenericEntity<List<BusinessObject>> result = (GenericEntity<List<BusinessObject>>)response.getEntity(); 
```

# jquery - 如何使用 jQuery 在特定类中选择跨度？

> ID：10857454
> 
> 赞同：0
> 
> 时间：2012-06-01T21:15:52.710
> 
> 标签：jquery, syntax

我有这样的事情：

```
<table>
  <tr class="row_class_name">
    <td><span></span></td>
    <td>...</td>
  <tr>
</table> 
```

现在我想将`<span>`元素隐藏在`<td>`. 我正在尝试使用
`$('.row_class_name span')`，但它似乎不起作用。

我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T21:18:06.227

正如凯文所说，你的代码应该可以工作。它可能无法正常工作**，因为您没有关闭`<tr>`标签。**

确认问题是您的无效 HTML。请在此处查看工作示例。我所做的只是关闭`<tr>`标签。

[**演示**](http://jsfiddle.net/24NVp/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:17:48.233

尝试如下，

```
$('.row_class_name').find('span') 
```

如果只是第一列，

```
$('.row_class_name td:first').find('span') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:19:54.863

它工作得[很好](http://jsfiddle.net/azizpunjani/a2C87/)。尽管您的标记需要一些更正，特别是结束`</tr>`标记。

# visual-sourcesafe - Visual Studio 2012 RC 与 SourceSafe 的集成状态如何？

> ID：10857457
> 
> 赞同：0
> 
> 时间：2012-06-01T21:15:56.267
> 
> 标签：visual-sourcesafe, visual-studio-2012

我已经安装了 Visual Studio 2012 RC 并尝试在我的一个“工作”项目上做一些工作。它似乎可以工作，但在显示一些升级屏幕和 Source Safe Login 框后，Visual Studio 2012 RC 会静默崩溃。

所以我的问题是，Visual Studio 2012 的源代码安全支持是什么。

它应该工作还是不支持？任何指向博客和官方版本的指针将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:10:00.187

Visual Studio 2012 支持 Visual SourceSafe。您能否安装 Visual Studio 反馈工具 ( [http://visualstudiogallery.msdn.microsoft.com/f8a5aac8-0418-4f88-9d34-bdbe2c4cfe72](http://visualstudiogallery.msdn.microsoft.com/f8a5aac8-0418-4f88-9d34-bdbe2c4cfe72) ) 向我们发送有关此问题的详细信息？

1.  安装 VS 11 反馈工具
2.  重启VS
3.  帮助菜单 | 报告错误
4.  使用您的 Live ID 登录
5.  类型 = “崩溃”
6.  输入描述性标题
7.  在描述字段中，列举重现问题的确切*最小步骤*
8.  按“录制”按钮
9.  完成在 VS 上重现崩溃的步骤
10.  崩溃后按“停止录制”按钮
11.  按“提交”按钮

这将向我们发送一个 Connect 错误，然后我们可以在内部进行审查并跟进。您将能够通过[http://connect.microsoft.com/VisualStudio/feedback/details/](http://connect.microsoft.com/VisualStudio/feedback/details/) **[ConnectID]**与我们沟通并查看对您的错误采取的措施，其中**[ConnectID]**将在第 10 步之后提供给您。

感谢您报告此问题。

# linux - Generate a list of users with read access to files

> ID：10857461
> 
> 赞同：2
> 
> 时间：2012-06-01T21:16:23.373
> 
> 标签：linux, shell, permissions

Hi I'm working in a Linux environment and I'm trying to write a command that will take a path as input and output a list of all users with read access to that file/directory.

For example, if file /a/b/c is owned by userid, u, and groupid, g, with some permissions, I want this command to identify the permissions of /a and /a/b and then calculate all the users who can read c. In particular, I'm having trouble when groups get involved.

I am trying to separate identifying read access based off group into cases:

1) g matches the gid of c's parent's gid, gp, (or grandparent, etc..), in which case, any member of g can read c if gp has permission: 040, or less restrictive.

2) g is different than c's parent's gid, gp. Two subcases:

...a) userid m is a member of g (for all m in g (m does not own c)) and owns c's parent, p. Then m can read c if p has permission: 400, or less restrictive.

...b) userid m is a member of g (for all m in c's gid (m does not own c)) and does not own c's parent, p. Then m can read c if p has permission: 004 or less restrictive.

3) u owns p, in which case p needs permissions 400 or less restrictive.

By the way, I have root access on this system. I imagine I'll have to make a series of cats to /etc/group and /etc/passwd and grep for relevant info, which is fine. Also, we can consider 'stat's free in this environment (it's part of a bigger project where we already have this info).

I guess what I'm looking for is an existing solution, pseudo code, or someone to help me brainstorm an algorithm and other considerations that I'm missing. Feel free to ask clarifying questions if necessary - I know this pseudo logic here isn't the easiest to read. Thanks guys.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:48:59.890

我认为您的最佳解决方案如下：

1.) 确定 c 的许可。

```
if(b does not have a minimum of world execute bit settings) i.e. 711
      return error; ( or owner && root)
      // you can easily extend this check to recursively work back to /
if (c has global read permissions) 
       return everyone;
else if (c has group read permissions)
       determine group name && return all members of said group
else (return owner && root) 
```

2.) 可以使用 getent 确定所述组的成员。例如： getent group - 返回系统上的所有组 getent passwd - 返回所有用户 3.) 权限可以用“stat c”或类似的东西来确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:26:53.173

`cat`ing有缺陷；改为使用`getent`。不要忘记检查 ACL。

# python - Using both SQLAlchemy and Django ORM on the same database

> ID：10857462
> 
> 赞同：8
> 
> 时间：2012-06-01T21:16:24.313
> 
> 标签：python, django, postgresql, orm, sqlalchemy

I have two apps that both access the same database. The first has clients connecting via TCP and writes to the db using SQLAlchemy. The second is a more typical webapp using Django. Both have read/write requirements.

I would like to unify the database access layer, but picking just SQLAlchemy or just Django is unattractive because:

1.  I would like to use django auth, permissions, and maybe third party plugins, which require the Django ORM (correct me if I'm wrong).
2.  For the first app, using SQLAlchemy (so far) is much simpler than trying to use the Django ORM outside of a Django app - it is a TCP/IP server app, not a HTTP/web app.

Are there any problems with mixing these two ORMs on the same database?

In which system (Django, SQLA) should I create the models, vs using some kind of introspection such as [Django inspectdb](https://docs.djangoproject.com/en/dev/howto/legacy-databases/?from=olddocs)?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:52:12.880

`manage.py`首先 - 在、*WSGI 处理程序*和其他与 HTTP 相关的东西之外使用 Django ORM 并不难。您可以在任何 python 脚本中使用它，但它需要一些初始化（[示例](https://stackoverflow.com/questions/8047204/django-script-to-access-model-objects-without-using-manage-py-shell)）。

其次 - SQLA 是一个非常强大的工具，它能够完成在 Django ORM 中很难实现的事情（如真正的多态性和多态性查询）。如果必须选择，我个人会选择使用 Django ORM 作为创建模型的平台，然后在 SQLA 中手动映射它们，因为它更灵活，希望能够采用。在相反的情况下可能不起作用。

最后，由于你可以在两边都使用 Django ORM，而你只**需要**使用 Django ORM 因为插件，我建议放弃 SQLA。这是一个强大的工具，但也相当复杂。在一个数据库上运行两个不同的 ORM 可能会导致未来出现意外问题并增加应用程序的复杂性，因此维护起来会更加困难。

# python - Indexing lines of text in a .txt file

> ID：10857464
> 
> 赞同：0
> 
> 时间：2012-06-01T21:16:45.653
> 
> 标签：python, dictionary

Say I have a .txt file. The file contains alternating lines of words and numbers:

```
Mary
156
Sue
160
Jenn
154 
```

I want to put these alternating lines into a dictionary like ('Mary': 156). My first thought was to use a for-loop with the % operator but I'm still stuck on actual implementation. Is it possible to index lines in a text file? What my train of thought is so far:

```
for i in range(len(text)):
    if i%2 == 0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T21:19:34.457

**Edit2：**可以更简单地做到这一点：

```
with open("data.txt") as inf:
    data = {name.strip():int(num) for name,num in zip(inf, inf)) 
```

返回

```
{'Mary': 156, 'Sue': 160, 'Jenn': 154} 
```

**编辑3：（**回复评论）：

```
"Mary,Jade,Jenn\n".split(',', 1) 
```

返回

```
["Mary", "Jade,Jenn\n"] 
```

所以如果你只想要一个字符串到第一个逗号，你可以这样做

```
name = in_string.split(',', 1)[0]    # => "Mary" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:18:47.183

你可以这样做

```
with open("data.txt") as data:
    for line in data:
        name = line.strip()
        number = data.readline()
        print name
        print number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:19:00.587

怎么样？

```
for i in range(0, len(text), 2) 
```

但实际上不需要这样做，因为您可以通过简单的方式加载它：

```
s = """Mary
156
Sue
160
Jenn
154"""

lines = s.splitlines()
lines = zip(*[iter(lines)]*2)
d = dict(lines)

print d 
```

# android - How to extract few rows from a Android Cursor and save them in another Cursor?

> ID：10857465
> 
> 赞同：0
> 
> 时间：2012-06-01T21:16:47.623
> 
> 标签：android

I was just wondering is it possible to extract few rows from a Android `Cursor` and save them in another `Cursor`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:18:40.180

您可以创建[一个`MatrixCursor`](http://developer.android.com/reference/android/database/MatrixCursor.html)基于原始数据的`Cursor`.

# c# - What exactly is "pinning" in relation to indexes in DBMS?

> ID：10857468
> 
> 赞同：7
> 
> 时间：2012-06-01T21:16:54.760
> 
> 标签：c#, mysql, sql, database, oracle

As part of a test question, students were asked to define and describe pinning in relation to indexes. When one talks about "pinning" in indexes, what exactly is this? Is there some other word/term I can search for, as google has not provided any solutions.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:28:56.993

当一个表或索引被*固定*时，这意味着它被保存在内存中。

数据库分配了一定数量的内存以供使用。通常，数据库缓存最近使用的数据。

当一个索引被*pinned*时，这意味着该索引被永久保存在内存中，而不是在缓存中被老化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:38:41.563

在 DBMS 中固定某些内容意味着确保该事物始终保存在内存中。

它经常用于热索引，这些索引会看到很多针对它们的查询，但可能会因数据库缓存老化而不得不从磁盘重新加载。通过将索引固定在内存中，索引扫描理论上永远不需要磁盘访问。

在索引较大的情况下，固定会显着提高性能，因为不需要频繁刷新缓存。

# google-maps-api-3 - How to save map drawing state (Polygon, Polyline, Markers)

> ID：10857469
> 
> 赞同：3
> 
> 时间：2012-06-01T21:16:57.370
> 
> 标签：google-maps-api-3, drawing, kml

I want to enable drawing on Google Maps like ([see this example](https://google-developers.appspot.com/maps/documentation/javascript/examples/drawing-tools)) When user finish with drawings he will click on save button to save his drawings in Database or KML file, anything :) .. I do not know how to the save part? Could anyone help me

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T22:44:44.003

在这里，[http://jsfiddle.net/X66L4/1/](http://jsfiddle.net/X66L4/1/)尝试绘制一些圆圈，单击保存，然后通过切换到手形光标编辑圆圈并再次保存以查看更改。

我展示了一个保存圆数据的示例，主要思想是为每种绘图类型（线、多边形、标记、圆）保留一个全局数组，并在绘图管理器上使用侦听器来检测正在绘制的每种类型（完成） .

```
 var circles = [];

  google.maps.event.addDomListener(drawingManager, 'circlecomplete', 
    function(circle) {
      circles.push(circle);
    }); 
```

保存对绘制对象的整个引用的原因是为了继续跟踪更改。因此，对于每种类型的绘图，您都需要一个数组和侦听器。

然后，当您想要保存数据时（您可能希望在每次编辑时都这样做），遍历数组并提取最少的信息来重建它（中心、半径、路径、latLng 等）。

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=drawing"></script>
    <script type="text/javascript">
var myOptions = {
  center: new google.maps.LatLng(-25,177.5),
  zoom: 3,
  mapTypeId: google.maps.MapTypeId.SATELLITE
};

    var map;

    function initialize() {
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.CIRCLE,
      drawingControl: true,
      drawingControlOptions: {
        position: google.maps.ControlPosition.TOP_CENTER,
        drawingModes: [google.maps.drawing.OverlayType.CIRCLE]
      },
      circleOptions: {
        editable: true
      }
    });

      drawingManager.setMap(map);
      var circles = [];

      google.maps.event.addDomListener(drawingManager, 'circlecomplete', function(circle) {
        circles.push(circle);
      });

      google.maps.event.addDomListener(savebutton, 'click', function() {
        document.getElementById("savedata").value = "";
        for (var i = 0; i < circles.length; i++) {
          var circleCenter = circles[i].getCenter();
          var circleRadius = circles[i].getRadius();
          document.getElementById("savedata").value += "circle((";
          document.getElementById("savedata").value += 
            circleCenter.lat().toFixed(3) + "," + circleCenter.lng().toFixed(3);
          document.getElementById("savedata").value += "), ";
          document.getElementById("savedata").value += circleRadius.toFixed(3) + ")\n";

        }
      });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <button id="savebutton">SAVE</button>
    <textarea id="savedata" rows="8" cols="40"></textarea>
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-25T11:38:47.877

根据我的经验，使用地图的 dataLayer 比使用绘图管理器更容易。试试这个小提琴。

[FiddleLink](http://jsfiddle.net/dg9e93qy/)

显示控件：

```
map.data.setControls(['Polygon']);
map.data.setStyle({
    editable: true,
    draggable: true
}); 
```

在此函数中，您可以看到 Create、Read (localStorage) 和 Remove（不是按此顺序）：

```
function loadPolygons(map) {
var data = JSON.parse(localStorage.getItem('geoData'));

map.data.forEach(function (f) {
    map.data.remove(f);
});
console.log(data);
map.data.addGeoJson(data)
} 
```

# ios - Why am I unable to remove my annotations from mapview?

> ID：10857473
> 
> 赞同：0
> 
> 时间：2012-06-01T21:17:06.690
> 
> 标签：ios, xcode, annotations

Why am I unable to remove my annotations from mapview?

My code:

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self becomeFirstResponder];

    NSMutableArray *annotations = [[NSMutableArray alloc]init];

     NSString *path = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
     NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
    {
        NSLog(@"Black is on");

    NSArray *ann = [dict objectForKey:@"Category1"];

    for(int i = 0; i < [ann count]; i++) {

        NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

        double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
        double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

        MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
        CLLocationCoordinate2D theCoordinate;
        theCoordinate.latitude = realLatitude;
        theCoordinate.longitude = realLongitude;

        myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);

        myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
        myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
        myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
        {
            NSLog(@"Black is on");
            [mapView addAnnotation:myAnnotation];
            [annotations addObject:myAnnotation];

        }   else 
            {
                NSLog(@"Black is off");

                [self.mapView removeAnnotation:myAnnotation];

            } 

        }

    }   

    else 
    {
        //Do nothing
    } 

} 
```

`[self.mapView removeAnnotation:myAnnotation];` does not work for me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:51:01.287

没有什么可以删除的。您创建注释，然后根据对 blackKey 的检查，添加或删除它。但是，当您删除它时，您从未在此之前添加它。

# bash - Scroll problems with empty PS1

> ID：10857474
> 
> 赞同：1
> 
> 时间：2012-06-01T21:17:20.537
> 
> 标签：bash, scroll, ps1

If I scroll up through the history and come across a long line that wraps, then scroll back down, the lines will be scrambled.

I have read around that this can be caused by incorrectly escaping color codes, but this happens even with an empty PS1, e.g.

```
export PS1="" 
```

In response to comment

```
echo "[$PROMPT_COMMAND]"
[]
echo "[$PS1]"
[] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:04:12.600

只需按下`Ctrl+L`即可刷新显示。

我认为问题更多在于**Bash**不知道长命令被分成多行。

# c# - EF add-migration exception: could not load assembly

> ID：10857476
> 
> 赞同：7
> 
> 时间：2012-06-01T21:17:33.110
> 
> 标签：c#, entity-framework-migrations

I have only 2 days experience with EF Migrations, so please be kind...

I have a fairly large existing WPF WCF MVVM EF 4.1 solution which needs to be migrated to EF 4.3.1 and begin using Migrations. The solution's "Services" project contains four DbContext's, each in its own namespace, and each associated with its own database.

Before I began modifying the large solution, I did some experimentation with a small sample console app with only a single project and two DbContexts, mostly based on the example provided by "e10" ([EF 4.3 Auto-Migrations with multiple DbContexts in one database](https://stackoverflow.com/questions/9110536/ef-4-3-auto-migrations-with-multiple-dbcontexts-in-one-database)). The sample app works well, and I can do add-migration and update-database separately for the two contexts (by specifying the -configuration parameter).

But when I tried to replicate the same approach with the "real" (large) solution - with four DbContexts - I ran into a problem: when I invoke add-migration in PMC and specify any of the four configuration names, add-migrations gets an exception saying it can't load the Services assembly.

Here's what I did with the large solution:

1) Added the EF 4.3.1 NuGet package to my Core, Services and UI projects (this last bit may be important).

2) created a Migrations folder in my Services project and manually created a Configuration.cs file containing four classes which inherit from DbMigrationsConfiguration<*type*>, where type is App, Catalog, PortfolioManagement or Scheduler. (code is below)

3) added a property to one of the model classes associated with the App DbContext, so there would be something to migrate

4) from the PMC, invoked add-migration:

```
 PM> add-migration App_AddNewProperty -config App 
```

Note that I didn't do "Enable-Migrations" because, as e10 said in his post:

" You dont need to enable migration since you already did with the ... classes above" (referring to the classes in Configurations.cs).

5) add-migration gets exception: Could not load file or assembly 'MyApp.Services' or one of its dependencies

I enabled binding-failure logging, and the failure log shows that it's trying to locate the Services assembly in the **UI's** bin/debug folder, rather than in the Services project).

And it fails the same way even if I have the Default Project in the PMC set to the Services project (Default Project defaults to the UI project).

I suspect this is caused by the UI not having a reference to the Services assembly (it has a WCF *Service* Reference, but not an assembly reference). But if this is the problem, how do I force PMC to not start at the UI project? Or can I "unassociate the UI project from the EF package"?

Thanks!

DadCat

Configurations.cs:

```
namespace MyApp.Services.Migrations
{
    internal sealed class App : DbMigrationsConfiguration<Geophysical.Skimmer.Services.App.Repository.ModelContainer>
    {
        public App()
        {
            AutomaticMigrationsEnabled = false;
            MigrationsNamespace = "MyApp.Services.App.Repository.ModelContainer";
        }

        protected override void Seed(MyApp.Services.App.Repository.ModelContainer context)
        {
            ... no code here
        }
    }

    internal sealed class Catalog : DbMigrationsConfiguration<Geophysical.Skimmer.Services.Catalog.Repository.ModelContainer>
    {
        public Catalog()
        {
            AutomaticMigrationsEnabled = false;
            MigrationsNamespace = "MyApp.Catalog.Repository.ModelContainer";
        }

        protected override void Seed(MyApp.Services.Catalog.Repository.ModelContainer context)
        {
            ... no code here

        }
    }

    internal sealed class PortfolioManagement : DbMigrationsConfiguration<Geophysical.Skimmer.Services.PortfolioManagement.Repository.ModelContainer>
    {
        public PortfolioManagement()
        {
            AutomaticMigrationsEnabled = false;
            MigrationsNamespace = "MyApp.PortfolioManagement.Repository.ModelContainer";
        }

        protected override void Seed(MyApp.Services.PortfolioManagement.Repository.ModelContainer context)
        {
            ... no code here
        }
    }

    internal sealed class Scheduler : DbMigrationsConfiguration<Geophysical.Skimmer.Services.Scheduler.Repository.ModelContainer>
    {
        public Scheduler()
        {
            AutomaticMigrationsEnabled = false;
            MigrationsNamespace = "MyApp.Services.Scheduler.Repository.ModelContainer";
        }

        protected override void Seed(MyApp.Services.Scheduler.Repository.ModelContainer context)
        {
            ... no code here
        }
    }
} 
```

# ios - NSMutable Array won't alloc, remains nil

> ID：10857481
> 
> 赞同：0
> 
> 时间：2012-06-01T21:17:57.060
> 
> 标签：ios, xcode, nsmutablearray, alloc

A XML parser is trying to alloc its delegate's NSMutable array called **masterCodeList**. From the following code, you'll see that this fails. (I am a total newbie.)

```
if (dataController.masterCodeList == nil){

    dataController.masterCodeList =[[NSMutableArray alloc] init];
    if (dataController.masterCodeList == nil) {
        NSLog(@"the init of the mutable array did NOT work");
    }
} 
```

I get the `the init of the mutable array did NOT work` message every time. I am importing the dataController header.

```
#import "CodeDataController.h" 
```

I am getting no other error message, the parser is parsing fine and the app is running smoothly without content.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:23:29.760

您对 masterCodeList 的声明是什么样的？它是一个属性，它是合成的，还是你正在制作自己的 setter/getter？

另一种方法是尝试使用中间占位符，即：

```
NSMutableArray *temp = [[NSMutableArray alloc] init];
[dataController setMasterCodeList:temp]; 
```

看看这是否正确设置了你的数组。

（注意：该代码可能有泄漏，也可能没有泄漏）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:26:26.700

你能在这个类中发布你对 dataController 对象的实现，以及它在另一个类中的属性吗？

您可能还想尝试使用 isEqual 方法而不是 == nil。

# php - Facebook 登录按钮不可见

> ID：10857486
> 
> 赞同：0
> 
> 时间：2012-06-01T21:18:09.243
> 
> 标签：php, facebook

我从[此处](https://developers.facebook.com/docs/guides/web/#login)的 facebook 官方示例中获取了 facebook 登录按钮示例。这是代码（没有任何更改）。

```
<html>
<head>
  <title>My Facebook Login Page</title>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '385937518116668',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true,
      });
    };
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));
  </script>
  <div class="fb-login-button">Login with Facebook</div>
</body> 
```

按原样运行此示例时，一切正常。但是，一旦我删除了 html、head 和 body，我就看不到 facebook 登录按钮。我看到的只是“使用 facebook 登录”文本。我想删除这些标签的原因是该页面包含在另一个 php 文件中。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:01:43.673

以下对我有用：

facebookLogin.html.php

```
<html>
<head>
    <title>My Facebook Login Page</title>
</head>
<body>
<?php
    include 'fblogin.html';
?>
</body>
</html> 
```

fblogin.html 文件的内容是：

```
<div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '385937518116668',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true,
      });
    };
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));
  </script>
  <div class="fb-login-button">Login with Facebook</div> 
```

# assembly - 简单的 ASM 引导加载程序到 iso

> ID：10857489
> 
> 赞同：1
> 
> 时间：2012-06-01T21:18:24.887
> 
> 标签：assembly, x86, nasm, boot, bootloader

我创建了一个简单的 asm hello world x86 引导加载程序，我想将它嵌入到一个 iso 文件中，我正在关注这个[http://wiki.osdev.org/Bootable_El-Torito_CD_with_GRUB_Legacy](http://wiki.osdev.org/Bootable_El-Torito_CD_with_GRUB_Legacy)但这将我的内核嵌入到 grub 中，而不仅仅是一个引导加载程序

我不想再次依赖软盘映像，如何为我的 512 字节引导加载程序创建 ISO 文件？（替换现有的 iso 文件引导加载程序并不完全是我喜欢的解决方案，我宁愿做其他事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:13:18.203

我能想到的最简单的答案就是[这个](http://wiki.osdev.org/El-Torito)。

# asp.net-mvc - 如何将日志记录注入基于 EF 的部分模型类？

> ID：10857493
> 
> 赞同：0
> 
> 时间：2012-06-01T21:18:38.850
> 
> 标签：asp.net-mvc, ninject

我正在使用 Ninject 3.x 和 NLog 2.x 的 Nuget 下载。我已经通过我的控制器类上的构造函数注入让 ILogger 工作，但我不知道如何使它在我的模型类中工作。我的模型是与 ADO.NET EntityObject Generator 生成的类相关联的部分类。

我已经尝试使用和不使用 [Inject] 属性的属性注入，但它总是返回 null。我不确定我需要做什么，因为控制器构造函数注入是全自动的。

最终，我想我想将我的模型移动到他们自己的库中，以便它们可以重复使用，但现在我会对任何答案（甚至特定于 asp.net mvc 3 项目）感到满意，以使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:32:33.297

看起来 EF 并没有真正允许 IoC 用于创建模型，至少在不修改 T4 模板的情况下。我可以给出的一个建议是使用ObjectContext 的[ObjectMaterialized](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.objectmaterialized.aspx)事件，如下所示：

```
partial void OnContextCreated()
{
    ObjectMaterialized += BAEntities_ObjectMaterialized;
}

public void BAEntities_ObjectMaterialized(object sender, ObjectMaterializedEventArgs e)
{
    if (e.Entity is MyEntityWithLogging)
    {
        //apply initialization logic here
        ((MyEntityWithLogging)e.Entity).Logger = kernel.Get<ILogger>();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:31:35.380

实体不应该有任何依赖关系。因此它们不应该由 IoC 容器创建。重新考虑您的设计，使业务逻辑不再存在于您的实体中。

# c# - 如何恢复提交？

> ID：10857495
> 
> 赞同：1
> 
> 时间：2012-06-01T21:18:42.250
> 
> 标签：c#, libgit2, libgit2sharp

我尝试查看 LibGit2Sharp 中的每个对象，但我无法找到恢复特定提交的方法。是否可以恢复 LibGit2Sharp 中的提交或尚未撤消？

我本来会期待类似的`repo.Revert(commit.Sha)`，甚至可能是`commit.Revert()`.

也许可以通过对更改进行差异来实现这一点，并手动创建一个 blob 并提交它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:00:06.177

> 是否可以恢复 LibGit2Sharp 中的提交或尚未撤消？

不幸的是，**Revert**尚不可用。

> 也许可以通过对更改进行差异来实现这一点，并手动创建一个 blob 并提交它？

实际上，这将是一个很好的起点，但这需要“应用/合并”反向差异，这在“手动”完成时可能非常麻烦和/或容易出错。

## 更新

Revert 刚刚被合并到开发分支中。有关API 和测试用例的更多详细信息，请参阅**[Pull Request #706 。](https://github.com/libgit2/libgit2sharp/pull/706)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T21:33:04.793

好吧，我对 libgit2sharp 不熟悉，但是要使用 git 撤消提交，您通常会执行“commit --amend”或“git reset”，并且应该有可能使用 libgit2sharp 发出这些命令。

# java - 如何将事件添加到复选框？

> ID：10857498
> 
> 赞同：1
> 
> 时间：2012-06-01T21:18:51.850
> 
> 标签：java, swing, user-interface, graphics2d, jcheckbox

我尝试绘制一些形状，我需要添加更改颜色作为选择复选框的事件。如何编写`tmp`当我选择复选框时会改变颜色的新方法？

我创建 JCheckBox 的方法：

```
public class Paint extends JFrame {
public Paint() {

    JCheckBox redBtn = new JCheckBox("Red");

} 
```

}

绘制矩形颜色的方法：

```
private class PaintSurface extends JComponent {
    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        Color tmp = null;   //If no checkbox selected, no color

        for (Shape s : shapes) 
            g2.setPaint(tmp);  //Here is color of shape
            g2.fill(s);
        }
    } 
```

**编辑：**

ActionListener 应该是这样的吗？

```
ActionListener actionListener = new ActionListener() {
              public void actionPerformed(ActionEvent actionEvent) {
                  JCheckBox a = (JCheckBox) actionEvent.getSource();
                 Color tmp = redBtn.isSelected() ? Color.RED : null;
              }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:20:59.020

您可以向 JCheckBox 添加一个 ActionListener，它只调用`repaint()`绘图 JComponent。然后在paintComponent 内部，通过调用它来检查复选框的状态`isSelected()`，并将您的颜色基于布尔结果。

```
Color tmp = redBtn.isSelected() ? SELECTED_COLOR : null; 
```

# spotify - libspotify API：有没有办法在不使用“music_delivery”回调的情况下检索音频采样率或比特率？

> ID：10857502
> 
> 赞同：0
> 
> 时间：2012-06-01T21:19:12.143
> 
> 标签：spotify

由于不同音轨的采样率可能不同，有没有什么方法可以不使用**music_delivery**回调获取采样率呢？即在播放曲目之前获取采样率？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:47:03.027

不，不幸的是没有。

# java - 未经检查的异常，本来会更好的检查

> ID：10857505
> 
> 赞同：10
> 
> 时间：2012-06-01T21:19:17.120
> 
> 标签：java, exception, language-design, api-design, effective-java

我意识到已经[对](https://stackoverflow.com/questions/4639432/checked-vs-unchecked-exception) Java 中已检查异常与未检查异常的相对优点进行了[充分的](https://stackoverflow.com/questions/499437/in-java-when-should-i-create-a-checked-exception-and-when-should-it-be-a-runti) [讨论，我无意重新讨论整个辩论。](https://stackoverflow.com/questions/9947575/when-should-checked-exception-unchecked-exception-be-chosen)

相反，我想问一个我在阅读 Joshua Bloch 的 Effective Java, 2nd Edition 时想到的一个非常具体的问题。在阅读的过程中，我注意到在 Item 59（“避免不必要地使用受检异常”）中，Joshua 在 Java API 中给出了一个使用受检异常的示例。具体来说，在`Object`：

```
protected Object clone()
            throws CloneNotSupportedException 
```

...然后争辩说它应该是一个未经检查的异常。

> 如果使用 API 的程序员不能做得更好，那么未经检查的异常会更合适。未能通过此测试的异常示例之一是 CloneNotSupportedException。它由 Object.clone 抛出，它应该只在实现 Cloneable 的对象上调用（第 11 项）。在实践中，catch 块几乎总是具有断言失败的特征。异常的检查性质对程序员没有好处，但它需要努力并使程序复杂化。

然后我看看他是否有相反的例子，但我找不到。

所以我想问一下是否有人可以给出一个使用未检查异常的Java示例API，但是检查异常会是一个更好的选择，并解释原因。一个现实世界的例子会更好，但如果这也能说明问题，我愿意接受一个人为的例子。

**编辑：** 对于那些投票以非建设性的方式结束这一点的人，我想明确表示我不是在寻找意见、辩论、争论或扩展讨论。我也没有进行民意调查。相反，我正在寻找可以对收益如何超过成本进行清晰分析的示例参考。（其中隐含的是承认有成本。）也就是说，我怀疑这个问题的性质是否使这成为可能。我认为如果 Jon Skeet 做不到，那也不太可能做到。所以也许你是对的。如果必须关闭。

**编辑：**虽然我对回应不为所动，但我将把这个奖励给乔恩只是为了我的接受率。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T21:24:51.777

是的，很容易：[`Integer.parseInt`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)throws`NumberFormatException`未经检查。

但是，如果您曾经解析过可能存在错误的数据，那么您绝对应该考虑捕获异常——您很可能能够忽略该数据，或者报告它并继续前进。它不像 Java 有 .NET 的等价物，[`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)它可以让您*轻松*忽略不良数据。基本上你需要知道你需要捕获异常，而不需要编译器的挑衅。Grr。

# python - 不能从定义 __slots__ 的多个类继承？

> ID：10857515
> 
> 赞同：21
> 
> 时间：2012-06-01T21:20:15.517
> 
> 标签：python, class, slots

最近 Python 中的某种情况让我很震惊，经过一番研究，它的原因仍然不完全清楚。以下类定义似乎完美无缺，并将产生预期的结果：

```
class A: __slots__ = 'a', 'b'
class B(A): __slots__ = ()
class C(A): __slots__ = ()
class D(B, C): __slots__ = () 
```

这是四个以菱形继承模式排列的类。但是，不允许有某种相似的模式。以下类定义似乎应该与第一个类定义相同：

```
class B: __slots__ = 'a', 'b'
class C: __slots__ = 'a', 'b'
class D(B, C): __slots__ = ()

Traceback (most recent call last):
  File "<pyshell#74>", line 1, in <module>
    class D(B, C): __slots__ = ()
TypeError: multiple bases have instance lay-out conflict 
```

但是，`TypeError`在此示例中提出了 a。因此出现了三个问题：（1）考虑到插槽名称，这是 Python 中的一个错误吗？(2) 什么可以证明这样的答案？(3)*最好的解决方法是什么？*

* * *

**参考：**

*   [__slots__ 和多重继承](http://mail.python.org/pipermail/python-list/2002-December/740850.html)（回复如下）
*   [多重继承和 __slots__](http://bytes.com/topic/python/answers/576995-multiple-inheritance-__slots__)
*   [不要使用 __slots__](https://groups.google.com/group/comp.lang.python/msg/0f2e859b9c002b28)
*   [多重继承__slots__问题](http://www.velocityreviews.com/forums/t339645-multiple-inheritance-__slots__-problem.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-10-31T17:44:41.833

> ## 不能从定义的多个类继承`__slots__`？

关。

当存在布局冲突时，您不能从定义***非空的多个类继承。*** `__slots__`

插槽有一个有序的布局，在类中创建的描述符依赖于这些位置，因此它们在多重继承下不能有布局冲突。

您最简单的方法失败了，因为每个`a`和`b`都被认为是不同的插槽，并且布局算法不会检查它们在语义上是否相同：

```
class B: __slots__ = 'a', 'b' # creates descriptors in B for a, b
class C: __slots__ = 'a', 'b' # creates new, different descriptors in C
class D(B, C): __slots__ = () # B.a or C.a comes first? 
```

您的第一个示例有效，因为多重继承仅获得`A`' 插槽，因此所有情况都使用`A`' 描述符和位置/布局。例如，将允许以下内容：

```
class A: __slots__ = 'a', 'b' # shared parent, ok

class B(A): __slots__ = () # B or C must be empty

class C(A): __slots__ = 'c', # Since C is nonempty, B must be empty to inherit from both

class D(B, C): __slots__ = 'd', 'e' 
```

实例化 D，并使用这些插槽：

```
d = D()
d.a = d.b = d.c = d.d = d.e = 'foo' 
```

而且我们不能动态创建变量：

```
>>> d.f = 'foo'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'D' object has no attribute 'f' 
```

以上是解决有问题的代码的一种方法，但它可能需要进行一些重写 - 如果您决定`B`需要另一个插槽，则必须将 B 的功能重构为抽象，以使 D 的代码重用（这很好，但是可能令人困惑）。

使用抽象是最佳实践，另一种解决方案是这样做，其中抽象类和/或 mixin 包含具体类的功能：

```
class AbstractB: __slots__ = ()

class B(AbstractB): __slots__ = 'a', 'b'

class AbstractC: __slots__ = ()

class C(AbstractC): __slots__ = 'a', 'b'

class Mixin: __slots__ = ()

class D(AbstractB, AbstractC, Mixin): __slots__ = 'a', 'b' 
```

您的第一个示例非常可行，因为它避免了布局冲突，这只是重新构想了使用抽象而不是具体的解决方案。

### 最后的问题：

> (1) 考虑到插槽名称，这是 Python 中的错误吗？

不，尽管在这件事上存在很多混淆，但它还是有一些记录，并且错误试图使这种行为变得清晰。

> (2) 什么可以证明这样的答案？

定义槽的类获得知道其数据位置的描述符。如果布局发生变化，描述符将是错误的。

每个子类可以创建自己的布局和自己的描述符吗？我想它可以，但这需要对它们的工作方式进行一些重写，并且需要一些政治意愿来做到这一点，并且可以想象会破坏在 C api 中四处寻找并依赖当前行为的其他用户。

> (3) 最好的解决方法是什么？

定义“最佳”。

写得最快，可能最不复杂？：只需避免像第一个示例中那样的布局冲突。

最佳实践？：使用抽象继承树，并在具体实例中定义槽。虽然这种方法可能有更多的类，但对于其他人和“未来的你”来说，它可能不那么复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:42:33.600

通过强制没有类定义 __slots__ 的约束，可以构造具有所有子类所需特征的特殊对象类。该类被注册为常规对象的别名。

```
class _object: __slots__ = '_MetaSafe__exec', '__dict__'

class MetaSafe(type):

    __REGISTRY = {object: _object}

    @classmethod
    def clone(cls, old):
        return cls(old.__name__, old.__bases__, dict(old.__dict__), old)

    def __new__(cls, name, bases, classdict, old=None):
        # Check on a few classdict keys.
        assert '__new__' not in classdict, '__new__ must not be defined!'
        assert '__slots__' not in classdict, '__slots__ must not be defined!'
        assert '__module__' in classdict, '__module__ must be defined!'
        # Validate all the parent classes.
        valid = []
        for base in bases:
            if base in cls.__REGISTRY:
                valid.append(cls.__REGISTRY[base])
            elif base in cls.__REGISTRY.values():
                valid.append(base)
            else:
                valid.append(cls.clone(base))
        # Wrap callables without thread mark.
        for key, value in classdict.items():
            if callable(value):
                classdict[key] = cls.__wrap(value)
        # Fix classdict and create new class.
        classdict.update({'__new__': cls.__new, '__slots__': (), '__module__':
                          '{}.{}'.format(__name__, classdict['__module__'])})
        cls.__REGISTRY[old] = new = \
            super().__new__(cls, name, tuple(valid), classdict)
        return new

    def __init__(self, name, bases, classdict, old=None):
        return super().__init__(name, bases, classdict)

    @staticmethod
    def __wrap(func):
        @functools.wraps(func)
        def safe(self, *args, **kwargs):
            return self.__exec(func, self, *args, **kwargs)
        return safe

    @classmethod
    def __new(meta, cls, *args, **kwargs):
        self = object.__new__(cls, *args, **kwargs)
        if 'master' in kwargs:
            self.__exec = kwargs['master'].__exec
        else:
            array = tuple(meta.__REGISTRY.values())
            for value in args:
                if isinstance(value, array):
                    self.__exec = value.__exec
                    break
            else:
                self.__exec = Affinity()
        return self 
```

此代码可用作构建块，`tkinter`通过克隆其类来使线程安全。该类`Affinity`自动确保代码在单个线程上执行，从而防止 GUI 错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-25T17:40:09.560

我遇到了这个错误，我真的很想为我的自定义数据库节点使用插槽。这是我制作的测试套件（在 Python 3.x 中）：

```
import logging

A = None, 'attr1', 'attr2', 'attr3', 'attr4'

class C12(object):
    __slots__ = (A[1], A[2])

class C1234(object):
    __slots__ = (A[1], A[2], A[3], A[4])

class C34(object):
    __slots__ = (A[3], A[4])

class C3byC12(C12):
    __slots__ = (A[3])

class CEmpty(object):
    __slots__ = ()

MSG_FRM = '\n\tc1: {}\n\tc2: {}\n\t__slots__: {}'
NOT_DEF = 'not defined'

def test(c1, c2, slots):
    logging.debug('*'*20 + ' new class test ' + '*'*20)
    msg = MSG_FRM.format(c1, c2, slots)
    try:
        if slots == NOT_DEF:
            class TestClass(c1, c2): pass
        else:        
            class TestClass(c1, c2):
                __slots__ = slots
    except TypeError:
        logging.exception('BOOM!!! ' + msg)
    else:
        logging.debug('No Boom! ' + msg)
        instance = TestClass()
        if '__dict__' in dir(instance):
            logging.warning('Instance has __dict__!')
        else:
            logging.debug('Instance __slots__:{}'.format(
                          instance.__slots__))
        logging.debug('Attributes in instance dir: {}'.format(
            ' '.join(['X' if (a in dir(instance)) else '_'
                     for a in A[1:]])))

if __name__ == '__main__':
    logging.basicConfig(level=logging.DEBUG)
    test(C12, C34, (A[2], A[4]))
    test(C12, C3byC12, (A[2],))
    test(C3byC12, C12, (A[4],))
    test(C1234, C34, (A[2], A[4]))
    test(C1234, CEmpty, (A[2], A[4]))
    test(C12, CEmpty, (A[2], A[4]))
    test(C12, CEmpty, (A[1], A[2]))
    test(C12, CEmpty, ())
    test(CEmpty, C1234, (A[2], A[4]))
    test(CEmpty, C12, (A[3],))
    test(C12, C34, NOT_DEF)
    test(C12, CEmpty, NOT_DEF) 
```

结果如下：

```
DEBUG:root:******************** new class test ********************
ERROR:root:BOOM!!!
        c1: <class '__main__.C12'>
        c2: <class '__main__.C34'>
        __slots__: ('attr2', 'attr4')
Traceback (most recent call last):
  File "boom.py", line 30, in test
    class TestClass(c1, c2):
TypeError: multiple bases have instance lay-out conflict
DEBUG:root:******************** new class test ********************
ERROR:root:BOOM!!!
        c1: <class '__main__.C12'>
        c2: <class '__main__.C3byC12'>
        __slots__: ('attr2',)
Traceback (most recent call last):
  File "boom.py", line 30, in test
    class TestClass(c1, c2):
TypeError: Cannot create a consistent method resolution
order (MRO) for bases C3byC12, C12
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.C3byC12'>
        c2: <class '__main__.C12'>
        __slots__: ('attr4',)
DEBUG:root:Instance __slots__:('attr4',)
DEBUG:root:Attributes in instance dir: X X X X
DEBUG:root:******************** new class test ********************
ERROR:root:BOOM!!!
        c1: <class '__main__.C1234'>
        c2: <class '__main__.C34'>
        __slots__: ('attr2', 'attr4')
Traceback (most recent call last):
  File "boom.py", line 30, in test
    class TestClass(c1, c2):
TypeError: multiple bases have instance lay-out conflict
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.C1234'>
        c2: <class '__main__.CEmpty'>
        __slots__: ('attr2', 'attr4')
DEBUG:root:Instance __slots__:('attr2', 'attr4')
DEBUG:root:Attributes in instance dir: X X X X
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.C12'>
        c2: <class '__main__.CEmpty'>
        __slots__: ('attr2', 'attr4')
DEBUG:root:Instance __slots__:('attr2', 'attr4')
DEBUG:root:Attributes in instance dir: X X _ X
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.C12'>
        c2: <class '__main__.CEmpty'>
        __slots__: ('attr1', 'attr2')
DEBUG:root:Instance __slots__:('attr1', 'attr2')
DEBUG:root:Attributes in instance dir: X X _ _
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.C12'>
        c2: <class '__main__.CEmpty'>
        __slots__: ()
DEBUG:root:Instance __slots__:()
DEBUG:root:Attributes in instance dir: X X _ _
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.CEmpty'>
        c2: <class '__main__.C1234'>
        __slots__: ('attr2', 'attr4')
DEBUG:root:Instance __slots__:('attr2', 'attr4')
DEBUG:root:Attributes in instance dir: X X X X
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.CEmpty'>
        c2: <class '__main__.C12'>
        __slots__: ('attr3',)
DEBUG:root:Instance __slots__:('attr3',)
DEBUG:root:Attributes in instance dir: X X X _
DEBUG:root:******************** new class test ********************
ERROR:root:BOOM!!!
        c1: <class '__main__.C12'>
        c2: <class '__main__.C34'>
        __slots__: not defined
Traceback (most recent call last):
  File "boom.py", line 28, in test
    class TestClass(c1, c2): pass
TypeError: multiple bases have instance lay-out conflict
DEBUG:root:******************** new class test ********************
DEBUG:root:No Boom!
        c1: <class '__main__.C12'>
        c2: <class '__main__.CEmpty'>
        __slots__: not defined
WARNING:root:Instance has __dict__!
DEBUG:root:Attributes in instance dir: X X _ _ 
```

如您所见，您有两种选择：

1.  `__slots__ = ()`为除一个父类之外的所有类定义，
2.  或使其中一个父母成为另一个父母的子类。

请注意，您也应该`__slots__`在新类中定义，否则它会得到一个`__dict__`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-10-30T11:56:45.743

你见过这个替代品吗？ [https://stackoverflow.com/a/53063670/1400467](https://stackoverflow.com/a/53063670/1400467)

通过使用元类和假`_slots_`属性有一个“棘手的”解决方法。这适用于 Python 3.6 并希望在 Python 3.X 中如此。

# ios - 重用 UITableViewCell 不起作用

> ID：10857521
> 
> 赞同：1
> 
> 时间：2012-06-01T21:21:08.520
> 
> 标签：ios, uitableview, xamarin.ios

我正在使用 MonoTouch，并且我有一个没有被重用的自定义单元格视图。

1.  我试过设置 IBUIReuseIdentifier
2.  我试过使用字符串`NSString`和`_cellId`类型
3.  我已经尝试重新创建该项目。
4.  有趣的是，我有其他自定义单元格工作正常，但我创建的任何新单元格都没有被重用。我不确定下一步该往哪里看。

谢谢。

```
public override UITableViewCell GetCell (UITableView tableView, 
                                         NSIndexPath indexPath)
{           

    UITableViewCell cell =  tableView.DequeueReusableCell(_cellId);
    LibraryItem item = _items[indexPath.Row];
    LibraryCellView cellController = null;

    if (cell == null)
    {
        cellController = new LibraryCellView();
        cell = cellController.Cell; // cellController.Cell;

        cell.Tag = Environment.TickCount;

        _cellControllers[cell.Tag] = cellController;
        Console.WriteLine("Cell New");
    }
    else
    {
        cellController = _cellControllers[cell.Tag];
        Console.WriteLine("Cell Reused");
    }

    cellController.Name = item.Name;
    cellController.Date = item.CreatedDate.ToShortDateString();
    cellController.Shared = item.IsShared ? "Shared":"";
    cellController.Count = item.Count.ToString();
    cellController.ImageCoverId1 = item.CoverPictureId1;    

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:15:28.053

*一些笔记*

您是否为每个单元使用控制器？

那么，你在哪里申报的`_cellId`呢？

最后，注意`cell.Tag = Environment.TickCount;`。`Environment.TickCount`call 可能会导致问题，因为它可能足够快以创建相等的标签。

这么说，我认为您并不需要每个单元格都需要一个控制器（如果您使用它的话）。您可以创建一个自定义类来扩展`UITableViewCell`并按原样使用它。如果您使用 xib 界面，我真的建议阅读文章[created-custom-uitableviewcells-with-monotouch-the-correct-way](http://www.alexyork.net/blog/2011/07/18/creating-custom-uitableviewcells-with-monotouch-the-correct-way/)。

希望能帮助到你。

# hibernate - Glassfish 3.1.2 中的休眠 4.1

> ID：10857529
> 
> 赞同：1
> 
> 时间：2012-06-01T21:22:04.947
> 
> 标签：hibernate, jsf, glassfish

我正在尝试将 Hibernate 框架集成到在 Glassfish 上运行的 Web 应用程序中。但是，我找不到有关该主题的任何实用文档或教程。

您能否推荐一些有关该主题的实用文档？

提前致谢

# wpf - 在文本块列中使用自动换行时数据网格高度太高

> ID：10857530
> 
> 赞同：1
> 
> 时间：2012-06-01T21:22:10.350
> 
> 标签：wpf, xaml, datagrid, height, word-wrap

我希望用一列表示相当长的文本值来制作数据网格。所以我的目标功能是：

*   列宽与剩余窗口空间一样宽（可以调整窗口大小）
*   必要时自动换行
*   将数据网格高度限制为窗口的剩余高度，并根据需要提供垂直滚动

下面的代码满足前两项，并提供了一个正常工作的垂直滚动条，但数据网格的高度对于它显示的内容来说太高了。从文本块中删除自动换行解决了这个问题......但我需要自动换行。

如何在不让数据网格高度过高的情况下保持自动换行功能？

```
<ScrollViewer VerticalScrollBarVisibility="Auto">
   <Grid>
      <Grid.ColumnDefinitions>
         <ColumnDefinition Width="Auto" />
         <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
         <RowDefinition Height="Auto" />
         <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <!-- other controls in different parts of the data grid -->
      <DataGrid Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left"
         Margin="0,6,6,6" Name="dgMessages" VerticalAlignment="Top" 
         Background="DarkGray" HeadersVisibility="None"
         AlternatingRowBackground="Gainsboro" CanUserResizeColumns="False"
         CanUserResizeRows="False" CanUserSortColumns="False" 
         AutoGenerateColumns="false" BorderBrush="Black" HorizontalGridLinesBrush="{x:Null}"
         ItemsSource="{Binding Messages, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" >
             <DataGrid.Columns>
                 <dg:DataGridTemplateColumn Width="*">
                     <dg:DataGridTemplateColumn.CellTemplate>
                         <DataTemplate>
                             <TextBlock Text="{Binding Value}" 
                                TextWrapping="WrapWithOverflow" 
                                Padding="5,5,5,5" />
                         </DataTemplate>
                     </dg:DataGridTemplateColumn.CellTemplate>
                 </dg:DataGridTemplateColumn>
             </DataGrid.Columns>
         </DataGrid>
     </Grid>
 </ScrollViewer> 
```

*“dg”命名空间是“http://schemas.microsoft.com/winfx/2006/xaml/presentation”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T02:54:33.390

移除滚动查看器并将包含数据网格的行的高度设置为“*”修复了此问题。当数据网格不在根据内容自动调整大小的行中时，通常会处理数据网格列中的换行文本。

这是结束代码：

```
<Grid>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" />
      <ColumnDefinition Width="*"/>
   </Grid.ColumnDefinitions>
   <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
   </Grid.RowDefinitions>
   <!-- other controls in different parts of the data grid -->
   <DataGrid Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left"
      Margin="0,6,6,6" Name="dgMessages" VerticalAlignment="Top" 
      Background="DarkGray" HeadersVisibility="None"
      AlternatingRowBackground="Gainsboro" CanUserResizeColumns="False"
      CanUserResizeRows="False" CanUserSortColumns="False" 
      AutoGenerateColumns="false" BorderBrush="Black" HorizontalGridLinesBrush="{x:Null}"
      ItemsSource="{Binding Messages, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" >
      <DataGrid.Columns>
         <dg:DataGridTemplateColumn Width="*">
            <dg:DataGridTemplateColumn.CellTemplate>
               <DataTemplate>
                  <TextBlock Text="{Binding Value}" TextWrapping="WrapWithOverflow" Padding="5,5,5,5" />
               </DataTemplate>
            </dg:DataGridTemplateColumn.CellTemplate>
         </dg:DataGridTemplateColumn>
      </DataGrid.Columns>
   </DataGrid>
</Grid> 
```

# json - 格式化 JSON 数据以供选择

> ID：10857531
> 
> 赞同：1
> 
> 时间：2012-06-01T21:22:12.537
> 
> 标签：json, drop-down-menu, populate

我得到如下回复

```
{"ValuesDTO": {"items": [{},{"default": {"size": 5},"int": 10,"string": "Product1","string": "Product1 ","string": "product3","string": "product4","string": "product5"}]}} 
```

如何填充选择框？

# html - 我如何获得任何默认样式

> ID：10857533
> 
> 赞同：4
> 
> 时间：2012-06-01T21:22:28.057
> 
> 标签：html, css

我意识到，在现代，大多数人使用 CSS 来执行样式，并且将让 CSS 定义 H2 的外观。

但是，请想象一下，我试图让我的文本看起来像 <h2> 的默认外观，但让它与其他文本放在一起。

是否可以在 HTML4 中执行此操作？

或者，是否可以使用 CSS 模拟它？假设我没有直接在 <h2> 上设置样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:33:58.763

默认情况下，所有 HTML 标题 ( `<h1>`to `<h5>`) 都显示为`block`. 这意味着如果标题周围有其他元素，标题将位于单独的行中。

您可以通过将 CSS 应用于`display: inline`您的标题来更改它。如果您需要它来保持某些块行为（例如具有一定的宽度），您可以使用它`display: inline-block`来代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:30:20.823

试试看：

```
<!DOCTYPE html>
<html>
<body>

<style>
.h2{
   font-size: x-large;
   font-weight: bold;
   display: inline;
}
</style>

<h1>This is heading 1</h1>
<h2>This is heading 2</h2>
<p class="h2">This is heading 2</p>
<h3>This is heading 3</h3>
<h4>This is heading 4</h4>
<h5>This is heading 5</h5>
<h6>This is heading 6</h6>

</body>
</html> 
```

并且您应该禁用应用于当前 h2 的当前样式。例如：颜色：黑色！重要；（如果已定义）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T21:30:31.680

您可以使用以下 CSS 使 h2 显示内联：

```
​h2 { display: inline; }​ 
```

[演示](http://jsfiddle.net/8AYRj/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T05:47:30.700

在 HTML4 中执行此操作的方法（这是问题的主要内容）是使用两个单元格表格：

```
<table><tr valign=baseline><td><h2>Your heading</h2> <td>Other text</table> 
```

这些天没有多少人会推荐这个。

注意：确保默认呈现`h2`（取决于浏览器，尽管倾向于遵循类似的路线）的唯一方法是避免使用任何可能适用于`h2`元素的 CSS 规则。不过，我看不出有什么特别的理由要实现这一点，也许是在讨论浏览器中的 HTML 呈现或类似内容的页面上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T21:32:51.333

您可以只`<span>`在有问题的文本上使用 a 并将 h2 类添加到跨度。

[jsfiddle](http://jsfiddle.net/jonstodle/kZxLf/)上的示例

```
.header2{
    font-size: 120%;
}​ 
```

# javascript - 如何防止每次页面加载时对服务器的请求

> ID：10857534
> 
> 赞同：0
> 
> 时间：2012-06-01T21:22:59.633
> 
> 标签：javascript

我想知道是否有办法阻止 Javascript 在每个页面调用一个 php 并填充一个数组，而只是在用户浏览器的所有页面上携带该数组。

目前，每个页面加载都会向服务器发出新的请求并重新填充数组，例如当用户单击 html 页面上的链接时。

这是我的 JS 文件中的内容：

```
//Browser Support Code
function call_data(url,data){
  if (window.XMLHttpRequest) {              
    AJAX=new XMLHttpRequest();              
  } else {                                  
    AJAX=new ActiveXObject("Microsoft.XMLHTTP");
  }
  if (AJAX) {
  querystring = "?dta="+data;
     AJAX.open("GET", url + querystring, false);                             
     AJAX.send(null);
     return AJAX.responseText;                                         
  } else {
     return false;
  }                                             
}       

var statistics = JSON.parse(call_data('user_info.php',userid));//user data 
```

如果它调用每个页面加载，我目前看不到优势，因为我可能没有......除非有办法让我的数组设置每个页面加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:28:28.937

您应该使用[HTML5 本地存储](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:29:54.240

您可以通过 JavaScript 使用 Web Storage / DOM Storage API。它有不错的浏览器支持，如果你正确地实现它，如果 Web Storage 不可用，你总是可以通过请求 PHP 页面。

这是一个帮助您入门的教程：

[http://www.diveintojavascript.com/tutorials/web-storage-tutorial-creating-an-address-book-application](http://www.diveintojavascript.com/tutorials/web-storage-tutorial-creating-an-address-book-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:26:59.343

您可以将其存储在 cookie 中并检查 cookie 中的值是否有效，从 cookie 加载它，否则从服务器请求它并将其保存在 cookie 中以供将来使用。

# c# - 获取文件真实创建时间的可靠方法是什么？

> ID：10857536
> 
> 赞同：0
> 
> 时间：2012-06-01T21:23:25.907
> 
> 标签：c#, date, fileinfo

我需要知道我正在下载的文件是何时创建或最后写入的。我只需要日期（例如 2011 年 6 月 17 日）。通常，文件的日期可以通过其名称来推测，例如“DonQuixoteWasRight.2011-06-17.log”

问题是文件可以有各种不同的命名格式，甚至可能不包含日期，例如“SanchoPanzaWasLeft.txt”

我想也许 FileInfo 类会参与救援，但是使用以下代码：

```
FileInfo fInfo = new FileInfo(SelectedFileName);
//DateTime when = fInfo.CreationTime; //or CreationTimeUtc?
DateTime when = fInfo.LastWriteTime; //or LastWriteTimeUtc?
return when; 
```

...它只是返回我访问文件的时间（尽管我既没有创建它也没有明确写入它）。CreationTime 和 LastWriteTime 都不返回文件的真实 CreationTime 或 LastWriteTime。有没有办法找出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:27:12.667

听起来您正试图找出文件何时在**服务器**上被修改。

除非服务器以某种方式明确告诉您，否则无法找出答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:29:10.560

没有真正的方法可以确定文件是在服务器上还是在本地计算机上，因为用户可以更改上次修改日期和其他元数据。

# javascript - 正则表达式在 javascript 中失败

> ID：10857537
> 
> 赞同：1
> 
> 时间：2012-06-01T21:23:27.940
> 
> 标签：javascript, regex, validation

我在javascript中有以下正则表达式

```
var reg = new RegExp("^[(]?[2-9]\d{2}[)]?[\-. :]?[2-9]\d{2}[\-. :]?\d{4}$");
return this.optional(element) || (reg.test(value)); 
```

在我的代码 reg.test(value) 中，即使在正确的值上也返回 false：例如 222 222 2222 或 222-222-2222。所有的正则表达式测试器（尤其是[这个](http://tools.netshiftmedia.com/regexlibrary/)，它调用相同的方法）显示正则表达式匹配表达式。可能是什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T21:26:06.253

尝试这个：

```
var reg = /^[(]?[2-9]\d{2}[)]?[\-. :]?[2-9]\d{2}[\-. :]?\d{4}$/;
return this.optional(element) || (reg.test(value)); 
```

或者还有：

```
var reg = new RegExp("^[(]?[2-9]\\d{2}[)]?[\\-. :]?[2-9]\\d{2}[\\-. :]?\\d{4}$");
return this.optional(element) || (reg.test(value)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T21:25:56.270

`\`s 被字符串文字吞噬。

您应该改用正则表达式文字：

```
var reg = /^[(]?[2-9]\d{2}[)]?[\-. :]?[2-9]\d{2}[\-. :]?\d{4}$/; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T21:26:51.600

我看到了一个潜在的麻烦原因：如果您正在使用该`RegExp`函数创建一个新的正则表达式，则必须两次转义反斜杠 - 一次用于 JavaScript 引擎，一次用于 RegEx 引擎。

您可以通过以下方式测试这是否会导致麻烦

```
var reg = /^[(]?[2-9]\d{2}[)]?[\-. :]?[2-9]\d{2}[\-. :]?\d{4}$/; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T23:44:13.943

您将正则表达式作为字符串输入，所以所有出现的`\d`应该是`\\d`因为当正则表达式字符串被发送到解释器时，`\d`字符不会被解释为 a`\`和 a`d`而只是`d`添加额外的斜杠会转义另一个斜杠所以`\\d`是解释为 a`\`和 a `d`。我还建议进行另一项更改，`[(]`应将其替换为，`\\(`因为字符类仅包含一个字符，因此没有意义。

# postgresql - 生产服务器上类型时间戳的错误值

> ID：10857539
> 
> 赞同：3
> 
> 时间：2012-06-01T21:23:42.130
> 
> 标签：postgresql, jakarta-ee, jboss, timestamp, seam

我正在使用：seam 2.2.2 + hibernate + richfaces + jboss 5.1 + postgreSQL

我有一个模块需要从数据库中加载一些数据。简单的。问题是，在开发中它工作正常，100%，但是当我在我的生产服务器上部署并尝试获取数据时，出现错误：

```
could not read column value from result set: fechahor9_504_; Bad value for type timestamp : [C@122e5cf
SQL Error: 0, SQLState: 22007
Bad value for type timestamp : [C@122e5cf
javax.persistence.PersistenceException: org.hibernate.exception.DataException: could not execute query 
```

[更多错误]

```
Caused by: org.postgresql.util.PSQLException: Bad value for type timestamp : [C@122e5cf
at org.postgresql.jdbc2.TimestampUtils.loadCalendar(TimestampUtils.java:232) 
```

[更多错误]

```
Caused by: java.lang.NumberFormatException: Trailing junk on timestamp: ''
at org.postgresql.jdbc2.TimestampUtils.loadCalendar(TimestampUtils.java:226) 
```

我不明白为什么它可以在我的机器（开发）上运行，为什么不能在生产上运行。有什么线索吗？有人遇到过同样的问题吗？是完全一样的编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:59:30.420

不确定驱动程序的故事是什么..但是当 JDBC 尝试将 **bigint**从数据库解析为

```
myOjbect.setDate(Date date){...} 
```

由于某种原因，其他“JDBC 友好”被忽略了。

```
myOjbect.setDate(long date){...} 
```

所以..删除**日期**设置器并留下一个**长**的可以解决问题。这是一个很大的解决方法..但可能会帮助那里的人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:19:28.960

Stefano Travelli 是对的。我正在检查生产环境中的 jBoss，并且 [jboss_dir]/common/lib 上有一个来自旧 jwebstart 应用程序（不是我开发的）的旧 jdbc 驱动程序。删除了那个jdbc，它工作正常。我应该检查是否仍然需要旧应用程序，如果需要，检查它是否仍然可以在没有 jdbc 或升级版本的情况下工作。

# mysql - 为什么MYSQL在处理“AND”语句时这么慢

> ID：10857546
> 
> 赞同：-1
> 
> 时间：2012-06-01T21:24:53.970
> 
> 标签：mysql

当我输入查询时：

```
SELECT A.T1, B.T2, from A, B where A.T3 = B.T3 and A.T4 = B.T4 
```

mysql挂起。但是，当我摆脱其中一个约束时：

```
SELECT A.T1, B.T2, from A, B where A.T3 = B.T3 
```

mysql 几乎立即返回结果。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:32:38.193

您正在以非常缓慢和低效的方式执行此操作。它与 AND 子句本身无关，而与表的设计方式以及您尝试执行查询的方式有关。

尝试以下方式：

```
SELECT A.T1, B.T2
FROM A
JOIN B ON B.T3 = A.T3 AND A.T4 = B.T4 
```

此外，为了进一步提高性能，请将列最多的表放在 FROM 子句中，而不是 JOIN 中。

此外，由于它是一组如此庞大的表，您应该考虑对它们进行索引。

```
CREATE INDEX index_name
ON A (T4)
GO
CREATE INDEX index_name2
ON B (T4)
GO 
```

**您只需要创建一次索引！您无需在每次运行查询时都执行此操作。** 一般来说，一旦你创建了索引，你就不需要再担心它了。

有关索引的更多信息：[http ://en.wikipedia.org/wiki/Database_index](http://en.wikipedia.org/wiki/Database_index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:42:47.090

最常见的是，当这种情况发生时，它与约束本身无关，而是与约束与索引的关系有关。查看关于表上已定义索引的 WHERE 子句。WHERE 子句的顺序也会产生影响。
如果可以，请尝试从 SQL-1 类型的 JOIN 转向更可见和更灵活的 SQL-2 类型。请参阅 madburn 的回答。

# soap - 将两个对象作为参数的 SOAP 方法调用

> ID：10857550
> 
> 赞同：1
> 
> 时间：2012-06-01T21:25:17.160
> 
> 标签：soap, coldfusion, wsdl

我正在做一个 SOAP 调用以从下面的 wsdl 访问方法 getMailingReports 并且可以正常访问它。我的问题是当我必须使用 createEmailMailing 但必须传入两个作为对象的参数（Mailing 和 EmailContent）时。这是来自stormpost（pulsepoint），所以如果有人有这方面的经验，我会很感激。下面是我使用 ColdFusion 进行的 wsdl 和 SOAP 调用。同样，这个 SOAP 调用工作正常，但不确定如何模仿它并使用方法 createEmailMailing。

[http://api.stormpost.datranmedia.com/services/SoapRequestProcessor?wsdl](http://api.stormpost.datranmedia.com/services/SoapRequestProcessor?wsdl)

```
<cfsavecontent variable="soap">
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <SOAP-ENV:Header>
                <ns0:username SOAP-ENV:actor="http://schemas.xmlsoap.org/soap/actor/next" xmlns:ns0="http://services.web.stormpost.skylist.com">fakelogin</ns0:username>
                <ns0:password SOAP-ENV:actor="http://schemas.xmlsoap.org/soap/actor/next" xmlns:ns0="http://services.web.stormpost.skylist.com">fakepassword</ns0:password>
            </SOAP-ENV:Header>
            <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:s0="http://www.w3.org/2001/XMLSchema" xmlns:s1="http://schemas.xmlsoap.org/soap/encoding/">
                <ns0:getMailingReports xmlns:ns0="http://services.web.stormpost.skylist.com">
                    <from xsi:type="xsd:dateTime"><cfoutput>#dateFormat(arguments.from, "yyyy-mm-dd")#</cfoutput>T00:00:00.000</from>
                    <to xsi:type="xsd:dateTime"><cfoutput>#dateFormat(arguments.to, "yyyy-mm-dd")#</cfoutput>T23:00:00.000</to>
                    <type xsi:type="xsd:string">Mailings</type>
                    <channel xsi:type="xsd:string">EMAIL</channel>
                    <listid xsi:type="xsd:int">0</listid>
                    <limit xsi:type="xsd:int">#arguments.numRowsReturned#</limit>
                </ns0:getMailingReports>
            </SOAP-ENV:Body>
        </SOAP-ENV:Envelope>
    </cfsavecontent>

    <cfhttp url="https://api.stormpost.datranmedia.com/services/SoapRequestProcessor" method="POST">
        <cfhttpparam type="header" name="Content-Type" value="text/xml">
        <cfhttpparam type="header" name="SOAPAction" value="">
        <cfhttpparam type="header" name="content-length" value="#len(trim(soap))#">
        <cfhttpparam type="header" name="charset" value="utf-8">
        <cfhttpparam type="XML" name="message" value="#trim(soap)#">
    </cfhttp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:44:19.003

我自己一直在学习 SOAP 和 CF。我强烈推荐[SOAPUI](http://www.soapui.org/)进行测试。它解析出一个示例 createEmailMailing 请求没有问题。任何有问号的地方就是您想要将值写入数据库的地方。

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://services.web.stormpost.skylist.com">
   <soapenv:Header>
      <authInfo xsi:type="soap:authentication" xmlns:soap="http://skylist.com/services/SoapRequestProcessor">
         <!--You may enter the following 2 items in any order-->
         <username xsi:type="xsd:string">?</username>
         <password xsi:type="xsd:string">?</password>
      </authInfo>
   </soapenv:Header>
   <soapenv:Body>
      <ser:createEmailMailing soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <mailing xsi:type="soap:Mailing" xmlns:soap="http://skylist.com/services/SoapRequestProcessor">
            <!--You may enter the following 37 items in any order-->
            <title xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</title>
            <externalID xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</externalID>
            <comment xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</comment>
            <protocol xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</protocol>
            <campaignID xsi:type="xsd:int">?</campaignID>
            <brandID xsi:type="xsd:int">?</brandID>
            <listID xsi:type="xsd:int">?</listID>
            <conditionOperator xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</conditionOperator>
            <condition1Column xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition1Column>
            <condition1Operator xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition1Operator>
            <condition1Value xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition1Value>
            <condition2Column xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition2Column>
            <condition2Operator xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition2Operator>
            <condition2Value xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition2Value>
            <condition3Column xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition3Column>
            <condition3Operator xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition3Operator>
            <condition3Value xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition3Value>
            <condition4Column xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition4Column>
            <condition4Operator xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition4Operator>
            <condition4Value xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition4Value>
            <condition5Column xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition5Column>
            <condition5Operator xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition5Operator>
            <condition5Value xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</condition5Value>
            <maxRecipients xsi:type="xsd:int">?</maxRecipients>
            <seeds xsi:type="soap:ArrayOf_soapenc_string"/>
            <blockDomains xsi:type="soap:ArrayOf_soapenc_string"/>
            <purgeLists xsi:type="soap:ArrayOf_xsd_int"/>
            <purgeSuppressionLists xsi:type="soap:ArrayOf_xsd_int"/>
            <queueTime xsi:type="xsd:dateTime">?</queueTime>
            <trackType xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</trackType>
            <openTrackType xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</openTrackType>
            <clickStreamType xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</clickStreamType>
            <advertiserName xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</advertiserName>
            <unsubReportsAddress xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</unsubReportsAddress>
            <unsubReportsSize xsi:type="xsd:int">?</unsubReportsSize>
            <priority xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</priority>
            <additionalLists xsi:type="soap:ArrayOf_xsd_int"/>
         </mailing>
         <content xsi:type="soap:EmailContent" xmlns:soap="http://skylist.com/services/SoapRequestProcessor">
            <!--You may enter the following 16 items in any order-->
            <subject xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</subject>
            <fromEmail xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</fromEmail>
            <fromName xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</fromName>
            <toEmail xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</toEmail>
            <toName xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</toName>
            <replyToEmail xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</replyToEmail>
            <replyToName xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</replyToName>
            <charset xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</charset>
            <encoding xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</encoding>
            <htmlContent xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</htmlContent>
            <textContent xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">?</textContent>
            <unsubContentID xsi:type="xsd:int">?</unsubContentID>
            <replyContentID xsi:type="xsd:int">?</replyContentID>
            <headerContentID xsi:type="xsd:int">?</headerContentID>
            <footerContentID xsi:type="xsd:int">?</footerContentID>
            <forwardToFriendContentID xsi:type="xsd:int">?</forwardToFriendContentID>
         </content>
      </ser:createEmailMailing>
   </soapenv:Body>
</soapenv:Envelope> 
```

您还需要更改其中一个参数，例如：

```
<cfhttpparam type="header" name="SOAPAction" value="createEmailMailing"> 
```

# mercurial - 如何关闭汞状态-S

> ID：10857552
> 
> 赞同：3
> 
> 时间：2012-06-01T21:25:36.740
> 
> 标签：mercurial

我希望我的默认 hg 状态重新生成子存储库。这在 .hgrc 中很容易做到：

```
[alias]
status = status -S 
```

但我想要另一个别名，比如 hg status-no-subrepo，但没有。

```
[alias]
status-no-subrepo = status 
```

不幸的是，这不起作用，因为 status-no-subrepo --expands-to--> status --expands-to--> status -S。我想那时有一些东西可以阻止递归。

有任何想法吗？

* * *

顺便说一句，这似乎违反了 Glew 的规则之一：任何可以打开的命令行选项都应该可以关闭。可能 -S == -S:1, -S:0 关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:12:50.837

很简单，将您的原始别名使用不同的名称

```
[alias]
sstat = status -S 
```

我知道，这不是您要寻找的答案，但这很容易。这也意味着，如果您迁移到未安装别名的系统，您不会感到困惑（您会收到适当的错误提醒您），而其他人在您的帐户中执行操作时也不会感到困惑。

我无法告诉你有多少次我帮助某人只是为了对他们的别名`ls`为`ls -l`或`rm`to感到恼火`rm -i`。

一般来说，我认为使用个性化版本覆盖常用命令是不明智的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:33:39.383

运行时需要禁用`status`别名`status-no-subrepo`。

```
[alias]
status = status -S
status-no-subrepo = !$HG --config alias.status=status status $@ 
```

我不使用 subrepos，但我用我的 glog 别名测试了类似的功能。

```
glog = !$HG log --graph --branch $($HG branch) $@
glog-all-branches = !$HG --config alias.glog=glog glog $@ 
```

告诉 Mercurial这`!`是一个 shell 命令，而不是 Mercurial 子命令。运行 shell 命令时，Mercurial 将 $HG 设置为运行的`hg`可执行文件的路径。默认情况下，别名后的参数不会传递到 shell 命令中，因此`$@`将它们添加回来。这允许您运行命令，例如`hg status-no-subrepo --no-status`在没有子存储库的情况下显示更改并隐藏状态前缀。

# wpf - 某些特定计算机上某些特定静态资源的 XamlParseException

> ID：10857553
> 
> 赞同：1
> 
> 时间：2012-06-01T21:25:38.383
> 
> 标签：wpf, xaml, exception, staticresource

我们正在为 .NET 4 开发 WPF 应用程序。

有一天，客户告诉我，新版本在他的 Windows 7 机器上不起作用（应用程序在启动时退出），他在 Windows 事件查看器中发现了异常日志：

```
 Application: myapp.exe Framework Version: v4.0.30319 Description: 
The process was terminated due to an unhandled exception. Exception Info: System.Windows.Markup.XamlParseException 
Stack: at System.Windows.Markup.XamlReader.RewrapException(System.Exception, System.Xaml.IXamlLineInfo, System.Uri) 
at System.Windows.Markup.WpfXamlLoader.Load(System.Xaml.XamlReader, System.Xaml.IXamlObjectWriterFactory, Boolean, System.Object, System.Xaml.XamlObjectWriterSettings, System.Uri) 
at System.Windows.Markup.WpfXamlLoader.LoadBaml(System.Xaml.XamlReader, Boolean, System.Object, System.Xaml.Permissions.XamlAccessLevel, System.Uri) 
at System.Windows.Markup.XamlReader.LoadBaml(System.IO.Stream, System.Windows.Markup.ParserContext, System.Object, Boolean) 
at System.Windows.Application.LoadBamlStreamWithSyncInfo(System.IO.Stream, System.Windows.Markup.ParserContext) 
at ... (I guess no point to continue...) 
```

这个问题让我发疯，因为我和其他开发人员都无法在我们的机器上重现它，即使在 VirtualBox 中安装干净的 Windows 7 也无法重现它。

当我们试图找到破坏客户端应用程序的更改时，我们发现了有问题的部分。这是区别：

这工作正常：

```
<ComboBox x:Name="comboBoxZoom" Margin="130,10,0,0" HorizontalAlignment="Left" Width="40" FontFamily="Arial" FontSize="12"  VerticalAlignment="Top" TabIndex="1" Panel.ZIndex="2" /> 
```

这打破了：

```
 <ComboBox x:Name="comboBoxZoom" Style="{StaticResource comboBoxStyle}" Margin="130,10,0,0" HorizontalAlignment="Left" Width="40" FontFamily="Arial" FontSize="12"  VerticalAlignment="Top" TabIndex="1" Panel.ZIndex="2" /> 
```

本质上的区别只是

```
Style="{StaticResource comboBoxStyle}" 
```

但是这种风格之前已经在我们应用程序的其他部分中使用过，没有任何问题！导致此异常的同一文件包含许多其他 Style="{StaticResource someotherstyle}" 并且它们在客户端计算机上工作正常。

所有这些样式都位于一个文件 ControlStyles.xaml 中。comboBoxStyle 是从某个网站复制的修改样式，类似于此： [http ://social.msdn.microsoft.com/Forums/nl/wpf/thread/53134b87-1a99-4998-a1fb-b3d8a9bd2773](http://social.msdn.microsoft.com/Forums/nl/wpf/thread/53134b87-1a99-4998-a1fb-b3d8a9bd2773)

**为什么 Style="{StaticResource comboBoxStyle}" 使我的应用程序仅在某些特定机器上崩溃以及如何修复此错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:45:44.967

我遇到了同样的问题，在拔掉头发两天后，我在 C# IRC 频道的某个人的帮助下想出了使用 Windbg 的解决方案。

因此，在我的情况下，抛出异常是因为我没有为 app.config 的跟踪侦听器设置 type 属性，并且它与 XAML 无关，尽管奇怪的是，当我在 XAML 中删除组合框绑定时，我可以运行程序处于发布模式，但真正的解决方案在于 app.config。不过，我可以在调试模式下正常运行程序。这听起来像是编译器的一个讨厌的错误。

因此，在您的 app.config 中寻找可能的疏忽，如果一切似乎都在那里，那么只需抓住 Windbg 并自行调试它，直到找到异常的根本原因。

# c# - 如何使用 C# 检索 Web 表单上已有的数据

> ID：10857564
> 
> 赞同：0
> 
> 时间：2012-06-01T21:26:40.273
> 
> 标签：c#, webforms, webrequest

我正在开发一个访问路由器页面并检索数据（特别是 wifi 安全代码）的程序。它不是黑客工具，因为它只有在您的计算机已经成功连接到它的情况下才有效。问题是，当我想读取页面上已经存在的数据（在文本框中）时，我必须使用正则表达式，因为路由器总是返回 html 源而不是说 xml 数据表（即使我将 ContentType 设置为文本/xml）。

有没有一种类似于我的代码的方法，可以将数据写入从 webforms 读取数据的 webforms。这是我的代码示例，它写入“密码”字段并将其提交给路由器。

```
string formParams = string.Format("password={0}", loginInput);
WebRequest loginPage = WebRequest.Create(url);
loginPage.ContentType = "application/x-www-form-urlencoded";
loginPage.Method = "POST";
byte[] bytes = Encoding.ASCII.GetBytes(formParams);
loginPage.ContentLength = bytes.Length;
using (Stream os = loginPage.GetRequestStream())
{
   os.Write(bytes, 0, bytes.Length);
} 
```

这是网页中的 html 代码摘录，该代码在其中写入 loginInput 中的数据。

```
 <td class="form_label">Password&nbsp;:</td>
<td class="form_data">
<input type="password" id="password" name="password" value="" tabindex="100" />
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:44:34.907

使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)

例如，以下是修复 HTML 文件中所有 href 的方法：

```
HtmlDocument doc = new HtmlDocument();
doc.Load("file.htm");
foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href"])
{
    HtmlAttribute att = link["href"];
    att.Value = FixLink(att);
}
doc.Save("file.htm"); 
```

它使用 XPATH 来选择 html 部分，但也可以使用 LINQ。有很多[示例](https://www.google.de/search?sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8&q=HtlAgilityPack%20from#hl=en&sclient=psy-ab&q=HtmlAgilityPack%20sample&oq=HtmlAgilityPack%20sample&aq=f&aqi=g1g-K1g-bK1&aql=&gs_l=serp.3..0j0i30j0i8i30.340117.341113.0.341331.6.6.0.0.0.0.156.576.5j1.6.0...0.0.IKAR1XNZfrU&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=79e49ec59cb9bd64&biw=1600&bih=756)如何使用它

# php - 对不同表中的相同字段进行排序

> ID：10857570
> 
> 赞同：1
> 
> 时间：2012-06-01T21:27:02.613
> 
> 标签：php, mysql, multi-table

我有一些具有相同结构的表（大约 20 个），我正在尝试使用 php 脚本对它们进行排序，并将它们插入到一个新表中，其中最便宜的价格是最便宜的 1，然后是最便宜的 2 更贵......最贵的在最便宜的列中：

**表A：** id
名称
价格

**表B：** id
名称
价格

**表 X：** id
名称
价格

**表结果：** id
名称
最便宜1 价格1 最
便宜2 价格2 ...最
便宜
X 价格 X

到目前为止，我的代码是：

```
(SELECT id, price, name FROM tableA WHERE id = $id)
UNION
(SELECT id, price, name FROM tableB WHERE id = $id)
ORDER BY price ASC 
```

我一直在寻找不同的解决方案，但是选择 15000 行需要很长时间，所以我想还有另一种方法可以做到这一点。我还没有找更新查询，我需要在第一时间修复选择。

有什么建议吗？

编辑：澄清问题，有更多表格

EDIT2：解决方案

我终于做对了。这是选择最便宜的查询：我选择每个 id 并浏览：

```
(SELECT price AS P1, name, id FROM tableA WHERE id = ?) UNION (SELECT price AS P1, name, id FROM tableB WHERE id = ?) UNION (SELECT price AS P1, name, id FROM tableC WHERE id = ?) ORDER BY P1 ASC 
```

然后我按照 glglgl 的建议插入新表：

```
('INSERT INTO table (id, name, Position, price) VALUES (?, ?, ?, ?) '); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:30:52.983

我在 Oracle 上做了这个，但是 MySQL 的语法应该非常相似（选择应该完全没有任何变化）。

```
CREATE TABLE tableA (NAME VARCHAR2(100), price FLOAT);
CREATE TABLE tableB (NAME VARCHAR2(100), price FLOAT);

INSERT INTO tableA VALUES ('a',14.23);
INSERT INTO tableA VALUES ('b',15.23);
INSERT INTO tableA VALUES ('b',16.23);

INSERT INTO tableB VALUES ('a',12.23);
INSERT INTO tableB VALUES ('a',13.23);
INSERT INTO tableB VALUES ('b',9.23);

SELECT name
     , max(mxprice) mxprice
     , min(mnprice) mnprice
FROM
(
  SELECT name
       , max(price) mxprice
       , min(price) mnprice
    FROM tableA
    GROUP BY NAME
  UNION ALL
  SELECT name
       , max(price) mxprice
       , min(price) mnprice
    FROM tableB
    GROUP BY NAME
) a
GROUP BY NAME 
```

结果：

```
 NAME    MXPRICE MNPRICE
1   a       14.23   12.23
2   b       16.23   9.23 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:36:05.943

如果您可以控制表格的最终结构：不要这样做。相反，只使用一个表并添加一个字段来指示它的用途。

目标表的结构也不好。相反，您应该使用

```
tableResult:
 id
 name
 cheapestorder
 cheapest
 price 
```

这让一切变得更容易。

因此，而不是让一行包含

```
id=10, name=foo, cheapest1=a, cheapestprice1=10, cheapest2=b, cheapestprice2=13, 
```

你有几行

```
id=10, name=foo, cheapestorder=1, cheapest=a, cheapestprice=10
id=10, name=foo, cheapestorder=2, cheapest=b, cheapestprice=13 
```

（这个过程在数据库理论中称为**“规范化” 。）**

将所有输入表合二为一简化了[dcp 的查询](https://stackoverflow.com/a/10857607/296974)：

```
SELECT name,
       max(mxprice) mxprice,
       min(mnprice) mnprice
FROM
(
  SELECT name,
       max(price) mxprice,
       min(price) mnprice
    FROM tableABC
    GROUP BY NAME, tbltag
) a
GROUP BY NAME 
```

或者甚至只是

```
SELECT name,
       max(price) mxprice,
       min(price) mnprice
    FROM tableABC
    GROUP BY NAME 
```

.

# javascript - JavaScript - 缩短数学函数

> ID：10857572
> 
> 赞同：0
> 
> 时间：2012-06-01T21:27:23.130
> 
> 标签：javascript, arrays

```
function randomize() {
var ra = Math.floor(Math.random()*ar.length=4);
document.getElementById('es').innerHTML = ar[ra];
} 
```

有没有办法比它更短这个代码？原因是因为我将在其他项目和对象中大量使用此代码，我不能像这样在内部调用它：randomize(); 因为我有不同的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:29:37.793

```
function randomize() {document.getElementById('es').innerHTML = ar[Math.floor(Math.random()*ar.length)];} 
```

但是您想在没有函数调用的情况下更多地使用它：

```
function $(id) {
return document.getElementById(id);
}

function randomize() {
$('es').innerHTML = ar[Math.floor(Math.random()*ar.length)];
} 
```

而不是`Math.floor`，您可以使用`~~`微观更快的差异。

如果您打算更多地使用它，这可以节省一些空间和时间。但如果只有一次，请使用第一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:33:19.997

在不知道你在做什么的情况下，我建议将相关参数作为参数传递给函数：

```
function randomize(el, array){
    if (!el || !array){
        return false;
    }
    else {
        var ra = Math.floor(Math.random() * array.length=4);
        // please note that I don't understand what's happening in the above line
        // and suspect, quite strongly, that the '=4' was a typo. Correct as necessary
        el.innerHTML = ar[ra];
    }
}

// call:
randomize(document.getElementById('es'), ['1','2']);
/* or:
var el = document.getElementById('es'),
    array = ['one','two'];
randomize(el,array); 
```

# ruby - 确保嵌套 ruby 数组中的唯一元素

> ID：10857573
> 
> 赞同：0
> 
> 时间：2012-06-01T21:27:44.803
> 
> 标签：ruby, arrays

我有一个可以包含 N 个嵌套数组的数组，其中 N 可以包含 M 个数组，其中 N 和 M 都 >= 1。一些示例包括以下内容：

```
[[[1,2,3],[3,4,5]],[[2,1,1]]] 
```

或者

```
[[[1,2,3]],[]]] 
```

最后

```
[[[1,2,3],[3,4,5]],[[2,1,1]], [[1,1,1],[2,2,2]]] 
```

^(如果嵌套数组中的第 0个)元素有重复值，我需要返回布尔值 true 或 false 的东西，问题是复合数组不是唯一标识符。只有每个值数组中的第 0^个元素，例如`[1,2,3]`or `[3,4,5]`，在这种情况下，整数`1`和`3`，是我需要唯一的对象。所以在最后一个数组的情况下，`[1,1,1]`并且`[1,2,3]`会在`1`重复时发生冲突。

遍历这种类型的嵌套和信号`true`或`false`是否存在重复的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:40:20.560

```
def uniq_prime_elements?(arr)
  prime_elements = arr.map(&:first).map(&:first).compact
  prime_elements.length == prime_elements.uniq.length
end 
```

# php - 将字符串拆分为带有模式的数组

> ID：10857574
> 
> 赞同：1
> 
> 时间：2012-06-01T21:27:49.827
> 
> 标签：php, apache-flex

我从 flex 发送一个数组到我的 php 脚本。要拆分的字符串就像 [F1, 3, true][Urg, 4, false] 我会使用这些信息将记录更新到 mySql 数据库中。

例如 [F1, 3, true] 就是这样的记录 [Name, Id, Visible]。

但我不知道如何拆分使用信息。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:39:18.363

如果你真的坚持这种格式，你可以试试 preg_match。

```
$string = '[F1, 3, true][Urg, 4, false][asd,      1337, TrUe]';
preg_match_all('/\[(\w+),\s*?(\d+),\s*?(true|false)\]/i', $string, $matches, PREG_SET_ORDER); 
```

有了这个，你将得到一个二维数组，数组中的每个元素都是一个数组。每个数组的第一个元素是匹配数据行，后面的元素是解析后的数据。元素可以用任意数量的空白字符分隔，布尔值的大小写无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:40:03.237

您可以删除括号：

```
$txt = substr($txt, 1, -1); 
```

并爆炸：

```
$array = explode(',', $txt) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:47:41.040

我希望您的数据字符串中没有逗号或方括号 - 这可能会使这成为不可能！但假设没有这些：

```
preg_match_all('/\[([^\]]*)\]/', $text, $matches);
return array_map(function($match) {
    return array_map('trim', explode(',', $match));
}, $matches[1]); 
```

（这使用了一个闭包，它只在 PHP 5.3 及更高版本中受支持；如果您使用的是旧版本，则可以很容易地将其更改为 foreach 循环。）

# java - 如何找出我的 WAR 需要这么长时间才能在 Tomcat 上部署的原因？

> ID：10857575
> 
> 赞同：8
> 
> 时间：2012-06-01T21:27:59.180
> 
> 标签：java, spring, hibernate, tomcat, profiling

我有一个 Web 应用程序，通常需要花费大量时间才能在 Tomcat 上部署。我怀疑某处有一个数据库连接正在等待超时，但这只是一个猜测，我想确定是什么导致了阻塞，以便我可以解决这个问题。谁能建议我可以这样做的方法？我应该在加载 WAR 时分析 Tomcat 并在那里寻找线索吗？如果是这样，是否有适合初学者的教程？

如果这很重要，我的 Web 应用程序使用 Spring 和 Hibernate。一位同事告诉我，也许这些会导致速度变慢，因为它们太大了，以至于某个类加载器在需要加载的类的绝对数量上窒息。

当我停止 Tomcat 或将 WAR 热部署到已经运行的 Tomcat 时，我也会看到这一点：

```
Jun 1, 2012 6:03:33 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/nacem-rest] registered the JDBC driver [oracle.jdbc.OracleDriver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Jun 1, 2012 6:03:34 PM org.apache.catalina.startup.HostConfig deployWAR 
```

也许这是问题的一部分？重新部署我的 Web 应用程序几乎总是需要重新启动 Tomcat，而且我一直认为上面提到的 JDBC 驱动程序问题是罪魁祸首，但也许它也与缓慢的启动时间有关？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T21:31:46.907

您可以使用探查器，但这有点过头了。相反，只需在应用程序加载时进行少量线程转储。您可以使用`jstack`or `jvisualvm`，网络上描述如何执行此操作的大量资源。基本上，您需要 Tomcat 的 PID（请参阅：`jps`）。

如果您发现很难分析线程转储 - 将其添加到您的问题中。通常很容易找到瓶颈。典型问题：

*   应用程序尝试从 Internet 获取一些资源，例如 XML 模式
*   很多类要在 CLASSPATH 上扫描
*   过多的 GC（启用详细的 gc 日志记录以防万一）
*   没有足够的内存（交换，见`iostat`/ `iotop`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T22:32:55.340

我首先要看的是在您的应用程序启动期间，tomcat 的 CPU 或 RAM 使用情况如何。

如果你看到大量的 CPU 活动和 RAM 增加，那么它可能加载了很多东西，比如很多类，或者执行某种巨大的预分配或类似的。在这种情况下，线程转储可以帮助您很多，但也可以通过“lsof”（如果您的 tomcat 在 *nix 环境中运行）查看它当前正在处理的文件。

但是，如果您看到它只是坐在那里，那么它可能正在等待某种连接。

如您所料，一个原因可能是数据库连接。数据库通常可以快速回答，连接数据库失败的尝试通常会清楚地记录在某处，但它仍然可能是。

另一个鲜为人知的原因可能是一些 XML 验证。Web 应用程序加载一些 XML 数据的情况并不少见，使用验证解析器加载该 XML 数据的情况并不少见。验证解析器需要一个模式或 DTD 来验证，并且模式/DTD 文件的 URL 通常包含在 XML 中。因此，一些解析器会尝试从 Internet 加载模式文件以验证 XML，而这可能需要大量时间作为 Internet 连接。此外，一些解析器会默默地失败并且根本不验证 XML，可能是在相当长的超时之后。抱歉对“某些解析器”等含糊不清。但如果 XML 加载是由您的 webapp 中使用的库完成的，他们可以使用 JVM XML 解析器、任何可能的 Xerces 版本、任何可能的 JDOM 版本等......

但是，如果是连接问题，使用“netstat -anlp | grep java”会更容易查看（在您的 tomcat 中是在 *nix 环境中，否则在 Windows 上应该是“netstat -ano”），并寻找你的tomcat试图建立什么样的传出连接。在那里您可以看到数据库连接以及搜索方案或其他内容的传出（通常是 http）连接。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T14:45:20.543

如果您使用的是 Tomcat 7.0.x，它可能会扫描类路径以检测注释。如果您有很多罐子/类，那么这可能是一个问题。

正如 Simone 所说，获取和分析几个线程转储是一个很好的开始方式。

如果您使用的不是最新版本的 Tomcat，请尝试升级并检查 conf/catalina.properties 文件以获取有关如何减少扫描的 jar 数量的提示。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T21:31:54.880

您应该在部署期间进行一些线程转储（越多越好），并对其进行分析。查找块、等待等。[线程转储分析器](http://java.net/projects/tda)可能有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-13T05:49:58.190

这可能与[JDK的这个BUG有关](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4705093)

我[读了这篇文章，Tomcat7 在 Ubuntu 14.04 x64 上启动太晚了](https://stackoverflow.com/questions/26431922/tomcat7-starts-too-late-on-ubuntu-14-04-x64-digitalocean)，解决了我的问题。

尝试通过在 $JAVA_PATH/jre/lib/security/java.security 中将 securerandom.source=file:/dev/urandom 替换为 securerandom.source=file:/dev/./urandom 来**解决**它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-27T15:04:57.727

我发现在将 Web 应用程序部署到 Tomcat8 时出现了很大的延迟。我在 WAR 中的 context.xml 文件中配置了三个数据库连接池。每个连接池的初始连接数为 10 个，因此 Tomcat 在启动时创建了 30 个数据库连接。我发现在我的测试系统上为每个池配置 1 个初始连接将部署时间从大约 3 分钟缩短到 22 秒。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-11-14T18:01:25.360

`setenv.sh`在您的工作`tomcat7/bin`目录中附加以下内容：

`JAVA_OPTS="-Djava.security.egd=file:/dev/./urandom"`

# mysql - 用于用户数据库的 XML 或 MySQL？

> ID：10857580
> 
> 赞同：0
> 
> 时间：2012-06-01T21:28:38.863
> 
> 标签：mysql, xml

可能看起来是一个奇怪的问题，但是将 XML 用于数据库而不是 MySQL 和表会有性能优势吗？

为了说明这一点，我将创建一个包含用户资料的网站。我比 MySQL 了解更多的 XML，并且知道大多数人将使用 MySQL 作为标准，但想知道是否有人可以通过这种方式来比较两者的比较，以及这个建议是否对于任何理解大 O 表示法的人来说都是无耻的是...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:36:15.643

xml 文件越大，内存使用量就越多，因为您必须在运行脚本时将整个 xml 文件加载到 RAM。MySQL 数据库的平均大小约为 4mb。让我们把它变成一个 4 mb 的 xml 文件，加载到 ram 4 mb，从磁盘加载，在每次页面浏览时加载到 ram 中，在任何给定时刻大约有 25 个访问者已经丢失了 100 mb，假设他们浏览了很多页面它加起来到快速的 1 GB 内存。更不用说你每次都会增加大约 1 秒的页面加载时间，如果不是更长的话。更不用说继续读取和写入更改的变量的磁盘负载了。当两个 vitor 想要更新同一个 xml 文件时，线程分叉问题。

SQL 服务器没有这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:35:19.010

好吧，这里有两个主要问题。

首先，如果您要使用数据库，您可以在 XML 数据库和关系数据库之间进行选择。选择主要取决于数据的性质（尤其是复杂性，以及使用方式）。

然后，您可以选择使用数据库还是使用简单文件（例如 XML 文件）。该选择主要取决于数据量和事务吞吐量。

由于您没有告诉我们太多有关数据性质或其数量或吞吐量要求的信息，因此很难就这两个问题向您提供具体建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:40:11.353

MySQL 有索引，它针对您将要存储的二进制值进行了优化。xml 文件所拥有的只是一个普通文件。任何优化（缓存、索引、任何你能想到的）都将由你来实现。

XML 是一种很好的传输格式，每个人都说它.. 但您不想将它用于存储。

如果您已经了解 XML，但还不了解 MySQL.. 我会说您领先于游戏。您可能会发现编写 SQL 查询和获取结果比使用 xml 数据更直接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T21:40:23.147

正如我所看到的 - 有几种可用的 XML Db 解决方案 - 这些出现在一个简单的谷歌搜索中：

[http://exist-db.org/exist/index.xml;jsessionid=1dowedwdr9hsanbcvdcom8aka](http://exist-db.org/exist/index.xml;jsessionid=1dowedwdr9hsanbcvdcom8aka)

[http://basex.org/](http://basex.org/)

[http://www.oracle.com/technetwork/database/features/xmldb/index.html](http://www.oracle.com/technetwork/database/features/xmldb/index.html)

[http://www.sedna.org/](http://www.sedna.org/)

所以这里最重要的是发展的速度。如果您最熟悉 XML，那么使用其中之一可能会增加开发时间。但是 - 有很多关系数据库 ORM 产品 - 取决于编程语言，它们利用了最多的开发工作并使得使用网站数据库变得容易。因此，如果您对您的网站没有某些特定需求，您可以选择上述任何选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T21:40:31.713

这取决于您的数据库的结构。在不了解您的数据的情况下，这个问题无法给出明确的答案。XML 与关系数据库的任何比较很大程度上取决于您选择的数据以及您计划的操作类型。

例如，您希望存储、索引和查询超过百万行，并且每一行都有很多相同的字段。这是一个简单而固定的结构，所有记录都是一样的。它非常适合关系数据库，可以存储在单个表中。关系数据库非常有效地处理这些固定记录。

# python - Python字符串格式化，需要不断地添加到一个字符串中

> ID：10857588
> 
> 赞同：0
> 
> 时间：2012-06-01T21:29:13.240
> 
> 标签：python, string, format

我刚开始使用python，任何建议将不胜感激。我正在阅读由另一个程序生成的表格，并从每行中提取 2 个数字，我将它们称为 a 和 b。（它们被保存为通量并在我的程序中观察）我需要从每一行中取出这两个数字并像这样格式化它们 -

```
(a,b),(a,b),(a,b) ect. 
```

每个连续的括号都来自连续的行，第一个 a,b 来自第 1 行，第二个 a,b 来自第 2 行，依此类推。我需要阅读整个表格，但是表格长度会有所不同。

这就是我到目前为止所拥有的。它可以读取表格并提取我需要的数字，但是，我不知道如何将数字放入正确的格式。我想说递归将是最有效的，但我不确定如何做到这一点。先感谢您。

```
#!/usr/bin/python

file = open("test_m.rdb")

 while 1:
    line = file.readline()
    i = line.split()
    flux = i[2]
    observed = i[4]
    if not line:
        break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:38:22.153

```
with open("test_m.rdb") as inf:
    results = [(i[2],i[4]) for i in (line.split() for line in inf)]

result_string = ",".join(str(res) for res in results) 
```

或更通用的格式化程序：

```
result_string = ", ".join("('{2}', '{4}')".format(*res) for res in results) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:07:15.837

非常简单的解决方案：

```
with open('data') as data:
    print ', '.join('(%s, %s)' % (x.split()[2], x.split()[4])
                    for x in data.readlines()) 
```

只需用于`readlines`遍历文件中的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:16:56.737

*假设你得到的两个值是 str1 和 str2*
//在循环中遍历你的值
`strTable = strTable + ['('+str1+')','('+str2+')']`

希望oit能用，如果不行，评论，我会解决的。

# php - 如何在 php 中使用正则表达式仅查找数组中的数字？

> ID：10857589
> 
> 赞同：-1
> 
> 时间：2012-06-01T21:29:13.647
> 
> 标签：php, arrays, numbers, preg-match-all

我`$front->getRequest()->getParams()`用来获取 url 参数。他们看起来像这样

```
Zend_Debug::dump($front->getRequest()->getParams());

array(4) {
  ["id"] => string(7) "3532231"
  ["module"] => string(7) "test"
  ["controller"] => string(6) "index"
  ["action"] => string(5) "index"
} 
```

我有兴趣`preg_match_all`通过使用一些类似于`([\s0-9])+`

出于某种原因，我无法隔离该号码。

数组中可能会有更多`id`类似的值，但`preg_match_all`应该在新数组中将它们还给我

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:32:12.873

[array_filter()](http://us2.php.net/array_filter)是去这里的方式。

```
$array = array_filter($array, function($value) {
    return preg_match('/^[0-9]+$/',$value);
}); 
```

您可能还想用 is_numeric() 替换 preg_match() 以提高性能。

```
$array = array_filter($array, function($value) {
    return is_numeric($value);
}); 
```

那应该给出相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:47:51.290

为什么你不能捕获数组并只访问你想要的元素？

```
$params = $front->getRequest()->getParams();
echo $params['id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-27T03:47:27.427

是的，您*可以*使用正则表达式，但非正则表达式过滤器会更有效。

**不要**迭代`preg_match()`数组中的每个元素！

`is_numeric`非常宽容，可能因情况而异**。**

如果您知道要访问`id`元素值，只需直接访问它。

方法：（[演示](http://sandbox.onlinephpfunctions.com/code/27ff5b4839f8e205386325d1a26f1f0a687c15fa)）

```
$array=["id"=>"3532231","module"=>"test","controller"=>"index","action"=>"index"];

var_export(preg_grep('/^\d+$/',$array));  // use regex to check if value is fully comprised of digits
// but regex should be avoided when a non-regex method is concise and accurate
echo "\n\n";

var_export(array_filter($array,'ctype_digit'));  // ctype_digit strictly checks the string for digits-only
//  calling is_numeric() may or may not be too forgiving for your case or future readers' cases

echo "\n\n";

echo $array['id']; // this is the most logical thing to do 
```

输出：

```
array (
  'id' => '3532231',
)

array (
  'id' => '3532231',
)

3532231 
```

# javascript - javascript encodeURIComponent 并将空格转换为 + 符号

> ID：10857590
> 
> 赞同：20
> 
> 时间：2012-06-01T21:29:16.800
> 
> 标签：javascript, regex, replace, encodeuricomponent

我想对我的 URL 进行编码，但我想将空格转换为加号。

这就是我试图做的......

```
var search = "Testing this here &";

encodeURIComponent(search.replace(/ /gi,"+")); 
```

输出结果是，`Testing%2Bthis%2Bhere%2B%26`但我希望它是`Testing+this+here+%26`我尝试用替换空格`%20`将其转换为加号，但这似乎不起作用。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-01T21:30:23.467

```
encodeURIComponent(search).replace(/%20/g, "+"); 
```

您在这里做错的是*首先*将空格转换为加号，然后`encodeURIComponent`将加号转换为`"%2B"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-18T21:27:03.877

只是尝试`encodeURI()`和`encodeURIComponent()`你自己...

```
console.log(encodeURIComponent('@#$%^&*'));
```

输入：`@#$%^&*`。输出：`%40%23%24%25%5E%26*`。所以，等等，发生了什么事`*`？为什么没有转换？TLDR：您实际上想要[`fixedEncodeURIComponent()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)和[`fixedEncodeURI()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)。很长的故事...

***不要`encodeURIComponent()`直接使用。***

[`fixedEncodeURIComponent()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)如 MDN 文档所示， 您应该使用。`encodeURIComponent` ***不编码***以下任何内容：`!',()*`. 您需要使用此其他功能。它不仅可以解决您的空间问题，还可以解决其他性格问题。

`function fixedEncodeURIComponent(str) { return encodeURIComponent(str).replace(/[!'()*]/g, function(c) { return '%' + c.charCodeAt(0).toString(16); }); }`

引用 MDN 文档***`encodeURIComponent()`***...

> 为了更严格地遵守 RFC 3986（保留 !、'、(、) 和 *），即使这些字符没有正式的 URI 定界用途，也可以安全地使用以下字符：`fixedEncodeURIComponent()`.

# java - 谷歌开发者地理图表和 DAO 对象

> ID：10857594
> 
> 赞同：0
> 
> 时间：2012-06-01T21:29:29.420
> 
> 标签：java, javascript, jsp

我从谷歌看到这个链接...... [https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)

在这段代码中..

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});
     google.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country', 'Popularity'],
          ['Germany', 200],
          ['United States', 300],
          ['Brazil', 400],
          ['Canada', 500],
          ['France', 600],
          ['RU', 700]
        ]);

        var options = {};

        var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

是否可以用来自servelet和DAO的对象替换“function drawRegionsMap()”的内容？

我只是好奇...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:45:46.073

我一直在我的 JSP 项目中使用谷歌图表。基本上我在“函数draw ...（）”中获取数据的方式是生成包含我自己所有数据的javascript服务器端，然后将其发送到普通java String对象中的JSP页面，像这样插入它“

```
<script type="javascript/text"><%= youGeneratedJs %></script> 
```

这样，一旦您的 JSP 页面运行，您生成的 javascript 就会运行。这是一项艰巨的工作，但如果你看[这里](http://deangrobler.com/?p=125)，你会更好地理解我如何从我的服务器获取数据，生成 google-chart 脚本服务器端，然后在我的 JSP 页面中运行它......

希望这有帮助！

# c++ - 如果未绑定，统一值是否保留在 GLSL 着色器中？

> ID：10857602
> 
> 赞同：27
> 
> 时间：2012-06-01T21:30:30.940
> 
> 标签：c++, opengl, glsl

我正在编写一个程序，该程序对不同的基元使用两种不同的着色器。我的问题是：如果我绑定一个程序，向它发送统一变量，然后使用另一个着色器程序并返回第一个，传递的统一值会保留吗？这是一些伪代码：

```
glUseProgram(shader1);
glUniform(shader1,...);
//stuff

for(elements in a list) {
    if(element.type = 1) {
        glUseProgram(shader2);
        element.draw();
    } else {
        glUseProgram(shader1); //Here, do the uniforms from above remain, if shader2 was bound before?
        element.draw();
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-01T21:33:00.570

是的，制服是特定于某个程序的，并且如果您取消绑定并重新绑定它，它将会保持不变。

此外，如果您愿意，您可以使用[glGetUniform](http://www.opengl.org/sdk/docs/man/xhtml/glGetUniform.xml)在该示例中轻松验证这一点。

来自[OpenGL 4.1 规范](http://www.opengl.org/registry/doc/glspec41.core.20100725.pdf)：

> ### 2.11.7 统一变量
> 
> ...制服是程序对象特定的状态。一旦加载，它们就会保留它们的值，并且只要程序对象没有被重新链接，它们的值就会在使用程序对象时恢复。...

# html - Facebook 评论 HTML5 移动版：Fluid 100% 不工作

> ID：10857604
> 
> 赞同：1
> 
> 时间：2012-06-01T21:30:33.827
> 
> 标签：html, width, facebook-comments

[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

它在那里说：

> 当检测到移动设备用户代理时，移动版本将自动显示。您可以通过将 mobile 参数设置为 false 来关闭此行为。请注意：移动版忽略了宽度参数，取而代之的是 100% 的流动宽度，以便在纵向/横向切换情况下很好地调整大小。您可能需要为您的移动网站调整 CSS 以利用此行为。如果愿意，您仍然可以通过容器元素控制宽度。

但是当我在iphone上访问我的页面时，虽然我看到了Facebook评论的“移动设计”，但框的宽度是我在代码上设置的。

我的测试页面： http: [//www.santiagosarceda.com/facebook/](http://www.santiagosarceda.com/facebook/)

这是我的代码：

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>
<body>
<div class="fb-comments" data-href="http://www.site.com/3953172" data-num-posts="5" data-width="300"></div>
</body>
</html> 
```

该框总是以 300px 宽度呈现。

Facebook 评论本身有问题吗？因为几天前一切正常。

谢谢阅读！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T12:26:38.710

Facebook 评论生成已更改的内联样式，并且以下 CSS 似乎覆盖了内联 SPAN CSS，以使 Facebook 评论流体宽度

```
.fb-comments, .fb-comments span[style], .fb-comments iframe[style] {width: 100% !important;} 
```

我希望这对你有用。

# windows - 是否可以在 Windows 上安装 Hive 和 Hadoop？

> ID：10857605
> 
> 赞同：1
> 
> 时间：2012-06-01T21:30:36.730
> 
> 标签：windows, hadoop, hive

我想知道我是否可以在 Windows 上安装 Hive？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:36:33.040

*   [http://hadoop.apache.org/common/docs/r1.0.3/single_node_setup.html](http://hadoop.apache.org/common/docs/r1.0.3/single_node_setup.html)

你需要安装cygwin。

*我会*吗？不; 我会运行 Cloudera 虚拟机，而不是尝试处理所有可能的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:36:50.310

截至目前，Microsoft 提供的“Windows 上的 Hadoop”不可用于一般消费，并且没有关于其一般可用性的公开信息。

如果你在下面看到我的博客，你会发现我过去曾有机会使用二进制文件，但现在大部分关注点都集中在“ [Azure 上的 Hadoop](https://www.hadooponazure.com/) ”上，它在有限的 CTP 版本 2 中：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/28/creating-your-own-hadoop-cluster-on-windows-azure-by-using-your-own-windows-azure-订阅-account.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/28/creating-your-own-hadoop-cluster-on-windows-azure-by-using-your-own-windows-azure-subscription-account.aspx)

我会说有些开发人员写了一些关于使用 Cigwin 在 Windows 上运行 Hadoop 和其他组件的文章或解决方案，您可以尝试这些文章或解决方案，但我真的不知道什么是非常强大和稳定的。如果您真的想尝试一下，我个人建议在您的 Windows Box 上下载[Cloudera Hadoop VM](https://ccp.cloudera.com/display/SUPPORT/Cloudera%27s+Hadoop+Demo+VM)，并尝试使用任何虚拟机播放器应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:43:36.020

即将推出的是 Hadoop for Windows Server 程序，以前称为 Isotope。

*   [Hadoop For Windows Server 入门](http://social.technet.microsoft.com/wiki/contents/articles/6218.getting-started-with-hadoop-based-services-for-windows-en-us.aspx)

性能比使用 Cygwin 等效安装要好得多 - 所有文件 I/O 都是在本地完成的。Pig 和 Hive 也被放入包中，并且还有一个与 Azure 等效的安装包 - 检查一下。

# c# - 从计算机上的模板加载 html 页面

> ID：10857608
> 
> 赞同：0
> 
> 时间：2012-06-01T21:30:54.923
> 
> 标签：c#, asp.net, html, templates

我在视觉工作室使用 C#。

我想知道的是是否可以从我的计算机上的目录加载一个 html 模板。然后每次我加载我的代码时，它都会自动加载 .html 模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:38:37.447

是的，有一种方法，没有建议但存在。您可以使用此代码将文件包含在您的 asp.net 页面中。

```
<!--#include file="template.htm"--> 
```

剂量是加载此 htm 文件并将其显示在您放置此声明的位置。此外，您必须知道该文件不能动态包含任何内容。这是一个来自旧的 asp 脚本代码的命令代码，仍然可以在 asp.net 上运行

所以我不能把它称为模板。如果您希望制作类似于真实模板的内容，则必须使用母版页。使用母版页要好得多，您只需将 htm 代码复制粘贴到母版页中即可。

相对：[http ://triaslama.wordpress.com/2008/11/19/how-to-include-file-in-aspnet-pages/](http://triaslama.wordpress.com/2008/11/19/how-to-include-file-in-aspnet-pages/)

# ruby-on-rails - 外键中使用的 ActiveRecord 字符串主键

> ID：10857609
> 
> 赞同：2
> 
> 时间：2012-06-01T21:30:56.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

可以将 ActiveRecord 的主键覆盖为字符串，并具有自定义类型，例如：

```
create_table :system_currencies, :primary_key => 'iso_code' do |t|
      t.column :iso_code, :string, :limit => 3
end 
```

但是如何在其他引用它的模型中使用这个表/模型呢？对于引用，ActiveRecord 总是期望外键列以“_id”结尾并且是一个整数值。

这是真的吗？在 SystemCurrency 使用字符串 iso_code 作为主键的情况下，如何从 Order 模型中引用此类 SystemCurrency 模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T02:09:50.290

您可以在联接上指定主键。例如：

```
class Order < ActiveRecord::Base
  belongs_to :system_currency, :primary_key => "iso_code"
end 
```

更多信息可以在 Rails API 中找到：[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)

这是你所追求的还是我误解了你的问题？

# php - mod_rewrite 奇怪地在 URL 上附加了 21 个斜杠

> ID：10857612
> 
> 赞同：1
> 
> 时间：2012-06-01T21:31:31.710
> 
> 标签：php, mod-rewrite

我有一个我认为是简单的 mod_rewrite 规则。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^store/([a-z0-9_\-]+)/?([a-z0-9_\-]+)?(.*)?$ store/$2?store_name=$1$3 [L] 
```

但是，当我访问如下 URL 时：

[http://www.mydomain.com/store/e95_airport/](http://www.mydomain.com/store/e95_airport/)

它变成：

[http://www.mydomain.com/store/e95_airport//////////////////](http://www.mydomain.com/store/e95_airport/////////////////////)

我期待 URL 加载：

**index.php?store_name=e95_airport**

当我调用如下 URL 时，它工作正常：

**商店/e95_airport/some-page-other-than-index.php**

我已禁用所有其他 mod_rewrite 规则，以防万一我的 .htaccess 文件中的其他地方发生冲突。这里有没有人可以诊断我的重写规则出了什么问题？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:44:55.873

问题是该站点正在使自己陷入循环，因为您将其重定向到基本相同的地址。

好的，所以您正在使用重写来更改它，但它重写它的 URL 仍然与表达式匹配。

mod_rewrite 的工作方式是，一旦它重写了 URL，它就会有效地使用新的 URL 重新查询自己。因此，如果您的新 URL 仍然与表达式匹配，它将进入一个循环。

为什么它停在 21 个斜线处？这是因为 Apache 会检测它何时处于循环中，并在它自身请求 20 次时停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:49:03.893

正如@Spudley 所说，你陷入了一个循环。

查看您的重写规则，并查看您想要的结果，我会说重写规则也是错误的。它应该是这样的：

```
RewriteRule ^store/([a-z0-9_\-]+)/?([a-z0-9_\-]+)?(.*)?$ index.php?store_name=$1 [L] 
```

# delphi - Delphi VirtualKey to WideString/UNICODE 在非 unicode Delphi 7 上使用 TNT 控件

> ID：10857613
> 
> 赞同：0
> 
> 时间：2012-06-01T21:31:38.153
> 
> 标签：delphi, unicode, keyboard, cjk

我正在使用此代码将虚拟键转换为 WideString：

```
function VKeytoWideString (Key : Word) : WideString; 
var 
 WBuff         : array [0..255] of WideChar; 
 KeyboardState : TKeyboardState; 
 UResult       : Integer;
begin 
 Result := '';
 GetKeyBoardState (KeyboardState); 
 ZeroMemory(@WBuff[0], SizeOf(WBuff));
 UResult := ToUnicode(key, MapVirtualKey(key, 0), KeyboardState, WBuff, Length(WBuff), 0); 
 if UResult > 0 then
  SetString(Result, WBuff, UResult)
 else if UResult = -1 then
  Result := WBuff;
end; 
```

它在我的电脑上运行良好，但在中国电脑上我得到了这个：

[![富](../Images/cdd57efe4ec9d4225dbdaba74dea6627.png)](https://i.stack.imgur.com/nsn2j.png)

它将中文字符转换为汉语拼音。我认为该函数实际上返回了键盘的**原始输入**，而不是用户实际想要输入的内容。

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:38:50.383

根据评论，这是一个示例，说明如何通过处理`KeyPress`事件而不是手动转换`KeyDown`事件来避免问题。TNT 控件不提供`WideChar` `KeyPress`事件，但添加起来相当容易。理想情况下，您不应该像我在这里所做的那样将扩展放入派生类中`TTntMemo`，`TTntForm`而是修改 TNT 源代码。

该窗体包含两个`TTntMemo`控件。在第一个中按下键将在第二个中记录事件。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, TntForms, StdCtrls, TntStdCtrls;

type
  TKeyPressWEvent = procedure(Sender: TObject; var Key: WideChar) of object;

  TTntMemo = class(TntStdCtrls.TTntMemo)
  private
    FOnKeyPressW: TKeyPressWEvent;
    procedure WMChar(var Msg: TWMChar); message WM_CHAR;
  protected
    function DoKeyPressW(var Message: TWMKey): Boolean;
    procedure KeyPressW(var Key: WideChar);
  published
    property OnKeyPressW: TKeyPressWEvent read FOnKeyPressW write FOnKeyPressW;
  end;

  TTntForm = class(TntForms.TTntForm)
  private
    FOnKeyPressW: TKeyPressWEvent;
    procedure WMChar(var Msg: TWMChar); message WM_CHAR;
  protected
    function DoKeyPressW(var Message: TWMKey): Boolean;
    procedure KeyPressW(var Key: WideChar);
  published
    property OnKeyPressW: TKeyPressWEvent read FOnKeyPressW write FOnKeyPressW;
  end;

  TForm1 = class(TTntForm)
    TntMemo1: TTntMemo;
    TntMemo2: TTntMemo;
    procedure FormCreate(Sender: TObject);
    procedure FormKeyPressW(Sender: TObject; var Key: WideChar);
    procedure TntMemo1KeyPressW(Sender: TObject; var Key: WideChar);
  end;

var
  Form1: TForm1;

implementation

uses
  TntControls;

{$R *.dfm}

type
  TWinControlAccess = class(TWinControl);
  TTntFormAccess = class(TTntForm);

function TntControl_DoKeyPressW(Self: TWinControl; var Message: TWMKey;
  KeyPressW: Pointer): Boolean;
type
  TKeyPressWProc = procedure(Self: TWinControl; var Key: WideChar);
var
  Form: TCustomForm;
  Ch: WideChar;
begin
  Result := True;
  Form := GetParentForm(Self);
  if (Form <> nil) and (Form <> Self) and Form.KeyPreview then
  begin
    if (Form is TTntForm) and TTntFormAccess(Form).DoKeyPressW(Message) then Exit;
    if TWinControlAccess(Form).DoKeyPress(Message) then Exit;
  end;
  if not (csNoStdEvents in Self.ControlStyle) then
  begin
    Ch := GetWideCharFromWMCharMsg(Message);
    TKeyPressWProc(KeyPressW)(Self, Ch);
    SetWideCharForWMCharMsg(Message, Ch);
    if Ch = #0 then Exit;
  end;
  Result := False;
end;

{ TTntMemo }

function TTntMemo.DoKeyPressW(var Message: TWMKey): Boolean;
begin
  Result := TntControl_DoKeyPressW(Self, Message, @TTntMemo.KeyPressW);
end;

procedure TTntMemo.KeyPressW(var Key: WideChar);
begin
  if Assigned(FOnKeyPressW) then FOnKeyPressW(Self, Key);
end;

procedure TTntMemo.WMChar(var Msg: TWMChar);
begin
  if not DoKeyPressW(Msg) then inherited;
end;

{ TTntForm }

function TTntForm.DoKeyPressW(var Message: TWMKey): Boolean;
begin
  Result := TntControl_DoKeyPressW(Self, Message, @TTntForm.KeyPressW);
end;

procedure TTntForm.KeyPressW(var Key: WideChar);
begin
  if Assigned(FOnKeyPressW) then FOnKeyPressW(Self, Key);
end;

procedure TTntForm.WMChar(var Msg: TWMChar);
begin
  if not DoKeyPressW(Msg) then inherited;
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  Self.OnKeyPressW := FormKeyPressW;
  TntMemo1.OnKeyPressW := TntMemo1KeyPressW;
end;

procedure TForm1.FormKeyPressW(Sender: TObject; var Key: WideChar);
begin
  TntMemo2.Lines.Add(WideString('FormKeyPress: ') + Key);
end;

procedure TForm1.TntMemo1KeyPressW(Sender: TObject; var Key: WideChar);
begin
  TntMemo2.Lines.Add(WideString('TntMemo1KeyPress: ') + Key);
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:01:07.040

我也没有太多输入中文的经验，但我怀疑这是[IME](http://en.wikipedia.org/wiki/Input_method)（输入法编辑器）在起作用。这就是允许中国用户输入拼音的原因，然后将其翻译成表意字符（否则，你'我需要一个有 1000 多个键的键盘......）

虚拟键码与键盘直接相关，因此必然只对应于输入的键。所以你的函数工作正常：它将 VKEY 代码转换为 WideChar。为了做你想做的事，你必须编写第二个函数，它将拼音转换为字符。

如果你想专门为中文做这个，我敢打赌那里有做这个的功能。如果你想让它更通用，并且独立于语言环境和语言，那么也许可以为相关的 TMemo 与 IME 交互，但如果是这样，我不知道。我最好的猜测是在[MSDN 中搜索 IME](https://www.google.nl/search?q=ime+site%3Amsdn.microsoft.com)。

但是，为了回应[hvd 的评论](https://stackoverflow.com/questions/10857613/delphi-virtualkey-to-widestring-unicode/#comment-14175843)：你想在这里完成什么？

只复制 TMemo 的文本不是更容易吗？

# jquery - 发送 JSON 内容类型 + JavaScript 对象（jQuery ajax）

> ID：10857614
> 
> 赞同：1
> 
> 时间：2012-06-01T21:31:40.550
> 
> 标签：jquery, json

我在通过 http 请求发送 JavaScript 对象时遇到问题。http endpoing 只接受 json 内容类型（“application/json”或“text/json”）

我不确定为什么 data2 ( stringified json ) 工作正常但是， data1 ( json object ) 抛出 http 400 Bad Request。即为什么 jQuery 不将 json 对象序列化为有效的 json 字符串以供服务器处理。

```
var data1 = ({ rating : 3 });  //does not work
var data2 = '{ "rating" : 3}'; //works fine

$.ajax({
    url : "/rate",
    data : data1,
    type : "POST",
    contentType: "application/json",
    success: function(json){
        console.log("Ajax Return :"+json);
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T21:34:12.850

如果要发送 json 字符串，需要将 processData 设置为 false，否则 jQuery 将处理传递给 data 的内容并将其转换为 param 字符串。

```
$.ajax({
    url: "/rate",
    data: data2,
    processData: false,
    contentType: "application/json",
    success: function(json) {
        console.log("Ajax Return :" + json);
    }
});​ 
```

我猜最近在这里回答了这个问题：[Setting the POST-body to a JSON object with jQuery](https://stackoverflow.com/questions/10857382/setting-the-post-body-to-a-json-object-with-jquery/10857447#10857447)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:36:29.147

默认情况下，作为任何 ajax jQuery 调用一部分的数据参数值会将 JS 对象转换为 url-form-encoding 即“param1=value¶m2=value”字符串。GET 和 POST 请求都是这种情况。

有趣的是，即使您在 ajax 方法调用中明确指定 { contentType : "application/json" }，也只会设置适当的标头，您作为 data 参数值传递的 JS 对象不会转换为 JSON 字符串（始终希望获得更多智能），但仍被编码为 url-form-encoding。因此，必须将 JS 对象显式转换为 JSON 字符串。

有这样做的选择，

1.  JSON.stringify(obj); 它是 Javascript 的一部分，我相信它来自 ECMA 5 标准。最简单，但缺点是它不适用于较旧的浏览器 IE6 及之前的浏览器。
2.  jQuery json 插件，它还具有一些附加功能。
3.  来自[json.org的代码](http://json.org)

所以，现在我需要一个 json 主体的 POST 请求将像这样工作。

```
var dataStr = JSON.stringify({ rating : 3 });  

$.ajax({
    url : "/rate",
    data : dataStr,
    type : "POST",
    contentType: "application/json",
    success: function(json){
        console.log("Ajax Return :"+json);
    }
}); 
```

注意：“processData”布尔参数的影响这里的一些答案提到必须设置{ processData：false}。但这种情况并非如此。这仅在“数据”参数的类型不是字符串时才有效。如果它不是字符串，则默认行为是将对象转换为 url-form-encoding。但是，我认为这主要是无用的，因为如果你传递一个常规对象并且 processData 设置为 false，那么它会尝试执行 (data).toString，这会导致“[Object] [Object]”，这是非常没用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:07:42.957

将 dataType 设置为 'json' 应该可以。然后你不必使用 JSON.stringify。

```
$.ajax({
    type: 'POST',
    url: '/rate',
    data: { rating : 3 },
    dataType: 'json',
    success: function (d) { ... }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T21:34:47.827

data1 是一个对象，data2 是一个字符串。它们将被发送到服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-07T08:38:56.750

我意识到这是一篇旧帖子，但这是对我有用的解决方案。将 dataType 设置为“json”并完全删除 contentType 应该可以解决问题。这是完整的代码：

```
var data1 = { rating : 3 };

    $.ajax({
        url : "/rate",
        data : data1,
        dataType: 'json',
        type : "POST",
        //contentType: "application/json",
        success: function(json){
            console.log("Ajax Return :"+json);
        }
    }); 
```

# xml - XSLT XML to XML Remove node if specific child not does not exist

> ID：10857626
> 
> 赞同：5
> 
> 时间：2012-06-01T21:32:46.307
> 
> 标签：xml, xslt

I'm new to XSL, and not able to find information on this question. This is only for XSLT 1.0, and will eventually be run from XSLTproc.

Here is an example XML

```
<root>
    <node>
        <data />
        <child>
            <grandchild />
        </child>
        <step-child action="removenode" />
    </node>
    <node>
        <data />
        <step-child action="removenode" />
    </node>
</root> 
```

Basically, I want to keep everything except :

*   remove any node with no `<child>`
*   remove all `<step-child>`

I can only figure out how to remove unwanted nodes, but even that is questionable. I really appreciate any help with this.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T21:40:41.740

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <!--Identity template to copy all content by default-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!--Remove node elements that do not have child elements, 
               and remove step-child elements -->
    <xsl:template match="node[not(child)] | step-child"/>

</xsl:stylesheet> 
```

# c# - 在不触发删除回调的情况下替换缓存中的非可变项

> ID：10857627
> 
> 赞同：1
> 
> 时间：2012-06-01T21:32:48.740
> 
> 标签：c#, asp.net, web-services, asp.net-cache

好吧，每次用户点击我的网络服务时，我都会向缓存中添加一个项目：

```
DateTime? token = HttpContext.Current.Get(TimeoutKey) as DateTime?;

int hashkey = (email + password).GetHashCode();

if (token == null)
{
    HttpContext.Current.Cache.Add(
         hashkey.ToString(),
         DateTime.Now,
         null,
         Cache.NoAbsoluteExpiration,
         new TimeSpan(0, 20, 0),
         CacheItemPriority.NotRemoveable,
         UserTimedOut);
}
else
{
    // How to do this without triggering UserTimedOut?
    Cache[hashkey.ToString()] = DateTime.Now;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:08:18.440

你可以围绕`DateTime`可变的创建一个自定义类包装器，比如 a`UserStateInfo`吗？

# django - 在 django 模型中过滤外键选择

> ID：10857636
> 
> 赞同：0
> 
> 时间：2012-06-01T21:33:33.367
> 
> 标签：django, django-models

是否有可能在 djano 模型中过滤 ForeignKeys 字段查询？（默认情况下 Django 使用 objects.all() 我猜）。

请参见下面的示例：

服务器 -> Conf -> sip_conf -> 对等 -> 上下文

服务器 -> ext_conf -> 上下文

contextFK 只能在 ext_conf 模型中包含的 context's_ID 列表中，用于 Conf 和 ext_conf 的相同 ServerFK；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:39:02.273

这是一个相对直接的限制，您可以使用[`limit_choices_to`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to).

任何太复杂的东西，您都需要覆盖`ModelForm`：

```
class MyModelForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyModelForm, self).__init__(*args, **kwargs)

        self.fields['my_fk_field'].queryset = self.fields['my_fk_field'].queryset.filter(...) 
```

# php - 如何使用下拉菜单更改 PHP 对象变量？

> ID：10857637
> 
> 赞同：0
> 
> 时间：2012-06-01T21:33:47.233
> 
> 标签：php, forms

标题可能不是表达这个问题的最佳方式，所以如果我能改进它，请告诉我。

我想要做的是使用下拉菜单来更改 PHP 对象的值。

在下面的示例中，我希望将 $selected 分配为所选菜单选项的“值”。

```
 $selected = $_GET['program_select']; 
```

这是下拉菜单：

```
 <select id="programs_select" name="programs_select">
    <option>Select a Different Month</option>  
    <?
     foreach($pagedata->programs as $programs){
    ?>
    <option value="<?=$programs->id?>"><?=$programs->title?></option> 
    <?    
    }
    ?>
  </select> 
```

如何将此值发送到服务器并使用所选值重新加载页面？

例如，如果选择了第二个选项并且它的 id 为 2，则结果将是：

```
$selected = 2; 
```

仅供参考，这用于动态生成缩略图菜单的输出数据。显示的“程序”将由所选选项中的值确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:34:19.693

您在 php 端使用 GET 。因此，如果您只想知道如何将值传递给您的 php 文件，那么将您的选择标签放入表单并添加一个提交按钮。

```
<form id="your_id" name="your_id" method="get" action="your_controller/your_function_name">
 <select id="programs_select" name="programs_select">
    <option>Select a Different Month</option>  
    <?
     foreach($pagedata->programs as $programs){
    ?>
    <option value="<?=$programs->id?>"><?=$programs->title?></option> 
    <?    
    }
    ?>
  </select>
  <input type="submit" id="submit" name="submit" value="GO">
</form> 
```

在您的控制器中，根据该值回显某些内容。

> $selected = $_GET['program_select'];

但是，如果您想在不刷新的情况下更改同一页面中的内容。您可能需要 ajax 调用来执行此操作，我推荐使用 jQuery ajax api (http://api.jquery.com/jQuery.ajax/)。

```
$("select#programs_select").live('change', function(){
        var id = $("select#programs_select").val();        
                $.ajax({
                type: "GET",
                url: "your_controller/the_funstion_name?programs_select=" + id,
                data: "",
                contentType: "application/json; charset=utf-8",
                            success: function(msg) {
                $("#your_thumbnail_menu_id").html(msg); 
                },
                error: function() {
                alert("Error! Ajax failed");
                }
            }); 

        }); 
```

在您的控制器端，最后回显您需要的 html。例如：

```
$selected = $_GET['program_select']; 
$html = "<ul><li>your menu  $selected</li>";
$html .="<li>which depends on the id you got!</li></ul>";
echo $html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:43:27.263

```
 <select id="programs_select" name="programs_select" onchange="ihavechanges(this.options[this.selectedIndex].value)">
    <option>Select a Different Month</option>  
    <?
     foreach($pagedata->programs as $programs){
    ?>
    <option value="<?=$programs->id?>"><?=$programs->title?></option> 
    <?    
    }
    ?>
  </select>
  <script type="text/javascript">
  function ihavechanged(towhat)
     {
     document.location.href = "reload.php?id="+towhat;
     }
   </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:45:25.637

```
<select id="programs_select" name="programs_select">
    <option>Select a Different Month</option>  
    <?
    $selected = $_GET['program_select'];
    foreach($pagedata->programs as $programs){
        $seld = ($selected == $program-id) ? 'selected' : '';
        echo '<option value="'.$programs->id.'" '.$seld.'>'.$programs->title.'</option>';     
    }
    ?>
</select> 
```

# iphone - 向网站发送请求（例如登录）？

> ID：10857646
> 
> 赞同：1
> 
> 时间：2012-06-01T21:34:20.000
> 
> 标签：iphone, ios, login, asihttprequest

我正在我的应用程序中测试登录。这是页面的源代码：

```
 <label for="login">Username:</label><br/>
    <input id="login"  name="login"/><br/>              
    <label for="password">Password:</label><br/>
    <input id="password" name="password" type="password"/><br/>
    <input type="SUBMIT" class="tasto" value="Conferma" name="evn_conferma=evento"/> 
```

我试过这个：

```
ASIFormDataRequest * request2 = [ASIFormDataRequest requestWithURL:url];
[request2 setPostValue:@"USERNAME" forKey:@"login"];
[request2 setPostValue:@"PASSWORD" forKey:@"password"];

#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_4_0
   [request2 setShouldContinueWhenAppEntersBackground:YES];
#endif

[request2 setDelegate:self];
[request2 setDidFailSelector:@selector(uploadFailed:)];
[request2 setDidFinishSelector:@selector(uploadFinished:)];
[request2 startSynchronous]; 
```

但是什么都没有加载。请帮帮我！

编辑：我想我需要一些关于Conferma 按钮的信息。

```
- (void)uploadFinished:(ASIHTTPRequest *)theRequest
{

NSString *responseString = [theRequest responseString]; 
NSLog(@"%@",responseString); 
NSLog(@"Finished uploading %llu bytes of data",[theRequest postLength]);

} 
```

关于最后一种方法，如果我把字符串

```
[request2 setPostValue:@"Conferma" forKey:@"evn_conferma=evento"]; 
```

我看到上传0字节！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:43:42.667

我猜这不是一个修复，但你应该改变

```
[request2 startSynchronous]; 
```

至

```
[request2 startAsynchronous]; 
```

由于您将委托与自我挂钩，因此您应该使其异步

还添加以下内容

```
[request2 setPostValue:@"Conferma" forKey:@"evn_conferma=evento"]; 
```

# android - Android：连续创建4个宽度相等的按钮（相对布局）

> ID：10857649
> 
> 赞同：0
> 
> 时间：2012-06-01T21:34:42.923
> 
> 标签：android, android-layout, android-relativelayout

我需要连续创建 4 个宽度相等的按钮。我知道如何使用线性布局和权重来做到这一点，但这对我来说不太可接受。我还有一些与我的 4 个按钮相关的其他视图，所以我想在相对布局中做所有事情。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:43:47.653

如何将按钮的宽度设置为标准尺寸？

```
<Button
    android:width="75dp"
    ... /> 
```

**添加**

要在运行时查找显示的宽度：

```
int width = getWindowManager().getDefaultDisplay().getWidth() / 4; 
// Set this width to your buttons 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:53:15.710

选择一个可以告诉其他视图具有相同宽度和高度的视图。为了获取视图的大小，请使用以下内容：

```
private static void runJustBeforeBeingDrawn(final View view, final Runnable runnable)
{
    final ViewTreeObserver vto = view.getViewTreeObserver();
    final OnPreDrawListener preDrawListener = new OnPreDrawListener()
    {
        @Override
        public boolean onPreDraw()
        {
            Log.d(App.APPLICATION_TAG, CLASS_TAG + "onpredraw");
            runnable.run();
            final ViewTreeObserver vto = view.getViewTreeObserver();
            vto.removeOnPreDrawListener(this);
            return true;
        }
    };
    vto.addOnPreDrawListener(preDrawListener);
} 
```

runJustBeforeBeingDrawn 的替代方案：[https ://stackoverflow.com/a/28136027/878126](https://stackoverflow.com/a/28136027/878126)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:54:37.333

我不确定，但我认为没有**权重**标签的唯一方法是运行时/以编程方式设置它。我通过在**integer.xml**中设置一个常量来完成此操作，如下所示：

 **```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer name="numberOfButtons">4</integer>
</resources> 
```*  *而且，在您的 Adapter/Activity 类中，如下所示：

 **```
DisplayMetrics dm = new DisplayMetrics();
// dm holds your structure of resolution
context.getWindowManager().getDefaultDisplay().getMetrics(dm);

int width = dm.getWidth();
btn1.setWidth(width/getInteger(R.integer.numberOfButtons));
btn2.seTwidth(width/getInteger(R.integer.numberOfButtons));
btn3.seTwidth(width/getInteger(R.integer.numberOfButtons));
btn4.seTwidth(width/getInteger(R.integer.numberOfButtons)); 
```*  *希望这对您有所帮助。****

# http - 使用 com.loopj.android.http 库会导致 java.lang.NoClassDefFoundError

> ID：10857651
> 
> 赞同：2
> 
> 时间：2012-06-01T21:34:51.477
> 
> 标签：http, asynchronous

我试过使用库子句，但这给了我这个错误：**安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY**

我尝试将库 android-async-http-1.3.2.jar 添加到 lib 文件夹和作为用户库。没有编译时错误，但在运行时似乎由于某种奇怪的原因找不到库。

这是错误日志：

06-01 14:29:57.073：E/AndroidRuntime(5354)：致命异常：主要 06-01 14:29:57.073：E/AndroidRuntime(5354)：java.lang.NoClassDefFoundError：com.loopj.android.http。 RequestParams 06-01 14:29:57.073: E/AndroidRuntime(5354): at com.android.myprojectname

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T10:14:50.623

检查窗口`.jar`中的选项卡中的检查。`"Order and Export"``"Java build path"`

如果它不起作用，请`"libs"`在`"Source"`选项卡中添加您的文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:49:33.997

jar文件应该在`libs`文件夹而不是`lib`文件夹中，试试看。

此外，请确保您正在导入要在代码中使用的类：

```
import com.loopj.android.http.*; 
```

# android - 在 Android strings.xml 文件中使用 HREF

> ID：10857652
> 
> 赞同：4
> 
> 时间：2012-06-01T21:34:51.650
> 
> 标签：android

我正在尝试从 strings.xml 文件中为 TextView android:text 属性分配以下字符串。我无法让链接显示为可点击的超链接。有什么建议么？我尝试了以下技术。

```
 <string name="no_device_body">click following link: <![CDATA[<a href="http://cnn.com">link1</a>]]>
 </string>

 <string name="no_device_body">click following link: http://cnn.com">
 </string> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T21:40:11.100

```
<string name="no_device_body">click following link: &lt;a href="http://findmespot.com/en/index.php?cid=116">link1&lt;/a>"</string> 
```

ref: [android string.xml 读取 html 标签问题](https://stackoverflow.com/questions/4637780/android-string-xml-reading-html-tags-problem)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T21:41:24.537

当您在那里使用第二个字符串时，文本视图中会显示什么？只有网址但不可点击？

你有

```
android:autoLink="web" 
```

或者

```
android:autoLink="all" 
```

在布局 xml 文件中的 TextView 上设置？

# python - Python将多个变量分配给相同的列表值？

> ID：10857654
> 
> 赞同：12
> 
> 时间：2012-06-01T21:34:56.623
> 
> 标签：python, list

我正在编写一个函数来计算日历日期。在减少行数时，我发现我无法*将多个变量分配给同一个范围*。

```
Jan, Mar, May, Jul, Aug, Oct, Dec = range(1,32) 
```

是否有一种有效的方法来分配这些值，为什么 python 会给出 ValueError？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-01T21:37:41.820

利用

```
Jan = Mar = May = ... = range(1, 32) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T21:45:45.870

执行您所描述的操作的最简单方法是使用`x=y=z ... = VALUE`语法，其中 x、y、z 和您包含的任何其他变量都将被赋值为`VALUE`.

在您的示例中，等号左侧的所有逗号分隔变量都分配给右侧元组的顺序值。因此，您可以执行以下操作：

```
values = ( 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)
Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec = values 
```

在您的代码中，左侧有 7 个值，右侧有 31 个值，因此您会收到超出范围的错误，因为左侧的列表比左侧的数字或要分配其中值的变量长. 我知道上面的代码与实现你的目标没有太大的关系，但我想我至少会给出一些关于它试图做什么的见解。:D

# entity-framework - 实体框架中的查询投影是什么意思？

> ID：10857655
> 
> 赞同：25
> 
> 时间：2012-06-01T21:35:10.657
> 
> 标签：entity-framework

我正在查看一些 EF 示例并试图破译在执行 LINQ to Entities 或 EntitySQL 时“查询投影”*究竟等同于什么。*我相信这是查询结果被过滤并投影为匿名类型但不是 100% 确定的时候。

有人可以对此进行定义，并可能提供一个使用它的示例的小型 L2E 查询吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-01T21:43:31.340

投影是查询的结果输出到与查询的类型不同的类型。 [另一篇文章](http://www.blackwasp.co.uk/LinqProjection.aspx)将其定义为：*转换查询结果的过程*

投影可以是匿名类型，但也可以是具体类型。如果您来自 SQL 世界，它类似于您的`SELECT`子句中列出的列。

**将对象的子集选择为具体类型的示例：**

```
ParentObj.Select(x=> new ParentSlim { ParentID = x.ParentID,  Name = x.Name } ); 
```

.
**将对象合并为第三种匿名类型的示例：**
*注意：该`select new`部分是投影。*

```
from P in ParentObj.AsQueryable()
join C in ChildObj.AsQueryable() on P.ParentID == C.ParentID

select new {                              // <-- look ma, i'm projecting!
               ParentID = P.ParentID,
               Name     = P.Name,
               SubName  = C.Name
               RandomDate = DateTime.UtcNow()
         } 
```

# android - 将代码放在片段类中的什么位置？

> ID：10857659
> 
> 赞同：0
> 
> 时间：2012-06-01T21:35:33.617
> 
> 标签：android, android-fragments

我有这个片段：

```
public class Fragment_PV extends Fragment {

@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

      //option 2

        return inflater.inflate(R.layout.fragment_pv, container, false);
//option 1

}
//option 3          
  } 
```

现在，当有人在与此片段相关的布局中按下按钮时，我想做相当多的数学运算。就目前而言，布局加载正常，但当然没有任何反应。

当我将代码放在选项 1 所在的位置时，eclipse 说代码“无法访问”

当我将代码放在选项 2 所在的位置时，没有编译错误，但是当加载片段时应用程序崩溃，说它在 oncreateview 方法中遇到错误

当我将代码放在选项 3 所在的位置时，它告诉我括号 {} 设置错误，应该对其进行改造，使其看起来像选项 1 ...

请帮忙 ：）

ps我正在测试的代码，只是为了看看它是否工作是这样的：

```
Toast errormsg = Toast.makeText(getActivity(), "Error!", 5000);
                errormsg.setGravity(Gravity.CENTER, 0, 0);
                errormsg.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:54:07.357

将您的代码放入`onActivityCreated`.

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    // Your code here

    Toast errormsg = Toast.makeText(getActivity(), "Error!", 5000); 
    errormsg.setGravity(Gravity.CENTER, 0, 0); 
    errormsg.show(); 

} 
```

# uuid - 如何获取 dotCloud 应用程序的 UUID？

> ID：10857660
> 
> 赞同：0
> 
> 时间：2012-06-01T21:35:47.053
> 
> 标签：uuid, dotcloud

一些 PaaS 提供商有一个**APPLICATION_UUID**环境变量，这显然是唯一的（至少在他们的平台上）。

DotCloud 有类似的东西吗？我在*environment.json中没有找到类似的东西*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:41:23.033

There isn't a UUID, but if you are trying to tell different instances from each other, you can use the dotcloud configuration values from the environment.json file:

DOTCLOUD_PROJECT : which is the name you have given the dotcloud application DOTCLOUD_SERVICE_NAME : which is the name you give each service (typically www, or data, etc) DOTCLOUD_SERVICE_ID : the instance number of a particular instance, starting at 0

If you concatenate the 3, it would create a unique identifier across all of your dotcloud applications, services, and instances.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:32:21.027

没有这样的东西暴露在外面。你需要它做什么，也许我可以建议一个替代方案？

# grails - Grails 2 服务中的多个动态数据源

> ID：10857663
> 
> 赞同：12
> 
> 时间：2012-06-01T21:36:20.743
> 
> 标签：grails, datasource

我正在开发一个必须访问多个数据源的 Grails 应用程序。数据源在默认数据库中定义（即它们存储在那里，我必须调用默认数据库以检索我必须准备连接到的数据源名称列表）。当服务器启动时，我检索数据库列表，创建数据源 bean 并注入它们。所有动态添加的数据库在结构上都是相同的（即具有相同的表和域对象结构）。

[这个问题](https://stackoverflow.com/questions/10534238/grails-2-how-to-dynamically-call-multiple-datasources)是我最接近一段有用的代码，但这并不是我所需要的。

### 问题 #1

*   当我注册数据源 bean 时，它们会显示在我期望的位置，但 Grails 不会选择它们。

这就是我添加它们的方式：

```
// Register datasource bean
def beanName = 'dataSource_devDB1'

BeanBuilder bb = new BeanBuilder()
bb.beans {
    "${beanName}"(BasicDataSource) { 
        url = "jdbc:h2:devDB1Db;MVCC=TRUE"
        pooled = true
        driverClassName = "org.h2.Driver"
        username = "sa"
        password = ""            
    }
}

bb.registerBeans(grailsApplication.mainContext)

// check that it registered
def ctx = grailsApplication.mainContext
def ctxlist = ctx2.beanDefinitionNames.findAll{it.contains( 'dataSource' )}

log.info "ctxlist = " + ctxlist 
```

这打印：

```
[dataSource, dataSourceUnproxied, dataSource_devDB1] 
```

当我这样做时，我可以对默认数据源执行操作，仅此而已。

### 问题 #2

*   如果我将所有数据源声明为`Datasource.groovy`文件的一部分，那么我可以对所有数据库执行操作，但不像[文档所宣传的那样](http://grails.org/doc/latest/guide/conf.html#multipleDatasources)

如果我对我的域对象进行静态映射，它会起作用：

```
static mapping = {datasources(['devDB1', 'devDB2', 'DEFAULT')] or datasource = 'ALL' 
```

但我想要的是将所有这些作为服务的一部分执行，并声明我的域对象使用所有数据源。

在服务中声明数据源不起作用：

```
class secureDBService{

  static datasource = "devDB1"

  def readWriteMethod(){
   .....
  // this always uses the default datasource ignoring the static property above.
  // the only time it uses devDB1 is if I declare it as part of the domain datasource
  // mapping
  }
} 
```

无论如何，这将始终使用默认数据源。它使用正确数据源的唯一时间是在域对象上我列出有问题的数据源。

* * *

那么，有没有人：

1.  尝试添加动态数据源并成功？

2.  使用 grails 服务在数据源之间切换？

3.  （这将是一个非常棒的额外内容，作为“顶部的樱桃”）成功使用多个数据源和 Spring 安全核心？如何切换安全插件的数据源？

谢谢

--

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-15T01:49:28.947

我从事过类似的项目，其中应用程序必须从默认数据库中检索数据源列表（连接字符串），并连接到每个数据源并使用石英作业执行操作。

我实现它就像连接到应用程序中的每个数据源（不是来自*DataSorce.groovy*）并编写 SQL 而不是 HQL。

```
import groovy.sql.Sql

class SqlService{
    Sql getDbConnection(String connectionString, String dbUser, String dbPassword){
        def sql = Sql.newInstance(connectionString, dbUser, dbPassword, "driver_class")
        return sql
    }
} 
```

从上面的代码中获取连接并使用并关闭连接`sql`执行 SQL 查询。[这](http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html)是类文档。`sql.execute "SQL STATEMENT"``sql``Sql`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T14:58:33.350

我有两个使用 Grails 2.3.11 的不同数据源。我将 1 个数据源用于我的 H2 数据库，另一个用于 Oracle 数据库。我不得不将 Hibernate 4 与 Grails 2.3 一起使用。在我的`BuildConfig.groovy`我指定了对休眠 4 的依赖：

```
runtime ":hibernate4:4.3.5.4" 
```

在我的`DataSource.groovy`文件中，我使用了以下 Hibernate 缓存设置：

```
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory'
    singleSession = true // configure OSIV singleSession mode
} 
```

（旁注：如果没有缓存设置，我会收到以下 CacheManager 错误，“另一个未命名的 CacheManager 已存在于同一 VM 中”。在[https://jira.grails.org/browse/GPCACHEEHCACHE- 13](https://jira.grails.org/browse/GPCACHEEHCACHE-13)，但是一旦我将设置到位，错误就消失了。）

然后我定义了我的数据源：

```
environments {
    development {
        dataSource_oracle {
            pooled = true
            dialect = org.hibernate.dialect.Oracle10gDialect
            driverClassName = 'oracle.jdbc.OracleDriver'
            username = 'user'
            password = 'pass'
            url = 'jdbc:oracle:thin:@(serverName):(port):(SID)'
            dbCreate = 'validate'
        }
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE"
            properties {
               jmxEnabled = true
               initialSize = 5
               maxActive = 50
               minIdle = 5
               maxIdle = 25
               maxWait = 10000
               maxAge = 10 * 60000
               timeBetweenEvictionRunsMillis = 5000
               minEvictableIdleTimeMillis = 60000
               validationQuery = "SELECT 1"
               validationQueryTimeout = 3
               validationInterval = 15000
               testOnBorrow = true
               testWhileIdle = true
               testOnReturn = false
               jdbcInterceptors = "ConnectionState"
               defaultTransactionIsolation = java.sql.Connection.TRANSACTION_READ_COMMITTED
            }
        }
    }
} 
```

默认情况下，我的域类使用 H2 数据库，并将我的 Oracle 数据源指定为：

```
class MyService {

    def dataSource_oracle
    static transactional = true

    def getMethod() {
        assert dataSource_oracle != null, "dataSource is null! Please check your configuration!"
        def sql = Sql.newInstance(dataSource_oracle)
        ...
    }
} 
```

上面，我允许依赖注入为服务提供 oracle 数据源，`def dataSource_oracle`. 如果我想使用 H2 数据源，我将数据源声明为`def dataSource`并允许 DI 注入我的其他数据源。

* * *

**我无法让这两个数据源按照 http://grails.github.io/grails-doc/2.3.11/guide/conf.html#multipleDatasources 文档中的**说明[工作](http://grails.github.io/grails-doc/2.3.11/guide/conf.html#multipleDatasources)。通过将数据源声明为 dataSource 和 dataSource_lookup 然后将其用作：

```
class DataService {
   static datasource = 'lookup'

   void someMethod(...) {
      …
   }
} 
```

但**我能够使用上述解决方案使其工作**。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T07:37:04.403

您可以在单个应用程序中添加多个数据源，并在服务中访问它们。

首先，您需要在 resources.groovy 中添加基本数据源。

首先导入 BasicDataSource

```
import org.apache.commons.dbcp.BasicDataSource; 
```

然后

```
 switch (grails.util.GrailsUtil.environment) {
    case "development":
        firstDataSource( BasicDataSource ) {
            driverClassName = "net.sourceforge.jtds.jdbc.Driver"
            url = "jdbc:jtds:sqlserver://localhost:1433;DatabaseName=<Db_name>"
            username = "sa"
            password = "root"
            String SqlServerInstance = "SQLEXPRESS";
            url = url + ";" + SqlServerInstance;
        }
        break

    case "test":
        firstDataSource( BasicDataSource ) {

            driverClassName = "net.sourceforge.jtds.jdbc.Driver"
            url = "jdbc:jtds:sqlserver://localhost:1433;DatabaseName=<Db_name>"
            username = "sa"
            password = "root"
            String SqlServerInstance = "SQLEXPRESS";
            url = url + ";" + SqlServerInstance;            }
        break;

} 
```

以同样的方式您可以添加更多数据源，上面的代码将为您提供除默认数据源之外的更多数据源可供访问。我使用 switch 为不同的环境配置相同的数据源，同样的方法可以添加更多。

在服务中，它可以在服务中访问，如下所示：

```
BasicDataSource firstDataSource;
Connection con = firstDataSource.getConnection(); 
```

然后可以使用连接对象。

我认为应该有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-27T12:10:53.243

为 grails 使用分片插件来解决您的问题

# vba - 简单的 Excel VBA 搜索和查找功能提供#VALUE！错误

> ID：10857664
> 
> 赞同：2
> 
> 时间：2012-06-01T21:36:25.487
> 
> 标签：vba, excel, excel-2010

这是我 10 年来第二次使用 VBA/Excel，这并不是一个有趣的回报。我正在尝试做一些非常简单的事情，但我不确定我的数据类型是否错误或什么，调试器并没有给我太多继续。在我使用带有#VALUE 的自定义函数的单元格中执行失败！错误。这让我觉得我的数据类型无效，但我参考了几个不同的来源，找不到问题所在。

该函数应在描述单元格文本中搜索存储在 Lookup1 范围内的任何子字符串的任何匹配项，然后使用 lookup2 范围进行哈希表样式转换（如果找到）。

```
Function ExtractCategory(Description As String, Lookup1 As Range, _
Lookup2 As Range) As String

    Dim txt As String
    Dim SubjCell As Range

    For Each rRange In Lookup1
        SubjCell = rRange
        txt = SubjCell.Value

        If InStr(txt, Description) <> 0 Then
            ExtractCategory = Application.WorksheetFunction.Lookup(txt, _
            Lookup1, Lookup2)
            Exit For
        Else
            ExtractCategory = "Not Found"
        End If
    Next rRange
End Function 
```

我仍然不确定的唯一类型问题是`txt = SubjCell.Value`. 当我尝试使用`SubjCell.Text`时，IDE 将其取消大写为`text`...不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:50:50.837

试试这个（两者都工作 -**尝试和测试**）

```
Function ExtractCategory(Description As String, Lookup1 As Range, _
Lookup2 As Range) As String
    Dim rRange As Range

    For Each rRange In Lookup1
        If InStr(1, rRange.Value, Description) Then
            ExtractCategory = Evaluate("=lookup(" & rRange.Value & "," & _
            Lookup1.Address & "," & Lookup2.Address & ")")
            Exit For
        Else
            ExtractCategory = "Not Found"
        End If
    Next rRange
End Function 
```

这与

```
Function ExtractCategory(Description As String, Lookup1 As Range, _
Lookup2 As Range) As String
    Dim rRange As Range

    For Each rRange In Lookup1
        If InStr(1, rRange.Value, Description) Then
            ExtractCategory = Application.WorksheetFunction.Lookup(rRange.Value, _
            Lookup1, Lookup2)
            Exit For
        Else
            ExtractCategory = "Not Found"
        End If
    Next rRange
End Function 
```

**编辑**

**快照**

![在此处输入图像描述](../Images/884a47b12838c26aa5ef4586e5550ce6.png)

# excel - Excel 显示 12:30 到 13:00 之间经过的 1:30

> ID：10857666
> 
> 赞同：0
> 
> 时间：2012-06-01T21:36:32.540
> 
> 标签：excel, excel-formula

我正在尝试计算两个不同时间之间的 h:mm 。我正在使用这个公式

```
=TEXT(D21+E21, "h:mm") 
```

当两个单元格是`12:00`和`12:30`或时`12:00`，`1:00`它分别显示`:30`和`1:00`。当它在 and 之间时`12:30`，`1:00`它显示`1:30`。请注意，所有时间都是一天中的时间。

最终我想要四个单元格，Time In、Time Out、Lunch In 和Lunch out，时间跨度显示时间减去午餐。对于几乎任何输入，我都无法获得 excel 以使我的任何内容都接近准确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:19:18.197

我建议你**不要**使用 TEXT 功能。顾名思义 - TEXT 函数的结果是一个文本值，您可能无法在后续计算中使用它。只需使用就足够了

`=E21-D21`

...然后将结果单元格格式化为 [h]:mm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:42:00.560

将其更改为：

```
=TEXT(E21-D21, "h:mm") 
```

（将 E2 更改为 E21 以匹配原始问题 JMG）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:44:48.107

将其更改为 TEXT(E21-D21, "h:mm") 并使用 13:00 而不是 1:00，或添加日期。如果 E21 小于 D21，它将失败，并且 1:00 被翻译为 1AM。如果您想获得不同天数的差异，那么还要添加日期信息。

# android - Android 布局：在不滚动的情况下尽可能多地显示 ImageView

> ID：10857668
> 
> 赞同：0
> 
> 时间：2012-06-01T21:36:52.037
> 
> 标签：android, android-layout, android-imageview, android-gridview, android-tablelayout

我正在开发一个应用程序，它应该在屏幕上显示几个相同大小的图像。但它应该只显示尽可能多的图像而不提供滚动。

例如，在“大”平板电脑上，它可以显示 10x10 Imageviews（屏幕很大，所以有很多空间可以放图片）

在“大”手机上可能有足够的空间来显示 6x6 ImageViews，因此它应该只显示 6x6 图像数组。

在小型手机上可能只有 4x4 ImageViews 的空间，所以它应该只显示这个。

我怎样才能在Android中做到这一点？我知道“layout-large”，...但是如果我为“large”设备制作一个特殊的固定 xml-layout，它不会适合所有设备正确。例如，Galaxy Nexus 是“普通”设备，Nexus One 也是如此，但 Galaxy Nexus 上的图像视图行至少比 Nexus One 上多一两个空间。那么我是否必须以某种方式在代码中测量分辨率有多大并相应地显示一些 TableRows？或者有什么特殊的方法可以管理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:39:22.120

您应该使用 GridView 来管理它。

[GridView Android 开发者](http://developer.android.com/resources/tutorials/views/hello-gridview.html)

编辑：确实正如 Tomasz Gawel 所说：`notice the GridView's android:numColumns="auto_fit" xml attribute`

编辑：因为你不希望它是可滚动的，你可以只获取屏幕大小，将它除以你的项目的大小，然后只放入你想在 gridview 中显示的项目。只有当它的项目多于它可以显示时，gridview 才会滚动。

```
getResources().getDisplayMetrics().widthPixels and heightPixels 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:40:53.167

您可以查询设备屏幕的属性，例如尺寸、密度等。一旦您知道尺寸，您就可以选择要使用的布局。

看看这个 stackoverflow 帖子。[Android：如何获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

# c# - 从父级到对话框的数据

> ID：10857670
> 
> 赞同：0
> 
> 时间：2012-06-01T21:37:02.197
> 
> 标签：c#, winforms

我有一个父表单和一个对话框。我需要将信息从父级传递到对话框

这是我所拥有的：

```
private void Item_Click(object sender, EventArgs e)
{
  DialogResult result = DialogResult.OK;
  DlgGraphOptions _frmDlgGraphOptions = new DlgGraphOptions();            
  _frmDlgGraphOptions.m_SerOpts = theDGroup.m_SerOpts;
  _frmDlgGraphOptions.ShowDialog(this);
  if (result == DialogResult.OK)
  {
    // Save the revised options to the Data Group
    theDGroup.m_SerOpts = _frmDlgGraphOptions.m_SerOpts;
  } 
```

在 DlgGraphOptions(child/dialog) 表单中，我已经初始化

```
public partial class DlgGraphOptions : Form
{
  public GraphOpts_t m_SerOpts = new GraphOpts_t();
}

private void InitSettings(int idxSeries)
{
  m_nMaxPts = m_SerOpts.GetMaxPts(idxSeries);
} 
```

所以我需要将 DGroup.m_SerOpts 从父级传递给对话框，所以我已经完成了

```
_frmDlgGraphOptions.m_SerOpts = theDGroup.m_SerOpts; 
```

在父母。现在在孩子身上：

```
public GraphOpts_t m_SerOpts = new GraphOpts_t; 
```

这似乎是错误的。我不想重新初始化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:59:42.903

我认为您应该以这种方式更改代码：

首先，在**DlgGraphOptions**表单中，更改 DlgGraphOptions 的构造函数

```
// Force the caller to pass a GraphOpts_t 
// Check if it is a valid instance or create one as new
public partial class DlgGraphOptions(GraphOpts_t input ) : Form 
{ 
     m_SerOpts = (input == null ? new GraphOpts_t() : input);
} 
```

然后创建一个只有 getter 返回内部 GraphOpts 的公共属性

```
public GraphOpts_t Options 
{ 
    get{ return m_SerOpts; }
} 
```

然后，在调用表单中，更改您的代码

```
// Pass the m_setOpts from theDGroup 
DlgGraphOptions _frmDlgGraphOptions = new DlgGraphOptions(theDGroup.m_SerOpts);
if(DialogResult.OK == _frmDlgGraphOptions.ShowDialog(this))
{  
    // Save the revised (or new) options to theDGroup  
    theDGroup.m_SerOpts = _frmDlgGraphOptions.Options;  
} 
```

这种方法将强制对话框的用户传递初始化值或 null。但是，您的 InitSettings 将使用初始化值，并且您没有初始化两次选项实例。
（实际上您的代码并没有太大的改进，但我认为这是一种更好的方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:56:13.680

您的子类可能应该具有`m_SerOpts`as 属性：

```
public partial class DlgGraphOptions : Form
{
  public GraphOpts_t m_SerOpts { get; set; }
} 
```

您的点击事件可能可以像这样清理：

```
private void Item_Click(object sender, EventArgs e)
{
  using (DlgGraphOptions _frmDlgGraphOptions = new DlgGraphOptions()) {
    _frmDlgGraphOptions.m_SerOpts = theDGroup.m_SerOpts;
    if (_frmDlgGraphOptions.ShowDialog(this) == DialogResult.OK)
    {
      // Save the revised options to the Data Group
      theDGroup.m_SerOpts = _frmDlgGraphOptions.m_SerOpts;
    }
  }
} 
```

在您的 DlgGraphOptions 表单中，您需要在或按钮事件中设置表单的`DialogResult`属性。`OK``Save`

您也可以只通过构造函数传递 m_SerOpts 对象：

```
public partial class DlgGraphOptions : Form
{
  public GraphOpts_t m_SerOpts { get; }

  public DlgGraphOptions(GraphOpts_t serOpts) {
    InitializeComponents();
    m_SerOpts = serOpts;
  }
} 
```

# android - 每天使用 AlarmManager 发送意图？

> ID：10857681
> 
> 赞同：1
> 
> 时间：2012-06-01T21:38:18.447
> 
> 标签：android, android-widget, alarmmanager, android-alarms

我想要以下内容：

*   AlarmManager 会在午夜准确地向我的 AppWidgetProvider 发送每日意图。
*   闹钟必须唤醒设备。

这是我的做法：

在我的 AppWidgetProvider 子类中：

```
@Override
public void onEnabled(Context context) {
    super.onEnabled(context);
    Log.d(LOG_TAG, "Widget Provider enabled.  Starting timer");

    //Setting the Calender object to midnight time.
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 0);
    calendar.add(Calendar.MINUTE, 0);
    calendar.add(Calendar.HOUR, 0);

    //The fired Intent
    Intent intent = new Intent(CLOCK_WIDGET_UPDATE); //custom intent name
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    AlarmManager alarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);  
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
        calendar.getTimeInMillis(), 1000*60*60*24, pendingIntent);
} 
```

虽然我认为我做对了，但这段代码不起作用！

为了测试它，我将 1000*60*60*24 更改为 10000（10 秒），并使用随机数更新了小部件中的 textView。随机数从未改变。

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T00:58:42.543

我终于找到了问题！

看来我也需要设置[`AM_PM`](http://developer.android.com/reference/java/util/Calendar.html#AM_PM)值。当我使用 打印日历时`getTime().toLocaleString()`，它被设置为第二天但 12 小时后（12:00:00 **PM**）。

```
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.set(Calendar.SECOND, 0);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.HOUR, 0);
calendar.set(Calendar.AM_PM, Calendar.AM);
calendar.add(Calendar.DAY_OF_MONTH, 1); 
```

这是[Calender](http://developer.android.com/reference/java/util/Calendar.html)实例的完美设置，它将闹钟设置为第二天的午夜（即最近的午夜）。您只需将其传递给[`setRepeating()`](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)方法。

谢谢@CommonsWare

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:43:58.940

首先，你想要的并不是绝对可能的。Android 不是 RTOS；您可能无法“完全在午夜”获得控制权

其次，您的`Calendar`对象代表过去的时间（除非在您执行该代码时恰好是午夜，在这种情况下它代表现在）。尝试将来的开始时间。

# vb.net - (407) 需要代理身份验证（ISA 服务器需要授权才能完成请求。对 Web 代理过滤器的访问被拒绝。）

> ID：10857684
> 
> 赞同：2
> 
> 时间：2012-06-01T21:38:30.507
> 
> 标签：vb.net, web-services, proxy

当我的应用程序尝试与 Web 服务通信时出现错误

(407) 需要代理身份验证（ISA 服务器需要授权才能完成请求。对 Web 代理过滤器的访问被拒绝。）

我看到了一些主题，但我无法理解。我正在使用 VB.net

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:52:44.483

正如错误所说，您的代理服务器正在阻止访问该服务。您可以编写一些代码来向用户询问代理的凭据，或者（更简单）您可以将以下内容放入您的应用程序 app.config 中：

```
<system.net>
    <defaultProxy useDefaultCredentials="true"/>
<system.net> 
```

如果您有更复杂的要求，还有其他设置。尝试在这里寻求指导

[http://msdn.microsoft.com/en-us/library/09361bca](http://msdn.microsoft.com/en-us/library/09361bca)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:05:22.337

您的 app.config 文件应如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.net>
    <defaultProxy useDefaultCredentials="true" />
  </system.net>
</configuration> 
```

我认为所指的错误`TraceUtility`是不相关的 - 不同的问题。

# clojure - 映射执行副作用的向量

> ID：10857690
> 
> 赞同：16
> 
> 时间：2012-06-01T21:39:02.223
> 
> 标签：clojure

我正在尝试遍历 Clojure 中的“线条”向量。本质上，它看起来像：

```
[{:start {:x 1 :y 3 :z 4}, :end {:x 3 :y 7 :z 0}}, ...] 
```

我想应用一个将这些“行”中的每一个打印到新行上的函数，ala：

```
(map #(println %) vector-of-lines) 
```

但这似乎没有调用该函数。在这种情况下我不应该使用“地图”功能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T22:06:33.670

```
(dorun (map println vector-of-lines)) 
```

`dorun`强制对惰性序列进行评估，但也会丢弃序列中每个项目的单独结果。这非常适合纯粹用于副作用的序列，这正是您想要的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-01T22:33:15.837

`map`很懒惰，除非你要求，否则不会实现结果。如果要对序列中的每个元素执行副作用，并且不关心返回值，请使用`doseq`：

```
;; returns nil, prints each line
(doseq [line vector-of-lines]
  (println line)) 
```

如果您确实关心返回值，请使用`(doall)`：

```
;; returns a sequence of nils, prints each line
(doall (map println vector-of-lines)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T16:54:40.633

添加到贾斯汀的答案中，`doseq`是一个宏，因此带有宏的所有限制。

我会编写一个`foreach`内部使用的函数`doseq`。

```
user=> (defn foreach [f xs] (doseq [x xs] (f x)))
#'user/foreach

user=> (foreach println [11 690 3 45])
11
690
3
45
nil 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-06T15:13:48.013

从 Clojure 1.7 开始，就有`run!`了你想要的。此方法的命名可能与使用`dorun`和的解决方法有关`map`。`map`在这种情况下使用时要小心。假设您`map`在传入的函数内部再次调用。这也需要遍历序列。因此，您将需要使用`dorun`两次。

# android - 在 Android 中组织线程

> ID：10857702
> 
> 赞同：0
> 
> 时间：2012-06-01T21:40:14.833
> 
> 标签：android, multithreading, usb, organization

我的 Android 应用程序需要在我的应用程序的后台通过 USB 串口不断接收，而通过 USB 串口发送信息只发生在某些功能上。当我们发送和接收时，我总是每次发送一个 X 字节的数据包。我了解 Android USB API 的工作原理，我遇到的问题是我将如何组织它？我会使用一个线程只接收，其余的作为函数，还是整个 USB 连接/发送和接收都在一个线程中？主要活动称为“Homescreen.java”，这是我到目前为止的组织方式。

```
public class HomeScreen extends Activity implements OnTouchListener, Runnable{
onCreate() { }
onResume() { }
onStart() { }
onDestroy() { }
run() { }
} 
```

注意：没有 onPause 的原因是因为这个应用程序是一个全屏小部件，永远不应该关闭。

另一个问题：如果我要创建一个线程，我是否必须让它从 Homescreen.java 扩展？上下文呢？我可以只导入吗？（不太热衷于 Context 对象）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:01:25.763

这更多是设计选择，例如，如果您想要一个后台线程来处理来自 USB 的数据

```
public class test extends Activity{
Thread t;
runT= true;

public void onCreate(Bundle b)
{
    ..........
    ..........
    t = new Thread(new Runnable() {
        @Override
        public void run()
        {
            while(runT)
            {
                //call data read or send functions here you can add condtion to sleep the thread as well
            }
        }
    });
    t.start();
}
} 
```

当您结束活动时，只需将 runT 设置为 false，这将停止线程。

您还可以拥有一个线程池并相应地使用 theads。

如果这种情况不经常发生，您可以在每次要发送数据时启动 Asynctask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:13:51.793

您可以查看[AsyncTask](http://www.google.com/url?sa=t&rct=j&q=asynctask&source=web&cd=3&ved=0CF4QFjAC&url=http%3A%2F%2Fwww.vogella.com%2Farticles%2FAndroidPerformance%2Farticle.html&ei=Aj7JT5TOFqOl0QXKmsXnAQ&usg=AFQjCNGd6qc0chhmgaMpbDcei1t8Kl7CGA&cad=rja)。它是 Android 的一个特殊线程实现，应该让事情变得更简单。如果您没有做任何线程化的“繁重工作”，我建议您使用 AsyncTask。您只需在 HomeScreen 类中编写一个内部类，编写您的逻辑并从您的 Activity 中调用它（例如从 onCreate() 中）。

`getBaseContext()`您可以从活动中尝试- 我想这将为您提供相关的上下文。

干杯

# php - 如何延迟代码执行？

> ID：10857709
> 
> 赞同：0
> 
> 时间：2012-06-01T21:40:43.797
> 
> 标签：php, redirect

如何在 php 中延迟执行一段代码？

```
 if ($qry->execute($leads)) {
    echo'<div class="note success">' . 
            $_POST["first_name"] . ', Your entry was successful!
        </div>';

        // Set up email params 
```

此代码显示“成功”消息，然后向用户发送电子邮件。显示消息后，我想重定向用户。

这在PHP中可能吗？我需要使用 JavaScript 吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T21:43:16.630

如果你想延迟 PHP 代码的执行，可以使用[sleep](http://php.net/manual/en/function.sleep.php)函数。但是，您似乎想延迟客户端的重定向。您可以使用 JavaScript、`<meta>`刷新和`Refresh`标题来执行此操作。

使用`Refresh`标题：

```
header('Refresh: «timeout in seconds»; URL=http://example.com/myurl'); 
```

使用`<meta>`刷新：

```
 <meta http-equiv="refresh" content="«timeout in seconds»; URL=http://example.com/myurl"> 
```

使用 JavaScript：

```
setTimeout(function(){
 location.replace("/myurl");
},«timeout in milliseconds»); 
```

最好的办法是结合使用这三者，并为禁用了这些重定向技术的用户显示一条消息，并提供一个允许他们手动点击的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T21:43:56.597

由于输出已经发生，您不能进行 HTTP 标头重定向。相反，您应该设置元刷新来重定向`<head>`HTML 文档中的用户：

```
<meta http-equiv="refresh" content="10;url=http://www.example.com/newpage.php" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T21:44:10.357

PHP 是一种服务器端语言，它在向用户显示任何内容之前执行。

这是在页面呈现后必须发生的事情，所以是的，Javascript 将是一个更好的解决方案。

# cocoa - 插入后的 NSManagedObjectContextObjectsDidChangeNotification

> ID：10857710
> 
> 赞同：1
> 
> 时间：2012-06-01T21:40:44.503
> 
> 标签：cocoa, core-data, nsnotificationcenter

当我像这样添加一个新`NSManagedObject`实例时`NSManagedObjectContext`：

```
NSManagedObject *newObject = [NSEntityDescription insertNewObjectForEntityForName:@"Bla" inManagedObjectContext:self.managedObjectContext];
[newObject setValue:@"New Object" forKey:@"name"]; 
```

我得到**1** `NSManagedObjectContextObjectsDidChangeNotification`和`NSInsertedObjectsKey`作为新值的“名称”值“新对象”。

我希望得到：

*   1 个`InsertedObjectKey`新值为“name”的通知 = nil
*   1 个`UpdatedObjectKey`通知，新值为“名称”=“新对象”

我觉得这是一个功能，但我确定..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T07:35:17.107

托管对象上下文将它们的更改组合在一起。您不会收到每个值更改的通知，而是会在每个“块”更改结束时定期收到通知。

如果您特别希望单独通知每个更改，在上面的代码中，您可以在两者之间调用 -processPendingChanges

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T23:26:31.640

在[NSManagedObjectContext 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)中，它在下面说`insertedObjects`

> 当insertedObjects 的返回值发生变化时，托管对象上下文不会发布键值观察通知——但是，它会在进行更改时发布NSManagedObjectContextObjectsDidChangeNotification 通知，并分别在提交更改之前和之后发布NSManagedObjectContextWillSaveNotification 和NSManagedObjectContextDidSaveNotification 通知。

# macvim - 如何让 MacVim 默认使用 -y 选项启动？

> ID：10857712
> 
> 赞同：0
> 
> 时间：2012-06-01T21:40:54.557
> 
> 标签：macvim

现在我必须去一个终端并输入：“mvim -y &”。即使单击 .app 图标或通过“打开方式...”上下文菜单启动它，我也希望能够在启用 -y 选项的情况下启动 MacVim。
我知道 MacVim.app/Contents/Resources/vim 下的 gvimrc 和 vimrc 文件，所以我只需要有人告诉我在哪个文件中添加什么。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:34:17.633

我相信您应该能够添加`set insertmode`到您的 .vimrc 或 .gvmirc 文件中。

如果您设置它是因为这是您的个人喜好，您可能会考虑将该行添加到主目录中的 .gvim 文件中。修改应用程序自身的配置可能会影响机器上的其他用户。

# sql-server - SQL Server 2008 虚拟机。资源池“内部”中的系统内存不足，无法运行此查询

> ID：10857714
> 
> 赞同：0
> 
> 时间：2012-06-01T21:41:11.320
> 
> 标签：sql-server, sql-server-2008, vmware

资源池“内部”中的系统内存不足，无法运行此查询。SQL Server 2008 SP3 VMWare 虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:44:54.687

您的查询需要太多空间。原因取决于服务器配置和查询。我会首先寻找无意的交叉连接/非等连接。

但是，您的问题太模糊，无法回答。我建议您借此机会提供更多详细信息。

# wcf - 向 WCF 客户端公开接口

> ID：10857715
> 
> 赞同：0
> 
> 时间：2012-06-01T21:41:22.183
> 
> 标签：wcf, interface

我有一个运行良好的 WCF 服务。除了 DataContracts 和 ServiceContracts，我有几个接口，我想将它们提供给客户。有没有办法将它们暴露给客户。这些接口分别没有在 SC 或 DC 的任何方法或属性中使用。我不能通过共享组装方法，并且代理生成（现在）是使用 svcutil.exe 完成的

# git - git 提交在父目录中有路径

> ID：10857716
> 
> 赞同：0
> 
> 时间：2012-06-01T21:41:22.853
> 
> 标签：git

我将一个项目从 svn 移到了 git。我使用 git-filter-branch 和 --index-filter 删除所有不必要的目录，并使用 --prune-empty 选项修剪所有空提交。

重新克隆存储库后，我仍然看到这些奇怪的提交，其路径指向祖先目录。这最好通过 git log --stat 的输出来解释

```
commit 222222b80e791e4ef5b9a027c8b10f64be5e2222
Author: someuser <someuser@somedomain>
Date:   Mon Sep 14 17:52:08 2009

    some commit msg

 hello/.project                                |   11 ++++
 hello/bin/hello.fla                           |  Bin 0 -> 43008 bytes
 .../other/Plugin.as                           |   10 ++++
 .../other/Constants.as                        |    2 +
 hello/Base.as                                 |   52 ++++++++++++++++++++
 .../other/HelloWorld.as                       |   21 ++++++++
 .../target/Hello.swf                          |  Bin 0 -> 1039 bytes
 7 files changed, 96 insertions(+), 0 deletions(-) 
```

这是怎么发生的，我该如何解决？

顺便说一句，该命令在 git 存储库的根目录下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:59:10.173

那些不是父目录。`git`将较长的路径名缩写为，`...`因为它没有空间显示它们（大概）。

从`git log --help`手册页：

```
 --stat[=<width>[,<name-width>[,<count>]]]
       Generate a diffstat. You can override the default output width
       for 80-column terminal by --stat=<width>. The width of the
       filename part can be controlled by giving another width to it
       separated by a comma. By giving a third parameter <count>, you
       can limit the output to the first <count> lines, followed by
       ...  if there are more.

       These parameters can also be set individually with
       --stat-width=<width>, --stat-name-width=<name-width> and
       --stat-count=<count>. 
```

尝试将终端的大小调整为 120 个字符宽，然后执行以下操作：

```
git log --stat=120,80 
```

你应该有足够的空间来查看完整的路径名。

# java - Java Classloader 无法加载模块？

> ID：10857720
> 
> 赞同：2
> 
> 时间：2012-06-01T21:41:57.343
> 
> 标签：java, classloader

我似乎在为我正在开发的应用程序的模块加载器中加载类时遇到问题。基本上，我将要加载的所有类都扩展了另一个类，该类位于实际应用程序的包中。出于我们的目的，我们将其称为模块。模块位于实际应用程序之外的单独文件夹中。

加载器遍历一个文件夹并对任何扩展名为 .class的文件执行*loadFile()方法。*所有类都具有作为 Module 类的包声明，以及类头中的*extends Module*声明。

这是*loadFile()*方法，排除了标头和异常子句：

```
String fileName = file.getName();
String className = fileName.replace(".class", ""); //Strips extension
Class<?> aClass = Class.forName(className, true, new URLClassLoader(new URL[] { file.toURI().toURL() }));
Class<? extends Module> modClass = aClass.asSubclass(Module.class);
return modClass.getConstructor().newInstance(); 
```

我不断在第三行收到*ClassNotFoundException*。除此之外，如果没有抛出*ClassNotFoundException ，所有依赖关系都会得到解决吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:54:24.683

从 URLCLassLoader 的文档中：

> 此类加载器用于从引用 JAR 文件和目录的 URL 的搜索路径加载类和资源。假设任何以“/”结尾的 URL 都指向一个目录。否则，假定 URL 引用将根据需要打开的 JAR 文件。

因此，您必须对目录或 .jar 使用 URL

两种解决方案：

1.  强制您的用户向您提供 .jar 文件，包括某种清单，其中包含他们希望加载的类名。[Bukkit](https://github.com/Bukkit/Bukkit/tree/master/src/main/java/org/bukkit/plugin)开发人员使用这种方法。过去使用过这种方法，依赖项应该都打包在 .jar 文件中，因此在 URLClassLoader 的搜索路径中并能够加载。
2.  使用文件目录的 URL，并在该目录中搜索 .class 文件。我不确定是否会使用此方法加载依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:16:02.030

在 URLClassLoader 中，不传递文件，而是传递父文件夹。但是，如果类都在“默认包”中，这可以正常工作，因此您正在加载的 .class 文件不能在顶部有包声明。

默认情况下，类加载器还将触发加载正确构建类所需的所有类：它将尝试加载超类、超超类等……所有接口和超接口，静态字段所需的类和方法，方法签名所需的类（返回类型和参数）。它通常不会尝试加载方法内部使用的类，直到您执行这些方法。

但是，通常类加载器不会“包含”所有这些类，例如，您的类最终将继承自 java.lang.Object，而您的 URLClassLoader 将不包含 Object.class 文件。因此，类加载器委托给它们的父类加载器。

您当前正在创建一个 URLClassLoader 而不指定父级，在 Java 7 中，至少父级将默认为“系统类加载器”，只要您在普通的 Java 应用程序中，并且不在内部执行代码本身就可以了类加载器的特定层次结构。但是，如果您在 Web 应用程序或 OSGI 容器等中运行该代码。您应该为 URLClassLoader 提供适当的父级以委托给，例如 Thread.currentThread().getContextClassLoader() 或 this.getClass() .getClassLoader()。

我想您需要所有这些，因为您需要在运行时动态加载这些类。

# php - mysql_data_seek 与将数据存储在数组中

> ID：10857722
> 
> 赞同：0
> 
> 时间：2012-06-01T21:42:07.223
> 
> 标签：php, mysql

我已经搜索了几个小时，但没有找到关于这个主题的任何内容。

我正在开发一个网站，该网站依赖于查询来定义必须在页面上加载的元素。但是为了组织数据，我必须重新传递这个查询的结果 4 次。

在第一次尝试时，我开始使用 mysql_data_seek 以便我可以重新传递查询，但我开始失去性能。因此，我尝试交换 mysql_data_seek 以将数据放入数组并运行 foreach 循环。

性能并没有以任何我可以衡量的方式提高，所以我开始想知道实际上哪个是最好的选择。通过多次执行 mysql_fetch_array 构建一个相当大的数据数组。

我的应用程序当前使用 PHP 5.2.17、MySQL 运行，一切都在本地主机中。不幸的是，我有一个繁忙的数据库，但与它的连接数从来没有任何问题。

有没有更好的方法来执行这个任务？除了 mysql_data_seek 或大数组数据之外，还有其他选择吗？有没有人提供一些关于这些选项的基准测试的信息？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:12:27.827

您的问题的答案可能在于索引数据库中的适当字段，大多数数据库也[缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)经常服务的查询，但是一旦它们经过的表被更改，它们往往会丢弃它们。（这是有道理的）

因此，您可以相信您的数据库能够做好它所擅长的事情：查询和检索数据，并通过确保表上几乎没有争用和/或放置适当的[索引](http://dev.mysql.com/doc/refman/5.1/en/optimization-indexes.html)来帮助它。然而，这反过来可以改变写入的性能，这在您的情况下可能并不重要，只有您才能真正判断。（必须计算和保存索引）。

如果速度至关重要，您使用的 PHP 扩展也将发挥作用：“升级”到[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[pdo](http://www.php.net/manual/en/book.pdo.php)并执行 -> [fetch_all](http://www.php.net/manual/en/mysqli-result.fetch-all.php) ()，因为它会减少 php 进程和数据库服务器之间的通信。反对这种情况的唯一原因是，如果您查询的数据量如此之大，以至于它通过强制交换来停止或阻塞您的 php/webserver 进程甚至整个服务器。

您使用的表类型可能很重要，与 INNODB 相比，某些类型的查询似乎在 MISAM 上运行得更快。如果你想重新调整一下，那么你可以将这些数据（或它的副本）存储在 mysql 的[HEAP 引擎](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)中，所以只是在内存中。您需要小心地将其与写入时的磁盘表同步，但如果您想确定保留更改的数据。（以防服务器故障或关闭）

或者，您可以将数据缓存在[memcache](http://www.php.net/manual/en/book.memcache.php)或使用[apc_store 之](http://www.php.net/manual/en/function.apc-store.php)类的东西中，这应该非常快，因为它位于 php 进程内存中。这里最大的警告是，[APC](http://www.php.net/manual/en/book.apc.php)通常可用于存储的内存较少。（默认为[32MB](http://www.php.net/manual/en/apc.configuration.php)） Memcache 的一大优势是虽然速度仍然很快，但它是分布式的，因此如果您有多个服务器运行，它们可以共享这些数据。

您可以尝试使用 nosql 数据库，最好是一个只是密钥库的数据库，甚至不是文档存储，例如[redis](http://redis.io/)。

最后，您可以在 php 脚本中硬编码您的值，确保仍然使用[eaccelerator](https://eaccelerator.net/)或 APC 之类的东西，并验证您是否真的需要使用它们 4 次，或者您是否不能只缓存您实际创建的任何内容的输出用它。

所以很抱歉我不能给你一个现成的答案，但性能问题，如果适用，通常需要多管齐下的方法。:-|

# visual-studio-2010 - 将自定义代码片段添加到 Visual Studio 智能感知

> ID：10857723
> 
> 赞同：2
> 
> 时间：2012-06-01T21:42:26.497
> 
> 标签：visual-studio-2010, code-snippets

有一个[不错的程序](http://snippetdesigner.codeplex.com/)可以让您轻松创建代码片段。我已经设法创建了片段，但如果片段出现在 Visual Studio 的智能感知中，那就太好了。

例如，Visual Studio 已经有几个内置的代码片段，例如用于创建类的构造函数的代码片段：

![在此处输入图像描述](../Images/4804dbde8b00792c1a2c64a414facfaf.png)

请注意，使用它非常简单快捷。

另一方面，当我使用我在第一个链接中提供的程序创建自定义片段时，这些是我必须执行的步骤才能使用它：

![在此处输入图像描述](../Images/7d5076dcef55c2b64116469a56763104.png)

在第 3 步中，我必须选择我创建的片段所在的文件夹，然后在第 4 步中找到它。

如果我可以使用我创建的代码片段就像 Visual Studio 提供的代码片段（如我在第一张图像上显示的构造函数）一样，那就太好了。也许如果我将我刚刚创建的代码片段放在 Visual Studio 存储内置的地方，它就可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:41:13.400

我必须在片段中添加[一个快捷方式。](http://msdn.microsoft.com/en-us/library/w5dewx15.aspx)

添加快捷方式后，它会出现在智能感知上，而无需通过按 ctrl+k 和 ctrl+x 导航到它所在的文件夹

# javascript - 从字符串运行方程

> ID：10857726
> 
> 赞同：2
> 
> 时间：2012-06-01T21:42:51.823
> 
> 标签：javascript, jquery

我正在尝试创建一个简单的在线计算器，可以在 JavaScript 中运行基本计算。

我已经设法创建了接口，以便将数字和运算符存储在表单字段中。

我想做的是将表单字段中的值传递给一个函数，该函数将计算表单字段的总数。

表单字段可以包含从简单`"10 + 10"`到使用括号的更复杂等式的任何内容。使用的运算符是`+`、`-`、`*`和`/`。

是否可以将表单字段的文本（字符串）传递给可以识别运算符并对值执行操作功能的 JavaScript 函数？

文本字段中的可能值是：

`120/4+130/5`

然后该函数应返回 56 作为答案。当我知道这样的值时，我已经在 J​​avaScript 中完成了此操作：

```
function WorkThisOut(a,b,c,d) {

var total = a/b+c/d;

alert (total);
}

WorkThisOut(120,4,130,5);
```

我想做的是将完整的值传递`"120/4+130/5"`给函数，它能够提取数字和运算符来创建总数。

有没有人对如何做到这一点或是否有可能有任何想法？这可能会变得更复杂，我可能需要在括号中传递值`"(120/4)+(130/5)"`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:10:32.690

我可能会因此而受到抨击。但是，不管怎样，一切都过去了。

为此，我可以想到三种解决方案：

1.  实现您自己的解析器、词法分析器并解析出代码。这并不容易，但这可能是一次很棒的学习经历。
2.  在仅用于此目的的子域下运行`eval`，以便脚本无法恶意访问您的站点
3.  清理输入以仅包含`12345678790+-/*().`

* * *

```
 eval(input.replace(/[^0-9\(\)\+\-\*\/\.]/g, "")); 
```

请使用技巧来解决此解决方案

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-28T12:53:13.377

您可以使用 math.js 库中包含的表达式解析器：

[http://mathjs.org](http://mathjs.org)

示例用法：

```
math.eval('1.2 / (2.3 + 0.7)');   // 0.4
math.eval('5.08 cm in inch');     // 2 inch
math.eval('sin(45 deg) ^ 2');     // 0.5
math.eval('9 / 3 + 2i');          // 3 + 2i
math.eval('det([-1, 2; 3, 1])');  // -7 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T22:05:58.350

如果您不允许使用标识符，那么 eval 很难造成很大的损害。

```
function reval(string){
    var answer='';
    if(/^[\d()\/*.+-]+$/.test(str)){
        try{
            answer= eval(str);
        }
        catch(er){
            answer= er.name+', '+er.message;
        }

    }
    return answer;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T22:02:36.727

怎么样`eval`？

考虑`calc`作为文本字段的 id。然后

```
$('#calc').change(function(e){                
    alert(eval($(this).val()));
}) 
```

但请记住在处理之前验证输入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-01T20:38:55.120

这是一个相当古老的话题，但对于有类似问题的新访问者：[string-math](https://www.npmjs.com/package/string-math)包计算 [String] 方程，如上面的示例`120/4+130/5`。它还识别括号。

# c# - winform中的windows计算器

> ID：10857732
> 
> 赞同：-3
> 
> 时间：2012-06-01T21:43:29.217
> 
> 标签：c#, .net, winforms, pinvoke

这些代码会将 windows 计算器设置为 windows 窗体应用程序。但问题是如何在第三行使用 NativeMethods.SetParent。它有特殊的命名空间吗？

```
 System.Diagnostics.Process p = System.Diagnostics.Process.Start("calc.exe");
p.WaitForInputIdle();
NativeMethods.SetParent(p.MainWindowHandle, this.Handle); 
```

请帮我在第三行使用 NativeMethods。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:46:06.173

.NET中没有公共`NativeMethods`类。在`NativeMethods`课堂上打电话被认为是一种很好的做法，所以这可能就是您所看到的。

您需要使用 P/Invoke 来调用 Win32 API 函数。请参阅[本教程](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T21:46:51.337

我想你是想在 WinForm 中“嵌入”计算器？如果是这样，请查看以下 pinvoke 方法：

```
 [DllImport("user32.dll")]
    internal static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent); 
```

[http://www.pinvoke.net/default.aspx/user32.setparent](http://www.pinvoke.net/default.aspx/user32.setparent)

要将计算器窗口嵌入到 WinForm（或其他控件，如 Panel）中，只需传递`Control.Handle`第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:23:33.690

[stakx 发表了评论](https://stackoverflow.com/questions/10857732/windows-calculator-in-the-winform#comment14144589_10857732)：

> 一个明显的起点是研究那行代码的原始来源。你从哪里复制的？你能`NativeMethods.SetParent`在原始来源中找到声明吗？（无需回答，这是对我在这种情况下会做什么的建议。）

这正是您解决此类问题所需的方式。

问题中显示的代码片段实际上是[从这里复制的](https://stackoverflow.com/a/4113795/366904)。不，当您将其复制并粘贴到您的项目中时，它不会编译。它从来没有打算——Stack Overflow 不是一个代码编写服务。我并不是想写一个完整的演示，而是提供一个简短的草图，说明如果您自己编写所需的代码*可能*会是什么样子。

您必须阅读整个答案，而不仅仅是浅灰色背景的部分。我知道我们都是程序员，所以我们常常认为只要看代码就可以理解一切，但这是一个不幸的谎言。我提供了该[函数](http://msdn.microsoft.com/en-us/library/ms633541.aspx)[的 Windows SDK 文档的链接`SetParent`](http://msdn.microsoft.com/en-us/library/ms633541.aspx)；您必须阅读该文档，了解该函数的作用，然后编写 P/Invoke 声明，以便您可以从 C# 代码中调用它。

[Like Kendall says](https://stackoverflow.com/a/10857763/366904), calls to native Win32 functions are placed in a static class called `NativeMethods`, both by convention and by explicit recommendation from .NET design guidelines (enforced by tools such as StyleCop). My sample was following this common practice because I assumed .NET developers interested in Win32 interop would be familiar with this convention and follow it themselves when writing the P/Invoke definition.

[As Nate alludes](https://stackoverflow.com/a/10857764/366904), some people find the website [http://pinvoke.net/](http://pinvoke.net/) to be a useful resource when writing P/Invoke definitions for Win32 functions. And it can often be. But you do have to make sure that you're not just copying and pasting code from there, either. I've seen a surprisingly large number of mistakes in the samples that they provide (and answered more than my fair share of Stack Overflow questions from people whose apps blew up when they used the incorrect code they copied from that website). You need to understand what the code you're using is *doing* and how it is supposed to work. Not only does that ensure you can catch any mistakes that it may contain, but it also keeps you from introducing serious bugs or worse, security holes, into your application.

# asp.net - 使用 NHibernate 获取连接表的行数

> ID：10857736
> 
> 赞同：1
> 
> 时间：2012-06-01T21:43:40.153
> 
> 标签：asp.net, nhibernate, nhibernate-criteria

我有一个由以下 3 个表组成的多对多关系（从简洁中删除了非相关字段），其中一个广告可以分配多个标签，一个标签可以分配给多个广告。

**广告**

```
(PK) Id 
```

**广告标签**

```
(FK) AdvertId
(FK) TagId 
```

**标签**

```
(PK) Id 
```

我想创建一个 NHibernate 查询来计算有多少广告被分配了特定的标签（即特定的 TagId）。

在普通的 sql 中，我会按照以下方式做一些事情：

```
SELECT COUNT(*)
FROM Adverts A
JOIN AdvertsTags AT ON A.Id = AT.AdvertId
WHERE AT.TagId = @tagId 
```

`Advert`my和`Tag`models的属性名称与上表中的字段名称一致。

我不知道使用 NHibernate 的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:57:57.533

也许这样的事情会有所帮助：

```
var count = session
    .CreateCriteria(typeof(Advert))
    .SetProjection(Projections.RowCount())
    .CreateCriteria("Tags")
    .Add(Expression.Eq("TagId", tagId)
    .UniqueResult<long>(); 
```

更多信息：[http ://www.nhforge.org/doc/nh/en/index.html#querycriteria-associations](http://www.nhforge.org/doc/nh/en/index.html#querycriteria-associations)

# jquery - 忽略特定列 tablesorter 上的排序

> ID：10857742
> 
> 赞同：6
> 
> 时间：2012-06-01T21:43:55.677
> 
> 标签：jquery, jquery-ui, jquery-plugins, tablesorter

我可以忽略对 jquery tablesorting 插件中特定列的排序吗？

所以基本上当页面加载时，我不希望在“搜索”列上进行任何排序，因为它包含图像并且自己进行一些 javascript 处理，这大大减慢了我的排序。

这是我的代码：

```
<script type="text/javascript">
jQuery(document).ready(function() { 

    jQuery("table").tablesorter({ 

}); 
```

});

```
 puts "<table cellspacing=\"1px\" class=\"tablesorter\" >"
    puts "<thead>"
    puts "<tr>"
    puts    "<th>Search</th>"
    puts    "<th>Sub-App</th>"
    puts    "<th>Division</th>"
    puts    "<th>Region</th>"
    puts    "<th>Market</th>"
    puts    "<th>Language</th>"
    puts    "<th>Function</th>"
    puts    "<th>LOB</th>"
    puts    "<th>Term</th>"
    puts    "<th>Center</th>"
    puts "</tr>"
    puts "</thead>"
    puts "<tbody>"

    puts "<tr>"
    puts    "<td id=\"$cellID\">"
    puts    "<img src=\"images/magnifier.gif\" style=\"cursor:pointer\" onclick=\"showRouting({'spec':'${specific}', 'id':'${mkt_id}', 'name':'${mkt_name}', 'xfer':'${xfertype}', 'cell':'${cellID}'})\"</img>"
    puts    "</td>"
    puts    "<td>$level</td>"
    puts    "<td>$div_name</td>"
    puts    "<td>$reg_name</td>"
    puts    "<td>$link</td>"
    puts    "<td>$lang</td>"
    puts    "<td>$func</td>"
    puts    "<td>$lob</td>"
    puts    "<td>$term</td>"
    puts    "<td>$ctr_name</td>"
    puts "</tr>"

    puts "</tbody>"
    puts "</table>" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T13:38:52.327

根据[文档](http://mottie.github.com/tablesorter/docs/example-options-headers.html)，您现在可以使用`class="sorter-false"`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T21:54:37.467

没关系。以下回答了我的问题。它不会更快地排序，因为它仍然显示该列上的图像。

```
 headers: {
            0: { sorter: false }

        } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-01T21:55:08.240

将一个`noSort`类添加到`</td>`您不想排序的列的标题，然后添加到以下内容：

```
$(document).ready(function() { 

    // Get Headers with Class noSort //
    var theHeaders = {}
    $(this).find('th.noSort').each(function(i,el){
        theHeaders[$(this).index()] = { sorter: false };
    });

    // Initialize Table Sorter //
    $("table").tablesorter({
         headers: theHeaders
    });
}); 
```

我希望这有帮助！

# c# - 已部署的应用程序找不到其资源 c# Visual Studio 2010

> ID：10857744
> 
> 赞同：2
> 
> 时间：2012-06-01T21:44:06.077
> 
> 标签：c#, visual-studio-2010, deployment, resources, publish

在另一台机器上发布我的应用程序时，我遇到了一个大问题。作为图片和声音的应用程序资源在你实际安装在我真的不知道在哪里的任何地方都找不到。我说的是 oneClick 部署！我已将文件放在解决方案资源管理器的 Resource 文件夹中的单独文件夹中，路径是 Settings 中的字符串路径，如下所示 ....\Resources\Images\Cards\ 和 ....\Resources\Sounds\ 不管我程序找不到它的资源那么这里的基本问题是什么？我相信路径有问题，因为我看到安装程序时它会安装所有内容（相同数量的 MB）。有人有什么建议吗？C# Visual Studio 2010 黑杰克游戏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:04:01.653

我遇到了同样的问题，您可以执行以下操作：

1.  打开 .resx 文件
2.  在文件上方，有一个访问修饰符列表框。如果设置为“无代码生成”，请从列表中选择公开

建造，

希望问题解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:54:07.863

好吧，经过一段时间的努力，我找到了这个问题的答案..您必须在即将发布时删除“设置”中资源文件夹之前的“..\..\”，否则部署的应用程序将无法找到它的资源，因此它们不会与描述的文件夹位于同一文件夹中。但是请记住，如果您想继续处理您的项目，您必须放回“..\..\”来调试程序，否则调试将无法正常工作！！！由于我还没有获得“10”名声，所以我不被允许在这里发布图像给你看。.. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T15:15:40.723

我有同样的问题，我认为应该是这样，有两条不同的路径。这就是我所做的，因此在从调试到生产时，我不再需要编辑文件路径。

```
Public RP As String = IO.Path.GetFullPath(My.Resources.ResourceManager.BaseName)
Public filePath As String = RunOrInstall(RP)

'Checks to see if debugging or installed and returns correct path
Private Function RunOrInstall(RP)

    Dim pathing As String

    If RP.ToString().IndexOf("bin") = -1 Then
       pathing = RP.Substring(0, RP.LastIndexOf("\")) & "\Resources\"
    Else
        pathing = RP.Substring(0, RP.LastIndexOf("bin")) & "Resources\"
    End If

    Return pathing

End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T18:37:13.363

在 Visual Studio 2010 专业版中打开您的项目打开项目属性选择 Web Under Servers 将 Virtual Path 设置为您部署的网站虚拟路径。

如果将虚拟路径设置为 /BookStore 则需要更新所有资源引用

如下所示

src="../../img/picture.png"

至

src="/BookStore/./img/picture.png"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T21:52:40.177

如果我正确理解了这个问题，我相信我遇到了类似的问题......

我正在为我的一个 c# 应用程序创建一个安装程序，每当我安装该程序时，它都找不到运行所需的任何资源。

问题最终是安装程序放在桌面和程序菜单中的文件未设置为“快捷方式”。尝试将“类型”设置为“快捷方式”（我使用的是 microsoft Visual Studio 2008，它需要右键单击 -> 创建新快捷方式 -> 选择文件以创建快捷方式...对于任何 IDE 都可能不同你正在使用）

编辑-我刚刚注意到您将 vs 2010 放在标签中，因此该过程应该非常相似

# php - 复制具有特定日期的数据库

> ID：10857748
> 
> 赞同：0
> 
> 时间：2012-06-01T21:44:42.120
> 
> 标签：php, mysql

使用特定日期将数据库从一个复制到另一个的最佳方法是什么？
这是流程，用户对我的程序（PHP 语言）执行一些操作，然后获取一些文件。然后他需要在其他程序上上传该文件，以便复制数据库。

将被复制的只是没有结构的数据，因为结构总是相同的。

这里的例子是数据的结构

源表调用`old`

```
id | date       | value_1   | value_2   | value 3
1  | 2012-06-02 | some_data | some_data | some_data
2  | 2012-06-03 | some_data | some_data | some_data
3  | 2012-06-03 | some_data | some_data | some_data 
```

然后用户只想下载数据以将`2012-06-03`其移动到名为 的新表中`new`。遗嘱中的结果`new`是：

```
id | date       | value_1   | value_2   | value 3
2  | 2012-06-03 | some_data | some_data | some_data
3  | 2012-06-03 | some_data | some_data | some_data 
```

笔记：

```
[*]The program will be need smart enough to understand, if the `id` already in the `new` database then do `update` if not do `insert`.
[*]The table is located on different database. e.g: `db_source.old` copied to `db_target.new` 
```

这样做的最佳逻辑是什么？或者也许已经有一些类来处理这种任务？

* * *

*请理解这不是大学任务，而是我想添加到我的程序中的真实项目实施。我在这里问不是`get the code`问题。请给我一些线索，然后我会很乐意研究它*

* * *

已经制作了一些输出数据的脚本。

一些执行收集数据脚本的片段

```
/**
 * Get all database data and output it in array format
 * @return array
 */
function output(){
    $return = array();
    foreach($this->getAllTableName() as $table_name){
        $this->load->model($table_name.'_model');
        $class_name = $table_name.'_model';
        $model = new $class_name;

        $return[$table_name] = array();
        $this->db->where('created >=', $this->date_start);
        $this->db->where('created <=', $this->date_end);            
        foreach((array)$model->get() as $object){               
            $return[$table_name][$object->id] = $this->wrap_value($object);
        }           
    }

    return $return;
} 
```

输出：

![在此处输入图像描述](../Images/e3066a190a327772a175db129b1eaca3.png)

但是还是混淆了SQL文件会被写入来了解哪些数据需要`update`和`insert`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:10:55.000

执行一个接受 id 号（可能在数组或其他东西中）并移动数据的存储过程。表名是硬编码的吗？数据库是硬编码的吗？您始终可以为每个表编写一个存储过程，并执行逻辑来选择 php.ini 中的哪个过程。如果数据库没有硬编码，您总是可以将 in 作为参数。

不确定确切的编码，但这样的事情怎么样：

将@ids 作为“id1、id2、id3 ...”或数组传递。将它们与[in](http://forums.mysql.com/read.php?10,217174)子句一起使用。也使用[重复插入](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
INSERT INTO new.table (id,date,value_1, value_2, value_3) 
  select id, date, value_1, value_2, value_3 
    from old.table 
    where id in (@ids)
  ON DUPLICATE KEY UPDATE c=3; 
```

您只需要用更新替换 c=3 即可。[这是从此处](http://forums.mysql.com/read.php?97,57357,57361#msg-57361)加入的更新示例

```
UPDATE FROM tblTransaction AS t 
LEFT JOIN tblEmployee as e 
ON e.emp_id = t.emp_id 
SET t.emp_block = e.emp_block 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:24:08.040

您还可以使用选择响应创建表：

```
create table newtbl select * from oldtbl where date='2012-06-03'; 
```

新表将继承原始表的字段定义。

# algorithm - 将列表分成两等份算法

> ID：10857755
> 
> 赞同：1
> 
> 时间：2012-06-01T21:45:13.430
> 
> 标签：algorithm, np-complete, computation-theory, partition-problem, data-partitioning

> *相关问题：*
> 
> *   [将数字列表划分为2个相等总和列表的算法](https://stackoverflow.com/questions/890171/algorithm-to-divide-a-list-of-numbers-into-2-equal-sum-lists)
> *   [将列表分成两部分，它们的总和彼此最接近](https://stackoverflow.com/questions/4479479/divide-list-in-two-parts-that-their-sum-closest-to-each-other)

假设我有一个列表，其中包含确切的`2k`元素。现在，我愿意将它分成两部分，其中每个部分的长度为 ，`k`同时试图使各部分的**总和尽可能相等。**

*快速示例：* `[3, 4, 4, 1, 2, 1]`可能会拆分为`[1, 4, 3] and [1, 2, 4]`，总和差将是`1`

现在 - 如果部分可以有任意长度，这是[**分区问题**](http://en.wikipedia.org/wiki/Partition_problem)的变体，我们知道这是弱`NP-Complete.`

> 但是关于将列表**分成相等部分**的限制（假设它总是`k`and `2k`）是否使这个问题可以在多项式时间内解决？任何证明（或证明它仍然存在的证明方案`NP`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:55:02.233

它仍然是`NP`完整的。`PP`通过将（分区问题的完整变体）简化为`QPP`（等份分区问题）来证明：

取一个任意长度的列表`k`加上所有值为零的附加`k`元素。

我们需要找到性能最好的分区`PP`。让我们使用算法找到一个`QPP`并忘记所有额外的`k`零元素。四处移动零不会影响此分区或任何竞争分区，因此这仍然是任意长度列表中性能最佳的无限制分区之一`k`。

# active-directory - 禁用计算机登录，同时仍允许对 AD 进行 Web 身份验证

> ID：10857760
> 
> 赞同：2
> 
> 时间：2012-06-01T21:45:46.763
> 
> 标签：active-directory

我想知道是否仍然可以允许 Web 应用程序进行身份验证（使用指向 AD 的 Windows 窗体进行 ASP.Net 身份验证），同时禁止帐户登录校园终端计算机上的物理计算机。

谢谢你。-德文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:28:42.703

我建议使用 userWorkstations 属性。将他们的帐户设置为一些不存在或良性的工作站。我自己没有对此进行测试，因此您可能会发现您需要指定一些 IIS 服务器（否则该帐户也将被锁定）。

希望这可以帮助。

[http://blogs.technet.com/b/heyscriptingguy/archive/2006/02/17/how-can-i-specify-the-computers-a-user-can-use-to-log-on-to-域.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2006/02/17/how-can-i-specify-the-computers-a-user-can-use-to-log-on-to-the-domain.aspx)

# php - 没有周末的php时间段

> ID：10857762
> 
> 赞同：3
> 
> 时间：2012-06-01T21:46:04.787
> 
> 标签：php, date

给定一天的日期和天数（X），我需要在 X 天后检索日期，而不考虑周六或周日。

例如：

```
date1= Y-m-d   -where->   Monday of the week #20
date1+2 days=  Wednesday of the week #20

date2= Friday of the week #22
date2+1 day= Monday of week #23 
```

是否有一些内置功能可以帮助完成该任务？还是我必须实施它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T21:54:10.827

这似乎有效（[演示](http://codepad.org/6TPddPLU)）：

```
$date = strtotime('2012-06-01'); // Friday

echo date('Y-m-d (l)', strtotime('+1 weekdays', $date)); // 2012-06-04 (Monday)
echo date('Y-m-d (l)', strtotime('+6 weekdays', $date)); // 2012-06-11 (Monday)
echo date('Y-m-d (l)', strtotime('+8 weekdays', $date)); // 2012-06-13 (Wednesday)
echo date('Y-m-d (l)', strtotime('+9 weekdays', $date)); // 2012-06-14 (Thursday)
echo date('Y-m-d (l)', strtotime('+10 weekdays', $date)); // 2012-06-17 (Sunday) 
```

对不起，但我不知道最后一个有什么问题；也许其他人可以对此有所了解。

# ruby-on-rails - 如何使用模型关联定义 CanCan 能力

> ID：10857768
> 
> 赞同：0
> 
> 时间：2012-06-01T21:47:23.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 CanCan 在我的应用程序中定义能力。

问题是如何通过关联来定义属于用户的模型的能力。

例如，这是有效的，因为 Campaign 有一个`affiliate_id`字段

```
can :manage, Campaign, :affiliate_id => affiliate.id 
```

但是，`Affiliates`拥有`Subscriptions`并`Messages`通过`Keywords`. `Keywords`属于一个`Campaign`。

所有协会工作正常。但是，我不确定如何仅限制`Subscriptions`和`Messages`限制`current_user`.

这些是我目前的联想

```
# affiliate.rb
has_many :keywords, :through => :campaigns  
has_many :campaigns

# campaign.rb
belongs_to :affiliate
has_many :keywords
has_many :subscriptions, :through => :keywords
has_many :messages, :through => :subscriptions

# keyword.rb
has_many :subscriptions
has_many :messages
belongs_to :campaign

# message.rb
belongs_to :user
belongs_to :campaign
belongs_to :subscription
belongs_to :keyword

# subscription.rb
belongs_to :campaign
belongs_to :affiliate
belongs_to :keyword
has_many :messages 
```

另外，（奖励问题），如果用户是管理员，我如何显示所有对象？我有类似的东西，但它没有检索所有对象。

```
if affiliate.status == "admin"
  can :manage, :all
end 
```

# sas - 如何通过提取现有数值变量的部分值在 SAS 中创建新变量？

> ID：10857769
> 
> 赞同：3
> 
> 时间：2012-06-01T21:47:25.500
> 
> 标签：sas

我在 SAS 中有两个要合并的数据集，但它们没有公共变量。一个数据集有一个“subject_id”变量，而另一个有一个“mom_subject_id”变量。这两个变量都是 9 位代码，代码中间只有 3 位具有共同含义，这就是我在合并它们时需要匹配两个数据集的内容。

我想做的是在每个数据集中创建一个新的公共变量，它只是主题 ID 中的 3 位数字。这 3 位数字将始终位于 9 位主题 ID 中的同一位置，所以我想知道是否有办法从变量中提取这 3 位数字以创建一个新变量。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:19:16.187

SQL（使用数据步骤代码中的示例数据）：

```
proc sql;
 create table want2 as  
 select a.subject_id, a.other, b.mom_subject_id, b.misc
 from have1 a JOIN have2 b 
  on(substr(a.subject_id,4,3)=substr(b.mom_subject_id,4,3));
quit; 
```

数据步骤：

```
 data have1;
  length subject_id $9;
  input subject_id $ other $;
  datalines;
   abc001def other1
   abc002def other2
   abc003def other3
   abc004def other4
   abc005def other5
  ;

 data have2;
  length mom_subject_id $9;
  input mom_subject_id $ misc $;
  datalines;
   ghi001jkl misc1
   ghi003jkl misc3
   ghi005jkl misc5
  ;

 data have1;
  length id $3;
  set have1;
  id=substr(subject_id,4,3);
 run;

 data have2;
  length id $3;
  set have2;
  id=substr(mom_subject_id,4,3);
 run;

 Proc sort data=have1;
  by id;
 run;

 Proc sort data=have2;
  by id;
 run;

 data work.want;
  merge have1(in=a) have2(in=b);
  by id;
 run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:31:55.403

另一种方法是使用

```
 proc sql 
```

然后使用*连接*和*substr()* 就像上面解释的那样，如果你对 sql 感到满意的话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T12:59:43.867

假设您的“subject_id”变量是一个数字，那么该`substr`函数将无法工作，因为 sas 会尝试将数字转换为字符串。但默认情况下，它会在数字左侧填充一些步数。

您可以使用模数函数，该函数`mod(input, base)`在输入除以基数时返回余数。

```
/*First get rid of the last 3 digits*/
temp_var = floor( subject_id / 1000);
/* then get the next three digits that we want*/
id = mod(temp_var ,1000); 
```

或者在一行中：

```
id = mod(floor(subject_id / 1000), 1000); 
```

然后您可以继续按 id 对新数据集进行排序，然后合并。

# c# - 如何将滑块值转换为文本框

> ID：10857770
> 
> 赞同：0
> 
> 时间：2012-06-01T21:47:27.923
> 
> 标签：c#

我是 C# 新手，我想将滑块的值转换为文本框。我发现的一个选项是为文本框设置绑定，但我需要在事件中发送值。我尝试了一些解决方案，但没有奏效。

```
private void sliderName_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        Slider sliderName = sender as Slider;
        TextBox textBoxName = new TextBox();

        textBoxName.Text = sliderName.Value.ToString();

    } 
```

感谢您的帮助并耐心等待我。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:53:32.137

您正在创建一个新的`TextBox`，但没有将其定位在任何地方。

您应该`TextBox`已经在您的表单上，并在 IDE 中以您在设计时给它的名称引用它。例如，如果您只是将 a`TextBox`放在表单上，​​IDE 会给它一个类似 的名称`textBox1`，然后您就可以使用该名称：

```
private void sliderName_ValueChanged(object sender, 
   RoutedPropertyChangedEventArgs<double> e)
{
    // Don't use the same name used on the form if you're
    // declaring a variable here. Use a name that's local to
    // this event.
    Slider slide = sender as Slider;

    // Use the IDE-set name here.
    difficultyBox.Text = slide.Value.ToString();

} 
```

根据以下评论更新以反映名称更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:56:29.000

或者更快的方法：

```
private void sliderName_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
 textBox1.Text = ((Slider)sender).value.ToString();
} 
```

这篇文章和 Ken 的文章之间的唯一区别是，我在设置 textBox1 的 text 属性时将发件人转换为滑块。

只是向您展示不同的选择和做同一件事的不同方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:53:13.953

您的方法可能会奏效，只是您要声明此事件处理程序的本地新 TextBox，因此您永远不会在屏幕上看到任何内容。

尝试在表单中设置 TextBox 的 .Text 属性；

```
private void sliderName_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    Slider sliderName = sender as Slider;
    difficultyBox.Text = sliderName.Value.ToString();
} 
```

# c - 尝试保持主循环繁忙时的段错误

> ID：10857773
> 
> 赞同：6
> 
> 时间：2012-06-01T21:47:46.013
> 
> 标签：c, gtk

为了测试我对 Gtk 其他位的理解，我想编写一个程序，该程序始终准备好一个事件供主循环使用。我写了这个简短的程序来尝试这样做：

```
#include <gtk/gtk.h>

static void toggle(GtkWidget *check, gpointer data)
{
    gboolean checked;
    g_object_get(check, "active", &checked, NULL);
    g_object_set(check, "active", !checked, NULL);
}

int main(int argc, char *argv[])
{
    GtkWidget *window, *check;
    gtk_init(&argc, &argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    check  = gtk_check_button_new();
    g_signal_connect(check, "toggled", G_CALLBACK(toggle), NULL);
    gtk_container_add(GTK_CONTAINER(window), check);
    gtk_widget_show_all(window);
    gtk_main();
} 
```

当我运行这个程序并单击复选框时，它会出现段错误。是什么赋予了？保持主循环忙碌的正确方法是什么？

（旁注：它在段错误之前可靠地切换了 2048 次——一个可疑的整数。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:01:46.583

在您的`toggle`处理程序中，您正在设置`checked`，这会导致发出`toggle`信号，从而重新调用处理程序...

```
#11564 0xb775ba50 in g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#11565 0xb776e5d0 in ?? () from /usr/lib/libgobject-2.0.so.0
#11566 0xb77774d6 in g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#11567 0xb7777682 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#11568 0xb7e067ba in gtk_toggle_button_toggled () 
```

我没有一直跟随，但我可以看到> 11000帧将如何导致段错误。

回答你的另一个问题：我认为保持主循环完整的方法是`g_idle_add()`打电话：

```
#include <gtk/gtk.h>

static void toggle(GtkWidget *check, gpointer data)
{
  g_print(".");
}

GtkWidget *window, *check;

static gboolean
toggle_it()
{
  gboolean checked;
  g_object_get(check, "active", &checked, NULL);
  g_object_set(check, "active", !checked, NULL);
  return TRUE;
}

int main(int argc, char *argv[])
{
    gtk_init(&argc, &argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    check  = gtk_check_button_new();
    g_signal_connect(check, "toggled", G_CALLBACK(toggle), NULL);
    gtk_container_add(GTK_CONTAINER(window), check);
    gtk_widget_show_all(window);
    g_idle_add((GSourceFunc)toggle_it, NULL);
    gtk_main();
} 
```

# google-closure-compiler - Google 闭包变量 window/event/console/... 是未声明的错误

> ID：10857775
> 
> 赞同：4
> 
> 时间：2012-06-01T21:48:01.500
> 
> 标签：google-closure-compiler, google-closure, google-closure-library

我正在尝试使用 Google Closure 编译我的 HTML5 项目之一。我收到了几个我不知道如何解决的错误。实际上，这是相同的错误，但对于不同的变量。

这里的错误消息：

变量窗口未声明变量事件未声明变量控制台未声明变量音频未声明

这些变量是 Javascript 内置变量。如果我直接在命令行中编译同一个项目，它就可以工作。但是，就我而言，我需要使用 ant 文件（构建过程）来编译这个项目。我的 ant 构建脚本使用的 jar 文件与我在命令行中使用的相同。使用选项 warnings="verbose"，它不起作用。如果我删除它，它会起作用。如果我想使用选项警告-“详细”，我必须做什么？请解释我的区别。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T06:43:39.907

选项 --warnings=verbose 将编译器设置为“忍者模式”；即文件中的每个变量都应该正确声明（带注释！）。例如，**window**变量对编译器来说是未知的，但是 Closure 有一个 window 的实现（独立于所使用的平台）。如果您的变量包含在其他文件中，请使用[externs](https://developers.google.com/closure/compiler/docs/api-tutorial3#externs)。如果您仍然想使用详细模式而没有“未声明的变量”错误，请使用标志**--jscomp_off=checkVars**

# c# - 可以订购动态类型吗？

> ID：10857776
> 
> 赞同：1
> 
> 时间：2012-06-01T21:48:39.500
> 
> 标签：c#, .net

假设我有以下代码：

```
dynamic myData = GetMyData();
foreach(dynamic d in myData.data)
{
   Console.WriteLine(d.name);
} 
```

我怎么能按字母顺序写出所有的名字？如果我使用类似`List<MyClass>`我会使用的东西`myData.OrderBy(t => t.name)`，但是当我使用动态类型时这似乎不起作用。

关于如何订购这些值的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T21:52:38.073

```
Enumerable.OrderBy(myData, (Func<dynamic, dynamic>)(t => t.name)); 
```

`myData.OrderBy(t => t.name)`这应该与通常返回的结果相同。

由于`OrderBy`是一种扩展方法，因此它不适用于动态类型。看到[这个答案](https://stackoverflow.com/a/5311527/785745)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T21:51:03.987

这可能对您有用：

```
IEnumerable<dynamic> sequence = Enumerable.Cast<dynamic>(myData);
foreach (var result in sequence.OrderBy(x => x.name))
{
    Console.WriteLine(result.name);
} 
```

基本上在调用`Cast<dynamic>`和转换为`IEnumerable<dynamic>`之后，您可以将您喜欢的作为一个序列而不是单个值。

并不是说我实际上已经*尝试*过上述方法，但我相信它应该可以工作。

# c# - 将数据与图表的点绑定

> ID：10857777
> 
> 赞同：1
> 
> 时间：2012-06-01T21:48:47.943
> 
> 标签：c#, asp.net, .net, charts

我正在使用 coulmn 图表，我想在其中将表的 coulmn 与系列的
点绑定。我知道 points.databind() 方法。但是它将什么类型的对象作为第一个参数？？？

**.aspx 代码：**

```
<asp:Chart ID="Chart1" runat="server">
    <Series>
        <asp:Series Name="Series1">                
            </Points>
        </asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart> 
```

**代码背后：**

```
protected void Page_Load(object sender, EventArgs e)
{
    assessdal d=new assessdal();
    Chart1.DataSource = d.showop1();
    Chart1.DataBind();

    Chart1.Series[0].Points.DataBind(?,"qno");
}

public DataSet showop1()
{
    SqlConnection con = dbconnect.GetConnection();
    SqlCommand cmd = new SqlCommand("select assessid, qno ,description, 

    option1,option2,option3,option4 from assessmenttest", con);
    SqlDataAdapter ad =new SqlDataAdapter(cmd);
    DataSet ds=new DataSet();
    ad.Fill(ds);
    return ds;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T07:15:45.197

如果我是对的，在那个例子中（你从上面的代码那里）他们使用 datareader 来绑定图表。

你正在使用数据集进行绑定。

执行以下操作...如果您要绑定更多行。（超过1个系列）

```
 for each (DataRow row in dssearchgrid.Tables[0].Rows)
    {
        string seriesName = row["sno"].ToString();
        Chart1.Series.Add(seriesName);
        Chart1.Series[seriesName].ChartType = SeriesChartType.Line;
        Chart1.Series[seriesName].BorderWidth = 2;

 for (int colIndex = 1; colIndex < dssearchgrid.Tables[0].Columns.Count; colIndex++)
        {
            // For each column (column 1 and onward) add the value as a point
            string columnName = dssearchgrid.Tables[0].Columns[colIndex].ColumnName;
            if (row[columnName] != "")
            {
                YVal = Convert.ToInt32(row[columnName]);
            }
            else
            {
                YVal = 0;
            }

            Chart1.Series[seriesName].Points.AddXY(columnName, YVal);
        } 
```

我知道这不是正确的方法......但这就是我所知道的:-)

# java - 如何从网页中提取源 html？

> ID：10857780
> 
> 赞同：1
> 
> 时间：2012-06-01T21:49:00.297
> 
> 标签：java, python, html-parsing, jsoup

我正在尝试提取此页面的 html 源，[http://www.fxstreet.com/rates-charts/currency-rates/](http://www.fxstreet.com/rates-charts/currency-rates/)

我想要将 chrome 中的页面保存为 .html 文件时看到的内容。

我尝试在 java 中执行此操作，使用 bufferedreader，然后使用 jsoup。我也尝试在 python 中执行此操作，但是我不断收到以下消息：

“此站点需要启用 JavaScript 和 Cookie。请更改您的浏览器设置或升级您的浏览器。”

最终目标是提取主表中的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:51:22.467

尝试使用[HtmlUnit](http://htmlunit.sourceforge.net/)并设置`setJavascriptEnabled(true)`

也看看：[这个](https://stackoverflow.com/a/7344305/639753)和[这个](http://groups.google.com/group/jsoup/browse_thread/thread/7ed13271e05d52bd?pli=1)

JSoup 不是执行 Javascript 的无头浏览器，因此您必须选择其他库来获取页面，然后您才能使用 JSoup 对其进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:56:57.243

只需使用 Jsoup 即可轻松提取主表

这是一种从页面上的主表中获取所有内容的方法

```
public void parse(){
        try{

        Document doc = Jsoup.connect("http://www.fxstreet.com/rates-charts/currency-rates/").get();
        Element content = doc.getElementById("ddlPairsChoose");
        Elements table = doc.getElementsByClass("applet-content");      

        System.out.print(table);

        }

        catch(Exception e){

            System.out.print("error --> " + e);
        }       
    } 
```

它在页面上打印出表格

# c# - 如何使用 ebay api 请求产品？

> ID：10857790
> 
> 赞同：4
> 
> 时间：2012-06-01T21:50:22.153
> 
> 标签：c#, ebay-api

如何调用 eBay 并请求它返回搜索结果数组？

到目前为止，这是我想出的：

```
string endpoint = "https://api.ebay.com/wsapi";
string siteId = "0";
string appId = "*";     // use your app ID
string devId = "*";     // use your dev ID
string certId = "*";   // use your cert ID
string version = "405";

string requestURL = endpoint
+ "?callname=FindProducts"
+ "&siteid=" + siteId
+ "&appid=" + appId
+ "&version=" + version
+ "&routing=default"
+ "&AvailableItemsOnly=true"
+ "&QueryKeywords=nvidia"
+ "&itemFilter(0).name=ListingType"
+ "&itemFilter(0).value(0)=FixedPrice"
+ "&itemFilter(0).value(1)=Auction"
+ "&CategoryID=27386"; 
```

如何将其包装到请求中并以某种数据结构获得响应？我已经获得了 SDK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:34:53.300

我需要使用 eBay 查找 API；

```
 public GetItemCall getItemDataFromEbay(String itemId)
    {
        ApiContext oContext = new ApiContext();
        oContext.ApiCredential.ApiAccount.Developer = ""; // use your dev ID
        oContext.ApiCredential.ApiAccount.Application = ""; // use your app ID
        oContext.ApiCredential.ApiAccount.Certificate = ""; // use your cert ID
        oContext.ApiCredential.eBayToken = "";            //set the AuthToken

        //set the endpoint (sandbox) use https://api.ebay.com/wsapi for production
        oContext.SoapApiServerUrl = "https://api.ebay.com/wsapi";

        //set the Site of the Context
        oContext.Site = eBay.Service.Core.Soap.SiteCodeType.US;

        //the WSDL Version used for this SDK build
        oContext.Version = "735";

        //very important, let's setup the logging
        ApiLogManager oLogManager = new ApiLogManager();
        oLogManager.ApiLoggerList.Add(new eBay.Service.Util.FileLogger("GetItem.log", true, true, true));
        oLogManager.EnableLogging = true;
        oContext.ApiLogManager = oLogManager;

        GetItemCall oGetItemCall = new GetItemCall(oContext);

        //' set the Version used in the call
        oGetItemCall.Version = oContext.Version;

        //' set the Site of the call
        oGetItemCall.Site = oContext.Site;

        //' enable the compression feature
        oGetItemCall.EnableCompression = true;
        oGetItemCall.DetailLevelList.Add(eBay.Service.Core.Soap.DetailLevelCodeType.ReturnAll);
        oGetItemCall.ItemID = itemId;
        try
        {
            oGetItemCall.GetItem(oGetItemCall.ItemID);
        }
        catch (Exception E)
        {
            Console.Write(E.ToString());
            oGetItemCall.GetItem(itemId);
        }
        GC.Collect();
        return oGetItemCall;
    } 
```

# eclipse - Eclipse 在 ubuntu vm 中更新空白

> ID：10857794
> 
> 赞同：0
> 
> 时间：2012-06-01T21:50:40.477
> 
> 标签：eclipse, ubuntu, swt, virtualbox

我在 Ubuntu VM 中运行 Eclipse，当我转到帮助 -> 安装新软件时，显示更新的框对于任何更新站点都是空白的。看起来这可能是 VirtualBox 显示驱动程序的 SWT 渲染问题，但我不确定。有没有其他人看过这个？

*   虚拟盒子 4.1.16
*   Ubuntu 12.04 32 位
    *   内核 3.2.0-24
*   Virtual Box 来宾添加 4.1.16
*   日食 3.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:11:36.390

事实证明，工作区 .metadata 文件夹中的配置文件之一已损坏。

# javascript - 如何找到列表项的索引（ul-li）？

> ID：10857795
> 
> 赞同：0
> 
> 时间：2012-06-01T21:50:45.797
> 
> 标签：javascript, jquery, html, jquery-selectors

我有一个 jQuery 对象，它是一个 HTML li 元素。如何在其父 ul 的上下文中找到它的索引？

所以如果我有这个：

```
<ul>
<li>abc</li>
<li id="test">def</li>
<li>hij</li>
</ul> 
```

而这个对象：

```
$("test") 
```

有没有办法获取这个元素的索引号。在这种情况下，它将为 1（如果您将 0 视为第一个索引）。我可以用 $("test").parent() 做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:52:47.073

您可以简单地使用`$("#test").index()`. 注意 id 选择器的使用`#`。

当[`.index()`](http://api.jquery.com/index/)不带任何参数调用时，

> 返回值是一个整数，表示 jQuery 对象中第一个元素相对于其兄弟元素的位置。

在这种情况下，这将是 1 -[看到它在行动](http://jsfiddle.net/zm9tc/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:52:56.010

.index() 是你要找的。根据其兄弟姐妹进行评估，请参阅[jQuery](http://api.jquery.com/index/)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:53:03.483

您可以使用`index()`：

```
var index = $('#test').index(); 
```

或者，您可以提供一个选择器，以从一组不同的匹配元素中获取索引：

```
var index = $('#test').index('li.className'); 
```

它将`#test`从那些元素中获取元素的索引点`.className`（假设`#test`也有这个类）。

参考：

*   [`index()`](http://api.jquery.com/index/).

# mysql - MySQL 计数与加入和组

> ID：10857798
> 
> 赞同：1
> 
> 时间：2012-06-01T21:51:00.773
> 
> 标签：mysql, join, count, group-by

我一直在为一个查询苦苦挣扎几个小时，但就是无法正确处理。两张表，一张用于学生，另一张包含每个学生注册的所有课程。我需要一个结果集，每个学生有一行，加上学生注册的课程数。这是我迄今为止最接近的尝试：

```
SELECT 
count(*), student.*
FROM student 
LEFT JOIN schedule
ON student.id = schedule.studentid
GROUP BY schedule.studentid 
```

我使用 LEFT JOIN 是因为结果必须包括尚未注册任何课程的学生。这些表由学生 ID 连接，这也是我对它们进行分组的方式。

当前的演绎似乎（大部分）有效，但它不会在没有任何课程的情况下返回学生。

我被困在这里，正在寻找任何可以让我快速摆脱困境的人。感谢您提供的任何牵引力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:01:21.700

你真的很亲密:-)

```
SELECT 
    student.*, count(*)
FROM student 
    LEFT JOIN schedule ON student.id = schedule.studentid
GROUP BY student.* 
```

应该可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:54:38.457

据我了解，子查询如何：

```
SELECT 
     *, (select count(sch.id) from schedule as sch where sch.studentid = stu.id) as ClassNum
FROM student as stu 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:55:38.020

```
SELECT *, (SELECT COUNT(*) `count` FROM schedule s where s.studentid=student.id) `count` FROM student 
```

# javascript - javascript 在输入被填充时显示隐藏元素

> ID：10857801
> 
> 赞同：0
> 
> 时间：2012-06-01T21:51:11.390
> 
> 标签：javascript, show-hide

嘿，我想在用户填写输入时显示一个表格。

我所拥有的是：

在`<head>`部分：

```
<script type="text/javascript">

//hide initially    
$("table#mytable").hide();

// show function
function showit() {
$("table#mytable").show();
}
</script> 
```

和表格：

```
<table id="mytable"><tr><td>FOO</td><td>BAR</td></tr></table> 
```

和下面的表格（也许很重要）表格：

```
<form action="foobar.php">
<input name="example" onselect="showit()" />
<input type="submit" value="Send" />
</form> 
```

我认为 onselect 并不完美，但它应该在我的情况下做这件事。

上面的代码根本没有隐藏表格。我不知道我做错了什么。希望 some1 能找到错误 - 谢谢。

编辑

这是解决方案：

`head`：

```
<script type="text/javascript">
function show(id) {
    document.getElementById(id).style.display = 'block';
}
</script> 
```

并在每个要隐藏的元素中添加`style="display: none;"`和编辑输入 - 添加`onkeyup="show('id')`其中 id 是要隐藏的元素的 id，例如`#mytable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:55:24.917

它不起作用的原因是因为您在呈现表格元素之前调用了 javascript。有三种方法可以做到这一点：

```
// Use CSS (best):
<table style="display:none;" id="mytable">...</table> 
```

或者

```
// Using DOM Load event (wait for all of the elements to render) (second best)
$(function() { $("table#mytable").hide(); }); 
```

或者

```
// Put your javascript at the bottom of the page instead of the head. (not preferred) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:58:13.687

您也可以使用 onkeyup 和文档准备可能会有所帮助

```
$(document).ready(function() {
 $("#mytable").hide();
   $("#example").keyup(function (e) { 
$("#mytable").show();
}) 
});​ 
```

jfiddle [http://jsfiddle.net/dznej/](http://jsfiddle.net/dznej/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:59:21.893

查看我为您创建的小提琴 - [http://jsfiddle.net/ggJSg/](http://jsfiddle.net/ggJSg/)

基本上有两个问题：

*   `$("#mytable").hide();`只有在 DOM 准备好时才需要调用
*   使用适当的事件（例如我的示例中的焦点）来触发表格显示

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T22:01:01.387

当 DOM 完成加载时，您需要使用[.ready()](http://api.jquery.com/ready/)函数来执行代码。然后你应该使用[.change()](http://api.jquery.com/change/)函数来显示它：

```
$(document).ready(function () {

  // Hide initially    
  $('#mytable').hide();

  // When something changes in the input named `example` then show the table.
  $("[name='example']").change(function() {
    $('#mytable').show();
  });
}); 
```

# javascript - Javascript数字到单词 - vigesimal

> ID：10857804
> 
> 赞同：3
> 
> 时间：2012-06-01T21:51:41.990
> 
> 标签：javascript, html, forms, converter

我想创建一个数字到单词的转换器，例如这个[http://gwydir.demon.co.uk/jo/numbers/words/intro.htm](http://gwydir.demon.co.uk/jo/numbers/words/intro.htm)

但是，我正在为使用十进制数字系统的外语做这件事 - 以二十来计数。我想从 1-199 开始。

1-20很容易，但之后它会改变。20-39 遵循“二十对一”(21)、“二十对二”(22)、直到“二十对十八”(38)、“二十对十九”(39) 的模式。

40-99 和 120-199 仍然不同，因为它计入分数：“一二二十”（41），“二二二十”（42），“一三二十”（61），十和三二十（70），十一三二十（71），'一四二十'（81），'六二十'（120），'一六二十'（121），'九二十'（180），'一九二十' (181), '十九九二十' (199)

100-119类似于英文：一百零一（101），一百零二（102），一百一十一（111），一百一十九（119）

这是我用于输入表单的 html：

```
<table align=center>
<tr><td>
<form action="#" name="conv">
Enter number:
<input type="text" name="numb" size="15">
<input type="button" value="Show number" onclick="getnum(document.conv.numb.value)">
</form>
</td></tr>
<tr><td align=center><span id="outp">&nbsp;</span></td></tr>
</TABLE> 
```

这是我拥有的最多 20 个数字的 Javascript：

```
var units = new Array(21)
units[0]=""
units[1]="onen"
units[2]="dew"
units[3]="tri"
units[4]="pajar"
units[5]="pemp"
units[6]="whegh"
units[7]="seyth"
units[8]="eth"
units[9]="naw"
units[10]="deg"
units[11]="udnek"
units[12]="dowdhek"
units[13]="tredhek"
units[14]="peswardhek"
units[15]="pemthek"
units[16]="whetek"
units[17]="seytek"
units[18]="etek"
units[19]="nownsek"
units[20]="ugens" 
```

我的问题是，如何开始创建允许我将数字转换为正确单词的代码？谁能指出一些有帮助的例子？我已经看到为英语完成的示例，但由于数字系统非常不同，我看不出如何将其转换为 vigesimal 系统。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:30:09.087

让我们看一个例子：考虑数字`x`。

首先弄清楚数字中有多少个100。我们这样做是这样的：`x/100`因为整数除法会截断任何余数。这就是我们的第一部分：`units[x/100] + " hundred"`

现在让我们做余数，由 给出`y=x%100`。有`y/20`二十个。而`y%20`剩下。所以字符串的其余部分是`units[y%20] + " and " + units[y/20] + " " units[20]`.

这还不是 100% 完美，因为它不能正确处理没有余数（如 640）的数字。但这些只是一些特殊情况，我相信你可以毫无困难地弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:32:46.587

以下函数应该让您了解如何处理这个问题：

```
function getnum(s){
    var n = parseInt(s);

    if( 1 <= n && n <= 20 ){ alert(units[n]); }

    if( (40 <= n && n <= 99) || (120 <= n && n <= 199) ){
      var q = Math.floor(n / 20);
      var r = n % 20;

      !r && (alert (units[q] + ' ' + units[20]));

      r && (alert (units[r] + ' and ' + units[q] + ' ' + units[20]));    
    }    
} 
```

现在您应该能够计算出`100 <= number <= 119`. 也类似`21 <= number <= 39`。

# php - 没有结果的基本 PHP 上传脚本

> ID：10857805
> 
> 赞同：1
> 
> 时间：2012-06-01T21:51:42.887
> 
> 标签：php, html, file-upload

我有一个非常简单的上传脚本。这是我的 HTML 文件，允许用户提交文件：

```
 <form enctype="multipart/form-data" action="uploader.php" method="POST">
 Please choose a file: <input name="uploaded" type="file" /><br />
 <input type="submit" value="Upload" />
 </form> 
```

然后这是我的 PHP 文件，它实际上将文件放在我的服务器上

```
 <?php 
 echo "starting the upload initially";
 $target = "upload/"; 
 $target = $target . basename( $_FILES['uploaded']['name']) ; 
 $ok=1; 
 if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
 {
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
 } 
 else {
 echo "Sorry, there was a problem uploading your file.";
 }
 ?> 
```

我将 html 保存在 url.com/uploading.html 和 php 保存在 url.com/uploader.php

加载 HTML 页面并将文件放入上传程序后，浏览器将我重定向到 php 文件，但随后没有做任何进一步的事情，甚至没有打印出我拥有的初始语句。你看有什么问题吗？所有权限都是 777，所以不应该是这样。我的服务器上还有其他需要处理的事情吗？一切都在同一个文件夹中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T00:24:54.213

您能否验证 post_max_size 和 upload_max_filesize 是否大于或等于您尝试上传的文件的大小？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:03:34.040

您的最大大小是否可能大于文件大小

# express - 玉扩展了 express.js 中的关键字问题

> ID：10857807
> 
> 赞同：0
> 
> 时间：2012-06-01T21:52:10.537
> 
> 标签：express, pug

好的，所以我在快速让我的模板与扩展/阻止关键字一起使用时遇到问题。我能够让索引模板正常工作；但是，当我尝试添加第二个模板时，“扩展”似乎不起作用。我已经粘贴了下面的代码，我们将不胜感激！（作为参考，我正在运行 express 版本 2.5.8 和节点 0.6.12）

应用程序.js：

```
var express = require('express')
  , routes = require('./routes');

var app = module.exports = express.createServer();

// Configuration

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'your secret here' }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
  app.set('view options', { layout: false, pretty: true });
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes

app.get('/', routes.index);
app.get('/login', routes.login);

app.listen(3000, function(){
  console.log("Express server listening on port %d in %s mode", app.address().port,     app.settings.env);
}); 
```

路线/index.js：

```
exports.index = function(req, res){
  res.render('index', { title: 'rm-dash-r' })
};

exports.login = function (req, res) {
    res.render('login', { title: 'rm-dash-r' })
}; 
```

在 views/ 目录中，有 3 个文件。index.jade、main-layout.jade 和 login.jade。对于测试，login 和 index 是相同的文件。

主要布局.jade：

```
!!!
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
  body(style='margin: 0 22%;')
    div.container
        div.header
            a(href='/')
                span rm-dash-r

        div.stripes
            span

        div.nav
            a(href='/') Blog
            a(href='/') About
            a(href='/') Projects
            div.clearer
                span

        div.stripes
            span

        div.main
            div.left
                div.content

                    block content
... 
```

index.jade/login.jade：

```
extends main-layout

block content
    h1 testing 
```

本质上，'/' 的路由没有任何问题，但登录路由只会呈现 login.jade 标记，页面顶部的扩展主布局除外。

如果有任何其他有助于了解的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:54:34.753

好吧，经过大量的试验和错误，我似乎让它工作了。出于某种原因，在 login.jade 的第一行添加返回（即扩展主布局现在是第 2 行）之后，这一切似乎都有效。

我一点也不知道为什么会这样，但如果有人能解释一下，我很想听听。

# android - 在 LinearLayout 中自动调整 ImageButtons 的大小

> ID：10857814
> 
> 赞同：2
> 
> 时间：2012-06-01T21:52:48.150
> 
> 标签：android, android-layout

**摘要：我想要一排水平的 ImageButtons 均匀地缩小以适应屏幕尺寸。**

我在屏幕顶部有一排 ImageButtons。一个左对齐的徽标 ImageButton，然后是右对齐的 ImageButtons，用于各种操作。

是的，这听起来很像 Honeycomb/ICS 操作栏，但代码是针对 Froyo 的，所以我需要在 2.2 兼容的布局中实现设计。

我以编程方式检测我何时在 7" 或更大的屏幕上，并切换到 ImageButtons 的更大图像（因为 drawable-xlarge 目录仅适用于 10" 及以上，而 drawable-large 适用于 4" 及以上）。

这在手机或 10" 平板电脑上效果很好。但是，在 7" 平板电脑上，图像对于纵向模式的空间来说太大了（应用程序被锁定为纵向模式）。

我尝试了许多不同的方法来缩小图像，因为我不想再为 7" 平板电脑使用另一组图像。但是图像的间距不正确，或者缩放到不同的水平，或者只是一些图片出现在屏幕上。我用过RelativeLayout、LinearLayout、android:weightSum，将图片设置为背景图片、src图片等。

编辑：我在实验中注意到的另一个怪癖是，如果我设置相同的 layout_weight，布局会起作用，迫使每个项目具有相同的宽度。如果我希望某些项目具有不同的宽度——在这种情况下这是必要的，因为第一个按钮需要更宽——然后当我设置与其他项目不匹配的 layout_weight 时布局会中断。只有一两个项目出现在屏幕上，其余的可能被推开。

这是我正在使用的布局。这是我迄今为止最好的——它在 10 英寸平板电脑和手机上运行良好，在 7 英寸平板电脑上几乎可以接受。但是徽标——应该与按钮高度相同，宽约 2.5 倍——明显高于其他按钮。有关改进布局的任何建议？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionBarLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:padding="5dip"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:background="@drawable/action_bar_bg"
     >

    <ImageButton
         android:id="@+id/logoButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@null"
         android:src="@drawable/save_logo_03"
         android:padding="2dip"
         android:adjustViewBounds="true"
         android:scaleType="centerInside"
          />
     <View
         android:id="@+id/spacer"
         android:layout_width="50dip"
         android:layout_height="1dip"
         android:layout_weight="1"
         android:visibility="invisible"
         />
     <ImageButton
         android:id="@+id/listButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:src="@drawable/list_button"
         android:background="@null"
         android:adjustViewBounds="true"
         android:padding="2dip"
         android:scaleType="centerInside"
          />

     <ImageButton
         android:id="@+id/mapButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@null"
         android:src="@drawable/map_button2"
         android:adjustViewBounds="true"
         android:padding="2dip"
         android:scaleType="centerInside"
          />

     <ImageButton
         android:id="@+id/ltoButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@null"
         android:src="@drawable/lto_button"
         android:adjustViewBounds="true"
         android:padding="2dip"
         android:scaleType="centerInside"
          />

     <ImageButton
         android:id="@+id/searchButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@null"
         android:src="@drawable/search_button"
         android:adjustViewBounds="true"
         android:padding="2dip"
         android:scaleType="centerInside"
          />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:10:11.910

不幸的是，最后我确实必须根据屏幕大小以编程方式更改按钮大小。

我的最终布局看起来像这样（经过消毒）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:padding="5dip"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:background="@drawable/action_bar_bg"
     >
     <ImageButton
         android:id="@+id/logoButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="0"
         android:background="@null"
         android:padding="2dip"
         android:adjustViewBounds="true"
         android:src="@drawable/logo"
         android:scaleType="centerInside"
          />

     <View
         android:layout_width="0dp"
         android:layout_height="0dp"
         android:layout_weight="1"/>

     <ImageButton
         android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="0"
         android:background="@null"
         android:padding="2dip"
         android:src="@drawable/button1"
         android:scaleType="centerInside"
         android:adjustViewBounds="true"
         />

     <ImageButton
         android:id="@+id/button2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="0"
         android:background="@null"
         android:padding="2dip"
         android:src="@drawable/button2"
         android:scaleType="centerInside"
         android:adjustViewBounds="true"
          />

     <ImageButton
         android:id="@+id/button3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="0"
         android:background="@null"
         android:padding="2dip"
         android:src="@drawable/button3"
         android:scaleType="centerInside"
         android:adjustViewBounds="true"
          />

     <ImageButton
         android:id="@+id/button4"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="0"
         android:background="@null"
         android:padding="2dip"
         android:src="@drawable/button4"
         android:adjustViewBounds="true"
         android:scaleType="centerInside"
          />

</LinearLayout> 
```

注意填充可用空间的空视图，将其他按钮推到屏幕右侧。

在代码中，我检查了屏幕尺寸。如果它看起来 >= 7"，那么我切换到更大的图像。如果它看起来 >=7" 但 < 9"，那么我以编程方式更改图像的大小 - 我必须尝试想出一个正确的数字让它工作。如果我有更多的图像或者它们改变了，我将不得不重复它。我对这样一个不灵活的解决方案并不感到自豪，但我找不到任何其他的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:41:33.137

这就是我所拥有的：

在您的特定情况下，我们可以说您的应用程序布局和按钮大小取决于：

*   移动设备的屏幕尺寸/分辨率；
*   行中按钮的数量；

我向您推荐两种方法：

*   **使用RelativeLayout**和**权重**标签实现您的布局。使用这些可以使灵活的布局变得非常容易；
*   使用 DisplayMetrics 类以编程方式定义按钮大小，类似于本文末尾的片段，并使用额外的 .xml 文件（例如 integer.xml），您可以在其中**为按钮数量**定义一个常量值；

在这个片段中，**dm**是一个保存设备分辨率的结构。

 **```
DisplayMetrics dm = new DisplayMetrics();
context.getWindowManager().getDefaultDisplay().getMetrics(dm); 
```*  *希望对您有所帮助！:)**

# node.js - 如何从在node.js中过快到达的事件输入中逐个写入数据库

> ID：10857822
> 
> 赞同：2
> 
> 时间：2012-06-01T21:53:59.300
> 
> 标签：node.js, asynchronous, io

我使用繁琐的驱动程序接收来自 MS SQL SELECT 查询的输入。

我已将一个侦听器附加到阅读器的“行”事件：

```
request.on('row', function(columns) {
     insert_row_other_db(columns);
}); 
```

我正在将结果写入 insert_row_other_db 函数中的另一个数据库。

但是行到达的速度比它们写的快得多，我只想打开一个连接。`de-asyncronyze`写入其他数据库的好方法是什么？我想一个接一个地写行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:47:34.300

假设您能够在`insert_row_other_db`完成时收到回调，您可以使用[Async](https://github.com/caolan/async)库来创建一个队列，您可以使用该队列来安排您的插入。队列有一个并发设置，允许您限制一次可以运行的任务数量。

```
var async = require("async");

var insertQueue = async.queue(function (columns, callback) {
  insert_row_other_db(columns, callback);
}, 1);

request.on("row", function (columns) {
  insertQueue.push(columns);
}); 
```

# iphone - UIScrollView ContentOffset 未到达屏幕边缘

> ID：10857825
> 
> 赞同：4
> 
> 时间：2012-06-01T21:54:14.603
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview, uiscrollviewdelegate

我有一个问题`UIScrollView`，不确定它是否是一个错误，但是当我`UIScrollView`用它`delegate`和一个可缩放/可平移的图像实现 a 时，它就会发生。

首先，当我平移图像时，它可能`contentOffset`是一个非整数值 (.5)。可以肯定`zoomScales`的是，当我将图像一直平移到边缘时，由于这个原因，它在到达边缘时会下降半个像素。

这是一件很小的事情，但在我的应用程序中，我必须在屏幕上拖动对象，如果我将对象拖动到角落，你会注意到它。

我已经实现了以下内容来尝试纠正问题并使其`contentOffset`成为一个完整的值：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
    if (targetContentOffset->x != ceilf(targetContentOffset->x))
    {
        if (velocity.x > 0)
        {
            targetContentOffset->x = ceilf(targetContentOffset->x);
        }
        else 
        {
            targetContentOffset->x = floorf(targetContentOffset->x);
        }
    }

    if (targetContentOffset->y != ceilf(targetContentOffset->y))
    {
        if (velocity.y > 0)
        {
            targetContentOffset->y = ceilf(targetContentOffset->y);
        }
        else 
        {
            targetContentOffset->y = floorf(targetContentOffset->y);
        }
    }
} 
```

但是，它似乎不起作用，因为我的与该物业`targetContentOffset`完全不同。`contentOffset`

有没有人a）为什么会发生这个错误或b）如何使用上述委托方法或其他方式修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:10:36.227

或者，此方法实现也可能对您有用。

```
-(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView 
```

查看下面的评论，您可能必须实现多种方法。上面的一个或另一个答案帖子中所述的一个当它减速到停止时，只是为了确保你触及你的边缘条件，以及你已经必须处理速度点的方法。

# c++ - C++ - 转义或禁用字符串上的反斜杠

> ID：10857826
> 
> 赞同：0
> 
> 时间：2012-06-01T21:54:18.050
> 
> 标签：c++, character, backslash

我正在编写一个 C++ 程序来解决消息解码的常见问题。部分问题需要我获取一堆随机字符，包括“\”，并将它们一个一个映射到一个键。

我的程序在大多数情况下都可以正常工作，除了当我从字符串中读取诸如 '\' 之类的字符时，我显然会得到完全不同的字符表示（例如，'\0' 产生一个空字符，或者 '\' 在它需要被视为一个字符）。

由于我不应该对包含哪些字符键进行任何控制，因此我一直在拼命地尝试找到一种方法来将特殊控制字符（例如反斜杠）视为字符本身。

我的问题基本上是这些：

*   有没有办法在我的程序范围内关闭所有特殊字符？

*   有没有办法覆盖特殊字符的当前二合字母定义并将它们定义为其他东西（例如使用非常稀有键的二合字母）？

*   String 类上是否有一些我错过的模糊方法可以强制读取字符串上的实际字符而不是预定义的常量？

几个小时以来，我一直在尝试寻找解决方案，但我发现的所有可能的修复程序都适用于其他语言。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:18:41.280

如果您`"\0"`从标准输入或文件中读取字符串，它将被视为两个单独的字符：`'\\'`和`'0'`. 您无需进行额外的处理。

转义字符仅用于字符串/字符文字。也就是说，当您想将某些内容硬编码到源代码中时。

# css - 两个并排嵌套的 div

> ID：10857829
> 
> 赞同：0
> 
> 时间：2012-06-01T21:54:31.210
> 
> 标签：css, html, alignment

我知道这已经被问过一百万次了，但我似乎无法破解它，我相信更有经验的人可以比我解决它更快地发现我的错误。

HTML：[http ://sas98.user.srcf.net/guestbuzz/index.php](http://sas98.user.srcf.net/guestbuzz/index.php)

CSS：[http ://sas98.user.srcf.net/guestbuzz/style.css](http://sas98.user.srcf.net/guestbuzz/style.css)

我希望右手边的盒子位于表单的右手边，但在容器内，因此它的右手边与导航栏的右手边对齐。

首先十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:18:09.437

了解 div 的块模型。它将占用整个可用宽度。这有效：

```
.container {
    width: 1000px;
    margin: 0px auto;
    /*display:table;*/
    position:relative;
}

    #left {
        width: 600px;
        display:inline-block;
        /*float:left;*/
        position:absolute;
        left:0;
    }

    #right {
    background-color:rgba(0,0,0,0.2);
        -webkit-box-shadow: 0 0 10px rgba(0,0,0,0.1);
           -moz-box-shadow: 0 0 10px rgba(0,0,0,0.1);
             -o-box-shadow: 0 0 10px rgba(0,0,0,0.1);
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
        width: 400px;
        border-radius: 3px;
        display:inline-block;
        /*float:right;*/
        position:absolute;
        right:0;
    } 
```

请注意，注释行是另一种可行的方式。

我做了什么？

1.  使容器相对，因此该 div 的绝对定位子项将相对于该 div 定位。
2.  ~~制作显示：内联块；左右块，所以它需要必要的宽度，不清晰也不相互重叠。~~如果您设置宽度，这不是必需的。
3.  将右侧位置设为 0 到右侧，将左侧位置设为 0 到左侧。

**更新**

我现在认为最好的方法是触发[块格式化上下文](https://stackoverflow.com/questions/1260122/expand-div-to-take-remaining-width)。使`#left`浮动到左侧和 to `#right`，给它属性`overflow:auto;`或任何其他与可见不同的东西。在 IE6 中，您需要触发一个叫做 hasLayout 的东西，所以给`#right`属性`zoom:1;`。

# php - Ajax、PHP、Javascript 在选择组合框后从数据库中提取值

> ID：10857840
> 
> 赞同：1
> 
> 时间：2012-06-01T21:55:24.167
> 
> 标签：php, javascript, ajax, combobox, selection

我有一个包含 Ajax、PHP 和 Javascript 的页面。在该页面上，我有一个网站选择/组合框。当用户选择一个网站时，我让它调用一个 javascript 函数，该函数使用 Ajax 和 GET 方法发送到 PHP 文件并执行 PHP 代码。那个 PHP 文件，我已经连接到一个数据库（使用用户的网站选择来拉一个特定的行）。然后我想发送一些存储在数据库中的详细信息（关于用户选择的网站）并在页面上使用它们来运行其他一些 PHP 代码。

我似乎无法让它与我拥有的代码一起工作，我已经尝试了我能想到的一切。

**选择框代码调用javascript函数：**

```
<select name="website" onchange="doSomething(this.value)" />
<option>option 1</option>
<option>option 2</option>
<option>etc.</option>
</select> 
```

**使用 Ajax 调用 PHP 文件的 Javascript 函数：**

```
function doSomething(str)
{
if (str == "")
{
 document.getElementById("DIVdisplayID").innerHTML="Nothing Selected";
 return;
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
    document.getElementById("DIVdisplayID").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","URLHERETOPHPFILEHERE?website="+str,true);
xmlhttp.send();

} 
```

**我的显示 DIV：**

```
<div id="DIVdisplayID"></div> 
```

**PHP 文件根据用户选择的网站访问数据库信息：**

```
<?php
$website=$_GET["q"];

$con = mysql_connect("localhost","username","password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("database", $con);

$result = mysql_query("SELECT * FROM Websites
WHERE WebsiteURL='$website'");

while($row = mysql_fetch_array($result))
{
echo $row['WebsiteDetail1'] . " " . $row['WebsiteDetail2'];
echo "<br />";
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:46:04.440

将这行代码替换为：

```
xmlhttp.open("GET","URLHERETOPHPFILEHERE?website="+str,true); 
```

用。。。来代替：

```
xmlhttp.open("GET","your php file name with .php extension ?website="+str,true); 
```

并在您使用get方法的php文件中使用get方法“网站”中的名称：如：

```
$website=$_GET["website"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:13:42.090

查询。

doSomething(this.value) 不起作用。

```
doSomething(this.options[this.selectedIndex].text)) 
```

或者

`doSomething($(this).val())`用jQuery

所有的javascript都可以替换为

```
$.get("URLHERETOPHPFILEHERE?website="+str, function(data){
    $('#DIVdisplayID').html(data);
}); 
```

我假设“URLHERETOPHPFILEHERE”实际上已在您的代码中被替换。

# google-chrome - Chrome - 背景时边框半径不起作用：无

> ID：10857847
> 
> 赞同：1
> 
> 时间：2012-06-01T21:56:27.613
> 
> 标签：google-chrome, css

我有以下用于输入标签的 css 样式...

```
<div class="container">
  <input type="search" class="border" />
</div>

.container{
  background: #000;
  -webkit-border-radius: 25px 25px 25px 25px;
  border: 3px solid #000;
}
.border{
  background:none;
  -webkit-border-radius: 25px 25px 25px 25px;
  border: 3px solid #000;
} 
```

当我设置背景：无时，边框半径在 chrome 中不起作用，但在包括 ie9 在内的所有其他浏览器中运行良好。那么为什么在 chrome 中，**当 background:none 时边框半径不起作用**？

**示例：http:** [//jsfiddle.net/TSKpN/5/](http://jsfiddle.net/TSKpN/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:07:41.930

使用此代码：

```
<style>
#some-id{  
    background:none; 
    border: 3px solid #000;
    border-radius: 25px;
}
</style>
<body>
    <input type="text" id="some-id">
</body> 
```

# jquery - Fancybox 无法加载请求的内容。请稍后再试

> ID：10857849
> 
> 赞同：0
> 
> 时间：2012-06-01T21:56:38.647
> 
> 标签：jquery, magento, fancybox

```
<link rel="stylesheet" href="<?php echo $this->getSkinUrl(''); ?>js/fancybox/source/jquery.fancybox.css?v=2.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="<?php echo $this->getSkinUrl(''); ?>js/fancybox/source/jquery.fancybox.pack.js?v=2.0.6"></script>

<script type="text/javascript">

$(document).ready(function() {
  $("a#image").fancybox();
  $("a#image").trigger('click');
  $("a#image").hide();
}); 
```

```
<a id="image" href="banner-about-cart.png"><img src="<?php echo $this->getSkinUrl() ?>images/banner-about-cart.png" alt=""/></a> 
```

有任何想法吗？我在没有花哨的插件的情况下测试的图像加载我可以在站点中看到图像，我也在使用 magento。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:49:01.263

我认为你应该指定内联的fancybox类，记住css文件中也有样式代码：

```
 <a id="image" href="banner-about-cart.png" class="fancybox">
    <img src="<?php echo $this->getSkinUrl(); ?>images/banner-about-cart.png" alt="" />
 </a>
 <!--notice that you forgot to semi-colon after $this->getSkinUrl() -->
<script>
   $(document).ready(function() {
     $("a#image").fancybox();
     //try wrapping the rest of the code in this document load:
     $(document).load(function(){
         $("a#image").trigger('click');
         $("a#image").hide();
     });
   });
</script> 
```

另外，如果您尝试以下方法之一，会发生什么？：

```
 $('#image').trigger('click');
//or
$('a[id="image"]').trigger('click');
//? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:37:32.107

也许这

```
href="banner-about-cart.png" 
```

应该

```
href="<?php echo $this->getSkinUrl() ?>images/banner-about-cart.png" 
```

或者干脆

```
href="images/banner-about-cart.png" 
```

检查您是否有正确的路径。如果禁用了javascript（并且链接尚未隐藏），您可以链接到图像吗？

***旁注***：

这个 ：

```
 $("a#image").fancybox();
  $("a#image").trigger('click');
  $("a#image").hide(); 
```

可以简化为：

```
$("a#image").fancybox().trigger('click').hide(); 
```

... 纯娱乐 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:58:46.407

使用时，`getSkinUrl()`您应该将路径作为函数的参数，而不是在它之后。该方法中有逻辑在当前主题中查找您指定的文件，如果那里不存在，则返回到默认主题路径。

**例子**

假设您使用自定义主题（名为 custom/theme）。给定以下文件结构：

```
skin/
  frontend/
    custom/
      theme/
        images/
          new-logo.png
    default/
      default/
        images/
          new-logo.png
          logo.png

// Good!
<?php echo $this->getSkinUrl('images/new-logo.png'); ?>
// returns http://www.example.com/skin/frontend/custom/theme/images/new-logo.png

// Good, even though images/logo.png doesn't exist in our custom theme.
<?php echo $this->getSkinUrl('images/logo.png'); ?>
// returns http://www.example.com/skin/frontend/default/default/images/logo.png

// Bad! This will cause a 404 error!
<?php echo $this->getSkinUrl('') . 'images/logo.png'; ?>
// returns http://www.example.com/skin/frontend/custom/theme/images/logo.png 
```

我应该指出，我认为这不适用于查询字符串*，*`?v=2.0.6`因此您需要附加：

 *```
<link rel="stylesheet"
      href="<?php echo $this->getSkinUrl('js/fancybox/source/jquery.fancybox.css'); ?>?v=2.0.6"
      type="text/css"
      media="screen" /> 
```*

# python - 深度嵌套字典/地图情况所需的替代数据结构

> ID：10857851
> 
> 赞同：4
> 
> 时间：2012-06-01T21:56:52.357
> 
> 标签：python, data-structures

**数据的一些背景**：正在玩一些不同的游戏，每个游戏都承载了许多玩家。每场比赛由若干轮组成，在每一轮中，每个参与的玩家都会做出一个动作。我在这里尝试做的是在内存中构建一个数据结构，用于存储玩家在所有正在玩的游戏中所采取的个人行动的完整历史。

**一个明显的结构**是一个深度嵌套的字典/哈希图，其中每个`game_id`映射到多个`player_id`s，每个 player_id 映射到不同`round_number`的 s，每个`round_number`映射到一个`action`.

换句话说，`game_id:player_id:round_number:action`. 另一方面，我也可以使用`game_id:round_number:player_id:action`

**当我尝试访问上述数据结构以用于不同的分析目的时，**就会出现问题。**例如`game_id:player_id:round_number:action`，如果我想知道玩家在给定游戏的特定回合中所做的所有动作，那么它是不方便的。`game_id:round_number:player_id:action`相反，如果我想知道特定玩家在给定游戏过程中所做的所有动作，则同样不方便。不幸的是，就我而言，我需要经常问这两个问题。**

 **我想知道是否有**一个单一的数据结构**可以存储这样的数据并且方便访问如上所述的玩家级别和回合级别的数据。如果这很重要，实现将在 Python 中。

**编辑**：一些人推荐使用内存中的 sqlite 数据库来处理此类关系查询。然而，它的性能对我来说可能是一个问题，正如这里所讨论的：[SQLite Performance Benchmark --Why is :memory: so slow...only 1.5X as fast as disk?](https://stackoverflow.com/questions/764710/sqlite-performance-benchmark-why-is-memory-so-slow-only-1-5x-as-fast-as-d)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:36:14.343

一种方法是将数据存储在字典中，但维护**索引**以允许快速访问数据的各种视图。你可以用一个类来构造它，或者只是函数。这是`jist`它的（未经测试）：

```
from collections import defaultdict

game_dict = {}  # keyed by (game, player, round) tuple
game_player_ix = defaultdict(list)
game_round_ix = defaultdict(list)

def add_action(game, player, round):
    game_dict[(game, round, player)] = action # track the action in the main dict
    game_player_ix[(game, player)].append(round)  # keep an index for lookups by player
    game_round_ix[(game, round)].append(player) # another index for lookups by round

def get_all_player_actions(game, player):
    return (game_dict[(game,player,round)] for round in game_round_ix[(game, player)]) # iterator

def get_all_round_actions(game, round):
    return (game_dict[(game,player,round)] for player in game_player_ix[(game, round)]) # iterator 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:02:10.187

我会推荐

1.  编写一个具有将通用访问模式包装到嵌套映射的函数的类。
2.  使用[sqlite3 数据库](http://docs.python.org/library/sqlite3.html)。

编辑：

我误读了这个问题，对不起。

我想不出一个单一的数据结构可以做到这一点，尽管稍微复制数据也不会太糟糕。将玩家设为一个类，您可以让回合存储玩家到动作的地图，并让玩家类包含该玩家采取的动作列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:37:55.550

您可以存储一组元组，其中每个元组仅存储普通（game_id、player_id、round_number、action）。您也可以只使用玩家姓名的[实习字符串](http://docs.python.org/py3k/library/sys.html#sys.intern)而不是 id。如果您不知道要进行什么分析，那么这种格式使每个字段都可以平等地进行统计分析，并且如果您觉得将来需要，可以很容易地将其转换为数据库中的存储。

也可以使用命名[元组。](http://docs.python.org/py3k/library/collections.html?highlight=namedtuple#collections.namedtuple)**

# ios - 如何添加透明视图？

> ID：10857853
> 
> 赞同：0
> 
> 时间：2012-06-01T21:57:17.177
> 
> 标签：ios

我想将视图控制器推送到导航堆栈上，但我不希望它的视图最初出现 - 换句话说，我希望在视图控制器被推送时可见的视图仍然可见。

我尝试将视图控制器的视图的 alpha 值设置为 0.0，我认为这会使它变得透明。但相反，当我将视图控制器推送到堆栈上时，屏幕是白色的。如果我将 alpha 设置为 1.0，那么视图控制器的视图会按预期显示。

为什么它是白色的而不是透明的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:01:16.913

您将不得不手动将视图添加到视图控制器而不是推送它例如执行以下操作

```
YourViewController *vc = [[YourViewController alloc] init];
[self.view addSubview:vc.view];

vc.view.alpha = 0.0;

//Animate Here

vc.view.alpha = 1.0;
//Commit Animate Here 
```

请注意，您将不得不做一些额外的编码来实现 vc 的发布，因为现在您保留了 vc.view，您将无法轻松发布 vc，

另一种解决方案是将第二个视图实现为viewcontoller而不是将其实现为uiview，并且xib类将是view而不是uiviewcontroller

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:00:40.733

也许确保 opaque 属性设置为 NO？

或者您正在推动的视图可能是在界面构建器中构建的，并且您的背景颜色为白色，并且您在其上放置了另一个视图，并且您只更改了子视图的不透明度？

# .net - 为什么不将 .NET Framework 4.0 DLL 添加到 GAC？

> ID：10857856
> 
> 赞同：6
> 
> 时间：2012-06-01T21:57:53.277
> 
> 标签：.net, dll, gac

我注意到 .NET DLL 的位置有些奇怪。我试图调试 System.ServiceModel.dll 的问题，我注意到即使我安装了 .NET 4.0，我的 GAC 中也只安装了 ServiceModel DLL 的 3.0 版本（我通过浏览 C:\Windows 进行了检查\部件）。但是，如果我导航到“C:\Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\Profile\Client”，4.0 版本就在那里。那么为什么.NET 不将 4.0 版本安装到 GAC 中呢？

考虑到它没有，我的 4.0 程序如何知道在哪里可以找到 4.0 DLL？我上面给出的文件路径是自动探测的吗？我回头查看了使用 4.0 DLL 的应用程序，以确认它不会在本地复制 DLL，因此它似乎必须从 GAC 获取它（现在我知道 DLL 不存在），或者正在探测.NETFramework 文件夹。这真的让我很困惑...

编辑：我按照 MystereMan 的建议运行了“Gacutil.exe /l System.ServiceModel”，但它仍然只显示 3.0 版本。这是否意味着 .NET 4 毕竟没有将 DLL 安装到 GAC 中？

**编辑 #2 和解决方案：我的 PATH 中的 gacutil.exe 是旧版本，无法看到 4.0 程序集。通过搜索我的电脑，我在这里找到了 4.0 版本的 gacutil.exe：C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools。使用它，我终于可以看到列出了 System.ServiceModel.dll 的 4.0。感谢大家的帮助！**

谢谢，

-罗伯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:00:01.403

.Net 4.0 使用不同的 GAC，在`Windows\Microsoft.Net\assembly`.

中的文件`Reference Assemblies`是空存根，仅用于在 Visual Studio 中为不同的目标框架过滤 IntelliSense。
如果你在 ILSpy 中打开它们，你会看到所有的方法都是空的。

# javascript - 如何将变量变成对象？

> ID：10857858
> 
> 赞同：1
> 
> 时间：2012-06-01T21:58:03.667
> 
> 标签：javascript, coffeescript

谁能想到一个更好的解决方案来重组变量`a`，使其成为包含其先前值的普通对象？我讨厌这样做，我更喜欢单行，但它必须仍然可读。

```
a = "somevalue"
b = "somekey"

tmp = a
a = {}
a[b] = tmp 
```

让我重新表述一下：期望的（以及来自上面的代码：实际的）结果是这样的：

```
a = { "somekey": "somevalue" } 
```

当“somekey”和“somevalue”实际上是变量`b`并且`a`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:13:19.907

你现在拥有的是实现这一目标的方法。

我能看到的唯一清理是尝试将每个变量减少到一个目的 - 使用`a`值或对象而不是交换`tmp`：

```
var k = "somekey";
var v = "somevalue";

var a = {};
a[k] = v; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:26:41.297

干得好...

```
(a = (b = [a, b, {}])[2])[b[1]] = b[0]; 
```

不能说我会推荐它。

* * *

也许这会好一点……

```
(a = (b = [a, b], {}))[b[1]] = b[0]; 
```

* * *

当然不会比你拥有的更短。

* * *

也许更容易阅读，而且仍然越来越短

```
(b = [a, b], a = {})[b[1]] = b[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T15:32:17.550

怎么样`obj = (a...) -> o={}; o[a[i]]=o[a[++i]] for i in [0...a.length]; o`，比`myObject = obj key1, val1, key2, val2`？

编辑：假设您的意思是标签中的 CoffeeScript，但问题中并没有真正提到它，其余的答案都在 JavaScript 中。为了完整起见，JavaScript 版本是：

```
function obj() {
  var o={}, i, l=arguments.length;
  for (i=0; i<l; i+=2) {
    o[arguments[i]] = o[arguments[i+1]];
  }
  return o;
}

var myObject = obj(key1, val1, key2, val2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T21:59:07.703

尝试：

```
tmp = a;
a = {
    b: tmp
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T15:58:01.243

使用表达式时从[LiveScript](http://gkz.github.com/LiveScript)生成的内容中窃取`a = {(b): a}`：

```
a = "somevalue"
b = "somekey"

a = (ref = {}; ref[b] = a; ref) 
```

它仍然需要一个辅助变量，但它在 IMO 中非常易读，现在它是一个单行 =D

# ios - 从后台线程更改 CALayer 的属性是否安全？

> ID：10857861
> 
> 赞同：3
> 
> 时间：2012-06-01T21:58:17.273
> 
> 标签：ios, multithreading, calayer

我想做一个响应设备运动的动画，即使 UI 线程暂时繁忙，我也希望它保持流畅。动画包括更改 CALayer 的贝塞尔路径。我尝试过从辅助线程执行此操作，但我偶尔会在主线程有一个废弃堆栈的地方挂起。我正在做的事情完全没有希望吗？这是我在线程中所做的：

```
[CATransaction lock];
[CATransaction setValue:(id)kCFBooleanTrue
                 forKey:kCATransactionDisableActions];
[CATransaction begin];
myLayer.path = [UIBezierPath bezierPathWithOvalInRect:theRect].CGPath;
myLayer.bounds = theBounds;
[CATransaction commit];

[CATransaction flush];
[CATransaction setValue:(id)kCFBooleanFalse
                 forKey:kCATransactionDisableActions];
[CATransaction unlock]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T23:33:20.553

这是我的版本。

```
dispatch_async(dispatch_get_main_queue(), ^{
            myLayer.path = [UIBezierPath bezierPathWithOvalInRect:theRect].CGPath;
            myLayer.bounds = theBounds;
        }); 
```

调度队列的优势在于能够从本地范围中拉入变量，而不必担心实现中间数据结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T22:07:25.403

禁止从除 uithread 之外的任何线程更新 ui，因此您必须执行以下操作：

```
- (void) updateUI
{
[CATransaction lock];
[CATransaction setValue:(id)kCFBooleanTrue
                 forKey:kCATransactionDisableActions];
[CATransaction begin];
myLayer.path = [UIBezierPath bezierPathWithOvalInRect:theRect].CGPath;
myLayer.bounds = theBounds;
[CATransaction commit];

[CATransaction flush];
[CATransaction setValue:(id)kCFBooleanFalse
                 forKey:kCATransactionDisableActions];
[CATransaction unlock];
} 
```

并从另一个线程

```
[self performSelectorOnMainThread:@selector(updateUI) withObject:nil waitUntilDone:YES]; 
```

# asp.net - SlideShowExtender - 如何获取当前图片？

> ID：10857862
> 
> 赞同：0
> 
> 时间：2012-06-01T21:58:34.073
> 
> 标签：asp.net, ajaxcontroltoolkit

我在 aspx 页面中使用 asp 控件 SlideShowExtender。

我正在使用上一个和下一个按钮。

我想添加一个删除按钮。有没有办法找出用户当前在哪张图片上？我很难找到如何获取 SlideShowExtender 当前显示的图像的名称。

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T22:03:03.117

疯狂的解决方法

将 MouseDown 事件添加到图像*（OnClick 不起作用）*

asp:Image runat="server" ID="MainImage" Width="1000" ImageUrl="" onmousedown="javascript:return MainClick();"

JavaScript

```
 function MainClick() {
        i = document.getElementById('<%=MainImage.ClientID %>');
        c = document.getElementById('<%=MainImageClick.ClientID %>');
        c.value = i.getAttribute("src");
        __doPostBack(null, null);
        return true;
    }

</script> 
```

C# - 可能有一些设置发件人的方法，但我正在处理一个超出预算的项目

protected void Page_Load(object sender, EventArgs e) { if (IsPostBack)

```
{
    string mainImageClick = MainImageClick.Value;
    if (!string.IsNullOrEmpty(mainImageClick))
      DoMainImageClick(mainImageClick);
    MainImageClick.Value = string.Empty;
 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:47:12.297

```
$find("<%= slideshowextend1.ClientID %>")._currentValue.ImagePath;
$find("<%= slideshowextend1.ClientID %>")._currentValue.Name; 
```

# php - 压缩字符串，然后解压缩字符串？

> ID：10857864
> 
> 赞同：5
> 
> 时间：2012-06-01T21:59:05.163
> 
> 标签：php, mysql, string, function, compression

我现在正在处理数十万行字符串。无论如何我可以将字符串压缩为像 MD5 一样，然后解压缩它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T22:02:04.217

[是的，您可以在 PHP（演示](http://3v4l.org/3gi8o)）中压缩和解压缩字符串：

```
$str = 'Hello I am a very very very very long string';
$compressed = gzcompress($str, 9);
$uncompressed = gzuncompress($compressed);

echo $str, "\n";
echo $uncompressed, "\n";
echo base64_encode($compressed), "\n";
echo bin2hex($compressed), "\n";
echo urlencode($compressed), "\n"; 
```

但是 MD5 不是压缩而是散列。

另请参阅：[如何在 PHP 中压缩/解压缩长查询字符串？](https://stackoverflow.com/questions/2996049/how-to-compress-decompress-a-long-query-string-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T22:06:57.443

看看 PHP 提供的 ZLib 函数：http: [//us.php.net/manual/en/ref.zlib.php](http://us.php.net/manual/en/ref.zlib.php)

您可以使用`gzencode()`and`gzdecode()`的组合，或 and 的组合，或`gzdeflate()`and`gzinflate()`的组合。请记住使用与您使用的压缩函数匹配的解压缩函数，因为这三对函数都返回（或接受）略有不同的数据。`gzcompress()``gzuncompress()`

您可能需要进行一些实际测试来确定这些对中的哪一对最适合您。祝你好运！

# ruby - rspec 索引示例有效但不显示示例

> ID：10857868
> 
> 赞同：0
> 
> 时间：2012-06-01T21:59:24.823
> 
> 标签：ruby, testing, rspec, controller, routes

```
$ rake spec

  1) GroupsController GET show show one group's name & description
     Failure/Error: get :show
     ActionController::RoutingError:
       No route matches {:controller=>"groups", :action=>"show"}
     # ./spec/controllers/groups_controller_spec.rb:16:in `block (3 levels) in <top (required)>'

Finished in 0.26379 seconds
2 examples, 1 failure

cat controllers/groups_controller_spec.rb 
require 'spec_helper'

describe GroupsController do

  describe "GET index" do
    it "assigns all groups to @groups" do
      group = FactoryGirl.create(:group)
      get :index
      assigns(:groups).should eq([group])
    end
  end

  describe "GET show" do
    it "show one group's name & description" do
      group = FactoryGirl.create(:group)
      get :show
      assigns(:group).should eq([group])
    end
  end

end

$ rake routes
(in /home/durrantm/Dropnot/webs/rails_v3/linker)
      ladmin_login        /ladmin/login(.:format)       {:controller=>"ladmin", :action=>"login"}
     ladmin_logout        /ladmin/logout(.:format)      {:controller=>"ladmin", :action=>"logout"}
             users GET    /users(.:format)              {:action=>"index", :controller=>"users"}
                   POST   /users(.:format)              {:action=>"create", :controller=>"users"}
          new_user GET    /users/new(.:format)          {:action=>"new", :controller=>"users"}
         edit_user GET    /users/:id/edit(.:format)     {:action=>"edit", :controller=>"users"}
              user GET    /users/:id(.:format)          {:action=>"show", :controller=>"users"}
                   PUT    /users/:id(.:format)          {:action=>"update", :controller=>"users"}
                   DELETE /users/:id(.:format)          {:action=>"destroy", :controller=>"users"}
order_links_groups POST   /groups/order_links(.:format) {:action=>"order_links", :controller=>"groups"}
            groups GET    /groups(.:format)             {:action=>"index", :controller=>"groups"}
                   POST   /groups(.:format)             {:action=>"create", :controller=>"groups"}
         new_group GET    /groups/new(.:format)         {:action=>"new", :controller=>"groups"}
        edit_group GET    /groups/:id/edit(.:format)    {:action=>"edit", :controller=>"groups"}
             group GET    /groups/:id(.:format)         {:action=>"show", :controller=>"groups"}
                   PUT    /groups/:id(.:format)         {:action=>"update", :controller=>"groups"}
                   DELETE /groups/:id(.:format)         {:action=>"destroy", :controller=>"groups"}
            search        /search(.:format)             {:action=>"index", :controller=>"links"}
   advanced_search        /advanced_search(.:format)    {:action=>"advanced_search", :controller=>"links"}
      groups_links GET    /links/groups(.:format)       {:action=>"groups", :controller=>"links"}
             links GET    /links(.:format)              {:action=>"index", :controller=>"links"}
                   POST   /links(.:format)              {:action=>"create", :controller=>"links"}
          new_link GET    /links/new(.:format)          {:action=>"new", :controller=>"links"}
         edit_link GET    /links/:id/edit(.:format)     {:action=>"edit", :controller=>"links"}
              link GET    /links/:id(.:format)          {:action=>"show", :controller=>"links"}
                   PUT    /links/:id(.:format)          {:action=>"update", :controller=>"links"}
                   DELETE /links/:id(.:format)          {:action=>"destroy", :controller=>"links"}
              root        /(.:format)                   {:controller=>"links", :action=>"index"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:17:57.610

你需要传递一个id。

`get :show, id: group.id`

和

`assigns(:group).should eq(group)`

# android - “运行方式 - > Android 应用程序”不再是我的 Eclipse 运行配置中的选项

> ID：10857870
> 
> 赞同：7
> 
> 时间：2012-06-01T21:59:41.577
> 
> 标签：android, eclipse

我在 Win7 机器上运行 Eclipse 3.7.2。我有 Android SDK 和 AVD。一切运作良好。我有一个 Android App 项目，我在 AVD 上的模拟器和真正的 Android 设备上运行。亚行也运作良好。

在某个时候，我抓住了 SDK Android 4.0.3。然后我不得不升级一些我不记得的东西，也许是我的 AVD。但自从这次升级以来，我再也没有选择将我的包作为 Android 应用程序运行了。如果我选择“运行”，它会弹出一个菜单，要求我选择一种运行方式，而“Android 应用程序”不是一个选择。它必须是 Java 应用程序等。如果我打开“运行配置”，我的左栏中没有“Android 应用程序”。

我的 SDK 管理器仍将 Android 4.0 和 Android 4.0.3 列为“已安装”。我的 AVD 管理器仍然让我启动一个 Android 虚拟设备，甚至创建一个新设备。但是 Eclipse 不允许我将包作为 Android 应用程序运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:29:44.633

除了 AVD、SDK 和其他调试工具的升级之外，请确保检查 Eclipse 的 Android ADT 插件的更新。然后确保您处于 Android 透视图（Eclipse 窗口的左上角），而不是其他一些/通用 Java 透视图（没有特定于 Android 的选项）。

此外，您可以在 Eclipse 中的 Window > Customize Perspective... 下检查以仔细检查您想要的所有 Android 选项（菜单、上下文项、视图、工具栏）是否已启用。

更新：您可以将 Android 工具添加到任何视角（我将我的命名为“Android”）。从 DDMS 或 Java 透视图，转到 Window > Customize Perspective - DDMS。单击命令组可用性选项卡，并确保选中“启动”。

还可以转到项目 > 属性 > 运行/调试设置并检查是否列出了启动配置。创建/编辑该配置并确认它有一个 Android 选项卡（通常设置为从您的清单运行默认活动）。

如果没有，您的项目关联可能有问题 - 尝试在项目资源管理器中右键单击您的项目，转到 Android 工具（如果可用）> 修复项目属性。我相信有一个 Ant 工具可以从命令行执行此操作，但您必须查看 Android/Google 文档。

也有可能是您的 Eclipse 安装出现问题，或者您的 ADT 插件比您的 Eclipse 版本更新。Eclipse Juno (v4.2) 于 6 月底发布，最新的 ADT 插件可能正在寻找您的 v3.7 安装中没有的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T09:55:48.263

为我解决的问题是：

*   右键单击项目名称中的`Package Explorer`
*   `Android Tools`->`Fix Project Properties`

之后我可以点击 Run As -> Android Application 一切都很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-25T23:44:50.283

在您的项目上单击鼠标右键 -> 配置 -> 转换 ADT Android 配置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T11:49:06.007

我有一个类似的问题。我最终所做的工作是进入 Project->Properties->Java Build Path->Order and Export 并且我确保 /gen 文件在我们的序列中是第一个，然后是 /src 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T20:19:15.837

一个简单的解决方法是手动创建一个 android 运行配置：

运行/运行配置...，然后右键单击“Android 应用程序”并选择新建，选择您的项目并单击运行。

![在此处输入图像描述](../Images/cdd4552692bb774ce2bb600f63f725f7.png)

# tsql - 根据匹配的行从变量中删除字符串

> ID：10857876
> 
> 赞同：4
> 
> 时间：2012-06-01T22:00:11.293
> 
> 标签：tsql

我有一个小问题，我知道一些解决方案，但我不知道最好的方法（或不那么脏的意大利面方法）。

我有一个字符串变量，我需要在类似的表达式中使用它。

所以：

```
declare @a varchar(100) = 'my string to use as a join from'

select *
from table
where
    column like '%' + @a + '%' 
```

但我不想要包含@a 变量的表中的任何行，我想要包含在@a 变量中的表中的任何行，所以：

```
select *
from table
where
    @a like '%' + column + '%' 
```

结果：

```
'my string'
'as a join from' 
```

但现在我需要从 @a 变量中删除匹配的行。我怎样才能做到这一点？

（编辑）

预期结果：

```
@a = ' to use '

'my string'
'as a join from' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T22:04:43.903

您可以更改`@a`选择中每个匹配行的值：

```
select @a = replace(@a, MyColumn, '')
  from MyTable
 where @a like '%' + MyColumn + '%' 
```

演示：[http](http://www.sqlfiddle.com/#!3/187d6/5) ://www.sqlfiddle.com/#!3/187d6/5 （结果`@a = ' to use '`：）

* * *

如果您还想获取结果集，请使用临时表来存储匹配的行：

```
select MyColumn
  into #Temp
  from MyTable
 where @a like '%' + MyColumn + '%'

-- @a = ' to use '
select @a = replace(@a, MyColumn, '') from #Temp

-- returns result set of words that matched
select * from #Temp

drop table #Temp 
```

演示：[http ://www.sqlfiddle.com/#!3/187d6/13](http://www.sqlfiddle.com/#!3/187d6/13)

# mysql - 需要 LOAD DATA LOCAL INFILE 帮助

> ID：10857877
> 
> 赞同：0
> 
> 时间：2012-06-01T22:00:27.917
> 
> 标签：mysql, sql, import

这是我使用 csv 文件加载 mysql 表的查询。

```
LOAD DATA LOCAL INFILE table.csv REPLACE INTO TABLE table1 FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\'' LINES TERMINATED BY 'XXX' IGNORE 1 LINES 
```

SET date_modified = CURRENT_TIMESTAMP；

假设我的 CSV 包含 15 列的 500 条记录。我更改了三行并以“XXX”终止它们。我现在想用这个文件更新 mysql 表。我的主键是自动递增的值。当我运行此查询时，所有 500 行都将使用旧数据进行更新，而我更改的行将被添加为新数据。我不想要新的。我希望我的表按原样替换为 csv。我尝试将我的主键更改为非 AI，它仍然不起作用。请问有什么指点吗？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:07:33.250

*我在这里做一些假设。*

1）您的文件中没有自动编号值。

由于您的主键不在您的文件中，因此 MySQL 将无法匹配行。自动编号主键是人工键，因此它不是数据的一部分。MySQL 在插入行时添加此人工主键。

假设您的文件包含一些唯一标识符，我们将其称为 Identification_Number。这个数字在文件中，并且您的表将其用作主键，在这种情况下，MySQL 将能够识别文件中的行并将它们与表中的行匹配。

虽然很多人只会在数据库中使用自动编号，但我总是检查数据中是否没有自然键。如果我确定了一个，我会使用表格中的这个自然键进行一些性能测试。然后根据两者的性能指标，我决定一个关键。

希望我没有弄错您的问题，但我怀疑可能是这种情况。

# php - 带有 PHP 的 Javascript 函数引发“非法格式的 XML 语法”错误

> ID：10857878
> 
> 赞同：1
> 
> 时间：2012-06-01T22:00:34.637
> 
> 标签：php, javascript, xml, syntax-error

我正在尝试学习一些 javascript，但我无法弄清楚为什么我的代码不正确（我确定我做错了什么，哈哈），但无论如何我正在尝试创建一个登录页面，以便当表单提交后，javascript 将调用一个函数来检查登录名是否在 mysql 数据库中，然后检查用户密码的有效性（如果存在）。但是我收到一个错误（非法格式的 XML 语法），我无法解决。我真的很困惑，主要是因为 netbeans 说这是一个 xml 语法错误，而我没有使用 xml。这是有问题的代码：

```
function validateLogin(login){

  login.addEventListener("input", function() {
    $value = login.value;
    if (<?php
    //connect to mysql
    mysql_connect(host, user, pass) or die(mysql_error());
    echo("<script type='text/javascript'>");
    echo("alert('MYSQL Connected.');");
    echo("</script>");
    //select db
    mysql_select_db() or die(mysql_error());
    echo("<script type='text/javascript'>");
    echo("alert('MYSQL Database Selected.');");
    echo("</script>");
    //query
    $result = mysql_query("SELECT * FROM logins") or die(mysql_error()); 
    //check results against given login
    while($row = mysql_fetch_array($result)){
      if($row[login] == $value){
        echo("true");
        exit(0);
      }
    }
    echo("false");
    exit(0);
      ?>) {
      login.setCustomValidity("Invalid Login. Please Click 'Register' Below.")
    } else {
      login.setCustomValidity("")
    }

  });
} 
```

该代码位于外部 js 文件中，错误在最后一行抛出。同样从阅读中我了解到最佳实践是不要混合 js 和 php 那么我将如何将它们分开但保持我需要的功能？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:37:26.073

您不能以这种方式混合 PHP 和 JavaScript，因为在您的*任何*JavaScript 在客户端执行之前，您的*所有*PHP 已经在服务器上执行。

 *该错误是因为客户端正在接收并且未能将其作为 JavaScript 执行：

```
function validateLogin(login){

  login.addEventListener("input", function() {
    $value = login.value;
    if (<script type='text/javascript'>alert('MYSQL Connected.');</script>...
// etc. 
```

要从客户端与 PHP 交互，您必须发出另一个 HTTP 请求——通过`<a>`单击、`<form>`提交或 Ajax 请求（[`jQuery.post`](http://api.jquery.com/jquery.post/)为简洁起见，请参阅[使用 XMLHttpRequest](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest)了解更多详细信息）：

```
function validateLogin(login){
  login.addEventListener("input", function() {
    $.post('/validateLogin.php', { login: login }, function (result) {
      if (result === "true") {
        login.setCustomValidity("Invalid Login. Please Click 'Register' Below.")
      } else {
        login.setCustomValidity("")
      }
    });
  });
} 
```

`/validateLogin.php`根据需要调整 URL，但为此 URL 创建一个 PHP 文件，类似于：

```
<?php
$value = $_POST['login'];

mysql_connect(host, user, pass) or die(mysql_error());
mysql_select_db() or die(mysql_error());

$result = mysql_query("SELECT * FROM logins") or die(mysql_error());
while($row = mysql_fetch_array($result)){
  if($row[login] == $value){
    echo("true");
    exit(0);
  }
}
echo("false");
exit(0);
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T22:40:03.457

怎么了？`<script>`您只需通过在您的条件中插入部分来破坏您的 JavaScript `if`。所以你得到`if (<script type='text/javascript'>alert('MYSQL Connected.');</script>...`等等......接下来的事情：你试图 match `$value`，这是 JavaScript 变量，`$row[login]`在 PHP 循环中 - 你没有`$value`那里！这些是分开的代码。都是错的。

Jonathan Lonowski 很好地解释了你应该如何做到这一点。*

# hadoop - HDFS 中的存储格式

> ID：10857880
> 
> 赞同：5
> 
> 时间：2012-06-01T22:00:54.570
> 
> 标签：hadoop, hdfs, storage

*HDFS 如何存储数据？*

我想以压缩方式存储大文件。

例如：我有一个 1.5 GB 的文件，默认复制因子为 3。

它需要 (1.5)*3 = 4.5 GB 的空间。

我相信目前没有对数据进行隐式压缩。

*有没有一种技术可以压缩文件并将其存储在 HDFS 中以节省磁盘空间？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:40:23.667

HDFS 将任何文件存储在许多“块”中。块大小可根据每个文件进行配置，但具有默认值（如 64/128/256 MB）

因此，给定一个 1.5 GB 的文件和 128 MB 的块大小，hadoop 会将文件分成大约 12 个块（12 x 128 MB ~= 1.5GB）。每个块也被复制了可配置的次数。

如果您的数据压缩得很好（如文本文件），那么您可以压缩文件并将压缩文件存储在 HDFS 中 - 与上述相同，因此如果 1.5GB 文件压缩到 500MB，那么这将存储为 4 个块。

但是，使用压缩时要考虑的一件事是压缩方法是否支持拆分文件 - 即您是否可以随机查找文件中的某个位置并恢复压缩流（例如 GZIp 不支持拆分，BZip2 支持）。

即使该方法不支持拆分，hadoop 仍会将文件存储在多个块中，但您将失去“数据局部性”的一些好处，因为这些块很可能会分布在您的集群中。

在您的 map reduce 代码中，Hadoop 默认安装了许多压缩编解码器，并且会自动识别某些文件扩展名（例如 GZip 文件的 .gz），让您不必担心输入/输出是否需要压缩。

希望这是有道理的

**编辑**回应评论的一些附加信息：

当从 Map Reduce 作业写入 HDFS 作为输出时，请参阅 FileOutputFormat 的 API，特别是以下方法：

*   setCompressOutput（作业，布尔值）
*   setOutputCompressorClass（作业，类）

将文件上传到 HDFS 时，是的，它们应该被预压缩，并使用该压缩类型的关联文件扩展名（开箱即用，hadoop 支持带有 .gz 扩展名的 gzip，因此 file.txt.gz 表示压缩文件)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T09:29:45.827

前段时间我试图在[这里](https://jaksky.wordpress.com/2014/06/22/hadoop-io-and-file-formats/)的一篇博文中总结这一点。本质上这是一个数据可拆分性的问题，因为文件被分成块，这些块是用于复制的基本块。名称节点负责跟踪属于一个文件的所有这些块。在选择压缩时，块是自治的很重要 - 并非所有编解码器都是可拆分的。如果格式 + 编解码器不可拆分，则意味着为了解压缩它需要在一个地方，这对 mapreduce 中的并行性有很大影响。基本上在单个插槽中运行。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T06:22:44.370

查看演示文稿[@Hadoop_Summit](http://www.slideshare.net/Hadoop_Summit/kamat-singh-june27425pmroom210cv2)，尤其是幻灯片 6 和幻灯片 7。

[![在此处输入图像描述](../Images/4dc6a3252d78665d098c2b436e89d62c.png)](https://i.stack.imgur.com/AIs0y.jpg)

[![在此处输入图像描述](../Images/f750eda9c6ed39b7fa804c257f075815.png)](https://i.stack.imgur.com/xctQm.jpg)

1.  如果 DFS 块大小为 128 MB，对于 4.5 GB 存储（包括复制因子 3），您需要 35.15（~36 个块）
2.  只有 bzip2 文件格式是可拆分的。在其他格式中，整个文件的所有块都存储在同一个 Datanode 中
3.  查看算法类型和类名和编解码器
4.  @Chris White 回答提供了有关如何在编写 Map 输出时启用压缩的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T15:01:20.060

这个问题的答案是首先了解当今 Hadoop 中可用的文件格式。现在 HDFS 中提供了可以管理文件格式和压缩技术的选择。使用 LZO 或 BZIP 替代显式编码和拆分。今天有许多格式支持块压缩和列压缩的特性。

存储格式是您定义如何存储信息的一种方式。这有时通常由文件的扩展名表示。比如我们知道图片可以有多种存储格式，PNG、JPG、GIF等。所有这些格式都可以存储同一张图片，但每种格式都有特定的存储特性。

在 Hadoop 文件系统中，您可以使用所有传统的存储格式（例如，如果您愿意，可以在 HDFS 上存储 PNG 和 JPG 图像），但您也有一些以 Hadoop 为中心的文件格式可用于结构化和非结构化数据。

**为什么了解这些格式很重要**

在任何性能权衡中，支持 HDFS 的应用程序（如 MapReduce、Hive、HBase 和 Spark）的一个巨大瓶颈是在特定位置查找相关数据所需的时间以及将数据写回另一个位置所需的时间。当您管理大型数据集时，这些问题会更加突出。Hadoop 文件格式已经演变为在许多用例中缓解这些问题。

选择合适的文件格式可以带来一些显着的好处：

1.  最佳阅读时间
2.  最佳写入时间
3.  文件的拆分或分区（因此您无需读取整个文件，只需读取其中的一部分）
4.  模式适应（允许字段更改数据集）压缩支持（不牺牲这些功能）

一些文件格式是为一般用途而设计的，另一些是为更具体的用例而设计的（比如为数据库提供动力），还有一些是为特定的数据特征而设计的。因此，在 Hadoop 中存储数据时确实有很多选择，并且应该知道在 HDFS 中以最佳方式存储数据。目前我去存储是ORC格式。

检查您的大数据组件（Spark、Hive、HBase 等）是否支持这些格式并做出相应的决定。例如，我目前正在将数据注入 Hive 并将其转换为 ORC 格式，这在压缩和性能方面对我有用。

Hadoop 的一些常见存储格式包括：

**纯文本存储（例如，CSV、TSV 文件、分隔文件等）**

数据按行排列，每一行都是一条记录。在典型的 UNIX 世界中，行由换行符 \n 终止。文本文件本质上是可拆分的。但是如果你想压缩它们，你必须使用支持拆分的文件级压缩编解码器，例如 BZIP2。这效率不高，在执行 MapReduce 任务时需要做一些工作。

**序列文件**

最初是为 MapReduce 设计的，因此很容易与 Hadoop MapReduce 进程集成。它们为每条记录编码一个键和一个值，仅此而已。以小于基于文本的格式的二进制格式存储。即使在这里，它也不会对键和值进行编码。序列文件的一个好处是它们支持块级压缩，因此您可以压缩文件的内容，同时还可以保持将文件拆分为多个片段以执行多个映射任务的能力。尽管根据 Parquet 和 ORC 等统计数据仍然没有效率。

**阿夫罗**

该格式直接在文件中对其内容的模式进行编码，从而允许您本地存储复杂的对象。它的文件格式带有附加的框架、序列化和反序列化框架。使用常规的旧序列文件，您可以存储复杂的对象，但您必须管理该过程。它还支持块级压缩。

**镶木地板**

这些天我最喜欢和热门的格式。它是一种列式文件存储结构，同时它对磁盘进行编码和写入。因此，数据集在水平和垂直方向上都进行了分区。面向列的文件格式的一个巨大好处是同一列中的数据往往被压缩在一起，这可以产生一些大规模的存储优化（因为同一列中的数据往往相似）。如果您的处理可以最佳地使用列存储，请尝试使用它。您可以参考列式存储的优点。

如果您定期切分和切割数据集，那么这些格式可能对您的应用程序的速度非常有益，但坦率地说，如果您的应用程序通常需要整行数据，那么列格式实际上可能会损害性能，因为以增加所需的网络活动。

**兽人**

ORC 代表 Optimized Row Columnar，这意味着它可以以比其他文件格式优化的方式存储数据。ORC 将原始数据的大小减少到 75%（例如：100GB 文件将变为 25GB）。结果，数据处理的速度也提高了。ORC 表现出比文本、序列和 RC 文件格式更好的性能。ORC 文件包含称为条纹的组中的行数据以及文件页脚。当 Hive 处理数据时，ORC 格式提高了性能。

它类似于 Parquet，但具有不同的编码技术。它不适用于此线程，但您可以在 Google 上查找差异。

# python - 在 neo4jrestclient 中构建 Lucene 查询？

> ID：10857888
> 
> 赞同：2
> 
> 时间：2012-06-01T22:01:26.027
> 
> 标签：python, rest, neo4j, lucene

我正在尝试遵循这些文档： [http](http://readthedocs.org/docs/neo4j-rest-client/en/latest/indices.html) ://readthedocs.org/docs/neo4j-rest-client/en/latest/indices.html 这很好用

```
from neo4jrestclient.client import GraphDatabase, Q
db = GraphDatabase("http://localhost:7474/db/data")
userIndex = db.nodes.indexes.get("index2")
print userIndex.query('username', "*")[:] 
```

根据文档，这也应该有效，但没有。

```
print userIndex.query(Q('username', "*"))[:] 
```

我在 pip 存储库中升级到了最新版本。这是一个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:02:14.520

我不确定这是否是[neo4j-rest-client](http://pypi.python.org/pypi/neo4jrestclient/)上的问题而不是[lucene-querybuilder](https://github.com/scholrly/lucene-querybuilder)。无论如何，您可以尝试使用如下参数`wildcard`：

```
print userIndex.query(Q('username', "*", wildcard=True))[:] 
```

告诉我它是否有效:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:05:57.710

这是/曾经是一个错误，我在这里提交： [https ://github.com/versae/neo4j-rest-client/issues/67](https://github.com/versae/neo4j-rest-client/issues/67)

# android - 如何在 Eclipse 中配置 Android NDK 的位置？

> ID：10857889
> 
> 赞同：1
> 
> 时间：2012-06-01T22:01:29.423
> 
> 标签：android, eclipse, android-ndk

${ndk.dir} 值是否设置为 Windows 中 PATH 环境变量的一部分，或者是否在 Eclipse 中的某处找到了设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:29:38.133

您可以在 Windows 中设置任何（在您的情况下为 NDK）路径环境 -[您](http://www.computerhope.com/issues/ch000549.htm)可以这样做。

在 Eclipse 中，您可以在项目属性中添加 NDK 构建器 - 请参阅[本手册](http://mobilepearls.com/labs/ndk-builder-in-eclipse/)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:33:59.357

我希望我的机器安装了 Eclipse……但我记得搜索了一段时间以找到相同的东西。最后它是这样的：

首选项 -> 安卓

（不在项目属性中）

# java - 用于 PDF 签名的 Java API（不允许 iText）

> ID：10857892
> 
> 赞同：1
> 
> 时间：2012-06-01T22:01:41.433
> 
> 标签：java, pdf, certificate, sign

我想使用允许我签署 PDF 文档的 Java API。每个人都在谈论 iText，但它的许可证上有一行，简直糟透了：

> 根据 GNU Affero 通用公共许可证第 7(b) 节，您必须在使用 iText 创建或操作的每个 PDF 中保留生产者行。

有替代方案吗？到目前为止，我发现的只是 iText 包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:09:23.130

我不知道其中是否有签名，但这里有一个开源产品[列表。](http://java-source.net/open-source/pdf-libraries)

顺便说一句，我用过的只是 iText。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:16:29.210

您没有讲述有关 Itext 许可的全部故事。如果您付款，该通知就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T16:09:44.883

试试 Apache 的 PDFBox ..

检查此示例[https://stackoverflow.com/a/13387484/2267723](https://stackoverflow.com/a/13387484/2267723)

或尝试旧版本的[iText 2.1.7](http://olex.openlogic.com/package_versions/download/9132?package_version_id=2802&path=https://olex-secure.openlogic.com/content/openlogic/itext/2.1.7/openlogic-itext-2.1.7-all-bin-1.zip) (GPL)，这是一个很好的例子：[单击](http://www.berthou.com/us/2007/11/28/sign-a-pdf-document/). 只是要知道您需要的 BouncyCastle 的工作版本是 bcprov JDK15, 1.46：[下载](http://repo2.maven.org/maven2/org/bouncycastle/bcprov-jdk15+/1.46/bcprov-jdk15+-1.46.jar)

祝你好运

# ruby-on-rails - 使用 Rails，在 date_select 字段上设置更改默认日期的最佳方法是什么？

> ID：10857893
> 
> 赞同：0
> 
> 时间：2012-06-01T22:01:43.540
> 
> 标签：ruby-on-rails, ruby

我是 Ruby/Rails 的新手，这是我的第一个问题。我正在开发一个具有月份模型和一个月有许多交易的交易模型的财务计划。我还使用了此处的 awesome_nested_fields gem：[https](https://github.com/lailsonbm/awesome_nested_fields) ://github.com/lailsonbm/awesome_nested_fields 。

一切正常，但是当我添加新交易时，日期默认为今天。我希望它默认为添加到当月的最后一笔交易的日期。例如，如果我添加了一个日期为 2012 年 5 月 15 日的事务，则下一个事务应默认为该日期。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:23:13.143

所以假设你在你的控制器中做这样的事情：

```
class TransactionsController < ApplicationController

  def new
    @transaction = current_user.transactions.build
  end
end 
```

将其更改为：

```
class TransactionsController < ApplicationController

  def new
    @transaction = current_user.transactions.build(date: current_user.next_transaction_date)
  end
end 
```

然后在您的用户中，您可以确定要使用的日期

```
class User < ActiveRecord::Base

  def last_transaction_in_current_month
    transactions.where("date >= ?", Date.today.beginning_of_month).order("date desc").first
  end

  def next_transaction_date
    return Date.today if last_transaction_in_current_month.nil?
    last_transaction_in_current_month
  end
end 
```

# python - Python字典中的反向键（由列表组成）和值

> ID：10857907
> 
> 赞同：2
> 
> 时间：2012-06-01T22:03:13.577
> 
> 标签：python, dictionary, list-comprehension, state-machine

我一直试图从这里的其他帖子中弄清楚这一点，但做不到。

我有一本 Python 字典

```
old_dict = { (1,'a') : [2],
          (2,'b') : [3,4],
          (3,'x') : [5],
          (4,'y') : [5],
          (5,'b') : [3,4], 
          (5,'c') : [6],
          } 
```

我需要扭转这一点，因此我将拥有：

```
new_dict = { (6,'c') : [5],
          (5,'x') : [3],
          (5,'y') : [4],
          (4,'b') : [5, 2],
          (3,'b') : [5, 2], 
          (2,'a') : [1],
          } 
```

（这描述了有限状态机的边缘，我需要向后运行它：它必须像以前一样接受反向输入）

例如，在 old_dict 中，第一个键是 list `(1, 'a') : [2]`，现在，这个应该变成`(2, 'a'), [1]`... 或`(4,'y') : [5]`变成`(5,'y') : [4]`等 - 我希望我的意思可以理解。

我一直在尝试用列表推导来解决这个问题，但还没有成功。

**更新：**我尝试[了 FC](https://stackoverflow.com/a/10858286/577088)的建议，但不知何故我无法让代码工作。我将它插入到一个函数中，如下所示：

```
old_dict1 = { (1,'a') : [2],
          (2,'b') : [3,4],
          (3,'x') : [5],
          (4,'y') : [5],
          (5,'b') : [3,4], 
          (5,'c') : [6],
          }

def reverse_dict(old_dict):
    new_dict = {}
    add_to_dict = new_dict.setdefault

    map(lambda kv: add_to_dict(kv[0], []).append(kv[1]),   
        sum([[((x, k[1]), k[0]) for x in v] for k, v in old_dict.items()],
            []))        # sum will take this to start adding
    return new_dict

new_dict1 = reverse_dict(old_dict1)

print(new_dict1) 
```

但我只得到一个空字典`{}`

难道我做错了什么 ？（我对Python的了解真的很少，所以如果我犯了一个太愚蠢的错误，请原谅我......）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T22:11:07.577

这足够复杂，我不会为列表推导而烦恼。另外，我假设您不是在寻找任何严格顺序的值列表。

```
new_dict = {}
for k, vals in old_dict.items():
    k_num, k_char = k
    for num in vals:
        new_dict.setdefault((num, k_char), []).append(k_num) 
```

或使用`defaultdict`：

```
new_dict = collections.defaultdict(list)
for k, vals in old_dict.items():
    k_num, k_char = k
    for num in vals:
        new_dict[(num, k_char)].append(k_num) 
```

对于那些对尽可能简洁感兴趣的人，我想到这个更压缩的版本也是一种选择。从可读性的角度来看，我不确定我对此有何看法，因此我更改了变量名称以更清晰：

```
new_dict = collections.defaultdict(list)
for (num_in, char_in), nums_out in old_dict.items():
    for num_out in nums_out:
        new_dict[(num_out, char_in)].append(num_in) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:51:38.140

这适用于您的数据，把它当作一个**丑陋的黑客只是为了好玩**。

最好用更多的代码行来做，这样更容易理解，但有时我无法抗拒写这个装置的诱惑。

希望能帮助到你。

```
def reverse_dict(old_dict):
    """
    >>> sorted(reverse_dict({(1,'a'): [2],
    ...               (2,'b'): [3,4],
    ...               (3,'x'): [5],
    ...               (4,'y'): [5],
    ...               (5,'b'): [3,4], 
    ...               (5,'c'): [6],
    ...              }).items())
    [((2, 'a'), [1]), ((3, 'b'), [2, 5]), ((4, 'b'), [2, 5]), ((5, 'x'), [3]), ((5, 'y'), [4]), ((6, 'c'), [5])]
    """
    new_dict = {}
    add_to_dict = new_dict.setdefault       # you could use a [defaultdict][1] instead

    map(lambda kv: add_to_dict(kv[0], []).append(kv[1]),   # if kv[0] not in dict get [] and add to it
        sum([[((x, k[1]), k[0]) for x in v] for k, v in old_dict.items()],
            []))        # sum will take this to start adding
    return new_dict 
```

要测试代码，只需将其复制到一个文件`so.py`并像这样运行它：

```
$ python -m doctest so.py -v
Trying:
    sorted(reverse_dict({(1,'a'): [2],
                  (2,'b'): [3,4],
                  (3,'x'): [5],
                  (4,'y'): [5],
                  (5,'b'): [3,4], 
                  (5,'c'): [6],
                 }).items())
Expecting:
    [((2, 'a'), [1]), ((3, 'b'), [2, 5]), ((4, 'b'), [2, 5]), ((5, 'x'), [3]), ((5, 'y'), [4]), ((6, 'c'), [5])]
ok
1 items had no tests:
    so
1 items passed all tests:
   1 tests in so.reverse_dict
1 tests in 2 items.
1 passed and 0 failed.
Test passed. 
```

它用于[`doctest`](http://docs.python.org/library/doctest.html)更容易测试它是否在做你想做的事。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T05:27:15.757

我认为您对 a 的目的的理解存在问题`dict`。`dict`不应将数据结构视为以任何特定方式排序，因为它使用哈希表来访问元素。您应该阅读[文档，](http://docs.python.org/tutorial/datastructures.html#dictionaries)`.items()` [这里](http://docs.python.org/library/stdtypes.html#typesmapping)关于实现细节的注释也很重要。事实证明，实现可能会给你你似乎期望的顺序，但你不应该指望它。

如果顺序对您很重要，那么您应该`list`至少在代码中顺序很重要的部分使用 a。使用`.items()`你的方法`dict`来获取对的列表`(key,value)`，然后你可以使用列表上的常用排序方法以任何你想要的方式对它们进行排序。

# objective-c - 串行调度队列中的块未执行 - GCD iOS Objective-C

> ID：10857910
> 
> 赞同：2
> 
> 时间：2012-06-01T22:03:54.193
> 
> 标签：objective-c, ios, queue, grand-central-dispatch

我在主队列中有一个 for 循环排队块，如下所示：

```
 for (int x=0; x<5; x++) {
    double delayInSeconds = x * .03;
      dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
      dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        ... code here ...
      }
  } 
```

只有第一个块被执行。我已经验证循环工作正常，循环正确的次数并且没有引发异常或错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T23:03:32.907

使用此代码：

```
for (int x=0; x<5; x++) {
    double delayInSeconds = x * .03;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        NSLog(@"Blah!!");
    });
} 
```

“Blah”被注销 5 次。我猜您发布的代码与您在应用程序中的代码不同？我必须添加 ); 到 dispatch_after 调用结束。

# java - mirrorEnds 谜题没有给出错误的线索

> ID：10857913
> 
> 赞同：1
> 
> 时间：2012-06-01T22:04:04.630
> 
> 标签：java, string

我正在尝试解决一个名为[mirrorEnds](http://codingbat.com/prob/p139411)的编码问题。我的解决方案失败了，但我没有从网站得到任何有用的反馈，只有失败的测试运行：

[![失败的测试运行图像](../Images/99b40e7ec5340fc871b0171bd3c67bdc.png)](https://i.stack.imgur.com/zNLN5.png)

还有我的代码（我改变`string`是`str`因为我习惯了“str”的问题）：

```
 public String mirrorEnds(String string) {

 String str = string;
 StringBuilder sb = new StringBuilder();
 int beg = 0;
 int end = str.length()-1;

 while(beg < end)
 {
   if(str.charAt(beg)==str.charAt(end))
    sb.append(str.substring(beg,beg+1));
   else
    break;

   ++beg;
   --end;      
 }

 if(beg==end)
  return str;
 else
  return sb.toString();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:20:40.837

这是我的，因为它的价值（不多，我知道，但我在你发现错误的时候写它..）

```
private String mirrorEnds(String string) {
    final char[] chars = string.toCharArray();
    final int n = chars.length;
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < n; i++) {
        if (chars[i] != chars[n - i - 1])
            break;
        sb.append(chars[i]);
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:15:09.930

呸。我找到了。实例是“abba”

需要将“if(beg==end)”更改为“if(beg>=end)”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T14:40:20.683

这是我的：

```
public String mirrorEnds(String str) {
    String res = "";
    int count = str.length() - 1;

    for(int i = 0;i < str.length();i++)
    {
        if(str.charAt(i) == str.charAt(count))
        res += str.substring(i, i + 1);
        else
            break;
        count--;
    }

    return res;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T03:05:32.957

制作辅助方法既高效又使工作更轻松，逻辑更清晰，为初学者推荐策略，剖析逻辑，然后将其放在一起，如codingBat的fizzBu​​zz问题所见，这些问题构建成真正的fizzBu​​zz。即使有更短的解决方案，这也显示了所使用的逻辑的全部范围。

```
public String mirrorEnds(String string) {
  String reversed = reverseString(string); //the reversed version 
  String result = ""; 
  for(int a = 0; a < string.length(); a++){
  if(string.charAt(a) == reversed.charAt(a)){ //keep going...
  result += string.charAt(a);
  }
  else if(string.charAt(a) != reversed.charAt(a)){
  break; //error, stop
  }  
  }
  return result;
}
public String reverseString(String s){
  String reversed = "";
  for(int a = s.length() - 1; a >= 0; a--){
  reversed += s.charAt(a);
  }
  return reversed;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-21T06:05:35.290

```
public String mirrorEnds(String string) {
    String s = "";
    String str = "";

    for (int i=string.length()-1; i>=0; i--)
    {
        s = s + string.charAt(i);
    }

    for (int j=0; j<string.length(); j++)
    {
        if (s.charAt(j) == string.charAt(j))
        {
            str = str + string.charAt(j);
        }

        if (s.charAt(j) != string.charAt(j))
        {
            break;
        }
    }

    return str;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-02T11:13:03.127

```
public static String mirrorEnds(String string) {
    for (int i = 0; i < string.length(); i++) {
        if(string.charAt(i) != string.charAt(string.length()-i-1)){
            return string.substring(0,i);
        }
        else if(i==string.length()-1) return string;
    }       
    return "";    
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-04T04:32:34.673

### 这是我的解决方案，希望对你有帮助

```
public String mirrorEnds(String string) {

  int mid = string.length() / 2;
  String s = "";

  for (int i = 0, j = string.length()-1; i <= mid; i++, j--) {

    if (i == mid) {
      return string;
    }

    if (string.charAt(i) == string.charAt(j)) {
      s += string.charAt(i) + "";
    } else {
      break;
    }

  }

  return s;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-22T05:02:15.217

这是我的。我的做法有点不同。

```
public String mirrorEnds(String string) {
      //Create a string that we will eventually return.
      String ret = "";
      //Create a for loop that takes in chars from both ends.
      for (int i = 0; i < string.length(); i++)
      {
        //Create one and two characters in order to simplify it.
        char one = string.charAt(i);
        char two = string.charAt(string.length() - 1 - i);
        //If the front and back character in the iteration 
        //equal each other, then we add the character to the return string.
        if (one == two)
        {
          ret = ret + one;
        }
        //Otherwise, we end the loop because  we don't want to
        //Have a loopback problem.
        else
        {
          break;
        }
      }
      //Return the string that we are working on.
      return ret;
    } 
```

# entity-framework - 无法使用 EF 删除

> ID：10857914
> 
> 赞同：0
> 
> 时间：2012-06-01T22:04:04.820
> 
> 标签：entity-framework

发现问题...我在 context.entity 上设置了 MergeOption.NoTracking ...叹息

不知道我做错了什么。

无法删除该对象，因为它在 ObjectStateManager 中找不到。

```
 var deleteOrders = db.TABLE.Where(x => x.WCCR_ID == WccrId && x.ADAM == null).ToList();
        foreach (var item in deleteOrders)
        {

            db.TABLE.DeleteObject(item);
        }
        db.SaveChanges(); 
```

我尝试附加项目 db.Attach(item)，但这会引发错误“具有相同密钥的对象已存在”。

谢谢你的帮助。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:16:39.093

你的代码看起来不错。尝试使用：

```
var deleteOrders = db.TABLE.Where(x => x.WCCR_ID == WccrId && x.ADAM == null)
                           .ToList();
        foreach (var item in deleteOrders)
        {
            db.Entry(item).State = System.Data.EntityState.Deleted;            
        }
        db.SaveChanges(); 
```

**更新**

EF 4.0 使用`ObjectContext`该类。

```
using(YourContext ctx = new YourContext())
{
   ctx.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Deleted);
} 
```

EF 4.1 使用定义`DbContext`方法 like`Set<T>`和的类`Entry`。

```
using(YourContext ctx = new YourContext())
{
   ctx.Entry(entity).State = System.Data.EntityState.Deleted;
} 
```

**更新 2**

NuGet 包仅包含 EF 4.1 运行时，不包含用于将 DbContext 与 Model First 和 Database First 开发一起使用的 Visual Studio 项模板。

下载：[http ://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=26825](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=26825)

# php - 在本地运行站点 Hompage 有效，但链接无效。使用 MAMP、PHP、MySQL

> ID：10857916
> 
> 赞同：0
> 
> 时间：2012-06-01T22:04:23.420
> 
> 标签：php, mysql, mamp

我在 MAC OSX 10.6.8 上使用 MAMP 在本地运行我的网站，当在我的浏览器中输入时，主页会出现并且看起来很棒，但是如果单击以移动到另一个页面说注册它会给我

在此服务器上未找到请求的 URL /signup。

但是如果我输入

//localhost/signup.php 它可以工作。

抱歉，如果这是一个非常明显的问题，但这是我第一次使用 MAMP

亲切的问候西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:23:55.707

该站点似乎正在使用 URL 重写 (mod_rewrite)。这必须正确设置。

# .net - 记录 Intellitrace？

> ID：10857920
> 
> 赞同：2
> 
> 时间：2012-06-01T22:04:53.703
> 
> 标签：.net, intellitrace

是否可以在抛出异常时将 Intellitrace 文件生成到文件中？我从未使用过 Intellitrace，但是通过跟踪 Intellitrace 文件而不是煞费苦心地检查日志文件来调试错误不是很好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:26:32.460

IntelliTrace 无法根据特定事件开始记录。但是，您可以使用 IntelliTrace 独立收集器针对 Web 或客户端应用程序进行收集，然后打开并分析 IntelliTrace 文件。在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/hh398365 (v=VS.110).aspx](http://msdn.microsoft.com/en-us/library/hh398365(v=VS.110).aspx)

# asp.net - Request.Form 在 ASP .NET 的 TextArea 中以不同的方式处理换行符

> ID：10857921
> 
> 赞同：0
> 
> 时间：2012-06-01T22:05:13.937
> 
> 标签：asp.net, webforms, newline

我有两个页面，上面有文本区域控件。当用户提交一页时，换行符被视为 char(13) + char(10)。但在另一页上，换行符被视为 char(10)。我通过查看 Request.Form 字典确认了这一点。

这两个页面托管在同一个 ASP .NET 4.0 Web 窗体应用程序中，从标记的角度来看，这些页面看起来完全相同。我在同一浏览器中以同一用户身份登录。

当我使用 JavaScript 检查浏览器控件中是否存在 char 10 和 char 13 时，两个页面都只包含一个 char(10)。

似乎 IIS/ASP.NET 配置为在两个页面上以不同的方式处理表单请求，但我无法弄清楚差异在哪里。是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:17:23.700

不同的操作系统使用不同的字符组合来表示一个新行。

在 Windows 上是 CR + LF，在 Linux 上是 LF，在 Mac 上是 CR。

CR = 回车 LF = 换行

如果您在 Notepad++ 中复制/粘贴文本并选择“查看”>“显示所有字符”，则可以看到行尾字符。

# nosql - NoSQL 数据库中的规范化关系数据

> ID：10857922
> 
> 赞同：1
> 
> 时间：2012-06-01T22:05:32.153
> 
> 标签：nosql, elasticsearch

我正在考虑使用 ElasticSearch 作为数据库。我需要以下内容：

1.  层次结构/分类（例如糖果：巧克力：酒吧），
2.  将产品链接到特定类别以及该类别的父类别（例如，如果浏览“糖果”类别，我应该看到所有巧克力棒、所有巧克力块、棒棒糖等，但在酒吧类别级别，我应该只看到巧克力棒）。

在 nosql 数据库中，或者更具体地说，在 ElasticSearch 中要采用什么方法？

ElasticSearch 中是否有办法规范化和表示关系 - 例如，如果我更改了类别的名称，我不想重新索引所有产品......

我还考虑过将 neo4j 与 elasticsearch 集成 - 使用 neo4j 作为记录数据库系统，并使用 elasticsearch 来索引 neo4j 中的节点。有人对这种方法有任何想法吗？

谢谢

# javascript - 是否有任何工具可以将 JavaScript 重写为每个函数形式一个 var？

> ID：10857923
> 
> 赞同：1
> 
> 时间：2012-06-01T22:05:44.240
> 
> 标签：javascript, formatting

我有大量的 JavaScript 想要重新编写以遵循每个函数一个变量声明的形式。是否有任何工具可以自动执行此操作（并且*不会*与其他代码格式混淆）？

我意识到大多数缩小器都会这样做，但是我的目标只是改变代码的这一方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:09:53.817

由于您的格式限制和大多数美化器的工作方式，这是一个难题，但如果有什么可以做到的，那就是 UglifyJS。具体看`--lift-vars`部分：[https ://github.com/mishoo/UglifyJS#readme](https://github.com/mishoo/UglifyJS#readme)

# python - 删除 Pandas 数据框中的 NaN/NULL 列？

> ID：10857924
> 
> 赞同：67
> 
> 时间：2012-06-01T22:05:44.497
> 
> 标签：python, pandas, dataframe, nan

我有一个`dataFrame`熊猫，其中几列都有空值。是否有内置函数可以让我删除这些列？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-06-02T04:52:48.933

是的，`dropna`。请参阅[http://pandas.pydata.org/pandas-docs/stable/missing_data.html](http://pandas.pydata.org/pandas-docs/stable/missing_data.html)和`DataFrame.dropna`文档字符串：

```
Definition: DataFrame.dropna(self, axis=0, how='any', thresh=None, subset=None)
Docstring:
Return object with labels on given axis omitted where alternately any
or all of the data are missing

Parameters
----------
axis : {0, 1}
how : {'any', 'all'}
    any : if any NA values are present, drop that label
    all : if all values are NA, drop that label
thresh : int, default None
    int value : require that many non-NA values
subset : array-like
    Labels along other axis to consider, e.g. if you are dropping rows
    these would be a list of columns to include

Returns
-------
dropped : DataFrame 
```

要运行的具体命令是：

```
df=df.dropna(axis=1,how='all') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T15:15:45.507

## 这是一个简单的函数，您可以通过传递数据帧和阈值直接使用它

```
df
'''
     pets   location     owner     id
0     cat  San_Diego     Champ  123.0
1     dog        NaN       Ron    NaN
2     cat        NaN     Brick    NaN
3  monkey        NaN     Champ    NaN
4  monkey        NaN  Veronica    NaN
5     dog        NaN      John    NaN
''' 
```

* * *

```
def rmissingvaluecol(dff,threshold):
    l = []
    l = list(dff.drop(dff.loc[:,list((100*(dff.isnull().sum()/len(dff.index))>=threshold))].columns, 1).columns.values)
    print("# Columns having more than %s percent missing values:"%threshold,(dff.shape[1] - len(l)))
    print("Columns:\n",list(set(list((dff.columns.values))) - set(l)))
    return l

rmissingvaluecol(df,1) #Here threshold is 1% which means we are going to drop columns having more than 1% of missing values

#output
'''
# Columns having more than 1 percent missing values: 2
Columns:
 ['id', 'location']
''' 
```

现在创建不包括这些列的新数据框

```
l = rmissingvaluecol(df,1)
df1 = df[l] 
```

**PS：您可以根据您的要求更改阈值**

## 奖励步骤

您可以找到每列缺失值的百分比（可选）

```
def missing(dff):
    print (round((dff.isnull().sum() * 100/ len(dff)),2).sort_values(ascending=False))

missing(df)

#output
'''
id          83.33
location    83.33
owner        0.00
pets         0.00
dtype: float64
''' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T23:33:15.603

另一种解决方案是在非空位置创建一个具有 True 值的布尔数据框，然后获取具有至少一个 True 值的列。这将删除具有所有 NaN 值的列。

```
df = df.loc[:,df.notna().any(axis=0)] 
```

如果要删除具有至少一个缺失 (NaN) 值的列；

```
df = df.loc[:,df.notna().all(axis=0)] 
```

这种方法在删除包含空字符串、零或基本上任何给定值的列时特别有用。例如;

```
df = df.loc[:,(df!='').all(axis=0)] 
```

删除具有至少一个空字符串的列。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-06-29T06:41:01.610

从数据框中删除所有空列的功能：

```
def Remove_Null_Columns(df):
    dff = pd.DataFrame()
    for cl in fbinst:
        if df[cl].isnull().sum() == len(df[cl]):
            pass
        else:
            dff[cl] = df[cl]
    return dff 
```

此函数将从 df 中删除所有 Null 列。

# ios - NSPredicate，使用一对多关系的子集获取结果

> ID：10857930
> 
> 赞同：2
> 
> 时间：2012-06-01T22:06:31.627
> 
> 标签：ios, core-data, nspredicate, nsfetchedresultscontroller, nsfetchrequest

我正在使用 Core Data 和`NSFetchedResultsController`.

我的数据模型如下所示：

`Product`一对多的关系称为`dataLines`. 该`dataLine`实体有一个属性名称`theWeek`。

我想取所有`Product`的地方`dataLines.theWeek == someValue`。这可以通过子查询轻松完成。但这会返回所有数据线。如果 dataLines 仅带有 ，是否可以创建一个`NSPredicate`返回和 的子集？`Product``dataLines == someValue`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T11:15:39.650

您想要实现的目标可以通过两种方式实现：

使用子查询

```
[NSPredicate predicateWithFormat:@"SUBQUERY(dataLines, $x, $x.theWeek == %@).@count > 0)", [NSNumber numberWithInt:18]]; 
```

或 ANY 修饰符

```
[NSPredicate predicateWithFormat:@"ANY dataLines.theWeek == %@", [NSNumber numberWithInt:18]]; 
```

如果您需要检查多个值，还可以执行以下操作：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(dataLines, $x, $x.theWeek == %@ or $x.theWeek == %@).@count > 0)", [NSNumber numberWithInt:18], [NSNumber numberWithInt:19]]; 
```

这同样适用于`ANY`修饰符。`ANY ... OR ANY ...`.

也许如果您分享一些代码，我们可以帮助您。

PS我想你不使用标量值并且`theWeek`是一个数字。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:56:26.883

你应该`dataLine`取而代之的财产。假设您`Product`和`dataLine`实体通过关系连接，`someRelation`那么您可以尝试此代码；

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:[NSEntityDescription entityWithName:@"dataLine" inManagedObjectContext:self.managedObjectContext]];
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"dataLines.week == %@",theWeek]];

NSMutableArray *tmpProduct [[NSMutableArray init] alloc];
NSMutableArray *tmpArray = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

for (dataLine *theDataLine in tmpArray);
NSLog(@"%@",theDataLine.someRelation.name);
tmpProduct = theDataLine.someRelation.name; 
```

然后你可以打电话`tmpProduct`来打电话或在表格视图中显示你的产品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:25:18.373

为“产品”实体创建一个获取请求：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity: [NSEntityDescription entityForName:@"Product" ...]] 
```

然后使用带有“ANY”的产品的属性/属性创建一个谓词：

```
[fetchRequest setPredicate:
  [NSPredicate predicateWithFormat:@"ANY dataLines.theWeek == %@", <whatever week>]]; 
```

然后执行 fetch 以获取具有至少一个 Product 的数组`<whatever week>`。

一般参见“获取托管对象”、NSPredicate 和相关文档。

# c# - 如何在没有 DI 的情况下在紧密耦合的业务\数据层上启用单元测试？

> ID：10857932
> 
> 赞同：3
> 
> 时间：2012-06-01T22:06:51.033
> 
> 标签：c#, unit-testing, dependency-injection

我正在开发一个较旧的 3 层设计项目，添加的任何新功能都必须是可单元测试的。

问题是业务层/数据层紧密耦合，如下面的示例所示。BL 只是更新了一个数据层对象……所以用这种方式模拟几乎是不可能的。我们没有实现任何依赖注入，所以构造函数注入是不可能的。那么修改结构以便在不使用 DI 的情况下模拟数据层的最佳方法是什么？

```
public class BLLayer()
{

   public GetBLObject(string params)
   {
     using(DLayer dl = new DLayer())
     {  
        DataSet ds = dl.GetData(params);

        BL logic here....

     }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T22:12:05.030

您并不排除构造函数注入*本身*，您只是没有设置 IOC 容器。没关系，你不需要一个。你可以做穷人的依赖注入，仍然保持构造函数注入。

用接口包装 DataLayer，然后创建一个工厂来`IDataLayer`根据命令生成对象。将此作为字段添加到您尝试注入的对象中，将所有内容替换`new`为对工厂的调用。现在您可以注入您的假货进行测试，如下所示：

```
interface IDataLayer { ... }
interface IDataLayerFactory 
{
   IDataLayer Create();
}    

public class BLLayer()
{
  private IDataLayerFactory _factory;

   // present a default constructor for your average consumer
  ctor() : this(new RealFactoryImpl()) {} 

  // but also expose an injectable constructor for tests
  ctor(IDataLayerFactory factory)
  { 
    _factory = factory;
  }  

  public GetBLObject(string params)
  {
    using(DLayer dl = _factory.Create())  // replace the "new"
    {  
      //BL logic here....    
    }
  }
} 
```

不要忘记在实际代码中使用您要使用的*实际工厂的默认值。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T14:02:40.717

依赖注入只是属于“控制反转”这一概念的众多模式之一。主要标准是在组件之间提供“接缝”，以便您可以分开 简而言之，给猫剥皮的方法不止一种。

依赖注入本身有几个派生类：构造函数注入（通过构造函数传入的依赖项）、属性注入（表示为读/写属性的依赖项）和方法注入（将依赖项传递给方法）。这些模式假定类是“关闭以供修改”并公开它们的依赖项以供消费者更改。遗留代码很少以这种方式设计，并且系统范围的架构更改（例如迁移到构造函数注入和 IoC 容器）并不总是直截了当的。

其他模式涉及将物体的分辨率和/或构造与测试对象分离。像工厂这样的简单的四人帮模式可以创造奇迹。服务定位器就像一个全局对象工厂，虽然我不是这种模式的忠实拥护者，但它可以用来解耦依赖关系。

在您上面概述的示例中，测试模式“要测试的子类”将允许您引入接缝而无需系统范围的重新架构。在该模式中，您将对象创建调用（如“new DLayer()”）移至虚拟方法，然后创建主题的子类。

Micheal Feather 的“使用遗留代码”有一个模式和技术目录，您可以使用这些模式和技术将遗留代码置于允许您转向 DI 的状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T08:38:01.390

如果`DLayer`仅在`GetBLObject`方法中使用，我将在方法调用中注入工厂。类似于：（以@PaulPhillips 示例为基础）

```
public GetBLObject(string params, IDataLayerFactory dataLayerFactory)
   {
       using(DLayer dl = dataLayerFactory.Create())  // replace the "new"
       {  
            //BL logic here....    
       }
   } 
```

但是，您真正想要在业务层中使用的似乎是`DataSet`. 所以另一种方法是让in 方法调用而`GetBLObject`不是. 为了完成这项工作，您可以创建一个类来处理从. 例如：`DataSet``string param``DataSet``DLayer`

```
public class CallingBusinesslayerCode
{
    public void CallingBusinessLayer()
    {
        // It doesn't show from your code what is returned
        // so here I assume that it is void. 
        new BLLayer().GetBLObject(new BreakingDLayerDependency().GetData("param"));
    }
}

public class BreakingDLayerDependency
{
    public DataSet GetData(string param)
    {
        using (DLayer dl = new DLayer()) //you can of course still do ctor injection here in stead of the new DLayer() 
        {
            return dl.GetData(param);
        }
    }
}

public class BLLayer
{
    public void GetBLObject(DataSet ds)
    {
        // Business Logic using ds here.
    }
} 
```

一个警告：模拟`DataSet`（在此解决方案和 Paul Phillips 解决方案中都必须这样做）可能非常麻烦，因此对此进行测试是可能的，但不一定很有趣。

# linq - 如何使用 LINQBridge 转换 GetFuncType

> ID：10857935
> 
> 赞同：2
> 
> 时间：2012-06-01T22:07:38.647
> 
> 标签：linq, linqbridge

我有一个使用 .net 的客户端，我正在使用 LINQBride 和一些使用 LINQ 的现有代码。我对 linq 不太了解，但想知道是否可以使用 LINQBridge 快速转换此表达式

```
DynamicMethod.CreateDelegate(Expression.GetFuncType(typeof(IDataReader), type)); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:47:16.550

LinqBridge 只实现 Linq to Objects，它不支持表达式。但是您可以使用反射实现类似的效果：

```
static Type GetFuncType(params Type[] typeArgs)
{
    string typeName = "System.Func`" + typeArgs.Length;
    Type genericTypeDef = typeof(Func<>).Assembly.GetType(typeName); // Func<,...,>
    return genericTypeDef.MakeGenericType(typeArgs); // Func<TArg1, ..., TResult>
} 
```

# autoconf - AC_SUBST 带有动态变量名

> ID：10857940
> 
> 赞同：1
> 
> 时间：2012-06-01T22:08:10.570
> 
> 标签：autoconf, m4

我正在尝试创建一个 m4 宏，它基本上调用 AC_CHECK_SIZEOF(type) 然后使用 AC_SUBST 定义该变量以进行替换。所以给定输入：

`AX_CHECK_SIZEOF_AND_SUBST(int, 4)`

我希望将所有出现的`@SIZEOF_INT@`替换为 4

到目前为止，这是我想出的，但显然不起作用：

```
AC_DEFUN([AX_CHECK_SIZEOF_AND_SUBST], [
    AC_CHECK_SIZEOF($1, $2)
    NAME=$(echo -n "SIZEOF_$1" | tr "a-z" "A-Z" | tr '*' 'P' | tr -c 'A-Z0-9' '_')
    echo "NAME=$NAME"
    AC_SUBST($NAME, $$NAME)
]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:38:15.360

您尝试做的问题是`AC_CHECK_SIZEOF`实际上并没有定义一个名为`SIZEOF_INT`. 在 2.68 中，您想要的变量是 named `ac_cv_sizeof_int`，但您不应该使用它，因为名称在以后的版本中可能会发生变化。该值也写入 confdefs.h，因此另一种获取方法是：

```
AC_PROG_AWK
AC_CHECK_SIZEOF([int])
SIZEOF_INT=$($AWK '/SIZEOF_INT/{print $3}' confdefs.h)
AC_SUBST([SIZEOF_INT]) 
```

（阅读 confdefs.h 也是未记录的行为，并且在 autoconf 的未来版本中可能会发生变化，但可能比查看 $ac_cv_sizeof_int 更稳定。可能也不太稳定。;）YMMV）

要定义您的宏（请注意我对命名约定的评论），您可以这样做：

```
AC_DEFUN([wrp_CHECK_SIZEOF_AND_SUBST], [
    AC_REQUIRE([AC_PROG_AWK])
    AC_CHECK_SIZEOF([$1])
    m4_toupper(SIZEOF_$1)=$($AWK '
        /SIZEOF_[]m4_toupper($1)/{print $[]3}' confdefs.h)
    AC_SUBST(m4_toupper(SIZEOF_$1))
]) 
```

上面的版本不处理`int *`，但为简单起见，我将保留它而不是用更通用的版本替换它：

```
AC_DEFUN([wrp_CHECK_SIZEOF_AND_SUBST], [
    AC_REQUIRE([AC_PROG_AWK])
    AC_CHECK_SIZEOF([$1])
    m4_pushdef([name],SIZEOF_[]m4_toupper(m4_translit($1,[ *],[_p])))
    name=$($AWK '/name/{print $[]3}' confdefs.h)
    AC_SUBST(name)
    m4_popdef([name])
]) 
```

注意：我认为`$()`在可移植的配置脚本中应该避免使用这种符号，并且应该用反引号代替。但是，我发现反引号很可怕。

# javascript - JavaScript中异步Ajax调用的测试结果

> ID：10857943
> 
> 赞同：0
> 
> 时间：2012-06-01T22:08:25.033
> 
> 标签：javascript, jquery, asynchronous

我有一个使用 jQuery 的函数，如下所示：

```
function populate_messages_node() {
    $.ajax({url: "/messages", type: "GET", success: populate_recent_messages});
} 
```

我想为此功能编写一个集成测试。我的问题是测试：

```
function test_simple() {
    populate_messages_node();
    // assert node content here
} 
```

...不会等待 Ajax 成功方法 (populate_recent_messages) 完成它的工作。对于这个微不足道的例子，做的`$.ajaxSetup({async:false})`工作，但我担心这并不总是正确的。对于更复杂的场景，将会有大量这样的测试。

我想我的问题真的是：有没有办法等待 Javascript 中的 XHR/Websocket 操作完成？

我不希望修改生产代码（populate_messages_node），但从 .ajax() 返回 xhr 结果是可以的。（对于没有找到可以准确描述此问题的规范 SO 帖子，我提前道歉。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:13:05.803

您可以将[延迟对象](http://api.jquery.com/category/deferred-object/)从`populate_message_node()`then 挂钩返回到完整事件，如下所示。

```
function populate_messages_node() {
    return $.ajax({url: "/messages", type: "GET", success: populate_recent_messages});
}

function test_simple() {
    populate_messages_node().complete(function(jqxhr){ 
    // assert node content here
    });
} 
```

# xcode - 自动布局坚持错误的一面

> ID：10857944
> 
> 赞同：2
> 
> 时间：2012-06-01T22:08:48.003
> 
> 标签：xcode, autolayout

我有一个复选框，它粘在视图的左侧。我希望它贴在控件旁边，或者与视图右侧的距离相同。我如何在 Xcode (IB) 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:26:23.783

编辑器 -> Pin -> 到 Superview 的尾随空格

然后我可以删除不好的“Leading Space to Superview”

# javascript - 我的正则表达式与数字不匹配

> ID：10857947
> 
> 赞同：1
> 
> 时间：2012-06-01T22:09:28.217
> 
> 标签：javascript, regex

我是制作正则表达式的新手，所以这可能只是一个愚蠢的疏忽，但我的正则表达式（旨在匹配 URL）不起作用。我的目标是让它匹配任何网址，例如：

```
http://www.somewhere.com
somewhere.com
https://ww3.some_where-hi.com
www.goop.go/herp/derp.lol 
```

我构建的正则表达式如下，但是，它不匹配类似的 URL `http://t.co/GZhtBh6c`，它在数字 6 处停止匹配（由[www.regexpal.com](http://www.regexpal.com)确定）。

```
((http|https)://)?([a-z0-9]+\.)?[a-z0-9\-_]+.[a-z]+(/[a-z0-9\-_]*)*([a-z0-9\-_]*\.[a-z]+){0,1} 
```

谁能告诉我为什么这不起作用？另外，我确信这不是最好的解决方案。如果您对此有更优雅的正则表达式，我很乐意看到它。

PS 这个正则表达式将与 javascript 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:15:09.270

验证字符串是否包含 RFC 3986 中指定的 URL。支持绝对和相对 URL。

这与您提供的样本等相匹配。它还可以让您提取 url 的不同部分

```
^
(# Scheme
 [a-z][a-z0-9+\-.]*:
 (# Authority & path
  //
  ([a-z0-9\-._~%!$&'()*+,;=]+@)?              # User
  ([a-z0-9\-._~%]+                            # Named host
  |\[[a-f0-9:.]+\]                            # IPv6 host
  |\[v[a-f0-9][a-z0-9\-._~%!$&'()*+,;=:]+\])  # IPvFuture host
  (:[0-9]+)?                                  # Port
  (/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?          # Path
 |# Path without authority
  (/?[a-z0-9\-._~%!$&'()*+,;=:@]+(/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?)?
 )
|# Relative URL (no scheme or authority)
 ([a-z0-9\-._~%!$&'()*+,;=@]+(/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?  # Relative path
 |(/[a-z0-9\-._~%!$&'()*+,;=:@]+)+/?)                            # Absolute path
)
# Query
(\?[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?
# Fragment
(\#[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?
$ 
```

在 javascript 中，这变成

```
if (/^([a-z][a-z0-9+\-.]*:(\/\/([a-z0-9\-._~%!$&'()*+,;=]+@)?([a-z0-9\-._~%]+|\[[a-f0-9:.]+\]|\[v[a-f0-9][a-z0-9\-._~%!$&'()*+,;=:]+\])(:[0-9]+)?(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?|(\/?[a-z0-9\-._~%!$&'()*+,;=:@]+(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?)?)|([a-z0-9\-._~%!$&'()*+,;=@]+(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?|(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)+\/?))(\?[a-z0-9\-._~%!$&'()*+,;=:@\/?]*)?(#[a-z0-9\-._~%!$&'()*+,;=:@\/?]*)?$/im.test(subject)) {
    // Successful match
} else {
    // Match attempt failed
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T22:13:22.863

使用 a`[A-z]`而不是`[a-z]` 你的 little`a-z`只匹配小写字母。

# python - 使用curve_fit拟合数据

> ID：10857948
> 
> 赞同：10
> 
> 时间：2012-06-01T22:09:37.593
> 
> 标签：python, python-3.x, scipy, curve-fitting, least-squares

我是 scipy 和 matplotlib 的新手，我一直在尝试将函数拟合到数据中。[Scipy Cookbook](http://www.scipy.org/Cookbook/FittingData "Scipy 食谱")中的第一个示例效果非常好，但是当我尝试使用从文件中读取的点时，我给出的初始系数（下面的 p0）似乎从未真正改变，并且协方差矩阵始终为 INF。

我试图在一条线上拟合数据，但无济于事。我导入数据的方式有问题吗？如果是这样，有没有更好的方法来做到这一点？

```
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit
import scipy as sy

with open('data.dat') as f:
    noms = f.readline().split('\t')

    dtipus = [('x', sy.float32)] + [('y', sy.float32)]

    data = sy.loadtxt(f,delimiter='\t',dtype=dtipus)

    x = data['x']
    y = data['y']

    def func(x, a, b, c):
        return a*x**b + c

    p0 = sy.array([1,1,1])

    coeffs, matcov = curve_fit(func, x, y, p0)

    yaj = func(x, coeffs[0], coeffs[1], coeffs[2])

    print(coeffs)
    print(matcov)

    plt.plot(x,y,'x',x,yaj,'r-')
    plt.show() 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T19:01:40.910

在我看来，问题确实在于您如何导入数据。伪造这个数据文件：

```
$:~/temp$ cat data.dat
1.0  2.0
2.0  4.2
3.0  8.4
4.0  16.1 
```

并使用`pylab`'`loadtxt`函数进行读取：

```
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit
import scipy as sy
import pylab as plb  

data = plb.loadtxt('data.dat')  
x = data[:,0]
y= data[:,1]

def func(x, a, b, c):
  return a*x**b + c

p0 = sy.array([1,1,1])
coeffs, matcov = curve_fit(func, x, y, p0)

yaj = func(x, coeffs[0], coeffs[1], coeffs[2])
print(coeffs)
print(matcov)

plt.plot(x,y,'x',x,yaj,'r-')
plt.show() 
```

为我工作。顺便说一句，您可以使用[dtypes](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.html)来命名列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T17:57:57.150

加载数据的根本问题是您将其转换为 float32，但在 scipy 0.10.1 中，curve_fit 适用于 float64 但不适用于 float32（这是一个错误，而不是一个功能）。您的示例适用于 float64。

# php - joomla sql查询

> ID：10857951
> 
> 赞同：1
> 
> 时间：2012-06-01T22:10:21.037
> 
> 标签：php, sql, joomla

好的，所以我对 sql 了解不多，但我试图为我的网站进行动态重定向，这个想法是将每个用户重定向到与用户被调用相同的文章，所以这里有一些代码，但我不知道如何完成它 ：（

```
$database->setQuery("SELECT id "." FROM #__content "." WHERE state='1' "." ");
$rows = $database->loadObjectList();
foreach($rows as $user_name){   
$article_id = $row->id; 
break;
}
$redirect_url = 'index.php?option=com_content&view=article&id='.$article_id; 
```

$user_name 和 $redirect_url 是“预制”选项，所以不用担心，我只需要知道如何实际进行查询，呵呵，感谢您的帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:15:07.237

看起来您打算返回单个 article_id，因此 SQL 查询应始终返回单个行（值），在这种情况下，该 foreach 必须消失。问题是您需要重写 SQL 查询并向 WHERE 子句添加另一个条件。也许是这样的：

```
$user =& JFactory::getUser();
$database->setQuery("SELECT id FROM #__content WHERE state='1' AND title = '".$user->name."'");
$row = $database->loadAssoc();
$redirect_url = 'index.php?option=com_content&view=article&id='.$row['id']; 
```

请注意，我没有测试上面的代码。

# inversion-of-control - 从 XML 文件加载 Unity 映射

> ID：10857956
> 
> 赞同：6
> 
> 时间：2012-06-01T22:10:53.673
> 
> 标签：inversion-of-control, unity-container, ioc-container

我希望能够将以下内容加载到 Unity 中：

```
UnityContainer.RegisterType<ClientRegistrationVM, ClientRegistrationVMDesign>(); 
```

通过 XML 文件加载它。

这将是我想要发生的一些伪代码。

```
FileStream unityMappings = new FileStream(@".\UnityMappings.xml", FileMode.Open)
UnityContainer.CreateFromXML(unityMappings);
unityMappings.Dispose(); 
```

UnityMappings.xml 文件将包含映射和类型所在的 dll。

Unity 能实现我想要的吗？有没有人这样做过？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T22:23:42.103

您可以在 Unity 中使用 XML 配置，甚至可以混合使用设计时配置 (XML) 和运行时（代码）配置。

但是，[设计时配置](http://msdn.microsoft.com/en-us/library/ff660935(v=pandp.20))使用`UnityConfigurationSection`并且仅通过它支持配置加载，因此如果您希望将配置放在不同的（例如，不是 app.config 或 web.config）文件中，则需要做更多的工作。

幸运的是，您可以在以下文档中找到示例：[从备用文件加载配置](http://msdn.microsoft.com/en-us/library/ff660935%28v=pandp.20%29.aspx#_Loading_the_Configuration) 部分：

```
using System.Configuration;

var fileMap = new ExeConfigurationFileMap { ExeConfigFilename = "unity.config" };

Configuration configuration =
    ConfigurationManager.OpenMappedExeConfiguration(fileMap,                  
                                                    ConfigurationUserLevel.None);

var unitySection = (UnityConfigurationSection)configuration.GetSection("unity");

var container = new UnityContainer().LoadConfiguration(unitySection); 
```

# objective-c - 从 Xcode 中的全局异常断点忽略/排除特定的 Objective-C 异常？

> ID：10857962
> 
> 赞同：1
> 
> 时间：2012-06-01T22:11:43.707
> 
> 标签：objective-c, xcode, exception-handling

Xcode 有这个巧妙的功能来添加异常断点。如果我添加一个，我可以在“All”、“Objective-C”和“C++”例外之间进行选择。

但是，我使用的框架（Evernote iOS SDK）严重依赖异常，在框架内抛出和捕获它们。即使这些异常永远不会命中我的代码，这也会触发我的异常断点。

有没有办法忽略某种/某些异常子类？

Evernote 是这样定义它们的：

```
@interface EDAMUserException : NSException <NSCoding> {} 
```

所以，我想排除所有触发我的异常断点的人。

有一个类似的[问题](https://stackoverflow.com/questions/8109102/xcode-4-exception-breakpoint-filtering)，但还没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T23:13:45.677

就在这里！关于这个的另一个问题得到了这个答案：[使用 Xcode 的所有异常断点时忽略某些异常，](https://stackoverflow.com/questions/14370632/ignore-certain-exceptions-when-using-xcodes-all-exceptions-breakpoint/19262247#19262247)其中包括脚本和所有内容。您可以按类或名称忽略异常。这很棒。

# mod-rewrite - HTTP 到 HTTPS Apache 重写不起作用

> ID：10857965
> 
> 赞同：0
> 
> 时间：2012-06-01T22:12:28.057
> 
> 标签：mod-rewrite, apache2, openssl, mod-ssl

我有一个在 Ubuntu 上运行的 apache2 服务器，我正在玩弄它来提高我的系统管理员技能。我一直在尝试在整个站点中使用 HTTPS 设置网络服务器。目前，如果我去[https://mysite.com](https://mysite.com)它工作得很好。我尝试了一些不同的重定向规则，以使所有到该站点的连接都强制使用 HTTPS，但我没有运气。谁能在这里指出我的错误？

httpd.conf：

```
NameVirtualHost *:443

<VirtualHost *:443>
        ServerName mysite.com
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/
        SSLEngine on
        SSLOptions +FakeBasicAuth -StrictRequire +ExportCertData
        SSLCertificateKeyFile /etc/ssl/crt/myserver.key
        SSLCertificateFile /etc/ssl/crt/mysite_com.crt
        SSLCertificateChainFile /etc/ssl/crt/mysite.ca-bundle
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride AuthConfig Options FileInfo Limit
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost>

<IfModule !mod_rewrite.c>
    LoadModule rewrite_module modules/mod_rewrite.so
</IfModule>

RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^/(.*) https://%{SERVER_NAME}/$1 [R,L] 
```

端口.conf：

```
NameVirtualHost *:80
Listen 80

<IfModule mod_ssl.c>
    # If you add NameVirtualHost *:443 here, you will also have to change
    # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
    # to <VirtualHost *:443>
    # Server Name Indication for SSL named virtual hosts is currently not
    # supported by MSIE on Windows XP.
    Listen 443
</IfModule>

<IfModule mod_gnutls.c>
    Listen 443
</IfModule> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:45:26.347

终于弄清楚了...不是我的重写规则不起作用，而是与我使用的代理（cloudflare）发生冲突。对于那些处于类似情况的人，您必须在 cloudflare 仪表板中创建一个“页面规则”，否则它将忽略您的 Apache 规则。

# gcc - 有没有办法在 clang 或 gcc 中使用编译指示禁用所有警告？

> ID：10857966
> 
> 赞同：4
> 
> 时间：2012-06-01T22:12:47.683
> 
> 标签：gcc, warnings, clang

GCC 和 clang 让您使用 -w 进行编译以禁用所有警告，但我看不到 #pragma 等效项。我只能看到对禁用单个文件的编译指示支持。

我需要这个，因为我有想要以高警告级别编译的代码，但它必须编译生成任意警告的第三方代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:34:31.853

您几乎可以使用 GCC*来*`#pragma GCC diagnostic ignored`做到这一点，但不幸的是不是很好，请参见[此处](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)。

问题是你不能只是“禁用所有”，你必须禁用每一个。另外，对于某些警告它不起作用（并且文档不会告诉您哪些警告......）。

我的猜测是，这有点初步，将（希望）在下一个版本中得到改进。

# mysql - 在具有多个 SELECT 或 ORDER BY 变量的 SELECT 查询（或 ORDER BY）中使用 MySql CAST 函数

> ID：10857972
> 
> 赞同：0
> 
> 时间：2012-06-01T22:13:39.233
> 
> 标签：mysql

*我的问题是缺少逗号。当我把头撞到桌子上时，请随意删除这篇文章*

我有一个数据库，它有几个实际上是整数的 VARCHAR 列，但由于某些原因，这些列需要是 VARCHAR 而不是 INT。显然我有排序问题作为数字

```
7
8
9
10 
```

排序为

```
10
7
8
9 
```

我的 SELECT 语句使用多个连接和 SELECT 变量：

```
SELECT master.column1, table2.column1, table2.column2, table3.column1 FROM master
LEFT JOIN table2
ON master.column1 = table2.column1
WHERE master.column1 LIKE 'whatever'
OR WHERE master.column2 LIKE 'whatever'
ORDER BY master.column1, master.column2, master.column3.... 
```

有没有办法在其中一个变量上插入 CAST 函数？

IE`SELECT master.column1, CAST(table2.column1 AS UNSIGNED), table2.column2....`

如上所述，我没有成功尝试，MySql 手册没有给出具有多个 SELECT 或 ORDER BY 变量的示例。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:28:46.187

您可能希望在 ORDER BY 子句中使用 CAST。

选择... ORDER BY master.column1, cast(master.column2 as varchar), master.column3 ....

在 Select 子句中使用 CAST 只会影响输出而不影响排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:18:29.250

CAST 方法在 order by 子句中不可用吗？我不明白，它应该可以正常工作。

# scala - Scala：回归有它的位置

> ID：10857973
> 
> 赞同：13
> 
> 时间：2012-06-01T22:13:50.833
> 
> 标签：scala, playframework-2.0, return, type-inference

参考： Scala[在 Scala 控制器中](http://groups.google.com/group/play-framework/browse_thread/thread/785146cf26d84998)
[返回关键字处理错误](https://stackoverflow.com/questions/2209179/type-inference-on-method-return-type)

**EDIT3**
这是“最终”解决方案，再次感谢 Dan Burton。

```
def save = Action { implicit request =>
  val(orderNum, ip) = (generateOrderNum, request.remoteAddress)
  val result = for {
    model   <- bindForm(form).right // error condition already json'd
    transID <- payment.process(model, orderNum) project json
    userID  <- dao.create(model, ip, orderNum, transID) project json
  } yield (userID, transID)
} 
```

然后是 pimp'd Either 项目方法，放置在您的应用程序中的某个位置（在我的情况下，一个隐式特征，即 sbt 根和子项目从以下位置扩展它们的基本包对象：

```
class EitherProvidesProjection[L1, R](e: Either[L1, R]) {
  def project[L1, L2](f: L1 => L2) = e match {
    case Left(l:L1) => Left(f(l)).right
    case Right(r)   => Right(r).right
  }
}
@inline implicit final def either2Projection[L,R](e: Either[L,R]) = new EitherProvidesProjection(e) 
```

**EDIT2**
Evolution，已经从嵌入式返回语句变成了这个密度的小白矮星（感谢@DanBurton，Haskell 流氓;-)）

```
def save = Action { implicit request =>
  val(orderNum, ip) = (generateOrderNum, request.remoteAddress)
  val result = for {
    model   <- form.bindFromRequest fold(Left(_), Right(_)) project( (f:Form) => Conflict(f.errorsAsJson) )
    transID <- payment.process(model, orderNum) project(Conflict(_:String))
    userID  <- dao.create(model, ip, orderNum, transID) project(Conflict(_:String))
  } yield (userID, transID)
  ...
} 
```

我已将 Dan 的 onLeft Either 投影作为皮条客添加到 Either，使用上述“项目”方法，该方法允许右偏`eitherResult project(left-outcome)`. 基本上，您将失败优先错误作为左派，将成功作为右派，这在将选项结果提供给理解时不起作用（您只会得到一些/无结果）。

我唯一不满意的是必须指定 ; 的类型`project(Conflict(param))`。我认为编译器能够从传递给它的 Either 中推断出左条件类型：显然不是。

无论如何，很明显，函数式方法不需要嵌入返回语句，就像我尝试使用 if/else 命令式方法一样。

**编辑**
功能等价物是：

```
val bound = form.bindFromRequest
bound fold(
  error=> withForm(error),
  model=> {
    val orderNum = generateOrderNum()
    payment.process(model, orderNum) fold (
      whyfail=> withForm( bound.withGlobalError(whyfail) ),
      transID=> {
        val ip = request.headers.get("X-Forwarded-For")
        dao.createMember(model, ip, orderNum, transID) fold (
          errcode=> 
            Ok(withForm( bound.withGlobalError(i18n(errcode)) )),
          userID=> 
            // generate pdf, email, redirect with flash success
        )}
    )}
) 
```

这当然是一个功能强大的代码块，在那里发生了很多事情；但是，我认为相应的带有嵌入式返回的命令式代码不仅同样简洁，而且更容易理解（具有更少的尾随花括号和括号来跟踪的额外好处）

**ORIGINAL**
发现自己处于紧急情况；希望看到以下方法的替代方法（由于使用 return 关键字和方法上缺少显式类型而不起作用）：

```
def save = Action { implicit request =>
  val bound = form.bindFromRequest
  if(bound.hasErrors) return Ok(withForm(bound))

  val model = bound.get
  val orderNum = generateOrderNum()
  val transID  = processPayment(model, orderNum)
  if(transID.isEmpty) return Ok(withForm( bound.withGlobalError(...) ))

  val ip = request.headers.get("X-Forwarded-For")
  val result = dao.createMember(model, ip, orderNum, transID)
  result match {
    case Left(_) => 
      Ok(withForm( bound.withGlobalError(...) ))
    case Right((foo, bar, baz)) =>
      // all good: generate pdf, email, redirect with success msg
    }
  }
} 
```

在这种情况下，我喜欢使用 return 来避免嵌套多个 if/else 块、折叠、匹配或填充空白的非命令式方法。当然，问题在于它不起作用，必须指定显式返回类型，这有其自身的问题，因为我还没有弄清楚如何指定一个满足 Play 魔法工作的类型 - 不，`def save: Result`, 不起作用，因为编译器然后抱怨`implicit result`现在没有显式类型;-(

无论如何，Play 框架示例提供了 la, la, la, la 快乐的 1-shot-deal fold(error, success) 条件，这在现实世界中并非总是如此™ ;-)

那么上述代码块的惯用等价物（不使用返回）是什么？我假设它会嵌套 if/else、match 或 fold，这有点难看，每个嵌套条件都会缩进。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-02T22:21:09.203

因此，作为一个 Haskeller，显然在我看来，所有问题的解决方案都是 Monads。和我一起进入一个简化的世界（对我来说很简单），你的问题在 Haskell 中，你有以下类型需要处理（作为一个 Haskeller，我有点迷恋类型）：

```
bindFormRequest :: Request -> Form -> BoundForm
hasErrors :: BoundForm -> Bool

processPayment :: Model -> OrderNum -> TransID
isEmpty :: TransID -> Bool 
```

让我们在这里暂停一下。在这一点上，我有点畏缩`boundFormHasErrors`and `transIDisEmpty`。这两件事都意味着失败的可能性分别被*注入* `BoundForm`和`TransID`。那很糟。相反，应该单独维护失败的可能性。请允许我提出这个替代方案：

```
bindFormRequest :: Request -> Form -> Either FormBindError BoundForm
processPayment :: Model -> OrderNum -> Either TransError TransID 
```

这感觉好多了，这些 Either 导致了 Either monad 的使用。让我们写一些更多的类型。我将忽略`OK`它，因为它几乎涵盖了所有内容。我有点捏造，但概念仍然会翻译成一样的。相信我; 最后，我将把它带回 Scala。

```
save :: Request -> IO Action

form :: Form
withForm :: BoundForm -> Action

getModel :: BoundForm -> Model
generateOrderNum :: IO OrderNum
withGlobalError :: ... -> BoundForm -> BoundForm

getHeader :: String -> Request -> String
dao :: DAO
createMember :: Model -> String -> OrderNum -> TransID
             -> DAO -> IO (Either DAOErr (Foo, Bar, Baz))

allGood :: Foo -> Bar -> Baz -> IO Action 
```

好的，现在我要做一些有点奇怪的事情，让我告诉你为什么。Either monad 的工作原理是这样的：只要你点击 a `Left`，你就会停下来。（我选择这个 monad 来模拟早期返回有什么意外吗？）这一切都很好，但是我们希望总是`Action`以 a 停止，因此以 a 停止并`FormBindError`不会削减它。因此，让我们定义两个函数，让我们以这样一种方式处理 Eithers，如果我们发现一个`Left`.

```
-- if we have an `Either a a', then we can always get an `a' out of it!
unEither :: Either a a -> a
unEither (Left a) = a
unEither (Right a) = a

onLeft :: Either l r -> (l -> l') -> Either l' r
(Left l)  `onLeft` f = Left (f l)
(Right r) `onLeft` _ = Right r 
```

此时，在 Haskell 中，我*将*讨论 monad 转换器，以及`EitherT`在`IO`. 然而，在 Scala 中，这不是问题，所以无论我们看到什么`IO Foo`，我们都可以假装它是一个`Foo`.

好吧，我们来写吧`save`。我们将使用`do`语法，稍后将其转换为`Scala`'s`for`语法。回想一下`for`语法，你可以做三件事：

*   使用从生成器分配`<-`（这与 Haskell 的 相当`<-`）
*   `=`使用（这类似于 Haskell 的`let`）为计算结果分配一个名称
*   使用带有关键字的过滤器`if`（这类似于 Haskell 的`guard`函数，但我们不会使用它，因为它不能让我们控制产生的“异常”值）

然后最后我们可以`yield`，这与 Haskell 中的相同`return`。我们将把自己限制在这些事情上，以确保从 Haskell 到 Scala 的转换是顺利的。

```
save :: Request -> Action
save request = unEither $ do
  bound <- bindFormRequest request form
           `onLeft` (\err -> withForm (getSomeForm err))

  let model = getModel bound
  let orderNum = generateOrderNum
  transID <- processPayment model orderNum
             `onLeft` (\err -> withForm (withGlobalError ... bound))

  let ip = getHeader "X-Forwarded-For" request
  (foo, bar, baz) <- createMember model ip orderNum transID dao
                     `onLeft` (\err -> withForm (withGlobalError ... bound))

  return $ allGood foo bar baz 
```

注意到什么了吗？它看起来几乎*与*您以命令式风格编写的代码相同！

您可能想知道为什么我要花这么多精力在 Haskell 中写出答案。嗯，这是因为我喜欢对我的答案进行类型检查，而且我对如何在 Haskell 中执行此操作相当熟悉。这是一个类型检查的文件，并且具有我刚刚指定的所有类型签名（sans `IO`）：[http ://hpaste.org/69442](http://hpaste.org/69442)

好的，现在让我们将其转换为 Scala。第一，`Either`帮手。

**从这里开始 Scala**

```
// be careful how you use this.
// Scala's subtyping can really screw with you if you don't know what you're doing
def unEither[A](e: Either[A, A]): A = e match {
  case Left(a)  => a
  case Right(a) => a
}

def onLeft[L1, L2, R](e: Either[L1, R], f: L1 => L2) = e match {
  case Left(l) = Left(f(l))
  case Right(r) = Right(r)
} 
```

现在，`save`方法

```
def save = Action { implicit request => unEither( for {
  bound <- onLeft(form.bindFormRequest,
                  err => Ok(withForm(err.getSomeForm))).right

  model = bound.get
  orderNum = generateOrderNum()
  transID <- onLeft(processPayment(model, orderNum),
                    err => Ok(withForm(bound.withGlobalError(...))).right

  ip = request.headers.get("X-Forwarded-For")
  (foo, bar, baz) <- onLeft(dao.createMember(model, ip, orderNum, transID),
                            err => Ok(withForm(bound.withGlobalError(...))).right
} yield allGood(foo, bar, baz) ) } 
```

`<-`请注意， or左侧的变量`=`被隐式视为`val`s，因为它们位于`for`块内。您应该随意更改`onLeft`，以便将其添加到`Either`更漂亮使用的值上。~~此外，请确保为`Either`s 导入适当的“Monad 实例”。~~

总之，我只想指出一元糖的全部目的是扁平化嵌套的函数式代码。所以使用它！

[编辑：在 Scala 中，您必须使用“正确`Either`的偏见”才能使它们与`for`语法一起工作。这是通过添加`.right`到`Either`右侧的值来完成的`<-`。不需要额外的进口。这可以在内部完成，`onLeft`以获得更漂亮的代码。另请参阅：[https](https://stackoverflow.com/a/10866844/208257) ://stackoverflow.com/a/10866844/208257 ]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T22:35:50.793

一些嵌套的`defs`呢？

```
def save = Action { implicit request =>
  def transID = {
    val model = bound.get
    val orderNum = generateOrderNum()
    processPayment(model, orderNum)
  }
  def result = {
    val ip = request.headers.get("X-Forwarded-For")
    dao.createMember(model, ip, orderNum, transID)
  }
  val bound = form.bindFromRequest

  if(bound.hasErrors) Ok(withForm(bound))
  else if(transID.isEmpty) Ok(withForm( bound.withGlobalError(...) ))
  else result match {
    case Left(_) => 
      Ok(withForm( bound.withGlobalError(...) ))
    case Right((foo, bar, baz)) =>
      // all good: generate pdf, email, redirect with success msg
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T04:08:56.940

Scala 内部使用 throw/catch 机制来处理返回在语法上可以但实际上必须跳出几个方法的地方。所以你可以让它这样做：

```
def save = Action { implicit request =>
  def result(): Foo = {
    /* All your logic goes in here, including returns */
  }
  result()
} 
```

或者，如果您愿意，可以使用自己的数据传递可抛出类（没有堆栈跟踪）：

```
import scala.util.control.ControlThrowable
case class Return[A](val value: A) extends ControlThrowable {}

def save = Action { implicit request =>
  try {
    /* Logic */
    if (exitEarly) throw Return(Ok(blahBlah))
    /* More logic */
  }
  catch {
    case Return(x: Foo) => x
  }
} 
```

或者你可以更花哨一些，添加你自己的异常处理：

```
case class Return[A](val value: A) extends ControlThrowable {}
class ReturnFactory[A]{ def apply(a: A) = throw new Return(a) }
def returning[A: ClassManifest](f: ReturnFactory[A] => A) = {
  try { f(new ReturnFactory[A]) } catch {
    case r: Return[_] =>
      if (implicitly[ClassManifest[A]].erasure.isAssignableFrom(r.value.getClass)) {
        r.value.asInstanceOf[A]
      } else {
        throw new IllegalArgumentException("Wrong Return type")
      }
  } 
} 
```

（如果您希望能够嵌套`returning`s，只需在类型不匹配时重新抛出`Return`而不是抛出 an 。）您可以像这样使用它：`IllegalArgumentException`

```
def bar(i: Int) = returning[String] { ret =>
  if (i<0) ret("fish")
  val j = i*4
  if (j>=20) ret("dish")
  "wish"*j
}

bar(-3)   // "fish"
bar(2)    // "wishwishwishwishwishwishwishwish"
bar(5)    // "dish" 
```

或在您的特定情况下

```
def save = Action{ implicit request => returning[Foo] { ret =>
  /* Logic goes here, using ret(foo) as needed */
}} 
```

*它不是内置的，但向人们解释如何使用*它应该不难，即使理解该功能的构建方式并不容易。（注意：Scala 确实具有内置`break`功能，`scala.util.control.Breaks`其中使用非常类似于此策略的东西。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T00:05:36.787

恕我直言，这里的问题似乎是您正在控制器中执行业务逻辑，并且 Play 签名与返回值不*匹配*，这样的返回值是次要的。

我建议您将 generateOrderNum、processPayment、createMember 调用封装在外观后面，并且该返回值可以返回业务事务的适当状态，然后可以用于返回适当的控制器状态。

稍后将用一个例子更新这个答案。

编辑：这很草率，所以仔细检查语法，但我的回答的要点是将您的业务逻辑序列移动到一个外部类中，该类将利用您已经使用的 Either/Left/Right，但现在包括您的检查Left 响应中的空事务 ID。

```
def save = Action {implicit request =>
  val bound = form.bindFromRequest
  if (!bound.hasErrors) {
    val model = bound.get
    val ip = request.headers.get("X-Forwarded-For")

    val result = paymentService.processPayment(model, ip)

    result match {
      case Left(_) => Ok(withForm(bound.withGlobalError(...)))
      case Right((foo, bar, baz)) => // all good: generate pdf, email, redirect with success msg
    }
  }
  else Ok(withForm(bound))
}

class PaymentService {
  def processPayment(model, ip): Either[Blah, Blah] = {
    val orderNum = generateOrderNum()
    val transID = processPayment(model, orderNum)
    if (transID.isEmpty) Left(yadda)
    else Right(dao.createMember(model, ip, orderNum, transID))
  }
} 
```

这里唯一有点做作的是bound.hasErrors的if / else，但不确定将其折叠到匹配中的干净方法。

说得通？

# algorithm - 如何生成从根节点展开的所有子树？

> ID：10857979
> 
> 赞同：0
> 
> 时间：2012-06-01T22:14:05.000
> 
> 标签：algorithm, subtree

我需要一种有效的算法来生成从根节点扩展的所有子树。该算法应该适用于任何树结构。任何人都可以贡献代码吗？

例如，给定树的边为 0->1、0->2、2->3。有六个子树：0，

0,1

0,2

0,1,2

0,2,3

0,1,2,3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:32:06.747

您可能想看看 TRIPS 算法：[论文](http://dl.acm.org/citation.cfm?doid=1183614.1183680)

# java - 如何从 GSON 更改扩展类中属性的 @SerializedName

> ID：10857984
> 
> 赞同：5
> 
> 时间：2012-06-01T22:15:27.277
> 
> 标签：java, inheritance, annotations, gson

我有这样的课：

```
class A {
    @Expose
    @SerializedName("a_id")
    private String id;
} 
```

现在我想创建扩展 A 的类 B，但是，在 B 中，我想将 id 的 SerializedName 更改为“b_id”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T03:25:36.810

开箱即用是不可能的。您需要编写一个自定义类型适配器。请参阅 Gson 用户指南的[自定义序列化和反序列化](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T14:50:59.413

将 @SerializedName("b_id") 应用于 B 中的设置器

B类{私人字符串ID；

```
@SerializedName("b_id")
private void setId(String id); 
```

}

# socket.io - 我可以为此使用流星吗？

> ID：10857985
> 
> 赞同：3
> 
> 时间：2012-06-01T22:15:28.187
> 
> 标签：socket.io, meteor

我正在寻找一种方法来创建一个应用程序，该应用程序具有实时 Web 界面以及可以由 node.js 客户端调用同时共享其大部分代码的 API。

我希望能够通过浏览器在我的应用程序内部管理数据、监控和执行任务，但也有一个自动化/调度程序连接到我的网络应用程序并告诉它运行各种任务并获得每个任务的结果。

不幸的是，我似乎无法从服务器连接到 Meteor，所以我想知道是否还有其他方法？我所描述的甚至可能使用 Meteor 吗？

我已经使用 socket.io 进行了一些测试，我想我可以这样做，但 Meteor 似乎对于实时用户界面来说真的很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:32:14.010

是的，你[可以使用 npm 包](https://stackoverflow.com/questions/10165978/how-do-we-or-can-we-use-node-modules-via-npm-with-meteor)来做你想做的事。就像标准的 Node.js 编程一样。

在外部代码之间调用 Meteor 时可能会遇到一个错误，但很[容易解决](https://stackoverflow.com/questions/10192938/meteor-code-must-always-run-within-a-fiber-when-calling-collection-insert-on-s)。

我想在您的情况下，您可以以这种方式设置 TCP 服务器并使其更新集合，然后您可以让客户端通过反应式集合发布机制进行更新。

# python - Python print 语句——写入文件

> ID：10857989
> 
> 赞同：0
> 
> 时间：2012-06-01T22:16:08.700
> 
> 标签：python, python-3.x

我在一本书中看到了这段代码，当我尝试实现它时，我得到了一个无效的语法错误。

此代码基本上读取字典并写入 txt 文件..

主文件

```
from Basics import data

dbfilename = 'people-file'
ENDDB  = 'enddb.'
ENDREC = 'endrec.'
RECSEP = '=>'

def storelist(db,dbfilename):
    print('In storelist function')
    dbfile = open(dbfilename, 'w')
    for key in db:
        print(key, file=dbfile)

    dbfile.close()

if __name__ == '__main__':
    print('In Main list-items=',data.people)
    storelist(data.people,dbfilename)
    #for key in data.people:   
    #   print('Values are', key['name']) 
```

数据.py

```
bob={'name':'bobs mith','age':42,'salary':5000,'job':'software'}
sue={'name':'sue more','age':30,'salary':3000,'job':'hardware'}

people={}
people['bob'] = bob
people['sue'] = sue 
```

错误：

语法错误：无效的语法。

是否可以使用打印语句编写文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:20:59.130

我猜你真的在使用 2.x 系列的 python。Print 是[python 3 中的内置函数和 python 2 中的语句](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)。如果您尝试使用[2.x 语法](http://stefaanlippens.net/redirect_python_print)打印到文件会发生什么？

```
 print >>dbFile, key 
```

要检查您的版本，请打开交互式 python shell 并执行

```
 sys.version_info 
```

我有 2.7，所以我得到

```
 sys.version_info(major=2, minor=7, micro=2, releaselevel='final', serial=0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:24:41.797

您可以将其从使用 print 更改为`dbfile.write(key + "\n")`. 更容易理解您要完成的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T22:35:34.693

如果您使用的是 python 2.6 或更高版本，您可以尝试添加

```
from __future__ import print_function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T03:45:19.947

请忽略它..它只是一个打印语句..它不是一个写语句..我将删除这个线程，这样人们就不会感到困惑了。

# ruby-on-rails-3 - Rails 3 - 父资源（文章，评论）中的 ID 而不是整体 ID

> ID：10857993
> 
> 赞同：0
> 
> 时间：2012-06-01T22:16:31.680
> 
> 标签：ruby-on-rails-3, attributes, comments

谷歌搜索时我没有找到与我的问题相关的单一结果，但在我看来这是一个相当简单的问题：
Given 是文章模型和评论模型。现在，在文章显示页面上，当列出所有文章的评论时，每条评论都应该在该文章中具有其按时间顺序排列的 id，而不是其整体 id。

关联和一切工作正常，但我不知道如何实现“相对”comment_id，而不采用相当复杂的方式并手动将article_comment_id 列添加到我的评论模型并在我的控制器中处理该属性。

是否没有简单的方法可以在其所属的父模型中调用对象 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:23:30.787

据我所知，没有一种自动的方法可以询问一条记录在哪里被同行索引。

我这样做的方式只是在遍历数组时跟踪索引。

所以对于ERB：

```
<% @article.comments.each_with_index do |comment, index| %>
    <div class="comment_id"><%= index + 1 %></div>
    <div class="content"><%= comment.content %></div> 
```

或 HAML：

```
-@article.comments.each_with_index do |comment, index|
    .comment_id= index + 1
    .content= comment.content 
```

如果你的分页，你需要有`index + 1 + (page*num_items)`什么的。

您可以在数据库中保存一个索引，方法是添加一个列`iteration_id`，然后向 Comment 模型添加一个创建前过滤器，如下所示：

```
before_create do
  last_comment = article.comments.unscoped.order("iteration_id DESC").select('iteration_id').first
  self.iteration_id = last_comment ? last_comment.iteration_id + 1 : 0
  true
end 
```

当评论也被破坏时，您也需要做一些事情。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:59:13.050

您可以使用部分遍历它们：

```
<%= render @article.comments %> 
```

在部分内部，您可以使用 引用评论的计数`comment_count`。这是 Rails 提供的自动功能。

# ruby-on-rails - Rails 3.获取相关模型的属性

> ID：10857995
> 
> 赞同：1
> 
> 时间：2012-06-01T22:16:34.383
> 
> 标签：ruby-on-rails, ruby, activerecord, join

我有两个模型：注册和发票。

```
enrollment belongs to invoice
invoice has many enrollments 
```

所以我有这个查询：`@enrollments = Enrollment.where('invoice_id IS NOT NULL')`获取属于发票的所有注册。

但我需要进行某种类型的加入，因为我真正想要的是与注册相关的发票（id、invoice_number 和总计）。

我怎样才能做到这一点？

到目前为止我在控制台中尝试过的......

```
enrollments = Enrollment.where('invoice_id IS NOT NULL').joins(:invoice)
enrollments.each do |enrollment|
  puts enrollment.invoice_number
end 
```

我明白`NoMethodError: undefined method invoice_number for #<Enrollment:0x00000006a1e1a8>`了，因为我只能访问发票的 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:23:33.367

`Invoice.joins(:enrollments).uniq`

# android - ADT 18.0 中的 Proguard 更改

> ID：10857996
> 
> 赞同：0
> 
> 时间：2012-06-01T22:16:41.437
> 
> 标签：android, adt, proguard

我正在使用 eclipse 14.0 的 ADT 插件当我决定更新到 18.0 时，Proguard 开始引发有关外部库的错误，即使我保留了相同的 proguard 文件。

我使用了命令 -libraryjars 和 -keep 但我仍然遇到这个问题。它允许我编译，但 apk 不再起作用。

解决此问题的一个方法是恢复到旧的 ADT 14.0，但它似乎不是很干净。我试图找出文档，但与此无关。

所以问题是。从 14.0 及更高版本开始，proguard 发生了哪些变化？反正有没有覆盖它们？

谢谢！

# google-maps - 从谷歌地图中删除报告地图错误

> ID：10857997
> 
> 赞同：12
> 
> 时间：2012-06-01T22:16:56.697
> 
> 标签：google-maps

我有一个 v3 谷歌地图，在地图的右下角，有一个覆盖在地图上的“报告地图错误”链接。有谁知道是否可以从地图中删除它？

编辑：这是我的意思的一个例子：http: [//jsfiddle.net/ahfA5/](http://jsfiddle.net/ahfA5/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T06:40:19.233

您可以设置地图样式以摆脱这种情况。[看看这个](https://developers.google.com/maps/documentation/javascript/styling#creating_a_styledmaptype)。

请注意，如果您比较前两个屏幕截图，“报告地图错误”链接出现在第一个屏幕中，而第二个屏幕则没有。

将虚拟样式应用于地图以使其看起来仍然像谷歌地图但没有错误链接的最简单方法是执行以下操作：

```
const styleOptions = {
  name: `Dummy Style`,
}

const MAP_STYLE = [
  {
    featureType: `road`,
    elementType: `all`,
    stylers: [{ visibility: `on` }],
  },
]
const mapType = new google.maps.StyledMapType(MAP_STYLE, styleOptions)
map.mapTypes.set(`Dummy Style`, mapType)
map.setMapTypeId(`Dummy Style`) 
```

[这是更新的 JSFiddle](http://jsfiddle.net/LwNyy/1)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-23T17:39:58.133

自定义样式地图的一个问题是，当从地图/卫星或街景切换回来时，它不会返回到自定义样式实例。

```
// remove the wrapping container
.gm-style-cc:last-child {
    display: none !important;
}
// remove the link only
a[title="Report errors in the road map or imagery to Google"] {
    display: none !important;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T14:21:32.923

无法通过 API 正确禁用此功能。

请记住，如果您在不使用 API 的情况下隐藏它，则会违反 Google Maps API[服务条款](https://developers.google.com/maps/terms)，截至本文发布之日，该条款不允许开发人员操纵此链接。请参阅 10.1.1.fx：

> 删除、隐藏或以任何方式更改出现在服务或内容中的任何品牌特征、徽标、警告、通知……或链接；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-22T04:54:23.797

此处提供的示例确实有效：

```
var styleOptions = {
        name: "Dummy Style"
    };

 var MAP_STYLE = [
    {
        featureType: "road",
        elementType: "all",
        stylers: [
            { visibility: "on" }
        ]
    }
];
var mapType = new google.maps.StyledMapType(MAP_STYLE, styleOptions);
map.mapTypes.set("Dummy Style", mapType);
map.setMapTypeId("Dummy Style"); 
```

最初显示的地图没有默认地图上的链接！

但

选择以下之一时：

MAP/Terrain 或 SATELLITE/Label 菜单中的 Report map error 链接 RETURNS 在地图刷新时。

如果您选择创建 StyledMapType MAP 作为替代方案。

可以在 StyledMap 上永久禁用报告地图错误链接。

但是您现在有两个 MAPS（Default 和 StyledMap）。

我找不到隐藏默认地图的方法。

底线我无法永久删除默认地图中报告地图错误的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T14:27:19.643

您可以使用 CSS 技巧隐藏它。它很脏但有效：

```
/* remove ugly google report-a-bug button from maps */
.gmnoprint:last-child {
    display: none !important;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T23:15:15.120

你不能这样做——谷歌通过众包提供准确数据的尝试有时会导致这种情况。忍受它并接受这种限制。如果您将其定位为绝对或固定，您可以在画布顶部放置自定义元素。但这违反了他们的服务条款，因为它也涵盖了版权声明。

# c# - C# 中更好的字符串替换

> ID：10857998
> 
> 赞同：0
> 
> 时间：2012-06-01T22:17:10.070
> 
> 标签：c#, replace

有谁知道哪个更适合潜在的字符串替换？

如果我有一系列不同长度的字符串，其中一些字符串*可能*需要特殊替换编码的十六进制值（例如 = 0A、%20... 等）

每个字符串的“替换”（可能有多个）将由正则表达式处理，以检测适当的转义十六进制值

哪个效率更高？

1.  只需在集合中的每个字符串上运行替换，通过蛮力确保完成所有需要的替换

2.  如果需要替换，则执行测试，并且*仅*在需要它的字符串上运行替换。

我在 C# 中工作。

## 更新

来自答案和评论的一些附加信息。

这主要用于从 QR 码加载的 VCARD 处理

我目前有一个正则表达式，它使用捕获组从 VCARD 中的每个 KEY;PARAMETERS:VALUE 获取 KEY、PARAMETERS 和 VALUE。

由于我支持 v 2.1 和 3.0，因此编码和行折叠非常不同，所以我需要在解码之前知道版本。

现在运行整个正则表达式对我来说没有意义只是为了获取版本并将适当的替换应用于整个 vcard 文本块然后重新运行正则表达式。

对我来说，加载我的捕获组然后获取版本并在每场比赛中进行适当的解码替换更有意义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:42:29.513

*当您只是 Replace 时，它​​会在没有匹配*时执行稍慢，因为 Replace 会进行额外的检查（例如）

```
if (replacement == null)
{
    throw new ArgumentNullException("replacement");
} 
```

如果没有找到匹配项，Regex.Replace 会返回输入，因此这里没有内存问题。

```
Match match = regex.Match(input, startat);
if (!match.Success)
{
    return input;
} 
```

当有*匹配*时， regex.Match 会在您执行此操作时触发两次，而在 replace 执行此操作时会再次触发。这意味着检查和替换将执行较慢。

所以你的结果将基于

*   你期待很多比赛还是很多失误？
*   当有匹配项时，`Regex.Match`将运行两次这一事实如何超过额外的参数检查？我的猜测是它可能会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:23:10.053

您可以使用带有前瞻性检查的非常专业的词法分析器的东西，*例如*，

```
outputBuffer := new StringBuilder
index := 0
max := input.Length
while index < max
    if input[ index ] == '%'
    && IsHexDigit( input[ index + 1 ] )
    && IsHexDigit( input[ index + 2 ] )
        outputBuffer.Append( ( char )int.Parse( input.Substring( index + 1, 2 )
        index += 3
        continue
    else
        outputBuffer.Append( input[ index ] )
        index ++;
        continue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T05:42:06.630

如果您使用字符串替换，使用[StringBuilder.Replace](http://msdn.microsoft.com/en-us/library/3h5afh4w.aspx)可能比使用 string.Replace 更好。（替换时不会创建很多临时字符串......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-01T21:01:05.613

*（代表问题作者发布）*。

从一些插话的好人那里得到一些启发，我设法隔离并测试了有问题的代码。

在这两种情况下，我都有一个解析器正则表达式来处理分解电子卡的每一“行”，以及一个解码正则表达式来处理捕获任何编码的十六进制数字。

我突然想到，无论我是否使用 string.Replace，我仍然必须依靠 Decode Regex 来获取潜在的替换十六进制代码。

我经历了几个不同的场景，看看数字是否会改变；包括：将 Regex MatchCollection 转换为 Dictionary 以消除 Match 对象的复杂性，并将 Decoding 正则表达式投影到具有旧字符串值和新字符串值的不同简单匿名对象的集合中。替换调用

最后，无论我如何使用 String.Replace 按摩测试，它都接近但总是比让解码的正则表达式做它的替换事情慢。

最接近的是大约 12% 的速度差异。

最后，对于那些好奇的人来说，这最终成为了获胜的代码块

```
 var ParsedCollection = Parser.Matches(UnfoldedEncodeString).Cast<Match>().Select(m => new
    {
      Field = m.Groups["FIELD"].Value,
      Params = m.Groups["PARAM"].Captures.Cast<Capture>().Select(c => c.Value),
      Encoding = m.Groups["ENCODING"].Value,
      Content = m.Groups["ENCODING"].Value.FirstOrDefault == 'Q' ? QuotePrintableDecodingParser.Replace(m.Groups["CONTENT"].Value, me => Convert.ToChar(Convert.ToInt32(me.Groups["HEX"].Value, 16)).ToString()) : m.Groups["CONTENT"].Value,
      Base64Content = ((m.Groups["ENCODING"].Value.FirstOrDefault() == 'B') ? Convert.FromBase64String(m.Groups["CONTENT"].Value.Trim()) : null)
    }); 
```

一口气给了我我需要的一切。所有字段、它们的值、任何参数以及解码后的两种最常见的编码都投射到一个很好打包的匿名对象中。

从好的方面来说，从字符串到解析和解码的匿名对象只有 1000 多纳秒（感谢 LINQ 和扩展方法）（基于 100,000 次测试和大约 4,000 长度的 VCARD）。