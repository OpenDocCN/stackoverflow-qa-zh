# StackOverflow 问答 12198000-12198999

# jquery - 在线mp3音频播放器

> ID：12198000
> 
> 赞同：1
> 
> 时间：2012-08-30T13:28:28.923
> 
> 标签：jquery, mp3, media-player

有谁知道是否有这样的 mp3 播放器脚本（在图片部分）？这么少。。

[http://www.svenweisemann.com/index.php](http://www.svenweisemann.com/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:32:16.343

我什至不知道我为什么回答这个问题......

**啧啧： http:** [//www.codebasehero.com/2011/06/html-music-player/](http://www.codebasehero.com/2011/06/html-music-player/)

## **演示： http:** [//www.codebasehero.com/files/music-player/demo/](http://www.codebasehero.com/files/music-player/demo/)

检查 html5 音频“播放器”

[http://www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)

[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_soundmidiembed](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_soundmidiembed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:35:22.707

页面的中心是使用该网站上托管的[jPlayer](http://www.jplayer.org/) jquery 插件和 mp3s/ogas。

如果您想制作自己的播放器，可以在 jPlayer 网站上玩一些演示： [http ://www.jplayer.org/latest/demos/](http://www.jplayer.org/latest/demos/)

在右下角，您发布的那个网站正在使用[soundcloud.com](http://soundcloud.com)来托管其 mp3。

以下是关于如何在您的网站上嵌入 soundcloud 小部件的讨论：http: [//soundcloud.com/pages/widgets](http://soundcloud.com/pages/widgets)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T17:36:37.387

使用下面的代码。并使用您的 mp3 链接更改“ [Mp3Plus.IN](http://mp3plus.in)或[http://mp3plus.in ”网址](http://mp3plus.in)

```
<!DOCTYPE html>
<title>My Example</title>

<audio src="http://mp3plus.in .mp3" controls>	
<p>Fallback content goes here.</p>
</audio>
```

# java - 无法执行 Watir 悬停或鼠标悬停主导航菜单

> ID：12198002
> 
> 赞同：0
> 
> 时间：2012-08-30T13:28:30.760
> 
> 标签：java, drop-down-menu, hover, mouseover, watir

我已经尝试了大约 2 天的时间在这里的论坛和谷歌群组中搜索，但我发现的所有内容都没有奏效。基本上，顶部导航菜单被放入以下 ​​HTML：

```
<div id="topNav">
<div id="headerLogo">  
<div id="mainNav">
<ul id="nav">
<li id="navTab01" class="manageUsers">
<a class="mainNavItem" title="Manage Users And Groups" href="#"> </a>
<ul class="dropdown" style="display: none;">
</li>
<li id="navTab02" class="manageContent">
<a class="mainNavItem current" title="Manage Content" href="#"> </a>
<ul class="dropdown" style="display: none;">
<li class="manageSubRegions">
<li class="manageBusinessDirectoryEntries">
<a class="dropdownItemHasFlyout current" href="/BusinessDirectoryEntry"> Business Directory</a>
<ul class="flyout" style="display: none; left: 224px;">
</li>
<li>
</ul>
</li>
<li id="navTab03" class="manageFinancials">
<li id="navTab04" class="runReports">
</ul>
</div>
</div> 
```

我要操作的菜单项是 navTab002，它具有以下扩展的 HTML：

```
<li id="navTab02" class="manageContent">
<a class="mainNavItem current" title="Manage Content" href="#"> </a>
<ul class="dropdown" style="display: none;">
<li class="manageSubRegions">
<a class="current" href="/SubRegion"> Regions</a>  
</li>
<li class="manageBusinessDirectoryEntries">
<a class="dropdownItemHasFlyout current" href="/BusinessDirectoryEntry"> Business    Directory</a>
<ul class="flyout" style="display: none; left: 224px;">
<li class="businessDirectoryEntryQuickAdd">
<a class="current" href="/BusinessDirectoryEntry/QuickAdd"> Quick Add</a>
</li>
<li class="manageBusinessCustomListings">
<a class="current" href="/BusinessDirectoryCustomListing"> Sectors</a>  
</li>
<li class="manageBusinessDirectoryProfileTypes">
<a class="current" href="/BusinessDirectoryProfileType"> Profile Types</a>
</li>
<li class="manageBusinessDirectoryPrivateTypes">
<a class="current" href="/BusinessDirectoryPrivateType"> Private Types</a>
</li>
<li class="displayOptions">
<a class="current" href="/DisplayOption">Display Options</a>
</li>
</ul>
</li> 
```

我想在悬停（或鼠标单击）时单击下拉列表中的第三个项目，或者手动使用它。

java脚本正在使用hoverIntent，这（可能）对我来说是个问题——不确定。

当我在手动运行期间使用控制台保存时，我得到：

DOMNodeRemoved DOMSubtreeModified DOMNodeInserted DOMSubtreeModified DOMNodeRemoved DOMSubtreeModified DOMNodeInserted DOMSubtreeModified DOMNodeRemoved DOMSubtreeModified

亿万次。

这是我用 ruby​​ Watir 尝试过的编码日志：

```
irb(main):001:0> require 'watir'
=> true
 <Watir::Browser.start("http://services.leedsgrenville.com/")
=> #<Watir::IE:0x4c618ca8 url="http://services.leedsgrenville.com/" title="Admin
istration">
<ink(:index, 1).attribute_value("/BusinessDirectoryEntry")
NoMethodError: undefined method `li' for main:Object
    from (irb):3
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):004:0> browser.li(:text, 'Manage Users & groups').link(:index, 1).at>
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["li"], :text=>"Manage Users & groups"}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:135:in `document'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:31:in `document'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:136:in `each_element'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:21:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:20:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:20:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:147:in `locate'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:33:in `locate'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:63:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:407:in `attribute_value'
    from (irb):4
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):005:0> browser.li.flash
=> nil
irb(main):006:0> browser.li(id => "navTab02").flash
NameError: undefined local variable or method `id' for main:Object
    from (irb):6
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):007:0> browser.li(id => "navTab02").flash
NameError: undefined local variable or method `id' for main:Object
    from (irb):7
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):008:0> browser.li(index, 2).flash
NameError: undefined local variable or method `index' for main:Object
    from (irb):8
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):009:0> browser.li(index, 2)
NameError: undefined local variable or method `index' for main:Object
    from (irb):9
    from C:/Ruby193/bin/irb:12:in `<main>'
<nk(:text, /Manage Content/).fire_event('onmouseover')
=> ""
<(:text, /Manage Content/).fire_event('onmouseover')
=> ""
<(:text, /Manage Content/).fire_event('onmouseover')
=> ""
irb(main):013:0> browser.link(:text, /Manage Content/).flash
=> nil
irb(main):014:0> browser.link(:text, /navTab01/).flash
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["a"], :text=>/navTab01/}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:280:in `flash'
    from (irb):14
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):015:0> browser.link(:text, /navTab01/).flash
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["a"], :text=>/navTab01/}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:280:in `flash'
    from (irb):15
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):016:0> browser.link(:text, /Manage Content/).flash
=> nil
irb(main):017:0> browser.link(:text, /Manage Content/).flash
=> nil
irb(main):018:0>
<(:class => 'manageContent', :text => 'Manage Content').link.click
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["li"], :class=>"manageContent", :text=>"Manage Content"}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:135:in `document'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:31:in `document'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:136:in `each_element'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:21:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:20:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c 
lassic/locator.rb:20:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:147:in `locate'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:33:in `locate'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:63:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:412:in `perform_action'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:269:in `click!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:211:in `click'
    from (irb):19
    from C:/Ruby193/bin/irb:12:in `<main>'
<(:class => 'manageContent', :text => 'Business Directory').link.click
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["li"], :class=>"manageContent", :text=>"Business Directory"}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:135:in `document'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:31:in `document'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:136:in `each_element'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:21:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:20:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:20:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/locator.rb:147:in `locate'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:33:in `locate'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:63:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:412:in `perform_action'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:269:in `click!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:211:in `click'
    from (irb):20
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):021:0> browser.div(:id, "mainNav").fire_event "onmouseover"
=> ""
irb(main):022:0> browser.div(:id, "mainNav").fire_event "onmouseover"
=> ""
irb(main):023:0> browser.link(:id => "navTab01").click
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["a"], :id=>"navTab01"}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:412:in `perform_action'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:269:in `click!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:211:in `click'
    from (irb):23
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):024:0> browser.link(:class => "manageUsers").click
Watir::Exception::UnknownObjectException: Unable to locate element, using {:tag_
name=>["a"], :class=>"manageUsers"}
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:66:in `assert_exists'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:412:in `perform_action'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:269:in `click!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:211:in `click'
    from (irb):24
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):025:0> browser.div(:id, "mainNav").hover
NoMethodError: undefined method `hover' for #<Watir::Div:0x30b3610>
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-c
lassic/element.rb:431:in `method_missing'
    from (irb):25
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):026:0> class Watir::Element
irb(main):027:1> def hover
irb(main):028:2> assert_exists
irb(main):029:2>
irb(main):030:2*   driver.action.move_to(@element).perform
irb(main):031:2> end
irb(main):032:1> end
=> nil
<ll(:text, "Manage Content").fire_event("onmouseover")
NoMethodError: undefined method `cell' for #<Watir::IE:0x3276978>
    from (irb):33
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):034:0> require 'WET'
LoadError: cannot load such file -- WET
    from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
    from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
    from (irb):34
    from C:/Ruby193/bin/irb:12:in `<main>' 
```

实际的 Java 代码是：

```
$("#mainNav, #mainNavDropdown").hoverIntent(
{
    interval: 200,
    timeout: 1000,
    over: function()
    {
        $(this).addClass("over");
        $("#mainNavDropdown").stop(true, true).slideDown(500,
                 function()
                 {
                     $(this).css("height", ""); // Make sure animation didn't screw up
                 });
    },
    out: function()
    {
        $(this).removeClass("over");
        if (!$("#mainNav, #mainNavDropdown").hasClass("over"))
            $("#mainNavDropdown").stop().slideUp(500,
                function()
                {
                    $(this).css("height", ""); // Make sure animation didn't screw up
                });
    }
});

// Hide the menu on body click
$("body")
    .click(function(evt)
    {
        if ($(evt.target)
                .parents()
                .andSelf()
                .filter("#mainNav, #mainNavDropdown").length == 0)
            $("#mainNavDropdown").stop().slideUp(300,
                function()
                {
                    $(this).css("height", ""); // Make sure animation didn't screw up
                });
    }); 
```

如果有人可以尝试帮助我，那就太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:11:38.240

要悬停在 watir 上，请尝试以下操作：

```
browser.element(:attribute, 'value').fire_event 'mouseover' 
```

当然，用您的值替换元素、属性和值。

# user-interface - 在 OSGi 中创建 GUI

> ID：12198004
> 
> 赞同：0
> 
> 时间：2012-08-30T13:28:33.477
> 
> 标签：user-interface, osgi

在 OSGi 框架中设置交互式 GUI 的最简单方法是什么。我也需要一些数据来实时显示。我喜欢 Riena 提出的想法，但我似乎很难理解他们的概念（教程）。我可以考虑其他任何选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:00:54.933

查看 Eclipse 富客户端平台 (RCP)。它都是基于 OSGi 的，并提供了大量的 GUI API。您可以使用 Canvas 自己显示数据，也可以使用 BIRT，尽管 BIRT 也非常复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:25:25.217

根据您的应用程序，您还可以使用 HTML5 和 Javascript 实现您的 GUI。在此模型中，OSGi 框架作为带有 HTTP 服务器的后台服务运行。然后，您的 GUI 使用一些接口（通常是 REST）与服务器通信。有一些尴尬的地方：

*   在 URL 上启动、启动服务器和浏览器取决于平台（但启动 Java 也是如此）
*   用户可以轻松地离开您的应用程序，桌面应用程序往往会徘徊，可能会忘记您的服务器仍在运行
*   业务逻辑和 GUI 之间更复杂的通信

还有很多优点：

*   可能的最佳 GUI 环境
*   众所周知的技术
*   数以万计的例子
*   GUI 和业务逻辑之间的干净利落
*   轻松制作多用户

使用 HTML5 可以构建一个与后端服务器配合得很好的单页应用程序，例如 Google 的 AngularJS。

# css - 更改数据表 Colvis 样式

> ID：12198008
> 
> 赞同：1
> 
> 时间：2012-08-30T13:28:48.900
> 
> 标签：css, jquery-mobile, jquery-datatables

我是 jquerymobile、css 和数据表的新手:)。我需要更改数据表 Colvis 按钮和列表样式。

[http://stokkers.mobi/jqm/tableview/demo.html](http://stokkers.mobi/jqm/tableview/demo.html)对我来说是一个很好的例子。它使用（+）图标而不是“显示/隐藏列”文本并选择列会打开一个带有 jquerymobile 样式复选框控制组的弹出窗口。我使用以下代码创建了数据表，因此无法复制/粘贴此链接:)

此外，我不想编辑 jquerymobile 的 javascript 或 css 文件以轻松升级进一步的版本。

意识到在 jquerymobile 环境中需要响应式 tableGrid 插件。我认为Datatables可以做到这一点..

谢谢您的帮助

```
$('#dynamicDatatableDIV').html( '<table id="dynamicDatatable" class="tbl_basket_style"></table>' );               
$('#dynamicDatatable').dataTable( {
    "sDom": 'frCtip', //ColVis  'frtCipl'        
    "oTableTools": {
        "sSwfPath": "swf/copy_csv_xls_pdf.swf",
        "aButtons": [ "copy", "csv", "xls", "pdf" ]                       
    },
    //"bStateSave": true,//length, filtering, pagination and sorting not change when refresh(cooki)
    "sPaginationType": "full_numbers",        
    "iDisplayLength": 65536,
    "oColVis": {
        //"buttonText": "Show / Hide columns",
        "bRestore": true,
        "sAlign": "right"
    },        
    "aaData": aDataSet,        
    "aoColumns": aColumnData  
} ); 
```

# .net - .NET 4.0 Web 服务和 IPv6

> ID：12198013
> 
> 赞同：1
> 
> 时间：2012-08-30T13:29:00.047
> 
> 标签：.net, web-services, iis, iis-7

我在 IIS 7.0 中部署了一个 WebService。如果我使用 IPv4 绑定访问该 WebService，它就可以工作并且我可以看到 WSDL。但是，使用 IPv6 绑定访问它会返回 System.UriFormatException: Invalid URI: The hostname could not be parsed。

```
[UriFormatException: Invalid URI: The hostname could not be parsed.]
   System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind) +7955439
   System.Web.Services.Protocols.DocumentationServerType..ctor(Type type, String uri) +75
   System.Web.Services.Protocols.DocumentationServerProtocol.Initialize() +322
   System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) +160

[InvalidOperationException: Unable to handle request.]
   System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) +800924
   System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response) +302

[InvalidOperationException: Failed to handle request.]
   System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response) +731240
   System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext context, String verb, String url, String filePath) +308
   System.Web.Script.Services.ScriptHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String pathTranslated) +89
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +608
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +193
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +371 
```

如果我访问一个正常的 ASP 页面，它就可以工作。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T14:46:50.930

尝试将 .Net 框架升级到 4.6

[https://www.microsoft.com/en-us/download/details.aspx?id=46854](https://www.microsoft.com/en-us/download/details.aspx?id=46854)

* * *

我们遇到了同样的问题，我们可以使用“IPv6 url”访问到 Web 服务目录级别，但在访问 .asmx 时抛出异常

http:// [fe11::b111:327b:28ef:ee9e]/WebServicePath //有效

http:// [fe11::b111:327b:28ef:ee9e]/WebServicePath/MyService.asmx //抛出异常

现在在将 .net 框架 4.5.1 升级到 4.6(RC) 后已修复此问题

# javascript - 如何使用下划线进行映射但不向结果中添加虚假值

> ID：12198014
> 
> 赞同：1
> 
> 时间：2012-08-30T13:29:01.900
> 
> 标签：javascript, underscore.js

我有一个对象数组，我只想在它通过条件时保存一个子对象。目前我第一次使用`map`然后`filter`结果：

```
 var a = _.filter(
    _.map(activities.toJSON(), function (activity) {
    if (activity.verb !== 'test') {
      return activity.object;
    }
  }), function(b){return b;}); 
```

这似乎有点奇怪。有一个更好的方法吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:32:15.267

你可以试试[#reduce](http://underscorejs.org/#reduce)

```
_.reduce(activities.toJSON(), function(accum, activity){
  if (activity.verb !== 'test')
    accum.push(activity.object);
  return accum;
}, []); 
```

[**例子**](http://jsfiddle.net/tHjeW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:38:56.587

任何时候你开始做类似的事情`_.f(_.g(...))`，你都应该考虑使用[`_.chain`](http://underscorejs.org/#chain). 你可以这样做：

```
var a = _.chain(activities.toJSON())
         .select(function(a) { return a.verb !== 'test' })
         .map(function(a) { return a.object })
         .value(); 
```

我还调整了您的逻辑以简化事情，无需两次进行相同的测试。如果将函数放入变量中，则可以使这种事情变得非常可读：

```
var not_tests   = function(a) { return a.verb !== 'test' };
var extract_obj = function(a) { return a.object };
var results     = _.chain(activities.toJSON())
                   .select(not_tests)
                   .map(extract_obj)
                   .value(); 
```

演示：http: [//jsfiddle.net/ambiguous/EQfuH/](http://jsfiddle.net/ambiguous/EQfuH/)

使用这种方法会有相当多的复制，因此您可能只想走老路并使用循环：

```
var json = activities.toJSON();
var a    = [ ];
for(var i = 0; i < json.length; ++i)
    if(json[i].verb !== 'test')
        a.push(json[i].object); 
```

JavaScript 中的循环没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:45:10.710

我想你正在寻找[`_.compact()`](http://documentcloud.github.com/underscore/#compact)：

```
var a = _.compact(
    _.map(activities.toJSON(), function (activity) {
    if (activity.verb !== 'test') {
      return activity.object;
    }
  })); 
```

另一种方法，我认为在语义上有点好，是过滤掉你不想要的，然后使用`_.pluck`：

```
var a = _.filter(activities.toJSON(), function (activity) {
    return activity.verb !== 'test';
}).pluck('object'); 
```

# entity-framework - 具有导航属性 EntityFramework 的 TreeView HierarchicalDataTemplate

> ID：12198017
> 
> 赞同：1
> 
> 时间：2012-08-30T13:29:14.217
> 
> 标签：entity-framework, treeview

我有三个具有一对多关系的链接实体（类别-> 类型-> 类）。是否可以仅绑定类别实体并使用导航属性和表示其余实体`HierarchicalDataTemplate`？
我想象这样的事情：

```
<TreeView ItemsSource="{Binding Categories}">

            <TreeView.ItemTemplate>

                <HierarchicalDataTemplate ItemsSource="{Binding Categories}" >
                    <TextBlock Foreground="Red" Text="{Binding Types}" />

                    <HierarchicalDataTemplate.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Classes}">
                            <TextBlock Text="{Binding TypeName}" />

                            <HierarchicalDataTemplate.ItemTemplate>
                                <DataTemplate >
                                    <TextBlock Text="{Binding ClassName}" />
                                </DataTemplate>
                            </HierarchicalDataTemplate.ItemTemplate>

                        </HierarchicalDataTemplate>

                    </HierarchicalDataTemplate.ItemTemplate>

                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>

        </TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:53:22.413

我最近做了这个，在一个 WPF 项目中，我更新了类型以匹配你的名字和导航属性。

您可能需要考虑将 Type/Class 更改为更具体的内容，因为它们在 c# 语言中用作关键字，但我认为您明白了

```
 <!-- The Root Category Table -->
           <HierarchicalDataTemplateDataType="{x:Type Entities1:Categories}" ItemsSource="{Binding Types}" >
              <StackPanel Orientation="Horizontal">
                 <Image Name="img" Source="{Binding ., Converter={Converters:DataTypeImageConverter}}" />
                 <TextBlock Text="{Binding CategoryName}" FontWeight="Bold" />
              </StackPanel>
           </HierarchicalDataTemplate>
           <!-- Your Type Table -->
           <HierarchicalDataTemplate DataType="{x:Type Entities1:Type}"  ItemsSource="{Binding Classes}" >
              <StackPanel Orientation="Horizontal">
                 <Image Name="img" Source="{Binding ., Converter={Converters:DataTypeImageConverter}}" />
                 <TextBlock  Text="{Binding TypeName}" />
              </StackPanel>
           </HierarchicalDataTemplate>
           <!-- Your Class Table-->
           <DataTemplate DataType="{x:Type Entities1:Class}">
              <StackPanel Orientation="Horizontal">
                 <Image Name="img" Source="{Binding ., Converter={Converters:DataTypeImageConverter}}" />
                 <TextBlock Text="{Binding ClassName}" />
              </StackPanel>
           </DataTemplate> 
```

这将做的是，它将匹配树中的数据类型 - 如果匹配`Category`，它将创建堆栈面板，然后使用导航集合启动另一个分支`Types`。

因为`types`，它会做同样的基本事情——为该项目创建面板，然后为它的导航集合创建另一个分支`Class`。

如果是`class`，它只会创建面板，因为它是 a `DataTemplate`，而不是 a`HierarchicalDataTemplate`

# c# - C# TreeView DrawNode：如何在 TreeNodes 中添加徽章图像？

> ID：12198020
> 
> 赞同：1
> 
> 时间：2012-08-30T13:29:22.413
> 
> 标签：c#, winforms, treeview, gdi+, badge

我只想在 TreeNodes 的右侧添加徽章图像。

不应更改展开/折叠按钮、图标和文本。

我使用了以下代码：

```
 public void treeView_DrawNode(object sender, DrawTreeNodeEventArgs e)
    {
        e.DrawDefault = true;

        e.Graphics.DrawImage(image1, e.Bounds.Right - 30, e.Bounds.Y);
    } 
```

但是，如果树节点的文本很长，则它在图像之上。徽章是不可见的。

我认为**e.DrawDefault = true;** 函数返回后可能会影响。

如何在不重绘文本和图标的情况下显示徽章图像？

# wpf - 如何应对模型变化？

> ID：12198023
> 
> 赞同：0
> 
> 时间：2012-08-30T13:29:27.487
> 
> 标签：wpf

我想知道以下场景的“最佳实践”是什么：-

我有一个通过公共属性公开模型的视图模型。该模型是实现 INotifyPropertyChanged 的​​ C# 类（独立于视图模型）。在我看来，我将文本框绑定到该模型的各种属性。

每当模型的属性值发生变化时，我想在我的视图模型中执行一个方法。什么是好方法？我的想法：-

*   让视图模型将委托传递给由属性的设置器调用的模型，或者
*   视图模型是否订阅了模型的 PropertyChanged 事件？

第一个感觉就像我会污染本质上是 POCO 模型的东西，而第二个选项在某种程度上也感觉不太正确 - 订阅通常由视图/绑定使用的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:32:06.377

订阅`ViewModel`模型的`PropertyChanged`事件

[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口旨在用于需要引发属性更改通知的任何对象，而不仅仅是绑定到 UI 的对象。我一直将它用于非 UI 目的:)

# asp.net-mvc - 如何使用数据库资源管理器连接到代码优先创建的 localdb 数据库？

> ID：12198025
> 
> 赞同：0
> 
> 时间：2012-08-30T13:29:33.743
> 
> 标签：asp.net-mvc, visual-studio, entity-framework

我在 MVC 4 项目中有一个数据库，到目前为止，它完全通过 Code First 和 Migrations 进行管理。我现在想进去手动更改一些数据。如何使用 Visual Studio 2012 中的数据库资源管理器连接到 localdb 实例？连接字符串如下：

```
Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-mydb-20120830192823;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-mydb-20120830192823.mdf 
```

我的项目中有一个 App_Data 文件夹，但连接字符串中命名的 .mdf 不在其中。

我尝试在“添加连接”对话框中连接到“（LocalDb）”、“LocalDb”、“.SQLEXPRESS”和其他各种东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:45:03.247

呃，我需要连接的是'.\SQLEXPRESS'。

# javascript - 使用 Raphael 在 javascript 中处理“drop”事件

> ID：12198026
> 
> 赞同：0
> 
> 时间：2012-08-30T13:29:35.020
> 
> 标签：javascript, raphael

我正在尝试使用 Raphael 用 javascript 构建棋盘游戏，其中涉及让用户拖放一些图片。我知道 Raphael 对象有一个方法**drag**可以拖动图片。

我希望用户仅根据规则移动一块（由图片表示）。为此，我可以编写一个方法**move**以这种方式（在这个例子中，一块只能垂直移动一个正方形）：

```
move = function (dx, dy) {
    document.getElementById("xCoord").innerHTML = dx;
    document.getElementById("yCoord").innerHTML = dy;
startSquareX = coordToSquare(this.ox);
startSquareY = coordToSquare(this.oy);
newSquareX = coordToSquare(this.ox+dx);
newSquareY = coordToSquare(this.oy+dy);
var deltaX = newSquareX - startSquareX;
var deltaY = newSquareY - startSquareY;       
if((deltaX*deltaX + deltaY*deltaY)===1) {
    this.attr({x: this.ox + dx, y: this.oy+dy});                       
} else {
    this.attr({x: this.ox, y: this.oy});
}} 
```

上面的代码使用户能够在规则允许的棋盘中唯一的方格中移动棋子。我更希望有明显的不同： - 用户可以将棋子拖到棋盘上任何她想要的地方 - 当棋子放在正方形上时，如果棋子按照规则移动，那么棋子就会放在用户的位置把它丢了。否则，将其放回其初始方格。

这是我无法做到的第二点，因为我不知道如何处理 Raphael 的“drop”事件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:56:42.470

Raphael中没有`drop`事件，但`Element.drag`有一个事件处理程序`onend`。这就是您定义“下降”的地方。

参考[这个](http://raphaeljs.com/graffle.html)演示。注意`up`当元素停止被拖动时调用的处理程序（查看源代码）。

# mysql - 在where子句中使用单引号的Mysql查询

> ID：12198031
> 
> 赞同：1
> 
> 时间：2012-08-30T13:29:43.517
> 
> 标签：mysql

我有这个查询：

```
SELECT * FROM tbname WHERE LCASE(title) LIKE '%l\'infinito%' 
```

表中的值包含引号前的斜线。为什么查询没有返回结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:37:05.233

转义是正确的。您实际上不需要`LCASE`，因为`LIKE`不区分大小写（至少在我的 Linux 系统上不是）：

```
mysql> SELECT 'L\'Infinito' LIKE '%l\'infinito%';
+------------------------------------+
| 'L\'Infinito' LIKE '%l\'infinito%' |
+------------------------------------+
|                                  1 |
+------------------------------------+
1 row in set (0.00 sec) 
```

也许您想用“n”搜索*L'Infinito*。或者，也许标题*似乎*包含一个单引号，但它是那些从未被充分诅咒的 Windows Word 反向英文引号之一。

或者，引用后的标题中可能有一个空格。在许多字体中，这不是立即可见的。

```
L' infinito 
```

您能否使用“%ifinito%”（或“%infinito%”）进行搜索，并验证找到的行确实包含单个 ASCII 引号？

**更新**

...最后，*也许数据库是错误的*。以机智：

```
mysql> CREATE TABLE catalogo (title varchar (32));
mysql> INSERT INTO catalogo VALUES ('L\'Infinito');
mysql> SELECT * FROM catalogo;
+------------+
| title      |
+------------+
| L'Infinito |
+------------+ 
```

如果你`SELECT`和之前一样运行，MySQL 是否返回*L'Infinito*而不转义？因为如果你有

```
+-------------+
| title       |
+-------------+
| L\'Infinito |
+-------------+ 
```

然后*标题保存错误*，转义引号两次。所以在 L 和引号之间有一个转义符号，你必须搜索

```
L\\\'Infinito 
```

以“中和”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:31:55.183

尝试这个：

```
SELECT * FROM tbname WHERE LCASE(title) LIKE '%l\\\'infinito%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T15:33:04.670

以下查询将回答您的问题：

```
string s="'infinito";
s=s.Replace("'", "''");
SELECT * FROM tbname WHERE LCASE(title) LIKE '%s%' 
```

# arrays - 数组初始化的g ++编译问题

> ID：12198037
> 
> 赞同：1
> 
> 时间：2012-08-30T13:29:57.137
> 
> 标签：arrays, gcc

gcc 在以下代码上编译得很好

```
enum AVMediaType {
    AVMEDIA_TYPE_UNKNOWN = -1,
    AVMEDIA_TYPE_VIDEO,
    AVMEDIA_TYPE_AUDIO,
    AVMEDIA_TYPE_DATA,
    AVMEDIA_TYPE_SUBTITLE,
    AVMEDIA_TYPE_ATTACHMENT,
    AVMEDIA_TYPE_NB
};

static int wanted_stream[AVMEDIA_TYPE_NB]={
    [AVMEDIA_TYPE_AUDIO]=-1,   // Line 234
    [AVMEDIA_TYPE_VIDEO]=-1,
    [AVMEDIA_TYPE_SUBTITLE]=-1,
}; 
```

但是 g++ 抛出以下错误

```
playerthread.cpp:234: error: expected primary-expression before '[' token 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:52:12.430

g++ 不支持这些指定的初始值设定项，但 gcc 支持。我不确定它在 C++ 标准中是否允许。如果您将代码简化为非常简单的，您会看到相同的结果：

```
int array[10] = { [1] = 5 }; 
```

在 C 中很好，而不是 C++。

# iphone - Iphone Web App 在状态栏下

> ID：12198040
> 
> 赞同：0
> 
> 时间：2012-08-30T13:30:11.993
> 
> 标签：iphone, web-applications, web, iphone-standalone-web-app

嗨，我对 iPhone 网络应用程序有疑问。问题是当我将应用程序添加到主屏幕时，网站在状态栏下移动。

因此，例如我的标题块没有完全显示。

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" /> 
```

这是显示问题的图像。 ![截图](../Images/408e9d7093ceabb06772d59347e92296.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:58:15.100

尝试改变：

```
<meta name="apple-mobile-web-app-status-bar-style" content="default" /> 
```

进入：

```
<meta name="apple-mobile-web-app-status-bar-style" content="black" /> 
```

我遇到了同样的问题，将其设置为黑色半透明并将其设置为黑色消除了问题。

# android - android中的快速可变模糊或模糊库

> ID：12198045
> 
> 赞同：0
> 
> 时间：2012-08-30T13:30:25.770
> 
> 标签：android, image-processing, android-library

最近，我尝试了`blur`一个图像，半径是可变的。我试图实现它 myseft，但它似乎很慢。从这个站点，我得到了一个快速模糊方法，称为`stack blur`：

```
 static Bitmap fastblur(Bitmap sentBitmap, int radius, int fromX, int fromY,
        int width, int height) {

    // Stack Blur v1.0 from
    // http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html
    //
    // Java Author: Mario Klingemann <mario at quasimondo.com>
    // http://incubator.quasimondo.com
    // created Feburary 29, 2004
    // Android port : Yahel Bouaziz <yahel at kayenko.com>
    // http://www.kayenko.com
    // ported april 5th, 2012

    // This is a compromise between Gaussian Blur and Box blur
    // It creates much better looking blurs than Box Blur, but is
    // 7x faster than my Gaussian Blur implementation.
    //
    // I called it Stack Blur because this describes best how this
    // filter works internally: it creates a kind of moving stack
    // of colors whilst scanning through the image. Thereby it
    // just has to add one new block of color to the right side
    // of the stack and remove the leftmost color. The remaining
    // colors on the topmost layer of the stack are either added on
    // or reduced by one, depending on if they are on the right or
    // on the left side of the stack.
    //
    // If you are using this algorithm in your code please add
    // the following line:
    //
    // Stack Blur Algorithm by Mario Klingemann <mario@quasimondo.com>

    Bitmap bitmap = sentBitmap.copy(sentBitmap.getConfig(), true);

    if (radius < 1) {
        return (null);
    }

    int w = width;
    int h = height;

    int[] pix = new int[w * h];

    bitmap.getPixels(pix, 0, w, fromX, fromY, w, h);

    int wm = w - 1;
    int hm = h - 1;
    int wh = w * h;
    int div = radius + radius + 1;

    int r[] = new int[wh];
    int g[] = new int[wh];
    int b[] = new int[wh];
    int rsum, gsum, bsum, x, y, i, p, yp, yi, yw;
    int vmin[] = new int[Math.max(w, h)];

    int divsum = (div + 1) >> 1;
    divsum *= divsum;
    int dv[] = new int[256 * divsum];
    for (i = 0; i < 256 * divsum; i++) {
        dv[i] = (i / divsum);
    }

    yw = yi = 0;

    int[][] stack = new int[div][3];
    int stackpointer;
    int stackstart;
    int[] sir;
    int rbs;
    int r1 = radius + 1;
    int routsum, goutsum, boutsum;
    int rinsum, ginsum, binsum;

    int originRadius = radius;
    for (y = 0; y < h; y++) {
        rinsum = ginsum = binsum = routsum = goutsum = boutsum = rsum = gsum = bsum = 0;
        for (i = -radius; i <= radius; i++) {
            p = pix[yi + Math.min(wm, Math.max(i, 0))];
            sir = stack[i + radius];
            sir[0] = (p & 0xff0000) >> 16;
            sir[1] = (p & 0x00ff00) >> 8;
            sir[2] = (p & 0x0000ff);
            rbs = r1 - Math.abs(i);
            rsum += sir[0] * rbs;
            gsum += sir[1] * rbs;
            bsum += sir[2] * rbs;
            if (i > 0) {
                rinsum += sir[0];
                ginsum += sir[1];
                binsum += sir[2];
            } else {
                routsum += sir[0];
                goutsum += sir[1];
                boutsum += sir[2];
            }
        }
        stackpointer = radius;

        for (x = 0; x < w; x++) {

            r[yi] = dv[rsum];
            g[yi] = dv[gsum];
            b[yi] = dv[bsum];

            rsum -= routsum;
            gsum -= goutsum;
            bsum -= boutsum;

            stackstart = stackpointer - radius + div;
            sir = stack[stackstart % div];

            routsum -= sir[0];
            goutsum -= sir[1];
            boutsum -= sir[2];

            if (y == 0) {
                vmin[x] = Math.min(x + radius + 1, wm);
            }
            p = pix[yw + vmin[x]];

            sir[0] = (p & 0xff0000) >> 16;
            sir[1] = (p & 0x00ff00) >> 8;
            sir[2] = (p & 0x0000ff);

            rinsum += sir[0];
            ginsum += sir[1];
            binsum += sir[2];

            rsum += rinsum;
            gsum += ginsum;
            bsum += binsum;

            stackpointer = (stackpointer + 1) % div;
            sir = stack[(stackpointer) % div];

            routsum += sir[0];
            goutsum += sir[1];
            boutsum += sir[2];

            rinsum -= sir[0];
            ginsum -= sir[1];
            binsum -= sir[2];

            yi++;
        }
        yw += w;
    }

    radius = originRadius;

    for (x = 0; x < w; x++) {
        rinsum = ginsum = binsum = routsum = goutsum = boutsum = rsum = gsum = bsum = 0;
        yp = -radius * w;
        for (i = -radius; i <= radius; i++) {
            yi = Math.max(0, yp) + x;

            sir = stack[i + radius];

            sir[0] = r[yi];
            sir[1] = g[yi];
            sir[2] = b[yi];

            rbs = r1 - Math.abs(i);

            rsum += r[yi] * rbs;
            gsum += g[yi] * rbs;
            bsum += b[yi] * rbs;

            if (i > 0) {
                rinsum += sir[0];
                ginsum += sir[1];
                binsum += sir[2];
            } else {
                routsum += sir[0];
                goutsum += sir[1];
                boutsum += sir[2];
            }

            if (i < hm) {
                yp += w;
            }
        }
        yi = x;
        stackpointer = radius;
        for (y = 0; y < h; y++) {
            pix[yi] = 0xff000000 | (dv[rsum] << 16) | (dv[gsum] << 8)
                    | dv[bsum];

            rsum -= routsum;
            gsum -= goutsum;
            bsum -= boutsum;

            stackstart = stackpointer - radius + div;
            sir = stack[stackstart % div];

            routsum -= sir[0];
            goutsum -= sir[1];
            boutsum -= sir[2];

            if (x == 0) {
                vmin[y] = Math.min(y + r1, hm) * w;
            }
            p = x + vmin[y];

            sir[0] = r[p];
            sir[1] = g[p];
            sir[2] = b[p];

            rinsum += sir[0];
            ginsum += sir[1];
            binsum += sir[2];

            rsum += rinsum;
            gsum += ginsum;
            bsum += binsum;

            stackpointer = (stackpointer + 1) % div;
            sir = stack[stackpointer];

            routsum += sir[0];
            goutsum += sir[1];
            boutsum += sir[2];

            rinsum -= sir[0];
            ginsum -= sir[1];
            binsum -= sir[2];

            yi += w;
        }
    }

    bitmap.setPixels(pix, 0, w, fromX, fromY, w, h);

    return (bitmap);
} 
```

实际上，我希望这种模糊方法可以是可变模糊（例如：当到图像中心的距离减小时，半径也减小）。但是，我不擅长移位，修改那些代码对我来说太难了！所以，我想寻求一种方法来实现像径向模糊这样的代码！我想知道在android中有没有包含径向模糊、灰度、....的模糊库！如果有人能帮助我，真的很感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T00:59:53.153

Due to its optimization for speed, this algorithm is not well suited to be adapted for a varying radius. You can still use it if you take a different approach:

The principle is that you create multiple temporary maps each with an increasing (uniform) blur radius and then blend two of them together based on how big the radius at that point should be. Let's say you prepare 3 temp maps, one with radius 4, one with 8 and one with 16\. Now you want a blur radius of 12 at one pixel. What you do is you blend map 2 and 3 with about 50%. The more temp maps you use the better the quality, but 3 (plus the original unblurred map) are usually sufficient.

I am using this technique in my Compound Blur for Canvas: [http://www.quasimondo.com/CompoundBlurForCanvas/CompoundBlurDemo.html](http://www.quasimondo.com/CompoundBlurForCanvas/CompoundBlurDemo.html) - this allows you to do tilt shift effects or vignettes.

If you are looking for a radial blur that looks more like a camera zoom effect you have to use a different approach. In that case you first transform the bitmap from cartesian mapping to polar mapping, then you do a horizontal blur and finally you transform the map back to cartesian space - there is a Flash demo and some source code on my site, also a more detailed explanation: [http://www.quasimondo.com/archives/000697.php](http://www.quasimondo.com/archives/000697.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T20:08:10.373

How to implement a compound blur with a slider:

///HTML///

*//Use: [CompoundBlur.js](http://www.quasimondo.com/CompoundBlurForCanvas/CompoundBlur.js)//*

```
<DIV CLASS="specimenWindow">

    <DIV CLASS="specimenImage">

        <IMG ID="specImg" WIDTH="150" HEIGHT="150" />
        <CANVAS ID="specCanvas" WIDTH="150" HEIGHT="150"></CANVAS>

    </DIV>

</DIV>

<SCRIPT TYPE="text/javascript" SRC="js/CompoundBlur.js"></SCRIPT> 
```

///CSS///

```
.specimenWindow {
    position: absolute;
    width: 150px;
    height: 150px;
    left: 37px;
    top: 96px;
}

.specimenImage {
    height: 150px;
    width: 150px;
}

#specCanvas {
    position: absolute;
    top: 27px;
    left: 2px;
} 
```

///JS///

```
var specImg = document.getElementById("specImg");

_slider.ontouchend = function() {
    compoundBlur();
} 

function compoundBlur() {
    var lensRead = _slider.getPosition(0, 80);
    var rData = getRadialGradientMap( 150, 150, 75, 75, 25, 60 ); 
    compoundBlurImage( "specImg", "specCanvas", rData, lensRead, 1.5, 2, true );
} 
```

**So, just adjust the values to get smoother blur effects, I have it blurring when my slider is finished being touched, this is way more efficient on mobile devices vs. constantly blurring when slider changes, otherwise iPad will get warm and start loosing battery power quickly**

And so hope that helps anyone trying to implement a fast compound blur.

# symfony - 在 Doctrine2 查询中使用 Limit 和 Offset

> ID：12198046
> 
> 赞同：65
> 
> 时间：2012-08-30T13:30:30.987
> 
> 标签：symfony, pagination, doctrine-orm

我正在尝试进行分页，但出现错误：

> [语法错误] 第 0 行，第 57 列：错误：预期的字符串结尾，得到“限制”

我不太确定这是否是进行查询的正确语法（和逻辑）：

```
public function getFriendsFromTo ($user, $limit, $offset)
{
     return $this->getEntityManager()
        ->createQuery('SELECT f FROM EMMyFriendsBundle:Friend f WHERE f.user='.$user.' limit '.$limit. 'offset' .$offset)
        ->getResult();
} 
```

Friends和users关联manyToOne和oneToMany，所以在friends表中有一个字段——user_id。

这是在我的控制器中：

```
$user = $this->get('security.context')->getToken()->getUser();
$id = $user->getId();

$friends = $user->getFriends();
$result = count($friends)
$FR_PER_PAGE = 7;
$pages = $result/$FR_PER_PAGE;

$em = $this->getDoctrine()->getEntityManager();
$friends = $em->getRepository('EMMyFriendsBundle:Friend')
         ->getFriendsFromTo($id, $FR_PER_PAGE, $page*$FR_PER_PAGE); 
```

我知道这很愚蠢甚至是错误的（尤其是第三个参数 be `$page*$FR_PER_PAGE`），但我只是想尝试一下查询是否有效，但它没有。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-08-30T13:38:29.180

没有。利用：

```
 return $this->getEntityManager()
        ->createQuery('...')
        ->setMaxResults(5)
        ->setFirstResult(10)
        ->getResult(); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-02T19:19:01.610

```
$towary = $this->getDoctrine()
   ->getRepository('AcmeStoreBundle:Towar') 
   ->findBy(array(),array(),10,($current-1)*$numItemsPerPage); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-12-22T17:12:26.350

您可以使用`findBy`理论存储库方法的第 3 个和第 4 个参数，它们是`limit`和`offset`。

这是方法定义：

```
findBy(
    array        $criteria,
    array        $orderBy  = null, 
    integer|null $limit    = null,
    integer|null $offset   = null
) 
```

来源： http: [//www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.EntityRepository.html](http://www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.EntityRepository.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-12T10:14:32.123

你也可以使用

$query->getSingleResult();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-17T21:24:53.690

Doctrine2.6, stumbled upon this old post and tried the DQL way but it did not fit for purpose. So if you want to avoid using DQL because you already have Entities mapped and joined together, you can do paging using *matching & Criteria*

```
$criteria = Criteria::create()
            ->setMaxResults($limit ? $limit : null)
            ->setFirstResult($offset ? $offset : null)
$result = $em->getRepository('EMMyFriendsBundle:Friend')
            ->matching($criteria)->toArray(); 
```

# java - 使用设置为生成的项目 JAR 的类路径执行 Maven 单元测试

> ID：12198047
> 
> 赞同：4
> 
> 时间：2012-08-30T13:30:33.407
> 
> 标签：java, maven, classpath

我的应用程序中的一些单元测试与查找和操作属于应用程序本身的某些文件资源有关。我需要在应用程序的实际生产环境中执行这些测试，将其部署为 JAR 文件，而不是展开的目录。

我如何指示 Maven 执行我的单元测试，将项目生成的 jar 文件（以及任何其他声明的库依赖项）作为类路径，而不是像默认情况下那样在文件系统中编译类？

换句话说，现在我的单元测试的类路径设置为：`/$PROJECTPATH/target/classes/`.

相反，我希望将此类路径设置为：`/$PROJECTPATH/target/myjarfile.jar`.

我已经尝试手动添加和删除依赖类，如下所述： [http](http://maven.apache.org/plugins/maven-surefire-plugin/examples/configuring-classpath.html) ://maven.apache.org/plugins/maven-surefire-plugin/examples/configuring-classpath.html ，但直到现在它还没有工作。

我当前的项目 POM 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.mygroupid</groupId>
  <artifactId>myartifact</artifactId>
  <version>0.0.1-SNAPSHOT</version>

  <dependencies>
      ...
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.1</version>
        <configuration>
        <source>1.7</source>
        <target>1.7</target>
        </configuration>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-source-plugin</artifactId>
        <version>2.1.2</version> 
        <executions>
          <execution>
            <id>attach-sources</id>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.4</version>

        <configuration>
              <includeScope>runtime</includeScope>
              <outputDirectory>${project.build.directory}/lib</outputDirectory>
        </configuration>

        <executions>
          <execution> 
            <id>copy-dependencies</id>
            <phase>process-resources</phase>
            <!-- <phase>package</phase>  -->
            <goals>
              <goal>copy-dependencies</goal>
            </goals>

          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.3</version>
        <configuration>
              <classpathDependencyExcludes>
                <classpathDependencyExclude>
                  ${project.build.outputDirectory}
                </classpathDependencyExclude>
              </classpathDependencyExcludes>

              <additionalClasspathElements>
                <additionalClasspathElement>
              ${project.build.directory}/${project.build.finalName}.${project.packaging}
                </additionalClasspathElement>
              </additionalClasspathElements>
        </configuration>
      </plugin>

    </plugins>

  </build>
</project> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:47:56.910

作为测试生命周期阶段的一部分执行的标准单元测试看不到项目 JAR，因为该`test`阶段在该阶段之前执行`package`，因此您的测试在 Maven 生成 JAR 之前运行。有关生命周期阶段及其顺序的列表，请参阅[此页面。](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

您希望它作为集成测试运行您的测试，这些测试在`integration-test`阶段执行。

有许多教程用于设置 Maven 以运行集成测试。 [这里](http://onjavahell.blogspot.com.au/2009/05/integration-testing-with-maven-20.html)和[这里](http://docs.codehaus.org/display/MAVENUSER/Maven+and+Integration+Testing)有几个首发。[故障安全插件](https://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html)通常用于执行集成测试。

我不记得集成测试是否`target/classes`在类路径中使用了您的项目的 JAR 文件。但如果不是，您总是可以创建另一个 Maven 项目，在其中添加您的测试并将主项目添加为该集成测试项目的依赖项。在某些情况下，如果它不仅仅是一个标准 Java 库，例如，如果您正在编写一个注释处理器，那么这可能比在主项目中使用集成测试阶段更可取。

# php - 发布值的文本字段 OrderForm

> ID：12198053
> 
> 赞同：0
> 
> 时间：2012-08-30T13:30:58.607
> 
> 标签：php, mysql, forms

我有多本书可供人们订购。所有这些书都存储在 MySQL 数据库中。人们可以在文本字段中输入值 (INT)。示例：第一册值 = [5]。但是当我输入提交时，它只会显示该文本字段的最后输入值。

我该如何安排，如果人们只在某些文本字段中输入值然后点击提交，他们会看到他们订购的产品及其价值。谢谢 ：）

我的代码

```
 <table width="990">
        <form name="form" action="<?php $_SERVER['PHP_SELF']; ?>" method="post">
        <tr>
            <td width="93" class="main">Bestelnummer</td>
            <td width="550" class="main">Titel</td>
            <td width="100" class="main">Categorie</td>
            <td width="150" class="main">Type Onderwijs</td>
            <td width="80" class="main">Groep</td>
            <td width="50" class="main">Prijs</td>
            <td width="40" class="main">Aantal</td>
        </tr>
<?php
    // Laat Resultaten zien
    $s = "SELECT * FROM producten ORDER BY id ASC";
    $sql = (mysql_query($s))or die ("FOUT: " . mysql_error());   
    while($row = mysql_fetch_array($sql))
    { 
        $id = $row['id'];
        echo "<tr>";
        echo "<td width='93'>" .$row['bestelnummer']. "</td>"; 
        echo "<td width='550'><a href='".$row['link']."' target='_blank' title='".$row['titel']."' >" .$row['titel']. "</a></td>"; 
        echo "<td width='100'>" .$row['categorie']. "</td>";
        if ($row['onderwijs'] == "BO") { echo "<td width='150'>Basis Onderwijs</td>"; } elseif ($row['onderwijs'] == "VO") { echo "<td width='150'>Voortgezet Onderwijs</td>"; } else { }
        echo "<td width='80'>" . $row['groep'] . "</td>"; 
        if ($row['prijs'] == 0) { echo "<td width='50'><i>gratis</i></td>"; } else { echo "<td width='50'>&euro; " .$row['prijs']. "</td>"; }
        echo "<td width='40'><input type='text' name='nummer".$id."' title='nummer".$id."' class='aantal' maxlength='4' /></td>";
        echo "</tr>";
    }
?>
        <tr>
            <td><input type="submit" name="submit" value="Plaats bestelling" class="verzend"/></td>
        </tr>
        </form> 
        </table>
        <?php if (isset($_POST['submit']))
        {
            if (empty($_POST['aantal']))
            {
                echo "L33g";    
            }
            else
            {
                $_POST['nummer".$id."'];
            }
        }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:38:09.993

你最好使用数组，所以使用

```
<input type='text' name='nummer[".$id."]' title='nummer".$id."' class='aantal' maxlength='4' /> 
```

然后更换

```
$_POST['nummer".$id."']; 
```

和

```
foreach($_POST['nummer'] as $value) {
    echo $value;
} 
```

# javascript - 将json数据放入数组

> ID：12198055
> 
> 赞同：3
> 
> 时间：2012-08-30T13:31:09.840
> 
> 标签：javascript, jquery, json

我目前正在使用 jquery 和 javascript 来获取 json 数据，我想将其添加到列表中。从其源接收的原始数据如下所示；

```
null({"groups": "Blacksheep,Family,Voice,Technical,Band"}) 
```

用一些代码我的输入出来

```
Blacksheep,Family,Voice,Technical,Band 
```

我的代码采用这些值并将它们放入 for 循环中，为每个条目循环一次。然后它获取该条目的名称并将其放入`<li>`我的 html 文档中`<ul>`名为`people`.

```
for (i=0 ; i < input.length ; i++){
    console.log(input);
    document.getElementById("people").innerHTML += "<li>" + input[i] + "</li>";
} 
```

我试图把它变成一个数组，但在每一边都添加了一个“[”，但显然这并不容易。目前它需要 json 条目并列出每个字母而不是单词。

有没有办法将每个单词与json分开？或将其解释为数组的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T13:34:22.490

你可以拆分var

```
"Blacksheep,Family,Voice,Technical,Band".split(','); 
```

这返回一个数组字符串..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:35:35.237

数据是一个字符串。您可以使用`.split(delimiter)`拆分单词。

```
//split by ",". now input is an array
input = input.split(','); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T13:34:07.660

获取字符串并使用 .split 将其转换为数组

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T13:36:54.540

这应该这样做。正如所有答案都提到拆分字符串。

```
var arr = "Blacksheep,Family,Voice,Technical,Band";
var input = arr.split(",");

for (i=0 ; i < input.length ; i++){
    console.log(input);
    document.getElementById("people").innerHTML += "<li>" + input[i] + "</li>";
} 
```

# c# - 仅捕获特定的 HttpException

> ID：12198063
> 
> 赞同：5
> 
> 时间：2012-08-30T13:31:42.610
> 
> 标签：c#, asp.net, webforms

我是 aspx 网络表单的新手。

我想在我的 Web 应用程序中捕获一个特定的异常 - `Validation of viewstate MAC failed`.
我试过这个（在 Global.asax.cs 中）：

```
protected void Application_Error(object sender, EventArgs e)
{
  HttpException lastErrWrapper = Server.GetLastError() as HttpException;

  if ((uint)lastErrWrapper.ErrorCode == 0x80004005)
  {
      // do something
  }         
} 
```

问题是它捕获了所有未处理的 HttpExceptions。

实现这一目标的最佳方法是什么？

* * *

编辑：

在进一步检查这个问题时，我发现内部异常是 a `ViewStateException`，但它似乎没有特定的“errorCode”属性

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:48:42.287

这应该这样做

```
if ((lastErrWrapper != null) && (lastErrWrapper.InnerException != null) 
  && (lastErrWrapper.InnerException is ViewStateException)
{
} 
```

HttpException 旨在使所有与 HTTP/web 相关的东西都可以被一个处理程序捕获，因此您需要深入研究并查看原始异常。ViewStateException 可能会捕获其他几个与视图状态相关的错误，但这可能没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T12:00:25.310

以下是我们为帮助应对 globa.asax 中的 ViewState 错误而实施的内容：

```
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)

    Dim context As HttpContext = HttpContext.Current
    Dim exception As Exception = Server.GetLastError

    'custom exception handling:
    If Not IsNothing(exception) Then

        If Not IsNothing(exception.InnerException) Then

            'ViewState Exception:
            If exception.InnerException.GetType = GetType(ViewStateException) Then
                'The state information is invalid for this page and might be corrupted.

                'Caused by VIEWSTATE|VIEWSTATEENCRYPTED|EVENTVALIDATION hidden fields being malformed
                ' + could be page is submitted before being fully loaded
                ' + hidden fields have been malformed by proxies or user tampering
                ' + hidden fields have been trunkated by mobile devices
                ' + remotly loaded content into the page using ajax causes the hidden fields to be overridden with incorrect values (when a user navigates back to a cached page)

                'Remedy: reload the request page to replenish the viewstate:
                Server.ClearError()
                Response.Clear()
                Response.Redirect(context.Request.Url.ToString, False)
                Exit Sub
            End If

        End If

    End If

End Sub 
```

# c++ - avr-gcc 上的自动释放

> ID：12198064
> 
> 赞同：2
> 
> 时间：2012-08-30T13:31:45.127
> 
> 标签：c++, memory, embedded, avr-gcc

对 8 位 AVR 微控制器进行编程时，我遇到了如下代码所示的行为：

```
 class classA
  {
      public:
          classA(Display *d) : _d(d) { _d->println("classA()", 0); }
          ~classA() { _d->println("~classA()", 1); }
          uint8_t array[200];
          Display *_d;
  };
  void useClassA(classA *a)
  {
      a->array[3] = 5;
  }
  void SomeClass::start()
  {
      SYSTEM_DISPLAY_FREE_RAM();
      debugMethod();
      _ui->lcd().println("after debugMethod", 3);
      SYSTEM_WAIT_DEBUG_BUTTON();
      SYSTEM_DISPLAY_FREE_RAM();
  }
  void SomeClass::debugMethod()
  {
      _ui->lcd().println("entered debugMethod", 3);
      SYSTEM_WAIT_DEBUG_BUTTON();
      SYSTEM_DISPLAY_FREE_RAM();

      _ui->lcd().println("before while", 3);
      SYSTEM_WAIT_DEBUG_BUTTON();
      volatile uint8_t i = 1;
      while (i != 0) 
      {
          classA cA(&_ui->lcd());
          SYSTEM_DISPLAY_FREE_RAM();
          cA.array[199] = i--;
          useClassA(&cA);
      }
      _ui->lcd().println("after while", 3);
      SYSTEM_WAIT_DEBUG_BUTTON();
      SYSTEM_DISPLAY_FREE_RAM();
  } 
```

SYSTEM_DISPLAY_FREE_RAM() 计算可用 RAM，如 [http://jeelabs.org/2011/05/22/atmega-memory-use/](http://jeelabs.org/2011/05/22/atmega-memory-use/)中所述。当执行到达 SomeClass::start() 我得到以下输出：

```
 Free Ram: 2677
  entered debugMethod
  Free Ram: 2458
  before while
  classA()
  Free Ram: 2458
  ~classA()
  after while
  Free Ram: 2458
  after debugMethod
  Free Ram: 2677 
```

尽管`classA`在 内部创建和销毁了对象`while`，但内存似乎是在 的乞求时分配的`debugMethod()`，并且一直保留到方法结束。我希望仅在一段时间内分配内存，因此使用`Free Ram: 2458`.

对发生的事情有任何解释吗？

有没有办法在`while`不使用`new`关键字的情况下强制在 内部进行分配？

使用的编译器：avr-gcc (WinAVR 20100110) 4.3.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:42:43.033

通常，整个函数的堆栈帧是在函数开始时分配的。您可以尝试 gcc 参数，该参数`--param min-pretend-dynamic-size=100` 将尝试为超过 100 字节的对象动态分配和释放堆栈 [1]。

gcc 可以向您显示带有`-S`开关的汇编代码，查看它以了解正在发生的事情，以及 --param min-pretend-dynamic-size 是否对您的平台和功能有任何影响。

在您的情况下，另一个解决方案是将 while() 循环的主体移动到一个新函数中，因为这将创建/销毁包含 classA 对象的堆栈框架。

[1] gcc 文档：

**最小假装动态大小**

> 强制任何以字节为单位的大小等于或大于指定值的自动对象被动态分配，就好像它们的大小在编译时是未知的。这使得它们的存储能够在包含它们的块的末尾被释放，如果多个使用大量堆栈的函数被内联到一个函数中，则可以减少总堆栈使用量。它不会对适合分配给寄存器的对象产生任何影响（即，足够小并且没有占用其地址的对象），也不会对分配在函数最外层块中的对象产生任何影响。默认值为零，导致其大小在编译时已知的对象在函数入口处分配存储空间。

# iphone - CAEmitterLayer 动画在设备上不起作用

> ID：12198069
> 
> 赞同：2
> 
> 时间：2012-08-30T13:31:51.783
> 
> 标签：iphone, objective-c, uitapgesturerecognizer

所以我开发了一个使用 CAEmitterLayer 的应用程序。最初我让它自动发射（当应用程序加载时，它会开始发射火花），它在模拟器和设备上都运行良好。

现在，我将其更改为在用户点击屏幕时发出。它在模拟器中运行良好。在设备上，它没有反应。请在正确的方向上帮助我。

初始化敲入`-viewDidLoad`

```
tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)]; 
```

分配于`-viewWillAppear`

```
tap setNumberOfTapsRequired:1];
[self.view addGestureRecognizer:tap];

- (void) particles {

    if (!sparkling) {

        rootLayer = [CALayer layer];
        rootLayer.bounds = CGRectMake(0, 0, 320, 480);
        CGColorRef color = [[UIColor clearColor] CGColor];
        rootLayer.backgroundColor = color;
        CGColorRelease(color);

        const char* fileName = [[[NSBundle mainBundle] pathForResource:@"DazStarOutline" ofType:@"png"] UTF8String];
        CGDataProviderRef dataProvider = CGDataProviderCreateWithFilename(fileName);
        id img = (__bridge id)CGImageCreateWithPNGDataProvider(dataProvider, NULL, NO, kCGRenderingIntentDefault);

        const char* fileNameR = [[[NSBundle mainBundle] pathForResource:@"DazRing" ofType:@"png"] UTF8String];
        CGDataProviderRef dataProviderR = CGDataProviderCreateWithFilename(fileNameR);
        id imgR = (__bridge id)CGImageCreateWithPNGDataProvider(dataProviderR, NULL, NO, kCGRenderingIntentDefault);

        mortor = [CAEmitterLayer layer];
        mortor.emitterPosition = CGPointMake(320, 0);
        mortor.renderMode = kCAEmitterLayerAdditive;

        CAEmitterCell *rocket = [CAEmitterCell emitterCell];
        rocket.emissionLongitude = M_PI / 2;
        rocket.emissionLatitude = 0;
        rocket.lifetime = 2.0;
        rocket.birthRate = 1;
        rocket.velocity = 400;
        rocket.velocityRange = 100;
        rocket.yAcceleration = -250;
        rocket.emissionRange = M_PI / 4;
        color = [[UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:0.5] CGColor];
        rocket.color = color;
        CGColorRelease(color);
        rocket.redRange = 0.5;
        rocket.greenRange = 0.5;
        rocket.blueRange = 0.5;

        CAEmitterCell *spark = [CAEmitterCell emitterCell];
        spark.contents = img;
        spark.lifetime = 0.05;
        spark.yAcceleration = -250;
        spark.beginTime = 0.8;
        spark.scale = 0.4;
        spark.birthRate = 10;

        preSpark.emitterCells = [NSArray arrayWithObjects:spark, nil];
        rocket.emitterCells = [NSArray arrayWithObjects:flare, nil];
        mortor.emitterCells = [NSArray arrayWithObjects:rocket, nil];
        [rootLayer addSublayer:mortor];
        [self.view.layer addSublayer:rootLayer];

        sparkling = TRUE;
    }
} 
```

点击手势方法

```
- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {

    [self particles];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:17:37.740

所以我下载了你的项目。两个问题 - 一个是 CFRelease 不正确 - 您不拥有该颜色。但更重要的是，如果您从 UIColor CGColor 中获取颜色，您应该真正使用 CG 方法来复制颜色，然后管理该资源。我知道这会变得复杂，但是当你混合 CG 和 UI 时，你会变得复杂——你无法避免它。

我将您的项目转换为 ARC，然后还创建了强大的 ivars 来保存您想要使用的 UIColors（作为 CGColorRefs）。您不能创建一个诱人的 UIColor，向它询问它的 CGColorRef，然后期望当 UIColor 消失时该颜色仍然存在。

稍作[修改](http://dl.dropbox.com/u/60414145/SampleEmission%202.zip)的项目，它在模拟器和设备（iPhone 4）上运行良好。

[注意 - CAEmitter 的使用非常好 - 漂亮！！！]

# javascript - 打破javascript循环

> ID：12198077
> 
> 赞同：0
> 
> 时间：2012-08-30T13:32:09.060
> 
> 标签：javascript, for-loop

我有以下代码来使用谷歌图片搜索 API：

```
google.load('search', '1');   
    function searchComplete(searcher) {
      // Check that we got results
      if (searcher.results && searcher.results.length > 0) {
        // Grab our content div, clear it.
        var contentDiv = document.getElementById('contentimg');
        contentDiv.innerHTML = '';

        // Loop through our results, printing them to the page.
        var results = searcher.results;
        for (var i = 1; i < results.length; i++) {
          // For each result write it's title and image to the screen
          var result = results[i];
          var imgContainer = document.createElement('div');

          var newImg = document.createElement('img');
          // There is also a result.url property which has the escaped version
          newImg.src = result.tbUrl;

          imgContainer.appendChild(newImg);

          // Put our title + image in the content
          contentDiv.appendChild(imgContainer); 
```

问题是，它给了我 3 个图像结果。如何打破循环并仅显示第一个而不是 3 个图像？如果我`for (var i = 1; i < results.length; i++)`改为`for (var i = 3; i < results.length; i++)`它只显示一张图像，但显示的图像是第三张，我需要显示第一张 :) 请建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:33:39.510

根本不要使用 for 循环。只需将所有实例替换为`i`0。

```
google.load('search', '1');   
    function searchComplete(searcher) {
      // Check that we got results
      if (searcher.results && searcher.results.length > 0) {
        // Grab our content div, clear it.
        var contentDiv = document.getElementById('contentimg');
        contentDiv.innerHTML = '';

        var result = searcher.results[0];

        var imgContainer = document.createElement('div');

        var newImg = document.createElement('img');
        // There is also a result.url property which has the escaped version
        newImg.src = result.tbUrl;

        imgContainer.appendChild(newImg);

        // Put our title + image in the content
        contentDiv.appendChild(imgContainer); 
```

0 表示返回的第一项（编程中几乎所有的数字序列都从 0 开始！）因此所有其他结果都将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:35:11.000

使用`break statement`. 一旦找到图像，它将终止循环，因此您将只有第一个。

```
 for (var i = 1; i < results.length; i++) {
      // For each result write it's title and image to the screen
      var result = results[i];
      var imgContainer = document.createElement('div');

      var newImg = document.createElement('img');
      // There is also a result.url property which has the escaped version
      newImg.src = result.tbUrl;

      imgContainer.appendChild(newImg);

      // Put our title + image in the content
      contentDiv.appendChild(imgContainer);
       //Berore the end of the loop
      if(i==1)
      {
      break;
      }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:37:25.337

当您只需要一个元素时，您不需要 for 循环。您可以访问数组的第一个元素

```
result = results[0]; 
```

数组是从零开始的。所以当它包含三个图像时，图像被命名为 results[0]、results[1] 和 results[2]。

# javascript - 在 javascript 中构建自定义和简单的正则表达式

> ID：12198091
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:32:38.310
> 
> 标签：javascript, regex

我正在尝试用 js 构建简单的正则表达式。

正则表达式的规则是：

长度：6-32 个字符。

字母数字字符。

至少 1 个字母和 1 个数字。

特殊字符：不允许。

空格：不允许。

我想出了这个：`/^(?=.*\d)(?=.*[a-zA-Z])/`

但效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:38:35.080

`/^[a-zA-Z0-9]{6,32}$/`完成所需的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:39:23.427

长度：6 - 32 个字符：

```
/^.{6,32}$/ 
```

只有字母数字：

```
/^[a-zA-Z0-9]{6,32}$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:46:35.663

使用负前瞻：

```
/(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{6,32})$/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T13:42:53.663

正则表达式**不是**一种编程语言。不要试图把所有的逻辑都塞进去。

您有 3 个条件 - 使用 3 个正则表达式！

```
/^[a-zA-Z0-9]{6,32}$/.test(string) && /[a-zA-Z]/.test(string) && /[0-9]/.test(string) 
```

# javascript - jQuery addClass/removeClass 过渡不流畅但卡顿

> ID：12198097
> 
> 赞同：1
> 
> 时间：2012-08-30T13:32:55.487
> 
> 标签：javascript, jquery, animation, transition, addclass

在图片库中，我尝试使所有图片不悬停灰度：

```
$('.featured_product_item').mouseover(function() {

    $('.featured_product_item').not(this).addClass('greyscale',200);

});

$('.featured_product_item').mouseout(function() {

    $('.featured_product_item').removeClass('greyscale',200);

}); 
```

但是，如果您在第一个动画完成之前将鼠标移动到另一个项目，这并不顺利……您如何以更好的方式实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:11:32.553

你应该尝试`.mouseenter()`和`.mouseleave()`。

[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

**只有当鼠标从元素外**变为元素**内**时，该`mouseenter`事件才会触发。反之亦然。 ****`mouseleave`****

 ****这样，您就不会看到口吃行为，`mouseover`因为每次鼠标移动并且您在元素**上方**时，都会触发该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:44:34.093

使用停止的效果

```
$(document).ready(function() {

    $(".featured_product_item").mouseover(function () {
        $('.featured_product_item').not(this).stop(true,true).addClass("selected", 1000);
    });

    $(".featured_product_item").mouseout(function () {
        $('.featured_product_item').stop(true,true).removeClass("selected",1000);
    });

});​ 
```

请检查 jQuery 手册以获取[停止](http://api.jquery.com/stop/)

这是[JSFiddle](http://jsfiddle.net/XqGUm/)

**笔记**

我不确定您是否正确使用 addClass 和 removeClass。我在使用第二个参数的动画时间的手册中没有找到任何参考。从手册：

> .addClass（函数（索引，currentClass））
> 
> **function(index, currentClass)**一个函数，返回一个或多个以空格分隔的类名，以添加到现有的类名中。接收集合中元素的索引位置和现有类名作为参数。在函数中，this 指的是集合中的当前元素。

**更新**

我在错误的地方放了一些代码，错过了停止的额外参数。请检查上面的代码和新的[jsfiddle](http://jsfiddle.net/XqGUm/2/)。****

# jquery - 使用按钮与 jquery 一起操作 ctrl 键+鼠标滚动进出：浏览器窗口调整大小/缩放

> ID：12198099
> 
> 赞同：1
> 
> 时间：2012-08-30T13:32:59.257
> 
> 标签：jquery, browser, click, window, zooming

好的，如果您按住 CTRL 按钮并在鼠标上滚动，它将缩小浏览器窗口，反之亦然。如何使用 jQuery 将此操作与单击事件联系起来？

```
$('#zoomOut').click(function(){ 
    //Enter Some Code Here
});
$('#zoomIn').click(function(){ 
    //Enter Some Code Here
}); 
```

它会像 keyDown(); 和滚动（）；在一起，我真的不确定...

谢谢 DJ.E

# c# - 代码不会在 C# 中捕获 FormatException

> ID：12198100
> 
> 赞同：2
> 
> 时间：2012-08-30T13:32:59.510
> 
> 标签：c#, exception-handling, try-catch, formatexception

我在课堂上有以下方法`ProductServices`：

```
public bool IsDownloadAllowed(int Id, string productId)
{
  if (CustomStringFunctions.IsGuid(productId))
  {
     //Do Something
  }
  else
  {
     throw new FormatException("The Guid must be a valid Guid!");
  }
} 
```

如果我使用以下说明中的方法：

```
var _productServices = new ProductServices();
try
{
   var flag = _productServices.IsDownloadAllowed(Id, productId);
   //do something
}

catch (Exception e)
{
   //handle exception
} 
```

该`catch`语句未捕获异常。我也尝试用没有运气的方式`Exception`替换`FormatException`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:35:13.113

您必须在此代码中有静音异常

```
if (CustomStringFunctions.IsGuid(productId))
  {
     //Do Something
  } 
```

您必须确保在发生异常时抛出异常（在做某事中）

静音异常示例

```
Try
{

}
Catch(Exception ex)
{
   //throw don't exist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:35:27.710

您的代码看起来正确。对您的问题的一个可能解释`CustomStringFunctions.IsGuid`是错误地返回`true`，因此`\\do something`正在执行分支而不是抛出异常的分支。

# android - Andengine游戏音乐在锁屏上恢复

> ID：12198103
> 
> 赞同：2
> 
> 时间：2012-08-30T13:33:09.537
> 
> 标签：android, andengine

我开发了一个游戏使用`andengine`

我在使用电源时遇到问题`Button`。如果我`Button`在玩游戏时按下电源，屏幕会关闭，并且`onPause()`会按预期调用。但是当我再次按下`HOME`按钮或`POWER`按钮打开屏幕时，`onResume()`方法被调用但`lockscreen`显示出来。

在`onResume()`方法中，我恢复了游戏的音乐。

所以结果`lockscreen`出现了，但游戏音乐在后台播放。我不想播放中的音乐`lockscreen`。请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:02:11.413

解决方案在这里：[屏幕解锁时的活动句柄](https://stackoverflow.com/questions/9747564/activity-handle-when-screen-unlocked/9747602#9747602)

通过注册`BroadcastReceiver`过滤`Intent.ACTION_SCREEN_ON`,`Intent.ACTION_SCREEN_OFF`和`Intent.ACTION_SCREEN_PRESENT`操作，您将能够处理以下 3 种情况：

*   `Intent.ACTION_SCREEN_OFF`：当`POWER`按下按钮并且屏幕变黑时。
*   `Intent.ACTION_SCREEN_ON`：当`POWER`再次按下按钮并显示锁屏时。
*   `Intent.ACTION_SCREEN_PRESENT`: 当你通过 locksreen 并回到你的游戏中时。

**但是**，在我的情况下（使用带有 Froyo 2.2 的 Galaxy S GT I9000）在处理`HOME`按钮时不会调用这些操作（我认为这是一种一般行为）。

`HOME`处理暂停和`POWER`恢复音乐的按钮的一种简单快速（但可能不是最好的）方法可能是保留`onPause`and`onResume`方法并使用像这样的简单布尔标志：

```
private boolean mPowerButton = false;

@Override
public void onPause() {
    super.onPause();

    // Pause your music
    Log.d("Game activity", "Music paused");
}

@Override
public void onResume() {
    super.onResume();

    if (!this.mPowerButton) {
        // Resume your music
        Log.d("Game activity", "[HOME button] Music resumed inside onResume");
    }
}

public class receiverScreen extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // This is the lockscreen, onResume has been already called at this  
            // step but the mPowerButton boolean prevented the resumption of music
        }

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            LevelActivity.this.mPowerButton = true;
        }

        if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
            // Resume your music
            Log.d("Game activity", "[POWER button] Music resumed inside ACTION_USER_PRESENT action");
            LevelActivity.this.mPowerButton = false;
        }
    }
} 
```

希望能帮助到你！

# python - 打印 unicode 字符串在 python 3.2 中有效，但在 2.7 中无效

> ID：12198105
> 
> 赞同：3
> 
> 时间：2012-08-30T13:33:13.603
> 
> 标签：python, unicode

我使用 Python 3.2 处理带有 utf-8 文本的文本文件：

```
import codecs
import csv
f = codecs.open('07362853300091_trade_turquoise_errNo_031.csv', 
                                         'r','utf-8', 'ignore')
text = csv.reader(f, delimiter=',', quotechar='"')
for row in text:
    for item in row:
        print(item) 
```

工作得很好。

我现在必须使用 Python 2.7 解释器运行代码，它会打印：

> '\xd7\x97\xd7\x99\xd7\x95\xd7\x91\xd7\x94\xd7\xa8\xd7\xa2\xd7\xa6\xd7\x99\xd7\x95\xd7\x9f'

我试过了

```
item.encode('utf-8')
print unicode(item, errors='ignore') 
```

（并且还尝试了 encode() 和 unicode() 函数的其他一些组合）并且它总是打印：

> 你'\u05de\u05e9\u05d9\u05db\u05ea \u05e9\u05d9\u05e7'

如何在 Python 2.7 中将 unicode 文本打印到控制台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:43:45.047

请参阅[文档](http://docs.python.org/library/csv.html)`unicode_csv_reader()`。

作为替代方案，如果控制台理解 utf-8 并且除了将它们打印到控制台之外，您不对项目进行任何文本处理，您可以跳过解码/编码：

```
with open('07362853300091_trade_turquoise_errNo_031.csv', 'rb') as file:
     for row in csv.reader(file):
         print "\n".join(row) 
```

# r - 使用不同的指标进行 hclust 链接？

> ID：12198115
> 
> 赞同：2
> 
> 时间：2012-08-30T13:33:42.030
> 
> 标签：r, cluster-analysis

在 R 中，您可以在聚类之前使用各种度量来构建距离矩阵，例如二进制距离、曼哈顿距离等……但是，在选择链接方法时（完整、平均、单一等…… )，这些链接都使用欧几里得距离。如果您依赖差异度量来构建距离矩阵，这似乎并不特别合适。

在构建聚类树时，有没有办法（或库......）将其他距离应用于链接方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:39:15.747

我真的不明白你的问题。例如，假设我有以下数据：

```
x <- matrix(rnorm(100), nrow=5) 
```

然后我可以使用建立一个距离矩阵`dist`

```
##Changing the distance measure
d_e = dist(x, method="euclidean")
d_m = dist(x, method="maximum") 
```

然后我可以按照我的意愿聚集：

```
##Changing the clustering method
hclust(d_m, method="median") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:16:37.173

如果您已经构建了一个已经表示成对距离的矩阵，请使用例如

```
hclust(as.dist(mx), method="single") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:50:18.090

您可能想尝试使用`agnes`, 而不是`hclust`, 并给它一个距离矩阵。这里有一个很好的教程：http: [//strata.uga.edu/software/pdf/clusterTutorial.pdf](http://strata.uga.edu/software/pdf/clusterTutorial.pdf)

在本教程中，以下是生成和使用距离矩阵进行聚类的方法：

```
> library(vegan)
# load library for distance functions
> mydata.bray <- vegdist(mydata, method="bray")
# calculates bray (=Sørenson) distances among samples
> mydata.bray.agnes <- agnes(mydata.bray)
# run the cluster analysis 
```

我自己使用 Daniel Müllner 教授的[fastcluster 库](http://math.stanford.edu/~muellner/fastcluster.html)`agnes`，它具有与大型数据集完全相同的 API，但速度要快几个数量级。

# session - 在 JBoss 上记录用户会话并根据会话返回不同的视图

> ID：12198121
> 
> 赞同：1
> 
> 时间：2012-08-30T13:34:01.577
> 
> 标签：session, jakarta-ee, jboss, javabeans

我有一个 JSF 函数，它根据存储在当前查看/操作页面的用户上的某些信息返回不同的视图。即根据客户是否有金/银/铜订阅，视图将显示不同数量的信息。有没有一种 JBoss 方法可以简单地做到这一点？我读了一些关于 SessionBean 的东西，但我不确定如何实现它，或者即使 Bean 是否包含我需要的数据。

顺便说一句，我在 JBoss 7.1 上使用 JPA 2 和 Java EE 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:52:10.840

这个解决方案怎么样。

- 您可以为每种订阅类型创建 3 个单独的 bean，并在其例如：

SilverBean GoldBean BronzeBean

然后有一个名为：SomeBean 的中心 bean。现在您可以做的是在 SomeBean 中注入三个 bean。

然后，您可以拥有一个 Map，然后存储链接到订阅类型的 bean。

当用户登录时，您可以搜索他们的订阅类型，然后使用所需的 bean 呈现视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:43:26.340

```
HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest(); 
```

获取当前登录的人的名字！

# android - 无法在 android/eclipse 上的列表视图中显示值

> ID：12198129
> 
> 赞同：0
> 
> 时间：2012-08-30T13:34:25.700
> 
> 标签：android, listview

“http://54.251.60.177/StudentWebService/StudentDetail.asmx”

上面的链接是web服务，它包含两个方法，即

1.  获取学生详细信息
2.  GetStudentsDetailsXML

此方法的输入值是 两种方法的**“载体”**

我正在尝试通过 SOAP 方法从 android 使用此 Web 服务。实际上，第二种方法服务以 XML 的形式返回值，这里我尝试使用此方法并尝试将返回的值显示到列表视图中。但是在运行我的模拟器后，它只是显示黑屏。

如何达到我的要求？任何人都可以让我清楚。

请找到我的参考资料

**网络方法.java**

包 org.test.web.services；

```
public class GetStudentsDetailsXML 
{
public String GetStudentsDetailsXML(String fieldName)
{
    return fieldName;
}
} 
```

**AndroidXMLParsingActivity.java**

```
 public class AndroidXMLParsingActivity extends ListActivity 
  {

private String METHOD_NAME = "GetStudentsDetailsXML";
private String NAMESPACE = "http://tempuri.org/";
private String SOAP_ACTION ="http://tempuri.org/GetStudentsDetailsXML";
private static final String URL = "http://54.251.60.177/StudentWebService/StudentDetail.asmx?WSDL";

EditText edt1,edt2;
Button btn;
TextView tv;

static final String URL_XML = "http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetStudentsDetailsXML";

//XML node keys

static final String KEY_TABLE = "Table"; // parent node
static final String KEY_FIELDTYPE = "FieldType";
static final String KEY_FIELDFORMAT = "FieldFormat";
static final String KEY_SAMPLE = "Sample";
static final String KEY_SEARCH = "SearchTags";

@Override
public void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn = (Button)findViewById(R.id.button_get_result);
    edt1 = (EditText)findViewById(R.id.editText1);

    btn.setOnClickListener(new View.OnClickListener()
    {
     public void onClick(View v)
     {

     //Initialize soap request + add parameters

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

        //Use this to add parameters
        request.addProperty("fieldName",edt1.getText().toString());

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;

        try 
        {

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        //this is the actual part that will call the webservice

        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

        System.out.println("Result : "+ result.toString());
     }

     catch (Exception E) 
     {
      E.printStackTrace();
                }
            }
        });     

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();

    String xml = parser.getXmlFromUrl(URL_XML); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_TABLE);

    // looping through all item nodes <item>

    for (int i = 0; i < nl.getLength(); i++) 
    {

        // creating new HashMap

    HashMap<String, String> map = new HashMap<String, String>();
    Element e = (Element) nl.item(i);

    // adding each child node to HashMap key => value

    map.put(KEY_FIELDTYPE,   parser.getValue(e, KEY_FIELDTYPE));
    map.put(KEY_FIELDFORMAT, parser.getValue(e, KEY_FIELDFORMAT));
    map.put(KEY_SAMPLE, parser.getValue(e, KEY_SAMPLE));
    map.put(KEY_SEARCH, parser.getValue(e, KEY_SEARCH));

    // adding HashList to ArrayList

    menuItems.add(map);
    }

    // Adding menuItems to ListView

    ListAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.list_item,new String[] { KEY_FIELDFORMAT, KEY_SEARCH, KEY_SAMPLE }, new int[] 
            {R.id.FieldFORMAT_textView, R.id.Search_TEXTVIEW, R.id.Sample_TEXTVIEW });

    setListAdapter(adapter);

    // selecting single ListView item

    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() 
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) 
        {
            // getting values from selected ListItem

            String FieldFormat = ((TextView) view.findViewById(R.id.FieldFORMAT_textView)).getText().toString();
            String Sample = ((TextView) view.findViewById(R.id.Sample_TEXTVIEW)).getText().toString();
            String Search = ((TextView) view.findViewById(R.id.Search_TEXTVIEW)).getText().toString();

            // Starting new intent

            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_FIELDFORMAT, FieldFormat);
            in.putExtra(KEY_SAMPLE, Sample);
            in.putExtra(KEY_SEARCH, Search);
            startActivity(in);

        }
    }); } } 
```

**SingleMenuItemActivity.java**

```
public class SingleMenuItemActivity  extends Activity 
{

// XML node keys

static final String KEY_FIELDFORMAT = "FieldFormat";
static final String KEY_SAMPLE = "Sample";
static final String KEY_SEARCH = "SearchTags";

@Override

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String Fieldformat = in.getStringExtra(KEY_FIELDFORMAT);
    String Sample = in.getStringExtra(KEY_SAMPLE);
    String Search = in.getStringExtra(KEY_SEARCH);

    // Displaying all values on the screen

    TextView lblName = (TextView) findViewById(R.id.fieldformat_label);
    TextView lblCost = (TextView) findViewById(R.id.Sample_label);
    TextView lblDesc = (TextView) findViewById(R.id.Search_label);

    lblName.setText(Fieldformat);
    lblCost.setText(Sample);
    lblDesc.setText(Search);
}} 
```

**XMLParser.java**

```
 public class XMLParser 
 {

// constructor
public XMLParser() 
{

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String urlxml) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(urlxml);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
 } 
```

提前致谢！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:04:36.343

行后：

```
// selecting single ListView item

ListView lv = getListView(); 
```

如果与 lv 相关的适配器是适配器（上面几行），我会这样说，尽管它适用于 ArrayAdapter 而不是 ListAdapter：

```
lv.setAdapter(adapter); 
```

然后，您必须使用 adapter.add 将元素添加到适配器（您添加的内容，如果根据文档我没记错的话，这是一个字符串），当全部添加时添加：

```
adapter.notifyDataSetChanged(); 
```

最后一个是使元素显示在屏幕上

# c# - 循环遍历数据表

> ID：12198131
> 
> 赞同：21
> 
> 时间：2012-08-30T13:34:32.823
> 
> 标签：c#, datatable, dataset

好。我有一个包含多列和多行的 DataTable。

我想动态循环遍历 DataTable 基本上输出应该如下所示，不包括大括号：

```
Name (DataColumn)
Tom  (DataRow)
Peter (DataRow)

Surname (DataColumn)
Smith (DataRow)
Brown (DataRow)

foreach (DataColumn col in rightsTable.Columns)
{
     foreach (DataRow row in rightsTable.Rows)
     {
          //output              
     }
} 
```

我把它打出来，发现这行不通。有人可以就这样做的更好方法提出建议吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-30T13:39:09.450

```
foreach (DataColumn col in rightsTable.Columns)
{
     foreach (DataRow row in rightsTable.Rows)
     {
          Console.WriteLine(row[col.ColumnName].ToString());           
     }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-30T13:39:55.513

```
 foreach (DataRow row in dt.Rows) 
     {
        foreach (DataColumn col in dt.Columns)
           Console.WriteLine(row[col]);
     } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-19T07:42:38.310

请尝试以下代码：

```
//Here I am using a reader object to fetch data from database, along with sqlcommand onject (cmd).
//Once the data is loaded to the Datatable object (datatable) you can loop through it using the datatable.rows.count prop.

using (reader = cmd.ExecuteReader())
{
// Load the Data table object
  dataTable.Load(reader);
  if (dataTable.Rows.Count > 0)
  {
    DataColumn col = dataTable.Columns["YourColumnName"];  
    foreach (DataRow row in dataTable.Rows)
    {                                   
       strJsonData = row[col].ToString();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-16T10:16:49.360

如果要更改数据表中每个单元格的内容，那么我们需要创建另一个数据表并使用“导入行”将其绑定如下。如果我们不创建另一个表，它会抛出一个异常，说“Collection was Modified”。

考虑以下代码。

```
//New Datatable created which will have updated cells
DataTable dtUpdated = new DataTable();

//This gives similar schema to the new datatable
dtUpdated = dtReports.Clone();
foreach (DataRow row in dtReports.Rows)
{
    for (int i = 0; i < dtReports.Columns.Count; i++)
    {
        string oldVal = row[i].ToString();
        string newVal = "{"+oldVal;
        row[i] = newVal;
    }
    dtUpdated.ImportRow(row); 
} 
```

这将使所有单元格都以 Paranthesis({) 开头

# c# - .NET CF 3.5 版本，我如何找到其中包含的错误或修复？

> ID：12198134
> 
> 赞同：1
> 
> 时间：2012-08-30T13:34:45.117
> 
> 标签：c#, compact-framework, windows-ce

我在 Window CE 6.0 上运行一个应用程序，并且我有 .NET CF 3.5.7283（我通过运行 cgacutil.exe 知道这一点）

我有一个问题，我在 MS 网站上看到一篇文章，网址为[http://support.microsoft.com/kb/979447](http://support.microsoft.com/kb/979447)

我正在尝试确定此 KB 中的问题是否已在 build 7283 下修复，但我似乎无法找到该版本附带的修复问题列表...您知道指向资源的链接吗？最新的 .NET CF 3.5 版本以及该版本包含哪些错误/修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:44:11.090

Wikipedia 上的 CF 版本表显示 3.5.7283（它是 SP1 IIRC），发布日期为 2008 年 1 月。你提到的 KB 修复直到 2010 年 1 月才发生，所以我敢说你没有修复。我猜您至少需要 3.5.10181，这将在 CE 6.0 的 2010 QFE 汇总中。3.5.11125 将在[2011 QFE 汇总](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=28753)中。

# jquery-click-event - JQuery click 只触发一个动作

> ID：12198138
> 
> 赞同：0
> 
> 时间：2012-08-30T13:35:09.290
> 
> 标签：jquery-click-event

谁能帮我理解为什么这不起作用？

```
<div id="css-check" class="css-check tool-tip checkbox inline" ... 
    <input id="someid" name="somename" type="checkbox" value="somevalue" />
</div>

$('.css-check').bind({
  click: function() {
    $(this).toggleClass('clicked');
    this.children[0].click();   
  },
  mouseenter: function() {
    // do something on mouseenter
  }
}); 
```

只采取第一个动作。因此，类被切换，但复选框，即 div 的 [0] 子项，没有被点击。

**编辑**

这行得通。

```
var $checkbox = $(this).children('input:first-child');
$checkbox.prop('checked', !$checkbox[0].checked);
$(this).toggleClass('clicked'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:37:09.393

改变：

```
this.children[0].click(); 
```

到：

```
$(this).children('input:first-child').click(); 
```

注意：这会触发点击事件，如果要选中复选框，请使用：

```
$(this).children('input:first-child').attr('checked', 'true'); 
```

# javascript - 如何放置变量而不是文字数字？

> ID：12198139
> 
> 赞同：0
> 
> 时间：2012-08-30T13:35:09.643
> 
> 标签：javascript, html, svg, literals, substitution

我想替换这一行：

```
 polygon.setAttribute("points", "50,0 200,0 125,150"); 
```

它适用于永久号码：

[演示 jsFiddle](http://jsfiddle.net/centerwow/CCr5T/13/)

用这条线：

```
polygon.setAttributeNS (null, "points", ("LeftWidth,0 RightWidth,0 RopTringleX,RopTringleY")); 
```

[jsfiddle 演示](http://jsfiddle.net/centerwow/CCr5T/14/)

我怎样才能做到这一点？很多谢谢。

编码：

```
function CreateSVG () {
            var xmlns = "http://www.w3.org/2000/svg";
            var boxWidth = 250;
            var boxHeight = 250;
            var LeftWidth=(250-boxHeight)/2;
            var RightWidth=250-LeftWidth;
            var RopTringleX=(RightWidth-(boxWidth/2));
            var RopTringleY=(boxHeight);

            var svgElem = document.createElementNS (xmlns, "svg");
            svgElem.setAttributeNS (null, "viewBox", "0 0 " + boxWidth + " " + boxHeight);
            svgElem.setAttributeNS (null, "width", 250);
            svgElem.setAttributeNS (null, "height", 250);
            svgElem.style.display = "block";

            var polygon = document.createElementNS (xmlns, "polygon");
            svgElem.appendChild (polygon);
alert(RopTringleY);        

            polygon.setAttributeNS (null, "points", ("LeftWidth,0 RightWidth,0 RopTringleX,RopTringleY"));

            var path = document.createElementNS (xmlns, "path");
            path.setAttributeNS (null, 'stroke', "white");
            path.setAttributeNS (null, 'stroke-width', 4);
            path.setAttributeNS (null, 'fill', "yellow");
            polygon.appendChild (path);

            var svgContainer = document.getElementById ("svgTriangle");

            svgContainer.appendChild (svgElem); 
            alert(boxWidth + ' ' + boxHeight);     
        }
CreateSVG ();
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:23:13.060

```
polygon.setAttribute("points", LeftWidth + ",0 " + RightWidth + ",0 " + RopTringleX + "," + RopTringleY); 
```

# javascript - 将文本添加到 jquery UI 选项卡控件的标题

> ID：12198142
> 
> 赞同：5
> 
> 时间：2012-08-30T13:35:15.593
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

我想在 jquery UI 选项卡控件的标题中添加一些文本（见图）。如果我能把它放在右边就好了。

![在此处输入图像描述](../Images/10ba2495d834b8de8a263a610d703404.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T13:44:21.300

像这样的东西

```
$("#id_of_tab_element").tabs(); //init of your tabs element
var textElement = $("<span></span>");
textElement.text("text here..."); 
```

应用样式并追加

```
textElement.css('position', 'absolute');
textElement.css('right', '20px');
$("#id_of_tab_element").append(textElement); 
```

您还可以在 css 中定义样式并将类应用于元素

看到[这个](http://jsfiddle.net/Ufk32/)小提琴

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T13:42:27.577

```
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
        <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#tabs-1">Nunc tincidunt</a></li>
        <li class="ui-state-default ui-corner-top"><a href="#tabs-2">Proin dolor</a></li>
        <li class="ui-state-default ui-corner-top"><a href="#tabs-3">Aenean lacinia</a></li>
       <span style="float: right;">hello</span>
</ul> 
```

# java - 在 glassfish 上托管 maven 生成的站点

> ID：12198143
> 
> 赞同：0
> 
> 时间：2012-08-30T13:35:16.827
> 
> 标签：java, maven, glassfish, maven-site-plugin

我有 glassfish 服务器，用于托管 jenkins 以进行持续集成。该构建会生成一个 Maven 站点。有没有办法可以将此 maven 站点部署到 glassfish 中以便可以远程查看？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:38:26.857

将其捆绑为战争文件。只需创建一个空的 .war 并将 files/dir 结构粘贴到其中。制作一个 WEB-INF/web.xml 并将欢迎页面定义为索引页面。

# asp.net - 只能打开2个并发sql连接（asp.net VB）

> ID：12198150
> 
> 赞同：1
> 
> 时间：2012-08-30T13:35:35.187
> 
> 标签：asp.net, sql-server, vb.net

我在正在处理的 Web 应用程序中有一个非常复杂的数据结构，它需要一次连接到 MSSQL 数据库的 3 个连接，而不是 ID，但它是实现目前所需的唯一方法。

我在 web.config 中设置了我的连接字符串，如下所示：

```
 <connectionStrings>
    <add name="Foo_mainConnectionString1" connectionString="Data Source=GDE-WK-003\SQLEXPRESS;Initial Catalog=Foo_main;Integrated Security=True" providerName="System.Data.SqlClient" />
    <add name="Foo_mainConnectionString2" connectionString="Data Source=GDE-WK-003\SQLEXPRESS;Initial Catalog=Foo_main;Integrated Security=True" providerName="System.Data.SqlClient" />
    <add name="Foo_mainConnectionString3" connectionString="Data Source=GDE-WK-003\SQLEXPRESS;Initial Catalog=Another_FOO;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

如上所述设置时（到同一个 DB 的 2 个连接），它工作正常（尽管第三个“Another_FOO”是项目已停产部分中未使用的一个。

因此，为了建立另一个连接，我将“Another_FOO”更改为“Foo_Main”，为我提供了 3 个到同一个数据库的连接。

在尝试运行该网站时，现在似乎没有建立任何连接。

任何想法为什么会这样？是否可能存在我找不到的连接限制？

# c# - XElement DataType 到 Newtonsoft.json

> ID：12198151
> 
> 赞同：0
> 
> 时间：2012-08-30T13:35:36.573
> 
> 标签：c#, json, linq-to-xml, json.net

我是 json 新手，在尝试使用特定数据类型序列化我的对象时遇到了一些问题。

我正在尝试将我的 XElement 对象序列化为 Newtonsoft json。这是我的代码：

```
var nodes = new XElement("nodes");
nodes.Add(new XElement("name", "Anna"));
nodes.Add(new XElement("group", 0));

context.Response.Write(JsonConvert.SerializeXNode(nodes, Formatting.Indented, true)); 
```

回应是：

```
{
 "nodes": [
  {
    "name": "Anna",
    "group": "0"
  }
]} 
```

我需要将 Xelement GROUP 转换为整数（“group”：0），但它始终采用 strnig 格式。如何管理数据类型？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:48:39.267

请参阅：[如何 XML 序列化“类型”](https://stackoverflow.com/questions/290867/how-to-xml-serialize-a-type)

XML 不会序列化类型信息，因此您可能需要将 XML 反序列化为对象并将其序列化为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:57:57.470

如果不是必须从 XElement 序列化，您可以使用`ExpandoObject`

```
dynamic obj = new ExpandoObject();
obj.nodes = new object[] { new { name = "Anna", group = 0 } };

var jstr = JsonConvert.SerializeObject(obj, Newtonsoft.Json.Formatting.Indented); 
```

# javascript - Defining custom objects and functions in JavaScript

> ID：12198161
> 
> 赞同：0
> 
> 时间：2012-08-30T13:36:12.020
> 
> 标签：javascript, ecmascript-5, jscript

Can someone explain what is wrong with this JavaScript example, and how to fix it if possible?

```
 // I can define objects / functions like this.
    window['Custom'] = function() { };
    //Works...I now have a 'Custom' function in scope... I can now do this...

    var c = new Custom(); // WORKS!!

    //This does not seem to work!
    window['Custom.prototype.msg'] = function(msg) {
        alert(msg);
    };

    // I DO NOT WANT TO DO THIS!
    Custom.prototype.msg = function(msg) { alert(msg); };

    x.msg("Hello");
    //FireFox Error: TypeError: x.msg is not a function...
    // HOW DO I FIX THIS!? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:37:26.560

You want:

```
window.Custom.prototype.msg = function(msg) { ... } 
```

The bracket notation takes a string, but the string won't be interpreted as an object graph expression; it's just a string. Thus, `window["Custom.prototype.msg"]` creates a global function called "Custom.prototype.msg".

*edit* — this would also work:

```
window["Custom"]["prototype"]["msg"] = function(msg) { ... } 
```

So if you're working with those dotted list expressions for some reason, if you want them to be interpreted as such you'll have to break them up yourself.

# .htaccess - .htaccess 重定向与不存在的文件夹

> ID：12198164
> 
> 赞同：2
> 
> 时间：2012-08-30T13:36:33.097
> 
> 标签：.htaccess, redirect

我需要重定向以下两个 URL，如图所示：

`http://domain.com/folder/file.php -> http://domain.com/folder2/`
`http://damain.com/folder/file2.php?id=13 -> http://domain.com/folder2/`

通常我会使用类似的东西：
`RewriteRule ^/folder/file\.php /hackme/ [R]`

但似乎，由于“文件夹”不存在，重定向不能取悦。有人可以帮我弄清楚该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:04:10.643

我想你正在寻找这个：

```
RewriteEngine on

RewriteBase /

RewriteRule ^folder/file\.php folder2/ [L,R=301]

RewriteCond %{QUERY_STRING} ^id=13$
RewriteRule ^folder/file2\.php folder2/ [L,R=301] 
```

# android - android应用程序中的长时间数学计算

> ID：12198165
> 
> 赞同：4
> 
> 时间：2012-08-30T13:36:33.993
> 
> 标签：android, algorithm, computation

我是一名业余开发人员，我正在创建一个将执行长时间数学计算（例如涉及多个 for 循环）的 Android 应用程序。我在 Android 开发者网站上读到 Renderscript 是一种减少计算时间和内存的可能方法。但是，我在 C 中没有可读性（或可写性），所以我想知道是否有更有效的（时间/内存）方法来执行计算。

否则，如果真的没有其他方法，除了 Android 网站上的 Renderscript 部分之外，是否还有有用的资源可供我查看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:09:00.450

您有两种选择可以直接在设备上计算：

[渲染脚本](http://developer.android.com/guide/topics/renderscript/compute.html)：

*   (+) 支持不同类型的当前和未来架构。
*   (+) 它将在未来启用 GPU 上的计算。
*   (+) 它可以轻松扩展以在多个内核上运行。
*   (-) 最低 API 级别 11。

[安卓 NDK](http://developer.android.com/tools/sdk/ndk/index.html)：

*   (+) 跨平台代码
*   (-) 开发人员必须为每个可用架构编译应用程序。
*   (-) 如果出现新架构，则需要新的构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:05:45.523

在服务器上进行计算并将结果发送回 Android 设备怎么样？

您可以实现一个 RESTful 服务服务器端并[通过 http 从 Android 调用它](https://stackoverflow.com/questions/6047194/how-to-call-restful-web-service-from-android)。

# javascript - 跨协议 cookie iFrame

> ID：12198166
> 
> 赞同：0
> 
> 时间：2012-08-30T13:36:37.417
> 
> 标签：javascript, http, cookies, https, xss

**我在http** ://localhost/mySite/Page1.aspx上有一个网页，其中包含一个带有 src **https** ://localhost/mySite/Page2.aspx 的 iframe。

在 iframe 页面 (Page2.aspx) 中，我使用 JavaScript 设置了 cookie。我如何在父页面（Page1.aspx）上读取该 cookie ？？？看起来 Page1 没有看到 Page2 设置的 cookie。

要设置/读取 cookie，我使用 jQuery.Cookie 插件：

```
$.cookie('myKey', JSON.stringify(data), { expires: 1, path: '/', domain: 'localhost' }); 
```

顺便说一句，如果有人可以告诉我如何在这种方案中在客户端传输数据，我会很高兴知道（服务器池不是我的解决方案）。我发现它适用于 sessionStorage / localStorage，但它只适用于 IE :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:43:46.533

根据问题的评论：

这个问题是由于同源策略（SOP），它禁止不同来源的内容相互干扰。*不同的来源*不仅基于域的比较，还基于使用的协议，因为它[清楚地显示在此 Wikipedia 页面上](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)。因此，`http://localhost`与 是不同的起源`https://localhost`。

为了使这两个源能够通信：

*   [此链接](http://softwareas.com/cross-domain-communication-with-iframes)完美地描述了常用技术（iframe 代理和 URL 轮询），并在其段落“物理定律：您可以使用 IFrame 做什么”中清晰地总结了 SOP 的规则
*   [这篇其他有据可查的文章](http://shouldersofgiants.co.uk/Blog/post/2009/08/17/Another-Cross-Domain-iFrame-Communication-Technique.aspx)（从上面的文章链接）将常用技术合并到一个优雅的解决方案中
*   如果目标浏览器都是 HTML5 兼容的（即最新且符合标准的浏览器，即不是大多数 MSIE 版本），该标准引入了一个新的帧间通信系统`window.postMessage()`和`onMessage`事件

还有免费的预建解决方案（虽然我没有测试过），比如[Ternarylabs 的 Porthole](http://ternarylabs.github.com/porthole/)或[EasyXDM](http://easyxdm.net/wp/)。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T04:48:56.167

我不认为这是完全正确的。安全属性未设置为 true 的 cookie 将在域中共享，而与使用的协议无关。

对您来说真正的问题是忽略此方面的 jquery，可以通过在[此](https://stackoverflow.com/questions/5441836/jquery-cookie-values-not-maintained-while-moving-from-http-to-https)问题中`secure=true`使用 as 指定为 JSON 属性来更改它。`$.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });`

# javascript - 即使在尚未创建的对象上，我如何才能使 jQuery 工作？

> ID：12198168
> 
> 赞同：0
> 
> 时间：2012-08-30T13:36:44.570
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 jQuery 中绑定动态创建的元素](https://stackoverflow.com/questions/2238616/binding-dynamically-created-elements-in-jquery)

有没有办法可以更改以下代码：

```
$('#city')
        .focus(function () {
            $('option[value="99"]', this).remove();
            store.setItem($(this).attr('id'), $(this).val());
        })
        .change(function () {
            store.setItem($(this).attr('id'), $(this).val());
            $(this).attr("title", $("option:selected", this).attr("title"));
            $('#detailData').html("");
        }); 
```

因此，即使它们尚未创建，只要它们具有“更新标题”类，它就适用于选择。例如：

```
<select class="update-title"> 
```

我看到了一些使用 live 的实现，但有人说它不好用。这样做也有很多开销。在我确定选择是用 document.ready() 创建的之后添加代码对我来说会更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:38:17.627

看看[`on`](http://api.jquery.com/on/)。这是一个替代品，`live`它会为你做这件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:40:55.170

你需要[`on`](http://api.jquery.com/on/)：

```
$(document).on('change', '.update-title', function(event){

    // your business here

}); 
```

通过这种方式，`document`监听`.update-title`元素上触发的任何事件，无论它们在文档加载时是否存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:46:36.900

最好的方法是使用委托 - 所以你将事件处理程序绑定到在加载 dom 时存在的父元素 - 它会依次监听给定元素上的事件并处理它们

使用 jQuery 1.7+

```
$('body').on('click','.update-title', function(){ // <-- all click events will now bubble
// up to body - and it will listen for events from .update-title
    // code here
}); 
```

最佳实践是在 dom 加载时将事件处理程序绑定到最近的父级，因为您可以看到绑定到正文/文档的开销 - 所有单击事件都会冒泡 - 如果您仅绑定到父元素，则仅绑定到该元素内的父元素会冒泡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:39:46.180

是的，如果没有在 ajax 中加载 html，您确定选择是使用 document.ready() 创建的

# c# - 从 c# 中检索 Sql server 存储过程的结果集数量

> ID：12198169
> 
> 赞同：0
> 
> 时间：2012-08-30T13:36:46.980
> 
> 标签：c#, sql-server, stored-procedures, smo, multiple-resultsets

您好我正在编写一个 T4 模板来为 Sql 服务器存储过程生成访问器。我混合使用了 SMO 和 CommandBuilder 的 DeriveParameters 方法来获取我需要的几乎所有信息。

但是，我无法找到一种方法来确定存储过程是否返回以及返回多少结果集。

本质上，我正在寻找一种复制 Codesmiths SchemaExplorer CommandResults.Count 属性的方法。

我不想走上解析存储过程测试的道路。

提前喝彩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:50:55.967

SQL Server 不存储任何关于存储过程可能返回多少结果集的元数据。可能有 0、1 或 n，这可能会根据存储过程中的逻辑、​​传入的参数值、系统状态等而改变——所有在检索元数据时都无法考虑的事情. 即使是新的 2012 元数据功能也只处理描述存储过程中*第一个*结果集的形状 - 如果有更多，你自己。

所以不，我认为没有任何方法可以可靠地做到这一点。即使结果集的数量不能根据各种因素而改变，你能做的最好的就是蹩脚的`SET FMTONLY ON;`把戏（它有自己的一系列问题）并计算结果：

```
SET FMTONLY ON;
EXEC dbo.whatever; 
```

如果执行存储过程会改变系统的状态，这显然不好，但对于报告式存储过程，在很多情况下可能没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:42:14.140

据我所知，除了解析存储过程主体之外没有其他办法（请记住，它可能包含条件，结果计数可能会根据它们而变化）。

# html - 文件扩展名更改

> ID：12198176
> 
> 赞同：0
> 
> 时间：2012-08-30T13:37:06.060
> 
> 标签：html, ios, uiwebview, file-extension

如何让 UIWebView 加载一个实际上是 HTML 文件但其扩展名已更改为 .wxyz 的文件？但是，有一组文件包含文件之间的超链接。文档中的超链接指向扩展名为 .html 的文件。

所以，我需要做的是让 UIWebView 识别 .wxyz == .html 并打开文件，当点击这样的链接时，`<a href="myHTML.html">A Link</a>`将打开文件 myHTML.wxyz 。

我应该继承 UIWebView 吗？还是有其他方法可以做到这一点？

所有这些 .wxyz 文件都将包含在应用程序中，而不是在服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:06:18.177

我认为您可以这样做`UIWebViewDelegate webView:shouldStartLoadWithRequest:navigationType:`- 只需检测对具有 wxyz 资源等效项的 html 请求，返回 NO，然后请求 wxyz 类型。下面的代码应该给出它的要点：

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    // if it's not a link click, return YES
    if (navigationType != UIWebViewNavigationTypeLinkClicked) {
        return YES;
    }

    NSString *ext= [[request URL] pathExtension];
    if ([@"html" isEqualToString:ext]) {
        if (/* filename matches one of your wxyz resources */) {

            // user clicked an html file that should be loaded via wxyz:
            NSURL *newURL = [[request URL] URLByDeletingPathExtension];
            newURL = [newURL URLByAppendingPathExtension:@"wxyz"];
            NSURLRequest *newRequest = [NSURLRequest requestWithURL:newURL];
            [webView loadRequest:newRequest];
            return NO;

        }
    }
} 
```

# java - Web 应用程序之间的 Servlet 通信

> ID：12198178
> 
> 赞同：3
> 
> 时间：2012-08-30T13:37:09.393
> 
> 标签：java, servlets, soap

使用 ServletContext 在同一个应用程序中启用 Servlet 之间的通信非常好，我想知道是否有类似的方法来启用来自不同应用程序的 servlet 之间的通信（部署在同一个 Servlet-Container 上？

背景是我有两个可以分发到多个服务器的应用*程序*。在这种情况下，它们应该通过 SOAP 进行通信——但如果它们都托管在同一服务器（和 Servlet-Container）中，我想避免 SOAP 开销并进行直接通信。

有什么建议么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:42:31.640

这样的 API 存在于 Servlet API 的第一个版本中。您可以从 servlet 上下文中找到其他 servlet 并调用它们。我怀疑您是否可以从其他 Web 应用程序调用 servlet。

无论如何，此 API 已被弃用，不再受支持。原因是引入了 EJB。Servlet 仅扮演 Web 前端的角色。它们不应实现业务逻辑，因此不应相互通信。

在不同应用程序之间执行通信的现代方式是使用 Web 服务或 EJB，或者如果您使用的是 Spring——它们的远程机制或消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T12:39:58.093

我不确定不同的 servlet 容器。但它通过使用 **getServletContext().getContext()**方法适用于同一个容器。

首先，您需要在以下文件中进行更改

(Windows) C:\Program Files\Apache Software Foundation\Tomcat 7.0\conf\context.xml 将 crossContext 的值设置为 true。

**上下文.xml**

```
<Context crossContext="true">

    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>

    <!-- Uncomment this to disable session persistence across Tomcat restarts -->
    <!--
    <Manager pathname="" />
    -->

    <!-- Uncomment this to enable Comet connection tacking (provides events
         on session expiration as well as webapp lifecycle) -->
    <!--
    <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
    -->

</Context> 
```

请注意**crossContext="true"**。

假设您有两个名为*InterServletComm1*和*InterServletComm2*的 Web 应用程序，每个 Web 应用程序中分别 有 Servlet *Servlet1*和*Servlet1*。然后每个 servlet 中的代码如下：

**Servlet1.java**

```
package interServletComm1;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class Servlet1
 */
@WebServlet("/Servlet1")
public class Servlet1 extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public Servlet1() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        response.setContentType("text/html");
        PrintWriter pw = response.getWriter();

        request.setAttribute("name", "WebApp1");
        ServletContext context = getServletContext().getContext("/InterServletComm2");
        RequestDispatcher rd = context.getRequestDispatcher("/Servlet2");
        rd.forward(request, response);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

**Servlet2.java**

```
package interServletComm2;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class Servlet2
 */
@WebServlet("/Servlet2")
public class Servlet2 extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public Servlet2() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        response.setContentType("text/html");
        PrintWriter pw = response.getWriter();
        String name = (String) request.getAttribute("name");
        pw.println("This is web application 2.");
        pw.println("<br>The value received from web application one is: " + name);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

上面的代码从*InterServletComm1*发送属性*名称*，并在*InterServletComm2*中接收。如果这个答案不清楚，请告诉我。

# windows-phone-7 - 无法在 Windows Phone 应用程序中获取 .cs 文件

> ID：12198179
> 
> 赞同：0
> 
> 时间：2012-08-30T13:37:14.530
> 
> 标签：windows-phone-7

我正在学习windows phone 应用程序。 [这](http://mobile.tutsplus.com/tutorials/windows/introduction-to-windows-mobile-7-development/) 是使用的tut。它要求`.cs`修改`solution explorer`. 对我来说，我只能看到`.vb`文件。请告诉我如何获取`.cs`文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:59:01.573

您可以使用 2 种不同类型的语言编写代码，第一种是 c#，第二种是 visual basic.net。您从 vb.net 类型创建了一个项目。

您可以安全地删除此项目并创建一个新项目，这次使用 C#。您可能需要为项目重新命名，因为旧的名称仍在硬盘上

# java - 如何解析存储在 Google App Engine 上的 blobstore 中的 XML 文件？

> ID：12198183
> 
> 赞同：0
> 
> 时间：2012-08-30T13:37:30.000
> 
> 标签：java, google-app-engine, xml-parsing, blobstore

我需要解析存储在 blobstore 中的 XML 文件。我怎么做？

这是我到目前为止所做的：

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.getBlobFile(new BlobKey(key)); 
```

我无法使用`javax.xml`包解析 XML 文件，或者可以吗？如果将该包中的类付诸实施，则需要引用`java.io.File`对象。但我没有那个。

*这就是我到目前为止一直在做的事情：（*不是在服务器上，而是在本地）

```
 File blobKeys = new File("/home/non-admin/NetBeansProjects/Personal Site_Testers/web/xml/xml_1.xml");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(blobKeys);
        Element root = doc.getDocumentElement();

        Element firstName = doc.createElement("first-name");
        firstName.setTextContent(name);

        root.appendChild(firstName);

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer transformer = tf.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(new File("/home/non-admin/NetBeansProjects/Personal Site_Testers/web/xml/xml_1.xml"));
        transformer.transform(source, result); 
```

*注意：有 3 个 xml 文件上传到 blobstore。那些 xml 文件只有一个根标签。我想获取 xml 引用并解析它们以根据请求多次附加子节点。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:54:22.720

如果你想解析 *.xml，我认为[jdom2](http://www.jdom.org/)可能更方便，我在应用程序引擎中使用它并且它可以工作。

但是，您可以阅读[FileService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService) API 文档，并且有一个如何读取和写入文件的示例。如果可以得到一个InputStream或者Reader，那么就可以使用javax.xml来解析InputStream或者Reader中的xml内容。

```
 FileService fileService = FileServiceFactory.getFileService();
    AppEngineFile readableFile = new AppEngineFile("your_file_name");
    FileReadChannel readChannel = fileService.openReadChannel(readableFile,
            false);
    InputStream input = Channels.newInputStream(readChannel);

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(input);

    Element root = doc.getDocumentElement();

    Element firstName = doc.createElement("first-name");
    firstName.setTextContent("content");

    root.appendChild(firstName);
    // Now write
    GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
            .setBucket("mybucket").setKey("myfile")
            .setMimeType("text/html").setAcl("public_read")
            .addUserMetadata("myfield1", "my field value"); // change as
                                                            // your need
    AppEngineFile writableFile = fileService.createNewGSFile(optionsBuilder
            .build());
    FileWriteChannel writeChannel = fileService.openWriteChannel(
            writableFile, false);
    OutputStream output = Channels.newOutputStream(writeChannel);

    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();
    DOMSource source = new DOMSource(doc);
    transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    transformer.setOutputProperty(OutputKeys.INDENT, "yes");
    StreamResult result = new StreamResult(output);
    transformer.transform(source, result); 
```

# knockout.js - 从 observable 读取到其他 observable，但不更新原始数据？

> ID：12198187
> 
> 赞同：0
> 
> 时间：2012-08-30T13:37:56.640
> 
> 标签：knockout.js, knockout-mapping-plugin

原始 observable 读取自：

```
self.searchResult = ko.observable(new Class()); 
```

3 个“相同”的 observables 被读取到：

```
self.address1 = ko.observable(new AddressClass());
self.address2 = ko.observable(new AddressClass());
self.address3 = ko.observable(new AddressClass()); 
```

每个 address* observables 都有自己的视图/表单，通过它可以更新它们。打开视图时，当前地址可观察值设置为**self.searchResult.addresses[0]**。

问题是当更新任何 address* observables 时，原始的**self.searchResult.addresses[0]**也会更新。

也许是一个愚蠢的问题，但我花了一些时间试图解决它，但没有运气，所以任何输入都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:59:46.517

因此，如果我按照您要解释的内容进行操作，您可能会有类似于以下的代码：

```
self.address1(self.searchResult.addresses[0]); 
```

这在填充视图以编辑 address1 时调用。

因此，当在此视图上编辑 address1 时，`self.address1`observable 会更新，但也会更新，`self.searchResult.addresses[0]`我猜您希望`self.searchResult.addresses[0]`保持不变，以便您可以参考它以查看发生了什么变化，或者一些类似的场景。

如果我做对了，那么您要做的就是相当于以下内容：

```
var searchResultAddress = self.searchResult.addresses[0];
var address1ToEdit = new AddressClass();
address1ToEdit.addressLine1(searchResultAddressInJS.addressLine1);
address1ToEdit.addressLine2(searchResultAddressInJS.addressLine2);
address1ToEdit.city(searchResultAddressInJS.city);
address1ToEdit.country(searchResultAddressInJS.country);
// etc...
self.address1(address1ToEdit); 
```

如果所持有的地址的属性`self.searchResult.addresses[0]`也是可观察的，那么您可能需要将第一行更改为以下内容：

```
var searchResultAddress = ko.toJS(self.searchResult.addresses[0]); 
```

关键是用一个 AddressClass 填充为视图填充的地址，该 AddressClass 填充了在其他地方不可观察的值。

希望这可以帮助。但是，如果这个答案不能完全让您到达那里，请告诉我，我很乐意为您提供进一步的帮助，但到那时，小提琴会有所帮助。

# c# - 在 C# 中使用自动完成时，文本框中出现闪烁问题

> ID：12198188
> 
> 赞同：0
> 
> 时间：2012-08-30T13:37:57.907
> 
> 标签：c#, winforms, textbox

我正在对文本框使用自定义自动源。但问题是，当我输入 key 时，如果建议列表很高，那么文本框会在显示建议之前闪烁。

```
private void txtSearch_TextChanged(object sender, EventArgs e)
    {
        if (txtSearch.Text != "")
        {

            string templateSearchTxt = txtSearch.Text;

            foreach (String template in templateName) // templateName contains list of string
            {
                if (template.ToUpper().StartsWith(templateSearchTxt.ToUpper()))
                {
                    suggestion.Add(template);                       

                }
            }
        } 
    } 
```

我在表单加载事件中声明了以下代码

```
 suggestion = new AutoCompleteStringCollection();
        txtSearch.AutoCompleteCustomSource = suggestion;
        txtSearch.AutoCompleteMode = AutoCompleteMode.Suggest;
        txtSearch.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T02:05:47.150

我会认真鼓励您使用将[AutoCompleteMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletemode)设置为的 Combobox`Suggest`并将自动完成列表附加到它（作为它的[AutoCompleteSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletesource)）。它会比你的 textchanged 事件监听器执行得更好。

# c# - C# 从 MemoryStream 保存多个 png 文件

> ID：12198189
> 
> 赞同：2
> 
> 时间：2012-08-30T13:37:58.963
> 
> 标签：c#, png, multipage

我从另一个进程的标准输出作为流获取多个 png。我想把这个内存流保存为多个 png 文件。我看过`PngBitmapEncoder/PngBitmapDecoder`，但我似乎无法从中获得多页（每当我使用 来创建解码器时`PngBitmapDecoder.Create`，`decoder.Frames.Count`总是 1。这是我创建解码器的方式：

```
BitmapDecoder decoder = PngBitmapDecoder.Create(memStream,
                                                BitmapCreateOptions.PreservePixelFormat,
                                                BitmapCacheOption.Default); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:42:06.340

没有多页PNG之类的东西。
PNG 解码器永远不会返回超过一帧。

您需要分别阅读每张图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:43:41.643

您在 msdn 上有示例

[http://msdn.microsoft.com/fr-fr/library/system.windows.media.imaging.bitmapdecoder.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.media.imaging.bitmapdecoder.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:07:48.450

> 我从另一个进程的标准输出作为流获取多个png

目前尚不清楚这意味着什么。PNG 不支持在一个文件中包含多个图像或页面。您是否接收到多个连接为单个流的 PNG 文件？如果是这种情况（那会很奇怪），您实际上并不需要解码 PNG，只需拆分流并将每个（盲目地）写入不同的文件。一种快速而肮脏的方法（并非完全万无一失）是扫描流中的[PNG 签名](http://www.libpng.org/pub/png/book/chapter08.html#png.ch08.div.2)（8 个字节）以检测新图像的开始。

如果您想解码连续的流（似乎有点过分），您可以使用这个[pngcs 库](http://pngcs.googlecode.com)，为每个图像实例化一个 PngReader；只要确保调用 `PngReader.ShouldCloseStream(false)`，以便在每个图像结束时流不会关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T18:08:05.003

是的，有一种多页 PNG。它被称为 MNG（多图像网络图形）。它几乎和 PNG 一样古老（查看 libpng.org 以了解 MNG 格式）。

还有一个 C# 库可以帮助你

> [http://www.codeproject.com/Articles/35289/NET-MNG-Viewer](http://www.codeproject.com/Articles/35289/NET-MNG-Viewer)

在过去的 4 年中，一种称为 APNG（动画便携式网络图形）的格式开始被 Firefox 等浏览器接受和使用。C# 有一个包装器

> [https://code.google.com/p/sharpapng/](https://code.google.com/p/sharpapng/)

仅使用一个文件保存多个 PNG 比使用多个文件要快得多。

# computer-science - 最后一年的项目 - 标题建议

> ID：12198196
> 
> 赞同：-4
> 
> 时间：2012-08-30T13:38:19.497
> 
> 标签：computer-science, signal-processing, speech

我是一名计算机科学专业的学生，​​必须完成我最后一年的项目。我正在寻找标题建议，因为这实际上似乎是整个项目中最复杂的方面。基本上，我的项目是：

*   开发一种分析语音的算法，特别是检测某人是在说“是”还是“否”，然后确定该人是男性还是女性。

@时刻

我将开发一种算法来确定样本（人的声音）是说“是”还是“否”。该算法将通过将样本分成块来工作，然后找到每个块的过零点，然后使用 HMM 来确定是否有人说“是”或“否”。我相信，这可以通过挑选电话来完成。例如，如果选择了Phone“Y”，那么我们可以推断出这个词是Yes，但是，如果Phone不是“Y”/或/“N”，那么我们可以推断出这个词是No。这有意义吗？

我知道有一些与此问题相关的问题，在我提交最终提案之前，我会“熨平”它们，并希望做出最终决定。

我希望有一个人可以帮助我 ：）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:49:56.490

我的一个朋友从事了一个类似的项目，并评估了隐藏马尔可夫链/模型在语音识别中的使用：

[http://en.wikipedia.org/wiki/Hidden_​​Markov_model](http://en.wikipedia.org/wiki/Hidden_Markov_model)

另外，强烈推荐使用 Matlab（虽然它需要一些特殊的工具箱）。

@Phorce而不是去零交叉，为什么不将时间连续信号转移到另一个域（无论如何你都会这样做，进入时间离散傅立叶域）并检查基本频率和显着波纹谐波频率的出现？这应该可以确定是或否之间的区别。这将忽略幅度的任何重要相关性，并且区分将相当容易。这里的真正任务是确定不同的发音，这可能只是信号/带宽的延伸或频域的偏移。

频域的变化也将有助于区分女性和男性说话者......但您可能必须使用某种形式的神经网络，以便您的系统可以学习/适应不同的说话者、声音等......！

# java - Java程序在调整大小之前不显示摆动元素？

> ID：12198197
> 
> 赞同：3
> 
> 时间：2012-08-30T13:38:19.280
> 
> 标签：java, swing

谁能解释为什么会发生这种情况？图片在这里[图片](http://tinypic.com/r/2n39ep/6)我无法上传，因为我是新用户。

```
setTitle("jNote");
    pack();
    setVisible(true);
    setLayout(new BorderLayout());
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    Image icon = Toolkit.getDefaultToolkit().getImage("jNote.png");
    setIconImage(icon); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:54:59.523

通常 GUI 大小可以由内容建议。如果在添加组件后调用，`pack()`将导致 GUI 成为显示它们所需的最小尺寸。

![j注意](../Images/c7ea7a3fbe797e72cc5535dd17c52938.png)

```
import java.awt.BorderLayout;
import javax.swing.*;

public class JNote {

    public JComponent getGui(int rows, int cols) {
        JPanel p = new JPanel(new BorderLayout(2,2));

        p.add(new JLabel("1"), BorderLayout.LINE_START);
        JTextArea ta = new JTextArea(rows, cols);
        JScrollPane sp = new JScrollPane(
                ta,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        p.add(sp);
        p.add(
            new JLabel("Rows: " + rows + "    " + "Columns: " + cols),
            BorderLayout.PAGE_END);

        return p;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable(){
            public void run() {
                int cols = 20;
                JNote jNote = new JNote();
                for (int rows=6; rows>0; rows-=2) { 
                    JFrame f = new JFrame("jNote " + rows + "x" + cols);
                    f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                    f.setLocationByPlatform(true);
                    f.add(jNote.getGui(rows, cols));

                    f.pack();
                    f.setVisible(true);
                }
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:40:25.727

通过首选尺寸设置尺寸时，您必须调用`pack()`以应用您的首选尺寸。调整框架的大小也会将其打包，因此您可以进行观察。

```
// component initializations
yourFrame.pack(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:06:24.630

这是你应该做的：

```
import java.awt.Dimension;
import java.awt.Image;
import java.awt.Toolkit;
import javax.swing.*;

public class JordanOsborn extends JFrame{
    JPanel panel = new JPanel();

    public JordanOsborn(){
        super("jNote");
        panel.setPreferredSize(new Dimension(400,300));
        add(panel);
        Image icon = Toolkit.getDefaultToolkit().getImage("jNote.png");
        setIconImage(icon);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            public void run() {
                new JordanOsborn();
            }

        });
    }
} 
```

# python - PyBluez 不接受连接

> ID：12198198
> 
> 赞同：4
> 
> 时间：2012-08-30T13:38:25.000
> 
> 标签：python, bluetooth

我正在尝试在我的 PC 和诺基亚 E63 之间建立一个 RFCOMM 客户端-服务器通信系统。我正在使用 Python 和 PyBluez 来设置服务器并使用 PyS60 在我的手机上对客户端进行编程。

但是 PyBluez 不接受连接。

这里是服务器的代码：

```
from bluetooth import *

server_sock=BluetoothSocket( RFCOMM )
server_sock.bind(("",PORT_ANY))
server_sock.listen(1)

port = server_sock.getsockname()[1]

uuid = "94f39d29-7d6d-437d-973b-fba39e49d4ee"

advertise_service( server_sock, "SampleServer",
                   service_id = uuid,
                   service_classes = [ uuid, SERIAL_PORT_CLASS ],
                   profiles = [ SERIAL_PORT_PROFILE ], 
#                   protocols = [ OBEX_UUID ] 
                    )

print "Waiting for connection on RFCOMM channel %d" % port

client_sock, client_info = server_sock.accept()
print "Accepted connection from ", client_info

try:
    while True:
        data = client_sock.recv(1024)
        if len(data) == 0: break
        print "received [%s]" % data
except IOError:
    pass

print "disconnected"

client_sock.close()
server_sock.close()
print "all done" 
```

这是客户端的代码

```
#!/usr/bin/env python

import socket

class BTReader:
  def connect(self):
    self.sock=socket.socket(socket.AF_BT, socket.SOCK_STREAM)
    addr, services=socket.bt_discover()
    print "Discovered: %s, %s" % (addr, services)
    port = services[services.keys()[0]]
    print port
    address=(addr,port)
    print "Connecting to", str(address), "..."
    self.sock.connect(address)
    print "OK."
    data = "Hello, World!"
    print "Sending data:", data
    self.sock.send("Hello World!");
    print "SENT."

  def close(self):
    self.sock.close()

def main():
  bt=BTReader()
  bt.connect()
  bt.close()

if __name__ == '__main__':
  main() 
```

当我运行这两个程序时，我得到了这个输出

1）服务器（PC）：等待RFCOMM通道1上的连接[并且它停留在那里。它不承认连接。我已经使用 WINPDB 进行了检查，即使手机显示已建立连接，服务器脚本仍保留在 server_sock.accept() 循环中。]

2) 客户（电话）：

```
Discoverd: xx:xx:xx:xx:xx:xx {u'SampleServer':1}
1
Connecting to ('xx:xx:xx:xx:xx:xx', 1) ...
OK.
Sending data: Hello World!
Traceback (most recent call last):
...
...
File "c;\resource\socket.py" , line 409, in send return self._sock.send(data, f, cb)
error: (0, 'Error') 
```

是什么导致了问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T08:53:52.813

我知道一年后，但我有另一个解决方案。在某些版本的 Debian（Raspbian 等）和其他一些发行版上。server_sock.accept() 默认情况下只会挂起并且从不接受连接 - 即使来自配对设备！但是，对此的解决方案非常简单。如果你去 /etc/bluetooth/main.conf 有一行叫做禁用插件。添加一行或更改，使其看起来像这样：-

```
 DisablePlugins = pnat 
```

然后重启蓝牙服务：-

```
 sudo invoke–rc.d bluetooth restart 
```

现在可能已修复。

祝你好运！

参考：[RFCOMM 没有在 Debian 上使用 PyBluez 配对？](https://stackoverflow.com/questions/14618277/rfcomm-without-pairing-using-pybluez-on-debian/14827036#14827036)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:25:20.130

您应该重新阅读 PyBluez 库的[Rfcomm-client.py](http://code.google.com/p/pybluez/source/browse/trunk/examples/simple/rfcomm-client.py)示例。我不知道你为什么使用一些随机套接字而不是 BluetoothSocket 对象......

但是我怀疑这是错误。为更多读者详细介绍：

*如果您查看客户端代码，他正在导入套接字模块并使用它 - 这与 pybluez 无关并且是错误的。*

作为提示，尝试使[PyBluez 库中的 2 个示例](http://code.google.com/p/pybluez/source/browse/trunk/examples/simple/)正常工作（客户端和服务器），然后创建您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T07:13:28.297

有时服务器会弹出一个窗口并要求用户批准连接。如果您在没有 X 服务器的情况下运行，那么您将没有机会看到对话框窗口并且连接被拒绝..！！（过去在这上面花了半天时间……！！！）

# javascript - Javascript：Zepto 向左+向右滑动，向上+向下滚动

> ID：12198203
> 
> 赞同：1
> 
> 时间：2012-08-30T13:38:47.277
> 
> 标签：javascript, touch, preventdefault, zepto

所以我使用 Zepto 库对左右滚动的元素列表执行一些滑动操作。代码非常简单，如下所示：

```
Zepto('#planlist').swipeRight(function() {
    self.click_left();
});
Zepto('#planlist').swipeLeft(function() {
    self.click_right();
}); 
```

它只是调用与我的单击按钮相同的操作：

```
click_left: function() {
    if(this.position > 0) {
        -- this.position;
        this.animate();
    }
},
click_right: function() {
    if(this.position < this.plans.length - 1) {
        ++ this.position;
        this.animate();
    }
} 
```

无论如何。问题是，除非我`preventDefault()`在滚动上设置 a ，否则有时对角线滑动会触发滑动并滚动页面。这是一个问题，因为当页面滚动发生时，它会阻止动画呈现。但是，如果我使用`preventDefault()`，它会阻止用户在触摸此区域时上下滚动。这是一个问题，因为在手机设备上，这个小区域占据了整个屏幕，所以用户没有能力上下滚动页面。

所以问题是：我可以让左右滑动preventDefault并保持向上和向下触摸滚动的能力吗？

# wso2 - wso2 ESB dblookup 中介

> ID：12198204
> 
> 赞同：2
> 
> 时间：2012-08-30T13:38:54.580
> 
> 标签：wso2, wso2esb

我有一个带有 ID、NAME、DATE 的 MySql 数据库我想通过使用 dblookup 调解器来获取这些行，似乎不起作用，有人可以检查我的代理定义吗？

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="Database" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <dblookup>
            <connection>
               <pool>
                  <password>1234</password>
                  <user>root</user>
                  <url>jdbc:mysql://localhost:3306/new_db</url>
                  <driver>com.mysql.jdbc.Driver</driver>
               </pool>
            </connection>
            <statement>
               <sql>select * from users where name=?</sql>
               <result name="client_expiration" column="expiration" />
               <result name="client_id" column="id" />
               <result name="client_name" column="name" />
            </statement>
         </dblookup>
         <log />
      </inSequence>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:11:20.207

检索多个数据时存在问题。如果我们尝试检索多个数据，它将返回第一行数据。返回的值将存储在突触消息上下文中。因此，如果您只使用日志调解器，您将能够查看结果。像这样使用；

像这样更改您的 sql 查询（以检索一行数据）

```
<sql>select * from users where name=ABC</sql> 
```

然后像这样记录；

```
 <log level="custom">
    <property name="returned value for client_expiration is : "     expression="get-property('client_expiration')"/>
  <property name="returned value for client_id is : "     expression="get-property('client_id')"/>
  <property name="returned value for client_name is : "     expression="get-property('client_name')"/>
 </log> 
```

# java - 监控java序列化

> ID：12198205
> 
> 赞同：1
> 
> 时间：2012-08-30T13:38:55.563
> 
> 标签：java, debugging, serialization

哪个工具可以用来跟踪序列化过程，哪些字段被序列化的顺序？

我有两个替代的类层次结构。字段是相同的，但在一种情况下，对象直接声明它们，在另一种情况下，它是在基类中完成的。然后，该字段未序列化。我想知道为什么。扩展的序列化调试信息什么都不做。

PS！没有序列化异常。一切都很顺利。我只想知道为什么字段在一种情况下被序列化，而不是另一种。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:26:13.560

我只能想到使用标准 Java 调试器单步执行序列化代码；例如，您的 IDE 中的那个。

# java - 在测试和开发期间快速启动 JAX-RS 应用程序

> ID：12198208
> 
> 赞同：1
> 
> 时间：2012-08-30T13:39:04.787
> 
> 标签：java, jakarta-ee, servlets, jax-rs

启动 JAX-RS 应用程序的最快方法是什么？我想在单元测试中运行 JAX-RS 应用程序并在开发过程中重复地重新启动它们以测试浏览器中的更改，因此启动时间非常重要。不需要 Servlet 特定的 JAX-RS 部分。JDK HttpServer、Jetty、Tomcat、Grizzly、Netty……哪个启动 JAX-RS 应用程序最快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:19:04.523

我不能说别的，但汤姆猫很快。如果我对 java 或 xsl 文件进行更改，它将重新加载服务器以反映更新的文件。刷新后立即发生 Javascript 更改（由于它被视为静态内容，我有一个 servlet 过滤器）。即使您需要手动停止服务器、清理它并重新启动它，我最多也只需要 10-15 秒。

此外，这是使用泽西岛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:41:19.897

我的测量并不完全科学，但我发现 Grizzly 的启动速度非常快，甚至比轻量级 JDK HTTP 服务器还要快（Grizzly 启动速度快 20% 左右）。在我不是最新的机器上，一个简单的 JAX-RS 应用程序的 Grizzly 启动时间大约是 1 秒。

# linux - 在linux上上几个目录

> ID：12198222
> 
> 赞同：49
> 
> 时间：2012-08-30T13:39:39.740
> 
> 标签：linux, cd

当我想上一个目录时，我使用

`cd ..`

但是，当我想向上 7 个目录时，除了键入七 (7) 次之外，还有什么方法可以做到这一点`cd ..`？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-30T13:43:37.810

```
cd ../../../../../../../ 
```

另外一个有用的导航提示是，例如，假设您不断从一个目录（称为 A）切换到另一个目录（称为 B），在您的情况下，它有 7 个目录。

因此，如果您在目录 A 中：

```
A> cd ../../../../../../../
B> // Now you're in directory B and want to go back to A
B> cd - 
```

这将直接移回目录 A。`-`展开到您所在的上一个目录。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-10-01T05:47:02.743

制作别名（在你 ~/.bashrc 中）

```
function cd_up() {
  cd $(printf "%0.0s../" $(seq 1 $1));
}
alias 'cd..'='cd_up' 
```

并使用：

```
$ cd.. 7 
```

* * *

**UPD：** 或制作更强大的变体，cd 到当前路径中的目录名称：

```
# cd up to n dirs
# using:  cd.. 10   cd.. dir
function cd_up() {
  case $1 in
    *[!0-9]*)                                          # if no a number
      cd $( pwd | sed -r "s|(.*/$1[^/]*/).*|\1|" )     # search dir_name in current path, if found - cd to it
      ;;                                               # if not found - not cd
    *)
      cd $(printf "%0.0s../" $(seq 1 $1));             # cd ../../../../  (N dirs)
    ;;
  esac
}
alias 'cd..'='cd_up'                                # can not name function 'cd..' 
```

利用：

```
$ cd /home/user/documents/projects/reports/2014-10-01
$ cd.. doc
$ pwd
> /home/user/documents 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-30T13:47:09.377

您可以使用`pushd .`记住一个目录并`popd`返回到它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-30T13:50:30.710

如果有一个我经常使用的命令，我只会创建一个别名。

你可以输入

```
alias ..='cd ..'
alias ...='cd ../..' 
```

然后你可以只使用`..`上一级和`...`上两级。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-14T08:35:22.977

这是我发现的一个小改进：

通常，当您使用 cd .. 后退一个目录时，您最终会前进一个目录。为了使这项工作，您必须使用函数而不是别名，所以而不是：

```
alias ..=”cd ../”
alias ..2=”cd ../../” 
```

您可以使用：

```
..()
{
cd ../$@
}
..2()
{
cd ../../$@
} 
```

但是，在使用它之后，您很快就会发现您缺少此功能的命令完成功能，这使得它的用处远没有它可能的用处。因此，我回去为这个函数添加了我自己的 bash 补全函数，如果你想避免的话，可以将其粘贴到你的 ~/.bashrc 或从 ~/.bashrc 调用的任何文件（例如 ~/.bash_completion）中混乱。这是完成代码：

```
_..()
{
local cur=../${COMP_WORDS[COMP_CWORD]}
COMPREPLY=( $(compgen -d — $cur) )
local i=${#COMPREPLY[*]}
while [ $((--i)) -ge 0 ]; do
COMPREPLY[$i]=$(echo ${COMPREPLY[$i]} | sed -r ‘s/(\.\.\/)*//’)
done
}
complete -F _.. -o nospace -S / ..

_..2()
{
local cur=../../${COMP_WORDS[COMP_CWORD]}
COMPREPLY=( $(compgen -d — $cur) )
local i=${#COMPREPLY[*]}
while [ $((--i)) -ge 0 ]; do
COMPREPLY[$i]=$(echo ${COMPREPLY[$i]} | sed -r ‘s/(\.\.\/)*//’)
done
}
complete -F _..2 -o nospace -S / ..2 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-04T14:27:03.383

不记得我从哪里复制了这个函数，但它对我很有用（例如，你可以放入`.bashrc`文件中）

`up() { local p= i=${1:-1}; while (( i-- )); do p+=../; done; cd "$p$2" && pwd; }`

例如，要向上 7 个目录，必须键入`up 7`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-30T13:43:00.520

你可以这样做`cd ../../../../../../../`

有一篇[很酷的文章](http://www.thegeekstuff.com/2008/10/6-awesome-linux-cd-command-hacks-productivity-tip3-for-geeks/)，介绍了一些可以用来改进导航的技巧。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-30T13:44:47.207

```
for i in {1..7}; do cd ..; done 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-30T13:43:25.663

嗯，我不这么认为。

但是你可以写`cd ../../../..`（等等）而不是 7 次 cd ..

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-06T03:47:02.033

**这个漂亮的功能支持双向上升。**

如果您在**/a/b/c/d**中，则“up 1”将带您到**/a/b/c**，依此类推。那是非常标准的，并且在大多数其他答案中都涵盖了。

现在，对于特殊部分；使用负数会让你从另一个方向上升。所以，如果你在**/a/b/c/d**，'up -1' 会带你去**/a**，依此类推。

```
function up() {
    UP=$1

    if [[ $UP =~ ^[\-0-9]+$ ]]; then
        if ((UP<0)); then
            UP=${UP#-}
            cd $(echo $PWD | cut -d/ -f1-$((UP+1)))
        else
            cd $(printf "%0.s../" $(seq 1 ${UP}));
        fi
    fi
} 
```

[可在github](https://github.com/roubles/up)上下载/安装。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-08T05:45:42.583

您可以将以下功能添加到您的`.bashrc`：

```
# ~/.bashrc
up() {
  for D in $(seq 1 $1);
     do 
       cd ..
     done
} 
```

所以用法很简单：

```
user ~ $ up 3
user / $ 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-13T18:42:42.730

我制作了一个小实用程序，可以更轻松地导航深层目录结构：[https](https://github.com/ianatha/up) ://github.com/ianatha/up 。

安装后，`up`您可以：

```
$ pwd
/Users/jdoe/Developer/backend/src/main/java/com/example/service/db/
$ up example
$ pwd
/Users/jdoe/Developer/backend/src/main/java/com/example/
$ up 4
$ pwd
/Users/jdoe/Developer/backend/src/ 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-09-14T15:06:31.240

对于鱼类用户，

```
function cdd
   for x in (seq $argv)
     cd ..
   end
end 
```

并将其保存到您的：~/.config/fish/functions/cdd.fish

只需`$ cdd 3` 上 3 个目录。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-13T18:13:19.207

你可以试试这个解决方案。这对我来说很好用：

```
#!/bin/bash

#this sctipt should take one parameter - number of steps. And do "cd" command step times.
# example usage: cd `cde 3` 

NEW_PATH=$(pwd)

step="../"

upper=""

for i in seq $1  
do 
        upper="$upper$step"
done

echo $upper
```

我在 ~/.barsh 文件中创建了别名。这对我来说很好。
例如，最多三个文件夹。
$cd `cde 3`

# java - 如何使用 Java 邮件 API 使程序等待邮件的传递状态

> ID：12198225
> 
> 赞同：0
> 
> 时间：2012-08-30T13:39:47.553
> 
> 标签：java, smtp, jakarta-mail

我正在实现一个程序，它必须一个接一个地向用户发送邮件。但问题是它必须等到它获得先前发送的邮件的传递状态。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:49:20.823

Have you check out the [DeliveryStatus Class](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/dsn/DeliveryStatus.html)? It's part of the JavaMain API and should return the status to you. Once you receive the status, you can then send the next piece of mail.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:40:01.637

这样做会**大大**减慢邮件发送过程。投递状态是发送回您邮箱的消息。您需要轮询您的邮箱，直到有新消息到达并将新消息与您发送的消息相关联。另外，这是最重要的部分，不能保证您会**获得**特定消息的传递状态。是否发送投递状态取决于远程端的邮件服务器，如果发送，是否以您可以识别的格式发送。

# java - 不解密我加密的内容

> ID：12198228
> 
> 赞同：1
> 
> 时间：2012-08-30T13:40:09.173
> 
> 标签：java, android, encryption, base64, aes

我有一个奇怪的问题...

基于我的解决方案[将硬编码文件解密为字节 []](https://stackoverflow.com/questions/12053299/decrypting-a-hardcoded-file-as-byte)

所以，我写了一个小的 Cypher 类来帮助加密/解密......它曾经模拟一个在某个地方硬编码的密钥和另一个存储在其他地方的预加密密钥。但这有点无关紧要。

加密过程是这样的：

*   检索硬编码的字节数组
*   用它来解密key2
*   使用 key2 解密数据
*   使用 key1 进一步解密数据
*   有解密数据

我将加密数据存储为十六进制字符串，使用这两个函数进出那里

```
private static String byteArrayToHexString(byte[] b)
{
    StringBuffer sb = new StringBuffer(b.length * 2);
    for (int i = 0; i < b.length; i++)
    {
        int v = b[i] & 0xff;
        if (v < 16)
        {
            sb.append('0');
        }
        sb.append(Integer.toHexString(v));
    }
    return sb.toString().toUpperCase();
}

private static byte[] hexStringToByteArray(String s)
{
    byte[] b = new byte[s.length() / 2];
    for (int i = 0; i < b.length; i++)
    {
        int index = i * 2;
        int v = Integer.parseInt(s.substring(index, index + 2), 16); //THIS LINE
        b[i] = (byte) v;
    }
    return b;
} 
```

那工作完美无缺；事实上它工作得很好，以至于我在我的真实项目中实现了它。由于我没有彻底测试，该项目未能运行。

事实证明，除了一个不想解密的文件之外，它几乎可以加密/解密所有文件。

然而，我已经查明了这个问题 - 这条线引发了 IllegalNumberFormat 异常；在某些时候，我也熟悉了这个[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6259307](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6259307)。如果有人描述了一种绕过情况的方法，即长度为 2 的字符串转换为抛出 IllegalNumberFormatException 的四个字节，我会并且可以恢复到此方法。

所以，我想，由于我无法解码文件（显然不能在这里分享给你们试用），我需要以某种方式对其进行转换以使其传输安全。输入编码为 base64 字符串的 Base64Coder 类...

这似乎引入了一个新问题 - 填充被弄乱了。

问题很简单——我做错了什么？我需要符合这些数据，并且它必须能够正确和平等地加密/解密。我想要一个关于尽可能少的复制/粘贴的最轻量级解决方案的建议......伪代码在这里无法解决问题。

这就是我现在正在做的事情......

```
public static char[] encrypt2(byte[] value) throws GeneralSecurityException, IOException
{
    SecretKeySpec key1 = getSecretKeySpec(true);
    System.err.println("encrypt():\t" + key1.toString());
    Cipher cipher = Cipher.getInstance(CRYPTOSYS);
    cipher.init(Cipher.ENCRYPT_MODE, key1, cipher.getParameters());
    byte[] encrypted = cipher.doFinal(value);

    SecretKeySpec key2 = getSecretKeySpec(false);
    cipher = Cipher.getInstance(CRYPTOSYS);
    cipher.init(Cipher.ENCRYPT_MODE, key2, cipher.getParameters());
    byte[] encrypted2 = cipher.doFinal(encrypted);

    return Base64Coder.encode(encrypted2);
}

public static byte[] decrypt2(char[] message) throws GeneralSecurityException, IOException
{
    SecretKeySpec key1 = getSecretKeySpec(false);
    System.err.println("decrypt():\t" + key1.toString());
    Cipher cipher = Cipher.getInstance(CRYPTOSYS);
    cipher.init(Cipher.DECRYPT_MODE, key1);
    byte[] decrypted = cipher.doFinal(Base64Coder.decode(message));

    SecretKeySpec key2 = getSecretKeySpec(true);
    cipher = Cipher.getInstance(CRYPTOSYS);
    cipher.init(Cipher.DECRYPT_MODE, key2);
    byte[] decrypted2 = cipher.doFinal(decrypted);

    return decrypted2;
} 
```

请注意，出于测试目的，密钥当前已完全公开（硬编码）。

这是我的测试用例

```
public static void main(String... args) throws Exception
{
    //      byte[] data = "hello".getBytes();
    File PEM = new File(PATH_TO_FILES + SOURCE_PEM);
    File DER = new File(PATH_TO_FILES + SOURCE_DER);
    File cryptoPEM = new File(PATH_TO_FILES + "cryptopem");
    File cryptoDER = new File(PATH_TO_FILES + "cryptoder");

    byte[] cryptokey = encryptA(ASSET_KEY);
    System.out.println(new String(cryptokey));

    //pem key
    System.out.println("PEM");
    byte[] data = getBytesFromFile(PEM);
    char[] crypted = encrypt2(data);
    //      FileOutputStream fos = new FileOutputStream(cryptoPEM);
    FileWriter fw = new FileWriter(cryptoPEM);
    fw.write(crypted);
    fw.flush();

    //der key
    System.out.println("DER");
    data = getBytesFromFile(DER);
    crypted = encrypt2(data);
    fw = new FileWriter(cryptoDER);
    fw.write(crypted);
    fw.flush();

    //opentext
    System.out.println("checking PEM...");
    crypted = Base64Coder.encode(getBytesFromFile(cryptoPEM));
    byte[] decrypted = decrypt2(crypted,  false);
    byte[] decryptedData = decrypted;

    if (!Arrays.equals(getBytesFromFile(PEM), decryptedData)) { throw new Exception("PEM Data was not decrypted successfully"); }

    System.out.println("checking DER...");
    crypted = Base64Coder.encode(getBytesFromFile(cryptoDER));
    decrypted = decrypt2(crypted,  false);
    decryptedData = decrypted;

    if (!Arrays.equals(getBytesFromFile(DER), decryptedData)) { throw new Exception("DER Data was not decrypted successfully"); }
} 
```

我现在得到一个 InvalidBlockSizeException ......请有人对此有所了解，我只是想让它工作......

为稍后在“AES/CBC/PKCS5Padding”中使用的 IV 替换“key2”是我现在正在考虑的一个选项。除了加密的第二步之外，基本上什么都不会改变。从理论上和方法上，我会保持不变 - 除非当然描述了更好的解决方案。

最后，我想指出这是一个程序员问题，而不是 IT 安全学生问题，因此正确的代码比涵盖不太可能的边缘情况的理论响应更有价值。

编辑：好吧，我不能给你导致 IllegalNumberFormatException 的数字，因为我从今天早上丢失了代码。我似乎无法复制这个问题，所以我想试图弄清楚那部分是没有用的。

这是示例测试的输出：

```
encrypt():  javax.crypto.spec.SecretKeySpec@15dd7
5@��_׵G�j��!�c;D�i�lR?z�j\
PEM
encrypt():  javax.crypto.spec.SecretKeySpec@15dd7
DER
encrypt():  javax.crypto.spec.SecretKeySpec@15dd7
checking PEM...
decrypt():  javax.crypto.spec.SecretKeySpec@15c78
Exception in thread "main" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher 
```

这意味着Base64有点搞砸了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:33:56.337

我认为问题出在这里：

```
//opentext
System.out.println("checking PEM...");
crypted = Base64Coder.encode(getBytesFromFile(cryptoPEM)); 
```

以前，您将**char[]**写入文件，但现在您正在从文件中读取**byte[]**并在 base64 中重新编码。该文件的内容应该已经是 base64 编码的！

您需要一个名为 getCharsFromFile 的新函数，该函数返回 char[] 或 String 并将其直接传递给 decrypt2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:48:09.920

您为什么不为此使用 Appache Commons 的任何原因？

[http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:49:41.763

今天早上查看了代码并稍作调整后，我让它工作了。

```
public static byte[] encrypt2(byte[] value) throws GeneralSecurityException, IOException
{
    SecretKeySpec key1 = getSecretKeySpec(true);
    System.err.println("encrypt():\t" + key1.toString());
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, key1, cipher.getParameters());
    byte[] encrypted = cipher.doFinal(value);

    SecretKeySpec key2 = getSecretKeySpec(false);
    System.err.println("encrypt():\t" + key2.toString());
    cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, key2, new IvParameterSpec(getIV()));
    byte[] encrypted2 = cipher.doFinal(encrypted);

    return encrypted2;//Base64Coder.encode(encrypted2);
}

public static byte[] decrypt2(byte[] message, boolean A) throws GeneralSecurityException, IOException
{
    SecretKeySpec key1 = getSecretKeySpec(false);
    System.err.println("decrypt():\t" + key1.toString());
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.DECRYPT_MODE, key1, new IvParameterSpec(getIV()));
    byte[] decrypted = cipher.doFinal(message);

    SecretKeySpec key2 = getSecretKeySpec(true);
    System.err.println("decrypt():\t" + key2.toString());
    cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, key2);
    byte[] decrypted2 = cipher.doFinal(decrypted);

    return decrypted2;
} 
```

# php - 令人费解的 PHP Soap 故障

> ID：12198229
> 
> 赞同：3
> 
> 时间：2012-08-30T13:40:09.603
> 
> 标签：php, soap, fedex

*（对不起，如果这听起来很傲慢......我没有很多代码要粘贴，所以我想我会彻底描述）*

我正在使用 FedEx 的`SOAP` `WSDL`s 和`PHP`'s native `SoapClient`。

services `RateService`,`ShipService`等具有`RateService->getRates(), ShipService->processShipment(), etc.`接受数组作为参数的方法。

我从“硬编码”数组开始，能够通过 WSDL 验证数组，连接到 FedEx 的服务器并获得成功的响应。

这是令人费解的部分。

我拿了我的“硬编码”数组并围绕它们构建了一个类，以便可以“动态”构建数组（就像你一样）。

当我通过 SoapClient 运行“动态创建”的数组时，出现以下错误：

对于费率请求

> FedEx SoapFault 错误：不允许属性（不允许使用通配符）：元素中的 ID ShippingChargesPayment@http://fedex.com/ws/rate/v13

对于船舶请求

> SOAP-ERROR：编码：未解析的引用“#ref1”

数组似乎没有通过 WSDL 进行验证。

**更新**- 我设法调试了这个问题并让它工作，但我不确定为什么它是一个问题......这是代码和进一步的描述......以防有人想解释原因。

我的货件类以包含“空白”请求数组的私有变量开头：

```
class Shipment {
    private $_fedex_request = array(
        ...
        "RequestedShipment" => array(
            ...
            "ShippingChargesPayment" => array(
                "PaymentType" => "SENDER",
                "Payor" => array(
                    "ResponsibleParty" => array(
                        "AccountNumber" => null,
                        "Contact" => array(
                            "EMailAddress" => null,
                        ),
                    ),
                ),
            ),
            "CustomsClearanceDetail" => array(
                "DutiesPayment" => array(
                    "PaymentType" => "SENDER",
                    "Payor" => array(
                        "ResponsibleParty" => array(
                            "AccountNumber" => null,
                            "Contact" => array(
                                "EMailAddress" => null,
                            ),
                        ),
                    ),
                ),
            ),
        ),
    );
} 
```

我有几种方法可以更新“空白”请求，其中一种方法是：

```
$ResponsibleParty = array(
    'AccountNumber' => Kohana::$config->load('fedex.currency.'.$this->_from_currency.'.billAccount'),
    'Contact' => array(
        'EMailAddress' => "name@domain.com",
    ),
);

$this->_fedex_request['RequestedShipment']['ShippingChargesPayment']['Payor']['ResponsibleParty'] = $ResponsibleParty;
$this->_fedex_request['RequestedShipment']['CustomsClearanceDetail']['DutiesPayment']['Payor']['ResponsibleParty'] = $ResponsibleParty; 
```

....我改成这样：

```
$this->_fedex_request['RequestedShipment']['ShippingChargesPayment']['Payor']['ResponsibleParty'] = array(
    'AccountNumber' => Kohana::$config->load('fedex.currency.'.$this->_from_currency.'.billAccount'),
    'Contact' => array(
        'EMailAddress' => "name@domain.com",
    ),
);

$this->_fedex_request['RequestedShipment']['CustomsClearanceDetail']['DutiesPayment']['Payor']['ResponsibleParty']= array(
    'AccountNumber' => Kohana::$config->load('fedex.currency.'.$this->_from_currency.'.billAccount'),
    'Contact' => array(
        'EMailAddress' => "name@domain.com",
    ),
); 
```

这是通过引用传递的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:48:53.570

```
$this->_fedex_request['RequestedShipment']['ShippingChargesPayment']['Payor']['ResponsibleParty'] = array(
'AccountNumber' => Kohana::$config->load('fedex.currency.'.$this->_from_currency.'.billAccount'),
'Contact' => array(
    'EMailAddress' => "name@domain.com",
),
); 
```

看来这两者并不相等。

```
$this->_fedex_request['RequestedShipment']['CustomsClearanceDetail']['DutiesPayment']['Payor']['ResponsibleParty'] = Kohana::$config->load('fedex.currency.'.$this->_from_currency.'.billAccount'),
'Contact' => array(
    'EMailAddress' => "name@domain.com",
),
); 
```

我猜你的意思是写

```
$this->_fedex_request['RequestedShipment']['CustomsClearanceDetail']['DutiesPayment']['Payor']['ResponsibleParty'] = 
array(
'AccountNumber' => Kohana::$config->load('fedex.currency.'.$this->_from_currency.'.billAccount'),
'Contact' => array(
    'EMailAddress' => "name@domain.com",
),
); 
```

# php - PHP Apache 增加每个客户端的最大并发连接数

> ID：12198233
> 
> 赞同：2
> 
> 时间：2012-08-30T13:40:25.877
> 
> 标签：php, apache, powershell, concurrency, xampp

我想使用 XAMPP 同时运行数十个长时间运行的 PHP 脚本。每个脚本运行 2 小时以上，不使用会话、cookie 等。

对于我的第一次测试运行，我尝试在浏览器上打开其中的 10 个脚本，但实际上只有我打开的前六个开始执行（我知道这是因为在每个脚本的开头，我立即打开一个文件来写入状态在那里更新——除了前 6 个脚本之外，没有任何脚本可以写入任何内容）。

是否有我可以在每个脚本的顶部放置的代码，或者我可以更改的一些 PHP 设置，或者我可以通过任何其他方式来制作它，以便我可以同时运行尽可能多的 PHP 脚本？

* * *

**编辑这里是如何做到这一点：**

1) 从这里下载 PowerShell 2（或与您的 Windows 版本兼容的版本）：http: [//support.microsoft.com/kb/968929](http://support.microsoft.com/kb/968929)

2）安装它并重新启动计算机。

3) 创建一个新文件“example.ps1”并将其保存到您选择的目录中（例如 c:\examples\example.ps1）。将此代码放入该文件中：

```
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\1.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\2.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\3.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\4.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\5.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\6.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\7.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\8.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\9.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\10.php}
start-job {.\c:\xampp\php\php C:\xampp\htdocs\phpfiles\11.php} 
```

4) 点击“开始”->“运行”并输入“powershell”（不带引号）。

5）PowerShell启动后，输入以下内容并按回车：

```
Set-ExecutionPolicy RemoteSigned 
```

然后按“y”设置更改。

6）现在输入（确保输入完整的文件路径）：

```
c:\examples\example.ps1 
```

7) 要查看您的工作，只需输入：

```
get-job 
```

要停止作业，请使用以下命令：

```
stop-job JobName 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:45:45.610

浏览器将阻止同时连接。使用命令行，您也会遇到更少的超时问题。Plus 输出是即时的，因此您可以一直回显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:44:08.343

您必须通过浏览器运行脚本吗？使用 php-cli 直接从终端运行这样长时间运行的脚本不是更容易吗？这样，您可以启动任意数量的进程。

# windows - ElementHost 中的 Application.Current 为空

> ID：12198244
> 
> 赞同：18
> 
> 时间：2012-08-30T13:41:01.187
> 
> 标签：windows, winforms, user-controls, elementhost

我在我的个人库中使用 WPF UserControl。Libs 包含在我的 WPF 和 WindowsForms 程序中。现在我的 UserControl 必须显示一个新的 (WPF) 窗口。在新窗口中，我想设置所有者。我这样做：

```
dialog.Owner = Application.Current.MainWindow; 
```

如果我在 WPF 程序中使用 UserControl，这可以正常工作。

当我在我的 WindowsForms 程序中使用 UserControl 时（我在 ElementHost 中设置了 UserControl `elementHost.Child = ...`）为`Application.Current`空。

这不好，我的程序抛出异常。

为什么为`Application.Current`空？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-07T14:50:32.027

*Application.Current*特定于*WPF Application*。
因此，当您在 WinForms 应用程序中使用 WPF 控件时，您需要初始化 WPF 应用程序的实例。在您的 WinForms 应用程序中执行此操作。

```
if ( null == System.Windows.Application.Current )
{
   new System.Windows.Application();
} 
```

# ios - 核心位置检测到的最低速度

> ID：12198245
> 
> 赞同：1
> 
> 时间：2012-08-30T13:41:05.213
> 
> 标签：ios, core-location

我正在尝试开发一个显示用户速度和其他一些数据的应用程序。

我想知道核心位置可以检测到的最低速度是多少。当我在街上移动时，读数为 0.00。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    //i display some other data here
    speedLbl.text =[NSString stringWithFormat:@"Speed: %f km/hr",([lastLocation speed]*3.6)];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:51:16.943

您应该设置`distanceFilter`和`desiredAccuracy`属性。

这是[Jano](https://stackoverflow.com/users/412916/jano)的代码

```
self.locationManager = [[[CLLocationManager alloc] init] autorelease];
self.locationManager.delegate = self;

/* Pinpoint our location with the following accuracy:
 *
 *     kCLLocationAccuracyBestForNavigation  highest + sensor data
 *     kCLLocationAccuracyBest               highest     
 *     kCLLocationAccuracyNearestTenMeters   10 meters   
 *     kCLLocationAccuracyHundredMeters      100 meters
 *     kCLLocationAccuracyKilometer          1000 meters 
 *     kCLLocationAccuracyThreeKilometers    3000 meters
 */
self.locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;

/* Notify changes when device has moved x meters.
 * Default value is kCLDistanceFilterNone: all movements are reported.
 */
self.locationManager.distanceFilter = 10.0f;

/* Notify heading changes when heading is > 5.
 * Default value is kCLHeadingFilterNone: all movements are reported.
 */
self.locationManager.headingFilter = 5;

// update location
if ([CLLocationManager locationServicesEnabled]){
    [self.locationManager startUpdatingLocation];
} 
```

速度计算：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    double speed = newLocation.speed;

    //another way
    if(oldLocation != nil)
    {
        CLLocationDistance distanceChange = [newLocation getDistanceFrom:oldLocation];
        NSTimeInterval sinceLastUpdate = [newLocation.timestamp timeIntervalSinceDate:oldLocation.timestamp];
        speed = distanceChange/sinceLastUpdate;

    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:49:53.273

@Osama Khalifa，这取决于您如何使用`location manager`.

对于`speed`计算，我希望您使用`satellite GPS (stopUpdatingLocation`) 而不是 `GPS`through，`mobile network` `(startMonitoringSignificantLocationChanges)`因为`GPS`through 移动塔没有`accuracy`in `speed`。

此外，您还需要将值设置为最接近`desiredAccuracy`的`distanceFilter`值以获得更多`accurate`价值。

```
Note : more accurate results you ask consume more of iPhone battery power. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:53:41.290

我相信没有限制。您必须自己计算速度： `distanceChange * timeSpan`

`distanceChange = [newLocation getDistanceFrom:oldLocation]` `timeSpan = time when retrieved new Location - time when retrieved old Location`

看看[这个](https://stackoverflow.com/questions/1391589/cllocation-speed)线程！

# android - 未创建一列

> ID：12198247
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:06.093
> 
> 标签：android, sqlite

你们能看出 db 表创建语句有什么问题吗？

```
CREATE TABLE userdata(_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, login TEXT, password TEXT, notes TEXT, favorite INTEGER DEFAULT 0); 
```

我使用这个字符串来创建一个数据库表：

```
public static final String CREATE_DATABASE = "CREATE TABLE " + TABLE_NAME
            + "(_id INTEGER PRIMARY KEY AUTOINCREMENT," + COLUMN_NAME_TITLE + " TEXT, "
            + COLUMN_NAME_LOGIN + " TEXT, " + COLUMN_NAME_PASSWORD + " TEXT, " + COLUMN_NAME_NOTES
            + " TEXT, " + COLUMN_NAME_FAV + " INTEGER DEFAULT 0);";

db.execSQL(CREATE_DATABASE); 
```

但毕竟我的表中没有最新的 (COLUMN_NAME_FAV) 列，我不明白为什么。这里我如何检查：

```
c.getColumnIndex(COLUMN_NAME_FAV); 
```

返回我`-1`，意思是没有这样的专栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:56:38.133

`SELECT`仅当您在从中获取游标的查询中包含该列时，该列才会出现在您的游标中。

确保您的查询包括类似

```
SELECT favorite, .... FROM userdata 
```

# c - 为什么下面的代码是一个无限循环？（for循环）

> ID：12198248
> 
> 赞同：-2
> 
> 时间：2012-08-30T13:41:06.447
> 
> 标签：c

这段代码来自《C Programming-A Modern Approach》一书中的练习。

```
for(i=10;i>=1;i/=2)
{
    printf("%d", i++);
} 
```

编辑：

第一个输出应该是 10，它应该在循环的下一步中增加 1。但是当我运行这段代码时，我得到的只是 1，它永远不会停止打印 1。

请帮助我理解这段代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T13:43:40.317

这段代码说

```
for( start with 10 ; as long as it is greater or equals 1 ; divide i by 2){
    Print i;
    add 1 to i
} 
```

所以：

```
start with 10:
print 10;
10 + 1 = 11
11 / 2 = 5,5 = 5 because it's int
print 5
5 + 1 = 6
6 / 2 = 3
print 3
3 + 1 = 4
4 / 2 = 2
print 2
2 + 1 = 3
3 / 2 = 1
print 1
1 + 1 = 2
2 / 2 = 1
print 1
1 + 1 = 2
2 / 2 = 1
.... and it will continue forever and ever 
```

for循环的执行顺序：

```
for([init];[1];[3]){
    [2]
} 
```

当然，顺序 [1],[2],[3] 会重复，直到 [1] 不再为真

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:52:06.647

代码使用较少。它将产生`10 5 3 2 1 1 1 1 . . .`无限次的输出`1`，因为当`i`除以 2 变为 1 时，值在`printf`语句 ir 中再次递增。`i++`并变为 2。

所以代码导致无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:47:14.930

i 从 10 开始，只要 i > or = 1 就会运行，每次迭代 i 减少一半（i/2）。

print 将打印 i 的值，然后将其加一。所以

```
Iteration 1:
  10  (i+1 = 11)
Iteration 2:
  5   (i/2 = 5 + 1 = 6)
Iteration 3:
  3   (i/2 = 3 + 1 = 4)
Iteration 4:
  2   (i/2 = 2 + 1 = 3)
Iteration 5:
  1   (i/2 = 1 + 1 = 2)
...
Iteration N:
  1   (i/2 = 1 + 1 = 2) 
```

之后的每次迭代都将是 1。这就是为什么你会看到永远打印 1，我想你可以明白为什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:50:56.390

如果您的输出从 1 开始，那么您在循环中的测试条件写为`i=1`，而不是`i>=1`。修复您的测试条件，您将看到循环正确执行。

说到这，应该如下：`i=10`在循环的开始，这将是你的输出。然后`i++`递增`i`到 11，在 print 语句中发布使用情况。

当代码到达循环底部时，它将执行循环步长调整（`i/=2`）。这意味着 11\2=新的 i 值。那将是 5。然后代码将测试 的新值`i`并再次执行循环，它将重复这些步骤直到`i < 1`。

在`i`=1 步骤，您将拥有`1+1`= 2 和`2/2`= 1，循环一旦开始就永远不会停止（因为测试`i>=1`将始终为真）。你确定你的输出是从 1 开始的，还是很快从 10 变成 1，然后你就得到了很多？

# asp.net - ASP.NET 使用 ASPX 显示来自 XML 的简单数据

> ID：12198251
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:15.147
> 
> 标签：asp.net, xml, vb.net

下午好，

我有一个页面（category-list.apsx），它使用Repeater Control 方法在页面上显示xml 详细信息。我使用了此处显示的示例：

[http://www.w3schools.com/aspnet/aspnet_repeater.asp](http://www.w3schools.com/aspnet/aspnet_repeater.asp)

这很好用，但我还需要页面来显示类别的标题和公司名称。这些将显示在页面的不同位置。

如何才能做到这一点？

XML 将被称为 categories.xml 并设置如下：

```
<PageDetails>
        <CategoryName>Example A</CategoryName>
        <CompanyName>Company A</CompanyName>
</PageDetails> 
```

对于单个数据，它会使用 asp 标签来代替吗？喜欢

```
<asp:Label name="CategoryName" Text="Category Name" runat="server"/> 
```

还是我走远了？

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:14:08.790

你不能直接使用你的 asp:label 代替，因为 < 或 & 不被接受，

`CDATA`但是如果你想注入，你可以使用部分

```
"<![CDATA[" "]]>" 
```

# jqgrid - jqgrid 选择类型搜索选项

> ID：12198253
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:21.450
> 
> 标签：jqgrid

我有一个选择类型，其值如下。sopt 是“cn”，所以当我选择“已批准”时，它也会给我“未批准”的结果，我怎样才能获得完全匹配的结果，即已批准为已批准，未批准为未批准等。下面是代码：

`var categories = ["All", "Approved", "Not Approved", "Pending"]; var categoriesStr = ":All;Approved:Approved;Not Approved:Not Approved;Pending:Pending"; var defaultCategory = "All";`

`{name:'Status',index:'Status', width: 85, stype: 'select', sortable:false, searchoptions: { sopt: ['cn'], dataInit:function(el){ var defOption = $("option:contains("+defaultCategory+")",el); defOption.attr("selected", "selected"); setTimeout(function(){ $(el).trigger('change'); },500); } }, edittype:'select', editoptions: { value: categoriesStr } }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:13:45.693

迪普蒂！

您可以使用“eq”运算符。这匹配等于下拉值的所有值。

# ruby-on-rails - Rails 错误与：has_many：通过连接

> ID：12198256
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:33.770
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个 ActiveRecord 类：

```
class Post < ActiveRecord::Base
  has_many :posts_tags
  has_many :tags, :through => :posts_tags
end

class Tag < ActiveRecord::Base
  has_many :posts_tags
  has_many :posts, :through => :posts_tags  
end
class PostsTags < ActiveRecord::Base
  belongs_to :posts
  belongs_to :tags
end 
```

当我想获得帖子标签时：

```
 <% @posts = Post.all %>
    <% @posts.each do |post| %>
       <% if post.tags.count != 0 %>
          <div class="post-tags">
          <% post.tags.each do |tag| %>
             <span><%= tag.name%></span>
          <%end%>
          </div>    
       <%end%>
    <% end %> 
```

我收到错误我该`uninitialized constant Post::PostsTag` 如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:48:16.807

您传递给的名称`belongs_to`应该是单数：

```
belongs_to :post
belongs_to :tag 
```

**编辑**

此外，模型应命名为`PostsTag`. ActiveRecord 期望所有模型名称都是单数的，并且与表名的复数匹配。确保您的表名是“posts_tags”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:15:37.877

引用 ActiveRecord 文档：

> 选择建立多对多关系的方式并不总是那么简单。如果您需要将关系模型作为自己的实体使用，请使用 has_many :through。在处理遗留模式或从不直接处理关系本身时使用 has_and_belongs_to_many。

由于您似乎只使用`PostsTags`该类进行连接，因此您应该考虑切换到`has_and_belongs_to_many`

```
class Post < ActiveRecord::Base
  has_and_belongs_to_many :tags       # foreign keys in the join table
end
class Tag < ActiveRecord::Base
  has_and_belongs_to_many :posts    # foreign keys in the join table
end 
```

您应该已经有一个包含班级的`posts_tags`表格`post_id`和`tag_id`列。`PostsTags`如果没有，那么您需要创建一个。除非您在声明关系时为连接表指定自定义名称，否则该表**必须**命名为`posts_tags`。可能的迁移可能如下所示：

```
class CreatePostsTagsJoinTable < ActiveRecord::Migration
  def change 
    create_table :posts_tags, :id => false do |t|
      t.integer :post_id
      t.integer :tag_id
    end
  end
end 
```

然后您应该删除该`app/models/posts_tags.rb`文件，因为在`has_and_belongs_to_many`关系中，“[t] 连接表不应该有主键或与之关联的模型。” - ActiveRecord::Associations::ClassMethods

此方法的[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)提供了有关命名连接表和优化性能的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:27:46.060

你有一个多对多的关系，你应该阅读[A Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html)

你所拥有的并不是很困难，但确实需要一些研究。作为一个简单的规则：如果您要使用关联（例如，您想将描述存储到 PostTag），请使用以下代码。如果没有：使用`has_and_belongs_to_many`之前的帖子中已经介绍过的。在代码下方，带有迁移、模型和视图：

```
class Post < ActiveRecord::Base
  has_many :post_tags
  has_many :tags, :through => :post_tags
end

class Tag < ActiveRecord::Base
  has_many :post_tags
  has_many :posts, :through => :post_tags  
end

class PostTag < ActiveRecord::Base
  belongs_to :post
  belongs_to :tag
end 
```

您的迁移应该如下所示：

```
class CreateTables < ActiveRecord::Migration
  def self.up
    create_table :tags do |t|
      # some other attributes here

      t.timestamps
    end

    create_table :posts do |t|
      # some other attributes here

      t.timestamps
    end

    create_table :post_tags do |t|
      # some other attributes here
      t.references :post
      t.references :tag

      t.timestamps
    end
  end

  def self.down
    drop_table :tags
    drop_table :posts
    drop_table :post_tags
  end
end 
```

您的视图应如下所示：

```
<% @posts = Post.all %>
    <% @posts.each do |post| %>
       <% if post.tags.any? %>
          <div class="post-tags">
          <% post.tags.each do |tag| %>
             <span><%= tag.name %></span>
          <%end%>
          </div>    
       <%end%>
    <% end %> 
```

# ios - 捕获从未压缩过的 iPhone 相机数据

> ID：12198257
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:34.273
> 
> 标签：ios, camera, compression, avfoundation

谁能告诉我是否可以从从未压缩过的 iPhone 上的相机中捕获数据？

我知道使用 AVFoundation 框架，您可以将键 kCVPixelBufferPixelFormatTypeKey 指定为 kCVPixelFormatType_32BGRA 并且我已经这样做了，但是在检查结果文件时，在我看来这只是告诉框架将帧数据以 BGRA 格式存储在缓冲区中JPEG 格式。看起来实际数据来自指定的压缩类型，并且只是已解压缩到缓冲区中的 JPEG 数据。当我拍摄文本文档时，字符周围会出现 JPEG 伪影。谁能告诉我是否有办法将非压缩设置指定为压缩类型，或者是否有其他方法可以访问从未经历过有损压缩过程的直接相机输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:44:08.307

是的，这是可能的，而且它是以你看起来正在做的方式完成的（正如 Brad Larson 在他的评论中所描述的那样）。

有问题的数据没有被压缩。但是，这并不意味着它一定是一流的。

您看到的“伪影”很可能是传感器噪音（iPhone 相机传感器很小，并且在最好的时候往往会产生噪音，ISO 越高，噪音越大——速度越快！）。另外，虽然图像没有经过*压缩*，但原始 RAW 数据*已经*通过拜尔插值以及诸如白平衡调整、ISO 放大（如果需要）以及一定程度的锐化等处理。

# javascript - 如何进行 AJAX 调用，使其仅在我单击特定类中包含的链接时触发，并包含父元素的“id”？

> ID：12198259
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:41.920
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-3, razor

我在网页上有以下内容：

```
<td class="containslink" id=1>
    <a href=/ControllerX/ActionY/7>View</a>
</td> 
```

上面有很多版本，每个版本都有不同的 id。

单击包含的链接时，我需要该页面触发对以下地址的 AJAX 调用：

```
/Controller/Action/1 
```

或者

```
@Url.Action("Action", "Controller" new { id = 1 }) 
```

where`id`等于`td`的 id。

* * *

如果我像这样对我的 AJAX 调用进行硬编码：

```
myUrl = @Url.Action("Action", "Controller" new { id = 1});

$(document).ready(function () {
    $("a").click(function(){
        $.ajax({
            url: myUrl,
        });
    });
}); 
```

AJAX 调用在我单击页面上的任何链接时触发，并且总是以`id`1 触发（显然）。

我将如何更改此 AJAX 调用，以便它仅在我单击 a `td class`of中包含的链接时才起作用`"containsLink"`，并且包括包含被单击链接`id`的 the `td`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:55:42.533

您需要收紧选择器（不要只选择所有`<a>`元素）并在事件处理程序中获取 ID。

```
$(document).ready(function () {
    $("td.containslink a").click(function(){
        var id = $(this).closest("td.containslink").attr("id");
        $.ajax({
            url: "/Controller/Action/" + id
        });
    });
}); 
```

请注意，这`1`是一个无效的 ID，因为它以数字开头。您可能想改用`data-`属性，例如`data-id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:56:26.073

尝试这个：

```
$(document).ready(function () {
    $("td.containsLink > a").click(function(){
        var tdId = $(this).parent("td.containsLink").attr("id");
        // do what ever you need to do with td value here
        $.ajax({
            url: myUrl,
        });
    });
}); 
```

# facebook - 将请求发布到 Facebook Open-Graphs 操作？

> ID：12198260
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:43.283
> 
> 标签：facebook, http, facebook-graph-api, post, facebook-opengraph

为什么我可以使用[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)正确发布此网址：

[https://graph.facebook.com/me/og.likes?object=http://guidepal.com/escape/30?access_token=xxx](https://graph.facebook.com/me/og.likes?object=http://guidepal.com/escape/30?access_token=xxx)

其中 xxx 是一个有效的访问令牌，甚至通过

[https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

但是当我尝试直接在浏览器 url 上使用它时，我得到了 json 响应：

```
{
  "error": {
  "message": "An active access token must be used to query information about the current user.",
  "type": "OAuthException",
  "code": 2500
  }
} 
```

我猜这是因为它不是正确的 POST 请求。但我尝试使用 hurl.it 并没有成功，尝试将我的代码用于 iPhone 应用程序，但仍然是相同的响应。只有当我使用资源管理器工具时它才真正起作用。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:26:27.167

> 为什么我可以使用 […] 这个网址正确发布：
> 
> `https://graph.facebook.com/me/og.likes?object=http://guidepal.com/escape/30?access_token=xxx`

我敢打赌，你*不能**使用*那个URL 来发帖——因为查询字符串中的*name=value*对是用 分隔的，*而不是*你在 URL 中使用的秒。**`&`*`?`***

 ***使用您的 URL，您只提供了一个`object`带有值的参数`http://guidepal.com/escape/30?access_token=xxx`——所以难怪 API 会抱怨您没有提供 access_token，因为实际上*您没有提供。****

# c++ - 在另一个静态库中链接静态库

> ID：12198261
> 
> 赞同：2
> 
> 时间：2012-08-30T13:41:43.380
> 
> 标签：c++, visual-studio, static-libraries

我需要将 Abaqus ODB C++ API 静态库链接到另一个静态库中。我可以让它“工作”，但我收到很多链接器警告。所有警告都是 LNK4006 和 LNK4221，并且与 API 库有关。

我想在主项目中链接生成的静态库。当我这样做时，应用程序会启动并给我一条消息，例如`The application was unable to start correctly 0xc000007b.`

如果不清楚： `API Lib`-> `MyProj Lib`->`MainProj`

* * *

请看下面保罗的回答。您不能像这样嵌套静态库，如果您认为需要，则需要了解有关链接阶段的更多信息。相反，主项目需要链接两个依赖的静态库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:56:59.373

您不能“在库中包含库”。您将这两个库链接到您的应用程序，这显然是您已经完成的。您只需要遵循 c++ 程序的一般规则：只允许定义一个符号，并且您需要防止潜在的名称冲突。

# image - MATLAB 中同一图中的图像和网格

> ID：12198264
> 
> 赞同：0
> 
> 时间：2012-08-30T13:41:59.080
> 
> 标签：image, matlab, plot, mesh

这个话题已经讨论过了，但我没有成功。

我在 MATLAB 中有一个基本的网格图，显示在 x、y、z 轴上，我想在网格底部的地板上插入一个图像（jpg）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:47:17.977

只是为了支持@Dan 的第一个建议（在发布时查看相同的内容），以下是如何使用强度值作为表面灰度在表面上覆盖或覆盖图像：

```
[X,Y,Z] = peaks(256); % surface
I = double(imread('cameraman.tif')); % image  

figure;
mesh(X, Y, Z, I); % overlay image as texture
colormap gray; hold on; 
c = 1.5*min(Z(:)); % scaling Z- location of image 
mesh(X, Y, c*ones(size(Z)), I) % underlay image as a constant-height surface 
```

![在此处输入图像描述](../Images/e9d5faa3e4fa82d74f480fa0765ec666.png)

然而`surf`，设置`'texturemap'`（如他所建议的链接答案）是一种更巧妙的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:58:50.927

如果它是灰度图像，那么也许您可以使用 X 和 Y 来显示图像，`surf(X,Y,Z,C)`其中 X 和 Y 将是像素坐标，并且也对应于您在网格底部的地板（即使用 创建它们`meshgrid`），Z 将只是`zeros(n)`，C 将是像素强度。然后让你的彩条灰度。我不是 100% 肯定我会假设你可以使用类似的东西`hold on`在同一个数字上绘制冲浪和网格。

在谷歌搜索我的上述建议后，我发现：[如何在 MATLAB 中以 2-D 和 3-D 绘制图像 (.jpg)？](https://stackoverflow.com/questions/3719502/how-can-i-plot-an-image-jpg-in-matlab-in-both-2-d-and-3-d). 看起来`SURF`是要走的路，但是您可以给它一个可以是图像的纹理贴图，而不是使用 C 参数。而且您只需要指定图像角落的 X、Y、Z 坐标，这很好。

# java - sqlite：不返回电子邮件地址（org.sqlite.RS）

> ID：12198271
> 
> 赞同：0
> 
> 时间：2012-08-30T13:42:14.703
> 
> 标签：java, sqlite

我的数据库中有一个包含用户电子邮件地址的电子邮件列，我可以使用以下语句

```
select email from student where fname = 'john' and lname = 'daly' 
```

当我使用以下代码调用它时

```
 String result = null;
        connection = ConnectDb();
        stat = connection.createStatement();
        ResultSet rs = stat.executeQuery(sql);
    while(rs.next())
   {
    result =rs.getString(0);
    }

        closeAll();            
        return result; 
```

我得到以下结果`org.sqlite.RS@546984`，我猜这是因为我需要将结果作为 a 返回`resultSet`，我可以对多个值执行此操作，但我无法仅对单个值进行计算

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:46:22.500

它应该是这样的：

//任何你知道只会返回一个的方式，所以只执行一次。

```
 ResultSet rs = stat.executeQuery(sql);
    while(rs.hasNext())
   {
    result =rs.getString("email");
    } 
```

# eclipse - 可以根据条件制作编辑器模板

> ID：12198273
> 
> 赞同：1
> 
> 时间：2012-08-30T13:42:19.080
> 
> 标签：eclipse

我正在寻找制作一个编辑器模板的可能性，该模板生成 ${enclosure_method_arguments} 的索引（如果存在）。

我当前的方法体模板：

```
log.debug("Begin -- ${return_type} ${enclosing_method}(${enclosing_method_arguments}"); 
```

结果如下所示：

```
public File chooseFile(final String text, final String fileName)
  {
    log.debug("Begin -- File chooseFile(text, fileName");
    return null;
  } 
```

但我喜欢的是这样的：

```
 public File chooseFile(final String text, final String fileName)
  {
    log.debug("Begin -- File chooseFile({0},{1})",text, fileName);
    return null;
  } 
```

# java - 在浏览器的任意位置按 ESC 时，等待请求被取消

> ID：12198277
> 
> 赞同：1
> 
> 时间：2012-08-30T13:42:40.910
> 
> 标签：java, javascript, browser, cross-browser

我正在使用长池和 Java Servlet 3.0 实现一个应用程序`AsyncContext`。

如您所知，始终应该有一个打开的连接来监听服务器并接收推送通知。我对此没有任何问题，但会出现以下问题：

当在浏览器中的任何位置按下`ESC`键时（无论是没有选择任何内容或当我专注于文本字段/文本区域时），浏览器都会关闭应该保持打开的请求。

是预期的行为吗？是否有跨浏览器的方法来阻止这种行为？

*我使用 Firebug 在 Chrome 和 Mozilla 上对此进行了测试*

*我知道我可以触发一个附加`keyup`事件的新请求，`body`但这可能在使用大量 event.stopPropagation() 的大型 JS 文档中容易出错*

LE：萤火虫日志：

![在此处输入图像描述](../Images/4ea429c1625989df69dceb3c407ecb61.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:49:39.493

Mozilla 上有一个关于此问题的突出错误，该错误于 2010 年首次发布。

[https://bugzilla.mozilla.org/show_bug.cgi?id=614304](https://bugzilla.mozilla.org/show_bug.cgi?id=614304)

“按 ESC 会中止在 Firefox 中打开 XMLHttpRequest。这不会在其他浏览器中发生（WebKit 除外，但只有在页面完成加载之前启动 XHR 时）。”

作为一种解决方法，我建议您可以捕获任何 ESC 按下。使用 jQuery，您可以执行以下操作：

```
$(document).keyup(function(e) {
  if (e.keyCode == 27) { return false };
}); 
```

# android - Android - 更新无效令牌？

> ID：12198278
> 
> 赞同：0
> 
> 时间：2012-08-30T13:42:41.770
> 
> 标签：android, facebook, access-token

是否有可能在不强制用户再次登录的情况下更新 Facebook 令牌？我有一个应用程序，当您在 device_1 上登录并在 device_2 上执行相同操作时，device_1 上的令牌无效。我不知道为什么会这样？他们应该得到完全相同的令牌，但他们不会。

回到我的问题。是否有可能更新无效令牌或使 facebook 在未过期的情况下始终返回相同的令牌？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:34:35.620

> 是否有可能更新无效令牌或使 facebook 在未过期的情况下始终返回相同的令牌？

要在不让用户重新使用 Facebook 进行身份验证的情况下更新无效令牌，我们的[文档](https://developers.facebook.com/docs/mobile/android/build/)显示了如何在第 8 步中执行此操作，请调用`extendAccessTokenIfNeeded()`您的`onResume()`方法。这将在后台扩展用户的访问令牌，而不会受到任何 UI 干扰。但是，这需要安装本机 Facebook 应用程序，但我们目前正在寻求提供替代方案。

您还可以点击端点以自行扩展访问令牌，如场景 4 中的[文档中所示。](https://developers.facebook.com/roadmap/offline-access-removal/)

此外，如果默认情况下未过期，我们的 Android SDK 将始终返回相同的令牌。但是，如果该令牌无效，那么它将过期，您将不得不检索一个新令牌。

# c# - 如何使用 ASP.Net 从 html 向方法传递值？

> ID：12198280
> 
> 赞同：0
> 
> 时间：2012-08-30T13:42:45.437
> 
> 标签：c#, asp.net, html, methods, eval

我有一个列表视图，我在其中绑定数据库中的数据。我有一个加密列，我们在保存到数据库时对其进行了加密。现在我想显示它的解密值。但我不知道在绑定列表时如何将该值传递给解密方法。我的html代码如下：

```
<asp:ListView ID="lsttest" runat="server" ItemPlaceholderID="trData" OnItemDataBound="lstRegOrg_ItemDataBound">
                            <LayoutTemplate>
                                <table cellspacing="0" border="0">
                                    <tr class="hdrRowColor1">
                                        <td width="35px" align="left">
                                            &nbsp;S.No
                                        </td>
                                        <td width="175px" align="left">
                                            <asp:LinkButton ID="lnkName" runat="server" CommandArgument="p.FirstName" OnClick="lnk_Sort">Name</asp:LinkButton>
                                            <asp:Image ID="img_lnkName" Visible="false" runat="server" />
                                        </td>
                                        <td width="175px" align="left">
                                            <asp:LinkButton ID="lnk_UserName" runat="server" CommandArgument="p.UserName" OnClick="lnk_Sort">User Name</asp:LinkButton>
                                            <asp:Image ID="img_lnk_UserName" Visible="false" runat="server" />
                                        </td>
                                        <td width="175px" align="left">
                                            <asp:LinkButton ID="lnkEmail" runat="server" CommandArgument="p.EmailAddress" OnClick="lnk_Sort">Email</asp:LinkButton>
                                            <asp:Image ID="img_lnkEmail" Visible="false" runat="server" />
                                        </td>
                                        <td width="120px" align="left">
                                            <asp:LinkButton ID="lnkRoleName" runat="server" CommandArgument="tblroles.RoleName"
                                                OnClick="lnk_Sort">Role</asp:LinkButton>
                                            <asp:Image ID="img_lnkRoleName" Visible="false" runat="server" />
                                        </td>
                                        <td width="150px" align="left">
                                            <asp:LinkButton ID="lnk_CreatedBy" runat="server" CommandArgument="u.firstName" OnClick="lnk_Sort">Created By</asp:LinkButton>
                                            <asp:Image ID="img_lnk_CreatedBy" Visible="false" runat="server" />
                                        </td>
                                        <td width="120px" align="left">
                                            <asp:LinkButton ID="lnkCreatedDate" runat="server" CommandArgument="p.CreatedDate"
                                                OnClick="lnk_Sort">Created Date</asp:LinkButton>
                                            <asp:Image ID="img_lnkCreatedDate" Visible="false" runat="server" />
                                        </td>
                                        <td width="150px" align="left">
                                            <asp:LinkButton ID="lnk_LastModifiedBy" runat="server" CommandArgument="u.firstName"
                                                OnClick="lnk_Sort">Last Modified By</asp:LinkButton>
                                            <asp:Image ID="img_lnk_LastModifiedBy" Visible="false" runat="server" />
                                        </td>
                                        <td width="125px" align="left">
                                            <asp:LinkButton ID="lnk_LastModifiedDate" runat="server" CommandArgument="p.CreatedDate"
                                                OnClick="lnk_Sort">Last Modified On</asp:LinkButton>
                                            <asp:Image ID="img_lnk_LastModifiedDate" Visible="false" runat="server" />
                                        </td>
                                        <td align="center" width="60px">
                                            <asp:LinkButton ID="lnkIsActive" runat="server" CommandArgument="p.IsActive" OnClick="lnk_Sort">IsActive</asp:LinkButton>
                                            <asp:Image ID="img_lnkIsActive" Visible="false" runat="server" />
                                        </td>

                                        <td align="center" width="50px" style="border-right: 1px solid #6398cc">
                                            Actions
                                        </td>
                                    </tr>
                                    <tr id="trData" runat="server">
                                    </tr>
                                </table>
                            </LayoutTemplate>
                            <ItemTemplate>
                                <tr class='<%# Convert.ToBoolean(Container.DataItemIndex % 2) ? "EvenRowColor" : "OddRowColor" %>'>
                                    <td align="left" valign="middle">
                                        &nbsp;<%# Container.DataItemIndex+1 %>.
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="lblFullName" runat="server" Text='<%# Eval("Name")%>'></asp:Label>
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="Label1" runat="server" Text='<%= CCMMUtility.Decryptdata(Eval("UserName")) %>' />
                                       <%-- <asp:Label ID="Label1" runat="server" Text='<%# Eval("UserName")%>' />--%>
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="lblEmail" runat="server" Text='<%# Eval("EmailAddress")%>'></asp:Label>
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="lblRole" runat="server" Text='<%# Eval("RoleName") %>'></asp:Label>
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="Label2" runat="server" Text='<%# Eval("CreatedBy") %>'></asp:Label>
                                    </td>
                                    <td align="left">
                                        &nbsp;<%# Convert.ToDateTime(Eval("CreatedDate")).ToString("MMM, dd yyyy") %>
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="Label3" runat="server" Text='<%# Eval("ModifiedBy") %>'></asp:Label>
                                    </td>
                                    <td align="left">
                                        &nbsp;<%# Convert.ToDateTime(Eval("ModifyDate")).ToString("MMM, dd yyyy")%>
                                    </td>
                                    <td align="center">
                                        <asp:Label ID="lblName" runat="server" Style="display: none;" Text='<%# Eval("Name")%>'></asp:Label>
                                        <asp:Label ID="lbl_Status" runat="server" Style="display: none;" Text='<%# Eval("IsActive")%>'></asp:Label>
                                        <asp:ImageButton ID="imgbtnStatus" runat="server" CommandArgument='<%# Eval("id") %>'
                                            OnClick="imgbtnStatus_Onclick" />
                                    </td>

                                    <td align="center" class="last">
                                        <asp:ImageButton ID="imgbtnEdit" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/edit.png"
                                            ToolTip="Edit Details" CommandArgument='<%# Eval("Id") %>' OnClick="imgbtnEdit_OnClick" />

                                    </td>
                                </tr>
                            </ItemTemplate>
                        </asp:ListView> 
```

我想为列用户名这样做。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:49:03.927

你应该做

```
Text='<%# CCMMUtility.Decryptdata(Eval("UserName")) %>' 
```

代替

```
Text='<%= CCMMUtility.Decryptdata(Eval("UserName")) %>' 
```

实际上`#`是用来做数据绑定的，`=`是用来通过一些代码块来实现简单的字面量类型输出的，所以`Eval()`这是一个数据绑定的方法，里面不会有任何作用`=`。

# c# - 从外部编辑器将命令传递给 .NET GUI

> ID：12198282
> 
> 赞同：0
> 
> 时间：2012-08-30T13:42:48.867
> 
> 标签：c#, .net, wcf, interprocess

我有什么方法可以启动 C# .NET 程序的实例，然后使用命令行选项再次调用它，例如，在文本框中插入文本？

用例：1）双击/启动：MyProgram.exe（将启动GUI）2）从命令行：MyProgram.exe -addText“要添加的文本”（当我按下某个键盘时，我的“最喜欢的”编辑器将启动此命令组合）

即我想将命令传递给我的（GUI）程序的一个已经运行的实例。

我一直在考虑 WCF，但在那里看不到任何解决方案......

当然，我可以创建一个文件，我的程序每 X 毫秒轮询一次，读取内容，执行命令并删除它，但没有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:48:18.833

是的，这与让应用程序的单个实例响应关联文件类型的启动相同。

请参阅[将“已知文件类型”打开到自定义应用程序的运行实例中 - .NET](https://stackoverflow.com/questions/424368/opening-a-known-file-type-into-running-instance-of-custom-app-net)或在此处搜索`WindowsFormsApplicationBase`为您处理实例连接的内容。

# c# - C#确定图像中是否存在对象

> ID：12198288
> 
> 赞同：5
> 
> 时间：2012-08-30T13:43:08.650
> 
> 标签：c#, image-processing, colors, image

背景：

我们计划在传送带系统上使用摄像头来计数物体。在这种特定情况下，我们不能使用传感器。我所有的对象都非常一致，并且很容易检测它们是否存在于图片中。我一直在看 Aforge 和其他一些库，看起来很容易。 [这就是我想做的。](http://kishordgupta.wordpress.com/2010/12/24/detect-object-from-image-based-on-object-color-by-c/)

话虽如此，我确实有些担心。过滤过程中，您必须指定要搜索的颜色。我的对象是纯色的，但我们都知道在我查看的特定点上可能有 100 多个不同的 rgb 值。

有什么方法可以搜索一系列颜色，或者查看颜色是否“喜欢”特定颜色？

这是我第一次尝试任何类型的图像处理。我还没有尝试过任何东西，即将开始，这在我开始之前就已经是一个问题了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:47:43.193

除了使用 RGB 颜色模型，您可以使用 HSL 之一（Hue Saturation Light），您可以忽略饱和度和光线，只检查色调参数：

[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

这是一种使用 c# 的方法（感谢[如何将 rgb 颜色更改为 hsv](https://stackoverflow.com/questions/359612/how-to-change-rgb-color-to-hsv)）：

```
System.Drawing.Color color = System.Drawing.Color.FromArgb(red, green, blue);
float hue = color.GetHue();
float saturation = color.GetSaturation();
float lightness = color.GetBrightness(); 
```

# ios - 可以使用 AVAssetReader 通过蓝牙/wifi 流式传输音频数据吗？

> ID：12198290
> 
> 赞同：1
> 
> 时间：2012-08-30T13:43:18.067
> 
> 标签：ios, gksession, avassetreader

根据 AVAssetReader[文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetReader_Class/Reference/Reference.html)

```
AVAssetReader is not intended for use with real-time sources, and its performance is not guaranteed for real-time operations. 
```

然而，我看到它与音频队列服务一起工作的[例子](https://stackoverflow.com/questions/11398997/avassetreader-to-audioqueuebuffer)......这是实时的，不是吗？我可以使用 AVAssetReader 流式传输数据并通过 GKSession 或其他方式发送数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:49:55.007

经过几个月的广泛测试和开发..我可以声称 AVAssetReader 确实可以在实时和可靠地工作得很好..它可以轻松地与 GKSession 集成以通过网络发送数据包。

# graph - Graphchi 中的顶点数据类型

> ID：12198291
> 
> 赞同：1
> 
> 时间：2012-08-30T13:43:18.830
> 
> 标签：graph, types, vertex, graphchi

我们可以将字符串作为顶点数据类型吗？有人提到我们不能使用动态数据类型但假设我想继续向顶点添加一些数据我该怎么办？我正在考虑使用数组，但大小未知；那么使用字符串会导致任何问题吗？（我将继续连接到字符串）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:49:40.957

尽管[文档](http://code.google.com/p/graphchi/wiki/CreatingGraphChiApplications)明确禁止非 POD 类型（禁止`std::vector<>`等`std::string`），但似乎可以使其工作（基于编译器和运行时在 rev. 278 中报告的错误）：

*   确保您的类型具有默认构造函数
*   实现`graphchi::parse<>()`专门针对您的类型的模板函数

例如，（ab）使用向量来存储单个 int （*免责声明*：为概念证明编写的示例，而不是为了提高效率）：

```
class VertexData
{
  std::vector<int> data;

public:
  // default ctor
  VertexData()
  {
    setData(0);
  }

  // convenience ctor
  VertexData(int v)
  {
    setData(v);
  }

  void setData(int v)
  {
    data.clear();
    data.push_back(v);
  }

  int getData()
  {
    return data.at(0);
  }
};

namespace graphchi
{
  template<>
  void parse<VertexData>(VertexData& vd, const char* s)
  {
    // NOTE: stoi is C++11 feature, use your favorite C++03 equivalent if needed
    int x = std::stoi(s);
    vd.setData(x);
  }
} 
```

请注意，默认二进制输出 (*.vout) 将写入 VertexData 本身的二进制内容，这意味着原始指针`vector<>`以及其他动态数据类型（因此文档禁止）。要查看实际值，请按照[此 SO 线程](https://stackoverflow.com/questions/12112543/writing-output-to-a-file-in-graphchi)中的说明进行操作（使用`graphchi::foreach_vertices<>()`输出函子）。

**更新**

尽管上述方法似乎可行，但出于多种原因不应使用它，包括：

*   动态内存处理要求所有数据都适合内存，大型数据集可能并非如此
*   由于顶点和边对象被写入/从磁盘读取的方式，不能保证为任何顶点/边对象调用析构函数，这可能（至少）导致资源（例如内存）泄漏。

简而言之：文档有充分的理由禁止这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:12:15.633

Graphchi 最近添加了对作为顶点数据类型的动态向量的有限支持：[http ://code.google.com/p/graphchi/wiki/DynamicVertexData](http://code.google.com/p/graphchi/wiki/DynamicVertexData)

# java - 将非外部 JAR 添加到 Eclipse Java 项目

> ID：12198298
> 
> 赞同：0
> 
> 时间：2012-08-30T13:43:34.150
> 
> 标签：java, eclipse

有人问过类似的问题，但我仍然不知道/理解答案。在 Eclipse Java 项目中添加对 .jar 的引用时，“添加 JAR”和“添加外部 JAR”有什么区别？我知道前者通常用于从 Eclipse 工作区中的其他项目构建的 JAR，但是从引用项目的角度来看，两者有什么区别？

此外，当我单击“添加 Jar”并在我的工作区中选择另一个导出 .jar 文件的项目时，我在文件系统 GUI 中看不到 .jar 文件，因此无法选择它。在下面的截图中，我想引用 MiscUtils 项目中的 MiscUtils.jar。.jar 肯定位于“bin”目录中，但不会显示在 UI 中。

谢谢！

[![Eclipse IDE 屏幕截图](../Images/3d4011b8185752a9b819dd93660d3419.png)](https://i.stack.imgur.com/7ruEj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:46:04.267

“添加 jar” 是添加一个在当前项目树中的 jar，因此 UI 仅显示项目的子目录。“添加外部 jar”是添加一个可以位于任何位置的 jar，因此在这种情况下，UI 允许您浏览任何可用驱动器上的任何文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:46:37.070

> “添加 JAR”和“添加外部 JAR”有什么区别？

--> 使用`Add External JAR`，您可以添加来自外部项目的 jar，远离您的项目工作区。使用`Add Jars`，您可以从当前打开的工作区中可用的项目中添加 jar。

# objective-c - 如何使用AFNetwork下载多个文件

> ID：12198300
> 
> 赞同：1
> 
> 时间：2012-08-30T13:43:36.663
> 
> 标签：objective-c, ios, afnetworking

我想使用 AFNetwork 下载多个文件，但我不知道如何实现这个？如您所见，我创建了一个操作数组并在其中添加了 3 个任务

```
NSMutableArray *operations = [NSMutableArray array];
NSArray *requestArray = @[ @"...task1.zip", @"task2.zip", @"task3.zip" ];
for (int i = 0; i < 3; i++) {
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[requestArray objectAtIndex:i]]];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:[[requestArray objectAtIndex:i] lastPathComponent]];
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Successfully downloaded file to %@", path);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];

    [operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        NSLog(@"Operation%i: bytesRead: %d", i, bytesRead);
        NSLog(@"Operation%i: bytesRead: %lld", i, totalBytesRead);
        NSLog(@"Operation%i: bytesRead: %lld", i, totalBytesExpectedToRead);
    }];
    [operations addObject:operation];
} 
```

然后，我该怎么办？我做了以下事情，但没有任何反应

```
AFHTTPClient *requestHandler = [[AFHTTPClient alloc] init];
[requestHandler enqueueBatchOfHTTPRequestOperations:operations progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {

} completionBlock:^(NSArray *operations) {
}]; 
```

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T02:33:33.543

`AFHTTPClient *requestHandler = [[AFHTTPClient alloc] init];`应该换成`AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@""]];` 因为 `initWithBaseURL`init很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T20:25:23.367

```
[operation start]; 
```

或 NSOperationQueue 是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T05:11:01.563

尝试这个...

```
NSArray *linkArr = [NSArray arrayWithObjects:@"http://abc.mp3",@"http://abc.mp3",@"http://abc.mp3", nil];

    NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];

    for (int i=0; i< linkArr.count; i++) {

        NSString *urlpath = [linkArr objectAtIndex:i];
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlpath]];

        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"Audio%i.mp3",i]];
        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSLog(@"Successfully downloaded file to %@", path);
            // Init the audio player.

        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Error: %@", error);
        }];

        [operation setDownloadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
        NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);

        }];

        [operationQueue addOperation:operation];
    } 
```

# javascript - 将嵌套的 Backbone 模型存储和恢复到本地存储中

> ID：12198301
> 
> 赞同：0
> 
> 时间：2012-08-30T13:43:38.523
> 
> 标签：javascript, view, backbone.js, nested, models

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:23:54.430

诚然，Backbone*不*适合嵌套模型（模型中的模型）：

> Backbone 不包括对嵌套模型和集合或“具有许多”关联的直接支持，因为有许多用于在客户端建模结构化数据的良好模式，*并且 Backbone 应该为实现其中任何一个提供基础*。

您可以[在此处](http://backbonejs.org/#FAQ-nested)阅读所有相关信息，其中还提供了一些建议。

# c - 代码计算

> ID：12198309
> 
> 赞同：3
> 
> 时间：2012-08-30T13:44:07.587
> 
> 标签：c, math, wait

有人可以告诉我这行代码是做什么的吗？

```
wait = (20ul*50ul)-1ul ; 
```

我了解所执行的数学运算，它是 20 和 50 的乘积，然后从中减去 1，但我不了解 ul 部分。它只是一个单位还是有任何意义。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T13:45:08.257

ul 是 Unsigned Long 的符号简写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:02:58.003

后缀强制每个`ul`常量表达式为 type `unsigned long`。

通常，整数常量表达式的类型是可以表示其值的第一种类型。如果没有后缀，每个文字表达式`20`,`50`和`1`将是 type`int`而不是`unsigned long`.

对于*这个特定的计算*，它并不重要，但有时您确实希望对常量表达式强制执行无符号操作（无符号操作的溢出是明确定义的）。

# java - 标签之间的硒getAttribute？

> ID：12198312
> 
> 赞同：0
> 
> 时间：2012-08-30T13:44:13.587
> 
> 标签：java, xpath, selenium, selenium-webdriver

那是我想用硒验证的来源：

```
<tr class="myclass">
    <td class="column" style="width:50%"> Key </td>
    <td style="width:50%"> Value </td>
    <td style="width:50%"> &nbsp; </td>
</tr> 
```

我想验证他的“价值观”一词是否包含在其中。

以下语句总是返回：“Key”而不是“Values”

```
driver.findElement(By.xpath("//tr[td[contains(text(), 'Key')]]/td")).getText(); 
```

我究竟做错了什么？如何获取 xpath 表达式的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:49:35.720

这里试试这个

```
driver.findElement(By.xpath("//tr[@class='myclass']/td[1]")).getText(); 
```

表中的所有列都是兄弟。如果您在没有数组的情况下调用它们，它将返回第一个的值。如果 td[1] 不起作用，请尝试 td[2]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:01:01.293

尝试使用 CSS 选择器

`driver.findElement(By.cssselector(".myclass > td[style='width:50%']")).getText();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:51:41.147

为什么不只是这样，它不会取决于它在什么**位置**，只是它存在？

```
//tr/descendant::td[contains(text(), 'Value')] 
```

或在以下位置执行 FindElements：

```
//tr[@class='myclass']/td 
```

然后遍历它们，确保出现“值”。

# php - MySQL到CSV使用PHP和替换值

> ID：12198315
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:44:18.623
> 
> 标签：php, mysql, csv

需要帮助。当列customer_id='0'的列值时，我需要将其替换为值'Guest'。这是我的代码，我已经尝试了所有我能找到的东西，但都没有成功。提前致谢。

```
<?php
//Connection to database
mysql_connect("localhost","Username","Password");
mysql_select_db("DB_Name");

$result = mysql_query("SELECT

`order`. order_id,
`order`. customer_id,
`order`. payment_company,
`order`. payment_address_1,
`order`. payment_address_2,
`order`. payment_city,
`order`. payment_zone,
`order`. payment_postcode,
`order`. payment_firstname,
`order`. payment_lastname,
`order`. telephone,
`order`. email

FROM `order`
INNER JOIN customer ON `order`.customer_id = customer.customer_id
WHERE order_status_id > 0 ORDER BY order_id");
if (!$result) die('Sorry, I was unable to any fetch records. Try again');
$num_fields = mysql_num_fields($result);

$headers = array();

// Creating headers for output files
for ($i = 0; $i < $num_fields; $i++)
{
    $headers[] = mysql_field_name($result , $i);
}

$fp = fopen('php://output', 'w');
if ($fp && $result)
{
// name of file with date
    $filename = "Filename-".date('Y-m-d').".csv";

        // Setting header types for csv file.
        header('Content-Type: text/csv');
        header('Content-Disposition: attachment; filename='.$filename);
        header('Pragma: no-cache');
        header('Expires: 0');
        fputcsv($fp, $headers);

        while ($row = mysql_fetch_row($result))
        {
             fputcsv($fp, array_values($row));
        }
        die;
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:50:16.157

这个怎么样？

```
while ($row = mysql_fetch_row($result))
{
    $row[1] = (($row[1]  == '0') ? 'Guest' : 0);
    fputcsv($fp, array_values($row));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:50:50.517

```
SELECT order.order_id,
       CASE WHEN order.customer_id = '0' THEN 'Guest' ELSE order.customer_id END AS customer_id, 
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:51:19.357

您将不得不在 fputcsv 之前入侵

```
 while ($row = mysql_fetch_row($result))
    {
        if($row[1] == '0') {
            $row[1] = 'Guest';
        }
        fputcsv($fp, array_values($row));
    } 
```

还可以查看 while ($row = mysql_fetch_assoc($result)) 你可以使用 $row['customer_id'] 而不是 $row[1]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:56:18.237

```
$result = mysql_query("SELECT 
`order`.order_id,
IF (`order`.customer_id = 0, 'Guest', `order`.customer_id) AS customer_id,
`order`.payment_company,
etc.."); 
```

# qt - 没有装饰的 Qt 小部件

> ID：12198325
> 
> 赞同：0
> 
> 时间：2012-08-30T13:44:55.463
> 
> 标签：qt, graphics, widget, window, transparent

我想在 Qt 中编写一个没有装饰的小部件。在这里，我的意思是没有标题栏或普通小部件具有的任何“灰色区域”。例如我想用 QPainter 画一个圆：

```
QPainter painter(this);
painter.setRenderHint(QPainter::Antialiasing);
painter.setBrush(QBrush(QColor(100, 100, 100,255), Qt::SolidPattern));
painter.drawEllipse(QPoint(200, 200), 50, 50); 
```

我希望那个圆圈成为实际的小部件。例如，当我在位置 (249,249) 上单击圆外（在圆外但在圆的外接正方形内）以激活其下方的实体（因此成为圆形窗口，而不是方形窗口）。

我已经做了一些研究，但我没有从 QSplashScreen 得到任何进一步的结果，这是我想要的最接近的东西（id 没有装饰，我可以在上面画画，但它仍然有形成窗口并且是可点击的）

这可以在Qt中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:50:00.407

我认为相关的属性是 Qt::FramelessWindowHint 和 QWidget::setMask()。

# c# - 在 c# 的下拉列表中使用 show.hide？

> ID：12198330
> 
> 赞同：0
> 
> 时间：2012-08-30T13:45:10.413
> 
> 标签：c#, asp.net, validation, drop-down-menu, asyncfileupload

我正在使用工具箱控件（例如文本框、下拉列表）验证用户输入，我希望当用户在下拉列表中选择一个选项时，使其显示或隐藏其下方的上传控件。

例如，在下面的代码中被选为孤独工作作为是答案时，我希望孤独的工作过程文档的文件上传控制要显示在下面的显示，但如果它是一个否答案，我不希望将文件上传到控制展示。

任何帮助将不胜感激。谢谢

```
 <td class="question">
                             Lone Working:
                    </td>
                    <td>
                        <asp:DropDownList ID="DDLONE" runat="server" Width="150px" 
                            OnSelectedIndexChanged="DDLONE_SelectedIndexChanged">
                            <asp:ListItem Text="Yes"></asp:ListItem>
                            <asp:ListItem Text="No"></asp:ListItem>
                        </asp:DropDownList>
                        <span class="mandatory">*</span>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator27" runat="server" ControlToValidate="DDLONE" ErrorMessage=" Required." InitialValue="Please select one..." ForeColor="Red" SetFocusOnError="true"></asp:RequiredFieldValidator>
                          </td>
                </tr>
                <tr>
                          <td class="question">
                        Lone Working Company Procedure:
                        </td>
                          <td>
                        <asp:AsyncFileUpload ID="AsyncFileUpload3" runat="server" UploaderStyle="Traditional"
                            PersistedStoreType="Session" CssClass="answer" style="float:left" PersistFile="True" CompleteBackColor="#C3D021" />
                        <div class="mandatory" style="display:inline">*</div>
                      <%--- <asp:RequiredFieldValidator ID="AsyncFileUpload3_RequiredFieldValidator" runat="server" 
                            ErrorMessage=" Required."
                            ForeColor="Red"
                            ControlToValidate="AsyncFileUpload3"></asp:RequiredFieldValidator>
                        <asp:TextBox ID="txtUplLone" runat="server" style="display:none" MaxLength="0" /> ---%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:50:33.467

您可以尝试使用此代码

```
1 Add AutopostBack="true"
<asp:DropDownList ID="DDLONE" runat="server" Width="150px" 
                            OnSelectedIndexChanged="DDLONE_SelectedIndexChanged" AutopostBack="true">

2

 protected void DDLONE_SelectedIndexChanged(object sender, EventArgs e)
 {
    if(DDLONE.SelectedItem.Text == "Yes")//Adjust
    {
       AsyncFileUpload3.Visible = true;
    }
    else
    {
       AsyncFileUpload3.Visible = false;
    }    
 } 
```

注意：您必须使用此方法绑定下拉列表（只需一次）

```
if(! IsPostBack)
{
  //Bind
} 
```

并使用 ViewState 来持久化您的 DropDownList

# mysql - #1411 - INSERT INTO...SELECT 上函数 str_to_date 的日期时间值不正确

> ID：12198332
> 
> 赞同：8
> 
> 时间：2012-08-30T13:45:26.937
> 
> 标签：mysql, sql, datetime, select, insert

这些查询需要字符串到日期的转换，因为时间戳存储为字符串，并且日志记录应用程序是不可更改的。

我有一个完美运行的选择查询->

```
(SELECT main.user_id, main.Timestamp
FROM `user_table` main
WHERE STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) <
  (SELECT  MAX(STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) 
   FROM `user_table` sub
   WHERE sub.user_id = main.user_id )) 
```

这将从我的表中选择所有但最近添加的用户 ID 和时间戳。

但是，当我尝试将其插入另一个表时......就像这样->

```
INSERT INTO user_table_temp (`user_id`, `Timestamp`)
(SELECT main.user_id, main.Timestamp
FROM `user_table` main
WHERE STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) <
  (SELECT  MAX(STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) 
   FROM `user_table` sub
   WHERE sub.user_id = main.user_id )) 
```

我收到以下错误->

```
#1411 - Incorrect datetime value: 'Mon Mar 14 16:10:10 CDT 2011' for function str_to_date 
```

这样做的原因是因为我的时间戳以两种格式存储。一个将在非夏令时存储为“CST”，另一个将在夏令时存储为“CDT”。当 INSERT INTO SELECT 到达与我查询的内容相反的第一行时，它将失败并显示上述消息。

我也尝试过合并它们，这在运行选择时也有效 - >

```
INSERT INTO user_table_temp  (`user_id `, `Timestamp`)
(SELECT main.user_id , main.Timestamp
FROM `user_table` main
WHERE COALESCE(STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ), STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) <
  (SELECT  MAX(COALESCE(STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ), STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' ))) 
   FROM `user_table` sub
   WHERE sub.user_id = main.user_id )) 
```

为什么这会在 INSERT 上失败，但 SELECT 会起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:49:54.100

我认为它在 INSERT 上失败，因为您没有使用[支持的格式](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html)。支持的格式。. .

> 作为 'YYYY-MM-DD HH:MM:SS' 或 'YY-MM-DD HH:MM:SS' 格式的字符串。这里也允许使用“宽松”的语法：任何标点符号都可以用作日期部分或时间部分之间的分隔符。例如，“2012-12-31 11:30:45”、“2012^12^31 11+30+45”、“2012/12/31 11*30*45”和“2012@12@31 11” ^30^45' 是等价的。
> 
> 作为没有分隔符的字符串，格式为“YYYYMMDDHHMMSS”或“YYMMDDHHMMSS”，前提是该字符串作为日期有意义。例如，“20070523091528”和“070523091528”被解释为“2007-05-23 09:15:28”，但“071122129015”是非法的（它有一个无意义的分钟部分）并变成“0000-00-00 00”： 00:00'。
> 
> 作为 YYYYMMDDHHMMSS 或 YYMMDDHHMMSS 格式的数字，前提是该数字作为日期有意义。例如，19830905132800 和 830905132800 被解释为“1983-09-05 13:28:00”。

# c# - 具有向后导航的流畅接口（方法链）

> ID：12198333
> 
> 赞同：3
> 
> 时间：2012-08-30T13:45:31.113
> 
> 标签：c#, extension-methods, fluent-interface, method-chaining

我需要构建一个使用方法链接的类。我理解方法链的概念。例子：

```
class Company
{
    private String companyName;
    public setCompanyName(String companyName)
    {
        this.companyName = companyName;
        return this;
    }

    public Person addPerson(String name)
    {
         person = new Person();
         person.setName(name);

         return person;
    }
}

class Person
{
    private String name;
    private String address;
    private bool license

    public Person setName(String name)
    {
        this.name = name;
        return this;
    }

    public Person hasDriverLicense(bool license)
    {
        this.license = license;
        return this;
    }

    public Person setAddress(String address)
    {
        this.address = address;
        return this;
    }
}

//in some other class / method i do:
Company company = new Company()
.setCompanyName("SomeCompany")
.addPerson("Mike")
.setAddress("Street 118"); 
```

但我需要更进一步。我需要能够做到这一点：

```
Company company = new Company()
.setCompanyName("SomeCompany")
.addPerson("Mike")
.setAddress("Street 118");
.addPerson("Jane")
.setAddress("Street 342");
.hasDriverLicense(true) 
```

所以你可以看到我需要能够继续链接。该方法`addAddress`并不总是链中的最后一个方法。它可以是`Person`类中的任何方法。

有没有实现此功能的好方法？也许有方法扩展之类的？

非常感谢任何帮助/示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:00:06.993

你*可以*做到。这并不意味着您*应该*：

Person 和 Company 的方法应该简单地返回一个在上下文中聚合个人和公司的对象。如果您有 IPerson 接口和 ICompany 接口，则此类型将实现两者，在内部保存对两者的引用，并将适当地分派调用。（对 IPerson 方法的调用将委托给内部 IPerson）。

话虽如此，我强烈劝阻你不要走这条路。它令人困惑，很难调试并且违反了基本的 OO 原则（例如接口隔离）。

# iphone - 添加语句不适用于 sqlite

> ID：12198334
> 
> 赞同：0
> 
> 时间：2012-08-30T13:45:33.267
> 
> 标签：iphone, sqlite

我已经编写了这段代码来插入具有外键值的数据，但它不在 Sqlite3_open 方法中。请帮我 。我没有得到什么问题？

```
- (void)AddCashGame {
    sqlite3_stmt *addStmt;

    appDelegate = (XYZAppDelegate *)[UIApplication sharedApplication].delegate;
    NSString *dbPath = [appDelegate.GetDocumentDirectory stringByAppendingPathComponent:@"PokerDatabase.sqlite"];
    NSLog(@"Db path is %@",dbPath);
    if (sqlite3_open([dbPath UTF8String], &database) ){
   const char *sql="insert into CashGameCell (CashLocation,CashGames,CashBank,CashBuy,CashFood,CashNote,CashRebuyCount,CashRebuyTotal,CashTokes,CashPlayer,CashProfileid) values (?,?,?,?,?,?,?,?,?,?,?)";
    if (sqlite3_prepare(database, sql, -1, &addStmt, NULL)!= SQLITE_OK) {
        NSLog(@"Error while creating database %s",sqlite3_errmsg(database));

    }
    sqlite3_bind_text(addStmt, 1, [CashLocation UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStmt, 2, [CashGames UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStmt, 3, [CashBank UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(addStmt, 4, [CashBuy UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(addStmt, 5, [CashFood UTF8String], -1, SQLITE_TRANSIENT);
   sqlite3_bind_text(addStmt, 6, [CashNote UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(addStmt, 7, [CashRebuyCount UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(addStmt, 8, [CashRebuyTotal UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(addStmt, 9, [CashTokes UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(addStmt, 10, [CashPlayer UTF8String], -1, SQLITE_TRANSIENT);
   sqlite3_bind_int(addStmt, 11, CashProfileid);   
    }

if (SQLITE_DONE!= sqlite3_step(addStmt)) {
    NSLog(@"Error while inserting");
}
else Cashid = sqlite3_last_insert_rowid(database);
NSLog(@"cash id in profile model %d",Cashid);
sqlite3_finalize(addStmt);
sqlite3_close(database); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:06:01.920

我有类似的代码将值添加到数据库中。为什么不试试这个：

```
- (void)AddCashGame {
sqlite3 *database;
NSString *path =[NSSearchPathForDirectoriesInDomains(NSDocumentDictionary, NSUserDomainMask, YES) objectAtIndex:0];
NSString *database_path=[path stringByAppendingPathComponent:@"PokerDatabase.sqlite"];

const char *dbPath = [database_path UTF8String];

NSLog(@"Db path is %@",dbPath);

sqlite3_stmt *statment;

NSString *q=[NSString stringwithFormat:@"insert into CashGameCell (CashLocation,CashGames,CashBank,CashBuy,CashFood,CashNote,CashRebuyCount,CashRebuyTotal,CashTokes,CashPlayer,CashProfileid) values (\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\")", value1,value2,value3,value4,value5,value6,value7,value8,value9,value10,value11]; 

const char *query = [q UTF8String];

if (sqlite3_open(dbPath, &database)==SQLITE_OK ){

  if (sqlite3_prepare_v2(database, query, -1, &statement, nil)== SQLITE_OK) { 

    if(sqlite3_step(statement){
    //I assume this code below is correct         
      sqlite3_bind_text(addStmt, 1, [CashLocation UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 2, [CashGames UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 3, [CashBank UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 4, [CashBuy UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 5, [CashFood UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 6, [CashNote UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 7, [CashRebuyCount UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 8, [CashRebuyTotal UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 9, [CashTokes UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_text(addStmt, 10, [CashPlayer UTF8String], -1, SQLITE_TRANSIENT);
      sqlite3_bind_int(addStmt, 11, CashProfileid);
    }
  }
  else{
     NSLog(@"Error while creating database %s",sqlite3_errmsg(database));
  }   
}

sqlite3_close(database);
} 
```

# iphone - 对宏使用未声明的标识符

> ID：12198336
> 
> 赞同：3
> 
> 时间：2012-08-30T13:45:40.473
> 
> 标签：iphone, objective-c, ios, xcode, macros

在我的应用程序中，我正在执行以下步骤

1）创建一个.h文件说，GlobalMacros.h

在 GlobalMacros.h

```
#define IP_ADDR @“SERVER_IP” 
```

2）在我的应用程序 .pch 文件中

```
import “GlobalMacros.h” 
```

然后在其余的其他类中，我在 iOS<5.0 中使用这个 IP_ADDR 宏没有问题，但在 iOS>5.0 中，我在**使用未声明的标识符 IP_ADDR 时出现错误**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:59:18.660

原因是其中之一：

*   有`.pch file`一些`#if`测试有条件地包括`#import "GlobalMacros.h"`构建版本是否低于 iOS5

*   该文件中`GlobalMacros.h`有条件`#if`

*   某些头文件或源文件中包含`#if`取消定义的语句`IP_ADDR`

*   在小于 iOS5 的项目中，该`.pch`文件使用的是不同的`GlobalMacros.h`文件，而不是其中包含`IP_ADDR`定义的文件

编辑：我应该`Xcode4.5`在我的文件中添加这个全局宏`.pch`文件。由于某种原因，预处理器变得混乱，源代码编辑器在许多文件中显示未知宏，似乎是随机的。我正在做的是当我得到错误时，将全局宏文件添加到受影响的文件中。

# sharing - 在 mac 10.8 中启用 WebSharing

> ID：12198342
> 
> 赞同：0
> 
> 时间：2012-08-30T13:45:47.833
> 
> 标签：sharing, osx-mountain-lion, sites, system-preferences

在 mac 10.6.8 systempreference->sharing->WebSharing 中，但 mac 10.8 websharing 不在共享文件夹中，我如何在 systempreference 面板中添加和启用 websharing。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:18:31.957

我在一些运行 OSX 10.8 的 Mac 上使用了它：

[http://amz.clickontyler.com/WebSharing.zip](http://amz.clickontyler.com/WebSharing.zip)

它在系统偏好设置中创建一个 PrefPane，有两个切换： - 网络开/关 - php 禁用/启用

在其中一台 Mac 上，它起初无法正常工作。我卸载并重新安装了它。可以通过右键单击 PrefPane 并选择“Remove Preference Pane”来卸载它。或者通过将其从 YourUserName/Library/PreferencePanes/ 或 /Library/PreferencePanes 中删除，具体取决于您的安装方式。

在重新安装时，它可以工作，但我认为它不会“跟踪”服务，例如，你只是杀死 httpd 进程，或者通过活动监视器停止它。我不认为 WebSharing PrefPane 知道。它必须重新切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T11:28:24.823

我也不确定，如果使用 ClickOnTylor 的 WebShare PrefPane 是个好主意......

它会在切换后询问用户密码，但如果您逃避密码输入，也会切换。昨天我关闭了 WebSharing（由 Safari localhost 检查）。今天我看到 WebSharing PrefPane 仍然显示“关闭”。所以我将它从 SystemControl 中删除。然后我意识到，Safari localhost 仍然回答“它有效”。

总之：在没有背景知识的情况下使用 WebSharing PrefPane 不是一个好主意，如果你知道背景我觉得你不需要 WebSharing PrefPane。

# c# - 如何使用c#检测excel工作簿中的下一个空闲列

> ID：12198344
> 
> 赞同：0
> 
> 时间：2012-08-30T13:45:47.633
> 
> 标签：c#, excel

我有一个带有一张纸的 excel 模板。前两列包含标题和数据。所以我只能开始写下一栏了。每个月的每一天，我都会将数据写入下一个可用列。那么，如何检测下一个可用列，即没有数据的列？瑞马丁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:14:12.713

使用该`CurrentRegion`属性获取最后使用的列的索引，然后添加一个。我的 excel interop C# 有点弱，所以这里用 VBA 来说明对象模型：

```
Function FirstFreeColumn(w As Worksheet) As Long
    Dim r As Range
    Set r = w.Cells(1,1).CurrentRegion
    FirstFreeColumn = r.Columns(r.Columns.Count).Column + 1
End Function 
```

这是在 C# 中，但不能保证这是完全正确的：

```
int FirstFreeColumn(Worksheet w)
{
    var range = w.Cells[1, 1].CurrentRegion;
    var lastColumnIndex = range.Columns[range.Columns.Count].Column;
    return lastColumnIndex + 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:54:37.377

保留一个单元格，在其中记录您上次写入数据的列。然后在您存储数据之前获取值添加一个，这就是可用的列。

# c# - 为什么通过 LinkedResource 发送的嵌入图像也作为附件附加

> ID：12198345
> 
> 赞同：1
> 
> 时间：2012-08-30T13:45:54.820
> 
> 标签：c#, asp.net, email

我正在使用 C# 发送电子邮件

这是我正在使用的一段代码：

```
LinkedResource Lnkr = new LinkedResource(LogoPath);
Lnkr.ContentType.Name = "Logo.jpg";

Lnkr.ContentId = "Image1";
AlternateView av1 = AlternateView.CreateAlternateViewFromString("<br/><img src='cid:Image1'/>", null, MediaTypeNames.Text.Html);
av1.LinkedResources.Add(Lnkr);
Emailmsg.AlternateViews.Add(av1); 
```

**请不要建议使用直接从某些服务器中选择的图像路径，例如“http://ww.a.jpg”**

问题是图像显示，但也作为附件添加。我没有将图像添加为附件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:58:49.657

图像必须存储在某个地方，因此它会附加到您的电子邮件中。我在您的 img src 中使用绝对路径，然后图像未附加。

您可以将图像嵌入为基于 64 位的字符串，但我认为很多电子邮件客户端都不支持此功能。

[http://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T04:53:04.580

尝试在 LinkedResource 构造函数中添加图像 mime 类型： LinkedResource Lnkr = new LinkedResource(LogoPath, "image/jpeg");

使用 Outlook 时它对我有用，但不是 Gmail Webmail

# php - 向 NOAA 发送 SOAP 请求

> ID：12198350
> 
> 赞同：0
> 
> 时间：2012-08-30T13:46:15.073
> 
> 标签：php, soap, soap-client, noaa

SOAP 有点新。试图从 NOAA 网站获取天气数据。下面显示的第一个 SOAP 请求有效，并返回纬度和经度。第二个 SOAP 请求不起作用。我显然没有正确发送数据。任何人都可以帮忙吗？谢谢

```
<?php
    $wsdl = "http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl";

    $client = new SoapClient($wsdl,array("trace"=>1,"exceptions"=>0));

    $rs = $client->LatLonListZipCode(98011);
    echo('<pre>'.print_r($rs,1).'</pre>');

    $par=array('latitude'=>39.0000,'longitude'=>-77.0000,'product'=>'time-series','startTime'=>'2004-04-27T12:00','endTime'=>'2004-04-30T12:00','Unit'=>'e','weatherParameters'=>'maxt = TRUE');

    $rs = $client->NDFDgen($par);
    echo('<pre>'.print_r($rs,1).'</pre>');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T01:21:10.417

`weatherParameters`应该是一个关联数组。

# tabs - 在多个窗口中 Xpages 相同的文档

> ID：12198351
> 
> 赞同：0
> 
> 时间：2012-08-30T13:46:15.427
> 
> 标签：tabs, xpages

在我们维护的一个 XPage 应用程序中，用户在使用它时一直在抱怨“数据丢失”。这意味着当他们提交文档时，他们有时会刷新页面并且他们刚刚编辑的所有字段都是空白的，或者处于原始页面加载时的状态，因此他们经历了数据丢失。花了很多时间来弄清楚发生了什么，他们执行的每一个操作现在都记录在文档中，以便我可以查看它。我们发现了正在发生的事情，我需要想办法解决它：

1.  在 Chrome / IE 中的窗口 1 中打开文档 - 浏览器不重要。
2.  在浏览器中打开另一个窗口并在应用程序中搜索相同的文档，打开它（默认以阅读模式打开）
3.  文档上有多个选项卡，因为有很多信息 - 用户转到他们想要从窗口 2 中的只读副本上复制信息的选项卡
4.  然后，用户开始在窗口 1 中的可编辑版本中输入信息 - 他们希望引用另一个选项卡式面板上的文档部分，从而将其打开到窗口中。
5.  用户提交他们的更改。不幸的是，因为他们已经在另一个窗口中打开了文档，然后单击了一个选项卡式面板以打开它的另一部分，所以可编辑版本实际上与服务器内存中的上下文无关（我假设） - 更改丢失了在提交时，用户需要重新输入。

如果他们打开只读版本并且不在选项卡式面板中导航，他们可以继续在可编辑版本中正常工作。似乎提交文档，即使它处于读取模式，也会破坏可编辑版本与服务器的链接。为什么会这样？如何预防？

我想阻止他们在另一个窗口中打开它（虽然不确定如何）作为绝对的最后手段 - 它已成为许多国家的许多用户的一种工作方式。有任何想法吗？？

根据要求提供更多信息：好的，所以文件是问题报告。第一个选项卡上有关调用者、受影响模型等的基本详细信息。有一个附件选项卡，除此之外，还有一个解决方案选项卡。

在识别用户在做什么时，他基本上是说，因为他不记得来电者的名字，想向来电者解决解决方案，所以他在另一个窗口中打开了文档。似乎有点懒，但无论如何。

我想前段时间有个名叫 John Mackay 的人写了一篇关于跟踪使用 sessionScope 变量选择的选项卡的帖子，我使用该变量有几个原因。因此，选项卡的 onclick 事件将 sessionScope.tabSelected var 设置为所选内容。当我对文档进行完整更新时，这会有所帮助，因为该人上次使用的选项卡是刷新后默认选择的选项卡。因此，当用户在另一个窗口中打开文档时， sessionscope var 也会导致相同的选项卡在那里打开。

如果用户在“解决方案”选项卡上并且他们在另一个窗口中打开文档，则也选择了解决方案选项卡。然后，他们必须选择“信息”选项卡才能找到呼叫者的姓名，这就是导致问题的原因。也许范围较小的 var 可以修复它？我已经尝试使用 onclick 进行“不更新或验证”和“部分执行”设置，但这并没有解决它。当我明天回到办公室时，我将在不设置范围变量的情况下尝试它，看看这是否解决了任何问题并会报告回来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:29:16.770

解决了！我有一个选项卡式面板，在定义中，我有：

```
selectedTab="#{javascript:sessionScope.TabSelected}" 
```

在每个选项卡上，我都有一个事件处理程序，可以设置`sessionScope.TabSelected`. 我尝试了部分执行模式，我尝试了不验证或更新数据但没有任何效果。

然后我完全删除了每个选项卡上的事件处理程序以及 selectedTab 属性。现在您可以在 1 个窗口中编辑打开文档，然后在另一个窗口中阅读，单击阅读版本中的选项卡，它不会影响可编辑窗口中的文档。提交可编辑的版本，它不会被服务器拒绝，这正是我想要的。

唯一的缺点是，如果您现在对文档执行完整更新并重新加载页面，它将返回到选项卡式面板中的第一个选项卡，而不是您所在的位置。我希望这将被用户接受！

# javascript - 如何在文本字段之后显示一个图标作为“帮助”以将值输入到文本字段中

> ID：12198353
> 
> 赞同：3
> 
> 时间：2012-08-30T13:46:27.333
> 
> 标签：javascript, extjs, extjs4.1

我正在使用 Extjs 4.1

我有一个带有一些文本字段的表单。

我想在此文本字段旁边显示一个帮助图标，以允许用户在显示表单时输入正确的值。

任何机构都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-18T06:20:11.030

恕我直言，最简单的方法是使用 afterLabelTextTpl 将“帮助图标”放在标签文本的末尾，如下所示：

```
afterLabelTextTpl: '<img src="images/information.gif" class="info_image" data-qtip="your help text or even html comes here...."></img>' 
```

可用于任何领域...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T18:10:53.063

尝试使用 Ext.form.TriggerField 代替文本字段。

请参阅 Extjs 文档以获取参考[http://extjs.cachefly.net/ext-3.4.0/docs/](http://extjs.cachefly.net/ext-3.4.0/docs/)

对于 ExtJs 4.1：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Trigger](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Trigger)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-11T09:35:33.733

我制作了一个插件，该插件使用了与 Combobox 等各种字段混合的`afterLabelTextTpl`配置。`Ext.form.Labelable`

以下是如何使用它。

```
{
    xtype: 'textfield',
    fieldLabel: 'Some field label',
    name: 'name',
    plugins:[{
        ptype:'afterlabelinfo',
        qtip:'The text appearing after hovering over the icon'
    }]
} 
```

这是您需要的插件。

```
Ext.define('Ext.ux.plugin.AfterLabelInfo', {
    extend: 'Ext.AbstractPlugin',
    alias: 'plugin.afterlabelinfo',

    init: function (cmp) {
        var me = this; // the plugin

        cmp.afterLabelTextTpl = [
            '<span',
            ' class="x-ux-plugin-afterlabelinfo"',
            ' data-qtip="',
            Ext.util.Format.htmlEncode(me.qtip || ''),
            '">',
            '</span>'
        ].join('');
    }
}); 
```

这是您需要的一些CSS。

```
.x-ux-plugin-afterlabelinfo {
    display: inline-block;
    margin-left: 5px;
    width: 12px;
    height: 12px;
    background-image: url(img/info-after.png) !important;
} 
```

和图标[![在此处输入图像描述](../Images/e47fb2d398357709b74c385e0c3d3f06.png)](https://i.stack.imgur.com/cqP46.png)（右键单击并另存为）

结果

[![在此处输入图像描述](../Images/0fe9f3175d74f7c9e7dd6104bf2fafb1.png)](https://i.stack.imgur.com/vZno0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T13:01:17.890

对我来说最好的方法是使用 Ext.tip.QuickTipView 可以很容易地添加到 afterrender 事件中，如下所示：

```
afterrender: function(me) {
  // Register the new tip with an element's ID
  Ext.tip.QuickTipManager.register({
     target: me.getId(), // Target button's ID
     text  : 'My Button has a QuickTip' // Tip content  
  });
} 
```

[https://docs.sencha.com/extjs/5.1/5.1.0-apidocs/#!/api/Ext.tip.QuickTip](https://docs.sencha.com/extjs/5.1/5.1.0-apidocs/#!/api/Ext.tip.QuickTip)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-31T09:22:12.643

要将图像添加到组合，

使用组合的 tpl 属性。

```
 Combo = Ext.create('Ext.form.field.ComboBox', {
    displayField : 'name',
    valueField   : 'code',
    grow         : true,
    store        : store,
    queryMode    : 'local',
    listConfig: {
        getInnerTpl: function() {
            // here you place the images in your combo
            var tpl = '<div>'+
                      '<img src="images/flags/{iso2}.png" align="left">&nbsp;&nbsp;'+
                      '{name}</div>';
            return tpl;
        }
    }
}); 
```

# html - VS 2012 Mid funktion（获取部分html代码）

> ID：12198354
> 
> 赞同：0
> 
> 时间：2012-08-30T13:46:28.303
> 
> 标签：html, visual-studio-2012

我开始用 VS 2012 制作一个小应用程序。
该应用程序应该下载 html 代码，并且应该只复制网页的一小部分。通常我使用“中间功能”，但在 VS 2012 中我找不到它。
有人知道我如何获得网页的特定部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:49:36.730

你可以利用[`string.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

喜欢：

```
string onlyAPart = downloadedwebpageasstring.Substring(20, 5); 
```

例如从字符串中的第 20 个字符开始取 5 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:50:23.430

如果您正在寻找一个函数来提取字符串的一部分，您可以查看 Substring 方法。它是 .NET 中 String 对象的标准方法

# jquery - 如何用jquery计算元素

> ID：12198360
> 
> 赞同：1
> 
> 时间：2012-08-30T13:46:36.900
> 
> 标签：jquery, oracle-apex, rowcount

我是 jquery 的新手，我想计算表中的现有元素，html 结构如下：

```
<table summary="">
    <tr>
       <td>
           <table id="myid" some more attributes> <-- i got that id and 
               <tbody>
                   <tr>foo</tr> <---counting
                   <tr>bar</tr> <---counting
               </tbody>
            </table>
         </td>
      </tr>
 </table>
HTML is apex gernerated. 
```

我已经尝试过来自[jQuery 的 jquery 语句：count of rows in a table](https://stackoverflow.com/questions/1149958/jquery-count-number-of-rows-in-a-table) an mores sats 但对我没有任何作用。我不工作的“解决方案”是

```
 $("table[id='myid'] > tbody >tr").length 
```

或者

```
 $('table#myid >tbody:last >tr').length 
```

我很感谢任何提示和提示

马里奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:48:43.143

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:49:14.977

try this.

[http://jsfiddle.net/L7Nea/1/](http://jsfiddle.net/L7Nea/1/)

JS

```
$('#myid tbody tr').length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:48:15.870

如果您的意思是在您的特定表格内

```
$('#myid tr').length // <-- this gets all tr inside table with id=myid 
```

或者，如果您真的想遍历 dom 并更具体，以防该表内还有另一个表

```
$('#myid > tbody > tr').length 
```

另外，您已经在使用`ID`选择器，因此无需拥有`table#myid`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T13:52:27.240

你所拥有的就是你应该使用的，只要有正确的 id：

```
$("table[id='myid'] > tbody > tr").length 
```

或者

```
$("table#myid > tbody > tr").length 
```

演示：http: [//jsfiddle.net/Guffa/bbV3Z/](http://jsfiddle.net/Guffa/bbV3Z/)

由于 id 在页面中应该是唯一的，因此您应该能够只使用：

```
$("#myid > tbody > tr").length 
```

`#myid > tbody > tr`使用而不仅仅是使用的原因`#myid tr`是确保您只获取该特定表中的行，而不是嵌套在其中的表中的行。如果您没有嵌套任何表格，则可以使用：

```
$("#myid tr").length 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T13:49:34.460

您可以使用`$("#table_id tr").length`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T13:49:47.477

使用`var count = $('#myid tr').length;`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T13:57:34.600

首先考虑上下文来考虑表演：

`$('#myid').find('tr')`

[这是性能比较： http](http://jsperf.com/tr-number) ://jsperf.com/tr-number

# objective-c - 从另一个控制器向 UISegmentedControl 添加图像

> ID：12198361
> 
> 赞同：0
> 
> 时间：2012-08-30T13:46:51.493
> 
> 标签：objective-c, xcode

`MainViewController`包含`UISegmentedControl`3 个段。

`SliderSubViewController`包含一个`UISlider`和`-(void) sliderValueChanged:(UISlider*)sender`

我想在其中添加这样的代码，`SliderSubViewController.m`但我不知道如何访问`UISegmentedControl`和添加图像：

```
- (void)viewDidLoad
{
[super viewDidLoad];

mainController = [[MainViewController alloc] initWithNibName:nil bundle:nil];

[minPrisSlider addTarget:self
                  action:@selector(sliderValueChanged:) 
                  forControlEvents:UIControlEventValueChanged];

- (void)sliderValueChanged:(UISlider*)sender
{

NSUInteger index = (NSUInteger)(minPrisSlider.value + 0.5); // Round the number.
[minPrisSlider setValue:index animated:NO];

int progressAsInt =(int)(minPrisSlider.value + 0.5f);
NSString *newText =[[NSString alloc] initWithFormat:@"%d,-",progressAsInt];
minPrisText.text = newText;

if (minPrisSlider.value != 70) {
    /*mainController.segmentedControl add main bundle image named "CheckboxChecked.png" 
   to current segment*/
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:25:59.533

如果您已将 SliderViewController 添加为 MainViewController 上的子视图，您可以尝试的一种方法是在 SliderViewController 中声明 MainViewController 的对象，写入 @property 和 @synthesize，不要分配它，并且在将 SliderView 添加为子视图时将其分配为

sliderviewcontrollerObject.mainViewControllerObject = self;

现在您可以从sliderview ass self.mainViewControllerObject.segmentedbar 访问segmentedControl

您也可以尝试[委托](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)方法。

# c# - 连接到同一网络上的 WCF 服务

> ID：12198362
> 
> 赞同：0
> 
> 时间：2012-08-30T13:47:04.560
> 
> 标签：c#, .net, wcf, iis, iis-7

我在 Windows 7 上的 IIS7.5 上部署了 WCF 服务。它使用 basicHttpBinding，因为该服务将通过 Windows Mobile 6.5 应用程序使用。

如果我尝试从同一台机器（192.168.0.201）连接，一切都会正常运行。但是，如果我尝试从同一网络上的另一台机器连接，（这是奇怪的部分）它设法找到服务，但是任何连续的调用都会失败。

如果我从 Web 浏览器浏览到服务的 wsdl 页面，它会以“找不到该页面”作为响应，尽管找到了“您已创建服务”页面！

请注意，从本地计算机浏览到 wsdl 页面也可以正常工作。

任何人都可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:43:12.683

它不仅仅是端点。你有行为吗？这一切都在文档中。

[如何：使用配置文件发布服务的元数据](http://msdn.microsoft.com/en-us/library/ms734765.aspx)

# sencha-touch-2 - 无法从 sencha touch 2 中的 json 文件加载数据

> ID：12198367
> 
> 赞同：0
> 
> 时间：2012-08-30T13:47:15.487
> 
> 标签：sencha-touch-2, store

我试图让 sencha touch 2 数据管理示例工作但没有用。这是一个不工作的简单模型和商店的代码（getCount 返回 0）。

```
Ext.define('MyClient.model.Product', {
    extend:'Ext.data.Model',
    config:{
        fields:['name', 'image'],
        proxy:{
            type:'ajax',
            url:'http://localhost/st2/Projets/my-client-sencha/data/products.json',
            reader:{
                type:'json',
                rootProperty:'products',
                successProperty:'success'
            }
        }
    }
});

Ext.define('MyClient.store.ProductsStore', {
    extend:'Ext.data.Store',
    config:{
        model:'MyClient.model.Product',
        autoLoad:true,
        autoSync:true
    }
}); 
```

在启动功能中，我有以下几行：

```
 var prod = Ext.create('MyClient.store.ProductsStore');
        prod.load();
        alert(prod.getCount()); 
```

最后是我的 products.json：

```
[

    {
        "name":"test"
    }
] 
```

我在控制台中没有收到任何错误，但 getCount 始终返回 0。请在此处使用一些帮助。

编辑：错误的 JSON，也不能使用：

```
{
    "success":true,
    "products": [

        {
            "name":"test"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:14:38.897

由于您设置 rootProperty:'products'，您的 json 必须像

```
{
    products: [

        {
            "name":"test"
        }
    ]
} 
```

如果您不想从配置更改服务器响应移除器 rootProperty。

看看[Json Reader 文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Json)

啊......你忘记了 load() 的异步性质......

```
var prod = Ext.create('MyClient.store.ProductsStore');
prod.load(function ( ){
    alert(prod.getCount());
}); 
```

请注意，它 prod.load() 仅用于测试目的，因为您已设置属性 autoLoad: true。

在您的代码段中，加载程序会进行 2 次类似的调用。

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T20:21:12.997

```
Ext.define('MyBizilinkms.model.Customer', {
extend: 'Ext.data.Model',

config: {
    identifier:'uuid',
    fields: [
    'CustId',
    'EMail',
    'Title',
    'FName', 
    'MdInitial', 
    'LName', 
    'PhnNum', 
    'SecondPhnNo', 
    'DOB', 
    'Address', 
    'SecondAddress', 
    'City',
    'State', 
    'Zip', 
    'Country', 
    'RecieveEmail',
    'IsSaveonServer',
    { 
        name: 'Full_Name',
        type:'string',
        convert:function(v, rec) {
            return rec.data.FName + " " + rec.data.LName;
        }
    }],
    validations: [
    {
        type: 'format',   
        name: 'EMail', 
        matcher: /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/, 
        message:"Valid Email Required"
    },
    {
        name: 'PhnNum',             
        type : 'custom',
        message : "Valid Phone required",
        validator : function(config, value, model) {
            var reg = /^[0-9]{3}-[0-9]{3}-[0-9]{4}$/;
            return reg.test(value);
        }            
    },
    {
        name: 'SecondPhnNum',             
        type : 'custom',
        message : "Valid 2nd Phone required",
        validator : function(config, value, model) {
            if (!Ext.isEmpty(value)) {
                var reg = /^[0-9]{3}-[0-9]{3}-[0-9]{4}$/;
                return reg.test(value)
            }
            return true;
        }            
    },
    {
        type: 'presence', 
        name: 'FName', 
        message : "First Name is required"
    },
    {
        type: 'presence', 
        name: 'LName', 
        message : "Last Name is required"
    }, 
    {
        type: 'presence', 
        name: 'Address', 
        message : "Address is required"
    },
    {
        type: 'presence', 
        name: 'City', 
        message : "City is required"
    },
    {
        name: 'State',             
        type : 'custom',
        message : "Valid State required",
        validator : function(config, value, model) {
            var reg = /^(AK|AL|AR|AZ|CA|CO|CT|DC|DE|FL|GA|HI|IA|ID|IL|IN|KS|KY|LA|MA|MD|ME|MI|MN|MO|MS|MT|NB|NC|ND|NH|NJ|NM|NV|NY|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VA|VT|WA|WI|WV|WY)$/i;
            if(Ext.isEmpty(value))
                value = '00'
            var state = value.replace(/^\s+|\s+$/g, "");

            return reg.test(state)
        }            
    },
    {
        name: 'Zip',             
        type : 'custom',
        message : "Valid Zip required",
        validator : function(config, value, model) {
            var reg = /(^\d{5}$)|(^\d{5}-\d{4}$)/;
            return reg.test(value)
        }            
    },
    {
        type: 'presence', 
        name: 'Country', 
        message : "Country is required"
    }
    ]       
},
getFullName: function() {
    return this.get('FName') + '' + this.get( 'LName');
}
}); 
```

# arrays - 无法将值存储到数组 MATLAB

> ID：12198378
> 
> 赞同：2
> 
> 时间：2012-08-30T13:47:59.983
> 
> 标签：arrays, matlab

我在 Matlab 中有一个 1x280 的结构。为了让我使用这些值，我将其更改为`struct2cell`数组。

下面是 280 个结构中的一个外观示例：

```
Field       Value               Min       Max

point1      [29,469]            29        469
point2      [42,469]            42        469
------------------------------------------- 
```

使用以下代码更改为元胞数组后：

```
showlines = struct(lines);
cellData = struct2cell(showlines);

cellData{1,1}(1) 
    = 29 
```

但是，如果我使用这个：

```
cellData{1,1:280}(1); 
```

有错误

```
Error:: bad cell reference operation 
```

我需要将 280 个结构中的每个结构中的所有`x`值保存`point1`到一个数组中，以便找出其中的`X`最大值`point1`。知道怎么做吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:56:32.033

虽然不是您问题的直接答案，但您可能有兴趣知道

```
%# some example data
S(1).point1 = [29 469];
S(1).point2 = [42 469];

S(2).point1 = [30 470];
S(2).point2 = [43 470];

...

S(280).point1 = [130 870];
S(280).point2 = [243 970];

%# transform to regular array
pt1 = reshape([S.point1],[],2).';
pt2 = reshape([S.point2],[],2).'; 
```

将导致

```
pt1 = [29   469       pt2 = [42   469
       30   470              43   470
       ...                   ... 
       130  870];            243  970]; 
```

这使您可以执行以下操作

```
>> pt1(:, 2)
ans = 
    469
    470
    ..
    870

>> min(pt1(:,1))
ans = 
    29 
```

这能解决你的问题吗？

对于任何路人：`[S.field]`非标量的符号是什么`structs`？它甚至有名字吗？涉及此技术的问题经常弹出，如果我知道它的名称会有所帮助，以便我可以在答案中发布指向手册页的链接......

# bash - 在 Bash 函数中使用所有参数的子范围

> ID：12198381
> 
> 赞同：3
> 
> 时间：2012-08-30T13:48:12.563
> 
> 标签：bash, bash-function

我在 Bash 脚本中有这个函数：

```
comp() {
    rsync -v --archive $1/ $TMP/$2 $3 $4 $5 $6 $7 $8 $9
} 
```

如您所见，我正在使用参数`$1`和`$2`. 然后我只是将所有其余部分附加到命令的末尾。它们转到`$9`，但实际上应该附加所有内容。

必须有一个更简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:17:16.633

您可以使用子字符串扩展，这在某些情况下可能很有用。不过，为此，我必须说我更喜欢 Brian 的移位解决方案，因为它更清晰一些。（另外，Brian 的解决方案是 POSIX；子字符串扩展是 bash 扩展。）

```
comp () {

    rsync -v --archive "$1"/ "$TMP/$2" "${@:3}"

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T13:58:01.903

我不一定会称之为“更容易”，但你可以这样做：

```
comp() {
    archive=$1
    tempfile=$2
    shift 2
    rsync -v --archive $archive/ $TMP/$tempfile "$@"
} 
```

这使您不必对 3 美元到 11 美元进行硬编码。

# angularjs - Angular 中的控制器代码组织

> ID：12198385
> 
> 赞同：28
> 
> 时间：2012-08-30T13:48:16.990
> 
> 标签：angularjs

所以，我正在进行我的第一个 Angular 重大项目。我有一个控制器正在做*大量*的跑腿工作，它已经达到了数千行 JavaScript 的地步。

我想以某种方式打破这个，但我似乎无法在任何地方找到一个可靠的例子。代码主要由用于对对象进行计算的函数组成，因此指令和模块似乎不是正确的答案，但我可能错了。

你们是如何在大型 Angular 项目中组织代码的？我应该把它吸起来，还是有一种理智的方法可以把它分成易于扫描的文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T15:28:27.777

我建议至少将其中一些对象及其相关计算放入服务中，然后将服务注入您的控制器中。有关封装某些数据并提供访问/操作该数据的方法的服务示例，请参阅[Sticky Notes 第 1 部分博客条目。](http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/)

看看你是否可以把你的控制器分成多个控制器，每个视图一个。视图可以和页面一样大，或者只是页面上的一些块/块。

引用我最近看到的谷歌小组帖子：“我更喜欢将角度控制器视为我的观点的愚蠢 api/configs，并将所有繁重的工作留给服务。” --[参考](https://groups.google.com/d/msg/angular/eegk_lB6kVs/rCvY4K3ih0AJ)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-30T15:32:43.197

当您在控制器中时，您需要问自己一些事情。

1.  您是否在控制器中进行任何 DOM 操作？这是一个明确的 NO。永远不要那样做。它始终属于指令部门。

2.  您是否在控制器中编写任何业务逻辑？这也是一个NO。在大多数情况下，您的业务逻辑应该存在于服务中。那是合适的地方。

现在，看看你的控制器。它是否没有这两件事并且仍然大于 1000 行？这是极不可能的，但即使它以某种方式发生，也要考虑将你的控制器分解成更小的控制器。这种对控制器的破坏必须基于视图来完成。

总而言之，您的控制器只是将业务逻辑和视图粘合到 HTML 中的地方。从技术上讲，它不应该包含这些胶水以外的任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T19:36:58.843

我通常创建一个 Util 工厂（似乎是现在在 Angular 而不是服务中的方式）并让它返回任何共享逻辑作为一组方法。

[https://gist.github.com/lamba/c275f5f010090632209e](https://gist.github.com/lamba/c275f5f010090632209e)

# javascript - Boostrap 向现有轮播添加分页点

> ID：12198388
> 
> 赞同：0
> 
> 时间：2012-08-30T13:48:27.700
> 
> 标签：javascript, jquery, twitter-bootstrap

如何将分页像点一样添加到现有的轮播中以进行引导。

对此非常陌生，需要一点帮助。

这是我的代码：

[http://jsfiddle.net/mdesignone/qXgCg/](http://jsfiddle.net/mdesignone/qXgCg/)

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:19:10.817

首先为您的轮播切片创建链接。在属性*data-slide*上设置您的 id ，然后根据需要添加点。

请参阅此示例，以直接链接幻灯片 1 和 2：

```
<a class="carousel-control my-carousel" href="#myCarousel" data-slide="1">·</a>
<a class="carousel-control my-carousel" href="#myCarousel" data-slide="2">·</a> 
```

要自行设置此链接的样式，只需定义 css-class 'my-carousel'。

# objective-c - MKMapView 和注释隐藏与缩放

> ID：12198390
> 
> 赞同：4
> 
> 时间：2012-08-30T13:48:28.823
> 
> 标签：objective-c, mkmapview, mkannotation

我正在使用 MKMapView... 我正在向地图添加大量注释，这会导致地图移动缓慢。我想用缩放级别显示/隐藏注释。在每次缩放中，我想隐藏重叠的注释。有什么解决办法吗？

到目前为止，如果有重叠，我想出了在重叠和删除注释的comapring注释边界矩形。这个解决方案很慢，因为我需要将所有内容与所有内容进行比较（我知道，我可以使用树等...），其次，将注释删除和添加回地图有点慢。

什么是好的，是可以访问注释渲染，如果注释被渲染，检查它是否可以......可以完成吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:51:55.060

您可以使用以下代码

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {

    NSArray *annotations = [mapView annotations];
    //NSLog(@"%@",annotations);
    CustomAnnotation *annotation = nil;
    for (int i=0; i<[annotations count]; i++) {
        annotation = (CustomAnnotation*)[annotations objectAtIndex:i];
        if (![annotation isKindOfClass:[MKUserLocation class]]) {

            if (mapView.region.span.latitudeDelta <= 0.13f) {
                [[mapView viewForAnnotation:annotation] setHidden:NO];
            } else {
                [[mapView viewForAnnotation:annotation] setHidden:YES];
            }

        }
    }

} 
```

您可以在 if 条件下调整 delta 以获得更舒适

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-04T13:07:31.777

自 iOS 11 起，您可以使用本机 SDK 实现此目的，请查看[文档](https://developer.apple.com/documentation/mapkit/mkannotationview/decluttering_a_map_with_mapkit_annotation_clustering)（所谓的“MapKit Annotation Clustering”）

# c# - Stripe webhook 失败，参数“id”为空条目

> ID：12198397
> 
> 赞同：0
> 
> 时间：2012-08-30T13:48:54.293
> 
> 标签：c#, asp.net-mvc, stripe-payments, webhooks

我正在尝试与[stripe.com](http://stripe.com)集成，而 webhook 给了我一个问题。

我创建了一个控制器和一个动作来接受和解析来自条纹的 webhook：

```
public class WebhooksController : AbstractController
{
    public JsonResult Stripe(int id)
    {
        // some parsing code
    }
} 
```

这是通过路由

```
routes.MapRoute("webhooks", "Financial/Webhooks/{action}/{id}", new { "Webhooks", "Index", id = "" }, new string[] { "MyApp.Controllers.Financial" }); 
```

我可以从浏览器或使用

```
curl -i -H "Host: mydomain.com" -H "Content-Type: application/json" -X POST http://{resolvedIP}/Financial/Webhooks/Stripe/4 
```

但是，当我尝试使用“测试 webhook”功能从条纹仪表板触发 webhook 时，我得到 500：

> 参数字典包含“Drg.M3.Client.Controllers.Financial.WebhooksController”中方法“System.Web.Mvc.JsonResult Stripe(Int32)”的不可空类型“System.Int32”的参数“id”的空条目'。可选参数必须是引用类型、可空类型或声明为可选参数。

据 Stripe 聊天室的一名工作人员称，发送 webhook 时会带有如下内容：

```
curl -i -H "Host: mydomain.com" -H "Content-Type: application/json" -X POST http://{resolvedIP}/Financial/Webhooks/Stripe/4 -d '{big ol' json object}' 
```

当一个没有数据的请求通过时，为什么一个有数据的请求会在路由时失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:49:58.327

解决了。

事实证明，当 MVC 看到内容类型时，`application/json`它会尝试将数据自动绑定到您的操作参数。

由于 json 对象 Stripe 发送包括

```
{
  "id" : "evt_0000000000",
  ...
} 
```

该`id`参数被设置为`evt_0000000000`而不是`4`。

# html - 多个输入的 CSS 样式

> ID：12198406
> 
> 赞同：2
> 
> 时间：2012-08-30T13:49:18.657
> 
> 标签：html, css, input

我正在使用以下输入字段

```
<input class="upload_button" type="file" multiple="" name="userfile"> 
```

要将多个文件上传到系统，我无法弄清楚如何使用 CSS 正确设置样式，因为按钮和输入框似乎绑定在一起？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:51:43.573

您不能`<input type="file"/>`直接使用 CSS 来设置元素样式；这是网络浏览器用来防止用户被欺骗上传文件的预防措施。

但是有一些技术可以解决它，使用效果很好的透明度。 [http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:52:25.570

我对此没有太多经验，但我找到了一个可能对您有所帮助的链接： [http ://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:53:26.560

例如，您应该使 type="file" 倍数，`z-index:-1;`并使图像出现
（用`z-index:1;`）在您的输入文件字段所在的同一位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:56:31.953

正如斯科特所说，您不能直接设置某些输入元素的样式，因为它们取决于您的环境（浏览器和操作系统）。我在使用变通办法时运气不佳，我更喜欢优雅地替换它们的解决方案。我特别喜欢的一个是uniform.js。

[http://uniformjs.com/](http://uniformjs.com/)

# javascript - 单页应用程序安全问题

> ID：12198411
> 
> 赞同：0
> 
> 时间：2012-08-30T13:49:22.653
> 
> 标签：javascript, backbone.js, singlepage

我正在使用 Backbone.js 开发一个单页应用程序，我在问自己一些问题。

当我开发一个依赖于服务器上呈现页面的应用程序时，我确实知道如何根据用户是否是管理员来显示某些部分（只是一个示例）。

但是现在，我使用 Backbone.js 和下划线模板来创建视图......所以......我可以创建一个 cookie，上面写着......好的......是管理员，但无论如何，一个足够聪明的人可以只更改 cookie 值。我能够解决它，只需在服务器端创建一个允许用户这样做的检查。

我正在考虑的其他机会是向服务器询问这些具体的代码，然后将它们粘贴到正确的站点

你怎么看？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:03:56.330

您的情况对我来说并不完全清楚，但总的来说：如果服务器泄露“秘密”信息或允许受限操作**而没有验证自己**是否允许用户查看/做某事，这就是一个安全漏洞。身份验证必须以既定方式进行：用户登录**服务器**并接收安全（足够）令牌，例如会话 cookie。然后，服务器只将允许用户查看的信息发送给客户端，并且只允许用户被允许执行的操作。

根据定义，任何客户端总是不安全的。不存在安全的仅客户端身份验证系统。服务器不能相信客户的话。如果服务器无法验证该操作，则不得在客户端上执行任何关键操作。

# ios - 按下主页按钮后未调用 viewWillAppear 然后再次启动

> ID：12198414
> 
> 赞同：7
> 
> 时间：2012-08-30T13:49:25.167
> 
> 标签：ios

我制作了一个测试应用程序并在设备上运行它。在第一次发布时，一切正常。然后我按主页按钮退出，然后按应用程序图标。这次似乎没有调用 viewWillAppear 。在我的理解中，每次视图显示在屏幕上时都会调用 viewWillAppear，无论它是由关闭视图控制器触发还是通过按下主页按钮然后重新启动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-24T22:08:24.440

将此添加到您的 viewDidLoad() 方法中

```
 [[NSNotificationCenter defaultCenter]addObserver:self
                                        selector:@selector(onResume)
                                            name:UIApplicationDidBecomeActiveNotification
                                          object:nil]; 
```

并在 onResume 方法中执行应用程序再次激活时需要运行的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T13:57:09.073

根据文档：

> 在接收者的视图即将添加到视图层次结构之前以及配置任何动画以显示视图之前调用此方法。您可以覆盖此方法以执行与显示视图相关的自定义任务。例如，您可以使用此方法更改状态栏的方向或样式，以与正在呈现的视图的方向或样式相协调。如果你重写了这个方法，你必须在你的实现中调用 super 。

要获得通知，当您的应用程序恢复时，您应该使用：
`- (void)applicationDidBecomeActive:(UIApplication *)application` 此方法在您的 AppDelegate.m 中实现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T23:52:19.320

这是 Swift 的语法：

```
NotificationCenter.default.addObserver(self,
                                       selector: #selector(YourViewController.onResume),
                                       name: Notification.Name.UIApplicationDidBecomeActive, 
                                       object: nil) 
```

专业提示：与任何观察者一样，您需要确保订阅（如上所示），并在不再需要通知时取消订阅，如下所示：

```
NotificationCenter.default.removeObserver(self) 
```

在我的情况下，订阅`viewWillAppear`和取消订阅是有意义的，`viewWillDisappear`但这完全取决于您的应用程序的需求。

# android - 将 Drawable 调整为全屏

> ID：12198422
> 
> 赞同：0
> 
> 时间：2012-08-30T13:49:47.530
> 
> 标签：android, background, drawable, android-linearlayout

我正在从 Internet 下载位图，然后将此位图转换为 Drawable 以将其设置为我的 LinearLayout 中的背景。

我看到不幸的是图像被缩放以填充视图，我如何缩放图像直到最小尺寸到达边界（所以它没有被拉伸）？（并且可能居中）

我已经尝试过这样的事情，但没有任何成功。我在路上吗？

```
 LinearLayout layout = (LinearLayout) context.findViewById(R.id.main);
        Drawable picture = new BitmapDrawable(context.getResources(), bitmap);
        Display display = context.getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        picture.setBounds(0, 0, size.x, size.y);
        layout.setBackgroundDrawable(picture); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:06:10.310

我认为，不建议在应用程序上使用缩放图像。最好的做法是使用重复的模式。所以，我会尝试这样的事情：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:src="@drawable/background-image-repeatable-pattern.png" 
android:tileMode="repeat" /> 
```

将此保存到 drawable/background.xml 文件（例如）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:56:05.887

我想你需要这样的东西吗？

```
 setScaleType(ScaleType.CENTER_CROP); 
```

请参阅[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# java - 使用 HttpPut Request 发送的查询参数未正确读取

> ID：12198425
> 
> 赞同：0
> 
> 时间：2012-08-30T13:49:54.340
> 
> 标签：java, uri, httpclient, http-put

我正在尝试向服务器发出 HttpPut 请求并使用它发送一些参数，但是我认为由于服务器发送错误消息而未检测到参数。我的代码是：

```
 URI url = new URI("http://myurl.com/something/something");
    HttpClient client = new DefaultHttpClient();
    HttpPut hput = new HttpPut(utl);
    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("id",URLEncoder.encode(ppid,"UTF-8")));
    pairs.add(new BasicNameValuePair("name",URLEncoder.encode(netid,"UTF-8"))); 
    hput.setEntity(new UrlEncodedFormEntity(pairs));
    HttpResponse res = client.execute(hput);
    System.out.println(res.getStatusLine); 
```

它说，服务器不支持 PUT 方法，但服务器确实支持它。尝试进行大量研究但没有成功，因为大多数帖子仅用于 POST 和 GET。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:51:16.460

大多数服务器的 PUT 和 DELETE 方法默认是禁用的。仅启用 GET/POST。

# linux - 需要检查我机器上最常用的 linux 应用程序

> ID：12198427
> 
> 赞同：0
> 
> 时间：2012-08-30T13:49:56.863
> 
> 标签：linux, unix, ubuntu, fedora

我需要获取我最常使用的所有应用程序的列表。
我不想要`ps aux`等等`top`。
需要制作一个 shell 脚本来显示所有时间常用的应用程序，如 google chrome、firefox、gedit 等。在这个列表中需要显示我打开的应用程序，但不是那些默认打开的应用程序按操作系统
如果可能的话，我想列出应用程序的运行时间、空闲时间。我有 Fedora 和 Ubuntu。所以操作系统没有问题。
请建议我一些命令，以实现我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:44:34.827

只需在您的系统中启用进程记帐。网上有很多关于这方面的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:15:08.707

使用[lastcomm](http://manpages.ubuntu.com/manpages/natty/man1/lastcomm.1.html)打印出有关先前执行的命令的信息。如果没有指定参数，lastcomm 将打印关于 acct（记录文件）中所有命令的信息。

# windows-8 - 实体框架5安装在win8 MSVC2012 RTM上

> ID：12198430
> 
> 赞同：2
> 
> 时间：2012-08-30T13:49:58.257
> 
> 标签：windows-8, entity-framework-5

我最近安装了最新的 Win8 OS (RTM) 并安装了 MSVC 2012 RTM（我还安装了 MSVC 2010，因为我正在从 Win7 手机移植到 Win 8 平板电脑并且需要参考旧代码（不确定这是否可能影响结果））。我需要在 MSVC 2012 中安装实体框架，当我查看 NuGet 包管理器时，它告诉我版本 5.0.0。可用。但是它永远不会正确安装，它说它已经安装成功，然后说它不能并卸载它。我尝试使用 NuGet 包管理器和 PM 控制台，PM 控制台的结果如下：

```
PM> Install-Package EntityFramework
You are downloading EntityFramework from Microsoft, the license agreement to which is available at http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409\. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'EntityFramework 5.0.0'.
Successfully uninstalled 'EntityFramework 5.0.0'.
Install failed. Rolling back...
Install-Package : Could not install package 'EntityFramework 5.0.0'. You are trying to install this package into a project that targets '.NETCore,Version=v4.5', but 
the package does not contain any assembly references that are compatible with that framework. For more information, contact the package author.
At line:1 char:1
+ Install-Package EntityFramework
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

当我在安装过程中查看包文件夹时，它似乎都存在，然后被删除。我在我的用户帐户上设置了管理员权限。

出了什么问题？请帮忙。

布伦达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:25:12.003

您正在将 EntityFramework 包添加到 Windows 8 应用程序或类库项目（= Metro 应用程序）。这是不支持的。您必须使用完整的 .NET Framework 4.5（= 桌面应用程序、Web 应用程序等）才能使用 Entity Framework。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:48:14.673

我有这个问题。这就是我所做的：

从包管理器控制台：

```
PM> Uninstall-Package EntityFramework -Force 
```

这引发了一个错误。然后我转到解决方案文件夹下的“包”文件夹并删除了实体框架子文件夹。然后我跑了

```
PM> Install-Package EntityFramework 
```

然后右键单击我想要安装 EF 的项目并从 NuGet 对话框安装它。

# java - 在 Java 中处理条形码扫描

> ID：12198432
> 
> 赞同：1
> 
> 时间：2012-08-30T13:50:10.643
> 
> 标签：java, swing, barcode-scanner

我想让我的应用程序对正在扫描的条形码做出反应以触发按钮按下。例如，用户可以扫描 ((PRINT)) 条码来激活打印按钮。

条形码将被视为用户输入了一些文本。我不确定扫描仪是否会设置为在最后附加一个输入或一个选项卡或什么都没有，所以我不想在此基础上做出假设。

该应用程序是 Java/Swing 应用程序。

我看过键绑定/动作映射等，但它们似乎集中在键和弦/单键条目上。我需要它在输入整个字符串之前不触发绑定。

棘手的一点是，这应该在用户专注于屏幕的任何地方都有效。他们通常不会输入 ( 字符，因此某种触发器可能会起作用。我不确定如何处理字符串的其余部分。

编辑：抱歉，如果问题不清楚，但条形码扫描仪对应用程序来说并没有什么“特殊”，它就像另一个键盘。因此，用户不会输入（打印），但实际上这就是条形码扫描仪所做的事情，如果这有意义的话。

所以只有两种方法可以触发打印：按下按钮，或者“键入”字符串（打印）。棘手的部分是用户可以将注意力集中在应用程序的任何位置。我只担心应用程序是否具有整体焦点，而不是用户关注的领域。有问题的特定屏幕上有复选按钮和左/右选择器，因此用户不一定要在字段中输入内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T01:47:06.917

我遇到了和你一样的问题，并创建了一个项目（目前存在一些问题的概念证明），以使摇摆中的条形码处理更容易。

它基于条形码阅读器模拟键盘但与人类不同的事实，它们以恒定的时间“键入”。它基本上允许您收听“条形码读取”事件。

项目位置：[https ://github.com/hablutzel1/swingbarcodelistener](https://github.com/hablutzel1/swingbarcodelistener)

演示用法：

```
public class SimpleTest extends JFrame {
    public SimpleTest() throws HeadlessException {

        // start of listening for barcode events
        Toolkit.getDefaultToolkit().addAWTEventListener(new BarcodeAwareAWTEventListener(new BarcodeCapturedListener() {
            @Override
            public void barcodeCaptured(String barcode) {
                JOptionPane.showMessageDialog(SimpleTest.this, "barcode captured: " + barcode);
            }
        }), AWTEvent.KEY_EVENT_MASK);
        // end of listening for barcode events

        getContentPane().setLayout(new FlowLayout());
        getContentPane().add(new JLabel("Capture barcode demo"));
        getContentPane().add(new JTextField(25));
    }

    public static void main(String[] args) {
        SimpleTest simpleTest = new SimpleTest();
        simpleTest.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        simpleTest.setVisible(true);
        simpleTest.pack();
    }
} 
```

它现在有一些问题，但作为一个起点，我认为没关系，如果你有时间改进它会很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:18:05.517

我不完全理解这个问题，这有点太长了，无法发表评论。据我了解，您有一个 Swing 应用程序和一个条形码扫描仪，它有 3 种不同的方式来触发相同的操作

*   用户在 UI 中输入一些文本（“打印”），这会触发打印操作
*   UI 有一个打印按钮，用户可以按下该按钮并触发打印操作
*   用户可以扫描“打印”条码并触发打印操作

我不明白的部分是为什么应该触发打印操作的条形码扫描与用户可以输入文本的 UI 部分有任何关系。

我假设条形码的扫描发生在另一个线程上，然后是事件调度线程。扫描条形码并对其进行解析后，您需要触发“打印”操作。您可以直接执行此操作，而无需通过 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:06:31.703

如果我理解错了，请纠正我，但听起来你有一个条形码扫描仪，可以将文本输入到一个字段中。但是您希望在字段中的文本等于某个值时收到警报（因此可以执行操作），而不管它是如何输入的（通过条形码扫描仪或按键）。

我建议使用 a`DocumentListener`来提醒您文本字段的更改 - 这应该符合您的两个要求。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class TempProject extends Box{

    public TempProject(){
        super(BoxLayout.Y_AXIS);
        final JTextArea ta = new JTextArea();
        ta.getDocument().addDocumentListener(new DocumentListener(){

            @Override
            public void changedUpdate(DocumentEvent arg0) {
                doSomething();
            }

            @Override
            public void insertUpdate(DocumentEvent arg0) {
                doSomething();
            }

            @Override
            public void removeUpdate(DocumentEvent arg0) {
                doSomething();
            }

            public void doSomething(){
                if(ta.getText().equalsIgnoreCase("print")){
                        System.out.println("Printing...");
                        //Need to clear text in a separate swing thread
                        SwingUtilities.invokeLater(new Runnable(){
                            @Override
                            public void run() {
                                ta.setText("");
                            }});
                }
            }

        });

        add(ta);
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(new TempProject());
                frame.setPreferredSize(new Dimension(500, 400));
                frame.pack();
                frame.setVisible(true);
            }
        });
    }   

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-02T11:31:12.587

这是我的方法。它正在工作。只需获取毫秒以确保不会读取两次。只需添加一个 Key Listener（在同一个 JFrame 中实现）。

```
 @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
    }

    @Override
    public void keyReleased(KeyEvent e) {
        logger().info("keytyped" + e.getKeyChar() + " code "+e.getKeyCode());
        if (e.getKeyCode() == KeyEvent.VK_ENTER) {
            logger().info("all keys " + keyspressed);
            return;
        }
        // will not last more than a second...
        if (keyspressed == null || System.currentTimeMillis() - currentTimeMillis > 1000) {
            keyspressed = e.getKeyChar()+"";
            currentTimeMillis = System.currentTimeMillis();
        } else {
            keyspressed = keyspressed + e.getKeyChar();
            currentTimeMillis = System.currentTimeMillis();
        }
    }

    private String keyspressed = null;
    private long currentTimeMillis = System.currentTimeMillis(); 
```

# ios - Mapkit 注释：删除旧的，添加新的并保留现有的

> ID：12198433
> 
> 赞同：0
> 
> 时间：2012-08-30T13:50:10.517
> 
> 标签：ios, annotations, mkmapview, mapkit, mkannotation

我在地图视图上动态加载注释。当用户重新加载注释时，我想删除旧的（那些不再由 WS 返回的），添加新的（没关系），并保留现有的（如果我删除所有内容，有一个“闪烁”效果）。

这样做的正确和好的方法是什么？我打算这样做： 1\. 浏览现有注释，删除不在 WS 结果中的注释 2\. 浏览新注释，查看它们是否已经在地图上（并更新它们），如果没有，添加他们在地图上。

对我来说看起来有很多数组浏览（我们至少谈论 100 个注释），我在想也许有一种更清洁、更快捷的方法？！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:43:44.623

100也不算多。不过，您只需要一个循环即可删除它们，如果您已经删除了所有不在新集合中的循环，则无需检查新循环是否存在。

# python - 如何在特定时间执行程序

> ID：12198439
> 
> 赞同：4
> 
> 时间：2012-08-30T13:50:17.297
> 
> 标签：python, group-by

我有一个程序需要在一定的时间间隔内执行。例如，我可能希望它每五分钟执行一次。我有几个与多个终端节点设备通信的协调器。下面的代码在协调器上。我需要它，以便如果`interval`设置为 5，那么它会运行并记录信息，例如： 9: **05、9:10、9:15、9** :20、9:25等。我到目前为止的代码是如下：

```
if __name__ == '__main__':
    while True:
        try:
            r = json.read(rqst_command())
            interval = r.get('intvl')
            collect_time = r.get('c_time')
            command = r.get('cmd')
            send_stats(cmd_nodes(command, collect_time))
            time.sleep(interval)
        except Exception, e:
            print e
            print "**Top Level Exception"
            pass 
```

问题是，如果我将间隔设置为**5 分钟**，它不会每 5 分钟准确记录一次。执行时间似乎在慢慢增加。例如，上面的代码可能会记录为**9:05:09, 9:10:19, 9:15:29, 9:20:41, 9:25:50**。程序运行所需的时间取决于节点通信的速度。

有人对我如何更改代码以使程序每 5 分钟执行一次有任何想法吗？

**编辑/更新**

我想我已经找到了解决问题的方法。我抓住电流`datetime`，然后检查它是否在 5 分钟标记上。如果是，则记录`datetime`并将其发送到`send_stats`函数。这样一来，`datetime`它将永远是我想要的。如果它不在 5 分钟标记上`sleep`，请稍等片刻，然后再次检查。我的代码大部分都完成了。但是，当我运行程序时出现以下错误：**`'builtin_function_or_method' object has no attribute 'year'`**.

**我做错了什么？**

这是我的新代码：

```
import os
import json
import datetime
from datetime import datetime
import urllib2
from urllib import urlencode
from socket import *
import time
import zigbee
import select

if __name__ == '__main__':
        while True:
            try:
                r = json.read(rqst_command())
                interval = r.get('intvl')
                collect_time = r.get('c_time')
                command = r.get('cmd')

                tempTest = True

                while tempTest == True:
                    start_time = datetime.now
                    compare_time = datetime(start_time.year, start_time.month, start_time.day, start_time.hour, 0, 0)
                    difff = int((start_time - compare_time).total_seconds() / 60)

                    if((difff % interval) == 0):
                        c_t = datetime(start_time.year, start_time.month, start_time.day, start_time.hour, start_time.minute, 0)
                        send_stats(cmd_nodes(command, collect_time), c_t)
                        tempTest = False
                    else:
                        time.sleep(30)              
            except Exception, e:
                print e
                print "**Top Level Exception"
                pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:50:17.660

下面的代码最终解决了我的问题。现在无论间隔是多少，它总是使用`datetime`每小时开始时的开始并按间隔递增。因此，如果间隔为 5，则`datetime`显示为例如： 9:00: **00、9:05:00、9:10:00、9:15:00、9 :20:00、9:25:00 ，等等**。如果间隔为 3，则`datetime`显示为例如： 5:00:00、5:03:00、5:06:00、5:09: **00、5:12:00、5:15:00 和等等**。协调器从端节点获取数据，然后将数据与`datetime`.

```
if __name__ == '__main__':
    last_minute = -1

    while True:
        try:
            r = json.read(rqst_command())
            print r
            command = r.get('cmd')
            interval = r.get('intvl')
            collect_time = r.get('c_time')

            tempTest = True

            while tempTest == True:
                start_time = datetime.now()
                s_minute = start_time.minute

                if(((s_minute % interval) == 0) and (s_minute != last_minute)):
                    tempTest = False
                    c_t = datetime(start_time.year, start_time.month, start_time.day, start_time.hour, start_time.minute, 0)
                    last_minute = c_t.minute

                    send_stats(cmd_nodes(command, collect_time), c_t)
                    time.sleep(1)
                else:
                    time.sleep(1)
        except Exception, e:
            print e
            print "**Top Level Exception"
            pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:57:13.083

正如其他人指出的那样，已经有现成的作业/任务调度程序，如 cron。你可以使用它们。但是您也可以在 Python 中实现自己的简单解决方案，这很好。你只需要以正确的方式去做。您的方法中的基本问题是您在操作之间睡了一定的间隔，并且不定期检查系统时间。在您的方法中，动作的持续时间是您的时间测量的误差。这个错误总结了每个动作。您需要有一个没有此错误的时间参考，即系统时间。

**实施示例：** 例如，考虑一秒钟的精度对您来说已经足够了。然后在循环中每秒检查系统时间。您可以使用`time.sleep(1)`. 如果系统时间比`last_action_execution_time`（您显然存储在某处）晚 5 分钟，则将当前时间存储为`last_action_execution_time`并执行操作。只要这个动作确定持续不到 5 分钟，下一次执行就会发生，`last_action_execution_time + 5 min`只有一个很小的错误。最重要的是，此错误在运行时不会随着执行次数而增加。

对于坚如磐石的基于 Python 的解决方案，您还应该查看[http://docs.python.org/library/sched.html](http://docs.python.org/library/sched.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T21:06:36.037

怎么样：

```
while true:
    try:

        start=time.time() # save the beginning time before execution starts

        r = json.read(rqst_command())
        interval = r.get('intvl')
        collect_time = r.get('c_time')
        command = r.get('cmd')
        start_time = datetime.now()
        send_stats(cmd_nodes(command, collect_time))
        end_time = datetime.now()
        sleepy_time = interval - (end_time - start_time)

        while time.time() <= start + sleepy_time*60: #To wait until interval has ended note: I'm assuming sleepy_time is in minutes.
            pass

    except Exception, e:
    print e
    print "**Top Level Exception"
    pass 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T13:51:57.333

如果您使用 Linux，您可能想要设置一个[cronjob](http://en.wikipedia.org/wiki/Cron)，它以特定的时间间隔运行您的脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T13:55:53.307

有两种方法可以做到这一点。

第一个也是最好的方法是使用操作系统的任务调度程序（Windows中的任务调度程序， `cron`Linux 中的任务调度程序）。这些工具的开发人员可能预料到的问题比您想象的要多，而且您不必自己编写代码可以节省时间和可能的错误。

否则，您需要考虑脚本的执行时间。最简单的方法是不要在您的时间间隔内休眠（正如您所看到的那样缓慢向前滑动），您将根据您上次醒来的时间和执行后计算下一次执行的时间，仅在该时间间隔内休眠现在和那时之间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T14:04:43.663

我假设您想在 Python 中执行此操作，而不依赖于任何其他系统。

您只需要考虑您的流程何时开始以及何时结束并相应地设置您的时间间隔。代码看起来像这样。

```
if __name__ == '__main__':
while True:
    try:
        r = json.read(rqst_command())
        interval = r.get('intvl')
        collect_time = r.get('c_time')
        command = r.get('cmd')
        start_time = datetime.now()
        send_stats(cmd_nodes(command, collect_time))
        end_time = datetime.now()
        sleepy_time = interval - (end_time - start_time)
        time.sleep(sleepy_time)
    except Exception, e:
        print e
        print "**Top Level Exception"
        pass 
```

# c++ - 用于消除未使用变量警告的跨平台宏

> ID：12198449
> 
> 赞同：9
> 
> 时间：2012-08-30T13:50:39.847
> 
> 标签：c++, xcode, visual-c++, clang, suppress-warnings

在将一大段 C++ 代码从 Visual Studio (2008) 移植到 Xcode (4.4+) 时，我遇到如下行：

```
UNUSED_ALWAYS(someVar); 
```

（`UNUSED_ALWAYS(x)`通过`UNUSED(x)`）宏扩展为`x`似乎可以很好地使 Visual C++ 静音。然而，这对 Clang 来说还不够。

对于 Clang，我通常使用`#pragma unused x`指令。

`UNUSED_ALWAYS`和宏在我控制`UNUSED`的人工`windows.h`头文件中定义，其中包含许多实用程序来帮助 Xcode 编译 Windows 内容。

有没有办法定义`UNUSED(x)`扩展为`#pragma unused x`？我试过这个，Clang 无法接受：

```
#define UNUSED(x) #pragma unused(x) 
```

我也试过：

```
#define UNUSED(x) (void)(x) 
```

这似乎有效。我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T14:23:43.803

```
(void)x; 
```

很好；一直为我工作。通常不能将宏扩展为#pragma，尽管通常可以从宏生成稍有不同的编译指示语法（gcc 和 clang 上的 _Pragma，VisualC++ 上的 __pragma）。

尽管如此，我实际上在 C++ 中不再需要 (void)x，因为您不能简单地不给函数参数命名以表明您不使用它：

```
int Example(int, int b, int)
{
   ... /* only uses b */
} 
```

工作得很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T14:28:18.683

是的 - 您可以将这种方法用于 GCC 和 Clang：

```
#define MON_Internal_UnusedStringify(macro_arg_string_literal) #macro_arg_string_literal

#define MONUnusedParameter(macro_arg_parameter) _Pragma(MON_Internal_UnusedStringify(unused(macro_arg_parameter))) 
```

虽然我的确实`(void)`有为 clang 定义的方法，但 Clang 现在似乎支持`_Pragma`上面的 stringify 和方法。`_Pragma`是 C99。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:13:18.977

`#define`两者`#pragma`都是预处理器指令。您不能定义一个宏来扩展为预处理器指令。以下将是不正确的：

```
#define MY_MACRO   #if _WIN32 
```

MY_MACRO 不能`#if _WIN32`为**编译器**展开。

最好的办法是定义自己的宏：

```
#define UNUSED(_var) _var 
```

# c++ - 使用 new 设置数组元素

> ID：12198450
> 
> 赞同：0
> 
> 时间：2012-08-30T13:50:43.223
> 
> 标签：c++, arrays

有一种方法可以在数组上设置元素 -`int rgArrayNum [] = {16, 2, 77, 40, 12071};` 我如何使用 new 对指针执行相同的操作？我试过`int *pArrayNum = new [] = {4 ,3 ,3} ;`了，但没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T13:53:58.313

在[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")中，您可以编写：

```
int *pArrayNum = new int[3]{4, 3, 3}; 
```

但是，在[c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题")中，数组新的初始化是不允许的；您必须单独初始化成员或通过从堆栈上的数组中复制来初始化成员：

```
int rgArrayNum [] = {16, 2, 77, 40, 12071};
int *pArrayNum = new int[sizeof rgArrayNum / sizeof rgArrayNum[0]];
std::copy(&rgArrayNum[0], &rgArrayNum[sizeof rgArrayNum / sizeof rgArrayNum[0]],
    pArrayNum); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:54:01.670

在 C++03 及更早版本中，您不能将动态数组的值初始化为除零以外的任何值。

您可以在 C++11 中实现类似的功能：

```
int *pArrayNum = new int [3] {4, 3, 3}; 
```

或者如果您不介意使用容器为您管理内存：

```
std::vector<int> array = {4, 3, 3}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:55:36.970

您必须使用整数指针而不是整数来创建数组。

```
int* rgArrayNum2 [] = {new int(16), new int(16), new int(16), new int(16), new int(16)};

//test
int* test = rgArrayNum2[2];
*test = 15; 
```

现在 rgArrayNum2[2] 是 15。

# php - 在特定时间打开页面

> ID：12198452
> 
> 赞同：1
> 
> 时间：2012-08-30T13:50:53.597
> 
> 标签：php

我想在 php.ini 的特定时间范围内打开对页面的访问。

比如说上午 9:00 到下午 12:00 - 用户将能够查看一个页面，之后他们将让您此时不允许查看此页面。

在不访问数据库的情况下，这在 PHP 中是否可行？

如果是这样，有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:53:13.643

你可以这样做：

```
if(date('G')>=9 && date('G')<=11)
{
    // show your code/site/content.
}
else
{
    // Show the "Come back during opening hours..." sign.
} 
```

默认情况下，[日期](http://php.net/manual/en/function.date.php)函数使用特定时间，并使用`G`0-24 值表示一天中的小时（无前导零）。

不过，这*将*使用服务器时间 - 这是我希望您想要的，而不是使用用户的时区，如果他们与您的服务器不在同一个时区。

如果您的服务器与您期望用户所处的时区不同，请使用[date-default-timezone-set](http://www.php.net/manual/en/function.date-default-timezone-set.php)将其设置为您想要的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:59:20.403

你最好使用 .htaccess 指令。这里描述了这个想法[http://www.blog.highub.com/apache/http-server/htaccess-deny-diratory-access-during-a-specific-time/](http://www.blog.highub.com/apache/http-server/htaccess-deny-diractory-access-during-a-specific-time/)

# php - 如何在 codeigniter 中更新多个具有相同名称的输入？

> ID：12198456
> 
> 赞同：0
> 
> 时间：2012-08-30T13:50:57.277
> 
> 标签：php, codeigniter

这是我到目前为止所拥有的

控制器

```
 $i = 0;
     foreach ($this->input->post('skill') as $cat) {
     $data[$i++]['skill'] = $cat;
     }
     $this->db->update_batch('skills', $data); 
    } 
```

模型

```
function update_record($data) 
{

    $this->db->update('skills', $data); 
   } 
```

看法

```
 <?php foreach ($skills as $skill):?>

<input type="text" name="skill[]" value="<?php echo $skill->skill;?>">

                <?php endforeach?> 
```

我收到数据库错误

```
You must specify an index to match on for batch updates. 
```

请帮我解决这个问题，我尝试了谷歌搜索，但没有任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:56:56.193

好的，这就是问题所在。根据[update_batch 的 CI Docs，](http://codeigniter.com/user_guide/database/active_record.html)您需要添加第三个参数，即 where key 。这是文档中的一个示例。

```
$data = array(
   array(
      'title' => 'My title' ,
      'name' => 'My Name 2' ,
      'date' => 'My date 2'
   ),
   array(
      'title' => 'Another title' ,
      'name' => 'Another Name 2' ,
      'date' => 'Another date 2'
   )
);

$this->db->update_batch('mytable', $data, 'title'); 
```

因此，在上面的查询中，标题列是该行的比较对象。因此，对于标题为“我的标题”的行，第一个数组元素用作更新，而对于那些标题为“另一个标题”的行，则使用第二个元素。我希望你明白。如果我们没有比较字段，那么整个数据库将被更新:-P

这是上述操作产生的最终查询。

```
 UPDATE `mytable` SET `name` = CASE
 WHEN `title` = 'My title' THEN 'My Name 2'
 WHEN `title` = 'Another title' THEN 'Another Name 2'
 ELSE `name` END,
 `date` = CASE
 WHEN `title` = 'My title' THEN 'My date 2'
 WHEN `title` = 'Another title' THEN 'Another date 2'
 ELSE `date` END
 WHERE `title` IN ('My title','Another title') 
```

希望这可以帮助。

# installation - 如何让 Innosetup 安装程序包显示非缩放图标图像 (>32x32)

> ID：12198460
> 
> 赞同：1
> 
> 时间：2012-08-30T13:51:08.853
> 
> 标签：installation, icons, inno-setup, image-size

我已经开始在我的桌面上使用“大”图标。有一段时间，我也一直在我的 Delphi 应用程序中包含 > 32x32 的图像。结果是在所有 Windows 显示情况下都可以很好地显示干净的图像。我知道它相当挑剔，但我刚刚注意到编译后的 Innosetup 包显示模糊 - 我认为它正在缩放 - 我突然想到必须有一种方法可以添加或更改为其 EXE 显示的默认 Innosetup 图像. 您可以在下图中看到效果。我有很多可用的图标，所以替换默认图标的解决方案会很棒。

![Innosetup 包与其他项目](../Images/6a0d6beb5a61d83d97190b2260b49a36.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:13:16.167

啊，我找到了。要为设置应用程序指定自定义图标，请使用[`SetupIconFile`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_setupiconfile)指令：

```
[Setup]
SetupIconFile="MyIcon.ico" 
```

# javascript - 第一次查看时不创建标题

> ID：12198464
> 
> 赞同：0
> 
> 时间：2012-08-30T13:51:16.767
> 
> 标签：javascript, extjs, sencha-touch-2, sencha-architect

当我试图在我的应用程序中创建的第一个视图上创建标题时，我遇到了一个问题。

起初，我跳过了应用程序中的所有推送操作，并在此 create.view 屏幕之后应用了此处代码中引用的标题

```
this.StembureauView = Ext.create('UtrechtStem.view.Stembureaulijst_View', {
                title: 'Stembureaulijst'
});
this.getMainnav().push(this.StembureauView); 
```

这工作正常，我似乎没有问题。但是，第一个屏幕，所以我的主视图，作为加载的第一个视图，不接受标题声明。

```
 Ext.create('UtrechtStem.view.MainNav', {
         fullscreen: true, 
         title:'stembureau zoeker'
    }); 
```

如果我在全屏声明后面很好地添加了标题声明，它不会接受它。（这是在 sencha 建筑师之外完成的，因为我不能在 sencha 建筑师中修改它）它只是显示空白。我尝试删除工具栏，看看这是不是错误，但它没有。我尝试在 Sench 之外添加 manualyy

有没有人知道为什么它不接受那里的标题声明并查看是否有工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:20:58.757

猜你的类 UtrechtStem.view.MainNav 是继承自 Ext.navigation.View。如果是，则不能直接设置其标题。相反，它借用了活动孩子的头衔。

看看[文档网站](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View-cfg-navigationBar)

干杯，奥列格

# mysql - HTML5 本地存储到远程存储查询

> ID：12198465
> 
> 赞同：0
> 
> 时间：2012-08-30T13:51:18.910
> 
> 标签：mysql, html, web-applications, local-storage, smartphone

我创建了一个在大多数智能手机上运行良好的 HTML5 网络应用程序。程序可以接受来自用户的输入、存储信息、显示、编辑、删除等。工作正常。

我想知道是否还有一种标准方法可以将此信息与远程 MYSQL 服务器同步，在这一点上，我会满足于能够将信息直接发布到远程服务器，完全跳过本地存储。

我已经查看了 github 上的 websqlsync，但在使其正常工作方面取得了有限的成功。

非常感谢任何指南、工作示例、教程或一般指针或将 html5 本地存储到 MYSQL 服务器的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:52:44.143

为什么不将`localStorage`对象保存为 JSON 字符串，并将其传递给远程服务器？你想对服务器上的数据做什么？

# sql - 如何更新满足 SQLite3 中递增数字条件的记录？

> ID：12198467
> 
> 赞同：0
> 
> 时间：2012-08-30T13:51:18.357
> 
> 标签：sql, sqlite, sql-update

这是 Postgres[更新记录的此问题的副本，它满足具有递增数字的条件，](https://stackoverflow.com/q/11897964/883832)但我需要一种适用于 SQLite3 的方法。

从原始问题中截取：

剪辑

我在 postgres 中有一张这样的表：

```
Id    Name    local_site_id    local_id
1     A       2                
2     B       2
3     C       1
4     D       2
5     E       1 
```

如何使用 SQL 查询将表更新为此：

```
Id    Name    local_site_id    local_id
1     A       2                1
2     B       2                2
3     C       1                
4     D       2                3
5     E       1 
```

现在，所有记录的 local_id 字段都是空的。我想使用从 1 开始的递增数字更新 local_id 值，仅适用于具有`local_site_id=2`是否可以使用 SQL 的行？

结束片段

[我从那里的答案](https://stackoverflow.com/a/11898359/883832)中尝试了这个命令，但它不适用于 SQLite3

```
update T set local_id=s.rn 
from (select id,row_number() over(order by id) as rn from T where local_site_id=2) s
where T.id=s.id; 
```

如何在 SQLite3 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:48:07.433

这应该这样做：

```
.mode column
.headers on

create table T (Id, Name, local_site_id, local_id);

insert into T values
    (1, 'A', 2, null),
    (2, 'B', 2, null),
    (3, 'C', 1, null),
    (4, 'D', 2, null),
    (5, 'E', 1, null);

update T set local_id = (
    select 
        case local_site_id
            when 2 then (select count(*) 
                         from T t2 
                         where t2.id <= t1.id and local_site_id=2)
            else null
        end
    from T as t1 where T.id=t1.id);

select * from T; 
```

返回：

```
Id          Name        local_site_id  local_id  
----------  ----------  -------------  ----------
1           A           2              1         
2           B           2              2         
3           C           1                        
4           D           2              3         
5           E           1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:05:45.920

I found a way myself. I created a temporary table and then used the "ROWID" internal column of the temporary table to update the original table.

```
create table temptable as select id from tablename where local_site_id=2;

update tablename 
    set local_id=(select ROWID from temptable where temptable.id=tablename.id)
    where exists (select ROWID from temptable where temptable.id=tablename.id); 
```

But I'll accept Ludo's answer as it doesn't involve creating a new table.

# python - 如何删除列表列表中的重复列表？

> ID：12198468
> 
> 赞同：37
> 
> 时间：2012-08-30T13:51:28.707
> 
> 标签：python

我想从列表中删除所有重复列表。

所以我有一个这样的列表列表。

```
a = [[1,2],[1,2],[3,4,5],[3,4,5],[3,4,5]] 
```

我希望有：

```
b = [[1,2],[3,4,5]] 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-30T13:52:52.260

您可以使用一组：

```
b_set = set(map(tuple,a))  #need to convert the inner lists to tuples so they are hashable
b = map(list,b_set) #Now convert tuples back into lists (maybe unnecessary?) 
```

或者，如果您更喜欢列表推导/生成器：

```
b_set = set(tuple(x) for x in a)
b = [ list(x) for x in b_set ] 
```

最后，如果顺序很重要，您总是可以对 b 进行排序：

```
b.sort(key = lambda x: a.index(x) ) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T13:54:52.130

如果列表的顺序不重要，请参阅 mgilson 的回答。如果要保留订单，请执行以下操作：

```
b = list()
for sublist in a:
    if sublist not in b:
        b.append(sublist) 
```

这将保持原始列表中的顺序。但是，它比使用集合更慢且更冗长。

# reporting-services - 在没有用户交互的本地模式下使用 SSRS 时，是否可以获得更详细的错误消息？

> ID：12198471
> 
> 赞同：1
> 
> 时间：2012-08-30T13:51:34.007
> 
> 标签：reporting-services, ssrs-2008-r2

使用 SSRS 2008 R2

我有一个动态生成 RDL 以生成报告的后台进程。我在 LocalMode 中使用 SSRS，没有用户交互或连接到 SQL Server Reporting Services。用户唯一能看到的将是最终的 PDF。

我正在使用 Microsoft.Reporting.WebForms.LocalReport.Render 来生成报告。

发生错误时，唯一返回的消息如下所示：

```
    警告：执行子报告“SUBREPORT_000005”（实例：0）时出错：报告“”的定义无效。(rsErrorExecutingSubreport)
    警告：执行子报告“SUBREPORT_000005”时出现警告。(rsWarningExecutingSubreport)

```

这些错误显然不是很有用。为了得到真正的错误，我必须将所有报告保存到磁盘并在 Report Builder 3.0 中打开有问题的报告，对其进行修改以提供所需的一切，然后执行报告。此时，报表生成器将报告更详细的错误，例如缺少字段、公式语法无效等。此过程非常耗时，并且会减慢调试周期。

有没有办法配置 LocalReport 给我更详细的错误？本地报告有一个名为 ShowDetailedSubreportMessages 的属性，但它返回的错误没有区别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:09:22.113

我在其他论坛上问过这个问题，到目前为止，这似乎是不可能的。因此，通过报表生成器的手动方法似乎仍然是答案。

# objective-c - 如何使用 Cocoa 制作自定义轨迹球/眼球控件？

> ID：12198472
> 
> 赞同：0
> 
> 时间：2012-08-30T13:51:35.093
> 
> 标签：objective-c, cocoa, widget, custom-controls, trackball

我正在编写我的第一个 Cocoa 应用程序，我想制作一个“轨迹球 / 眼球 / 轨迹球 / 不管它叫什么”按钮来旋转 3D OpenGL 场景。

当您选择 3D 图表时，Pages（Apple iWork 套件）中有一个自定义 Cocoa 控件的完美示例。经过一些黑客攻击后，这个控件似乎被引用为`SFC3DRotateWidget`. [这是 Pages 中控件的屏幕截图](https://i.stack.imgur.com/SvZ77.jpg)。

也许这个小部件是可重复使用的，但我没有找到如何或在哪里。所以我尝试重新创建它。

我对 Cocoa 没有经验，所以我不知道该怎么做，也不知道具体在哪里（即如何处理 Interface Builder，如何处理代码......）。

我不确定是否需要覆盖绘图功能。我想使用带有`NSTrackingArea`（代码）的纹理按钮（Interface Builder）来处理鼠标事件（移动，拖动，...），但该区域必须是矩形的。Apple 使用的自定义控件的交互区域似乎遵循箭头的形状。[我读过所以我可以`NSBezierPath`用来创建一个更具体的区域](https://stackoverflow.com/questions/4459262/custom-shaped-tracking-area-in-cocoa)（仅通过代码？）。

听起来对你有好处吗？我错过了什么吗？

如果您有任何可以分享的提示、技巧或资源，请告诉我们！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:54:50.060

听起来您想构建一个自定义控件。您可以通过继承 NSControl 来做到这一点，它有[一个关于如何做的指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ControlCell/Tasks/SubclassingNSControl.html)。您可以通过实现各种方法来控制圆形可点击区域以及对鼠标事件的响应。例如，您可以使用`mouseDown:`相关方法跟踪鼠标事件。

您可能不需要使用任何自定义绘图代码，`NSImageView`带有各种箭头的子视图可能适合您的目的，除非您宁愿在代码中绘制它们。

# c++ - 为什么CCameraDS类不能同时打开3个以上的摄像头？

> ID：12198475
> 
> 赞同：0
> 
> 时间：2012-08-30T13:51:45.273
> 
> 标签：c++, opencv, directshow

由于opencv库不提供打开指定相机的功能，所以我使用了带有DirectShow的CCameraDS类实现。不幸的是，当我同时打开超过 3 个摄像头时，程序死机了！！！我该怎么办？有没有和我一样的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:48:42.533

对于多个 USB 摄像头，您需要注意有限的 USB 带宽 - 这是意外视频捕获行为的最可能原因。一定要搜索，这是十几个类似问题的重复。

解决方案可能是降低视频分辨率、帧速率、使用压缩捕获格式、尝试使用不同的集线器或只是切换到非 USB 硬件。

# java - 计算与二维多边形相交的线段长度

> ID：12198477
> 
> 赞同：2
> 
> 时间：2012-08-30T13:51:48.203
> 
> 标签：java, geometry, line, polygon, intersection

给定一个段 S 和一个多边形 P，是否有一种快速算法可以返回 S 穿过多边形 P 的子段的总长度？

注意：P 由封闭的 LineString 定义（即：第一个和最后一个相等的点数组）。P 没有任何“孔”，但可以是凹的和/或自相交的。

注意：最终目标是所有相交子段的总长度，如果这可以更快地完成，而无需检索所有子段的显式数组，那就更好了。

加分项：所述算法的 Java 实现。使用 JTS 之类的库是可以的，只要生成的解决方案速度很快。

使用 JTS 的简单解决方案已经存在，但不支持自相交多边形，而且我相信它不是最快的。该解决方案包括创建一个 Polygon 对象（对于 P）、一个 2 点 LineString 对象（对于 S），并获取生成的交叉点的长度。

这是执行此操作的代码：

```
 GeometryFactory fact = new GeometryFactory();
    WKTReader wktRdr = new WKTReader(fact);

    String wktP = "POLYGON((40 100, 40 20, 120 20, 120 100, 60 40, 40 100))";
    String wktS = "LINESTRING(20 60, 160 60)";
    Geometry pl = wktRdr.read(wktP);
    Geometry ls = wktRdr.read(wktS);
    Geometry in = pl.intersection(ls);
    System.out.println("P = " + pl);
    System.out.println("S = " + ls);
    System.out.println("P intersection S = " + in);
    System.out.println("S length = " + ls.getLength());
    System.out.println("P intersection S length = " + in.getLength()); 
```

编辑：关于自相交多边形的考虑：一种解决方案，虽然可能不是最快的，但可能涉及通过将自相交多边形拆分为多个非自相交多边形来对其进行预处理。

关于这个问题的一些解释和一些伪代码在这里： [Algorithm to split self-intersected Path2D into several not self-intersected paths？](https://stackoverflow.com/questions/4849645/algorithm-to-split-self-intersected-path2d-into-several-not-self-intersected-pat)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:09:33.327

**在 O(n*log n) 中找到非自相交多边形的相交长度。**

伪代码：

```
function intersecting_segment_length(set P, segment S):
  let starting_point = the bottom-most, left-most point in P.
  let E1, E2 = the edges of starting_point

  let intersections = new array.
  do:
     while E1 != E2 and E1 does not cross S:
        E1++ //move E1 "clockwise" around P
     while E2 != E1 and E2 does not cross S:
        E2-- //move E2 "counterclockwise" around P
     if E1 != E2:
        p1 = the intersection of E1 and S
        p2 = the intersection of E2 and S
        intersections.add(new line segment from p1 and p2)
  until E1 == E2.

  return sweepline(intersections) 
```

扫描线伪代码：

```
function sweepline(array segments):
  let points = start and end points of all segments
  sort points as they intersect S

  let last_point = points.first()
  let num_segments = 0 //num segments intersected by sweepline
  let length = 0

  for each point p in points - last_point:
     if p is the leading point in p.owning_segment:
        num_segments++
     else: //trailing point
        num_segments--
        if num_segments % 2 == 0: //I think
           length += distance between p and last_point
     last_point = p

  return length 
```

复杂：

*   P 中的行走边：`O(n)`，其中`n`是 P 中的边/顶点数。
*   对交点进行排序：`O(m*log m)`，其中`m`是 P 与 S 的交点数。
*   使用扫描线求总长度：`O(m)`。
*   不幸的是，我们可以构造一个与 S 相交的“梳状多边形” `O(n)`，因此总复杂度是`O(n*log n)`最坏的情况。

笔记：

*   如果您可以确定 P 的自相交（例如，当您在 P 周围走动时），您可以将这些事件注入扫描线并相应地修改它的算法。结果*大概*可以在`O(n*log n)`.
*   对于示例扫描线实现（较少的伪代码），您可以查看[此答案](https://stackoverflow.com/questions/11965455/how-to-find-matching-time-intervals-for-more-than-2-users/12135565#12135565)。

# mysql - MYSQL 日期/时间子查询的语法错误

> ID：12198478
> 
> 赞同：0
> 
> 时间：2012-08-30T13:51:54.657
> 
> 标签：mysql, sql, datetime

尝试添加仅显示上一个日历月的记录的子查询。它需要检查的列称为 DateOfCheck 并且是一个自动时间戳列。

我有这个：

```
$SelectedMonth = "
  select *
  from   Data_Table
  where  DateOfCheck >= date_sub(curdate(), interval 1 month)
     and DateOfCheck <= date_sub(curdate(), interval 1 day)
"; 
```

并且当我将它放在主查询中时出现语法错误。

另外我认为（我是菜鸟）这只是从今天开始的最后一个月，当我需要它来查看最后一个日历月时。

我还需要一个单独的子查询来调用当前日历月中的所有记录。

好的，完整的查询（我知道这可能是非常低效的代码——正如我所说，我是一个试图拼凑一些东西的菜鸟！）如下，它工作正常，直到我尝试输入日期上面的子查询。

```
$Area = $_POST['Area'];
$product = $_POST['Product'];
$AverageScore = ("ROUND(AVG(Score),1)AS 'Avg <br/> Score'");
$AverageAutofails = ("ROUND(AVG(Autofails),1)AS 'Autofails <br/> per Check'");
$ProductTotal = "SELECT (COUNT (CA001Result) from Data_Table WHERE Product ='$product')";

$SelectedMonth = "select * from Data_Table where DateOfCheck >= date_sub(curdate(), interval 1 month) and DateOfCheck <= date_sub(curdate(), interval 1 day)"; 
ECHO $SelectedMonth;

if ($product == "All"){

$CA001 ="ROUND ((SELECT 100 * SUM(IF(CA001Result='Fail', 1, 0)) / COUNT(CA001Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>001'";

$CA002 ="ROUND ((SELECT 100 * SUM(IF(CA002Result='Fail', 1, 0)) / COUNT(CA002Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>002 '";

$CA003 ="ROUND ((SELECT 100 * SUM(IF(CA002Result='Fail', 1, 0)) / COUNT(CA002Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>003 '";

$CA004 ="ROUND ((SELECT 100 * SUM(IF(CA004Result='Fail', 1, 0)) / COUNT(CA004Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>004 '";

$CA005 ="ROUND ((SELECT 100 * SUM(IF(CA005Result='Fail', 1, 0)) / COUNT(CA005Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>005 '";

$CA006 ="ROUND ((SELECT 100 * SUM(IF(CA006Result='Fail', 1, 0)) / COUNT(CA006Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>006 '";

$CA007 ="ROUND ((SELECT 100 * SUM(IF(CA007Result='Fail', 1, 0)) / COUNT(CA007Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>007 '";

$CA008 ="ROUND ((SELECT 100 * SUM(IF(CA008Result='Fail', 1, 0)) / COUNT(CA008Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>008 '";

$CA009 ="ROUND ((SELECT 100 * SUM(IF(CA009Result='Fail', 1, 0)) / COUNT(CA009Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>009 '";

$CA010 ="ROUND ((SELECT 100 * SUM(IF(CA010Result='Fail', 1, 0)) / COUNT(CA010Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>010 '";

$CA011 ="ROUND ((SELECT 100 * SUM(IF(CA011Result='Fail', 1, 0)) / COUNT(CA011Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>011 '";

$CA012 ="ROUND ((SELECT 100 * SUM(IF(CA012Result='Fail', 1, 0)) / COUNT(CA012Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA0<br/>12 '";

$CA013 ="ROUND ((SELECT 100 * SUM(IF(CA013Result='Fail', 1, 0)) / COUNT(CA013Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>013 '";

$CA014 ="ROUND ((SELECT 100 * SUM(IF(CA014Result='Fail', 1, 0)) / COUNT(CA014Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>014 '";

$CA015 ="ROUND ((SELECT 100 * SUM(IF(CA015Result='Fail', 1, 0)) / COUNT(CA015Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>015 '";

$CA016 ="ROUND ((SELECT 100 * SUM(IF(CA016Result='Fail', 1, 0)) / COUNT(CA016Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>016 '";

$CA017 ="ROUND ((SELECT 100 * SUM(IF(CA017Result='Fail', 1, 0)) / COUNT(CA017Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA0<br/>17 '";

$CA018 ="ROUND ((SELECT 100 * SUM(IF(CA018Result='Fail', 1, 0)) / COUNT(CA018Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>018 '";

$CA019 ="ROUND ((SELECT 100 * SUM(IF(CA019Result='Fail', 1, 0)) / COUNT(CA019Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>019 '";

$CA020 ="ROUND ((SELECT 100 * SUM(IF(CA020Result='Fail', 1, 0)) / COUNT(CA020Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>020 '";

$CA021 ="ROUND ((SELECT 100 * SUM(IF(CA021Result='Fail', 1, 0)) / COUNT(CA021Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>021 '";

$CA022 ="ROUND ((SELECT 100 * SUM(IF(CA022Result='Fail', 1, 0)) / COUNT(CA022Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>022 '";

$CA023 ="ROUND ((SELECT 100 * SUM(IF(CA023Result='Fail', 1, 0)) / COUNT(CA023Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>023 '";

$CA024 ="ROUND ((SELECT 100 * SUM(IF(CA024Result='Fail', 1, 0)) / COUNT(CA024Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>024 '";

$CA025 ="ROUND ((SELECT 100 * SUM(IF(CA025Result='Fail', 1, 0)) / COUNT(CA025Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>025 '";

$CA026 ="ROUND ((SELECT 100 * SUM(IF(CA026Result='Fail', 1, 0)) / COUNT(CA026Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>026 '";

$CA027 ="ROUND ((SELECT 100 * SUM(IF(CA027Result='Fail', 1, 0)) / COUNT(CA027Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>027 '";

$CA028 ="ROUND ((SELECT 100 * SUM(IF(CA028Result='Fail', 1, 0)) / COUNT(CA028Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>028 '";

}
else{

$CA001 ="ROUND ((SELECT 100 * SUM(IF(CA001Result='Fail', 1, 0)) / COUNT(CA001Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>001 '";

$CA002 ="ROUND ((SELECT 100 * SUM(IF(CA002Result='Fail', 1, 0)) / COUNT(CA002Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>002 '";

$CA003 ="ROUND ((SELECT 100 * SUM(IF(CA003Result='Fail', 1, 0)) / COUNT(CA003Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>003 '";

$CA004 ="ROUND ((SELECT 100 * SUM(IF(CA004Result='Fail', 1, 0)) / COUNT(CA004Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>004 '";

$CA005 ="ROUND ((SELECT 100 * SUM(IF(CA005Result='Fail', 1, 0)) / COUNT(CA005Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>005 '";

$CA006 ="ROUND ((SELECT 100 * SUM(IF(CA006Result='Fail', 1, 0)) / COUNT(CA006Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>006 '";

$CA007 ="ROUND ((SELECT 100 * SUM(IF(CA007Result='Fail', 1, 0)) / COUNT(CA007Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>007 '";

$CA008 ="ROUND ((SELECT 100 * SUM(IF(CA008Result='Fail', 1, 0)) / COUNT(CA008Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>008 '";

$CA009 ="ROUND ((SELECT 100 * SUM(IF(CA009Result='Fail', 1, 0)) / COUNT(CA009Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>009 '";

$CA010 ="ROUND ((SELECT 100 * SUM(IF(CA010Result='Fail', 1, 0)) / COUNT(CA010Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>010 '";

$CA011 ="ROUND ((SELECT 100 * SUM(IF(CA011Result='Fail', 1, 0)) / COUNT(CA011Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>011 '";

$CA012 ="ROUND ((SELECT 100 * SUM(IF(CA012Result='Fail', 1, 0)) / COUNT(CA012Result) 
FROM Data_Table
WHERE  Area='$Area'),0) as 'CA<br/>012 '";

$CA013 ="ROUND ((SELECT 100 * SUM(IF(CA013Result='Fail', 1, 0)) / COUNT(CA013Result) 
FROM Data_Table
WHERE  Area='$Area' AND Product = '$product'),0) as 'CA<br/>013 '";

$CA014 ="ROUND ((SELECT 100 * SUM(IF(CA014Result='Fail', 1, 0)) / COUNT(CA014Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>014 '";

$CA015 ="ROUND ((SELECT 100 * SUM(IF(CA015Result='Fail', 1, 0)) / COUNT(CA015Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>015 '";

$CA016 ="ROUND ((SELECT 100 * SUM(IF(CA016Result='Fail', 1, 0)) / COUNT(CA016Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>016 '";

$CA017 ="ROUND ((SELECT 100 * SUM(IF(CA017Result='Fail', 1, 0)) / COUNT(CA017Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>017 '";

$CA018 ="ROUND ((SELECT 100 * SUM(IF(CA018Result='Fail', 1, 0)) / COUNT(CA018Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>018 '";

$CA019 ="ROUND ((SELECT 100 * SUM(IF(CA019Result='Fail', 1, 0)) / COUNT(CA019Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>019 '";

$CA020 ="ROUND ((SELECT 100 * SUM(IF(CA020Result='Fail', 1, 0)) / COUNT(CA020Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>020 '";

$CA021 ="ROUND ((SELECT 100 * SUM(IF(CA021Result='Fail', 1, 0)) / COUNT(CA021Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>021 '";

$CA022 ="ROUND ((SELECT 100 * SUM(IF(CA022Result='Fail', 1, 0)) / COUNT(CA022Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>022 '";

$CA023 ="ROUND ((SELECT 100 * SUM(IF(CA023Result='Fail', 1, 0)) / COUNT(CA023Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>023 '";

$CA024 ="ROUND ((SELECT 100 * SUM(IF(CA024Result='Fail', 1, 0)) / COUNT(CA024Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>024 '";

$CA025 ="ROUND ((SELECT 100 * SUM(IF(CA025Result='Fail', 1, 0)) / COUNT(CA025Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>025 '";

$CA026 ="ROUND ((SELECT 100 * SUM(IF(CA026Result='Fail', 1, 0)) / COUNT(CA026Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>026 '";

$CA027 ="ROUND ((SELECT 100 * SUM(IF(CA027Result='Fail', 1, 0)) / COUNT(CA027Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>027 '";

$CA028 ="ROUND ((SELECT 100 * SUM(IF(CA028Result='Fail', 1, 0)) / COUNT(CA028Result) 
FROM Data_Table
WHERE  Area='$Area'AND Product = '$product'),0) as 'CA<br/>028 '";

}

if ($product == "All"){
echo SQLResultTable2(" SELECT $SelectedMonth $CA001, $CA002, $CA003, $CA004, $CA005, $CA006, $CA007, $CA008, $CA009, $CA010, $CA011, $CA012, $CA013, $CA014, $CA015, $CA016, $CA017, $CA018, $CA019, $CA020,$CA021, $CA022, $CA023, $CA024, $CA025, $CA026, $CA027, $CA028 FROM Data_Table WHERE Area='$Area' GROUP BY Area");}
else{
    echo SQLResultTable2("SELECT $SelectedMonth, $CA001, $CA002, $CA003, $CA004, $CA005, $CA006, $CA007, $CA008, $CA009, $CA010, $CA011, $CA012, $CA013, $CA014, $CA015, $CA016, $CA017, $CA018, $CA019, $CA020,$CA021, $CA022, $CA023, $CA024, $CA025, $CA026, $CA027, $CA028 FROM Data_Table WHERE Area='$Area' GROUP BY Area");}

?> 
```

任何帮助表示赞赏，干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:10:03.733

问题是最终查询将以“SELECT SELECT”开头。你像这样组装它：

```
"SELECT $SelectedMonth, $CA001 ..." 
```

并`$selectedMonth`开始：

```
"select * from Data_Table where ..." 
```

所以你得到：

```
"SELECT select * from Data_Table where ..." 
```

另一个问题是，这是您唯一选择多个列的子查询，这使得语法更难集成到如此庞大的查询中。整个事情应该重新设计成一个大的单个 SELECT，因为您只从一个表中进行选择。这是一个非常快速的想法（一个选择，没有子查询）：

```
$cols[] = "ROUND(AVG(Score),1)AS 'Avg <br/> Score'";
$cols[] = "ROUND(AVG(Autofails),1)AS 'Autofails <br/> per Check'";
$cols[] = "(COUNT (CA001Result)";

// Note: %03i will format 3 as 003
$columnFormat = "100 * SUM(IF(CA%03iResult='Fail', 1, 0)) / COUNT(CA%03iResult) AS CA%03i";
for($i = 1; $i <=28; $i++) {
  $cols[] = sprintf($columnFormat, $i, $i, $i);
}

$fieldList = implode(', ', $cols);
$sql = "SELECT " . $fieldList;
$sql .= " FROM Data_table WHERE Area='$Area' AND DateOfCheck BETWEEN CURDATE() - INTERVAL 1 MONTH AND CURDATE() - INTERVAL 1 DAY";
if($product != 'ALL') {
  $sql .= " AND Product = '$product'";
}
$sql .= " GROUP BY Area"; 
```

**理由：**上面的代码，用最简单的术语来说，是这样的：

1.  构建一个“列”的 PHP 数组以选择 ( `$cols`)
2.  组装这些列 ( `implode`)
3.  通过连接适当地添加您的 WHERE 广告 GROUP BY 子句。

最棘手的部分是 sprintf，在[它的 php 手册页](http://us.php.net/sprintf)上有很好的解释。本质上，它解析一个字符串并在其中放置一个格式化版本的变量。格式说明符说“这个`%i`参数将是一个整数”。但是，如果没有额外的处理，您的列别名将是“CA1”而不是“CA001”。幸运的是，sprintf 有我们需要的东西，它`%03i`说“使 int 至少有 3 位宽，并用 0（而不是空格）填充它”。因此，例如：`COUNT(CA%03iResult)`当通过 23 时，将导致`COUNT(CA023Result)`.

强烈建议您为自己的剧本考虑这门课程。它的性能要好几个数量级，而且更不容易出错（例如，由于您的执行分叉在两个地方，当您在其中一个路径中引入 SQL 错误时，您可能不会立即注意到（例如，您的 $product =ALL OP 中的查询缺少另一个逗号，简单的疏忽，但如果您不经常运行自动化测试，很容易错过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:04:55.727

关于您的子查询和上一个日历月的问题，您可以使用它`date_format(curdate() - interval 1 month,'%Y-%m-01 00:00:00')`来获取整个上个月，如下所示：

```
select *
  from   Data_Table
  where DateOfCheck between date_format(curdate() - interval 1 month,'%Y-%m-01 00:00:00')
     and date_sub(curdate(), interval 1 day) 
```

# sql - 如何使列值更美观

> ID：12198496
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:52:43.870
> 
> 标签：sql, oracle11g

我有一个包含以下字段的表：

*   版本
*   ID
*   设定值
*   标记

我想写一个 SELECT 语句来查询它们。但是，列`marker`中的值不容易读取。我想提供该列的子字符串。我的问题是我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:56:43.140

你可以使用这个：

```
SELECT version,
       id,
       set_value,
       SUBSTR(marker, 1, 10) AS marker
  FROM ... 
```

只选择 的前十个字符`marker`，并且仍然将结果列命名为“标记”。

（参见[http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions169.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions169.htm)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:56:53.110

您可以使用[substr](http://www.techonthenet.com/oracle/functions/substr.php)函数。

# ios - 带有 ios 自定义库的 xcode 上未定义的符号（符号的定义在那里）

> ID：12198499
> 
> 赞同：0
> 
> 时间：2012-08-30T13:53:00.110
> 
> 标签：ios, xcode, linker

我知道还有其他具有相同标题的问题，但没有一个问题与我相同。

我有两个项目。其中一个构建了一个库，另一个构建了一个使用该库的应用程序。

当我建立图书馆时，一切都好。它创建一个包含库的 .a 文件。当我尝试构建第二个项目时，我收到以下消息：

```
Undefined symbols for architecture armv7:
  "_SPLite3_rtree_geometry_callback", referenced from:
      _register_spatialite_sql_functions in liblibspatialite.a(spatialite.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

那很糟。一开始不知道在说什么，后来研究了一下，发现这个库可能还没有为armv7建库，于是我用lipo命令查看了架构：

```
lipo -info liblibspatialite.a 
```

这会产生以下输出。

```
Non-fat file: liblibspatialite.a is architecture: armv7 
```

好的，所以架构是正确的。然后呢？也许检查符合库的 .o 文件的符号。为此，我使用了 nm 命令：

```
nm spatialite.o | grep SPLite3_rt 
```

产生以下输出：

```
U _SPLite3_rtree_geometry_callback 
```

我检查了 nm 的联机帮助页，发现符号前的 U 表示它未定义。所以似乎就是这样。该符号显示为未定义。我在另一个工作区中有另一个版本的项目。我已经检查过了，它产生了一个工作库。nm 命令在该其他版本上返回以下内容：

```
0000e5f6 T _SPLite3_rtree_geometry_callback
0018c668 S _SPLite3_rtree_geometry_callback.eh 
```

所以，有了这个库，它就可以工作了，而且很好。我试图找到两个项目的构建选项的差异，但它们对我来说看起来是一样的。如果我在项目属性的编译器部分中包含库的源文件，我可以使用库的第一个版本进行构建。（选择目标-> 构建阶段-> 编译源），但我认为这不是使用库的重点。

所以，我想知道我该怎么做才能将 _SPLite3_rtree_geometry_callback 包含在库中。

提前致谢。

**编辑：**

更多信息。在 spatialite.c 中，有以下代码：

```
#define sqlite3_rtree_geometry_callback SPLite3_rtree_geometry_callback

SQLITE_API int sqlite3_rtree_geometry_callback(
sqlite3 *db,
  const char *zGeom,
  int (*xGeom)(sqlite3_rtree_geometry *, int nCoord, double *aCoord, int *pRes),
  void *pContext
); 
```

**编辑2：**

该方法的代码：

```
/*
** Register a new geometry function for use with the r-tree MATCH operator.
*/

SQLITE_API int sqlite3_rtree_geometry_callback(
  sqlite3 *db,
  const char *zGeom,
  int (*xGeom)(sqlite3_rtree_geometry *, int, double *, int *),
  void *pContext
){
  RtreeGeomCallback *pGeomCtx;      /* Context object for new user-function */

  /* Allocate and populate the context object. */
  pGeomCtx = (RtreeGeomCallback *)sqlite3_malloc(sizeof(RtreeGeomCallback));
  if( !pGeomCtx ) return SQLITE_NOMEM;
  pGeomCtx->xGeom = xGeom;
  pGeomCtx->pContext = pContext;

  /* Create the new user-function. Register a destructor function to delete
  ** the context object when it is no longer required.  */
  return sqlite3_create_function_v2(db, zGeom, -1, SQLITE_ANY, 
      (void *)pGeomCtx, geomCallback, 0, 0, doSqlite3Free
  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:44:54.017

检查是否`spacialite.c`已添加到库的目标中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:12:24.910

您必须在预处理宏中指定 SQLITE_ENABLE_RTREE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:44:17.753

行。这看起来很奇怪，但看起来我终于修好了。一切都正确定义，所以为什么它不工作我不知道。

我正在使用 xcode 目标首选项来定义预处理器宏。取而代之的是，我将 SQLITE_ENABLE_RTREE 更改为 .pch 文件，然后构建包含缺少的符号。

# cxf - 如何访问 CXF 简单前端服务类中的 HttpServletRequest

> ID：12198501
> 
> 赞同：3
> 
> 时间：2012-08-30T13:53:02.680
> 
> 标签：cxf, frontend

全部

我通过参考 [http://cxf.apache.org/docs/simple-frontend.html的官方文档，使用 CXF Simple Frontend 创建了一个简单的服务](http://cxf.apache.org/docs/simple-frontend.html)

我只是想知道如何在上面链接的示例中的服务实现类 HelloWorldImpl 的方法中访问 HttpServletRequest。

任何帮助，将不胜感激。

最好的祝福

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T23:34:40.880

我想，您可以尝试以下方法：

```
PhaseInterceptorChain.getCurrentMessage().get("..."); 
```

要找到包含请求的确切密钥，请使用 - `PhaseInterceptorChain.getCurrentMessage().keySet();`。它应该包含类似 Http Request 的东西。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T14:44:56.193

您可以使用：`org.apache.cxf.jaxrs.ext.MessageContext`class 来检索`HttpServletRequest`. 在您的实现中添加：

```
@Context 
private MessageContext context;

HttpServletRequest request = context.getHttpServletRequest(); 
```

你会得到请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-21T14:25:44.767

```
@Resource
WebServiceContext wsContext;
@Context
private HttpServletRequest request;

private HttpServletRequest getRequest() {
    MessageContext mc = wsContext.getMessageContext();
    HttpServletRequest req;
    if (mc != null) {
        req = (HttpServletRequest) mc.get(MessageContext.SERVLET_REQUEST);
    } else {
        req = request;
    }
    return req;
} 
```

# debugging - 如何调试 MongoDB 查询？

> ID：12198508
> 
> 赞同：2
> 
> 时间：2012-08-30T13:53:39.923
> 
> 标签：debugging, mongodb

我有一个正在运行的 MongoDB 查询，它没有撤回我知道它应该返回的记录。我过滤两件事：类别和描述（通过 contains/like 正则表达式）。如果我根据类别进行搜索，则该类别中的所有记录都会返回（包括问题记录），但是如果我输入描述，则无法返回该记录。与描述文本匹配的其他记录回来了，但由于某种原因，无论我输入什么，我都无法让这一条记录带着描述条件回来。这很奇怪。

如何使用 MongoDB 调试这样的事情？我的查询很简单：

```
var match = {};

var category = "hardware"
if (category)
    match.Category = category;

var searchText = "ceramic"
if (searchText)
{
    match.Description = new RegExp("/.*" + searchText + ".*/");
}

collection.find(match).toArray(function(err, items)
{
    response.send(items);
}); 
```

我试图找回的项目属于硬件类别，当 searchText 为“”时它会返回。它的描述中有“陶瓷”一词，但是当 searchText 是“陶瓷”（或在其描述中找到的任何其他词）时，该项目就不会回来了。其他在描述中带有“陶瓷”一词的人会这样做，但不是那个，当然该项目的结构与其他项目没有什么不同。它真的应该通过比赛。

大小写是正确的（“陶瓷”在描述和过滤器中都较低），我也尝试过 /i 使搜索不区分大小写。

那么我怎样才能找出为什么这个查询没有产生一个非常清楚匹配它的项目呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:19:13.387

好吧，这可能不是这里的原因，但是那个正则表达式有点奇怪。你应该能够指定这个：

match.Description = new RegExp("/" + searchText + "/");

该`.*`方法可以多次匹配任何字符 - 除非您试图贪婪地将所有内容与文本匹配并将其用作更复杂的正则表达式的一部分，否则您不需要它。

在调试方面，弄清楚你的查询在 MongoDB 中应该是什么样子，并确保它在 shell 中工作。这是一个快速示例文档：

```
{
    "_id" : ObjectId("503fab7bf6a278b7bda257d2"),
    "category" : "hardware",
    "Description" : "blah ceramic blah"
} 
```

这匹配：

```
mongos> db.foo.find({"Description" : /ceramic/}).pretty()
{
    "_id" : ObjectId("503fab7bf6a278b7bda257d2"),
    "category" : "hardware",
    "Description" : "blah ceramic blah"
} 
```

您还可以[打开分析](http://www.mongodb.org/display/DOCS/Database+Profiler#DatabaseProfiler-EnablingProfiling)并观察您的程序发送到 MongoDB 的内容（小心，分析有开销）。您将希望级别 2 能够查看页面上提到的所有查询。

# java - 为什么这个异常 FileItemStream$ItemSkippedException？

> ID：12198511
> 
> 赞同：8
> 
> 时间：2012-08-30T13:53:53.183
> 
> 标签：java, file-upload, apache-commons-fileupload

在 gwt Web 应用程序中。我必须发送一个文件和一些附加的参数。

在服务器端

```
try {

        ServletFileUpload upload = new ServletFileUpload();

        FileItemIterator iterator = upload.getItemIterator(request);

        while (iterator.hasNext()) {
            FileItemStream item = iterator.next();

            if (item.isFormField()) {

                String fieldName=item.getFieldName();
                String fieldValue = Streams.asString(item.openStream());
                System.out.println(" chk  " +fieldName +"  =  "+ fieldValue);
            } else {
                stream = item.openStream();
                fileName = item.getName();
                mimetype = item.getContentType();
                int c;
                while ((c = stream.read()) != -1) { 
                  System.out.print((char) c); 
                    }
            }
        }
    }catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
    System.out.println("out of try");
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    int nRead;
    while ((nRead = stream.read(buffer, 0, buffer.length)) != -1) {
        System.out.println("lenth111" +nRead);
        output.write(buffer, 0, nRead);
    }
    System.out.println("lenth" +nRead);
    output.flush(); 
```

使用此代码，我可以读取流。并且还在控制台上打印**了“out of try”**

最后在`while ((nRead = stream.read(buffer, 0, buffer.length)) != -1)` 网上我得到了一个警告

警告：/UploadFileServlet：org.apache.commons.fileupload.FileItemStream$ItemSkippedException。

如何解决这个问题呢。？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-09-09T10:01:50.307

回答有点晚，但我遇到了同样的问题。

为什么会出现该异常：ItemSkippedException 的 JavaDocs 解释了一点：

*如果在创建 FileItemStream 的迭代器上调用 Iterator.hasNext() 之后尝试从 FileItemStream.openStream() 返回的 InputStream 读取数据，则会引发此异常。*

您在 while 循环之外使用 InputStream*流*，这会导致问题，因为调用了另一个迭代来关闭（跳过）您尝试从中读取的文件 InputStream。

解决方案：在while循环中使用InputStream。如果在处理文件之前需要所有表单域，请确保在客户端以正确的顺序设置它。首先是所有字段，最后是文件。例如使用 JavaScript FormData：

```
var fd = new window.FormData();

fd.append("param1", param1);
fd.append("param2", param2);

// file must be last parameter to append
fd.append("file", file); 
```

在服务器端：

```
FileItemIterator iter = upload.getItemIterator(request);
while (iter.hasNext()) {
    FileItemStream item = iter.next();
    InputStream stream = item.openStream();

    // the order of items is given by client, first form-fields, last file stream
    if (item.isFormField()) {
        String name = item.getFieldName();
        String value = Streams.asString(stream);
        // here we get the param1 and param2
    } else {
        String filename = item.getName();
        String mimetype = item.getContentType();

        ByteArrayOutputStream output = new ByteArrayOutputStream();
        int nRead;
        while ((nRead = stream.read(buffer, 0, buffer.length)) != -1) {
            System.out.println("lenth111" +nRead);
            output.write(buffer, 0, nRead);
        }
        System.out.println("lenth" +nRead);
        output.flush(); 
    }
} 
```

# c# - 无法在 C# 中的 WebControl 中打开 Google 博客网页

> ID：12198513
> 
> 赞同：0
> 
> 时间：2012-08-30T13:53:53.317
> 
> 标签：c#, load, webbrowser-control

我正在尝试在 WebControl 中显示 Google 博客网页。

使用页面索引 ( [http://googlefrance.blogspot.fr/](http://googlefrance.blogspot.fr/) ) 就可以了。使用页面博客（例如[http://googlefrance.blogspot.fr/2012/08/elle-est-arrivee-la-nexus-7-est.html](http://googlefrance.blogspot.fr/2012/08/elle-est-arrivee-la-nexus-7-est.html)），我得到了没有内容的黑页。

```
namespace TestLoadGoogleBlogPage
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            webBrowserGoogleBlog.Navigate("http://googlefrance.blogspot.com/"); // OK
            // KO webBrowserGoogleBlog.Navigate("http://googlefrance.blogspot.com/2012/08/elle-est-arrivee-la-nexus-7-est.html");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:19:44.163

[我用Watin](http://watin.org/)成功加载了页面

```
using (var WatiNbrowserIE = new WatinCore.IE("http://googlefrance.blogspot.fr/2012/08/elle-est-arrivee-la-nexus-7-est.html"))
{
   while (!WatiNbrowserIE.Elements.Exists(WatinCore.Find.ByClass("article-content entry-content"))) { System.Threading.Thread.Sleep(2000); }
   string sTitle = WatiNbrowserIE.Elements.Filter(WatinCore.Find.ByClass("title entry-title")).First().Text;

   // Some code here 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:09:59.330

该问题似乎与javascript相关。如果您尝试在浏览器中未启用 javascript 的情况下打开该网页[http://googlefrance.blogspot.com/2012/08/elle-est-arrivee-la-nexus-7-est.html](http://googlefrance.blogspot.com/2012/08/elle-est-arrivee-la-nexus-7-est.html)，则会显示空白。

所以问题不在于您的程序，因为 webcontrol 无法处理 javascript，它是您尝试访问的网页。

# unix - 如何在 Unix 数组中读取带空格的文件名

> ID：12198514
> 
> 赞同：1
> 
> 时间：2012-08-30T13:53:55.390
> 
> 标签：unix, ksh

我有以下行：

```
for FILE in $(find "${DIR}" -type f -mtime +14 -level 0) 
```

问题是，如果我有一个名为“New Document.txt”的文件，第一次传递时 $FILE 的值将是“New”，第二次传递时它将是“Document”。我如何让它保持文件名在一起？

我在 Windows 环境中运行它，如果这有区别的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:57:44.210

而不是使用 for 循环使用 while 循环

```
find "${DIR}" -type f -mtime +14 -level 0 |while read FILE
do
  ls -l  "${FILE}"
done 
```

祝你好运

# c# - 是否可以在 Ubuntu 中创建 Windows 7 手机应用程序？

> ID：12198520
> 
> 赞同：0
> 
> 时间：2012-08-30T13:54:09.673
> 
> 标签：c#, .net, windows, silverlight

我可以使用 mono 项目在 Ubuntu 中运行 c# 程序。

但我想知道是否可以在 Ubuntu 中创建 Windows 7 手机应用程序。

如果是这样，我需要安装哪些软件包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:24:27.587

目前，没有。

我之前尝试通过 Wine 运行 Visual Studio 2010 Express for Windows Phone ( [http://www.microsoft.com/visualstudio/en-us/products/2010-editions/windows-phone-developer-tools](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/windows-phone-developer-tools) ) 但它无法工作正确地没有给我带来问题。最重要的是，您仍然需要 Zune 来允许部署应用程序。

# c# - 可重用类库实现

> ID：12198522
> 
> 赞同：0
> 
> 时间：2012-08-30T13:54:24.557
> 
> 标签：c#, .net

我构建了一个可重用的类库来封装我的身份验证逻辑。我希望能够在多个项目中重用已编译的 *.dll。

我有什么作品。但是，关于我是如何进行引用的，或者我的类库是如何构建的，这并不完全正确。我需要你的帮助来弄清楚我在做什么 - 错误/不理解......

我有一个类库（`Authentication.dll`），其结构如下：

```
namespace AUTHENTICATION
{
    public static class authentication
    {
        public static Boolean Authenticate(long UserID, long AppID) {...}

        //...More Static Methods...//    
    }
} 
```

在我的依赖项目中，我添加了对 Authentication.dll 的引用，并添加了一个 using 指令...

```
using AUTHENTICATION; 
```

使用这种结构，我可以从我的依赖项目中调用我的 Authenticate 方法，就像这样......

```
authentication.Authenticate(1,1) 
```

我希望能够不必包含该“身份验证”。在从此类库中调用所有方法之前。那可能吗？如果是这样，我需要对我的类库进行哪些更改，或者我如何在我的依赖项目中实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:00:22.377

实现这一目标的唯一选择是在 Authentication 程序集中声明一个基类，您在依赖项目中继承该基类。

您可以将 Authenticate 公开为受保护的方法（或公共作品），并在不指定类名的情况下调用它。

```
public class MyClassInDependentProject : authentication
{
    public void DoSomething(int userId, long appId)
    {
        var success = Authenticate(userId, appId);
        …
    }
} 
```

也就是说，您很快就会发现这是一个**糟糕的设计**。它将横切关注点与各种其他类混为一谈，这些类现在被禁止从任何其他类继承。

*组合*是面向对象编程的核心原则，我们有成语“偏好组合胜过继承”。这仅仅意味着我们将复杂性分解为可管理的块（类，它们被实例化为对象），然后将这些对象组合在一起以处理复杂的处理。因此，您已经在类中封装了身份验证的某些方面，并以组合方式将其提供给其他类，以便它们可以将其用于身份验证。从概念上讲，将其视为可以做某事的对象会有所帮助。

打个比方，想想需要在桌子的顶部钻一个洞。您将钻头（对象）带入办公室（班级）。那时，简单地说“开”是没有意义的，因为“开”可以由您的风扇、您的灯、您的 PC 等（您班级中的其他对象）处理。您需要指定“Drill On”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:57:02.447

在 C# 中，没有类就不能存在函数。所以你总是需要为它定义一些东西，作为静态方法的类或对象方法的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:04:03.663

*   如果您在 C# 中创建类库，您应该学习使用现有的命名约定：[开发类库的设计指南](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/)

*   以下是您应该如何命名命名空间：[https ://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/interface](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/interface)

*   C#也是一种面向对象的语言，因此需要类（使用`Authentication`你应该命名你的类）。

*   数据源似乎也是硬编码的。您的类库用户（即使只是您）可能想要配置数据源。

*   谷歌关于单例以及为什么它今天被认为是一种反模式（在大多数情况下）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T13:58:08.687

您必须使用 Class 来调用您的方法，只需

什么时候静态类只是 NameClass.Method

当不是静态的，你必须创建实例，`ClassName ob = new ClassName(); ob.Method();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T13:58:13.670

像这样的调用格式是*class.method*，即使使用“使用”名称，您也无法使用“类”名称来逃避。有些东西必须“主持”这个功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T14:22:23.720

如果不使用 Jay 提到的基类方法，我认为您所要求的是不可能的。但是，如果您只想在调用时简化语法`Authenticate()`，那么这个愚蠢的解决方案（在需要进行身份验证的每个类中添加一个额外的方法）可能正是您想要的：

```
private static void DoAuth(long UserID, long AppID){
    authentication.Authenticate(UserID, AppID)
} 
```

如果 ID 在某些情况下始终相同，您也可以重载它：

```
private static void DoAuth(){
    DoAuth(1,1)
} 
```

是的，这*确实*意味着您必须在要进行身份验证的任何地方添加更多代码（这就是为什么它很愚蠢！;)）。然而，它也确实减少了这种情况：

```
authentication.Authenticate(1,1); 
```

...进入这个：

```
DoAuth(); 
```

我把这个成本/收益分析留给你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-11T08:58:07.133

我知道我迟到了 3 年，但这里什么都没有。

为了使您的代码更清晰和更具可读性，您应该为您想要拥有的所有可重用代码创建一个新的命名空间。然后在该命名空间中具有身份验证类和身份验证功能。

要使用它，您可以轻松地在命名空间上设置 using 并像您一样使用该功能

```
Authentication.Authenticate() 
```

但是要使用

```
Authenticate() 
```

就其本身而言，您始终可以使用 MyNamespace.Authentication; 并在您的代码中直接使用 Authenticate Function 。

# visual-studio-2010 - 如何使用 Visual Studio 订购执行的 TestMethods

> ID：12198523
> 
> 赞同：0
> 
> 时间：2012-08-30T13:54:24.603
> 
> 标签：visual-studio-2010, testing

我正在使用 VS 2010 编写测试用例

我有测试方法列表，我希望以特定顺序运行测试用例作为示例，这是我的测试方法很少。

```
[TestMethod]
public void AddEmployee()
{
   //
}

[TestMethod]
public void UpdateEmployee()
{
   //
}

[TestMethod]
public void DeleteEmployee()
{
   //
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:11:31.930

您可以使用“有序测试”：

[如何：创建有序测试](http://msdn.microsoft.com/en-us/library/ms182631.aspx)

测试最终列在 Visual Studio 执行的 XML 文件中。

# nokia - 诺基亚 S40 自动键盘锁定后游戏出现黑屏

> ID：12198524
> 
> 赞同：1
> 
> 时间：2012-08-30T13:54:26.257
> 
> 标签：nokia, nokia-s40

自动键盘锁定后，我解锁时出现空白屏幕，3-4秒后出现游戏字段。任何想法，如何避免这种行为？我希望解锁后立即显示游戏画布。

更新：

这是我的 startApp 方法：

```
public void startApp() {
   start();
}

 public void start() {

 instance = this;

display = Display.getDisplay(this);
display.setCurrent(myGame);
 } 
```

# red5 - centos 上的 red5 应用

> ID：12198529
> 
> 赞同：0
> 
> 时间：2012-08-30T13:54:40.660
> 
> 标签：red5

想请教一下在centos上搭建red5应用

我准备好所有文件和配置

```
APP_NAME
        => WEB-INF
           =>lib
           =>src
                => Application.java
           =>classes
                => Application.class
           =>build.xml
           =>red5-web.xml
           =>web.xml
           =>red5-web.properties
           =>log4j.properties
           =>build.properties 
```

一切都很好，建筑也很好，制作 jar 文件也很好

```
ant build 

ant build 

BUILD SUCCESSFUL 
```

但是当我重新启动我的 red5 服务器时，所有演示应用程序和我的新应用程序都不起作用

如果我创建新的 netConnection，我会收到此错误消息：

```
netconnection.connect.failed
netconnection.connect.closed 
```

请帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:42:41.093

Red5 可以作为独立服务器或战争部署安装。

过程是创建red5版本0.8（旧版本）的war部署。（冗长，请多多包涵）。

在 linux 上下载并安装 jdk1.6、glassfish2.1 和 netbeans 6.5。

下载“Red5War_0.8.0.war”。

我分享希望以下内容可以帮助社区按照 Netbeans 6.5 中使用的步骤在 glassfish2.1 上创建可部署的 war red5 版本 0.8：

第 1 步：解压缩 Red5War_0.8.0.war

第 2 步：在 Netbeans 中创建一个名为“red5”的 Web 项目

第三步：复制膨胀的war文件夹“/WEB-INF/classes”的内容，粘贴到Netbeans项目的“Source Packages”中。

第4步：右键单击“库”，添加“JAR/Folder”，导航到膨胀的war文件夹的“/WEB-INF/lib”，选择所有依赖jar并单击Netbeans项目的“打开”。

第 5 步：删除 Netbeans 项目的 WEB-INF（注意：忽略警告/错误）。

第6步：删除膨胀文件夹的META-INF。

第7步：将膨胀文件夹的剩余内容（“/WEB-INF/classes”和“/WEB-INF/lib”）复制到Netbeans项目的“Web Pages”中。

第八步：在防火墙中打开以下端口 TCP/843,TCP/1935,TCP/5229,TCP/5080

第 9 步：运行项目

第 10 步：在 Netbeans 项目文件夹 (../NetBeansProjects/red5/dist/) 中创建可部署的 war 文件“red.war”

同样，您可以创建新项目...

最好的祝愿！

阿鲁姆甘 AV

ps：请分享您在新版本 glassfish 服务器（3.x）上使用新版本 netbeans、jdk 创建新版本（1.0、1.0.1、1.02）战争部署的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:11:15.160

如果有启动或运行时异常，您应该首先检查 Red5 在“log”文件夹中生成的日志文件。您需要具备 Java 的最低知识以及如何读取 Java 日志文件才能使用 Red5 实施解决方案。

# blackberry - Blackberry ObjectChoiceField 不显示下拉列表

> ID：12198530
> 
> 赞同：1
> 
> 时间：2012-08-30T13:54:46.433
> 
> 标签：blackberry

ObjectChoiceField 不起作用，因为以下代码：

```
protected boolean navigationUnclick(int status, int time) {
    return true;
} 
```

我已添加此代码以删除 touchevent 上的菜单。意味着我已经制作了一个自定义底部选项卡并在屏幕上添加和删除垂直字段。当我触摸任何 Horizo​​ntalField 时，它会显示菜单，这就是我添加上述代码的原因。

这是我`ObjectChoiceField`在水平字段中添加的代码：

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.EncodedImage;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ObjectChoiceField;
import net.rim.device.api.ui.container.VerticalFieldManager;

import com.ec.pleasewaitpopup.PleaseWaitPopupScreen;
import com.np.naijapings.ApplicationFont;
import com.np.naijapings.Constant;
import com.np.naijapings.TabControlScreen;
import com.np.naijapings.intermediateclasses.GetUserListIntermediator;
import com.tv.servercommunication.WebServiceDetails;

public class FindUsersScreen extends VerticalFieldManager implements FieldChangeListener{

    private VerticalFieldManager _mainVfm;
    private VerticalFieldManager _contentVfm;

    private BitmapField _headerBmp;
    private EncodedImage _bitmap;

    private LabelField _gender;
    private LabelField _age;
    private LabelField _religion;

    private ObjectChoiceField _genderChoiceField;
    private ObjectChoiceField _ageChoiceField;
    private ObjectChoiceField _religionChoiceField;

    private ButtonField _findUser;

    private static String[] _genderChoices={"Both gender","Male","Female"};
    private static String[] _ageChoices={"Any age","18-25","26-30","31-35","36-45","46-50"};
    private String[] _religionChoices={"Any religion","Hindu","Muslim"};

    public FindUsersScreen(){
        //HEADER IMG
        _bitmap = EncodedImage.
        getEncodedImageResource("find-user_header.png");
        _headerBmp = new BitmapField(Constant.sizePic(_bitmap, _bitmap.getHeight(), _bitmap.getWidth()));

        //MAIN VFM
        _mainVfm=new VerticalFieldManager();

        //CONTENT VFM
        final Bitmap tabBackGroundImage = Bitmap
        .getBitmapResource("finduserscr_bg.png");
        _contentVfm=new VerticalFieldManager(){
            protected void paint(Graphics graphics) {
                int y = FindUsersScreen.this.getManager().getVerticalScroll();
                graphics.drawBitmap( 0, y, tabBackGroundImage.getWidth(), tabBackGroundImage.getHeight(), tabBackGroundImage, 0, 0 );
                super.paint( graphics );
                }
        };

        //CREATE WIDGETS
        _gender=new LabelField("Gender");
        _genderChoiceField=new ObjectChoiceField("Gender", _genderChoices,0){
            protected boolean touchEvent(TouchEvent message) {

                return super.touchEvent(message);
            }
        };
        _age=new LabelField("Age");
        _ageChoiceField=new ObjectChoiceField("Age", _ageChoices,0);
        _religion=new LabelField("Religion");
        _religionChoiceField=new ObjectChoiceField("Religion", _religionChoices,0);
        _findUser=new ButtonField("    Find Users    ",ButtonField.CONSUME_CLICK);

        _findUser.setChangeListener(this);

        //SET FONT TYPE
        /*_gender.setFont(ApplicationFont.labelFont_16);
        _genderChoiceField.setFont(ApplicationFont.labelFont_16);
        _ageChoiceField.setFont(ApplicationFont.labelFont_16);
        _age.setFont(ApplicationFont.labelFont_20);
        _religionChoiceField.setFont(ApplicationFont.labelFont_20);
        _religion.setFont(ApplicationFont.labelFont_20);
*/
        //SET MARGIN
        /*_gender.setMargin(5,20,5,20);
        _age.setMargin(5,20,5,20);
        _religion.setMargin(5,20,5,20);
    */
        _contentVfm.setMargin(15,30,15,0);
        _genderChoiceField.setMargin(10,5,5,5);
        _religionChoiceField.setMargin(10,5,5,5);
        _ageChoiceField.setMargin(10,5,5,5);
        _findUser.setMargin(10,80,20,80);
        _contentVfm.setMargin(30,10,30,10);

        //ADD FIELDS TO CONTENT VFM
        //_contentVfm.add(_gender);
        _contentVfm.add(_genderChoiceField);
        //_contentVfm.add(_age);
        _contentVfm.add(_ageChoiceField);
        //_contentVfm.add(_religion);
        _contentVfm.add(_religionChoiceField);
        _contentVfm.add(_findUser);
        _mainVfm.add(_headerBmp);
        _mainVfm.add(_contentVfm);
        add(_mainVfm);
    }

    public void fieldChanged(Field field, int context) {
        if(field==_findUser){
            Object obAgeRange = _ageChoiceField.getChoice(_ageChoiceField.getSelectedIndex());
            String ageRange = obAgeRange.toString();

            Object obgender = _genderChoiceField.getChoice(_genderChoiceField.getSelectedIndex());
            String gender = obgender.toString();

            Object obReligion = _religionChoiceField.getChoice(_religionChoiceField.getSelectedIndex());
            String religion = obReligion.toString();

            GetUserListIntermediator getUserListIntermediator=new GetUserListIntermediator(ageRange,gender,religion);
            PleaseWaitPopupScreen.showScreenAndWait(getUserListIntermediator, Constant.PLEASE_WAIT_TEXT);
        }
    }

} 
```

谁能回答我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:40:16.320

您没有得到下拉列表，因为字段代码不处理`unclick`事件。`return true;`在您的字段可以处理它之前，您已经拦截并使用了此事件（通过）。

为您的事件处理程序尝试此代码。

```
protected boolean navigationUnclick(int status, int time) {
        super.navigationUnclick(status, time);
        return true;
} 
```

# hibernate - struts 1 抛出 org.hibernate.TransientObjectException

> ID：12198531
> 
> 赞同：0
> 
> 时间：2012-08-30T13:54:49.420
> 
> 标签：hibernate, struts-1

我正在尝试向我的 struts 1 应用程序添加活动审计。我更改了一个对象，然后我想在我的审计表中创建一个引用更改的对象的行。我收到 TransientObjectException 是因为我更改了引用对象。我尝试刷新会话，但这并没有解决它，我不知道为什么。

```
merchant.setTrusted(false);
merchantDAO.saveOrUpdate(merchant);
// trying to resolve org.hibernate.PropertyValueException: not-null property references a null or transient value: com.rc.model.ActivityAudit.user
SessionManagerFactory.getSessionManager(DatasourceType.M).getSession().flush();

ActivityAuditManager.addActivityAudit("Set merchant to untrusted", merchant, userAccount); 
```

其中 ActivityAuditManager.addActivityAudit() 是：

```
public static void addActivityAudit(String action, Merchant merchant, IMerchantUserAccount user) {
    ActivityAudit activityAudit = new ActivityAudit(merchant, action, user, new Date());
    activityAuditDAO.saveOrUpdate(activityAudit);
} 
```

我得到的例外是：

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing 
```

但据我所知，我*是*。

ETA映射：

```
<class name="com.rc.model.ActivityAudit" table="activity_audit" discriminator-value="0">
...
    <many-to-one name="merchant" class="com.rc.model.Merchant"
                 column="merchantid" unique="false" not-null="true" cascade="none"/>
... 
```

我试过了`cascade="all"`，`cascade="save-update"`但都没有改善这种情况。

ETA：请参阅下面我自己的答案，但`cascade="save-update"`实际上确实修复了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:06:59.643

有两个问题。第二个是在我修复第一个时发现的，最初掩盖了`cascade="save-update"`实际上确实解决了这个问题的事实。

在这个问题中， [对象引用了一个未保存的瞬态实例——在刷新之前保存瞬态实例](https://stackoverflow.com/questions/2302802/object-references-an-unsaved-transient-instance-save-the-transient-instance-be) 用户[nanospeck](https://stackoverflow.com/users/951984/nanospeck)发布了一个调试方法，对我有很大帮助。

直到我使用该调试方法并更详细地检查了异常时，我才注意到第二个问题。

# c# - NHibernate - 是否应该在保存父对象时更新所有子对象，当级联保存更新时？

> ID：12198536
> 
> 赞同：0
> 
> 时间：2012-08-30T13:55:04.547
> 
> 标签：c#, nhibernate

我有一个双向的一对多关系，在映射的两端定义了 cascade="all"，在一对多端定义了 inverse="true"。

当我调用 SaveOrUpdate 一个新实体时，它会在父表中正确插入一行，然后在子表中插入所有子对象。

但是，如果我有一个现有实体并更新子对象的某些属性（比如更改某些字符串属性），然后在父实体上调用 SaveOrUpdate，它只会更新父表中的信息。我期待它也能更新所有子实体。

这是预期的行为吗？我是否需要自己手动更新所有子对象？我不确定我的映射是否搞砸了（在这种情况下，我会将它们添加到问题中）或者这是否是 NHibernate 的行为方式。

编辑：发现错误；键盘和椅子之间像往常一样存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:20:45.790

没关系，我只是愚蠢地更新了一个没有映射到任何列的属性。

看起来 NH 将更新只需要更新的子记录。

# python - 使用 Python 2.7.3 的自动背景更换器不起作用，尽管它应该

> ID：12198538
> 
> 赞同：2
> 
> 时间：2012-08-30T13:55:09.033
> 
> 标签：python, bash, ubuntu, python-2.7, gnome

一般来说，我对 Ubuntu/Python/Bash/Gnome 很陌生，所以我仍然觉得我有可能做错了什么，但现在已经 3 天没有成功了......

这是脚本应该做的：
* [✓] 从 wallbase.cc 下载 1 张随机图像
* [✓] 将其保存到脚本运行的同一目录
* [x] 将其设置为壁纸

有两次尝试使用不同的命令设置两个壁纸，但在脚本中均无效。有一个打印语句（从底部算起的第 2 行）吐出正确的终端命令，因为我可以 C&P 打印结果并且它工作正常，只是在脚本中执行时它不起作用。

```
#!/usr/bin/env python
import urllib2
import os
from gi.repository import Gio

response = urllib2.urlopen("http://wallbase.cc/random/12/eqeq/1366x768/0.000/100/32")
page_source = response.read()
thlink_pos = page_source.find("ico-X")
address_start = (page_source.find("href=\"", thlink_pos) + 6)
address_end = page_source.find("\"", address_start + 1)

response = urllib2.urlopen(page_source[address_start:address_end])
page_source = response.read()

bigwall_pos = page_source.find("bigwall")
address_start = (page_source.find("src=\"", bigwall_pos) + 5)
address_end = page_source.find("\"", address_start + 1)

address = page_source[address_start:address_end]

slash_pos = address.rfind("/") + 1

pic_name = address[slash_pos:]

bashCommand = "wget " + page_source[address_start:address_end]
os.system(bashCommand)

print "Does my new image exists?", os.path.exists(os.getcwd() + "/" + pic_name)

#attempt 1
settings = Gio.Settings.new("org.gnome.desktop.background")
settings.set_string("picture-uri", "file://" + os.getcwd() + "/" + pic_name)
settings.apply()

#attempt 2
bashCommand = "gsettings set org.gnome.desktop.background picture-uri file://" + os.getcwd() + "/" + pic_name
print bashCommand
os.system(bashCommand)
settings.apply() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:01:32.043

您已成功更改设置，但仍未应用，请尝试下一步：

```
settings.apply() 
```

设置“picture-uri”字符串后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:21:01.813

它适用于我（Ubuntu 12.04）。

我修改了你的脚本（与你的错误无关）：

```
#!/usr/bin/python
"""Set desktop background using random images from http://wallbase.cc

It uses `gi.repository.Gio.Settings` to set the background.
"""
import functools
import itertools
import logging
import os
import posixpath
import random
import re
import sys
import time
import urllib
import urllib2
import urlparse
from collections import namedtuple

from bs4 import BeautifulSoup  # $ sudo apt-get install python-bs4
from gi.repository.Gio import Settings  # pylint: disable=F0401,E0611

DEFAULT_IMAGE_DIR = os.path.expanduser('~/Pictures/backgrounds')
HTMLPAGE_SIZE_MAX = 1 << 20  # bytes
TIMEOUT_MIN = 300  # seconds
TIMEOUT_DELTA = 30  # jitter

# "Anime/Manga", "Wallpapers/General", "High Resolution Images"
CATEGORY_W, CATEGORY_WG, CATEGORY_HR = range(1, 4)
PURITY_SFW, PURITY_SKETCHY, PURITY_NSFW, PURITY_DEFAULT = 4, 2, 1, 0
DAY_IN_SECONDS = 86400

UrlRetreiveResult = namedtuple('UrlRetreiveResult', "path headers")

def set_background(image_path, check_exist=True):
    """Change desktop background to image pointed by `image_path`.

    """
    if check_exist:  # make sure we can read it (at this time)
        with open(image_path, 'rb') as f:
            f.read(1)

    # prepare uri
    path = os.path.abspath(image_path)
    if isinstance(path, unicode):  # quote() doesn't like unicode
        path = path.encode('utf-8')
    uri = 'file://' + urllib.quote(path)

    # change background
    bg_setting = Settings.new('org.gnome.desktop.background')
    bg_setting.set_string('picture-uri', uri)
    bg_setting.apply()

def url2filename(url):
    """Return basename corresponding to url.

    >>> url2filename('http://example.com/path/to/file?opt=1')
    'file'
    """
    urlpath = urlparse.urlsplit(url).path  # pylint: disable=E1103
    basename = posixpath.basename(urllib.unquote(urlpath))
    if os.path.basename(basename) != basename:
        raise ValueError  # refuse 'dir%5Cbasename.ext' on Windows
    return basename

def download(url, dirpath, extensions=True, filename=None):
    """Download url to dirpath.

    Use basename of the url path as a filename.
    Create destination directory if necessary.

    Use `extensions` to require the file to have an extension or any
    of in a given sequence of extensions.

    Return (path, headers) on success.
    Don't retrieve url if path exists (headers are None in this case).
    """
    if not os.path.isdir(dirpath):
        os.makedirs(dirpath)
        logging.info('created directory %s', dirpath)

    # get filename from the url
    filename = url2filename(url) if filename is None else filename
    if os.path.basename(filename) != filename:
        logging.critical('filename must not have path separator in it "%s"',
                         filename)
        return

    if extensions:
        # require the file to have an extension
        root, ext = os.path.splitext(filename)
        if root and len(ext) > 1:
            # require the extension to be in the list
            try:
                it = iter(extensions)
            except TypeError:
                pass
            else:
                if ext not in it:
                    logging.warn(("file extension is not in the list"
                                  " url=%s"
                                  " extensions=%s"),
                                 url, extensions)
                    return
        else:
            logging.warn("file has no extension url=%s", url)
            return

    # download file
    path = os.path.join(dirpath, filename)
    logging.info("%s\n%s", url, path)
    if os.path.exists(path):  # don't retrieve if path exists
        logging.info('path exists')
        return UrlRetreiveResult(path, None)
    try:
        return UrlRetreiveResult(*urllib.urlretrieve(url, path,
                                                     _print_download_status))
    except IOError:
        logging.warn('failed to download {url} -> {path}'.format(
            url=url, path=path))

def _print_download_status(block_count, block_size, total_size):
    logging.debug('%10s bytes of %s', block_count * block_size, total_size)

def min_time_between_calls(min_delay):
    """Enforce minimum time delay between calls."""
    def decorator(func):
        lastcall = [None]  # emulate nonlocal keyword

        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            if lastcall[0] is not None:
                delay = time.time() - lastcall[0]
                if delay < min_delay:
                    _sleep(min_delay - delay)
            lastcall[0] = time.time()
            return func(*args, **kwargs)
        return wrapper
    return decorator

@min_time_between_calls(5)
def _makesoup(url):
    try:
        logging.info(vars(url) if isinstance(url, urllib2.Request) else url)
        page = urllib2.urlopen(url)
        soup = BeautifulSoup(page.read(HTMLPAGE_SIZE_MAX))
        return soup
    except (IOError, OSError) as e:
        logging.warn('failed to return soup for %s, error: %s',
                     getattr(url, 'get_full_url', lambda: url)(), e)

class WallbaseImages:
    """Given parameters it provides image urls to download."""

    def __init__(self,
                 categories=None,  # default; sequence of CATEGORY_*
                 resolution_exactly=True,  # False means 'at least'
                 resolution=None,  # all; (width, height)
                 aspect_ratios=None,  # all; sequence eg, [(5,4),(16,9)]
                 purity=PURITY_DEFAULT,  # combine with |
                 thumbs_per_page=None,  # default; an integer
                 ):
        """See usage below."""
        self.categories = categories
        self.resolution_exactly = resolution_exactly
        self.resolution = resolution
        self.aspect_ratios = aspect_ratios
        self.purity = purity
        self.thumbs_per_page = thumbs_per_page

    def _as_request(self):
        """Create a urllib2.Request() using given parameters."""
        # make url
        if self.categories is not None:
            categories = "".join(str(n) for n in (2, 1, 3)
                                 if n in self.categories)
        else:  # default
            categories = "0"

        if self.resolution_exactly:
            at_least_or_exactly_resolution = "eqeq"
        else:
            at_least_or_exactly_resolution = "gteq"

        if self.resolution is not None:
            resolution = "{width:d}x{height:d}".format(
                width=self.resolution[0], height=self.resolution[1])
        else:
            resolution = "0x0"

        if self.aspect_ratios is not None:
            aspect_ratios = "+".join("%.2f" % (w / float(h),)
                                     for w, h in self.aspect_ratios)
        else:  # default
            aspect_ratios = "0"

        purity = "{0:03b}".format(self.purity)
        thumbs = 20 if self.thumbs_per_page is None else self.thumbs_per_page
        url = ("http://wallbase.cc/random/"
               "{categories}/"
               "{at_least_or_exactly_resolution}/{resolution}/"
               "{aspect_ratios}/"
               "{purity}/{thumbs:d}").format(**locals())
        logging.info(url)
        # make post data
        data = urllib.urlencode(dict(query='', board=categories, nsfw=purity,
                                     res=resolution,
                                     res_opt=at_least_or_exactly_resolution,
                                     aspect=aspect_ratios,
                                     thpp=thumbs))
        req = urllib2.Request(url, data)
        return req

    def __iter__(self):
        """Yield background image urls."""
        # find links to bigwall pages
        # css-like: #thumbs div[class="thumb"] \
        #      a[class~="thlink" and href^="http://"]
        soup = _makesoup(self._as_request())
        if not soup:
            logging.warn("can't retrieve the main page")
            return
        thumbs_soup = soup.find(id="thumbs")
        for thumb in thumbs_soup.find_all('div', {'class': "thumb"}):
            bigwall_a = thumb.find('a', {'class': "thlink",
                                         'href': re.compile(r"^http://")})
            if bigwall_a is None:
                logging.warn("can't find thlink link")
                continue  # try the next thumb

            # find image url on the bigwall page
            # css-like: #bigwall > img[alt and src^="http://"]
            bigwall_soup = _makesoup(bigwall_a['href'])
            if bigwall_soup is not None:
                bigwall = bigwall_soup.find(id='bigwall')
                if bigwall is not None:
                    img = bigwall.find('img',
                                       src=re.compile(r"(?i)^http://.*\.jpg$"),
                                       alt=True)
                    if img is not None:
                        url = img['src']
                        filename = url2filename(url)
                        if filename.lower().endswith('.jpg'):
                            yield url, filename  # successfully found image url
                        else:
                            logging.warn('suspicious url "%s"', url)
                        continue
            logging.warn("can't parse bigwall page")

def main():
    level = logging.INFO
    if '-d' in sys.argv:
        sys.argv.remove('-d')
        level = logging.DEBUG
    # configure logging
    logging.basicConfig(format='%(levelname)s: %(asctime)s %(message)s',
                        level=level, datefmt='%Y-%m-%d %H:%M:%S %Z')

    if len(sys.argv) > 1:
        backgrounds_dir = sys.argv[1]
    else:
        backgrounds_dir = DEFAULT_IMAGE_DIR

    # infinite loop: Press Ctrl+C to interrupt it
    #NOTE: here's some arbitrary logic: modify for you needs e.g., break
    # after the first image found
    timeout = TIMEOUT_MIN  # seconds
    for i in itertools.cycle(xrange(timeout, DAY_IN_SECONDS)):
        found = False
        try:
            for url, filename in WallbaseImages(
                    categories=[CATEGORY_WG, CATEGORY_HR, CATEGORY_W],
                    purity=PURITY_SFW,
                    thumbs_per_page=60):
                res = download(url, backgrounds_dir, extensions=('.jpg',),
                               filename=filename)
                if res and res.path:
                    found = True
                    set_background(res.path)
                # don't hammer the site
                timeout = max(TIMEOUT_MIN, i % DAY_IN_SECONDS)
                _sleep(random.randint(timeout, timeout + TIMEOUT_DELTA))
        except Exception:  # pylint: disable=W0703
            logging.exception('unexpected error')
            _sleep(timeout)
        else:
            if not found:
                logging.error('failed to retrieve any images')
                _sleep(timeout)
        timeout = (timeout * 2) % DAY_IN_SECONDS

def _sleep(timeout):
    """Add logging to time.sleep() call."""
    logging.debug('sleep for %s seconds', timeout)
    time.sleep(timeout)

main() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T22:41:14.527

尝试实现一个 python 脚本，该脚本使用 PIL 库在图像上写入文本，然后使用 Gio 类更新 Gnome 背景“picture-uri”以指向该图像。python 脚本将在两个图像之间进行 ping pong 以始终修改未使用的图像，然后尝试通过更新设置来“切换”。这样做是为了避免任何闪烁，因为修改当前背景直接将其暂时删除。在 shell 中并直接调用脚本时，我很少看到任何问题，但在 cronjob 中它根本不会在 pong 上更新。我同时使用了同步和应用，并且在尝试切换图像之前会等待几分钟。没用。尝试 cron 作为用户（su -c "cmd" 用户），但也没有用。

当我注意到 Gnome 会检测到后台文件中的任何更改并进行更新时，我终于放弃了乒乓球方法。所以放弃了 ping pong 方法并转到一个临时文件，我只是使用 shutil 库在当前背景上复制它。奇迹般有效。

# php - 运行大型 MySQL 查询时网站响应缓慢（所有其他用户）

> ID：12198543
> 
> 赞同：5
> 
> 时间：2012-08-30T13:55:29.423
> 
> 标签：php, mysql

这似乎是一个显而易见的问题，但我们有一个在 Windows 2008 服务器上运行的 PHP/MySQL 应用程序。该服务器总共运行了大约 10 个不同的站点。相关站点上的管理选项允许管理员（通过站点）运行巨大的报告，在某些情况下可能需要大约 10 分钟。这些报告是在屏幕上显示数据的巨大 mysql 查询。当这些报告运行时，所有用户的整个站点都会变慢。所以我的问题是：

*   是否有一种简单的方法来分配服务器资源，因此如果（网站）管理员运行报告，其他用户仍然可以访问该网站而不会出现性能问题？
*   即使运行报告会为该站点的所有用户终止该网站，但它不会影响同一服务器上的其他站点。这是为什么？
*   如前所述，生成报告可能需要大约 10 分钟 - 在网站上提供此类报告是否是不好的做法？这些通常是由夜间计划任务生成的吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:01:25.990

您放在服务器上的负载很可能与应用程序无关，但您可能正在抨击的 mysql 表。大多数人通过在停机时间生成报告或使用 mysql 复制来拥有一个纯粹用于报告的第二个数据库来解决这个问题。

我建议尝试进行一些服务器监控以查看实际情况。我认为 Newrelic 刚刚发布了其平台的 Windows 版本，我认为您可以免费试用 30 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:02:07.143

我强烈建议您安装一个复制的 MySQL 服务器，然后在其上运行大型管理员查询（自然只选择），以避免您的网站被阻止的负担！如果每秒没有太多事务，您甚至可以从生产服务器远程在台式计算机上运行副本，从而在异地备份您的数据库！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:02:16.317

有`LOW_PRIORITY`标志，但我不确定这是否会产生任何积极影响，因为它很可能是您遇到的表/行锁定问题。`SHOW PROCESSLIST;`您可以通过使用查询来了解正在发生的事情。

如果其他网站运行良好，则更有可能是由于数据库锁定（导致您的 Web 进程等待锁定被释放）。

最后，始终建议在夜间（或在服务器负载最小时）运行大型报告查询。拥有一个[读取复制的从属](http://dev.mysql.com/doc/refman/5.0/en/replication-solutions-backups.html)设备也会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:16:45.590

100% 确定您已添加所有必要的索引吗？

除非您缺少索引，否则您需要拥有一个非常大的网站才能遇到此类问题。

确保你有正确的索引，并确保你没有 varchar 的连接字段，不是很快。

我有一个数据库，其中包含很多大表和数百万条全天候运行的记录。

由于适当的索引，有大量活动和自动化服务处理它而不会出现问题。

# java - 在 Java 中将字符串映射到其他字符串

> ID：12198544
> 
> 赞同：-4
> 
> 时间：2012-08-30T13:55:30.303
> 
> 标签：java, string, comparison

如果 ud = u , du = d , uu = d , dd = u

如果我得到输出“uu du ud”有没有办法得到这样的输出

```
uu du ud  ---Output already got

d  d  u   ---Because uu=d  du=d  ud=u

  u   u   ---Because dd=u  and the other u comes down

    d     ---finally uu=d so the output is d. 
```

我在获得这种输出时遇到问题，因为我不太了解 java。我写的代码是

```
public class Test
{
  public static void main(String[] args)
  {

    int count = 0;
    int index = 0;
    Scanner scan = new Scanner(System.in);

    System.out.print("How many Line Paremeters?");
    int amount = scan.nextInt();

    // One array to hold all the names
    String[] name = new String[amount];

    System.out.print("You entered "
        + amount + " as the size of your name list.");
    System.out.println(" ");

    // Ask for all the names
    for (index = 0; index < amount; index++)
    {
      System.out.print("Enter Line Paremeters: ");
      name[index] = scan.next();
    }

    System.out.println(" ");
    System.out.println("The order: ");
    System.out.println(" ");
    System.out.println();

    for (String names1 : name)
    {
      System.out.print(names1 + " ");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:09:24.123

如果我理解正确，您已经有了字符串“uu du ud”，并且您想根据以下规则“减少”它：ud = u、du = d、uu = d、dd = u，任何剩余的字符都会“来”下”，正如你所说。为此，您需要编写一个递归函数或一个迭代循环（根据注释），以 2 个字符长的子字符串块检查字符串，并根据您的规则进行替换。我不愿意提供任何进一步的帮助，因为正如@DuncanJones 所问的那样，这似乎是家庭作业。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T13:58:47.863

将使用 Java 中的 equals 方法比较字符串是否相等：

string1.equals(string2)

如果您必须与常量字符串进行比较，请始终将常量字符串放在左侧，这样您就不需要检查 Null。

"abc".equals(string3)

# .net - 流式传输 Socket.Receive 会阻塞直到它填满缓冲区？

> ID：12198545
> 
> 赞同：0
> 
> 时间：2012-08-30T13:55:30.833
> 
> 标签：.net, sockets, streaming

我想接收数据流。因此，有时数据可能会枯竭。`Receive`在这种情况下，如果该方法返回它迄今为止收到的内容，那就太好了。

当我使用 .Net`Socket`并调用它的`Receive`方法时，该调用是否会阻塞，直到它能够完全填满缓冲区？或者它会在它能够返回至少 1 个字节后立即返回吗？（假设套接字未关闭）

如果我明确地传递一个大小参数有关系吗？异步方法`BeginReceive`会有什么影响吗？（我猜这两种情况下的行为都是一样的）

阅读[此答案](https://stackoverflow.com/a/6775218/15200)时，您似乎应该始终期望缓冲区被填充，因为它建议您执行`while (bytesRead == bytesRequested)`. [但是MSDN 文档](http://msdn.microsoft.com/en-us/library/26f591ax%28v=vs.100%29.aspx)中的一个示例使用了`while (bytesRead > 0)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:31:03.863

网络堆栈将为您提供可用的最小值（在内核中缓冲）和您提供的应用程序缓冲区的大小。这里的技巧是，如果*还没有*数据可用，常规接收将阻塞，这就是您提供的这两个语句之间的区别`while`- 第一个在短读时中断，这可能表明您的下一次读取将阻塞，而第二个一个寻找流结束，即从另一侧关闭的套接字。

# java - 通用写入器/输出器。Reader 对 Iterator 来说是什么，Writer 对 X 来说是什么？

> ID：12198546
> 
> 赞同：3
> 
> 时间：2012-08-30T13:55:32.650
> 
> 标签：java, iterator, guava

在 Java 中[`Reader`](http://docs.oracle.com/javase/6/docs/api/java/io/Reader.html)，用于**拉取**对象（而不是字符）的 a 的抽象版本是[`Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html).

问题是有一个抽象版本`Appendable`或者[`Writer`](http://docs.oracle.com/javase/6/docs/api/java/io/Writer.html)我可以在哪里**推送**对象（即接口）？

过去我只是制作自己的界面，例如：

```
public interface Pusher<T> {
    public void push(T o);
} 
```

是否有在大多数环境中可用的通用接口，有人知道这是有意义的，所以我不必继续创建上述接口？

**更新：**

这是一个有用的示例：

```
public void findBadCategories(final Appendable a)  {
    String q = sql.getSql("product-category-bad");
    jdbcTemplate.query(q, new RowCallbackHandler() {
        @Override
        public void processRow(ResultSet rs) throws SQLException {
            String id = rs.getString("product_category_id");
            String name = rs.getString("category_name");
            if (! categoryMap.containsKey(id)) {
                try {
                    a.append(id + "\t" + name + "\n");
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        }
    });
} 
```

我在`Appendable`这里使用，但我更愿意有我的`Pusher`回调。相信我，一旦[Java 8 出来，我只会使用闭包，但闭包仍然需要一个接口](http://cr.openjdk.java.net/~briangoetz/lambda/collections-overview.html)。

最后，我之前选择的另一个选项是完全违反 Guava 的[`Predicate`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicate.html)or `Function`（尽管这看起来更糟）。它违反了合同，因为这些目标是幂等的（尽管我想如果你`true`一直返回......）。

[由于它的AbstractIterator](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/AbstractIterator.html)，Guava 确实提供了与 Python 的生成器类似的东西。

我向 Guava 添加了一个[增强问题，](http://code.google.com/p/guava-libraries/issues/detail?id=1129)但我同意他们的观点，即添加这样的基本内容并不是他们的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:06:30.667

在现在的几个项目中，我为此目的定义了我称之为*sink*的东西：

```
interface Sink<T> {
  void put(T contribution);
} 
```

这样，产生 type 对象的方法`T`将需要 type 的参数`Sink<? super T>`。

出现了几个设计问题：

*   如声明的那样，`Sink#put()`不引发检查异常。这不适用于通常抛出的 I/O 操作`IOException`。为了解决这个问题，您可以添加一个类型参数来扩展`Exception`并宣传`put()`抛出此类型，但此时，如果您对价值消费的本质了解很多，您最好为它定义一个自定义接口。

*   如声明的那样，`Sink#put()`不返回值。无法向调用者指示该值是否被接受。

*   使用像这样的通用接口，您被迫将原始类型的贡献装箱，例如`int`and `char`，这也意味着它们可以为空。考虑用 注释`contribution`参数`@NonNull`。

为了配合这种类型，与 Petr Pudlák 在他的回答中提到的*生成器*概念相关，我定义了一个*源*接口：

```
interface Source<T> {
  T get();
} 
```

寻求`T`从此类来源中提取类型项目的方法需要一个类型参数`Source<? extends T>`。

为了协调并发进程之间的通道，我定义了两者`Sink#put()`并`Source#get()`抛出`InterruptedException`：

```
interface Sink<T> {
  void put(T contribution) throws InterruptedException;
}

interface Source<T> {
  T get() throws InterruptedException;
} 
```

这些类似于[Doug Lea 的原始](http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html) [`Puttable`](http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/Puttable.java)接口和[`Takable`](http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/Takable.java)未将其放入包中的接口，尽管缺少与定时等待和方法`java.util.concurrent`等效的接口。`Puttable#offer()``Takable#poll()`

然后出现了可以轻松组合的各种实现，例如交换器、过滤器和转换器。

除了我自己的库之外，我还看到 Guava 库为与[散列相关的目的](http://code.google.com/p/guava-libraries/wiki/HashingExplained)[`PrimitiveSink`](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/hash/PrimitiveSink.java)提供和[`Funnel`](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/hash/Funnel.java)类型。您可能会发现这些也是有用的抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:24:47.493

关于这个问题可以有几种观点：

1.  迭代器的对偶是[生成器](https://en.wikipedia.org/wiki/Generator_(computer_science))。迭代器“使用”集合中的值，生成器“提供”它们。但是生成器与编写器有点不同。对于作家来说，您决定何时将元素推入其中。另一方面，生成器为您提供一系列值，一个接一个。Java 对生成器没有任何特定的语言支持。另请参阅[迭代器和生成器之间有什么区别？](https://stackoverflow.com/questions/1022564/what-is-the-difference-between-an-iterator-and-a-generator)

2.  与迭代器相反的是您可以将值推入其中。我不认为Java对此有任何抽象。我看到的关闭是 Scala 的[Growable](http://www.scala-lang.org/api/current/index.html#scala.collection.generic.Growable)（忽略`clear()`方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:58:36.273

这是我决定做的（我认为这是其他人给出的最佳选择：P）。

我将**向后移植 Java 8 的 Lambda 类**( `java.util.functions.*`)。特别是这个：

```
/**
 * Performs operations upon an input object which may modify that object and/or
 * external state (other objects).
 *
 * <p>All block implementations are expected to:
 * <ul>
 * <li>When used for aggregate operations upon many elements blocks
 * should not assume that the {@code apply} operation will be called upon
 * elements in any specific order.</li>
 * </ul>
 *
 * @param <T> The type of input objects to {@code apply}.
 */
public interface Block<T> {
/**
 * Performs operations upon the provided object which may modify that object
 * and/or external state.
 *
 * @param t an input object
 */
void apply(T t);

// Some extension methods that I'll have to do with below.
} 
```

基本上，我将创建一个新的命名空间`com.snaphop.backport.java.util.functions.*`，并在接口上移动并让它们与 Guava 一起使用。显然我不会有 lambda 语法或扩展方法，但我可以解决这些问题。然后理论上，当 Java 8 出现时，我所要做的就是进行名称空间切换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:04:05.080

最接近的是[Observable](http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html)但它并没有被太多使用。

```
public update(Observable o, Object arg) 
```

我不会使用 Iterable 而不是 Reader，我会创建一个您选择的消费者。

一个常见的模式是不使用接口而是使用注释。

例如

```
@Subscriber
public void onUpdate(Update update) { }

@Subscriber
public void onInsert(Insert insert) { }

@Subscriber
public void onDelete(Delete delete) { } 
```

当这个类被添加为一个监听器时，它订阅`Update`,`Insert`和`Delete`对象，并忽略任何其他的。这允许一个对象以类型安全的方式订阅不同类型的消息。

# sql - 使用 SQL 对行进行分组并设置等于下一行中的值

> ID：12198550
> 
> 赞同：0
> 
> 时间：2012-08-30T13:55:39.813
> 
> 标签：sql, sql-server-2008, row, grouping

我有一个如下所示的数据表：

```
ID |   EventName   |     StartTime      |     EndTime     |
 1       Event1      2012-08-08 10:00:00         ???
 2       Event1      2012-08-08 10:15:00         ???
 3       Event1      2012-08-08 11:35:00         ???
 4       Event2      2012-08-08 11:50:00         ???
 5       Event2      2012-08-08 12:05:00         ???
 6       Event1      2012-08-08 12:23:00         ???
 7       Event1      2012-08-08 12:40:00         ???
 8       Event2      2012-08-08 13:47:00         ??? 
```

该数据旨在显示事件 1 从 10 点开始，一直运行到 11:50（事件 2 的开始时间）。事件 2 然后从 11:50 运行到 12:23，此时事件 1 再次启动。

我想将相同事件的块分组并将事件的结束时间设置为下一个事件的开始时间。结果表应如下所示：

```
EventName   |        StartTime         |        EndTime        |
 Event1         2012-08-08 10:00:00        2012-08-08 11:50:00 
 Event2         2012-08-08 11:50:00        2012-08-08 12:23:00
 Event1         2012-08-08 12:23:00        2012-08-08 13:47:00
 Event2         2012-08-08 13:47:00        NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:57:15.417

正如有人所说，使用游标是一种很好的方法——我已经对此进行了测试，并在表变量中提供了一个测试表。请把它放在一个查询窗口中并测试它，用你的表名替换变量。

@Events 包含：

活动 1 - 10:00

活动 1 - 10:15

活动 1 - 11:35

活动 2 - 11:50

活动 1 - 11:55

输出是：

活动一 10:00 11:50

活动二 11:50 11:55

活动一 11:55 NULL

```
DECLARE @Events AS TABLE
    (
      ID INT IDENTITY(1, 1) ,
      EventName VARCHAR(50) ,
      StartTime DATETIME ,
      EndTime DATETIME
    )

INSERT  INTO @Events
        ( EventName ,
          StartTime ,
          EndTime
        )
VALUES  ( 'Event1' ,
          '2012-08-08 10:00:00' ,
          NULL  
        )
INSERT  INTO @Events
        ( EventName ,
          StartTime ,
          EndTime
        )
VALUES  ( 'Event1' ,
          '2012-08-08 10:15:00' ,
          NULL  
        )
INSERT  INTO @Events
        ( EventName ,
          StartTime ,
          EndTime
        )
VALUES  ( 'Event1' ,
          '2012-08-08 11:35:00' ,
          NULL  
        )
INSERT  INTO @Events
        ( EventName ,
          StartTime ,
          EndTime
        )
VALUES  ( 'Event2' ,
          '2012-08-08 11:50:00' ,
          NULL  
        )
        INSERT  INTO @Events
        ( EventName ,
          StartTime ,
          EndTime
        )
VALUES  ( 'Event1' ,
          '2012-08-08 11:55:00' ,
          NULL  
        )
DECLARE @CurrentEvent AS VARCHAR(100) ,
    @CurrentStartTime AS DATETIME ,
    @EndTime AS DATETIME ,
    @CursorEvent AS VARCHAR(100) ,
    @EventsToDelete AS INT
SET @EventsToDelete = ( SELECT  COUNT(*)
                        FROM    @Events
                      )
SELECT TOP 1
        @CurrentEvent = EventName ,
        @CurrentStartTime = StartTime
FROM    @Events
DECLARE EventsCursor CURSOR
FOR
    SELECT  EventName ,
            StartTime
    FROM    @Events
    ORDER BY EndTime ASC
OPEN EventsCursor
FETCH NEXT FROM EventsCursor INTO @CursorEvent, @EndTime
WHILE @@FETCH_STATUS = 0 
    BEGIN
        IF NOT @CursorEvent = @CurrentEvent 
            BEGIN
                INSERT  INTO @Events
                        ( EventName ,
                          StartTime ,
                          EndTime
                        )
                VALUES  ( @CurrentEvent ,
                          @CurrentStartTime ,
                          @EndTime  
                        )
                SET @CurrentEvent = @CursorEvent
                SET @CurrentStartTime = @EndTime
            END
           FETCH NEXT FROM EventsCursor INTO @CursorEvent, @EndTime 
    END
CLOSE EventsCursor
DEALLOCATE EventsCursor

DELETE  FROM @Events
WHERE   ID < @EventsToDelete

SELECT * FROM @Events ORDER BY StartTime 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/4014/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:14:45.520

您可以使用游标一次获取每一行。

获取时：

1.  从第一行获取事件名称和开始时间
2.  从具有不同事件名称的第一行获取结束时间（该行也是下一个事件名称和统计时间）。
3.  将事件名称、开始时间和结束时间插入`#temptable`.

在最后，从`#temptable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:38:03.410

有趣的问题：虽然我没有测试过，但这应该可以工作（EventsTable 是表的名称）

```
 select eventname,starttime,endtime
   from(
    select first.eventname eventname , min(second.starttime,first.starttime) starttime,                 second.eventname secondevent,first.starttime endtime
    from eventstable first, eventstable second where first.id=(second.id-1)
    ) where eventname != secondevent 
```

# jquery - 点击函数的事件参数 [JQuery]

> ID：12198551
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:55:41.643
> 
> 标签：jquery, events, arguments

我不知道为点击功能传递事件参数的正确方法。

所以我不能通过那门课程：

> [http://www.codecademy.com/courses/you-and-jquery/0?curriculum_id=4fc3018f74258b0003001f0f#!/exercises/4](http://www.codecademy.com/courses/you-and-jquery/0?curriculum_id=4fc3018f74258b0003001f0f#!/exercises/4)

谁能帮我？

**更新：**

我的答案如下所示，但仍然不对。

```
function addBarClickEvent($bar,value) {
    $bar.click(
        function(e) {
            alert(value);
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:58:30.060

事件参数在click函数中传递如下

```
$(element).click(function(event){ // <-- see event argument getting passed in
     // now you can use event object here
}); 
```

**编辑**

代码是这样开始的

```
function addBarClickEvent($bar,value) {
    // add a click event to the bar that 
    // pops up an alert with the bars value
    $bar.click(
        // your code goes here!
    );
} 
```

这就是我的代码在函数内部的样子

```
function addBarClickEvent($bar,value) {
    // add a click event to the bar that 
    // pops up an alert with the bars value
    $bar.click(
        function(e){alert(value);}
    );
} 
```

虽然我刚刚测试过，但其他方式也可以正常工作。尝试重置并重新输入

# iphone - 如何在简单表单上启用下一个和上一个按钮

> ID：12198552
> 
> 赞同：0
> 
> 时间：2012-08-30T13:55:42.603
> 
> 标签：iphone, ios, xcode

所以我正在寻找一种在我的 iPhone 中创建某种形式的方法。例如，我添加了 3 个文本字段，当我单击第一个并在其中写一些内容时，我希望能够按下一个，它会将我带到下一个文本字段。

链接：[http ://shrani.si/f/3U/lB/3Nl9qXha/primer.png](http://shrani.si/f/3U/lB/3Nl9qXha/primer.png)

如果您填写网络表格，我想做一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:59:14.090

当用户单击下一步时，您可以使用，

```
[nextTextFieldAlong becomeFirstResponder]; 
```

...将光标移动到下一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:44:45.247

首先，您必须为您的字段（1-3）设置标签，然后在您的文本字段中设置一个附件视图，如下所示

```
[messageView setInputAccessoryView:[self createAccesoryView]]; 
```

您可以使用这样的方法来生成附件视图（这是从苹果文档中获取的）：

```
 -(UIView*)createAccesoryView{
        UIToolbar *toolbar = [[[UIToolbar alloc] init] autorelease];
        [toolbar setBarStyle:UIBarStyleDefault];
        [toolbar sizeToFit];
        UISegmentedControl *segmentControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Previous", @"Next", nil]];
        [segmentControl setSegmentedControlStyle:UISegmentedControlStyleBar];
        [segmentControl addTarget:self action:@selector(selectNextPrevious:) forControlEvents:UIControlEventValueChanged];
        UIBarButtonItem *select = [[UIBarButtonItem alloc] initWithCustomView:segmentControl];
        UIBarButtonItem *flex = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
        UIBarButtonItem *done = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneTyping)];
        [toolbar setItems:[NSArray arrayWithObjects:select, flex, done, nil]];
        return toolbar;
    } 
```

然后在`selectNextPrevious`

```
-(void)selectNextPrevious:(id)sender{
if ([(UISegmentedControl*)sender selectedSegmentIndex]==0) {
if (activeField.tag>1) {
            [[self.view viewWithTag:activeField.tag-1] becomeFirstResponder];
        }
 else {
        if (activeField.tag<numberOfFields) {
            [[self.view viewWithTag:activeField.tag+1] becomeFirstResponder];
        }
    }

} 
```

# sql - SQL Select Distinct 在临时表中使用 order by 和 group by

> ID：12198555
> 
> 赞同：0
> 
> 时间：2012-08-30T13:55:45.420
> 
> 标签：sql

我正在尝试获取客户已售出的所有商品的最后销售价格。我需要的物品只能属于某个类别（租赁）。

我遇到的问题是我不能按日期订购，然后选择不同的，这样它就会给我一个不同项目的列表及其最近的销售价格。

我一直在搞乱使用最终看起来像这样的临时表：

## 商品编号 | 商品_价格 | 日期

项目1 | 29.00 | 2012-08-29 00:00:00.000

项目1 | 20.00 | 2012-08-29 00:00:00.000

项目2 | .35 | 2012-08-29 00:00:00.000

项目1 | 7.00 | 2012-08-27 00:00:00.000

项目2 | 5.00 | 2012-08-27 00:00:00.000

这是一个按日期排序的临时表，然后按价格排序，然后按项目编号分组。

我现在要做的是从这个临时表中选择不同的项目编号，以便它获取顶部的项目编号和价格并将其放入网格中。所以它看起来像这样：

## 商品编号 | 商品_价格 | 日期

项目1 | 29.00 | 2012-08-29 00:00:00.000

项目2 | .35 | 2012-08-29 00:00:00.000

如果 item2 在 29 日没有新的销售，它将转到下一个最新日期并抢占该行：

项目2 | 5.00 | 2012-08-27 00:00:00.000

而不是：项目2 | .35 | 2012-08-29 00:00:00.000

我不知道我是否只是在想这个或什么，但它现在给我带来了一段时间的麻烦。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:58:46.137

用于`MAX()`获取给定项目的最后销售价格，然后仅获取销售日期等于结果的行`MAX()`：

```
SELECT item_number, item_price, date
FROM tbl t
WHERE date = (SELECT MAX(tmp.date)
              FROM tbl tmp
              WHERE tmp.item_number = t.item_number) 
```

# javascript - 喜欢上的 ref 参数不起作用

> ID：12198556
> 
> 赞同：1
> 
> 时间：2012-08-30T13:55:51.410
> 
> 标签：javascript, facebook, sdk, facebook-like

我想做的是跟踪个人用户喜欢和分享的点击次数。这很容易通过唯一链接或在使用 Like 时使用 ref 参数。

我现在要做的是在某个页面上显示类似按钮，并设置 ref 参数，以便我跟踪该链接上的任何点击。

但这有一个问题或错误，如果您使用 ref 并单击“like”按钮，那么 ref 将显示在 fb 上的“like”帖子中，我可以对此进行跟踪。但是，如果您在单击“赞”按钮时还发表评论，则链接已共享，但 ref 参数不再位于该链接上！！

对于如何解决这个问题，有任何的建议吗？

抢

# ruby-on-rails-3 - 有条件地隐藏 ActiveAdmin 中资源的编辑操作

> ID：12198558
> 
> 赞同：2
> 
> 时间：2012-08-30T13:56:01.310
> 
> 标签：ruby-on-rails-3, activeadmin

有没有办法有条件地隐藏资源#index上每行的“编辑”链接？

例如，假设您有`User`资源。当用户处于活动状态时，您可以编辑用户。但是，一旦用户停用他们的帐户，它就不再是可编辑的。用户仍应显示在索引页面上，并且仍然具有查看链接。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T13:11:26.223

您可以制作列而不是 default_actions 列：

```
index do
  column :actions do |resource|
    links = link_to I18n.t('active_admin.view'), resource_path(resource)
    if resource.is_active?
      links += link_to I18n.t('active_admin.edit'), edit_resource_path(resource)
    end
    links
  end
end 
```

# objective-c - 当使用对对象的引用时，我们是否有类似于“按值传递”的机制让被调用者无法对原始数据进行任何更改？

> ID：12198559
> 
> 赞同：1
> 
> 时间：2012-08-30T13:56:01.343
> 
> 标签：objective-c, ruby, oop

对于“传值”的机制，是为了让被调用者无法更改原始数据。所以被调用者可以以任何方式改变参数变量，但是当函数返回时，参数变量中的原始值并没有改变。

但在 Objective-C 或 Ruby 中，由于对象的所有变量都是对对象的引用，所以当我们将对象传递给任何方法时，该方法都可以“发送消息”来更改对象。方法返回后，调用者将继续使用已经处于不同状态的参数。

或者有没有办法保证传入的对象不改变（它的状态不改变）——有这样的机制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:56:21.763

您在这里有点误用了“按值传递”和“按引用传递”一词。你真正在讨论的是`const`。在 C++ 中，您可以引用`const`可变类的实例。ObjC 对象没有类似的概念（或者我相信在 Ruby 中，尽管我对 Ruby 的熟悉程度远低于 ObjC）。ObjC 确实，通过 C，有`const`指针的概念，但这些是一个弱得多的承诺。

在 ObjC 中，最好的解决方案是尽可能优先使用值（不可变）类。有关这方面的更多讨论，请参阅[Objective-c 中的 Imutability 。](https://stackoverflow.com/questions/5671614/imutability-in-objective-c)

下一个最佳解决方案是，作为设计问题，避免这种情况。避免名称中不明显的方法中的副作用。通过在设计上避免这种情况，调用者不必担心它。请记住，呼叫者和被呼叫者在同一个团队中。双方都不应该试图保护自己免受对方的伤害。良好的命名和良好的 API 设计可帮助开发人员在没有编译器强制执行的情况下避免错误。ObjC 几乎没有编译器强制执行，因此良好的命名和良好的 API 设计绝对是至关重要的。尽管我在这方面的经验有限，但我对 Ruby 也会这么说，因为它也是一种高度动态的语言。

最后，如果您正在处理一个行为不佳的 API，它在不应该修改您的对象时修改了您的对象，您可以求助于将`copy`.

但是，如果您是从头开始设计它，请尽可能考虑使用不可变类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:43:22.547

我不确定你在说什么。Ruby*是*按值传递的。您*不能*“更改参数变量”：

```
def is_ruby_pass_by_value?(foo)
  foo = 'No, Ruby is not pass-by-value.'
  return nil
end

bar = 'Yes, of course, Ruby *is* pass-by-value!'

is_ruby_pass_by_value?(bar)

p bar
# 'Yes, of course, Ruby *is* pass-by-value!' 
```

我不确定Objective-C，但如果它不同，我会感到惊讶。

# sublimetext2 - Sublime text 2 tab 通过多项选择

> ID：12198566
> 
> 赞同：2
> 
> 时间：2012-08-30T13:56:27.850
> 
> 标签：sublimetext2

假设我使用 ctr + d 选择了 3 次“测试”这个词。有没有办法通过选择进行选项卡。因此，例如，如果我想转到第二个单词并且只更改那个单词。

我似乎经常需要这个，但我在任何地方都找不到。而且我也知道用 ctr + d 和 ctr + k 跳过，但这不是我的意思。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-17T10:56:07.607

MultiEditUtils包支持这一点[。](https://github.com/philippotto/Sublime-MultiEditUtils#use-selections-as-fields)

只需安装软件包并将密钥绑定到`selection_fields`命令，例如

```
{ "keys": ["alt+d"], "command": "selection_fields" }, 
```

要使用它，只需创建多项选择并按下键绑定。然后您可以使用`tab`和`shift+tab`来选择选项卡。如果您在最后一个选项后面按 Tab 或按`escape`，则将恢复多选。

演示：

![在此处输入图像描述](../Images/4516ba7393f80eb812619e2f5be40799.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:55:57.457

听起来你想要的是*search*。通过`Control`+ `F`(Windows/Linux) 或`Command`+ `F`(Mac) 访问 Sublime 的搜索。Sublime 的搜索行为与许多其他应用程序类似，通常网络浏览器具有此功能。您可以使用它来循环浏览实例，直到找到您要查找的实例。如果您然后点击`enter`，搜索将退出，光标将停在当前选定的单词实例处。

有关其完整搜索功能的更多详细信息，请参阅[Sublime 的非官方文档。](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/search_and_replace/search_and_replace.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T14:19:02.083

1.  点击`Control`+`F`调出搜索
2.  键入要替换的术语
3.  将光标放在文档的开头
4.  点击`Control`+依次`G`选择一个实例并更改它

# php - jquery TypeError：响应为空

> ID：12198567
> 
> 赞同：0
> 
> 时间：2012-08-30T13:56:28.003
> 
> 标签：php, javascript, jquery, linux, apache

下面的代码返回 JavaScript 错误：*TypeError: Response is null*

注意：它在我的本地机器 WAMP 上运行良好，但在实时 LINUX 主机上失败。

有任何想法吗？

**查询**

```
$(document).ready(function()
{
   $("#run").click(function(event)
   {
      $('#run').hide();
      $('#loader').fadeIn(1000);

      $.ajax(
      {
         type       : 'POST',
         url        : 'process.php',
         data       : 'name=jolly&surname=fish',
         dataType   : 'json',
         success    : function(response)
         {
             $('#loader').stop(true).fadeOut(function ()
             {
                  if (response.status == 'goodjob')
                  {
                      $('#tick').fadeIn(1000, function ()
                      {
                          $('#script').fadeIn(1000);
                      });
                  }
                  else
                  {
                      $('#cross').fadeIn(1000);
                  }
              });
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
              alert(textStatus + '---' + errorThrown);
          }
      });
   });
}); 
```

**HTML**

```
<div id="first">
   <img id="run" src="run.png" />
   <img id="loader" src="loader.png" style="display:none;" />
   <img id="success" src="success.png" style="display:none;" />
   <img id="fail" src="fail.png" style="display:none;" />
</div>
<div id="next" style="display:none;">
   ....
   ....
</div> 
```

**PHP**

```
<?php echo json_encode(array('status' => 'goodjob')); ?> 
```

**来自萤火虫的详细信息**

--- 标题

```
Response Headers
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  Keep-Alive
Content-Length  0
Content-Type    text/html; charset=UTF-8
Date    Thu, 30 Aug 2012 13:33:41 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Pragma  no-cache
Proxy-Connection    Keep-Alive
Server  Apache/2.2.3 (Red Hat)
X-Powered-By    PHP/5.1.6

Request Headers
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Cache-Control   no-cache
Content-Length  27
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  MoodleSession=7uck9j6n2ff7r9vc63tvt85t43; MoodleSessionTest=q0Ywtc2psj; MOODLEID_=%25E2%25C8%2513E%25BD
Host    192.168.10.11
Pragma  no-cache
Proxy-Connection    keep-alive
Referer http://192.168.10.11/portal/update-database/index.php
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
X-Requested-With    XMLHttpRequest 
```

- - 邮政

```
Parameters application/x-www-form-urlencoded
name jolly
surname fish

Source
name=jolly&surname=fish 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:02:59.873

如果它适用于您的本地 wamp，这似乎与 js 无关。您需要检查您的现场主机。

确保服务器能够运行 php.ini。

确保你不需要

检查服务器上的任何错误日志 - 任何阻止脚本运行的东西都可能导致此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:04:58.343

两件事情：

首先，通过使用浏览器点击 URL 并在此处将输出粘贴到 JSON linter 来测试您的 PHP 文件：http: [//jsonlint.com/](http://jsonlint.com/)

在我的实时 PHP 服务器与本地服务器的错误设置不同之前，我遇到过一个问题，因此有时 AJAX 调用会失败，因为输出会被来自 PHP 的错误消息污染并且无法验证为 JSON。

第二，测试你的反应！在您的`$.ajax()`呼叫回调中，您只需投入其中并假设它`response`具有价值。永远不要假设您没有定义自己的变量具有值，尤其是在 javascript 中。一个简单的测试，如：

`if (response)`或者`if (typeof(response)!=='undefined'`会让你头疼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:07:42.427

从您的 php 文件返回

```
$status = 'goodjob';
echo $status; 
```

在你的 Jquery

```
success    : function(response)
{
   if(response == 'goodjob')
   //what you want todo
} 
```

# javascript - 尝试在 IE 中更改样式时“无法获取属性 'style' 的值”

> ID：12198571
> 
> 赞同：0
> 
> 时间：2012-08-30T13:56:31.967
> 
> 标签：javascript, internet-explorer

编写了一个函数，用于循环浏览在线测验中的问题。我在除 IE 之外的所有浏览器中都能正常工作（天哪，我希望 IE 会卷曲而死）。功能如下。

```
function cycleQs() {
var qs = document.getElementsByName("quizQ");
var nextQBtn = document.getElementById("btnNextQ");
var i = 0;
var curQ = -1;
for (i = 0; i < qs.length; i++) {
    if (qs[i].style.display == "block") {
        curQ = i;
    }
    //qs[i].style.display = "none";
}
var valid = false;
if (curQ > -1) {
    var qId = qs[curQ].id.replace("dv", "");
    var inps = document.getElementsByName(qId);
    if (inps.length > 0) {
        if (inps[0].type == "radio") {
            for (i = 0; i < inps.length; i++) {
                if (inps[i].checked) {
                    valid = true;
                }
            }
        } else if (inps[0].type == "hidden") {
            valid = true;
            for (i = 0; i < inps.length; i++) {
                if (inps[i].value <= 0) {
                    valid = false;
                }
            }
        }
    } else {
        valid = true;
    }
} else {
    valid = true;
}

if (valid == true) {
    for (i = 0; i < qs.length; i++) {
        qs[i].style.display = "none";
    }
    if (curQ < (qs.length - 1)) {
        qs[curQ + 1].style.display = "block";
        if (curQ == (qs.length - 2)) {
            var scoreDv = document.getElementById("dvScore");
            nextQBtn.style.display = "none";
            var answers = getAnswers();
            //alert(answers)
            scoreDv.innerHTML = "Processing";
            processResults(answers);
        }
    } else {
        qs[0].style.display = "block";    // Problem occurs here when function first loads
    }
} else {
    alert("You must select an answer before you can proceed");
}
} 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:59:52.073

`document.getElementsByName`由于 IE 的实施，可能不会返回任何内容：[请参见此处](http://social.msdn.microsoft.com/forums/en-US/iewebdevelopment/thread/b3eb3e22-4e91-46be-9b4e-94533d2ec350/)

所以`qs[0]`可能不存在

# sql-server-2008 - SQL查询以获取最新价格，具体取决于日期

> ID：12198572
> 
> 赞同：0
> 
> 时间：2012-08-30T13:56:32.560
> 
> 标签：sql-server-2008, tsql

我正在尝试检索已更新的产品列表，该表包含产品的多个更新，因为它记录了价格变化。

我需要获取所有产品的最新价格变化，但只返回最后一次更新。到目前为止，我有以下代码，但它只返回最后一次更新并且只返回 1 个产品。

```
SELECT dbo.twProducts.title, dbo.LowestPrices.productAsin, dbo.twProducts.sku, 
       dbo.LowestPrices.tweAmzPrice, dbo.LowestPrices.price, dbo.LowestPrices.priceDate
FROM   dbo.aboProducts INNER JOIN
       dbo.LowestPrices ON dbo.aboProducts.asin = dbo.LowestPrices.productAsin 
       INNER JOIN dbo.twProducts ON dbo.aboProducts.sku = dbo.twProducts.sku
WHERE  (dbo.LowestPrices.priceDate =
        (SELECT MAX(priceDate) AS Expr1
         FROM   dbo.LowestPrices AS LowestPrices_1)) 
```

我希望这是有道理的，我不确定我是否以易于理解的方式解释了它。

如有任何问题，请随时提出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:00:04.123

最简单的方法是使用`CTE`with[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数：

```
WITH CTE AS
(
  SELECT dbo.twProducts.title, dbo.LowestPrices.productAsin, dbo.twProducts.sku, 
       dbo.LowestPrices.tweAmzPrice, dbo.LowestPrices.price, dbo.LowestPrices.priceDate,
       RN = ROW_NUMBER()OVER( PARTITION BY productAsin ORDER BY priceDate DESC)
  FROM   dbo.aboProducts INNER JOIN
       dbo.LowestPrices ON dbo.aboProducts.asin = dbo.LowestPrices.productAsin 
       INNER JOIN dbo.twProducts ON dbo.aboProducts.sku = dbo.twProducts.sku
)
SELECT * FROM CTE WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:35:41.743

我认为对您正在寻找的查询的调整是加入您的子查询，而不仅仅是在日期上匹配。

```
SELECT dbo.twProducts.title, dbo.LowestPrices.productAsin, dbo.twProducts.sku, 
       dbo.LowestPrices.tweAmzPrice, dbo.LowestPrices.price, dbo.LowestPrices.priceDate
FROM   dbo.aboProducts INNER JOIN
       dbo.LowestPrices ON dbo.aboProducts.asin = dbo.LowestPrices.productAsin 
       INNER JOIN dbo.twProducts ON dbo.aboProducts.sku = dbo.twProducts.sku
WHERE  dbo.LowestPrices.priceDate IN
        (SELECT MAX(LowestPrices_1.priceDate)
         FROM   dbo.LowestPrices AS LowestPrices_1 
         WHERE dbo.LowestPrices.productAsin = LowestPrices_1.productAsin) 
```

**这将匹配每个产品**的 max(priceDate)

# redis - Redis 是 ZINCRBY 原子的吗？

> ID：12198576
> 
> 赞同：5
> 
> 时间：2012-08-30T13:56:38.097
> 
> 标签：redis, mutex, atomic

我正在使用 redis 构建排行榜实现。

我的问题是，如果 ZINCRBY 是一个原子操作，可以在没有单独的互斥锁或多线程环境中使用的情况下使用吗？

[ZINCRBY](http://redis.io/commands/zincrby)的文档没有提到任何关于原子实现的内容，就像[INCR 的文档](http://redis.io/commands/incr)对 INCR、INCRBY 和 DECR 所做的那样

多谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T14:24:15.967

是的，ZINCRBY 是原子的。不需要外部同步。

Redis 实际上是单线程的。即使两个线程同时向 Redis 发送命令，Redis 也只会按顺序执行它们。

# javascript - Canvas Base64 问题

> ID：12198578
> 
> 赞同：0
> 
> 时间：2012-08-30T13:56:39.677
> 
> 标签：javascript, html, canvas, cross-browser, base64

```
 <body>
        <input type="button" onClick="toBase64();" value="To Base 64"/>
        <textarea id="data" rows="20" cols="80"></textarea>
        <br>
        <canvas id="canvas" width="490" height="220"></canvas>
        <br>
        <img id="echo">
        <br>
    </body>

 function toBase64() {
      var can = document.getElementById('canvas');
        var base64 = can.toDataURL();
        document.getElementById('data').value = base64;
        $('#echo').attr("src",base64);
    } 
```

输出：“数据：图像/png；base64，长十六进制字符串”

使用上面的代码，打印画布并输出 base 64，没有任何问题。

唯一的问题是在下面列出的不同浏览器中执行此操作：-Firefox -QT webkit -Chrome

输出base64大小非常不同..

例如字符串长度

大约 600,000 夸脱

铬 3200 大致

Firefox 600 大致上

我可以发送任何参数到DataUrl 吗？在浏览器之间强制相同或至少更相似？

例如对 DataUrl("image/png","quality") 质量是一个数字吗？

还有其他建议吗？

# salesforce - 标准对象作为 MDR 中的详细信息

> ID：12198583
> 
> 赞同：1
> 
> 时间：2012-08-30T13:56:51.980
> 
> 标签：salesforce, apex-code

为什么 SF 在 MDR 的详细信息方面禁止 STD 对象？我认为您可以与自定义对象具有相同级别的复杂关系。我唯一能想到的是它与多租户环境和删除有关，这意味着所有使用 SF 的公司的联系人/等都将他们的联系人*放在同一个表中，如果他们是 MDR 中的详细信息，那么它会影响其他公司。

# windows - 我是否可以检查并查看是否为 ipv4 输入了值？

> ID：12198585
> 
> 赞同：0
> 
> 时间：2012-08-30T13:56:54.493
> 
> 标签：windows, vbscript

我需要确保在服务器中输入 ipv4 ip 地址、子网掩码、默认网关、DNS 值和 WINS 值的值。

我不一定需要检查这些值以确保它们是正确的，因为正确的值是从单独的内部网站中提取的。我没有办法与之交互。所以我只想确保它完全输入并且没有使用ipv6。

我似乎找不到任何可以帮助我的东西。我查看了注册表，看看是否可以找到任何可以抓取的东西。

没有运气=/

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:50:09.913

你的问题不清楚。这几乎听起来像是您想从输入字段中读取一个值，但随后您说出了有关注册表的内容。您需要更清楚地询问您在哪里寻找所述信息。

考虑到这一点，假设您的意思是要确定系统是否已获取 IP 地址等，然后考虑以下内容。

1）您可以使用 Run 方法并执行`ipconfig /all`和解析其结果。

2）您可以使用netsh.exe并解析结果。例如：

```
C:\> netsh interface ipv6 show address
IPv6 is not installed. 
```

通过这种方法可以获得很多信息。

3）您可以查看注册表。

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkCards`通常包含一个数字子键列表。例如，在我的系统上，有`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkCards\9`. 此键包含值：

```
Description REG_SZ "Broadcom NetXtreme 57xx Gigabit Controller"
ServiceName REG_SZ "{A1167D26-ADE0-4CDB-B0C6-1F8C5CF9DF5B}" 
```

当然，ServiceName GUID 会有所不同。它对每个系统都是唯一的，但对于以下内容，我将在示例中使用它。你必须用你的系统来替换它。

这指向`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\{A1167D26-ADE0-4CDB-B0C6-1F8C5CF9DF5B}\Parameters\Tcpip`以下值的存储位置：

```
"EnableDHCP"=dword:00000001
"IPAddress"=hex(7):30,00,2e,00,30,00,2e,00,30,00,2e,00,30,00,00,00,00,00
"SubnetMask"=hex(7):30,00,2e,00,30,00,2e,00,30,00,2e,00,30,00,00,00,00,00
"DefaultGateway"=hex(7):00,00
"DhcpIPAddress"="10.152.30.49"
"DhcpSubnetMask"="255.255.255.0"
"DhcpServer"="10.152.28.23"
"Lease"=dword:0003f480
"LeaseObtainedTime"=dword:503f5dd6
"T1"=dword:50415816
"T2"=dword:5042d3c6
"LeaseTerminatesTime"=dword:50435256
"DhcpDefaultGateway"=hex(7):31,00,30,00,2e,00,31,00,35,00,32,00,2e,00,33,00,30,\
  00,2e,00,31,00,00,00,00,00
"DhcpSubnetMaskOpt"=hex(7):32,00,35,00,35,00,2e,00,32,00,35,00,35,00,2e,00,32,\
  00,35,00,35,00,2e,00,30,00,00,00,00,00 
```

它还指向`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\{A1167D26-ADE0-4CDB-B0C6-1F8C5CF9DF5B}`以下值的存储位置：

```
"UseZeroBroadcast"=dword:00000000
"EnableDeadGWDetect"=dword:00000001
"EnableDHCP"=dword:00000001
"IPAddress"=hex(7):30,00,2e,00,30,00,2e,00,30,00,2e,00,30,00,00,00,00,00
"SubnetMask"=hex(7):30,00,2e,00,30,00,2e,00,30,00,2e,00,30,00,00,00,00,00
"DefaultGateway"=hex(7):00,00
"DefaultGatewayMetric"=hex(7):00,00
"NameServer"=""
"Domain"=""
"RegistrationEnabled"=dword:00000001
"RegisterAdapterName"=dword:00000000
"TCPAllowedPorts"=hex(7):30,00,00,00,00,00
"UDPAllowedPorts"=hex(7):30,00,00,00,00,00
"RawIPAllowedProtocols"=hex(7):30,00,00,00,00,00
"NTEContextList"=hex(7):30,00,78,00,30,00,30,00,30,00,30,00,30,00,30,00,30,00,\
  32,00,00,00,00,00
"DhcpClassIdBin"=hex:
"DhcpServer"="10.152.28.23"
"Lease"=dword:0003f480
"LeaseObtainedTime"=dword:503f5dd6
"T1"=dword:50415816
"T2"=dword:5042d3c6
"LeaseTerminatesTime"=dword:50435256
"IPAutoconfigurationAddress"="0.0.0.0"
"IPAutoconfigurationMask"="255.255.0.0"
"IPAutoconfigurationSeed"=dword:00000000
"AddressType"=dword:00000000
"IsServerNapAware"=dword:00000000
"DhcpIPAddress"="10.152.30.49"
"DhcpSubnetMask"="255.255.255.0"
"DhcpRetryTime"=dword:0001fa40
"DhcpRetryStatus"=dword:00000000
"DhcpNameServer"="10.125.28.23 10.125.28.21 192.168.115.2"
"DhcpDefaultGateway"=hex(7):31,00,30,00,2e,00,31,00,35,00,32,00,2e,00,33,00,30,\
  00,2e,00,31,00,00,00,00,00
"DhcpDomain"="my.domain.Local"
"DhcpSubnetMaskOpt"=hex(7):32,00,35,00,35,00,2e,00,32,00,35,00,35,00,2e,00,32,\
  00,35,00,35,00,2e,00,30,00,00,00,00,00 
```

这应该让你开始。据推测，您可以在注册表中搜索`{A1167D26-ADE0-4CDB-B0C6-1F8C5CF9DF5B}`与您的网络适配器相关的其他有趣信息。例如：

```
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Dhcp\Parameters\...
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\LanmanServer\Linkage\...
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\lanmanworkstation\Linkage\...
... and so on ... 
```

这些位置中的每一个都具有丰富的交叉引用和有关网络子系统的数据。

4) 另请参阅[在 Windows 上获取活动网络接口](https://superuser.com/questions/358766/get-active-network-interface-on-windows)。特别是，看看开头的答案：

```
You don't need make a new API. Use the WMI class from VBScript.

http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216(v=vs.85).aspx 
```

5) 有用的 WMIC 命令链接在这里：[WMIC-Snippets > NIC properties](http://quux.wiki.zoho.com/WMIC-Snippets.html#NIC_properties)

# ajax - 为什么这个 ajax 调用在 IE 中不起作用？

> ID：12198589
> 
> 赞同：0
> 
> 时间：2012-08-30T13:57:04.600
> 
> 标签：ajax, internet-explorer

在 Chrome、FF、Safari 等中运行良好。

JSON响应似乎很好......我猜它与我在我的代码中正在做或不做的事情有关：

```
var getPhotos = function() {
  $.ajax({
    url: 'https://api.parse.com/1/classes/Photo',
    headers: {
      'X-Parse-Application-Id': config.parseAppId,
      'X-Parse-REST-API-Key': config.parseRestKey
    },
    type: 'GET',
    dataType: 'json',
    data: {
      'where': '{"event": "' + <%= @event.id %> + '"}',
      'order': '-createdAt',
      'limit': '12'
    },
    success: function (data) {
      $('#community-gallery').children().remove();
      data.results.forEach(function (photo) {
        $('#community-gallery').append($('<a href="'+photo.file.url+'" rel="gallery"><img src="'+photo.file.url+'" width="130" style="padding: 0px 15px 15px 0;" /></a>'));
      })
    },
    error: function () {
      alert('Problem reading photos');
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:06:26.303

当它应该只是 html 内容时，你也在`$`你的调用中使用它。`append()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:05:11.983

您正在使用仅在 IE9+ 中支持的 Array`forEach`方法`data.results.forEach`，请参阅底部的兼容性表：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:29:19.400

**cache: false，** 根据我的经验，在 IE 中也很重要

# javascript - Chrome 内容脚本制作 cookie；当 chrome 重新启动时，cookie 会被删除。如何让它稳定？

> ID：12198594
> 
> 赞同：1
> 
> 时间：2012-08-30T13:57:12.060
> 
> 标签：javascript, jquery, cookies, google-chrome-extension, content-script

我想写 cookie 时遇到问题。我正在使用 jQuery cookie 插件。我将在我的 chrome 内容脚本中编写和读取 cookie。

cookie 工作正常，我可以读写 cookie，一切正常，直到 chrome 重新启动。当 chrome 重新启动时，我的 cookie 被删除，当我想读取 cookie 时，返回 null。

我使用**$.cookies("NAME","VALUE");** 写和**$.cookies("NAME");** 读书。

在chrome运行之前没有问题。即使通过关闭和打开标签，也没有问题。但是关闭和打开 chrome 会导致删除我的 cookie。我很确定我的浏览器没有删除 cookie。

那么，伙计们，我该如何让它们稳定呢？感谢冒险:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:32:57.480

这似乎是一个会话cookie。你设置过期时间了吗？使用[此插件](http://www.electrictoolbox.com/jquery-cookies/)，您可以使用以下方式进行设置：

```
$.cookie("NAME", "VALUE", { expires: 7 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:33:39.460

您正在设置会话 cookie；这是预期的行为。

如果您希望 cookie 持续存在，请给它们一个到期日期。例如：

```
$.cookie ('the_cookie', 'the_value', { expires: 7 }); 
```

将设置 cookie 在一周内过期。

请参阅[jQuery cookies 插件，使用指南](https://github.com/carhartl/jquery-cookie#usage)。

# java - 解密纯文本时Java Bouncy Castle是否总是抛出异常

> ID：12198595
> 
> 赞同：2
> 
> 时间：2012-08-30T13:57:18.327
> 
> 标签：java, aes, bouncycastle

我的系统中有一个进程，它将接收随机纯文本或密文的输入。由于性能不是问题，我打算尝试解密所有传入的输入，伪代码如下：

```
//get the input, either a plain text, or cipher text 'in disguise'
//ex of plain text: "some text".getBytes()
byte[] plainText = getInput();
try {

    //try to decrypt whatever it is. Using Bouncy Castle as the AES crypto engine
    plainText = AESDecryptor.decrypt(HARDCODED_AES_KEY, plainText);
} catch(Exception ex) {
    ...
}

//do some process with the plain text
process(plainText); 
```

我使用 AES 作为加密方法。

上面的代码很大程度上依赖于一个假设，即尝试使用 bouncy castle 解密纯文本总是会抛出异常。但是这个假设是 100% 正确的吗？尝试解密普通的、人类可读的文本时总是会抛出异常吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:12:47.027

**简短的回答**

不，你不能保证例外。

**更长的答案**

接收异常的概率取决于所使用的填充方案。当密码库使用包含填充的算法解密数据时，它希望找到正确填充的明文。如果填充格式不正确（例如，因为输入是明文，而不是密文），则可能会抛出异常。

如果您在解密中没有使用填充方案并且您的输入是密码块大小的倍数（在 AES 的情况下 - 16 字节），那么您的库将愉快地解密明文并给您垃圾。

* * *

例如，考虑[PKCS #7 padding](http://en.wikipedia.org/wiki/Padding_%28cryptography%29#Byte_padding)。这会将非零字节数附加到明文的末尾，其值等于填充字节数。添加足够的字节以使明文与密码的块大小对齐。例如：

```
12 34 56 78 9A BC DE F0 08 08 08 08 08 08 08 08 
```

其中`08`值是八个字节的填充以与 AES 块大小对齐。那么，如果你解密一些明文，它可能会导致有效的填充吗？可能不是。但它*可以*，因此这是设计系统的一种草率方式。

* * *

您需要在提议的协议中添加另一层以指示数据是否已加密。此时指定使用的算法也可能很有用，因为这可能会在将来为您提供更大的灵活性以支持其他算法。

# x509certificate - X.509 证书中的公用名属性 (CN) 是否应该是唯一的？

> ID：12198596
> 
> 赞同：3
> 
> 时间：2012-08-30T13:57:18.540
> 
> 标签：x509certificate, pki

例如，我正在为我的应用程序实现 PKI 身份验证，并且我在网上阅读的所有内容都说您从证书主题中提取 CN 属性并使用 CN 在 LDAP 服务器中查找用户。

但是，当我浏览公司的 LDAP 目录时，每个用户的 CN 属性只是名字和姓氏。这不会唯一地标识组织单位或公司中的用户。这是否意味着这里没有正确设置CN？我在网上看到的 CN 值的示例通常是名字、姓氏和电子邮件地址的串联。这是 CN 属性采用的常用格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:07:04.887

证书的主题是根据 RFC 5280 的 X.500 可分辨名称 (DN)（请参阅[https://www.rfc-editor.org/rfc/rfc5280#page-23](https://www.rfc-editor.org/rfc/rfc5280#page-23)上的第 4.1.2.6 节）。是的，每个主题的 DN 必须是唯一的。您可以选择独特的东西，例如电子邮件地址、员工 ID 或用户帐户，而不是名字/姓氏的串联。

另请注意，DN 可能有多个元素而不是单个 CN（通用名称）条目，但我认为这超出了问题的范围。

# c# - 跨多个 View 共享的 ViewModel

> ID：12198602
> 
> 赞同：1
> 
> 时间：2012-08-30T13:57:38.443
> 
> 标签：c#, .net, wpf, mvvm

我需要一些关于 MVVM 模式的帮助。

我创建了一个 ViewModel，它公开要在名为 A 的视图中的列表视图中显示的数据和命令。

此 ViewModel 也用于名为 B 的视图中。在此视图中，我只需要公开一些属性而不需要任何命令，但我必须再创建 2 个属性。

为 View B 创建一个更具体的 ViewModel 是否更好，即使它涉及同一个对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T14:00:10.703

我建议组合，有两个视图模型，它们都有一个属性，其中包含一个包含共同属性的视图模型。这两个视图模型应该只有它们特定的其他属性和命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:03:52.033

很难回答。但我可以告诉你我们为我们的应用程序做了什么。我们有一个视图模型，它或多或少独立于视图，它只是作为我们业务数据的包装器，并包含几乎所有显示该模型的部分中使用的所有内容。现在对于视图部分，我们有非常具体的视图模型。像 ProjectTreeViewModel 或 SearchResultViewmodel 一样，它们都有对应的 Item 视图模型。Item viewmodel 不需要重新实现所有的逻辑，它只需要聚合通用模型视图模型。做一个更好的类比：

如果您有`File`,`Drive`和`Folder`模型。您将创建一个`FileViewModel`,`DriveViewModel`和`FolderViewModel`. 但只有一个`ExplorerItemViewModel`。这只需要提供一个属性来暴露底层视图模型。其余的取决于您的数据模板。

# javascript - 如何停止 YUI 事件监听器

> ID：12198606
> 
> 赞同：0
> 
> 时间：2012-08-30T13:58:01.550
> 
> 标签：javascript, events, yui

我在尝试关闭 YUI2 事件侦听器时遇到问题。我正在执行以下操作来建立侦听器并且效果很好，但是对 cancelButton 的调用返回 false 并失败。每次对话框打开时，都会设置取消按钮侦听器，但是由于之前的侦听器未成功删除，因此取消函数被调用的次数越来越多。

我怎样才能阻止这种情况发生？

```
var cancelButton = new YAHOO.util.Element( "buttonid" );
var handleCancelClick = function(e) 
{
    cancelButton.removeListener(handleCancelClick);         
    someotherstuff();
};
cancelButton.on('click', handleCancelClick, null, this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:21:44.307

您需要将事件类型传递给 removeListener。

```
cancelButton.removeListener("click", handleCancelClick); 
```

请参阅[http://developer.yahoo.com/yui/event/#removeevent](http://developer.yahoo.com/yui/event/#removeevent)或[http://developer.yahoo.com/yui/docs/YAHOO.util.Element.html#method_removeListener](http://developer.yahoo.com/yui/docs/YAHOO.util.Element.html#method_removeListener)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:25:21.927

您需要调用 cancelButton.removeListener('click', handleCancelClick)。根据 API 文档，第一个参数是事件类型：

[http://developer.yahoo.com/yui/docs/YAHOO.util.Element.html#method_removeListener](http://developer.yahoo.com/yui/docs/YAHOO.util.Element.html#method_removeListener)

# mysql - 使用从 MS-SQL 转换为 MySQL 的存储过程的 IF 语句的语法错误

> ID：12198609
> 
> 赞同：0
> 
> 时间：2012-08-30T13:58:22.370
> 
> 标签：mysql, sql, sql-server, stored-procedures

我正在将存储过程从 MS-SQL 转换为 MySQL。它基于有向无环图，但出现语法错误。

原始 MS-SQL 脚本在以下页面的清单 2 中：http: [//www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o](http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)

我得到的错误是：#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'DECLARE varId int; 附近使用的正确语法；INSERT INTO 边缘（第 36 行的 startVertex, en'

MySQL 代码：

```
DELIMITER //
CREATE PROCEDURE AddEdge(
IN iStartVertexId varchar(36),
IN iEndVertexId varchar(36),
IN iSource varchar(150)
)

MAIN_BLOCK: BEGIN

DECLARE counter int default 0;
SET counter = (SELECT id 
   FROM edges 
   WHERE startVertex = iStartVertexId 
     AND endVertex = iEndVertexId 
     AND hops = 0);
IF counter > 0 THEN
   BEGIN
      LEAVE MAIN_BLOCK;
   END;
END IF;

SET counter = 0;
SET counter = (SELECT Id 
                     FROM edges
                     WHERE StartVertex = @EndVertexId 
                       AND EndVertex = @StartVertexId);

IF iStartVertexId = iEndVertexId 
      OR counter > 0
THEN
BEGIN

     LEAVE MAIN_BLOCK;
END;
END IF;

DECLARE varId int;

INSERT INTO edges (
     startVertex,
     endVertex,
     hops,
     source)
  VALUES (
     iStartVertexId,
     iEndVertexId,
     0,
     iSource);

SELECT varId = LAST_INSERT_ID();
UPDATE edges
  SET entryEdgeId = varId
    , exitEdgeId = varId
    , directEdgeId = varId 
  WHERE id = varId;

-- step 1: A's incoming edges to B
INSERT INTO edges (
     entryEdgeId,
     directEdgeId,
     exitEdgeId,
     startVertex,
     endVertex,
     hops,
     source) 
  SELECT id
     , varId
     , varId
     , startVertex 
     , iEndVertexId
     , hops + 1
     , iSource
  FROM edges
  WHERE endVertex = iStartVertexId;

-- step 2: A to B's outgoing edges
INSERT INTO edges (
     entryEdgeId,
     directEdgeId,
     exitEdgeId,
     startVertex,
     endVertex,
     hops,
     source) 
  SELECT varId
     , varId
     , id
     , iStartVertexId 
     , endVertex
     , hops + 1
     , iSource
  FROM edges
  WHERE startVertex = iEndVertexId;

-- step 3: A’s incoming edges to end vertex of B's outgoing edges
INSERT INTO edges (
     entryEdgeId,
     directEdgeId,
     exitEdgeId,
     startVertex,
     endVertex,
     hops,
     source)
  SELECT A.id
     , varId
     , B.id
     , A.startVertex 
     , B.endVertex
     , A.hops + B.hops + 1
     , iSource
  FROM edges A
     CROSS JOIN edges B
  WHERE A.endVertex = iStartVertexId
    AND B.startVertex = iEndVertexId;

END //
DELIMITER ; 
```

如果没有 IF 语句，这可以正常工作，所以我认为我的语法有点错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:16:26.017

如[`DECLARE`语法](http://dev.mysql.com/doc/en/declare.html)下所述：

> [`DECLARE`](http://dev.mysql.com/doc/en/declare.html)只能在[`BEGIN ... END`](http://dev.mysql.com/doc/en/begin-end.html)复合语句中使用，并且必须位于其开头，在任何其他语句之前。

# ipad - 具有缓存视频、PDF、Doc 和 PPT 文件的 HTML5 离线 iPad 应用程序

> ID：12198610
> 
> 赞同：2
> 
> 时间：2012-08-30T13:58:29.830
> 
> 标签：ipad, html, offline-caching, offlineapps, html5-appcache

目前我正在尝试为 iPad 构建一个网络应用程序，该应用程序需要在没有互联网连接的地方使用。该应用程序包含一些视频文件、PDF、Doc 和 PPT 文件，因此总应用程序大小为 100MB。

最初，我计划在上路之前使用 HTML5 的离线清单缓存将资产同步到 iPad 的内存，但不幸的是，缓存似乎有一个限制（至少在 iOS 3.2 中）超过 5MB。

我知道 HTML5 规范中对 Cache-Manifest 没有限制，但在大多数情况下，总缓存限制约为 5MB（因浏览器而异），但这不足以满足我的需求。

您能否帮助我了解完成此应用程序的最佳方法？

在 HTML5 和 Web SQL 数据库/IndexedDB 的帮助下，我能做到这一点吗？

还是原生应用程序开发是唯一的选择？

# c# - Streamwriter 事件，如关闭或完成？

> ID：12198612
> 
> 赞同：0
> 
> 时间：2012-08-30T13:58:30.660
> 
> 标签：c#, events, streamreader, streamwriter

我想在 Streamwriter 完成工作后直接为 Streamreader 加注星标。这必须是这样的，因为 Streamreader 正在读取 Streamwriter 写入的文件。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:09:42.007

开始打字。编写一个派生自`StreamWriter`和覆盖的类`Dispose`。

```
class StreamWriterThatDoesExtraStuffWhenClosed : StreamWriter
{
    public StreamWriterThatDoesExtraStuffWhenClosed(string s) : base(s) { }

    protected override void Dispose(bool f) {
        base.Dispose(f);
        ... do whatever you like here ...
    }
} 
```

# xml - 如何通过多个报告传播单个更改？

> ID：12198613
> 
> 赞同：0
> 
> 时间：2012-08-30T13:58:30.360
> 
> 标签：xml, architecture, reporting-services, dictionary, metadata

我正在解决一项任务。业务人员刚刚决定要更改 *.rdl 报告中一个参数的名称。但是这个参数存在于数百个报告中，手动执行这将是一件很痛苦的事情。

我有一些模糊的愿景来构建一些业务字典数据库，其中每个维度、度量等都会有名称和描述。一旦我在这本词典中更改维度的名称，它应该通过一些自动工作传播到所有报告。

参数名称通常在我们的报告中的“提示”中设置。

如何从技术上解决将变更传播到报告？你有什么想法？对我来说最大的问题是在 *.rdl 中找到正确的“提示”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:54:03.803

这是一个带有 powershell 的 sanp，只需遍历所有 rdl 文件（视为 xml），然后替换 . 您将需要重新发布报告，当然您也可以直接从报告数据库中的表中执行此操作，但这将不受支持...这是一个示例 powershell 脚本：

这是一个可以帮助您入门的基本脚本： [Using Python to scrape DataSet and Query data from RDL](https://stackoverflow.com/questions/3206993/using-python-to-scrape-dataset-and-query-data-from-rdl/3220888#3220888)

你需要稍微调整一下；但它解决了一些困难的部分

# c# - 如何从设计器自动填充中保存控件属性？

> ID：12198622
> 
> 赞同：1
> 
> 时间：2012-08-30T13:58:53.353
> 
> 标签：c#, .net, winforms, visual-studio

我已经控制了一个属性

```
[Browsable(false)]
public IList<A> Prop { get; set; } 
```

其中 A 是我自己的班级。每次我运行我的项目时，Visual Studio 都会尝试将此属性存储在 MyControl.resx 中，并在 MyControl.resx 中添加下一行

```
this.myControl.Prop = ((IList<A>)resources.GetObject("myControl.Prop")); 
```

但是这条线会导致错误

```
can't convert Orbis[]" to "Orbis[]" 
```

我怎样才能避免这种情况？怎么说 Visual Studio“不要碰这个属性”？

# php - 从 PHP 在 android 中获取响应

> ID：12198623
> 
> 赞同：0
> 
> 时间：2012-08-30T13:58:54.823
> 
> 标签：php, android

我收到了从 php 到 android 的响应，请参见下面的 .php

```
 <?php
 $username = $_POST[username];
 $password = $_POST[password];
 if($username == "himm")
 {
if($password == "rangde"){
        echo "success" ;
}
else{
    echo "passwor is wrong.";
}
  }
 else
 {

echo "fail";
  }
  ?> 
```

我在android的logcat窗口中取得了成功。但是在android中我做了如下比较，

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
  StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
           sb.append(line + "\n");
    }
    is.close();
    result = sb.toString();
    Log.v("","Result : "+result);
    Log.v("","this is Result: "+result.equalsIgnoreCase("success"));
    if(result.equals("success")){
        Log.v("","Login successfully......");
}
else{
        Log.v("","Fail to login......");
    } 
```

但在 logcat 窗口中，我看到“登录失败”消息。Php 以“成功”的形式发送响应，但是哪种类型？这里 if(result.equals("success")) 的条件应该为真。请任何人给我想法或建议来实现这个目标............提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:05:42.600

`sb.append(line + "\n");`将“成功”修改为“成功\n”，因此`if(result.equals("success")){`失败，因为“成功\n”与“成功”不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:05:46.207

在您的 android 代码中，将尾随 LineFeed 添加到您从 php 收到的结果中：

```
sb.append(line + "\n"); 
```

因此，您实际上将 'success' 与 'success\n' 进行比较，这是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:18:22.013

除了之前发布的答案（这是正确的）之外，我想指出 HTTP 包含执行您正在尝试执行的操作的机制。

Http 身份验证允许您使用标准的 Http 返回代码（成功时为 200，身份验证失败时为 401）并使用现有系统来处理该部分（大多数框架都会提供）。

它还允许您将身份验证与您从服务器发回的其余消息分开，并在您从服务器收到标头时立即比较身份验证状态。

# python - Nosetests 的 sshfs 有问题吗？

> ID：12198624
> 
> 赞同：2
> 
> 时间：2012-08-30T13:58:59.017
> 
> 标签：python, django, nose, sshfs

我在主机 OSX 机器上有一个 django 项目，我将此目录作为 sshfs 共享安装在 virtualbox ubuntu 来宾中。`-o uid`我还使用和`-o guid`选项将 uid 和 guid 映射到我的用户值 (1000/1000) 。

由于某种原因，鼻子不会发现测试：

```
$ cd ~/mnt/myproj$ 
$ ./manage.py test hotels
$ ----------------------------------------------------------------------
  Ran 0 tests in 0.000s 
```

当我（从来宾内部）将这个项目复制到另一个文件夹时，它就像一个魅力：

```
 $ cd ~/dev/
 $ cp -r ~/mnt/myproj .
 $ cd myproj
 $ ./manage.py test hotels
 $ ....S....<etc> 
```

我在这里想念什么？我可以毫无问题地运行 git（众所周知，它有时不适用于网络共享）。

# asp.net-mvc - 实现 Try, Catch on Syndication Feed (RSS) 类型

> ID：12198626
> 
> 赞同：0
> 
> 时间：2012-08-30T13:59:01.230
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, rss

我想创建一个 try catch，以便如果提要不存在或由于某种原因无法创建，它将返回 false 或 null，以便我可以测试变量并创建默认项。

```
Function GetFeed(url As String) As SyndicationFeed

    Dim feed = New SyndicationFeed

    Try
        Dim reader = XmlReader.Create(url)
        feed = SyndicationFeed.Load(reader)
    Catch ex As Exception
        feed = Nothing
    End Try

    Return feed

End Function 
```

它说我不能将类型“SyndicationFeed”设置为布尔值。

错误在于以下代码：

```
 Dim feedUrl = "http://rss.news.yahoo.com/rss/entertainment"
    Dim feed As SyndicationFeed = GetFeed(feedUrl)

    If feed = Nothing Then

    End If 
```

它说，“未为 SyndicationFeed 类型定义运算符'='。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:19:29.983

在 VB.Net 中，您需要使用[is 运算符](http://msdn.microsoft.com/en-us/library/kb136x1y%28v=vs.110%29.aspx)来[比较对象](http://msdn.microsoft.com/en-us/library/215yacb6%28v=vs.110%29.aspx)

因此，将您的条件更改为：

```
If feed Is Nothing Then

End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:20:04.047

我不是 VB 专家，但您需要使用“Is”而不是“=”。换句话说，将“If feed = Nothing Then”替换为“If feed Is Nothing Then”。

# android - Android Spinner - 系统视图 VS 用户视图

> ID：12198628
> 
> 赞同：2
> 
> 时间：2012-08-30T13:59:11.890
> 
> 标签：android, spinner

我一直在我的一个应用程序中创建微调器控件（组合框/下拉菜单），并且惊讶地发现实现以下所有功能是多么困难：

1.  面向用户的字符串被外部化，利用了 Android 的 strings.xml 国际化 (I18N) 功能。
2.  微调器选择使用系统视图进行操作，这有助于不必使用字符串或将字符串映射到有意义的值 (yuck)。
3.  用户视图到系统视图的映射应该简单、自动化和最小化（即不是为每个组件手动滚动）。

其他人已尝试解决此问题，但据我所知，他们普遍存在以下一个或多个问题：

1.  UI 代码正在蔓延到他们不属于那里的枚举类（混乱），几乎所有现有的解决方案都受此影响。
2.  在其枚举类中硬编码面向用户的字符串。因为这些不是外部化的，所以您不能使用现有的 Android 功能进行 I18N。
3.  作者通常将 Fragment 或 Activity 设为 OnItemSelectedListener，这会延续一个常见的继承问题，以方便使用，其中组合更合适。

我已经开发了自己的解决方案：[http ://www.androidanalysis.com/android-spinner-externalize-user-strings-mapped-to-system-enum/](http://www.androidanalyse.com/android-spinner-externalize-user-strings-mapped-to-system-enum/)

**我的问题**是，我错过了什么吗？这似乎不应该这么难（这让我觉得我可能正在重新发明轮子）。

下面是一些示例代码，显示了我正在使用的解决方案（可从上面的链接获得 Apache 2 许可证）。

```
String none = getString(R.string.none);
String light = getString(R.string.light);
String medium = getString(R.string.medium); 
String strong = getString(R.string.strong);
SpinnerUtil.createNewSpinner(view, R.id.wind, Arrays.asList(none, light, medium,     strong), WindLevel.values(),
  new SpinnerItemSelectedListener<WindLevel>() {
  public void onItemSelected(Spinner item, WindLevel value) {
    // Take whatever action you wish to here.
  }}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:14:58.303

我只会使用`ArrayAdapter<WindLevel>`. 是的，您创建了一个自定义类型的侦听器，但是常规事件侦听器获取`position`并可以调用`getItem()`以`ArrayAdapter<WindLevel>`获取`WindLevel`正确的类型。

恕我直言，绝大多数`Spinner`小部件将填充从数据库、互联网或其他动态数据源读取的材料，而不是由某种枚举填充，其显示值来自可以提前国际化的静态字符串.

这并不是说您的代码毫无用处：如果您发现它有用，那么它就值得编写。而且我确信有一些应用程序包含您的目标模式（即，`Spinner`由枚举或等效模式支持，其中显示值是预先已知的并且可以国际化），他们可能会发现您的解决方案也很有用。每个编写足够代码的开发人员都会编写这些帮助类等，以帮助将操作系统或框架模型映射到更适合开发人员自己的心理模型的东西。只要您没有察觉到任何性能问题，一切都很好。

另外，请注意这`OnItemSelectedListener`是一个接口；在现有类上实现该接口不是继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:16:08.593

我相信没有人回答你的原因是：

你想解决什么问题？在您精心设计的尝试之前，微调器就已经存在。

为什么要以与它们在 Android 中完全相同的方式重新发明它们？ [http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

它确实是你设计的一个漂亮的轮子，但它仍然只是一个轮子 :)

**更新：** 我想我开始明白你做了什么。这是有趣的。我不确定您为什么不使用 ListPreference 及其条目和条目值实现的模式。
事实上，我不确定我是否理解为什么 Android 团队也没有走这条路。

无论如何，向 Android 框架提出您的想法是值得的。毕竟是开源的。

# java - Hibernate 何时为 Subcriterias 创建别名？

> ID：12198630
> 
> 赞同：0
> 
> 时间：2012-08-30T13:59:14.553
> 
> 标签：java, hibernate, hibernate-criteria

假设我使用 Hibernate 创建了一个 Criteria：

```
Session session = (Session) entityManager.getDelegate();
Criteria rootCriteria = session.createCriteria(entityClass); 
```

如果我没有明确设置别名，Hibernate 将`"this"`用作别名（我签出，它被硬编码到`CriteriaImpl`类中。

如果我为此创建一个子标准：

```
Criteria subCriteria = rootCriteria.createCriteria(associationPath, CriteriaSpecification.LEFT_JOIN); 
```

Hibernate 创建了一个 Subcriteria 的实例，它是一个内部类，`CriteriaImpl`并且在此过程中它不会为其分配别名。

但是，如果我运行查询并检查我的 SQL 日志，我可以看到 Hibernate 为它创建了一个别名，但仅在我运行查询时。因为我想使用`Subcriteria`它为我的查询添加限制，所以如果我有一个为我生成的别名会很好。有没有办法让 Hibernate 生成该别名，或者我必须将它们传递给工厂方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:14:03.610

通常在不需要使用别名的情况下链接限制时使用 createCriteria

```
Criteria crit = session.createCriteria(Order.class)
    .createCriteria("Items")
        .add(Restrictions.gt("count", 1))
        .add(Restrictions.gt("price", 10))
    .list(); 
```

会产生

```
SELECT * FROM orders o join items i ON ... WHERE i.count > 1 and i.price > 10 
```

用别名看起来像

```
Criteria crit = session.createCriteria(Order.class)
    .createAlias("Items", "item")
    .add(Restrictions.gt("item.count", 1))
    .add(Restrictions.gt("item.price", 10))
    .list(); 
```

# animation - 动画部分有效但不完全

> ID：12198632
> 
> 赞同：7
> 
> 时间：2012-08-30T13:59:23.123
> 
> 标签：animation, css

目前我有[这个](http://jsfiddle.net/AndyMP/Xkee9/1/)，当鼠标悬停在容器 DIV 上时，一个小 DIV 从容器 DIV 的顶部滑入到中心；但是在鼠标移出时，它会滑回原来的位置。我想做的是让 DIV 从 DIV 的另一侧滑出，直接在它进入的地方。

这可能只使用CSS吗？（我想用 JQuery 会更直接）

```
<div class="blocks">
    <div class="blocks_title">
    </div>
</div>
<div class="blocks">
    <div class="blocks_title">
    </div>
</div>

.blocks {
    position: relative;
    float: left;
    margin: 20px;
    width: 100px;
    height: 100px;
    border: 1px dotted #333;
    overflow: hidden;
}

.blocks_title {
    position: relative;
    width: 20px;
    height: 20px;
    top: 0px;
    left: 40px;
    background: #333;
    opacity: 0;
    -webkit-transition: all .25s;
       -moz-transition: all .25s;
            transition: all .25s;
}

.blocks:hover .blocks_title {
    top: 40px;
    opacity: 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:29:23.847

就在每个人都确信它不能仅使用 css 时：

[http://jsfiddle.net/Xkee9/36/](http://jsfiddle.net/Xkee9/36/)

我为 mouseenter 使用了动画，为 mouseleave 使用了过渡

编辑：添加了 Firefox 修复

编辑：解释：（
我总是使用-webkit- -prefixes，只是为了在Chrome和Safari中解释它，Firefox使用-moz- -prefix，opera -o- - 前缀）

当什么都没有发生时：
块在 div.blocks ( ) 的底部，`top:80px;`不透明度为 0，也没有动画运行

悬停时：
块在没有过渡的情况下瞬间移动到顶部（参见：）`-webkit-transition: none;`，因为那时动画`down-1`正在运行。该动画在 0.25 秒内将块从 移动`top:0`到`top:40px;`。动画结束后，该块保持不变，`top:40px;`因为那是我在`.blocks:hover .blocks_title`.

鼠标移动时：
不再有动画运行，但块在 0.25 秒内从`top:40px`到移动，`top:80px;`因为`-webkit-transition: all .25s;`

# c# - AutoSize RichTextBox 导致大的空白区域

> ID：12198634
> 
> 赞同：1
> 
> 时间：2012-08-30T13:59:36.837
> 
> 标签：c#, winforms, richtextbox, rtf

我有一个继承自`RichTextBox`. 我覆盖调整大小

```
 protected override void OnContentsResized(ContentsResizedEventArgs e)
    {            
        this.Width = e.NewRectangle.Width;
        this.Height = e.NewRectangle.Height;
        this.Width += this.Margin.Horizontal + SystemInformation.HorizontalResizeBorderThickness;/*+ SystemInformation.HorizontalScrollBarThumbWidth Use if ScrollBars are visible */

        base.OnContentsResized(e);
    } 
```

这行得通……有点。此方法在底部创建大量空白（大约 2 * 真实内容）。此方法从 中多次调用`[External Code]`。这是一个基本的单元测试，我把它贴`RichTextBox`在 a 上`Form`并设置`Rtf`……就是这样。那么为什么我的调整大小方法被称为荒谬的 # 次（~30 倍）？

**调用堆栈**

```
BHCS.ECC.dll!PhysDoc.Plugins.BayRichTextBox.OnContentsResized(System.Windows.Forms.ContentsResizedEventArgs e = {System.Windows.Forms.ContentsResizedEventArgs}) Line 74 + 0x42 bytes   C#
[External Code] 
BHCS.ECC.dll!PhysDoc.Plugins.BayRichTextBox.OnContentsResized(System.Windows.Forms.ContentsResizedEventArgs e = {System.Windows.Forms.ContentsResizedEventArgs}) Line 74 + 0x42 bytes   C#
[External Code] 
BHCS.ECC.dll!PhysDoc.Plugins.BayRichTextBox.OnContentsResized(System.Windows.Forms.ContentsResizedEventArgs e = {System.Windows.Forms.ContentsResizedEventArgs}) Line 74 + 0x42 bytes   C#
[External Code] 
BHCS.ECC.dll!PhysDoc.Plugins.BayRichTextBox.OnContentsResized(System.Windows.Forms.ContentsResizedEventArgs e = {System.Windows.Forms.ContentsResizedEventArgs}) Line 74 + 0x42 bytes   C#
[External Code] 
BHCS.ECC.UnitTests.dll!BHCS.ECC.UnitTests.LibUI_Tests.RTFTests.RtfTestClass.ProductionLabTest() Line 63 + 0x2c bytes    C#
[External Code] 
```

当我展示外部代码时，发生了很多事情。外部代码中对堆栈的先前调用是

> System.Windows.Forms.dll!System.Windows.Forms.RichTextBox.WmReflectNotify(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message}) + 0x481 字节

所有的时间`e.NewRectangle.Height`和`Width`价值都在无意义的模式中上升和下降。最终的高度和宽度不是最大值。我不太关心事件触发。如何修复此方法以计算大小而不在末尾添加空格？

请注意，`Text`属性的 Get 返回`some words \t \n`。如您所见，没有 300 个换行符或任何内容来说明空白。

# javascript - 在值中使用 < 和 > 更改选择值

> ID：12198635
> 
> 赞同：1
> 
> 时间：2012-08-30T13:59:40.147
> 
> 标签：javascript, jquery, html

我正在使用我制作的插件，因此我可以拥有自定义下拉框（并且在浏览器中具有一致的外观）。当您单击自定义框中的值时，它会更改隐藏的“真实”选择框中的值。在使用小于 (<) 和大于 (>) 符号时，我遇到了问题。它适用于所有其他没有特殊符号的选项。我试过使用实际的符号，我试过使用`&lt;`and`&gt;`

```
<ul class="selector">
            <li>Pounds</li>
            <li>&lt; 100</li>
            <li>101-120</li>
            <li>121-140</li>
            <li>141-160</li>
            <li>161-180</li>
            <li>181-200</li>
            <li>&gt; 200</li>
        </ul>
<select class="page1 fleft" id="weight" name="weight" style="visibility:hidden;">
        <option selected="selected" value="select">Pounds</option>
        <option value="&lt; 100">&lt; 100</option>
        <option value="101-120">101-120</option>
        <option value="121-140">121-140</option>
        <option value="141-160">141-160</option>
        <option value="161-180">161-180</option>
        <option value="181-200">181-200</option>
        <option value="&gt; 200">&gt; 200</option>
    </select>
 $("ul.selector li).click(function(){
    $(this).parent().next().val($(this).html());
  }); 
```

这是一个更复杂的插件，我只是拔出了与此相关的部分.. 插件中的树遍历都处理得很好（我只是在这里潦草地写了一些看起来正确的东西），重要的是值的变化。那么，有谁知道为什么它不允许我选择任何带有小于或大于符号的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:03:22.160

使用`$(this).text()`而不是`$(this).html()`.

**[演示](http://jsfiddle.net/ucAhp/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:04:10.380

`html()`如果不使用您，它对我有用`text()`

```
$("ul.selector li").click(function(){
    $(this).parent().next().val($(this).text());
}); 
```

[jsFiddle 演示](http://jsfiddle.net/BfFzU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:03:11.590

在选项上使用`urlescape`'d 值。请记住，这些值是 URL 的一部分，而符号`&`是保留的。

# facebook - 如何检查某个页面是否嵌入到 Facebook？

> ID：12198636
> 
> 赞同：0
> 
> 时间：2012-08-30T13:59:41.220
> 
> 标签：facebook

我有一个网站，它既可以作为独立的，也可以嵌入到 Facebook 中。通常它可以正常工作，但我希望它的某些页面上的内容会有所不同，具体取决于它是否嵌入。我的意思是它现在是通过 Facebook 浏览的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:13:38.533

使用服务器端语言，您可以查看在初始加载到 iframe 时是否有`signed_request`POST 参数传递给您的应用程序（如果是，您很可能在 facebook.com 中使用您的页面），然后保存该信息进入您的会话，这样一旦用户在 iframe 中开始在您的应用程序内导航，您仍然知道您在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:39:39.120

如果“嵌入式”是指在 Facebook 中用作 Canvas 应用程序，那么简单的：

```
if (window.location.indexOf("facebook.com") !== -1){
    //Not embedded
} else {
    //Embedded in Facebook as a canvas app.
} 
```

这对你有用吗？

# unit-testing - 流星代码是否有效地单元测试？

> ID：12198642
> 
> 赞同：14
> 
> 时间：2012-08-30T14:00:07.657
> 
> 标签：unit-testing, meteor

我目前正在研究流星框架，这个问题立即浮现在脑海。我编写的代码（例如 Template.xxx 代码或 Template.xxx.events）实际上是否可以以任何方式进行测试？

当然，您可以像测试任何其他代码一样测试未绑定到流星运行时的代码，但我的印象是，您将在流星内部编写的大多数代码都以某种方式限定于流星及其功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:33:30.067

[除了未记录的Tinytest](https://github.com/meteor/meteor/tree/devel/packages/tinytest)（请参阅[视频教程](https://www.eventedmind.com/tracks/feed-archive/meteor-testing-packages-with-tinytest)）及其[助手](https://github.com/meteor/meteor/tree/devel/packages/test-helpers)之外，似乎还没有任何官方测试框架，但是您始终可以像我在[github](https://github.com/dmayo3/Meteor-Unit-Testing)上的这个简单示例中所做的那样对 Meteor 框架 API 进行存根/模拟.

我想对于非平凡的应用程序可能会变得更加困难，因此将核心应用程序逻辑与 Meteor API 调用分开可能是一个好主意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-24T12:34:26.343

截至 2014 年 2 月，Meteor 代码可以使用内置的[Tinytest](https://github.com/meteor/meteor/tree/devel/packages/tinytest)框架进行单元测试，只要您将所有应用程序代码移动到包中，[无论如何您都应该这样做](http://meteor.redandivory.com/#/6/1)。快速而肮脏的方式相当于添加`package.js`文件。该文件用于：

1.  声明您的出口。[干净的命名空间](http://meteor.redandivory.com/#/7)为您的应用程序拥有[一个全局对象是一种](https://github.com/meteor/meteor/issues/1380#issuecomment-24706108)很好的做法
2.  声明你的测试文件

这是 Eventedmind 的一个例子 - [https://github.com/EventedMind/meteor-file](https://github.com/EventedMind/meteor-file)

您可以在[meteor-file-test.js](https://github.com/EventedMind/meteor-file/blob/master/meteor-file-test.js)中看到它访问的内容，它在[package.js](https://github.com/EventedMind/meteor-file/blob/master/package.js)`MeteorFile`中声明为导出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:45:50.723

我认为它是可测试的，尽管我没有深入研究它。

如果您打开`liveui`包 ( `$METEOR_HOME/packages/liveui`)，似乎有很多单元测试是使用`TinyTest`和测试渲染编写的。我认为这将是一个很好的起点：-

*   liveui_tests.js
*   liveui_tests.html

等等

希望有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T01:50:13.443

我在这里创建了一篇博文，展示了如何在 Meteor 中进行有效的单元测试，以及 GitHub 上的示例项目。希望能帮助到你。

[http://blog.xolv.io/2013/04/unit-testing-with-meteor.html](http://blog.xolv.io/2013/04/unit-testing-with-meteor.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-27T20:19:19.400

Velocity 已被选为流星 1.0 的官方测试框架。该公告已在上[一次流星开发商店（2014 年 6 月）上发布](http://youtu.be/kwFv1mXrLWE?t=40m50s)。

使用速度开发的软件包：

*   [速度](https://atmospherejs.com/package/velocity)（测试运行者）
*   [茉莉花单元](https://atmospherejs.com/package/jasmine-unit)（茉莉花语法）
*   [mocha-web-velocity](https://atmospherejs.com/package/mocha-web-velocity)（用于测试集合）
*   [velocity-html-reporter](https://atmospherejs.com/package/velocity-html-reporter)（在浏览器中查看测试）

# c# - Web 应用程序安全问题 - VB 还是 C#？

> ID：12198646
> 
> 赞同：-8
> 
> 时间：2012-08-30T14:00:22.823
> 
> 标签：c#, vb.net, security

假设我编写了两个网站，一个使用 C#，一个使用 VB，它们执行相同的操作，并且我在两个站点上都设置了相同的安全性。

VB 网站会比 C# 网站安全吗？

我相信 VB 与 C# 相比没有额外的安全问题，但是我想确认我是正确的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:09:46.593

没有区别。它们（大部分）具有相同的功能并在同一虚拟机上执行。VB 确实不允许`unsafe`，但您可以在 C# 中轻松避免使用此关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:02:37.190

不，不会有区别——两种语言无论如何都编译成相同的字节码。

当然，这仅适用于代码实际上相同的情况 - 但从语言的角度来看，没有区别。

# c# - 不能使用二级派生类作为泛型基类类型的参数

> ID：12198649
> 
> 赞同：4
> 
> 时间：2012-08-30T14:00:27.167
> 
> 标签：c#, generics, inheritance

我有一个有趣的情况，某些事情正在工作，但其他事情却没有，我不知道为什么。下面是近似我的情况的代码。我在存储库中有一个静态的，它采用由对象的基本类型实现的泛型类型。然后，我有两个基于该泛型类型的派生类。派生类的第一级填充基类型的泛型参数并且工作正常，但是从填充泛型参数的类派生的任何类都不能代替它派生的基类。

```
public class Vehicle<TVehicleType, TStorage>
{
}

public class Car : Vehicle<Car, ParkingLot>
{
}

public class PickupTruck : Car
{
}

public class Dealership <TDrivableVehicle>
{
    public static TDrivableVehicle GetVehicle<TVehicleType, TStorage>(TStorage lot)
         where TDrivableVehicle : Vehicle<TVehicleType, TStorage>, new()
    {
    }
}

public class CarDealership : Dealership<Car>
{
    public static Car GetDrivableVehicle(aCarParkingLot)
    {
        return Dealership.GetDrivableVehicle<Car, CarParkingLot>(aCarParkingLot); <-- Works fine
    }
}

public class PickupTruckDealership : CarDealership
{
    public static PickupTruck GetDrivableVehicle(aCarParkingLot)
    {
        return Dealership.GetDrivableVehicle<PickupTruck, CarParkingLot>(aCarParkingLot); <-- fails
    }
} 
```

就 PickupTruck 理解其通用基础而言，某些方面似乎可以正常工作，但扩展（此处未显示）和将类型传递给类型参数特别不能（GetDrivableVehicle 调用）。我的猜测是扩展方法与类型参数问题有关，因为它需要找出类型。

任何想法为什么这不起作用和/或可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:45:55.043

将您的代码重写到我可以让它在您所说的地方失败的程度 - 问题正如 Thom Smith 所说：`PickupTruck`继承`Car`，因此是 a `Vehicle<Car, ParkingLot>`，而不是 a `Vehicle<PickupTruck, ParkingLot>`。此外，由于它是通用继承，因此它不可能是其他任何东西。

我知道您的代码只是您遇到的问题的简化表示 - 但如果它足够接近，那么我们可以在这里对整体架构进行一些有用的观察。

我不反对通用基础了解它们的派生对应物——确实它对工厂特别有用；然而，它几乎总是立即排除任何进一步的继承。

您试图在类型级别编码太多信息；除了我们在这里看到的尖括号的数量之外，它实际上是由稍微不协调的性质暗示的，`Vehicle<TVehicleType, TStorage>`它决定了它可以存储在其中的存储类型。

对我来说，这没有任何意义，因为假设我们`ParkingLot`今天有一个，但明天我们也会得到一个`Hangar`（用于存放在掩护下的汽车）——这将需要一个全新的车辆类型，这些车辆类型是不平等的事实上，我们也将派生类型传递给基类`Vehicle<TDerived, ...>`- ergo`ParkingLotCar`并且`HangarCar`永远*不可能*等价，即使两个实例都代表相同的品牌/型号等。

因此，预料到这一点，您已经在拥有 common 的地方进行了继承`Car`，但是当然，在那一点上，任何继承都是毫无意义的，因为`Car`是 a`Vehicle<Car,...>`所以从它派生的任何东西也必须是。只有多重继承才能不是这种情况，但即使这样也不能解决整个`ParkingLot`问题。

问问自己*为什么*`Vehicle<,>`需要了解派生类型？这样你就可以有一个工厂方法吗？在这种情况下，您应该将其放入`Dealership`, 或`ParkingLot`类型中；不是车辆基地：

```
public interface IVehicle {}
public interface ICar : IVehicle {} //because pickup trucks share some car traits
public interface IPickup : ICar, IVehicle {}
public interface IStorage {}

public class Car : ICar, IVehicle {}
public class Pickup : IPickup, ICar, IVehicle {}

public class ParkingLot : IStorage {}
public class Hangar : IStorage {}

public class Dealership
{
  public static TVehicle GetVehicle<TVehicle>(IStorage storage)
    where TVehicle : IVehicle, new()
  {

  }
}

//now you can specialise if you really need to

public class CarDealership
{
    public static Car GetVehicle(IStorage storage)
    {
        return Dealership.GetVehicle<Car>(storage);
    }
}

public class PickupDealership
{
    public static Pickup GetVehicle(IStorage storage)
    {
        return Dealership.GetVehicle<Pickup>(storage);
    }
} 
```

现在您有了车辆类型之间的运行时关系；允许不同的具体类型共享特征，例如`ICar`或`IPickup`接口上的特征；但是你已经破坏了车辆和它的存储之间的关系，所以如果你需要的话，你可以`IVehicle`从码头上得到一个`FootballPitch`或把它开到码头上。`RiverBed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:12:57.043

您设置它的方式， a`PickupTruck`不是 a `Vehicle<PickupTruck, CarParkingLot>`，而仅仅是 a `Vehicle<Car, CarParkingLot>`。使用这种无限模板递归可能会非常令人困惑。您可以通过声明`PickupTruck : Vehicle<PickupTruck, CarParkingLot>`、处理协方差或重构类层次结构以避免混淆模式来解决此特定问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:10:29.693

您正在尝试使用派生类代替基类。这行不通。您应该能够使用您的 BASE 类而不是更多派生类，而不是相反。您可以将 Car 转换为接口 (ICar) 并让 PickupTruck 实现 ICar。那会奏效。

阅读逆变与协方差。 [http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)

# c# - 将 GridView 写入 .csv 文件 c# asp.net

> ID：12198657
> 
> 赞同：1
> 
> 时间：2012-08-30T14:00:56.287
> 
> 标签：c#, asp.net, gridview, csv, streamwriter

我正在开发一个网站，客户可以直接从我们的网站订购。直到几天前我更改了 GridView 的编辑方式时，我的代码才正常工作。我之前已将 GridView 设置为 AutoGenerate Columns，并更改了它，因为我需要更多的编辑功能功能。这是我创建表格的方式（当用户单击按钮以使用 GridView 添加快速详细信息时创建）：

```
 public void CreateTable()
    {
        try
        {
            DataTable table = new DataTable();
            if (Session["table"] != null)
                table = (DataTable)Session["table"];
            else
            {
                table.Columns.Add("Part Number", typeof(string));
                table.Columns.Add("Quantity", typeof(Int32));
                table.Columns.Add("Ship-To", typeof(string));
                table.Columns.Add("Requested Date", typeof(string));
                table.Columns.Add("Shipping Method", typeof(string));
            }

            DataRow row = table.NewRow();
            row["Part Number"] = part;
            row["Quantity"] = qty;
            row["Ship-To"] = shipto;
            row["Requested Date"] = reqdate;
            row["Shipping Method"] = shipmthd;
            table.Rows.Add(row);

            Session["table"] = table;
            griditems.DataSource = table.DefaultView;
            griditems.DataBind();
        }
        catch
        {
            //error message
        }
    } 
```

这将显示 Gridview 并允许用户根据他们的选择编辑/删除项目。然后我有另一个按钮，在创建 GridView 时显示，它实际上将 .csv 文件写入服务器（我的计算机暂时直到部署）。这是代码：

```
protected void orderbtn_Click(object sender, EventArgs e)
    {
        try
        {
            //ordernum++;
            //custordernum = ordernum.ToString("0000000");

            if (userlbl.Visible == false && userlbl2.Visible == false)
            {

                GlobalList.OnlineOrderNum.Add(custordernum, ordernum);
                FileStream fs = new FileStream(@"C:\Web_Order\Orders.Bin", FileMode.Create);
                BinaryFormatter bf = new BinaryFormatter();
                bf.Serialize(fs, GlobalList.OnlineOrderNum);
                fs.Close();
                fs.Dispose();

                ///Write CSV File For Order
                StringBuilder strBuilder = new StringBuilder();
                TextWriter tw = new StreamWriter(@"C:\Web_Order\Order_W" + custordernum.ToString() + ".csv");
                foreach (GridViewRow row in griditems.Rows)
                {
                    foreach (TableCell cell in row.Cells)
                    {
                        // get cell's text
                        string cellText = cell.Text;
                        // add quotes and comma around value and append
                        strBuilder.Append("\"" + cellText + "\",");
                    }
                    strBuilder.Append("\n");
                }
                // output CSV result
                tw.Write(strBuilder.ToString());
                tw.Close();
                tw.Dispose();
                GlobalList.weborder = "W" + custordernum.ToString();

                Response.Redirect("~/OrderSubmitted.aspx");
            }
            else
            {
                validatelbl.Text = "CANNOT SUBMIT FORM WITH ERRORS.  PLEASE CORRECT YOUR ERRORS BEFORE SUBMITTING.";
                validatelbl.Visible = true;
                userlbl.Text = "Please correct your table with the correct information before submitting your order";
                userlbl.Visible = true;
                userlbl2.Text = "Are your Part Numbers correct?  Are your Quantities in the correct format?";
                userlbl2.Visible = true;
            }
        }
        catch
        {
            //error message
        }
    } 
```

这是我对 GridView 的编辑/删除代码：

```
protected void griditems_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        griditems.PageIndex = e.NewPageIndex;
        BindData();
    }

    protected void griditems_RowEditing(object sender, GridViewEditEventArgs e)
    {
        //Set the edit index. 
        griditems.EditIndex = e.NewEditIndex;

        //Bind data to the GridView control. 
        BindData();
    }

    protected void griditems_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        //Reset the edit index.
        griditems.EditIndex = -1;
        //Bind data to the GridView control.
        BindData();
    }

    protected void griditems_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        string valtext = "An error has occured, please check and make sure your editing is in the correct format and try again.";
        orderbtn.Visible = false;
        try
        {
            TextBox editpart = (TextBox)griditems.Rows[e.RowIndex].FindControl("partedit");      
            TextBox editqty = (TextBox)griditems.Rows[e.RowIndex].FindControl("qtyedit");
            TextBox editshipto = (TextBox)griditems.Rows[e.RowIndex].FindControl("shiptoedit");
            System.Web.UI.WebControls.Calendar editcal = (System.Web.UI.WebControls.Calendar)griditems.Rows[e.RowIndex].FindControl("reqdatecaledit"); 
            DropDownList editshipmthd = (DropDownList)griditems.Rows[e.RowIndex].FindControl("shipmthdedit"); 
            string newpart = editpart.Text.ToString();
            int newqty = Convert.ToInt32(editqty.Text);
            string newshipto = editshipto.Text.ToString();
            string newreqdate = editcal.SelectedDate.ToShortDateString();
            string newshipmthd = editshipmthd.SelectedItem.ToString();

            //Reset date if calendar date is not changed so it is not null!
            if (newreqdate == "1/1/0001")
                newreqdate = reqdate;

            DataTable dt = (DataTable)Session["table"]; 

            DataRow dr = dt.Rows[e.RowIndex];
            dr["Part Number"] = newpart;
            dr["Quantity"] = newqty;
            dr["Ship-TO"] = newshipto;
            dr["Requested Date"] = newreqdate;
            dr["Shipping Method"] = newshipmthd;                
            dr.AcceptChanges();

            Session["table"] = dt;

            if (validatelbl.Text == valtext)
                validatelbl.Visible = false;

            griditems.EditIndex = -1;
            BindData();
            orderbtn.Visible = true;
        }
        catch
        {                
            validatelbl.Text = valtext;
            validatelbl.Visible = true;
        }
    }

    protected void griditems_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        try
        {
            //DataTable dt = table;
            DataTable dt = (DataTable)Session["table"];
            if (dt.Rows.Count > 0)
            {
                dt.Rows.RemoveAt(e.RowIndex + griditems.PageIndex * 10);
                griditems.DataSource = dt;
                BindData();
            }
        }
        catch
        {
            validatelbl.Text = "An error occured while processing your request deleting a record.  Please try again.";
            validatelbl.Visible = true;
        }
    } 
```

这是gridview的aspx代码：

```
<asp:GridView ID="griditems" runat="server" 
        onrowdeleting="griditems_RowDeleting" onrowediting="griditems_RowEditing" onrowupdating="griditems_RowUpdating"
                  AllowPaging="True" 
        onpageindexchanging="griditems_PageIndexChanging" Onrowcancelingedit="griditems_RowCancelingEdit" 
                  Caption="Order Details" AutoGenerateDeleteButton="True" 
        AutoGenerateEditButton="True" 
        AutoGenerateColumns="False" >            
        <EditRowStyle BackColor="#FF9900" BorderStyle="Double"/> 
        <HeaderStyle Font-Bold="True" Font-Italic="False" />
        <RowStyle HorizontalAlign="Center"/>
        <Columns> 
          <asp:TemplateField HeaderText="Part Number">
            <ItemTemplate>
              <asp:Label ID = "partlbl" runat="server" Text='<%#Eval("Part Number") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
               <asp:TextBox ID="partedit" runat="server" Text='<%# Eval("Part Number")%>'  ></asp:TextBox>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Quantity">
            <ItemTemplate>
              <asp:Label ID = "qtylbl" runat="server" Text='<%#Eval("Quantity") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
               <asp:TextBox ID="qtyedit" runat="server" Text='<%# Eval("Quantity")%>'  ></asp:TextBox>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Ship-To">
            <ItemTemplate>
              <asp:Label ID = "shiptolbl" runat="server" Text='<%#Eval("Ship-To") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
               <asp:TextBox ID="shiptoedit" runat="server" Text='<%# Eval("Ship-To")%>'  ></asp:TextBox>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Requested Date">
            <ItemTemplate>
              <asp:Label ID = "reqdatelbl" runat="server" Text='<%#Eval("Requested Date") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Calendar ID="reqdatecaledit" runat="server" BackColor="White" BorderColor="#3366CC" BorderWidth="1px" CellPadding="1" 
                              DayNameFormat="Shortest" Font-Names="Verdana" Font-Size="8pt" ForeColor="#003399" Height="200px" Width="220px" 
                              ondayrender="reqdatecal_DayRender" ShowGridLines="True">
                              <DayHeaderStyle BackColor="#99CCCC" ForeColor="#336666" Height="1px" />
                              <DayStyle BackColor="White" />
                              <NextPrevStyle Font-Size="8pt" ForeColor="#CCCCFF" />
                              <OtherMonthDayStyle ForeColor="#999999" />
                              <SelectedDayStyle BackColor="#FF9900" Font-Bold="True" ForeColor="#CCFF99" />
                              <SelectorStyle BackColor="#99CCCC" ForeColor="#336666" />
                              <TitleStyle BackColor="#003399" BorderColor="#3366CC" BorderWidth="1px" Font-Bold="True" Font-Size="10pt" ForeColor="#CCCCFF" 
                                          Height="25px" />
                              <TodayDayStyle BackColor="#99CCCC" ForeColor="White" />
                              <WeekendDayStyle BackColor="#CCCCFF" /></asp:Calendar>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Shipping Method">  
            <ItemTemplate><asp:Label ID="shipmthdlbl" runat="server" Text='<%#Eval("Shipping Method") %>'></asp:Label>   
            </ItemTemplate>              
              <EditItemTemplate>            
                <asp:DropDownList ID="shipmthdedit" runat="server">                
                  <asp:ListItem>FedEx Ground (1-5 Business Days)</asp:ListItem>
                  <asp:ListItem>FedEx 3 Business Days</asp:ListItem>
                  <asp:ListItem>FedEx 2 Business Days</asp:ListItem>
                  <asp:ListItem>FedEx Overnight</asp:ListItem>   
                </asp:DropDownList>    
              </EditItemTemplate>  
            </asp:TemplateField>    
        </Columns>    
    </asp:GridView> 
```

我不明白为什么它一直在工作，而现在突然间它不起作用了。它使用新的订单号创建文件，它只是 .csv 文件是空的（根本没有数据）有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:07:09.260

您可以更正路径，并将 TextWriter 替换为 StreamWriter

```
var path = Path.Combine("C:\Web_Order\Order_W",custordernum.ToString(),".csv");
StreamWriter tw = new StreamWriter(@path); 
```

或者直接使用var。

```
var tw = new StreamWriter(@path); 
```

使用 try catch 块调整您的代码，以便在发生异常时处理异常

```
try
{

}
catch(Exception ex)
{
  Console.Write(ex.Message); 
  throw ex;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:44:00.960

不知道你为什么在`TextWriter`这里使用，你不需要重定向。写信给`Response.Write()`.

```
protected void btnDownload_Click(object sender, EventArgs e)
{
    // No error so write as attachment
    Response.ContentType = "text/csv";
    Response.AddHeader("content-disposition", "attachment;filename=data.csv");

    // Write your output here
    Response.Write(...);

    Response.End();
} 
```

# iphone - 找不到用于导出 ipa 的配置文件

> ID：12198660
> 
> 赞同：0
> 
> 时间：2012-08-30T14:01:04.947
> 
> 标签：iphone, ios, xcode, xcode4, provisioning

我在使用 xcode4 导出 ipa 时遇到问题。我使用配置文件毫无问题地编译应用程序，并将其存档。当我选择“Distrubute ... -> Save for Enterprise or Ad-Hoc Deploy”时，找不到用于编译应用程序的配置文件。

有什么想法可以解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:51:33.583

确保`Info.plist`文件中的捆绑包 ID 与配置文件的捆绑包 ID 匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:42:20.260

您是否仔细检查过适当的 Provisioning Profile 是否仍可用于构建？通常，目标中列出的选定配置文件已经丢失，但保留在列表中。还要检查您在管理器中的配置文件是否有重复、缺少证书和过期的配置文件...删除所有这些，添加您需要的配置文件，如果它不可用，然后再试一次！

# c - 来自内核代码的这个宏中的这个##是什么意思

> ID：12198663
> 
> 赞同：4
> 
> 时间：2012-08-30T14:01:17.717
> 
> 标签：c, macros, linux-kernel

我在一个内核代码中找到了这个宏.. [http://lxr.free-electrons.com/source/arch/alpha/include/asm/io.h?v=3.0;a=arm#L140](http://lxr.free-electrons.com/source/arch/alpha/include/asm/io.h?v=3.0;a=arm#L140)

```
#define IO_CONCAT(a,b)  _IO_CONCAT(a,b)
#define _IO_CONCAT(a,b) a ## _ ## b 
```

我无法理解这个的意思。有人知道这个吗？

**编辑 ：**

那么这里会返回什么

```
 return IO_CONCAT(__IO_PREFIX,readl)(addr); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T14:13:53.920

双哈希用于将两个标记连接在一起：

```
#define CONCAT(a,b) a ## b

CONCAT(x, y) # Gives 'xy' 
```

但是，如果传递的参数之一是宏本身，则这种天真的实现不起作用：

```
#define Z y
CONCAT(x, Z) # Gives 'xZ', not 'xy' as one might expect 
```

这就是为什么在您的问题中使用宏间接：

```
#define CONCAT(a,b)  __CONCAT(a,b)
#define __CONCAT(a,b) a ## b

#define Z y
CONCAT(x, Z) # Gives 'xy' 
```

## UPD。

现在考虑您要询问的具体示例：

```
return IO_CONCAT(__IO_PREFIX,readl)(addr); 
```

这里`__IO_PREFIX`显然是一个宏（Linux 内核中的大写标识符通常是宏）。它在几个[地方](http://lxr.free-electrons.com/ident?v=3.0&a=arm&i=__IO_PREFIX)定义，[其中](http://lxr.free-electrons.com/source/arch/alpha/include/asm/io.h?v=3.0;a=arm#L203)之一是：

```
#define __IO_PREFIX             generic 
```

现在让我们看看采取了哪些步骤来扩展原始语句：

1.  展开`__IO_PREFIX`：

    ```
    返回 IO_CONCAT（通用，readl）（地址）；

    ```

2.  展开`IO_CONCAT(...)`：

    ```
    返回_IO_CONCAT（通用，readl）（地址）；

    ```

3.  展开`_IO_CONCAT(...)`：

    ```
    返回generic_readl（地址）；

    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T14:04:03.650

那是[令牌粘贴](http://en.wikipedia.org/wiki/C_preprocessor#Token_concatenation)。它将标记连接在一起。所以`IO_CONCAT(foo,bar)`会扩展到`foo_bar`.

它在 C99 的 §6.10.3.3 中定义：

> 如果在类函数宏的替换列表中，参数紧跟在`##`预处理标记之前或之后，则将参数替换为相应参数的预处理标记序列；但是，如果参数不包含预处理标记，则该参数将替换为地标预处理标记。）
> 
> 对于类对象和类函数宏调用，在重新检查替换列表以替换更多宏名称之前，`##`替换列表（不是来自参数）中的预处理标记的每个实例都被删除，并且前面的预处理标记被连接使用以下预处理令牌。Placemarker 预处理令牌经过特殊处理：两个 placemarker 的串联产生单个 placemarker 预处理令牌，placemarker 与非placemarker 预处理令牌的串联产生非placemarker 预处理令牌。如果结果不是有效的预处理标记，则行为未定义。生成的令牌可用于进一步的宏替换。运算符的评估顺序`##`未指定。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T14:04:25.097

那是预处理器[令牌连接运算符](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html)：

> `##' preprocessing operator performs token pasting. When a macro is expanded, the two tokens on either side of each`##' 运算符组合成一个标记，然后替换 `##' 和宏扩展中的两个原始标记。通常两者都是标识符，或者一个是标识符，另一个是预处理编号。粘贴时，它们会产生更长的标识符。这不是唯一有效的情况。也可以将两个数字（或一个数字和一个名称，例如 1.5 和 e3）连接成一个数字。此外，可以通过标记粘贴形成多字符运算符，例如 +=。

# python - 如何使用 Python 开发 Windows PC 后台托盘应用程序？

> ID：12198665
> 
> 赞同：0
> 
> 时间：2012-08-30T14:01:21.323
> 
> 标签：python, windows, windows-applications

> **可能重复：**
> [快速简单：带有python的trayicon？](https://stackoverflow.com/questions/6389580/quick-and-easy-trayicon-with-python)

是否有适用于 Windows PC 操作系统（如 vista 或 windows 7）的 Python API？

我想设计一个小应用程序，它可以在任何文件夹中查找主动选择的项目，并有一个小背景窗口来显示一些消息。

# android - 在 android 平板电脑上运行应用程序菜单上缺少应用程序

> ID：12198668
> 
> 赞同：0
> 
> 时间：2012-08-30T14:01:26.220
> 
> 标签：android, menu, tablet

上下文：我正在创建一个 android 应用程序（在 roboguice、android 注释等的帮助下）。它包含多个片段和活动，到目前为止效果很好。

在 3.0 或 4.0 平板电脑（目标设备）上进行测试时，一切都运行良好，只是应用程序没有显示在正在运行的应用程序菜单中（底部栏中从左到右的第三个底部）。不是在启动时或在后台运行时（隐藏/暂停）。

我还没有找到任何关于为什么会发生这种情况的相关信息，所以我不知道我是否遗漏了项目配置、代码或清单中的某些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:15:06.640

显然该按钮仅显示最近的应用程序，并且仅当您不在应用程序本身时，但是我还必须添加该行

```
android:excludeFromRecents="false" 
```

到主（启动器）活动上的我的android清单，所以当我在应用程序之外时，它会显示在最近的菜单上。

# php - 在付款方式中选择选项而不是 magento 中的单选按钮

> ID：12198670
> 
> 赞同：2
> 
> 时间：2012-08-30T14:01:35.107
> 
> 标签：php, magento, methods, payment, checkout

这是我在 magento 的 onepagecheckout 中的 methods.phtml 文件，我想要下拉（选择选项）按钮而不是单选按钮……这样我就可以选择付款方式来支付付款。

```
<?php if (!$methods = $this->getMethods()) : ?>
  <p><?php echo $this->helper('checkout')->__('Sorry, no quotes are available for this order at this time.') ?></p>
   <?php else : ?>
     <dl class="sp-methods">
     <?php foreach ($this->getMethods() as $_method): $_code = $_method->getCode() ?>
     <dt>
         <?php if( sizeof($this->getMethods()) > 1 ): ?>

              <input  value="<?php echo $_code ?>" type="radio" name="payment[method]" title="<?php echo $this->htmlEscape($_method->getTitle()) ?>" onclick="payment.switchMethod('<?php echo $_code ?>')"<?php if($this->getSelectedMethodCode()==$_code): ?> checked="checked"<?php endif; ?> class="radio" />
              <?php else: ?>
              <span class="no-display"><input id="p_method_<?php echo $_code ?>" value="<?php echo $_code ?>" type="radio" name="payment[method]" checked="checked" class="radio" />                </span>
           <?php endif; ?>
              <label for="p_method_<?php echo $_code ?>"><?php echo $this->htmlEscape($_method->getTitle()) ?> <?php echo $this->getMethodLabelAfterHtml($_method) ?></label>
         </dt>
        <?php if ($html = $this->getPaymentMethodFormHtml($_method)): ?>
          <dd>
            <?php echo $html; ?>
           </dd>
          <?php endif; ?>
       <?php endforeach; ?>
          </dl>
       <script type="text/javascript">
            //<![CDATA[
         <?php echo $this->getChildChildHtml('scripts'); ?>
                payment.init();
            //]]>
           </script>
      <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-20T11:45:09.177

**您可以在methods.phtml**文件中按照以下代码设置付款方式的选择选项下拉菜单。

此外，您必须更改**opcheckout.js 第 715 行**才能更改`"elements[i].checked"`为`"elements[i].value"`.

```
<?php
    $methods = $this->getMethods();
    $oneMethod = count($methods) <= 1;
?>
<?php if (empty($methods)): ?>
    <dt>
        <?php echo $this->__('No Payment Methods') ?>
    </dt>
<?php else:
    ?>
    <dt>Select Payment Method:</dt>
    <select name="payment[method]" onchange="payment.switchMethod(this.value);">
    <?php
    foreach ($methods as $_method):
        $_code = $_method->getCode();
    ?>
        <option id="p_method_<?php echo $_code ?>" value="<?php echo $_code ?>" <?php if($this->getSelectedMethodCode()==$_code): ?> selected="selected"<?php endif; ?>>
            <?php echo $this->escapeHtml($this->getMethodTitle($_method)) ?> <?php echo $this->getMethodLabelAfterHtml($_method) ?>
        </option>
<?php endforeach; ?>
    </select>
    <?php
    foreach ($methods as $_method):
        $_code = $_method->getCode();
    ?>
    <?php if ($html = $this->getPaymentMethodFormHtml($_method)): ?>
    <dd id="dd_method_<?php echo $_code ?>">
        <?php echo $html; ?>
    </dd>
    <?php endif;
    endforeach;
    endif;
?>
<?php echo $this->getChildChildHtml('additional'); ?>
<script type="text/javascript">
    //<![CDATA[
    <?php echo $this->getChildChildHtml('scripts'); ?>
    payment.init();
    <?php if (is_string($oneMethod)): ?>
    payment.switchMethod('<?php echo $oneMethod ?>');
        <?php endif; ?>
    //]]>
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T06:27:28.333

I used this one to get my select list if helpful

```
 <?php 
  $ptId1=mysql_query(" some query here")
 echo"<select name=ptId>";
    while($ptId=mysql_fetch_array($ptId1))
        {
            echo '<option value="'.$ptId['id'].'">'.$ptId['id'].'</option>';
        }
    echo '</select>';?>
} 
```

# jquery - jquery ui滑块+更新最小值和最大值

> ID：12198674
> 
> 赞同：0
> 
> 时间：2012-08-30T14:01:47.440
> 
> 标签：jquery, html

我正在做这个演示：[www.datesitesfree.com.au](http://www.datesitesfree.com.au)

滑块下方有 2 个数字 18 和 99...

我需要一个范围滑块（2 个可移动部分），最小值需要更新 18 值，最大值需要更新 99 值。例如：

![在此处输入图像描述](../Images/a6f929e0b848b02026d5942650bb329f.png)

关于如何获得 2 个移动部件以及如何让它们分别更新 2 个值的任何建议？

这是当前的 HTML：

```
 <h2 class="demoHeaders">Slider</h2>
    <div id="slider"></div>
    </br></br>
    <span id="minAge">18</span>
    </br></br>
    <span id="maxAge">99</span> 
```

这是当前的 JQUERY：

```
 $('#slider').slider({
                min: 18,
                max: 99,
                change: function(event, ui) {
                    $('span#minAge').html(ui.value);
                }
            }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:09:22.437

为了有一个双滑块，你需要设置 range: true 和 values: [start, end]。

所以对于你的代码：

```
 $('#slider').slider({
                range: true,
                min: 18,
                max: 99,
                values: [18, 99],
                change: function(event, ui) {
                    $('span#minAge').html(ui.values[0]);
                    $('span#maxAge').html(ui.values[1]);
                }
            }); 
```

# javascript - 如何正确声明一个 JS 变量

> ID：12198675
> 
> 赞同：0
> 
> 时间：2012-08-30T14:01:48.237
> 
> 标签：javascript, jquery

我在页面的标题中包含了 js 文件，之后我在`<script></script>`标签之间有了一些功能。我需要将一个数组从标头传输到 js 文件。因为包含 js 的文件位于我在它的空数组中创建的函数之上，`var some_array = []`并且在它尝试添加下面的值`some_array(inst.temp[0], inst.temp[1]);`并接收它之后：

> ReferenceError: some_array 未定义

```
<script src="templates/js/js.js"></script>// here is var some_array = [];
<script type="text/javascript">
$(function(){some_array.push(inst.temp[0], inst.temp[1]);})
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:04:38.690

您正在尝试调用名为 的函数`some_array`，而不是将元素添加到名为 的数组`some_array`中。要向其中添加元素，请尝试：

```
some_array.push( el1, el2, el3, ..., elN ); 
```

关于您的问题，您声明数组的方式是可以的，但我不会推荐这种做法（在一个文件中声明一个变量并在另一个文件中使用它）。您的代码将难以维护。但是，您可以声明一些“命名空间”，然后在其中插入 var。例如：

**文件 1：**

```
var ApplicationNamespace = {};
ApplicationNamespace.someArray = []; 
```

**文件 2：**

```
ApplicationNamespace.someArray.push( el1, el2, el3, ..., elN ); 
```

# monotouch.dialog - 是否可以在 Monotouch.Dialog.EntryElement 上执行数据绑定？

> ID：12198677
> 
> 赞同：1
> 
> 时间：2012-08-30T14:01:51.393
> 
> 标签：monotouch.dialog

是否可以在业务对象和视图控制器中的元素之间创建数据绑定？我已经查看了有关 Elements API 的文档，但没有看到任何对绑定的引用。我们已选择不为此应用程序使用反射 API，因此这不是一个选项。

一般来说，我对使用 Monotouch 和 iOS 非常陌生，所以如果这个问题看起来我没有做太多研究，请原谅我。非常感谢任何建议或文档链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:23:28.533

您可以在反射模式下使用单点触控对话框来使用数据成员上的属性来显示和收集数据。

除此之外，还有几个项目与 mvvm 进行了进一步的对话——搜索 monotouch.mvvm 和 mvvmcross——但你可能会发现这些对于你的第一个 monotouch/ios 项目来说太过分了。

*   [https://github.com/RobertKozak/MonoMobile.Views](https://github.com/RobertKozak/MonoMobile.Views)
*   [https://github.com/slodge/MvvmCross](https://github.com/slodge/MvvmCross)

# ios - 新的 Facebook iOS SDK 发布以提供对话框

> ID：12198678
> 
> 赞同：0
> 
> 时间：2012-08-30T14:01:52.320
> 
> 标签：ios, facebook, cocoa, facebook-graph-api

新的 facebook SDK 已经发布...

这在旧 SDK 中用于状态共享

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Facebook SDK for iOS", @"name",
                               @"Build great social apps and get more installs.", @"caption",
                               @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                               @"https://developers.facebook.com/ios", @"link",
                               @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
                               nil];

// Invoke the dialog
[self.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

新 SDK 中的等价物是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:27:26.463

它看起来与您所拥有的非常相似。从 SDK 指南：

```
self.postParams =
        [[NSMutableDictionary alloc] initWithObjectsAndKeys:
         @"https://developers.facebook.com/ios", @"link",
         @"https://developers.facebook.com/attachment/iossdk_logo.png", @"picture",
         @"Facebook SDK for iOS", @"name",
         @"Build great social apps and get more installs.", @"caption",
         @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
         nil]; 
```

发布消息不再需要委托，而是使用块：

```
 [FBRequestConnection startWithGraphPath:@"me/feed"
                             parameters:self.postParams
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                          // Handle Success/Failure

                      }]; 
```

[https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:50:25.413

您现在可能已经找到了答案，但是您是否查看过[https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

# web-applications - 地理定位不再适用于我的任何浏览器

> ID：12198687
> 
> 赞同：1
> 
> 时间：2012-08-30T14:02:16.833
> 
> 标签：web-applications, mobile, geolocation

[http://benwerd.com/lab/geo.php](http://benwerd.com/lab/geo.php)

地理定位工作正常，然后大约 2 周前它停止了。它提示我，我说允许，它说它无法获取我的位置。

我怀疑每个人都有同样的问题，但它可能是什么？我已经重新启动，这并没有做任何事情。

我有一个正在开发的移动 Web 应用程序，因此无法开发。

# **更新**

它在其他计算机上运行良好......这只是我的开发，不适用于任何浏览器。

# 更新#2：

好吧...好吧，它一定与 IP/DNS 循环或其他东西有关，因为如果我 VPN 进入我的家庭网络，它可以在它无法运行的同一台本地计算机上正常工作。唯一改变的是我的IP。

因此，我工作的网络上一定发生了一些变化，不允许定位我的 IP。

仍然对可能更详细地解释可能导致这种情况的答案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:03:26.197

从您的两次更新中，我认为您的 ISP 可能只是更改了其 IP 范围，或者它们可能已从地理位置提供程序中删除。以下是关于地理定位在 Firefox 中如何工作的描述（其他浏览器的行为应该类似）：

> 当您访问位置感知网站时，Firefox 会询问您是否要共享您的位置。如果您同意，Firefox 会收集有关**附近无线接入点和您计算机 IP 地址的**信息。然后 Firefox 将此信息发送给默认的地理定位服务提供商 Google Location Services，以获取您的位置估计。然后与请求的网站共享该位置估计。 [http://www.mozilla.org/en/firefox/geolocation/](http://www.mozilla.org/en/firefox/geolocation/)

我不确定 Google 位置服务使用哪个 IP 数据库，我会假设他们有一个可用的内部数据库。对于其他提供商，您可以将您的 IP 和/或 IP 范围提交到他们的数据库。如果您的新 IP 在基础数据库中可用，则 Geolocation 应该会再次工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:35:23.803

我知道我在最后一次输入 7 个月后添加到这篇文章，但想补充一点，我遇到了同样的问题。我的 js 包括对 navigator.geolocation.getCurrentPosition 的调用以及地理定位 api 的所有网站示例停止工作。它们在我所有的 PC 以及 FF、Opera 和 Chrome 上都失败了。在阅读了可能与 IP 相关的参考资料后，我关闭了路由器，等待了 5 分钟，然后重新启动了路由器，一切都恢复了。我不知道我的 DSL IP 是否已更新……但现在一切正常。

# interface - 外部设备输入

> ID：12198688
> 
> 赞同：0
> 
> 时间：2012-08-30T14:02:20.357
> 
> 标签：interface, hardware, external

我正在研究获取外部数据（定制硬件）以及拦截和处理这些数据（编程语言/工具）的最佳方法，这是最便宜、最简单且学习曲线最少的方法。

背景：我是一名网络开发人员。

外部设备将是开关，运动检测，速度检测编程语言：Delphy（我不知道）？或 C#（我知道用于 web 开发）或其他？

以前有人做过这样的事情吗？有什么建议吗？

任何和所有信息表示赞赏。

D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:15:17.163

最简单的解决方案可能是使用[Arduino](http://www.arduino.cc/)。

它的 ：

*   便宜（〜30美元）
*   易于编程
*   易于连接到您的 PC（它使用模拟串行连接的 USB 电缆）
*   有一个庞大的社区，有大量的教程可以做任何你想做的事

这是一个[如何使用 C# 控制 LED 的示例](http://www.therobotlab.co.uk/2011/control-arduino-c-sharp-usb-serial/)

# django - 不允许删除 django 项目中用于演示产品的模型

> ID：12198693
> 
> 赞同：1
> 
> 时间：2012-08-30T14:02:38.673
> 
> 标签：django, django-admin, django-middleware

我有一个基于 django 框架的演示产品，并且正在实时运行。潜在客户将以超级用户访问权限登录 UI。我想显示删除选项，但是当他们执行删除选项时，我想显示“不允许演示登录”之类的消息。

有没有办法在 django 框架中快速实现这一点。这样做的最佳选择是什么。

谢谢湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:38:37.497

我通过创建一个演示用户并将以下代码添加到中间件类来解决此问题：

```
 if request.user.username == 'demo':
                            if '/delete' in path:
                                    request.user.message_set.create(message='Delete/Edit option is disabled for demo account.')
                                    return HttpResponseRedirect("../../")
                            if path.startswith ('/admin/') and request.method == 'POST' and request.POST.has_key('action'):
                                    axnname   = request.POST.get('action')
                                    if axnname == 'delete_selected':
                                            request.user.message_set.create(message='Delete/Edit option is disabled for demo account.')
                                            return HttpResponseRedirect(path)
                            if path.startswith ('/admin/') and request.method == 'POST' and request.is_ajax() is False:
                                    request.user.message_set.create(message='Add/Edit option is disabled for demo account.')
                                    return HttpResponseRedirect("../") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:27:58.800

我会创建一个员工用户，绝对不是超级用户。这将使您能够利用 Django 的内置权限，这在您的情况下似乎很方便。

创建一个有权添加和编辑演示模型的用户，*而不是*删除。

[通过ModelAdmin](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-objects)将 JS 文件添加到您的 change_form中，或[添加自定义视图](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)

```
class DemoModelAdmin(admin.ModelAdmin):
    class Media:
        js = (
            '/static/js/mimic_delete.js',
        )

admin.site.register(DemoModel, DemoModelAdmin) 
```

在您的mimic_delete.js 文件中，您可以添加一个jQuery 循环，为DemoModel 更改表单的results_list 中的每一行添加一个删除按钮，并添加一个隐藏事件onclick 或任何您想要的表示形式。

另一种方法可能是将模型条目绑定到会话并覆盖 ModelAdmin 的 get_queryset 以过滤用户在当前会话中创建的条目，并在会话过期后清理它们。

# java - 如何在抽象类下进行一次性操作

> ID：12198695
> 
> 赞同：1
> 
> 时间：2012-08-30T14:02:52.930
> 
> 标签：java, abstract-class

我正在开发一个基于 Java EE 的 webApplication。

我有一个抽象类，我需要在其中进行一次性操作（数据库调用）。

所以在下面的示例代码中，我将它粘贴到它的构造函数中，但不知道为什么构造函数没有被调用。

请告诉我如何解决这个问题。

```
public abstract class Preethi {

 Preethi()
 {
    System.out.println("hirerew");
 }

 public static void main(String args[])
 {
    int a  = 12;

    if(a==0)
        System.out.println("a");

    if (a==12)
        System.out.println("12");
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:05:43.917

您永远不会创建抽象类 Preethi 的实例。为什么你期望构造函数被调用？创建一个非抽象子类并创建它的一个实例，然后将调用构造函数。main 是静态的，可以在不实现 Preethi 的情况下调用它。

```
public class X extends Preethi
{ /* Your implementation here */} 
```

然后主要：

```
public static void main(String [] args)
{
  Preethi preethi = new X(); // This will call the constructor of Preethi
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:10:55.010

尽管抽象类不能用于实例化对象，但它们可以用于创建对象引用，因为 Java 的运行时多态方法是通过使用超类引用来实现的。因此，必须可以创建对抽象类的引用，以便它可以用于指向子类对象。

你可以让它不是抽象的，或者创建一个在你的抽象类上调用 super() 的子类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:06:56.313

构造函数没有被调用，因为`main()`在没有实例化主类的情况下调用了方法。

要调用它 - 您需要`Preethi`显式创建一个对象。

UPD。正如 anio 建议的那样-您需要对其进行子类`Preethi`化和实例化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:08:46.960

您没有创建`Preethi`. 为了调用构造函数，您必须从类中删除抽象关键字并创建它的对象

或者创建匿名内部类，它的对象为：

```
new Preethi() {
   // abstract method impl
}; 
```

或者创建 Preethi 的子类，并创建它的对象。

仅供参考：您可以创建任何抽象类或接口的对象引用。您不能创建它们的对象。

而且我认为将主类抽象化真的没有任何意义。请告诉我。（如果我错了，请告诉我）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:08:51.320

请看下面的代码：

```
public abstract class Preethi {

    // constructor:
    Preethi() {
        System.out.println("hirerew");
    }

    public static void main(String[] args) {
        // call the constructor:
        new Preethi() {};  // "{}" needed because our class is abstract.
    }

} 
```

这里的重点是您不必总是创建一个新类，但可以在构造函数旁边定义一个“一次性”类。例如：

```
public abstract class A {
    public abstract void foo();
    public A() { foo(); }
} 
```

您可以执行以下操作：

```
A a = new A() { 
    public void foo() { 
        System.out.println("hello"); 
    } 
}; 
```

输出只是“你好”。类似的方法也可以用于接口。

# sql - 使用模式变量创建索引的函数

> ID：12198696
> 
> 赞同：2
> 
> 时间：2012-08-30T14:02:54.413
> 
> 标签：sql, function, postgresql, plpgsql

我目前正在尝试创建一个函数，该函数将在数据仓库中每个模式的表上创建索引。这是我到目前为止的脚本：

```
create or replace function dwh.loan_type_id_indexing()
returns void language plpgsql AS
$PROC$
Declare
       myschema varchar;
               sql text;        
Begin 
    for myschema in 
        SELECT nspname
          FROM pg_catalog.pg_namespace 
         where nspname not in ('information_schema', 'pg_catalog', 'pg_temp_1',
                               'pg_temp_7', 'pg_toast', 'pg_toast_temp_1',
                               'pg_toast_temp_7','public', 'c1', 'dwh',
                               'users', 'c2'
                              )
         order by nspname
    loop        
        sql = 'CREATE INDEX '|| myschema || '_' ||'type_id ON '|| 
        myschema || '.' ||'.fact_tbl USING btree (loan_type_id)';

        execute sql;

    end loop;
END
$PROC$
volatile; 
```

我知道这是不正确的，但它会给你我正在尝试做的事情的思考过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:35:22.260

与其过滤掉模式并假设每个其他模式都有您想要的表，不如查询`information_schema`它们并遍历结果列表：

```
select t.table_schema
from information_schema.tables t inner join information_schema.columns c 
  on (t.table_schema = c.table_schema and t.table_name = c.table_name) 
where t.table_name = 'fact_loan' and c.column_name = 'loan_type_id'
  and t.table_schema NOT LIKE 'pg_%'
  and t.table_schema NOT IN ('information_schema', 'ad_delivery', 'dwh', 'users', 'wand'); 
```

`EXECUTE`现在，您可以通过遍历查询返回的记录来创建索引所需的一切。

您可能还希望`RAISE NOTICE 'Creating index on %s.fact_loan.loan_type_id', table_schema;`允许您跟踪进度，因为索引构建可能需要一段时间。

如果您要过滤模式，最好使用*如上*`schemaname NOT LIKE 'pg_%' AND lower(shemaname) <> 'information_schema'`所示。

顺便说一句，我通常发现从数据库外部的脚本中执行此类工作更方便，在该脚本中我可以访问多个连接、线程/多处理等。带有`psycopg2`Pg 驱动程序的快速 Python 脚本可以让你把这样的事情组合在一起索引是否并行构建，一次说 4 个；正确的数字取决于您的磁盘配置。

# objective-c - UIWebview 旋转+变换问题

> ID：12198698
> 
> 赞同：1
> 
> 时间：2012-08-30T14:02:57.407
> 
> 标签：objective-c, ios, uiwebview, uiscrollview

当用户按下按钮时，我添加了一个比例变换，使其像 safari 的选项卡一样缩小。当用户按下 webview 时，它会恢复。当视图旋转时，我用来获取我希望框架在选项卡模式下看起来如何的值，并在旋转和应用框架时检查它是否处于选项卡模式。它有效，我试着把它拿出来。问题是，如果我旋转 10 次，右侧的黑线会在 webview 内部变得越来越大。我已经为 Web 视图及其滚动视图记录了大量对象，以查看是否有任何关闭、滚动插入/偏移正确、框架正确、转换也正确。我不知道为什么会有黑线。我尝试刷新 webview 以查看它是否是网页，并且它没有修复那个以太，比例变换值是

```
CGAffineTransformMakeScale(0.6, 0.68) 
```

用于缩小，1、1 用于放大。如果有人想看到效果，只需将其应用到 uiwebview 并开始旋转设备大约 10 次，然后您就会真正看到它。

以下是旋转多次时 Web 视图的外观：![](../Images/424489592c66c6d079848b5393b46b2e.png)

在右侧有一条粗黑线，每次旋转它都会变大，但只有在添加该变换时才会增长，如果它的正常大小再次停止但保持在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:56:41.703

当您转换任何视图时，它们的帧确实会发生变化，如果您使用自动调整大小标志，请检查它，因为转换会更改帧并且自动调整大小也会更改帧，这会产生奇怪的结果。

# ruby-on-rails-3 - rails，simple_form，保存后如何使用所选选项更新单选按钮？

> ID：12198702
> 
> 赞同：6
> 
> 时间：2012-08-30T14:03:05.770
> 
> 标签：ruby-on-rails-3, radio-button, simple-form

我对 Rails 很陌生，这也是我的第一篇文章，但我正在尝试在视图页面上创建一个 simple_form，该页面应该是某些用户的设置页面，我已经搜索了 2 天以获得答案我在任何地方都找不到。

```
<%= f.input :gender, label: 'What is your gender?', collection: [ ['M', 'Male' ], ['F', 'Female'] ], as: :radio_buttons, label_method: :last, value_method: :first, checked: 'M', item_wrapper_class: 'inline'%> 
```

这是我的输入标签，到目前为止唯一的选择是设置：checked => 'M'，这样在保存用户设置后，单选按钮将被选中（但如果我选择'这将不正确女性'性别，因为保存设置页面后，默认选择'男性'单选按钮）。

那么有没有办法以简单的形式（甚至是下拉列表）使用单选按钮，以便在保存页面后保持选中性别？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T14:14:48.477

尝试使用用户性别属性而不是“M”检查：

```
<%= f.input :gender, label: 'What is your gender?', collection: [ ['M', 'Male' ], ['F', 'Female'] ], as: :radio_buttons, label_method: :last, value_method: :first, checked: @user.gender, item_wrapper_class: 'inline'%> 
```

# php - CodeIgniter 语言代码路由

> ID：12198705
> 
> 赞同：0
> 
> 时间：2012-08-30T14:03:13.430
> 
> 标签：php, codeigniter, url-routing

我想在 CodeIgniter 中向我的 URI 添加一个语言代码段，但我想以某种方式（可能通过路由）强制浏览器停止将语言代码解释为路径。

我还没有在我的 CodeIgniter 安装中成功实现任何 i18n 库，而且我相当确定我的问题很简单，无论如何都可以在没有库的情况下解决。

我想到的方法是简单地加载与 URI 中出现的语言代码相对应的语言文件。

例如

```
http://example.com/about        // Default language
http://example.com/sv/about     // Load Swedish language 
```

这是控制器逻辑：

```
<?php
//  ** Update **
//  The following updated code works, as long as the language code appears
//  at the end of the URI, e.g, http://example.com/about/sv
//
//  Ideally, I would like the language code segment to always appear first.
//
//  There is also the problem of keeping the language selected while
//  navigating around the site…

class Pages extends CI_Controller {
    public function view ($page = 'home') {

        if (!file_exists('application/views/pages/'.$page.'.php'))
            show_404();

        $uri = explode("/", $_SERVER['REQUEST_URI']);
        $lang_code = end($uri);

        $data['title'] = $lang_code;

        switch ($lang_code) {
            case "sv": $the_language = "swedish"; break;
            case "no": $the_language = "norwegian"; break;
            default: $the_language = "english";
        }

        $this->lang->load('general',$the_language);
        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);
    }
}

?> 
```

我会以错误的方式解决这个问题吗？如果是这样，为什么？请避免预设回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:03:26.040

我会选择 CI 路由：

```
$route['([a-z]+)/([a-z]+)'] = "pages/view/$2"; 
```

然后，您的控制器将如下所示：

```
<?php if (! defined('BASEPATH')) exit('No direct script access');

class Pages extends CI_Controller {

function __construct() {
    parent::__construct();
    $this->language = $this->uri->segment(1);
}

function view($page = 'home')
{
    /* other stuff */
    $this->lang->load('general',$this->language);
    $this->load->view('templates/header', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('templates/footer', $data);
} 
```

}

# javascript - 创建类 javascript 数组对象的时间和优势是什么？

> ID：12198706
> 
> 赞同：0
> 
> 时间：2012-08-30T14:03:14.587
> 
> 标签：javascript

> **可能重复：**
> [javascript中的类数组对象](https://stackoverflow.com/questions/1971389/array-like-object-in-javascript)

Javascript 具有类似于数组的对象（例如*arguments*、*NodeList*）的本机对象。

我想知道：

1.  创建类数组对象有什么好处？
2.  什么时候应该创建一个类似数组的对象（而不是创建一个常规的数组对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:14:14.710

您从错误的角度看待它：Java(Live)Script 的早期版本没有数组，只有对象。实际上，数组是一个扩充对象（索引在内部转换为字符串！）。所以一个数组是一个对象，就像`arguments`一个对象......有一些重叠，一些差异......

回答您的问题：您永远无法真正*创建*对象，这只是函数固有的`arguments`，您应该将它们视为只读对象。

NodeLists 是对象，由类似的东西返回`document.getElementsByTagName('a');`，它们的优点是（当然除了 IE）它们带有几个简洁的方法：

```
var inputs = document.getElementsByTagName('input');
var userNameIn = inputs.namedItem('username');//Arrays don't have this 
```

那么什么时候应该使用呢？好吧，处理节点：10 次中有 9 次你最好使用节点列表，参数对象是你在函数中需要的。由于 JS 是一种函数式语言，因此您*非常*需要它们。
也就是说，这真的没*那么*重要：你很可能遇到过这样的代码：

```
var myArgs = Array.prototype.slice.apply(arguments,[0]); 
```

这只是从 Array 原型中借用 slice 方法，并像调用 arguments 对象的方法一样调用它。
这就是所有要说的，真的。这里没有*明确*的答案，只有那句古老的口头禅：随你的直觉走。尝试，失败，学习，然后再试一次。

只要知道，无论您做什么，都可以借用原型（甚至是实例）方法，并且*一切都*可以追溯到*Object.prototype*母原型。

# javascript - 为什么我在 Javascript 中的函数不起作用？

> ID：12198707
> 
> 赞同：0
> 
> 时间：2012-08-30T14:03:15.817
> 
> 标签：javascript, function

我正在尝试不同的方法来实现一个功能，但是其中一个不起作用。这个语法正确吗？：

```
function funcao2()
        {
            alert('Tudo bem?');
        }funcao2(); 
```

我有一个**“自调用函数”**、一个**“匿名函数”**和一个**“归因于变量的函数”**，但第二个不起作用。见代码：

```
<script type="text/javascript">
    //Função de auto-invocação anônima ou função recursiva anônima
    (function(){
        alert('Oi');
    })();
    //Função anônima
    document.onload = function(){
        alert('Página carregada');
    };
    //Atribuir função a uma variável e executá-la em seguida
    var funcao = function(){
        alert('Oi novamente');
    }; funcao(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:15:32.883

对此发表评论，似乎是 OP 想知道的，因此将其发布为答案：

`document.onload`应该是`window.onload`，`document`有`onreadystatechange`事件，`window`负载

有关的：

使用`document.onreadystatechange`事件时，检查 status 和 readystate 属性：

```
document.onreadystatechange = function(e)
{
    if (this.readyState === 4 && this.status === 200)
    {
        //only now, the document is loaded
        return;
    }
    //do stuff on readyState 1,2,3... <-- usefull when loading is likely to fail
} 
```

# python - 为 Eclipse 安装 PyDev 插件时出错

> ID：12198710
> 
> 赞同：0
> 
> 时间：2012-08-30T14:03:19.920
> 
> 标签：python, eclipse, installation, pydev

尝试在 Eclipse 上安装 PyDev 时，我收到以下错误消息：

```
An error occurred while collecting items to be installed session context was: (profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Unable to read repository at http://pydev.org/updates/plugins/org.python.pydev_2.6.0.2012062818.jar.
Read timed out
Unable to read repository at http://pydev.org/updates/plugins/org.python.pydev.jython_2.6.0.2012062818.jar.
Read timed out 
```

不知道是什么意思，有大神能详细说明一下吗？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:10:21.623

只是 Eclipse 无法访问该站点来获取该 JAR。您可以通过在浏览器地址栏中输入名称来手动查看：

[http://pydev.org/updates/plugins/org.python.pydev_2.6.0.2012062818.jar](http://pydev.org/updates/plugins/org.python.pydev_2.6.0.2012062818.jar)

可能的原因：

*   服务器过载
*   DNS 故障
*   公司防火墙拒绝下载（发生在我身上）
*   连接问题

# java - 即使使用工具，Java 中对象的内存地址

> ID：12198719
> 
> 赞同：1
> 
> 时间：2012-08-30T14:03:51.920
> 
> 标签：java, memory, heap-memory

> **可能重复：**
> [如何获取 Java 对象的地址？](https://stackoverflow.com/questions/1360826/how-to-get-adress-of-a-java-object)
> [Java中变量的内存地址](https://stackoverflow.com/questions/1961146/memory-address-of-variables-in-java)

Java中有没有办法查看或写入对象的堆地址。假设我有一个长对象

```
Long mylong = Long.valueof(1); 
```

我想查看 mylong 的堆地址而不是它的值 (1)。我只是好奇这是否可能！我知道这是可能的，并且可能在应用程序中没有用。但我只是在寻找一种方法来了解 JVM 在某些情况下是如何工作的。

如果你是一个像 Eclipse 插件这样的工具，如果你让我知道，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:10:32.910

> Java中有没有办法查看或写入对象的堆地址

简短的回答；不。

长答案是；你不想，因为它没用。您可以使用 Unsafe 获取此信息，但参考可以随时更改。

注意：引用是 32 位 Java 中的地址，但在 64 位 Java 中，引用通常乘以 8 和/或偏移量，以允许 JVM 对最多 32 GB 的堆使用 32 位引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:10:51.070

```
import java.lang.reflect.Field;

import sun.misc.Unsafe;

public class Direct {

    public static void main(String... args) {
        Unsafe unsafe = null;

        try {
            Field field = sun.misc.Unsafe.class.getDeclaredField("theUnsafe");
            field.setAccessible(true);
            unsafe = (sun.misc.Unsafe) field.get(null);
        } catch (Exception e) {
            throw new AssertionError(e);
        }

        long value = 12345;
        byte size = 1;
        long allocateMemory = unsafe.allocateMemory(size);
        unsafe.putAddress(allocateMemory, value);
        long readValue = unsafe.getAddress(allocateMemory);
        System.out.println("read value : " + readValue);

    }
} 
```

取自：[取自这里](http://robaustin.wikidot.com/how-to-write-to-direct-memory-locations-in-java)

# java - 将 Web 服务 POST 从 Java 转换为 .NET

> ID：12198720
> 
> 赞同：0
> 
> 时间：2012-08-30T14:03:52.683
> 
> 标签：java, visual-studio, http-post, httpclient

下面是从连接到网站并通过 POST 方法上传文件的 Java 客户端的片段。我必须在 Visual Studio 环境中重现此客户端，但在 Java 中使用的[setEntity()](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpEntityEnclosingRequestBase.html#setEntity%28org.apache.http.HttpEntity%29)函数在 .NET 环境中看不到任何等效函数。

我发现的一切都指向使用这个......

```
public void uploadFile(File uploadFile, String partner, String key,
            String baseUrl,boolean isPartner) throws IOException {
    DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(
        CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1
    );
    String url = baseUrl + "?" + (isPartner ? "partnerId" : "ori") + "="
            + partner.toUpperCase() + "&authKey=" 
            + key+ "&key=" 
            + key;
    HttpPost httppost = new HttpPost(url);
    MultipartEntity multipartEntity = new MultipartEntity();
    ContentBody contentBody = new FileBody(uploadFile, "text/xml"); 
    multipartEntity.addPart("dataFile", contentBody); 
    httppost.setEntity(multipartEntity);

    HttpResponse response;
    response = httpclient.execute(httppost);

    HttpEntity resEntity = response.getEntity();

    if (resEntity != null) {
        resEntity.consumeContent();
    }

    httpclient.getConnectionManager().shutdown();
} 
```

我在 Visual Studio 中找到的所有东西都使用下面这样的 POST 方法。[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)对象没有明显的方法来添加我需要的参数 。

```
Dim request As WebRequest = WebRequest.Create("http://Test.com/import?partnerId=2&authKey=XdUa")
request.Method = "POST"
Dim postData As String = StrData
Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
request.ContentType = "dataStr"
request.ContentLength = byteArray.Length
Dim dataStream As Stream = request.GetRequestStream()
dataStream.Write(byteArray, 0, byteArray.Length)
dataStream.Close()
Dim response As WebResponse = request.GetResponse() 
```

任何指导将不胜感激。如果我的问题不清楚，请告诉我，我会再试一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:40:51.740

您可以添加以下代码片段来添加参数

request.ContentType="应用程序/x-www-form-urlencoded"

将 postData 调暗为 String = "name1="+value1+"&name2="+value2

Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)

休息将保持不变。

# spell-checking - 如何使用 Membase 进行拼写检查？

> ID：12198725
> 
> 赞同：3
> 
> 时间：2012-08-30T14:04:06.983
> 
> 标签：spell-checking, membase

我有一个 membase 服务器，并且有一个单词列表，这是我的字典。现在我有一些单词可以用来进行拼写检查。我无法想出一些好的算法。任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:10:28.783

免责声明：找到了我不久前收藏的链接。前段时间从类似的SO讨论中获得了链接，也许您可​​以搜索它。

查看以下链接。第一篇是关于如何编写拼写检查器的文章，其他的都是为了让它更快：

[http://norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

[http://en.wikipedia.org/wiki/Bloom_filter](http://en.wikipedia.org/wiki/Bloom_filter)

[http://theyougen.blogspot.ca/2010/02/faster-spelling-corrector.html](http://theyougen.blogspot.ca/2010/02/faster-spelling-corrector.html)

希望能帮助到你。

# jquery - 将 ajax 函数附加到表单提交失败

> ID：12198726
> 
> 赞同：0
> 
> 时间：2012-08-30T14:04:08.263
> 
> 标签：jquery

我正在尝试编写一个简单的插件来附加到表单提交，就像一个更简单的版本：http: [//jquery.malsup.com/](http://jquery.malsup.com/)

这是我的代码：http: [//jsfiddle.net/RYh33/6/](http://jsfiddle.net/RYh33/6/)

go() 函数在文档就绪外部定义，然后在文档就绪时立即调用。此调用有效并返回状态 200。

只要您单击其中一个提交按钮，Firebug 就会显示 POST 已中止。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:14:40.490

如果您要为表单提交编写自定义内容，我相信您需要有一个返回值。举个例子，看看我前几天写的一段话：

```
$('#cmdform').submit(function(e){
    if ($('#param').attr('disabled') != 'disabled' && $.trim($('#param').val()) == ''){
        // This interrupts the form submit
        e.preventDefault();
        alert('Enter the required parameter first');
        $('#param').val('');
        return false;
    } else if ($('#router option:selected').val() == 'none'){
        e.preventDefault();
        alert('Choose a proper device');
        $('#param').val('');
        return false;
    } else {
        $('#output').empty();
        $('#output').append('<p>Loading, please wait....</p>');
        $('#execute').attr('disabled', 'disabled');
        return true;
    }
}); 
```

正如您在此处看到的，我的提交函数的每条路径都返回 true 或 false。试试看，看看它会把你带到哪里。

# sql - 随机分配一个范围内的唯一编号

> ID：12198729
> 
> 赞同：1
> 
> 时间：2012-08-30T14:04:15.597
> 
> 标签：sql, tsql, random, range, unique

我需要为员工列表分配一个从 1 到 1000 的唯一编号（或者有多少员工）。这些数字不能重复，并且需要按照员工列表的随机顺序排列。这些号码还需要每周重新生成，以便为员工分配一个新号码。

我尝试使用以下内容，但是脚本很慢，并且它为所有员工返回相同的数字。

```
DECLARE @Random INT;
DECLARE @Upper INT;
DECLARE @Lower INT

SET @Lower = 1 
SET @Upper = 1000 
SELECT @Random = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)
select personnum, firstnm, lastnm, (SELECT @Random)
from person 
```

谁能阐明如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:23:06.590

适用于 mssql 服务器 2005+

```
select personnum, firstnm, lastnm, row_number() over (order by newid()) randomnumber
from person 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:10:13.217

为它创建一个函数。这是我们使用的一个：

```
ALTER FUNCTION [dbo].[fn_GenerateUniqueNumber]()
RETURNS char(10)

AS 
BEGIN
    --DECLARE VARIABLES
    DECLARE @RandomNumber VARCHAR(10)
    DECLARE @I SMALLINT
    DECLARE @RandNumber FLOAT
    DECLARE @Position TINYINT
    DECLARE @ExtractedCharacter VARCHAR(1)
    DECLARE @ValidCharacters VARCHAR(255)
    DECLARE @VCLength INT
    DECLARE @Length INT

    --SET VARIABLES VALUE
    SET @ValidCharacters = '0123456789'   
    SET @VCLength = LEN(@ValidCharacters)
    SET @ExtractedCharacter = ''
    SET @RandNumber = 0
    SET @Position = 0
    SET @RandomNumber = ''
    SET @Length = 10
    SET @I = 1

    WHILE @I < ( @Length + 1 )
        BEGIN
            SET @RandNumber = (SELECT RandNumber FROM [RandNumberView])
            SET @Position = CONVERT(TINYINT, ( ( @VCLength - 1 ) * @RandNumber + 1 ))
            SELECT  @ExtractedCharacter = SUBSTRING(@ValidCharacters, @Position, 1)
            SET @I = @I + 1
            SET @RandomNumber = @RandomNumber + @ExtractedCharacter
        END

    RETURN @RandomNumber
END 
```

要使用它，请执行以下操作：

```
SELECT personnum, firstnm, lastnm,dbo.fn_GenerateUniqueNumber()
FROM person 
```

您可以修改参数和允许的值以确保它是您想要的数字类型。

# perl - 如何使用 printf 打印我的函数？

> ID：12198732
> 
> 赞同：1
> 
> 时间：2012-08-30T14:04:24.913
> 
> 标签：perl

我写了一个倒计时功能。

我想这样打印，从 00:05 开始

因此我这样做了，但它没有正确打印，它覆盖了我的句子。你能帮忙修一下吗？

```
printf("\nStarts in %02d:%02d",countdownsleep(5));

# Sub for countdown
sub countdownsleep {
    my $x = shift;
    my $t = 1 *$x;
    my ($m,$s);
    my $stoptime = time + $t;
     while((my $now = time) < $stoptime) {
   #printf( "%02d:%02d\r", ($stoptime - $now) / 60, ($stoptime - $now) % 60);
   $m = ($stoptime - $now) / 60;
   $s = ($stoptime - $now) % 60;
    select(undef,undef,undef,1);
 }
 return ($m,$s);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:23:12.143

问题是您正在使用`\r`(回车) - 它将回车返回**到字符串的开头**（因此在最好的情况下覆盖前 5 个字符）；AND 在没有“”的情况下会导致奇怪的打印行为`\n`（因此在 5 个字符之后可能不会打印任何其他内容）。

* * *

要解决您的问题，您需要在 countdownsleep () 内**的循环中执行此操作：**

```
$prefix = "Starts in "; # could be passed in as parameter to countdownsleep()
printf( "$prefix %02d:%02d\r", ($stoptime - $now) / 60
                               , ($stoptime - $now) % 60);
# NOTE this ^^^ - now you re-print your prefix every time and not lose due to \r 
```

在您的电话中：

```
countdownsleep(5); print "\n"; # printing is done by the loop inside already
# or if you added a $prefix parameter to it:
countdownsleep("Starts in ", 5); print "\n"; 
```

* * *

这就是为什么您需要在 VERY END 打印“\n”的原因

```
$ perl -e '{print "1234567"; printf("1\r");}'

$ perl -e '{print "1234567"; printf("8\r"); print "\n";}' # Works now
12345678

# And this is what CR really dows
$ perl -e '{print "1234567"; printf("z\r");  printf("yy\r");  print "\n";}'
yy34567z
$ perl -e '{print "1234567"; printf("z\r");  printf("yy\r");  print "zzzz";}'
zzzz 
```

* * *

换句话说，`\r`在没有换行符 () 的字符串末尾打印回车符 ( `\n`)**将实际上根本不打印字符串**- 更具体地说，将删除假设要打印的所有内容。

在字符串中的一些其他字符之前打印 ( `\r`) 将导致从行首打印后续字符，覆盖现有字符（与新字符一样多），但将保持后续字符完整 - 需要注意的是除非最后打印，否则不会打印未覆盖的字符`\n`。

*   `print "$something\r"; # prints nothing`

*   `print "$something\r$finish"; # prints $finish but not $something`

    ```
    # $finish is assumed to not contain "\r" 
    ```

*   `print "$something\r$finish\n";`

    ```
    # * prints $something (entirely)
    # * Moves to start of the line
    # * prints $finish overwriting as many characters  from $somthing as needed
    # * prints the rest of $something if it was longer than $finish
    # * prints newline. 
    ```

* * *

另一方面，您应该考虑使用现有的计数/进度 CPAN 模块，而不是自己滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:29:59.640

您正在“遭受缓冲”。在开头设置`$|--`以关闭标准输出的缓冲。

# asp.net-mvc-4 - 在 MVC4 中使用 DotNetOpenAuth 获取 Twitter 访问密钥

> ID：12198734
> 
> 赞同：3
> 
> 时间：2012-08-30T14:04:32.443
> 
> 标签：asp.net-mvc-4, twitter-oauth, dotnetopenauth

我正在使用 MVC4 创建一个应用程序，该应用程序将授权用户使用 Twitter 并让他们也从应用程序中发布推文。我可以使用 MVC4 中的 BuiltInOAuthClient.Twitter 毫无问题地对用户进行身份验证。[http://www.asp.net/web-pages/tutorials/security/enabling-login-from-external-sites-in-an-aspnet-web-pages-site](http://www.asp.net/web-pages/tutorials/security/enabling-login-from-external-sites-in-an-aspnet-web-pages-site)

我有访问令牌和 oauth_verifier，但我还需要从 Twitter 取回 acess_secret。[https://dev.twitter.com/docs/auth/implementing-sign-twitter](https://dev.twitter.com/docs/auth/implementing-sign-twitter)

我缺少的是如何将 oauth_verifier 传递回 Twitter 以使用 OAuthWebSecurity 获取访问密钥。

同样，我可以使用 Twitter 进行登录，但我还需要能够以用户身份使用 Twitter。我以前用 TweetSharp 库做过这个，但我试图在这个项目上使用 DotNetOpenAuth。

更新：我正在使用第一个链接中描述的 OAuthWebSecurity 类来管理身份验证。AuthConfig 中的 OAuthWebSecurity.RegisterClient 需要一个 DotNetOpenAuth.AspNet.IAuthenticationClient。您不能按照建议将其与 TwitterConsumer 类交换。

我可以使用第一个链接中描述的“内置”DotNetOpenAuth 身份验证部分，或者我可以使用自定义代码进行完全授权，但我正在尝试找到一种方法来做到这两个。

我可以单独做，但随后用户会看到两次 Twitter 对话框（一次登录，一次授权）。我希望有一种方法可以使用已经连接的身份验证部分，该部分使用 OAuthWebSecurity，但也包含授权部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T23:06:32.380

几天来，我一直在用这个头撞墙，但我终于有了一些有用的东西。有兴趣知道它是否是一个有效的解决方案！

首先，创建一个新的 OAuthClient：

```
public class TwitterClient : OAuthClient
{
    /// <summary>
    /// The description of Twitter's OAuth protocol URIs for use with their "Sign in with Twitter" feature.
    /// </summary>
    public static readonly ServiceProviderDescription TwitterServiceDescription = new ServiceProviderDescription
    {
        RequestTokenEndpoint =
            new MessageReceivingEndpoint(
                "https://api.twitter.com/oauth/request_token",
                HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
        UserAuthorizationEndpoint =
            new MessageReceivingEndpoint(
                "https://api.twitter.com/oauth/authenticate",
                HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
        AccessTokenEndpoint =
            new MessageReceivingEndpoint(
                "https://api.twitter.com/oauth/access_token",
                HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
        TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
    };

    public TwitterClient(string consumerKey, string consumerSecret) :
        base("twitter", TwitterServiceDescription, consumerKey, consumerSecret) { }

    /// Check if authentication succeeded after user is redirected back from the service provider.
    /// The response token returned from service provider authentication result. 
    protected override AuthenticationResult VerifyAuthenticationCore(AuthorizedTokenResponse response)
    {
        string accessToken = response.AccessToken;
        string accessSecret = (response as ITokenSecretContainingMessage).TokenSecret;
        string userId = response.ExtraData["user_id"];
        string userName = response.ExtraData["screen_name"];

        var extraData = new Dictionary<string, string>()
                            {
                                {"accesstoken", accessToken},
                                {"accesssecret", accessSecret}
                            };
        return new AuthenticationResult(
            isSuccessful: true,
            provider: ProviderName,
            providerUserId: userId,
            userName: userName,
            extraData: extraData);
    }
} 
```

重要的部分是将响应转换为 ITokenSecretContainingMessage。似乎响应一直都有 TokenSecret，但它只是在内部属性上。通过投射它，您可以访问公共财产。我不能说我喜欢这样做，但是我也不明白为什么~~DotNetOpenAuth~~ Asp.Net 团队首先隐藏了该属性。一定有充分的理由。

然后在 AuthConfig 中注册这个客户端：

```
OAuthWebSecurity.RegisterClient( new TwitterClient(
    consumerKey: "",
    consumerSecret: ""), "Twitter", null); 
```

现在，在 AccountController 的 ExternalLoginCallback 方法中，extraData 字典中提供了 accessSecret。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T22:04:18.073

该类`DotNetOpenAuth.AspNet.Clients.TwitterClient`只允许身份验证，不允许授权。因此，如果您使用该类，您将无法以该用户的身份发布推文。

相反，您可以使用`DotNetOpenAuth.ApplicationBlock.TwitterConsumer`没有此限制的 ，您甚至可以将此类型的源代码复制到您的应用程序中并根据需要对其进行扩展。

您应该能够增强`TwitterConsumer`该类（一旦将其复制到您自己的项目中）以实现所需的接口，以便`OAuthWebSecurity`该类接受它。否则，您可以直接使用`TwitterConsumer`自己来验证和授权您的 Web 应用程序，这样用户只能看到一次 Twitter，但您可以获得所需的所有控制权。毕竟，使用 ASP.NET 的人`TwitterConsumer`早在 Twitter 出现之前就已经在使用登录和授权后续调用 Twitter 了`OAuthWebSecurity`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T23:44:44.197

对于在 AuthConfig.cs 而不是 Microsoft.Web.WebPages.OAuth (MVC4 Internet Application) 中引用 Microsoft.AspNet.Membership.OpenAuth 的 WebForms 项目模板，我能够修改 Paul Manzotti 的答案以使其正常工作：

1.  创建一个派生自 DotNetOpenAuth.AspNet.Clients.TwitterClient 的自定义 Twitter 客户端类

    公共类 CustomTwitterClient : TwitterClient { public CustomTwitterClient(string consumerKey, string consumerSecret) : base(consumerKey, consumerSecret) { }

    ```
    protected override AuthenticationResult VerifyAuthenticationCore(AuthorizedTokenResponse response)
    {
        //return base.VerifyAuthenticationCore(response);
        string accessToken = response.AccessToken;
        string accessSecret = (response as ITokenSecretContainingMessage).TokenSecret;
        string userId = response.ExtraData["user_id"];
        string userName = response.ExtraData["screen_name"];

        var extraData = new Dictionary<string, string>()
                        {
                            {"accesstoken", accessToken},
                            {"accesssecret", accessSecret}
                        };
        return new AuthenticationResult(
            isSuccessful: true,
            provider: ProviderName,
            providerUserId: userId,
            userName: userName,
            extraData: extraData);
    } 
    ```

    }

2.  在 AuthConfig.cs 中添加自定义客户端

    ```
    public static void RegisterOpenAuth()
    {
        OpenAuth.AuthenticationClients.Add("Twitter", () => new CustomTwitterClient(
            consumerKey: ConfigurationManager.AppSettings["twitterConsumerKey"], 
            consumerSecret: ConfigurationManager.AppSettings["twitterConsumerSecret"]));
    } 
    ```

多多！现在您可以访问秘密了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T07:56:32.927

您可以通过设计自己的 TokenManager 从 OAuthWebSecurity 中提取 oauth_token_secret。当您在 OAuthWebSecurity.RegisterClient 中注册您的 Twitter 客户端时，您可以注册令牌管理器。

我使用此方法提取所需的值，以便能够绕过 Linq-to-Twitter 库的授权步骤。

我很快就会在我的博客上发布我的解决方案。

# django-admin - Django 投票教程。我收到数据库错误 1146

> ID：12198737
> 
> 赞同：0
> 
> 时间：2012-08-30T14:04:45.040
> 
> 标签：django-admin

所以我正在浏览 Django polls 教程。试图让管理站点为我工作。我可以加载它，它看起来很棒，然后我点击民意调查，然后添加一个民意调查。然后我输入名称以及 pub_date 和时间。然后我点击了保存按钮，我得到了这个很长的错误：

/admin/pollsTest/poll/add/ 处的 DatabaseError（1146，“表 'mydb.django_admin_log' 不存在”）

我一直在关注 T 的教程。我在 installed_apps 文件中有 django.contrib.admin。我运行了一个同步数据库。我编辑了 urls.py 文件以包含所有管理代码。仍然没有运气。我错过了一些明显的东西吗？

我打开了我的 sql 数据库，实际上该表不存在。所以我认为不知何故 syncdb 命令没有通过。此外，当我运行 syncdb 命令时，命令行的输出显示：

```
...File "C:\Python27\lib\site-packages\MySWLdb\connections.py", line 36, in defaulterrorhandler raiseclass, errorvalue django.db.utils.DatabaseError: (1050, "Table 'polls_poll' already exists") 
```

这是有道理的。syncdb 只应该添加当前不存在的表吗？我应该得到那种错误（就像一些 django 模块正在捕捉它并处理它）？我觉得它可能会遇到这个错误然后崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T18:02:23.457

如果您在将 django.contrib.admin 添加到 installed_apps 之前运行 manage.py syncdb，则会发生这种情况。只需再次运行 syncdb 即可修复。干杯!

# drupal - 按书页过滤搜索

> ID：12198741
> 
> 赞同：0
> 
> 时间：2012-08-30T14:05:00.983
> 
> 标签：drupal, drupal-7

Drupal 中是否有可用的模块或某种本机功能允许按书页进行搜索过滤？（例如，将搜索限制在书中的特定部分）

或者使用页面标题将分类法附加到书籍的一些简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:24:01.737

我认为您需要此模块[http://drupal.org/project/rules](http://drupal.org/project/rules)，借助它，您可以在 drupal 中执行某些操作时创建一组特殊的操作，在您的情况下，这是“创建节点”。例如，您可以从书页的标题创建新的分类术语，然后将此新术语附加到创建的页面。试试看，规则模块可以轻松解决很多像你这样的问题。

# java - 除非单击，否则隐藏 PDF 格式文本

> ID：12198742
> 
> 赞同：4
> 
> 时间：2012-08-30T14:05:05.633
> 
> 标签：java, pdf, pdf-generation, pdfbox, pdf-form

在我的应用程序中，我必须使用数据库中的数据填写预定义的 PDF 表单。我们正在使用 Java 和 Pdfbox。填充本身不是问题。

问题在于，在生成的 PDF 文件中，除非单击字段，否则表单中的所有文本都是不可见的（或隐藏的，也是灰色矩形）。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-05T12:15:04.083

当我尝试使用 pdfbox 以编程方式填写 PDF 表单时，我遇到了同样的问题。我将此答案添加到一个相当古老的问题，因为所有其他答案都在操纵原始 PDF，这并不总是一种选择。

不可见表单域的问题刚刚出现在 Acrobat PDF 中，其他 PDF 渲染器显示它很好。如果使用 pdfbox 1.8.x，您必须按照[此处](https://issues.apache.org/jira/browse/PDFBOX-71)`Need Appearances`的说明进行设置：

```
PDAcroForm form = docCatalog.getAcroForm();
form.getDictionary().setItem(COSName.getPDFName("NeedAppearances"), COSBoolean.TRUE); 
```

如果使用 pdfbox 2，则简化为：

```
PDAcroForm form = docCatalog.getAcroForm();
form.setNeedAppearances(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T22:08:56.790

我用 Java 中的 PDFBox 填写的表单遇到了这个确切的问题。

我通过在 Acrobat Pro 中打开原始（空白）PDF 表单并更改每个问题文本字段的一些选项来修复它。选项可能因您而异，但这对我有用：

在 Acrobat Pro 菜单栏中，转到表单 > 添加或编辑字段。右键单击 Acrobat Pro 中的文本字段并选择属性，然后：

在“选项”选项卡中：

*   取消勾选除“滚动长文本”以外的所有选项
*   在默认值框中添加几个空格字符

在“外观”选项卡中：

*   将字体大小设置为“自动”

单击“关闭表单编辑”并保存文件。

![字段选项](../Images/f1dd1f772bd4265f70398d6f7067c6d6.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T10:02:56.743

我在论坛上阅读了这篇文章并为我工作：

使用 Adob​​e Acrobat Pro，我使用“导出数据”将表单导出到 XML，然后使用“导入数据”将其从 XML 文件导入回来。这些命令位于表单/管理表单数据下

这是帖子的链接：[http ://forums.adobe.com/thread/637421](http://forums.adobe.com/thread/637421)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-28T19:24:37.160

在一个非常简单的事情起作用之前，我只是遇到了这个并尝试了多种事情的组合。我有 Adob​​e Acrobat 9.0，但我找不到这里写的一些选项。

我最终做的是一个两管齐下的过程：我去了**Forms > Manage Form Data > Export Data**；然后我将该文件保存在我的桌面上。接下来，我回到 Forms > Manage Form Data 但选择了**Import Data**，并选择了我刚刚保存的那个文件。答对了！一切都正确填写。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-22T15:40:17.627

在每个错误隐藏对象的外观选项卡中，您将看到“填充颜色”设置为无。再次将其设置为无（只需单击它）并保存 PDF，这些字段将正常显示。我不敢相信 adobe 让这个错误持续了这么久。当使用多个 pdf 阅读器查看/保存时，它会不断发生。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-17T10:22:26.583

我不太清楚将来如何阻止它发生，但让文件正常工作的解决方案，类似于 g-eorge 是在 adobe acrobat pro 中打开它，在右侧菜单上的工具中选择“交互式对象”并选择选择对象。

当您突出显示要修复的第一个字段时，您应该能够通过 control-a 选择所有交互式对象。全部选中后，右键单击一个字段并选择属性。

在“常规”选项卡中，底部选项应具有“通用属性”，其中“表单字段”选项将其更改为**隐藏**，然后返回**可见**。然后，这将恢复表单的所有可见性。

当我收到这个时，这对我来说在所有罕见的情况下都有效，并且没有让我失望过一次。希望对你也一样

鲍勃

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-20T06:44:11.973

我在这里尝试过的没有任何效果 - 除了更改软件。

我使用的是 PDFElement 6 Pro（试用版），但无法正常工作。使用 PDFBox 以及上面的所有建议尝试了各种事情。

最后尝试了[https://www.pdfescape.com/](https://www.pdfescape.com/)一切都很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-27T12:00:59.550

在我的情况下，我通过在属性中的“外观”选项卡中将字体更改为 Arial（或 Windows 集中的标准之一）来解决它。之前，它被设置为 Helvetica，它没有嵌入到文件中，我认为这会产生问题。

# ruby - 在 Ruby 中将字符串转换为日期

> ID：12198749
> 
> 赞同：2
> 
> 时间：2012-08-30T14:05:37.310
> 
> 标签：ruby

我正在尝试解析一个字符串`26/03/2012`，`dd/mm/yyyy`格式为 Ruby 的 Date using `Date.strptime`，如下所示：

```
#!/usr/bin/ruby
require 'date'
puts 'Ruby Version: ' + RUBY_VERSION
date_str = '26/03/2012'

date = Date.strptime(date_str, "%d/%m/%y")
puts 'Parsed Date: ' + date.to_s 
```

输出是：

```
Ruby Version: 1.8.7
Parsed Date: 2020-03-26 
```

年份部分变成`2020`了，而不是`2012`！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:08:27.270

那应该是`%Y`大写，而不是`%y`：

```
date = Date.strptime(date_str, "%d/%m/%Y")
puts 'Parsed Date: ' + date.to_s
# Parsed Date: 2012-03-26 
```

[从文档：](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)

```
 Date (Year, Month, Day):
    %Y - Year with century (can be negative, 4 digits at least)
            -0001, 0000, 1995, 2009, 14292, etc.
    %C - year / 100 (round down.  20 in 2009)
    %y - year % 100 (00..99) 
```

由于`%y`只需要两位数，因此它采用前两位`20`并假设它是 的 2 位表示`2020`，因为`2020 % 100 = 20`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:09:18.053

如果您将`strptime`功能更改为 `date = Date.striptime(date_str, "%d/%m/%Y")`

它会正确输出。

# php - 如果搜索结果不存在则隐藏表格

> ID：12198750
> 
> 赞同：0
> 
> 时间：2012-08-30T14:05:38.060
> 
> 标签：php, mysql, search

正是标题所说的。我希望隐藏包含所有搜索查询的表，但我尝试了很多东西，但没有一个有效。例如，`if($myData!=null) {proceed with showing the table}`，但这不起作用。`isset()`也没有工作。有任何想法吗？

```
<style>
    ul
    {
        list-style-type: none;
    }

</style>

<html>
    <head>
        <meta  http-equiv="Content-Type" content="text/html;  charset=iso-8859-1">
        <title>Search Chemicals</title>
    </head>
    <p>
    <body>
        <h3>Chemical Information</h3>
        <p>You may search by Catalog number, CASRN, or the chemical name.</p>
        <form  method="post" action="search.php?go"  id="searchform">
            <input  type="text" name="name">
            <input  type="submit" name="submit" value="Search">
        </form>
        <?php
        error_reporting(0);

        if (isset($_POST['submit'])) {

            if (isset($_GET['go'])) {
                if (preg_match("/^[a-zA-Z0-9]+/", $_POST['name'])) {
                    $name   = $_POST['name'];
                    $conn   = mysql_connect("localhost", "Blimeo", "password");
                    $db     = mysql_connect("localhost", "-", "-") or die('I cannot connect to the database  because: ' . mysql_error());
                    //-select  the database to use
                    $mydb   = mysql_select_db("chemicals");
                    //-query  the database table
                    $sql    = "SELECT * FROM products WHERE Catalog LIKE '%" . $name . "%' OR CASRN LIKE '%" . $name . "%' OR Chemical_Name LIKE '%" . $name . "%'";
                    $myData = mysql_query($sql, $conn);
                    echo "<table border=1>
            <tr>
            <th>Catalog</th>
            <th>Image</th>
            <th>CASRN</th>
            <th>Chemical Name</th>
            <th>Quantity 1</th>
            <th>Price 1</th>
            <th>Quantity 2</th>
            <th>Price 2</th>
            <th>Quantity 3</th>
            <th>Price 3</th>
            <th>Quantity 4</th>
            <th>Price 4</th>
            </tr>";
                    while ($record = mysql_fetch_array($myData)) {

                        echo "<tr>";
                        echo "<td>" . $record['Catalog'] . "</td>";
                        echo "<td><img src=\"./img/" . $record['Image'] . "\" alt=\"Chemical\"/></td>";
                        echo "<td>" . $record['CASRN'] . "</td>";
                        echo "<td>" . $record['Chemical_Name'] . "</td>";
                        echo "<td>" . $record['Quantity1'] . "</td>";
                        echo "<td>" . $record['Price1'] . "</td>";
                        echo "<td>" . $record['Quantity2'] . "</td>";
                        echo "<td>" . $record['Price2'] . "</td>";
                        echo "<td>" . $record['Quantity3'] . "</td>";
                        echo "<td>" . $record['Price3'] . "</td>";
                        echo "<td>" . $record['Quantity4'] . "</td>";
                        echo "<td>" . $record['Price4'] . "</td>";
                        echo "</tr>";
                        echo "</form>";
                        echo "<ul>\n";
                        echo "<li>" . "<a  href=\"search.php?id=$ID\">" . $Catalog . " " . $CASRN . " " . $Chemical_Name . "</a></li>\n";
                        echo "</ul>";
                    }
                }
            } else {
                echo "<p>Product not found! Please rephrase your search criteria.</p>";
            }
        }
        ?>
    </body>
</html>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:08:21.613

你应该添加[`mysql_num_rows();`](http://php.net/mysql_num_rows)

```
$myData = mysql_query($sql, $conn);
$exists = mysql_num_rows($myData);
if($exists) {
    echo "<table border=1>";
    //..................
    echo "</table>";
} else {
    echo "<p>Product not found! Please rephrase your search criteria.</p>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:08:42.233

好吧，无论搜索查询的结果如何，您似乎都在回显您的表格。您可能应该检查结果集中返回的行数，并且仅在计数大于 0 时才回显表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:08:50.937

用于`<div visibility="hidden">`隐藏表格并使用 Javascript 根据搜索查询或其他条件更改可见性。

# c# - 实体框架每个请求上下文 - 如何处理错误？

> ID：12198751
> 
> 赞同：0
> 
> 时间：2012-08-30T14:05:37.717
> 
> 标签：c#, .net, entity-framework

我为我的实体采用了每个请求的上下文，主要是因为我的大部分活动都在获取，尽管有一些更新。

使用这种方法很难对更新问题做出反应。例如，如果 a) 在用户控件内失败，我可能需要执行 b)。每个用户请求的管理在我的 Global.asax 中。

是恢复这些实体的每笔交易的唯一方法还是我可以采取另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:11:08.740

当涉及到实际的数据库交互性时，是的，事务将是理想的场景，因为它变成了全有或全无的场景，即如果出现问题，*一切*都会回滚。

但是，如果您指的是您将记录作为单个事务插入的场景，然后稍后根据该记录进行进一步处理但失败，那么在这种情况下，您需要查看类似[命令模式](http://en.wikipedia.org/wiki/Command_pattern)的内容-它的要点是您将实施撤消机制。

# objective-c - 如何修复文本字段中的标签？

> ID：12198756
> 
> 赞同：2
> 
> 时间：2012-08-30T14:05:51.440
> 
> 标签：objective-c, ios5, uitextfield

我是 iOS 新手，我正在开发一个包含一些文本字段的应用程序。我希望当用户单击文本字段以输入文本时，不应删除标签（占位符）。[我希望我的文本字段显示在这张图片中](http://www.carettasoftware.com/gallery/images/IPC_ContactInfo_Stage2.png)

任何建议或示例代码将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:08:54.697

UILabel 和 UITextField 是两个不同的类。您需要使用静态 UILabel（用户交互：否）和 UITextField 构建视图以输入用户提供的内容。使用 Interface Builder 很容易。

# sql - 如何在 SQL Service Broker 中监控消息的使用期限？

> ID：12198757
> 
> 赞同：1
> 
> 时间：2012-08-30T14:05:51.883
> 
> 标签：sql, sql-server-2008, service-broker

我有一个 SQL Server 2008 Service Broker 队列，它通过调用 CLR 存储过程（反过来，通过 HTTP 将消息传输到第三方的 REST API）来处理消息。我需要掌握“如何备份？” 或“落后多远？” 这个队列是。虽然我知道队列中的消息总数是进度的一个很好的指标，但我感兴趣的是“最近处理的消息在队列中等待处理多长时间？” 据我所知，从队列中选择会为您提供其中的所有消息，但不会给出消息的年龄。例如：

```
SELECT TOP 100 *, casted_message_body = 
CASE message_type_name WHEN 'X' 
  THEN CAST(message_body AS NVARCHAR(MAX)) 
  ELSE message_body 
END 
FROM [SyncReadTargetQueue] WITH(NOLOCK) 
```

但是，没有一列表明年龄。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:42:33.303

要获取消息到达的时间，您可以在[sys.conversation_endpoints](http://msdn.microsoft.com/en-us/library/ms176082.aspx)中使用“security_timestamp” 。

如何监控 Service Broker - 也许[这](https://stackoverflow.com/questions/9798155/service-broker-queue-custom-reports/9808304#9808304)会有所帮助。

# c# - 在 SFTP 连接中引发了“System.OutOfMemoryException”类型的异常

> ID：12198758
> 
> 赞同：0
> 
> 时间：2012-08-30T14:05:59.823
> 
> 标签：c#, .net, out-of-memory, sftp

场景：ai 有一个与 SFTP 服务器建立连接并下载文件的应用程序。执行此操作的代码：

```
while (true)
{
    try
    {
        var connectionInfo = // creating a new connection info of a Renci.SshNet lib
        var client = new SftpClient(connectionInfo);
        client.Connect();

        using (SftpFileStream sftpFileStream = client.OpenRead(path)
        {
            using (FileStream fileStream = new FileStream(filePath, FileMode.CreateNew))
            {
                int BUFFER_SIZE = 2048;
                byte[] buffer = new byte[BUFFER_SIZE];

                int readBytes = sftpFileStream.Read(buffer, 0, BUFFER_SIZE);

                while (readBytes > 0)
                {
                    fileStream.Write(buffer, 0, readBytes);
                    readBytes = sftpFileStream.Read(buffer, 0, BUFFER_SIZE);
                }
            }
        }

        client.Dispose();
    }
    catch (Exception e)
    {
        log.Error(e);
    }

    Thread.Sleep(1 hour);
} 
```

在该行`client.Connect()`中引发了第一个错误：

`Renci.SshNet.Common.SftpPathNotFoundException: No such file at Renci.SshNet.Sftp.SubsystemSession.WaitHandle(WaitHandle waitHandle, TimeSpan operationTimeout) at Renci.SshNet.Sftp.SftpSession.RequestOpen(String path, Flags flags, Boolean nullOnError) at Renci.SshNet.Sftp.SftpFileStream..ctor(SftpSession session, String path, FileMode mode, FileAccess access, Int32 bufferSize, Boolean useAsync) at Renci.SshNet.Sftp.SftpFileStream..ctor(SftpSession session, String path, FileMode mode, FileAccess access) at Renci.SshNet.SftpClient.OpenRead(String path) at Infraero.TINE3.STTColetor.Negocio.Drivers.DriverAbstratoArquivoFTP.BaixarArquivoPABXSFTP(ConfiguracaoColetor configuracaoColetor, String arquivoPABX) in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Drivers\DriverAbstratoArquivoFTP.cs:line 446 at Infraero.TINE3.STTColetor.Negocio.Drivers.DriverAbstratoArquivoFTP.ProcessarArquivoSFTP(SftpFile arquivo, ConfiguracaoColetor configuracaoColetor, List'1 listaBilhetes) in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Drivers\DriverAbstratoArquivoFTP.cs:line 658 at Infraero.TINE3.STTColetor.Negocio.Drivers.DriverAbstratoArquivoFTP.ColetarBilhetes(ConfiguracaoColetor configuracaoColetor, List'1 listaBilhetes, String ultimoArquivoTransmitido) in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Drivers\DriverAbstratoArquivoFTP.cs:line 73 at Infraero.TINE3.STTColetor.Negocio.Coletor.ColetarBilhetes() in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Coletor.cs:line 56 at Infraero.TINE3.STTColetor.WindowsService.ServicoColetor..ctor() in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.WindowsService\ServicoColetor.cs:line 85`

1 小时后，该过程尝试再次下载文件，但在行中引发了一个新错误`client.Connect()`：

`System.Threading.Tasks.TaskSchedulerException: An exception was thrown by a TaskScheduler. ---> System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown. at System.Threading.Thread.StartInternal(IPrincipal principal, StackCrawlMark& stackMark) at System.Threading.Thread.Start(StackCrawlMark& stackMark) at System.Threading.Thread.Start(Object parameter) at System.Threading.Tasks.ThreadPoolTaskScheduler.QueueTask(Task task) at System.Threading.Tasks.Task.ScheduleAndStart(Boolean needsProtection) --- End of inner exception stack trace --- at System.Threading.Tasks.Task.ScheduleAndStart(Boolean needsProtection) at System.Threading.Tasks.Task.InternalStartNew(Task creatingTask, Object action, Object state, CancellationToken cancellationToken, TaskScheduler scheduler, TaskCreationOptions options, InternalTaskOptions internalOptions, StackCrawlMark& stackMark) at System.Threading.Tasks.TaskFactory.StartNew(Action action, TaskCreationOptions creationOptions) at Renci.SshNet.Session.ExecuteThread(Action action) at Renci.SshNet.Session.Connect() at Renci.SshNet.BaseClient.Connect() at Infraero.TINE3.STTColetor.Negocio.Drivers.DriverAbstratoArquivoFTP.ConectarServidorSFTP(String servidor, Int32 porta, String login, String senha) in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Drivers\DriverAbstratoArquivoFTP.cs:line 551 at Infraero.TINE3.STTColetor.Negocio.Drivers.DriverAbstratoArquivoFTP.RequisitarArquivoServidorSFTP(ConfiguracaoColetor configuracaoColetor) in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Drivers\DriverAbstratoArquivoFTP.cs:line 519 at Infraero.TINE3.STTColetor.Negocio.Drivers.DriverAbstratoArquivoFTP.ColetarBilhetes(ConfiguracaoColetor configuracaoColetor, List'1 listaBilhetes, String ultimoArquivoTransmitido) in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Drivers\DriverAbstratoArquivoFTP.cs:line 67 at Infraero.TINE3.STTColetor.Negocio.Coletor.ColetarBilhetes() in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.Negocio\Coletor.cs:line 56 at Infraero.TINE3.STTColetor.WindowsService.ServicoColetor..ctor() in D:\SVN\STT\trunk\3-0_CodigoFonte_Coletor\3-4_SRC\Infraero.TINE3.STTColetor.WindowsService\ServicoColetor.cs:line 85`

1天后，第二个错误继续，app的内存使用量从60MB增加到800MB。

**任何人都知道问题可能是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:09:28.583

快速浏览您正在使用的库的代码库 ( [http://sshnet.codeplex.com/SourceControl/changeset/view/18974](http://sshnet.codeplex.com/SourceControl/changeset/view/18974) ) 表明它`SftpClient`也实现了`IDisposable`，但您没有清理或关闭它当某事失败时。您应该尝试以下方法：

```
try
{
    var connectionInfo = // something
    using(var client = new SftpClient(connectionInfo))
    {
        client.Connect();
        using(var sftpFileStream = client.OpenRead(path))
        {
            // download the file
        }
    }
} 
```

它也可能是您正在使用的库内部的内存泄漏。

# iphone - 如何比较 iPhone 中的按钮框架？

> ID：12198760
> 
> 赞同：0
> 
> 时间：2012-08-30T14:06:02.570
> 
> 标签：iphone, drag-and-drop

我正在开发一个应用程序，我在 UIView 中创建多个按钮。在这里，用户可以将按钮位置移动到视图中的任何位置，并且每当更改按钮位置时，我想将移动的按钮位置框架与前一框架进行比较。让我简单解释一下，如果`( btn1 )`在 的位置`(100, 100, 30,40)`和`( btn2 )`的位置 `( 200,100,30,40)`，并且当我将我的拖动`( btn1 )`到新的位置时，这里我想获取移动的位置框架并与框架进行比较`( btn2 )`。如果它等于，那么我想移动`( btn2 )`到 `(btn1)`和`(btn1)`。`(btn2)`

例如：

```
Btn1(100, 100, 30,40)                 Btn2 ( 200,100,30,40) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:15:45.130

利用`CGRectEqualToRect(<#CGRect rect1#>, <#CGRect rect2#>)`

# android - 如何从 SQLite 中的表中获取行号

> ID：12198761
> 
> 赞同：-4
> 
> 时间：2012-08-30T14:06:05.040
> 
> 标签：android, sqlite, row-number

我如何知道某个特定名称是否存在于我的表中，以及它存在于哪一行（行号）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:28:35.430

我不知道你的数据库结构，但这里是简单的例子

```
Cursor c = database.query(TABLE,new String[]{_ID,NAME},NAME + "in(" + queryName + ")",null,null,null}; 
```

现在这将返回那些名称与 the 匹配`queryName`并`queryName`包含 like的行`('abc','pqr')`，现在在第二个参数中，我首先传递了列名 is `ROW ID`，另一个`NAME`现在通过迭代器。

# asp.net - 资源设计器文件 - 更改模板

> ID：12198765
> 
> 赞同：0
> 
> 时间：2012-08-30T14:06:17.007
> 
> 标签：asp.net, visual-studio-2012, stylecop, resource-files

更改本地化资源文件（例如 resources.de.resx）时，设计器代码会重新生成为空白。

**如何将其更改为自动生成的代码消息？**

IE

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

缺少自动生成的代码消息导致它被代码分析/源分析拾取，并在每次编辑开始变得烦人后将其放回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:40:15.930

将 StyleCop.Settings 文件添加到项目并取消选中分析设计器文件，StyleCop 将忽略 resource.de.designer.cs 文件。

# oracle - PL/SQL 检查约束：一列上的值取决于另一列

> ID：12198768
> 
> 赞同：3
> 
> 时间：2012-08-30T14:06:24.563
> 
> 标签：oracle, plsql

使用 PL/SQL，我正在构建一个包含配置的表，该表根据比率将样本分布定义为 2 个不同的集合。它有 4 列：sample_type、set_1、set_2、比率（进入 set_1 的样本百分比）。例如，如果一行是 ('walk', 'left', 'right', 50)，这意味着对于类型为 'walk' 的样本，其中 50% 为 'left' 而其余的为 'right'。

我想添加一个检查约束，如果只有比率为 100，则确保 set_2 为空，即 100% 的样本进入 set_1。我尝试类似：

```
ALTER TABLE CONFIG
ADD CONSTRAINT CHK
CHECK (
    NOT EXISTS (SELECT 1 FROM CONFIG WHERE SET_2 IS NULL AND RATIO <> 0)
) 
```

但是，Oracle 不允许检查子查询。那么，是否有另一种方法可以为这种情况添加检查约束？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:31:51.627

```
ALTER TABLE CONFIG
ADD CONSTRAINT CHK
CHECK (
    (RATIO = 100) OR (SET_2 IS NOT NULL AND RATIO != 100)
) 
```

而且我不完全确定这是否是一个要求，但如果 SET_2 在 100 的情况下需要为空，那么你会想要这个：

```
ALTER TABLE CONFIG
ADD CONSTRAINT CHK
CHECK (
    (SET_2 IS NULL AND RATIO = 100) OR (SET_2 IS NOT NULL AND RATIO != 100)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:11:02.877

将

```
ALTER TABLE CONFIG
ADD CONSTRAINT CHK
CHECK (
    SET_2 IS NULL AND RATIO <> 0
) 
```

工作？

# c++ - C++：按引用返回到按值返回

> ID：12198770
> 
> 赞同：4
> 
> 时间：2012-08-30T14:06:30.253
> 
> 标签：c++, pass-by-reference

我一直在阅读 Myers 的书，并在通过引用/指针与按值返回时遇到了该项目。关键是，如果我们的函数例如是这样的：

```
ClassA& AddSomething(ClassA classA)
{
  ClassA tempClassA;
  //... do something on tempClassA
  return tempClassA;
} 
```

这不起作用，因为我们正在返回对在堆栈上创建的对象的引用，并且现在函数完成后它已经死了。

他给出了两个解决方案：

1.  在函数内部使用本地静态 ClassA。这有其问题，但至少我们可以确定该对象存在。
2.  作为对象返回：

    ```
    ClassA AddSomething(ClassA classA)
    {
      ClassA tempClassA;
      //... do something on tempClassA
      return tempClassA;
    } 
    ```

现在，如果我要做：

```
ClassA obj1;
ClassA obj2 = AddSomething(obj1); 
```

我现在的困惑是，在执行这一行时：

1.  制作 tempClassA 的“副本”并将其传递给 ClassA 的复制构造函数（以初始化 obj2）？或者
2.  tempClassA 将自身传递给 ClassA 的复制构造函数，因为复制构造函数需要一个引用。

所以基本上，传递给复制构造函数的是对 tempClassA 的引用（在函数内部的堆栈中创建）或对 tempClassA 副本的引用。

另外，我的另一个问题是，我已经读过，如果我得到一个函数局部变量的引用，在这种情况下，局部变量将不会被删除。例如，

```
ClassA & classRef = AddSomething(obj1); 
```

在这种情况下，如果 AddSomething() 返回一个引用，则 classRef 不会指向已删除的引用，因为将保留局部变量。我是否正确理解了这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:10:12.177

在最坏的情况下，你是对的：一个副本`tempClassA`被传递给复制构造函数。但是允许编译器消除该副本并在适当的位置构造结果形式`tempClassA`。这被称为“返回值优化”或 RVO。我不知道不这样做的编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:12:03.620

当一个对象按值返回时，会发生两份副本：一份从局部变量到返回值，另一份从返回值到目标对象。但是，允许实现*省略*这些副本中的一个或两个；这在第一种情况下称为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)(RVO)，在第二种情况下称为[复制省略。](http://en.wikipedia.org/wiki/Copy_elision)

```
Object some_function() {
    return Object();    // copy Object() into return value; candidate for RVO
}
Object another_function() {
    Object obj;
    return obj;         // copy obj into return value; candidate for NRVO
}
Object result = some_function();   // copy return value into result; candidate for copy elision 
```

上面的第二个函数是 RVO 细化类型的候选函数，称为*命名*返回值优化；RVO 的最简单形式仅适用于在原地构造返回值的返回语句。

关于您的第二个问题，生命周期延长仅适用于对按值返回的对象的*const引用；*您在第二个问题中的代码不会延长任何对象的生命周期。有关更多详细信息，请参阅[返回临时对象并绑定到 const 参考](https://stackoverflow.com/questions/11560339/returning-temporary-object-and-binding-to-const-reference)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:38:26.577

您永远不能通过引用返回函数局部变量。即使您使用 const 引用来捕获返回值，它也不起作用，如下所示：

```
const ClassA& classRef = AddSomething(obj1); 
```

因为如果 AddSomething 通过引用返回一个本地对象，那么当 classRef 引用它时，它将是一个对不存在对象的悬空引用。

# sql - 将来自 8 个其他查询的数据获取到相同结构中的新查询

> ID：12198774
> 
> 赞同：0
> 
> 时间：2012-08-30T14:06:41.337
> 
> 标签：sql, group-by, append, ms-access-2010

我有 8 个查询来执行计算并将结果保存在其中一列中。

每个查询的列标题遵循相同的结构；

```
CompanyYearAssetID, CompanyName, AssetName, Year, DatapointID, NameOfWhateverWasCalculated 
```

在每次计算中，都会为结果分配相同的 DatapointID。例如;

```
CompanyYearAssetID, CompanyName, AssetName, Year, DatapointID, ReservoirOIL
10001             , CompanyA   , Asset1   , 2011, 105014     , 5
10002             , CompanyB   , Asset1   , 2011, 105014     , 3
10003             , CompanyC   , Asset1   , 2011, 105014     , 0 
```

计算列的名称及其 DatapointID 是；

*   未分配油 105014
*   WellworkOIL 105015
*   油箱油 105016
*   年度停机OIL 105017
*   故障计划外工厂OIL 105018
*   工厂计划维护OIL 105019
*   出口油 105020
*   市场油 105039

我想创建一个查询以理想地使用列标题将所有结果放入一个表中

```
CompanyYearAssetID, DatapointID, DatapointValue 
```

**有谁知道我将如何构建这个？**

以防万一您需要它们，这里有 8 个查询名称；

1.  PE_Field_UnallocatedOIL
2.  PE_Field_WellworkOIL
3.  PE_Field_ReservoirOIL
4.  PE_Field_AnnualShutdownOIL
5.  PE_Field_FailureUnplannedPlantOIL
6.  PE_Field_PlantPlannedMaintenanceOIL
7.  PE_Field_ExportOIL
8.  PE_Field_MarketOIL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:10:27.030

好吧，如果查询 1 和查询 2 都返回相同的数据像这样

```
CompanyYearAssetID, CompanyName, AssetName, Year, DatapointID, ReservoirOIL
10001             , CompanyA   , Asset1   , 2011, 105014     , 5
10002             , CompanyB   , Asset1   , 2011, 105014     , 3
10003             , CompanyC   , Asset1   , 2011, 105014     , 0

SELECT * FROM (
   Select * from Query1
   UNION ALL
   Select * from Query2) 
```

所以这个查询的结果就是

```
CompanyYearAssetID, CompanyName, AssetName, Year, DatapointID, ReservoirOIL
10001             , CompanyA   , Asset1   , 2011, 105014     , 5
10002             , CompanyB   , Asset1   , 2011, 105014     , 3
10003             , CompanyC   , Asset1   , 2011, 105014     , 0
10001             , CompanyA   , Asset1   , 2011, 105014     , 5
10002             , CompanyB   , Asset1   , 2011, 105014     , 3
10003             , CompanyC   , Asset1   , 2011, 105014     , 0 
```

您像普通表一样查询

```
 SELECT * FROM (
       Select * from Query1
       UNION ALL
       Select * from Query2)
where Year = 2011 AND ReservoirOIL > 0 
```

# c# - 将结构或类用于字符串的优缺点

> ID：12198778
> 
> 赞同：-4
> 
> 时间：2012-08-30T14:06:53.287
> 
> 标签：c#, .net

> **可能重复：**
> [字符串和字符串有什么区别](https://stackoverflow.com/questions/7074/what-is-the-difference-between-string-and-string)

我有两种情况，结构和类都可以接受，我想知道最佳实践是什么。

场景一：

```
public static String foo(){...}//String is a class

public static string foo(){...}//string is a struct 
```

场景二：

```
public foo(String bar){...}//String is a class

public foo(string bar){...}//string is a struct 
```

每个实施的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:08:27.840

实现是相同的。`String`是一个类，`string`只是别名。

有关详细信息，请参阅以下答案： [C# 中的 String 和 string 有什么区别？](https://stackoverflow.com/questions/7074/what-is-the-difference-between-string-and-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:09:15.387

`String`并且`string`是一回事。它们都是引用类型，这意味着它们是类（小 's'`string`是真实类的别名`String`）。

我个人更喜欢在我的代码中使用类名而不是别名。我想我更喜欢声明某种类型的变量然后使用这些类型的静态方法（如`String.Format`）之间的一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:11:38.073

String 和 string 相同，例如 Int32 和 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:09:04.113

string 只是 String 类型的别名，代码 MSIL 相同

# xcode - Xcode iOS 应用程序加载屏幕

> ID：12198781
> 
> 赞同：0
> 
> 时间：2012-08-30T14:07:03.823
> 
> 标签：xcode, animation, loading, default

希望在 iOS 应用程序中加载正常的“default.png”图像时做两件事。

例如，就像“割绳子”应用程序的启动方式一样。

1）想在启动时显示两个徽标屏幕（一个徽标屏幕和一个加载屏幕）

2）想让第二个屏幕动画显示应用程序加载的“加载”栏

很难找到任何好的例子或教程！

有人对这些项目中的任何一个有任何链接或有用的想法吗？

谢谢！

# maven - 如何使用 JsHint 和 wro4j 插件配置标准化缩进？

> ID：12198783
> 
> 赞同：1
> 
> 时间：2012-08-30T14:07:06.343
> 
> 标签：maven, plugins, jshint, wro4j

我想强制 4 个空格作为我的整个 js 代码库的默认和必需的缩进。

我已经设法让[jshint wro4j 插件](http://web-resource-optimization.blogspot.co.uk/2011/03/build-time-javascript-code-analysis.html)工作并遵守选项：

```
<options>browser,newcap,noarg,nonew,undef,trailing</options> 
```

但是，对于缩进，我需要指定所需的空格：

```
/*jshint indent:4 */ 
```

但似乎没有设施可以做到这一点？

我不确定我应该如何正确应用此选项，因为我尝试过的任何布局都会将错误视为无效选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:16:49.370

您可以通过添加以下规则来强制缩进规则检查：

```
<option>indent,white</option> 
```

默认情况下，缩进设置为 4 个字符。如果要设置不同的值，请使用：

```
<option>indent=2,white</option> 
```

# magento - Magento 密钥管理员登录

> ID：12198784
> 
> 赞同：1
> 
> 时间：2012-08-30T14:07:08.230
> 
> 标签：magento, login, key, admin

我昨天关闭了在 Magento (1.7) 管理 URL 中使用密钥的选项。今天，当我尝试登录时，它尝试使用密钥，但由于我禁用了它而失败。结果是我现在无法进入管理员，因为每个登录请求都失败了。谁能给我数据库中设置的位置，或者给我另一种方法来摆脱我为自己挖的洞？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:03:19.940

如果您无权访问 Magento 管理区域，但您想打开在 Magento 中使用密钥的选项，您可以尝试在 Magento 安装的数据库上执行 SQL 查询或使用 Web 界面（例如 phpmyadmin ）。

基本上，您必须在表**core_config_data**中找到 column **path** = **admin/security/use_form_key**的记录并将其值设置为**1**

 ****如果您使用 phpmyadmin 或类似软件，只需导航到表**core_config_data**找到所需的记录并更改值。如果您删除记录，它也将起作用，因为如果记录不存在，Magento 将获取 xml 配置文件的值并将该值设置为**1**

还要记住，一些 Magento 安装使用 DB 表前缀，并且表**core_config_data**可能有不同的名称，例如**prefix_core_config_data******

# sql - 不使用光标更新触发器

> ID：12198788
> 
> 赞同：0
> 
> 时间：2012-08-30T14:07:23.193
> 
> 标签：sql, sql-server, triggers, cursor

我需要创建一个触发器，只要在主表中修改记录，就会将记录添加到队列表中。添加到队列表的记录必须包含为该记录修改的每个字段。

到目前为止我有这段代码，但我认为它不适用于更新的多行：

```
ALTER TRIGGER [dbo].[tr_EmpHistory]    
ON [dbo].[employeeData]  
FOR UPDATE 
AS 
BEGIN      
DECLARE @FieldsUpdated xml,  
@FieldsUpdated1 varchar(100)       
SELECT @Fieldsupdated1 = ' ' 
SELECT 
@FieldsUpdated1 = @FieldsUpdated1 + ' emp_bankaccountnumber' 
FROM inserted as a,  
deleted as b  
WHERE a.emp_id = b.emp_id             
AND a.emp_bankAccountNumber <> b.emp_bankAccountNumber  
SELECT      
@FieldsUpdated1 = @FieldsUpdated1 + 'emp_salary ' 
FROM inserted as a,        
deleted as b   
WHERE a.emp_id = b.emp_id       
AND a.emp_salary <> b.emp_salary 

SELECT    
@FieldsUpdated1 = @FieldsUpdated1 + 'emp_SSN ' 
FROM inserted as a,  
deleted as b  
WHERE a.emp_id = b.emp_id            
AND a.emp_SSN <> b.emp_SSN  
SELECT 
@FieldsUpdated1 = @FieldsUpdated1 + 'emp_lname ' 
FROM inserted as a,  
deleted as b  
WHERE a.emp_id = b.emp_id           
AND a.emp_lname <> b.emp_lname  
SELECT      
@FieldsUpdated1 = @FieldsUpdated1 + 'emp_fname ' 
FROM inserted as a,  
deleted as b  
WHERE a.emp_id = b.emp_id     
AND a.emp_fname <> b.emp_fname  
SELECT 
@FieldsUpdated1 = @FieldsUpdated1 + 'emp_manager ' 
FROM inserted as a,  
deleted as b  
WHERE a.emp_id = b.emp_id          
AND a.emp_manager <> b.emp_manager  
SELECT @Fieldsupdated =  ( 
SELECT COLUMN_NAME AS Name 
FROM INFORMATION_SCHEMA.COLUMNS  
WHERE TABLE_NAME = 'employeeData' 
AND CHARINDEX(COLUMN_NAME,(ltrim(rtrim(@fieldsupdated1)))) > 0 
FOR XML AUTO, ROOT('Fields') )

INSERT INTO auditEmployeeData( 
audit_emp_id, 
audit_emp_bankAccountNumber,
audit_emp_salary, 
audit_emp_SSN, 
audit_emp_lname, 
audit_emp_fname, 
audit_emp_manager, 
ColumnsUpdated ) 

SELECT emp_id, 
emp_bankAccountNumber, 
emp_salary,    
emp_SSN,   
emp_lname,  
emp_fname,     
emp_manager,       
@FieldsUpdated   
FROM INSERTED  
END
GO 
```

如果我理解正确，如果一条记录更新了姓氏，而另一条记录同时更新了名字，那么两条记录都将被记录为名字和姓氏都发生了变化。那是对的吗？如果是这样，我怎样才能在不使用光标的情况下使其正常工作？

我能想到解决问题的唯一方法是使用游标，但我知道这不是一个好主意。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:23:16.463

如果更新了多条记录，您的代码将无法正常工作。

你真的与那个审计表结构有关吗？我们发现存储旧数据和新数据以及更改数据的应用程序或人员的 ID 和数据日期更有用。如果有人进行了您想要撤消的更改并且不允许您识别何时或谁进行了更改，这种结构将使检索数据变得非常困难。如果您还没有实现审计表，我会首先认真考虑重新设计它们。

如果我坚持你展示的设计，我会创建临时表或表变量来存储数据，因为你遍历每个字段。我会为第一个使用一个 isert，然后为其他每个使用一个合并语句来更新记录，如果它已经是 tehre，或者插入一个新的，如果不是。填充临时表后，我将使用该表中的选择插入到审计表中。这将比游标快，但由于审计表的设计非常糟糕，所以速度不快。通常不应将表设计为包含逗号分隔的列表，尤其是当您需要像在触发器中那样对查询进行性能时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:37:48.187

您可以使用`CASE`逐行构建值来显示更改的列：

```
select i.emp_id,
  case when i.foo <> d.foo then ',foo' else '' end +
  case when i.bar <> d.bar then ',bar' else '' end as changedcolumns
  from inserted as i inner join
    deleted as d on d.emp_id = i.emp_id 
```

一些额外的摆弄可以消除额外的分隔符。

# wcf - 远程服务器返回错误：(404) Not Found。WCF Web 异常

> ID：12198793
> 
> 赞同：0
> 
> 时间：2012-08-30T14:07:33.753
> 
> 标签：wcf, iis, windows-mobile, sync

嗨，我在我的服务器上的 IIS7 上有一个 WCF 同步服务托管，我可以在浏览器中访问 URL，实际上我构建了 WCF 服务，后来我通过添加我的 wcf 服务参考在我的解决方案中添加了一个 wcf 服务网站。在 service.svc 文件中，我提到了特定的服务。wcf 站点中的 web.config 看起来像

```
<configuration>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="ServiceBehavior" name="SimGuru_WCF.SimGuruDBCacheSyncService">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration=""
          contract="SimGuru_WCF.ISimGuruDBCacheSyncContract">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

当我尝试访问该服务时，它给了我“远程服务器返回错误：（404）未找到”但我仍然可以通过 URL 访问该服务并且 app.config 文件是

```
<configuration>

  <configSections>
  </configSections>
  <connectionStrings>
    <add name="SimGuru_WCF.Properties.Settings.ServerSimGuru_RetailConnectionString"
      connectionString="Data Source=SIMGURU\SQLEXPRESS;Initial Catalog=SimGuru_Retail;Integrated Security=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
   <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ISimGuruDBCacheSyncContract" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="SimGuru_WCF.SimGuruDBCacheSyncServiceBehavior"
        name="SimGuru_WCF.SimGuruDBCacheSyncService">
        <endpoint address="" binding="basicHttpBinding" contract="SimGuru_WCF.ISimGuruDBCacheSyncContract">
          <identity>
            <dns value="10.0.1.42"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://10.0.1.42:8731/SimGuruDBCacheSyncService/" />
          </baseAddresses>
          <timeouts closeTimeout="00:01:10" openTimeout="00:09:00" />
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SimGuru_WCF.SimGuruDBCacheSyncServiceBehavior">
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData="c:\log\Traces.svclog"  />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>
</configuration> 
```

有人可以帮我解决这个问题吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:49:41.030

我明白了，使用跟踪我能够解决我的问题

```
<diagnostics>
                         <messageLogging maxMessagesToLog="30000" 
                                 logEntireMessage="true" 
                                 logMessagesAtServiceLevel="true" 
                                 logMalformedMessages="true" 
                                 logMessagesAtTransportLevel="true">
                         </messageLogging>
                 </diagnostics>
  </system.serviceModel>
<system.diagnostics>
                 <sources>
                         <source name="System.ServiceModel" 
                                 switchValue="Verbose, ActivityTracing" 
                                 propagateActivity="true" >
                                 <listeners>
                                         <add name="xml" />
                                 </listeners>
                         </source>
                         <source name="System.ServiceModel.MessageLogging" 
                                 switchValue="Verbose">
                                 <listeners>
                                         <add name="xml" />
                                 </listeners>
                         </source>
                 </sources>
                 <sharedListeners>
                         <add name="xml" 
                              type="System.Diagnostics.XmlWriterTraceListener" 
                              initializeData="e2eTraceTest.e2e" />
                 </sharedListeners>
                 <trace autoflush="true" />
         </system.diagnostics> 
```

跟踪查看器向我解释了我做错的地方一件事是 sql server 的安全问题，而且我什至在我的 web.xml 中没有连接字符串属性。配置文件我在 wcf 服务上有一个，但在 wcf 网站上没有任何解决方法

谢谢大家的合作

# actionscript-3 - 如何在按钮单击时插入电影 - AS3

> ID：12198794
> 
> 赞同：0
> 
> 时间：2012-08-30T14:07:35.603
> 
> 标签：actionscript-3, flash, actionscript, action

我已经在频闪网站上工作了一段时间了[http://strobepage.com/](http://strobepage.com/)

我想让用户为闪光灯选择自己的颜色，这基本上意味着我将能够轻松地覆盖更多的颜色组合并在网站上占用更少的空间。到目前为止，我已经尝试制作 2 个电影剪辑，一个用于每种颜色..并将其作为一个实例和作为一个整体的影片剪辑（ MovieClip(colour1) ）引用以更改其颜色.. 这有效，但仅在该特定实例中，当用户单击“下一步”以进行时到 ROOT 影片的下一帧（显示交换的影片剪辑），影片剪辑已恢复到其原始状态。

有没有一种方法可以在按钮按下时为影片剪辑永久着色...我似乎认为没有..这就是我想的地方，嘿，为什么不制作一堆包含不同颜色的影片剪辑，然后按下按钮，其中一个影片剪辑被插入到另一个影片剪辑中，该影片剪辑将有 2 个帧在用户选择的影片剪辑之间交换......只是，我不知道如何做到这一点，以及它是否可能。 .

我希望我以一种可以理解的方式解释了这一点.. 有很多电影剪辑哈哈..

无论如何，提前感谢任何可以提出解决方案的人：D

请给出一个 AS3 示例来说明您所解释的内容：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:03:28.987

如果您想让它保持轻便和易于维护，您将需要使用代码，而不是时间线框架来获取您的颜色（这也将确保更快地执行闪光灯）。[使用ColorTransform](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html)很容易做到这一点。下面是我编写的封装该操作的函数；接受要着色的对象作为第一个参数，并接受颜色的十六进制值作为第二个参数。

```
function tint(obj:Object, color:uint):void {
    /* Colors the object using transform */

    // Pull the individual primaries
    var r:Number = (color >> 16 ) & 0xFF;
    var g:Number = (color >> 8) & 0xFF;
    var b:Number = color & 0xFF;

    // Apply if valid
    if (obj.hasOwnProperty("transform")) {
        obj.transform.colorTransform = new ColorTransform(0,0,0,1,r,g,b,0);
    }
} 
```

例如，假设您在舞台上有一个名为“box”的 DisplayObject，并且想要将其着色为亮蓝色，您将执行以下操作：

```
tint(box, 0x1b8afc); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:17:05.587

为每种颜色创建影片剪辑并放置在相同的 x、y 上。现在让它们都可见=假，并使特定的 mc 为可见=真。使用 colortransform 来反映其他 mc 的变化。

# mysql - 如何在mysql表中获取所有儿童的用户？

> ID：12198796
> 
> 赞同：1
> 
> 时间：2012-08-30T14:07:43.497
> 
> 标签：mysql, sql

我有一个用户表名。

它包含以下字段。

```
user_id  |  parent_user_id  | name 
```

考虑我的 user_id 是 5，我想获取具有 parent_user_id 5 的用户及其孩子和孩子的孩子等

如何获取特定父母ID的所有孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:40:43.613

你不能递归地做到这一点。你可以用`LEFT JOIN`s 来做，但你必须选择一个最大深度。

```
SELECT * FROM users u1
LEFT JOIN users u2 ON u1.user_id = u2.parent_user_id
LEFT JOIN users u3 ON u2.user_id = u3.parent_user_id
WHERE u1.user_id = [SOME_USER_ID] 
```

但正如[Mike Brant 建议](https://stackoverflow.com/questions/12198796/how-to-get-all-chidrens-users-in-mysql-table#comment16336923_12198796)的那样，您可能会考虑其他替代方案，例如[NoSQL](http://en.wikipedia.org/wiki/NoSQL)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:29:11.913

尝试类似的东西。

```
 SELECT user_id FROM users WHERE parent_user_id = "5" GROUP BY user_id 
```

这将给父 id 的所有孩子是 5

# java - 我在 Eclipse 中的 android 项目消失了？

> ID：12198801
> 
> 赞同：0
> 
> 时间：2012-08-30T14:07:58.527
> 
> 标签：java, android, eclipse

我想在 Eclipse 中从我的 Android 项目创建 .apk 文件，所以我点击了 File --> Export --> Export Android Application。我填写了必填字段，然后单击完成。之后我收到一个错误，我的所有应用程序文件都消失了，我只有一个名为“gen [Generated Java Files] 的文件，我无法打开它。

我试图在 Windows 资源管理器中手动搜索我的应用程序文件，但一切都消失了......

现在我没有应用程序文件，甚至没有 .apk

我的申请在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:30:17.300

尝试在您的工作区目录中查找它。

如果您不知道该位置，请单击文件 > 切换工作区，您将能够看到该位置。

或者你可以去：

```
\eclipse_directory\configuration\.settings\ 
```

`org.eclipse.ui.ide.prefs`使用文本编辑器（例如记事本）打开。

寻找`RECENT_WORKSPACES`。您将在那里找到工作区的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:25:03.963

只需使用免费恢复来恢复您删除的文件。在该磁盘扇区上写入任何内容之前，请尽快尝试。

# c++ - 哈希模板元函数和函数

> ID：12198808
> 
> 赞同：3
> 
> 时间：2012-08-30T14:08:38.940
> 
> 标签：c++, c++11

使用 C++ 模板元函数可以在编译时进行任何计算。因此，我正在考虑，如果以下可能：

```
void my_function(char const* string_ptr)
{
  switch (hash_function(string_ptr))
  {
    case hash_metafunction<"yoohooo">::value:
      ...
      break;

    case hash_metafunction<"woooooo">::value:
      ...
      break;

    ...
  }
} 
```

您能否提供有关在哪里可以找到散列函数和模板元函数的代码（库）的线索。如果不存在这样的库，您能否提示我如何自己滚动模板元函数？我特别担心`char const*`模板元函数的参数。也许一些预处理器魔法是可能的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T14:43:40.510

`constexpr`函数呢？当然，实现该哈希可能会很痛苦。你会有这样的东西：

```
// maybe another return type
constexpr uint64_t hash_metafunction(const char* input) {
    // replace some_value with the hash implementation
    return some_value;
}

void my_function(char const* string_ptr)
{
  switch (hash_function(string_ptr))
  {
    case hash_metafunction("yoohooo"):
      ...
      break;

    case hash_metafunction("woooooo"):
      ...
      break;

    ...
  }
} 
```

该`hash_metafunction`函数将在编译时执行。

*编辑*：这是一个天真的实现，它基本上将输入字符串转换为`uint64_t`：

```
constexpr uint64_t do_the_hash(const char* input, uint64_t value_so_far) {
    return *input ? do_the_hash(input + 1, (value_so_far << 8) | *input) : value_so_far;
}

constexpr uint64_t hash_metafunction(const char* input) {
    return do_the_hash(input, 0);
} 
```

现场演示[在这里](http://ideone.com/GcJMG)。

*编辑*：我已经实现了编译时*MD5 ，你可以在*[这里](https://github.com/mfontanini/Programs-Scripts/blob/master/constexpr_hashes/md5.h)找到源代码。为了使用它，请执行以下操作：

```
#include <iostream>
#include "md5.h"

int main() {
    constexpr auto value = ConstexprHashes::md5("constexpr rulz");

    std::cout << std::hex;
    for(auto v : value) {
        if(((size_t)v & 0xff) < 0x10)
            std::cout << '0';
        std::cout << ((size_t)v & 0xff);
    }
    std::cout << std::endl;
} 
```

这将打印出哈希：“b8b4e2be16d2b11a5902b80f9c0fe6d6”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T16:52:28.040

我[在 GitHub 上](https://gist.github.com/mattyclarkson/5318077)创建了一个as a gist`constexpr`版本。`MurmurHash3`

```
int main() {
  constexpr uint32_t hash = Murmur3_32("some_string_to_hash", 0xAED123FD);
  assert(hash == 4291478129);
} 
```

# android - 触发器 - 访问用户的未接来电记录

> ID：12198814
> 
> 赞同：0
> 
> 时间：2012-08-30T14:08:46.350
> 
> 标签：android, trigger.io

使用 Trigger.io 开发时如何访问用户的通话记录？具体来说，我希望在发生未接来电时执行一些代码。有人可以告诉我如何使用 Trigger.io 完成上述两件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:15:07.977

目前不支持访问用户的未接电话记录。

这是文档 - [http://docs.trigger.io/en/v1.4/index.html](http://docs.trigger.io/en/v1.4/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:12:15.747

我们目前没有任何计划支持这一点：iOS 上没有可用的官方 API，我们不会通过包含 Apple 不赞成的代码来危害其他 Trigger.io 用户应用程序的成功。

# android - Android：应用内购买 - 谷歌分析

> ID：12198821
> 
> 赞同：1
> 
> 时间：2012-08-30T14:09:14.653
> 
> 标签：android, logging, service, google-analytics, in-app-purchase

我在安卓应用中成功实现了应用内购买。我只想在谷歌分析中记录购买事件。如果应用程序在前台，我可以通过 PurchaseObserver 记录事件。但是如果应用程序在后台，如何在谷歌分析中记录事件。目前我正在使用 EasyTracking 库来记录事件。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:11:23.770

使用新的 v2 Google Analytics Android API 尝试类似的操作

```
public void onPurchaseCompleted() {
  Transaction myTrans = new Transaction.Builder(
      "0_123456",                                           // (String) Transaction Id, should be unique.
      (long) 2.16 * 1000000)                                // (long) Order total (in micros)
      .setAffiliation("In-App Store")                       // (String) Affiliation
      .setTotalTaxInMicros((long) 0.17 * 1000000)           // (long) Total tax (in micros)
      .setShippingCostInMicros(0)                           // (long) Total shipping cost (in micros)
      .build();

  myTrans.addItem(new Item.Builder(
      "L_789",                                              // (String) Product SKU
      "Level Pack: Space",                                  // (String) Product name
      (long) 1.99 * 1000000,                                // (long) Product price (in micros)
      (long) 1)                                             // (long) Product quantity
      .setProductCategory("Game expansions")                // (String) Product category
      .build());

    Tracker myTracker = EasyTracker.getTracker(); // Get reference to tracker.
    myTracker.trackTransaction(myTrans); // Track the transaction.
} 
```

# php - CakePHP 在时间结束前重新缓存内容

> ID：12198825
> 
> 赞同：2
> 
> 时间：2012-08-30T14:09:18.977
> 
> 标签：php, cakephp, caching

我有一个用 CakePHP 1.2 版编写的应用程序，由于对数据库的查询繁重且未优化，因此速度非常慢，这是 deleas 的一个示例：

```
$pedidos_entregas = $this->Pedido->query('select pedidos.*, lojas.*, pessoas.*, formas_pagamentos.* from pedidos inner join veiculos_periodos
          on pedidos.veiculos_periodo_id = veiculos_periodos.id inner join lojas
          on veiculos_periodos.loja_id = lojas.id inner join pessoas
          on pessoas.id = pedidos.pessoa_id inner join formas_pagamentos
          on pedidos.formas_pagamento_id = formas_pagamentos.id
          where
         (finalizado = 1 or pedidos.id in
         (
            select pedido_id from status_pedidos where statu_id = 11
         )
         ) order by entrega desc limit 200;'); 
```

缓存应用了 30 分钟，大大提高了网站性能。但是，在 30 分钟后，其中一位用户将不得不缓慢地查看页面，以再次填充缓存。

我捕获了完成每个缓存访问控制器包含的缓存使用的剩余时间。

```
 $vencimento = file_get_contents(CACHE . 'cake_siv_financeiro_pedidos_entregas');
$vencimento = explode("\n",  $vencimento);
$vencimento = $vencimento[0];
$agora = strtotime('now');

$faltam = ($vencimento - $agora)/60; //remaining time
echo $faltam; 
```

为此，在缓存30分钟之前获胜，当丢失10分钟或更少时，例如，如果有人访问该页面，则缓存已经被再次更新。

但是，用户仍将不得不缓慢地查看页面，因为必须完成查询。

我的问题是：在为用户呈现视图后如何执行某些功能？我想做这样的事情，但这不起作用

```
public function afterFilter() 
{
    parent::afterFilter();
    //$this->atualizar_log();   

    $saida = $this->output;
    $this->output = "";
    ob_start();
    print $saida;
    flush();
    ob_end_flush();
    //I need that sleep after html returned to browser
    sleep(500);
} 
```

我有第二个问题，说我有一张桌子亮片：

表 人 id (PK) 姓名 年龄 1 bob 20 2 ana 19 3 maria 50

我运行以下 sql

UPDATE people SET age = 20 where id <3  

这将影响 ID 行 1 和 2。在 CakePHP 中，如何在更新后获取受影响的 ID？（1和2）？？？

当我删除现有缓存时，这是必要的；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:20:58.520

请求后无法执行代码。最好的方法是设置一个 cron 作业。您需要将 Cake Shell 连接到 cron - 请参阅[http://book.cakephp.org/1.2/view/846/Running-Shells-as-cronjobs](http://book.cakephp.org/1.2/view/846/Running-Shells-as-cronjobs)

如果出于某种原因您不能使用 cron，请考虑让您的客户端向更新缓存的操作触发 AJAX 请求。这将在页面加载后发生，因此不会对用户造成延迟。

*编辑：链接到 1.2 版本的文档*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:18:40.583

**to second question:**

don't know if there is CakePHP way to do it but, you can still use mysql statement in query() method:

```
$sql = "SET @affids := '';
 UPDATE people
    SET age = 20
 WHERE id < 3
    AND ( SELECT @affids := CONCAT_WS(',', @affids, id) );
 SELECT TRIM(LEADING ',' FROM @affids) AS affected; ";

$rs = $this->MODELNAME->query($sql);
debug($rs); 
```

the query returns comma separated ids affected by the update.

# python - Python '\x0e' 逐字符 XOR 加密

> ID：12198826
> 
> 赞同：2
> 
> 时间：2012-08-30T14:09:19.463
> 
> 标签：python, encryption

我正在尝试使用 python 构建一个加密系统。它基于德国在二战中使用的洛伦兹密码机，但要复杂得多（7 位 ascii 加密和 30 个转子，与原来的 5 位和 12 个转子相比）。

到目前为止，我已经制定并编写了步进系统。我还创建了一个系统来分割明文。但是当检查输出时，逐个字符（通过不将密文拼接在一起）我得到了这个你好：

```
['H', 'Z', '\x0e', '>', 'f'] 
```

我已经意识到这`'\x0e'`一定是 ascii 中的一些特殊字符，但我确信当程序解密时，它会单独查看其中的每个字母。有人可以告诉我这`'\x0e'`意味着什么，是否还有其他这样的字符，以及是否有一种简单的方法可以绕过它。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:15:32.260

`'\x0e'`是 ASCII SO（移出）不可打印字符。它是单个字符，任何处理该字符串的合理程序都会这样对待它；您只是看到它是这样表示的，因为您正在`print`创建一个列表，该列表显示列表`repr`中每个值的 。

至于有没有其他的问题，有，有33个；ASCII 0-31 和 127 通常都被认为是通常不可打印的“控制字符”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:16:01.380

它是[ASCII](http://www.cs.tut.fi/~jkorpela/chars/c0.html) “移出”控制字符，不可打印。

> 与 SHIFT IN 和 ESCAPE 结合使用的控制字符，用于扩展代码的图形字符集。它可能会改变八位字节 33 - 126（dec.）的含义。国际标准 ISO 2022 中描述了使用代码扩展技术时此字符的效果。

# android - 偏好项目和明确的意图

> ID：12198831
> 
> 赞同：4
> 
> 时间：2012-08-30T14:09:31.440
> 
> 标签：android, sharedpreferences

我正在尝试从首选项项目中调用活动

理想情况下，我想简单地在 xml 中为该 Preference 项指定一个明确的意图

但是我的 google fu 抛弃了我，我只能找到隐含意图的例子，例如

```
<Preference android:title="@string/prefs_web_page" >
    <intent android:action="android.intent.action.VIEW"
            android:data="http://www.example.com" />
</Preference> 
```

我已经以编程方式在其他地方调用了我的活动，例如

```
Intent intent = new Intent(this, FileChooserActivity.class); 
```

但我想直接从 xml 调用它

这是可能的还是我叫错了树？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-19T05:57:37.147

我相信当前选择的答案不是明确的意图，而是隐含的。
为了使它成为一个明确的意图，

您的偏好 XML 应如下所示（定义 targetPackage 和 targetClass）：

```
<Preference android:title="@string/preference_title__intent_act" >
    <intent 
        android:targetPackage="com.mycompany.mypackage"
        android:targetClass="com.mycompany.mypackage.IntentActivityFromPreferences" />
</Preference> 
```

您在 AndroidManifest.xml 中的活动声明应如下所示：

```
<manifest 
    ...
    package="com.mycompany.mypackage">
    ...
    ...
        <activity 
            android:name="com.mycompany.mypackage.IntentActivityFromPreferences"
            android:label="@string/activity_intentactivityfromprefs_name">
        </activity>
</manifest> 
```

笔记：

*   “com.mycompany.mypackage”是AndroidManifest.xml中声明的根包
*   如果目标类不在“com.mycompany.mypackage”中，也可以，只要确保AndroidManifest.xml中的声明正确即可

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T14:23:17.250

targetPackage 和 targetClass 是您搜索的属性。

你可以使用这个：

```
<intent
    android:action="android.intent.action.MAIN"
    android:targetPackage="com.example.package"
    android:targetClass="com.example.package.FileChooserActivity" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:18:17.223

你可以这样做：

将此添加到您的首选项 XML：

```
<Preference
  android:key="TODO"
  android:title="@string/TODO"
  android:summary="@string/TODO">
    <intent
      android:action="com.example.test.pref.action"/>
</Preference> 
```

并将其添加到您的清单中以从首选项中打开的活动：

```
<activity android:name=".todo"
  android:label="@string/todo">
  <intent-filter>
    <action android:name="com.example.test.pref.action" />
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity> 
```

确保**com.example.test.pref.action**是唯一的！

**注意：** 如果您需要打开一个网站或任何您无法编辑其 Manifest 条目的 Activity，您需要使用 Intent 从您的 Activity com.example.test.pref.action 以编程方式打开它。

# jquery-plugins - 标签中的字母弄乱了 flot grapn

> ID：12198839
> 
> 赞同：1
> 
> 时间：2012-08-30T14:10:20.067
> 
> 标签：jquery-plugins, flot

我正在使用 flot 来显示条形图。由于x轴的标签比较长，所以我使用了一个js插件，名为jquery.flot.tickrotor.js。该标签在大多数计算机上看起来都很好。但是在某些计算机上，标签中的字母有点乱，字体看起来很奇怪。我真的很想张贴图片来展示展示，但我没有足够的声誉来这样做。有谁知道什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:36:33.837

标签可能使用 CSS 变换进行旋转。一些浏览器——主要是 IE 7 和 8——在渲染旋转标签方面做得很差。

如果插件支持直接将文本渲染到画布，启用它应该可以解决问题。否则你无能为力。由于这些浏览器由于年代久远而从市场上消失，问题最终会消失。

# bash - 用bash中的另一个文件替换整个文件

> ID：12198844
> 
> 赞同：42
> 
> 时间：2012-08-30T14:10:44.283
> 
> 标签：bash, replace, directory

我已经学习了如何使用 bash 脚本替换一行，但我想学习如何将整个文件替换为另一个文件夹中同名的另一个文件。这可能吗？？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-30T14:12:10.100

```
cp -f [original file] [new file] 
```

复制原始文件并覆盖目标文件（因此`-f`代表“强制”）。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2017-01-13T20:50:37.280

如果您试图仅复制文件的内容，请尝试

```
cat /first/file/same_name > /second/file/same_name 
```

这将用第一个文件的内容覆盖第二个文件的所有内容。但是，您的第二个文件的所有者、组和权限将保持不变。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-30T14:14:05.760

使用这些命令：

```
mv file1 file2 
```

如果 file2 不存在，则将 file1 重命名为 file2。如果 file2 存在，则将其内容替换为 file1 的内容。

```
mv -i file1 file2 
```

然而，与上面类似，由于`"-i"`指定了 (interactive) 选项，如果 file2 存在，则会在用 file1 的内容覆盖之前提示用户。

```
mv file1 file2 file3 dir1 
```

文件 file1、file2、file3 移动到目录 dir1。dir1 必须存在，否则`mv`将退出并出现错误。

```
mv dir1 dir2 
```

如果 dir2 不存在，则将 dir1 重命名为 dir2。如果 dir2 存在，则在目录 dir2 中创建目录 dir1。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-11-22T10:37:33.700

今天我需要相同的解决方案，唯一的改变是我需要用新版本替换许多用户目录中的旧版本 php 文件。我要去这里，只是将匹配与其他堆栈的答案混合并解决我的问题。我将@joseph 代码与 find 命令一起使用。

我在这里分享我的小代码，希望对某人有所帮助。

```
for file in $(find /home/*/ -type f -name 'timthumb.php');
do
    cat /home/timthumb.php > $file;
done 
```

# asp.net - 我是否需要做任何特别的事情才能在 .net 4 应用程序中包含 .net 2 程序集？

> ID：12198845
> 
> 赞同：0
> 
> 时间：2012-08-30T14:10:48.293
> 
> 标签：asp.net, dll

我有一个应用程序是 .net 4.0 应用程序，需要使用针对 .net 2.0 编译的 dll。该 dll 导致应用程序崩溃。为了完成这项工作，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:16:56.480

你可以阅读这篇文章，它非常有趣

[http://blog.paulbetts.org/index.php/2009/12/03/convert-a-net-2-0-dll-to-net-4-0-without-source/](http://blog.paulbetts.org/index.php/2009/12/03/convert-a-net-2-0-dll-to-net-4-0-without-sourc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:01:30.227

不，我记得唯一可能导致问题的是编译的 dll 版本，X64 或 x32

# requirejs - MathJax 与 RequireJS，如何设置配置

> ID：12198854
> 
> 赞同：1
> 
> 时间：2012-08-30T14:11:15.077
> 
> 标签：requirejs, mathjax

通常，我可以在脚本标签中包含 MathJax，例如：

```
<script src="path-to-MathJax/MathJax.js?config=default"></script> 
```

但是使用 RequireJS，我可以包含配置，但是配置会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-31T13:19:20.100

现在在 Mathjax 文档中进行了解释：

[https://github.com/mathjax/MathJax-docs/wiki/Integrating-mathjax-into-x%3A-require.js](https://github.com/mathjax/MathJax-docs/wiki/Integrating-mathjax-into-x%3A-require.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:21:18.557

github 上的 requirejs 文档提到您可以通过覆盖 requirejs 加载函数来获得对 URL 的细粒度控制： [https ://github.com/jrburke/requirejs/wiki/Fine-grained-URL-control](https://github.com/jrburke/requirejs/wiki/Fine-grained-URL-control)

```
<script src="require.js"></script>
<script>
(function () {
  var load = requirejs.load;
  requirejs.load = function (context, moduleId, url) {
    //modify url here, then call original load
    return load(context, moduleId, url);
  };

  //Now load code.
  require(['main']);
}());
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:38:53.537

不理想，因为您将失去仅在需要时加载它的能力。如果没有其他方法，您可以始终使用这种方法作为最后的手段。

与其从 require 中加载 MathJax，不如将其加载为脚本。

代替：

```
<script data-main="main" src="libs/require.js"></script> 
```

试试这个：

```
<script src="libs/require.js"></script>
<script src="path-to-MathJax/MathJax.js?config=default"></script>
<script>require(["main"]);</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:21:18.273

您也可以加载`require.js`并执行

```
<script>require(["path-to-MathJax/MathJax.js?config=default"]);</script> 
```

# aptana - 如何替换查找/替换对话框？

> ID：12198856
> 
> 赞同：2
> 
> 时间：2012-08-30T14:11:25.873
> 
> 标签：aptana, aptana3

有没有办法用默认的 Eclipse 弹出查找/替换对话框替换附加到当前编辑器底部的“内联”查找和替换框？

或者有没有办法让 aptana 找到/替换弹出窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:04:34.557

Aptana 的首选项中有一个选项。我使用的是第 3 版，它位于

Aptana Studio -> Find Bar -> Show Eclipse search dialog on 2nd Ctrl + F

# gps - Ti.Geolocation 回调仅在运行 KitchenSink 时有效

> ID：12198857
> 
> 赞同：0
> 
> 时间：2012-08-30T14:11:27.427
> 
> 标签：gps, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我对 Ti.Geolocation 有一个让我发疯的问题。目前只使用IOS平台。目标是在我带着手机四处走动时以尽可能高的准确度获得 GPS 回调。

问题是我从 KitchenSink 中的 geolocation.js 中复制了大部分代码，相关部分如下所示。对我来说看起来不错，但是我得到的行为很奇怪。

当我四处走动时，我只是没有得到定期的 GPS 回调！然而，指南针工作正常，并且一直向我发送回调。我也尝试过不订阅“航向”事件，但 GPS 行为没有改变。

只有一个事件可以触发带有正确数据的 GPS 回调，那就是运行 KitchenSink！切换到 KitchenSink 并返回也会给我一个准确度在 5 到 10 之间的回调。如果我不这样做，我的准确度可以高达 1500-2500（如果我得到一个回调，那就是）。

KitchenSink 似乎工作正常，但我看不到那个应用程序我没有做什么？！？

我已经关闭了手机中的 Wifi，所以它不会打扰。这个问题非常令人沮丧，我现在已经花了三天时间，有人可以帮忙吗？我也尝试过针对不同的 SDK 进行编译（通常是 2.1.1GA，但也低至 1.8.2）。没变。

```
if (locationServicesAvailable()) {
    // APPLICATION LOGIC
    ui.init();

    Ti.Geolocation.purpose = "Get Lat/Long of your current position";
    Ti.Geolocation.accuracy = Ti.Geolocation.ACCURACY_BEST;

    Ti.Geolocation.distanceFilter = 10;
    Ti.Geolocation.frequency = 0; /* as fast as possible */
    Ti.Geolocation.preferredProvider = Ti.Geolocation.PROVIDER_GPS;

    if (Ti.Geolocation.hasCompass) {
        //  TURN OFF ANNOYING COMPASS INTERFERENCE MESSAGE
        Ti.Geolocation.showCalibration = false;
        // SET THE HEADING FILTER (THIS IS IN DEGREES OF ANGLE CHANGE)
        // EVENT WON'T FIRE UNLESS ANGLE CHANGE EXCEEDS THIS VALUE
        Ti.Geolocation.headingFilter = 45;
        /*
        Ti.Geolocation.getCurrentHeading(handleCompass);
        Ti.Geolocation.addEventListener('heading', handleCompass);
        */
    }

    Ti.Geolocation.getCurrentPosition(handlePosition);
    Ti.Geolocation.addEventListener('location', handlePosition);

    ui.refresh.addEventListener('click', function(e) {
        Ti.Geolocation.getCurrentPosition(handlePosition);  
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:46:44.850

好的，看来我找到了问题的答案。就像将精度设置为 Ti.Geolocation.ACCURACY_NEAREST_TEN_METERS 一样简单。我正在使用 IOS 平台，如果重要的话，我位于瑞典（在农村）。不知道这个解决方案是否适用于所有人，但我已经看到了对这个问题的引用（http://developer.appcelerator.com/question/130596/strange-behavior-of-the-gps）和解决方案，所以我知道存在。

不知道为什么 ACCURACY_BEST 不起作用，但它不适合我。当我有时间时，我也会测试所有其他设置，但现在至少我可以继续开发。

# .net - .NET 4 应该使用哪个版本的 EntityFramework 带外组件？

> ID：12198864
> 
> 赞同：1
> 
> 时间：2012-08-30T14:11:53.837
> 
> 标签：.net, entity-framework

出于部署原因，我的开发团队目前坚持使用 .NET 4。

但是，我想使用带外`EntityFramework.dll`库（为了使用`DbContext`API），但我无法找到有关`EntityFramework.dll`v5 是否仅针对 .NET 4.5 或者它是否可以工作的任何信息（尽管性能降低和功能）在 .NET 4.0 上。

简而言之：我可以将`EntityFramework.dll`5 与 .NET 4.0 一起使用吗？还是我应该使用`EntityFramework.dll`4.3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:18:33.257

NuGet EntityFramework 5 包包含 Entity Framework 5.0 和 Entity Framework 4.4 DLL。如果将它包含在 .NET 4 项目中，您将获得 4.4 版本。如果将它包含在 .NET 4.5 项目中，您将获得 5.0 版本。正如您所怀疑的，4.4 缺少一些使其成为 5.0 的功能。您不能在 .NET 4 项目中使用 5.0 版本，但 4.4 版本可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:15:56.263

Entity Framework 5（nuget 包）在 .NET 4 上运行良好。有某些新功能（空间类型、自动查询编译）需要 .NET 4.5，但 90% 的 EF 开发都可以。

# select - input type="submit"? I have few input type="submit" buttons and I would like to make a "select" from these input buttons. But I guess there is a problem, because input type="submit" has a few elements which is not supported by <select&< h1="">ID：12198866

赞同：0

时间：2012-08-30T14:11:57.940

标签：select, input, option</select&<>

# javascript - bxSlider 字幕 - 多个属性

> ID：12198870
> 
> 赞同：0
> 
> 时间：2012-08-30T14:12:09.227
> 
> 标签：javascript, jquery, bxslider

我正在将 bxSlider 用于网站，我需要获取标题才能使用 title 和 alt 属性。

bxSlider jQuery中的代码如下；

```
{var c = a("img", g.eq(x)).attr("title"); if (c != "") { if (b.captionsSelector) { a(b.captionsSelector).html(c) } 
```

现在，我可以轻松地将其更改为使用一个或另一个属性。我不确定如何让这个同时使用标题和替代。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:16:44.997

我已经解决了这个问题......对于将来寻找类似解决方案的任何人来说，它就像添加一样简单；

```
+ a("img", g.eq(x)).attr("atitle") 
```

所以这;

```
{ var c = a("img", g.eq(x)).attr("alt"); if (c != "") { if (b.captionsSelector) { a(b.captionsSelector).html(c) } 
```

变成这个；

```
{ var c = a("img", g.eq(x)).attr("alt") + a("img", g.eq(x)).attr("atitle"); if (c != "") { if (b.captionsSelector) { a(b.captionsSelector).html(c) } 
```

# batch-file - 使用批处理文件删除远程计算机上存在的文件夹

> ID：12198872
> 
> 赞同：3
> 
> 时间：2012-08-30T14:12:12.050
> 
> 标签：batch-file, directory

我想使用批处理文件删除几个文件夹。
但问题是**这些文件夹存在于其他机器上**。
但我**可以在我的机器上远程访问这台**机器。

请帮我解决这个问题。我对此一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:47:08.013

一个不太全面但更简单的答案......

```
del /F \\myserver\w_root$\users\selah\selah.txt
del /F \\myserver\w_root$\users\selah\status.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:22:05.467

只要您可以使用具有删除权限的用户挂载远程文件夹，您就可以简单地执行以下操作：

```
rem Set up the remote path - assuming it is sharable
set MY_DIR=\\10.1.1.1\some\path

rem Mount the remote path
net use %MY_DIR% %MY_PASSWORD% /USER:%MY_USER%

rem Delete a file
if exist "%MY_DIR%\MyFile" del /F "%MY_DIR%\MyFile" >nul

rem Unmount the remote path
net use %MY_DIR% /delete >nul 
```

如果您想删除文件夹，您只需要确保挂载点至少比您要删除的位置高一级。

# symfony-1.4 - Symfony 1.4.11/Propel 1.4.2 中的加入查询异常

> ID：12198874
> 
> 赞同：0
> 
> 时间：2012-08-30T14:12:20.727
> 
> 标签：symfony-1.4, propel

我需要运行以下查询：

```
SELECT 
    m.TITLE, 
    m.MOMENTOIMAGE, 
    s.CREATED_AT, 
    s.UNREAD, 
    mem.FIRSTNAME, 
    mem.LASTNAME, 
    mem.MEMBER_PHOTO,
    mem.ID 
FROM `momento_send` s,
    `send_distribution` sd,
    `momento_distribution` d,
    `momento` m,
    `member` mem
WHERE
    s.momento_idmember=6 AND
    sd.id_send=s.id AND
    sd.id_distribution=d.id AND
    d.momento_id=m.id; 
```

为此，我在 Symfony 1.4 中编写了以下代码（使用 Propel 1.4.2）（感谢 @j0k）

```
$c = new Criteria();
$c->clearSelectColumns();
$c->addSelectColumn(MomentoPeer::TITLE);
$c->addSelectColumn(MomentoPeer::MOMENTOIMAGE);
$c->addSelectColumn(MomentoSendPeer::CREATED_AT);
$c->addSelectColumn(MomentoSendPeer::UNREAD);
$c->addSelectColumn(MemberPeer::FIRSTNAME);
$c->addSelectColumn(MemberPeer::LASTNAME);
$c->addSelectColumn(MemberPeer::MEMBER_PHOTO);
$c->addSelectColumn(MemberPeer::ID);

$c->addJoin(SendDistributionPeer::ID_SEND, MomentoSendPeer::ID, Criteria::INNER_JOIN);
$c->addJoin(SendDistributionPeer::ID_DISTRIBUTION, MomentoDistributionPeer::ID, Criteria::INNER_JOIN);
$c->addJoin(MomentoDistributionPeer::MOMENTO_ID, MomentoPeer::ID, Criteria::INNER_JOIN);
$c->addJoin(MomentoDistributionPeer::MOMENTO_IDMEMBER, MemberPeer::ID, Criteria::INNER_JOIN);

$c->add(MomentoSendPeer::MOMENTO_IDMEMBER, $memberid);

//echo $c->toString();exit;

$records = SendDistributionPeer::doSelect($c); 
```

运行此代码生成以下错误

```
[wrapped: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INNER JOIN momento_send ON (send_distribution.ID_SEND=momento_send.ID) INNER JOI' at line 1] 
```

有人可以建议，有什么问题。

只是为了提供更多信息，使用**echo $c->toString();exit;打印 SQL** 曾是

```
SELECT momento.TITLE, 
    momento.MOMENTOIMAGE, 
    momento_send.CREATED_AT, 
    momento_send.UNREAD, 
    member.FIRSTNAME, 
    member.LASTNAME, 
    member.MEMBER_PHOTO,
    member.ID 
FROM 
    INNER JOIN momento_send ON (send_distribution.ID_SEND=momento_send.ID) 
    INNER JOIN momento_distribution ON (send_distribution.ID_DISTRIBUTION=momento_distribution.ID) 
    INNER JOIN momento ON (momento_distribution.MOMENTO_ID=momento.ID) 
    INNER JOIN member ON (momento_distribution.MOMENTO_IDMEMBER=member.ID) 
WHERE momento_send.MOMENTO_IDMEMBER=6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:24:25.097

尝试`$c->setPrimaryTableName(MomentoPeer::TABLE_NAME);`

# mercurial - 制作没有前缀的 mercurial 存档

> ID：12198881
> 
> 赞同：3
> 
> 时间：2012-08-30T14:12:47.057
> 
> 标签：mercurial, archive

也许一个愚蠢的问题，但我的谷歌不工作。在我的存储库根目录上执行以下操作：

```
$ hg archive my_archive.tar.gz 
```

给我一个 tar.gz 文件，其中包含一个名为 的内部目录`my_archive`，然后在我的 repo 内容中。

我理解这是由`hg arhives`'s help 表示的：

> 添加到存档文件中的每个成员都有一个目录前缀。
> 
> 使用 -p/--prefix 为前缀指定格式字符串。默认是存档的基本名称，已删除后缀。

但这让我的部署工作流程感到困惑。我需要它没有内部目录。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:03:31.097

指定前缀为当前目录：

```
hg archive -p . my_archive.tar.gz 
```

# java - jsoup 超时异常

> ID：12198882
> 
> 赞同：3
> 
> 时间：2012-08-30T14:12:48.057
> 
> 标签：java, jsoup

```
java.lang.NullPointerException
java.net.SocketTimeoutException: connect timed out
    at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:404)
    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
    at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
    at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146) 
```

== 我在：

```
try
{
..
Document doc = Jsoup.connect(recevurl).get();
..

}
catch (IOException| NullPointerException ee)
{
ee.printStackTrace();
} 
```

我不知道如何摆脱这个异常？还有什么办法可以解决这个问题吗？我在想 IOException 会处理这个！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:45:38.163

尝试`Document doc = Jsoup.connect(recevurl).timeout(3000).get();`

# orchardcms - Orchard SpecFlow 测试未正确运行模块的迁移

> ID：12198883
> 
> 赞同：0
> 
> 时间：2012-08-30T14:12:48.587
> 
> 标签：orchardcms

我该如何纠正以下错误？由于出现错误，无法运行 SpecFlow 测试。

```
 NHibernate.AdoNet.AbstractBatcher Error: 0 : Could not execute command: INSERT INTO ..._TaxonomyCatalogPartRecord (General, Reproduction, Identification, Culture, Evolution, Morphology, Id) VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
  NHibernate.Util.ADOExceptionReporter Error: 0 : The column name is not valid. [ Node name (if any) = ,Column name = Evolution ]
  Orchard.ContentManagement.DefaultContentManager Error: 0 : GenericADOException thrown from IContentHandler by Orchard.Autoroute.Handlers.AutoroutePartHandler
  NHibernate.AssertionFailure Error: 0 : An AssertionFailure occurred - this may indicate a bug in NHibernate or in your custom types.
  NHibernate.Impl.AbstractSessionImpl Error: 0 : DTC transaction prepre phase failed 
```

这两列不是为我的模块的 TaxonomyCatalogPartRecord 创建的。我的模块的迁移似乎没有正确运行。

迁移有以下方法：

1.  “创建（）”返回 5
2.  “UpdateFrom5()”返回 8
3.  “UpdateFrom8()”返回 9
4.  “UpdateFrom9()”返回 10

该表在 Create() 中创建：

```
SchemaBuilder.CreateTable(
                "TaxonomyCatalogPartRecord",
                table =>
                table
                    .ContentPartRecord()
                    .Column<string>("General", c => c.Unlimited())
                    .Column<string>("Reproduction", c => c.Unlimited())
                    .Column<string>("Identification", c => c.Unlimited())
                    .Column<string>("Culture", c => c.Unlimited())
                ); 
```

在 UpdateFrom9() 中添加了这两列，代码如下：

```
SchemaBuilder.AlterTable("TaxonomyCatalogPartRecord", t => {
                t.AddColumn<string>("Evolution");
                t.AddColumn<string>("Morphology");
            }); 
```

SpecFlow 运行期间还出现以下错误：

```
 NHibernate.AdoNet.AbstractBatcher Error: 0 : Could not execute query: SELECT this_.Id as Id11_0_, this_.SerialNumber as SerialNu2_11_0_ FROM Settings_ShellDescriptorRecord this_ WHERE 1=1
  NHibernate.Util.ADOExceptionReporter Error: 0 : The specified table does not exist. [ Settings_ShellDescriptorRecord ]
  NHibernate.Util.ADOExceptionReporter Error: 0 : The specified table does not exist. [ Settings_ShellDescriptorRecord ] 
```

以及以下内容：

```
 NHibernate.AdoNet.AbstractBatcher Error: 0 : Could not execute query: 

  SELECT this_.Id as Id338_6_, this_.Number as Number338_6_, this_.Published as Published338_6_, this_.Latest as Latest338_6_, this_.Data as Data338_6_, this_.ContentItemRecord_id as ContentI6_338_6_, autoroutep4_.Id as Id269_0_, autoroutep4_.UseCustomPattern as UseCusto2_269_0_, autoroutep4_.CustomPattern as CustomPa3_269_0_, autoroutep4_.DisplayAlias as DisplayA4_269_0_, autoroutep4_.ContentItemRecord_id as ContentI5_269_0_, titlepartr5_.Id as Id270_1_, titlepartr5_.Title as Title270_1_, titlepartr5_.ContentItemRecord_id as ContentI3_270_1_, contentite1_.Id as Id337_2_, contentite1_.Data as Data337_2_, contentite1_.ContentType_id as ContentT3_337_2_, termpartre2_.Id as Id273_3_, termpartre2_.TaxonomyId as TaxonomyId273_3_, termpartre2_.Path as Path273_3_, termpartre2_.Count as Count273_3_, termpartre2_.Selectable as Selectable273_3_, termpartre2_.Weight as Weight273_3_, commonpart8_.Id as Id294_4_, commonpart8_.OwnerId as OwnerId294_4_, commonpart8_.CreatedUtc as CreatedUtc294_4_, commonpart8_.PublishedUtc as Publishe4_294_4_, commonpart8_.ModifiedUtc as Modified5_294_4_, commonpart8_.Container_id as Container6_294_4_, contenttyp9_.Id as Id339_5_, contenttyp9_.Name as Name339_5_ 

  FROM Orchard_Framework_ContentItemVersionRecord this_ left outer join Orchard_Autoroute_AutoroutePartRecord autoroutep4_ on this_.Id=autoroutep4_.Id left outer join Title_TitlePartRecord titlepartr5_ on this_.Id=titlepartr5_.Id inner join Orchard_Framework_ContentItemRecord contentite1_ on this_.ContentItemRecord_id=contentite1_.Id inner join Contrib_Taxonomies_TermPartRecord termpartre2_ on contentite1_.Id=termpartre2_.Id left outer join Common_CommonPartRecord commonpart8_ on contentite1_.Id=commonpart8_.Id left outer join Orchard_Framework_ContentTypeRecord contenttyp9_ on contentite1_.ContentType_id=contenttyp9_.Id WHERE this_.Published = @p0

  NHibernate.Util.ADOExceptionReporter Error: 0 : The specified table does not exist. [ Contrib_Taxonomies_TermPartRecord ]
  NHibernate.Util.ADOExceptionReporter Error: 0 : The specified table does not exist. [ Contrib_Taxonomies_TermPartRecord ]
  Orchard.Exceptions.DefaultExceptionPolicy Error: 0 : An unexpected exception was caught
  NHibernate.AdoNet.AbstractBatcher Error: 0 : Could not execute query: SELECT this_.Id as Id338_6_, this_.Number as Number338_6_, this_.Published as Published338_6_, this_.Latest as Latest338_6_, this_.Data as Data338_6_, this_.ContentItemRecord_id as ContentI6_338_6_, autoroutep4_.Id as Id269_0_, autoroutep4_.UseCustomPattern as UseCusto2_269_0_, autoroutep4_.CustomPattern as CustomPa3_269_0_, autoroutep4_.DisplayAlias as DisplayA4_269_0_, autoroutep4_.ContentItemRecord_id as ContentI5_269_0_, titlepartr5_.Id as Id270_1_, titlepartr5_.Title as Title270_1_, titlepartr5_.ContentItemRecord_id as ContentI3_270_1_, contentite1_.Id as Id337_2_, contentite1_.Data as Data337_2_, contentite1_.ContentType_id as ContentT3_337_2_, taxonomypa2_.Id as Id272_3_, taxonomypa2_.TermTypeName as TermType2_272_3_, commonpart8_.Id as Id294_4_, commonpart8_.OwnerId as OwnerId294_4_, commonpart8_.CreatedUtc as CreatedUtc294_4_, commonpart8_.PublishedUtc as Publishe4_294_4_, commonpart8_.ModifiedUtc as Modified5_294_4_, commonpart8_.Container_id as Container6_294_4_, contenttyp9_.Id as Id339_5_, contenttyp9_.Name as Name339_5_ FROM Orchard_Framework_ContentItemVersionRecord this_ left outer join Orchard_Autoroute_AutoroutePartRecord autoroutep4_ on this_.Id=autoroutep4_.Id left outer join Title_TitlePartRecord titlepartr5_ on this_.Id=titlepartr5_.Id inner join Orchard_Framework_ContentItemRecord contentite1_ on this_.ContentItemRecord_id=contentite1_.Id inner join Contrib_Taxonomies_TaxonomyPartRecord taxonomypa2_ on contentite1_.Id=taxonomypa2_.Id left outer join Common_CommonPartRecord commonpart8_ on contentite1_.Id=commonpart8_.Id left outer join Orchard_Framework_ContentTypeRecord contenttyp9_ on contentite1_.ContentType_id=contenttyp9_.Id WHERE this_.Published = @p0
  NHibernate.Util.ADOExceptionReporter Error: 0 : The specified table does not exist. [ Contrib_Taxonomies_TaxonomyPartRecord ]
  NHibernate.Util.ADOExceptionReporter Error: 0 : The specified table does not exist. [ Contrib_Taxonomies_TaxonomyPartRecord ]
  Orchard.Exceptions.DefaultExceptionPolicy Error: 0 : An unexpected exception was caught 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:03:18.447

将 AlterTable 方法更改为 AlterTable 方法的两个单独调用，如下所示：

```
 SchemaBuilder.AlterTable("TaxonomyCatalogPartRecord", t => t.AddColumn<string>("Evolution")); 
   SchemaBuilder.AlterTable("TaxonomyCatalogPartRecord", t => t.AddColumn<string>("Morphology")); 
```

或者您的语法可能是错误的，应该是

```
SchemaBuilder.AlterTable("TaxonomyCatalogPartRecord", t => {
                t.AddColumn<string>("Evolution"),
                t.AddColumn<string>("Morphology")
            }); 
```

但我不确定那个。祝你好运

# oracle - 为什么更新查询不起作用？

> ID：12198884
> 
> 赞同：0
> 
> 时间：2012-08-30T14:12:49.630
> 
> 标签：oracle, jsp, servlets, netbeans, glassfish

我在 servlet 中有一个更新查询。语法是正确的，但是当我执行查询时，什么也没有发生。执行保持冻结状态，命令永远不会结束。几分钟后，消息“广告：GRIZZLY0023：中断空闲线程：http-thread-pool-8080(5)”。每隔几秒打印一次

我尝试过：

```
con.stmt.executeUpdate ("SQL");
con.rset = con.stmt.executeQuery ("SQL"); 
```

并使用 PreparedStatement。

这是查询：

```
System.out.println(""
                    + " UPDATE JSP_TABLE SET "
                    + " field1        = '" + request.getParameter("input1") + "',"
                    + " field2= '" + request.getParameter("input2") + "',"
                    + " field3= '" + request.getParameter("input3") + "',"
                    + " field4= '" + request.getParameter("input4") + "',"
                    + " field5= '" + request.getParameter("input5") + "',"
                    + " field6= '" + request.getParameter("input6") + "',"
                    + " field7= '" + request.getParameter("input7") + "',"
                    + " field8= '" + indicador + " VS " + request.getParameter("input8") + "',"
                    + " field9= '" + request.getParameter("input") + " al " + request.getParameter("hasta9") + "'"
                    + " WHERE ID_PK = " + request.getParameter("inputPK")); 
```

我所有的语句、结果集和连接在使用结束时都会关闭。我有第二次更新，效果很好。

```
 package Funciones;

    import conexion.conectar;
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class ActualizarDinamica extends HttpServlet {

        protected void processRequest(HttpServletRequest request, HttpServletResponse response)
                throws ServletException, IOException, SQLException {
            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();
            conectar con = new conectar();
            try {
                /*
                 * TODO output your page here. You may use following sample code.
                 */
                con.stmt = con.conn.createStatement();

                String indicador = "";
                switch (Integer.parseInt(request.getParameter("indicador"))) {
                    case 1:
                        indicador = "Nivel de Servicio";
                        break;
                    case 2:
                        indicador = "Venta";
                        break;
                    case 3:
                        indicador = request.getParameter("txt_otro");
                        break;
                    case 0:
                        indicador = "Presencia";
                        break;
                };

                 /* way 1   
                  * con.rset = con.stmt.executeQuery(""
                        + " UPDATE JSP_TABLE SET "
                        + " FIELD1        = '" + request.getParameter("input1") + "',"
                        + " FIELD2           = '" + request.getParameter("input2") + "',"
                        + " FIELD3          = '" + request.getParameter("input3") + "',"
                        + " FIELD4  = '" + request.getParameter("input4") + "',"
                        + " FIELD5         = '" + request.getParameter("input5") + "',"
                        + " FIELD6       = '" + request.getParameter("input6") + "',"
                        + " FIELD7          = '" + request.getParameter("input7") + "',"
                        + " FIELD8         = '" + indicador + " VS " + request.getParameter("input8") + "',"
                        + " FIELD9     = '" + request.getParameter("input9") + " al " + request.getParameter("input10") + "'"
                        + " WHERE FIELD_PK = " + request.getParameter("input11_ID")); 

              con.rset = con.stmt.executeQuery(""
                        + " UPDATE JSP_TABLE2 SET"
                        + " FIELD_DATE =  TO_DATE('" + request.getParameter("input12") + " " + request.getParameter("input14") + ":" + request.getParameter("input13") + "','DD/MM/YYYY HH24:MI')"
                        + " WHERE FIELD_ID = " + request.getParameter("input11_ID"));

*/

              /*  way 2
                con.stmt.executeUpdate(""
                        + " UPDATE JSP_TABLE SET "
                        + " FIELD1        = '" + request.getParameter("input1") + "',"
                        + " FIELD2           = '" + request.getParameter("input2") + "',"
                        + " FIELD3          = '" + request.getParameter("input3") + "',"
                        + " FIELD4  = '" + request.getParameter("input4") + "',"
                        + " FIELD5         = '" + request.getParameter("input5") + "',"
                        + " FIELD6       = '" + request.getParameter("input6") + "',"
                        + " FIELD7          = '" + request.getParameter("input7") + "',"
                        + " FIELD8         = '" + indicador + " VS " + request.getParameter("input8") + "',"
                        + " FIELD9     = '" + request.getParameter("input9") + " al " + request.getParameter("input10") + "'"
                        + " WHERE FIELD_PK = " + request.getParameter("input11_ID"));

                con.stmt.executeUpdate(""
                        + " UPDATE JSP_TABLE2 SET"
                        + " FIELD_DATE =  TO_DATE('" + request.getParameter("input12") + " " + request.getParameter("input14") + ":" + request.getParameter("input13") + "','DD/MM/YYYY HH24:MI')"
                        + " WHERE FIELD_ID = " + request.getParameter("input11_ID"));
                     */

                //way 3
                PreparedStatement updateSmallQuery = null;
                PreparedStatement updateBigQuery = null;

                String bigQuery=
                        ""
                        + " UPDATE JSP_TABLE SET "
                        + " FIELD1        = '" + request.getParameter("input1") + "',"
                        + " FIELD2           = '" + request.getParameter("input2") + "',"
                        + " FIELD3          = '" + request.getParameter("input3") + "',"
                        + " FIELD4  = '" + request.getParameter("input4") + "',"
                        + " FIELD5         = '" + request.getParameter("input5") + "',"
                        + " FIELD6       = '" + request.getParameter("input6") + "',"
                        + " FIELD7          = '" + request.getParameter("input7") + "',"
                        + " FIELD8         = '" + indicador + " VS " + request.getParameter("input8") + "',"
                        + " FIELD9     = '" + request.getParameter("input9") + " al " + request.getParameter("input10") + "'"
                        + " WHERE FIELD_PK = " + request.getParameter("input11_ID");

                String smallQuery= ""
                        + " UPDATE JSP_TABLE2 SET"
                        + " FIELD_DATE =  TO_DATE('" + request.getParameter("input12") + " " + request.getParameter("input14") + ":" + request.getParameter("input13") + "','DD/MM/YYYY HH24:MI')"
                        + " WHERE FIELD_ID = " + request.getParameter("input11_ID");
                try {
                    con.conn.setAutoCommit(false);
                    updateSmallQuery = con.conn.prepareStatement(smallQuery);
                    updateBigQuery = con.conn.prepareStatement(bigQuery);
                    updateBigQuery.executeUpdate();
                    updateSmallQuery.executeUpdate();
                    con.conn.commit();
                } catch (SQLException e) {
                    System.out.println("catch!");
                    System.out.println(e.getMessage());
                    if (con != null) {
                        try {
                            System.err.print("Transaction is being rolled back");
                            con.conn.rollback();
                        } catch (SQLException excep) {
                        }
                    }
                } finally {
                    if (updateSmallQuery != null) {
                        updateSmallQuery.close();
                    }
                    if (updateBigQuery != null) {
                        updateBigQuery .close();
                    }
                    con.conn.setAutoCommit(true);
                }
                response.sendRedirect("sol_env_c.jsp");

            } finally {
                con.conn.commit();
                con.conn.close();
                con.stmt.close();
                out.close();
            }
        }

    } 
```

希望这有助于找到答案。PD：小的运行没有问题。大的就是问题所在。

编辑：

这是 conectar()

```
public conectar() {
        try {
            Class.forName("oracle.jdbc.OracleDriver");
            System.out.println("Oracle JDBC driver loaded ok.");
            conn = DriverManager.getConnection(params, user, password);
        } catch (Exception e) {
            System.err.println("Exception: " + e.getMessage());
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:16:29.830

Bill 几乎可以肯定是正确的，而您只是锁定了要更新的行。您提到“语法是正确的”，这表明您可能已经直接在数据库中检查了它 - 例如使用 SQL*Plus 或 SQL Developer - 并且没有在该会话中发出`rollback`（或）。`commit`尝试从您的代码更新相同的行然后挂起等待锁被释放。

如果您可以找到手动运行更新的会话，请在其中发出 a `rollback`。如果不能，您可以通过如下查询查看哪些会话持有锁：

```
select vs.osuser, vs.process, vs.logon_time, vs.sid, vs.serial#, vs.program,
    dl.lock_type, dl.mode_held, dl.blocking_others
from dba_locks dl
left join v$session vs on vs.sid = dl.session_id
where lock_type != 'Media Recovery'
and lock_type != 'Redo Thread'; 
```

当您的代码正在运行 - 并挂起 - 您可以通过以下方式查看阻止它的内容：

```
select vsw.osuser, vsw.process, vsw.logon_time, vsw.sid, vsw.program,
    dw.lock_type, dw.mode_held,
    vsh.osuser, vsh.process, vsh.logon_time, vsh.sid, vsh.serial#, vsh.program
from dba_waiters dw
left join v$session vsw on vsw.sid = dw.waiting_session
left join v$session vsh on vsh.sid = dw.holding_session; 
```

或搜索其他示例，例如[this](http://oracleexamples.wordpress.com/2010/04/08/find-a-locking-session/)。您需要权限来查询`v$`性能视图，如果您没有权限，您可能需要 DBA 帮助。如果您无法手动回滚锁定，您可能需要 DBA 帮助才能终止锁定会话。

您也应该真正注意有关参数化语句的评论。

# ruby-on-rails - 如何验证开始日期和结束日期？

> ID：12198886
> 
> 赞同：7
> 
> 时间：2012-08-30T14:12:56.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

在 Rails 中验证结束日期不在开始日期之前以及开始日期在结束日期之后的最佳方法是什么？

我的视图控制器中有这个：

```
<tr>
    <td><%= f.label text="Starts:" %></td>
    <td><%= f.datetime_select :start_date, :order => [:day, :month, :year]%></td>
</tr>
<tr>
    <td><%= f.label text="Ends:" %></td>
    <td><%= f.datetime_select :end_date,:order => [:day, :month, :year]</td>
</tr> 
```

我希望它能够提供某种弹出窗口，并带有有意义的消息。

我想做一个通用方法，它接受两个参数，开始日期和结束日期，然后我可以在我的 viewcontroller 中调用它；`fx`在上面的代码中。或者，我需要改用 jQuery 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-27T08:18:47.797

@YaBoyQuy 客户端验证可以工作并避免对服务器造成冲击......

问题也是关于 end_date 在开始之后，所以验证 - 使用 gem `date_validator`- 也应该说明

```
validates :end_date, presence: true, date: { after_or_equal_to:  :start_date} 
```

的建议

```
on: :create 
```

end_date 验证不正确；从逻辑上讲，这也应该在编辑时运行。

我在简洁语法的基础上投了赞成票。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-29T16:47:36.257

## 干净利落（并且在控制之下？）

我发现这是最清楚的阅读：

### 在您的模型中

```
validates_presence_of :start_date, :end_date

validate :end_date_is_after_start_date

#######
private
#######

def end_date_is_after_start_date
  return if end_date.blank? || start_date.blank?

  if end_date < start_date
    errors.add(:end_date, "cannot be before the start date") 
  end 
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T16:41:29.103

避免客户端验证，因为它只验证客户端......使用内置的 rails 验证器。

```
 validates :start_date, presence: true, date: { after_or_equal_to: Proc.new { Date.today }, message: "must be at least #{(Date.today + 1).to_s}" }, on: :create
  validates :end_date, presence: true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-04T13:47:24.707

要使用你的`validates :dt_end, :date => {:after_or_equal_to => :dt_start}`，你需要有一个`DateValidator`这样的：

```
 class DateValidator > ActiveModel::Validator
  def validate(record)
    the_end = record.dt_end
    the_start = record.dt_start
    if the_end.present?
      if the_end < the_start
        record.errors[:dt_end] << "The end date can't be before the start date. Pick a date after #{the_start}"
      end
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T14:30:38.033

如果您想要客户端验证，请使用 jQuery。

或者在 Rails 中，为了验证服务器端，我猜你可以创建自己的？

```
def date_validation
  if self[:end_date] < self[:start_date]
    errors[:end_date] << "Error message"
    return false
  else
    return true
  end
end 
```

# python - python在路径中使用wildchar执行shell命令

> ID：12198888
> 
> 赞同：1
> 
> 时间：2012-08-30T14:13:15.530
> 
> 标签：python, regex, shell, path

```
ls 
[cc]a.txt bba.txt [cc]b.txt bbb.txt

ipython

glob.glob("[cc]*")
[]
glob.glob("bb*")
['bba.txt','bbb.txt']
glob.glob("[bb]*")
['bba.txt','bbb.txt'] 
```

怎么能得到`[cc]a.txt`和`[cc]b.txt`匹配？`[`中的 char`[bb]*`似乎没有任何意义。像这样使用：

```
glob.glob("\[cc\]*")
[] 
```

也是 NULL

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:16:05.463

附在. `[`_ `]`_`[]`

重击：

```
test $ ls
[cc]a.txt test.dat  test.gp   test.py 
```

Python：

```
>>> glob.glob(r'[[]cc[]]*.txt') #yuck ...
['[cc]a.txt'] 
```

就通配而言，`[ something]`意味着匹配方括号之间的任何字符。so`[cc]*.txt`相当于`c*.txt`which 不是你想要的。

当然，更强大的解决方案是停止命名包含 glob 字符的文件 ;^)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:19:24.437

不幸的是，您不能简单地转义 *、?、[、] 字符。授予[http://bugs.python.org/issue8402](http://bugs.python.org/issue8402)：

> 最终被调用的 fnmatch.translate 的文档说：没有办法引用元字符。对不起。

正如 mgilson 所解释的那样，解决方案更复杂。

# android - Android：谷歌地图，我的 gps 位置不显示，如果 gps 在启动应用程序后打开

> ID：12198890
> 
> 赞同：1
> 
> 时间：2012-08-30T14:13:16.167
> 
> 标签：android, gps, position

在我的应用程序中，我使用地图视图来定位我的 gps 位置。

如果我在启动应用程序之前打开 gps 并等待 gps 修复，所有工作最终都会成功。如果我在启动应用程序后打开 gps，则会出现问题，因为在地图中该位置不会出现。

这是我在 MapActivity 上的代码：

```
private MapView mapView;
private List<Overlay> mapOverlays;
private MapController mapController;
private LocationManager locationManager;
private MyLocationOverlay myLocationOverlay;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_sensor);

    // Configure the Map
    mapView = (MapView) findViewById(R.id.mapview);

    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);
    mapController = mapView.getController();

    GeoPoint point = new GeoPoint(47.6945683 *1E6 ,11.5765886 *1E6);
    mapController.animateTo(point);

    mapController.setZoom(9); // Zoom 1 is world view

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
            50, new GeoUpdateHandler());
    myLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocationOverlay);

    mapOverlays = mapView.getOverlays();
}

public class GeoUpdateHandler implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {}

    @Override
    public void onProviderDisabled(String provider) {}

    @Override
    public void onProviderEnabled(String provider) {}

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:21:17.643

我认为您需要`locationListener`在打开 GPS 后再次触发才能获取位置更新。

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
        50, new GeoUpdateHandler()); 
```

希望它有帮助。

编辑：就我而言，触发位置更新代码在 onResume 方法中。因此，如果 GPS 未打开并且用户打开了它，当返回 Activity 时，它将再次自动触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:32:53.507

我认为您只需要`requestLocationUpdates()`设置您拥有的功能。

GPS 最多需要 30 秒才能给出第一次定位。

我个人让我的`Activity`工具`LocationListener`运行良好（API 7+）。

尝试添加一个按钮来显示`animateTo()`您当前的位置，以检查 GPS 在您的应用程序中是否正常工作，即使之后启用它也是如此。

还尝试将与位置相关的代码从 移动`onCreate()`到`onResume()`.

# xtext - JvmFormalParameter 规则不明确？

> ID：12198896
> 
> 赞同：1
> 
> 时间：2012-08-30T14:13:39.133
> 
> 标签：xtext

我有一个简单的小语法，当我尝试生成 Xtext 人工制品时，它不断给出多种选择错误。语法是：

```
grammar org.xtext.example.hyrule.HyRule with org.eclipse.xtext.xbase.Xbase

generate hyRule (You can only use links to eclipse.org sites while you have fewer than 25 messages )

Start:
    rules+=Rule+
    ;

Rule:
    'FOR''PAYLOAD'payload=PAYLOAD'ELEMENTS' elements+=JvmFormalParameter+'CONSTRAINED' 'BY' expressions+= XExpression*;

PAYLOAD:
    "Stacons"|"PFResults"|"any"
; 
```

我得到的确切错误是：

```
![warning(200): ../org.xtext.example.hyrule/src-gen/org/xtext/example/hyrule/parser/antlr/internal/InternalHyRule.g:3197:2: Decision can match input such as "{RULE_ID, '=>', '('}" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
error(201): ../org.xtext.example.hyrule/src-gen/org/xtext/example/hyrule/parser/antlr/internal/InternalHyRule.g:3197:2: The following alternatives can never be matched: 2][1] 
```

我附上了antlrworks中生成的antlr语法的语法图，可以清楚地看到多种备选方案（JvmFormalParameter可以通过JvmTypeReference或ValidID规则匹配RULE_ID）。

所以看起来 JvmFormalParameter 是模棱两可的......为我的愚蠢道歉，但有人能指出我错过了什么吗？在我的语法中使用 JvmFormalParameter 规则时，是否有某种方法可以克服这种歧义？

![在此处输入图像描述](../Images/c1f1c4272cc4f95b376444de604965b4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:21:38.923

规则 JvmFormalParameter 定义为

```
JvmFormalParameter returns types::JvmFormalParameter:
    (parameterType=JvmTypeReference)? name=ValidID; 
```

所以参数的类型是可选的。如果使用`elements+=JvmFormalParameter+`，则允许多个参数不带分隔符，因此解析器无法决定输入序列

```
String s 
```

因为两者`String`和`s`都可以是两个参数的名称，`String s`也可以是具有类型`String`和名称的单个参数`s`。您应该使用分隔符，例如

```
elements+=JvmFormalParameter (',' elements+=JvmFormalParameter)* 
```

或使用通过`FullJvmFormalParameter`强制类型引用定义的规则：

```
FullJvmFormalParameter returns types::JvmFormalParameter:
    parameterType=JvmTypeReference name=ValidID; 
```

# javascript - 为什么我的 jQuery 手风琴菜单不粘？

> ID：12198897
> 
> 赞同：0
> 
> 时间：2012-08-30T14:13:41.427
> 
> 标签：javascript, jquery

当用户单击 Accordion Menu 按钮时，它通常会起作用。但是，大约十分之一的动画不会粘住并返回展开或折叠状态，具体取决于它开始的状态。我从其他地方复制了脚本，但它们看起来很简单。

HTML：

```
<ul id="system-nav">
    <li><div>Umbrella</div>
        <ul>
            <li><a href="../../Admin">Admin</a></li>
            <li><a href="../../Deshboard">Dashboard</a></li>
            <li><a href="../../Daylight">Daylight</a></li>
        </ul>
    </li>
</ul> 
```

就像我说过的，我已经尝试了同一件事的几个不同版本。这些只是从随机位置获取的，我只是稍微编辑了它们。他们都做同样的事情。

```
$("#system-nav > li > div").click(function(){
if(false == $(this).next().is(':visible')) {
    $('#system-nav ul').slideUp(300);
}

$(this).next().slideToggle(300).delay(250);
});

$('#system-nav ul:eq(0)').hide(); 
```

* * *

```
$(document).ready(function() {  
$('#system-nav li div').click(function() {
    $('#system-nav ul').slideUp('slow');    
    $(this).next().slideDown('slow');
});

$("#system-nav ul").hide();

 }); 
```

* * *

```
$(document).ready(function(){
$('#system-nav li div').click(function() {
    $(this).next().slideDown('slow');
    return false;
}).next().hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:32:08.043

在第一个 JS 示例中使用`:visible`不是正确的属性。`:hidden`改为使用

在第二个中，您正在剪辑它？

在最后一个你取消它？

* * *

这是一个工作代码：http: [//jsfiddle.net/Q9qNw/](http://jsfiddle.net/Q9qNw/)

```
$("#system-nav").on("click","div",function(){
    if ($(this).next().is(":hidden")) {
        $(this).next().slideDown("500");
    } else {
        $(this).next().slideUp("500");
    }
}); 
```

# javascript - 为什么我的文本没有显示在我的文本区域中？

> ID：12198900
> 
> 赞同：0
> 
> 时间：2012-08-30T14:13:51.207
> 
> 标签：javascript, jquery, html

我有一个文本区域，我在其中更改了一些文本并用一些 javascript 代码插入它，但它没有显示出来。我可以通过萤火虫看到它，它在那里，但在屏幕上我什么都看不到。有任何想法吗？

*是的，我不认为这是我的 js 代码中的问题。它可能与一些样式问题或其他东西有关。*

```
<textarea rows="4" cols="50" name="ta_eftertext" id="ta_eftertext">Bajskorv Aftertext hello world! </textarea> 
```

[JSfiddle 例子！！！](http://jsfiddle.net/gWXxd/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:18:40.320

这应该有效：

html:

```
<textarea id="textArea">
</textarea>​ 
```

和js：

```
$('#textArea').val('text'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:22:19.257

您可以像这样使用 jQuery .text：

```
$('#ta_eftertext').text("foo"); 
```

[http://jsfiddle.net/kannix/ZEjN7/](http://jsfiddle.net/kannix/ZEjN7/)

# ruby-on-rails - 为什么 Rails 会这样放置 csrf 令牌

> ID：12198904
> 
> 赞同：4
> 
> 时间：2012-08-30T14:14:08.000
> 
> 标签：ruby-on-rails

我从未使用过 Rails（只能回答我的问题），但我看到它在每个页面中都放置了 CSRF 令牌和表单。
我不明白为什么它`meta`为此使用两个标签：

```
<meta name="csrf-token" content="<%= form_authenticity_token %>" />
<meta name="csrf-param" content="authenticity_token" /> 
```

为什么不只是 csrf-token 元数据？

```
<meta name="csrf-token" content="<%= form_authenticity_token %>" /> 
```

有什么用`csrf-param`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:22:23.400

Rails 允许您在后台进行大量与 CSRF 令牌相关的配置。如果您愿意，您可以更改参数的名称——但如果您这样做，[jQuery UJS 驱动程序](https://github.com/rails/jquery-ujs)需要知道新参数的名称（因为它在 Ajax 请求中使用）。这就是为什么这里有两个元参数：第一个是实际的真实性令牌，显然，但第二个是 Rails 的 JavaScript 驱动程序需要的，以便知道第一个的名称。[（您可以在jQuery 驱动程序](https://github.com/rails/jquery-ujs/blob/610dfb8881377598b7e63ab2c152d73aa1d3632f/src/rails.js#L156)或[Prototype 驱动程序](https://github.com/rails/prototype-ujs/blob/5e5e57b478293602281a410ccbebbc1c8594a90a/src/rails.js#L124)中看到这一点。）

你可能会争辩说这会让你陷入某种疯狂的循环——为什么你不能`csrf-param`用另一个元标记重命名元标记？我认为这样做是为了让 Rails 能够轻松采用现有的 CSRF 解决方案，而无需大量手动覆盖。它还允许您的应用程序稍微面向未来。如果 HTML5 标准曾经为 CSRF 令牌采用官方标记，并且 Rails 选择在未来版本中更改默认 CSRF 标记，那么 JavaScript 驱动程序根本不需要更改。

最终，我认为这最接近它存在的真正原因：它可以防止 CSRF 系统的未来变化，防止不必要的和可能非常烦人的弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:43:08.717

csrf-param 包含参数的名称， csrf-token 是参数的值。因此，您的表单将如下所示：

```
<form action="/" method="post">
  <input type="hidden" name="authenticity_token" value="OWY4NmQwODE4ODRjN2Q2NTlhMmZlYWEwYzU1YWQwMTVhM2JmNGYxYjJiMGI4MjkGTfMTVi
  MGYwMGEwOA==">
  …
  </form> 
```

# android - 用手指移动视图使用 ViewFlipper

> ID：12198907
> 
> 赞同：0
> 
> 时间：2012-08-30T14:14:13.407
> 
> 标签：android, viewflipper

我们可以用手指移动 ViewFlipper 中定义的视图，**就像我们移动 Gallery 中定义的视图一样，**换句话说，当我们按下视图容器然后移动时，我们可以看到***视图 A 和视图 B，***直到按下。我认为关键是 onScroll() 的 Override 方法。但它看起来有点复杂。或者我们可以改变 ViewFlipper 中**仅通过动画的视图切换样式？**

# asp.net-mvc - ASP.NET MVC 中的 Redirect 和 RedirectToAction 有什么区别？

> ID：12198909
> 
> 赞同：54
> 
> 时间：2012-08-30T14:14:27.087
> 
> 标签：asp.net-mvc

除了它们的返回类型之外`Redirect`，还有什么区别？`RedirectToAction`我们什么时候使用每个？任何现实生活场景的解释都会对我有很大帮助。

我在看[Redirect 和 RedirectToAction 之间的混淆](https://stackoverflow.com/questions/6477253/confusion-between-redirect-and-redirecttoaction)，但是，对我来说，答案似乎更具体地处理`id`参数和返回正确的视图。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-30T14:21:48.203

`RedirectToAction`允许您在应用程序中构造一个指向特定操作/控制器的重定向 url，也就是说，它将使用路由表来生成正确的 URL。

`Redirect`要求您提供要重定向到的完整 URL。

如果您对带有参数`Index`的控制器执行操作：`Home``Id`

1.  您可以使用`RedirectToAction("Index", "Home", new { id = 5 })`它将根据您的路由表为您生成 URL。

2.  您可以使用`Redirect`但必须自己构建 URL，因此您可以通过，`Redirect("/Home/Index/5")`或者您的路由表可以正常工作。

3.  您不能使用 重定向到`google.com`（外部 URL）`RedirectToAction`，您必须使用`Redirect`.

`RedirectToAction`用于在您的应用程序中执行 302 重定向，并为您提供一种更轻松的方式来处理您的路由表。

`Redirect`用于对其他所有内容进行 302 重定向，特别是外部 URL，但您仍然可以在应用程序中重定向，您只需要自己构建 URL。

**最佳实践：**用于`RedirectToAction`处理您的应用程序操作/控制器的任何事情。如果您使用`Redirect`并提供 URL，则需要在路由表更改时手动修改这些 URL。

# database - Heroku POSTGRESQL - “角色连接太多”错误

> ID：12198911
> 
> 赞同：5
> 
> 时间：2012-08-30T14:14:38.517
> 
> 标签：database, postgresql, heroku, playframework, playframework-2.0

我已经建立了从 localhost 到 Heroku 上的 Dev 数据库的连接（如：[Heroku 上的进化错误中](https://stackoverflow.com/questions/12195568/errors-in-evolutions-on-heroku/12196800#12196800)所述），并且在尝试应用进化几次后我收到以下错误：

```
SQLException: Unable to open a test connection to the given database. JDBC url = [URL], username = null. Terminating connection pool. 
Original Exception: org.postgresql.util.PSQLException: FATAL: too many connections for role "ntnkypawxazhwo"
    at org.postgresql.core.v3.ConnectionFactoryImpl.readStartupMessages(ConnectionFactoryImpl.java:469) 
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:110) 
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:64) 
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:123) 
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:28) 
    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:20) 
    at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:30) 
    at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:22) 
    at org.postgresql.Driver.makeConnection(Driver.java:391) 
    at org.postgresql.Driver.connect(Driver.java:265) 
    at play.utils.ProxyDriver.connect(ProxyDriver.scala:9) 
    at java.sql.DriverManager.getConnection(Unknown Source) 
    at java.sql.DriverManager.getConnection(Unknown Source) 
    at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:256) 
    at com.jolbox.bonecp.BoneCP.<init>(BoneCP.java:305) 
    at com.jolbox.bonecp.BoneCPDataSource.maybeInit(BoneCPDataSource.java:150) 
    at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:112) 
    at play.api.db.DBApi$class.getConnection(DB.scala:64) 
    at play.api.db.BoneCPApi.getConnection(DB.scala:273) 
    at play.api.db.evolutions.Evolutions$.databaseEvolutions(Evolutions.scala:306) 
    at play.api.db.evolutions.Evolutions$.evolutionScript(Evolutions.scala:284) 
    at play.api.db.evolutions.OfflineEvolutions$.applyScript(Evolutions.scala:452) 
    at play.core.ReloadableApplication.handleWebCommand(ApplicationProvider.scala:175) 
    at play.core.server.Server$$anonfun$getHandlerFor$1.apply(Server.scala:86) 
    at play.core.server.Server$$anonfun$getHandlerFor$1.apply(Server.scala:86) 
    at scala.util.control.Exception$Catch$$anonfun$either$1.apply(Exception.scala:110) 
    at scala.util.control.Exception$Catch$$anonfun$either$1.apply(Exception.scala:110) 
    at scala.util.control.Exception$Catch.apply(Exception.scala:88) 
    at scala.util.control.Exception$Catch.either(Exception.scala:110) 
    at play.core.server.Server$class.getHandlerFor(Server.scala:86) 
    at play.core.server.NettyServer.getHandlerFor(NettyServer.scala:38) 
    at play.core.server.netty.PlayDefaultUpstreamHandler.messageReceived(PlayDefaultUpstreamHandler.scala:226) 
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) 
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) 
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:777) 
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296) 
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.unfoldAndFireMessageReceived(ReplayingDecoder.java:522) 
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:501) 
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:438) 
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) 
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) 
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:553) 
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268) 
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255) 
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:343) 
    at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:274) 
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:194) 
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102) 
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42) 
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 
    at java.lang.Thread.run(Unknown Source) 
```

开发数据库具有固定数量的可用连接（大约 20 个）。如何确保正确关闭连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:01:17.557

您可以使用 Play 的[JDBC 设置](http://www.playframework.org/documentation/2.0/SettingsJDBC)来减少连接数。尝试仅设置 1 个分区启动：

```
db.default.partitionCount=1 
```

并不断调整以限制每个分区的时间和连接数。

# java - 替换包含引号的字符串中的子字符串

> ID：12198914
> 
> 赞同：1
> 
> 时间：2012-08-30T14:14:44.640
> 
> 标签：java, string

我的输入字符串是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><tag1><tag2></tag2></tag1> 
```

我想替换以下部分：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><tag1> 
```

带空格。

所以我写道：

```
String final = inputString.replaceFirst("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><tag1>", ""); 
```

但是，它不起作用。

在将 final 打印到控制台时，它仍然与 inputString 相同。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:16:27.907

您不想使用正则表达式替换。只需使用简单的`replace`方法，代码就可以工作。在这种情况下，您使用的字符串文字将是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:17:53.490

搜索部分是一个正则表达式，因此您需要转义被正则表达式解释为特殊字符的字符（例如`?`）。

令人讨厌的是，您还必须转义转义字符，以便它不会被解释为`\n`字符串中特殊字符（如 ）的转义序列。这意味着你需要把`\\?`你有的地方`?`：

```
String output = inputString.replaceFirst("<\\?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"\\?><tag1>", ""); 
```

或者，由于字符串不可能多次出现，您可以使用 的`replace()`方法`String`。此方法不使用正则表达式，因此您无需转义任何内容：

```
String output = inputString.replace("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><tag1>", ""); 
```

# ruby-on-rails - rails 漂亮的路由

> ID：12198917
> 
> 赞同：0
> 
> 时间：2012-08-30T14:14:50.377
> 
> 标签：ruby-on-rails, routes, pretty-urls

我有新闻控制器，新闻按年选择。
在 routes.rb 我有

```
 get 'news' => 'pages#news'
  get 'news/:year' =>'pages#news' 
```

url`http://localhost:3000/news/2012`没问题，但是当我尝试创建链接时，它并不漂亮。
例如：`= link_to year, news_path(year: 2012)`

我看到`http://localhost:3000/news?year=2012`了`http://localhost:3000/news/2012`
如何修复它？ps item 它是新闻控制器的模型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:16:10.970

替换为一行：

```
get 'news/(:year)' =>'pages#news' 
```

说明：

路由器规则是：先匹配先服务。`get 'news'`匹配您的路径，因此它添加`year`为查询参数。

另一种解决方案是换线，但最好只保留一条。

# actionscript-3 - 是否有一个很好的用于 actionscript 的字符串复数库？

> ID：12198918
> 
> 赞同：5
> 
> 时间：2012-08-30T14:14:51.703
> 
> 标签：actionscript-3, actionscript

我还没有为此找到一个好的库 actionscript 库。

我想做这样的事情：

```
Inflection.pluralize( "cat" ) == "cats"
Inflection.pluralize( "fish" ) == "fish" 
```

我知道 ruby​​ on rails 有一个这样的库；并且 javascript 也有一个非常好的：[http](http://code.google.com/p/inflection-js/) ://code.google.com/p/inflection-js/ 。

任何人都知道类似的动作脚本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:52:42.473

谷歌说： http: [//kuwamoto.org/2007/12/17/improved-pluralizing-in-php-actionscript-and-ror/](http://kuwamoto.org/2007/12/17/improved-pluralizing-in-php-actionscript-and-ror/)

```
package
{
public class Inflect
{
    private static var plural : Array = [
        [/(quiz)$/i,                     "$1zes"],
        [/^(ox)$/i,                      "$1en"],
        [/([m|l])ouse$/i,                "$1ice"],
        [/(matr|vert|ind)ix|ex$/i,       "$1ices"],
        [/(x|ch|ss|sh)$/i,               "$1es"],
        [/([^aeiouy]|qu)y$/i,            "$1ies"],
        [/(hive)$/i,                     "$1s"],
        [/(?:([^f])fe|([lr])f)$/i,       "$1$2ves"],
        [/(shea|lea|loa|thie)f$/i,       "$1ves"],
        [/sis$/i,                        "ses"],
        [/([ti])um$/i,                   "$1a"],
        [/(tomat|potat|ech|her|vet)o$/i, "$1oes"],
        [/(bu)s$/i,                      "$1ses"],
        [/(alias|status)$/i,             "$1es"],
        [/(octop)us$/i,                  "$1i"],
        [/(ax|test)is$/i,                "$1es"],
        [/(us)$/i,                       "$1es"],
        [/s$/i,                          "s"],
        [/$/i,                           "s"]
    ];

    private static var singular : Array = [
        [/(quiz)zes$/i,             "$1"],
        [/(matr)ices$/i,            "$1ix"],
        [/(vert|ind)ices$/i,        "$1ex"],
        [/^(ox)en$/i,               "$1"],
        [/(alias|status)es$/i,      "$1"],
        [/(octop|vir)i$/i,          "$1us"],
        [/(cris|ax|test)es$/i,      "$1is"],
        [/(shoe)s$/i,               "$1"],
        [/(o)es$/i,                 "$1"],
        [/(bus)es$/i,               "$1"],
        [/([m|l])ice$/i,            "$1ouse"],
        [/(x|ch|ss|sh)es$/i,        "$1"],
        [/(m)ovies$/i,              "$1ovie"],
        [/(s)eries$/i,              "$1eries"],
        [/([^aeiouy]|qu)ies$/i,     "$1y"],
        [/([lr])ves$/i,             "$1f"],
        [/(tive)s$/i,               "$1"],
        [/(hive)s$/i,               "$1"],
        [/(li|wi|kni)ves$/i,        "$1fe"],
        [/(shea|loa|lea|thie)ves$/i,"$1f"],
        [/(^analy)ses$/i,           "$1sis"],
        [/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,  "$1$2sis"],
        [/([ti])a$/i,               "$1um"],
        [/(n)ews$/i,                "$1ews"],
        [/(h|bl)ouses$/i,           "$1ouse"],
        [/(corpse)s$/i,             "$1"],
        [/(us)es$/i,                "$1"],
        [/s$/i,                     ""]
    ];

    private static var irregular : Array = [
        ['move'   , 'moves'],
        ['foot'   , 'feet'],
        ['goose'  , 'geese'],
        ['sex'    , 'sexes'],
        ['child'  , 'children'],
        ['man'    , 'men'],
        ['tooth'  , 'teeth'],
        ['person' , 'people']
    ];

    private static var uncountable : Array = [
        'sheep',
        'fish',
        'deer',
        'series',
        'species',
        'money',
        'rice',
        'information',
        'equipment'
    ];

    public static function pluralize( string : String ) : String
    {
        var pattern : RegExp;
        var result : String;

        // save some time in the case that singular and plural are the same
        if (uncountable.indexOf(string.toLowerCase()) != -1)
          return string;

        // check for irregular singular forms
        var item : Array;
        for each ( item in irregular )
        {
            pattern = new RegExp(item[0] + "$", "i");
            result = item[1];

            if (pattern.test(string))
            {
                return string.replace(pattern, result);
            }
        }

        // check for matches using regular expressions
        for each ( item in plural)
        {
            pattern = item[0];
            result = item[1];

            if (pattern.test(string))
            {
                return string.replace(pattern, result);
            }
        }

        return string;
    }

    public static function singularize( string : String ) : String
    {
        var pattern : RegExp;
        var result : String

        // save some time in the case that singular and plural are the same
        if (uncountable.indexOf(string.toLowerCase()) != -1)
            return string;

        // check for irregular singular forms
        var item : Array;
        for each ( item in irregular )
        {
            pattern = new RegExp(item[1] + "$", "i");
            result = item[0];

            if (pattern.test(string))
            {
                return string.replace(pattern, result);
            }
       }

       // check for matches using regular expressions
       for each ( item in singular)
       {
            pattern = item[0];
            result = item[1];

            if (pattern.test(string))
            {
                return string.replace(pattern, result);
            }
       }

       return string;

    }

    public static function pluralizeIf(count : int, string : String) : String
    {
        if (count == 1)
            return "1 " + string;
        else
            return count.toString() + " " + pluralize(string);
    }
}
} 
```

# php - 流式响应不起作用

> ID：12198919
> 
> 赞同：2
> 
> 时间：2012-08-30T14:14:56.847
> 
> 标签：php, symfony, symfony-2.1

我有一个漫长的导入过程，我正在尝试使用 Symfony 2.1 中提供的新[StreamedResponse](http://symfony.com/doc/master/components/http_foundation/introduction.html#streaming-a-response)向用户报告有关任务的一些反馈，但响应没有被流式传输（我在处理结束时一次获得所有内容） . 这是我在控制器中的代码：

```
 $em = $this->getDoctrine()->getEntityManager();
            $response = new StreamedResponse();
            $response->setCallback(function () use ($em) {
                $file = fopen(sys_get_temp_dir().'/categories.txt', 'r');
                $lineNum = 0;
                while ($line = fgets ($file)) {
                    $category = new Category();
                    $fields = explode("\t",$line);
                    $category->setFullId($fields[0]);
                    $category->setName($fields[2]);
                    $category->setFullName($fields[4]);
                    $em->persist($category);
                    if ($lineNum%100==0) {
                        echo 'Processing Line: '.$lineNum.'<br>';
                        flush();                            
                        $em->flush();
                    }
                    $lineNum++;
                }
                fclose($file);
            });
            return $response; 
```

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:42:26.760

好的，我找到了：您需要同时调用`ob_flush()`和`flush()`。

# c++ - 当模数为特殊形式时，通过模加法优化性能

> ID：12198920
> 
> 赞同：2
> 
> 时间：2012-08-30T14:14:57.477
> 
> 标签：c++, c, performance, math, assembly

我正在编写一个执行数百万个模块化添加的程序。为了提高效率，我开始思考如何使用机器级指令来实现模块化加法。

设 w 为机器的字长（通常为 32 或 64 位）。如果取模数为 2^w，那么模加法可以非常快速地执行：只需简单地将加数相加，并丢弃进位即可。

我使用以下 C 代码测试了我的想法：

```
#include <stdio.h>
#include <time.h>

int main()
{
    unsigned int x, y, z, i;
    clock_t t1, t2;

    x = y = 0x90000000;

    t1 = clock();

    for(i = 0; i <20000000 ; i++)
        z = (x + y) % 0x100000000ULL;

    t2 = clock();

    printf("%x\n", z);
    printf("%u\n", (int)(t2-t1));

    return 0;
} 
```

使用带有以下选项的 GCC 进行编译（我曾经`-O0`阻止 GCC 展开循环）：

```
-S -masm=intel -O0 
```

生成的汇编代码的相关部分是：

```
 mov DWORD PTR [esp+36], -1879048192
    mov eax, DWORD PTR [esp+36]
    mov DWORD PTR [esp+32], eax
    call    _clock
    mov DWORD PTR [esp+28], eax
    mov DWORD PTR [esp+40], 0
    jmp L2
L3:
    mov eax, DWORD PTR [esp+36]
    mov edx, DWORD PTR [esp+32]
    add eax, edx
    mov DWORD PTR [esp+44], eax
    inc DWORD PTR [esp+40]
L2:
    cmp DWORD PTR [esp+40], 19999999
    jbe L3
    call    _clock 
```

很明显，不涉及任何模运算。

现在，如果我们将 C 代码的模块化添加行更改为：

```
z = (x + y) % 0x0F0000000ULL; 
```

汇编代码更改为（仅显示相关部分）：

```
 mov DWORD PTR [esp+36], -1879048192
    mov eax, DWORD PTR [esp+36]
    mov DWORD PTR [esp+32], eax
    call    _clock
    mov DWORD PTR [esp+28], eax
    mov DWORD PTR [esp+40], 0
    jmp L2
L3:
    mov eax, DWORD PTR [esp+36]
    mov edx, DWORD PTR [esp+32]
    add edx, eax
    cmp edx, -268435456
    setae   al
    movzx   eax, al
    mov DWORD PTR [esp+44], eax
    mov ecx, DWORD PTR [esp+44]
    mov eax, 0
    sub eax, ecx
    sal eax, 28
    mov ecx, edx
    sub ecx, eax
    mov eax, ecx
    mov DWORD PTR [esp+44], eax
    inc DWORD PTR [esp+40]
L2:
    cmp DWORD PTR [esp+40], 19999999
    jbe L3
    call    _clock 
```

显然，在两次调用`_clock`.

考虑到汇编指令数量的增加，我预计通过正确选择模数可以获得至少 100% 的性能增益。但是，在运行输出时，我注意到速度仅提高了 10%。我怀疑操作系统正在使用多核 CPU 来并行运行代码，但即使将进程的 CPU 亲和性设置为 1 也没有改变任何东西。

你能给我一个解释吗？

**编辑：**使用 VC++ 2010 运行示例，我得到了我的预期：第二个代码比第一个示例慢 12 倍！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:02:28.797

[艺术](https://stackoverflow.com/users/939410/art) [把它钉牢了](https://stackoverflow.com/questions/12198920/performance-optimization-with-modular-addition-when-the-modulus-is-of-special-fo#comment16339830_12199989)。

对于 2 的幂模，用`-O0`和生成的计算代码`-O3`是相同的，不同的是循环控制代码，运行时间相差 3 倍。

对于另一个模数，循环控制代码的区别是相同的，但是计算的代码并不完全相同（优化后的代码看起来应该更快一些，但我对汇编或我的处理器可以肯定）。未优化代码和优化代码之间的运行时间差异约为 2 倍。

两个模数的运行时间与未优化的代码相似。与没有任何模数的运行时间大致相同。与通过从生成的程序集中删除计算获得的可执行文件的运行时间大致相同。

所以运行时间完全由循环控制代码控制

```
 mov DWORD PTR [esp+40], 0
    jmp L2
L3:
    # snip
    inc DWORD PTR [esp+40]
L2:
    cmp DWORD PTR [esp+40], 19999999
    jbe L3 
```

打开优化后，循环计数器保存在寄存器中（此处）并递减，然后跳转指令为`jne`. 该循环控制速度如此之快，以至于模数计算现在占用了运行时间的很大一部分，从生成的程序集中删除计算现在将运行时间分别减少了 3 倍。2.

因此，当使用 编译时`-O0`，您测量的不是计算速度，而是循环控制代码的速度，因此差异很小。通过优化，您可以同时测量计算和回路控制，并且计算中的速度差异清楚地显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:07:06.183

两者之间的区别归结为这样一个事实，即除以 2 的幂可以在逻辑指令中轻松转换。

`a/n`其中 n 是 2 的幂 等价于`a >> log2 n` 模它的相同 `a mod n`可以由`a & (n-1)`

但在你的情况下，它甚至更进一步：你的价值 0x100000000ULL 是 2^32。这意味着任何无符号 32 位变量将自动成为模 2^32 值。编译器足够聪明，可以删除该操作，因为它是对 32 位变量的不必要操作。ULL 说明符不会改变这一事实。

对于适合 32 位变量的值 0x0F0000000，编译器无法省略操作。它使用看起来比除法运算更快的转换。

# php - 在我的主题页面中显示帖子

> ID：12198923
> 
> 赞同：1
> 
> 时间：2012-08-30T14:15:17.743
> 
> 标签：php, wordpress, custom-post-type

我必须在我的产品页面上显示来自自定义类型帖子的所有帖子。所以我正在使用自定义帖子类型插件。现在我想在产品页面中显示所有帖子，就像它是 WordPress 的博客页面一样。我正在使用下面的代码在产品页面中显示帖子..

```
add_filter( 'pre_get_posts', 'my_get_posts' );

function my_get_posts( $query ) {

    if ( is_page('product') && $query->is_main_query() )
        $query->set( 'post_type', array('products' ) );

    return $query;
} 
```

但我无法获取页面。如果有其他方法可以显示页面中的所有帖子，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:35:47.370

`get_posts`为您的页面制作特定模板并使用功能应该更容易。

为页面创建特定模板：http: [//codex.wordpress.org/Pages#What_Template_is_Used_to_Display_a_Particular_Page.3F](http://codex.wordpress.org/Pages#What_Template_is_Used_to_Display_a_Particular_Page.3F)

如何使用 get_posts： [http ://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:09:54.590

将此代码添加到您希望所有帖子更改类别 ID 和帖子数量的位置...

```
<?php
global $post;
$args = array( 'numberposts' => 5, 'category' => 3 );

$myposts = get_posts( $args );
foreach( $myposts as $post ) :
setup_postdata($post); ?>

<?php the_title(); ?>
<?php the_content(); ?>

<?php endforeach; ?> 
```

# javascript - 有没有办法在 IE 中阻止我的网站并让它在所有其他浏览器中运行

> ID：12198929
> 
> 赞同：2
> 
> 时间：2012-08-30T14:15:32.093
> 
> 标签：javascript, cross-browser, browser

我在我的网站上有代码，IE 似乎有很多麻烦并且不断崩溃等等，好消息是我网站上的用户有 99.9% 的机会不会使用 IE，所以我想使我的网站可用于除 IE 以外的所有其他浏览器。如果他们使用的是 IE，我只想要一条消息说“不幸的是，此网站在此浏览器中不可用”或类似的内容。我可以这样做吗，如果可以，怎么做？，我猜是 JavaScript，对吧？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T14:18:05.620

您可以将页面内容包装在条件注释中。

[http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

```
<body>
    <!--[if IE]>
    <p>Sorry, Internet Explorer is not supported.<p>
    Use <a href="http://firefox.com">Firefox</a> instead.
    <![endif]-->

    <![if !IE]>
    <p>The page content for all other browsers.</p>
    <![endif]>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:18:29.350

使用`User-agent`请求标头在服务器端执行此操作，这样您就不必发送所有页面，甚至可以发送替代版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:17:29.567

您可以使用 java 脚本中的 navigator.appName 变量在代码中设置条件以不显示到 Internet Explorer。一个教程网站在这里： [http ://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:17:41.430

可以在纯 HTML 中完成：

```
<!--[if !IE]>
    all your code
<!--<![endif]--> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:20:31.287

我真的建议修复损坏的东西。否则，我建议有条件的评论（而不是整个身体，只是为了刷新到不同的网站）

# jquery - 从下拉列表中获取值并将其显示在文本框中

> ID：12198934
> 
> 赞同：0
> 
> 时间：2012-08-30T14:15:44.170
> 
> 标签：jquery, drop-down-menu, textbox

我有两个下拉菜单，

1> `<select id="building">`

2>`<select id="level">`

**每次更改**建筑物的值时，都会使用 jquery 更新****级别**。**

 **我还想将下拉菜单中选择的值显示到两个文本框中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:48:18.477

每当其中一个选择发生变化时 - 更新文本框：

```
var updateTextbox() = function() {
    buildingVal = $("#building").val();
    levelVal = $("#level").val();
    $("#mybuildingtextbox").val(buildingVal);
    $("#myleveltextbox").val(levelVal);
}

$("#building").change(updateTextbox);
//or if you're already using one of the change events:
$("#level").change(function() {
    //the rest of your code
    updateTextbox();
} 
```

编辑：没有注意到你说两个文本框 - 变化不大。您应该考虑在问题中添加 [jquery] 标签。**

# html - HTML5 可以与 Java Serversocketchannel 通信吗？

> ID：12198938
> 
> 赞同：2
> 
> 时间：2012-08-30T14:16:00.720
> 
> 标签：html, websocket

HTML5 可以与 Java Serversocketchannel 通信吗？如果可能的话，谁能告诉我细节。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:27:31.643

我假设您在谈论[WebSockets](https://developer.mozilla.org/en-US/docs/WebSockets)而不是其他协议（Flash、Java 小程序和 Silverlight 本机套接字，或 XMLHttpRequest 连接）。WebSockets 是 IETF 的 HTTP 系列规范，与 HTML5 没有直接关系（尽管它们都属于下一代 Web 标准的扩展系列）。

浏览器 WebSocket 实现只能与有意支持 WebSocket 协议的服务器通信。您当然可以使用 ServerSocketChannel 编写支持 WebSocket 协议的服务器，但是如果没有考虑 WebSocket 协议，WebSocket 将无法连接到编写的任意服务（使用或不使用 ServerSocketChannel）。

这是一种经过深思熟虑的安全措施，以防止 Web 浏览器被迫连接到与 Web 无关的服务（例如，连接到端口 25 以发送垃圾邮件）。

如果你想在 ServerSocketChannel 之上编写一个 WebSocket 协议层，你需要投入大量的工作来实现[规范](https://www.rfc-editor.org/rfc/rfc6455)。[重用现有库](https://stackoverflow.com/questions/4278456/websockets-production-ready-server-in-java)似乎更明智。

# java - 在 Weblogic 10.3.6 上焊接

> ID：12198939
> 
> 赞同：0
> 
> 时间：2012-08-30T14:16:01.520
> 
> 标签：java, weblogic, cdi, weld

我正在尝试在 Weblogic 10.3 上运行基于 Weld、JPA2、Vaadin 的应用程序。

我的问题是 Weld 似乎注册了所有 Bean，但它们没有注入到我的 servlet 中。

以下日志消息是可疑的：

```
1433 [[ACTIVE] ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)'] INFO  org.jboss.weld.environment.gwtdev.GwtDevHostedModeContainer  - Jetty detected, JSR-299 injection will be available in Servlets and Filters. Injection into Listeners is not supported.
30.08.2012 16:09:20 org.jboss.weld.environment.jetty.MortbayWeldServletHandler process
INFO: Cannot find matching WebApplicationContext, no default CDI support: use jetty-web.xml 
```

基本上我关注了这个博客： http: [//jianmingli.com/wp/](http://jianmingli.com/wp/?p=4373) ?p=4373进行焊接集成。

可能我需要根据[http://docs.jboss.org/weld/reference/1.0.0/en-US/html/environments.html#d0e5036](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/environments.html#d0e5036)配置beanmanager，但我不知道如何。

有没有人有任何想法？

/亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:45:50.710

did you do these steps speechified in tutorial?

*   You have to place beans.xml in src/META-INF. Place it in WEB-INF won't work.
*   You have to create a weblogic.xml in WEB-INF directory and set wls:prefer-web-inf-classes to true. Otherwise, WEB-INF/lib jar files won't get loaded properly.

Weblogic is a wired App server! I'm using the version 12.1.1 and have many problems with CDI !

If reading that tutorial is for learning purposes I suggest not to use Weblogic, use Glassfish of jBoss AS instead.

[JBoss developer framework](http://www.jboss.org/jdf/examples/get-started/) has many great examples and tutorials in this scope.

# javascript - 用于中继器控制方法的 ASP.NET 过滤器下拉列表

> ID：12198945
> 
> 赞同：2
> 
> 时间：2012-08-30T14:16:12.697
> 
> 标签：javascript, asp.net, xml, vb.net

我有一个页面（category-list.apsx），它使用Repeater Control 方法在页面上显示xml 详细信息。我使用了此处显示的示例：

[http://www.w3schools.com/aspnet/aspnet_repeater.asp](http://www.w3schools.com/aspnet/aspnet_repeater.asp)

这很好用，但我希望用户能够使用 CategoryName 的下拉列表来过滤结果。

结果中继器如下所示：

```
<form runat="server">
<asp:Repeater id="categories" runat="server">

    <ItemTemplate>
      <tr>
        <td><%#Container.DataItem("CategoryName")%> </td>
        <td>&nbsp;</td>
        <td><%#Container.DataItem("CategoryMonth")%> </td>
        <td>&nbsp;</td>
        <td><%#Container.DataItem("CategoryMonthSpend")%> </td>
        <td>&nbsp;</td>
        <td><%#Container.DataItem("Amount")%> </td>
      </tr>
    </ItemTemplate>

</asp:Repeater>
</form> 
```

XML 如下所示：

```
<catalog>
    <categories>
    <CategoryName>Category Name1</CategoryName>
    <CategoryMonth>April 2012</CategoryMonth>
    <CategoryMonthSpend>£1</CategoryMonthSpend> <Amount>1</Amount>                              
    </categories>
</catalog> 
```

激活中继器的脚本如下所示：

```
<script  runat="server">
Public Sub Page_Load()
    If Not Page.IsPostBack Then
        Dim cat As String = Request.QueryString("cat")
        Dim mycategories As DataSet = New DataSet()
        mycategories.ReadXml(MapPath("XML/" + cat + ".xml"))
        categories.DataSource = mycategories
        categories.DataBind()
    End If
End Sub

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:19:05.743

好的，这里要介绍很多，所以我不会对每个部分进行过多的详细介绍。希望这可以为您进一步了解 ASP.NET 中的数据绑定提供一个良好的起点。

我更喜欢在代码隐藏中编写我的代码，而不是`<script runat="server">`在我的 .aspx 页面内部，所以这就是我的代码在本示例中的位置。但是，在功能上，这里没有区别，如果您愿意，可以选择将此代码放在那个 .aspx 端脚本中。

**首先**，让我们修复您的`Repeater`模板。您似乎正在使用表格布局，但模板中没有任何地方是实际`<table></table>`标签。您需要添加一个`<HeaderTemplate>`和一个`<FooterTemplate>`

```
<asp:Repeater id="categories" runat="server">    
    <HeaderTemplate>
        <table>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><%#Container.DataItem("CategoryName")%> </td>
            <td>&nbsp;</td>
            <td><%#Container.DataItem("CategoryMonth")%> </td>
            <td>&nbsp;</td>
            <td><%#Container.DataItem("CategoryMonthSpend")%> </td>
            <td>&nbsp;</td>
            <td><%#Container.DataItem("Amount")%> </td>
          </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>    
</asp:Repeater> 
```

**其次**`DropDownList`，让我们在您想要用于过滤的 aspx 页面上声明一个：

```
<asp:DropDownList ID="ddlCategory" runat="server" AutoPostBack="true" /> 
```

这里的`AutoPostBack`属性意味着您`DropDownList`将自动回发到服务器并在您的服务器上触发一个`SelectedIndexChanged`您可以在代码中处理的事件。或者，您可以`Button`在要触发过滤器时使用 a 来单击。

**第三**，让我们将您的数据绑定代码分成漂亮、整洁的小方法，这些方法可以更容易地重用。

```
Private Function GetXmlDataSet() As IEnumerable(Of DataRow)

    Dim cat As String = Request.QueryString("cat")
    Dim mycategories As DataSet = New DataSet()

    mycategories.ReadXml(MapPath("XML/" + cat + ".xml"))

    ' I like to use IEnumerable because so that I can use LINQ '
    Return mycategories.Tables(0).AsEnumerable()

End Function

Private Sub BindRepeater(query As IEnumerable(Of DataRow))
    categories.DataSource = query
    categories.DataBind()
End Sub

Private Sub BindDropDownList(query As IEnumerable(Of DataRow))

    ddlCategory.DataSource = query.Select(Function(x) x("CategoryName")).Distinct()
    ddlCategory.DataBind()

    ' Insert an empty choice into the DropDownList '
    ddlCategory.Items.Insert(0, "")

End Sub 
```

**第四**，让我们更新您的`Page_Load`代码，以便我们可以利用这些方法：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If (Not IsPostBack) Then

        Dim query = GetXmlDataSet()

        BindDropDownList(query)
        BindRepeater(query)

    End If

End Sub 
```

**最后**同样重要的是，让我们创建`SelectedIndexChanged`事件处理程序以触发对该数据集的过滤：

```
Private Sub ddlCategory_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ddlCategory.SelectedIndexChanged

    Dim selectedCategory As String = ddlCategory.SelectedValue.ToString()

    Dim query = GetXmlDataSet()
    If (Not String.IsNullOrEmpty(selectedCategory)) Then
        query = GetXmlDataSet().Where(Function(x) x("CategoryName") = selectedCategory)
    End If

    BindRepeater(query)

End Sub 
```

那么我们在这里做了什么？通过分离出这些数据绑定方法，我使它更简洁一些，并允许两个单独的控件更轻松地`DataSet`在 XML 文件中共享相同的控件。Using允许我使用 LINQ，我觉得它比标准查询或对象`IEnumerable`好得多。`DataTable``DataView`

在`DropDownList`数据绑定代码中，我选择了单列数据并将其转换为字符串集合。我还呼吁`Distinct`采取良好的措施，以便删除重复项。我还冒昧地在列表中添加了一个空白项，以便用户可以选择 NO 过滤器并显示所有内容。

您会注意到`SelectedIndexChanged`事件处理程序中有一些代码可以查看 DropDownList 值是否为空。这不一定是最强大的（如果您的某个项目实际上有一个空白的“CategoryName”并且您想对其进行过滤，则会崩溃），但适用于此示例。另一种方法是`ddlCategory.SelectedIndex <> 0`检查是否选择了过滤器。

这绝不是对这里发生的一切的完整解释，所以请随时提出问题。但是，这应该可以帮助您获得一个工作示例，您可以扩展该示例以用于未来的开发。

**编辑：** 此代码要求您已导入`System.Collections.Generic`命名空间和`System.Linq`命名空间。在 Visual Studio 2010 中，这可能已经自动为您导入到 Web 应用程序项目中。如果没有，您可以选择将它们直接添加到您的代码文件中，或者在您的 Web 应用程序的**Project Properties页面上的****References > Imported Namespaces下**

# php - 如何使用 jQuery 和 PHP 动态显示 MySQL 数据？

> ID：12198947
> 
> 赞同：3
> 
> 时间：2012-08-30T14:16:20.037
> 
> 标签：php, jquery, mysql, html, dynamic

我有一个 PHP 页面，其中列出了它从 MySQL 数据库表中获取的一堆单词。它根据表格中的计数显示不同大小的单词：

```
<?php
 $selectStr = "select * from test";

 if ($results = MySQL($dbName, $selectStr))
 {
  $rowCount = MySQL_NUMROWS($results);
 }

 $i = 0;
 while ($i < $rowCount)
 {
  echo '<div style="float: left; font-size:' . (MySQL_RESULT($results,$i,'count') * 5) . 'px;">' . MySQL_RESULT($results,$i,'word') . '</div>';
  $i++;
 }
?> 
```

诀窍是我希望内容动态显示。因此，如果用户坐在页面上，并且其中一个字数增加了，我希望在用户不刷新页面的情况下改变字的大小。

我是 jQuery 的新手。我以前使用过它，但仅使用示例。有人可以引导我朝着一个好的方向发展，让我的页面在不刷新的情况下动态更改内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:27:03.713

您可以像这样自动刷新您的页面正文...给 body id='body'

```
 <html>
 <head>
    <script type="text/javascript">
       var auto_refresh = setInterval(
         function ()
         {
          $('#body').load('wordscount.php').fadeIn("slow");
         }, 10000); // refresh every 10000 milliseconds
    </script>
 </head>
 <body>
     <div id='content'></div>
 </body> 
```

不要忘记在你的 head 标签中包含 jquery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:26:35.890

它每 30000 毫秒调用一次文件 rowfunctie.php，并用 getRows 函数的结果填充 topbar 差异。

```
<div id="center-rows">
  <div id="links">Nu&nbsp;</div>
  <div id="rows">
    <div id="topbar"></div>
  </div>

  <div id="rechts">&nbsp;aantal rijen</div>
</div>

<script type="text/javascript">
function doRequest() {
  jQuery("#topbar").fadeOut('slow', function() {
    jQuery.ajax({
      type: "GET",
      url: "rowfunctie.php",
      cache: false,
      success: function(html){
        jQuery("#topbar").html(html);
        jQuery("#topbar").fadeIn('slow',function() {
        setTimeout('doRequest()',30000);
      });
   }
 });
 });
}
doRequest();
</script> 
```

rowfunctie.php 应该如下所示：

```
<?php 
 $selectStr = "select * from test";

 if ($results = MySQL($dbName, $selectStr))
 {
  $rowCount = MySQL_NUMROWS($results);
 }

 $i = 0;
 while ($i < $rowCount)
 {
  echo '<div style="float: left; font-size:' . (MySQL_RESULT($results,$i,'count') * 5) . 'px;">' . MySQL_RESULT($results,$i,'word') . '</div>';
  $i++;
 }
?> 
```

# jquery - 如何使用 jQuery 从选择框中清除所选值？

> ID：12198955
> 
> 赞同：8
> 
> 时间：2012-08-30T14:16:44.000
> 
> 标签：jquery

我不想删除选项，只需清除所选值。

我尝试了以下方法：

```
$("#myid").val("") 
```

这似乎不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T14:18:01.347

你可以使用`prop`方法。

```
$("#myid option:selected").prop("selected", false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:20:21.960

仅当您有一个*空*值选项时，这才有效：

```
<option value=""></option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:26:03.087

你可以试试这个

***代码***

```
<select id="myid">
    <option value="">Select None</option>
    <option value="0" id="item1">Item 1</option>
    <option value="1" id="item1">Item 2</option>
    <option value="2" id="item2">Item 3</option>
    <option value="3" id="item3">Item 4</option>
</select> 
```

***JS代码***

```
$(document).ready(function(){
    $('#myid').change(function(){
        var getVal= $('#myid').select().attr('value');
$('option[id=item'+getVal+']').attr('value','');
    });
}); 
```

[http://jsfiddle.net/RtvPz/63/](http://jsfiddle.net/RtvPz/63/)

# find - Linux：使用 find 和 grep 在文件中查找关键字并计算出现次数

> ID：12198957
> 
> 赞同：1
> 
> 时间：2012-08-30T14:16:50.403
> 
> 标签：find, search-engine, wc

我正在使用 php 构建的搜索脚本中执行此 bash 命令：

```
find myFolder -type f -exec grep -r KEYWORD {} + 

find myFolder -type f -exec grep -r KEYWORD {} + | wc -l

find myFolder -type f | wc -l 
```

第一行给了我找到 KEYWORD 的文件名。

第二行给出了出现的次数，第三行给出了文件的总数。

有没有办法更优雅、更快地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:49:28.280

如果避免 ，您可以获得更高的效率`-exec`，这使得`fork`每个文件匹配一个。`xargs`这里是更好的选择。所以我会做这样的事情：

```
find myFolder -type f -print0 | xargs -0 grep KEYWORD

find myFolder -type f -print0 | xargs -0 grep KEYWORD | wc -l 
```

最后一个应该没问题，至少在 GNU find 中是这样。

`-print0`并`-0`确保正确处理包含空格的文件名。

请注意， grep -r` 意味着递归 grepping，但由于您在每次调用中只提供一个文件名，所以它是多余的。

# android - 三星 Galaxy SIII 与 ACR122U 互动

> ID：12198961
> 
> 赞同：2
> 
> 时间：2012-08-30T14:17:10.833
> 
> 标签：android, windows, nfc

我有一个三星 Galaxy SIII（版本 4.0.4）和一个 ACR122U-A2（驱动版本 1.1.6.3）非接触式阅读器。我正在尝试通过使用阅读器从手机中获取某些或其他唯一代码/ID。

我可以从老式 NFC 诺基亚手机和 MiFare 卡中获得唯一 ID。但只要我将 SGS III 放到读卡器上，它就会每次都生成一个**新的唯一**ID——诺基亚手机或 MiFare 汽车都不是这种情况。

我已经在市场（Play 商店）上安装了几乎所有的 NFC 应用程序 - 但仍然无法通过*任何演示*应用程序在我的 PC 上显示任何信息。

有人可以在这件事上帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T15:45:29.053

随机唯一 ID 是一项功能，而不是错误。它有助于保护您的隐私。收费系统不应依赖于唯一 ID，而应依赖于具有加密挑战的某种其他形式的身份验证。

卡模拟应用程序与任何其他应用程序不同，它们需要在安全元件中运行一些代码（嵌入在 SIM 卡中）。您可以通过谷歌搜索 IzyNFC 了解更多信息。

# objective-c - 如何在 Iphone 或 Ipad 中查看 iTunes 播放器状态？

> ID：12198962
> 
> 赞同：-1
> 
> 时间：2012-08-30T14:17:10.027
> 
> 标签：objective-c, ios

我创建一个游戏。现在我需要检查 iTunes 是否正在播放。当iTunes在后台播放时，我会将游戏背景音乐静音

在 cocos2d 中，当 SimpleAudioEngine 播放时，itunes 会淡出。并且如果打开itunes背景，cocos2d的游戏会淡出bgm。

所以需要一些代码来检查系统状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:36:54.113

解决了：

添加 mediaplayer.frameworks 并导入：

```
#import <MediaPlayer/MediaPlayer.h> 
```

然后将这些代码复制到需要的地方。

```
if ([[MPMusicPlayerController iPodMusicPlayer] playbackState] == MPMusicPlaybackStatePlaying){
    NSLog(@"backgroud music is playing"); 
    return;
} 
```

# asp.net - Hammock Facebook 图形 API 查询参数

> ID：12198965
> 
> 赞同：0
> 
> 时间：2012-08-30T14:17:20.377
> 
> 标签：asp.net, facebook-graph-api, hammock

我正在使用 Hammock 从 Facebook 图形 API 获取数据。当用户登录我的网站时，我想从他的 Facebook 个人资料中获取自他上次登录我的网站以来的所有数据。因此，当用户登录我的网站时，我会更新他的登录时间以及从他上次登录日期到现在的所有 Facebook 个人资料数据。我正在使用吊床来做到这一点。

我想给 Hammock 一个创建日期参数，但它不起作用。

这有效：

```
 RestClient client = new RestClient { Authority = "https://graph.facebook.com/" };
 RestRequest request = new RestRequest { Path = "/me/status  " }; 
```

但这不会：

```
string query = "SELECT status_id, message FROM status  WHERE status_id = me() and creationTime.......";
 RestClient client = new RestClient { Authority = "https://graph.facebook.com/" };
 RestRequest request = new RestRequest { Path = "/me?q=query" }; 
```

如何为吊床请求提供创建时间？

这段代码对我有用：

```
RestClient client = new RestClient { Authority = "https://graph.facebook.com/" };
RestRequest request = new RestRequest { Path = "/me/statues" }; 
```

但它会加载所有用户状态。我想给出一个日期时间参数；例如，如果我想获取自 30.08.2012 以来的用户状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:46:04.073

在您的最后一个示例中，您可以将`since`查询字符串添加到您的请求中：

```
... { Path = "/me/statuses?since=2012-08-30" }; 
```

对于第二个示例，您使用错误的 URL 进行 FQL 查询。试试这个：

```
... { Path = "/fql?q=" + Server.UrlEncode(query) }; 
```

# ios - 连接时适用于 iOS 的 XMPP 框架非常慢

> ID：12198971
> 
> 赞同：0
> 
> 时间：2012-08-30T14:17:41.970
> 
> 标签：ios, xmpp, ejabberd, xmppframework

我目前正在使用 XMPP 框架构建一个聊天客户端。我探索了演示应用程序，我注意到当我输入我的用户名/密码时，需要很长时间（大约 15 秒）才能接收连接和身份验证回调。

登录和验证需要这么长时间是否有特定原因？有没有可能加快速度？例如，Whatsapp 或 iChat 也在使用 xmpp，而且速度非常快。

我在运行 10.8 和 xCode 4.4 的 Mac 上使用 ejabberd 作为 XMPP 服务器。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-18T18:31:21.090

SRV 查找需要时间，这就是您面临问题的原因

通过设置解决这个问题 `[xmppStream setHostName: @"******"]`；

下面有更多解释

*   此 hostName 属性是可选的。
*   如果不设置hostName，那么框架将遵循使用jid 域的xmpp 规范。
*   也就是说，它首先进行 SRV 查找（在 xmpp RFC 中指定）。
*   如果失败，它将退回到简单地尝试连接到 jid 的域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T19:26:30.817

不确定您的情况，但是某些客户端在为服务器域执行 DNS 查找时会出现这种延迟。工作流程是首先搜索 SRV 记录，正如 XMPP 规范所期望的那样。如果域没有 SRV 记录，则回退并尝试在预期的 5222 端口直接连接到域。但是首先尝试使用 SRV 然后回退的过程可能会花费几秒钟。
如果是这种情况，您可以将客户端配置为连接到服务器而不进行 SRV 查找，或者为您的域正确设置 SRV 记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:18:33.293

跟进电子邮件线程，我同意 ppolv 的观点，DNS 超时可能与此处有关。您是否为您的域配置了 SRV 条目？他们是正确的吗？如果您转储 Psi 和 Trillian 生成的流量，您是否发现它们之间的 DNS 请求有差异？

# amazon-ec2 - EC2 上 Glassfish 集群中的会话复制

> ID：12198974
> 
> 赞同：2
> 
> 时间：2012-08-30T14:17:56.607
> 
> 标签：amazon-ec2, cluster-computing, glassfish-3, session-cookies, sessionid

我在通过 SSH 管理的 Glassfish 上构建了一个集群，其中有 2 个实例。我部署了一个显示“会话 id”的应用程序。

此应用程序在 web.config 中有：

```
<distributable/> 
```

在 sun-web.xml 中：

```
<session-config>
    <cookie-properties>
         <property name="cookieDomain" value="compute.amazonaws.com"/>
    </cookie-properties>
</session-config> 
```

我在编辑应用程序中启用了“可用性”。

但是当我访问 2 个网络应用程序版本时，我会看到不同的会话 ID。谁能帮我？

编辑：正如一些用户所注意到的，在 EC2 中不支持多播。Glassfish v3.1.2 附带了一个解决方案，当不允许多播时，它允许使用另外两种不同的方式来发现集群（通过列出实例 ip 或使其自动生成列表）。这里指定了如何在非多播环境中启动集群：[管理 Glassfish 服务器集群](http://docs.oracle.com/cd/E26576_01/doc.312/e24934/clusters.htm#CHDGAIBJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:15:58.490

阅读 v3.1.2 的高可用性管理指南，特别是“在多播传输不可用时发现集群”部分。还没试过，但很期待。干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:26:23.510

首先要尝试验证多播是否适用于您的设置，请使用以下 asadmin 命令。

```
asadmin validate-multicast 
```

您可以查看这个简单的 Youtube 视频，了解如何做到这一点

[http://www.youtube.com/watch?v=sJTDao9OpWA](http://www.youtube.com/watch?v=sJTDao9OpWA)

如果多播不起作用，您可能需要尝试[Glassfish 3.1.2最新版本支持的非多播选项](https://blogs.oracle.com/java/entry/glassfish_3_1_2_released)

发行说明说它支持非多播集群

> 对非多播集群的新支持。GlassFish 高可用性集群现在可以在禁用多播的环境中使用。

我找不到任何提供设置非多播集群的步骤的文档。可能有一个为企业支持客户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T12:03:48.650

正如一些用户所注意到的，在 EC2 中不支持多播。Glassfish v3.1.2 附带了一个解决方案，当不允许多播时，它允许使用另外两种不同的方式来发现集群（通过列出实例 ip 或使其自动生成列表）。这里指定了如何在非多播环境中启动集群：[管理 Glassfish 服务器集群](http://docs.oracle.com/cd/E26576_01/doc.312/e24934/clusters.htm#CHDGAIBJ)

# ios - 单击主页按钮时如何使iPhone应用程序进入暂停菜单？

> ID：12198979
> 
> 赞同：-2
> 
> 时间：2012-08-30T14:18:12.423
> 
> 标签：ios, objective-c, iphone, xcode, home-button

我正在制作一个相当简单的 iPhone 应用程序。我需要做的就是将 bool "paused" 设置为 true 以暂停游戏。当按下主页按钮时，我怎样才能让我的应用程序做到这一点？

谢谢大家，这正是我想要的。但是，由于它位于 appDelegate 中，因此我无法访问布尔值“暂停”来更改它。我怎样才能使它成为全球性的，以便我可以从 appDelegate 访问它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T14:22:09.600

您的应用程序的 Appdelegate.m 提供了可用于跟踪应用程序是否将进入后台的功能；

用户按下按钮；

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

应用程序在后台；

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

在这些函数中的任何一个中，您都可以将 BOOL 设置为 True/YES。-> 请参阅 Apple 在函数中提供的注释以了解其确切用法。

当应用程序再次激活时，appdelegate 将（再次）触发一个函数；

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:21:40.860

在您的 AppDelegate 中，有两种方法在调用按钮时调用

您可以在此处暂停游戏：

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
    {
          //Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    } 
```

或在这里：

```
 - (void)applicationWillResignActive:(UIApplication *)application{
       //Sent when the application is about to move from active to inactive state.
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:21:44.030

在您的应用委托中，实现 applicationWillResignActive:。设置暂停 = YES; 那里。在 applicationDidBecomeActive: 中重置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:21:48.510

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

实现您的 pause 方法，当您的应用程序将变为非活动状态时将调用它。

# java - 不能用 proguard 缩水

> ID：12198982
> 
> 赞同：20
> 
> 时间：2012-08-30T14:18:21.100
> 
> 标签：java, android, obfuscation, proguard, flurry

这是我的 proguard 配置（我从 android 工具文件夹中复制了它并添加了一些行）。

```
-optimizations !code/simplification/arithmetic,!code/simplification/cast,!field/*,!class/merging/*
-optimizationpasses 5
-allowaccessmodification
-dontpreverify

# The remainder of this file is identical to the non-optimized version
# of the Proguard configuration file (except that the other file has
# flags to turn off optimization).

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.**

######################
# added by me
########################
# guava
-keepclasseswithmembers class com.google.common.base.internal.Finalizer{
    <methods>;
}

-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue

#
#Action Bar Sherlock
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

#-dontobfuscate    
#-libraryjars libs/FlurryAgent.jar 
```

我想在我的应用程序中使用 Flurry，但是当我尝试使用 FlurryAgen.jar 混淆我的应用程序时，proguard 无法说出很多这样的错误：

```
Warning: com.flurry.android.ay: can't find referenced class com.google.ads.AdListener 
```

当我尽量不混淆来源时，proguard 也会失败。

如何在proguard中使用flurry？以及如何使 proguard 不混淆我的来源？

**更新** 我还提到 FlurryAgent.jar 似乎已经被混淆了 - [http://korniltsev.ru/p/jBU0f1c.png](http://korniltsev.ru/p/jBU0f1c.png)。也许我们可以忽略缩小整个罐子？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-31T10:22:34.037

最后我设法做到了这样：

```
-keep class com.flurry.** { *; }
-dontwarn com.flurry.** 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-16T00:19:10.397

Korniltsev 的回答对我有用，但是新的 flurry SDK (3.2.2) 建议添加以下内容：

```
-keep class com.flurry.** { *; }
-dontwarn com.flurry.**
-keepattributes *Annotation*,EnclosingMethod
-keepclasseswithmembers class * {
public <init>(android.content.Context, android.util.AttributeSet, int);
} 
```

可能存在一些需要新行的极端情况，所以我最终选择了他们的 README。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T14:30:58.697

我不确定 Flurry 是如何专门与 AdListener 交互的，但 Google 类的名称是被混淆的。

尝试将该行添加`-keep public class com.google.ads.AdListener`到 proguard 文件中。如果 Flurry 使用其他 com.google.ads 类，您可能需要添加更多类例外，但该行应该可以解决您的即时警告。

**更新：** 问题是公共类方法名称被各种广告库混淆。因此，您可能需要包含额外的 proguard 设置以包含这些方法：

```
-keep public class com.google.ads.** { public protected *; } 
-keep public class com.inmobi.androidsdk.** { public protected *; }
-keep public class com.millenialmedia.android.** { public protected *; }
-keep public class com.mobclix.android.sdk.** { public protected *; }
-keep public class com.jumptap.adtag.** { public protected *; } 
```

在与 Flurry 和 proguard 合作后，请务必在上传到您选择的应用市场之前彻底测试 apk。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-02T17:28:52.173

Flurry（现在由 Yahoo 拥有）官方推荐的 proguard 文件可在此处获得：

[https://developer.yahoo.com/flurry/docs/publisher/code/android/](https://developer.yahoo.com/flurry/docs/publisher/code/android/)

```
-­keep class com.flurry.** { *; }
-­dontwarn com.flurry.**
-­keepattributes *Annotation*,EnclosingMethod,Signature
-­keepclasseswithmembers class * {
  public <init>(android.content.Context, android.util.AttributeSet, int); 
}

# Google Play Services library
-­keep class * extends java.util.ListResourceBundle {￼
  protected Object[][] getContents(); 
}

-­keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
  public static final *** NULL; 
}

-­keepnames @com.google.android.gms.common.annotation.KeepName class * ­keepclassmembernames class * {
  @com.google.android.gms.common.annotation.KeepName *; 
}

-­keepnames class * implements android.os.Parcelable {
  public static final ** CREATOR;
}
#If you are using the Google Mobile Ads SDK, add the following:
# Preserve GMS ads classes
-­keep class com.google.android.gms.ads.** { *;
} 
-­dontwarn com.google.android.gms.ads.**

#If you are using the InMobi SDK, add the following:
# Preserve InMobi Ads classes 
-­keep class com.inmobi.** { *;
} 
-­dontwarn com.inmobi.**
#If you are using the Millennial Media SDK, add the following:
# Preserve Millennial Ads classes
-­keep class com.millennialmedia.** { *;
} 
-­dontwarn com.millennialmedia.** 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-29T14:01:34.340

Flurry 不再需要您修改您的 proguard 配置，请参阅[https://developer.yahoo.com/flurry/docs/integrateflurry/android/](https://developer.yahoo.com/flurry/docs/integrateflurry/android/)

> 注意：如果你添加了 Flurry 依赖的 AAR 格式，你不需要修改你的 AndroidManifest 文件或 ProGuard 配置。

# java - EJB @Asynchronous 在同一个类中不起作用

> ID：12198983
> 
> 赞同：8
> 
> 时间：2012-08-30T14:18:21.187
> 
> 标签：java, jakarta-ee, asynchronous, ejb

我有以下情况：

![在此处输入图像描述](../Images/be583c10c307eb3a2c210295d4f56a7a.png)

我希望“methodB”并行执行 10 次。但它只发生在从另一个 bean 调用“methodB”时。

当从同一个类中的另一个方法调用该方法时，为什么注释“@Asynchronous”不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T14:29:35.727

它仅适用于通过客户端代理调用的方法，例如 a`@Local`或`@Remote`接口。这在 EJB 3.1 规范（第 4.5 - 4.5.1 节）中有描述：

> 会话 bean 可以公开具有异步**客户端**调用语义的方法
> 
> ...
> 
> @Asynchronous 注解用于指定哪些业务方法是异步的。
> 
> ...
> 
> 异步方法调用语义仅适用于无接口、本地业务和远程业务**客户端视图**。

# c# - 列表 移动到下一个元素

> ID：12198988
> 
> 赞同：0
> 
> 时间：2012-08-30T14:18:31.290
> 
> 标签：c#, asp.net, collections

我搜索了 SO 并找到了一些帖子，但无法让它们工作。

问题：如何循环到列表集合中的下一项（custLoginHist[1] 等）？

```
 List<eCommCustomer.oCustomer> custLoginHist = new List<eComm.oCustomer>();
    eCommCustomerDAL.GetCustomerPrevLogin(custLoginHist, oCust);

    if (custLoginHist.Count > 0)
    {
        eCommSecurityFactory oSecFactory = new eCommSecurityFactory();
        if (oCust.CustHash == oSecFactory.CreateHash(custLoginHist[0].CustSalt, custLoginHist[0].CustHash))
        {
            //Password has been used before;
            return false;
        }
        else
        {
            // Valid password;
            return true;
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:21:01.670

```
foreach(eCommCustomer.oCustomer cust in custLoginHist)
{
  //Do something with cust here.
} 
```

或者：

```
for(int i = 0; i != custLoginHist.Count; ++i)
{
  eCommCustomer.oCustomer cust = custLoginHist[i];
  //Do something with cust here.
} 
```

在这种情况下，我们希望为任何单个匹配返回 false，否则返回 true，因此：

```
foreach(eCommCustomer.oCustomer cust in custLoginHist)
  if(oCust.CustHash == oSecFactory.CreateHash(custLoginHist[0].CustSalt, custLoginHist[0].CustHash)
    return false;
return true;//if we reached here, no matches. 
```

虽然这是一个坏主意，因为您已经使闯入系统变得更加容易。如果我尝试将我的密码设置为某个值，而你拒绝了，我现在知道你的一个用户使用了该密码。你最好让这种情况发生，尽管你可能应该通过质量检查来阻止一些更有可能的违规者（“password”、“password1”等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:21:00.727

```
List<eCommCustomer.oCustomer> custLoginHist = new List<eComm.oCustomer>();
eCommCustomerDAL.GetCustomerPrevLogin(custLoginHist, oCust);

foreach (var custLogin in custLoginHist)
{
    eCommSecurityFactory oSecFactory = new eCommSecurityFactory();
    if (oCust.CustHash == oSecFactory.CreateHash(custLogin.CustSalt, custLogin.CustHash))
    {
        //Password has been used before;
        return false;
    }
}
return true; 
```

尝试这样的事情，也许您必须自定义您的退货声明，但它应该让您了解它是如何工作的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:20:47.023

```
foreach(var item in yourList)
{
   //Iterate;
} 
```

如果你想要 break ，你可以使用 : break;

如果你想完成，你可以使用：继续；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T14:25:12.423

`List<T>`实现`IEnumerable<T>`，所以你可以使用`foreach`，或者如果你能够`T`在循环中编辑，你可以使用`for`.

```
foreach(var item in custLoginHist)
{

} 
```

或者

```
for (int i = 0; i < custLoginHist.Count; i++)
{

} 
```

然后，如果您需要在循环完成之前退出循环（例如，如果您有一个条件为真，您可以使用`break;`退出循环，或者`return`如果您想返回一个值，您也可以从循环中退出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T14:20:44.243

您可以为此循环。例如`foreach`或`for`：

```
foreach (var custLogin in custLoginHist)
{
    eCommSecurityFactory oSecFactory = new eCommSecurityFactory();
    if (oCust.CustHash == oSecFactory.CreateHash(custLogin.CustSalt, custLogin.CustHash))
    {
        //Password has been used before;
        return false;
    }
    else
    {
        // Valid password;
        return true;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T14:22:08.070

```
List<eCommCustomer.oCustomer> custLoginHist = new List<eComm.oCustomer>();
eCommCustomerDAL.GetCustomerPrevLogin(custLoginHist, oCust);

return custLoginHist.Select(c=>oSecFactory.CreateHash(c.CustSalt,c.CustHash))
                    .Any(x=>x==oCust.CustHash) 
```

# html - 分层 css - 如何限制第二层的背景

> ID：12198990
> 
> 赞同：1
> 
> 时间：2012-08-30T14:18:33.983
> 
> 标签：html, css

[http://fiddle.jshell.net/v5sc9/](http://fiddle.jshell.net/v5sc9/)

我试图在页面右侧结束前大约 10px 结束白色。我已经尝试了几件事，但由于图层的原因，我不确定如何完成这项工作。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:42:14.153

无需复杂化：

在叠加层上：

```
margin-right: 20px 
```

由于左侧有 10px 偏移，所以 20px 而不是 10px。

Codewise，删除`left: 10px`和`margin-right: 20px`替换它`margin: 0 10px`会更好看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:45:54.350

```
#background {
    background-repeat:repeat-x;
    position:relative;
    z-index:1;

}
#overlay {
    position:relative;
    top:-100px;
    margin-right:20px;
    left:10px;
    z-index:10;
    background-color:#FFFFFF;
}​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T14:32:32.977

您可以使用基于百分比的“宽度”和“左”来做到这一点。我修改了你的例子，容器现在有相等的边距（不是 10px 硬）：

[http://fiddle.jshell.net/3bbg8/](http://fiddle.jshell.net/3bbg8/)

# jquery - CSS iPod：捕捉点击滚轮运动

> ID：12198995
> 
> 赞同：2
> 
> 时间：2012-08-30T14:18:42.143
> 
> 标签：jquery, html, css, ipod

我正在制作 CSS iPod（第一代）。我设法让布局正确，包括点击轮和 4 个按钮（菜单、播放/暂停、上一个、下一个）。但这些按钮不是矩形的。然而 HTML 元素是矩形的。因此，如果用户单击“菜单”按钮，则单击轮将成为接收单击的轮。如何准确获取用户的预期点击？

另外如何检测点击轮的滚动？

这是我的 iPod。 [http://inventikasolutions.com/demo/iPod](http://inventikasolutions.com/demo/iPod)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:19:04.187

您可以使用标签创建多边形热点（请参阅[http://www.w3schools.com/tags/tag_area.asp](http://www.w3schools.com/tags/tag_area.asp)）以了解何时单击特定区域。其他解决方案包括在画布中使用颜色映射并在同一位置对颜色进行采样以确定要采取的操作。

对于滚动，您需要在第一次触发 mousedown 时计算指针相对于滚轮中心的角度，并在拖动指针时重复触发 mousemove 时继续计算角度的变化。然后，您可以评估角度的差异，以了解卷轴发生的速度和速度。

# php - php ">" 不带问号的行为类似于 "?>"

> ID：12198997
> 
> 赞同：2
> 
> 时间：2012-08-30T14:18:46.103
> 
> 标签：php, html

我有一个页面，页脚中有一个脚本。

```
<?php
    require_once('../autoloader.php');
    $feed = new SimplePie();
    $feed->set_feed_url('http://simplepie.org/blog/feed/');
    ...
?> 
```

然后，当我将它上传到服务器时，我得到了这样的显示：

```
set_feed_url('http://simplepie.org/blog/feed/'); $feed->init(); $feed->handle_content_type(); print 'test'; ?> 
```

我也安装了一个 phpBB 论坛，它就像魅力一样。所以 > 在我的代码中像 ?> 一样工作。我在该页面上没有更多的 php，并且注释掉该行根本没有帮助。我也尝试添加回声和打印，但没有奏效。所以 PHP 版本 5.2.17 正在运行...我不知道问题是什么以及如何解决它...请帮助我。

PS我知道这件事会解决一半：

```
<?php
    require_once('../autoloader.php');
    $feed = new SimplePie();

    $function = set_feed_url('http://simplepie.org/blog/feed/');
    call_user_func(array($feed), $function);

    $function = init();
    call_user_func(array($feed), $function);

    $function = handle_content_type();
    call_user_func(array($feed), $function);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:21:44.430

听起来 PHP 根本没有在文件上运行，浏览器将其解释`<?php blah >`为未知标签。

# jquery - Jquery TableSorter 2.0 小部件（多列过滤）插件

> ID：12198998
> 
> 赞同：1
> 
> 时间：2012-08-30T14:18:46.453
> 
> 标签：jquery, tablesorter

我想为输入实现 datepicker。问题是输入是在 tablesorter 插件中创建的，我不知道该怎么做。

[http://mottie.github.com/tablesorter/docs/example-widget-filter-custom.html](http://mottie.github.com/tablesorter/docs/example-widget-filter-custom.html) 在这里你可以找到插件的代码： [https ://github.com/Mottie/tablesorter/blob/master/js/jquery .tablesorter.widgets.js](https://github.com/Mottie/tablesorter/blob/master/js/jquery.tablesorter.widgets.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:00:14.997

在版本 2.7.7 中，一个名为的新选项`filter_formatter`被添加到 tablesorter 过滤器小部件中。您现在可以使用此选项添加 jQuery UI 日期选择器范围来过滤表格内容。

您需要包含一个名为“jquery.tablesorter.widgets-filter-formatter.js”的新文件，并添加如下所示的代码来添加它。这是它工作的[演示](http://mottie.github.com/tablesorter/docs/example-widget-filter-formatter-1.html)。

```
$(function() {

  // call the tablesorter plugin
  $("table").tablesorter({
    theme: 'blue',
    // hidden filter input/selects will resize the columns, so try to minimize the change
    widthFixed : true,
    // initialize zebra striping and filter widgets
    widgets: ["zebra", "filter"],
    widgetOptions : {
      // jQuery selector string of an element used to reset the filters
      filter_reset : 'button.reset',
      // add custom selector elements to the filter row
      filter_formatter : {

        6 : function($cell, indx){
          return $.tablesorter.filterFormatter.uiDatepicker( $cell, indx, {
            from : '12/1/2012', // default from date
            to   : '2/1/2014',  // default to date
            changeMonth: true,
            changeYear : true
          });
        }

      }
    }
  });

}); 
```