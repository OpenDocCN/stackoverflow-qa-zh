# StackOverflow 问答 12203000-12203999

# sql - SQL - 无法使分组查询工作

> ID：12203000
> 
> 赞同：2
> 
> 时间：2012-08-30T18:13:51.870
> 
> 标签：sql, ms-access

我有两张桌子（MS Access）

**输入**

```
事件、用户 ID、分数
事件A, 1, 50
事件A, 2, 55
事件 B, 1, 45
事件 B, 2, 33
```

**tbl用户**

```
身份证、姓名
1、约翰
2、亚历克斯
```

我需要显示每个事件的获胜分数、事件和人的姓名。此示例的输出应为

```
事件、名称、分数
赛事 A，亚历克斯，55 岁
事件 B，约翰，45 岁
```

我试过这个来获得事件和最高分：

```
SELECT Max(Score), Event FROM tblInput GROUP BY Event; 
```

但是，如果我尝试选择`ID`（我只是在名称的位置使用，可以在我加入表时改回名称），我被迫将其设置为我不想的聚合函数，或者将它放在 Group by 语句中，我得到类似

```
SELECT Max(Score) AS Score, Event, ID FROM tblInput GROUP BY Event, ID; 
```

```
分数、事件、ID
165 事件A 2
173 事件A 9
170 事件A 32
211 事件B 10
224 事件B 14
256 事件C 16
188 事件C 17
```

任何帮助表示赞赏，抱歉格式不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:43:55.407

像这样创建一个查询：

```
SELECT 
 Max(Score) as topscore, 
 ChildEvent 
FROM 
 T_Participation 
GROUP BY ChildEvent 
```

然后使用第一个查询构建第二个，并且您的输入表加入了事件和分数：

```
select
 childEvent,
 topscore,
 StudentID
from
 query1 q inner join
 t_participation p on
 q.childevent = p.childevent and
 q.topscore = p.score 
```

如果您有多个用户获得最高分怎么办？与事件 A 一样，用户 3 的得分为 55？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:59:24.613

这是一种您可以在一个语句中执行此操作的方法。您需要创建一个事件表及其最高分数。然后将该表连接回您的输入表。您的示例将表名命名为 T_Input，但您的实现使用 T_Participation。请用 T_Participation 替换正确的表名 T_Input。

```
SELECT T.EVENT, T.Score,  U.Name 
FROM T_Input T
    INNER JOIN T_User U ON T.UserID = U.UserID
INNER JOIN 
(
    SELECT Event, MAX(Score) [Score]  
    FROM T_Input T2
        INNER JOIN T_User U2 ON T2.UserID = U2.UserID
    GROUP BY EVENT
)Top_scores ON T.EVENT = Top_scores.EVENT AND T.Score = Top_Scores.Score 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:01:30.917

你可以做：

```
SELECT T_Input.Event, T_User.Name, T_Input.Score
FROM
    (SELECT Max(Score), Event FROM T_Input GROUP BY Event) AS maxScores,
    T_User,
    T_Input
WHERE maxScores.score = T_Input.score
    AND maxScores.Event = T_Input.event
    AND T_User = T_Input.UserId 
```

# java - java中的布尔表达式解析器

> ID：12203003
> 
> 赞同：20
> 
> 时间：2012-08-30T18:14:06.167
> 
> 标签：java, parsing, boolean-expression

**是否有任何 Java 库或技术可以分段解析布尔表达式？**

我的意思是给出这样的表达式：

`T && ( F || ( F && T ) )`

它可以分解成一个表达式树，以显示哪个标记导致了“F”值，就像这样（*可能*是这样的）：

```
T &&               <- rhs false
    ( F ||         <- rhs false
        ( F && T ) <- eval, false
    ) 
```

我正在尝试将布尔表达式评估传达给非程序员。我已经用 Anlr 进行了探索，但我无法让它做很多事情（它似乎有一点学习曲线）。

我不反对自己写，但我宁愿不重新发明轮子。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T18:17:27.193

您可以使用[MVEL](http://mvel.codehaus.org/)或[JUEL](http://juel.sourceforge.net/)来做到这一点。两者都是表达式语言库，下面的示例使用 MVEL。

例子：

```
System.out.println(MVEL.eval("true && ( false || ( false && true ) )")); 
```

打印：假

如果你真的想使用 'T' 和 'F' 你可以这样做：

```
Map<String, Object> context = new java.util.HashMap<String, Object>();
context.put("T", true);
context.put("F", false);
System.out.println(MVEL.eval("T && ( F || ( F && T ) )", context)); 
```

打印：假

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T23:16:26.247

我已经使用[Javaluator](http://javaluator.sourceforge.net)对此进行了编码。
这不完全是您正在寻找的输出，但我认为这可能是一个起点。

```
package test;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import net.astesana.javaluator.*;

public class TreeBooleanEvaluator extends AbstractEvaluator<String> {
  /** The logical AND operator.*/
  final static Operator AND = new Operator("&&", 2, Operator.Associativity.LEFT, 2);
  /** The logical OR operator.*/
  final static Operator OR = new Operator("||", 2, Operator.Associativity.LEFT, 1);

  private static final Parameters PARAMETERS;

  static {
    // Create the evaluator's parameters
    PARAMETERS = new Parameters();
    // Add the supported operators
    PARAMETERS.add(AND);
    PARAMETERS.add(OR);
    // Add the parentheses
    PARAMETERS.addExpressionBracket(BracketPair.PARENTHESES);
  }

  public TreeBooleanEvaluator() {
    super(PARAMETERS);
  }

  @Override
  protected String toValue(String literal, Object evaluationContext) {
    return literal;
  }

  private boolean getValue(String literal) {
    if ("T".equals(literal) || literal.endsWith("=true")) return true;
    else if ("F".equals(literal) || literal.endsWith("=false")) return false;
    throw new IllegalArgumentException("Unknown literal : "+literal);
  }

  @Override
  protected String evaluate(Operator operator, Iterator<String> operands,
      Object evaluationContext) {
    List<String> tree = (List<String>) evaluationContext;
    String o1 = operands.next();
    String o2 = operands.next();
    Boolean result;
    if (operator == OR) {
      result = getValue(o1) || getValue(o2);
    } else if (operator == AND) {
      result = getValue(o1) && getValue(o2);
    } else {
      throw new IllegalArgumentException();
    }
    String eval = "("+o1+" "+operator.getSymbol()+" "+o2+")="+result;
    tree.add(eval);
    return eval;
  }

  public static void main(String[] args) {
    TreeBooleanEvaluator evaluator = new TreeBooleanEvaluator();
    doIt(evaluator, "T && ( F || ( F && T ) )");
    doIt(evaluator, "(T && T) || ( F && T )");
  }

  private static void doIt(TreeBooleanEvaluator evaluator, String expression) {
    List<String> sequence = new ArrayList<String>();
    evaluator.evaluate(expression, sequence);
    System.out.println ("Evaluation sequence for :"+expression);
    for (String string : sequence) {
      System.out.println (string);
    }
    System.out.println ();
  }
} 
```

这是输出：

> :T && ( F || ( F && T ) )
> (F && T)=false
> (F || (F && T)=false)=false
> (T && (F || (F && T)=假）=假）=假
> 
> :(T && T) || 的评估序列 (F && T)
> (T && T)=真
> (F && T)=假
> ((T && T)=真|| (F && T)=假)=真

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-10T07:28:05.970

我最近在 Java 中编写了一个专门用于操作布尔表达式的库：[jbool_expressions](https://github.com/bpodgursky/jbool_expressions)。

它包括一个工具，也可以从字符串输入中解析表达式：

```
Expression<String> expr = ExprParser.parse("( ( (! C) | C) & A & B)") 
```

你也可以做一些相当简单的简化：

```
Expression<String> simplified = RuleSet.simplify(expr);
System.out.println(expr); 
```

给

```
(A & B) 
```

如果您想逐步完成分配，则可以一一分配值。对于此处的示例，

```
Expression<String> halfAssigned = RuleSet.assign(simplified, Collections.singletonMap("A", true));
System.out.println(halfAssigned); 
```

节目

```
B 
```

您可以通过分配 B 来解决它。

```
Expression<String> resolved = RuleSet.assign(halfAssigned, Collections.singletonMap("B", true));
System.out.println(resolved); 
```

节目

```
true 
```

不是您要求的 100%，但希望它有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T18:20:05.193

查看[BeanShell](http://www.beanshell.org/)。它具有接受类似 Java 语法的表达式解析。

**编辑：**除非您尝试实际解析`T && F`字面意思，但您可以在 BeanShell 中使用文字`true`和`false`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-16T14:39:08.960

[mXparser](http://mathparser.org/)处理布尔运算符 - 请找几个例子

示例 1：

```
import org.mariuszgromada.math.mxparser.*;
...
...
Expression e = new Expression("1 && (0 || (0 && 1))");
System.out.println(e.getExpressionString() + " = " + e.calculate()); 
```

结果1：

```
1 && (0 || (0 && 1)) = 0.0 
```

示例 2：

```
import org.mariuszgromada.math.mxparser.*;
...
...
Constant T = new Constant("T = 1");
Constant F = new Constant("F = 0");
Expression e = new Expression("T && (F || (F && T))", T, F);
System.out.println(e.getExpressionString() + " = " + e.calculate()); 
```

结果 2：

```
T && (F || (F && T)) = 0.0 
```

有关更多详细信息，请遵循[mXparser 教程](http://mathparser.org/mxparser-tutorial/)。

最好的祝福

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-04T09:46:08.753

试试这个。

```
static boolean parseBooleanExpression(String s) {
    return new Object() {

        int length = s.length(), index = 0;

        boolean match(String expect) {
            while (index < length && Character.isWhitespace(s.charAt(index)))
                ++index;
            if (index >= length)
                return false;
            if (s.startsWith(expect, index)) {
                index += expect.length();
                return true;
            }
            return false;
        }

        boolean element() {
            if (match("T"))
                return true;
            else if (match("F"))
                return false;
            else if (match("(")) {
                boolean result = expression();
                if (!match(")"))
                    throw new RuntimeException("')' expected");
                return result;
            } else
                throw new RuntimeException("unknown token");
        }

        boolean term() {
            if (match("!"))
                return !element();
            else
                return element();
        }

        boolean factor() {
            boolean result = term();
            while (match("&&"))
                result &= term();
            return result;
        }

        boolean expression() {
            boolean result = factor();
            while (match("||"))
                result |= factor();
            return result;
        }

        boolean parse() {
            boolean result = expression();
            if (index < length)
                throw new RuntimeException(
                    "extra string '" + s.substring(index) + "'");
            return result;
        }
    }.parse();
} 
```

和

```
public static void main(String[] args) {
    String s = "T && ( F || ( F && T ) )";
    boolean result = parseBooleanExpression(s);
    System.out.println(result);
} 
```

输出：

```
false 
```

语法是

```
 expression = factor { "||" factor }
 factor     = term { "&&" term }
 term       = [ "!" ] element
 element    = "T" | "F" | "(" expression ")" 
```

# php - 无法为 PHP 配置 APC

> ID：12203010
> 
> 赞同：0
> 
> 时间：2012-08-30T18:14:40.487
> 
> 标签：php, apc, ini, php-extension

我的新专用服务器遇到了一个非常奇怪的问题。它安装了 Plesk 11，我正在尝试在其中安装 APC。一切顺利，我可以在 上看到 APC 配置`phpinfo()`，但我无法配置它！我正在尝试各种可能的方法，但 phpinfo 中显示的配置没有改变。它没有显示`apc.ini`配置文件已加载到其他 ini 文件中，但如果我`extension=apc.so`在文件中注释该行，APC 就会关闭。

这是我的 apc.ini 文件：

```
[APC]
extension=apc.so

apc.enabled = 1    # Turn APC cache on
apc.optimization  = 0    # Experimental keep off
apc.shm_segments = 1    # Shared memory segments
apc.shm_size = 256M  # Max shared memory dependent on OS
apc.ttl = 7200
apc.user_ttl  = 7200
apc.num_files_hint = 1024
apc.mmap_file_mask = /tmp/apc.XXXXXX
apc.enable_cli = 1 # Allow command line php to function
apc.cache_by_default  = 1 # Enabled, 0 for filters
apc.max_file_size = 10M # Maximum cached file size
apc.stat = 1 # 1 for dev, 0 for production, whether the source file is checke$
#apc.include_once_override = 1 # Use PHP5.3+ for include_once optimization 
```

在此先感谢并为我的英语不好感到抱歉，

维尼修斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:32:42.260

哦，我的坏。ini 文件中的注释不应该与 . 一起使用`#`，它们与`;`. 真的对不起。现在它就像一个魅力。

# regex - 需要限制正则表达式中的字符数

> ID：12203012
> 
> 赞同：3
> 
> 时间：2012-08-30T18:14:54.650
> 
> 标签：regex

我正在写一个[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。此时它允许任意位数：

```
^(([1-9]*)|(([1-9]*).([0-9]*)))$ 
```

如何总共允许 64 位数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:56:29.667

## 正则表达式

看到它**[在行动](http://regexr.com?320jr)**。

```
(?=^\d*\.?\d*$)^(\.?\d){64}$ 
```

## 解释

```
(?=^\d*\.?\d*$)     # Can contain maximum one dot in total between digits
^(\.?\d){64}$       # Match exactly 64 digits, dot is optional 
```

第二行使其**总共匹配 64 位数字**，可以选择任意数量的点。第一行不包括具有**多个点**的字符串。因此，正则表达式为您提供由 64 位数字和最多 1 个点组成的字符串。

### 匹配样本

```
2352352363463456346444651346546213165498546516854985213242135355
.2352352363463456346444651346546213165498546516854985213242135355
235235236346345634644.4651346546213165498546516854985213242135355
235.2352363463456346444651346546213165498546516854985213242135355
23523523634634563464446513465462131654985.46516854985213242135355 
```

### 不匹配的样本

```
235235236346345634644465134654621316549854651685498521324213535
2352352363463456346444651346546213165498546516854985213242135355.
..235235236346345634644465134654621316549854651685498521324213535
..2352352363463456346444651346546213165498546516854985213242135355
23523523.63463456346444651346546213165498.546516854985213242135355
23523523.63463456346444651346546213165498.54651685498521324213535 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:18:40.733

试试这个正则表达式：

```
^\d{64}$ 
```

[红色链接](http://rubular.com/r/Ysm2U4yNJq)

但是，如果您需要一个十进制数的精度为 64（正如您的正则表达式所暗示的那样），如下例所示，

```
235235236346345634644.4651346546213165498546516854985213242135355
235.2352363463456346444651346546213165498546516854985213242135355
23523523634634563464446513465462131654985.46516854985213242135355 
```

小数点前后的位数可能可变，但总计为 64，那么最好使用字符串操作从数字中删除小数点，然后应用上述正则表达式进行验证（或仅验证长度的字符串）。

* * *

如果你真的坚持使用正则表达式，你可以试试这个：

```
^((?:[1-9]\d{63})|(?:(?=[\d.]{65})(?![\d.]{66})(?:[1-9]\d*|0)\.\d*[1-9]))$ 
```

分解：

*   `(?:[1-9]{64})`：这涵盖了所有数字，没有小数点。
*   `|`: 大逻辑或。
*   `(?=[\d.]{65})`：正向前瞻，只允许数字和点，并确保输入的字符总数不少于 65 个。
*   `(?![\d.]{66})`：负前瞻，只允许数字和点，并确保输入中的总字符不超过 65 个。
*   `(?:[1-9]\d*|0)`: 小数点前的数字不应有前面的零，除非它是唯一的数字。
*   `\.`: 强制小数点只出现一次，而不是更多（正如前瞻所允许的那样）。
*   `\d*[1-9]`: 确保小数点后的数字不以零结尾。

这匹配：

```
235235236346345634644.4651346546213165498546516854985213242135355
235.2352363463456346444651346546213165498546516854985213242135355
23523523634634563464446513465462131654985.46516854985213242135355
2352352363463456346444651346546213165498546516854985213242135355
0.465168549852132421353551545656456489155456651654654245646564558
2.465168549852132421353551545656456489155456651654654245646564558 
```

并且不匹配：

```
0352352363463456346444651346546213165498546516854985213242135355
23523523634634563464446513465462131654985.46516854985213242100000
00.46516854985213242135355154565645648915545665165465424564656454
2352352363463456346444651346546213165498546516854985213242 
```

（PS：虽然我不赞成这样做，但尝试起来很有趣。）

我在这个[Rubular 链接](http://rubular.com/r/N84N7L7V0R)上测试了不同的输入。

@acheong87 在评论中的积极前瞻帮助我找到了这个正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:17:45.493

将 * 替换为 {n,m} 其中 n 是最小匹配项，m 是最大匹配项，例如 {0,64}

或者是的，如果您想完全匹配 64（不少于），您可以执行 {64}。

请参阅此参考[正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:41:30.710

试试这个正则表达式：[http ://regex101.com/r/qM9mO8](http://regex101.com/r/qM9mO8)

`/^(?:\d{64}|(?=.*\.)(?!.*\..*\.)[\d.]{64})$/gm`

此正则表达式适用于 64 个连续数字或 63 个数字和 1 个点。

考虑到你的表情，我想这就是你要找的东西。

祝你好运！

# javascript - 如何使用 ajax 调用 javascript 加载新的 twitter 提要

> ID：12203013
> 
> 赞同：0
> 
> 时间：2012-08-30T18:14:57.707
> 
> 标签：javascript, jquery, html, css, ajax

我对 javascript 非常陌生，当用户输入新的搜索查询时，我不知道如何加载新的 twitter 提要。下面是我的代码

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Custom Twitter Feed</title>
<style type="text/css">
body    {
    background: #111111;
    position: relative;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: bold;
    color: #ccc;
}
h1 { padding: 20px 0 0 15px; margin: 0; letter-spacing: -3px; }
h2 { padding: 0 0 0 15px; margin: 0; color: #777; letter-spacing: -2px; }
.loader     { position: absolute; top: 250px; left: 105px; }
#twitter    { position: relative; width: 280px; background: #222; height: 820px; margin:     50px 0 0 250px;  }
#twitter li p   { padding: 0 0 15px; }
#twitter p a:link, #twitter p a:active, #twitter p a:visited    { color: #6fb2cd;     text-decoration: none; }
#twitter p a:hover  { text-decoration: underline; }
#twitter ul {
    width: 260px;
    height: auto;
    padding: 15px 0 0 15px;
    margin: 0;
}
#twitter li {
    float: left;
    margin: 3px 0;
    list-style-type: none;
}
li.twitter_date {
    background: url(../images/date_bg.jpg) no-repeat left top;
    width: 95px;
    height: 23px;
    text-align: center;
    line-height: 21px;
}
.twitter_date a:active, .twitter_date a:link, .twitter_date a:visited   {
    color: #666;
    background: #333;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    text-decoration: none;
    text-transform: uppercase;
    padding: 7px;
}
.twitter_date a:hover   {
    color: #666;
}
a:link#go_back, a:active#go_back, a:visited#go_back {
    display: block;
    background: url(/demos/go_back.jpg) no-repeat top left;
    width: 120px;
    height: 40px;
    position: absolute;
    top: 50px;
    left: 100px;
    text-indent: -9999px;
    color: #111;
}
a:hover#go_back {
    background: url(/demos/go_back.jpg) no-repeat -120px 0;
}
</style>
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

//Twitter
window.onload = function() {
    var ajax_load = "<img class='loader' src=' loader.gif' alt='Loading...' />";
    var url = 'http://twitter.com/statuses/user_timeline/' + 'coldplay' + '.json?call    back=twitterCallback2&count=6';
    var script = document.createElement('script');  
    $("#twitter_feed").html(ajax_load);
    script.setAttribute('src', url);
    document.body.appendChild(script);
} 
```

changeFeed 是应该更改提要的函数，但它不起作用。有任何想法吗？

```
function changeFeed(){
    var ajax_load = "<img class='loader' src=' loader.gif' alt='Loading...' />";
    var newSearch = $('#query').val();
    var url = 'http://twitter.com/statuses/user_timeline/' + newSearch + '.json?callback=twitterCallback2&count=6';
    var script = document.createElement('script');  
    $("#twitter_feed").html(ajax_load);
    script.setAttribute('src', url);
    document.body.appendChild(script);
}

function twitterCallback2(twitters) {
  var statusHTML = [];
  for (var i=0; i<twitters.length; i++){
    var username = twitters[i].user.screen_name;
    var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, 
function(url) { return '<a href="'+url+'">'+url+'</a>';
}).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
  return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
});
statusHTML.push('<li class="twitter_date"><a href="http://twitter.com/'+username+'/statuses/'+twitters[i].id+'">'+relative_time(twitters[i].created_at)+'</a></li> <li><p>'+status+'</p></li>');
  }
  document.getElementById('twitter_update_list').innerHTML = statusHTML.join('');
}

function relative_time(time_value) {
  var values = time_value.split(" ");
  time_value = values[1] + " " + values[2] + " " + values[5] + " " + values[3];
  var parsed_date = new Date();
  parsed_date.setTime(Date.parse(time_value));  
  var months = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug',
'Sep', 'Oct', 'Nov', 'Dec');
  var m = parsed_date.getMonth();
  var postedAt = '';
  postedAt = months[m];
  postedAt += " "+ parsed_date.getDate();
  postedAt += ","
  postedAt += " "+ parsed_date.getFullYear();
  return postedAt;
}                                        

</script>
</head>

<body>
<a id="go_back" href="javascript:history.go(-1)">Go Back</a>
<div id="twitter">
    <form>
    Search: <input type="text" name="searchstring" id="query" /><br />
    </form>
    <button type="button" onclick="changeFeed();">Search</button>

    <h1>searchstring.text()</h1>
    <h2>Twitter Feed</h2>
    <ul id="twitter_update_list">
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:32:48.127

我忘了创建元素 newSearch。一旦我包括了这条线

```
var newSearch = document.createElement('newSearch') 
```

一切开始正常。

# java - 强制转换时的 Java 编译时错误

> ID：12203019
> 
> 赞同：8
> 
> 时间：2012-08-30T18:15:13.247
> 
> 标签：java

下面的代码给了我编译时错误**Type mismatch: cannot convert from int to byte**

```
int i = 10;
byte b = i; 
```

但下面没有

```
 final int i = 10;
 byte b = i; 
```

我不明白为什么编译器会在 final 的情况下表现出来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T18:16:59.627

我认为这是因为 10 适合一个字节，但如果整数需要超过 8 位，那么它将无法再正确地执行此分配。

**编辑**

澄清一下，将其设为 final 是允许编译器将 int 视为常量，以便它可以进行常量折叠。它可能会阻止使用非最终 int 进行分配，因为它在编译时不知道该值，并且它可能比一个字节可以容纳的值大得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T18:21:31.073

案例 1：编译错误，因为 an`int`可能不适合 a `byte`; 显式转换是必要
的情况2：编译器将第二条语句编译为`byte b = 10;`（原样`i`）`final`，所以没有错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:46:45.863

尝试这个

```
int i=45;
final int j=i;
byte b=j; 
```

将此与

```
final int j=56;
byte b=j; 
```

这将让您了解 int 到 byte 的隐式缩小是如何发生的，即只有在分配的值是常量表达式时才会发生

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:14:33.960

情况1 ：

```
int i = 10;
byte b = i; 
```

`int`原始类型值的范围可以从 `-2,147,483,648 [-231]`aka`Integer.MIN_VALUE`到`+2,147,483,647 [2 31-1]`aka `Integer.MAX_VALUE`。

`int i= 10` 意味着编译器假定 int 的值可以从 -2,147,483,648 [-231] 到 +2,147,483,647 [2 31-1]，但 byte 不能保存这个值。因此编译器给出了错误。

案例2：

```
final int i = 10;
byte b = i; 
```

这里 int 变量声明为 final 并初始化为 10。 byte 可以保存 -128 到 127 之间的值，并且不会通过 out 程序更改。由于这个原因，编译器没有给出任何错误。

如果您用 128 声明相同的变量，则会出错。前任：

```
final int i = 128;
byte b = i; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:31:18.023

> 我不明白为什么编译器将第二条语句编译为字节 b = 10 – anand

那是因为，您正在指示编译器变量“i”将始终保持“10”作为值。因此，无论在何处引用，编译器都会将“i”替换为“10”。通过这样做，它将使 JVM 的工作更容易！

# excel - 我有一个在 Excel 表中记录使用情况的代码，但我遇到了一个错误和一个问题

> ID：12203020
> 
> 赞同：1
> 
> 时间：2012-08-30T18:15:14.800
> 
> 标签：excel, vba

这是一个通用日志系统，由这里的几个人和我自己创建。我对此感到相当自豪...我遇到了两个问题...如果有人可以提供解决方案，那就太好了。

这是代码：

```
Option Explicit
Dim PreviousValue

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim sLogFileName As String, nFileNum As Long, sLogMessage As String

    sLogFileName = ThisWorkbook.path & Application.PathSeparator & "Log.txt"

 On Error Resume Next ' Turn on error handling
    If Target.Value <> PreviousValue Then
        ' Check if we have an error
        If Err.Number = 13 Then
           PreviousValue = 0
        End If
        ' Turn off error handling
        On Error GoTo 0
        sLogMessage = Now & Application.UserName & " changed cell " & Target.Address _
        & " from " & PreviousValue & " to " & Target.Value

        nFileNum = FreeFile                         ' next file number
        Open sLogFileName For Append As #nFileNum   ' create the file if it doesn't exist
        Print #nFileNum, sLogMessage                ' append information
        Close #nFileNum                             ' close the file
    End If
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    PreviousValue = Target(1).Value
End Sub 
```

这是两个问题。

1.  如果多次选择并尝试写入单元格，则脚本会出错。
2.  如果有人编辑单元格并将其留空，它将显示`8/30/2012 1:45:01 PM Matthew Ridge changed cell $K$3 from Test to`而不是`8/30/2012 1:45:01 PM Matthew Ridge changed cell $K$3 from Test to Blank or Empty`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:46:53.860

马特

一些事情

1.  `On Error Resume Next`处理不当。除非绝对必要，否则应避免使用它。
2.  当您使用`Worksheet_Change`事件时，最好关闭事件然后在最后重新打开它们以避免可能的无限循环。
3.  如果您要关闭事件，则必须使用正确的错误处理。
4.  由于您只存储一个单元格，`PreviousValue`所以我假设您不希望在用户选择多个单元格时运行代码？

我认为这就是您正在尝试的（未**测试**）？

```
Option Explicit

Dim PreviousValue

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim sLogFileName As String, nFileNum As Long, sLogMessage As String
    Dim NewVal

    On Error GoTo Whoa

    Application.EnableEvents = False

    sLogFileName = ThisWorkbook.Path & Application.PathSeparator & "Log.txt"

    If Not Target.Cells.Count > 1 Then
        If Target.Value <> PreviousValue Then
            If Len(Trim(Target.Value)) = 0 Then _
            NewVal = "Blank" Else NewVal = Target.Value

            sLogMessage = Now & Application.UserName & _
            " changed cell " & Target.Address & " from " & _
            PreviousValue & " to " & NewVal

            nFileNum = FreeFile
            Open sLogFileName For Append As #nFileNum
            Print #nFileNum, sLogMessage
            Close #nFileNum
        End If
    End If
LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    PreviousValue = Target(1).Value
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:34:36.350

This worked for me. Ideally you'd have a named range on the sheet being tracked which you could use to restrict tracking only to changes occuring inside that range.

```
Const MAX_TRACKED_CELLS As Long = 50
Dim PreviousValues As Object

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim c As Range
    Dim haveDict As Boolean, val, addr

    haveDict = Not PreviousValues Is Nothing

    If Target.Cells.Count <= MAX_TRACKED_CELLS Then
        For Each c In Target.Cells
            addr = c.Address()
            If haveDict Then
                If PreviousValues.exists(addr) Then
                    val = PreviousValues(addr)
                End If
            Else
                val = "{unknown}"
            End If

            If c.Value <> val Then
                Debug.Print "Changed:", addr, IIf(val = "", "Empty", val), _
                            " to ", IIf(c.Value = "", "Empty", c.Value)
            End If

        Next c
    End If

End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    Dim c As Range

    If PreviousValues Is Nothing Then
        Set PreviousValues = CreateObject("scripting.dictionary")
    Else
        PreviousValues.RemoveAll
    End If

    If Target.Cells.Count <= MAX_TRACKED_CELLS Then
        For Each c In Target.Cells
            PreviousValues.Add c.Address(), c.Value
        Next c
    End If

End Sub 
```

# python - Python 中的基本搜索和替换未执行

> ID：12203023
> 
> 赞同：0
> 
> 时间：2012-08-30T18:15:38.407
> 
> 标签：python

我正在尝试在 Python 中编写一些代码，这将简单地从字符串输入中删除任何 HTML 标记。但由于某种原因，代码不会在我的家庭 Python 安装上执行（只是挂起），并在 Udacity 界面上被杀死。

我哪里错了？

```
def remove_tags(sentence):
    list = []
    state = 0
    while state == 0:
        location1 = sentence.find('<')
        location2 = sentence.find('>',location1)
        if location1 != -1:
            chamber = sentence[location1:location2+1]
            sentence.replace(chamber,'')
        elif location1 == -1:
            state = 1
            return sentence.split()
    return sentence.split()

print remove_tags('''<table cellpadding='3'>
                     <tr><td>Hello</td><td>World!</td></tr>
                     </table>''') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:19:41.653

为了使`while`循环终止，您需要包含一个更改`state`.

实际上，您正在等待没有 '<' 字符`sentence`并从`while`循环内部返回。因为您永远不会改变 的值`sentence`，所以您永远不会达到`return`。

我发现这段代码令人困惑，因为您正在使用该`state`变量，但您似乎打算将循环无限化，退出不是在 while 中发生，而是从循环内部发生。如果这是您的意图，则使用 . 会更清楚地说明`while True`。

但是，我认为最清晰的版本是`while '<' in sentence:`. 然后，您可以省去内部`if`语句：

```
while '<' in sentence:
    location1 = sentence.find('<')
    location2 = sentence.find('>',location1)
    chamber = sentence[location1:location2+1]
    sentence = sentence.replace(chamber,'')

return sentence.split() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:19:23.230

您正在进行替换，但没有将结果存储在任何地方，因此它丢失了。我假设你的意思是这样的：

```
sentence = sentence.replace(chamber,'') 
```

代替：

```
sentence.replace(chamber,'') 
```

字符串在 Python 中是不可变的，因此不能“就地”修改。始终会创建一个新字符串，因此如果要保留它，则必须为其分配一个名称。

只有在文本中找不到`while`循环时，循环才会退出（通过语句） ，除非文本不包含开头的字符，否则永远不会发生这种情况，因为如前所述，您永远不会更改.`return``<``<``sentence`

我还要提到你的`elif`是多余的。您可以只使用`else`那里并省略条件，因为它与您的`if`. 此外，不需要`state`变量或`list`就此而言（这是一个不好的名字开始）。

我会像这样重写你的函数：

```
def remove_tags(html):
    while '<' in html:
        start = html.find('<')
        end = html.find('>', start)
        tag = html[start:end+1]
        html = html.replace(tag, '', 1)
    return html.split() 
```

我还更改了您的变量名称以更好地反映它们的用途。

当然，如果您`>`的 HTML 标签的属性中有任何符号，这个小功能将无法去除您想要的内容。相反，请考虑使用 HTML 解析器（例如 BeautifulSoup）来执行此操作。

# objective-c - 如何从 tableView:cellForRowAtIndexPath 中访问 tableView 单元格的高度？

> ID：12203027
> 
> 赞同：0
> 
> 时间：2012-08-30T18:15:58.740
> 
> 标签：objective-c, ios, cocoa-touch, tableview

我需要从 tableView:cellForRowAtIndexPath 方法中获取 tableView 单元格的高度。

例如，我将行的高度设置`tableView:heightForRowAtIndexPath`为返回 200。然而`tableView:cellForRowAtIndexPath`，当我`NSLog(@"cell height: %f", cell.contentView.frame.size.height);`没有得到 200 时，我得到的默认单元格高度为 44.0。然而，单元格的大小在模拟器中是视觉上正确的。必须有一种方法可以`heightForRowAtIndexPath`直接获取指定的大小，而无需我将其存储在单独的变量中 - 不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:25:21.230

你可以在`tableView:cellForRowAtIndexPath`.

这是一个例子：

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
   CGFloat cellHeight = [self tableView:self.tableView heightForRowAtIndexPath:indexPath];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:35:11.163

表`tableView:heightForRowAtIndexPath:`视图仅使用它来确定表视图中每个单元格的垂直位置、滚动指示器的大小等。

但是在`tableView:cellForRowAtIndexPath:`您负责创建具有相同高度的单元格时，可以通过`frame`在 NIB/Storyboard 文件中设置或定义具有正确高度的单元格。

这两种方法是独立的。创建高度为 的单元格并没有什么神奇之处 `tableView:heightForRowAtIndexPath:`。如果您创建一个更大的单元格，那么这个单元格将与表格视图中的下一个单元格重叠。

所以你可以调用你自己的`tableView:heightForRowAtIndexPath:`方法（我只是看到@Larcus94 确实建议了这个）。

但是，如果表格中所有单元格的高度相同，则单独的常数会更有效。

# grails - layoutTitle 标签问题

> ID：12203032
> 
> 赞同：0
> 
> 时间：2012-08-30T18:16:24.057
> 
> 标签：grails, gsp

我正在做一个 grails 项目。所以在它的主布局页面中有一个字符串

```
 <title>CHP: <g:layoutTitle /></title> 
```

每个视图页面都有一个标题标签。但是我发现在 HelperMethodsTagLib （在同一个命名空间内）中，layoutTitle 标记被覆盖：

```
def layoutTitle = { attrs, body ->
        try {
            out << this.pageScope.settedPageTitle
        } catch (Exception e) {
            out << "Default"
        }
    } 
```

此实现不起作用，因此每个页面都有标题 CHP：默认值。删除此实现会导致应用程序出现以下问题：

```
 2012-08-30 20:53:40,580 [http-8080-2] ERROR chp.HomeController  - org.codehaus.groovy.grails.web.errors.GrailsWrappedRuntimeException
2012-08-30 20:53:40,591 [http-8080-2] ERROR pages.GroovyPagesServlet  - Error processing GSP: Error executing tag <g:layoutTitle>: java.lang.StackOverflowError at /home/aggressor/Job/chp/trunk/grails-app/views/layouts/user_page.gsp:5
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException: Error executing tag <g:layoutTitle>: java.lang.StackOverflowError at /home/aggressor/Job/chp/trunk/grails-app/views/layouts/user_page.gsp:5
    at home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp$_run_closure1_closure3.doCall(home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp:23)
    at home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp$_run_closure1_closure3.doCall(home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp)
    at home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp$_run_closure1.doCall(home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp:25)
    at home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp$_run_closure1.doCall(home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp)
    at home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp.run(home_aggressor_Job_chp_trunk_grails_app_views_layouts_user_page_gsp:40)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.StackOverflowError
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    ... 6 more
Caused by: java.lang.StackOverflowError
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib)
    at chp.HelperMethodsTagLib.getProperty(chp.HelperMethodsTagLib) 
```

# c# - 为 DoL API 将 API 示例从 C# 转换为 VB

> ID：12203037
> 
> 赞同：0
> 
> 时间：2012-08-30T18:16:53.793
> 
> 标签：c#, .net, vb.net, c#-4.0

我正在尝试将美国劳工部 API 文档中的示例代码从 C# 转换为 VB（如果我能让它工作非常酷。在[这里查看](http://developer.dol.gov/DotNetSamples.htm)）。我**不是**在制作 MVC 示例。当我使用任何在线转换器时，我会收到错误：

```
-- line 1 col 11: invalid TypeDecl 
```

这是 C# 代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        AgencyEntities entity = new AgencyEntities(new Uri(“http://api.dol.gov/V1/DOLAgency”));
        entity.SendingRequest += new EventHandler<SendingRequestEventArgs>(DOLDataUtil.service_SendingRequest);
        AgenciesView.DataSource = entity.Agencies;
        AgenciesView.DataBind();
    } 
```

我怎样才能在VB中把它连接起来？当我使用 VB Page_Load 逐行更改时，我得到了这个：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim entity As New AgencyEntities(New Uri("http://api.dol.gov/V1/DOLAgency"))

    entity.SendingRequest += New EventHandler(Of SendingRequestEventArgs)(DOLDataUtil.service_SendingRequest)
    AgenciesView.DataSource = entity.Agencies
    AgenciesView.DataBind()

End Sub 
```

但是，线

```
entity.SendingRequest += New EventHandler(Of SendingRequestEventArgs)(DOLDataUtil.service_SendingRequest) 
```

失败并出现几个错误：

> *   错误 1 ​​'Public Event SendingRequest(sender As Object, e As System.Data.Services.Client.SendingRequestEventArgs)' 是一个事件，不能直接调用。使用“RaiseEvent”语句来引发事件。
> *   错误 2 委托 'System.EventHandler(Of System.Data.Services.Client.SendingRequestEventArgs)' 需要一个 'AddressOf' 表达式或 lambda 表达式作为其构造函数的唯一参数。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:24:26.153

将有问题的行替换为：

```
AddHandler entity.SendingRequest, AddressOf DOLDataUtil.service_SendingRequest 
```

看看这是否有帮助...VB 不支持添加事件处理程序的“+”语法。

# xml - 合并 .xml 数据的工具

> ID：12203038
> 
> 赞同：0
> 
> 时间：2012-08-30T18:16:56.117
> 
> 标签：xml, code-coverage

是否有一种工具可以合并来自具有相同数据结构的多个 xml 的数据。

例如：覆盖数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:58:42.300

我可以用一个简单的 bat 文件来做到这一点

```
@Echo On

TITLE APPEND FILES

 ECHO ^<root^> > C:\AppendedFile.xml 

 for %%f in (C:\works\file*.xml) do (

 type "%%f" >> C:\AppendedFile.xml         

 )

 ECHO ^</root^> >> C:\AppendedFile.xml 

 pause 
```

# actionscript-3 - 使用 UrlLoader 时如何管理临时网络问题？

> ID：12203043
> 
> 赞同：1
> 
> 时间：2012-08-30T18:17:03.587
> 
> 标签：actionscript-3, flash, urlloader

我正在创建一个 RSS Ticker 以在办公室的一堆显示器上使用。这个 RSS Ticker 将与一个 Twiter Feed 阅读器、一个天气小部件和一个时钟一起运行，所有这些都在同一个 .fla 中。

由于这些显示器有很多，我不希望每个显示器都上网获取 rss、twitter 和天气数据。所有这些数据都包含在许多从 Internet 下载的简单 XML 文件中。

我创建了一个在我们的服务器上运行的 Windows 服务。该服务可以完成所有工作，例如查看更新并将新数据文件下载到我们网络上的共享位置。然后，我让所有显示器上的闪存仪表板从网络副本中获取信息。这样，数据只下载一次，其他一切都只访问这个本地缓存。

一切正常，但 RSS 自动收录器会随机停止工作。我没有任何方法可以远程访问这些显示器来检查它们的错误日志，但是当我拔下以太网电缆时，我在本地测试环境中遇到了完全相同的问题。仪表板尝试访问网络 RSS 副本，失败，然后随着计时器的每个滴答声继续失败，即使在重新建立连接之后也是如此。

我希望能够优雅地等待断开连接，然后在显示器重新连接后重新启动 RSS 自动收报机。我不知道该怎么做。以下是我的RSS相关代码：

```
// used to load a local xml file (stored in the same folder as the dashboard) that tells 
// the dashboards which RSS feeds can be found on the network, and where they are located. 
// It also contains the limits for how long each feed should be shown (both a time limit, 
// and a maximimum number of feed items)

var rssListXMLLoader:URLLoader = new URLLoader();
rssListXMLLoader.addEventListener(Event.COMPLETE, rssListXMLLoaded); 
rssListXMLLoader.addEventListener(IOErrorEvent.IO_ERROR, ioRSSListXMLLoaderErrorHandler);

// used to load the individual RRS feeds 

var rssFeedXMLLoader:URLLoader = new URLLoader();
rssFeedXMLLoader.addEventListener(Event.COMPLETE, rssFeedXMLLoaded); 
rssFeedXMLLoader.addEventListener(IOErrorEvent.IO_ERROR, ioRSSFeedXMLLoaderErrorHandler);

// rssListXMLData:XML and rssFeedXMLData:XML are used to store the XML data that is returned
// by the above loaders.

var rssListXMLData:XML = new XML(); 
var rssFeedXMLData:XML = new XML();

var currentRSSIndex:int = 2^10;
var currentFeedIndex:int = 2^10;
var currentLimit_Feeds:int = 2^10;
var currentLimit_Minutes:int = 2^10;
var limitStartTime:Number = new Date().time;
var gettingNewFeed = false;

// the blow Timer is used to keep the ticker moving. Each tick, it checks to see of the
// current RSS on sceen is has any text left. If it does, it removes the first letter
// causing the string to appear as if it is scrolling from right to left. If it has no
// more text, it gets the next feed.

var rssTickerTMR:Timer = new Timer(100, 0);
rssTickerTMR.addEventListener(TimerEvent.TIMER, updateRSSTicker);
rssTickerTMR.start();

updateRSSTicker();

function updateRSSTicker(e:Event = null):void
{
    if(ins_rssContent.text.length == 0)
    {
        if(!gettingNewFeed)
        {
            gettingNewFeed = true;
            getNewFeed();
        }
    }
    else
    {
        ins_rssContent.text = ins_rssContent.text.substring(1);
    }
}

// the below function checks to see if the RSS List is loaded. If it isn't it loads it,
// if it is already loaded, it calls the rssListXMLLoaded. This way, rssListXMLLoaded is
// never called unless the RSS List is already loaded.

function getNewFeed():void
{
    if (rssListXMLData == "")
    {
        trace("Loading RSS List XML");
        rssListXMLLoader.load(new URLRequest("rssFeeds.xml"));
    }
    else
    {
        rssListXMLLoaded();
    }
}

// the below function manages which feed needs to be used from the list.

function rssListXMLLoaded(e:Event = null):void
{
    if (e != null)
    {
        rssListXMLData = new XML(e.target.data);
    }

    currentFeedIndex++;

    if (
            currentFeedIndex >= rssFeedXMLData.channel["item"].length() || 
            currentFeedIndex >= currentLimit_Feeds || 
            new Date().time - limitStartTime >= (currentLimit_Minutes * 1000 * 60)
    )
    {
        limitStartTime = new Date().time;
        currentFeedIndex = 0;
        currentRSSIndex++;      
        currentRSSIndex = (currentRSSIndex >= rssListXML.children().length()) ? 0 : currentRSSIndex;        
        currentLimit_Feeds = Number(rssListXMLData.RSSFeed[currentRSSIndex].@limitFeeds)
        currentLimit_Minutes = Number(rssListXMLData.RSSFeed[currentRSSIndex].@limitMinutes)
    }
    try
    {
        rssFeedXMLLoader.load(new URLRequest(rssListXMLData.RSSFeed[currentRSSIndex])); 
    }
    catch(e:Error)
    {
        trace("whoops, try again");
    }
}

// the below function sets the text on the dashboard, and sets gettingNewfeed to false. This allows the
// rssTickerTMR:Timer to start removing the first letter of the newly added feed, causing the text to "scroll"

function rssFeedXMLLoaded(e:Event):void
{
    rssFeedXMLData = new XML(e.target.data);

    if (rssFeedXMLData.channel["item"].length() > 0)
    {
        var dateString:String = rssFeedXMLData.channel["item"][currentFeedIndex].pubDate;
        var date:Date = new Date(Date.parse(dateString.replace(" Z","")));

        if (date.toString() != "Invalid Date")
        {
            dateString = " @ " + FormatDate(date) + " " + FormatTime(date);
        }
        else
        {
            dateString = " @ " + dateString;
        }

        ins_rssTitle.text = rssFeedXMLData.channel.title + dateString;

        ins_rssContent.text = "                                                                        " 
                            + cleanDescription(rssFeedXMLData.channel["item"][currentFeedIndex].title) + "   - "
                            + cleanDescription(rssFeedXMLData.channel["item"][currentFeedIndex].description);

        gettingNewFeed = false;
    }
    else
    {
        ins_rssContent.text = "";
        gettingNewFeed = false;
    }
}

// removes the things from the RSS content that I don't want.

function cleanDescription(p_string:String):String 
{
    if (p_string == null) 
    { 
        return ''; 
    }

    var str:String = p_string.replace(/<\/?[^>]+>/igm, ''); //remove html tags.
    str = str.split("\r").join(". "); //replace line breaks with '. '
    str = str.replace("\t"," "); //replace tabs with a single space.
    str = str.replace(/(?:\.\s){2,}/g,". "); //replace multiple '. ' with a single one.
    str = str.replace(/((https?|ftp|gopher|telnet|file|notes|ms-help):
                          ((\/\/)|(\\\\))+[\w\d:#@%\/;$()~_?\+-=\\\.&]*)/igm, ' '); //replaces URL text with a single space
    str = str.replace(/#[\w]{3,}/igm,' ') //replaces hash tags with a single space
    str = str.replace(/\s{2,}/igm," "); //replace multiple spaces with a single space

    return str;
}

function ioRSSListXMLLoaderErrorHandler(e:Event):void
{
    trace("ioRSSListXMLLoaderErrorHandler:");
    trace(e.toString());

}

// the idea below is that it sets the text to "" and sets gettingNewFeed to false, which should get the
// rssTickerTMR:Timer to try to get a band new feed. Theoretically, it should try and fail over and again
// until the network is once again accessible. This doesn't work at all.

function ioRSSFeedXMLLoaderErrorHandler(e:Event):void
{
    trace("ioRSSFeedXMLLoaderErrorHandler:");
    trace(e.toString());

    ins_rssContent.text = "";
    gettingNewFeed = false;
} 
```

有谁知道更好的方法来解决这个问题？我将不胜感激你们能提供的任何帮助。谢谢！

编辑！！！

正如 Will 所建议的，我尝试创建一个基于计时器的网络监控子系统。在我的 RSS Ticker 的 IO_ERROR 处理程序中，我停止了 RSS 计时器，并启动了网络监控计时器。每 10 秒，它会尝试从服务器下载一个文件。它继续这样做直到它工作，此时它关闭自己的计时器，重新启动 RSS 计时器。

理论上应该有效。不仅如此，如果我将其更改为下载网站而不是网络文件，它确实有效。使用网络文件时，一旦失败，即使重新建立连接，也会一直失败。这是我的代码：

```
...

function ioRSSFeedXMLLoaderErrorHandler(e:Event):void
{
    rssTickerTMR.stop();
    networkMonitorTMR.start();

    trace("ioRSSFeedXMLLoaderErrorHandler:");
    trace(e.toString());

    ins_rssTitle.text = "Waiting for connection...";
    ins_rssContent.text = "";

}

// netowrk monitor
var networkMonitorXMLLoader:URLLoader = new URLLoader();
networkMonitorXMLLoader.addEventListener(Event.COMPLETE, networkMonitorXMLLLoaded); 
networkMonitorXMLLoader.addEventListener(IOErrorEvent.IO_ERROR, networkMonitorXMLLoaderErrorHandler);

var networkMonitorTMR:Timer = new Timer(10000,0);
networkMonitorTMR.addEventListener(TimerEvent.TIMER, checkNetwork);

function checkNetwork(e:Event = null):void
{
    networkMonitorXMLLoader.load(new URLRequest("//server/share/file.xml")); 
}

function networkMonitorXMLLoaderErrorHandler(e:Event = null) :void
{
    trace("Still Off");
}

function networkMonitorXMLLLoaded(e:Event = null) :void
{
    trace("Back On");
    rssTickerTMR.start();
    networkMonitorTMR.stop();
} 
```

就像我说的，如果我将“//server/shar/file.xml”切换到[http://www.google.ca](http://www.google.ca)，它就可以工作。当我拔下以太网时，网络监视器启动，当我将其重新插入时，它切换回 RSS ......但是使用我的网络资源，它只是继续失败......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:29:38.307

处理此类问题的一般模式是触发一个超时方法，该方法会不断检查连接，直到重新建立连接。理想情况下，您会在后台执行此操作，这样用户就不会注意到。在您的情况下，如果连接失败（IO_ERROR），请将计时器设置为在定义的时间后重试下载 xml 文件的方法。如果失败，请重新设置。同时，您可以从头开始再次显示您当前的项目，并在下载新提要后更新它们。

# jquery - 使用超时功能禁用按钮使用

> ID：12203045
> 
> 赞同：1
> 
> 时间：2012-08-30T18:17:08.597
> 
> 标签：jquery

我对 jQuery 有疑问。

我有这么小的功能

```
setTimeout(player_attack,500);
setTimeout(mob_attack,700); 
```

这是由按钮触发的。但有一个问题。用户可以快速单击它，这一切都搞砸了。所以我想暂时禁用按钮。

但是这个：

```
$('#button_name').attr("disabled","disabled"); 
```

但它有效。

但是当我说：

```
$('#button_name').removeAttr("disabled","disabled"); 
```

它不再起作用了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:21:09.910

尝试这个

```
$('#button_name').removeAttr("disabled"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:18:39.860

更容易使用的[`prop`](http://api.jquery.com/prop/)方法：

```
$("#button_name").prop("disabled", false); // or true to make it disabled 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:17:56.600

只需使用：

```
$("#selector").attr("disabled", true); // or false 
```

看到[这个](http://jsfiddle.net/rWY2e/)小提琴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:24:18.863

jQuery 文档建议使用该`.prop()`方法而不是`.attr()`更改 disabled 属性。（有关更多详细信息，请参见[此处](http://api.jquery.com/prop/)。）

```
$('#button_name').prop("disabled", true); //or false 
```

# php - Cakephp 重定向一个没有引用的链接

> ID：12203047
> 
> 赞同：0
> 
> 时间：2012-08-30T18:17:15.243
> 
> 标签：php, cakephp, redirect, cakephp-2.0, before-filter

我有一个提交页面，它是一个 ajax 弹出窗口。如果用户没有登录，它会为他们弹出一个模式登录/注册对话框。登录后，他们将被定向到主页，因为它不记得引用是什么（因为所有这些都是作为登录页面触发的，而不是实际的提交页面）。

我正在考虑可能在会话中保存该重定向 url，这样当他们成功登录时，我可以将它们重定向到我`beforeFilter()`或其他东西中的适当页面......

我在想这样的事情（伪）：

```
public function submit() {
    if (!$this->Auth->login()) {
        $this->Session->set('Auth.redirect', '/submit');
    }
} 
```

然后在我的 beforeFilter 中检查他们登录时是否存在，如果存在，删除 Session 并将它们重定向到该 url？

有没有更好的方法来处理这个问题还是我的合法？

我的前置过滤器：

```
public function beforeFilter() {
    $this->Auth->loginRedirect = array('controller' => '', 'action' => 'login');

    $this->Auth->allow(
            'Search',
            'loginSignUpPrompt'
            );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:06:54.573

实际上 Auth 组件已经内置了这个功能。

```
public function login() {
  if ($this->request->is('post')) {
    if ($this->Auth->login()) {
      return $this->redirect($this->Auth->redirect());
    } else {
      $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
    }
  }
} 
```

此方法的默认值是用户来自的页面。但是，如果您愿意，可以在 Auth 设置中覆盖它。

请参阅[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)关于“识别用户并登录”的部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:41:11.810

您可以使用`$this->redirect($this->referer());`，除非用户必须输入某种表单数据（例如在您的登录示例中）。当我遇到这样的实例时，我几乎会做你正在做的事情并将以前的 URL 存储在会话变量中，然后在我将它们重定向回原始 URL 时销毁该变量。您可能有兴趣在[此处](http://book.cakephp.org/2.0/en/controllers/components.html)使用 beforeRedirect() 回调组件。

# git - git合并从头到本地的变化

> ID：12203048
> 
> 赞同：0
> 
> 时间：2012-08-30T18:17:19.067
> 
> 标签：git

我很新，需要一些帮助。如果我的问题微不足道或愚蠢，我深表歉意。

无论如何，我从远程分支同步，进行了一些更改，签入了一些，但其他一些我从未上演（因为我不希望他们签入）。

现在我需要同步到该远程存储库，但不会丢失本地未跟踪的更改。理想情况下，如果 git 允许我在有任何冲突时审查更改，那就太好了。

无论如何，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:53:16.333

您可以使用[stash](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)命令备份未跟踪文件中的更改，例如

```
git stash --include-untracked 
```

上面的文档链接提供了一个名为*Pulling into a dirty tree*的示例，它可能与您的情况相似（或相同）。如果在您尝试应用隐藏的更改时出现合并冲突，git 会告诉您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:54:08.107

这就是为什么你应该总是使用分支。无论如何，你可以`git stash save`你的工作，然后`git commit`和`git push`。之后，您可以`git stash apply`恢复其他更改。

# objective-c - 在 XIB 中设置 UITapGestureRecognizer

> ID：12203056
> 
> 赞同：0
> 
> 时间：2012-08-30T18:17:44.843
> 
> 标签：objective-c, xcode, ios5

我正在开发一个应用程序，我希望用户能够在其中点击图像并触发另一种方法（已经编写和测试；它有效），但我对我需要做些什么感到非常困惑工作。我已经使用 XIB 来设置 UIImageView（我知道我需要将 UITapGestureRecognizer 拖到 UIImageView 上，并且我知道我需要使用 viewDidLoad 中的目标和操作来分配和启动它），但我不知道是什么之后连接到 XIB 中的内容，或者要编写的属性/方法。（UITapGesture 识别器的状态无关紧要——无论是 UIGestureRecognizerStateBegan 还是 UIGestureRecognizerStateEnded，它都应该做同样的事情。）

我的下一步是什么？

像往常一样，非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:51:19.513

另一种选择是将图像作为按钮的背景并使用连接 IBOutlet 进行“修饰”。这是关于如何连接插座的众多教程之一。[http://www.servin.com/iphone/iPhone-Buttons.html](http://www.servin.com/iphone/iPhone-Buttons.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:22:12.017

我个人喜欢用代码设置这些，所以这里有一个例子。首先，在您的头文件中，您将要创建一个`IBOutlet`for`UIImageView`然后将插座链接到界面构建器中的图像视图。

```
IBOutlet UIImageView *imageView; 
```

然后在`viewDidLoad`（或您真正想要的任何地方），您可以设置识别器并将其添加到图像视图中。

**重要提示：**确保在图像视图上启用用户交互，否则这将不起作用！

```
[imageView setUserInteractionEnabled:YES];    
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myMethodToCall)];
[tap setNumberOfTapsRequired:1];
[tap setNumberOfTouchesRequired:1];
[imageView addGestureRecognizer:tap]; 
```

希望这可以帮助！

# php - 使用 php 和 mysqli 更新复选框

> ID：12203062
> 
> 赞同：1
> 
> 时间：2012-08-30T18:17:57.020
> 
> 标签：php, database, mysqli

目标：允许用户从可用的复选框列表中选择项目，并附上 id 更新数据库。在 $_POST 之后，检查所选项目。

问题：提交表单后，会返回之前的一组复选框，而不是当前的。如果再次提交表单而不更改任何内容，则新的复选框集现在可用。基本上，新值只会在提交 btn 被按下两次后才会显示。

代码：查询数据库以使用复选框填充表单的函数...

```
function chCheck($conn){
$sql = "Select CHEESE, ID, OnMenu from CheeseSelections";
$result=$conn->query($sql);
    while($row=$result->fetch_assoc())
        {   
            if ($row['OnMenu']==="True"){
                $str =  "<input type='checkbox' name='chList[]' value='".$row['ID']."' id='".$row['CHEESE']."' checked/>";
                $str .= "<label for ='".$row['CHEESE']."'>".$row['CHEESE']."</label>";
                $str .= " <a href=\"#\">view/edit item</a><br />";  
                echo $str;
                }
            elseif ($row['OnMenu']==="False"){
                $str =  "<input type='checkbox' name='chList[]' value='".$row['ID']."' id='".$row['CHEESE'];
                $str .= "/> <label for ='".$row['CHEESE']."'>".$row['CHEESE']."</label>";
                $str .= " <a href=\"#\">view/edit item</a><br />";  
                echo $str;
                }
        } 
```

}

HTML

```
 <form name="chCheck" method="post" action="">
        <?php chCheck($conn); ?>
        <input type="submit" name="update" value="Update Selections"></br>  
    </form> 
```

$_POST

```
if ($_POST) 
    {
        $ids = $_POST['chList'];

                $sql = "UPDATE CheeseSelections SET CheeseSelections.OnMenu = \"False\";";
        foreach($ids as $items){        
                $sql .= "UPDATE CheeseSelections SET CheeseSelections.OnMenu = \"True\" WHERE CheeseSelections.ID IN (".$items."); ";
                    }       
        //echo $sql;

        mysqli_multi_query($conn, $sql);
        mysqli_query($conn, $sql);
        printf("Affected rows (UPDATE): %d\n", $conn->affected_rows);

        printf("Error Code: %d\n", $conn->errno);
    } 
```

逻辑：提交时，“OnMenu”整列设置为“False”。然后将 $_POST 中收集的 ID 设置为“True”。这将取消设置然后重置列。这个逻辑合理吗？我应该做些什么不同的事情？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:47:57.530

有几件事我会做不同的事情。首先，作为最佳实践，当唯一的区别是选中状态时，避免重复输入框。目前，如果您决定进行更改，则必须在两个地方进行更改。

```
function chCheck($conn)
{
    $sql = "Select CHEESE, ID, OnMenu from CheeseSelections";
    $result=$conn->query($sql);
    while($row=$result->fetch_assoc())
    {   
        $selected = ($row['OnMenu'] === "True" ? ' checked="checked"' : '');
        echo '<input type="checkbox" name="chList[]" value="'.$row['ID'].'" id="'.$row['CHEESE'].'"'.$selected.' /><label for="'.$row['CHEESE'].'">'.htmlentities($row['CHEESE']).'</label> <a href="#">view/edit item</a><br />';               
    }
} 
```

其次，HTML 复选框在未选中时不会像单选按钮那样发布值。在 POST 上，我会首先清除所有值（将所有数据库值设置为 False），然后遍历发布的值，将它们放入数组中，然后调用单个查询将它们设置为 True。

```
$item_ids = array();
foreach ($ids as $item)
    $item_ids[] = intval($item);  // to prevent $_POST data type tampering

$sql .= "UPDATE CheeseSelections SET CheeseSelections.OnMenu = 'True' WHERE CheeseSelections.ID IN (".implode(",",$item_ids)."); "; 
```

确保您的 $_POST 处理代码也位于函数调用上方的脚本顶部。这可能是您所看到的行为的原因。

我也会避免将布尔值存储为文本，因此我会使用 TinyInt(1) 数据类型并将其设置为 0 或 1，而不是使用文本值“True”和“False”。它只是更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:29:08.093

你的程序逻辑有问题。

您正在为表单生成 HTML，然后在最后运行 SQL 更新。当用户单击提交并创建下一页时，数据库查询返回他们现有的选择，并相应地生成 HTML。最后，处理 $_POST 并更新数据库 - 因此在页面生成之前它不会更新。

尝试将您的整个`$_POST`if 语句移动到您的调用之前`chCheck()`

# c# - C# 容器：行、索引

> ID：12203069
> 
> 赞同：1
> 
> 时间：2012-08-30T18:18:26.363
> 
> 标签：c#, indexing, row, containers

我需要像这样创建容器： Container.Add(RowIndex, ValueIndex);

我知道字典只有键和值，这对我不利。而且我不知道如何使用 2 个容器来创建行，索引我想要的方式。

所以例子：

```
Container[Row][Index]:
Container[0][0] = "Apple";
Container[0][1] = "Orange";
Container[1][0] = "Number"; 
```

因为我尝试使用这个容器来读取 sql。当我得到下一个结果时，它添加到当前行值 +1。和索引平均字段值。

在代码中：

```
 int row = 0;

                while (ObjReader.Read())
                {
                    foreach (var result in ObjReader)
                        ReadList.Add(row, result.ToString());

                    row++;
                }

                ObjReader.NextResult(); 
```

这是为了阅读

现在得到另一个类的结果

```
 public string Field(int row, int index)
    {
        return ReadList[row][index];
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:23:31.517

看来您正在寻找 a `List`of `List`s。

```
List<List<string>> results = new List<List<string>>();

while (haveMoreRows)
{
    List<string> nextRow = new List<string>();
    foreach (var item in currentRow)
        nextRow.Add(item.ToString());

    results.Add(nextRow);
} 
```

现在您可以执行以下操作：`results[2][1]`获取第 2 列中第 3 行的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:43:21.273

使用一个简单的对类：

```
public class Pair<P, T>
{
    public Pair() { }
    public Pair(P first, T second)
    {
        First = first;
        Second = second;
    }
    public P First { get; set; }
    public T Second { get; set; }
} 
```

使用：

```
List<Pair<int, string>> ReadList = new List<Pair<int, string>>();
while (ObjReader.Read())
{
    foreach (var result in ObjReader)
        ReadList.Add(new Pair<int, string> {
            First = row, 
            Second = result.ToString()
        });

    row++;
}

ObjReader.NextResult(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:23:25.280

尝试`iterator`和`type anonymous`

迭代器使用关键字yield

```
foreach (var result in ObjReader)
{
        yield return result.ToString();
} 
```

你将拥有 IEnumerable

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:52:12.453

Sounds like what you really want is a [DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx). It's a collection of rows and columns specifically designed to represent a database table.

# android - 为 PreferenceActivity 定义的布局和样式在哪里？

> ID：12203072
> 
> 赞同：3
> 
> 时间：2012-08-30T18:18:31.577
> 
> 标签：android, styles, android-view, android-styles

为 ?定义的布局在哪里（最好在在线可浏览的源存储库中）[`PreferenceActivity`](http://developer.android.com/reference/android/preference/PreferenceActivity.html)？我想复制不同样式的标题等。

我看到其中`android.preference.PreferenceActivity`有对 的引用`com.android.internal.R.layout.preference_list_content`，但我没有在通过 SDK 下载的源代码中 看到`R`目录 。`[android-sdk]\sources\android-15\com\android\internal`

我假设其他 Android 布局在源代码树中就在附近。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T18:26:06.000

假设您想要最新版本的 Android，PreferenceActivity 本身可以在[这里](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/preference/PreferenceActivity.java)找到。你可以从那里看到使用的布局是`R.layout.preference_list_content`，可以在[这里](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/layout/preference_list_content.xml)找到。

如果您使用 Chrome，[此扩展程序](https://chrome.google.com/webstore/detail/hgcbffeicehlpmgmnhnkjbjoldkfhoin)将对您有很大帮助，因为它将在开发人员文档中的每个课程页面旁边应用“查看源代码”链接。

如果您正在寻找早期 Android 版本的版本，您可能还会发现[Github Mirror很有帮助。](https://github.com/android/platform_frameworks_base)我发现 Github 界面更容易追溯到以前的分支和标签。

# php - PHP - 作为对象的关联数组

> ID：12203074
> 
> 赞同：22
> 
> 时间：2012-08-30T18:18:37.540
> 
> 标签：php, class, object, yaml, associative-array

> **可能重复：**
> [将数组转换为对象 PHP](https://stackoverflow.com/questions/1869091/convert-array-to-object-php)

我正在创建一个简单的 PHP 应用程序，我想使用[YAML](http://en.wikipedia.org/wiki/YAML)文件作为数据存储。我将数据作为关联数组获取，例如以下结构：

```
$user = array('username' => 'martin', 'md5password' => '5d41402abc4b2a76b9719d911017c592') 
```

但是，我想用一些函数扩展关联数组并使用`->`运算符，所以我可以写这样的东西：

```
$user->username = 'martin';  // sets $user['username']
$user->setPassword('hello'); // writes md5 of 'hello' to $user['md5password']
$user->save();               // saves the data back to the file 
```

在没有类定义的情况下，有没有一种好方法可以做到这一点？

基本上，我想在 PHP 中有 JavaScript 样式的对象 :)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-30T18:25:26.000

只需投射它：

```
$user = (object)$user; 
```

当然，还有其他更灵活的解决方案，例如创建一个实现的类[`ArrayAccess`](http://php.net/manual/en/class.arrayaccess.php)：

```
$user = new User(); // implements ArrayAccess

echo $user['name'];
// could be the same as...
echo $user->name; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T18:24:27.020

从字面上看，只需制作一个`$class = new stdClass;`并迭代和重新分配。请注意，这只是一层深度，就像类型转换一样。您必须编写一个递归迭代器才能得到它。据我所知，Kohana 2/3 有 to_object() 你可能可以使用。

找到了：

```
class Arr extends Kohana_Arr {

    public static function to_object(array $array, $class = 'stdClass')
    {
            $object = new $class;
            foreach ($array as $key => $value)
            {
                    if (is_array($value))
                    {
                    // Convert the array to an object
                            $value = arr::to_object($value, $class);
                    }
                    // Add the value to the object
                    $object->{$key} = $value;
            }
            return $object;
    } 
```

# android - 级别 < 11 的 styles.xml 中的 Theme.Holo 会导致 Eclipse ADT 中的验证错误

> ID：12203075
> 
> 赞同：0
> 
> 时间：2012-08-30T18:18:37.813
> 
> 标签：android, eclipse-adt

我尝试使用[此处找到的](https://stackoverflow.com/a/10736746/80901)[替代资源](http://developer.android.com/guide/topics/resources/providing-resources.html)/主题选择器解决方案在新设备上切换到 Holo 主题。该项目使用 Android 2.1 作为项目构建目标。

但是，如果我将此 XML 放入 res/values-v11/styles.xml

```
<resources>
    <style name="AppTheme" parent="@android:style/Theme.Holo" />
</resources> 
```

Eclipse 指示错误：

> 检索项目的父项时出错：找不到与给定名称“@android:style/Theme.Holo”匹配的资源。样式.xml /MyApp/res/values-v11

清单设置这些 SDK 值：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

**如果我将项目构建目标**设置为 Android 3.0，我只能编译这个项目，但它不会在旧设备上运行。

所以这个样式选择器解决方法不能与 Eclipse ADT 一起使用。这是 Eclipse ADT 中的错误，ADT 不应该忽略 v11 styles.xml 吗？

* * *

更新：我可以使用一种解决方法并将文件内容设置为

```
<resources>
    <style name="AppTheme" parent="@android:style/Theme" />
</resources> 
```

激活默认主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:31:16.523

如果您设置`android:minSdkVersion`为较低的 API，您可以在 Android 3.0< 上运行该应用程序。所以只需将目标设置为 API 级别 11+，但将最小 SDK 设置为 10<。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:32:26.400

将目标设置为 3.0 不会限制它不能在旧设备上运行。那将是 minSDKVersion。将目标设置为 11+ 仅允许您访问仅在 11+ 中的功能。您只需要注意不要在使用 API 级别 11+ 的代码中使用任何功能。一种可能的解决方案是查看 inot HoloEverywhere，它为您提供 API <11 的 Holo 主题以及 ActionBar Sherlock 的 ActionBAr 内容，远远超过兼容性库。

# php - 从数据库中选择值并存储到临时变量中

> ID：12203080
> 
> 赞同：-6
> 
> 时间：2012-08-30T18:18:51.340
> 
> 标签：php, mysql

我想从数据库中选择一个存储值，然后将其放入一个临时变量中。

例如，我有一个名为 的列`category`，它下面的一个值是`m`，所以我想`m`从数据库中选择这个值，比如说从一个名为 的数据库的表中选择`user_info`。

然后我想把它放入一个变量中，我们命名它`$res`。

在那之后，我想做一些条件的东西，比如`if $res=="m"`，

谁能帮我在这里写一个简单的结构？

这是代码：

```
<?php   
$sql = "Select category FROM user_info WHERE user_name = '"
       .$_SESSION['username']."' and password = '".$_SESSION['password']."'";
$res = mysql_query($sql);

if($res == "a"){
  include('MPIncomeStrategy.php');
}

if($res == "b"){
  include('MPIncomeStrategy.php');
} 
```

但似乎代码无法检测到`$res =="category value in database"`。我只是使用错误的方式存储类别值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:35:55.377

首先，它可能无助于回答您的问题，但您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://www.deprecatedphp.com/mysql_/)。

其次，看一下使用`mysql_*`函数的文档。在您的代码中，`$res`是资源，而不是值数组。为了从中提取数据，`$res`您必须调用`mysql_fetch_array()`or `mysql_fetch_assoc()`，这两者都将返回一个数组（`mysql_fetch_array()`返回编号索引和关联索引的组合；`mysql_fetch_assoc()`仅返回一个关联数组）。

一旦你有了数组，你就可以访问索引。

像这样：

```
$res = mysql_query($sql);

if /* or while */ ($row = mysql_fetch_assoc($res)) {
    $category = $row['category'];

    if ($category == "m") { ... }
} 
```

# javascript - 如何将“焦点”设置回 contenteditable div

> ID：12203086
> 
> 赞同：5
> 
> 时间：2012-08-30T18:19:27.557
> 
> 标签：javascript, windows-8

在 Windows 8（IE10 引擎）中工作。无需与其他浏览器兼容。我有一个内容可编辑的 div，其中包含文本。用户单击页面上的另一个元素，我想将一些 HTML 粘贴到用户光标所在的 div 中，然后将焦点返回到 div。我可以粘贴到 div 中，但是用户无法继续输入，我也找不到返回焦点的方法。任何人？

这是单击其他元素时我正在运行的JavaScript...

```
var sel = document.selection.createRange();
sel.pasteHTML(span.outerHTML); 
```

（我确实发现了类似的问题，但没有一个适用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:23:02.370

只需使用`elem.focus();`. 它应该正常工作。要将光标移动到正确的位置，请使用`setSelectionRange`。

# asp.net-mvc - 字符串中的 Razor 变量未正确呈现

> ID：12203087
> 
> 赞同：2
> 
> 时间：2012-08-30T18:19:32.167
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

```
@using (Html.BeginForm())
{
    int controlWidth=250;
    @Html.TextBoxFor(m => m.studentFirstName, new { style = "width:@(controlWidth)px;" }) 
```

此代码呈现为

```
 <input data-val="true" data-val-required="The Student First Name field is required." id="studentFirstName" name="studentFirstName" style="width:@(controlWidth)px;" type="text" value="" /> 
```

可以理解，我希望它呈现为

```
 <input data-val="true" data-val-required="The Student First Name field is required." id="studentFirstName" name="studentFirstName" style="width:250px;" type="text" value="" /> 
```

我看过像[ASP.NET MVC Razor Concatenation](https://stackoverflow.com/questions/4702957/asp-net-mvc3-razor-concatenation)这样的帖子表明这种方法是正确的。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:38:29.617

我不认为你能做到这一点。内联模板只能在 HTML 中使用，`<li style="@(controlWidth)">`或者如果您的方法支持内联模板。有关如何编写支持内联模板的方法，请参阅 [http://vibrantcode.com/blog/2010/8/2/inside-razor-part-3-templates.html/ 。](http://vibrantcode.com/blog/2010/8/2/inside-razor-part-3-templates.html/)

# c++ - 使用 socket.io 将应用程序连接到节点服务器

> ID：12203091
> 
> 赞同：1
> 
> 时间：2012-08-30T18:20:02.670
> 
> 标签：c++, node.js, express, socket.io

我正在尝试将客户端应用程序（用 c++ 编写，尽管这不应该有任何影响）连接到使用 express 和 socket.io 编写的 node.js 服务器。

服务器几乎可以归结为：

```
var express = require('express');
var http = require('http')

var app = express();
var server = http.createServer(app)
var io = require('socket.io').listen(server);

app.use(express.cookieParser());
app.use(express.session({
  ...
}));
app.use(app.router);

// response handling -------
app.get('/', function(req, res){
  console.log('request get /');
});

io.sockets.on('connection', function(socket) {
  console.log('sockets.io connection!');
});
// -------

port = 3000
app.listen(port);
console.log('Listening on port: ' + port); 
```

当我启动这个节点时，我尝试了两件事：

1.  我尝试连接浏览器。从某种意义上说，它会触发 apt.get('/' ...)，但它不会触发 io.sockets.on('connection' ...)，这是出乎意料的，让我怀疑我我误解了一些东西。
2.  我启动我的 c++ 应用程序并在 tcp 套接字上调用 connect。套接字连接并让我发送数据，但我从来没有得到任何迹象表明节点端发生了某些事情（而且我从来没有得到任何数据）。io.sockets.on('connection' ...) 永远不会被触发，并且不会出现有关格式错误的消息的错误。

所以我的问题是：我是否误解了 sockets.io 的设置或功能？如何将我的应用程序连接到此节点服务器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:33:51.503

首先，您是否在客户端包含特定于模块的 socket.io 库？您是否连接到正确的套接字/端点？

```
io.connect('http://localhost'); 
```

* * *

对于本机应用程序，您可以尝试使用已经实现[的 Socket.IO-modules for C++](https://github.com/uning/socket.io-client-cpp)。

后者使用Boost。

* * *

如果我理解错了，请通过在新的连接试验上转储内部状态来发布一些调试信息。

# php - django orm层

> ID：12203093
> 
> 赞同：0
> 
> 时间：2012-08-30T18:20:03.930
> 
> 标签：php, sql, django, django-orm

我有两张桌子，`subscriptions`和`user_subscription`。我希望能够从该`name`字段中搜索`subscription`用户尚未订阅的任何内容。我按如下方式编写了一个 sql 查询：

```
select e.*
from subscription e, user_subscription u
where e.id != u.sub_id and u.user_id = 7 and e.name like '%mic%'
order by name limit 0,50 
```

我的问题是，有没有办法使用 django orm 框架来做这个查询？我能够`subscription`正确搜索表，问题是当用户已经订阅时，我不希望显示这些结果。in的`sub_id`字段`user_subscription`是映射到`subsciption`id 的外键关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:22:38.940

是的 - 查看[Manager.raw](https://docs.djangoproject.com/en/dev/topics/db/sql/#django.db.models.Manager.raw)方法，它可以让您运行原始 SQL 查询。您想`Subscription.objects.raw(...)`用于您的查询。

# ruby-on-rails - 在 Rails 中并行执行多个 Web 服务调用

> ID：12203096
> 
> 赞同：1
> 
> 时间：2012-08-30T18:20:07.443
> 
> 标签：ruby-on-rails, rest, parallel-processing

我的 rails 应用程序使用 Koala 连接到 Facebook。

我正在使用批处理调用来加快速度，并且我想并行进行多个调用以使其更快。

**在rails中并行进行多个调用的正确方法是什么？**

*   在rails中使用线程是否安全？如何？

*   我看到了一些使用 Typhoeus 的代码，但如果我要使用它，我需要自己对 facebook 进行 http 调用，而不是使用 Koala。

*   有任何示例代码/指南吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:42:45.937

在rails中使用线程很好。您需要确保您使用的库是线程安全的！

如果您不需要实时数据，我宁愿使用 resque 或 sidekick 之类的队列。如果你想做很多线程，那么你可能会更好地使用赛璐珞之类的东西：[https ://github.com/celluloid/celluloid/wiki/Basic-usage](https://github.com/celluloid/celluloid/wiki/Basic-usage)

# c# - 为什么 Visual Studio 2010 在未连接到 Internet 时重建速度较慢？

> ID：12203106
> 
> 赞同：2
> 
> 时间：2012-08-30T18:21:12.610
> 
> 标签：c#, visual-studio-2010, xna, html-agility-pack, nuget

起初我以为我疯了，但由于我的互联网经常中断，我可以通过以下事实来判断，即每当我失去与互联网的连接时，VS10 需要更长的时间来重建我的项目。出于显而易见的原因，除了我的浏览器之外，我的其他应用程序似乎都没有受到影响。

要自己进行测试，只需在更改某些代码行后`ipconfig /release`尝试重新构建*重新调试*项目，然后`ipconfig /renew`进行更改并*重新构建并重新重新*调试它。

如果相关的话，我正在使用 XNA。据我所知，我的代码没有明确尝试连接到网络，除非`nuget`并且`HTMLAgilityPack`需要在重建时连接到网络。

编辑：更改为在重建后重新启动调试器，而不仅仅是重建。我只能在一个新`XNA Windows Game`项目上重现这个，而不是 C# 控制台应用程序。添加`HTMLAgilityPack`似乎对项目的启动时间没有任何影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:35:40.810

代码签名试图找到 Verisign（等）的服务器？

# c# - 使 EventBox 透明的 Gtk# 示例

> ID：12203107
> 
> 赞同：2
> 
> 时间：2012-08-30T17:49:25.943
> 
> 标签：c#, mono, gtk, transparency, cairo

我需要在常规 Gtk# 窗口内创建一个透明度放置在另一个图像之上的图像。第一个图像应该能够响应鼠标点击。

简单的方法通常是将 Image 放入 EventBox - 和窗口内。但是，EventBox 默认情况下是不透明的，因此即使 png 图像本身具有透明区域，在 EventBox 内时，它也会在图像周围显示为方形不透明背景。

我知道 EventBox 可以使用**Cairo**变得透明，但到目前为止还不能做到这一点。

**任何人都可以提供一个简短的 C# 示例来使 EventBox 透明吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:07:13.037

回答我自己的问题...：

解决方案非常简单，而我正在寻找复杂的代码来重绘小部件......所需要做的就是将 EventBox.VisibleWindow 成员设置为“false”（默认情况下为“true”）。比不绘制事件框，如果事件框内的图像有透明区域，它们将显示下面的内容。

在下面的例子中，它是：
**mapBox.VisibleWindow = false;**
和
**pinBox.VisibleWindow = false;**

据我所见，Z-Order（哪个 Widget 在其上）由屏幕上的绘制顺序决定（当未绘制 EventBox 时，EventBox.GdkWindow.Lower() 或 Raised()成员没有做任何事情）。

例子：

```
// Showing a map in an invisible EventBox
EventBox mapBox = new EventBox();
mapBox.Visible = true;
mapBox.VisibleWindow = false;
fixed1.Add(mapBox);
fixed1.Move (mapBox, 0, 0);

Image mapImage = new Image("map.png");
mapImage.Visible = true;
mapBox.Add (mapImage);

// Showing a pin image with transparent areas, in an invisible EventBox, on top of the map
EventBox pinBox = new EventBox();
pinBox.Visible = true;
pinBox.VisibleWindow = false;
fixed1.Add(pinBox);
fixed1.Move (pinBox, 60, 60);

Image pinImage = new Image("redpin.png");
pinImage.Visible = true;
pinBox.Add (pinImage); 
```

# java-me - 如何使用蓝牙从 J2me 应用程序发送文件

> ID：12203110
> 
> 赞同：3
> 
> 时间：2012-08-30T18:21:22.150
> 
> 标签：java-me, bluetooth, file-transfer

我正在尝试将文件从 j2me 应用程序发送到附近范围内的所有可用蓝牙设备。

我已搜索并显示范围内的设备，但无法将文件发送到该设备。在连接响应时，我得到响应代码为 211。

我添加了我的代码：

```
private void SendingFile() {
    myForm.setTitle("Sending..");
    for (int k = 0; k < myForm.size(); k++) {
        myForm.delete(k);
    }
    myForm.append("Sending application..");
    display.setCurrent(myForm);
    try {
        RemoteDevice remotedevice = (RemoteDevice) myVector.elementAt(devList.getSelectedIndex());
        dAgent.searchServices(null, new UUID[]{new UUID(0x1105)}, remotedevice, this);
        return;
    } catch (BluetoothStateException bluetoothstateexception1) {
        myForm.append("could not open bluetooth: " + bluetoothstateexception1.toString());
    }
}

public void pauseApp() {
}

public void destroyApp(boolean flag) {
}

public void commandAction(Command command, Displayable displayable) {
    if (command == cmdScan) {
        if (myForm == null) {
            myForm = new Form("Scanning");
        } else {
            for (int i = 0; i < myForm.size(); i++) {
                myForm.delete(i);
            }
        }
        myForm.append("Scanning for bluetooth devices..");
        Display.getDisplay(this).setCurrent(myForm);
        if (devList == null) {
            devList = new List("Devices", 3);
            devList.addCommand(cmdSend);
            devList.setCommandListener(this);
        } else {
            for (int j = 0; j < devList.size(); j++) {
                devList.delete(j);
            }
        }
        if (myVector == null) {
            myVector = new Vector();
        } else {
            myVector.removeAllElements();
        }
        try {
            if (localDev == null) {
                localDev = LocalDevice.getLocalDevice();
                localDev.setDiscoverable(DiscoveryAgent.GIAC);
                dAgent = localDev.getDiscoveryAgent();
            }
            dAgent.startInquiry(DiscoveryAgent.GIAC, this);
        } catch (BluetoothStateException bluetoothstateexception) {
            myForm.append("Please check your bluetooth is turn-on");
        }
    }
    if (command == cmdSend) {
        SendingFile();
    }
}

public void deviceDiscovered(RemoteDevice remotedevice, DeviceClass deviceclass) {
    try {
        devList.append(remotedevice.getFriendlyName(false), null);
    } catch (IOException _ex) {
        devList.append(remotedevice.getBluetoothAddress(), null);
    }
    myVector.addElement(remotedevice);
}

public void inquiryCompleted(int i) {
    Display.getDisplay(this).setCurrent(devList);
}

public void servicesDiscovered(int i, ServiceRecord aservicerecord[]) {
    servRecord = aservicerecord[0];

}

public void serviceSearchCompleted(int i, int j) {
    if (j != 1) {
        myForm.append("service search not completed: " + j);
    }
    try {
        startServer();
        myForm.append("Done");
    } catch (Exception ex) {
        myForm.append(ex.toString());
    }
}

private void startServer() {
    if (mServer != null) {
        return;
    }
    mServer = new Thread(this);
    mServer.start();
}

public void run() {
    try {
        boolean conFlag = true, FlagLoop = false;
        myForm.deleteAll();

        while (!FlagLoop) {
            try {
                connection = null;
                String s = servRecord.getConnectionURL(0, false);
                connection = (ClientSession) Connector.open(s);

            } catch (IOException iex) {
                myForm.append("IO Exce Con Create:".concat(iex.toString()));
                continue;
            } catch (Exception e) {
                myForm.append("Exc Con Create:".concat(e.toString()));
                continue;
            }
            CheckConnection();
        }
    } catch (Exception ex) {
    }
}

private void CheckConnection() throws IOException {

    try {

        myForm.deleteAll();
        myForm.append("Conn Check!!!");
        HeaderSet header = connection.connect(null);
        int responseCode = header.getResponseCode();
        myForm.append("responseCode:" + responseCode);
        if (responseCode != ResponseCodes.OBEX_HTTP_OK) {
            throw new IOException();
        }
        myForm.append("After Response Check!!!");
        Pushdata();
    } catch (IOException ie) {
        myForm.append("IO Exc in Checkconnection:".concat(ie.toString()));
    } catch (Exception e) {
        myForm.append("Exc in Checkconnection:".concat(e.toString()));
    }
} 
```

约瑟夫·拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:57:24.770

确保所有设备都在范围内并保持连接并尝试以下代码

```
 private void CheckDevice(int indexxx, int size) {
    try {
        for (int i = 0; i < size; i++) {

            DeviceName = devList.getString(i).toString();
            remotedevice = (RemoteDevice) myVector.elementAt(i);
            devAdds = remotedevice.getBluetoothAddress().toString();
            if ((!rmsObj.rmsData.contains(devAdds) && (!Failed_Devices.contains(devAdds)) && (!AllDevices.contains(devAdds)))) {

                SSSendingFile(i);
                return;
            }
        }
    } catch (Exception e) {
        SendingFailed();
    }
}

private void SSSendingFile(int seldeviceindex) {
    myForm.setTitle("Bluetooth Devices Found");
    myForm.deleteAll();
    display.setCurrent(myForm);

    LoadingScreen("Try to Pair with ".concat(DeviceName), "pairing");
    try {
        AllDevices.addElement(devAdds);
        dAgent.searchServices(null, new UUID[]{new UUID(0x1105)}, remotedevice, this);
        return;
    } catch (BluetoothStateException bluetoothstateexception1) {
        myForm.append("Could Not Open Bluetooth: " + bluetoothstateexception1.toString());
        SendingFailed();
    } catch (Exception ex) {
        Date_Purpose("Service Serach EXC:" + DeviceName + " :" + ex.getMessage());
        if (!Devices_Fail_Name.contains(DeviceName.toString()) && (!remotedevice.equals("")) && (remotedevice != null)) {
            Devices_Fail_Name.addElement(DeviceName.toString());
        }
        Failed_Devices.addElement(devAdds);
        SendingFailed();
    }
} 
```

# forms - 如何在 JMeter 中发布受限访问表单

> ID：12203116
> 
> 赞同：5
> 
> 时间：2012-08-30T18:21:41.773
> 
> 标签：forms, spring-security, jmeter

使用 JMeter，我想测试页面。填写并提交表格后，执行一些插入数据库（添加新行程）。

```
Path: /ProjectName/admin/addTrip.html
Method: POST
Parameters:
basePrice 500.0
hotelId 2
description Some text 
```

主要问题是该页面在登录后可用。我不知道如何`j_spring_security_check`使用 JMeter 登录。

我尝试使用登录配置元素作为`HTTP Request`addTrip 页面的父级。结果`View Result Tree -> Response data`我得到了登录表单。当然，这不是预期的结果。

接下来我尝试使用`HTTP Request`登录页面。

```
Path: /ProjectName/j_spring_security_check
Method: POST
Parameters:
j_password mypassword
j_login mylogin 
```

结果似乎还好。`View Result Tree -> Response data`显示正确的（登录后）页面。在线程组的同一级别上，我添加`Http Request`了 addTrip。结果与前一种情况相同 - 登录页面。在 addTrip 页面之后没有，也没有插入到数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:34:41.087

您的计划必须缺失：

*   饼干经理

而且您可能没有正确处理包括重定向的春季安全登录阶段。

对您来说最好的解决方案是使用[JMeter Proxy Recording](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)。如果您是 JMeter 的初学者，请阅读：

*   [http://jmeter.apache.org/usermanual/build-web-test-plan.html](http://jmeter.apache.org/usermanual/build-web-test-plan.html)

*   [http://jmeter.apache.org/usermanual/best-practices.html](http://jmeter.apache.org/usermanual/best-practices.html)

*   [http://jmeter.apache.org/usermanual/hints_and_tips.html](http://jmeter.apache.org/usermanual/hints_and_tips.html)

然后对于您将使用的每个组件，您可以阅读：

*   [http://jmeter.apache.org/usermanual/component_reference.html](http://jmeter.apache.org/usermanual/component_reference.html)

# ruby-on-rails - 新手：simpleform，如何为集合输入字段设置 id？

> ID：12203120
> 
> 赞同：1
> 
> 时间：2012-08-30T18:21:55.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

`How would one set`:id => "myvalue" 用于简单形式的*集合*输入字段？或者在旁注中，我还试图设置age_from的ID，如id =>“age_from”无法弄清楚如何做到这两点，似乎非常缺乏这些文档。

尝试了我能想到的所有可能的组合：

```
= f.input_field :age_to,
  :label => "Age from",
  :collection => 18..60,
  :select => 19 <------- set this to '19' for this collection?
  :style => "width: 50px !important",
  :id => "myid" <------- how to set id for this collection? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T18:45:22.103

```
f.input_field :age_to, :label => "年龄从", :collection => 18..60,
:selected => 19, :style => "width: 50px !important", :input_html => { :id => "myid" }

```

希望它可以设置`id`和显示选定的值！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:44:12.360

如果您使用的是 SimpleForm，则：

```
= f.input :age_to, .., :input_html => { :id => 'myid' } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:46:51.037

尝试：

```
= f.input :age_to, :label => "Age from", :collection => 18..60, :value_method => 19, :input_html => { :id => 'myid' } 
```

# neo4j - Neo4j webadmin 无法启动

> ID：12203125
> 
> 赞同：1
> 
> 时间：2012-08-30T18:22:14.930
> 
> 标签：neo4j

我刚刚下载了neo4j 数据库（社区版1.8.M07）并启动了neo4j.bat。之后，当我转到 时`http://localhost:7474/webadmin/`，我无法在“探索和编辑 - 数据浏览器”选项卡中执行任何查询。它始终在查询文本框中显示以下文本。

```
START root=node(0) // Start with the reference node
RETURN root        // and return it.

// Hit CTRL+ENTER to execute 
```

当我在查询文本框中输入一些文本并点击搜索时，它显示以下错误：“未知错误发生未知错误，无法为您检索结果。”编辑：当我尝试添加新节点时发生同样的错误（使用 +Node 按钮）。我需要做任何额外的事情来让它运行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:55:37.297

我得到了它。在查询框中，我需要编写查询并且简单地编写任何文本（例如 myName）不是正确的方法。但是“未知错误”具有误导性。不知何故，单击“创建节点”按钮的错误也消失了。我希望 neo4j 团队能够在查询格式不正确时给出一些适当的错误。

# java - Glassfish 不想在 Netbeans 中运行任何项目

> ID：12203127
> 
> 赞同：0
> 
> 时间：2012-08-30T18:22:16.460
> 
> 标签：java, netbeans, glassfish

我正在使用 Glassfish Server 3.1.2 运行 Netbeans 7.1.2，当我单击 Run>ProjectTest 时出现问题，在输出中显示这些消息，并且仍然很长时间并且没有显示任何内容。

```
init:
deps-module-jar:
deps-ear-jar:
deps-jar:
library-inclusion-in-archive:
library-inclusion-in-manifest:
compile:
compile-jsps:
Starting GlassFish Server 3.1.2 
```

在其他选项卡中，显示此消息。

```
 Thu Aug 30 18:46:22 WEST 2012 : Security manager installed using the Basic server security policy.
 Thu Aug 30 18:46:23 WEST 2012 : Apache Derby Network Server - 10.8.1.2 - (1095077) started and ready to accept connections on port 1527 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:48:03.390

在 Netbeans 中，单击“服务”选项卡，展开“服务器”节点，找到 GlassFish 服务器并展开其节点。将有一个应用程序文件夹，其中包含您的项目。如果项目已部署，您可以右键单击您的项目并选择在浏览器中打开选项（如果 IDE 没有为您启动它）。

您还可以单击 Netbeans 输出选项卡中的 GlashFish 服务器选项卡以检查输出中是否存在异常、错误等...

# mysql - 长十进制使用什么 MySQL 数据类型？

> ID：12203128
> 
> 赞同：2
> 
> 时间：2012-08-30T18:22:22.663
> 
> 标签：mysql

我必须存储正的十进制数字，如下所示：0.00005438543978579432

存储此类信息的最佳 MySQL 数据类型是什么？

我想使用 DECIMAL(1, 20)，但第一个参数必须 >= 第二个参数。在我的情况下，正数将始终为 0，因此永远不会出现我需要在“。”之前存储 20 位数字的情况，因此拥有数据类型为 DECIMAL(20) 的列似乎是一种浪费,20)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:27:20.080

```
DECIMAL(20,20) 
```

这表示总共 20 位数字，其中小数点后有 20 位数字。（这意味着小数点前最多有 0 位数字。）

精度（第一个值）包括小数点前后的所有数字、总位数。

这就是为什么`DECIMAL(M,N)`指定`M >= N.`要允许小数点前有一个数字，那么您将需要`M = N+1`，例如 DECIMAL(21,20)。

[http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)

# c# - sql azure数据库的RPS容量

> ID：12203132
> 
> 赞同：2
> 
> 时间：2012-08-30T18:22:34.673
> 
> 标签：c#, visual-studio-2010, testing, azure-sql-database, stress-testing

我们如何对 Sql Azure 数据库进行压力测试？我想知道它每秒可以处理多少个请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:43:00.973

可靠地找出的唯一方法是编写一个（非常）简单的程序，在循环中执行给定的 SQL 工作负载。选择工作负载以匹配您的预期生产负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:30:21.417

我将首先查看[Windows Azure SQL 数据库性能和弹性指南](http://social.technet.microsoft.com/wiki/contents/articles/3507.windows-azure-sql-database-performance-and-elasticity-guide.aspx)，了解所有节流的细微差别。各种资源都有硬性和软性限制，所以这里没有一个简单的答案。

当然，您可以敲击服务器以查看何时达到这些限制，但由于 SQL Azure 是共享资源，因此可能还有其他因素在起作用。如果您需要一个您认为 SQL 数据库无法达到的特定性能指标，您可以调查 IaaS[虚拟机](http://msdn.microsoft.com/en-us/library/windowsazure/jj156003.aspx)选项。

# xcode4 - 按名称按字母顺序排列实现文件中的方法

> ID：12203136
> 
> 赞同：2
> 
> 时间：2012-08-30T18:22:45.630
> 
> 标签：xcode4

我正在使用 XCode 4。我有一个很长的 .m 文件，其中包含很多功能实现。

我想按函数名称或返回类型或其 .h 文件中的相同顺序按字母顺序对函数进行排序。

这样做的目的是更好地组织我的 .m 文件。我最近重新排列了相应 .h 文件中的函数，如果它们是一种自动排序函数实现的方式，就像它在 .h 中排序的方式一样，那就太好了

这是我现在拥有的一个例子。

目前有。

.h 文件

```
-(void) a;
-(void) b;
-(void) c; 
```

.m 文件

```
-(void) c;
-(void) a;
-(void) b; 
```

我希望 .m 以与 .h 相同的方式排序。我真的希望在没有我复制粘贴的情况下这是可能的。该文件长达数千行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:36:37.747

如果在 Xcode4 中选择功能弹出窗口时按住命令键，则消息将按字母顺序列出。

类消息（+）将在实例消息（-）之前排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:56:51.683

在任何地方都找不到排序功能。但实际上我发现按类型对方法进行分组并使用 pragma 标记更有用。例如，所有 MKMapViewDelegate 方法都出现在以下杂注注释之后

```
#pragma mark MKMapViewDelegate 
```

当您使用编辑器正上方的下拉菜单时，这使您可以更轻松地找到方法。

除此之外，轻松完成剪切和粘贴工作的唯一最佳方法是使用菜单**编辑器 -> 代码折叠 -> 折叠方法和函数折叠**所有方法，正如 idz 已经指出的那样。

另外我会考虑重新考虑你的课程。你能创建几个类吗？也许您有可以移动到通用实用程序类的实用程序方法？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T18:31:35.527

我不知道在 Xcode 中自动执行此操作的方法，但以下内容可能会使手动执行此操作更快。打开实现文件。然后执行**Editor > Code Folding > Fold Methods & Functions**。现在，根据您的编码风格，您所有的方法都将被折叠成一到两行。您现在可以选择一个函数并将其拖动到新位置以实现您想要的排序。

如果您需要参考头文件以确保顺序正确，请尝试在助手视图中执行此操作；这样您就可以并排查看头文件和实现文件。

# jquery - jQuery jscrollpane 轨道在底部走得太远

> ID：12203140
> 
> 赞同：2
> 
> 时间：2012-08-30T18:23:07.927
> 
> 标签：jquery, tabs, jscrollpane, jquery-tools

我在 jQuery 工具选项卡中使用 jscrollpane 并且有最后一座山要爬，要洗盘子，要遛狗 - 选择你自己的比喻。

该页面在这里：[http ://bdbcreative.com/index3.htm#web-design.htm](http://bdbcreative.com/index3.htm#web-design.htm)

如果您拖动滚动条轨道并一直走到底部，您会看到它超出了端盖箭头大约 25 到 30 个像素。我在 CSS 和 JavaScript 中尝试了许多解决方案，但到目前为止还没有成功。

谁能看到我哪里出错了？

最佳 - 乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:36:13.130

我注意到的是

`.jspTrack`有正确的高度（大约`525px`）

但是，`.jspPane`有类似的东西`550px`吗？

另外，在我看来，您应该在外包装上调用滚动条插件，`div`因为您的滚动条看起来像是随着内容移动。

# c# - 组合框项目出现在组合框之外

> ID：12203142
> 
> 赞同：2
> 
> 时间：2012-08-30T18:23:20.813
> 
> 标签：c#, windows-phone-7

我认为下图很好地描述了这个问题。

![http://www.webeasy.com.gr/problem.jpg](../Images/d2b55955cde9182a29b375b3f4c1ec9f.png)

在我的 windows phone 7 应用程序（C#）中，我有一个组合框，它绑定了一些数据（StatusNameAsceding、StatusNameDesceding 等）

如您所见，下拉列表似乎完全空白，并且其项目显示在下拉列表中，但选定的项目除外。任何想法。

**更新...** 我使用的代码

对于组合框...（xaml 页面）

```
<ComboBox SelectionChanged="OnSortingColumnChanged"
x:Name="SortingColumn" Margin="2,0,0,0" Foreground="Black"
VerticalContentAlignment="Center" Padding="0"> 
```

在 App.xaml.cs 中

```
public enum SortingColumns
{
    StatusNameAscending = 0,
    StatusNameDescending,
    EXAMINOAscending,
    EXAMINODescending,
}
public SortingColumns SortingColumn { get; set; } 
```

在后面的代码中（page.xaml.cs）

```
this.DataContext = CreateSampleData();

App.Current.SortingColumn = App.SortingColumns.StatusNameAscending;
SortingColumn.Items.Add(App.SortingColumns.StatusNameAscending.ToString());
SortingColumn.Items.Add(App.SortingColumns.StatusNameDescending.ToString());
SortingColumn.Items.Add(App.SortingColumns.EXAMINOAscending.ToString());
SortingColumn.Items.Add(App.SortingColumns.EXAMINODescending.ToString());
SortingColumn.SelectedIndex = (int)App.Current.SortingColumn; 
```

和...

```
private void OnSortingColumnChanged(object sender, SelectionChangedEventArgs e)
{
    App.Current.SortingColumn = (App.SortingColumns)SortingColumn.SelectedIndex;

    // Rebind
    // The List control binds the data again when a different datacontext is set.
    var datacontext = DataContext;
    DataContext = null;
    DataContext = datacontext;
} 
```

**UPDATE2 ...** 当我单击空白列表时，会发生选择更改并应用排序，我认为组合框模板中发生了错误，但我不知道是什么！任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:13:25.213

In the end I used listpicker instead of combobox

```
<toolkit:ListPicker SelectionChanged="OnSortingColumnChanged" x:Name="SortingColumn" Margin="2,0,0,0" Foreground="Black" Width="300" Height="180" FontSize="18"></toolkit:ListPicker> 
```

A few details...

First of all you must install Silverlight tool for Windows Phone. You can download it here: [http://silverlight.codeplex.com/releases/view/71550](http://silverlight.codeplex.com/releases/view/71550)

Then we go to AnyPage.xaml and built a sample User Interface but after that we declare like so:

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

The rest of the code remains the same. For more information about listpicker take a look [here](http://www.c-sharpcorner.com/uploadfile/f397b9/using-listpicker-in-windows-phone-7/)

# python - 在Django中绘制某个地方的内部地图（如房屋蓝图）

> ID：12203149
> 
> 赞同：0
> 
> 时间：2012-08-30T18:23:39.060
> 
> 标签：python, django, flash, api, graphics

我会尽量做到最具体。我有一个 Django 项目，我希望能够绘制某个地方的内部地图。我的意思是重要对象的图形表示，如桌子位置、浴室等。我试图避免使用 Flash。是否有我可以使用的现有 API？或者我怎样才能让这个东西工作？

我并不是要在 3d 中绘制一些东西，只是从上面看一个简单的视图，就像一个蓝图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:47:17.637

假设您的意思是在浏览器中以交互方式绘制计划，而不是谷歌地图意义上的地图，您需要 HTML5 画布或 SVG 之类的东西，以及诸如 fabric.js（用于画布）或 Raphael（用于 SVG）之类的库。然后，您的 JS 代码将处理从鼠标输入绘制线条的机制，在浏览器中生成图片。然后，您可以使用 JS 提取该图片并将其传递回服务器以保存为 PNG 或其他格式。

如果你的目标是现代浏览器，canvas 绝对是最好的选择——它是一个更好的 API，有更好的库 (IMO)，并且更容易从中提取 PNG。SVG 还不错，但要取出 PNG 是很棘手的——它依赖于 hack（在 JS 中将 SVG 转换为画布，将其渲染为不可见元素，然后将其转换为 PNG！）或将整个 SVG 发送到服务器在那里渲染。

我最近实现了一些需要非常相似的机制的东西，尽管目的非常不同，所以如果您有任何更详细的问题，请随时提出。

# javascript - JavaScript：意外的令牌错误

> ID：12203150
> 
> 赞同：0
> 
> 时间：2012-08-30T18:23:39.720
> 
> 标签：javascript

我正在学习 codecademy.com 课程，我应该检查一个数字是 3 还是 5 的倍数（但不是 3 和 5 的倍数），根据测试结果返回真或假。如果不满足任何一个条件，该方法也应该返回 false。

当我运行代码时，它告诉我有一个语法错误：意外令牌。谁能看到我做错了什么？

```
var FizzBuzzPlus = {

    this.isFizzBuzzie = function(number){
        if (number % 3 === 0 && number % 5 === 0){
            return false;           
        }else if (number % 3 === 0 || number % 5 ===0){
            return true; 
        }else{
        return false; 
        }                           
    }; 
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:25:56.917

这应该有效：

```
var FizzBuzzPlus = {

    isFizzBuzzie: function(number){
        if (number % 3 === 0 && number % 5 === 0){
            return false;           
        }else if (number % 3 === 0 || number % 5 ===0){
            return true; 
        }else{
        return false; 
        }                           
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:39:22.187

有点离题，但最好只评估一次 3 和 5 的模数：

```
var FizzBuzzPlus = {

    isFizzBuzzie : function(number){
        var d3 = number % 3 === 0;
        var d5 = number % 5 === 0;
        if (d3 && d5){
            return false;           
        }else if (d3 || d5){
            return true; 
        }else{
        return false; 
        }                           
    }
};

for (var i = 0; i <= 25; i++){
    console.log(i + ": " + FizzBuzzPlus.isFizzBuzzie(i));
} 
```

# jquery - 寻找特定类型的 jQuery 内容滑块

> ID：12203154
> 
> 赞同：1
> 
> 时间：2012-08-30T18:23:51.483
> 
> 标签：jquery, jquery-plugins, slider

我正在寻找一种特定类型的内容滑块，但我还没有真正找到我需要的内容。它并不是我似乎很难找到的内容滑块，而是具有特定类型寻呼机的滑块。如下图所示，实际内容所在的位置下方有一个红色条。我正在寻找的是来回滑动而不是仅仅随着内容而变化。我还希望能够用鼠标抓住它并向左或向右滑动，并在我滑动时改变内容。我也希望它在页面加载时自动播放，并在悬停时暂停。任何建议将不胜感激。谢谢！

![滑块截图](../Images/9dcaf5686e71d57f0006e6c7453b4794.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:31:23.570

JCarousel 是一个简单的 JQuery 滑块插件 请检查以下链接 [http://sorgalla.com/projects/jcarousel/examples/static_simple.html](http://sorgalla.com/projects/jcarousel/examples/static_simple.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:35:57.100

使用**jQuery UI**我创建了：

## *[jsBin 演示](http://jsbin.com/atesuq/7/edit)*

```
var $sl = $('#slider');
var slW = $sl.outerWidth(true);
var slN = $sl.children().length;
var c = 0;
var W = slW/slN;
$('#scroller, #nav_btns li').width(W);

function move(){
  c = c==-1 ? slN-1 : c%slN;
  $sl.stop().animate({scrollLeft: slW*c},1000);
  $('#scroller').stop().animate({left: W*c},500);
}

$('#prev, #next').click(function(e){
  var btn = this.id==='next'?c++:c--;
  move();
});

$('#nav_btns li').click(function(){
  c= $(this).index();
  move();
});

$("#scroller").draggable({
    containment:'parent',
    stop: function(){
        var stopPos = $(this).position().left;
        c = (Math.abs(stopPos/W).toFixed(0));
        move();
    }
}); 
```

* * *

**EDIT*添加了 AUTOSLIDE*并改进了*红色*可拖动滑块：**

## *[jsBin 演示 2](http://jsbin.com/atesuq/14/edit)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:35:47.710

让我用一点伪代码：你有一个带有幻灯片 id 的数组......通过抓取栏的总大小并除以数组的长度来找到栏中的关键位置，每个项目的大小将占据可以通过相乘为您提供以像素为单位的位置（锚点）。现在您并排抓取幻灯片的总宽度，一些快速的比例数学可以根据条形位置设置幻灯片包装位置。使用自动滑动选项，只需通过锚位置动画到另一个位置。

# cache-control - Last-Modified + max-age 后响应不会被缓存吗？

> ID：12203159
> 
> 赞同：1
> 
> 时间：2012-08-30T18:24:10.630
> 
> 标签：cache-control, last-modified

假设今天（2012 年 8 月 30 日），Web 服务器返回带有 http 标头的图像年龄：4387905（50 天：自上次修改到今天）上次修改时间：2012 年 7 月 10 日缓存控制：public，max-age=3153600（1 年）到期：2013 年 7 月 10 日

一切看起来都是正确的。

我的问题是，“过期：2013 年 7 月 10 日”之后会发生什么？在那之后，我猜 Last-Modified: 10 Jul 2012 和 max-age: 1 year 不会改变。

那么 2013 年 7 月 10 日之后，图像就不能被缓存了，它立即过期，每次请求它，它都会去服务器获取一个新的副本，对吧？

我相信事实并非如此，但我希望有人能证实这一点。

# asp.net - CheckBoxList 项目对齐

> ID：12203160
> 
> 赞同：1
> 
> 时间：2012-08-30T18:24:11.887
> 
> 标签：asp.net, html, css

我知道这是一个相当简单的问题，但我似乎无法正确对齐我的复选框列表。

我想要复选框左侧的标签，但仍然对齐复选框（参见下面的示例）。尝试了 TextAlign="Left"，但这使得复选框列表项与文本对齐，而不是复选框。我还尝试在我的表中使用右对齐下面代码的当前结果如下所示：

```
 Item 1 [ ]
      Another Item [ ]
      Yet Another Item [ ]
      Last Item [ ] 
```

标记：

```
 <tr align="right" valign="top">
    <td align="right"><asp:CheckBoxList ID="Item1" runat="server" enabled="false" CellPadding="0" CellSpacing="0" style="font-size: x-small;" TextAlign="Left"/>
   </td>
   <td align="right"><asp:CheckBoxList ID="Another Item" runat="server" enabled="false" CellPadding="0" CellSpacing="0" style="font-size: x-small" />
   </td>
   </tr> 
```

我希望结果如下所示：

```
 Item 1 [ ]
      Another Item [ ]
  Yet Another Item [ ] 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:43:04.930

您可以像这样使用 CheckBoxList：

```
 <div style="text-align: right">
       <asp:CheckBoxList TextAlign="Left" runat="server" >
          <asp:ListItem Text = "foo" />
          <asp:ListItem Text = "bar" />
       </asp:CheckBoxList>
  </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:40:51.643

你的意思是这样吗？

```
<ul style="text-align:right; width:200px;">
    <li>Item 1 <input type="checkbox" value="Item1" name="group" /></li>
    <li>Another Item <input type="checkbox" value="Item2" name="group" /></li>
    <li>And another one <input type="checkbox" value="Item3" name="group" /></li>
</ul> 
```

这是[jsfiddle](http://jsfiddle.net/CNuaN/)

# editor - Codecademy 使用什么代码编辑器？

> ID：12203161
> 
> 赞同：4
> 
> 时间：2012-08-30T18:24:11.590
> 
> 标签：editor, text-editor

我在 Codecademy 网站上做了一些课程，我发现他们的代码编辑器非常有用。

有谁知道他们的代码编辑器叫什么，所以我可以下载并使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-25T09:28:40.790

这是[王牌编辑器](http://ace.c9.io/)。您可以通过嵌入网页来使用它。它是[开源](https://github.com/ajaxorg/ace/)的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T07:55:25.980

~~你不能下载它。~~呜呼！现在是新的编辑器。现在你可以！

但是，*Aptana*和*Eclipse*都是不错的 IDE，您可以下载并离线运行以进行 Web 开发。如果您在线，[Cloud9](https://c9.io/)和[jsFiddle](http://jsfiddle.net/)都是很酷的浏览器内 IDE，值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T20:49:59.610

Code Academy 使用“Tomorrow Dark”主题。您可以在此处为各种文本编辑器获取它，包括 Notepad++ 和 Sublimetext：

[https://github.com/ChrisKempson/Tomorrow-Theme](https://github.com/ChrisKempson/Tomorrow-Theme)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-07T12:10:15.990

它被称为**Labs**，可以在[labs.codecademy.com上找到](http://labs.codecademy.com)

# javascript - 以屏幕像素为单位获取旋转的 SVG 元素的边界？

> ID：12203163
> 
> 赞同：7
> 
> 时间：2012-08-30T18:24:16.280
> 
> 标签：javascript, svg, bounding-box

我试图找到以屏幕像素为单位获取任意 SVG 元素边界框的最佳方法，以便正确覆盖 HTML 元素。到目前为止，我的方法是使用`.getBBox()`并`.getCTM()`检索对象的边界框和变换矩阵，然后将变换应用于边界框点，如[该问题](https://stackoverflow.com/questions/5834298/getting-the-screen-pixel-coordinates-of-a-rect-element)的已接受答案中所述。

```
// get the element
var el = $(selector)[0],
    pt = $(selector).closest('svg')[0].createSVGPoint();

// get the bounding box and matrix
var bbox = el.getBBox(),
    matrix = el.getScreenCTM();

pt.x = bbox.x;
pt.y = bbox.y;
var nw = pt.matrixTransform(matrix);
pt.x += bbox.width;
pt.y += bbox.height;
var se = pt.matrixTransform(matrix);

// make a div in the screen space around the object
var $div = $('<div class="bbox"/>').css({
        left: nw.x,
        top: nw.y,
        width: se.x - nw.x,
        height: se.y - nw.y
    })
    .appendTo('body'); 
```

你可以在这里看到我的测试：http: [//jsfiddle.net/nrabinowitz/zr2jX/](http://jsfiddle.net/nrabinowitz/zr2jX/)

但是，正如测试所示，当变换中包含旋转时，这种方法似乎会失败 - 看起来边界框是在旋转前计算的，因此获取旋转边界框的角不起作用。

**如何正确计算转换元素的非旋转边界框？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:06:49.900

经过一番研究，以下是我发现的最佳选择：

*   [`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)似乎对于现代浏览器中的 SVG 元素效果很好，并且速度非常快，但结果可能因平台而异（尤其是如果您的笔画宽度很大）。但是，就@Sergiu 而言，这并没有考虑到形状的变化，而是为您提供了旋转边界框的边界，而不是实际的路径或对象，因此它可能非常不精确 -[请参阅此处的批评](http://phrogz.net/getboundingclientrect-is-lame-for-svg)。小提琴示例：http: [//jsfiddle.net/stevenbenner/6M5zf/](http://jsfiddle.net/stevenbenner/6M5zf/)

*   我的主要目标是获得边界矩形的位置角和中点，最后我决定使用旋转的边界框甚至可能比旋转形状的“真实”边界框更可取。我能够使用上述方法做到这一点，然后循环这些点以尽可能接近 N、S、E、W 位置。你可以在这里看到我的小提琴示例：http: [//jsfiddle.net/nrabinowitz/sPtzV/](http://jsfiddle.net/nrabinowitz/sPtzV/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T22:02:47.737

我认为这是不可能的，因为倾斜和旋转涉及**轮廓变化**，或者形状在两个轴上的投影看起来如何。

您可以计算忽略 CTM 旋转部分的转换矩阵，但是您不能保证新的 BBox 仍将围绕您的旋转元素。例如，如果您有一个圆，则旋转不会影响边界框的尺寸。另一方面，如果您有一个菱形作为基本路径，并将其旋转 45 度，最终它只是一个正方形，那么边界框就不同了：最初您测量的是对角线，而现在您必须获得一个测量边长的边界框。不管怎么用CTM，都不能考虑到形状的变化。

因此，轮换实际上非常重要，忽略它不是一种选择；但是只有局部边界框和变换矩阵并不能说明形状轮廓在旋转时如何变化。

# virtualbox - 通过 putty 拒绝访问 ssh 的私钥

> ID：12203169
> 
> 赞同：1
> 
> 时间：2012-08-30T18:24:33.917
> 
> 标签：virtualbox, putty, vagrant

我正在研究 VM 和 vagrant。

当我尝试通过 putty 访问 ssh 时出现网络拒绝错误。

我已经安装了 putty、puttygen、vagrant 和 virtualbox。我正在使用window 7 32bit。

我所做的是...

1.  使用 puttygen 并转到 .vagrant.d 文件夹以选择 insecure_private_key。
2.  我创建了名称为“putty_key”的私钥
3.  去腻子：连接 - >数据，我把“流浪汉”作为自动登录用户名
4.  转到连接-> ssh-> auth，我选择“putty_key”作为私钥文件进行身份验证。
5.  然后我回到会话主机名（或 IP 地址）：本地主机部分：2222 保存会话：流浪然后我保存了设置。

当我双击“vagrant”时弹出错误窗口

“网络错误：连接被拒绝”

我不确定我收到此错误的原因。

有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:26:47.647

“连接被拒绝”通常意味着目标端口上没有监听套接字。验证您有一个监听端口 2222 的 SSH 服务器，并验证它至少绑定到环回接口。

为此，请从命令提示符：`netstat -p tcp -a -n`并查找带有 state 的行`LISTENING`，以及以结尾的内容的*本地地址*`:2222`

# html - 什么 CSS 属性可以使项目不堆叠？

> ID：12203177
> 
> 赞同：-1
> 
> 时间：2012-08-30T18:24:59.987
> 
> 标签：html, css, drupal

我正在尝试按以下方式对齐下图中显示的元素。我希望幻灯片图像在它现在的位置，标题链接在它现在的位置，但我希望描述文本位于标题下方并与幻灯片图像对齐，而不是它后面的 div 堆栈。

有谁知道我可以在幻灯片图像（带有绿色边框）上放置一个元素，以便该项目不允许 div 堆叠在它后面？

下面的标题上有一个 float:left ，这使它出现在幻灯片旁边，但是下面的描述文本，当我在它上面放一个 float:left 时，它就在标题旁边。

![截屏](../Images/75e5a138a1b5a2afd0084210a91b5e48.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:24:59.987

答案就像 CSS 之神所说的那样，当我输入问题的最后一部分时，它是如此明显。

为了使 div 堆叠在图片下方，我必须让“title” div 延伸到容器的末尾，所以当我将它浮动到图像左侧时，下面的 description div 会自动堆叠在它下方。

正如你从边框看到的那样，我将标题设置得足够长，这样描述 div 就会自动转到下一行。杜尔。不确定是否有人在乎，但我已经准备好把整个问题写出来，所以也许有人会搜索它并发现它很有用。这是带有drupal的视图幻灯片，因此有时会令人困惑。

![截屏](../Images/f60b6eb0029103482b782453adefd747.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:46:38.100

在标题上，添加一个小的 CSS 代码 ex。

```
.left {
float: left
} 
```

还添加一个清晰的类

```
.clear {
clear: both
} 
```

在你的 html 代码中，使用这个

```
<img />
<h1 class="left">Title</h1>
<div class="clear"></div>
<p>Description</p> 
```

# javascript - 可以使用 createRange 选择一个空范围吗？

> ID：12203181
> 
> 赞同：1
> 
> 时间：2012-08-30T18:25:09.827
> 
> 标签：javascript, internet-explorer

我有以下 javascript，我试图用它来将图像插入到我的内容中：

```
var imgHtml = '<IMG SRC="' + returnValue+ '">';
var $rte = document.parentWindow.document.getElementById(fieldId);
var rteDoc = $rte.document.selection;
var range = rteDoc.createRange();
range.pasteHTML(imgHtml); 
```

这在我选择文本时有效，但是当我只是将光标放在我的内容中（但不选择任何内容）时，图像会插入我页面的左上角，而不是光标位置的内容中。

未选择任何内容时如何在光标位置插入？

仅供参考 - 这只需要在 IE 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:41:39.367

使用[createTextRange](http://msdn.microsoft.com/en-us/library/ie/ms536401)获取光标位置，并[使用 moveEnd](http://msdn.microsoft.com/en-us/library/ie/ms536620)将其偏移指定数量的字符：

```
var imgHtml = '<IMG SRC="' + returnValue+ '">';
var $rte = document.parentWindow.document.getElementById(fieldId);
var range = $rte.createTextRange();
range.moveEnd('character',0);
range.pasteHTML(imgHtml); 
```

# javascript - MongoDB mapreduce 优化

> ID：12203185
> 
> 赞同：1
> 
> 时间：2012-08-30T18:25:33.353
> 
> 标签：javascript, mongodb, mapreduce

我有一个存储在 Mongodb 上的命中集合，使用这个模式：{ userid: ... date: ... }

我想显示一个报告，计算两个日期之间的唯一访问者（具有不同用户 ID 在这些日期之间取得成功的访问者）。

输出示例：

访问者人数：...点击次数：...

该集合的大小约为 1M 条记录。

我的第一个想法是进行增量 mapreduce 以按天计算聚合值。然后在天上进行第二次 mapreduce 以输出最终结果。

问题是当在报告中选择一系列日期时，我无法计算正确的唯一身份访问者数量。

按天汇总的值示例： 第 1 天：1 位唯一身份访问者 第 2 天：2 位唯一身份访问者（2 位访问者中有 1 位在第 1 天获得成功）

这两天的独立访问者总数为 3，但整个期间只有 2 个独立访问者，而不是 3 个。

在此示例中，您有任何计算唯一访问者的高效方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:53:00.137

通过在所需日期上使用单个 map-reduce 可能更容易解决此问题。无需首先聚合一天的唯一用户（您的第一步），您可以对要检查的所有日期进行相同的聚合。通过这种方式，您可以完全避免第二步。

要将其分解为 Map 和 Reduce 部分：

地图：查找在所需时间范围内记录的所有用户标识

减少：删除所有重复的用户标识

完成此过程后，您应该留下该时间范围内的一组唯一访问者（更具体地说，唯一用户 ID）。

或者，有一种更简单的方法可以做到这一点，根本不需要 map-reduce。“distinct”命令（参见[mongoDB distinct 文档](http://docs.mongodb.org/manual/reference/command/distinct/)）允许您选择一个字段并返回一个仅填充该字段的不同（唯一）值的数组。如果您在所需时间范围内对文档使用 distinct 命令，您将能够获得一个数组，其中包含该时期内的所有用户 ID，没有任何重复。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:53:49.030

您可以使用 2.2 版及其聚合框架轻松完成此操作。

假设架构 {userid: " ", date: " "} 并给出两个特定日期 d1 和 d2 这是管道：

```
db.collection.aggregate(
[
    {
        "$match" : {
            "date" : {
                "$gte" : d1,
                "$lte" : d2
            }
        }
    },
    {
        "$group" : {
            "_id" : "$userid",
            "hits" : {
                "$sum" : 1
            }
        }
    },
    {
        "$group" : {
            "_id" : "1",
            "visitors" : {
                "$sum" : 1
            },
            "hits" : {
                "$sum" : "$hits"
            }
        }
    },
    {
        "$project" : {
            "_id" : 0,
            "visitors" : 1,
            "hits" : 1
        }
    }
] 
```

# php - 在 SQL 表 Google 地图上加载多个值时出错

> ID：12203187
> 
> 赞同：0
> 
> 时间：2012-08-30T18:25:37.690
> 
> 标签：php, javascript, mysql, google-maps-api-3

我在谷歌地图上有一个项目，我想在地图上保存路线和航点，问题是我可以在数据库上保存路线，但不能在地图上加载所有路线，我只能加载一条路线，我想加载多条路线。

为您了解访问此示例：

点击地图创建起点，再次点击创建终点，他们，点击保存航点 这是我的代码

索引.htm

这是我的桌子的印刷品 ![在此处输入图像描述](../Images/d640779d89ac605f58cb840d93d41e7a.png)

OBS：这只是我代码的一部分，要查看完整代码，请输入我发送的链接并按 CTRL+U 查看源代码

我真的需要帮助，我在同一问题上尝试了一个月！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:16:36.607

有许多“错误”导致问题

1.  数据库结构

1.1 您的表格只有 1 个字段（列）包含所有数据

1.2 由于只有 1 个字段，您如何区分路线？

至少你应该有至少 2 个字段 id（最好是自动完成）和 value。尽管最好每个属性都有一个字段。

2\. $rs = mysql_fetch_array($res,1);

第二个参数应该是要获取的数组的类型。它是一个常量，可以采用以下值：MYSQL_ASSOC、MYSQL_NUM 和 MYSQL_BOTH。 [见php手册](http://php.net/manual/en/function.mysql-fetch-array.php)

由于不需要此参数，请尝试 $rs = mysql_fetch_array($res);

3.代替

$query = "插入到inventoresdegara设置值='$data'";

尝试

$query = "INSERT INTOinventesdegara VALUE('$data')";

我建议你阅读使用 PHP/MySQL [w3 学校](http://www.w3schools.com/php/php_mysql_intro.asp)

# html - 图像宽度调整到特定高度

> ID：12203188
> 
> 赞同：0
> 
> 时间：2012-08-30T18:25:51.810
> 
> 标签：html, css

我有一张图片，我指定高度为 500px。此图像位于 960 像素宽的分区中。

图像拉伸宽以填充 div。但我希望它保持纵横比。在侧面给我的垂直图像边框。

我怎样才能做到这一点？请注意，在这张图片中，这个人被拉伸到了这个图像框？我希望它显示正确的比例，但最大高度为 500 像素

![在此处输入图像描述](../Images/5f1f17871064d603406bee38953e1fed.png)

```
<div class="banner">
        <div class="slider-wrapper theme-bar">
            <div id="slider" class="nivoSlider">
                <img src="images/gallery/1/1.jpg" alt="1.jpg" />
            </div>
        </div>
</div>

    .nivoSlider {
        position:relative;
        width:100%;
        height:auto;
        overflow: hidden;
    }
    .nivoSlider img {
        position:absolute;
        top:0px;
        left:0px;
        max-height: 600px;
    }
    .nivo-main-image {
        display: block !important;
        position: relative !important; 
        width: 100% !important;
    }

    /* If an image is wrapped in a link */
    .nivoSlider a.nivo-imageLink {
        position:absolute;
        top:0px;
        left:0px;
        width:100%;
        height:100%;
        border:0;
        padding:0;
        margin:0;
        z-index:6;
        display:none;
    }
    /* The slices and boxes in the Slider */
    .nivo-slice {
        display:block;
        position:absolute;
        z-index:5;
        height:100%;
        top:0;
    }
    .nivo-box {
        display:block;
        position:absolute;
        z-index:5;
        overflow:hidden;
    }
    .nivo-box img { display:block; }

    /* Caption styles */
    .nivo-caption {
        position:absolute;
        left:0px;
        bottom:0px;
        background:#000;
        color:#fff;
        width:100%;
        z-index:8;
        padding: 5px 10px;
        opacity: 0.8;
        overflow: hidden;
        display: none;
        -moz-opacity: 0.8;
        filter:alpha(opacity=8);
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
    }
    .nivo-caption p {
        padding:5px;
        margin:0;
    }
    .nivo-caption a {
        display:inline !important;
    }
    .nivo-html-caption {
        display:none;
    }
    /* Direction nav styles (e.g. Next & Prev) */
    .nivo-directionNav a {
        position:absolute;
        top:45%;
        z-index:9;
        cursor:pointer;
    }
    .nivo-prevNav {
        left:0px;
    }
    .nivo-nextNav {
        right:0px;
    }
    /* Control nav styles (e.g. 1,2,3...) */
    .nivo-controlNav {
        text-align:center;
        padding: 15px 0;
    }
    .nivo-controlNav a {
        cursor:pointer;
    }
    .nivo-controlNav a.active {
        font-weight:bold;
    } 
```

我明白了，我必须添加
`.nivo-main-image { height: 600px !important; }`
和删除
`width = 100% – Frantumn 12 mins ago`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:28:15.153

如果您根本不指定宽度，则默认情况下会发生这种情况。我确定您在某处指定了此图像的宽度，您需要将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:58:24.663

我要尝试的第一件事是通过“蛮力”将宽度更改为自动。

HTML：

```
<div class="banner">
        <div class="slider-wrapper theme-bar">
            <div id="slider" class="nivoSlider">
                <img class="autowidth" src="images/gallery/1/1.jpg" alt="1.jpg" />
            </div>
        </div>
</div> 
```

CSS：

```
.autowidth { width: auto!important; } 
```

如果这解决了您的问题，那么您确实在其他地方设置了图像宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:01:56.827

你加入 `width: auto;`课堂了`.nivo-box img`吗？我认为这应该有所帮助。

# objective-c - 如何使用 Objective C 将应用程序分配给 Mac OS X Lion 的所有桌面（空间）？

> ID：12203190
> 
> 赞同：17
> 
> 时间：2012-08-30T18:25:55.833
> 
> 标签：objective-c, macos, cocoa, osx-lion, osx-snow-leopard

我正在尝试在 Mac OS X Lion 上创建一个应用程序，该应用程序需要将应用程序分配给所有桌面（空间）。这可以通过右键单击应用程序的停靠图标并选择**Options > Assign To > All Desktops**来手动完成。但是，我需要通过Objective C 找到一种方法来做到这一点。有没有办法以编程方式实现这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-02T04:14:05.097

您可以使用带有按位标志[`setCollectionBehavior:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setCollectionBehavior:)的方法。`NSWindow`[`NSWindowCollectionBehaviorCanJoinAllSpaces`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setCollectionBehavior:)

它将使窗口在所有空间上可见。

```
NSUInteger collectionBehavior;

// Gets the current collection behavior of the window
collectionBehavior = [ myWindow collectionBehavior ];

// Adds the option to make the window visible on all spaces
collectionBehavior |= NSWindowCollectionBehaviorCanJoinAllSpaces;

// Sets the new collection behaviour
[ myWindow setCollectionBehavior: collectionBehavior ]; 
```

**笔记**

此方法是在 Mac OS X 10.6 中引入的。

在 Mac OS X 10.5 上，您需要[`canBeVisibleOnAllSpaces:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/TP40004151-AppendixA)使用`NSWindow`.

# javascript - 客户端 HTML MVC 渲染与通过 NodeJS 的服务器端渲染

> ID：12203192
> 
> 赞同：21
> 
> 时间：2012-08-30T18:26:04.850
> 
> 标签：javascript, node.js, angularjs, html-rendering

我们正在为我们的团队寻找选项，以在基于 Angular 的客户端 MVC 方法和服务器端 NodeJS / ExpressJS 服务器端渲染方法之间做出决定。

我们的 Angular 应用程序下载为一个 index.html，并发出 XHR 请求来填充页面。因为我们需要预渲染页面，所以当内容更改到服务器上的某个位置时，我们使用 PhantomJS 保存每个页面的副本。这允许对 SEO 的支持。

是否有任何全页主干应用程序或 Angular 应用程序的示例可供人们指出，以便我们查看其他人是否正在这样做。

或者是我们可以在野外看到的 NodeJS 服务器端渲染应用程序的示例。

最后，有人对这种架构有意见吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-06T04:32:43.647

我从事过主要是服务器渲染和主要是客户端渲染的应用程序。每种类型都有自己的优点和缺点。但是，您必须在其中一个或另一个之间进行选择的想法是错误的二分法。如果你有资源，你可以将两者结合起来，以获得两全其美的效果。

我看到纯客户端框架的 4 个主要挑战：

*   搜索引擎优化和分析
*   缓存
*   记忆
*   潜伏

## 搜索引擎优化

因为您使用的是 Node.JS，所以可以通过简单地使用服务器上的客户端框架为 googlebot 和公司输出静态页面来缓解 SEO 问题。最近 Google 为单页应用程序制作了一个不错的 Analytics API，但这比简单地在主模板的末尾添加几行要多一些工作。

## 缓存

缓存是加速任何 Web 应用程序的非常重要的方法。对于少量数据，将数据缓存在客户端的内存或本地存储中会更快，但存储空间非常有限（目前约为 5MB）。加上缓存失效在 localStorage 中很难做到。

## 记忆

记忆是我为忽视而付出的沉重代价。在不知不觉中，我不小心制作了一个占用超过 200MB RAM 的应用程序。我也许可以通过优化将它降低到一半，但我怀疑如果我将它全部呈现在服务器上，它会占用超过 20 MB 的空间。

## 潜伏

延迟也很容易被忽略。例如，Drupal 为每个页面运行大约 50 到 100 个 SQL 查询。当数据库服务器就在应用程序服务器旁边时，您不必担心延迟，所有这些查询都可以在不到几百毫秒的时间内执行。您的客户端应用程序通常需要一百毫秒来发出一个 AJAX 请求。这意味着您需要花费大量时间设计服务器端 API 以尽量减少这些往返，但此时服务器已经拥有生成 HTML 所需的所有数据。如果您不小心，拥有一个与正确 RESTful 接口对话的客户端应用程序可能会变得非常缓慢。

37 Signals 最近在博客中介绍了他们为新版 Basecamp 实施[的混合客户端/服务器架构。](http://37signals.com/svn/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui)这种混合方法使用服务器来呈现 HTML，但利用客户端上的 PJAX 之类的东西来摆脱整页刷新。效果真的很快，是我推荐的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T01:02:52.253

使用服务器上的 node.js，原则上您可以使用相同的代码在客户端和服务器上呈现。实现这种方法的框架是[Meteor](http://meteor.com)和[Derby](http://derbyjs.com)，它们还在客户端和服务器之间进行数据模型的透明同步。尽管两者都仍被认为处于 alpha 阶段，但似乎已经很好地工作了。

同时，客户端和服务器端渲染各有利弊：

*   客户端渲染的缺点是初始页面加载需要很长时间，但是一旦加载了所有资源，用户就可以在没有页面的情况下无缝导航站点。您可能希望最小化 Ajax 调用的数量和/或使用客户端缓存（例如，在 Angular.js 控制器中缓存数据）。
*   服务器端渲染提供了快速的初始页面加载，有利于 SEO，但每次用户导航时，整个页面在加载新 URL 时会出现一秒钟的空白。

所以这完全取决于您是否想要快速的初始页面加载但不要期望用户停留那么长时间（然后使用服务器端呈现）或者页面加载速度并不重要（如在 Gmail 中）但用户会导航很长时间（然后使用客户端渲染）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-02T14:20:57.063

我们目前正在测试这种疯狂的方法：我们有在客户端上运行的 angularJS 应用程序。当我们检测到 Googlebot 作为代理时，我们运行[PhantomJS](http://phantomjs.org/)实例并用它的输出响应爬虫。棘手的部分是知道您的客户端应用程序何时完成加载，以便您可以选择并返回它。如果您在加载客户端 JS 应用程序之前执行此操作，则爬虫将不会获取太多数据，主要是 index.html。

可以在这里找到简单的实现：http: [//pastebin.com/N3w2iyr8](http://pastebin.com/N3w2iyr8)

更新：在我写原始答案的时候，不存在像 prerendr.io 这样的东西，但我现在可以指出[它](https://github.com/prerender/prerender)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T10:49:34.267

我的解决方案是让 Google 可以抓取 Angular 上的应用程序。用于[aisel.co](http://aisel.co)

1.  [由https://github.com/localnerve/html-snapshots](https://github.com/localnerve/html-snapshots)处理的快照
2.  将规则添加到您的 .htaccess

    ```
    RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)$
    RewriteCond %{REQUEST_URI} !^/snapshots/views/ [NC]
    RewriteRule ^(.*)/?$ /snapshots/views/%1 [L] 
    ```

3.  为快照创建 node.js 脚本，并在终端中运行它：**node snapshots.js**

    ```
    var htmlSnapshots = require('html-snapshots');
        var result = htmlSnapshots.run({
        input: "array",
        source: [
                "http://aisel.dev/#!/",
                "http://aisel.dev/#!/contact/",
                "http://aisel.dev/#!/page/about-aisel"
        ],
        outputDir: "web/snapshots",
        outputDirClean: true,
        selector: ".navbar-header",
        timeout: 10000
    }, function(err, snapshotsCompleted) {
        var fs = require('fs');
        fs.rename('web/snapshots/#!', 'web/snapshots/views', function(err) {
            if ( err ) console.log('ERROR: ' + err);
        });
    }); 
    ```

4.  确保一切都适用于 curl，输入终端

    curl [http://aisel.dev/](http://aisel.dev/) \?_escaped_fragment_\=/page/about-aisel/ 这应该显示快照的内容**.../www/aisel.dev/public/web/snapshots/views/page/about-aisel /index.html**

不要对谷歌和其他爬虫的指令。您的应用应在头部包含元规则：

```
 <meta name="fragment" content="!"> 
```

来自谷歌的完整条款：[https ://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

# iis - IIS NTLM 问题

> ID：12203198
> 
> 赞同：1
> 
> 时间：2012-08-30T18:26:26.520
> 
> 标签：iis, ntlm

我已经在 IIS 中建立了一个网站以使用 Windows 身份验证，访问了提供商，并且我在已启用的提供商下拥有了 NTLM……我按照这篇文章来设置安全策略。 [http://developers.de/blogs/damir_dobric/archive/2009/08/16/enabling-of-ntlm-on-windows-7-and-windows-server-2008-r2.aspx](http://developers.de/blogs/damir_dobric/archive/2009/08/16/enabling-of-ntlm-on-windows-7-and-windows-server-2008-r2.aspx)

我得到他的错误：

NTLM 服务器阻止审核：审核将被阻止的传入 NTLM 流量

如果安全策略 Network Security: Restrict NTLM: Incoming NTLM Traffic 设置为 Deny all accounts 或 Deny all domain accounts, 审核到此服务器的 NTLM 身份验证请求将被阻止。

如果您希望此服务器允许 NTLM 身份验证，请设置安全策略 Network Security: Restrict NTLM: Incoming NTLM Traffic to Allow all。

我错过了什么吗？我已设置安全策略网络安全：限制 NTLM：传入 NTLM 流量以允许所有。

# exchange-server - Tivoli 无法在 Exchange 中

> ID：12203199
> 
> 赞同：0
> 
> 时间：2012-08-30T18:26:28.087
> 
> 标签：exchange-server, recovery, tivoli

我在一所大学从事电子邮件恢复工作。我们有 Exchange 2010，我们使用 Tivoli 作为我们的备份/恢复程序。

执行邮箱还原时，您指定要恢复的用户邮箱以及备份发生的给定日期。之后，将创建名称格式为 TSMRDB-server-DateOfOccurence（例如 TSMRDB-EXSERVER_20120828111630）的文件夹。备份日的整个数据库被复制出来，只是为了将用户的邮箱保存到一个 .pst 文件中。是的，这似乎效率低下。创建 .pst 文件后，文件夹 TSMRDB-EXSERVER_20120828111630 将被删除。有时该过程失败并且数据库被卸载（您不能简单地转到交换管理控制台并安装它）并且该文件夹未删除。

当您 `ESEUTIL /MH "M:\2010 Restores\TSMRDB-EXSERVER_20120828111630\DB3.edb"` 在创建的数据库上运行时，您会看到状态为`Dirty Shutdown`. 为了修复这个你可以说`ESEUTIL /R e02 /D "M:\2010 Restores\TSMRDB-EXSERVER_20120828111630\DB3.edb"`。但是，它给出了一个错误`Operation terminated with error -528 (JET_errMissingLogFile, Current log file missing)`。问题是服务器是处理整个过程的那个。我可以给它什么日志文件来停止询问我，或者是否有其他方法可以挂载数据库以将其删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:59:04.007

这是解决方案。利用

```
Remove-MailboxDatabase -Identity TSMRDB-EXSERVER 
```

然后去物理删除文件夹`M:\2010 Restores\TSMRDB-EXSERVER_20120828111630`。

# php - $_POST 不会取消设置

> ID：12203204
> 
> 赞同：1
> 
> 时间：2012-08-30T18:26:50.347
> 
> 标签：php, post

scriptA.php 有一个将 POST 发送到 scriptB.php 的表单。scriptB.php 也是一种将 POST 数据发送到 scriptC.php 的表单。当我在 scriptC.php 上 print_r($_POST) 时，数据不是 scriptB 而是 scriptA 的！

ScriptB 甚至调用了似乎有效的 unset($_POST)。它似乎有效，因为在 scriptB 上还有一个 print_r($_POST) 在 unset($_POST) 之后显示它是空的。

那么 scriptC 是如何得到 scriptA 的 POST 数据的呢？我已经取消设置（）它，并提交了一个新的 POST 表单......但它不会消失！我要疯了。

尝试了多种浏览器，登录和退出网站......到目前为止没有任何效果。

# 脚本A.php

```
<form method="post" action="scriptB.php">
{form inputs}
</form> 
```

# 脚本B.php：

```
<?php

unset($_POST);
print_r($_POST); //blank

?>
<form method="post" action="scriptC.php">
{form inputs, different than scriptA}
</form> 
```

# 脚本C.php：

```
<?php

print_r($_POST); // displays data fields from scriptA instead of scriptB

?> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-30T18:40:33.747

使用`$_REQUEST`而不是`$_POST`.

# jquery - jQuery .validate 初始标签文本

> ID：12203208
> 
> 赞同：0
> 
> 时间：2012-08-30T18:27:04.773
> 
> 标签：jquery, jquery-validate

嗨，我想知道一旦验证字段以在标签中显示初始文本，我该怎么做：

jQuery：

```
$("#contact").validate({
  rules: {
    con_name: {
      required:true,
      minlength:3
    },
  }  
}); 
```

HTML：

```
<form id="contact" method="post" action="">
    <input type="text" name="con_name" id="con_name" />
    <label for="con_name" generated="true" class="error">Insert Name</label>
</form> 
```

文本`Insert Name`替换为错误消息，但成功后它会隐藏标签并删除初始文本`Insert Name`。我需要它再次显示初始文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:26:29.627

像我显示的那样设置消息：

设置如下：

```
$("#contact").validate(
    {       
    rules:{
        con_name:{required:true, minlength:3},                      
          }  
    messages: {
          con_name: 'Insert Name'
          }

    }); 
```

# jquery - 验证不会触发...立即，并且不完全

> ID：12203210
> 
> 赞同：1
> 
> 时间：2012-08-30T18:27:08.500
> 
> 标签：jquery, jquery-validate

我有这样的html：

```
 <form action="" id="emailFillOutForm">
                <div class="txt-fld">
                    <label for="repName">Rep. Name</label>
                    <input id="repName" type="text" disabled="disabled" value="John Smith" class="disabled" /> <!-- This value will come from login, fake it for now -->
                    <label for="financedAmount" style="padding-left: 15px;">Financed Amount</label>
                    <input id="financedAmount" type="text" disabled="disabled" class="disabled" />
                </div>
                <div class="txt-fld">
                    <label for="doctorName">Doctor Name</label>
                    <input id="doctorName" type="text" class="required"/>
                    <label for="emailAddress" style="padding-left: 15px;">Email address</label>
                    <input id="emailAddress" type="text" class="required email"/>
                </div>
                <div class="txt-fld">
                    <label>Equipment</label>
                    <select name="equipment" class="required">
                        <option value="Equipment1" selected="selected">Equipment1</option>
                        <option value="Equipment2">Equipment2</option>
                    </select>
                </div>
                <div class="btn-fld">
                    <button type="submit" value="submit">Submit &raquo;</button>
                </div>
             </form> 
```

Javascript如下：

```
 // Validate submit form with the jQuery validation library
        $("#emailFillOutForm").validate({
            errorPlacement: function (error, element) {
                error.appendTo($(element.parent("div")));
            },
            rules: {
                emailAddress: {
                    required: true,
                    email: true
                }
            }
        }); 
```

jquery.validate.min.js 库 v. 1.9 jquery-1.7.2.min

出于某种原因，“提交”表单仅验证名称输入，要验证电子邮件，我必须对其进行标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:41:47.000

您似乎只需要添加与您的输入`name`具有相同值的属性。`id`

[...]

```
<input id="doctorName" name"doctorName" type="text" class="required"/> 
```

[...]

```
<input id="emailAddress" name="emailAddress" type="text" class="required email"/> 
```

[...]

# jquery - 为什么我不能让 Vimeo api 工作？

> ID：12203213
> 
> 赞同：0
> 
> 时间：2012-08-30T18:27:19.800
> 
> 标签：jquery, vimeo

我应该能够使用 vimeo 的 Froogaloop 库与视频进行交互，但我无法让它继续。

我认为加载 Froogaloop 时它会自动将 api() 和 addEvent() 函数附加到所有 iframe 元素，但这似乎不是真的。

最终，我需要加入“完成”事件。

示例：http: [//jsfiddle.net/doub1ejack/xa2Dt/2/](http://jsfiddle.net/doub1ejack/xa2Dt/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:22:32.207

好的，所以该代码有几处错误：

1.  Froogaloop在加载时**不会**自动将 api 函数添加到 vimeo iframes
2.  iframe 必须具有指定`player_id`通过查询字符串参数的源 url（例如`http://player.vimeo.com/video/1325670?api=1&player_id=sb-player`
3.  `player_id`必须与 iframe 的 id相同
4.  可能还有一些我现在忘记的东西

我[在 Vimeo 论坛](https://vimeo.com/forums/topic:73274#comment_7800534)上记录了一个 jsFiddle 尝试线程。最终，我从一个简单的 vimeo api 脚本中获得了最大的价值，我将其转换为[另一个 jsFiddle](http://jsfiddle.net/doub1ejack/G7YTx/1/)。

祝你好运。这是一种乱七八糟的东西。

# .htaccess - htaccess 重定向

> ID：12203214
> 
> 赞同：0
> 
> 时间：2012-08-30T18:27:20.470
> 
> 标签：.htaccess

我已经更改了我网站的根目录 - 是否可以创建 htaccess 将所有内容重定向到新的根目录（如所有锚点、标题等）？

我已经尝试过诸如：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/$
RewriteRule (.*) http://localhost/root/index.php [R=301,L] 
```

但它只会在我打开 localhost/ 时重定向到新文件夹，否则如果我单击锚点，它不会重定向到任何地方。

这就是我想要实现的目标：
锚点是：*localhost/user*
我想将它重定向到：*localhost/ **root** /user*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:02:21.913

> 它仍然不会重定向图像等内容，但我想如果不更改每个标签中的 src 路径，我就无法做到这一点，对吧？

使用[捕获组](http://www.regular-expressions.info/brackets.html)！

```
RewriteRule (.*) /root/$1 [R=301,L] 
```

您会看到，其中`$1`包含对模式中括号中的内容的引用。因此，任何和所有 URI 都被重定向到根文件夹中的等效项。这也适用于子文件夹，一切（“img/something.jpg”->“root/img/something.jpg”）。

但是，仅此规则就会导致无限循环，因为重定向的 URL 现在将被重写。例如：请求来自/index.html，重定向到/root/index.html，但随后又被捕获，并重定向到/root/root/index.html......所以为了处理这个问题，我们应该引入一个RewriteCond ， 喜欢

```
RewriteCond %{REQUEST_URI} !^/root/ 
```

这意味着：“如果请求的 URI 不以 '/root/' 开头”。这些应该让你开始。

* * *

另一种可能更经济的重定向方法是使用[RedirectMatch 指令](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirectmatch)，但正则表达式有点混乱，因为它需要包含重写的 URL 不应以“root”开头的条件（以避免重定向环形）。我现在无法测试这个，但类似的东西

```
RedirectMatch ^/(?!root/)(.*) /root/$2 
```

可能会成功。（该`(?!root)`位是[负前瞻](http://www.regular-expressions.info/lookaround.html)，当然这种模式也可以在 rewriteRule 中使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:30:19.950

我认为您必须删除协议和域。尝试

RewriteRule (.*) /root/index.php [R=301,L]

或者可能

RewriteRule (.*) http://root/index.php [R=301,L]

# c# - 根据视图模型中的属性将 IsEnabled 设置为 true 或 false

> ID：12203216
> 
> 赞同：0
> 
> 时间：2012-08-30T18:27:37.553
> 
> 标签：c#, wpf, xaml, data-binding, mvvm

预期行为

1.  有组合框和日期选择器。
2.  在选择更改组合框时，应启用或禁用日期选择器，具体取决于组合框选择。

我如何尝试实施

日期间隔和日期选择器的 XAML 代码

```
<ComboBox ItemsSource="{Binding Source={StaticResource viewByInterval}}"
          SelectedValuePath="Value"
          SelectedItem="{Binding IntervalMode,Mode=TwoWay}" />

<DatePicker SelectedDate="{Binding EndDate,Mode=TwoWay}"
            IsEnabled="{Binding Path=EndDateEnabled[0],Mode=TwoWay}"> 
```

查看用于更改 EndDateEnabled 的模型代码

```
public bool EndDateEnabled { get; set; }

public DateMode IntervalMode
{
    get
    {
        return _dateModeValue;
    }
    set
    {
        _dateModeValue = value;
        EndDateEnabled =  (value == DateMode.CustomDateRange);                
    }
} 
```

我无法实现该功能。请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:32:48.227

您不需要该`[0]`部分（它是布尔值，而不是集合），并且绑定不需要是`TwoWay`：

```
IsEnabled="{Binding Path=EndDateEnabled}" 
```

您还需要在 ViewModel 中实现，并为属性（以及您的视图绑定到的所有属性）`INotifyPropertyChanged`引发`PropertyChanged`事件：`EndDateEnabled`

```
private bool _endDateEnabled;
public bool EndDateEnabled
{
    get { return _endDateEnabled; }
    set
    {
        if (value != _endDateEnabled)
        {
            _endDateEnabled = value;
            OnPropertyChanged("EndDateEnabled");
        }
    }
} 
```

请注意，`EndDateEnabled`它也可以是只有 getter 的计算属性：

```
public bool EndDateEnabled
{
    get { return _dateModeValue == DateMode.CustomDateRange; }
} 
```

`OnPropertyChanged("EndDateEnabled")`在这种情况下，您需要调用`DateModeValue`setter，以便刷新绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:36:54.367

我看到了两个问题。首先，您与 EndDateEnabled 的绑定应该更像：

```
IsEnabled="{Binding Path=EndDateEnabled}" 
```

[0] 无效或不必要，因为绑定的目标只是一个计划 bool 属性。TwoWay 不应该在这里适用，我不认为，但拥有它并没有什么坏处。

支持 ViewModel 应实现 INotifyPropertyChanged 以通知 UI 该属性已更改。EndDateEnabled 属性的代码最终可能类似于：

```
private bool endDateEnabled = false;
public bool EndDateEnabled 
{
    get { return endDateEnabled; }
    set 
    {
        if (endDateEnabled != value)
        {
            endDateEnabled = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("EndDateEnabled"));
        }
    }
} 
```

我是从记忆中做到的，所以它可能并不完美，但这是一般的想法。

# php - Php Xpath - 如何获得特定值？

> ID：12203218
> 
> 赞同：0
> 
> 时间：2012-08-30T18:27:39.983
> 
> 标签：php, xpath

如何使用 php xpath 从下面的字符串中获取货币值？

```
<div class="detalheDir2">
<div class="preco">
R$
<script type="text/javascript">document.write(aZ427014992694557())</script>
24,90
</div>
</div> 
```

我只想得到 24,90

我正在使用查询

```
$xpath->query("descendant::div[@class='detalheDir2']/div[@class='preco']/text()", $child); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:47:55.690

如果你想要的文本节点总是在这个位置，你可以使用如下索引：

```
//div[@class='detalheDir2']/div[@class='preco']/text()[2] 
```

如果它总是在 a`<script>`标签之后，您可以编写：

```
//div[@class='detalheDir2']/div[@class='preco']/script/following-sibling::text() 
```

如果它始终是您可以编写的最后一个文本节点

```
//div[@class='detalheDir2']/div[@class='preco']/text()[last()] 
```

也许它包含 a 的事实`,`可能是关键：

```
//div[@class='detalheDir2']/div[@class='preco']/text()[contains(., ',')] 
```

所有这些都适用于您的示例，但是您输入的差异将使这些中断。

如果您只知道它存在于文本节点中的某个位置，并且只有格式将其与其他节点区分开来，那么您最好选择所有文本节点并遍历它们，并与 regexps 上的正则表达式匹配`textContent`。

# linux - Linux开源2d GUI引擎媲美WPF

> ID：12203221
> 
> 赞同：1
> 
> 时间：2012-08-30T18:27:59.100
> 
> 标签：linux, user-interface, 2d, graphic

我正在寻找 Linux 上的 2d 开源 GUI 引擎，以消除我们对 Windows 的依赖。我们当前的应用程序是用 C# + WPF 编写的，这非常慢且成本高昂。它阻止我们做任何很棒的事情。如果 Linux 中有任何东西可以提供 WPF 可以提供的东西（易于使用的设计器、动画、布局和组件控件等），我宁愿在 Linux 中用 C++/Java 重写我的整个代码库。

Qt 是一种选择，但我有点担心它在未来的支持，因为最近诺基亚解雇了整个团队。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:34:25.050

你可以看看[月光](http://www.mono-project.com/Moonlight)：

> Silverlight 实现了 WPF API 的子集，可在 Windows、MacOS X 上使用，通过我们自己的开源项目 Moonlight，它可在 Linux 和其他 Unix 系统上使用。
> 
> Silverlight 不具备 WPF 的所有功能，但两种技术在 API 方面都在融合。
> 
> Silverlight 现在可以在浏览器之外使用，Moonlight 可以配置为在浏览器之外与完整的 .NET API 一起使用。

[更多的...](http://www.mono-project.com/WPF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:26:23.060

我仍然会建议 Qt。即使诺基亚破坏了他们对它的所有支持，Qt 也属于 LGPL。这意味着源代码仍然可用且免费（自由），并且 KDE 社区将继续使用它。无论如何，他们已经达到了一定程度。此外，虽然 Qt 仍然是 C++，但它是通过元对象编译器 ( `moc`) 对 C++ 进行了非常修改的扩展，元对象编译器是一种特殊的预处理器。我想你不会后悔选择使用 Qt。

当然，如果您想继续使用 C# 和 .NET，可以使用开源 Mono 倡议，他们正在尝试创建一个替代 .NET 和 C# 的替代品，并且大部分都兼容。我不知道它们是否支持除了 Win Forms 之外的任何东西，但几乎每个图形库都有绑定，因此您可以使用 GTK（称为 GTK# 的绑定）、Qt、WxWidgets 和许多其他东西。

此外，还有 GNOME 的 Glib 和 GTK+，它们是 Linux 的其他主要接口库。它们是面向 C 的，所以你可能很难适应你的代码。

# javascript - 错误处理 try & catch + 回调？

> ID：12203224
> 
> 赞同：2
> 
> 时间：2012-08-30T18:28:23.227
> 
> 标签：javascript, error-handling

> **可能重复：**
> [是否可以捕获 JavaScript 异步回调中抛出的异常？](https://stackoverflow.com/questions/3677783/is-it-possible-to-catch-exceptions-thrown-in-a-javascript-async-callback)

我正在从数据库中提取订单，然后请求，我希望能够打破`forEach`并且我可以用 a 来做到这一点，`try`但`catch`我认为回调不起作用

```
try{
    orders.find().forEach(function(order){
        request({
            "method":"get",
            "json":true
        },function (error, response, data){
            if (!error && response.statusCode == 200) {
                console.log("Order id "+order.id);
            }else{
                throw "limit";
            }
        });
    });
}catch(err){
    if(err == "limit"){
        console.log("error occured");
    }
} 
```

这就是我得到的

```
 /Users/thomas/Desktop/forerunner/retrieveTransactions.js:120
                throw "limit";
                ^
    limit 
```

我只是想：

```
 error occured 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T18:35:48.720

您需要在回调函数中添加 try-catch，例如：

```
orders.find().forEach(function(order){
    request({
        "method":"get",
        "json":truetry{
    },function (error, response, data){
        try{
            if (!error && response.statusCode == 200) {
                console.log("Order id "+order.id);
            }else{
              throw "limit";
            }
        }catch(err){
            if(err == "limit"){
                console.log("error occured");
            }
        }
    });
}); 
```

# c++ - 高阶位 - 删除它们并右移

> ID：12203227
> 
> 赞同：2
> 
> 时间：2012-08-30T18:28:47.160
> 
> 标签：c++, c, assembly, bit-manipulation

[作为上一个问题](https://stackoverflow.com/questions/12181352/high-order-bits-take-them-and-make-a-uint64-t-into-a-uint8-t)的后续行动：

假设您有一个 uint64_t 并且只关心`uint64_t`. 像这样：

```
0111.1111 0111.1111 0111.1111 0111.1111 0111.1111 0111.1111 0111.1111 0111.1111 
```

--->

```
0000.0000 1111.1111 1111.1111 1111.1111 1111.1111 1111.1111 1111.1111 1111.1111 
```

有没有比屏蔽每个部分、右移并添加到下一个更快的方法来将每个 7 位部分向右移动？

不幸的是，我没有允许快速和通用位收集的热门 AVX 指令。我只能访问 SSE2 指令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:46:07.683

你可以用三个面具和班次来做到这一点。

```
u64 val;

// remove bits at 7, 23, 39, 47
u64 odd8   = val & 0x7f007f007f007f00L;
u64 even8  = val & 0x007f007f007f007fL;

val = ( odd8 >> 1 ) | even8;

// remove bits at 15-16, 23-24
u64 odd16  = val & 0x3FFF00003FFF0000L;
u64 even16 = val & 0x00003FFF00003FFFL;

val = ( odd16 >> 2 ) | even16;

// remove bits at 31-35
u64 odd32  = val & 0x0FFFFFFF00000000L;
u64 even32 = val & 0x000000000FFFFFFFL;

val = ( odd32 >> 4 ) | even32; 
```

# firefox - 如何为 Firefox 编译这个扩展？

> ID：12203228
> 
> 赞同：1
> 
> 时间：2012-08-30T18:28:50.217
> 
> 标签：firefox, build, firefox-addon, firefox-addon-sdk

我怎样才能把它编译成一个firefox插件？我曾尝试使用位于 [https://builder.addons.mozilla.org](https://builder.addons.mozilla.org)的 Firefox 插件构建器，但是当我单击测试时，它显示“XPI 未构建”。谁能告诉我如何将这段代码变成一个函数 firefox 扩展？谢谢你。

```
//create an nsIObserver implementor
  var listener = {
observe : function(aSubject, aTopic, aData) {
      var httpChannel = aSubject.QueryInterface(Components.interfaces.nsIHttpChannel);

      if (aTopic == "http-on-modify-request") {

        var channel= aSubject.QueryInterface(Components.interfaces.nsIHttpChannel);

        if(channel.requestMethod == "POST")
        {

            channel=channel.QueryInterface(Components.interfaces.nsIUploadChannel);  
            channel = channel.uploadStream;  
            channel.QueryInterface(Components.interfaces.nsISeekableStream)
                            .seek(Components.interfaces.nsISeekableStream.NS_SEEK_SET,    0);  
            var stream = Components.classes["@mozilla.org/binaryinputstream;1"]
                                .createInstance(Components.interfaces.nsIBinaryInputStream);  
            stream.setInputStream(channel);  
            var postBytes = stream.readByteArray(stream.available());  
            poststr = String.fromCharCode.apply(null, postBytes);  

            //change the poststr

            // poststr=poststr.replace(....);  

            // ERROR HERE - stringStream is not defined
            stringStream.setData(poststr, poststr.length);  
            //changing the postdata  
            channel = channel.QueryInterface(Components.interfaces.nsIUploadChannel);  
            channel = channel.uploadStream;  
            channel = channel.QueryInterface(Components.interfaces.nsISeekableStream)
                      .seek(Components.interfaces.nsISeekableStream.NS_SEEK_SET, 0);  
                channel.uploadStream.QueryInterface(Components.interfaces.nsIMIMEInputStream);  
            channel.uploadStream.setData(stringStream);  
            channel.requestMethod = "POST";

        }

      }

},

QueryInterface : function(aIID) {
   if (aIID.equals(Components.interfaces.nsISupports) ||
        aIID.equals(Components.interfaces.nsIObserver))
     return this;
   throw Components.results.NS_NOINTERFACE;
}
 };

 var observerService = null;

var Init = {
addObserver : function(){
  observerService = Components.classes["@mozilla.org/observer-    service;1"].getService(Components.interfaces.nsIObserverService);
  observerService.addObserver(listener, "http-on-modify-request", false);
},

removeObserver : function(){
  observerService.removeObserver(listener, "http-on-modify-request");
}
};

Init.addObserver(); 
```

*   编辑：我已经阅读了官方的 Firefox 文档，但它令人困惑，它主要处理基于 gui 的插件，并且没有提供太多示例，我将如何为此创建扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:24:21.730

您那里的示例适用于经典（基于 XUL）扩展，而不适用于附加 SDK。您仍然可以使用[低级`observer-service`API](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/packages/api-utils/observer-service.html)添加该观察者。此外，基于 SDK 的扩展通常无法访问该`Components`对象，它需要[chrome 权限](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/dev-guide/tutorials/chrome.html)。将以下代码添加到您的`main.js`文件中：

```
var observer = require("observer-service");
var {Cc, Ci} = require("chrome");

observer.add("http-on-modify-request", function(subject, data)
{
  var channel= subject.QueryInterface(Ci.nsIHttpChannel);

  if (channel.requestMethod == "POST")
  {
    channel = channel.QueryInterface(Ci.nsIUploadChannel);  
    channel = channel.uploadStream;
    channel.QueryInterface(Ci.nsISeekableStream)
           .seek(Ci.nsISeekableStream.NS_SEEK_SET, 0);
    var stream = Cc["@mozilla.org/binaryinputstream;1"]
                   .createInstance(Ci.nsIBinaryInputStream);  
    stream.setInputStream(channel);  
    var postBytes = stream.readByteArray(stream.available());  
    poststr = String.fromCharCode.apply(null, postBytes);  

    //change the poststr

    // poststr=poststr.replace(....);  

    // ERROR HERE - stringStream is not defined
    stringStream.setData(poststr, poststr.length);  
    //changing the postdata  
    channel = channel.QueryInterface(Ci.nsIUploadChannel);  
    channel = channel.uploadStream;  
    channel.QueryInterface(Ci.nsISeekableStream)
           .seek(Ci.nsISeekableStream.NS_SEEK_SET, 0);  
    channel.uploadStream.QueryInterface(Ci.nsIMIMEInputStream);  
    channel.uploadStream.setData(stringStream);  
    channel.requestMethod = "POST";
  }
}); 
```

请注意，我只是在您提供的代码中替换`Components.classes`为`Cc`and `Components.interfaces`by `Ci`- 我不确定这段代码应该做什么，但我很确定它不起作用。

# android - 当活动回到前面时恢复微调器位置

> ID：12203233
> 
> 赞同：0
> 
> 时间：2012-08-30T18:29:22.560
> 
> 标签：android, android-activity, spinner

我似乎无法将我的微调器位置设置回我调用第二个活动之前的位置。

应用程序布局：活动“主”有一个微调器和 8 个按钮，用户从微调器中选择一个项目，然后单击一个按钮打开该活动（我不在“主”活动上调用“finish()”） . 用户完成第二个活动后，我执行以下代码以将“主要”活动重新置于前面。

```
private void exitActivity() {
    Intent mainIntent = new Intent(this, Main.class);
    startActivity(mainIntent);
    finish();
} 
```

我的问题是我在“主要”活动中的微调器总是设置回位置 0，而不是在用户进入第二个活动之前选择的位置。

谢谢你的帮助。

在 3、2、1 中看起来像个白痴……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:38:19.243

你为什么这样做？：

```
 Intent mainIntent = new Intent(this, Main.class);
    startActivity(mainIntent); 
```

调用`finish()`足以让您回到启动第二个活动的活动。

由于该活动没有关闭，微调器将与您开始第二个活动之前的状态相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:36:40.897

您可以在 onPause 方法中将用户选择保留到您的[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中，然后在您的 onResume 方法中从那里重新加载它。

似乎这是一种很常见的方法。

# asp.net - 访问页面方法请求标头

> ID：12203238
> 
> 赞同：1
> 
> 时间：2012-08-30T18:29:43.467
> 
> 标签：asp.net

在页面方法中，如何访问当前请求对象以便读取标头？

该方法看起来像

```
 [System.Web.Services.WebMethod]
 public static string MyMethod(string name)
 {
 } 
```

并且生活在一个继承自 Page 的 aspx.cs 文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:31:53.773

您可以`Request.Headers`在代码中使用属性

```
[System.Web.Services.WebMethod]
 public static string MyMethod(string name)
 {
   var headers = HttpContext.Current.Request.Headers;   
   foreach(var item in header)
   {

   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:40:51.333

您将不得不使用[HttpContext.Current](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.request%28v=vs.71%29.aspx)

```
[WebMethod]        
public static string MyMethod(string name)
{
      var headers = HttpContext.Current.Request.Headers;         
} 
```

`HttpContext.Current`返回与当前请求关联的[HttpRequest 。](http://msdn.microsoft.com/en-us/library/system.web.httprequest%28v=vs.71%29.aspx)您可以使用它来处理与请求关联的任何数据。

# c++ - 关于使用指针访问 3D 数组的元素

> ID：12203239
> 
> 赞同：0
> 
> 时间：2012-08-30T18:29:46.300
> 
> 标签：c++, pointers, multidimensional-array

我有一个像这样声明的 3D 数组

```
unsigned char   ScalingList[3][2][64]; 
```

我需要使用另一个指针访问 ScalingLists 的元素，在这些行上

```
unsigned char (*pQM)[2][64];
pQM = &(ScalingList[0][0][0]); 
```

然后像这样索引到 ScalingList 的元素

```
pQM[i][j][k] 
```

我知道我需要正确组合 ()、* 和 &，但我无法得到它。有人可以帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:08:03.457

你发布的内容对我来说非常接近完美。我能发现的唯一问题是该行中的类型不匹配：

```
pQM = &(ScalingList[0][0][0]); 
```

所写的 rhs 是 unsigned char * 类型。

请尝试：

```
pQM = ScalingList; 
```

第一个维度将衰减为指向第一个元素的指针 - 一个正确大小的二维数组。

# sql-server-2008 - Crystal Reports 和 Windows 7 - 导出到 Excel 并执行“双行”格式

> ID：12203242
> 
> 赞同：0
> 
> 时间：2012-08-30T18:29:58.283
> 
> 标签：sql-server-2008, crystal-reports, export-to-excel

我们（一家公司）有一个使用水晶报表创建报表的应用程序。然后，该程序为我们提供了将特定报告导出到 Excel 文档的选项。我们最近将我们的报告服务器升级到 SQL 2008，之前是 SQL 2003。这样做时，一些（不是全部）用户会遇到问题，即导出所述报告会导致 Excel 为每行数据放置双行。这会导致问题，因为我们使用宏来组合这些报告。我们注意到具有更高访问级别的用户不受此影响，但我们无法明确证明这一点。有没有其他人遇到过这个问题，也许他们知道如何解决它。任何意见或帮助将不胜感激。

*PS：有问题的应用程序是在 2003 年左右创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:33:55.963

鉴于此问题在您的服务器升级后出现，我将查看 Crystal Reports 文件中使用的查询。升级中似乎发生了一些事情，破坏了正在使用的查询。既然您说访问权限较低的用户可能是唯一受影响的用户，那么我将首先查看这些访问权限是如何应用于报告的。

这也可能是 Crystal Report 中的格式问题 - 这些往往很容易导致 Excel 导出出现问题，但这似乎不太可能，因为您看到的是完全重复的行。

现在很难用帖子中的信息来肯定地说，但根据我的经验，这些问题通常是水晶查询有缺陷的结果。

# sql-server - 为什么在实际 shell 中运行 sql cmdshell 时会出现错误？

> ID：12203245
> 
> 赞同：1
> 
> 时间：2012-08-30T18:30:08.720
> 
> 标签：sql-server, sql-server-2005, xp-cmdshell

我运行以下命令：

```
EXEC XP_CMDSHELL 'fsutil fsinfo volumeinfo C:' 
```

返回错误：文件名、目录名或卷标语法不正确。空空

但是，点击 D: 驱动器就可以了。此外，如果我只是`fsutil fsinfo volumeinfo C:`从 DOS 提示符下运行（例如，常规命令 shell）——那也可以。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:36:02.567

我没有解释*为什么**它*不起作用，但以下内容对我有用：

```
 EXEC master.dbo.xp_cmdshell 'fsutil fsinfo volumeinfo C:\' 
```

请注意在查询末尾包含反斜杠。

# java - 创建可执行jar的正确方法

> ID：12203248
> 
> 赞同：0
> 
> 时间：2012-08-30T18:30:20.457
> 
> 标签：java, jar

我有以下目录结构。

```
src|
   |pack|
        |Test.java
data|
    |data.txt

classes|
       |pack|
            |Test.class
manifest.txt 
```

它编译并运行良好。

```
\project>javac -d classes src\pack\Test.java
\project>java -cp classes pack.Test 
```

Test.java 的内容

```
package pack;
import java.io.*;

class Test {
    public static void main(String[] args) {
        String line = null;
        BufferedReader br = null;
        try {
            br = new BufferedReader(new FileReader("data\\data.txt"));
            while((line=br.readLine())!=null) {
                System.out.println(line);
            }
            br.close();
        }catch(IOException e){System.out.println("FileNotFound");}
    }
} 
```

manifest.txt 的内容

```
Main-Class: pack.Test 
```

如何创建jar文件？我应该从哪里执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:39:41.477

如果要手动创建 jar，请查看 jar 命令。像这样，在你的情况下：

```
jar -cvfm name.jar manifest.txt -C classes . 
```

但是，请注意清单文件的名称应该是 MANIFEST.MF。

另外，我建议你开始学习像 ant、maven 或 gradle 这样的构建工具，比如你可以自动完成这些。

# android - 首次启动应用程序时 WebView 无法登录

> ID：12203251
> 
> 赞同：6
> 
> 时间：2012-08-30T18:30:28.537
> 
> 标签：android, webview

每当我第一次启动我的应用程序时尝试登录到选定的网站时，登录失败并且 WebView 只是转到 about:blank，但是如果我刷新并尝试再次登录（以及任何后续时间）它可以正常工作。有谁知道为什么会发生这种情况？我只是在 WebView 对象中打开页面，应该像普通浏览器一样。如果我使用默认浏览器或 Dolphin 浏览器登录，它工作正常。

我认为它可能与网站本身有关，当您登录时它会打开一个新窗口，我正在使用我的 WebView 对象（并且它适用于后续登录）来捕获它，以便在当前 WebView 中打开新窗口（我不需要，或者不想打扰标签）使用 shouldOverrideUrlLoading。

我只是不知道为什么它只在第一次尝试时失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:24:02.723

试试下面的链接

[http://developer.android.com/reference/android/webkit/WebView.html#setHttpAuthUsernamePassword%28java.lang.String](http://developer.android.com/reference/android/webkit/WebView.html#setHttpAuthUsernamePassword%28java.lang.String)

和

[http://developer.android.com/reference/java/net/URLConnection.html](http://developer.android.com/reference/java/net/URLConnection.html)

这可能会帮助你......

# python - Easy_install celery 错误

> ID：12203254
> 
> 赞同：0
> 
> 时间：2012-08-30T18:30:55.917
> 
> 标签：python, celery

使用 easy_install 为 python 安装 celery，当它尝试安装 billiard 时出现错误，这是依赖项之一：

```
Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/celery-3.0.6-py2.7.egg
Processing dependencies for celery==3.0.6
Searching for billiard>=2.7.3.12
Reading http://pypi.python.org/simple/billiard/
Reading http://github.com/celery/billiard
Reading http://github.com/ask/billiard
Best match: billiard 2.7.3.12
Downloading http://pypi.python.org/packages/source/b/billiard/billiard-2.7.3.12.tar.gz#md5=631deb04e69cf6a7cd1f380432a2e420
Processing billiard-2.7.3.12.tar.gz
Running billiard-2.7.3.12/setup.py -q bdist_egg --dist-dir /tmp/easy_install-g7tRCS/billiard-2.7.3.12/egg-dist-tmp-qEzoAf
warning: no files found matching '*.py' under directory 'Lib'
unable to execute gcc-4.2: No such file or directory
error: Setup script exited with error: command 'gcc-4.2' failed with exit status 1 
```

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:54:53.477

确保您已`Command Line Tools for Xcode`安装。似乎您缺少编译器。

# java - java：如何一次处理多个函数参数中的null？

> ID：12203257
> 
> 赞同：2
> 
> 时间：2012-08-30T18:31:20.800
> 
> 标签：java

我有一个接收三个字符串的函数，它们中的任何一个或所有三个都可能为空（事先不知道）。处理这个问题的最佳方法是什么？

基本情况是这样的：

```
public String doStuff(String a, String b, String c) {
  //do stuff
} 
```

如果在任何字符串中使用空值调用它，我会收到此错误：

```
-> doStuff("test", null, null)

Unable to execute method public java.lang.String
doStuff(java.lang.String,java.lang.String,java.lang.String)  
on object 1c52ac68 of class test with arguments {Wap:java.lang.String, null, null} of size 3 
```

我想我可以为三个输入中所有可能的空值排列重载它，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:42:29.823

你可以这样写：

```
int nulls=0;
if(a==null) nulls+=1;
if(b==null) nulls+=2;
if(c==null) nulls+=4; 
```

然后切换空值：

```
switch(nulls){
  case 0://no String is null  
    ...  
    break;  
  case 1://just a is null  
    ...  
    break;
  case 5://(5=101b), a and c is null
    ...
    ...
} 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:46:16.080

我不知道如何解决您的问题，但如果您只是想让检查变得更容易，您可以创建一个实用函数来检查是否有任何参数为空：

```
public boolean verifyNotNull(Object.. objects) {
    for(Object o : objects) {
        if(o==null) return false;
    }
    return true;
} 
```

然后你可以在你的函数中调用这个实用程序：

```
public String doStuff(String a, String b, String c) {
    if(!verifyNotNull(a,b,c)) {
        throw new MyException("...");
    }
} 
```

也许AOP也可以为你做点什么……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:50:03.880

不确定你想要的最终结果是什么。如果你说你的 doStuff 只是做一个字符串 concat 并且你不需要一个 null 然后这样做..

```
doStuff(String a, String b, String c){
        String x = "";
        if(null!=a) x = x+a;
        if(null!=b) x =x+b;
        if(null!=c) x = x+c;
        System.out.println(x);
} 
```

# php - 如何在 CodeIgniter 中获取当前视图名称？

> ID：12203260
> 
> 赞同：4
> 
> 时间：2012-08-30T18:31:29.473
> 
> 标签：php, codeigniter

如何获取当前显示视图的名称以传递给另一个函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-27T22:54:57.313

如果要在视图中显示视图名称：

```
echo $_ci_view; 
```

另请参阅 `print_r(get_defined_vars())`您将看到来自 CI 的许多有趣的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:30:15.620

> 如何获取当前显示视图的名称？

```
$thisFile = pathinfo(__FILE__, PATHINFO_FILENAME);
$thisViewName = trim($thisFile, '.php');
echo $thisFile; // view_filename.php
echo $thisViewName; // view_filename 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T04:57:18.830

我认为没有办法获取视图。您可以做的最接近的是获取被路由到的动作和控制器。

您可以使用 CodeIgniter 提供的 Router 类来实现这一点。利用

```
$this->router->fetch_method(); 
```

获取当前操作。

[参考](https://stackoverflow.com/a/2062141/393021)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T19:34:10.263

您可以将视图的名称传递给视图。

控制器：

```
$data = array('viewName' => 'home_view');
$this->load->view($data['viewName'], $data); 
```

然后要在您的视图中访问，您可以使用以下命令检索视图名称：

```
<?php echo $viewName ?>
//produces 'home_view' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-24T18:07:18.010

您可以简单地使用 PHP，在视图中`someview.php`这样写：

```
<?php echo basename(__FILE__, ".php"); ?> //prints: someview 
```

其他人建议`<?=$_ci_view?>`注意它会打印出视图的整个文件名：`someview.php`而不仅仅是视图名称`someview`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-16T11:38:06.800

对于那些需要知道当前类名的人，您可以在视图中使用此命令来获取其父类：

```
<?= $this->router->class ?> 
```

对于当前视图使用：

```
<?= $_ci_view; ?> 
```

# php - 按天显示 SQL 项目

> ID：12203263
> 
> 赞同：0
> 
> 时间：2012-08-30T18:31:46.707
> 
> 标签：php, mysql

我正在尝试显示我的整个表格，但按天分组。

所以在我之后

```
SELECT * FROM events ORDER BY event_date, event_time 
```

我希望它们像这样显示。

```
<table>
<th><?php echo date('W M D', strtotime($row->event_date)); ?></th>
<tr>
<td>Location Time Event</td>
</tr>

<th><?php echo date('W M D', strtotime($row->event_date)); ?></th>
<tr>
<td>Location Time Event</td>
<td>Location Time Event</td>
</tr>
</table> 
```

但我在任何地方都找不到一个例子。仅对项目进行分组和汇总。

编辑。我不想添加天数，而是按天数显示项目。

示例输出

```
September 8th
 -- Location Time Event
 -- Location Time Event

September 9th 
 -- Location Time Event

October 10th
 -- Location Time Event 
```

编辑 2。

重写了代码

```
<?php 
            require_once("config.php");
            $results = $db->get_results('SELECT * FROM events ORDER BY event_date, event_time');
            foreach($results as $row){
                $row->id // all the items are available as objects
            }
            $curr_date = '' 
            foreach($results as $row){
            if ($curr_date != $row->event_date){
            /* Handle the date’s title here */
            printf("<h1>%s</h1>", $row->event_date);
            $curr_date = $row->date
            }
            /* Handle row items here */
            printf("<tr><td>%s</td><td>%s</td></tr>", $row->presenter , $row->location); 
            }
          ?> 
```

仍然收到错误。错误出现在这里 $row->id 与意外的 T_VARIABLE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:27:07.403

像这样的东西怎么样：

```
$result = mysql_query("SELECT * FROM events ORDER BY event_date, event_time");
while($row = mysql_fetch_array($result)) {
    $event_date = $row['event_date'];
    $location_event = $row['some event'];
    if ($event_date == $last_date) {
        echo "<tr><td>$location_event</td></tr>";
    } else {
        echo "<th>$event_date</th>";
        echo "<tr><td>$location_event</td><tr>";
    }
    $lastdate = $event_date;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:10:18.640

尚未对此进行测试，但它创建了一个多维数组，允许您遍历日期和后续时间。

```
$tempArray = array();

$query = "SELECT event_date, event_time FROM events ORDER BY event_date, event_time";
$result = mysqli_query($link, $query) or die(mysqli_error($link));

while($row = mysqli_fetch_array($result, MYSQLI_BOTH)) {
    $event_date = $row[event_date];
    $event_time = $row[event_time];

    $tempArray[$event_date][] = $event_time;
}

foreach($tempArray as $k1=>$event_date) {
    echo "<h1>$event_date</h1>";

    foreach($tempArray[$event_date] as $k2=>$event_time) {
        echo "<p>$event_time</p>";
    }
}

mysqli_free_result($result);

unset($tempArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:27:53.743

得到它的工作感谢您的帮助！

代码：

```
$results = $db->get_results('SELECT * FROM events ORDER BY event_date, event_time');
            $curr_date = ''; 
            foreach($results as $row){
            if ($curr_date != $row->event_date){
            /* Handle the date’s title here */
            printf("<h1>%s</h1>", $row->event_date);
            $curr_date = $row->event_date;
            }
            /* Handle row items here */
            printf("<tr><td>%s</td><td>%s</td></tr></br>", $row->presenter , $row->location); 
            } 
```

# javascript - 操作输入字段

> ID：12203265
> 
> 赞同：1
> 
> 时间：2012-08-30T18:32:09.520
> 
> 标签：javascript, greasemonkey, firefox2

是否可以删除输入但使用 Greasemonkey 显示值？还是禁用它？例如：

```
<input name="prio" type="text" value="285" disabled="disabled"> 
```

我不知道如何编写任何用户脚本。:(

它适用于我公司的 PC，我无法使用 jQuery 或编辑原始源代码。

首先看一下更好的理解：

代码如下所示：http: [//jsfiddle.net/gv3XF/](http://jsfiddle.net/gv3XF/)

但我想要这样：http: [//jsfiddle.net/gv3XF/1/](http://jsfiddle.net/gv3XF/1/)

我用*Stylish*尝试过，但我只能隐藏输入。我仍然需要结果的价值。

始终调用输入，`name="prio"`但值中的数字正在变化。

我想要的是“杀死”输入但显示值的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:00:14.317

你不能只是“杀死”输入。如果这样做，那么在您提交表单时，必要的数据可能不会发送到服务器。

因此，***隐藏***输入并显示其值。[这是一个完整的脚本，它使用jQuery](http://jquery.com/)的强大功能来做到这一点：

```
// ==UserScript==
// @name        Make Priority more user friendly
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_getValue
// ==/UserScript==
//--- The @grant is to subvert a huge design flaw, introduced with GM version 1.

var oldInput    = $("input[name=prio]");
var priorityVal = oldInput.val ();
oldInput.after ('<b id="gmPriorityValue">' + priorityVal + '</b>');
oldInput.remove ();

$("#gmPriorityValue").before ('<input type="hidden" name="prio">');
$("input[name=prio]").val (priorityVal); 
```

更改`@include`值以匹配您的站点。

请注意，您无法更改`<input>`s 类型，因此我们删除旧输入并创建一个具有相同值但隐藏的新输入。

* * *

* * *

回复`do that without jquery? the pc has no internet connection`：：

你要把脚本文件偷偷放到电脑上，对吧？:)
也下载并偷偷 jQuery 到它上面。将 jQuery 文件和用户脚本文件放在同一个文件夹中，将`@require`行更改为：

```
// @require     jquery.min.js 
```

然后脚本将安装得很好，不需要互联网连接。

* * *

* * *

回复`maybe the easiest way is to disable the input field`：：

好的，执行此操作的脚本是：

```
// ==UserScript==
// @name        Make Priority more user friendly
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant       GM_getValue
// ==/UserScript==

var oldInput = document.querySelector ("input[name=prio]");
oldInput.setAttribute ("disabled", "disabled"); 
```

* * *

### 更新：

问题中省略了极其重要的信息——主要是针对 Firefox 2.0(!!!) 和 Greasemonkey 0.8。鉴于此，将最后一个脚本的代码更改为：

```
var oldInput = document.getElementsByName ("prio");
oldInput[0].setAttribute ("disabled", "disabled"); 
```

它应该可以工作，但无法测试，而且[兼容性表甚至没有涵盖这样一个过时的浏览器](http://www.quirksmode.org/dom/w3c_core.html)。

# java - 用于字符串提取的 Java 正则表达式

> ID：12203267
> 
> 赞同：2
> 
> 时间：2012-08-30T18:32:18.267
> 
> 标签：java, regex, string

我想从下面的输入中提取“Little League World Series”：

```
<li><span class="Spicy new"><a href="http://www.google.com/trends/hottrends#a=20120825-Little%2BLeague%2BWorld%2BSeries">Little League World Series</a></span></li> 
```

我可以用“”替换它之前和之后的字符串，或者我可以提取字符串。我无法获得正确的正则表达式来执行此操作。我`line.replace(" <li><span class=\"[\\w]+\"", "");`用来替换“Little League World Series”之前的零件，但匹配不正确。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:45:43.597

您可以使用它来删除行前的内容：

```
line.replaceFirst("<li><span class=\"[^\"]+\"><a href=\"[^\"]+\">", ""); 
```

[在正则表达式上](http://regexr.com?320ed)试试

**编辑：** `String.replace`不接受正则表达式，`String.replaceFirst`可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:49:47.360

如果这不是格式良好的受信任 html 源，请使用 html 解析器，如 JSOUP。正则表达式无法保护您免受许多格式错误的 html 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:48:33.607

利用

```
<li><span class="[^"]+"><a href="[^"]+">[^>]+</a></span></li> 
```

得到整条线。然后更换

```
<li><span class="[^"]+"><a href="[^"]+"> 
```

用“”替换

```
</a></span></li> 
```

和 ””

试试下面的链接。它还显示了所需的 java 字符串。 [http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

要使用 java 函数，请检查此链接： [http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceFirst(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceFirst(java.lang.String))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:03:43.380

这似乎通过了：

```
 @Test
    public void patternTest() {
        final String text = "<li><span class=\"Spicy new\"><a href=\"http://www.google.com/trends/hottrends#a=20120825-Little%2BLeague%2BWorld%2BSeries\">Little League World Series</a></span></li>";
        final Pattern pattern = Pattern.compile("^.*>([^<>]+)<.*$");
        final Matcher matcher = pattern.matcher(text);
        assertTrue(matcher.matches());
        assertEquals("Little League World Series", matcher.group(1));
    } 
```

它提取介于“>”和“<”之间的最后一个非空文本

# jquery - 递归删除多个 socket.io 监听器

> ID：12203268
> 
> 赞同：3
> 
> 时间：2012-08-30T18:32:24.207
> 
> 标签：jquery, node.js, socket.io, listener

我正在使用 node.js 和 socket.io 编写一个应用程序，用户可以在其中在个人聊天室中相互交谈。每个人都可以有多个打开的聊天室。当用户想要退出聊天室时，系统必须移除该聊天室的所有套接字监听器。

```
websocket.on('createRoom', function(roomID) {
    ...
    var room = generateRoom();
    ...

    // Leaving room
    $('#exitButton').on('click', function() {
        // Removes
        websocket.removeAllListeners('createRoom');
    });

    // User joins the room
    websocket.on('main/roomJoin/'+roomID, function(username) {
        alert(username + ' has joined the room');
    });

    ...

    websocket.on('chat/messageReceived/'+roomID, function(message) {
        room.printMessage(message);
    });
}); 
```

问题是 removeAllListeners 不会删除内部侦听器，因此如果另一个用户在另一个用户退出后进入房间，他会收到警报。

另一种方法是将听众放在外面，但管理多个房间更难。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:10:38.873

我知道您已经解决了问题，但无论如何我都会回答，以便人们知道发生了什么。

1) removeAllListeners() 仅删除相关事件的回调数组；它根本不会影响任何其他事件。

当您定义 eventListener （即 on('xyz', function(){}）时，您将回调函数附加到由提供的事件名称索引的数组中。在您的情况下，该数组是相关对象的成员"webSocket" 对象 webSocket.on("createRoom", function(){}) 将函数添加到类似于

```
webSocket.listeners = {
    "createRoom: [ function ],
    "someOtherEvent": [ function, function, function ]
} 
```

webSocket.removeAllListeners('createRoom') 将简单地从对象中删除 createRoom 键及其关联值，而不影响任何其他事件：

```
webSocket.listeners = { "someOtherEvent": [ function, function, function ] } 
```

2) 虽然 roomJoin 和 messageReceived 事件是在 createRoom 事件的回调函数中定义的，但它们仍然在 webSocket 对象的同一个实例上运行。因此，您最终会得到一个类似于以下内容的 listeners 对象：

```
webSocket.listeners = {
    "createRoom: [ function ],
    "main/roomJoin: [ function ],
    "chat/messageReceived": [ function ]
} 
```

结合上面第 1 点的信息，webSocket.removeAllListeners('createRoom') 将产生以下结果：

```
webSocket.listeners = {
    "main/roomJoin: [ function ],
    "chat/messageReceived": [ function ]
} 
```

仅仅因为这两个事件是在另一个事件的回调中定义的，并不意味着它们无论如何都与那个“父”事件相关联。正如您现在所知道的，删除这些侦听器的唯一方法是显式删除它们：

```
$('#exitButton').on('click', function() {
    // Removes
    websocket.removeAllListeners('createRoom');
    websocket.removeAllListeners('main/roomJoin');
    websocket.removeAllListeners('chat/messageReceived');
}); 
```

# tfs - 是否可以通过已经合并的变更集进行合并？

> ID：12203269
> 
> 赞同：6
> 
> 时间：2012-08-30T18:32:24.387
> 
> 标签：tfs

我的测试和开发分支不同步。我想要的变更集已经被合并了。我想简单地获取 Development 子目录中的内容并将其直接推入 Test 中，覆盖任何测试。这可能吗？

例如

`$\dev\blah\subdirectory => $\test\blah\subdirectory`

我知道我可以获取我想要的每个文件并从 Dev => Test 手动复制然后签入。有 10 个文件，所以我不想那样做。TFS 是否提供任何方法来完成此任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T22:13:47.400

从 Visual Studio 命令提示符将目录更改为要在其中运行合并的工作区，然后运行“tf merge sourcebranch targetbranch /r /force”。这将忽略合并历史并复制您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:53:15.577

我认为你可以在 VS2012 中做到这一点。不确定vs2010。只需单击某个文件夹并右键单击以查看弹出菜单并选择合并。

它会给你一个弹出窗口，让你选择目标文件夹。

当你合并的时候，在VS2012中会让你选择是要覆盖还是手动合并或者自动合并。在 VS2010 中，它只会为你合并。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T13:12:13.307

只需从源分支合并到目标分支。您可以通过转到源代码管理并右键单击源分支来执行此操作，然后选择“合并”。这将打开一个新窗口，然后合并所有更改，选择您的目标分支，就是这样。您还可以在单​​个项目的更改集之间合并。

# php - 轮询仅插入 1 个最后插入的记录

> ID：12203271
> 
> 赞同：0
> 
> 时间：2012-08-30T18:32:25.720
> 
> 标签：php, mysql, polling

我一直在我的网站上建立一个投票功能来获取用户帖子。在它工作的同时，我还有一些事情要做。仅抓取朋友的帖子并插入自上次插入 id 以来朋友的所有消息。

我需要我的代码来选择比最后插入数据库的条目更多的内容。我需要它来要求数据库选择从最后插入的 id 中插入的每个 id，我只在提要 atm 中显示 1 个，我知道这一点，因为我从另一个帐户发布了两个帖子，它只显示了最后一个结果。

我该如何纠正这个问题？不……我的网站还没有上线，我还没有保护我的原始数据。:) 我很快就会在我的整个网站上做一些事情。

```
 <?php 

    $last = isset($_GET['old_msg_id']) ? $_GET['old_msg_id'] : 0;

   $result = mysqli_query($mysqli,"SELECT streamitem_id FROM streamdata");
while($row = mysqli_fetch_array($result))
    {
    $current = $row['streamitem_id']; 
    }

    while( $current <= $last) {
    usleep(1000);
    clearstatcache();
    $current = $row['streamitem_id'];
    }

    $json = array();
    $check = "SELECT streamitem_id, streamitem_timestamp, streamitem_content, streamitem_creator FROM streamdata WHERE streamitem_id=".$current." AND streamitem_type_id=1 ORDER BY streamitem_id DESC LIMIT 5";
    $check1 = mysqli_query($mysqli,$check);
    $resultArr = mysqli_fetch_array($check1);
    $json['streamitem_id'] = $resultArr['streamitem_id'];
    $json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);
    $json['streamitem_content'] = $resultArr['streamitem_content'];
    $json['streamitem_creator'] = $resultArr['streamitem_creator'];
    mysqli_free_result($check1);

    $check = "
    SELECT * FROM users u 
    INNER JOIN streamdata s ON
    (s.streamitem_creator = u.id AND s.streamitem_id = {$current})";
    $check1 = mysqli_query($mysqli,$check);
    $resultArr = mysqli_fetch_array($check1);
    $json['username'] = $resultArr['username'];
    $json['id'] = $resultArr['id'];
    $json['first'] = $resultArr['first'];
    $json['middle'] = $resultArr['middle'];
    $json['last'] = $resultArr['last'];
    mysqli_free_result($check1);

    echo json_encode($json);
    ?> 
```

我必须使用`mysqli_affected_rows()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:00:10.870

我的意思是这样的。

初始 SQL 语句将找到您需要的所有记录；然后您只需将它们处理到您的 json 数组中，并在完成后返回。

（我没有测试过这段代码，我的 mysqli 不是最好的，但我希望你至少能看到我在做什么）

我还将所有 SQL 调用合并为一个。

```
$last = isset($_GET['old_msg_id']) ? $_GET['old_msg_id'] : 0;

$stmt = mysqli_prepare($mysqli,"SELECT * FROM streamdata s INNER JOIN users u ON s.streamitem_creator = u.id WHERE streamitem_id >= ? "); 
$stmt->bind_param("s", $last);
$stmt->execute();

$json = array();
$count = 0;
while ($row = $stmt->fetch_array()) {
    $json[$count]['streamitem_id'] = $row['streamitem_id'];
    $json[$count]['streamitem_timestamp'] = Agotime($row['streamitem_timestamp']);
    $json[$count]['streamitem_content'] = $row['streamitem_content'];
    $json[$count]['streamitem_creator'] = $row['streamitem_creator'];

    $json[$count]['username'] = $row['username'];
    $json[$count]['id'] = $row['id'];
    $json[$count]['first'] = $row['first'];
    $json[$count]['middle'] = $row['middle'];
    $json[$count]['last'] = $row['last'];
}

echo json_encode($json); 
```

# javascript - jQuery 动画展开 div

> ID：12203272
> 
> 赞同：1
> 
> 时间：2012-08-30T18:32:26.440
> 
> 标签：javascript, jquery, jquery-animate

我正在尝试提高我的 jQuery 技能，因此我编写了一个自己的灯箱。

但有一件事让我发疯。我怎样才能像其他灯箱一样为 div 设置动画。从中间开始，向两边展开。我很无奈。

jQuery提供的特殊缓动属性有可能吗？

[这是要检查的jsFiddle。](http://jsfiddle.net/x5A42/5)

```
$('#clickme').click(function() {
  $('#book').animate({
    width: 'toggle',
    height: 'toggle'
  }, {
    duration: 5000,
    specialEasing: {
      width: 'linear',
      height: 'easeOutBounce'
    },
    complete: function() {
      $(this).after('<div>Animation complete.</div>');
    }
  });
}); 
```

我希望有一个人可以帮助我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:07:03.543

您还可以为 div 的顶部和左侧位置设置动画，以提供相对于元素中心调整大小的效果。

**[jsFiddle 示例](http://jsfiddle.net/j08691/x5A42/14/)**

```
$('#clickme').click(function() {
    $('#lightbox').fadeIn();
    $('#lightbox').animate({
        width: 500,
        height: 250,
        top:5,
        left:10
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T05:16:46.273

替换这个，jquery。也会关闭你打开的 div。感谢“j08691”的帮助。

`$('#clickme').click(function() { $('#lightbox').fadeIn(); $('#lightbox').animate({ width: 500, height: 250, top:5, left:10 });});` `$('#lightbox').click(function() { $('#lightbox').animate({ width: 0, height: 0, top:0, left:0, }).fadeOut(); });`

# delphi - Delphi FormKeyDown ALT 键卡住

> ID：12203274
> 
> 赞同：2
> 
> 时间：2012-08-30T18:32:45.980
> 
> 标签：delphi, winapi, delphi-7, vcl, keylogger

我有一个带有 2 个复选框的表格（1 个用于持有`CTRL`- 1 个用于持有`ALT`）。两个 CheckBoxes 都被禁用，因此`KeyDown Event`表单的正常工作。如果按下/键，还有一个`TTimer`每 10 毫秒同步一次。`ALT``CTRL`

我的`timer`：

```
procedure TForm1.Timer1Timer(Sender: TObject);
begin
 CheckBox1.Checked := ALTDOWN;  // ALTDOWN IS GLOBAL
 CheckBox2.Checked := CTRLDOWN; // CTRLDOWN IS GLOBAL
end; 
```

我的`KeyDown Event`：

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
Shift: TShiftState);
begin
 if Key = VK_MENU then begin
  ALTDOWN := TRUE;
  exit;
 end;
 if Key = VK_CONTROL then begin
  CTRLDOWN := TRUE;
  exit;
 end;
end; 
```

我的`KeyUP Event`：

```
procedure TForm1.FormKeyUp(Sender: TObject; var Key: Word;
Shift: TShiftState);
begin
 if Key = VK_MENU then begin
  ALTDOWN := FALSE;
  exit;
 end;
 if Key = VK_CONTROL then begin
  CTRLDOWN := FALSE;
  exit;
 end;
end; 
```

这对密钥没有任何问题`CTRL`。但是`ALT`键有时会卡住甚至根本不显示。当我只按下`ALT`键（没有任何其他组合键）时会发生这种情况。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:37:36.557

如果您打算以这种方式运行计时器，那么您不妨致电[`GetAsyncKeyState`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)

```
procedure TForm1.Timer1Timer(Sender: TObject);
begin
 CheckBox1.Checked := GetAsyncKeyState(VK_MENU)<0;
 CheckBox2.Checked := GetAsyncKeyState(VK_CONTROL)<0;
end; 
```

只需摆脱您的`OnKeyDown`和`OnKeyUp`事件处理程序。当系统已经这样做时，您尝试跟踪密钥是向上还是向下真的没有意义。

您的计时器间隔很短。无论如何，系统不会那么频繁地触发它们。如果我没记错的话，定时器的分辨率通常在 50 毫秒左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:32:48.927

当您想了解其内部方式时，请阅读 microsoft 文档（KeyUp 就是这样） [http://msdn.microsoft.com/en-us/library/windows/desktop/ms646281.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646281.aspx)

您可以看到释放 Alt 键是系统事件，不会出现在 WM_KeyUp 中。同时添加对 WM_SYSCOMMAND、WM_SYSKEYUP 和 WM_SYSKEYDOWN 的监控。

# c# - 使用 C# 将 avi 视频文件转换为 mpeg 格式

> ID：12203279
> 
> 赞同：0
> 
> 时间：2012-08-30T18:33:07.607
> 
> 标签：c#, .net, converter, multimedia

我正在构建一个 .NET winforms 应用程序，我需要将 avi 视频格式转换为 mpeg 视频格式。我怎样才能做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:35:41.053

您可以使用平台`FFmpeg`来转换您的文件

链接：[http ://www.ffmpeg.org/](http://www.ffmpeg.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:24:43.757

我们在开发应用程序时面临的主要问题之一是将不同的视频格式（AVI、OGG、MP4 等）转换为 DVD 格式的能力。我们最终使用了一个名为leadtools 的第三方工具包。我认为他们有 mpeg DirectShow 过滤器，可以帮助您满足您的要求。您可以在此处找到更多信息：http: [//leadtools.com/sdk/multimedia/conversion.htm](http://leadtools.com/sdk/multimedia/conversion.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:36:03.907

您可以使用从 c# 调用的第三方组件....用于转换的最常用组件是[FFmpeg](http://www.ffmpeg.org/)。

`FFmpeg`包括 libavcodec - 领先的音频/视频编解码器库。

# javascript - 以这种格式放置数组名称：url

> ID：12203284
> 
> 赞同：3
> 
> 时间：2012-08-30T18:33:29.517
> 
> 标签：javascript, jquery

我不知道数组的术语，但是我有一个字符串 url 列表，例如`"http://dom/image1.jpg","http://dom/image2.jpg"`我从 api 中提取的（api 只返回链接）。我正在使用的插件要求数组的格式为

```
{image:"http://dom/image1.jpg"},{image:"http://dom/image1.jpg"}. 
```

如何从字符串列表转到名称为：在 url 前面的列表

链接到插件 [http://www.buildinternet.com/project/supersized/docs.html#slides](http://www.buildinternet.com/project/supersized/docs.html#slides)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T18:35:25.517

```
 var newArray = array.map(function(item){   
      return { image: item }  /* as key-value pair */
 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T18:35:34.400

您已经拥有的数组中的每个元素都是一个字符串，并且您希望将这些字符串包装在具有`image`属性的对象中。

```
for(var i = 0; i < arr.length; i++) {
  arr[i] = { image: arr[i] };  // wrap it in an object
} 
```

# c# - 当 ChildRow 没有数据时，从 XtraGrid GridView 的 MasterRow 中删除向下钻取加号图标 (+)

> ID：12203287
> 
> 赞同：6
> 
> 时间：2012-08-30T18:33:36.643
> 
> 标签：c#, gridview, devexpress, xtragrid

这与 DevExpess XtraGrid 的 GridView 有关。

我需要`drilldown plus icon (+)`从没有任何数据的 GridView 中的任何 MasterRow 中删除它的 ChildRow。

目前，我的 GridView 中的所有行 (MasterRows) 都显示`drilldown plus icon (+)`. 单击时`drilldown plus icon (+)`，将显示 ChildRow 以及相应的数据。但是，如果 ChildRow 没有数据，则不会显示（展开） ChildRow。`drilldown plus icon (+)`如果 ChildRow 中没有数据，我需要使其不可见，以便用户看不到它。

我有一个函数检查数据是否可用于 ChildRow，然后允许 ChildRow 显示（扩展）或不显示。

我用过**`GridView.OptionsView.ShowDetailButtons`**，但这隐藏了`drilldown plus icons (+)`所有行。这对我不起作用，因为我只需要在没有 ChildRow 数据的情况下隐藏它。

这是我到目前为止的代码：

```
private void gridView1_MasterRowGetRelationCount(object sender, MasterRowGetRelationCountEventArgs e)
{
    e.RelationCount = 1;
}

private void gridView1_MasterRowEmpty(object sender, MasterRowEmptyEventArgs e)
{
    e.IsEmpty = IsRelationEmpty(e.RowHandle, e.RelationIndex);
}

bool IsRelationEmpty(int rowHandleX, int relationIndex)
{
    Tuple<string, double, double> row = (Tuple<string, double, double>)gridView1.GetRow(rowHandleX);
    return rowHandleX == DevExpress.XtraGrid.GridControl.InvalidRowHandle || _tfs._dataDictionary[row.Item1.ToString()].Item2.Count == 0;
}

private void gridView1_MasterRowGetChildList(object sender, MasterRowGetChildListEventArgs e)
{
    if (IsRelationEmpty(e.RowHandle, e.RelationIndex))
    {
        return;
    }

    Tuple<string, double, double> row = (Tuple<string, double, double>)gridView1.GetRow(e.RowHandle);
    e.ChildList = _tfs._dataDictionary[row.Item1.ToString()].Item2.ToList(); // _tfs.DictionaryToList();
}

private void gridView1_MasterRowGetRelationName(object sender, MasterRowGetRelationNameEventArgs e)
{
    e.RelationName = "Work Items with no Size Estimate:";
} 
```

任何方向或建议将不胜感激。

提前致谢，

马旺 (^_^)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T14:32:17.093

我建议你关注这个 DevExpress 线程 - [How to hide disabled expand/collapse buttons for master rows without detail records](http://www.devexpress.com/Support/Center/KB/p/A899.aspx)

> XtraGrid 不提供隐藏空详细信息的主从展开按钮的选项。***您可以通过CustomDrawCell***事件解决此限制 。

这是必要的代码：

```
private void gridView1_CustomDrawCell(object sender, DevExpress.XtraGrid.Views.Base.RowCellCustomDrawEventArgs e) {

    GridView view = sender as GridView;
    if(e.Column.VisibleIndex == 0 && view.IsMasterRowEmpty(e.RowHandle))
        (e.Cell as GridCellInfo).CellButtonRect = Rectangle.Empty;
    }
} 
```

希望这有帮助..

# python - 如何使用 django 编写一个显示从 python 方法返回的列表的视图页面

> ID：12203289
> 
> 赞同：1
> 
> 时间：2012-08-30T18:33:42.037
> 
> 标签：python, html, django, django-views

我的views.py 文件中有这个方法，它打印从方法rangeOfList() 返回的列表。
我想在将浏览器重定向到（result.html）的html页面上显示它。我该怎么写？

```
def contact(request):
if request.method == 'POST': # If the form has been submitted...
    form = ContactForm(request.POST) # A form bound to the POST data

    if form.is_valid():
        form = form.cleaned_data
        parameters = organize(form)
        listToPrint = rangeOfList(parameters['money'][2], parameters['money'][4], 'total_money')

    return HttpResponseRedirect('result') # Redirect after POST
else:
    form = ContactForm() # An unbound form

return render(request, 'crunchApp/contact.html', {
    'form': form,
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:02:08.323

您应该将其添加到[会话中](https://docs.djangoproject.com/en/dev/topics/http/sessions/)：

```
request.session['the_list'] = listToPrint
return redirect('result/') 
```

确保您已经激活了[请求模板上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)，然后在您的模板中：

```
{% for i in request.session.the_list %}
   {{ i }}
{% endfor %} 
```

# java - 未在 callable.call 中关闭的 BufferedReader 会发生什么情况？

> ID：12203291
> 
> 赞同：9
> 
> 时间：2012-08-30T18:33:49.520
> 
> 标签：java, eclipse, inner-classes, bufferedreader, callable

我有三个问题。

为了解释，我正在审查某人的代码，并注意到`BufferedReader`s 有时没有被关闭。通常，Eclipse 会发出警告，指出这是一个潜在的内存泄漏（我修复了它）。但是，在 Callable 内部类中，没有警告。

```
class outerClass {
    ...
    public void someMethod() {
        Future<Integer> future = outputThreadPool.submit(new innerClass(this.myProcess.getInputStream(), threadName));
        ...
    }

    class innerClass implements Callable<Integer> {
        private final InputStream stream;
        private final String prepend;

        innerClass(InputStream stream, String prepend) {
            this.stream = stream;
            this.prepend = prepend;
        }

        @Override
        public Integer call() {
            BufferedReader stdOut = new BufferedReader(new InputStreamReader(stream));
            String output = null;
            try {
                while ((output = stdOut.readLine()) != null) {
                    log.info("[" + prepend + "] " + output);
                }

            } catch (IOException ignore) {
            // I have no idea why we're ignoring this... :-|        
            }
            return 0;   
        }
    }
} 
```

编写代码的人都是经验丰富的 Java 开发人员，所以我的第一个想法是这是故意的……但可能是他们在编写代码时很着急而忽略了它。

**我的问题是：**

1.  为什么 Eclipse 没有突出显示这一点（可以通过以下问题的答案来回答）？

2.  如果它在 call() 方法中关闭，可能发生的最坏情况是什么？（我想不出一个很好的理由......我一直在寻找一段时间......但也许是故意不关闭 BufferedReader）

3.  如果 BufferedReader***没有***在内部类中关闭，可能发生的最坏情况是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T18:50:38.503

我会说，因为他们是`BufferedReader`围绕给定创建一个`InputStream`，所以代码是安全的，不调用`close()`. 调用的代码`close()`应该始终是创建流并使用 try/finally 完成的代码。

```
public static void read(String str) throws IOException {
    FileInputStream stream = null
    try {
        stream = new FileInputStream(str);
        readStreamToConsole(stream);
    } finally {
        if (stream != null)
            stream.close();
    }
}

private static void readStreamToConsole(InputStream stream) {
    BufferedReader stdOut = new BufferedReader(new InputStreamReader(stream));
    String output = null;
    while ((output = stdOut.readLine()) != null)
        System.out.println(output);
} 
```

另一个注意事项：您的代码似乎正在记录其他进程的输出。无论如何，您可能无法关闭流。如果不自己进行测试，我不确定如果您关闭来自另一个进程的流会发生什么。

哦，这`IOException`不太可能发生，因为流来自另一个进程。除非发生一些不可恢复的错误，否则这不太可能发生。不过，以某种方式记录异常仍然不是一个坏主意。

* * *

**编辑以解决您对混合答案的评论：**

让我们使用一个输出流，[`BufferedWriter`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)这次作为一个例子：

```
private static final String NEWLINE = System.getProperty("line.separator");

public static void main(String[] args) throws IOException {
    String file = "foo/bar.txt";
    FileOutputStream stream = null;
    try {
        stream = new FileOutputStream(file);
        writeLine(stream, "Line 1");
        writeLine(stream, "Line 2");
    } finally {
        if (stream != null)
            stream.close();
    }
}

private static void writeLine(OutputStream stream, String line) throws IOException {
    BufferedWriter writer = new BufferedWriter(new InputStreamWriter(stream));
    writer.write(line + NEWLINE);
} 
```

这行得通。writeLine 方法用作创建`writer`和实际写入`line`文件的委托。当然，这个逻辑可能更复杂一些，比如把一个对象变成 a`String`并写出来。这也使该`main`方法更易于阅读。

现在，如果我们关闭 BufferedWriter 会怎样？

```
private static void writeLine(OutputStream stream, String line) throws IOException {
    BufferedWriter writer = null;
    try {
        writer = new BufferedWriter(new InputStreamWriter(stream));
        writer.write(line + NEWLINE);
    } finally {
        if (writer != null)
            writer.close();
    }
} 
```

尝试用它运行它，每次第二次`writeLine`调用都会失败。始终在创建流的位置而不是通过的位置关闭流是一种很好的做法。最初可能没问题，但稍后尝试更改该代码可能会导致错误。如果我开始时只`writeLine`使用错误的方法进行了 1 次调用，而其他人想要添加第二次调用，他们将不得不重构代码以便`writeLine`无论如何都不会关闭流。获得近距离的快乐可能会导致头痛。

另请注意，从技术上讲，这`BufferedWriter`不是系统资源的实际句柄，`FileOutputStream`而是，所以无论如何您都应该关闭实际资源。

所以，经验法则：只在你创建它们的地方关闭你的流，并且总是在 try/finally 块（或 Java 7 很棒的[try/resource 块](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，它为你关闭）中进行创建和关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:53:02.820

`BufferedReader`在这种情况下，您可能不想关闭。传递给构造函数的`InputStream`是可能与系统资源相关联的对象。the`BufferedReader`和 the`InputStreamReader`只是围绕它的包装。关闭`BufferedReader`也会关闭`InputStream`，这可能不是调用者想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:38:03.550

BuffereddReader[关闭（）](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html#close%28%29)

> 关闭此流并释放与其关联的任何系统资源。如果流已经关闭，则调用此方法无效。

因此，如果您不关闭（），系统资源可能仍与阅读器相关联，这可能会导致内存泄漏。

为什么 eclipse 不高亮：如果忽略调用 close() 不是编译时错误，所以 eclipse 不高亮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T18:51:31.593

无论您在哪里打开流，都应该在 finally 块中关闭它，并且测试流也是一个好习惯`null`，因为如果文件不存在，流将是`null`，异常将被抛出（`FileNotFoundException`）但 finally博克完成了。即调用方法的内容应该是：

```
 BufferedReader stdOut = null;
   String output = null;
        try {
            stdOut = new BufferedReader(new InputStreamReader(stream));
            while ((output = stdOut.readLine()) != null) {
                log.info("[" + prepend + "] " + output);
            }
        } catch (FileNotFoundException ex) {
            log.warn("Unable to open nonexisten file " + whichOne);  
        } catch (IOException ex) {
            log.warn("Unable to read from stream");  
        } finally {
            if (stdOut != null) {
                try {
                   stdOut.close();
                } catch (IOException e) {
                    log.warn("Unable to close the stream");
                }
            }
        }
        return 0; 
```

或者，如果您被允许使用 Java 7，您可以`AutoCloseable`为此目的使用接口和新语言结构的优势。请参阅[http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html](http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T18:56:59.093

1.  不突出显示，这是真的，因为可以在调用方法之外的其他地方关闭流。

2.  如果它在调用方法中关闭，其他线程可能正在使用它。

3.  没有`BufferdRreader`什么，但如果你失去对流的引用并且无法关闭它，这会导致内存泄漏。

# python - MAC OSX的ttk的tkinter默认颜色样式是什么

> ID：12203293
> 
> 赞同：0
> 
> 时间：2012-08-30T18:34:01.207
> 
> 标签：python, colors, tkinter, ttk

我正在寻找 ttk 帧的确切颜色名称或动态检索该信息的方法。我的问题是 tkinter

```
root = tk() 
```

和

```
button = ttk.Button() 
```

给我两种不同的小部件背景颜色。**当我在ubuntu linux**上开发 GUI 时这**不是**问题，但是当我尝试在**MAC OSX 10.8.1上运行代码时颜色不同**

 ****我找不到任何可以为我提供该信息的调用/属性，并且它可能有很多不同的颜色（白色、浅白色、贝壳白色等......）

有人知道这些默认颜色名称吗？

我正在使用 python 2.7.2、tkinter、ttk、MAC 10.8.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:27:49.873

我不知道如何获得这些信息。问题是，背景可能没有单一颜色（可能是轻微的渐变或图案）。如果问题是您的应用程序的背景看起来不正确，那么有一个简单的技巧：在整个根窗口上放置一个 ttk.Frame() 小部件，然后像往常一样编写代码。只要框架的堆叠级别较低，所有其他小部件都会出现在其上方。

我`place`为此使用，将 x 和 y 设为 0，将 relwidth 和 relheight 设为 1.0。使用`place`保证会影响所有其他小部件的`pack`使用`grid`。****

# php - 从 Javascript 函数调用 PHP 函数

> ID：12203294
> 
> 赞同：-5
> 
> 时间：2012-08-30T18:34:02.373
> 
> 标签：php, javascript

我有一个在 PHP 页面上的正文加载时调用的函数。

```
<script>
    function testConnection()
    {
        var sDataLoader = readCookie('DataLoader');
        <?php connTest(sDataLoader); ?>     
    }
</script> 
```

connTest() 是一个 php 函数，它接受 javascript 变量并执行一些操作。这一切看起来都是错误的，但它可以在我的一台 LAMP 服务器上运行，并且在另一台服务器上完全崩溃（如我所料）。

> 未知错误类型：[8] 使用未定义常量 sDataLoader-假定为“sDataloader”

服务器的配置非常不同，所以这显然会产生巨大的差异，但我只是不明白它为什么/如何工作，所以我不知道如何让它在两台服务器上工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:40:44.697

当`<script>`标签在客户端执行时，代码的 PHP 部分（在服务器上运行）已完全完成。鳍！消失了，失去了记忆，再也见不到或听到了！

除非您放弃所有线性时间的概念，否则调用`connTest`和传递 Javascript 变量的`sDataLoader`概念是没有意义的。

如果要在服务器上执行更多代码，则需要发出*新*的HTTP 请求并发送相关数据。有很多方法可以做到这一点，包括 AJAX、IFrame、回发等。

至于为什么这在另一台服务器上“有效”，显而易见的答案是它没有。有可能只是碰巧有一个名为的服务器端变量`sDataLoader`做了一些可能与*working*混淆的事情。

# python - 将通过网络收到的 python 字符串（FIX）解释为二进制

> ID：12203295
> 
> 赞同：2
> 
> 时间：2012-08-30T18:34:12.520
> 
> 标签：python, twisted, fix-protocol

我正在通过套接字连接发送修复消息并在 python 客户端中接收。我知道有一个 SOH 分隔数据中的每个名称=值对。但是打印时的数据（作为字符串）不显示 SOH。出现问题是因为我希望能够显示“|” 或者我无法在正则表达式中判断各个字段的边界是什么。我在收到的字符串上查看了 decode('hex'), decode('uu') ，但没有取得多大成功。此外，打包/解包要求您提供格式字符串（对于每种类型的修复，我都必须这样做）。

我正在为客户端使用 Twisted ClientFactory。

有什么建议么？

后续问题：我使用 repr 并将其传递给函数以将 '\x01' 替换为 '|'。现在当我直接传入从网络收到的数据时，替换似乎没有任何影响。但是，当我复制输出并将其作为字符串文字传递给同一个函数时。它的行为符合预期（将 '\x01' 替换为 '|'）。我还尝试使用 re.sub，结果完全相同（作为字符串文字传入时有效，但直接从网络传入时无效）。我还将网络中的值打印到文件中，并使用 vi hex editor 与字符串文字进行比较。它没有显示任何差异。

一些附加信息：当我打印文件中的值并将其读回时，我无法在“\x01”上使用查找，这意味着替换也不起作用（它不起作用）。当我尝试将其转换为字节数组时，当我遍历字节数组时，似乎每个 '\' 、 'x' 、 '0' 、 '1' 都被解释为不同的字节。这很奇怪。'\x01' 要么是字符串，要么不是字符串，而是十六进制。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:20:46.683

使用 '\x01' 替换似乎适用于通过网络传入的数据（而不是 repr 的输出）。我不确定是什么原因，但这符合我的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:33:22.350

按照 Ignacio Vazquez-Abrams 的建议打印 repr 可以解决部分问题。

# c# - 如何在 ASP .net 网站中监听设备事件（实时）

> ID：12203296
> 
> 赞同：0
> 
> 时间：2012-08-30T18:34:12.527
> 
> 标签：c#, asp.net, web-services, windows-applications

有什么方法可以让我在我的**ASP .net 网站上**收听连接到*客户端计算机*的设备*（语音麦克，一种 dicta 电话）触发的***事件**？

 ****我需要收听设备的*实时事件**（Speech mike、Kind of Dictaphone）*并且事件触发的频率非常高。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:40:37.150

不，asp.net 在远程网络服务器上运行，它无法监听客户端的硬件事件。您甚至无法访问用户的文件和文件夹，因为这会带来安全风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:45:56.370

浏览器不具备监听设备自定义事件的本机功能。必须在客户端加载软件才能将事件报告给 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:59:50.993

您无法从 Web 应用程序中监听机器事件，因为它在服务器上运行。您应该尝试使用某种插件来完成这项工作，例如 Silverlight 应用程序！****

# c# - 如何从没有任何内容的 HwndSource 拦截 WndProc 消息

> ID：12203298
> 
> 赞同：1
> 
> 时间：2012-08-30T18:34:21.303
> 
> 标签：c#, .net, wpf, interop, hwnd

我正在尝试与使用 an`HWND`将消息传递回调用者的本机库进行通信，如下所示：

```
private void Example()
{
    using (
        var hwnd = new HwndSource(
            new HwndSourceParameters("I sense a disturbance in the force...") {HwndSourceHook = WndProc}
            )
        )
    {
        //send hwnd.handle to native library
        while (true) { }
    }
}

private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool ishandled)
{
    ishandled = false;
    Console.WriteLine("Intercepted message: 0x{0:X}", msg);
    return IntPtr.Zero;
} 
```

*即使省略了对本机库的调用*，我也只会收到以下消息（按顺序）：

1.  0x0001:`WM_CREATE`
2.  0x0018:`WM_SHOWWINDOW`
3.  0x0046:`WM_WINDOWPOSCHANGING`
4.  0x0046:`WM_WINDOWPOSCHANGING`
5.  0x001C:`WM_ACTIVATEAPP`
6.  0x0086:`WM_NCACTIVATE`
7.  0x007F:`WM_GETICON`
8.  0x007F:`WM_GETICON`
9.  0x007F:`WM_GETICON`
10.  0x0006:`WM_ACTIVATE`
11.  0x0281:`WM_IME_SETCONTEXT`
12.  0x0282:`WM_IME_NOTIFY`
13.  0x0007:`WM_SETFOCUS`
14.  0x0085：`WM_NCPAINT`
15.  0x0014：`WM_ERASEBKGND`
16.  0x0047:`WM_WINDOWPOSCHANGED`
17.  0x0083:`WM_NCCALCSIZE`
18.  0x0085：`WM_NCPAINT`
19.  0x0014：`WM_ERASEBKGND`
20.  0x0005：`WM_SIZE`
21.  0x0003:`WM_MOVE`
22.  0x000D：`WM_GETTEXT`

在此之后，我可以拖动与`HwndSource`周围相对应的窗口，但无法调整大小或关闭它。此外，操作系统声称此窗口没有响应。

**为什么这个窗口停止响应，我怎样才能继续拦截消息？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:02:11.153

我认为当您尝试从 Windows 队列中检索下一条消息时，它会冻结等待来自`WndProc`.

[尝试像在另一个问题](https://stackoverflow.com/questions/8491460/application-addmessagefilter-how-to-read-exactly-what-keys-were-pushed)`Application.AddMessageFilter`中所做的那样拦截消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:24:53.607

正如@HansPassant 和@HassanBoutougha 都指出的那样，问题在于以下代码段：

`while (true) { }`

虽然这看起来像是在无辜地让应用程序保持活动状态，但它真正在做的是阻止调度程序处理消息。我看到的消息是因为它们是直接从构造函数执行的线程中调用`Example()`的`HwndSource`。构建后，应用程序进入循环并绕圈运行。不幸的是，这是假设正在处理消息的线程！

本质上，这里正确的解决方案是告诉调度程序将当前调用堆栈放在次要位置并处理事件，直到我们告诉它停止。

```
DipatcherFrame frame = new DispatcherFrame();
Dispatcher.PushFrame(frame); 
```

本质上，对此的调用`Dispatcher.PushFrame`告诉调度程序暂停执行并继续收听消息。在未来的某个时候，如果您决定要从离开的地方恢复执行，只需执行以下操作：

```
frame.Continue = false; 
```

就是这样！调用`Dispatcher.PushFrame`现在将返回并恢复执行

~~Kent Boggart 在这里有一个很好的例子：http://kentb.blogspot.ca/2008/04/dispatcher-frames.html[不幸](http://kentb.blogspot.ca/2008/04/dispatcher-frames.html)~~ 的是，Kent 的博客不再可用，但是可以在[此处](http://webcache.googleusercontent.com/search?q=cache:kzrAKCwlqcUJ:kentb.blogspot.com/2008/04/dispatcher-frames.html+&cd=9&hl=en&ct=clnk)找到来自 Google 缓存的页面快照。

# element - openJPA 单列中的直接关系

> ID：12203306
> 
> 赞同：0
> 
> 时间：2012-08-30T18:34:56.093
> 
> 标签：element, openjpa

我有一个非常愚蠢的问题。

是否有可能有一个直接关系，只从子关系中拉回一列......例如......

```
@Table(name="AUTH")
public class Magazine {

    @Column(length=9)
    @Id private String isbn;
    @Id private String title;

    @OneToOne
    @JoinColumn(name="COVER_ID" referencedColumnName="ID")
    private string coverArticle; //<--- I want this to just have the Article Name... How can this be done

    ...
} 
```

请参阅上面的 oneToone 注释。我希望它只包含文章名称的字符串......

```
@Table(name="ART")
public class Article {

    @Id private long id;

    @Id private String ArticleName;
} 
```

我知道你可以有一个 ElementCollection，你可以从另一个表中获取元素的集合，你如何将单个值返回到该元素中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:32:41.990

这可能不像您希望的那么简单，但是您可以通过在实体上定义 FetchGroup 来做到这一点。对于您上面给出的示例，您可以将其修改如下：

```
@FetchGroups({
    @FetchGroup(name="coverArticleNameOnly", attributes={
        @FetchAttribute(name="isbn"),
        @FetchAttribute(name="title"),
        @FetchAttribute(name="coverArticle"),
        ...
    })
})
@Table(name="AUTH")
public class Magazine {

    @Column(length=9)
    @Id private String isbn;
    @Id private String title;

    @OneToOne
    @JoinColumn(name="COVER_ID" referencedColumnName="ID")
    private string coverArticle;

    ...
}

@FetchGroups({
    @FetchGroup(name="coverArticleNameOnly", attributes={
        @FetchAttribute(name="articleName")
    })
})
@Table(name="ART")
public class Article {

    @Id private long id;

    @Id private String ArticleName;
} 
```

然后，在您检索杂志记录之前，请拨打以下电话：

```
getEntityManager().getFetchPlan().addFetchGroup("coverArticleNameOnly"); 
```

正如您在上面看到的，不幸的部分是您需要为您想要保留的 Magazine 类中的所有字段添加 fetch 属性到您的 fetch 组。

有关详细信息，请参阅[http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/ref_guide_fetch.html](http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/ref_guide_fetch.html)。

# asp.net-mvc-3 - 在动作段中使用字符串标识符的 MVC3 映射路由

> ID：12203307
> 
> 赞同：0
> 
> 时间：2012-08-30T18:35:02.117
> 
> 标签：asp.net-mvc-3, entity-framework, routing, asp.net-mvc-routing

我想使用一个非常简单的人类可读的 url 进行路由，如下所示：

我想这样路由： `/Controller/Title-Of-The-EF-Object`

我不想要`/Controller/Action/ABCDEF01-2345-6789-0ABC-DEF01234` 或 `/Controller/Action/Title-Of-The-EF-Object`。动作由路由处理，因此 url 应该只包含控制器和标识符字符串。

我的实体包含一个唯一的、经过净化的 UrlTitle 字符串作为属性：

```
public class Entity {
    [Key]
    public Guid ID { get; set; }

    //Example: "Title of the EF object"
    public string Title { get; set; }

    //Example: "Title-Of-The-EF-Object"
    public string UrlTitle { set; set; }
} 
```

当前路线映射：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            "Item",
            "{controller}/{UrlTitle}",
            new { controller = "{controller}", action = "Details" }
        ); 
```

问题是，在请求时`/Controller/Title-Of-The-EF-Object`，MVC 将其解释`Title-Of-The-EF-Object`为一个操作，因为 a）它是一个字符串，并且 b）它属于该段的位置，所以我不断收到 Resource Cannot Be Found。如果我使用实体的 Guid 而不是 UrlTitle，我可以让它工作，因为 MVC 会这样解释 Guid。

如何创建自定义路线图`{controller}/{id_string}`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:35:02.117

当我输入问题时，这发生在我身上。路线顺序错误。*0_0*

```
 routes.MapRoute(
        "Item",
        "{controller}/{UrlTitle}",
        new { controller = "{controller}", action = "Details" }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

# mysql - mysql将两列合并为时间戳

> ID：12203313
> 
> 赞同：0
> 
> 时间：2012-08-30T18:35:25.267
> 
> 标签：mysql

嗨，我有一个看起来像这样的 mysql 表：

```
date        time
2009-07-31  02:30
2009-07-31  02:45
2009-07-31  03:00 
```

' `date`' 列是一个`date`字段，而 ' `time`' 列是一个`text`字段。

我想，仅使用 mysql，将这些合并到第三列，' `datetime`'这是一个`timestamp`字段。

所以最终的结果应该是这样的：

```
date        time     datetime
2009-07-31  02:30    2009-07-31 02:30
2009-07-31  02:45    2009-07-31 02:45
2009-07-31  03:00    2009-07-31 03:00 
```

不知道该怎么做。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:40:32.653

简单的...

```
ALTER TABLE yourTable ADD COLUMN `datetime` timestamp;

UPDATE yourTable SET `datetime` = CONCAT(`date`, '  ', `time`); 
```

尽管我可能会添加保留关键字，例如`date`,`time`并且`datetime`不是好的列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:40:38.187

MySQL 确实有一些“松散类型”行为，因此您可以将它们合并为字符串，并将生成的字符串设置为日期时间列。

```
update `my_table` set `datetime`=concat(`date`, ' ', `time`); 
```

并非所有的反引号都是必需的，但用于澄清查询。

# c++ - 静态是 C++ 中的修饰符吗？

> ID：12203318
> 
> 赞同：3
> 
> 时间：2012-08-30T18:35:53.010
> 
> 标签：c++, standards, definition

我一直认为 C++ 中的“修饰符”是一种类型的形容词（非技术性的，我自己容易记住的定义）。严格来说，出于交流的目的，将“静态”称为修饰语是否合适？

编辑：为了清楚起见，我确实了解静态是什么以及做什么，我只是想从技术上了解如何在讨论中传达它是什么类型的符号/关键字/等。尽管我只是简单地搜索了一下，但该标准似乎并没有在其上钉上确切的标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:44:46.050

有**修饰符**、**类型限定符** 和**存储类**：

存储类：

*   汽车
*   登记
*   static <---------你在这里！（如果你问我的意见，它是在限定符和存储之间）
*   外部
*   可变的
*   线程本地<-----（我刚刚学到了这个：D Thx Loki Astari）

类型限定符：

*   常量
*   易挥发的
*   严格
*   __align <------- 不确定（它说 IBM）

修饰符类型：

*   签
*   未签名
*   长
*   短的
*   班级访问：公共
*   班级访问：私人
*   类访问：受保护

'mutator functions' 也被拦截为修饰符，但我不知道它是否合法。

再会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T18:41:18.797

我个人会使用这个术语：存储类说明符：

7.1.1 存储类说明符 [dcl.stc]

```
storage-class-specifier:
             register
             static
             thread_local
             extern
             mutable 
```

但在正常对话中，“修饰语”一词是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:38:26.223

`static`是一个对代码有影响的修饰符。因此，它是适当的沟通。

我知道的两个用途`static`是静态方法和本地数据文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:40:25.667

是的，它是一个修饰符——尽管它在应用于变量、函数、方法等时可能具有略微不同的含义。[阅读此处了解更多信息。](http://www.cprogramming.com/tutorial/statickeyword.html)

# c# - 在行更改之前提交 DataGridView 中的更改

> ID：12203320
> 
> 赞同：2
> 
> 时间：2012-08-30T18:36:00.997
> 
> 标签：c#, datagridview, dataset

我们正在使用绑定到数据库的 DataGridView。我们试图将其中一列计算为数据库中其他一些列的平均值。

1.  *   我们无法在数据库中创建计算列，也无法在数据集中成功创建计算列。如果有办法做到这一点，我们的问题就解决了。

例如：AvgSkill = Avg(Skill1, Skill2, Skill3)

1.  由于我们似乎无法创建计算列，因此我们尝试创建一个单元格事件处理程序，该处理程序将计算新平均值，然后使用新信息更新数据库，但是一旦我们更改单元格并尝试更新数据库，我们丢失了我们添加到该行的所有数据。

我们发现 dataGridView 仅在您离开该行时更新绑定的数据源，因此当我们尝试进行更新时，它会删除该行中输入的任何内容。

在我们离开该行之前，有没有办法强制 datagridview 在我们的事件处理程序中更新绑定的数据源？更新 tableadapter 似乎没有这样做。

在此先感谢您的帮助:)

-多米尼克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T20:41:20.993

我认为您想在单元格更改事件处理程序中执行以下操作：

```
 private void dgvPlayers_CellValidated(object sender, DataGridViewCellEventArgs e)
    {
         this.Validate();
    } 
```

每次更改单元格时强制验证 DataGridView。您可以通过检查 e.ColumnIndex 将此操作限制为特定列。您还可以包含同时进行计算所需的任何代码。

;)

# django - 通过电子邮件将 url 发送到私人页面（使用 django？）

> ID：12203324
> 
> 赞同：2
> 
> 时间：2012-08-30T18:36:03.063
> 
> 标签：django, http, email, url, https

假设您在网站 www.example.com 上有用户 A 输入的私人数据。

用户 A 想要让他的朋友 B 通过输入他的电子邮件地址并单击“共享”来访问数据。我们可以通过电子邮件发送的单击 URL 让用户 B 安全访问该页面吗？（假设我们可以安全地发送电子邮件）

如果我们发送一封带有链接 www.example.com/key=some_unique_secret_key 的电子邮件，那么当 B 点击它时，它将被记录在浏览器的历史记录中——这很糟糕。

如果我们发送一封带有链接 www.example.com/key=some_public_unique_key 的电子邮件以及电子邮件正文中的 PIN，我们会为用户 B 创建开销。他必须查找一些 PIN 并输入它才能访问资源.

如果我们发送一个 https 链接[https://www.example.com/key=some_unique_secret_key](https://www.example.com/key=some_unique_secret_key)，当用户 B 点击该 url 时创建一个会话，并将他重定向到没有密钥的 url。这可以在不使用密钥创建历史条目的情况下完成吗？

有没有办法安全地做到这一点而不使用户 B 访问页面变得麻烦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:19:20.460

您无法控制浏览器的行为。用户可以简单地为链接添加书签。因此，侵入性最小的方法是给唯一密钥一个时间限制。限制后，密钥无效，链接可以简单地重定向到带有适当通知的页面。

您还选择通知链接的创建者（用户 A）他们的过期链接仍在访问中，他们可以重新生成链接并将其发送给他们的朋友。

# php - WordPress - 使用自定义元显示所有用户，不包括某些用户 ID

> ID：12203327
> 
> 赞同：1
> 
> 时间：2012-08-30T18:36:09.117
> 
> 标签：php, wordpress

我正在尝试在页面上显示所有用户的列表。它需要显示他们的姓名、电子邮件地址、网站 URL 和几个自定义作者元字段。

我从以下查询开始：

```
<?php
//displays all users with their avatar and their posts (titles)
$blogusers = get_users_of_blog();
if ($blogusers) {
  foreach ($blogusers as $bloguser) {
    $user = get_userdata($bloguser->user_id);
    echo get_avatar( $user->ID, 46 );
    echo '<div><p>User ID ' . $user->ID . ' ' 
                            . $user->user_firstname . ' ' 
                            . $user->user_lastname . ' ' 
                            . $user->user_url . ' ' 
                            . $user->user_description 
             . '</p></div>';
    $args=array(
      'author' => $user->ID,
      'post_type' => 'post',
      'post_status' => 'publish',
      'posts_per_page' => -1,
      'caller_get_posts'=> 1
    );

  }
}
?> 
```

这显示了基本的用户信息，但没有自定义作者元字段。我将其调整为：

```
<?php
//displays all users with their avatar and their posts (titles)
$blogusers = get_users_of_blog();
if ($blogusers) {
  foreach ($blogusers as $bloguser) {
    $user = get_userdata($bloguser->user_id);
    echo get_avatar( $user->ID, 46 );
    echo '<div><p>User ID ' . $user->ID . ' ' 
                            . $user->user_firstname . ' ' 
                            . $user->user_lastname . ' ' 
                            . $user->user_url . ' ' 
                            . $user->user_description 
           . '</p>'; ?>
        <?php the_author_meta('position', $user);?>
        <?php the_author_meta('telephone');?>
        <?php the_author_meta('linkedin');?>
        <?php the_author_meta('vcard');?>
    <?php echo '</div>';?><?php 
    $args=array(
      'author' => $user->ID,
      'post_type' => 'post',
      'post_status' => 'publish',
      'posts_per_page' => -1,
      'caller_get_posts'=> 1
    );

  }
}
?> 
```

这适用于第一个用户，但对于第二个用户，它会显示第一个用户的自定义作者元数据。

我花了一个小时试图弄清楚如何进一步修改它以显示每个用户自己的自定义作者元数据，但是我无法让它工作。

如何修改？

此外，我需要能够排除某些用户 ID - 我尝试添加“排除”并输入我想要排除的 ID，但它不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:14:50.717

要使用函数获取特定用户的元数据，`the_author_meta()`您需要传递用户 ID，即

```
php the_author_meta('telephone' 25); // will get the telephone field's value of user with id 25 
```

所以在你的代码中你可以使用

```
<?php the_author_meta('position', $user->ID);?><?php the_author_meta('telephone', $user->ID);?><?php the_author_meta('linkedin', $user->ID);?><?php the_author_meta('vcard', $user->ID);?> 
```

要排除某些用户，您可以使用函数检查用户 ID `in_array`，即

```
$excluded_users = array(10, 11, 12); // User Ids to exclude
foreach ($blogusers as $bloguser) {
    if (!in_array($bloguser->user_id, $excluded_users))
    {
        $user = get_userdata($bloguser->user_id);
        echo get_avatar( $user->ID, 46 );
        //...
    }
} 
```

**参考：** [获取用户的博客](http://codex.wordpress.org/Function_Reference/get_users_of_blog)功能已被弃用，更多关于[the_author_meta](http://codex.wordpress.org/Function_Reference/the_author_meta)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:13:27.300

将`the_author_meta( $key);`始终检索有关作者的元信息。如果您想要任何用户的元数据，您需要使用`get_user_meta($user_id, $key, $single);`并`$user->ID`用作 id。

您可以在[Codex](http://codex.wordpress.org/Function_Reference/get_user_meta)中找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:16:11.237

尝试一下

```
echo get_the_author_meta('address', $user->ID); 
```

见网址

[https://wordpress.stackexchange.com/questions/10091/author-custom-fields-post-meta-the-code](https://wordpress.stackexchange.com/questions/10091/author-custom-fields-post-meta-the-code)

# c# - MVC Action Filters 使用传递给ActionResult 的参数？

> ID：12203329
> 
> 赞同：12
> 
> 时间：2012-08-30T18:36:30.243
> 
> 标签：c#, asp.net-mvc, action-filter, actionfilterattribute

我创建了一个没有问题的自定义[操作过滤器。](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

但我想修改动作过滤器以使用实际传递给我的方法的一些参数。

所以如果我有以下方法：

```
[HttpPost]
[MyAttribute]
public ActionResult ViewUserDetails(Guid userId)
{
     // Do something
} 
```

如何从内部访问 userId `MyAttribute`？有没有办法直接传进去？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T18:51:20.060

您可以尝试`OnActionExecuting`覆盖，您可以在其中访问操作参数。

```
public class MyAttribute: ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {    
        if (filterContext.ActionParameters.ContainsKey("userId"))
        {
            var userId = filterContext.ActionParameters["userId"] as Guid;
            if (userId != null)
            {
                // Really?! Great!            
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:45:40.087

您可以创建一个派生自`FilterAttribute`并实现的自定义属性`IAuthorizationFilter`。

您还应该能够`OnAuthorization`通过访问`filterContext.HttpContext.User.Identity`而不需要传递用户标识来获取方法中的用户信息。

# c++ - C/C++ 中的 C 字符串定义

> ID：12203339
> 
> 赞同：8
> 
> 时间：2012-08-30T18:37:01.393
> 
> 标签：c++, c

C / C ++中“C-string”一词的真正含义是什么？指向字符的指针？字符数组？或者也许是 const-pointer / const 字符数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T18:42:22.530

“C 字符串”是以 0（空字符）字节结尾的字符数组。数组，而不是任何指针，是*字符串*。因此，C 字符串的任何终端子数组也是 C 字符串。类型`char *`（或`const char *`等）的指针通常被认为是指向字符串的指针，但它们实际上是指向字符串元素的指针，通常被视为指向字符串*初始*元素的指针。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T18:38:20.380

常量或非常量字符数组，以尾随 0 字符结尾。所以以下都是C字符串：

```
char string_one[] = { 'H', 'e', 'l', 'l', 'o', 0 };
char string_two[] = "Hello"; // trailing 0 is automagically inserted by the compiler
const char *string_three = "Hello"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T18:54:46.760

根据标准（C11 §7.1.1），**字符串**是由第一个空字符终止并包括第一个空字符的连续字符序列，*即*以 .终止的字符数组`'\0'`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-30T18:38:46.910

C 字符串是一系列以 0 字节终止的字符，也称为[空终止字符串](http://en.wikipedia.org/wiki/Null-terminated_string)。它可以作为数组 ( `char[]`) 或指向第一个字符的指针 ( `char *`) 访问。

在 C++ 中有另一种类型的字符串称为`std::string`不需要以 0 字节终止。C++ 程序员经常使用术语 C-string 来表示以空字符结尾的字符串而不是`std::string`类型。

# python - Django NOrel 夹具

> ID：12203340
> 
> 赞同：1
> 
> 时间：2012-08-30T18:37:02.677
> 
> 标签：python, django, mongodb, fixtures

是否可以使用 norel 后端为 Django 实例构建固定装置？我目前正在运行 mongodb（通过 mongoengine）并在尝试使用设置了夹具运行 syncdb 时遇到错误，指出“无效的模型标识符：”。

我没有在我的 settings.py 中设置 mongo，而是使用 mongoengine 设置我的 models.py。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:45:46.963

我相信大多数执行数据库操作的 django 管理命令都希望使用 django ORM，假设您指定了数据库后端。

在夹具中加载的`loaddata`命令可能也不例外。`syncdb`如果您不使用数据库后端和 django ORM，则无法充分使用该命令。它必须自省您的模型并假设它们都是 django Model 基类的子类。如果您正在同步完全自定义的非 django 模型类，您很可能会遇到错误。

您可能需要做的是考虑编写自己的管理命令：
[https ://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T06:04:01.613

对于 mongoengine，你可以使用这个：[https ://github.com/klen/mixer](https://github.com/klen/mixer)

# ios - 以编程方式阻止来自 iOS 应用程序的呼叫者 ID

> ID：12203343
> 
> 赞同：2
> 
> 时间：2012-08-30T18:37:22.020
> 
> 标签：ios, phone-call

由于 *67 在嵌入电话链接时不起作用，有没有办法以编程方式阻止来自应用程序的呼叫者 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:43:37.463

不可以。您无权访问电话应用程序或您的应用程序之外的任何其他应用程序。

# node.js - socket.io 远程客户端不工作

> ID：12203346
> 
> 赞同：2
> 
> 时间：2012-08-30T18:38:06.403
> 
> 标签：node.js, express, socket.io

我正在尝试使用 socket.io 将本地计算机上的 Chrome 浏览器连接到远程节点服务器。我正在使用 expressjs 从我的节点服务器上提供所有文件，因此我有一个包含 html 和 js 文件的公共目录（我在我从 npm 获得的 node_modules 下创建了一个指向 socket.io 文件的符号链接）。

我遇到的问题是，当 Chrome 拉出我的 index.html 时，我收到以下错误：

未捕获的ReferenceError：未定义要求socket.io.js：12未捕获的ReferenceError：未定义io

我像其他一些帖子一样尝试了cdn，但这导致了另一个问题。许多帖子都提倡这种方法，所以我不确定为什么它不能解决 nodejs 的问题。有任何想法吗？

这是我的 index.html 的样子：

```
<html>
<head>
</head>
<body>
<script src="http://nodeserver:8080/socket.io/lib/socket.io.js"></script>

<script>
  var socket = io.connect('http://nodeserver:8080');
  socket.on('', function (data) {
    console.log(data);
    socket.emit('update checkins', { my: 'data' });
  });
</script>
<h2>Test Page</h2>
</body>
</html> 
```

我的服务器代码如下所示：

```
 var express = require('express'),
        app = express(),
        server = require('http').createServer(app),
        io = require('socket.io').listen(server);

    // Get the environment variables we need.
    var ipaddr = process.env.VCAP_APP_HOST || 'myserver.com';
    var port = process.env.PORT || 8080;

    app.configure(function() {
        app.use(express.bodyParser());
        app.use(express.methodOverride());
        app.use(app.router);
        app.use(express.static(__dirname + '/public'));
    });

// set up the RESTful API, handler methods are defined in api.js
    var api = require('./controller/api.js');
    app.get('/foursq', api.list);

// Set Socket.io
    io.sockets.on('connection', function (socket) {
        console.log('Socket created...');
        socket.emit('welcome', {welcome: 'you'});
        socket.on('update checkins', function (msg) {
            socket.broadcast.emit('checkins', api.list);
        });
    });

    // And start the app on that interface (and port).
    app.listen(port, ipaddr, function () {
        console.log('%s: Foursquare Node server started on %s:%d ...', Date(Date.now()),
            ipaddr, port);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:16:22.580

问题是我在 app 对象上监听了原始代码，但是当我更新代码以添加套接字时，我忽略了将其更改为 server.listen，如下所示：

```
server.listen(port, ipaddr, function () {
    console.log('%s: Foursquare Node server started on %s:%d ...', Date(Date.now()),
        ipaddr, port);
}); 
```

然后，这使我可以简单地将脚本包含如下，而不必像比利指出的那样复制任何内容：

```
<script src="/socket.io/socket.io.js"></script> 
```

# c++ - 函数指针、函数对象和 lambda 函数有什么区别？

> ID：12203347
> 
> 赞同：6
> 
> 时间：2012-08-30T18:38:07.997
> 
> 标签：c++, c++11

我知道每个都可以传递给另一个函数。在我看来，他们都喜欢有细微差别的替代品。

1.  函数指针：指向函数的指针

2.  函数对象：已重载 () 运算符的类的实例；能够发挥作用；

3.  lambda 函数：一个匿名函数（在 C++11 中新引入），可以在现场定义，并且仅在它所属的语句的生命周期内存在

由于微妙之处，我想知道这 3 个选择中的哪一个在给定场景中最合适。所以，那里的专家，请提供一些信息（关于一些选择标准？），以便我可以在不同的场景中决定和使用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T21:49:39.637

**函数对象**：`f`您可以使用`f(x)`语法调用的对象。这包括函数指针、具有重载`operator()`或转换函数到函数指针/引用的类对象。

该标准对其有一个直接的定义

> 函数对象类型是一种对象类型 (3.9)，它可以是函数调用 (5.2.2, 13.3.1.1) 中后缀表达式的类型。函数对象是函数对象类型的对象。

特别是，*函数*或*函数引用*不是函数对象，即使它们是可调用实体。有些人混淆了“函数对象”这个术语，并认为它仅表示具有重载的类类型对象`operator()`。

**函数指针**：一个，错误，指向函数的指针

**lambda 函数**：我认为您指的是 C++11 lambda。这些不是真正的函数，而是特殊的编译器生成的类类型函数对象，它们具有重载的`operator()`.

# api - Goodreads API：获取流派？

> ID：12203350
> 
> 赞同：1
> 
> 时间：2012-08-30T18:38:12.947
> 
> 标签：api, recommendation-engine

您可能会认为这将是 Goodreads API 的基本部分，因为获取与作者或书籍相关联的类型是一项相当常见的任务。但是，据我所知，任何相关方法返回的 xml 都没有提供流派信息。例如，给定作者姓名“Stephen King”，返回的 xml 中没有一个包含与作者相关的流派信息——在本例中为“神秘与惊悚片、恐怖片、文学与小说”。

“search.book”方法确实包含一个 search[field] 选项，它可以是“title”、“author”或“genre”。但这在这里没有帮助，因为我需要知道给定作者的流派，而不是给定流派的作者。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:59:21.903

我向 Goodreads 开发人员询问了这个问题。他的回答是：“抱歉，我们的 API 不提供作者类型信息。”

# ember.js - 如果提交返回错误，则回滚事务

> ID：12203362
> 
> 赞同：5
> 
> 时间：2012-08-30T18:38:44.787
> 
> 标签：ember.js, ember-data

**对于这些步骤：**
1\. 通过 App.router.transaction() 启动事务
2\. 将 Post-1 和 Post-2 添加到事务
3\. 删除 Post-1
4\. 删除 Post-2
5\. transaction.commit()

**如何处理以下情况：**
1\. 从视图中删除记录，从服务器删除后。
2\. 如果 Commit 失败，则回滚事务。所以记录在视图中再次可见。
3.如何在视图中显示已删除的记录，因为本地删除后它会从集合中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:18:41.167

1.  成功提交 ajax 事务后，ember-data 将从集合中删除记录。
2.  如果提交失败，则不会被 ember-data 从集合中删除。ajax.success 回调调用从集合中删除记录的函数。似乎没有错误处理程序。
3.  一旦提交成功，这些项目将从集合中删除。如果您想将记录显示为已删除，您可能需要在帖子上设置已删除标志属性，然后更新它们而不是删除它们。这也是我遇到的。

# css - 为什么这个按钮会导致我的布局中断？

> ID：12203376
> 
> 赞同：2
> 
> 时间：2012-08-30T18:40:03.180
> 
> 标签：css, button

我修改了这个 CSS 按钮以放在我公司的网站上，但每次我尝试实现它都会导致整个网站失去中心对齐。

这是HTML：

```
<div id="contain">
<button class="support"> </button> 
```

​</p>

这是CSS：

```
 button.support {
background: rgb(38,128,195); /* Old browsers */
background: -moz-linear-gradient(top, rgba(38,128,195,1) 11%, rgba(30,101,155,1) 99%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(11%,rgba(38,128,195,1)), color-stop(99%,rgba(30,101,155,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, rgba(38,128,195,1) 11%,rgba(30,101,155,1) 99%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, rgba(38,128,195,1) 11%,rgba(30,101,155,1) 99%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, rgba(38,128,195,1) 11%,rgba(30,101,155,1) 99%); /* IE10+ */
background: linear-gradient(to bottom, rgba(38,128,195,1) 11%,rgba(30,101,155,1) 99%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2680c3', endColorstr='#1e659b',GradientType=0 ); /* IE6-9 */
border-top: 1px solid #38538C;
border-right: 1px solid #1F2D4D;
border-bottom: 1px solid #151E33;
border-left: 1px solid #1F2D4D;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;
-webkit-box-shadow:  0 6px 0px #1F3053, 0 8px 4px 1px #111;
-moz-box-shadow: 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
box-shadow: 0px 1px 0 #1D2C4D, 0 6px 0px #1F3053, 0 8px 4px 1px #111;
color: white;
font: bold 20px "helvetica neue", helvetica, arial, sans-serif;
line-height: 1;
margin-bottom: 10px;
padding: 10px 0 12px 0;
text-align: center;
text-shadow: 0px -1px 1px #1E2D4D;
height: 175px;
width: 175px;
-webkit-background-clip: padding-box;
transition: all 200ms;
-moz-transition: all 200ms; /* Firefox 4 */
-webkit-transition: all 200ms; /* Safari and Chrome */
-o-transition: all 200ms; /* Opera */
}

button.support:hover {
    -webkit-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
    -moz-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
    box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
    cursor: pointer; }

  button.support:active {
    -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
    -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
    box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
    margin-top: 4px; }
​ 
```

我尝试将其从输入更改为超链接，但它不会改变任何内容，只要我添加 CSS 代码，它就会撤消页面上的所有水平对齐。我没有看到任何应该弄乱它的东西。

它以某种方式摆脱了#site div。我不确定它为什么会这样做......

这是我试图在其上实现的页面：http: [//bluebeam.com/us/support/](http://bluebeam.com/us/support/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:38:04.517

我知道这已解决，但这就是您遇到此问题的原因：在 CSS 的最后一个右大括号之后有一个不可见的特殊字符，特别是零宽度空格（[U+200B](http://www.fileformat.info/info/unicode/char/200b/index.htm)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:09:45.120

修复。不太确定为什么，但逐行添加 CSS 使其不会中断。我还将类名更改为 support_btn 以确保它不会与 Global 标头冲突，尽管此时已修复。

我确实排除了一些我不需要的行：

```
text-align: center;
text-shadow: 0px -1px 1px #1E2D4D;
color: white;
font: bold 20px "helvetica neue", helvetica, arial, sans-serif; 
```

但我真的看不出这些会有什么不同。

# macos - 组合 GUI 和命令行 OS X 应用程序

> ID：12203377
> 
> 赞同：6
> 
> 时间：2012-08-30T18:40:15.197
> 
> 标签：macos

是否可以创建一个可以从 *nix 命令行严格运行（使用标准输入/标准输出，从终端控制台或通过 ssh 等）运行的单个 Mac OS X 应用程序，但也可以从应用程序图标和使用 Mac GUI 进行所有用户交互（不需要终端）？如果是这样，怎么做？

我已经可以使用两个可执行文件来实现类似的功能，一个是 GUI 前端，另一个是使用管道、套接字、共享内存或 Applescript（等）进行通信。这个问题是我是否可以使用单个可执行文件和单个应用程序进程空间来做到这一点。

有没有办法在不将新的命令行参数传递给命令行可执行文件的情况下做到这一点？（因为存在与使用命令行应用程序相关的遗留问题）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:16:53.847

我相信，您正在寻找的是一种确定您是从 GUI 还是命令行启动的方法。一种简单的方法是获取您的父进程标识符。如果您是 GUI 进程，您将由 launchd（用户会话 launchd）启动。如果您是命令行，那么 shell 或脚本已经启动了您（无论如何，不​​是启动）。

现在，如何做到这一点 - 一个简单的方法是使用 proc_info 系统调用 (#336)，它由 libproc 方便地包装（检查`<libproc.h>`。具体来说，您需要`<sys/proc_info.h>`具有 pbi_ppid 字段的 proc_bsdinfo（请参阅 ）来指定您的父级（并且父级的 pbi_comm 会告诉您它的名称 - 以查看它是否已启动）。您可以通过在进入`NSApplicationMain`.

（与其他答案一样，您的二进制文件最终会出现在您的 中`.app/Contents/MacOS/<binary>`，所以是的，符号链接是有意义的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T19:34:43.487

我不是 100% 确定这是否会起作用，但`LSEnvironment`key in的文档`Info.plist`似乎表明指定的环境变量只会在您的应用程序由 Finder 启动时定义。

如果您要在`LSEnvironment`（我们称之为`MYAPP_GUI`）中定义一个变量并在启动时检查它的值，那么它应该在使用 Finder 时存在，而不是在使用终端时存在。这会告诉你是否显示 GUI 或使用 stdio

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-25T15:05:46.473

尽管@3doubloons 提供了正确的答案，但我仍然想分享我的代码片段来演示这一点。

首先，`LSEnvironment`在 Info.plist 中添加一个键。它的值是 env-var-names （作为键）及其字符串（只允许字符串！）值的字典。就我而言，我添加了`LaunchUI`带有值的键`"Yup"`

[![在此处输入图像描述](../Images/6c55435691fbf485a1c0135266b5d277.png)](https://i.stack.imgur.com/hvVaR.png)

然后，我的 main() 函数如下所示：

```
int main(int argc, const char * argv[]) {
    int status = -1;
    @autoreleasepool {

        do {
            NSProcessInfo *procInfo = [NSProcessInfo processInfo];

            // deterine "UI" launch versus "command-line
            id uiEnvVar = [[procInfo environment] objectForKey:@"LaunchUI"];
            if([uiEnvVar isKindOfClass:[NSString class]] && [uiEnvVar isEqualToString:@"Yup"] ) {    
                status = NSApplicationMain(argc, argv); //launch app normally with UI
                break;
            }

            id arguments = [procInfo arguments];
            if (arguments == nil) {
                printUsage();
                break;
            }
            if ([arguments count] == 1 || [arguments containsObject:@"-h"] || [arguments containsObject:@"-help"]) {
                printUsage();
                status = 0;
                break;
            }

            //process further arguments
            if(processArgs(arguments) == NO) {
                printUsage();
                break;
            }

            // kick off protection.

            if(YES != do_work()) {
                break;
            }

            status = 0; //

            // if your command-line should stay alive and handle events - you can do the following to block it from exiting.
            [[NSRunLoop currentRunLoop] run];
        } while(false);
    }
    return status;
} 
```

我认为那种覆盖它。享受！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:43:46.270

是的，只需在程序中添加一个开关`--command-line`。`--command-line`除非在运行时作为参数传递，否则启动普通 GUI 。

```
./myprog --command-line 
```

这就是它的全部内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:52:06.797

这是我在.Net应用程序中所做的，我认为这个想法可以在其他平台上用其他语言实现。

我将创建一个控制台应用程序，然后仍然使用所有 GUI 类。当程序启动时，根据确定它是 GUI 实例而不是命令行实例的任何标准，我要么启动 GUI，要么相应地启动命令行界面。

主要的是，您有一些条件可以确定何时要显示 GUI 而不是命令行。也许通过有关会话的系统变量（是 ssh 会话，然后是命令行，否则是 GUI）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T19:00:39.043

我会说这不可能以您期望的方式进行。GUI OSX 应用程序实际上是应用程序包，即它们实际上是除了实际可执行文件之外还包含*大量资源的目录。*您当然*不能*在 shell 中执行这些包，就好像它们是命令行可执行文件一样（例如，您不能`./MyApplication.app --some-option`在 shell 提示符下执行，因为您的 shell 不知道如何执行目录），尽管您可能知道*可以*运行它们作为 GUI 通过`open MyApplication.app`. 现在，您*可以*访问捆绑包中的实际可执行文件，并且有*可能*获得*它*可执行文件作为 CLI 可执行文件工作 - 在这里直言不讳，因为我对 Xcode 工具及其构建系统没有实际经验，但可能在 CLI 和 GUI 调用中都有实际的可执行文件工作。

尽管如此，这并不是很有用，因为这些可执行文件隐藏在应用程序包中，并且通常无法在 shell 中直接访问（即它们肯定不在您的 $PATH 中，因此您必须像调用它们一样调用它们`./MyApplication.app/Contents/MacOS/actualbinaryname`）。我在野外看到的常用方法是提供与您的应用程序捆绑在一起的单独 CLI 可执行文件，通常由安装程序或通过单击应用程序中的按钮将其安装在合适的位置（例如 /usr/local/bin）优先。如果您打算这样做，那些 CLI 可执行文件负责与 GUI 应用程序交互（从您的问题中不清楚）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-21T02:33:46.280

抱歉，如果我错过了重点，但如果您使用的是 Objective-C，则不是在 Objective-C 中使用 NSProcessInfo 类并检查“arguments”变量以确定是否已通过任何参数的答案的一部分，并且然后在代码中下定决心下一步该做什么？

# haskell - 使用 Haskell 排序函数时的堆栈溢出

> ID：12203380
> 
> 赞同：11
> 
> 时间：2012-08-30T18:40:28.967
> 
> 标签：haskell

我在 Haskell 中实现了一个过滤器，即一个我可以从命令行调用的程序，如下所示：

```
$ cat inputfile.txt | myFilter > outputfile.txt 
```

在大约 80 MB 的文件上运行程序时，出现堆栈溢出（堆栈空间溢出：当前大小 8388608 字节。）。我在 cygwin 下使用 GHC 版本 6.12.3。

我认为问题来自`sort`我在程序中使用的功能，但是在我寻找问题三天后，我不知道如何解决这个问题，所以我希望有人能给我提示。

以下是关于我的程序的基本细节。

我的过滤器程序将标准输入读入字符串，将其拆分为行并将每一行解析为某种类型的记录`Event`

```
data Event = ... 
```

这是一个实例`Ord`

```
instance Ord Event where
    x < y = ... 
```

这样我就可以使用内置`sort`函数对事件进行排序。

拆分成行并解析事件（每行一个事件）由函数执行

```
p :: String -> [Event] 
```

它在内部使用标准功能`lines`。

我还有一个函数 g 可以对事件进行分组：

```
g :: [Event] -> [[Event]] 
```

g 使用了一些与此处无关的标准；每个组最多可以包含 4 个事件。

我使用（即，每个组内的所有事件都被排序）对每组事件（表示为列表）进行`sort`排序，最后使用函数将所有事件组格式化为字符串

```
f :: [[Event]] -> String 
```

主函数如下所示：

```
main = interact (f . (map sort) . g . p) 
```

如前所述，在大约 80 MB 的文件上运行此程序会导致堆栈溢出。

如果我用以下函数替换排序函数（一个简单的快速排序实现）：

```
mySort :: [Event] -> [Event]
mySort [] = []
mySort (e:es) = let h = [j | j <- es, j < e]
                    t = [j | j <- es, e < j]
                in
                  (mySort h) ++ [e] ++ (mySort t)

main = interact (f . (map mySort) . g . p) 
```

我没有堆栈溢出！

如果在函数中，`mySort`我将定义替换为`t`以下内容：

```
 t = [j | j <- es, e <= j] 
```

即我替换`<`为`<=`，堆栈溢出又出现了！

所以我不知道这里发生了什么。我看不出我引入了任何无限递归。我的另一个假设是惰性评估可以在这里发挥作用（确实会`<=`产生比？更大的声音`<`？）。

我对 Haskell 有一些经验，但我不是真正的专家，所以我很高兴能得到一些有用的提示，因为过去三天​​我一直在努力理解这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T19:22:12.097

罪魁祸首是

```
instance Ord Event where
    x < y = ... 
```

这是定义`Ord`实例的错误方法。`Ord`实例的最小完整定义定义了`compare`或之一`(<=)`。有 的 的默认定义`compare`，`(<=)`以及所有`Ord`成员函数的的默认定义`compare`。因此，如果您定义`(<)`，那是您可以使用的唯一`Ord`成员，所有其他成员在调用时将无限循环，因为它们调用`compare`，调用`(<=)`，调用`compare`...

该`Data.List.sort`函数用于`compare`确定顺序，因此它在第一次比较时循环。您的自定义快速排序仅使用`(<)`，因此有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:45:15.543

在尝试分析代码并获得快速结果之前 - 尝试增加堆栈大小。

在启用 RTS 的情况下编译您的程序并指定所需的堆栈大小。

[http://book.realworldhaskell.org/read/profiling-and-optimization.html](http://book.realworldhaskell.org/read/profiling-and-optimization.html)

# java - @FormDataParam 抛出严重：缺少依赖项

> ID：12203391
> 
> 赞同：2
> 
> 时间：2012-08-30T18:40:52.157
> 
> 标签：java, rest, jersey

我正在使用 Jersey 上传文件。我定义了方法：

```
@POST
@Path("/upload")
@Consumes("multipart/form-data")
public Collection<Message> uploadImage(@FormDataParam("file") InputStream uploadedInputStream,
            @FormDataParam("file") FormDataContentDisposition fileDetail) throws IOException {
} 
```

并调用 Jersey 客户端的调用进行测试：

```
ClientConfig cc = new DefaultClientConfig();
cc.getClasses().add(MultiPartWriter.class);
Client client = Client.create(cc);
String url = "http://localhost:8080/API/api/images/upload/150";
File f = new File("C:/Pictures/1360_435x300.jpg");
FormDataMultiPart form = new FormDataMultiPart();
form.bodyPart(new FileDataBodyPart("thumbnail", f));
String s = client.resource(url).type(MediaType.MULTIPART_FORM_DATA).accept(MediaType.APPLICATION_JSON).post(String.class, form); 
```

但是，我得到：

> 严重：缺少方法 public java.util.Collection ImageResource.uploadImage(java.io.InputStream,com.sun.jersey.core.header.FormDataContentDisposition) 的依赖项在索引 1 处的参数处引发 java.io.IOException

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T23:25:54.150

确保所有库都是相同的版本（例如 1.13），并且不要忘记添加 mimepull.jar 和 jersey-multipart.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:10:07.407

谢谢@john 4d5 请确保所有 jars 版本同步您可以在此处找到所有可能的 jars。:) [https://maven.java.net/index.html#welcome](https://maven.java.net/index.html#welcome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T03:12:21.330

您需要添加与 Multipart 处理相关的 Maven 依赖项。

```
 <dependency> <!-- choose your version -->
        <groupId>org.jvnet</groupId>
        <artifactId>mimepull</artifactId>
        <version>1.6</version>
    </dependency>
    <dependency> <!-- choose your version -->
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-multipart</artifactId>
        <version>1.18.1</version>
    </dependency> 
```

If you need check [http://mvnrepository.com/](http://mvnrepository.com/) for the versions of the dependencies for your Jersey version.

# sql-server-2008 - 如何在sql server agent账号下执行ssis包的发送邮件任务

> ID：12203392
> 
> 赞同：0
> 
> 时间：2012-08-30T18:40:55.747
> 
> 标签：sql-server-2008, ssis

我创建了一个包含发送邮件任务的 SSIS 包。当我在 Visual Studio 中运行包时，该包工作正常。但是当我尝试在 sql server 代理帐户下运行 Sql server 作业中的包时，它失败了。

我试图将 sql server 帐户从本地服务更改为域用户，但出现错误`Access denied`。我如何实现这一目标？我需要根据数据流的某些限制发送一封包含附件的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:53:55.070

您可能想查看代理帐户以解决此问题...

[http://msdn.microsoft.com/en-us/library/ms190698(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190698%28v=sql.105%29.aspx)

这将允许您使用具有执行包所需权限的帐户...从您的描述中，不清楚您是否遇到 SMTP 任务的问题，或者邮件服务器是否不允许您发送电子邮件

# ember.js - 在不破坏现有的基于视图的 {{action}} 处理程序的情况下迁移到 Ember.Router

> ID：12203393
> 
> 赞同：1
> 
> 时间：2012-08-30T18:41:09.213
> 
> 标签：ember.js

我有一个针对 emberjs pre-1.0 编写的代码库，没有使用 Ember.Router 或 Ember.StateManager。我正在尝试迁移到 Ember.Router，如果可能的话，迭代。

我创建了一个骨架 App.ApplicationController、App.ApplicationView 和 App.Router（只有一个路由）。App.ApplicationView 简单地包装了我现有的入口点视图：App.PreRouterMainView。一切正常，除了**现有视图上的 {{action}} 绑定不再起作用**：

我经常使用`{{action "someTargetMethod"}}`调用`PreRouterChildView.someTargetMethod()`，但在嵌入/“路由” PreRouterMainView 之后，现在在路由器上调用 someTargetMethod()。

**有没有一种简单的方法让 PreRouterMainView 和子视图继续“旧方式”工作**，事件在最近的视图而不是路由器上调用方法？

还是我需要在一个大的改变中将我所有的视图方法重构为路由器方法？如果可能的话，我真的宁愿迭代地这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:27:33.680

您将不得不重构您的操作以显式定位视图（或有效路径上的任何其他对象）：

```
{{action someTargetMethod target="view"}} 
```

但是，动作的默认上下文已更改为路由器，因为路由器应该处理大多数动作，尤其是更改状态/路由的动作。您可以调用控制器上的方法并在处理操作的路由器方法中查看（通过事件上下文）。如果动作没有改变状态或数据，那么拥有视图句柄就可以了。

编辑：内联代码文档表明您可以通过在控制器上设置属性来更改默认操作目标：

```
### Specifying a Target
There are several possible target objects for `{{action}}` helpers:

In a typical `Ember.Router`-backed Application where views are managed
through use of the `{{outlet}}` helper, actions will be forwarded to the
current state of the Applications's Router. See Ember.Router 'Responding
to User-initiated Events' for more information.

If you manaully set the `target` property on the controller of a template's
`Ember.View` instance, the specifed `controller.target` will become the target
for any actions. Likely custom values for a controller's `target` are the
controller itself or a StateManager other than the Application's Router.

If the templates's view lacks a controller property the view itself is the target. 
```

# xcode - xcode UILabel 增量视觉更新

> ID：12203397
> 
> 赞同：0
> 
> 时间：2012-08-30T18:41:26.007
> 
> 标签：xcode, uilabel

需要制作像 UILabel 这样的“记分板”。当视图显示给用户时，UILabel 从 0 开始，然后进行增量更新，直到它达到存储的值。还想控制 UILabel 更新的速度。

例如：label 从 0 开始，然后显示 1，然后显示 2、3、4 等……直到达到 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:43:57.410

您可以使用重复的 NSTimer 和计数器来实现此目的：

```
@interface Whatever: SomeSuperClass {
    int counter;
    NSTimer *timer;
}

timer = [NSTimer scheduledTimerWithTimeInterval:1.0 /* in seconds */
    target:self
    selector:@selector(updateLabel)
    userInfo:nil
    repeats:YES];

- (void)updateLabel
{
    theLabel.text = [NSString stringWithFormat:@"%d", counter++];
    if (counter > 20) [timer invalidate];
} 
```

# sip - VoIP 与 Farstream（SIP、ICE）

> ID：12203399
> 
> 赞同：0
> 
> 时间：2012-08-30T18:41:37.467
> 
> 标签：sip, gstreamer, voip, libnice

我正在做一个基本的 VoIP（音频+视频）程序。用户不会（很可能）在 NAT 之后，但没有 100% 的保证，所以我需要使用 ICE(libnice)。

另外，为了让用户能够互相呼叫，我需要 SIP（​​这样他们就可以自己注册并呼叫其他人）。

在寻找了一些 SIP 服务器之后，我想我会选择[http://www.opensips.org/](http://www.opensips.org/)。

我的问题是：我可以只使用远流进行 SIP，还是需要心灵感应或其他什么？

还有一个更普遍的问题：我走对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T19:19:04.960

如果您选择使用 Farstream，您将需要 Telepathy，因为 Farstream 只处理低级音频。内部没有 SIP 堆栈。更准确地说，您将需要 Rakia，它是 Telepathy 中处理 SIP 的模块。

似乎您走在正确的轨道上，但您是否考虑过其他框架？[例如， PJSIP](http://www.pjsip.org/)被广泛使用，也可以满足您的需求。

# .net - ReportViewer ASP.NET 白线

> ID：12203402
> 
> 赞同：0
> 
> 时间：2012-08-30T18:41:48.077
> 
> 标签：.net, asp.net-mvc, report, reportviewer

我希望有人可以帮助我解决这个问题。我已将 ReportViewer 控件添加到 ASP.NET MVC 页面。问题是出现的白线。当您导出报表、在设计器中或在 Windows 窗体控件中查看报表时，它们不会出现。我想知道这是否是 ASP.NET MVC 的 ReportViewer 控件中的设置/错误，如果是，是否有修复？

如何将控件添加到 ASP.NET MVC 页面：[如何在 asp.net mvc 3 razor 视图中使用 reportviewer 控件？](https://stackoverflow.com/questions/6144513/how-can-i-use-a-reportviewer-control-in-an-asp-net-mvc-3-razor-view)

报告在 ReportViewer 中的外观：http: [//i197.photobucket.com/albums/aa78/shelby1155/ReportViewer.png](http://i197.photobucket.com/albums/aa78/shelby1155/ReportViewer.png)

报告的外观：http: [//i197.photobucket.com/albums/aa78/shelby1155/Report.png](http://i197.photobucket.com/albums/aa78/shelby1155/Report.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:26:20.697

这不是reportviewer 控件的问题。这似乎是您在页面上应用的 CSS 样式规则。

当您的报表在reportviewer 控件中呈现时，它会以html 格式写出报表。

您在页面上的 CSS 规则似乎具有深远的影响。

您可以修复您的 CSS，以便将 reportviewer 生成的 html 排除在外。

或者，您可以使用 AsyncRendering 功能，将报告放入自己的 iframe 中。使用 AsyncRendering 还具有让您的页面更快地完成呈现的优势，因为报表在嵌入式 iframe 中独立呈现和加载。

```
AsyncRendering=True 
```

# java - 等于返回 false

> ID：12203403
> 
> 赞同：5
> 
> 时间：2012-08-30T18:41:52.977
> 
> 标签：java

> **可能重复：**
> [从 Equals 方法返回 false 而不覆盖](https://stackoverflow.com/questions/12156059/returning-false-from-equals-methods-without-overriding)

我的一位同事今天问了我一个问题，如下所述

编写 TestEquals 类（自定义或用户定义的类），以便代码中的以下 sop 打印`false`。

```
public class Puzzle3 {
  public static void main(String[] args) {
    TestEquals testEquals = new TestEquals();
    System.out.println(testEquals.equals(testEquals));
  }
} 
```

**注意：您不能覆盖 equals 方法。**

我想了很多，但如果不覆盖 equals 就找不到解决方案。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T18:47:15.173

利用

```
public boolean equals(TestEquals equals) {
    return false
} 
```

要覆盖等于，您需要输入参数为对象类型，因此上述代码片段理论上不会覆盖对象方法中的等于

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-30T18:56:57.727

编辑：显然[其他人](https://stackoverflow.com/a/12158031/20394)首先在另一个线程上提出了这个想法，但我将把它留在这里，因为这段代码要简单得多。

* * *

```
class TestEquals {

  static {
    System.setOut(new PrintStream(new FilterOutputStream(System.out) {
      public void write(byte[] buf, int pos, int len) throws IOException {
        if (len >= 4 && buf[pos] == 't') {
          out.write(new byte[] {
              (byte) 'f', (byte) 'a', (byte) 'l', (byte) 's', (byte) 'e'
            });
          out.write(buf, pos + 4, len - 4);
        } else {
          out.write(buf, pos, len);
        }
      }
    }));
  }
} 
```

这种可怕的`equals`hack不会覆盖或`TestEquals`重载`System.out`与. （假设默认编码不是超级奇特的东西。）`'t'``"false"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:51:24.893

如上所述，您可以编写如下方法：

```
public boolean equals(TestEquals e) {
    return false;
} 
```

此外，如果`TestEquals`可以扩展一些其他对象：

```
public TestEquals extends Something {
}

public Something {
    @Override public boolean equals(Object o) {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:47:19.083

我不知道为什么有人想这样做。但是您可以创建一个方法，如下所示：

```
public boolean equals(SuperEquals equals) { return false; } 
```

但不是`SuperEquals`的任何超类在哪里。`TestEquals``Object`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-30T19:02:06.000

在我的 iPad 上...策略应该类似于每次执行 get 时都会修改 aun 属性。如果通过 equals 上的 getter 访问该属性，这将起作用。您提到 equals 不能被覆盖，因此该属性应该是私有的，并且值的修改发生在读取值之前和之后，以确保它无论是 equals 的第一部分还是第二部分都有效。

类似的东西（对不起任何语法错误）：

```
public class TestEquals{

 private int id;

 public int getId(){
    int temp;
    id++;
    temp=id;
    id++;
    return temp;
 }
} 
```

# wordpress - 将我的 Wordpress 网站移至 Linode 服务器，特色图片不再调整大小？

> ID：12203404
> 
> 赞同：0
> 
> 时间：2012-08-30T18:41:53.607
> 
> 标签：wordpress, image-processing, ubuntu-10.04, linode

正如标题标题所读。我终于将我的 Wordpress 网站移到了 Linode，但我注意到我的特色图片不再自动调整大小？

我已经在这个 Linode 上安装了 Virtualmin 和一些安全的东西，但是我需要安装 CURL 或其他什么吗？运行 Ubuntu 10.04。

请让我知道您需要的任何其他信息，我会尽力遵守，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:13:35.010

我从 Obmerk 的评论中得到了答案，在我的 linode 上安装 php5-gd 解决了一切！

# listbox - Windows Phone ListBox 滚动到结尾

> ID：12203405
> 
> 赞同：0
> 
> 时间：2012-08-30T18:41:55.563
> 
> 标签：listbox, windows-phone

当用户滚动列表框结束时如何调用某些函数？我尝试使用`ScrollToBottom`位这不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T20:39:44.037

尝试这个 ：

myListBox.ScrollIntoView(myListBox.Items.Count);

如果您的列表框项目是控件，则上述内容将不起作用，原因是它滚动到项目的顶部而不是底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T21:20:29.163

这行得通。将 ListBox 设置为不滚动，然后在其周围添加一个 ScrollViewer。现在在您的代码中，您可以将 ScrollViewer 设置为您想要的任何内容。

XAML：

```
<!--Disable the ListBox scroll and add a ScrollViewer so we have control over the scroll position.-->
    <ScrollViewer 
             Name="scrlvwrListBoxMessages"
             VerticalScrollBarVisibility="Auto" >
        <ListBox x:Name="lstbxMessages"
             ScrollViewer.VerticalScrollBarVisibility="Disabled" >
</ListBox>
</ScrollViewer> 
```

代码：

```
 private void ScrollToBottom()
    {
        //Scroll to the bottom.
        Dispatcher.BeginInvoke(() =>
        {
            this.scrlvwrListBoxMessages.ScrollToVerticalOffset(double.MaxValue);
        });
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T05:13:43.537

[Silverlight ListBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox%28v=vs.95%29.aspx)中没有名为“ScrollToBottom”的方法

尝试这个 ：

```
myListBox.ScrollIntoView(myListBox.Items.Count); 
```

# c# - 单击时无法显示按钮

> ID：12203406
> 
> 赞同：0
> 
> 时间：2012-08-30T18:41:55.743
> 
> 标签：c#, button, webforms, buttonclick

有 ac# webform，它有两个可以编辑表单字段的按钮。单击编辑按钮后，需要更新文档的所有字段并显示保存按钮。我的保存按钮不可见，但无法弄清楚如何在单击保存的按钮后使其可见，以及如何禁用所有字段，以便在单击编辑按钮之前它们不可编辑。

这是我为按钮单击可见的尝试：

```
<script type="text/javascript">
function script1() {
    Button2.onclientclick = (Button3.Visible = true);
  }
  </script>

    <asp:Button ID="Button2" runat="server" Height="24px" 
        Text="Edit" Width="67px" onclientclick="script1()"/> 
```

还：

```
 protected void Button2_Click(object sender, EventArgs e)
  {
    Button3.Visible = true;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:44:09.857

```
<asp:Button ID="Button2" runat="server" Height="24px" 
    Text="Edit" Width="67px" onclientclick="script1()" OnClick="Button2_Click"/> 
```

添加到侧服务器中的按钮委托

```
OnClick="Button2_Click" 
```

# c++ - 如何欺骗编译器来优化内存读取？

> ID：12203408
> 
> 赞同：2
> 
> 时间：2012-08-30T18:42:05.843
> 
> 标签：c++, compiler-construction

我听说过编译器优化。

例如，当：

```
while(myBool)
    doStuff(); 
```

编译器知道您不会在 while 循环中修改 myBool ，它只会读取 myBool 一次并且不会每次都检查它。

这可能会受到`volatile`关键字的影响，对吗？

所以我试图“欺骗”编译器，它认为值没有改变。

```
int main()
{
    struct st 
    {
        int a;
        int b; //I want to make difference by writing volatile here
    }s;

    s.b = 1;

    while(s.b > 0)
    {
        *((&s.a)+1) = 0;
        std::cout << "test" << std::endl;
    }
} 
```

但即使开启了全面优化（vs2012），这也不会欺骗编译器。这可能是非常蹩脚的把戏:)

我该如何欺骗它？甚至可能吗？

我的目标是创建简单的单线程程序，它使用使用的关键字打印“test”，`volatile`并在没有关键字的情况下打印无限次的“test”。

编辑：不幸的是我不擅长汇编程序，所以如果首先优化内存读取，我真的无法阅读:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:58:27.610

你正在做的是未定义的行为。您无法`s.b`通过写入来访问，`*((&s.a)+1)`因为无法保证`s.a`并且`s.b`它们之间没有任何填充字节。

如果您想强制没有填充，请查看您的编译器选项。对于 GCC/Clang，您可以使用[`__attribute__((packed))`](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html). 对于 MSVC，您将使用[`#pragma pack`指令](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)。

没有充分的理由`s.b`通过`s.a`使用该代码进行访问。在这种情况下，假设您有充分的理由不`s.b`直接访问，您真正应该做的是使用数组（`volatile`如果需要的话）。数组保证在内存中是连续的，不需要特殊的属性/编译指示。

此外，在某些情况下，编译器不会进行某些优化：如果`i`是一个变量并且您写入到`a[i]`后跟读取`a[1]`，编译器不能假设它`a[1]`不是只是写入的，所以它不能将其缓存在寄存器中。然而，如果您有两个不相关的变量`a`，`b`并且您写入`*(&a+1)`然后从中读取`b`，编译器*将*假定这`b`不仅仅是写入。这是未定义行为的一个很好的原因`*(&a+1)`，因为它会导致编译器做出不真实的假设并导致您的程序以奇怪的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:47:09.460

我认为您在问如何确保编译器假定该值几乎相同（在您的示例中为 true），因此编译器会针对该值进行优化。如果你这样做了，那么你正在寻找一组编译器特定的关键字。这就是我在 g++ 中使用的

```
#define predict_true__(exp)     __builtin_expect((exp), 1)
#define predict_true__(exp)       (exp) 
```

这样你就可以做到

```
while ( predict_true__( myBool ))
    doStuff() ; 
```

它将有效运行，因为 myBool 是真的。希望它有所帮助，并且您将知道在使用视觉的情况下该看什么。

补充：我发现下面的帖子谈到了它。不过，恐怕这是一个悲伤的谈话：[可能/不太可能等同于 MSVC](https://stackoverflow.com/questions/1440570/likely-unlikely-equivalent-for-msvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:00:19.853

简短的回答是`structs`不能保证在内存中是连续的。数组是。你不能像那样访问结构！

一个可能有帮助的 SO 问题：[structs 的指针算法](https://stackoverflow.com/questions/7623704/pointer-arithmetic-for-structs)。它更详细地介绍了您如何不能做到这一点以及为什么。但总结是结构的字段之间可能有也可能没有填充。我特别喜欢查理对这个问题的回答。

# .net - . msi 文件在调用时失败并显示“产品：XXX 配置失败”

> ID：12203411
> 
> 赞同：0
> 
> 时间：2012-08-30T18:42:11.550
> 
> 标签：.net, windows, winapi, windows-services, windows-installer

**场景 1：** 我从 Windows 服务运行此代码，但它因 Windows 事件日志而失败：

> “产品：XXX——配置失败”

**场景 2：** 我将它作为一个普通的 exe 运行，它可以工作。

我试过的代码：

```
var installerFilePath = <Path of msi>;
System.Diagnostics.Process installerProcess;                       
installerProcess = System.Diagnostics.Process.Start(installerFilePath, " /q");
while (installerProcess.HasExited == false)
{
    System.Threading.Thread.Sleep(250);
} 
```

我尝试安装 Windows MSIInstaller 额外日志记录，但它没有记录任何内容。

请指教。

公斤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:49:32.160

msi 只是一个数据库。在您的代码中，尝试`msiexec`使用适当的参数进行调用。

msiexec.exe 在您的 System32 目录中。打开命令提示符并键入`msiexec /?`以获取参数列表。

# javascript - 如何使用struts2框架在javascript中调用动作类中的方法？

> ID：12203415
> 
> 赞同：0
> 
> 时间：2012-08-30T18:42:22.100
> 
> 标签：javascript, struts2

我试图在jsp中的按钮单击事件上调用javascript函数的action类中的一个方法。我正在使用struts 2。你能告诉我该怎么做吗？ListAlgorithmAction 类中有一个函数，我想在用户单击提交按钮时调用它。

```
function alertselected (){
    var x = document.getElementById ( "select_name" ).selectedIndex;
    var y = document.getElementById ( "select_name" ).options;
    var id = y [x].index;
    redirect(id);
}

function redirect(x){
    document.getElementById ( "param_ID" ).value = x;
    document.forms ["./ListAlgorithmAction"].submit ();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:53:27.423

我认为这与 Struts2 无关，因为 struts2 独立于您通过 java-script 表单提交、ajax 或简单表单提交调用动作类的方式。

我相信你的jsp中有一些表格，比如

```
<s:form action="myAction" name="myForm">
  some data

</s:form> 
```

点击你可以做类似的事情

```
function redirect(x){
    document.getElementById("param_ID").value=x;
    document.myForm.action="ListAlgorithmAction";
     document.myForm.submit();
    } 
```

这只是基于您的输入的解决方案，如果您能够更多地定义您的问题，可能会有更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:54:40.403

对于类似的实现，我们曾经使用[http://directwebremoting.org/dwr/index.html](http://directwebremoting.org/dwr/index.html) (DWR)。你可以试试..如果你有很大的实现，我建议你集成这个框架

# web-services - 通过异步 Web 服务调用同时从 SSRS 运行多个报告

> ID：12203417
> 
> 赞同：0
> 
> 时间：2012-08-30T18:42:34.157
> 
> 标签：web-services, asynchronous, reporting-services, ssrs-2008

我有一个小批处理程序，它的工作是使用各种参数调用 SSRS 2008 Web 服务并路由生成的报告。（由于各种原因，SSRS 订阅无法在此环境中工作。）

目前，它使用`Parallel`该类一次运行多个报表，并利用报表服务器处理多个同时请求的能力。但是我已经读到（在[这里](https://stackoverflow.com/questions/5747993/executing-web-service-calls-in-parallel)的评论中）这不是要走的路：因为我们在客户端上跨多个线程传播的是 I/O 而不是处理负载，要做的事情是对 Web 服务进行异步调用并等待结果。

VS 2010 为我生成了一个包含`xxxxAsync`方法和`xxxxCompleted`事件的 Web 服务客户端。设置几个要调用的方法相对简单，一个调用 Web 服务`Render2Async`方法，另一个处理`Render2AsyncCompleted`.

但现在我在陌生的领域。首先，这打破了我所有的测试。如何测试异步 Web 服务：通过编写异步测试？我的应用程序是否需要触发自己的 EventCompleted 消息，以便测试可以知道应用程序已完成给定报告并且测试可以继续？

其次，如何防止应用程序过早终止？我已经阅读了`WaitHandle`它及其方法，但`WaitHandle.WaitAll`假设您可以访问所有任务的等待句柄，并且 Web 服务客户端没有公开任何等待句柄。该`Render2Async`方法没有返回值。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:45:21.663

NUnit 支持[延迟约束“After”](http://www.nunit.org/index.php?p=delayedConstraint&r=2.5.10)，允许您在这种情况下定期轮询测试。NUnit 的示例 After [here](http://www.andymcm.com/blog/2009/03/some-cool-new-ish-nunit-features.html)和[here](http://catchblock.com/blog/post/2011/08/13/Did-you-know-about-delayed-Asserts-in-NUnit.aspx)。它在技术上并不全面，因为它是一个简单的轮询解决方案，但它易于使用并且可以在一些简单的情况下工作。

Microsoft 的 silverlight 测试框架使用 EnqueueXXX 方法提供了更全面的支持，如[这里](http://jonas.follesoe.no/2008/06/04/unit-testing-asynchronous-silverlight-code/)和[这里](http://www.jeff.wilcox.name/2009/03/asynchronous-testing/)的文章中所示。

[最后，本文](http://jonas.follesoe.no/2007/09/18/unit-testing-event-based-asynchronous-code/)还展示了使用 ManualResetEvent 进行单元测试的“手动”方式。

# python - Python Dict：在已经创建的键中添加一个值而不会丢失原始值

> ID：12203419
> 
> 赞同：1
> 
> 时间：2012-08-30T18:42:38.580
> 
> 标签：python, xml, dictionary

我正在尝试在字典中添加一个 xml 文件。现在我想做的是在不丢失值的情况下将值更新到字典中。这样做的原因是我想对 xml 文件进行分组以显示标签作者所做的所有更改。

这是 xml 文件的示例。

```
<log> 
<logentry 
revision="33185"> 
<author>glv</author> 
<date>2012-08-06T21:01:52.494219Z</date> 
<paths> 

<path 
kind="file" 
action="M">/branches/Patch_4_2_0_Branch/text.xml</path>    

<path 
kind="dir" 
action="M">/branches/Patch_4_2_0_Branch</path> 

</paths> 
<msg>PATCH_BRANCH:N/A 
BUG_NUMBER:N/A 
FEATURE_AFFECTED:N/A 
OVERVIEW:N/A 
Adding the SVN log size requirement to the branch  
</msg> 
</logentry> 
 .... 
</log> 
```

这是我用 Python 编写的代码。

```
from xml.dom import minidom 
import smtplib 
from email.mime.text import MIMEText 
from datetime import datetime 

def xml_data (): 

f = open('C:\opidea_2.xml', 'r') 

data = f.read() 

f.close() 

dom = minidom.parseString(data) 

ic = (dom.getElementsByTagName('logentry')) 

dom = None       
content = '' 
author = {}   
for num in ic: 

authors = num.getElementsByTagName('author') 

if len(authors) > 0: 

  name = authors[0].firstChild.nodeValue 

  author.update({'author': str(name)})  

datef = [] 
xmlDate = num.getElementsByTagName('date')[0].firstChild.nodeValue 
datef = [Good_Time] 
path_change = []  
paths = [x for x in num.getElementsByTagName("paths")[0].childNodes if isinstance(x, minidom.Element)] 

for path in paths:  

  x = path.childNodes[0].nodeValue   

if str(path.getAttribute("kind")) == 'dir': 

  path_change ='Directory location: ' + [str(x)] 
else:  
  path_change ='Filename: ' + [str(x)] 

xmlMsgf = [] 
xmlMsg = num.getElementsByTagName('msg') 

if xmlMsg !='' and len(xmlMsg) > 0: 
  xmlMsgc = xmlMsg[0].firstChild.nodeValue 
  xmlMsgf = [xmlMsgc] 

 else: 
   xmlMsgc = "No comment made." 
   xmlMsgf = [xmlMsgc] 

 authorentry.push{('author',authorA),('date',datef),('path',path_change),('path',xmlMsgf))}           

    for k, v in [(authorentry)]:

        try:

            author[k].append(v)

        except KeyError:

            author[k] = [v]

 author.update({'Date':datef,'Path':path_change,'msg':str(xmlMsgf)}) 
 print author

if __name__ == "__main__": 
  xml_data () 
```

现在我想要的最终结果是这样的

键 1 = glv , date1 ,path 1a path 1b , msg1 , date2 , path 2 , msg 2 , ...

键 2 = jsm，日期 1，路径 1，味精 1。

我想将 author.update({'Date':datef,'Path':path_change,'msg':str(xmlMsgf)}) 分组以列出作者的 xml 文件，以附加作者制作的下一组内容. 不太清楚该怎么做。任何帮助，将不胜感激。这是我更新的代码，但我现在似乎收到了无效的语法错误：

```
 line 151
    authorentry.push{('author',authorA),('date',datef),('path',path_change),('path',xmlMsgf))}           
                    ^
 SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T18:47:36.783

您不能在字典中“保留旧值”，每个键都有一个与之关联的值。

不过，您可以在 dict 中使用聚合值类型，例如，您可以使用列表作为值，每次找到要添加的数据时，将其附加到关联列表中。

```
data = {}

for k, v in [('a', 1), ('a', 2), ('b', 3)]:
    try:
        data[k].append(v)
    except KeyError:
        data[k] = [v]  # a list of one element! 
```

模块中有一个方便的构造函数`collections`可以使这更容易：

```
import collections

data = collections.defaultdict(list)
for k, v in [('a', 1), ('a', 2), ('b', 3)]:
    data[k].append(v) 
```

# html - 是否可以在单击事件上使音频元素的控件出现/消失？

> ID：12203425
> 
> 赞同：0
> 
> 时间：2012-08-30T18:43:07.667
> 
> 标签：html, html5-audio

我在运行时设置音频对象的 src 如下

```
<a style="padding-top:0" href="#" onclick="audioClick('audio1', 'http://theurl.mp3');">
<p><audio id="audio1" controls></audio></p>

function audioClick(id, clip) {
    var audio = document.getElementById(id);
    if (audio.paused) {
        audio.src = clip;
        audio.play();
    }
    else {
        audio.pause();
        audio.currentTime = 0;
    }
} 
```

但是，当页面加载时，控制栏显示“无法播放音频”。当显示 audioClick() 函数时，这会消失，但是我不希望它首先出现在那里。

因此有没有办法我可以最初隐藏控件，然后在 audioClick() 函数中添加/删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:48:16.243

您可以在单击后设置控件属性，因此最初您不会看到播放器。当您的 audioClick 函数被调用时，您可以使用任何 HTMLDOMElement的[setAttribute()](http://www.w3schools.com/jsref/met_element_setattribute.asp)和[removeAttribute() API 随意显示或隐藏它们。](http://www.w3schools.com/jsref/met_element_removeattribute.asp)

[您可以在此jsfile](http://jsfiddle.net/jbalsas/tQevu/2/)中查看这是否是您所需要的

# vbscript - VBScript - 获取与模式匹配的最新子文件夹

> ID：12203427
> 
> 赞同：1
> 
> 时间：2012-08-30T18:43:18.417
> 
> 标签：vbscript, automation, directory, qtp

我是 VBScript 的新手，我正在尝试编写代码，该代码将返回给定文件夹中与给定命名模式匹配的最新子文件夹的路径。

基本上我希望它打开给定的文件夹并返回名称以“DevBuild”开头的最新子文件夹的路径。例如，如果给定文件夹有 3 个文件夹：

```
DevBuild-14.0  
DevBuild-15.0  
DebugBuild-15.0 
```

我希望它返回“{Path to given folder}\DevBuild-15.0\”，因为它是以“DevBuild”开头的最新文件夹。“最新”是指具有最近创建日期的文件夹，或者如果它更容易，则使用版本号。哪个没关系。

到目前为止，我有这个：

```
Dim fso, folder, subfolders
Set fso = CreateObject("Scripting.FileSystemObject")
Set folder = fso.GetFolder("B:\")
Dim count
count = folder.SubFolders.Count - 1
Dim folderNames()
ReDim folderNames(count)
Set subfolders = folder.SubFolders

'MsgBox UBound(folderNames)

For i = 0 to count
    MsgBox subfolders(i).Name
Next 
```

不幸的是，我遇到了一个错误`MsgBox subfolders(i).Name`，我认为这是因为我不明白如何从`subfolders`数组中获取一个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:20:30.003

解决从集合（数组、文件夹、..）中获取极值（最大、最近使用的......）问题的起点应该是成语/模式：

```
 Dim sDir : sDir = "..\data\12203427"
  Dim oSDir
  For Each oSDir In goFS.GetFolder(sDir).SubFolders
      WScript.Echo "Saw:", oSDir.DateCreated, oSDir.Name
  Next 
```

输出：

```
Saw: 30.08.2012 21:42:59 devbuild-15.10
Saw: 30.08.2012 21:43:24 DEVBUILD-15.09
Saw: 30.08.2012 21:44:21 devbuild-9.123
Saw: 30.08.2012 21:31:29 DebugBuild-15.0
Saw: 30.08.2012 21:24:00 DevBuild-14.0 
```

所有额外的变量（文件夹、文件夹名称、...）都容易出错。

要使用 .DateCreated 获取“最后一个”子文件夹，只需插入

1.  跟踪最新文件夹的 .DateCreated 的日期（初始化为一个小的超出可能范围的日期）
2.  一个 If 语句来记录迄今为止最新的文件夹

要根据名称/前缀过滤文件夹，请添加

1.  前缀及其长度
2.  一个 If 语句，以避免不匹配的文件夹（名称）

在代码中：

```
 Dim sDir     : sDir      = "..\data\12203427"
  Dim dtMR     : dtMR      = #1/1/1970#
  Dim sMRDir   : sMRDir    = ""
  Dim sPfx     : sPfx      = "devbuild-"
  Dim nPfx     : nPfx      = Len(sPfx)
  Dim oSDir
  For Each oSDir In goFS.GetFolder(sDir).SubFolders
      WScript.Echo "Saw:", oSDir.Name
      If 0 = StrComp(sPfx, Left(oSDir.Name, nPfx), vbTextCompare) Then
         WScript.Echo Space(4), "DC:", oSDir.DateCreated
         If dtMR < oSDir.DateCreated Then
            dtMR   = oSDir.DateCreated
            sMRDir = oSDir.Name
         Else
            WScript.Echo Space(4), "older then", dtMR
         End If
      Else
         WScript.Echo Space(4), "does not start with", sPfx
      End If
  Next
  WScript.Echo "-----------"
  If "" = sMRDir Then
     WScript.Echo "no subfolder found"
  Else
     WScript.Echo "found", sMRDir, dtMR
  End If 
```

输出：

```
Saw: devbuild-15.10
     DC: 30.08.2012 21:42:59
Saw: DEVBUILD-15.09
     DC: 30.08.2012 21:43:24
Saw: devbuild-9.123
     DC: 30.08.2012 21:44:21
Saw: DebugBuild-15.0
     does not start with devbuild-
Saw: DevBuild-14.0
     DC: 30.08.2012 21:24:00
     older then 30.08.2012 21:44:21
-----------
found devbuild-9.123 30.08.2012 21:44:21 
```

要依赖文件夹名称的版本，请遵循相同的策略，但使用适当的数据类型（双版本、RegExp 过滤器和提取器）：

```
 Dim sDir     : sDir      = "..\data\12203427"
  Dim dblMR    : dblMR     = -1.0
  Dim sMRDir   : sMRDir    = ""
  Dim reCut    : Set reCut = New RegExp
  reCut.IgnoreCase = True
  reCut.Pattern    = "^DevBuild-(\d+\.\d+)$"
  Dim oSDir
  For Each oSDir In goFS.GetFolder(sDir).SubFolders
      WScript.Echo "Saw:", oSDir.Name
      Dim oMTS : Set oMTS = reCut.Execute(oSDir.Name)
      If 1 = oMTS.Count Then
         Dim dblCVers : dblCVers = CDbl(oMTS(0).SubMatches(0))
         WScript.Echo Space(4), "Version:", dblCVers
         If dblMR  < dblCVers Then
            dblMR  = dblCVers
            sMRDir = oSDir.Name
         Else
            WScript.Echo Space(4), "older then", dblMR
         End If
      Else
         WScript.Echo Space(4), "does not match", reCut.Pattern
      End If
  Next
  WScript.Echo "-----------"
  If "" = sMRDir Then
     WScript.Echo "no subfolder found"
  Else
     WScript.Echo "found", sMRDir, dblMR
  End If 
```

输出：

```
Saw: devbuild-15.10
     Version: 15,1
Saw: DEVBUILD-15.09
     Version: 15,09
     older then 15,1
Saw: devbuild-9.123
     Version: 9,123
     older then 15,1
Saw: DebugBuild-15.0
     does not match ^DevBuild-(\d+\.\d+)$
Saw: DevBuild-14.0
     Version: 14
     older then 15,1
-----------
found devbuild-15.10 15,1 
```

（！德语语言环境！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:26:45.920

你的一些代码有点多余。这就是我将如何做到这一点。注意 For Each 块。

```
Dim fso, folder, subfolders, subfolder
Set fso = CreateObject("Scripting.FileSystemObject")
Set folder = fso.GetFolder("B:\")

Set subfolders = folder.SubFolders

Dim folderNames(subfolders.Count)

dim i
i = 0
For Each subfolder in subfolders
    folderNames(i) = subfolder.Name
    i = i + 1
Next 
```

# xml - XSLT for-each 循环

> ID：12203430
> 
> 赞同：1
> 
> 时间：2012-08-30T18:43:37.927
> 
> 标签：xml, xslt

我有一个非常棘手的 XSLT 问题。想象一下我有以下输入：

```
<OtherCharges>        
<LineId>
    <Id>P</Id>
</LineId>
<Items>
    <Item1>1</Item1>
    <Item2>2</Item2>
    <Item3>3</Item3>  
</Items>    
<LineId>
    <Id>P</Id>
</LineId>
<Items>
    <Item1>4</Item1>
</Items>
<LineId>
    <Id>P</Id>
</LineId>
<Items>
    <Item1>5</Item1>
    <Item2>6</Item2>    
</Items>
</OtherCharges> 
```

作为输出，我想要这个：

```
<OtherCharges>
  <LineId>P</LineId>
  <OtherChargesValues>
    <value>1</value>
    <value>2</value>
    <value>3</value>
  </OtherChargesValues>
</OtherCharges>
<OtherCharges> 
  <LineId>P</LineId>
  <OtherChargesValues>
    <value>4</value>
  </OtherChargesValues>
</OtherCharges>
<OtherCharges> 
  <LineId>P</LineId>
  <OtherChargesValues>
    <value>5</value>
    <value>6</value>
  </OtherChargesValues>
</OtherCharges> 
```

我可以有无限数量的行，但每行最多有 3 个项目。我试过以下代码：

```
<xsl:for-each select="/OtherCharges/LineId">
<Id>
    <xsl:value-of select="Id"/>
<Id>
<xsl:variable name="ChargeLine" select="."/>
<xsl:for-each select="following-sibling::Items[preceding-sibling::LineId[1] = $ChargeLine]">    
    <xsl:if test="name(.)='Items'">
        <xsl:if test="Item1">
            <value>
                <xsl:value-of select="Item1"/>
            </value>
        </xsl:if>  
        <xsl:if test="Item2">
            <value>
                <xsl:value-of select="Item2"/>
            </value>
        </xsl:if> 
        <xsl:if test="Item3">
            <value>
                <xsl:value-of select="Item3"/>
            </value>
        </xsl:if>
    </xsl:if>
</xsl:for-each> 
```

如果 ID 不同，它工作得很好，但问题是当我有相同的 ID 值时（如示例中所示）。任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:22:22.337

一般来说，避免使用 value-of 并了解 apply-templates，这将成为一个非常简单的 XSLT 问题。顺便说一下，您的输出不是格式良好的 XML，因为它没有单个根包装器元素。

```
<xsl:strip-space elements="OtherCharges" />

<xsl:template match="OtherCharges">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="OtherCharges/LineId">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="OtherCharges/Items">
  <xsl:apply-templates/>
</xsl:template>

<!--* now the real work *-->
<xsl:template match="OtherCharges/LineId/Id">
  <xsl:copy-of select="." />
</xsl:template>

<xsl:template match="OtherCharges/Items/*">
  <value><xsl:apply-templates/></value>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:30:17.497

`starts-with()`可以帮助...

**XML 输入**

```
<OtherCharges>        
    <LineId>
        <Id>P</Id>
    </LineId>
    <Items>
        <Item1>1</Item1>
        <Item2>2</Item2>
        <Item3>3</Item3>  
    </Items>    
    <LineId>
        <Id>P</Id>
    </LineId>
    <Items>
        <Item1>4</Item1>
    </Items>
    <LineId>
        <Id>P</Id>
    </LineId>
    <Items>
        <Item1>5</Item1>
        <Item2>6</Item2>    
    </Items>
</OtherCharges> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="Id">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Items/*[starts-with(name(),'Item')]">
        <value>
            <xsl:apply-templates select="@*|node()"/>
        </value>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**（格式不正确）

```
<Id>P</Id>
<value>1</value>
<value>2</value>
<value>3</value>
<Id>P</Id>
<value>4</value>
<Id>P</Id>
<value>5</value>
<value>6</value> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:13:02.130

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="*[not(self::LineId)]"
  use="generate-id(preceding-sibling::LineId[1])"/>

 <xsl:template match="LineId">
  <OtherCharges>
     <LineId><xsl:value-of select="."/></LineId>
     <OtherChargesValues>
       <xsl:apply-templates mode="inGroup"
            select="key('kFollowing', generate-id())"/>
     </OtherChargesValues>
  </OtherCharges>
 </xsl:template>

 <xsl:template match="Items/*" mode="inGroup">
  <value><xsl:value-of select="."/></value>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<OtherCharges>
    <LineId>
        <Id>P</Id>
    </LineId>
    <Items>
        <Item1>1</Item1>
        <Item2>2</Item2>
        <Item3>3</Item3>
    </Items>
    <LineId>
        <Id>P</Id>
    </LineId>
    <Items>
        <Item1>4</Item1>
    </Items>
    <LineId>
        <Id>P</Id>
    </LineId>
    <Items>
        <Item1>5</Item1>
        <Item2>6</Item2>
    </Items>
</OtherCharges> 
```

**产生想要的正确结果：**

```
<OtherCharges>
   <LineId>P</LineId>
   <OtherChargesValues>
      <value>1</value>
      <value>2</value>
      <value>3</value>
   </OtherChargesValues>
</OtherCharges>
<OtherCharges>
   <LineId>P</LineId>
   <OtherChargesValues>
      <value>4</value>
   </OtherChargesValues>
</OtherCharges>
<OtherCharges>
   <LineId>P</LineId>
   <OtherChargesValues>
      <value>5</value>
      <value>6</value>
   </OtherChargesValues>
</OtherCharges> 
```

# javascript - 为什么 Jquery :odd 选择器选择偶数元素？

> ID：12203433
> 
> 赞同：-2
> 
> 时间：2012-08-30T18:43:46.503
> 
> 标签：javascript, jquery

```
<html>
 <head> 
   <script type="text/javascript" src="jquery-1.7.1.js" ></script>
   <script type="text/javascript">
    $(function() {
       $("p:odd").html('pawned');
    });
   </script>
 </head>
<body>
  <p>1</p>
  <p>2</p>
  <p>3</p>
  <p>4</p>
</body>
</html> 
```

输出 -

```
1
pawned
3
pawned 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:44:33.273

因为它使用基于 0 的索引。

`1`是 0 索引（它是偶数）等等。

[参考](http://api.jquery.com/odd-selector/)

数组在 JS 中是从 0 开始的，而 jQuery 对象将元素包装在类似数组的结构中。自然，大多数 jQuery 方法都使用基于 0 的索引，除非另有明确说明 - as [`nth-child()`](http://api.jquery.com/nth-child-selector/)，由于严格派生自[CSS 规范](http://www.w3.org/TR/css3-selectors/#nth-child-pseudo)，它是 1-indexed 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T18:45:44.877

`"In particular, note that the 0-based indexing means that, counter-intuitively, :odd selects the second element, fourth element, and so on within the matched set."`

[参考](http://api.jquery.com/odd-selector/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T18:44:59.650

索引从 0 开始。因此结果请阅读：[http ://api.jquery.com/odd-selector/](http://api.jquery.com/odd-selector/)

# c# - 当转义字符串中的字符时，首先测试是否需要这样做更快？

> ID：12203434
> 
> 赞同：0
> 
> 时间：2012-08-30T18:43:52.800
> 
> 标签：c#, performance, string-comparison

在没有任何字符要转义的情况下，将

```
if (s.Contains("\"")) 
    s = s.Replace("\"", "\"\""); 
```

真的跑得比

```
s = s.Replace("\"", "\"\""); 
```

Contains 方法必须像 Replace 方法一样搜索字符串，如果 Replace 方法没有找到任何要转义的内容，那么我认为它不应该比 Contains 方法花费的时间更长细绳。但是，如果有一个字符要转义，那么您必须在字符串中搜索两次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:09:19.377

一些基本的性能测试，每进行 10 000 000 次（大约 30 个字符的字符串，中间有一个引号），给出：

```
Contains("\"")          1327 ms.
Contains('"')           2949 ms.
Replace("\"", "\"\"")   2528 m.s 
```

`Contains`通话大约需要通话时间的一半`Replace`。我认为寻找一个字符会比寻找一个字符串更快，但令人惊讶的是事实并非如此。

因此，比较首先检查并始终更换以达到收支平衡的情况，其中 x 是`Contains`调用时间，y 是您需要进行更换的频率：

```
x + 2xy = 2x 
```

给出：

```
y = 0.5 
```

这意味着这两种方法的收支平衡在 50% 左右。如果您需要在超过一半的时间内进行替换，则首先检查存在性没有任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:08:01.150

Andre Calil 的微基准修改：

```
 List<string> StringList = new List<string>();

        for (int i = 0; i < 10000; i++)
        {
            StringList.Add(DateTime.Now.Ticks + " abc ");
        }

        string temp;

        KeyValuePair<string, string>[] StringsToReplace = new KeyValuePair<string, string>[6];

        // Use array to avoid dictionary access cost
        StringsToReplace[0] = new KeyValuePair<string,string>("1", ".1.");
        StringsToReplace[1] = new KeyValuePair<string,string>("a", "z");
        StringsToReplace[2] = new KeyValuePair<string,string>("b", "x");
        StringsToReplace[3] = new KeyValuePair<string,string>("c", "v");
        StringsToReplace[4] = new KeyValuePair<string,string>("d", "u");
        StringsToReplace[5] = new KeyValuePair<string,string>("e", "t");

        int TotalIterations = 100;
        Stopwatch stopWatch1 = new Stopwatch();
        Stopwatch stopWatch2 = new Stopwatch();

        GC.Collect(); // remove influence of garbage objects

        for (int j = 0; j <= TotalIterations; j++)
        {
            stopWatch1.Start(); // StopWatch Start/Stop does its own accumation

            for (int i = 0; i < StringList.Count; i++)
            {
                for (int k = 0; k < StringsToReplace.Length; k++)
                {
                    temp = StringList[i].Replace(StringsToReplace[k].Value, StringsToReplace[k].Key);
                }
            }

            stopWatch1.Stop();

            stopWatch2.Start();

            for (int i = 0; i < StringList.Count; i++)
            {
                for (int k = 0; k < StringsToReplace.Length; k++)
                {
                    if (StringList[i].Contains(StringsToReplace[k].Value))
                        temp = StringList[i].Replace(StringsToReplace[k].Value, StringsToReplace[k].Key);
                }
            }

            stopWatch2.Stop();

            if (j == 0) // discard first run, warm only
            {
                stopWatch1.Reset();
                stopWatch2.Reset();
            }
        }

        // Elapsed.TotalMilliseconds return in double, more accurate than ElapsedMilliseconds
        Console.WriteLine("Replace           : {0:N3} ms", stopWatch1.Elapsed.TotalMilliseconds / TotalIterations);
        Console.WriteLine("Contains > Replace: {0:N3} ms", stopWatch2.Elapsed.TotalMilliseconds / TotalIterations); 
```

结果支持直接调用 Replace，因为 50% 的时间需要真正的替换：

```
Replace           : 7.453 ms
Contains > Replace: 8.381 ms 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:56:07.643

如果有人好奇（你不是，相信我），找出需要替换 OP 方法以提高效率的字符串的必要百分比的等式（大致）是这样的：

![是的，没错。](../Images/986c5b354c838e6079a115691513a8c6.png)

在哪里：

```
C = Time it takes to create a new string
R = average Ratio of Delimiter position to string length
n = average string length
p = average position of the delimiter (quote in this case) in the string
t = time it takes to search one character of a string 
```

因此，如果您在其中包含引号的字符串的百分比大于此 - 无论如何，请使用第一种方法。

这并没有考虑到我认为可以忽略不计的变量，例如返回时间、字符的实际替换（尽管您确实可以将其包含在 中`C`），或者我不知道的任何类型的编译器优化。

附带说明：我只花了半个小时解决世界上最没用的方程式，这就是我为什么从数学转向 CS 的一个完美例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T22:23:29.773

新版本：

```
 string test = "A quick brown fox jumps over a lazy dog.";

        int count = 1000 * 1000;

        Stopwatch watch = new Stopwatch();

        for (int i = 0; i < 4; i++)
        {
            string result = String.Empty;

            watch.Restart();

            for (int c = 0; c < count; c++)
            {
                switch (i)
                {
                    case 0: // warmup
                        break;

                    case 1:
                        if (test.Contains("\""))
                        {
                            result = test.Replace("\"", "\"\"");
                        }
                        break;

                    case 2:
                        result = test.Replace("\"", "\"\"");
                        break;

                    case 3:
                        if (test.IndexOf('\"') >= 0)
                        {
                            result = test.Replace("\"", "\"\"");
                        }
                        break;
                }
            }

            watch.Stop();

            Console.WriteLine("Test {0,16} {1,7:N3} ms {2}", 
                new string[]{"Base","Contains-Replace","Replace","IndexOf-Replace"}[i],
                watch.Elapsed.TotalMilliseconds,
                result); 
```

结果：

```
Test             Base   3.026 ms
Test Contains-Replace 284.780 ms
Test          Replace 214.503 ms
Test  IndexOf-Replace  64.447 ms 
```

所以 Contains(string) 本身很慢。原因是由于 NLS（自然语言处理 API。但 IndexOf(char) 快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:45:41.117

这取决于需要修复的字符串与所有字符串的比率。如果必须修复很少的字符串，这肯定是一个胜利。尽管如果没有找到任何匹配项，Replace 肯定不会分配新字符串，但胜利将非常小。这是一个常见的优化。

但是，无法预测收支平衡点。措施。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T18:48:04.537

与所有与性能相关的问题一样，答案是*measure*。

这取决于智能`Replace`程度（它是否“提前”分配任何内存？如果是，那么性能损失有多大？），需要替换的字符串与您处理的字符串总数的比率，长度的字符串，第一个索引`"`位于（`Contains`如果它可以更快返回，则`true`更快）等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T18:48:45.190

[`String.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1)

> 此方法执行序数（区分大小写和不区分区域性）搜索以查找 oldValue。

[`String.Contains`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)

> 此方法执行序数（区分大小写和不区分区域性）比较。搜索从该字符串的第一个字符位置开始，一直到最后一个字符位置。

所以，我会说没有实际的区别。不过，我将在这里进行微基准测试。

* * *

**微基准测试**（伙计，我喜欢这个）

编码：

```
 List<string> StringList = new List<string>();

        for (int i = 0; i < 10000; i++)
        {
            StringList.Add(DateTime.Now.Ticks + " abc ");
        }

        string temp;

        Dictionary<string, string> StringsToReplace = new Dictionary<string, string>();
        StringsToReplace.Add("1", ".1.");
        StringsToReplace.Add("a", "z");
        StringsToReplace.Add("b", "x");
        StringsToReplace.Add("c", "v");
        StringsToReplace.Add("d", "u");
        StringsToReplace.Add("e", "t");

        long ReplaceElapsedTime = 0;
        long ContainsReplaceElapsedTime = 0;

        int TotalIterations = 10000;

        for (int j = 0; j < TotalIterations; j++)
        {
            Stopwatch stopWatch = new Stopwatch();
            stopWatch.Start();

            for (int i = 0; i < StringList.Count; i++)
            {
                foreach (KeyValuePair<string, string> CurrentPair in StringsToReplace)
                {
                    temp = StringList[i].Replace(CurrentPair.Value, CurrentPair.Key);
                }
            }

            stopWatch.Stop();

            ReplaceElapsedTime += stopWatch.ElapsedMilliseconds;

            stopWatch.Reset();
            stopWatch.Start();

            for (int i = 0; i < StringList.Count; i++)
            {
                foreach (KeyValuePair<string, string> CurrentPair in StringsToReplace)
                {
                    if (StringList[i].Contains(CurrentPair.Value))
                        temp = StringList[i].Replace(CurrentPair.Value, CurrentPair.Key);
                }
            }

            stopWatch.Stop();

            ContainsReplaceElapsedTime += stopWatch.ElapsedMilliseconds;
        }

        Console.WriteLine(string.Format("Replace: {0} ms", ReplaceElapsedTime/TotalIterations));
        Console.WriteLine(string.Format("Contains > Replace: {0} ms", ContainsReplaceElapsedTime/TotalIterations));

        Console.ReadLine(); 
```

结果：

```
Replace: 14 ms 
Contains > Replace: 14 ms 
```

=)

# java - 使用 geootools 在多边形中点

> ID：12203439
> 
> 赞同：1
> 
> 时间：2012-08-30T18:44:05.740
> 
> 标签：java, coordinates, geotools

我正在尝试通过从 3 个或更多坐标绘制多边形来设置我的逻辑地理围栏来提取地理点区域，但问题是我认为 LinearRing 需要所有点来关闭对象，任何人都可以让我了解我究竟做错了什么

```
Coordinate[] coordinates = vertices;    
GeometryFactory geometryFactory = new GeometryFactory(new PrecisionModel(PrecisionModel.FIXED), 4326);
LinearRing linearRing = geometryFactory.createLinearRing(coordinates);   
Polygon polygon = geometryFactory.createPolygon(linearRing, null);
setGeometry(polygon); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:50:28.480

没错，LinearRing（和多边形）必须是一个[封闭的环](http://www.vividsolutions.com/jts/javadoc/com/vividsolutions/jts/geom/LinearRing.html)- 它至少需要 4 个点，并且第一个点和最后一个点必须相同。所以我会做类似的事情：

```
Coordinate[] coordinates = new Coordinate[vertices.length+1];
for(int i=0;i<vertices.length;i++){
    coordinate[i] = vertices[i];
}
coordinate[vertices.length] = coordinate[0];
 ..... 
```

# visual-studio-2010 - 以编程方式运行 CUDA 命令行分析器

> ID：12203442
> 
> 赞同：4
> 
> 时间：2012-08-30T18:44:16.020
> 
> 标签：visual-studio-2010, cuda, command, profiler, nvidia

如何以编程方式在 CUDA 分析器下启动 CUDA 命令行应用程序并访问由分析器存储为 .csv 文件的生成分析信息？

背景：

我正在编写一个程序来自动比较等效代码的 CPU 和 GPU 版本之间的性能。该程序将两个可执行文件的路径作为参数，一个用于 CPU，一个用于 GPU。然后，该程序通过在 CUDA 命令行分析器下运行它来分析 GPU 版本并分析结果。

我正在使用 Windows 7。

我想通过使用 system() 或 ShellExecute() 调用来启动分析器。

我必须尝试像这样运行它： system("nvvp + filepath")

我已阅读 Compute Command Line Profiler 用户指南，但在那里没有找到所需的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:16:57.117

欢迎来到堆栈溢出。

总结评论，答案基本上是您不应该以编程方式启动分析器。您最终会得到无效的比较结果，并且分析器不提供内存使用量等指标。

相反，跟踪应用程序中的内存使用情况，使用常规系统调用启动它们并使用[Windows 计时器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644900%28v=vs.85%29.aspx)对其进行计时。

# php - 是否提供对 Web Sockets 的原生 PHP 支持？

> ID：12203443
> 
> 赞同：79
> 
> 时间：2012-08-30T18:44:16.143
> 
> 标签：php, javascript, websocket

寻找 Web Sockets 实现的 Hello World 类型示例：

这是来自 php.net 的[Socket Create](http://www.php.net/manual/en/function.socket-create.php)参考，但这看起来比 Web Sockets 更底层。

我想在[caniuse.com](http://caniuse.com/#search=web%20sockets)上使用这个 Web Sockets，它现在在所有新的主要浏览器中都实现了。

谷歌搜索出现了这个[Nets.TutsPlus 站点](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)，我可以在其中使用 JavaScript 示例代码......但我需要知道如何在 PHP 中实现服务器端，而不是 Java、Ruby 或 Node.js，如示例中所示。

PHP Socket Create 是否相关？PHP 本身是否支持 Web Sockets？我想只是在 PHP 实现的正确方向上的一点会有所帮助。

实际上，本教程的 phpwebsockets 链接断开了……这是应该使用的库吗？

[Websockets.org](http://www.websocket.org)有一个测试应用程序，但没有提到 PHP。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-30T20:02:59.457

就原生可用的标准 PHP WebSocket 对象而言，没有原生支持。

您需要使用库。

接下来要考虑的是 WebSocket 服务器如何运行。通常 PHP 在 Apache、Nginx（通过 FastCGI）或 Microsoft IIS（通过 Fast CGI）上运行。对于 Apache 和 IIS，这可能是个问题，因为它并没有真正考虑 WebSockets 等持久连接。我不确定Nginx。这就是为什么大多数 PHP WebSocket 库将构建为独立库以作为它们自己的进程运行的原因。

看：

*   阿帕奇模块：[https ://github.com/disconnect/apache-websocket](https://github.com/disconnect/apache-websocket)
*   棘轮：[https ://github.com/cboden/Ratchet](https://github.com/cboden/Ratchet)
*   扳手：[https ://github.com/varspool/Wrench](https://github.com/varspool/Wrench)
*   PHP WebSocket：[http ://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)

*注意：IE10 现已在 Windows 8 中发布*

另见：[Ajax 推送系统](https://stackoverflow.com/questions/7594425/ajax-push-system/7596103#7596103)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2021-01-30T23:25:01.737

是的，可以非常简单地实现 PHP + Websocket，**无需**任何第三方库（如 Ratchet，经常提到）。

本文是一个很好的[轻量级](https://medium.com/@cn007b/super-simple-php-websocket-example-ea2cd5893575)示例。（我在复杂的解决方案上浪费了几个小时，所有这些解决方案都包括一些库，直到我发现这篇有用、简单的文章）

您可以在此处找到有关此内容的更详细说明：[如何在 PHP 中创建 websockets 服务器](https://stackoverflow.com/questions/14512182/how-to-create-websockets-server-in-php/65974136#65974136)。

它使用一个持续运行的 PHP 服务器，你从命令行开始`php websockets.php`，带有一个事件循环（类似于 Node.JS 的方式）。100% 可以使用原生 PHP 函数`socket_create`，例如 等。

# ios - Xcode 4.5 和 iOS 6 在雪豹上

> ID：12203444
> 
> 赞同：4
> 
> 时间：2012-08-30T18:44:26.090
> 
> 标签：ios, xcode, sdk, installation, osx-snow-leopard

我希望开始 iOS 6 开发。我早在 iOS 4 上开发，现在我的机器上运行着 Xcode 4.2。我也有一些来自以前 iOS 版本的项目。

我想下载最新的开发者版本 Xcode 4.5 + iOS 6 并开始在我的系统上开发，但是我不想丢失我之前编写的项目。我希望能够编译它们并在模拟器中运行它们。

我有以下问题：

*   我可以在 Snow Leopard 上安装和运行 Xcode 4.5 吗？

*   一旦我安装了 Xcode 4.5 会升级我现有的 Xcode 安装吗？

*   如果我现有的 Xcode 安装被 Xcode 4.5 覆盖，我能否在新的 Xcode 上从 iOS 3+ 和 iOS 4+ 运行我的应用程序？

*   如果 Xcode 4.5 在我的 Mac 上作为单独安装安装，我可以同时运行两个 Xcode 版本吗？该安装的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:21:24.590

由于 NDA，我不能谈论 Xcode 4.5，但我可以根据 Xcode 4.3 和 4.4 回答您的一些问题。

* * *

*   我可以在 Snow Leopard 上安装和运行 Xcode 4.5 吗？

不，Xcode 4.2 是 Snow Leopard 上最后一个支持的版本

*   一旦我安装了 Xcode 4.5 会升级我现有的 Xcode 安装吗？

即使您无法在 Snow Leopard 上升级，除了 Xcode 4.0-4.2 之外，Lion Xcode 4.3+ 也会安装，并将`Developer`文件夹移动到 Xcode.app 内部。

*   如果我现有的 Xcode 安装被 Xcode 4.5 覆盖，我能否在新的 Xcode 上从 iOS 3+ 和 iOS 4+ 运行我的应用程序？

不能真正谈论 Xcode 4.5，但在 4.4 上，您可以通过 Lion 上的 Xcode 首选项窗口手动下载带有 4.3 的 iOS 5 模拟器，但您只能在 Mountain Lion 上使用 iOS 5 模拟器。但是，您可以在真实设备上测试 iOS 3+。

*   如果 Xcode 4.5 在我的 Mac 上作为单独安装安装，我可以同时运行两个 Xcode 版本吗？该安装的最佳实践是什么？

在这种情况下，您必须在 Lion 下安装 Xcode 4.2 和 4.5。这应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T14:06:24.170

“Xcode 4.2 是 Snow Leopard 上最后一个受支持的版本。” - 很高兴我找到了这个。

出于某种原因，无法通过 iOS 开发者门户获取 Xcode 4.2 Snow Leopard Image。它是为 Lion 提供的，但可用的 Snow Leopard 的最新版本是 3.2.5。

但是，它可以通过 Mac Developer Portal 获得，正如我在这里找到的： ![在此处输入图像描述](../Images/8d97554c50bdb149405d74ddb853fc93.png)

荒谬，但很可能在他们身上混淆了。

# php - 获取空数组尝试使用属性解析 xml

> ID：12203451
> 
> 赞同：0
> 
> 时间：2012-08-30T18:44:47.637
> 
> 标签：php, xml, xpath, xml-parsing

我正在尝试解析带有属性的 xml 文件，并不断得到一个空数组。这是 xml 的示例，它被解析为 simplexml_load_string：

```
 <NumberOfOfferListings>
    <OfferListingCount condition="Any">61</OfferListingCount>
    <OfferListingCount condition="Used">45</OfferListingCount>
    <OfferListingCount condition="New">16</OfferListingCount>
  </NumberOfOfferListings> 
```

这是我正在使用的 php 代码

```
$priceComp_xml = amazonCompPrice_xml($asin);
$compPricing = $priceComp_xml->xpath('OfferListingCount[@condition="Any"]'); 
```

amazonCompPrice($asin) 是根据 ASIN 值解析的 xml 文件。

我只需要提取：

```
<OfferListingCount condition="Any">61</OfferListingCount> 
```

为了达到这一点，我查看了这里的许多示例，看起来我所拥有的是正确的，当我使用 print_r($compPricing) 或 var_dump 时，它只返回一个空数组。我该如何解决这个问题以获得我需要的信息？我可以上传更多有助于解决此问题的代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:01:50.743

这里（至少）有两个不同的问题在起作用。

### XPath

您的 XPath, `OfferListingCount[@condition="Any"]`, 只会返回匹配`<OfferListingCount>`的元素，这些元素是`$priceComp_xml`. 它不会匹配作为孙子的*后代*元素，或者更远的树。

因此，需要对其进行修改以匹配`<OfferListingCount>`元素。通常使用速记`//`（的缩写`/descendant-or-self::node()/`）的快速解决方法，例如`//OfferListingCount[@condition="Any"]`.

### 命名空间

您的问题没有提到这一点，但一些挖掘发现 XML 文档可能应用了默认命名空间。这可以通过查看 的文档元素来识别`xmlns="…"`。使用XPath时，需要[注册](http://php.net/simplexmlelement.registerxpathnamespace)这个命名空间，查询时使用。

```
$priceComp_xml->registerXPathNamespace('products', 'http://mws.amazonservices.com/schema/Products/2011-10-01');
$compPricing = $priceComp_xml->xpath('//products:OfferListingCount[@condition="Any"]'); 
```

最后，请记住它`SimpleXMLElement::xpath()`返回一个*数组*，因此您的匹配`<offerListingCount>`元素将作为`$compPricing[0]`.

```
$count = (int) $compPricing[0]; 
```

# cloudbees - 增加 max_user_connections

> ID：12203452
> 
> 赞同：1
> 
> 时间：2012-08-30T18:44:48.973
> 
> 标签：cloudbees

我们的 Run@CloudDB 正在运行 20 个 max_user_connections。我们尝试交换到付费数据库，但它也有相同的 20 个限制。我们如何获得更改或获得超级特权帐户来更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:10:45.663

托管 MySQL 服务的限制为 20 - 通常 20 是应用程序的大量连接 - 连接池负责其余部分。一个专用的 MySQL 数据库计划（或类似 RDS 的东西）可能会让您选择使用更多 - 但最好找到可能的连接“泄漏”的原因，如果可能的话，它会达到限制。

# scala - 播放框架：通过模板传递多个隐式参数

> ID：12203453
> 
> 赞同：1
> 
> 时间：2012-08-30T18:44:52.963
> 
> 标签：scala, playframework-2.0

我正在使用 Play 2.0.2，但在一个特定的视图模板设置中存在隐式参数问题。我会尽我所能描述它，但这并不完全是微不足道的，所以我提前为任何混淆道歉。

问题的核心是我称之为“一块”的模板。piece 采用以下参数：

```
@(piecesData: objects.PiecesDataRequest)(implicit content: Html) 
```

content 参数是隐式的，因为我从另一个模板以及控制器调用此模板。我找不到将“空”Html 从控制器显式传递给片段模板的方法，但是如果我隐式传递内容参数，它就可以工作。使用片段的模板是“pieceUploadModal”，它采用以下参数：

```
@(piecesData: objects.PiecesDataRequest, 
  pieceData: objects.PieceDataRequest, dialogTitle: String) 
```

并像这样调用片断：

```
@pieces(piecesData){ [Html] } 
```

现在我想添加第二个隐式参数来改变它的参数列表：

```
@(piecesData: objects.PiecesDataRequest)(implicit content: Html, user: User) 
```

然后我假设我也需要更改pieceUploadModal模板参数：

```
@(piecesData: objects.PiecesDataRequest, 
  pieceData: objects.PieceDataRequest, dialogTitle: String)(implicit user: User) 
```

一切顺利......但是，我得到一个不是很有帮助的错误：

```
pieceUploadModal.template.scala:24: not enough arguments for method apply: 
(implicit      content: play.api.templates.Html, 
implicit user: models.User)play.api.templates.Html in object pieces.
[error] Unspecified value parameter user.
[error] """),_display_(Seq[Any]
(/*3.2*/views/*3.7*/.html.content.pieces(piecesData)/*3.39*/
{_display_(Seq[Any] (format.raw/*3.40*/(""" 
```

几个小时以来，我一直试图让它以多种不同的方式工作，并进行了大量的互联网搜索，但无济于事。任何帮助，将不胜感激。

作为最后一条信息，我将补充一点，我在这里使用的传递用户的范例隐式地适用于我所有其他*未*使用隐式 Html 参数的模板，即我认为这是问题的症结所在.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:15:36.020

> 我找不到将“空”Html 从控制器显式传递给片段模板的方法

空 Html 可以使用 传递`Html("")`，您甚至可以将其定义为默认值。

但最后你只需要听编译器 - 它永远不会说谎。从您的评论中，我了解到这是您定义模板的方式：

`(piecesData: controllers.objects.PiecesDataRequest)(content: play.api.templates.Html)(implicit user: models.User)`

这就是你所说的：

`views.html.content.pieces(PiecesDataRequest( Piece.getPiecesForContentFeed(contentFeedID), contentFeedID), Html(""))`

您定义了三个括号，但您只调用了两个。像这样做：

```
Ok(
   views.html.content.pieces(
       PiecesDataRequest(Piece.getPiecesForContentFeed(contentFeedID), contentFeedID))(Html(""))
   )
) 
```

# matlab - 保存符号方程供以后使用？

> ID：12203456
> 
> 赞同：0
> 
> 时间：2012-08-30T18:45:00.903
> 
> 标签：matlab

从[这里开始](http://www.mathworks.com/help/releases/R2011a/toolbox/symbolic/brvfu8o-1.html#brvfxem-1)，我试图解决这样的符号方程组

```
syms x y z;
[x, y, z] = solve('z = 4*x', 'x = y', 'z = x^2 + y^2')
x =
0
2

y =
0
2

z =
0
8 
```

除了我的方程是在 m 文件中的不同点和随机系数生成的。我的问题是如何完成以下...

```
// Generate the first equation.
n = *random number generated here*;
E1 = (z == n*x + 2*n);   // <--- How to save this symbolic equation to use in "solve(...)" later?

// Other work, generate other eqs.
...

// Solve system of eqs.
[x, y, z] = solve( E1 , E2, E3)   // What/How to call/use the previously saved symbolic equations. 
```

谢谢您的帮助！

**编辑**

更新以更好地解释目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:56:46.043

如果[`sprintf`](http://www.mathworks.com/help/techdoc/ref/sprintf.html)您想保留随机生成的值以`n`供以后使用，请使用`solve`：

```
n = *random number generated here*;
E1 = (z == n*x + 2*n);
Eq1 = sprintf('z == %f*x + 2*%f',n,n); 
```

您可以使用参数`%f`来查看您想要包含多少精度。

# delphi - Delphi：Create（）构造函数末尾的访问冲突

> ID：12203457
> 
> 赞同：8
> 
> 时间：2012-08-30T18:45:04.030
> 
> 标签：delphi, delphi-xe2

我有一个非常基本和简单的类，如下所示：

单元装载机；

```
interface

uses
  Vcl.Dialogs;

type
  TLoader = Class(TObject)
  published
      constructor Create();
  end;

implementation

{ TLoader }    
constructor TLoader.Create;
begin
   ShowMessage('ok');

end;

end. 
```

从 Form1 我这样称呼它：

```
procedure TForm1.Button1Click(Sender: TObject);
var
 the : TLoader;
begin
  the := the.Create;
end; 
```

现在，就在这`the := the.Create`部分之后，delphi 显示消息，`'ok'`然后给我一个错误并说`Project Project1.exe raised exception class $C0000005 with message 'access violation at 0x0040559d: read of address 0xffffffe4'.`

它还显示了这一行：

```
constructor TLoader.Create;
begin
   ShowMessage('ok');

end; // <-------- THIS LINE IS MARKED AFTER THE ERROR. 
```

我是德尔福的新手。我正在使用 Delphi XE2，但我无法修复此错误。有没有人给我指路或有解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T18:45:55.483

```
var
  the : TLoader;
begin
  the := the.Create; 
```

是不正确的。它应该是

```
var
  the : TLoader;
begin
  the := TLoader.Create; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T18:46:51.207

你的语法错误。如果你正在构造一个新对象，你应该在构造函数调用中使用类名，而不是变量名：

```
procedure TForm1.Button1Click(Sender: TObject);
var
 the : TLoader;
begin
  the := TLoader.Create;
end; 
```

# php - 在 Apache 内的 PHP 脚本中使用 ZeroMQ

> ID：12203460
> 
> 赞同：5
> 
> 时间：2012-08-30T18:45:12.097
> 
> 标签：php, apache, zeromq

我想使用 ZeroMQ 发布者/订阅者将数据从我的 Web 应用程序分派到多个服务器。

我将 Apache 和 PHP 用于 Web 应用程序，我的 php 脚本的工作方式如下：

```
//Initialization
$context = new ZMQContext();
$publisher = $context->getSocket(ZMQ::SOCKET_PUB);
$publisher->bind("tcp://*:5556");

//Then publishing for testing:

$publisher->send("test");
$publisher->send("test");
$publisher->send("test");
$publisher->send("test");
$publisher->send("test"); 
```

为了测试，我从 python 的文档中改编了一个订阅者：

```
import sys
import zmq

#  Socket to talk to server
context = zmq.Context()
socket = context.socket(zmq.SUB)

socket.connect ("tcp://localhost:5556")

# Subscribe to zipcode, default is NYC, 10001
socket.setsockopt(zmq.SUBSCRIBE, "")

print "Waiting..."
# Process 5 updates
for update_nbr in range (5):
    string = socket.recv()
    print string 
```

当我从命令行运行 php 脚本但不能通过 Apache 运行时（当脚本通过 Web 浏览器运行时），整个事情都有效。

我应该对我的 Apache 配置做些什么来使其正常工作吗？

谢谢

亚历山大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:19:20.697

似乎唯一的问题是连接没有时间建立。

在绑定之后和发送之前在发布者上添加睡眠确实解决了问题，即使不是很优雅。

这个问题在这里解释：

[http://zguide.zeromq.org/page:all#Getting-the-Message-Out](http://zguide.zeromq.org/page:all#Getting-the-Message-Out)

# python - 为什么函数注解需要 Python 中的专用语法？

> ID：12203468
> 
> 赞同：5
> 
> 时间：2012-08-30T18:45:36.653
> 
> 标签：python, syntax, python-3.x

函数注释似乎复制了 Python 中已经发现的行为。不仅如此，它们的含义并未以任何方式强制执行，因此它们可用于[PEP 3107](http://www.python.org/dev/peps/pep-3107/)中记录的以下任何内容：

> *   提供打字信息
> *   类型检查
> *   让 IDE 显示函数期望和返回的类型
> *   函数重载/泛型函数
> *   外语桥梁
> *   适应
> *   谓词逻辑函数
> *   数据库查询映射
> *   RPC 参数封送
> *   其他信息
> *   参数和返回值的文档

甚至是完全不同的东西。

在某种程度上，函数注释让我想起了[Python 幽默](http://www.python.org/doc/humor/)合集中的一个老笑话：

> 事实上，Python 已经支持块分隔符：
> 
> ```
> >
> >     if foo: #{
> >         foo1();
> >         foo2();
> >         foo3();
> >     #} 
> ```

在那里面

```
def foo(a: 'x', b: 5 + 6, c: list) -> max(2, 9):
    ... 
```

没有比以下更有帮助的：

```
# a: 'x', b: 5 + 6, c: list
def foo(a, b, c):  #-> max(2, 9):
    ... 
```

有人可能会争辩说函数注释是必要的，因为与注释不同，它们可以从代码中访问，例如：

```
>>> def spam(a: 'eggs') -> 'ni!':
...     pass
...
>>> spam.__annotations__
{'a': 'eggs', 'return': 'ni!'} 
```

尽管可以使用装饰器轻松实现相同的行为，例如：

```
def param(**kw):
    def decorator(func):
        def wrap(*args):
            print kw
            func(*args)
        return wrap
    return decorator

def return_(arg):
    def decorator(func):
        def wrap(*args):
            func(*args)
            print arg
        return wrap
    return decorator

@param(a='eggs')
@return_('ni!')
def spam(a):
    pass

spam(None)

# Output:
# -------
## {'a': 'eggs'}
## ni! 
```

Python 已经可以做注解的事情了，那为什么函数注解需要专门的语法呢？

**编辑：**我将对我的问题进行一些扩展，因为它的含义变得有点不清楚。

我专门问这个问题是关于函数注释而不是装饰器，其中

```
@decorator
def spam():
    pass 
```

简称

```
def spam():
    pass
spam = decorator(spam) 
```

和方法调用，其中

```
self.method(param) 
```

简称

```
Class.method(self, param) 
```

有了这两个速记句法快捷方式，它们的含义**就不会**改变。我不是在问为什么在已有替代方案的情况下需要这样的捷径；这是一个可读性问题。函数注释与这两个快捷方式略有不同，因为

```
def spam() -> int:
    pass 
```

和

```
def spam() -> 'integer':
    pass 
```

可能与人类具有相同的含义，但与计算机具有不同的含义。即使程序员知道*注释*应该定义什么，也没有就注释*如何*定义它达成一致的定义。此外，注释不会影响功能，因此不需要保持一致。

所以这是我修改后的问题：

当函数注释提供了一种可变且可能不一致的方式来访问已经存在的语言特性时，为什么它们需要专门的语法？为什么没有关于*如何*使用注释的强制定义，而对于它们的用途有一个完美的定义*（* PEP 3107）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T18:53:31.443

您链接到的 PEP 3107 似乎在其“基本原理”部分中为您的问题提供了答案：

> 基本原理
> 
> 由于 Python 的 2.x 系列缺乏注释函数参数和返回值的标准方法，因此出现了各种工具和库来填补这一空白。一些使用“PEP 318”中引入的装饰器，而另一些则解析函数的文档字符串，在那里寻找注释。
> 
> 此 PEP 旨在提供一种单一的、标准的方式来指定此信息，从而减少由迄今为止存在的机制和语法的广泛变化引起的混淆。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T18:54:17.363

装饰器语法的意义何在？它不允许你做任何你以前不能做的事情：

```
@staticmethod
def foo():
    pass 
```

只是

```
def foo():
    pass
foo = staticmethod(foo) 
```

但是装饰器语法更好。

在这两个中，哪个更好：

```
@param(a='eggs')
@return_('ni!')
def spam(a):
    pass

def spam(a: 'eggs') -> 'ni!':
    pass 
```

意见可能不同，但我认为第二个更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T19:23:51.667

我非常喜欢类型注释，因为它们可以被我的 IDE PyCharm 识别。通过注释类型，PyCharm 将在我编码时知道变量的类型。这使我可以在一个我可能不完全记住名称的类中找到所需的函数，并在不实际查看该类的代码/文档的情况下查找它们。

正如您所说，与注释不同，类型注释可以从代码中访问。这是一笔巨大的交易，因为它允许创建确保类型的类并根据成员指定的类型提供其他功能。

# c# - 从流中读取的函数行阻塞

> ID：12203476
> 
> 赞同：1
> 
> 时间：2012-08-30T18:45:47.633
> 
> 标签：c#, loops, stream, stack-trace, execution

我编写了以下 C# 函数：

```
static string ReadLineCRLF(System.IO.Stream Stream, ref byte[] sharedBuffer, int bufferSize = 1024)
{
    StringBuilder responseString = new StringBuilder("");
    string returnString = "";
    byte[] buffer = new byte[bufferSize];
    bool stopreading = false;
    bool firstexecution = true;
    while (!stopreading)
    {
        int readBytes;
        if (firstexecution && sharedBuffer.Length > 0)
        {
            readBytes = sharedBuffer.Length;
            sharedBuffer.CopyTo(buffer, 0);
        }
        else
        {
            readBytes = Stream.Read(buffer, 0, bufferSize); //BLOCKING HERE
        }
        firstexecution = false;
        if (readBytes > 0)
        {
            int crIndex = Array.IndexOf(buffer, (byte)13); //13 = ASCII value for a carriage return
            if (crIndex > -1 && Array.IndexOf(buffer, (byte)10, crIndex + 1) == crIndex + 1) //10 = ASCII value for line feed
            {

                stopreading = true;
                sharedBuffer = readBytes - crIndex - 2  > 0 ? ArraySlice<byte>(buffer, crIndex+2, readBytes-crIndex-2) : new byte[] { };
                readBytes = crIndex;
            }
            if (readBytes > 0)
            {
                responseString.Append(System.Text.Encoding.ASCII.GetString(buffer, 0, readBytes));
            }
            if (stopreading)
            {
                returnString = responseString.ToString();
            }
        }
        if (!stopreading && readBytes <= 0)
        {
            returnString = null;
            stopreading = true;
            sharedBuffer = new byte[] { };
        }
    }
    return returnString;

} 
```

`readBytes = Stream.Read(buffer, 0, bufferSize);`根据我的堆栈资源管理器，此功能被阻塞并消耗了大量计算机性能。这个函数唯一应该做的就是从一个只以 CRLF ("\r\n") 结束的流中读取一行。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx) `Stream.Read`的返回`less than the number of bytes requested if that many bytes are not currently available, or zero (0) if the end of the stream has been reached.`，它通常应该阻塞而不是耗尽 CPU 性能。`The implementation will block until at least one byte of data can be read, in the event that no data is available. Read returns 0 only when there is no more data in the stream and no more is expected (such as a closed socket or end of file)`.

那么，根据我的 CLR Stack Explorer 的说法，为什么它会消耗如此多的性能（高达 70%）？我没有看到任何逻辑错误，我认为它应该等到可以接收到一些字节。似乎这种行为并不总是发生，而是在 Windows 服务器上开始执行应用程序后一两天发生。

附加说明：由于使用块读取字节，可能是读取了太多字节并将其存储在缓冲区中。因此我使用了一个共享缓冲区，允许它再次使用它来继续阅读下一行。完全读取一行后，我将其从缓冲区中删除。

ArraySlice 函数如下所示：

```
public static T[] ArraySlice<T>(T[] data, int index, int length)
{
    T[] result = new T[length];
    Array.Copy(data, index, result, 0, length);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:04:28.623

你怎么知道这`Read`是阻塞的，而不仅仅是花一些时间来做它需要做的事情？

IO很贵；我完全期望在此方法中花费的大量时间在`Read`调用中。你说的 70% 听起来是对的。您似乎没有滥用该方法，因此阅读所花费的时间百分比越高，实际上意味着执行其他所有操作的开销越少。与其认为它浪费了 70% 的时间在阅读上，不如说是浪费了 30% 的时间在非阅读活动上。不错的统计数据，但也并非没有改进的余地。

不过，在深入研究之前，请确保您不在微优化领域。我现在可以告诉你，看起来你并没有做错，所以除非你已经对你的代码进行了基准测试并确定它的运行速度比你的要求可以接受的慢，否则不要担心性能. 如果您的程序执行速度不够快，无法完成工作，那么您需要从当前需要多长时间以及“足够快”需要多长时间开始。

# c# - 将标签文本转换为十进制

> ID：12203481
> 
> 赞同：0
> 
> 时间：2012-08-30T18:46:13.327
> 
> 标签：c#, asp.net, label

我想知道您是否可以将标签转换为小数。我知道这可以通过文本框来完成，但我正在尝试查看它是否适用于标签。这是代码，我收到错误输入消息。

```
Label sitL = ((Label)FormView2.FindControl("SitUpsLabel"));
Label pushL = ((Label)FormView2.FindControl("pushUpsLabel"));
int count = 0;
int counter2 = 0;
decimal val = Decimal.Parse(sitL.Text);
decimal val2 = Decimal.Parse(pushL.Text); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:48:09.857

这样做没问题，但是您不会像为文本框那样在客户端设置值。标签未发布到服务器，在我看来，您正在尝试处理用户输入。

话虽如此，请检查标签的内容是否可以转换为十进制。[`Decimal.TryParse`](http://msdn.microsoft.com/en-us/library/9zbda557.aspx)如果字符串无法转换，您可以使用将返回 false 而不是抛出异常的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:48:51.320

问题是您的标签未从客户端发布在服务器上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:13:15.810

因为你想要一个标签的值，它不能被用户发布；我可以很确定这个数据是通过调用绑定到那个标签中的`DataBind`。

由于您自己正在向标签提供数据，因此如果您需要处理这些数据，有一种更好的方法来获取这些数据。

您应该使用 FormView 的[DataItem](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.dataitem.aspx) 属性。

> 此属性返回的 Object 的类型因数据源而异。例如，当 SqlDataSource 控件绑定到 FormView 控件时，将返回一个 DataRowView 对象。

像这样：

```
var myData = (DataRowView)FormView2.DataItem;
decimal val = myData["sitL"];
decimal val2 = myData["pushL"]; 
```

# objective-c - 内存管理中的问题

> ID：12203482
> 
> 赞同：-1
> 
> 时间：2012-08-30T18:46:14.583
> 
> 标签：objective-c, ios, memory-management, exc-bad-access

内存问题有如下代码：

有 EXC_BAS_ACCESS

```
@interface MapList : NSObject
{
    NSArray* m_units;
}
-(MapList*) loadMapListWithLevel:(uchar) lvl chapter: (uchar) chapt;
-(void) dealloc;
@end 
```

和实施：

```
-(MapList*) loadMapListWithLevel:(uchar) lvl chapter: (uchar) chapt
{
    self =[super init];
    if (self)
    {
         {
            ...

            NSMutableArray* array = [[NSMutableArray alloc] initWithCapacity:size];

            for (uint j=0;j<size;j++)
            {
                obj =[[SpriteDB alloc] init];
                [array addObject:obj];
                [obj release];
            }
            if (i==0)
                m_units = [NSArray arrayWithArray:array];

            [array release];
        }
        ...
    }
    return self;
}

-(void) dealloc
{
    [m_units release];
    [super dealloc];
} 
```

在一种方法中，我这样称呼它们

```
MapList* mpl = [[MapList alloc] loadMapListWithLevel:level chapter:chapter];
[mpl release]; 
```

问题出在哪里？当我评论`[m_units release];`它的工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:48:52.077

`m_units = [NSArray arrayWithArray:array];`给你一个自动释放的价值。当您进行第二次释放时，您已过度释放此对象。即使在运行循环返回后访问该值也会给您带来内存问题。保留这个值，并在你的 dealloc 上释放它。此外，您应该使用[properties](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html)。

# vim - 如何重新格式化 vimoutliner 中的选项卡？

> ID：12203484
> 
> 赞同：1
> 
> 时间：2012-08-30T18:46:15.777
> 
> 标签：vim, tabs, macvim, outline

我正在尝试标准化 Vimoutliner 来定义 IT 项目。该插件具有多级标题的能力，这些标题使用适当数量的制表符缩进。

每个制表符由“>...”表示（顶部下方的每一级标题都有一个）。

标题下的段落继承标题缩进的空间，并以'：'为前缀

我想将选项卡的 VISIBLE 表示更改为一系列空格，系列的结尾以“|”结尾 （管道）。所以第三层标题看起来像

```
>...>...>... 
```

现在看起来像

```
 | 
```

请注意，我不想在事后更改行，而是要影响制表符的原始外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:23:14.173

如果你的 vim 是用 +conceal 编译的，你可以用 hide 来完成这个（你可以检查是否`:echo has("conceal")`返回 1）。首先你需要把

```
set conceallevel=1 
```

在你的 ~/.vimrc 中。然后你可以这样做：

```
syntax match Entity ">..." conceal 
```

另见`:help hl-Conceal`和`:help concealcursor`。

# php - PHP 类封装选项

> ID：12203485
> 
> 赞同：2
> 
> 时间：2012-08-30T18:46:23.310
> 
> 标签：php, oop

在最近的阅读中，我看到关于封装方法和 OOP 最佳实践的相互矛盾的建议。

我正在开始开发一系列 PHP 类，这些类将用于将数据从多个源系统传输和转换到最终目的地。因此，第一类的属性是包含源 URL 和身份验证值。

以下哪项最适合具有无限扩展潜力的长期项目？

1.  声明为公共属性。构建类时为每个源在外部设置值。优点：简单。缺点：没有封装优势

2.  使用 __get 和 __set。在外部为每个源设置值。优点：遵循 OOP 约定。缺点：对外部访问全部开放；再次，没有封装

3.  将属性声明为受保护。对于我需要使用的每个源系统，扩展原始类并在子类中设置属性。Pro:OOP 封装。缺点：需要管理更多的类和潜在的文件。

目前，选项 3 似乎是最好的，尽管文件开销很大。我也对其他想法持开放态度。

我为这个问题阅读的参考资料：

[http://typicalprogrammer.com/?p=23](http://typicalprogrammer.com/?p=23)

[Getter 和 Setter？](https://stackoverflow.com/questions/4478661/getter-and-setter)

[http://www.php.net/manual/en/language.oop5.overloading.php](http://www.php.net/manual/en/language.oop5.overloading.php)

[独立的 getter/setter 方法，还是组合？](https://stackoverflow.com/questions/6674784/php-oop-independent-getter-setter-methods-or-combined)

[http://martinfowler.com/bliki/GetterEradicator.html](http://martinfowler.com/bliki/GetterEradicator.html)

[是否值得在 OOP 中使用 get 和 set 方法？](https://stackoverflow.com/questions/10616866/is-it-worth-making-get-and-set-methods-in-oop)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:53:59.637

至少还有一个选择：将这些参数注入到构造对象中，并通过 getter 使它们成为只读的“属性”。仅通过工厂构造对象（您也可以强制执行此操作，但我不确定这样做是否有任何切实的好处）。

工厂可以在启动时进行配置（这可能是一个优点），只有一类传输，消费者只能以它选择的公开方式（封装）查看每个传输的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:53:10.027

选择三，但您实际上应该将它们设为私有。（请注意，除了您列出的三个选项之外，还有更多选项，这不一定是最佳选择，但我没有足够的信息来为您决定。）其他两个选项对于开发可扩展的 OOP 应用程序都不是特别有用.

# c# - Linq to SQL 对象类生成

> ID：12203489
> 
> 赞同：2
> 
> 时间：2012-08-30T18:46:39.483
> 
> 标签：c#, linq, linq-to-sql

我想知道是否有一种方法可以从数据库模式生成对象类程序集，而不是手动创建类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:53:14.870

您可以使用：

*   [LINQ to SQL 中的代码生成。](http://msdn.microsoft.com/en-us/library/bb399400.aspx)或者
*   [SqlMetal.exe](http://msdn.microsoft.com/en-us/library/bb386987.aspx)：类似于

> sqlmetal.exe /服务器：。/database:projectname /map:outputDB.xml /code:Projectname.Domain.Entities.cs /functions /sprocs /namespace:Projectname.Domain

# android - 如何恢复我的 Android 全屏键盘？

> ID：12203490
> 
> 赞同：3
> 
> 时间：2012-08-30T18:46:43.210
> 
> 标签：android, keyboard, preferences

我有一个从 android 1.5 到 4.0 的应用程序。Android 4.1 导致简单的 EditTextPreference 出现问题。该应用程序始终处于横向模式。当我提出团队名称时，它看起来像这样。

[图 1 http://myweb.midco.net/hgs/s1.jpg](http://myweb.midco.net/hgs/s1.jpg)

然后，当我单击编辑文本字段时，它总是看起来像这样。

[图 1 http://myweb.midco.net/hgs/s2.jpg](http://myweb.midco.net/hgs/s2.jpg)

但在我的模拟器中以及对搭载 Android 4.1 的三星 Galaxy Tab 2 的投诉中，我明白了这一点。

[图 1 http://myweb.midco.net/hgs/s3.jpg](http://myweb.midco.net/hgs/s3.jpg)

这会破坏文本字段。将清单更改为

```
android:windowSoftInputMode="stateVisible|adjustResize" 
```

或者

```
android:windowSoftInputMode="stateVisible|adjustPan" 
```

没有帮助。将标题留空确实会关闭标题，但您仍然看不到编辑文本。这是此 Pref 的代码。

```
EditTextPreference teamnamePref = new EditTextPreference(this);  
teamnamePref.setTitle("Team Name"); 
teamnamePref.setKey( "t" + Team_ID );
teamnamePref.setSummary(TheTeamName); 
teamnamePref.setDialogTitle("Enter Name For Team " + Team_ID);
teamnamePref.setDefaultValue(TheTeamName);
teamnamePref.getEditText().setSingleLine(true);
TeamCategory.addPreference(teamnamePref); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T03:37:12.197

我创建了一种方法来解决这个错误（在三星 Galaxy S3、Acer A501 和 HTC Desire X 上测试）：

```
// This method provides a work-around for a bug with EditTextPreference and the Samsung soft keyboard.
// When in landscape mode, the Samsung keyboard can obscure the text box, as it does not use fullscreen 
// / extract mode like other keyboards do in this case.  So we manually show an alert dialog with an
// EditText control, and update the preference value manually.
//
// Usage:
// Create a normal <Preference> in your XML file, then in your corresponding fragment, retrieve the 
// preference object using its key and pass it to this method. E.g.
//
//    EditTextPreferenceHelper.CreateEditTextPreferenceDialog(
//         getActivity(), 
//         findPreference("yourPrefKey"));
public static void CreateEditTextPreferenceDialog(final Context context, Preference preference) {
    preference.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        @Override
        public boolean onPreferenceClick(final Preference preference) {

            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setTitle(preference.getTitle());
            final EditText textBox = new EditText(context);
            textBox.setImeOptions(EditorInfo.IME_ACTION_DONE);
            textBox.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_SUBJECT);
            textBox.setText(PreferenceManager.getDefaultSharedPreferences(context).getString(preference.getKey(), ""));

            builder.setView(textBox);
            builder.setPositiveButton("OK", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    PreferenceManager.getDefaultSharedPreferences(
                            context).edit().putString(preference.getKey(), 
                            textBox.getText().toString()).commit();
                    dialog.dismiss();
                }
            });
            builder.setNegativeButton("Cancel", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            });
            builder.create().show();
            return false;
        }
    });        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T05:21:05.880

像这样的东西应该可以完成这项工作。您始终可以将软输入标志修改为其他内容，例如 adjustPan。以前对您不起作用的原因是 EditTextPreference 覆盖了这些选项。

```
import android.content.Context;
import android.os.Bundle;
import android.preference.EditTextPreference;
import android.view.Window;
import android.view.WindowManager;

public class CustomEditTextPref extends EditTextPreference
{
    public CustomEditTextPref(Context context)
    {
        super(context);
    }

    @Override
    protected void showDialog(Bundle state)
    {
        super.showDialog(state);
        Window window = getDialog().getWindow();
        window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
    }
} 
```

# javascript - Rad-grid 编辑模式启用通过复选框选择的 java 脚本禁用所需的字段验证器

> ID：12203491
> 
> 赞同：1
> 
> 时间：2012-08-30T18:46:44.583
> 
> 标签：javascript, gridview, telerik, telerik-grid

我在 RadGrid 中有一个复选框、下拉列表和必填字段验证器。我想在选择复选框时为下拉菜单启用禁用所需的归档验证器。现在，下面的 Java 脚本代码确实在编辑模式下启用和禁用了所需的字段验证器。

但是，当我单击 rad 网格编辑模式更新按钮（复选框未选中并且下拉框选择的值也为空（“”）时，它会等待一会儿（可能会回发）并再次触发所需的字段验证器。

知道为什么它会这样。帮助欣赏。

我从下面的链接获得了控制访问部分。 [从 javascript 访问 Telerik RadGrid 编辑模式](https://stackoverflow.com/questions/9719707/accessing-telerik-radgrid-edit-mode-from-javascript)

我的 Rad 网格标记：

```
 <EditItemTemplate>
<asp:CheckBox ID="chkConfigurable" runat="server" Checked='<%# Bind("Configurable") %>'
  </EditItemTemplate> 
```

这是我的java脚本代码：

// 启用或禁用必填字段验证器取决于复选框选择

```
 function EnableDisbaleConfigRfv(chkbx) {

        var grid = $find("<%=rgItems.ClientID %>");
        var masterTable = grid.get_masterTableView();
        // get the required field validator id from grid
        var rfv = $telerik.$(masterTable.get_element()).find('[id*="rfvddlConfigTeam"]')[0];

        // enable disable validator
        if (chkbx) {
            ValidatorEnable(rfv, true);
            ValidatorUpdateDisplay(rfv); // this one added after reading some posts but no luck.

        } else {
            ValidatorEnable(rfv, false);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:47:25.423

请尝试以下代码片段。

**js**

```
 function ValidateValidation(cmb, chk, lbl) {

            cmb = $find(cmb);
            chk = document.getElementById(chk);
            lbl = document.getElementById(lbl);
            if (chk.checked) {
                if (cmb.get_value() != null && cmb.get_value() != "" && cmb.get_selectedIndex() >= 0) {
                    debugger;
                    return true;
                }
                else {
                    lbl.style.display = '';
                    return false;
                }
            }
            else {
                lbl.style.display = 'none';
                return true;
            }

        } 
```

**aspx**

```
 <telerik:GridTemplateColumn>
                    <EditItemTemplate>
                        <asp:CheckBox ID="CheckBox1" runat="server" />
                        <telerik:RadComboBox ID="RadComboBox1" runat="server">
                            <Items>
                            </Items>
                        </telerik:RadComboBox>
                        <asp:Label ID="Label1" runat="server" ForeColor="Red" Text="your messege" Style="display: none;"></asp:Label>
                    </EditItemTemplate>
                </telerik:GridTemplateColumn> 
```

**aspx.cs**

```
 protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridEditableItem && e.Item.IsInEditMode)
    {
        GridEditableItem item = e.Item as GridEditableItem;
        CheckBox CheckBox1 = item.FindControl("CheckBox1") as CheckBox;
        Label Label1 = item.FindControl("Label1") as Label;
        RadComboBox RadComboBox1 = item.FindControl("RadComboBox1") as RadComboBox;

        (item.FindControl("UpdateButton") as LinkButton).Attributes.Add("onclick", "return ValidateValidation('" + RadComboBox1.ClientID + "','" + CheckBox1.ClientID + "','" + Label1.ClientID + "');");

    }
} 
```

# powershell - 使用 powershell 将文件重新格式化为管道格式

> ID：12203492
> 
> 赞同：1
> 
> 时间：2012-08-30T18:46:47.050
> 
> 标签：powershell, pipe

我有一个格式为

```
first:web
last:site
age:99

first:stack
last:overflow
age: 88 
```

我正在尝试将其转换为这种格式

```
first|last|age
web|site|99
stack|overflow|88 
```

到目前为止，这是我用来在一行中获取所有内容的代码，但我无法弄清楚循环遍历它并打破它的语法

```
$TextLocation = "data.txt" 
$Writefile =  "results.txt" 
$FileLocation = "C:\Users\"
$SearchStr1 = "First:"
$SearchStr2 = "Last:"
$SearchStr3 = "Age:"
$SearchStr4 = ""

#Get content
$a =Get-Content $TextLocation  |

#Find search strings and replace with pipes

Foreach-Object {
    $_  -replace $SearchStr1 , "|" `
    -replace $SearchStr2, "|" `
    -replace $SearchStr3, "|" `
    -replace$SearchStr4, "|" `

} |

# join all lines
$a -join "" 

#Break after every 4th pipe 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:37:21.547

您可以使用 Select-String cmdlet 在“first”上查找 macth 并获取该行以及后面的两行：

```
'first|last|age'

Get-ChildItem .\file.txt | Select-String '^first:' -Context 0,2 | ForEach-Object{

    $f = $_.Line.Split(':')
    $l = $_.Context.PostContext[0].Split(':')
    $a = $_.Context.PostContext[1].Split(':')

    $f[1],$l[1],$a[1] -join '|'

}

first|last|age
web|site|99
stack|overflow| 88 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:04:20.510

将有多种方法来处理这个问题。这是一个：

```
$result = @()
$temp = New-Object PSCustomObject -Prop @{'first' = ''; 'last' = ''; 'age' = ''}
foreach($line in Get-Content C:\PATH\TO\INPUT.txt){
    if($line.StartsWith('first')){
        $temp.first = $line.Split(':')[1]
    }elseif($line.StartsWith('last')){
        $temp.last = $line.Split(':')[1]
    }elseif($line.StartsWith('age')){
        $temp.age = $line.Split(':')[1]
    }else{
        $result += $temp
        $temp = New-Object PSCustomObject -Prop @{'first' = ''; 'last' = ''; 'age' = ''}
    }
}
$result += $temp
$result | Export-CSV C:\PATH\TO\RESULT.csv -NoTypeInformation -NoHeader -Delimiter '|' 
```

这不是我真正会做的，但它是骨架，应该让你开始。至少，您可能希望确保它更好地处理文件中的第一条和最后一条记录。我只是以这种方式将它拍打在一起作为演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:20:16.717

这是一个相当通用的解决方案：

```
$contents = gc C:\test.txt
$printedHeader = $false;
for ($i=0; $i -lt $contents.Length; $i++){
    $line = $contents[$i];
    $keyVal = $line.Split(':',2)
    $keys += $keyVal[0];
    $vals += $keyVal[1];    

    if ($contents[$i] -eq "" -or $i -eq $contents.Length - 1){
        if ($printedHeader -eq $false){
            $keys -join "|"
            $printedHeader = $true;
        }       
        $vals -join "|"     
        $vals = @();
        $keys = @();        
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T11:34:10.517

另外一个选项：

```
 function Get-Data($Path='c:\data') {

      $content = (Get-Content $Path | where {$_}) -split ':'
      for($i=0;$i -lt $content.length;$i++) {
          if(!$i) { 'first|last|age' }
          if($i % 2 -eq 1) {
               $content[$i],$content[$i+2],$content[$i+4] -join '|'
               $i+=5
           }
       }
    }

    PS II> Get-Data c:\scripts\data.txt

    first|last|age
    web|site|99
    stack|overflow| 88 
```

# c# - 为什么我只有一部分 asp.net 成员表？

> ID：12203495
> 
> 赞同：2
> 
> 时间：2012-08-30T18:46:52.617
> 
> 标签：c#, asp.net, .net, sql, membership-provider

**摘要：** 我正在尝试使用 asp.net 成员资格、角色和配置文件，但无法让我的代码使用由 aspnet_regsql.exe 生成的表。

**我尝试了什么：**

1.  在我的数据库上运行 aspnet_regsql.exe。这有效，并且所有表都已创建。
2.  叫`Membership.CreateUser("tester7","tester7","tester7@hi.com");`

然后创建了以下表并将用户存储在 dbo.Memberships 而不是 dbo.aspnet_Memberships 中。

*   dbo.Applications
*   dbo.Memberships
*   dbo.Profiles
*   dbo 角色
*   dbo.Users
*   dbo.UsersInRoles

它完全忽略了由 aspnet_regsql.exe 创建的表。

为什么会发生这种情况，我可以做些什么来定位 aspnet_* 表？

**编辑以包括 Web.config 成员资格注册**

```
<membership defaultProvider="ProjectMembershipProvider">
  <providers>
    <add name="ProjectMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider,..." connectionStringName="ProjectSql" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="Project" />
  </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:51:54.980

您必须在配置文件中添加注册部分

System.Web.Providers.DefaultMembershipProvider 位于 Sql Compact 和 Azur 应用程序上

您有成员部分和角色经理部分

```
<membership>

  <providers>

    <add

      name="AspNetSqlMembershipProvider"

      type="System.Web.Security.SqlMembershipProvider, ..."

      connectionStringName="LocalSqlServer"

      enablePasswordRetrieval="false"

      enablePasswordReset="true"

      requiresQuestionAndAnswer="true"

      applicationName="/"

      requiresUniqueEmail="false"

      passwordFormat="Hashed"

      maxInvalidPasswordAttempts="5"

      minRequiredPasswordLength="7"

      minRequiredNonalphanumericCharacters="1"

      passwordAttemptWindow="10"

      passwordStrengthRegularExpression=""

    />

  </providers>

</membership> 
```

# scala - 如何在 Anorm 中匹配对象的 id:Pk[T]？

> ID：12203498
> 
> 赞同：1
> 
> 时间：2012-08-30T18:46:53.930
> 
> 标签：scala, playframework-2.0, anorm

如何检查对象是否已保存到数据库（例如通过匹配其 id）？

类似于以下代码段的内容：

```
case class User(id: Pk[Long], name:String) {

    def loaded = id match {
      case NotAssigned => false  
      case Pk(refererId) => true
    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:01:34.473

在此示例中，您需要：

```
import anorm.Id        // if you don't already have import anorm._

case class User(id: Pk[Long], name:String) {
  def loaded = id match {
    case NotAssigned => false  
    case Id(refererId) => true
  }   
} 
```

# couchdb - CouchDB 为饼图汇总数据

> ID：12203507
> 
> 赞同：1
> 
> 时间：2012-08-30T18:47:20.347
> 
> 标签：couchdb

我的 CouchDB 数据库中有以下文档：-

```
{
   "_id": "c0d93b8f424037583b2fe71ea403044a",
   "name": "Joe",
   "country": "United Kingdom",
   "email": "joe@acme.com"
}
{
   "_id": "c0d93b8f424037583b2fe71ea403044d",
   "name": "Joe",
   "country": "United Kingdom",
   "email": "joe@acme.com"
}
{
   "_id": "c0d93b8f424037583b2fe71ea403044z",
   "name": "Joe",
   "country": "United Kingdom",
   "email": "joe@acme.com"
}
{
   "_id": "c0d93b8f424037583b2fe71ea403044x",
   "name": "Fred",
   "country": "France",
   "email": "Fred@acme.com"
}
{
   "_id": "c0d93b8f424037583b2fe71ea403044g",
   "name": "Fred",
   "country": "France",
   "email": "Fred@acme.com"
}
{
   "_id": "c0d93b8f424037583b2fe71ea403044p",
   "name": "Bill",
   "country": "Germany",
   "email": "Bill@acme.com"
} 
```

我想总结这些数据，以便可以根据国家/地区生成饼图，但我正在努力制定地图缩减代码以按国家/地区获取文档数。

有人可以帮我解释一下吗。

此致，

卡尔斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:06:09.363

这很简单。

您的 map 函数只是将*国家*作为键和*1*作为值发出。

```
function(doc) {
  if (doc.country) {
    emit(doc.country, 1);
  }
} 
```

现在您的 reduce 函数只是[内置](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions) `_sum`函数。

`group_level`使用将其设置为 1 的参数查询您的视图。

> 获取 /db/_design/app/_view/bycountry?group_level=1`

你的结果应该是这样的。

```
{
    "rows": [
        {"key": "France", "value": 2},
        {"key": "Germany", "value": 1},
        {"key": "United Kingdom", "value": 3}
    ]
} 
```

# facebook - 内置like动作拒绝对象类型

> ID：12203514
> 
> 赞同：3
> 
> 时间：2012-08-30T18:47:55.170
> 
> 标签：facebook, api, facebook-like, facebook-opengraph

首先，有人可以确认开放图形对象类型形成层次结构。我的意思是每个`movie`a`video`和每个`video`a `object`？

我问的原因是`like`action type 只支持`object`在应用仪表板中定义对象类型，所以如果我将我的对象定义为 type `movie`，我能喜欢那个对象吗？从我从文档中收集到的信息来看，确实应该是这样，但没有在任何地方明确说明。

我偶然发现了这一点，因为我在尝试代表用户喜欢 URL 时遇到错误。喜欢的对象实例`og:type`定义为`movie`。返回的错误是：

```
{"error":{"message":"(#100) Like actions are not yet supported against objects of this type.","type":"OAuthException","code":100}} 
```

我尝试了几件事，得到了非常令人困惑的结果：

1.  我尝试将`og:type`参数更改为`object`. 我得到了同样的错误。
2.  我尝试将`og:type`参数更改为`website`. 我得到了同样的错误。
3.  我尝试将`og:type`参数更改为`video`. 我得到了同样的错误。
4.  我尝试将作为对象传递的 URL 中的 id 查询参数更改为 like。这导致我在服务器上的 web 应用程序找不到 id 引用的对象，进而不呈现任何元标记。根据调试器，类型被隐式确定为“网站”。这在某种意义上是有效的，即我获得了操作实例的 id，并且再次尝试相同的请求会引发连接已存在的错误。但是，新闻提要或用户个人资料中的“喜欢”中均未显示任何内容。我可以正常删除连接。
5.  我尝试提供 DNS 无法解析的 URL。调试器说它不能抓取任何信息。否则，与情况 4 相同。

有关我的设置的更多信息：

*   该应用程序配置为发布`Like`操作类型`Object`和`Video`对象类型。
*   我没有定义画布 URL，因为我的应用程序在其他地方自行托管，并且不需要 facebook 页面。
*   `Like`操作类型尚未提交以供批准，但我正在使用有效访问令牌执行来自用户的请求，该用户具有在我的应用程序中执行未提交的操作类型的角色。
*   访问令牌是长期存在的，通过交换用户通过客户端身份验证流程进行身份验证时收到的短期访问令牌获得。
*   在定义了发布的动作类型和对象类型之后，用户已经进行了身份验证。
*   所有测试都是在我的机器上通过 Open Graph Explorer 和 Fiddler 执行的，参数 (`object`和`access_token`) 进行了 urlencoded。
*   如果使用类似的社交插件，一切都会按预期进行。

[[可能是这个](https://stackoverflow.com/questions/12033957/like-actions-are-not-yet-supported-against-objects-of-this-type-sometimes)问题 的副本]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:45:04.753

类型`website`很好。

尝试执行[Like Button Migration](https://developers.facebook.com/docs/reference/plugins/like/migration/)，请参阅该文档中的“准备迁移”。

您可以检查您是否`website`需要迁移，方法是检查它是否具有该（对象）的旧式“管理页面”，方法是检查您是否是与或元标记`website`同名的 FB 页面的管理员。如果您是与您的对象同名的 FB 页面的管理员，那么使用 Open Graph（即 with ）点赞需要点赞按钮迁移。`og:site-name``og:title``/me/og.likes`

# .net - 用串口编程比usb容易吗？VB.net

> ID：12203519
> 
> 赞同：0
> 
> 时间：2012-08-30T18:48:05.587
> 
> 标签：.net, vb.net, usb, serial-port, vfd

我打算购买一个 VFD 显示器来与我的 pos 应用程序一起使用。但我被一个问题困住了。串口编程比usb容易吗？它是[digipos的wd2030a](http://www.bypos.nl/digipos-wd2030a-klantendisplay)。我没有太多的编程背景，我想知道我是否可以用串口或usb轻松编程这个项目。我希望尽快得到答案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:42:30.220

我无法阅读您链接到的网页，但您应该确定设备（至少对于 USB 选项）是否具有自定义 API，或者它是否为 Windows 提供串行端口接口。许多 USB 设备将自己作为串行设备呈现给 PC。如果有自定义 API，则使用自定义 API 可能更容易，因为它可能是为易于使用而设计的。

无论如何，使用 VB 对串行端口进行编程很容易。.NET 有一个 Serial Port 类，即使使用较旧的 VB，Microsoft 也提供了一个称为 Microsoft Comm Control 的控件。最坏的情况，您可以直接调用 Win32 API（文件 I/O）并打开 COM 端口。由于它是显示器，您可能不必担心读取数据，这使得串口编程更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:04:52.807

鉴于这是一个串行设备，我认为您需要一个 USB 转串行设备[http://www.ftdichip.com/](http://www.ftdichip.com/)或其他设备。如果您的计算机已经有串口，则不需要该 USB 设备。正如@Dr.Watson 所建议的那样，使用[.NET 中的 SerialPort 类](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx#Y4138)是可能的方法。

# sql - 为每个用户选择最大记录

> ID：12203521
> 
> 赞同：39
> 
> 时间：2012-08-30T18:48:24.533
> 
> 标签：sql, sql-server, subquery

这似乎应该相当简单，但我在试图找到一个适合我的解决方案时遇到了困难。

我有一个 member_contracts 表，它具有以下（简化的）结构。

```
MemberID | ContractID   | StartDate | End Date |
------------------------------------------------
1          1              2/1/2002    2/1/2003
2          2              3/1/2002    3/1/2003
3          3              4/1/2002    4/1/2003
1          4              2/1/2002    2/1/2004
2          5              3/1/2003    2/1/2004
3          6              4/1/2003    2/1/2004 
```

我正在尝试创建一个查询，该查询将从该表中选择最新的合同。这是这个小例子的以下输出：

```
MemberID | ContractID   | StartDate | End Date |
------------------------------------------------
1          4              2/1/2002    2/1/2004
2          5              3/1/2003    2/1/2004
3          6              4/1/2003    2/1/2004 
```

在每个用户的基础上执行此操作非常简单，因为我可以使用子查询来选择指定用户的最大 contractID。我正在使用 SQL Server，所以如果有一种特殊的方式可以使用这种方式，我愿意使用它。就个人而言，我想要与引擎无关的东西。

但是，我将如何编写一个可以为所有用户实现目标的查询？

编辑：我还应该补充一点，我正在寻找每个用户的最大 contractID 值，而不是最近的日期。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-30T18:53:55.910

此解决方案使用 ContractId 字段的唯一性：

```
SELECT MemberID, ContractID, StartDate, EndDate
FROM member_contracts 
WHERE ContractId IN (
    SELECT MAX(ContractId)
    FROM member_contracts 
    GROUP BY MemberId
) 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/599b2/1)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-30T18:57:42.807

最安全的方法是使用`row_number`

```
select MemberId, ContractId, StartDate, EndDate
from (select mc.*,
             row_number() over (partition by MemberId order by contractId desc) seqnum
      from Member_Contracts mc
     ) mc
where seqnum = 1 
```

这可以处理同一成员的多个合同的情况。. . 在这个数据中这可能不是一个真正的问题。

# safari - 如何在 Safari 扩展中隐藏弹出框时触发代码？

> ID：12203523
> 
> 赞同：0
> 
> 时间：2012-08-30T18:48:29.083
> 
> 标签：safari, popover, safari-extension

在 Safari 扩展中，有没有办法在隐藏弹出框时触发一些代码？弹出框第一次显示时有`popover`事件，但我没有找到相反的情况，当弹出框被隐藏时。

我`<progress>`在弹出窗口中使用元素，它们似乎非常消耗 CPU，所以我想在弹出窗口未显示时禁用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:57:35.523

从弹出框内，

```
window.onblur = function (e) {
    // do something
}; 
```

应该做的伎俩。

# c++ - 示例解析错误

> ID：12203531
> 
> 赞同：1
> 
> 时间：2012-08-30T18:48:59.947
> 
> 标签：c++, boost, boost-spirit

我正在尝试按照示例解析提升精神（2.5.2）的示例。我的代码如下

```
#include <boost\spirit\home\qi.hpp>
#include <iostream>
#include <string>
#include <utility>

int main()
{

  // Parsing two numbers
  std::string input("1.0 2.0");
  std::pair<double, double> p;

  boost::spirit::qi::phrase_parse(
    input.begin(),
    input.end(),
    boost::spirit::qi::double_ >> boost::spirit::qi::double_ , // Parse grammar
    boost::spirit::qi::space,
    p
  );

  return 0;
} 
```

它几乎等于在[此处](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/spirit/abstracts/attributes/compound_attributes.html)找到的示例，但是当我使用 Visual Studio 2010（32 位，调试）编译它时，我收到以下错误：

```
error C2440: 'static_cast': unable to convert from 'const double' to 'std::pair<_Ty1,_Ty2>' 
```

（错误可能略有不同，我是从意大利语翻译过来的）

我做错了什么，如何成功编译示例？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:23:48.760

您缺少包括：

```
#include <boost/fusion/adapted/std_pair.hpp> 
```

它定义了属性分配规则，以使融合序列 (vector2<>) 可分配给 std::pair。

实时查看代码：**[liveworkspace.org](http://liveworkspace.org/code/0827918e0c74345b515c887f63b75a7d)**

```
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted/std_pair.hpp>
#include <iostream>
#include <string>
#include <utility>

int main()
{
    // Parsing two numbers
    std::string input("1.2 3.4");
    std::pair<double, double> p;

    namespace qi = boost::spirit::qi;

    qi::phrase_parse(
            input.begin(), 
            input.end(),
            qi::double_ >> qi::double_ , // Parse grammar
            qi::space, p);

    std::cout << "Lo:     " << p.first << "\n"
              << "Behold: " << p.second << "\n";
} 
```

# tfs - 提取在两个标签之间更改的所有文件或更改集

> ID：12203536
> 
> 赞同：4
> 
> 时间：2012-08-30T18:49:23.170
> 
> 标签：tfs

是否可以提取两个标签之间仅修改过的文件的列表？我的最终目标是提取在 label2 和 label3 之间修改过的文件列表。我已经能够使用下面的 tf history 命令让 TFS 输出；不幸的是，这个命令将拉出所有修改到 Label3 的项目。

`tf history /server:http://tfsserver:8080/tfs "$/source/path/main" /recursive /noprompt /format:detailed /version:"Llabel3" >> C:\temp\tfshistory.txt`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:17:44.873

我意识到我的错误，使用上面的命令，只要在 /version: 开关中添加“~”，就可以获得两个标签之间的所有更改集，例如：

`tf history /server:http://tfsserver:8080/tfs "$/source/path/main" /recursive /noprompt /format:brief /version:"Llabel2~Llabel3" >> C:\temp\tfshistory.txt`

这将提取并创建标签 2 和标签 3 之间所有更改集的列表。您也可以通过将标签 3 替换为“T”来执行相同操作，这将提取标签 2 中的所有更改集到最新（T）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T14:09:26.633

如果将 '/format:brief' 替换为 '/format:detailed'，您可以获得所需的内容

# facebook-graph-api - 使用 FQL 显示随机性别（性）朋友的个人资料图片

> ID：12203544
> 
> 赞同：-1
> 
> 时间：2012-08-30T18:50:13.343
> 
> 标签：facebook-graph-api, facebook-fql

```
if($user_gender == "male")
{
$fql_query_result = file_get_contents("https://graph.facebook.com/fql?q=SELECT+uid%2C+name+FROM+user+where+uid+IN+(SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20=%20me())%20and%20sex='female'ORDER%20BY%20rand%20()%20LIMIT%201&access_token=".$access_token);
}
else
{
$fql_query_result = file_get_contents("https://graph.facebook.com/fql?q=SELECT+uid%2C+name+FROM+user+where+uid+IN+(SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20=%20me())%20and%20sex='male'ORDER%20BY%20rand%20()%20LIMIT%201&access_token=".$access_token);
} 
```

在 Graph Api Explorer 中显示

```
{
  "data": [
    {
      "uid": 100001242402868, 
      "name": "Don Omer"
    }
  ]
} 
```

如何从上述数据中提取 UID，以便我们可以显示他/她的头像

```
$friend_pic = imagecreatefromjpeg("http://graph.facebook.com/".$fql_query_result['uid']."/picture?type=normal"); 
```

我正在尝试创建一个名为“谁会嫁给我”的应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:39:11.183

您可以在一个查询（和一个 API 调用）中完成这一切。尝试这个：

```
$query = 'SELECT uid, name, sex, pic FROM user WHERE 
            uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
            AND NOT ( sex IN (SELECT sex FROM user WHERE uid = me())) 
          ORDER BY rand () LIMIT 1'; 
```

快速而肮脏的方法是：

```
$url = "https://graph.facebook.com/fql?q=" . urlencode($query) . 
         "&access_token=" . $access_token;
$spouse = json_decode( file_get_contents ($url));
printf('<p>You should marry %s. <img src="%s" /></p>', 
       $spouse->data[0]->name, 
       $spouse->data[0]->pic
       ); 
```

但是您应该真正使用[PHP SDK](https://developers.facebook.com/docs/reference/php)，因为它更加健壮。

# css - Css3 MediaQueries，在链接上强制 @Media 更改

> ID：12203545
> 
> 赞同：1
> 
> 时间：2012-08-30T18:50:17.240
> 
> 标签：css, media-queries

我有一个使用 css3-mediaqueries.js 进行移动设计的网站。效果很好，但有些用户仍然更喜欢“网络版”。是否可以通过例如链接来强制主页不使用我所拥有的css：

@media 手持设备，仅屏幕和（最大宽度：767px）{}

也许在顶部有一个链接说“Goto web-version”

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:55:59.343

最快的方法是在设置某个变量时阻止文件加载。

这可以通过许多不同的方式来完成，例如在 php 系统上的 $_GET 中传递一个变量。或者通过使用 cookie（php 和 javascript）。

# c# - 如何在 C# .NET 中设置 Process.GetCurrentProcess().PeakWorkingSet64 的值

> ID：12203547
> 
> 赞同：0
> 
> 时间：2012-08-30T18:50:23.623
> 
> 标签：c#, .net, c#-4.0

我想知道如何在 .NET 4.0 中设置以下值（它有一个 getter，但没有一个 setter）：

> Process.GetCurrentProcess().PeakWorkingSet64();

**更新：**

我想将此设置为一个非常高的值，以减少由于程序工作集的增加而导致的软页面错误。这可能有助于解决我们使用探查器确定的延迟问题。

**更新：**

正如玉修所指出的，你不能设定峰值（它更像是一种观察）。我真正想做的是为 64 位进程设置工作集：

> Process.GetCurrentProcess().WorkingSet64() = xxx;

**更新：**

这个问题的正确答案是[如何在 64 位 .NET 进程中设置 MinWorkingSet 和 MaxWorkingSet？](https://stackoverflow.com/questions/12203969/how-to-set-minworkingset-and-maxworkingset-in-a-64-bit-net-process)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:42:23.773

您在通过 .NET 中存在的[SetProcessWorkingSetSize之后](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234%28v=vs.85%29.aspx)

```
Process.GetCurrentProcess().MinWorkingSet = xxx; 
```

通过这种方式，您可以确保（几乎）所有页面都不会被分页。当您处理延迟时，分页只是一个问题。如果你有一个大对象图，GC 时间也会对延迟时间产生负面影响。本质上，大小确实很重要。如果您减少整体内存消耗，您将获得更短的 GC 时间和更少的工作集，从而更不可能被分页。

# visual-studio - TFS 2010 隐藏数据库标志

> ID：12203549
> 
> 赞同：0
> 
> 时间：2012-08-30T18:50:27.670
> 
> 标签：visual-studio, configuration, branching-and-merging

在 TFS 2010 集合数据库中，数据库标志在哪里标识文件夹是否隐藏在 TFS 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:12:57.047

文件夹的隐藏标志是每个用户的工作区。直接从数据库中读取\写入此信息不是一个好主意，因为架构可能会发生变化。解释你想要完成什么，我怀疑你可以使用 TFS SDK 的对象模型 (OM) 来完成它。

Workspace 类（在 TFS SDK 中）有一个名为 Folders 的属性，它是一个 WorkingFolders 数组（参见[此处](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workingfolder.aspx)），它具有 IsCloaked 属性。这是在工作区中查找隐藏文件夹的推荐方法。

# java - 重新加载 xml 文件后重新加载 GUI

> ID：12203553
> 
> 赞同：1
> 
> 时间：2012-08-30T18:50:35.877
> 
> 标签：java, xml, swing, reload

我正在尝试创建 gui，它在重新加载 XML 文件后更改其部分元素（应用程序在开始时根据 XML 文件的内容创建几个 GUI 元素）。

启动应用程序后一切正常（如果加载 test.xml，创建 20 个按钮 [10 个单词翻译对]，加载 testTwo.xml 时创建 4 个按钮 [2 个单词翻译对]），但我不知道如何之后重新加载或随机播放 GUI 内容（单击按钮后）。

我试过把 revalidate(); 在 ActionListener 中，但它在我的应用程序中不起作用。

如果你能指出我如何做到这一点，我会很高兴。

**图形用户界面：XmlGui.java**

```
package xmltest;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import net.miginfocom.swing.MigLayout;
import org.xml.sax.SAXException;

public class XmlGui extends JFrame {

    protected JPanel panel;
    protected JFrame frame;
    protected File file = new File("src/xmltest/test.xml");
    protected JButton setOne, setTwo, shuffle;
    protected JTextArea text;
    protected XmlTest engine;

    public XmlGui() throws ParserConfigurationException, SAXException, IOException {

        XmlEvent xmlEvent = new XmlEvent(this);

        SAXParserFactory spfac = SAXParserFactory.newInstance();
        SAXParser sp = spfac.newSAXParser();
        XmlTest engine = new XmlTest();
        sp.parse(file, engine);
        engine.readList();
        engine.shuffleList(1);

        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());

        panel = new JPanel(new MigLayout("Insets 0"));

        setOne = new JButton("Default (test.xml)");
        setOne.addActionListener(xmlEvent);
        panel.add(setOne, "split 3");

        setTwo = new JButton("Next set (testTwo.xml)");
        setTwo.addActionListener(xmlEvent);
        panel.add(setTwo);

        shuffle = new JButton("Shuffle");
        shuffle.addActionListener(xmlEvent);
        panel.add(shuffle, "wrap");

        for (int i = 0; i < engine.cardList.size(); i++) {

            JPanel xpanel = new JPanel(new MigLayout("Insets 0"));
            final String test = engine.cardList.get(i).getTextOne();
            JButton word = new JButton(engine.cardList.get(i).getWord()+" ("+i+")");
            word.setPreferredSize(new Dimension(200, 40));
            word.addActionListener(new ActionListener(){
                public void ActionListener(ActionEvent event) {

                }

                @Override
                public void actionPerformed(ActionEvent e) {
                    text.setText(test);
                }
            });

            JButton translation = new JButton(engine.cardList.get(i).getTranslation()+" ("+i+") ");
            translation.setName("translation"+i);
            translation.setPreferredSize(new Dimension(200, 40));

            xpanel.add(word);
            xpanel.add(translation);
            panel.add(xpanel, "wrap");

        }

        text = new JTextArea();
        text.setLineWrap(true);
        text.setPreferredSize(new Dimension(400, 45));
        panel.add(text);

        frame.add(panel);
        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String[] arguments) throws ParserConfigurationException, SAXException, IOException {

        XmlGui gui = new XmlGui();

    }

} 
```

**XML 方法：XmlTest.java**

```
package xmltest;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;

import javax.xml.parsers.ParserConfigurationException;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class XmlTest extends DefaultHandler {

       Card card;
       private String temp;
       ArrayList<Card> cardList = new ArrayList<Card>();

       public void characters(char[] buffer, int start, int length) {
              temp = new String(buffer, start, length);
       }

       public void startElement(String uri, String localName,
                     String qName, Attributes attributes) throws SAXException {
              temp = "";
              if (qName.equalsIgnoreCase("Card")) {
                     card = new Card();

              }
       }

       public void endElement(String uri, String localName, String qName)
                     throws SAXException {

              if (qName.equalsIgnoreCase("Card")) {
                     cardList.add(card);

              } else if (qName.equalsIgnoreCase("Word")) {
                     card.setWord(temp);
              } else if (qName.equalsIgnoreCase("Translation")) {
                     card.setTranslation(temp);
              } else if (qName.equalsIgnoreCase("TextOne")) {
                     card.setTextOne(temp);
              } else if (qName.equalsIgnoreCase("TextTwo")) {
                     card.setTextTwo(temp);
              }

       }

       public void readList() {
              System.out.println("Number of cards in the collection: " + cardList.size()  + ".\n");
              Iterator<Card> it = cardList.iterator();
              while (it.hasNext()) {
                     System.out.println(it.next().toString());
              }
       }

       public void shuffleList(int x) {
              System.out.println("Shuffled cards order ("+x+"): ");
              Collections.shuffle(cardList);
              Iterator<Card> it = cardList.iterator();
              while (it.hasNext()) {
                     System.out.print(it.next().shuffledList());
              }
              System.out.println("\n");
       }

} 
```

**事件类：XmlEvent.java**

```
package xmltest;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

public class XmlEvent implements ActionListener {

        XmlGui xmlGui;

        XmlEvent (XmlGui in) {

        xmlGui = in;
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        Object source = e.getSource();

        if (source.equals(xmlGui.setOne)) {

            xmlGui.file = new File("src/xmltest/test.xml");
            xmlGui.text.setText("test.xml");

        }

        if (source.equals(xmlGui.setTwo)) {

            xmlGui.file = new File("src/xmltest/testTwo.xml");
            xmlGui.text.setText("testTwo.xml");

        }

        if (source.equals(xmlGui.shuffle)) {

            xmlGui.text.setText("Shuffling list!");

        }

    }

} 
```

**XML 数据的表示：Card.java**

```
package xmltest;

public class Card {

       private String word;
       private String translation;
       private String textOne;
       private String textTwo;

       public Card() {
       }

       public Card(String word, String translation, String textOne, String textTwo) {
              this.word = word;
              this.translation = translation;
              this.textOne = textOne;
              this.textTwo = textTwo;
       }

       public String getWord() {
              return word;
       }

       public void setWord(String word) {
              this.word = word;
       }

       public String getTranslation() {
              return translation;
       }

       public void setTranslation(String translation) {
              this.translation = translation;
       }

       public String getTextOne() {
              return textOne;
       }

       public void setTextOne(String textOne) {
              this.textOne = textOne;
       }

       public String getTextTwo() {
              return textTwo;
       }

       public void setTextTwo(String textTwo) {
              this.textTwo = textTwo;
       }

       public String toString() {
              StringBuffer sb = new StringBuffer();
              sb.append("Card details:");
              sb.append("\nWord: " + getWord());
              sb.append("\nTranslation: " + getTranslation());
              sb.append("\nTextOne: " + getTextOne());
              if(getTextTwo().equals("blank")) {
                  sb.append("\n\n");
              } else {
              sb.append("\nTextTwo: " + getTextTwo()+"\n\n");
              }

              return sb.toString();
       }

       public String shuffledList() {
           return getWord()+" ";
       }
} 
```

**XML1：test.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<cards>
    <card>
        <word>cloud</word>
        <translation>chmura</translation>
        <textOne>D: a visible collection of particles of water or ice suspended in the air.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>rain</word>
        <translation>deszcz</translation>
        <textOne>D: water that is condensed from the aqueous vapor in the atmosphere and falls to earth in drops.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>wind</word>
        <translation>wiatr</translation>
        <textOne>D: air in natural motion, as that moving horizontally at any velocity along the earth's surface.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>storm</word>
        <translation>burza</translation>
        <textOne>D: a disturbance of the normal condition of the atmosphere, manifesting itself by winds of unusual force or direction, often accompanied by rain, snow, hail, thunder, and lightning, or flying sand or dust.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>blizzard</word>
        <translation>zamieć</translation>
        <textOne>D: a storm with dry, driving snow, strong winds, and intense cold.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>fog</word>
        <translation>mgła</translation>
        <textOne>D: a cloudlike mass or layer of minute water droplets or ice crystals near the surface of the earth, appreciably reducing visibility.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>sunny</word>
        <translation>słoneczny</translation>
        <textOne>D: abounding in sunshine.</textOne>
        <textTwo>test</textTwo>
    </card>
    <card>
        <word>weather</word>
        <translation>pogoda</translation>
        <textOne>D: the state of the atmosphere with respect to wind, temperature, cloudiness, moisture, pressure, etc.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>temperature</word>
        <translation>temperatura</translation>
        <textOne>D: a measure of the warmth or coldness of an object or substance with reference to some standard value.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>hail</word>
        <translation>grad</translation>
        <textOne>D: showery precipitation in the form of irregular pellets or balls of ice.</textOne>
        <textTwo>blank</textTwo>
    </card>
</cards> 
```

**XML2：testTwo.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<cards>
    <card>
        <word>cloud</word>
        <translation>chmura</translation>
        <textOne>D: a visible collection of particles of water or ice suspended in the air.</textOne>
        <textTwo>blank</textTwo>
    </card>
    <card>
        <word>rain</word>
        <translation>deszcz</translation>
        <textOne>D: water that is condensed from the aqueous vapor in the atmosphere and falls to earth in drops.</textOne>
        <textTwo>blank</textTwo>
    </card>
</cards> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:11:45.270

我通过以下方式解决了我的问题：

1.  将**JButton 从 XML 创建机制**移动到它自己的**方法**（在它被放置在创建整个 GUI 的方法之前；
2.  **通过方法**为根据XML数据生成的JButtons设置新的JPanel ；
3.  **在为新文件调用方法**之前，使用 ActionListener 中的那些 JButton 为 JPanel 调用 removeAll() 以*加载新的 XML 文件 JButton*。

 **它工作正常。**

# c# - 将样式应用于表单上的每个按钮

> ID：12203557
> 
> 赞同：1
> 
> 时间：2012-08-30T18:50:56.823
> 
> 标签：c#, winforms, button, styles

我有以下方法可以正常工作：

```
button21.FlatAppearance.BorderSize = 0;
button21.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent; 
```

如您所见，我有很多按钮（约 30 个），所以不要在每个按钮上应用样式 - 为什么不在`Form_Load`事件中一次应用所有按钮？所以我写了这个方法：

```
public void ChangeButtonStyles()
{
    foreach (Control con in this.Controls)
    {
        if (con is Button)
        {
            Button but = con as Button;
            but.FlatAppearance.BorderSize = 0;
            but.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;
        }
    }
} 
```

但它不起作用，因为当您将鼠标悬停在按钮上时 - 您可以看到背景变化，这证明它`but.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;`不起作用

为什么代码不起作用？

```
public Form1()
{
    InitializeComponent();

  // works
    //button21.FlatAppearance.BorderSize = 0;
    //button21.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;

  // doesn't work
    ChangeButtonStyles();
} 
```

**编辑：解决方案**

```
public void ChangeButtonStyles()
{
    foreach (Control con in this.Controls)
    {
        if (con is Button)
        {
            Button but = con as Button;
            but.FlatAppearance.BorderSize = 0;
            but.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;
        }
        if (con is GroupBox)
        {
            foreach (Control subcon in con.Controls)
            {
                if (subcon is Button)
                {
                    Button but = subcon as Button;
                    but.FlatAppearance.BorderSize = 0;
                    but.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:54:01.000

您是否尝试过调试代码以查看它是否真正被执行？this.Controls 将返回顶级控件。如果按钮嵌套在其他控件中，则需要更加递归。

```
public void ChangeButtonStyles(Control source)
{
    foreach (Control con in source.Controls)
    {
        if (con is Button)
        {
            Button but = con as Button;
            but.FlatAppearance.BorderSize = 0;
            but.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;
        }
        else
        {
            ChangeButtonStyles(con);
        }
    }
} 
```

# java - 仅使用 java 自带的库将 base64 图像转换为实际图像

> ID：12203558
> 
> 赞同：2
> 
> 时间：2012-08-30T18:50:58.303
> 
> 标签：java, swing, base64

我正在为 java swing 应用程序创建一个复活节彩蛋，它将主要在内部使用。

我打算拍摄一张图片并将其转换为base64，然后当找到复活节彩蛋时，它将base64图像转换为实际图像，然后最终将其显示在JFrame或对话框中。我知道这不是很好，但我真的没有太多时间做某事，而且这就是我脑海中浮现的一切。

我在网上寻找任何可以做到这一点的东西，我发现很多教程都展示了对图像进行 Base64 解码，但它们都涉及外部库。有没有办法使用 java 自带的库将 base64 图像解码为实际图像？

- - - - - - - - - - - - 编辑 - - - - - - - - - - - - - ---

使用@IanRoberts 评论：“在 parse/printBase64Binary 方法中有一个（相当隐藏的）base64 编码器/解码器`javax.xml.bind.DatatypeConverter`。”

我能够解码图像。[这](http://pastebin.com/i8S9kAGi)是我所做的粘贴箱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:57:35.670

此解决方案仅使用 Java 6 核心`java.`和`javax.`类：

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import javax.imageio.ImageIO;
import javax.xml.bind.DatatypeConverter;

String base64String = "...";
byte[] bytes = DatatypeConverter.parseBase64Binary(base64String);
ByteArrayInputStream bin = new ByteArrayInputStream(bytes);
BufferedImage img = ImageIO.read(bin);
// NB ImageIO doesn't close the provided input stream, but ByteArrayInputStream
// doesn't need to be closed anyway so it doesn't matter. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:02:23.980

在 java 类中隐藏图像的一种相当复杂的解决方案，不包括文件本身或使用 base64（从而减少类 java 文件大小），是使用以下 java 程序工具将图像转换为 java 字节数组的集合以及将组装原始图像的方法调用：

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.PrintWriter;

public class ImageDataGenerator {
    public static void main(String[] params) throws InterruptedException, FileNotFoundException, IOException {
        if (params.length != 2) {
            System.out.printf("Uso: java ImageDataGenerator <nombre_imagen> <archivo_imagen>\n");
            System.exit(1);
        }

        String imageName = params[0];

        FileInputStream fis = new FileInputStream(params[1]);
        PrintWriter p = new PrintWriter("imgData.txt");

        p.printf("   private byte[] get%sPart1() {\n", imageName);
        p.printf("       return new byte[] {");

        int readed = 0;
        int writed = 0;
        int numMethods = 1;
        while ((readed = fis.read()) != -1) {
            if (writed < 3000) {
                p.printf("%d,", (byte) readed);
            } else {
                writed = 0;
                p.printf("%d};\n", (byte) readed);
                p.printf("   }\n");
                numMethods++;
                p.printf("   private byte[] get%sPart%d() {\n", imageName, numMethods);
                p.printf("       return new byte[] {\n ");
            }

            if ((++writed % 500) == 0) {
                p.printf("\n");
            }
        }
        p.printf("};\n");
        p.printf("   }\n\n");

        p.println("    private BufferedImage createImageFromArrays(byte[]... arrays) throws IOException { ");
        p.println("        int size = 0;");
        p.println("        for (byte[] array : arrays) size = array.length;");
        p.println("        byte[] imageInByte = new byte[size];");
        p.println("        int pos = 0;");
        p.println("        for (byte[] array : arrays) {");
        p.println("            System.arraycopy(array, 0, imageInByte, pos, array.length);");
        p.println("            pos += array.length;");
        p.println("        }");
        p.println("        ");
        p.println("        InputStream in = new ByteArrayInputStream(imageInByte);");
        p.println("        return ImageIO.read(in);");
        p.println("    }");
        p.println("\n");

        p.println("// Insert this call anywhere in your code");
        p.printf("createImageFromArrays(");
        for (int i = 1; i <= numMethods; i++)
            p.printf("get%sPart%d()%s ", imageName, i, i <= numMethods - 1 ? "," : "");
        p.printf(");");

        p.flush();
        p.close();
    }
} 
```

使用工具键入：`java ImageDataGenerator hiddenImage /path/to/image/image.png`

它将生成一个文件，命名`imgData.txt`您必须在 `JFrame`类声明部分中复制/粘贴的内容。生成文件的最后一行将包含一个名为的方法的`createImageFromArrays`调用，您必须在`JFrame`onShow/onLoad 事件侦听器中调用该方法

（我以前用这个工具来隐藏 J2ME 应用程序中的图像/资源，希望对你有帮助）

# c# - NHibernate 提交一个孩子而不是两个

> ID：12203561
> 
> 赞同：1
> 
> 时间：2012-08-30T18:51:19.363
> 
> 标签：c#, nhibernate

我又遇到了 NHibernate 的一些问题。我想同时将两个子对象添加到父对象。问题是只有第一个孩子被提交，第二个孩子被忽略。我什至没有收到第二个孩子的错误消息。

```
public void CreateKeyword(CreateKeywordRequest request)
{
    Collection collection = _collectionRepository.FindCollection(request.IdentityToken, request.CollectionName);

    collection.AddKeyword(request.CategoryName, request.KeywordName, request.KeywordDescription);

    _uow.Commit();
} 
```

-

```
public void AddKeyword(string categoryName, string keywordName, string keywordDescription)
{

    Category category = Categories.Where(c => c.CategoryName == categoryName).FirstOrDefault();

    Keyword keyword = new Keyword { Category = category, KeywordName = keywordName, Description = keywordDescription };

    category.Keywords.Add(keyword);

    Test testOne= new Test{ Keyword = keyword, name = "test1" };
    Test testTwo= new Test{ Keyword = keyword, name = "test2" };

    //Only testOne gets committed and testTwo gets ignored
    keyword.Tests.Add(testOne);
    keyword.Tests.Add(testTwo);

    ThrowExceptionIfKeywordIsInvalid(keyword);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:23:24.087

我怀疑 Tests 是某种 Set（例如 ISet），而 Test 的 Equals 方法只比较 Keyword 属性

# gnuplot - Gnuplot p3md set zrange 不起作用？

> ID：12203564
> 
> 赞同：0
> 
> 时间：2012-08-30T18:51:27.540
> 
> 标签：gnuplot

我正在尝试使用 pm3d 制作地图，但有几个“白点”的 z 值超过了设定的 zrange。但是，当我尝试更改 zrange 比例时，我看不出情节有什么不同。

这是我正在使用的脚本：

```
set term postscript color
set output 'contour.ps'
set size ratio 1
set xrange[-15:25]
set yrange[-15:25]
set zrange[0:200] <------- Changing this range does nothing!
set pm3d map

splot 'format.out' using 2:3:(sqrt($4*$4 + $5*$5 + $6*$6 + $7*$7 + $8*$8 + $9*$9)) with pm3d 
```

如果我更改脚本中的任何其他内容（例如 xrange），我可以在图中看到效果。

有什么建议么？

另外，为什么设置默认 zrange 以使某些 z 值超出范围？有没有办法更改此默认值，使其*始终*包含所有数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:50:49.270

在这种特定情况下，我的数据在列之间没有足够的空间，因此当数字变大时，列开始重叠并且数字变得巨大。例如，如果将列定义为 5 个空格宽，则数据

```
123  987 
```

很好，而数据 12345 和 98765 看起来像这样：

```
1234598765 
```

并成为一个单一的数据点，它给出了一个超出任何合理范围的数字。我不知道为什么gnuplot没有警告两列被压缩成一列......

此外，如评论中所述，更改 cbrange 确实增加了 z 范围，但当然这无助于看到由于列的连接而远远超出任何合理范围的几个点。

# php - Codeigniter - 如果未登录，则存储请求的 url

> ID：12203567
> 
> 赞同：1
> 
> 时间：2012-08-30T18:51:41.797
> 
> 标签：php, codeigniter, url, session, input

在我的站点中，如果会话过期或他们注销，他们必须重新登录才能进入会员区。例如，如果他们想做这样的事情

```
http://example.com/site/approve_friend_request/RaNdOmCoDe 
```

您只能完成批准好友请求，例如在会员区。但是如果他们没有登录，他们会被重定向到（例如）

```
http://example.com/login_form 
```

我想知道存储请求的 url 并在他们成功登录后将它们定向到那里的一些想法。我有一些想法，但不确定最好的方法是什么。理想情况下，我不想在 url 中存储任何信息，除非这是一个好方法：

```
http://example.com/login_form/redirect_after_loggin/approve_friend_request/RaNdOmCoDe 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:30:47.380

好的，非常感谢您的帮助。我确实有一些选择，似乎最简单的是：

```
$this->session->set_userdata(array('last_url' => current_url())); 
```

即使我没有登录它也会存储并在登录后保留。一旦我重定向我删除它使用

```
$this->session->unset_userdata('last_url'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:20:23.300

我会告诉你 Facebook 的做法，不管它是不是一个好方法，我都会把它留给你。

假设您想在登录后将用户重定向到*http://www.google.com*。

```
$redirect_url = json_encode('http://www.google.com');
header( 'Location: http://site.com/login_form?redirect_url=' . $redirect_url ); 
```

确保 URL 参数**redirect_url**从一个页面传递到另一个页面，在用户登录后，检查是否设置了 redirect_url，如果是：

```
$redirect_url = json_decode($_GET['redirect_url']);
header('Location: $redirect_url'); 
```

# python - 如何将 YouTube 视频中的数据放入 Excel 电子表格？

> ID：12203573
> 
> 赞同：0
> 
> 时间：2012-08-30T18:52:26.303
> 
> 标签：python, excel, youtube

在 YouTube 上搜索内容时，我试图从前一百个左右的结果中获取数据。我发现了一些谷歌提供的代码字符串，但我无法正确执行它们：

```
def SearchAndPrint(search_terms):
    yt_service = gdata.youtube.service.YouTubeService()
    query = gdata.youtube.service.YouTubeVideoQuery()
    query.vq = search_terms
    query.orderby = 'viewCount'
    query.racy = 'include'
    feed = yt_service.YouTubeQuery(query)
    PrintVideoFeed(feed) 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:26:10.517

实现您提到的目标的最简单方法是将结果输出到逗号分隔值 (CSV) 文件。Excel 能够打开 CSV 文件。

```
def PrintVideoFeed(feed):
  print 'title,published,description,category,tags,URL'
  for entry in feed.entry:
    PrintEntryDetails(entry)

def PrintEntryDetails(entry):      
  print '%s, %s, %s, %s, %s' % (entry.media.title.text, entry.published.text, entry.media.description.text, entry.media.category[[]0].text, entry.media.keywords.text, entry.GetSwfUrl()) 
```

如果脚本名为“SearchYouTube.py”，命令行可能是：

python SearchYouTube.py > results.csv

# windows - Windows屏保多实例

> ID：12203577
> 
> 赞同：1
> 
> 时间：2012-08-30T18:52:44.580
> 
> 标签：windows, screensaver, windows-screensaver

因此，Windows 屏幕保护程序只是一个传递 3 个参数之一的 exe。

```
/c for config screen
/s for fullscreen
/p <hwnd> for the little preview window. 
```

除了运行多个处理（这就是问题）之外，我的一切工作都很顺利。

当您打开 Windows 屏幕保护程序选择器窗口并选择我的屏幕保护程序时，它会使用 /p 启动它，以便它可以显示预览。如果单击设置按钮，它将再次使用 /c 调用我的 sreensaver。现在我有两个处理正在运行。当我关闭对话框时，我的进程结束，但 Windows 现在再次使用 /p 调用我的屏幕保护程序。这些过程不断增加。

我应该如何处理这个问题？我没有看到有关该主题的任何文档。我希望那里有人以前做过。

我不想监视其他进程以只保持一个运行。必须有一个我没有看到的解决方案。

## 谢谢

经过进一步调查，我看到 Windows 将消息传递给您的屏幕保护程序：http: [//msdn.microsoft.com/en-us/library/cc144066%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/cc144066%28v=vs.85%29.aspx)

我设置了一个过滤器来捕获消息。我得到了一切，但破坏。哈哈。我假设它会通过 WM_DESTROY 告诉你保释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:39:16.880

原来我回答了我自己的问题。请参阅上面的 msdn 链接。您必须监视消息并在​​ WM_DESTROY 上终止您的进程。– HCHogan 刚刚编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:56:21.917

为什么不只查看参数以查看它是否在预览模式下运行，然后更改您的代码以不做任何您试图避免的事情，

或将 HWND 存储在注册表中，然后使用它来查看屏幕保护程序正常启动时预览是否仍在运行

# asp.net-mvc - 从 Class DataAnnotation 渲染 LabelFor 而不使用 Label 标记

> ID：12203580
> 
> 赞同：20
> 
> 时间：2012-08-30T18:52:57.420
> 
> 标签：asp.net-mvc, razor

我有以下代码

```
<div class="editor-label">
    @Html.LabelFor(model => model.subCategoryName)
</div> 
```

它将html呈现为

```
<div class="editor-label">
   <label for="subCategoryName">Sub-Category Name</label>
</div> 
```

如何在没有`<label>`但仍从 ViewModel DataAnnotations 中获取值的情况下呈现干净的 HTML，例如：

```
 [Display(Name = "Sub-Category Name")]
    public string subCategoryName { get; set; }

<div class="editor-label">
   Sub-Category Name
</div 
```

我已经尝试了@Html.XXXXXX（.DisplayTextFor、.DisplayNameFor 等）的几乎所有方法——但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-30T21:16:41.903

我认为在这种情况下正确的解决方案是不使用`LabelFor`而是使用新的 MVC 4 方法[DisplayNameFor](http://msdn.microsoft.com/en-us/library/hh413695(v=vs.108))。

```
 @Html.DisplayNameFor(model => model.subCategoryName) 
```

我注意到你说它不起作用，但这似乎很奇怪。这是 ASP.Net 上的一个示例[- 将新字段添加到电影模型和表](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table)中，这正是您想要做的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T03:10:12.863

发现和修复：经过大量挖掘，我找到了解决方案。我的 DataAnnotation 格式不正确：

```
 [Required]
    [DisplayName("Sub-Category Name")]
    public string subCategoryName { get; set; } 
```

不是

```
 [Required]
    [Display(Name = "Sub-Category Name")]
    public string subCategoryName { get; set; } 
```

2 - 我使用了以下 RAZOR 代码：

```
@Html.DisplayNameFor(model => model.subCategoryName) 
```

它现在工作！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T09:10:49.330

```
[Mostly use in Display Name]
@Html.DisplayNameFor(model => model.UserName) 

[Used for Label, Functionality of Label click on it then cursor point to related control]

 @Html.LabelFor(m => m.UserName)               

[Used for Textbox]

@Html.TextBoxFor(m => m.UserName)

[Used for Validation Message]

@Html.ValidationMessageFor(m => m.UserName) 
```

# c# - uri 相对 vs 绝对

> ID：12203583
> 
> 赞同：6
> 
> 时间：2012-08-30T18:53:06.857
> 
> 标签：c#, uri

我的 C# 代码中的**uri**有一些问题

这是有效的：

```
var uri = new Uri("d:/Programozas dotNet/Ugyfel/Ugyfel.ClientWpf/Skins/MainSkin.xaml"); 
```

但不幸的是，这些都不是：

```
var uri = new Uri("/Skins/MainSkin.xaml", UriKind.Relative);
var uri = new Uri("pack://application:,,,/Skins/MainSkin.xaml");
var uri = new Uri("Ugyfel.ClientWpf;/Skins/MainSkin.xaml", UriKind.Relative); 
```

IOException：找不到资源“skins/mainskin.xaml”。

如何使用**绝对uri 的****相对**uri ？

 *** * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T17:35:46.280

那是一个愚蠢的错误。正确的方法是不带“/”

```
var uri = new Uri("Skins/MainSkin.xaml", UriKind.Relative); 
```

感谢你的付出

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:02:51.197

相对 URL（在 WPF 或任何其他桌面应用程序中）相对于[Environment.CurrentDirectory](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)。通常这是您的 exe 所在的文件夹，但在 VS 单元测试环境中可能会有所不同。

我假设在您的项目中，您有一个名为“Skins”的文件夹，并且您的 exe 可能位于“bin\debug”中。

最简单的做法是将 MainSkin.xaml 设置为复制到输出目录（在文件属性中），这样您就可以仅使用名称来引用它，而无需路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:08:07.630

`Urikind.Relative`当您尝试访问应用程序所在位置的资源时，这是有意义的。例如，在此代码中，它使用位于应用程序 bin 文件夹中的图像。

```
private void btnDisplayDetails_Click(object sender, RoutedEventArgs e)
    {
        Person person = _ucPersons.GetSelectedPerson();
        if (person != null)
        {
            lblName.Content = person.Name;
            lblAge.Content = person.BirthDay.ToShortDateString();
            Uri uri = new Uri( "m_" + person.ImageRef + ".jpg", 
                UriKind.Relative);
            imgPerson.Source = BitmapFrame.Create(uri);
        }
    } 
```

礼貌：[这个 Urikind.relative 到底是什么意思](https://stackoverflow.com/questions/5242391/what-exactly-mean-by-this-urikind-relative)

* * *

或者，当您已经定义了基本 URI 时也会使用它。检查[UriKind MSDN 链接](http://msdn.microsoft.com/en-us/library/system.urikind%28v=vs.85%29.aspx)：

> 绝对 URI 的特点是对资源的完整引用（例如： http: [//www.contoso.com/index.html](http://www.contoso.com/index.html)），而相对 Uri 取决于先前定义的基本 URI（例如：/index.html）。**

# java - 如何导航到 .java 文件而不是在类路径中指定源路径的 .class 文件？

> ID：12203584
> 
> 赞同：3
> 
> 时间：2012-08-30T18:53:07.083
> 
> 标签：java, android, eclipse, classpath

我在项目的 libs 文件夹下有一个预构建的 jar，以加快构建时间。但是，我想在导航到其中一个包含的类时浏览 lib 的源代码，因此将以下行添加到 .classpath：

```
<classpathentry kind="lib" path="libs/mylib.jar" sourcepath="/MyLibSrc"/> 
```

其中 MyLibSrc 包含 mylib.jar 的源代码。当我导航到 lib 的类之一时，Eclipse 会打开相应的 .class 文件而不是 .java 文件。如何设置打开 MyLibSrc 下的 .java 文件？有时我可能真的想在导航到 .java 文件时对其进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:59:30.573

![在此处输入图像描述](../Images/52467c0b17a924013c4bc69ea7bcc258.png)

只需右键单击您的项目，转到属性并在 java 构建路径中的源选项卡下添加您的 Jar 的 Java 文件.. 应该像那样工作.. 尝试这两个选项.. 忘记哪个曾经工作过.. 做了很久回来。。万事如意

# java - 是否有用于调度依赖可运行文件的 java 库（在依赖 DAG 中给出）？

> ID：12203587
> 
> 赞同：8
> 
> 时间：2012-08-30T18:53:14.487
> 
> 标签：java, multithreading, scheduling

我有一堆我想在多个线程中运行的可运行文件，有些依赖于其他线程在开始之前完成。我编写了一个简单的实用程序来执行此操作，但是是否有已经提供此功能的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:06:02.243

您可以使用 [CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)来协调线程的活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:13:11.770

“有些人在开始之前依赖其他人完成”。

我假设这意味着某些任务使用其他任务的结果作为输入参数。如果是这样，请搜索“java 数据流”或“java 工作流”。

如果每个任务的输入参数可以用单个顺序队列表示，这种特殊类型的数据流称为“Actor 模型”，因此请搜索“java actor library or framework”。

特别是，我的一个开源项目[df4j](https://github.com/rfqu/df4j)支持数据流和演员样式。

# android - Android 嵌入式条码阅读器

> ID：12203595
> 
> 赞同：1
> 
> 时间：2012-08-30T18:53:34.167
> 
> 标签：android, zxing

我想使用 Nexus 平板电脑的前置摄像头扫描 QR 码，在放置 QR 码纸时，应用程序应在屏幕上的方框中显示摄像头图像，以便此人可以对齐 QR 码因此。我应该使用 ZXing，如果是，我想知道如何将 ZXing 嵌入到我的屏幕中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:36:39.870

[推荐的选项是通过将ZXing Android 集成器](http://code.google.com/p/zxing/source/browse/trunk#trunk/android-integration)捆绑到您的应用程序中来使用 Intent 调用 ZXing 。这将提示用户下载 ZXing 条码扫描器应用程序（如果未安装），然后打开它以处理扫描请求。

另一种选择是检查 ZXing 源代码，删除所有不需要的部分，然后将它的 Frankenstein 版本捆绑到您的应用程序中。我最近这样做是为了使主条形码屏幕成为片段而不是活动。有很多依赖的类（相机、历史数据库、编码函数等），所以这有点耗时，而且你最终会重新发布很多代码。

# android - 如何将 Json 对象反序列化为 android 类？

> ID：12203596
> 
> 赞同：0
> 
> 时间：2012-08-30T18:53:38.613
> 
> 标签：android, json

我有 JSON 对象，例如“{ FirstName: Sergey, LastName: Petrov, Sex: Male }”

我在 android 应用程序中有这些名称的类。

如何将此 JSON 对象反序列化为 Android 应用程序中的类。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:55:28.547

有几种选择，我向您推荐这个：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# reporting-services - 获取特定列值的 SSRS 矩阵行总计

> ID：12203597
> 
> 赞同：3
> 
> 时间：2012-08-30T18:53:48.497
> 
> 标签：reporting-services

在 Microsoft Sql Server Reporting Services 2008 R2 **Matrix**中，我想添加一列，显示一个数据项的百分比除以该行数据项的总数。

*道达尔*的表情是`=Sum(Fields!Count.Value)`。我如何从*Success Percent*访问该行的 Success 总和，以便我可以执行类似的操作`=SUM(Fields!Count.Value WHERE Fields!Name.Value = "Success")/SUM(Total)`？

```
Adv.Name 成功失败 总成功百分比
2 8 10 20%
乙 10 0 10 100%
C 8 2 10 80%
            ----------------------
            数据项
                                    ------------
                                    列 Grp 总计

```

![设计模式下的报告](../Images/2bc371698823092f1fc433882ffafe78.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:04:40.517

啊! 这很容易！显然，SUM 中的表达式对每个数据项执行一次，允许我使用标准的 Iif 语句进行必要的过滤。

```
=SUM(Iif(Fields!Status.Value = "Success", Fields!Count.Value, 0))/SUM(Fields!Count.Value) 
```

# tsql - 如何从一个 Sybase DB 导出自定义数据类型并导入到另一个？

> ID：12203598
> 
> 赞同：0
> 
> 时间：2012-08-30T18:53:52.230
> 
> 标签：tsql, sybase

源 Sybase DB 中有数百个自定义数据类型需要位于新创建的目标 Sybase DB 中。

通过一些烦躁，我能够创建一个脚本来提取源数据库中的所有自定义数据类型并将其添加到目标数据库中。但是，我不断收到以下错误：

`Number (257) Severity (16) State (1) Server (ASED052) Implicit conversion from datatype 'NUMERIC' to 'VARCHAR' is not allowed. Use the CONVERT function to run this query.`

我检查并仔细检查了所有类型是否匹配（尽管`CHAR`源中的类型被设为`VARCHAR`目标，我认为这是一个 OKAY 隐式转换？）

有没有办法创建一个脚本，允许我从源数据库导出所有自定义数据类型并将它们导入目标数据库，以便类型匹配并且不会出现转换问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:41:41.307

查看sybase 附带的**ddlgen实用程序，通常在 Sybase Central 目录或 $SYBASE/ASEP/bin 中找到。**Sybase 版本之间的语法可能略有不同，但您应该能够生成脚本来创建所有数据库对象，包括用户定义的数据类型 (UDD)、索引、存储过程等。

如果您只想要用户定义的数据类型，请查看**“-T”**标志，它允许您选择特定的对象类型。

# php - 我应该在 Symfony2 中的哪里放置 ImageManager 类？

> ID：12203606
> 
> 赞同：0
> 
> 时间：2012-08-30T18:54:19.933
> 
> 标签：php, symfony, symfony-2.1

我有这个 MongoDB 文档：`MyBundle/Document/Image`.

它表示图像、其路径、宽度和其他属性。

现在我需要处理图像，我认为除了我选择的图像处理库之外，我还应该有一个特定于应用程序的类来处理这个问题。我认为做这样的事情会很好：

```
$image_manager = new ImageManager;
$image = $image_repository->find($id);
$thumbnail = $image_manager->createThumbnail($image); 
```

现在，我不确定我是否希望我的 ImageManager 类也处理 MongoDB 查询，比如自定义存储库，所以假设我不这样做。那么我应该在哪里放置 ImageManager 类？

你认为让它处理这两种任务是错误的吗？（例如：`createThumbnail`和`findAllImagesWithoutThumbnail`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:32:36.897

我的`Service`应用程序中有一个文件夹，可以将所有服务都放在那里，例如：

*   `UserService`
*   `User\AvatarService`
*   `OrganizationService`
*   ETC...

当然，您可以使用`Manager`代替`Service`，但想法是一样的。

大多数情况下，我的服务有如下方法：

*   `find($id)`
*   `save(Class $class)`
*   `delete(Class $class)`,
*   ETC...

一些服务有其他方法。例如，`User\AvatarService`有`upload()`处理头像文件上传的方法。

顺便说一句，我[将我的服务排除在捆绑之外](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:30:55.133

我在 symfony2 中使用 WideImage。我只是将它放在供应商中并将其添加到 AppKernel.php 并自动加载。它在项目范围内可见。

# javascript - 带有 YouTube iFrame API 的 IE 中的 JavaScript 问题

> ID：12203607
> 
> 赞同：0
> 
> 时间：2012-08-30T18:54:20.493
> 
> 标签：javascript, jquery, internet-explorer, youtube-api

抱歉标题模棱两可，但这是一个奇怪的问题。我正在使用 YouTube iFrame API，它在除 IE 之外的所有浏览器中都运行良好。在 IE 中，最初没有任何 JavaScript 运行。然后，当我打开 DevTools 并刷新时，一切正常！任何人，有一个线索可能是什么原因造成的？

这是原型：[http ://www.frontendconcepts.com/youtubetest/](http://www.frontendconcepts.com/youtubetest/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:56:08.180

在您的 ajax 调用中删除您`console.log(response);`的 - IE 将停止 js 执行一旦它到达该行，因为它没有控制台，直到您打开开发人员工具

```
$.getJSON('https://gdata.youtube.com/feeds/api/users/' + userId + '/uploads?&max-results=' + maxResults +'&category=' + tagName + '&alt=jsonc&v=2&callback=?', null, function(response) {
  console.log(response); // <-- here 
```

# background-image - 在 Report Viewer 2010 中居中背景图像

> ID：12203609
> 
> 赞同：1
> 
> 时间：2012-08-30T18:54:31.727
> 
> 标签：background-image, reportviewer, visual-studio-2012

除了调整图像大小之外，还有没有办法在报表查看器中将背景图像居中？看来我可以让它重复，剪辑，但不能居中，这是我唯一想做的事情。

# c# - 如何通过增加 .NET 进程中工作集的大小来减少软页面错误？

> ID：12203613
> 
> 赞同：0
> 
> 时间：2012-08-30T18:54:48.347
> 
> 标签：c#, .net, .net-4.0

我们遇到了中断应用程序的软页面错误问题。

由于增加程序工作集的行为可能会导致软页面错误，有没有一种方法可以在启动时提前增加程序的工作集？

**更新：**

[How to set MinWorkingSet and MaxWorkingSet in a 64-bit .NET process?](https://stackoverflow.com/questions/12203969/how-to-set-minworkingset-and-maxworkingset-in-a-64-bit-net-process)有几个很好的答案？.

**更新：**

Is there a way to expand the current WorkingSet [to 1GB? Is there a way to expand the current WorkingSet of a process to 1GB?](https://stackoverflow.com/questions/12221541/is-there-a-way-to-expand-the-current-workingset-of-a-process-to-1gb)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:29:46.797

[您可以使用Process.CurrentProcess().MinWorkingSet](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.minworkingset.aspx)设置工作集大小。

文档说这样做并不能*保证*内存将被保留或常驻。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234(v=vs.85).aspx)。

# mysql - 一台服务器中的 MySQL 异步数据库

> ID：12203618
> 
> 赞同：1
> 
> 时间：2012-08-30T18:55:10.887
> 
> 标签：mysql

我在一个 mysql 服务器中有两个数据库`database_master`，`database_backup`.
我想`database_backup`复制插入或更新的所有新数据`database_master`。
但是是否有一些数据被删除了`database_master`，数据`database_backup`仍然会保留。

我们如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T17:28:19.123

您可以在 database_master 表上为插入和更新语句使用触发器。在触发器中，您可以将数据插入到 database_backup 表中。

但是，请注意，这不会是异步的。两个表中的插入（或更新）将一起成为一个事务。如果出现问题，两者都将被回滚（在某些情况下这是一件好事）。

database_master 上的删除不会影响 database_backup。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:02:15.513

为了清楚起见，我认为您想要复制，而不是复制记录的删除。这不能通过本机复制（既不是基于行也不是基于语句）来完成。主要原因是如果在主数据库上删除一行然后插入一行，新行可能会获得旧行的主键。在副本数据库上，这将导致密钥冲突。

但是，要进行某种 hack 审计日志记录，您可以在从属 mysql 服务器上为每个实际 DB 表创建一个日志记录表。例如，如果您有一个表`foo`，您将创建一个相应的`foo_logging`表。日志记录表将包含原始的每一列，以及一个单独的自动递增主键。然后，您将在原始表上放置一个触发器，以将任何新记录或更新记录的副本插入到相应的日志记录表中。

# sql-server - SqlCommand ExecuteReader 作为 HttpWebRequest

> ID：12203622
> 
> 赞同：0
> 
> 时间：2012-08-30T18:55:33.633
> 
> 标签：sql-server, design-patterns, ado.net, network-programming, httpwebrequest

我有多个客户。每个客户端都有一个本地 Sql Server 和多个 WinForms 应用程序，这些应用程序通过 ADO.NET（在数据访问层中）访问本地数据库。我想将数据库集中在一个设施中。

VPN 不是一种选择。

那么问题就来了：如何在不将所有 WinForms 应用程序转换为 Web 应用程序（或其他深度重构）的情况下快速实现这一点？

除了性能方面的所有考虑...我知道您可以[通过 HTTP 传输 DataSet](https://stackoverflow.com/questions/561203/can-i-serialize-a-data-table-or-data-set-to-transfer-over-a-web-service-in-c)，但是您将如何通过 HTTP 发送 SqlCommand.ExecuteReader() 等请求？

本质上，我希望使过渡对现有应用程序尽可能透明。

也许扩展 SqlCommand 并覆盖相关方法？某种 Sql Server[代理](http://www.dofactory.com/Patterns/PatternProxy.aspx)？

# sql - 跳过/忽略/不插入重复行

> ID：12203623
> 
> 赞同：3
> 
> 时间：2012-08-30T18:55:44.773
> 
> 标签：sql, sql-server-2008, insert, merge

这就是我想要的：将行从 tableA 复制到 tableB，但不是 tableB 中已经存在的任何行。没有 PK 或身份，我只想检查每个字段，如果有所有相同字段的匹​​配行，请不要插入。我已经尝试过 INSERT 和 MERGE：

```
 --try with INSERT
 INSERT TableB(col1,col2,col3,col4,col5,col6, etc.)
 SELECT (col1,col2,col3,col4,col5,col6, etc.)  
 FROM tableA as src
 WHERE NOT EXISTS (SELECT 1 FROM TableB as T
            WHERE               
            T.col1 = src.col1 AND
            T.col2 = src.col2 AND
            T.col3 = src.col3 AND
            T.col4 = src.col4 AND
            T.col5 = src.col5 AND
            T.col6 = src.col6, etc.) 
```

我也尝试过 MERGE：

```
 MERGE INTO tableA src
  USING tableB T
  ON (
            T.col1 = src.col1 AND
            T.col2 = src.col2 AND
            T.col3 = src.col3 AND
            T.col4 = src.col4 AND
            T.col5 = src.col5 AND
            T.col6 = src.col6, etc.)
  WHEN NOT MATCHED THEN
  INSERT (col1,col2,col3,col4,col5,col6, etc.)
  VALUES (col1,col2,col3,col4,col5,col6, etc.); 
```

两者都做同样的事情：我将进行插入（或合并），最初所有行都被导入，这很好，但是在第二次尝试（应该插入/合并 0 行）时，它将插入/合并 60%的行。

我相信这个问题是因为我没有 PK，这是我在其他帖子上看到的。我只想匹配所有字段，这可能吗？我错过了什么吗？

感谢您的任何建议/指导！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:26:51.520

你可以使用除了

```
INSERT INTO table1
SELECT * from table2
EXCEPT 
SELECT * from table1; 
```

看看[这里的小提琴](http://sqlfiddle.com/#!3/34f0a/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:00:37.717

您可以`LEFT OUTER JOIN`在 select 语句中使用 a 来查找所有列的记录`NULL`，如下所示：

```
 INSERT INTO tableB (col1,col2,col3,col4,col5,col6, etc.)
 SELECT (A.col1, A.col2, A.col3, A.col4, A.col5, A.col6, etc.)  
 FROM tableA as A
 LEFT OUTER JOIN tableB AS B ON A.col1 = B.col1 AND A.col2 = B.col2 AND 
     A.col3 = B.col3 ... /* all the way to B.col99 or whatever */
 WHERE B.col1 IS NULL AND B.col2 IS NULL AND B.col3 IS NULL ... 
    /* all the way to B.col99 or whatever your last column is */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T19:21:13.277

我的猜测是问题是NULL。尝试查询为：

```
INSERT TableB(col1,col2,col3,col4,col5,col6, etc.)
SELECT (col1,col2,col3,col4,col5,col6, etc.)  
FROM tableA as src
WHERE NOT EXISTS (SELECT 1 FROM TableB as T
                  WHERE (T.col1 = src.col1 or t.col1 is null and src.col1 is null) AND
                        (T.col2 = src.col2 or t.col2 is null and src.col2 is null) AND
                        . . . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:22:11.133

您的问题很可能与 NULL 值有关。以下脚本确保如果存在某些列为 NULL 的现有行，则它们是匹配的。

```
--Create the sample source table.
--Notice that the columns allow NULL values...
CREATE TABLE #T1
(
  Col1 nvarchar(10) NULL,
  Col2 nvarchar(10) NULL,
  Col3 nvarchar(10) NULL
)

--Create the sample destination table.
CREATE TABLE #T2
(
  Col1 nvarchar(10) NULL,
  Col2 nvarchar(10) NULL,
  Col3 nvarchar(10) NULL
)
GO
--Populate the source table with some initial rows
--Notice that some column values are NULL
INSERT INTO #T1 (Col1,Col2,Col3) 
VALUES ('A','B',NULL),
        ('D','E','F'),    
        ('G',NULL,'I');
GO
--Verify the data in the tables 
--Table #T1 should have data in it
SELECT * FROM #T1;
--Table #T2 should be empty
SELECT * FROM #T2;
GO
--Copy the rows from #T1 to #T2
--where there are no matching rows.
INSERT INTO #T2(Col1,Col2,Col3)
SELECT 
  T1.Col1,T1.Col2,T1.Col3 
FROM #T1 AS T1
LEFT OUTER JOIN #T2 AS T2
ON  IsNull(T1.Col1,'') = IsNull(T2.Col1,'')
AND IsNull(T1.Col2,'') = IsNull(T2.Col2,'')
AND IsNull(T1.Col3,'') = IsNull(T2.Col3,'')
WHERE T2.Col1 IS NULL AND T2.Col2 IS NULL AND T2.Col3 IS NULL
GO
--Verify the data in the tables.  They should be the same now.
SELECT * FROM #T1;
SELECT * FROM #T2;
GO
--Add a some new rows to #T1
INSERT INTO #T1 (Col1,Col2,Col3) 
VALUES ('J','K','L'),
       ('M',NULL,'O'),
       ('P','Q','R'),
       ('A','B','C'); --THIS LAST ROW DOES NOT MATCH THE EXISTING A,B,NULL ROW AND WILL BE INSERTED ON MERGE
GO
--Merge the tables, and yes you could use MERGE where the ON clause handled NULLs
INSERT INTO #T2(Col1,Col2,Col3)
SELECT 
  T1.Col1,T1.Col2,T1.Col3 
FROM #T1 AS T1
LEFT OUTER JOIN #T2 AS T2
ON  IsNull(T1.Col1,'') = IsNull(T2.Col1,'')
AND IsNull(T1.Col2,'') = IsNull(T2.Col2,'')
AND IsNull(T1.Col3,'') = IsNull(T2.Col3,'')
WHERE T2.Col1 IS NULL AND T2.Col2 IS NULL AND T2.Col3 IS NULL
GO
--Verify the new data is in both tables.
SELECT * FROM #T1;
SELECT * FROM #T2;
GO
--Cleanup
DROP TABLE #T1;
DROP TABLE #T2; 
```

# javascript - three.js: THREE.Vector3.sub() 行为怪异

> ID：12203628
> 
> 赞同：1
> 
> 时间：2012-08-30T18:55:54.523
> 
> 标签：javascript, three.js

为什么在这种情况下 THREE.Vector3.sub 会返回 (0,0,0)？

```
p0 = new THREE.Vector3( 0, 100, 50 );
p1 = new THREE.Vector3( 0, 50, 100 );
dummy = new THREE.Vector3(0,0,0);
p1_relative_to_p0 = dummy.sub(p1, p0);
console.log(p1_relative_to_p0); 
```

这是 THREE.Vector3 原型的子函数：

```
sub: function ( a, b ) {
    this.x = a.x - b.x;
    this.y = a.y - b.y;
    this.z = a.z - b.z;
    return this;
}, 
```

控制台输出：

> 三.Vector3 x: 0 y: 0 z: 0

为什么不是输出 (0, 50, -50) ？

代码可以在这里看到： [https ://dl.dropbox.com/u/2070405/webgl_lines_splines_jon.html](https://dl.dropbox.com/u/2070405/webgl_lines_splines_jon.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:26:19.390

`console.log`你成了警告的受害者。在 Chrome 中，记录的对象是*在您展开它*时评估的，而不是在您记录它的时候。

由于`return this`，确实如此`p1_relative_to_p0 === dummy`。您`dummy`稍后会更新，因此也会更新`p1_relative_to_p0`，因为对象在 JavaScript 中是共享的。当您展开对象时，您实际上是在阅读同时`dummy`设置为的内容`0, 0, 0`。

尝试设置断点而不是日志来停止执行以观察正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:16:58.833

我试图在[此处](http://jsfiddle.net/KuZLZ/)复制该行为，但它完全按照您的预期工作。您是否有可能只是不小心从错误区域读取值？

# activex - 如何在 IE 中从 ActiveX 执行 Javascript

> ID：12203637
> 
> 赞同：0
> 
> 时间：2012-08-30T18:56:19.623
> 
> 标签：activex, npapi

例如，我有一个 javascript

```
try { __flash__toXML(onYouTubePlayerReady("")) ; } catch (e) { "<undefined/>"; } . 
```

在 FireFox 中，Adobe 插件（Flash 播放器插件）通过调用在 Java Script 之上执行`NPN_Evaluate`并`NPN_Evaluate()`返回结果。

我不知道在 IE 中，adobe flash player(ActiveX) 如何执行上述和相同的 JAVA 脚本。但是我在 IShockwaveFlash 的 SetReturnValue() 中看到了一个结果，例如`</undefined>`, `<string>3456</string>`。看起来 Adob​​e ActiveX 没有`IHTMLWindow2::execScript()`用于执行 JS。

我想知道如何从 ActiveX 执行 JS 代码。

我知道如何在`IHTMLWindow2::execScript()`. 但`IHTMLWindow2::execScript()`不返回结果。我也知道如何在`IDispatch()`接口的帮助下调用 JS 函数。

我想知道 Adob​​e ActiveX 是如何执行上述代码的。我也在为 IE 开发一个类似的 ActiveX，我想从 ActiveX 执行类似的 JS（上一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:18:25.070

ActiveX 使用 IE 的 IHTMLWindow2::execScript() 来执行 javascript，但 IHTMLWindow2::execScript() 不返回结果。它使用 IshockwaveFlash::SetRerernValue 和 IShockwaveFlash::CallFunction 来返回 javascript 结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:14:28.493

据我所知，没有办法做你要求做的事情。至少如果它是相当新的，并且只适用于较新版本的 IE（我最近没仔细看）。但是，一种选择是将脚本包装在函数调用中，并将调用的结果保存到某个全局变量（在窗口上），然后您可以查询该变量以获取返回值。

我不确定，但我猜这与 Flash 正在做的事情类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T21:11:12.517

虽然我同意 SWFObject 是最好的方法，但您可以通过`'src'`和`'movie'`参数传递值。前任：

```
'src', '/resources/flash/corporateWebsitButtons?variable=value&variable2=value'
'movie', '/resources/flash/corporateWebsitButtons?variable=value&variable2=value' 
```

# wpf - 如何在初始化后调整 GridView 列的宽度？

> ID：12203643
> 
> 赞同：3
> 
> 时间：2012-08-30T18:56:37.390
> 
> 标签：wpf, gridview, slider, width, clipping

**更新问题：**

在 WPF 中，我使用 a `GridView`（在 a 内`ListView`）来显示对列表`Textbox-Slider`。每对这样的对都恰好排列在单列的一个单元格中（通过`DockPanel`对每对使用 a）。

Slider 具有最小宽度，因此它不会折叠，文本框不会折叠，它会在接收输入时动态调整大小。

问题是当文本框的宽度增加时，列宽并没有等效地改变。这会导致相应行中的滑块在右侧被视觉剪辑。结果，滑块的旋钮在移动到右端时消失在空隙中。

所以问题是：如果内容超过可用空间（在初始化时设置），我如何强制gridview的列宽动态调整大小？

![带有消失旋钮的百分比滑块](../Images/71bcaa0ca5b1677a84222ed3821ea6d4.png)

*只需忽略文本框和滑块之间的标签（没有它，行为不会改变）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:08:18.920

一种方法是获取标签事件并将其添加到网格（sizeChanged），然后根据标签大小调整网格大小......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:25:29.927

```
Size containerSize=new Size(100, 100);
public Size CalculateSize(FrameworkElement visualBlock, Size containerSize)
{
    visualBlock.Measure(containerSize);
    return visualBlock.DesiredSize;
} 
```

此代码获取框架元素的大小以在容器内渲染。之后，您可以以编程方式设置大小。需要知道父母的大小才能正确工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:00:02.567

某些容器可能会通过 剪辑它[`ClipToBounds`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx)，或者根据您的背景颜色的实现方式，它们可能会从另一列覆盖。

# android - 为什么在活动开始时调用 onResume()？

> ID：12203651
> 
> 赞同：8
> 
> 时间：2012-08-30T18:57:04.803
> 
> 标签：android, android-activity, onresume

我有一个应用程序，登录后它会将您带到欢迎屏幕。我放了一个 Toast 来查看 onResume 何时触发，但它也在 onCreate 之后触发

```
protected void onResume(){
    super.onResume();
    Database openHelper = new Database(this);//create new Database to take advantage of the SQLiteOpenHelper class
    myDB2 = openHelper.getReadableDatabase(); // or getWritableDatabase();
    myDB2=SQLiteDatabase.openDatabase("data/data/com.example.login2/databases/aeglea", null, SQLiteDatabase.OPEN_READONLY);//set myDB to aeglea
         cur = fetchOption("SELECT * FROM user_login");//use above to execute SQL query
         msg.setText("Username: "+cur.getString(cur.getColumnIndex("username"))
                     +"\nFull name: "+cur.getString(cur.getColumnIndex("name"))+" "+cur.getString(cur.getColumnIndex("last"))
                     +"\ne-mail: "+cur.getString(cur.getColumnIndex("email"))
                     +"\nAeglea id:"+cur.getString(cur.getColumnIndex("uid")));

         Toast.makeText(getApplicationContext(), "RESUMED", Toast.LENGTH_SHORT).show();
} 
```

它来自：

```
 //create new intent
 Intent log = new Intent(getApplicationContext(), Welcome.class);
 // Close all views before launching logged
  log.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  startActivity(log);
   // Close Login Screen
   finish(); 
```

我很困惑。请在这里提供一些经验

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T19:08:00.530

好吧，我不太了解您要问什么或这里的问题是什么。但我会建议你阅读“ [Android Activity LifeCycle](http://www.skill-guru.com/blog/2011/01/13/android-activity-life-cycle/) ”，这将消除你的许多疑虑，因为 android 与其他语言或平台不同。

![在此处输入图像描述](../Images/b874ad833ae048473b9e07f5fbd7ab09.png)

**注意：**每次活动“可见”时都会调用 OnResume，因此只要活动变得可见，就会调用相同次数的方法。如果您只想第一次调用该方法，那么 OnCreate 就是您要寻找的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T19:10:19.297

请看一下活动生命周期状态图。

这是调用方法的顺序：

1.  onCreate()
2.  开始（）
3.  onResume()
4.  -> 活动正在运行

[http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T19:20:08.003

`onResume`after`onCreate`是正常的[Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

您甚至在第一次启动时就获得`onStart`并`onResume`调用的原因是它使编写代码更容易。

你可以假设在你返回之前`onResume`你会被`onPause`调用，因为没有`onPause`. 该行为可用于初始化`onResume`和取消初始化它们，而无需进一步检查`onPause`. 如果您不能确定`onResume`一开始就调用了它，那么整个方案就会中断。

附注：不要从任何`onXYZ`方法访问您的数据库，因为这会阻塞 UI 线程，而该线程应该绘制 UI 并处理触摸事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-28T13:37:23.713

只是为此添加一个方法。声明一个变量`int intResume = 0;`l 然后实现下面的onResume：

```
@Override
    public void onResume()
    {
        super.onResume();
        intResume++;
        // here put codes for after onCreate & "true resume"

        if (intResume>1) {
            intResume = 10;
            // here put codes for "true resume"
        }
    } 
```

# python - 在python中创建一个名称中包含变量的列表

> ID：12203652
> 
> 赞同：2
> 
> 时间：2012-08-30T18:57:11.290
> 
> 标签：python, list, for-loop

我正在尝试使用 python 中的 for 循环生成一系列（空）列表，并且我希望列表的名称包含一个变量。例如 y0、y1、y2 等。理想情况下看起来像这样：

```
for a in range (0,16777216):
global y(a)=[] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T18:59:39.777

你为什么不做一个列表字典？

```
y = {}
for a in range (0,16777216):
    y[a] = [] 
```

也为简洁起见：[https ://stackoverflow.com/a/1747827/884453](https://stackoverflow.com/a/1747827/884453)

```
y = {a : [] for a in range(0,16777216)} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T18:59:30.323

不确定这是否正是您想要的，但您不能通过简单地创建列表列表来模拟相同的行为吗？所以`your_list[0]`会对应`y0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:14:20.710

也许你应该看看 defaultdict

```
form collection import defaultdict

# This will lazily create lists on demand
y = defaultdict(list) 
```

此外，如果您想要对键的约束覆盖默认`__getitem__`功能，如下所示...

```
def __getitem__(self, item):
    if isintance(item, int) and 0 < item < 16777216:
         return defaultdict.__getitem__(self, item)
    else:
         raise KeyError 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T19:00:11.437

答案是：不要。而是创建一个列表，以便您使用 、 等访问变量`y[0]`。`y[1]`有关信息，请参见[此处接受的答案](https://stackoverflow.com/questions/2320945/python-using-vars-to-assign-a-string-to-a-variable)。

# haskell - “餐饮哲学家”的以下解决方案有什么问题？

> ID：12203655
> 
> 赞同：5
> 
> 时间：2012-08-30T18:57:28.593
> 
> 标签：haskell, concurrency, ghc, stm

为了熟悉 Haskell 中的 STM，我写了以下解决哲学家就餐问题的方法：

```
import Control.Concurrent
import Control.Concurrent.STM
import Control.Monad
import System.Random

type Fork = TVar Bool
type StringBuffer = TChan String

philosopherNames :: [String]
philosopherNames = map show ([1..] :: [Int])

logThinking :: String -> StringBuffer -> STM ()
logThinking name buffer = writeTChan buffer $ name ++ " is thinking..."

logEating :: String -> StringBuffer -> STM ()
logEating name buffer = writeTChan buffer $ name ++ " is eating..."

firstLogEntry :: StringBuffer -> STM String
firstLogEntry buffer = do empty <- isEmptyTChan buffer
                          if empty then retry
                                   else readTChan buffer

takeForks :: Fork -> Fork -> STM ()
takeForks left right = do leftUsed <- readTVar left
                          rightUsed <- readTVar right
                          if leftUsed || rightUsed
                             then retry
                             else do writeTVar left True
                                     writeTVar right True

putForks :: Fork -> Fork -> STM ()
putForks left right = do writeTVar left False
                         writeTVar right False

philosopher :: String -> StringBuffer -> Fork -> Fork -> IO ()
philosopher name out left right = do atomically $ logThinking name out
                                     randomDelay
                                     atomically $ takeForks left right
                                     atomically $ logEating name out
                                     randomDelay
                                     atomically $ putForks left right

randomDelay :: IO ()
randomDelay = do delay <- getStdRandom(randomR (1,3))
                 threadDelay (delay * 1000000)

main :: IO ()
main = do let n = 8
          forks <- replicateM n $ newTVarIO False
          buffer <- newTChanIO
          forM_ [0 .. n - 1] $ \i ->
              do let left = forks !! i
                     right = forks !! ((i + 1) `mod` n)
                     name = philosopherNames !! i
                 forkIO $ forever $ philosopher name buffer left right

          forever $ do str <- atomically $ firstLogEntry buffer
                       putStrLn str 
```

当我编译并运行我的解决方案时，似乎不存在明显的并发问题：每个哲学家最终都会吃饭，似乎没有哲学家受到青睐。但是，如果我`randomDelay`从 、compile 和 run 中删除语句`philosopher`，我的程序的输出如下所示：

```
1 is thinking...
1 is eating...
1 is thinking...
1 is eating...
2 is thinking...
2 is eating...
2 is thinking...
2 is eating...
2 is thinking...
2 is eating...
2 is thinking...

About 2500 lines later...

2 is thinking...
2 is eating...
2 is thinking...
3 is thinking...
3 is eating...
3 is thinking...
3 is eating...

And so on... 
```

在这种情况下发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:13:18.610

您需要使用线程运行时编译它并启用`rtsopts`它，然后运行它`+RTS -N`（或者线程数`+RTS -Nk`在哪里`k`。这样，我得到的输出如下

```
8 is eating...
6 is eating...
4 is thinking...
6 is thinking...
4 is eating...
7 is eating...
8 is thinking...
4 is thinking...
7 is thinking...
8 is eating...
4 is eating...
4 is thinking...
4 is eating...
6 is eating...
4 is thinking... 
```

关键是另一个哲学家要思考/吃饭，如果您没有几个硬件线程可供您使用，则必须发生上下文切换。这样的上下文切换在这里并不经常发生，因为分配不多，所以每个哲学家在轮到下一个之前都有很多时间思考和吃很多东西。

有了足够多的线程，所有哲学家都可以同时尝试伸手去拿叉子。

# jsf - JSF 页面中的 XHTML 代码修改直到服务器重新启动才反映

> ID：12203657
> 
> 赞同：2
> 
> 时间：2012-08-30T18:57:40.340
> 
> 标签：jsf, facelets, hotdeploy

我有一个带有 MyFaces 实现的 JSF 2.0 Web 应用程序。该应用程序在 Apache Tomcat 7 上运行。当我`xhtml`在运行或调试应用程序时对页面进行任何修改时，不会对页面进行任何更改。我需要重新启动 tomcat 以测试即使是很小的 xhtml 修改。这会导致开发过程中的时间松散。

我想这是一个 MyFaces 问题，因为当我将标准 JSF 实现从 Mojarra 切换到 MyFaces 时，问题就开始了。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:30:57.440

MyFaces 使用与 Mojarra 不同的 Facelet 缓存算法，并且更加激进。您需要将`javax.faces.PROJECT_STAGE`context 参数设置为`web.xml`to`Development`以将其调低。

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param> 
```

**更新**：自 Mojarra 2.2.11 起，它的行为将相同。因此，同样在 Mojarra 上，您需要设置`Development`阶段以关闭 Facelet 缓存。或者，将`javax.faces.FACELETS_REFRESH_PERIOD`上下文参数显式设置为`0`.

```
<context-param>
    <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
    <param-value>0</param-value>
</context-param> 
```

值`0`表示“从不缓存”。任何负值，例如`-1`表示“无限缓存”。任何正值，例如`10`表示要缓存的秒数。

不要忘记为生产重新启用缓存。项目阶段更有用，因为它也可以通过 JNDI 而不是 via 设置`web.xml`。

# html - 轮播问题 - 从屏幕上消失

> ID：12203659
> 
> 赞同：1
> 
> 时间：2012-08-30T18:57:48.763
> 
> 标签：html, twitter-bootstrap, carousel

嗨，我刚刚开始在我的网站上使用 Bootstrap Carousel。现在我不是 HTML 或 CSS 的好用户，因为我只是一个初学者......所以这里是有问题的网页[http://www.tightlinesuk.com](http://www.tightlinesuk.com) ......现在你可以看到 Carousel 加载正常然后向上滑动然后消失，再也见不到了。

我使用的主题是 RapidWeaver 主题，Media by ThemeFlood。我正在使用随主题提供的内置片段，我只更改了所需的位，即描述和照片 Src 路径。

这是代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="%pathto(scripts/bootstrap.min.js)%"></script>

<script type="text/javascript">
$(document).ready(function() {
$('#myCarousel').carousel({
interval: 5000
})
});
</script>

<p>Welcome to Tight Lines UK. Tight Lines offers everything an angler needs. We offer competitively priced products from manufacturers all over the country. We are slowly adding more and more suppliers to our portfolio. We supply everything from Bait to Bivvies and everything in between. And if we haven't got it on the website it doesn't mean we can't get it for you, so drop us a line or give us a call and we will see what we can do .... TIGHT LINES</p>

<div id="myCarousel" class="carousel slide">
<div class="carousel-inner">

<div class="item active">
<img src="http://fishcatcheruk.co.uk/img/common/IMAGES/Carp.jpg" alt="Banner 1" style="width:100%;">
<div class="carousel-caption">
<h4>Carp and Specimen Fishing</h4>
<p>In our Carp & Specimen section you will find everything you need from Boilie Stops to Bivvies. So drop in and have a look ..... TIGHT LINES</p>
</div><!--/carousel-caption-->
</div><!--/item-->

<div class="item">
<img src="http://fishcatcheruk.co.uk/img/common/IMAGES/Coarse.jpg" alt="Banner 2" style="width:100%;">
<div class="carousel-caption">
<h4>Coarse Fishing</h4>
<p>In our Coarse fishing section you will find all your Coarse Fishing needs ..... TIGHT LINES</p>
</div><!--/carousel-caption-->
</div><!--/item-->

<div class="item">
<img src="http://fishcatcheruk.co.uk/img/common/IMAGES/Game.jpg" alt="Banner 3" style="width:100%;">
<div class="carousel-caption">
<h4>Game Fishing</h4>
<p>Our Game Fishing section is currently under construction but will be open soon.</p>
</div>
</div><!--/carousel-caption-->
</div><!--/item-->

<a class="left carousel-control" href="#myCarousel" data-slide="prev">‹&lt;/a>
<a class="right carousel-control" href="#myCarousel" data-slide="next">›&lt;/a>
</div> 
```

现在，当您在 RapidWeaver 上预览时，此代码可以完美运行？请告诉我我做错了什么:)谢谢

哦，我正在使用 RW 4.4.2 和 Stacks 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:13:15.953

经过数小时的搜索、尝试和思考，我疯了，对我来说，解决方案就是用较新的版本替换**bootstrap.min.js 。**

# jquery - 专注于文本输入字段时显示字段我正在创建一个表单部分，当用户选中相应的复选框时，该部分显示输入字段（文本或选择字段）。我遇到的问题是，如果您显示了选择和其中一个文本输入，如果您尝试单击要输入的文本字段，它会将焦点跳转到选择，从而无法在该字段中输入。我正在使用 jQuery 来实现功能（最新版本），并正在执行以下 javascript 代码来实现这一点。随之而来的 HTML 在此之下。//班级年下拉菜单 $("#ifClassScholashipsSelected").css("display

> ID：12203660
> 
> 赞同：0
> 
> 时间：2012-08-30T18:57:51.010
> 
> 标签：jquery, select, input, focus, slideup

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:10:57.857

发生这种情况是因为您的 HTML 无效。

在 HTML 的开头附近，您打开一个`<label>`标签。在该`<label>`标签内，您打开一个`<div>`标签。然后`<label>`在关闭标签之前关闭`<div>`标签。

这是一个禁忌。移动你的`</label>`标签，它的工作原理：

**更改：**      [jsFiddle](http://jsfiddle.net/qVmWv/1/)

```
 <label><strong>Class Scholarships</strong>
<!--Dropdown if selected-->
<div id="ifClassScholashipsSelected">
    <em>Please select the appropriate class below</em></label> <br /> 
```

**致：**      [jsFiddle](http://jsfiddle.net/qVmWv/2/)

```
<label><strong>Class Scholarships</strong></label>
<!--Dropdown if selected-->
<div id="ifClassScholashipsSelected">
    <em>Please select the appropriate class below</em><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:16:19.443

因为这条线的问题

```
<label><strong>Class Scholarships</strong>
<!--Dropdown if selected-->
<div id="ifClassScholashipsSelected">
<em>Please select the appropriate class below</em></label> <br />
    <select name="SelectedClassYear"> 
```

您在 Div 之前打开标签并在 Div 中关闭它。

```
 <label> 
 <div>
 </label> 
 </div> 
```

这是 JsFiddle[演示](http://jsfiddle.net/ZWqDH/)

# javascript - 谷歌地图之类的图片工具

> ID：12203661
> 
> 赞同：3
> 
> 时间：2012-08-30T18:57:52.303
> 
> 标签：javascript, jquery, asp.net, image, iis

我正在尝试在我的页面上创建一个交互式图像，例如 Google 地图，以便与我自己的图像一起使用。

我想要类似的功能，包括拖动、滚动、放大/缩小。

我可以使用任何工具或插件吗？

我的环境由 IIS 服务器、ASP.NET、JavaScript 和 jQuery 组成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:00:20.487

你可以试试

[滚动](http://www.azoffdesign.com/overscroll)jQuery 插件

[昏暗查看器](http://www.dimviewer.com/)

[开放层](http://www.OpenLayers.org/)

它们具有您正在寻找的功能。

# windows-7 - Winsock 绑定在绑定端口上没有失败

> ID：12203665
> 
> 赞同：0
> 
> 时间：2012-08-30T18:58:20.840
> 
> 标签：windows-7, mingw, winsock

我最近有一个非常奇怪的错误行为，我无法解释为什么会这样。我为自己编写了一个网络库（仍在进行中）。今天我的单元测试失败了，因为另一个应用程序正在使用这些端口。这是意料之中的，但它并**没有**像预期的那样失败。我正在查看的结果`bind()`是 0。

```
handle = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);

sockaddr_in address;
address.sin_family = AF_INET;
address.sin_addr.s_addr = INADDR_ANY;
address.sin_port = htons(port);
if (bind(handle, (const sockaddr*)&address, sizeof(sockaddr_in)) < 0)
{
    throw std::runtime_error("failed to bind socket");
} 
```

（这是[完整的代码](https://github.com/rioki/spdr/blob/master/spdr/UdpSocket.cpp)。）

我的经验说`bind()`，如果它正在使用的端口会返回一个错误。我基本上错了吗？

有关详细信息，我们正在谈论 Windows 7 上的 winsock；使用 MinGW 构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:00:01.550

好的，我看到的问题不是绑定失败的一部分。很抱歉愚蠢地发布这个问题；但这让我发疯了..

尽管如此，netstat 说该端口正在使用中，尽管 TCP ...

# html - 左浮动 div 的中心容器

> ID：12203671
> 
> 赞同：0
> 
> 时间：2012-08-30T18:58:42.687
> 
> 标签：html, css

`display:inline-block`尽管很多问题都是关于类似问题的，但他们总是希望所有项目居中（当然可以使用变量容器（主体）本身）。

![浮动 div](../Images/58a1eb0b05682ac0d70c030b131689ce.png)

问题是，无论我为容器设置什么`display`，`clear`它都不会占用包含浮动元素的宽度。我很想认为这应该非常简单，但我不知道如何让它工作。

[这是一个基本的小提琴](http://jsfiddle.net/h9H8w/4/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:54:36.853

您必须为您的解决方案使用内部 div：

CSS：

```
#inner{
    width:396px; /* (100+15*2+2) * 3 */
    margin:auto;
} 
```

HMTL：

```
<div id="container">
    <div id="inner">
        <div class="block">1</div>
        <div class="block">2</div>
         <div class="block">3</div>
         <div class="block">4</div>
         <div class="block">5</div>
         <div class="clear"></div>
    </div>
</div>​ 
```

[**DEMO**](http://jsfiddle.net/h9H8w/5/)和没有固定体宽的[**DEMO 。**](http://jsfiddle.net/h9H8w/12/)

**UPD：**刚刚注意到你不希望你的身体宽度是固定的。使用`width:80%;`then 代替。[*演示*](http://jsfiddle.net/h9H8w/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:09:08.477

问题是您需要 2 个 div 来正确居中，然后需要一个设置宽度的 div 来包含所有块。然后您可以清除它并使用内部内部 div（在我的代码中称为“内容”）来控制内部浮动的开始。

更新了你的小提琴：http: [//jsfiddle.net/h9H8w/8/](http://jsfiddle.net/h9H8w/8/)

```
// HTML
<div id="container">
    <div id="inner">
         <div id="content">
             <div class="block">1</div>
             <div class="block">2</div>
             <div class="block">3</div>
             <div class="block">4</div>
             <div class="block">5</div>
        </div>
    </div>
</div>​

// CSS
body{
    width: 100%;
}
#container{
    float: left;
    position: relative; 
    left: 50%;
}
#inner{
    float: left;
    position: relative; 
    left: -50%;
    border:1px solid black;
}
#content{width: 500px;}
.clear{
    clear:both;
}
.block{
    float: left;
    width:100px;
    height:50px;
    border:1px solid black;
    margin: 15px;

}​ 
```

# css - 如何将多个字体添加到单独的标签中？

> ID：12203675
> 
> 赞同：0
> 
> 时间：2012-08-30T18:59:04.333
> 
> 标签：css, html, font-face

对于我正在开发的网站，客户希望使用 Roboto（由 Google 提供）作为他们的主要字体。页面上的几个元素使用了不同风格的 Roboto，例如 Roboto Thin 的 Roboto Light。但是，我使用了 @font-face 选择器让浏览器在 Roboto 中呈现文本。我的问题是设计需要使用不同的权重，而不是在标准的 Roboto 文本中。我不确定我是否足够清楚。如果您需要澄清或具体示例，请询问。

PS：我发现了一个关于类似问题的类似线程，但是，他们使用系统字体和他们的@font-face。 [使用@fontface，我如何将不同的样式应用于不同的字体系列？](https://stackoverflow.com/questions/9239039/using-fontface-how-do-i-apply-different-styles-to-different-font-families)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:03:26.970

> 如何将多个字体添加到单独的标签中？

```
@font-face {
    font-family: 'Crystal';
    src: url('../fonts/crystalnormal.eot');
    src: url('../fonts/crystalnormal.eot?#iefix') format('embedded-opentype'),
         url('../fonts/crystalnormal.woff') format('woff'),
         url('../fonts/crystalnormal.ttf') format('truetype'),
         url('../fonts/crystalnormal.svg#crystalnormal') format('svg');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'FreestyleC';
    src: url('../fonts/freestyle.eot');
    src: url('../fonts/freestyle.eot?#iefix') format('embedded-opentype'),
         url('../fonts/freestyle.woff') format('woff'),
         url('../fonts/freestyle.ttf') format('truetype'),
         url('../fonts/freestyle.svg#freestyle') format('svg');
    font-weight: normal;
    font-style: normal;
}

foo {
    font-family:FreestyleC;
}
bar {
    font-family:Crystal;
} 
```

# python - Python中的夏令时

> ID：12203676
> 
> 赞同：18
> 
> 时间：2012-08-30T18:59:06.790
> 
> 标签：python, datetime, dst, pytz

我正在编写一个程序，它处理很多时区并跨越它们。我处理最多的两件事是从“现在”创建一个日期时间对象，然后本地化一个简单的日期时间对象。

要从现在开始在太平洋时区创建一个日期时间对象，我目前正在这样做（python 2.7.2+）

```
from datetime import datetime
import pytz
la = pytz.timezone("America/Los_Angeles")
now = datetime.now(la) 
```

这对于 DST 是否正确？如果没有，我想我应该这样做：

```
now2 = la.localize(datetime.now()) 
```

我的问题是为什么？谁能告诉我第一个错误而第二个正确的案例？

至于我的秒数问题，假设我在 2012 年 9 月 1 日上午 8:00 在加利福尼亚州洛杉矶的一些用户输入中有一个天真的日期和时间。是这样制作日期时间的正确方法：

```
la.localize(datetime(2012, 9, 1, 8, 0)) 
```

如果没有，我应该如何构建这些日期时间？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-30T20:03:25.140

从[pytz 文档](http://pytz.sourceforge.net/)：

> 处理时间的首选方式是始终以 UTC 工作，仅在生成供人类阅读的输出时转换为本地时间。

所以理想情况下你应该使用`utcnow`而不是`now`.

假设由于某种原因您的双手被束缚并且您需要使用当地时间，如果您在夏令时转换窗口期间尝试本地化当前时间，您仍然会遇到问题。同样的`datetime`情况可能会发生两次，一次是在白天，一次是在标准时间，并且该`localize`方法不知道如何解决冲突，除非您使用`is_dst`参数明确告诉它。

因此要获取当前的 UTC 时间：

```
utc = pytz.timezone('UTC')
now = utc.localize(datetime.datetime.utcnow()) 
```

并将其转换为您的当地时间（但仅在您必须时）：

```
la = pytz.timezone('America/Los_Angeles')
local_time = now.astimezone(la) 
```

[编辑：正如@JF Sebastian](https://stackoverflow.com/users/4279/j-f-sebastian)在评论中指出的那样，您使用的第一个示例`datetime.now(tz)`将适用于所有情况。如上所述，您的第二个示例在秋季过渡期间失败。我仍然主张使用 UTC 而不是本地时间来显示除显示之外的所有内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T19:57:34.040

对于 DST，第一个解决方案是正确的，而第二个解决方案是不好的。

我举个例子。在欧洲，运行此代码时：

```
from datetime import datetime
import pytz # $ pip install pytz

la = pytz.timezone("America/Los_Angeles")
fmt = '%Y-%m-%d %H:%M:%S %Z%z'
now = datetime.now(la)
now2 = la.localize(datetime.now())
now3 = datetime.now()
print(now.strftime(fmt))
print(now2.strftime(fmt))
print(now3.strftime(fmt)) 
```

我得到以下信息：

```
2012-08-30 12:34:06 PDT-0700
2012-08-30 21:34:06 PDT-0700
2012-08-30 21:34:06 
```

`datetime.now(la)`使用 LA 的当前时间以及 LA 的时区信息创建日期时间。

`la.localize(datetime.now())`将时区信息添加到天真的日期时间，但不进行时区转换；它只是假设时间已经在这个时区。

`datetime.now()`使用本地时间创建一个简单的日期时间（没有时区信息）。

只要您在洛杉矶，您就不会看到差异，但是如果您的代码曾经在其他地方运行，它可能不会按照您的意愿行事。

除此之外，如果您需要认真处理时区，最好将所有时间都放在 UTC 中，这样可以省去很多 DST 的麻烦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-12T21:21:22.583

**这有效：**

```
# naive datetime
d = datetime.datetime(2016, 11, 5, 16, 43, 45) 
utc = pytz.UTC # UTC timezone
pst = pytz.timezone('America/Los_Angeles') # LA timezone

# Convert to UTC timezone aware datetime
d = utc.localize(d) 
>>> datetime.datetime(2016, 11, 5, 16, 43, 45, tzinfo=<UTC>)

# show as in LA time zone (not converting here)
d.astimezone(pst) 
>>> datetime.datetime(2016, 11, 5, 9, 43, 45, 
tzinfo=<DstTzInfo 'America/Los_Angeles' PDT-1 day, 17:00:00 DST>)
# we get Pacific Daylight Time: PDT

# add 1 day to UTC date
d = d + datetime.timedelta(days=1) 
>>> datetime.datetime(2016, 11, 6, 16, 43, 45, tzinfo=<UTC>)

d.astimezone(pst) # now cast to LA time zone 
>>> datetime.datetime(2016, 11, 6, 8, 43, 45, 
tzinfo=<DstTzInfo 'America/Los_Angeles' PST-1 day, 16:00:00 STD>) 
# Daylight saving is applied -> we get Pacific Standard Time PST 
```

**这不起作用：**

```
# naive datetime
d = datetime.datetime(2016, 11, 5, 16, 43, 45) 
utc = pytz.UTC # UTC timezone
pst = pytz.timezone('America/Los_Angeles') # LA timezone

# convert to UTC timezone aware datetime
d = utc.localize(d) 
>>> datetime.datetime(2016, 11, 5, 16, 43, 45, tzinfo=<UTC>)

# convert to 'America/Los_Angeles' timezone: DON'T DO THIS
d = d.astimezone(pst) 
>>> datetime.datetime(2016, 11, 5, 9, 43, 45, 
tzinfo=<DstTzInfo 'America/Los_Angeles' PDT-1 day, 17:00:00 DST>) 
# we are in Pacific Daylight Time PDT

# add 1 day to LA local date: DON'T DO THAT
d = d + datetime.timedelta(days=1)
>>> datetime.datetime(2016, 11, 6, 9, 43, 45, 
tzinfo=<DstTzInfo 'America/Los_Angeles' PDT-1 day, 17:00:00 DST>) 
# Daylight Saving is NOT respected, we are still in PDT time, not PST 
```

**结论：**

`datetime.timedelta()` **不**考虑夏令时。

总是在 UTC 时区加/减你的时间。转换为本地时间仅用于输出/显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T19:14:47.130

pytz[网站](http://pytz.sourceforge.net/)说：

> 不幸的是，对于许多时区，使用标准日期时间构造函数的 tzinfo 参数对 pytz “不起作用”。

所以你不应该使用`datetime.now(la)`. 我不知道具体情况，但有些时区运行的规则比我们习惯的更奇特，python 的日期时间代码无法处理它们。通过使用 pytz 的代码，应该正确处理它们，因为这是 pytz 的目的。由于夏令时的跳跃时间，它也可能会出现两次出现的问题。

至于第二个问题，这正是文档显示的内容，所以你应该很好。

# asp-classic - ASP 包括虚拟不更新

> ID：12203679
> 
> 赞同：0
> 
> 时间：2012-08-30T18:59:16.827
> 
> 标签：asp-classic

我正在寻找一个用 ASP 编写的网站。该服务器是使用 Chillisoft 运行 ASP 代码的 Apache 服务器。

我们的内容必须出现在多个位置。为简单起见，我们使用 将`<!-- #include virtual = "/file/location/file.asp" -->`file.asp 的内容包含在当前页面中（我们称之为页面 B）。

当我们更新 file.asp 时，问题就来了。如果我们转到 file.asp 页面，更新后的内容看起来很好。但是，如果我们转到页面 B，file.asp 上出现的新更新内容不会出现，除非我们进入页面 B.asp 文件，在代码中添加一行并保存，然后出现 file.asp 中的新内容在 B 页。

我熟悉 PHP 中的包含，以前从未见过这种行为，但这是我第一次使用 ASP。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:31:05.517

Chillisoft 是否在服务器端缓存页面？

# php - 使用类函数参数作为 xpath 的路径似乎不起作用？

> ID：12203683
> 
> 赞同：0
> 
> 时间：2012-08-30T18:59:38.670
> 
> 标签：php, xml, xpath, simplexml

这是 XML：

```
<Routes>
    <Route type="source">
        <Name>incoming</Name>
    <Table><Tablename>incoming</Tablename></Table>
    </Route>
    <Route type="dest">
        <Name>outgoing</Name>
    </Route>
</Routes> 
```

我的目标是尝试从 Route/Table/Tablename 输出“传入”，但使用具有函数的类。

```
$doc = new SimpleXMLElement('routingConfig.xml', null, true);

class traverseXML
    {
    function getData($path = "Route", $type, $operation){
        global $doc;

        if($type == "table"){
            $path = $path."[1]/Table/Tablename";
            }

        if($operation == "value"){
            return $doc->xpath($path);
            }

        }   

        }
$traverseXML = new traverseXML; 
```

我原以为这会返回一个值，但它会返回一个数组：

```
echo $traverseXML->getData("Route", "table", "value");  
//returns: Array 
```

如果我这样做：

```
print_r($traverseXML->getData("Route", "table", "value"));
//returns: Array ( ) 
```

为什么它返回一个数组而不是一个值？

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:19:50.027

[`SimpleXMLElement::xpath()`](http://php.net/simplexmlelement.xpath)返回一个数组，其中包含找到的项目（即使只有一个）。如果您不需要数组，请更改您的函数以查看从 XPath 查询返回的结果并返回您需要的任何内容。

例如，

```
 if ($operation == "value") {
        $results = $doc->xpath($path);

        if (empty($results)) {
            return NULL;
        }

        return (string) $results[0];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:04:44.240

因为 XPath 返回一个节点集 - 即与表达式匹配的所有节点的列表。在这种特定情况下，只有一个匹配节点，但由于 XPath 原则上返回一个列表，我假设它在 PHP 中映射到一个数组中。

尝试使用 XPath

```
string(Route[1]/Table/Tablename) 
```

它使用 XPath 标准函数`string()`将节点集转换为单个字符串——这应该给你一个值。

# html - css 菜单抖动

> ID：12203685
> 
> 赞同：1
> 
> 时间：2012-08-30T18:59:41.340
> 
> 标签：html, css, styles

HTML：

```
<div style="padding-bottom:3px;background:transparent; color:white!important; float:left; margin-right:20px; line-height:42px;">
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline">HROnline</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px; " href="http://hronline/ec">Employee Center</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px; " href="http://hronline/businesscommunities">Business Communities</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline/internalservices">Internal Services</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline/policiesprocedures">Policies&procedures</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline/qualitybestpractices">Best Practices</a>
    </span>
</div> 
```

CSS：

```
.hardlink {
    color: #FFF !important;
}      
.hardlink:hover{
    background:url("/_layouts/images/bgximg.png") repeat-x -0px -489px; 
    background-color:#21374c; 
    border:1px solid #5badff;
    display:inline-block; 
    line-height:20px;
} 
```

是什么导致悬停在每个链接上的整个 div 生涩行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:07:34.817

您正在添加一个`border`on `:hover`。要解决此问题 - 只需在正常状态下添加透明边框即可 [**DEMO**](http://jsfiddle.net/mbeQk/)

```
.hardlink {
    color: #fff !important;
    border: 1px solid transparent;
} 
```

# c - 如何在C中翻转和反转一个int？

> ID：12203688
> 
> 赞同：4
> 
> 时间：2012-08-30T18:59:57.013
> 
> 标签：c, bit-manipulation

例如：

输入：01011111

输出：00000101

我知道我可以`~`用来翻转一个数字，但我不知道扭转它的好方法。而且我不确定它们是否可以一起完成。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T19:01:50.603

对于这类事情，我建议您访问精彩的[bit twiddling hacks](http://graphics.stanford.edu/%7Eseander/bithacks.html#ReverseByteWith64BitsDiv)网页。这是该页面的解决方案之一：

> **使用 3 次操作（64 位乘法和模除法）反转字节中的位：**
> 
> ```
> unsigned char b; // reverse this (8-bit) byte
> 
> b = (b * 0x0202020202ULL & 0x010884422010ULL) % 1023; 
> ```
> 
> 乘法运算创建 8 位字节模式的五个单独副本，以扇出为 64 位值。AND 操作选择相对于每个 10 位位组位于正确（反转）位置的位。乘法和 AND 操作从原始字节复制位，因此它们每个都只出现在 10 位集合中的一个中。来自原始字节的位的反转位置与它们在任何 10 位集合中的相对位置一致。最后一步，涉及模数除以 2^10 - 1，具有将 64 位中的每组 10 位（从位置 0-9、10-19、20-29，...）合并在一起的效果价值。它们不重叠，因此模除法基础上的加法步骤的行为类似于 or 操作。
> 
> 这种方法归功于[Beeler, M., Gosper, RW 和 Schroeppel, R. HAKMEM 的 Programming Hacks 部分的 Rich Schroeppel。麻省理工学院 AI 备忘录 239，1972 年 2 月 29 日。](http://www.inwap.com/pdp10/hbaker/hakmem/hakmem.html)

这是一个不使用 64 位整数的[不同解决方案：](http://graphics.stanford.edu/%7Eseander/bithacks.html#ReverseByteWith32Bits)

> **使用 7 次操作（非 64 位）反转字节中的位**：
> 
> b = ((b * 0x0802LU & 0x22110LU) | (b * 0x8020LU & 0x88440LU)) * 0x10101LU >> 16;
> 
> 确保将结果分配或强制转换为 unsigned char 以删除高位中的垃圾。由 Sean Anderson 于 2001 年 7 月 13 日设计。Mike Keith 于 2002 年 1 月 3 日发现并更正了错字。

# c++ - MySQL C++ 连接器：获取 insert_id

> ID：12203691
> 
> 赞同：3
> 
> 时间：2012-08-30T19:00:07.343
> 
> 标签：c++, mysql

我正在使用 mysql 连接器 C++。我的表中有一个 auto_increament 列，我想在执行插入操作时获取插入 ID。有人知道如何得到它吗？谢谢。

我的代码是这样的：

```
conn->setAutoCommit(0);
pstmt.reset(conn->prepareStatement(insertStr.c_str()));

int updateCount = pstmt->executeUpdate();
conn->commit(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:13:27.260

如果您使用的库的 API 没有提供检索 last_insert_id 的方法（这似乎是 C++ 连接器的情况），您可以随时进行查询

> 选择 LAST_INSERT_ID();

它为您提供“作为最近执行的 INSERT 语句的结果，成功插入 AUTO_INCREMENT 列的第一个自动生成值的值”。[有关 MySQL 文档的说明，请参见此处](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/information-functions.html#function_last-insert-id)

更新：

我从一个用户那里找到[了这篇文章](http://forums.mysql.com/read.php?167,294960,295250#msg-295250)，他说如果你不在你的字段上使用 auto_increment 你可以使用

> 选择*@@identity*作为 id；

# google-chrome - 如何将 Google Chrome 中的当前页面发送到 Firefox？

> ID：12203699
> 
> 赞同：0
> 
> 时间：2012-08-30T19:00:32.493
> 
> 标签：google-chrome

在 Firefox 中，我使用了一个名为“打开方式”的插件，它在 Firefox 的工具栏中添加了 Chrome 和 Safari 图标。如果我想在其中一个浏览器中打开 Firefox 中的当前网页，我只需单击该按钮，该页面就会在所选浏览器的新选项卡中打开。

我想要类似的功能，但在 Google Chrome 中，能够将当前页面发送到其他浏览器，主要是 Firefox。

有谁知道方法或扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:19:03.110

在左侧 Chrome 的 URL 框中是一个图标，一张纸。将图标拖到 firefox 窗口并将其放下。反过来也有效。

如果 Firefox 窗口被隐藏或在 Chrome 下方，则将图标拖到任务栏并在 Firefox 图标上方，按住它一秒钟，Firefox 窗口将被带到前面。然后将图标拖放到 Firefox 中。

我还没有找到任何扩展。

# c++ - C++ 标准是否涵盖了 array[i] = i++？

> ID：12203704
> 
> 赞同：6
> 
> 时间：2012-08-30T19:00:52.790
> 
> 标签：c++, standards

我有人声称这条线不在 C++ 标准中：

```
int i(1);
array_of_int[i] = i++; 
```

该人说它会分配`1`，但我们不知道它是否会在，`array_of_int[1]`或者`array_of_int[2]`尽管 Visual Studio 和大多数编译器会在`array_of_int[1]`.

他是对的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:04:14.727

这是未定义的行为。从字面上看，任何行为都是合法的。

禁止该行代码的段落是这样的：

> 在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。此外，应仅读取先验值以确定要存储的值

`a[i]`和之间没有序列点`i++`，读取到`i`in`a[i]`的目的不是为了确定`i`by存储的值是什么`i++`。

# web-services - RESTful 搜索。返回实际资源或 URI？

> ID：12203705
> 
> 赞同：0
> 
> 时间：2012-08-30T19:00:57.720
> 
> 标签：web-services, api, rest, search, hateoas

对所有这些 REST 东西来说都是全新的。

我正在设计我的 API，但不确定我应该从搜索查询中返回什么。我假设我只会返回与查询完全匹配的所有对象，但是在阅读了一些关于[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)的信息后，我想我应该返回一个 URI 列表吗？

我可以看到这可能有助于缓存项目，但我担心后续多个 HTTP 请求会产生大量开销以获取实际对象信息。

我是不是误会了？是否可以接受返回对象实例或 URI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:15:49.783

我将返回一个资源列表，其中包含指向这些资源的更多详细信息的链接。

来自 RESTFull Web Services Cookbook 2010 - Subbu Allamaraju

> 将查询的响应设计为集合资源的表示。设置适当的过期缓存标头。如果查询不匹配任何资源，则返回一个空集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:14:32.007

恕我直言，重要的是要始终记住“纯 REST”和“现实世界 REST”是两个完全不同的野兽。

首先，您如何从查询中返回 URI 列表？如果你返回 eg `application/json`，这肯定不会告诉客户端它应该如何解释内容*；*因此，交互已经由与 HATEOAS 冲突的带外信息驱动（客户端神奇地已经知道在哪里寻找它需要的数据）。

所以，回答你的问题：我发现返回对象实例而不是 URI 是完全可以接受的——但要小心，因为在一般情况下，这意味着你正在生成所有这些数据，而不知道客户端是否会使用它。这就是为什么您会经常看到混合方法的原因：对象实例不是完整的对象（即服务器拥有的部分信息没有返回），但它们确实包含一个唯一标识符，允许客户端获取完整的表示选择的对象，如果它选择这样做。

# javascript - 可以检测到“显示不安全内容”浏览器提示吗？

> ID：12203711
> 
> 赞同：4
> 
> 时间：2012-08-30T19:01:39.570
> 
> 标签：javascript, security, ssl, web

我们都熟悉页面上混合方案（http / https）内容的问题。

![在此处输入图像描述](../Images/49d1ef66773748f88b4e5e2347b2dd49.png)

我正在一个不可避免的网站上工作。我**不想阻止这一点**。我知道有很多问题/答案。

我需要的只是**检测**这一点（通过 JavaScript？），这样我就可以调整页面行为（显示降级行为的通知或其他内容）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:04:55.107

使用 jQuery，您可以使用以下代码找出页面上是否存在任何不安全的项目：

```
var flag = false;
if($("script[src^='http:']").length > 0
    || $("link[type='text/css'][href^='http:']").length > 0
    || $("img[src^='http:']").length > 0
    || $("iframe[src^=http:]").length > 0)
    flag = true; // insecure content :(
else
    // yay! 
```

图片、JS、CSS 都是我能想到的不安全内容。也许还有更多，但您可以轻松地将它们添加到您发现的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T23:09:38.267

这很 hacky，但我设法在所有浏览器中仅使用 JavaScript 解决了这个问题。让我看看我能不能把它画出来。

我们有这个基本的加密页面：

```
<html> 
   <body>
        <div> stuff </div>
        <iframe src="URL_WHICH_IS_MAYBE_INSECURE"></iframe>
   </body>
</html> 
```

什么时候`URL_WHICH_IS_MAYBE_INSECURE`是https，一切都很好。但是当`URL_WHICH_IS_MAYBE_INSECURE`是http时，IE**不会**加载内容，除非用户OK的不安全/混合内容。我想告诉用户该页面有点被破坏，直到他们点击允许。由于我无法进入的原因，我知道所有网站都是值得信赖的。只是其中一些不支持 SSL，而父站点需要。

AFAIK，我无法使用 JS 检测到此对话框/半加载状态。但是我能做的是在不安全的连接上运行 JS，如果他们允许的话（这也使 iframe 运行）。因此，**只有**当`URL_WHICH_IS_MAYBE_INSECURE`http 和站点是 https（混合）时，我才添加两位代码 + HTML。

```
<html> 
   <body>
        <div> stuff </div>
        @if(needSpecialHandlingForMixedMode) {
            <div id="secureWarn">
                 WARNING: This page has limited functionality, allow mixed content
             </div>
        }
        <iframe src="URL_WHICH_IS_MAYBE_INSECURE"></iframe>
   </body>

   @if (needSpecialHandlingForMixedMode)
   {
      string baseUrl = Request.Url.SchemeAndHostAndPort().Replace("https", "http");
      <script src="@baseUrl/scripts/security-warning.js"></script>
   }
</html> 
```

脚本是

```
$(document).ready(function(e) {
    $("#secureWarn").remove();
}); 
```

所以它是这样工作的。

1.  如果是混合模式，则 iframe 和脚本只有在用户允许的情况下才会加载。这在 IE 中默认是不允许的，在 Chrome 和 FireFox 中默认是允许的。
2.  如果他们什么都不做（例如，在 IE 中不允许），它将保持警告 div 可见。
3.  如果他们确实单击它，则 iframe 会加载，并且现在脚本也会运行（因为它不安全地返回到我的服务器），这会从页面中删除警告。
4.  幸福开始...

希望这可以帮助某人。

干杯，迈克尔

# javascript - 在新的 magento 商店中，添加到购物车和查看功能可在 localhost 上运行，但不能远程运行

> ID：12203721
> 
> 赞同：0
> 
> 时间：2012-08-30T19:02:15.317
> 
> 标签：javascript, magento, webserver, localhost, remote-server

在我的本地机器上完成 Magento Community Edition (v. 1.7.0.2) 的全新安装并使用 Magento 提供的示例数据加载后，我可以按预期浏览评论、将商品添加到购物车等。

但是，当我在实时服务器上执行相同的步骤时，JS 功能不起作用，无论是在 Chrome 还是在 Firefox 中（我还没有尝试过其他浏览器）。例如，单击产品页面上的“添加到购物车”只会给我一个控制台错误（“未捕获的 ReferenceError：productAddToCartForm 未定义”）。

是什么导致了这种行为，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T08:29:51.633

我不确定这是否会帮助你，但它解决了我的问题。我所做的是将 view.phtml 中的 javascript 段从“add-to-cart-wrapper”类下移到它上面。

像这样：

```
 <script type="text/javascript">
        //<![CDATA[
            var productAddToCartForm = new VarienForm('product_addtocart_form');
            productAddToCartForm.submit = function(button, url) {
                if (this.validator.validate()) {
                    var form = this.form;
                    var oldUrl = form.action;

                    if (url) {
                       form.action = url;
                    }
                    var e = null;
                    try {
                        this.form.submit();
                    } catch (e) {
                    }
                    this.form.action = oldUrl;
                    if (e) {
                        throw e;
                    }

                    if (button && button != 'undefined') {
                        button.disabled = true;
                    }
                }
            }.bind(productAddToCartForm);

            productAddToCartForm.submitLight = function(button, url){
                if(this.validator) {
                    var nv = Validation.methods;
                    delete Validation.methods['required-entry'];
                    delete Validation.methods['validate-one-required'];
                    delete Validation.methods['validate-one-required-by-name'];
                    // Remove custom datetime validators
                    for (var methodName in Validation.methods) {
                        if (methodName.match(/^validate-datetime-.*/i)) {
                            delete Validation.methods[methodName];
                        }
                    }

                    if (this.validator.validate()) {
                        if (url) {
                            this.form.action = url;
                        }
                        this.form.submit();
                    }
                    Object.extend(Validation.methods, nv);
                }
            }.bind(productAddToCartForm);
        //]]>
        </script>
        <div class="add-to-cart-wrapper">
            <?php echo $this->getChildHtml('product_type_data') ?>
            <?php echo $this->getChildHtml('extrahint') ?>

            <?php if (!$this->hasOptions()):?>
                <div class="add-to-box">
                    <?php if($_product->isSaleable()): ?>
                        <?php echo $this->getChildHtml('addtocart') ?>
                        <?php if( $this->helper('wishlist')->isAllow() || $_compareUrl=$this->helper('catalog/product_compare')->getAddUrl($_product)): ?>
                            <span class="or"><?php echo $this->__('OR') ?></span>
                        <?php endif; ?>
                    <?php endif; ?>
                    <?php echo $this->getChildHtml('addto') ?>
                    <?php echo $this->getChildHtml('sharing') ?>
                </div>
                <?php echo $this->getChildHtml('extra_buttons') ?>
            <?php elseif (!$_product->isSaleable()): ?>
                <div class="add-to-box">
                    <?php echo $this->getChildHtml('addto') ?>
                    <?php echo $this->getChildHtml('sharing') ?>
                </div>
            <?php endif; ?>
        </div> 
```

代替：

```
<div class="add-to-cart-wrapper">
            <?php echo $this->getChildHtml('product_type_data') ?>
            <?php echo $this->getChildHtml('extrahint') ?>

            <?php if (!$this->hasOptions()):?>
                <div class="add-to-box">
                    <?php if($_product->isSaleable()): ?>
                        <?php echo $this->getChildHtml('addtocart') ?>
                        <?php if( $this->helper('wishlist')->isAllow() || $_compareUrl=$this->helper('catalog/product_compare')->getAddUrl($_product)): ?>
                            <span class="or"><?php echo $this->__('OR') ?></span>
                        <?php endif; ?>
                    <?php endif; ?>
                    <?php echo $this->getChildHtml('addto') ?>
                    <?php echo $this->getChildHtml('sharing') ?>
                </div>
                <?php echo $this->getChildHtml('extra_buttons') ?>
            <?php elseif (!$_product->isSaleable()): ?>
                <div class="add-to-box">
                    <?php echo $this->getChildHtml('addto') ?>
                    <?php echo $this->getChildHtml('sharing') ?>
                </div>
            <?php endif; ?>
        </div>

        <?php echo $this->getChildHtml('related_products') ?>

        <div class="clearer"></div>
        <?php if ($_product->isSaleable() && $this->hasOptions()):?>
            <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
        <?php endif;?>
    </form>
    <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                // Remove custom datetime validators
                for (var methodName in Validation.methods) {
                    if (methodName.match(/^validate-datetime-.*/i)) {
                        delete Validation.methods[methodName];
                    }
                }

                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>
</div> 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:00:06.320

一位同事解决了这个问题。有两个问题导致 magento 在实时服务器上失败：

*   缺少 Magento 没有抱怨的 PHP（dom 和 gm）依赖项。
*   PHP 中的低内存限制。我们需要增加 /etc/php.ini 中的 memory_limit 设置（512M 为我们工作）。

# c# - 捕捉 HttpException 的好主意？

> ID：12203741
> 
> 赞同：4
> 
> 时间：2012-08-30T19:03:53.843
> 
> 标签：c#, asp.net, .net, exception, httpexception

我的 output.aspx 页面有时会出现以下错误：

> 异常详细信息：System.Web.HttpException：请求超时。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [HttpException (0x80004005): 请求超时。]

捕捉这个异常是个好主意吗？我在哪里做，因为我的 output.aspx.cs 有一个 Page_Load 并且该函数调用 RunTable()。我应该在该功能内容周围放置一个 try catch 块吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:05:44.613

在应用程序级别捕获异常

```
 void Application_Error(object sender, EventArgs e)
{
  // Code that runs when an unhandled error occurs

  // Get the exception object.
  Exception exc = Server.GetLastError();

  // Handle HTTP errors
  if (exc.GetType() == typeof(HttpException))
  {
    // The Complete Error Handling Example generates
    // some errors using URLs with "NoCatch" in them;
    // ignore these here to simulate what would happen
    // if a global.asax handler were not implemented.
      if (exc.Message.Contains("NoCatch") || exc.Message.Contains("maxUrlLength"))
      return;

    //Redirect HTTP errors to HttpError page
    Server.Transfer("HttpErrorPage.aspx");
  }

  // For other kinds of errors give the user some information
  // but stay on the default page
  Response.Write("<h2>Global Page Error</h2>\n");
  Response.Write(
      "<p>" + exc.Message + "</p>\n");
  Response.Write("Return to the <a href='Default.aspx'>" +
      "Default Page</a>\n");

  // Log the exception and notify system operators
  ExceptionUtility.LogException(exc, "DefaultPage");
  ExceptionUtility.NotifySystemOps(exc);

  // Clear the error from the server
  Server.ClearError();
} 
```

# r - 如何使用字符向量对象调用矩阵中的列子集

> ID：12203743
> 
> 赞同：1
> 
> 时间：2012-08-30T19:04:08.133
> 
> 标签：r, matrix, subset

我有一个包含列名和行名的数据矩阵，如下所示：

```
 Col1  Col2  Col3 ...
Row1 0.1   0.2   0.4  ...
Row2 1.8   13.1  0.2  ...
Row3 8.0   9.2   9.1  ...
...  ...   ...   ... 
```

我有一个包含多个列标题子集列表的对象，例如：

```
$list1
 [1] "Col1"       "Col2"      "Col13"     "Col56"     "Col267"    "Col300"
 [7] "Col301"     

$list2
 [1] "Col4"       "Col6"      "Col7"      "Col54"     "Col199"     "Col203"

... 
```

我想抓取原始矩阵的一个子集，其中只有每个列表中的列。如果我明确指定列标题，似乎我可以做到，例如：

```
example.matrix[,c("Col4","Col6","Col7","Col54","Col199","Col203")] 
```

但是，如果我创建一个与该字符向量匹配的数据对象，它就不起作用：

```
test <- as.character(example.col_list[1])
          #^this prints to terminal as 
          #"c("Col4","Col6","Col7","Col54","Col199","Col203")" 
example.matrix[,test] 
```

这给出了一个`Error: subscript out of bounds`. 在玩弄了这个变化之后，使用子集函数，试图找到列的索引（使用 which 和 match 函数），似乎没有任何效果。这一切似乎都取决于无法像我认为的那样解释每个列名列表。我知道我可能遗漏了一些简单的东西，但经过长时间的努力，很难在 SO 或 Google 搜索上找到答案，有什么想法吗？

如果有帮助，我这样做是为了为每个列子集制作一个数字，并且有大约 10k 个子集，因此手动解决方法是不可行的。我需要以某种方式嵌套这是一个循环或函数内。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:10:05.740

您不想构建一个 R 调用，该调用将作为字符串放入“[”中，然后需要对其进行解析和评估。您想要放置一个本身就是字符向量的对象。试试这个：

```
test <- example.col_list[[1]]  # note "[[" instead of "["

example.matrix[ , test] 
```

# codeigniter - 本地主机和 fopen

> ID：12203746
> 
> 赞同：0
> 
> 时间：2012-08-30T19:04:18.837
> 
> 标签：codeigniter, mamp, fopen

我们现在在本地环境中工作，而不是现场工作，这是一件好事。但是，我遇到了一个不知道如何解决的问题。我的代码（CodeIgniter）如下所示：

```
if (!is_dir(base_url() . 'channel-partners/html/camera-registration/' . $name_url)) {
        mkdir(base_url() . 'channel-partners/html/camera-registration/' . $name_url);
}

$handle = fopen('/path/to/file/channel-partners/html/camera-registration/' . $name_url . '/index.html', 'w') or die('Can\'t open file');
fwrite($handle, $html);
fclose($handle); 
```

但由于我正在运行 MAMP，`$_SERVER['DOCUMENT_ROOT']`等于 Applications/MAMP/htdocs，所以这不起作用。那么我该怎么做才能用 PHP 编写一个可以在生产环境和本地环境中工作的文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:47:07.427

使用`FCPATH`或`APPPATH`常量。

`FCPATH`将为您提供前端控制器所在目录的路径（index.php）。

`APPPATH`将为您提供应用程序目录的路径。

用法：

```
fopen(FCPATH . 'path/relative/to/frontcontroller/etc/' . $name_url . '/index.html', 'w') ... 
```

# c++ - 在这里返回临时地址是未定义的行为吗？

> ID：12203754
> 
> 赞同：2
> 
> 时间：2012-08-30T19:05:08.767
> 
> 标签：c++, memory-management, undefined-behavior

这是 c++ 中未定义的行为吗？

```
#include <iostream>

const double& abs(const double& x){
    return x>0 ? x:-x;
}

int main () {

    double x = -10.0;
    double y = abs(x);

    std::cout << y << std::endl;

    return 0;
} 
```

`g++`不喜欢：

```
mem.cpp: In function ‘const double& abs(const double&)’:
mem.cpp:4: warning: returning reference to temporary 
```

valgrind 会产生各种错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:09:45.410

是的。三元运算符的结果是暂时的，一旦您从函数返回，它将不复存在。

# c++ - 我们在 C++ 中有没有悬空对象的概念

> ID：12203758
> 
> 赞同：2
> 
> 时间：2012-08-30T19:05:31.177
> 
> 标签：c++, new-operator, free

我只是在想当我们在 C++ 中使用`free()`with时会发生什么。`new`

如果我们使用`free()`with`new`那么内存可以被释放。它只是不会调用析构函数。留下类似于悬空指针的行为。

我知道上面我们不应该使用`free()`with ，`new`因为它可能会破坏堆。

但我也想从概念上可视化行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T19:07:29.673

`free`在分配的内存上使用`new`是未定义的行为。不能保证`new`返回从`malloc`. （事实上​​，`new[]`通常不会。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:07:39.667

你根本不应该混合这些。`new`并且按原样`delete`配对。`malloc``free`

请记住，`new`应用程序可以完全重新定义的行为，并且可以使用与堆完全无关的分配策略。正因为如此，你不能依靠 .`free`生成的指针来做任何事情`new`。他们是两个不同的世界。

# android - 如何从 Android 中的 AsyncTask 刷新 Activity

> ID：12203762
> 
> 赞同：1
> 
> 时间：2012-08-30T19:05:33.037
> 
> 标签：android, json, android-activity, android-alertdialog

在我的程序中，我从 json URL 中检索值，然后在 listView 中显示它们。现在我想从列表中删除一些项目，所以当我单击一个项目时，删除 API 在 AsyncTask 的 doInBackground() 中调用。现在完成 AsyncTask 后，我想重新加载列表，以便可以看到更改。

我怎样才能重新加载列表以查看更改..

我的 AsyncTask 是一个单独的类。

这是我的 AsyncTask 代码：

```
protected String doInBackground(String... DATA) {
    // TODO Auto-generated method stub
    rqst_type = DATA[0];
    if(rqst_type.equals("del_top5"))
    {
        String url = DATA[1];
        JsonParser jParser = new JsonParser();
        JSONObject json = jParser.getJSONfromUrl(url+memberId);
        Log.v(TAG_LOG, "del url: "+url+memberId);
        try
        {
            message = json.getString(TAG_DELSCS);
            Log.v(TAG_LOG, "msg "+TAG_DELSCS);
        }
        catch(JSONException e)
        {
            Log.v(TAG_LOG, String.valueOf(e));
        }
    }
    return null;
}

protected void onPostExecute(String result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);
    if(rqst_type.equals("del_top5"))
    {
        if(message.equals("true"))
        {
            AlertDialog alertDialog = new AlertDialog.Builder(context).create();
            alertDialog.setTitle("Course Deleted");
            alertDialog.setMessage("Course Sucessfully Deleted");
            alertDialog.setIcon(R.drawable.tick);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {

                }
            });
            alertDialog.show();
        }
        else if(message.equals("false"))
        {
            AlertDialog alertDialog = new AlertDialog.Builder(context).create();
            alertDialog.setTitle("Error");
            alertDialog.setMessage("Course Not Deleted");
            alertDialog.setIcon(R.drawable.alert);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {

                }
            });
            alertDialog.show();
        }
        else
        {
            AlertDialog alertDialog = new AlertDialog.Builder(context).create();
            alertDialog.setTitle("Error");
            alertDialog.setMessage("Unknown Erroe Occured");
            alertDialog.setIcon(R.drawable.alert);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {

                }
            });
            alertDialog.show();
        }
    }
    progress.dismiss();
} 
```

我的 Activity 的名称是`MyTop5.class`我想在单击 AlertDialog 的 OK 按钮时重新加载..

这是我的 ListAdapter 的代码：

```
ListAdapter adapter = new SimpleAdapter(this, LoadingScreen.top5List, R.layout.top5_list,
            new String[] { TAG_GLFCRSNAME, TAG_GLFCRSID, TAG_CRTDATE, TAG_FCLTY, TAG_HOLES },
            new int[] { R.id.top_golfname, R.id.top_courseid, R.id.top_createdate, R.id.top_fclty, R.id.top_holes });
setListAdapter(adapter); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:09:10.680

我通常将 Activity 作为参数传递给 AsyncTask，并在工作完成后使用它来调用 Activity 的公共方法。例如，它可以通过构造函数传入。然后我将在列表上执行所需的更改，然后如果您将适配器用作 ListView，您必须记住在适配器上调用 notifyDataSetChanged()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:11:24.893

你可以试试这个

```
adapter.notifyDataSetChanged(); 
```

让观察者调用适配器。

# joomla - Joomla!：如何将自定义字段添加到类别？

> ID：12203763
> 
> 赞同：1
> 
> 时间：2012-08-30T19:05:34.660
> 
> 标签：joomla, customization, joomla2.5, custom-fields

我想创建文章类别的图片菜单，但我不知道如何将图像字段添加到类别。

我需要的是：

*   类别的自定义文件字段
*   处理能力（更改大小，添加一些文本等...）
*   轻松查看显示
*   用类别删除它

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:52:30.030

标准类别编辑表单中已经有一个图像字段。查看选项滑块。

# azure - 组合的 Azure Web 角色和辅助角色项目在部署时看不到 app.config

> ID：12203765
> 
> 赞同：6
> 
> 时间：2012-08-30T19:06:00.277
> 
> 标签：azure, app-config

我正在实现组合的 web/worker 角色场景，如此处所述[，](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2010/12/how-to-combine-worker-and-web-role-in.html)您只需将以下内容添加到您的 worker 角色中：

```
public override void Run()
{
    // This is a sample worker implementation. Replace with your logic.
    Trace.WriteLine("WorkerRole1 entry point called", "Information");
    while (true)
    {
        Thread.Sleep(10000);
        Trace.WriteLine("Working", "Information");
    }
} 
```

如帖子评论中所述，问题在于该工作进程无法读取 web.config，因此您必须添加 app.config。还需要注意的是 app.config 不会自动部署。

所以我的问题是**如何配置我的项目以便部署 app.config？**

我已将 app.config 添加到我的项目中，将构建操作设置为“内容”和“始终复制”

这在模拟器中运行良好，但在部署到 Azure 时就不行了。

注意：我注意到在模拟器中创建了 projectname.dll.config，但在部署到 Azure 时没有。我正在使用 VS2010、Windows Azure 工具 2011

我知道有些人会建议改用 .cscfg 文件，但我的许多组件都从 web.config/app.config 获取它们的设置：Elmah、瞬态故障处理客户端、诊断、电子邮件等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:28:09.600

请仔细阅读[这篇博文](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)。它详细解释了带有完整 IIS 的 Windows Azure Web 角色中发生的事情。

您需要做的是添加一个**WaIISHost.exe.config**文件（复制到输出 = 始终复制）。并将您需要的所有配置放入该文件中。这是因为，您的代码 (RoleEntryPoint) 位于 WaIISHost.exe 进程中，而不是您的 pdojectName.dll 进程中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T20:33:54.040

对于使用 Azure SDK 1.8 并使用发布从 Visual Studio 部署 Web Worker 角色的我来说，我必须包含一个名为 . ProjectName.Dll.config 与我的设置。在 Windows azure 中运行时，Web 角色不会获取 app.config 中的配置。并且app.config文件并没有转换成ProjectName.Dll.config并自动添加到部署包的bin文件夹中，所以你必须手动创建它并设置它总是复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T16:09:11.333

我正在使用 Azure SDK 2.0 和 OS Family 3，对此我感到非常困惑。因此，我创建了一个 MVC 4.0 网站，其中包含各种答案中建议的所有 4 个配置文件。那是：

*   网页配置
*   应用程序配置
*   WaIISHost.exe.config
*   [程序集名称].dll.config

除了 Web.config 之外的所有内容都设置为“如果较新则复制”。

在我写的配置文件中：

```
 <appSettings>
    <add key="AppSettingFile" value="[NameOfConfigFile]"/>
  </appSettings> 
```

在 WebRole.cs 我有以下代码：

```
 public class WebRole : RoleEntryPoint
    {
        public override void Run()
        {
            string appSetting = ConfigurationManager.AppSettings["AppSettingFile"] ?? "No config file found";
            Trace.TraceInformation("Config file: " + appSetting);

            while (true)
            {
                ...
            }
        }
    } 
```

使用 4 个 .config 文件部署时的结果： **"Config file: App.config"**。所以 App.config 一定是答案，对吧？

错误的！仅使用 Web.config 和 App.config 部署时的结果： **"Config file: No config file found"**。嗯很奇怪。

使用 Web.config、App.config 和 [AssemblyName].dll.config 部署时的结果： **"Config file: [AssemblyName].dll.config"**。所以 [AssemblyName].dll.config 一定是答案，对吧？

错误的！仅使用 Web.config 和 [AssemblyName].dll.config 部署时的结果： **"Config file: No config file found"**。哇！

仅使用 Web.config 和 WaIISHost.exe.config 部署时的结果： **"Config file: No config file found"**。

使用 Web.config、App.config 和 WaIISHost.exe.config 部署时的结果： **"Config file: No config file found"**。哇！

所以我的结论是你需要有 3 或 4 个配置文件才能配置 Web 项目的 Worker 角色。

这显然是一个错误。就我个人而言，我认为 MS 的意图是从 WaIISHost.exe.config 更改为 App.config（通常与 Worker Roles 和 .NET 保持一致）。但 App.config 仅在所有 4 个 .config 文件都存在时使用。

***所以现在我有 Web.config 以及 App.config 和 [AssemblyName].dll.config，它们包含完全相同的内容。***

希望随着 Azure SDK 2.x 的发展，我们只能使用 App.config 和 Web.config。

# jquery - jQuery、Chrome 和“选定”属性异常

> ID：12203767
> 
> 赞同：4
> 
> 时间：2012-08-30T19:06:06.953
> 
> 标签：jquery, google-chrome

我在 Chrome 中遇到了一个问题，我不知道这是 Chrome 的错误、jQuery 的错误还是我的代码中的错误。我搜索了 Chromium 的未解决问题，但找不到任何东西，同样使用 jQuery。我在这里创建了一个 JSFiddle（并将包括下面的代码以供后代使用）：http: [//jsfiddle.net/trmackenzie/cvPhd/4/](http://jsfiddle.net/trmackenzie/cvPhd/4/)

预期：当我单击单选按钮时，会在选项列表中选择指示的值。此外，如果我单击列表中的特定选项，则会取消选择所有单选按钮。

实际（在适用于 Windows 和 Mac 的 Chrome 21 中）：第一次单击单选按钮时仅选择最后一个所需选项，然后后续单击不会导致任何事情发生。如果选择列表中的特定选项，则单选按钮保持选中状态。

实际（在 IE7、8、9 和 Firefox 中）：与预期行为相同，例如正确行为。

请注意，选项上的“选定”属性设置正确，但 Chrome 停止显示其状态。

以下是 jsFiddle 中也可用的代码：

```
<!DOCTYPE HTML>
<html>
<head><title>Testing</title></head>
<body>
    <select size="10" name="testList" multiple="multiple" id="testList_box" style="width:250px; float:left; margin-right:20px;">
        <option value="1">First</option>
        <option value="2">Second</option>
        <option value="3">Third</option>
        <option value="4">Fourth</option>
        <option value="5">Fifth</option>
    </select>
    <span id="columnSpecList">
        <input type="radio" id="input1" name="spec" value="1" />
            <label for="input1">Testing</label>
        <input type="radio" id="input2" name="spec" value="1,2" />
            <label for="input2">Testing</label>
        <input type="radio" id="input3" name="spec" value="1,2,3" />
            <label for="input3">Testing</label>
    </span>
</body>
</html>​ 
```

jQuery：

```
$(document).ready(function () {
var columnList = $('#testList_box');
var columnSpecList = $('#columnSpecList');
var columnSpecOptions = $('input', columnSpecList);

    $(columnSpecOptions).click(function () {
        var optionsToSelect = $(this).val().split(',');

        // clear the list
        $(':selected', columnList).removeProp('selected');

        // select desired columns
        $(optionsToSelect).each(function (index, value) {
            $('[value=' + value + ']', columnList).prop('selected', 'true');
        });
    });

    $(columnList).on(
        {
            click: deselectSpec,
            change: deselectSpec
        }
    );

    // simulate "click" of the selected option to load the initial values
    var itemToClick = $(":checked", columnSpecList);
    $(itemToClick).click();

    function deselectSpec() {
        $(columnSpecOptions).removeProp('checked');
    }
});​ 
```

我是否遇到过错误，或者（更有可能）我在某个地方的实现中遗漏了一些微妙之处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T19:14:16.603

不要使用 .removeProp()！！除非您打算不再使用该物业。使用布尔值将它们设置为 ex

```
.prop('checked',true or false) 
```

来自 jQuery 文档[.removeProp](http://api.jquery.com/removeProp/)

> 注意：请勿使用此方法删除本机属性，例如选中、禁用或选中。这将完全删除该属性，并且一旦删除，就不能再次将其添加到元素中。使用 .prop() 将这些属性设置为 false。

你有过

```
// clear the list
$(':selected', columnList).removeProp('selected');

 // select desired columns
 $(optionsToSelect).each(function (index, value) {
       $('[value=' + value + ']', columnList).prop('selected', 'true');
 }); 
```

将其更改为

```
$(':selected', columnList).prop('selected',false);

 // select desired columns
 $(optionsToSelect).each(function (index, value) {
      $('[value=' + value + ']', columnList).prop('selected', true);
  }); 
```

你有

```
function deselectSpec() {
    $(columnSpecOptions).removeProp('checked');
} 
```

将其更改为

```
function deselectSpec() {
     $(columnSpecOptions).prop('checked',false);
} 
```

[http://jsfiddle.net/cvPhd/7/](http://jsfiddle.net/cvPhd/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:15:58.177

我使用 attr() 和 removeAttr() 方法而不是 removeProp() 和 prop() 并且一切正常。

```
$(document).ready(function () {
        var columnList = $('#testList_box');
        var columnSpecList = $('#columnSpecList');
        var columnSpecOptions = $('input', columnSpecList);

        $(columnSpecOptions).click(function () {
            var optionsToSelect = $(this).val().split(',');

            // clear the list
            $(columnList).find('option').removeAttr('selected');

            // select desired columns
            $(optionsToSelect).each(function (index, value) {
                $('[value=' + value + ']', columnList).attr('selected', 'selected');
            });
        });

        $(columnList).on(
            {
                click: deselectSpec,
                change: deselectSpec
            }
        );

        // simulate "click" of the selected option to load the initial values
        var itemToClick = $(":checked", columnSpecList);
        $(itemToClick).click();

        function deselectSpec() {
            $(columnSpecOptions).removeProp('checked');
        }
    });​ 
```

编辑：固定代码

# java - 需要从我的应用程序进行非阻塞/异步方法调用

> ID：12203768
> 
> 赞同：0
> 
> 时间：2012-08-30T19:06:08.963
> 
> 标签：java, oracle, asynchronous, weblogic, method-invocation

> **可能重复：**
> [如何以异步方式发出 Web 请求](https://stackoverflow.com/questions/5542763/how-to-make-an-make-a-web-request-in-an-async-manner)

我需要从我的应用程序进行非阻塞异步方法调用。

我需要以异步方式调用一个 http url。

例子：

```
URL myPage = new URL("http://www.mypage.com/");
URLConnection yc = myPage.openConnection(); 
```

但是要以非阻塞或异步方式调用的方法，以便在目标url（[http://www.mypage.com](http://www.mypage.com)）的服务器不工作时线程不会卡住。

使用 Oracle Weblogic Server 10.3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:26:08.143

您可以通过生成额外的线程来手动完成，或者您可以使用现成的库来为您完成这项工作。看看 Apache [HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html) + [HttpAsyncClient](http://hc.apache.org/httpcomponents-asyncclient-dev/)和[这些](http://hc.apache.org/httpcomponents-asyncclient-dev/examples.html)例子

# android - Android - 超链接缺少下划线

> ID：12203771
> 
> 赞同：0
> 
> 时间：2012-08-30T19:06:32.843
> 
> 标签：android, user-interface, textview, linkify

我使用 linkify 使 textview 作为超链接工作，并且效果很好。唯一的问题是缺少下划线，谁能指出可能导致问题的原因？下划线不应该默认出现吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:39:56.093

看看 Spannable 参数

```
addLinks(Spannable text,...) 
```

[链接类](http://developer.android.com/reference/android/text/util/Linkify.html)

[SpannableStringBuilder 类](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)

- 回复评论- SpannableStringbuilder 实现 CharSequence，可以在 TextView.setText() 中使用；因此，一旦你完成了带下划线的文本，你可以使用 TextView.setText() 并且仍然使用你正在使用的方法。

或者参考这个：[如何在textview上设置下划线文字？](https://stackoverflow.com/questions/5645789/how-to-set-underline-text-on-textview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-02T11:28:18.410

您可以使用小部件的 xml 属性`autoLink="web"`来`TextView`自动检测内容是否为网址。这是一个例子：

```
<TextView
    android:id="@+id/text_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="@android:color/black"
    android:textColorLink="@color/hyperlink_blue"
    android:autoLink="web"
    android:textSize="16sp"/> 
```

该属性`textColor`适用于超链接以外的文本，在上面的示例中将是“黑色”，该属性`textColorLink`适用于采用超链接形式的任何文本 - 上面将显示为蓝色。

您还可以通过将它们“连接”在一起来附加其他 autoLink 值：

```
android:autoLink="web|email|map|phone" 
```

这适用于`TextView`, `AppCompatTextView`(SupportV7/AppCompat), `AppCompatTextView`(androidx/AppCompat)

# c++ - HSL 到 RGB 颜色转换问题

> ID：12203783
> 
> 赞同：2
> 
> 时间：2012-08-30T19:07:42.213
> 
> 标签：c++, colors, rgb, hsl

我喜欢随机生成 - 和随机颜色 - 所以我决定将它们结合起来制作一个简单的 2d 景观生成器。我的想法是，根据方块的高度（是的，地形是由方块组成的）使其更亮或更暗，靠近顶部的东西更亮，靠近底部的东西更暗。我让它在灰度下工作，但正如我发现的那样，你不能真正使用基本的 RGB 颜色并使其更亮，因为 RGB 值之间的比率或任何类似的值似乎无法使用。解决方案？HSL。或者也许是 HSV，老实说我仍然不知道其中的区别。我指的是 H 0-360，S & V/L = 0-100。虽然...嗯，360 = 0，所以是 360 的值，但如果你真的有 0-100，那就是 101。真的是 0-359 和 1-100（或 0-99？），但是颜色选择编辑（目前指的是 GIMP...

无论如何，我找到了 HSL->RGB 转换的公式（[here](http://serennu.com/colour/rgbtohsl.php) & [here](http://www.easyrgb.com/index.php?X=MATH&H=19#text19)。据我所知，最终的公式是相同的，但我还是会提供代码（请注意，这是来自后面的 easyrgb.com 链接） ：

Hue_2_RGB

```
float Hue_2_RGB(float v1, float v2, float vH)             //Function Hue_2_RGB
{
if ( vH < 0 )
    vH += 1;

if ( vH > 1 )
    vH -= 1;

if ( ( 6 * vH ) < 1 )
    return ( v1 + ( v2 - v1 ) * 6 * vH );

if ( ( 2 * vH ) < 1 )
    return ( v2 );

if ( ( 3 * vH ) < 2 )
    return ( v1 + ( v2 - v1 ) * ( ( 2 / 3 ) - vH ) * 6 );

return ( v1 );
} 
```

和另一段代码：

```
float var_1 = 0, var_2 = 0;

        if (saturation == 0)                       //HSL from 0 to 1
        {
           red = luminosity * 255;                      //RGB results from 0 to 255
           green = luminosity * 255;
           blue = luminosity * 255;
        }
        else
        {
            if ( luminosity < 0.5 )
                var_2 = luminosity * (1 + saturation);
            else
                var_2 = (luminosity + saturation) - (saturation * luminosity);

            var_1 = 2 * luminosity - var_2;

            red = 255 * Hue_2_RGB(var_1, var_2, hue + ( 1 / 3 ) );
            green = 255 * Hue_2_RGB( var_1, var_2, hue );
            blue = 255 * Hue_2_RGB( var_1, var_2, hue - ( 1 / 3 ) );
        } 
```

抱歉，不确定修复这些空白的好方法。

我用我自己的名字、色调、饱和度和亮度替换了 H、S、L 值。我回头看了看，但除非我遗漏了什么，否则我会正确替换它。但是，除了 C++ 所需的部分之外，hue_2_RGB 函数完全未经编辑。（例如变量类型）。我也曾经对所有东西都有整数 - R、G、B、H、S、L - 然后我想到了...... HSL 是公式的浮点数 - 或者至少，它看起来应该是。所以我使用变量（var_1，var_2，所有的v，R，G，B，色调，饱和度，亮度）来浮动。所以我不相信这是某种数据丢失错误。此外，在输入公式之前，我有色相 /= 360、饱和度 /= 100 和亮度 /= 100。请注意，在此之前，我有色相 = 59、饱和度 = 100 和亮度 = 70。我相信我得到了色调正确为 360 以确保 0-1，

所以，我的问题是，为什么这个公式不起作用？谢谢，如果你能帮忙。

编辑：如果问题不清楚，请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:35:36.673

你的前提是错误的。您可以缩放 RGB 颜色。例如，Java 中的 Color 类包括名为 .darker() 和 .brighter() 的命令，这些命令使用 0.7 倍，但您可以使用任何您想要的。

```
public Color darker() {
    return new Color(Math.max((int)(getRed()  *FACTOR), 0),
                     Math.max((int)(getGreen()*FACTOR), 0),
                     Math.max((int)(getBlue() *FACTOR), 0),
                     getAlpha());
}

public Color brighter() {
    int r = getRed();
    int g = getGreen();
    int b = getBlue();
    int alpha = getAlpha();

    /* From 2D group:
     * 1\. black.brighter() should return grey
     * 2\. applying brighter to blue will always return blue, brighter
     * 3\. non pure color (non zero rgb) will eventually return white
     */
    int i = (int)(1.0/(1.0-FACTOR));
    if ( r == 0 && g == 0 && b == 0) {
        return new Color(i, i, i, alpha);
    }
    if ( r > 0 && r < i ) r = i;
    if ( g > 0 && g < i ) g = i;
    if ( b > 0 && b < i ) b = i;

    return new Color(Math.min((int)(r/FACTOR), 255),
                     Math.min((int)(g/FACTOR), 255),
                     Math.min((int)(b/FACTOR), 255),
                     alpha);
} 
```

简而言之，将所有三种颜色乘以相同的静态因子，您将拥有相同的颜色比例。这是一个有损操作，您需要确保卷曲颜色以保持在范围内（这比舍入误差更有损）。

坦率地说，从 RGB 到 HSV 的任何转换都只是数学运算，而更改 HSV V 因子只是数学运算，而将其改回则是数学运算。你不需要这些。你可以做数学。这将使最大分量颜色更大，而不会弄乱颜色之间的比例。

--

如果问题更具体，而您只是想要更好的结果。有更好的方法来计算这个。您可以转换为亮度组件，而不是静态缩放亮度（L 不是指亮度）。基本上以特定方式加权。色彩科学和计算与人类观察者打交道，它们比实际数学更重要。为了解释这些人类的一些怪癖，需要“修复”以更类似于普通人类的感知。亮度缩放如下：

Y = 0.2126 R + 0.7152 G + 0.0722 B

这同样反映在权重 30、59、11 中，这些权重被错误地认为是好的颜色距离权重。这些权重是颜色对人类对亮度的感知的贡献。例如，人类认为最亮的蓝色非常暗。而黄色（与蓝色完全相反）被视为如此明亮，以至于您甚至无法在白色背景下辨认出来。Y'CbCr 包含的许多色彩空间通过缩放来解释这些亮度感知的差异。然后你可以改变这个值，当你缩小它时它会再次被缩放。

导致不同的颜色，这应该更类似于人类所说的相同颜色的“更轻”版本。这个人类系统有越来越好的近似值，因此使用更好和更花哨的数学来解释它通常会给你更好的结果。

对于涉及这些问题的良好概述。 [http://www.compuphase.com/cmetric.htm](http://www.compuphase.com/cmetric.htm)

# facebook - 即使在重新加载页面期间，如何使 DOM 元素始终可见？

> ID：12203786
> 
> 赞同：2
> 
> 时间：2012-08-30T19:07:48.873
> 
> 标签：facebook, node.js, dom, chat

如果用户在我的网站上，我想在底部持久化一些固定的 div 而无需重新加载它们。就像 Facebook 聊天一样，用户可以遍布整个网站，但聊天总是可见的？

这个问题是因为我已经创建了与 NodeJS 的聊天，并且当刷新页面时连接被破坏并再次创建，所以我想让这个连接即使在重新加载页面期间也能持久。

我知道发出每个请求 Ajax 调用的可能解决方案，但是......这是不可用的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:05:24.447

你可以试试[localstorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)。数据将在重新加载时保留。

将其与[json.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)和[json.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)一起使用以使其工作。

不幸的是，一些仍在使用的旧浏览器不喜欢这样。我认为所有新的浏览器版本都可以使用本地存储。如果您不关心旧浏览器，那也没关系。

有[localstorage shims](https://gist.github.com/350433)，但这取决于您愿意为您的项目投入多少工作。

如果您愿意，也可以使用 localstorage 来存储 html。我更喜欢自己使用 json 值更新 dom 元素。

访问[浏览器版本的市场份额](http://marketshare.hitslink.com/browser-market-share.aspx?qprid=2&qpcustomd=0)，您会看到相当多的旧版本已不再使用。尽管与任何技术使用统计数据一样，您应该对它们持保留态度。

**编辑**哎呀！你说固定的 div 没有重新加载它们。如果他们是聊天，我认为这是不可能的。除非我不明白这个问题。如果可以，请发布一些代码。

# database - Derby 数据库表列名格式在查询中不一致

> ID：12203787
> 
> 赞同：2
> 
> 时间：2012-08-30T19:07:49.843
> 
> 标签：database, derby

查询 Derby 数据库时，我发现对于某些表，我必须将列名双引号并使用表名来限定列名，但对于其他一些表，我不需要。这些表会发生什么情况？如何使所有表都相同，并且可以在没有双引号和表名限定符的情况下查询它们？我正在使用 NetBeans IDE 的 Sql 命令工具。以下是这些不同的查询。

```
Set schema app;
Select * from table1 where table1.”state” = ‘CA’;
Select * from table2 where state = ‘CA’; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:32:33.053

将表名或列名放在引号中，有时用术语“分隔标识符”来指代，有两件事：

1.  允许您使用其他保留关键字的词（例如，将列命名为“WHERE”或“SELECT”）
2.  指示数据库系统使用区分**大小写**的规则而不是**不区分大小写的**规则来处理名称

因此，如果您最初使用 CREATE TABLE 语句创建“table3”，该语句在这样的双引号中指定“table3”，那么您将永远必须使用双引号中的名称来引用它。

`select * from table3`

将由数据库自动处理，就好像它是

`select * from TABLE3`

尽管

`select * from "table3"`

将成功匹配您创建的表`create table "table3"`

见：[http ://db.apache.org/derby/docs/10.9/ref/crefsqlj34834.html](http://db.apache.org/derby/docs/10.9/ref/crefsqlj34834.html)

# objective-c - nsrange.location 不完全是麻烦 makerange 子字符串 ios 目标 c

> ID：12203788
> 
> 赞同：0
> 
> 时间：2012-08-30T19:07:50.580
> 
> 标签：objective-c, ios, nsstring, substring, nsrange

嗨，我有这个字符串{“数据”：[{“名称”：“Lorena Trujillo”，“id”：“500144123”}，{“名称”：“George Arcila”，“id”：“520311359”}，{ “名称”：“劳拉维多利亚穆\u00f1oz Rincon”，“id”：“528543677”}，{“名称”：“Camilo Andres Santacoloma Mejia”，“id”：“529547832”}]，“paging”：{“下一个“： ”https://graph.facebook.com/537223119/friends?access_token=AAAAAAITEghMBAI7cZBdbAHt3ZC24esi4ZA6O6kFdwU1H0ekDmGQGRZCUZAVW3T6W6fzg50jHsdfsdfsfdsfdsfzdixf1RrTFLzV96ZBWXAZDZD&limit=5000&offset=5000&__after_id=1000456456455“}

}

并且您需要提取 [ 和 ] 之间的子字符串我使用下一个代码

```
NSRange startRange = [strFriends rangeOfString:@"["];
NSRange endRange = [strFriends rangeOfString:@"]"];
NSString *formData = [strFriends  substringWithRange:NSMakeRange(startRange.location,endRange.location)];
NSLog(@"this is the data %@",formData); 
```

结果是

[ {“名称”：“Lorena Trujillo”，“id”：“500144123”}，{“名称”：“George Arcila”，“id”：“520311359”}，{“名称”：“Laura Victoria Mu\u00f1oz Rincon", "id": "528543677" }, { "name": "Camilo Andres Santacoloma Mejia", "id": "529547832" }],"pagin

知道为什么这些最后一个字符会出现，“非常感谢页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:12:08.930

这是因为`startRange`location 和`endRange`location 都指向字符串中的位置 - 但 subStringWithRange 需要一个位置和一个长度 - 所以您需要计算要提取的字符串的长度。像这样：

```
NSUInteger dataLength = endrange.location - startRange.location;
NSString *formData = [strFriends  substringWithRange:NSMakeRange(startRange.location,dataLength)]; 
```

除此之外，您确实需要一个 JSON 解析器来解析 JSON。挑选出像这样的小子串将是一项繁重的工作并且很脆弱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:12:16.490

正如评论中提到的 driis，您应该使用[JSON 解析器](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)来处理这些数据。要回答您的问题，您正在看到“页面”，因为范围有一个位置和一个长度，而不是 2 个位置。尝试

```
NSMakeRange(startRange.location,endRange.location - startRange.location) 
```

# mysql - rails - .find 从数据库返回数据但缺少列

> ID：12203789
> 
> 赞同：1
> 
> 时间：2012-08-30T19:07:54.060
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, object, find

好的，我希望标题具有足够的描述性，但这是我的问题。（我是 Rails 新手，所以如果我还需要更多信息，请告诉我）

我有一个表单来编辑用户，`edit.html.erb` 这获取了一个`@user`传递给它的对象。我的控制器上得到这个的代码是：

```
def edit
    @user = User.find(params[:id])
end 
```

我正在使用该对象来预填充`edit.html.erb`页面上的字段。以下是我的数据库中用于用户的列：

```
id
username
name
email
admin
active
created_at
updated_at 
```

我的问题是，由于某种原因，`email`对象的值被遗漏了，因此这些值都被左移了。例如，通过`<%= @user.inspect %>`在`edit.html.erb`页面上使用这是我得到的：

```
<User id: 2, username: "exampleuser1", name: "Kaylee Kuhic", nickname: "exampleuser1", email: "Default", selected_color_scheme: "0", is_admin: true, active: nil, date_last_logged_in: "2012-08-30 19:28:31", created_at: "2012-08-30 19:28:31", updated_at: nil> 
```

这只是我正在修改的一个测试应用程序，所以我可能已经移动了一列。那会影响它吗？ **控制器和可能影响对象的视图之间发生了什么？**

此外，当我`User.find(params[:id])`在 rails 控制台中运行时，我会正确返回所有数据：

```
<User id: 2, username: "exampleuser1", name: "Kaylee Kuhic", nickname: "exampleuser1", email: "exampleuser1@example.com", selected_color_scheme: "Default", is_admin: true, active: true, date_last_logged_in: nil, created_at: "2012-08-30 19:28:31", updated_at: "2012-08-30 19:28:31"> 
```

有什么想法吗？再次，对不起，如果我遗漏了任何重要信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:05:51.413

听起来您需要使用 rake db:drop db:create db:migrate 重建数据库

这将删除数据库中的所有数据，但由于这是一个测试应用程序，我认为没关系。

# azure - Azure 网站 - 如何写入文件

> ID：12203791
> 
> 赞同：1
> 
> 时间：2012-08-30T19:07:54.350
> 
> 标签：azure, azure-storage, azure-blob-storage, abcpdf, azure-web-app-service

我正在使用 abcPDF 来动态创建 PDF。

我想保存这些 PDF 供客户随时检索。最简单的方法（以及我现在在当前服务器上所做的方法）是简单地将完成的 PDF 保存到文件系统中。

似乎我坚持使用 blob。幸运的是 abcPDF 可以保存到流和文件中。现在，如何将流连接到 blob？我找到了显示 blob 采用如下流的代码：

```
blob.UploadFromStream(theStream, options); 
```

abcPDF 函数如下所示：

```
theDoc.Save(theStream) 
```

我不知道如何弥合这个差距。

谢谢！布拉德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T06:41:46.240

作为不需要将整个文件保存在内存中的替代方法，您可以尝试以下操作：

```
using (var stream = blob.OpenWrite())
{
    theDoc.Save(stream);
} 
```

**编辑**

在这里添加一个警告：如果该`save`方法需要可搜索的流，我认为这不会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:22:50.423

鉴于这种情况并且不知道 abcPdf 的 Save() 方法的完整重载列表，您似乎需要一个 MemoryStream。就像是：

```
using(MemoryStream ms = new MemoryStream())
{
    theDoc.Save(ms);
    ms.Seek(0, SeekOrigin.Begin);
    blob.UploadFromStream(ms, options);
} 
```

这将完成这项工作。但是，如果您正在处理大文件，并且您预计会有大量流量（大量同时创建的 PDF），您可能只需要一个临时文件。将 PDF 写入临时文件，然后立即上传 Blob 的临时文件。

# c# - 将对象列表传递给 Web 服务

> ID：12203793
> 
> 赞同：1
> 
> 时间：2012-08-30T19:07:56.750
> 
> 标签：c#, .net, web-services

我有一个 DataObjects 类，其中包含一个 UserEmail 对象，该对象包含一个 int (EmailID) 和一个字符串 (EmailAddress)。

在 C# .net 应用程序中，如果我想显示电子邮件地址列表 - 我创建并填充 UserEmail 对象列表。

```
List<DataObjects.UserEmails> myUserEmailsList = new List<DataObjects.UserEmails>(); 
```

并将它用作我碰巧使用的任何控件的数据源。

我需要将该列表传递给 Web 服务。我看不出该怎么做。如果对方使用将列表作为参数的方法编写 Web 服务 - 很好，我可以调用 Web 服务并传递我的列表。但是他们如何能够从列表中提取数据——而无需访问在列表中创建对象的类？

有没有办法在不知道对象的数据结构是什么的情况下遍历对象列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:13:14.907

当您使用他们的 Web 服务时，您必须符合他们的数据结构。您获取您的 UserEmail 对象数据，并将其转换为他们的服务所期望的对象。

如果您使用的服务只需要数据作为获取或发布数据，则必须使用他们需要的任何键。因此，他们可能会使用“email”键而不是您的“EmailAddress”属性名称来获取电子邮件地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:18:04.837

```
here a sample to pass list object to your webservice

    <%@WebService Language="c#" class="CustomObjectArrayWS"%>
using System;
using System.Collections;
using System.Web.Services;
using System.Xml.Serialization;
public class CustomObjectArrayWS
{
        [WebMethodAttribute]
        [XmlInclude(typeof(Address))]
        public ArrayList GetAddresses ()
    {
        ArrayList al = new ArrayList();
        Address addr1 = new Address("John Smith", "New York",12345);
        Address addr2 = new Address("John Stalk", "San Fransisco", 12345);

            al.Add(addr1);
            al.Add(addr2);

            return al;
    }
} 
// Custom class to be added to the collection to be passed in //and out of the service
public class Address
{
    public string name;
    public string city;
    public int zip;     
    // Default ctor needed by XmlSerializer
    public Address()
    {
    }
    public Address(string _name, string _city, int _zip  )
    { 
                    this.name = _name;
                    this.city = _city;
                     this.zip = _zip;
           }
       } 
```

请参阅[http://www.programmersheaven.com/2/XML-Webservice-FAQ-Pass-Array-Of-Custom-Objects](http://www.programmersheaven.com/2/XML-Webservice-FAQ-Pass-Array-Of-Custom-Objects)

# python - 我应该关闭 makefile 的套接字并且它是独立的原始套接字吗？

> ID：12203800
> 
> 赞同：2
> 
> 时间：2012-08-30T19:08:09.510
> 
> 标签：python, file, sockets

[Python 文档](http://docs.python.org/library/socket.html#socket.socket.makefile)是这样说的；

> 插座。**makefile** ([mode[, bufsize]])
> 返回与套接字关联的文件对象。（文件对象在文件对象中描述。）文件对象引用套接字文件描述符的 dup()ped 版本，因此文件对象和套接字对象可以独立关闭或垃圾收集。

这是否意味着我必须像这样关闭套接字和文件？

```
conn = socket.create_connection((addr,port))
myfile = conn.makefile()
myfile.close()
conn.close() 
```

还是关闭一个就足够了？如果是这样，我关闭哪个和不关闭哪个重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:16:38.777

正如文档所说，两个对象都是独立的。仅当与其相关的所有文件描述符都关闭时，底层连接才会关闭。您必须关闭两者。使用该`with`语句来管理这些资源。

# wpf - 在两个椭圆之间连接一条线

> ID：12203801
> 
> 赞同：0
> 
> 时间：2012-08-30T19:08:12.100
> 
> 标签：wpf

我试图在两个椭圆之间连接一条线，如果拖动一条线，这条线会随之移动。我有一个画布，里面有两个堆栈面板......在每个堆栈面板中，左边是一个椭圆......中间是内容控件......右边是另一个椭圆。这个想法是在一个堆栈面板中的右椭圆与第二个堆栈面板中的左椭圆之间连接一条线。到目前为止，我有这个，但似乎无法走得更远，因为用于进行绑定的属性路径对我来说没有太大意义......这就是为什么我现在有一个 Canvas 在那里。

```
Line line = new Line();
line.Stroke = connectedEllipse.Fill;
line.StrokeThickness = 2;

Binding x1 = new Binding();
Binding x2 = new Binding();
Binding y1 = new Binding();
Binding y2 = new Binding();

x1.Path = new PropertyPath(Canvas.LeftProperty);
x2.Path = new PropertyPath(Canvas.LeftProperty);
y1.Path = new PropertyPath(Canvas.TopProperty);
y2.Path = new PropertyPath(Canvas.TopProperty);

x1.Source = y1.Source = connectedEllipse;
x2.Source = y2.Source = (sender as Ellipse);

line.SetBinding(Line.X1Property, x1);
line.SetBinding(Line.X2Property, x2);
line.SetBinding(Line.Y1Property, y1);
line.SetBinding(Line.Y2Property, y2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:19:46.080

好的，我已经破解了一些不使用附加属性方法的代码。这可能不是“好”的代码，因为我在 20 分钟内编写了它，但它会让你开始。

主窗口.xaml

```
<Window x:Class="EllipseTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:EllipseTest"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded" >
    <Window.Resources>
        <ControlTemplate x:Key="template1">
            <Ellipse Width="60" Height="30" Fill="Blue" />
        </ControlTemplate>
    </Window.Resources>
    <Canvas Name="canvas">
        <my:ExtendedThumb x:Name="thumb1" Canvas.Left ="0" Canvas.Top="0" DragDelta="myThumb_DragDelta" Template="{StaticResource template1}" />
        <my:ExtendedThumb x:Name="thumb2" Canvas.Left ="50" Canvas.Top="20" DragDelta="myThumb_DragDelta" Template="{StaticResource template1}" />
    </Canvas>
</Window> 
```

主窗口.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace EllipseTest
{
   /// <summary>
   /// Interaction logic for MainWindow.xaml
   /// </summary>
   public partial class MainWindow : Window
   {
      Path path;

      public MainWindow()
      {
         InitializeComponent();
      }

      private void myThumb_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
      {
         ExtendedThumb thumb = e.Source as ExtendedThumb;
         Canvas.SetLeft(thumb, Canvas.GetLeft(thumb) + e.HorizontalChange);
         Canvas.SetTop(thumb, Canvas.GetTop(thumb) + e.VerticalChange);
         if (thumb == thumb1)
            UpdateLine(thumb, thumb2);
         else
            UpdateLine(thumb1, thumb);
      }

      private void UpdateLine(ExtendedThumb firstThumb, ExtendedThumb secondThumb)
      {
         double left1 = Canvas.GetLeft(firstThumb);
         double top1 = Canvas.GetTop(firstThumb);

         double left2 = Canvas.GetLeft(secondThumb);
         double top2 = Canvas.GetTop(secondThumb);

         thumb1.ConnectingLine.StartPoint = new Point(left1 +firstThumb.ActualWidth / 2, top1 + firstThumb.ActualHeight / 2);
         thumb1.ConnectingLine.EndPoint = new Point(left2 + secondThumb.ActualWidth / 2, top2 + secondThumb.ActualHeight / 2);

         thumb2.ConnectingLine.StartPoint = new Point(left2 + secondThumb.ActualWidth / 2, top2 + secondThumb.ActualHeight / 2);
         thumb2.ConnectingLine.EndPoint = new Point(left1 + firstThumb.ActualWidth / 2, top1 + firstThumb.ActualHeight / 2);

      }

      private void Window_Loaded(object sender, RoutedEventArgs e)
      {
         path = new Path();
         path.Stroke = Brushes.Black;
         path.StrokeThickness = 2;

         canvas.Children.Add(path);

         LineGeometry line = new LineGeometry();
         path.Data = line;

         thumb1.ConnectingLine = line;
         thumb2.ConnectingLine = line;

         UpdateLine(thumb1, thumb2);

      }
   }
} 
```

扩展拇指.cs

```
using System;
using System.Collections.Generic;
using System.Windows.Controls.Primitives;
using System.Windows.Media;
using System.Linq;
using System.Text;

namespace EllipseTest
{
   public class ExtendedThumb : Thumb
   {
      public LineGeometry ConnectingLine { get; set; }

      public ExtendedThumb() : base() { ConnectingLine = new LineGeometry(); }
   }
} 
```

另外，我从这个链接的内容中得到了这个想法：http: [//denisvuyka.wordpress.com/2007/10/13/wpf-draggable-objects-and-simple-shape-connectors/](http://denisvuyka.wordpress.com/2007/10/13/wpf-draggable-objects-and-simple-shape-connectors/)

# javascript - 像 facebook 聊天一样的窗口

> ID：12203805
> 
> 赞同：6
> 
> 时间：2012-08-30T19:09:08.437
> 
> 标签：javascript, jquery, css, facebook, chat

Facebook 聊天窗口保持打开、不变，以刷新页面，甚至在我们更改页面时。如何重现类似的东西？尝试使用框架集，但它不起作用。

即使在网站链接上刷新页面或 clocar 之后，如何保持 div 打开类似于内部的窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:11:20.870

像他们一样，你可以试试——

1.  数据在 Facebook 页面之间共享。可能是 HTML5 `localStorage`？饼干？我不确定。

2.  如果您注意到，它们不会“刷新”页面，它们会 ajax 刷新页面上的内容以供后续加载。（当然，除非您手动导航到同一页面。）

3.  最后，它所有的CSS*主要是*一些`z-index`投入使用。

我希望这三个足以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T14:50:33.810

我会调查 qjuery-qjax：[https ://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)

从他们的文档中：

> pjax 的工作原理是通过 ajax 从服务器获取 html，并用 ajax 的 html 替换页面上容器的内容。然后，它使用 pushState 更新浏览器的当前 url，而无需重新加载页面的布局或任何资源（js、css），从而呈现出快速、完整的页面加载的外观。但实际上它只是 ajax 和 pushState。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:14:21.973

我不认为 Facebook 的整个页面都已加载。每个链接都有它自己的“目标”。他们中的大多数人获取一个页面（我认为只是 AJAX）来显示，其他人只是更改屏幕的某些部分。假设你有两个 div。一个 div 是聊天 div。定位固定和所有，z-index 为 100，它将始终保持在顶部。页面的其余部分是另一个 div。在这个 div 中，您可以使用 AJAX 加载某些页面，而无需刷新整个屏幕。

与重新加载屏幕一样：您可以轻松保存（也使用 AJAX）用户是否关闭或打开了聊天屏幕。只需在名为“聊天”或其他名称的数据库中创建一个表，然后当打开聊天屏幕时，您在该表中添加一个条目，其中包含“person_1”、“person_2”、“lastmessage”和“active”。当他们关闭聊天时，您可以将“活动”字段设置为 false。然后，每当有人加载整个网站时，您都会检查桌面聊天是否有活动聊天，并在有任何聊天时显示它们。

# ruby-on-rails - 使用捆绑器在rails3中部署scp？

> ID：12203806
> 
> 赞同：1
> 
> 时间：2012-08-30T19:09:09.620
> 
> 标签：ruby-on-rails, bundler

好的，这个棘手的问题又出现了，我们仍然很难找到解决方案。

# 问题

我们有一个 Gemfile：

```
group :development do
  gem 'debugger'
end 
```

部署到生产时，Passenger 会因为找不到 gem '调试器'而爆炸。

# 约束

*   ops 不会将“调试器”安装到产品中

*   部署后我们无法运行任何 shell 命令，例如`bundle install`或`bundle --without development`

*   我们不能在`bundle --without development`本地运行并复制 Gemfile.lock 或 .bundle/* 目录（[如前所述](https://stackoverflow.com/questions/8142126/can-bundler-be-used-in-rsync-deployments)），因为我们的开发机器与我们的生产机器的架构不同。

*   [prod 机器与http://rubygems.org](http://rubygems.org)隔离。在 prod 机器上安装/更新 gem的*唯一*方法是手动请求操作`gem install`。

*   所有应用程序的 gem 在 prod 机器上共享（没有 rvm 等）

*   我们确实有一个在部署后运行的 rake 任务

# 我们目前的解决方案

*   在发布到 prod 之前查看 Gemfile 并注释掉开发组。稍后取消评论。根据发布周期中的位置重复。（容易出错）

# 我能想到的可能解决方案

*   保留 Gemfile 的两个版本（即 Gemfile.dev Gemfile.prod）并使用 rake 任务将它们交换/cp 到 Gemfile。

# ios - 获得活跃的故事板

> ID：12203807
> 
> 赞同：0
> 
> 时间：2012-08-30T19:09:10.140
> 
> 标签：ios, cocoa-touch

我正在使用下面的代码来检查用户是登录还是注销，并且工作正常。但是因为我按名称获取情节提要，所以我总是将用户发送到 iPhone 的“输入”或“输出”视图控制器。如果我得到活跃的故事板，它会起作用。如何修复代码？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    BOOL user = ...;
    NSString *segue = user ? @"in" : @"out";
    UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];
    UIViewController *viewController = [storyBoard instantiateViewControllerWithIdentifier:segue];
    [self.window setRootViewController:viewController];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:04:40.297

如果您要做的只是根据您的应用程序是在 iPad 还是 iPhone 上运行，从不同的故事板中获取 viewController，您可以使用 if 语句执行此操作：

```
NSString *storyboardName;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboardName = @"iPad";
} else {
    storyboardName = @"iPhone";
}
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:storyboardName bundle:nil]; 
```

如果您真的需要在任何情况下都获得“活动”故事板，那么这个先前的答案可能会对您有所帮助：

[UIStoryboard：获取活动故事板的正确方法是什么？](https://stackoverflow.com/questions/9853608/uistoryboard-whats-the-correct-way-to-get-the-active-storyboard)

# wxpython - Python继承问题-以不同方式调用对象

> ID：12203815
> 
> 赞同：0
> 
> 时间：2012-08-30T19:09:33.367
> 
> 标签：wxpython

我写了这2段代码：

1.  创建一个继承自 wx.frame 的类 Myframe 并创建一个 App，它可以正常工作。

代码1.py

```
import wx
class MyApp(wx.App):
    def OnInit(self):
        self.frame = MyFrame(None,title="MyFrame")
        self.SetTopWindow(self.frame)
        self.frame.Show()
        return True

class MyFrame(wx.Frame):
    def __init__(self,*args,**kwargs):
        super(MyFrame,self).__init__(*args,**kwargs)

        self.CreateStatusBar()
        self.SetStatusText("Initializing")
        self.CreateToolBar()

if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop() 
```

1.  现在，我尝试重新编写一个相同的直接调用 wx.App

代码2.py

```
import wx

app = wx.App()
frame = wx.Frame(None,-1,"Test")
SetTopWindow(frame)
frame.show()

app.MainLoop() 
```

有几件事不能作为代码 1 工作。

1.  窗口立即关闭。
2.  SetTopWindow 不工作..它说未声明的变量...这是正确的..但是我如何引用 SetTopWindow ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:16:23.110

窗口立即关闭，因为代码有问题。如您所知，SetTopWindow 没有定义，但还有另一个问题。Frame 没有 show() 方法。它有一个 Show() 方法。注意大小写的不同。如果您查看第一个代码示例，您将看到您正在调用应用程序对象的 SetTopWindow() 方法。您也只需要在这里执行此操作：

```
import wx

app = wx.App()
frame = wx.Frame(None,-1,"Test")
app.SetTopWindow(frame)
frame.Show()

app.MainLoop() 
```

# xcode - 在 segue 中传递 url 信息

> ID：12203818
> 
> 赞同：0
> 
> 时间：2012-08-30T19:09:46.487
> 
> 标签：xcode, ios5, segue

我有 2 个按钮，每个按钮都带有一个 segue 到一个带有 web 视图的视图控制器。我正在尝试根据哪个按钮启动 segue 在 web 视图中加载一个 url。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

if ([segue.identifier isEqualToString: @"toWeb"]){
     NSString *abc = @"http://www.abc.com/";
    NSURL *url = [NSURL URLWithString:kmb];
    NetView *netview =[segue destinationViewController];
    [netview.internet loadRequest:[NSURLRequest requestWithURL:url]];

}else if ([segue.identifier isEqualToString: @"toFacebook"]){
    NSString *fb = @"http://www.facebook.com/ABC?ref=hl";        
    NSURL *url2 = [NSURL URLWithString:fb];
    NetView *netview =[segue destinationViewController];
    [netview.internet loadRequest:[NSURLRequest requestWithURL:url2]];
    }
     } 
```

这不起作用，但我没有收到任何错误，只是新屏幕上的一个平淡的视图。我不确定问题是什么。谁能帮我指出正确的方向？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:16:22.110

问题是此时目标控制器上的 webview 尚未加载。只需在目标控制器上设置一个属性来保存您的 url，然后在其`viewDidLoad`方法上将消息发送到 webview 以加载请求。像这样的东西：

**NetView.h**

```
...
@property (nonatomic, copy) NSString *url; 
```

**NetView.m**

```
...
@synthesize url; 
```

**您的代码片段：**

```
if ([segue.identifier isEqualToString: @"toWeb"]){
    NetView *netview = [segue destinationViewController];
    netview.url = @"http://www.abc.com/";
}
... 
```

**NetView.m**

```
- (void)viewDidLoad
{
    NSURL *urlToLoad = [NSURL URLWithString:self.url];
    [self.internet loadRequest:[NSURLRequest requestWithURL:urlToLoad]];
} 
```

# iphone - 具有 2 个代表的 UITextField

> ID：12203819
> 
> 赞同：1
> 
> 时间：2012-08-30T19:09:49.687
> 
> 标签：iphone, uitextfield, delegation

我刚刚创建了一个格式化程序类，它将自动格式化输入到 uitextfield 中的数字并返回正确的格式。

IE

文本字段看起来像这样 $0.00

如果您输入 1,2,3,a,b,c，您会在文本字段中获得 1.23 美元。

我通过创建一个 UITextfieldDelegate 自定义类并响应文本字段委托方法来做到这一点。

但是，我的视图控制器还需要在此文本字段中的文本更改时做出响应。

我可以委托代表吗？还是我必须让我的格式化程序类也有一个委托方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:35:04.990

我解决这个问题的方法是创建一个类方法来返回正确格式化的字符串。

然后我将委托保留给 viewController。

当它询问文本字段是否应更改时。我只是使用我的类方法设置文本，然后返回 no，这样它就基本上忽略了用户输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:22:38.627

我还建议您`NSNotificationCenter`在这种情况下使用 a ，因为您不能使用两个代表，[这里](https://stackoverflow.com/questions/8917330/trying-to-update-a-uilabel-on-a-parent-view-controller-when-dismissing-the-modal/8917609#8917609)有一个如何使用`NSNotificationCenter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:12:57.247

不，您不能同时拥有两个代表，这是一个属性，如果您第二次分配它，第一个代表将不再是代表。您可以做的是创建一个通用委托类，在其中设置一个[NSNotificationCenter](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)以发送与 UITextField 事件对应的通知，然后将所有类（必须接收这些事件）注册到 NSNotificationCenter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:00:42.877

我意识到我参加这个聚会有点晚了，但为什么不直接在 Interface Builder 中将 CustomDelegate 类添加到您的 VC 中并设置委托`UITextField`呢？VC 中不需要额外的代码，也不`UITextField`需要子类化。下面的项目链接可以自定义电话号码的格式。

[链接到示例项目](https://dl.dropboxusercontent.com/u/3660978/UITextFieldDelegate.zip) 当我决定它会消失时，此链接将消失。它可以永远存在（或者只要 Dropbox 还在营业）。

添加了委托类的代码示例（尽管如果有人在 iOS 开发方面有任何经验，则不需要这样做。）该屏幕截图几乎解释了所有答案。为方便起见，添加了示例项目链接。

来自 Delegate 类的代码：

头文件：

```
#import <Foundation/Foundation.h>

@interface PhoneNumberFormatterDelegate : NSObject <UITextFieldDelegate>

@end 
```

实施文件：

```
#import "PhoneNumberFormatterDelegate.h"

@implementation PhoneNumberFormatterDelegate

#pragma mark - My Methods
-(void)textFieldDidChange:(UITextField *)textField {
    if ([textField.text length] > 11) {
        [textField resignFirstResponder];
    }
}

#pragma mark - UITextField Delegate Methods
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    // If user hit the Done button, resign first responder
    if([string isEqualToString:@"\n"]){
        [textField resignFirstResponder];
        return NO;
    }

    // All digits entered
    if (range.location == 12) {
        [textField resignFirstResponder];
        return NO;
    }

    // Reject appending non-digit characters
    if (range.length == 0 &&
        ![[NSCharacterSet decimalDigitCharacterSet] characterIsMember:[string characterAtIndex:0]]) {
        return NO;
    }

    // Auto-add hyphen before appending 4rd or 7th digit
    if (range.length == 0 &&
        (range.location == 3 || range.location == 7)) {
        textField.text = [NSString stringWithFormat:@"%@-%@", textField.text, string];
        return NO;
    }

    // Delete hyphen when deleting its trailing digit
    if (range.length == 1 &&
        (range.location == 4 || range.location == 8))  {
        range.location--;
        range.length = 2;
        textField.text = [textField.text stringByReplacingCharactersInRange:range withString:@""];
        return NO;
    }

    return YES;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField {
    [textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
}

- (void)textFieldDidEndEditing:(UITextField *)textField {
    [textField removeTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
}
@end 
```

![IB截图](../Images/d4e4e9948633507124d3a433abca334e.png)

# c# - 我想弄清楚我的清单有什么问题

> ID：12203825
> 
> 赞同：0
> 
> 时间：2012-08-30T19:10:26.033
> 
> 标签：c#, .net, wpf, listview

我可以描述发生的事情的唯一方法是使用图像，所以我希望这会出现，我认为我的问题出在 itemsource 中，因为我将它们放在列表框中并且电子邮件列表中没有空格，在 col1 中它显示名称，并在 col2 中显示电子邮件，但不在同一行上，所有内容都被向下推。

这是xaml

```
 <Window x:Class="test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="492" Width="865" ResizeMode="CanMinimize">
<Grid>
    <Label Content="Name" Height="28" HorizontalAlignment="Left" Margin="12,12,0,0" Name="label1" VerticalAlignment="Top" IsEnabled="False" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="12,46,0,0" Name="textBox1" VerticalAlignment="Top" Width="180" />
    <Label Content="Email" Height="28" HorizontalAlignment="Left" Margin="12,138,0,0" Name="label3" VerticalAlignment="Top" IsEnabled="False" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="12,172,0,0" Name="textBox3" VerticalAlignment="Top" Width="180" />
    <Label Content="Website" Height="28" HorizontalAlignment="Left" Margin="12,75,0,0" Name="label4" VerticalAlignment="Top" IsEnabled="False" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="12,109,0,0" Name="textBox4" VerticalAlignment="Top" Width="180" />
    <Calendar Height="170" HorizontalAlignment="Left" Margin="12,235,0,0" Name="calendar1" VerticalAlignment="Top" Width="180" />
    <Label Content="Send Date" Height="28" HorizontalAlignment="Left" Margin="12,203,0,0" Name="label2" VerticalAlignment="Top" IsEnabled="False" />
    <TabControl Height="391" HorizontalAlignment="Left" Margin="225,14,0,0" Name="tabControl1" VerticalAlignment="Top" Width="606">
        <TabItem Header="My" Name="tabItem1" IsEnabled="True">
            <Grid>
                <ListView Height="359" ItemsSource="{Binding Tab1Collection}" HorizontalAlignment="Left" Name="listView1" VerticalAlignment="Top" Width="596">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn DisplayMemberBinding="{Binding name1}" Header="Name" Width="150" />
                            <GridViewColumn DisplayMemberBinding="{Binding email1}" Header="Email" Width="255" />
                            <GridViewColumn DisplayMemberBinding="{Binding website1}" Header="Website" Width="200" />
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </TabItem>
        <TabItem Header="Finished" Name="tabItem2" IsEnabled="true">
            <Grid>
                <ListView Height="359" HorizontalAlignment="Left" Name="listView2" VerticalAlignment="Top" Width="596">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" Width="150" />
                            <GridViewColumn Header="Email" Width="150" />
                            <GridViewColumn Header="Website" Width="150" />
                            <GridViewColumn Header="Delivered On" Width="150" />
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </TabItem>
        <TabItem Header="Results" Name="tabItem3" IsEnabled="False">
            <Grid />
        </TabItem>
        <TabItem Header="Directory" Name="tabItem4" IsEnabled="true" IsSelected="True">
            <Grid Height="362"></Grid>
        </TabItem>
    </TabControl>
    <Button Content="Add Contact" Height="29" HorizontalAlignment="Left" Margin="97,411,0,0" Name="button1" VerticalAlignment="Top" Width="95" />
</Grid> 
```

这是代码

```
 private List<string> names = new List<string>();
    private List<string> Emails = new List<string>();

    public MainWindow()
    {
        InitializeComponent();
        names.Add("test123");
        names.Add("test123");
        names.Add("test123");
        names.Add("tst123");
        names.Add("test123");
        names.Add("tst123");

        Emails.Add("test123@Gmail.com");
        Emails.Add("test123@Gmail.com");
        Emails.Add("test123@Gmail.com");
        Emails.Add("test123@Gmail.com");
        Emails.Add("test123@Gmail.com");
        Emails.Add("test123@Gmail.com");

        foreach(var n in names) {
            listView1.Items.Add(new {name1 = n});
        }

        foreach(var e in Emails) {
            listView1.Items.Add(new {email1 = e});
        }

    } 
```

这是解释发生了什么的图像，一切都应该在同一行。

![http://i.stack.imgur.com/4Uknl.png](../Images/0cd7b376293b0fb03843c5c013731df2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:17:55.523

您通过分别迭代每个集合来向 listView 添加 2 个不同的集合，因此很明显您将获得所看到的效果。

您需要创建一个具有 2 个属性的类，`name`然后`email`将其绑定`ListView`到此类。就像是：

```
public class Person
{
     public Person(string name,string email)
     { 
         Name=name;
         Email=email;
     }
     public string Name {get;set;}
     public string Email {get;set;}
}

List<Person> people = {new Person("name1","test1@gmail.com"
                      ,new Person("name2","test2@gmail.com"
                      ,new Person("name3","test3@gmail.com"
                      ,new Person("name4","test4@gmail.com")}; 
```

现在您可以像这样简单地绑定列表视图：

```
listView1.ItemsSource=people; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:13:05.640

您正在管理两个不同`List`的 ，并且您没有合并它们，您正在插入一个列表，然后插入另一个列表。

考虑到两个`List`具有相同数量的`Items`，您可以执行以下操作

```
for(int index = 0; index < names.Count;index++)
{
     listView1.Items.Add(new {email1 = Emails[index], name1 = names[index] });
} 
```

我不记得`List`语法和属性，所以如果这不起作用（或更好的选择）请编辑我

# android - 将“emma”添加到 Android ant build 会触发“局部变量类型不匹配”异常

> ID：12203826
> 
> 赞同：7
> 
> 时间：2012-08-30T19:10:27.857
> 
> 标签：android, ant, emma

我正在尝试在一个结合了 Java 和 C/JNI 代码的 Android 项目的测试中运行 Emma。构建和测试工作正常，但每当我添加时`emma`，我都会遇到一个神秘的异常。我正在使用 Android SDK v20.1 和 NDK r8b。

该项目在这里，它是一个 Android 库项目： [https](https://github.com/guardianproject/IOCipher) ://github.com/guardianproject/IOCipher ，测试在这里： [https ://github.com/guardianproject/IOCipherTests](https://github.com/guardianproject/IOCipherTests)

该`build.xml`文件是使用生成的`android update test-project`。`ant clean debug install test`每次运行都会`ant clean emma debug install test`触发异常：

这是一个例外：

```
-dex:
      [dex] Converting compiled files and external libraries into /var/lib/jenkins/workspace/IOCipherTests/IOCipherTests/bin/classes.dex...
       [dx] 
       [dx] EXCEPTION FROM SIMULATION:
       [dx] local variable type mismatch: attempt to set or access a value of type int using a local variable of type info.guardianproject.libcore.io.ErrnoException. This is symptomatic of .class transformation tools that ignore local variable information.
       [dx] 
       [dx] ...at bytecode offset 0000002e
       [dx] locals[0000]: Linfo/guardianproject/iocipher/File;
       [dx] locals[0001]: Linfo/guardianproject/iocipher/FileDescriptor;
       [dx] locals[0002]: <invalid>
       [dx] locals[0003]: <invalid>
       [dx] locals[0004]: <invalid>
       [dx] locals[0005]: [Z
       [dx] stack[top0]: int{0x00000001 / 1}
       [dx] ...while working on block 002c
       [dx] ...while working on method createNewFile:()Z
       [dx] ...while processing createNewFile ()Z
       [dx] ...while processing info/guardianproject/iocipher/File.class
       [dx] 
       [dx] 1 error; aborting
BUILD FAILED
/opt/android-sdk/tools/ant/build.xml:850: The following error occurred while executing this line:
/opt/android-sdk/tools/ant/build.xml:852: The following error occurred while executing this line:
/opt/android-sdk/tools/ant/build.xml:864: The following error occurred while executing this line:
/opt/android-sdk/tools/ant/build.xml:266: null returned: 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T18:22:19.520

我遇到了同样的错误。在我的项目中，我们在一个项目中有一个单元测试应用程序，它包装了另一个包含单元测试本身的项目。这两个项目都引用了我的 SDK，正如 chaitanya 所建议的那样，这导致 emma 两次检测 SDK 代码。通过删除单元测试项目中对 SDK 的引用，我能够解决该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T09:56:05.487

我从命令行构建了 Android APK 项目（没有 ant，但在 CMake 的一些帮助下。我想这在这里并不重要）我遇到了同样的错误，有两件事帮助了我：

1.  从[这里](http://www.netmite.com/android/mydroid/1.5/build/core/java.mk)，我得到的信息是*“如果您检测包含局部变量调试信息的类文件，艾玛无法正确维护局部变量表。当您尝试为 Android 转换类文件时，这将导致错误。解决方法为此，仅使用行和源调试信息而不是本地信息来编译 java 类。”* ，所以我在java编译器中添加了一个标志`-g:{lines,source}`

2.  我还将 Emma 类本身排除在检测之外。我的检测命令是`java -cp emma/emma_device.jar emma instr -ix -*.test.*,-com.google.android.*,-com.vladium.* -m overwrite -cp ${CMAKE_JAVA_TARGET_OUTPUT_DIR}`. 注意`-ix -com.vladium.*`参数，这不包括 Emma 类

# php - 在 Mongo 中读取/写入不同的副本集

> ID：12203830
> 
> 赞同：1
> 
> 时间：2012-08-30T19:10:40.807
> 
> 标签：php, mongodb

所以我喜欢使用单独的数据库来处理写入的想法（可以说 2 个写入数据库，然后每个可以有 3 个读取副本）。

```
 $mongo = new   Mongo("mongodb://localhost:27017",array('connect'=>true,'timeout'=>2000, 'persist'=>'test_mongodb_con','replicaSet'=>true)); 
```

并测试...

```
 $user = array('email'=>'test@test.com','firstname'=>'test','lastname'=>'user','twitter'=>'@test','time'=>date('m:i:s'));

    $mongo->test->testuser->insert($user);

    $cursor = $mongo->test->testuser->find()->slaveOkay(true); 
```

但是当 slaveOkay 为真时唯一的区别是标志键的值为 4 - 但它并没有告诉我它实际使用的是哪个数据库。由于 mongod 知道所有副本，因此我将它们放在不同的端口上是否重要？

我已经在这个主题上搜索了几个小时，但找不到任何可以完全回答我的问题的东西。我已经阅读了 php 文档、mongo 文档等……仍然很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:24:11.940

MongoDB 中的复制和分片是有区别的。

如果您使用复制，则只有一个节点正在接收写入 - 主节点。您的驱动程序连接到副本集，并且所有写入都转到单个主节点，无论它当时恰好是哪个节点。

如果要使用 MongoDB 在多个节点之间分配写入，则必须设置分片。通过分片，您的驱动程序将连接到路由器进程（“mongos”），该进程将自动将写入路由到集群中的正确节点。

复制用于持久性、故障转移、备份和（偶尔）读取扩展。

默认情况下，所有读取也会转到主节点。'slaveOK' 标志（已弃用以支持 Read Preference）允许读取转到辅助节点。这允许从主节点分配查询负载，代价是可能读取过时的数据。

如果没有 SlaveOK 标志，您可以保证读回您刚刚写入的数据（除非其他人从那时起对其进行了修改）。使用 SlaveOK 标志，没有这样的保证：辅助节点可能比主节点晚几秒、几分钟甚至几小时。

如果您想使用 MongoDB 进行写入扩展，则需要设置分片。

# api - 只为一位读者禁止操作链接？

> ID：12203834
> 
> 赞同：0
> 
> 时间：2012-08-30T19:11:09.450
> 
> 标签：api, facebook-opengraph

有没有办法只为新闻的一个“读者”抑制 action_link？

FB 文档（[https://developers.facebook.com/docs/opengraph/actionlinks/](https://developers.facebook.com/docs/opengraph/actionlinks/)）说

抑制动作链接

如果您在 App Dashboard 中配置了操作链接，则可以禁止显示特定故事的操作链接。要在发布操作时执行此操作，请输入 no_action_link=true。

如果用户 A 对用户 B 执行某项操作，从而生成故事和操作链接，则当用户 B 在用户 A 的提要中看到该内容时，在某些情况下他们不应该看到操作链接。该链接可能是 A 对 B 所做的事情，而 B 不能对 B 做的事情（喜欢或遵循例如）。也是 A 的朋友的用户 C 应该看到该链接，因为他们可能想对 B 做同样的事情。上面的文档说 action_link 可以完全禁止一个故事。有没有办法标记它，使它不显示给 B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:16:54.997

它在您链接的文档中 - 如果您在故事中提供 no_action_link，则该故事没有操作链接

没有办法让它不显示给某些用户，如果发生用户特定的逻辑，请在你的代码中处理它

# eventbrite - 场地_新“地址”参数，或“地址”？

> ID：12203837
> 
> 赞同：1
> 
> 时间：2012-08-30T19:11:09.890
> 
> 标签：eventbrite

参数是拼写“**地址**”还是“**地址**”？

这是 API 文档：http: [//developer.eventbrite.com/doc/venues/venue_new/](http://developer.eventbrite.com/doc/venues/venue_new/)

它在哪里说：

```
address    The venue adress (line 1). 
```

我问这个问题是因为我正在移植一些代码，看起来我们一直在使用“地址”，并且从查看各种 github 存储库来看，这似乎被认为是与此 API 相关的“不一致”变量命名问题之一.

*我知道拼写错误的参数有效。*

如果可以的话，我想正确使用 API，并且想使用“地址”并且只想确认它确实可以工作，并且“地址”只能向后兼容。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:25:24.777

好问题！

我修复了“地址”拼写错误，但仍允许使用此输入标签的旧拼写（以确保反词与现有应用程序兼容）。

我们没有任何计划放弃对旧的、拼写错误的属性名称的支持——但是，如果您正在重新访问旧代码，那么在您的最后修复拼写错误也没有什么坏处。

更改应有助于确保[场所对象](http://developer.eventbrite.com/doc/venues/)的模式/属性名称在输入和输出上保持一致。

# c++ - C++ 读/写二进制文件。在程序退出时它给出 System.AccessViolationException

> ID：12203842
> 
> 赞同：1
> 
> 时间：2012-08-30T19:11:42.740
> 
> 标签：c++, exception-handling, c++-cli, binaryfiles

这个 C++ 程序是使用 Visual Studio 2010 创建的。这是一个让课堂上的每个人都难过的小组项目。
该程序最初启动良好，用户可以运行该程序并添加写入文件的项目。项目被读回并显示。
当用户完成后，在程序退出`return 0;`时它给我“发生了 System.AccessViolationException 类型的未处理异常。尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”
发生这种情况时，它会在此处打开一个名为实用程序的文件 => for (_Iterator_base12 **_Pnext = &_Myproxy->_Myfirstiter; *_Pnext != 0; *_Pnext = (*_Pnext)->_Mynextiter) (*_Pnext)->_Myproxy = 0.
我可以通过替换来解决这个`return 0;`问题`exit(0);`
我知道这不是一个真正的解决方案，只是导致此问题的弹孔上的创可贴。
在*修复*（在这里非常松散地使用）之后，然后再次运行程序，它会尝试从文件系统加载数据文件。它正确读取第一项并将其加载到向量中，但是当它返回循环开始时，我们看到弹出相同的异常，发生了 System.AccessViolationException 类型的未处理异常。
这是我们使用 fstream 和二进制 i/o 开展的第一个项目。我们已经完成了一个类似的程序，该程序只是读取和写入字符串而没有任何问题。
我相信这个问题源于 fileHandler 类中的某些东西，但我很难确定是什么导致了这个问题。
非常感谢任何建议/帮助。

这是代码。

*标准数据文件*

```
// stdafx.h : include file for standard system include files,
// or project specific include files that are used frequently, but
// are changed infrequently
//
#pragma once

#include <stdio.h>
#include <iostream>
#include <stdlib.h>
#include <sstream>
#include <fstream>
#include <string.h>
#include <string>
#include <vector>
#include <time.h> 
```

*Week2.cpp* （项目的主文件）

```
//Week2.cpp *******************

#include "stdafx.h"
#include "fileHandler.h"

using namespace std;
using namespace System;

int main(array<System::String ^> ^args)
{   

fileHandler theFile("store.pkl");
vector<item> itemStack = theFile.getFile();

cout << "SKU  Name  Dept  Vendor    Max Order onHand" << endl;
cout << "-------------------------------------------" << endl;
for (int i = 0; i < itemStack.size(); i++)
{
    cout << itemStack[i].toString() << endl;
}
vector<item> newStack;

//prompt for input
bool doneEditing = false;

while(!doneEditing)
{
    int A;
    int E;
    int F;
    int G;
    string B;
    string C;
    string D;
    string tempString;
    cout << "Enter item info:" << endl << "Item SKU: ";
    cin >> A;
    cout << endl << "Item Name: ";
    cin >> B;
    cout << endl << "Item Dept: ";
    cin >> C;
    cout << endl << "Vendor Name: ";
    cin >> D;
    cout << endl << "Max Number: ";
    cin >> E;
    cout << endl << "Reorder Number: ";
    cin >> F;
    cout << endl << "OnHand Number: ";
    cin >> G;
    cout << endl << "Done?? Y/N: ";
    cin >> tempString;
    cout << endl;

    item tempItem = item(A, B, C, D, E, F, G);
    newStack.push_back(tempItem);

    if (tempString == "Y" || tempString == "y")
    {
        doneEditing = true;
    }
    }
    cout << "Saving stack to file" << endl;
    theFile.putFile(newStack);
    cout << "Items written to file" << endl;

    vector<item> newFileStack = theFile.getFile();

    cout << "After reload: " << endl;
    cout << "SKU  Name  Dept  Vendor    Max Order onHand" << endl;
    cout << "-------------------------------------------" << endl;
    for (int i = 0; i < newFileStack.size(); i++)
    {
    cout << newFileStack[i].toString() << endl;
    }

    cout << "Thank you for using the Awesome Grocery Inventory Application" << endl;

    system("PAUSE");
    /*return 0;   this breaks with same error as 
                  when reading in saved file after application restart 
                  */
    exit(0);
} 
```

*项目.h*

```
using namespace std;

#pragma once
class item
{
public:
item();
item(int sku, string name, string dept, string vendor, int max, int reorder, int onhand);
~item(void);
string toString();

int ItemSKU() const;
void ItemSKU(int val);
string ItemName() const;
void ItemName(string val);
string VendorName() const;
void VendorName(string val);
int MaxNumb() const;
void MaxNumb(int val);
int ReorderNumb() const;
void ReorderNumb(int val);
int OnHandNumb() const;
void OnHandNumb(int val);

private:
int itemSKU;
string itemName;
string itemDept;
string vendorName;
int maxNumb;
int reorderNumb;
int onHandNumb;
}; 
```

*项目.cpp*

```
#include "StdAfx.h"
#include "item.h"

using namespace std;

item::item()
{

};
item::item(int sku, string name, string dept, string vendor, int max, int reorder, int onhand)
{
itemSKU = sku;
itemName = name;
itemDept = dept;
vendorName = vendor;
maxNumb = max;
reorderNumb = reorder;
onHandNumb = onhand;
}

item::~item(void)
{
}

string item::toString()
{
stringstream ss;
ss << itemSKU << "\t" << itemName << "\t" << itemDept << "\t" << vendorName << "\t" << maxNumb << "\t" << reorderNumb << "\t" << onHandNumb;
string s = ss.str();
return s;
}

int item::ItemSKU() const { return itemSKU; }
void item::ItemSKU(int val) { itemSKU = val; }

string item::ItemName() const { return itemName; }
void item::ItemName(string val) { itemName = val; }

string item::VendorName() const { return vendorName; }
void item::VendorName(string val) { vendorName = val; }

int item::MaxNumb() const { return maxNumb; }
void item::MaxNumb(int val) { maxNumb = val; }

int item::ReorderNumb() const { return reorderNumb; }
void item::ReorderNumb(int val) { reorderNumb = val; }

int item::OnHandNumb() const { return onHandNumb; }
void item::OnHandNumb(int val) { onHandNumb = val; } 
```

*文件处理程序.h*

```
#include "item.h"

using namespace std;

#pragma once
class fileHandler
{
public:
fileHandler(string);
~fileHandler(void);

vector<item> getFile();
void putFile(vector<item> &);

private:
string theFileName;
}; 
```

*文件处理程序.cpp*

```
#include "stdafx.h"
#include "fileHandler.h"

using namespace std;

fileHandler::fileHandler(string name)
{
theFileName = name.c_str();
}

fileHandler::~fileHandler(void)
{
}

vector<item> fileHandler::getFile()
{
ifstream inFile;
string fileLine;
vector<item> localStack;

inFile.open(theFileName, ios::in|ios::binary);
if (inFile)
{
    cout << "Getting file..." << endl;
    cout << endl;
    // not working on initial load if file is present at start
    inFile.seekg(0);
    while(!inFile.eof())
    {
        item tempItem;
        inFile.read(reinterpret_cast< char * >(&tempItem), sizeof(item));
        localStack.push_back(tempItem);
        cout << "item added to stack" << endl;
    } //breaks from here after reading in 1 item from saved file on reopen
} else {
    ofstream newFile;
    newFile.open(theFileName, ios::out|ios::binary);
    newFile.close();
    cout << "Creating new file..." << endl;
    cout << endl;
    inFile.open(theFileName, ios::in|ios::binary);
}
inFile.clear();
inFile.close();
if (localStack.size() > 0)
{
    //removes some dirty data from end of stack
    localStack.pop_back();
}
return localStack;
}

void fileHandler::putFile( vector<item> &items )
{
ofstream outFile;
outFile.open(theFileName, ios::out|ios::binary);
if(!outFile)
{
    cerr<<"File could not be created"<<endl;
    system("pause");
    exit(1);
}
for (int i = 0; i < items.size(); i++)
{

    outFile.write(reinterpret_cast<const char *>(&items[i]), sizeof(item));
}
outFile.clear();
outFile.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:40:20.930

您不能以这种方式对包含`std::string`成员的对象执行二进制 I/O。A`std::string`包含指向为其实际内容动态分配的内存的指针。您需要改为执行某种类型的[序列化](http://en.wikipedia.org/wiki/Serialization)。通常的建议是[Boost serialization](http://www.boost.org/libs/serialization/)。

# jquery - 需要预加载背景图像的方法

> ID：12203844
> 
> 赞同：0
> 
> 时间：2012-08-30T19:12:03.650
> 
> 标签：jquery, ajax, preloading

我需要一种通过 vanilla JS 或 jQuery 预加载背景图像的方法。我用的是纯CSS3 bg图库，就是一个普通的ul，每个li代表完整的bg图片。

没有 img 标签，每个 li 使用 css background-image 属性。我有四个画廊，每个画廊都由 AJAX 应要求加载。

如果有人可以指出一些例子，或者一些脚本可以帮助我为每个画廊预加载图像，那么当画廊被加载时，图像已经被预加载。

[您可以在http://www.madebym.net/test/index.html](http://www.madebym.net/test/index.html)看到测试站点

只有第一组链接有效，每个链接都指向新画廊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:14:20.040

我有一个全局实用程序函数，用于处理任何图像预加载（您可以将图像数组传递给它）。

```
 $.preloadImages = function () {
        for (var i = 0; i < arguments.length; i++) {
            $('<img>').attr('src', arguments[i]);
            // For testing purposes: 
            //console.log('\n\u2713 Successfully Preloaded Image :: ');
            //console.log($('<img>').attr('src', arguments[i]));
        }
    } 
```

用途是：

```
 $.preloadImages('test.jpg', 'test2.jpg'); // put all your images in there 
```

但基本上你只是在创建一个空白`$('img')`。希望有帮助！

# visual-studio-2010 - 如何使 VisualStudio ApplicationSetting 的默认值成为有条件的？

> ID：12203846
> 
> 赞同：1
> 
> 时间：2012-08-30T19:12:09.260
> 
> 标签：visual-studio-2010, visual-studio

我在 Visual Studio 2010 中有一个使用多个应用程序设置的 C# 应用程序。对于其中之一，我希望它的默认值是有条件的，这取决于 C# 应用程序是以 32 位还是 64 位运行的。这样，如果用户手动为设置分配一个值，它将被持久化，否则我们代表用户选择一个合适的值。

很明显，我可以在数值数据网格单元格中设置设置类型的值。但是有没有办法使用条件，以便根据特定逻辑选择默认值？

# jquery - .show() 事件（不带参数）是否立即发生？

> ID：12203853
> 
> 赞同：0
> 
> 时间：2012-08-30T19:12:54.757
> 
> 标签：jquery

如果我想在 .show() 事件（没有参数和回调的事件）之后发生某些事情，
我需要添加回调函数，还是同步事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:16:35.387

从[文档](http://api.jquery.com/show/)：

> 匹配的元素将立即显示，没有动画。这大致相当于调用 .css('display', 'block')，除了 display 属性恢复到最初的样子。

因此 div 或其他内容会立即显示。但是如果在 show 方法之后更改它，您可能会看到一些旧内容。通常你想在`.show()`编辑完元素后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:20:20.440

是的，它确实。show() 表示它将添加到您的标签 style="display: block;" 或“显示：内联块”或其他取决于标签类型

如果您调用 hide() 它将设置为您的标签 style="display: none;"

# python - 为什么通过 URL 访问 python 文件会产生 500 错误？

> ID：12203857
> 
> 赞同：0
> 
> 时间：2012-08-30T19:13:09.603
> 
> 标签：python, webserver

我想让我的一群朋友下载一个 Python 文件，所以我把它放在我的 Apache Web 服务器上，并告诉我朋友们去“http://mydomain.com/someDjangoModels.py”。

但是，转到“http://mydomain.com/someDjangoModels.py”会产生错误 500。为什么？文件“mySecretPythonFile.py”被修改为 777。

Apache 错误日志输出以下内容：

```
[Thu Aug 30 12:04:54 2012] [error] [client 71.14.78.236] Premature end of script headers: someDjangoModels.py
[Thu Aug 30 12:05:35 2012] [error] [client 71.14.78.236] Premature end of script headers: someDjangoModels.py
[Thu Aug 30 12:05:50 2012] [error] [client 71.14.78.236] Premature end of script headers: someDjangoModels.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:16:20.720

听起来网络服务器正在尝试执行文件而不是下载它。

建议：

1.  尝试 chmoding 到 666，使其不被视为可执行文件
2.  尝试从 .py 更改扩展名，这样它就不会认为它的 python 脚本

# mysql - MySQL 触发器无法更新表 - 获取错误 1442

> ID：12203859
> 
> 赞同：11
> 
> 时间：2012-08-30T19:13:12.677
> 
> 标签：mysql

我有以下触发器：

```
CREATE TRIGGER sum
AFTER INSERT
ON news
FOR EACH ROW
UPDATE news SET NEW.sum = (NEW.int_views + NEW.ext_views)/NEW.pageviews 
```

`int_views`它将表格的和列相加，`ext_views`然后将它们除以总浏览量。

每当我尝试向新闻添加新行时，都会收到以下错误：

```
ERROR 1442 (HY000) at line 3: Can't update table 'news' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

触发器对我来说似乎很简单。触发器无法运行是否有原因？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T19:22:39.670

**症状**是，您正在触发器内运行`UPDATE`（对于所有行）`INSERT`- 两者都修改表，这是不允许的。

也就是说，如果我猜对了您的触发器的意图，您不想更新**所有**行，而只想更新新插入的行。您可以通过以下方式轻松实现

```
CREATE TRIGGER sum
BEFORE INSERT
ON news
FOR EACH ROW
SET NEW.sum = (NEW.int_views + NEW.ext_views)/NEW.pageviews 
```

请注意，这是一个`BEFORE INSERT`触发器，因为您想在将行写入表之前对其进行更改。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-22T08:54:05.760

如果您尝试在导致触发器触发的同一个表上更新/插入，请不要使用常用`sql`命令，例如

```
-> UPDATE TABLE_NAME SET COLUMN_NAME = VALUE WHERE CONDITION_LIST;  
-> INSERT INTO TABLE_NAME VALUES("VALUE1","VALUE2"); 
```

这行不通。仅使用 set 来分配您更新的列的值。

例子：

```
CREATE TRIGGER trigger_name BEFORE/AFTER INSERT/UPDATE ON table_name
FOR EACH ROW
SET NEW.COLUMN_NAME = "VALUE"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T11:38:57.370

我处于类似的情况，我必须运行两个触发器：

1.  更新插入新行的 3 个字段
2.  更新行上的更新 3 个字段

经过大量的努力，我终于能够用以下方式编写TRIGGER：

**FOR 更新 INSERT 上的值**

```
CREATE TRIGGER `INSERT_DISCOUNT_SERVICES` BEFORE INSERT ON `services`
FOR EACH ROW SET 
NEW.discount_5_rate = (NEW.ndis_rate*0.05),
NEW.discount_10_rate=(NEW.ndis_rate*0.10),
NEW.discount_15_rate=(NEW.ndis_rate*0.15) 
```

相似地

**FOR 在 UPDATE 上更新值**

```
CREATE TRIGGER `UPDATE_DISCOUNTS_SERVICES` BEFORE UPDATE ON `services`
FOR EACH ROW SET 
NEW.discount_5_rate = (NEW.ndis_rate*0.05), 
NEW.discount_10_rate=(NEW.ndis_rate*0.10),
NEW.discount_15_rate=(NEW.ndis_rate*0.15) 
```

# ruby-on-rails - 当内部的 if 语句为假时，Ruby 退出我的每个循环

> ID：12203866
> 
> 赞同：0
> 
> 时间：2012-08-30T19:13:28.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

为什么一旦 if 语句“g2k.has_key?(k)”为*假，下面的代码就会退出每个循环*

```
 e.element_children.all? do |n|
    k = n.name.to_sym
    logger.info("#{n.name} as symbol is '#{k}' is valid? = #{g2k.has_key?(k)}")
    if g2k.has_key?(k)
      logger.info("#{g2k[k] }= #{n.content}")
    #  @vehicle_data[g2k[k]] = n.content
    end
  end 
```

这会按预期循环遍历所有元素子元素

```
 e.element_children.all? do |n|
    k = n.name.to_sym
    logger.info("#{n.name} as symbol is '#{k}' is valid? = #{g2k.has_key?(k)}")
    #if g2k.has_key?(k)
    #  logger.info("#{g2k[k] }= #{n.content}")
    #  @vehicle_data[g2k[k]] = n.content
    #end
  end 
```

我正在使用带有 Ruy 1.9 的 rails 3.2，使用 nokogiri 解析 XML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:20:42.437

一旦`all?`发现一些错误的东西，那么它不可能是全部，所以它将停止处理。

这是一个示例：[http](http://rubyfiddle.com/riddles/cb777) ://rubyfiddle.com/riddles/cb777 ---您会看到它在打印 5 后停止，因为 5 不是 < 5

```
(1..20).all? do |i|
  puts i
  i < 5
end

# prints:
1 
2 
3 
4 
5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:13:35.630

除非您正在捕获 .all 的输出？方法你不应该使用它。。全部？用于确保数组中的每个元素都返回 true。.each 只会遍历所有这些。.detect 将迭代直到返回 true。

# javascript - 为什么我的 jquery 选择所有文本值

> ID：12203869
> 
> 赞同：1
> 
> 时间：2012-08-30T19:13:54.413
> 
> 标签：javascript, jquery

因此，我希望能够从表格单元格中获取一个数字并将其乘以 focusout 上的输入，但是选择器正在抓取所有名称为 front 的表格单元格。这是代码：

jQuery

```
$(document).ready(function(){
    $(".percent").focusout(function(){
        var val2 = $(this).val();
        if (val2==="") {
            val2=0;
        }
        var crew2 = $(this).attr("name"),
            front = $(".front, td[name='front"+crew2+"']").text();
        console.log(crew2);
        console.log(front);
    });
}); 
```

html:

```
<tr>
    <td class='front' name='frontI210'>$176.00</td>
    <td><input type='text' class='percent' name='I210' style='' size='4' /></td>
    <td>=</td>
    <td class='total' id='I210'></td>
</tr>
<tr>
    <td class='front' name='frontI250'>$225.00</td>
    <td><input type='text' class='percent' name='I250' style='' size='4' /></td>
    <td>=</td>
    <td class='total' id='I250'></td>
</tr> 
```

并且 console.log(front) 正在返回 fronti210 和 fronti250 的所有文本，如下所示：

```
$176.00$225.00 
```

我只想从与我刚刚完成的输入字段名称匹配的表格单元格中接收信息，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T19:17:00.830

`$(".front, td[name='front"+crew2+"']")`搜索所有带有 class 的元素`front`以及所有`td`带有`name` `frontXXX`. 逗号是[*多重选择器* ^([docs])](http://api.jquery.com/multiple-selector/)。

要么只搜索`td`具有该名称的元素：

```
var front = $("td[name='front"+crew2+"']").text(); 
```

或使用 DOM 遍历：

```
var front = $(this).closest('tr').children('.front').text(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:18:01.657

```
$(".front, td[name='front"+crew2+"']").text();
//this___^ is the culprit. 
```

逗号基本上是说我想要类的`front`所有元素和具有指定名称的所有 td 元素。

你想要的可能是：

```
$("td[name='front"+crew2+"'].front").text(); 
```

以为我还没有测试过，语法可能略有偏差。

# c# - 计算 switch 语句中的 case 数

> ID：12203872
> 
> 赞同：4
> 
> 时间：2012-08-30T19:14:10.777
> 
> 标签：c#, switch-statement, counting

我想要一个 C# 方法来计算 switch 语句中的案例数。（我们称之为`CaseCounter`）。例如，假设您有这个枚举和这两种方法：

```
enum Painter  
{  
    Rubens,  
    Rembrandt,  
    Vermeer,
    Picasso,
    Kandinsky
}

int GetYearOfBirth(Painter painter)
{
    switch(painter)
    {
        case Painter.Kandinsky:
            return 1866;    
        case Painter.Picasso:
            return 1881;
        case Painter.Rembrandt:
            return 1606;
        case Painter.Rubens:
            return 1577;
        case Painter.Vermeer:
            return 1632;
        default:
            return 0;
    }
}

bool IsModern(Painter painter)
{
    switch (painter)
    {
        case Painter.Kandinsky:
        case Painter.Picasso:
            return true;
        default:
            return false;
     }
} 
```

现在以下等式应该成立：

```
CaseCounter("GetYearOfBirth") == 5
CaseCounter("IsModern") == 2 
```

（是否在计数中包含默认情况并不重要。此外，参数 to`CaseCounter`不需要是字符串；任何可以以某种方式用于表示方法的类型都可以。）

那么，您将如何实施`CaseCounter`？甚至可能吗？

--- 附录（编辑） ---

如果您想知道我为什么问这个问题，这里有一些背景信息。

我正在维护一个代码库，其中包含许多打开枚举的方法。这些方法分布在各个类中；当枚举扩展时（例如，当您添加一个新的`Painter`）时，这会使生活变得困难。为了使维护更容易一些，我编写了一些如下形式的单元测试：

```
// If this test fails please check that the following methods are still OK: 
// MyClass.GetYearOfBirth, MyOtherClass.IsModernAllCases . 
// (There is no guarantee that the above list is up-to-date or complete.)
[Test]
public void PainterCountTest()
{
    int numberOfMembers = Enum.GetValues(typeof(NotificationID)).Length;
    Assert.AreEqual(5, numberOfMembers);
} 
```

（在这个例子中，`IsModernAllCases`只是一个变体，它明确地引用了枚举`IsModern`的所有 5 个可能值。）`Painter`

这个测试总比没有好，但它很笨拙。如果你能写这样的东西，那就不会那么笨拙了：

```
[Test]
public void PainterCountTest()
{
    int numberOfMembers = Enum.GetValues(typeof(NotificationID)).Length;

    int numberOfCases_getYearOfBirth = CaseCounter("MyClass.GetYearOfBirth");
    Assert.AreEqual(numberOfCases_getYearOfBirth, numberOfMembers);

    int numberOfCases_modern = CaseCounter("MyOtherClass.IsModernAllCases");
    Assert.AreEqual(numberOfCases_modern, numberOfMembers);
} 
```

在这种情况下，至少您在扩展枚举时不必修改单元测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:18:20.283

应该可以使用[Roslyn CTP](http://blogs.msdn.com/b/visualstudio/archive/2012/06/05/announcing-microsoft-roslyn-june-2012-ctp.aspx) - Microsoft 的编译器即服务预发布产品。它具有 API，可让您检查 C# 代码并将其表示为指令树。不幸的是，它是一个 CTP，对您来说可能是也可能不是问题 - 如果您尝试使用它，请记住它是预发布软件。

如果您不能使用 Roslyn，我认为唯一的方法是检查生成的 IL。至少可以说，这是一项艰巨的任务。我没有任何示例代码，但如果你想尝试一下——我会先看看[Cecil](http://www.mono-project.com/Cecil) Mono 项目，它有一些用于检查 IL 的 API。

您也`MethodInfo.GetMethodBody`可以获取原始 IL 字节，然后自己解析这些字节，但这确实需要一些工作。

另外，请参阅[此相关问题](https://stackoverflow.com/questions/2693881/c-sharp-can-i-use-reflection-to-inspect-the-code-in-a-method)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:17:43.920

这不能通过反射完成，但可以通过[Roslyn CTP](http://msdn.microsoft.com/en-us/vstudio/hh543936)完成。Roslyn 提供了分析源代码本身并确定有关它的信息所需的工具。您可以遍历此代码中的树以查找包含 switch 语句的方法，并对个别情况进行计数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T19:31:55.673

在不知道您为什么这样做的情况下，很难知道这是否是您可以接受的方法。

Since these C# files are basically just text files on your computer, you could create a separate application that loops through all the files. It would need to recognize methods, count the number of occurrences of `case` words (that aren't comments), and report the results.

Now, if you need this functionality to run at runtime, within your app, then this approach won't work.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:32:05.263

make a find search in visual studio on your case word it is enough to make your refactoring

# jquery - 如何在 JS/Jquery 中获取带有 window.location.pathname 的 if 语句，以便在路径名之后不包含任何内容？

> ID：12203876
> 
> 赞同：1
> 
> 时间：2012-08-30T19:14:20.100
> 
> 标签：jquery

我正在尝试获取此 URL“http://www.example.com/womens-collection/ceramic ”以**重定向**到 URL“http://www.example.com/the-ceramic”。下面是代码

```
 if(window.location.pathname == "/womens-collection/ceramic") {
   //alert("worked");
   document.location = "/the-ceramic";
   //$('#jbw-spot-mobile_details').toggleClass('opened')} 
```

工作正常，但我不希望任何其他产品 URL 受此影响，例如“http://www.example.com/womens-collection **/ceramic?page=shop.product_details** ”

我怎样才能让 jquery 只识别“/womens-collection/ceramic”而不是之后的任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:21:29.003

```
regex = /(/womens-collection/ceramic)$/i; // Using the i flag for case insensitivity. Feel free to remove if you want.
path = window.location.pathname;
if (path.match(regex)) {
   // Do stuff.
} 
```

只需使用正则表达式匹配路径的*末尾*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:17:30.567

[window.location.search](http://www.w3schools.com/jsref/prop_loc_search.asp)返回 QS 部分。

```
if(window.location.pathname == "/womens-collection/ceramic")
{
    if(!window.location.search)
    {
        // do your thing
    }
} 
```

# c++ - 如何存储由 std::unique_ptr 给出的抽象类对象的向量？

> ID：12203878
> 
> 赞同：5
> 
> 时间：2012-08-30T19:14:21.400
> 
> 标签：c++, c++11, abstract-class, stdvector

我有一个循环，我使用一个函数将 std::unique_ptr 返回到抽象类的对象。我想通过 push_back 将这些对象存储到 std::vector 中。但由于对象是抽象类型的，我得到以下错误：

```
error: cannot allocate an object of abstract type 
```

为线

```
 cells.push_back(std::move(*cell)); 
```

其中单元格是`std::vector`抽象类型并且`cell`是类型

```
std::unique_ptr<AbstractType>&& cell 
```

（我实际上传递`cell`给一个处理程序类）我知道一个人不能实例化一个抽象类型，并且当我理解 std:move 运算符时，它需要以某种方式实例化对象吗？

谁能帮我解决这个问题？还是该函数（不是我的项目的一部分）不应该返回指向抽象类型对象的唯一指针？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T19:54:20.580

您不能将`AbstractType`元素直接存储在`std::vector`. 您可以简单地将`unique_ptr`s 本身存储在`std::vector<std::unique_ptr<AbstractType>>`with 中`cells.push_back(std::move(cell))`。

# .net - 在这种情况下我应该使用锁来防止 WCF 死锁吗？

> ID：12203889
> 
> 赞同：0
> 
> 时间：2012-08-30T19:15:03.957
> 
> 标签：.net, wcf, duplex

我有一个 WCF 双工服务，带有一个名为 GetList 的 2 路方法，以及一个单路回调方法 ItemUpdated。

我在以下情况下检测到死锁：

1.  服务调用 ItemUpdated 回调，该回调在客户端由 OnItemUpdated 方法处理。
2.  在上一个方法返回之前，一些用户交互导致客户端调用服务上的 GetList。

我可以将我的服务的 ConcurrencyMode 设置为 Reentrant，但这不是我需要的。我需要确保我的客户端在调用 GetList 之前没有处理来自服务的任何回调。

所以我可以同步锁定一个对象以确保不会发生这种情况。那是我更好的选择吗？

# 更新：

只是为了澄清我当前的设计是什么，我的服务实际上是一个 Windows 服务，它按计划对对象列表进行一些处理，当每个项目被更新时，它会引发事件 ItemUpdated。此服务有一个 WCF 服务外观，它允许一个或多个控制台（客户端）订阅其事件并查看服务中发生的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:23:27.027

InstanceContextMode = Single 与 ConcurrencyMode = Single 一起导致 WCF 序列化对单个实例的所有调用。换句话说，WCF 创建了一个锁来强制执行序列化。这就是死锁的原因。添加另一个锁可能会起作用。但是您提出了客户端锁定...*客户端不必更改其线程行为以防止服务死锁。该服务需要比这更强大*。

这是一个服务问题。您应该创建一个更强大的服务。

我建议更改服务以删除序列化并完全防止死锁的可能性。我的建议（为了我会尝试）：

1.  **将服务的 InstanceContextMode 更改为 PerCall。**“首选”设计是让服务无状态。为每个调用创建不同的服务实例可以消除强制序列化。将所有状态信息存储在公共存储中（例如数据库或缓存）。

2.  **Have the service make the ItemUpdated callback on a different thread.** This allows the service thread to complete before the callback is done. The problem with this solution is that if the ItemUpdated callback throws an exception the service is no longer waiting to catch and handle it. This means good error handling is harder.

See [Discover Mighty Instance Management Techniques For Developing WCF Apps](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx) for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:58:09.370

The problem was not really on the service but on the callback handler in my client. This is basically what was happening:

1.  My service raises an event that calls ItemUpdated on the client.
2.  While the callback is still processing ItemUpdated, the user forces GetList to be executed.
3.  The service receives the request and sends back the result of GetList, but my client cannot process the response from the service because it is already processing another callback.

So I ended up changing the ConcurrencyMode in the callback using the CallbackBehavior attribute. The service remains with ConcurrencyMode = Single.

# ruby - 如何为指向父目录中某个位置的 Guardfile 指定输入？

> ID：12203890
> 
> 赞同：1
> 
> 时间：2012-08-30T19:15:07.773
> 
> 标签：ruby, guard

我有一个包含以下行的 Guardfile：

```
guard 'coffeescript', :input => 'js', :output => 'js/compiled' 
```

这很好用，但是当我将保护文件放在它自己的目录中然后将行更改为：

```
guard 'coffeescript', :input => '../js', :output => '../js/compiled' 
```

它无法检测到 js 中的任何更改。为什么找不到js？我的路径符号有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:15:33.063

您必须通过键入从基目录运行 Guard

```
guard --guardfile my_subdirectory/Guardfile 
```

或者

```
guard -G my_subdirectory/Guardfile 
```

并使用您的第二个 Guardfile。Guard 似乎只能看到您启动它的目录下的文件。（这是有道理的，因为否则它必须监视整个文件系统）

# android - 方向更改时列表片段中的列表视图行重复

> ID：12203891
> 
> 赞同：9
> 
> 时间：2012-08-30T19:15:17.820
> 
> 标签：android, android-listview, android-listfragment

我有一个 ListFragment，我在其中使用自定义适配器来填充列表视图。一切都很好，直到我改变方向和滚动。然后它看起来像这样： ![一些方向更改后的 ListView](../Images/2492c1cd7bc1575bcb17dd2451cacec0.png)

我猜这与我摸索视图持有者有关，但我现在无法访问代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T10:16:14.940

重叠片段的原因是我使用了 FrameLayout 并使用 FragmentTransition.add(...) 添加了片段。当我将 .add() 更改为 .replace() 时，旧片段被删除并添加了新片段，我的问题就解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:06:53.090

我有类似的问题，据此我正在告诉解决方案：-您得到了这种模糊，因为每次在方向更改时都会在某个地方创建新的 listfragment 实例（可能是在 oncreate() 中），因此您必须只做列表片段的实例一次并且在方向更改时替换该片段而不是再次添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:24:08.343

除非您包含此方法，否则更改方向会导致 onCreate 重新启动

```
public void onConfigurationChanged(Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);
} 
```

并将其放在清单的活动部分

```
android:configChanges="orientation" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-07T10:07:35.340

检查这是第一次调用 onCreate()，换句话说，确定回调是否不是由于屏幕旋转。

```
protected void onCreate(Bundle savedInstanceState) {
        if(savedInstanceState == null) {
    // transition.add(Your fragment,...)
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-20T06:10:09.187

我有同样的问题，它是因为 FrameLayout 的使用，首先你必须检查你的片段是否已经添加到活动中：

```
String TagName = "F"; 
```

> **添加没有 UI**的 Fragment 如果以后想从 Activity 中获取 Fragment，则需要使用 findFragmentByTag()。“谷歌” [http://developer.android.com/guide/components/fragments.html#Adding](http://developer.android.com/guide/components/fragments.html#Adding)

```
Fragement F = getFragmentManager().findFragmentByTag(TagName); 
```

然后检查

```
if(F == null) {
  F = new F();
  getFragmentManager()
     .beginTransaction()
     .add(R.id.container, F, TagName)
     .commit();
} 
```

这里的目标是避免添加或创建片段的新实例，这些实例在配置更改期间持续存在，这在使用 FrameLayout 作为容器时会导致问题。

解决方案 2（简单）：您唯一需要做的就是将您的容器更改为 ex:LinearLayout ，仅此而已。但在我看来，这不是最好的解决方案，因为片段有多个实例。

希望这有帮助；

# maven-2 - yuicompressor-maven-plugin 未绑定到进程资源

> ID：12203892
> 
> 赞同：2
> 
> 时间：2012-08-30T19:15:21.177
> 
> 标签：maven-2, pom.xml, yui-compressor

我一直在试图弄清楚为什么 yuicompressor-maven-plugin 在“mvn package”期间没有执行。我可以在下面链接中描述的独立任务中执行它，但不知何故，插件不会从 Maven 生命周期中调用。

[http://davidb.github.com/yuicompressor-maven-plugin/usage_compress.html](http://davidb.github.com/yuicompressor-maven-plugin/usage_compress.html)

这是我使用的示例 pom.xml，

```
 <build>
    <pluginManagement>
      <plugins>
     <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           <configuration>
         <source>1.6</source>
         <target>1.6</target>
           </configuration>
     </plugin>

    <!-- yuicompressor-maven-plugin -->
        <plugin>
          <groupId>net.alchim31.maven</groupId>
          <artifactId>yuicompressor-maven-plugin</artifactId>
          <version>1.3.0</version>
          <executions>
            <execution>
              <id>compress</id>
              <phase>process-resources</phase>
              <goals>
                <goal>compress</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <linebreakpos>-1</linebreakpos>
            <encoding>UTF-8</encoding>
            <nosuffix>true</nosuffix>
            <force>true</force>
            <jswarn>false</jswarn>
            <webappDirectory>${project.build.directory}/minified</webappDirectory>
            <aggregations>
              <aggregation>
                    <insertNewLine>true</insertNewLine>
                <output>${project.build.directory}/${project.build.finalName}/js/abc-min.js</output>
                <includes>
                  <include>${basedir}/src/main/webapp/js/comments.txt</include>
                  <include>${project.build.directory}/minified/js/def.js</include>
                </includes>
              </aggregation>              
            </aggregations>
          </configuration>
        </plugin>       

        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-war-plugin</artifactId>
          <version>2.2</version>
          <configuration>
            <warSourceExcludes>js/**/*.js,js/**/*.txt,css/**/*.css,css/**/*.txt</warSourceExcludes>
          </configuration>
        </plugin>       

      </plugins>
    </pluginManagement>
  </build> 
```

我读过类似的帖子，但无法弄清楚为什么它不受“流程资源”的限制。Phase 和 Goal 是明确设置的，所以不确定为什么不调用它。有没有办法调试为什么在“mvn package”期间不调用 yuicompressor-maven-plugin？我使用 Maven 2.2.1。也许我的 Maven 版本不适用于插件？

感谢您的帮助，

山市

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:03:39.237

您只需要将 pluginManagement 区域的运行结果放入通常的插件区域，例如：

```
<build>
  <plugins>
    <plugin>
      <groupId>net.alchim31.maven</groupId>
      <artifactId>yuicompressor-maven-plugin</artifactId>
      <version>1.3.0</version>
      ....
    </plugin>
  </plugins>
</build> 
```

在 pluginManagement 中，您仅定义插件的默认值，特别是版本，但您实际上并不一定要真正执行。对于其他插件等，这会导致它们已经在 supoer pom 的构建区域中定义，因此这使您有机会通过 pluginManagement 重新定义它们，但不能使用从未属于任何构建区域的插件。

# c# - Windows 8 应用程序中的 MarkdownSharp 错误

> ID：12203894
> 
> 赞同：1
> 
> 时间：2012-08-30T19:15:32.217
> 
> 标签：c#, .net, windows-8, markdownsharp

我试图在 Windows 8 应用程序中使用 MardownSharp。但是我在 Mardown.cs 文件中遇到了错误。它没有`System.Configuration`和`RegexOptions.Compiled`。

![Markdown.cs 错误](../Images/6d8c1fabb4de617e6a12b55ddb08fbbb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:06:47.143

你这里有两个问题。

1.  System.Configuration 不是[Windows 应用商店应用程序可用的 .NET 命名空间之一](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)。好消息是它似乎只用于 Markdown 类的重载构造函数之一：

    > 公共 Markdown(bool loadOptionsFromConfigFile)

    注释掉该构造函数（和 using 语句）。您可以重写该构造函数以使用应用程序本地存储，这将允许与配置文件类似的功能，但不具有完全相同的实现。我怀疑您可能无论如何都没有使用该重载

2.  该代码大量使用了正则表达式的[Compiled](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)标志，这在此上下文中也不支持。您应该能够安全地删除对该标志的所有引用。

通过这些修改，我至少能够编译代码，我没有更进一步。

# database - 重度与轻量查询

> ID：12203895
> 
> 赞同：2
> 
> 时间：2012-08-30T19:15:32.837
> 
> 标签：database, performance

当您有一个应用程序不断查询数据库以获取信息时，就性能和数据库使用而言，是有一个大查询一次提取所有数据更好，还是有一堆较小的查询更好一次提取一个数据。有关系吗？

我试图弄清楚一旦请求了类中的任何值，我是否应该查询整个类。或者仅在需要时查询单个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:27:43.723

如果其他人为您的使用付费，我建议您在单个连接中提取尽可能多的数据并在本地使用它。但是，我不知道“用法”的定义是什么。它可能是连接、带宽、操作等。

# encryption - TLS over TLS 可能吗？

> ID：12203896
> 
> 赞同：5
> 
> 时间：2012-08-30T19:15:41.280
> 
> 标签：encryption, cryptography, openssl, ssl

是否可以使用 OpenSSL 或其他工具通过 TLS 建立 TLS 连接？

如果可能，每个级别的证书是否需要不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T19:33:20.047

This should work just fine in theory, though I cannot say for sure whether OpenSSL or something would support it easily. You can technically use the same certificate for multiple TLS connections, even if one is nested inside another.

However, I want to point out that one common reason to nest TLS connections might be to tunnel data over a multi-layered encrypted connection, making some subset of the data available at each stop in the tunnel (i.e. peeling back a layer of the encryption). Using the same certificate doesn't really support that use case. Perhaps you've got another use case in mind.

Furthermore, it is cryptographically sound to encrypt encrypted data. That is, more encryption cannot make data **less** secure. Lastly, encrypting encrypted data alone will not make it **more** secure. That is, AES(AES(x,key1),key2) where key1 != key2 is not more (or less) secure than AES(x, key1). Just in case that was your motivation.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:18:00.923

TLS 不关心您发送和接收的数据，因此它很可能是另一个 TLS 会话（尽管我不知道您为什么要这样做）。

由于这是另一个独立的会话，因此您没有理由不能使用相同的证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T05:38:33.487

ths tls rfc 已经确认了这种情况，答案是肯定的，请参考：[https](https://www.rfc-editor.org/rfc/rfc5246) ://www.rfc-editor.org/rfc/rfc5246 ，我找不到哪个部分提到了这一点，但我记得我读过它。

# r - 应用公式进行物种间比较

> ID：12203897
> 
> 赞同：0
> 
> 时间：2012-08-30T19:15:46.533
> 
> 标签：r, formula

我有一个按以下方式布置的数据框：

```
Species Trait.p  Trait.y   Trait.z
   a      20.1    7.2        14.1
   b      20.4    8.3        15.2
   b      19.2    6.8        13.9 
```

对于每个物种组合，我想申请 (Xa) - (Xb) 其中 X 是特征值，字母是物种，Xa > Xb。即必须使得每个相应物种组合的较大值必须首先出现，针对每个性状计算

这会是一个多步骤的过程吗？

一个示例输出可能是

```
Combination  Trait.p  Trait.y  Trait.z
    a/b        0.3      1.1      1.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:33:58.640

我假设您选择了最大值，但大卫提出了一个很好的观点。我怀疑这是最好的方法，但我认为它可以为您提供您所追求的。请注意，我添加了 ac，因为我确定您的问题比 a 和 b 更复杂：

```
dat <- read.table(text="Species Trait.p  Trait.y   Trait.z
   a      20.1    7.2        14.1
   b      20.4    8.3        15.2
   b      19.2    6.8        13.9
   c      14.2    3.8        11.9", header=T)

li <- lapply(split(dat, dat$Species), function(x) apply(x[, -1], 2, max))

com <- expand.grid(names(li), names(li))
inds <- com[com[, 1] != com[, 2], ]
inds <- t(apply(inds, 1, sort))
inds <- inds[!duplicated(inds), ]

ans <- lapply(1:nrow(inds), function(i) {
    abs(li[[inds[i, 1]]]-li[[inds[i, 2]]])
})
cbind(Combination = paste(inds[, 1], inds[, 2], sep="/"), 
    as.data.frame(do.call(rbind, ans))) 
```

这给了我们：

```
 Combination Trait.p Trait.y Trait.z
1         a/b     0.3     1.1     1.1
2         a/c     5.9     3.4     2.2
3         b/c     6.2     4.5     3.3 
```

抱歉没有注释，但我要去上课了。

# ajax - RICO 实时网格中的泄漏标记

> ID：12203898
> 
> 赞同：0
> 
> 时间：2012-08-30T19:15:47.647
> 
> 标签：ajax

我正在使用 RICO 实时网格 ajax 框架在 LAMP 网站上创建表单。

我有几个具有父/子关系的实时网格表。当数据出现在子表中时，它会泄漏标记。看起来像这样

```
Tomato and Shellfish Soup<span class="ricoLookup">71</span> 
```

其中“71”是关键，而“番茄贝类汤”是标签，而我应该只看到“番茄贝类汤”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:16:59.300

更新到最新版本的 Rico 2 -[在 SourceForge 上的 openrico 项目的 svn 存储库中](http://sourceforge.net/projects/openrico/files/openrico/)可用，修复了这个问题。

# python - 熊猫在重复 DataFrame.reset_index() 上崩溃

> ID：12203901
> 
> 赞同：45
> 
> 时间：2012-08-30T19:15:56.350
> 
> 标签：python, pandas

这里非常奇怪的错误：我正在使用 pandas 来合并几个数据框。作为合并的一部分，我必须多次调用 reset_index。但是当我这样做时，它会在第二次或第三次使用 reset_index 时意外崩溃。

这是重现错误的最少代码：

```
import pandas
A = pandas.DataFrame({
    'val' :  ['aaaaa', 'acaca', 'ddddd', 'zzzzz'],
    'extra' : range(10,14),
})
A = A.reset_index()
A = A.reset_index()
A = A.reset_index() 
```

这是回溯的相关部分：

```
....
    A = A.reset_index()
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/frame.py", line 2393, in reset_index
    new_obj.insert(0, name, _maybe_cast(self.index.values))
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/frame.py", line 1787, in insert
    self._data.insert(loc, column, value)
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/internals.py", line 893, in insert
    raise Exception('cannot insert %s, already exists' % item)
Exception: cannot insert level_0, already exists 
```

知道这里出了什么问题吗？我该如何解决它？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-08-30T19:52:44.037

检查 frame.py，看起来 pandas 试图插入列“index”或“level_0”。如果其中一个/两个（？？）已经被占用，那么它会抛出错误。

幸运的是，有一个“丢弃”选项。AFAICT，这会删除具有相同名称的现有索引并将其替换为新的重置索引。如果你有一个名为“索引”的列，这可能会给你带来麻烦，但我认为否则你没问题。

“固定”代码：

```
import pandas
A = pandas.DataFrame({
    'val' :  ['aaaaa', 'acaca', 'ddddd', 'zzzzz'],
    'extra' : range(10,14),
})
A = A.reset_index(drop=True)
A = A.reset_index(drop=True)
A = A.reset_index(drop=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-14T03:42:38.443

您可以使用 ：

`A.reset_index(drop=True, inplace=True)`

# ruby-on-rails - Facebook Page Tab 应用程序混乱

> ID：12203909
> 
> 赞同：0
> 
> 时间：2012-08-30T19:16:22.327
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api

我正在创建一个 Facebook Page Tab 应用程序，用户可以在登录到我的应用程序时安装该应用程序。

问题是我需要一种方法来将我的应用程序中的用户与授权它的 Facebook 用户相关联。我需要这个，以便当任何用户转到他们页面中的那个标签时，我会知道我的哪些帐户与该标签所在的 Facebook 页面相关联。

说得通？

当用户授权 Canvas 应用程序时，各种信息都会返回。但不是页面选项卡应用程序。有什么解决方法吗？

谢谢

# usb - FTDI 232H 通讯

> ID：12203911
> 
> 赞同：1
> 
> 时间：2012-08-30T19:16:28.513
> 
> 标签：usb, ftdi

我想知道是否有人可能遇到/经历过与我的 FTDI FT232H 模块相同的通信问题。

我正在向 USB 模块发送一个字符，然后使用我的微控制器的调试器来查看是否正在传输正确的字符。在大多数情况下，所有字符都可以使用，除了少数字符，特别是“g、o、s 和 w”。这些有时会起作用……但有时却不起作用。这是非常不一致的，我很难找出问题可能是什么，如果有什么我可以做的，或者是否需要更多细节，请告诉我。

PS 模块在 245 异步 FIFO 模式下运行。

问候！

# javascript - 动态地将项目添加到视图中并回发到控制器 (ASP.NET MVC 4)

> ID：12203913
> 
> 赞同：2
> 
> 时间：2012-08-30T19:16:29.277
> 
> 标签：javascript, asp.net, asp.net-mvc

我有一个带有模型的 ASP.NET MVC 4 应用程序，其中包含和集合（`IEnumerable<T>`或`IList<T>`），即：

```
class MyModel
{
  public int Foo { get; set; }
  public IList<Item> Bar { get; set; }
}

class Item
{
  public string Baz { get; set; }
} 
```

我用经典`@for...`、`@Html.EditorFor...`广告等方式渲染视图中的数据。现在需要*在客户端*添加动态添加新项目，然后将其发布回服务器。

我正在寻找一种简单的解决方案来处理添加（在 JavaScript 中），也就是不手动创建所有输入等。可能以某种方式从编辑器模板视图中获取它。并添加它，当表单提交回服务器时，模型绑定器将能够正确创建`IList<T>`集合，也就是对输入名称的一些智能处理。我读了一堆文章，但没有什么是简单且可靠的（没有像集合变量名称这样的魔术字符串，对服务器的 AJAX 回调......）。

到目前为止，[这](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)看起来很有希望，但我宁愿依靠服务器上的渲染（预先知道的项目）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:37:49.010

我不确定你是什么意思'集合变量名'，可能我的解决方案是你注意到的一种魔法。

我的解决方案是基于复制元素的现有编辑器并通过 Javascript 更改输入名称。

首先，我们需要标记我们的编辑器。这是用于收集的表单输出编辑器的代码

```
 @for (var i = 0; i < Model.Count; i++)
        {
            <div class="contact-card">
                @Html.LabelFor(c => Model[i].FirstName, "First Name")
                @Html.TextBoxFor(c => Model[i].FirstName)
                <br />
                @Html.LabelFor(c => Model[i].LastName, "Last Name")
                @Html.TextBoxFor(c => Model[i].LastName)
                <br />
                @Html.LabelFor(c => Model[i].Email, "Email")
                @Html.TextBoxFor(c => Model[i].Email)
                <br />
                @Html.LabelFor(c => Model[i].Phone, "Phone")
                @Html.TextBoxFor(c => Model[i].Phone)
                <hr />
            </div>

        } 
```

我们的编辑器被放入带有 class 的 div 中`contact-card`。在呈现时，ASP.NET MVC 为用作属性编辑器的输入提供类似`[0].FirstName`, `[0].LastName`...`[22].FirstName`的名称。`[22].LastName`在提交模型绑定器将其转换为基于索引和属性名称的实体集合。

接下来我们创建复制最后一个编辑器并将括号中的索引增加 1 的 javascript 函数。在提交时将附加元素添加到集合中：

```
var lastContent = $("#contact-form .contact-card").last().clone();
$("#contact-form .contact-card").last().after(lastContent);

$("#contact-form .contact-card")
    .last()
    .find("input")
    .each(function () {
        var currentName = $(this).attr("name");
        var regex = /\[([0-9])\]/;
        var newName = currentName.replace(regex, '[' + (parseInt(currentName.match(regex)[1]) + 1) + ']');
        $(this).val('');
        $(this).attr('name', newName);
    }); 
```

瞧！！提交后，我们将获得更多元素！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:46:39.803

[最后，我按照STO 的建议](https://stackoverflow.com/a/12205084/370671)做了类似的事情，但使用了[Phil Haack 建议的](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)集合的自定义（非线性）索引。

这使用了元素的手动命名（因此我没有直接绑定到模型）并且我可以使用自定义实例（对于空元素模板）。我还创建了一些辅助方法来为实例生成代码，因此从模型或空实例生成实际实例的代码更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:29:27.277

我在 Backbone（用于文件上传器）的帮助下做到了这一点，每当用户单击 #addButton View 时，我都会在其中插入模板：

```
@using Telerik.Web.Mvc.UI
@{
    ViewBag.Title = "FileUpload";
    Layout = "~/Areas/Administration/Views/Shared/_AdminLayout.cshtml";
}
<div id="fileViewContainer" class="span12">
<h2>File upload</h2>
@foreach(var fol in (List<string>)ViewBag.Folders){
        <span style="cursor: pointer;" class="uploadPath">@fol</span><br/>
    }
    @using (Html.BeginForm("FileUpload", "CentralAdmin", new { id = "FileUpload" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <label for="file1">Path:</label>
        <input type="text" style="width:400px;" name="destinacionPath" id="destinacionPath"/><br />
        <div id="fileUploadContainer">
            <input type="button" class="addButton" id="addUpload" value="Add file"/>
            <input type="button" class="removeButton" id="removeUpload" value="Remove file"/>
        </div>

        <input type="submit" value="Upload" />
    }
</div>
<script type="text/template" id="uploadTMP">
     <p class="uploadp"><label for="file1">Filename:</label>
     <input type="file" name="files" id="files"/></p>
</script>
@{
    Html.Telerik().ScriptRegistrar().Scripts(c => c.Add("FileUploadInit.js"));
} 
```

文件上传初始化.js

```
$(document).ready(function () {
    var appInit = new AppInit;
    Backbone.history.start();
});
window.FileUploadView = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, 'render', 'addUpload', 'removeUpload', 'selectPath');
        this.render();
    },
    render: function () {
        var tmp = _.template($("#uploadTMP").html(), {});
        $('#fileUploadContainer').prepend(tmp);
        return this;
    },
    events: {
        'click .addButton': 'addUpload',
        'click .removeButton': 'removeUpload',
        'click .uploadPath': 'selectPath'
    },
    addUpload: function (event) {
        this.render();
    },
    removeUpload: function (event) {
        $($('.uploadp')[0]).remove();
    },
    selectPath: function (event) {
        $('#destinacionPath').val($(event.target).html());
    }
});
var AppInit = Backbone.Router.extend({
    routes: {
        "": "defaultRoute"
    },
    defaultRoute: function (actions) {
        var fileView = new FileUploadView({ el: $("#fileViewContainer") });
    }
}); 
```

在控制器中，您保留您的代码

我希望这将有所帮助。

# c - 可视化 printf 中的指针指示的内容

> ID：12203917
> 
> 赞同：1
> 
> 时间：2012-08-30T19:16:39.130
> 
> 标签：c, pointers, pointer-arithmetic

我遇到过这样的功能，对于我反转特殊类型单词的任务非常有用。我在 while 循环中遇到了复杂的指针算法问题。如何显示留在后面的数组索引号，例如。`word`，`dPtr`或`subword`（在当前迭代中）与 printf ？

我只实现了减法值（subword-word）和（dPtr-dest）。

有没有办法创建一个“零”的“foo”指针，以便减法仅给出检查值？

这是代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <ctype.h>

int main(void)
{
    char* subword = NULL;
    char* dest;
    char* dPtr;

    size_t n, len;
    int len_int, n_int;

    char word[] = "-example-compound-word";
    len = strlen(word);
    len_int = (int)len;
    printf("string length is %d\n", len_int);
    dest = malloc(len+1);
    if (dest == NULL) return -1;

    dPtr = dest;

    while((subword = strrchr(word, '-'))!= NULL) {

        printf("the pointer values are: subword-word %ld, dPtr-dest %ld\n", (subword-word), (dPtr-dest));

        n = len - (subword-word) - (dPtr-dest);

        n_int = (int)n;
        printf("and the n is %d\n", n_int);

        if (n-1 > 0)
            strncpy(dPtr, subword+1, n-1);
        *subword = '\0';
        dPtr += n-1;
        *dPtr = '-';
        dPtr++;
    }
    strncpy(dPtr, word, len - (dPtr-dest));
    dest[len] = '\0';

    printf("the output is %s\n", dest);
    return 0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:22:10.167

如果您有一个指向`p`数组的指针（或指向`malloc`充当数组的 ed 内存块），您可以通过从 中减去指向第一个元素的指针来获得指向数组元素的索引`p`。

在 的情况下`subword`，您可以简单地使用`word`，因为数组名称在大多数上下文中（不是作为 的参数`sizeof`）转换为指向其第一个元素的指针，因此在表达式中

```
subword - word 
```

数组`word`被转换为指向其第一个元素的指针，并且显式使用 a 的等效形式`char*`是

```
subword - &word[0] 
```

在 的情况下`dPtr`，要减去的基指针是`dest`，它指向`malloc`ed 内存块的第一个字节，并且

```
dPtr - dest 
```

给出相应的索引。在 的情况下`char*`，索引与以字节为单位的偏移量相同，但一般来说，指向同一数组的相同对象类型的两个指针相减（或末尾的一个）也会产生两个指针，而不是字节偏移量。

请注意，两个指针相减的结果是 type 的值，而用于此类值`ptrdiff_t`的长度修饰符是，所以`printf``t`

```
printf("the pointer values are: subword-word %ld, dPtr-dest %ld\n", (subword-word), (dPtr-dest)); 
```

应该正确

```
printf("the pointer values are: subword-word %td, dPtr-dest %td\n", (subword-word), (dPtr-dest)); 
```

`long int`或者如果使用了`l`长度修饰符，则应该将值转换为。

# android - 运行 HelloWorld cocos2dx 失败

> ID：12203918
> 
> 赞同：5
> 
> 时间：2012-08-30T19:16:45.543
> 
> 标签：android, linux, cocos2d-x

我是新手。

尝试在 64 位 Linux 机器 (openSuse 12.1) 上运行带有 cocos2dx (cocos2d-2.0-rc2-x-2.0.1)、Android SDK 20.0.1、Android NDK r8 的 HelloWorld 示例。

从 Eclipse 运行仿真时出现以下异常：

```
W/dalvikvm(  644): threadid=13: thread exiting with uncaught exception (group=0x40a13300)
E/AndroidRuntime(  644): FATAL EXCEPTION: GLThread 77
E/AndroidRuntime(  644): java.lang.IllegalArgumentException: No configs match configSpec
E/AndroidRuntime(  644):        at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:863)
E/AndroidRuntime(  644):        at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1024)
E/AndroidRuntime(  644):        at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1401)
E/AndroidRuntime(  644):        at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
D/gralloc_goldfish(  644): Emulator without GPU emulation detected. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T23:04:43.150

对于 2.0，您需要在设备上运行，因为 Emulator 不支持 OpenGL 2.0

对于那些对如何在模拟器上运行 OpenGL 2.0 感兴趣的人，这里是链接[http://www.cocos2d-x.org/boards/6/topics/12563](http://www.cocos2d-x.org/boards/6/topics/12563)

# objective-c - 可达性 - Internet 重新连接时主机出现故障

> ID：12203924
> 
> 赞同：2
> 
> 时间：2012-08-30T19:17:00.580
> 
> 标签：objective-c, ios, cocoa-touch, reachability

我用[这个](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)问题来检查互联网连接（WiFi \ 3G）是否处于活动状态。

它工作得很好，但有一个小问题。

当我关闭互联网时，该应用程序会发出互联网已关闭的警报；但是当我再次打开它时，直到连接肯定启动，它说主机已关闭而实际上已启动，事实上，过了一会儿，它记录了它已启动。

我想知道我该怎么做才能让该消息仅在服务器实际关闭时才出现，而不是在重新连接到互联网时出现！

这是我的代码

```
-(void) checkNetworkStatus:(NSNotification *)notice
{
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    if (internetStatus == NotReachable){
        UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Reloading Failed" message: @Seems like you're offline! \n Some features, such as updating contents and downloading screenshots won't be available while you're offline.\nNavigate to Settings > Wi-Fi to connect to the Internet and enjoy those features!") delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
        [alert show];
        [alert release];
        NSLog(@"offline");
    }
    else if (internetStatus == ReachableViaWiFi || internetStatus == ReachableViaWWAN){
        NSLog(@"online");
        if (hostStatus == NotReachable)
        {   NSLog(@"Server offline");
            UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Reloading Failed" message:@"Seems like there's a communication problem with the remote network. \n Please try again in a while!" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
            [alert show];
            [alert release];
        }
        else if (hostStatus == ReachableViaWWAN || hostStatus == ReachableViaWiFi){
            NSLog(@"server online");
           //download data from remote server 
        }
    }
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];
    internetReachable = [[Reachability reachabilityForInternetConnection] retain];
    [internetReachable startNotifier];
    hostReachable = [[Reachability reachabilityWithHostName: @"www.mywebsite.com"] retain];
    [hostReachable startNotifier]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:30:22.340

`Reachability`仅用于检查[网络是否可访问](https://stackoverflow.com/questions/5874445/ios-network-reachability-doesnt-seem-to-be-working/5875059#5875059)，不会告诉您服务器是否已关闭。您将需要使用一个或其他第三方库的组合`Reachability`来`NSURLConnection`检查 HTTP 状态 200 和其他有效状态。您将使用`Reachability`显示设备没有连接的消息，一旦连接，您将使用 Web 请求通知用户服务器是否在线。在为您的设备重新打开互联网后，您对连接延迟无能为力，因为打开收音机并连接到手机网络或 wifi 需要时间。

# xcode - Xcode 4.4 或更高版本的预处理器检查

> ID：12203929
> 
> 赞同：2
> 
> 时间：2012-08-30T19:17:17.467
> 
> 标签：xcode, xcode4, clang, c-preprocessor

如果文件在 Xcode 4.4 或更高版本下编译，有没有办法测试（使用预处理器）？或者，更具体地说，测试编译器是否会自动`@synthesize`属性并抛出编译错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T22:18:57.887

您可以使用它来测试该功能：

```
#if (defined(__clang__) && __has_feature(objc_default_synthesize_properties))
#warning Got it
#else
#error omg no auto synthesis
#endif 
```

此处记录了完整的功能列表：http: [//clang.llvm.org/docs/LanguageExtensions.html](http://clang.llvm.org/docs/LanguageExtensions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T22:03:49.567

因为这是在 4.x 版本的 LLVM 编译器中提供的，所以您应该能够使用以下内容来测试是否存在足够新的版本：

```
#if __clang__ && (__clang_major__ >= 4)
 // New version code here
#else
 // Fallback code for older version here
#endif 
```

# java - Selenium 并不总是抓取正确的动态生成的链接

> ID：12203935
> 
> 赞同：2
> 
> 时间：2012-08-30T19:17:52.250
> 
> 标签：java, selenium, xpath, selenium-webdriver, selenium-rc

我当前的环境是使用 Selenium RC 的 Firefox 3.6.28（使用 Selinium 服务器 2）。最终，事情将通过 WebDriver 迁移到 Selenium 2.0，但我现在需要进行一些测试才能在 Selenium RC 中工作。

我有一个动态生成的表，每行内都有一个“a href”链接。我想点击某一行的链接。但是，问题有时是 Selenium 正确地选择了它（测试通过），有时我收到一条错误消息，指出该元素不存在（测试失败）：

`[testng] com.thoughtworks.selenium.SeleniumException: ERROR: Element xpath=(//table[@class='results'])/tbody/tr[position()=5]/td/a not found`

似乎没有任何检测/未能看到元素的模式。

要查看当我收到错误时浏览器是否真的看到了该元素，我有这样的事情：

```
 ...
    try{
        wrapWaitForPageToLoad("10000");
        wrapWaitForPageToLoad("10000");
        clickAndWait(xpath);
    }catch(Exception e) { //loop indefinitely here } 
```

事实证明，浏览器看到了该元素。我在 Selenium IDE 中测试了 xpath。xpath 显然是正确的，因为我可以在 Selenium IDE 中使用该 xpath 执行 click 命令。

如果某些元素没有完全加载，我添加了一些值为 10000 的 wrapWaitForPageToLoad()。但是，这似乎对问题没有影响。无论如何，这些元素似乎都已完全加载，正如上述测试所暗示的那样……增加时间也无济于事。

firebug 在表格上给我的部分 html：（
注意， position()=5 获取 listdata4 因为第一行是表格的标题）

```
<table class="results" cellspacing="0" cellpadding="1" border="0" style="cursor: default;">
<tbody>
<tr id="titles">
<tr class="listdata1" style="">
<tr class="listdata2" style="">
<tr class="listdata3" style="">
<tr class="listdata4" style="">
    <td align="center">...</td>
    <td>
        <a href="/click/this/link">Cake Pictures</a>
    </td> 
```

什么可能导致这个奇怪的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:30:46.337

You need to modify xpath from

```
//table[@class='results'])/tbody/tr[position()=5]/td/a 
```

to

```
//table[@class='results']/tbody/tr[5]/td[2]/a 
```

# asp.net - 更新正则表达式 [a-zA-Z]+-[0-9]+ 时出现错误消息

> ID：12203943
> 
> 赞同：0
> 
> 时间：2012-08-30T19:18:21.483
> 
> 标签：asp.net

当我必须更新我的 aspx.net 表单时..我收到错误消息，如果我删除了表达式，则使用的正则表达式是 [a-zA-Z]+-[0-9]+。 ..更新已执行...请回复解决方案

```
<asp:TextBox ID="TextBox2" runat="server" CssClass="style19" Width="239px" BorderColor="#006600" BorderStyle="Solid" ForeColor="#009900"></asp:TextBox>

 <asp:RegularExpressionValidator ID="RegularExpressionValidator6" runat="server" ControlToValidate="TextBox2" ErrorMessage="Invalid Code" ForeColor="Red" ValidationExpression="[a-zA-Z]+-[0-9]+"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:19:41.857

你的问题难以理解。错误消息来自哪里？你是如何更新你的表格的？正则表达式在哪里应用，应用在什么地方？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:42:42.733

如果您向 TextBox2 输入值，您必须在验证器上遵守此表达式

[a-zA-Z]+-[0-9]+

如果您不尊重，您将无法验证您的数据

如果你想禁用，你必须删除你的验证器

用此代码替换

```
<asp:TextBox ID="TextBox2" runat="server" CssClass="style19" Width="239px" BorderColor="#006600" BorderStyle="Solid" ForeColor="#009900"></asp:TextBox> 
```

# javascript - 查找浏览器的主页

> ID：12203944
> 
> 赞同：2
> 
> 时间：2012-08-30T19:18:32.310
> 
> 标签：javascript, ruby-on-rails-3.1

当访问者访问我们的网站时，我们需要识别访问者浏览器的主页设置。这甚至可能吗？

我需要此功能来实现类似于“经常来这里？让 Google 成为您的主页”的功能。你建议我们怎么做？使用cookies？cookie 如何告诉我我的网站是否是主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:20:38.953

你不能这样做。这太侵入性了。

在旁注中，我可以问你为什么这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:59:28.820

不，那是不可能的。那将是对隐私的侵犯。

# r - 在 R 中插值（并避免负插值）

> ID：12203947
> 
> 赞同：4
> 
> 时间：2012-08-30T19:18:59.487
> 
> 标签：r, interpolation

R中是否有任何插值方法可以避免用负值插值缺失值？

让我们看一个向量：

```
d <- c(NA, NA, 5000, 17782, NA, NA, 21450, 42320, NA, NA, 52900, 54170, 
60600, 69000, 78000, 87000, 96900, 96900, 122000, 132700, 145000, 
171500, 198900, 213400, 229600, 250200, 272000, 291600, 318000, 
343000, 367000, 419200, 445000, 495000, 540000)

plot(d) 
```

使用三次样条插值

```
library(zoo)  # for na.spline
d.interpolation <- na.spline(d) 
```

这给了

```
[1] -100174.12  -31198.04    5000.00   17782.00   16961.75   14160.17   21450.00   42320.00   53674.83
[10]   54841.83   52900.00   54170.00   60600.00   69000.00   78000.00   87000.00   96900.00   96900.00
[19]  122000.00  132700.00  145000.00  171500.00  198900.00  213400.00  229600.00  250200.00  272000.00
[28]  291600.00  318000.00  343000.00  367000.00  419200.00  445000.00  495000.00  540000.00 
```

但是，在这种情况下，负值没有多大意义。

显然，像

```
d.interpolation <- na.spline(c(0,d)) 
```

也不会工作。

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:32:56.923

你可以插值`log(d)`：

```
library(zoo)
d.interpolation <- exp(na.spline(log(d)))
d.interpolation
#  [1]      1.86    282.86   5000.00  17782.00  22424.08  19122.70  21450.00
#  [8]  42320.00  59826.52  58724.79  52900.00  54170.00  60600.00  69000.00
# [15]  78000.00  87000.00  96900.00  96900.00 122000.00 132700.00 145000.00
# [22] 171500.00 198900.00 213400.00 229600.00 250200.00 272000.00 291600.00
# [29] 318000.00 343000.00 367000.00 419200.00 445000.00 495000.00 540000.00 
```

![在此处输入图像描述](../Images/80505a4d52626d42b855761ee3223c69.png)

# ssh - 在远程服务器上发出命令时如何允许输入密码？

> ID：12203949
> 
> 赞同：3
> 
> 时间：2012-08-30T19:19:01.940
> 
> 标签：ssh, freebsd, sh, su

这是我的脚本：

```
#!/bin/sh

if [ $# -lt 1 ]; then
    echo "Usage: $0 SERVER"
    exit 255
fi

ssh $1 'su;apachectl restart' 
```

我只希望它登录到服务器并重新启动 apache，但它需要超级用户权限才能做到这一点。但是，在它发出`su`命令后，它不会停止并等待我输入密码。我可以让它这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:29:41.730

看看这是否适合你！此解决方案在执行 SSH 之前需要密码...

```
#!/bin/sh
if [ $# -lt 1 ]; then
    echo "Usage: $0 SERVER"
    exit 255
fi
read -s -p "Password: " PASSWORD
ssh $1 'echo $PASSWORD>su;apachectl restart' 
```

该`-s`选项可防止在从用户那里读取密码时回显密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T19:45:55.973

看看期待。执行此类操作的最佳方式是通过期望脚本。这是我刚刚输入的一个示例，可以让您抢先一步，但它现在所做的只是向您展示如何在期望中处理密码。

```
#!/usr/bin/expect -f

set timeout 60

set pswd    [lindex $argv 0]

send "su\r"
match_max 2000
expect {
    -re "assword:$" {
        sleep 1
        set send_human {.2 .15 .25 .2 .25}
        send -h -- "$pswd\r"
        exp_continue
    } "login failed." {
        send "exit\r"
        log_user 1
        send_user "\r\nLogin failed.\r\n"
        exit 4
    } timeout {
        send "exit\r"
        log_user 1
        send_user "\r\nCommand timed out\r\n"
        exit 1
    } -re "(#|%)\\s*$" {
        # If we get here, then su succeeded
        sleep 1
        send "apachectl restart\r"
        expect {
            -re "(#|%)\\s*$" {
                send "exit\r"
                log_user 1
                send_user "\r\nApache restart Successful\r\n"
                exit 0
            } timeout {
                send "exit\r"
                log_user 1
                send_user "\r\nCommand timed out\r\n"
                exit 1
            }
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T19:31:04.843

Modifying your command to:

```
ssh -t $1 'sudo apachectl restart' 
```

will open a TTY and allow sudo to interact with the remote system to ask for the user account's password without storing it locally in memory.

You could probably also modify your sudo config on the remote system to allow for execution without a password. You can do this by adding the following to `/etc/sudoers` (execute visudo and insert this line, substituting `<username>` appropriately.)

```
<username> ALL=NOPASSWD: ALL 
```

Also, I'm a security guy and I really hope you understand the implication of allowing an SSH connection (presuming without a passphrase on the key) and remote command execution as root. If not, you should really, really, really rethink your setup here.

[Edit] Better still, edit your sudoers file to [allow only apachectl to run without a password](http://chrisadams.me.uk/2010/08/14/no-need-to-type-your-password-with-apache/). Insert the following and modify `%staff` to match your user's group, or change that to your username without the percent sign.

```
%staff          ALL=(ALL) NOPASSWD: /usr/sbin/apachectl 
```

Then your command should simply be changed to:

```
ssh $1 'sudo apachectl restart' 
```

# apache - 如何摆脱 .htaccess 中的 .php 扩展名

> ID：12203953
> 
> 赞同：1
> 
> 时间：2012-08-30T19:19:36.233
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试`mod-rewrite`摆脱`.htaccess`“.php”文件扩展名。

所以基本上，这是我现在的网站：[http ://www.example.com/about.php](http://www.example.com/about.php)

这是我想要的：[http ://www.example.com/about](http://www.example.com/about)

有没有办法在我的 .htaccess 中使用`mod-rewrite`？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:27:14.010

我想到了！如果您希望它适用于“.html”扩展名，您应该将“.php”更改为“.html”

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

带有 !-d 的行检查它不是一个目录，带有 -f 的行检查请求的文件是一个 .php 文件。

但是，要显示它，您需要像这样链接到它：

```
<a href="http://www.example.com/about"></a> 
```

代替：

```
<a href="http://www.example.com/about.php"></a> 
```

因为那样它只会将 URL 显示为 about.php。

希望这有助于任何想要这样做的人！

# shell - 如何使用 SED 替换 [] 括号

> ID：12203963
> 
> 赞同：18
> 
> 时间：2012-08-30T19:20:18.433
> 
> 标签：shell, replace, sed, ksh, brackets

我有一个字符串，我想从中删除标点符号。

我从

```
sed 's/[[:punct:]]/ /g' 
```

但是我在 HP-UX 上遇到的问题并不总是喜欢这样，有时我会得到一个 0 并且`$`我的字符串中的任何东西都会消失。所以我决定尝试手动进行。

我有以下代码适用于我感兴趣的所有标点符号，除了我似乎无法在我的 sed 中添加方括号“[]”和其他任何东西，否则它不会替换任何东西，而且我没有收到错误，所以我不确定要解决什么。

无论如何，这是我目前拥有并想要添加`[]`的内容。

```
sed 's/[-=+|~!@#\$%^&*(){}:;'\'''\"''\`''\.''\/''\\']/ /g' 
```

顺便说一句，我在 Solaris、Redhat 和 HP 上使用 KSH

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T19:23:33.550

您需要将括号放在表达式的前面：

```
sed 's/[][=+...-]/ /g' 
```

通过将 ']' 作为第一个字符放在左括号之后，它被解释为字符集的成员，而不是右括号。在括号内的任何位置放置一个“[”使其成为集合的成员。

对于这个特定的字符集，您还需要特别处理，因为您并没有尝试在和`-`之间构建一系列字符。所以把 放在课程的最后。`[``=``-`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T19:26:33.813

您还可以指定要保留的字符 [with inversion]：

```
sed 's/[^a-zA-Z0-9]/ /g' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-21T01:44:20.727

您可以手动执行此操作：

```
sed 's/[][\/$*.^|@#{}~&()_:;%+"='\'',`><?!-]/ /g' 
```

这去掉了 32 个标点字符，一些字符的顺序很重要：

*   `-`最后应该是这样`-]`
*   `[]`应该是这样的`[][other characters]`
*   `'`应该这样逃脱`'\''`
*   `^`不是以like in开头`[^`
*   不以开始`[.` `[=` `[:` 和以结束`.]` `=]` `:]`
*   不以`$]`

在这里，您可以解释为什么所有这些 [http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_03](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_03)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:14:10.483

这是我最终得到的最终代码

```
`echo "$string" | sed 's/[^a-zA-Z0-9]/ /g'` 
```

我不得不把`=`和`-`放在最后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-25T21:22:29.380

也可以使用正则表达式捕获技术来处理（例如：在下面）：

```
echo "narrowPeak_SP1[FLAG]" | sed -e 's/\[\([a-zA-Z0-9]*\)\]/_\1/g'
> narrowPeak_SP1_FLAG

\[ : literal match to open square bracket, since [] is a valid regex
\] : literal match to square close bracket
\(...\) : capture group
\1 : represents the capture group within the square brackets 
```

# asp.net-mvc-3 - MVC3 Razor 编辑器模板和附加参数

> ID：12203965
> 
> 赞同：1
> 
> 时间：2012-08-30T19:20:21.200
> 
> 标签：asp.net-mvc-3

我是 mvc3 和 razor 以及 C# 的新手，一家小公司刚刚给了我一份合同，让我根据一个失败的项目来做这个巨大的项目……现在我需要根据选择创建一个书籍表由用户保存......书籍目前在模型中有大约 40 种不同的信息，我想知道如何在模板编辑器或任何其他方式中正确设置它......

现在它在视图中看起来像这样：

```
<table>
      <tr class="header">
         @if (!((List<string>)Session["searchPreferences"]).Contains("Authors"))
         {
              <td>Author</td>
         }
         @if (!((List<string>)Session["searchPreferences"]).Contains("bookName"))   
         {
              <td>bookName</td>
         }
         @if (!((List<string>)Session["searchPreferences"]).Contains("editorName"))
         {
              <td>editorName</td>
         }
     </tr>

        @foreach (BookModel book in Model.bookList)
        { 
        <tr class="element">
            @if (!((List<string>)Session["searchPreferences"]).Contains("Author"))
            {
                <td>@book.Author</td>
            }
            @if (!((List<string>)Session["searchPreferences"]).Contains("editorName"))
            {
                <td>@book.editorName</td>
            }
        </tr>
      + 1 <tr> </tr> ... for each 40 attributes in books
    </table> 
```

如何制作编辑器模板并包含搜索首选项（存储在会话中或 LogUser 模型中...

其他问题：

我已经掌握了使用 @Html.EditorFor(model => model.Books) 的概念，它会循环抛出我的书单，但我怎样才能确保它只显示用户想要的东西？，比如可以我将某种参数传递给模板并使用传递的列表来验证每一列？

有没有更简单的方法来写下我的模板..有点像“在我的书模型中获取每个属性并创建一行，如果用户选择了它”，因为客户提供了一种对他的书进行分类的新方法，我每次他改变想法时，我都必须重新编码所有内容……我的前辈经常发生这种情况。（对于我的一点经验来说，报酬非常好，所以即使项目开始错误并且客户拒绝让我们从头开始，我也会尝试解决这个问题）

提前非常感谢您提供的任何信息、帮助等……即使它是指向一个很好的演示或博客条目的链接，这将有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:49:36.047

我不是 100% 确定您要做什么，但如果我理解正确，您有一个用户偏好列表，可以在表格中显示什么。我对您的建议是构建一个已经按照您希望的方式格式化数据的视图模型。

这意味着，当您将模型传递给视图时，您只有用户在他/她的搜索首选项中指定的列和数据。

你可以有一个 Book 对象，它包含一个列列表，每个“列”都是它自己的对象，带有一个标签和一个值。

公共 BookViewModel() { 列表数据 { 获取；放; } }

公共列（）{字符串标签{获取；放; } 字符串值 { 获取；放; } }

加载模型时，您只会为用户想要的数据创建列。

可能有更好的方法来格式化它，我只是想到了这一点。但我认为你应该着眼于处理数据服务器端的过滤和格式化，而不是在页面上的 Razor 中。

编辑器模板用于自定义对象在 html 页面上的表示方式，特别是如果该对象将在页面上的很多地方使用，因此您无需重复自己。它并不是真正为过滤数据而设计的。

如果这没有意义或者我误解了你，请告诉我。

# c# - 如何在 64 位 .NET 进程中设置 MinWorkingSet 和 MaxWorkingSet？

> ID：12203969
> 
> 赞同：5
> 
> 时间：2012-08-30T19:20:25.577
> 
> 标签：c#, .net, working-set

如何为 64 位 .NET 进程设置 MinWorkingSet 和 MaxWorking 集？

ps 我可以为32位进程设置MinWorkingSet和MaxWorking集，如下：

```
[DllImport("KERNEL32.DLL", EntryPoint = "SetProcessWorkingSetSize", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
internal static extern bool SetProcessWorkingSetSize(IntPtr pProcess, int dwMinimumWorkingSetSize, int dwMaximumWorkingSetSize);

[DllImport("KERNEL32.DLL", EntryPoint = "GetCurrentProcess", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
internal static extern IntPtr MyGetCurrentProcess();

// In main():
SetProcessWorkingSetSize(Process.GetCurrentProcess().Handle, int.MaxValue, int.MaxValue); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:14:33.550

您所要做的就是像这样更改您的声明：

```
[DllImport("KERNEL32.DLL", EntryPoint = "SetProcessWorkingSetSize", 
    SetLastError = true, CallingConvention = CallingConvention.StdCall)]
internal static extern bool SetProcessWorkingSetSize(IntPtr pProcess, 
    long dwMinimumWorkingSetSize, long dwMaximumWorkingSetSize); 
```

原因是因为[函数的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234%28v=vs.85%29.aspx)[定义`SetProcessWorkingSetSize`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234%28v=vs.85%29.aspx)：

```
BOOL WINAPI SetProcessWorkingSetSize(
  _In_  HANDLE hProcess,
  _In_  SIZE_T dwMinimumWorkingSetSize,
  _In_  SIZE_T dwMaximumWorkingSetSize
); 
```

请注意，它不使用 a [`DWORD`](http://msdn.microsoft.com/en-us/library/cc230318%28v=prot.10%29.aspx)（作为 32 位整数），而是使用 a `SIZE_T`，其[定义为](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)：

> 指针可以指向的最大字节数。用于必须跨越指针整个范围的计数。此类型在 BaseTsd.h 中声明如下：

```
typedef ULONG_PTR SIZE_T; 
```

这意味着它是一个 64 位值，因此可以更改为 a`long`并使函数在 64 位系统上工作。此外，来自 MSDN 的标题为“[常见 Visual C++ 64 位迁移问题](http://msdn.microsoft.com/en-us/library/3b2e7499%28v=vs.80%29.aspx)”的部分：

> **size_t**、**time_t**和**ptrdiff_t**是 64 位 Windows 操作系统上的 64 位值。

但是，这有点进退两难，因为您不想编译特定于平台的程序集（那将是一个 PITA）。您可以通过利用[类](http://msdn.microsoft.com/en-us/library/e4takf5s)上的[`EntryPoint`字段](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.entrypoint.aspx)（您已经在做）拥有*两个*方法声明来解决这个问题：[`DllImportAttribute`](http://msdn.microsoft.com/en-us/library/e4takf5s)

 *```
[DllImport("KERNEL32.DLL", EntryPoint = "SetProcessWorkingSetSize", 
    SetLastError = true, CallingConvention = CallingConvention.StdCall)]
internal static extern bool SetProcessWorkingSetSize32(IntPtr pProcess, 
    int dwMinimumWorkingSetSize, int dwMaximumWorkingSetSize);

[DllImport("KERNEL32.DLL", EntryPoint = "SetProcessWorkingSetSize", 
    SetLastError = true, CallingConvention = CallingConvention.StdCall)]
internal static extern bool SetProcessWorkingSetSize64(IntPtr pProcess, 
    long dwMinimumWorkingSetSize, long dwMaximumWorkingSetSize); 
```

现在你有两个独立的签名。但是，知道调用*哪个*签名仍然是一个问题。您不想到处放置条件检查。为此，我建议创建一个为您执行检查并调用它的方法。

您将希望使用[类](http://msdn.microsoft.com/en-us/library/z8te35sa)上的[`Is64BitProcess`属性](http://msdn.microsoft.com/en-us/library/system.environment.is64bitprocess.aspx)来做出此决定。不要使用该[属性](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem)。您需要前者，因为 32 位进程可以在 64 位操作系统上运行，并且您希望确保您的代码对此具有弹性；仅检查*操作系统*是否为 64 位并不能为您提供完整的图片。[`Environment`](http://msdn.microsoft.com/en-us/library/z8te35sa)[`Is64BitOperatingSystem`](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem)

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T00:25:32.523

不要pinvoke这个，直接使用这个[`Process.CurrentProcess.MinWorkingSet`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.minworkingset)属性。

非常高的几率，这不会有任何区别。软分页故障是完全正常的，如果机器有足够的 RAM，可以很快解决。在我的笔记本电脑上大约需要 0.7 微秒。你无法避免它们，这是像 Windows 这样的*demand_paged*虚拟内存操作系统的行为。很便宜，只要有[现成的免费页面](https://stackoverflow.com/a/18386097/17034)。

但是，如果它使您的程序性能“闪烁”，那么您需要考虑它不易于使用并在另一个进程中触发硬页面错误的可能性。如果必须从另一个进程中窃取 RAM 页面，则分页错误确实会变得昂贵，它的内容必须存储在分页文件中并且必须首先重置为零。这可以很快加起来，数百微秒并不罕见。

“天下没有免费的午餐”的基本规律，你需要运行更少的进程或购买更多的 RAM。后一种选择是明智的选择，今天 8 GB 让您花费大约 75 美元。完全偷窃。**

# javascript - Google 可以理解从脚本添加的文本吗？

> ID：12203974
> 
> 赞同：2
> 
> 时间：2012-08-30T19:20:44.877
> 
> 标签：javascript, html

你好，对不起我的英语不好......

假设我有一个 div，里面有一个外部脚本源。在脚本中，我将一些文本/链接打印到这个 div 中。问题是 Google 是否可以看到并理解这些来自脚本而非普通 HTML 的文本/链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:30:24.023

Initially I would have said "no" but [according to this article](http://arstechnica.com/information-technology/2012/05/googles-bots-learn-to-read-interactive-web-pages-more-like-humans/) it looks like they now do!

> ...it appears Google's bots have been trained to act more like humans to mine interactive site content, running the JavaScript on pages they crawl to see what gets coughed up.

Can't find anything official from Google however

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:29:41.100

Googlebot 确实处理了一些 Javascript。有可能：http: [//mobile.twitter.com/mattcutts/status/131425949597179904](http://mobile.twitter.com/mattcutts/status/131425949597179904)

# c++ - 如何在运行时在 C++ 中“编译”表达式？

> ID：12203976
> 
> 赞同：2
> 
> 时间：2012-08-30T19:20:53.577
> 
> 标签：c++, compilation, runtime, expression

> **可能重复：**
> [编译和运行 c++ 代码运行时](https://stackoverflow.com/questions/11523023/compile-and-run-c-code-runtime)

我想将用户的表达式作为字符串作为输入，并将其编译为可调用的 c++ 函数。是否有任何工具可以让您轻松做到这一点？

基本上，[如何将表达式树编译成可调用的方法，C#？](https://stackoverflow.com/questions/346523/how-do-i-compile-an-expression-tree-into-a-callable-method-c)似乎与我想做的类似，只是我需要在 c++ 中而不是 c# 中执行此操作。

我当然可以使用 lex 和 yacc 制作一种通用评估器，但我不想每次都解析字符串。基本上这个表达式将在一个关键的内部循环中运行，所以我正在寻找一种在运行时“编译”它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:26:31.133

你可以写你的迷你解释器。使用与 c++ 相同的命令（不是全部）。当然你的编译器会优化它，但不确定多少。我在 qbasic (mov, add, sub...) 中进行了组装，但由于是解释器的解释器，所以速度很慢：D

您是否考虑过进化计算和适应度函数？值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:32:21.780

您必须将表达式解析为抽象语法树并就地遍历或评估它。[这样的东西](http://pastebin.com/7JaX0a7j)应该可以满足您对简单数学表达式的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:53:34.457

这并不容易......如果你想要我的两分钱，我将按照以下步骤操作：

1.  为必须在运行时创建的代码创建接口。首先，你为你能做的事情创建一个界面。例如，您的类必须从代表您的接口的纯虚拟基类继承。注意你的程序不会使用任意代码，而是以特定方式创建的代码，因为它必须知道如何使用它。
2.  从程序内部调用编译器。编译器应该从您的源代码创建一个库。您可以使用存储在某处的预定义项目，然后将其源文件替换为您自己的。所以很容易获得一个合适的库。
3.  将您的库放在可以找到它的指定源中。
4.  在运行时加载库。如果您搜索，您会发现可以在运行时加载动态库，而不仅仅是在链接时（例如，您可以通过这种方式为程序创建插件）。所以你的程序可以加载你的库并使用它。例如，您可以[在此处](http://www.codeproject.com/Articles/203/How-to-do-run-time-or-explicit-linking-of-C-plug-i)找到一些信息。

但是，正如其他人所说，这不是一项微不足道的任务。

编辑：另一个解决方案是检查像 boost::spirit::qi 这样的解析器，使用得当可以给出非常有用的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:30:20.050

您可以创建一个数据结构来表示您解析的表达式树，并且与每次解析字符串相比，在运行时评估它的开销会很小。

实际上，在 C++ 中获得一个可调用的方法将非常困难，因为您必须生成目标代码并将其动态加载到您的程序中。这将复制整个编译器工具链所做的很多事情。

# proxy - nginx和xinetd有什么区别？

> ID：12203979
> 
> 赞同：0
> 
> 时间：2012-08-30T19:21:18.627
> 
> 标签：proxy, nginx, xinetd

nginx 和 xinetd 有什么区别？

我什么时候应该更喜欢 nginx，什么时候应该更喜欢 xinetd？

也许我错了，但我觉得他们都是代理人。我知道 nginx 做得更多，但是 - 有什么 xinetd 做得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:21:35.680

Nginx 主要用于服务和代理 HTTP 请求。

Xinetd 什么都不做。相反，它是一个“超级服务器”，用于侦听网络连接，并为该请求启动相应的服务。xinetd 的一种用途是为不经常访问的服务节省内存。例如，有时人们通过 xinetd 访问“sshd”，而不是连续运行“sshd”。

# templates - 锂：从库中加载视图

> ID：12203982
> 
> 赞同：1
> 
> 时间：2012-08-30T19:21:29.463
> 
> 标签：templates, plugins, view, lithium

我正在开发 3rd 方库`PROJECTROOT/libraries/mylib`。有一个控制器`mylib/controllers`，它正在工作。li3 告诉我它需要一个视图`PROJECTROOT/app/views/`——我怎样才能从而不是加载`mylib/views`视图`app`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:06:33.420

这可以通过在控制器中设置渲染路径来轻松实现。您可能希望对 mylib 中的每个控制器都这样做，因此所有控制器都从其扩展的 BaseController 是一个好主意。然后，您可以使用锂默认调用方法 _init() 来设置配置，如下所示：

```
class BaseController extends \lithium\action\Controller {

    public function _init() {
        parent::_init();

        $this->_render['paths'] = array(
            'template' => array(
                LITHIUM_APP_PATH . '/views/{:controller}/{:template}.{:type}.php',
                '{:library}/views/{:controller}/{:template}.{:type}.php',
            ),
            'layout' => array(
                LITHIUM_APP_PATH . '/views/layouts/{:layout}.{:type}.php',
                '{:library}/views/layouts/{:layout}.{:type}.php',
            ),
            'element' => array(
                LITHIUM_APP_PATH . '/views/elements/{:template}.{:type}.php',
                '{:library}/views/elements/{:template}.{:type}.php',
            ),
        );
    } 
```

你可以在这里看看：[https ://github.com/bruensicke/radium/blob/master/controllers/BaseController.php](https://github.com/bruensicke/radium/blob/master/controllers/BaseController.php)

请注意，我是这样设置的，因此应用程序可以覆盖特定视图以便进一步自定义它。

此外，在 github 上有一个关于该主题的问题/拉取请求，请看这里：

[https://github.com/UnionOfRAD/lithium/pull/650](https://github.com/UnionOfRAD/lithium/pull/650)

# jdbc - DAO 类中的 CPD 错误

> ID：12203983
> 
> 赞同：1
> 
> 时间：2012-08-30T19:21:38.063
> 
> 标签：jdbc, dao, naming-conventions, cpd

我有一个 DAO 类，它有多个方法。在每个方法中，我使用变量名*“result”*作为 ResultSet 和*“statement”*作为 PreparedStatement 和 closeResources() 方法来关闭 PreparedStatement 和连接。我使用了一个 DataManager 类，它具有 createConnection() 方法、getConnection() 方法。我的 DAO 中有 10 个 mwthods。我使用 DAO 工厂方法在 BO 中获取 DAO 对象。这是代码片段，显示为当我在 Eclipse 中运行 CPD 工具时违规。它在我的 DAO 的大约 6 到 8 个方法中显示此代码片段作为违规。

```
PreparedStatement statement=null;

try{

PreparedStatement statement=connection.prepareStatement(query);

//statements to set data in query

ResultSet result=statement.executeQuery();

if(result.next){

//some operation

   }
}
catch(SQLException e){

//encapsulating sql exception....

throw new BusinessException(e);

}
finally{

closeResources(connection,statement);

} 
```

由于 DAO 中的许多方法使用相同的方法，CPD 将上述代码显示为违规，我认为您无法使这段代码更加模块化。我的问题是在许多情况下使用相同的变量名，如*“result”*方法是否是最佳实践。要清除违规行为，我需要将*“结果”*重命名为“结果*1”*、*“结果 2”*等，但我觉得这些名称没有意义。

注意：我的培训即将结束。我没有在 Springs 或 Struts 上工作，我只知道 Servlets 和 JSP。我正在做一个案例研究，这是我第一次使用 PMD、CPD 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:41:31.423

使用[*模板方法*](http://en.wikipedia.org/wiki/Template_method_pattern)模式：

```
public void runQuery(Callback callback) {
    PreparedStatement statement=null;
    try{
        PreparedStatement statement=connection.prepareStatement(query);
        ResultSet result=statement.executeQuery();
        if(result.next){
            callback.onRow(result);  //crucial!
       }
    }
    catch(SQLException e){
        throw new BusinessException(e);
    }
    finally{
        closeResources(connection,statement);
    }
}

interface Callback {
    void onRow(ResultSet resultSet);
} 
```

你使用你的方法是这样的：

```
runQuery(new Callback() {
    public void onRow(ResultSet result) {
        //extract one row here
    }
}); 
```

唯一改变的代码是各种`Callback`实现，从不同的表中提取行。一旦你熟悉了这个模式，看看[`JdbcTemplate`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)哪个是围绕这个想法构建的，但功能强大得多，但仍然是低级和快速的。您不需要完整的[弹簧](/questions/tagged/spring "显示标记为“春天”的问题")来使用它。

# php - Joomla：如何将变量从模型中的构造函数传递到视图？

> ID：12203984
> 
> 赞同：1
> 
> 时间：2012-08-30T19:21:38.423
> 
> 标签：php, joomla, joomla2.5

似乎这不应该那么难，但让我很适应。

在模型的 __construct 方法中初始化变量。

需要在 view.html.php 和 default.php 文件中访问它们。

在我的模型中：

```
$this->MyVar = 'somevalue'; 
```

在我的 view.html.php 中：

```
$model = $this->getModel('mymodelname');
print_r($model) //checking, yes - the model's being pulled in
$myvar = $model->__construct($this->MyVar);
echo $myvar; //empty 
```

我做错了什么，我该如何解决？

谢谢！

==========================================

解决方案：

```
$model = $this->getModel('mymodelname');
echo $model->MyVar; // returns the variable in the model 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:31:48.890

`__construct()` does not return any value, this is why `$myvar` remains `null`. If you want, you can read more about it *[here](http://docs.joomla.org/API16%3aJModel/_construct)*

According to the specification (in the link above) you should pass to `__construct` an associative array that could hold one or more of the following fields:

*   `'name'`
*   `'state'`
*   `'dbo'`
*   `'table_path'`

and according to what you say - you pass a parameter. Try:

```
$arr = array('name' => $this->MyVar);
$model->__construct($arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:16:01.887

为什么要在实例化模型后使用构造，只需这样做：

```
$model = $this->getModel('mymodelname');
$model->MyVar = $myvar; 
```

# actionscript-3 - 如何删除 addCallback？

> ID：12203985
> 
> 赞同：2
> 
> 时间：2012-08-30T19:21:42.830
> 
> 标签：actionscript-3, addcallback

我有一个从 JavaScript 发送和接收大量消息的 Flash 游戏。有时我需要停止监听其中一些函数，但 ExternalInterface 没有 removeCallback 函数。所以我在做一些丑陋的事情：使用布尔值来验证每个函数中是否有可用的回调。

有更好的解决方案吗？

```
ExternalInterface.addCallback("callAlert", callAlert);
function callAlert(msg:String){
   if(callAlertAvailable){
      //...
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:25:09.833

只需再次调用 addCallback，将函数设置为 null：

```
ExternalInterface.addCallback("callAlert", null); 
```

为什么不阅读文档？我在这里找到它：
[ExternalInterface.addCallback()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)

> 注意：在具有 null 闭包值的现有回调函数上重复 addCallback() 会删除回调。

# grails - 覆盖 Setter&Getter 域类 grails

> ID：12203986
> 
> 赞同：0
> 
> 时间：2012-08-30T19:21:44.163
> 
> 标签：grails, groovy

我正在尝试覆盖域类的 getter 和 setter。这样做的理由是，我不必重做这个域类的初始化，它在代码中的很多地方。

我有一个域类“银行”，它曾经有一个“地址”，它的初始化如下：新银行（地址：地址）

现在，我需要多个地址，所以我有一个映射类 BankAddress 和 Bank 现在有 BankAddress 的“地址”列表

为了保持初始化相同的“新银行（地址：地址）”，我正在重写“getAddress”和“setAddress”，如下所示：

```
Address getAddress(){
    if(addresses?.size()>0){
        addresses.asList().get(0).getAddress()
    }else{
       return null
    }
}   

void setAddress(Address instance){
    if(addresses?.size()>0){
        addresses*.delete()
        addresses.clear()
    }

    def bankAddress = new BankAddress(address: instance, bank: this, isPrimary: true).save(flush: true)
    addToAddresses(bankAddress)
} 
```

问题是，当我的设置器被调用时，函数的“实例”参数为空，导致保存失败 - new Bank(address:someAddress): 'AddressId', table 'someDB.Config.BankAddress'; 列不允许空值。插入失败。

为什么 setter 有空参数？...我是 groovy 及其动态特性的新手

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:05:44.557

In your setter you're creating a new `BankAddress` object and then doing a `save(flush:true)`. One of the properties of your `BankAddress` object is the submitted `Address` object. If the submitted `Address` object hasn't been saved to the database already, the new `BankAddress` object will try to save a `null` id in its foreign key column in the database, which will fail because the foreign key column is not nullable.

Make sure your submitted `Address` object has already been persisted to the database so it has a primary key id, or delay persisting the new `BankAddress` object until later.

# wordpress - .htaccess、mod_rewrite 和基本身份验证

> ID：12203989
> 
> 赞同：6
> 
> 时间：2012-08-30T19:21:56.873
> 
> 标签：wordpress, .htaccess, mod-rewrite, basic-authentication

我在一个 Wordpress 网站上工作，我的页面正在使用一个永久链接结构，该结构 mod_rewrites 它们看起来像目录。对于一些页面，我想使用基本身份验证来密码保护一些页面。我将如何在我的 .htaccess 文件中写这个？我是在保护文件还是重写地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T21:15:40.130

您不需要 mod_rewrite 为此，希望这应该可以解决问题：

```
SetEnvIfNoCase Request_URI ^/some/path/to/protect require_auth=true
SetEnvIfNoCase Request_URI ^/another/protected/path require_auth=true

# Auth stuff
AuthUserFile /var/www/htpasswd
AuthName "Password Protected"
AuthType Basic

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# except if either of these are satisfied
Satisfy any
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_auth" var is NOT set
Allow from env=!require_auth 
```

mod_auth 和 mod_env 模块*应该*优先于 mod_rewrite，所以你的假目录结构应该保持不变。您只需要`SetEnvIfNoCase Request_URI ^/some/path/to/protect require_auth=true`为每个人填写一个，然后填写其余的身份验证内容以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T08:46:17.613

我对此解决方案的唯一问题是单击取消按钮将显示受保护的页面。我试图通过使用来解决这个问题：

```
RewriteCond %{REMOTE_USER} !user
RewriteRule ^/protected-page /unauthenticated-page [R=401] 
```

但这没有用。我不确定为什么。

为了快速而肮脏地解决问题，我添加了

```
ErrorDocument 401 "You don't have access." 
```

要创建重定向，我使用了这个

```
ErrorDocument 401 '<html><head><meta http-equiv="refresh" content="0; url=/unauthenticated-page" /></head><body></body></html>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-03T17:39:50.323

For those who came here with same problem as me, with .htaccess like this

```
AuthType Basic
AuthName "some_name"
AuthUserFile "/path/to/password/passwd"
require valid-user
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

rules above are not working as I expected (authorize, then rewrite)

> because of directive merging order ("If" is merged last)

thanks to [comment from Alek](https://stackoverflow.com/questions/10267102/apache-htaccess-redirect-to-https-before-asking-for-user-authentication#comment-42210075) to point that out

so when I removed IfModule brackets, the rules have begun to work for me.

# ocean - 如何在海洋中保存时域测井数据

> ID：12203990
> 
> 赞同：0
> 
> 时间：2012-08-30T19:22:01.427
> 
> 标签：ocean, petrel

我的插件的输出是时域的welllog。所以我想在海洋中创建具有时域的测井。那我该怎么做？？？？或者如果这是不可能的是否可以在不使用速度模型的情况下从时间到深度改变测井域（我可以使用整个测井轨迹的地震数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:29:27.820

正如您所注意到的，WellLogSample 仅处理 MD 以“定位”样本。日志永远不会在时间上明确定位 - 钻孔可能是。假设您的钻孔具有时间-深度-关系 (TDR)，您可以使用以下内容：

```
Dictionary<double,double> timeValues = ...; // (TWT,value) pairs
Borehole bh = ...;
WellLog log = ...;
using (ITransaction trans = DataManager.NewTransaction())
{
  trans.Lock(log);
  log.Samples = timeValues
    .Select(tv => new WellLogSample(bh.Transform(Domain.TWT, tv.Key, Domain.MD), tv.Value))
    .Where(s => !double.IsNaN(s.MD))
    .OrderBy(s => s.MD);
  trans.Commit();
} 
```