# StackOverflow 问答 10553000-10553999

# c - 这个“（null）”来自哪里

> ID：10553000
> 
> 赞同：0
> 
> 时间：2012-05-11T14:09:13.053
> 
> 标签：c, file-io

我正在尝试实现一些代码来挑选文本文件的最后一行，并且目前正在使用这个示例，但我无法弄清楚如何防止代码在找不到文件时打印出“（null）”，在当它找不到文件的那一刻，它会打印出“文件无法在最后一行打开：没有这样的文件或目录”然后它会在下面打印空的东西，对于这个特定的应用程序，我宁愿它只打印出“文件无法打开”部分，但不打印出空部分，如果有人能为此指出正确的方向，我将不胜感激，谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#ifndef max
#define max(a, b) ((a)>(b))? (a) : (b)
#endif

long GetFileSize(FILE *fp){
    long fsize = 0;

    fseek(fp,0,SEEK_END);
    fsize = ftell(fp);
    fseek(fp,0,SEEK_SET);//reset stream position!!

    return fsize;
}
char *lastline(char *filepath){
    FILE *fp;
    char buff[4096+1];
    int size,i;
    long fsize;
    if(NULL==(fp=fopen(filepath, "r"))){
        perror("file cannot open at lastline");
        return NULL;
    }
    fsize= -1L*GetFileSize(fp);
    if(size=fseek(fp, max(fsize, -4096L), SEEK_END)){
        perror("cannot seek");
        exit(0);
    }
    size=fread(buff, sizeof(char), 4096, fp);
    fclose(fp);
    buff[size] = '\0';
    i=size-1;
    if(buff[i]=='\n'){
        buff[i] = '\0';
    }
    while(i >=0 && buff[i] != '\n')
        --i;
    ++i;
    return strdup(&buff[i]);
}

int main(void){
    char *last;

    last = lastline("data.txt");
    printf("\"%s\"\n", last);
    free(last);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:12:41.487

您可以在该行之后添加这两行`last = lastline("data.txt");`。打印的原因`NULL`是因为您正在打印函数的结果`lastline()`。此函数将`NULL`在失败时返回。

```
if( last != NULL )
    printf( "\"%s\"\n", last ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:12:44.697

它来自这里：`printf("\"%s\"\n", last);`

```
if (last) {
  printf("\"%s\"\n", last);
  free(last);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:26:56.363

您应该检查返回值[`fread`](http://pubs.opengroup.org/onlinepubs/000095399/functions/fread.html)以检查它是否成功。如果`fread`失败，那么`errorno`将被设置并且您的变量`size`不会读取字符数。因此，您随后对变量的使用`buff`：

```
buff[size] = '\0';
i=size-1;
if(buff[i]=='\n'){
    buff[i] = '\0';
} 
```

可能会产生意想不到的结果。`strdup(buff[i])`从函数返回到的 which 也是如此`main`。

# jquery - 外部 .json 文件到 Javascript 变量

> ID：10553001
> 
> 赞同：1
> 
> 时间：2012-05-11T14:09:13.157
> 
> 标签：jquery, ajax, json, google-maps

我目前正在开发一个项目，该项目使用来自 json 文件的旧地图叠加层和折线来实现谷歌地图。json 文件存储在外部，我需要将该文件的内容放入 javascript 变量中，以便在谷歌地图上实现它。我用 ajax 和 jquery 尝试了很多东西，但我无法让它工作。

json 文件位于此处：[http ://www.criva.be/project/modules/browse/json/Brits_1918.json](http://www.criva.be/project/modules/browse/json/Brits_1918.json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:12:59.207

仅当带有 javascript 的页面位于同一域中时，这才有效，即 www.criva.be 否则您需要使用 JSONP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:56:48.583

您是否尝试过在 json 定义`var`前加上 JavaScript 声明，然后直接加载文件，将其视为 JavaScript 文件？

您可以将其添加到`<head>`您的页面：

```
<script type="text/javascript" src="json/Brits_1918.json"></script> 
```

然后将其添加到`Brits_1918.json`文件的前面：

```
var featureCollection =  {
    type: "FeatureCollection",
    features: [ ... ]
} 
```

然后浏览器应该加载 json 文件，浏览器内置的 JavaScript 解析器应该解析它，并将其分配给全局`var`命名：`featureCollection`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:25:34.253

你需要使用 JSON.parse()..对你的 url 进行 ajax 调用，结果是这样，

```
var brits = JSON.parse(results) 
```

然后你就可以使用点符号了，

```
console.log(brits.type) 
```

[http://www.json.org/js.html](http://www.json.org/js.html)

# blackberry - 打包黑莓 OAuth 应用程序抛出错误

> ID：10553003
> 
> 赞同：43
> 
> 时间：2012-05-11T14:09:17.130
> 
> 标签：blackberry, java-me, twitter-oauth, blackberry-eclipse-plugin, blackberry-jde

我正在创建一个将链接发布到 Twitter 的应用程序。以下代码拒绝为我打包，抛出以下错误：

> 错误：无法运行程序“jar”：CreateProcess error=2，系统找不到指定的文件

这是代码：

```
public class ShowAuthBrowser extends MainScreen implements OAuthDialogListener
{
    private final String CONSUMER_KEY = "<Consumer>";   
    private final String CONSUMER_SECRET = "<Secret>";
    private LabelField _labelStutus;
    private OAuthDialogWrapper pageWrapper = null;
    public StoreToken _tokenValue;
    public BrowserField b = new BrowserField();
    Manager _authManager;
    Manager _pinManager;
    ButtonField authButton;
    TextField authPin;

    public ShowAuthBrowser()    
    {   
        _authManager = new VerticalFieldManager(NO_VERTICAL_SCROLL |
                                                NO_VERTICAL_SCROLLBAR);
        _pinManager = new HorizontalFieldManager(NO_VERTICAL_SCROLL |
                                                 NO_VERTICAL_SCROLLBAR);
        authButton = new ButtonField("OK");
        authPin = new TextField(Field.EDITABLE);
        _authManager.add(_labelStutus );
        _authManager.add(b);

        _pinManager.add(authButton);
        _pinManager.add(authPin);

        pageWrapper = new BrowserFieldOAuthDialogWrapper(b,CONSUMER_KEY,
                            CONSUMER_SECRET,null,this);
        pageWrapper.setOAuthListener(this);     

        add(_pinManager);
        add(_authManager);

        authButton.setChangeListener( new FieldChangeListener( ) {
            public void fieldChanged( Field field, int context ) {
                if( field == authButton ) {
                       doAuth(authPin.getText());
                }
            }
        } );

    }

    public void doAuth( String pin )
    {
        try
        {
            if ( pin == null )
            {
                pageWrapper.login();
            }
            else
            {
                this.deleteAll();
                add(b);
                pageWrapper.login( pin );
            } 

        }
        catch ( Exception e )
        {
            final String message = "Error logging into Twitter: " + 
                                                e.getMessage();
            Dialog.alert( message );
        }           
    }

    public void onAccessDenied(String response ) {

        updateScreenLog( "Access denied! -> " + response );

    }

    public void onAuthorize(final Token token) {

        final Token myToken = token;
        _tokenValue = StoreToken.fetch();
        _tokenValue.token = myToken.getToken();
        _tokenValue.secret = myToken.getSecret();
        _tokenValue.userId = myToken.getUserId();
        _tokenValue.username = myToken.getUsername();
        _tokenValue.save();

        UiApplication.getUiApplication().invokeLater( new Runnable() {

            public void run() {
                deleteAll();
                Credential c = new Credential(CONSUMER_KEY, 
                                              CONSUMER_SECRET, 
                                              myToken);
                PostTweet tw = new PostTweet();
                String message="Testing BB App";
                boolean done=false;
                done=tw.doTweet(message, c);
                if(done == true)
                {
                    Dialog.alert( "Tweet succusfully..." );
                    close();    
                }
            }
        });

    }

    public void onFail(String arg0, String arg1) {
        updateScreenLog("Error authenticating user! -> " + arg0 + ", " + arg1);
    }

    private void updateScreenLog( final String message )
    {
        UiApplication.getUiApplication().invokeLater( new Runnable() {

            public void run() {
                _labelStutus.setText( message );                
            }
        });
    }
} 
```

奇怪的是，如果我删除以下行，它会很好地打包：

```
authButton.setChangeListener( new FieldChangeListener( ) {
        public void fieldChanged( Field field, int context ) {
            if( field == authButton ) {
                   doAuth(authPin.getText());
            }
        }
    } ); 
```

任何帮助将不胜感激，因为我真的需要附加到此屏幕的现场侦听器。

使用类似的代码`authButton.setChangeListener(null)`，它确实可以成功打包，但是我确实需要代码`FieldChangeListener`来做某事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:49:12.737

确保在环境变量中设置了您的 java bin 路径。

[http://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

并查看以下网站中的最后 3 个帖子：

[http://supportforums.blackberry.com/t5/Java-Development/IO-Error-Cannot-run-program-quot-jar-quot-CreateProcess-error-2/td-p/522638](http://supportforums.blackberry.com/t5/Java-Development/I-O-Error-Cannot-run-program-quot-jar-quot-CreateProcess-error-2/td-p/522638)

还要确保计算机上安装了 Java® 软件开发工具包 (Java SDK/JDK)，并且使用了正确版本的 Java SDK。

[http://supportforums.blackberry.com/t5/Java-Development/IO-Error-CreateProcess/ta-p/445949](http://supportforums.blackberry.com/t5/Java-Development/I-O-Error-CreateProcess/ta-p/445949)

正如下面的 Scott Boettger 评论中提到的，这篇文章也可能会有所帮助：http: [//supportforums.blackberry.com/t5/Java-Development/why-cause-more-then-100-compiled-classes-packaging-IO-错误/mp/520282](http://supportforums.blackberry.com/t5/Java-Development/why-cause-more-then-100-compiled-classes-packaging-I-O-error/m-p/520282)

# javascript - 信息框上的边界检测，因此它们不会脱离地图

> ID：10553007
> 
> 赞同：4
> 
> 时间：2012-05-11T14:09:28.067
> 
> 标签：javascript, google-maps, google-maps-api-3

重新计算信息框位置的最佳方法是什么，它总是试图在地图内完全绘制但不移动地图。

因此，如果我尝试打开一个靠近窗口右边缘的信息框，它应该将信息框绘制到标记的左侧而不是它的顶部，或者它的左侧。

有没有框架？

谢谢 ！

我的信息框选项每个请求。

```
 var myOptions = {
             content: this.bigInfo(variables)
            ,disableAutoPan: false
            ,maxWidth: 0
            ,pixelOffset: new google.maps.Size(20, -60)
            ,zIndex: 9
            ,boxClass: "bigInfo"
            ,closeBoxMargin: "-9px -9px 3px 3px"
            ,closeBoxURL: "./img/close.png"
            ,infoBoxClearance: new google.maps.Size(100,100)
            ,isHidden: false
            ,pane: "floatPane"
            ,enableEventPropagation: false
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:09:00.407

我对 InfoBoxes 有一个 hack。它依赖于从 LatLng 到我在另一个问题中找到的屏幕像素的转换，`fromLatLngToContainerPixel`. 谷歌文档描述告诉像素位置是在“地图的外部容器”中测量的。但是，回答者警告说，它的兄弟函数`fromLatLngToDivPixel`. 不可靠，因为它会因调整大小或缩放而冻结。

所以，我的代码使用`fromLatLngToContainerPixel`. 如果您尝试使用我的代码，请在您的代码中玩耍，看看是否需要更改偏移量。在我的代码中，我有一个固定的信息框宽度为 86 像素。

单击中心，然后单击可见区域的边缘。地图不会移动。

这是 JSFiddle：http: [//jsfiddle.net/eHT9U/](http://jsfiddle.net/eHT9U/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html, body { margin: 0; padding: 0; height: 100% }
      #map_canvas { width: 100%; height: 300px }
      #container { padding: 10px; }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="infobox_alt.js"></script>
    <script type="text/javascript" src="jquery.js"></script>    
    <script type="text/javascript">
      var map;
      var mapOptions = {
        center: new google.maps.LatLng(40.0, -88.0),
        zoom: 12,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var count = 0;

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        overlay = new google.maps.OverlayView();
        overlay.draw = function() {};
        overlay.setMap(map);

        google.maps.event.addListener(map, 'click', function (event) {
          count += 1;
          pt = overlay.getProjection().fromLatLngToContainerPixel(event.latLng);
          document.getElementById("end").value = pt;
          addMarker(event.latLng, "index #" + Math.pow(100, count), pt.x, pt.y);
        });
      }

      function addMarker(pos, content, x, y) {
        var marker = new google.maps.Marker({
          map: map,
          position: pos
        });
        marker.setTitle(content);

        var labelText = content;

        var myOptions = {
          content: labelText
           ,boxStyle: {
              border: "1px solid black"
             ,background: "white"
             ,textAlign: "center"
             ,fontSize: "8pt"
             ,width: "86px"  // has to be set manually
             ,opacity: 1.0
             ,zIndex: -100
            }
           ,disableAutoPan: true
           ,position: marker.getPosition()
           ,closeBoxURL: ""
           ,pane: "floatPane"
           ,enableEventPropagation: true
           ,zIndex:-1
        };
        offX = -43;
        offY = 0;
        //compare boundaries
        if(x > $("#map_canvas").width() - 60) {
          offX = -86;
        } 
        if(x < 60) {
      offX = 0;
        } 
        if(y > $("#map_canvas").height() - 60) {
          offY = -50;
        } 
    myOptions.pixelOffset = new google.maps.Size(offX,offY);

        var ibLabel = new InfoBox(myOptions);
        ibLabel.setZIndex(-1);
        ibLabel.open(map);

        var infowindow = new google.maps.InfoWindow({ 
          content: content
        });

        google.maps.event.addListener(marker, 'click', function (event) {
          infowindow.open(map, this);
          ibLabel.setZIndex(-1);
          this.setZIndex(1);
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    end: <input id="end" size="30">
    <div id="container">
      <div id="map_canvas"></div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:39:55.807

我发现这个例子适合你的要求

[http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:40:06.160

有一个代码示例[SmartInfoWindow](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html)，它使用`InfoWindow`. 以此为例，您应该能够朝着正确的方向开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-12T20:08:59.427

我也遇到了这个问题，我的解决方案是使用 panBy。

```
map.panBy(0, -100);    // panning to show full infobox    (xoffset,yoffset) 
```

# php - 在 MySQL 控制台中将多个值连接到一行中，但在 PHP 中无效

> ID：10553010
> 
> 赞同：0
> 
> 时间：2012-05-11T14:09:34.197
> 
> 标签：php, mysql, sql

当我尝试在 MySQL 控制台中运行以下代码时，它会给我一个正确的有效输出：

```
SELECT * , GROUP_CONCAT( phonenr
SEPARATOR  ', ' ) 
FROM employee AS e
JOIN phonenr AS p ON p.ssn = e.ssn GROUP BY e.ssn 
```

当我在 PHP 中运行相同的代码时：

```
$result = mysql_query(
'SELECT * , GROUP_CONCAT(phonenr
SEPARATOR  ', ' ) 
FROM employee AS e JOIN phonenr AS p ON p.ssn = e.ssn GROUP BY e.ssn'); 
```

启动网站时出现以下错误：

警告：mysql_query()：提供的参数不是第 17 行 C:\AppServ\www\test.php 中的有效 MySQL-Link 资源 无法查询：

不知道为什么 PHP 拒绝这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:10:44.233

是报价问题。您将查询用单引号括起来，这与您在`GROUP_CONCAT`函数中使用的单引号冲突。

```
$result = mysql_query(
"SELECT * , GROUP_CONCAT(phonenr
SEPARATOR  ', ' ) 
FROM employee AS e JOIN phonenr AS p ON p.ssn = e.ssn GROUP BY e.ssn"); 
```

# c# - 检索时区/当地时间

> ID：10553013
> 
> 赞同：1
> 
> 时间：2012-05-11T14:09:42.517
> 
> 标签：c#, timezone

您好，我将确定一种输入任何类型位置数据的方法（我可以满足任何类型的需求），例如城市/州、邮政编码、街道地址等。然后取回该位置的当地时间。

该功能是在某个地方构建的，还是我可以使用已经开发的好的资源/类？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:44:34.690

最终从谷歌搜索中检索搜索结果，因为我没有纬度/经度。

用户 HTML Agility 提取页面内容，过滤包含“时间”的节点，很简单，第一项就是需要的结果。

如果您使用谷歌搜索“time cincinnati oh”，您会在页面顶部返回“周五（美国东部时间）下午 1:41 - 俄亥俄州辛辛那提时间”。此代码块将其提取出来。安全的是，如果时间无法确定，搜索页面只显示结果，所以数组中的第一项就像“显示“yourSearch”的结果”等。

```
public void timeZoneUpdate()
        {
            try
            {
                arrayToParse.Clear();

                string URL = @"https://www.google.com/search?q=time+" + rowCity + "%2C+" + rowState;

                HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(URL);
                myRequest.Method = "GET";
                WebResponse myResponse = myRequest.GetResponse();
                StreamReader sr = new StreamReader(myResponse.GetResponseStream(), System.Text.Encoding.UTF8);
                string result = sr.ReadToEnd();
                sr.Close();
                myResponse.Close();
                //Console.Write(result);

                HtmlAgilityPack.HtmlDocument htmlSnippet = new HtmlAgilityPack.HtmlDocument();
                htmlSnippet.Load(new StringReader(result));

                bool foundSection = false;

                foreach (HtmlAgilityPack.HtmlNode table in htmlSnippet.DocumentNode.SelectNodes("//table"))
                {
                    foreach (HtmlAgilityPack.HtmlNode row in table.SelectNodes("tr"))
                    {
                        foreach (HtmlAgilityPack.HtmlNode cell in row.SelectNodes("td"))
                        {
                            if (cell.InnerText.Contains("Time"))
                            {
                                foundSection = true;
                            }
                            if (foundSection)
                            {
                                //Console.WriteLine("Cell value : " + cell.InnerText);
                                arrayToParse.Add(cell.InnerText);
                            }
                        }
                    }
                }
            retrievedTimeZone = arrayToParse[0].ToString().Split('-')[0].Trim();

            if(retrievedTimeZone.Contains("Showing"))
            {
                retrievedTimeZone = "Undetermined";
            }
        } 
```

# css - css 两个 div 向左浮动。右 div 不覆盖剩余空间

> ID：10553017
> 
> 赞同：0
> 
> 时间：2012-05-11T14:09:47.133
> 
> 标签：css

我有两个 div leftSide 和 rightSide，它们的父级是 innerContainer。我已将两个 div 浮动到左侧。它们并排出现，但右侧 div 并未覆盖父 div 的剩余空间。

我尝试使用溢出：隐藏并且还指定了宽度，但它仍然具有相同的宽度。

我的CSS：

```
 #container {
  overflow:auto;
  margin:10px auto;
}

   #innerContainer{
        margin:10px auto;   
        width:1200px;
        background:#FFFFFF;
        border:2px solid #09F;
        overflow:auto;
}

 #leftSide{
overflow:auto;
float:left;
width:700px;
border:3px solid #F00;
 }

 #topheaderProfile{
margin:5px;
border:1px solid #F00;
  }

   #middleCompanyDescription{
margin:5px;
border:1px solid #333;
  }

  #Profile{
text-align:left;
  }

 .ProfileBox{
padding:10px;
cursor:pointer;
overflow:hidden;
text-align:left;
word-break:break-all;
word-wrap:break-word;
 }

 .CompanyLogo{
float:left;
padding:5px;
 }

 .rightCover{
overflow:auto;
padding:1px;
 }

  .companyTitle{
color:#36F;
font-size:24px;
overflow:hidden;
 }

 .companyTitle a{
text-decoration:none;
 }

 .CompanyRating{
float:left;
margin-top:3px;
 }

 .Companylikedicon{
overflow:hidden;
float:right;
margin-left:10px;
 }

.Companycommenticon{
float:right;
margin-right:10px;
}

.CompanySlogan{
color:#999;
word-break:break-all;
word-wrap:break-word;
clear:both;
 }

  #rightSide{
width:100px;
border:1px solid #000;
  } 
```

我的HTML：

```
 <div id="container">
     <div id="innerContainer">

           <div id="leftSide"> 

        <div id="topheaderProfile">
            <div id='Profile'>
                <div class='ProfileBox'>
                    <div class='CompanyLogo'><img src='../Images/defaultPic.jpg' width='90' height='90'/></div> 
                    <div class='rightCover'>
                        <div class='companyTitle'>My Company</div>
                        <div class='CompanyRating'>
                                            Rating : <img src='../Images/FilledStar.png' width='20' height='20' id='Star1' />       
                                            <img src='../Images/EmptyStar.png' width='20' height='20' id='Star2' />
                                            <img src='../Images/EmptyStar.png' width='20' height='20' id='Star3' />
                                            <img src='../Images/EmptyStar.png' width='20' height='20' id='Star4' />
                                            <img src='../Images/EmptyStar.png' width='20' height='20' id='Star5' />
                         </div>

                         <div class='Companylikedicon'><img src='../Images/LikedIcon.png'  width='25' height='25' /> 100</div>
                         <div class='Companycommenticon' ><img src='../Images/comment.png'  width='25' height='25' /> 100</div>

                         <div class='CompanySlogan'>This is the best offer you get 2Rs. off in the besaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaat underwear of the worldffer you get 2Rs. off in the besaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaat underwear of the world.</div>
                   </div>

               </div>    <!--ProfileBox-->
            </div>
           </div><!--TopHeeaderProfile-->

    <div id="middleCompanyDescription">
sadasdsad
    </div>

         </div>     <!--LeftSide-->

        <div id="rightSide">
          sadasdasdasd
        </div>

     </div>

 </div> 
```

好的，我找到了问题。还有另一个 css 文件包含与此文件中相同的 id 名称。这导致了问题。该文件的属性正在此处应用。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:16:00.840

> 我尝试使用溢出：隐藏并且还指定了宽度，但它仍然具有相同的宽度。

如果要填充剩余空间，请使用`overflow: hidden`但不要指定任何内容。`width``#rightSide`

**见：http:** [//jsfiddle.net/thirtydot/Yuxzs/](http://jsfiddle.net/thirtydot/Yuxzs/)

```
#rightSide {
    overflow: hidden;
    border: 1px solid #000;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:16:05.277

尝试这个：

```
<style type="text/css">
#rightSide {
 width:100px;
 border:1px solid #000;
 float:left;
}
</style> 
```

# azure - 在 Azure Blob 存储中存储文件组

> ID：10553023
> 
> 赞同：1
> 
> 时间：2012-05-11T14:10:08.893
> 
> 标签：azure, azure-storage, azure-blob-storage

我有使用以下结构的文件组：

RandomFolderName1 [File1.jpg, File2.jpg, File3.jpg...]

RandomFolderName2 [File1.jpg, File2.jpg, File3.jpg...]

我想知道将其存储在 Blob 存储中的最糟糕的方法是什么。

我是否应该对每个文件名使用 GUID.jpg 并管理 DB 中的文件夹结构
我应该使用 FolderName+FileName.jpg，但再次必须管理 DB 中的文件夹结构
我应该为文件夹使用容器并且里面有 File1 .jpg, File2.jpg, File3.jpg ...
我应该将整个 ForderName 存储为 zip 并包含所有文件

有没有其他方法可以在 Blob 存储中定义文件夹结构？

**编辑**：将基于文件夹访问文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:51:23.550

因此，您可以在 Azure blob 中使用文件名，例如“randomfoldername1/file1.jpg”。它看起来像一个文件夹结构，一些 GUI 客户端甚至会让你像它一样导航。但现实情况是，“容器”是唯一真正的分组因素，从那里它只是根据部分文件名过滤该容器中的文件。

因此，要回答您的问题，您可能可以将所有文件放入一个容器中。容器有助于控制访问策略，每个 blob 都有自己的性能目标。除了 acl 原因之外，将它们拆分到同一容器中的 blob 的唯一其他原因是，如果您有足够的 blob 查询它们会由于数量过多而开始降级（或者您超出了存储帐户吞吐量目标）。

您可以在以下位置找到有关 Azure 存储抽象和吞吐量目标的更多信息：http: [//www.windows-azure.net/windows-azure-storage-abstractions-and-their-scalability-targets/](http://www.windows-azure.net/windows-azure-storage-abstractions-and-their-scalability-targets/)

# java - JavaMail API：检查服务器的大小限制

> ID：10553026
> 
> 赞同：1
> 
> 时间：2012-05-11T14:10:19.347
> 
> 标签：java, email, size, jakarta-mail

有没有办法检查您用来发送电子邮件的服务器的电子邮件大小限制？我怀疑是否有办法检查您要发送给的人（但如果有办法我也很想听听）。我猜这可能取决于您使用的服务器，所以我会专门询问 Google Apps/Gmail 服务器，以便了解要点。任何其他指针将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:40:36.667

根据我的经验 - 不。每个服务器都有自己的限制，无法使用 JavaMail Api 自动检测到它。

我的解决方法：我在属性文件中创建了一个地图服务器 - 限制并在从用户发送邮件时使用它。您可以访问每台服务器并从站点定义它。如果在我的地图中没有找到服务器，我会使用默认限制。

而且也没有关于超出限制的标准通知。我的意思是发送超出限制的文件时出现异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:10:39.623

SMTP 允许服务器报告它允许的最大邮件大小。并非所有服务器都这样做。 [这个线程](https://forums.oracle.com/forums/thread.jspa?threadID=2364840&tstart=0)有更多细节。

# c++ - boost::interprocess::managed_shared_memory 崩溃程序

> ID：10553027
> 
> 赞同：3
> 
> 时间：2012-05-11T14:10:30.183
> 
> 标签：c++, boost, shared-memory, boost-interprocess

我的目标是创建一个名为 SharedMemory 的模板单例类，它可以使用 boost::interprocess::managed_shared_memory 将给定的数据结构存储在共享内存中的映射中。

```
#ifndef SHARED_MEMORY_H_
#define SHARED_MEMORY_H_

#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/containers/map.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <functional>
#include <string>
#include <utility>
#include <map>

using namespace boost::interprocess;

template<typename T>
class SharedMemory {
  typedef std::pair<std::string, T> ValueType;
  typedef allocator<ValueType, managed_shared_memory::segment_manager>
    ShmemAllocator;
  typedef map<std::string, T, std::less<std::string>, ShmemAllocator> SharedMap;

  public:
    static SharedMemory<T>& instance();
    void Create();
    void Destory();
    void insert(T* t);
    std::map<std::string, T> getMapOfRecords();
  private:
  SharedMemory();
  ~SharedMemory(){delete m_segment;}
  void Initialize();
  managed_shared_memory* m_segment;
  std::size_t m_size;
};

template<typename T>
inline void SharedMemory<T>::Create() {
  Destory();
  m_segment = new  managed_shared_memory(create_only, T::memory(), m_size);
  ShmemAllocator alloc_inst (m_segment->get_segment_manager());
  m_segment->construct<SharedMap>("SageMap")(std::less<std::string>(), alloc_inst);
}

template<typename T>
inline void SharedMemory<T>::Destory() {
  shared_memory_object::remove(T::memory());
}

template<typename T>
inline SharedMemory<T>& SharedMemory<T>::instance() {
  static SharedMemory<T> instance;
  return instance;
}

template<typename T>
inline SharedMemory<T>::SharedMemory()
    : m_size(65536) {

}

template<typename T>
inline void SharedMemory<T>::insert(T* t) {
  SharedMap* mymap = m_segment->find<SharedMap>("SageMap").first;
  mymap->insert(std::pair<std::string, T>(t->key(), *t));
}

template<typename T>
inline std::map<std::string, T> SharedMemory<T>::getMapOfRecords() {
  SharedMap* mymap = m_segment->find<SharedMap>("SageMap").first;
  return std::map<std::string, T>(mymap->begin(), mymap->end());
}
#endif 
```

这是一个如何使用它的例子。

```
#include <boost/lexical_cast.hpp>
#include <cstring>
#include <cstdlib>
#include <string>
#include <iostream>
#include <functional>
#include <utility>
#include "SharedMemory.hpp"

struct simple_type {
  int i;
  std::string key() {return boost::lexical_cast<std::string>(i);}
  static const char* memory() {return std::string("simple_memory_page").c_str();}
  simple_type(int i): i(i){}
};

int main(int argc, char *argv[])
{
  if(argc == 1) {
    SharedMemory<simple_type>& test = SharedMemory<simple_type>::instance();
    test.Create();
    test.insert(new simple_type(1));
    test.insert(new simple_type(2));
    std::string s(argv[0]); s += " child ";
    if(0 != std::system(s.c_str()))
        return 1;
    test.Destory();
  } else {
    SharedMemory<simple_type>& test = SharedMemory<simple_type>::instance();
    std::map<std::string, simple_type> records = test.getMapOfRecords();
    for(auto it = records.begin(); it != records.end(); ++it) {
      std::cout << it->second.i << std::endl;
    }
  }
  return 0;
} 
```

这是一个堆栈跟踪：

```
position_monitor_eu.exe!boost::interprocess::offset_ptr<boost::intrusive::compact_rbtree_node<boost::interprocess::offset_ptr<void> > >::get_pointer()  Line 81 + 0x1a bytes    C++
position_monitor_eu.exe!boost::interprocess::offset_ptr<boost::intrusive::compact_rbtree_node<boost::interprocess::offset_ptr<void> > >::get()  Line 153 + 0x16 bytes   C++
position_monitor_eu.exe!boost::interprocess::offset_ptr<boost::intrusive::compact_rbtree_node<boost::interprocess::offset_ptr<void> > >::offset_ptr<boost::intrusive::compact_rbtree_node<boost::interprocess::offset_ptr<void> > >(const boost::interprocess::offset_ptr<boost::intrusive::compact_rbtree_node<boost::interprocess::offset_ptr<void> > > & ptr={...})  Line 117 + 0x16 bytes   C++
position_monitor_eu.exe!boost::intrusive::compact_rbtree_node_traits_impl<boost::interprocess::offset_ptr<void> >::get_left(boost::interprocess::offset_ptr<boost::intrusive::compact_rbtree_node<boost::interprocess::offset_ptr<void> > const > n={...})  Line 124 + 0x17 bytes   C++
position_monitor_eu.exe!boost::intrusive::rbtree_impl<boost::intrusive::setopt<boost::intrusive::detail::base_hook_traits<boost::container::containers_detail::rbtree_node<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,simple_type>,boost::interprocess::offset_ptr<void> >,boost::intrusive::rbtree_node_traits<boost::interprocess::offset_ptr<void>,1>,0,boost::intrusive::default_tag,3>,boost::container::containers_detail::node_compare<boost::container::containers_detail::value_compare_impl<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,simple_type>,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,boost::container::containers_detail::select1st<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,simple_type> > >,boost::container::containers_detail::rbtree_node<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,simple_type>,boost::interprocess::offset_ptr<void> > >,unsigned int,1> >::begin()  Line 273 + 0x42 bytes   C++
position_monitor_eu.exe!boost::container::containers_detail::rbtree<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,simple_type>,boost::container::containers_detail::select1st<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,simple_type> >,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,boost::interprocess::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,simple_type>,boost::interprocess::segment_manager<char,boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,boost::interprocess::offset_ptr<void>,0>,boost::interprocess::iset_index> > >::begin()  Line 493 + 0x28 bytes  C++
position_monitor_eu.exe!boost::container::map<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,simple_type,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,boost::interprocess::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,simple_type>,boost::interprocess::segment_manager<char,boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family,boost::interprocess::offset_ptr<void>,0>,boost::interprocess::iset_index> > >::begin()  Line 245 + 0x1a bytes   C++
position_monitor_eu.exe!SharedMemory<simple_type>::getMapOfRecords()  Line 68 + 0x1e bytes  C++
position_monitor_eu.exe!main(int argc=2, char * * argv=0x02b03db8)  Line 200 + 0xc bytes    C++
position_monitor_eu.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes  C
position_monitor_eu.exe!mainCRTStartup()  Line 371  C
kernel32.dll!77003677()     
[Frames below may be incorrect and/or missing, no symbols loaded for kernel32.dll]  
ntdll.dll!775cc002()    
ntdll.dll!775cbfd5() 
```

我当前的问题是程序崩溃调用`mymap->begin()`in `getMapOfRecords()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T21:07:57.203

看起来您将`std::string`类型放在共享内存中，这不起作用，因为它会为自己分配非共享内存。您应该使用`boost::interprocess::basic_string`类型而不是 from `<boost/interprocess/containers/string.hpp>`。[这里](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/allocators_containers.html#interprocess.allocators_containers.containers_explained.containers_of_containers)有一个将字符串放入地图的示例。

* * *

为了回答您在上面的评论中提出的问题，`string::c_str()`字符串被破坏后返回的值变得无效。这意味着访问返回的指针`memory()`将导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:22:45.227

补充一下 interjay 写的关于 string::c_str() 的内容，返回的值在第一次非常量成员调用字符串对象之后不能保证有效。因此，对 string::resize 的后续调用可能会使 string::c_str() 返回的值无效。

# c# - 如何从后面的代码修改资源的属性？

> ID：10553030
> 
> 赞同：1
> 
> 时间：2012-05-11T14:10:33.903
> 
> 标签：c#, wpf, resources

我创建了一个用户控件元素，它有一个具有个人风格的按钮。
在这种风格中，我有一个名为“矩形”的矩形。
现在我想从后面的代码中改变这个矩形的可见性。
我怎样才能做到这一点？
或者一般来说：如何从后面的代码中更改资源的任何属性？

Button_Field.xml

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
    mc:Ignorable="d"
    x:Class="WpfControlLibrary_Battleship.Button_Field"
    x:Name="UserControl"
    d:DesignWidth="512" d:DesignHeight="512" Width="Auto" Height="Auto">
    <UserControl.Resources>
        <Style x:Key="ButtonStyle_FieldWater" TargetType="{x:Type Button}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid x:Name="Grid">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.Background>
                                <ImageBrush ImageSource="Images/Water.jpg"/>
                            </Grid.Background>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition From="MouseOver" GeneratedDuration="0">
                                            <Storyboard>
                                                <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_1"/>
                                                <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_2"/>
                                                <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_3"/>
                                                <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_4"/>
                                            </Storyboard>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_1">
                                                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                            </DoubleAnimationUsingKeyFrames>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_2">
                                                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                            </DoubleAnimationUsingKeyFrames>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_3">
                                                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                            </DoubleAnimationUsingKeyFrames>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Path_4">
                                                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                            </DoubleAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed"/>
                                    <VisualState x:Name="Disabled"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Path x:Name="Path_1" Data="M2.5,2.5 L82.833332,2.5 M2.5000006,2.5 L2.5000006,82.833329" HorizontalAlignment="Stretch" Height="Auto" Margin="0" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" VerticalAlignment="Stretch" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                            <Path x:Name="Path_2" Grid.Column="6" Data="M2.5,2.5 L82.833356,2.5 M82.833333,2.5 L82.833333,82.833335" HorizontalAlignment="Stretch" Height="Auto" Margin="0" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" VerticalAlignment="Stretch" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                            <Path x:Name="Path_3" Data="M2.5,2.5 L2.5,82.833328 M2.5,82.833323 L82.833336,82.833323" HorizontalAlignment="Stretch" Margin="0" Grid.Row="6" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                            <Path x:Name="Path_4" Grid.Column="6" Data="M2.5000001,168.16667 L168.16665,168.16667 M168.16666,2.5000051 L168.16666,168.1667" HorizontalAlignment="Stretch" Height="Auto" Margin="0" Grid.Row="6" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" VerticalAlignment="Stretch" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                            <Rectangle x:Name="Rectangle" Grid.ColumnSpan="8" Fill="Red" Margin="0" Grid.RowSpan="8" Stroke="Black" Opacity="0.495">
                                <Rectangle.Visibility>
                                    <Visibility>Hidden</Visibility>
                                </Rectangle.Visibility>
                            </Rectangle>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True"/>
                            <Trigger Property="IsDefaulted" Value="True"/>
                            <Trigger Property="IsMouseOver" Value="True"/>
                            <Trigger Property="IsPressed" Value="True"/>
                            <Trigger Property="IsEnabled" Value="False"/>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Button x:Name="Button" Content="Button" Style="{DynamicResource ButtonStyle_FieldWater}"/>
</UserControl> 
```

Button_Field.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Battleship_LOGIC;

namespace WpfControlLibrary_Battleship
{
    /// <summary>
    /// Interaktionslogik für Button_Field.xaml
    /// </summary>
    public partial class Button_Field : UserControl
    {
        private Battleship_LOGIC.Game_Logic.Point _point;

        public Button_Field(Battleship_LOGIC.Game_Logic.Point point)
        {
            InitializeComponent();
            _point = point;
        }

        public void redBackground()
        {
            //Set Visibility of Rectangle to "Visible"
        }

        public Battleship_LOGIC.Game_Logic.Point Point
        {
            get { return _point; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:20:42.790

尝试这个：

```
var rect = (Rectangle)Button.Template.FindName("Rectangle", Button);
rect.Visibility = System.Windows.Visibility.Visible; 
```

# .net - .NET 应用程序中与本机堆相关的内存泄漏

> ID：10553034
> 
> 赞同：2
> 
> 时间：2012-05-11T14:10:43.140
> 
> 标签：.net, memory-leaks, out-of-memory, unmanaged-memory

我们有一个 .NET 2.0 应用程序，它是一项服务，主要通过 .NET 远程处理连接多个客户端。该服务在生产期间在客户端站点因**OutOfMemory 异常**而崩溃，因此目前他们被迫每天左右重新启动它以避免意外崩溃。

以前，我已经成功解决了托管代码中的几个内存泄漏案例（静态集合未清理保存在其中的对象，以及另一个逻辑线程数不断增加的案例）。所以我非常熟悉捕获内存转储并使用 WinDbg + SOS 搜索它们。

然而，在这种情况下，私有字节正在上升，而所有堆上的字节保持稳定，这表明**非托管代码内存泄漏**。我收到了带有实际 OOM 异常的故障转储，这使得它更加明显：

![!address -摘要](../Images/8636c4e7289e7fe25b4d9adb877c48f9.png)

查看 Tess Ferandez 的关于处理 .NET 应用程序中非托管代码泄漏的博客以及网络上的其他一些资源，我排除了诸如大量**动态程序集**、常见**XmlSerializer**问题或**3rd 方本机 DLL**等问题（有没有）。但是，周围有很多**P/Invokes**。继续前进，检查堆返回给我以下信息：

![堆](../Images/1076ca4c4f95503327126a15998cb0df.png)

第二个命令也返回了所有条目。现在，根据我读到的一些东西，我应该运行 !heap -p -a 来获取堆栈，但我得到的只是

![这个](../Images/0c91da20a20680ec90286606a27608c6.png)

根据[这个问题](https://stackoverflow.com/questions/7968116/native-memory-leak-how-to-find-callstack-of-allocation-source)，这是不正确的 gflags 使用等。但是，在本地启动服务并在其上附加调试器，目前**不是**一种选择。长话短说，我必须设置一个具有与客户端类似的配置和负载的环境才能完成它，但这还没有准备好。

所以，我很困惑。我不知道从哪里开始，或者即使我使用正确的方法来解决该问题。任何指针都非常受欢迎。

**编辑#1：**使用外部资源的线程上的 Thread.abort。具体来说，数据库连接通过 Oracle 的 ODP.NET 提供程序。这可能是本机堆泄漏的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:17:59.677

> 但是，周围有很多 P/Invokes
> 
> 编辑#1：使用外部资源的线程上的 Thread.abort

这只是出现这种问题的完美风暴。它们中的任何一个都足以单独导致不受控制的内存泄漏。在你的开发机器上看起来一切都是花花公子。但它肯定不是在执行真机正在处理的那种数据负载。

您不会从工具中获得很多帮助，无论如何也不会从 .NET 中获得帮助。绝对从完全摆脱线程中止开始，这永远不会结束。你没有给出任何背景，因为你很难给出具体的建议。绝对要建立一个包含虚假自动生成数据的数据库，这样您就可以在舒适的小隔间中检查代码调整的结果。您需要大量数据，因为它泄漏的速度不够快。

如果您仍然遇到问题，那么您需要 gflags.exe 和 umdh.exe 等工具，这些工具可在 Windows 调试工具中找到。现在是 SDK 的一部分。最后的手段，它们只适用于调试符号，而甲骨文并不是那种让这变得容易的公司。他们的生态系统对“我会解决你的问题”的高薪顾问很友好。如果您找到合适的，这也可以解决。

# android - 如何在 Listview 的列表项之间添加行？

> ID：10553036
> 
> 赞同：2
> 
> 时间：2012-05-11T14:10:47.467
> 
> 标签：android

我有数组列表。我循环并获得 2-3 组的值。这次我得到了所有的值，但是在同一页中。我想分隔页面中的值集。我该如何划分集合。

这是我的代码：

```
 ListAdapter mSchedule;
        ListView list = (ListView) findViewById(R.id.orderlistview);
        orderList = new ArrayList<Order>();
        orderList = login.getOrderList();
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map = new HashMap<String, String>();
        for(int i=0;i<login.getOrdercount();i++)
        {
            map = new HashMap<String, String>();
            map.put("Name", "Open");
            map.put("Value", orderList.get(i).getOpen());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "Type");
            map.put("Value", orderList.get(i).getType());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "Status");
            map.put("Value", orderList.get(i).getStatus());        //     mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "OrderNumber");
            map.put("Value", orderList.get(i).getOrderNumber());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "OrderDate");
            map.put("Value", orderList.get(i).getOrderDate()); 
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "InvoiceNumber");
            map.put("Value", orderList.get(i).getInvoiceNumber());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "InvoiceDate");
            map.put("Value", orderList.get(i).getInvoiceDate());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "Days");
            map.put("Value", orderList.get(i).getDays());
            mylist.add(map);                
            map = new HashMap<String, String>();
            map.put("Name", "ReferenceNumber1");
            map.put("Value", orderList.get(i).getReferenceNumber1());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "ReferenceNumber2");
            map.put("Value", orderList.get(i).getReferenceNumber2());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "LineNumber");
            map.put("Value", orderList.get(i).getLineNumber());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "pid");
            map.put("Value", orderList.get(i).getPid());
            mylist.add(map);

            map = new HashMap<String, String>();
            map.put("Name", "MfgCode");
            map.put("Value", orderList.get(i).getMfgCode());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "MfgName");
            map.put("Value", orderList.get(i).getMfgName());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "PartNumber");
            map.put("Value", orderList.get(i).getPartNumber());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "Description");
            map.put("Value", orderList.get(i).getDescription());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "OrderQuantity");
            map.put("Value", orderList.get(i).getOrderQuantity());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "ShipQuantity");
            map.put("Value", orderList.get(i).getShipQuantity());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "BackorderQuantity");
            map.put("Value", orderList.get(i).getBackorderQuantity());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "Eta");
            map.put("Value", orderList.get(i).getEta());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "UnitPrice");
            map.put("Value", orderList.get(i).getUnitPrice());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "UnitCoreCharge");
            map.put("Value", orderList.get(i).getUnitCoreCharge());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "AuthorizationOrReferenceNumber");
            map.put("Value", orderList.get(i).getAuthorizationOrReferenceNumber());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "OutboundTracking");
            map.put("Value", orderList.get(i).getOutboundTracking());
            mylist.add(map);
            map = new HashMap<String, String>();
            map.put("Name", "InboundTracking");
            map.put("Value", orderList.get(i).getInboundTracking()+"\n");
            mylist.add(map);

        }

    mSchedule = new SimpleAdapter(this, mylist, R.layout.order_list_item,
                new String[] {"Name", "Value"}, new int[] {R.id.catagory, R.id.value});
    list.setAdapter(mSchedule); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:52:10.443

为了做到这一点，您应该对[ArrayAdapter进行子分类。](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

在每个集合的末尾，您可以添加一个特殊的列表项，以便在 getView 方法中，只要该项目是那个特殊的，您就可以绘制分隔线。

# magento - 无效的电子邮件消息未显示在 magento 的登录页面中

> ID：10553038
> 
> 赞同：0
> 
> 时间：2012-05-11T14:10:54.730
> 
> 标签：magento

我目前正在主页上制作登录表单。但是在每次无效尝试后，消息都没有显示在正确的位置

即在帐户仪表板和忘记密码页面中显示“无效的电子邮件和密码”消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:25:01.743

这意味着您忘记在模板中调用群组消息块

```
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T11:42:32.650

这意味着您忘记在模板中调用消息块。添加此代码，它对我有用

```
<?php echo $this->getMessagesBlock()->toHtml() ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:09:57.180

我在模板中添加了以下行，它可以工作：

```
<?php $message1=Mage::app()->getLayout()->getMessagesBlock()
        ->setMessages(Mage::getSingleton('customer/session') 
        ->getMessages(true))->getGroupedHtml() ; ?> 
```

谢谢您的帮助。

# c# - 如何拆分多个字符？

> ID：10553041
> 
> 赞同：4
> 
> 时间：2012-05-11T14:11:18.197
> 
> 标签：c#, split

我想在空格、换行符和逗号处分割。

这是我与空格字符分开的地方：

 ````
StreamReader sr1 = new StreamReader("E:\\Lectures\\Fourth year\\2nd term\\IR\\Sections\\Files\\Files\\Document2.txt");
string doc = sr1.ReadLine();
string[] docArr = doc.Split(' '); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T14:13:22.810

您可以传入一个字符数组。

```
string[] docArr = doc.Split(new char[]{' ', '\n', ','}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:16:02.830

你在寻找这样的东西吗？：

```
 var str = @"123,456 789\r";

 //split using string.Split(params char[] separator)
 var arr = str.Split(char.Parse(" "), char.Parse("\n"), char.Parse(",")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:16:11.210

您可以使用[String.Split 方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

像这样：

```
string[] docArr = doc.Split(new char[] {'\n', ',', ' ' }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:13:21.497

```
String.Split(new char[] {'\n',',',' '}); 
````

# mailto - mailto URL 的最大实际长度是多少？

> ID：10553042
> 
> 赞同：3
> 
> 时间：2012-05-11T14:11:33.010
> 
> 标签：mailto

在我的网页中，我向 WCF 服务发出 Ajax 请求。如果服务抛出错误，则在 JSON 中传回。然后，JavaScript 错误处理程序会显示一个隐藏的 div，其中包含预先填充了我的详细信息的 mailto URL，以便团队成员（这是一个小型内部应用程序）可以向我发送错误，包括堆栈跟踪。以下是测试运行生成的 URL 示例：

```
mailto:tttttttt@mmmmmmmmm.com?subject=potential%20seed%20save%20failed&body=Potential%20seed%20URL%20=%20unknown%0DResponse%20%3A%20%7B%22ExceptionDetail%22%3A%7B%22HelpLink%22%3Anull%2C%22InnerException%22%3Anull%2C%22Message%22%3A%22testing%22%2C%22StackTrace%22%3A%22%20%20%20at%20SavePotentialSeedSearches.WCFService.StorePotentialSeed(String%20url%2C%20String%20name)%20in%20C%3A%5C%5CTFS%5C%5CProjects%5C%5CSeeds%5C%5CPreliminaries%5C%5CSavePotentialSeedSearches%5C%5CWCFService.svc.cs%3Aline%2021%5Cu000d%5Cu000a%20%20%20at%20SyncInvokeStorePotentialSeed(Object%20%2C%20Object%5B%5D%20%2C%20Object%5B%5D%20)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object%20instance%2C%20Object%5B%5D%20inputs%2C%20Object%5B%5D%26%20outputs)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc%26%20rpc)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc%26%20rpc)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc%26%20rpc)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean%20isOperationContextSet)%22%2C%22Type%22%3A%22System.ArgumentException%22%7D%2C%22ExceptionType%22%3A%22System.ArgumentException%22%2C%22Message%22%3A%22testing%22%2C%22StackTrace%22%3A%22%20%20%20at%20SavePotentialSeedSearches.WCFService.StorePotentialSeed(String%20url%2C%20String%20name)%20in%20C%3A%5C%5CTFS%5C%5CProjects%5C%5CSeeds%5C%5CPreliminaries%5C%5CSavePotentialSeedSearches%5C%5CWCFService.svc.cs%3Aline%2021%5Cu000d%5Cu000a%20%20%20at%20SyncInvokeStorePotentialSeed(Object%20%2C%20Object%5B%5D%20%2C%20Object%5B%5D%20)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object%20instance%2C%20Object%5B%5D%20inputs%2C%20Object%5B%5D%26%20outputs)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc%26%20rpc)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc%26%20rpc)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc%26%20rpc)%5Cu000d%5Cu000a%20%20%20at%20System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean%20isOperationContextSet)%22%7D 
```

那是 2354 个字符长。

[其他答案](https://stackoverflow.com/a/417184/575530)表明，超过 2000 个字符的 URL 不是一个好主意，因为某些浏览器可能会遇到这些问题。但是浏览器是否以任何方式解析了 mailto URL，或者它们是否立即传递给默认邮件工具？如果交给他们，是否有人拥有各种邮件工具（尤其是 Outlook）可以处理的 mailto URL 长度的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-09T14:56:16.850

[如此处](https://stackoverflow.com/questions/13317429/mailto-max-length-of-each-internet-browsers)所述 - 是的，浏览器会在发送之前解析 URL - Safari 和大多数电子邮件客户端没有硬限制（取决于可用的 CPU 和 RAM）

**2015 年网络浏览器测试：**

*   苹果浏览器
    *   705000000
    *   2分钟
    *   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/601.1.56 (KHTML, like Gecko) 版本/9.0 Safari/601.1.56
    *   受限于 16GB RAM
*   火狐
    *   268435455
    *   20 秒
    *   Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:41.0) Gecko/20100101 Firefox/41.0
    *   受最大字符串长度限制
*   铬合金
    *   2097132
    *   1秒
    *   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36
    *   限定不解释
*   IE
    *   2029
    *   5秒
    *   Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; rv:11.0) 像 Gecko
    *   限定不解释

**2015 年电子邮件客户端测试：**

*   Mozilla 雷鸟
    *   2097132 1秒内工作
    *   268435455 使用 100% CPU 2 分钟但未能渲染 body 且不可用
    *   版本 38.3.0
*   海猴子
    *   2097132 在 5 秒内工作
    *   268435455 长时间使用 100% CPU（超过 5 分钟）
    *   2.38 版
*   苹果邮件
    *   500000 次在 14 秒内工作
    *   2097132 长时间使用 100% CPU（超过 5 分钟）
    *   8.2版
*   微软展望
    *   在 1 秒内修剪到 2070
    *   2013 版

# javascript - Backbone.js 查看事件处理

> ID：10553044
> 
> 赞同：0
> 
> 时间：2012-05-11T14:11:38.410
> 
> 标签：javascript, namespaces, backbone.js

我刚开始玩backbone.js，并享受使用它的怪癖。但是我试图用它来处理正在处理的站点的视图中的事件。我也在使用命名空间来组织我的代码

```
 var App = App || {};
    App.Views = App.Views || {};
    App.Views.Sidebar = Backbone.View.extend({
                el:  '#app-wrapper',

                events : {
                    "click #rf":"test"
    ;           },

                test: function(e) {
                    alert("testing");
                }
            })
        }
  }); 
```

继承人的html，它只是网站的骨架

```
<html>
<head>
    <title>Shopping List</title>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="underscore.js"></script>
    <script type="text/javascript" src="backbone.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
    App.Views.Sidebar;
    </script>
</head>

<body>

<div id="app-wrapper">

    <div id="app-header">
        <ul>
            <li id="rf">Test</li>
        </ul>
    </div>

</div>

</body>
</html> 
```

但是，此代码段似乎不起作用，单击 #rf 元素时不会调用 test() 方法。我做错了什么，对此我很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:36:07.000

您还没有实例化您的视图。尝试这样的事情：

```
var myView = new App.Views.Sidebar(); 
```

（而不是`App.Views.Sidebar;`：）

也不要忘记在文档加载后实例化您的视图。像这样的东西（如果你使用 JQuery）：

```
$(function() {

  // Initialize Backbone views.
  var myView = new App.Views.Sidebar();

}); 
```

# java - HessianConnectionException：使用 Hessian 4.0.7 和 Spring 3.1.1 时出现 (HTTP) 500 错误

> ID：10553046
> 
> 赞同：4
> 
> 时间：2012-05-11T14:11:45.177
> 
> 标签：java, hessian

好吧，这个根本想不通！

我正在使用 Spring 3.1.1 和 Hessian 4.0.7 部署到 Tomcat 6.0.29

我创建了一个简单的 Hessian 远程接口，但我的测试一直失败；

```
Exception in thread "main" com.caucho.hessian.client.HessianConnectionException: 500: java.io.IOException: Server returned HTTP response code: 500 for URL: http://localhost:8080/client/remote/RemoteService
    at com.caucho.hessian.client.HessianURLConnection.sendRequest(HessianURLConnection.java:142)
    at com.caucho.hessian.client.HessianProxy.sendRequest(HessianProxy.java:283)
    at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:170)
    at $Proxy0.testConnection(Unknown Source)
    at com.qualificationcheck.testserver.TestServer.main(TestServer.java:15)
Caused by: java.io.IOException: Server returned HTTP response code: 500 for URL: http://localhost:8080/client/remote/remoteservice
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.caucho.hessian.client.HessianURLConnection.sendRequest(HessianURLConnection.java:122)
    ... 4 more
Caused by: java.io.IOException: Server returned HTTP response code: 500 for URL: http://localhost:8080/client/remote/RemoteService
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.HttpURLConnection.getResponseCode(Unknown Source)
    at com.caucho.hessian.client.HessianURLConnection.sendRequest(HessianURLConnection.java:109)
    ... 4 more 
```

我的界面是；

```
public interface QCClientRemoteService {
    public String testConnection(String param);
} 
```

我的意思是；

```
public class QCClientRemoteServiceImpl implements QCClientRemoteService {
    public String testConnection(String param) {
        return "Recieved param of >" + param + "< successfully.";
    }
} 
```

web.xml 包含；

```
<servlet>
    <servlet-name>remoting</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/config/web-app-config.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>remoting</servlet-name>
    <url-pattern>/remote/*</url-pattern>
</servlet-mapping> 
```

您看到的 web-app-config.xml 包含（通过从另一个 xml 导入）；

```
<bean id="remoteService" class="com.example.QCClientRemoteServiceImpl">
    <!-- any additional properties, maybe a DAO? -->
</bean>

<bean name="/RemoteService" class="org.springframework.remoting.caucho.HessianServiceExporter">
    <property name="service" ref="remoteService"/>
    <property name="serviceInterface" value="com.example.QCClientRemoteService"/>
</bean> 
```

最后，一旦将其部署到 tomcat 中（开始时没有错误或警告），我将从另一个测试应用程序的 main 方法中调用所有这些；

```
String url = "http://localhost:8080/client/remote/RemoteService";

HessianProxyFactory factory = new HessianProxyFactory();
QCClientRemoteService basic = (QCClientRemoteService) factory.create(QCClientRemoteService.class, url);

System.out.println(basic.testConnection("Input 123")); 
```

任何想法为什么这不起作用？非常令人沮丧！下面的人似乎也有同样的问题，但 Caucho 没有回答； [http://forum.caucho.com/showthread.php?t=14906](http://forum.caucho.com/showthread.php?t=14906)

testapp 肯定会到达 webapp 服务器，就好像我修改了 url 然后 testapp 抱怨了一个错误的 url。但是，根本没有从服务器记录的日志或警告甚至调试。500 在实际 Impl 之前的某个地方被扔掉了！？

最重要的是上面相同的代码，集成到我们在 Spring 2.0.5 上运行的旧服务器中，在 Burlap 2.1.12 上运行得很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:46:08.040

问题是我包含了一个spring-remoting 2.0.8 lib，这在某个地方（默默地）发生了冲突。删除它立即为我解决了这个问题。

明确地说，当我有以下库时，上述配置和测试代码可以完美运行（注意，我假设 Hessian/Spring 解决方案并非所有这些都是必需的，它们在我的项目中用于其他用途，但为了完整起见，我已在此处列出);

```
spring-core-3.1.1.RELEASE
spring-asm-3.1.1.RELEASE
spring-web-3.1.1.RELEASE
spring-beans-3.1.1.RELEASE
spring-context-3.1.1.RELEASE
spring-aop-3.1.1.RELEASE
spring-webmvc-3.1.1.RELEASE
spring-context-support-3.1.1.RELEASE
spring-expression-3.1.1.RELEASE
hessian-4.0.7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T17:53:40.150

我的解决方案（在尝试了各种版本的 Hessian 之后）是使用：

```
org.springframework spring-remoting 2.0.8
org.springframework spring-webmvc/orm/(whatever) 3.1.1.RELEASE
com.caucho hessian 3.0.8 
```

我在一个 Maven 项目中使用这些，所以这些是我正在使用的确切版本，问题就消失了。这绝对是 Spring 3.1.1 的版本。

对于它的价值，我将它与 Eclipse RCP 应用程序一起使用，它与 Eclipse RCP Hessian 包一起使用。

# java - EMF 扩展现有模型

> ID：10553053
> 
> 赞同：1
> 
> 时间：2012-05-11T14:12:04.027
> 
> 标签：java, xsd, eclipse-emf, bpmn

我有一个大型 EMF 模型，更具体地说是来自 MDT 项目的 BPMN2.0 模型。我们的软件有一个要求，我们必须支持 oracle JDeveloper BPMN2 导出格式，这几乎对应于 BPMN2.0 模式，但有它自己的扩展。这是一个例子：

```
<startEvent isInterrupting="false" name="Start" id="startEvent0">
        <ns2:OracleExtensions>
            <ns2:GraphicsAttributes>
                <ns2:Position y="225" x="100"/>
                <ns2:Size height="21" width="21"/>
            </ns2:GraphicsAttributes>
            <ns2:FeatureSet>
                <ns2:BooleanFeature value="false" name="sync"/>
                <ns2:BooleanFeature value="false" name="catchAllErrors"/>
                <ns2:BooleanFeature value="false" name="catchAllSystemExceptions"/>
                <ns2:StringFeature value="" name="associatedProcess"/>
                <ns2:StringFeature value="" name="associatedNode"/>
                <ns2:StringFeature value="" name="initiator"/>
                <ns2:StringFeature value="operation" name="definedOperationName"/>
                <ns2:StringFeature value="PROCESS_DEFAULT" name="generatesEvents"/>
                <ns2:StringFeature value="USE_PROCESS_PERMISSION" name="sealType"/>
            </ns2:FeatureSet>
            <ns2:Participant/>
        </ns2:OracleExtensions>
        <outputSet/>
        <messageEventDefinition/>
    </startEvent> 
```

ns2 有一个 XSD 模式，所以我很容易生成了相应的 eCore 模型。我试图解决两天的问题 - 是如何以正确的方式将 OracleExtensions 模型“插入”到现有的 BPMN2.0 eCore 模型中。我试图实现的目标是使用 BPMN2.0 建模器插件编辑模型，并提供扩展属性来编辑特定于 oracle 的功能。

非常欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:27:03.400

这听起来像是[EMF Facet](http://www.eclipse.org/modeling/emft/facet/)的任务：

> 开发工具时的问题是，您永远无法想象最终用户真正想要的所有可能扩展。这就是为什么 EMF Facet 提出了一种无需修改即可扩展现有 Ecore 元模型的解决方案。
> 
> 这个想法是提供非侵入性机制来向元模型添加新特征（类型、属性、操作和引用），并通过添加额外属性（图标、标签等）来定制现有特征。

# cakephp - 在 Cakephp 中为所有 url 添加一个子域

> ID：10553055
> 
> 赞同：0
> 
> 时间：2012-05-11T14:12:05.513
> 
> 标签：cakephp, subdomain

如果用户会话中存在子域，我希望所有 Cakephp url 都使用子域......所以如果用户会话中有一个条目“子域：用户”，所有页面都将以“用户”作为前缀：例如用户.example.com、user.example.com/settings。

是否有捷径可寻？

谢谢，

kSeudo

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:40:02.377

您可以使用自定义路由类。在 APP/Lib/Route 中创建一个名为 UserSubdomainRoute.php 的文件并将其放入其中。

```
<?php
App::uses('AuthComponent', 'Controller/Component');
class UserSubdomainRoute extends CakeRoute {

/**
 * @var CakeRequest
 */
    private $Request;

/**
 * Length of domain's TLD
 *
 * @var int
 */
    public static $_tldLength = 1;

    public function __construct($template, $defaults = array(), $options = array()) {
        parent::__construct($template, $defaults, $options);

        $this->Request = new CakeRequest();
        $this->options = array_merge(array('protocol' => 'http'), $options);
    }

/**
 * Sets tld length
 *
 * @param $length
 * @return mixed void|int
 */
    public static function tldLength($length = null) {
        if (is_null($length)) {
            return self::$_tldLength;
        }

        self::$_tldLength = $length;
    }

/**
 * Writes out full url with protocol and subdomain
 *
 * @param $params
 * @return string
 */
    protected function _writeUrl($params) {
        $protocol = $this->options['protocol'];
        $subdomain = AuthComponent::user('subdomain');
        if (empty($subdomain)) {
            $subdomain = 'www';
        }
        $domain = $this->_getDomain();
        $url = parent::_writeUrl($params);

        return "{$protocol}://{$subdomain}.{$domain}{$url}";
    }

/**
 * Get domain name
 *
 * @return string
 */
    protected function _getDomain() {
        return $this->Request->domain(self::$_tldLength);
    }

} 
```

该类的一项改进可能是使 $Request 静态。

不幸的是，在 Cake 2.0 中没有办法设置 defaultRotueClass，但是，我在 2.1+ 中添加了该功能，我不想告诉您升级，因此您将不得不在第三个中为您的所有路线手动指定它像这样的参数：

```
Router::connect(..., ..., array('routeClass' => 'UserSubdomainRoute'); 
```

一定要在 routes.php 的顶部添加

```
App::uses('UserSubdomainRoute', 'Lib/Route'); 
```

如果你升级到 2.1+，你可以在你的 routes.php 顶部添加这个

```
Router::defaultRouteClass('UserSubdomainRoute'); 
```

然后之后指定的任何路由都将使用该路由类。

路由类的主要部分是`_writeUrl`方法。`subdomain`它检查会话中是否存在密钥集，否则使用`www`并构建完整的 url 以返回。

注意：还没有测试过课程，还在学校只是想给你一个快速的开始。它只是我的 SubdomainRoute 的修改版本，它的工作方式有点不同（它过去只匹配设置某个子域时的路由，例如在我的应用程序中匹配`clients`子域到我的`ClientsAdminPanel`插件。你可以在这里获取：[http://bin .cakephp.org/view/50699397](http://bin.cakephp.org/view/50699397)因此，如果您需要`UserSubdomainRoute`和我的组合`SubdomainRoute`（在链接中），您也可以看到它是如何完成的。

希望这对现在有所帮助。让我知道是否有任何问题。

编辑：这是强制重定向的方法 - 有些东西告诉我有更好的方法。如果我能想到它，我会更新。

```
public function beforeFilter() {
     $subdomains = $this->request->subdomains();
     $subdomain = $this->Auth->user('subdomain');
     if (!empty($subdomain) && !in_array($subdomain, $subdomains)) {
        $this->redirect('http://' . $subdomain . '.site.com' . $this->request->here);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:10:43.320

好吧，如果您希望对所有链接都这样做，可能您使用相同的方式在您的网站上显示所有网址，您是否使用类似 $this->html->link('/blah/asd/','blah '); ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T06:43:51.613

IN 蛋糕/路线/路线

```
class SubdomainRoute extends CakeRoute {
public function match($params) {
    $subdomain = isset($params['subdomain']) ? $params['subdomain'] : null;
    unset($params['subdomain']);
    $path = parent::match($params);
    if ($subdomain) {
        $path = 'http://' . $subdomain . '.localhost' . $path;
    }
    return $path;
}
} 
```

创建链接时，您可以执行以下操作以使链接指向其他子域。

```
echo $this->Html->link(
    'Other domain',
     array('subdomain' => 'test', 'controller' => 'posts', 'action' => 'add')
); 
```

# api - 访问 gmail 的应用程序是否具有只写访问权限或完全 gmail 访问权限（潜在的安全风险？）

> ID：10553057
> 
> 赞同：1
> 
> 时间：2012-05-11T14:12:11.713
> 
> 标签：api, sms, gmail, backup, android-account

我使用备份应用程序将 SMS 文本消息备份到我在 HTC Desire Z Android 2.3 手机上注册的 GMail 帐户。

该应用程序请求访问 gmail 帐户。但这实际上意味着什么？是否意味着：

*   应用程序对 gmail 具有只写访问权限 - 即可以插入电子邮件但不能删除或调整其他现有电子邮件（Android API 是否提供此功能？）

*   该应用程序具有对电子邮件的完全访问权限，并且如果存在错误，可能会删除电子邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:40:29.917

首先：这个问题似乎不属于 Stackoverflow。本网站用于询问有关编码问题的具体问题，而不是关于某些设备上基于某些 SDK 的某些程序中的某些代码可能会或可能不会工作的问题。

据我所知，如果应用程序可以访问您的 Gmail 帐户，这意味着完全控制，包括删除。这并不一定意味着程序中有实际代码甚至试图删除某些东西，但我想你是对的：编码错误可能会删除你的电子邮件。

但这适用于很多应用程序：您相信开发人员会在您依赖他/她谨慎处理您的照片、电子邮件、密码等之前进行广泛的测试，对吗？:)

# c++ - Tab 键在 IWebbrowser2 中不起作用

> ID：10553058
> 
> 赞同：2
> 
> 时间：2012-05-11T14:12:19.890
> 
> 标签：c++, facebook, tabs, atl, iwebbrowser2

我正在使用 ActiveX 控件在 ATL 应用程序 (IWebbrowser2) 中实现嵌入式浏览器。问题是，我无法使用 tab 键在文本字段之间跳转。按tab键什么都不做。按 Enter 键按预期提交表单。例如在 facebook 登录站点上存在问题。如何使 tab 键正常工作？我必须激活 ATL 控件中的某些内容才能使其工作吗？

谢谢！

费边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:32:18.587

本文介绍了如何在 C 中使用 IWebBrowser2：http: [//www.codeproject.com/KB/COM/cwebpage.aspx](http://www.codeproject.com/KB/COM/cwebpage.aspx)

在下面的一些评论中，人们有完全相同的问题。似乎 IWebBrowser2 只是有错误并且不会将键盘消息（不仅是 TAB，还有 CTRL+C 等）转换为预期的操作。在一些评论中有一个解决方法：http: [//www.codeproject.com/Messages/3558959/Re-hot-key-not-work.aspx](http://www.codeproject.com/Messages/3558959/Re-hot-key-not-work.aspx)

但是我不了解 ActiveX，所以我不知道这是否适用于您的情况。

# php - Twitter 提要未在网站上拉入 // 错误

> ID：10553061
> 
> 赞同：0
> 
> 时间：2012-05-11T14:12:37.963
> 
> 标签：php, javascript, jquery, api, twitter

**我想知道为什么在我的 wordpress 主题的侧边栏中，此代码没有拉入我最新的推文？**

```
<?php
/*
    PHP Twitter Feed Importer
       @mradamdavies
     www.elevatelocal.co.uk
==-----------------------------*/

class pull_tweets { // Create a basic class

var $twitter_handle;    // Twitter username
var $tweet_limit;       // Max tweets to return
var $tweet_links;       // Show @profile links
var $tweet_tags;        // Show #tag links
var $tweet_avatar;      // Show twitter avatar
var $tweet_profile;     // Show twitter profile link

var $hard_max;          // Real max tweets (Used to filter out @replies)
var $i;                 // Tweet counter

function show_tweet_links($tweet_links_output, $tweet_links) { // Find and replace @replies with links
        if($tweet_links == true) {
            $find  = '/\@([a-zA-Z]+)/';
            $replace  = '<a class="hash_link" href="http://twitter.com/'.strtolower('\1').'" rel="nofollow">@\1</a>';
            $tweet_links_text = preg_replace($find,$replace,$tweet_links_output);
            return $tweet_links_text;
        }
        else { return $tweet_links_output; }
}

function show_hash_tags($tweet_hashtags_output, $tweet_tags) { // Find and replace #tags with links
    if($tweet_tags == true) {
        $find_hash_tag  = '/\#([a-zA-Z]+)/';
        $replace_hash_tag  = '<a class="hash_link" href="http://twitter.com/search?q=%23'.strtolower('\1').'" rel="nofollow">#\1</a>';
        return
        preg_replace($find_hash_tag,$replace_hash_tag,$tweet_hashtags_output);
    }
    else { return $tweet_hashtags_output; }
}

function show_twitter_avatar($tweet_avatar_output, $tweet_avatar) { // Show avatar
    if($tweet_avatar == true) {
        return '<img src="'.$tweet_avatar_output.'" alt="" />';
    }
    else { return false; }
}

function show_twitter_profile_link($tweet_profile_output, $tweet_profile) { // Insert profile link
    if($tweet_profile == true) {
        return '<a class="profile_link" href="http://twitter.com/'.$tweet_profile_output.'">@'.$tweet_profile_output.'</a>';
    }
    else { return false; }
}

// Create a basic function to pull latest tweets
function tweets($twitter_handle, $tweet_limit, $tweet_links, $tweet_tags, $tweet_avatar, $tweet_profile) {

        /* Store Tweets in a JSON object */
        $tweet_feed =   json_decode(file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?screen_name='.
                        $twitter_handle.'&exclude_replies=false&count='.$hard_max));

        $i = 0; // Start the tweet limit counter
        foreach ($tweet_feed as $tweet) { // Loop through the tweets

            if ($tweet->in_reply_to_user_id == '' && $i != $tweet_limit) { // Don't show direct @replies
                ++$i; // Increase tweet counter

    // Check true/false flags and return output accoringly
    $tweet_text = $tweet->text;
    $tweet_text = pull_tweets::show_tweet_links($tweet_text,$tweet_links); // Show @reply links?
    $tweet_text = pull_tweets::show_hash_tags($tweet_text,$tweet_tags); // Show #tag links?
    $twitter_avatar =
pull_tweets::show_twitter_avatar($tweet->user->profile_image_url,$tweet_avatar); // Show avatar?
    $twitter_profile =
    pull_tweets::show_twitter_profile_link($twitter_handle,$tweet_profile); // Show main profile link?

    // Echo our tweet contents
    echo '
    <div class="tweet_bg">',$twitter_avatar,'
    <p>'.$tweet_text.'<br />'.$twitter_profile.'</p>
    </div>';

            }

        } // end of foreach

    } // end of tweets function

} // end of pull_tweets class
?>

<script language="javascript">
$my_tweets = new pull_tweets();

echo $my_tweets->tweets('mradamdavies', 5, true, true, true, true);
</script> 
```

*本教程引用：* *http://www.elevatelocal.co.uk/blog/php-twitter-feed-importer-05094504*

我想用 PHP 或最小的 JavaScript 来做到这一点。目前，由于某种原因，Twitter 小部件无法在我的网站上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:18:04.650

您的 PHP`<script>`没有被解析为 PHP。你可能想要

```
<?php
$my_tweets = new pull_tweets();

$my_tweets->tweets('mradamdavies', 5, true, true, true, true);
?> 
```

正如 Jamie 所指出的，由 生成的 HTML`tweets()`不是 JavaScript，因此您根本不需要`<script>`标签。

# javascript - 将 HTML5 页面另存为 PDF

> ID：10553064
> 
> 赞同：2
> 
> 时间：2012-05-11T14:12:48.967
> 
> 标签：javascript, html

单击按钮，无需往返服务器，我们可以将客户端机器上的 HTML5 页面保存为 PDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:23:22.540

查看[PDF.js](https://github.com/Marak/pdf.js/)。这个库可以在浏览器（或 node.js 上的服务器端）中创建 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:44:52.470

免责声明：我为 ByteScout 工作

如果您有简单的 HTML 格式并希望在客户端生成 PDF，并且如果您有非商业项目，请检查[BytescoutPDF.js](http://bytescout.com/products/developer/pdfgeneratorsdkjs/create_pdf_text_rich_formatting.html) - 它支持文本的简单 HTML 格式（字体名称、大小、颜色）以及简单的绘图和图像，应该足够简单的报告

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:20:38.003

使用 chrome，您可以将页面打印为 pdf 文件。

您需要这样的东西，也许服务器端您可以启动浏览器并将内容打印到 pdf 文件并将其发送给客户端。

# python - 停止守护进程的正确方法

> ID：10553071
> 
> 赞同：0
> 
> 时间：2012-05-11T14:13:10.090
> 
> 标签：python, process, daemon

我有一个作为守护程序运行的 Jython 脚本。它启动，登录到服务器，然后进入一个循环，检查要处理的东西，处理它们，然后休眠 5 秒。

我有一个 cron 作业，每 5 分钟检查一次，以确保进程正在运行，如果没有，则再次启动它。

我有另一个 cron 作业，每天一次，无论如何都会重新启动该过程。我们这样做是因为有时守护程序与服务器的连接有时会搞砸，并且无法判断何时发生这种情况。

我对这个“解决方案”的问题是第二个 cron 作业终止了进程并启动了另一个进程。如果它在睡眠时被杀死是可以的，但是如果守护进程在它被杀死时正在处理事情，那么可能会发生不好的事情。

停止守护进程的正确方法是什么......而不是仅仅杀死它？

在 Python 或 Java 中是否有一般的标准做法？将来我可能会转向纯 Python 而不是 Jython。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:16:12.713

您可以在终止进程并通过 Jython 脚本接收信号时`SIGTERM`在发送之前发送第一个。`SIGKILL`

例如，发送一个`SIGTERM`可以被您的脚本接收和处理的，如果在指定的时间段内没有任何事情发生，您可以发送`SIGKILL`并强制终止该进程。

有关处理事件的更多信息，请参阅[信号](http://docs.python.org/library/signal.html)模块文档。

此外，可能很方便的示例（使用`atexit`钩子）：

```
#!/usr/bin/env python

from signal import signal, SIGTERM
from sys import exit
import atexit

def cleanup():
    print "Cleanup"

if __name__ == "__main__":
    from time import sleep
    atexit.register(cleanup)

    # Normal exit when killed
    signal(SIGTERM, lambda signum, stack_frame: exit(1))

    sleep(10) 
```

取自[这里](http://code.activestate.com/recipes/533117-cleaning-up-when-killed/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:20:06.143

执行此操作的正常 Linux 类型的方法是向挂起的长时间运行的进程发送信号。您可以使用 Python 的内置信号库来处理这个问题。

[http://docs.python.org/library/signal.html](http://docs.python.org/library/signal.html)

因此，您可以从第二个应用程序向您的第一个应用程序发送 SIGHUP，并根据您是否处于可以重新启动的状态首先处理它。

# iphone - 如何在不使用 MKMapView 的情况下检查 MKCoordinateRegion 是否包含 CLLocationCoordinate2D？

> ID：10553072
> 
> 赞同：20
> 
> 时间：2012-05-11T14:13:13.450
> 
> 标签：iphone, ios, cllocationmanager, cllocation, mkcoordinateregion

我需要检查用户位置是否属于 MKCoordinateRegion。我很惊讶没有找到简单的函数，**比如： CGRectContainsCGPoint(rect, point)**。

我发现了以下一段代码：

```
CLLocationCoordinate2D topLeftCoordinate = 
    CLLocationCoordinate2DMake(region.center.latitude 
                               + (region.span.latitudeDelta/2.0), 
                               region.center.longitude 
                               - (region.span.longitudeDelta/2.0));

    CLLocationCoordinate2D bottomRightCoordinate = 
    CLLocationCoordinate2DMake(region.center.latitude 
                               - (region.span.latitudeDelta/2.0), 
                               region.center.longitude 
                               + (region.span.longitudeDelta/2.0));

        if (location.latitude < topLeftCoordinate.latitude || location.latitude > bottomRightCoordinate.latitude || location.longitude < bottomRightCoordinate.longitude || location.longitude > bottomRightCoordinate.longitude) {

    // Coordinate fits into the region

    } 
```

但是，我不确定它是否准确，因为文档没有具体说明如何计算区域矩形。

必须有更简单的方法来做到这一点。我是否忽略了 MapKit 框架文档中的某些功能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-08T15:35:54.920

我发布此答案是因为我认为接受的解决方案无效。这个答案也不完美，但它处理了坐标环绕 360 度边界的情况，这足以适合我的情况。

```
+ (BOOL)coordinate:(CLLocationCoordinate2D)coord inRegion:(MKCoordinateRegion)region
{
    CLLocationCoordinate2D center = region.center;
    MKCoordinateSpan span = region.span;

    BOOL result = YES;
    result &= cos((center.latitude - coord.latitude)*M_PI/180.0) > cos(span.latitudeDelta/2.0*M_PI/180.0);
    result &= cos((center.longitude - coord.longitude)*M_PI/180.0) > cos(span.longitudeDelta/2.0*M_PI/180.0);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-11T14:48:21.187

您可以使用 将您的位置转换为一个点`MKMapPointForCoordinate`，然后`MKMapRectContainsPoint`在地图视图的`visibleMapRect`. 这完全不在我的脑海中。让我知道它是否有效。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-13T18:51:32.493

如果有人对纬度和经度感到困惑，这里是经过测试的有效解决方案：

```
MKCoordinateRegion region = self.mapView.region;

CLLocationCoordinate2D location = user.gpsposition.coordinate;
CLLocationCoordinate2D center   = region.center;
CLLocationCoordinate2D northWestCorner, southEastCorner;

northWestCorner.latitude  = center.latitude  - (region.span.latitudeDelta  / 2.0);
northWestCorner.longitude = center.longitude - (region.span.longitudeDelta / 2.0);
southEastCorner.latitude  = center.latitude  + (region.span.latitudeDelta  / 2.0);
southEastCorner.longitude = center.longitude + (region.span.longitudeDelta / 2.0);

if (
    location.latitude  >= northWestCorner.latitude && 
    location.latitude  <= southEastCorner.latitude &&

    location.longitude >= northWestCorner.longitude && 
    location.longitude <= southEastCorner.longitude
    )
{
    // User location (location) in the region - OK :-)
    NSLog(@"Center (%f, %f) span (%f, %f) user: (%f, %f)| IN!", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta, location.latitude, location.longitude);

}else {

    // User location (location) out of the region - NOT ok :-(
    NSLog(@"Center (%f, %f) span (%f, %f) user: (%f, %f)| OUT!", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta, location.latitude, location.longitude);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-22T09:18:47.610

其他答案都有错误。接受的答案有点冗长，并且在国际日期变更线附近失败。余弦答案是可行的，但对于非常小的区域会失败（因为 delta cosine 是正弦，它趋向于零接近零，这意味着对于较小的角度差异，我们期望零变化）这个答案应该适用于所有情况，并且更简单。

迅速：

```
/* Standardises and angle to [-180 to 180] degrees */
class func standardAngle(var angle: CLLocationDegrees) -> CLLocationDegrees {
    angle %= 360
    return angle < -180 ? -360 - angle : angle > 180 ? 360 - 180 : angle
}

/* confirms that a region contains a location */
class func regionContains(region: MKCoordinateRegion, location: CLLocation) -> Bool {
    let deltaLat = abs(standardAngle(region.center.latitude - location.coordinate.latitude))
    let deltalong = abs(standardAngle(region.center.longitude - location.coordinate.longitude))
    return region.span.latitudeDelta >= deltaLat && region.span.longitudeDelta >= deltalong
} 
```

目标 C：

```
/* Standardises and angle to [-180 to 180] degrees */
+ (CLLocationDegrees)standardAngle:(CLLocationDegrees)angle {
    angle %= 360
    return angle < -180 ? -360 - angle : angle > 180 ? 360 - 180 : angle
}

/* confirms that a region contains a location */
+ (BOOL)region:(MKCoordinateRegion*)region containsLocation:(CLLocation*)location {
    CLLocationDegrees deltaLat = fabs(standardAngle(region.center.latitude - location.coordinate.latitude))
    CLLocationDegrees deltalong = fabs(standardAngle(region.center.longitude - location.coordinate.longitude))
    return region.span.latitudeDelta >= deltaLat && region.span.longitudeDelta >= deltalong
} 
```

这种方法虽然对于包含任一极点的区域都失败了，但是坐标系本身在两极处失败了。对于大多数应用程序，此解决方案就足够了。（注意，未在 Objective C 上测试）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-10-06T12:32:06.993

我已经使用此代码来确定坐标是否在圆形区域内（周围有半径的坐标）。

```
- (BOOL)location:(CLLocation *)location isNearCoordinate:(CLLocationCoordinate2D)coordinate withRadius:(CLLocationDistance)radius
{
    CLCircularRegion *circularRegion = [[CLCircularRegion alloc] initWithCenter:location.coordinate radius:radius identifier:@"radiusCheck"];

    return [circularRegion containsCoordinate:coordinate];
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-21T18:57:21.530

像魅力一样为我工作（Swift 5）

```
func check(
    location: CLLocationCoordinate2D,
    contains childLocation: CLLocationCoordinate2D,
    with radius: Double)
    -> Bool
{
    let region = CLCircularRegion(center: location, radius: radius, identifier: "SearchId")
    return region.contains(childLocation)
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-19T10:47:58.637

Owen Godfrey，Objective-C 代码不起作用，这是好的代码：在 Objective-C 上失败，这是好的代码：

```
/* Standardises and angle to [-180 to 180] degrees */
- (CLLocationDegrees)standardAngle:(CLLocationDegrees)angle {
    angle=fmod(angle,360);
    return angle < -180 ? -360 - angle : angle > 180 ? 360 - 180 : angle;
}

-(BOOL)thisRegion:(MKCoordinateRegion)region containsLocation:(CLLocation *)location{
    CLLocationDegrees deltaLat =fabs([self standardAngle:(region.center.latitude-location.coordinate.latitude)]);
    CLLocationDegrees deltaLong =fabs([self standardAngle:(region.center.longitude-location.coordinate.longitude)]);
    return region.span.latitudeDelta >= deltaLat && region.span.longitudeDelta >=deltaLong;
}
    CLLocationDegrees deltalong = fabs(standardAngle(region.center.longitude - location.coordinate.longitude));
    return region.span.latitudeDelta >= deltaLat && region.span.longitudeDelta >= deltalong;
} 
```

谢谢！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-01T14:32:00.157

我对相同的计算有问题。[我喜欢欧文·戈弗雷（Owen Godfrey）在这里](https://stackoverflow.com/a/26504145/1776859)提出的概念，连费尔南多（Fernando）[在这里都](https://stackoverflow.com/a/28604359/1776859)忽略了纬度与经度包裹不同并且范围不同的事实。为了澄清我的建议，我将其与测试一起发布，以便您自己检查。

```
import XCTest
import MapKit

// MARK - The Solution

extension CLLocationDegrees {

    enum WrapingDimension: Double {
        case latitude = 180
        case longitude = 360
    }

    /// Standardises and angle to [-180 to 180] or [-90 to 90] degrees
    func wrapped(diemension: WrapingDimension) -> CLLocationDegrees {
        let length = diemension.rawValue
        let halfLenght = length/2.0
        let angle = self.truncatingRemainder(dividingBy: length)
        switch diemension {
        case .longitude:
            //        return angle < -180.0 ? 360.0 + angle : angle > 180.0 ? -360.0 + angle : angle
            return angle < -halfLenght ? length + angle : angle > halfLenght ? -length + angle : angle
        case .latitude:
            //        return angle < -90.0 ? -180.0 - angle : angle > 90.0 ? 180.0 - angle : angle
            return angle < -halfLenght ? -length - angle : angle > halfLenght ? length - angle : angle
        }
    }
}

extension MKCoordinateRegion {
    /// confirms that a region contains a location
    func contains(_ coordinate: CLLocationCoordinate2D) -> Bool {
        let deltaLat = abs((self.center.latitude - coordinate.latitude).wrapped(diemension: .latitude))
        let deltalong = abs((self.center.longitude - coordinate.longitude).wrapped(diemension: .longitude))
        return self.span.latitudeDelta/2.0 >= deltaLat && self.span.longitudeDelta/2.0 >= deltalong
    }
}

// MARK - Unit tests

class MKCoordinateRegionContaingTests: XCTestCase {

    func testRegionContains() {
        var region = MKCoordinateRegionMake(CLLocationCoordinate2DMake(0, 0), MKCoordinateSpan(latitudeDelta: 1, longitudeDelta: 1))
        var coords = CLLocationCoordinate2DMake(0, 0)
        XCTAssert(region.contains(coords))

        coords = CLLocationCoordinate2DMake(0.5, 0.5)
        XCTAssert(region.contains(coords))

        coords = CLLocationCoordinate2DMake(-0.5, 0.5)
        XCTAssert(region.contains(coords))
        coords = CLLocationCoordinate2DMake(0.5, 0.5000001)
        XCTAssert(!region.contains(coords)) // NOT Contains
        coords = CLLocationCoordinate2DMake(0.5, -0.5000001)
        XCTAssert(!region.contains(coords)) // NOT Contains
        coords = CLLocationCoordinate2DMake(1, 1)
        XCTAssert(!region.contains(coords)) // NOT Contains

        region = MKCoordinateRegionMake(CLLocationCoordinate2DMake(0, 180), MKCoordinateSpan(latitudeDelta: 1, longitudeDelta: 1))
        coords = CLLocationCoordinate2DMake(0, 180.5)
        XCTAssert(region.contains(coords))
        coords.longitude = 179.5
        XCTAssert(region.contains(coords))
        coords.longitude = 180.5000001
        XCTAssert(!region.contains(coords)) // NOT Contains
        coords.longitude = 179.5000001
        XCTAssert(region.contains(coords))
        coords.longitude = 179.4999999
        XCTAssert(!region.contains(coords)) // NOT Contains

        region = MKCoordinateRegionMake(CLLocationCoordinate2DMake(90, -180), MKCoordinateSpan(latitudeDelta: 1, longitudeDelta: 1))
        coords = CLLocationCoordinate2DMake(90.5, -180.5)
        XCTAssert(region.contains(coords))

        coords = CLLocationCoordinate2DMake(89.5, -180.5)
        XCTAssert(region.contains(coords))

        coords = CLLocationCoordinate2DMake(90.50000001, -180.5)
        XCTAssert(!region.contains(coords)) // NOT Contains

        coords = CLLocationCoordinate2DMake(89.50000001, -180.5)
        XCTAssert(region.contains(coords))

        coords = CLLocationCoordinate2DMake(89.49999999, -180.5)
        XCTAssert(!region.contains(coords)) // NOT Contains
    }

    func testStandardAngle() {
        var angle = 180.5.wrapped(diemension: .longitude)
        var required = -179.5
        XCTAssert(self.areAngleEqual(angle, required))

        angle = 360.5.wrapped(diemension: .longitude)
        required = 0.5
        XCTAssert(self.areAngleEqual(angle, required))

        angle = 359.5.wrapped(diemension: .longitude)
        required = -0.5
        XCTAssert(self.areAngleEqual(angle, required))

        angle = 179.5.wrapped(diemension: .longitude)
        required = 179.5
        XCTAssert(self.areAngleEqual(angle, required))

        angle = 90.5.wrapped(diemension: .latitude)
        required = 89.5
        XCTAssert(self.areAngleEqual(angle, required))

        angle = 90.5000001.wrapped(diemension: .latitude)
        required = 89.4999999
        XCTAssert(self.areAngleEqual(angle, required))

        angle = -90.5.wrapped(diemension: .latitude)
        required = -89.5
        XCTAssert(self.areAngleEqual(angle, required))

        angle = -90.5000001.wrapped(diemension: .latitude)
        required = -89.4999999
        XCTAssert(self.areAngleEqual(angle, required))
    }

    /// compare doubles with presition to 8 digits after the decimal point
    func areAngleEqual(_ a:Double, _ b:Double) -> Bool {
        let presition = 0.00000001
        let equal = Int(a / presition) == Int(b / presition)
        print(String(format:"%14.9f %@ %14.9f", a, equal ? "==" : "!=", b) )
        return equal
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-23T21:20:23.057

基于 Lukasz 解决方案，但在 Swift 中，以防任何人都可以使用 Swift：

```
func isInRegion (region : MKCoordinateRegion, coordinate : CLLocationCoordinate2D) -> Bool {

    let center   = region.center;
    let northWestCorner = CLLocationCoordinate2D(latitude: center.latitude  - (region.span.latitudeDelta  / 2.0), longitude: center.longitude - (region.span.longitudeDelta / 2.0))
    let southEastCorner = CLLocationCoordinate2D(latitude: center.latitude  + (region.span.latitudeDelta  / 2.0), longitude: center.longitude + (region.span.longitudeDelta / 2.0))

    return (
        coordinate.latitude  >= northWestCorner.latitude &&
        coordinate.latitude  <= southEastCorner.latitude &&

        coordinate.longitude >= northWestCorner.longitude &&
        coordinate.longitude <= southEastCorner.longitude
    )
} 
```

# android - FBReader 中文脚本？

> ID：10553073
> 
> 赞同：1
> 
> 时间：2012-05-11T14:13:17.303
> 
> 标签：android, epub

[我从GitHub](https://github.com/geometer/FBReaderJ)下载了 FBReader 的源代码

我构建了项目并运行了项目，但我注意到在某些书籍中，某些文本出现乱码（如中文脚本或其他内容）。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:55:05.933

好的，我在 GitHub 上添加了一个问题，他们在最新更新中解决了这个问题

# mysql - 需要 MySQL 通配符解决方法

> ID：10553077
> 
> 赞同：1
> 
> 时间：2012-05-11T14:13:33.420
> 
> 标签：mysql, sql, wildcard

好的，所以主要问题是设计不佳的 php 脚本.. 但我现在对此无能为力..

所以我向你寻求帮助！:)

我想列出所有以“a%”开头的项目.. 简单！.. 不在这里.. 默认情况下，搜索是使用通配符“%string%”进行的。

```
SELECT DISTINCT `Select2` FROM `items` WHERE `Select2` LIKE "%a%" 
```

而且我无法更改搜索脚本...：/

无论如何，你能想到让我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:17:15.943

没有办法绕过这样的硬编码。但是，由于结果将包括您要查找的结果以及子字符串匹配项，您可以在应用程序端过滤掉子字符串匹配项。

# gcc - gcc 不尊重包含文件的层次结构

> ID：10553079
> 
> 赞同：1
> 
> 时间：2012-05-11T14:13:35.900
> 
> 标签：gcc, include, g++

我使用了层次结构这个词，但我不确定它是否正确！让我解释。

我有啊：

```
#include <iostream>
#include <vector>
using namespace std; 
```

我有 Bh：

```
typedef vector<int> int_vector;
int_vector my_function(int x, int y); 
```

最后我有 Xh，即：

```
#include "A.h"
#include "B.h" 
```

和 X.cpp：

```
#include "X.h"

// and the rest 
```

但是当我用 GCC 编译它时，它会用 Bh 表示，vector not defined 等等。请注意，这是一个解释问题的示例。我试图转换为在 linux 上编译的项目可以在 Visual Studio 下的 Windows 上完美编译。

我可以更改文件，但它是一个 300 多个文件的项目，所以有什么帮助或建议会非常有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:18:55.273

您发布的代码没有任何问题，而且似乎不太可能在`gcc`.

更可能的问题不是它看起来的那样。例如，您的项目中可能有多个`A.h`（或`B.h`，或`X.h`）文件，并且某处包含了错误的文件。

我的建议是`.cpp`通过预处理器 ( ) 运行一个有问题的文件`gcc -E`并检查结果。这将准确地告诉你什么时候被包括在内。

# ldap - 使用 LDIF 文件更改密码

> ID：10553081
> 
> 赞同：8
> 
> 时间：2012-05-11T14:13:40.097
> 
> 标签：ldap, ldif

我有一个包含大量测试用户的 LDIF 文件。

我想更改其中一些用户的密码，并且想知道这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T14:28:14.347

将 ldapmodify 与 LDIF 一起使用，例如：

```
ldapmodify -h hostname -p port -D dn -w password <<!
dn: uid=user,dc=example,dc=com
changetype: modify
replace: userPassword
userPassword: new-password
! 
```

或指定文件名：

```
ldapmodify -c -a -f file.ldif -h hostname -p port -D dn -w password 
```

当然，使用正确的属性名称、专有名称等。用于 ldapmodify 工具绑定的专有名称必须具有修改 LDIF 中指定的专有名称的密码的访问权限。

### 也可以看看

*   [LDIF: rfc2849](https://www.rfc-editor.org/rfc/rfc2849)
*   [LDAP：使用 ldapmodify](http://ff1959.wordpress.com/2011/07/25/master-the-ldapmodify-command-line-tool/)

# git - GitHub 如何通过存储库合并基于 Web 的 Wiki 编辑？

> ID：10553085
> 
> 赞同：4
> 
> 时间：2012-05-11T14:14:00.453
> 
> 标签：git, merge, github, merge-conflict-resolution

我正在考虑向其用户提供对 SaaS 应用程序使用的资源的某种 Git 访问权限的想法。这将允许用户通过 Git 界面以及应用程序的本地基于 Web 的界面编辑和推送内容。我主要关心的是当用户编辑基于 Web 的界面中的内容时如何协调合并冲突（我不太关心来自 Git 界面的合并冲突，因为 Git 和他们的 Git 客户端应该处理这个问题）。这与 GitHub 允许基于 Git 和基于 Web 的访问其 Wiki 的方式非常相似，我很好奇他们如何处理这种情况，作为其他人在提供基于 Web 和基于 Git 的访问时遵循的模式内容。

如果用户通过 Web 界面编辑 GitHub 上的 Wiki 页面，而另一个用户在完成之前将更改推送到 Wiki 存储库分支，那么当他们保存更改时会发生什么？它是使用“最后一个获胜”还是“抱歉，在新版本上重做所有更改”？

我发现了一篇[相关的 SO 帖子](https://stackoverflow.com/questions/3411888/how-does-a-wiki-handle-multiple-simultaneous-edits)，它总体上讨论了这个问题，但我很好奇 GitHub 是如何专门处理它的，因为它得到了 Git 的支持，而 Git 已经内置了一些合并功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:19:35.383

对 GitHub wiki 所做的每一项更改，无论是在 Web 界面中还是通过 git 完成，都是它自己在存储库中的提交。

如果您通过 Web 界面添加、编辑或删除 wiki 页面，然后`git pull`通过 wiki 存储库，您可以使用`git history`. 如果您是 wiki 所属项目的所有者或合作者，您甚至可以使用 git 还原该提交并将更改推送回 GitHub（我个人不得不这样做以恢复被意外删除的页面）。

对于您描述的情况，似乎（根据[this issue](https://github.com/github/gollum/issues/279)）最后一次编辑获胜，而第一次编辑的内容丢失。

要获得比这更具体的答案，您可能需要查看[Gollum](https://github.com/github/gollum)项目，这是 GitHub 用来管理其 git 支持的 wiki 的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T15:27:04.233

我正在开发一个 git 支持的 wiki 引擎，类似于名为[Waliki](https://github.com/mgaitan/waliki)的 Gollum 。

特别是，它更聪明地合并更改：Waliki 不是硬性的“更新胜利”方法，而是在一个分离的分支中处理每个版本，并在保存时将它们*合并。*

如果一个页面在一个编辑过程中发生了外部变化并且 git 可以自动合并它，用户会收到通知。如果合并失败，页面仍会保存，但会重新加载编辑器，要求用户修复冲突。

我很高兴收到一些反馈。

# c# - 如何使用 OnException 方面（PostSharp）继续方法流？

> ID：10553088
> 
> 赞同：6
> 
> 时间：2012-05-11T14:14:02.903
> 
> 标签：c#, visual-studio, exception-handling, aop, postsharp

我有以下代码：

```
[Serializable]
    class ExceptionAspectHandler:OnExceptionAspect
    {
        public override void OnException(MethodExecutionArgs args)
        {
            Console.WriteLine("{0}", args.Exception);
            args.FlowBehavior = FlowBehavior.Continue;
        }
    }

    [OnExceptionAspect]
    public static void divide()
            {
                int n = Convert.ToInt32(Console.ReadLine());
                var a = 100 / n; //the exception happens here
                Console.WriteLine("it should get here");
            } 
```

使用 FlowBehavior.Continue 结束 divide() 并返回 main() 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:33:38.463

请记住，OnException 方面将您的代码包装在 try/catch 中，因此代码将从 catch 继续（而不是重新抛出），并且其行为将默认返回。您是否希望它从引发异常的地方继续？如果是这样，您需要自己将该行显式包装在 try/catch 中。

请阅读[http://www.sharpcrafters.com/blog/post/Day-6-Your-code-after-PostSharp.aspx](http://www.sharpcrafters.com/blog/post/Day-6-Your-code-after-PostSharp.aspx)了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:20:58.393

在 divide() 方法中使用的属性应该是 ExceptionAspectHandler（您已经创建），而不是 OnExceptionAspect。

# c++ - 在 C++ 中返回字符串的最佳方法是什么？

> ID：10553091
> 
> 赞同：69
> 
> 时间：2012-05-11T14:14:09.623
> 
> 标签：c++, string

我的问题很简单：如果我有一些类 Man 并且我想定义返回人名的成员函数，我应该更喜欢以下两种变体中的哪一种？

第一的：

```
string name(); 
```

第二：

```
void name(/* OUT */ string &name); 
```

第一个变体有点低效，因为它会产生不必要的副本（局部变量 -> 返回值 -> 赋值左侧的变量）。

第二种变体看起来很有效，但写起来让我哭了

```
string name;
john.name(name); 
```

而不是简单

```
string name(john.name()); 
```

那么，我应该更喜欢什么变体，效率和便利性/可读性之间的适当权衡是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-11T14:16:30.153

这是一个很好的问题，而且你问它的事实表明你正在关注你的代码。然而，好消息是，在这种特殊情况下，有一个简单的出路。

首先，干净的方法是正确的方法。在大多数情况下（通常在有意义的地方），[编译器会消除不必要的副本。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

编辑（2016 年 6 月 25 日）

不幸的是，David Abaraham 的网站似乎已经离线好几年了，并且那篇文章已经丢失了（没有可用的 archive.org 副本）。我冒昧地将我的本地副本作为 PDF 上传以供存档，[可以在此处找到](https://www.scribd.com/doc/316704010/Want-Speed-Pass-by-Value)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-11T14:17:03.447

使用第一个变体：

```
string name(); 
```

编译器很可能会优化掉任何不必要的副本。请参阅[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)。

在 C++11 中，移动语义意味着即使编译器不执行 RVO，您也不执行完整复制。请参阅[移动语义](http://en.wikipedia.org/wiki/Move_semantics#Rvalue_references_and_move_constructors)。

还要记住，如果替代方案是

```
void name(std::string& s); 
```

那么你必须非常清楚地指定`s`在传递给函数时会发生什么以及它可以具有什么值，并且可能会进行大量的有效性检查，或者只是完全覆盖输入。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-11T14:23:31.560

既然你想为你的类的一个字段创建一个吸气剂，也许你应该这样做：`inline const std::string& name() const { return this->name; }`

由于名称作为 const 引用返回，因此不会在类外修改，也不会通过返回名称创建副本。

之后，如果您想操纵名称，则必须进行复制。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-11T14:17:39.457

我会选择第一个。返回值优化和 C++11 将消除任何复制开销。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T14:17:30.067

由于我们有移动语义（在 C++11 中），您可以使用它：

```
string name(); 
```

即使在 C++03 中，这也几乎是好的，因为编译器可能会对此进行优化（*搜索返回值优化*）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-11T14:19:00.140

优化规则#1：*测量*、优化、测量。或者，正如 Knuth 所说，“过早的优化是万恶之源”。

除非您有强烈的迹象表明简单地返回`std::string`会显着影响软件的性能，否则就这样做。如果您可以*衡量*重大影响，请找到关键路径并对其进行优化*。*不要进行任何有趣的、项目范围内的“优化”，这些优化可能对性能几乎没有好处，但会对代码的可读性、可维护性和健壮性产生负面影响。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T14:17:07.830

我认为您应该使用第一个变体。因为这是简单的 getter 方法，所以到处都在使用这种 getter/setter 方法。

# regex - 正则表达式获取分钟而不是秒

> ID：10553094
> 
> 赞同：1
> 
> 时间：2012-05-11T14:14:11.953
> 
> 标签：regex, sed, grep

我有很多次来自 apache 日志...

```
96.99.193.124 - - [10/May/2012:22:59:29 +0000] 0 "GET / " 200 123 "-" "-"
96.29.193.124 - - [10/May/2012:22:59:56 +0000] 0 "GET / " 200 123 "-" "-"
96.29.193.125 - - [10/May/2012:22:59:56 +0000] 0 "GET / " 200 123 "-" "-"
96.29.193.125 - - [10/May/2012:23:00:00 +0000] 0 "GET / " 200 123 "-" "-"
96.29.193.125 - - [10/May/2012:23:00:00 +0000] 0 "GET / " 200 123 "-" "-" 
```

要提取日期时间戳，我会：

```
sed -e 's;^.*\(\[.*\]\).*$;\1;' inputFileName > outputFileName 
```

这给了我

```
[10/May/2012:22:59:29 +0000]
[10/May/2012:22:59:56 +0000]
[10/May/2012:22:59:56 +0000] 
[10/May/2012:22:59:56 +0000]
[10/May/2012:23:00:00 +0000] 
[10/May/2012:23:00:00 +0000] 
```

我想删除秒部分、方括号和秒，然后得到：

```
10/May/2012:22:59 
10/May/2012:22:59 
10/May/2012:22:59 
10/May/2012:23:00
10/May/2012:23:00 
```

从原始文件中......有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:23:02.047

为什么不只是

```
 echo '96.99.193.124 - - [10/May/2012:22:59:29 +0000] 0 "GET / " 200 123 "-" "-""' \
 | sed 's/^.*\[//;s/ .*$//;s/...$//' 
```

**输出**

```
10/May/2012:22:59 
```

**解释**

```
 96.99.193.124 - - [10/May/2012:22:59:29 +0000] 0 "GET / " 200 123 "-" "-""'
      ^........pt1.......[                    ...............pt2.................$
                                           :.. (pt3) 
```

每个部分消除一大块多余的字符串

```
 pt1 s/^.*\]\[// 
     match/deletes everything up to the first [. 
     I use to `\[' to escape the normal meaning of that char in sed 
       as the beginning of a character class, i.e. `[a-z]` (for 1 example)
 pt2 s/ .*$//
     match/deletes everything from the first space char to the end of the line
 pt3 s/...$//
     match/deletes the last 3 chars form the end of the line. 
```

回想一下，在`sed`

1.  's/matchpattern/replacepattern/' 带有开头的 's' = 替代，是可用的主要工具之一。
2.  正则表达式中的 ^ 字符将匹配锚定到行首
3.  $ char 将正则表达式的匹配锚定到行尾。

您应该只执行 pt1，然后添加 pt2 和 pt3 以轻松查看正在实现的目标。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:18:29.283

尝试这个

```
sed -e 's;^.*\[\([^+]*\).*\].*$;\1;' 
```

解释：

1-我把括号放在组外 2-把 +something 放在外面

它完成了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T14:38:43.127

这可能对您有用：

```
sed 's/.*\[\(.*\):.*/\1/' file 
```

您可以利用*贪婪*来发挥自己的优势，即`\(.*\):`在最后一次之前抓住一切`:`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T14:39:59.270

```
sed -e 's;^.*\[\(.\{17\}\).*\].*$;\1;' 
```

此版本定位起始括号，然后在提取的组中显式包含接下来的 17 个字符（感兴趣的字符串）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T14:22:38.757

另一种方式`grep -oP`：

```
grep -oP "\[\K[^\]\[ ]+" FILE 
```

如果您的 grep 没有`-P`开关，请尝试`pcregrep`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-11T14:24:02.500

这是一个模式：

```
\[(\d+/\w+/\d+:\d+:\d+) 
```

支架用作锚。这里的匹配器很一般。例如，使用`\w+`which 将匹配包含字母或数字的任何单词来捕获月份，但是使用这种 Apache 行的这种顺序组合的所有匹配器给出了一个健壮的模式。

您在整行上使用此模式，因此不需要先捕获括号内的部分。只需捕获您想要的最终数据。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T14:51:41.337

```
sed 's/.*\[//;s/:.. .*//' infile > outfile 
```

在 [ 之前删除，然后从空白处删除。两个命令。

# jquery - 使用 Position Absolute 验证引擎进行多步注册表单验证

> ID：10553099
> 
> 赞同：0
> 
> 时间：2012-05-11T14:14:34.340
> 
> 标签：jquery, html, validation

我正在处理多步骤注册表单。为此，我为表单标签内的每个步骤创建了带有下一步按钮的 div，如下所示...

```
<form action="" method="POST">
<div class="registration_step_1 clearfix">
 /*few form fields here such as username, password etc.*/

  /*Button to proceed to next step*/
  <button class="redBtn right_part step_btn">Next</button>
</div>

<div class="registration_step_2 clearfix">
 /*few form fields here such as username, password etc.*/

  /*Button to proceed to next step*/
  <button class="redBtn right_part step_btn">Next</button>
</div>

<div class="registration_step_3 clearfix">
 /*few form fields here such as username, password etc.*/

  /*Button to proceed to next step*/
  <button class="redBtn right_part step_btn">Next</button>
</div>

<div class="registration_step_4 clearfix">
 /*few form fields here such as username, password etc.*/

  /*Button to proceed to next step*/
  <button class="redBtn right_part step_btn">Next</button>
</div>

<div class="registration_step_final clearfix">
<input type="submit" value="Register" class="redBtn round-button">
</div>

</form> 
```

我正在使用位置绝对表单验证引擎。

我们可以按如下方式触发验证： jQuery("#formID").validationEngine();

问题是每个步骤都可以有很少的必填字段。对于最初的处理向导，我只显示第一步并显示：没有其他 div。但在这种情况下，当步骤 1 的所有必填字段都已提交时，表单将提交到服务器。

任何人，请建议如何处理这种情况。理想情况下，当填写特定步骤的所有必填字段时，它应该进入下一步并且不应该提交，反之亦然。

谢谢你所有的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:01:45.927

使用javascript（此处为jQuery）防止在每个按钮之后提交表单：

```
jQuery(".registration_step_1").click(function() { /*some code */ return false; } ); 
```

# c# - C# 在 Web 服务中实现生产者/消费者队列

> ID：10553102
> 
> 赞同：3
> 
> 时间：2012-05-11T14:14:42.403
> 
> 标签：c#, web-services, producer-consumer

我有一个相当普通的网络服务（老派 asmx）。其中一种方法启动了一些与返回给客户端的结果无关的异步处理。希望下面的小片段有意义：

```
[System.Web.Services.WebMethod]
public List<Foo> SampleWebMethod(string id)
{
    // sample db query
    var foo = db.Query<Foo>("WHERE id=@0",id);

    // kick of async stuff here - for example firing off emails
    // dont wait to send result
    DoAsyncStuffHere();

    return foo;

} 
```

我对 DoAsyncStuffHere 方法的初始实现使用了 ThreadPool.QueueUserWorkItem。所以，它看起来像：

```
public void DoAsyncStuffHere()
{
    ThreadPool.QueueUserWorkItem(delegate
    {
        // DO WORK HERE
    });
} 
```

这种方法在低负载条件下运行良好。但是，我需要能够处理相当高负载的东西。因此，生产者/消费者模式似乎是最好的方法。

我感到困惑的地方是如何将队列完成的所有工作限制为跨Web 服务的***所有实例的单个线程。***我将如何最好地设置一个队列以供任何 Web 服务实例访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:27:15.353

您可以使用 a[`System.Collections.Concurrent.BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)和 a[`System.Collections.Concurrent.ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)作为基础集合。
正如命名空间的名称所暗示的，集合是线程安全的。

使用该方法启动一个消费者线程（或几个）以从集合中提取项目`Take()`。当没有可用的项目时，线程将阻塞。

您的 DoAsyncStuffHere 方法将项目添加到 BlockingCollection。这些项目可能是未启动的[`System.Threading.Tasks.Task`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)对象；在这种情况下，消费者线程将在`Start`从集合中获取任务之后执行任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:19:36.580

一种简单的方法是将队列实现为数据库表。

生产者将是由 Web 服务的每个实例处理的请求线程。

消费者可以是任何一种持续运行的进程（Windows 窗体应用程序、Windows 服务、数据库作业等），它一次监视队列并处理一个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:21:13.880

你不能这样做`ThreadPool`——你可以有一个静态构造函数来启动一个工作线程；可以将其工作项插入到`DoAsyncStuffHere`您想要完成的工作队列中，并且工作线程可以检查队列中是否有任何项目可以处理。如果是这样，它会完成工作，否则它会休眠几毫秒。

静态构造函数确保它只被调用一次，并且只应该启动一个线程（除非有一些我不知道的奇怪的 .NET 边缘情况）。

这是一个示例的布局 - 您可能需要在队列上实现一些锁定并为工作线程添加更多复杂性，但我之前成功使用过这种模式。该`WorkItem`对象可以保存您想要传递给工作线程的信息的状态。

```
public static WebService() 
{
  new Thread(WorkerThread).Start();
  WorkQueue = new Queue<WorkItem>();
}

public static void WorkerThread() 
{
  while(true)
  {
    if(WorkQueue.Any()) 
    {
      WorkQueue.Dequeue().DoWork();
    }
    else
    {
      Thread.Sleep(100);
    }
  }
}

public static Queue<WorkItem> WorkQueue { get; set; }

[System.Web.Services.WebMethod]
public List<Foo> SampleWebMethod(string id)
{
  WorkQueue.Queue(newWorkItem());
} 
```

# .net - 在 .NET 中，如何创建具有最快的 Write() 方法的流

> ID：10553111
> 
> 赞同：0
> 
> 时间：2012-05-11T14:15:40.600
> 
> 标签：.net, multithreading, queue, circular-buffer

我有一个应用程序将消息记录到两个文件中，并通过套接字发送它们。一个文件获得二进制表示，另一个获得人类可读的等价物。消息类具有将消息的人类可读版本输出到流的功能。二进制表示在消息类中以字节 [] 的形式提供。

我想最大化传出消息率，所以我觉得日志记录操作应该尽可能快。

一种可能的方法是简单地创建一个任务来执行每个日志记录操作并将对消息实例的引用传递给每个任务。对我来说，这种方法的问题是消息实例是一个池对象，并且必须在某个时候返回到池中。由于多个线程持有对消息对象的引用，因此很难协调将消息对象返回到池中，以便最后一个使用它的线程实际执行返回。另外，我不想在每次需要发送消息时创建任务（或任何对象）。

我相信 Write() 的最快实现将具有以下两个特征： 1\. 将在与发送消息的线程不同的线程上处理将数据写入文件的工作。2\. 不会​​分配任何额外的对象（因此没有机会为 GC 暂停）。由于不希望分配新内存，Write() 方法可以阻塞，直到有足够的空间来接受写入消息。

我正在考虑在这里使用类似 CircularBuffer/CircularStream 的东西：http: [//circularbuffer.codeplex.com/](http://circularbuffer.codeplex.com/)（尽管当缓冲区已满时此实现不会阻塞）

你觉得呢？你有没有什么想法？

# .net - 多个有时重叠的项目的SVN项目结构和分支策略

> ID：10553112
> 
> 赞同：0
> 
> 时间：2012-05-11T14:15:44.353
> 
> 标签：.net, svn, project-structure, branching-strategy

我正在尝试为一个四人小团队提出一个可靠的 SVN 存储库结构和分支策略。我们在任何时候都有四个主要项目和几个次要项目在开发中，并且项目之间经常存在一些重叠。我们当前的策略是完全低效的，包括将这些文件夹中的每一个（大约 15 个左右）放在一个版本化的“主干”文件夹下。这意味着每当我们进行分支时，我们都会对所有 15 个项目进行分支（更新工作副本并拉下一个分支大约需要 20 分钟，以透视这一点）。

主要问题是一些项目重叠，并且一个特性或任务需要在项目 A 和项目 B 中更改某些内容并不少见（所有这些项目都与同一个数据库通信并使用相同的数据库表；此外它们共享一个业务层，因此在一个项目中更改一个类会影响另一个），因为这些项目本质上都是一个“伞形”应用程序的相关部分。例如，对于主要项目，基本上有：

*   项目A：前端电商网站
*   项目 B：后端执行/管理系统
*   项目 C：前端站点的无品牌副本（相同的东西减去 CSS 样式并且功能较少）
*   项目 D：Web 服务 API

A 和 B 交织在一起，但 B 是一个软件即服务应用程序（我们充当我们自己的客户端），而 C 作为客户的前端（A 充当我们自己公司的前端，因为 C 本质上是A 具有较少的功能且没有公司特定的详细信息）。D 只能由客户访问，但我的最终目标是让 A、B 和 C 都通过 Web 服务使用 D 的功能（基本上是吃我们自己的狗粮）。

我们刚刚决定采用三周部署策略（这意味着我们每三周进行一次生产部署），而我们当前的 SVN 策略很麻烦，并且使得分支非常痛苦。

由于多个项目有重叠，将它们全部放在一个具有分支/标签/主干格式的项目文件夹下是否有意义，或者我们应该将它们视为单独的项目？也许结合一些，例如将 SaaS 前端/后端结合在一起，我们自己的网站和 Web 服务是分开的？

参与类似项目的人的任何建议或建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:21:17.723

这听起来和我公司的项目一模一样。我们有同样的问题，我们默默地放弃了对所有内容使用相同的代码库并将所有内容拆分为单独的项目，因为这样更容易管理。如果可能的话，您还可以为您拥有的公共代码创建单独的项目，然后在所有其他项目中引用这些项目中的 dll。我在上一家公司做过后一件事，而且效果很好。这只是意味着如果您更新公共代码，您必须记住将最新的 dll 复制到当前项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:23:34.193

我会尝试这样的事情：

**D** - 将此作为单独的回购。使用 svn:externals 包含在其他需要的仓库中。
**B** - 将此作为单独的回购。使用 svn:externals 包含在其他需要的仓库中。
**A** - 将此作为单独的仓库，它可以是主干。
**C** - 使用与 A 相同的存储库，但将其设为自己的分支。您想要向客户端公开的任何来自主干的功能，您都可以从主干合并到这个分支中。

# c# - 使用 ChildViewModel 从 ShellViewModel 的 BindableCollection 中删除项目？

> ID：10553114
> 
> 赞同：0
> 
> 时间：2012-05-11T14:15:46.430
> 
> 标签：c#, wpf, mvvm, caliburn.micro

我有一个 ShellViewModel，`BindableCollection`它在 ItemControl 的帮助下绑定到 Canvas。

我借助 ShellViewModel 的按钮将派生自 Screen 的 ChildViewModel 添加到此 bindableCollection。

我在 ChildViewModel 中有一个关闭按钮，单击此按钮时，我想从 ShellViewModel 的 BindableCollection 中删除项目，

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:10:15.800

如果您想维护现有的实现，您始终可以创建一个事件并使用 EventAggregator。您的 ChildViewModel 需要发布事件，而 ShellViewModel 需要实现`IHandle<ChildViewModelMessage>`接口。作为该实现的一部分，它将能够从 BindableCollection 中删除 ChildViewModel。通常，它看起来像这样：

```
public class ChildViewModelMessage {
    // Implementation here
}

public class ShellViewModel : IHandle<ChildViewModelMessage> {
    ...
    public void Handle(ChildViewModelMessage message) {
        // Handle here
    }
}

public class ChildViewModel {
    ...
    public IEventAggregator Events { get; set; }
    protected void HandleClose() {
        this.Events.Publish(new ChildViewModelMessage());
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T14:40:08.273

如果您需要在不同的视图模型之间进行交流，您应该使用信使。这是 mvvm light 工具包中的一个示例：http: [//blog.galasoft.ch/archive/2009/09/27/mvvm-light-toolkit-messenger-v2-beta.aspx](http://blog.galasoft.ch/archive/2009/09/27/mvvm-light-toolkit-messenger-v2-beta.aspx)

# python - 在 Mint 上安装 M2Crypto 的问题：跟进

> ID：10553118
> 
> 赞同：4
> 
> 时间：2012-05-11T14:15:55.937
> 
> 标签：python, linux, ssl, m2crypto, linux-mint

[我在这里](https://stackoverflow.com/questions/10539676/problems-installing-m2crypto-on-mint)问了一个关于在 Mint 中安装 M2Crypto python 库的问题。这个问题得到了成功的回答，我能够构建和安装 M2Crypto。但是，我无法在 Python 中使用它。当我尝试导入模块时，出现以下错误：

```
>>> import M2Crypto
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/M2Crypto/__init__.py", line 22, in <module>
    import __m2crypto
ImportError: /usr/local/lib/python2.7/dist-packages/M2Crypto/__m2crypto.so: undefined symbol: SSLv2_method 
```

如果有人知道如何解决此错误，请告诉我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-27T13:53:06.907

两年后 m2crypto0.21.1 中的问题仍然存在，所以这里是给 Ubuntu 用户的说明。如果您不使用`virtualenv`，则可以通过从 Ubuntu PPA 而不是 pip 安装 m2crypto 来轻松修复它：

```
sudo pip uninstall m2crypto 
sudo apt-get install python-m2crypto 
```

似乎问题已在 PPA 中解决，但未在项目的存储库中解决。至少它在 Ubuntu 12.04 对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:39:57.533

要扩展上面的答案：

这是 M2Crypto 0.21.1 中的一个错误。这与 SSLv2 在许多平台上被从 OpenSSL 中删除的事实有关，因为它太不安全了，特别是 Debian [ [1](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=589706) ] 和 Ubuntu。

在编译期间未检测到删除。有一个广泛可用的补丁可以解决这个问题。我将其合并到 Github 上的 M2Crypto 源代码中。

您可以使用 pip 直接从存储库安装，如下所示：

```
pip install -e git+https://github.com/Hypernode/m2crypto#egg=M2Crypto 
```

对于那些想要检查修复此问题的（大量发布的）补丁的人：[b432d36](https://github.com/Hypernode/M2Crypto/commit/b432d362223b2e2f5565dfb2eea799d10a419e22)

编辑：移动到另一个位置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T14:45:20.597

看起来这是 M2Crypto 0.21.1 中引入的一个错误，这里有一个[补丁](http://us.generation-nt.com/answer/bug-637904-m2crypto-so-undefined-symbol-sslv2-method-help-204454061.html)可以纠正这个问题。

也许您可以尝试安装旧版本的 M2Crypto（如 0.20.1-1.1）或使用[patch](http://linux.die.net/man/1/patch)命令手动应用补丁。

# javascript - 如何使用 javascript 在 Razor/MVC3 中打印 Google Visualization API 折线图？

> ID：10553122
> 
> 赞同：1
> 
> 时间：2012-05-11T14:16:04.587
> 
> 标签：javascript, asp.net-mvc-3, charts, google-visualization

我可以使用 google api 显示图表，但无法使用 javascript 打印。我正在打印的图表使用 id="chart_div" 的标签。请帮忙。

# c# - 更新 SQL 数据库日期列

> ID：10553130
> 
> 赞同：1
> 
> 时间：2012-05-11T14:16:30.747
> 
> 标签：c#, sql-server, date

我有 SQL Server 数据库和带有日期列的表（日期数据类型）。我想将所有记录的日期列的值更改为今天的日期，但有些东西不起作用，请帮忙。我的代码：

```
 con.Open();
 DateTime date = DateTime.Now.Date;
 string insStr = "UPDATE tblBusiness SET DateCreated = @Date;";
 SqlCommand updateDate = new SqlCommand(insStr, con);
 updateDate.Parameters.AddWithValue("Date", date);
 updateDate.ExecuteNonQuery();
 con.Close(); 
```

谢谢，橡树

编辑：感谢您的回答。它不起作用的原因是数据库中的记录太多，默认更新超时为 30 秒或其他什么。这就是为什么没有更改记录。updateDate.CommandTimeout = 0; 解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:18:10.133

我认为这一行：

```
updateDate.Parameters.AddWithValue("Date", date); 
```

应该：

```
updateDate.Parameters.AddWithValue("@Date", date); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:18:41.897

使用`@Date`而不是`Date`

```
updateDate.Parameters.AddWithValue("@Date", date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:19:10.303

```
//Replace
updateDate.Parameters.AddWithValue("Date", date);

// with (watch the @-symbol)
updateDate.Parameters.AddWithValue("@Date", date); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T14:19:31.910

尝试

```
updateDate.Parameters.AddWithValue("@Date", date); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T14:21:41.807

替换`Date`为`@Date`。

```
updateDate.Parameters.AddWithValue("@Date", date); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T16:20:50.003

感谢您的回答。它不起作用的原因是数据库中的记录太多，默认更新超时为 30 秒或其他什么。这就是为什么没有更改记录。updateDate.CommandTimeout = 0; 解决了这个问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-11T14:19:54.930

这应该有效。如果要更新所有记录，则不需要 where 子句。

```
con.Open();
 DateTime date = DateTime.Now.Date;
 string insStr = "UPDATE tblBusiness SET DateCreated = " + date;
 SqlCommand updateDate = new SqlCommand(insStr, con);
 updateDate.ExecuteNonQuery();
 con.Close(); 
```

# linux - Bash 脚本中文档样式的标准是什么？

> ID：10553137
> 
> 赞同：26
> 
> 时间：2012-05-11T14:17:00.780
> 
> 标签：linux, bash, shell, documentation

我目前正在编写一个包含许多函数的 Bash 脚本，并希望添加文档以使其他团队成员了解该函数的意义。

是否有用于记录 Bash 脚本及其包含的功能的标准“样式”？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-05T12:51:30.127

我确实知道我正在添加一个旧问题的答案，但我觉得工具最近有所改进，并想提供更多建议以帮助其他正在查看此问题的人。

我最近发现[了 TomDoc.sh](https://github.com/mlafeldt/tomdoc.sh)，它在 shell 脚本中使用了 TomDoc 样式的注释。然后提供的工具可以提取信息并生成降价或纯文本文档。

其他工具也存在。 [BashDoc](http://sourcemage.org/bashdoc)仿照 JavaDoc 语法，支持多种标签。使用[RoboDoc](http://rfsber.home.xs4all.nl/Robo/robodoc.html)，您可以在 Bash 代码中嵌入 C 风格的注释，它会提取必要的信息。最后，Apple 将[HeaderDoc](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/HeaderDoc/intro/intro.html)用于其 shell 脚本。所有这三个都为您撰写的评论提供了建议的样式。

如果您希望对代码进行注释而不是生成文档，[那么 shocco.sh](http://rtomayko.github.io/shocco/)可能是您更喜欢的。它没有特定的格式，旨在让您查看描述您正在运行的 shell 命令的人类可读文本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T14:22:45.800

通常，我会尝试遵循类似于我在其他语言（如 C）中使用的指南。

这包括一个函数头，其中包含：

*   功能名称、简短描述和用途
*   参数和返回值列表，带有描述
*   所有副作用的列表（例如，变量或文件的更改）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T14:31:45.540

据我了解，Bash 文档没有标准。但通常你会：

*   在您的 bash 文件中包含一个标头，其中包含您的姓名、版权、联系方式以及脚本的简要功能
*   一个 usage() 函数，它解释了如何启动和使用你的函数。
*   每个函数顶部的注释以解释 func 的作用。

# android - 在 tablerow 组中找到选中的复选框

> ID：10553138
> 
> 赞同：0
> 
> 时间：2012-05-11T14:17:02.420
> 
> 标签：android, checkbox, tablelayout, tablerow

你好我有这样的东西

```
TableLayout tblGrid = new TableLayout(getBaseContext());
for(int i = 0; i < 10; i++) {
    EditText edtArticulo = new EditText(getBaseContext());
    EditText edtCantidad = new EditText(getBaseContext());
    EditText edtPrecio = new EditText(getBaseContext());
    EditText edtSubtotal = new EditText(getBaseContext());
    CheckBox chbSeleccion = new CheckBox(getBaseContext());
    TableRow tbrRenglon = = new TableRow(getBaseContext());

    tbrRenglon.addView(chbSeleccion, 0);
    tbrRenglon.addView(edtArticulo, 1);
    tbrRenglon.addView(edtCantidad, 2);
    tbrRenglon.addView(edtPrecio, 3);
    tbrRenglon.addView(edtSubtotal, 4);
}
tblGrid.addView(tbrRenglon); 
```

我的问题是我在 tablerows 组中找不到选中的复选框

我需要一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:10:20.660

在循环外的数组中保留对每个复选框的引用。然后循环遍历数组以查看哪些被检查

# asp.net - 设置面板启用 = true 时 AJAX tabcontainer 抛出异常

> ID：10553141
> 
> 赞同：1
> 
> 时间：2012-05-11T14:17:06.197
> 
> 标签：asp.net, ajax, asp.net-ajax, ajaxcontroltoolkit

我有一个标签容器，里面有八个面板。为了使其更便于用户使用，我设置了 7 个面板 enabled=false 直到用户通过下拉菜单选择他们想要编辑/插入的项目。但是当他们选择一个项目并且下拉列表执行回发时，我收到以下错误：“Microsoft JScript 运行时错误：Sys.InvalidOperationException：处理程序未通过 Sys.UI.DomEvent.addHandler 方法添加。” 我可以选择继续，一切似乎都正常工作，但我显然不能有错误。

我已经用谷歌搜索和谷歌搜索了一些，但我找不到任何可以解决这个问题的东西。在此期间，我已将代码更改为具有面板 Visible=false 并且不会弹出错误，但我不喜欢被击败，所以如果有人知道导致此问题的原因以及如何解决它，我将不胜感激它。

编辑：附加信息；该错误仅在第一次弹出。我可以重置选择，然后进行另一个选择，它不会出错。所以我猜在初始加载中有些东西是不对的。

编辑部分 Duex： ScriptResource 中引发错误的行是：

```
if (!(cache instanceof Array)) throw Error.invalidOperation(Sys.Res.EvenHandlerInvalid); 
```

所以我猜这意味着如果面板已启用 =“False”，它并没有真正在 page_load 加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:21:23.220

确保您没有尝试访问其他面板中的信息或控件。我认为问题在于一个面板正在访问或尝试访问另一个面板中的某些内容。您也可以尝试使用一个更新面板并将七个 DIV 放入其中，然后让下拉列表显示选定的 DIV。

# javascript - 简单的 javascript 问题 - 列表未正确扩展

> ID：10553143
> 
> 赞同：0
> 
> 时间：2012-05-11T14:17:14.727
> 
> 标签：javascript, css, list

CSS：

```
#divMainMenu ul {
    list-style-type: none;
    padding: 5px 0;
    height:400px;
}
#divMainMenu li {
    height: 17px;
    margin: 3px 0;
    padding: 14px 2px;
    border: 1px solid #eee7cb;
    background: url(../../Images/50pTransparent-20x20.png) repeat;
}
#divMainMenu li ul{
    display: none;
} 
```

html和脚本：

```
<script type="text/javascript">
function Show(pObj)
{
pObj = document.getElementById(pObj).id;
if (document.getElementById(pObj).style.display=='none')
    document.getElementById(pObj).style.display='block';
else
    document.getElementById(pObj).style.display='none';
}
</script>
<div id="divSidePanel">
    <div id="divMainMenu">
        <ul>
            <li onclick="Show('Buyers')">Buyers
                <ul id="Buyers" style="display:none;">
                    <li>Search</li>
                    <li>Submit request</li>
                    <li>Send message to owner</li>
                </ul>
            </li>
            <li>Sellers</li>
            <li>Contact Us</li>
        </ul>
    </div>
</div> 
```

问题：当我点击文本**Buyers**时，它会显示子/嵌套列表。但是，其他项目不会为嵌套列表腾出空间。因此嵌套列表覆盖了主列表的空间。

这是我的代码的问题还是它的标准工作方式？有没有办法让其他项目“下推”为嵌套项目让路？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:20:00.490

您需要在 CSS中使用`min-height:`而不是:。`height`如果你了解 jQuery，.hide() 和 .show() 函数会更好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:24:19.903

把这个从你的 CSS 中拿出来：

```
#divMainMenu li ul{
    display: none;
} 
```

并将`height`属性更改为`min-height`您的`#divMainMenu li`选择器

结果css：

```
#divMainMenu ul {
    list-style-type: none;
    padding: 5px 0;
    height:400px;
}
#divMainMenu li {
    min-height: 17px;
    margin: 3px 0;
    padding: 14px 2px;
    border: 1px solid #eee7cb;
    background: url(../../Images/50pTransparent-20x20.png) repeat;
}
#divMainMenu li ul{

}​ 
```

[例子](http://jsfiddle.net/M5HLD/ "例子")

# c# - 实体框架 - CSDL、SSDL 和 MSL 文件

> ID：10553146
> 
> 赞同：17
> 
> 时间：2012-05-11T14:17:17.020
> 
> 标签：c#, visual-studio-2010, entity-framework, c#-4.0, ado.net-entity-data-model

我只是很挑剔，但我正在研究 Entity Framework 如何从 EDMX 文件生成 DLL，我在 msdn 上看到了这个：

> 实体数据模型设计器 (Entity Designer) 在设计时将模型和映射信息存储在 .edmx 文件中。在构建时，实体设计器使用 .edmx 文件中的信息来创建实体框架在运行时需要的 .csdl、.ssdl 和 .msl 文件。

实际上我觉得奇怪的是，“在构建时”创建了 .csdl、.ssdl 和 .msl，所以我决定进行测试。我知道这些文件是基于 TablePerTypeStrategy.xaml 流生成的，所以我将其删除并尝试构建我的应用程序。它成功了。

当我选择“从模型生成数据库”时，我确实收到一条错误消息，提示 TablePerTypeStrategy.xaml 文件丢失。所以我很困惑，从这个测试中可以清楚地看出，当我尝试生成数据库而不是构建应用程序时正在生成生成。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-12-25T05:28:05.530

如果您有兴趣查看 *.csdl、*.ssdl、*.msl 文件，请先构建您的项目一次。现在，在选择您的项目（包含 edmx 文件）后，单击解决方案资源管理器中的“显示所有文件”按钮（显示为红色箭头），如下面的快照所示。

[![在此处输入图像描述](../Images/5520a1be47e98b48246b55dcb834482a.png)](https://i.stack.imgur.com/AINY4.png)

目录结构表示为`obj\x86\Debug\edmxResourcesToEmbed`. 所有实体框架特定的 xml 文件都是在构建期间创建的，因为它们可以在`obj`文件夹中看到并作为资源嵌入。

我的项目中有两个 edmx 文件，`EFCoding.edmx`因此`Model1.edmx`您会看到每种类型的文件分别有两组。希望这种观点对某人有所帮助。

**注意**：所有这些 EF 元信息文件也可以简单地复制到项目输出目录（代替嵌入它们），只需按照[此处](https://stackoverflow.com/q/7157965/465053)的建议调整 EF 模型设计器的属性。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-11T14:21:07.473

这些文件（.csdl、.ssdl、.msl）在构建时生成，并作为资源嵌入到程序集中，供实体框架类在运行时使用。从模型生成数据库是生成数据库创建脚本的不同过程。

# iphone - youtube 视频执行后的 iOS 视图偏移

> ID：10553151
> 
> 赞同：1
> 
> 时间：2012-05-11T14:17:47.570
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在调用 youtube 频道`UIWebView`。当用户选择视频时，设备会正常启动其视频播放器。但是，当视频结束或用户完成它返回查看时，偏移量将应用于整个应用程序！所有视图的顶部都有偏移，但这仅发生在具有兼容模式的 iPad 和 iPad 模拟器上，而不发生在 iPhone 和 iPhone 模拟器上！如何解决？谢谢你。

![在此处输入图像描述](../Images/e5f03551c047598b5bc52c29ad7ef425.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:19:44.297

问题是视频执行后状态栏消失。

`[[UIApplication sharedApplication] setStatusBarHidden:NO];`当使用触发事件时，问题正在解决`NSNotificationCenter`

# asp.net-mvc-3 - 即使文件不存在，MVC3/T4 自定义脚手架也会给出文件存在错误

> ID：10553156
> 
> 赞同：2
> 
> 时间：2012-05-11T14:18:21.857
> 
> 标签：asp.net-mvc-3, t4, scaffolding, asp.net-mvc-scaffolding, t4scaffolding

我已经为 MVC3 编写了一个自定义脚手架，使用 T4 模板为作为参数传递给脚手架的数据库和表的删除存储过程搭建脚手架。当我运行脚手架时，会在正确的位置创建输出文件，但出现以下错误：

> Invoke-ScaffoldTemplate：无法添加“UpdateCustomerCoupon.sql”。已存在具有该名称的文件。在 line:1 char:23 + param($c, $a) return 。<<<< $c @a + CategoryInfo : NotSpecified: (:) [Invoke-ScaffoldTemplate], COMException + FullyQualifiedErrorId : T4Scaffolding.Cmdlets.InvokeScaffoldTemplateCmdlet

文件是否存在于输出位置并不重要。我每次都会收到这个错误。

这是脚手架的 PowerShell 脚本：

```
[T4Scaffolding.Scaffolder(Description = "Enter a description of DeleteSQL here")][CmdletBinding()]
param(
    [parameter(Mandatory = $true, ValueFromPipelineByPropertyName = $true)][string]$DatabaseName,
    [parameter(Mandatory = $true, ValueFromPipelineByPropertyName = $true)][string]$TableName,
    [string]$Project,
    [string]$CodeLanguage,
    [string[]]$TemplateFolders,
    [switch]$Force = $true
)

$outputPath = "Scripts/SQL/$TableName/Delete$TableName"

Add-ProjectItemViaTemplate $outputPath -Template DeleteSQLTemplate `
    -Model @{ TableName = $TableName; DatabaseName = $DatabaseName; Project = $Project } `
    -SuccessMessage "Added DeleteSQL output at {0}" `
    -TemplateFolders $TemplateFolders -Project $Project -CodeLanguage $CodeLanguage -Force:$Force

Write-Host "Scaffolded DeleteSQL" 
```

这是 T4 模板代码：

```
<#@ Template Language="C#" HostSpecific="True" Inherits="DynamicTransform" Debug="True" #>
<#@ Output Extension="sql" #>
<#@ assembly name="System.Collections" #>
<#@ assembly name="System.Configuration" #>
<#@ assembly name="System.Data" #>
<#@ assembly name="System.Web" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.Configuration" #>
<#@ import namespace="System.Data" #>
<#@ import namespace="System.Data.SqlClient" #>
<#@ import namespace="System.Web" #>
USE [<#= Model.DatabaseName #>]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[Delete<#= Model.TableName #>] (
    @P<#= Model.TableName #>ID AS BIGINT,
    @PChangedByUserID BIGINT,
    @PChangedByURL VARCHAR(1024),
    @PChangedByIpAddress varchar(16)
)
AS
    SET NOCOUNT ON

    BEGIN TRY
        BEGIN TRANSACTION
            -- update user history
            DECLARE @userHistoryID BIGINT = 0;
            DECLARE @details VARCHAR(4096) = '[<#= Model.TableName #>] ID ''' + CAST(@P<#= Model.TableName #>ID AS VARCHAR) + ''' was deleted.'
            EXEC InsertUserHistory @PChangedByUserID, @details, @PChangedByURL, @PChangedByIpAddress, @userHistoryID OUTPUT

            -- Rollback transaction if user history was not created
            IF(@userHistoryID = 0) BEGIN
                ROLLBACK
                SELECT CAST(-1 AS INT)
                RETURN
            END

            DELETE FROM
                [<#= Model.TableName #>]
            WHERE
                [ID] = @P<#= Model.TableName #>ID
        COMMIT

        SELECT CAST(1 AS INT)
    END TRY
    BEGIN CATCH
        ROLLBACK
        SELECT CAST(-2 AS INT)
    END CATCH

    RETURN 
```

我通过在包管理器控制台中键入“ **Scaffold DeleteSQL -DatabaseName $DatabaseName -TableName $TableName ”来调用脚手架。**

我还尝试使用 -Force 选项调用脚手架，如下所示：“ **Scaffold DeleteSQL -DatabaseName $DatabaseName -TableName $TableName -Force** ”。我也使用了“ **-Force true** ”和“ **-Force:true** ”，但没有成功。还要注意 $Force 参数无论如何都设置为 true，所以我认为它应该默认覆盖，对吧？

我需要做什么才能摆脱这个错误？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T21:38:09.057

看起来问题与生成输出的路径有关。

我在 PowerShell 脚本中更改了这一行：

```
$outputPath = "Scripts/SQL/$TableName/Delete$TableName" 
```

对此：

```
$outputPath = "Scripts\SQL\$TableName\Delete$TableName" 
```

我唯一改变的是从“/”到“\”的斜线。现在，我不再收到错误消息了。

# javascript - 在新事件上出现错误 Unexpected token ILLEGAL

> ID：10553161
> 
> 赞同：0
> 
> 时间：2012-05-11T14:18:32.480
> 
> 标签：javascript, jquery, webkit

我收到以下错误：

Uncaught SyntaxError: Unexpected token ILLEGAL

这显示在我页面的第 1 行。

我正在使用以下代码：

```
$('.hollaBackClick').live('click', function(){

    var currentElement = $(this);
    var hollaID = currentElement.attr('hollaID');
    var userID = currentElement.attr('userID');
    var username = currentElement.attr('username');

    var hollaBackBoxHTML = '<form id="hollaBackForm">' +
        '<input type="hidden" name="hollaID" value="' + hollaID + '" />' +
        '<input type="hidden" name="userID" value="' + userID + '" />' +
        '<input type="hidden" name="username" value="' + username + '" />' +
        '<textarea name="hollaBackContent" id="hollaBackContent" placeholder="HollardBack@' + username + '" />' +
        '<input type="submit" name="hollaBackSubmit" id="hollaBackSubmit" value="HollaBack" />' +
    '</form>';

    currentElement.after(hollaBackBoxHTML);

}); 
```

我在整个网站上都使用点击事件，这是我得到错误的唯一地方，我有点难以理解可能导致问题的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:22:21.263

```
currentElement.after(hollaBackBoxHTML); 
```

你想这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:03:12.170

我已经解决了这个问题，我很困惑，并且有两个具有相同类的 html 元素没有属性。换班解决了这个问题。因此，要确认遇到此问题的其他任何人，请确保您的活动针对的是您想要的特定元素。

谢谢你们的帮助！

# c# - 为 TCP 套接字使用 .NET API 缓冲区？

> ID：10553177
> 
> 赞同：0
> 
> 时间：2012-05-11T14:19:32.930
> 
> 标签：c#, .net, sockets, tcp, buffer

我正在使用[.NET Socket 类](http://msdn.microsoft.com/en-us/library/attbb8f5)通过专有二进制协议传输数据。整个通信是异步的：

```
socket.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
        new AsyncCallback(ReadCallback), state); 

[...]

public static void ReadCallback(IAsyncResult ar) {
  StateObject so = (StateObject)ar.AsyncState;
  Socket s = so.workSocket; // my socket
  int rxBytesCnt = s.EndReceive(ar); // number of Bytes received
  so.buffer ... // processing data
} 
```

因为通信是异步的，所以我可能会同时收到多条消息。这就是为什么我需要在数据流中搜索消息开始字节和消息字节结束的原因。

.NET API 中是否有一个类可以用作 StringBuffer 等缓冲区？我需要一个字节队列，我只能弹出代表一条消息的那么多字节。还是需要自定义实现？速度够快吗？我将使用 ThreadPool 来管理 2000 个 TCP 连接，这就是我关心性能的原因。

非常感谢您！

# javascript - 如何使用 jquery 在 html 页面中显示完整的 XML

> ID：10553180
> 
> 赞同：0
> 
> 时间：2012-05-11T14:19:39.827
> 
> 标签：javascript, jquery, html, xml

我加载一个xml

```
 $.ajax({
            url: '../rest/',
            dataType: "xml",
            success: showXML

        });

        function showXML(xml) {
            $("#output").text((xml));   
        } 
```

但他没有在我的输出 div 中显示 xml

他展示了这一点：**[object Document]** 需要做什么才能简单地显示 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:26:01.983

因为您将 设置`dataType`为`xml`jquery 将自动为您提供成功回调的数据参数的对象。

尝试使用此签名：

```
function showXML(xml, textStatus, jqXHR) 
```

和：

```
$("#output").text(jqXHR.responseText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:24:52.823

更改`dataType`为`"html"`或`"text"`。如果这不起作用，您可能需要执行帖子评论中所说的操作。

# c++ - c++ 析构函数 - 何时使用它们以及要删除的内容

> ID：10553182
> 
> 赞同：1
> 
> 时间：2012-05-11T14:19:49.207
> 
> 标签：c++, class, destructor

我在当前的项目中遇到了困难。在以前的版本中，我使用了 std::vectors 一切都很好，没有内存泄漏，没有错误，很好。

然后我转而使用一些指针，因为它更优雅，而且我的性能有所提高。

所以我有像

```
class A
{
    private:
        std::string str;
    public:
        A() {str = "";}
};

class B
{
    private:
        std::string str;
        A* a;
    public:
        B() {str = ""; a = NULL; }
};

class C
{
    private:
        std::vector<B*> bs;
    public:
        C() { bs = std::vector<B*>(); }

}; 
```

我知道每次我使用`new`，我都必须`delete`在之后使用它。所以我为`class B`and创建析构函数`class C`。

这就是我认为它应该看起来的样子：

```
B::~B()
{
    if ( this->a != NULL )
        delete this->a;
}

C::~C()
{
    while ( (this->bs).size() > 0 )
    {
        if ( (this->bs).back() != NULL )
            delete (this->bs).back();
        (this->bs).pop_back();
    }
    (this->bs).clear(); // not necessary since bs has size 0?
} 
```

但是这样一来，我就会遇到各种错误，例如 valgrind 中的“无效读取大小为 4”。

我对析构函数应该是什么样子的想法好吗？我的代码还有什么问题？将私有`std::string`成员更改为`std::string`-pointers 会更好吗？`str = "";`在析构函数中这样做是必要的还是好事？

附带说明：请理解，我已经对“适当的析构函数”和类似的关键字进行了大量搜索，但没有帮助。如果你认为这个问题被问得太频繁了：我不知道，因为我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:26:37.140

Rob 所说的以及您的析构函数可以简化为：

```
B::~B()
{
    delete a;
}

C::~C()
{
    for (size_t i = 0; i < bs.size(); ++i)
        delete bs[i];
} 
```

# eclipse - 如何让eclipse tomcat使用ant脚本创建war然后部署

> ID：10553185
> 
> 赞同：3
> 
> 时间：2012-05-11T14:19:54.943
> 
> 标签：eclipse, tomcat, ant

在 Eclipse 中，要运行我的动态 Web 应用程序，我执行以下操作：

```
right-click on the project >> Run as >> Run on server 
```

然后将应用程序部署在tomcat上。

现在我希望 tomcat 使用我的 ant 脚本来构建战争，然后部署该战争。

我怎样才能在日食中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:28:56.983

右键单击 Ant 脚本 -> 选择“运行方式” -> “Ant Build”

选择目标并“运行”

现在，“外部工具”下的“运行”菜单中应该有一个条目，您也可以使用工具栏中的红色/绿色按钮（在“运行”按钮的右侧）访问该条目。

# javascript - 在网络浏览器中，窗口对象是原生 ECMAScript 对象吗？

> ID：10553188
> 
> 赞同：5
> 
> 时间：2012-05-11T14:19:59.780
> 
> 标签：javascript, browser

ECMAScript 规范定义了一个[“在控制进入任何执行上下文之前创建的唯一全局对象”](http://es5.github.com/#x15.1)。这个全局对象是 ECMAScript 的标准内置对象，因此是原生对象。

该规范还指出：

> 除了本规范中定义的属性之外，全局对象可能还有其他主机定义的属性。这可能包括一个属性，其值为全局对象本身；例如，在 HTML 文档对象模型中，全局对象的`window`属性就是全局对象本身。

因此，在 Web 浏览器中，`window`对象只是 ECMAScript 全局对象的一个​​方便名称，因此，该`window`对象是原生 ECMAScript 对象。

我正确理解了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:56:03.397

这主要归结为“原生对象”或“宿主对象”真正意味着什么的问题。ECMAScript 规范为这些术语提供了相当抽象的定义，并且有足够的空间对定义进行不同的解释。例如，在原生对象的定义中，“语义”这个词实际上在谈论什么。它只是原始对象语义（在由 [[propName]] 内部属性指定的 ES 中）还是包括对象的应用程序级语义。DOM 窗口对象当然具有 ES 规范中未定义的可观察应用程序级语义，因此如果考虑这些语义，它就不能是“本机对象”。

如果您将其视为实施语用学问题，答案可能要简单得多。ES 引擎实现者可能认为在 ES 堆中分配并由 ES 垃圾收集器管理的任何对象都是“本机 ES 对象”。“宿主对象”通常被认为是存在于 ES 堆外部的东西，并且可以使用某种互操作性层（例如 COM、XPCOM 或 V8 嵌入 API）进行访问。根据实现，DOM 窗口对象可能属于任一类别。与任何规范级别的区别相比，这种区别可能对引擎实现者和主机提供者都更相关。

在 ES 规范的下一版中可能会有进一步的定义澄清。甚至还有一个建议来消除“本机”和“主机”对象术语：[http](http://wiki.ecmascript.org/doku.php?id=strawman:terminology) ://wiki.ecmascript.org/doku.php?id=strawman:terminology 。然而，尚不清楚这些定义是否真的有很大的实际影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:05:44.987

我可以（并且可能会）争辩说，规范不要求全局对象是本地对象。该规范[将本机对象定义](http://es5.github.com/#x4.3.6)为：

> *ECMAScript 实现中的对象，其语义完全由本规范定义，而不是由宿主环境定义。*

[以及主机对象](http://es5.github.com/#x4.3.8)的定义：

> *宿主环境提供的对象来完成ECMAScript的执行环境。*

宿主对象定义当然可以应用到`window`，它是*宿主环境提供的完成ECMAScript执行环境的对象*。此外，ECMAScript 规范并未完全定义其语义。

还有一种情况是，在浏览器中运行的 ECMAScript 引擎，例如 V8、TraceMonkey 等，不会创建`window`对象。相反，它是由 DOM 提供的（例如，从`DOMWindow`or构造和继承）。`Window`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:28:43.527

是的，你的推理听起来是对的。作为半证明，当一个函数在没有显式的情况下执行时`this`（“在全局上下文中”），它的`this`计算结果将`window`在函数体内部。但这确实是特定于 JSVM 的。例如，看看[这个 v8-users 消息](https://groups.google.com/group/v8-users/msg/f1afbde3678e0b37)（以及相关的讨论）。幕后的事情有点复杂，但大致与您向用户描述的一样。

# c - JNI - 遇到“[lib].dll：找不到依赖库”时如何查找丢失的库

> ID：10553192
> 
> 赞同：0
> 
> 时间：2012-05-11T14:20:12.087
> 
> 标签：c, dependencies, java-native-interface

将在 unix 环境（通过 JNI）中编译和运行的 C 项目移动到 Windows 时遇到了一些麻烦。

虽然我已经能够在 Windows 中编译该程序并在我的运行时环境中添加通向它的路径，但之后我收到了错误`System.loadLibrary()`：

```
classes\x32\coremod.dll: Can't find dependent libraries 
```

我怎样才能发现我需要在 中拥有哪些库`%PATH%`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:23:49.387

我不知道这一点，但您可以使用名为[DEPENDS.exe](http://www.dependencywalker.com/)的程序来发现目标使用的 dll。

就我而言，这突出显示了唯一尚未注册的 dll，这意味着我可以简单地将其添加到 dll`%PATH%`中以使我的程序运行。

# sql-server - 将多行合并为一行

> ID：10553198
> 
> 赞同：4
> 
> 时间：2012-05-11T14:20:45.163
> 
> 标签：sql-server, sql-server-2008

我想知道将以下行中的数据合并到另一个视图中的单行的最佳方法。

这些是当前显示的结果；

```
 Type_ID | Client_ID              | PBX_Vendor |
 127     | 090820006311404926326C | Aastra     |
 127     | 090820006311404926326C | Ericsson   |
 127     | 111012237401404926326C | Aastra     |
 127     | 120209287521404926326C | Aastra     |
 127     | 120209287521404926326C | Alcatel    | 
```

以下是我希望如何查看数据；

```
 Type_ID | Client_ID              | PBX_Vendor       |
 127     | 090820006311404926326C | Aastra, Ericsson |
 127     | 111012237401404926326C | Aastra           |
 127     | 120209287521404926326C | Aastra, Alcatel  | 
```

基本上，有多个 PBX 供应商与一个客户 ID 相关联。对于帮助台系统，我需要在一行中显示此显示。

我已经尝试过使用 CONCAT，但我最终得到的只是一行，其中包含 100 多个供应商，这些供应商并非特定于 Client_ID。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:32:56.717

这是**一种**方法（也适用于 2005）：

**桌子**

```
DECLARE @table TABLE
    (
      [Type_ID] INT,
      [Client_ID] VARCHAR(50),
      [PBX_Vendor] VARCHAR(50)
    ) 
```

**数据**

```
INSERT  INTO @table
        SELECT  127,
                '090820006311404926326C',
                'Aastra'
        UNION ALL
        SELECT  127,
                '090820006311404926326C',
                'Ericsson'
        UNION ALL
        SELECT  127,
                '111012237401404926326C',
                'Aastra'
        UNION ALL
        SELECT  127,
                '120209287521404926326C',
                'Aastra'
        UNION ALL
        SELECT  127,
                '120209287521404926326C',
                'Alcatel' 
```

**询问**

```
SELECT  [Type_ID],
        [Client_ID],
        (
          SELECT    STUFF((
                            SELECT  ',' + [PBX_Vendor]
                            FROM    @table
                            WHERE   [Client_ID] = tbl.[Client_ID]
                                    AND [Type_ID] = tbl.[Type_ID]
                            GROUP BY [PBX_Vendor]
                            ORDER BY [PBX_Vendor]
                          FOR
                            XML PATH('')
                          ), 1, 1, '')
        ) PBX_Vendor
FROM    @table tbl
GROUP BY [Type_ID],
        [Client_ID] 
```

**结果**

```
Type_ID     Client_ID               PBX_Vendor
127         090820006311404926326C  Aastra,Ericsson
127         111012237401404926326C  Aastra
127         120209287521404926326C  Aastra,Alcatel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:42:15.633

丹，我已经设法使用您的原始想法进行了一些修改。尽管我无法将其保存为视图，但我了解您无法将 DECLARES 保存为视图；

```
DECLARE @table TABLE
    (
      [Type_ID] INT,
      [Client_ID] VARCHAR(50),
      [PBX_Vendor] VARCHAR(50)
    )

INSERT  INTO @table
        SELECT  dbo.AMGR_User_Fields_Tbl.Type_Id, dbo.AMGR_User_Fields_Tbl.Client_Id, dbo.AMGR_User_Field_Defs_Tbl.Description AS PBX_Vendor
            FROM    dbo.AMGR_User_Fields_Tbl INNER JOIN
                    dbo.AMGR_User_Field_Defs_Tbl ON dbo.AMGR_User_Fields_Tbl.Type_Id = dbo.AMGR_User_Field_Defs_Tbl.Type_Id AND 
                    dbo.AMGR_User_Fields_Tbl.Code_Id = dbo.AMGR_User_Field_Defs_Tbl.Code_Id
            WHERE     (dbo.AMGR_User_Fields_Tbl.Type_Id = 127)

SELECT  [Type_ID],
        [Client_ID],
        (
          SELECT    STUFF((
                            SELECT  ', ' + [PBX_Vendor]
                            FROM    @table
                            WHERE   [Client_ID] = tbl.[Client_ID]
                                    AND [Type_ID] = tbl.[Type_ID]
                            GROUP BY [PBX_Vendor]
                            ORDER BY [PBX_Vendor]
                          FOR
                            XML PATH('')
                          ), 1, 1, '')
        ) PBX_Vendor
FROM    @table tbl
GROUP BY [Type_ID],
        [Client_ID] 
```

# sql - 在sql中对数据行进行排序

> ID：10553199
> 
> 赞同：0
> 
> 时间：2012-05-11T14:20:45.840
> 
> 标签：sql, sorting

请帮助我，我有多个表中的列，所有这些列的数据类型都是整数

我想对数据行进行排序（不是列（不是排序依据））除了主键列

例如

```
column1(pk)   column2         column3         column4          column5
1             6               5               3                1
2             10              2               3                1
3             1               2               4                3 
```

我如何得到这个结果

```
column1(pk)   column2         column3         column4          column5
1             1               3               5                6
2             1               2               3                10
3             1               2               3                4 
```

请尽快帮助我..有可能吗？还是不可能？？？如果不可能，无论排序如何，我都可以获得类似的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:37:10.350

你用的是什么数据库？数据库的功能很重要。其次，这表明存在数据结构问题。需要排序的东西通常是单独的实体。. . 也就是说，表格中的单独行。这篇文章的其余部分回答了这个问题。

如果数据库支持pivot/unpivot，您可以执行以下操作：

(1) 取消透视数据以获取格式 , , (2) 根据值的顺序，使用 row_number() 分配一个新列。(3) 使用 row_number() 创建一个 varchar 新列名。(4) 使用新列再次透视数据。

如果此功能不可用，您可以执行类似的操作。

首先，将数据更改为行：

```
(select id, 'col1', col1 as val from t) union all
(select id, 'col2', col2 from t) union all
. . . 
```

打电话给这个byrow。以下查询附加了一个行号：

```
select br.*, row_number() over (partition by id order by val) as seqnum
from byrow br 
```

将其放入子查询中以取消透视。最终解决方案如下所示：

```
with byrow as (<the big union all query>)
select id,
       max(case when seqnum = 1 then val end) as col1,
       max(case when seqnum = 2 then val end) as col2,
       ...
from (select br.*, row_number() over (partition by id order by val) as seqnum
      from byrow br
     ) br
group by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:24:31.327

您可以使用sql server 的pivot 函数来转换列中的行。在那里应用排序并再次使用 unpivot 将列转换为行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:27:21.150

这是使用 PIVOT 的一个很好的示例，您应该能够对其进行调整以满足您的需求

[http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)

# javascript - 从 iframe 更改 innerHtml

> ID：10553200
> 
> 赞同：0
> 
> 时间：2012-05-11T14:20:47.660
> 
> 标签：javascript, iframe, html, document-ready

我正在尝试从 iframe 的 src 的 ready 函数更改 div 的 innerHTML。代码如下。innerHtml 不会改变，但颜色可以正常工作。关于为什么会发生这种情况和/或如何解决它的想法？

页

```
<html><head></head><body>
<script type="text/javascript" src="Javascript/Import_Subprocess_Content/RAC_Connolly.js"></script>
<div id="importcontent" runat="server">
</div>
<iframe id="frametest" src="./AJAX/Import_Subprocess_Content/RAC_Connolly_ImportSession.aspx">

</iframe>
<div id="popup">FIRST TEXT</div>

</body> 
```

iframe 源代码

```
<script type="text/javascript" src="../../Utilities/Javascript/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="../../Javascript/Import_Subprocess_Content/RAC_Connolly.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        uploadComplete();
    });
</script>
end it! 
```

js

```
function uploadComplete() {
    window.parent.document.getElementById("popup").innerHtml = "lala";

} 
```

仅在 IE7 中进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:19:29.993

大小写问题。正确的语法是

```
document.getElementById("ID").innerHTML = "HTML"; 
```

不是

```
document.getElementByID("ID").innerHtml = "HTML"; 
```

由于经常切换语言，我正在关注 c# 和 javascript 的融合，可能带有 VB 扭曲语法。愚蠢的小错误，大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:34:55.200

您可以尝试的解决方法：

1.  将`uploadComplete`方法传递给父级。

    ```
    function uploadComplete() {
       document.getElementById("popup").innerHtml = "lala";
       return false;
    } 
    ```

2.  在您的 iFrame 中调用此方法

    ```
    <script type="text/javascript">
    $(document).ready(function () {
        parent.uploadComplete();
    });
    </script> 
    ```

类似问题：[Calling a parent window function from an iframe](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function)

# java - 浏览器窗口调整大小时 GWT 调整大小和居中弹出窗口

> ID：10553201
> 
> 赞同：8
> 
> 时间：2012-05-11T14:20:52.510
> 
> 标签：java, javascript, gwt, popup

我需要在浏览器窗口调整大小时调整弹出窗口。我在弹出构造函数中添加了 ResizeHandler ，但是在几个浏览器调整大小 center() 函数后创建新的弹出窗口，而不是居中当前。这里有一些我已经尝试过的代码。请告诉我如何解决这个问题或提出一些解决方案。

```
public BigPopup() {
...
    final BigPopup self = this;
        Window.addResizeHandler(new ResizeHandler() {           
            @Override
            public void onResize(ResizeEvent event) {
                self.setHeight(getNewHeight());
                self.setWidth(getNewWidth());
                self.center();
            }
        });     
...
}

public BigPopup() {
...
        Window.addResizeHandler(new ResizeHandler() {           
            @Override
            public void onResize(ResizeEvent event) {
                BigPopup.this.setHeight(getNewHeight());
                BigPopup.this.setWidth(getNewWidth());
                BigPopup.this.center();
            }
        });     
...
} 
```

添加：

我创建了一个简单的项目来说明问题：弹出窗口类

```
package tesr.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.logical.shared.ResizeEvent;
import com.google.gwt.event.logical.shared.ResizeHandler;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.uibinder.client.UiField;
import com.google.gwt.uibinder.client.UiHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.PopupPanel;
import com.google.gwt.user.client.ui.Widget;

public class BigPopup extends PopupPanel {

    private static BigPopupUiBinder uiBinder = GWT
            .create(BigPopupUiBinder.class);

    interface BigPopupUiBinder extends UiBinder<Widget, BigPopup> {
    }

    @UiField
    Button tstBtn;

    @UiHandler("tstBtn")
    void click(ClickEvent event) {
        this.hide();
    }

    public int[] getSize() {
        int[] mas = new int[2];
        int x = Window.getClientWidth();

        int y = Window.getClientHeight();

        if (x >= 1024) {
            mas[0] = x - 100;
            mas[1] = y - 100;
        } else {
            mas[0] = 1024;
            mas[1] = 768;
        }

        return mas;
    }

    public BigPopup() {
        setWidget(uiBinder.createAndBindUi(this));
        Window.addResizeHandler(new ResizeHandler() {
            @Override
            public void onResize(ResizeEvent event) {
                BigPopup.this.setHeight(getSize()[1] + "px");
                BigPopup.this.setWidth(getSize()[0] + "px");
                BigPopup.this.center();
            }
        });
        this.setHeight(getSize()[1] + "px");
        this.setWidth(getSize()[0] + "px");
        this.setAnimationEnabled(true);
        this.setGlassEnabled(true);
        this.setAutoHideEnabled(false);
    }

} 
```

用于 uibinder 的 XML

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui">
    <ui:style>

    </ui:style>
    <g:HTMLPanel>
        <g:Label text="testLabel"></g:Label>
        <g:Button text="testButton" ui:field="tstBtn"></g:Button>
    </g:HTMLPanel>
</ui:UiBinder> 
```

和主班

```
package tesr.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.RootPanel;

public class AAA implements EntryPoint {

    public void onModuleLoad() {    
        Button btn = new Button("Show Popup");
        btn.addClickHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                BigPopup popup = new BigPopup();
                popup.center();             
            }
        });
        RootPanel.get().add(btn);

    }
} 
```

我做错了什么？或者可能是 GWT 的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T18:30:35.537

这个问题可能与调整大小根本没有任何关系。就是这样：

*   当您单击“显示弹出窗口”按钮时，您将创建第一个 PopupPanel。
*   对于此面板，您在 Window 上注册一个 ResizeHandler。
*   单击“testButton”时，隐藏弹出窗口，但不要取消注册 ResizeHandler。
*   然后，当您再次单击“显示弹出窗口”时，会创建另一个弹出窗口，其中包含另一个 ResizeHandler。

所以我们有两个弹出窗口和两个 ResizeHandler。

现在，在调整大小时，您调用“center()”（这在两个 ResizeHandlers 中都会发生） - 它具有副作用，它显示弹出窗口（如果它们当前未显示）。第一个弹出窗口当前与 DOM 分离，但 GWT 足够聪明，可以重新附加它。但现在你可以同时看到它们。

解决方案是在隐藏弹出窗口时删除调整大小处理程序。

你可能想知道，没有`com.google.gwt.user.client.Window.removeResizeHandler()`方法。它的工作方式有点不同：

```
private final HandlerRegistration handlerRegistration;

public BigPopup() {
  setWidget(uiBinder.createAndBindUi(this));
  handlerRegistration = Window.addResizeHandler(new ResizeHandler() {...});
  ...
}
@UiHandler("tstBtn")
void click(final ClickEvent event) {
   handlerRegistration.removeHandler();
   this.hide();
} 
```

您还应该确保在显示弹出窗口时禁用“显示弹出窗口”按钮。

# ruby-on-rails - Factories.rb 文件未加载

> ID：10553204
> 
> 赞同：0
> 
> 时间：2012-05-11T14:21:08.343
> 
> 标签：ruby-on-rails, ruby

我正在关注 Michael Hartl 的 ruby​​ on rails 教程 3.2，但是当我放入`gem 'factory_girl_rails', '1.4.0'`我的 gemfile 并运行它时，`bundle install`它显示“捆绑完成”，因为 gem 已经加载到我的 PC 中。我的问题是它没有`factories.rb`在 spec 文件夹中生成文件。出了什么问题？

`Gemfile`：

```
source 'https://rubygems.org'

gem 'rails',          '3.2.3'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby',    '3.0.1'

group :development, :test do
   gem 'sqlite3',     '1.3.5'
   gem 'rspec-rails', '2.9.0'
   gem 'annotate',    '~> 2.4.1.beta'
end

# Gems used only for assets and not required
# in production environments by default.

group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier',     '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara',           '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

`routes.rb`：

```
SAMPLEApp::Application.routes.draw do
  resources :users

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:28:11.697

运行`bundle install`不会将任何文件添加到您的 Rails 应用程序。它只会下载它需要使用的正确库。有时这些库会附带一个 rails 生成器，你会运行类似`rails generate some_library:install`. 我不认为 factory_girl_rails 是这种情况。您可能需要手动添加文件。

# java - 在数组中，元素存储的是 Primitives 还是 Objects？

> ID：10553209
> 
> 赞同：2
> 
> 时间：2012-05-11T14:21:21.123
> 
> 标签：java

```
int[] array = new int[10];
for (int i = 0; i < array.length; i++) {
    array[i] = 0;
} 
```

在本例中，值 0 是作为原始值还是对象存储在数组中？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:22:16.757

在这种情况下，该值存储为原语。如果您将类型更改为原始的*wrapper* `Integer`，则该值将作为“自动装箱”进入`Object`。例如，此代码将自动装箱您的值：

```
Integer[] array = new Integer[10];
for (int i = 0; i < array.length; i++) {
    array[i] = 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:22:59.937

在 Java 中，既有基元数组，也有对象数组。

`int[]`是一个基元数组，因此`0`被存储为一个基元。

相应的对象数组将是类型`Integer[]`。存储`0`在这样的数组中会导致它被“自动装箱”到一个`Integer`对象中。

值得指出的是，Java 容器（以及任何其他泛型类）只能与对象一起使用。例如，不可能构造 a `List`of `int`，只能构造 a `List`of `Integer`。正如我上面解释的，这个限制不适用于数组。

# windows - 尝试构建静态 Qt 项目，找不到 configure.exe

> ID：10553210
> 
> 赞同：0
> 
> 时间：2012-05-11T14:21:31.653
> 
> 标签：windows, qt

我正在尝试遵循这个问题中的建议：

[在 Windows 上构建 Qt 4.7.3（最新）](https://stackoverflow.com/questions/6496500/building-qt-4-7-3-latest-on-windows)

它讨论了 configure.exe 的位置。在我的安装中，包括适用于 Windows 的 4.7.4 和 4.8.1，我只在 Symbian/SDKs/Symbian3Qt474/ 中找到 configure.exe

这是正确的可执行文件，我是否应该将该 Symbian 目录添加到我的 %PATH% 以便 Visual Studio 命令提示符可以找到它？

这似乎不在正确的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:35:19.103

确保您已下载[Qt 库](http://qt.nokia.com/downloads/downloads#qt-lib)而不是 SDK。SDK 为二进制发行版，其中的源代码一般仅供参考。

# java - 将 int 值移位零的目的是什么？

> ID：10553212
> 
> 赞同：12
> 
> 时间：2012-05-11T14:21:33.447
> 
> 标签：java, bit-shift

查看 java.nio.DirectByteBuffer 类的源代码，我发现了这个：

```
if ((length << 0) > Bits.JNI_COPY_TO_ARRAY_THRESHOLD) .... 
```

将长度移动零位的目的是什么？这可能是一些性能优化还是其他什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T14:31:38.493

我想我已经解决了。

在 JavaDocs 类中：

```
// -- This file was mechanically generated: Do not edit! -- // 
```

所以它不是手工编码的。它是脚本生成的，并且脚本编写者没有为位移量为零的情况添加优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:23:59.220

做事`i << 0`是无操作的。它的评估结果与 相同`i`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T14:37:41.003

`i << 0`显然是多余的。Java 程序员没有充分的理由刻意编写这段代码。

我会说这段代码是：

*   一个没有思考的人写的，
*   由不了解`<<`操作员做什么的人编写，
*   一些半机械重构的结果，或
*   最初由某种代码生成器或翻译器生成。

但是，字节码或 JIT 编译器很有可能会优化它，或者它不会对性能产生显着影响。

# jquery - jQuery slideToggle 问题与 Wordpress 和 flexslider 中的标题有关

> ID：10553215
> 
> 赞同：2
> 
> 时间：2012-05-11T14:21:44.530
> 
> 标签：jquery, slidetoggle

我正在为 Wordpress 使用 Flexslider，并希望在 flexslider 幻灯片放映中滑动切换每个图像的标题。

这是幻灯片的示例：http: [//lifescienceaurora.com/news/cu-anschutz/cu-anschutz-news/ranking-file/](http://lifescienceaurora.com/news/cu-anschutz/cu-anschutz-news/ranking-file/)

点击左上角的“加号”。

这是问题所在：在单击“+”两次以显示和隐藏当前图像的标题后，下一张幻灯片显示其标题。

在单击切换按钮之前，我需要隐藏所有字幕。

这是我的代码：（我已经更新它以反映“flexslider 的渲染代码”）

 `````
jQuery.noConflict();

jQuery(document).ready(function($){

    $('.flex-caption').hide();
    $('.flexslider').append('<button class="captionToggle">+</button>');

    $('.flexslider button').click(function(){
        $('.flex-caption').slideToggle('slow');
    });
}); 
````  `这里是 HTML 的一个例子

 `````
<div id="smg_1" class="flexslider">
<ul class="slides">
<li><img src="image1.jpg"/>
    <p class="flex-caption">caption1 here</p>
    <button class="captionToggle">+</button>
</li>
<li><img src="image2.jpg"/>
    <p class="flex-caption">caption2 here</p>
    <button class="captionToggle">+</button>
</li>
<li><img src="image3.jpg"/>
    <p class="flex-caption">caption3 here</p>
    <button class="captionToggle">+</button>
</li>
<li><img src="image4.jpg"/>
    <p class="flex-caption">caption4 here</p>
    <button class="captionToggle">+</button>
</li>
</ul>
</div> 
````  `我对 jQuery 的理解仅来自示例，因此我没有解决此问题的工具。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:39:19.820

尝试使用`.stop()`或`.stop(1)`清除以前的动画队列：

`$('span.wp-caption-text').stop(1).slideToggle('slow');`

并与您的问题相关，请尝试：

```
$('.wp-caption button').click(function(){
    $('span.wp-caption-text').is(':visible').hide(); // hide all already visible captions
    $('span.wp-caption-text').stop(1).slideToggle('slow');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T14:35:44.367

听起来你错过了每次出现新幻灯片时关闭它的事件。我建议`$('.wp-caption-text').hide();`每次幻灯片加载/激活时运行。

我没有使用过 flexslider，但这是基于我找到的 API。

```
$(window).load(function() {
   $('.flexslider').flexslider({
       before: function () {
            $('.flex-caption').hide();
       }
   });
}); 
```

更新：这将仅滑动切换您打开的按钮 li 。但是，它不会关闭幻灯片之间的标题。

```
 $('.flexslider ul.slides li button').click(function(){
    $(this).prev().slideToggle('slow');
}); 
```````

# android - Android OS 隐藏完整的 USB 树

> ID：10553216
> 
> 赞同：1
> 
> 时间：2012-05-11T14:21:45.113
> 
> 标签：android

有没有办法从 Android 应用程序中发现完整的 USB 树？当前的 USB 主机`API`仅提供所有设备及其端点的列表。我需要能够将设备与 USB 集线器上的特定端口相关联。在 Windows 中，我可以看到每个设备所在的端口号。

安卓操作系统似乎掩盖了集线器的视线。

我曾想过尝试通过 JNI 访问 Linux，但是，评论中的应用程序： [https](https://github.com/alt236/USB-Device-Info---Android) ://github.com/alt236/USB-Device-Info---Android表明它也没有出现在 Linux 中。

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:09:32.363

你可以只走硬件树。例如，在我的 Nook 上是 /sys/devices/platform/musb_hdrc/usb1。[这是我的应用程序的屏幕截图。](http://dl.xda-developers.com/attachdl/685ad2b27c1a7f80ebe71baba305bb25/50007f97/1/1/3/8/1/5/6/usbmode2.jpg)

# ubuntu - ubuntu 上的 pycuda 安装错误：/usr/bin/ld: 找不到 -lcuda

> ID：10553217
> 
> 赞同：1
> 
> 时间：2012-05-11T14:22:02.897
> 
> 标签：ubuntu, installation, pycuda

我是初学者并在 ubuntu 11.10 上安装 pycuda2011.2.2，但无法完成。库达是 4.0。

我已经安装了库：

> $ sudo apt-get install build-essential python-dev python-setuptools libboost-python-dev libboost-thread-dev -y

像这样调用configure.py：

> $ ./configure.py --cuda-root=/usr/local/cuda --cudadrv-lib-dir=/usr/lib --boost-inc-dir=/usr/include --boost-lib-dir= /usr/lib --boost-python-libname=boost_python-mt-py27 --boost-thread-libname=boost_thread-mt

但是，当我这样做时：

```
.....@ubuntu:~/pycuda-2011.2.2$ make -j 4 
```

我收到此错误：

> /usr/bin/ld: 找不到 -lcuda
> 
> /usr/bin/ld：在搜索 -lcurand 时跳过不兼容的 /usr/local/cuda/lib/libcurand.so

为什么这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:04:08.970

您需要设置`LDFLAGS`环境变量，以便*pycuda*设置可以找到`libcuda.so`，它在 ubuntu 系统上位于非标准位置 ( `/usr/lib/nvidia-current`)。

*pycuda 2012.1*的安装完全基于 distutils，不`Makefile`涉及。您可以通过运行适当的选项来安装*pycuda* ，然后使用.`./configure.py``LDFLAGS=/usr/lib/nvidia-current python setup.py install`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T15:33:57.293

如果你为nvidia卡使用一些较新的驱动，比如nvidia-313（我用的就是这个），那么文件libcuda.so（昵称lcuda，我不知道为什么）可能不在cuda安装目录中（默认情况下，它是 /usr/lib/cuda)。相反，您可能必须自己找到它。做：

$ 查找 /usr/lib/*/libcuda.so

对我来说，结果是

/usr/lib/nvidia-313-updates/libcuda.so

所以，在安装 pycuda 时，我会这样做：

$ python configure.py --cuda-root=/usr/lib/nvidia-313-updates

$ 制作

$ sudo 安装

然后，

$ optirun python 测试/test_driver.py

或者

$ optirun python some_program_which_imports_pycuda.py

应该可以正常工作。

# c# - Linq to Entity Group 按问题

> ID：10553224
> 
> 赞同：0
> 
> 时间：2012-05-11T14:22:30.250
> 
> 标签：c#, linq, linq-to-entities

我有一个销售数据库，该数据库在 CountryCode 列中记录了商品销售地的 2 个字符国家代码。在销售数据库中，没有数量列，基本上每一行代表1次销售，以及与该次销售相关的信息。

我将能够展示最畅销的国家/地区。这是我提出的 linq 查询：

```
List<TopSellingCountries> tsc = (from sale in Sales
                                 where sale.CountryCode != null
                                 group sale by sale.CountryCode into cc
                                 select new TopSellingCountries
                                 {
                                     CountryCode = cc.Select(c => c.CountryCode).FirstOrDefault(),
                                     CountryCount = cc.Count()
                                 }).OrderByDescending(c => c.CountryCount).Take(10).ToList(); 
```

但是，当我将其输出到我的视图时，我会得到一个包含以下信息的表格：

```
CountryCode | CountryCount
         US | 196
         IE | 168
         US | 99
         GB | 91
         IE | 57
         AU | 32
         GB | 22
         AU | 18
         CA | 17
         CA | 17 
```

如您所见，它似乎没有按国家代码正确分组。有谁知道我该如何克服这个问题？

编辑：如果有人需要，这是视图中的代码：

```
<table class="normal">
    <tr>
        <th>Country Code</th>
        <th>Country Count</th>
    </tr>
    <% foreach (var item in Model.TopSellingCountries)
       { %>
    <tr>
        <td><%: item.CountryCode %></td>
        <td><%: item.CountryCount %></td>
    </tr>
    <% } %>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:44:38.427

确保修剪 CountryCode 中多余的空格

```
List<TopSellingCountries> tsc = (from sale in Sales
                                 where sale.CountryCode != null
                                 group sale by sale.CountryCode.Trim() into cc
                                 select new TopSellingCountries
                                 {
                                     CountryCode = cc.Key,
                                     CountryCount = cc.Count()
                                 })
                                 .OrderByDescending(c => c.CountryCount)
                                 .Take(10)
                                 .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:26:17.350

利用

```
CountryCode = cc.Key, 
```

代替

```
CountryCode = cc.Select(c => c.CountryCode).FirstOrDefault(), 
```

还修剪 CountryCode 可以防止这样的问题：

所以：

```
group sale by sale.CountryCode.Trim() into cc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:31:59.697

请尝试以下

```
List<TopSellingCountries> tsc = (from sale in Sales
                                 where sale.CountryCode != null
                                 group sale by sale.CountryCode into cc
                                 order by cc.Count() descending
                                 select new TopSellingCountries
                                 {
                                     CountryCode = cc.Key,
                                     CountryCount = cc.Count()
                                 }).Take(10).ToList(); 
```

# applescript - 插入 USB 驱动器后如何自动运行 AppleScript？

> ID：10553225
> 
> 赞同：2
> 
> 时间：2012-05-11T14:22:30.590
> 
> 标签：applescript

我需要重命名并填充大约 70 个 USB 记忆棒。在插入 Applescript 时自动运行它们会更简单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:42:41.993

您连接到 OS X 机器的任何外部驱动器都安装到`/Volumes`. 如果您查看该文件夹的更改，您可以选择添加的外部驱动器并处理这些。运行此代码：

```
property ignoredVolumes : {"Macintosh HD", "Time Machine Backups"} -- add as needed
tell application "System Events"
    set rootVolume to disk item (POSIX file "/Volumes" as text)
    set allVolumes to name of every disk item of rootVolume
    repeat with aVolume in allVolumes
        if aVolume is not in ignoredVolumes then
            set name of disk item (path of rootVolume & aVolume) to newName
        end if
    end repeat
end tell 
```

将重命名不在您`ignoredVolumes`列表中的驱动器（拔下除您想忽略的驱动器之外的所有驱动器，`ls /Volumes`在终端中运行并将名称添加到属性中）到`newName`. 要在每次更改时触发此功能，请将代码修改为[保持打开脚本应用程序](https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_about_handlers.html#//apple_ref/doc/uid/TP40000983-CH206-SW7)：

```
property pollIntervall : 60 -- in seconds
property ignoredVolumes : {…} -- from above

on run
    my checkVolumes()
end run

on idle
    my checkVolumes()
    return pollInterval
end idle

on checkVolumes()
    tell … end tell -- from above
end checkVolumes 
```

并将其保存在*AppleScript 编辑器*中（选择“AppleScript 应用程序”，确保勾选“保持打开”）。一旦启动，脚本将继续运行，`on idle`每秒执行一次处理程序`pollInterval`。

如果您基本上是在做一个偶尔一次的批处理作业，这会很好。如果您想要一个不依赖于运行保持打开的脚本应用程序的更永久的解决方案，您可以

*   将文件夹操作脚本附加到`/Volumes`文件夹（向[Philip Regan 在*Ask Different*](https://apple.stackexchange.com/a/8092/11948)上的提示；有关如何在[此 Mac OS X 提示帖子](http://hintsforums.macworld.com/showpost.php?p=154499&postcount=6)中配置操作的详细信息） - 优点是您严格处理添加到`/Volumes`, 或
*   通过`launchd`创建一个具有`StartOnMount`键设置为的 LaunchAgent 来使用`true`- 这将触发每次安装文件系统时代理启动的脚本/应用程序（向[Daniel Beck 在*Ask Different*](https://apple.stackexchange.com/a/13723/11948)的提示；有关详细信息，请参阅[Apple 的技术说明 TN2083](http://developer.apple.com/library/mac/#technotes/tn2083/_index.html)）。

# php - 伪随机字节的存储

> ID：10553227
> 
> 赞同：1
> 
> 时间：2012-05-11T14:22:41.690
> 
> 标签：php, mysql, random, hash

我有一个使用 PHP 函数生成的 128 位伪随机安全代码，但我无法确定它需要存储在 MySQL 表中的数据类型。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:25:42.063

尝试二进制类型。您需要 16 个字节，因此将大小设置为 16。

```
BINARY(16) 
```

提到了 varbinary 类型，但由于值始终是相同的长度，因此不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:26:41.983

我会使用 Varbinary 来存储它，但你可以使用其他的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:24:30.213

[`BINARY(16)`](http://dev.mysql.com/doc/refman/5.1/en/binary-varbinary.html)为此目的使用数据类型。

# workflow-foundation-4 - 由于 XAML 中的错误，无法加载活动

> ID：10553229
> 
> 赞同：5
> 
> 时间：2012-05-11T14:22:53.180
> 
> 标签：workflow-foundation-4

考虑以下场景：

1.  使用参数 MyArgument1 创建 MyCodeActivity1
2.  将此活动添加到 myworkflow.xaml
3.  将 MyCodeActivity1 中的 MyArgument1 重命名为 MyRenamedArgument1

如果您打开 myworkflow.xaml，Visual Studio 将显示此错误：

> 由于 XAML 中的错误，无法加载活动

请问有没有Visual Studio可以提供有关错误的更多信息的设施？现在，我创建了一个小型 Windows 应用程序，它尝试执行工作流并在无效时显示错误消息。这确实给出了一个明确的信息。但是如果visual studio直接提供这个功能就好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T19:42:15.693

不。

没有。

嗯嗯。

Visual Studio 的重构无法处理**Activity 代码中的更改 => XamlAppDef XML 中的更改**。毫不奇怪，这样的逻辑链实现起来会很复杂。因此，*无论何时执行此操作*，您都*必须期望您的工作流程必须得到修复*。要么提前计划，要么...

任何时候工作流无法编译，或者如果它在设计表面显示*红色的痛苦框*，您应该始终右键单击工作流文件，选择**Open With...**并选择**XML (text) editor**。您将在此视图中看到曲折的错误线和有关错误的更多详细信息。

# asp.net-mvc-3 - 如何正确使用 RedirectToAction

> ID：10553235
> 
> 赞同：7
> 
> 时间：2012-05-11T14:23:03.793
> 
> 标签：asp.net-mvc-3

我在 mvc 中使用 RedirectToAction 方法时遇到问题。我的地图路线看起来像这样。

```
 routes.MapRoute(
         "Project",  // Route name
         "{Controller}/{Action}/{projectId}/{machineName}/{companyId}",
          new { controller = "Project", action = "Directives", projectId = 0, machineName = "", companyId = 0 }  // Parameter defaults); 
```

回报是这样的：

```
 return RedirectToAction("Directives", "Project", new { projectId = projectId, machineName = project.MachineName, CompanyId = user.Company_Id }); 
```

它工作完美，但我使用 RedirectToAction 它仍然看起来像这样

```
http://localhost:1843/Project/Directives?projectId=48&machineName=Netduino&companyId=27 
```

控制器：

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult Create(Project project, string text)
    {
        ViewBag.MachineType = new List<string>(new string[] { "Machine Type A", "Machine Type B", "Machine Type C", "Machine Type D", "Machine Type E" });

        if (ModelState.IsValid)
        {
            UserAccess user = (UserAccess)(Session["UserAccessInfo"]);

            Int64 projectId = DataBase.DBProject.InsertProject(project.ProjectNumber, project.MachineName, project.MachineNameEnglish, 1, project.Serial, text, user.Company_Id,project.MachineType);

            return RedirectToAction ("Directives", "Project", new { projectId = 48, machineName = "Netduino", companyId = 27 });
           // return RedirectToAction("Directives", "Project", new { projectId = projectId, machineName = project.MachineName, CompanyId = user.Company_Id });
        }
        else
        {
            ModelState.AddModelError("", "Invalid username or password");
        }

        return View();

    } 
```

接收控制器：

```
public ActionResult Directives(int projectId, string machineName, int companyId)
    {
        convertedDirectives = new List<Models.Directives>();
        ViewBag.MachineName = machineName;
        ViewBag.ProjectId = projectId;
        List<object> Directives = new List<object>();

        if (ModelState.IsValid)
        {
            Directives = DataBase.DBProject.GetDirectives(companyId);
            foreach (List<object> dir in Directives)
            {
                Directives newDirective = new Models.Directives();
                newDirective.CompanyID = Convert.ToInt32(dir[0]);
                newDirective.DirectiveId = Convert.ToInt32(dir[1]);
                newDirective.Id = Convert.ToInt32(dir[2]);
                newDirective.DirectiveName = Convert.ToString(dir[3]);
                newDirective.DirectiveNameShort = Convert.ToString(dir[4]);
                newDirective.Created = Convert.ToDateTime(dir[5]);

                convertedDirectives.Add(newDirective);
            }
        }
        else
        {
            ModelState.AddModelError("", "An error has ");
        }

        ViewBag.DirectivesList = convertedDirectives;
        return View();
    } 
```

但我想要的方式是这样的。

```
http://localhost:1843/Project/Directives/48/Netduino/27 
```

但奇怪的是，我可以手动输入 Url，而且效果很好。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T20:50:18.767

我有一些建议。

首先，不要命名您的路线。将 null 传递给第一个参数。有几个采用路由名称的 RedirectToRoute 重载，并且 RedirectToAction 返回一个 RedirectToRouteResult。

其次，不要为所需的参数提供默认值。如果你想有一个默认值，只给最后一个参数一个默认值。

```
routes.MapRoute(null, // don't name the route
    "{controller}/{action}/{projectId}/{machineName}/{companyId}",
    new
    {
        controller = "Project", 
        action = "Directives", 
        //projectId = 0, 
        //machineName = "", 
        //companyId = 0,
    }
); 
```

第三，如有疑问，请尝试返回 RedirectToRoute。将控制器、动作和区域（如果适用）与其他参数一起传递：

```
return RedirectToRoute(new
{
    controller = "Project",
    action = "Directives",
    // area = "SomeAreaName", // if the action is in an area
    projectId = projectId, 
    machineName = project.MachineName, 
    companyId = user.Company_Id,
}); 
```

最后一个技巧是使用 T4MVC 摆脱那些神奇的字符串。

```
routes.MapRoute(null, // don't name the route
    "{controller}/{action}/{projectId}/{machineName}/{companyId}",
    new
    {
        controller = MVC.Project.Name, 
        action = MVC.Project.ActionNames.Directives, 
    }
); 
```

您可以在 RedirectToRoute 中使用这些相同的强类型，或者您可以使用 T4MVC 部分返回到操作：

```
return RedirectToAction(MVC.Project.Directives
    (projectId, project.MachineName, user.Company_Id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:39:15.940

当我测试您的路线和 RedirectToAction() 时，当我将匿名对象中的“CompanyId”属性的大小写更正为“companyId”时，它可以正常工作。

```
return RedirectToAction("Directives", "Project", new { projectId = 48, machineName = "Netduino", companyId = 27 }); 
```

更新：这是 global.asax、控制器和视图中的代码。

```
routes.MapRoute(
             "Project",  // Route name
             "{Controller}/{Action}/{projectId}/{machineName}/{companyId}",
              new { controller = "Project", action = "Directives", projectId = 0, machineName = "", companyId = 0 }  // Parameter defaults
);

public class HomeController : Controller
{
    public ActionResult Index()
    {
        return RedirectToAction("Directives", "Project", new { projectId = 48, machineName = "Netduino", companyId = 27 });
    }
}

public class ProjectController : Controller
{
    public ActionResult Directives(int projectId, string machineName, int companyId)
    {
        ViewBag.ProjectId = projectId;
        ViewBag.MachineName = machineName;
        ViewBag.CompanyId = companyId;
        return View();
    }
}

<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Directives
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <h2>
        Directives</h2>
    <%: ViewBag.ProjectId %><br />
    <%: ViewBag.MachineName %><br />
    <%: ViewBag.CompanyId %><br />

    <%: this.Request.RawUrl %>
</asp:Content> 
```

# android - 无论上下文如何启动 AlertDialog？安卓

> ID：10553237
> 
> 赞同：0
> 
> 时间：2012-05-11T14:23:13.280
> 
> 标签：android, android-alertdialog

我正在为 Android 中的财务打印机做一些小诊断项目。因此，在打印时，可能会出现问题（缺纸等）。在这种情况下，我想启动一个 AlertDialog 通知存在问题并询问用户是否要继续打印。

我想制作一个显示在前面的 AlertDialog，而不管当前被带到前面的活动。

我尝试了使用 GetAplicationContext() 方法启动 AlertDialog 的常用方法，但它崩溃得很厉害。

这是堆栈跟踪：

```
05-11 17:36:56.162: W/dalvikvm(5458): threadid=3: thread exiting with uncaught exception (group=0x4001e390)
05-11 17:36:56.162: E/AndroidRuntime(5458): Uncaught handler: thread main exiting due to uncaught exception
05-11 17:36:56.182: E/AndroidRuntime(5458): java.lang.NullPointerException
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at bg.barcodes.mobile.routes.java.BaseActivity.onCreateDialog(BaseActivity.java:21)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at bg.barcodes.mobile.routes.java.DatecsPrinter.Send(DatecsPrinter.java:319)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at bg.barcodes.mobile.routes.java.DatecsPrinter.sendText(DatecsPrinter.java:381)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at bg.barcodes.mobile.routes.java.StatusDatecsPrinter.doCommand(StatusDatecsPrinter.java:134)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at bg.barcodes.mobile.routes.java.StatusDatecsPrinter.access$0(StatusDatecsPrinter.java:118)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at bg.barcodes.mobile.routes.java.StatusDatecsPrinter$1.onClick(StatusDatecsPrinter.java:61)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.View.performClick(View.java:2364)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.View.onTouchEvent(View.java:4179)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.widget.TextView.onTouchEvent(TextView.java:6650)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.View.dispatchTouchEvent(View.java:3709)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:924)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1695)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1116)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.app.Activity.dispatchTouchEvent(Activity.java:2068)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1679)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1708)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.os.Looper.loop(Looper.java:123)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at android.app.ActivityThread.main(ActivityThread.java:4595)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at java.lang.reflect.Method.invokeNative(Native Method)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at java.lang.reflect.Method.invoke(Method.java:521)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-11 17:36:56.182: E/AndroidRuntime(5458):     at dalvik.system.NativeStart.main(Native Method)
05-11 17:36:56.192: I/dalvikvm(5458): threadid=7: reacting to signal 3
05-11 17:36:56.222: I/dalvikvm(5458): Wrote stack trace to '/data/anr/traces.txt' 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:48:35.417

不要尝试使用`getApplicationContext()`，创建`MyApplication`类，继承自`Application`，然后在该类中执行以下操作：

```
public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
        .........
    }

    public static Context getContext() {
        return instance;
    } 
```

之后，`MyApplication.getContext()`如果您需要上下文并且没有闲置，您可以在任何地方使用`Activity`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:45:43.440

没有办法在另一个活动运行时中断它。但是，您正在寻找的功能将通过使用通知来满足。这不会在正在运行的 Activity 前面显示对话框，但当出现问题时仍会通知用户：

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:41:29.287

一个警告对话框显示在一个活动的上方，这就是为什么你需要一个活动的上下文来初始化一个对话框对象。因此，从技术上讲，如果不参考活动，就不可能显示此类对话框。

# php - 这个 PHP 代码可以被利用吗？

> ID：10553241
> 
> 赞同：-2
> 
> 时间：2012-05-11T14:23:25.987
> 
> 标签：php, exploit

> **可能重复：**
> [mysql_real_escape_string() 和 mysql_escape_string() 是否足以保证应用安全？](https://stackoverflow.com/questions/5414731/are-mysql-real-escape-string-and-mysql-escape-string-sufficient-for-app-secu)

所以基本上我在 URL 中有一个 qryName

例如：mysite.com/qryName=WHAT

```
if (isset($_GET['qryName']))
{
    $qryName = mysql_real_escape_string(filter($_GET['qryName']));
}

$urldata = mysql_fetch_assoc(mysql_query("SELECT * FROM gangs WHERE ShortName = '" . $qryName . "' LIMIT 1")); 
```

$urldata 是代码，所以它几乎是从数据库中选择的。请注意，在数据库中，qryName 没有空格、特殊字符等。

只是想知道这是否可以利用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:26:01.600

这是安全的，因为您正确地转义了该值-除非....

...您没有初始化变量*并*已`register_globals`启用。在这种情况下，有人可以使用 cookie 或 POST 值向您发送`$qryName`包含恶意 SQL 语句的任意值。

但是由于您可能刚刚发布了一个片段并在该语句之前初始化了变量（您这样*做了，对吗？！），您的代码是安全的。*`if`考虑使用准备好的语句（使用 PDO）而不是转义 - 它们也使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:28:26.753

您是否考虑过使用类似[PDO](http://www.php.net/manual/en/book.pdo.php)的东西？我的理解是，当使用 PDO 和绑定变量时，SQL 注入是不可能的。还有其他值得考虑的优点。

类似的 PDO 查询将是：

```
 $data=array($_GET['qryName']);
    try {
        $STH = $this->DBH->prepare('SELECT * FROM gangs WHERE ShortName = ? LIMIT 1');
        $STH->execute($data);
        while($row = $STH->fetch()) {
                $var1=$row->FieldName;
        }
    }
    catch(PDOException $e) {echo $e->getMessage();} 
```

您将变量添加到数组 ($data) 中，它们按顺序绑定到 SQL 语句中的每个问号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:31:39.697

为什么不添加一个额外的验证或取出 isset 并检查它是否只包含字母，例如

```
if(ctype_alpha($_GET['qryName'])) {

    $qryName = mysql_real_escape_string(filter($_GET['qryName']));

} 
```

[http://php.net/manual/en/function.ctype-alpha.php](http://php.net/manual/en/function.ctype-alpha.php)

# regex - Bash 正则表达式：零到三个数字

> ID：10553246
> 
> 赞同：2
> 
> 时间：2012-05-11T14:23:35.003
> 
> 标签：regex, bash, ls

我有这个文件

```
file00.txt
file01.txt
...
file99.txt
file102.txt
file102.txt 
```

和

```
file00.extra.txt
file01.extra.txt
... 
```

在带有正则表达式的 bash (ls) 中，我如何在没有 的情况下显示文件`.extra`？

我尝试

```
 ls file[0-9]\{1,3\}.txt 
```

但不要显示任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T14:28:21.163

使用[bash 扩展模式匹配](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)：

```
shopt -s extglob
ls file+([0-9]).txt 
```

查找 1 到 3 个数字

```
ls file[0-9]?([0-9])?([0-9]).txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:27:56.520

你用 ls 做的是一个 glob，而不是一个正则表达式。要根据正则表达式查找文件，您需要使用 find。

```
find ./ -regex '.*/file[[:digit:]]\{1,3\}\.txt' 
```

这将递归到所有子目录。为了防止这种情况，您可以使用 -maxdepth。

```
find ./ -maxdepth 1 -regex '.*/file[[:digit:]]\{1,3\}\.txt' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:25:47.023

格雷普救援：

```
ls file*.txt |grep -v extra 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T14:49:33.167

如果您的文件在该目录中都是相关的（即没有多余的文件），您可以使用内置选项`ls`：

```
ls -l --hide="*extra*" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T14:27:45.820

在重读了 3 次问题之后，以及对使用 grep（邪恶工具）的 Frank Schmitt 的回答的评论，我的印象是作业/ls-lesson。

然后我有一个完全不同的答案：

```
ls --hide="*.extra*" 
```

我的第一印象是，我们将使用以下解决方案从文件名中删除“额外”：

```
for f in file* ; do echo $f; done 
file00.extra.txt
file00.txt
file01.extra.txt
file01.txt
file102.txt
file99.txt 
```

不带 .extra. 的显示：

```
for f in file* ; do echo ${f/.extra./.}; done 
file00.txt
file00.txt
file01.txt
file01.txt
file102.txt
file99.txt 
```

字符串替换`${f/.extra./.}`替换`.extra.`为`.`（点）。

# java - 如何在数组中添加项目？

> ID：10553260
> 
> 赞同：0
> 
> 时间：2012-05-11T14:24:40.887
> 
> 标签：java, arrays

我想在数组顶部添加项目？

我怎样才能做到这一点？

数组中有两个项目。我想在数组顶部添加项目。

```
result1 = new String[result.length+1];

            for(int i=result.length;i==0;i--)
        {
            if(i==0)
            {
               result1[0]="Latest";

            }
            result1[i]=result[i-1];

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:28:52.030

要回答您的问题：您需要

1.  创建一个大小 = 旧长度 + 1 的新数组。
2.  将旧数组的内容复制到新数组中，
3.  插入`"latest"`新数组：

像这样：

```
String[] result = { "a", "b", "c" };
String[] tmp = new String[result.length+1];

System.arraycopy(result, 0, tmp, 1, result.length);
tmp[0] = "latest";
result = tmp; 
```

但是，我鼓励您考虑使用`List`例如，[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)在这种情况下，您可以将其表示为

```
result.add(0, "latest"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:26:59.683

你不能：一个数组有一个固定的长度。

如果您想拥有可变大小的“数组”，请使用[ArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)。

例子：

```
ArrayList<String> list = new ArrayList<String>();
list.add("a");
list.add("b");
list.set(0, "new a");
for (String s: list) {
    System.out(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:29:00.580

但是您可以使用 ArrayList 和 `add(int index, E object)`功能，您可以在任何地方添加项目。您可以轻松地将 ArrayList 转换为 array[]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:29:05.750

使用作为 LIFO（后进先出）工作的堆栈，因此每当您弹出（读取）时，您将获得最新（在顶部）推送的项目

这是使用数组的 Java 代码参考：[http ://wiki.answers.com/Q/Implementing_stack_operation_using_array_representation_with_java_program](http://wiki.answers.com/Q/Implementing_stack_operation_using_array_representation_with_java_program)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T14:31:50.210

您的解决方案的一个问题是，当`i == 0`您将值设置为`Latest`但在 `result1[i]=result[i-1];`

尝试

```
if(i==0) {
     result1[0]="Latest";
}
else {
     result1[i]=result[i-1];
} 
```

# paypal - Paypal 沙盒 - 无效的商家配置错误 10501？

> ID：10553263
> 
> 赞同：13
> 
> 时间：2012-05-11T14:24:54.600
> 
> 标签：paypal, paypal-sandbox

我正在尝试`DoDirectPayment`使用 Sandbox API

我一直在使用我知道有效的代码进行测试，但我的 API 凭据从 Sandbox API 收到以下错误

**[L_ERRORCODE0] => 10501
[L_SHORTMESSAGE0] => 配置无效
[L_LONGMESSAGE0] => 由于商家配置无效，无法处理此交易**

查找错误代码后，我发现问题“*发生在计费协议被禁用或不活动时。* ”

我已经在 Google 上进行了深入的搜索，以了解如何在沙盒中同意计费协议，但没有成功

有没有人遇到这个问题并且知道如何打开它？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-08-06T22:30:01.460

就像其他答案所说，您需要在您的沙盒帐户中启用 Payments Pro。自 2013 年 7 月起，您可以通过以下步骤执行此操作。

1.  登录到您的 developer.paypal.com 帐户
2.  转到应用程序 -> 沙盒帐户
3.  单击要升级到 Pro 的沙盒帐户，然后单击“配置文件”
4.  在弹出的对话框中应该有一个升级到 Pro 选项

请注意，贝宝开发者网站最近发生了很大变化，因此您的里程可能会有所不同......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-13T15:35:07.553

这意味着您的沙盒测试帐户未针对 Payments Pro 设置。
转到[https://developer.paypal.com](https://developer.paypal.com) > 测试账户 > 预配置并创建一个预配置的美国网站支付 Pro 测试账户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-16T16:32:42.133

最近对开发人员网站进行了重新设计。

我不知道现有帐户，但是对于新帐户，您不能使用默认的“促进者”沙盒测试帐户来测试经典 api……您必须创建一个新的业务沙盒测试帐户并使用其中的凭据。即使“促进者”帐户是企业帐户也是如此。

沙盒帐户在[https://developer.paypal.com/](https://developer.paypal.com) -> 应用程序 -> 沙盒帐户（左侧链接）-> 创建帐户（右侧按钮）中创建

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-17T04:17:53.797

我遇到了同样的问题并写了关于它的贝宝，这是他们的回应：

感谢您联系商家技术服务。

关于您的错误无效商家配置的问题，发生此错误是因为您的沙盒帐户仍处于待处理状态。当你从商业变成专业时，它就发生了。这是我们系统中的错误，我们的工程师仍在修复这些错误。顺便说一句，您可以尝试创建新的沙盒帐户，然后像之前一样升级到专业帐户。

# xcode - popViewControllerAnimated：自定义过渡动画？

> ID：10553264
> 
> 赞同：7
> 
> 时间：2012-05-11T14:24:55.010
> 
> 标签：xcode, animation, uinavigationcontroller, transition

是的，我已经在寻找答案了。除了不提供淡入淡出转换选项，仅翻转或卷曲的解决方案外，没有任何解决方案有效。

像这样：

```
methodname
    configure animation
    [self.navigationController popViewControllerAnimated:NO]; 
```

无论我尝试何种过渡动画配置，都与仅使用典型的单行弹出没有明显不同。如果我将其更改为`…Animated:YES];`，我会得到标准的弹出动画，可能是由于损坏的配置发生了一些奇怪的事情。

`pop`所以我的问题是：如果不是，我怎么能做一个`CrossDissolve`，那么至少看起来一样的东西？这甚至可以通过导航控制器实现吗？

使用模态视图会有我想要的默认动画，我可以很容易地管理视图堆栈，但我不想这样做。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-11T14:38:31.317

对于这种类型的过渡，我真的会推荐一个模态视图控制器，这就是系统的设计方式。

但是如果你坚持使用导航控制器，有一种方法，虽然有点难看。

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

CATransition *transition = [CATransition animation];
[transition setType:kCATransitionFade];
[self.navigationController.view.layer addAnimation:transition forKey:@"someAnimation"];

[self.navigationController popViewControllerAnimated:YES];
[CATransaction commit]; 
```

这`CATransaction`将禁用所有标准动画。当`CATransition`视图被交换时，向导航控制器层添加一个淡入淡出过渡（在这种情况下删除弹出的视图控制器视图）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T22:56:32.710

在上面的 iOS 7 中，您可能想要查看`UIViewControllerAnimatedTransitioning`呈现的视图控制器或`UINavigationControllerDelegate`方法：

```
- (id<UIViewControllerAnimatedTransitioning>)navigationController:(UINavigationController *)navigationController animationControllerForOperation:(UINavigationControllerOperation)operation fromViewController:(UIViewController *)fromVC toViewController:(UIViewController *)toVC 
```

我有一些[来自另一个问题的示例代码](https://stackoverflow.com/questions/22884111/how-to-use-uiviewcontrolleranimatedtransitioning-with-uinavigationcontroller/25026102#25026102)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T14:12:14.337

Joris Kluivers 在 Swift 3 中的回答：

```
CATransaction.begin()
CATransaction.setDisableActions(true)

let animation = CATransition()
animation.type = kCATransitionFade
self.navigationController?.view.layer.add(animation, forKey: "someAnimation")
_ = self.navigationController?.popViewController(animated: false)

CATransaction.commit() 
```

# playframework-2.0 - Play Framework 2.0 认证教程链接

> ID：10553267
> 
> 赞同：13
> 
> 时间：2012-05-11T14:25:07.850
> 
> 标签：playframework-2.0

我一直在使用 Play Framework 学习很多好东西，并且在继续前进之前还有一个问题。我正在寻找一个详细的教程，比如这个链接上的那个：

[http://www.playframework.org/documentation/1.2.4/guide8](http://www.playframework.org/documentation/1.2.4/guide8)

但是对于 Play Framework 2.0 - 2.0.1。我只需要将身份验证添加到我的网站。我是这个 Play 世界的初学者，想在我的应用程序中实现之前在上面提到的指南中学习。

有谁知道我要找的那个链接在哪里？我的谷歌技能放弃了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-13T10:51:39.837

查看播放文件夹中的示例。如果我没记错的话，有一个处理身份验证/授权：zentasks。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-30T16:54:14.690

对于任何对此感兴趣的人来说，这个模块都适用于 play framework 2.0 [http://joscha.github.com/play-authenticate/中的 OAuth2.0 身份验证](http://joscha.github.com/play-authenticate/)

来自该站点：play-authenticate 旨在与 java 应用程序一起使用，并且通过检查示例使用应用程序，deadbolt 集成也适用于 java 使用。我不认为这是 scala 应用程序最惯用的选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T19:07:57.260

查看 Play 2.0 的模块：[https ://github.com/t2v/play20-auth](https://github.com/t2v/play20-auth)

afaict，截至 2012 年 11 月，对于需要比框架附带的更全功能的身份验证支持的 scala 应用程序，这是最佳选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-29T23:45:54.713

FWIW，现在有一个很好的 zentasks 构建演练，这里描述了登录/身份验证：

[http://www.playframework.com/documentation/2.2.x/JavaGuide4](http://www.playframework.com/documentation/2.2.x/JavaGuide4)

我并不是说它展示了如何进行最佳实践身份验证，只是一个很好的初学者示例，说明了如何实施简单的身份验证。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-11T18:02:21.170

另一个不错的选择似乎是[SecureSocial.ws](http://securesocial.ws/)。在我看来，这是目前最完整的框架（2013 年年中）。

尽管如此，在所有情况下，我都认为需要太多的代码，至少如果你习惯了 Spring Security 的话。

# c++ - 双端队列推回错误

> ID：10553268
> 
> 赞同：2
> 
> 时间：2012-05-11T14:25:09.270
> 
> 标签：c++, deque

我正在编写一个编译器并使用 deque 来存储类的方法标签，这是示例代码：

```
#include <deque>
#include <iostream>
#include <string>

using std::cout;
using std::deque;
using std::endl;
using std::string;

int main()
{
  deque<const char *> names;

  string prefix = "___";
  const char *classname = "Point";

  const char *methodname[] = {"Init", "PrintBoth", "PrintSelf", "equals"};

  for (int i = 0; i < 4; i++)
    {
      string label = prefix + classname + "." + methodname[i];
      names.push_back(label.c_str());
    }

  for (int i = 0; i < 4; i++)
    cout << names[i] << endl;

  return 0;
} 
```

然而，结果并不是我所期望的：

```
___Point
___Point.PrintSelf
___Point.PrintSelf
___Point.equals 
```

另外，我注意到如果我只是简单地推回方法名

```
names.push_back(methodname[i]) 
```

我按顺序获取所有方法名。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T14:29:25.910

```
for (int i = 0; i < 4; i++)
{
  string label = prefix + classname + "." + methodname[i];
  names.push_back(label.c_str()); //what you're pushing? a temporary!

} //<--- `label` is destroyed here and it's memory is freed. 
```

这`label`是一个变量，它在右大括号处被销毁并在每次迭代中再次创建。

这意味着，您要推动的`names`是一个临时值。这就是问题所在。

我建议你使用这个：

```
std::deque<std::string> names; 
```

然后这样做：

```
names.push_back(label); //a copy is pushed to the deque! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:31:50.233

这是因为它`string label`是一个临时的，并且它的 chhar 指针在它退出范围后无效 - 在这种情况下是 for 循环。

我建议`deque<string>`改用。这样你就可以推送`label`自己，然后`label`在双端队列中创建一个真实的副本。

# greasemonkey - setTimeout 并不总是在 Greasemonkey 中工作

> ID：10553274
> 
> 赞同：4
> 
> 时间：2012-05-11T14:25:35.813
> 
> 标签：greasemonkey, settimeout

我发现了很多类似的问题，但没有一个相同，也没有正确的解决方案。这是一个非常奇怪的问题。

我有一个简单的 Greasemonkey 脚本来测试这个问题：

```
// ==UserScript==
// @name        testdiddio
// @namespace   http://userscripts.org/users/useridnumber
// @include     https://www.google.it/
// @version     1
// ==/UserScript==

function wait(){
    console.info("wait");
    setTimeout(wait,1000);
}

console.info("start");
wait(); 
```

这是萤火虫的输出：

```
start
wait
wait
wait
wait 
```

wait() 函数被调用 4 次然后停止。如果我将超时设置为 100 毫秒，呼叫似乎至少可以工作 10/15 秒然后停止。

我正在使用：Firefox 12.0 Greasemonkey 0.9.19

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T14:52:23.617

这是 Greasemonkey 0.9.19 中的一个错误。
添加了一项功能，`setTimeout()`即使页面的 JS 被禁用并且它引入了一些复杂性（问题[1549](https://github.com/greasemonkey/greasemonkey/issues/1549)、[1552](https://github.com/greasemonkey/greasemonkey/issues/1549)和[1553](https://github.com/greasemonkey/greasemonkey/issues/1549)等），也允许工作。

它应该很快会在 0.9.20 版中得到解决，或者恢复到 0.9.18 版。

# php - 根据 symfony2 控制器中的值加载配置/参数 yml

> ID：10553277
> 
> 赞同：0
> 
> 时间：2012-05-11T14:25:40.793
> 
> 标签：php, symfony

我想创建这个：

```
MyBundle/resources/config/settings/site1.yml
MyBundle/resources/config/settings/site2.yml
MyBundle/resources/config/settings/site3.yml 
```

在每个我可以拥有的地方：

```
parameterWidth: 230
parameterHeight: 145 
```

有人可以帮我创建扩展，这样我就可以根据变量（1,2,3）在我的控制器中使用这些值来加载特定的配置吗？

我已经阅读了有关扩展的文档（[http://symfony.com/doc/current/cookbook/bundles/extension.html](http://symfony.com/doc/current/cookbook/bundles/extension.html)），但没有一个对我有帮助。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:03:24.377

假设您将站点编号存储在*site*参数中，在您的捆绑包的 DependencyInjection 扩展中，您可以执行以下操作：

```
public function load(array $configs, ContainerBuilder $container)
{
    $configuration = new Configuration();
    $this->processConfiguration($configuration, $configs);

    $file = 'default.yml';
    if ($container->hasParameter('site')) {
        $file = 'site'.$container->getParameter('site');
    }

    $loader = new Loader\XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config/settings'));
    $loader->load($file);
} 
```

# c# - 拆分列表以查找单个项目的最佳方法是什么

> ID：10553284
> 
> 赞同：1
> 
> 时间：2012-05-11T14:25:53.010
> 
> 标签：c#, asp.net, asp.net-mvc-3

```
var failed = Client.FailedBuildsByBuildConfigId(buildConfig.Id).ToString(); 
```

这就是创建列表的方式。我正在使用 TeamCity Sharp，我是新手。返回的是：

```
System.Collections.Generic.List`1[TeamCitySharp.DomainEntities.Build] 
```

我想在列表中找到字符串“FAILURE”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:30:18.417

尝试：

```
bool failed = Client.FailedBuildsByBuildConfigId(buildConfig.Id).Any(b => b.ToString().Contains("FAILURE")) 
```

我不知道该类的输出，但如果`ToString()`实际上不返回`Status`（或 StatusText），请改为执行以下操作之一：

```
//examine Status field
bool failed = Client.FailedBuildsByBuildConfigId(buildConfig.Id).Any(b => b.Status.Contains("FAILURE")) 
```

或者

```
//examine StatusText field
bool failed = Client.FailedBuildsByBuildConfigId(buildConfig.Id).Any(b => b.StatusText.Contains("FAILURE")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:34:00.707

当您使用`Client.FailedBuildsByBuildConfigId(buildConfig.Id).ToString()`它时，它会返回从 FailedBuildsByBuildConfigId 返回的对象类型的名称。

尝试

```
var failed = Client.FailedBuildsByBuildConfigId(buildConfig.Id).Where(b => b.Status == "FAILED"); 
```

# java - 在 Java 中规范化 DOM 文档中的 XML 命名空间？

> ID：10553285
> 
> 赞同：4
> 
> 时间：2012-05-11T14:25:54.613
> 
> 标签：java, xml, dom, xml-namespaces

我想知道是否有一种直接的方法可以在表示为 Java 中的 DOM 文档的 XML 文档中“规范化”XML 命名空间定义？

我需要这个的原因是能够比较两个文档，它们都使用 XML 命名空间。

由于 XML 命名空间可以在文档的任何位置（在根元素中，在任何元素中）等处指定，因此从 DOM 树的角度来看，实际上相同的两个文档可能会有很大的不同。例如，一个可以在根元素中定义所有命名空间属性，而另一个可以在命名空间适用的 DOM 树层次结构中的“最高”元素中定义每个命名空间。本质上，这些可以是相同的文档，但是在比较它们时，比如用 XmlUnit，就会出现比较问题。

举两个例子：

```
<root xmlns:foo="http://foo/">
    <e1>
        <foo:e2>bar</foo:e2>
    </e1>
</root> 
```

与：

```
<root>
    <e1 xmlns:foo="http://foo/">
        <foo:e2>bar</foo:e2>
    </e1>
</root> 
```

这些文档实际上是相同的，但是通过 XML 比较会发现它们不同。

我想知道是否有一种直接/简单的方法来规范命名空间定义，例如，将它们全部放在根元素中？

当然可以自己编写这样的代码，但如果这已经可用，那就更好了:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:28:46.717

[XOM API](http://www.xom.nu/)有一个[Canonicalizer](http://www.xom.nu/tutorial.xhtml#d0e1970)用于此目的。它不是标准的 W3C DOM API，但也许它可以满足您的需求。

# css - 位置相对重叠浮动：左 -

> ID：10553287
> 
> 赞同：1
> 
> 时间：2012-05-11T14:26:00.683
> 
> 标签：css, css-float

[http://klarbild.probiermau.ch/static/index.html](http://klarbild.probiermau.ch/static/index.html)

我有蓝色的盒子漂浮在左边。我有一个橙色框 - 位置：相对。

橙色框应放在**浮动**的蓝色框内，**而不是与它们重叠**。所以蓝色盒子应该漂浮在橙色盒子**周围。**

这可能吗？提示？

编辑：我希望只能通过使用 css 来更改橙色框的位置。蓝色的盒子应该总是漂浮在橙色的盒子周围。没有蜜蜂“隐藏”在橙色盒子后面。

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:45:18.753

提示：改变橙色框的位置并向右浮动（不带`position : relative`）

请参阅此示例小提琴：http: [//jsfiddle.net/4Bber/1/](http://jsfiddle.net/4Bber/1/)

代码：

```
<div class="wrapper">
    <div>blue 1</div>
    <div>blue 2</div>
    <div>blue 3</div>
    <div>blue 4</div>
    <div>blue 5</div>
    <div>blue 6</div>
    <div id="orange"></div>
    <div>blue 7</div>
    <div>blue 8</div>
    <div>blue 9</div>
    <div>blue 10</div>
    <div>blue 11</div>
    <div>blue 12</div>
    <div>blue 13</div>
    <div>blue 14</div>
</div> 
```

CSS

```
.wrapper { width: 440px; }
.wrapper div { 
    width      : 100px; 
    height     : 100px;
    background : blue;
    float      : left; 
    margin     : 0 0 10px 10px; 
    color      : #fff;
 }

 #orange { 
    background : orange; 
    width      : 210px; 
    height     : 210px; 
    float      : right;
 } 
```

# apache - Apache 阻止默认服务器名称

> ID：10553291
> 
> 赞同：1
> 
> 时间：2012-05-11T14:26:12.000
> 
> 标签：apache

由于某些原因，即使我的 httpd.conf 文件中没有任何通配符条目，我的主机使用的域也会显示在我网站的谷歌搜索结果中

我有

```
NameVirtualHost 78.45.45.67:80 
```

和

```
<VirtualHost 78.45.45.676:80>
DocumentRoot /home/mysite/public_html
ServerName www.mysite.com
ServerAlias mysite.com
ErrorLog /var/log/httpd/error_log
ErrorLog /var/log/httpd/error_log

Options ExecCGI

RewriteEngine on
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
RewriteRule .* - [F]

</VirtualHost> 
```

但是可以从 myserver.myhostingcomany.com 访问该站点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:12:52.450

Apache 将使用第一个块来响应与另一个块`<VirtualHost>`不匹配的请求。`VirtualHost`因此，如果您想让您的网站无法访问`myserver.myhostingcompany.com`，请为其创建一个明确的条目：

```
<VirtualHost 78.45.45.676:80>
  ServerName myserver.myhostingcomany.com

  <Location />
    Order allow,deny
    Deny from all
  </Location>

</VirtualHost> 
```

如果您将它放在*您*的条目之前`www.mysite.com`，它将用于满足对任何与`www.mysite.com`或都不匹配的主机名的请求`mysite.com`。

# javascript - 如何使用基于referer的Javascript重定向js文件

> ID：10553292
> 
> 赞同：0
> 
> 时间：2012-05-11T14:26:15.347
> 
> 标签：javascript, redirect

我有一个网站`mydomain.com`

我想，

*   如果访问者 mydomain.com 来自 images.google.com 然后调用`otherdomain.com/file1.js`

*   如果访问者来自另一个域，则调用`otherdomain.com/file2.js`

我应该在我的域上使用哪种脚本来执行此操作？mydomain.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:29:18.613

您唯一的选择是使用[`document.referrer`](https://developer.mozilla.org/en/DOM/document.referrer); 但它不可靠或不值得信赖。

可用时，`document.referrer`将为您提供来自 URI 作为字符串；如果它不可用，它将为空 ( `""`)。

```
<script>
    if (document.referrer.indexOf('http://images.google.com/') === 0) {
        document.write('<script src="http://otherdomain.com/file1.js"><\/script>');
    } else {
        document.write('<script src="http://otherdomain.com/file2.js"><\/script>');
    }
</script> 
```

# c# - 使用 JSON.net 和 .net WebApi 反序列化 TimeSpan

> ID：10553294
> 
> 赞同：6
> 
> 时间：2012-05-11T14:26:19.440
> 
> 标签：c#, json, asp.net-web-api, json.net, timespan

我有一个使用 Entity Framework 4.1 的 ASP.NET WebApi 项目。我正在尝试返回一个实体并利用 JSON.net 进行反序列化。一切运行良好，但是当尝试反序列化具有 TimeSpan 属性的实体时，我遇到了以下异常：

> 无法从 System.String 转换或转换为 System.TimeSpan。

查看堆栈跟踪显示：

> JsonSerializationException：将值“PT17H9M43.1671969S”转换为类型“System.TimeSpan”时出错。路径“TimeIn”，第 1 行，位置 890。

的输出`response.Content.ReadAsStringAsync().Result`是：

> {"CreatedDate":"/Date(1329851383157-0500)/","ServicerUserId":6,"TimeIn":"PT17H9M43.1671969S","TimeOut":"PT17H28M43.1671969S"}

在使用 JSON.net 之前，我已经成功地反序列化了，`System.Runtime.Serialization.JsonDataContractJsonSerializer`但是我不想使用这种方法。

用于从 WebApi 获取实体的代码

```
public T Get<T>(object id)
{
    using (var httpClient = NewHttpClient())
    {
        var response = httpClient.GetAsync(_endpoint + id.ToString()).Result;
        return JsonConvert.DeserializeObject<T>(response.Content.ReadAsStringAsync().Result);
    }
} 
```

WebApi 控制器中用于返回实体的代码：

```
// GET /api/services/5
public Service Get(Guid id)
{
    var entry = db.Services.Find(id);
    if (entry == null)
        throw new HttpResponseException(HttpStatusCode.NotFound);
    return entry;
} 
```

任何关于如何反序列化 TimeSpan 的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:17:22.323

解决方案是配置 WebApi 项目以在 global.asax Application_Start 事件中默认利用 JSON.net 进行序列化，如[http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using -json-net-with-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx)

```
 // Create Json.Net formatter serializing DateTime using the ISO 8601 format
            JsonSerializerSettings serializerSettings = new JsonSerializerSettings();
            serializerSettings.Converters.Add(new IsoDateTimeConverter());
            GlobalConfiguration.Configuration.Formatters[0] = new JsonNetFormatter(serializerSettings); 
```

# c# - 如何在 C# 中的复选框列表中添加文本框？

> ID：10553295
> 
> 赞同：6
> 
> 时间：2012-05-11T14:26:30.157
> 
> 标签：c#, jquery, asp.net, webforms

是否可以在复选框列表中添加文本框？

这就是问题所在。我有一个复选框列表，如果单击某个复选框，我需要在其中插入并显示一个文本框。假设我有一个清单 Item A Item B Item C Item D

现在，如果用户检查项目 B，那么项目 B 和项目 C 之间应该会出现一个文本框。使用 C# 或 Jquery 是否有可能这样做？

高塔姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T19:31:46.363

您可以使用 JQuery 来实现：

这是HTML代码：

```
a<input type="checkbox" name="newsletter" value="Daily" />
b<input type="checkbox" name="newsletter" value="Weekly" />
c<input id="test" type="checkbox" name="newsletter" value="Monthly" />
<input id="txtbox" type="text">
d<input type="checkbox" name="newsletter" value="Yearly" /> 
```

这是JQuery：

```
$(document).ready(initialize);

    function initialize() {
       $("input#txtbox").hide(); 
       $(":checkbox").click(countChecked);    
    }

    function countChecked() {
        if ($("input#test").is(':checked')) {
            $("input#txtbox").show();                
        }
        else {
            $("input#txtbox").hide(); 
        }
    } 
```

[这是一个演示](http://jsfiddle.net/luissanchezm86/s9vL6/2/)

[这里是信息来源](http://api.jquery.com/checked-selector/)

# facebook - 无需用户登录即可进行身份验证？

> ID：10553302
> 
> 赞同：0
> 
> 时间：2012-05-11T14:26:57.210
> 
> 标签：facebook, authentication

好的，情况是这样的：我们有一个私人 Facebook 群组供公司内部使用。我们正在创建一个网站来汇总来自多个地方的信息，其中一个是私人 Facebook 群组。我想获取私人 Facebook 提要并将其发布到我们的聚合页面上，而无需用户登录。

我最初的想法是 1）使用一个不会过期的身份验证令牌（它似乎不存在）或 2）存储用户凭据（硬编码在配置文件中或其他任何内容中）并通过这些来获取令牌（似乎 Facebook 不支持）。

有没有办法做到这一点？我是否错过了 Facebook 支持/不支持的内容？我对 Facebook 开发人员完全陌生，只熟悉我最近读过的内容。非常感谢任何帮助、想法或解决方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:08:05.220

假设您是该组的成员，并且仍将是其中的一员，您可以尝试以下操作：

在您的内部服务器上设置一个私人页面，该页面使用[服务器端身份验证](https://developers.facebook.com/docs/authentication/server-side/)工作流程的说明以您的名义获取身份验证令牌并将其延长 60 天。在本地存储令牌、您的用户 ID 及其到期时间。

将此信息传递给您的爬虫脚本，该脚本会根据需要从 Facebook 群组中获取信息并生成您的“公共”内部页面。

作为抓取过程的一部分，检查存储的令牌。如果它将在 30 天内到期，请让脚本通过电子邮件向您发送指向私人页面的链接以更新您的身份验证令牌。（您可能希望在其中设置某种限制，以防止它每天不止一次地打扰您）。

# ftp - APPE FTP命令传输完成检测服务器端

> ID：10553304
> 
> 赞同：0
> 
> 时间：2012-05-11T14:27:06.723
> 
> 标签：ftp, inotify, pyinotify

我有一个通过 FTP 处理传入文件的服务。

在我安装 Proftpd 的 Debian 服务器上，我使用 iNotify 事件来确定文件传输何时完成并且我可以开始使用它。

一旦不再写入文件，就会触发该事件。

在我发现新的尼康 D4 相机和 WT-5 无线发射器使用 APPE FTP 命令发送文件之前，这种方法非常有效。

从我读到的内容看来，APPE FTP 命令以数据块的形式发送文件，这些文件在第一个块创建文件后附加到服务器上的现有文件中。

然而，这会导致多个 iNotify 事件被触发，因为文件被多次而不是一次写入，直到连接关闭。

由于文件是在文件完成之前处理的，因此一旦处理就会导致错误。而且我总是在处理后删除文件。

由于我的这项服务在处理传入文件时必须保持快速，我真的很喜欢这个带有 iNotify 的解决方案，并且真的不想计时文件大小是否保持不变 n 秒或确定文件传输是否完成。

**我的问题是：**有什么方法可以确定文件传输是否实际完成，而无需检查文件大小或比较上次修改日期？

我试图在 proftpd 中找到一种方法，但无济于事。

xferlog 指出同一个文件已完成多次：

```
Fri May 11 14:15:41 2012 2 host-95-199-17-243.mobileonline.telia.com 131072 /var/app/incoming/file.JPG b _ i r auser ftp 0 * c
Fri May 11 14:15:43 2012 2 host-95-199-17-243.mobileonline.telia.com 262144 /var/app/incoming/file.JPG b _ i r auser ftp 0 * c
Fri May 11 14:15:47 2012 3 host-95-199-17-243.mobileonline.telia.com 385624 /var/app/incoming/file.JPG b _ i r auser ftp 0 * c 
```

最后的 c 表示传输完成。

因此，如果我必须检查每个传入文件的文件是否实际完成，这意味着实际完成的文件会出现不必要的延迟。

似乎这不应该是一个不寻常的问题，但找不到任何关于它的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-16T01:09:09.537

还要处理检测 JPG 传输结束并使用可以集成到脚本中的解决方案绞盘：

[捕获错误：损坏的 JPEG 数据：数据段过早结束](https://stackoverflow.com/questions/3848280/catching-error-corrupt-jpeg-data-premature-end-of-data-segment)

> 检查JPEG数据是否完整的一种简单方法是分别检查FF D8和FF D9的前两个字节。这两个字节分别标识 JPEG 文件的开始和结束。

或使用 ImageMagick [http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8483](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8483)

希望这可能对 D5 有所帮助；) Mathieu

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-09T19:41:38.447

不幸的是，这种用例没有好的答案。问题是只有*FTP 客户端*知道何时将数据上传到服务器，而*FTP 客户端*知道“文件”何时完成。该协议根据字节流运行。而且，正如您在使用`APPE`命令时注意到的那样，除了一次上传之外，还可以分*块进行上传。*请注意，当 FTP 客户端使用`REST`命令后跟`STOR`. （SFTP，为了比较，*只*允许分块上传，*即*它使用：`OPEN`, `WRITE`, `WRITE`, `WRITE`, ...,`CLOSE`，更紧密地映射到用于写入文件的 Unix 系统调用。）

您甚至可能想将该`QUIT`命令用作触发器，以了解该客户端已完成将其所有块上传到您的服务器。这可能有效，假设您的 FTP 客户端一次只打开一个 FTP 会话。

根据您的特定用例/需求，可能会找到其他解决方案；如果您愿意，请随时给我发电子邮件。

希望这可以帮助！

# xpages - Firefox 和 IE8 的另一个区别 - viewPanel 列的显示不一样

> ID：10553307
> 
> 赞同：0
> 
> 时间：2012-05-11T14:27:19.513
> 
> 标签：xpages

如果您创建一个 viewPanel 并且其中一个列包含多行（请参阅下面的代码以了解我如何换行该列），则所有其他列将文本移动到行的底部，等于被换行的列的底部。在 FF 和 Chrome 中，这些相同的列位于顶部。**他们希望它们在 IE 中处于顶部**。

在我正在包装的列中，我使用以下公式，我想知道这是否会有所不同

```
<xp:viewColumn id="viewColumn4"
      contentType="HTML" width="150px">
     <xp:this.value><![CDATA[#{javascript:var valArr1 = new Array(view1.getColumnValue("SourceFileName"));
     valArr1.join('<br/>')}]]></xp:this.value>
     <xp:viewColumnHeader id="viewColumnHeader4"
          value="Original File Name">
     </xp:viewColumnHeader>
</xp:viewColumn> 
```

第一个屏幕截图显示了 Firefox 中的 viewPanel，列在单元格的顶部排列。第二个屏幕截图显示了 IE8 中完全相同的视图，并且列在单元格底部排列。

![火狐截图](../Images/d9c7bcce1552d3205193577a727c7616.png)

![IE 8 截图](../Images/92a1551cabc86f12afd1f7bc3cb6e5dc.png)

我可以在代码/css 中进行哪些更改以使列在 IE8 的顶部对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:41:12.067

默认情况下，我的 viewPanel 不会以这种方式运行，所以我想知道是否存在导致问题的现有 CSS？

使用 IE 开发工具 - SHIFT-F12 并检查样式。尝试更改它，直到你可以让它在页面上工作。

这就是说这里有一个建议开始假设您的 viewPanel 被称为 ViewPanel1

```
TABLE[id$='viewPanel1'] TR TD 
{
    display: block;
    vertical-align: top
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:17:33.937

您应该考虑使用 CSS 重置。CSS 重置将所有元素的样式重置（设置）为基线值，这样您就可以避免由于其内置的默认样式设置而导致的跨浏览器差异。通过重置样式，您可以避免默认为浏览器的内置样式，这因浏览器而异。

[CSSReset.com](http://www.cssreset.com/)包含最常见的 CSS 重置脚本。

当然，您可以将 CSS 重置自定义为特定站点所需的默认值（例如，以匹配您对表格单元格垂直对齐的要求）。

一旦应用了 CSS 重置，您就可以使用自己的 CSS 样式（并希望避免出现不一致，例如您在此处遇到的情况）。

# iphone - SQLite DB 和 NSLibraryDirectory 文件夹

> ID：10553313
> 
> 赞同：2
> 
> 时间：2012-05-11T14:27:49.400
> 
> 标签：iphone, objective-c, cocoa-touch, cocoa, ios5

我将我的 SQLite DB 保存在我的 iPhone 应用程序的 NSLibraryDirectory 文件夹中。现在我需要向应用程序推送更新，只是想知道更新会导致替换现有数据库？？这将使我的用户了解应用程序的所有进度。

# javascript - 如果我单击第一个 product_widget，如何使 produst_name 在第一个 product_widget 中消失 ?

> ID：10553316
> 
> 赞同：0
> 
> 时间：2012-05-11T14:27:58.713
> 
> 标签：javascript

如果我单击第一个 product_widget，我如何在第一个 product_widget 中单击 produst_name ？？？

```
 <div class="product_widget">
    <div class="product_name"><a></a></div>
    <div class="product_image></div>
    <div class="product_price"></div>
  </div>
  <div class="product_widget">
    <div class="product_name"><a></a></div>
    <div class="product_image"></div>
    <div class="product_price"></div>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:31:56.973

尝试使用 Jquery

```
$('div.product_widget').click(function(){
 $('div.product_name').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:32:31.633

使用 jQuery，您可以执行以下操作：

```
$(".product_widget:first).click( function() {
    $(this).find(".product_name").hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:38:55.013

尝试这样的事情：

```
<div class="product_widget" onclick="doSomething(this)"> 
```

JavaScript：

```
function doSomething(elem) {
    var children = elem.getElementsByTagName("div");
    children[0].style.background = "blue";  
} 
```

​这个函数基本上是获取子`div`元素并更新第一个子元素的背景颜色`[0]`。显然，您可以`style.display = "none"`根据需要隐藏 () 或更改其类。

[工作示例](http://jsfiddle.net/atDgx/1/)

# powershell - PowerShell 进程检查正在启动太多进程

> ID：10553318
> 
> 赞同：1
> 
> 时间：2012-05-11T14:28:02.150
> 
> 标签：powershell, scripting

我正在使用 PowerShell 每小时检查一次“ASA”进程是否正在运行。如果没有，则重新启动它。使用从下面链接中 jon Z 的答案中找到的代码片段，它运行良好。也许有点太好了？[Powershell - 如果进程未运行，请启动它](https://stackoverflow.com/questions/8834278/powershell-if-a-process-is-not-running-start-it)

我有一个计划任务，它每小时运行这个脚本，持续 24 小时。我注意到的问题是我打开了一堆 ASA 进程，而我只需要 & 想要 1 个。

![在此处输入图像描述](../Images/df3527828176b162d3da01993898d1fb.png)

这是我的脚本。我还让脚本仔细检查自身，如果发现进程未运行，则向我发送电子邮件，并将结果通过电子邮件发送给我。

```
# Set some variables
$computer = $env:COMPUTERNAME
$prog = "C:\Program Files\Avaya\Site Administration\bin\ASA.exe"
$procName = "ASA"
$running = Get-Process $procName -ErrorAction SilentlyContinue
$start = ([wmiclass]"win32_process").Create($prog) # the process is created on this line

# Begin process check
if($running -eq $null) { # evaluating if the program is running
    $start # Start the program
    sleep 5
    # Re-check the process to see if it is running
    $nowRunning = Get-Process $procName -ErrorAction SilentlyContinue
    # Email us the results as to whether it started or was not able to restart. 
    if ($nowRunning -eq $null) {
        blat.exe - -priority 1 -to john@doe.com -server my.smtp.com -f john@doe.com -subject "ASA cannot be restarted on $computer!" -body "The latest powershell check showed that ASA was not running on $computer! ||PowerShell was not able to restart ASA. Please investigate."
        } else { 
        blat.exe - -priority 1 -to john@doe.com -server my.smtp.com -f john@doe.com -subject "ASA was restarted on $computer!" -body "The latest powershell check showed that ASA was not running on $computer! ||PowerShell was able to automatically restart ASA."
    }
} 
```

我的第一个假设是进程名称错误，它应该是任务管理器中定义的程序名称。但是，根据此输出，仅使用 ASA 是正确的。

![在此处输入图像描述](../Images/96faa1c1c6229ac4eefac0c59a01f645.png)

所以我不知道为什么它要启动多个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:39:32.157

每次执行脚本时，它都会在此行中创建进程：

```
$start = ([wmiclass]"win32_process").Create($prog) # the process is created on this line 
```

它总是创建的过程，如果还没有创建它，则没有检查。

你必须像这样改变它

```
$start = '([wmiclass]"win32_process").Create($prog)' 
```

在`if`声明之后这样称呼它：

```
invoke-expression $start 
```

# ios - CoreImage CICrop 返回 0x0 像素图像

> ID：10553321
> 
> 赞同：0
> 
> 时间：2012-05-11T14:28:14.947
> 
> 标签：ios, crop, cgimage, core-image

为今天这么多问题道歉，周五脑死症状开始了。

我有一个 CICrop 过滤器：

```
[crop setValue:beginImage forKey:@"inputImage"];  //give the crop filter the beginImage
    [crop setValue:[CIVector vectorWithX:0.0f Y:0.0f Z:_exportSize W:_exportSize] forKey:@"inputRectangle"];  //give the filter the size to crop to
    croppedImage = [crop valueForKey:@"outputImage"];  //set the output image, note it's still a CIImage at this point 
```

可悲的是，它不起作用。它裁剪的图像最终为 0x0 像素。_exportSize（它是一个 CGFloat）的快速 NSLog 显示它是 1024，但日志显示图像裁剪后是 0x0。我不知道为什么。

这段代码以前有效。我认为唯一的区别是我曾经裁剪 UIImage 而不裁剪 CIImages。我宁愿不必转换，因为我计划在裁剪后做其他 CoreImage 的东西。

正如我所说，_exportSize 是 CGFloat _exportSize; 并记录它显示它 1024.0000。

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:06:54.920

最后，我放弃了使用 Core Image 进行裁剪，而是使用了它：

```
 -(UIImage *)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
{
    CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);

    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return cropped;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:33:29.080

尝试

`[crop setValue:[CIVector vectorWithX:0.0f Y:0.0f Z:_exportSize.width W:_exportSize.height] forKey:@"inputRectangle"];`

代替

`[crop setValue:[CIVector vectorWithX:0.0f Y:0.0f Z:_exportSize W:_exportSize] forKey:@"inputRectangle"];`

帮助网址[http://gigliwood.com/weblog/Cocoa/Core_Image,_part_2.html](http://gigliwood.com/weblog/Cocoa/Core_Image,_part_2.html)

Z 应该是宽度
W 应该是高度

希望能帮助到你。

# c# - CheckedListBox 只允许检查一项

> ID：10553323
> 
> 赞同：15
> 
> 时间：2012-05-11T14:28:17.880
> 
> 标签：c#, winforms, checkedlistbox

在我的`CheckedListBox`应用程序中，我只想检查一个项目。

我已经设置了这些属性

```
checkOnClick = true;
SelectionMode = One; 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-11T14:30:01.617

取消选中 ItemCheck 事件中的所有其他项目，如下所示：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e) {
      for (int ix = 0; ix < checkedListBox1.Items.Count; ++ix)
        if (ix != e.Index) checkedListBox1.SetItemChecked(ix, false);
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-11T08:59:01.787

最好的方法是这样的：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (e.NewValue == CheckState.Checked && checkedListBox1.CheckedItems.Count > 0)
    {
        checkedListBox1.ItemCheck -= checkedListBox1_ItemCheck;
        checkedListBox1.SetItemChecked(checkedListBox1.CheckedIndices[0], false);
        checkedListBox1.ItemCheck += checkedListBox1_ItemCheck;
    }
} 
```

没有循环总是更好。

# magento - 在块中覆盖 itemrender - Magento

> ID：10553325
> 
> 赞同：2
> 
> 时间：2012-05-11T14:28:22.827
> 
> 标签：magento

我是 Magento 的新手，所以如果这是一个新手问题，请原谅

基本上在 layout.xml 文件中有一个块声明如下：

```
<block type="checkout/cart" name="checkout.cart">
     <action method="setCartTemplate"><value>checkout/cart.phtml</value></action>
     <action method="setEmptyTemplate"><value>checkout/cart/noItems.phtml</value></action>
     <action method="chooseTemplate"/>
     <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/item/default.phtml</template></action>
     <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/item/default.phtml</template></action>
     <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/item/default.phtml</template></action> 
```

我想`<action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/item/default.phtml</template></action>`用自定义模板覆盖。

既然这里调用了一个方法，那模板怎么改呢？

非常感谢！

Krt_马耳他

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T20:28:57.397

在您的模块布局文件或 local.xml

```
<reference name="checkout.cart">
   <action method="addItemRender">
      <type>simple</type><block>checkout/cart_item_renderer</block><template>path/to/your/item/default.phtml</template>
   </action>
</reference> 
```

模板文件的路径是相对于您的主题模板文件夹的

您可能需要查看 [http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout](http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout)

# c# - CompilerParameters 类 skype (Skype4COM) 库错误

> ID：10553327
> 
> 赞同：0
> 
> 时间：2012-05-11T14:28:23.693
> 
> 标签：c#, api, compiler-construction, skype, skype4com

我正在使用 Skype API (Skype4COM) 编写程序并决定进行运行时编译。在我决定在我的编译 Skype API 库中使用之前，一切都运行良好。当我尝试这样做时，程序告诉我：“元数据文件 'c:\Users\Алексей\Dropbox\Skype Bot\Skype Bot\bin\Debug\Skype4COM.dll' 无法打开 - '尝试加载格式不正确的程序'"。我该如何解决？这是代码：

```
public delegate object Do();
    protected static string Compile(string str)
    {
        try
        {
            var csc = new CSharpCodeProvider(new Dictionary<string, string> { { "CompilerVersion", "v3.5" } });
            CompilerParameters parameters = new CompilerParameters(new[] { "mscorlib.dll", "System.Core.dll", "System.dll", "SKYPE4COM.dll" }) { GenerateInMemory = true };
            //parameters.LinkedResources.Add("Skype4COM.dll");
            //parameters.EmbeddedResources.Add("SKYPE4COMLib.dll");
            //parameters.ReferencedAssemblies.Add("");

            CodeTypeReferenceExpression csSystemConsoleType = new CodeTypeReferenceExpression("System.Console");

            CompilerResults results = csc.CompileAssemblyFromSource(parameters, str);

            if (results.Errors.Count >= 1) return results.Errors[0].ErrorText;

            Type t = results.CompiledAssembly.GetType("Program");
            MethodInfo m = t.GetMethod("Method");

            Do DoMethod;
            DoMethod = (Do)Delegate.CreateDelegate(typeof(Do), m);
            return DoMethod().ToString();
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:35:49.507

首先确保您的 dll 已[注册](http://donchevp.blogspot.it/2008/08/skype4com-lib-how-to-register-skype.html)。

如果您创建一个测试项目并添加一个 COM 引用，`Skype4COM.dll`那么 Visual Studio 将创建一个互操作程序集`Interop.Skype4COM.dll`。您必须添加对该文件的引用（`System.Core.dll`例如，以与添加对 的引用相同的方式）。

# jquery - 为什么 jQuery 没有加载到我的 Rails 3.2.3 应用程序中？

> ID：10553343
> 
> 赞同：11
> 
> 时间：2012-05-11T14:29:20.633
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

直到昨天，jQuery 在我的 Rails 应用程序中加载得很好。我正在尝试安装调试器/ruby-debug gem。正如您可能知道的那样，Rails 3 中的调试器 gem 存在问题，并且我未能成功安装依赖项，因此我从 Gemfile 中删除了 gem。从那以后加载我的网站时，jQuery 没有加载。这些是我在控制台中看到的消息：

```
assets/jquery_ujs.js?body=1:377Uncaught ReferenceError: jQuery is not defined
bootstrap-transition.js:24Uncaught TypeError: undefined is not a function
bootstrap.js:3Uncaught ReferenceError: jQuery is not defined
welcome:210Uncaught ReferenceError: $ is not defined 
```

这是我的 application.js 文件：

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

如果我在 layouts/application.html.erb 中显式加载 jQuery，就像这样，它可以工作：

```
<%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" %>
<%= javascript_include_tag "application" %> 
```

关于我可以做些什么来解决这个问题并再次加载 jQuery 有什么想法吗？查看 .rvm/gems/ruby-1.9.3-p125/gems/jquery-rails-2.0.2/vendor/assets/javascripts 我可以看到 jquery.js 和 jquery.min.js 仍然存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T14:11:30.717

谢谢@Djj。重新排序我的 application.js 树似乎已经解决了这个问题。这是我修改后的树：

```
//= require jquery_ujs
//= require jquery
//= require twitter/bootstrap
//= require jquery.placeholder
//= require_tree . 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-14T16:05:35.993

在我的情况下，问题是由于异步加载 javascript 文件。

```
<%= javascript_include_tag "application", :async => true %> 
```

切换回

```
<%= javascript_include_tag "application" %> 
```

解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T12:33:57.723

经过很长时间，这解决了我的错误问题。

确保 Jquery 只加载一次。

包含`gem 'jquery-rails'` 在 Gemfile 中并执行`$ bundle install`

确保将这些包含在`app/assets/javascripts/application.js`文件中。

```
//= require jquery
//= require jquery_ujs 
```

错误时的语法 `// require jquery`会导致不加载 jquery。

如果所有内容都包含正确，则您的 html 文件的页面源必须显示包含的所有源文件。

对我来说，我遇到了一个问题，因为除了在 app/assets/javascript 下的 application.js 文件中需要它之外，我还在 app/views/layouts 下的 application.html.erb 中明确加载了来自 google 的 jquery 插件源。这导致 jquery 被再次定义，并且很少会出现`placeholder()`未定义、`oApi`未定义等错误`null`。

# oracle - 更改 ADF 组件的默认属性

> ID：10553345
> 
> 赞同：0
> 
> 时间：2012-05-11T14:29:23.560
> 
> 标签：oracle, sorting

我们已经部署了一个巨大的 ADF 应用程序，现在客户希望在排序时选择表中的多个列。

我发现了如何（`columnSelection="multiple"`），然后面板集合提供了一个“高级”排序页面 - 就像一个魅力。

问题是：我们部署的应用程序非常庞大。几年的发展。是否可以更改默认`columnSelection`属性？截至目前，默认值为`default(none)`，我想将其更改为`default(multiple)`。

我这是不可能的，脚本可以完成这项工作，但我们希望为`default(multiple)`将来添加的每个表设置该属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:23:48.523

您提到的是一个有用的用例，但目前看起来 adf 不允许这样做。如果他们这样做了，那么用户将开始更改 pageDefs 上的默认迭代器，这可能会被证明是一场噩梦。

# zend-framework - 根据它的值将 Zend_Form_Element_Select 更改为 Zend_Form_Element_Hidden

> ID：10553350
> 
> 赞同：0
> 
> 时间：2012-05-11T14:30:04.177
> 
> 标签：zend-framework, zend-form

在 Zend Framework 中，我试图创建一个选择元素，如果用户只能选择一个项目，它将自动变成隐藏元素。如果它具有多个值，我希望它的行为就像一个 Select 元素，所以我知道我需要使用以下方法扩展该类：

```
class Application_Form_Element_SingleSelect extends Zend_Form_Element_Select{} 
```

但我不确定如何让它作为隐藏元素输出。

**更新**

这是我想出的最终代码：

```
public function render(Zend_View_Interface $view = null){
    $options = $this->getMultiOptions();

    // check to see if there is only one option
    if(count($options)!=1){
        // render the view
        return parent::render($view);
    }

    // start building up the hidden element
    $returnVal = '<input type="hidden" name="' . $this->getName() . '" ';

    // set the current value
    $keys = array_keys($options);
    $returnVal .= 'value="' . $keys[0] . '" ';

    // get the attributes
    $attribs = $this->getAttribs();

    // check to see if this has a class
    if(array_key_exists('class', $attribs)){
        $returnVal .= 'class="' . $attribs['class'] . '" ';
    }

    // check to see if this has an id
    if(array_key_exists('id', $attribs)){
        $returnVal .= 'id="' . $attribs['id'] . '" ';
    } else {
        $returnVal .= 'id="' . $this->getName() . '" ';
    }

    return $returnVal . '>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:16:01.670

您需要重写负责通过添加到该元素的所有装饰器生成 html 的渲染方法。

```
class Application_Form_Element_SingleSelect extends Zend_Form_Element_Select{

 public function render(Zend_View_Interface $view = null)
{
  $options = $this->getMultiOptions();
   return count($options) > 1 ? parent::render($view) : '' ;
}

} 
```

# c# - 如何调试 SQLDataSource 更新命令？

> ID：10553351
> 
> 赞同：2
> 
> 时间：2012-05-11T14:30:08.683
> 
> 标签：c#, asp.net

在 Visual Studio 2010 中，有没有办法逐步执行 SQLDataSource 的更新命令？

我有 SQLDataSource 和 *.aspx 上指定的参数它使用存储过程。

我收到“指定的参数太多”错误。我指定的参数数量与存储过程完全匹配。因此，我希望能够调试并查看 SQLDataSource 尝试发送的参数。

我的存储过程：

```
ALTER PROCEDURE [dbo].[UPDATE_TABLEA]
    --UPDATE
    @ID int,
    @COL1 varchar(200),
    @COL2 varchar(200),
    @COL3 varchar(20),
    @COL4 varchar(100),
    @COL5 varchar(100),
    @COL6 varchar(10),
    @COL7 varchar(200),
    @COL8 datetime,
    @COL9 datetime,
    @COL10 varchar(20),
    @COL11 datetime,
    @COL12 varchar(20),
    @COL13 datetime,    
    --INSERT TRANSACTION
    @COL14 varchar(100)

AS

BEGIN
    --UPDATE
    UPDATE TABLEA SET 
        COL1 = @COL1,
        COL2 = @COL2,
        COL3 = @COL3,
        COL4 = @COL4,
        COL5 = @COL5,
        COL6 = @COL6,
        COL7 = @COL7,
        COL8 = @COL8,
        COL9 = @COL9,
        COL10 = @COL10,
        COL11 = @COL11,
        COL12 = @COL12,
        COL13 = @COL13,
        COL15 = (SELECT COLX FROM TABLE WHERE [COLY] = 'ASDF')
    WHERE ID = @ID

    --ADD TRANSACTION
    INSERT INTO TABLEB ([COL1], [COL2], id, [datetime]) VALUES (@COL14, (SELECT COLX FROM TABLE WHERE [COLY] = 'ASDF'), @ID, GETDATE())
END 
```

我的 SQL 数据源：

```
<asp:SqlDataSource ID="ds1" runat="server" 
            ...
            UpdateCommand="UPDATE_TABLEA" UpdateCommandType="StoredProcedure"             
            ...
        >
            <UpdateParameters>    
                <asp:Parameter Type="Int32" Name="@ID" Direction="Input" />
                <asp:Parameter Type="String" Size="200" Name="@COL1" Direction="Input" />
                <asp:Parameter Type="String" Size="200" Name="@COL2" Direction="Input" />
                <asp:Parameter Type="String" Size="20" Name="@COL3" Direction="Input" />
                <asp:Parameter Type="String" Size="100" Name="@COL4" Direction="Input" />
                <asp:Parameter Type="String" Size="100" Name="@COL5" Direction="Input" />
                <asp:Parameter Type="String" Size="10" Name="@COL6" Direction="Input" />
                <asp:Parameter Type="String" Size="200" Name="@COL7" Direction="Input" />
                <asp:Parameter Type="DateTime" Name="@COL8" Direction="Input" />
                <asp:Parameter Type="DateTime" Name="@COL9" Direction="Input" />
                <asp:Parameter Type="String" Size="20" Name="@COL10" Direction="Input" />
                <asp:Parameter Type="DateTime" Name="@COL11" Direction="Input" />
                <asp:Parameter Type="String" Size="20" Name="@COL12" Direction="Input" />
                <asp:Parameter Type="DateTime" Name="@COL13" Direction="Input" />
                <asp:Parameter Type="String" Size="100" Name="@COL14" DefaultValue="<%=user_id%>" Direction="Input" />
            </UpdateParameters> 
```

这是 SQL 探查器输出：

```
exec UPDATE_TABLEA @@ID=NULL,@@COL1=NULL,@@COL2=NULL,@@COL3=NULL,@@COL4=NULL,@@COL5=NULL,@@COL6=NULL,@@COL7=NULL,@@COL8=NULL,@@COL9=NULL,@@COL10=NULL,@@COL11=NULL,@@COL12=NULL,@@COL13=NULL,@@COL14=N'<%=user_id%>',@ID=1 
```

最后 2 个参数看起来很奇怪。虽然不知道为什么...

任何想法......为什么它告诉我太多的论点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:38:06.123

SqlDataSource 位于 EditItemTemplate 中。这意味着这个 GridView 的每一行都会有一个 SqlDataSource，Repeater——不管它是什么。

如果你想获得 SqlDataSource，比如说，你的 GridView 中的第三行，你会想要这样的东西：

后面的代码：

```
SqlDataSource sqlSource = gv.Rows[2].FindControl("sqlId") as SqlDataSource;
Response.Write(sqlSource.ConnectionString); 
```

现在检查这个 SqlDataSource 的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:30:49.290

问题是我的参数定义中的@。

不起作用：

```
<asp:Parameter Type="DateTime" Name="@COL11" Direction="Input" /> 
```

作品：

```
<asp:Parameter Type="DateTime" Name="COL11" Direction="Input" /> 
```

# sencha-touch-2 - 在控制器中引用容器的子项

> ID：10553352
> 
> 赞同：1
> 
> 时间：2012-05-11T14:30:15.190
> 
> 标签：sencha-touch-2

如何在 Sencha Touch 2 控制器中通过 itemId 引用容器的子项？例如，一个 xtype 为“mypanel”的容器，它包含一个 itemId 为“mybutton”的按钮。在控制器中，我想为按钮分配一个偶数处理程序。我怎么做？

我的应用程序很大并且经常有一个组件的重复，所以我不在我的应用程序的任何地方使用 id，而是使用 itemId。

```
Ext.define('myapp.controller.Test', {
    extend: 'Ext.app.Controller',

    config: {
        control: {
            myButton: {
                tap: 'showView'
            }
        },
        refs: {
            myPanel: 'mypanel',
            myButton: '?'
        }
    },

    showView: function(){

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:02:57.467

```
refs: {
    mybutton: 'mypanel #mybutton'
} 
```

有关 ComponentQuery 的更多信息，请访问：http: //docs.sencha.com/touch/2-0/#! [/api/Ext.ComponentQuery](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T12:27:38.273

当使用**itemId**而不是**id**时，您还需要在控制器的 ref 中提及包含带有 itemId 的元素的父级，如下所示：

```
refs: {
    mybutton: 'xtype_of_panel #itemId_button'
    //where 'itemId_button' is the itemId and 'xtype_of_panel' is the parent that contains the element with the itemId of 'itemId_button'
} 
```

# c# - 使用 HttpWebRequest 模拟 Internet Explorer

> ID：10553357
> 
> 赞同：3
> 
> 时间：2012-05-11T14:30:29.770
> 
> 标签：c#, internet-explorer, httpwebrequest, webbrowser-control

我正在使用 HttpWebRequests 自动化网站。有问题的网站需要 Internet Explorer 才能使 Web 应用程序正常工作。因为我没有使用 webBrowser 控件，所以 Web 请求只返回一个页面，通知我需要使用 Internet Explorer。有没有办法让网站认为我正在使用 Internet Explorer，或者我必须使用 webBrowser 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:34:42.097

尝试设置`UserAgent`字符串：

```
public static void PretendToBeIE(HttpWebRequest request)
{
    request.UserAgent = "Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)";
} 
```

但不能保证它会起作用，一切都取决于您使用的网络应用程序。

# php - 如何按每个对象内的索引对对象数组进行排序？

> ID：10553359
> 
> 赞同：0
> 
> 时间：2012-05-11T14:30:38.980
> 
> 标签：php, arrays

我有一个对象数组，每个对象都有一个索引：object->index，它是一个正整数。

我有第二个数组，每个条目都是一个索引，唯一对应于 object->index 之一。我想对第一个对象数组进行排序，以便它们与第二个数组索引的顺序相同。

那有意义吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:48:39.260

我会翻转您的第二个数组 ( `array_flip`)，以便您可以更轻松地查找对象的所需位置。然后你可以像这样遍历你的对象：

```
$indices = array_flip( $second_array );
$sorted_objects = array();
foreach ( $objects as $object ) {
  $sorted_objects[$indices[$object->index]] = $object;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:39:55.107

```
$objArray = ...;
$sortArray = ...;
$newArray = array(); // the sorted array

foreach( $sortArray as $index )
{
  foreach( $objArray as $obj )
  {
    if( $obj->index === $index )
    {
      $newArray[] = $obj;
      break;
    }
  }
} 
```

像这样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:42:21.300

查看 usort (http://au.php.net/manual/en/function.usort.php)：这允许您通过指定函数对数组进行排序。该功能将获取对象的索引。

```
function cmp($obj1, $obj2) {

    if ($obj1->index == $obj2->index) {
        return 0;
    }
    return ($obj1->index < $obj2->index) ? -1 : 1;
}

usort($aObjects, "cmp"); 
```

# c# - 在 FusionCharts 图表中添加复选框

> ID：10553364
> 
> 赞同：0
> 
> 时间：2012-05-11T14:31:01.733
> 
> 标签：c#, asp.net-mvc-3, razor, fusioncharts

我有一个 fusionCharts 条形图，并想在其中添加一个复选框，以便当用户勾选复选框时，图表会用不同的数据集刷新，当用户取消勾选时，会显示原始数据集。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:08:59.743

**从FusionCharts 功能库**中查看此演示- [http://www.fusioncharts.com/features/client-side-data-update/](http://www.fusioncharts.com/features/client-side-data-update/)

此演示中的实现似乎与您的要求相似。查看源代码并进行检查。

# css - 使用网页上的“赞”/“分享”按钮 - 格式化？

> ID：10553365
> 
> 赞同：0
> 
> 时间：2012-05-11T14:31:04.950
> 
> 标签：css, facebook-like

我将 Like / Share 按钮放在了一个黑色背景的网页上。

分享按钮旁边的文字从“成为你的第一个喜欢这个的朋友”变为喜欢它的人。

无论如何，字体是深色的，很难看到页面的黑色。

是否可以使用 CSS 将字体颜色更改为白色？

谢谢，约翰尼尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:33:02.743

您可以将“赞”按钮的配色方案更改为“深色”。这会将文本从黑色更改为浅灰色。添加`data-colorscheme="dark"`为`<div class="fb-like">`标签内的属性。

有关更多信息以及如何使用 XFBML 和 IFRAME 实现，请参阅[Like box 插件代码生成器。](https://developers.facebook.com/docs/reference/plugins/like/)

要进行任何其他更改，您将需要创建一个 CSS 文件，该文件重新设置 Facebook 在您的 div 中放置的 iframe 的样式，并处理 FB 对他们在该 iframe 中为您提供的服务所做的任何更改。

# jquery - jQuery - 隐藏名称与模式匹配的特定 div（p 后跟一个字符，如 p0、p1、pa、py）

> ID：10553366
> 
> 赞同：1
> 
> 时间：2012-05-11T14:31:06.820
> 
> 标签：jquery, jquery-selectors, hide

我想隐藏 div 中**类名以“p”开头并后跟任何字符的所有元素。**

```
<div id="myDiv">

   <div id="p0"> .... </div>
   <div id="p1"> ..... </div>

   <div id="abc"> .... </div>

</div> 
```

所以我想隐藏'p0'和'p1' div并留下'abc' div。

我正在尝试以下代码

```
$('#myDiv').find('#p*').hide(); 
```

但显然这是错误的。请建议我如何在 jQuery 选择器中使用通配符。

如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T14:32:28.890

您可以使用[属性开始选择器](http://api.jquery.com/attribute-starts-with-selector/)：

```
$('div[id^="p"]').hide(); 
```

例子在[这里](http://jsfiddle.net/s838K/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:34:50.083

[@EmreErkan](https://stackoverflow.com/a/10553395/370103)发布了一个可行的解决方案。但是，我建议更好的方法是向 DIV 添加一个通用类或数据属性，以便您可以更好地选择它们。

例如...

```
<div id="p0" class="HideMe" data-noshow="true"> .... </div>
<div id="p1" class="HideMe" data-noshow="true"> ..... </div> 
```

你可以像这样隐藏它们：

```
$(".HideMe").hide(); 
```

或者

```
$("div[data-noshow='true']").hide(); 
```

# c# - c# 对象组合

> ID：10553368
> 
> 赞同：2
> 
> 时间：2012-05-11T14:31:21.577
> 
> 标签：c#, oop, object, inner-classes, object-composition

我有一个名为 LetterRect 的类，其中两个字段的类型为 LetterSquare。例如：

```
public class LetterRect : Microsoft.Xna.Framework.GameComponent
{
    private LetterSquare square1;                        
    private LetterSquare square2;
    private long indentificationNumber;
    ... other fields that are irrelevant to this question
} 
```

我希望能够通过 square1 和 square2 获得对 LetterRect 对象的引用。我最初的解决方案是给 LetterRect 和对应的 square1 和 square2 相同的 IdentificationNumber 和一个长整数。但是，有没有办法在没有识别号的情况下访问 LetterRect？绝对不存在继承关系，它是一种组合，或“具有”关系。如果我没记错的话，Java 中有一个内部类的概念，其中内部类可以直接引用它所属的类的实例。那么，有没有更好的方法通过 square1 和 square2 来获取对 LetterRect 对象的引用呢？

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:39:24.123

尝试这个;

```
public class LetterRect : Microsoft.Xna.Framework.GameComponent
{
    private LetterSquare square1;
    private LetterSquare square2;
    public LetterRect()
    {
        square1 = new LetterSquare(this);
        square2 = new LetterSquare(this);
    }
}

public class LetterSquare 
{
    public LetterRect LetterRectProp { get; private set; }
    public LetterSquare (LetterRect letterRect )
    {
        this.LetterRectProp = letterRect;
    }
} 
```

# apache-flex - 如何在 Flex 中将 ArrayCollection 分成单独的文件？

> ID：10553370
> 
> 赞同：0
> 
> 时间：2012-05-11T14:31:36.097
> 
> 标签：apache-flex, air, arraycollection, codebase

我使用 Flex 构建 Adob​​e Air 应用程序。在您以格式代码介绍国家列表和国籍列表之类的内容后，`ArrayCollection`代码变得混乱且长得令人难以置信。

是否可以将 ArrayCollection 放在同一个 Flex 项目中的单独文件中，然后在需要时或在编译时加载它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:41:11.343

是的; 在 ActionScript 中创建一个扩展 ArrayCollection 的类，然后对 ArrayCollection 的元素进行硬编码。也许在你的新类的构造函数中。

您应该能够在任何可以使用 ArrayCollection 的地方使用这个新类。

[有关在 ActionScript 中创建类的更多信息。](http://www.adobe.com/devnet/flash/quickstart/creating_class_as3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:41:08.160

因此，您实现了一个显示/使用大量数据的 Air 应用程序。您不想对这些数据进行硬编码，也不想扩展 ArrayCollection 只是为了将数据移出类。这种最灵活的解决方案是将数据填充到 XML 文件中，将其编译到应用程序中并实现解析器以从数据中创建对象（或更好的类实例）。这应该被代理、适配器或您想使用的模式隐藏。

当您拥有此功能时，您可能会重用它，并且只需为数据源实现不同的适配器，例如从文件系统异步加载数据（或作为打包的 Air 应用程序的资产），从数据库获取数据，它随 Air 提供或使用（Web）服务（JSON、XML、AMF）。这可能是一个很好的练习，可以让您的应用程序更加模块化并更容易测试。

在继承方面，您应该更喜欢组合而不是继承。这是设计应用程序时常见的最佳实践。

# internet-explorer - Metro下Win8如何在IE10中调试网站？

> ID：10553373
> 
> 赞同：9
> 
> 时间：2012-05-11T14:31:41.993
> 
> 标签：internet-explorer, windows-8, windows-runtime, windows-store-apps

我有一个在 IE10 Consumer Preview、Chrome 和 Firefox 上运行良好的网站，所有这些都在 Windows 8 Consumer Preview（即 Win8 beta）上运行。但在 IE10 Consumer Preview 的 Metro 版本中，我只看到一条错误消息：“Internet Explorer 无法显示网页”。如何诊断错误？F12 不会调出任何开发者工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:33:02.040

臭名昭著的[fiddler](http://www.fiddler2.com) http 调试器与 Windows 8 一起工作，允许您查看正在向服务器发送和从服务器发送的请求和响应，因此浏览器无法向您隐藏任何内容，这是我怀疑目前正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T12:18:15.523

强烈建议在 IE 中使用 firebug lite，因为原生调试器很差

将此行添加到开发的网站

```
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> 
```

# django - 从中间件访问模型 - django

> ID：10553374
> 
> 赞同：7
> 
> 时间：2012-05-11T14:31:44.470
> 
> 标签：django

访问模型并在中间件的 process_request() 方法中进行一些处理是一种好的做法/可能吗？

我正在考虑使用中间件来解析子域。这些子域将代表城市，我想知道子域（或城市）是否存在于我们的数据库中。

假设我有一个城市模型，如果城市不存在，我可以导入它并引发 404 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T14:37:30.617

这是好习惯吗？当然。这就是`auth`将用户添加到请求中的方法。

我可以导入吗？当然。如果城市不存在，我可以提出 404 吗？当然。

你只是在寻找安息之所吗？

# java - UDP数据包等待然后一起到达

> ID：10553375
> 
> 赞同：1
> 
> 时间：2012-05-11T14:13:03.863
> 
> 标签：java, udp

我有一个简单的 Java 程序，它充当服务器，监听 UDP 数据包。然后我有一个通过 3g 发送 UDP 数据包的客户端。

我注意到偶尔会出现以下情况：我发送了一个数据包，几秒钟后仍未收到。然后我发送另一个数据包，突然它们都到达了。

我想知道是否有可能存在某种系统来等待一定数量的数据，而不是发送一个尺寸过小的数据包。在我的应用程序中，我每个数据包只发送大约 2-3 个字节的数据 - 尽管 UDP 标头和其他什么不会使消息变大一点。

我的应用程序的目的是尽可能快地从 A 到 B 获取这几个字节的数据。非常强调速度。这一切只是巧合吗？我想我可以增加数据包的大小，但似乎传输时间会增加，而且 3g 并不完全完美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:26:15.747

由于评论变得相当冗长，最好将它们完全变成答案。

如果您的应用在检索到一定数量之前没有接收数据，那么很有可能在幕后进行了某种缓冲。一个很好的例子（不是说这直接适用于您）是，如果您或底层库正在使用`InputStream.readLine()`or `InputStream.read(bytes)`，那么它将阻塞，直到它收到一个换行符或`bytes`返回之前的字节数。从您的程序似乎在达到某个阈值时检索所有数据这一事实来看，听起来就是这样。

调试它的一个好方法是使用 Wireshark。Wireshark 不关心您的程序——它分析发送到您的计算机和从您的计算机发送的原始数据包，并且可以告诉您问题出在发送方还是接收方。

如果您使用 Wireshark 并看到第一次发送的数据在第二次发送之前到达您的物理机器，那么问题出在您的接收端。如果您看到第一个数据包与第二个数据包同时到达，那么问题出在发件人身上。没有看到代码，很难说你在做什么，具体来说，是什么导致数据仅在收到超过 2-3 个字节后才显示 - 但在那之前，这种行为准确地描述了你所看到的.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T15:54:22.433

这有几个可能的原因：

1.  蜂窝数据网络并非“永远在线”。根据底层技术，在发送第一个数据包和实际建立 IP 连接之间可能会有相当长的延迟。这将在 IP 网络空闲一段时间后最为明显。

2.  您的接收器可能没有正确检查套接字的可读性。无论您使用什么高级 API，都需要在下面调用以`select()`检查套接字是否可读。当数据报到达时，`select()` *应该*解除阻塞并发出套接字描述符可读的信号。或者，但效率较低，您可以将套接字设置为非阻塞并通过读取对其进行轮询。轮询会在没有数据时浪费 CPU 时间，并将到达检测延迟到轮询间隔，但如果由于某种原因您无法腾出一个线程等待，则它可能很有用`select()`。

3.  我在上面说过，`select()`当数据到达时，应该在被监视的套接字上发出可读性信号，但是这种行为可以通过套接字的“接收低水位标记”来修改。默认值通常为 1，这意味着任何数据都表示可读性。但如果`SO_RCVLOWAT`设置得更高（通过`setsockopt()`或更高级别的等效项），则在超过指定数量的数据到达之前不会发出可读性信号。`getsockopt()`您可以使用环境中等效的 API 或任何 API检查该值。

第 1 项将导致第一个数据报实际延迟，但仅在 IP 网络空闲一段时间而不是一旦它启动时才有效。第 2 项和第 3 项只会让您的程序认为第一个数据报被延迟：接收方的数据包嗅探器将显示第一个数据报按时到达。

# digital-signature - 如何使用智能卡在 Web 应用程序 (JavaScript) 中制作数字签名？

> ID：10553377
> 
> 赞同：9
> 
> 时间：2012-05-11T14:31:46.170
> 
> 标签：digital-signature, npapi, pkcs#11

我们编写了一个文档管理系统，并希望使用 Web 客户端对文档进行数字签名。我们的 Java 客户端应用程序已经能够应用和检查数字签名，但我们希望即使使用我们的 Web 客户端也可以进行签名。这是用 GWT 编写的，因此在客户端运行时，它是一个 JavaScript 应用程序。

我们不想创建一个 Java 小程序并将其下载到客户端并执行它。我们想使用浏览器安全设备或浏览器 API 来签署文件。我们还想保留完整的文档服务器端，并仅将文档哈希转移到客户端。

**我们认为使用NSS** 或**npapi/npruntime**应该可以做到这一点，但我们没有找到任何有关此的信息。（顺便说一句，npruntime 在 IE 中也可用吗？我们应该使用 ActiveX 来实现与 IE 相同的结果吗？）

你有什么提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T05:27:54.673

经过一番谷歌搜索后，我找到了答案。[Mozilla 通过window.crypto](https://developer.mozilla.org/en/JavaScript_crypto)对象导出其 NSS 模块的一部分。执行此类操作的更标准方法可能是通过[DOMCrypt](https://wiki.mozilla.org/Privacy/Features/DOMCryptAPISpec/Latest)，目前 W3C 中正在[讨论该](http://www.w3.org/2011/11/webcryptography-charter.html)方法。Google Chrome 开发人员将等待 W3C 标准化 DOMCrypt，而 Microsoft 需要使用 ActiveX 对象[，如此处所述](http://bozhobg.wordpress.com/2009/04/16/how-to-create-a-digital-signing-solution-with-only-javascript/)（这甚至适用于 Windows 上的 Firefox/Chrome/Opera）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-24T18:23:32.240

目前（2016 年 5 月）这是不可能的。

Chrome 已放弃对 Java 的支持。'Windows edge' 不会有。IE11 支持不好，Oracle 决定停止使用 java 插件。只有 Firefox、旧版本的 IE 和 Java 插件才有可能。

新的 WebCryptographyApi 标准为浏览器提供数字签名支持，但不支持 pcks#11

解决此问题的真正电子政务解决方案： 1) 在用户 PC 上安装本地 Java 应用程序。应用程序侦听端口，例如 5678 2) 在您的页面中，javascript 检测是否支持小程序 3) 如果不支持，[则以 http://127.0.01:5678/的形式连接到应用程序签名](http://127.0.01:5678/sign)并将数据发送给签名。4) 应用程序是本地的，使用操作系统密钥库没有问题，其中包括驱动程序 PKCS #11。进行数字签名并准备结果 5) 页面 javascript 定期查询结果并在准备好时检索它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T16:26:02.710

在 Win/IE 中，您仍然可以在没有任何第三方 ActiveX 或外部库的情况下使用 CAPICOM [http://en.wikipedia.org/wiki/CAPICOM 。](http://en.wikipedia.org/wiki/CAPICOM)
这适用于安装 IE 的任何地方。
然而，这正在退役。

以下是我用来登录 IE 的内容。我称之为： `var signature = signDigest(stringToBeSigned);`

```
function signDigest(text) {
if (window.event)
    window.event.cancelBubble = true;

var dest = sign(text); //TODO  

return dest;
}

// CAPICOM constants  

var CAPICOM_STORE_OPEN_READ_ONLY = 0;
var CAPICOM_CURRENT_USER_STORE = 2;
var CAPICOM_CERTIFICATE_FIND_SHA1_HASH = 0;
var CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY = 6;
var CAPICOM_CERTIFICATE_FIND_TIME_VALID = 9;
var CAPICOM_CERTIFICATE_FIND_KEY_USAGE = 12;
var CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE = 0x00000080;
var CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME = 0;
var CAPICOM_INFO_SUBJECT_SIMPLE_NAME = 0;
var CAPICOM_ENCODE_BASE64 = 0;
var CAPICOM_E_CANCELLED = -2138568446;
var CERT_KEY_SPEC_PROP_ID = 6;

function IsCAPICOMInstalled() {
    if (typeof (oCAPICOM) == "object") {
        if ((oCAPICOM.object != null)) {
            // We found CAPICOM!  
            return true;
        }
    }
}

function FindCertificateByHash() {

    try {
        // instantiate the CAPICOM objects  
        var MyStore = new ActiveXObject("CAPICOM.Store");
        // open the current users personal certificate store  
        MyStore.Open(CAPICOM_CURRENT_USER_STORE, "My", CAPICOM_STORE_OPEN_READ_ONLY);

        // find all of the certificates that have the specified hash  
        var FilteredCertificates = MyStore.Certificates.Find(CAPICOM_CERTIFICATE_FIND_SHA1_HASH, strUserCertigicateThumbprint);

        var Signer = new ActiveXObject("CAPICOM.Signer");
        Signer.Certificate = FilteredCertificates.Item(1);
        return Signer;

        // Clean Up  
        MyStore = null;
        FilteredCertificates = null;
    }
    catch (e) {
        if (e.number != CAPICOM_E_CANCELLED) {
            return new ActiveXObject("CAPICOM.Signer");
        }
    }
}

function sign(src) {
    if (window.crypto && window.crypto.signText)
        return sign_NS(src);
    else

        return sign_IE(src);
}

function sign_NS(src) {
    var s = crypto.signText(src, "ask");
    return s;
}

function sign_IE(src) {
    try {
        // instantiate the CAPICOM objects  
        var SignedData = new ActiveXObject("CAPICOM.SignedData");
        var TimeAttribute = new ActiveXObject("CAPICOM.Attribute");

        // Set the data that we want to sign  
        SignedData.Content = src;
        var Signer = FindCertificateByHash();

        // Set the time in which we are applying the signature  
        var Today = new Date();
        TimeAttribute.Name = CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME;
        TimeAttribute.Value = Today.getVarDate();
        Today = null;
        Signer.AuthenticatedAttributes.Add(TimeAttribute);

        // Do the Sign operation  
        var szSignature = SignedData.Sign(Signer, true, CAPICOM_ENCODE_BASE64);
        return szSignature;
    }
    catch (e) {
        if (e.number != CAPICOM_E_CANCELLED) {
            alert("An error occurred when attempting to sign the content, the error was: " + e.description);
        }
    }
    return "";
} 
```

我在编码等方面遇到了一些问题，所以我也包含了我的控制器（.net）

```
 byte[] decbuff = Convert.FromBase64String(signature);

    //CAPICOM USES 16 BIT ENCODING
    Encoding utf16Enc = Encoding.GetEncoding("UTF-16LE");

    byte[] utf16Data = utf16Enc.GetBytes(getContent);

    ContentInfo content = new ContentInfo(utf16Data);

    System.Security.Cryptography.Pkcs.SignedCms cms = new System.Security.Cryptography.Pkcs.SignedCms(content,true);
    cms.Decode(decbuff);

    int length = decbuff.Length;         

    X509Certificate2 cert = cms.SignerInfos[0].Certificate;

    X509Chain chain = new X509Chain();
    bool theVal = chain.Build(cert);
    cms.CheckHash();       
    cms.CheckSignature(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T17:06:19.803

我参与的一个项目是使用 Chrome 和 Native Messaging 完成的：

[https://github.com/CACBridge/ChromeCAC](https://github.com/CACBridge/ChromeCAC)

这需要安装 chrome 插件，否则效果很好。非常适合例如您知道需要提前执行此操作的 Intranet/Group 环境。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-19T15:17:40.400

现在你可以做到了。基于 PKCS#11 智能卡或令牌的 Web 应用程序可以通过使用 Silverlight 版本的 NCryptoki 来实现。见[http://www.ncryptoki.com](http://www.ncryptoki.com)

你有两个chanches：

1) 使用 NCryptoki 的 Silverlight 版本并使用智能卡提供的 PKCS#11 函数开发您自己的 Silverlight 用户控件，该控件实现您的逻辑，在您的情况下为数字签名

2) 使用基于上述 Silverlight 版本的 JQuery 插件，通过在 JavaScript 中调用 PKCS#11 函数在 JavaScript 中实现您的应用程序

此外，您可以使用 NDigitSign 的 Silverlight 版本（参见[http://www.ncryptoki.com](http://www.ncryptoki.com)），它可以满足您的所有需求，并且可以在任何 Web 浏览器中实现。

# c# - C# 转换为小数

> ID：10553378
> 
> 赞同：13
> 
> 时间：2012-05-11T14:31:49.187
> 
> 标签：c#, .net, casting, double, decimal

如果有的话，两者之间有什么区别？

```
decimal d = (decimal) myDouble;
decimal d = new decimal(myDouble);
decimal d = Convert.ToDecimal(myDouble); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T14:39:54.737

没有区别。如果您查看源代码：

十进制：

```
public static explicit operator decimal(double value)
{
    return new decimal(value);
} 
```

在转换中：

```
public static decimal ToDecimal(float value)
{
    return (decimal) value;
} 
```

所以最后他们都打电话了`new decimal(double)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T14:37:49.367

他们都达到了相同的结果。但是，这里有一个更细分的解释：

*   **方法 1**创建一个显式转换`myDouble`为 type的新变量`decimal`。当你进行转换时，你是在说，*“这个 A 类型的对象实际上是 B-派生自 A 类型的对象，或者存在一个转换运算符来将 A 转换为 B。”*

*   **方法 2**创建一个新变量，该变量将通过构造函数重载转换`myDouble`为适当的类型 ( )。`decimal`当您调用构造函数时，您是在说*“根据传递给构造函数的参数创建一个新对象”。*

*   **方法 3**将基本数据类型 ( `double`) 转换为另一种基本数据类型 ( `decimal`)。当你使用类似的东西时`Convert.ToDecimal()`，你是在说，*“这个对象不是 B 类型的，但是有一种方法可以使它成为 B 类型的对象。”*

关于`Convert`MSDN 状态：

*   存在一种将每种基本类型转换为其他所有基本类型的转换方法。但是，实际执行的转换操作分为三类：

*   从类型到自身的转换只返回该类型。实际上不执行任何转换。

*   无法产生有意义结果的转换将引发 InvalidCastException。实际上不执行任何转换。从 Char 到 Boolean、Single、Double、Decimal 或 DateTime 以及从这些类型到 Char 的转换会引发异常。从 DateTime 到除 String 之外的任何类型的转换以及从除 String 之外的任何类型到 DateTime 的转换都会引发异常。除上述类型外，任何基本类型都可以与任何其他基本类型相互转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T14:38:04.780

实际上，从功能的角度来看，没有任何区别。这些是*实现*相同结果的不同方法。

重要的是，在[Convert.ToDecimal](http://msdn.microsoft.com/en-us/library/ms130989.aspx)的情况下，您可以指定格式 IFormatProvider(culture)，因此您可以获得更大的灵活性。

如果您不关心多元文化环境，请选择您喜欢的任何一个。

# javascript - 从表单中删除添加的元素不起作用

> ID：10553379
> 
> 赞同：0
> 
> 时间：2012-05-11T14:31:49.527
> 
> 标签：javascript, forms

我正在尝试从页面中完全删除一个元素（我动态添加的），但它似乎不太正常。问题是，在我从页面中删除一个元素后，它仍然出现在`document.forms`- 这给我带来了一个问题，因为页面稍后在处理一些其他数据时会自动抓取它。我无法更改下游操作，但我想知道是否有更好的方法来删除输入。有关示例，请参[见此 jsFiddle](http://jsfiddle.net/wTNFq/4/)。

Chrome 18 和 FF 13 工作相同（损坏），而 IE 9 工作正常，但我需要它在所有浏览器中工作 - 在怪癖模式下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:49:28.270

我会使用`document.getElementById`而不是`document.forms`：

[http://jsfiddle.net/wTNFq/6/](http://jsfiddle.net/wTNFq/6/)

```
var testfield = document.getElementById('testfield');

console.log('VALUE before: ' + testfield .value);

document.getElementById('wrapper').removeChild(testfield);

console.log('VALUE after: ' + document.getElementById('testfield').value); 
```

编辑：根据[w3c document.forms[0].fieldname equivalent](https://stackoverflow.com/questions/2810573/w3c-document-forms0-fieldname-equivalent)的公认答案，您的问题可能与在元素上使用`name`属性有关。`input`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:46:12.363

在您的示例中，您缺少`#`jQuery 选择器中的所有标签。当您通过它的 id 选择一个元素时，您必须始终`#`在名称之前包含 a ，并且对于类包括`.`这样的 - `$('#wrapper')`。

我在这里修复了您的示例-> [jsFiddle](http://jsfiddle.net/wTNFq/5/)通过执行以下操作

`$('#wrapper #testField').remove();`

希望这可以帮助

# php - 从 simpleXML 数组中获取数据

> ID：10553386
> 
> 赞同：1
> 
> 时间：2012-05-11T14:32:03.337
> 
> 标签：php, simplexml

致尊敬的读者

我正在尝试从从 pubmed 获取的 xml 数据数组中检索数据。数组如下所示：

```
<summa>
    <DocS>
        <Id>1</Id>
        <Item Name="PubDate" Type="Date">1999</Item>
        <Item Name="EPubDate" Type="Date"/>    //<- notice the open tag
        <Item Name="Source" Type="String">source a</Item>
        <Item Name="AuthorList" Type="List">
            <Item Name="Author" Type="String">a</Item>
            <Item Name="Author" Type="String">b</Item>
        </Item>
    </DocS>
    <DocS>
        <Id>2</Id>
        <Item Name="PubDate" Type="Date">1781</Item>
        <Item Name="EPubDate" Type="Date"/></Item> //<- notice the closed tag
        <Item Name="Source" Type="String">source a</Item>
        <Item Name="AuthorList" Type="List">
            <Item Name="Author" Type="String">a</Item>
            <Item Name="Author" Type="String">b</Item>
            <Item Name="Author" Type="String">c</Item>
            <Item Name="Author" Type="String">d</Item>
        </Item>
    </DocS>
</summa> 
```

该数组的长度不定，但始终具有如下初始结构：

```
<summa>
    <DocS>
        <Id>1</Id>
        <Item Name="PubDate" Type="Date">1999</Item> 
```

我特别需要的数据是这个

```
<Item Name="PubDate" Type="Date">data needed </Item>" 
```

下面的代码是我正在尝试的，它不起作用。有谁能够帮我？

```
$pmid_all=file_get_contents($url_id);

$p=simplexml_load_string($pmid_all);

$result = $p->xpath('/item');

while(list( , $node) = each($result)) {
    echo 'item: ',$node,"\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:40:27.930

您正在根级别 ( `/item`) 查询项目元素。尝试将您的 xpath 查询替换为`/summa/docs/item`.

编辑：您的 XML 格式也错误 `<Item Name="EPubDate" Type="Date"/></Item>`

删除`/`或`</Item>`。

修复后，这对我有用：

```
$pmid_all=file_get_contents("foo.xml");
$p=simplexml_load_string($pmid_all);
$result = $p->xpath('/summa/DocS/Item');

while(list( , $node) = each($result)) {
    echo 'item: ',$node,"\n";
} 
```

回答您在下面的评论：要获取`Item`每个 -Element 中的第一个`DocS`-Element：

```
$pmid_all=file_get_contents("foo.xml");

$p=simplexml_load_string($pmid_all);
$result = $p->xpath('/summa/DocS');

while(list( , $node) = each($result)) {
    $items = $node->xpath("Item");
    echo 'item: ',$items[0],"\n"; // $item[0] is the first Item found, $item[1] the 2nd, etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:40:29.163

您的 XML 需要首先被清理。一些标签被关闭两次，一些从未关闭......您将无法解析这种格式错误的 XML。

# ruby - 如何获得红宝石宝石的代码？

> ID：10553387
> 
> 赞同：0
> 
> 时间：2012-05-11T14:32:04.313
> 
> 标签：ruby, rubygems, github

我对 GitHub 很陌生，我想使用一些 Ruby 代码并尝试一下。

这是我想要得到的代码：[https ://github.com/pengwynn/linkedin](https://github.com/pengwynn/linkedin)

我想将它作为一个 Ruby Gem 来获取，这样我就可以使用它来连接到 LinkedIn API。

我该怎么办？我尝试在那里点击页面，但我不确定在那里做事的正确做法是什么。

我分叉了主分支，现在我的帐户中有一个副本，但不确定这是否是正确的操作。

感谢您的建议。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:34:40.303

如果您想直接从 git 存储库获取最新版本的 gem，您可以：

```
gem install git://github.com/pengwynn/linkedin.git 
```

* * *

您也可以使用名为“gem”的 rake 任务从源代码构建 gem

```
git clone git://github.com/pengwynn/linkedin.git
cd linkedin
rake gem 
```

然后安装它

```
gem install pkg/linkedin-{version}.gem 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:35:57.933

如果你想要它作为一个 gem，并且已经安装了 ruby​​，你可以使用 gem 命令来安装它。

该命令位于您上面链接的文档页面上：

```
gem install linkedin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:36:35.127

您应该使用`git`下拉副本。如果您不熟悉命令行工具，您可能需要一个能够引导您完成整个过程的 shell。除非您想对其进行修改，否则无需分叉个人副本。

安装 gems 是通过该`gem`工具完成的，如`gem install linkedin`，尽管建议使用[bundler](http://gembundler.com/)，因为它可以更容易地使不同机器上的版本保持同步。

如果它是 Ruby gem，您可以随时安装它，然后使用`gem contents linkedin`gem 名称或任何名称检查内容。

# .net - 我应该如何处理 [NeutralResourceLanguage] 以使我的应用程序被接受？

> ID：10553388
> 
> 赞同：1
> 
> 时间：2012-05-11T14:32:05.843
> 
> 标签：.net, windows-phone-7

由于 [NeutralResourceLanguage]，我的 WP 应用程序失败。他们作为消息发送

> 确保检查条目程序集上的 [NeutralResourceLanguage] 属性

我不明白我到底应该做什么。你能帮我看看我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:43:14.280

您需要为您的应用设置默认文化。

在这里查看更多信息： http: [//msdn.microsoft.com/en-us/library/ff637520 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/ff637520(v=VS.92).aspx)

# android - 在 CustomCursor Adapter getView() 中获取正确的光标

> ID：10553389
> 
> 赞同：6
> 
> 时间：2012-05-11T14:32:08.073
> 
> 标签：android, listview, custom-cursor

我有一个自定义光标适配器，其中每一行都包含一个复选框、文本视图和按钮。该按钮最初设置为 GONE，当用户选中我希望按钮显示的复选框时，用户可以单击它并删除相应的行。

我的问题是，在我的 getView() 中，我无法获得正确的光标，所以继续获取`cursorOutOfBoundsExceptions`.

如果我不再需要它，我还想删除 bindView()。

```
public class DeleteCampaignCustomCursorAdapater extends CursorAdapter {

protected static final String TAG = null;
DatabaseHelper myDbHelper;
protected SQLiteDatabase db;
private final Activity context;

private LayoutInflater mInflater;
protected ListView mListView;

private Cursor c;
public static int[] checked;

TextView merchantNameView;
Button deleteButton;
CheckBox selectForDelete;
//ImageView moveButton;

public DeleteCampaignCustomCursorAdapater(Context context, Cursor c) {
    super(context, c);
    this.context = (Activity) context;
    mInflater = LayoutInflater.from(context);
    this.c = c;
    initializeChecked();
}

@Override
public void bindView(View view, Context context, final Cursor cursor) {

    /*myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    merchantNameView = (TextView) view.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) view.findViewById(R.id.deleteButton);
    //selectForDelete = (CheckBox) view.findViewById(R.id.deleteCheckBox);
    //moveButton = (ImageView) view.findViewById(R.id.moveButton);

    merchantNameView.setText(cursor.getString(cursor.getColumnIndex("merchantName")));

    final int  rowID = cursor.getInt(cursor.getColumnIndex("_id"));     
    //final long rowID = mListView.getSelectedItemId();

    if (checked[rowID] == 0) {
        selectForDelete.setChecked(false);
    } else {
        selectForDelete.setChecked(true);
    }

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
               // Make deleteButton appear 
               RelativeLayout ll = (RelativeLayout) buttonView.getParent();
               deleteButton = (Button) ll.findViewById(R.id.deleteButton);
               checked[rowID] = 1;
               deleteButton.setVisibility(0);
            }
            else {
                //Hide deleteButton
                RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                checked[rowID] = 1;
                deleteButton.setVisibility(8);
            }
        }
    });

    deleteButton.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID);
                cursor.requery();
                notifyDataSetChanged();
                initializeChecked();  // re-set the checked array
            }                           
        }
    }); */
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(R.layout.delete_campaign_row_layout, null);
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    if (convertView == null) {
        mInflater = context.getLayoutInflater();
        convertView = mInflater.inflate(R.layout.delete_campaign_row_layout, null);
    }       

    merchantNameView = (TextView) convertView.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) convertView.findViewById(R.id.deleteButton);
    selectForDelete = (CheckBox) convertView.findViewById(R.id.deleteCheckBox);     

    merchantNameView.setText(c.getString(c.getColumnIndex("merchantName")));

    final int  rowID = c.getInt(c.getColumnIndex("_id"));       
    //final long rowID = mListView.getSelectedItemId();

    if (checked[position] == 0) {
        selectForDelete.setChecked(false);
    } else {
        selectForDelete.setChecked(true);
    }

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
               // Make deleteButton appear 
               RelativeLayout ll = (RelativeLayout) buttonView.getParent();
               deleteButton = (Button) ll.findViewById(R.id.deleteButton);
               checked[position] = 1;
               deleteButton.setVisibility(0);
            }
            else {
                //Hide deleteButton
                RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                checked[position] = 1;
                deleteButton.setVisibility(8);
            }
        }
    });

    deleteButton.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID);
                c.requery();
                notifyDataSetChanged();
                initializeChecked();  // re-set the checked array
            }                           
        }
    });

    return convertView;     
}

public void initializeChecked() {
    checked = new int[c.getCount()];
    int i = 0;
    while (i < c.getCount()) {
        checked[i] = 0;
        i++;
    }
} 
```

}

日志猫：

```
05-12 00:36:23.232: W/KeyCharacterMap(15777): Can't open keycharmap file
05-12 00:36:23.232: W/KeyCharacterMap(15777): Error loading keycharmap file '/system/usr/keychars/synaptics-rmi-touchscreen.kcm.bin'. hw.keyboards.65537.devname='synaptics-rmi-touchscreen'
05-12 00:36:23.232: I/KeyCharacterMap(15777): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-12 00:36:23.332: D/WindowManagerImpl(15777): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@4053e328
05-12 00:36:23.903: D/View(15777): onTouchEvent: viewFlags: 0x18005001
05-12 00:36:23.903: D/View(15777): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
05-12 00:36:23.913: D/WindowManagerImpl(15777): finishRemoveViewLocked, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@4053e328
05-12 00:36:23.973: D/Database(15777): dbopen(): path = /data/data/com.roardog.FidelrBasic/databases/Fidelr_memory, flag = 6, file size = 5120
05-12 00:36:23.973: D/Database(15777): dbopen(): path = /data/data/com.roardog.FidelrBasic/databases/Fidelr_memory, mode: wal, disk free size: 253 M, handle: 0x387968
05-12 00:36:23.983: D/ATRecorder(15777): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40550268
05-12 00:36:23.983: D/WindowManagerImpl(15777): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40548d90
05-12 00:36:23.993: D/AndroidRuntime(15777): Shutting down VM
05-12 00:36:23.993: W/dalvikvm(15777): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
05-12 00:36:24.023: E/AndroidRuntime(15777): FATAL EXCEPTION: main
05-12 00:36:24.023: E/AndroidRuntime(15777): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 3
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:585)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at com.roardog.FidelrBasic.DeleteCampaignCustomCursorAdapater.getView(DeleteCampaignCustomCursorAdapater.java:125)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.AbsListView.obtainView(AbsListView.java:1449)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1265)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.ListView.onMeasure(ListView.java:1128)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.View.measure(View.java:8553)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.View.measure(View.java:8553)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.View.measure(View.java:8553)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.View.measure(View.java:8553)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.ViewRoot.performTraversals(ViewRoot.java:915)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.os.Looper.loop(Looper.java:150)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at android.app.ActivityThread.main(ActivityThread.java:4385)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at java.lang.reflect.Method.invokeNative(Native Method)
05-12 00:36:24.023: E/AndroidRuntime(15777):    at java.lang.reflect.Method.invoke(Method.java:507) 
```

D/Process(15777): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:854) 05-12 00:36:25.314: D/Process(15777): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:851 ) 05-12 00:36:25.314: D/Process(15777): dalvik.system.NativeStart.main(Native Method) 05-12 00:36:25.314: I/Process(15777): 发送信号。PID：15777 SIG：9

**最终工作解决方案**

```
public class DeleteCampaignCustomCursorAdapater extends CursorAdapter {

protected static final String TAG = null;
DatabaseHelper myDbHelper;
protected SQLiteDatabase db;
private final Activity context;

private LayoutInflater mInflater;
protected ListView mListView;

private Cursor c;
public static int[] checked;

TextView merchantNameView;
Button deleteButton;
CheckBox selectForDelete;
//ImageView moveButton;

public DeleteCampaignCustomCursorAdapater(Context context, Cursor c) {
    super(context, c);
    this.context = (Activity) context;
    mInflater = LayoutInflater.from(context);
    this.c = c;
    c.moveToFirst();
    initializeChecked();
}

@Override
public void bindView(View view, Context context, final Cursor cursor) {     

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(R.layout.delete_campaign_row_layout, null);
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    c.moveToPosition(position);

    myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    if (convertView == null) {
        mInflater = context.getLayoutInflater();
        convertView = mInflater.inflate(R.layout.delete_campaign_row_layout, null);
    }       

    merchantNameView = (TextView) convertView.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) convertView.findViewById(R.id.deleteButton);
    selectForDelete = (CheckBox) convertView.findViewById(R.id.deleteCheckBox);     

    merchantNameView.setText(c.getString(c.getColumnIndex("merchantName")));

    final int  rowID = c.getInt(c.getColumnIndex("_id"));

    if (checked[position] == 0) {
        selectForDelete.setChecked(false);
    } else {
        selectForDelete.setChecked(true);
    }

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
               // Make deleteButton appear 
               RelativeLayout ll = (RelativeLayout) buttonView.getParent();
               deleteButton = (Button) ll.findViewById(R.id.deleteButton);
               checked[position] = 1;
               deleteButton.setVisibility(0);
            }
            else {
                //Hide deleteButton
                RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                //checked[position] = 1;
                deleteButton.setVisibility(8);
            }
        }
    });

    deleteButton.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID); //Call deleteRecord on selected row
                c.requery(); //requery the cursor
                notifyDataSetChanged(); //notify the view the data set has changed 
                initializeChecked();  // re-set the checked array
            }                           
        }
    });

    return convertView;     
}

public void initializeChecked() {
    checked = new int[c.getCount()];
    int i = 0;
    while (i < c.getCount()) {
        checked[i] = 0;
        i++;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T14:52:03.517

之前添加`c.moveToFirst();`到您的构造函数中`initializeChecked();`。

**编辑**

在您的 getView 中添加以下内容的第一件事：

```
c.moveToPosition(position); 
```

# jquery - 从 DOM 选择中排除元素及其后代

> ID：10553392
> 
> 赞同：2
> 
> 时间：2012-05-11T14:32:16.723
> 
> 标签：jquery, css, dom, jquery-selectors

如何使用 CSS 或 jQuery 选择除给定元素及其后代之外的所有 DOM 元素？

假设给定的元素是#test

`$('#test *')`将返回所有#test 后代

- 但 -

`$('* :not(#test))')`或`$('* :not(#test *))')`或`$('*').not('#test')`或`$('*').not('#test *')`

不工作！

**编辑：**`#test`我想在点击页面上任何地方但区域 时触发点击事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:50:23.430

> 我想在点击页面上除区域之外的任何位置时触发点击事件`#test`。

然后你不需要将点击绑定到每个元素......只需绑定到文档并检查它是否`$('#test, #test *')`被点击，如果是，中止点击处理程序：

```
$(document).on('click', function(e) {
    if ($(e.target).is('#test, #test *')) {
        return;
    }

    // Do stuff
}); 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/hLEYn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:04:07.317

在您的点击事件中检查点击是否在：http `#test`: [//jsfiddle.net/QDNCS/](http://jsfiddle.net/QDNCS/)

```
$(document).click(function(e) {
    if (!$('#test')[0].contains(e.target)) {
        alert('Yay!');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:46:51.187

系统重启已关闭：

```
$('*').not('#test, #test *') 
```

尽管如此，我不会将事件绑定到该选择器——它可能会选择太多元素并使您的站点运行缓慢。如果发生这种情况，请考虑改用 jquery `live()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:47:37.427

我不知道确切的 jQuery 代码，但这个 jQuery 脚本似乎是您正在寻找的。

[http://benalman.com/projects/jquery-outside-events-plugin/](http://benalman.com/projects/jquery-outside-events-plugin/)

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T15:00:48.967

您可以结合 @The System Restart 和 @topp 的答案来获得请求的行为：

```
$(document).on('click', function (e) {
    if ($(this).is('#test, #test *')) {
        return;
    }
} 
```

注意我没有测试过这段代码。

# pyqt - PyQt 发布与调试

> ID：10553393
> 
> 赞同：1
> 
> 时间：2012-05-11T14:32:17.133
> 
> 标签：pyqt, pyqt4, cx-freeze

我有一个系统，写在 PyQt4 上。它主要是在 linux (ubuntu) 系统下，在 Eric IDE 中开发和调试的，一切正常。最后一项任务是为表格单元格创建嵌套编辑器。所以，我做到了，它在 ubuntu 中也很好看。我也在 Windows 7 x64 下运行它，并且行为是相同的。

然而，在 Windows 2000 中使用 cx_Freeze 制作可执行文件后（这很奇怪，但这个环境是在我之前配置的），编辑器的行为变得出乎意料。打开编辑器后，第一个单元格有'role == Qt.EditRole'，如果不关闭整个编辑器，几乎不可能在那里提交任何更改。另一个问题是关于“确定”按钮 - 它会关闭编辑器窗口，但也不会在其中提交任何更改，并且您无法在不更改活动单元格的情况下再次调用它（但也许我只是忘记在这里发出一些信号，所以这不是这里的主要错误）。

所以我的问题 - 我应该在哪里寻找这些问题的原因。我是 qt 的新手，也许这是正常行为，只是我的代码错误？或者原因是在不同的环境中（python 2.7、最新的 pyqt 与 python 2.6 和一些较旧的 pyqt）。或者是cx_Freeze的影响……也许是其他一些方向？

对不起，我的英文太长了 :) 希望很快能得到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:06:15.993

我认为 Windows 2000 服务器上的 Qt 或 PyQt 可能已过时或损坏。

所以如果可能的话，把cx_freeze相关的代码带到你的本地电脑上测试一下。

如果它解决了问题，您可以在 windows 2000 服务器上升级或重新安装 Qt。

# c# - 价值在页面生命周期中发生变化？

> ID：10553394
> 
> 赞同：0
> 
> 时间：2012-05-11T14:32:23.973
> 
> 标签：c#, asp.net

我正在尝试制作一个将生成 2 个数字的简单网站，然后用户需要回答将其中 2 个数字相加的正确结果。

这是我的 ASPX：

```
<div id="questionContainer">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>  
        <div id="firstNumber">
            <%=firstNum %>
        </div>
        <div id="operator">
            <%=operatorString %>
        </div>
        <div id="secondNumber">
           <%=secondNum %>
        </div>
        <div id="answerWrapper">

                    <input type="text" id="answer" name="answer" placeholder="your answer" />

            <asp:Button runat="server" ID="submit" name="submit" OnClick="AnswerQuestion" Text="Answer" />
              <input type="hidden" name="op" id="op" value="1" />
            <div id="error">
                <%=textForUser %>
            </div>
            </ContentTemplate>
            </asp:UpdatePanel>
        </div> 
```

这是代码隐藏：

```
protected static int firstNum;
    protected  static int secondNum;
    protected bool operatorTrueOrFalse = true;
    protected string operatorString = "+";
    protected GameLogic gl;
    protected static int answer;
    protected bool isItTrue;
    protected int userAnswer;
    protected string textForUser ="hello";
    protected string op;

    protected void Page_Load(object sender, EventArgs e)
    {

        if (Page.IsPostBack || op == "1") // if solved X or null.
        {
            gl = new GameLogic();
            firstNum = gl.GenerateNumber(4);

            secondNum = gl.GenerateNumber(4);

            answer = gl.SolveFor(firstNum, secondNum, operatorString);
        }

    }

    public void AnswerQuestion(object sender, EventArgs e)
    {
        if (Request["answer"] != null)
        {
            userAnswer = int.Parse(Request["answer"]);

        }
        else
        {
            textForUser = "You need to type something";
        }

        if (answer == userAnswer)
        { // user has answered correctly.
            isItTrue = true;
            textForUser = "very good";
            op = "1";
        }
        else
        {// user has answered in - correctly.
            isItTrue = false;
            textForUser = "you are wrong";
            op = "0";
        }
    } 
```

问题是我注意到每次我尝试在文本框中回答问题时，数字都会改变。就像我没有回答正确的问题一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:37:41.957

问题是您使用的是**静态变量**。这些**在所有请求中共享**。不要为此目的使用静态变量，而是将它们存储在其他地方（fe Session、ViewState、Hiddenfield、...）。

[在 ASP.NET 应用程序中管理持久用户状态的九个选项](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

*   应用
*   饼干
*   表单发布/隐藏表单域
*   请求参数
*   会议
*   ASP.NET 中的新状态容器
*   缓存
*   语境
*   视图状态
*   Web.config 和 Machine.config 文件

...当然还有数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:38:02.067

您似乎在回发时重新生成了一个新的号码对。基本上，如果您打算重复停留在同一页面并简单地发布答案，那么逻辑应该是这样的：

```
1) Is this a postback?
   -> No: Generate a new value and store it in ViewState. Hold onto this value.
   -> Yes: Do we have a stored answer value in ViewState?
         -> No: Error? Something has gone wrong.
         -> Yes: Fetch that Value and hold on to it
2) On Button Click, Is the answer you entered the same as the generated value?
   -> No: Show Error
   -> Yes: Show Success, Then generate a new value and store it in ViewState 
```

您的算法似乎仅在回发期间和每次回发时才生成新的答案对。

# jquery - 从 jquery 中的特定分隔符中按名称属性选择元素

> ID：10553397
> 
> 赞同：0
> 
> 时间：2012-05-11T14:32:34.530
> 
> 标签：jquery, html

我想选择一个具有 name="load" 我知道我可以通过 $('[name=load]'); 在 jquery 中，但我想选择名称 load 的元素仅属于具有 id="usernameIn" 的特定分隔符

我将如何只选择具有名称负载的分隔器的孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:35:00.463

尝试这个：

```
$('#usernameIn [name=load]'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:37:39.803

尝试使用[`.find`](http://api.jquery.com/find/)

```
$('#usernameIn').find('[name=load]'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:41:25.480

如果要获取 usernameIn 中包含的元素：

```
$('#usernameIn [name=load]'); 
```

如果您想要 usernameIn 的直接子代：

```
$('#usernameIn>[name=load]'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:46:28.137

让元素驻留在其中`#usernameIn`

```
 $('[name=load]', '#usernameIn'); 
```

# codeigniter - Codeigniter 路由到 href id

> ID：10553399
> 
> 赞同：0
> 
> 时间：2012-05-11T14:32:37.900
> 
> 标签：codeigniter, url, hyperlink

我做了一个单页设计，并希望将 somesite.com/contact 路由到 somesite.com/index.php#contact。我正在使用 href id 和 div id。但我做的所有路线似乎都没有奏效。

例子：

*   $route['contact'] = "pagescontroller/index#contact";

*   $route['contact'] = "base_url('#contact')";

我怎样才能使这项工作？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:51:20.253

您将需要使用`#`以便浏览器知道您将转到页面的一部分。如果你真的想删除它，你可以将它用作你用来显示你的页面的控制器方法的参数，并使用 javascript 去你页面上的那个特定的 id。
我不会这样做，因为每次单击链接时都会重新加载页面。（除非您也使用 javascript 来抑制它并转到相关 ID。）

但是，您可以在 .htaccess 中使用 mod_rewrite 从您的 url 中删除 index.php。所以你的网址看起来像[http://example.com/#about](http://example.com/#about)

我的 codeigniter .htaccess 文件是这样的：

```
<IfModule mod_rewrite.c>

    RewriteEngine On

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

# ruby-on-rails - 大虾pdf表格生成太早打破新页面？

> ID：10553401
> 
> 赞同：1
> 
> 时间：2012-05-11T14:32:44.310
> 
> 标签：ruby-on-rails, pdf, prawn

我正在使用 Prawn 生成 pdf 并在表格中显示数据。我的问题是，如果一行将分页符变大并将这一整行添加到新页面上。在它下面有连续的行。因此，我在某些页面下留下了很大的空白。就像列出了 5 行，然后是一个大的空白空间 - 分页符 - 在新页面上显示大行（这在之前的页面上不完全适合）+ 继续显示其他行。

```
Prawn::Document.generate("#{filename}", :page_layout => :portrait) do
#table
  table_rows_count = statement_table.size
  table(statement_table) do |s_table|
  all the code to format table contents
end 
```

我想要做的是，当它到达该页面的末尾时，让该行打破一个新页面，然后在另一页上显示该行的其余部分。即在创建新页面之前充分利用特定页面上的可用空间。

我已经尝试对整个表进行分组。但这不起作用 - 虾不会允许它。

有任何想法吗？我非常感谢您的帮助。

# java - 我是否需要在使用 NewIntArray 创建的数组上调用 ReleaseIntArrayElements？

> ID：10553405
> 
> 赞同：11
> 
> 时间：2012-05-11T14:32:57.637
> 
> 标签：java, java-native-interface

我有一个在位图上做一些工作的本机方法。在方法内部，我通过一个方法调用获取图像数据，该方法调用将数据写入`jintArray`我创建的参数`NewIntArray`：

`jintArray pixels = env->NewIntArray(width * height);`

我不需要将此数组返回给调用 Java 代码 - 它仅用于在此方法中进行处理。我需要打电话`ReleaseIntArrayElements`吗`pixels`？如果是这样，我应该为`elems`参数传递什么，因为我不需要将它复制回 Java 数组？

`void (JNICALL *ReleaseIntArrayElements) (JNIEnv *env, jintArray array, jint *elems, jint mode);`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T23:53:57.477

你不需要对它做任何事情。它是一个本地引用，当你的 JNI 方法退出时它会被清除。正如爱德华·汤普森（Edward Thompson）在上面暗示的那样，`ReleaseIntArrayElements()`它的逆函数是`GetIntArrayElements().`它没有其他功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T09:02:19.940

您只需要发布参考：

```
jintArray pixels = env->NewIntArray(width * height);
...
env->DeleteLocalRef(pixels) 
```

# joomla - Joomla RSS mod_feed 发布日期

> ID：10553407
> 
> 赞同：2
> 
> 时间：2012-05-11T14:32:58.950
> 
> 标签：joomla, joomla1.5, joomla-extensions

有没有办法使用 mod_feed 显示 RSSfeed 的 PubDate？如果没有办法做到这一点，是否有任何扩展可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:26:27.837

核心模块没有显示它，但数据会在那里并且可以使用模板覆盖显示。在此处阅读有关 Joomla 中覆盖如何工作的更多信息：http: [//docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

现在获取日期有点棘手，因为它没有存储为 PubDate 属性。相反，它存储为 JDate 对象。您可以像这样访问 JDate 对象的日期属性：

```
$feed[$i]->publishedDate->date 
```

关于 JDate 的文档可以在这里找到：http: [//docs.joomla.org/JDate/11.1](http://docs.joomla.org/JDate/11.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T01:53:54.380

在 (2.5) /modules/mod_feed/tmpl/default.php 的 $j 循环中回显以下内容（建议您在当前模板中覆盖）：

```
foreach ($feed->items as $key => $row) {
    $pubDate[$key]  = $row[feed->data['child']['']['rss'][0]['child']['']['channel'][0]['child']['']['item'][$j]['child']['']['pubDate'][0]['data']];
}
print_r($pubDate); 
```

# jquery - 文本字段 jQuery 验证和自动完成

> ID：10553409
> 
> 赞同：1
> 
> 时间：2012-05-11T14:33:12.720
> 
> 标签：jquery, validation, autocomplete

我对 jQuery 验证插件有疑问。我有一个带有文本字段的表单，其中有一个隐藏的文本字段，一个用于描述，另一个用于 ID。为了验证文本字段，我们必须有一个 ID 和一个描述。为了帮助用户，我们有一个自动完成插件。当我输入正确的建议并输入时，它工作正常。但是当我点击自动完成的菜单时，会出现错误标签。如果我在文本字段和外部单击，错误标签就会消失。

我尝试自定义 onfocusout 方法，但是我测试的所有方法都不起作用。出现同样的问题。

看我的配置插件：

```
 $(document).ready(function() 
{
jQuery.validator.addMethod("city_id", function(value, element) 
{
    if ( $("#city_id").val() != '' ) {
    return true;
}
else {
    return false;
}
})
$("#recherche_target").validate(
{
  rules: 
  {
   city_string: "required city_id"
  },
  messages: 
  {
   city_string: "Veuillez entrer une ville valide."
  }
}) 
```

有人对如何解决这个问题有想法吗？

# excel - 根据列值在Excel VBA中将行从工作表复制到工作表

> ID：10553412
> 
> 赞同：0
> 
> 时间：2012-05-11T14:33:43.593
> 
> 标签：excel, vba

```
Dim LSearchRow As Integer
Dim LCopyToRow As Integer
Dim wks As Worksheet
On Error GoTo Err_Execute

For Each wks In Worksheets
    ThisWorkbook.Worksheets.Add After:=Worksheets(Worksheets.Count)
    Set wksCopyTo = ActiveSheet
    wks.Rows(3).EntireRow.Copy wksCopyTo.Rows(3)

    'Start search in row 4
    LSearchRow = 4
    'Start copying data to row 2 in Sheet2 (row counter variable)
    LCopyToRow = 4

    While Len(wks.Range("A" & CStr(LSearchRow)).Value) > 0
        'If value in column E = "Mail Box", copy entire row to Sheet2
        If wks.Range("AB" & CStr(LSearchRow)).Value = "Yes" And wks.Range("AK" & CStr(LSearchRow)).Value = "Yes" And wks.Range("BB" & CStr(LSearchRow)).Value = "Y" Then
            'Select row in Sheet1 to copy
            wks.Rows(CStr(LSearchRow) & ":" & CStr(LSearchRow)).Select
            Selection.Copy
            MsgBox "Copying Row"
            'Paste row into Sheet2 in next row
            wksCopyTo.Select
            wksCopyTo.Rows(CStr(LCopyToRow) & ":" & CStr(LCopyToRow)).Select
            wksCopyTo.Paste
            MsgBox "Pasting Row"
            'Move counter to next row
            LCopyToRow = LCopyToRow + 1
            'Go back to Sheet1 to continue searching
            wks.Select
        End If
        LSearchRow = LSearchRow + 1
    Wend

    'Position on cell A3
    Application.CutCopyMode = False
    Range("A3").Select
    MsgBox "All matching data has been copied."
Next wks

Exit Sub
Err_Execute:
    MsgBox "An error occurred." 
```

你好

我有上面的代码，它基于其他地方给出的代码。在复制满足 if 语句中给定条件的行时，代码已经在我需要它的地方进行了调整，以便为每个现有工作表创建一个新工作表。我遇到的问题是：

1.  excel是否允许您在运行代码之前首先找出所有存在的工作表，这样您就不会循环往复？
2.  我在处理一个工作表时给出的代码，在一段时间后不会执行，我不明白为什么？
3.  当我在一个工作表上运行它时，它在 32,000 行后崩溃

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:55:54.593

我会一一回答你的问题：

1.  是的。您可以使用类似`ThisWorkbook.Worksheets.Count`返回当前工作簿拥有的工作表的数量。然而，循环工作表的最佳方法是遍历`Worksheets`集合：

    ```
    Dim wks As Worksheet

    For Each wks In ThisWorkbook.Worksheets
        'Do something
        '...
    Next wks

    Set wks = Nothing 
    ```

2.  您永远不会退出循环（如果 A 列中有 >32,000 行数据），当然直到您收到溢出错误（整数只能达到 32,767 +/-）。

3.  请参阅第 2 点。您正在循环超出整数的限制。将数据类型更改为 Long 和/或，如第 2 点所述，在某个时候退出循环。

# iphone - iPhone 刷新另一个类的视图

> ID：10553413
> 
> 赞同：1
> 
> 时间：2012-05-11T14:33:49.313
> 
> 标签：iphone, xcode

我希望能够刷新另一个类的视图，但我尝试过的任何方法都不起作用。我的应用程序是一个设置了多个选项卡的选项卡式应用程序。我的 ViewController1 类中有一个名为 refresh 的方法，如下所示

```
-(void)TestMe{

     NSString *filePath = [[NSBundle mainBundle] pathForResource:@"widgjson" ofType:@"json"];  
     NSData *myData = [NSData dataWithContentsOfFile:filePath];  

     NSString *responseString = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];

     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     NSString *docDir = [paths objectAtIndex: 0];
     NSString *docFile = [docDir stringByAppendingPathComponent: @"json.txt"];
     [responseString writeToFile:docFile atomically:NO encoding:NSUTF8StringEncoding error:Nil];

     [self loadView];
     [self viewDidLoad];
} 
```

这工作正常。当应用程序第一次加载时，它会加载一个不同的 json，然后当我单击此按钮时，它会加载一个新的 JSON，然后更新视图。这只是暂时测试刷新。但是，如果我尝试从另一个类或 AppDelegates ApplicationDidEnterForeground 方法调用此方法，则不会发生任何事情。我试着这样称呼它

```
 -(void)TestMe{

    ViewController1 *vc = [[ViewController1 alloc] init];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"widgjson" ofType:@"json"];  
    NSData *myData = [NSData dataWithContentsOfFile:filePath];  

    NSString *responseString = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex: 0];
    NSString *docFile = [docDir stringByAppendingPathComponent: @"json.txt"];
    [responseString writeToFile:docFile atomically:NO encoding:NSUTF8StringEncoding error:Nil];

    [vc loadView];
    [vc viewDidLoad];

} 
```

那么为什么此方法不适用于任何其他类。我想要的只是能够从另一个类或应用程序加载时刷新视图，但似乎找不到任何有用的东西。

如果有人能指出我正确的方向，将不胜感激！

编辑：更新澄清

好吧，我暂时做的不喜欢的就是放这个

```
exit(0); 
```

在 AppDelegates ApplicationDidEnterBackground 内部。这在一定程度上可行，但不是理想的解决方案。

我希望发生的是，当再次打开应用程序时，AppDelegate 会再次运行，从而设置选项卡。从服务器提取的 JSON 会影响选项卡的顺序，这就是为什么我需要 AppDelegates ApplicationDidFinishLaunching 方法重新加载自身的原因。

另外我想知道我可以从应用程序的另一个类中做到这一点。第一次加载我的应用程序时，它会询问用户的电话号码，该号码会发送到服务器，然后服务器会生成一个 PIN。完成后，我希望 AppDelegate 方法加载并开始设置选项卡和顺序等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:29:57.060

为了防止您的应用程序在后台运行（以及在您退出和重新进入时强制重新加载），您可以在 info.plist中设置`UIApplicationExitsOnSuspend`密钥。`YES`

但是，这可能有点激烈。

您当前用于从应用程序委托刷新的代码是一个非启动代码，因为您正在创建视图控制器的一个新实例，而不是与屏幕上的一个实例对话。

出于这个原因，最好不要让您的应用程序委托人参与该过程。

相反，您的视图控制器可以将自己注册为[`UIApplicationDidBecomeActive`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)通知的观察者，并对自己做任何需要的事情。您通常会在 viewDidLoad 上注册此通知，并在 viewDidUnload 上取消注册（因为根据定义，如果您已卸载视图，则无需在应用程序重新启动时刷新它！）。

您将按如下方式注册（在此处使用块，因为它们是未来）：

声明一个 id 类型的 ivar 来保存观察者对象，我们`becomeActiveObserver`在这种情况下调用它。所以，无论你在哪里声明你的 ivars，添加`id becomeActiveObserver`. 然后，在 viewDidLoad 中：

```
becomeActiveObserver = [[NSNotificationCenter defaultCenter] 
addObserverForName:UIApplicationDidBecomeActive 
object:nil 
queue: nil 
usingBlock:^(NSNotification *note){ 
    //put your reloading code in here
    [self TestMe];
}]; 
```

并在 viewDidUnload 中像这样删除：

```
[[NSNotificationCenter defaultCenter] removeObserver:becomeActiveObserver; 
```

您可以按照类似的模式从应用程序中的任何其他位置获取通知（您自己的或系统的）。这是一个比通过应用程序委托传递所有内容更好的设计，因为它涉及更松散的耦合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:57:25.847

我猜clickMe是一个按钮的动作。如果你想在启动时刷新视图控制器然后在视图控制器中添加一个类似于clickme的函数或刷新视图的任何函数并从applicationWillEnterForeground方法调用它，或者你可以试试这个： -

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
{     
NSLog(@"app will enter foreground");     
[viewController clickMe:NULL]; 
} 
```

如果您的应用程序需要，您可以更改 appDelegate 的 applicationWillEnterForeground 方法中的文件。

# javascript - 在 tumblr 博客上隐藏主页提要

> ID：10553416
> 
> 赞同：1
> 
> 时间：2012-05-11T14:34:17.160
> 
> 标签：javascript, html, css, tumblr

我最近发现了一个类似于我的问题的[答案。](https://stackoverflow.com/a/9043594/1388140)

有没有办法做相反的事情？我想在除主页之外的所有地方显示帖子。我试图扭转这段代码并使用：

```
<script type="text/javascript">
window.onload=showsplashbox();
function showsplashbox() {
    //alert('location identified as ' + location.href);
if (location.href == 'http://site.tumblr.com/' || location.href == 'http://site.tumblr.com') {
    //alert('location match, show the block');
document.getElementById('splashbox').style.display='none';
    }
}
</script> 
```

接着

```
<div id="splashbox" style="display:none"> 
```

但这似乎不起作用。我取消了警报的注释，一切都正确匹配，但由于某种原因，没有应用该样式。

我也尝试了以下方法无济于事：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script language="text/javascript">
    $(function(){
      if (location.href == 'http://site.tumblr.com/' || location.href == 'http://site.tumblr.com') {
            $('#splashbox').hide();
      } else {
            $('#splashbox').show();
      }
 });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:45:28.490

`style="display:none"`从您的 div 标签中删除。飞溅框将开始隐藏在每个页面上，但您的 JavaScript 希望它开始显示，然后在必要时将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:48:45.663

您想在主页上隐藏启动画面。并希望在其他页面上显示每个位置。

```
<div id="splashbox" style="display:block"></div> 
```

这将显示在每个地方。您的脚本会将其隐藏在主页上。

# html - 如何使用 HTML5 绘制弯曲的虚线箭头并为其设置动画

> ID：10553419
> 
> 赞同：3
> 
> 时间：2012-05-11T14:34:28.047
> 
> 标签：html, html5-canvas

我的目标是在 html5 画布上创建一个像这样的弯曲箭头：

![弯曲的虚线箭头](../Images/85a4c0e29619fd54ece23e7673d75c7e.png)

我找到了一些关于如何画线的资源，但它们似乎都不起作用。我还找到了相关的[stackoverflow 帖子](https://stackoverflow.com/questions/6576827/html-canvas-draw-curved-arrows)。

另外，是否可以在悬停时对其进行动画处理以扩展箭头，也许使用弹性效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T00:50:04.023

Raphael 和 canvas 在以纸笔风格绘制线条时都有一些限制。我发现模拟这种事情的最佳方法是将 1 像素路径迭代地转换为目标路径，如下面的小提琴：http: [//jsfiddle.net/zPRha/31/](http://jsfiddle.net/zPRha/31/) 只需稍做工作，您就可以计算沿路径的最后两点之间的角度，并转换/旋转箭头路径以匹配绘制的线。这不是一个理想的解决方案，但它会起作用。

Raphael 内置的悬停支持使缩放/取消缩放非常容易。我的理解是，这样的处理在本机使用画布会更加迟钝，尽管我确信一些画布库已经自动消除了这个问题。

这是一个更新的小提琴，可选择支持箭头：http: [//jsfiddle.net/kevindivdbyzero/JPqXF/](http://jsfiddle.net/kevindivdbyzero/JPqXF/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-11T14:48:54.273

我认为你应该使用带有 CSS3 过渡的 SVG 来做这种事情。

# python - GAE DataStore：查询现有的 user_id 字段

> ID：10553420
> 
> 赞同：1
> 
> 时间：2012-05-11T14:34:30.753
> 
> 标签：python, google-app-engine, google-cloud-datastore, google-account

我已经保存了 user_id() 字段，现在我想查询该用户的数据存储。我将如何实现这一目标？

```
#Something like
user = db.Query(MyUser).filter('user.user_id() = ', 1234).fetch(limit=1) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T14:49:52.100

您应该创建一个单独的字符串属性来存储用户 ID，然后进行查询。UserProperty 类充满了陷阱，最好避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:09:44.060

如果您要搜索的是实际的实体 ID，那么您可以使用该`get_by_id`方法查询它

```
user = MyUser.get_by_id(1234) 
```

请注意，如果您使用父级创建它，您也需要将其传递给`get_by_id()`函数。

```
user = MyUser.get_by_id(1234, parent=parent) 
```

文档： [https ://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_id](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_id)

# c# - 如何用正则表达式解析字符串

> ID：10553422
> 
> 赞同：0
> 
> 时间：2012-05-11T14:34:31.747
> 
> 标签：c#

如何从此文本中获取 List()：

```
For the iPhone do the following:<ul><li>Go to AppStore</li><li>Search by him</li><li>Download</li></ul> 
```

应该包括：去 AppStore，由他搜索，下载

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:36:36.433

将字符串加载到[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)中，然后选择所有`li`元素内部文本。

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml("following:<ul><li>Go to AppStore</li><li>Search by him</li><li>Download</li></ul>");

var uls = doc.DocumentNode.Descendants("li").Select(d => d.InnerText);
foreach (var ul in uls)
{
    Console.WriteLine(ul);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:38:04.123

包装一个 XML 根元素并使用 LINQ to XML：

```
var xml = "For the iPhone do the following:<ul><li>Go to AppStore</li><li>Search by him</li><li>Download</li></ul>";
xml = "<r>"+xml+"</r>"; 
var ele = XElement.Parse(xml);  
var lists = ele.Descendants("li").Select(e => e.Value).ToList(); 
```

返回`lists`：

```
Go to AppStore 
Search by him 
Download 
```

# ruby-on-rails - simple_format 和 2+ 换行符（\n）

> ID：10553433
> 
> 赞同：4
> 
> 时间：2012-05-11T14:34:58.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 rails 并且需要显示文本，连续有 3 个或更多换行符。

我找到`simple_format`了方法，但它同样适用于 2,3,4,... 符号

> 两个或多个连续的换行符(\n\n) 被视为一个段落并包裹在 < p > 标记中。

例如，我的文字是

```
1.9.3p0 :015 > Article.last.text
=> "1\n\n2\n\n\n\n33" 
```

当我这样做时，我`<%= simple_format Article.last.text.html_safe %>`会产生这样的看法：

```
<p>1</p>
<p>2</p>
# but i need <br/> or smth else there
<p>3</p> 
```

欢迎其他解决方案，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:33:44.850

我可能仍然缺少一些东西，但为什么不直接使用`string.gsub(a, b)`：

```
"1\n\n2\n\n\n\n33".gsub("\n", "<br />").html_safe # => "1<br/><br/>2<br/><br/><br/><br/>33" 
```

当然，您也可以将前一行传递给以`simple_format`将该行包装到`<p>`标签中。

# c# - 如何将参数传递给实体框架中的 DbSet.SqlQuery 方法

> ID：10553436
> 
> 赞同：18
> 
> 时间：2012-05-11T14:35:01.300
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在尝试在带有一些参数的实体框架中执行 RAW SQL 语句。我使用的方法来自[DbSet.SqlQuery](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.sqlquery(v=vs.103).aspx)

我对如何构造 params 对象数组感到困惑：params object[] 参数

这是我的代码块：

```
public ActionResult APILocation(string lat, string lng)
 {
    string SQL = "select * from (select Distance = ((ACOS(SIN(@lat * PI() / 180) * SIN(lat * PI() / 180) + COS(@lat * PI() / 180) * COS(lat * PI() / 180) * COS((@lng - Long) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) from dbo.Stores) t where  Distance < 10 order by Distance asc";
            ObjectParameter latParam = new ObjectParameter("lat", lat);
            ObjectParameter lngParam = new ObjectParameter("lng", lng);

            object[] parameters = new object[] { latParam, lngParam };

            var stores = db.Stores.SqlQuery(SQL, parameters);

            return Json(stores, JsonRequestBehavior.AllowGet);
        } 
```

我尝试创建 ObjectParameter 并将其放入对象数组中，但这不起作用。有人可以提供一个关于我应该如何构造 params object[] 参数的例子吗

谢谢！跳蚤

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T17:00:52.083

我最终清理了我的方法的参数，因此它们与我不太清楚的数据库列不同。ObjectParameter 不支持 @ 符号，因此不起作用。我最终得到了以下解决方案：

```
public ActionResult APILocation(string latitude, string longitude)
{

 string SQL = "select * from (select *, Distance = ((ACOS(SIN({0} * PI() / 180) * SIN(lat * PI() / 180) + COS({0} * PI() / 180) * COS(lat * PI() / 180) * COS(({1} - long) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) from dbo.Parish) t where Distance < 10 order by Distance asc";

     SqlParameter latParam = new SqlParameter("lat", latitude);
     SqlParameter lngParam = new SqlParameter("long", longitude);
     object[] parameters = new object[] { latParam , lngParam };

     var stores = db.Store.SqlQuery(SQL, parameters);

      return Json(stores, JsonRequestBehavior.AllowGet);

} 
```

我还必须在我的子选择中选择 * 因为它试图映射到我的实体，因为我只返回一列而不是所有内容。事实证明，这个解决方案对我有用！

最终，整个 object[] 参数可以这样完成：

```
 SqlParameter latParam = new SqlParameter("latitude", latitude);
 SqlParameter lngParam = new SqlParameter("longitude", longitude);
 object[] parameters = new object[] { latitude, longitude }; 
```

感谢 hwcverwe 的帮助。

跳蚤

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-18T23:02:38.250

上面的答案是正确的，但是由于`SqlQuery`is 的签名`SqlQuery(sql:String, params object[] parameters)`，您可以简化代码并通过使用以下方式给它更自然的感觉：

```
context.SqlQuery(sql, latParam, lngPara); 
```

这将是完全合法的，而不必先排列它。

要在 sql 查询中引用参数值，请分别使用`@p0`和`@p1`作为值`latParam`和`lngPara`。

# android - 如何在android的listview中实现分页？

> ID：10553437
> 
> 赞同：1
> 
> 时间：2012-05-11T14:35:07.977
> 
> 标签：android, listview

我想制作一个应用程序，其中有 100 个 uri 的图像保存在数据库中。现在我希望整个数据不会从数据库中获取，只显示在列表视图中。我希望我只获取列表的当前视图屏幕的数据，因此我滚动列表的下一个项目将获取下一个数据项目，因此应用程序在列表视图中显示数据不会很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:42:49.350

冗长的列表视图不会让您的滚动变慢，只需一次获取所有 100 个 uri 并填写适配器；它会正常工作...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:50:13.863

下面有一个滚动监听器：

```
class EndlessScrollListener implements OnScrollListener{
    private static final String TAG = "CacheToDBActivity.EndlessScrollListener";
    private boolean loading = true;

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) {
        if (!(loading) && (totalItemCount - visibleItemCount) <= (firstVisibleItem)) {
            Log.d(TAG, "Load Next Page!");
            loading = true;
        }
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {}

    public boolean isLoading() {
        return loading;
    }

    public void setLoading(boolean loading) {
        this.loading = loading;
    }

} 
```

您可以实例化一个 EndlessScrollListener 并将您的列表视图的 onScrollListener 设置为：

```
yourListView.setOnScrollListener(endlessScrollListener); 
```

在无尽滚动侦听器的`Log.d(TAG, "Load Next Page!");`行之上，您可以从数据库中获取项目，并将它们添加到您的适配器。

调用后`notifyDataSetChanged();`您的项目将在列表中可见

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:42:43.903

查看[cwac 无限适配器](https://github.com/commonsguy/cwac-endless)以实现分页。

# mysql - 媒体维基；MySQL数据库凭据存储，什么文件？

> ID：10553441
> 
> 赞同：0
> 
> 时间：2012-05-11T14:35:13.397
> 
> 标签：mysql, mediawiki

我现在的任务是更改与 mediawiki 连接的数据库的凭据。我可以完全访问所有文件 etc.etc。

虽然有很多文件，但有人知道“config”文件名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:01:32.867

安装根目录中的 LocalSettings.php。

变量名称是不言自明的，但以防万一——您需要 $wgDBuser 和 $wgDBpassword。

# asp.net - ASP.NET 中流中的附件 Excel 文件？

> ID：10553442
> 
> 赞同：0
> 
> 时间：2012-05-11T14:35:20.143
> 
> 标签：asp.net, email, stream

我有一个 Excel 文档。我想将其作为流中的附件邮寄。

它发送带有附件的邮件，但我无法正确打开 excel 文件

这是我的代码：

```
public static string EPostaGonder(...,Stream AttachmentStream,string AttachmentFileName)
    {
      .
      .
      .
       SmtpClient mailClient = new SmtpClient(Host, Port);
       mailClient.EnableSsl = true;
       NetworkCredential cred = new NetworkCredential(KullaniciAdi, Sifre);
       mailClient.Credentials = cred;

       MailMessage ePosta = new MailMessage();
       ePosta.IsBodyHtml = true;
       ePosta.From = new MailAddress(Kimden, Isim);
       foreach (string Kime_ in Kime.Split(';'))
       {
         if (Kime_.Trim() != "")
            ePosta.To.Add(Kime_.Trim());

       ePosta.Subject = Konu;
       ePosta.Body = Mesaj.Replace("\n","<br/>");
       if (Cc != "")
         ePosta.CC.Add(Cc);

       if (AttachmentStream != null)
          {
             AttachmentStream .Seek(0, SeekOrigin.Begin);                 
             ePosta.Attachments.Add(
                      new Attachment(AttachmentStream, AttachmentFileName + ".xlsx"));
          }

        try
        {
           //mailClient.SendAsync(ePosta, (object)ePosta);
           mailClient.Send(ePosta);

             return "Done";
        }
         catch (SmtpException SmtpException_)
         {
             return SmtpException_.Message;
         }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:44:00.100

使用以下代码在邮件中添加附件。只需将文件路径传递给附件构造函数。

```
Attachment attachment = new Attachment(file);
ePosta.Attachments.Add(attachment); 
```

**从流中添加附件：**

```
ePosta.Attachments.Add( new Attachment( AttachmentStream, filename, "application/msexcel" )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:51:17.957

尝试类似的东西

```
var attach = new MailAttachment(Server.MapPath(strFileName));
ePosta.Attachments.Add(attach); 
```

查看这篇关于[带有多个附件的 ASP.NET 电子邮件的文章](http://www.codeproject.com/Articles/8528/ASP-NET-email-with-multiple-attachments)

# objective-c - 如果声明：我发现了一些奇怪的东西。为什么我的第二个“如果”等于否？

> ID：10553443
> 
> 赞同：0
> 
> 时间：2012-05-11T14:35:22.540
> 
> 标签：objective-c, ios, if-statement

如果声明：我发现了一些奇怪的东西。为什么我的第二个“如果”等于否？

```
 int a = bookSettings.tracks.count;
    int b = _currentChapter - 1;
    NSLog(@"a: %d", a);
    NSLog(@"b: %d", b);

    if (a > b) 
        NSLog(@"yes 1");
    else NSLog(@"no 1");        

    if (bookSettings.tracks.count > (_currentChapter -1)) 
        NSLog(@"yes 2");        
    else NSLog(@"no 2"); 
```

并记录

```
a: 27
b: -1
yes 1
no 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:44:55.310

NSArray 的`-count`方法返回一个`NSUInteger`-- 一个*无符号*整数。

`bookSettings.tracks.count`在您的语句中使用`if`可能会导致表达式的两边都被强制转换为`NSUInteger`. 即使`_currentChapter - 1`等于 -1，作为无符号整数，它也是一个*非常*大的数字。因此，您的轨道数显然小于那个非常大的整数，这就是 if 语句产生“no 2”的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:46:22.377

我相信 _currentChapter 是一个 NSUInteger。当您将它分配给它时，`b`它会变成一个有符号整数，因此可以使用 -1。但是，`bookSettings.tracks.count`是一个无符号整数，因为`_currentChapter`它也是一个无符号整数，所以当您从 _currentChapter（在本例中为 0）减去 1 时，它实际上变成了一个非常高的整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:40:33.720

您没有提到 bookSettings.tracks.count 的类型，如果 datatypes 或 object-types 之间存在不匹配，则问题归结为 true 或 false，if 语句将相应地执行。NSInteger 和 trivial c int 之间也可能存在差异。

# video - 是否有一套好的 ffmpeg 预设可以针对多个可用平台？

> ID：10553444
> 
> 赞同：3
> 
> 时间：2012-05-11T14:35:27.730
> 
> 标签：video, ffmpeg, video-processing, video-encoding

我正在开发一个可以让用户上传视频的网络应用程序。

然后应该在几个平台上的应用程序上播放用户的视频：

*   网络，通过闪存
*   iOS原生播放器
*   Android 手机 - 希望所有玩家，甚至是低端设备

我打算用`ffmpeg`这个非常酷`preset`的特性进行编码。

我确信我不是唯一一个发现这一点的人，但是当我用 Google 搜索时`ffmpeg encode for iPhone`，我在人们的博客上得到的不同参数集与结果一样多。

此外，人们有时会使用甚至没有记录的参数。

由于`ffmpeg`支持这些预设，我不敢相信我们在某处没有“预设数据库”，其中包含诸如`iPhone_low_quality`、`Android_low_end_device_low_quality`等预设。

我只是找不到它吗？

# ruby-on-rails - 如何建立一个长字符串？

> ID：10553445
> 
> 赞同：0
> 
> 时间：2012-05-11T14:35:33.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, string

我正在使用 Ruby on Rails 3.2.2，我想以最简单的方式构建一个长字符串。我想使用该`times`方法，但使用以下代码它不会返回我正在寻找的：

```
10000.times{ "Foo bar" }
# => 10000 
```

我希望它返回`"Foo bar Foo bar Foo bar Foo bar Foo bar Foo bar Foo bar Foo bar Foo bar Foo bar ..."`。

我怎样才能做到这一点？

*注意*：我想在我的 rspec 文件中使用上面的代码进行测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:36:35.653

试试这个方法：

```
"Long string"*1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:13:39.347

您正在做的事情不起作用，因为您正在`times`整数 1000 上调用该方法。它占用了一个块并最终返回值 1000。

最简单的解决方案是在字符串上调用乘法方法/运算符。

所以就像@gmile 建议的那样：

```
"Foo bar " * 10000 
```

但是如果你真的想使用`10000.times{ }`你可以这样做：

```
long_string = ''
10000.times{ |s| s << 'Foo bar ' }
puts long_string   # "Foo bar Foo bar Foo bar ..." 
```

# c# - LumenWorks Csv Reader - 如何检测数据行中存在但列中不存在的列？

> ID：10553447
> 
> 赞同：1
> 
> 时间：2012-05-11T14:35:40.580
> 
> 标签：c#, csv

我正在使用 LumenWorks CsvReader 解析具有以下结构的文件。

```
heading1,heading2,heading3
data1,data2,data3,data4,data5 
```

代码检测到我每行有三个字段，因为我有三个标题。它很高兴地允许我解析第一行并检索 data1、data2 和 data3，但我无法访问 data4 或 data5。至少，我希望能够检测数据行中的其他字段。有谁知道这是否可能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:11:26.323

它这样做是因为它使用第一行来了解您的文件有多少列。如果将第一行更改为“heading1,heading2,heading3,”，它将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:47:39.330

我希望您将无法读取这些字段中的数据。相反，我希望出现错误而您没有看到它。这至少可以让您检测到数据中是否存在其他字段。

尝试设置 DefaultParseErrorAction 枚举属性，以确保您看到出现的任何错误。我本来希望您描述的场景会触发 MalformedCsvException（如果您设置了 DefaultParseErrorAction = ParseErrorAction.ThrowException）。您还可以设置 DefaultParseErrorAction = ParseErrorAction.RaiseEvent，然后将事件处理程序附加到 ParseError 事件。最后，您应该能够在每条记录后检查 ParseErrorFlag 是否为真。

高温高压

# kml - Google 地球将公司服务器上的 PDF 或图像文件链接到地标

> ID：10553450
> 
> 赞同：3
> 
> 时间：2012-05-11T14:35:42.103
> 
> 标签：kml, google-earth

我想将多个 jpg(s) 和/或 pdf 文件显示到单个地标。文件路径在我公司的目录中，我希望公司中的任何人都能够查看我发送此 google 地球文件的每个地标。

我已经尝试了该命令，但似乎都没有工作。

这两个命令都适用于“http:// 地址”处的图像，但不适用于对我的硬盘驱动器或服务器的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:52:36.380

KML 地标可以在其描述中包含任意数量的图像。大多数 HTML 将呈现在任何给定地标的[描述中。](https://support.google.com/earth/answer/148075?hl=en&topic=2376990)

**选项 1\. 通过 KML 中的 URL 链接到 PDF 或其他媒体**

这是要在 Google 地球中启动的示例 KML 文件，它将在弹出气球中显示一个内嵌图像，其中包含指向 PDF 文件的链接：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
    <Placemark>
      <name>Test</name>
      <snippet/>
      <description>
        <![CDATA[<a href="http://stlab.adobe.com/wiki/images/d/d3/Test.pdf"><img
            src="http://stlab.adobe.com/wiki/skins/common/images/icons/fileicon-pdf.png"></a>
         ]]>
      </description>        
      <gx:balloonVisibility>1</gx:balloonVisibility>
      </Placemark>
</kml> 
```

请注意*gx:balloonVisibility*标记，如果设置为“1”，将自动显示弹出窗口。这是一个有用的功能。

如果图像在您的硬盘驱动器中，那么您将无法与其他人共享 KML，除非您将图像捆绑在 KMZ 文件中或将图像发布到您公司的网站，以便通过 URL 访问它们。

**选项 2\. 在地标描述气球中嵌入 PDF**

将 PDF 直接嵌入到地标描述气球中的一个技巧是在 iframe 中使用 Google PDF 查看器，并将测试 URL 替换为下面链接中的实际 URL。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <kml xmlns="http://www.opengis.net/kml/2.2">
   <Placemark>
      <name>Test</name>
      <snippet/>
      <description>
            <![CDATA[
<iframe src="http://docs.google.com/gview?url=http://stlab.adobe.com/wiki/images/d/d3/Test.pdf&embedded=true"
        style="width:718px; height:700px;" frameborder="0"></iframe>
             ]]>
      </description>
   </Placemark>
 </kml> 
```

此技术不需要 Flash 播放器，可在 Google 地球中使用。

请注意，如果您这样做太多次和/或尝试处理非常大的文档，那么查看器将显示以下消息：

> *您已达到查看或下载非 Google 文档格式文件的带宽限制。请稍后再试。*

# jquery - codeginiter json输出错误

> ID：10553454
> 
> 赞同：0
> 
> 时间：2012-05-11T14:36:05.063
> 
> 标签：jquery, json, codeigniter

我正在尝试从 codeigniter 视图返回 json 数据。但我的代码不起作用。我已经尝试了这个站点中给出的所有选项。但我无法从视图中返回 json 数据，这是控制器代码。

```
<?php
class Json extends CI_Controller
{

    function __construct()
    {
        parent::__construct();

    }
    public function index()
    {
        $this->load->model('get_json');
        $data['message']=$this->get_json->get_fruits();

         if ($data!== false)
         {
                    $this->load->view('json',json_encode($data['message']));
        }
    }
} 
```

我的模型

```
<?php

    class get_json extends CI_Model
    {
        function __construct()
        {
           parent::__construct();
        }

        function get_fruits()
        {
            $sql = "SELECT * FROM fruit where name='Apple'";
            $query = $this->db->query($sql);
            // Fetch the result array from the result object and return it
            return $query->result();

        }

    } 
```

查看代码：

```
<?php
$this->output->set_content_type('application/json');
echo $message; 
```

请帮我看看我的代码哪里出错了。

这是我在我的日志中得到的：

```
ERROR - 2012-05-11 15:28:40 --> Severity: Notice  --> Undefined variable: message C:\xampp\htdocs\ci\system\core\Loader.php(829) : eval()'d code 3
DEBUG - 2012-05-11 15:28:40 --> File loaded: application/views/json.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:38:24.077

将您的控制器`index`方法更改为：

```
public function index()
    {
        $this->load->model('get_json');
        $data['message']= json_encode($this->get_json->get_fruits());

         if ($data!== false)
         {
                    $this->load->view('json',$data);
        }
} 
```

你应该很高兴：你需要将数组传递给`$this->load->view`，而不是编码值。

编辑：作为旁注，对于这种事情，您甚至不需要视图。您可以直接从控制器返回结果：

```
public function index()
    {
        $this->load->model('get_json');
        $message = $this->get_json->get_fruits();

         if ($message !== false)
         {
                    $this->output->set_content_type('application/json');
                    echo json_encode($message);
        }
} 
```

更清洁，将所有东西放在一个地方，并且效率更高。

# android - 在 Android 的应用计费中？

> ID：10553456
> 
> 赞同：0
> 
> 时间：2012-05-11T14:36:25.397
> 
> 标签：android, in-app-purchase

我正在开发一个应用程序，我必须在其中制作购买杂志的功能。因此我需要实现 InAppBilling。我从这个链接 [http://developer.android.com/guide/market/billing/billing_testing.html](http://developer.android.com/guide/market/billing/billing_testing.html)阅读了文档 并获取了 InApp Billing 的示例代码并按照文档中的建议进行了更改。签署应用程序后，我已将 .apk 作为草稿上传并设置项目的 ID、价格，然后在 [http://developer.android.com/guide/market/billing/billing_admin.html#billing-catalog](http://developer.android.com/guide/market/billing/billing_admin.html#billing-catalog)中发布这些项目 然后我将它上传到 Google Play Shop。但是当我从 Google Play Shop 下载它时，即使我已经发布了该商品，它也不会显示该商品的产品列表和价格。

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:54:22.387

您必须将产品列表编码到您的应用程序中，据我所知，您的应用程序无法从 Google Market 下载产品列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:02:53.643

没有市场 API 可以为您提供产品列表。您需要在应用程序中保留产品列表。如果您还想显示描述，您还需要将其保留在您的应用程序中。

或者，如果您想让它动态化，那么您最好将此列表保存在某个地方，然后让应用程序在那里查找产品列表和描述。

# maven - 通过使用不同的 Maven 配置文件更改 Maven 依赖项的版本

> ID：10553458
> 
> 赞同：7
> 
> 时间：2012-05-11T14:36:28.163
> 
> 标签：maven, build, dependencies, maven-profiles

我有两个项目，项目 A 取决于项目 B，所以通常情况下，我的 projectA/pom.xml 中有以下部分：

```
<dependency>
   <artifactId>projectB</artifactId>
   <groupId>blabla</groupId>
   <version>version1</version>
</dependency> 
```

我想要实现的目标非常简单，Maven 配置文件是否允许我执行以下操作：

```
if(profileA) {
    <version>version1</version>
}
else {
    <version>version2</version>
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T14:41:51.910

是的，这可以做到（放入`activeByDefault`您需要默认的任何配置文件）。

```
<dependency>
    <artifactId>projectB</artifactId>
    <groupId>blabla</groupId>
    <version>${dependency.version}</version>
</dependency>
...
<profiles>
    <profile>
        <id>first</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>            
        <properties>
            <dependency.version>1.2.3</dependency.version>
        </properties>
    </profile>
    <profile>
        <id>second</id>
        <properties>
            <dependency.version>2.3.4</dependency.version>
        </properties>
    </profile>
</profiles> 
```

# web-services - 从 Axis2 迁移到 CXF 时删除 WSDL 差异

> ID：10553462
> 
> 赞同：1
> 
> 时间：2012-05-11T14:36:30.957
> 
> 标签：web-services, soap, wsdl, cxf, axis2

我正在将我的 Web 服务发布 API 从 AXIS2 迁移到 CXF。CXF 自动生成的 WSDL 与 Axis2 WSDL 不同。下面给出不同之处。由于客户端位于其他地方，因此我无法测试这些差异是否会影响 Axis2 生成的客户端。如何使用 CXF 消除这些 WSDL 差异？
**CXF WSDL**

```
<xs:element name="test" type="tns:test"/> 
<xs:element name="testResponse" type="tns:testResponse"/> 
    <xs:complexType name="test"> 
        <xs:sequence> <xs:element name="doc" type="xs:string" minOccurs="0"/> </xs:sequence> 
    </xs:complexType> 
    <xs:complexType name="testResponse"> 
        <xs:sequence> <xs:element name="return" type="xs:string" minOccurs="0"/> </xs:sequence> 
</xs:complexType>

<wsdl:portType name="TESTService"> 
```

**Axis2 WSDL**

```
<xsd:element name="test" nillable="true" type="xsd:string" />
<xsd:element name="testResponse" nillable="true" type="xsd:string" />
<wsdl:portType name="TEST"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:57:48.637

最有可能的是，添加以下注释：

@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)

会做的。您可能还需要更新@WebParam 和@WebReturn 参数的“名称”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:16:23.743

要获得**xs:elemntName**差异的 rif，请从 Web 服务输入中删除“@WebParams”，因为它只接受一个字符串而不是任何复杂对象。

要删除**wsdl:portType**名称差异，只需添加 '@WebService(name) 属性。'@WebService' 应该按照规范顺序，否则 cxf 不会在 WSDL 中考虑它们。

# eclipse - 在 Eclipse 搜索结果中自动展开全部

> ID：10553469
> 
> 赞同：31
> 
> 时间：2012-05-11T14:36:44.320
> 
> 标签：eclipse, search

我通常希望所有搜索结果（来自`ctrl-H`）完全展开，但默认情况下只展开第一个叶节点。

我最终要做的是单击“搜索”视图中的“全部展开”按钮，但这很乏味。

**有没有办法自动让结果完全展开？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T15:26:10.453

不，但您可以使用操作系统的键盘快捷键。在 Linux 上，使用`Nk*`(`*`在小键盘上) 展开当前节点和所有子节点。

Windows 用户可以使用`Shift+Nk*`

在 Mac 上，选择所有节点，`Command+A`然后使用`Command+Right Arrow`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-11T10:00:51.900

在没有数字键盘的 Mac 上，为避免移动鼠标：

*   做搜索

*   焦点在搜索视图中移动

    （确保在搜索之前关闭“查找/替换”对话框，否则会占据焦点）

*   快速执行此序列：

    *   `Alt ⎇</kbd> + `▲ Up Arrow` (select the root node)`
    *   `Alt ⎇</kbd> + `◀ Left Arrow` (collapse the root node)`
    *   `Alt ⎇</kbd> + `► Right Arrow` (expand the root node)`

        （由于某些原因`⎇</kbd> + `►</kbd> doesn't expand all of the root children, first you have to collapse it.)``

这比单击小`+`图标要快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-11T08:53:02.380

在没有数字键盘的 Windows 上，以下内容可以帮助您在不单击鼠标的情况下快速扩展搜索结果。

> 此方法不会立即展开结果，但我发现它比使用鼠标单击`+`Eclipse 上的按钮更方便快捷。

1.  搜索后，将一个搜索结果扩展`hold`到`► Right Arrow`其`end root`

2.  一旦到达`end root`, 按`▼ Down Arrow`移动到`the next search result`,`hold`上`► Right Arrow`将一个搜索结果扩展到它的`end root`

3.  重复`step 1`，`step 2`直到所有结果都展开。

# c# - 基于四元数差的动画时间

> ID：10553470
> 
> 赞同：1
> 
> 时间：2012-05-11T14:36:45.700
> 
> 标签：c#, 3d, quaternions, ogre

我正在尝试根据它们的差异使用两个四元数来调整相机的方向。因此，对于最小的旋转，我希望动画花费更少的时间，而更大的旋转需要更长的时间。我想我想以一定的速度旋转相机。

有没有什么方法可以将偏航、滚动和俯仰结合起来得到一个弧度，所以我可以用它来计算我想要应用每帧的四元数的百分比？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:42:25.387

如果您想区分两个四元数，只需使用增量四元数的[ToAngleAxis](http://www.ogre3d.org/docs/api/html/classOgre_1_1Quaternion.html#a9c516d6b499410b2fc72524026d3a124)。它返回角度（你需要这个）和两个四元数之间的旋转轴。

您可以使用四元数和计算出的速度来计算[球面插值](http://www.ogre3d.org/docs/api/html/classOgre_1_1Quaternion.html#ab0c47f1a7308ac4c17db9f9ddb6e4a72)（简称 slerp），它允许您计算相机方向的中间状态。

# ember.js - 查询服务器以获取绑定/观察数据

> ID：10553471
> 
> 赞同：1
> 
> 时间：2012-05-11T14:36:45.987
> 
> 标签：ember.js

如果这有一个令人痛苦的明显答案，我深表歉意，但我既是 JS 又是 Ember 菜鸟，我无法找到解决我认为常见情况的解决方案。本质上，我有一个带有 html/css/js 前端的多页应用程序和一个带有暴露 REST api 的 java 后端。我有 1 个 app.js 文件，我包含在所有屏幕和多个控制器中，其中一些仅适用于单个屏幕。

编辑：忘了我的问题。我的问题是如何延迟对我的服务器的用户数据查询，直到我的控制器有观察者。由于控制器存在于多个屏幕上（并不都需要它），我不想盲目地查询对象的创建，因为这会很浪费。现在我有一个hacky方法，在页面的内联脚本标签的末尾我调用populate方法。下面是我的代码目前的样子。

app.js 部分：

```
App = Ember.Application.create();

User = Ember.Object.extend({
    username: 'empty',
    fullname: 'empty user'
});

App.UserDataSource = Ember.Object.extend({

    fetchMyUser: function(callback) {
        $.get('ncaa/user', function(data) {
          callback(User.create({
                  username: data.username, 
                  fullname: data.fullname}));
        });
    }
});

App.userDataSource = App.UserDataSource.create();

App.UserController = Ember.Object.extend({

    content: null,

    populate: function() {
        var controller = this;
        this.get('dataSource').fetchMyUser(function(data) {
             controller.set('content', data);
        });
    }
});

App.userController = App.UserController.create({
     dataSourceBinding: Ember.Binding.oneWay('App.userDataSource')
});

Ember.run.sync(); 
```

index.html 部分

```
<script type="text/x-handlebars">
      Welcome, {{App.userController.content.fullname}}
</script>

....other code....
<script type="text/javascript">

     $(document).ready(function() {
           ....other code....
           App.userController.populate();
     });
</script> 
```

我很确定我的第一步将是修改车把模板以扩展 Ember.View，但我想知道社区认为什么是最佳实践。另外，我尝试将所有这些都放在一个 app.js 文件中是错误的吗？如果仅在需要用户显示的屏幕上导入它，则可以查询我的控制器的创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:17:01.793

我的问题的答案最终出现在 Ember.View 中。本质上，我所做的是覆盖我的视图的 init 函数，它添加了调用以用数据填充必要的控制器。该视图是通过车把模板实例化的，因此不再有不必​​要的调用或变通的工作。下面的重要变化。

索引.html：

```
<script type="text/x-handlebars">
    {{#view App.UserNameView }} 
        Welcome, {{fullName}}
    {{/view}}
</script> 
```

应用程序.js：

```
App.UserNameView = Em.View.extend({
    init: function() {
          this._super();
          App.userController.populate();
    },
    fullNameBinding: 'App.userController.content.fullname',
    userNameBinding: 'App.userController.content.username'
}); 
```

# java - 在接口中编写类有什么用

> ID：10553475
> 
> 赞同：14
> 
> 时间：2012-05-11T14:36:58.837
> 
> 标签：java, class, interface

我在一个 java 论坛中找到了以下示例。

```
interface employee{
    class Role{
          public String rollname;
          public int roleId;
          public Object person;
     }
    Role getRole();
    // other methods
} 
```

我已经执行了上面的代码片段，并且编译成功。这意味着我们可以在接口中拥有一个类。

我的问题是开设这样的课程有什么用？它是任何设计模式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T14:40:10.410

此代码片段已经回答了您的问题。该类`Role`由方法中的`employee`接口使用`getRole()`。接口的设计者认为这个类与接口的耦合非常紧密，因此值得在该接口内定义它以强调该类对接口的重要性。

它还为类提供语义命名空间：`employee.Role`. 然而，我第一次看到这种结构，而在其他类中定义的静态类很常见（出于与上述相同的目的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:40:47.917

这里的用法与任何内部类相同。它将类的范围限制在它所属的位置。

在这种情况下，实现者认为它`Role`不适合作为顶级类，并将其放入`employee`接口中。这样做的原因很可能`Role`是为了与 紧密耦合`employee`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:49:32.183

您的示例存在轻微的编译问题，我已在下面修复：

```
public interface Employee {
class Role{
      public String rollname;
      public int roleId;
      public Object person;
    }

Role getRole();
} 
```

除此之外，是的，它可以编译。这并不意味着这样做是个好主意。这是为班级命名空间的另一种方式`Role`，但我认为这很丑陋。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T14:41:30.853

该类提供了接口的一个重要部分： 的返回值`getRole`。所以在接口中定义类是有意义的。

在接口中为此类事物定义*接口*会更常见（例如`Map.Entry`in `java.util`），以便在实现接口时具有更大的灵活性，但您也可以使用类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T14:41:42.500

我不会写这么一段代码，但我觉得用处是为了强调类和接口之间的依赖关系。

接口用于定义 API，在这种情况下，作者可能想说“这两者不能分开”。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-14T14:36:05.373

我不会写这么一段代码，但我觉得用处是为了强调类和接口之间的依赖关系。

接口用于定义 API，在这种情况下，作者可能想说“这两者不能分开”。

# windows-installer - Windows Installer 文件夹存在属性

> ID：10553476
> 
> 赞同：0
> 
> 时间：2012-05-11T14:37:01.160
> 
> 标签：windows-installer, setup-project, file-exists

我正在为 Windows 窗体应用程序创建一个 Windows 安装项目。通常，我们的应用程序会部署到两个不同的客户端，一个有特定的打印机驱动程序，一个没有。我们当前的 installshield 安装程序根据目录是否存在（即 C:\PrinterDriver）来检查驱动程序是否存在。如果该目录存在，则安装程序会复制必要的文件。

在 WindowsInstaller 项目的文件系统中，我创建了文件夹 C:\MyProjectFiles\PrinterDriver。我希望仅当目录 C:\PrinterDriver 存在时才复制这些文件。如果该目录不存在，安装程序仍应继续进行而不复制文件，但不会回滚。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:58:11.490

添加[文件搜索](http://msdn.microsoft.com/en-us/library/0x2fc4kd)并使用文件[条件](http://msdn.microsoft.com/en-us/library/ddtk4a95.aspx#vxconfileinstallationpropertiesanchor3)中的属性。

# iphone - NSTimer 不从 AppDelegate 重复

> ID：10553480
> 
> 赞同：2
> 
> 时间：2012-05-11T14:37:10.183
> 
> 标签：iphone, ios, nstimer

为什么在 appDidFinishLaunching 中放置时不会重复？

```
self.ti = [NSTimer timerWithTimeInterval:10\. target:self selector:@selector(bounce:) userInfo:nil repeats:YES];
[self.ti fire]; 
```

非常感谢

朱尔斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:46:35.103

我不确定它是否会有所帮助，但请尝试使用`scheduledTimerWithTimeInterval`方法。一个例子：

```
self.ti = [NSTimer scheduledTimerWithTimeInterval:10\. target:self selector:@selector(bounce) userInfo:nil repeats:YES]; 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:42:22.953

我认为您`bounce`的签名错误。它应该是

```
- (void)bounce:(NSTimer*)theTimer {
    NSLog(@"Here...");
} 
```

您应该使用`selector(bounce:)`来安排此方法。你也应该打电话`scheduledTimerWithTimeInterval`而不是`timerWithTimeInterval`：

```
self.ti = [NSTimer
    scheduledTimerWithTimeInterval:10.
                            target:self
                          selector:@selector(bounce:)
                          userInfo:nil
                           repeats:YES]; 
```

# macos - OSX Lion Dashboard Widget :: 如何执行 shell 脚本

> ID：10553485
> 
> 赞同：3
> 
> 时间：2012-05-11T14:37:33.097
> 
> 标签：macos, widget, execute, dashboard

我的（第一个）OSX Lion Widget 中有这个。

```
var test = widget.system("/Users/Me/testscript",null); 
```

test.outputString 未定义，而 test.errorString 是某事。像那样

```
DashboardClient[xxxxx:xxx] *** NSTask: Task create for path '/Users/Me/testscript' 
failed: 22, "Invalid argument". Terminating temporary process. 
```

testscript 只包含一个`echo "here"`

据我通过谷歌了解... NSTask 以某种方式包装了我的电话，它需要一个实际的可执行二进制文件。但是，有没有办法从一个小部件中执行这个 bash-script-executable 就像它一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:44:49.213

为了让 shell 脚本像二进制文件一样被调用，它需要一个 'hashbang' 作为文件的第一行：

```
#!/bin/bash 
```

它告诉操作系统为脚本使用哪个解释器。没有它，操作系统会对如何处理该文件感到困惑，给你你所看到的错误。

# javascript - 一起使用背景、内容和开发工具的扩展

> ID：10553486
> 
> 赞同：2
> 
> 时间：2012-05-11T14:37:37.103
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我一直试图从文档和示例中弄清楚这一点，但还不够（或者我可能遗漏了一些东西？）。

我想创建一个 devtools 面板，但我仍然想访问被检查窗口的 dom，就像我在内容脚本中一样。现在我的选择是在检查窗口的上下文中评估某些东西，但如果我可以避免它，我真的宁愿不这样做。如果我可以将内容脚本与我的 devtools 页面/脚本一起使用，那将是个好主意，但它似乎并没有像我期望的那样工作 - 我似乎无法使用背景页面在之间发送消息我的 devtools 页面和我的内容脚本。

此外，有没有办法让那些很酷的 dom 子树像在元素面板或控制台中一样显示，以及令人敬畏的悬停/突出显示功能？

**更新**

因此，我可以通过转发已检查窗口的选项卡 ID 并将其从我的背景页面中拉出，从面板页面连接到内容脚本。所以我必须这样做

```
// devtools.js
chrome.extension.sendMessage({ 
    'to': chrome.devtools.inspectedWindow.tabId, 
    'message': 'whatever'
}); 
```

和

```
//background.js
chrome.extension.onMessage.addListener(function(message,sender,callback) {
    message.from = sender.tab.id;
    chrome.tabs.sendMessage(message.to, message, callback);
}); 
```

我的 content.js 脚本可以很好地接收到消息……我认为发件人的标签 ID 可以用来从内容脚本发回内容，但事实并非如此。后台脚本会收到消息，但 devtools 页面永远不会收到消息。

我在弄清楚如何正确调试 devtools 扩展方面也遇到了一些麻烦。内容脚本可以登录到页面的控制台，后台脚本可以登录到您可以从扩展页面检查的后台页面，但是 devtools 页面在哪里登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T18:31:19.563

我最初测试的代码现在可以在 Chrome 26+ 上正常工作......我认为我正在做一些应该有效但当时没有导致我看到的行为的事情。

@Konrad Dzwinel 的评论对调试开发工具非常有帮助，并指出这种方法实际上应该并且确实有效。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T17:44:28.940

只是从 2016 年（和 Chrome 54+）开始的快速更新，适用于任何可能也在努力调试 DevTools 扩展的人：

成功添加自定义 DevTools 窗格并在其中显示 Angular2 应用程序后，我发现该扩展程序未连接到页面 DevTools 控制台和源。按照上面的建议点击页面 DevTools 窗口 F12 不起作用（不知道它是否是 Chrome 本身在我的系统中的一些问题），页面 DevTools 窗口已关闭。但是在 DevTools 窗口页面上按 Ctl+Alt+I 会打开另一个 DevTools 窗口，其中附加了自定义窗格应用程序源和控制台。

# blackberry - 自定义 Horizo ntalFieldManager 中的子字段事件处理问题

> ID：10553488
> 
> 赞同：1
> 
> 时间：2012-05-11T14:37:40.543
> 
> 标签：blackberry, event-handling

我正在尝试创建一个自定义列表字段，其中每行有 2 个以上的可点击按钮。为此，我自定义了 Horizo​​ntalFieldManager 并创建了自己的管理器来对齐字段元素。现在用户界面非常好。

**但是，我正在努力处理对两者都有效的事件。**

**第 1 步**我已将 fieldChangedListener 用于在行中添加的按钮。它工作正常

```
public void fieldChanged(Field field, int context) {} 
```

**第 2 步** 已使用导航单击来处理父管理器上的事件。

```
 protected boolean navigationClick(int status, int time) {
            Field field = getFieldWithFocus();
            Dialog.alert("shops field clicked");        
                return super.navigationClick(status, time);
        } 
```

现在，即使是 navigationClick 事件也能正常工作。但由于按钮是添加到 VFM 的子字段。当我单击按钮时，VFM 和按钮事件都会一起出现。

在 ButtonField 上单击按钮时，我怎么能只限制按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:11:40.503

如果我正确理解了您的问题，您希望`navigationClick()`只为子字段（可点击按钮）调用，而不是为经理调用。很抱歉让您失望，但您不能。导航单击事件将始终首先为经理调用，然后经理才会将该事件传播到子字段。按键事件、触摸事件、焦点事件等也是如此……

描述您要实现的目标，添加代码片段，我相信我们会找到解决方案。

# c# - 如何将 DataGridView 与自定义类一起使用并显示 CheckBox

> ID：10553494
> 
> 赞同：1
> 
> 时间：2012-05-11T14:37:55.043
> 
> 标签：c#, datagridview, datasource

这是我的代码：

```
class SelectionTableEntry
{
    public CheckBox cbIsChecked { get; set; }

    public Table Table { get; set; }

    public string TableName { get; set; }

    public Button btnEditFilter { get; set; }

    public SelectionTableEntry(Table table, bool IsChecked)
    {
        this.Table = table;
        this.TableName = table.Name;
        this.cbIsChecked = new CheckBox();
        this.cbIsChecked.Checked = IsChecked;
        this.btnEditFilter = new Button();
        this.btnEditFilter.Text = "Open";
    }
}

List<SelectionTableEntry> myList = new List<SelectionTableEntry>();

// after filling the list with items
myDataGridView.DataSource = myList; 
```

现在我想使用具有 SelectionTableEntry 类型的列表作为我的 DataGridView 的数据源。问题是 CheckBox 和 Button 没有显示，所以该字段是空的。

我该如何解决这个问题？提前致谢。

问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:31:08.140

`DataGridView`复选框和按钮具有开箱即用的列类型，[`DataGridViewCheckBoxColumn`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcheckboxcolumn.aspx)和[`DataGridViewButtonColumn`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewbuttoncolumn.aspx)。

如果您将 AutoGenerateColumns 设置为 true，您将自动为 DataSource 对象上的每个布尔属性获取一个复选框列。

所以你的班级看起来像：

```
class SelectionTableEntry
{
    public bool cbIsChecked { get; set; }    
    public Table Table { get; set; }    
    public string TableName { get; set; }    
    public string btnEditFilter { get; set; }

    public SelectionTableEntry(Table table, bool IsChecked)
    {
        this.Table = table;
        this.TableName = table.Name;
        this.cbIsChecked = IsChecked;
    }
} 
```

您不能自动生成按钮列，您需要自己添加它们，如下所示：

```
// Add a button column. 
DataGridViewButtonColumn buttonColumn = 
    new DataGridViewButtonColumn();
buttonColumn.HeaderText = "";
buttonColumn.Name = "Open";
buttonColumn.Text = "Open";
buttonColumn.UseColumnTextForButtonValue = true;

dataGridView1.Columns.Add(buttonColumn); 
```

您需要做更多的事情来对按钮点击做出反应，但这在 MSDN 文章中都有解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:04:45.977

[这是关于如何：在 Windows 窗体 DataGridView 单元格中托管控件](http://msdn.microsoft.com/en-us/library/7tas5c80%28VS.80%29.aspx)的简单教程。它有点过时，但我相信在使用 DataGridView 时提供了一个很好的起点。不过，这可能看起来有点吓人——您将需要实现自己的`DataGridViewColumn`和`DataGridViewCell`.

# objective-c - stringByEvaluatingJavaScriptFromString 识别 webview 内容高度

> ID：10553504
> 
> 赞同：0
> 
> 时间：2012-05-11T14:38:31.660
> 
> 标签：objective-c, xcode, cocoa, ios5

我在 UIscrollview 中放置了一个 Uiwebview，因为在 uiwebview 之后我想用 PageController 显示一些图像。

我正在使用这行代码。

```
 -(void)webViewDidFinishLoad:(UIWebView *)webView{
    if (webView!=WebView)return;
    float h;

    NSLog(@"web view is %f high", WebView.frame.size.height);
    NSString *heightString = [WebView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"body\").offsetHeight;"];
    NSLog(@"web content is %@ high",heightString);

    h = [heightString floatValue] +12.0f;   
    WebView.frame = CGRectMake(WebView.frame.origin.x, WebView.frame.origin.y, WebView.frame.size.width, h);

    h = WebView.frame.origin.y + h + 20; 
    [ScrollView setContentSize:CGSizeMake(320, h)];

} 
```

但`Web view is %f high`不起作用，它不会重新调整 WebView 的高度有谁知道我该如何解决这个问题？这是因为我正在使用`[WebView loadHTMLString:html baseURL:nil];`

和：`NSString *heightString = [WebView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"body\").offsetHeight;"];`

```
 NSString *html = [NSString stringWithFormat:@"<html><head><!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><style>body {  font: normal 13px helvetica; color: #565656;   } </style></head><body><p>%@</p></body></html> ",text];  

[WebView loadHTMLString:html baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:48:55.890

尝试

```
NSString *heightString = [Bericht stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"]; 
```

祝你好运，内森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:47:00.727

UIWebView 已经包含了一个scrollView，为什么还要将它添加为子视图。[在此处](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CGkQFjAA&url=http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/&ei=TSatT8XsD4PYrQfInOiyDA&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw&sig2=AUyKo9oHaYJQCKgPbU_-Jw)查看 Apple 的文档

# macos - OSX下如何通过命令行获取进程的虚拟私有内存？

> ID：10553508
> 
> 赞同：2
> 
> 时间：2012-05-11T14:38:51.027
> 
> 标签：macos, memory, command-line

我想从命令行获取 OSX 下的进程消耗的虚拟私有内存。这是活动监视器在“虚拟内存”列中报告的值。`ps -o vsz`报告进程可用的总地址空间，因此无用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T15:24:23.387

可以通过运行获取单个进程的虚拟私有内存使用情况

```
top -l 1 -s 0 -i 1 -stats vprvt -pid PID 
```

您感兴趣的进程的进程 ID在哪里`PID`。这会导致大约十几行输出以

```
VPRVT
55M+ 
```

所以通过解析最后一行输出，至少可以得到内存占用量（MB）。我在 OSX 10.6.8 上对此进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:48:44.140

### 更新

我意识到（在我被否决之后）@user1389686 在 OP 的评论部分给出了一个比我微不足道的第一次尝试更好的答案。以下内容基于 user1389686 自己的回答。我不能把它归功于它——我刚刚清理了一下。

### 原创，使用 -stats vprvt 编辑

正如 Mahmoud Al-Qudsi 所说，`top`做你想做的事。如果 PID 8631 是您要检查的进程：

```
$ top -l 1 -s 0 -stats vprvt -pid 8631
Processes: 84 total, 2 running, 82 sleeping, 378 threads 
2012/07/14 02:42:05
Load Avg: 0.34, 0.15, 0.04 
CPU usage: 15.38% user, 30.76% sys, 53.84% idle 
SharedLibs: 4668K resident, 4220K data, 0B linkedit.
MemRegions: 15160 total, 961M resident, 25M private, 520M shared.
PhysMem: 917M wired, 1207M active, 276M inactive, 2400M used, 5790M free.
VM: 171G vsize, 1039M framework vsize, 1523860(0) pageins, 811163(0) pageouts.
Networks: packets: 431147/140M in, 261381/59M out.
Disks: 487900/8547M read, 2784975/40G written.

VPRVT
8631 
```

下面是我使用一些 Ruby 代码获得这个值的方法：

```
# Return the virtual memory size of the current process
def virtual_private_memory
  s = `top -l 1 -s 0 -stats vprvt -pid #{Process.pid}`.split($/).last
  return nil unless s =~ /\A(\d*)([KMG])/
  $1.to_i * case $2
            when "K" 
              1000
            when "M" 
              1000000
            when "G" 
              1000000000
            else
              raise ArgumentError.new("unrecognized multiplier in #{f}")
            end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T12:11:15.813

更新的答案，这在优胜美地下工作，来自 user1389686：

```
top -l 1 -s 0 -stats mem -pid PID 
```

# facebook - Facebook Open Graph API：获取分页用户新闻提要时参数限制的奇怪行为

> ID：10553510
> 
> 赞同：10
> 
> 时间：2012-05-11T14:38:55.450
> 
> 标签：facebook, facebook-graph-api, pagination, limit, feed

我用 JAVA 编写了一个小脚本，在使用**Open Graph API**和[RestFB 客户端查询](http://restfb.com/)**用户的 Facebook 新闻提要**时，用四个不同的值（10、100、1000 和 10000）**测试参数`limit`**。如您所见，它有一个奇怪的行为......

 ******设想：**

```
public static void main(String[] args) {

    // vars
    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    FacebookClient client = new DefaultFacebookClient(accessToken);
    Connection<Post> home;
    List<Post> postList;
    Map<String, Post> postMap;
    int i;

    // limits to test
    String[] limits = {"10", "100", "1000", "10000"};
    for (String limit : limits) {

        // init list and map (looking for duplicate posts)
        postList = new LinkedList<Post>();
        postMap = new LinkedHashMap<String, Post>();
        // get news feed
        home = client.fetchConnection(id + "/home", Post.class, Parameter.with("limit", limit));

        // going through pages
        i = 1;
        for (List<Post> page : home) {
            for (Post post : page) {
                // store into list
                postList.add(post);
                // store into map (unique post id)
                postMap.put(post.getId(), post);
            }
            i++;
        }

        // sort posts by created time
        Collections.sort(postList, new Comparator<Post>() {
            @Override
            public int compare(Post post1, Post post2) {
                return post1.getCreatedTime().compareTo(post2.getCreatedTime());
            }
        });

        // log
        try {
            FileWriter out = new FileWriter("log/output.txt", true);
            out.write("LIMIT: " + limit + "\n");
            out.write("\tPAGES: " + (i - 1) + "\n");
            out.write("\tLIST SIZE: " + postList.size() + "\n");
            out.write("\tMAP SIZE: " + postMap.size() + "\n");
            out.write("\tOLDER POST: " + dateFormat.format(postList.get(0).getCreatedTime()) + "\n");
            out.write("\tYOUGNER POST: " + dateFormat.format(postList.get(postList.size() - 1).getCreatedTime()) + "\n");
            out.close();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }

    }

} 
```

**输出：**

```
LIMIT: 10
    PAGES: 7
    LIST SIZE: 56
    MAP SIZE: 56
    OLDER POST: 2009-03-22 14:58:03
    YOUGNER POST: 2012-05-11 15:48:49
LIMIT: 100
    PAGES: 3
    LIST SIZE: 174
    MAP SIZE: 172
    OLDER POST: 2012-01-12 23:01:34
    YOUGNER POST: 2012-05-11 15:48:49
LIMIT: 1000
    PAGES: 2
    LIST SIZE: 294
    MAP SIZE: 292
    OLDER POST: 2009-03-22 14:58:03
    YOUGNER POST: 2012-05-11 15:48:49
LIMIT: 10000
    PAGES: 2
    LIST SIZE: 294
    MAP SIZE: 292
    OLDER POST: 2009-03-22 14:58:03
    YOUGNER POST: 2012-05-11 15:48:49 
```

**解释和问题：**

1.  显然，**您无法获取**用户自创建帐户以来在其新闻提要中发布的所有帖子。限额有限制吗？

2.  对于`limit`100、1000 和 10000，我必须每次在整个返回的新闻提要中都有**两个重复的帖子（174 - 172 = 194 - 192）。**为什么？我从来没有在我的个人新闻提要上两次看到相同的帖子......

3.  使用（并且仅使用）a`limit`为 100，我得到的较旧的帖子是在 2012 年创建的，同时其他值`limit`使查询检索在 2009 年创建的帖子。我可以理解，上限`limit`（1000或 10000），查询检索较旧的帖子。但是为什么**a `limit`of 10 使查询检索到较旧的帖子而不是查询限制为 100**？

4.  最后但并非最不重要的一点：**我没有收到相同数量的帖子**。显然，越高`limit`，检索到的帖子数越高。我首先想到的是，较小的唯一结果是`limit`页数较高（尽管如此），但检索到的帖子数不会改变。但确实如此。为什么？也就是说，帖子的数量似乎在`limit`100 和 1000 之间收敛，因为帖子的数量与`limit`1000 和`limit`10000 的 a 相同。

PS：为查询指定一个`since`和/或一个`until`参数不会改变任何东西。

欢迎任何回答/评论`:)`

干杯。

**编辑：**

这是**我最好的[回忆](http://en.wikipedia.org/wiki/Precision_and_recall#Recall)**：

```
LIMIT: 200
    PAGES: 3
    LIST SIZE: 391
    MAP SIZE: 389
    OLDER POST: 2012-01-27 14:17:16
    YOUGNER POST: 2012-05-11 16:52:38 
```

为什么是200？它是否在[文档](https://developers.facebook.com/docs/reference/api/)中的任何地方指定？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T20:36:46.720

它不在文档中，但我个人已经为我的项目测试了以下内容。

Facebook`limit`仅限于 500 个帖子。无论您设置高于 500 的限制，它最多只能获取 500 个结果。尝试 500（或更多），您将获得最多的帖子。

您不会每次都收到 500 个帖子，但通常会收到超过 490 个帖子。一些帖子因各种原因被过滤（如隐私、被屏蔽的用户、不适合特定区域等）

这回答了你的第一个和第四个问题。

对于问题没有。2，我不在java中工作，所以我不能说你的代码/逻辑是否有问题或者你的代码在做什么。

对于问题没有。3、神助facebook！

**编辑**

对于第 4 个问题，您可能会达到图形 api 的查询/小时限制（facebook 使用它来防止垃圾邮件，您不能快速连续频繁地查询 api）

还，

![脸书过滤器](../Images/81a3cfaa10528ee42b85877bca3ffacc.png)

这就是为什么，您没有得到 facebook 返回的所有结果。

> （如果您指定了“5”的限制，但返回的五个帖子对查看者不可见，您将得到一个空的结果集。）
> 
> 除了上面列出的每个表和连接的文档中提到的限制之外，知道在运行可见性检查之前我们将获取的最大结果数是 5,000 是有帮助的。

参考：[使用图形 api 和 fql 进行分页](http://developers.facebook.com/blog/post/478/)

此外，特定表的结果数也有限制。您可以在各自的 fql 表中获得有关它们的详细信息。

对于流表（用于帖子/提要的表），

> 流表的每个查询仅限于前 30 天或 50 个帖子，以较大者为准，但是您可以使用特定于时间的字段，例如 created_time 以及 FQL 运算符（例如 < 或 >）来检索更大范围的帖子。

参考：[Fql流表](http://developers.facebook.com/docs/reference/fql/stream/)

**也看这里：** [Facebook FQL 流限制？](https://stackoverflow.com/questions/4062085/facebook-fql-stream-limit#answer-4102670)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T16:43:56.153

Facebook 开放图形 API 分页中存在与限制参数有关的持续错误。上限越高，帖子的页数就越多——好像下限也会剔除帖子的样本。自从9月份帖子搜索功能关闭一个月以来，这个问题就浮出水面并退却了。

一个新的错误已经浮出水面：目前，没有 access_token 和小限制（如 12）的帖子搜索将返回很少且人口稀少的结果页面。使用 API 文档示例中给出的 access_token 进行的相同搜索将提供 12 个结果的整页 +/- 并且不会跳过。我不知道他们使用什么样的 access_token，但我没有尝试重复他们的结果。没有访问令牌的帖子搜索或多或少没有功能（再次）！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T03:30:56.633

facebook 端可能有一些逻辑来防止数据挖掘。尝试在浏览页面时添加一些延迟，看看是否更好。****

# sencha-touch-2 - Sencha如何在点击标签面板时更新视口？

> ID：10553511
> 
> 赞同：1
> 
> 时间：2012-05-11T14:39:09.473
> 
> 标签：sencha-touch-2, carousel, init

我在 Sencha Touch 2 中有一个 MVC 多项目和分页图像轮播，当在初始化时添加到视口时，它可以完美地独立运行。

但是，我现在遇到的问题是如何使其适应我的标签面板样式应用程序。我有点不清楚我应该把代码放在哪里，在 init 或（我猜）在点击特定选项卡时触发的控制器中。我的 tabpanel 风格的应用程序是从 Github 下载的（Sencha touch 2 样板模板）。

我的工作 MVC 轮播在 app.js 中调用以下内容：

```
 controllers: ['Main'], 
  views: ['Carousel', 'Page'], 
  stores: ['Thumbnails'], 
  models: ['Thumbnail'], 

  launch: function () {
var carousel = Ext.create('Ext.Carousel');
Ext.Viewport.add(carousel);

Ext.getStore('Thumbnails').load(function (apps) {
  var cols = 4, rows = 4; // todo: change for tablets
  var page;
  var btn;
  var iPage = 0;
  var iApp = 0;
  var x = 1, y = 1, z = 0;
  var row, grid, bottomrow;
  var firstpage = 0; 
```

等等......为了可读性而削减代码。

基本上我希望这个轮播出现在选项卡面板的第二个选项卡上，而不是最初出现在视口上，它现在是如何工作的。也许我应该在当我在选项卡面板的那个选项卡上时触发的控制器中拥有工作启动代码？我不确定解决这个问题的最佳方法。

这是我的 tabpanel 应用程序的启动功能，其中

```
 launch: function() {
    Ext.create('TCApp.view.Viewport', {fullscreen: true}); 
```

// 我尝试在创建视口后添加这个工作启动代码，但也许它应该在控制器中？但我不知道该怎么做......

```
 var carousel = Ext.create('Ext.Carousel');  

    Ext.Viewport.add(carousel);

   Ext.getStore('Thumbnails').load(function (apps) {
 var cols = 4, rows = 4; // todo: change for tablets
 var page;
 var btn;
 var iPage = 0;
 var iApp = 0;
 var x = 1, y = 1, z = 0;
 var row, grid, bottomrow;
 var firstpage = 0; 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:23:23.010

您正在将轮播添加到`Ext.Viewport`，这是默认情况下在应用程序引导程序上实例化的组件。因此，不要使用`Ext.Viewport.add(carousel);`，并将其添加到视口本身，而是尝试使用

```
tabpanel.add(carousel); 
```

`tabpanel`对您的选项卡面板实例的引用在哪里。这样您就可以将轮播添加到第一个可用的卡片中`Ext.tab.Panel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:45:24.193

谢谢Grgur，它有帮助。我最终以这种方式解决了它，确保有一个标题和 iconCls 否则在将轮播项目添加到选项卡面板时我会在控制台中收到错误：

```
var carousel = Ext.create('Ext.Carousel', {
title: 'Carousel',
iconCls: 'info'
});

var MyTabPanel = Ext.getCmp('mytabpanel');
MyTabPanel.add(carousel); 
```

# android - 为什么 ListView 会自动取消选择选定项目？

> ID：10553514
> 
> 赞同：0
> 
> 时间：2012-05-11T14:39:17.963
> 
> 标签：android, android-layout, android-listview, selection, unselect

每次选择一个项目时都会发生这种情况。我有一个带有 OnItemClickListener 的 ListView，当事件被触发时，它将 TextView 上的属性文本更改为某个随机字符串，之后所选项目变为未选中。

但是，如果我评论更改文本的行，请再次运行应用程序并再次触发相同的事件，该项目将保持选中状态。

这是代码，我将其简化为最简单的方法。

```
public class TestsActivity extends Activity {
ListView optionsListView;
TextView text;
String[] stringArray = { "Option 1", "Option 2", "Option 3", "Option 4",
        "Option 5", "Option 6", "Option 7", "Option 8", "Option 9",
        "Option 10" };
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_layout);       
    optionsListView = (ListView) findViewById(R.id.list);
    OptionsAdapter ItemsAdapter = new OptionsAdapter(this, R.id.list,stringArray);
    optionsListView.setAdapter(ItemsAdapter);
    text = (TextView)findViewById(R.id.textView);
    optionsListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position,
                long id) {
            Toast.makeText(getApplicationContext(), "Clicked" + position, Toast.LENGTH_SHORT).show();
            text.setText("Something"); // <- If you comment this, it will work
        }
    });
}

private class OptionsAdapter extends BaseAdapter {
    String[] options;

    public OptionsAdapter(Context context, int textViewResourceId,
            String[] options) {
        this.options = options;
    }

     @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater vi = LayoutInflater.from(getApplicationContext());
            convertView = vi.inflate(R.layout.list, null);
        }
        TextView post = (TextView) convertView.findViewById(R.id.post);
        post.setText(options[position]);
        return convertView;
    }

    public int getCount() {
        return options.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }
}
} 
```

list_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="2" >

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="textView" >
</TextView>

<ListView
    android:id="@+id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:listSelector="#AABBCC" >
</ListView>

</LinearLayout> 
```

列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" >

   <TextView
       android:id="@+id/post"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:gravity="center_vertical" />

</LinearLayout> 
```

如果您从 list_layout.xml 中删除了“android:layout_weight="1"” 行，则选择将正常工作，但我需要在我的真实布局中使用那段代码，这只是一个示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:53:01.917

当您更改文本时，视图会因为内容的变化而重新排列，尤其是权重也需要重新定位元素。这就是重设焦点的原因。这是根本原因...

也许您应该考虑使 TextView 不可聚焦或保存并恢复列表视图项的焦点。

# php - 如何在 PHP REQUEST_URI 语句中使用多个 URL？

> ID：10553515
> 
> 赞同：0
> 
> 时间：2012-05-11T14:39:19.867
> 
> 标签：php

这是我的代码...

```
if($_SERVER['REQUEST_URI'] == '/shop/category/handheld-thermal-imaging/')
{
echo
'<div class="current-mark"></div><div class="top-level"><a href="/shop/category/handheld-thermal-imaging/">HANDHELD<br />THERMAL IMAGING</a></div>';
} 

else if($_SERVER['REQUEST_URI'] == '/shop/category/mobile-imaging/')
{
echo
'<div class="current-mark"></div><div class="top-level"><a href="/shop/category/mobile-imaging/">MOBILE IMAGING</a></div>';
} 
```

基本上，此代码会根据您在站点中的哪个页面显示不同的左侧站点导航。它使用 PHP REQUEST_URI 功能通过页面的 URL 检测您所在的页面。

我的问题是，如何让代码检测同一个导航片段的多个 URL？

我试过这个代码......

```
if($_SERVER['REQUEST_URI'] == '/shop/category/handheld-thermal-imaging/' , '/shop/iphone-thermal-imaging-adapter/')
{ 
```

但是该代码似乎不起作用。基本上我在这里想弄清楚的是如何为 REQUEST_URI 'if' 语句使用多个 URL。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:44:03.730

将 URL 放入数组中，然后... `if(in_array($_SERVER['REQUEST_URI'],$array))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:40:54.770

您应该...切换到一个[`switch`](http://php.net/manual/en/control-structures.switch.php)更简洁的语句，并提供此选项：

```
switch($_SERVER['REQUEST_URI']) {
    case '/shop/category/handheld-thermal-imaging/':
        // THERE IS NO CODE AT ALL HERE!
        // The absence of a "break;" causes control to "fall through" to the next
    case '/shop/iphone-thermal-imaging-adapter/':
        echo "something common for the thermal imaging urls";
        break;
    case 'some other url':
        echo "something for the url that stands alone";
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:40:56.777

您可以在条件中使用“OR”语句：

```
if($_SERVER['REQUEST_URI'] == "whatever" || $_SERVER['REQUEST_URI'] == 'something else")
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-31T23:08:46.363

我使用 OR 语句进行多个 URL 检查

```
<?php 

   if ((strpos($_SERVER['REQUEST_URI'], 'contact.php')  || strpos($_SERVER['REQUEST_URI'], 'register.php') || strpos($_SERVER['REQUEST_URI'], 'login.php')) === false) { 
     echo "show";  
   } else { 
     echo "hide";  
   } 

?> 
```

# excel - 避免'for without next' End Sub

> ID：10553518
> 
> 赞同：2
> 
> 时间：2012-05-11T14:39:25.250
> 
> 标签：excel, vba

如果这里的一些专家帮助我解决问题，那将非常有帮助：我有一个循环来检查范围内的零值，问题是我无法避免错误“for without next”。也许这是使用 End Sub 的 for 循环的错误构造？谢谢你。

```
For Each c In Range("B4:H4")

     If c.Value = 0 Then MsgBox "Wrong record!", vbExclamation
     End Sub
Next c 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:41:01.317

退出，不是结束。

```
For Each c In Range("B4:H4")

  If c.Value = 0 Then 
    MsgBox "Wrong record!", vbExclamation
    Exit Sub
  End If
Next c 
```

但是，通常最好制定一种方法来限制退出点的数量。

# class - 如何定义像“data MyMath = MyNum Num”这样的抽象数据类型？

> ID：10553519
> 
> 赞同：3
> 
> 时间：2012-05-11T14:39:28.057
> 
> 标签：class, haskell, types, abstract-data-type

我想定义一个新的抽象数据类型，它可以是通用数字或除法构造。我将如何在 Haskell 中做到这一点？

我的第一种方法是：

```
data MyMath = MyNum Num
            | Div MyMath MyMath 
```

问题是编译器抱怨“Num”不是数据类型而是类型类。所以我的第二个想法是解决这样的问题：

```
data MyMath = MyNum Int
            | MyNum Float
            | Div MyMath MyMath 
```

但这也行不通，因为 MyNum 被使用了两次，这是不允许的，而且这种方法实际上并不是多态的。那么解决这个问题的方法是什么？

**EDIT2**：（再次）阅读答案后，我尝试使用 GADT 数据构造函数。这是一些人为的示例代码：

```
 5 data MyMathExpr a where
 6               MyNumExpr :: Num a => a -> MyMathExpr a
 7               MyAddExpr :: MyMathExpr b -> MyMathExpr c -> MyMathExpr (b, c)
 8 deriving instance Show(MyMathExpr a)
 9 deriving instance Eq(MyMathExpr a)
10 
11 data MyMathVal a where 
12                 MyMathVal :: Num a => a -> MyMathVal a
13 deriving instance Show(MyMathVal a)
14 deriving instance Eq(MyMathVal a)
15 
16 foo :: MyMathExpr a -> MyMathVal a
17 foo (MyNumExpr num) = MyMathVal num
18 foo (MyAddExpr num1 num2) = MyMathVal (l + r)
19   where (MyMathVal l) = foo num1
20         (MyMathVal r) = foo num2 
```

但是第 18 行有问题：

```
test.hs:18:40:
Couldn't match type `b' with `(b, c)'
  `b' is a rigid type variable bound by
      a pattern with constructor
        MyAddExpr :: forall b c.
                     MyMathExpr b -> MyMathExpr c -> MyMathExpr (b, c),
      in an equation for `foo'
      at test.hs:18:6
In the first argument of `(+)', namely `l'
In the first argument of `MyMathVal', namely `(l + r)'
In the expression: MyMathVal (l + r) 
```

'c' 也是如此。我想这是一个愚蠢的错误，我只是没有看到。你？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:49:33.597

这解决了您在代码中解决的问题，但不包括布尔值。如果您想在数据声明中使用类约束，您可以像使用任何其他函数一样进行操作：

`data (Num a) => MyMath a = MyMath {x :: a}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:50:21.060

您可以为此使用存在量化：

```
> let data MyMath = forall n. Num n => MyNum n
> :t MyNum 3
MyNum 3 :: MyMath
> :t MyNum 3.5
MyNum 3.5 :: MyMath 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:28:55.697

有很多方法可以做到这一点。一种方法是使用 GADT：

```
{-# LANGUAGE GADTs #-}

data MyMath where
    MyNum :: Num a => a -> MyMath
    MyBool :: Bool -> MyMath 
```

GADT 的另一种方式：

```
{-# LANGUAGE GADTs #-}

data MyMath a where
    MyNum :: Num a => a -> MyMath a
    MyBool :: Num a => Bool -> MyMath a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:44:18.957

如前所述，您的尝试不涉及任何布尔值，但我将使用您的问题文本。

您不必发明这种类型，请查看Prelude 中的[Either](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Either)。`Either a Bool`因此，您正在寻找的是您想要`a`成为`Num`. 如果您想实际执行此操作，请准备好下面的编辑。

**编辑：**如果你不想使用`Either`，你可以做`data MyMath a = MyNum a | MyBool Bool`。现在，如果您愿意，您*可以*强制`a`成为一个实例，但您可能需要先考虑[这个 SO question](https://stackoverflow.com/q/7438600/453616)和[这个答案](https://stackoverflow.com/a/7438716/453616)。确实没有必要为数据类型强制执行实例；只需为使用它的功能做它intsead。`Num`

# android - MediaMetadataRetriever中媒体持续时间的测量单位是什么

> ID：10553531
> 
> 赞同：12
> 
> 时间：2012-05-11T14:40:05.730
> 
> 标签：android, metadata, media, duration

一个可以使用

```
 String MediaMetadataRetriver.extractMetadata(int key); 
```

和

```
 key = MediaMetadataRetriver.METADATA_KEY_DURATION 
```

提取媒体持续时间。

此函数返回一个字符串，但没有关于此字符串表示的格式或度量单位的文档。我假设它是*ms*中的整数，但 MediaMetadataRetriever 的其余 API 使用*us*。

那么持续时间的单位是什么？您认为缺乏规范是故意的还是错误的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T15:26:55.520

看到这个

```
 long durationMs = Long.parseLong(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION));
                    long duration = durationMs / 1000;
                    long h = duration / 3600;
                    long m = (duration - h * 3600) / 60;
                    long s = duration - (h * 3600 + m * 60);
                    String durationValue;
                    if (h == 0) {
                       durationValue = String.format(
                       activity.getString(R.string.details_ms), m, s);
                       } else {
                            durationValue = String.format(
                            activity.getString(R.string.details_hms), h, m, s);
                         }
                    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-10T00:44:13.587

因为 extractMetadata 可以返回 null 您需要将此调用包装在检查中：

```
int duration = 0;
String dur = retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
if (dur != null) {
    duration = Integer.parseInt(dur);
}
mDuration = duration;
long h = duration / 3600;
long m = (duration - h * 3600) / 60;
long s = duration - (h * 3600 + m * 60); 
```

（来自[http://www.codota.com/android/scenarios/52fcbd47da0af79604fb4a67/android.media.MediaMetadataRetriever?tag=dragonfly](http://www.codota.com/android/scenarios/52fcbd47da0af79604fb4a67/android.media.MediaMetadataRetriever?tag=dragonfly)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-01T05:02:27.967

提取的输出是`String`，你需要解析成`long`. 你可以像这样处理有格式化的持续时间：

```
public static String formatDurationLongToString() {
        String time = retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
        long timeInMillisecond = Long.parseLong(time)
        return String.format(Locale.US, "%02d:%02d:%02d", TimeUnit.MILLISECONDS.toHours(timeInMillisecond),
                TimeUnit.MILLISECONDS.toMinutes(timeInMillisecond) % TimeUnit.HOURS.toMinutes(1),
                TimeUnit.MILLISECONDS.toSeconds(timeInMillisecond) % TimeUnit.MINUTES.toSeconds(1));
    } 
```

# xml - 不适用于 XSLT PI 映射

> ID：10553533
> 
> 赞同：3
> 
> 时间：2012-05-11T14:40:08.723
> 
> 标签：xml, xslt, sap, sap-pi, sap-xi

我是 xslt 的新手，我有以下代码，它不适用于简单的排序：帮助已获得帮助。

```
<xsl:template match="ns0:MT_name">
<xsl:for-each select="name">
<xsl:sort select="name"/>
</xsl:for-each>
</xsl:template> 
```

## 输入是：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns0:MT_name xmlns:ns0="http://example.com/sap/pi/TEST/xslt">
   <name>11</name>
   <name>88</name>
   <name>55</name>
</ns0:MT_name> 
```

## 预期输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns0:MT_name xmlns:ns0="http://example.com/sap/pi/TEST/xslt">
   <name>11</name>
   <name>55</name>
   <name>88</name>
</ns0:MT_name> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:45:12.380

更改`<xsl:sort select="name"/>`为`<xsl:sort select="."/>`。当前上下文已经是`name`.

* * *

试试这个 XSLT 1.0 样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ns0="http://xyz.com/sap/pi/TEST/xslt">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ns0:MT_name">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="name">
        <xsl:sort select="." order="ascending"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:44:45.743

```
<xsl:sort select="." order="ascending"/> 
```

**所以完整的模板是**

```
<xsl:template match="ns0:MT_name">
  <xsl:for-each select="name">
    <xsl:sort select="." order="ascending"/>
    <xsl:copy-of select="."/>
  </xsl:for-each>
</xsl:template> 
```

我还注意到在你的例子中你有一个 ' 标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:52:28.963

您的模板不会创建任何输出，因为 的正文仅`xsl:for-each`包含`xsl:sort`。为了生成所需的输出，样式表可能如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:ns0="http://xyz.com/sap/pi/TEST/xslt">

   <xsl:template match="ns0:MT_name">
      <xsl:copy>
         <xsl:for-each select="name">
            <xsl:sort select="." data-type="number"/>
            <xsl:copy-of select="."/>
         </xsl:for-each>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

# internet-explorer - 跨浏览器扩展开发替代方案

> ID：10553548
> 
> 赞同：12
> 
> 时间：2012-05-11T14:40:57.087
> 
> 标签：internet-explorer, google-chrome, firefox-addon, safari-extension, browser-extension

我想`browser extension`为所有主要浏览器开发一个。从我读到的内容来看，这可能会非常痛苦，尤其是对于`IE`.

在开始这个项目之前，我想知道我的基本选择是什么。我能想到两个：

1.  为每个浏览器独立开发扩展
2.  雇人为我开发扩展

还有其他选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T14:32:37.690

还有两种选择：

*   您可以使用跨浏览器扩展开发框架，就像[这里描述的那样](http://hightechstartups.blogspot.com/2012/05/developing-browser-extensions-fast-way.html)
*   最大限度地减少必须在扩展中运行的代码量，因为它需要扩展权限，例如访问特殊浏览器功能。将其余代码放在 JavaScript 文件中，并让扩展将其注入每个页面。您可以编写一次此 JS 并为每个浏览器重用它（如果您小心 JS 跨浏览器问题，或使用[GWT](https://developers.google.com/web-toolkit/)）。您甚至可以将 UI 部件移动到这个 JS 文件中，并让工具栏出现**在**网页内部而不是浏览**器**窗口中，就像[Browseye](http://www.browseye.com/)和[Meebo](https://www.meebo.com/download)所做的那样。

[在这里](http://hightechstartups.blogspot.com.es/2012/05/different-way-of-developing-browser.html)，您可以找到不同替代方案的优缺点列表。

雇用某人应该是最后的选择。小心知识产权问题和扩展代码所有权的争议。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-28T20:24:38.633

您绝对应该查看 Crossrider[跨浏览器开发框架](http://crossrider.com)

使用他们的平台，您可以：

1.  仅使用 javascript 代码和一个 API 开发跨浏览器扩展
2.  支持 Chrome、Firefox、Safari 和最重要的 Internet Explorer！
3.  Crossrider 有一个在线 IDE，您可以在其中动态开发扩展，而无需下载 SDK（但是，如果您愿意，您可以在您的机器上进行本地开发）
4.  完全自定义的 Windows 安装程序，可以从一个 EXE 安装在所有浏览器上，也可以定义为 SILENT 安装程序。
5.  如果您希望将用户安装到您自己的网站，则托管安装页面和安装小部件
6.  24/7 支持！

还有更多..

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-20T22:36:03.787

试试[Kango](http://kangoextensions.com/) - 跨浏览器扩展框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:44:13.683

不再有通用的浏览器扩展机制（插件不能被认真推荐）。

好消息是，只要您不接触 UI 部分，大部分工作通常是简单的标准和通用 javascript。

至于确定您是应该自己编程还是雇用某人，这不是 SO 的问题。

# php - 如何在 Zend Framework 1.11 中返回 JSON 格式的 Application_Model

> ID：10553554
> 
> 赞同：0
> 
> 时间：2012-05-11T14:41:16.280
> 
> 标签：php, zend-framework, json, zend-view

我在视图中定义了一个变量，称为 Student。在我看来，如何将 Student 对象显示为 JSON？

```
public function previewAction()
{
    // ... 
    $this->view->student = $student;
} 
```

在我的 preview.phtml 视图中，我有以下内容：

```
<script>
    // this doesn't return the Application_Model as a JSON object in the html       
    var studentData = <?php echo Zend_Json::encode($this->student); ?>; 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:05:51.917

在php标签周围加上引号

```
<script>
    // this doesn't return the Application_Model as a JSON object in the html       
    var studentData = "<?php echo Zend_Json::encode($this->student); ?>"; 
</script> 
```

# oop - 如何在不降低性能的情况下处理对象内部的对象的最佳技术？

> ID：10553562
> 
> 赞同：0
> 
> 时间：2012-05-11T14:41:43.037
> 
> 标签：oop

我有具有许多属性的类，在某些情况下，这些属性包括其他复杂的类。并非总是我会使用这个完整的模式，但有时我会这样做。创建对象、处理对象然后按需检索信息的最佳实践是什么？

我举一个非常简单的例子来澄清：

假设一个类`student`与一个类相关`professor`。此类与其他类相关，例如`classes`,`schedules`等。并非总是我需要使用所有这些信息。

我是否应该在对象中保留教授的 ID，`student`然后在需要时加载信息？我应该创建一个仅用于存储教授 ID 的属性，还是创建一个`new` `professor`对象而不将所有其他数据加载到其中，只存储`ID`? 或者两者都不是？最佳做法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:46:01.330

使用[延迟加载模式](http://www.developerdotstar.com/mag/bookreviews/joyce_PEAA.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:22:02.343

**建议一**

*   您的应用程序是否需要保存和加载对象和属性的值（也称为“序列化”或“持久化”）？

*   您的应用程序是否需要具有同一类的多个实例？

如果这个问题的答案是正确的，那么您似乎需要将数据存储在数据库中，正如@larsmans 建议的那样。

**建议二**

另一件事。你没有提到你使用的是什么编程语言。在 C++、Delphi（Object Pascal）、D 等编程语言中，可以通过两种方式处理另一个对象中的对象：作为对象的一部分，或者作为指向子对象的指针。

对于您的场景，我建议使用指向对象的方法。

在 Java、PHP、C#、VB.NET 等编程语言中，有一个称为引用的概念，实际上它与指向对象的指针相同，因此您无需执行任何其他操作。

非指针示例：

```
class SubClass
{
  public: 
    int X;
    int Y;      
}; // class SubClass

class MainClass
{
  public:
    int Color;
    SubClass SubObject;

  public:
    /* constructor */ MainClass()
    {
      this.Color = 7;
      this.SubObject();
    } // /* constructor */ MainClass(...)

    /* destructor */ ~MainClass()
    {
      this.~SubObject();
      this.Color = 0;
    } // /* destructor */ MainClass(...)
}; // class MainClass

void main()
{
  MainClass* MainObject = new MainClass();
    MainObject->Color = 5;
    MainObject->SubObject.X = 19;
    MainObject->SubObject.Y = 32;
  delete MainObject();
}  // void main(...) 
```

指向对象的指针示例：

```
class SubClass
{
  public: 
    int X;
    int Y;      
}; // class SubClass

class MainClass
{
  public:
    int Color;
    SubClass* SubObject;

  public:
    /* constructor */ MainClass()
    {
      this.Color = 7;
      this.SubObject = new SubClass();
    } // /* constructor */ MainClass(...)

    /* destructor */ ~MainClass()
    {
      delete this.SubObject();
      this.Color = 0;
    } // /* destructor */ MainClass(...)
}; // class MainClass

void main()
{
  MainClass* MainObject = new MainClass();
    MainObject->Color = 5;
    MainObject->SubObject->X = 19;
    MainObject->SubObject->Y = 32;
  delete MainObject();
}  // void main(...) 
```

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:48:29.593

在一般情况下，您将需要一些实体加入您域中的实体。比如说，您将拥有一个`StudentRegistry`保存学生与其教授/讲师之间的通信的文件。这确实类似于 RDBMS 模式设计，因此您可以参考[ER DB 设计方法](http://en.wikipedia.org/wiki/Database_design)（显然，您将使用类而不是表。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:45:16.810

听起来您在描述[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)。

# macos - 为什么在 Mac OS X 10.8 上安装 qt4-mac 时会看到“No SDK found”错误？

> ID：10553564
> 
> 赞同：1
> 
> 时间：2012-05-11T14:41:50.130
> 
> 标签：macos, qt, macports

当我尝试在我的 Mac OS X Mountain Lion 开发者预览版上安装 Qt 时，我看到了这个错误。

```
ws5:1.4 nick$ sudo port install qt4-mac
Password:
--->  Computing dependencies for qt4-mac
--->  Configuring qt4-mac
No SDK found in /Applications/Xcode44-DP4.app/Contents/Developer/SDKs for 10.8 ;  configure will probably fail. 
  Please install Apple's Developer Tools again. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:42:51.127

使用 XCode 4.4 开发人员预览版，使用它似乎可行，但我不确定它是否是最佳解决方案。

```
ln -s /Applications/Xcode44-DP4.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ /Applications/Xcode44-DP4.app/Contents/Developer/SDKs 
```

创建此链接后，警告似乎消失了。

# css - Firefox 12 忽略输入样式[type="email"]

> ID：10553565
> 
> 赞同：0
> 
> 时间：2012-05-11T14:41:50.103
> 
> 标签：css, forms, drupal, styles, drupal-theming

我目前正在处理的一个 Drupal 站点的侧边栏中有一个表单。`input[type="email"]`我已经为元素指定了样式。但是 Firefox 不尊重我指定的样式。我试过使用`input[type="email"`选择器以及通过它的 id 调用元素`input#edit-mail`无济于事。任何帮助将不胜感激。此问题发生在 FF v12 中。

编辑：原来 -ms-filter 导致解析错误，导致 Firefox 忽略过滤器后指定的样式。感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:18:00.070

结果是 -ms-filter 导致了一个解析错误，导致 Firefox 忽略了过滤后指定的样式。感谢您的建议。

# iphone - 为什么UIKEYBOARD高度是1024

> ID：10553571
> 
> 赞同：0
> 
> 时间：2012-05-11T14:42:24.783
> 
> 标签：iphone, ios, uiwebview, uikeyboard

我正在尝试使用以下内容获取 UIkeyboard 高度：

```
float keyboardHeight;
CGRect keyboardFrame = [[[aNotification userInfo]
                              objectForKey:UIKeyboardFrameBeginUserInfoKey]
                             CGRectValue];
keyboardHeight = keyboardFrame.size.height; 
```

但它返回的大小是 1024.00 。我想知道这是否正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:01:13.373

你在什么设备上测试？在 iPad 3 上，横向键盘的高度为 1024 像素。

# linux - 在 Linux 服务器上设置 git

> ID：10553574
> 
> 赞同：0
> 
> 时间：2012-05-11T14:42:25.993
> 
> 标签：linux, authentication, github, redhat, ssh-keys

我正在尝试在运行 Linux RedHat 的服务器上设置一个 git repo。

我按照 Github 帮助页面上的说明进行操作。我到达了指令告诉我 ssh 进入 git@github.com 的步骤。

这给了我以下错误-

```
 $ ssh -T git@github.com
 Permission denied (publickey). 
```

所以然后我做了 $ ssh -vT git@github.com 并得到了这个 -

```
 OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
 debug1: Reading configuration data /home/min/a/foo/.ssh/config
 debug1: Applying options for *
 debug1: Reading configuration data /etc/ssh/ssh_config
 debug1: Applying options for *
 debug1: Connecting to github.com [some IP] port 22.
 debug1: Connection established.
 debug1: identity file /home/shay/a/foo/.ssh/id_rsa type -1
 debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5p1 Debian-6+squeeze1+github2
 debug1: match: OpenSSH_5.5p1 Debian-6+squeeze1+github2 pat OpenSSH*
 debug1: Enabling compatibility mode for protocol 2.0
 debug1: Local version string SSH-2.0-OpenSSH_5.3
 debug1: SSH2_MSG_KEXINIT sent
 debug1: SSH2_MSG_KEXINIT received
 debug1: kex: server->client aes128-ctr hmac-md5 none
 debug1: kex: client->server aes128-ctr hmac-md5 none
 debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
 debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
 debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
 debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
 debug1: Host 'github.com' is known and matches the RSA host key.
 debug1: Found key in /home/min/a/foo/.ssh/known_hosts:1
 debug1: ssh_rsa_verify: signature correct
 debug1: SSH2_MSG_NEWKEYS sent
 debug1: expecting SSH2_MSG_NEWKEYS
 debug1: SSH2_MSG_NEWKEYS received
 debug1: SSH2_MSG_SERVICE_REQUEST sent
 debug1: SSH2_MSG_SERVICE_ACCEPT received
 debug1: Authentications that can continue: publickey
 debug1: Next authentication method: publickey
 debug1: Trying private key: /home/shay/a/foo/.ssh/id_rsa
 debug1: No more authentication methods to try.
 Permission denied (publickey). 
```

这是我目前所在的位置 -

```
 $ pwd
 /home/min/a/foo/.ssh 
```

我不明白出了什么问题？此外，如果我尝试通过 ssh-add 添加此路径，它会显示“无法打开与您的身份验证代理的连接”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:06:00.743

您似乎没有将密钥上传到 github，或者您上传的密钥与当前用户的默认密钥不匹配。

检查您的本地密钥是否在 github 上：

*   获取密钥的指纹：`ssh-keygen -lf ~/.ssh/id_rsa.pub`
*   对照 github 上允许的密钥列表检查这一点：[https ://github.com/settings/ssh](https://github.com/settings/ssh)

或者，检查您的密钥是否已在 github上*启用。*[不久前，在 github 上](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation)有一个与 ssh 密钥相关的安全问题。所有 ssh 密钥都被禁用，以强制用户查看他们允许的密钥列表。如果您最近没有使用 github，您的仍然可能被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:19:59.880

以防万一有人感兴趣或有类似的问题并查看这篇文章，解决方案是从 .ssh 目录 cd 出来，然后 ssh 进入 github。如果其他所有内容都完全按照 github 的帮助页面进行，这将解决问题。

# wcf - IIS 6.0 阻止 WCF 4.0 Web 服务调用上的“PUT”和“DELETE”方法类型（403 禁止）

> ID：10553575
> 
> 赞同：3
> 
> 时间：2012-05-11T14:42:28.497
> 
> 标签：wcf, iis-6

我是一名开发人员，试图帮助我的服务器管理员弄清楚如何纠正这个问题。

但我有一个应用程序使用 WCF 4.0 无配置设置来进行 RESTful Web 服务调用。在本地一切正常，但是当推送到我的服务器时，所有 PUT 和 DELETE 请求都会返回 403 禁止错误。

在四处搜索后，我找不到任何似乎有效的东西，而且我不确定是否有一些日志可以帮助解决这个问题，我不是服务器人，显然我的“服务器人”也不是. 因此，任何有关将他指向何处或可能导致此问题的提示都将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T15:40:45.413

您需要将动词添加到 IIS 6 上的相应处理程序中。下面的链接解释了如何实现它。

步骤如下： 1\. 右键单击​​ IIS 中的虚拟目录

2.  选择“属性”

3.  点击“配置...”

4.  在“应用程序扩展”列表中搜索 .svc

5.  选择“.svc”（如果不存在，则需要通过单击添加并使用与 .aspx 扩展名相同的可执行文件路径来添加它）

6.  点击“编辑...”

7.  在“动词”列表中选择“所有动词”

链接：

1.  [MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/624e1fc2-f878-4740-84d3-b67096d4d4b0/deploy-project-help-config-iis-6-putdelete-http-verb)

2.  [在 IIS 6 上设置应用程序映射](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/4c840252-fab7-427e-a197-7facb6649106.mspx?mfr=true)

# c# - 服务引用对象未序列化

> ID：10553579
> 
> 赞同：0
> 
> 时间：2012-05-11T14:42:39.473
> 
> 标签：c#, wcf, xml-serialization

WCF 服务引用中定义的相当复杂的对象`RequestList`也是同一服务引用中方法的输入参数。客户端已经生成了一个 XML，所以我们需要做的就是 XmlSerialize 对象，然后反序列化客户端 xml。尝试`XmlSerializer`使用给定类型创建新的时抛出异常。

```
XmlSerializer serializer = new XmlSerializer(typeof(RequestList)); 
```

抛出 InvalidOperationException：

```
Unable to generate a temporary class (result=1).
error CS0030: Cannot convert  type 'ServiceReference.Parameter[]' 
  to 'ServiceReference.Parameter'
error CS0029: Cannot implicitly convert type 'ServiceReference.Parameter' 
  to'ServiceReference.Paramter[]' 
```

数组不应该很容易序列化吗？为什么会引发此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:49:18.043

我认为这里的问题与错误或其他问题没有直接关系。您可能正在使用一个对象，或者该对象具有无法使用 xml 序列化进行序列化的属性。比如`Dictionary<T>`不能直接序列化；它给出了错误；为了`Dictionary<T>`在xml序列化中使用，应该通过继承字典来实现IXmlSerializable接口。

情况可能并非如此，因为另一方面我不知道您要序列化什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:29:01.647

我发现了问题所在。显然有某种错误。在`RequestList`类的定义中，有一个带有双数组的参数`Parameter[][]`。显然这会导致问题。解决方法是使其成为单个数组：`Parameter[]`. 一旦我这样做了，它就完美地工作了。

# java - 录音：使用 Red 5 服务器和 PHP /Java

> ID：10553584
> 
> 赞同：0
> 
> 时间：2012-05-11T14:42:53.300
> 
> 标签：java, php, javascript, red5

我有一个要求，我必须使用 RED 5 媒体服务器进行嵌入网页的录音。所以我已经安装了 RED 5 服务器，它已经启动并正在运行。现在我不知道我应该如何开始用 php 编码（因为网站是用 php 设计的）并设计一个录音应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:07:13.873

我过去曾使用过 RED5 和一些应用程序作为视频或录音机。

您需要使用**Flash 或 Flex 与 ActionScript**连接到 RED5，然后录制流

webapps文件夹下Red5有很多例子，尝试下载一些.FLA看看里面的代码。

**oflaDemo 是了解其工作原理**的良好开端。**也有 SimpleRecorder 或 MessageRecorder 的例子（你安装的版本）**

 **这是一个关于 ActionScript 的简单示例

```
// create the connection
var nc:NetConnection = new NetConnection();
nc.connect("rtmp://localhost/myApp");

// create the stream
var ns:NetStream = new NetStream(nc);
ns.publish("myStreamName", "record"); 
```

结果将是一个名为**myStreamName.flv**的 FLV 文件，位于您的 webapp 的流目录中。

一旦你开发了你的 Flash 应用程序，你可以将它嵌入`.SWF`到你的网页中`PHP`

在互联网上有很多例子和开源的视频或录音机，如：

[http://code.google.com/p/red5-recorder/](http://code.google.com/p/red5-recorder/)

希望这可以帮助您开始**

# ruby-on-rails - 使用 Guard 和 Spork 重新加载 RSpec 共享示例

> ID：10553586
> 
> 赞同：3
> 
> 时间：2012-05-11T14:42:57.437
> 
> 标签：ruby-on-rails, ruby, rspec, spork, guard

当我对它们进行更改时，如何让 spork 重新加载我的共享示例？我尝试了以下方法，但没有重新加载它们：

```
Spork.each_run do
  Dir[Rails.root.join("spec/shared_examples/*.rb")].each {|f| require f}
end 
```

我知道我可以在我的 Guardfile 中添加一个观察者，让它在共享示例更改时重新加载环境，但是我的应用程序很大，需要大约 10-15 秒才能重新加载整个环境：

```
watch(/^spec\/shared_examples\/.*\.rb$/) 
```

我宁愿让它重新加载已更改的共享示例，以便我可以有一个更快的反馈循环。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T16:27:12.097

以下是您需要检查的几件事：

在环境配置文件`test.rb`中，确保你有这个

```
 config.cache_classes = !(ENV['DRB'] == 'true') 
```

如果您在 Spork 环境中，这可以确保您不会缓存类。

然后，在确保这些在`.each_run`

```
FactoryGirl.reload
ActiveSupport::Dependencies.clear
ActiveRecord::Base.instantiate_observers 
```

这应该确保您每次运行都重新加载类。

我还将在该`.each_run`部分中保留您的 share_examples 负载。

```
Spork.each_run do
  FactoryGirl.reload
  ActiveSupport::Dependencies.clear
  ActiveRecord::Base.instantiate_observers
  Dir[Rails.root.join("spec/shared_examples/*.rb")].each {|f| require f}  
end 
```

您可能需要使用该`.each_run`部分中 4 行的顺序来确保所有内容都正确加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T00:23:41.203

结果我*还在*Spork.prefork 中加载了 shared_examples，并且由于某种原因导致它们每次运行都不会重新加载。从 Spork.prefork 中删除该行并仅将其放在 Spork.each_run 中修复了该问题，现在任何 shared_examples 的更改都会在测试运行时反映出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:23:09.107

```
Spork.prefork do
  Dir[Rails.root.join("spec/shared_examples/*.rb")].each {|f| require f}
end 
```

# web-services - 如何将 vb6 中的文件上传到 Web 服务

> ID：10553591
> 
> 赞同：-3
> 
> 时间：2012-05-11T14:43:29.393
> 
> 标签：web-services, vb6

如何将文件从 vb6 上传到 webservice

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:26:28.360

如果您想从 VB6 调用 Web 服务，则不能直接调用。但是，您可以使用 Microsoft 的 SOAP 工具包，它将处理 Web 服务调用和文件附件。

# c# - SelectListItem selected = true 不在视图中工作

> ID：10553593
> 
> 赞同：18
> 
> 时间：2012-05-11T14:43:32.793
> 
> 标签：c#, asp.net-mvc

我有一个性别选择字段（--Select--，Male，Female），我正在我的控制器中填充它。当页面加载时，我希望在`pm.Gender`页面加载时自动选择模型中选择的性别。

返回的值`pm.Gender`如下：

*   " "
*   “米”
*   “F”

**看法：**

```
<%: Model.Gender %>
<%: Html.DropDownListFor(m => m.Gender, (IEnumerable<SelectListItem>)ViewData["gender"], new { @class = "span2" })%> 
```

**控制器：**

```
gender = new[] { "Select", "Male", "Female" };
List<SelectListItem> genderselectList = new List<SelectListItem>();
foreach (string item in gender)
{
   SelectListItem sli = new SelectListItem { Text = item, Value = item };

   if (item.Trim().StartsWith(pm.Gender))
      sli.Selected = true;

   genderselectList.Add(sli);
}

ViewData["gender"] = genderselectList; 
```

调试应用程序后，我可以看到它`genderselectList`包含正确的数据以及`Selected = true`应该选择的正确值。但是当页面加载时，下拉列表中没有选择应该使用`Html.DropDownListFor`.

**编辑：**不适用于任何浏览器。

任何人都知道可能导致此问题的原因是什么？任何帮助，将不胜感激。

干杯。

**编辑：（在实施 Kaf 的解决方案后）**
好的，这就是我在实施 Kaf 的解决方案后所做的。

**看法：**

```
<%: Html.DropDownListFor(m => m.Gender, (SelectList)(ViewData["gender"]), new { @class = "span2" }) %> 
```

**控制器：**

```
gender = new[] { "Select", "Male", "Female" };
List<SelectList> genderselectList = new List<SelectList>();
foreach (string item in gender)
{
    SelectList sli;

    if (item.Trim().StartsWith(pm.Gender))
        sli = new SelectList(GetGender(), item, item, item); 
    else
        sli = new SelectList(GetGender(), item, item);
        //without selectedValue

    genderselectList.Add(sli);
}

ViewData["gender"] = genderselectList; 
```

当我这样做时，我得到以下异常：
`Unable to cast object of type 'System.Collections.Generic.List`1[System.Web.Mvc.SelectList]' to type 'System.Web.Mvc.SelectList'.`

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-11T15:59:25.767

我建议最好为 SelectList 使用强类型属性（而不是使用 ViewBag/ViewData）。我相信您所期望的是您的下拉列表将与模型中的性别选择一起预先选择。这是一个解决方案（代码不是 100% 干净的。但这会起作用）

模型

```
public class TestModel
{
    public string Gender { get; set; }

    public IEnumerable<SelectListItem> GenderList
    {
        get
        {
            List<SelectListItem> list = new List<SelectListItem> { new SelectListItem() { Text = "Select", Value = "Select" }, new SelectListItem() { Text = "Male", Value = "Male" }, new SelectListItem() { Text = "Female", Value = "Female" } };
            return list.Select(l => new SelectListItem { Selected = (l.Value == Gender), Text = l.Text, Value = l.Value });
        }
    }
} 
```

控制器动作

```
public ActionResult MyView()
{
    TestModel m = new TestModel();
    m.Gender = "Female";
    return View(m);
} 
```

我的视图.cshtml

```
@model TestModel

@{
    ViewBag.Title = "MyView";
}

<h2>MyView</h2>
@using (Html.BeginForm())
{
    <div>
          @Html.DropDownListFor(model => model.Gender, Model.GenderList)
    </div>
} 
```

**输出**

选择了“女性”选项的下拉菜单

![在此处输入图像描述](../Images/a7b645a6a889316ea60861c338d440b7.png)

**编辑**

根据评论找到以下示例项目的链接

1) [https://github.com/prashanth-t/DropdownDemo_BareBones](https://github.com/prashanth-t/DropdownDemo_BareBones)（使用 MVC 4 空模板。文件更小，最小）

2) [https://github.com/prashanth-t/DropdownDemo](https://github.com/prashanth-t/DropdownDemo)（使用MVC 4 互联网应用程序模板。更大的文件大小）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-10T05:09:48.140

这是 ASP.NET MVC Razor View 中的一个已知**错误**。根据已知的错误文档

"*这个问题背后的原因是 asp.net MVC 首先在下拉列表的名称和模型上的属性之间查找匹配。如果匹配，则覆盖 SelectList 的选定值。更改下拉列表的名称解决问题所需的一切。* ”

我在这里给出一个小例子，你可以用它来测试分辨率。

```
 var paymentTypeList = new List<SelectListItem>
                {
                    new SelectListItem { Text = "Select Payment Type", Value = "NA" },
                    new SelectListItem { Text = "Card", Value = "Card" },
                    new SelectListItem { Text = "Paytm Wallet", Value = "Paytm Wallet" },
                    new SelectListItem { Text = "Cash", Value = "Cash", Selected = true },
                    new SelectListItem { Text = "Credit", Value = "Credit" },
                    new SelectListItem { Text = "Other", Value = "Other" }
                };
 ViewBag.paymentTypeList = paymentTypeList; 
```

**解决方案选项 1（最简单）** - 在 MVC 视图中更改选择列表 ID 的声明 ID 的名称，例如

```
@Html.DropDownList("paymentTypeListNew", (List<SelectListItem>)ViewBag.paymentTypeList, new { @class = "form-control select2 select1" }) 
```

**解决方案 2：（仅使用与 viewbag/viewdata 属性匹配的 @Html.DropDownList 的单个构造函数）**

要确保选中的项目（本例中为现金）被选中，请在 MVC Razor 视图中执行以下操作。**仅使用以下没有任何 CSS 或新对象值的构造函数**

```
 @Html.DropDownList("paymentTypeList") 
```

现在，如果您担心无法初始化 CSS，那么您需要以编程方式初始化 CSS。例如，如果您使用的是 Jquery，那么您可以使用

```
$("#paymentTypeList").addClass("form-control");
            $("#paymentTypeList").addClass("select2"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T15:00:03.803

使用 select 获取性别的方法：

```
private Dictionary<string,string> GetGender(){
    Dictionary<string, string> myDic = new Dictionary<string, string>();
    myDic.Add(System.DBNull.Value.ToString(), "Select");
    myDic.Add("Male", "Male");
    myDic.Add("Female", "Female");
    return myDic;
} 
```

在控制器中：

```
//without selectedValue
ViewData["gender"]  = new SelectList(GetGender(), "Key", "Value"); 
```

或者

```
//"Male" as selectedValue
ViewData["gender"]  = new SelectList(GetGender(), "Key", "Value", "Male"); 
```

在视图中：

```
Html.DropDownListFor(m => m.Gender, (SelectList)(ViewData["gender"]),
                        new { @class = "span2" }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T14:57:54.443

在控制器中试试这个：

```
string[] gender = new string[] {"Male", "Female"};
string selectedGender = gender.Where(x => x.StartsWith(pm.gender)).FirstOrDefault();
ViewData["gender"] = new SelectList(gender, selectedGender); 
```

在视图中：

```
<%: Html.Dropdownlist(x => x.Gender, ViewData["gender"], "Select") %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-18T13:24:58.350

试试这个;

```
public static List<SelectListItem> ListSexo { get; } = new List<SelectListItem>
    {
        new SelectListItem{Selected =true, Value="N", Text="Seleccione"},
        new SelectListItem{Value="F", Text="Femenino"},
        new SelectListItem{Value="M", Text="Masculino"}
    };

<select asp-for="Sexo" asp-items="Commons.ListSexo" class="form-control"></select> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-20T02:58:34.783

在自己寻找这个问题的答案之后——我一路上得到了一些提示，但这是最终的解决方案。它是一种扩展方法。我正在使用 MVC 5 C# 4.52 是目标。下面的代码将选择设置为列表中的第一项，因为这是我需要的，您可能只想传递一个字符串并跳过枚举 - 但我也想确保我有一些东西从数据库返回到我的 SelectList）

> 扩展方法：

```
public static class SelectListextensions
{

    public static System.Web.Mvc.SelectList SetSelectedValue
(this System.Web.Mvc.SelectList list, string value)
    {
        if (value != null)
        {
            var selected = list.Where(x => x.Text == value).FirstOrDefault();
            selected.Selected = true;                
        }
        return list;
    }    
} 
```

对于那些喜欢完全低调的人（比如我）来说，这里是用法。对象类别有一个定义为名称的字段 - 该字段将在下拉列表中显示为文本。您可以在上面的代码中看到对 Text 属性的测试。

> 示例代码：

```
SelectList categorylist = new SelectList(dbContext.Categories, "Id", "Name");

SetSelectedItemValue(categorylist); 
```

> 选择列表功能：

```
private SelectList SetSelectedItemValue(SelectList source)
{
   Category category = new Category();

    SelectListItem firstItem = new SelectListItem();

    int selectListCount = -1;

    if (source != null && source.Items != null)
    {
        System.Collections.IEnumerator cenum = source.Items.GetEnumerator();

        while (cenum.MoveNext())
        {
            if (selectListCount == -1)
            {
                selectListCount = 0;
            }

            selectListCount += 1;

            category = (Category)cenum.Current;

            source.SetSelectedValue(category.Name);

            break;
        }
        if (selectListCount > 0)
        {
            foreach (SelectListItem item in source.Items)
            {
                if (item.Value == cenum.Current.ToString())
                {
                    item.Selected = true;

                    break;
                }
            }
        }
    }
    return source;
} 
```

你可以把它变成一个通用的全包功能/扩展——但它对我来说是这样工作的。

# eclipse - 对没有上下文根的 Java 应用程序进行本地测试

> ID：10553594
> 
> 赞同：0
> 
> 时间：2012-05-11T14:43:41.763
> 
> 标签：eclipse, tomcat, root, contextpath

这是我的jsp中的示例链接：

```
<a href="/admin/articleEdit">New Article</a> 
```

我的应用程序将在没有上下文根的情况下部署，因此此类链接将在生产中工作。但是在本地，这会失败，因为链接不包含上下文根。我尝试使用“./”开始链接，但这并不总能解决相关问题。

有没有办法在没有上下文根的情况下使用 Eclipse 和 Eclipse 嵌入式 Tomcat 服务器本地测试 java 应用程序？Eclipse 不允许我从项目中删除上下文根。我尝试将上下文根设置为“/”，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:21:05.673

不要更改上下文根，而是修复您的 jsp href。请参阅此问题的答案：[在 Web 应用程序中处理上下文的任何巧妙方法？](https://stackoverflow.com/q/125359/116509)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T15:14:28.723

1.  双击*Servers*列表中的 Tomcat 实例进行编辑。
2.  选择底部的*模块选项卡。*
3.  突出显示您的 webapp，然后单击*编辑*按钮。
4.  保持*文档库*不变，将*路径*设置为空白。
5.  用*OK 确认*。
6.  确保 webapp 已发布并（重新）启动服务器。

# iphone - 拒绝后重新提交ios应用

> ID：10553596
> 
> 赞同：0
> 
> 时间：2012-05-11T14:43:51.290
> 
> 标签：iphone, ios, app-store

我有一个 iOS 应用程序，它使用 Web 服务器来获取体育信息。现在这个应用程序被苹果拒绝了，因为它显示了关于NBA和国际奥林匹克委员会以及英格兰超级联赛的信息。所以我对代码进行了更改以避免获取这些信息。现在我的问题是：我需要做什么才能重新提交？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:53:49.783

如果您的应用程序符合 Apples Guidelines，您应该前往[iTunesConnect](http://itunesconnect.apple.com)并再次单击“准备提交二进制文件”按钮。如果这样做了，你需要存档，这应该会在 Xcode 中打开 Organizer。现在您应该“验证”并最终将您的构建“分发”到 AppStore。

# c++ - cin 和 getline 跳过输入

> ID：10553597
> 
> 赞同：48
> 
> 时间：2012-05-11T14:43:51.890
> 
> 标签：c++, input, getline, cin

早些时候我发布了一个关于`cin`跳过输入的问题，我得到了刷新和使用的结果`istringstream`，但现在我尝试了所有可能的解决方案，但它们都不起作用。

这是我的代码：

```
void createNewCustomer () {
    string name, address;

    cout << "Creating a new customer..." << endl;
    cout << "Enter the customer's name: "; getline(cin, name);
    cout << "Enter the customer's address: "; getline(cin, address);

    Customer c(name, address, 0);
    CustomerDB::addCustomer(c);

    cout << endl;
} 
```

但我仍然得到同样的东西，跳过输入，当它确实接受输入时，它会接受它们并在名称中存储任何内容，并且在地址中它需要我在名称中写的内容，但从第二个字母到结尾

我的代码有什么问题？

我单独尝试了`cin.ignore()`,`cin.get()`和`cin.clear()`所有这些，它们都不起作用

编辑：

`mainMenu()`main.cpp 中的 main 方法仅调用

```
void mainMenu () {
    char choice;

    do {
        system("cls");
        mainMenuDisplay();
        cin >> choice;
        system("cls");

        switch (choice) {
            case '1':
                customerMenu();
                break;

            case '2':
                dvdMenu();
                break;

            case '3':
                receiptMenu();
                break;

            case '4':
                outro();
                break;

            default:
                cout << '\a';
        }

        cin.ignore();
        cin.get();
    } while (choice != '4');
} 
```

我将为客户示例选择 1，这是`customerMenu()`

```
void customerMenu () {
    char choice;

    do {
        system("cls");
        manageCustomerMenu();
        cin >> choice;
        system("cls");

        switch (choice) {
            case '1':
                createNewCustomer();
                break;

            case '2':
                deleteCustomer();
                break;

            case '3':
                updateCustomerStatus();
                break;

            case '4':
                viewCustomersList();
                break;

            case '5':
                mainMenu();
                break;

            default:
                cout << '\a';
        }

        cin.ignore();
        cin.get();
    } while (choice != '5');
} 
```

我再次选择 1 来创建一个新的客户对象，该对象现在将转到 MainFunctions.cpp，它将调用`createNewCustomer()`第一个函数。

```
void createNewCustomer () {
    string name, address;

    cout << "Creating a new customer..." << endl;
    cout << "Enter the customer's name: "; cin.getline(name,256);
    cout << "Enter the customer's address: "; cin.getline(address,256);

    Customer c(name, address, 0);
    CustomerDB::addCustomer(c);

    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-11T14:58:25.410

如果您使用`getline`after `cin >> something`，则需要将换行符从缓冲区中刷新出来。

如果不需要超过换行符的字符，我个人最喜欢的是`cin.sync()`. 但是，它是实现定义的，因此它可能与我的工作方式不同。对于可靠的东西，使用`cin.ignore()`. 或根据需要使用`std::ws`删除前导空格：

```
int a;

cin >> a;
cin.ignore (std::numeric_limits<std::streamsize>::max(), '\n'); 
//discard characters until newline is found

//my method: cin.sync(); //discard unread characters

string s;
getline (cin, s); //newline is gone, so this executes

//other method: getline(cin >> ws, s); //remove all leading whitespace 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-11T15:09:47.447

您的菜单代码的结构是问题所在：

```
cin >> choice;   // new line character is left in the stream

 switch ( ... ) {
     // We enter the handlers, '\n' still in the stream
 }

cin.ignore();   // Put this right after cin >> choice, before you go on
                // getting input with getline. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-11T09:35:24.587

我遇到了这个问题，并使用 getchar() 来捕获 ('\n') 新字符解决了这个问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T15:04:38.750

在这里，`'\n'`cin 的左边正在制造问题。

```
do {
    system("cls");
    manageCustomerMenu();
    cin >> choice;               #This cin is leaving a trailing \n
    system("cls");

    switch (choice) {
        case '1':
            createNewCustomer();
            break; 
```

这`\n`正在被下一个 getline in 消耗掉`createNewCustomer()`。您应该改用 getline -

```
do {
    system("cls");
    manageCustomerMenu();
    getline(cin, choice)               
    system("cls");

    switch (choice) {
        case '1':
            createNewCustomer();
            break; 
```

我认为这将解决问题。

# ios - 使用 MPMediaQuery 加载播放列表

> ID：10553599
> 
> 赞同：1
> 
> 时间：2012-05-11T14:43:59.720
> 
> 标签：ios, xcode, mpmediaquery

在我的应用程序中，我想将用户播放列表保存在 plist 文件中，并在应用程序启动时加载此播放列表。

这是我用来保存的代码：

```
if (self.backgroundMusicItems) {
    NSMutableArray *songsID = [[NSMutableArray alloc] initWithCapacity:0];
    MPMediaItem *item;
    for (item in self.backgroundMusicItems.items) {
        NSNumber *songId = [item valueForProperty:MPMediaItemPropertyPersistentID];
        [songsID addObject:songId];
    }
    NSString *documentdir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *filePath = [documentdir stringByAppendingPathComponent:@"playlist.plist"];
    [songsID writeToFile:filePath atomically:YES];
} 
```

这是我用来加载的代码：

```
NSString *documentdir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *filePath = [documentdir stringByAppendingPathComponent:@"playlist.plist"];

NSArray *myArray = [[NSArray alloc] initWithContentsOfFile:filePath];

NSMutableSet *predicates = [[NSMutableSet alloc] initWithCapacity:0];

if (myArray.count > 0) {
    NSNumber *songId;
    for (songId in myArray) {
        MPMediaPropertyPredicate *predicate = [MPMediaPropertyPredicate predicateWithValue:songId forProperty:MPMediaItemPropertyPersistentID];
        [predicates addObject:predicate];
    }
    MPMediaQuery *query = [[MPMediaQuery alloc] initWithFilterPredicates:predicates];

    NSArray *mediaItems = [query items];
    if (mediaItems.count > 0) [GameOptions sharedClass].backgroundMusicItems = [[MPMediaItemCollection alloc] initWithItems:mediaItems];
} 
```

myArray 包含 2 个项目，但 [query items] 方法返回 0 个项目。我哪里错了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:50:02.507

您要求的歌曲 MPMediaItemPropertyPersistentID 设置为song1 *AND* song2 的值- 这将始终返回零结果，因为任何歌曲在逻辑上都不可能匹配两个不同的 MPMediaItemPropertyPersistentID。

您需要为每个持久 ID 运行查询。

# javascript - 我可以在 asp.net-mvc 3 的 @Ajax.Actionlink 中传递 Javascript 变量吗？

> ID：10553604
> 
> 赞同：4
> 
> 时间：2012-05-11T14:44:11.083
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-3

我有以下 Javascript 代码：

```
var idJS;

$('.disp').click(function () { 
    idJS = $(this).attr("id");   
}) 
```

然后我想这样做：

```
@Ajax.ActionLink("myMethod", "myMethod", "HomeController", new { id = idJS },
  new AjaxOptions() { HttpMethod = "Get", UpdateTargetId = "myDiv" }) 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:52:58.563

这是不可能的，因为 Razor 视图代码是在页面加载时呈现的，因此在 javascript 甚至可以执行之前，所有代码都已解析（转换为 HTML）。

但是，您可以使用 Javascript 来更改链接的属性，例如如下所示（虽然我担心使用 JQuery，但如果需要，请查找 javascript 等效项）

```
$("a").attr("href", "/Home/myMethod/" + idJS); 
```

好的，我会查一下，只有javascript：

```
document.getElementById("link").href = "/Home/myMethod/" + idJS; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:53:20.703

不，服务器端和客户端是两个非常不同的东西。服务器端甚至在到达客户端之前就已呈现。当 $(document).ready() 被触发时，服务器就完成了。

您可以做的是使用 jQuery 更改链接的 ID。有了更多信息，我将能够提供更多帮助，但是使用 jQuery 更改属性是一件简单的事情。

我会将 id 设置为硬编码，例如“ajaxBtn”或其他内容，然后，在您的点击中，即使是 .disp，也可以将数据属性更改为您需要的属性。但是，如果没有更多数据，我无法确定您需要设置 id 的确切原因。

# c# - RegisterHotKey 不适用于不可见的表单（c#）

> ID：10553607
> 
> 赞同：5
> 
> 时间：2012-05-11T14:44:15.997
> 
> 标签：c#, winforms, winapi, hotkeys

我试图在系统托盘中放置一个图标，然后给它一个全局键盘快捷键来执行一项功能。

我正在使用 RegisterHotKey 设置全局键盘快捷键，如果与图标关联的主窗体可见，它就可以工作。但如果表单不可见，则永远不会调用 WndProc 方法。

有任何想法吗？

编辑：我所说的“隐藏”是指将以下内容添加到主表单中：

```
protected override void OnLoad(EventArgs e)
{
    hotKey = new GlobalHotkey(GlobalHotkey.WIN, Keys.T, this);
    bool registered = hotKey.Register();
    Visible = false;
    ShowInTaskbar = false;
    base.OnLoad(e);
} 
```

“已注册”显示为“true”，如果我省略“Visible = false;”，快捷键可以正常工作 和“ShowInTaskbar = false;”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T07:00:32.277

问题在于将 ShowInTaskbar 设置为 false 会更改窗口句柄，这意味着传递给 RegisterHotkey 的 hwnd 不再有效。

设置 ShowInTaskBar*后*注册热键工作正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T12:03:05.993

Winforms 解决了 winapi 中一个非常严格的限制。窗口的某些属性只能在创建窗口时指定，以后不能更改。或者换句话说，它们是在本机 CreateWindowEx() 调用中指定的。

它通过再次调用 CreateWindowEx() 来解决它。或者换句话说，销毁现有窗口并重新创建它。这是一个绝妙的技巧，但它确实有一些副作用。例如，当新窗口自行绘制时，您会看到一点点闪烁。例如，在 TreeView 上可以看到一些更大的副作用。重新创建时，所有节点都会崩溃。很难避免，与原始窗口相关的状态太多了。对于窗体，ShowInTaskbar 属性就是这样一个属性。还有 RightToLeft、FormBorderStyle、ControlBox 等。

最相关的副作用是您遇到的副作用。重新创建窗口总是不可避免地改变 Handle 属性。当您使用 RegisterHotKey() 或使用它的库时，就会出错，winapi 调用使用窗口句柄。因此，当 Winforms 销毁该窗口时，将不再有回调。

这很容易修复，您只是使用了错误的事件处理程序。改为在方法的覆盖中调用`OnHandleCreated`。它在重新创建窗口时重新运行。另一个简单但不那么可靠的解决方法是仅在构造函数中设置 ShowInTaskbar 之类的属性。

# java - 在管理 JDK 方面，“替代方案”真的比 Symlink 和 $PATH 更好吗？

> ID：10553608
> 
> 赞同：7
> 
> 时间：2012-05-11T14:44:16.623
> 
> 标签：java, linux, fedora, fedora16

我刚刚升级到 Fedora 16（从 fedora 12），并且已经阅读/被告知，我应该使用替代工具，而不是通过使用简单的符号链接并将我的 $PATH 设置为该符号链接来设置不同的 JDK。

我不明白替代方案如何更好地管理您的 jdk，当您似乎必须运行时：alternatives --config 不仅适用于“java”，而且适用于所有支持工具（javac、javaws、jstack 等） . 与以下相比，这似乎很悲惨：

（假设 $PATH=/opt/local/java/current/bin:...）

```
rm /opt/local/java/current
ln -s /path/to/unpacked/jdkX /opt/local/java/current 
```

所以我的问题是：

为什么我听说替代方案是在较新版本的 Fedora 中管理 java 工具的正确方法，而完全切换 JDK 似乎要麻烦得多？我刚刚被告知信息很差，还是我错过了一些关于替代品的重要信息？

（注意：如果替代品在某些方面明显更好，请随意残酷。我知道我对这个工具基本上一无所知）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:27:58.640

### 一般的

如果您知道只需要更换一两个工具（例如：java 和 javac），替代方案似乎是可行的方法，因为它是管理应用程序版本的预期方式。

但是，如果您正在使用可能需要设置 JAVA_HOME 或 JDK_HOME 值的多个开发工具，或者如果您不知道该工具可能调用哪个 jdk 实用程序，则似乎将您的 jdk 路径导出到 $JAVA_HOME，并且将其添加到 $PATH 是一种更简单的方法。这可能不是“正确”的方式，但在 java 版本之间切换更快，并且更透明，因为您知道所有 jdk 实用程序都将指向同一版本。

1.  将新 jdk 解压缩到正常的 java 位置 (/opt/local/java/jdk_1.X_XX)
2.  符号链接您当前的 jdk

    ```
    ln -s /opt/local/java/jdk_1.X_XX current 
    ```

3.  在 ~/.bash_profile 或 ~/.bashrc 添加

    ```
    JAVA_HOME=/opt/local/java/current
    export JAVA_HOME
    JDK_HOME=$JAVA_HOME
    export JDK_HOME

    PATH=$JAVA_HOME/bin:$PATH
    export PATH 
    ```

4.  现在，如果您需要切换 jdks，您只需交换符号链接

    ```
    rm /opt/local/java/current
    ln -s /opt/local/java/new_jdk_directory current 
    ```

### 特定于 Ubuntu

在 UBUNTU 上，这个问题似乎已经通过[update-java-alternatives](http://manpages.ubuntu.com/manpages/hardy/man8/update-java-alternatives.8.html)解决了，它将更新给定运行时或开发工具包（JRE/JDK）的所有替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T21:04:07.350

Alternative 是管理 jdks 的一种出色、简单且有效的方式。如果需要，您可以快速切换到所需的版本。如果您发现替代方案很困难，我建议您查看[此](http://www.shinephp.com/install-jdk-7-on-ubuntu/)页面，该页面以出色的方式解释了替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:49:29.630

替代系统允许您使用一个命令一次性管理所有这些命令的符号链接，*而无需*在您的`$PATH`. 它还将处理需要符号链接的事物列表中的更改（包括不涉及的事物`$PATH`；JDK 不仅包含命令），因为每个版本都注册了需要符号链接的事物。

# .net - IIS 7.0 上的 .NET 4.0 项目

> ID：10553609
> 
> 赞同：0
> 
> 时间：2012-05-11T14:44:18.480
> 
> 标签：.net, iis-7

我们有一个运行 .NET 框架 3.5、MVC2 应用程序的 IIS 7.0 服务器。我们现在需要在同一台服务器上运行 .NET Framework 4.0、MVC3 应用程序，并让这两个应用程序从同一台服务器上运行。

每当我在部署后尝试浏览 4.0/MVC3 网站时，都会收到 404.0 错误，它找不到 C:\inetpub\wwwroot\MYNEWAPP\Error

该项目在本地机器上运行良好。我觉得我已经走遍了每一条路（包括本网站上的路），但仍然无法修复它。同一台服务器上的旧网站仍然可以正常工作。我相信我也正确设置了游泳池。

接下来我可以在哪里看？我找不到许可问题或类似问题。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:47:04.197

.net 3.5 和 4 可以很好地共存。但是，您需要确保将工作进程设置为使用正确的框架。.net 4 需要 4.0 运行时，.net 3.5 需要 v2.0 运行时。

# c# - 在 C# 中使用 WINAPI 时如何检测何时滚动到窗口底部

> ID：10553611
> 
> 赞同：2
> 
> 时间：2012-05-11T14:44:22.300
> 
> 标签：c#, winforms, winapi

我正在创建一个应用程序来使用 C# .NET 4 截取滚动窗口的屏幕截图。

我已经通过使用带有 WM_MOUSEWHEEL 的 WINAPI SendMessage 来解决这个问题，一次向下移动 1 行并拍摄每行的屏幕截图。

为了检测我是否已经到达底部，我比较了最后两张拍摄的图像，如果它们相同，我已经到达底部。

当最后一个 WM_MOUSEWHEEL 不是整行时，问题就来了。

例如：窗口高 95px 每行 10px

我最终会得到 10 个图像，每个 10 像素高以拼接，但最后一个图像太大，最终会复制（在本例中）85 到 90 像素之间的区域

有没有其他方法使用 WINAPI 来检测滚动了多少像素或对所采取的方法有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:52:39.840

看[`GetScrollPosition`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787585%28v=vs.85%29.aspx)和[`GetScrollRange`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787587%28v=vs.85%29.aspx)

我认为这些 API 调用可以为您提供所需的信息。

# android - 通过 android 应用程序在谷歌地图上绘制图钉

> ID：10553612
> 
> 赞同：1
> 
> 时间：2012-05-11T14:44:22.250
> 
> 标签：android, google-maps, itemizedoverlay, ondraw, overlayitem

我是谷歌地图的新手，我正在做一个 android 应用程序，我想在其中制作一个按钮，点击它会在我之前声明的某个地方显示一个带有图钉的地图（我已经有了经度和纬度） 。我还希望用户能够单击一个按钮，以便能够打开谷歌地图并自己在地图上制作图钉。类似代码的任何想法或示例？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:01:29.510

一个好的起点是阅读一些关于 Android 版 Google Maps API 的教程。例如，看[这里。](http://www.vogella.com/articles/AndroidLocationAPI/article.html#maps)

不要忘记在 Eclipse ADT 中选择“Google API”的目标 API。这就是您应该访问 Android Google Maps API 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:07:45.577

例如。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    MapView mapView;

    mapView = new MapView(this,data.getAPIKEY());
    mapView.setClickable(true);       
    setContentView(mapView);

    GeoPoint srcGeoPoint = new GeoPoint(22, 70);

    List<Overlay> mapOverlays = mapView.getOverlays();

    Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pin_green);

    CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable);

    OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

    srcitemizedOverlay.addOverlay(srcoverlayitem);

     mapOverlays.add(srcitemizedOverlay);

    mapView.setBuiltInZoomControls(true);

    mapView.displayZoomControls(true);

    mOverlays = mapView.getOverlays();

    mapView.getController().animateTo(srcGeoPoint);

    mapView.getController().setZoom(12);
}

protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
}

private Drawable getDrawable(String fileName)
{
    return Drawable.createFromStream(_activity.getClass().getClassLoader().getResourceAsStream(fileName), "pin");
} 
```

# jquery - 带有 ASP.NET 的 MVC3 在同一视图上提交表单后显示数据结果

> ID：10553620
> 
> 赞同：1
> 
> 时间：2012-05-11T14:45:00.423
> 
> 标签：jquery, ajax, asp.net-mvc-3, partial-views

我目前正在开发一个 MVC3 ASP.NET 应用程序，它要求用户在表单中填写一些简单的文本框，然后点击提交按钮。

单击提交按钮时，控制器使用来自文本框的输入并使用 LINQ to SQL 调用存储过程查询 SQL 数据库并返回数据表。目前，提交按钮将在新视图页面的表格中显示数据，但是我希望对其进行修改，以使生成的数据表直接加载到提交按钮下方，而无需刷新页面。

现在我知道使用 AJAX 或 Jquery 都是必要的，我只是在努力理解如何在不将用户发送到新页面的情况下呈现数据。

视图页面中的表格：

```
<% using (Html.BeginForm("RunQuery","RecentActivity"))
   {%>

    <fieldset>
        <legend></legend>
        <p>
            <label for="Name">Name:</label>
            <%= Html.TextBox("Name") %>
            <%= Html.ValidationMessage("Name", "*") %>

        </p>
        <p> <label for="StartDate"> Start Date:</label>
            <%= Html.TextBox("StartDate")%>
            <%= Html.ValidationMessage("StartDate", "*") %>

            <label for="EndDate"> End Date:</label>
            <%= Html.TextBox("EndDate") %>
            <%= Html.ValidationMessage("EndDate", "*") %>
        </p>

        <p>
            <input type="submit",id="submit", value="Submit" />
        </p>

      </fieldset>   
<% } %> 
```

控制器：

```
 ModelDataContext db = new ModelDataContext();
    [HttpPost]

    public ActionResult RunQuery(string Name,string StartDate, string EndDate)
    {

        var results= db.lastndays(Name, StartDate, EndDate);
        return View(results.ToList());  
    } 
```

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:57:14.480

你可以试试

```
$(":submit").click(function(e){
 e.preventDefault(); //this will prevent the form from submitting
 var $name=$(":input[name='Name']");
 var $StartDate=$(":input[name='StartDate']");
 var $EndDate=$(":input[name='EndDate']");
 //if you are using unobtrusive validation
 if($('form').valid()){
 $.post("/",{Name:$name,StartDate:$StartDate,EndDate:$EndDate},function(data){
   if(data.results!='error')
       console.log(data.results);
  },'json');
}else alert('form not valid');
}); 
```

在控制器中

```
[HttpPost]
    public JsonResult RunQuery(string Name,string StartDate, string EndDate)
    {
        var results= db.lastndays(Name, StartDate, EndDate);
        if(/*there are results*/){
         return Json(new{results=results.ToList()});  
         }else{
          return Json(new{results="error"});  
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T19:25:47.933

我会从 POST 中拆分页面名称。我还会为您的表单命名，以便在 jquery 中更容易处理。这也将允许您序列化整个表单，而不必单独获取每条数据。

然后使用这样的jquery调用来提交点击表单

```
$(":submit").live('click', function () {
    $.ajax({
        url: "/RecentActivity/RunQuery",
        type: "POST",
        data: $("#QueryForm").serialize(),
        error: function (data) {
            var errorMessage = $.parseJSON(data.responseText);
        },
        success: function (data) {
            if (data) {
                $('#results-div').html(data);
            }
            else {
                $('#results-div').html('no data');
            }
        }
    });

    return false;
}); 
```

创建一个局部视图，从查询中获取结果并将其样式化到 html 表中。这样，您的部分视图将返回 html，您可以使用成功处理程序中的调用来替换 div 中的 html。

# algorithm - 基本推荐引擎算法

> ID：10553621
> 
> 赞同：6
> 
> 时间：2012-05-11T14:45:01.063
> 
> 标签：algorithm, recommendation-engine

我正在寻找在 Objective-C 中编写一个基本的推荐系统，并且我正在为这项工作寻找一个基本的算法。不幸的是，现成的系统不在讨论范围内，因为似乎没有一个适用于 Objective-C。

我将有一个项目数据库，每个项目都有标签（想想带有“恐怖”、“动作”等标签的电影）。每个项目将有大约 5 个这些标签。当用户第一次使用该应用程序时，他们的个人资料将根据他们对一系列问题的输入进行准备，将一些标签与他们的个人资料相关联。

随着用户继续使用系统并对各种项目进行评分（基于讨厌/喜欢/喜欢），我想根据该反馈调整推荐标签的权重。随着他们的个人资料的增长，我还想考虑他们评级的其他一些属性，例如，如果涉及电影，则为“80 年代”。或者可能是导演，坚持电影主题。

我选择避免使用普通（或至少流行的）推荐系统，它会寻找相似的用户来生成推荐。这将有一个*大型*项目数据库和最少的用户来启动。

任何人都可以为这样的算法推荐一个好的起点，我不想重新发明轮子，而且还有很多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T07:54:01.540

能否请您参考python-recsys：[https](https://github.com/ocelma/python-recsys) ://github.com/ocelma/python-recsys ，该软件使用SVD算法，我认为它是一个基本算法但足够有效。所需的库是 numpy 和 scipy，它们是用 C 编写的，并由 Python 包装。我认为编译和移植到objective-c很容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T22:13:54.127

您可以使用听起来非常适合您需求的基于项目的推荐。您可以稍后开始将标签合并到权重中，但现在我建议只考虑项目。

[您可以在http://www.cs.carleton.edu/cs_comps/0607/recommend/recommender/itembased.html](http://www.cs.carleton.edu/cs_comps/0607/recommend/recommender/itembased.html)了解更多信息。网上有一些很好的实现。

您在帖子中提到的将称为基于用户的协同过滤。

# javascript - window.location.reload 完成了吗？

> ID：10553625
> 
> 赞同：3
> 
> 时间：2012-05-11T14:45:18.767
> 
> 标签：javascript, windows, reload

我打电话

```
window.location.reload(false) 
```

在 javascript 方法中更新页面。在此调用之后，我还有其他 javascript 调用。在调用其他 javascript 调用之前，有没有办法知道 window.location.reload(false) 何时完成运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:48:24.290

您只需提供一个函数来 onload ：重新加载与加载没有什么不同。

```
window.onload = function() { // ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:47:33.820

您的代码行`window.location.reload(false)`导致浏览器重新加载当前页面 - 在此语句之后不会执行任何脚本....

您可以在第一次加载时设置 cookie - 然后在后续加载时检查 cookie 的存在并执行操作......伪代码：

```
onload = check cookie
if cookie is present
   run function
else
   set cookie
   reload 
```

您可以检查 cookie 上的时间并选择在经过一段时间（例如 1 小时）后执行该功能....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:01:11.890

我使用主题标签来设置变量，告诉我页面是否重新加载。你可以这样做：

```
// Get the hash of the page
var hashstring = window.location.hash.substring(1);
var found = false;

// Do a hash exist?
if (hashstring.length > 0) 
{
    // Split the hash by '&'-sign (in case you have more variables in the hash, as I have)
    var a = hashstring.split("&");

    // Loop through the values
    for (i = 0; i < a.length; i++)
    {
        // Split the string by '=' (key=value format)
        var b = a[i].split("=");

        // If the key is 'reloaded' (which tells us if the page is reloaded)
        if(b[0] == 'reloaded')
        {
            found = true;
        }
    }
}    

if(!found)
{
    location.hash = 'reloaded=true';
    window.location.reload();
}

// Do other stuff, this will only be executed if the page has been reloaded 
```

我已经将在我的项目中的一个单独的函数中找到哈希中的变量的代码，但是为了简单起见，我只是在上面添加了它。这使得可以确定页面是否已重新加载，并仅在已重新加载时运行代码。

# ruby-on-rails - 共同朋友作为 ActiveRecord Arel 关系

> ID：10553633
> 
> 赞同：3
> 
> 时间：2012-05-11T14:46:02.667
> 
> 标签：ruby-on-rails, activerecord, relational-algebra

我的用户有以下型号：

```
class User < ActiveRecord::Base
  has_many :facebook_friendships
  has_many :facebook_friends, :through => :facebook_friendships, :source => :friend

  def mutual_facebook_friends_with(user)
    User.find_by_sql ["SELECT users.* FROM facebook_friendships AS a
                        INNER JOIN facebook_friendships AS b
                          ON a.user_id = ? AND b.user_id = ? AND a.friend_id = b.friend_id
                        INNER JOIN users ON users.id = a.friend_id", self.id, user.id]
  end

end

class FacebookFriendship < ActiveRecord::Base
  belongs_to :user
  belongs_to :friend, :class_name => 'User'
end 
```

如果 id 为 53 的用户和 id 为 97 的用户是彼此的朋友，那么您将在数据库的 facebook_friendships 表中有行 [53, 97] 和 [97, 53]。这是我用来计算共同朋友的原始 sql 查询：

```
SELECT users.* FROM facebook_friendships AS a
  INNER JOIN facebook_friendships AS b
    ON a.user_id = :user_a AND b.user_id = :user_b AND a.friend_id = b.friend_id
  INNER JOIN users ON users.id = a.friend_id 
```

我会mutual_friends_with 返回一个关系而不是一个数组。这样，我可以将结果与 where(college: 'NYU') 等其他条件链接起来，并获得 ActiveRecord 的所有优点。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:24:45.690

你试过`#find_by_sql`吗？

[http://guides.rubyonrails.org/active_record_querying.html#finding-by-sql](http://guides.rubyonrails.org/active_record_querying.html#finding-by-sql)

> 如果您想使用自己的 SQL 在表中查找记录，可以使用 find_by_sql。即使底层查询只返回一条记录，find_by_sql 方法也会返回一个对象数组。例如，您可以运行此查询：
> 
> ```
>  Client.find_by_sql("SELECT * FROM clients 
>                      INNER JOIN orders ON clients.id = orders.client_id   
>                      ORDER clients.created_at desc") 
> ```
> 
> find_by_sql 为您提供了一种对数据库进行自定义调用和检索实例化对象的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T00:44:06.067

这是我用来结交共同朋友的方法。

```
has_many :company_friendships, autosave: true
has_many :company_friends, through: :company_friendships, autosave: true
has_many :inverse_company_friendships, class_name: "CompanyFriendship", foreign_key: "company_friend_id", autosave: true
has_many :inverse_company_friends, through: :inverse_company_friendships, source: :company, autosave: true  

def mutual_company_friends
  Company.where(id: (company_friends | inverse_company_friends).map(&:id))
end 
```

# javascript - Jqplot，多线型

> ID：10553634
> 
> 赞同：4
> 
> 时间：2012-05-11T14:46:03.393
> 
> 标签：javascript, jquery, charts, jqplot

如何在 jqPlot 的单个图中制作多种线型？

下面将以虚线显示 3 行，但是如果我希望第 1 行是虚线而第 2 行是实线怎么办？

```
plot = $.jqplot("myplot", [line1, line2, line3], {
    seriesDefaults : {
        linePattern : 'dotted',
        showMarker : false,
        shadow : false
    },
    ...
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:33:01.760

您可以[以与他们在最底部示例中执行此操作的方式类似的方式执行此操作](http://www.jqplot.com/deploy/dist/examples/line-charts.html)，您只需相应地为每一行指定您的模式。

[这个 jsfiddle 准确地展示了它是如何使用的。](http://jsfiddle.net/Boro/XcrZD/4/)

# css - 资源解释为样式表，但使用 MIME 类型 text/html 传输

> ID：10553638
> 
> 赞同：10
> 
> 时间：2012-05-11T14:46:09.600
> 
> 标签：css, html, apache

这是我的html：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv = "Content-Language" content = "en"/>
        <meta http-equiv = "Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="/xxx/app/www/style.css"> 
```

现在，当我加载页面时，Safari 的检查器给了我：

> 资源解释为样式表，但使用 MIME 类型 text/html 传输

我正在使用 MAMP 在本地主机上工作。我不确定要修改什么才能使其正常工作。我读到这可能是某种服务器问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T14:55:11.963

在根文件夹中创建一个`.htaccess`文件（或更新现有文件），其中包含此行

```
AddType text/css .css 
```

这将告诉 apache 发送正确的文件`content-type`头`.css`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T10:50:03.210

有可能不仅仅是 css 资源被错误地解释了。这可能是您的网络服务器配置的问题。

检查的最佳方法是转到 Chrome -> 网络选项卡并检查每个请求的响应部分。您也可以`$ curl -I http://path_to_file_or_page`使用终端运行并查看响应，您应该以以下格式查看它，例如`Content-Type: image/jpeg`

* * *

因此，如果网络服务器（apache）会为所有文件执行此操作，那么您可以尝试通过以下方式解决问题：

检查您的`/etc/apache2/apache2.conf` 如果有任何`SetHandler application/x-httpd-php`行，请尝试对其进行评论，然后通过以下方式重新加载您的 apache`$ sudo system apache2 reload`

让我们知道问题是否仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-19T23:48:40.670

可能是您的 Web 服务器配置正确，但它实际上返回的是 HTML 而不是 CSS。

检查您是否有正确的路径、拼写、大小写等。直接点击 URL 并查看返回的内容。您的 Web 服务器可能会以错误页面 (HTML) 和 a`200-Ok`而不是`404-Not Found`.

我不是说这曾经发生在我身上...

# php - 在服务器端（PHP/MySQL）还是在客户端（js）排序？

> ID：10553639
> 
> 赞同：1
> 
> 时间：2012-05-11T14:46:12.703
> 
> 标签：php, javascript, mysql, sorting

我有一个 JS 应用程序，它仅通过 API 调用与服务器通信。应用程序的所有数据都是通过 API 调用接收的。在客户端 (js) 或服务器端 (PHP/MySQL) 对类似表格的数据进行排序更好吗？是否可以使用 js 进行可靠排序？我很想在客户端进行排序，但不确定这是否足够可靠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:48:23.527

您可以在客户端进行排序。但是，如果您有大量数据，则效率不高。在这种情况下，您需要提供一些分页机制，并且在客户端对分页结果进行排序是没有意义的。

我的答案是：如果您有大量数据，请使用服务器端排序（数百条记录可能是一个指示，但看看什么对您有用）。否则使用 api 调用加载所有数据并对客户端进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:51:40.887

虽然您可以在客户端，但为什么不先在服务器端对它们进行排序呢？利用 MySQL 排序。这避免了客户端不必要的处理，尤其是在低功率机器（上网本和移动设备）上。

# c++ - 置换成本

> ID：10553647
> 
> 赞同：1
> 
> 时间：2012-05-11T14:46:31.267
> 
> 标签：c++, algorithm

我得到集合 {1,2,...,n} 的排列。我必须仅通过以最低总成本交换位于连续位置的数字来对这种排列进行排序。交换位于连续位置的元素 x,y 的成本是 min(x,y)。

例如，如果我有 3,1,2,4 的排列，则总最小成本为 3。因为我执行了这些步骤（（x,y）意味着将 x 与 y 交换）：

*   (3,1),2,4 结果 1,3,2,4 成本 min(1,3)=1
*   1,(3,2),4 结果 1,2,3,4 成本 min(2,3)=2

总成本为 3。

我尝试了蛮力，通过交换最小成本未排序对，直到没有未排序对，但这种方法显然不够快。

我的问题是，在给定条件的情况下，如何找到最低的排序成本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:06:30.327

对序列进行排序的连续数字交换的数量等于倒序的对数。

例如

```
6 1 3 2 4 5 
```

下面列出了以相反顺序排列的对：

```
(6,1) (6,3) (6,2) (6,4) (6,5) (3,2) 
```

所以

对序列进行排序的操作是：

```
swap(6,1) 1 6 3 2 4 5
swap(6,3) 1 3 6 2 4 5
swap(6,2) 1 3 2 6 4 5
swap(6,4) 1 3 2 4 6 5
swap(6,5) 1 3 2 4 5 6
swap(3,2) 1 2 3 4 5 6 
```

所以操作是确定的（除非你做了一些无用的操作）。

您只需要以相反的顺序计算所有对（x，y），并总结min（x，y）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:01:35.673

这种算法听起来像[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)。插入排序基于消除排列中的反转。你的任务是消除插入排序中的倒置。如您所知，排序数组没有任何反转。

插入排序算法的时间复杂度是 O(n+d)，其中 n 是元素的数量，d - 是反转的数量。

排列中的最大反转次数为 n*(n-1)/2，最小值为 0。

您可以使用修改后的[归并排序](http://en.wikipedia.org/wiki/Merge_sort)在 O(n*lg n) 中查找数组中的反转数。

# java - 比较字符串和枚举

> ID：10553649
> 
> 赞同：15
> 
> 时间：2012-05-11T14:46:32.463
> 
> 标签：java

我正在使用名为 FindBugs 的静态分析工具分析以下代码。

```
if(str.equals(enum.SOMEVALUE)) {// do something}; 
```

其中 str 是一个字符串，而 enum 是一个枚举。该工具为此代码生成以下警告，并声明

> 此方法在没有公共子类的不同类类型的两个引用上调用 equals(Object)。根据equals()的约定，不同类的对象应该总是比较为不相等；因此，根据 java.lang.Object.equals(Object) 定义的约定，这种比较的结果在运行时总是为 false。

如果我用这个替换上面的代码行：

```
if(str.equals(enum.SOMEVALUE.toString())) {// do something}; 
```

然后警告消失。但我不确定该工具生成的警告是否真的是真的，以及我是否以正确的方式修复它？因为我以前见过这样的比较，它似乎工作正常。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T14:49:18.470

你的第一个比较基本上是**错误**的。您正在比较完全不同类型的对象（`String`和`Enum`），它们永远不可能相等。[intellij](/questions/tagged/intellij "显示标记为“intellij”的问题")甚至在这里给了我一个警告。它编译只是因为`equals()`accept `Object`，而不是 a `String`。

第二个比较是**正确**的。

尽管[JavaDoc 对方法有点苛刻`name()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#name%28%29)，但我实际上建议在给定枚举已被`toString()`覆盖的情况下使用它：

```
if(str.equals(FooEnum.SOMEVALUE.name())) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:50:10.947

我认为替换常量`toString()`可能是正确的做法，但我会更改它，`.name()`因为 toString 将被覆盖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T14:50:40.547

你可以试试

```
enum.SOMEVALUE.name() 
```

因为它

> 返回此枚举常量的名称，与其枚举声明中的声明完全相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T14:49:20.420

我建议使用：

```
if (SomeEnum.SOMEVALUE == SomeEnum.valueOf(str)) {

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T14:50:27.050

据我所知，你走在正确的道路上。

```
if(str.equals(enum.SOMEVALUE.toString())) {// do something}; 
```

这应该没问题。

# objective-c - Mac OS X：防止崩溃报告窗口出现在我的应用程序中

> ID：10553651
> 
> 赞同：3
> 
> 时间：2012-05-11T14:46:41.077
> 
> 标签：objective-c, macos, cocoa, macos-carbon, crash-reports

我正在 Mac OS X 上开发一个应用程序，该应用程序有时会崩溃（嗯，不是因为我的应用程序，而是由于它加载的第三方插件不稳定。这个应用程序实际上充当了崩溃防火墙；许多崩溃可能发生在启动时，因此此时无需向用户报告它）。

有没有办法**防止崩溃报告窗口在用户面前弹出？**

谢谢！

PS：这是关于这个窗口的，但不适用于 WebKit： ![Mac OS X 上的崩溃报告窗口](../Images/001351f085f128154bdae4975c2657b9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:06:24.283

我不知道有任何真正受支持的解决方案，但有一些（丑陋的）方法可以实现它。

首先，您需要自己捕捉信号。我假设您知道如何做到这一点（请参阅 参考资料`sigaction`）。然后在您的崩溃信号处理程序中，调用`_exit()`. 那是带有前导下划线的。这是一个更快、更不安全的`exit()`. 这通常会避免崩溃报告。我在一些 C++ 项目中使用了它，这些项目的内存管理非常糟糕，以至于它们经常在关机时崩溃。我并不为此感到骄傲；我只是说它有效....

另一种解决方案是在崩溃处理程序期间启动另一个第二个进程。第二个进程等待 CrashReporter 启动。当它发生时，杀死它。我最后一次测试这种方法是 10.5。我不知道 10.7 是否仍会启动相同类型的进程来显示该警报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:50:55.773

有关系统范围的解决方案，请阅读`man ReportCrash`。但是，此解决方案并非特定于应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-23T14:49:18.913

**使用 cli `Swift`4.2.1**

基于[Rob Napier](/users/97337/rob-napier)的[回答](/questions/10553651/mac-os-x-prevent-the-crash-report-window-from-appearing-in-my-app/10553987#10553987)。
我不知道`signal`(3) 是如何变成`Darwin.signal(_:Int32,_:@convention(c)(Int32)->())`的，但以下内容实际上有效（防止记者发现未捕获的 NSException），而暂时执行和恢复`defaults write com.apple.CrashReporter DialogType none && defaults write com.apple.CrashReporter UseUNC 1`（来自 osxdaily.com [2010](http://osxdaily.com/2010/02/15/disable-the-crash-reporter-dialog-in-mac-os-x/)和[2015](http://osxdaily.com/2015/10/13/set-crash-reporter-as-notification-mac-os-x/)）（在我的 macOS 10.13 上）不起作用。

```
import Darwin
signal(SIGABRT  ){n in _exit(128+n)} 
```

（使用 Bash(1) 信号 exit(3) 约定。）

* * *

继续前进，我发现“意外发现 nil”-错误（在我的情况下来自隐式展开）使用另一个信号：

```
signal(SIGILL   ){n in _exit(128+n)} 
```

这也跳过了内置调用堆栈打印，尽管它没有显示 nil 的位置，但可以通过以下方式打印变体：

```
import Darwin
import Foundation
Thread.callStackSymbols.forEach{fputs($0+"\n",stderr)} 
```

# javascript - 有人可以指出我的 jQuery 中的错误吗？

> ID：10553655
> 
> 赞同：0
> 
> 时间：2012-05-11T14:47:01.720
> 
> 标签：javascript, jquery, scripting

当我单击工具栏中的按钮时，我正在制作一个脚本来打开页面上的所有链接。下面的代码到底有什么问题？

```
 function performCommand(event) {  
            if (event.command == "open-tests") {
                $('a').each(function(index, elem) {
                    window.open($(elem).attr('href'));
                });
            }  
        } 
```

就函数而言，它做得很好，就像我注释掉 if 语句并放入一个简单的警报一样，它会按预期工作。但是上面的代码不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:48:50.470

[jQuery 提供的事件对象](http://api.jquery.com/category/events/event-object/)没有标准`command`属性。

为什么你认为有一个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:49:36.953

您是否禁用了弹出管理器或者您是否使用了任何其他类型的广告拦截器/安全插件？

尽管在回调中调用时 Safari 拒绝 window.open

更多阅读：http: [//jensarps.de/2009/08/21/safari-and-window-open/](http://jensarps.de/2009/08/21/safari-and-window-open/)

# javascript - IE7 和 IE8 不会触发 onsubmit javascript *before* submittion

> ID：10553657
> 
> 赞同：3
> 
> 时间：2012-05-11T14:47:07.277
> 
> 标签：javascript, forms, internet-explorer-8, internet-explorer-7, submit

我有一个搜索表格：

```
<form class="searchForm" id="topSearchForm" action="/search.ds"> 
```

它附加了一个 onsubmit 事件，触发了一个 javascript。此 javascript 的目的是在根据某些标准提交表单之前清空某些表单字段。

需要明确的是，需要发生的是：

> 用户输入 -> 用户点击搜索按钮（或按“回车”） -> Javascript 运行 -> 字段被清除 -> 表单已提交

*这在除*IE7 和 IE8之外的所有浏览器中完全按照预期工作。javascript 运行，但由于某种原因，表单提交是在 javascript 清除字段*之前完成的。*这会导致提交的页面包含来自应该被清除的字段的数据。

我只能控制 UI 的（某些部分），并且在提交表单后无法处理任何事情。出于可用性目的，在用户提交表单之前填写这些字段（应该清除）很重要。

为什么 IE7 和 IE8 的内部逻辑不同（它在 IE9 和“所有其他浏览器”中运行良好）？我有办法绕过这个问题吗？

这里有一些更多的代码来澄清：

我将事件附加到表单中：

```
var formElement = document.getElementById("topSearchForm");
[...]
formElement.attachEvent('onsubmit', function() {clearForSubmit()}); 
```

并且 clearForSubmit 被定义并被*触发*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:27:40.033

你可以在js中尝试这样的事情

```
<form onsubmit="clearForSubmit(); return false;"> 
```

这不会提交表格，您可以在清除后提交表格

```
form_name.submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:50:20.330

使用`onclick`事件而不是`onsubmit`，然后在代码中的函数末尾提交表单。

# r - 是否可以捕获使用 TEXT 函数绘制的最后一个字母的坐标？

> ID：10553658
> 
> 赞同：1
> 
> 时间：2012-05-11T14:47:14.563
> 
> 标签：r

在示例中，如何以编程方式捕获“更好”字符串中字母“r”的 X 坐标？我想捕获该坐标以便动态绘制它旁边的箭头。这可以在R中完成吗？它可以在 SAS 中完成……有一些困难。

```
x<-c(1,3)
y<-c(3,3)
plot(y~x, type="c", ylim=c(-1,5), xlim=c(-3,3), col="red") 
abline(h=0,v=0, lty=3)
text(0.3, -2.5, xpd=T, "Group 1 better", adj=0)

#manually draw the arrow
arrows(x0=1.3, x1=3, y0=-2.5, y1=-2.5, length=0.1, code=2,xpd=T) 
```

![在此处输入图像描述](../Images/6b22633a9bc9eb29511bf7feb5e6493c.png)

显而易见的方法是计算字符串中的字母数并将该数字添加到字符串的 X 坐标中。这种方法在大多数情况下可能效果很好，但如果文本的大小/样式、角度发生变化，则可能效果不佳。我想知道是否有一种简单的方法来捕获字符串的最后一个位置。SAS 通过将箭头相对于前一个字符串的内部坐标放置来做到这一点。

我还想知道如何捕获任何其他图形元素的最后一个坐标——如果可能的话。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:02:35.120

使用 strwidth 获取字符串宽度，并添加一个额外的字符宽度以获得一点空间：

```
> arrowlabel = "Group 1 better")
> sw = strwidth(arrowlabel)
> xpos = 0.3 + sw + sw/nchar(arrowlabel) 
```

然后从 x=xpos 开始绘制箭头。

# django - Django 测试 - 我只想创建一个数据库 - 如何指定

> ID：10553670
> 
> 赞同：3
> 
> 时间：2012-05-11T14:48:10.767
> 
> 标签：django, django-testing, django-settings

所以在我的 settings.py 中，我指定了两个数据库连接（见下文）。

但是当我运行测试时，我只希望 Django 创建“默认”数据库。

有没有办法做到这一点？我尝试添加 TEST_CREATE: False 选项，但我想这仅适用于 Oracle 出于某种原因？

我的 settings.py 片段：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'App1',                      # Or path to database file if using sqlite3.
        'USER': 'webaccess',                      # Not used with sqlite3.
        'PASSWORD': '***',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    },
    'default_root': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'App1',                      # Or path to database file if using sqlite3.
        'USER': 'django',                      # Not used with sqlite3.
        'PASSWORD': '****',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
        'TEST_CREATE': False            #Don't create when testing
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:53:42.433

好吧，这是一种方法。在设置了我的普通数据库后，我将它添加到了 settings.py 中。

```
if 'test' in sys.argv:
    DATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3',}} 
```

# eclipse - Eclipse - 如何在项目之间赋予依赖关系？

> ID：10553677
> 
> 赞同：26
> 
> 时间：2012-05-11T14:48:35.307
> 
> 标签：eclipse, dependencies

我在eclipse中有两个java项目。第二个是使用第一个的罐子。当我尝试从第二个班级导航到第一个班级时，它会打开`.class`该文件。但我想打开第一个项目文件。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-11T15:04:16.910

如果您想将您的第二个项目与您的第一个项目链接，请不要将第一个项目以 JAR 文件的形式添加到第二个项目。

而是打开第二个项目的**项目属性**并选择“ **Java Build Path** ”。**在“项目**”选项卡的右侧，您可以将您的第一个项目添加为“构建路径上的必需项目”。

项目 1 的类文件现在添加到项目 2 的类路径中。如果单击类名，您将直接进入源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:00:12.203

理想情况下，第一个项目的 JAR 将出现在第二个项目的“引用库”下。右键单击该 JAR，然后选择 Properties -> Java Source Attachment。提供一个链接到此 JAR 源文件的变量。

或者，安装一个反编译器插件（参见[jd-eclipse](http://java.decompiler.free.fr/)），当您在 Eclipse 中导航类文件时，它将反编译类文件，以便您可以查看源代码。

# string - 为什么“+”运算符的行为方式与 Matlab 字符串的行为方式相同？

> ID：10553690
> 
> 赞同：0
> 
> 时间：2012-05-11T14:49:13.090
> 
> 标签：string, matlab, operator-overloading

在 Matlab 中，以下语句给出一个数字输出。.

```
>> 'abc' + 'def'

ans =

   197   199   201 
```

在 C++ 中，以下输出

```
std::string("abc") + std::string("def") 
```

...会给可以说更有用的...

```
abcdef 
```

多一点探索给..

```
>> a = 'abc'

a =

abc

>> whos
  Name      Size            Bytes  Class    Attributes

  a         1x3                 6  char 
```

这表明我的变量`a`是一种`char`类型。但是，我们知道这不等同于 C 类型的 char，因为它是一个知道其大小尺寸等的对象。

因此，我的问题是：这个数字输出有什么用？

...导致

他们为什么要把它设计成那样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:51:42.863

因为 Matlab 中的字符串实际上只是一个`char`类型的数组，所以它相当于：

```
[97 98 99] + [100 101 102] 
```

它不是一成不变的，`+`意思是“连接”。如果你想在 Matlab 中进行字符串连接，你总是可以这样做：

```
['abc' 'def'] 
```

# php - JSON 请求错误 500

> ID：10553699
> 
> 赞同：0
> 
> 时间：2012-05-11T14:49:30.217
> 
> 标签：php, javascript, json, xmlhttprequest

我想用来自另一个页面的一些动态数据填充一个选择文本框。该页面使用 json_encode 输出一个 php 数组。这在同一站点的另一个页面上对我来说很好，但由于某种原因，chrome 和 firebug 中的控制台说“500（内部服务器错误）”。如果我自己浏览到该页面，我可以看到输出正常，当我打开 JSON 无法访问的链接时，我已确保 URL 正确。我的要求是：

```
var Type = $("#a option:selected").text();
if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    dateChangeRequest=new XMLHttpRequest();
    }
else
    {// code for IE6, IE5
    dateChangeRequest=new ActiveXObject("Microsoft.XMLHTTP");
    }
dateChangeRequest.onreadystatechange=function()
    {
    if (dateChangeRequest.readyState==4 && dateChangeRequest.status==200)
        {
        var returnList = dateChangeRequest.responseText;
        }
    }
dateChangeRequest.open("GET","entList.php?ents="+Type,true);
dateChangeRequest.send(); 
```

来自动态页面的一些示例数据：

```
[{"EntID":2,"Display":"Some Name - Alias"},{"EntID":3,"Display":"Some Other Name - Another Alias"}] 
```

我不确定这是否意味着什么，但是在运行萤火虫报告的页面上：

```
Connection  Keep-Alive
Keep-Alive  timeout=15, max=90 
```

但在此页面上它报告：

```
Connection  close 
```

即使请求标头要求保持活动状态。任何帮助将不胜感激。

实际上，当我只是将示例数据放在页面上时，它就可以很好地获取。我正在从数据库生成数据数组，然后使用 json_encode 输出，这对于另一个页面来说工作正常。以下是页面实际输出的摘录：

```
[{"EntID":2,"Display":"Eddard Stark - Ned"},{"EntID":3,"Display":"Robb Stark - The Young Wolf"},{"EntID":5,"Display":"Catelyn Tully - Cat"},{"EntID":7,"Display":"Aegon I Targaryen - Aegon the Conqueror"},{"EntID":20,"Display":"Rhaenyra Targaryen - "},{"EntID":11,"Display":"Aenys I Targaryen - "},{"EntID":12,"Display":"Maegor I Targaryen - "},{"EntID":13,"Display":"Jaehaerys I Targaryen - "},{"EntID":14,"Display":"Viserys I Targaryen - "},{"EntID":15,"Display":"Aegon II Targaryen - "},{"EntID":16,"Display":"Rhaenys Targaryen - "},{"EntID":17,"Display":"Visenya Targaryen - "},{"EntID":74,"Display":"Jon Snow - Lord Snow"}] 
```

更多信息：当数据是静态的时它工作正常，即我将整个数组作为文本复制并粘贴到页面上并注释掉所有数据。我实际上可以在 chrome 控制台中看到响应文本，即使服务器显示错误 500。我刚刚尝试自己回显数组的结构而不是 json_encode，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:55:40.060

这可能是您的 PHP 页面上的错误。你有错误报告吗？你可能会在那里找到答案。

尝试使用查看服务器上的错误日志

```
tail -f /var/log/apache/php.errors 
```

看到您没有命令行访问权限添加

```
error_reporting(E_ALL); 
```

到 .php 文件的顶部。

# ajax - AJAX 检查用户名功能的安全性

> ID：10553706
> 
> 赞同：2
> 
> 时间：2012-05-11T14:49:46.793
> 
> 标签：ajax, security

我们的注册表单上有使用 AJAX 调用来检查用户名是否可用的功能。

这很简单

*   拨打我们的服务电话
*   对照数据库检查用户名
*   如果找到用户名记录，则返回，否则返回可用。

一旦用户停止输入几秒钟，我们就会执行对我们服务的调用。

然而，我们的问题是，攻击者可以对我们的服务使用某种蛮力手段并编译我们所有用户名的列表。

有谁知道任何帮助防止这种“攻击”的好方法？

我唯一能想到的就是预先要求验证码，但这不会是一个好的用户体验，并且可能会让人们无法填写我们的表格。

如果它有帮助，我们正在使用 ASP.NET MVC、C#、SQL Server。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:52:23.867

我想最好的方法是限制它的速率，要么只允许用户一定数量的请求，要么给每个请求增加 0.5-1 秒的等待时间。通过执行其中任何一项操作，攻击者将很难在合理的时间内枚举出相当数量的用户名。

但是，我认为保护您的应用程序的更好方法是将其视为每个人都已经拥有您的用户列表并从那里开始工作。假设攻击者了解您的所有用户，您将如何防范暴力攻击？通过速率限制密码尝试。通过每 10 分钟左右只允许几次密码尝试，您将大大保护您的应用程序的用户。

我个人认为所有非显而易见的密码（例如“密码”和“qwerty”）都应该是安全的 - 例如，“soccerfan”*应该*是安全密码。为什么？因为您不会立即猜测“足球迷”。在您的暴力破解者的字典中，它可能会排在第 100 位左右，并且当他们猜测尝试使用接近该数量的任何地方登录时，他们应该被禁止并且应该已经通知用户。（顺便说一句，我并不是建议人们应该使用这样的密码，越复杂越好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:52:33.353

您可以检查 ajax 请求是否来自同一来源，并在那里设置某种限制，您还可以对请求进行签名。

通过节流，我的意思是，例如一个 IP 地址每天最多允许 10 个请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:58:25.003

另一种方法是让客户端计算一些需要几秒钟的东西。

在服务器端，可以用很少的 CPU 资源检查计算值。并且仅当客户端计算的结果正确时才处理请求。

这种算法被称为[陷门函数](http://en.wikipedia.org/wiki/Trapdoor_function)

# java - 具有给定精度的快速双精度字符串转换

> ID：10553710
> 
> 赞同：13
> 
> 时间：2012-05-11T14:50:13.073
> 
> 标签：java, optimization, double, precision

我需要以给定的精度将双精度转换为字符串。`String.format("%.3f", value)`（或 DecimalFormat）可以完成这项工作，但基准测试表明，即使与不是很快的`Double.toString`转换（在我的机器上转换 100 万个数字大约需要 1-3 秒）相比，它也很慢。

有没有更好的方法来做到这一点？

### 更新：基准测试结果

从 0 到 1000000 的随机数，结果以每毫秒的操作数为单位（Java 1.7.0_45）

```
Benchmark                                    Mean   Mean error    Units

String_format                             747.394       13.197   ops/ms
BigDecimal_toPlainString                 1349.552       31.144   ops/ms
DecimalFormat_format                     1890.917       28.886   ops/ms
Double_toString                          3341.941       85.453   ops/ms
DoubleFormatUtil_formatDouble            7760.968       87.630   ops/ms
SO_User_format                          14269.388      168.206   ops/ms 
```

### 更新：

Java 10，+[流](https://github.com/ulfjack/ryu)

```
 Mode  Cnt      Score      Error   Units
String_format                  thrpt   20    998.741 ±   52.704  ops/ms
BigDecimal_toPlainString       thrpt   20   2079.965 ±  101.398  ops/ms
DecimalFormat_format           thrpt   20   2040.792 ±   48.378  ops/ms
Double_toString                thrpt   20   3575.301 ±  112.548  ops/ms
DoubleFormatUtil_formatDouble  thrpt   20   7206.281 ±  307.348  ops/ms
ruy_doubleToString             thrpt   20   9626.312 ±  285.778  ops/ms
SO_User_format                 thrpt   20  17143.901 ± 1307.685  ops/ms 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T15:15:06.673

**免责声明：**我只建议您在速度是绝对要求的情况下使用它。

在我的机器上，以下可以在大约 130 毫秒内完成 100 万次转换：

```
 private static final int POW10[] = {1, 10, 100, 1000, 10000, 100000, 1000000};

 public static String format(double val, int precision) {
     StringBuilder sb = new StringBuilder();
     if (val < 0) {
         sb.append('-');
         val = -val;
     }
     int exp = POW10[precision];
     long lval = (long)(val * exp + 0.5);
     sb.append(lval / exp).append('.');
     long fval = lval % exp;
     for (int p = precision - 1; p > 0 && fval < POW10[p]; p--) {
         sb.append('0');
     }
     sb.append(fval);
     return sb.toString();
 } 
```

呈现的代码有几个缺点：它只能处理有限范围的`doubles`，并且不能处理 NaN。前者可以通过扩展`POW10`数组来解决（但只能部分解决）。后者可以在代码中显式处理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T09:42:52.967

如果您需要速度和精度，我在 xmlgraphics-commons 开发了一个快速的 DoubleFormatUtil 类：http: [//xmlgraphics.apache.org/commons/changes.html#version_1.5rc1](http://xmlgraphics.apache.org/commons/changes.html#version_1.5rc1)

你可以在那里看到代码：http: [//svn.apache.org/viewvc/xmlgraphics/commons/trunk/src/java/org/apache/xmlgraphics/util/DoubleFormatUtil.java ?view=markup](http://svn.apache.org/viewvc/xmlgraphics/commons/trunk/src/java/org/apache/xmlgraphics/util/DoubleFormatUtil.java?view=markup)

它比 DecimalFormat/BigDecimal 快，和 Double.toString 一样快，它很精确，经过了很好的测试。它在 Apache License 2.0 下获得许可，因此您可以随意使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-04T06:53:06.470

据我所知，最快、最完整的实现是 Jack Shirazi 的实现：

[http://web.archive.org/web/20150623133220/http://archive.oreilly.com/pub/a/onjava/2000/12/15/formatting_doubles.html](http://web.archive.org/web/20150623133220/http://archive.oreilly.com/pub/a/onjava/2000/12/15/formatting_doubles.html)

代码：原始实现不再在线提供（[http://archive.oreilly.com/onjava/2000/12/15/graphics/DoubleToString.java](http://archive.oreilly.com/onjava/2000/12/15/graphics/DoubleToString.java)）。可以在这里找到一个实现：[https ://raw.githubusercontent.com/openxal/openxal/57392be263b98565738d1962ba3b53e5ca60e64e/core/src/xal/tools/text/DoubleToString.java](https://raw.githubusercontent.com/openxal/openxal/57392be263b98565738d1962ba3b53e5ca60e64e/core/src/xal/tools/text/DoubleToString.java)

它提供格式化（小数位数）和未格式化的 doubleToString 转换。我的观察是，无格式转换的 JDK 性能多年来显着提高，所以这里的收益不再那么大了。

对于格式化转换它仍然是。

对于基准测试人员：使用哪种类型的双精度通常会产生很大的不同，例如非常接近 0 的双精度。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-11T14:57:43.520

我没有对此进行基准测试，但是使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)怎么样？

```
BigDecimal bd = new BigDecimal(value).setScale(3, RoundingMode.HALF_UP);
return bd.toString(); 
```

# java - 对 API 调用进行分组，以便 UI 可以干净地调用它们并获得它们的响应 - 设计

> ID：10553718
> 
> 赞同：1
> 
> 时间：2012-05-11T14:50:24.960
> 
> 标签：java, android, design-patterns

我不确定我到底在寻找什么样的设计，但基本上我们有一堆 api 调用，它们的一些组合完成了一项任务，所以一个任务可以是 1 个 api 调用或更多 api 调用。

我想设计一个层，以便 UI 可以调用这些“任务”，而任务将负责运行 api 调用。我也想这样做，以便某些任务可以将其他任务作为其中的一部分（例如运行此 api 调用然后运行此任务）

Api 调用需要同步运行，每个 API 调用通常会将一些数据传递给下一个 api 调用。

这种情况下最好的设计模式是什么？是否已经有某种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:00:43.747

听起来您正在寻找[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。在这种情况下，您的 UI 将调用访问者上的方法，这将协调调用“一堆 api 调用”:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T22:19:24.313

似乎您需要一种用于 API 方法的[外观，它的工作方式类似于您的域的](http://en.wikipedia.org/wiki/Facade_pattern)[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)。

# javascript - 当画布是内部 DIV 时使用 JointJS 时出错

> ID：10553722
> 
> 赞同：0
> 
> 时间：2012-05-11T14:50:32.537
> 
> 标签：javascript, jointjs

实际上，我在一年前就注意到了这个问题，但当时还没有准备好真正深入图书馆来使用它。现在是时候我真的需要使用 JointJS（或类似的东西）了，但问题仍然存在。

如果我有如下标记：

```
<div>
  <div id="world"></div>
</div> 
```

对于任何类型的 JointJS 图表，我都会在 Firebug 中收到以下错误。

```
a[0] is undefined. 
```

使“世界” div 在没有父级的情况下独立存在就可以了。其他人有这个问题并想出了解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:42:11.640

你试过`Joint.paper(document.getElementById("world"))`吗？
为我工作...

# java - 调用 stop() 后在 android 中重用录制对象

> ID：10553729
> 
> 赞同：0
> 
> 时间：2012-05-11T14:50:59.560
> 
> 标签：java, android, audiorecord

我正在制作一个应用程序，我在其中产生声音并录制此声音，评估此录音并再次执行此操作，直到声音良好。

我遇到的问题是似乎不可能重用 AudioRecord 对象。此记录在一个线程中运行。当触发 onMarkerReached 事件时，我调用`myAudioRecord.stop();` 并在评估后再次启动它，如下所示：

```
 if(recorderThread == null) {
      recorderThread = new Thread(recorder.runRecorderThread);
    }
    recorderThread.start(); 
```

但是记录器仅在第一次执行时才被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:56:51.073

也许你永远不会`recorderThread`设置`null`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:46:40.830

我无法重新开始录制的原因是 NotificationProperty。我有一个布尔值“isReading”，完成后我打电话给：

```
public void setIsReading(boolean isReading) {
  pcs.firePropertyChange("isReading", this.isReading, isReading);
  this.isReading = isReading;
} 
```

所以：

```
while(isReading) {
   AudioRecord.read(..);
} 
```

因为我首先触发了 firePropertyChange，所以在它停止读取之前就停止了它。

# php - 使用 Scope_Identity PHP 和 SQL Server 2008 插入两个表

> ID：10553730
> 
> 赞同：0
> 
> 时间：2012-05-11T14:51:00.700
> 
> 标签：php, sql, sql-server-2008, insert

我正在建立一个在线商店网站，让用户在线购买商品。一旦用户点击“Confirm Order”，下面的查询就会运行：

```
$tsql = "DECLARE @NewID INT

    INSERT INTO orders (orderDate, customerID, price_total) VALUES (GETDATE(),'$custID','$totalPrice')

    SELECT @NewID = SCOPE_IDENTITY()

    INSERT INTO order_items (orderID, price) VALUES ('@NewID', '$totalPrice')";

    $stmt = sqlsrv_query($conn,$tsql); 
```

“orders”表中的 orderID 列是主键并且是自动递增的。我希望能够获取刚刚插入“orders”表中的orderID，并将其与其他相关信息一起插入“order_items”表中。

该记录确实被添加到“orders”表中，但没有任何内容被添加到“order_items”表中。我不确定我的查询是否正确。我遵循了几个解释 scope_identity 的教程，但由于我对 sql 和 php 非常陌生，我可能在某处犯了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:57:41.930

用撇号写@NewID而不是'@NewID'怎么样......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:59:49.293

```
INSERT INTO order_items (orderID, price) VALUES ('@NewID', '$totalPrice')"; 
```

应该

```
INSERT INTO order_items (orderID, price) VALUES (@NewID, '$totalPrice')"; 
```

@NewID 是 sql 变量，而不是您传入的参数。

# javascript - 跨浏览器 jquery 动画滚动顶部

> ID：10553733
> 
> 赞同：6
> 
> 时间：2012-05-11T14:51:17.337
> 
> 标签：javascript, jquery, scrolltop

我在将 jquery animate scrollTop 设置为已定义的 div 时遇到问题。

我使用此代码为滚动设置动画：

```
$('body').animate({scrollTop: $('#sections_display').offset().top-100}, 500, function(){
    $('#ajax_load').load('file.php');
}); 
```

但这在 Firefox 或 IE 中不起作用。

当我使用它`$('html').animate`而不是`$('body').animate`它时，它在 Chrome 中不起作用。

我也尝试使用两者：`$('html,body').animate`但问题是回调函数`$('#ajax_load').load('file.php');`被执行了两次，这调用了文件 2 次。

**我通过使用php**临时解决了这个问题，但是这个解决方案迫使我在每个页面中重复代码 2 次，以制作 2 个支持`$('body').animate`和`$('html').animate`.

我在这里搜索并发现了这个：[jquery animate scrolltop callback](https://stackoverflow.com/questions/6206738/jquery-animate-scrolltop-callback)但是没有用。

我也试过：

`$(window).animate`

`$(document).animate`

`$('#container-div').animate`

但是没有办法做到这一点。

我可以找到一种跨浏览器方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:57:05.237

哈克解决方案可能会奏效......

```
$('html,body').animate({scrollTop: $('#sections_display').offset().top-100}, 500);

setTimeout(function(){
    $('#ajax_load').load('file.php');
}, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:58:02.367

正如[这篇文章中提到的](http://forum.jquery.com/topic/jquery-animate-scrolltop-12-1-2010#14737000000412227)

> 它不适用于所有主要浏览器。当应用于“html”时，并非所有这些都支持滚动，有些需要“body”。这取决于您是否处于怪癖模式。动画 iframe 时问题更大

主题启动器最终将动画应用于`html,body`而不是彼此。

# backbone.js - 具有不同功能的骨干应用程序（按角色）

> ID：10553743
> 
> 赞同：0
> 
> 时间：2012-05-11T14:52:00.603
> 
> 标签：backbone.js

我有一个单页主干应用程序。它本质上是一个项目列表，其中包含一些与每个项目相关联的数据。现在，它只对管理员用户可见，并且存在编辑、销毁链接以及许多其他“仅限管理员”功能。

如果我想让页面对非管理员用户可用，并让他们只看到项目，也许还有一些管理员功能，最好有一组不同的视图、模型、模板、另一个只是隐藏的应用程序，具体取决于用户角色？

或者可能只是另一组模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:02:24.377

我想说最简单和最可维护的解决方案是为管理员和非管理员用户提供单独的模板。

您应该能够使用相同的视图，但模板将确定启用哪些功能。

同样，有多种方法可以解决这个问题，这取决于上下文，在这种情况下，我认为不同的模板是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:27:49.003

另一种简单的方法是使用相同的模板（相同的 html），但通过 CSS*切换元素。*

您可以向模板的根 DOM 元素添加/删除一个类，例如`.admin`使用 CSS：

```
#my-root-element .admin-element {
  display: none;
}

#my-root-element.admin .admin-element {
  display: block;
} 
```

当然，对于可能的恶意用户，这些元素仍然存在，但这不应该是一个安全问题，因为您总是应该在服务器层有额外的安全过滤器。

# data-binding - 如何将数据绑定与 s:GridItemRenderer 和匿名对象一起使用？

> ID：10553745
> 
> 赞同：0
> 
> 时间：2012-05-11T14:52:03.833
> 
> 标签：data-binding, flex4, flex-spark, itemrenderer

我有一个`s:GridItemRenderer`包含单个的自定义项，`s:CheckBox`用于显示网格中项目的布尔属性，该属性`dataProvider`取决于为列设置的数据字段：

```
<s:GridItemRenderer>
    <s:CheckBox selected="{this.data[this.column.dataField]}"/>
</s:GridItemRenderer> 
```

我不能（或者更确切地说：我不想）对属性进行硬编码，因为我想让渲染器尽可能通用，并且对属性名称进行硬编码需要我编写至少 2 个其他相同的渲染器。

现在的问题是 dataProvider 只包含匿名对象（例如`{foo:"blah", bar:"blubb", isBaz:true}`）并且数据绑定不适用于哈希查找。由于属性名称不是固定的而是动态的，所以我不能使用点语法来访问对象上的属性。

我已经在网上搜索了可能的解决方案，但没有找到任何可行的解决方案。我尝试[按照此处的建议](http://blog.flexexamples.com/2007/09/27/detecting-changes-to-an-object-using-the-flex-objectproxy-class/)`mx:ObjectProxy`使用 an作为数据项的包装器，但这不起作用。我尝试[按照此处的建议](http://www.codeproject.com/Articles/56024/Flex-Data-Binding-Tricks)手动创建绑定，但这也不起作用。`mx:BindingUtils.bindProperty()`

在这种情况下有什么方法可以实现数据绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:40:10.010

在一些重构过程中，结构发生了`dataProvider`变化，我被要求`itemRenderers`为每个数据网格编写特定的代码，因此不再支持通用方法，问题基本上自行解决。:)

# r - R中给定函数的包名称

> ID：10553755
> 
> 赞同：6
> 
> 时间：2012-05-11T14:52:26.313
> 
> 标签：r

> **可能重复：**
> [您如何确定函数的命名空间？](https://stackoverflow.com/questions/6429180/how-do-you-you-determine-the-namespace-of-a-function)

我不知道该怎么做......你怎么知道R中某个函数的包名？我想要一个给定函数名称的函数，返回拥有它的包的名称。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:54:56.643

可能有更好的解决方案，但`find("functionname")`似乎工作得相当好？但是，它仅适用于已加载的包。

```
> find("strwidth")
[1] "package:graphics"
> find("qplot")
character(0)
> library(ggplot2)
> find("qplot")
[1] "package:ggplot2"
> 
```

（如果您需要包的原始名称，您可以使用`gsub("^package:","",results)`）

（Andrie 链接的上一个问题的答案包括这个答案；他们没有给出一点关于 的信息`gsub`，而且他们似乎都分享了找不到未加载的包的问题。）

即使在未加载的包中，这里也有一个快速查找函数的方法：

```
findAllFun <- function(f) {
    h <- help.search(paste0("^",f,"$"),agrep=FALSE)
    h$matches[,"Package"]
}

findAllFun("qplot")
## "ggplot2"
findAllFun("lambertW")
## "emdbook"    "VGAM" 
> findAllFun("xYplot")
## "Hmisc" "lattice" 
```

If you need to find functions in non-*installed* packages (i.e. searching CRAN), then `findFn` from the `sos` package will be your friend.

# c# - ASP.NET MVC 中嵌套/路由视图的正确术语和示例

> ID：10553756
> 
> 赞同：0
> 
> 时间：2012-05-11T14:52:26.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我做 ASP.NET 已经有一段时间了，在 MVC 方面做得很少（一般来说），但在 ASP.NET MVC 框架方面非常新，以及一些事情的正确术语。

这是我的示例（我正在处理的实际应用程序不同，但这是我可以使用的公共示例） - 我想创建一个更简单的[Redmine](http://www.redmine.org/)版本，但在 .net 中。

我想列出问题，如果我访问 example.org/issues，我会看到所有项目的所有问题列表（类似于[http://www.redmine.org/issues](http://www.redmine.org/issues)）。

但是如果我去这个项目，例如 example.org/project/issues，我只会看到那个项目的问题（类似于[http://www.redmine.org/projects/redmine/issues](http://www.redmine.org/projects/redmine/issues)）。对于 example.org/project2/issues 等，这将是相同的。

什么是正确的术语？我会假设开发人员没有在两个地方重写“问题”代码，他们重用了这段代码。

由于我不知道完全正确的术语，因此很难在 ASP.NET MVC 世界中找到我可以开始使用的好的示例。所以第二部分是我可以在 ASP.NET MVC 中查看的示例，在 Visual Studio 中对我来说应该如何？

/project/ 下还有其他一些内容，例如设置、详细信息、日志等，类似于浏览[http://www.redmine.org/projects/redmine/](http://www.redmine.org/projects/redmine/)的方式。

最后，如果项目不在顶层怎么办？例如，如果我的应用程序更像：

```
example.org/
example.org/projects/
example.org/projects/project1
example.org/projects/project1/issues
example.org/projects/project2
example.org/dashboard/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:37:49.110

设置一个你想要的控制器（我将使用 RedMineController）。

在该控制器中，您将拥有一个名为 ListIssues 的单一操作方法。接受一个名为 ProjectName 的参数：

```
public ActionResult ListIssues(string projectName) {} 
```

最后在 global.asax.cs 中创建两条路由：

```
routes.MapRoute(
    "Issues Root",
    "issues",
    new { controller = "RedMine", action = "ListIssues" }
);

routes.MapRoute(
    "Project Issues",
    "projects/{projectName}/issues",
    new { controller = "RedMine", action = "ListIssues" }
); 
```

在您的 ListIssues 操作中，检查 projectName == null 是否，如果是，则获取所有问题，否则获取特定问题。第一个路由将传递 null，第二个将传递 URL 中的内容。如果 URL 中的项目名称无效，请不要忘记抛出 404。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:56:03.800

好吧，虽然不是一个正确的答案。但是你可以通过改变你做它们的方式来轻松地做你想做的事情.. 即
，而不是做`www.example.org/project/issues`或者`www.example.org/issues/project`只是`www.example.org/issues`
这样你可以轻松地制作一个`issues`控制器，并且 URL 中的所有内容都`issues`可以是这个字符串，你可以通过它以确定您需要列出所有问题的资源。它的示例路线可以是

```
"{issues}/{*resource}",new{controller="issues"} 
```

# javascript - 从 JSP 显示另存为窗口

> ID：10553757
> 
> 赞同：0
> 
> 时间：2012-05-11T14:52:26.747
> 
> 标签：javascript, ajax, jsp, http-headers, xmlhttprequest

我需要在客户端的文件中写入一个字符串，但是由于 Internet 协议出于安全考虑不允许这样做，因此这是我所做的解决方法：我有一个 AJAX 请求，它调用一个查询数据库以获取一个 JSP细绳。我需要向用户显示“另存为”对话框并将此字符串写入他们指定的本地路径。

我的 JavaScript 函数：

```
function openReport(id)
{
    var url = "../reports/reportsHandler.jsp?id=" + id;

    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            //alert(xmlhttp.responseText);
            alert("result obtained");
        }
    }
    xmlhttp.open("POST", url, true);
    xmlhttp.send();
} 
```

在 JSP 中，我有这样的东西：

```
response.setHeader("Content-Disposition", "attachment;filename=report.xml");
out.println(stringObtainedFromDatabase); 
```

当我收到提示说结果已获得时，我没有看到“另存为”对话框。这是我第一次这样做，如果我做错了什么，你能告诉我吗？

但是，JavaScript 中有没有办法向用户显示另存为对话框并将“div”标签的内容写入客户端系统上的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:56:10.700

使用常规 HTTP 请求，而不是 AJAX ( `XMLHttpRequest`) 请求。

```
function openReport(id)
{
    var url = "../reports/reportsHandler.jsp?id=" + id;
    window.location = url;
} 
```

这将发送一个 HTTP GET，而不是 POST，尽管看起来 GET 是在这里使用的正确 HTTP 方法，因为您正在检索数据而不是实际更改服务器上的任何内容。

# c++ - 带 bo ost::asio 的 TCP 服务器，线程池与无堆栈协程的可扩展性

> ID：10553761
> 
> 赞同：12
> 
> 时间：2012-05-11T14:52:35.150
> 
> 标签：c++, multithreading, boost, boost-asio, coroutine

我正在构建一个基于 TCP 的守护进程，用于 HTTP 请求的预处理/后处理。客户端将连接到 Apache HTTPD（或 IIS），并且自定义 Apache/IIS 模块会将请求转发到我的 TCP 守护程序以进行进一步处理。我的守护进程需要扩展（但不是扩展）以处理大量流量，并且大多数请求都是小而短暂的。守护程序将使用 C++ 构建，并且必须是跨平台的。

我目前正在研究 boost asio 库，这似乎很自然。但是，我无法理解无堆栈协程与线程池模式的优点。具体来说，我在这里查看 HTTP 服务器示例 #3 和 HTTP 服务器示例 #4：http: [//www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html)

尽管我进行了所有的谷歌搜索，但我无法完全理解无堆栈协程服务器的优点，以及它相对于多核系统上的线程池服务器的性能。

考虑到我的要求，两者中哪一个最合适，为什么？请随意“降低”您对无堆栈协同程序想法的回答，我在这里仍然不稳定。谢谢！

**编辑**：讨论的另一个随机想法/关注点：Boost HTTP 服务器示例 #4 被描述为“*使用无堆栈协程实现的单线程 HTTP 服务器*”。好的，所以它完全是单线程的（对吗？即使在父进程“分叉”给子进程之后？参见示例 #4 中的 server.cpp）……单线程会成为多核系统的瓶颈吗？我假设任何阻塞操作都会阻止所有其他请求执行。如果确实如此，为了最大限度地提高吞吐量，我正在考虑一个基于协程的接收数据异步事件，一个用于我的内部阻塞任务的线程池（以利用多核），然后是一个异步发送和关闭连接机制。同样，可扩展性至关重要。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T21:12:23.227

我最近研究了 boost.asio 在多核机器上的可扩展性。到目前为止的主要结论是它确实引入了开销、锁争用和额外的上下文切换（至少在 Linux 上），请参阅我关于这些主题的一些博客文章：

*   [http://cmeerw.org/blog/748.html#748](http://cmeerw.org/blog/748.html#748)
*   [http://cmeerw.org/blog/751.html#751](http://cmeerw.org/blog/751.html#751)

我还在 asio 邮件列表上启动了一个线程，以检查我没有遗漏任何明显的内容，请参阅[http://comments.gmane.org/gmane.comp.lib.boost.asio.user/5133](http://comments.gmane.org/gmane.comp.lib.boost.asio.user/5133)

如果您主要关心的是性能和可扩展性，那么恐怕没有明确的答案 - 您可能需要进行一些原型设计并查看性能。

如果您有任何阻塞操作，那么您肯定会想要使用多线程 - 另一方面，上下文切换和锁争用会降低多线程的性能（至少您必须非常小心）。

**编辑**：只是为了澄清无堆栈协程的东西：它本质上只是一些语法糖，使异步 API 看起来更像顺序/阻塞调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:03:20.677

由于难以预测参考位置、CPU 指令缓存、调度延迟等的相对影响，您需要测量影响以确定实际会发生什么。

如果您想进行启发式猜测，请考虑使用堆栈大小为*S的**n 个*线程，每个线程总是占用*nS*个字节，无论每个线程实际使用多少堆栈空间。如果这使您跨越页面边界，则可能会显着降低性能。

# clojure - 为什么 recur 期望使用 %& 的短格式 func 有一个参数

> ID：10553766
> 
> 赞同：4
> 
> 时间：2012-05-11T14:53:01.320
> 
> 标签：clojure

注意：不重复[为什么 Clojure recur 认为它应该只有一个参数？](https://stackoverflow.com/questions/8466806/why-does-clojure-recur-think-it-should-only-have-one-argument). 我没有使用循环。

```
(def t 
  #(let [[low high] (sort %&)] {:low low :high h}))

(t 3 2)
=> {:low 2, :high 3} 
```

鉴于这按预期工作。这怎么没有：

```
(def t 
  #(let [[low high] (sort %&)] 
    (if (= 0 low)
      nil
      (do
        (println {:low low :high high})
        (recur low (dec high))))))

(t 3 2)
=> java.lang.IllegalArgumentException: Mismatched argument count to recur, expected: 1 args, got: 2 
```

鉴于它说它需要 1 个参数，我可以猜测我可以通过将参数转换为集合来使其工作：

```
(def t
  #(let [[low high] (sort %&)]
    (if (= 0 low)
      nil
      (do
        (println {:low low :high high})
        (recur [low (dec high)])))))

(t 3 2)
=> {:low 2, :high 3}
   {:low 2, :high 2}
   {:low 1, :high 2}
   {:low 1, :high 1}
   nil 
```

... 但为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:06:49.473

这就是它的设计方式。[Clojure 网站](http://clojure.org/special_forms#Special%20Forms--%28recur%20exprs%2a%29)说：

> 递归表达式必须与递归点的数量完全匹配。特别是，如果递归点是可变参数 fn 方法的顶部，则不会收集其余参数 - 应该传递单个 seq（或 null）。

我认为它是这样设计的，因为如果函数本身给你一个序列（而不是单个参数），那么递归形式会更自然地接受一个序列，或者可以成为一个序列的东西。如果不是这种情况，那么您将需要分解给定的序列以执行递归。

您的示例似乎不符合标准，因为看起来您真的只关心有两个参数，这意味着您真的不需要其余的参数。您可能会更好地明确定义两个参数并确定 let 语句中的低位和高位，而不是对其余的参数进行排序并解构它们。

这是您的代码，修改最少。我将两个显式参数包装在一个向量中，然后将它们传递给 sort（本质上是模仿 rest args），并将两个参数传递给 recur。

```
(def t
  #(let [[low high] (sort [%1 %2])]
    (if (= 0 low)
      nil
      (do
        (println {:low low :high high})
        (recur low (dec high)))))) 
```

然而，在保持递归形式的同时，我可能会稍微重构一下：

```
(defn t [x y]
  (let [low (min x y) high (max x y)]
    (when-not (zero? low)
      (println {:low low :high high})
      (recur low (dec high))))) 
```

# apache - 使用 Apache 的活动目录

> ID：10553769
> 
> 赞同：0
> 
> 时间：2012-05-11T14:53:10.180
> 
> 标签：apache, dll, active-directory, single-sign-on

我有一个带有 Active Directory 域的**Win2008-r2服务器。**我也在同一台机器上安装了 Apache 服务器。

现在我想在这个 Web 服务器中进行**SSO 身份验证。**

**mod_auth_kerb**是实现这一目标的“最新技术”。

我可能错了，但是在[http://modauthkerb.sourceforge.net/](http://modauthkerb.sourceforge.net/)上我注意到该模块非常适合 Linux，但我没有看到在 Windows 下使用它的任何方便方法。

有没有用 MSVC 编译它的官方方法？

是否有另一个更“符合 Windows”的替代模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:50:57.717

我正在自己在 Linux 环境中进行设置。我认为您需要使用 mod_authnz_ldap。请参阅此链接。

[http://httpd.apache.org/docs/2.2/mod/mod_authnz_ldap.html](http://httpd.apache.org/docs/2.2/mod/mod_authnz_ldap.html)

# xcode - 为什么不能将 xcode 从 4.2 更新到 4.3？

> ID：10553770
> 
> 赞同：1
> 
> 时间：2012-05-11T14:53:20.390
> 
> 标签：xcode

这两个版本都是从 Mac App Store 下载的，那么为什么 xcode 4.2 不可升级呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:55:04.303

4.2 下载只是一个安装程序，但 4.3 下载是一个独立的包，可直接从 Mac App Store 更新。

# python - 使用 Python 编解码器会导致 sys.stdin 出现 readline 问题？

> ID：10553773
> 
> 赞同：3
> 
> 时间：2012-05-11T14:53:40.027
> 
> 标签：python, codec, subprocess

我正在为命令行可执行文件（子程序）编写 Python 包装脚本（childscript.py）。另一个可执行文件（父程序）生成 childscript.py 并将输出通过管道传输到 childscript.py。childscript.py 生成子程序：

```
 retval = subprocess.Popen(RUNLINE, shell=False, stdout=None, stderr=None, stdin=subprocess.PIPE) 
```

如果 childscript.py 直接使用 readline 从 sys.stdin 进行一系列读取：

```
line = sys.stdin.readline() 
```

我能够从父程序中获取所有输出并将其提供给子程序。

但是，如果我尝试通过执行以下操作来使用编解码器模块：

```
sys.stdin = codecs.open(sys.stdin.fileno(), encoding='iso-8859-1', mode='rb', buffering=0) 
```

或做一个：

```
sys.stdin = codecs.getreader('iso-8859-1')(sys.stdin.detach()) 
```

并尝试进行读取，读取不会从父程序获得所有输出。如果我强制从父程序进行额外输出，丢失的位会与我推入的部分额外输出一起出现。当我使用编解码器模块时，childscript.py 似乎没有读取它提供给它的所有内容。

我做错了什么吗？如果没有编解码器，childscript.py 会在从 parentprogram 显示 iso-8859-1 编码的内容时触发异常。

编辑：
我发现 Python v3.x“open”也可以采用编码选项。我将这一行改为使用“open”而不是“codecs.open”：

```
 sys.stdin = open(sys.stdin.fileno(), encoding='iso-8859-1', mode='r') 
```

它按预期工作，没有 open.codecs 产生的任何问题。我已将脚本切换为使用“打开”。

如果有人可以解释为什么编解码器模块的行为不同，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:24:08.087

刷新父级中的输出通道。

管道总是被缓冲的。通常的缓冲区大小为 4KB。与输出连接到控制台时不同，标准运行时不会在每行之后为您刷新输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:13:06.067

尝试这个：

```
import sys
import os

fd = sys.stdin.fileno()
text = ''
while 1:
    try:
        raw_data = os.read(fd, 1024)
        text += unicode(raw_data, 'iso-8859-1')
        # now do something with text
    except (EOFError, KeyboardInterrupt):
        break 
```

这样你就可以避免使用`readline()`which 会对非 ascii 字符发出错误，但仍然可以使用非阻塞读取。

唯一的问题是您必须自己将输入分成几行。

# android - 如何停止“使用对话框完成操作”屏幕

> ID：10553775
> 
> 赞同：0
> 
> 时间：2012-05-11T14:53:45.973
> 
> 标签：android, webview

在我的应用程序中有一个带有 webview 的登录页面。我在 webview 中使用 Java 脚本界面。完成活动后，对话框将显示“使用完成操作”以及设备中的浏览器列表。我怎样才能避免它。这是什么原因。

请帮我..

谢谢，狙击手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:56:53.350

你可能会开始一个隐含的意图，说“嘿，启动 ma 浏览器”，如果你安装了几个，你会看到这个列表。如果您为您的意图提供包名或更多信息，您可以做出明确的意图。

# objective-c - Objective C 中的 CGContextFillPath 是如何工作的？

> ID：10553776
> 
> 赞同：2
> 
> 时间：2012-05-11T14:53:47.710
> 
> 标签：objective-c, ios, cocoa-touch, graphics, cgcontext

我有以下代码应该绘制一个描边和填充的矩形，但填充不会显示。

```
 [[UIColor greenColor] setStroke];
    [[UIColor brownColor] setFill];

    CGContextBeginPath(context);
    CGContextMoveToPoint(context, right, bottom);
    CGContextAddLineToPoint(context, right,top);
    CGContextAddLineToPoint(context,left, top);
    CGContextAddLineToPoint(context, left, bottom);
    CGContextAddLineToPoint(context, right, bottom);

    CGContextStrokePath(context);
    CGContextFillPath(context); 
```

中风有效，我得到一个漂亮的绿色矩形，没有填充（或白色填充）。这是在 iOS 的 UIView 中。看起来很简单，它让我发疯！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T19:47:16.633

正确的做法是将绘图模式设置为同时包含填充和路径。

```
CGPathDrawingMode mode = kCGPathFillStroke;
CGContextClosePath( context ); //ensure path is closed, not necessary if you know it is
CGContextDrawPath( context, mode ); 
```

您可以使用`CGContextFillPath()`to 简单地进行填充，但它基本上只是`CGContextDrawPath()`自动调用`CGContextClosePath()`并`kCGPathFill`用作`CGPathDrawingMode`. 您不妨始终使用`CGContextDrawPath()`并输入自己的参数来获得所需的填充/笔触类型。您还可以使用奇偶绘图模式之一在凸形路径中放置孔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:59:41.883

从[CGContextStrokePath](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)上的文档：

> Quartz 使用图形状态的线宽和描边颜色来绘制路径。作为调用此函数时的副作用，Quartz 会清除当前路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:07:31.983

可能你应该在调用 **CGContextFillPath**之前调用**CGContextClosePath**

# google-analytics - 缺少子域的 Analytics 统计信息

> ID：10553780
> 
> 赞同：0
> 
> 时间：2012-05-11T14:54:01.937
> 
> 标签：google-analytics, analytics

我在一个 Analytics 媒体资源中跟踪主域和子域。我有一个共享配置文件以及使用主机名过滤器的子域特定配置文件。

我`/blog`在 blog.domain.com 上的 URL 前添加了前缀，因为它提供了关于共享配置文件的良好且可读的报告（与显示完整 URL 相比）。

www.domain.com 仅适用于 http，blog.domain.com 仅适用于 https。

www.domain.com 上的跟踪代码：

```
_gaq.push(['_setAccount', 'UA-XXXX-1']);  
_gaq.push(['_setDomainName', '.domain.com']);
_gaq.push(['_trackPageview']); 
```

blog.domain.com 上的跟踪代码：

```
_gaq.push(['_setAccount', 'UA-XXXX-1']);  
_gaq.push(['_setDomainName', '.domain.com']);
_gaq.push(['_trackPageview', '/blog/article-title'); 
```

问题是，该博客的每日 15 次浏览量中只有大约 2 次出现在报告中。

使用[Chrome GA 调试器](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)，我可以看到跟踪信标已发送。GA 实时视图似乎也显示了所有这些页面浏览量。只有一组 GA cookie (.domain.com)，我可以在每个浏览量上看到 cookie 增量中的计数器。

我在博客上也有一个 _trackEvent 统计数据不完整。但出于某种原因，我的电子商务跟踪似乎是完整的。

在上述情况下，跟踪 blog.domain.com 的浏览量和事件是否有任何原因？

# c# - 在水平滚动条上画一条线 - C#

> ID：10553782
> 
> 赞同：0
> 
> 时间：2012-05-11T14:54:24.520
> 
> 标签：c#, .net, scrollbar

有没有办法在 hScrollBar 上画一条线（大约 5 像素宽）？这条线将从一端移动到另一端。它将代表运动。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:04:33.340

我认为这是可能的。你有两个选择 - 一个所有者绘制的滚动条（C++/MFC 中的一个例子来获得挂起 - [http://www.codeproject.com/Articles/14724/Replace-a-Window-s-Internal-Scrollbar-with-a -custo](http://www.codeproject.com/Articles/14724/Replace-a-Window-s-Internal-Scrollbar-with-a-custo) )，第二个选项是跟踪滚动条的移动，画线并重新绘制。

**编辑**

这也可能有帮助 - [http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleelement.scrollbar.lefttrackhorizo​​ntal.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleelement.scrollbar.lefttrackhorizontal.aspx)

# c# - 将带有 SQL Server 2008 数据库的 MVC3 应用程序发布到 IIS 7

> ID：10553783
> 
> 赞同：0
> 
> 时间：2012-05-11T14:54:25.143
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008, iis-7

如果这是一个愚蠢的问题，请原谅我，我知道以前有过类似的问题，但我无法让任何事情对我有用。

我使用 SQL Server 2008 数据库在 c# 中开发了一个非常简单的 mvc3 应用程序。我需要将它发布到另一台运行 iis7 的 PC。我也需要数据库结构和内容来配合应用程序。

谁能给我一步一步的演练该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:26:11.077

如果我错了，请纠正我，但我会假设

> 我也需要数据库结构和内容来配合应用程序。

意味着您需要将数据库的数据库结构和当前内容部署到另一台 PC。

根据您可以使用的工具，这里有几个选项：

1.  [从 Sql Server Management Studio ( http://msdn.microsoft.com/en-us/library/ms188664(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms188664%28v=sql.100%29.aspx) )中使用复制数据库任务

2.  如果您有 Visual Studio 2010 Premium 或 Ultimate，“数据”菜单下有用于比较和同步数据库的任务 ( [http://msdn.microsoft.com/en-us/library/aa833435.aspx#synchronize](http://msdn.microsoft.com/en-us/library/aa833435.aspx#synchronize) )

3.  如果您有 Visual Studio 2k8 数据库，则有类似的功能，但我从未使用过它 (http://msdn.microsoft.com/en-us/library/aa833435(v=vs.90).aspx)

4.  使用 sqlcmd.exe 创建数据库的转储，移动这些转储，然后使用 sqlcmd 将它们恢复到新环境 ([http://msdn.microsoft.com/en-us/library/ms180944(v=sql.100) .aspx][4]，查看维护部分。您只需要进行备份，然后制作类似的 .sql 即可使用 RESTORE 命令。http://msdn.microsoft.com/en-us/library/ ms186858(v=sql.100).aspx)

如果您要在多台机器上经常这样做，并且您的大部分内容都是静态的，请查看创建数据库项目是否会对您有所帮助。(http://msdn.microsoft.com/en-us/library/84b1se47.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:47:56.610

如果它是一次性的，那么有一种快速简单的方法可以做到这一点，并且有一种长期可编程的方式。

快速简单：将您的应用程序文件复制到新服务器的 web 目录中，然后备份您的数据库，然后在新服务器上恢复它

长期：您可以查看 msdeploy 来推动您的更改，并查看 FluidMigrations 或 MS 数据项目之类的东西来进行数据库更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:10:25.060

好的，我现在使用以下步骤使其工作：

1.  在 Visual Studio 的解决方案资源管理器中右键单击项目名称，然后选择发布，选择`File System`发布方法并指定目标位置（站点根目录或您可以找到它的某个位置，以便稍后移动文件）。
2.  打开sql server management studio，找到你的数据库，右键单击它，任务，备份。设置一个目的地（在某个容易找到的地方）并单击确定（受@BobTheJanitor 和@theunderscoregreg 的启发）。
3.  在 iis 中建立一个新的网站，在任何机器上托管该网站。
4.  在新站点的根目录中，我添加了一个名为的文件夹`app`，我将步骤 1 产生的所有文件都放入其中（我是通过 ftp 完成的，但我想你如何将它们放在那里并不重要）。
5.  在 iis 的连接侧边栏中找到您的新站点，然后右键单击该`app`文件夹并选择转换为应用程序。
6.  再次在连接侧边栏中单击`Application Pools`并选择您的新应用程序分配给的任何一个，右键单击它并选择高级设置。将 .NET 版本设置为 4.0，并在流程模型下将标识设置为（在[此处](http://www.gotknowhow.com/articles/fix-login-failed-for-user-iis-apppool-aspnet-v4-error-iis7)`LocalSystem`找到此位）
7.  在新主机上的 SSMS 中，右键单击数据库并选择`Restore Database...`. 在该`To database:`字段中输入与第一台机器上的数据库相同的名称。从设备中选择并选择您在步骤 2 中创建的备份文件（我必须将文件类型更改为所有文件才能查看文件），然后单击确定。
8.  这可能是针对我的情况，不确定。我使用`ADO.NET Entity Data Model`项目项创建`.edmx`模型，该模型将连接字符串添加到`Web.Config`名为 somethingEntities 的文件中。这个连接字符串似乎是特定于电脑的`Source=`，因为字符串的一部分是指特定的机器，所以我不得不编辑它。再次在 iis 中，选择您的站点，然后选择应用程序文件夹。打开`connection strings`ASP.NET 部分中的项目。找到 somethingEntities 连接字符串并双击它，你现在应该有一个对话框窗口可以让你编辑它。我所要做的就是将字符串中的电脑名称更改为新主机的名称。

我的新网站正在运行！我远非专家，并意识到我在这里所做的可能不是最佳实践，但它确实有效。如果有人可以提出改进建议或更好的策略，我将更新此答案或仅接受更好的答案。

# javascript - 您如何获得相同大小的社交媒体按钮？

> ID：10553784
> 
> 赞同：0
> 
> 时间：2012-05-11T14:54:29.290
> 
> 标签：javascript, css, facebook-like, social-media

我遇到过一些网站，在这些网站上，所有用于发布关于该页面或喜欢此人的社交媒体图标或 +1 谷歌页面的大小都相同，但默认情况下，当您从中获取代码时，它们的大小都不同相关网站。这是我所说的所有尺寸相同的示例：http: [//twtvite.com/bedfordtweetup3](http://twtvite.com/bedfordtweetup3)

现在这是一个默认并排的 twitter 和 google 示例（单击顶部的 click me 选项卡）：[http ://test.fluidstudiosltd.com/](http://test.fluidstudiosltd.com/)

人们如何设法使它们具有相同的大小？我已经在谷歌上搜索了几个小时，没有任何乐趣。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:57:52.267

您可以将按钮 javascript 复制到本地服务器，以便您可以编辑使用的图像。我知道您可以为几项服务做到这一点，但不确定它是否适用于所有服务。

但请记住，这样做会冒 javascript 在共享服务更新其本地代码后过期的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:57:29.373

据我所知，您只需要使用相关按钮生成器的设置即可。

例如，在[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)上的 Facebook，您在布局样式下选择“box_count”。

Twitter，请参阅[https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)并将 'data-count="vertical"' 放在相关位置

希望这很有用。在过去的几天里，我一直在研究这样的事情，现在当我尝试喜欢 Facebook 按钮时，我总是遇到非常烦人的“错误”。不过，至少我可以分享我发现的东西！

希望这很有用。在过去的几天里，我一直在研究这样的事情，现在当我尝试喜欢 Facebook 按钮时，我总是遇到非常烦人的“错误”。不过，至少我可以分享我发现的东西！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T01:00:42.490

另一件事是您可以通过直接链接来使用自己的图像（只是没有计数框），请参阅我刚刚花了很长时间再次找到的这个链接...... [http://atlchris.com/1665/how-to-create-custom-为所有流行的社交服务共享按钮/](http://atlchris.com/1665/how-to-create-custom-share-buttons-for-all-the-popular-social-services/)

玩得开心！

# javascript - javascript 故障安全插件

> ID：10553785
> 
> 赞同：2
> 
> 时间：2012-05-11T14:54:32.940
> 
> 标签：javascript, html

是否可以编写无论网站上的其他 JS 代码是否失败都能运行的 Javascript？根据我目前的经验，一旦 JS 抛出错误，所有其他应该继续执行的代码都不起作用。有没有可能写出永远有效的东西？我也无法控制网站上的所有 JS 代码。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:21:06.017

是的，但需要一些努力。想象一下，您正在使用一些`f`具有方法的框架`x`。尝试这个：

```
 <script src="...."> // load the real "f"
 <script>

 if (type f === 'undefined') { f = {}; }
 if (type f.x === 'undefined') { f.x = function() {}; }
 ....
 </script> 
```

如果远程脚本无法加载/执行，`f`仍将被定义。脚本中的检查确保您可以调用`f.x`而不必担心或淹没您的代码`try{}catch`。

正如[zzzzBov 在他的 fiddle 中展示的那样](http://jsfiddle.net/893tw/)，框架脚本中的失败只会中止其执行。处理错误后（通常将其记录到控制台），浏览器将继续处理下一个`script`元素。

# javascript - 从谷歌地图中运行脚本？

> ID：10553789
> 
> 赞同：2
> 
> 时间：2012-05-11T14:54:39.777
> 
> 标签：javascript, google-maps, jquery

我在谷歌地图脚本中有以下代码......

```
<a class='btn btn-modal' data-target='popup.html'>Go</a> 
```

在脚本之外，链接有效并运行该函数`$('.btn-modal').click(function() {`（在页面上），但在 infoWindowHtml 中它没有。

任何人都知道为什么您不能从护目镜地图中在我的页面上运行脚本？

我想在 Google 地图所在页面的顶部运行的脚本...

```
$(document).ready(function () {
    // Support for AJAX loaded modal window
    $('.btn-modal').click(function () {
        $.get($(this).attr('data-target'), function (data) {
            $('#modal').html(data);
            $('#modal').modal('show');
        }, 'html');
    });
}); 
```

谷歌地图提取显示链接

```
map = new google.maps.Map(document.getElementById("map"), options);
// Create an Array for the Markers
var markers = [];
var latLng = new google.maps.LatLng(#local.poiLat()#, #local.poi()#);
var iconImg = '/assets/images/pin-50.png';
var marker = new google.maps.Marker({
    icon: iconImg,
    draggable: true,
    position: latLng,
    title: '#left(local.poiTxt(),60)#'
});
// Action Listener for the Marker
google.maps.event.addListener(marker, "click", function (event) {
    var area = this.get('location');
    var infoWindowHtml = "<a class='btn btn-modal' data-target='popup.html'>Go</a>";
    infoWindow.setContent(infoWindowHtml);
    infoWindow.open(map, this);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:04:12.357

infowindow 不是加载时 DOM 的一部分......所以你需要使用`on`而不是`click`：

```
$(document).on('click','.btn-modal',function() { 
```

`document`加载时存在的父元素在哪里-也许`id`是`div`地图的...所以

```
$('#map').on('click','.btn-modal',function() { 
```

[.on() 的文档在这里](http://api.jquery.com/on/)

# xcode - 如何轻松地为 NSImage 设置动画？

> ID：10553791
> 
> 赞同：1
> 
> 时间：2012-05-11T14:54:44.617
> 
> 标签：xcode, animation, notifications, nsview

我在 NSImage 中创建了一个 NSView，我想通过 NSNotificationCenter 发送开始和停止通知来制作动画。

我必须采取哪种方式来实现这一点？

我的代码是：

```
@implementation SyncToolbarItemView

- (id)init
{
    self = [super initWithFrame:CGRectMake(0.0f, 0.0f, 32.0f, 32.0f)];
    if (self)
    {
        // Initialization code here.

        // Add observers
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(startSyncing) name:NOTIFICATION_START_CHECK_TAG_PROCESS object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(stopSyncing) name:NOTIFICATION_FINISHED_CHECK_TAG_PROCESS object:nil];
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Init image
    img_sync = [[NSImageView alloc] initWithFrame:NSMakeRect(0.0f, 0.0f, 32.0f, 32.0f)];
    [img_sync setImage:[NSImage imageNamed:@"icon_sync.png"]];

    // Add to view
    [self addSubview:img_sync];

    [img_sync release];
}

- (void) startSyncing
{

}

- (void) stopSyncing
{

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:06:53.493

您应该查看 CoreAnimation 参考，它非常清楚地说明了如何为 NSImageView 等控件设置动画。

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514-CH1-SW1](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514-CH1-SW1)

# javascript - Javascript：判断 URL 是否等于字符串，带或不带斜杠

> ID：10553792
> 
> 赞同：1
> 
> 时间：2012-05-11T14:54:46.500
> 
> 标签：javascript, string, url

我在 JS 中有以下条件语句：

```
if(url === 'http://www.productionlocations.com/locations' || url === 'http://www.productionlocations.com/locations/') 
```

我正在努力提高效率，所以我尝试了这个：

```
function stripTrailingSlash(str) {
    if(str.substr(-1) == '/') {
        return str.substr(0, str.length - 1);
    }
    return str;
}

theurl = stripTrailingSlash(url);                   
if(theurl === 'http://www.productionlocations.com/locations') 
```

但显然这只会使它变成更多代码:)

这样做最有效的方法是什么？我之前尝试过使用 indexOf() ，但是没有用。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:57:48.217

你可以使用[`test`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)方法：

```
if(/^http:\/\/www\.productionlocations\.com\/locations\/?$/.test(url)) {
    // code goes here
} 
```

# php - Twitter 搜索 API 和 $_POST max_id 参数

> ID：10553794
> 
> 赞同：0
> 
> 时间：2012-05-11T14:54:56.703
> 
> 标签：php, post, twitter

我正在使用这个 twitter.class 脚本来获取一些受**max_id**参数限制的推文：

```
<?php    
$max_id = $_POST['max_id'];
class Twitter
{        
    public function __construct(){ }

    public function searchResults( $search = null )
    {            

        $url = "http://search.twitter.com/search.atom?q=" . urlencode( $search ) . "&result_type=recent&rpp=4&max_id=" . $max_id;       
        $curl = curl_init();
        curl_setopt( $curl, CURLOPT_URL, $url );
        curl_setopt( $curl, CURLOPT_RETURNTRANSFER, 1 );
        $result = curl_exec( $curl );
        curl_close( $curl );

        $return = new SimpleXMLElement( $result );
        return $return;        
        }

    public function echok() {
    echo $this->max_id; 
    }    

    }    
?> 
```

**这个脚本是**另一个（test.class.php）需要的一次，它启动一个循环并回显推文。

我想根据页面中已加载的推文动态加载“max_id”。我用jQuery得到最后一个'id'然后发布它

我试图通过 jQuery Ajax 发布这个变量，只有在完成后，才加载其他 scipr 以获取推文。像这样：

```
var max_id_pre = $('.ids:last').text();
var max_id = 'max_id=' + max_id_pre;

$.ajax({
url: "twitter.class.php",
data: max_id,
type: "POST",
success: function(){
$('#container').load("test.class.php");
}
}); 
```

由于 twitter.clas.php 没有获得“max_id”变量，因此无法正常工作，在 test.class.php 要求标记推文之前。

我知道我正在尝试将变量发布到课程中，这可能吗？

谢谢！

# java - c3p0 属性应该在哪里指定？

> ID：10553797
> 
> 赞同：0
> 
> 时间：2012-05-11T14:55:02.197
> 
> 标签：java, spring, hibernate, c3p0

我正在使用 spring/hibernate 集成应用程序。我已经配置了 c3p0 连接池。我正在使用 c3p0 组合池数据源。我应该在哪里指定组合池数据源属性？

在这个部分？

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="mappingLocations" value="classpath:hibernate-mapping.xml" />
        <property name="hibernateProperties">
            <props>
                **//Here do I need to specify combopooled datasource properties?
        //like acquireIncrement
            acquireRetryAttempts
            acquireRetryDelay
            preferredTestQuery
            maxPoolSize...etc**
            </props>
        </property>
        <property name="dataSource" ref="dataSource" />
    </bean> 
```

还是这里？

```
<bean id="rootDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${jdbc.driver}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="user" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
**//Here do i need to specify combopooled datasource properties?
            //like acquireIncrement
            acquireRetryAttempts
            acquireRetryDelay
            preferredTestQuery**
            maxPoolSize...etc

</bean> 
```

请给我建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:15:09.867

`c3p0.properties`您可以在文件中指定它们。只需将它放在类路径的根目录中

`c3p0-config.xml`或者，在您的类路径根目录中命名的 xml 文件中

或者，如果你想在你的 Spring xml for Hibernate 中使用它，你可以使用

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
      <!--<property name="lobHandler">
         <ref local="lobHandler" />
      </property>-->
      <property name="hibernateProperties">
         <props>
            <prop key="hibernate.connection.driver_class">${jdbc.drivers}</prop>
            <prop key="hibernate.connection.url">${jdbc.url}</prop>
            <prop key="hibernate.connection.username">${jdbc.username}</prop>
            <prop key="hibernate.connection.password">${jdbc.password}</prop>
            <prop key="hibernate.c3p0.min_size">5</prop>
            <prop key="hibernate.c3p0.max_size">100</prop>
            <prop key="hibernate.c3p0.timeout">1800</prop>
            <prop key="hibernate.c3p0.max_statements">50</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
            <prop key="hibernate.cglib.use_reflection_optimizer">true</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.format_sql">true</prop>
         </props>
      </property> 
```

如果两者都存在，我相信休眠设置会覆盖 c3po.properties 文件的使用。但是[这篇文章](https://stackoverflow.com/questions/5081866/is-there-any-reason-to-keep-around-a-c3p0-properties-file-when-you-use-hibernate)暗示了与 c3po 文档的一些不一致之处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:25:49.033

这些应该继续到数据源 bean (rootDataSource)。一旦您将数据源传递给 LocalSessionFactoryBean，hibernate 将不会创建连接池 - 因此 hibernateProperties 下指定的属性将被忽略。

您想要设置的所有属性都可以作为[ComboPooledDataSource](http://www.mchange.com/projects/c3p0/apidocs/com/mchange/v2/c3p0/ComboPooledDataSource.html)上的 setter 方法使用。将更多属性标签添加到您的数据源 bean 并为那里的那些指定值。

```
<bean id="rootDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${jdbc.driver}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="user" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
        <property name="password" value="${jdbc.password}" />
        <property name="acquireRetryAttempts" value="..." />
        <property name="acquireRetryDelay" value="..." />
        <property name="preferredTestQuery" value="..." />
        <property name="maxPoolSize" value="..." />    
    </bean> 
```

# javascript - 如何在 JavaScript 中覆盖全局函数，但保留对原始函数的引用？

> ID：10553800
> 
> 赞同：0
> 
> 时间：2012-05-11T14:55:04.677
> 
> 标签：javascript

我想为 window.confirm 实现一个自定义函数，这样我就不必重写大量遗留代码，但如果出现问题，或者取决于一些任意逻辑，我能够回退到原始函数。

一个快速的存根代码，例如（可能不会这样做，但只是为了一个想法）：

```
window.confirm = function(message, successCallback){
  var ok = site.UI.confirmDialog(message);
  if (ok && typeof(successCallback) == 'function'){
      successCallback();
  } else {
     // maybe call original browser confirm?
     // window.confirmOriginal...?
  }
} 
```

这里的问题是，如果我要覆盖原始函数，如何获得它？它是否存在于原型的某个地方，还是我看错了？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:56:18.310

[这是一个演示](http://jsfiddle.net/dtfuj/)

```
var origConfirm = window.confirm; //store for future use

​window.confirm = function(msg){   //override
     alert(msg);   
}

window.confirm('override!');      //should now be an alert
origConfirm('old confirm');       //the old confirm 
```

# jquery - 在切换中间跳过

> ID：10553801
> 
> 赞同：1
> 
> 时间：2012-05-11T14:55:11.950
> 
> 标签：jquery, toggle

```
$(function(){ 
    $(".square").toggle(
        function(){ $(this).animate({"width":"200px"}, 900); 
                  },

        function(){ $(this).animate({"width":"100px"}, 900); 
        } 
    ); 

    $(document).click(function() {
       $('.square').animate({ "width":"100px"}, 900);  
    });
})​ 
```

在此示例中，
1- 用户单击一次正方形（执行切换的第一个功能）。
2- 用户然后单击背景调用另一个函数
3- 用户单击返回正方形（我想调用切换的第二个函数，它的作用与 num.2 相同，这就是为什么在第一次点击。）

所以我想在数字中。2 我应该跳过所有的切换功能。我不知道该怎么做

**如果只执行第一个功能，如何跳过所有切换？**

（顺便说一句，我尝试了“stop（）.animate”但它不起作用）

这是示例工作。您可以进行更改：http: [//jsfiddle.net/xngx9/](http://jsfiddle.net/xngx9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:09:34.753

## *[演示](http://jsfiddle.net/6QYXF/1/)*

```
$(function(){
    $(".square").click(function(e){
        e.stopPropagation();
        var tgl = $(this).width() === 100 ?
        $(this).stop(1).animate({"width":"200px"}, 900):
        $(this).stop(1).animate({"width":"100px"}, 900);
    });

    $(document).click(function() {
      $('.square').stop(1).animate({ "width":"100px"}, 900);  
    });
}); 
```

# haskell - 在 Haskell 中封装数据定义

> ID：10553803
> 
> 赞同：1
> 
> 时间：2012-05-11T14:55:14.707
> 
> 标签：haskell, types, syntax

我正在尝试使用其他数据类型来定义数据类型，如下所示：

```
data A = Something String | SomethingElse Int

data B = Another B | YetAnother A

data C = A | B

x :: [ C ]
x = [ YetAnother (SomethingElse 0), Something "Hello World" ] 
```

但这给了我一个错误，说我在期待 B 型时不能拥有 A 型。这是为什么呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T14:57:58.623

您缺少`C`.

```
data A = Something String
       | SomethingElse Int

data B = Another    B
       | YetAnother A

data C = C0 A
       | C1 B

x :: [ C ]
x = [ C1 (YetAnother (SomethingElse 0))
    , C0 (Something "Hello World")
     ] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:58:11.327

`A`和`B`in`data C = A | B`是新数据构造函数的声明，而不是对现有类型的引用`A`和`B`. （构造函数在声明中不是可选的`data`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T23:47:14.700

Haskell 没有真正的“联合”类型，Haskell 中的联合必须使用构造函数进行标记。（见[维基百科>标记联合](http://en.wikipedia.org/wiki/Tagged_union)）。

[Either](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aEither)是 Haskell 中的通用标记联合类型，其中数据被标记为`Left`or `Right`。

```
data Either a b = Left a | Right b 
```

# soap - 在 SOAP 中获取连接的对象

> ID：10553807
> 
> 赞同：0
> 
> 时间：2012-05-11T14:55:42.850
> 
> 标签：soap, jax-ws, java-metro-framework

我在 Tomcat 上用 Metro 编写了一个 SOAP 服务。它工作正常，但课程没有全部返回。

我有一个类 ServiceReport 与其他类有关系。这是代码：

```
@Entity
@Table( name = "ALBAU_SERVICEREPORT" )
public class ServiceReport extends StoredEntity<ServiceReport> {

   @ManyToOne( targetEntity = AlbauInstallation.class, cascade = CascadeType.PERSIST )
   @XmlTransient
   private AlbauInstallation installation;

   @OneToOne( cascade = CascadeType.ALL )
   private FlexDocument flexDocumentData;

   //   private Header headerData;
   @OneToMany( cascade = CascadeType.ALL,
               fetch = FetchType.EAGER,
               targetEntity = Position.class,
               mappedBy = "serviceReport" )
   private List<Position> positionList; 
```

在 WSDL 中创建的唯一属性是 flexDocumentData。为了在生成的界面中同时拥有 AlbauInstallation 和 positionList，我需要哪些注释？

这是 WSDL 的链接：[http ://alpha.sertal.ch:8181/VisionWeb/soap/AlbauInterface?wsdl](http://alpha.sertal.ch:8181/VisionWeb/soap/AlbauInterface?wsdl)

看起来 OneToOne 关系已通过，而其他关系则没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:48:50.823

在这种情况下，解决方案似乎非常简单：

在课堂上`Position`，我将 ManyToOne 注释更改如下： 形式：

```
@ManyToOne
private ServiceReport serviceReport; 
```

到：

```
@ManyToOne(targetEntity = ServiceReport.class)
private ServiceReport serviceReport; 
```

需要的第二个更改是添加一个`setter`for 职位。我不知道为什么但没有设置器，该属性不会出现在 WSDL 中。

现在我得到了 WSDL 中的集合

# javascript - 在 ipad 上触发 unhover / mouseout / blur

> ID：10553810
> 
> 赞同：3
> 
> 时间：2012-05-11T14:56:09.870
> 
> 标签：javascript, jquery, ipad, mouseevent

在 Javascript 上，ipad 将通过单击威胁悬停，而下一次单击将是触发的真正单击事件。

我们可以在第一次点击 ipad 后触发 unhover 或 mouseout 或模糊，所以第一次点击后的下一次点击仍然是悬停事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:17:13.570

要在 ipad 上捕捉内容，您可以查找这些事件 touchstart、touchend、touchmove。

要触发某些事情，您只需执行 $(element).trigger('event_name');

```
$('testElement').on('touchend', function () {
      $(this).trigger('mouseout');
}); 
```

# spring - 实现相同接口的自动装配 bean - 如何在 JUnit 测试中自动装配特定的依赖 bean？

> ID：10553815
> 
> 赞同：0
> 
> 时间：2012-05-11T14:56:27.460
> 
> 标签：spring, junit, easymock, autowired

我有一个 Spring 3.1/Java/Tomcat 应用程序。我有一个服务类如下：

```
public class SomeServiceImpl implements SomeService {

  @Autowired
  public AnotherService anotherService;

  //  other code... 
```

这使用了另一个自动装配的服务类 AnotherService。这两个服务类都在 serviceContext.xml 文件中声明。

我正在编写 junit 来测试 SomeServiceImpl 并使用 autowired 来注入被测类 (SomeService) 以及被测类 (AnotherService) 所需的模拟 (EasyMock) 依赖项。AnotherService 的 easymock 依赖项在 testContext.xml 中定义，如下所示：

```
 <bean id="mockAnotherService" class="org.easymock.EasyMock" factory-method="createMock" primary="true">
        <constructor-arg value="com.xyz.AnotherService" />
    </bean> 
```

在我的测试类中，我配置为使用两个上下文文件。但是，我看到 ServiceImpl 已正确连接到实际实现（这是所需的），但不是另一个服务的模拟版本，而是创建版本 (AnotherServiceImpl) 正在连接。

如何获取我的依赖项的模拟版本？我不能在实际实现中使用@Resource 或@Qualifier，因为那样会破坏目的。我可以在我的测试课中使用这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:10:09.387

如果它们都在 中声明`serviceContext.xml`，并且您想模拟其中一个，那么该文件对测试没有用处。要么拆分它，以便您可以使用结合了包含模拟的测试上下文的“真实”Spring上下文文件之一，或者只是手动创建bean并`AnotherService`使用setter方法设置。控制反转的优点之一是允许您手动创建 bean 并以这种方式注入依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:16:49.937

您可以将 serviceContext.xml 导入到 testContext.xml 中，然后只在测试用例中引用 textContext.xml，而不是配置为使用这两个上下文文件。

当您将配置文件导入另一个文件时，另一个文件有机会覆盖导入文件中的 bean 定义。

确保模拟的 id 与您的类相同 - 否则它将创建两个不同的 bean。另一个问题是模拟对象没有公布正确的接口类型——因此按类型自动装配可能会失败。要解决该问题，您需要执行以下操作。我将这种方法与 mockito 一起使用 - 也应该适用于简单的模拟。

```
<bean id="anotherService" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target">
     <bean class="org.easymock.EasyMock" factory-method="createMock" primary="true">
        <constructor-arg value="com.xyz.AnotherService" />
    </bean>
    </property>
    <property name="proxyInterfaces">
      <value>com.xyz.AnotherService</value>
    </property>
  </bean> 
```

要尝试的另一件事是在您的类中创建 Java Config 样式的方法来创建模拟对象。如果直接在测试类中创建它不起作用，您可以使用另一个带有 @Configuration 的类来创建模拟，然后在 testContext.xml 中将其定义为 bean

```
 @Bean
  AnotherService anotherService() {
      return EasyMock.createMock(AnotherService.class);
  } 
```

# matlab - Matlab：在数组中找到第一个较小或较大的元素

> ID：10553819
> 
> 赞同：0
> 
> 时间：2012-05-11T14:56:44.443
> 
> 标签：matlab

我有两个不同大小的数组 A 和 B。我正在将 A 与 B 进行比较，并希望为 A 中的每个元素找到 B 中更小/更大的第一个元素。

我想使用类似 ismember(A,B) 的东西，只是我不是在寻找相同的元素。问题是“查找”不起作用，因为 A 和 B 的大小不同。

我现在使用了一个循环，但我正在寻找一种更优雅的编程方式。这是循环：

```
 for zz=1:length(A)
            tmpmax(zz) = find(B>=A(zz),1);
            tmpmin(zz) = find(B<=A(zz),1,'last');                
        end 
```

感谢您的建议！

伊莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:13:06.130

您可以通过以下方式摆脱循环：

```
tmpmin = arrayfun(@(x) find(B>=x,1), A);
tmpmax = arrayfun(@(x) find(B<=x,1,'last'), A ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:00:45.910

这取决于您执行此操作的频率，以及您的向量有多大。但我建议对数组进行预处理`B`。例如，考虑测试用例：

```
B = rand(1,10)
B =
  0.82346 0.69483 0.3171 0.95022 0.034446 0.43874 0.38156 0.76552 0.7952 0.18687 
```

我们需要建立一个累积的最小和最大向量。如果`B`相当长，有几种方法可以做到这一点。

```
Bmin = B;
N = inf;
while numel(Bmin) < N
  N = numel(Bmin);
  k = find(diff(Bmin) >= 0);
  Bmin(k+1) = [];
end
Bmax = B;
N = inf;
while numel(Bmax) < N
  N = numel(Bmax);
  k = find(diff(Bmax) <= 0);
  Bmax(k+1) = [];
end 
```

然后

```
Bmin
Bmin =
   0.82346      0.69483       0.3171     0.034446

Bmax
Bmax =
   0.82346      0.95022 
```

（我也可以构建`Bmin`和`Bmax`使用一个简单的 for 循环，它可能会更快，但 while 循环写起来更有趣。）

现在很简单。为了找到`B`大于任何给定值的第一个元素，请使用`histc`on `Bmax`。而且由于`histc`是矢量化的，所以运算速度很快。为此，请查看 的第二个返回参数`histc`。或者，您可以编写矢量化二进制搜索方案。`histc`还将通过翻转 中元素的顺序来解决最小元素问题`Bmin`。

如果您的目标是找到元素的 INDEX，这也很简单，只需在构建`Bmin`和`Bmax`.

# javascript - 如何创建类似滚动 UI 的 Google Plus？

> ID：10553820
> 
> 赞同：0
> 
> 时间：2012-05-11T14:56:51.167
> 
> 标签：javascript, css, user-interface, google-plus

请注意，[像 Google Plus 一样劫持页面滚动？](https://stackoverflow.com/questions/6924155/hijack-page-scrolling-like-google-plus)要求一个非常不同的东西。

在 Google+ 的以下屏幕截图中，红色框显示了滚动的区域。所有其他部分，例如，左侧导航是静态的。我对他们的 UI 很感兴趣。即使鼠标悬停在导航部分或任何其他固定部分上，您也可以滚动中心部分。

知道他们是怎么做到的吗？

![只有红框内的部分滚动](../Images/ad11da7a22da9baed76e3ddd8747b1b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:14:08.687

UI 组件可能都在`display: fixed`CSS 块中，无论滚动如何，都将它们固定到浏览器窗口。然后主要内容可以在一个常规块中，随页面滚动。

# mongoose - 如何以正确的方式更新记录？

> ID：10553823
> 
> 赞同：4
> 
> 时间：2012-05-11T14:57:00.183
> 
> 标签：mongoose, express

我正在编写一个带有 Express/NodeJs 后端的骨干应用程序，它依赖于 mongoDb（通过 mongoose）进行存储。

是时候更新数据库中的记录了，我碰壁了。

我写的代码是：[https ://gist.github.com/b90130f640cea75b0cbd](https://gist.github.com/b90130f640cea75b0cbd)

我了解阻止更新的错误是由于我传递了所有字段，包括不可修改的“_id”字段。

我要问的是：有什么方法可以将所有字段传递给更新方法，还是必须一一指定（或遍历所有字段）？

提前感谢您的帮助，问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:47:19.550

您可以在将 _id 传递给之前将其删除`model.update()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T00:04:58.653

您可以只更新插入而不是更新。

```
new User(req.body).save(); 
```

无论如何，除了 req.body 将具有正确的数据可能会导致安全问题，具体取决于您的模型（GitHub 最近遇到了这样的问题）。

我的建议是只从 req.body 中获取你想要的内容并进行更新。

```
var updateData = {
  name: req.body.name
};
User.update({_id: user._id},updateData, function(err,affected) {
  console.log('affected rows %d', affected);
}); 
```

# php - 如何将变量从 jquery 传递到 php？

> ID：10553825
> 
> 赞同：0
> 
> 时间：2012-05-11T14:57:05.957
> 
> 标签：php, javascript, jquery

我想要将变量从 jquery 传递到 php 的方法怎么做？我有这个代码

```
<script>
       $(document).ready(function(){
        $('a').click(function(){
        var title = $(this).attr('value');
        $('.div').attr('value', title);    
        });
      }); 
</script> 
```

我想通过 javascript 变量将元素的标题传递给 php。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:01:15.313

您可以使用`$.ajax()`将值传递给 PHP： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
<script>
   $(document).ready(function(){
       $('a').click(function(){
         var title = $(this).attr('value');
         $('.div').attr('value', title);
         //Communicate with file.php pass it the title via POST
         //If the php returns a true or a json value, alert it.
         //Otherwise if php returns false or an http error code, alert there was an error.
         $.ajax({
            url: "/path/to/file.php",
            data: { "title": title },
            type: "POST",
            dataType: "JSON",
            success: function(d){
                alert("The Call was a success: "" + d);
            },
            error: function(d){
                alert("There was an error, it was: " + d);
            }
         });
         //Make sure you do this, otherwise the link will actually click through.
         return false;
       });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:02:25.537

您可以使用 AJAX 或将其设置为`<input name="var_name" type="hidden" value="">`字段值，并在提交后获取该值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:00:35.377

您可以使用 AJAX 实现它！

[http://en.wikipedia.org/wiki/Ajax_%28programming%29](http://en.wikipedia.org/wiki/Ajax_%28programming%29)

使用 jquery，您可以调用您的 php 页面。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

维基百科文章提供了该技术的概述，jquery 文档提供了非常好的完整示例。

它允许您获取数据并将其从您的网站发送到 PHP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:03:35.983

发送 AJAX 请求。您可以通过`POST`或传递数据`GET`。

对于 jQuery：

[$.ajax](http://api.jquery.com/jQuery.ajax/) [$.post](http://api.jquery.com/jQuery.post/) [$.get](http://api.jquery.com/jQuery.get/)

# c++ - 我可以使用什么来代替 std::move()？

> ID：10553841
> 
> 赞同：4
> 
> 时间：2012-05-11T14:58:07.753
> 
> 标签：c++, c++11, std, rvalue-reference, move-semantics

我正在使用具有 C++0x 规范的 C++ 编译器，并希望为环绕 std::wstring 的 String 类创建移动构造函数。

```
class String {
public:
    String(String&& str) : mData(std::move(str.mData)) {
    }

private:
    std::wstring mData;
}; 
```

在 Visual Studio 中，这可以完美运行。在 Xcode 中，`std::move()`不可用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:13:40.433

`std::move`只需将其参数转换为右值引用。您可以编写自己的版本：

```
template<class T>
typename std::remove_reference<T>::type&&
move( T&& arg ) noexcept
{
  return static_cast<typename std::remove_reference<T>::type&&>( arg );
} 
```

# javascript - jquery 文档就绪侦听器与图像加载；执行顺序

> ID：10553842
> 
> 赞同：1
> 
> 时间：2012-05-11T14:58:10.410
> 
> 标签：javascript, jquery, html, image, order-of-execution

我有一个页面，我想根据一天中的时间显示不同的图像。

我现在的工作方式是附加到 jquery 就绪的侦听器，我有一个函数可以选择所有图像元素并根据小时更改它们的源。每个 img 标签都有一个在 html 中指定的默认 src，以防万一用户停用了 js 或其他什么。

然而，使用这种方法，我很怀疑浏览器开始加载默认图像，然后继续加载特定时间的图像，从而导致不必要的开销。

所以我的问题是：如果我在 jquery 就绪事件中更改 img 源，在浏览器开始加载图像之前是否会更改 img src。

感谢您的所有回复。如果这是一个重复的问题，我深表歉意，但是关于 jquery 就绪事件的细微差别有一百万个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:12:38.937

我认为准备就绪的侦听器会在所有 html 加载后立即开始运行，这意味着它不会等待 bg 加载并且准备运行。因此，取决于时间，您可以先进行默认加载，然后再进行切换。

也许您可以省略图像的 src 或 bg 的 css，只在 ready() 中使用 jquery 添加它。

对于禁用 js 的人，您可以在 noscript 块中进行默认加载

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:18:43.627

[您可以在jQuery 的文档](http://api.jquery.com/ready/)中找到正确的答案：

> 虽然 JavaScript 在页面呈现时提供了用于执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。在大多数情况下，只要完全构建了 DOM 层次结构，就可以运行脚本。

因此，一旦代码在那里，无论图像的加载状态如何，就绪事件都会开始运行。这意味着图像可能会显示也可能不会显示，可能会完全或部分加载，这仅取决于在接收到更改图像的命令之前图像加载的速度。

如果您想绝对肯定图像永远不会加载，您会希望在服务器端执行此操作，以便只有您想要的图像被写入代码 - 如果执行更改有一些延迟，您肯定会看到全部或部分默认图像。

# google-calendar-api - 在谷歌应用脚 本中获取日历事件的链接（url）

> ID：10553846
> 
> 赞同：8
> 
> 时间：2012-05-11T14:58:19.480
> 
> 标签：google-calendar-api, google-apps-script

我在 Google Apps 脚本中有一个[日历事件](https://developers.google.com/apps-script/class_calendarevent "日历事件")，我想允许用户通过单击锚点来打开它。我想我可以让 URL 看起来像这样：[http://www.google.com/calendar/event?eid=SOMEID&ctz=Etc/GMT](http://www.google.com/calendar/event?eid=SOMEID&ctz=Etc/GMT)。但是我似乎无法从日历事件中获得所需的 ID。我从 Event.getId() 获得的 ID 在这些 URL 中不起作用，并且没有 event.getUrl()。

有谁知道这是否可以通过应用程序脚本实现？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-10-23T12:42:34.610

对于[CalendarEvent](https://developers.google.com/apps-script/reference/calendar/calendar-event)和 given`event`类型的给定对象，构建 URL 以在 Google 日历应用中查看/编辑相应事件的最简单且有效的方法如下：`calendarId`

```
var splitEventId = event.getId().split('@');
var eventURL = "https://www.google.com/calendar/event?eid=" + Utilities.base64Encode(splitEventId[0] + " " + calendarId); 
```

最好的事情是不需要 Google API 调用、身份验证……！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-24T23:25:11.713

新版本的谷歌日历打破了这一点。以下是解决方法：

```
var mycal = 'username@m'
var splitEventId = event.getId().split('@');
var eventUrl = "https://www.google.com/calendar/event?eid=" + 
Utilities.base64Encode(splitEventId[0] + " " + mycal).toString().replace('=',''); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-07T09:47:10.457

好吧...在 2020 年，这是此版本的工作版本，以防有人仍在为此苦苦挣扎...

```
var calendarID = "somec@lend.ar";
var event = CalendarApp.getCalendarById(calendarID).createEvent(/*SOME OPTIONS HERE*/);

var splitEventId = event.getId().split('@');

// Open the "edit event" dialog in Calendar using this URL:
var event_EDIT_URL = "https://calendar.google.com/calendar/r/eventedit/" + Utilities.base64Encode(splitEventId[0] + " " + calendarID).replace("==",'');

// Open the "view this event in a Calendar" using this URL:
var event_VIEW_IN_CAL_URL = "https://www.google.com/calendar/event?eid=" + Utilities.base64Encode(splitEventId[0] + " " + calendarID).replace("==",'');

return event_EDIT_URL; // OR return event_VIEW_IN_CAL_URL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:23:58.657

这确实是不可能的。应用程序脚本问题跟踪器上有一个增强请求，其中提到了此错误功能。您可能希望启动它以跟踪更新和投票。

[问题 627：约会的 GAS](http://code.google.com/p/google-apps-script-issues/issues/detail?id=627)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-12T22:21:28.293

当使用 Google 日历 Web 界面为 Google 日历创建事件时，eventId 类似于：

7ik7jal8upcnqu30koq3ctj4tn@google.com

并且可以使用以下内容获取事件的 url：

```
var calendarId = 'domain.ac.uk_6l495bdvjmo1felggasrvclkc4@group.calendar.google.com';
var eventId = '7ik7jal8upcnqu30koq3ctj4tn@google.com';
var splitEventId = eventId.split('@');
var eventURL = 'https://calendar.google.com/calendar/r/eventedit/' + Utilities.base64Encode(splitEventId[0] + ' ' + calendarId);

//Or for a recurring event
var event = CalendarApp.getCalendarById(calendarId).getEventById(eventId);
var moment = Moment.moment;
var startTime = moment(event.getStartTime()).utc().format('YMMDDTHHmmss')+'Z';
var eventURL = 'https://calendar.google.com/calendar/r/eventedit/' + Utilities.base64Encode(splitEventId[0] + '_' +startTime+ ' ' + calendarId); 
```

不幸的是，相同的方法不适用于在 Outlook 桌面中创建的同一日历中的事件，而是生成如下的 eventId：

040000008200E00074C5B7101A82E00800000000D0E138AFF4C6D501000000000000000010000000C70DD9E87FE9EB46BCE437A98E9CC5BF

所以解决方案是不完整的，但现在使用 Outlook 桌面的人越来越少。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-05T10:33:39.863

Use this code to get the id

```
var ati = cal.getId().indexOf("@");
var splitEventId = event.getId().split('@');
var eventUrl = "https://www.google.com/calendar/event?eid=" + Utilities.base64Encode(splitEventId[0] + " " + cal.getId().substring(0,ati+2)).replace(/=/gi,''); 
```

# ios - 如何在 iPhone 的后台模式下获取当前位置？

> ID：10553847
> 
> 赞同：2
> 
> 时间：2012-05-11T14:58:20.910
> 
> 标签：ios, iphone, objective-c, cllocationmanager, currentlocation

我正在使用 CLLocationManager 获取当前位置，并且正在获取当前位置的纬度和经度值。我没有在我的应用程序中使用 Mapview。因此，每当更改当前位置时，我都想将当前位置更新到服务器。并且每 5 分钟我需要调用 Web 服务并在**后台模式和前台模式下**将当前位置更新到服务器。

```
-(void) getCurrentLocation
{
    // To get the current location of the place
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; //whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyBest; //100 m
    //Start the location manager, then only updates the current location
    [locationManager startUpdatingLocation];
}

/In Location manager delegate method, if the location is updated it will call and get the values from the newLocation using CLLocation  
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    CLLocation *location = [locationManager location];

    // Configure the new event with information from the location
    CLLocationCoordinate2D coordinate = [location coordinate];

    NSString *lat = [NSString stringWithFormat:@"%f", coordinate.latitude];
    NSString *lon = [NSString stringWithFormat:@"%f", coordinate.longitude];
    NSLog(@"dLatitude : %@", lat);
    NSLog(@"dLongitude : %@",lon);

    self.reverseGeocoder = [[[MKReverseGeocoder alloc] initWithCoordinate:newLocation.coordinate] autorelease];
    reverseGeocoder.delegate = self;
    [reverseGeocoder start];

    //Stop the location manager
    [locationManager stopUpdatingLocation];

} 
```

每当位置改变时，那个时候我想获得特定位置的纬度和经度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T07:00:26.607

将以下代码用于后台和前台任务。

```
 UIApplication *app = [UIApplication sharedApplication];

bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

[NSTimer scheduledTimerWithTimeInterval:300 target:self selector:@selector(updateLocation) userInfo:nil repeats:YES];

-(void)updateLocation{

    // write the code to update location here. this will execute even if in background or foreground
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T02:42:56.037

如果您需要使用标准位置服务为用户提供持续的位置更新（即使在后台），您可以通过在您的应用程序的 Info.plist 文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T14:22:47.837

首先，如果您需要您的程序在前台和后台运行，请在项目的 info.plist 中添加所需的后台模式作为位置服务。获取位置作为 NSString 并尝试使用同步或异步类型将 URL 发布到服务器的 URL。

# c++ - 指针转换没有给出预期的结果

> ID：10553851
> 
> 赞同：3
> 
> 时间：2012-05-11T14:58:29.753
> 
> 标签：c++, pointers

> **可能重复：**
> [C/C++ 更改 const 的值](https://stackoverflow.com/questions/583076/c-c-changing-the-value-of-a-const)

以下程序：

```
int main()
{
    const int x = 10;
    int * p = (int *)&x;
    *p = 12;
    cout<<x<<endl;
    cout<<*p<<endl;
    return 0;
} 
```

给出以下输出：

```
10
12 
```

将 &x 转换为 (int *) 有什么影响，为什么 x 的值仍然是 10 ？我预计是12。

另一个疑问

为什么我们不能将 say int ** 转换为 int const ** ？而这个操作是有效的

```
void f(int const ** p);
void g(int const * const * p);

int main()
{
    int ** p = /*....*/
    f(p);   //Error
    g(p);   //OK
} 
```

请用合适的例子帮助我理解这一点谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T15:06:28.260

您通过修改声明为的变量来调用未定义的行为`const`。任何结果都是程序的合法输出，尽管有些结果比其他结果更合理。

正如我在评论中指出的那样：

10 可能是由于优化；编译器知道这`x`是 const 所以它可以调用：

```
cout << 10 << endl; 
```

代替：

```
cout << x << endl; 
```

不太清楚的是编译器是否将第二个输出优化为：

```
cout << 12 << endl; 
```

您必须查看生成的汇编程序才能确定。但是由于整个程序都在调用未定义的行为，因此编译器是正确的，无论它做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:03:10.560

编译器将在分配给`const int`. 实际上，您的程序如下所示：

```
 cout<<10<<endl;
        cout<<*p<<endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:48:40.853

作为主要问题，已经回答了：修改常量对象是未定义的行为。

对于第二个问题，请考虑如果允许，您可能会无意中破坏 const-correctness：

```
const int k = 10;
void f(int const ** p) {
    *p = &k;                   // Valid, p promises not to change k
}
void g(int const * const * p);

int main()
{
    int *p;
    int ** pp = &p;
    f(pp);                     // If allowed: p points to k!!!
    p = 5;                     // Modifying a constant object!!!
    g(pp);                     //OK
} 
```

在 的情况下`g`，因为函数的签名承诺不会改变中间指针，编译器知道`g`不会修改`*pp`，这意味着它不能使`*pp`（即`p`）指向一个常量对象，并且保证了 const 正确性.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:29:00.097

嗯，这是个有趣的问题。当您删除 x 的 const 前缀时，您将获得所需的结果。

```
int main()       
{               
 int x = 10;               
 int * p = (int *)&x;               
 *p = 12;              
 cout<<x<<endl;              
 cout<<*p<<endl;               
 return 0;      
} 
```

我认为是 const 标记阻止了 x 值的变化。

# java - netbeans 包中的文件出现问题，找不到 .txt 文件

> ID：10553855
> 
> 赞同：1
> 
> 时间：2012-05-11T14:58:37.017
> 
> 标签：java, netbeans, filenotfoundexception

所以这是我的库类的构造函数

```
 package OOD_PROJECT_PACKAGE;

import java.awt.Event;
import java.io.File;
import java.io.FileNotFoundException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Scanner;
import javax.swing.DefaultListModel;

import java.util.ArrayList;
import java.util.Date;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JTextArea;

 public class Library {
 private ArrayList<Book> books = new ArrayList<Book>();
private ArrayList<Member> members = new ArrayList<Member>();
 private DefaultListModel mod1;
 //private DefaultListModel mod2;
private int nextValidId;
public Library(){
try {
    String fileName = "id.txt";
    Scanner in = new Scanner(new File(fileName));
    nextValidId = in.nextInt();

}
catch (FileNotFoundException e){
JOptionPane.showMessageDialog(null, "File not found");
//this wont happen,file will always be there

       }} 
```

我在源文件中有一个 id.txt 文件。但它似乎没有找到它并且发生了预期。我认为这与 .txt 没有任何形式的包 OOD_PROJECT_PACKAGE 的事实有关，所以我的图书馆课看不到它。

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:55:04.587

如果您的项目文件夹是 H:/netbeans/OOD_PROJECT/，那么您应该将 id.txt 放在该文件夹中，而不是 H:/netbeans/OOD_PROJECT/src/。

如果您打算使用绝对路径，那么字符串应该是：“H://netbeans//OOD_PROJECT//”或“H:\netbeans\OOD_PROJECT\”（我通常不注意我是否使用 \ 或 / 但两者似乎都对我有用）。

# javascript - 将 Javascript 注入 DOM

> ID：10553857
> 
> 赞同：3
> 
> 时间：2012-05-11T14:58:42.180
> 
> 标签：javascript, jquery, dom

我正在尝试将一些 js 动态注入到 DOM 元素中以供执行。但是，如果我注入 at `$(document).ready()`，则不会评估脚本（但会正确注入）。此外，如果我尝试在 DOM 加载时注入，则容器元素尚不存在。我已经通过对容器中的脚本标签进行硬编码进行了测试，效果很好。有没有办法将 js 注入 DOM 元素并在 DOM 就绪或页面加载时对其进行评估？

```
$(document).ready(function(){
    var container = document.getElementById('container_div');
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.appendChild(document.createTextNode('[script]'));
    container.appendChild(script);
    //I've also tried .insertBefore and
    //.parentNode.insertBefore and jQuery's .append()
}); 
```

我想要完成的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:11:22.080

在纯 JavaScript 中：

```
var s = document.createElement('script');
s.setAttribute('src','js/myscript.js');
document.body.appendChild(s); 
```

这是来自[jQuerify](http://www.learningjquery.com/2006/12/jquerify-bookmarklet)我用它来“导入”jquery 到任何页面，所以我可以用 firebug 破解它，但它应该适用于任何脚本。

# excel - 创建 Excel 实例以进行独占访问

> ID：10553858
> 
> 赞同：0
> 
> 时间：2012-05-11T14:58:43.007
> 
> 标签：excel, com

我正在使用一个 Excel 实例进行自动化，我想防止来自任何其他应用程序的任何干扰。设置`Application.IgnoreRemoteRequests = False`似乎完成了我想要实现的 99%。

但是，如果用户在 Office 应用程序（例如 PowerPoint）中插入图表，图表编辑器将使用我的 Excel 实例。我假设它调用`GetObject(, "Excel.Application")`. 所以我基本上想做的是从`GetObject`调用中隐藏我的 Excel 实例。

可能，嵌入 Excel 窗口可以解决问题，但我了解到这既不推荐也不支持，那么还能做什么呢？（除了[创建两个应用程序实例](https://stackoverflow.com/questions/3761333/create-exclusive-word-instance)。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:38:45.443

只是为了关闭它，Excel 使用正在运行的对象表来注册自身，如问题中的链接中所述。我认为嵌入 Excel 不会改变这一点。所以毕竟，似乎没有比[创建独占词实例](https://stackoverflow.com/questions/3761333/create-exclusive-word-instance)下解释的更好的支持方式了。

# nosql - NoSQL 用例场景或何时使用 NoSQL

> ID：10553860
> 
> 赞同：276
> 
> 时间：2012-05-11T14:59:04.537
> 
> 标签：nosql, use-case

随着所有的炒作，似乎很难找到关于何时使用它的可靠信息。所以我提出以下问题，如果这些问题真的很愚蠢，我很抱歉：

1.  我应该对用户数据使用 NoSQL 吗？例如个人资料、用户名+密码等。
2.  我应该对重要内容使用 NoSQL 吗？例如文章、博客文章、产品库存等。

我假设没有？而且我觉得 NoSQL 只是用于可以快速访问的东西，可以从中丢失数据。但我也读到 NoSQL 应用程序具有内置冗余，这样我就不会丢失数据？

另外，如果上面的两个例子不好，你能给我具体的业务用例，我会使用 NoSQL 吗？我看到了很多一般性的描述，但没有很多现实世界的例子。我能想到的唯一事情是用户对用户的消息传递和分析。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-05-11T15:21:34.913

这确实是一个“取决于”的问题。一些***一般***要点：

*   NoSQL 通常适用于非结构化/“无模式”数据 - 通常，您不需要预先明确定义您的模式，只需包含新字段而无需任何仪式
*   由于 RDBMS 世界不支持 JOIN，NoSQL 通常倾向于非规范化模式。因此，您通常会对数据进行扁平化、非规范化的表示。
*   使用 NoSQL 并不意味着您可能会丢失数据。不同的数据库有不同的策略。例如 MongoDB - 您基本上可以选择在性能与数据丢失可能性之间进行权衡的级别 - 最佳性能 = 更大的数据丢失范围。
*   扩展 NoSQL 解决方案通常非常容易。添加更多节点来复制数据是一种方法：a）提供更大的可扩展性，b）在一个节点出现故障时提供更多的数据丢失保护。但同样，取决于 NoSQL 数据库/配置。NoSQL 并不一定意味着您推断的“数据丢失”。
*   恕我直言，复杂/动态查询/报告最好由 RDBMS 提供。NoSQL DB 的查询功能通常是有限的。
*   它不必是 1 或其他选择。我的经验是在某些用例中将 RDBMS 与 NoSQL 结合使用。
*   NoSQL DB 通常缺乏跨多个“表”执行原子操作的能力。

您确实需要了解并了解各种类型的 NoSQL 存储是什么，以及它们如何提供可扩展性/数据安全性等。很难给出一个全面的答案，因为它们确实都是不同的并且以不同的方式处理事情.

以 MongoDb 为例，查看他们的[用例](https://www.mongodb.com/use-cases)以了解他们建议的 MongoDb 的“非常适合”和“不太适合”的用途。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-17T19:57:06.310

我认为Nosql至少在这些场景中“更适合”（欢迎补充更多）

1.  只需添加更多节点即可轻松水平扩展。

2.  大数据集查询

    想象一下每天在 Twitter 上发布的大量推文。在 RDMS 中，可能存在具有数百万（或数十亿？）行的表，您不想直接对这些表进行查询，更不用说大多数时候复杂查询也需要表连接。

3.  磁盘 I/O 瓶颈

    如果一个网站需要根据用户的实时信息将结果发送给不同的用户，我们可能正在谈论每秒数万或数十万的 SQL 读/写请求。那么磁盘 i/o 将是一个严重的瓶颈。

# java - java中哪个for循环更快，为什么

> ID：10553862
> 
> 赞同：-6
> 
> 时间：2012-05-11T14:59:11.570
> 
> 标签：java

从下面的 for 循环中，哪一个在 java 中更快

1.  `for(int i = 100000; i > 0; i--) {}`
2.  `for(int i = 1; i < 100001; i++) {}`

请提供速度的宝贵理由。这确实有助于我提高应用程序的性能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T15:01:58.560

[Java 语言](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)的规范没有指定执行某些语句需要多长时间，因此您的问题没有答案。

一个足够聪明的编译器可以自由地将这两个语句编译为无操作并且仍然是合规的。事实上，JIT 很可能在这两种情况下都会这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T15:05:54.813

1.  不能说总体上哪个会更快。它取决于平台、指令集、JIT 编译器等。

2.  这个 JIT 编译器可能会*完全*优化循环......在你的例子中......因为循环体是空的，并且代码显然不会影响整体计算。

3.  假设真正的代码没有空循环，实际的循环体（可能是循环之前/之后的内容）将强烈影响为循环生成的代码，从而影响其性能。

4.  选择一个版本而不是另一个版本*可能*不会对应用程序的整体性能产生重大影响。

5.  如果您仍然相信这会有所作为，那么就对您的应用程序进行双向编码，并测试*实际*性能。但请注意，您从测试中得到的答案会因代码的不同上下文、循环体中的不同内容、不同的编译器、硬件等而有所不同。（并注意 Java 中的微基准测试的缺陷；例如，@Vulcan 在尝试测量示例代码的性能时遇到的问题。）

6.  以不明显/扭曲的方式编写代码实际上*可能会*阻止 JIT 编译器的优化器产生最优值。优化器通常被调整为专注于可能出现在典型程序中的代码模式。花时间寻找很少使用的晦涩代码模式只会让 JIT 编译器变慢。

* * *

您问这个问题的事实表明您犯了“过早优化”的错误。与其浪费时间，不如直接编写代码，让它工作，然后使用真实输入对其进行分析。使用分析器输出来指导您花时间手动优化的*成果。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T15:03:00.523

我非常怀疑这实际上会影响您的应用程序的性能。 [过早的优化是万恶之源。](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)

在优化之前，使用[分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)找出应用程序中的瓶颈所在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:49:18.823

增量和减量之间的区别无关紧要，但是当您考虑到该循环主体中正在执行的确切内容时，这两者之间很可能存在重要区别——显然没有办法对此给出任何一般性陈述.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T15:02:29.277

我想没关系。它们都以相同的方式执行。为什么？嗯，有一种叫做 Java 虚拟机的东西，我很确定它已经过优化，可以将两者识别为同一个句子。

# visual-studio - Visual Studio 2010：具有需要双重构建的引用库的解决方案

> ID：10553865
> 
> 赞同：0
> 
> 时间：2012-05-11T14:59:36.173
> 
> 标签：visual-studio, visual-studio-2010, visual-c++

我在 Visual Studio 2010 中有一个解决方案，其中包含两个项目：

*   一个静态库
*   与同一个库链接的应用程序

我正在同时开发它们。最终，我将创建第二个应用程序，它将共享第一个应用程序使用的一些代码，因此是库。

我的问题是，每当我修改我的库中的头文件（到目前为止只有一个），我第一次重建解决方案时会给出**C1083: Cannot open source file: 'mylibrary.lib': No such file or directory**。

第二次再次点击构建，之后立即找到库和链接。所以基本上，每当我修改库并希望重建时，我都必须连续执行两次。我检查了 .lib 文件在第一次重建后被放置在正确的目录中，但应用程序的构建仍然无法找到它。

我在项目属性的“框架和参考”下添加了该库作为参考。我正在构建整个解决方案，VS 清楚地知道它应该以正确的顺序构建两个项目，但我仍然得到描述的问题。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:10:15.190

您是否设置了依赖项？

右键单击解决方案并选择属性。

选择“项目依赖项”并在下拉列表中选择您的主项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:31:30.067

添加库作为引用时，VS 可以自动链接到库文件（设置在*框架和引用下，[您的参考]，链接库依赖项）*，这似乎是默认启用的。如果此时将 .lib 文件添加到链接器选项中，它似乎会导致我描述的问题。

将文件作为链接器选项删除可以使其在第一次构建时正常工作。

# jquery - jQuery优雅的方式查看所有输入字段是否不同

> ID：10553866
> 
> 赞同：5
> 
> 时间：2012-05-11T14:59:39.973
> 
> 标签：jquery

我有一个包含十几个电子邮件输入字段的表单，并且每封电子邮件都必须是唯一的。通过 jquery 执行所有字段之间的比较的最优雅的方法是什么，而无需手动编写所有比较，如下所示：

```
if($("#email1").val() == $("#email2").val() || ....)  {
    isValid = false;
    alert("emails must be unique.");
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T15:03:06.610

最简单的方法是将电子邮件放入 a`Set`中，然后比较其大小：

```
const $inputs = $('input[id^=email]');

const uniques = new Set($input.map((i, el) => el.value).get());

if (uniques.size < $inputs.length) {
    alert('Emails must be unique.');
} 
```

* * *

如果您不能使用 ES6（或其他现代 JS 功能），请使用 jQuery 的[inArray](http://api.jquery.com/jQuery.inArray/)：

```
var values = [];

$('input[id^=email]').each(function () {
    if ($.inArray(this.value, values) >= 0) {
        alert('Emails must be unique.');

        return false; // <-- stops the loop
    }

    values.push(this.value);
}); 
```

* * *

如果该选择器过于宽泛，您可以在逗号分隔的列表中指定您的 ID，如下所示：

```
$('#email1, #email2, #email3') // ...and so on 
```

或者只是为您要选择的所有元素添加一个类...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T15:13:15.917

```
var duplicate=false;

$('input[id^=email]').each(function(){
    var $this = $(this);
    if ($this.val()===''){ return;}
    $('input[id^=email]').not($this).each(function(){
        if ( $(this).val()==$this.val()) {duplicate=true;}
    });
});

if(duplicate) alert('email must be valid'); 
```

[演示](http://jsfiddle.net/CMz9A/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:10:48.697

尝试将 a 添加`unique`到您希望唯一的所有类中，将它们的值添加到数组中，然后检查数组是否只有唯一值。

```
<input type="text" class="unique" id="email1" />
<input type="text" class="unique" id="email2" /> 
```

然后使用jQuery：

```
var values = $('input.unique').map(function(){
    return $(this).val();
}).get(); 
```

然后检查数组是否唯一：

```
var uniqueValues = $.grep(values, function (v, k) {
    return $.inArray(v, values) === k;
});

if(uniqueValues.length !== values.length){
    alert('emails must be unique.');
} 
```

# asp.net - 使用 VB.NET 进行 LDAP 身份验证

> ID：10553868
> 
> 赞同：0
> 
> 时间：2012-05-11T14:59:45.967
> 
> 标签：asp.net

是否有任何关于如何使用 VB.net 连接到 LDAP 的工作示例？
正确的 LDAP:// 路径是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:25:10.230

在这里您可以看到许多示例（在 C# 中）：

[http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#39](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#39)

对于语法，这是一个示例：

DirectoryEntry de = new DirectoryEntry("LDAP://" + 域、用户、密码);

# android - ContentProvider 是提供数据库访问的唯一干净方式吗

> ID：10553870
> 
> 赞同：0
> 
> 时间：2012-05-11T14:59:47.903
> 
> 标签：android, android-contentprovider

我编写了一个 Android 应用程序并要求自己处理数据库访问。根据 Android API，Activity 类的 managedQuery 和 startManagingCursor 方法将很快被弃用，建议使用 CurserLoader。据我所知，CurserLoader 必须由 ContentProvider 支持。现在是否意味着即使您不想与其他应用程序共享数据，使用 ContentProvider 是提供对数据库的访问的唯一干净方式？如果是这样，您将如何提供连接表，是否真的有必要为每个表编写一个 ContentProvider 或将所有内容放在一个中？你如何实现联想？我不想拥有由数千行代码组成的 ContentProvider 类。

感谢您的所有回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:19:38.007

**正如@Alex**所说，还有其他方法。我会给你一个如何使用它们的例子？

您可以使用例如[rawQuery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)。

```
String query="select * from myTable where myColumn > 1"; 
Cursor objCursor = objSQLiteDatabase.rawQuery(query, null); 
```

# java - 单独的正则表达式匹配，但它们的并集不匹配

> ID：10553871
> 
> 赞同：1
> 
> 时间：2012-05-11T14:59:48.733
> 
> 标签：java, regex, string

出于学术目的，我们的重要团队（我和一个朋友）正在用 Java 编写基于图块的游戏。为了玩这些瓷砖，我们得到了一个配置文件，其中包含甲板中所有瓷砖的字符串表示，每行一次。这里有些例子：

```
N=N S=C O=C E=N NS=0 NE=0 NO=0 OE=0 SE=0 SO=1
N=S S=S O=S E=S NS=0 NE=0 NO=0 OE=0 SE=0 SO=0 
```

在上述表示中，N、S、O 和 E 映射到北、南、东和西的基点，而前四个分配的右侧成员映射到道路 (S)、城市 (C) 和田野 (N) . 以下六组表示两点之间是否存在联系。例如，SO=1 表示南和西是相连的。

我们的第一个想法是使用标准 Java 库提供的 Pattern 类，用正则表达式解析这些行。我的队友编写了一个代码来为整个字符串生成一个模式，组装更小的模式来指示一些枚举的可能值（以前的位置包含基点，资产类型包含道路或城市等结构）。我不会粘贴生成的代码，因为它非常占用空间并且不是很优雅。但是，我可以承认它是正确的。

在继续之前，我想指出实际上是由两个主要部分组成的 tile 字符串：边界规范（即前 4 个分配）和链接规范（最后六个）。因此，我们有两个解析器。第一个能够解析像“N=NS=CO=CE=N”这样的字符串，第二个能够解析“NS=0 NE=0 NO=0 OE=0 SE=0 SO=1”。他们的模式是正确的。我们对它们进行了彻底的测试，所有测试都顺利通过。

现在问题来了。由于平铺字符串总是由第一部分和第二部分组成，我们为整个字符串创建了模式，只需附加第一个和第二个的模式，用 \s+ 分隔它们并围绕它们中的每一个带括号。结果表达式如下：

```
(N\s*\=\s*(N|S|C)(,(R|B|V|G|N))?\s+S\s*\=\s*(N|S|C)(,(R|B|V|G|N))?\s+O\s*\=\s*(N|S|C)(,(R|B|V|G|N))?\s+E\s*\=\s*(N|S|C)(,(R|B|V|G|N))?)\s+(NS\s*\=\s*(0|1)\s+NE\s*\=\s*(0|1)\s+NO\s*\=\s*(0|1)\s+OE\s*\=\s*(0|1)\s+SE\s*\=\s*(0|1)\s+SO\s*\=\s*(0|1)) 
```

我知道，它看起来很糟糕，但它是编译时的结果。然而，我们针对一些字符串进行了测试，就像我在上面发布的那样，只是发现它不会匹配，尽管单个模式匹配。我们试图在一个在线模拟器上运行它，就像[这样](http://www.regexplanet.com/advanced/java/index.html)，它完美匹配。我们不知道如何使它匹配。有任何想法吗？

一些代码：

```
public Tile from(String tileString) {
    Matcher matcher = pattern.matcher(tileString);

    return new InnerTile(
            tileBorderBuilder.from(matcher.group(1)),
            tileLinkageBuilder.from(matcher.group(14)));
} 
```

tileBorderBuilder.from 解析第一部分并返回一个 TileBorder 对象。tileLinkageBuilder.from 做同样的事情并返回一个 TileLinkage 对象。它引发异常：“未找到匹配项”。

PS：我们使用的是 Java SE 1.6 或 Open-JDK6（它们都失败了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:13:51.667

要调试这样的问题，请从更简单的正则表达式开始并从那里构建，即尝试匹配

```
 N=N
 N=N S=C
 ...
 N=N S=C O=C E=N NS=0 NE=0 NO=0 OE=0 SE=0 SO=1 
```

（相应地缩短正则表达式）。这将帮助您确定出现问题的正则表达式中的位置。

也就是说，我建议用这个正则表达式解析配置：

```
\s*([^\s=]+)\s*=\s*(\S) 
```

将输入分成几行，然后将其重复应用于每一行以读取每个“单词”。

这在 Java 方面付出了更多努力，但它可以检查正则表达式并使您的代码易于阅读、理解和扩展……因为几天后，您将添加另一个图块或新选项——一个一个月后，正则表达式将控制你的生活。

# validation - Grails 验证电子邮件重新输入

> ID：10553872
> 
> 赞同：2
> 
> 时间：2012-05-11T14:59:49.500
> 
> 标签：validation, grails, gsp

我有一个用于用户注册的域类。在注册过程中，用户需要输入两次电子邮件，并且这两个需要匹配。我不想存储重新输入的电子邮件，只想将其用于验证。有什么建议吗？

我的域类看起来像：

```
class MyUser{

    String name
    String email
    Integer telephone
 } 
```

我的观点如下：

```
<label for="reEmail" id="reEmail">
<g:message code="myUser.reEnter.label" default="Re-enter Email:" id="reEnter"/></label>
<g:textField name="reEmail"/> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:19:38.167

处理此问题的一个好方法是在您的类中使用[瞬态](http://grails.org/doc/2.0.x/ref/Domain%20Classes/transients.html)字段。

像这样......

```
class MyUser{

    static constraints = {
      email (email: true, blank: false) //<-- just a good idea ;)
    }

    String name
    String email
    Integer telephone
    String emailAgain
    static transients = ['emailAgain'] //<-- won't be stored in the database

 } 
```

然后，在您看来，您可以像处理其他任何领域一样处理该领域......

```
<g:textField name="email" />
<g:textField name="emailAgain" /> 
```

然后在你的控制器中验证它......

```
def save = {
   def myUser = new MyUser(params);
   if (myUser.email.equals(myUser.emailAgain)){ //<-- maybe make a helper method in the domain class (myUser.doesEmailMatchEmailAgain() ?)
     // do stuff
   }else{
     //handle error, tell user their email's don't match
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T02:36:37.343

另一种选择是使用**[Command Objects](http://grails.org/doc/latest/guide/single.html#commandObjects)**。它们为您提供了让您的表单帖子作为一个可以具有约束和自定义验证的单个对象返回的好处（就像域类一样）。然后，一旦您对用户的输入感到满意，您就可以使用命令对象的值更新您的域对象。

当您有一种在几个地方提交的表单类型时，命令对象非常有用（认为用户注册和更新用户详细信息是两个表单相似的示例，因此您可以重用命令对象）。或者当您的页面上有更新多个域对象的表单或表单不能很好地 1:1 映射到域对象时。

不知道我解释得有多好，但他们很高兴知道。尽管它们在您的用例中可能有点矫枉过正。

此页面有一个示例两次输入密码并进行比较： http: [//www.intelligrape.com/blog/2009/05/26/command-objects/](http://www.intelligrape.com/blog/2009/05/26/command-objects/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:26:37.930

If email-confirmation is the case, I think you can forget about it completely at the server side. It never stops malicious attackers, so as you say, it isn't worth a place in your domain class. Re-entering only help mistaken users, so I think doing it by javascript at client side is good enough.

By that way, I think you can simply use a solution like [jQuery validation plugin](http://docs.jquery.com/Plugins/Validation). Nothing grails-specific, I'm afraid.

You can also find a [working demo](http://jquery.bassistance.de/validate/demo/) here.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:21:29.293

我已经做了几次不同的事情。第一个是在控制器中进行验证，但我清理了它并结束了在客户端的 jquery 中进行电子邮件验证。

这样，您就不必为不匹配的电子邮件来回走动。

这是一个用于检查电子邮件是否有效的示例 javascript 函数。现在您所要做的就是再次验证输入的第一个。

您只需要表单中的另一个字段参数用于第二封电子邮件。

```
// simple function to check if a email is of a valid email type
function IsEmail(email) {
  var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  return regex.test(email);
}

// method to check if email and confermation email is the same.

 $("#signupForm").validate({
rules: {
                ...snip... 
    email1: {
        required: true,
        minlength: 5
    },
    email2: {
        required: true,
        minlength: 5,
        equalTo: "#email1"
    },
               ...snip...
},
messages: {
    ...snip...
    email: {
        required: "Please provide a email",
        minlength: "Your email must be at least 5 characters long"
    },
    email2: {
        required: "Please provide a confermation email",
        minlength: "Your confermation email must be at least 5 characters long",
        equalTo: "Please enter the same email as above"
    },
    ...snip...
} 
```

});

# ruby - 在 vim/macvim 中更改 $PATH 以找到正确的 ruby 二进制文件

> ID：10553875
> 
> 赞同：3
> 
> 时间：2012-05-11T14:59:56.570
> 
> 标签：ruby, vim, zsh, macvim

在尝试协调 ZSH 会话和 shell 的 vim/macvim 访问之间的环境时，`which ruby`来自 shell 的 a 显示*$HOME/.rvm/rubies/ruby-1.9.3/bin/ruby*，这很好，而在 vim 内部/macvim a`!which ruby`显示*/opt/local/bin/ruby*，这很糟糕。

我认为将 RVM 的调用从 .zshrc 复制到 .zshenv 会起作用，但这样做会干扰其他实用程序。经过几天试图解决这个问题，我感到难过。任何关于在哪里可以找到解决此问题的文档的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:33:06.613

我不知道它是否适用于 zsh 但取决于它的启动方式，bash 会读取一些文件而不是其他文件。在我的这行代码`~/.vimrc`确保`$PATH`在 Vim 和我的 shell 中是一样的。

```
set shell=bash\ -i 
```

但这取决于您如何启动/自定义您的外壳。

请参阅`:help 'shell'`和 zsh 的手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T11:29:12.053

这里给出的答案对我很有效：

[如何在 vim 中使用正确的 ruby​​？如何在 VIM 中修改 $PATH？](https://stackoverflow.com/q/9853584/2279720)

并且在交互和非交互模式下对不同的 $PATH 给出的解释很简单：

[https://github.com/dotphiles/dotzsh#mac-os-x](https://github.com/dotphiles/dotzsh#mac-os-x)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T15:13:11.773

也许`:$PATH=$HOME.'/.rvm/rubies/ruby-1.9.3/bin/ruby:'.$PATH`在你的 vimrc 中。可能很hacky，但也许它会起作用。

# c# - 在 VS2010 C# 中，我应该在 WPF 中使用哪种 SQLite 和连接方法？

> ID：10553876
> 
> 赞同：1
> 
> 时间：2012-05-11T14:59:56.627
> 
> 标签：c#, .net, wpf, sqlite, system.data.sqlite

我正在尝试在 VS2010 C# 中创建一个 .NET WPF 应用程序，但我对 SQLite 下载和可用的连接方法感到困惑。

首先，有些人建议使用[ADO.NET 2.0 Provider for SQLite](http://sourceforge.net/projects/sqlite-dotnet2/)，同时他们还说它使用的是 .NET 2.0 代码，所以我必须使用[useLegacyV2RuntimeActivationPolicy](http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx)属性：

```
<startup useLegacyV2RuntimeActivationPolicy="true|false" > 
</startup> 
```

这是正确的方法吗？这个属性有什么缺点吗？

其次，我无法决定从这里下载哪个包[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)。没有关于 x64 版本是否可以在 x86 系统上正常工作的信息，我也找不到有关以下差异的信息：简单的“设置”、“预编译的二进制文件”和“预编译的静态链接二进制文件”。

感谢您提前回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:37:04.720

使用 NuGet，搜索 SQLIte 并获取 SQLite dll 和 ADO.NET 提供程序，NuGet 将设置其他所有内容......

# android - 我需要帮助来编码和使用 android 相机

> ID：10553877
> 
> 赞同：0
> 
> 时间：2012-05-11T15:00:03.770
> 
> 标签：android, button, menu, camera

我想创建一个应用程序，让过敏的人在他们有一些过敏反应时拍摄他们的反应，以及他们吃的食物。然后他们可以将信息添加到文档中，并保存所有这些信息以及地理定位。（这个想法是过敏的人需要日记，因为通常他每 6 个月可以看到一次他的过敏原）

我已经编写了这个有效的代码：我必须点击手机的菜单按钮才能使用相机。但是，我现在想要一个按钮，让我可以使用摄像头。任何人都可以通过更改我的代码并帮助我正确添加一个允许使用相机的按钮来帮助我，以便我可以用我的安卓手机拍照吗？

忠实，

我的代码：

包android.camera；

```
 import android.app.Activity;
        import android.content.Intent;
        import android.graphics.Bitmap;
        import android.os.Bundle;
    import android.provider.MediaStore;
        import android.view.Menu;
        import android.view.MenuInflater;
        import android.view.MenuItem;
        import android.widget.ImageView;

        public class CameraActivity extends Activity {

            private static final int PICTURE_RESULT = 9;

            private Bitmap mPicture;
            private ImageView mView;

            public void onCreate(Bundle icicle) {
                super.onCreate(icicle);
                setContentView(R.layout.main);

                mView = (ImageView) findViewById(R.id.view);
            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.menu, menu);
                return true;
            }

            @Override
            public boolean onOptionsItemSelected(MenuItem item) {
                switch (item.getItemId()) {
                case R.id.camera:
                    Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                    CameraActivity.this.startActivityForResult(camera, PICTURE_RESULT);
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
                }
            }

    /*      public void onDestroy() {
                super.onDestroy();
                if (mPicture != null) {  
                    mPicture.recycle();
                }
            }*/

            @Override
            protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                super.onActivityResult(requestCode, resultCode, data);

                // if results comes from the camera activity
                if (requestCode == PICTURE_RESULT) {

                    // if a picture was taken
                    if (resultCode == Activity.RESULT_OK) {
                        // Free the data of the last picture
                        if(mPicture != null)
                            mPicture.recycle();

                        // Get the picture taken by the user
                        mPicture = (Bitmap) data.getExtras().get("data");

                        // Avoid IllegalStateException with Immutable bitmap 
                        Bitmap pic = mPicture.copy(mPicture.getConfig(), true);
                        mPicture.recycle();
                        mPicture = pic; 

                        // Show the picture
                        mView.setImageBitmap(mPicture);

                        // if user canceled from the camera activity
                    } else if (resultCode == Activity.RESULT_CANCELED) {

                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:37:57.960

我想这就是你要问的...

在您的布局文件 (main.xml) 中添加一个按钮：

```
<Button android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="Take Picture" android:id="@+id/take_picture"></Button> 
```

然后在你的 onCreate 方法中：

```
public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.main);

            mView = (ImageView) findViewById(R.id.view);
            mTakePictureButton = (Button) findViewById(R.id.take_picture);
            mTakePictureButton.setClickable(true);
            mTakePictureButton.setOnClickListener(new View.onClickListener(){

                    @Override
        public void onClick(View v) {
            Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(camera, PICTURE_RESULT);

        }
            });
        } 
```

# android - 适用于 Android 的 Osmsharp 和 Mono

> ID：10553879
> 
> 赞同：1
> 
> 时间：2012-05-11T15:00:07.727
> 
> 标签：android, xamarin.android

我是一名学生，实际上我正在研究如何将 Osmsharp 库与 Monodevelop 一起使用。

我使用以下代码进行测试：protected override void OnCreate (Bundle bundle) { base.OnCreate (bundle);

```
 // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        // create a router from an osm file.
        Router router = Router.CreateFrom(new FileInfo("demo.osm"));

        // instantiate route end coordinates.
        GeoCoordinate location_from = new GeoCoordinate(51.26565,4.7777);
        GeoCoordinate location_to = new GeoCoordinate(51.2741,4.79795);

        // resolve the end points and link them to the road network.
        ResolvedPoint from = router.Resolve(location_from);
        ResolvedPoint to = router.Resolve(location_to);

        // calculate the route.
        OsmSharpRoute route = router.Calculate(from, to);

        // save the route as a GPX file.
        route.SaveAsGpx(new FileInfo("demo.gpx"));
    } 
```

（此代码是来自 Osmsharp 库教程的代码）

我的问题是当我构建项目时，我有这个错误：

> System.IO.FileNotFoundException：无法加载程序集“System.Drawing，版本=4.0.0.0，>文化=中性，PublicKeyToken=b03f5f7f11d50a3a”。也许它在 Mono for >Android 配置文件中不存在？
> 
> 文件名：'System.Drawing.dll'

经过一番研究，我添加了对文件“System.Drawing.dll”和“OpenTK.dll”的引用。我还在文件开头添加了“使用”，但我遇到了和以前一样的错误，我不明白为什么。

我想知道是否可以在 Mono for Android 项目中使用 Osmsharp 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:42:19.147

我猜 OsmSharp 需要 System.Drawing.dll，这在 Mono for Android 中不可用。

# algorithm - 网格打包算法

> ID：10553880
> 
> 赞同：3
> 
> 时间：2012-05-11T15:00:11.953
> 
> 标签：algorithm, math, fill

给定一个大小为`w`x的矩形`h`，并要求*在*`n`该较大的矩形中放置相同大小的矩形，选择大小以及那些最适合填充原始矩形的较小矩形。*`dx``dy`*

 *主要限制是所有数字都*必须是整数*。

我当前的（JS）算法是这样的：

```
function pack(n, w, h) {

    var nx, ny;
    var dx = w, dy = h;  // initally try one rectangle that fills the box

    while (true) {
        nx = ~~(w / dx); // see how many times this fits in X
        ny = ~~(h / dy); // and in Y

        if (nx * ny >= n) break;   // they all fit!

        if (dx * h >= w * dy) {    // look at the aspect ratio
            dx = ~~(w / (nx + 1)); // try fitting more horizontally
        } else {
            dy = ~~(h / (ny + 1)); // or try more vertically
        }

        if (dx < 1 || dy < 1) {
            return;                // they can't fit
        }
    };

    return [nx, ny, dx, dy];
}; 
```

有更好的算法吗？

[注意：这不是家庭作业-我正在尝试解决如何在画布上的矩阵中绘制“n”个项目的问题，但每个项目只能使用整个像素]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:37:10.830

看起来您基本上是在尝试计算[GCD](http://en.wikipedia.org/wiki/Greatest_common_divisor)，您可以使用[Euclidean algorithm](http://en.wikipedia.org/wiki/Euclidean_algorithm#Implementations)有效地进行计算。我认为以下工作 - 试试吧！

首先，计算 gwn = GCD(w,n) 和 ghn = GCD(h,n)。如果其中任何一个是 n，你就完成了 - 如果 gwn = n，这意味着每个矩形可以是 w/n 乘以 h 像素。否则，只有当 h 可被 n/gwn 整除或 w 可被 n/ghn 整除时，才能拟合矩形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:29:49.703

```
function pick(tiles, grid_width, grid_height)
{
    var max_area = ~~(grid_width * grid_height / tiles);

    for (var area = max_area; area > 0; area--)
    {
        var result = [grid_width * grid_height - area * tiles];

        divisors_do(area,
            function (tile_width)
            {

                var tile_height = area / tile_width;
                if (tile_width > grid_width) return true;
                if (tile_height > grid_height) return true;

                var count_horizontal = ~~(grid_width / tile_width);
                var count_vertical = ~~(grid_height / tile_height);
                if (count_horizontal * count_vertical < tiles) return true;

                result.push([
                    tile_width, tile_height,
                    count_horizontal, count_vertical
                ]);
            });
        if (result.length > 1) return result;
    }
    return null;
}

function divisors_do(x, f)
{
    var history = [1];
    if (f(1) === false) return false;

    // for each prime factor
    return prime_factors_do(x,
        function(prime, primePower)
        {
            var len = history.length;

            for (var iHistory = 0; iHistory < len; iHistory++)
            {
                var divisor = history[iHistory];

                for (var power = 1; power <= primePower; power++)
                {
                    divisor *= prime;
                    history.push(divisor);

                    if (f(divisor) === false) return false;
                }
            }

            return true;
        });
}

function prime_factors_do(x, f)
{
    for (var test = 2; test*test <= x; test++)
    {
        var power = 0;
        while ((x % test) == 0)
        {
            power++;
            x /= test;
        }

        // If we found a prime factor, report it, and
        // abort if `f` returns false.
        if (power > 0 && f(test, power) === false)
            return false;
    }

    if (x > 1) return f(x,1);
    return true;
} 
```

例子：

```
> pack(5, 12, 8);
[16, [2, 8, 6, 1], [4, 4, 3, 2]]
> pack(47,1024,768);
[16384, [64, 256, 16, 3], [128, 128, 8, 6], [256, 64, 4, 12], [512, 32, 2, 24]] 
```

第一个示例产生两个等效结果：

*   2x8 块，每排 6 块
*   4x4 瓷砖，每排 3 块

在每种情况下，都有一个插槽未使用，总共有 16 个单元未使用。

```
### ### ### ### ### . .    ####### ####### #######
### ### ### ### ###        ####### ####### #######
### ### ### ### ### . .    ####### ####### #######
### ### ### ### ###        ####### ####### #######
### ### ### ### ### . .    ####### ####### #######
### ### ### ### ###        ####### ####### #######
### ### ### ### ### . .    ####### ####### #######
### ### ### ### ###
### ### ### ### ### . .    ####### ####### .  .  .
### ### ### ### ###        ####### ####### 
### ### ### ### ### . .    ####### ####### .  .  .
### ### ### ### ###        ####### ####### 
### ### ### ### ### . .    ####### ####### .  .  .
### ### ### ### ###        ####### ####### 
### ### ### ### ### . .    ####### ####### .  .  . 
```*

# c - 如果丢弃长度数据，C 的数组语法有什么意义？

> ID：10553882
> 
> 赞同：9
> 
> 时间：2012-05-11T15:00:18.257
> 
> 标签：c, arrays, syntax

这是一个示例程序：

```
#include <stdio.h>

void foo(int b[]){
    printf("sizeof in foo: %i\n", sizeof b);
}

int main(){
    int a[4];
    printf("sizeof in main: %i\n", sizeof a);
    foo(a);
} 
```

输出是：

```
sizeof in main: 16
sizeof in foo: 8 
```

问题是，如果它只是在函数边界处转换为标准指针，那么该语法的意义何在？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T15:02:53.527

1.  它是语法糖：`void foo(int b[])`建议`b`将其用作数组（而不是单个输出参数），即使它确实是一个指针。

2.  [它是 C 早期版本的](http://cm.bell-labs.com/cm/cs/who/dmr/chist.html)遗留物，其中 postfix`[]`是指针声明的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:07:56.887

> 问题是，如果它只是在函数边界处转换为标准指针，那么该语法的意义何在？

在这种情况下，因为您将数组作为参数传递，所以 C 已经创建了一个指向给定地址的指针 - 然而，真正有趣的情况是当您在堆栈上分配一个数组并仅在此处使用它时会发生什么。

当你这样做时，编译器然后将该数组的加载语句转换为指针加偏移量，而是直接访问堆栈基址+偏移量 - 为什么不呢？无论如何存储指针是没有意义的。

但是，在传递该数组时，编译器会将数组基址的地址作为指针传递给函数。

简而言之，`[]`可以帮助您更好地进行指针运算。在声明数组的情况下，它可以被优化掉——这就是为什么数组不是指针的原因，尽管在某些情况下（而不是在其他情况下）通过指针访问它们。

# javascript - Objective-c 中是否有 JavaScript apply like 方法？

> ID：10553883
> 
> 赞同：5
> 
> 时间：2012-05-11T15:00:30.647
> 
> 标签：javascript, objective-c, cocoa

所以基本上我正在使用 window.location="myobj:mymethod:myarg:myotherarg" 实现在 objc 中处理 JavaScript 调用的典型方法，但是，我想知道是否有一种方法可以将参数数组应用于方法，类似于在 JavaScript 中的操作。

通常我一直在做

```
-(void) mymethod:(NSArray*) arr{
    //method knows how many arguments it takes and what they mean at each index
} 
```

我宁愿这样做：

```
-(void) mymethod:(NSString*) myarg myOtherArg: (NSString*) myotherarg{
    //do stuff
} 
```

并有这样的方法：

```
+(void) callMethod:(NSString*)selectorName withArgs: (NSArray*)args onObject:(id) obj{
    //implementation
}
[JEHelpers callMethod:selector withArgs:someArrayOfArgs onObject:myapp] 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:12:38.190

我不确定我是否完全理解这个问题（我不太了解 JavaScript）。但是，您可以使用 NSInvocation 向任何对象发送任意消息。像这样的东西：

```
+(void) callMethod:(NSString*)selectorName withArgs: (NSArray*)args onObject:(id) obj
{
    SEL selector = NSSelectorFromString(selectorName);
    if (![obj respondsToSelector:selector]) {
        // Object doesn't respond to selector, so do something else/handle the error
    }
    NSMethodSignature *methodSignature = [obj methodSignatureForSelector:selector];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:methodSignature];
    [invocation setTarget:obj];
    [invocation setSelector:selector];
    for (NSUInteger i=0; i<[args count]; i++) {
        id argument = [args objectAtIndex:i];
        [invocation setArgument:&argument atIndex:i+2]; // Arg 0 is self, arg 1 is _cmd
    }
    id result;
    [invocation setReturnValue:&result];
    [invocation invoke];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:07:08.673

如果您知道任何方法都不会接受两个以上的参数，那么您可以使用`performSelector:withObject:withObject:`来执行这些调用。如果该方法接受的参数少于两个，则未使用的`withObject:`字段将被忽略。

```
+ (id)callMethod:(NSString *)selectorName withArgs:(NSArray *)args onObject:(id)obj {
    id arg1 = nil, arg2 = nil;
    if([args count]) {
        arg1 = [args objectAtIndex:0];
        if([args count] > 1])
           arg2 = [args objectAtIndex:1];
    }
    return [obj performSelector:NSSelectorFromString(selectorName)
                     withObject:arg1 withObject:arg2];
} 
```

如果可能有两个以上的参数，则必须使用[`NSInvocation`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html). 此类允许您通过传递各种参数并定义选择器和对象来构造消息，然后发送消息并获取结果。

```
+ (id)callMethod:(NSString *)selectorName withArgs:(NSArray *)args onObject:(id)obj {
    SEL sel = NSSelectorFromString(selectorName);
    NSMethodSignature *signature = [obj methodSignatureForSelector:sel];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
    [invocation setSelector:sel];
    [invocation setTarget:obj];
    NSUInteger index = 2;
    for(id arg in args) {
        [invocation setArgument:&arg atIndex:index];
        ++index;
    }
    id result;
    [invocation setReturnValue:&result];
    [invocation invoke];
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:13:49.080

您可能想查看 NSInvocation。具体来说，您想使用 selectorName 的方法签名 (NSObject -methodSignatureForSelector:) 构建一个 NSInvocation，然后设置选择器、目标和参数。请记住：您应该检查参数类型（NSMethodSignature -getArgumentTypeAtIndex:，是否等于'@'），并且您传递的参数从 2 开始索引（因为 0 和 1 是对象的自身和方法选择器）。

顺便说一句，我并不是说这是个好主意；*很少*有情况需要这种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:22:30.083

这有点笨拙，但有可能：

```
- (id)method:(NSString *)arg1, ... {
  va_list args;
  va_start(args, arg1);
  for (NSString *a = arg1; a!= nil; a= va_arg(args, NSString*)) {
    // do stuff
  }
} 
```

通常`arg1`是定义数据类型和额外参数数量的字符串。

你会这样称呼它：

```
[self method:@"5", @"4", @"3", @"2", @"1"]; 
```

对于大多数目的，您的数组方法可能更清晰。

# javascript - 从字符串中查找数字组

> ID：10553886
> 
> 赞同：1
> 
> 时间：2012-05-11T15:00:40.840
> 
> 标签：javascript, regex

我有以下字符串列表：

```
M64.933,9.425
M53.333,19
M81.333,20.67
M90,33 
```

我需要提取数字整数或小数组，我有以下正则表达式**(\d*.*\d+)**适用于第一组我的结果是：

```
["64.933", "64.933"]
["53.333", "53.333"]
["81.333", "81.333"]
["90", "90"] 
```

分别，我怎样才能得到第二组？像这样：

```
["64.933", "9.425"]
["53.333", "19"]
["81.333", "20.67"]
["90", "33"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:05:18.213

尝试使用这个正则表达式`/\d+(\.\d+)?/g`：

```
var s = 'M64.933,9.425';
s.match(/\d+(\.\d+)?/g); // => ["64.933", "9.425"] 
```

例如：

```
var ss = ["M64.933,9.425", "M53.333,19", "M81.333,20.67", "M90,33"]
var ns = ss.map(function(s) { return s.match(/\d+(\.\d+)?/g); });
ns // => [["64.933","9.425"],["53.333","19"],["81.333","20.67"],["90","33"]] 
```

# ruby - 由于 psych YAML 解析错误，在 mac osx 上安装任何 ruby 1.9.x（带有 rbenv）时遇到问题

> ID：10553887
> 
> 赞同：1
> 
> 时间：2012-05-11T15:00:43.443
> 
> 标签：ruby, macos, rbenv, psych

我试图卸载 rvm 以便在我的 Mac 上使用 rbenv。一切正常，直到红宝石发挥作用..

使用时

```
rbenv install 1.9.3-p194 
```

它可以正确编译，但之后我想安装捆绑器..这会产生以下错误

```
computer:~ computer$ gem install bundler
/Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): mapping values are not allowed in this context at line 1 column 34 (Psych::SyntaxError)
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/config_file.rb:253:in `load_file'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/config_file.rb:191:in `initialize'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/gem_runner.rb:78:in `new'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/gem_runner.rb:78:in `do_configuration'
    from /Users/computer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/gem_runner.rb:51:in `run'
    from /Users/computer/.rbenv/versions/1.9.3-p194/bin/gem:21:in `<main>' 
```

然后我尝试安装旧版本的 ruby​​ 1.9.3-p125 .. 但即使构建也无法完成同样依赖于这个心理解释器的类似错误...... :(

```
computer-2:~ computer$ rbenv install 1.9.3-p125
Downloading http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz...
Installing yaml-0.1.4...
Installed yaml-0.1.4 to /Users/computer/.rbenv/versions/1.9.3-p125
Downloading http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p125.tar.gz...
Installing ruby-1.9.3-p125...
Installed ruby-1.9.3-p125 to /Users/computer/.rbenv/versions/1.9.3-p125
Downloading http://production.cf.rubygems.org/rubygems/rubygems-1.8.23.tgz...
Installing rubygems-1.8.23...

BUILD FAILED

Inspect or clean up the working tree at /var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105
Results logged to /var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105.log

Last 10 log lines:
/Users/computer/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/psych.rb:154:in `parse': (<unknown>): couldn't parse YAML at line 0 column 33 (Psych::SyntaxError)
    from /Users/computer/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/psych.rb:154:in `parse_stream'
    from /Users/computer/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/psych.rb:125:in `parse'
    from /Users/computer/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/psych.rb:112:in `load'
    from /private/var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105/rubygems-1.8.23/lib/rubygems/config_file.rb:253:in `load_file'
    from /private/var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105/rubygems-1.8.23/lib/rubygems/config_file.rb:191:in `initialize'
    from /private/var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105/rubygems-1.8.23/lib/rubygems/gem_runner.rb:78:in `new'
    from /private/var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105/rubygems-1.8.23/lib/rubygems/gem_runner.rb:78:in `do_configuration'
    from /private/var/folders/_9/tcqlf3c14l78vxtr600l9lqr0000gn/T/ruby-build.20120511162948.58105/rubygems-1.8.23/lib/rubygems/gem_runner.rb:51:in `run'
    from setup.rb:38:in `<main>'
computer-2:~ computer$ 
```

我在网上找不到有相同问题的东西，所以我问..

我尝试了这两个对我没有帮助的资源，好像 rbenv 安装程序正在自动执行此操作

[在 mac osX (Lion) 上为 ruby​​ 安装 libyaml](https://stackoverflow.com/questions/10392495/installing-libyaml-for-ruby-on-a-mac-osx-lion)

[修复“ruby 安装缺少心理”错误？](https://stackoverflow.com/questions/9880855/fixing-the-ruby-installation-is-missing-psych-error)

有人有建议吗？提前致谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T23:20:56.920

当我的 .gemrc 或 .irbrc 中出现 YAML 语法错误时，我看到过类似的错误。

检查/删除它们，然后重试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T23:59:21.327

我们在*.gemrc*中遇到了同样的问题。删除*.gemrc*解决了这个问题。`--`文件开头有2 个破折号。将它们更改为`---`（3 个破折号）并将*.gemrc*留在原处。然后重新安装1.9.3p392没有任何问题。基本上是 YAML 解析器问题。

完整的*.gemrc*：

`---`
`gem: --no-ri --no-rdoc`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T14:22:10.423

更改 gem.rc 文件从

```
install: --no-rdoc --no-ri
update: --no-rdoc --no-rigem: --no-document 
```

至

```
install: --no-rdoc --no-ri
update: --no-rdoc --no-ri 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T19:32:52.337

```
install: --no-rdoc --no-ri
update: --no-rdoc --no-rigem: --no-document 
```

改成：

```
install: --no-rdoc --no-ri
update: --no-rdoc --no-ri
gem: --no-document 
```

为了保留更快的 Gem 安装选项

# javascript - IE 中的 ColorBox 错误“对象不支持此属性或方法”

> ID：10553891
> 
> 赞同：1
> 
> 时间：2012-05-11T15:00:50.260
> 
> 标签：javascript, jquery, internet-explorer, colorbox

我正在尝试使用以下代码向我的网页添加一个 jquery 颜色框：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
    <link rel="stylesheet" href="colorbox.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.colorbox-min.js"></script>
</head>
<body>
    <script type="text/javascript">
        $(function ()
        {
            $(".popup")
            .colorbox({iframe:true, innerWidth:695, innerHeight:340, overlayClose:false });

        })
    </script>
    <a class='popup' href='http://www.bbc.co.uk'>bbc.co.uk</a>
</body> 
```

它适用于 firefox 和 chrome。但是当我在 IE7 中运行它时，出现以下错误：

> 对象不支持此属性或方法

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:07:21.427

您的`<script>`标签很可能是无效的，或者包含的类型属性设置为`text/javascript`.

如果没有看到那部分代码，我们无法确切地找出问题所在。

**更多信息**

脚本标签必须有一个结束符`</script>`。`<script />`不适用于所有浏览器。

此外，该`type`属性必须存在`text/javascript`或不存在。如果是`application/javascript`某些版本的 IE 将不会执行它。

# c++ - 将 char * 连接到字符串

> ID：10553892
> 
> 赞同：2
> 
> 时间：2012-05-11T15:00:56.453
> 
> 标签：c++

我有一个需要字符串的函数，我想将 const char * 连接到要返回的字符串。

下面是帮助说明这种情况的示例代码：

```
void TMain::SomeMethod(std::vector<std::string>* p)
{
  p->push_back(TAnotherClass::Cchar1 + "/" + TAnotherClass::Cchar2);
} 
```

这是另一个类，它们来自：

```
class TAnotherClass
{
 public:
   static const char * Cchar1;
   static const char * Cchar2;
};

const char * TAnotherClass::Cchar1 = "Home";
const char * TAnotherClass::Cchar2 = "user"; 
```

我收到以下错误：'const char*'和'const char*'类型的无效操作数到二元运算符+

为什么这无效？请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:03:40.743

`char const*``+`正如错误所说，不能与运算符一起使用。

你需要做的是：

```
p->push_back(std::string(TAnotherClass::Cchar1) + "/" + TAnotherClass::Cchar2);
          //^^^^^^^^^^^^ notice this 
```

它创建一个临时对象类型`std::string`，然后你可以使用`+`它。它连接字符串，一路创建临时字符串，最后将最终字符串传递给`push_back`.

除此之外，正如@Konrad 在评论中指出的那样，*不要将指针传递给方法，而是使用引用*，如：

```
void TMain::SomeMethod(std::vector<std::string> & p) //<-- note & 
{
  p.push_back(std::string(TAnotherClass::Cchar1)+"/"+TAnotherClass::Cchar2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:04:07.973

因为您正在尝试添加两个指针。不能为 char* 覆盖 + 运算符。

你可以这样做：

```
p->push_back(std::string(TAnotherClass::Cchar1) + "/" + TAnotherClass::Cchar2); 
```

请记住，`std::string(...)`上面使用的是使用函数符号的 C 风格转换。在这种情况下，它相当于`static_cast<std::string>(...)`.

是否允许在代码中进行函数样式转换取决于您。一些政策反对所有 C 风格的演员表。在我以前的工作场所，这种特殊用途是允许的，但没有其他用途。

# android - 如何从android本机计算器获取结果数据

> ID：10553893
> 
> 赞同：0
> 
> 时间：2012-05-11T15:00:57.580
> 
> 标签：android, calculator

我正在从我的应用程序中调用 android 本机计算器，我如何从中获取结果数据.. 意味着我像这样启动本机日历，完成计算后我按回 onActivityResult 没有执行.. 帮帮我

```
 Intent i = new Intent();
 i.setClassName("com.android.calculator2",
                "com.android.calculator2.Calculator");
 startActivityForResult(i, 1); 

  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if(requestCode == 1){
        Log.i("CALCULATOR", "Result Data is"+ data);
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:08:55.670

启动它：

```
Intent i = new Intent();
i.setClassName("com.android.calculator2",
"com.android.calculator2.Calculator"); 
```

然后计算器活动应该使用
`setResult(RESULT_SUCESS, simple_intent_with_result_as_extra)`

当 Calculator Activity 退出时，onActivityResult 将使用您之前传递的 Intent 在您的原始 Activity 上调用。

# android - 使用 ListView 显示“无数据”

> ID：10553895
> 
> 赞同：2
> 
> 时间：2012-05-11T15:00:58.967
> 
> 标签：android

我正在使用 ListView，但它无法正常工作。请看我的代码。

```
<LinearLayout
    android:id="@+id/playerlist"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
        <ListView 
                android:id="@+id/plist"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" /> 
        <TextView
                android:id="@id/android:empty"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="NO DATA" />
</LinearLayout> 
```

好吧，如果列表为空，它会很好地工作。

但由于列表很短，您可以在 ListView 下方看到“NO DATA”。

如果将 ListView 的 layout_height 设置为 'fill_parent'，则不会出现 'NO DATA'。

谁能帮我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T15:02:41.383

您必须申请`setEmptyView(View emptyView)`您的列表视图。

给你的 TextView 一个 id，比如说`emptyView`；

```
TextView emptyView = (TextView)findViewById(R.id.emptyView);
yourListView.setEmptyView(emptyView); 
```

应该做的伎俩。

希望这可以帮助

# php - 生成伪随机码

> ID：10553899
> 
> 赞同：-1
> 
> 时间：2012-05-11T15:01:12.733
> 
> 标签：php, mysql, codeigniter, random, hash

我的类中有一个函数（派生自[这个](https://stackoverflow.com/questions/1182584/secure-random-number-generation-in-php)函数）来生成安全代码，然后是一个测试函数来更新数据库并将代码打印到页面上。生成器函数在一个页面上工作正常，它只是在功能上编程并立即调用，但是一旦我将它放入我在 CodeIgniter 中的类中，它就不起作用了。

这是我的生成器功能：

```
private function createSecureCode()
{

    // Get 128 pseudorandom bits in a string of 16 bytes
    $pr_bits = '';

    $fp = @fopen('/dev/urandom','rb');
    if ($fp !== false) {
        $pr_bits .= @fread($fp,16);
        @fclose($fp);
    }

    return $pr_bits;

} 
```

这是我的测试功能：

```
public function test()
{

$query = $this->db->get("clients");
$result = "";
    foreach($query->result() as $results)
        {

            $code = $this->createSecureCode();
            $result .= $code." - ";
            $this->db->where("client_id", $results->client_id);
            $this->db->update("clients", array("client_secure_code" => $code, "client_active" => 1));

        }

    /*$query = $this->db->get("clients");
    $row = $query->first_row();
    print($row->client_secure_code." - ");*/
    print($result);
    return $result;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:19:06.210

问题是 Codeigniter 将使用 index.php 进行重新路由

所以“$fp = @fopen('/dev/urandom','rb');” 失败 - 因为它将在错误的目录中查找：

```
/home/public_html/index.php/dev/urandom 
```

但我猜您的文件已存储：

```
/home/dev/urandom 
```

所以你需要做这样的事情：

```
$fp = @fopen('../../dev/urandom','rb') 
```

但是您需要根据需要测试和调整您的服务器/设置

# python - Python Unicode 问题

> ID：10553903
> 
> 赞同：0
> 
> 时间：2012-05-11T15:01:21.897
> 
> 标签：python, unicode

```
import re

##EDIT  didn't mean to copy filename = "rr.txt" ## opens file unicode file type
buffer = open('r.txt','r').read()

quotes = re.findall(ur'"[^"^\u201c]*["\u201d].*', buffer)
for quote in quotes:
    print ''
    print quote
## prints quotes found
## Problem is that the print output has rectangular blocks between each Character 
```

为什么？

如何在没有矩形块弄乱一切的情况下返回输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:10:48.537

你打开不正确。而 Windows 中的“Unicode”实际上是 UTF-16LE。

```
buffer = codecs.open('r.txt', 'r', encoding='utf-16le').read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:04:16.560

这与 Python 无关。您的控制台窗口呈现 Python 的输出，这会中断。

在控制台窗口中使用支持必要 Unicode 字符的字体。

# sql - Oracle：如何确定列是否为“布尔值”？

> ID：10553904
> 
> 赞同：0
> 
> 时间：2012-05-11T15:01:26.563
> 
> 标签：sql, oracle, boolean

我创建这样的准布尔列：

```
CREATE TABLE foo
    bar NUMBER(1) DEFAULT 0 NOT NULL CHECK (hide IN (0, 1)) 
```

我目前正在抓取`user_tab_columns`并希望能够确定给定列是否为布尔值。到目前为止，我有这个：

```
SELECT column_name,
       (SELECT COUNT(*)
        FROM   all_constraints
        WHERE  table_name = table_name
        AND    constraint_type = 'C'
        AND    REGEXP_LIKE(search_condition, '^ *' || column_name || ' +IN *\( *0, *1 *\) *$', 'i')) is_boolean
FROM   user_tab_columns; 
```

但我收到以下错误：

```
ORA-00932: inconsistent datatypes: expected NUMBER got LONG
00932\. 00000 -  "inconsistent datatypes: expected %s got %s"
*Cause:    
*Action:
Error at Line: 6 Column: 31 
```

我了解到这是因为`search_condition`数据类型是`LONG`，并且`REGEXP_LIKE()`需要一个字符类型，但我不知道如何解决这个问题。

我会以正确的方式解决这个问题吗？如果是这样，我该如何解决我遇到的错误？如果没有，有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:21:20.200

您可以使用 Oracle 注释：

```
COMMENT ON COLUMN foo.bar is 'Boolean'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:18:46.823

是的，LONG 数据类型很难使用。解决此问题的一种方法是创建一个函数以将约束的搜索条件作为 varchar2 返回：

```
create or replace
function search_condition
( p_owner varchar2
, p_constraint_name varchar2
) return varchar2
is
  l_text long;
begin
  select search_condition into l_text from all_constraints
  where owner = p_owner
  and constraint_name = p_constraint_name;
  return l_text;
end; 
```

现在您可以在查询中使用它：

```
select constraint_name, search_condition from
(
select constraint_name, search_condition (owner, constraint_name) search_condition
from all_constraints
where constraint_type = 'C'
and owner = 'TONYEOR'
)
where  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:03:47.953

这取决于您的应用程序，但查看列类型、比例和精度可能就足够了。我想我从来没有`number(1)`在 Oracle 数据库中看到过用于布尔值以外的任何东西。

# asp.net - System.Web.HttpContext.Current 在检查缓存后自身为空

> ID：10553907
> 
> 赞同：5
> 
> 时间：2012-05-11T15:01:40.730
> 
> 标签：asp.net, caching, httpcontext, system.web

我今天遇到了一个奇怪的问题，对我来说毫无意义。这是一个摘要：

在一个方法中，我检查缓存项，如下所示：

```
private async Task<RatesStatus> getRatesStatusAsync() {

    //...

    if (_currentHttpContext != null) {

        //Here, I am checking for a Cached item
        var cachedRatesStatusObj = HttpContext.Current.Cache[Constants.RATESSTATUS_CACHE_KEY_NAME];
        if (cachedRatesStatusObj != null)
            return (RatesStatus)cachedRatesStatusObj;
    }

    //...

    cacheRatesStatusObject(ratesStatus);

    //...
} 
```

在这里，在`HttpContext.Current`ASP.NET 应用程序中，它不是预期的 null。然后，在`cacheRatesStatusObject`方法内部，我检查是否`HttpContext.Current`为空，如下所示：

```
private void cacheRatesStatusObject(RatesStatus ratesStatus) {

    //...

    //Seeing if HttpContext.Current is null or not first.
    //and it is null here...
    if (HttpContext.Current == null)
        return;

    //...
} 
```

它在那里是空的。不知道这里发生了什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:48:57.370

当您使用 async/await 时，处理请求的线程会将请求标记为未完成，然后返回到`ASP.NET thread pool`. 当 awaitable 稍后完成时，会分配另一个线程来运行该方法的其余部分，但是 HttpContext 不会跨线程迁移，这就是调用 await 方法时获得空引用的原因。

您可以将 HttpContext 的引用传递给 await 方法，如下所示：

```
await cacheRatesStatusObject(HttpContext.Current,  ratesStatus); 
```

但是，您应该非常小心地处理并发和竞争条件，例如，如果等待线程锁定了一个资源并且另一个请求线程尝试使用它，那么您的线程池就会繁荣。大多数人通过创建新对象并将它们传递到参数化线程而不是跨线程传递 HttpContext 的引用来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:29:52.107

传递实例很糟糕。

请改用 .NET 4 MemoryCache 类。

[http://stevescodingblog.co.uk/net4-caching-with-mvc/](http://stevescodingblog.co.uk/net4-caching-with-mvc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:52:37.337

它本身不会为空。

`HttpContext`仅以“线程静态”方式存储。

正如另一个答案所建议的，只需传递实例。

# java - 扩展 BigDecimal 数

> ID：10553910
> 
> 赞同：0
> 
> 时间：2012-05-11T15:01:45.547
> 
> 标签：java, bigdecimal

我有这个程序：

```
int r = 4;//number add to d
int n = 3;//number of 0 add after 25
BigDecimal d = BigDecimal.valueOf(0.0025); 
```

最后我想生成数字：`0.0025004`这个数字是由：添加`n`位置之后`d`我的数字是：`0.0025000`最后添加`0.000004`到我的数字 4 是`r`。

我知道有几种方法可以做，但我想`avoid loop` 并使用最大的 fonctinnality`BigDecimal`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:46:42.057

尝试一下：

```
int r = 4;// number add to d
int n = 3;// number of 0 add after 25
BigDecimal d = BigDecimal.valueOf(0.0025);
double f  = r / Math.pow(10, d.scale() + n);
System.out.println(d.add(BigDecimal.valueOf(f))); 
```

我希望这是有用的

# tsql - Olap 立方体和 MDX 和 NON EMPTY

> ID：10553912
> 
> 赞同：0
> 
> 时间：2012-05-11T15:01:55.040
> 
> 标签：tsql, ssas, mdx, olap

我对 SSAS、OLAP 和 MDX 语法很陌生。

所以我有这个`MDX`来查询多维数据集`TSQL`（通过链接服务器到 SSAS），它工作正常：

```
select * from openquery(GCUBE, 
'SELECT NON EMPTY { [Measures].[Valore] } ON COLUMNS, 
NON EMPTY {
( [Prodotti].[Top Marca].[Top Marca].ALLMEMBERS 
* [Prodotti].[Top Codice].[Top Codice].ALLMEMBERS 
* [Agenti].[Vw Agenti].[Vw Agenti].ALLMEMBERS
* [Calendario].[AnnoMese].[Mese].ALLMEMBERS 
* [Prodotti].[Ordinamento].[Ordinamento].ALLMEMBERS 
* [Prodotti].[Top].[Top].ALLMEMBERS )
}
DIMENSION PROPERTIES MEMBER_CAPTION
ON ROWS FROM ( SELECT ( { [Calendario].[Anno].&[2012] } )
ON COLUMNS FROM ( SELECT ( { [Agenti].[Vw Agenti].&[005] } )
ON COLUMNS FROM [Vendite])) WHERE (  [Calendario].[Anno].&[2012] )'
) 
```

嗯，这`[Prodotti].[Top Marca]`是一个基于包含 50 个最畅销品牌的表格的维度，并且此 MDX 由特定的 ID 代理过滤`[Vw Agenti] = 005`。

查询的目的是了解**代理商如何销售公司的 50 个畅销品牌。**

查询工作正常，但该代理没有销售一个品牌，我需要显示空行。

下图显示了**与位置（排名）相关的缺失记录 31**。

![MDX 查询结果](../Images/c982d532c44b878005dc80009150a0ca.png)

我理解这个概念，`NON EMPTY`但我找不到正确的语法来显示空记录。

我应该如何修改 MDX？

我试图删除`NON EMPTY`，但我得到一个通用错误：

```
Cannot execute the query against OLE DB provider "MSOLAP" for linked server "GCUBE" 
```

我需要更改`Top Marca`多维数据集中的维度吗？

提前感谢任何可以帮助我或提供解决此问题的正确提示的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:26:38.833

我不是 SSAS/TSQL 的专家，但我会先尝试一个简单的请求：

```
SELECT 

[Measures].[Valore]ON COLUMNS, 

NON EMPTY [Prodotti].[Top Marca].[Top Marca].ALLMEMBERS ON ROWS 

FROM ( SELECT { [Calendario].[Anno].&[2012] } ON COLUMNS 
  FROM ( SELECT { [Agenti].[Vw Agenti].&[005] } ON COLUMNS 
    FROM [Vendite] 
  )
) ' 
```

没有这个 TSQL 的东西有什么方法可以运行它？

# ruby-on-rails-3 - Dreamhost：两个不同的 Ruby 版本和 gemset？

> ID：10553915
> 
> 赞同：0
> 
> 时间：2012-05-11T15:02:00.633
> 
> 标签：ruby-on-rails-3, passenger, dreamhost

我正在使用 Dreamhost 共享服务器。我收到此错误消息，我不明白这些错误的含义。这是否表明乘客使用 Dreamhost 默认 ruby​​ 1.8 而不是我的本地 1.9.3？这些错误消息显示 passsanger 正在使用 usr/lib/ 而不是我的主文件夹。提前致谢。

```
In config/environmnet.rb:
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
RailsMichaelcunnaneCom::Application.initialize! 
```

.

```
0   /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/setup.rb  10  in `exit'
1   /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/setup.rb  10  
2   /usr/lib/ruby/1.8/rubygems/custom_require.rb    36  in `gem_original_require'
3   /usr/lib/ruby/1.8/rubygems/custom_require.rb    36  in `require'
4   /home/miccun2/rails.michaelcunnane.com/config/boot.rb   6   
5   /usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `gem_original_require'
6   /usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `require'
7   /home/miccun2/rails.michaelcunnane.com/config/application.rb    1   
8   /usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `gem_original_require'
9   /usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `require'
10  /home/miccun2/rails.michaelcunnane.com/config/environment.rb    2   
11  /usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `gem_original_require'
12  /usr/lib/ruby/1.8/rubygems/custom_require.rb    31  in `require'
13  config.ru   3   
14  /usr/lib/ruby/gems/1.8/gems/rack-1.2.1/lib/rack/builder.rb  46  in `instance_eval'
15  /usr/lib/ruby/gems/1.8/gems/rack-1.2.1/lib/rack/builder.rb  46  in `initialize'
16  config.ru   1   in `new'
17  config.ru   1 
```

红宝石版本：

```
miccun2@oslo:~/rails.michaelcunnane.com$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
miccun2@oslo:~/rails.michaelcunnane.com$ which ruby
/home/miccun2/.rvm/rubies/ruby-1.9.3-p194/bin/ruby 
```

Rails 版本和启动并运行

```
miccun2@oslo:~/rails.michaelcunnane.com$ rails -v
Rails 3.2.3
miccun2@oslo:~/rails.michaelcunnane.com$ which rails
/home/miccun2/.rvm/gems/ruby-1.9.3-p194/bin/rails
miccun2@oslo:~/rails.michaelcunnane.com$ rails console
Loading development environment (Rails 3.2.3)
1.9.3p194 :001 > exit 
```

RVM 版本和 gemset 选择

```
miccun2@oslo:~/rails.michaelcunnane.com$ rvm gemset list
gemsets for ruby-1.9.3-p194 (found in /home/miccun2/.rvm/gems/ruby-1.9.3-p194)
   global
   rails_michaelcunnane_com

miccun2@oslo:~/rails.michaelcunnane.com$ rvm gemset use rails_michaelcunnane_com --default
Using ruby-1.9.3-p194 with gemset rails_michaelcunnane_com 
```

Bundle安装后的Bundle Show

```
miccun2@oslo:~/rails.michaelcunnane.com$ bundle show
Gems included by the bundle:
  * actionmailer (3.2.3)
  * actionpack (3.2.3)
  * activemodel (3.2.3)
  * activerecord (3.2.3)
  * activeresource (3.2.3)
  * activesupport (3.2.3)
  * arel (3.0.2)
  * builder (3.0.0)
  * bundler (1.1.3)
  * coffee-rails (3.2.2)
  * coffee-script (2.2.0)
  * coffee-script-source (1.3.1)
  * erubis (2.7.0)
  * execjs (1.3.2)
  * hike (1.2.1)
  * i18n (0.6.0)
  * journey (1.0.3)
  * jquery-rails (2.0.2)
  * json (1.7.1)
  * mail (2.4.4)
  * mime-types (1.18)
  * multi_json (1.3.4)
  * polyglot (0.3.3)
  * rack (1.4.1)
  * rack-cache (1.2)
  * rack-ssl (1.3.2)
  * rack-test (0.6.1)
  * rails (3.2.3)
  * railties (3.2.3)
  * rake (0.9.2.2)
  * rdoc (3.12)
  * sass (3.1.17)
  * sass-rails (3.2.5)
  * sprockets (2.1.3)
  * sqlite3 (1.3.6)
  * thor (0.14.6)
  * tilt (1.3.3)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * uglifier (1.2.4)
miccun2@oslo:~/rails.michaelcunnane.com$ 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:51:46.027

上次我部署了一个 Rails 3 应用程序 Dreamhost 没有提供 1.9.2。所以我的应用程序使用了默认的 1.8.7。我认为他们仍然不提供 1.9.2。

我没有使用 RVM，一开始我就想要它，但我认为这太麻烦了。Dreamhost Wiki 有信息，但不受支持。因此，如果出现问题，Dreamhost 不会提供帮助。使用您自己的 1.9.2 时也没有帮助。

在我的笔记本电脑上，我当然使用 RVM，但在 Dreamhost PS 上只使用 Dreamhost Ruby 1.8.7。为了让我的Passenger Rails 3应用程序正常工作，我唯一需要更改的是主目录中的.gemrc，它只有

```
gemhome: /home/myuser/.gems/
gempath:
- /home/myuser/.gems/ 
```

# iphone - 如何从 UIAlertView 运行方法

> ID：10553917
> 
> 赞同：1
> 
> 时间：2012-05-11T15:02:03.830
> 
> 标签：iphone, objective-c, ios, uialertview

我希望 `[User logOut];`在用户触摸下面的**Log Me out**按钮时运行此方法`UIAlertView`。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Logged in!" message:@"Logged in to App!" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:@"Log me out", nil];
        [alert show];
        [alert release]; 
```

我该怎么做呢？“好的”适用于取消按钮。我只需要另一个按钮/方法来工作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:12:02.890

你可以做类似的事情；

```
- (void)AlertConfirm
{
    UIAlertView *alert = [[UIAlertView alloc] init];
    [alert setTitle:@"Confirm"];
    [alert setMessage:@"Log out?"];
    [alert setDelegate:self];
    [alert addButtonWithTitle:@"Yes"];
    [alert addButtonWithTitle:@"No"];
    [alert show];
    [alert release];
} 
```

和

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        // Yes, do something
    }
    else if (buttonIndex == 1)
    {
        // No
    }
} 
```

祝你好运，内森

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:05:31.153

您需要使用 UIAlertView 委托方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

确保将自己设置为 alertView 的代表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:09:51.743

将警报视图的委托设置为 self，并在您的 .h 中添加

按下按钮时将调用以下委托方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

然后您可以通过执行以下操作查看按下了哪个按钮：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if ((alertView == alert) && (buttonIndex == 0))
        NSLog(@"alert's \"Okay\" button was pressed");
    else 
        NSLog(@"alert's \"Log Out" button was pressed");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:16:21.747

将您的视图控制器设置`delegate`为`UIAlertView`：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Logged in!" message:@"Logged in to App!" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:@"Log me out", nil];
        alert.delegate = self;
        [alert show];
        [alert release]; 
```

然后在委托回调中处理：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
{
    if (buttonIndex == alertView.cancelButtonIndex) {
        // Cancelled
        return;
    }

    // Log them out
} 
```

注意测试`(buttonIndex == alertView.cancelButtonIndex)`。这比检查按钮索引的绝对值更好。

# android - 小 EditText 有一个带有很多行的 setError

> ID：10553920
> 
> 赞同：19
> 
> 时间：2012-05-11T15:02:27.420
> 
> 标签：android, android-layout, android-edittext

我有一个小的 EditText，我想在其中显示错误（使用 editText.setError()）。在 Android API 10 中，消息显示在很多行中并且不可读。在 Android 15 中工作得比较好。我附上屏幕截图来说明问题末尾的问题。

如何以适当的模式显示错误消息？

我写了一个小例子来重现这个问题：

活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((EditText) findViewById(R.id.b)).setError("A error description and bla bla bla bla bla.");
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/a"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/b"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/c"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/d"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/e"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/f"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

</LinearLayout> 
```

使用 Android API 10 的设备：

![具有 Android API 10 的设备](../Images/e05895da57a3a0bba8f3957ae1e20280.png)

带有 Android API 15 的平板电脑：

![具有 Android API 15 的平板电脑](../Images/12c86648b3beba735cf0cfa010b79f11.png)

[相关问题。](https://stackoverflow.com/questions/6924576/edittext-seterror-in-single-line)但答案对我不起作用。

* * *

## 更新

除了 API 级别，我在两个 equals 模拟器上执行了相同的代码。结果可以在屏幕上看到。API 15 仍然没有完全修复错误。文本清晰可辨，但弹出窗口的位置不正确。

![API 10](../Images/5a5588df867098b51a22e8a5f307dd1b.png) ![API 15](../Images/bfaaa7c553f7c62e0e98c5995d066983.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:38:54.840

因此查看[2.3.3 的源代码，](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/android/widget/TextView.java#TextView.chooseSize%28android.widget.PopupWindow,java.lang.CharSequence,android.widget.TextView%29)错误文本的宽度设置为略小于与其相关的 TextView 的宽度。

[他们已经对 4.0.3 进行了改进](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/TextView.java#TextView.chooseSize%28android.widget.PopupWindow,java.lang.CharSequence,android.widget.TextView%29)，因此在您的示例中，弹出窗口的宽度是正确的 - 但您的布局的性质使得指针位于错误的位置。

我认为您有一个针对 4.0.3 的错误报告的合理示例，因为我认为您没有那么不寻常的用例。

为了解决这个问题，我建议您根据需要使用隐藏和显示的 TextView。您可以在编辑文本上设置错误图像，如下所示。

```
Drawable errorImage = getContext().getResources().getDrawable( R.drawable.your_error_image);
theEditTextInQuestion.setCompoundDrawableWithIntrinsicBounds(errorImage, null, null, null);” 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:08:29.507

在 api 14 上，TextView 使用这个类；

```
private static class ErrorPopup extends PopupWindow {
    private boolean mAbove = false;
    private final TextView mView;
    private int mPopupInlineErrorBackgroundId = 0;
    private int mPopupInlineErrorAboveBackgroundId = 0;

    ErrorPopup(TextView v, int width, int height) {
        super(v, width, height);
        mView = v;
        // Make sure the TextView has a background set as it will be used the first time it is
        // shown and positionned. Initialized with below background, which should have
        // dimensions identical to the above version for this to work (and is more likely).
        mPopupInlineErrorBackgroundId = getResourceId(mPopupInlineErrorBackgroundId,
                com.android.internal.R.styleable.Theme_errorMessageBackground);
        mView.setBackgroundResource(mPopupInlineErrorBackgroundId);
    }

    void fixDirection(boolean above) {
        mAbove = above;

        if (above) {
            mPopupInlineErrorAboveBackgroundId =
                getResourceId(mPopupInlineErrorAboveBackgroundId,
                        com.android.internal.R.styleable.Theme_errorMessageAboveBackground);
        } else {
            mPopupInlineErrorBackgroundId = getResourceId(mPopupInlineErrorBackgroundId,
                    com.android.internal.R.styleable.Theme_errorMessageBackground);
        }

        mView.setBackgroundResource(above ? mPopupInlineErrorAboveBackgroundId :
            mPopupInlineErrorBackgroundId);
    }

    private int getResourceId(int currentId, int index) {
        if (currentId == 0) {
            TypedArray styledAttributes = mView.getContext().obtainStyledAttributes(
                    R.styleable.Theme);
            currentId = styledAttributes.getResourceId(index, 0);
            styledAttributes.recycle();
        }
        return currentId;
    }

    @Override
    public void update(int x, int y, int w, int h, boolean force) {
        super.update(x, y, w, h, force);

        boolean above = isAboveAnchor();
        if (above != mAbove) {
            fixDirection(above);
        }
    }
} 
```

像这样打电话；

```
final float scale = getResources().getDisplayMetrics().density;
            mPopup = new ErrorPopup(err, (int) (200 * scale + 0.5f), (int) (50 * scale + 0.5f));
            mPopup.setFocusable(false); 
```

所以 Android TextView 使用你的手机密度。我尝试更改密度，但我无法工作，因为它需要 root。如果你能做到这一点，也许它的工作。但我想这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T18:39:53.020

我认为一个问题可能是 XML 中的 LinearLayout 没有 weightSum 属性。如果 LinearLayout 没有声明 weightSum，我不知道您是否可以在子视图中使用 layout_weight。此外，尝试将您的 layout_widths 更改为“wrap_content”，如果这不起作用，请摆脱 layout_weights。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T08:46:34.030

这两个模拟器的屏幕尺寸是否相同？..如果是这样，我认为设置layout_widths和heights来包装弹出窗口的内容是合适的，如果错误仍然存​​在，那么具体定义弹出窗口的宽度和高度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T12:34:58.493

I think you should set the width of the edit text as fill parents so that it will take the proper place, otherwise give the width like 200 or 250 dp so that in that particular width your error message will be shown to you.

# javascript - 重写 Async JS 流程（可能使用 JQuery Promise）

> ID：10553923
> 
> 赞同：1
> 
> 时间：2012-05-11T15:02:31.840
> 
> 标签：javascript, jquery, asynchronous, jquery-deferred, web-sql

我在使用两个函数时遇到问题，因为它们依赖于链接异步任务。这`clearAll`是一个点击事件，它应该清空数据库然后重新加载页面。 `Clear`是来自数据库模块 ( `database.clear`) 的函数。

如果合适的话，我想使用 JQuery Promises/Deffered，但对于这个用例我不能完全掌握它们。

我已经按照@Larry K 的回答重写了代码

```
 clearAll: function()
    {
        var refresh = function()
        {
            localStorage.clear();  
            sessionStorage.clear();
            window.location.href = window.location.pathname;
            console.log("feeling refreshed");
        };

        database.open();

                    //This is what I'd like to be able to do
                    //With Jquery or callbacks
        $.when(database.clear()).then(refresh);

    },

clear: function (callback, errorCallback)
{
    var sql = "SELECT name FROM sqlite_master WHERE type='table' AND name != ?",
    args = ["__WebKitDatabaseInfoTable__"];

    var dbTableNamesResult = function (tx, result)
    {
       var dropSql  = "";

       for (var i = 0; i < result.rows.length; i++)
       {
        dropSql = "DROP TABLE IF EXISTS " + result.rows.item(i).name + "; ";
        execute(dropSql);
       }
    };

    execute(sql, args, dbTableNamesResult);
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:22:02.563

最大的问题是你有两层回调，包括第二层的循环。

您正在使用数据库对多个`drop table`调用进行排队，因为您立即调用了许多`database.dropTable`方法（无需等待前一个方法完成。）

这很好，但解决问题的更简单方法是一次删除所有表。[SQLite 手册](http://www.sqlite.org/lang.html)说支持多个 table drop sql 语句。但你可能想要测试它。

看来您正在使用围绕 sql 调用的包装库，是吗？对我的代码中显示的 execSQL 方法使用适当的调用。

此外，您的 refresh 函数会被调用，用于 drop table 语句的成功和失败。AFAIK，你永远不会打电话给你的`errorCallback`. 我会尝试：

```
var clearDatabase = function (successCallback, errorCallback) {
  var dbTableNamesResult = function (tx, result) {          
        var sql1 = '',
            rows = result.rows;

        for (var i = 0; i < rows.length; i++) {
          sql1 = sql1 + " DROP TABLE " + rows.item(i).name + ";";
        }

        //now make one call to drop multiple tables...
        database.execSQL(sql1, successCallback, errorCallback);
           // pseudo function, update as appropriate
      }

  database.open();
  database.query(
    "SELECT name FROM sqlite_master WHERE type='table' AND name != ?",
    ['__WebKitDatabaseInfoTable__'], dbTableNamesResult);
}; 
```

**添加**

调用 clearDatabase 的函数应该同时提供 successCallback 和 errorCallback。如果出现错误，请重试或仅记录它...

**更新**

我看到数据库可以直接调用successCallback 和errorCallback 函数。更新了代码。

**此答案中使用的资源**

HTML5 Rocks：[客户端存储](http://www.html5rocks.com/en/tutorials/offline/storage/)

[HTML5 本地数据库入门](http://blog.darkcrimson.com/2010/05/local-databases/)

SQLite[理解的 SQLite SQL](http://www.sqlite.org/lang.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:41:38.893

尝试实现 jQuery 延迟自己我正在寻找的答案是由 zerkms 对*[我如何将其编写为 jQuery 延迟函数的回答提供的](https://stackoverflow.com/questions/10615254)*

# jmeter - 获取线程组中的用户/线程数

> ID：10553927
> 
> 赞同：3
> 
> 时间：2012-05-11T15:02:37.533
> 
> 标签：jmeter

在 JMeter 中，我有一个带有线程组的测试计划。线程组具有线程数和循环计数，可以在 gui 中设置。

无论如何我可以动态地弄清楚它们被设置了什么，以便我可以将它们传递给变量？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:46:10.550

使用带有以下代码的 BeanShell PostProcessor：

```
vars.put("threads", Integer.toString(prev.getAllThreads())); 
```

或者，也许你只是在寻找这个：[http ://code.google.com/p/jmeter-plugins/wiki/ActiveThreadsOverTime](http://code.google.com/p/jmeter-plugins/wiki/ActiveThreadsOverTime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:09:21.937

您可以参数化定义属性的线程数，例如

```
${__P(users, 1)} 
```

如果您从命令行运行测试计划，您可以将其值指定为`-Jusers=XX`. 相反，如果您从 JMeter gui 运行测试以验证文本计划，则 users 属性假定默认值为 1。
不要忘记在线程计数中引用该属性，使用`${users}`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:51:34.720

您应该在 TestPlan 级别设置中参数化您的线程数，然后在 ThreadGroup 和 Listener 中使用该参数（变量）。

如果值变化并且您想从命令行传递它，请使用 __P() 函数而不是变量。

# coldfusion - 如何确定全名中是否有空格？

> ID：10553930
> 
> 赞同：3
> 
> 时间：2012-05-11T15:02:48.487
> 
> 标签：coldfusion, coldfusion-9

我有一个字段，用户可以输入名字和姓氏来填写我的表格。有时，用户输入他们的名字，这会导致我的数据库中出现空字段。请记住，我无法完全更改此方法，因为此表单是更大项目的一部分，并且正在被我公司的其他网站使用。

这是我需要围绕它进行验证的代码部分。我已经有一个验证，以确保该字段不为空，但我需要更多以确保该字段中有两个项目，由空格分隔。

```
<input name="fullname" class="fullname"   type="text" value="#fullname#" maxlength="150"/>
            <cfif fullname eq '' and check2 eq 'check2'>
            <br /><span style="color:red">*you must enter your full name</span></cfif> 
```

check2 eq 'check2' 正在检查表单是否已经提交，以确保用户提交他们的数据两次。

我曾想过使用正则表达式来做到这一点，但不幸的是，我对如何在 CF9 中使用 regx 以及通过我在线阅读的文档不太熟悉。

我也在考虑使用“Find”或“FindOneOF”，对此有什么想法吗？

另外，我尽量避免使用 JQ、JS 等，所以如果可能的话，请尽量保留基于 CF 代码的建议。

任何有关如何解决此问题的帮助或不同建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:41:17.363

为此不需要正则表达式。一个稍微简单的解决方案：

```
<cfset form.fullname = "Dave " />
<cfif listLen(form.fullname," ") GT 1> <!--- space-delimited list, no need for trimming or anything --->
   <!--- name has more than one 'piece' -- is good --->
<cfelse>
   <!--- name has only one 'piece' -- bad --->
</cfif> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:19:54.687

你可以为服务器端验证做这样的事情：

```
<cfscript>
TheString = "ronger ddd";
TheString = trim(TheString); // get rid of beginning and ending spaces
SpaceAt = reFind(" ", TheString); // find the index of a space

// no space found -- one word
if (SpaceAt == 0) {
    FullNameHasSpace = false;
// at least one space was found -- more than one word
} else {
    FullNameHasSpace = true;
}
</cfscript>

<cfoutput>
<input type="input" value="#TheString#">
<cfif FullNameHasSpace eq true>
    <p>found space at position #SpaceAt#</p>    
    <p>Your data is good.</p>
<cfelse>
    <p>Did not find a space.</p>
    <p>Your data is bad.</p>
</cfif>
</cfoutput> 
```

# performance - DataContext LINQ 查询 - 我应该使用自己的数据对象类吗？

> ID：10553933
> 
> 赞同：0
> 
> 时间：2012-05-11T15:02:57.320
> 
> 标签：performance, linq, viewmodel, datacontext

如果我的词汇在以下问题上不正确，我深表歉意。

我有一个 SQL 数据库，它与该数据库中的表有多个关系。我为这个数据库创建了一个 DataContext 并创建了一个用于调用它的数据的函数存储库。

我的问题是，由于关系（多链接表）。

我是否应该创建自己的类对象来保存结果并只获取所需表的列数据，如下所示：

```
 public IQueryable<VM_userLogs> getUserLogsVM(Nullable<DateTime> startDate, Nullable<DateTime> endDate)
{
    if (startDate == null) {
        startDate = Convert.ToDateTime("01-01-1900");
    }

    if (endDate == null) {
        endDate = Convert.ToDateTime("01-01-2900");
    }

    IQueryable<VM_userLogs> logs = from l in ctx.tools_trt_userLogs 
                   where l.timeStamp >= startDate & l.timeStamp <= endDate 
                   select new VM_userLogs {
                            LOG_ID = l.logId,
                            NTLOGIN = l.ntLogin,
                            PRODUCT = l.productName,
                            SEGMENT = l.segmentName,
                            PRIORITY = l.priority,
                            GROUP = l.groupName,
                            ANSWER = l.answerText,
                            TIMESTAMP = l.timeStamp,
                            URL = l.url
                        };
    return logs;
} 
```

或者我可以只从数据上下文中调用底层对象而不会对性能造成很大影响......如下所示：

```
 public IQueryable<tools_trt_userLogs> getUserLogs(Nullable<DateTime> startDate, Nullable<DateTime> endDate)
{
    if (startDate == null)
    {
        startDate = Convert.ToDateTime("01-01-1900");
    }

    if (endDate == null)
    {
        endDate = Convert.ToDateTime("01-01-2900");
    }

    IQueryable<tools_trt_userLogs> logs = from l in ctx.tools_trt_userLogs
                                   where l.timeStamp >= startDate & l.timeStamp <= endDate
                                   select l;
    return logs;
} 
```

# java - 在 spring mv3 应用程序中找不到 hibernate.cfg.xml

> ID：10553939
> 
> 赞同：0
> 
> 时间：2012-05-11T15:03:21.937
> 
> 标签：java, hibernate, spring-mvc

我正在使用spring mvc3和hibernate3。在我的应用程序中，我需要使用 servlet。在那个 serverlet 中，我必须调用我的 DAO 层。但是当我在我的 servlet 中使用以下代码时。

```
Session session = HibernateUtil.getSessionFactory().openSession();
public class HibernateUtil {
    private static final SessionFactory sessionFactory;
    static {
        try {
            sessionFactory = new Configuration().configure()
                    .buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

我收到错误 org.hibernate.HibernateException：找不到 hibernate.cfg.xml。

目前我的 xml 文件与其他配置文件一起位于 WEB-INF 文件夹中。

所有解决方案都说我需要将它保存在 src 文件夹中，以便在运行时自动获取它。但我在这里使用spring mvc。所以我有点困惑，请帮助我如何解决它。

我使用控制器的所有其他地方都可以正常工作。

![在此处输入图像描述](../Images/746a74cc144078a8cb5f9554a0ab8318.png)

我在 carpool-servlet.xml 中使用以下条目

以下是我的拼车hibernate.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            ">

    <context:property-placeholder location="/WEB-INF/dbproperties.properties" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager" />   

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
                 p:dataSource-ref="dataSource"
                 p:configLocation="${hibernate.config}"
                 p:packagesToScan="store.custom.controllers">

                <property name="annotatedClasses">
        <list>
            <value>common.domain.Ride</value>
            <value>common.businessclass.PostAdRR</value>
        </list>
    </property>
                 </bean>

    <!-- Declare a datasource that has pooling capabilities-->   
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
                destroy-method="close"
                p:driverClass="${jdbc.driverClassName}"
                p:jdbcUrl="${jdbc.url}"
                p:user="${jdbc.username}"
                p:password="${jdbc.password}"
                p:acquireIncrement="5"
                p:idleConnectionTestPeriod="60"
                p:maxPoolSize="100"
                p:maxStatements="50"
                p:minPoolSize="10" />

    <!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" 
                p:sessionFactory-ref="sessionFactory" />

</beans> 
```

以下是我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC

        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"

        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

  <session-factory>
    <!-- We're using MySQL database so the dialect needs to MySQL as well-->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <!-- Enable this to see the SQL statements in the logs-->
    <property name="show_sql">true</property>
    <!-- This will drop our existing database and re-create a new one.
            Existing data will be deleted! -->
<!-- <property name="hbm2ddl.auto">create</property>-->
  </session-factory>

</hibernate-configuration> 
```

**现在我该如何设置我的休眠 config.xml** 请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:06:27.813

我建议将 .cfg.xml 移动到您的 CLASSPATH 中。这意味着将它放在 WEB-INF/classes 中，而不是 WEB-INF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:26:20.953

hibernate.config 在哪里设置

```
p:configLocation="${hibernate.config}" 
```

如果您使用的是 maven，您可以将此文件移动到 src/main/resources，然后执行 classpath:hibernate.config.xml，否则如果不是，请按照 duffymo 所述将其移动到 WEB-INF/classes 下的类路径中。

# iphone - -[NSNull _isNaturallyRTL]：无法识别的选择器发送到实例 0x20dfcd8

> ID：10553940
> 
> 赞同：0
> 
> 时间：2012-05-11T15:03:31.483
> 
> 标签：iphone, facebook, ipad

我知道，这很奇怪，但是，

```
-[NSNull _isNaturallyRTL]: unrecognized selector sent to instance 0x20dfcd8 
```

我在使用 fb graphAPI 时发现了问题。

它在这行代码中：

```
[tempValues setObject:textFieldBeingEdited forKey:tagAsNum]; 
```

我想把它改成

```
[tempValues setObject:textFieldBeingEdited.text forKey:tagAsNum]; 
```

但我在我的代码中的任何地方都找不到这个。

任何人都知道，它可以在哪个班级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:08:30.060

我会说`textFieldBeingEdited`要么是`nil`要么`NSNull`。我不确定是什么`tempValues`，所以我不知道它是否会`setObject:forKey:`自动转换`nil`为`NSNull`.

# wpf - 在WPF中以两种形式同步两个媒体元素？

> ID：10553941
> 
> 赞同：0
> 
> 时间：2012-05-11T15:03:32.780
> 
> 标签：wpf, wpf-controls

我正在做一个音乐项目。我希望它有两种形式：一种是播放，另一种是管理器。当第一个表单中的媒体元素正在播放并且我切换到另一个表单时，我希望该表单中的媒体元素与第一个表单中的媒体元素播放相同。我试图这样做，但是当我切换表格时（当我关闭第一个表格时），歌曲暂停了一点。我希望声音像 Media Windows Player 一样不间断地播放。

# wcf - 必应地图 Web 服务没有端点监听

> ID：10553942
> 
> 赞同：0
> 
> 时间：2012-05-11T15:03:33.447
> 
> 标签：wcf, web-services, bing-maps

我正在尝试做一个将使用 Bing Maps Web Services 的小应用程序。当我尝试连接服务器以获取信息时，我收到错误消息：

> 在[http://dev.virtualearth.net/webservices/v1/searchservice/searchservice.svc](http://dev.virtualearth.net/webservices/v1/searchservice/searchservice.svc)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。”

问题是什么？我的网络代理可能是原因吗？

如果这有帮助，则错误发生在行中：

```
SearchResponse searchResponse = searchResponse = searchService.Search(searchRequest); 
```

.config 文件的代码位于`<cliente>`：

```
<endpoint address="http://dev.virtualearth.net/webservices/v1/searchservice/searchservice.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ISearchService"
            contract="SearchService.ISearchService" name="BasicHttpBinding_ISearchService" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:38:45.473

由于您在具有代理的网络上，因此您需要将 defaultProxy 元素添加到您指定代理地址的配置中。更多[信息在这里](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)

# android - 监听电话状态改变，两种不同的方式：BroadcastReceiver 和 TelephonyManager

> ID：10553946
> 
> 赞同：1
> 
> 时间：2012-05-11T15:03:56.740
> 
> 标签：android

为什么要获取手机状态更改状态，android 提供了两种方式：BroadcastReceiver 与 action android.intent.action.PHONE_STATE，以及使用 TelephonyManager 与 PhoneStateListener ？

内容有本质区别？还是只改变通知方式？

我可以使用 TelephonyManager.listen(PhoneStateListener listener, int events) 注册一个侦听器并在 onCallStateChanged() 中处理状态，或者为操作 android.intent.action.PHONE_STATE 注册一个 BroadcastReceiver 并在 onReceive() 中处理事件。

为什么以及何时更喜欢一种或另一种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:20:47.093

在我看来，这`TelefonyManger`适用于应用程序。确保不要自己实例化它。你应该使用它：

```
Context.getSystemService(Context.TELEPHONY_SERVICE) 
```

如果您计划制作一个可以直接拨打电话或**直接在您的应用程序中使用电话的其他功能的拨号器应用程序，这似乎很有用**

另一方面，如果您注册 a ，这意味着即使**您的应用程序不在前台，**`BroadcastReceiver`您也想知道手机状态。如果您正在制作一个跟踪电话使用情况的应用程序，则可能是这样。

 **[Android 开发人员上的 TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html)**

# c# - MS 单元测试：强制单元测试使用 web.config（部署在 testsettings 中）而不是 app.config？

> ID：10553947
> 
> 赞同：1
> 
> 时间：2012-05-11T15:04:04.673
> 
> 标签：c#, asp.net, .net, unit-testing, mstest

任何人都可以帮忙。我有一个 ASP.NET 应用程序，它有一个 web.config 文件，所以我使用 testsettings 将 web.config 部署到 OUT 目录。

我已经检查过了，它就在那里。但我无法拿起我的连接字符串...

如果我在单元测试项目的标准 app.config 中输入连接字符串，那么一切正常。

我试图减少维护:-)

因此，我只有 1 个连接字符串要在 1 个地方更新..

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:07:58.293

作为测试设置的一部分，第一步将复制`web.config`到`app.config`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:29:34.253

您可以使用[`WebConfigurationManager.OpenMappedMachineConfiguration`](http://msdn.microsoft.com/en-us/library/ms151446)和指向`Path.Combine(TestContext.TestDeploymentDir, "web.config")`作为映射的配置文件。

# java - 检索异常完整堆栈跟踪

> ID：10553952
> 
> 赞同：10
> 
> 时间：2012-05-11T15:04:14.587
> 
> 标签：java, exception, apache-commons, lang

我正在尝试在我的项目中将 Apache commons lang 从 2.4 升级到 3.1。我的实现有对 ExceptionUtil.getFullExceptionTrace(e) 的引用，它在 3.1 中不再存在。删除原因被列为

> “删除 isThrowableNested、isNestedThrowable 和 getFullStackTrace，因为一旦进入 JDK 1.4，它们都是无操作类型。LANG-491”

. 关于此更改的几个问题：

1.  如果这意味着我们需要探索其他方法来检索完整的堆栈跟踪，或者我们可以简单地替换为 ExceptionUtils.getStackTrace(e)，我感到很困惑。

2.  知道 jdk 1.4 之后发生了什么变化以使该方法变得多余吗？

3.  我们不能简单地做 e.toString() 其中 e 是我的异常实例吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T15:11:42.803

Java 1.4 在 Throwable 类上引入了[getCause()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html#getCause%28%29)方法，该类是所有 Exception 类的父类。如果您需要以字符串形式获取堆栈跟踪，可以使用 ExceptionUtils.getStackTrace(e) 或类似的东西：

```
 Exception e = ...
  StringWriter sw = new StringWriter();
  e.printStackTrace(new PrintWriter(sw));
  String stack Trace = sw.toString(); 
```

[请参阅JIRA 问题 LANG-491](https://issues.apache.org/jira/browse/LANG-491)上有关从 ExceptionUtil 中删除方法的其他讨论。

# .net - 使用 Google Docs API 获取仅包含 URL 的文件夹的 ACL

> ID：10553956
> 
> 赞同：0
> 
> 时间：2012-05-11T15:04:23.953
> 
> 标签：.net, google-api, gdata

我正在使用 Google Data .NET 库。给定包含文件夹 ID 的文件夹的 URL（例如，用户可能从浏览器复制和粘贴），我希望能够获取该文件夹的访问控制列表并进行更改。

我可以像这样使用 FolderQuery：

```
 DocumentsService ss = new DocumentsService(appname);
        ss.setUserCredentials(username, password);

        FolderQuery fq = new FolderQuery(folderid);
        DocumentsFeed df = ss.Query(fq);

        DocumentEntry de = (DocumentEntry)df.Entries[0];
        Uri AclUri = new Uri(de.AccessControlList); 
```

但这只返回文件夹的内容。我想要文件夹本身。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:26:10.380

FolderQuery 类用于检索文件夹的内容，但您可以像检索文档一样检索文件夹的访问控制列表。

以下代码段假定`folderId`您要为其检索 ACL 的文件夹的 ID：

```
DocumentsService ss = new DocumentsService(appname);
ss.setUserCredentials(username, password);

string uri = String.Format(DocumentsListQuery.aclsUriTemplate, folderId);
AclQuery query = new AclQuery(uri);
AclFeed feed = ss.Query(query);

foreach (AclEntry acl in feed.Entries)
{
    // Print the acl Role to the screen
    Console.WriteLine(acl.Role.Value);
    // Print the acl Scope type and value to the screen
    Console.WriteLine(acl.Scope.Type + " - " + acl.Scope.Value);
} 
```

# javascript - jquery count 兄弟姐妹不返回正确的结果？

> ID：10553962
> 
> 赞同：5
> 
> 时间：2012-05-11T15:04:48.557
> 
> 标签：javascript, jquery, siblings

我想`sibling`按**类**计算，

html,

```
<div class="item-sibling">1</div>
<div class="item-holder"><div class="item-sibling">2</div></div>
<div class="item-holder"><div class="item-sibling">3</div></div>
<div class="item-holder"><div class="item-sibling">4</div></div>
<div class="item-holder"><div class="item-sibling">5</div></div>​ 
```

jQuery,

```
var len = $('.item-sibling').siblings().css({background:'red'}).length;
alert(len);​​​​ // return 4 
```

它不包括`<div class="item-sibling">1</div>`

我怎样才能包括它？

jsfiddle[链接](http://jsfiddle.net/8Ur3s/)

如果我将 html 更改为，

```
<div class="item-sibling">0</div>
<div class="item-sibling">1</div>
<div class="item-holder"><div class="item-sibling">2</div></div>
<div class="item-holder"><div class="item-sibling">3</div></div>
<div class="item-holder"><div class="item-sibling">4</div></div>
<div class="item-holder"><div class="item-sibling">5</div></div> 
```

我会得到`6`这一次。奇怪的！

**编辑，**

```
<div class="group-a">
    <div class="item-sibling">1</div>
    <div class="item-holder"><div class="item-sibling">2</div></div>
    <div class="item-holder"><div class="item-sibling">3</div></div>
    <div class="item-holder"><div class="item-sibling">4</div></div>
    <div class="item-holder"><div class="item-sibling">5</div></div>​
</div>

<div class="group-b">
    <div class="item-sibling">1</div>
    <div class="item-holder"><div class="item-sibling">2</div></div>
    <div class="item-holder"><div class="item-sibling">3</div></div>
</div> 
```

有一系列具有**相同类**的组，我想动态计算目标组的兄弟姐妹，例如**第一组**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T15:06:19.290

你可以做

```
var len = $('.item-sibling').siblings().andSelf().css({background:'red'}).length; 
```

或者...

```
var len = $('.item-sibling').parent().children().css({background:'red'}).length; 
```

* * *

编辑：阅读您的更新后，我会建议以下内容：

1）为每个组添加一个通用的“组”类。例如，

```
<div class="group group-a">
    ...
</div> 
```

2）然后利用该类查找所有“兄弟姐妹”：

```
var len = $('.item-sibling:first').closest('.group')
    .find('.item-sibling').css({background:'red'}).length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:07:57.713

这是因为兄弟姐妹是*其他人*。[`andSelf()`](http://api.jquery.com/andSelf/)尝试将目标元素包含到获取的集合中的jQuery 。

```
var len = $('.item-sibling')
    .siblings()
    .andSelf()
    .css({background:'red'})
    .length; 
```

* * *

而你拥有的第二个 HTML，你有 2`.item-sibling`个`0`和`1`. jQuery 得到`0`的兄弟姐妹（`.item-holder`, 包括`1`）和`1`的兄弟姐妹（`.item-holder`, 包括`0`），总共有 6 个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T15:24:25.663

好的，既然我们已经澄清了您想要的内容，如果您对组有引用，您可以简单地执行以下操作：

```
var items = $group.find('.item-sibling').length; 
```

如果您有对 an`.item-sibling`元素的引用，请执行以下操作：

```
var items = $item.closest('.group').find('.item-sibling').length; 
```

这假设每个组都有一个共同的类。

如果要获取每个组中元素数量的列表，则必须遍历每个组：

```
var num_items = $('.group').map(function() {
    return $(this).find('.item-sibling').length;
}).get(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:09:15.957

根据 jquery 文档。

“原始元素不包含在同级元素中，当我们希望在 DOM 树的特定级别查找所有元素时，记住这一点很重要。”

参考：[http ://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T15:10:08.773

如果您想计算所有带有 class="item-sibling" 的 div，为什么不这样做

```
$('.item-sibling').length; 
```

这将计算所有5个div？

# php - LIKE 按钮的 AJAX 和 JS

> ID：10553971
> 
> 赞同：0
> 
> 时间：2012-05-11T15:05:23.477
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在尝试在我的网站上学习如何为 LIKE 按钮制作 AJAX 脚本。我有以下问题：

如果我要发送 1 个变量.... id.. 我这样做

```
data: "action=vote_up&id="+(this).attr("id")", 
```

如果我发送两个变量 id 和 id1 这在语法上是否正确？

```
 data: "action=vote_up&id="+(this).attr("id")&id1="+(this).attr("id1")", 
```

2) href 属性包含什么？php页面还是AJAX？

```
<a href =""><img scr="like.png"></a> 
```

3）首先运行.. php页面或AJAX。4) 我是否必须使用 jQuery 或纯 Javascript 来运行 AJAX

感谢您的时间和耐心。我最欣赏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:18:31.963

1）是的，您可以简单地将其理解为对脚本的 PHP-Get 请求，因此可以使用多个变量，就像 Adam 提到的那样。

2）为了向后兼容，您应该只链接到提供相同功能但不依赖 javascript 的 PHP/whatever-Script（并非每个人都启用了 js）。[在您的 javascript 中，您只需禁用默认点击操作（请参阅： http](http://api.jquery.com/event.preventDefault/) ://api.jquery.com/event.preventDefault/ ），否则您只想在启用 js 时允许类似功能，而不是链接到页面锚 '＃'。

3) 页面首先运行。它由服务器处理，然后发送到您的浏览器。在浏览器中收到的 javascript 将开始其操作。

4）你在jquery中使用的一切都是基于简单的javascript函数，但是jquery要舒服得多；）相当于jquery的ajax方法是XMLHttpRequest（[http://www.w3schools.com/xml/xml_http.asp](http://www.w3schools.com/xml/xml_http.asp)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:21:53.610

这是一个想法，希望它有所帮助。

如果`handle_vote.php`是负责处理赞成票的 URL，则必须做两件事：

1.  是`a href`带有投票查询字符串的 URL，您的数据就是这种情况。它必须为您的服务器应用程序生成。它将在没有 javascript 的情况下使用。

2.  你应该让你的事件来处理事件中的赞成票`a onclick`，发送ajax请求，并使用`preventDefault`jQuery函数来避免默认事件。在这种情况下，`a href`永远不会使用，js会抑制链接点击。

在您的 php 页面中，代码示例几乎是这样的：

```
<a class="like" href="handle_vote.php?action=vote_up&id=<?php echo $post_id; ?>"><img src="like.png"></a> 
```

并将其作为您的 jQuery 脚本：

```
$(function() {
    $('a.like').on('click', function(e) {
        e.preventDefault();
        $.get($(this).attr("href"));
    });
}); 
```

您可以随心所欲地个性化，这只是如何做到这一点的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:17:03.853

`<a href ="#"><img scr="like.png"></a>`在该链接上放置 onclick 事件，并发出 AJAX 请求以增加计数，成功响应更新计数单击按钮。你忘了一件事，你应该保存那个按钮的状态。因为一个用户可以访问您的网站并点击 1000 次。

# jsp - 检查是否在倒数第二个项目上

> ID：10553973
> 
> 赞同：0
> 
> 时间：2012-05-11T15:05:29.657
> 
> 标签：jsp, jstl

下面的代码检查最后一项，但我需要检查倒数第二项，我可以使用计数器来实现这一点，但有更好的方法吗？

```
<c:if test="${status.last}"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:19:01.020

一种方法：

```
//looping through a list called "myList"

<c:if test="${fn:length(myList)==(status.count+1)}"> 
```

请注意，此代码将在每次迭代时计算列表的大小；更好的方法是将大小放入变量中并将其与 status.count 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:45:21.747

JacobM 的想法是对的，但我认为更像是这样。

```
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<c:forEach var="current" varStatus="status" items="${list}">   
   <c:if test="${(fn:length(list) - 1) == status.count}" >
        The next to last item is ${current}
   </c:if> 
</c:forEach> 
```

或者

```
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<c:set var="nextToLast" value="${fn:length(list) - 1}" />
<c:forEach var="current" varStatus="status" items="${list}">   
   <c:if test="${nextToLast == status.count}" >
        The next to last item is ${current}
   </c:if> 
</c:forEach> 
```

# css - 嵌套的 CSS3 flexbox 不起作用

> ID：10553981
> 
> 赞同：10
> 
> 时间：2012-05-11T15:05:59.337
> 
> 标签：css, flexbox

flexbox可以嵌套吗？我在水平弹性盒中嵌套了一个水平弹性盒，在垂直弹性盒中嵌套了一个垂直弹性盒。只有水平中的水平在 chrome 中起作用，而在 Firefox 中则不起作用！

我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/NpkTL/1/](http://jsfiddle.net/NpkTL/1/)

但这里是html：

```
<div id="A">
    <div id="A1">A1</div>
    <div id="A2">
        <div id="A2-container">
            <div id="A2a">A2a</div>
            <div id="A2b">A2b</div>
        </div>
    </div>
</div>
<div id="B">
    <div id="B1">B1</div>
    <div id="B2">
        <div id="B2-container">
            <div id="B2a">B2a</div>
            <div id="B2b">B2b</div>
        </div>
    </div>
</div> 
```

和CSS：

```
* {
    margin: 0;
    padding: 0;
    font-family: Arial;        
}

#A {
    position: absolute;
    top: 0px;
    left: 0px;
    background: black;
    width: 50%;
    height: 100%;

    display: -moz-box;
    display: -webkit-box;    
    display: box;
    -moz-box-orient: horizontal;
    -webkit-box-orient: horizontal;
    box-orient: horizontal;
}

#A1 {
background: brown;
width: 100px;
height: 80%;   
}

#A2 {
background: orange;
height: 80%;
-moz-box-flex: 1;
-webkit-box-flex: 1;
box-flex: 1;    
}

#A2-container {
    display: -moz-box;
    display: -webkit-box;    
    display: box;
    -moz-box-orient: horizontal;
    -webkit-box-orient: horizontal;
    box-orient: horizontal;
    width: 100%;
    height: 100%;    
}

#A2a {
    background: red;
    height: 80%;   
    -moz-box-flex: 1;
    -webkit-box-flex: 1;
    box-flex: 1;    
}

#A2b {
    background: blue;
    width: 100px;
    height: 80%;
}

#B {
    position: absolute;
    top: 0px;
    right: 0px;
    background: gray;
    width: 50%;
    height: 100%;

    display: -moz-box;
    display: -webkit-box;    
    display: box;
    -moz-box-orient: vertical;
    -webkit-box-orient: vertical;
    box-orient: vertical;

}

#B1 {
    background: brown;
    width: 80%;
    height: 100px;   
}

#B2 {
    background: orange;
    width: 80%;
    -moz-box-flex: 1;
    -webkit-box-flex: 1;
    box-flex: 1;    
}

#B2-container {
    display: -moz-box;
    display: -webkit-box;    
    display: box;
    -moz-box-orient: vertical;
    -webkit-box-orient: vertical;
    box-orient: vertical;
    width: 100%;
    height: 100%;    
}

#B2a {
    background: red;
    width: 80%;   
    -moz-box-flex: 1;
    -webkit-box-flex: 1;
    box-flex: 1;    
}

#B2b {
    background: blue;
    width: 80%;
    height: 100px;
} 
```

#A在左边，#B在右边。#A 和#A2-container 是垂直弹性盒，#B 和#B2-container 是水平弹性盒。我为不同的 div 设置颜色并在每个级别（垂直宽度和垂直高度）缩小它们，以便更容易看到发生了什么。左边看起来不错（在 chrome 中！），但在右边，#B2a 应该垂直填充 #B2（橙色）。

我意识到在这个例子中，使用中间行/列为 3 的 flex 的 flexbox 会更容易，但我将内容动态加载到 #A2 的等效项中，它恰好也是一个 flexbox。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-27T20:51:50.257

弹性盒可以嵌套，但你必须摆脱你的定位。无论如何，你基本上不再需要它了。

Now the problem that remains as of today is z-stacking flexboxes in my experience. And It is also not straight forward to position flexbox items on the main axis differently from each other (for instance if I have a row and I want to align one child item on the left and one other on the right, I will have to play with margins and so on which can become painful)

Also the results can be quite inconsistent depending on the different browsers.

By any means, I encourage you to use this : [http://the-echoplex.net/flexyboxes/](http://the-echoplex.net/flexyboxes/) It helps a lot.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T17:01:33.420

Firefox 的 flex box 模型现在有很多问题。如果你有任何固定或绝对定位的盒子，它会坏掉；也没有宽度会将您的弹性框恢复为内联框。

# c# - 从字符串的一部分中删除空格

> ID：10553982
> 
> 赞同：0
> 
> 时间：2012-05-11T15:06:00.027
> 
> 标签：c#

我有文字：

```
SMS \r\n\t•    Map - locations of 
```

如何删除 • 和后面的第一个字符之间的所有空格？

上面的例子应该导致

```
SMS \r\n\t•Map - locations of 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:12:30.223

通过使用正则表达式，可以这样做：

```
var input = "SMS \r\n\t•    Map - locations of";

var regexPattern = @"(?<=•)\s+(?=\w)";
var cleanedInput = Regex.Replace(input, regexPattern, String.Empty); 
```

这将用空字符串替换 • 和第一个单词字符之间的任何空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:09:52.457

```
string s = "SMS \r\n\t•    Map - locations of";
string[] temp = s.Split('•');
s = temp[0]+temp[1].TrimStart(' '); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:19:07.250

您可以使用此正则表达式：

```
string toInsertBetween = string.Empty;
string toReplace = "SMS \r\n\t•    Map - locations of";
string res = Regex.Replace(toReplace, "•[ ]+([^ ])", "•" + toInsertBetween + "$1"); 
```

# powershell - Powershell 管道 - 从第一个 cmdlet 检索输出？

> ID：10553985
> 
> 赞同：2
> 
> 时间：2012-05-11T15:06:19.040
> 
> 标签：powershell

我在 Powershell 中尝试了一些事情，但我无法实现的是以下（在 Exchange 中）：

```
Get-User | Get-MailboxStatistics 
```

但在输出中，我想要cmdlet 的`"Get-User"`一些字段/输出和 cmdlet 的一些字段/输出`"Get-MailboxStatistics"`。

如果有人有答案，我已经在网上搜索过，但没有成功，因为我很难用几句话来解释它。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:17:27.517

从执行一个 cmdlet 开始，将结果通过管道传输到`Foreach-Object`然后保存对当前对象 ($user) 的引用，现在执行第二个命令并将其保存在变量中。使用两个对象的属性创建新对象。

您还需要过滤拥有邮箱的用户，使用 RecipientTypeDetails 参数。

```
$users = Get-User -RecipientTypeDetails UserMailox 
$users | Foreach-Object{

    $user = $_
    $stats = Get-MailboxStatistics $user

    New-Object -TypeName PSObject -Property @{
        FirstName = $user.FirstName
        LastName = $user.LastName
        MailboxSize = $stats.TotalItemSize
        ItemCount =  $stats.ItemCount   
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:12:40.843

我不知道这是否是最佳或最佳解决方案，但您当然可以通过将实际用户保存到 foreach 中的变量来做到这一点：

```
$users = Get-User 
$users | % { $user = $_; Get-MailboxStatistics $_ | % 
    { 
        "User name:{0} - some mailbox statistics: {1}" -f $user.SomePropertyOfUser, $_.SomePropertyOfMailbox
    } 
} 
```

仅在使用 Exchange cmdlet 时才需要第一步（将用户保存到单独的变量中） - 如此[处](http://www.mikepfeiffer.net/2010/02/exchange-management-shell-error-pipelines-cannot-be-executed-concurrently/)所述，您不能在 foreach 中嵌套 Exchange cmdlet...

> 此错误是通过 PowerShell 远程处理执行 Exchange cmdlet 时引起的，它不支持同时运行多个管道。当您将 cmdlet 的输出通过管道传输到 foreach-object 时，您可能会看到此错误，然后在其脚本块中运行另一个 cmdlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:03:25.660

```
$users = Get-User  -RecipientTypeDetails UserMailbox
$users | Foreach-Object{ $user = $_; $stats = Get-MailboxStatistics $user.DistinguishedName; New-Object -TypeName PSObject -Property @{FirstName = $user.FirstName; LastName = $user.LastName;MailboxSize = $stats.TotalItemSize;ItemCount =  $stats.ItemCount  }} 
```

我不得不在输入中添加一个特定字段，`Get-MailboxStatistics`因为远程，我有：

```
The following Error happen when opening the remote Runspace: System.Management.Automation.RemoteException: Cannot process argument transformation on parameter 'Identity'. Cannot convert the "gsx-ms.com/Users/userName1" value of type "Deserialized.Microsoft.Exchange.Data.Directory.Management.User" to type "Microsoft.Exchange.Configuration.Tasks.GeneralMailboxOrMailUserIdParameter". 
```

无论如何，谢谢@Jumbo 和@Shay-levy

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T18:45:03.393

```
Get-ADUser -identity ADACCOUNT | Select-object @{Name="Identity";Expression={$_.SamAccountName}} | Get-MailboxStatistics 
```

由于某种原因，Identity 参数不按值输入管道，仅按属性名称输入。因此，为了使其正常工作，您可以更改数据管道的名称以匹配 Identity 的参数名称。然后 Get-MailboxStatistics 终于知道如何处理您通过管道提供的数据。

# macos - MAC OS X 中 gcc 4.3 或更高版本的 OpenCV 编译错误

> ID：10553994
> 
> 赞同：0
> 
> 时间：2012-05-11T15:06:44.603
> 
> 标签：macos, opencv

我想在 OpenCV 中使用 BRIEF 和 ORB，为了在 OpenCV 中使用 SSE4.2（加速匹配），我们需要在 gcc 4.3 或更高版本并启用 SSE4.2 选项的情况下编译 OpenCV。

我用 gcc4.2.1 编译 OpenCV 没有问题，这是我的 Mac OS X 10.6.8 中的默认版本。

然后，我尝试使用 Macports 安装 gcc4.3、4.4、4.5、4.6、4.7、4.8 并将 gcc 切换到新的。我首先尝试使用默认设置（如 OpenCV 网站中的说明）安装 OpenCV。但是我无法像使用 gcc4.2.1 时那样编译代码。请注意，gcc4.2.1 没有问题。gcc4.3 或更高版本会出现问题。

您能否给我一个建议，问题出在哪里？似乎错误来自编译器兼容性。

一些错误是：

```
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm: In function 'void cvDestroyAllWindows()':
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm:198:21: error: expected ';' before 'in'
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm:198:21: error: 'in' was not declared in this scope
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm:198:24: error: expected ';' before 'list'

In file included from /opt/local/include/libavformat/avformat.h:42:0,
                 from OpenCV-2.4.0/modules/highgui/src/ffmpeg_codecs.hpp:78,
                 from OpenCV-2.4.0/modules/highgui/src/cap_ffmpeg_impl.hpp:56,
                 from OpenCV-2.4.0/modules/highgui/src/cap_ffmpeg.cpp:45:
/opt/local/include/libavcodec/avcodec.h:554:1: internal compiler error: Segmentation fault
Please submit a full bug report, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:14:07.953

问题是`for(NSString *key in list)`window_cocoa.mm 是一个 Objective-C 2 构造，并被编译为 Objective-C++

来自 GNU 的 gcc 不支持版本 2 语法，因此无法编译它。Apple 的 gcc4.2 包含 Apple 扩展，包括 Objective C 2，但纯 gcc 不包含。

您必须尝试使用​​ clang 编译器。

# sql - 在 SQL Server 2008 R2 中按组的最小值分组

> ID：10553995
> 
> 赞同：1
> 
> 时间：2012-05-11T15:06:50.897
> 
> 标签：sql, sql-server-2008-r2, grouping

我在 sql 中运行这个命令

```
select ID, TASK, CreatedBy,CreateDate
from John Results group by ID, TASK, CreatedBy, CreateDate 
```

这是返回这个

```
20  text    user1   2008-11-07 19:10:47.230
20  text    user2   2008-11-07 17:45:17.993
24  text    user3   2008-11-07 18:58:08.727
25  text    user4   2008-11-07 20:19:01.293
36  text    user5   2008-11-10 21:31:23.610
37  text    user6   2008-11-10 21:34:09.597
38  text    user7   2008-11-10 21:35:19.660 
```

有两个 ID 是 20，我试图得到日期最短的结果，所以在这个例子中它是

```
20  text    user2   2008-11-07 17:45:17.993 
```

我将如何为所有重复的 ID 执行此
操作非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:21:52.980

```
select ID, TASK, FIRST(CreatedBy),MIN(CreateDate) as 'LowestDate'
from John Results group by ID, TASK, CreatedBy, CreateDate 
having CreateDate = LowestDate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:43:05.270

```
 WITH mycte
    (id, createdate, createdby, rownum)
    AS
    (
     SELECT id, createdate,createdby,  ROW_NUMBER() OVER (PARTITION BY id ORDER BY createdate  ASC) AS ROWNUM
     FROM johnresults
    )

    SELECT j.id, j.task, mycte.createdby, mycte.createdate 
    FROM
    johnresults j
    inner join mycte ON j.id = mycte.id and mycte.rownum = 1
    GROUP BY j.id, j.task, mycte.createdby, mycte.createdate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:20:15.623

```
select ID, TASK, CreatedBy, min(CreateDate) as 'LowestDate'
from John Results 
group by ID, TASK, CreatedBy 
```

# xml - 刷新内容而不更改页面

> ID：10553996
> 
> 赞同：0
> 
> 时间：2012-05-11T15:06:54.283
> 
> 标签：xml, ajax, xslt

我正在创建一个小型商业网站，我只想更改内容，并保留页眉/页脚。我的目标是在不更改 URL 的情况下更改内容。

我最初打算使用 AJAX，但我意识到每个页面都有不同的布局，所以我不知道如何配合这个。如果我要使用 AJAX，我会将所有数据存储在 XML 中。在这种情况下，我是否必须为每个页面创建一个新的 XSLT？那么有没有更好的解决方案呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:11:03.967

2种主要方式：

**1）**您可以在所有页面中包含 html 和一个通用的 js 文件。这与您最初的选择是一致的。

您的功能可能是这样的（假设您使用我推荐的 jquery）：

```
// that's in the js file
function addHeaderAndFooter() {   
    var html = '<div id=myheader>header stuff</div>';
    $(html).prependTo('body');
} 
```

然后你会这样称呼它：

```
// that's in each html file
$(window).load(function(){
    addHeaderAndFooter(); // that's your function defined in your common js
}); 
```

**2)**服务器端生成系统：例如，使用 PHP 很容易在所有页面中包含常量元素。事实上，很少有商业网站能够真正避免使用服务器端生成。

XML 和 XSLT 的使用是可能的，但现在已经不那么频繁了，因为它很重而且对人类不友好。

如果您应该使用解决方案 1 或 2，很难说没有更多要求，但对于那些不真正精通核心开发并假设您的网站将有超过 3 或 4 个页面的人，我建议使用类似 PHP 的东西：它更多古典。

# javascript - 如何从外部 javascript 设置 HTML 元素的值

> ID：10553998
> 
> 赞同：0
> 
> 时间：2012-05-11T15:07:03.557
> 
> 标签：javascript

我正在使用具有设置HTML 标签属性的`myjs.js`功能的外部 javascript 文件（例如：）。`setval()``innerText`

我有 PHP 页面，`<lable id="abc"></lable>`我已经包含`myjs.js`在`<head>`部分中。`myjs.js`包含在`<head>`另一个 PHP 文件的部分中，我`setval()`从这个文件中调用，所以当它运行时，它必须`innerText`在第一个 PHP 文件中设置标签。

有没有可能实现？非常感谢任何建议。我希望我把问题说清楚了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:11:25.667

理想情况下，将您的包含移动`myjs.js`到页面*底部*（就在结束`</body>`标记之前或之后）。那么它只是：

```
document.getElementById("abc").innerText = /* ...the text */; 
```

[实例](http://jsbin.com/itokes)| [资源](http://jsbin.com/itokes/edit)

如果由于某种原因无法移动包含，您可以将上述代码放在一个函数中，例如：

```
function updateTheLabel() {
    document.getElementById("abc").innerText = /* ...the text */;
} 
```

...然后将此脚本放在标签之后：

```
<label id="abc"></label>
<script>
updateTheLabel();
</script> 
```

[实例](http://jsbin.com/itokes/2)| [资源](http://jsbin.com/itokes/2/edit)

如果您不想这样做（而且有点难看，将脚本标签混合到您的标记中），您可以等待页面准备就绪时发生的某种事件。搜索“javascript dom ready event”，你会看到**很多**关于这个的讨论，以及很多解决方案。如果您使用库[jQuery](http://jquery.com)、[Prototype](http://prototypejs.org)或[任何其他](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)库，那么库将为您提供某些东西的可能性很高（但不是 100%）。您可能不想等待该`window` `load`事件，因为它在页面加载过程中很晚才触发**（**在加载所有外部资源 - 图像等 - 之后）。

（如果不知道您正在使用什么库（如果有的话），就无法做上述的活生生的例子；但同样，那里有几十个“dom ready”解决方案。）

或者我想最坏的情况，你可以投票，在`myjs.js`：

```
function updateTheLabel() {
    var elm = document.getElementById("abc");
    if (elm) {
        elm.innerText = /* ...the text */;
    }
    else {
        setTimeout(updateTheLabel, 50);
    }
}
setTimeout(updateTheLabel, 0); 
```

[实例](http://jsbin.com/itokes/3)| [资源](http://jsbin.com/itokes/3/edit)