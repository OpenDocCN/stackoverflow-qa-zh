# StackOverflow 问答 10522000-10522999

# apache - 使 Ubuntu 上的 ColdFusion 不区分大小写

> ID：10522005
> 
> 赞同：5
> 
> 时间：2012-05-09T18:31:02.250
> 
> 标签：apache, ubuntu, coldfusion, coldfusion-9, case-sensitive

我在 Ubuntu 12.04 机器上安装了 apache2 和 ColdFusion 9。我已经在 Apache 中使用 CheckSpelling mod 来禁用区分大小写的 URL 和 Apache 负责的其他路径。

现在，请记住，我正在使用大约 4GB 的遗留代码（价值大约 6 年），而且很少有符合惯例的代码。我之前的编码人员并不关心区分大小写，而是将应用程序托管在 Windows Box 上。在大多数情况下，ColdFusion 的行为与`<cfinclude>`and `CreateObject`，但看起来`<cfinvoke>`（在代码库中经常使用）仍然区分大小写。

现在，我尝试了将代码移动到 vfat 分区的方法，但我遇到了一大堆文件名编码问题（我们与外国公司打交道，得到很多特殊字符）。删除和/或重命名文件会很麻烦，因为大多数文件也在 MySQL 数据库中被引用，并且也必须在那里进行修改。所以重新编码有点像一场噩梦。

所以，我很好奇 ColdFusion 在 Linux 上运行时是否有任何特殊标志以不区分大小写，或者是否有另一种方法可以使这一切结合在一起？

**编辑**

对不起，我弄错了。`cfinvoke`似乎工作正常。我哽咽着`cfobject`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T19:38:25.087

我做了一些研究，这就是我想出的......

[创建自定义标签 (help.adobe.com)](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0b2e1-7fff.html)

> 注意：**虽然 ColdFusion 页面中的标签名称不区分大小写**，但自定义标签文件名在 UNIX 上必须小写。

[cfinvoke 文档 (help.adobe.com)](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7e0a.html)

> 在 UNIX 系统上，ColdFusion 首先搜索名称**与指定组件名称匹配的文件，但都是小写。**如果没有找到该文件，它会查找与组件名称完全匹配的文件名，并具有相同的字符大小写。

由于`<cfinvoke>`是标准标签，因此标签本身不区分大小写。但是，听起来所有组件参数都`<cfinvoke>`需要有一个小写的文件名，以便使用不规则大小写的调用能够始终如一地成功。我知道你说重构很困难，但这是我想出的：

如果您有一个专门保存组件的文件夹，那么在该文件夹中运行一个 shell 脚本将它们全部重命名为小写（如果您不想每次都被询问是否确定，请删除 -i ):

```
for filename in *.cfc; do
  lowercase =`echo $filename | tr '[:upper:]' '[:lower:]'`
  mv -i $filename $lowercase
done 
```

如果您没有将组件全部放在同一个文件夹中，请从顶级目录尝试。

让我知道你是否能够试一试！

# html - 解析 HTML NSRegularExpression

> ID：10522008
> 
> 赞同：0
> 
> 时间：2012-05-09T18:31:20.797
> 
> 标签：html, objective-c, ios, regex, nsregularexpression

我正在尝试使用 NSRegularExpressions 解析 HTML 页面。该页面是此 html 代码的重复：

```
<div class="fact" id="fact66">STRING THAT I WANT</div> <div class="vote">
<a href="index.php?p=detail_fact&fact=106">#106</a> &nbsp; &nbsp; 
<span id="p106">246080 / 8.59  </span> &nbsp; &nbsp;
<span id="f106" class="vote2">
<a href="#" onclick="xajax_voter(106,3); return false;">(+++)</a> 
<a href="#" onclick="xajax_voter(106,2); return false;">(++)</a>  
<a href="#" onclick="xajax_voter(106,1); return false;">(+)</a> 
<a href="#" onclick="xajax_berk(106); return false;">(-)</a></span>
<span id="ve106"></span>
</div> 
```

所以，我想得到 div 之间的字符串

```
 <div class="fact" id="fact66">STRING THAT I WANT</div> 
```

所以我做了一个看起来像这样的正则表达式

```
<div class="fact" id="fact[0-9].*\">(.*)</div> 
```

现在，在我的代码中，我使用它来实现它：

```
 NSString *htmlString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.myurl.com"] encoding:NSASCIIStringEncoding error:nil];
NSRegularExpression* myRegex = [[NSRegularExpression alloc] initWithPattern:@"<div class=\"fact\" id=\"fact[0-9].*\">(.*)</div>\n" options:0 error:nil];
    [myRegex enumerateMatchesInString:htmlString options:0 range:NSMakeRange(0, [htmlString length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop) {
        NSRange range = [match rangeAtIndex:1];
        NSString *string =[htmlString substringWithRange:range];
        NSLog(string);
    }]; 
```

但它什么也没返回...我在 Java 和 PHP 中测试了我的正则表达式，效果很好，我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:40:26.783

尝试使用这个正则表达式：

```
 @"<div class=\"fact\" id=\"fact[0-9]*\">([^<]*)</div>" 
```

正则表达式：

```
fact[0-9].* 
```

意思是：fact 后面跟一个 0 到 9 之间的数字，后面跟任意重复任意次数的字符。

我还建议使用：

```
([^<]*) 
```

代替

```
(.*) 
```

在两个 div 之间进行匹配以处理正则表达式贪婪，或者：

```
(.*?) 
```

(? 将使正则表达式不贪婪，因此它在 . 的第一个实例处停止`</div>`。

# ios - 修改 Apple 的 EADemo 项目以显示字节

> ID：10522020
> 
> 赞同：0
> 
> 时间：2012-05-09T18:32:17.647
> 
> 标签：ios, bluetooth, external-accessory, mfi

我试图了解 EADemo 的工作原理以及外部附件框架的工作原理。EADemo 可在此处获得：

```
http://developer.apple.com/library/ios/#samplecode/EADemo/Introduction/Intro.html 
```

我要做的就是修改 Apple 的 EADemo 项目以显示它接收到的字节（假设它们是 ASCII 类型的字符），而不是仅仅计算它接收到的字节数。所以我改变了 EASessionTransferViewController.m...从：

```
- (void)_sessionDataReceived:(NSNotification *)notification
{
    EADSessionController *sessionController = (EADSessionController *)[notification object];
    uint32_t bytesAvailable = 0;

    while ((bytesAvailable = [sessionController readBytesAvailable]) > 0) {
        NSData *data = [sessionController readData:bytesAvailable];
        if (data) {
            _totalBytesRead += bytesAvailable;
        }
    }

    [_receivedBytesLabel setText:[NSString stringWithFormat:@"Bytes Received from Session: %d", _totalBytesRead]];
}

@end 
```

至...

```
- (void)_sessionDataReceived:(NSNotification *)notification
{
    EADSessionController *sessionController = (EADSessionController *)[notification object];
    uint32_t bytesAvailable = 0;

    while ((bytesAvailable = [sessionController readBytesAvailable]) > 0) {
        NSData *data = [sessionController readData:bytesAvailable];
        if (data) {
            _totalBytesRead += bytesAvailable;
            NSString *asciiStringFromData = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
        }
    }
    [_receivedBytesLabel setText:[NSString stringWithFormat:@"ASCII bytes read: %@", asciiStringFromData]];
}

@end 
```

但这根本行不通。上次我试了，什么都没有。它连接到一个蓝牙板，该板只是回显接收到的 ASCII 字符或字符串。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-21T21:16:56.210

您应该尝试使用`NSUTF8StringEncoding`编码而不是`NSASCIIStringEncoding`.

这是一个例子：

```
NSString* asciiStringFromData = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

# css - IE9 输入类型=提交渲染边框底部错误。在 IE7 和 8 中很好

> ID：10522021
> 
> 赞同：0
> 
> 时间：2012-05-09T18:32:28.773
> 
> 标签：css, input, internet-explorer-9, submit, border

我试图只有边框底部和所有其他边为 0。这似乎导致 IE9 根据文本颜色呈现边框底部颜色。在所有其他浏览器以及以前版本的 IE9 中都可以正常工作。

```
#submit, #searchsubmit {
    background: #2B4C7E;
    color: #DCE0E6;
    padding: 0.5em 1em;
    margin: 0 0 0.5em;
    border: 0;
    border-bottom: 0.5em solid #0E2952;
} 
```

如果我 delete ，border-bottom 会在 IE9 中正确呈现`border: 0;`，但会显示其他边框。

[http://jsfiddle.net/56exW/](http://jsfiddle.net/56exW/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:43:06.930

试试这个：

```
border-style: solid;
border-color:#0E2952;
border-width:0 0 0.5em 0; 
```

# java - 将 JTextArea 内容写入文件

> ID：10522022
> 
> 赞同：4
> 
> 时间：2012-05-09T18:32:30.133
> 
> 标签：java, swing, file-io, jtextarea

我在 Java Swing 中有一个 JTextArea 和一个提交按钮。需要将 textarea 的内容写入带有换行符的文件中。我得到了输出，它被写为文件中的一个字符串。

```
try {
    BufferedWriter fileOut = new BufferedWriter(new FileWriter("filename.txt")); 
    String myString1 =jTextArea1.getText();
    String myString2 = myString1.replace("\r", "\n");

    System.out.println(myString2);

    fileOut.write(myString2);
    fileOut.close();
} catch (IOException ioe) {
    ioe.printStackTrace();
} 
```

请给我一些建议

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T18:41:04.007

为什么不使用`JTextArea`' 内置[`write`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)函数？

```
JTextArea area = ...
try (BufferedWriter fileOut = new BufferedWriter(new FileWriter(yourFile))) {
    area.write(fileOut);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:37:34.527

将所有 \r 和 \n 替换为：

```
System.getProperty("line.separator") 
```

这将使您的代码独立于平台，并在必要时将新行写入文件。

编辑：因为你使用 BufferedWriter，你也可以使用[newLine() 方法](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html#newLine%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:43:10.737

你为什么`\r`换成`\n`?

行分隔符应该是`"\r\n"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T02:02:52.107

这就是我想到的：

```
public void actionPerformed(ActionEvent event) {
BufferedWriter writer;
        try {
            writer = new BufferedWriter(new FileWriter("SimpleText.txt",
                    false));
            text.write(writer);
            writer.close();
            JOptionPane.showMessageDialog(null, "File has been saved","File Saved",JOptionPane.INFORMATION_MESSAGE);
            // true for rewrite, false for override

        } catch (IOException e) {
            JOptionPane.showMessageDialog(null, "Error Occured");
            e.printStackTrace();
        }
    } 
```

希望这可以帮助

# performance - 使用 C# 中的任务并行库对并行操作进行计时

> ID：10522025
> 
> 赞同：0
> 
> 时间：2012-05-09T18:32:55.600
> 
> 标签：performance, c#-4.0, task-parallel-library, benchmarking

我正在进行一些实验，对它们进行计时并比较时间以找到最佳“算法”。出现的问题是并行运行任务是否会使实验的相对运行时间错误，以及我是否可以通过顺序运行它们获得更具代表性的结果。这是代码的（简化）版本：

```
public static void RunExperient(IEnumerable<Action> experiments)
    {
        Parallel.ForEach(experiments, experiment =>
        {
            var sw = Stopwatch.StartNew(); //line 1
            experiment();                  //line 2   
            sw.Stop();                     //line 3
            Console.WriteLine(@"Time was {0}", sw.ElapsedMilliseconds);
        });
    } 
```

我的问题是关于“幕后”发生的事情：

1.  当一个任务开始时，操作系统或框架是否有可能在其执行期间暂停任务并继续稍后使实验的运行时间完全错误？

2.  通过按顺序运行实验，我会得到更具代表性的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:35:24.253

这取决于您正在运行的机器以及实验的作用，但通常答案是肯定的，它们可能会相互影响。主要是通过资源匮乏。这是一个例子：

```
public class Piggy { 
   public void GreedyExperiment() { 
       Thread.Priority = ThreadPriority.Highest;
       for (var i=0;i<1000000000;i++) {
           var j = Math.Sqrt(i / 5);
       }
   }
} 
```

这将在高优先级线程上进行紧密循环，基本上会消耗一个处理器，直到完成。如果您的机器中只有一个处理器，而 TPL 决定在其上安排两个实验，那么另一个处理器将缺乏 CPU 时间。

# c++ - c ++ OpenMP关键：“单向”锁定？

> ID：10522026
> 
> 赞同：3
> 
> 时间：2012-05-09T18:32:58.380
> 
> 标签：c++, parallel-processing, critical-section, openmp

考虑以下串行函数。当我并行化我的代码时，每个线程都会从并行区域内调用这个函数（未显示）。我正在尝试使这个线程安全*且*高效（快速）。

```
float get_stored_value__or__calculate_if_does_not_yet_exist( int A )
{    
    static std::map<int, float> my_map;

    std::map::iterator it_find = my_map.find(A);  //many threads do this often.

    bool found_A =   it_find != my_map.end();

    if (found_A)
    {
        return it_find->second;
    } 
    else
    {
      float result_for_A = calculate_value(A);  //should only be done once, really.
      my_map[A] = result_for_A;
      return result_for_A;
    }    
} 
```

几乎每次调用此函数时，线程都会成功“找到”其“A”的存储值（无论它是什么）。每隔一段时间，当调用“新 A”时，必须计算和存储一个值。

那么我应该把它放在`#pragma omp critical`哪里？

虽然很容易，但是将所有这些都放在一个*非常低效*`#pragma omp critical`的地方，因为每个线程都会不断地这样做，而且它通常是只读的情况。

有没有办法实现“单向”`critical`或“单向”`lock`例程？也就是说，上述涉及迭代器的操作应该只`my_map`在`else`语句中写入时“锁定”。但是多个线程应该能够`.find`同时执行调用。

我希望我说得通。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:56:10.597

根据[Stack Overflow 上的这个链接，](https://stackoverflow.com/questions/4343220/does-insertion-to-stl-map-invalidate-other-existing-iterator)插入 an`std::map`不会使迭代器无效。`end()`迭代器 也是如此。[这是一个支持链接。](https://stackoverflow.com/questions/1432216/is-end-required-to-be-constant-in-an-stl-map-set)

不幸的是，如果您不使用关键部分，插入可能会发生多次。此外，由于您的`calculate_value`例程可能在计算上很昂贵，因此您必须锁定以避免此`else`子句以相同的值操作两次，`A`然后插入两次。

这是一个示例函数，您可以在其中复制此不正确的多次插入：

```
void testFunc(std::map<int,float> &theMap, int i)
{
    std::map<int,float>::iterator ite = theMap.find(i);

    if(ite == theMap.end())
    {
         theMap[i] = 3.14 * i * i;
     }
} 
```

然后像这样调用：

```
std::map<int,float> myMap;

int i;
#pragma omp parallel for
for(i=1;i<=100000;++i)
{
    testFunc(myMap,i % 100);
}

if(myMap.size() != 100)
{
    std::cout << "Problem!" << std::endl;
} 
```

编辑：编辑以纠正早期版本中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:01:40.637

OpenMP 是用于自动循环并行化的编译器“工具”，而不是线程通信或同步库；所以它没有复杂的互斥锁，比如读/写互斥锁：在写入时获取锁，但在读取时获取锁。

这是一个[实现示例](https://stackoverflow.com/q/989795/11343)。

无论如何，克里斯 A. 的回答比我的要好 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:55:34.100

虽然@ChrisA 的答案可能会解决您的问题，但我会在此处留下我的答案，以防任何未来的搜索者发现它有用。

如果你愿意，你可以给[`#pragma omp critical`](https://computing.llnl.gov/tutorials/openMP/#CRITICAL)部分一个`name`. 然后，具有该名称的任何部分都被视为相同的关键部分。如果这是您想要做的，您可以轻松地使您的方法的一小部分变得至关重要。

```
#pragma omp critical map_protect
{
    std::map::iterator it_find = my_map.find(A);  //many threads do this often.

    bool found_A =   it_find != my_map.end();
} 
```

...

```
#pragma omp critical map_protect
{
    float result_for_A = calculate_value(A);  //should only be done once, really.
    my_map[A] = result_for_A;
} 
```

[`#pragma omp atomic`](https://computing.llnl.gov/tutorials/openMP/#ATOMIC)and[`#pragma omp flush`](https://computing.llnl.gov/tutorials/openMP/#FLUSH)指令也可能有用。

`atomic`导致对内存位置（指令前面的表达式中的左值）的写入始终是原子的。

`flush`确保预期对所有线程可用的任何内存实际上都写入所有线程，而不是存储在处理器缓存中并且在它应该在的地方不可用。

# java - 如何通过单击右上角的“x”来关闭框架？

> ID：10522030
> 
> 赞同：3
> 
> 时间：2012-05-09T18:33:19.797
> 
> 标签：java, awt, frame

在 Java 中有一个框架：

```
 Frame AFrame = new Frame("Frame with components"); 
```

默认情况下，框架右上角的“x”关闭按钮不起作用。我该如何设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T18:36:23.773

您应该使用[JFrame](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html)然后

```
JFrame AFrame = new JFrame("Frame with components");
AFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

但是，如果您坚持使用 Frame，则添加一个侦听器：

```
AFrame.addWindowListener(new WindowAdapter() {
    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }
}); 
```

# ruby-on-rails - Twitter Bootstrap 使用 RoR 3.2.2 / Firefox 12.0 解析警告

> ID：10522032
> 
> 赞同：0
> 
> 时间：2012-05-09T18:33:20.753
> 
> 标签：ruby-on-rails, twitter-bootstrap

我通过 Twitter-Bootstrap-Rails gem 为我们的 RoR 3.2.2 应用程序添加了 Twitter Boostrap 支持。它似乎工作正常，但是当在我们的某些（不是全部）OSX Lion 开发盒上使用 FireFox 12.0 浏览我们的应用程序时，当应用程序页面加载时，我们会收到类似以下警告的*负载*（超过 FF 日志可以容纳） ：

```
Error in parsing value for 'filter'. Declaration dropped.

filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ee5f5b', endC...

bootst...?body=1 (line 3081, col 17) 
```

指的是

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ee5f5b', endColorstr='#bd362f', GradientType=0); 
```

在资产/bootstrap_and_overrides.css 中。

这些警告不会出现在 OSX 上的 Chrome 和 Safari 上，也不会出现在 Windows 7 上的 IE9、FireFox 7.01 或 FireFox 12 上。所以这似乎是 OSX 上的 FireFox 12 的问题，但我不能确定。FF 似乎正在尝试在此处加载特定于 IE 的样式属性。

感谢您的任何意见 - 迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:47:13.977

我总是在条件注释中放置或导入特定于 IE 的样式；对于这些类型的错误。

这就是为什么我们在网站上有“此站点最适合在 Chrome 下运行”或 FF 或 IE 等横幅的原因。:-)

# hash - 在使用 SHA-1 算法进行电子签名时，它如何影响 RSA 密钥的长度和发送文档的大小？

> ID：10522042
> 
> 赞同：0
> 
> 时间：2012-05-09T18:33:46.223
> 
> 标签：hash, cryptography

在使用 SHA-1 算法进行电子签名时，它如何影响 RSA 密钥的长度和发送文档的大小？

我使用 CrypTool 来检查它，但即使是大文档，它的时间也是一样的，我不知道是 CrypTool 有问题还是我使用的文档太小或类似的东西？

# ios - iOS 设备的 ARM __clear_cache 等效项

> ID：10522043
> 
> 赞同：3
> 
> 时间：2012-05-09T18:33:46.443
> 
> 标签：ios, arm

我正在将一个库移植到 iPhone，它会调用`__clear_cache`. 一项小小的研究挖掘了它的作用的这个[很好的解释](https://web.archive.org/web/20120314112445/http://blogs.arm.com/software-enablement/141-caches-and-self-modifying-code/)。

文章列出了适用于 Linux、Windows 甚至 Android 的库函数。我不认为 iOS 设备有等价物吗？或者我可以实施的其他一些解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:45:26.477

由于 iOS 是一个基于 *NIX 的平台，您可以使用苹果版本的 GCC (LLVM-GCC 4.2) 编译代码，您应该能够对 进行函数调用`__clear_cache()`，如下所示：

```
extern void __clear_cache(char *beg, char *end);

__clear_cache(beg, end); 
```

请注意，`Apple LLVM Compiler 3.1`由于某些奇怪的原因，这不适用于 GCC，仅适用于 GCC。

# crystal-reports - Display only one distinct column for multiple common rows in crystal report

> ID：10522045
> 
> 赞同：1
> 
> 时间：2012-05-09T18:33:50.207
> 
> 标签：crystal-reports, crystal-reports-2008

I have a Datatable with the following format

```
srikanth 1200 Watch   
srikanth 1300 Bag   
srikanth 1400 Shirt
```

I want my report in following format

```
srikanth 1200 Watch
         1300 Bag
         1400 Shirt
```

Basically, I want to trim the repeating column. Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:02:56.280

Another option is to group by the first column, right click the group heading and select 'section expert'. In here you can set the section to 'Underlay following sections' which will drop down the group header to the first row.

From:

```
srikanth
         1200 Watch   
         1300 Bag   
         1400 Shirt 
```

To:

```
srikanth 1200 Watch   
         1300 Bag   
         1400 Shirt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:53:33.850

Make sure the report is sorted by the first column, then right-click on the column field in your report -> "Format Field" -> "Common" tab -> Check the "Suppress If Duplicated" checkbox.

![enter image description here](../Images/f5f643b62ea0b6e83c51bd83966f2f83.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T05:33:34.550

Goto Insert Menu--->Group option,in that select the first column(In this example Srikanth).After Grouping,then right click on group heading and select 'Format Section'. Here you check 'Underlay following sections' option,then click on OK.

From:

srikanth 1200 Watch
1300 Bag ------>After Grouping 1400 Shirt To:

srikanth 1200 Watch
1300 Bag ------>after formated 1400 Shirt

# asp.net-mvc-3 - 你可以在@Helper 中使用@Helper 吗？

> ID：10522049
> 
> 赞同：3
> 
> 时间：2012-05-09T18:34:19.953
> 
> 标签：asp.net-mvc-3, razor, razor-declarative-helpers

我不确定这是可能的。

`@Helper`我在一个视图和其他视图中有一堆's：

```
@helper ViewHelper1()
{
   ...
}
@helper ViewHelper2()
{
   ...
}
etc. 
```

我有在视图和其他视图中使用的重复代码：

```
@if (!(Model.Entity == Model.Enum.One))
    {
        <td>
            @ViewHelper1()
        </td>
    }
    else
    { 
        <td>
            @ViewHelper1()
        </td>
        <td>
            @ViewHelper1()
        </td>
    } 
```

实际`@ViewHelper1`有更复杂的代码，但这并不重要（我认为）。

好吧，由于每个视图都有许多`@Helper`'s （30+ 个视图，每个 10-15`@Helper`个）并且`<table>`结构是相同的，我想知道如何去创建一个封装结构然后传递视图的`@Helper`in .`App_Code``<td>``@Helper`

说：

```
@helper Table(...) 
    {
        ...
    } 
```

或者这是否可能，然后在视图中调用它，例如：

```
@Table(HelperView1) 
```

如果是我只需要语法方面的帮助。

一如既往，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:58:51.930

生成的剃刀助手只是返回类型的函数`HelperResult`。您可以`HelperResult`在主助手中拥有作为参数返回的委托，并在适当的位置调用它们。

一个小样本可以帮助您入门：

```
@helper View1()
{
    <h1>View1</h1>
}

@helper View2()
{
    <h2>View2</h2>
}

@helper Table(Func<HelperResult> viewHelper)
{
    <text>Reuslt of viewHelper</text>
    @viewHelper()
}

@Table(View1)
@Table(View2) 
```

生成的输出：

```
Reuslt of viewHelper
<h1>View1</h1>

Reuslt of viewHelper
<h2>View2</h2> 
```

# mysql - mongodb中的联合查询等价物

> ID：10522050
> 
> 赞同：2
> 
> 时间：2012-05-09T18:34:20.140
> 
> 标签：mysql, mongodb, blogs, jointable

好的，我了解 NoSQL 数据库都是关于不使用关节进行查询的，但我根本无法理解某些概念。例如，假设我想要拥有多个作者和与作者相关的文章的博客，在 MySQL 中我会创建用户表：

```
Users: id, name, surname, nickname, password...
Articles: id, user_id, title, content, date, tags... 
```

但我不确定在 MongoDB 中正确设置它的最佳方法是什么。我应该说：

```
db.users.insert({
    id:1,
    name: "Author name",
    ...
    articles: [{id:1, article:1, title:"Article title", ...}, {...}, ...]
}); 
```

我应该做这样的事情吗？：

```
db.articles.insert(
    {
    ...
    article related stuff
    ...
    user related stuff: {...}
); 
```

或者也许我应该有单独的文章数据库和单独的用户数据库？

如果我的主页将显示 10 篇最新文章摘录以及作者数据，那么在 MySQL 中，我只需执行联合查询以从作者表中获取作者昵称，以及从文章表中获取标题和摘录。

我真的不确定如何在面向文档的数据库中表示我的数据。也许我应该在他的每篇文章中存储作者数据，但是如果作者更改了他的信息，则该作者的所有文章都需要更新。

在 MongoDB 中创建单独的文档对我来说似乎是合乎逻辑的。一个将保存所有作者文档，一个将保存所有文章文档，但这又需要某种联合操作，将获取前 10 篇文章并从作者文档中获取作者数据。

好的，也许是一些 map reduce 操作，但我不确定它会是什么样子。

感谢您对我的这个问题的想法和建议。谢谢！

[编辑]另外，如果我将所有文章保存在一个文档中，如果我是正确的，每个文档的限制为 16 mb，这在大型网站的情况下会出现问题，所以我想应该有单独的文章数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:12:39.223

首先，让我更正您的一些术语：

*   `db.databaseName.insert({`是不正确的。连接到数据库后，将文档插入到*集合*中。该行应写为`db.articles.insert({`。

*   目前最大文档大小为*16MB*。

在这种情况下，我可能会做的是将所有文章存储在*文章*集合中，其中一个字段是*作者姓名*（或*作者昵称*）。这样做的原因主要是因为您提到这是一个您将在主页上运行很多的查询。然后，您可以将其他作者信息存储在*作者*集合中的文档中。每个作者的 _id 字段可以只是*作者姓名*（或*作者昵称*）——它根本不需要是“ObjectId”类型，只要它是一个标量值（而不是数组）。

或者，您可以将作者的所有文章作为嵌套数组存储在*文章*集合中，就像您在第一个示例中展示的那样。16MB 的文档限制听起来可能有点小，但它比您想象的要多。例如，我博客上的 477 篇文章只占用 2.4MB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T20:22:51.263

正如@Pavel 已经提到的，我们假设您已经通过[http://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)。

模式设计在 MongoDB 中完全是一个相对概念，它会根据具体情况而定。您将如何设计集合，链接与嵌入实际上取决于您的数据架构、数据的大小以及您希望如何查询它。

如果您的作者信息没有占用太多空间，我会说在文章文档中嵌入作者信息是个好主意。查找速度会非常快，因为您可以在文章和作者上拥有索引（即使它们是嵌入的）。

当作者更改他的信息时，更新他/她的信息集合很容易。您只需要更新在其作者列表中列出该作者的文章。特别是通过使用 $（位置运算符）。[http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

但是，如果您担心大小和限制，那就另当别论了。正如@Derick 提到的，16MB 很多，我的意思是很多。因此，如果您认为自己会达到极限，请选择单独的集合并进行链接。

据我所知，默认情况下 MongoDB 不提供跨多个集合的 MapReduce 功能，您最终可能会分几步完成，这将非常消耗资源。

MapReduce 不是非常适合生产使用。它最好由批处理过程使用，但对于实时聚合，您最好提出不同的解决方案（根据您的需求量身定制）并对其进行基准测试。有时在脚本端（Python、PHP 等）查找文档并进行聚合会更快。

作为最后一点，我只想说，无论 MongoDB 和 NoSQL 总体上多么漂亮、快速和时尚，但它们可能无法解决所有问题。一些问题最好通过传统的关系方法来解决。

# javascript - 具有绝对定位元素的桌面 webkit (safari/chrome) 中的奇怪渲染错误

> ID：10522054
> 
> 赞同：20
> 
> 时间：2012-05-09T18:34:29.267
> 
> 标签：javascript, jquery, html, css, webkit

如果您在此处观看视频：http: [//f.cl.ly/items/2g1a2B3G312D0x0G353W/Render%20Bug%202.mov](http://f.cl.ly/items/2g1a2B3G312D0x0G353W/Render%20Bug%202.mov) - 您将看到问题的实际效果。基本上，我有以下几点：

```
<section id="sidenav">
  <h1>TEXT HERE</h1>
  <ul>
    <li>Tab One</li>
    <li>Tab Two</li>
    <li>Tab Three</li>
    <li>Tab Four</li>
  </ul>
  <div id="tab"></div>
</section> 
```

Sidenav 是绝对定位的，像这样：

```
#sidenav {
  position: absolute;
  top: 200px;
  left: 0px;
  width: 770px;
  padding: 30px 0px 20px;
  background: rgba(255, 255, 255, 0.85);
  -webkit-transition: left 0.75s ease-in-out;
  -webkit-backface-visibility: hidden;
  z-index: 10; /* This fixed it. */
}

#sidenav.hidden {
  left: -768px;
} 
```

我有以下 jQuery：

```
$("#tab").click(function(){
  $("#sidenav").toggleClass("hidden");
}); 
```

但是，该部分内的元素跟不上动画。每当我单击时，它们要么落后，要么根本不动。但是，它们只是幽灵，我无法单击它们。当我把侧导航带回来时，它们通常会赶上来，但有时它们会坏掉，直到我将鼠标悬停在`<li>`'s 上。

请记住，这只发生在桌面上的 Safari/Chrome 中。iPad 上的 Safari 和桌面上的 Firefox 运行良好。

谢谢！安德鲁

* * *

**编辑修复：**

因此，显然将 z-index: 10 （或任何 z-index）添加到 sidenav 元素可以解决问题。有些人要我的全部 CSS，所以我编辑了帖子以包含它。我不确定 z-index 修复此问题的确切原因，我很想知道原因。我仍然向任何能解释这一点的人提供我的赏金。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T14:11:57.660

因此，显然将 z-index: 10 （或任何 z-index）添加到 sidenav 元素可以解决问题。有些人要我的全部 CSS，所以我编辑了帖子以包含它。我不确定 z-index 修复此问题的确切原因，我很想知道原因。我仍然向任何能解释这一点的人提供我的赏金。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:29:31.410

我更愿意将此作为评论发布，但由于我是这里的新手，我唯一的选择是将其发布为答案。在视频示例中，您将鼠标悬停在允许显示箭头的列表元素上，但鼠标移出时它们并没有消失。如果您尝试仅使用 css 执行此操作并且没有潜在图像，则应使用悬停。

这篇文章中有详细说明： [仅使用 CSS，将鼠标悬停在 <a> 上时显示 div](https://stackoverflow.com/questions/5210033/show-div-on-hover-with-only-css)

这样，如果您在鼠标离开列表元素时隐藏箭头，则当列表从页面滑出左侧时，不会有任何箭头留在后面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T23:42:03.197

从您给出的标记来看，“hidden”类也将带走您的“nav”div（它在 sidenav 内部） - 我想这会导致一些古怪

根据经验

*   标记内容
*   风格化
*   添加交互（点击事件和行为）
*   然后添加您的最终互动糖果（缓动等）

（这样做你应该确定哪个部分导致了 ui 中的问题）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T23:54:58.703

有时这是可行的：使父`position:relative`级类似于 webkit 的旧版 ie haslayout 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:53:18.907

通过从父元素中删除 z-index 样式并为固定元素提供高于 0 的 z-index 来修复它。希望这适用于其他人。

# mysql - JDBC 以 UTC 为 MySQL 日期时间

> ID：10522055
> 
> 赞同：0
> 
> 时间：2012-05-09T18:34:35.047
> 
> 标签：mysql, jdbc, timezone

我的爪哇：

```
Date parsedDate = dateFormat.parse(timestamp);
Timestamp dbTimestamp = new Timestamp(parsedDate.getTime());       
insertTimestampPreparedStatement.setTimestamp(3, dbTimestamp); 
```

PhpMyAdmin/MySQL 总是在我的本地时间显示这个，即使我这样做了

```
insertTimestampPreparedStatement.setTimestamp(3, dbTimestamp, Calendar.instance(TimeZone.getTimeZone("UTC")); 
```

我不确定 MySQL 是否让他们知道时区，我检查这一点的唯一方法是直接在 phpmyadmin 中将时区行更新为 NOW()，然后它向我显示了 GMT 时间。因此，要么 phpmyadmin/mysql 中存在错误，要么我的代码没有在正确的时区发送时间戳。

我如何让它在 UTC 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:55:48.510

JDBC 驱动程序在检索或存储时间戳时**必须**使用本地时区，除非提供了具有特定时区的日历。

不幸的是，JDBC 规范并不总是清楚驱动程序的行为方式，而且看起来 MySQL 做错了。`serverTimeZone`对于 MySQL，您可以通过在连接字符串和相关属性中指定一个或多个选项来强制它使用的时区。有关完整列表，请参阅[http://dev.mysql.com/doc/connector-j/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/connector-j/en/connector-j-reference-configuration-properties.html)。

# tfs - 使用 SharePoint 的 TFS 许可和 CAL

> ID：10522057
> 
> 赞同：0
> 
> 时间：2012-05-09T18:34:42.043
> 
> 标签：tfs, licensing

TFS 创建一个包含一些仪表板信息（刻录率和错误报告）的 SharePoint 网站。

CAL 说：“减少直接访问 Team Foundation Server 的用户或设备数量的硬件和软件（有时称为“多路复用”或“池”）不会减少所需的 Team Foundation Server CAL 的数量。结束以任何方式访问 Team Foundation Server 的用户或设备——除了上面提到的不需要客户端许可的情况——都需要拥有适当的许可，无论他们使用的是直接还是间接连接到软件。” （来自[http://www.microsoft.com/en-us/download/details.aspx?id=13350](http://www.microsoft.com/en-us/download/details.aspx?id=13350)）

那么，这是否意味着访问 SharePoint 网站的任何人都需要 CAL？

**编辑**我想问题的要点是：CAL 异常场景“访问 Team Foundation Server 报告”（来自*何时不需要客户端许可证*）是否包括 SharePoint 插件，或者只是从 SQL Server Reporting Services 生成的报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:39:50.543

在 TFS 中查看报告不需要 TFS CAL。

资料来源：[布赖恩哈里的博客](http://blogs.msdn.com/b/bharry/archive/2012/03/08/even-better-access-to-team-foundation-server.aspx)。

> 我们已经删除了在 TFS 中查看报告的 TFS CAL 要求（您仍然需要任何合适的 Sharepoint/Office 许可）。这解决了一个长期存在的担忧，即对于想要检查报告以查看进度或问题的偶尔的利益相关者要求 CAL 是不合理的。将此添加到我们几年前添加的“仅查看工作项”豁免中，您将获得一个非常全面的解决方案，适用于偶尔连接松散的利益相关者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:58:14.200

是的。如果您登录显示以下内容的 SharePoint 站点，则需要 CAL：工作项查询结果、积压工作、TFS 生成数据的 SQL 报告、TFS 生成数据的 Excel 服务报告等...

工作项 Web 访问站点不需要 CAL，仅此而已...

# oracle - 创建一个只能从表空间查询数据的用户（oracle）

> ID：10522058
> 
> 赞同：0
> 
> 时间：2012-05-09T18:34:43.673
> 
> 标签：oracle, oracle10g

我的 oracle 数据库中有 3 个用户

user_admin 用户 user_query

*   user_admin 具有 dba 角色。
*   用户有连接和资源角色
*   和 user_query 和 user 一样。

我想将最后一个配置为拒绝他进行所有类型的插入、更新、删除，但形成完整的**表空间**，而不是来自表、视图或过程......

关键是要有一个仅安全查询的数据用户。

但至少据我所知，我不能为表空间做这件事。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:09:22.680

您可以遍历所有使用相关表空间的表并授予选择权限。我会尽量远离像“SELECT ANY TABLE”这样强大的权限，因为这将适用于整个数据库。

例如，如果您的表空间名为 XXX，则：

```
BEGIN
  FOR tbl IN (SELECT owner, table_name
                FROM dba_tables dt
               WHERE dt.tablespace_name = 'XXX') LOOP
  EXECUTE IMMEDIATE 'GRANT SELECT ON ' || tbl.owner || '.' || tbl.table_name || ' TO USER_QUERY';
  END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:48:47.913

以下内容将选择授予任何表或视图（SYS 拥有的除外）：

```
 grant select any table to user_query; 
```

但是，它不限于单个表空间 - 整个数据库中的任何表都可供选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:03:27.910

首先，不鼓励使用 CONNECT 和 RESOURCE 角色，并将其记录在案。

除此之外，不，没有表空间甚至用户授予的权限。一方面，一个分区表或索引可以使用多个表空间，其中没有一个可能是该对象的默认值。

授予在对象级别。不过，您可以创建一个过程来根据表的表空间向用户（或更好地授予角色）授予权限。

# amazon-web-services - 显示亚马逊机械土耳其人资格测试结果

> ID：10522063
> 
> 赞同：1
> 
> 时间：2012-05-09T18:34:56.603
> 
> 标签：amazon-web-services, mechanicalturk

我希望建立一个亚马逊 mturk 资格测试，能够向员工展示他们做错了哪些问题。

例如：

![问题截图](../Images/df99b9dee48bffbd651df9d7ab8ecd1f.png)

如果他们的工人错误地将此问题回答为“相同”，我想显示另一个屏幕以提示他们确实犯了错误并指出正确答案背后的原因。

我在亚马逊文档网站上仔细查看过，但无济于事。我也知道这是可能的，因为当我尝试自己进行一些资格测试时遇到了具有相同功能的资格测试，特别是来自 CrowdSource。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-05T17:17:47.743

托马斯的答案是正确的答案。您无法在 Amazon Mechanical Turk 中检索 QualificationTest 的结果。Thomas 建议将 Java Applet 作为“解决方法”是可行的，但会给资格创建者带来很多复杂性。

如果您决定走这条路，您将需要使用问题类型`Application`中记录的标签。`QuestionForm`您可以在此处查看更多信息：http: [//docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_QuestionFormDataStructureArticle.html](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_QuestionFormDataStructureArticle.html)

它会像下面这样工作：

```
<Application>
  <JavaApplet>
    <AppletPath>http://tictactoe.amazon.com/applets/</AppletPath>
    <AppletFilename>GameViewer.class</AppletFilename>
    <Width>400</Width>
    <Height>300</Height>
    <ApplicationParameter>
      <Name>game_id<Name>
      <Value>01523</Value>
    </ApplicationParameter>
  </JavaApplet>
</Application> 
```

作为替代建议，您可以考虑只创建一个 HIT（诚然，您可能需要向工人提供奖励，例如 0.01 美元）并要求工人完成此操作。抓住那些通过你的测试的人，并为那些工人创建一个资格。这将为您提供 HIT 的全部功能（HTML、IFRAME 等），您将获得所有结果。不利的一面是，您可能需要向工人支付至少 0.01 美元才能完成资格认证，但这并不是严格要求的（您可以创建 HIT 并将其定价为 0.00 美元）。

# php - 如何删除单个 DQL 中的所有连接实体

> ID：10522070
> 
> 赞同：2
> 
> 时间：2012-05-09T18:35:25.103
> 
> 标签：php, doctrine-orm, dql

我有这样一个dql声明：

```
DELETE i, p, d, d2, s
  FROM OverseerMainBundle:Image i 
    JOIN i.plates p 
    JOIN i.doc d 
    JOIN p.doc d2
    LEFT JOIN p.symbols s 
  WHERE d.tag LIKE :tag 
```

如果我替换`DELETE`为`SELECT`查询按预期工作。然而，当我使用`DELETE`它给我一个错误

> [语义错误] 第 0 行，第 7 列靠近 'i，p，d，d2，'：错误：未定义类 'i'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T22:48:46.900

DQL 中的 DELETE 查询不支持 JOIN，因为某些受支持的 RDBMS 不支持它。

不幸的是，您必须首先选择要删除的元素的 ID，然后执行 a`DELETE FROM foo WHERE bar IN (?1)`并将带有 ID 作为参数的数组传递。

从多个表中删除时，请记住使用显式事务。

考虑到底层 RDBMS 支持 DELETE 查询中的 JOIN，一种替代方法是原生查询。

# spring - 在 Spring MVC 应用程序部署上运行代码

> ID：10522077
> 
> 赞同：-1
> 
> 时间：2012-05-09T18:35:47.030
> 
> 标签：spring, spring-mvc, dependency-injection

当我的应用程序部署到 Web 容器中时，我需要运行一些代码——并且该类需要被 Spring 容器注入。

我尝试实现`ServletContextListener`并将该类注册为侦听器，但注入不起作用。

这样做的惯用方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:59:01.923

为了让你的类可以被 Spring 容器注入，你可以扩展[SpringBeanAutowiringSupport](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/support/SpringBeanAutowiringSupport.html)。

# asp.net - ASP.NET 声音资源未发布

> ID：10522078
> 
> 赞同：0
> 
> 时间：2012-05-09T18:35:48.970
> 
> 标签：asp.net, resources, soundplayer

所以我在 VS2010 中创建了一个 ASP.NET 4 应用程序，它需要向最终用户播放声音，它在我的本地开发环境中运行良好。问题是声音资源也不是 Resources.resx 没有发布到服务器。知道为什么吗？

我做了什么：

1) 在项目  属性  资源下，我添加了我的声音资源，名为：soundbyte（包含 soundbyte.wav）。我注意到这会创建一个带有 wav 文件的 Resource 文件夹，并在我的项目下创建一个 Resources.resx 文件来引用该文件

2）在我的代码中，我按如下方式播放文件：

```
 Dim audioFile = My.Resources. soundbyte
    Dim player = New Media.SoundPlayer(audioFile)
    player.Load()
    player.Play() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:44:50.653

在 Visual Studio 解决方案资源管理器中，右键单击 Resources.resx 并选择属性。建立行动。设置为内容。

编辑：以下资源也可能有所帮助。 [http://blog.andreloker.de/post/2010/07/02/Visual-Studio-default-build-action-for-non-default-file-types.aspx](http://blog.andreloker.de/post/2010/07/02/Visual-Studio-default-build-action-for-non-default-file-types.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:35:05.723

最终，我找到了一种将声音播放到客户端浏览器（而不是运行 asp 应用程序的服务器）的方法，即遵循此示例中的技术： [http ://www.vbdotnetheaven.com/UploadFile/scottlysle/ PlaySoundsInASPX09032006083212AM/PlaySoundsInASPX.aspx](http://www.vbdotnetheaven.com/UploadFile/scottlysle/PlaySoundsInASPX09032006083212AM/PlaySoundsInASPX.aspx)

**但**在我的案例中，我发现一个更好的方法是使用 Javascript，它不需要资源技术。

只需在标签后的页面上嵌入声音：

```
<embed src="Sounds/jump.wav" autostart=false width=1 height=1 id="sound1" enablejavascript="true"> 
```

然后在javascript中设置函数：

```
function EvalSound(soundobj) {
    var thissound=document.getElementById(soundobj);
    thissound.Play();
} 
```

最后在 Javascript 中根据需要在浏览器中播放声音：

```
EvalSound('sound1'); 
```

# tfs - 在保持分支结构的同时使用正确的流程模板创建新项目

> ID：10522081
> 
> 赞同：2
> 
> 时间：2012-05-09T18:36:03.603
> 
> 标签：tfs

由于我们在 TFS2010 中的现有项目有一个错误的流程模板，我正在尝试使用正确的流程模板创建一个新项目，并使用 TFS 集成平台将所有工作项和版本历史迁移到新项目。

但是，我不太确定如何使用当前的分支结构迁移所有代码。这是我们当前的分支结构：

主要 --> 开发

主要 --> 发布

我想要的是在将所有内容从现有项目转移到新项目之后，我仍然可以保持相同的分支结构：

新主 --> 新开发

新主 --> 新版本

问题是：

1.  如何将所有代码从现有项目移动到新项目？我是否像这样分支：

    主 --> 新主

    开发 --> 新开发

2.  如何创建 New Main 和 New Dev 之间的关系？

3.  如果我使用 Main --> New Main 之类的分支将代码带到新项目中，之后我如何删除它们之间的分支关系（因为我最终会退出旧项目，我不希望人们意外合并新旧项目之间）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:36:54.293

好的，我试一试：

**解决方案1：**

源头控制

*   使用“好”的流程模板创建一个新的团队项目
*   创建一个从“Main”派生的“New Main”分支
*   创建从 New Main 派生的“New Dev”分支，“New Release”也是如此
*   在发生冲突时从“Dev”合并到“New Dev”接受源版本。对“新版本”执行相同操作。您**不会**将历史记录保留在“新开发/发布”分支中，您必须在需要时查看他们的基础分支。

工作项目

我最好使用 Excel 来创建工作项，我将首先设置列出我要复制的所有工作项的查询，显示我关心的字段，然后将整个内容（如果需要，可以进行一些映射）复制到另一个电子表格连接到新的团队项目，然后保存所有内容以创建新的工作项。

你可以这样做，如果： - 你有一个合理数量的工作项（你是判断的人，取决于你的动机；）） - 你不关心工作项的历史（修订）。- 你很懒，不想使用迁移工具包（或者如果它符合你的需要）。

**解决方案2：**

就地升级流程模板，您可以这样做，但主要是手动完成。

源头控制

*   无事可做，这是保持源代码控制（分支关系、历史记录）的所有内容完整无缺的唯一方法。

工作项目

*   如果您想保留一些历史记录，请使用我之前给您的 Excel 方法，请确保在添加/更改 WIT 之前在 Excel 上获得所有工作项
*   删除所有工作项。见[这里](http://blogs.microsoft.co.il/blogs/shair/archive/2010/02/19/tfs-api-part-21-delete-work-item-using-workitemstore-demo-application.aspx)。
*   删除 WIT ( [tfpt destroywitd](http://msdn.microsoft.com/en-us/magazine/cc721612.aspx) )
*   添加新的工作项类型。
*   如果您愿意，可以从 Excel 创建新的。

SQL 报告

*   删除现有报告
*   添加来自新流程模板的那些

**我的看法**

如果源代码控制是最重要的，我会选择解决方案 2。使用 Excel 或迁移工具包取决于工作项的数量，如果有很多我可以映射的字段...

如果您选择解决方案 2：在做任何疯狂的事情之前**备份您的 TPC ！**（我假设你在 TFS 2010 中）

# javascript - 使用 SDK2.0 查询：OR 一起过滤

> ID：10522086
> 
> 赞同：2
> 
> 时间：2012-05-09T18:36:16.363
> 
> 标签：javascript, extjs, extjs4, rally

文档中的此示例显示了如何使用过滤器数组中的单个项目查询 Rally WS API：

```
Ext.create('Rally.data.WsapiDataStore', {
    model: userStoryModel,
    fetch: true,
    filters: [
        {
            property: 'ScheduleState',
            operator: '<',
            value: 'Accepted'
         }
   ],
... 
```

我知道如果我有第二个过滤器到过滤器数组，它是两个过滤器一起。但是我将如何 OR 两个过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:52:55.177

您可以使用[Rally.data.QueryFilter 的或方法](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Rally.data.QueryFilter-method-or)来执行此操作：

```
filters: [
    Ext.create('Rally.data.QueryFilter', {
        property: 'ScheduleState',
        operator: '=',
        value: 'Accepted'
    }).or(Ext.create('Rally.data.QueryFilter', {
        property: 'ScheduleState',
        operator: '=',
        value: 'Defined'
    })
] 
```

# python - 在 beautifulsoup 中使用 findAll 过滤结果

> ID：10522091
> 
> 赞同：1
> 
> 时间：2012-05-09T18:36:33.207
> 
> 标签：python, search, beautifulsoup, findall

```
import urllib2
from BeautifulSoup import BeautifulSoup

result = urllib2.urlopen("http://www.bbc.co.uk/news/uk-scotland-south-scotland-12380537")
html=result.read()
soup= BeautifulSoup(html)
print soup.html.head.title

print soup.findAll('div', attrs={ "class" : "story-body"}) 
```

问题似乎是我想要的信息在故事正文中，但它位于最底部。所以我最终得到了大量的垃圾信息，直到我到达那里。

```
print soup.findAll('p', attrs={ 'class' : "introduction"}) 
```

只给我第一个`<p>`在这个例子中还有 8 个要收集

因此，希望从介绍开始到故事主体结束收集...有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:57:50.997

就 CSS 选择器而言，您希望选择 中的所有`p`元素`.story-body`：

```
print soup.select('.story-body p') 
```

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.html?highlight=select#css-selectors](http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.html?highlight=select#css-selectors)

# html - 在页眉/页脚保持静止时滚动内容

> ID：10522094
> 
> 赞同：1
> 
> 时间：2012-05-09T18:36:49.343
> 
> 标签：html, css

我有一个网站，其中页眉/页脚在内容滚动时保持静止在屏幕的顶部/底部。我一直在关注[这个问题](https://stackoverflow.com/questions/3399875/scroll-page-content-within-specific-area)，它解释了如何达到这种效果，哪种对我有用。当您向下滚动内容时，您会注意到内容的背景图像被切掉了。我很困惑为什么会发生这种情况，因为我已将背景图像设置为`repeat-y`. 我还注意到页脚似乎也隐藏了一些内容。

为了实现这种仅内容的滚动效果，我添加`position: fixed;`了页眉/页脚。我将内容`position: absolute;`保留为将页脚固定在屏幕底部。

->[**链接到网站**](http://www.sfu.ca/~jca41/stuph/la4/template.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:41:02.307

1.  首先，添加`bottom: 0`到您的页脚。这将使它下降到触底。
2.  现在，`position: absolute`起飞`#content`。
3.  最后，在顶部和底部添加额外的填充，`#content`这样您的文本就不会隐藏在页眉/页脚后面。

Firebug 告诉我这将解决您网站上的问题。[问他自己](http://getfirebug.com)。

# php - javascript 错误地确定了夏令时线——2006 年的一个例子

> ID：10522096
> 
> 赞同：6
> 
> 时间：2012-05-09T18:37:08.407
> 
> 标签：php, javascript, windows, dst, unix-timestamp

`new Date()`当谈到夏令时*线*时，我已经阅读了许多关于 javascript 对象的 StackOverflow 问题——就像它们被交叉时一样。*但是，我还没有看到关于这个特定问题的答案或在仍然依赖*“unix time”的同时解决它的方法。

我个人选择通过将 javascript 日期作为日期传递给我的 PHP 代码而不是 unix 时间来解决这个问题。然而，挥之不去的问题仍然存在！我已经在 IE8、Chrome 和 FF 上确认了这种行为，所以我假设它对你的行为相同。（**更新：** OSX 用户可能*无法*生成此行为）

我的研究；与我的问题最接近的问题：

*   [该用户](https://stackoverflow.com/questions/4018320/javascript-date-objects-and-daylight-savings-time)在 DST 更改前后的特定时间工作。
*   [该用户](https://stackoverflow.com/questions/9543580/javascript-time-zones-and-daylight-savings-time)担心时间的显示取决于用户的时区。该页面上接受的答案提到这`getTimezoneOffset`是“片状”，这导致我没有深入研究。
*   请参阅下面我对其他有一些深刻见解的问题的回答

我在 2006 年 11 月 1 日左右生成了一个测试场景。根据您所在的时区，这可能会或可能不会对您起作用。如果我正确理解 javascript 方面，您需要将 PC 的时钟同步到

> 东部时间（美国和加拿大）并选中“自动调整夏令时时钟”。

我基于 PHP 中的“印第安纳波利斯”时区进行此实验。我的 javascript 结果，当我发现 2006 年 11 月 1 日的 unix 时间比 PHP 生成的时间少**一小时（3600 秒）。**根据[这个页面](http://timeanddate.com/worldclock/timezone.html?n=105&syear=2000)（谢谢乔恩！）javascript是错误的。

两种语言结果于 2006 年 11 月 6 日**重新达成一致**！

这项研究和其他研究使我相信 Javascript 弄错了它的历史并选择了错误的星期天以从 DST 中“回退”——从而导致了我所看到的差异。

我试图尽可能简化这一点，但仍有不少齿轮在运转。

1.  [这是 PHP 代码和输出](http://ideone.com/lSd9C)，显示了截至 2006 年 11 月 1 日的正确毫秒数。

    date_default_timezone_set("美国/印第安纳州/印第安纳波利斯"); echo "2006 年 11 月 1 日的 Unix 时间是：".strtotime("11/01/2006")."\n"; echo "2006 年 11 月 6 日的 Unix 时间是：".strtotime("11/06/2006");

结果是：

```
Unixtime for November 1, 2006 is: 1162357200 (where the disagreement lies)
Unixtime for November 6, 2006 is: 1162789200 
```

它们都基于 GMT-0500。

2.  在 Javascript 中，（请参阅我的[jsfiddle](http://jsfiddle.net/xpZeY/5/) **），我调用它`new Date`，然后`getTime()`像这样调用它（并删除毫秒）：

    新日期("2006/11/01").getTime()/1000 新日期("2006/11/06").getTime()/1000

这会生成值

```
1162353600 <-- PHP outputs: 1162357200
1162789200 <-- the same as PHP for '2006/11/06'; congruence is restored 
```

这与通过 PHP 输出的 3600 秒（或 1 小时）*不同（对于 2006/11/01）。*在我的 PHP 应用程序中处理此值（提前一小时）生成前一天（2006 年 10 月 31 日），这是不可接受的，因为它破坏了我的导航。（[查看我的特定场景的更多解释](https://chat.stackoverflow.com/transcript/message/3640316#3640316)）

用 Javascript 输出：`Date("2006/11/01")`不调用`getTime()`就解开了一些谜团，因为 javascript 揭示了它使用的偏移量`GMT-0400`。

我的[jsfiddle](http://jsfiddle.net/xpZeY/5/) ** 实验（也在上面列出）显示了这些结果。

**（您可能需要更改计算机的时区才能看到相同的行为）。

可能发挥作用的是，[根据维基百科，2006 年是印第安纳州](https://en.wikipedia.org/wiki/Daylight_saving_time_in_the_United_States#Indiana)开始使用 DST 的第一年。无论哪种方式都是一个奇怪的谜题。

由于我已经制定了我的解决方案（通过避免在我的 javascript 中依赖 unix 时间），我想我应该为后代发布这个，希望有人可能知道如何更正 javascript 显示的值。

**问题是：**如何将 PHP 和 javascript 之间的两个“unix 时间”结果对齐？我将不胜感激了解 DST '线' 周围的情况或一般情况。（我目前假设 DST 线是问题）。

**更新：**运行 Chrome 的 iMac 生成了 PHP 生成的结果。什么？？？荒野。对此行为的任何 javascript 端修复看起来都将是一项伟大的事业（或至少是丑陋的）。也许这*不是*javascript 问题，因为它会根据操作系统（或其他因素？）生成正确答案。

值得注意的是，在这台 iMac 上，我**没有**强制使用时区，我不确定这台 Apple 电脑是否允许。“自动设置日期和时间”的设置已选中 ( `true`) 和`disabled`。时区设置为东部夏令时间。未选中“自动设置时区”框 ( `false`) 和`disabled`。

我添加了`Windows`标签以强调它在 OSX 中似乎不是问题。

**更新：**根据[上面链接](http://timeanddate.com/worldclock/timezone.html?n=105&syear=2000)的网站，我验证[了以下所有日期在适当的日期（更新的小提琴）交叉到了一个新的 GMT 偏移量](http://jsfiddle.net/xpZeY/7/)——不像 2006 年的响应是*一周的时间*。即，在 2007 年 11 月 4 日，它是`GMT-4`和 2007 年 11 月 5 日，它返回`GMT-5`。

*   2007 年 3 月 11 日星期日凌晨 2 点 11 月 4 日星期日凌晨 2 点
*   2008 年 3 月 9 日星期日凌晨 2 点 11 月 2 日星期日凌晨 2 点
*   2009 年 3 月 8 日星期日凌晨 2:00 11 月 1 日星期日凌晨 2:00
*   2010 年 3 月 14 日星期日凌晨 2:00 11 月 7 日星期日凌晨 2:00
*   2011 年 3 月 13 日星期日凌晨 2 点 11 月 6 日星期日凌晨 2 点

最后，如果您知道在 2006 年将此错误提交给 Javascript 所依赖的任何时区源的正确渠道，请这样做并让我知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T18:52:24.940

首先，[印第安纳州的时间非常复杂](http://www.mccsc.edu/time.html)。

但在这种情况下，我认为 Javascript 是错误的。我机器上 Javascript 的输出（已设置时区）在 Chrome 上是“2006 年 11 月 1 日星期三 00:00:00 GMT-0400（东部夏令时间）”和“2006 年 11 月 1 日星期三 00:00:00 EDT”在 Internet Explorer 上，但[夏令时于 2006 年 10 月 29 日在印第安纳波利斯结束](http://timeanddate.com/worldclock/timezone.html?n=105&syear=2000)。

.NET 的`TimeZoneInfo`类给出了相同的结果：

```
// Ignore the daft ID; it really means Eastern time
var zone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
var local = new DateTime(2006, 11, 1);
Console.WriteLine(zone.GetUtcOffset(local)); 
```

输出：

```
-5:00:00 
```

（所以它知道它不在夏令时。）

同样在 Noda Time（我自己的日期和时间库，它使用 tzdb 数据库）中：

```
var zone = DateTimeZone.ForId("America/Indiana/Indianapolis");
var instant = new Instant(1162357200 * NodaConstants.TicksPerSecond);
var zoned = new ZonedDateTime(instant, zone);
Console.WriteLine(zoned); 
```

结果：

```
Local: 01/11/2006 00:00:00 Offset: -05 Zone: America/Indiana/Indianapolis 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:19:46.000

唷; 我认为 Jon 有一些很好的观点和确认，即 2006 年 11 月的最初几周，当夏令时开始时（至少在印第安纳州），Javascript 在 Windows 机器上提取了错误的数据库。

我仍然不知道如何在 Javascript 中解决这个难题。但是，由于我的主要问题是 Javascript 和 PHP 之间的“不一致”（毕竟，如果它们在同一天/同一小时更改为 DST，那么我***永远***不会注意到有问题），解决方案可能是停止依赖其中之一。

这个[SO answer](https://stackoverflow.com/a/5742576/469643)虽然没有检索 unixtime，但演示了如果我需要继续依赖 unixtime，我可以如何解决这种紧张局势。恕我直言，这实际上是一个非常巧妙的解决方案。简要总结：通过 AJAX 检索时区信息。这意味着 PHP 将始终同意任何特定日期 00:00:00 的 unixtime，因为它本质上是提供值本身。

但是，这仍然不是问题的真正解决方案：Javascript 正在检索对东部时区何时退出夏令时*的错误理解。*我仍然很高兴知道人们将如何纠正这种极小而狭窄的不一致窗口。

自从我尝试在 Javascript 中输出正确值的 OSX 机器之后，它甚至会像“可能尚未开发”的 Windows 补丁一样复杂吗？

我怀疑我的场景和[这个问题](https://stackoverflow.com/questions/9509360/datepicker-date-off-by-one-day)是否相关，但这是我在研究时遇到的一个有趣的错误。在那个问题中，Date 对象——取决于传递的格式——可能会产生一些非常令人惊讶的输出。

如果有人想颠覆对用户计算机时区数据库的依赖来计算正确的日期，[这个答案](https://stackoverflow.com/a/3533246/469643)可能会在烹饪和依赖自己的时区数据库方面提供一些帮助。我没有调查过使用这种解决方案，也没有调查过如何覆盖 Javascript 返回的 unixtime 结果，但这是我找到的最接近的答案。我想知道开销会是多少......？**如果您可以实施这种类型的解决方案，请务必发布答案**——这可能是我最初问题的真正答案。

# knockout.js - 一些基本的结果问题

> ID：10522097
> 
> 赞同：2
> 
> 时间：2012-05-09T18:37:13.620
> 
> 标签：knockout.js, asp.net-mvc-4, asp.net-web-api, upshot

我是 MVC、SPA 和所有这些方面的新手。我关注这个视频：

[http://channel9.msdn.com/Events/TechDays/TechDays-2012-Belgium/199](http://channel9.msdn.com/Events/TechDays/TechDays-2012-Belgium/199)

当它处理结果时，我陷入了困境。

```
@{Html.UpshotContext().DataSource<DataServicesController>(x => x.GetDeliveriesForToday());} 
```

如果 GetDeliveriesForToday 接受参数，这到底是做什么的，我应该怎么做？

```
var dataSource = upshot.dataSources.DeliveriesForToday; 
```

其次，什么是`dataSources`？VS2011 intellisense 找不到。最后，`DeliveriesForToday`从哪里来？我唯一能找到的就是`GetDeliveriesForToday`功能。这是否意味着结果以某种方式自动剥离`Get`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:34:04.780

这篇文章回答了我的一些问题：

[http://bartjolling.blogspot.com/2012/02/building-single-page-apps-with-aspnet.html](http://bartjolling.blogspot.com/2012/02/building-single-page-apps-with-aspnet.html)

# c++ - 从两个抽象类继承

> ID：10522100
> 
> 赞同：3
> 
> 时间：2012-05-09T18:37:25.913
> 
> 标签：c++

我有一个尚未测试/编译的问题，想知道它是否可能以及它是否是糟糕的设计？

我的问题：

我想要一个抽象基类 A 和一个抽象派生类 B。

我意识到如果这是可能的，我将在每个类中拥有许多纯虚成员函数，并且我将无法初始化这些对象，但这是抽象类的给定。

在我的设计中，我将有另一个派生类 C，然后我将对其进行初始化——类 C 将派生自类 B。

我会有一些看起来像这样的东西

```
class C
  ^
  |
abstract class B
  ^
  |
abstract base class A 
```

我的问题：

首先这可能吗？我会怀疑，但不在 B 类中的 A 中声明纯虚函数可能会很麻烦？

前任

```
class A {
  public:
    virtual void test()=0;
 };

class B: public A {
  public:
   virtual void test()=0;
   virtual void anotherTest()=0;
 }; 
```

以上可以吗？

这是糟糕的 C++ 设计吗？将来我会从 A 派生类，所以有这个设计会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:40:41.290

它没有错，它肯定会起作用。示例如下

```
stefanos-imac:dftb borini$ more test.cpp 
#include <iostream>
class A {
public:
    A(void) { std::cout << "A" << std::endl; } 

    virtual void method1() = 0;
};

class B : public A {
public:
    B(void) : A() { std::cout << "B" << std::endl; }

    virtual void method2() = 0;
};

class C : public B {
public:
    C(void) : B() { std::cout << "C" << std::endl; }

    virtual void method1() { std::cout << "method1" << std::endl; }
    virtual void method2() {std::cout << "method2" << std::endl; }
};

int main() {
    C c;
    c.method1();
    c.method2();
}
stefanos-imac:dftb borini$ ./a.out 
A
B
C
method1
method2 
```

谢谢你提醒我，我仍然可以输入基本的 C++。

# php - 贝宝 ipn 未得到验证

> ID：10522102
> 
> 赞同：1
> 
> 时间：2012-05-09T18:37:38.040
> 
> 标签：php, paypal, paypal-ipn

我正在为 paypal ipn 使用以下代码：

```
 <?php

mysql_connect("localhost", "user", "password") or die(mysql_error());
mysql_select_db("PayPal") or die(mysql_error());

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}
// post back to PayPal system to validate
$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {

// PAYMENT VALIDATED & VERIFIED!

}

else if (strcmp ($res, "INVALID") == 0) {

// PAYMENT INVALID & INVESTIGATE MANUALY!

}
}
fclose ($fp);
}

    ?> 
```

在以各种方式进行测试之后，我让一切正常工作，除非：

```
if (strcmp ($res, "VERIFIED") == 0) 
```

不工作

```
if (strcmp ($res, "VERIFIED") == 1) 
```

作品

显然它没有得到验证，因为我正在从沙盒发送 IPN。

可能缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:08:29.520

既然你们都说这`strcmp($res, "VERIFIED") == 1`是真的，$res 比字符串 VERIFIED 大 1 个字符。我的猜测是 $res 最后有一个 \n 字符或其他需要剥离的字符。尝试在`str_replace('\n', '', $res)`使用 strcmp 调用行之前执行类似操作。虽然只是大声思考。如果这不起作用，请告诉我。

仅供参考，PayPal 有在线示例代码，用于使用 cURL 在 PHP 中验证 IPN。链接：[http ://www.x.com/developers/paypal/documentation-tools/paypal-code-samples#instantpaymentnotification](http://www.x.com/developers/paypal/documentation-tools/paypal-code-samples#instantpaymentnotification)

# c# - 创建数据上下文对象的更短方法？

> ID：10522109
> 
> 赞同：4
> 
> 时间：2012-05-09T18:38:11.403
> 
> 标签：c#, linq-to-sql

我有一个非常简单的问题，如果将来有人可以为我节省一些打字时间，那就太好了。

我看到自己经常输入这个语句：

```
using (DataClasses1DataContext db = new DataClasses1DataContext()) 
```

我记得在某处看到它的较短版本，但似乎可以找到它。我相信它的数据上下文的名称只输入了一次。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:39:51.947

像这样？

```
using (var db = new DataClasses1DataContext()) 
```

要进一步缩写它，您可以执行以下操作：

```
using (var db = DataClass.DB()) 
```

DataClass 有一个静态方法 DB，它返回数据上下文的新实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T18:39:43.323

```
using (var db = new DataClasses1DataContext()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:43:24.570

我仍然必须这样做，通常在存储库中。其他人回答的唯一区别是使用`var db`隐式定义。这是有效的，因为您正在使用关键字显式实例化一个类，`new`因此编译器仍然知道该类型将是`DataClasses1DataContext`

# php - 在javascript或php中制作分层后退按钮

> ID：10522111
> 
> 赞同：0
> 
> 时间：2012-05-09T18:38:26.783
> 
> 标签：php, javascript, jquery, html, navigation

我正在为我的网站创建一个移动主题，我决定为出现在网站标题旁边标题的人制作一个后退按钮会很好。现在我想出了如何在 javascript 或 php 中创建一个后退按钮，这在将用户带回到最后访问的页面时效果很好。

Javascript：

```
<input type="button" value="Go Back From Whence You Came!" onclick="history.back(-1)" /> 
```

PHP：

```
<?php
  $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
  echo "<a href='$url'>back</a>";
?> 
```

现在的问题是我不希望人们回到他们访问的最后一页，而是最终将页面的层次结构返回到主页。

现在它是这样工作的：

*   我去A页
*   然后我转到页面B，然后单击转到页面C。
*   当我单击页面 C 上的后退按钮时，我进入页面 B。
*   当我单击页面 B 上的返回按钮时，我进入页面 C。

我希望它如何工作：

*   我去A页
*   然后我转到页面B，然后单击转到页面C。
*   当我单击页面 C 上的后退按钮时，我进入页面 B。
*   然后当我点击页面 B 上的后退按钮时，我回到页面 A。

所以我需要它更像浏览器上的正常后退按钮一样工作，而不仅仅是带你回到你所在的最后一页，因为这会导致无限循环，我相信这会让人们不高兴。

此外，可能值得注意的是，我正在一个巨大的网站上工作，其中包含在 1 page.tpl.php 文件上的 Drupal 6 构建的大量内容。所以我不能简单地说如果在 B 页上转到 A 页，但它必须是动态的，无论我在哪里插入它都可以工作。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:54:43.973

如果您仍想添加此按钮（这可能会搞砸浏览器的前进按钮），您可能可以使用 php 会话对象或任何它被调用的对象来完成它，我不知道 php，但这是我认为会的逻辑工作

每次进入页面时，将 URl 保存在此持久性变量/数组中，将最后输入的 URL 作为按钮的 url 输出，然后将当前 URL 添加到此数组中。当您单击按钮时，您需要从数组中删除链接中的 URL 及其后面的所有内容。

abcd 如果您在页面 d 上并按回，则需要删除 c 和 d 并将链接输出为 b 或者如果您在 d 上并按回您需要删除 d 并将 b 作为 URL 输出，然后何时结束您在页面 a，按钮将消失。

他似乎需要做很多工作才能放入每个浏览器中都存在的东西

# c# - PowerPoint 编程：尝试访问标尺边距时出现问题

> ID：10522118
> 
> 赞同：1
> 
> 时间：2012-05-09T18:38:41.113
> 
> 标签：c#, .net, powerpoint, office-interop, officedev

我正在尝试访问各种项目符号列表项的缩进级别。所以我创建了一个简单的函数：

```
private float[] findIndentSpacing(TextRange t, int level) {
    if(level == 1) {
            RulerLevel rl = t.Parent.Ruler.Levels(2);
            //bullet must start at 0 on the first level for now
            return new float[2] { 0, rl.LeftMargin * Settings.Scaler() };
        } else {
            RulerLevel rl = t.Parent.Ruler.Levels[level];
            return new float[2] { rl.FirstMargin * Settings.Scaler(), rl.LeftMargin * Settings.Scaler() };
        }
    } 
```

因此，第一个 if 语句是一种解决方法。由于某种原因，第一级 LeftMargin 总是返回：-2.14748365E+9。我试图在第一个之后抓住水平，它们返回实际值。话虽如此，在访问一个级别后，所有其他级别都会更改并变得平等。例如，如果我尝试访问：`t.Parent.Ruler.Levels[2].FirstMargin`，那么由于某种原因`t.Parent.Ruler.Levels[3].FirstMargin`变得相同，等等。LeftMargin 也会发生变化。

我尝试以不同的方式访问标尺对象：通过选择、通过形状、通过文本以及我认为尝试的每一种方式，结果都是相同的。

想法？

更多信息：我阅读了以下主题，但它们更多的是关于写作而不是阅读，但我觉得问题很相似：[PowerPoint Programming: Indentation with Ruler margin levels not working?](https://stackoverflow.com/questions/6608528/powerpoint-programming-indentation-with-ruler-margin-levels-not-working) [http://answers.microsoft.com/en-us/office/forum/office_2007-customize/why-shapetextframerulerlevelsi-cant-set-the-bullet/9eac3e46-b13b-433e-b588-216ead1d9c1a?tab=AllReplies#tabs](http://answers.microsoft.com/en-us/office/forum/office_2007-customize/why-shapetextframerulerlevelsi-cant-set-the-bullet/9eac3e46-b13b-433e-b588-216ead1d9c1a?tab=AllReplies#tabs) I做了这个：[http://answers.microsoft.com/en-us/office/forum/office_2010-customize/find-bullet-spacing-information-in-an-automated/4525b6b8-6331-4f33-8127-789ea3641589?页=1&tm=1336535132591](http://answers.microsoft.com/en-us/office/forum/office_2010-customize/find-bullet-spacing-information-in-an-automated/4525b6b8-6331-4f33-8127-789ea3641589?page=1&tm=1336535132591)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:13:12.677

在 2007 年和 2010 年，我认为您需要使用 TextRange2 和 TextFrame2 对象。

在 PPT 2003 和之前的版本中，TextFrame 可以有 5 个缩进级别，并且在给定缩进级别的所有段落共享相同的 LeftMargin 和 FirstMargin。

从 2007 年开始，TextFrames 最多可以有 9 个缩进级别，并且每个段落可以有自己的左/第一页边距，独立于在相同缩进级别的其他段落上设置的页边距。

在 PPT 的 VBA IDE 中试试这个。然后选择您正在查看的文本：

```
Sub Levels()
  Dim oSh as Shape
  Dim x As Long

  Set oSh = ActiveWindow.Selection.ShapeRange(1)

  With oSh.TextFrame2.Ruler
    For x = 1 to .Count
      Debug.Print .Levels(x).FirstMargin
      Debug.Print .Levels(x).LeftMargin
    Next
  End With

End Sub 
```

# java - 连接到本地 MS SQL Server

> ID：10522120
> 
> 赞同：6
> 
> 时间：2012-05-09T18:38:46.380
> 
> 标签：java, sql-server, jtds

我有一个本地 MS SQL Server，我正在尝试使用 Java 中的 JTDS 连接到它。这是连接字符串：

```
Class.forName("net.sourceforge.jtds.jdbc.Driver");
Connection conn = DriverManager.getConnection("jdbc:jtds:sqlserver://localhost:1433/stock","sa","password"); 
```

和服务器属性：
名称：USER-PC\SQLEXPRESS
根目录：c:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL

我收到一个`Exception in thread "main" java.sql.SQLException: Network error IOException: Connection refused: connect`错误。

我该如何补救？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T19:02:41.407

检查以下内容：

*   您已启用混合模式安全性，即您可以使用用户名/密码进行连接（而不是使用 Windows 身份验证）
*   TCP/IP 协议已启用。打开 SQL Server 配置管理器，然后在 SQL Server 网络配置中选择协议并启用 TCP/IP。
*   尝试使用以下格式仅将一个字符串传递给 getConnection：

    ```
    DriverManager.getConnection("jdbc:jtds:sqlserver://localhost:1433/stock;instance=SQLEXPRESS;user=sa;password=password") 
    ```

*   如果您使用这种格式（命名实例），则需要运行 SQL Server Browser 服务（在服务中）。如果此项显示为灰色，则该服务可能已禁用，因此请启用它然后启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:58:32.490

端口 1433 是默认实例使用的端口。您正在使用 SQLEXPRESS，它是一个命名实例。您的连接字符串应包括以下内容：

```
sqlserver://localhost\SQLEXPRESS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T03:28:58.043

SQL Server Browser 服务默认是禁用的。如果您正在开发 .Net 应用程序，则无需启动 SQLBrowser，但如果您在 java 中使用 JTDS，则需要启动它。

# java - 从 JPanel 实例化 JDialog

> ID：10522121
> 
> 赞同：5
> 
> 时间：2012-05-09T18:39:07.320
> 
> 标签：java, swing

我有一个`JPanel`，我想响应鼠标点击然后打开一个`JDialog`. `JDialog`构造函数需要一个实例`JFrame`而不是- 我该`JPanel`如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T20:38:51.697

您真的应该尝试将 JDialog 附加到父对话框或框架，特别是如果您希望它是模态的（通过传递父窗口，对话框将附加到您的窗口，并且将父对话框也带入子对话框）。否则，用户体验可能真的会出错：丢失对话框、在没有看到模态对话框的情况下阻塞窗口等......

要找到您的 JPanel 父窗口，您只需要以下代码：

```
JPanel panel = new JPanel();
Window parentWindow = SwingUtilities.windowForComponent(panel); 
// or pass 'this' if you are inside the panel
Frame parentFrame = null;
if (parentWindow instanceof Frame) {
    parentFrame = (Frame)parentWindow;
}
JDialog dialog = new JDialog(parentFrame);
... 
```

如果您不知道您是在框架还是对话框中，请对这两个类进行“instanceof”测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T18:53:10.757

使用无参数构造函数将使对话框无所有者。我认为最好的办法是让拥有您的面板的框架成为对话框的所有者。

我的意思是，您应该使用 JPanel 中的 getParent() 来查找它的所有者，然后将找到的这个对象作为 JFrame 的所有者发送。

一个粗略的代码是

```
java.awt.Container c = myPanel.getParent();  
while (!(c instanceof javax.swing.JFrame) && (c!=null)) {  
        c = c.getParent();  
}  
if (c!=null) { 
    JFrame owner=(javax.swing.JFrame) c;  
    JDialog myDialog=new JDialog(owner);
} 
```

我没有测试过这段代码，但它足以让你理解这个想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T20:38:49.363

如果您决定使用 JOptionPane，则可以使用 mouseAdapter 内部类将 MouseListener 添加到 JPanel 以处理 mouseClicked 事件。您必须将面板声明为 final 才能从内部类中访问面板。

```
final JPanel testPanel = new JPanel();

testPanel.addMouseListener(new MouseAdapter(){
     public void mouseClicked(MouseEvent e)
     {           
         JOptionPane.showMessageDialog(testPanel,"Title","InformationMessage",JOptionPane.INFORMATION_MESSAGE);

    }});//end of mouseClicked method 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T18:42:21.360

有一个不需要参数的构造函数：

```
JDialog dialog = new JDialog(); 
```

如果您想要使对话框模态，也许您可​​以获得主 JFrame 的静态引用，例如：

```
JDialog dialog = new JDialog(MyMainJFrame.getInstance()); 
```

# mysql - 选择不同的 SET 值作为单个 mysql 列？

> ID：10522125
> 
> 赞同：0
> 
> 时间：2012-05-09T18:39:30.377
> 
> 标签：mysql, sql

假设我有 id （主键列）和 val 列（具有一些允许值的 SET 类型）：

```
set('a','b','c','d','e','f') 
```

我需要顶部选择这些值作为一列，第一列是 id

```
+-----+------+
| id  | val  |
+-----+------+
| 102 | 'a'  |
| 102 | 'e'  |
| 102 | 'f'  | 
```

不知道如何实现这一点..

```
select id, ???? from table where id = 102; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:57:45.297

正如我在上面的评论中提到的，您可能应该[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据，以便这个问题完全消失。

但是，就现状而言，需要加入一个包含所有可能`SET`值的表，其中该值在记录的`SET`; 您可以维护该表的永久副本，或者使用`UNION`子查询动态构建它：

```
SELECT my_table.id, set_options.val
FROM my_table JOIN (
            SELECT 'a' AS val
  UNION ALL SELECT 'b' UNION ALL SELECT 'c' UNION ALL SELECT 'd'
  UNION ALL SELECT 'e' UNION ALL SELECT 'f'
) AS set_options ON FIND_IN_SET(set_options.val, my_table.val) > 0
WHERE id = 102 
```

# sqlite - sqlite3_mprintf - 我是否应该始终使用 %Q 作为格式说明符而不是 %s？

> ID：10522126
> 
> 赞同：6
> 
> 时间：2012-05-09T18:39:30.870
> 
> 标签：sqlite

摘自 sqlite3_mprintf() API 上的 SQLite 参考资料

[http://www.sqlite.org/c3ref/mprintf.html](http://www.sqlite.org/c3ref/mprintf.html)

“%Q 选项的作用类似于 %q，除了它还在整个字符串的外部添加单引号。此外，如果参数列表中的参数是 NULL 指针，则 %Q 替换文本“NULL”（不带单引号） 。”

使用 %q 时，我们必须小心始终在其周围使用单引号，例如

```
char *zText = "It's a happy day!";
char *zSQL = sqlite3_mprintf("INSERT INTO table VALUES('%q')", zText); 
```

总是使用 %Q 而不是 %q 似乎更方便，如下所示：

```
char *zSQL = sqlite3_mprintf("INSERT INTO table VALUES(%Q)", zText); 
```

我的问题 - 是否有一个有效的用例，其中 '%q' 更合适或更有效？或者我可以在所有语句中安全地使用 %Q 作为 %s 的替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:31:49.750

一切都将以安全的方式创建 SQL 语句，以最大限度地减少 SQL 注入的可能性。

`%q`你应该一直都喜欢`%s`。

> 该`%q`选项的工作方式类似于`%s`它从参数列表中替换一个以 nul 结尾的字符串。但也使每个字符`%q`加倍。设计用于在字符串文字中使用。通过将每个字符加倍，它会转义该字符并允许将其插入字符串中。`'\''``%q``'\''`

`%Q`相比`%q`. _

> %Q 选项的工作方式与 %q 类似，只是它还在整个字符串的外部添加单引号。此外，如果参数列表中的参数是 NULL 指针，则 %Q 将替换文本“NULL”（不带单引号）。

这意味着它将添加单引号并将 nul 指针呈现为字符串`"NULL"`内的字符串文字。

如您所见，这取决于您想要做什么。如果您可以添加单引号并`"NULL"`生成行为，您可以简单地使用`%Q`（我认为这对于 SQL 语句中的参数值非常有意义）。也许有时你不想要这种行为然后你可以回退到`%q`.

# php - 如何创建动态对象变量

> ID：10522135
> 
> 赞同：0
> 
> 时间：2012-05-09T18:40:01.793
> 
> 标签：php, oop, variables, object

是否有一些解决方案可以为 20 种不同的情况编写开关代码块。编写类似对象类型的代码，这将是动态变量。对象的名称

会根据为论坛选择的值进行自我调整，`value = "option1" , value = "option2"` 所以我会写这样的东西。

```
$object = $_POST['option_name']; 
```

并且据此我可以创建适合他班级的新对象女巫。在不知道他的名字的情况下，我可以简单地调用他的方法来查看他的计算`$object->calculated () //according it is match class` 结果然后该代码也将根据下一个代码适合他的表名数据库。 `$object->create_record_for_database (); //because each class has a separate table name inside.`我希望我足够清楚谢谢

示例代码：

```
<?php 
require_once("/includes/database.php");
require_once("/includes/some_class.php");
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<br>value1<input type=text name='value1'>
<br>value2<input type=text name='value2'>
<h2>please select one of the choice</h2>
<input type="radio" name="option_name" value="option1" /> "option1"
<br><input type="radio" name="option_name" value=""option2" /> option2
<br><input type="radio" name="option_name" value="option3" /> option3
*
*
*
<br><input type="radio" name="option_name" value="option20" /> option20
<br><input type="submit" name="submit" value="Submit Form"><br>
</form>

<br/><br/>

<?php
$object=""; 
echo("<br>");
        if (isset($_POST['submit'])) {
                if (!empty($_POST['option_name'])) {
                    ClassOption::$option_name = $_POST['option_name'];//can be from option1,option2...option20
                    ClassOption::$value1 = $_POST['value1'];
                    ClassOption::$value2 = $_POST['value2'];

       $option = $_POST['option_name'];
        switch ($option)
{
case option1:
  $option1 = new Option1 ( );// create object1 and calculate it 
  echo 'object1 calculated', $option1->calculated(), "<br />";
  $option1->create_record_for_database();//with value1,value2,option_name
  break;
case option2:
  $option2 = new Option2 ();// create object2 and calculate it
   echo 'object2 calculated', $option2->calculated(), "<br />";
   $option20->create_record_for_database();//with value1,value2,option_name
  break;
  *
  *
  *
  case option20:
   $option2 = new Option2 ();
    echo 'object2 calculated', $option2->calculated(), "<br />";
    $option20->create_record_for_database();//with value1,value2,option_name
}

       }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:48:14.427

如果要从名称存储在字符串中的类创建新对象，可以使用：

```
$object = new $className(); 
```

或者在你的情况下：

```
$option = new $_POST['option_name']();
$option->calculated();
$option->create_record_for_database(); 
```

但是，我个人不喜欢使用这样的变量的想法。

# c - 初始化器不是一个恒定的错误

> ID：10522136
> 
> 赞同：2
> 
> 时间：2012-05-09T18:40:17.550
> 
> 标签：c, visual-c++, console

抱歉，如果这个问题被反复询问，但我只是*不明白*这段 C 代码有什么问题，因为它编译时没有问题，直到有一天它开始在第 9 行和第 10 行抱怨“C2009：Initializer is not a constant”这个标题：

```
// CONIO2.H
#ifndef CONIO2_H_INCLUDED
#define CONIO2_H_INCLUDED
#ifndef _WINDOWS_
#include <windows.h>
#endif

void clrscr(void) {
    int Written = 0;
    COORD ord;
    ord.X = 0;
    ord.Y = 0;
    FillConsoleOutputCharacter(GetStdHandle(STD_OUTPUT_HANDLE), 32, 80 * 25, ord, &Written);
}

//MAIN.C
#include <stdio.h>
#include <conio2.h> 
```

编辑：我发现了错误。我正在使用 Eclipse CDT 插件来开发 C 应用程序，但它没有正确设置路径。我必须使用配置才能使其正常工作，但无论如何谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:53:22.580

```
COORD ord; 
```

您缺少`COORD`类型别名的定义。我的猜测是你没有包括正确的标题：`Wincon.h`

`COORD`请参阅此处了解使用类型别名 的要求（要包含的标头） ：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682119 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682119(v=vs.85).aspx)

**编辑**：此外，您的`#ifndef`指令似乎有问题：标题中有两个`#ifndef`但只有一个`#endif`。对于每个`#ifndef`你需要一个`#endif`. 并且您确定`windows.h`仅在`_WINDOWS_`未定义时才包含？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:45:42.513

此链接描述了错误以及一些示例。它可能会帮助你。根据链接，编译器在程序开始时初始化非自动变量，并且初始化它们的值必须是常量。[http://msdn.microsoft.com/en-us/library/t801az8a(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t801az8a(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:08:23.383

您的代码有几个预处理器异常。下面的代码在Windows的*标准C 编译器上运行良好。*请注意，VC++ 不是标准的 C 编译器，因此它可能会向您抛出各种奇怪的错误。

```
// CONIO2.H
#ifndef CONIO2_H_INCLUDED
#define CONIO2_H_INCLUDED

#include <windows.h>

void clrscr (void) 
{
  DWORD Written = 0;
  COORD ord;
  ord.X = 0;
  ord.Y = 0;
  FillConsoleOutputCharacter (GetStdHandle(STD_OUTPUT_HANDLE), 
                              32, 
                              80 * 25, 
                              ord, 
                              &Written);
}

#endif /* CONIO2_H_INCLUDED */

//MAIN.C

#include <stdio.h>
#include "conio2.h" 
```

# html - 允许在 y 轴上溢出，同时在 x 轴上隐藏溢出

> ID：10522137
> 
> 赞同：6
> 
> 时间：2012-05-09T18:40:19.217
> 
> 标签：html, css

我试图在 y 轴上允许溢出，同时在 x 轴上隐藏溢出。人们可能期望添加这些属性：

```
.overflow {
  overflow-x: hidden;
  overflow-y: visible;
} 
```

到块级元素就足够了，但是由于[此处](http://www.brunildo.org/test/Overflowxy2.html)记录的一些 CSS 实现怪癖，这实际上不起作用。最终发生的是溢出-y 的计算值变为自动，而溢出-x 保持隐藏。

还有其他方法可以完成我想要的行为吗？

只是为了更详细一点，我有一个水平的项目列表，我使用自定义按钮滚动浏览。列表的包含元素的宽度远小于列表的宽度。我不希望出现滚动条，因为我使用自己的自定义按钮来浏览列表，所以我需要隐藏 overflow-x。在悬停时，我想应用一个变换来放大元素的大小，但我希望元素能够溢出到包含元素的顶部和底部之外，因此需要溢出-y 可见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T19:08:35.137

如果您不介意添加一些额外的标记，似乎有一个简单的解决方案。

您只需要使用两个 div，每个溢出一个。

例如：

```
<div class="outer">
    <div class="middle">
         <!-- your content here -->
    </div>
</div> 
```

以及以下标记：

```
.outer {   
    overflow-y: visible;
}

.middle{
    overflow-x: hidden;
} 
```

似乎完成了这项工作。

[这里](http://jsfiddle.net/aD39B/)有一个小例子。

# php - 使用 php curl 下载并保存 gzip 文件

> ID：10522138
> 
> 赞同：1
> 
> 时间：2012-05-09T18:40:19.337
> 
> 标签：php, curl, gzip

我正在尝试使用 curl 和 php 下载 gzip 文件并将其保存在指定位置。下面是我正在使用的代码，但每次它都保存一个空文件，尽管它下载的 gzip 文件是正确的

```
$file_zip = 'abc.gz'
$fp = fopen("$file_zip", "w"); 
$request = curl_init();
$headers = array('Content-type: application/x-gzip','Connection: Close');
curl_setopt($request, CURLOPT_URL, $url);
curl_setopt($request, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($request, CURLOPT_TIMEOUT, 0);
curl_setopt($request, CURLOPT_CONNECTTIMEOUT,0);
curl_setopt($request, CURLOPT_HTTPHEADER,$headers);
curl_setopt($request, CURLOPT_FAILONERROR, true);
curl_setopt($request, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($request, CURLOPT_AUTOREFERER, true);
curl_setopt($request, CURLOPT_BINARYTRANSFER,true);

curl_setopt($request, CURLOPT_FILE, $fp);

$zipFile = curl_exec($request); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:32:45.960

我找到了一种使用 cUrl 将文件下载到某个位置的方法。希望能帮助到你：

```
<?php 
function get_file1($file, $local_path, $newfilename) 
{ 
    $err_msg = ''; 
    echo "<br>Attempting message download for $file<br>"; 
    $out = fopen($newfilename, 'wb'); 
    if ($out == FALSE){ 
      print "File not opened<br>"; 
      exit; 
    } 

    $ch = curl_init(); 

    curl_setopt($ch, CURLOPT_FILE, $out); 
    curl_setopt($ch, CURLOPT_HEADER, 0); 
    curl_setopt($ch, CURLOPT_URL, $file); 

    curl_exec($ch); 
    echo "<br>Error is : ".curl_error ( $ch); 

    curl_close($ch); 
    //fclose($handle); 

}//end function 
?> 
```

来源是：[http ://www.weberdev.com/get_example.php3?ExampleID=4009](http://www.weberdev.com/get_example.php3?ExampleID=4009)

# eclipse - Eclipse 中的项目共享

> ID：10522144
> 
> 赞同：2
> 
> 时间：2012-05-09T18:40:38.600
> 
> 标签：eclipse, project-management, project

我和我的搭档是**eclipse**的新手。
最近我们开始着手一个新项目，但问题是我的合作伙伴在其他办公室工作。
每次我们对文件进行更改，我们都会将这些文件邮寄给对方。
我知道这不是一个好习惯。**eclipse**中是否有任何**工具**使用项目中的更改也反映在他的系统上？

 **谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:45:05.633

我强烈建议为此使用源代码控制系统。根据您的代码的用途，您也许可以使用[Github 。](https://github.com/)如果你使用它，那么你可以在 Eclipse 中使用[EGit](http://www.eclipse.org/egit/)或类似的插件来帮助你保持代码同步。

还有其他几个可用的源代码控制系统。Mercurial、Subversion、CVS 等。查看它们并找出适合您需求的。

注意：使用 Git 和 Mercurial，您可以保留自己的存储库，而不必在某处拥有托管服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:44:47.977

我建议你看看[subclipse](http://subclipse.tigris.org/)我用它在团队中工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:45:24.357

部分在 Eclipse 中，部分不在。

设置 CVS 或[Subversion](http://subversion.apache.org/)存储库，然后你们俩都可以使用内置的 Team 工具来同步您的代码。我认为您必须安装[Subclipse](http://subclipse.tigris.org/)才能使用 Subversion。CVS Team 工具是内置的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T18:46:11.143

[Subclipse](http://subclipse.tigris.org/)是一个很棒的工具。你可以在这里阅读所有关于 Subversion 的信息：http: [//svnbook.red-bean.com/](http://svnbook.red-bean.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T18:46:24.277

请使用任何颠覆工具。

Eclipse 还支持一些 svn、git、...的插件

只需构建您的颠覆服务器并在您的 Eclipse 中使用这些插件。

我想你可以尝试免费使用谷歌代码，或者尝试在谷歌中找到其他颠覆提供者。**

# google-app-engine - App Engine 401/403 状态代码在 WebApp2 上不起作用

> ID：10522150
> 
> 赞同：0
> 
> 时间：2012-05-09T18:41:02.350
> 
> 标签：google-app-engine, http-status-codes, webapp2

当用户尝试访问他们无权访问的内容时，我正在尝试提高 401/403 状态。我使用了[Webapp2 Exceptions](http://webapp-improved.appspot.com/guide/exceptions.html)示例，它为 404/500“自然”事件生成正确的错误代码。比如去[http://localhost:8080/nourl 会](http://localhost:8080/nourl)生成正确的 404 并且搞乱代码会生成 500。但是当我使用下面的方法设置代码时，我会看到代码在控制台，但它没有显示在浏览器中。EG 如果您将 self.error() 留空，它会生成正确的 500 代码。如果您使用 self.error(500) 控制台输出：

```
INFO     2012-05-09 18:25:29,549 dev_appserver.py:2891] "GET / HTTP/1.1" 500 - 
```

但是浏览器是完全空白的。以下是展示此行为的示例应用程序。只需将 self.error() 行更改为所需的代码并运行。预期的结果是它会根据提供的代码生成对浏览器的正确响应，而不仅仅是在发生“自然”事件（例如 404）时。

主文件

```
import webapp2
import wsgiref.handlers
import logging
from google.appengine.api import users

class HomeHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if user:
            self.response.out.write("Hi :1", user.nickname)
        else:
            self.error(401)

app = webapp2.WSGIApplication([
    (r'/', HomeHandler),
], debug=True)

def handle_401(request, response, exception):
    logging.exception(exception)
    response.write("401 Error")
    response.set_status(401)

def handle_403(request, response, exception):
    logging.exception(exception)
    response.write("403 Error")
    response.set_status(403)

def handle_404(request, response, exception):
    logging.exception(exception)
    response.write("404 Error")
    response.set_status(404)

def handle_500(request, response, exception):
    logging.exception(exception)
    response.write("500 Error")
    response.set_status(500)

app.error_handlers[401] = handle_401
app.error_handlers[403] = handle_403
app.error_handlers[404] = handle_404
app.error_handlers[500] = handle_500

#  Run the application
def main():
    app.run() 
```

应用程序.yaml

```
application: 401test
version: 1
runtime: python27
api_version: 1
threadsafe: yes

libraries:
- name: webapp2
  version: latest

handlers:
- url: /.*
  script: main.app 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:02:50.160

~~您正在使用带有线程安全环境的 py27。在您设置的 app.yaml`script: main.app`中，应用程序定义后的代码不会被执行。~~

没有测试它，但这应该工作：

```
# create a bare app 
bare_app = webapp2.WSGIApplication(debug=True)

#define the error handlers
def handle_401(request, response, exception):
    logging.exception(exception)
    response.write("401 Error")
    response.set_status(401)

def handle_403(request, response, exception):
    logging.exception(exception)
    response.write("403 Error")
    response.set_status(403)

def handle_404(request, response, exception):
    logging.exception(exception)
    response.write("404 Error")
    response.set_status(404)

def handle_500(request, response, exception):
    logging.exception(exception)
    response.write("500 Error")
    response.set_status(500)

# add the error handlers
bare_app.error_handlers[401] = handle_401
bare_app.error_handlers[403] = handle_403
bare_app.error_handlers[404] = handle_404
bare_app.error_handlers[500] = handle_500

bare_app.router.add((r'/', HomeHandler))

app = bare_app 
```

 ~~**编辑**：
使用 self.abort() 而不是 self.error()
[http://webapp-improved.appspot.com/guide/exceptions.html#abort](http://webapp-improved.appspot.com/guide/exceptions.html#abort)

您可以在源代码中看到差异：
[http://code.google.com/p/webapp-improved/source/browse/webapp2.py#574](http://code.google.com/p/webapp-improved/source/browse/webapp2.py#574)
而 self.error() 设置状态代码但清除响应， self.abort() 执行负责错误处理的函数。~~

# winapi - 在紧密循环中调用 GetKeyState，为什么它不起作用？

> ID：10522152
> 
> 赞同：1
> 
> 时间：2012-05-09T18:41:04.447
> 
> 标签：winapi

在 Charles Petzold 的《Programming Windows》一书中，他提到了以下内容：

“小心 GetKeyState。它不是实时键盘状态检查。而是反映键盘状态，直至并包括正在处理的当前消息。”

“不要做`while(GetKeyState(VK_F1) >= 0);`”，保证会挂起你的程序。

我完全不明白这些。请有人对这两个事实进行解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:13:46.610

每次您读取排队的键盘消息时，例如通过调用`GetMessage`，操作系统都会更新与调用线程关联的私有键盘状态数据。当您调用`GetKeyState` 该私有键盘状态数据时，该数据用于确定返回的键状态。因此，只要您不阅读另一条排队的消息，`GetKeyState`将始终返回相同的值。

# ruby-on-rails - 独角兽不适合 Capistrano 部署？

> ID：10522154
> 
> 赞同：0
> 
> 时间：2012-05-09T18:41:14.133
> 
> 标签：ruby-on-rails, capistrano, unicorn

在 Capistrano 部署中使用独角兽时遇到问题。据我所知，Capistrano 使用了一个方案，每个版本都以唯一的名称部署在发布目录中，如果事务成功，则创建一个名为 current 的符号链接，指向该版本。

所以我最终得到了一个部署目录，例如：

```
/home/deployer/apps/sample_app/current 
```

然后，当我尝试从 binstubs 目录启动 unicorn 时，所有 unicorn 方法都会在以下路径中查找内容，特别是在 configurator.rb 模块中：

```
/home/deployer/apps/sample_app 
```

我无法完全理解 unicorn 如何从这里设置 working_directory：

[https://github.com/defunkt/unicorn/raw/master/lib/unicorn/configurator.rb](https://github.com/defunkt/unicorn/raw/master/lib/unicorn/configurator.rb)

但是我想与社区核实一下，由于我的菜鸟本性，我是否遗漏了一些明显的东西。

顺便说一句，我开始独角兽如下

```
APP_ROOT=/home/deployer/apps/sample_app/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="$APP_ROOT/bin/unicorn -D -E production -c $APP_ROOT/config/unicorn.rb" 
```

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:07:59.730

这是通过 unicorn.rb config working_directory 参数设置的

# c++ - Q_FOREACH (= foreach) 宏是如何工作的，为什么这么复杂？

> ID：10522155
> 
> 赞同：36
> 
> 时间：2012-05-09T18:41:21.673
> 
> 标签：c++, qt, macros, foreach

在 Qt 中，有一个`foreach`使用宏 ( ) 实现的循环`Q_FOREACH`。有不同的实现，具体取决于编译器。

**GCC**的定义如下：

```
#define Q_FOREACH(variable, container)                                \
for (QForeachContainer<__typeof__(container)> _container_(container); \
     !_container_.brk && _container_.i != _container_.e;              \
     __extension__  ({ ++_container_.brk; ++_container_.i; }))        \
    for (variable = *_container_.i;; __extension__ ({--_container_.brk; break;})) 
```

`QForeachContainer`...使用定义如下的助手类：

```
template <typename T>
class QForeachContainer {
public:
    inline QForeachContainer(const T& t) : c(t), brk(0), i(c.begin()), e(c.end()) { }
    const T c;
    int brk;
    typename T::const_iterator i, e;
}; 
```

`Q_FOREACH`宏中的容器必须是一个类`T`，它至少必须提供`T::const_iterator`类型、a`T.begin()`和`T.end()`方法，所有 STL 容器以及大多数 Qt 容器（如`QList`, `QVector`, `QMap`, `QHash`, ...

我现在的问题是：**这个宏是如何工作的？**

有一件事似乎很奇怪：变量在宏定义中只出现一次。所以例如在任何时候`foreach(QString item, list)`都有一个`QString item =`但没有之后......然后如何在每个步骤中更改`item =`变量？`item`

更令人困惑的是`Q_FOREACH` **MS VC++ 编译器**的以下定义：

```
#define Q_FOREACH(variable,container)                                                         \
if(0){}else                                                                                     \
for (const QForeachContainerBase &_container_ = qForeachContainerNew(container);                \
     qForeachContainer(&_container_, true ? 0 : qForeachPointer(container))->condition();       \
     ++qForeachContainer(&_container_, true ? 0 : qForeachPointer(container))->i)               \
    for (variable = *qForeachContainer(&_container_, true ? 0 : qForeachPointer(container))->i; \
         qForeachContainer(&_container_, true ? 0 : qForeachPointer(container))->brk;           \
         --qForeachContainer(&_container_, true ? 0 : qForeachPointer(container))->brk) 
```

为什么`true : 0 ? ...`？这不是总是被评估`0`吗？`qForeachPointer(container)`即使之前的条件`?`为真，函数调用是否也会执行？

为什么我们需要两个 for 循环？

如果有人能让我更清楚一点，那就太酷了！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-09T18:56:04.673

## GCC 版本

* * *

GCC 真的很简单。首先它是这样使用的：

```
Q_FOREACH(x, cont)
{
    // do stuff
} 
```

这将扩展到

```
for (QForeachContainer<__typeof__(cont)> _container_(cont); !_container_.brk && _container_.i != _container_.e; __extension__  ({ ++_container_.brk; ++_container_.i; }))
    for (x = *_container_.i;; __extension__ ({--_container_.brk; break;}))
    {
        // do stuff
    } 
```

所以首先：

```
for (QForeachContainer<__typeof__(cont)> _container_(cont); !_container_.brk && _container_.i != _container_.e; __extension__  ({ ++_container_.brk; ++_container_.i; })) 
```

这是实际的`for`循环。它设置了一个`QForeachContainer`来帮助迭代。`brk`变量初始化为 0。然后测试条件：

```
!_container_.brk && _container_.i != _container_.e 
```

`brk`为零所以`!brk`是真的，并且大概如果容器有任何元素`i`（当前元素）不等于`e`（最后一个元素）。

然后进入那个outer的body `for`，也就是：

```
for (variable = *_container_.i;; __extension__ ({--_container_.brk; break;}))
{
    // do stuff
} 
```

所以`x`设置为`*_container_.i`迭代所在的当前元素，并且没有条件，所以大概这个循环将永远持续下去。然后进入循环体，也就是我们的代码，它只是一个注释，所以它什么也不做。

然后进入内循环的增量部分，有趣的是：

```
__extension__ ({--_container_.brk; break;}) 
```

它递减`brk`，所以现在是 -1，并跳出循环（`__extension__`这使得 GCC 不会发出使用 GCC 扩展的警告，就像你现在知道的那样）。

然后进入外循环的增量部分：

```
__extension__  ({ ++_container_.brk; ++_container_.i; }) 
```

它再次递增`brk`并再次变为0，然后`i`递增，因此我们到达下一个元素。检查条件，因为`brk`现在是 0 并且`i`可能还不等于`e`（如果我们有更多元素），重复该过程。

为什么我们先递减然后再递增`brk`呢？`break`原因是因为如果我们在代码主体中使用，内部循环的增量部分将不会被执行，如下所示：

```
Q_FOREACH(x, cont)
{
    break;
} 
```

然后`brk`当它跳出内循环时仍然为0，然后将进入外循环的增量部分并将其增加到1，然后`!brk`将为假，外循环的条件将评估为假，而foreach将停止。

诀窍是要意识到有两个`for`循环；外层的生命是整个foreach，而内层的生命只持续一个元素。这*将*是一个无限循环，因为它没有条件，但它要么`break`被它的增量部分所淘汰，要么被`break`你提供的代码中的 a 所淘汰。这就是为什么`x`看起来它被分配给“仅一次”但实际上它被分配给外循环的每次迭代。

## VS 版本

* * *

VS 版本稍微复杂一点，因为它必须解决缺少 GCC 扩展`__typeof__`和块表达式的问题，而且它为 (6) 编写的 VS 版本没有`auto`或其他花哨的 C++11 功能。

让我们看一下我们之前使用的扩展示例：

```
if(0){}else
    for (const QForeachContainerBase &_container_ = qForeachContainerNew(cont); qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->condition(); ++qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->i)
        for (x = *qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->i; qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->brk; --qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->brk)
        {
            // stuff
        } 
```

这`if(0){}else`是因为 VC++ 6 对`for`变量的作用域做错了，在循环的初始化部分声明的变量`for`可以在循环外使用。所以这是一个 VS 错误的解决方法。他们这样做的原因`if(0){}else`不仅仅是`if(0){...}`因为你不能`else`在循环之后添加一个，比如

```
Q_FOREACH(x, cont)
{
    // do stuff
} else {
    // This code is never called
} 
```

其次，让我们看一下外部的初始化`for`：

```
const QForeachContainerBase &_container_ = qForeachContainerNew(cont) 
```

的定义`QForeachContainerBase`是：

```
struct QForeachContainerBase {}; 
```

的定义`qForeachContainerNew`是

```
template <typename T>
inline QForeachContainer<T>
qForeachContainerNew(const T& t) {
    return QForeachContainer<T>(t);
} 
```

的定义`QForeachContainer`是

```
template <typename T>
class QForeachContainer : public QForeachContainerBase {
public:
    inline QForeachContainer(const T& t): c(t), brk(0), i(c.begin()), e(c.end()){};
    const T c;
    mutable int brk;
    mutable typename T::const_iterator i, e;
    inline bool condition() const { return (!brk++ && i != e); }
}; 
```

因此，为了弥补`__typeof__`（类似于`decltype`C++11 的）的不足，我们必须使用多态性。该`qForeachContainerNew`函数按值返回 a`QForeachContainer<T>`但由于[temporaries 的生命周期延长](https://stackoverflow.com/questions/6936720/why-lifetime-of-temporary-doesnt-extend-till-lifetime-of-enclosing-object)，如果我们将其存储在 a 中`const QForeachContainer&`，我们可以将其生命周期延长到外部结束`for`（实际上是`if`因为 VC6 的错误）。我们可以将 a 存储`QForeachContainer<T>`在 a 中，`QForeachContainerBase`因为前者是后者的子类，我们必须将其设为引用`QForeachContainerBase&`而不是值，`QForeachContainerBase`以避免切片。

然后对于外部的条件`for`：

```
qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->condition(); 
```

的定义`qForeachContainer`是

```
inline const QForeachContainer<T> *qForeachContainer(const QForeachContainerBase *base, const T *) {
    return static_cast<const QForeachContainer<T> *>(base);
} 
```

的定义`qForeachPointer`是

```
template <typename T>
inline T *qForeachPointer(const T &) {
    return 0;
} 
```

这是您可能不知道发生了什么的地方，因为这些功能似乎毫无意义。以下是它们的工作方式以及您需要它们的原因：

我们将 a`QForeachContainer<T>`存储在对 a 的引用中`QForeachContainerBase`，但无法将其取回（我们可以看到）。我们必须以某种方式将其转换为正确的类型，这就是两个函数的用武之地。但是我们如何知道将其转换为什么类型呢？

三元运算符的规则`x ? y : z`是，`y`并且`z`必须是同一类型。我们需要知道容器的类型，所以我们使用`qForeachPointer`函数来做到这一点：

```
qForeachPointer(cont) 
```

的返回类型`qForeachPointer`是`T*`，所以我们使用模板类型推导来推导容器的类型。

这`true ? 0 : qForeachPointer(cont)`是为了能够将`NULL`正确类型的指针传递给它，`qForeachContainer`这样它就会知道将我们给它的指针转换为什么类型。为什么我们为此使用三元运算符而不仅仅是做`qForeachContainer(&_container_, qForeachPointer(cont))`？这是为了避免`cont`多次评估。`?:`除非条件是 ，否则不会评估第二个（实际上是第三个）操作数`false`，并且由于条件`true`本身就是，我们可以在`cont`不评估它的情况下获得正确的类型。

这样就解决了这个问题，我们使用`qForeachContainer`转换`_container_`为正确的类型。电话是：

```
qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont)) 
```

再次定义是

```
inline const QForeachContainer<T> *qForeachContainer(const QForeachContainerBase *base, const T *) {
    return static_cast<const QForeachContainer<T> *>(base);
} 
```

第二个参数总是`NULL`因为我们`true ? 0`总是计算`0`结果`T`为):`QForeachContainer<T>*``for`

```
qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->condition() 
```

并`condition`返回：

```
(!brk++ && i != e) 
```

这与上面的 GCC 版本相同，只是它`brk`在评估后递增。所以`!brk++`计算为`true`然后`brk`递增到 1。

然后我们进入内部`for`并开始初始化：

```
x = *qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->i 
```

这只是将变量设置为迭代器`i`指向的内容。

那么条件：

```
qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->brk 
```

既然`brk`是1，就进入循环体，也就是我们的注释：

```
// stuff 
```

然后输入增量：

```
--qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->brk 
```

减`brk`回到 0。然后再次检查条件：

```
qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->brk 
```

And`brk`为 0，即`false`退出循环。我们来到外部的增量部分`for`：

```
++qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->i 
```

并且递增`i`到下一个元素。然后我们得到条件：

```
qForeachContainer(&_container_, true ? 0 : qForeachPointer(cont))->condition() 
```

哪个检查`brk`是 0（它是）并再次将其增加到 1，并且如果 重复该过程`i != e`。

这`break`在客户端代码中的处理方式与 GCC 版本略有不同，因为`brk`如果我们`break`在代码中使用它不会递减并且它仍然是 1，并且`condition()`外部循环将为 false，外部循环将为`break`.

正如 GManNickG 在评论中所说，这个宏很像 Boost 的`BOOST_FOREACH`，你可以在[这里](http://www.artima.com/cppsource/foreach.html)阅读。这样就搞定了，希望能帮到你。

# java - Android：查询数据库时未捕获的处理程序异常

> ID：10522156
> 
> 赞同：2
> 
> 时间：2012-05-09T18:41:27.970
> 
> 标签：java, android, database, sqlite, exception

我正在尝试根据用户输入查询我的数据库，但我得到了这个异常，我不知道是什么原因造成的。

这是表的架构：

```
private static String CREATE_TABLE_ASSOCIATION = "create table "    
        + TABLE_ASSOCIATION + "( " + COLUMN_QUESTION_ID + " integer not null, "
        + COLUMN_ANSWER + " text not null, " + COLUMN_DATETIME + " text not null, " 
        + "FOREIGN KEY (" + COLUMN_QUESTION_ID + ") REFERENCES " + TABLE_QUESTION
        + "(" + COLUMN_ID + "), FOREIGN KEY (" + COLUMN_ANSWER + ") "
        + "REFERENCES "+ TABLE_ANSWER + "(" + COLUMN_ANSWER + "), " 
        + "FOREIGN KEY (" + COLUMN_DATETIME + ") REFERENCES " + TABLE_ANSWER
        + "(" + COLUMN_DATETIME + ") PRIMARY KEY (" + COLUMN_QUESTION_ID + "," + COLUMN_DATETIME + "));"; 
```

这是活动中的代码：

```
public void query()
{
    quesNum = (EditText)findViewById(R.id.idBox);
    startingDate = (EditText)findViewById(R.id.startDate);
    endingDate = (EditText)findViewById(R.id.endDate);
    String num, start, end;

    num = quesNum.getText().toString();
    start = startingDate.getText().toString();
    end = endingDate.getText().toString();
    ArrayList<ArrayList<String>> result = datasource.getAnswer(Integer.parseInt(num), start, end);
    textview.setText(result.get(0).toString());
}

public void onClick(View view)
{

    switch (view.getId())
    {
        case R.id.add:
                changeText();
                break;
        case R.id.query:
            query();
            break;               
    }
} 
```

这是被调用来查询数据库的方法：

```
public ArrayList<ArrayList<String>> getAnswer(int questionId, String startDate, String endDate)
{
    String query = "SELECT " + HealthyDroidQuizHelper.COLUMN_ANSWER + ", "
    + HealthyDroidQuizHelper.COLUMN_DATETIME + " FROM " + HealthyDroidQuizHelper.TABLE_ASSOCIATION
    + " WHERE " + HealthyDroidQuizHelper.COLUMN_QUESTION_ID + " = " + questionId + " AND "
    + HealthyDroidQuizHelper.COLUMN_DATETIME + " BETWEEN " + startDate + " AND " + endDate;

    ArrayList<ArrayList<String>> totalResults = new ArrayList<ArrayList<String>>();
    ArrayList<String> QuizResults = new ArrayList<String>();
    String ans, currDate, oldDate = null;

    Cursor cursor = database.rawQuery(query, null);
    cursor.moveToFirst();
    oldDate = cursor.getString(cursor.getColumnIndex(HealthyDroidQuizHelper.COLUMN_DATETIME));
    QuizResults.add(oldDate);
    while(!cursor.isAfterLast())
    {
        currDate = cursor.getString(cursor.getColumnIndex(HealthyDroidQuizHelper.COLUMN_DATETIME));
        if(!oldDate.equalsIgnoreCase(currDate))
        {
            QuizResults.add(currDate);
            oldDate = currDate;
        }

        ans = cursor.getString(cursor.getColumnIndex(HealthyDroidQuizHelper.COLUMN_ANSWER));
        QuizResults.add(ans);
        cursor.moveToNext();
    }

    totalResults.add(QuizResults);
    return totalResults;
} 
```

最后，这是 Logcat 输出：

```
05-09 19:07:32.897: D/AndroidRuntime(1229): Shutting down VM
05-09 19:07:32.897: W/dalvikvm(1229): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-09 19:07:32.897: E/AndroidRuntime(1229): Uncaught handler: thread main exiting due to uncaught exception
05-09 19:07:32.907: E/AndroidRuntime(1229): java.lang.IllegalStateException: Could not execute method of the activity
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.View$1.onClick(View.java:2031)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.View.performClick(View.java:2364)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.View.onTouchEvent(View.java:4179)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.View.dispatchTouchEvent(View.java:3709)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.os.Looper.loop(Looper.java:123)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.app.ActivityThread.main(ActivityThread.java:4363)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at java.lang.reflect.Method.invokeNative(Native Method)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at java.lang.reflect.Method.invoke(Method.java:521)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at dalvik.system.NativeStart.main(Native Method)
05-09 19:07:32.907: E/AndroidRuntime(1229): Caused by: java.lang.reflect.InvocationTargetException
05-09 19:07:32.907: E/AndroidRuntime(1229):     at ca.bcit.comp4900.TestDatabaseActivity.onClick(TestDatabaseActivity.java:74)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at java.lang.reflect.Method.invokeNative(Native Method)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at java.lang.reflect.Method.invoke(Method.java:521)
05-09 19:07:32.907: E/AndroidRuntime(1229):     at android.view.View$1.onClick(View.java:2026)
05-09 19:07:32.907: E/AndroidRuntime(1229):     ... 22 more
05-09 19:07:32.907: E/AndroidRuntime(1229): Caused by: java.lang.NullPointerException
05-09 19:07:32.907: E/AndroidRuntime(1229):     at ca.bcit.comp4900.TestDatabaseActivity.query(TestDatabaseActivity.java:60)
05-09 19:07:32.907: E/AndroidRuntime(1229):     ... 26 more
05-09 19:07:32.937: I/dalvikvm(1229): threadid=7: reacting to signal 3
05-09 19:07:32.947: I/dalvikvm(1229): Wrote stack trace to '/data/anr/traces.txt' 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:51:21.337

这是错误：

`Caused by: android.database.sqlite.SQLiteException: near "AND": syntax error: , while compiling: SELECT answer, dateTime FROM association WHERE questionId = 1 AND dateTime BETWEEN AND`

您的 WHERE 子句显示“...dateTime BETWEEN AND...”关键字“BETWEEN”和“AND”之间缺少一个参数。

所以看起来`startDate`（也许也是`endDate`）是`getAnswer()`.

# iphone - TapGesture segue 可以查看，但不能查看控制器

> ID：10522161
> 
> 赞同：0
> 
> 时间：2012-05-09T18:41:35.423
> 
> 标签：iphone, ios, xcode, segue

我有一个带有 UITableView 的 RootViewController，它将（推送）到 DetailViewController。在 DetailViewController 中使用 tapGestureRecognizer，它将返回（推送）到 RootViewController。

几天前，当 tapGestureRecognizer 设置为与 RootViewController 视图而不是 RootViewController 本身进行连接时，返回 RootViewController 的连接工作正常。在某个地方，我将 segue 更改为降落在 RootViewController 本身，现在 segue 返回不起作用。出于某种原因，xcode 不会让我 ctrl + 从 tapRecognizer 拖动到 RootViewController 视图，只有 RootViewController。如果我能够拖动到视图，我几乎可以肯定它会起作用。

关于为什么我不能突然 ctrl + 拖动到视图的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:11:59.143

我知道了。我需要在引用插座集合中`gestureRecognizers`连接。`View`

# php - Jquery OnChange 触发但没有返回数据

> ID：10522162
> 
> 赞同：1
> 
> 时间：2012-05-09T18:41:37.747
> 
> 标签：php, jquery, mysql

我已经发布了几次以寻求帮助，我似乎无法弄清楚为什么我没有从动态下拉列表中获取任何数据，但我从 2 个静态字段中获取。我确实得到了一些答案，但主要是说我需要解决安全问题，我希望在任何东西上线之前先学习一下，Firebug 中的一切看起来都很好，包括 http 请求的跟踪，我认为这是查询的问题我正在尝试运行，我将再次发布此内容，看看是否有人可以在我解决安全漏洞之前帮助我。

非常感谢你帮助我。

首先是html，子类别是问题，所有项目都存储在一个javascript数组中并且工作正常，只是不是查询

```
<select name="Category" id="Category" 
onchange="javascript: dropdownlist(this.options[this.selectedIndex].value);">
<option value="">Select Category</option>

<select name="subcategory" id="subcategory">
<option value="">Select Sub-Category</option>
</select>

<script>

$(function() {
  $('#subcategory').change(function() {
        $('#subcategory').load('results.php', {value: $(this).val()});
  });
});

</script>

 $category=$_POST['Category'];
 $subcategory=$_POST['Subcategory'];
 $destination=$_POST['Destination'];

 $result = mysql_query("SELECT * FROM travel WHERE Category='$category' 
 AND Subcategory='$subcategory' AND Destination='$destination'")
 or die(mysql_error());

 $row = mysql_fetch_assoc( $result ) ; 
```

回显到表（未发布，工作正常）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:04:42.970

从哪里开始？您的字段名称是“子类别”。您将“值”传递给 results.php 并尝试从`$_POST`数组中检索“子类别”。您需要将所有这些名称排成一行。

我不确定 PHP 是否有 results.php 的代码或表单发布到的任何脚本，或者它们是否相同？无论如何，无论 results.php 需要什么，您都需要在传递给加载的数据中包含它。例如，由于您当前使用“值”，因此您将通过 而不是 检索`$_POST['value']`该*值* `$_POST['Subcategory']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:27:21.147

您只能从“#subcategory”表单传递给 php 数据，而不是从“#Category”传递给 php 数据，并且使用的 id 不是您在 php 代码中使用的。而且你没有“目的地”的代码，所以我不知道应该从哪里获取。`$(document).ready`使用 jquery 时最好将代码放入其中。它应该是这样的：

```
 $(document).ready(function() {
      $('#subcategory').change(function() {
            $('#subcategory').load('results.php', {Subcategory: $(this).val(), Category: $("#Category").val() });
      });
    }); 
```

# erlang - 氮气中的二郎饼干

> ID：10522164
> 
> 赞同：1
> 
> 时间：2012-05-09T18:41:39.930
> 
> 标签：erlang, rpc, nitrogen

我正在尝试从氮气调用同一台机器上的单独 Erlang 节点（目前从 Nitrogen 控制台对其进行测试，但最终目标是从 webapp 调用另一个节点）。我`.erlang.cookie`在我的主目录中设置了一个文件。

第一次尝试，使用 启动另一个节点`erl -name node_a`，然后`load`ing 和`start`ing 应用程序，然后执行

```
nitrogen@127.0.0.1> rpc:call(node_a@mymachine.fully.qualified.host, ps_bc, generate, [arglist]). 
```

给我

```
{badrpc, nodedown} 
```

在氮气控制台中，以及

```
=ERROR REPORT==== 9-May-2012::14:25:28 ===
** Connection attempt from disallowed node 'nitrogen@127.0.0.1' ** 
```

在`node_a`控制台中。我认为这意味着 Nitrogen 读取的 cookie 文件与`node_a`. 有没有办法手动设置它的cookie？有没有办法让两个节点玩得很好而不为两者设置相同的cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:10:47.417

指定 Erlang cookie 的推荐位置是 etc/vm.args。第一行应该是`-setcookie`一行。

作品中有新的文档将正确记录指定 erlang cookie。感谢您指出它实际上没有记录在任何地方。事实上，新文档将包括一个完整的配置设置部分来帮助这种事情。再次感谢！

当前可以在[https://github.com/choptastic/nitrogen_core/blob/config-docs/doc/org-mode/config.org](https://github.com/choptastic/nitrogen_core/blob/config-docs/doc/org-mode/config.org)找到用于配置的“in-the-works”文档（请注意，此文档非常*原始*）。

编辑：这现在正式记录在这里： http: [//nitrogenproject.com/doc/config.html](http://nitrogenproject.com/doc/config.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:57:05.103

是的，有一种方法可以为许多 erlang 节点使用相同的 cookie。对于这种情况，您不能对所有节点使用 -setcooke，也不能使用 erlang:setcookie/1。

我对氮气一无所知，但如果是连接问题，请检查以下内容

从氮节点

```
> node().
> erlang:get_cookie(). 
```

从您的节点

```
> node().
> erlang:get_cookie(). 
```

如果 cookie 不同，请使用 -setcookie 启动您的节点

```
~$erl -name node_a@127.0.0.1 -setcookie nitrogen_cookie 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T02:48:03.147

比我想象的要简单，尽管除了脚本代码本身之外似乎没有记录在任何地方；`bin/nitrogen`就像接受`-setcookie`命令行选项一样`erl`。它也接受`-name`和接受`-sname`，尽管在这里两者都不是特别相关。

使用 bighostkim 的方法告诉我，默认的氮气 cookie 实际上是“ `nitrogen`”，因此另一个（不太安全）选项是将其他节点的 cookie 设置为相同。

如果有人想将此作为单独的答案，请继续，以便我可以接受您的答案（我不能再接受我自己的答案）。

# c# - c# MVC 4 Web API - 从 JSON 字符串返回对象

> ID：10522168
> 
> 赞同：1
> 
> 时间：2012-05-09T18:41:52.380
> 
> 标签：c#, json, asp.net-mvc-4, asp.net-web-api

我正在使用 mvc 4 web api 构建一个始终返回 JSON 的服务层。

我的 api 方法调用实际上调用了另一个返回 JSON 对象的服务。然后我想将这个 JSON 对象作为我的返回对象传回，但我不确定要使用什么返回类型。

如果我使用字符串，它会将 JSON 对象用引号括起来。

顺便说一句，我已经将默认的 MediaTypeFormatter 更改为 JSON。

这是 JSON 对象的示例：

```
{
  "responseHeader":{
  "status":0,
   "QTime":0,
   "params":{
     "indent":"on",
     "q":"id:100001",
     "wt":"json"}},
  "response":{"numFound":1,"start":0,"docs":[
  {
    "Header":"Test Header",
    "MaxPrice":515.0,
    "ApartmentName":"Apartment 1",
    "MaxBathrooms":4.0,
    "Pool":true,
    "MinBathrooms":2.0,
    "MaxBedrooms":4,
    "CoveredParking":false}]
  }} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T18:52:28.153

在 Beta 版本中，您可以使用`JsonValue`（来自 System.Json 命名空间）。如果您对其他服务的调用返回一个包含 JSON 数据的字符串，那么您可以调用`JsonValue.Parse`将其加载到要返回的对象中。

在 RC 版本（或来自[http://aspnetwebstack.codeplex.com](http://aspnetwebstack.codeplex.com)的当前位）中，您可以使用该`JToken`对象（来自 Newtonsoft.Json.Linq 命名空间） - 默认 JSON 序列化程序和 JSON DOM 现在来自 JSON .NET 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:18:04.357

所以，问题原来是我正在获取一个序列化的 json 对象，然后在覆盖默认 xml MediaTypeFormatter 的 JavaScriptSerializerFormatter 中重新序列化。

我通过返回 JsonValue 然后检查类型而不是重新序列化它来解决这个问题。

感谢 carlosfigueira 帮助找到这个。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-09T18:53:42.020

要从 MVC 返回 Json，请使用 JsonResult。您可以先使用 DataContractJsonSerializer 将字符串转换为对象。

[http://shashankshetty.wordpress.com/2009/03/04/using-jsonresult-with-jquery-in-aspnet-mvc/](http://shashankshetty.wordpress.com/2009/03/04/using-jsonresult-with-jquery-in-aspnet-mvc/)

# .htaccess - 通过 htaccess 重定向并添加字符串

> ID：10522174
> 
> 赞同：0
> 
> 时间：2012-05-09T18:42:19.980
> 
> 标签：.htaccess, redirect

我需要两件事

1.  将所有请求从**http://127.0.0.1**重定向到**http://127.0.0.1/cakephp**
2.  将所有请求从**http://127.0.0.1/somefolder/someaction**重定向到**http://127.0.0.1/cakephp/somefolder/someaction**
3.  如果请求到此页面**http://127.0.0.1/cakephp ，则不执行任何操作**

我试过这个，但做不到。你能推荐正确的代码吗？

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://127.0.0.1/cakephp/$1 [R]
RewriteCond %{HTTP_HOST} ^127.0.0.1 [NC] 
RewriteRule ^(.*)$ http://127.0.0.1/cakephp/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:00:29.550

尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^127.0.0.1 [NC] 
RewriteCond %{REQUEST_URI} !^cakephp(/.*)?$
RewriteRule ^(.*)$ /cakephp/$1 [R=301,NC,L] 
```

# jquery - 按类访问时如何动态获取每个元素的innerHTML

> ID：10522178
> 
> 赞同：0
> 
> 时间：2012-05-09T18:42:38.120
> 
> 标签：jquery

按类访问时如何动态获取每个元素的innerHTML？

这是一个例子：http: [//jsfiddle.net/DwDsL/](http://jsfiddle.net/DwDsL/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:43:49.597

您可以使用[.each](http://jqapi.com/#p=each)

```
$('.btnItem').each(function(){
 // do your stuff using $(this)
}); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T18:44:49.113

将[每个](http://api.jquery.com/jQuery.each/)函数与[类](http://api.jquery.com/class-selector/)选择器和[html](http://api.jquery.com/html/)函数一起使用以获取 innerhtml

```
$('.classname').each(function() {
    alert($(this).html());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:46:53.710

只需使用`.wrap`：

```
$(".btnItem").wrap('<div></div>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T18:48:19.363

```
$('.btnItem').wrap('<div/>'); 
```

足够

如果你想`<span>`用`<div>`剩余的 html 替换，那么试试

```
$('.btnItem').replaceWith(function(a, html) {
   return '<div>' + html + '</div>';
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T18:48:20.003

```
$("span.btnItem").each(function(index) {
    $("<div>" + $(this).html() + "</div>").insertAfter($(this));
    $(this).remove();
}); 
```

[演示](http://jsfiddle.net/Fz9bn/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T18:48:51.547

```
function g() {  
    $(".btnItem").each(function(){
       con = $(this).text();
       $("<div>" + con + "</div>").insertAfter(".btnItem")
    })

    $(".btnItem").remove();
} 
```

[http://jsfiddle.net/DwDsL/1/](http://jsfiddle.net/DwDsL/1/)

# pointers - 什么是指针？就像字面意思一样，它是什么？

> ID：10522185
> 
> 赞同：2
> 
> 时间：2012-05-09T18:43:17.030
> 
> 标签：pointers

我知道指针的作用，它们指向特定的内存位置。但是指向那个内存位置的实际东西是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T18:45:33.667

指针是一个整数，将内存地址保存到它所指向的任何地方。

# python - python strptime的自定义格式指令

> ID：10522187
> 
> 赞同：1
> 
> 时间：2012-05-09T18:43:22.187
> 
> 标签：python, time, strptime, string-to-datetime

我必须接收一个代表日期的字符串，以便通过 time.strptime 以类似于 %d%m%Y 的格式处理，但问题是当日期数小于 10 时，日期将显示为一位数数字，而不是 %d 格式要求的两位数。

这意味着

```
'8052012' 
```

将被翻译为

```
day 08, month 05, year 2012 
```

但是用字符串

```
'2052012' 
```

strptime 给了我

```
day 20, month 5, year 2012 
```

代替

```
day 2, month 5, year 2012 
```

有没有办法解决这种默认行为？（也许强制 %m 应该是一个 2 位数字，所以 strptime 将无法选择使用当天剩下的内容？）

编辑：请注意，在输入字符串上，月份总是有两位数字，即使它可以用一个数字表示。这里的问题只是可能用一位或两位数字表示的日期，具体取决于幅度......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T18:52:26.927

您对这些数据的`time.strptime`了解比从格式字符串中了解的更多。

`'0'`通过在日期字符串长度为 7 时添加前缀来消除歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:53:25.133

对我来说，打印该字符串似乎有问题。通常 %d 返回 2 位数字（参见：[http](http://docs.python.org/library/time.html#time.strftime) ://docs.python.org/library/time.html#time.strftime ）。也许您将此类字符串转换为 long 或 int 值并打印它？如果您确实需要解析此类值，假设您应该验证此类条目的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:59:23.780

您可以尝试从最后数数：

```
dd='2052012'
print 'Day', dd[:-6], 'Month:',dd[-6:-4], 'Year: ', dd[-4:] 
```

# r - ggplot2 直方图在使用 facet_grid 时会改变绘图？

> ID：10522191
> 
> 赞同：3
> 
> 时间：2012-05-09T18:43:28.300
> 
> 标签：r, ggplot2

我试图弄清楚为什么当我添加 facet_wrap 时使用 qplot 的直方图会发生变化。[您可以在此处](https://gist.github.com/2647709)找到我用于此示例的数据

我的 facet_grid 中的因素来自使用`cut`：

```
library(ggplot2)
data <- read.csv("data.csv")
data$cuts <- cut(data$y, c(0, 50, 100, 500, Inf)) 
```

所以现在我有了这个：

```
> summary(data)
       y                 x                cuts    
 Min.   :  10.00   Min.   :0.000   (0,50]   :530  
 1st Qu.:  20.75   1st Qu.:1.000   (50,100] :179  
 Median :  46.00   Median :1.000   (100,500]:258  
 Mean   : 110.18   Mean   :0.834   (500,Inf]: 33  
 3rd Qu.: 121.00   3rd Qu.:1.000                  
 Max.   :1526.00   Max.   :1.000 
```

如果我只看 的部分`cuts=="(0,50]"`，它看起来很好。：

```
qplot(x, data=subset(data, cuts=="(0,50]")) 
```

![](../Images/6ece9d14d33ff8ed9d294f84c3cb5388.png)

但是当我添加一个分面网格时，y 轴都是错误的：

```
qplot(x, data=data) + facet_grid(cuts~., scales="free_y") 
```

![](../Images/1a040b8e8148c858b39b837210a65d81.png)

请注意，顶部刻面的 y 轴现在只有 40ish 而不是超过 450。唯一看起来正确的刻面是`(500,Inf]`。

编辑：我在 R 2.14.2 中使用 ggplot 0.9.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:18:52.887

ggplot 9.1 大约在一天前发布，并且在该软件包版本中得到了解决。所以我的答案是下载 ggplot2 0.9.1 错误修复版本。

此外，您可能希望使用以下`right`参数`geom_histogram`：`geom_histogram(binwidth = 0.2, right = TRUE) +`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:15:26.830

正如 Sandy 所指出的，这似乎是 ggplot facet_grid “忽略重复行”错误。一个简单的解决方法是添加这个无所事事的行，

```
data$index = seq.int(1,1000,1) 
```

让每一行都是独一无二的，你会得到你想要的。

# css - CSS IE 8 问题：我在搜索表单上的提交按钮在我的 div 背景颜色后面

> ID：10522198
> 
> 赞同：0
> 
> 时间：2012-05-09T18:44:04.747
> 
> 标签：css, html, internet-explorer-8, submit-button

我有一个位于[http://www.candyundies.com/template_non_product.php](http://www.candyundies.com/template_non_product.php)的测试页面。

在 Opera、FireFox、Safari 和 Chrome 中没有问题，但在 IE 8 中，我的提交按钮 (GO) 位于我的搜索文本框旁边，它在它自己的 div 中 (search2) 在背景 div 颜色下。我试过 z-index 但不能让它显示在背景颜色之上。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:48:39.690

例如，添加 position: absolute/relative 和 z-index 1 将使其再次可见。（当然是提交按钮）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:55:06.137

您可以通过设置`z-index`此元素的 ，`id`或者更好的是，将背景设置`z-index`为低于其他元素并高于`body`如果它不是`body`本身，如您所描述的。

# javascript - 使用“this”时，函数会失去上下文 - Raphael JS

> ID：10522199
> 
> 赞同：0
> 
> 时间：2012-05-09T18:44:05.380
> 
> 标签：javascript, raphael

我正在循环一个对象并在 Raphael 中创建圆圈。在我创建的每个圆圈上，我都附加了一个单击事件和一个鼠标悬停事件。但是，当我使用“this”将圆圈移到前面时，例如 this.toFront() ，那么我的 .click 函数不起作用。如果我对 this.toFront() 发表评论，那么我的点击功能将按预期工作。

你能帮我理解我做错了什么吗？

```
//dummy variables for example
var x_coord = '31';
var y_coord = '50';
var diameter = '80';
var opportunityUrl = 'http://www.google.com';
var fillColorStart = '#000';
var fillColorEnd = '#FF0000';

var p = paper.circle(x_coord, y_coord, diameter)
.data("i", i)
.click(function() {
   alert(opportunityUrl);
})
.mouseover(function() {
   this.toFront();
})
.attr({"fill": "90-"+fillColorStart+":5-"+fillColorEnd+":95","fill-opacity": 0.5})
.glow({color: "#4b4b4b", width: 7}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:47:27.133

虽然我不确定 Raphael 是如何完全工作的，但我认为`this`在这种情况下指的是 window 对象。这会破坏事件链，这可能会破坏对象上的所有事件，从而导致您`.click()`无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:16:34.700

我在[这里](https://stackoverflow.com/a/8167903/981898)回答了一个类似的问题。基本上，`this`匿名函数中的指针并不指您认为它所做的事情。

在您的情况下，执行 Elliot 上面所说的可能是最简单的解决方案。

# php - 按子项数将多维数组拆分为列

> ID：10522201
> 
> 赞同：0
> 
> 时间：2012-05-09T18:44:09.233
> 
> 标签：php, split, grouping

我有一组按字母名称分组的对象，即：

```
['A' => array(obj, obj, obj), 'B' => array(obj), 'C' => array(obj, obj),
 'D' => array(obj, obj, obj, obj, obj), 'E' => array(obj, obj, obj, obj),...] 
```

我试图找到一种方法，`X`根据每个数组中的对象数将此数组拆分为列（2 或 3）。我的例子的计数是`[3, 1, 2, 5, 4]`. 分成三列应该给我：

```
array([A,B,C], [D], [E]) 
```

我不确定我是否以正确的方式解决了这个问题，或者是否有更好的方法来解决这个问题。

编辑：我正在尝试编写一个页面，其中列表按维基百科类别的标题分组，例如：[http](http://en.wikipedia.org/wiki/Category:Arts) ://en.wikipedia.org/wiki/Category:Arts 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:08:06.803

假设`$input`是您的对象数组数组，并且`$numColumns`您想要多少列......

```
uasort( $input, function( $x, $y ){ return count( $y ) - count( $x ); } );
$columns = array_chunk( $input, (int)ceil( count( $input ) / $numColumns ), true ); 
```

这会根据子数组的长度对输入数组进行排序，然后将其拆分为`$numColumns`块。在此之后，`$columns`将是这样的：

```
0 => array(
    'B' => array( obj ),
    'C' => array( obj, obj ),
    'A' => array( obj, obj, obj )     ),
1 => array(
    'D' => array( obj, obj, obj, obj ),
    'E' => array( obj, obj, obj, obj, obj )    ),
2 => array(
    'F' => array( lots of objs ),
    'G' => array( lots and lots of objs )    ) 
```

等等。

# matlab - Matlab：在条形图上检测高于某个高度的峰并在峰高上方标记

> ID：10522203
> 
> 赞同：2
> 
> 时间：2012-05-09T18:44:41.223
> 
> 标签：matlab, plot, label, bar-chart

我正在尝试将标签添加到具有许多条形的条形图中。复杂的因素是我在一个循环中执行此操作（对于数百个条形图）并且希望让 Matlab 自动进行标记。本质上，我只想标记高度高于某个阈值的峰。希望让这更容易的一件事是，我只是想用它的 x 值标记条。

这是我希望如何放置标签的说明：

![](../Images/26c84c0ec4d0b647f1e3ef3e8ba7a1b1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:52:37.670

如果您仍然可以访问原始数据，并假设您想要标记高于阈值的每个点，您应该能够通过以下方式执行此操作：

*   循环遍历图表数据数组中的每个 (x, y)
    *   如果 y 大于阈值
        *   然后打电话[`text`](http://www.mathworks.com/help/techdoc/ref/text.html)`(x, y, num2str(x))`

如果您想用单个标签标记连续值都高于阈值的峰值（比如图像上大约 115？），您可以添加一些稍微复杂的逻辑来将这些峰值组合在一起......如果那是你想要的，我们可以帮助您解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T22:00:45.830

正如@Dougal 所提到的，该`text`功能就是您想要的。但是，不需要循环：

```
%# generate some data
y = poissrnd(5,20,1);
x = 1:20;
%# find where the data is above the threshold
bigIdx = y>6;

%# create a bar plot
bar(x,y)

%# add the text. The alignment setting ensures that the text
%# is directly above the bar. I add 1 here as an y-offset,
%# the ideal value may depend on your data
text(x(bigIdx),y(bigIdx)+1,num2str(x(bigIdx)),'horizontalAlignment','center')

%# you may need to make sure that the y-limit is high enough
%# so that the text is visible
ylim([0 max(y)+2]) 
```

![在此处输入图像描述](../Images/dd876910f1faa5c0ac8a0dc55334bcfc.png)

# c# - 将 php 数组转换为 c# 哈希表

> ID：10522205
> 
> 赞同：0
> 
> 时间：2012-05-09T18:44:44.387
> 
> 标签：c#, php

我有一些多维 php 数组被传递到我的 c# 应用程序。要在 c# 端提取值，我必须执行以下操作：

```
String example = (string)((Hashtable)((Hashtable)example_info["FirstLevel"])["SecondLevel"])["example_value"]; 
```

我将如何消除将每个维度显式转换为哈希表的需要？我是否需要一个从 example_info 构建某种 List 对象的递归函数，还是我不应该使用哈希表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:49:32.833

在这里，使用这个：

```
 public Dictionary<string, object> Parse(string array)
    { 
        Dictionary<string, object> result = new Dictionary<string, object>();
        Newtonsoft.Json.Linq.JObject obj = (Newtonsoft.Json.Linq.JObject)JsonConvert.DeserializeObject(array);
        foreach (KeyValuePair<string, Newtonsoft.Json.Linq.JToken> kvp in obj)
        {
            if (kvp.Value.ToString().Contains('{'))
            {
                result.Add(kvp.Key, Parse(kvp.Value.ToString().Replace("[", "").Replace("]", "")));
            }
            else
            {
                result.Add(kvp.Key, kvp.Value.ToString());
            }
        }
        return result;
    } 
```

# bash - bash 函数执行 2 次命令 mv

> ID：10522216
> 
> 赞同：0
> 
> 时间：2012-05-09T18:45:15.307
> 
> 标签：bash, function

我有这个 bash 代码：

```
#!/bin/bash

###################################################
# Variables
#
BACKIFS=$IFS
IFS=$'\n'
db_file="$PWD/test"
path_db="$PWD"
check_first_start="$PWD/status"
num_args=$#
###################################################

###################################################
# Fist time that program start
#
function check_before_start(){
if [ ! -f "$path_db/status" ];then
    pass_2=$(yad --form --field "Password:H" --field "Retype Password:H" --separator="@_@" --title "Password" --image="dialog-password")
    if [ $(echo $pass_2 | awk -F"@_@" '{print $1}') != $(echo $pass_2 | awk -F"@_@" '{print $2}') ];then
        yad --title "Errore" --text "Le password sono differenti, riprovare..."
        check_before_start
    fi
    pass=$(echo $pass_2 | awk -F"@_@" '{print $1}')
    touch "$path_db/status"
fi
type_of=$(file $db_file | cut -f2 -d':' | sed '/ /s/^ //' | cut -f1 -d' ')
if [ "$type_of" = "ASCII" ]; then
    pass_2=$(yad --form --field "Password:H" --field "Retype Password:H" --separator="@_@" --title "Password" --image="dialog-password")
    if [ $(echo $pass_2 | awk -F"@_@" '{print $1}') != $(echo $pass_2 | awk -F"@_@" '{print $2}') ];then
        yad --title "Errore" --text "Le password sono differenti, riprovare..."
        check_before_start
    fi
    pass=$(echo $pass_2 | awk -F"@_@" '{print $1}') 
    encrypt_db
fi
}
###################################################

###################################################
# Check exit status
#
function exit_script(){
if [ $? != 0 ] ; then
    type_of=$(file $db_file | cut -f2 -d':' | sed '/ /s/^ //' | cut -f1 -d' ')
    if [ "$type_of" = "ASCII" ]; then
        encrypt_db
    fi
    exit 0
fi
}
###################################################

###################################################
# Encryption functions
#
function encrypt_db(){
echo $pass | gpg --passphrase-fd 0 -o $path_db/enc_db --cipher-algo=aes256 -c $db_file
mv $path_db/enc_db $db_file
}
###################################################

###################################################
# Decryption functions
#
function check_gpg_pwd_decrypt(){
if [ $? != 0 ] ; then
    yad --title "Errore Password" --text "È stata inserita una password errata, riprovare..." --width=450 --height=150
    decrypt_db
fi
}

function decrypt_db(){
pass=$(yad --form --field "Password:H" --separator="" --title "Password" --image="dialog-password")
echo $pass | gpg --passphrase-fd 0 -o $path_db/out_db --cipher-algo=aes256 -d $db_file
check_gpg_pwd_decrypt
mv $path_db/out_db $db_file
}
###################################################

###################################################
# Read data from db
function read_data_from_db(){
choosed_num=$(cat $db_file | sed -n ${line}'p' | cut -f${c1},${c2} -d'.' | tr '.' ' ')
cifra_1=$(echo $choosed_num | cut -f1 -d' ')
cifra_2=$(echo $choosed_num | cut -f2 -d' ')
yad --text "Riga -------><b>${line}</b>\nCifra $c1: --><b>$cifra_1</b>\nCifra $c2: --><b>$cifra_2</b>"
}
###################################################

###################################################
# Read from user the line, c1 and c2 numbers and check these values
#
function input_info(){
info=$(yad --form --field "Numero riga" --field "Prima cifra" --field "Seconda cifra" --separator="-" --title "Input Info")
line=$(echo $info | cut -f1 -d'-')
c1=$(echo $info | cut -f2 -d'-')
c2=$(echo $info | cut -f3 -d'-')
if [ $line -lt 1 ] || [ $line -gt 32 ]; then
    yad --text "Errore: il numero di linea deve essere compreso fra 1 e 32" --title "Errore"
    input_info
fi
if [ $c1 -lt 1 ] || [ $c1 -gt 4 ] || [ $c2 -lt 1 ] || [ $c2 -gt 4 ]; then
    yad --text "Errore: le cifre devono essere comprese fra 1 e 4" --title "Errore"
    input_info
fi
}
###################################################

###################################################
# Main
check_before_start
input_info
decrypt_db
read_data_from_db
encrypt_db
exit 0
################################################### 
```

我有一个问题，因为如果我输入了错误的密码，我会收到此错误`error: cannot mv file`。我不知道为什么，但这个脚本执行 mv 命令（**在 decrypt_db 函数内**）2 次 Oo

我不明白如何修复它以及**decrypt_db**怎么可能有这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:57:45.793

当输入错误的密码时，函数`check_before_start`会再次调用自身。这些调用中的每一个都到达对 的调用`encrypt_db`，而后者又调用`mv`，因此它被调用了两次。由于密码无效，您需要在第二次调用自身后退出`check_before_start`（例如使用）的外部调用。`return`

# android - App Idea Force Contact Pull Android

> ID：10522220
> 
> 赞同：0
> 
> 时间：2012-05-09T18:45:30.433
> 
> 标签：android, bluetooth

我有一个想法，但我不确定它是否可能。前几天我遇到了一个问题，手机的触摸屏在大麦工作，我需要把联系人从它上面拿下来。我有一台 cellbrite 机器，但任何曾经使用过的人都知道它们有多挑剔。

我很想开发一个 android 应用程序，它可以通过蓝牙连接到任何手机并强制从中拉出所有联系人，如果你的屏幕很麻烦，这会很方便。我的问题是，这甚至可能基于不同的手机类型以及手机支持的不同级别的蓝牙协议。如果有人对如何实现这一点有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:01:32.233

任何具有必要权限的应用程序都可以读取手机的联系人并通过蓝牙（或 Wi-Fi）发送。

我认为主要问题是人们在需要之前不会考虑安装您的应用程序。然后，除非手机有网络连接，否则您无法将您的应用程序安装到他们损坏的手机上，如果他们有网络连接，那么首先就不需要使用蓝牙。

实际上，Android 的基本理念之一是手机上的所有内容都是同步的——因此您不必担心手机被压坏。

# c++ - 关于 wikipedia 上的 RTTI 定义

> ID：10522228
> 
> 赞同：2
> 
> 时间：2012-05-09T18:45:54.203
> 
> 标签：c++, rtti

我在[wikipedia](http://en.wikipedia.org/wiki/Run-time_type_information)上浏览了 RTTI 的示例。

我对这部分感到困惑

> abc *abc_pointer = 新 xyz();

如果让 abc_pointer 指向一个 xyz 对象，那么它会被识别出来是不是很明显。我的意思是比较有什么用

xyz_pointer != NULL

后来和RTTI一般呢？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:48:41.033

重要的是当他们这样做时：

```
xyz_pointer = dynamic_cast<xyz*>(abc_pointer); 
```

稍后将其转换回`xyz`. 不是所有`abc`的 s 都会是`xyz`s，即使所有`xyz`的 s 都是`abc`s。这里`dynamic_cast`说“如果它是其中之一，那就投它，否则停下来给我`NULL`而不是做坏事”。`dynamic_cast`正在为您使用 RTTI。

在玩具示例中，您可以清楚地告诉（如果编译器愿意的话，编译器甚至可以弄清楚） that`abc*`也是`xyz*`。想象一下这个功能：

```
void (abc *ptr) {
  if (dynamic_cast<xyz*>(ptr)) {
    //...
  }
  else {
    //...
  }
} 
```

在那种一般情况下，如果不在运行时查看其类型信息，就无法判断您给出的内容是否可以转换为 a `xyz`，这正是这样`dynamic_cast`做的。

请注意，如果您使用`static_cast<xyz*>(ptr)`演员表总是看起来有效，即使在这样做实际上不合法并且很可能导致未定义的行为的情况下也是如此。

在这里应该注意的是，如果你发现自己写了很多`if (dynamic_cast<...`可能表明“代码味道”的东西 - 你应该考虑重构，可能虚拟方法会更合适。`dynamic_cast`在设计 C++ 时，RTTI 应该是最后的手段。

# sql - 如何计算查询中存储为 YYYYMMDD 的两天之间的天数差异？

> ID：10522232
> 
> 赞同：1
> 
> 时间：2012-05-09T18:46:22.310
> 
> 标签：sql, ibm-midrange, db2-400

我正在编写一个查询，我需要计算自以“YYYYMMDD”格式存储在数据库中的日期以来的天数。由于这不是 Date 数据类型，因此我不能使用本机 Date 函数。在 SQL 查询中执行此类计算的最佳方法是什么（性能方面、可读性方面等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:20:50.640

最好的？将该旧表转换为使用真实日期列。

下一个最好的？编写一个数据库函数将 YYMMDD 转换为真实日期。Alan Campin 的 iDate 可以提供帮助。你最终会得到类似的东西`select cvty2d(date1)-cvty2d(date2) from ...`

有总比没有好？编写丑陋的 SQL 将数字转换为字符，拆分字符，添加连字符并将其转换为真实日期。那只野兽看起来像

```
select 
  date(
     substr(char(date1),1,4) concat 
     '-' concat 
     substr (char(date1),5,2) concat 
     '-' concat 
     substr(char(date1),7,2)
  )  - 
  date(
     substr(char(date2),1,4) concat 
     '-' concat 
     substr (char(date2),5,2) concat 
     '-' concat 
     substr(char(date2),7,2)
  )   
from ... 
```

编辑 之所以需要这些体操，是因为 DB2 DATE() 函数希望看到 'YYYY-MM-DD' 形式的字符串，连字符是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:52:11.920

您正在运行哪个版本的 SQL？SQL2008 将该格式作为日期数据类型没有问题

```
Declare @something nvarchar(100)
set @Something = '20120112'

select dateadd(dd, 1, @Something)
select datediff(dd, @Something, getdate()) 
```

2012-01-13 00:00:00.000

118

# sql - 如何在 SQL 查询中“双重”加入？

> ID：10522235
> 
> 赞同：0
> 
> 时间：2012-05-09T18:46:30.267
> 
> 标签：sql, sqlite

我有一个这样的 SQLite 查询：

```
SELECT Books.title, People.name FROM Books, People WHERE People.ID=Books.AuthorID 
```

其中`Books.AuthorID`是与 People 表中的 ID 对应的 ID 号。

输出：

```
Title   Author
Book1   John Doe
Book2   Martha James 
```

但是我想添加第三个字段（Books.EditorID），它也是一个必须在其中查找的 ID `People`，但很可能它会是一个不同的 ID/Person `Books.AuthorID`。

期望的输出：

```
Title   Author        Editor
Book1   John Doe      Jack Brown
Book2   Martha James  Bob Nelson 
```

如何实现？我相信某种 JOIN 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:49:35.150

```
SELECT b.title, a.name as author_name, e.name as editor_name
FROM Books b
INNER JOIN People a ON a.ID=b.AuthorID
INNER JOIN People e on e.ID=b.EditorID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:47:57.630

只需使用别名重新加入同一张表...示例即将推出。

```
SELECT 
    Book.Title,
        People.Name,
        People2.name
    FROM
        Books
    INNER JOIN
        People
    ON
        People.ID = Books.AuthorID
    INNER JOIN
        People People2
    ON
        People2.ID = People.ID 
```

# javascript - IE9 上的 JavaScript。XMLDOM.selectSingleNode 给出了 Unknown 方法 --> concat

> ID：10522236
> 
> 赞同：3
> 
> 时间：2012-05-09T18:46:31.883
> 
> 标签：javascript, xpath

为什么这段代码在 IE 上给我以下错误：“Unknown Method. //author[@select = -->concat('tes'<--,'ts')]？

```
function a()
{
    try
    {
        var xml ='<?xml version="1.0"?><book><author select="tests">blah</author></book>';

        var doc = new ActiveXObject("Microsoft.XMLDOM");
        doc.loadXML(xml);

        node = doc.selectSingleNode("//author[@select = concat('tes','ts')]");
        if(node == null)
        {
            alert("Node is null");
        }
        else
        {
            alert("Node is NOT null");
        }
    } catch(e)
    {
        alert(e.message);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:19:31.883

好吧`Microsoft.XMLDOM`，这是一个过时的编程 id，您最终会得到一个旧的 MSXML 版本，默认情况下它不支持 XPath 1.0，而是一个旧的、从未标准化的草稿版本。如今，MSXML 6 是任何操作系统或具有 Microsoft 支持的最新服务包的操作系统的一部分，因此只需考虑使用 MSXML 6 DOM 文档，例如

```
 var xml ='<?xml version="1.0"?><book><author select="tests">blah</author></book>';

  var doc = new ActiveXObject("Msxml2.DOMDocument.6.0");
  doc.loadXML(xml);

        node = doc.selectSingleNode("//author[@select = concat('tes','ts')]");
        if(node == null)
        {
            alert("Node is null");
        }
        else
        {
            alert("Node is NOT null");
        } 
```

如果您坚持使用`Microsoft.XMLDOM`then 调用`doc.setProperty("SelectionLanguage", "XPath")`之前的任何`selectSingleNode`或`selectNodes`尝试使用 XPath 1.0 的调用。

# windows - 用于自动安装 IIS 7 及更高版本的 Powershell 脚本

> ID：10522240
> 
> 赞同：16
> 
> 时间：2012-05-09T18:46:52.623
> 
> 标签：windows, powershell, iis-7, iis-7.5

我是powershell的新手。我需要的是一个可以自动安装IIS7或更高版本的powershell脚本。我要对角色服务进行某些配置。感谢您在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T20:52:08.860

我发现以下博客很有用，通过使用帮助进行了某些更改，我能够使用自定义角色服务从 power shell 安装 IIS。我在这里有代码，博客的链接是：

[http://www.ithassle.nl/2010/09/powershell-script-to-install-and-configure-iis7-5/#codesyntax_1](http://www.ithassle.nl/2010/09/powershell-script-to-install-and-configure-iis7-5/#codesyntax_1)

```
# --------------------------------------------------------------------
# Checking Execution Policy
# --------------------------------------------------------------------
#$Policy = "Unrestricted"
$Policy = "RemoteSigned"
If ((get-ExecutionPolicy) -ne $Policy) {
  Write-Host "Script Execution is disabled. Enabling it now"
  Set-ExecutionPolicy $Policy -Force
  Write-Host "Please Re-Run this script in a new powershell enviroment"
  Exit
}

# --------------------------------------------------------------------
# Define the variables.
# --------------------------------------------------------------------
$InetPubRoot = "D:\Inetpub"
$InetPubLog = "D:\Inetpub\Log"
$InetPubWWWRoot = "D:\Inetpub\WWWRoot"

# --------------------------------------------------------------------
# Loading Feature Installation Modules
# --------------------------------------------------------------------
Import-Module ServerManager 

# --------------------------------------------------------------------
# Installing IIS
# --------------------------------------------------------------------
Add-WindowsFeature -Name Web-Common-Http,Web-Asp-Net,Web-Net-Ext,Web-ISAPI-Ext,Web-ISAPI-Filter,Web-Http-Logging,Web-Request-Monitor,Web-Basic-Auth,Web-Windows-Auth,Web-Filtering,Web-Performance,Web-Mgmt-Console,Web-Mgmt-Compat,RSAT-Web-Server,WAS -IncludeAllSubFeature

# --------------------------------------------------------------------
# Loading IIS Modules
# --------------------------------------------------------------------
Import-Module WebAdministration

# --------------------------------------------------------------------
# Creating IIS Folder Structure
# --------------------------------------------------------------------
New-Item -Path $InetPubRoot -type directory -Force -ErrorAction SilentlyContinue
New-Item -Path $InetPubLog -type directory -Force -ErrorAction SilentlyContinue
New-Item -Path $InetPubWWWRoot -type directory -Force -ErrorAction SilentlyContinue

# --------------------------------------------------------------------
# Copying old WWW Root data to new folder
# --------------------------------------------------------------------
$InetPubOldLocation = @(get-website)[0].physicalPath.ToString()
$InetPubOldLocation =  $InetPubOldLocation.Replace("%SystemDrive%",$env:SystemDrive)
Copy-Item -Path $InetPubOldLocation -Destination $InetPubRoot -Force -Recurse

# --------------------------------------------------------------------
# Setting directory access
# --------------------------------------------------------------------
$Command = "icacls $InetPubWWWRoot /grant BUILTIN\IIS_IUSRS:(OI)(CI)(RX) BUILTIN\Users:(OI)(CI)(RX)"
cmd.exe /c $Command
$Command = "icacls $InetPubLog /grant ""NT SERVICE\TrustedInstaller"":(OI)(CI)(F)"
cmd.exe /c $Command

# --------------------------------------------------------------------
# Setting IIS Variables
# --------------------------------------------------------------------
#Changing Log Location
$Command = "%windir%\system32\inetsrv\appcmd set config -section:system.applicationHost/sites -siteDefaults.logfile.directory:$InetPubLog"
cmd.exe /c $Command
$Command = "%windir%\system32\inetsrv\appcmd set config -section:system.applicationHost/log -centralBinaryLogFile.directory:$InetPubLog"
cmd.exe /c $Command
$Command = "%windir%\system32\inetsrv\appcmd set config -section:system.applicationHost/log -centralW3CLogFile.directory:$InetPubLog"
cmd.exe /c $Command

#Changing the Default Website location
Set-ItemProperty 'IIS:\Sites\Default Web Site' -name physicalPath -value $InetPubWWWRoot

# --------------------------------------------------------------------
# Checking to prevent common errors
# --------------------------------------------------------------------
If (!(Test-Path "C:\inetpub\temp\apppools")) {
  New-Item -Path "C:\inetpub\temp\apppools" -type directory -Force -ErrorAction SilentlyContinue
}

# --------------------------------------------------------------------
# Deleting Old WWWRoot
# --------------------------------------------------------------------
Remove-Item $InetPubOldLocation -Recurse -Force

# --------------------------------------------------------------------
# Resetting IIS
# --------------------------------------------------------------------
$Command = "IISRESET"
Invoke-Expression -Command $Command 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-29T09:49:34.197

我可以按照以下步骤使用 powershell 脚本安装 IIS：

1）创建批处理文件（Setup_IIS_win10.bat），其中包含以下脚本

```
@ECHO OFF
SET ThisScriptsDirectory=%~dp0
SET PowerShellScriptPath="%ThisScriptsDirectory%SetupIISPowerShellScript_win10.ps1"
PowerShell -NoProfile -ExecutionPolicy Bypass -Command "& {Start-Process PowerShell -ArgumentList '-NoProfile -ExecutionPolicy Bypass -File ""%PowerShellScriptPath%""' -Verb RunAs}"; 
```

2）创建powershell脚本文件（SetupIISPowerShellScript_win10.ps1），其中包含以下脚本

```
# This script installs IIS and the features required to run asp.net applications

# * Make sure you run this script from an Admin Prompt!
# * Make sure Powershell Execution Policy is bypassed to run these scripts:
# * YOU MAY HAVE TO RUN THIS COMMAND PRIOR TO RUNNING THIS SCRIPT!
Set-ExecutionPolicy Bypass -Scope Process

Enable-WindowsOptionalFeature -Online -FeatureName IIS-WebServerRole
Enable-WindowsOptionalFeature -Online -FeatureName IIS-WebServer
Enable-WindowsOptionalFeature -Online -FeatureName IIS-CommonHttpFeatures
Enable-WindowsOptionalFeature -Online -FeatureName IIS-HttpErrors
Enable-WindowsOptionalFeature -Online -FeatureName IIS-HttpRedirect
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ApplicationDevelopment
Enable-WindowsOptionalFeature -Online -FeatureName IIS-NetFxExtensibility45
Enable-WindowsOptionalFeature -Online -FeatureName IIS-HealthAndDiagnostics
Enable-WindowsOptionalFeature -Online -FeatureName IIS-HttpLogging
Enable-WindowsOptionalFeature -Online -FeatureName IIS-LoggingLibraries
Enable-WindowsOptionalFeature -Online -FeatureName IIS-RequestMonitor
Enable-WindowsOptionalFeature -Online -FeatureName IIS-HttpTracing
Enable-WindowsOptionalFeature -Online -FeatureName IIS-Security
Enable-WindowsOptionalFeature -Online -FeatureName IIS-RequestFiltering
Enable-WindowsOptionalFeature -Online -FeatureName IIS-Performance
Enable-WindowsOptionalFeature -Online -FeatureName IIS-WebServerManagementTools
Enable-WindowsOptionalFeature -Online -FeatureName IIS-IIS6ManagementCompatibility
Enable-WindowsOptionalFeature -Online -FeatureName IIS-Metabase
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ManagementConsole
Enable-WindowsOptionalFeature -Online -FeatureName IIS-BasicAuthentication
Enable-WindowsOptionalFeature -Online -FeatureName IIS-WindowsAuthentication
Enable-WindowsOptionalFeature -Online -FeatureName IIS-StaticContent
Enable-WindowsOptionalFeature -Online -FeatureName IIS-DefaultDocument
Enable-WindowsOptionalFeature -Online -FeatureName IIS-WebSockets
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ApplicationInit
Enable-WindowsOptionalFeature -Online -FeatureName IIS-NetFxExtensibility45
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ASPNET45
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ISAPIExtensions
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ISAPIFilter
Enable-WindowsOptionalFeature -Online -FeatureName IIS-HttpCompressionStatic
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ASP
Enable-WindowsOptionalFeature -Online -FeatureName IIS-CGI
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ASPNET35
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ASPNET47
#Enable-WindowsOptionalFeature -Online -FeatureName IIS-ServerSideIncludes
Enable-WindowsOptionalFeature -Online -FeatureName WCF-Services45
Enable-WindowsOptionalFeature -Online -FeatureName WCF-Http-Activation45
Enable-WindowsOptionalFeature -Online -FeatureName WCF-TCP-PortSharing45
# If running in the console, wait for input before closing.
if ($Host.Name -eq "ConsoleHost")
{ 
    Write-Host "Press any key to close..."
    $Host.UI.RawUI.FlushInputBuffer()   # Make sure buffered input doesn't "press a key" and skip the ReadKey().
    $Host.UI.RawUI.ReadKey("NoEcho,IncludeKeyUp") > $null
} 
```

3) 以管理员权限运行批处理文件(Setup_IIS_win10.bat)

希望它对某人有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T06:23:19.503

只需使用正确的软件包调用 pkgmgr 即可：

```
$packages = "IIS-WebServerRole;" +
    "IIS-WebServer;" +
    "IIS-CommonHttpFeatures;" +
    "IIS-StaticContent;" +
    "IIS-DefaultDocument;" +
#       ... some other packages here 
    "IIS-ManagementConsole;" +
    "IIS-ManagementService;" +
    "IIS-LegacySnapIn;" +
    "IIS-FTPManagement;" + 
    "WAS-NetFxEnvironment;" +
    "WAS-ConfigurationAPI"

Start-Process "pkgmgr" "/iu:$packages" 
```

根据您的平台和 IIS 版本，存在一些细微差别。[您可以在此处](http://www.windowsnetworking.com/articles_tutorials/installing-iis-70.html)、[此处](http://learn.iis.net/page.aspx/29/installing-iis-7-and-above-on-windows-server-2008-or-windows-server-2008-r2/)和[此处](http://blogs.msdn.com/b/powershell/archive/2009/01/27/managing-server-features-with-powershell-cmdlets-on-windows-2008-server-r2-beta.aspx)找到更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-13T15:33:47.583

这是一个不错的脚本。我建议为将来的安装\应用程序添加一项以使用修改后的`wwwpath`内容，即修改注册表。您可以通过将其添加到脚本底部轻松地做到这一点：

```
set-ItemProperty HKLM:\Software\Microsoft\InetStp\ -Name PathWWWRoot -Value $InetPubRoot 
```

无论如何感谢您的发布。

# list - 从 Sharepoint 2010 中的列表中删除字段

> ID：10522242
> 
> 赞同：1
> 
> 时间：2012-05-09T18:46:56.680
> 
> 标签：list, sharepoint-2010

如何从 Sharepoint 2010 中的列表中删除字段？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:27:24.520

我假设您的意思是使用代码。这段代码应该可以解决问题。

```
SPWeb web = SPContext.Current.Web;
SPList list = web.Lists["List Name"];
SPField field = list.Fields["Field Name"];
field.Delete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:42:34.823

只需转到您的列表，转到列表设置（在功能区中），向下滚动到您的字段（列）并将其删除。

没什么大不了的。

此致！

# python - 使用谷歌应用引擎中的python将文本帖子转换为xml文件

> ID：10522243
> 
> 赞同：0
> 
> 时间：2012-05-09T18:47:01.923
> 
> 标签：python, google-app-engine, app-inventor

新手在这里需要帮助。

使用 App Inventor 和 App Engine。边走边学python。仍处于早期阶段。需要将文本数据从 AI 发布到应用引擎，以文件 (.xml) 的形式保存在 blob 存储中，然后作为附件通过电子邮件发送。

我能够使用 Shival Wolfs wolfwebmail2 发送图片，并且我确信通过一些代码可以更改它以将文本帖子保存为 blob 存储中的文件以执行相同的操作。

如前所述，新手学习速度很快。

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:28:50.633

我找到的解决方案是在应用程序引擎上不使用 shival wolfs 代码，并将应用程序发明者代码中的“postfile”块替换为“posttext”块，并附上您要发送的文本。还将文件名变量更改为您想要的文件名称，包括文件类型（即.xml、.csv、.txt 等）。这似乎对我有用。

# objective-c - 获取一对多的核心数据关系第一次返回正确的对象，但其他时候返回空集

> ID：10522250
> 
> 赞同：1
> 
> 时间：2012-05-09T18:47:34.323
> 
> 标签：objective-c, ios, core-data

我有一个对象，锻炼，它与一个对象，锻炼有一对多的关系。

模型图：http: [//i.imgur.com/q1Mfq.png](http://i.imgur.com/q1Mfq.png)

当我创建一个锻炼对象时，我通过循环添加三个锻炼对象

```
[self addExercisesObject:exercise] 
```

然后保存我的托管对象上下文。然后，从用于显示锻炼的控制器中，我可以成功获取锻炼及其锻炼（使用获取请求），如调试器中的输出所示：

```
Printing description of self->_savedWorkout:
<Workout: 0x6c5a990> (entity: Workout; id: 0x6e46e00 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/Workout/p1> ; data: {
bodyweight = nil;
date = "2012-05-09 16:59:43 +0000";
exercises =     (
    "0x6e3c870 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/Exercise/p3>",
    "0x6e3eaf0 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/Exercise/p2>",
    "0x6e36820 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/Exercise/p1>"
);
isCompleted = 0;
workoutId = 1;
workoutPlan = "0x6e6c980 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/WorkoutPlan/p1>";
}) 
```

到现在为止还挺好。但是，如果我在模拟器中关闭我的应用程序并重新启动它并在同一视图中执行相同的获取请求，则锻炼将如下所示：

```
Printing description of self->_savedWorkout:
<Workout: 0x6ea8ff0> (entity: Workout; id: 0x6e8f9e0 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/Workout/p1> ; data: {
bodyweight = nil;
date = "2012-05-09 16:59:43 +0000";
exercises =     (
);
isCompleted = 0;
workoutId = 1;
workoutPlan = "0x6c8a130 <x-coredata://EA417EAA-101A-4F04-8276-3C4A6CDF094D/WorkoutPlan/p1>";
}) 
```

似乎它获取了相同的锻炼对象，但现在锻炼是一个空集。实际上，在 fetch 请求之后，练习首先看起来像这样：

```
exercises = "<relationship fault: 0x8a93100 'exercises'>"; 
```

但一旦我这样做：

```
for (Exercise *exercise in self.savedWorkout.exercises) 
```

self.savedWorkout.exercises 解析为一个空集。我不会在我的应用程序的任何部分编辑锻炼。

我的获取请求是通过我的 Workout 类中的此方法发出的：

```
- (Workout *)getLatestWorkout
{
  self.model = [[self.managedObjectContext persistentStoreCoordinator] managedObjectModel];

  NSFetchRequest *fetchRequest = [self.model fetchRequestTemplateForName:@"getLatestWorkout"];

  NSError *error = nil;
  NSArray *results = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
  if ([results count] == 1) {
    return [results objectAtIndex:0];
  }
  return nil;
} 
```

我使用 Xcode 的 GUI 工具制作了获取请求模板。它获取 isCompleted == 0 的所有 Workout 对象。您可以看到它每次都获取相同的对象，因为在两个调试器输出中，锻炼的 x-coredata 路径是相同的。

更新：我检查了我的 SQLite 数据库。锻炼表中有一项锻炼，锻炼表中有三项锻炼。

有什么想法吗？

**编辑：创建下面发布的对象的代码**

```
 ```
- (void)storeUserSettings
{
  // get the file path if it exists
  NSString *path = [[NSBundle mainBundle] pathForResource:@"userSettings" ofType:@"plist"];

  // create it if it doesn't
  if (path == nil) {
    path = [NSString stringWithFormat:@"%@%@", 
            [[NSBundle mainBundle] bundlePath], @"/userSettings.plist"];
  }

  // and write the new settings to file
  [self.userSettings writeToFile:path atomically:YES];

  // load managed object context
  [self loadMOC];

  WorkoutPlan *currentPlan = [[WorkoutPlan alloc] getActiveWorkoutPlan];

  [currentPlan setManagedObjectContext:self.managedObjectContext];

  // if user has no plan or is changing plans, create new plan and first workout
  if (currentPlan == nil || 
      ([self.userSettings valueForKey:@"plan"] != currentPlan.planId)) {

    // create a workoutPlan object
    WorkoutPlan *workoutPlan = [[WorkoutPlan alloc] initWithEntity:
                                [NSEntityDescription entityForName:@"WorkoutPlan" 
                                            inManagedObjectContext:self.managedObjectContext] 
                                    insertIntoManagedObjectContext:self.managedObjectContext];

    // set attributes to values from userSettings and save object
    [workoutPlan createWorkoutPlanWithId:[self.userSettings valueForKey:@"plan"] 
                                schedule:[self.userSettings valueForKey:@"schedule"]
                             dateStarted:[self.userSettings valueForKey:@"nextDate"]];
  }
  // if user is just changing schedule, update schedule of current plan
  else if (![currentPlan.schedule isEqualToString:[self.userSettings valueForKey:@"schedule"]]) {
    [currentPlan setSchedule:[self.userSettings valueForKey:@"schedule"]];

    [currentPlan saveMOC];
  }
}

- (void)loadMOC
{
  AppDelegate *delegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
  self.managedObjectContext = delegate.managedObjectContext;
  self.model = [[self.managedObjectContext persistentStoreCoordinator] managedObjectModel];
}

- (void)createWorkoutPlanWithId:(NSNumber *)planId schedule:(NSString *)schedule 
                    dateStarted:(NSDate *)dateStarted
{ 
  [self deactivateCurrentPlan];

  // set workout plan attributes
  [self setPlanId:planId];
  [self setIsActive:[NSNumber numberWithBool:YES]];
  [self setSchedule:schedule];
  [self setDateStarted:dateStarted]; 

  // create first workout and add to workout plan

  Workout *firstWorkout = [NSEntityDescription
                          insertNewObjectForEntityForName:@"Workout"
                          inManagedObjectContext:self.managedObjectContext];

  [firstWorkout setManagedObjectContext:self.managedObjectContext];

  [firstWorkout createFirstWorkoutForPlan:self onDate:dateStarted];

  [self addWorkoutsObject:firstWorkout];

  [self saveMOC];
}

- (void)createFirstWorkoutForPlan:(WorkoutPlan *)plan onDate:(NSDate *)startDate
{
  // set workout attributes
  [self setDate:startDate];
  [self setIsCompleted:[NSNumber numberWithBool:NO]];
  [self setWorkoutId:[NSNumber numberWithInt:1]];

  NSArray *exerciseList = [self getExercisesForWorkout:self inPlan:plan];

  // iterate over exercises in spec and create them
  for (NSDictionary *exerciseSpec in exerciseList) 
  {
    // create a exercise MO
    Exercise *exercise = [NSEntityDescription
                          insertNewObjectForEntityForName:@"Exercise"
                          inManagedObjectContext:[plan managedObjectContext]];

    [exercise setManagedObjectContext:[plan managedObjectContext]];
    [exercise createExerciseForWorkout:self withSpec:exerciseSpec];

    // add exercise to workout object
    [self addExercisesObject:exercise];
  }

}

- (void)createExerciseForWorkout:(Workout *)workout withSpec:exerciseSpec
{
  // set exercise attributes
  self.exerciseId = [exerciseSpec valueForKey:@"id"];
  self.isPersonalRecord = [NSNumber numberWithBool:NO];

  NSArray *sets = [exerciseSpec valueForKey:@"sets"];
  int i = 1;
  for (NSNumber *setReps in sets)
  {
    // create a set MO
    Set *set = [NSEntityDescription
                          insertNewObjectForEntityForName:@"Set"
                          inManagedObjectContext:[workout managedObjectContext]];

    [set setManagedObjectContext:[workout managedObjectContext]];

    // set set attributes
    set.order = [NSNumber numberWithInt:i];
    set.repetitions = setReps;
    set.weight = [exerciseSpec valueForKey:@"default_weight"]; 

    // add set to exercise object
    [self addSetsObject:set];
    i++;
  }
} 
``` 
            回答 #1

赞同：1

时间：2012-10-13T22:47:27.963

我有一个类似的问题。应用程序运行时父子关系有效，但重新启动后仅检索到最新的子记录。

我正在添加这样的孩子：

*   创建子记录
*   设置孩子的父属性，设置孩子的其他属性
*   使用父级的 add 方法将子级添加到父级

如果我这样做，我发现它是固定的：

*   创建子记录
*   使用父级的 add 方法将子级添加到父级
*   设置孩子的父属性，设置孩子的其他属性

            回答 #2

赞同：0

时间：2012-05-09T19:27:44.493

核心数据很复杂。可能有几十件事要检查，任何一件都可能导致问题。

您使用了多少个 MOC？你怎么存钱？还有很多问题...

我建议在启动应用程序时为参数打开 EditScheme 中的 SQL 调试标志 (-com.apple.CoreData.SQLDebug 1)。

运行你的代码，看看实际发生了什么。

获取时关系解析为错误，除非您在获取请求中覆盖它。

如果您在父/子关系中使用多个 MOC，则从子级到父级的保存只是将数据放入父级，并没有真正保存它。如果使用 UIManagedDocument，这是一组完全不同的问题......

我希望这听起来不刺耳。准备好为 Core Data 问题提供大量信息，而不是“这不是保存，这是一些调试输出”。

基本上，CoreData 的工作方式取决于堆栈的创建方式、是否使用 UIManagedDocument、多个线程、如何创建对象、如何保存它们、获取请求的选项以及更多其他事情。

它实际上并没有那么复杂，但是有很多自定义和特殊情况取决于它的使用方式。

**编辑**

发布创建对象/关系的代码。

此外，尝试使用手动提取请求而不是模板进行提取。当您查看数据库中的数据时，您是否看到适当设置的关系的外键？

在启用调试的情况下再次运行它，以查看 SQL 正在做什么。这比您自己的调试输出更有价值。

            回答 #3

赞同：0

时间：2012-08-13T02:00:34.563

我遇到了完全相同的问题，但我的模型非常复杂。如果实体和关系不存在，我的应用会在启动时创建它们。如果它们被创建并且我没有退出应用程序，我可以获取具有一对多关系的实体并查看相关对象的正确计数。如果我退出我的应用程序并重新启动它（它现在知道它不必创建默认数据集），那么关系将返回一个空集。我想不通。

编辑：我发现我的问题与有序集合关系有关。我必须使用 Category 来创建解决方法（在堆栈溢出时发现）将新条目插入到有序集中。所以我猜这与它有关。

```

# ios - 以编程方式关闭单击键盘声音 (iOS)

> ID：10522251
> 
> 赞同：1
> 
> 时间：2012-05-09T18:47:41.673
> 
> 标签：ios, keyboard, audio

当用户在键盘上打字时，有什么方法可以禁用声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:50:15.290

如果您使用的是官方 iOS SDK，则不会。使用私有框架可能是可行的，但如果您使用它们，您的应用将不会被批准在 iTunes App Store 上销售。

# c - C - sscanf 的问题

> ID：10522253
> 
> 赞同：1
> 
> 时间：2012-05-09T18:47:46.160
> 
> 标签：c, locale, scanf

我对 sscanf 和解析浮点数有疑问。问题是我试图从文本文件中加载浮点数据，但它在 Linux 上的不同语言环境中表现得很奇怪。它似乎取决于操作系统小数点设置（或。），在我加载的文件中，它始终是小数点。

所以代码就像：

```
sscanf(line[i],"%f %f %f %f %f",&floatbuffer[0],&floatbuffer[1], &floatbuffer[2], &floatbuffer[3], &floatbuffer[4]); 
```

但它不适用于使用逗号 (,) 作为小数点的语言环境，例如 pl_PL。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:50:31.823

你有没有尝试过：

```
#include <locale.h>

setlocale(LC_NUMERIC,"C"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:53:16.130

您可以读/写二进制数据。
但要注意便携性。

# jquery - 从表中的最后一行删除 HR 标签

> ID：10522255
> 
> 赞同：0
> 
> 时间：2012-05-09T18:47:58.390
> 
> 标签：jquery

我正在尝试从表的最后一行中删除 HR 标签。

这是我的 jQuery

```
$("#tableOptionResults tr:last td").find('hr').remove(); 
```

这是相同的 HTML：

```
 <tr class="shadedRow">
   <td colspan="3">
     <hr />
   </td>
 </tr> 
```

我错过了什么？

**编辑**

这绝对是我的错。HR不在最后一排。我最终使用`$('#tableOptionResults tr hr:last').remove();`它来使它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:52:27.217

```
$('#tableOptionResults tr:last-child hr').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:53:19.200

尽管您可以通过添加`hr`到初始选择器来简化这一点，但这对我来说很好。有几点需要确定：

*   您的表具有正确的 ID，即`<table id="tableOptionResults">`
*   `<hr />`您要删除的绝对是上表中的最后`<tr>`一个
*   您的 HTML 验证

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:52:44.650

试试这个：

```
$(".shadedRow").find('hr').remove() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:54:00.603

# java - 在 Java 中转义 SQL 字符串

> ID：10522257
> 
> 赞同：6
> 
> 时间：2012-05-09T18:48:04.940
> 
> 标签：java, sql, business-objects

**背景：**

我目前正在为企业 CMS 数据库（业务对象）开发 Java 前端。目前，我正在构建一个功能以允许用户构建自定义数据库查询。我已经实施了一些措施，以确保用户只能使用已批准用户访问的可用列和运算符的子集进行选择（例如，可以选择 SI_EMAIL_ADDRESS，而不能选择更强大的字段，如 SI_CUID）。到目前为止，事情一直在顺利进行，但现在是时候保护此功能免受潜在的 SQL 注入攻击了。

**问题：**

我正在寻找一种方法来转义用户输入字符串。我已经看过 PerparedStatement，但是我不得不使用第三方 API 来访问数据库。这些 API 对我来说是不可变的，直接数据库访问是不可能的。各个方法采用表示要运行的查询的字符串，从而使 PreparedStatement 无效（据我所知，它必须针对直接数据库连接运行）。

我考虑过使用 String.replace()，但如果可能的话，我不想重新发明轮子。此外，我与开发 PerparedStatement 的安全专家相差甚远。

我还查看了 PerparedStatement 的 Java API 参考，希望能找到某种 toString() 方法。唉，我一直找不到类似的东西。

任何帮助是极大的赞赏。先感谢您。

**参考：**

[Java - 转义字符串以防止 SQL 注入](https://stackoverflow.com/questions/1812891/java-escape-string-to-prevent-sql-injection)

[Java 等效于 PHP 的 mysql_real_escape_string()](https://stackoverflow.com/questions/1018292/java-equivalent-for-phps-mysql-real-escape-string)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:12:49.553

当然，使用 PreparedStatement 会更容易、更安全。

ANSI SQL 要求字符串文字以单引号开头和结尾，单引号的唯一转义机制是使用两个单引号：

```
'Joe''s Caffee' 
```

所以理论上，你只需要用两个单引号替换一个单引号即可。但是，也存在一些问题。首先，一些数据库（例如 MySQL）也（或仅）支持反斜杠作为转义机制。在这种情况下，您需要将反斜杠加倍（也）。

对于 MySQL，我建议使用[MySQLUtils](http://wiki.vnetpublishing.com/Java_Mysql_Real_Escape_String)。如果您不使用 MySQL，那么您需要检查要使用的确切转义机制是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:51:58.533

您仍然可以使用准备好的语句。请参阅这篇文章：[从 java sqlpreparedstatement 获取查询](https://stackoverflow.com/questions/2683214/get-query-from-java-sql-preparedstatement)。此外，根据那篇文章，您也许可以使用[Log4JDBC](http://code.google.com/p/log4jdbc/)来处理这个问题。

这些选项中的任何一个都应该使您不必担心转义字符串以防止 SQL 注入，因为准备好的语句会为您完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T15:01:32.287

虽然，在 Java 中没有标准的方法来处理 PHP 的 mysql_real_escape_string() 我所做的是链接 replaceAll 方法来处理可能需要避免任何异常的每个方面。这是我的示例代码：

`public void saveExtractedText(String group,String content) { try { content = content.replaceAll("\", "\\") .replaceAll("\n","\n") .replaceAll("\r", "\r") .replaceAll("\t", "\t") .replaceAll("\00", "\0") .replaceAll("'", "\'") .replaceAll("\"", "\\"");`

 ````
 state.execute("insert into extractiontext(extractedtext,extractedgroup) values('"+content+"','"+group+"')");
} catch (Exception e) {
    e.printStackTrace();

} 
````

# javascript - 使用构建顺序缩小 java 脚本的工具

> ID：10522259
> 
> 赞同：0
> 
> 时间：2012-05-09T18:48:13.210
> 
> 标签：javascript, visual-studio-2010, minify

我有一些 Javascript 文件我想缩小并合并到一个文件中。但是，由于它们出现的顺序对于网站不崩溃至关重要。简单的解决方案是给它们编号，但是我没有那个选项，所以我认为我需要一种方法来指定某种文本文件中文件的顺序，并且

A：在 Visual Studio 2010 中的某种后期构建事件中引用它或

B：使用某种独立产品来缩小和合并文件。

显然，后期构建事件会更可取，但这不是必需的。

想法？建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:10:44.390

我不使用 Visual Studio - 但我过去读过以下工具：

[http://chirpy.codeplex.com/](http://chirpy.codeplex.com/)

在文档部分有一个示例如何将其集成到您的 Visual Studio 项目中：

[http://www.weirdlover.com/2010/07/18/chirpy-attains-godlike-abilities-in-version-1-0-0-4/](http://www.weirdlover.com/2010/07/18/chirpy-attains-godlike-abilities-in-version-1-0-0-4/)

# java - android上的java.lang.NoClassDefFoundError

> ID：10522261
> 
> 赞同：1
> 
> 时间：2012-05-09T18:48:18.783
> 
> 标签：java, android

我正在发送没有用户交互的应用程序电子邮件。以便我从以下[链接](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)获得编码。在这里我得到了**java.lang.NoClassDefFoundError**：com.murali.email.GMailSender。我在

```
GMailSender sender = new GMailSender("username@gmail.com", "password");
                    sender.sendMail("This is Subject",   
                            "This is Body",   
                            "user@gmail.com",   
                            "user@yahoo.com"); 
```

在 MailSenderActivity 类中。我在引用的库中添加了所有外部 jar，并且在编译时没有发现错误。我花了更多时间来解决这个问题，但失败了。我知道可能有重复的问题，但其他答案没有用于我。我猜我或 Eclipse 错过了 GMailSender 类的一些 jar 或类路径。请帮我。我不知道如何解决它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T18:55:45.870

确保 jar 位于名为 libs 的文件夹中，而不是 lib。然后执行“clean”并确保 jar 出现在 Android 依赖项下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T07:45:06.737

如果我们在 android 上收到此错误

> java.lang.NoClassDefFoundError：从方法 javax.mail.internet.MimeMessage.updateHeaders 引用的 javax.activation.DataHandler

我们需要`aditional.jar`加上`mail.jar`和`activation.jar`。这解决了我在访问 MimeMultipart 时在 android 中的问题。

# java - Java MySQL Timestamp 时区问题

> ID：10522267
> 
> 赞同：7
> 
> 时间：2012-05-09T18:48:39.453
> 
> 标签：java, mysql, timezone, timestamp

我有一个对象，我需要将它以格式`java.util.Date`插入 MySQL 中的日期时间字段。`UTC`

```
java.util.Date date = myDateFromSomewhereElse;
PreparedStatement prep = con.prepareStatement(
    "INSERT INTO table (t1, t2) VALUES (?,?)");

java.sql.Timestamp t = new Timestamp(date.getTime());
prep.setTimestamp(1, t, Calendar.getInstance(TimeZone.getTimeZone("PST"));
prep.setTimestamp(2, t, Calendar.getInstance(TimeZone.getTimeZone("UTC"));
System.out.println(prep.toString()); 
```

这给了我准备好的 SQL 语句字符串：

```
INSERT INTO table (t1, t2) VALUES ('2012-05-09 11:37:08','2012-05-09 11:37:08'); 
```

无论我指定的时区如何，返回的时间戳都是相同的时间戳。它忽略了我指定的带有时区的 Calendar 对象。发生了什么事，我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T21:36:45.010

乔丹，实际上你的想法是对的。问题是 MySQL JDBC 驱动程序中存在错误，默认情况下完全忽略 Calendar 参数。查看 PreparedStatement 的源代码以真正了解发生了什么。

请注意，它的格式是使用 JVM 时区的时间戳。这仅在您的 JVM 使用 UTC 时区时才有效。Calendar 对象被完全忽略。

```
this.tsdf = new SimpleDateFormat("''yyyy-MM-dd HH:mm:ss''", Locale.US);
timestampString = this.tsdf.format(x); 
```

为了让 MySQL 使用 Calendar 参数，您必须使用以下连接选项禁用旧日期/时间代码：

```
useLegacyDatetimeCode=false 
```

因此，您可以在像这样连接到数据库时使用它：

```
String url = "jdbc:mysql://localhost/tz?useLegacyDatetimeCode=false" 
```

如果您使用上面的行禁用旧的日期时间代码，那么它将在目标日历的时区呈现您的时间戳：

```
if (targetCalendar != null) {
    targetCalendar.setTime(x);
    this.tsdf.setTimeZone(targetCalendar.getTimeZone());

     timestampString = this.tsdf.format(x);
} else {
    this.tsdf.setTimeZone(this.connection.getServerTimezoneTZ());
    timestampString = this.tsdf.format(x);
} 
```

很容易看到这里发生了什么。如果您传入一个日历对象，它将在格式化数据时使用它。否则，它将使用数据库的时区来格式化数据。奇怪的是，如果你传入一个 Calendar，它也会将时间设置为给定的 Timestamp 值（这似乎毫无意义）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T19:36:04.330

检查[此链接](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)以获取有关 MySQL 的解释（您不应尝试将有关 Oracle 的建议应用于 MySQL）。

> TIMESTAMP 数据类型用于同时包含日期和时间部分的值。TIMESTAMP 的范围为 '1970-01-01 00:00:01' UTC 到 '2038-01-19 03:14:07' UTC。
> 
> MySQL 将 TIMESTAMP 值从当前时区转换为 UTC 进行存储，并从 UTC 转换回当前时区进行检索。（这不会发生在其他类型，例如 DATETIME。）默认情况下，每个连接的当前时区是服务器的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T19:25:35.140

时区只是查看日期（这是一个固定时间点）的不同方式。我在这里写了一个小例子（密切注意断言）：

```
// timezone independent date (usually interpreted by the timezone of 
// the default locale of the user machine)
Date now = new Date();

// now lets get explicit with how we wish to interpret the date
Calendar london =  Calendar.getInstance(TimeZone.getTimeZone("Europe/London"));
Calendar paris = Calendar.getInstance(TimeZone.getTimeZone("Europe/Paris"));

// now set the same date on two different calendar instance
london.setTime(now);
paris.setTime(now);

// the time is the same
assert london.getTimeInMillis() == paris.getTimeInMillis();

// London is interpreted one hour earlier than Paris (as of post date of 9th May 2012)
String londonTime = london.get(Calendar.HOUR) + ":" + london.get(Calendar.MINUTE);
String londonTZ = london.getTimeZone().getDisplayName(london.getTimeZone().inDaylightTime(london.getTime()), TimeZone.SHORT);
System.out.println(londonTime + " " + londonTZ);

// Paris is interpreted one hour later than Paris (as of post date of 9th May 2012)
String parisTime = paris.get(Calendar.HOUR) + ":" + paris.get(Calendar.MINUTE);
String parisTZ = paris.getTimeZone().getDisplayName(paris.getTimeZone().inDaylightTime(paris.getTime()), TimeZone.SHORT);
System.out.println(parisTime + " " + parisTZ); 
```

此代码段的输出是（结果将根据执行日期/时间而有所不同）：

```
8:18 BST
9:18 CEST 
```

您在问题中的代码段根本没有对存储的日期做任何事情。通常数据库配置为本地时区。我建议存储一个额外的字段来表示解释日期时要使用的 TimeZone。

修改日期（基本上是固定时间点之前/之后的几毫秒）不是（通常）一个好主意，因为这将是一种有损修改，在一年中的不同时间点会有不同的解释（由于夏令时时间）。

或者这个： http: [//puretech.paawak.com/2010/11/02/how-to-handle-oracle-timestamp-with-timezone-from-java/](http://puretech.paawak.com/2010/11/02/how-to-handle-oracle-timestamp-with-timezone-from-java/)

# java - Android - 单击时的 Listview 会激活新的意图

> ID：10522272
> 
> 赞同：0
> 
> 时间：2012-05-09T18:48:49.857
> 
> 标签：java, android, listview, android-activity, android-intent

好的，我一直在网上试图解决这个问题，并在这里和那里拼凑一些代码。我还是不明白。我想要的只是显示三个列表项，然后单击项目将转到一个新活动。我需要解决什么问题？

编辑：

我犯了一个愚蠢的错误。现已修复 - 谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:55:04.423

我猜你应该替换这个：

```
String item = (String) getListAdapter().getItem(position); 
```

有了这个：

```
String item = view.getText().toString(); 
```

`getListAdapter()`是 ListActivity 的函数，但不是常规 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:54:55.223

您确定在 android 清单中有新的活动类吗？您需要将要启动的每个活动添加到清单中。

检查您的 manifest.xml 并声明活动，您应该一切顺利。还要更改从侦听器获取信息的方式，以便从项目中获取字符串，而不是使用位置。这样，您可以通过在项目上指定 textview 来准确控制传递给您的意图的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:55:26.410

您永远不会将 onItemClickListener 设置为列表视图：

```
myList.setOnItemClickListener(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:57:05.593

Sam 和 El Duderino 都有正确的观点，但同样有趣的是：

您正在检查项目是否为“经济”“基本”“专业”等，但您的字符串数组只有一年中的月份......：P

此外，在设置 Intents 时，您不应该使用`this`，因为您在`onClick`事件中，这意味着`this`是 an`onClickListener`而不是`Activity`。所以使用`atcList.this`而不是只是`this`.

# c - 从串行端口（C/C++）读取时，如何实现 read() 超时

> ID：10522277
> 
> 赞同：14
> 
> 时间：2012-05-09T18:49:09.187
> 
> 标签：c, unix, timeout, tty

我正在使用文件描述符和 posix/unix read() 函数从 C++ 中的串行端口读取字节。在此示例中，我从串行端口读取 1 个字节（为清楚起见，省略了波特率设置和类似设置）：

```
#include <termios.h>
#include <fcntl.h>
#include <unistd.h>

int main(void)
{
   int fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY);
   char buf[1];
   int bytesRead = read(fd, buf, 1);
   close(fd);
   return 0;
} 
```

如果连接到 /dev/ttyS0 的设备没有发送任何信息，程序将挂起。如何设置超时？

我试过这样设置超时：

```
struct termios options;
tcgetattr(fd, &options);
options.c_cc[VMIN] = 0;
options.c_cc[VTIME] = 10;
tcsetattr(fd, TCSANOW, &options); 
```

我认为它应该给 1 秒超时，但它没有区别。我想我误解了 VMIN 和 VTIME。VMIN 和 VTIME 是做什么用的？

然后我在网上搜索，发现有人在谈论 select() 函数。那是解决方案吗？如果是这样，如何将其应用于上面的程序以使 1 秒超时？

任何帮助表示赞赏。提前致谢 ：-）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T19:52:35.157

是的，使用[`select(2)`](http://linux.die.net/man/2/select). 传入一个文件描述符集，其中仅包含读取集中的 fd 和空的写入/异常集，并传入适当的超时。例如：

```
int fd = open(...);

// Initialize file descriptor sets
fd_set read_fds, write_fds, except_fds;
FD_ZERO(&read_fds);
FD_ZERO(&write_fds);
FD_ZERO(&except_fds);
FD_SET(fd, &read_fds);

// Set timeout to 1.0 seconds
struct timeval timeout;
timeout.tv_sec = 1;
timeout.tv_usec = 0;

// Wait for input to become ready or until the time out; the first parameter is
// 1 more than the largest file descriptor in any of the sets
if (select(fd + 1, &read_fds, &write_fds, &except_fds, &timeout) == 1)
{
    // fd is ready for reading
}
else
{
    // timeout or error
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-21T11:43:53.117

VMIN 和 VTIME 是做什么用的？

> 如果 MIN > 0 且 TIME = 0，则 MIN 设置在满足读取之前要接收的字符数。由于 TIME 为零，因此不使用计时器。
> 
> 如果 MIN = 0 且 TIME > 0，则 TIME 用作超时值。如果读取单个字符或超过 TIME (t = TIME *0.1 s)，则读取将被满足。如果超过 TIME，则不会返回任何字符。
> 
> 如果 MIN > 0 且 TIME > 0，则 TIME 用作字符间计时器。如果接收到 MIN 个字符，或者两个字符之间的时间超过 TIME，则读取将被满足。每次接收到一个字符时都会重新启动计时器，并且只有在接收到第一个字符后才会激活。
> 
> 如果 MIN = 0 和 TIME = 0，读取将立即满足。当前可用的字符数，或请求的字符数将被返回。根据 Antonino（参见供稿），您可以发出 fcntl(fd, F_SETFL, FNDELAY); 在阅读之前得到相同的结果。

来源：[http ://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html](http://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T14:41:31.707

您可以尝试捕获信号以停止读取操作。在读取之前使用alarm(1)，如果读取函数没有返回，alarm会发送SIGALRM信号，那么你可以创建信号处理函数来捕获这个信号，像这样：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <setjmp.h>

static jmp_buf env_alarm;

static void sig_alarm(int signo)
{
    longjmp(env_alarm, 1);
}

int main(void)
{
   int fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY);
   char buf[1];

   if (signal(SIGALRM, sig_alarm) == SIG_ERR)
   {
       exit(0);
   }

   if (setjmp(env_alarm) != 0)
   {
      close(fd);
      printf("Timeout Or Error\n");
      exit(0);
   }

   alarm(1);
   int bytesRead = read(fd, buf, 1);
   alarm(0);

   close(fd);
   return 0;
} 
```

但是如果你的程序很大，使用 select 或 poll 或 epoll 会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T19:05:38.380

select() 是我解决这个问题的方法。

互联网上有几个页面将提供有关如何使用 select() 的信息，例如[http://www.unixguide.net/unix/programming/2.1.1.shtml](http://www.unixguide.net/unix/programming/2.1.1.shtml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T19:48:13.123

有几种可能的方法。如果程序最终会为多个 i/o 操作计时，`select()`这是明确的选择。

但是，如果唯一的输入来自这个 i/o，那么选择非阻塞 i/o 和时序是一种简单的方法。我已将其从单字符 i/o 扩展为多字符，以使其成为更全面的示例：

```
#include <fcntl.h>
#include <termios.h>
#include <unistd.h>
#include <sys/time.h>

int main(void)
{
   int   fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);  // sometimes "O_NONBLOCK"
   char  buf[10];
   int   done = 0, inbuf = 0;
   struct timeval start, now;

   gettimeofday (&start, NULL);
   while (!done)
   {
       int bytesRead = read(fd, &buf[inbuf], sizeof buf - inbuf);
       if (bytesRead < 0)
       {
            error_processing_here();
            continue;
       }
       if (bytesRead == 0)  // no data read to read
       {
            gettimeofday (&now, NULL);
            if ((now.tv.sec  - start.tv_sec) * 1000000 + 
                 now.tv.usec - start.tv_usec > timeout_value_in_microsecs)
            {
                done = 2;    // timeout
                continue;
            }
            sleep(1);  // not timed out yet, sleep a second
            continue;
       }
       inbuf += bytesRead;
       if (we have read all we want)
           done = 1;
   }
   if (done == 2)
        timeout_condition_handling();
   close(fd);
   return 0;
} 
```

# c# - 将图像与文件名一起保存到访问数据库c#

> ID：10522279
> 
> 赞同：0
> 
> 时间：2012-05-09T18:49:16.460
> 
> 标签：c#, winforms

我有连接到访问数据库的 ac# 应用程序，然后我使用 openfiledialog 查找图像，然后显示有关此的详细信息，然后我想将其保存到数据库中。但是当我尝试这样做时，我得到一个错误，说它太大了。那么解决这个问题的方法是什么？我希望保存文件路径，然后稍后可以在我的主窗口中查看它。

```
 private void button2_Click(object sender, EventArgs e)
    {
        DataRow drNewRow = m_dtMedia.NewRow();
        drNewRow["File_Path"] = textBox1.Text;
        drNewRow["Subject"] = textBox2.Text;
        drNewRow["Title"] = textBox3.Text;
        drNewRow["Keyword_Search"] = textBox4.Text;
        drNewRow["MediaType"] = textBox5.Text;
        m_dtMedia.Rows.Add(drNewRow);

        m_daDataAdapter.Update(m_dtMedia);
        m_rowPosition = m_dtMedia.Rows.Count - 1;
        this.ShowCurrentRecord();
        this.Close(); 
```

这有效，因为我尝试只输入字母，它将保存和更新数据库，另一方面保存图像不会。

错误信息

支持 OLeDb 异常

该字段太小，无法接受您尝试添加的数据量。尝试插入或粘贴更少的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:55:58.303

[上传和下载 BLOB 到 Microsoft Access](http://www.codeproject.com/Articles/16851/Uploading-and-Downloading-BLOBs-to-Microsoft-Acces)这将解释如何在 Access 数据库中存储图像。

> Microsoft Access 将 BLOB 数据存储在具有 OLE 对象数据类型的字段中。如果从 SQL 语句创建表，则数据类型为 IMAGE（类似于 SQL Server）。

例如

```
CREATE TABLE File (
     FileName VARCHAR(255),
     Size INT,
     Type VARCHAR(255),
     DateUploaded DATETIME,
     File IMAGE,
     CONSTRAINT File_PK PRIMARY KEY(FileName)
) 
```

# java - 如何使用 C++ 编译 .java 文件

> ID：10522285
> 
> 赞同：1
> 
> 时间：2012-05-09T18:49:37.490
> 
> 标签：java, c++, compilation

是否可以在 c++ 程序中编译 .java 文件（假设给了我 .java 文件）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:00:30.243

假设您的意思是在您的 C++ 程序中包含并运行已编译的 java 类：

您可以使用 JNI，它主要用于解决反向问题（从 Java 运行本机代码）。

查看[http://java.sun.com/docs/books/jni/html/invoke.html](http://java.sun.com/docs/books/jni/html/invoke.html)详细说明如何创建 JNI 环境以及如何在 Java 代码中调用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:01:36.750

可以使用 C++ 编译 Java 模块。在 UNIX/Linux 中，您可以让 C++ 使用`fork()`/ `exec()`C 函数`javac`在单独的进程中启动编译器。在 Windows 中，您可以使用 CREATEPROCESS 工具。

其他技术包括启动一个 shell，然后调用`javac`. 当您不想做更多工作以将输入和输出与“启动”程序集成时，有时会使用此选项。

您还可以利用现有的 JNI（Java 本机接口）在您的 C/C++ 进程中启动 JVM。在这样的解决方案下，您可以使用新的 Java 1.6 工具来获取工具链编译器。一旦有了编译器，就可以通过 JNI 调用调用它来编译源代码。

该`javac`程序是开源的。在适当的条件下（如果您正在开发与 GPL 兼容的东西），您可以将 HotSpot 代码直接集成到您的程序中。

最后，如果您只是编译 Java 的一小部分，您也可以编写自己的编译器。JVM 字节码非常容易理解，并且类文件格式可以公开访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:16:29.943

您可以通过在应用程序中嵌入 JVM 并编写一点（未经测试的）JNI 来获取和调用以下方法[`JavaCompiler`](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)：

```
jclass provider = env->FindClass("javax/tools/ToolProvider");
jmethodID providermid = env->GetStaticMethodID(provider, "getSystemJavaCompiler", "()Ljavax/tools/JavaCompiler");
jobject compiler = env->CallStaticVoidMethod(provider, providermid);

jclass cls = env->GetObjectClass(compiler);
jmethodID compilermid = env->GetMethodID(cls, "run", "(Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/io/OutputStream;[Ljava/lang/String;)I");

jstring filename = env->NewStringUTF(env, "my_file.java");
env->CallIntMethod(compiler, compilermid, NULL, NULL, NULL, filename); 
```

编译器是从[`ToolProvider`](http://docs.oracle.com/javase/6/docs/api/javax/tools/ToolProvider.html).

所以基本上早期的 C++ 代码是对以下内容的直接翻译：

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
int compilationResult = compiler.run(null, null, null, "my_file.java"); 
```

通过 JNI 进入 C++。

# applescript - AppleScript 中 If 语句的多个条件

> ID：10522286
> 
> 赞同：12
> 
> 时间：2012-05-09T18:49:42.937
> 
> 标签：applescript

我正在尝试修改`applescript`当 Outlook 中有新消息时触发咆哮通知的。原始脚本在[这里](http://www.eigenspace.org/2011/06/microsoft-outlook-growl-notifications/)。

在我的`if`声明中，我想说的是，如果文件夹是已删除邮件、垃圾邮件或已发送邮件，请不要触发通知。

这是声明：

```
if folder of theMsg is "Junk E-mail" or "Deleted Items" or "Sent Items" then
    set notify to false
else
    set notify to true
end if 
```

看来 applescript 不喜欢我添加的多个 is/or 项目。有没有办法包含多个条件，或者我是否需要编写嵌套的 if/then？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T19:59:58.773

在 AppleScript 中链接条件的正确方法`if`是重复完整的条件：

```
if folder of theMsg is "A" or folder of theMsg is "B" or folder of theMsg is "C" then 
```

– 左手参数没有隐含的重复。一种更优雅的方法是将您的左手参数与项目列表进行比较：

```
if folder of theMsg is in {"A", "B", "C"} then 
```

它具有相同的效果（请注意，这依赖于*文本*到*list*的隐式强制，这取决于您的`tell`上下文，可能会失败。在这种情况下，明确强制您的左侧，即`(folder of theMsg as list)`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:02:33.790

在条件语句中包含多个条件时，您必须重写*整个条件*语句。这有时会非常乏味，但这正是 AppleScript 的工作方式。您的表达式将变为以下内容：

```
if folder of theMsg is "Junk E-mail" or folder of theMsg is "Deleted Items" or folder of theMsg is "Sent Items" then
    set notify to false
else
    set notify to true
end if 
```

不过，有一个解决方法。您可以将所有条件初始化为一个列表，并查看您的列表是否包含匹配项：

```
set the criteria to {"A","B","C"}
if something is in the criteria then do_something() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T20:59:01.123

通过谷歌搜索“applescript if multiple conditions”浏览了这篇文章并且没有遇到我期望的代码片段，这就是我所做的（只是为了提供信息）：

您还可以递归地扫描多个条件。以下示例是： — 查看**发件人**电子邮件地址是否**包含**(Arg 1.1)**内容**(Arg 2.1.1 和 2.1.2) 以立即停止脚本并“通知”=> **true** (Arg 3.1)。— 查看**文件夹/邮箱**(Arg 1.2)是否**以“2012”** (Arg 2.2.1) 开头，但**不是文件夹 2012-AB 或 C** (Arg 2.2.2)，如果它不是以 2012 开头或包含在一个文件夹中3 个文件夹中的一个停止并且什么都不做 => **false** (Arg 3.2)。

```
if _mc({"\"" & theSender & " \" contains", "\"" & (name of theFolder) & "\""}, {{"\"@me.com\"", "\"Tim\""}, {"starts with \"2012\"", "is not in {\"2012-A\", \"2012-B\", \"2012-C\"}"}}, {true, false}) then
    return "NOTIFY "
else
    return "DO NOTHING "
end if 
```

-- 通过 shell 脚本进行多条件比较

```
on _mc(_args, _crits, _r)
    set i to 0
    repeat with _arg in _args
        set i to i + 1
        repeat with _crit in (item i of _crits)
            if (item i of _r) as text is equal to (do shell script "osascript -e '" & (_arg & " " & _crit) & "'") then
                return (item i of _r)
            end if
        end repeat
    end repeat
    return not (item i of _r)
end _mc 
```

[https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_about_handlers.html#//apple_ref/doc/uid/TP40000983-CH206-SW3](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_about_handlers.html#//apple_ref/doc/uid/TP40000983-CH206-SW3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T20:08:17.467

尝试：

```
repeat with theMsg in theMessages
        set theFolder to name of theMsg's folder
        if theFolder is "Junk E-mail" or theFolder is "Deleted Items" or theFolder is "Sent Items" then
            set notify to false
        else
            set notify to true
        end if
    end repeat 
```

尽管其他两个答案正确解决了多个标准，但除非您指定否则它们将不起作用，否则`name of theMsg's folder`您将得到

```
mail folder id 203 of application "Microsoft Outlook" 
```

# php - MySQL返回错误记录

> ID：10522288
> 
> 赞同：1
> 
> 时间：2012-05-09T18:49:49.010
> 
> 标签：php, mysql

我在我的页面上运行一个查询，它返回了错误的结果。这是我的代码：

```
$timestamp = time();
$query = "SELECT * FROM videos WHERE expire >= $timestamp AND home = 1 AND active = 1 ORDER BY id DESC LIMIT 1";
$result = mysql_query($query) or die(mysql_error());

if(mysql_num_rows($result) > 0) {
    $row = mysql_fetch_array($result);
    foreach ($row as $key => $value) {
        $$key = $value;
    }
} 
```

问题是，它返回的是第二条记录，而不是最近的 ID。但是，奇怪的是，如果我在 MySQL 的查询窗口中运行它，它会返回正确的记录。

这是它应该返回的记录上的数据：id：53，videoid：abc123，expire：1335596400，home：1，active：1

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:52:44.180

`1335596400`是`28 april`，所以 cleary 不是来自`time()`; 似乎您正在使用 MySQL 中的另一个时间戳（或根本没有时间戳）运行查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:04:25.953

使用 $query = "SELECT * FROM videos WHERE expire >= $timestamp AND home = 1 AND active = 1 ORDER BY id DESC LIMIT 0,1";

反而

$query = "SELECT * FROM videos WHERE expire >= $timestamp AND home = 1 AND active = 1 ORDER BY id DESC LIMIT 1";

# python - 分析标签集的最佳方法？

> ID：10522290
> 
> 赞同：2
> 
> 时间：2012-05-09T18:49:49.863
> 
> 标签：python, sql, excel, ms-access

我有数以千计的调查回复，这些回复已根据回复的内容进行了标记。每个响应可以有一个或多个标签（最多 20 个），并且标签彼此独立，而不是被构造成类别子类别或其他东西。

我希望能够进行如下分析：

*   给定标签有多少个实例？
*   哪些标签总体上出现频率最高？
*   标签 X 出现在哪里，还有哪些其他标签最常出现？
*   所有标签的列表及其旁边的每个标签的计数
*   选择数据子集进行类似分析（例如按国家/地区）

与我一起工作的人传统上在 Excel 中处理所有事情（一般业务战略咨询工作），而在这种情况下则行不通。他们的反应是将项目框架更改为 Excel 可以在数据透视表中处理的东西，但如果我们可以使用更强大的工具来支持更复杂的关系，那就更好了。

我一直在学习 SQLite，但开始担心我想做的事情会非常复杂。

我也一直在学习 Python（出于不相关的原因），我想知道 ORM 工具和一些 Python 代码是否是更好的选择。

然后有类似 Access 的东西（我没有，但如果它是这种东西的最佳选择，我可能愿意获得）。

总而言之，我很想知道这些分析总体上会有多难，以及哪些工具最适合这项工作。我完全接受这样一种想法，即我正在以一种倒退的方式思考部分或全部问题，并欢迎就我在这里所写内容的任何方面提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:59:43.097

虽然关于单个标签频率的数据应该很容易构建，但关于标签之间关系的数据非常困难并且属于数据挖掘领域。假设您有一个响应表、一个标签表和一个 response_tag 表，我将在非常高的级别上执行以下操作。

创建一个汇总表，列出响应标签的每个唯一组合，以及一个指示该组合出现次数的列。表结构应该类似于`combination (id, count)`, `combination_tags(combination_id, tag_id)`。使用过程语句（ORM 或 SQL 游标）填充表，然后使用即席查询对数据进行采样。

这不是一个简单的操作，但它会使用简单的 RDBMS 为您提供结果，而无需使用企业级数据挖掘解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:11:08.463

你有一个很小的数据集，所以你真的不需要任何类型的 ORM，只需在 Python 中加载所有数据并咀嚼它的报告。

SQL 作为一种语言对于更复杂的数据分析来说是可怕的（例如，你真的想对事物进行交叉制表等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:52:47.273

将所有标签收集到一个列表中，并使用 python collections.Counter 和相关方法来获取频率和许多其他统计信息。像这样

```
>>> from collections import Counter
>>> x=['java', 'python', 'scheme', 'scheme', 'scheme', 'python', 'go', 'go', 'c',
... 'c']
>>> freqs = Counter(x)
>>> freqs.most_common(1)
[('scheme', 3)]
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T20:16:39.430

使用 SQL！它对于数据分析非常强大。它将允许您在未来询问有关数据的问题。你还没有想到的问题。

尽管 SQL 作为一种语言可能看起来有点麻烦，但它比“真正的”编程语言更容易使用。在您的情况下，SQL 与 Excel 接口，因此用户可以通过他们熟悉的工具访问数据。

如果您确实使用 SQL，那么真正的数据库 (SQLLite) 是比 MSAccess 更好的解决方案。

我对 SQL 作为一种分析工具有足够的感觉，所以我写了一本关于这个主题的书，“使用 SQL 和 Excel 进行数据分析”。您可以查看亚马逊评论 (http://www.amazon.com/Data-Analysis-Using-SQL-Excel/dp/0470099518/ref=pd_sim_b_1) 以了解它的有效性。

# sitecore - Sitecore Analytics Api - 电子邮件发送、打开和点击

> ID：10522291
> 
> 赞同：2
> 
> 时间：2012-05-09T18:49:59.203
> 
> 标签：sitecore, analytics, sitecore-dms, sitecore-ecm

我们使用的是 Sitecore 6.5，我们设置了电子邮件活动，并且电子邮件会在注册用户生命周期的不同阶段自动触发。

我的任务是获取统计信息 - “已发送”、“打开率”和“点击率”的电子邮件总数（这是用户单击电子邮件上的链接并访问我们的网站）。

有谁知道如何使用 Sitecore Analytics API 做到这一点。我需要提取此信息并将其显示为报告。

我是 Analytics 的新手，任何帮助都将不胜感激。

编辑：我需要在网页中将其显示为 4 列：日期、发送的电子邮件总数、打开的电子邮件总数和点击的电子邮件总数。因此，如果您能指出我正确的 API，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T22:24:33.920

Jack - 在 Sitecore 后端，营销中心下方有一个区域，其中包含参与计划，这确实是您需要查看的地方。请记住一件事..这些有哪些特定用户可用..但它不会在报告中显示特定的“用户”。这在后端可用，但目前还不是简单的 API 调用。

所有电子邮件的跟踪都是通过参与计划和状态完成的。ECM 中的每封电子邮件都有一个名为 Engagement Plan 的字段，该字段指向用于跟踪事物的特定参与计划。在内容编辑器或营销中心浏览该参与计划将打开一个屏幕，您可以在其中查看参与计划中的状态并查看有多少电子邮件处于何种状态。ECM 参与计划包括从“排队等待发送”到打开和点击链接的所有状态，并进行了富有成效的访问。

您在 ECM 中配置的每封电子邮件都应该有一个参与计划，并且根据发送的电子邮件类型，您还可以通过单击“监控行为”来访问“已发送”文件夹中的电子邮件爆炸”。还有一个显示一些统计数据的执行仪表板，尽管这更像是一个 10000 英尺的视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T07:51:29.750

我找到了获取所需数据的方法，但我使用的是 Sitecore 版本 6.6，但在 6.5 中应该是相同的。如果您选择电子邮件活动的“已发送”文件夹中的消息，您将在项目详细信息的消息预览选项卡中找到“监控行为”按钮。此按钮打开分析数据对话框，其中显示您需要的信息。现在，通过这种方式在后端获取这些信息：

```
//get the message item we need the statistics for
var campaignMessage = Sitecore.Modules.EmailCampaign.Util.GetMessage(itemId);

//FlowDesigner will use the sc_ContentDatabase database
Sitecore.Context.Items["sc_ContentDatabase"] = Sitecore.Context.Database;

//get the flow by plan id
var flow = new FlowDesigner().ItemsToFlow(campaignMessage.PlanId);
Assert.ArgumentNotNull(flow, "flow");

var infos = new Dictionary<string, StateInfo>();

int totalVisitorsCount = 0;
foreach (State state in flow.States)
{
    totalVisitorsCount += state.Visitors;
    infos[state.Name] = new StateInfo(state.Id, state.Name, (double)state.Visitors, default(double), default(int), string.Empty);
}

foreach (StateInfo info in infos.Values)
    info.UsersPct = (totalVisitorsCount == default(double)) ? default(double) : Math.Round((double)((info.UsersTotal / totalVisitorsCount) * 100.0), 1);

TotalUserCount = totalVisitorsCount.ToString();
SentNotCompleted = infos["Send not Complete"].UsersTotal.ToString();
InvalidAddress = infos["Invalid Address"].UsersTotal.ToString();
SoftBouncePercent = infos["Soft Bounce"].UsersPct.ToString();
HardBouncePercent = infos["Hard Bounce"].UsersPct.ToString();
MessageOpened = infos["Message Opened"].UsersTotal.ToString();
ClickedThroughPercent = infos["Clicked Through Message"].UsersPct.ToString();
VisitorBouncedPercent = infos["Visitor Bounced"].UsersPct.ToString();
MessageUnopened = infos["Message Unopened"].UsersTotal.ToString(); 
```

这是对 Sitecore 用于获取统计数据的代码的轻微修改。修改是我将项目放在字典中，这样我就可以轻松地按名称引用它们，但计算逻辑没有改变。您可以获得的状态是：

*   收件人排队
*   发送未完成
*   无效地址
*   软反弹
*   硬反弹
*   消息未打开
*   消息已打开
*   通过消息点击
*   访客反弹
*   非生产性访客
*   富有成效的访客

您可以分别使用 Sitecore.Shell.MarketingAutomation.BusinessObjects.StateInfo 的 UsersTotal 和 UsersPct 属性以数字或百分比显示统计数据。

# wordpress - Wordpress，龙门框架，儿童主题？

> ID：10522293
> 
> 赞同：0
> 
> 时间：2012-05-09T18:50:03.823
> 
> 标签：wordpress, frameworks

有没有人有过龙门框架的经验？

我想知道是否可以基于默认创建子主题？我应该把我的 css 文件放在哪里，我可以从当前 css 构建而不是从头开始，同时仍然将 css 与默认主题分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-28T14:48:41.553

除了[创建 WordPress 子主题的常规过程](https://codex.wordpress.org/Child_Themes)（创建一个目录，带有适当的 style.css 和 functions.php），Gantry 需要[一个特定的过程](http://docs.gantry.org/gantry5/theme-development/create-child-theme-wordpress)。您需要将两个文件从父目录复制到子主题目录，保持结构：

```
/gantry/theme.yaml 
```

和

```
/includes/theme.php 
```

然后，编辑复制`theme.yaml`的：*parent*必须是您的父主题目录名称。

在 上`theme.php`，选择所有文本并替换为：

```
// Initialize theme stream.
$gantry['platform']->set(
    'streams.gantry-theme.prefixes',
    array('' => array(
        "gantry-themes://{$gantry['theme.name']}/custom",
        "gantry-themes://{$gantry['theme.name']}",
        "gantry-themes://{$gantry['theme.name']}/common",
        "gantry-themes://{$gantry['theme.parent']}",
        "gantry-themes://{$gantry['theme.parent']}/common"
    ))
); 
```

至于 css，您必须在子主题目录中创建此文件：

```
/custom/scss/custom.scss 
```

它可以被格式化为 SCSS 或 CSS，并且会覆盖主题的核心样式表文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:58:01.957

创建子主题非常容易。

您需要做的就是在您的主题目录中创建一个目录，并将其命名为“Gantry-child”。在该文件夹中，添加一个名为“style.css”的文件。完成后，您只需添加主题信息，告诉 Wordpress 子主题的名称、作者和父主题。

在新的 style.css 中，添加：

```
/*
Theme Name:     Gantry Child
Template:       rt_gantry_wp
*/ 
```

让 Wordpress 知道这是龙门主题的孩子的最重要部分是“模板”部分。这是主题文件夹中父目录的名称。

这将创建一个继承所有父主题功能的新主题。如果还想继承已有的父主题样式表，在style.css中添加：

```
@import url("../rt_gantry_wp/style.css"); 
```

希望这可以帮助您入门。完成后，您可以添加自己的页眉、页脚、索引、函数或您能想到的任何其他内容来扩展父主题的功能。

希望这可以帮助您入门。

# wcf - 适用于 HTML5 和 Silverlight 的 WCF 服务

> ID：10522294
> 
> 赞同：0
> 
> 时间：2012-05-09T18:50:04.587
> 
> 标签：wcf

我的 WCF 服务有两个端点（普通和 REST，一个用于 Silverlight 客户端，另一个用于 HTML5 客户端），我的 Silverlight 客户端应用程序可以完美运行，没有任何问题。当我在 IE 中打开我的服务时，我收到 HTTP 400 错误请求。看起来我的服务的 REST 部分有一些问题。我在下面给出了两个端点。感谢任何帮助！

正常终点

```
 <endpoint address="" binding="basicHttpBinding" contract="Test.Service1"
              bindingConfiguration="BasicHttpBinding_Config"
              behaviorConfiguration="MessageInspectorEndpointBehavior">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint> 
```

WCF 端点

```
 <endpoint address="rest" binding="webHttpBinding" contract="Test.Service1"
      behaviorConfiguration="web">
    </endpoint> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:05:46.577

应该向 .../WCF/Test/Service1.svc/ **rest**发出请求，因为这是您在配置中添加的 REST 端点的地址。

# python - 如何在 python/scipy 中有效地组装大型稀疏矩阵

> ID：10522296
> 
> 赞同：3
> 
> 时间：2012-05-09T18:50:07.543
> 
> 标签：python, scipy

我正在使用 Scipy 进行 FEM 项目。现在我的问题是，稀疏矩阵的组装太慢了。我计算密集小矩阵中每个元素的贡献（每个元素一个）。对于全局矩阵的组装，我遍历所有小的密集矩阵并按以下方式设置矩阵条目：

```
[i,j] = someList[k][l]
Mglobal[i,j] = Mglobal[i,j] + Mlocal[k,l] 
```

`Mglobal`是一个适当大小的 lil_matrice，`someList`映射索引变量。

当然，这是相当慢的，并且消耗了大部分矩阵组装时间。有没有更好的方法从许多小的密集矩阵组装一个大的稀疏矩阵？我试过 scipy.weave 但它似乎不适用于稀疏矩阵

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T01:10:52.137

我发布了我对 scipy 邮件列表的回复；堆栈溢出更容易访问，所以我也会在这里发布，尽管是一个稍微改进的版本。

诀窍是使用 IJV 存储格式。这是三个数组的三重奏，其中第一个包含行索引，第二个包含列索引，第三个包含该位置的矩阵值。这是构建有限元矩阵（或我认为的任何稀疏矩阵）的最佳方法，因为访问这种格式非常快（只需填充一个数组）。

在 scipy 中，这被称为`coo_matrix`; 该类将三个数组作为参数。它实际上只对转换为另一种格式（CSR os CSC）以实现快速线性代数有用。

对于有限元，您可以通过类似的方式估计三个数组的大小

```
size = number_of_elements * number_of_basis_functions**2 
```

因此，如果您有 2D 二次方，例如，您可以使用 number_of_elements * 36。这种方法很方便，因为如果你有本地矩阵，你肯定有全局数字和条目值：这正是构建三个 IJV 数组所需要的。Scipy 足够聪明，可以丢弃零条目，所以高估是可以的。

# javascript - 为什么在jQuery中传递给我的回调函数的参数不断变化？

> ID：10522297
> 
> 赞同：1
> 
> 时间：2012-05-09T18:50:13.590
> 
> 标签：javascript, closures, jquery, jquery-callback

我正在研究不同的方法来解决jQuery 中众所周知的有争议的[“requestAnimationFrame”删除，其中](http://bugs.jquery.com/ticket/9381)[animate](http://api.jquery.com/animate/)被恢复为使用 setTimeout/setInterval 而不是即将推出的[requestAnimationFrame API](http://www.w3.org/TR/animation-timing/#requestAnimationFrame)。这当然会导致一些已知问题，即当页面的浏览器选项卡不在焦点时动画会排队（因为我希望当页面的选项卡不在焦点时动画停止的这种效果，所以它成为一个问题）。一种解决方案是将所有内容包装在真正的“requestAnimationFrame”的跨浏览器[requestAnimFrame shim](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)中，另一种是为动画元素生成唯一 ID 加上时间戳，并且仅在窗口聚焦时运行动画。

这是我在使用焦点侦听器和 ID 传递的第二种方法时遇到的令人沮丧的问题的快速而肮脏的演示：http: [//jsfiddle.net/bcmoney/NMgsc/17](http://jsfiddle.net/bcmoney/NMgsc/17)

更新（主要问题已解决）：http: [//jsfiddle.net/bcmoney/NMgsc/](http://jsfiddle.net/bcmoney/NMgsc/)

准系统代码：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>window.focus listener EXAMPLE - jsFiddle demo by bcmoney</title> 
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<style type='text/css'>
  body { overflow:hidden; }
  #container { width:100%; height:100%; }
  #animated { width:120px; position:absolute; left:2px; top:20px; padding:50px; background:skyblue; color:white }
</style>
<script type='text/javascript'>//<![CDATA[ 
$(function(){
  var animation = 1;
  var startTime = undefined;
  var FPS = 60; //frames per second
  var AVAILABLE_WIDTH = $("#container").width() || "800px";
  var animation = null;
  var FOCUSED = false;
  var timestamp = new Date().getTime();
  var PAGE_ID = $("body").attr("id") + "-animated-"+timestamp;

  function continueScrolling(p) {
      console.log('FUNCTION p: '+p);
      if (FOCUSED === true && p === PAGE_ID) {
        animation = setTimeout(scrollRight.bind(p), FPS);
      } else {
          clearTimeout(animation);
          $('#animated').stop(true, true);
      }
  }

  var scrollRight = function(p) {
      time =  +new Date;
      startTime = (startTime !== undefined) ? startTime : time-FPS;
    move = ((time - startTime)/10 % AVAILABLE_WIDTH)+"px";
      console.log('P:'+p+' | T:'+time+' | ST:'+startTime+' | W:'+AVAILABLE_WIDTH+'\n'+move);
    $('#animated').animate({
         "left":move
      }, 
      1000/FPS, 
      "linear",
       function() {
         console.log('CALLBACK p: '+p);         
         continueScrolling(p);
       }
    );
  }  

  $(window).blur(function(){
     FOCUSED = false;
    $('#stop').click();
  });

  $(window).focus(function(){
     FOCUSED = true;
    $('#start').click();   
  });

  $('#start').click(function() {  
    scrollRight(PAGE_ID);
  });

  $('#stop').click(function() {
    $('#animated').stop(true, true);
    clearTimeout(animation);
  });
});//]]>  
</script>
</head>
<body id="slider">
  <a id="start" href="#start">Start</a> | <a id="stop" href="#stop">Stop</a>
<div id="container">
    <div id="animated">Animated content</div>
</div>
</body>
</html> 
```

我最近才意识到可能不需要唯一 ID，并放弃了我对焦点侦听器的初步调查，[现在支持 shim 方法](http://jsfiddle.net/bcmoney/HxqFR/)；然而，这种修补指出了 jQuery 的另一个潜在问题（或者更可能是我的理解），将参数传递给 jQuery 中的回调函数并确保参数的值通过动画的上下文传播。

如您所见，动画开始和停止是因为不再传递值“p”。我不是闭包方面的专家，但我看到他们[在这里](https://stackoverflow.com/questions/939032/jquery-pass-more-parameters-into-callback)提出作为一种解决方案以及使用*$.proxy*（我从[这里](https://stackoverflow.com/questions/939032/jquery-pass-more-parameters-into-callback#7350886)尝试过，然后休息一下并沮丧地发布到 SO）。我从来没有遇到过*$.ajax*或*$.getJSON*回调的问题，即使在链接 API 调用时也是如此，但由于某种原因，我似乎无法获取回调参数来维持其对*continueScrolling*函数的后续调用的值。一些 JS/jQuery ninjas 的任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:02:26.650

setTimeout 需要一个函数作为第一个参数：

```
 animation = setTimeout(function(){scrollRight(p)}, FPS); 
```

[http://jsfiddle.net/K2nfM/](http://jsfiddle.net/K2nfM/)

# regex - Perl 6分别捕获重复匹配组？

> ID：10522302
> 
> 赞同：4
> 
> 时间：2012-05-09T18:50:41.297
> 
> 标签：regex, regex-group, raku

我相信 Perl 6 提供了单独捕获重复组的能力，而不是早期版本，您只能捕获最后一个组或整个匹配的组字符串。有人可以举一个很好的例子如何使用 Perl 6 的这个很棒的特性吗？例如

我需要为此正则表达式捕获所有匹配组

```
((?:(?:(?:(?:")(?:[^"]*?)")|(?:(?<!")(?:[^"]*?)(?!")))(?<!\\)\|)*) 
```

我如何在 Perl 6 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:50:17.563

通常，如果您量化捕获，您只需获得所有匹配项的列表。例子：

```
$ perl6 -e '"abc" ~~ /<alpha>+/ and say $<alpha>.join(", ")'
a, b, c 
```

也适用于位置捕获：

```
$ perl6 -e '"abc" ~~ /(\w)+/ and say $0.join(", ")'
a, b, c 
```

现在你可以把它应用到你自己的正则表达式上，这看起来是人为的复杂。它是以某种方式生成的吗？

# objective-c - 如何以纵向移动键盘视图

> ID：10522312
> 
> 赞同：0
> 
> 时间：2012-05-09T18:51:38.273
> 
> 标签：objective-c, ios, ipad

我有一个仅以纵向和纵向向上运行的应用程序。我需要在键盘出现时将视图向上推，并在它消失时将其拉回。如果设备保持纵向，则以下代码可以完美运行，但如果它是纵向的，则视图会移动错误的方向（-260 而不是 260），而且如果在显示键盘时方向发生变化，则不会处理...... keyboardWillHide 方法在两个方向都可以正常工作。有没有办法将视图相对移动到键盘或状态栏，所以设备的方向无关紧要？？？

```
- (void) keyboardWillShow:(NSNotification *) notification
{
    NSLog(@"Keyboard Will Show");
    double animationDuration;
    animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    [UIView animateWithDuration:animationDuration delay:0 options:UIViewAnimationCurveEaseIn animations:^{
        self.view.center = CGPointMake(self.view.center.x, self.view.center.y + -260);
    }completion:^(BOOL finished){
    }];
}

- (void) keyboardWillHide:(NSNotification *) notification
{
    double animationDuration;
    animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    NSLog(@"Keyboard Will Hide");

    [UIView animateWithDuration:animationDuration delay:0 options:UIViewAnimationCurveEaseIn animations:^{
        [self.view setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
     }completion:^(BOOL finished){
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:55:15.453

不幸的是，您将不得不自己管理。您可以询问当前方向并适当地设置 y 轴调整。

```
int movementDistance = -260;
if (UIInterfaceOrientationPortraitUpsideDown == [self interfaceOrientation]) movementDistance = -movementDistance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:54:02.470

我以这种方式解决了它（不太优雅）：

注意：您应该做的事情，我将更改此代码以最终执行它们是：创建一个属性来保存键盘动画持续时间，以便我可以在键盘委托方法之外使用它，并类似地为偏移量创建一个属性并确定它使用 userInfo 作为键盘的高度。

```
- (void) keyboardWillShow:(NSNotification *) notification
{
    NSLog(@"Keyboard Will Show");
    if (self.interfaceOrientation == UIInterfaceOrientationPortrait)
        offset = -260;
    else 
        offset = 260;

    double animationDuration;
    animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    [UIView animateWithDuration:animationDuration delay:0 options:UIViewAnimationCurveEaseIn animations:^{
        self.view.center = CGPointMake(self.view.center.x, self.view.center.y + offset);
    }completion:^(BOOL finished){
    }];
}

- (void) keyboardWillHide:(NSNotification *) notification
{
    double animationDuration;
    animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    NSLog(@"Keyboard Will Hide");

    [UIView animateWithDuration:animationDuration delay:0 options:UIViewAnimationCurveEaseIn animations:^{
        self.view.center = CGPointMake(self.view.center.x, self.view.center.y - offset);
     }completion:^(BOOL finished){
    }];
}

- (void) keyboardDidShow
{
    NSLog(@"Keyboard Did Show");
    keyboardIsShowing = YES;
}

- (void) keyboardDidHide
{
    NSLog(@"Keyboard Did Hide");
    keyboardIsShowing = NO;
}

-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{    
    if (keyboardIsShowing && UIInterfaceOrientationIsPortrait(toInterfaceOrientation))
    {
        if (toInterfaceOrientation == UIInterfaceOrientationPortrait && offset == 260)
            offset = -260;
        else if (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown && offset == -260)
            offset = 260;
        else 
            return;
        [UIView animateWithDuration:.25 delay:0 options:UIViewAnimationCurveEaseIn animations:^{
            self.view.center = CGPointMake(self.view.center.x, self.view.center.y + 2* offset);
        }completion:^(BOOL finished){
        }];
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T19:14:53.007

您需要设置框架高度，或者为视图设置 contentInset，而不是中心。

# entity-framework-4.1 - 实体框架 4.1 与表自身的关系

> ID：10522316
> 
> 赞同：0
> 
> 时间：2012-05-09T18:51:52.827
> 
> 标签：entity-framework-4.1

有没有人可以告诉我如何首先使用实体​​框架代码进行相应的表映射。这是我的桌子

[在此处输入链接描述](http://img195.imageshack.us/img195/4890/matiere.png)

我试过这样做，但没有任何成功。

```
[Table("Matiere")]
public class Matiere
{
    [Key]
    public Int32 Id { get; set; }
    public Int32? IdParent { get; set; }
    [Column("NomMatiere")]
    public String Nom { get; set; }
    public virtual Matiere Parent { get; set; }
    public virtual ICollection<Matiere> Childs { get; set; }
}

public class MatiereConfiguration : EntityTypeConfiguration<Matiere>
{
    public MatiereConfiguration()
    {
        this.HasOptional(m => m.Parent).WithMany(m => m.Childs).HasForeignKey(m => m.IdParent);
        this.HasOptional(m => m.Childs).WithRequired();
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:13:27.347

你很近。我认为您不需要提供`HasOptional(m => m.Childs).WithRequired();`

首先，我会将您的所有映射信息放入您的 MatiereConfiguration 中，而不是混合使用 DataAnnotations 和 Fluent 映射。这不是必需的，只是一个建议。

这应该有效：

```
 public class MatiereConfiguration : EntityTypeConfiguration<Matiere>
    {
        public MatiereConfiguration()
        {
          HasKey(m => m.Id);
          Property(m => m.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
          Property(m => m.Nom).HasColumnName("NomMatiere")           
          HasOptional(m => m.Parent).WithMany(m => m.Childs).HasForeignKey(m => m.IdParent);

        }
    } 
```

# python - 如何在 pyGTK 中创建 onMouseOver 标签？

> ID：10522320
> 
> 赞同：1
> 
> 时间：2012-05-09T18:52:02.910
> 
> 标签：python, gtk, pygtk, widget, glade

如何创建 onMouseOver 标签？

例如，当您将鼠标放在 Firefox 的 BACK 按钮上时，它会显示一个带有按钮功能说明的小黄色框。

它是一个小部件吗？它的正确名称是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:29:41.187

它被称为工具提示

[http://www.pygtk.org/docs/pygtk/class-gtktooltip.html](http://www.pygtk.org/docs/pygtk/class-gtktooltip.html)

上一个`gtk.Widget`你可以调用方法`set_tooltip_text`或者`set_tooltip_markup`产生​​想要的效果

[http://developer.gnome.org/pygtk/stable/class-gtkwidget.html#method-gtkwidget--set-tooltip-text](http://developer.gnome.org/pygtk/stable/class-gtkwidget.html#method-gtkwidget--set-tooltip-text)

# xcode4.3 - Xcode 4.3.2；如何重新链接符号以便“跳转到定义”有效？

> ID：10522324
> 
> 赞同：1
> 
> 时间：2012-05-09T18:52:24.073
> 
> 标签：xcode4.3

我最近丢弃了我的 Xcode 4.3.2 并从 App Store 下载了它的替代品。现在我无法通过“跳转到定义”上下文菜单访问定义符号。

我得到“未找到符号”；每时每刻！

有没有办法重新索引所有内容，以便 Xcode 4.3.2 知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:47:14.123

当我强制 Spotlight 重新索引时，我得到了一些改进，尽管问题仍然存在，但现在有时“跳转到定义”有效，这是对从不跳转的改进。

如何重新索引聚光灯：

- 从 Apple 菜单中，选择系统偏好设置。

- 单击聚光灯。

- 单击隐私选项卡。

- 将文件夹甚至整个卷（您的硬盘）拖到列表中。

- 删除您刚刚添加的项目或卷。

( [http://support.apple.com/kb/HT2409?viewlocale=en_US&locale=en_US](http://support.apple.com/kb/HT2409?viewlocale=en_US&locale=en_US) )

# arrays - 用最大元素转换数组的每个元素

> ID：10522330
> 
> 赞同：0
> 
> 时间：2012-05-09T18:52:32.617
> 
> 标签：arrays, algorithm

> **可能重复：**
> [数组中值变换最小步骤](https://stackoverflow.com/questions/10499230/array-median-transformation-minimum-steps)

正如标题所说，我们需要用数组中的最大元素替换它的所有元素。但是我们可以应用的唯一操作是：

> 给定大小为 n 的数组 A，当它按升序排序时，它的中位数是索引为 [n/2]+1 的元素。我们可以应用的唯一操作是任何连续的子数组 B[l...r] l>=1 和 r<=n（基于 1 的索引）并将其所有元素替换为其中位数。

我们需要确定可以将给定数组中的所有元素转换为数组中的最大元素的最小操作数。

我无法找到解决这个问题的方法..我理解的唯一一点是，如果数组包含最大元素 m 次，那么通过上述操作，我们最多只能用它替换 m 个元素。当最大元素变为 >=n/2 那么我们只需要一次操作。

> 例如，如果给定 A 为 1 2 3，那么首先我们可以取中位数为 3 的子数组 2 3，因此我们的数组变为 1 3 3 现在取大小为 3 的子数组，我们得到的答案是 3 3 3。

# php - 在 php sql 代码中包含缩略图上传

> ID：10522337
> 
> 赞同：-2
> 
> 时间：2012-05-09T18:52:55.623
> 
> 标签：php, mysql, thumbnails, image-uploading

我有一个上传到 php 中的 mysql 脚本，该脚本非常适用于属性网站 - 插入所有相关字段和主图像。

但问题是，此图像用于将缩略图标识为 xxxxxt.png 的幻灯片中，其中主图像为 xxxxx.png。

我的PHP代码是：

```
<?php include 'dbc.php'; page_protect();

if(!checkAdmin()) {header("Location: login.php");
exit();
}

$host  = $_SERVER['HTTP_HOST'];
$host_upper = strtoupper($host);
$login_path = @ereg_replace('admin','',dirname($_SERVER['PHP_SELF']));
$path   = rtrim($login_path, '/\\');

foreach($_GET as $key => $value) {
    $get[$key] = filter($value);
}

foreach($_POST as $key => $value) {
    $post[$key] = filter($value);
}   

$uniqid = md5(uniqid(mt_rand()));

?>

<?php 
if($_FILES['photo']) //check if we uploading a file
{
    $target = "images/properties/"; 
    $target = $target . basename( $_FILES['photo']['name']);

    $title = mysql_real_escape_string($_POST['title']); 
    $desc = mysql_real_escape_string($_POST['desc']); 
    $extra = mysql_real_escape_string($_POST['extra']); 
    $postcode = mysql_real_escape_string($_POST['postcode']); 
    $price = mysql_real_escape_string($_POST['price']);  
    $pandp = mysql_real_escape_string($_POST['pandp']);  
    $pic = "images/properties/" .(mysql_real_escape_string($_FILES['photo']['name']));
if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)) 
{
    mysql_query("INSERT INTO `furnishings` (`title`, `postcode`, `desc`, `extra`, `productcode`, `price`, `status`, `pandp`, `photo`) VALUES ('$title', '$postcode', '$desc', '$extra', '" . $uniqid . "', '$price', 'tolet.png', '$pandp', '$pic' )") ;     

    echo "The property has been added to the lettings portfolio"; 
} 
else 
{ 
    echo "Error uploading new property - please ensure all the fields are correctly entered and the file is an image"; 

}
} 
?> 
```

上传表单的html代码是：

```
<form enctype="multipart/form-data" action="addlet.php" method="POST">
  <table width="600px" border="2" cellpadding="5"class="myaccount">
   <tr>
       <td width="135">Title: </td>
       <td width="427"><input name="title" type="text" size="40"/></td>
    </tr>
     <tr>
       <td>Description: </td>
       <td><textarea name = "desc" rows="3" cols="40"></textarea></td>
     </tr>
          <tr>
       <td>Property Features: </td>
       <td><textarea name = "extra" rows="3" cols="40"></textarea></td>
     </tr>
          <tr>
       <td>Postcode: </td>
       <td><input name = "postcode" type="text" size="40" /></td>
     </tr>
     <tr>
       <td>Price per week (&pound;): </td>
       <td><input name = "price" type="text" size="40" /></td>
     </tr>
        <tr>
       <td>Furnished/Unfurnished: </td>
       <td><input name = "pandp" type="text" size="40" /></td>
     </tr>
     <tr>
       <td>Main Image: </td>
       <td><input type="file" name="photo" class="forms" /></td>
     </tr>  </table></p>
<p> <input type="submit" class="CMSbutton" value="Add" /></p>
</form> 
```

有没有一种简单的方法来添加额外的代码行，它将两个图像插入服务器上所需的目标，（images/properties/） - 一个是图像的原始名称，一个是缩略图版本（带有“t " 在图像名称的末尾）。

因为它们都相当小，所以我不会对调整缩略图的大小大惊小怪，因为代码已经完成了，我不想重建所有东西！

非常感谢任何帮助

谢谢京东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:32:57.857

如果您的图像文件被成功移动到位，我会采取这个策略：创建列`is_uploaded`，`is_thumb_created`并`is_image_created`在您的数据库表中。成功上传并移动后，设置第一个。

然后运行 ​​cron 或其他后台系统，从上传的图像生成“主”和“拇指”视图（请记住，上传的图像对于普通屏幕大小的图片可能太大）。成功生成这些图像后，可以将相关列设置为“完成”，并且在发生这种情况之前，该行保持非活动状态。

顺便说一句，这种方法的可扩展性要大得多，因为它不会因昂贵的图像处理而阻塞您的 Web 请求。

# c# - 我该如何为此编写一个 linq 查询？

> ID：10522343
> 
> 赞同：1
> 
> 时间：2012-05-09T18:53:20.677
> 
> 标签：c#, linq-to-sql

我需要在 Linq to SQL 中编写以下查询，但不确定最好的方法是什么，因为它有两个派生表。有什么建议么。

```
SELECT A.ID  
FROM  
(   
    SELECT *   
    FROM Orders   
    WHERE ProductID = 5  
) A  
JOIN  
(  
    SELECT CustomerID, MAX(Price) Price   
    FROM Orders   
    WHERE ProductID = 5  
    GROUP BY CustomerID  
) B  
ON A.CustomerID = B.CustomerID and A.Price = B.Price 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:04:58.350

```
var b = (
    from o in db.Orders
    where o.ProductID == 5
    group o by o.CustomerID into og 
    select new {
        CustomerID = og.Key
        Price = Max(og.Price)
    }
);
var a = (
    from o in db.Orders
    join p in b on new {a.CustomerID, a.Price} equals 
            new {b.CustomerID, b.Price}
    where o.ProductID == 5
    select a.ID
);
var r = a.ToString(); 
```

在形成这样的东西时，这两个链接非常宝贵：

*   [http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)
*   [http://msdn.microsoft.com/en-us/vstudio/bb688085](http://msdn.microsoft.com/en-us/vstudio/bb688085)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:09:28.480

您能否使用 LINQ 简化这一点，特别是如果您使用方法语法而不是查询语法。

```
orders.Where(o => o.ProductID == 5)
    .GroupBy(o => o.CustomerID)
    .SelectMany(g => g.Where(o => o.Price == g.Max(m => m.Price))); 
```

我在编写 LINQ 时的建议是，不要简单地尝试完全转换 SQL 语句。考虑期望的结果并开发一个专为 LINQ 设计的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:03:25.247

这些方面的东西：

```
var result = from a in context.Orders
             join b in (context.Orders.Where(o => o.ProductID == 5).GroupBy(o => o.CustomerID).Select(g => new { CustomerID = g.Key, Price = g.Max(o => o.Price)))
                 on new {a.CustomerID, a.Price} equals new {b.CustomerID, b.Price}
             where a.ProductID == 5
             select a.ID; 
```

# c# - 如何选择列包含字符串的任何单词的所有行

> ID：10522345
> 
> 赞同：1
> 
> 时间：2012-05-09T18:53:24.043
> 
> 标签：c#, sql, sql-server

我首先问了这个问题[我希望选择包含数组中任何元素的所有行](https://stackoverflow.com/questions/10521553/i-wish-to-select-all-rows-which-contain-any-element-from-an-array) 虽然我当前的问题几乎相同，但它的目的完全不同，所以我担心答案可能会有所不同，这会掩盖前一个， 照这样说。

我正在研究搜索引擎类型的东西。我需要搜索存储在数据库中的标题，以查看它是否包含搜索文本框中的任何单词。然后我计划遍历这些行中的每一行，计算有多少单词匹配并相应地对结果进行排名。我相信这已经做了很多次了。我似乎无法弄清楚如何做到这一点

```
select * from table 
```

然后在c#中对其进行排序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:03:13.487

sql server 中的一种方法是

像这样推临时表中的单词

```
DECLARE @SearchWords TABLE (
  word varchar(30) )

INSERT INTO @SearchWords
        (word)
VALUES  ('Jack')
       ,('Pontiac')
       ,('Bloggs'); 
```

而不是将此表与实际表连接起来

```
SELECT a.* FROM table_data a
INNER JOIN @SearchWords b on a.record_desc like '%' + b.word + '%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:56:46.533

你可以尝试这样的事情：

```
SELECT * FROM table WHERE name LIKE '%word1%' OR name LIKE '%word2%'; 
```

这些`%`标志与典型搜索中的类似`*`。

要获取字符串并为多个单词创建此查询，您可以执行以下操作：

```
String inputString = "hello my friend";
String[] wordlist = inputString.split(" ");
String query = "SELECT * FROM table WHERE 0=0 ";
for(String word : wordlist) {
    query += "OR name LIKE '%" + word + "%' "; 
} 
```

字符串末尾的空格很重要，不要忘记！此外，您可能需要在拆分字符串之前对其进行清理（删除额外的标点符号，甚至可能删除“a”或“the”或“to”等单词）

# mongodb - 如何更新文档数组中的对象（嵌套更新）

> ID：10522347
> 
> 赞同：229
> 
> 时间：2012-05-09T18:53:26.547
> 
> 标签：mongodb

假设我们有以下集合，我对此几乎没有疑问：

```
{
    "_id" : ObjectId("4faaba123412d654fe83hg876"),
    "user_id" : 123456,
    "total" : 100,
    "items" : [
            {
                    "item_name" : "my_item_one",
                    "price" : 20
            },
            {
                    "item_name" : "my_item_two",
                    "price" : 50
            },
            {
                    "item_name" : "my_item_three",
                    "price" : 30
            }
    ]
} 
```

1.  我想提高 "item_name":"my_item_two" 的价格**，如果它不存在**，它应该附加到 "items" 数组中。

2.  如何同时更新两个字段？例如，增加“my_item_three”的价格，同时增加“total”（具有相同的值）。

我更喜欢在 MongoDB 端执行此操作，否则我必须在客户端 (Python) 中加载文档并构建更新的文档并将其替换为 MongoDB 中的现有文档。

**如果**对象存在，这是我尝试过的并且工作正常：

```
db.test_invoice.update({user_id : 123456 , "items.item_name":"my_item_one"} , {$inc: {"items.$.price": 10}}) 
```

但是，如果密钥不存在，它什么也不做。此外，它只更新嵌套对象。此命令也无法更新“总计”字段。

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-05-09T20:57:28.373

对于问题 #1，让我们将其分为两部分。首先，增加任何“items.item_name”等于“my_item_two”的文档。为此，您必须使用位置“$”运算符。就像是：

```
 db.bar.update( {user_id : 123456 , "items.item_name" : "my_item_two" } , 
                {$inc : {"items.$.price" : 1} } , 
                false , 
                true); 
```

请注意，这只会增加任何数组中第一个匹配的子文档（因此，如果数组中有另一个文档的“item_name”等于“my_item_two”，它将不会增加）。但这可能是你想要的。

第二部分比较棘手。我们可以将新项目推送到没有“my_item_two”的数组中，如下所示：

```
 db.bar.update( {user_id : 123456, "items.item_name" : {$ne : "my_item_two" }} , 
                {$addToSet : {"items" : {'item_name' : "my_item_two" , 'price' : 1 }} } ,
                false , 
                true); 
```

对于您的问题 #2，答案更容易。要在包含“my_item_three”的任何文档中增加 item_three 的总计和价格，您可以同时在多个字段上使用 $inc 运算符。就像是：

```
db.bar.update( {"items.item_name" : {$ne : "my_item_three" }} ,
               {$inc : {total : 1 , "items.$.price" : 1}} ,
               false ,
               true); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-08-02T19:22:40.030

在单个查询中无法做到这一点。您必须在第一个查询中搜索文档：

如果文件存在：

```
db.bar.update( {user_id : 123456 , "items.item_name" : "my_item_two" } , 
                {$inc : {"items.$.price" : 1} } , 
                false , 
                true); 
```

别的

```
db.bar.update( {user_id : 123456 } , 
                {$addToSet : {"items" : {'item_name' : "my_item_two" , 'price' : 1 }} } ,
                false , 
                true); 
```

无需添加条件`{$ne : "my_item_two" }`。

同样在多线程环境中，您必须注意一次只有一个线程可以执行第二个线程（插入案例，如果未找到文档），否则将插入重复的嵌入文档。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-02-15T19:25:05.457

我们可以使用**`$set`**运算符来更新对象字段内的嵌套数组更新值

```
db.getCollection('geolocations').update( 
   {
       "_id" : ObjectId("5bd3013ac714ea4959f80115"), 
       "geolocation.country" : "United States of America"
   }, 
   { $set: 
       {
           "geolocation.$.country" : "USA"
       } 
    }, 
   false,
   true
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-04T06:46:38.883

确保“item_name”字段不重复的一种方法是执行与问题 #1 的答案[https://stackoverflow.com/a/10523963](https://stackoverflow.com/a/10523963)中给出的相同操作，但顺序相反！

1.  如果 "items.item_name":{"$ne":"my_name"} 进入文档 - 更新过滤器必须包含一些唯一索引字段！而 upsert 是错误的。
2.  如果“items.item_name”：“my_name”，则增加文档。

第一次更新应该是原子的，因此如果数组已经包含 item_name 为“my_name”的元素，它不会做任何事情。

到第二次更新发生时，必须有一个带有“item_name”=“my_name”的数组元素

# ruby-on-rails - 在 2 个 Rails 应用程序之间进行通信

> ID：10522352
> 
> 赞同：1
> 
> 时间：2012-05-09T18:53:59.573
> 
> 标签：ruby-on-rails, json

我有 2 个单独的 Rails 应用程序（应用程序 a、应用程序 b）。这两个应用程序都维护一个客户列表。我想每天运行一次 rake 任务，并让应用 b 从应用 a 中拉取选定的客户。

这是我试图解决这个问题的方法。如果我走错了路，请告诉我。

我正在使用 JBuilder 生成 JSON

我的问题是如何让应用 B 在应用 A 中设置一个 id，以便系统知道客户已经被转移过来。

我假设我必须做一个类似于我为获取客户列表所做的请求，但我在让它工作时遇到了问题。

应用程序 A

客户模型

```
scope :for_export, :conditions => {:verified => true, :new_system_id => nil ...} 
```

客户控制器

```
skip_before_filter :verify_authenticity_token, :only => [:update]

#
def index
    @customers = Customer.for_export
end

def update
    @customer = Customer.find(params[:id])
    if @customer.update_attributes(params[:customer])
        render :text => 'success', :status => 200
    end
end 
```

应用程序 B

耙任务

```
task :import_customers => :environment do
   c = Curl::Easy.new("http://domain.com/customers.json")
   c.http_auth_types = :basic
   c.username = 'username'
   c.password = 'password'
   c.perform
   a = JSON.parse(c.body_str)

   a.each do |customer|
       customer = Customer.create(customer)
           #put request back to server a to update field
       end

end 
```

结束结束

我目前正在工作，我只是不确定这是否是正确的方法，以及如何发起一个 put 请求来调用客户控制器中的更新方法。

谢谢！

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:22:29.723

对不起，我没有回答你的问题，但我给你一个替代方案。您尝试创建的内容听起来很像 ETL 工作。您可能需要考虑让批处理作业定期将客户表的副本从应用程序 a 移动到应用程序 b，然后让另一个批处理作业将该表导入应用程序 b 的数据库。我知道，这有点笨拙，但它是一种非常流行且可靠的模式来解决您的问题。

此外，如果两个应用程序位于同一个数据中心，那么您可能需要创建应用程序 a 的客户数据的只读数据库视图，然后让应用程序 b 使用 SQL 调用读取该数据。与我上面列出的选项相比，这是一种集成这两个应用程序的更便宜、更简单的方法。

祝你好运！

# opengl - GL_TEXTURE_MIN_FILTER 和 glTexImage2D 的理想顺序

> ID：10522354
> 
> 赞同：0
> 
> 时间：2012-05-09T18:54:19.350
> 
> 标签：opengl

在所有示例中，GL_TEXTURE_MIN_FILTER 和 GL_TEXTURE_MAG_FILTER 总是在调用 glTexImage2D 之前设置。这有什么原因吗？

我知道在纹理可用之前必须设置它们（或者你必须制作 mipmap），但是在 glTexImage2D 之后设置它们有什么问题吗？

例子：

```
GL11.glTexParameteri(target, GL11.GL_TEXTURE_MIN_FILTER, GL_NEAREST);
GL11.glTexParameteri(target, GL11.GL_TEXTURE_MAG_FILTER, GL_NEAREST);
GL11.glTexImage2D(target, 0, GL_RGBA8, t_width, t_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, textureBuffer); 
```

对比

```
GL11.glTexImage2D(target, 0, GL_RGBA8, t_width, t_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, textureBuffer);
GL11.glTexParameteri(target, GL11.GL_TEXTURE_MIN_FILTER, GL_NEAREST);
GL11.glTexParameteri(target, GL11.GL_TEXTURE_MAG_FILTER, GL_NEAREST); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:59:12.523

不，不应该有任何区别。只有在对纹理进行采样时，这些才应该有任何影响，这要晚得多。

# c# - 如何从这串数据中提取文本

> ID：10522365
> 
> 赞同：1
> 
> 时间：2012-05-09T18:55:15.333
> 
> 标签：c#, regex

我需要提取城市并列出如下所示的数据字符串：

```
8 mi SSW of Newtown, PA
10 mi SE of Milwaukee, WI
29 Miles E of Orlando, FL 
```

截至目前，我将每个字符串单独传递给一个方法

`string statusLocation = "8 mi SSW of Newtown, PA"`

等一次。

搜索此字符串以查找城邦的最佳方法是什么？我在考虑正则表达式或逗号的子字符串和索引等。我不太确定如果一个州是 3 个字符或一个城市中有一个逗号会遇到什么样的问题，因为这也是加拿大数据和我不确定他们如何缩写东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:03:14.377

你可以做一个

```
string str = "8 mi SSW of Newtown, PA";
var parts = str.Split(new[] {' '}, 5); 
```

零件看起来像这样：{“8”，“mi”，“SSW”，“of”，“Newtown，PA”}，您可以使用零件[4]轻松访问“Newtown，PA”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:59:28.027

你可以使用这个正则表达式：

```
of (.*), ([a-zA-Z]{2})$ 
```

这将捕获 , 之后的所有内容`of`，逗号后跟一个空格，然后是两个字母，然后是行尾。例如：

```
var regex = new Regex("of (.*), ([a-zA-Z]{2})$");
var strings = new[]
                    {
                        "8 mi SSW of Newtown, PA",
                        "10 mi SE of Milwaukee, WI",
                        "29 Miles E of Orlando, FL"
                    };

foreach (var str in strings)
{
    var match = regex.Match(str);
    var city = match.Groups[1];
    var state = match.Groups[2];
    Console.Out.WriteLine("state = {0}", state);
    Console.Out.WriteLine("city = {0}", city);
} 
```

这当然假设与数据有一定的一致性，比如状态是两个字母。

# regex - 在正则表达式之后获取字符串并在每一行上用匹配替换它的脚本

> ID：10522368
> 
> 赞同：1
> 
> 时间：2012-05-09T18:55:29.957
> 
> 标签：regex, sed

到目前为止，已经能够提取模式匹配之间的字符串，但还不能根据需要将其扩展为打印。

我的文件内容：

```
my number 12345 string1 string2
my number 789 string1 string2
my number 456789023 string3 string4 
```

下一条命令

```
sed -e "s/.*number//;s/string.*//" filename 
```

给我输出

```
 12345 
 789 
 456789023 
```

我需要帮助来扩展它或打印输出的更好方法

```
my number 12345 num 12345 string1 string2
my number 789 num 789 string1 string2
my number 456789023 num 456789023 string3 string4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:05:23.540

这可能对您有用：

```
sed 's/[0-9]\+/& num &/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:32:08.280

从您的示例中，我得出：

```
sed -r "s/number (.*) string/number \1 num \1 string/" FILE 
```

# arrays - 我应该如何初始化这个多维数组？

> ID：10522370
> 
> 赞同：6
> 
> 时间：2012-05-09T18:55:32.593
> 
> 标签：arrays, multidimensional-array, initialization, d

我有一个巨大的 3 维数组来代表我的世界。静态初始化太大了：

```
alias Cell[128][128][128] World; // <-- The compiler points to this line

Error: index 128 overflow for static array 
```

我尝试使用`World* world`，但上面的溢出仍然出错。所以我现在拥有的是这个丑陋的烂摊子：

```
alias Cell[][][] World;
// ...
private World world;
// ...
world.length = WORLD_XDIM;
for (uint x = 0; x < world.length; ++x)
{
    world[x].length = WORLD_YDIM;
    for (uint y = 0; y < world[x].length; ++y)
    {
        world[x][y].length = WORLD_ZDIM;
    }
} 
```

这行得通，但它让我内心有点哭泣。有没有办法将 calloc 的结果转换为 3 维数组？我已经通过切片常规数组来完成它，但是 3-D 的东西让我感到困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T20:20:13.663

如果你想声明一个锯齿状数组（即每个子数组可能有不同的长度），那么你需要像你正在做的那样使用循环，但这对于统一数组是不必要的。这是您初始化非锯齿状多维数组的方式：

```
auto arr = new Cell[][][](128, 128, 128); 
```

当您将数字放在括号之间时，您将使其成为静态数组的动态数组。所以，

```
auto arr = new Cell[128][128][128]; 
```

声明一个长度为 128 的静态数组和长度为 128 的静态数组的动态数组。我想如果你真的需要这样做（我从来没有），它会很有用，但它肯定会定期绊倒新手。

就个人而言，为了完全避免此类问题，我只是从不将数字放在括号之间，即使在声明一维数组时也是如此：

```
auto arr = new Cell[](128); 
```

我发现将数字放在第一个维度的括号之间被视为动态数组，而将数字放在任何其他级别被视为静态数组是一个糟糕的设计选择，我不知道为什么会这样它是这样的，但它就是这样。我可以理解希望能够创建静态数组的动态数组，但是禁止`new Cell[128]`或使其返回 a`Cell[128]*`而不是`Cell[]`长度为 128 的 a 会更加一致，但不幸的是，这不是它的工作原理。

# java - 如何使用 Selenium 的 java 接口从站点上传文件

> ID：10522372
> 
> 赞同：0
> 
> 时间：2012-05-09T18:55:36.493
> 
> 标签：java, selenium, webdriver, web-scraping

我是硒开发的新手，我需要“刮掉”这个页面：

```
https://annunci.ebay.it/pubblica-annuncio 
```

在此页面中，有一个使用 jquery 上传的图像。我需要在 java 中使用 selenium 做同样的事情。有人可以给我一些建议吗？谢谢！！:)

这是我尝试的：

```
WebDriver d = new FirefoxDriver();
d.get("https://annunci.ebay.it/pubblica-annuncio");
List<WebElement> elements = d.findElements(By.tagName("input"));
for(WebElement e : elements){
    System.out.println(e.getAttribute("name")); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:56:45.983

如果我正确理解您的问题，您想在那里上传文件，对吗？这应该可以解决问题：

```
d.findElement(By.id("fileField")).sendKeys("C:\\absolutePath\\toYour\\file.jpg"); 
```

这个想法是将文件的路径直接发送到您通常单击以获取模式窗口的元素 - 即`<input type='file' />`element.

因为这些文件上传输入中的大多数都有一些`onchange`事件触发器，所以您应该能够触发它们。根据[WebDriver FAQ](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_The_%22onchange%22_event_doesn%27t_fire_after_a_call)，有一个简单的解决方案，因此您不必手动触发所有这些事件：

> WebDriver 将焦点留在您称为“sendKeys”的元素上。“onchange”事件只会在焦点离开该元素时触发。因此，您需要移动焦点，可能使用“单击”另一个元素。

# .net - 如何在 XML 属性（.NET、Powershell）之间添加自定义空格

> ID：10522373
> 
> 赞同：1
> 
> 时间：2012-05-09T18:55:39.653
> 
> 标签：.net, powershell

我在 PowerShell 中，操作 xml 文档（.NET 的 System.Xml.XmlDocument 类）。我想在 xml 属性之间添加自定义空格。我在 .NET 中找不到它的 API 调用，而且似乎没有人在线尝试这样做。这是我正在尝试做的一个简化示例，但有一条我不知道该怎么称呼的评论：

```
$xmlDoc = [xml]@"
<root>
    <test Id="1" a="a" b="b" />
    <test Id="2" a="a" b="b" />
</root>
"@
$elements = @($xmlDoc.SelectNodes('//*'))
foreach($element in $elements)
{
    $attributes = $element.Attributes
    foreach($attribute in $attributes)
    {
        #
        # How do I access the whitespace around the attributes?
        #
    }
}

# Output to screen exactly what will be saved to disk
$tempFile = [System.IO.FileInfo]([System.IO.Path]::GetTempFileName())
$xmlDoc.save($tempFile)
foreach($line in (Get-Content $tempFile))
    { Write-Host $line }
Remove-Item $tempFile 
```

有谁知道如何访问 System.Xml.XmlAttribute 周围的空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:46:44.883

不幸的是，没有办法使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)（和相关）或[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)（和相关）来做到这一点。[即使是像XmlTextWriter](http://msdn.microsoft.com/en-us/library/w703ce6s.aspx)这样低级的东西也不允许您在属性之间添加额外的空格或新行。

每个 XmlNode/XObject 都可序列化，因此您可以编写自己的特殊格式序列化或在标准序列化过程之后对生成的 XML 进行后处理。希望这可以帮助

# nhibernate - 使用 NHibernate tag to load global settings dictionary

> ID：10522375
> 
> 赞同：2
> 
> 时间：2012-05-09T18:55:45.410
> 
> 标签：nhibernate, nhibernate-mapping

我正在尝试创建一个应用程序范围的设置表：

```
Settings

Name     | Value
--------------------------
Config1  | "A text string"
Config2  | "true"
Config3  | "100" 
```

名称和值都是 varchar 类型。我试图在 Settings 类中以某种方式将其映射到 Dictionary 对象：

```
public class ApplicationSettings 
{
    protected virtual void IDictionary Settings { get; set; }

    public string Config1 {
        get { return Settings["Config1"]; }
        set { Settings["Config1"] = value; }
    }
    // etc
} 
```

注意：[这个先前的问题](https://stackoverflow.com/questions/7146577/fluent-nhibernate-map-complete-table-to-one-object)是我能找到的最接近我正在尝试做的事情，但它没有显示使用的 NHibernate 映射。

我知道 NHibernate 有一个 <map/> 标签，因此我可以将这样的字典附加到另一个映射对象（例如映射到 User 类的 UserSettings 字典）。但就我而言，这些是全局设置，因此没有要附加的父对象。

谁能解释这种情况下的映射是什么样的，或者如果不能使用 <map/> 标记，可以通过其他方式（条件查询、命名 SQL 查询）从这种类型的表中加载和保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:01:09.450

```
public class Setting
{
    public virtual For Id { get; set; }
    public string Value { get; set; }
}

public enum For
{
    Config1,
    Config2,
}

// initialize once
void LoadSettings(ISession session)
{
    Application.Settings = session.Query<Setting>().AsEnumerable().ToDictionary(s => s.Id, s => s.Value);
}

// get on demand with caching
var config1 = session.Get<Setting>(For.Config1).Value; 
```

# c - 使用无符号 8 位整数的 Bignum 除法。C

> ID：10522379
> 
> 赞同：0
> 
> 时间：2012-05-09T18:55:57.047
> 
> 标签：c, algorithm, bignum

我创建了一个算法，用于将一个最大为 255 字节的整数除以一个 8 位整数，它适用于我所做的测试。有没有人对此有任何意见或任何改进建议？为此目的是否有更好的算法？我不想要 bignum by bignum 除法算法，第二个整数是 8 位整数。

迄今为止最好的解决方案（小端）：

```
typedef struct{
    u_int8_t * data;
    u_int8_t length;
}CBBigInt;
void CBBigIntEqualsDivisionByUInt8(CBBigInt * a,u_int8_t b,u_int8_t * ans){
    // base-256 long division.
    u_int16_t temp = 0;
    for (u_int8_t x = a->length-1;; x--) {
        temp <<= 8;
        temp |= a->data[x];
        ans[x] = temp / b;
        temp -= ans[x] * b;
        if (!x)
            break;
    }
    a->length -= ans[a->length-1]? 0 : 1; // If last byte is zero, adjust length.
    memmove(a->data, ans, a->length); // Done calculation. Move ans to "a".
} 
```

大端的旧解决方案：

它的工作原理是：

1.  如果除数是 2 的幂，则向右移动一位。
2.  否则，请计算除数需要向左移动多少才能大于被除数，并使 16 位整数成为除数，就好像它向左移动一样。这将用于减法。
3.  设置与答案上的移位量相对应的位。所做的是找到了除数可以放入除数中的数量，最高为 2 的幂。
4.  从被除数中取出移位的字节以创建余数。
5.  对余数从步骤 2 重复，直到除数大于余数。当这种情况发生时，答案就找到了。

* * *

```
typedef struct{
    u_int8_t * data;
    u_int8_t length;
}CBBigInt;
u_int8_t CBPowerOf2Log2(u_int8_t a){
    switch (a) {
        case 1:
            return 0;
        case 2:
            return 1;
        case 4:
            return 2;
        case 8:
            return 3;
        case 16:
            return 4;
        case 32:
            return 5;
        case 64:
            return 6;
    }
    return 7;
}
u_int8_t CBFloorLog2(u_int8_t a){
    if (a < 16){
        if (a < 4) {
            if (a == 1){
                return 0;
            }
            return 1;
        }
        if (a < 8){
            return 2;
        }
        return 3;
    }
    if (a < 64){
        if (a < 32) {
            return 4;
        }
        return 5;
    }
    if (a < 128){
        return 6;
    }
    return 7;
}
void CBBigIntEqualsRightShiftByUInt8(CBBigInt * a,u_int8_t b){
    u_int8_t deadBytes = b / 8; // These bytes fall off the side.
    a->length -= deadBytes; // Reduce length of bignum by the removed bytes
    u_int8_t remainderShift = b % 8;
    if (!remainderShift) { // No more work
        return;
    }
    u_int16_t splitter;
    u_int8_t toRight = 0; // Bits taken from the left to the next byte.
    for (u_int8_t x = 0; x < a->length; x++) {
        splitter = a->data[x] << 8 - remainderShift; // Splits data in splitters between first and second byte.
        a->data[x] = splitter >> 8; // First byte in splitter is the new data.
        a->data[x] |= toRight; // Take the bits from the left
        toRight = splitter; // Second byte is the data going to the right from this byte.
    }
}
void CBBigIntEqualsDivisionByUInt8(CBBigInt * a,u_int8_t b,u_int8_t * ans){
    if (!(b & (b - 1))){
        // For powers of two, division can be done through bit shifts.
        CBBigIntEqualsRightShiftByUInt8(a,CBPowerOf2Log2(b));
        return;
    }
    // Determine how many times b will fit into a as a power of two and repeat for the remainders
    u_int8_t begin = 0; // Begining of CBBigInt in calculations
    bool continuing = true;
    u_int8_t leftMost;
    bool first = true;
    while (continuing){
        // How much does b have to be shifted by before it becomes larger than a? Complete the shift into a shiftedByte
        int16_t shiftAmount;
        u_int16_t shiftedByte;
        if (a->data[begin] > b){
            shiftAmount = CBFloorLog2(a->data[begin]/b);
            shiftedByte = b << 8 + shiftAmount;
        }else if (a->data[begin] < b){
            shiftAmount = -CBFloorLog2(b/a->data[begin]);
            shiftedByte = b << 8 + shiftAmount;
            // Shift right once again if "shiftedByte > (a->data[begin] << 8) + a->data[begin+1]" as the shifted divisor should be smaller
            if (shiftedByte > ((a->data[begin] << 8) + a->data[begin+1])){
                shiftedByte >>= 1;
                shiftAmount--; // Do not forget about changing "shiftAmount" for calculations
            }
        }else{
            shiftAmount = 0;
            shiftedByte = b << 8;
        }
        // Set bit on "ans"
        if (shiftAmount < 0){ // If "shiftAmount" is negative then the byte moves right.
            ans[begin+1] |= 1 << (8 + shiftAmount);
            if (first) leftMost = 1;
        }else{
            ans[begin] |= 1 << shiftAmount; // No movement to right byte, jsut shift bit into place.
            if (first) leftMost = 0;
        }
        first = false; // Do not set "leftMost" from here on
        // Take away the shifted byte to give the remainder
        u_int16_t sub = (a->data[begin] << 8) + a->data[begin+1] - shiftedByte;
        a->data[begin] = sub >> 8;
        if (begin != a->length - 1) 
            a->data[begin + 1] = sub; // Move second byte into next data byte if exists.
        // Move along "begin" to byte with more data
        for (u_int8_t x = begin;; x++){
            if (a->data[x]){
                if (x == a->length - 1)
                    // Last byte
                    if (a->data[x] < b){
                        // b can fit no more
                        continuing = false;
                        break;
                    }
                begin = x;
                break;
            }
            if (x == a->length - 1){
                continuing = false; // No more data
                break;
            }
        }
    }
    a->length -= leftMost; // If the first bit was onto the 2nd byte then the length is less one
    memmove(a->data, ans + leftMost, a->length); // Done calculation. Move ans to "a".
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:22:35.730

我将其描述为“base 2 long division”。一个更好的选择是“base 256 long division”。

这是一个（未经测试且可能有问题）的示例：

```
typedef struct{
    u_int8_t * data;
    u_int8_t length;
} CBBigInt;

u_int8_t CBBigIntEqualsDivisionByUInt8(CBBigInt * a, u_int8_t b, u_int8_t * ans) {
    int i;
    unsigned int temp = 0;

    i = a.length;
    while(i > 0) {
       i--;
       temp <<= 8;
       temp |= a.data[i];
       ans.data[i] = temp / b;
       temp -= ans.data[i] * b;
    }
    return temp;   // Return remainder
} 
```

# facebook - Facebook 连接无法在 chrome 中运行

> ID：10522380
> 
> 赞同：1
> 
> 时间：2012-05-09T18:55:57.590
> 
> 标签：facebook

在我使用 Facebook 连接登录后，我需要将用户重定向到特定的 URL。下面的代码在 firebox 中有效。但在 chrome 中无效。请帮助我

```
 <script type="text/JavaScript">
          FB.init({
              appId: '366168323431073', cookie: true,
              status: true, xfbml: true
          });
          FB.Event.subscribe('auth.login', function () {
              window.top.location = "http://www.domain.com";
          });
      </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:04:17.470

更改应用中的重定向 uri

或者

```
<?php

// Requires Facebook PHP SDK 3.0.1: https://github.com/facebook/php-sdk/
require ('facebook.php');

define('FACEBOOK_APP_ID',"YOUR-APP-ID-HERE");
define('FACEBOOK_SECRET',"YOUR-APP-API-SECRET-HERE");
define('REDIRECT_URI',"YOUR-REDIRECT-URL-HERE");
$user = null;

$facebook = new Facebook(array(
    'appId' => FACEBOOK_APP_ID,
    'secret' => FACEBOOK_SECRET,
    'cookie' => true
));

$user = $facebook->getUser(); // Get the UID of the connected user, or 0 if the Facebook user is not connected.

if($user == 0) {
    // If the user is not connected to your application, redirect the user to authentication page
    /**
     * Get a Login URL for use with redirects. By default, full page redirect is
     * assumed. If you are using the generated URL with a window.open() call in
     * JavaScript, you can pass in display=popup as part of the $params.
     * 
     * The parameters:
     * - redirect_uri: the url to go to after a successful login
     * - scope: comma separated list of requested extended perms
     */

    $login_url = $facebook->getLoginUrl($params = array('redirect_uri' => REDIRECT_URI));

    echo ("<script> top.location.href='".$login_url."'</script>");

} else {
    // if the user is already connected, then redirect them to landing page or show some content
    echo ("<script> window.location.href='".REDIRECT_URI."'</script>");
} 
```

?>

# ruby-on-rails - 如何在 Spree 的类别页面上显示所有分类单元/类别以及每个类别的所有产品？

> ID：10522383
> 
> 赞同：0
> 
> 时间：2012-05-09T18:56:00.560
> 
> 标签：ruby-on-rails, spree

看看[这个网站的顶级分类页面](http://livegoodinc.com/t/category)。

如您所见，列出了所有分类单元/类别，每个类别下都有产品。但是，此页面上最多只显示 4 个产品。要验证这些分类单元是否有更多产品，请单击左侧或面包屑下方的 3 个子类别链接之一。

我想要完成的是在一个页面上显示每个类别的所有产品。到目前为止，我已经尝试对产品和分类单元控制器和视图进行更改，没有任何区别。

我还将 per_page 参数设置为一个较大的数字，并且单步执行代码我看到***Spree::Search::Base*****类上的retrieve_products**方法实际上返回了 17 条产品记录。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:32:16.990

好的，我想通了：

TaxonsHelper 模块具有 taxon_preview 方法，该方法由分类单元部分调用，而分类单元部分又由分类单元的显示视图调用。

此方法接受对每个分类单元显示多少产品的限制，默认为 4。参数名称为 max。

我会考虑以更简洁的方式设置这个值，或者确保它使用 per_page 参数，但现在我只是传递最大值 24 或其他值。*

# sql-server - 如何在不同的数据库中获取身份 ID？

> ID：10522388
> 
> 赞同：0
> 
> 时间：2012-05-09T18:56:11.620
> 
> 标签：sql-server, sql-server-2008, tsql

假设我在同一个实例下有 2 个数据库 DB1、DB2。我在每个数据库中有 2 个表，例如：

```
tab1(id1, ...): --id1 is identity column in DB1
tab2(id2,...) : --id2 is identity column in DB2 
```

我在 DB1 SP 中有以下代码：

```
use DB1
declare @id2 int;
insert into tab1(...) values (...);
insert into DB2.dbo.tab2(...) values (...);
set @id2 = SCOPE_IDENTITY(); 
```

但我无法获得 id2 的正确值，它为空。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:24:43.040

采用不同的方法，您可以尝试使用“输出”子句作为插入的一部分。

```
declare @output table (id int)

insert into DB2.dbo.tab2 (...)
output inserted.id2
into @output
values (...)

select @id2 = id from @output 
```

我很确定这是输出的语法，但我没有测试过。

# php - 如何避免两个面板中的“会话中断”

> ID：10522391
> 
> 赞同：1
> 
> 时间：2012-05-09T18:56:24.127
> 
> 标签：php

我是一名学生，我是 php 新手

我正在做我的项目

我的网站（本地主机）中有两个面板，一个是用户，另一个是管理员

在这两个面板中，我已经在所有页面上创建了会话

在用户面板上：

```
session_start();
if(!isset($_SESSION['user']))
   header("Location: index.php"); 
```

在管理面板上：

```
session_start();
if(!isset($_SESSION['username']))
{
   header("Location: login.php?e=please+login+first");
} 
```

现在我已经打开了两个面板，问题是如果我从一个面板注销，那么其他面板也会注销。

例如，如果我以用户身份在用户面板中注销，那么当我刷新管理页面时，我的管理面板会话会自动将页面重定向到 login.php

有什么办法可以避免这种情况或如何避免这种情况..请帮助我。我会很感激

```
here is my logout code

for admin side

<?php
session_start(); 
session_destroy();
header("Location: login.php?e=Logout+successfully");
?>

for user side
<?php
session_start();
session_destroy();
header("Location: index.php?l=Logout+successfully");
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:58:15.940

不销毁会话，只取消设置相应的密钥

`unset($_SESSION['user'])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:00:01.847

如果使用`session_destroy()`，它将破坏会话 cookie id。销毁变量将是使用 PHP`unset()`函数的更好方法，并且您不会丢失所有会话 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:39:52.550

您不能在同一台电脑的同一浏览器中同时使用两个面板登录。而且您也不可能一次登录一个面板..当您无法在同一浏览器中的同一台电脑上打开两个面板时，您的此问题将自动解决...

# google-maps - 谷歌地图 - 获取区域/社区的多边形边界

> ID：10522393
> 
> 赞同：11
> 
> 时间：2012-05-09T18:56:34.163
> 
> 标签：google-maps

我想在 Google Maps API v3 上进行一个简单的搜索，结果得到带有彩色多边形的地图，如下图所示：

搜索: pinheiros, 圣保罗

![在此处输入图像描述](../Images/716d93b07197d09ad7dba19381fc721c.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-11-09T15:29:04.430

我通过使用[WikiMapia](http://WikiMapia.org)数据得到它。

步骤是：

*   打开[维基地图](http://WikiMapia.org)。
*   按`F12`或`Ctrl+Shift+I`。

[![在此处输入图像描述](../Images/6848062d1a4730bdf0af96c76470a6b6.png)](https://i.stack.imgur.com/ki3er.jpg)

*   搜索您想要的位置。
*   在邻域上单击右键并选择`Edit Poly`。 [![在此处输入图像描述](../Images/1214f4a2428102405fb5b79f5a699fa8.png)](https://i.stack.imgur.com/ep7Be.png)
*   在开发者工具中点击`Network`并过滤`getPolygon`。 [![在此处输入图像描述](../Images/c0a9373621057dd8eb06d883734d18e1.png)](https://i.stack.imgur.com/VpOMm.png)
*   复制如下所示的服务器响应： [![在此处输入图像描述](../Images/a9479622624508c2ccf578bacb5093f3.png)](https://i.stack.imgur.com/KrJ5a.png)

*   并转到`Console`选项卡执行功能：`Wikimapia.Parser.Itiles.prototype.decodePolygon("Copyed text here");`

*   在此之后按回车键执行控制台将返回带有点的对象（Poly 的路径）。

我`JSON.stringify`用来转换 JSON 中的对象。

例子：

```
JSON.stringify(Wikimapia.Parser.Itiles.prototype.decodePolygon("-619402099;-109032887;02fe8953fffe5a000ae5fe379a000fedffd250000e40ffd6050007f7ffeff2001925ffd59b001f6fffdc310012dcffed10003b82ffd9b9005514ffc4520053d2ffc807000c92fff82dfffde7000e670005070012ef0009390021bf000572001358fffc3a001a57fffa210013c1ffff940036530008610022fc000284004732fff5f0001fb1fff2960013c1fff80800594efffde7002c72000f16004b5000204600416f0013b2002292")) 
```

上面的代码将返回这个 JSON（在[JsonFormatter](http://jsonformatter.curiousconcept.com)中缩进）：

```
{
   "points":[
      {
         "lat":-10.9032887,
         "lng":-61.9402099
      },
      {
         "lat":-10.9032466,
         "lng":-61.9306183
      },
      {
         "lat":-10.8915629,
         "lng":-61.9308972
      },
      {
         "lat":-10.8903934,
         "lng":-61.9313049
      },
      {
         "lat":-10.8893188,
         "lng":-61.9316697
      },
      {
         "lat":-10.8889079,
         "lng":-61.9318736
      },
      {
         "lat":-10.8878227,
         "lng":-61.9325173
      },
      {
         "lat":-10.8869061,
         "lng":-61.933322
      },
      {
         "lat":-10.8864214,
         "lng":-61.9338048
      },
      {
         "lat":-10.8854416,
         "lng":-61.9353282
      },
      {
         "lat":-10.8839139,
         "lng":-61.9375062
      },
      {
         "lat":-10.8824811,
         "lng":-61.939652
      },
      {
         "lat":-10.8822809,
         "lng":-61.9399738
      },
      {
         "lat":-10.8826496,
         "lng":-61.9399202
      },
      {
         "lat":-10.8831343,
         "lng":-61.9400489
      },
      {
         "lat":-10.8839982,
         "lng":-61.940285
      },
      {
         "lat":-10.8844934,
         "lng":-61.9404244
      },
      {
         "lat":-10.8851677,
         "lng":-61.9403279
      },
      {
         "lat":-10.8856734,
         "lng":-61.9401777
      },
      {
         "lat":-10.8870641,
         "lng":-61.940167
      },
      {
         "lat":-10.8879597,
         "lng":-61.9403815
      },
      {
         "lat":-10.8897823,
         "lng":-61.9404459
      },
      {
         "lat":-10.8905936,
         "lng":-61.9401884
      },
      {
         "lat":-10.8910993,
         "lng":-61.9398451
      },
      {
         "lat":-10.8933855,
         "lng":-61.9396412
      },
      {
         "lat":-10.8945233,
         "lng":-61.9395876
      },
      {
         "lat":-10.8964513,
         "lng":-61.9399738
      },
      {
         "lat":-10.8981264,
         "lng":-61.9408
      },
      {
         "lat":-10.8990114,
         "lng":-61.9413042
      }
   ],
   "bounds":{
      "left":-61.9413042,
      "bottom":-10.9032887,
      "right":-61.9306183,
      "top":-10.8822809,
      "centerLatLng":null
   }
} 
```

最后，我使用[regexr.com/3c5m2 之](http://regexr.com/3c5m2)类的正则表达式将 JSON 转换为 WKT。我不会只复制整个 JSON中的正则`"points"`表达式数组中的对象。在 RegExr 上，我复制替换的文本并粘贴到`POLYGON((pastehere))`.

**重要的！**应用正则表达式后，您需要在最后一点重复第一点。

> **-61.956523060798645 -10.877613428213532** ,-61.95640504360199 -10.877718788854143,-61.956791281700134 -10.878393096072424,-61.95735991001129 -10.87805594265392,-61.95682346820831 -10.877339490373695, **-61.956523060798645 -10.877613428213532**

然后你会得到这样的东西：

```
POLYGON((-61.956523060798645 -10.877613428213532,-61.95640504360199 -10.877718788854143,-61.956791281700134 -10.878393096072424,-61.95735991001129 -10.87805594265392,-61.95682346820831 -10.877339490373695,-61.956523060798645 -10.877613428213532)) 
```

可以将其插入支持 WKT 的数据库（如 MySQL）中。

WikiMapia 有一个[API](http://api.wikimapia.org)，那么所有这些过程都可以自动进行，但这对我来说很好用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T00:41:16.947

简短的回答是：不，Google Maps API 不提供该功能。

实现这一点的一种方法是找到您感兴趣的空间数据（多边形），将其加载到数据库（理想情况下支持空间查询），然后通过 AJAX 查询数据库以将要素几何添加为[KMLLayer](https://developers.google.com/maps/documentation/javascript/reference?utm_source=welovemapsdevelopers&utm_campaign=stackoverflow#KmlLayer)到地图，以及相应的图钉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:20:18.123

您可以在[funda.nl](http://www.funda.nl/)的网站上查看这项工作。当您选择单个属性时，它还会显示一个 Google 地图，其中围绕所选属性的邻域绘制了一个多边形。

# asp.net-mvc-3 - asp.net mvc 3中的冲突路由

> ID：10522395
> 
> 赞同：1
> 
> 时间：2012-05-09T18:56:36.923
> 
> 标签：asp.net-mvc-3, routes

我在 asp.net mvc 中遇到了一个恼人的路由问题。我创建了一个自定义路由处理程序来处理对我的站点的 XMLRPC 调用，我想将它路由到 /xmlrpc/pingback。

在 global.asax.cs 我有这个：

```
routes.MapRoute(
            "Default", 
            "{controller}/{action}/{id}", 
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

routes.Add(new Route("xmlrpc/pingback", null,
            new RouteValueDictionary(),
            new PingbackRouteHandler())); 
```

现在找不到 xmlrpc/pingback，因为没有名为 xmlrpc 的控制器。

如果我将顺序切换到 xmlrpc 路由，则 xmlrpc 可以工作，但所有其他 /controller/action 路由都映射到 /xmlrpc/pingback?controller=home&action=index。

如何创建一个匹配除“xmlrpc”之外的每个控制器名称的约束？还是有另一种方法可以做到这一点？

//琼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:04:03.547

您可以添加`controller = "Fake"`到 Pingback 路由的默认值以防止它匹配其他路由。

# wsdl - 从 C# 使用 WSO2 数据服务

> ID：10522397
> 
> 赞同：0
> 
> 时间：2012-05-09T18:56:53.923
> 
> 标签：wsdl, wso2, axis2, wso2dss

我无法从 C# 使用 WSO2 数据服务。我使用记录的方式创建了数据服务，然后能够通过“TryIt”功能与之交互。然后我在 Visual Studio 2010 中注册了一个服务引用。我收到的错误是：

```
The method 'update_RealtyIntroduction_operation' in type 'Realty1.ServiceReference1.RealtyIntroduction_DataServicePortType' is marked IsOneWay=true
and declares one or more FaultContractAttributes. One-way methods cannot declare FaultContractAttributes.
To fix it, change IsOneWay to false or remove the FaultContractAttributes. 
```

如果我通过删除 IsOneWay 或 FaultContractAttributes 来编辑生成的代码，那么它会正常工作，直到我更新服务引用。似乎问题出在 WSO2 生成的 WSDL 1.1 中，因为它违反了 W3C 标准。该标准定义了以下操作：

```
<wsdl:definitions .... > <wsdl:portType .... > * 
        <wsdl:operation name="nmtoken">
           <wsdl:input name="nmtoken"? message="qname"/>
        </wsdl:operation>
    </wsdl:portType >
</wsdl:definitions> 
```

[http://www.w3.org/TR/wsdl#_one-way](http://www.w3.org/TR/wsdl#_one-way)

但是 WSO2 正在生成以下内容：

```
<wsdl:operation name="update_RealtyIntroduction_operation">
      <wsdl:documentation />
      <wsdl:input wsaw:Action="urn:update_RealtyIntroduction_operation" message="ns0:update_RealtyIntroduction_operationRequest" />
      <wsdl:fault wsaw:Action="urn:update_RealtyIntroduction_operationDataServiceFault" name="DataServiceFault" message="ns0:DataServiceFault" />
</wsdl:operation> 
```

有没有人对如何使这个互操作有一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:47:35.803

是的，这似乎是仅限于操作的错误。现在，对于您进行的潜在的仅输入操作，您可以为数据服务操作设置标志“returnRequestStatus”以使其实际成为输入输出操作，然后它将简单地发送成功调用的静态成功消息，或者否则将发送 SOAP 错误。并且从这些类型的操作生成的 WSDL 将符合规范。

干杯，安佳娜。

# powershell - 具有复杂参数的 PowerShell 与 sed

> ID：10522399
> 
> 赞同：0
> 
> 时间：2012-05-09T18:57:01.897
> 
> 标签：powershell, sed

我使用 sed 尝试了以下 PowerShell 脚本：

```
[array declarations]

Foreach ($var in $double)
{
    $command = $command + " -e "
    $command = $command + "s/$var/sMOS3double\[$var\]\[index\]/"
}
$command = $command + " mos3load_fun_09052012.c > poZamianie.txt"
**echo $command**
sed $command 
```

不幸的是，它返回错误：

```
**./Renamer.ps1**

 -e 's/vds/sMOS3double\[vds\]\[index\]/' -e 's/vbs/sMOS3double\[vbs\]\[index\]/' -e 's/vgs/sMOS3double\[vgs\]\[index\]/
' -e 's/vbd/sMOS3double\[vbd\]\[index\]/' -e 's/vgd/sMOS3double\[vgd\]\[index\]/' -e 's/vt/sMOS3double\[vt\]\[index\]/'
 -e 's/EffectiveWidth/sMOS3double\[EffectiveWidth\]\[index\]/' -e 's/EffectiveLength/sMOS3double\[EffectiveLength\]\[in
dex\]/' -e 's/OxideCap/sMOS3double\[OxideCap\]\[index\]/' -e 's/Beta/sMOS3double\[Beta\]\[index\]/' -e 's/cdrain/sMOS3d
ouble\[cdrain\]\[index\]/' -e 's/vdsat/sMOS3double\[vdsat\]\[index\]/' -e 's/von/sMOS3double\[von\]\[index\]/' mos3load
_fun_09052012.c > poZamianie.txt

**sed.exe: -e expression #1, char 2: unknown command: `-'** 
```

我努力尝试，使用 ''、"" 或根本没有分隔符的配置，但没有成功。

但是，然后我从 PS 控制台复制了回显输出，并再次将其作为参数传递给控制台：

```
**sed** -e s/vds/sMOS3double\[vds\]\[index\]
/ -e s/vbs/sMOS3double\[vbs\]\[index\]/ -e s/vgs/sMOS3double\[vgs\]\[index\]/ -e s/vbd/sMOS3double\[vbd\]\[index\]/ -e s
/vgd/sMOS3double\[vgd\]\[index\]/ -e s/vt/sMOS3double\[vt\]\[index\]/ -e s/EffectiveWidth/sMOS3double\[EffectiveWidth\]\
[index\]/ -e s/EffectiveLength/sMOS3double\[EffectiveLength\]\[index\]/ -e s/OxideCap/sMOS3double\[OxideCap\]\[inde\]/ -
e s/Beta/sMOS3double\[Beta\]\[index\]/ -e s/cdrain/sMOS3double\[cdrain\]\[index\]/ -e s/vdsat/sMOS3double\[vdsat\]\[inde
x\]/ -e s/von/sMOS3double\[von\]\[index\]/ mos3load_fun_09052012.c > poZamianie.txt 
```

脚本正确执行。

任何人都可以解释这种行为吗？或者展示一种直接使用 PowerShell 执行该脚本的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:08:53.780

```
invoke-expression "sed $command" 
```

这对我来说效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:40:27.467

写这个：

```
s/vds/sMOS3double\[vds\]\[index\]/
s/vbs/sMOS3double\[vbs\]\[index\]/
s/vgs/sMOS3double\[vgs\]\[index\]/
s/vbd/sMOS3double\[vbd\]\[index\]/
s/vgd/sMOS3double\[vgd\]\[index\]/
s/vt/sMOS3double\[vt\]\[index\]/
s/EffectiveWidth/sMOS3double\[EffectiveWidth\]\[index\]/
s/EffectiveLength/sMOS3double\[EffectiveLength\]\[index\]/
s/OxideCap/sMOS3double\[OxideCap\]\[index\]/
s/Beta/sMOS3double\[Beta\]\[index\]/
s/cdrain/sMOS3double\[cdrain\]\[index\]/
s/vdsat/sMOS3double\[vdsat\]\[index\]/ 
```

到文件“meaningful-name.sed”，并调用它

```
sed -f meaningful-name.sed mos3load_fun_09052012.c > poZamianie.txt 
```

在 sed-commands 文件中，通常每行有一个命令，不需要使用 ' 或 " 进行掩码。

你甚至可以评论，afaik

```
#
# this style
# 
```

和`sed -f commandfile.sed`你一起调用它。

# .htaccess - 将请求从一个目录重写/重定向到另一个

> ID：10522403
> 
> 赞同：1
> 
> 时间：2012-05-09T18:57:10.477
> 
> 标签：.htaccess

我刚刚继承了一组代码，这些代码被设置为驻留在不幸名为“tract”的网站根文件夹中。

该文件夹中的许多文件都包含对路径 mywebsite.com/tract 的引用。

我想将文件夹重命名为“login”——但我不想遍历数英里的代码并将对“tract”的每个引用更改为“login”——如果我能提供帮助的话。

我想知道是否有办法使用 .htaccess，让我能够链接到 mywebsite.com/login（例如 mywebsite.com/login/register.php），并让该地址出现在浏览器，但要“实际上”指向 mywebsite.com/tract（例如，mywebsite.com/tract/register.php）。

这可能吗？

我在共享服务器上，我只能访问 .htaccess，不能访问其他配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:00:36.467

您可以使用 URL 重写和类似的东西。必须激活 Apache 重写模块 (mod_rewrite)

`RewriteRule ^mywebsite.com/tract(/[a-zA-Z0-9]+)?/?$ mywebsite.com/login`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:32:33.870

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^login(/.*|)$ tract$1 [L,NC] 
```

# java - NoClassDefFoundError: com.urbanairship.AirshipConfigOptions（Android 推送开发）

> ID：10522409
> 
> 赞同：1
> 
> 时间：2012-05-09T18:57:31.720
> 
> 标签：java, android, build, push, urbanairship.com

我正在尝试运行一个[示例项目，用于使用 Urban Airship 进行 Android 推送通知](https://docs.urbanairship.com/display/DOCS/Getting+Started:+Android:+C2DM+Push)。我的程序似乎找不到这个`AirshipConfigOptions`类。该项目构建良好，仅在运行时引发此错误。

这是我的项目结构的样子：

![在此处输入图像描述](../Images/cbc1582520c724a1ed2d85a20a20e675.png)

这是我得到的错误：

> 05-09 18:50:10.926: I/dalvikvm(2007): 找不到方法 com.urbanairship.AirshipConfigOptions.loadDefaultOptions，引用自方法 com.urbanairship.push.sample.MyApplication.onCreate 05-09 18:50:10.946 : I/dalvikvm(2007): threadid=3: 对信号 3 做出反应 05-09 18:50:11.016: W/dalvikvm(2007): VFY: 无法解析静态方法 46: Lcom/urbanairship/AirshipConfigOptions;.loadDefaultOptions ( Landroid/content/Context;)Lcom/urbanairship/AirshipConfigOptions; 05-09 18:50:11.016: D/dalvikvm(2007): VFY: 在 0x0003 替换操作码 0x71 05-09 18:50:11.115: D/dalvikvm(2007): DexOpt: 无法在 0x0f 选择直接调用 0x004a Lcom/urbanairship/push/sample/MyApplication;.onCreate 05-09 18:50:11.115: D/AndroidRuntime(2007): 关闭 VM 05-09 18:50:11.115: W/dalvikvm(2007): threadid=1 ：**java.lang.NoClassDefFoundError：com.urbanairship.AirshipConfigOptions** 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 com.urbanairship.push.sample.MyApplication.onCreate(MyApplication.java:46) 05-09 18:50:11.125: E/AndroidRuntime(2007) : 在 android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969) 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:3954) 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 android.app.ActivityThread.access$1300(ActivityThread.java:123) 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 android.app。 ActivityThread$H.handleMessage(ActivityThread.java:1185) 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-09 18:50: 11.125: E/AndroidRuntime(2007): 在 android.os.Looper.loop(Looper.java:137) 05-09 18:50:11.125:E/AndroidRuntime(2007): 在 android.app.ActivityThread.main(ActivityThread.java:4424) 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 java.lang.reflect.Method.invokeNative(Native方法) 05-09 18:50:11.125: E/AndroidRuntime(2007): at java.lang.reflect.Method.invoke(Method.java:511) 05-09 18:50:11.125: E/AndroidRuntime(2007) : 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 05-09 18:50:11.125: E/AndroidRuntime(2007): 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:551) 05-09 18:50:11.125: E/AndroidRuntime(2007): at dalvik.system.NativeStart.main(Native Method) 05-09 18:50:11.215: E/dalvikvm(2007) ：无法打开堆栈跟踪文件'/data/anr/traces.txt'：是目录05-09 18:50:11.486：I/dalvikvm（2007）：threadid = 3：对信号3 05-09 18做出反应： 50：11.526：I/dalvikvm(2007)：将堆栈跟踪写入“/data/anr/traces.txt”05-09 18:50:11.795：I/dalvikvm(2007)：threadid=3：对信号 3 做出反应 05-09 18： 50：11.815：I/dalvikvm（2007）：将堆栈跟踪写入“/data/anr/traces.txt”

另外，我已经知道我需要将 JAR 放在“libs”文件夹中，而不是“lib”文件夹中，如此[处](http://www.wiseappsllc.com/homepage/android-dev-tips)所述。

* * *

更新1：

我的**AndroidManifest.xml**中有以下活动：

```
 <activity android:name="com.urbanairship.push.sample.MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.urbanairship.push.sample.PushPreferencesActivity" />
    <activity android:name="com.urbanairship.push.sample.LocationActivity" /> 
```

这是我的 Java 构建路径的屏幕截图： ![在此处输入图像描述](../Images/5502560bae3f663c898ab8e07b3121b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:05:10.863

您确定在您的 android 清单文件中声明了所有内容吗？您不能只是将库和活动添加到 src 然后运行这些东西，您还必须将每个新活动添加到清单中。

从堆栈跟踪的外观来看，您似乎缺少飞艇的活动。

您还应该检查您的构建属性，并额外确保您的飞艇 jar 在构建顺序中。

# ruby-on-rails - 在 Ruby 中拆分多行的长字符串而不去除换行符

> ID：10522414
> 
> 赞同：265
> 
> 时间：2012-05-09T18:58:10.037
> 
> 标签：ruby-on-rails, ruby

我们最近决定在我的工作中编写一份 ruby​​ 风格指南。其中一项法令是任何行不得超过 80 个字符。由于这是一个 Rails 项目，我们经常有一些较长的字符串——例如“**用户 X 想给你发送一条关于事物 Y 的消息**”，它并不总是符合 80 个字符的样式限制。

我知道有三种方法可以使长字符串跨越多行：

*   赫雷多克
*   %Q{}
*   实际的字符串连接。

然而，所有这些情况最终都会花费更多的计算周期，这似乎很愚蠢。字符串连接很明显，但是`HEREDOC`我`%Q`必须通过类似`.gsub(/\n$/, '')`.

有没有一种纯粹的语法方式来做到这一点，这相当于将整个字符串放在一行上？显然，目标是不要仅仅因为我希望我的代码更具可读性而花费任何额外的周期。（是的，我意识到你必须做出很多权衡......但是对于字符串长度，这似乎很愚蠢。）

更新：反斜杠不是我想要的，因为你失去了缩进，这真的影响了风格/可读性。

例子：

```
if foo
  string = "this is a \  
string that spans lines"  
end 
```

我觉得上面的内容有点难以阅读。

> **编辑**：我在下面添加了一个答案；三年后，我们现在有了波浪形的heredoc。

* * *

## 回答 #1

> 赞同：503
> 
> 时间：2012-05-09T21:10:20.643

也许这就是你要找的东西？

```
string = "line #1"\
         "line #2"\
         "line #3"

p string # => "line #1line #2line #3" 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-05-09T19:01:53.190

您可以使用`\`表示任何 Ruby 行在下一行继续。这也适用于字符串：

```
string = "this is a \
string that spans lines"

puts string.inspect 
```

将输出`"this is a string that spans lines"`

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2016-10-03T08:57:09.337

三年后，现在在 Ruby 2.3 中有一个解决方案：波浪形的heredoc。

```
class Subscription
  def warning_message
    <<~HEREDOC
      Subscription expiring soon!
      Your free trial will expire in #{days_until_expiration} days.
      Please update your billing information.
    HEREDOC
  end
end 
```

博文链接：[https ://infinum.co/the-capsized-eight/articles/multiline-strings-ruby-2-3-0-the-squiggly-heredoc](https://infinum.co/the-capsized-eight/articles/multiline-strings-ruby-2-3-0-the-squiggly-heredoc)

> 缩进最小的行的缩进将从内容的每一行中删除。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-07-07T10:31:51.053

当我尝试写一个很长的网址时，我遇到了这个问题，下面的作品。

```
image_url = %w(
    http://minio.127.0.0.1.xip.io:9000/
    bucket29/docs/b7cfab0e-0119-452c-b262-1b78e3fccf38/
    28ed3774-b234-4de2-9a11-7d657707f79c?
    X-Amz-Algorithm=AWS4-HMAC-SHA256&
    X-Amz-Credential=ABABABABABABABABA
    %2Fus-east-1%2Fs3%2Faws4_request&
    X-Amz-Date=20170702T000940Z&
    X-Amz-Expires=3600&X-Amz-SignedHeaders=host&
    X-Amz-Signature=ABABABABABABABABABABAB
    ABABABABABABABABABABABABABABABABABABA
).join 
```

注意，形成 url 字符串时不能有任何换行符、空格。如果您想要换行符，请使用 HEREDOC。

在这里，您可以缩进以提高可读性、易于修改，并且每行都没有繁琐的引号和反斜杠。加入字符串的成本应该可以忽略不计。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2017-08-18T12:48:10.580

我修改了 Zack 的答案，因为我**想要空格和插值而不是换行符**并使用：

```
%W[
  It's a nice day "#{name}"
  for a walk!
].join(' ') 
```

这在哪里`name = 'fred'`产生`It's a nice day "fred" for a walk!`

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2021-05-21T19:28:32.720

到目前为止，这是一个非常古老的问题，但由于问题似乎仍然出现，这里有一个更新的答案。由于原始海报表明这是针对 Rails 项目的，因此您可以查看 Rails 的 String inflections 寻求帮助。

```
my_long_string = <<-STRING
 hello
    there
 multiline
      multiindented string
STRING

=> " hello\n    there\n multiline\n      multiindented string\n" 
```

输入`squish`方法。

```
my_long_string = <<-STRING.squish
 so
    long
 multiline
      multiindented string
STRING

=> "so long multiline multiindented string" 
```

根据文档 -

`squish()` 返回字符串，首先删除字符串两端的所有空格，然后将剩余的连续空格组更改为每个空格。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-24T07:12:15.653

Rails 中的 Squish 可以满足您的需求。

[https://apidock.com/rails/String/squish](https://apidock.com/rails/String/squish)

结束它看起来像这样：

```
%{ Multi-line
   string }.squish 
```

因为你在 Ruby 中需要它，所以看看 Rails 代码：

```
%{ Multi-line
   string }
  .gsub!(/[[:space:]]+/, " ")
  .strip! 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-19T23:48:02.580

您可以连接多个拆分为多行的字符串：

```
if foo
  string = "this is a" + 
           "string that spans lines"  
end 
```

# mysql - NDBCluster LOAD DATA Infile 性能

> ID：10522416
> 
> 赞同：0
> 
> 时间：2012-05-09T18:58:12.307
> 
> 标签：mysql

我正在尝试将一些数据加载到 MySQL 集群中。该集群共有 5 个 VM，每个 VM 有 8 GB RAM，都运行 CentOS 和 MySQL Cluster 7.2.5。所有 5 个虚拟机都在同一个物理刀片上，因此它们之间的网络瓶颈应该是最小的。这是我的[config.ini](http://pastebin.com/JhrjdXKH)和另一个[my.cnf](http://pastebin.com/9y1mY7zm)的 pastebin 。我仅限于两个链接，因此我无法粘贴表架构，但基本上它主要包含 int 列和几个文本列。主键是一个 bigint 和一个 int 上的复合键。

我正在加载的数据文件总共为 129MB，而我的速度大约为 150 行/秒，这简直太糟糕了。我将不得不在更大的范围内执行此操作，并且以这种速度加载可能需要几天时间。我应该调整任何参数以显着加快速度吗？我发现了类似的线程来调整 myisam 和 innodb 批量加载的参数，但没有看到任何关于 NDB 表的信息。

这是加载数据文件中的命令：

```
LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test
FIELDS TERMINATED BY '|' ESCAPED BY '\\' LINES TERMINATED BY '\n'; 
```

当我运行相同的命令但将表的引擎更改为 innodb 时，它每秒加载 20,000 行而不是每秒 150 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:10:16.930

是的，MySQL Cluster 是一种不同的野兽，它将您的所有数据分区到多个节点上。

您可以先加载到 Innodb，请参阅：http: [//johanandersson.blogspot.co.nz/2012/04/mysql-cluster-how-to-load-it-with-data.html](http://johanandersson.blogspot.co.nz/2012/04/mysql-cluster-how-to-load-it-with-data.html)

简而言之：

增加ndb批量大小（如果你知道你在做什么，我没试过）并使用多个连接

```
SET ndb_batch_size=8*1024*1024; 
```

每张桌子上

```
ALTER TABLE tablename ENGINE=ndbcluster; 
```

最后

```
ANALYZE TABLE tablename; 
```

# java - javascript 在从 servlet 重定向的 jsp 页面上不起作用

> ID：10522420
> 
> 赞同：3
> 
> 时间：2012-05-09T18:58:18.930
> 
> 标签：java, javascript, jquery, jsp, servlets

我有一个 servlet，它使用 requestdispatcher() 转发到我的一个 jsp 页面

```
request.getRequestDispatcher("/WEB-INF/view/mypage.jsp").forward(
                    request, response); 
```

目标***mypage.jsp***有一些 jquery 的优点，需要做一些显示/隐藏的东西，但由于某种原因，当 jsp 从 servlet 转发后显示时 jquery 没有被触发，但是当我直接访问页面时它工作通过地址栏（我将页面放在web-inf之外直接访问）。

即使是简单`<body onload="alert('Testing')">`的也行不通。我还在我的 jsp 中使用***HTML5 和 jquerymobile***。

任何填补我知识空白的回复都会很棒。谢谢

以下是我的jsp页面：

```
<!DOCTYPE html>
<html>
<head>
<title>My App</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body onload="alert('Even this is not popping up')">
-- Stuff--
</body>
</html>
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body onload="alert('Even this is not popping up')">
-- Stuff--
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:42:35.823

问题可能出在您访问 mypage.jsp 的方式上。由于它位于 /WEB-INF 文件夹中，因此不能从浏览器直接访问。如果页面仍在 /WEB-INF 文件夹中，我认为您不能通过地址栏直接访问该页面。

如果您从 /WEB-INF 外部访问它并且它可以工作，但是在您的 servlet 将请求转发给它之后，它不会，最可能的原因是您的 JSP 页面在发送到浏览器和服务器后尝试加载某些内容拒绝提供它 - 也许该资源也在 /WEB/INF 中。您可能还会发现[此](https://stackoverflow.com/questions/10437565/how-can-i-have-access-to-my-files-that-placed-in-web-inf-folder)链接很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:17:52.463

我想你在直接和间接访问时访问页面并查看源代码你会发现问题。使用文件差异工具比较两个输出。很可能您没有在其中一个版本中包含一些 JavaScript，或者当您间接访问时 jquery.js 库的相对路径不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:36:21.063

RequestDispatcher 是一个重定向，其工作方式类似于 include 的工作方式，因此您的页面可能正在被提供，但静态文件将无法访问，因为它们是由前端请求的。

将您的 js 文件也从 WEB-INF、css 和图像中移出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T19:55:39.947

显然是因为 jquerymobile 的 ajax 导航模型

[http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T18:13:10.963

像这样使用

```
window.alert("This is alert");

window.document.location.href="mypage.html"; 
```

当您单击确定按钮时出现警报时，您将被重定向到所需的页面。

# java - (Java) 初始化后打印井字游戏

> ID：10522430
> 
> 赞同：0
> 
> 时间：2012-05-09T18:59:16.483
> 
> 标签：java

我正在创建一个简单的井字游戏。我已经声明了我的 3 x 3 板并将每个游戏区域初始化为`' '`一个空格字符。

但是，当我尝试打印电路板时，我会得到如下所示的内容：

```
 1   2   3
A    |   |    
   ----------
B    |   |   
   ----------
C    |   | 
```

没有任何东西被打印出来。

这是我的井字游戏.java：

```
import java.util.Scanner;

public class TicTacToe{

    public static void main(String[] args) {
           new TicTacToe();
    }
    private char[][] board;
    private char player;

    public TicTacToe() {
    for(int i = 0; i < 3; i++)
    {
        for(int j = 0; j <3; j++)
         {
           board[i][j] = ' ';
         }
    }
     player = 'X';

    System.out.println(" 1 2 3");
    System.out.println("A" + board[0][0] + "|" + board[0][1] + "|" + board[0][2]);  
    System.out.println("-----");
    System.out.println("B" + board[1][0] + "|" + board[1][1] + "|" + board[1][2]);  
    System.out.println("-----");
    System.out.println("C" + board[2][0] + "|" + board[2][1] + "|" + board[2][2]);                        
    } 
```

我从 Murach 的第 4 版中读到，当类被执行时，构造函数也会被执行，所以我假设打印函数将被执行。

问题：

**如何将上面的井字游戏板打印到我的控制台上？**

编辑：感谢您的帮助。结果我不得不调用构造函数而不是自动执行它。上面的代码不包含解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:01:25.790

当一个类被执行时，它的`main`方法被执行。你的`main`方法是空的，所以什么都没有发生。如果你想调用构造函数，你必须明确地这样做。

```
public static void main (String[] args) {
    new TicTacToe();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:00:57.070

什么都没有打印，因为您没有在`main()`. `main()`在发生任何事情之前，您必须在其中使用您的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:03:16.750

您的主要方法中实际上没有任何内容

```
import java.util.Scanner;

public class TicTacToe{

public static void main(String[] args) {
    // insert code to set up your tictactoe object  here
    TicTacToe ttt = new TicTacToe();
}
private char[][] board;
private char player; // 'X' or 'O'

public TicTacToe() {
for(int i = 0; i < 3; i++)
{
    for(int j = 0; j <3; j++)
     {
       board[i][j] = ' ';
     }
}
 player = 'X';

System.out.println(" 1 2 3");
System.out.println("A" + board[0][0] + "|" + board[0][1] + "|" + board[0][2]);  
System.out.println("-----");
System.out.println("B" + board[1][0] + "|" + board[1][1] + "|" + board[1][2]);  
System.out.println("-----");
System.out.println("C" + board[2][0] + "|" + board[2][1] + "|" + board[2][2]);                        
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T19:04:53.217

我对代码进行了一些更改

```
public class TicTacToe {

    public static void main(String[] args) {
        new TicTacToe();
    }

    private char[][] board = new char[3][3];
    private char player;

    public TicTacToe() {
        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                board[i][j] = ' ';
            }
        }
        player = 'X';

        System.out.println(" 1 2 3");
        System.out.println("A" + board[0][0] + "|" + board[0][1] + "|"
                + board[0][2]);
        System.out.println("-----");
        System.out.println("B" + board[1][0] + "|" + board[1][1] + "|"
                + board[1][2]);
        System.out.println("-----");
        System.out.println("C" + board[2][0] + "|" + board[2][1] + "|"
                + board[2][2]);
    }
} 
```

希望这会帮助你。

# python - Python：在类实例初始化之前修改传递的参数

> ID：10522431
> 
> 赞同：4
> 
> 时间：2012-05-09T18:59:23.173
> 
> 标签：python, oop, multiple-inheritance, metaclass

我正在尝试用 Python 实现简化的术语重写系统 (TRS)/符号代数系统的方法。为此，我真的希望能够在类实例实例化过程中在特定情况下拦截和修改操作数。我想出的解决方案是创建一个修改类对象（类型为“类型”）的典型**调用行为的元类。**

```
class Preprocess(type):
    """
    Operation argument preprocessing Metaclass.
    Classes using this Metaclass must implement the 
        _preprocess_(*operands, **kwargs)
    classmethod.
    """

    def __call__(cls, *operands, **kwargs):
        pops, pargs = cls._preprocess_(*operands, **kwargs)
        return super(Preprocess, cls).__call__(*pops, **pargs) 
```

一个例子是扩展嵌套操作 F(F(a,b),c)-->F(a,b,c)

```
class Flat(object):
    """
    Use for associative Operations to expand nested 
    expressions of same Head: F(F(x,y),z) => F(x,y,z)
    """
    __metaclass__ = Preprocess
    @classmethod
    def _preprocess_(cls, *operands, **kwargs):
        head = []
        for o in operands:
            if isinstance(o, cls):
                head += list(o.operands)
            else:
                head.append(o)
        return tuple(head), kwargs 
```

所以，现在这种行为可以通过继承来实现：

```
class Operation(object):
    def __init__(self, *operands):
        self.operands = operands

class F(Flat, Operation):
    pass 
```

这会导致所需的行为：

```
print F(F(1,2,3),4,5).operands
(1,2,3,4,5) 
```

但是，我想组合几个这样的预处理类，让它们按照自然类 mro 顺序处理操作数。

```
class Orderless(object):
    """
    Use for commutative Operations to bring into ordered, equivalent 
    form: F(*operands) => F(*sorted(operands))
    """
    __metaclass__ = Preprocess

    @classmethod
    def _preprocess_(cls, *operands, **kwargs):

        return sorted(operands), kwargs 
```

这似乎没有按预期工作。定义扁平无序操作类型

```
class G(Flat, Orderless, Expression):
    pass 
```

仅导致第一个 Preprocessing 超类处于“活动状态”。

```
print G(G(3,2,1),-1,-3).operands
(3,2,1,-1,-3) 
```

如何确保在类实例化之前调用所有 Preprocessing 类的*预处理*方法？

更新：

由于我是新的 stackoverflow 用户，我似乎还不能正式回答我的问题。所以，我相信这可能是我能想到的最好的解决方案：

```
class Preprocess(type):
    """
    Abstract operation argument preprocessing class.
    Subclasses must implement the 
        _preprocess_(*operands, **kwargs)
    classmethod.
    """

    def __call__(cls, *operands, **kwargs):
        for cc in cls.__mro__:
            if hasattr(cc, "_preprocess_"):
                operands, kwargs = cc._preprocess_(*operands, **kwargs)

        return super(Preprocess, cls).__call__(*operands, **kwargs) 
```

我想问题是它`super(Preprocess, cls).__call__(*operands, **kwargs)`没有像预期的那样遍历 cls 的 mro。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:00:30.800

我认为您的做法是错误的；删除元类，改用类和方法装饰器。

例如，将您的公寓定义为：

```
@init_args_preprocessor
def flat(operands, kwargs): # No need for asterisks
    head = []
    for o in operands:
        if isinstance(o, cls):
            head += list(o.operands)
        else:
            head.append(o)
    return tuple(head), kwargs 
```

使用 init_args_preprocessor 装饰器将该函数转换为类装饰器：

```
def init_args_preprocessor(preprocessor):
    def class_decorator(cls):
        orig_init = cls.__init__
        def new_init(self, *args, **kwargs):
            args, kwargs = preprocessor(args, kwargs)
            orig_init(self, *args, **kwargs)
        cls.__init__ = new_init
        return cls
   return class_decorator 
```

现在，代替 mixins 使用装饰器：

```
class Operation(object):
    def __init__(self, *operands):
        self.operands = operands

@flat
class F(Operation):
    pass 
```

你应该没有问题干净地组合类修饰符：

```
@init_args_preprocessor
def orderless(args, kwargs):
    return sorted(args), kwargs

@orderless
@flat
class G(Expression):
   pass 
```

警告 Emptor：上面的所有代码都未经严格测试。

# asp.net-mvc - 有什么好的 ASP.NET MVC 详细错误页面示例

> ID：10522434
> 
> 赞同：1
> 
> 时间：2012-05-09T18:59:30.710
> 
> 标签：asp.net-mvc, model-view-controller, error-handling

我查看了一堆其他问题，寻找详细错误页面布局的绝佳示例，但没有找到任何东西。我相信很多人以前都做过这个。

要求 * 必须显示异常信息（类型、堆栈跟踪） * 应尽可能显示表单值 * 应显示导致问题的区域/控制器/操作

我想出的最好的是：

```
@model System.Web.Mvc.HandleErrorInfo
@{ViewBag.Title = "Error";}

<h2>Sorry, an error occurred while processing your request.</h2>
<p>Please copy and paste this entire page in an email to 
<a href="mailto:me@me.com?subject=Website%20Error">Me</a> 
along with any other information you can provide so we can
get this fixed ASAP!</p>
@if (Model != null) {
    <h1>@Model.Exception.GetType().Name<br />
        thrown in @Model.ControllerName @Model.ActionName</h1>

    <h2>Details</h2>
    <div>
        @Model.Exception.ToString()
    </div>
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:01:58.523

为什么要求他们通过电子邮件向您发送错误，包括我自己在内的许多人永远不会向您发送电子邮件。使用诸如 ELMAH 之类的东西会自动通过电子邮件向您发送未处理的异常并显示友好的错误页面。

[http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)

如果您想在发生错误时从用户那里获得反馈，您可以有一个文本框并要求他们向您提供有关他们在进入错误页面时所做的事情的信息，这似乎运作良好，它表明您正在积极尝试解决解决方案。请务必说一些话，让他们知道您已收到通知，但您正在寻找其他信息以防止该错误在未来再次发生

# xcode - 将股票报价下载到应用程序

> ID：10522440
> 
> 赞同：1
> 
> 时间：2012-05-09T19:00:03.497
> 
> 标签：xcode, ipad, yahoo-finance, stockquotes, google-finance

我是 iOS 编程新手，想在我正在设计的 iPad 应用程序中显示股票报价和股票详细信息。我在看两个选项 我在看谷歌金融或雅虎金融。

我将如何向他们的网站发送 url 请求，然后在 Xcode 中处理回复？

我看到雅虎有一个 YQL 服务，但我无法理解如何让它工作，尽管在线阅读了一些雅虎文档，所以我希望避免它。我已经查看了 google api，但我不知道如何集成它并让它请求库存详细信息。我决定通过 url 请求路由并尝试编写一些基本代码来处理来自 url 请求的回复，因为这似乎是最简单的选择（尽管我不知道在搜索股票时这将如何工作） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:06:39.473

刚刚删除了我的整个答案并重写了它以避免混淆：

我研究了如何使用 YQL 来查询 yahoo Finance API，这就是我最终得到的结果：

这是完整的代码来完全制定请求字符串。您可以将它直接扔到 NSMutableURLRequest 的 NSURL 中，并会得到一个 json 响应。此代码将获取每个代码的每个属性。要更改此设置，您需要在前缀 (select%20*%20) 的此位中指定单个属性而不是 *。我从[这篇文章](http://tech.element77.com/2012/02/fetching-stock-data-from-yahoo-for-ios.html)的示例代码中提取了一部分。我修改了代码以适应异步请求（也稍微更改了它，因为它的一部分似乎已经过时并且无法正常工作。

```
#define QUOTE_QUERY_PREFIX @"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("
#define QUOTE_QUERY_SUFFIX @")%0A%09%09&env=http%3A%2F%2Fdatatables.org%2Falltables.env&format=json"

+ (NSString *)formulateYQLRequestFor:(NSArray *)tickers
{
    NSMutableString *query = [[NSMutableString alloc] init];
    [query appendString:QUOTE_QUERY_PREFIX];
    for (int i = 0; i < [tickers count]; i++) 
    {
        NSString *ticker = [tickers objectAtIndex:i];
        [query appendFormat:@"%%22%@%%22", ticker];
        if (i != [tickers count] - 1)
        {
            [query appendString:@"%2C"];
        }
    }
    [query appendString:QUOTE_QUERY_SUFFIX];

    return query;
} 
```

您可以通过执行以下操作来调用它：

```
NSArray *tickerArray = [[NSArray alloc] initWithObjects:@"AAPL", @"VZ", nil];
NSString *queryURL = [MyClass formulateYQLRequestFor:tickerArray]; 
```

使用[此答案](https://stackoverflow.com/questions/9828038/how-to-update-data-on-server-db-through-json-api/9829015#9829015)查看如何制定请求并使用返回的 json。本质上，您需要更改的部分是

```
NSURL *url = [NSURL URLWithString:queryURL]; 
```

您也没有发送 JSON，因此您应该更改请求以反映这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:36:50.833

我的[ScriptScraper](http://www.scriptscraper.com)工具做了类似的事情，它将股票加载到 Excel 表格中。

干杯，马丁

# windows-phone-7 - 创建自定义动态磁贴

> ID：10522443
> 
> 赞同：0
> 
> 时间：2012-05-09T19:00:19.217
> 
> 标签：windows-phone-7

如何创建自定义动态磁贴？我想要一些非常简单的东西。只有一个数字要显示，没有图标，没有文字或计数......而且应该也可以更新磁贴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:10:36.453

听起来[Ree7 Tile Toolkit for Windows Phone 7](http://wp7tiletoolkit.codeplex.com/ "适用于 Windows Phone 7 的 Ree7 Tile 工具包")可能就是您所追求的。它允许您在 XAML 中定义磁贴并将它们呈现为自定义磁贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:10:34.703

你尝试过什么吗？

通过谷歌搜索，我发现了这个： http: [//www.jeffblankenburg.com/2011/11/11/31-days-of-mango-day-11-live-tiles/](http://www.jeffblankenburg.com/2011/11/11/31-days-of-mango-day-11-live-tiles/) 应该可以帮助你，不是吗？

# c++ - getline 功能不工作

> ID：10522444
> 
> 赞同：1
> 
> 时间：2012-05-09T19:00:21.180
> 
> 标签：c++, getline

有人可以告诉我在 C++ 中使用 getline() 使用哪个标头。我用过

```
#include<iostream>
#include<string>
#include<stdio.h>
#include<stdlib.h>
using namespace std; 
```

他们似乎都没有工作。

这是我到目前为止编写的全部代码

```
#include "stdafx.h"
#include<iostream>
#include<string>
#include<vector>
#include<set>
#include<map>
using namespace std;

class TextQuery
{
    typedef map<string, set<string::size_type> > word_map;
    TextQuery(ifstream &file)
    {
        FillLineVector(file);
        BuildMap(file);
    }

    void query(string);
private:
    word_map map;
    vector<string> LineVector;
    void FillLineVector(const ifstream&);
    void BuildMap(const ifstream&);
};

void TextQuery::FillLineVector(const ifstream& file)
{
    string line;
    while(getline(file,line)); //error:getline identifier not found
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:03:06.450

您需要`iostream`并且可能`string`是您正在使用的版本。由于您没有提供其他信息，为什么这不起作用将不得不保持一个谜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:04:08.947

如果您希望人们能够帮助您，请发布您的代码。无论如何， getline 应该这样使用：

```
// getline with strings
#include <iostream>
#include <string>
using namespace std;

int main () {
  string str;
  cout << "Please enter full name: ";
  getline (cin,str);
  cout << "Thank you, " << str << ".\n";
} 
```

如[http://www.cplusplus.com/reference/string/getline/所示](http://www.cplusplus.com/reference/string/getline/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:28:50.403

您的函数采用`ifstream`而不是`istream`，因此您必须包含`<fstream>`才能获得它的定义。

但是，您最好通过 take 使函数更通用`istream`，除非由于某种原因它们只能与文件一起使用。在这种情况下，你只需要你已经拥有的`<iostream>`and 。`<string>`

# c++ - 强制 const 存储按值返回的值

> ID：10522449
> 
> 赞同：3
> 
> 时间：2012-05-09T19:00:30.693
> 
> 标签：c++, constants, return, return-by-value

这就是我想要完成的事情：

```
struct test{};

const test returnconst(){
    return test();
}

test returnnonconst(){
    return test();
}

int main(){
          test t1=returnnonconst();
    const test t2=returnnonconst();
          test t3=returnconst();  //I want this to be a compile error
    const test t4=returnconst();
} 
```

编译器接受所有四个 return* 调用。我知道在第三次调用中构造了对象的副本，但我想强制调用者`returnconst`将值存储为`const`. 有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:07:19.503

你按价值返回。您**正在**创建. `const`所以你基本上是说你不想复制`const`：

~~结构测试{私有：测试（常量测试&其他）；};~~

以前的代码不起作用，您会遇到大量其他错误。这是不可能的:)

它不起作用不是因为您限制它创建`const`对象的副本，而是没有办法强制新创建的对象也是`const`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:07:43.417

没有办法做到这一点。你为什么要这样做？你想达到什么目的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:07:45.210

您的问题是它返回一个 const 对象并调用您的复制分配或构造函数来创建一个新的非 const 对象的按值副本。您可以按值复制构造禁用并强制用户使用引用分配，但这可能很烦人。

# android - 如何在opengl android中画一条线

> ID：10522451
> 
> 赞同：0
> 
> 时间：2012-05-09T19:00:39.307
> 
> 标签：android, opengl-es, 3d, vertex-buffer

我必须使用线条来绘制 squre，它看起来像下面的 url。

[http://www.thinkingwriting.qmul.ac.uk/wishees/tutorials/square.gif](http://www.thinkingwriting.qmul.ac.uk/wishees/tutorials/square.gif)

你能告诉我如何使用opengls GL_LINES或GL_LINES_STRIP在android中绘制它吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:07:50.783

这相当简单，假设您已经有一个工作的 OpenGL 上下文：

*   设置正交投影
*   构建一个包含正方形顶点的顶点缓冲区
*   渲染时，设置线条渲染属性（例如`glLineWidth`）
*   `GL_LINE_LOOP`使用or渲染顶点缓冲区`GL_LINES`（取决于您如何设置顶点）

看看[这个关于顶点缓冲区](http://www.learnopengles.com/android-lesson-seven-an-introduction-to-vertex-buffer-objects-vbos/)的介绍，了解从哪里开始。有一些简单得多的教程，但这个教程提供了比大多数教程更多的背景知识。

# android - 2 活动我如何只启动一项

> ID：10522453
> 
> 赞同：0
> 
> 时间：2012-05-09T19:00:45.643
> 
> 标签：android

菜鸟来了

构建一个 Android 应用程序，我可以在其中更新通知栏并显示应用程序主屏幕。第二个活动只是更新通知图标。

当我尝试仅启动通知活动时，两者都启动。

我的事实是我的两个活动都有默认类别：

```
 <activity android:name=".MyappMain"
       android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="com.ng.MyappMain" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>    
           <activity android:name=".MyappNotification"
       android:theme="@android:style/Theme.NoDisplay">
        <intent-filter>
            <action android:name="com.ng.MyappNotification" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

这是启动我的通知活动的代码：

```
 Intent intentx = new Intent("com.ng.MyappNotification");
        lamaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       context.startActivity(intentx); 
```

有人可以给我看一个广播接收器启动活动的例子吗

# javascript - 为浏览器和/或安卓键盘提供建议/自动完成项目列表的机制？

> ID：10522454
> 
> 赞同：0
> 
> 时间：2012-05-09T19:00:52.893
> 
> 标签：javascript, android, html

我有一个在 Android 浏览器中加载文本框的 asp.net 页面。

如果您点击文本框，则会弹出一个键盘。在您开始输入时，键盘会显示建议。

有没有办法让键盘使用自定义的建议列表？

这会是浏览器、键盘或操作系统的功能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:10:40.380

将文本框替换为您自己的自动完成文本框，[例如这个](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)。

如果您想在 Android 级别控制它，则必须编写自己的 Android 应用程序并使用[AutoComplete Widget](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)。

# java - 如何防止 javax.xml.transform.Transformer 转换/解析 HTML 编码的字符

> ID：10522456
> 
> 赞同：1
> 
> 时间：2012-05-09T19:00:57.127
> 
> 标签：java, xml, xslt, coldfusion

我正在使用 javax.xml.transform.Transformer 获取 HTML 内容并解析为 XML 文档（我正在使用 Crouton/TagSoup 组合来执行此操作）。不过，我认为这并不是太重要，因为这是我的问题：

我正在转储 Transformer.transform() 进程的输出，并看到在输出中，诸如此类的东西`&copy;`正在转换为它们的实际符号，在这种情况下是版权符号。

最终，此内容将被重新保存为 HTML 文件，但它不会`&copy;`显示在文件中，而是放置不应该使用给定 HTML 标准的特殊字符。

有什么方法可以让转换器忽略已经编码的 HTML 字符而不是转换为它们的实际符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:00:10.663

您可以尝试以下方法：调用`transformer.setOutputProperty(OutputKeys.ENCODING, "ASCII")`. 这样，所有非 ASCII 字符都必须使用字符实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:42:06.993

如果是 XSLT 2.0，您可以使用字符映射 - 我相信有人创建了定义所有 HTML 字符实体的字符映射。

由于它是 Java，所以没有什么可以阻止您使用 Saxon，并且 Saxon 有一个序列化属性 saxon:character-representation="entity" 似乎可以满足您的需求（但是，它不理解所有 HTML 定义的实体，只有那些在 Latin-1 中的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:27:31.020

这不是我原来问题的正确解决方案，但这是一种让我通过的解决方法。

由于正在转换 HTML 实体，因此在发送内容字符串之前，我使用正则表达式将实体“转换”为另一种格式，因此解析器/转换器不会接收它们。

然后在传出字符串中，我只需使用另一个正则表达式将它们转换回 HTML 实体。

# c# - 如何确定 ping 回复是否已达到超时？

> ID：10522458
> 
> 赞同：0
> 
> 时间：2012-05-09T19:01:09.420
> 
> 标签：c#, timeout, console-application, ping, roundtrip

我需要确定是否发生超时并将条目保存到列表数组中。

这就是我 ping 并将往返值添加到一个列表数组的方式：

```
static void Ping()
{
    Console.Write(Environment.NewLine + "Start the test? (y/n): ");

    if (Console.ReadLine().ToLower() == "y")
    {
        List<int> lag = new List<int>();

        Console.WriteLine();

        for (int server = 1; server <= 139; server++)
        {
            string url = "world" + server.ToString() + ".runescape.com";

            Console.WriteLine("Checking world " + server + "...");

            Ping ping = new Ping();
            PingReply reply = ping.Send(url);

            lag.Add(int.Parse(reply.RoundtripTime.ToString()));
        }

    // ... More Code Here ...

    }
} 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:10:05.413

查看状态属性

```
reply.Status 
```

它返回一个应该具有相应状态的 IPStatus。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:10:15.153

看来您需要使用 PingReply.Status 中的值来确定是否发生超时。MSDN 文档指出：

> 如果 Status 的值不是 Success，则不应使用 RoundtripTime、Options 或 Buffer 属性返回的值。RoundtripTime 和 Buffer 属性将返回零，而 Options 属性将返回 null。

[http://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingreply.status.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingreply.status.aspx)

# c - 我应该如何设置此缓冲区以自动扩展

> ID：10522460
> 
> 赞同：2
> 
> 时间：2012-05-09T19:01:14.390
> 
> 标签：c

我目前正在将一个日志解析脚本从 bash 重写为 C，我只是想知道是否可以就如何设置名为 buffer 的数组动态扩展而不是限制为 1024 获得一些建议，我想我会使用 malloc，但我不太确定如何为这个特定的应用程序正确实现它，非常感谢任何帮助，谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define _GNU_SOURCE
void main(int argc, char *argv[], char *envp[])
{
  FILE *fd;
  char *name;
  name = getenv("MCEXEC_PLAYERNAME");
  char *filename;
  filename = malloc(sizeof "/home/minecraft/freedonia/playerdata/deathlog-.txt" - 1 +    strlen(name) + 1);
  if (!filename) exit(EXIT_FAILURE);
  sprintf(filename,"/home/minecraft/freedonia/playerdata/deathlog-%s.txt",name);
  char buff[1024];
  if ((fd = fopen(filename, "r")) != NULL)
  {
    fseek(fd, 0, SEEK_SET);

    while(!feof(fd))
    {
      memset(buff, 0x00, 1024);
      fscanf(fd, "%[^\n]\n", buff);
    }
    printf("%s\n", buff);
  }
  else
  printf( "fail" );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:04:49.770

使用[malloc](http://linux.die.net/man/3/malloc)动态分配数组。

如果需要，重新[分配](http://linux.die.net/man/3/realloc)它以改变它的大小。

*编辑：*

代替：`char buff[1024];`

采用：

```
char *buff;
buff = malloc(1024); //This will allocate 1024 chars 
```

您可以使用另一个变量，例如：`char tmp[256];`从文件中读取并将其存储到`buff`. 当您`tmp`输入`buff`时，请注意 . 中字符的大小`buff`。如有必要，请调用 realloc：

```
len = sizeof(buff);
buff = realloc(buff, len+256); //This will increase the buff size by 256 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:09:07.723

从您的代码看来，您只是想从打开的文件中打印最后一行。您可以只寻找文件的末尾并向后搜索倒数第二个 '\n'，然后从那时起一次将多达 1024 个字节读入缓冲区并将它们打印到屏幕上。在这种情况下，您不需要重新分配 buff。

编辑：每次最多读取 1023 到 buff 并始终让 buff[1023] = '\0' 。

# asp.net-mvc-3 - 使用 Html Helper 验证字段

> ID：10522462
> 
> 赞同：0
> 
> 时间：2012-05-09T19:01:15.590
> 
> 标签：asp.net-mvc-3, razor

我有以下领域：

```
<div class="editor-label">
    @Html.LabelFor(c => c.Title)
</div>
<div class="editor-field">
    @Html.TextBoxFor(c => c.Title)
</div>
<p>
    <input type="submit" value="Create" />
</p> 
```

我想确保提交时标题中有一个值。我知道您可以通过在模型上添加必需属性来做到这一点，但我不想向模型添加必需属性。我可以仅使用 Html 助手验证是否需要一个值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:00:38.963

取自[Manually validate textbox with jQuery unobtrusive validation asp.net MVC3](https://stackoverflow.com/questions/10353453/manually-validate-textbox-with-jquery-unobtrusive-validation-asp-net-mvc3/10353519)你可以用 jQuery 做一些事情

```
$('#Title').rules('add', {
     required: true,
     messages: {
        required: 'The title field is required.'
     }
}); 
```

但是手动将标签插入到您的 html 中只是添加客户端验证。我认为最好对您的实际视图模型进行某种验证。我认为这样做并不过分。

```
public class BaseViewModel
{
    //...
}

public class ViewModel1 : BaseViewModel
{
    [Required]
    public string Title { get; set; }
}

public class ViewModel2 : BaseViewModel
{
    public string Title { get; set; }
} 
```

如果视图模型有不同的规则，那么它就是不同的视图模型。

# objective-c - UIScrollView 中的单点触摸检测

> ID：10522480
> 
> 赞同：0
> 
> 时间：2012-05-09T19:02:29.283
> 
> 标签：objective-c

首先，我只想说我是从Objective-C开始的。

这是我的项目的布局： mainView > ScrollView inside mainView > ImageView inside ScrollView

mainView 和 scrollView 都是在 Storyboard 中创建的。所有的 imageView 都是以编程方式创建的，并作为 scrollView 中的子视图。

我只有一个名为 ViewController 的类。

这是我的问题：如何在我的 scrollView 内处理 ImageView 上的单点触摸？让我知道是否有不清楚的地方。

更新：

```
NSString *imagePath = [NSString stringWithFormat:@"%@/%@ (%i).png", path, path, nbrImage];
            CGRect myImageRect = CGRectMake(40, 25 + (line*lenght), 75, 75);
            self.img = [[UIImageView alloc] initWithFrame:myImageRect];
            [self.img setImage:[UIImage imageNamed:imagePath]];

            UITapGestureRecognizer* singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
            singleTapGestureRecognizer.numberOfTapsRequired = 1;
            singleTapGestureRecognizer.numberOfTouchesRequired = 1;     
            singleTapGestureRecognizer.cancelsTouchesInView = NO;
            [self.img addGestureRecognizer:singleTapGestureRecognizer];

            [self.scrollView addSubview:self.img];

- (void)handleSingleTapFrom:(UITapGestureRecognizer*)recognizer {

   UIImageView* imageView = (id)recognizer.view;
   NSLog(@"Test");
} 
```

编辑：这行得通，在@selector中我写了handleSingleTap而不是handleSingleTapFrom：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:08:20.703

您可以将 UIControl 添加到您的 imageView 以执行您想要的任何选择器以响应单次触摸。只需将背景颜色设置为清除，将框架设置为 imageView.frame，将控件添加为 imageView 的子视图并说

```
[myControl addtarget:self action:@selector(whateverYouWantToDo) forControlEvents:UIConntrolEventTouchUpInside]; 
```

编辑：

```
UIControl *myControl = [[UIControl alloc] initWithFrame:imageView.frame]; 
[myControl setBackgroundColor:[UIColor clearColor]]; 
[myControl addTarget:self action:@selector(doWork) forControlEvents:UIControlEventTouchUpInside]; 
[imageView addSubview:myControl]; 
```

然后只需实现 doWork 方法来做任何你想做的事情。我可能误解了您的问题，但如果您想在用户触摸滚动视图中的图像时执行操作，这就是我所做的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:11:02.400

使用[`UITapGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html). 例如，

```
 UITapGestureRecognizer* singleTapGestureRecognizer = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)] autorelease];
    singleTapGestureRecognizer.numberOfTapsRequired = 1;
    singleTapGestureRecognizer.numberOfTouchesRequired = 1;     
    singleTapGestureRecognizer.cancelsTouchesInView = NO;
    [imageView addGestureRecognizer:singleTapGestureRecognizer]; 
```

使用处理程序方法：

```
- (void)handleSingleTapFrom:(UITapGestureRecognizer*)recognizer {

    UIImageView* imageView = (id)recognizer.view;
    ...
} 
```

# c# - ASP.NET 中的会话超时警告

> ID：10522482
> 
> 赞同：16
> 
> 时间：2012-05-09T19:02:40.713
> 
> 标签：c#, asp.net, .net, session, iis

我有一个 asp.net 站点，我需要在会话超时（比如说 10 分钟）时发生弹出/图层/警报。弹出窗口会说您的帐户会话将由于不活动而过期，并有一个继续会话按钮或一个注销按钮。

我在网上看到了不同的方法，但是最好/正确的方法是什么？如果弹出窗口打开时间过长，我是否必须设置额外的超时？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-09T19:05:50.163

```
<script type="text/javascript">
    var sessionTimeoutWarning = "<%= System.Configuration.ConfigurationManager.AppSettings["SessionWarning"].ToString()%>";
        var sessionTimeout = "<%= Session.Timeout %>";

    var sTimeout = parseInt(sessionTimeoutWarning) * 60 * 1000;
    setTimeout('SessionWarning()', sTimeout);

    function SessionWarning() {
        var message = "Your session will expire in another " +
            (parseInt(sessionTimeout) - parseInt(sessionTimeoutWarning)) +
            " mins! Please Save the data before the session expires";
        alert(message);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T19:07:52.253

之前已解决此问题，例如 [ASP.NET - 基于 web.config 中 sessionState 超时的 Javascript 超时警告](https://stackoverflow.com/questions/7029168/asp-net-javascript-timeout-warning-based-on-sessionstate-timeout-in-web-config)

但是，AFAIK 没有完全可靠的方法可以做到这一点，因为：

*   如果用户使用同一会话打开了多个窗口，则一个窗口可能比另一个窗口更新，并且最旧窗口上的客户端会话超时将是陈旧/不正确的。
*   如果您往返服务器以查看当前会话过期时间是什么，您将扩展它，从而破坏弹出/警报的目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-08T16:14:01.687

[我从Pranay Rana的](https://stackoverflow.com/users/314488/pranay-rana)[帖子](https://stackoverflow.com/a/10522534/56984)去看了这篇文章，我喜欢这个大体的想法，但是代码可以使用一些精简。所以这是我的版本。对于平板电脑/手机问题，请参见下文：

```
<script language="javascript" type="text/javascript">
    var minutesForWarning = 4;
    var sessionTimeout = parseInt("@Session.Timeout"); // razor syntax, otherwise use <%= Session.Timeout %>
    var showWarning = true;

    function SessionWarning() {
        showWarning = false;
        alert("Your session will expire in " + minutesForWarning + " mins! Please refresh page to continue working.");
        // leave a second for redirection fct to be called if expired in the meantime
        setTimeout(function () { showWarning = true; }, 1000);
    }

    function RedirectToWelcomePage() {
        if (showWarning)
            alert("Session expired. You will be redirected to welcome page.");
        document.getElementById('logoutForm').submit();
        // window.location = "../Welcome.aspx"; // alternatively use window.location to change page
    }

    setTimeout('SessionWarning()', (sessionTimeout - minutesForWarning) * 60 * 1000);
    setTimeout('RedirectToWelcomePage()', sessionTimeout * 60 * 1000);
</script> 
```

好吧，在平板电脑或手机上，您不能指望 setTimeout，因为当设备锁定或浏览器不活动时，javascript 执行会暂停。相反，我正在进行定期检查（在我的情况下，我认为每 10 秒就足够了）：

```
<script language="javascript" type="text/javascript">
    function addMinutes(date, minutes) {
        return new Date(date.getTime() + minutes * 60 * 1000);
    }
    function remainingMinutes(date) {
        return Math.round((date - (new Date()).getTime()) / 60 / 1000);
    }

    var minutesForWarning = 5;
    var sessionTimeout = parseInt("@Session.Timeout");
    var showWarning = true;
    var showRedirect = true;
    var timeToWarn = addMinutes(new Date(), sessionTimeout - minutesForWarning);
    var timeToEnd = addMinutes(new Date(), sessionTimeout);

    function CheckTime() {
        if (showWarning && new Date() > timeToWarn && new Date() < timeToEnd) {
            showRedirect = false;
            showWarning = false;
            alert("Your session will expire in " + remainingMinutes(timeToEnd)) + " mins! Please refresh page to continue working.");
        }
        if (new Date() > timeToEnd) {
            if (showRedirect)
                alert("Session expired. You will be redirected to welcome page ");
            document.getElementById('logoutForm').submit();
            // window.location = "../Welcome.aspx"; // alternatively use window.location to change page
        }
        if (showRedirect == false)
            showRedirect = true;
    }

    setInterval(CheckTime, 10000);

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-14T20:47:19.297

下面是一些带有 jQ​​uery 的 JavaScript，用于警告用户关于 ASP.NET 表单身份验证超时，如果达到超时，会将他们重定向到登录页面。它也可以改进并适应会话超时。每当用户通过单击、键入或调整大小与页面交互时，它还将通过“ping”服务器来重置身份验证超时。

请注意，这确实会通过每次单击、按键、调整大小时 ping 来增加服务器的负载，但它非常小。不过，如果您有很多用户正在打字，您将需要评估影响。我想不出另一种方法来做到这一点，因为必须涉及服务器，因为那是超时到期的地方。

另请注意，超时不是在 JS 中硬编码的。它从服务器获取超时，因此您只需要在 Web.config 中的一处维护它。

```
(function ($, undefined) {

    if (!window.session) {

        window.session = {

            monitorAuthenticationTimeout: function (redirectUrl, pingUrl, warningDuration, cushion) {

                // If params not specified, use defaults.
                redirectUrl = redirectUrl || "~/Account/Login";
                pingUrl = pingUrl || "~/Account/Ping";
                warningDuration = warningDuration || 45000;
                cushion = cushion || 4000;

                var timeoutStartTime,
                    timeout,
                    timer,
                    popup,
                    countdown,
                    pinging;

                var updateCountDown = function () {
                    var secondsRemaining = Math.floor((timeout - ((new Date()).getTime() - timeoutStartTime)) / 1000),
                        min = Math.floor(secondsRemaining / 60),
                        sec = secondsRemaining % 60;

                    countdown.text((min > 0 ? min + ":" : "") + (sec < 10 ? "0" + sec : sec));

                    // If timeout hasn't expired, continue countdown.
                    if (secondsRemaining > 0) {
                        timer = window.setTimeout(updateCountDown, 1000);

                    }
                    // Else redirect to login.
                    else {
                        window.location = redirectUrl;
                    }
                };

                var showWarning = function () {
                    if (!popup) {
                        popup = $(
                            "<div style=\"text-align:center; padding:2em; color: black; font-color: black; background-color:white; border:2px solid red; position:absolute; left: 50%; top:50%; width:300px; height:120px; margin-left:-150px; margin-top:-90px\">" +
                                "<span style=\"font-size:1.4em; font-weight:bold;\">INACTIVITY ALERT!</span><br/><br/>" +
                                "You will be automatically logged off.<br/><br/>" +
                                "<span style=\"font-size:1.4em; font-weight:bold;\" id=\"countDown\"></span><br/><br/>" +
                                "Click anywhere on the page to continue working." +
                            "</div>")
                            .appendTo($("body"));

                        countdown = popup.find("#countDown");
                    }

                    popup.show();
                    updateCountDown();
                };

                var resetTimeout = function () {
                    // Reset timeout by "pinging" server.
                    if (!pinging) {
                        pinging = true;
                        var pingTime = (new Date()).getTime();
                        $.ajax({
                            type: "GET",
                            dataType: "json",
                            url: pingUrl,
                        }).success(function (result) {

                            // Stop countdown.
                            window.clearTimeout(timer);
                            if (popup) {
                                popup.hide();
                            }

                            // Subract time it took to do the ping from
                            // the returned timeout and a little bit of 
                            // cushion so that client will be logged out 
                            // just before timeout has expired.
                            timeoutStartTime = (new Date()).getTime();
                            timeout = result.timeout - (timeoutStartTime - pingTime) - cushion;

                            // Start warning timer.
                            timer = window.setTimeout(showWarning, timeout - warningDuration);
                            pinging = false;
                        });
                    }
                };

                // If user interacts with browser, reset timeout.
                $(document).on("mousedown mouseup keydown keyup", "", resetTimeout);
                $(window).resize(resetTimeout);

                // Start fresh by reseting timeout.
                resetTimeout();
            },
        };
    }

})(jQuery); 
```

当您的页面加载时，只需调用上述一次：

```
window.session.monitorAuthenticationTimeout(
        "/Account/Login",    // You could also use "@FormsAuthentication.LoginUrl" in Razor.
        "/Account/Ping"); 
```

在服务器上，您需要一个返回剩余时间的操作。您也可以添加更多信息。

```
 public JsonResult Ping()
    {
        return Json(new { 
                        timeout = FormsAuthentication.Timeout.TotalMilliseconds 
                    }, 
                    JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T19:08:26.420

您将不得不在这里使用客户端技术（javascript）。例如，您将使用 javascript 超时工具，然后显示警告。如果用户单击确定，您可能需要做一些事情来保持会话处于活动状态。我建议使用 jquery.ajax 方法，并调用服务器，可以是一个虚拟调用 - 只是为了保持会话活跃。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T19:10:08.377

如果使用滑动过期，您可以使用 jquery 和 setinterval 函数在后台执行 Ajax 发布以刷新超时，或者通过记录会话开始时间并减去过期时间来获取剩余时间的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-24T09:31:16.637

您可以做的是使用一些 javascript 来触发消息。使用计时器在一段时间后触发（在您的应用程序中为会话超时设置的时间段 - 几分钟）。

在那段时间之后，向用户显示会话将超时的确认对话框。如果用户点击保持会话。在页面中进行虚拟回发，以免会话丢失。您还可以进行 AJAX 调用，以便用户看不到页面重新加载并丢失输入数据。

# c# - 用数据继承类的最佳方法？

> ID：10522490
> 
> 赞同：1
> 
> 时间：2012-05-09T19:02:59.200
> 
> 标签：c#, winforms, inheritance, user-controls

不知道这个问题有多菜鸟或高级，但我一直很难找到一个好的答案，所以我想在这里试一试。

用文字来描述我的问题如下。我有一个程序，Init 在启动时是一个“引擎”，它是该程序所有数据和信息的来源。现在的问题是，如果我现在编写一个新类，我必须在创建类时包含它。

```
public class ClassName(TMEngine engine)
{
......
} 
```

我想知道我是否可以使用“子：父”类关系在父级上使用它，所以我唯一需要知道的就是它的名称。我已经为 the`Form`和`UserControl`有一些额外的类编写了类，所以有一个父类。

```
public partial class msgCtrlContainerCtrl : TMUserControl
{
     public msgCtrlContainerCtrl(TMEngine engine)
     {
        ......
     }
} 
```

由于这是一个 WinForms 应用程序，我在表单中初始化引擎，但希望在其中创建的所有控件都使用相同的引擎。

在“加载事件”中设置引擎`TMUserControl`现在不起作用，因为`UserControl`将在“添加”上初始化为`UserControl`，并且`Load`事件将在此之后运行得更远。

并且当您为新控件执行“添加”时，由于父关系尚未初始化，因此您无法查找控件的父级。

因此，任何想法如何以最好的方式解决这个问题，以使这个引擎在我在这里`UserControl`调用的扩展类中同步，`TMUserControl`或者它必须在每个使用它的类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:20:00.000

你在寻找这样的东西吗？

```
public class TMEngine
{
   private TMEngine() {}

   private static TMEngine instance;    
   public static TMEngine Instance
   {
      get 
      {
         if (instance == null)             
            instance = new TMEngine();             
         return instance;
      }
   }

   public string GetSomeStringData()
   {
       ...
   }
} 
```

这将是你的引擎......所以你可以继续构建你想要的方式。
现在，您需要为所有将使用该引擎的类创建一个摘要。

```
public abstract class EnginedClass
{
    public static TMEngine Engine { get { return TMEngine.Instance; } };
} 
```

然后只需使用它实现您的类：

```
public MyNewClass : EnginedClass
{
    ...
    public string GetSomeData()
    {
        ...
        return Engine.GetSomeStringData();
    }
    ...
} 
```

# ruby - 为什么 RVM 指向错误的红宝石？

> ID：10522491
> 
> 赞同：1
> 
> 时间：2012-05-09T19:03:00.307
> 
> 标签：ruby, rubygems, rvm

几个月前我切换到 RVM，直到昨天才记得安装任何新的 gem。当我需要新的宝石时，我得到：

```
/home/rob/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require': no such file to load -- mspire/peak_list (LoadError) 
```

虽然：

```
gem install mspire 
```

工作得很好。

我猜问题在于Ruby正在1.9.1的rubygems而不是1.9.2（我正在使用的版本）中寻找gem。我用`rvm use`. 有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:11:30.643

Ruby >= 1.9.1 始终将其库保存在 1.9.1 中。目录。这表示所有这些 Ruby 版本都遵循 1.9.1 兼容性。它并不表示使用的实际 Ruby 版本。

您的宝石应保存在`/home/rob/.rvm/gems/ruby-1.9.2-p290/gems`. 应该有一个以 gem 命名的目录和其中的确切版本。RVM 设置的路径可以用 来检查`rvm info`。`GEM_PATH`应该看起来`/home/rob/.rvm/gems/ruby-1.9.2-p290:/home/rob/.rvm/gems/ruby-1.9.2-p290@global`像。

确保安装 gem 时使用的 Ruby 和 gemset 完全相同。如果更改 Ruby 或 gemset，则必须重新安装 gem。

# silverlight - WP7 Toolkit GestureService 是否有高级别的替代品？

> ID：10522499
> 
> 赞同：0
> 
> 时间：2012-05-09T19:03:28.817
> 
> 标签：silverlight, windows-phone-7, multi-touch, gesture

我目前在一些应用程序中使用 WP7 takeit `GestureService`，以便在 Silverlight UI 元素上执行轻拂和捏合/缩放手势。但是，看到该服务已被弃用，我试图找到一个替代库，它可以以类似的方式执行所有低级计算。

我一直在阅读挂钩`ManipulationDelta`是要走的路，但如果我不需要，我宁愿不深入研究 - 是否有任何人都知道的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:26:33.353

您可以使用高级别的 ManipulationStarted、ManipulationDelta 和 ManipulationCompleted。您还可以使用 Touch.FrameReported - 它提供了用户触摸的低级界面

[http://invokeit.wordpress.com/2012/04/27/high-performance-touch-interface-wpdev-wp7dev/](http://invokeit.wordpress.com/2012/04/27/high-performance-touch-interface-wpdev-wp7dev/)

我使用 GestureService 而不是自己滚动来进行捏缩放、轻弹和拖动

找到了更多可以用来代替手势服务的东西。

```
// Scale the rectangle.
this.scale.ScaleX *= e.DeltaManipulation.Scale.X;
this.scale.ScaleY *= e.DeltaManipulation.Scale.Y;

// Move the rectangle.
this.translation.X += e.DeltaManipulation.Translation.X;
this.translation.Y += e.DeltaManipulation.Translation.Y; 
```

更多信息在这里[http://msdn.microsoft.com/en-us/library/ff426933(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/ff426933(v=vs.95).aspx)

# jquery - 导航上的 jQuery 动画

> ID：10522500
> 
> 赞同：1
> 
> 时间：2012-05-09T19:03:36.687
> 
> 标签：jquery, html

我在导航栏上运行两次 jQuery 动画时遇到问题。鼠标悬停一次会导致它飞下来然后再飞回来。它不会保持可见。鼠标移动两次会产生正确的效果。以下是导航的设置方式：

```
<div id="nav">
<ul>
  <li><a href="en.about.html">About<img src="images/down_arrow.png" alt=""/></a>
    <ul>
      <li><a href="en.accreditations.html">Accreditations</a></li>
      <li><a href="en.partnerships.html">Partnerships</a></li>
      <li><a href="en.labs.html">Laboratories</a></li>
      <li><a href="">Industries</a></li>
      <li><a href="">Photo Gallery</a></li>
    </ul>
   </li>
...
</ul> 
```

脚本：

```
<script type="text/javascript">
$('body').ready(function() {
$('li').hover(function() {
$(this).find('li').slideToggle(); 
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:12:06.607

我假设这是一个下拉菜单？

我假设您想要制作整个列表幻灯片，而不仅仅是列表项。

```
<script type="text/javascript">

    $(function() {
        $('li').hover(function() {
            $(this).find('ul').slideToggle(); 
        });
    });

</script> 
```

寿，如果你想让他们在鼠标移出时隐藏......

```
<script type="text/javascript">

    $(function() {
        $('li').mouseenter(function() {
            $(this).find('ul').slideDown(); 
        }).mouseleave(function(){
            $(this).find('ul').slideUp(); 
        });
    });

</script> 
```

或者谁知道，我可能完全想念你的问题。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:14:23.907

[在JSFiddle](http://jsfiddle.net/Yrwte/15/)中试试这个

**HTML**

```
<div id="nav" style="width:200px">
<ul style="border:1px solid red">
  <li class="topMenuItem"><a href="en.about.html">About<img src="images/down_arrow.png" alt=""/></a>
    <ul style="display:none">
      <li><a href="en.accreditations.html">Accreditations</a></li>
      <li><a href="en.partnerships.html">Partnerships</a></li>
      <li><a href="en.labs.html">Laboratories</a></li>
      <li><a href="">Industries</a></li>
      <li><a href="">Photo Gallery</a></li>
    </ul>
   </li>
</ul>
</div> 
```

**JavaScript** ​</p>

```
$(document).ready(function(){
    $('.topMenuItem').mouseenter(function() {
        $(this).find('ul').slideDown();
    });

    $('.topMenuItem').mouseleave(function(){
        $(this).find('ul').slideUp();
    });
​}); 
```

# java - Spring 3.1 控制器返回 HTML 页面的名称——它会工作吗？

> ID：10522506
> 
> 赞同：1
> 
> 时间：2012-05-09T19:04:11.307
> 
> 标签：java, spring, spring-mvc, controller

如果这不是问这个问题的正确论坛，我提前道歉......但我很困惑。

我们在一个新网站中使用 Spring 3.1.1。构建它的团队，嗯，缺乏经验。

我遇到了这段代码：

```
public String signOut(@ModelAttribute("state") State state, Model model) {
    // useful stuff here
    return "signOut.html";
} 
```

和

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jspx" />
</bean> 
```

但是，我们创建的 JSP 文件的名称是`/WEB-INF/jsp/signOut.jspx`（html 不是名称的一部分）。

令我惊讶的是 - 这确实有效。InternalViewResolver`/WEB-INF/jsp/signOut.html.jspx`按预期返回。

我原以为 Spring 在某些时候无法找到为`signOut.html.jspx`.

这怎么可能工作？它会造成什么损害？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:08:57.887

好吧，实际上一切都按设计进行。从控制器中，您可以返回视图名称（如本例所示）、`View`封装视图名称的实例或`ModelAndView`同时封装视图和模型。

在您的情况下，`String`返回值表示*视图名称*。因此 Spring 使用`ViewResolver`抽象将视图名称转换为实际的视图文件。和属性已配置`prefix`，`suffix`因此您不必从控制器返回完全限定的文件路径。应用前缀和后缀，Spring 在正确的位置找到视图文件。

究竟是什么让你感到惊讶？

# jquery - jQgrid beforeProcessing 不会触发

> ID：10522507
> 
> 赞同：0
> 
> 时间：2012-05-09T19:04:17.417
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

我正在使用 jqGrid 4.0.0，beforeProcessing 永远不会为每个 postBack 触发，它根本没有被触发，请协助！

```
$('#jqgInventory').jqGrid({
    autowidth: true,
    caption: 'Inventory',
    datatype:'json',
    forceFit: true,
    gridview: true,
    height: 500,
    hidegrid: false,
    ignoreCase: true,
    loadui: 'disable',
    pager:'#pager',
    mtype: 'post',
    rowNum:25,
    shrinkToFit: true,
    url:'/MCI/Inventory/Inventory/GetIndexGridData',
    viewrecords: true,
    postData: { modelView: JSON.stringify(model), __RequestVerificationToken:   $('[name="__RequestVerificationToken"]').val() },
    beforeProcessing:  function(data, status,xhr){beforeProcessing(data,status,xhr)},
    beforeRequest: function() {$('#gridScript').block();},
    beforeSelectRow: function(rowid, e) {return false;},
    gridComplete: function() {$('#lblVehicleCount').html($('#jqgInventory').getGridParam('records'));$('#gridScript').unblock();Inventory.modifyGridCellClick();},
    loadComplete: function(xhr) {GetGridData(xhr);}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:17:34.477

如果你想使用 jqGrid 的新特性，你应该使用 jqGrid 的最新版本。你可以从[这里](http://www.trirand.com/blog/?page_id=6)下载。

`beforeProcessing`jqGrid 4.0.0 中不会调用回调函数，因为它是在 4.2.0 版本中引入的。

# sql - 如何有效地创建有时会生成 VIEW 的 TRIGGER？

> ID：10522508
> 
> 赞同：-1
> 
> 时间：2012-05-09T19:04:19.463
> 
> 标签：sql, jdbc, triggers, oracle10g

在一个小型预注册数据库上，只要给出特定用户名，我就使用以下 SQL 生成一个 VIEW。每当系统管理员怀疑重复名称正在注册时，我主要使用它来获取快照。这将很少进行（最多每小时一次），因此数据库模式不应该变得过大。

```
CREATE OR REPLACE TRIGGER upd_on_su_entry
    AFTER UPDATE OR INSERT
    ON PRE_REG_MEMBER
    FOR EACH ROW
BEGIN
    IF :new.MEMBER_NAME  = 'SysAdmin Dup Tester' THEN
        EXECUTE IMMEDIATE 'CREATE OR REPLACE VIEW mem_n AS SELECT :old.MEMBER_NAME, COUNT(:old.MEMBER_NAME) FROM MEMBER GROUP BY MEMBER_NAME';
    END IF;
END; 
```

然而，这似乎是一种臃肿、低效和错误的工作方式（根据我的管理员）。这里有根本错误吗？我可以通过其他方式拍摄等效快照吗？

我对 SQL 很陌生，所以请多多包涵。

另外，我想将视图用作：

```
public void dups()throws Exception
{
    Calendar cal = Calendar.getInstance();
    jt.setText("Duplicate List at : "+ cal.getTime());
    try{
        rs=stat.executeQuery("select * from upd_on_su_entry");
        while(rs.next())
        {
            jt.append(rs.getString("MEMBER_NAME")+"\t");
            jt.append(rs.getString(2)+"\t");
        }
    }
    catch(Exception e){System.out.print("\n"+e);}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:37:40.707

这里似乎有一些误解。

1.) 视图基本上是存储的 sql 语句，而不是存储的 sql 结果，因此您的视图将始终显示查询视图时的数据。

2.) 在应用程序的正常处理过程中，永远不要使用 DDL（创建语句）和类似的东西。它只是不是数据库的工作方式。

如果您想要某个时间点的快照，请创建一个辅助表，其中包含原始表的所有列以及快照时间戳。

当您想要制作快照时，将原始表中所需的所有数据复制到快照表中，同时添加当前时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:13:52.820

根据您的评论，听起来您想要这样的东西

```
SELECT MEMBER_NAME FROM PRE_REG_MEMBER
GROUP BY MEMBER_NAME HAVING COUNT(*) > 1; 
```

这将返回表格中超过一行的所有成员

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:11:55.200

再次问自己“我想做什么”？

不要专注于技术。在你清楚地知道你的目标是什么之后再做这件事。

如果您只是想避免在数据库上重复注册，只需搜索用户表并在该用户名已经存在时显示错误。

此外，在进入实现细节之前，请仔细考虑您的数据模型。

# asp.net - 404 ASP.NET Web API

> ID：10522511
> 
> 赞同：0
> 
> 时间：2012-05-09T19:04:33.443
> 
> 标签：asp.net, http-status-code-404, webforms, asp.net-web-api

我正在尝试托管我的 ASP.NET Web API（Web 窗体），但收到 404（在提琴手中查看）：

![在此处输入图像描述](../Images/c85b1cdfe1cd34dcdfc8224986cb4be6.png)

我在我的 Global 中设置了我的路线，它在我的本地上完美运行 - 我在这里错过了什么？

任何想法表示赞赏。谢谢。

**编辑：**

这是我的路线模板：

```
 RouteTable.Routes.MapHttpRoute(
                name: "DefaultApi",
           routeTemplate: "api/{controller}/{action}",
           defaults: new { controller = "Uploads",  action="UploadFile"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:44:49.147

只是在黑暗中拍摄，但在遵循 Windows Azure 教程后，我开始从 Web API 收到 404 响应，该教程告诉我将文件“WebRole.cs”添加到我的项目中。

从我的项目中删除“WebRole.cs”后，我的 Web API 调用再次开始工作。

# html - 更改我喜欢按钮的大小

> ID：10522514
> 
> 赞同：0
> 
> 时间：2012-05-09T19:04:50.167
> 
> 标签：html, css, facebook

由于设计要求，我必须在我的网页上添加一个更大的“我喜欢”按钮，我正在发疯，我尝试了这种方法：[http ://www.esrun.co.uk/blog/disguising-a-facebook- like-link/](http://www.esrun.co.uk/blog/disguising-a-facebook-like-link/)但只要您使用相同大小的按钮（或者我做错了什么，这很可能：P），它就可以工作，否则只能点击原始 facebook 按钮所在的区域。

那么可以改变大小吗？我了解 Facebook 允许您（根据他们的政策）更改大小，但不能更改其外观，但我看不出有什么办法。

# php - PDO 是执行语句期间受影响的行

> ID：10522520
> 
> 赞同：33
> 
> 时间：2012-05-09T19:05:10.930
> 
> 标签：php, mysql, pdo, prepared-statement

我找到了很多方法来使用 PDO 的 exec 语句，但我不确定它是否对我有帮助。我的理解是我必须对准备好的语句使用 execute() 函数。我正在使用来自用户输入的数据更新一行，因此我想使用准备好的语句而不是 query() 调用。

我的代码如下：

```
$dbh = buildDBConnector(); 
$sql = "UPDATE tb_users 
    SET authState=1
    WHERE id = ? AND authPass = ?";
$q = $dbh->prepare($sql);
$f = $q->execute(array($id,$authPass));
if($f){
    echo '<br />Success<br />';
}else{
    echo '<br />Failure<br />';
} 
```

问题是查询本身没有错误并且执行良好，因此没有失败存储在 $f 中。但是，我需要知道它是否真的找到要更新的行，然后成功更新它。换句话说，我需要受影响的行。当谷歌搜索等时，它不断出现在 exec 语句中，但据我了解， exec 不是用于准备好的语句？有什么建议么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-09T19:08:56.967

试试[`$q->rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)。准备好的语句将通过该方法返回受影响的行数。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-04-03T08:53:21.770

**附注：**更新具有相同值的表时，`rowCount()`将始终返回`0`. 这是正常行为。自 PHP 5.3 起，您可以通过创建具有以下属性的 PDO 对象来自己更改它：

```
<? php
$p = new PDO($dsn, $user, $pass, array(PDO::MYSQL_ATTR_FOUND_ROWS => true));
?> 
```

然后`rowCount()`将返回您的更新查询实际找到/匹配的行数。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-05-13T09:35:28.337

[`$q->rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)返回受最后一个（执行的）SQL 语句影响的行数，`$q`其中经常调用的准备好的语句`$stmt`。

所以大多数阅读这篇文章的用户可能想要这样的东西：

```
$pdo = new PDO($dsn, $username, $password);
$sql = "UPDATE tb_users  SET authState=1 WHERE id = ? AND authPass = ?";
$stmt = $pdo->prepare($sql);
$stmt->execute(array($id, $authPass));

if ($stmt->rowCount()){
    echo 'Success: At least 1 row was affected.';
} else{
    echo 'Failure: 0 rows were affected.';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-25T01:44:47.880

如果PDO是, or语句，`rowCount()`则准备好的语句中的 PDO 将返回受影响的行。否则，它返回从语句返回的行数。`UPDATE``DELETE``INSERT``SELECT`

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-09-28T01:16:48.163

我认为 PDO rowCount() 在带有单个 UPDATE 查询的 MySQL 中是没用的。因为它总是返回 0；

```
ex:
TABLE{id=1, col1="A"}
UPDATE  TABLE SET col1="AA" WHERE id=1;
rowCount will return 0;

also
UPDATE  TABLE SET col1="AA" WHERE id=999;
rowCount will return 0;

so rowCount() is useless in this case. 
```

我尚未使用此查询 UPDATE TABLE SET col1="AA" 进行测试

# xml - 如何让 XPath 忽略嵌套节点？

> ID：10522521
> 
> 赞同：2
> 
> 时间：2012-05-09T19:05:15.017
> 
> 标签：xml, xpath

可能有比我所做的更好的方法来做到这一点，因为我被困在一个隐喻的坑里。

我想获取特定节点下的一些节点。我想出了这个 XPath 表达式：

```
>>> content_tags = 'h1 h2 h3 h4 h5 h6 p ol ul dl table'.split() 
>>> content_xpath = './/*[%s]' % ' or '.join('self::%s' % i for i in content_tags) 
>>> content_xpath 
'.//*[self::h1 or self::h2 or self::h3 or self::h4 or self::h5 or 
self::h6 or self::p or self::ol or self::ul or self::dl or 
self::table]' 
```

列出的任何 content_tags 都可以是我想要的层次结构的顶部，我想忽略可能处于相同或更高级别的其他元素。不幸的是，有时有一个`<p>`inside a `<ul>`或 a `<table>`，或 a `<table>`inside a`<ol>`等，我将内部元素与外部元素一起作为单独的结果。有没有一种好方法可以执行“剪切”以忽略可能嵌套在我发现的节点中的节点？还是有一些更好的方法可以做到这一点，而我却不知何故失踪了？

这是我要解析的示例。

```
<div class="interesting"> 
<img src="ignore-this.jpg"/> 
<h1>I want this.</h1> 
<p>I want this, too.</p> 
<div class="sidebar"> 
<ul> 
<li><p>I only want one copy of this, inside the UL.</p></li> 
<li><p>Ditto.</p></li> 
</ul> 
</div> 
</div> 
```

谢谢！

顺便说一句，我在 w3.org 邮件列表上发现了一些帖子，提倡“不包含任何后代或自我”过滤器，我认为这完全符合我的要求，但似乎没有使其成为最终规格。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:15:06.610

像 with 一样搜索`//p`是显式递归的——如果这不是你想要的，不要那样做！:)

如果你只想要一个`p`直接在一个有趣的下`div`，但它`div`可以在你的层次结构中的任何地方，这将被表示为：

```
//div[@class='interesting']/p 
```

...如果你只想要一个`p`直接在你的树中搜索相对的位置下，那就更简单了：

```
./p 
```

# regex - 如何使用正则表达式获得短语后的第一个单词

> ID：10522522
> 
> 赞同：-4
> 
> 时间：2012-05-09T19:05:16.857
> 
> 标签：regex

如何通过正则表达式找到字符串文字后的第一个单词？

即我想从该行中提取“DAQJ7PS”：

> 错误 service.PostService - 未能保存帖子 DAQJ7PS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:07:06.373

```
/ERROR service\.PostService - Failed to save post (.+)/ 
```

将在第一个捕获组中为您提供结果。如果您有更具体的要求，可以对此进行调整。

# css - CSS3 :nth-child(odd) /even 不一致

> ID：10522524
> 
> 赞同：0
> 
> 时间：2012-05-09T19:05:23.020
> 
> 标签：css, css-selectors

我有一个包含隐藏和可见项目的列表。可见项目有一个名为 active 的类。我正在尝试应用`:nth-child(odd)`or -`:nth-of-type(even)`仅适用于这些特定的可见项目，但结果是完全随机的。

我期待：黄色，绿色，黄色，绿色，黄色。

结果：黄、黄、绿、黄、绿、绿。

我以为我可以过滤类名和节点。但显然情况并非如此。

```
 <ul>
      <li>hide</li>
      <li class="active">visible</li>
      <li>hide</li>
      <li class="active">visible</li>
      <li class="active">visible</li>
      <li>hide</li>
      <li class="active">visible</li>
      <li class="active">visible</li>
      <li>hide</li>
      <li class="active">visible</li>
    </ul> 
```

风格：

```
li {
   background-color:red;
   display:none;
}

li.active {
  display:block;
}

li.active:nth-child(odd) {
  background-color:yellow;
}

li.active:nth-child(even) {
  background-color:green;
} 
```

有没有解决的办法？

编辑：我不能使用 jQuery 或任何其他库，只能使用本机 js。在现实生活中，我有 50 多个包含图像和文本的列表项，因此从 DOM 中删除不可见的项并放回去可能不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:08:35.990

这很有意义，因为空列表项也是彩色的。

最优雅的解决方案：删除空列表元素的呈现。

另一种可能性是使用 jQuery 在文档加载后删除空列表元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:15:18.530

```
 <li></li>                // odd , display none   
  <li class="active"></li> // even                 green
  <li></li>                // odd , display none
  <li class="active"></li> // even                 green
  <li class="active"></li> // odd                  yellow
  <li></li>                // even, display none
  <li class="active"></li> // odd                  yellow
  <li class="active"></li> // even                 green
  <li></li>                // odd , display none
  <li class="active"></li> // even                 green 
```

什么没有意义？你的空`<li>`s 是干什么用的？考虑在那里做一些不同的事情......如果它们是为了间距，向一些 LI 添加一个“spacer”类并在其上放置边距/填充。

* * *

假设您希望行颜色根据可见内容动态更改，则无法使用纯 CSS 执行此操作。不过，使用 jQuery 很简单，例如：

```
$( '#ul li:visible' ).each( function( i ){
    $( this )[ (1&i) ? 'addClass' : 'removeClass' ]( 'active' );
} ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:27:25.983

在 Firefox 中为我工作。

```
<link rel="stylesheet" type="text/css" href="LI.css" />
Test
<ul>
<li>1</li>
<li class="active">2</li>
<li>3</li>
<li class="active">4</li>
<li class="active">5</li>
<li>6</li>
<li class="active">7</li>
<li class="active">8</li>
<li>9</li>
<li class="active">A</li>
</ul> 
```

2、4、8 和 A 获得绿色背景，但 1、3 和 9 不显示（显示：无）

# java - 为什么我不能用 JDOM 加载这个 URL？浏览器欺骗？

> ID：10522527
> 
> 赞同：0
> 
> 时间：2012-05-09T19:05:33.207
> 
> 标签：java, html, url, browser, jdom

我正在编写一些代码来加载和解析来自网络的 HTML 文档。

我像这样使用JDOM：

```
SAXBuilder parser = new SAXBuilder();
Document document = (Document)parser.build("http://www.google.com");
Element rootNode = document.getRootElement();
/* and so on ...*/ 
```

它像那样工作得很好。但是，当我将 URL 更改为其他一些网站时，例如“http://www.kijiji.com”，`parser.build(...)`线路挂起。

知道它为什么挂起吗？我想知道这是否可能是因为 kijiji 知道我不是一个“真正的”网络浏览器——也许我必须欺骗我的 http 请求，所以它看起来像是来自 IE 或类似的东西？

任何想法都是有用的，谢谢！

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:53:51.633

我认为这里可能会发生一些事情。第一个问题是您无法使用 JDOM 解析常规 HTML，HTML*不是*XML....

其次，当我通过 JDOM 运行 kijiji.com 时，我会立即收到 HTTP_400 响应

当我解析 google.com 时，我立即收到关于格式正确的 XML 错误。

如果你碰巧在某个时候解析 xhtml，你可能会在这里遇到这个问题：http: [//www.w3.org/blog/systeam/2008/02/08/w3c_s_excessive_dtd_traffic/](http://www.w3.org/blog/systeam/2008/02/08/w3c_s_excessive_dtd_traffic/)

XHTML 有一个引用其他文档类型等的文档类型。从 w3c.org 加载每个需要 30 秒....

# c++ - 在对象内填充列表并稍后访问它

> ID：10522531
> 
> 赞同：0
> 
> 时间：2012-05-09T19:05:38.450
> 
> 标签：c++, list, c++11, openframeworks

如果标题不是很明确，我很抱歉，但我会尝试更好地解释它。我对 c++ 不是很熟悉，我是第一次使用 openFrameworks。我正在尝试做一些可能很容易的事情，至少在其他语言中是这样，但我无法做到:(

我有一个视频类，在它里面我有一个对象`list<ofImage> keyFrames;`和几个与之交互的方法，如下所示：

```
void addKeyFrame(ofImage img) {
    if(keyFrames.size() == 0) {
        keyFrames.push_front(img);
    }
    else {
        keyFrames.push_back(img);
    }
}

list<ofImage> * getKeyFrames() {
    list<ofImage> *list = &keyFrames;
    return list;
}

void clearKeyFrames() {
    keyFrames.clear();
} 
```

在其他类中，我有几个 Video 对象，并且我有一个函数用于`addKeyFrame(ofImage img)`填充每个对象的列表。在该函数的最后，如果我打印列表大小它大于零。

在`draw()`函数内部，我迭代每个 Video 对象，并尝试在其 keyFrame 列表中绘制每个图像，但列表始终为空，我只是用图像填充它......我正在使用`getKeyFrames()`函数返回指向列表的指针。如果我只是在另一个函数中将对象添加到它并且如果我验证大小大于零，它怎么可能是空的？如果我尝试调试应用程序，我会感到更加失落，哈哈。

如果您需要更多信息，请告诉我，如果您知道我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:06:24.270

好的，一些小事情：

1-您不应该像这样检查空列表（或任何其他 STL 容器）：

```
if(keyFrames.size() == 0) 
```

这更快，更“时尚”：

```
if(keyFrames.empty()) 
```

* * *

2-您在这里创建了一个不必要的变量：

```
list<ofImage> * getKeyFrames() {
    list<ofImage> *list = &keyFrames;
    return list;
} 
```

你可以这样做：

```
list<ofImage> * getKeyFrames() {
    return &keyFrames;
} 
```

* * *

3-指针不是（大多数时候）C++ 中的最佳解决方案。引用是最常用的替代品，但如果您返回一个迭代器，在 htis 情况下会更好：

```
list<ofImage>::iterator GetBeginIterator() {
    return keyFrames.begin();
} 
```

这样，您可以像使用指针一样使用迭代器，增加它以遍历帧并取消引用它（使用 * 运算符）...

# node.js - 从命令行停止 node.js 程序

> ID：10522532
> 
> 赞同：334
> 
> 时间：2012-05-09T19:05:40.103
> 
> 标签：node.js, command

我有一个侦听端口的简单 TCP 服务器。

```
var net = require("net");

var server = net.createServer(function(socket) {
    socket.end("Hello!\n");
});

server.listen(7777); 
```

我`node server.js`在 Mac 上用 Ctrl + Z 启动它，然后用它关闭它。当我尝试再次运行它时，`node server.js`我收到以下错误消息：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: listen EADDRINUSE
at errnoException (net.js:670:11)
at Array.0 (net.js:771:26)
at EventEmitter._tickCallback (node.js:192:41) 
```

我是否以错误的方式关闭程序？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：413
> 
> 时间：2012-05-09T19:16:53.357

要结束程序，您应该使用`Ctrl`+ `C`。如果你这样做，它会发送`SIGINT`，这允许程序优雅地结束，从它正在侦听的任何端口中解除绑定。

另见： [https ://superuser.com/a/262948/48624](https://superuser.com/a/262948/48624)

* * *

## 回答 #2

> 赞同：367
> 
> 时间：2012-05-09T19:21:46.607

`Ctrl`+`Z`暂停它，这意味着它仍然可以运行。

`Ctrl`+`C`实际上会杀死它。

你也可以像这样手动杀死它：

```
ps aux | grep node 
```

查找进程 ID（左起第二个）：

```
kill -9 PROCESS_ID 
```

这也可能有效

```
killall node 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-09-22T15:17:29.760

或者，您可以在一行中完成所有这些操作：

```
kill -9 $(ps aux | grep '\snode\s' | awk '{print $2}') 
```

您可以将 '\snode\s' 中的节点替换为任何其他进程名称。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2017-05-26T21:48:40.263

# 恢复并终止进程：

[`Ctrl`+`Z`挂起它，这意味着它仍然作为挂起的后台进程运行。](https://superuser.com/questions/262942/whats-different-between-ctrlz-and-ctrlc-in-unix-command-line/262948#262948)

*您现在可能处于终端提示符下...*

1.  发出命令`fg`以在前台恢复进程。

2.  键入`Ctrl`+`C`以正确杀死它。

* * *

## **或者，**您可以像这样手动杀死它：

*（**注意：**以下命令可能需要 root，`sudo ...`您的朋友也是如此）*

```
pkill -9 node 
```

或者，如果您没有 pkill，这可能有效：

```
killall node 
```

或者这个：

```
kill $(ps -e | grep node | awk '{print $1}') 
```

有时该过程会列出自己的 grep，在这种情况下，您需要：

```
kill $(ps -e | grep dmn | awk '{print $2}') 
```

.

* * *

h/t @ruffin 来自对问题本身的评论。我有同样的问题，他的评论帮助我自己解决了这个问题。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2013-07-22T10:12:09.023

你可以输入`.exit` 退出 node js REPL

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2014-02-15T07:54:25.160

如果您以交互方式运行 Node.js（REPL）：

`Ctrl`+`C`将带您回到 > 提示符，然后键入：

```
process.exit() 
```

或仅使用`Ctrl`+ `D`。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2013-06-18T12:53:26.210

`$ sudo killall node`在另一个终端上工作**mac**，但`killall node`不工作：

```
$ killall node
No matching processes belonging to you were found 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2018-07-18T18:26:21.663

在linux上尝试：`pkill node`

在窗户上：

```
Taskkill /IM node.exe /F 
```

或者

```
from subprocess import call

call(['taskkill', '/IM', 'node.exe', '/F']) 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2019-08-17T13:42:18.810

您可以在 localserver kill（此处：8000）中执行以下命令

> [http://localhost:8000/](http://localhost:8000/)杀死 PID(processId):

```
$:lsof -i tcp:8000 
```

它将为您提供以下 TCP 组：

> 命令 PID 用户 FD 类型 设备尺寸/关闭节点名称
> 
> 节点 21521 ubuntu 12u IPv6 345668 0t0 TCP *:8000 (LISTEN)

```
$:kill -9 21521 
```

它将杀死对应于 TCP*:8000 的 processId

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2019-12-08T16:57:49.130

您可以使用**fuser**来完成您想要完成的工作。

为了获取在端口上运行的任务的进程 ID，您可以执行以下操作：

```
fuser <<target_port>>/tcp 
```

假设端口是8888，命令变为：

```
fuser 8888/tcp 
```

要**杀死**在端口上运行的进程，只需添加 -k 开关。

```
fuser <<target_port>>/tcp -k 
```

示例（端口为 8888）：

```
fuser 8888/tcp -k 
```

就是这样！它将关闭侦听端口的进程。我通常在运行我的服务器应用程序之前执行此操作。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-09-22T16:41:06.670

虽然这是一个迟到的答案，但我从[NodeJS 文档](https://nodejs.org/api/repl.html#repl_event_exit)中找到了这个：

> `.exit`当 REPL 通过接收命令作为输入、用户按`<ctrl>-C`两次以发出 SIGINT 信号或通过`<ctrl>-D`在输入流上按以发出“结束”信号来退出 REPL 时，将发出“退出”事件。侦听器回调在没有任何参数的情况下被调用。

总而言之，您可以通过以下方式退出：

1.  输入`.exit`nodejs REPL。
2.  按`<ctrl>-C`两次。
3.  按下`<ctrl>-D`。
4.  `process.exit(0)`意味着从 REPL 中自然退出。如果您想返回任何其他状态，您可以返回一个非零数字。
5.  `process.kill(process.pid)`是在您的代码或 REPL 中使用 nodejs api 杀死的方法。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2019-08-29T06:11:45.880

对于 MacOS

1.  打开终端
2.  运行以下代码并回车

    ```
     sudo kill $(sudo lsof -t -i:4200) 
    ```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-01-31T03:06:12.807

如果你想停止你的服务器`npm stop`或类似的东西。您可以编写杀死服务器进程的代码：

```
require('child_process').exec(`kill -9 ${pid}`) 
```

检查此链接的详细信息： [https ://gist.github.com/dominhhai/aa7f3314ad27e2c50fd5](https://gist.github.com/dominhhai/aa7f3314ad27e2c50fd5)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2017-07-08T18:40:00.207

我添加这个答案是因为对于许多具有生产部署的项目，我们有停止这些过程的脚本，所以我们不必这样做。

管理 Node Server 进程的一种简洁方法是使用`forever`包（来自`NPM`）。

# 例子：

## 永久安装

`npm install forever -g`

## 运行节点服务器

`forever start -al ./logs/forever.log -ao ./logs/out.log -ae ./logs/err.log server.js`

### 结果：

`info: Forever processing file: server.js`

## 关闭节点服务器

`forever stop server.js`

### 结果

`info: Forever stopped process: uid command script forever pid id logfile uptime [0] sBSj "/usr/bin/nodejs/node" ~/path/to/your/project/server.js 23084 13176 ~/.forever/forever.log 0:0:0:0.247`

这将彻底关闭您的服务器应用程序。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-07-06T02:51:20.200

我遇到了一个问题，我有**多个节点服务器**正在运行，我**只想杀死其中一个**并从脚本重新部署它。

注意：此示例位于 Mac 上的 bash shell 中。

为此，我确保我的`node`电话尽可能具体。例如，我不是`node server.js`从应用程序目录调用，而是调用`node app_name_1/app/server.js`

然后我可以使用以下方法杀死它：

`kill -9 $(ps aux | grep 'node\ app_name_1/app/server.js' | awk '{print $2}')`

这只会杀死运行 app_name_1/app/server.js 的节点进程。

如果你运行了`node app_name_2/app/server.js`这个节点进程将继续运行。

如果您决定要杀死它们，则可以`killall node`像其他人提到的那样使用它们。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-10-20T04:32:33.057

迟到的答案，但在 Windows 上，使用 CTRL+ALT+DEL 打开任务管理器然后杀死 Node.js 进程将解决此错误。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-08-07T16:41:41.027

我的用例：在**MacOS**上，通过脚本在**不同端口**上运行/重新运行**多个节点服务器**

 ****运行**：`"cd $PATH1 && node server1.js & cd $PATH2 && node server2.js & ..."`

**停止1**：`"kill -9 $(lsof -nP -i4TCP:$PORT1 | grep LISTEN | awk '{print $2}')"`

停止2，停止3...

**重新运行**：`"stop1 & stop2 & ... & stopN ; run`

有关通过端口查找进程的更多信息：[谁在 Mac OS X 上的给定 TCP 端口上侦听？](https://stackoverflow.com/questions/4421633/who-is-listening-on-a-given-tcp-port-on-mac-os-x)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-06-12T14:35:11.003

对于 Windows，首先使用您的端口号搜索 PID

```
netstat -ano | findStr "portNumber" 
```

之后，杀死任务，确保你在你的“c”驱动器的根目录下[![在此处输入图像描述](../Images/9ecb5ceb244fed376300a6825414a9bc.png)](https://i.stack.imgur.com/xdvYY.png) ，命令将是`taskkill /F /PID your pid`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-04-11T12:44:51.130

如果您使用的是 VS Code 和终端，请先从右侧下拉列表中选择节点，然后执行 Ctrl + C。然后它将起作用

[![在此处输入图像描述](../Images/4547293c81e07198686d49b7fc2295de.png)](https://i.stack.imgur.com/y2r1v.png)

出现提示时按 y。

[![在此处输入图像描述](../Images/61c9402d6890f56c01340be8e66336ae.png)](https://i.stack.imgur.com/8KTys.png)

谢谢**

# javascript - Sprockets：连接 Eco 模板并删除重复的辅助功能

> ID：10522533
> 
> 赞同：1
> 
> 时间：2012-05-09T19:05:48.713
> 
> 标签：javascript, coffeescript, sprockets, eco

我正在使用 Sprockets 编译 Eco 模板并将它们连接为一个 JS 文件。

因此，例如，如果我有这两个模板：

*模板1.jst.eco：*

```
<b>Awesome template 1</b> 
```

*模板2.jst.eco：*

```
<b>Awesome template 2</b> 
```

然后我使用 Sprockets[`require`](https://github.com/sstephenson/sprockets#sprockets-directives)指令将它们包含在一个文件中：

```
# example.coffee
#= require 'templates/template1'
#= require 'templates/template2'

html = JST['templates/template1']()
moreHtml = JST['templates/template2']() 
```

的编译/连接输出`example.js`是（警告，生成的长代码）：

```
(function() {
  this.JST || (this.JST = {});
  this.JST["templates/template1"] = function(__obj) {
    if (!__obj) __obj = {};
    var __out = [], __capture = function(callback) {
      var out = __out, result;
      __out = [];
      callback.call(this);
      result = __out.join('');
      __out = out;
      return __safe(result);
    }, __sanitize = function(value) {
      if (value && value.ecoSafe) {
        return value;
      } else if (typeof value !== 'undefined' && value != null) {
        return __escape(value);
      } else {
        return '';
      }
    }, __safe, __objSafe = __obj.safe, __escape = __obj.escape;
    __safe = __obj.safe = function(value) {
      if (value && value.ecoSafe) {
        return value;
      } else {
        if (!(typeof value !== 'undefined' && value != null)) value = '';
        var result = new String(value);
        result.ecoSafe = true;
        return result;
      }
    };
    if (!__escape) {
      __escape = __obj.escape = function(value) {
        return ('' + value)
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;');
      };
    }
    (function() {
      (function() {

        __out.push('<b>Awesome template 1</b>\n');

      }).call(this);

    }).call(__obj);
    __obj.safe = __objSafe, __obj.escape = __escape;
    return __out.join('');
  };
}).call(this);
(function() {
  this.JST || (this.JST = {});
  this.JST["templates/template2"] = function(__obj) {
    if (!__obj) __obj = {};
    var __out = [], __capture = function(callback) {
      var out = __out, result;
      __out = [];
      callback.call(this);
      result = __out.join('');
      __out = out;
      return __safe(result);
    }, __sanitize = function(value) {
      if (value && value.ecoSafe) {
        return value;
      } else if (typeof value !== 'undefined' && value != null) {
        return __escape(value);
      } else {
        return '';
      }
    }, __safe, __objSafe = __obj.safe, __escape = __obj.escape;
    __safe = __obj.safe = function(value) {
      if (value && value.ecoSafe) {
        return value;
      } else {
        if (!(typeof value !== 'undefined' && value != null)) value = '';
        var result = new String(value);
        result.ecoSafe = true;
        return result;
      }
    };
    if (!__escape) {
      __escape = __obj.escape = function(value) {
        return ('' + value)
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;');
      };
    }
    (function() {
      (function() {

        __out.push('\n<b>Awesome template 2</b>\n');

      }).call(this);

    }).call(__obj);
    __obj.safe = __objSafe, __obj.escape = __escape;
    return __out.join('');
  };
}).call(this);
(function() {
  var html, moreHtml;

  html = JST['templates/template1']();

  moreHtml = JST['templates/template2']();

}).call(this); 
```

这个 JS 工作正常，但问题是它复制了 Eco 为每个包含的模板生成的所有辅助模板渲染函数。在具有少量模板的项目中，不难想象这些辅助功能的代码可以超过实际模板的代码。

有没有办法配置 Srpockets/Eco 以便它重新使用辅助功能而不是复制它们？

# eclipse-rcp - 属性选择更改后未更新属性视图

> ID：10522535
> 
> 赞同：0
> 
> 时间：2012-05-09T19:05:52.333
> 
> 标签：eclipse-rcp

我正在尝试以编程方式选择另一个*EditPart*，它的工作时间很长。
但是相应的视图没有更新。

使用调试器，我发现系统获得了正确的属性对象，但属性视图中没有显示值等。
我使用*UndoablePropertySheetPage*`selectionChanged`中的方法。

 *```
propertyPage.selectionChanged(this, new StructuredSelection(editPart)); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:08:28.403

解决方法很简单，在查看器中选中元素后，可以使用*UndoablePropertySheetPage*`refresh`提供的方法。*

# facebook - 在本地环境中设置 Heroku/Facebook

> ID：10522537
> 
> 赞同：1
> 
> 时间：2012-05-09T19:05:52.850
> 
> 标签：facebook, heroku, wampserver

我尝试在我的本地环境（WampServer、Windows Xp）上设置 Heroku/Facebook，我已将它放在我的 httpd.config 文件中：

```
 <VirtualHost 127.0.0.1>
        DocumentRoot "C:\Documents and Settings\name\fold/"
        ServerName fold.local
        SetEnv FACEBOOK_APP_ID code
        SetEnv FACEBOOK_SECRET code
    </VirtualHost> 
```

但是当我尝试访问 fold.local 时，我得到**403 Forbidden**我正在关注这篇文章：[https](https://devcenter.heroku.com/articles/facebook) ://devcenter.heroku.com/articles/facebook 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:09:28.220

常见的解决方案是注册两个 Facebook 应用程序 ID——一个用于本地开发，另一个用于您的公共站点。在本地系统上的 HOSTS 文件中添加一个条目，以将“DEV”应用 URL 指向您的本地站点

例如：将您的“开发”应用注册到 URL：[http ://dev.mysite.com](http://dev.mysite.com)

然后，在您的 HOSTS 文件中为指向 localhost/127.0.0.1 的 URL 添加一个条目

# magento - /var/resource_config.json 的用途

> ID：10522539
> 
> 赞同：17
> 
> 时间：2012-05-09T19:06:22.253
> 
> 标签：magento

我试图弄清楚文件 /var/resource_config.json 在 Magento 中的用途。它似乎可能是配置的缓存，但看不到它在源代码中的哪个位置被创建和/或更新。

我正在为 EE1.12 构建设置 local/dev/staging/prod 环境，并想弄清楚我是否可以安全地将它从我的存储库中排除，或者我是否需要编写一些更新脚本以进行部署。

也许管理员中的闪存图像上传器创建它？

有什么想法或方向吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-09T19:37:42.653

这是“替代媒体存储”系统的配置缓存文件。这是一个系统，其中对媒体文件的请求通过 路由`get.php`，并允许您将媒体存储在数据库中而不是文件系统中。（这可能过于简单化，因为我自己从未使用过该功能）

您可以安全地（**并且应该**）将此文件从部署/源代码控制中排除，因为它是一个缓存文件，将根据需要自动生成。有关详细信息，请参阅根级别中的以下代码块`get.php`。

```
if (!$mediaDirectory) {
    $config = Mage_Core_Model_File_Storage::getScriptConfig();
    $mediaDirectory = str_replace($bp . $ds, '', $config['media_directory']);
    $allowedResources = array_merge($allowedResources, $config['allowed_resources']);

    $relativeFilename = str_replace($mediaDirectory . '/', '', $pathInfo);

    $fp = fopen($configCacheFile, 'w');
    if (flock($fp, LOCK_EX | LOCK_NB)) {
        ftruncate($fp, 0);
        fwrite($fp, json_encode($config));
    }
    flock($fp, LOCK_UN);
    fclose($fp);

    checkResource($relativeFilename, $allowedResources);
} 
```

笼统地说，Magento 的文件夹[与 *nix](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)[文件夹](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)`var`的用途相同[`var`](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)

> 可变文件——在系统正常运行期间内容预计会不断变化的文件——例如日志、假脱机文件和临时电子邮件文件。有时一个单独的分区

并且应该与特定系统隔离（即不是部署的一部分）

# jquery - 如何拥有相对但非流动的布局

> ID：10522543
> 
> 赞同：0
> 
> 时间：2012-05-09T19:06:41.927
> 
> 标签：jquery, css

我是 CSS 的新手，只是想知道是否有可能有一个可以通过浏览器屏幕大小修改但不是 Liquid 的相对布局设计。

例如，如果用户最小化屏幕页面仍然保持与全屏相同的布局。我不确定这是可能的，但我所拥有的是一个相对布局，它可以在全屏格式下完美运行，但是当用户最小化或调整页面大小时，所有图片和文本也会最小化，这对于 img 等元素来说还不错（ s) 但它也会影响我的导航菜单，当我调整页面大小时它看起来很糟糕。有没有办法可以阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:12:05.333

您可以使用 CSS3 媒体查询。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:11:26.650

您似乎正在尝试将容器的大小保持在最小宽度，这样它们就不会与浏览器一起调整大小。为了实现这一点，您可以使用**min-width** CSS 属性。

```
<!-- Document -->
<div id="site-wrapper"></div>
<!-- Document --> 
```

该属性应该这样使用

```
#site-wrapper { min-width: 1000px; /*For example*/ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:15:18.493

您所说的称为“响应式设计”。

如果你想要一个很好的例子（也只是一个很好的起点），请查看[http://twitter.github.com/bootstrap/上的 Bootstrap](http://twitter.github.com/bootstrap/)

看看他们顶部的菜单，看看当你缩小视口（调整窗口大小）时会发生什么。

编辑：

我想他要问的是，他是否可以让它“调整”宽度，但防止元素挤压高度。他的 JSFiddle 使用的是百分比高度。

```
.row_1
{
    background-color: green;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height:30px;
    cursor: pointer;
    z-index: 20;
}
.row_2
{
    background-color: gray;
    position: relative;
    width: 100%;
    height:100%;
    padding: 30px 0px;
}

.row_3 {
    background-color: black;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height:30px;
    z-index: 20;
    color: #fff;
} 
```

Here's an updated JSFiddle that may help?

[http://jsfiddle.net/xBaTN/](http://jsfiddle.net/xBaTN/)

# parsing - 如何删除 mbox 格式的电子邮件邮箱的重复项（去重）？

> ID：10522544
> 
> 赞同：3
> 
> 时间：2012-05-09T19:06:43.093
> 
> 标签：parsing, email, deduplication, mbox

我有一个 mbox 邮箱，其中包含重复的邮件副本，它们的不同之处仅在于它们的“X-Evolution：”标题。

我想以尽可能快速和简单的方式删除重复的。好像这已经写好了，但我还没有找到它，虽然我看过 Python 邮箱模块、各种 perl mbox 解析器、formail 等等。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T19:35:13.110

这是一个小脚本，我用它：

```
#!/bin/bash
IDCACHE=$(mktemp -p /tmp)
formail -D $((1024*1024*10)) ${IDCACHE} -s
rm ${IDCACHE} 
```

邮箱需要通过它进行管道传输，同时将对其进行重复数据删除。

`-D $((1024*1024*10))`设置一个 10 MB 的缓存，这是对我一整年的邮件进行重复数据删除所需数量的 10 倍以上。YMMV，所以相应地调整它。将其设置得太高会导致一些性能损失，将其设置为低会使其重复。

`formail`是`procmail`实用程序包`mktemp`的一部分，是`coreutils`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:08:01.060

我没有足够详细地查看 formail（procmail 的一部分）。它**确实**有这样一个选项，如以下地方所述：[http](http://hints.macworld.com/comment.php?mode=view&cid=115683) ://hints.macworld.com/comment.php?mode=view&cid=115683和[http://us.generation-nt.com/answer/deleting-重复邮件消息帮助172481881.html](http://us.generation-nt.com/answer/deleting-duplicate-mail-messages-help-172481881.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T08:44:17.357

“formail -D”和“reformail -D”每次执行只能处理一封电子邮件。每封邮件在处理前都需要先从 mbox 中分离出来。我使用 maildrop 中的重新邮寄，因为它仍在积极开发中。

1.  删除旧的 idcache、tmpmail、nmbox
2.  运行 dedup.sh 。
3.  nmbox 是删除了重复消息的输出。

**去重**

```
#! /bin/sh
# $1 = mbox, thunderbird mailbox
# wmbox.sh is called for each mail.

cat $1 | reformail -s ./wmbox.sh 
```

**wmbox.sh**

```
#! /bin/sh
# stdin: a email
# called by dedup.sh

TM=tmpmail
if [ -f $TM ] ; then
   echo error!
   exit 1
fi
cat > $TM
# mbox format, each mail end with a blank line
echo "" >> $TM

cat $TM | reformail -D 99999999 idcache

# if this mail isn't a dup (reformail return 1 if message-id is not found)
if [ $? != 0 ]; then
   # each mail shall have a message-id
   if grep -q -i '^message-id:' $TM; then
      cat tmpmail >> nmbox
   fi
fi

rm $TM 
```

# android - 方向更改时的 AlertDialog 崩溃

> ID：10522556
> 
> 赞同：0
> 
> 时间：2012-05-09T19:07:35.537
> 
> 标签：android, android-alertdialog, orientation-changes

关于这个主题有很多线程，他们的所有建议都不能解决问题。这种情况更加复杂，因为后台服务正在将数据输入到 AlertDialog 中。该服务使用 LocalBroadcastManager 将 Intent 传递给包含 onCreateDialog 回调的主活动。数据来得很快。

我尝试在 onPause() 中调用 removeDialog，将上下文设置为 null，以便线程在 null 时不会调用它，并且在 onStart 中，我将新上下文传递给向广播接收器发出信号的线程。日志消息显示删除了被调用的对话框。更改屏幕方向后，showDialog() 方法现在触发 onCreateDialog() 回调。当该回调发出信号时，findViewById() 按预期返回 null，因为对话框已被删除（据说），但我仍然得到那个可怕的错误

“ **java.lang.IllegalStateException: 指定的孩子已经有一个父母。您必须先在孩子的父母上调用 removeView()。** ”

（如何在 AlertDialog 上调用“removeView”也是我找不到答案的问题，而且这个论坛中的其他人也没有找到答案！）

我能想到的唯一一件事是广播事件被排队并且具有错误的上下文。也许有一种方法可以清除所有指向广播接收器的意图？

这是 onCreateDialog 的代码。图形视图位于“waveForm.get(id)”中。它确实可以很好地显示图表（不是我想要的连续显示），但是一旦改变方向，它就死了！

```
protected Dialog onCreateDialog(int id)
{
    Log.d(TAG, "Alert Dialog 'onCreateDialog' method has been called with id " + id);
    if(this.findViewById(id) != null)
    {
        Log.d(TAG, "Alert Dialog view exists!");
        return null;
    }

    switch(id)
    {
        case 0:
        Builder bldr = new AlertDialog.Builder(this);
        Dialog alert = bldr.setView(waveForm.get(id)).setNegativeButton("Dismiss " + id, 
                new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int id)
                    {
                        dialog.cancel();
                    } 
                }).create();

        alert.getWindow().setLayout(LayoutParams.WRAP_CONTENT, waveForm.get(id).getCurrentHeight());
        return alert;

        case 1:
        Builder bldr1 = new AlertDialog.Builder(this);
        Dialog alert1 = bldr1.setView(waveForm.get(id)).setNegativeButton("Dismiss " + id, 
                new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int id)
                    {
                        dialog.cancel();
                    } 
                }).create();

        alert1.getWindow().setLayout(LayoutParams.WRAP_CONTENT, waveForm.get(id).getCurrentHeight());
        return alert1;

        case 2:
        Builder bldr2 = new AlertDialog.Builder(this);
        Dialog alert2 = bldr2.setView(waveForm.get(id)).setNegativeButton("Dismiss " + id, 
                new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int id)
                    {
                        dialog.cancel();
                    } 
                }).create();

        alert2.getWindow().setLayout(LayoutParams.WRAP_CONTENT, waveForm.get(id).getCurrentHeight());
        return alert2;

    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:09:48.963

你能发布你的代码吗？它可能是您附加到对话框的视图，而不是对话框本身。确保在将视图从当前父级中删除之前不要将视图添加到您的对话框中（如果已附加）。

# javascript - 如何使用递归 Backbone.js 视图防止多次偶数触发？

> ID：10522562
> 
> 赞同：1
> 
> 时间：2012-05-09T19:07:59.040
> 
> 标签：javascript, backbone.js

我有一个带有嵌套列表的应用程序，我正在尝试使用主干进行管理。每个单独`<li>`的元素都有一个视图，但每个列表元素都有自己的嵌套`<ul>`标签，它有自己的实例化视图。这是一个例子：

**HTML**

```
<ul class='elements'>
  <li class='element'>
     <div>
       <a class='edit-element'>Edit</a>
     </div>
     <ul class='elements'>
       <li class='element'>
         <div>
           <a class='edit-element'>Edit</a>
         </div>
       </li>
     </ul>
   </li>
</ul> 
```

**JavaScript**

```
element_view = Backbone.view.extend({
  events: {
    'click .edit-element' : 'edit_element'
  },
  edit_element : function(event) {
    //code to handle editing of an element
  } 
}); 
```

问题是，如果我单击子元素，两个视图都会触发 edit_element 事件，这有几个原因是有问题的。我该如何构造它，以便当我单击 child 中的链接时`<li>`，它会为此触发，而不是包含它的`<li>`任何s？`<li>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:39:14.113

Backbone 的事件处理程序只是普通的旧 jQuery 事件处理程序，因此您可以使用以下方式以通常的方式停止传播[`stopPropagation`](http://api.jquery.com/event.stopPropagation/)：

```
edit_element: function(event) {
    event.stopPropagation()
    //...
} 
```

演示：http: [//jsfiddle.net/ambiguous/Yb8rg/1/](http://jsfiddle.net/ambiguous/Yb8rg/1/)

或者通过返回`false`：

```
edit_element: function(event) {
    //...
    return false;
} 
```

演示：http: [//jsfiddle.net/ambiguous/QvaGM/1/](http://jsfiddle.net/ambiguous/QvaGM/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:13:39.580

除了已经说过的“亩太短”之外，我可以想到三种方法来解决这个问题。按照我个人的喜好顺序：

1.  使用更具体的选择器。在这种特殊情况下，`click .edit-element:first`可能会成功，因为编辑按钮位于子列表的编辑按钮之前。
2.  不要使用 Backbone`events`集合，而是直接绑定到您感兴趣的元素。因此，在渲染子列表之前，请执行类似`this.$(".edit-element").click(_.bind(myClickHandler, this))`.
3.  将代码放入处理函数中以查看单击了哪个元素，并查看它是否是您感兴趣的元素。此代码会有点繁琐，我认为这不是一个特别好的解决方案，所以没有示例代码。:)

# powershell - 在 PowerShell 中转换为字符串

> ID：10522567
> 
> 赞同：0
> 
> 时间：2012-05-09T19:08:24.533
> 
> 标签：powershell

考虑：

```
$ProfilePath = "HKLM:\software\microsoft\windows NT\currentversion\profilelist"
$ProfileList = ls -path $ProfilePath
foreach ($guid in $ProfileList)
{
    $gpath = $guid -replace "HKEY_LOCAL_MACHINE","HKLM:"
    $userpath = Get-ItemProperty -path "$gpath" | select ProfileImagePath
    $SUserName = [system.string]::$userpath
    $username = $userpath -replace "ProfileImagePath=C:\\Users\\",""
} 
```

目前`$userpath = @{ProfileImagePath=C:\Windows\ServiceProfiles\NetworkService`. 我需要把它变成一个字符串，以便进行比较。我怎样才能让它转换为字符串？

我尝试`$SUserName`生成 a`blank`或`null string`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:30:30.297

也许我不明白你的问题。

但我认为你正在寻找这个：

```
$userpath.ProfileImagePath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:56:53.993

您可以使用以下命令将路径作为字符串获取：

```
$ProfilePath = "HKLM:\software\microsoft\windows NT\currentversion\profilelist\*"
Get-ItemProperty $ProfilePath | foreach {$_.ProfileImagePath} 
```

或使用 split-path 仅提取用户名

```
Get-ItemProperty $ProfilePath | foreach {Split-Path $_.ProfileImagePath -Leaf} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T15:31:56.177

尝试这个：

```
 $key = 'HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList\*'
 $key1 = (Get-ItemProperty -Path $key -Name ProfileImagePath).ProfileImagePath 
```

# c# - 确定文本文件编码模式

> ID：10522570
> 
> 赞同：2
> 
> 时间：2012-05-09T19:08:32.047
> 
> 标签：c#, utf-8, character-encoding, ascii, utf-16

我正在尝试创建一种可以检测文本文件的编码模式的方法。我知道那里有很多，但我确定我的文本文件是`ASCII`,`UTF-8`或`UTF-16`. 我只需要检测这三个。有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:21:45.537

首先，以二进制模式打开文件并将其读入内存。

对于 UTF-8（或 ASCII），请进行验证检查。您可以使用解码文本`Encoding.GetEncoding("UTF-8", EncoderFallback.ExceptionFallback, DecoderFallback.ExceptionFallback).GetString(bytes)`并捕获异常。如果没有得到，则数据是有效的 UTF-8。这是代码：

```
private bool detectUTF8Encoding(string filename)
{
    byte[] bytes = File.ReadAllBytes(filename);
    try {
        Encoding.GetEncoding("UTF-8", EncoderFallback.ExceptionFallback, DecoderFallback.ExceptionFallback).GetString(bytes);
        return true;
    } catch {
        return false;
    }
} 
```

对于 UTF-16，检查 BOM（`FE FF`或`FF FE`，取决于字节顺序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:11:40.060

使用 StreamReader 识别编码。

例子：

```
using(var r = new StreamReader(filename, Encoding.Default))
{
    richtextBox1.Text = r.ReadToEnd();
    var encoding = r.CurrentEncoding;
} 
```

# asp.net-mvc - 数据库优先添加控制器未获取当前模型列表

> ID：10522572
> 
> 赞同：1
> 
> 时间：2012-05-09T19:08:35.900
> 
> 标签：asp.net-mvc, entity-framework

我最近从我的数据库优先生成的模型（asp.net mvc4）中删除并添加了一些表。

现在，当我尝试创建一个控制器（通过上下文菜单添加控制器），并尝试从可用模型列表中选择新的“客户端”模型时，下拉列表不同步，显示一些已删除的旧模型仍然，但没有显示任何新添加的模型。（下面的截图）

我可以做些什么来更新这个模型列表以便我可以继续？我试过重启VS，但问题仍然存在。

谢谢！

![截屏](../Images/80009058d5d21d9798f04dc8a777a96c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:11:00.547

您必须重建项目才能显示任何新类。

# git - 使用 git 但不使用 git 子模块在子目录中安装 wordpress

> ID：10522574
> 
> 赞同：3
> 
> 时间：2012-05-09T19:08:40.197
> 
> 标签：git, wordpress, subtree

我正在使用 git（基于 Mark Jaquith 的 Wordpress Local Dev 帖子）在本地主机上工作以实现 wordpress 工作流程。我的文件结构看起来像这样

## 本地开发

*   .git
*   索引.php
*   .htaccess
*   wp-config.php
*   local-config.php（忽略）
*   内容/主题/
*   内容/插件/
*   内容/上传/（忽略）
*   核心/（wordpress核心）

我想要做的是从 github 获取最新的 wordpress 并将其放入 core/ 以便升级过程看起来像

```
rm -rf wordpress
svn export http:// core.svn.wordpress.org/trunk/ wordpress
git add --all wordpress
git commit -m 'Upgrade WordPress' wordpress
git push origin master 
```

但是我花了很多时间弄清楚如何将 Wordpress 放在自己的目录中，而无需

*   使用svn
*   使用 git pull 进入 local.dev 并手动将文件移动到 core/ 中。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:00:20.907

## 解决方案

正如安德鲁建议的那样，答案是使用子树合并。

### 创建个人 WordPress 存储库

**我将其**用作远程 wordpress 存储库 - diff wordpress 版本的差异分支

```
#Create new repo as the wordpress parent
mkdir wprepo && cd wprepo
git init
touch README
git add .
git commit -m 'initial commit'

#Add the github mirror as a remote repo
git remote add wordpress git://github.com/markjaquith/WordPress.git

#Get the tags
git fetch -t wordpress

#Merge with the required tag
git merge --squash --no-commit -s recursive -X theirs tags/3.3.2
git commit -m '3.3.2' 
```

### 本地开发

回到我的本地机器上，我创建了一个 local.dev/ 并将我的远程开发存储库（使用 git --bare init 在 Web 服务器上创建）克隆到其中。然后我使用子树合并来添加 wordpress 存储库。

```
#Create new repo as the wordpress parent
mkdir local.dev && cd local.dev

#Clone remote development repo
git clone ssh://gituser@remote_server_domain.com/home/gituser/gitrepo .

#Merge remote wordpress repo into core/
remote add -f core ssh://gituser@remote_server_domain.com/home/gituser/wprepo
git merge -s ours --no-commit core/master
git read-tree --prefix=core/ -u core/master
git commit -m 'merging wprepo into core/'

#Push changes to the remote dev repo
git push origin master 
```

可能有一种更简单的方法可以做到这一点（如果你知道，请告诉我。）但它对我有用。步骤从以下来源拼凑而成。

* * *

### 来源

1.  [http://jon.smajda.com/2011/07/17/wordpress-and-git/](http://jon.smajda.com/2011/07/17/wordpress-and-git/)

2.  [http://joemaller.com/990/a-web-focused-git-workflow/](http://joemaller.com/990/a-web-focused-git-workflow/)

3.  [http://jasonkarns.com/blog/merge-two-git-repositories-into-one/](http://jasonkarns.com/blog/merge-two-git-repositories-into-one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:49:14.930

听起来您想使用子树合并： http: [//git-scm.com/book/ch6-7.html](http://git-scm.com/book/ch6-7.html)

# c++ - 什么时候编译器不能使用 RVO 或 NRVO？

> ID：10522585
> 
> 赞同：6
> 
> 时间：2012-05-09T19:09:30.987
> 
> 标签：c++, move

[当编译器不能使用RVO](http://en.wikipedia.org/wiki/Return_value_optimization)和[NRVO](http://www.efnetcpp.org/wiki/Return_value_optimization#Named_RVO)时，移动语义会很有用。但是在什么情况下编译器不能使用这些特性呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T21:15:14.480

答案是它取决于编译器和情况。例如，控制流分支可能会混淆优化器。[维基百科](http://en.wikipedia.org/wiki/Return_value_optimization)给出了这个例子：

```
#include <string>
std::string f(bool cond = false) {
  std::string first("first");
  std::string second("second");
  // the function may return one of two named objects
  // depending on its argument. RVO might not be applied
  return cond ? first : second;
}

int main() {
  std::string result = f();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T21:13:07.693

好吧，与其说编译器是否可以使用 RVO，不如说它是否可以避免复制构造。

考虑：

```
struct Blah
{
    int x;
    Blah( int const _x ): x( _x ) { cout << "Hum de dum " << x << endl; }
};

Blah foo()
{
    Blah const a( 1 );
    if( fermatWasRight() ) { return Blah( 2 ); }
    return a;
} 
```

在此处获取副作用（构造函数的输出）乍一看与`a`在调用者提供的存储中直接构造非常不兼容。但是如果编译器足够聪明，那么它可以注意到销毁这个对象是一个空操作。更一般地说，对于任何特定情况，如果编译器足够聪明，那么无论我们多么偷偷地设计代码，它都可以设法避免复制操作。

虽然我不确定正式的形式，但上述情况，对象中有更多的有效负载，因此复制会更昂贵，这是移动语义可以提供帮助的一种情况，因此无论编译器的智能如何，都可以保证优化（或不）。

# android - ExpandableListViews 中的进度条消失

> ID：10522589
> 
> 赞同：1
> 
> 时间：2012-05-09T19:09:46.430
> 
> 标签：android, expandablelistview

我有一个 ExpandableListView，每个组和孩子都有一个图形、文本和一个进度条。它是任务和子任务的概述。问题是，每当我单击其中一个组时，所有进度条都会消失。我尝试了一些方法，例如将序列化对象放入 savedInstanceState 中，但没有奏效。我希望有办法解决这个问题。

有趣的事实是，在 SDK16 下没有这样的行为，只有在 SDK10 中:(

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.overview);

    appState = ((AutoBauLogApp) getApplicationContext());
    Bundle extras = getIntent().getExtras();
    // get selected field and get data
    final int position = extras.getInt("position");
    Field curField = appState.getModel().getFieldArray().get(position);

    // name of field
    setTextView(curField, position);
    // progressbar
    // TODO remove test data 80
    curField.setTargetProgress(80);
    setProgressBar(curField);
    // list for IVehicles
    setIVehicleList(curField);
    // map button
    // setMapButton(curField, position);

    // Retrive the ExpandableListView from the layout
    ExpandableListView listView = (ExpandableListView) findViewById(R.id.listView);

        }

    adapter = new ExpandableListAdapter(this, new ArrayList<Task>(), new ArrayList<ArrayList<Task>>());

    // Set this blank adapter to the list view
    listView.setAdapter(adapter);
    fillListWithData();

    ViewGroup.LayoutParams params = listView.getLayoutParams();
    params.height = curField.getAllTasks().size() * 70;
    listView.setLayoutParams(params);
    listView.requestLayout();
} 
```

我很感谢每一个答案:)

* * *

这是适配器代码：

```
import java.util.ArrayList;

import kit.edu.AutoBauLog.R;
import kit.edu.AutoBauLog.storage.Task;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;

public class ExpandableListAdapter extends BaseExpandableListAdapter{
    @Override
    public boolean areAllItemsEnabled() {
        return true;
    }

    private Context context;
    private ArrayList<Task> groups;
    private ArrayList<ArrayList<Task>> children;

    public ExpandableListAdapter(Context context, ArrayList<Task> groups, Arra    yList<ArrayList<Task>> children) {
        this.context = context;
        this.groups = groups;
        this.children = children;
    }

    /**
     * A general add method, that allows you to add a Vehicle to this list
     * 
     * Depending on if the category opf the vehicle is present or not, the corr    esponding item will either be added to an
     * existing group if it exists, else the group will be created and then the item will     be added
     * 
     * @    param vehicle
     */    
    public void addItem(ArrayList<Task> tasks) {
        for (int i = 0; i < tasks.size(); i++) {
            this.groups.add(tasks.get(i));
            this.children.add(tasks.get(i).getSubtasks());
        }
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return children.get(groupPosition).get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    // Return a child view. You can load your custom layout here.
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView,
            ViewGroup parent) {
        Task task = (Task) getChild(groupPosition, childPosition);
        if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(R.layout.child_layout, null);
        }
        setLayout(convertView, task);
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return children.get(groupPosition).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return groups.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    // Return a group view. You can load your custom layout here.
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    Task task = (Task) getGroup(groupPosition);
    if (convertView == null) {
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.group_layout, null);
    }
    setLayout(convertView, task);
    return convertView;
}

private void setLayout(View convertView, Task task) {

    convertView.invalidate();
    convertView.requestLayout();
    TextView tv = (TextView) convertView.findViewById(R.id.taskName);
    tv.setText(task.getName() + " - " + task.getDescription());

    ProgressBar pB = (ProgressBar) convertView.findViewById(R.id.adapterProgressBar);
    if (task.getProgressState() != null) {
        Drawable color = null;
        switch (task.getProgressState()) {
        case GOOD:
            color = (Drawable) convertView.getResources().getDrawable(R.drawable.progresscolor_good);
            break;
        case OK:
            color = (Drawable) convertView.getResources().getDrawable(R.drawable.progresscolor_ok);
            break;
        case BAD:
            color = (Drawable) convertView.getResources().getDrawable(R.drawable.progresscolor_bad);
            break;
        }
        pB.setProgressDrawable(color);
    }
    pB.setSecondaryProgress(task.getTargetProgress());
    pB.setProgress(task.getProgress());

    ImageView iV = (ImageView) convertView.findViewById(R.id.iconProgressAdapter);
    // set icons
    if (!task.getWorkingStatus()) {
        iV.setImageResource(R.drawable.sleeping);
    } else {
        iV.setImageResource(R.drawable.gear);
    }
}

@Override
public boolean hasStableIds() {
    return true;
}

@Override
public boolean isChildSelectable(int arg0, int arg1) {
    return true;
}
} 
```

# html - 在 HTML 中，使用 div 比使用表格有什么优势？

> ID：10522595
> 
> 赞同：2
> 
> 时间：2012-05-09T19:10:08.917
> 
> 标签：html, html-table

在从事后端算法和分析工作多年后，我最近被迫做一些“HTML 工作”。（你们现在有一个叫做 jQuery 的东西，对吗？） 无论如何，当我以前做 HTML 的时候（在 XHTML 时代之前），表格是非常非常普遍的。现在，我看到大量支持“div”和诸如“table-less！”之类的敬语。为了赶上我错过的年份，div 比表格更受欢迎的原因是什么？【我最近尝试做一个简单的两列表格（66%,33%）到div中，瘀伤还是新鲜的。]

我意识到这个问题可能是主观的，因此作为一个特定的子问题：**什么是呈现下表的简单而简洁的基于 div 的 HTML**：

```
<table>
      <tr>
         <td width="33%">Name</td>
         <td width="67%">Description</td>
     </tr>
     <tr>
         <td>National Hockey League</td>
         <td>A much longer paragraph about the league</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T19:12:20.390

表格不应用于页面布局，因为它们是：

*   渲染缓慢，因为浏览器需要下载大部分（如果不是全部）表格才能正确渲染

*   它们需要比非表格布局更多的 HTML，这意味着加载和渲染速度较慢以及带宽使用量增加

*   维护它们可能是一场噩梦，因为它们会很快变得复杂

*   他们可以破坏文本复制

*   它们会对屏幕阅读器产生负面影响，并可能使某些用户无法访问您的锥体\帐篷

*   它们不如使用适当的语义标记灵活

*   它们从未打算用于页面布局

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:18:03.850

如果您要呈现表格数据，请务必使用表格 - 这就是它们的用途。您的示例可能符合条件！但是，不要使用表格来创建页面结构，因为 John Conde 的回答中提供了许多原因。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:37:51.903

符合现代 HTML 标准；表格只能用于显示表格数据； [http://webdesign.about.com/od/tables/a/aa122605.htm](http://webdesign.about.com/od/tables/a/aa122605.htm)

# iphone - 依次改变UIImageView中的图片

> ID：10522604
> 
> 赞同：0
> 
> 时间：2012-05-09T19:10:47.597
> 
> 标签：iphone, objective-c, ios

我想做一些类似动画的东西。

我有四个 UIImageView（名称：IW1、IW2、IW3、IW4）我想在 image1 上更改 IW1 中的图像，然后在 image2 上更改图像，然后在 image1 上更改 IW2 中的图像，然后在 image2 上更改图像，然后在 image1 上更改 IW3 中的图像和下一个 image2，然后在 image1 上更改 IW4 中的图像，然后在 image2 上更改下一个图像。

不幸的是，当我尝试这样做时，我唯一能做的就是同时更改所有 UIImageViews 中的图像，但我想按顺序进行。

有人会帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:45:30.157

我会这样做

**头部接口**

```
int j;
int i;

UIImageView *imgV1;
UIImageView *imgV2;
UIImageView *imgV3;
UIImageView *imgV4;

UIImage *img1;
UIImage *img2;

NSArray *views;
NSArray *imgs; 
```

**执行**

```
- (void)viewDidLoad{
    i=0;
    j=0;
    views = [[NSArray alloc] initWithObjects:imgV1, imgV2, imgV3, imgV4, nil];
    imgs = [[NSArray alloc] initWithObjects:img1, img2, nil];
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeImage) userInfo:nil repeats:YES];
}

-(void)changeImage{
    UIImageView *imageView = [views objectAtIndex:j];
    UIImage *image = [imgs objectAtIndex:i];
    imageView.image = image;
    i++;
    if(i==2){
        i=0;
        j++;
        if(j==4)
            j=0;
    }
} 
```

希望这会有所帮助（我没有尝试过）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:44:46.113

```
- (void)runSwitchImages
{
    [UIView animateWithDuration:2 delay:2 options:UIViewAnimationCurveEaseInOut animations:^{
        //Animate Image Change Here
    } completion:^(BOOL finished) {
        //When The Image is done animating it will go here

    }];
} 
```

您可以使用类似的方法进行系列更改。您可以为每个图像创建另一个这些函数，并让它们依次调用。或者将函数更改为递归。

如果你想让它继续改变我们一个 NSTimer 来调用这个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:19:20.340

在某处调用它

```
[self performSelector:@selector(changeImage:) withObject:yourImageView afterDelay:1] 
```

延迟 1 秒后调用它

```
-(void)changeImage:(UIImageView *)yourImageView
{
     yourImageView.image = yourImage;
} 
```

# sql - 为什么 SQL Server 中的 CONVERT string to VARBINARY 只转换第一个字符？

> ID：10522605
> 
> 赞同：10
> 
> 时间：2012-05-09T19:10:53.690
> 
> 标签：sql, nlog, varchar, varbinary

我正在使用 NLog 登录我的应用程序，作为其中的一部分，我们正在记录客户编号，这是 C# 中的字符串和数据库中的 varbinary(32)。我为此特定参数使用以下 SQL 代码。SQL 语句的其余部分工作正常：

```
CONVERT(varbinary(32), @CustNumber) 
```

和以下 NLog 参数：

```
<parameter name="@CustNumber" layout="${event-context:item=CustNumber}" /> 
```

以及 C# 中的以下代码添加 Nlog 参数：

```
myEvent.Properties.Add("CustNumber", custNumber); 
```

由于某种原因，实际表中存储的值只是原始客户编号字符串的第一个字符。我进行了双重和三重检查，以确保在将字符串发送到数据库之前我没有截断它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T19:40:54.323

原因是当您插入时，您正在将 Unicode (nvarchar(xx)) 字符串转换为 varbinary。然后，当您选择时，您将转换为 varchar(xx)。如果您转换为 nvarchar(xx) 它将正常工作。

例如：

*   插入“这是一个测试”作为 varbinary(30) 会导致 0x7468697320697320612074657374。

*   插入 N'this is a test' 作为 varbinary(30) 会导致 0x74006800690073002000690073002000610020007400650073007400。

因此，当您转换回来时，如果您指定 varchar(30)，则第一个 00 将截断字符串。

这对我来说很好：

```
delete from Table_2

insert Table_2 (Test) values( CONVERT(varbinary(30), N'this is a test') ) 
select * from Table_2
select CONVERT(nvarchar(30), test) from Table_2 
```

这也是

```
delete from Table_2

insert Table_2 (Test) values( CONVERT(varbinary(30), 'this is a test') )
select * from Table_2
select CONVERT(varchar(30), test) from Table_2 
```

# python - 我的文本框在 Tkinter 中缩小了

> ID：10522607
> 
> 赞同：0
> 
> 时间：2012-05-09T19:11:00.373
> 
> 标签：python, tkinter

这是我的 DocSearchUI，较大框架的一部分`main`

```
class DocSearchUI(Frame):
    def __init__(self, parent):
         Frame.__init__(self, parent)
         self.initUI()

    def initUI(self):
         self.columnconfigure(3, weight=1)
         self.rowconfigure(2, weight=1)
         self.search_button = Button(self, text="Search")
         self.search_button.grid(row=0, column=0, padx=5)
         self.search_bar = Text(self, width=1, height=1)
         self.search_bar.grid(row=0, column=1, columnspan=2, sticky=W+E)
         self.pack(fill=BOTH, expand='yes') 
```

我的主要有这个：

```
self.search_frame = Frame(self.master, self.editor_frame)
self.search_frame.grid(row=1, column=0, sticky=W+E)
self.search_UI = DocSearchUI(self.search_frame) 
```

结果是这样的： ![在此处输入图像描述](../Images/15f046a4e54710908e3b695f97a55384.png)

为什么我的搜索文本框缩小了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:24:12.600

看起来这是因为您为框架的第 3 列赋予了 1 的权重，但是文本小部件（文本？条目似乎是一个更自然的选择......）位于第 1 列和第 2 列。因此它位于列中重量为0，这意味着它不会增长。

尝试给第 1 列或第 2 列赋予权重。但是，如果您正在做单行小部件并且您希望文本小部件填充该行的其余部分，您可能需要使用 pack - 因为您不必计算布局，所以更容易获得正确的布局列或应用权重。

# javascript - Android：window.getSelection() 在 webview 中不起作用

> ID：10522610
> 
> 赞同：1
> 
> 时间：2012-05-09T19:11:07.810
> 
> 标签：javascript, android, dom, android-webview, textselection

我有一个带有 webview 的应用程序，我一直在尝试从 webview 的正文中获取用户选择的文本。你会认为操作系统能够像 iOS 那样处理一些事情，但这是 Android 完全不足的众多地方之一。我已经探索了这个网站和谷歌，并没有发现任何可以帮助我的东西。幸运的是，我的应用程序有一个 javascript 界面，可以与我们加载到 webview 中的脚本进行通信。我想我可以使用 javascript 从 webview 中选择文本。在 chrome 中，我可以使用以下一些 javascript 来做到这一点：

```
window.getSelection.toString(); 
```

现在我有一个按钮，它调用我的 js 文件中的一个函数，它将运行上述命令并将其结果返回到我的 javascript 界面中的一个方法。该消息将祝我的 javascript 函数的结果。所以我选择文本，然后按此按钮。唯一的问题是我的 toast 消息返回以下消息：

```
javascript returned: 
```

什么时候应该返回

```
javascript returned: <my selected text> 
```

当我删除 '.toString(); 从我的javascript命令中选择文本并按下按钮我收到以下消息

```
javascript returned: undefined 
```

为什么这不起作用？

这是我在上下文中的代码。这是被调用的hte javascript：

```
myNameSpace.getTextSelection = function()
        {
            var str;
            if (window.getSelection){
                str = window.getSelection().toString();
            } else {
                str = 'does not';
            }
            window.myJSHandler.getSelectedText(str);
        }; 
```

这是它正在调用的java函数

```
public void getSelectedText(String text)
        {
            String str = "function called.  it returned: " + text;
            Toast.makeText(getApplicationContext(), str, Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-24T12:42:26.653

**得到了适合我的解决方案**

```
//I am using below line of code which works in both android and web browsers.

function getSelectedText() {
    var selection = null;

    if (window.getSelection) {
        selection = window.getSelection();
    } else if (typeof document.selection != "undefined") {
        selection = document.selection;
    }

    var selectedRange = selection.getRangeAt(0);

    console.log(selectedRange.toString());
} 
```

注意：不要在 post 或任何可运行接口中调用此方法，因为 post 或任何可运行接口会延迟调用此方法（方法调用发生在浏览器选择释放后）。只需像这样调用此方法

```
webView.loadUrl("javascript:getSelectedText()"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:54:13.120

因为文本选择发生在 android 的一个单独的类 WebTextView 上，所以如果我们尝试使用 javascript 方法获取选定的单词 -

```
var range = window.getSelection (); 
```

但是如果你想要选择的单词，这个函数什么也不返回，你可以使用反射，以防你想要我稍后添加该代码。

# javascript - 将无序键分配给 Js 数组

> ID：10522613
> 
> 赞同：0
> 
> 时间：2012-05-09T19:11:27.213
> 
> 标签：javascript, arrays

我得到一个随机键值对，我可以将它分配给一个数组吗？

当我像这样分配它时，它在这里会出现问题，`arr[50] = 'abc'`它会自动创建多达 50 个的键，例如,`arr[0]`等等。`arr[1]``arr[2]`

我想要一个这样的数组`arr[50=>'abc','40'=>'pqr','53'=>'lmn']`

我这里有

```
if(typeof(feedArr.latestRating) == 'object'){ 
                  jQuery.each(feedArr.latestRating,function(key,val){alert('key::'+key);
                    if(key in newRatingArr){ 
                    //delete the key if already exists
                      newRatingArr.splice(key,1);

                    }else{
                      //insert the key,value
                        newRatingArr[key] = val; //here is the problem occurs when key is 50 it automatically creates the indexes in the array upto 50 which i dont want
                       // alert('Key between::'+key);
                       // alert('Value between::'+newRatingArr[key]);
                      //newRatingArr.splice(key,0,val);
                    }
                    //alert(key); 
                  emptyRate = 0;

                  });
                }else{
                  emptyRate = 1;
                } 
```

我可以在这里做什么？请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:14:26.067

使用对象`{}`而不是数组`[]`。

对象可以充当无序的键值容器，这正是您在这里所需要的。

```
// somewhere...
var newRatingArr = {};

// your code.
var emptyRate = true;
if (typeof (feedArr.latestRating) == 'object') {
    jQuery.each(feedArr.latestRating, function (key, val) {
        newRatingArr[key] = val;
        emptyRate = false;
    });
} 
```

# cookies - dojo.cookie 更新？

> ID：10522617
> 
> 赞同：0
> 
> 时间：2012-05-09T19:11:38.007
> 
> 标签：cookies, dojo

我是 Javascript 和 Dojo 的新手。如果我下面的问题有一个明显的答案，我提前道歉。

一个cookie被设置为

```
var foo = "abcde";
dojo.cookie("bar", foo); 
```

后来 foo 变成了 foo = "abcdefghijk"。

是否可以更新 dojo.cookie("bar") 使其始终包含 foo 的最新信息（即，不得更改 cookie 名称“bar”）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:19:26.620

只需这样做：

```
var foo = "abcde";
dojo.cookie("bar", foo);
foo = "abcdefghijk";
dojo.cookie("bar", foo); 
```

查看示例[http://jsfiddle.net/JszB7/4/](http://jsfiddle.net/JszB7/4/)并阅读有关 dojo cookie [http://dojotoolkit.org/reference-guide/1.7/dojo/cookie.html](http://dojotoolkit.org/reference-guide/1.7/dojo/cookie.html)

# javascript - 如何拆分选项标签中包含的名称列表javascript

> ID：10522628
> 
> 赞同：0
> 
> 时间：2012-05-09T19:12:05.767
> 
> 标签：javascript, string, split

我有一个名字列表：

```
Berry, Barry
Altimar, Bonnie
Flopsy, Tonny
Marildoo, Barby
Dalibutton, Fling 
```

这些已通过选项标签填充。通过 ajax，我让用户在列表中添加了一个名称。我想整理一下...

我怎么分割字符串？

我这样做了

```
var split = myList.split(",");
alert (split); 
```

哪个当然给我留下了

```
Berry, BarryAltimar, BonnieFlopsy, TonnyMarildoo, BarbyDalibutton, Fling 
```

嘘。

我想不出怎么拆分...我敢肯定这很容易，但是，作为一个新手，我被难住了。我尝试使用“\n”和“\n\r”，但这些当然不起作用，因为用户没有按回车键。

任何帮助 = 非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:17:22.000

var split 是一个数组，您需要以 split[0]....split[n] 而不是 split 的形式访问它。

试试这个代码

```
for(i=0;i<split.length;i++)
 alert(split[i]); 
```

顺便说一下，我猜 mylist 本身就是一个数组。你应该做 mylist[0].split(',')[0] 来获取第一行第一列的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:21:15.797

alert() 可能调用函数 .toString() 在应用于 Array 时返回逗号分隔值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:27:01.650

嗯，怎么样：

```
var split = myList.replace(/\,/g, "").split(" "); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ChxhW/)**。

# objective-c - NSDictionary 的 JSON 表示

> ID：10522631
> 
> 赞同：0
> 
> 时间：2012-05-09T19:12:21.777
> 
> 标签：objective-c, xcode

在我的应用程序中，用户可以创建 UITextFields。向每个字段添加一个标签，以便标签对应于以下情况：1、2、3、4，...然后我将所有内容添加到 NSDictionary 和 json 表示中：

```
-(IBAction)buttonDropBoxuploadPressed:(id)sender{

//screenshot

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy_MM_dd"];

NSString *filename = [NSString stringWithFormat:@"By: %@  ", 
                      [formatter stringFromDate:[NSDate date]]];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString* path = [documentsDirectory stringByAppendingPathComponent: 
                  [NSString stringWithFormat:@"%@", filename] ];

//[data writeToFile:path atomically:YES];

//NSString *destDir = @"/sandbox/";
// [[self restClient] uploadFile:filename toPath:destDir
//                 withParentRev:nil fromPath:path];

// [[self restClient] loadMetadata:@"/sandbox/"];

//JSON

NSString *object;   
NSString *object2;
NSString *object3;
NSString *object4;
NSString *object5;
NSString *object6;
NSString *object7;
NSString *object8;
NSString *object9;
NSString *object10;
NSString *object11;
NSString *object12;
NSString *object13;
NSString *object14;
NSString *object15;

for (UITextField *text in messagename) {

    int touchedtag = text.tag;

    NSUInteger tagCount = touchedtag;
    switch (tagCount) {

        case 1: 

            object = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 2: 
            object2 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 3: 

            object3 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 4: 

            object4 = [NSString stringWithFormat:@" %@", text.text];

            break;

        case 5: 

            object5 = [NSString stringWithFormat:@"%@", text.text];

            break;

        case 6: 

            object6 = [NSString stringWithFormat:@"%@", text.text];

            break;

        case 7: 

            object7 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 8: 

            object8 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 9: 

            object9 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 10: 

            object10 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 11: 

            object11 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 12: 

            object12 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 13: 

            object13 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 14: 

            object14 = [NSString stringWithFormat:@"%@", text.text];

            break;
        case 15: 

            object15 = [NSString stringWithFormat:@"%@", text.text];

            break;

        default :

            break;

    }
}
//arrays

NSString * objects[] = { object, object2, object3, object4, object5, object6, object7, object8, object9, object10, object11, object12, object13, object14, object15};

NSMutableArray *textnameobject = [[NSMutableArray alloc] initWithCapacity:b];

textnameobject = [NSMutableArray arrayWithObjects:objects count:b];

NSMutableArray *textnamekeys = [[NSMutableArray alloc] initWithCapacity:b];
NSString * textnumber[] = {@"title", @"title", @"title",@"title", @"title", @"title", @"title", @"title", @"title", @"title", @"title", @"title", @"title", @"title"};

textnamekeys = [NSMutableArray arrayWithObjects:textnumber count:b];

//arrays

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObject: textnameobject forKey:textnamekeys];

/*

NSArray *objects2 = [NSArray arrayWithObjects:jsonDictionary, nil];
NSArray *keys2 = [NSArray arrayWithObjects:allkeys, nil];

NSDictionary *mainDict = [NSDictionary dictionaryWithObjects:objects2 forKeys:keys2];

 */

NSString* jsonString = [jsonDictionary JSONRepresentation];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];

[jsonData writeToFile:path atomically:YES];

NSString *destDir = @"/sandbox/";
[[self restClient] uploadFile:filename toPath:destDir
                withParentRev:nil fromPath:path];

[[self restClient] loadMetadata:@"/sandbox/"];

//JSON    

} 
```

当我按下按钮时，我收到以下错误：

JSON 表示失败。错误跟踪是：( "Error Domain=org.brautaset.JSON.ErrorDomain Code=1 \"JSON object key must be string\" UserInfo=0x2e8370 {NSLocalizedDescription=JSON object key must be string}" )

并因此导致保管箱错误。这适用于我以前的应用程序，代码完全相同。正确添加了 json 库。看不懂！！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:15:47.410

你的代码，重写。

```
- (IBAction)buttonDropBoxUploadPressed: (id)sender
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat: @"yyyy_MM_dd"];

    NSString *filename = [NSString stringWithFormat: @"By: %@ ", [formatter stringFromDate: [NSDate date]]];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex: 0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent: filename];

    NSMutableDictionary *titles = [NSMutableDictionary dictionary];
    for (UITextField *textField in messagename)
    {
        [titles setObject: textField.text forKey: @"title"];
        // as you can see, here you're replacing the value @ at key "title" with a new object on every pass
    }

    NSString *jsonString = [titles JSONRepresentation];
    NSData *jsonData = [jsonString dataUsingEncoding: NSUTF8StringEncoding];

    [jsonData writeToFile: path atomically: YES];

    NSString *destDir = @"/sandbox/";
    [[self restClient] uploadFile: filename toPath: destDir withParentRev: nil fromPath: path];
    [[self restClient] loadMetadata: @"/sandbox/"];
} 
```

但是，关于我的评论，您实际上并没有将文本字段的文本序列化为任何可用的内容。在此结束时，*充其量*，您将拥有如下所示的内容：

```
{
    "title": "My Text Field Value"
} 
```

虽然我也相对确定您的一个或多个文本字段的 text 是`nil`，这会导致您的 JSON 问题。

# ruby-on-rails - 试图用 ActiveRecord::Base.connection_pool.with_connection 做点什么

> ID：10522633
> 
> 赞同：6
> 
> 时间：2012-05-09T19:12:28.663
> 
> 标签：ruby-on-rails, activerecord

所以我知道这是如何工作的

```
ActiveRecord::Base.connection_pool.with_connection do |conn|
   conn.execute(sql)
end 
```

但我正在尝试使用与实际 Activerecord 模型的连接，所以类似于

```
conn.Url.first 
```

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-13T01:54:06.303

发现这是不可能的，**但是**在 with_connection 块中，任何 ActiveRecord 调用都应该使用从 Rails 连接池中签出的连接

所以在这个例子中

```
ActiveRecord::Base.connection_pool.with_connection do |conn|
    Url.first
end 
```

它应该从您的 database.yml :pool 设置中为 Rails 预留的池中检查一个连接，让您的活动记录调用使用它，然后将其重新检入

但是，**这仅适用于 rails 3+** ...您可以在此处看到使这成为可能的代码更改

Rails 2.3（旧方式）[http://apidock.com/rails/v2.3.8/ActiveRecord/ConnectionAdapters/ConnectionPool/with_connection](http://apidock.com/rails/v2.3.8/ActiveRecord/ConnectionAdapters/ConnectionPool/with_connection)

Rails 3 [http://apidock.com/rails/v3.0.0/ActiveRecord/ConnectionAdapters/ConnectionPool/with_connection](http://apidock.com/rails/v3.0.0/ActiveRecord/ConnectionAdapters/ConnectionPool/with_connection)

这家伙在这篇博文中解释了补丁 [http://coderrr.wordpress.com/2009/05/05/activerecords-with_connection-is-now-useful/](http://coderrr.wordpress.com/2009/05/05/activerecords-with_connection-is-now-useful/)

# iphone - iphone多个UITableviewController

> ID：10522637
> 
> 赞同：0
> 
> 时间：2012-05-09T19:12:44.530
> 
> 标签：iphone, objective-c

我是 iphone 编程新手。如何在不创建太多类文件的情况下创建多个 tableviewcontroller。
就像在 iphone safari 书签栏中，每个新文件夹都创建它，创建文件并推送。它将继续创建表格视图。
如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:27:09.060

您可以创建/编码一个代表您的通用 UITableViewController 的类，然后创建它的多个实例。例如，原始 UITableViewController 子类加载以显示第一页，然后当点击一行时，在您的 didSelectRowAtIndexPath 方法中，实例化您的 UITableViewController 子类的另一个实例并将其推送到导航堆栈上。

记住你这里的面向对象编程技术，一个类不是对象，一个对象是一个类的实例，一个类可以有很多个实例，这就是你需要在这里实现的。
这是一些示例代码：

MyTableViewController.h

```
#import <UIKit/UIKit.h>
@interface MyTableViewController : UITableViewController
@end 
```

MyTableViewController.m

```
#import "MyTableViewController.h"

@implementation MyTableViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
            self.clearsSelectionOnViewWillAppear = NO;
            self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
        }
    }
    return self;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //HERES THE IMPORTANT PART FOR YOU
    //SEE HOW I'M JUST CREATING ANOTHER INSTANCE OF MasterViewController?
    //You can tap the rows in this table until memory runs out, but all I have is one table view controller
    MyTableViewController *newController = [[[MasterViewController alloc] initWithNibName:@"MyTableViewController" bundle:nil] autorelease];
    [self.navigationController pushViewController:newController animated:YES];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
    }
    cell.textLabel.text = NSLocalizedString(@"Click Me", @"Click Me");
    return cell;
}
@end 
```

# objective-c - 重新加载表格后设置 UITableView FooterView

> ID：10522638
> 
> 赞同：1
> 
> 时间：2012-05-09T19:12:45.847
> 
> 标签：objective-c, ios, xcode, uitableview

我正在制作一个作为 UITableView 的应用程序，它从 Web 获取内容、解析并显示它。获取和解析它需要一点时间，所以我使用加载指示器 ( [MBProgressHUD](https://github.com/jdg/MBProgressHUD) ) 并在后台进行加载。我想在 TableView 的页脚添加一个按钮，所以我编写了以下代码：

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[myButton addTarget:self action:@selector(myAction)
   forControlEvents:UIControlEventTouchDown];
[myButton setTitle:@"Button Title" forState:UIControlStateNormal];
myButton.frame = CGRectMake(0, 0, 160.0, 40.0);
self.tableView.tableFooterView=myButton; 
```

问题是它在我的后台内容加载代码之后的 ViewDidLoad() 期间在 tableview 中初始化

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.mode = MBProgressHUDModeIndeterminate;
    hud.labelText = @"Loading";
    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        // Do something...
        [self getContent];
        [self.tableView reloadData];
        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:self.view animated:YES];
        });
    }); 
```

因此，当视图加载时，按钮设置在顶部（因为 tableview 是空的），当它重新加载时，按钮保持在顶部，我需要转到另一个视图并返回页脚中的按钮。

有没有办法在内容加载后设置按钮？像一个`-(void)tableViewDidReloadData`函数？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:19:42.147

是的，如果您在与`[self.tableView reloadData]`（同步调用）相同的调用中执行此操作，它将在加载数据后显示。

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.mode = MBProgressHUDModeIndeterminate;
hud.labelText = @"Loading";
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // Do something...
    [self getContent];
    dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
        [self.tableView reloadData];
        UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [myButton addTarget:self action:@selector(myAction) forControlEvents:UIControlEventTouchDown];
        [myButton setTitle:@"Button Title" forState:UIControlStateNormal];
        [myButton setFrame:CGRectMake(0, 0, 160.0, 40.0)];
        [self.tableView setTableFooterView:myButton];
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:24:00.387

您应该`[self.tableView reloadData];`只在主线程中调用。

```
dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:11:19.877

不要创建 myButton 并将其分配给 ViewDidLoad 委托中的 tableview 页脚，而不是在隐藏 MBProgress HUD 并重新加载表格时创建它

试试这个它应该工作

```
dispatch_async(dispatch_get_main_queue(), ^{
        UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [myButton addTarget:self action:@selector(myAction)
        forControlEvents:UIControlEventTouchDown];
        [myButton setTitle:@"Button Title" forState:UIControlStateNormal];
        myButton.frame = CGRectMake(0, 0, 160.0, 40.0);
        self.tableView.tableFooterView=myButton;
        [self.tableView reloadData];
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    }); 
```

# .net - .NET 的 Selenium dll 文件

> ID：10522640
> 
> 赞同：4
> 
> 时间：2012-05-09T19:13:00.607
> 
> 标签：.net, dll, selenium-rc

我正在安装 Selenium 来学习自动化测试，并且我选择了 C#.Net 作为我的语言。我从这个页面下载了 .Net 客户端驱动程序 - [http://seleniumhq.org/download/](http://seleniumhq.org/download/) 即我下载了：

![在此处输入图像描述](../Images/e4453c3a66384ca7aa454843eaf91aa7.png)

现在，当我按照这些步骤操作时，它说我需要在 Visual Studio 中创建一个类库，然后添加对一些 NUnit 和 Selenium dll 文件的引用。好吧，我安装了 NUnit，创建了类库，当尝试引用 dll 时，我找不到应该添加的几个。如果有人以前遇到过类似的问题或者知道我在哪里可以找到这些文件，那么请帮忙。

***要添加的文件：-***

[http://seleniumhq.org/docs/appendix_installing_dotnet_driver_client.html#configuring-selenium-rc-net-reference](http://seleniumhq.org/docs/appendix_installing_dotnet_driver_client.html#configuring-selenium-rc-net-reference)

![在此处输入图像描述](../Images/ab646edeb6a0e9887145a1eda07d7026.png)

***我机器上的DLL是：***

![在此处输入图像描述](../Images/d40acf38a4e651c97828308c0dad507d.png)

即我只有 ThoughtWorks.Selenium.Core.dll

我在 NUnit 文件夹中找到了 NUnit.framework.dll 和 NUnit.nmock.dll。

```
Issue: I don't have or am not able to find the following dll's:
nunit.core.dll
nmock.dll
ThoughtWorks.Selenium.IntegrationTests.dll
ThoughtWorks.Selenium.UnitTests.dll. 
```

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:50:44.053

只是碰巧我正在寻找同样的东西，它就在这里，

[https://github.com/schneems/Selenium-RC-Beta-2](https://github.com/schneems/Selenium-RC-Beta-2)

你去这里下载整个包的 zip 文件。解压 zip 文件，然后在文件夹“selenium-dotnet-client-driver-1.0-beta-2”中找到您需要的内容。

# javascript - 具有 HTML5 异步属性和协议相关 URL 的 Google Analytics JavaScript 跟踪代码

> ID：10522651
> 
> 赞同：2
> 
> 时间：2012-05-09T19:13:56.707
> 
> 标签：javascript, html, asynchronous, google-analytics, lazy-loading

这是 Google 的异步分析跟踪代码：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

如果你问我这很丑陋。它可以浓缩成这样（图片来源：[Mathias](http://mathiasbynens.be/notes/async-analytics-snippet)）：

```
<script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script> 
```

但是为什么我们不能只使用 HTML5`async`属性和[相对协议的 URL](http://paulirish.com/2010/the-protocol-relative-url/)呢？

```
<script src="//www.google-analytics.com/ga.js" async></script>
<script>var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];</script> 
```

使用相对于协议的 URL，我们避免了检查 ,`location.protocol`属性`async`应该负责[现代浏览器](https://stackoverflow.com/a/6766189/552067)中的不显眼加载，并且会在其他浏览器中优雅地降级。

这不是更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:04:31.697

你可以这样做：

```
<script src="//www.google-analytics.com/ga.js" async></script>
<script>var _gaq= _gaq || [];
_gaq.push(['_setAccount','UA-XXXXX-X'],['_trackPageview']);
</script> 
```

任何更短的内容都会有覆盖加载的风险，特别是 GA 覆盖的`_gaq`功能。`ga.js``_gaq.push`

硬编码`script[async]`而不是使用 DOM 注入方法的问题在于，这`script[async]`不是使注入异步的唯一机制。`script[async]`在较旧的浏览器中，基于 JS 的注入即​​使没有支持也会导致异步注入。

但是，上面的代码应该在所有浏览器中都可以工作，但`ga.js`会在旧浏览器上阻塞。节省的额外字节不值得性能损失，但如果你这样做，你应该把脚本放在页脚。

（注意：协议相对 URL 将在这里工作，因为[https://www.google-analytics.com/ga.js](https://www.google-analytics.com/ga.js)已由 Google 设置为可以工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:03:43.897

请注意，虽然 async 标记对于现代兼容的浏览器来说已经足够了，但它对旧的不兼容的浏览器没有作用。当然，它们会优雅地退化。但是它们完全不是异步的，只是忽略了 async 属性而降级。另一方面，如果您像他们使用的那样使用动态插入，则会使不兼容的浏览器表现得更像是异步的。

另一个重要的一点是，如果您只是重新定义 _gaq 对象，如果之前已加载 ga.js 文件，则可能会导致问题。大多数情况下不应该发生这种情况，但是有些网站最终会由于各种原因或只是错误地多次包含标签，这就是为什么保留`_gaq = _gaq || []`逻辑是个好主意。

Google analytics goal is not to be pretty, it's to be cross browser not just in the sense that it degrades gracefully but also in the sense that it works exactly the same way on all browsers as much as possible. If it works in a slightly different way on each browser it could skew the metrics for one browser and that's something you don't want. The first golden rule for data analysis is data consistency. Even if it means that you need to support ie5.5 for Mac.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:30:17.753

假设异步被忽略，我在旧浏览器中看到了这种情况。

通过使脚本内联，您会导致非异步浏览器立即下载并执行它。此时，它会解析 _gaq，它到目前为止是一个数组，并执行存储的命令。然后它重写 push 方法，并向前使用它作为执行请求的函数（例如 _trackEvent）。

因此，通过同步获取脚本，然后将 _gaq 定义为数组，您将覆盖 Google 对 _gaq 所做的更改，并且会阻止页面浏览量被跟踪。

# c# - 如何在winform上将工具提示添加到用户定义的文本框

> ID：10522652
> 
> 赞同：4
> 
> 时间：2012-05-09T19:14:14.747
> 
> 标签：c#, winforms

我`uvSelfLoadingTextBox`在表单上有多个实例。我想`_value`在运行时加载带有属性的工具提示。

我试过了

```
public ucSelfLoadingTextBox()
{
    Windows.Forms.ToolTip myToolTip;
    myToolTip.AutomaticDelay = 5000;
    myToolTip.AutoPopDelay = 50000;
    myToolTip.InitialDelay = 100;
    myToolTip.ReshowDelay = 500;

    myToolTip.SetToolTip(this, _value); 
```

在控件内部，但这不起作用。

我尝试使用拖到表单上的工具提示

```
 ucSelfLoadingLogicTextBox uc = new ucSelfLoadingLogicTextBox();
    toolTipA.SetToolTip(uc,uc._value ); 
```

那是行不通的。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:30:26.410

你忘了实例化`myToolTip`. 您需要将其设置为`new Tooltip()`.

另外，我认为在文本框的构造函数中分配工具提示不是一个好习惯。你可以这样做[`OnCreateControl()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.oncreatecontrol.aspx)（你需要覆盖）。

因此，您的代码可能变为：

```
protected override void OnCreateControl()
{
    base.OnCreateControl();

    var myToolTip = new System.Windows.Forms.ToolTip
    {
        AutomaticDelay = 5000,
        AutoPopDelay = 50000,
        InitialDelay = 100,
        ReshowDelay = 500
    };

    myToolTip.SetToolTip(this, this.Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:20:16.190

Windows 窗体上的许多可见控件都具有 ToolTip 属性。只需使用您新创建的工具提示设置。您还可以在表单中添加工具提示。你试过这个吗？

```
myToolTip.ShowAlways = true; 
```

并尝试将此提示设置为按钮控件。这可能是对您的工具提示的一个很好的测试。

# mysql - Mysql 使用 utf8 varchar 字段查找不正确

> ID：10522653
> 
> 赞同：0
> 
> 时间：2012-05-09T19:14:19.800
> 
> 标签：mysql, select, unicode

我确实有一个带有表格的 UTF8 InnoDB 数据库，比如“单词”：

```
> desc words;
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| id    | int(11)     | NO   | PRI | NULL    | auto_increment |
| name  | varchar(50) | NO   | UNI | NULL    |                |
+-------+-------------+------+-----+---------+----------------+ 
```

当我执行查询时

```
select * from word where name = 'Télécom'; 
```

我得到一个我无法解释的奇怪结果：

```
+------+---------+
| id   | name    |
+------+---------+
| 4980 | telecom |
+------+---------+ 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:17:51.530

这是因为排序规则 - 它定义了字符的比较方式以及哪些被认为是相等的。这可能是期望的结果，也可能不是 - 在最后一种情况下，使用二进制排序规则，只有严格相等的字符串才会被认为是相等的。但请记住，二进制排序规则也区分大小写

# ruby - Ruby 和 SWIG 与 CMake

> ID：10522654
> 
> 赞同：3
> 
> 时间：2012-05-09T19:14:20.183
> 
> 标签：ruby, cmake, swig

有没有人幸运地使用 CMake 通过 SWIG 创建 Ruby 绑定？我在我的 CMake 文件中有一个通过 SWIG 创建 Python 绑定的工作示例，但是当我使用相同的方法创建 Ruby 绑定时，不会创建实际的 Ruby 文件。使用有效的 Python 绑定，确实会创建一个 Python 文件。

这是我的 CMakeLists.txt 文件的相关部分：

```
if (${SWIG_FOUND})
  find_package( Ruby REQUIRED )

  include_directories(
    ${RUBY_INCLUDE_DIRS}
    )

  include (${SWIG_USE_FILE})

  set (CMAKE_SWIG_FLAGS "") # set the global SWIG flags to empty
  set_source_files_properties (TESTSWIG.i PROPERTIES CPLUSPLUS ON) # TESTSWIG.i is c++

  SWIG_ADD_MODULE (test-ruby ruby TESTSWIG.i src/Test.cpp)
  SWIG_LINK_LIBRARIES (test-ruby test ${RUBY_LIBRARY})

  set(swig_SOURCES
    ${CMAKE_CURRENT_BINARY_DIR}/libtest-ruby.so
    )

  install(FILES ${swig_SOURCES}
    DESTINATION lib/ruby
    )
endif(${SWIG_FOUND}) 
```

任何人都有幸使用 CMake 通过 SWIG 创建 Ruby 绑定？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:42:39.153

我们使用它。你可以看看这些例子：

[http://svn.opensuse.org/svn/yast/trunk/libyui-bindings/](http://svn.opensuse.org/svn/yast/trunk/libyui-bindings/)

但是，我们不使用 SWIG 宏（除了查找 SWIG 本身），而是使用 ADD_CUSTOM_COMMAND：

```
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fno-strict-aliasing")

EXECUTE_PROCESS(COMMAND ${RUBY_EXECUTABLE} -r rbconfig -e "print Config::CONFIG['vendorarchdir']" OUTPUT_VARIABLE RUBY_VENDOR_ARCH_DIR)

MESSAGE(STATUS "Ruby executable: ${RUBY_EXECUTABLE}")
MESSAGE(STATUS "Ruby vendor arch dir: ${RUBY_VENDOR_ARCH_DIR}")
MESSAGE(STATUS "Ruby include path: ${RUBY_INCLUDE_PATH}")

SET( SWIG_OUTPUT "${CMAKE_CURRENT_BINARY_DIR}/yui_ruby.cxx" )

ADD_CUSTOM_COMMAND (
   OUTPUT  ${SWIG_OUTPUT}
   COMMAND ${CMAKE_COMMAND} -E echo_append "Creating wrapper code for ruby..."
   COMMAND ${SWIG_EXECUTABLE} -c++ -ruby -autorename -o ${SWIG_OUTPUT} -I${LIBYUI_INCLUDE_DIR} ${SWIG_INPUT}
   COMMAND ${CMAKE_COMMAND} -E echo "Done."
   WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
   DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/../*.i
)

ADD_LIBRARY( yui_ruby SHARED ${SWIG_OUTPUT} )
INCLUDE_DIRECTORIES( ${RUBY_INCLUDE_PATH} ${LIBYUI_INCLUDE_DIR} )

SET_TARGET_PROPERTIES( yui_ruby PROPERTIES PREFIX "" OUTPUT_NAME "yui")

TARGET_LINK_LIBRARIES( yui_ruby ${LIBYUI_LIBRARY} )
TARGET_LINK_LIBRARIES( yui_ruby ${RUBY_LIBRARY} )

INSTALL(TARGETS yui_ruby LIBRARY DESTINATION ${RUBY_VENDOR_ARCH_DIR}) 
```

我假设您的版本不起作用，因为 .so 文件中的“lib”前缀。这正是我们这样做的原因

```
SET_TARGET_PROPERTIES( yui_ruby PROPERTIES PREFIX "" OUTPUT_NAME "yui") 
```

为了得到 yui.so 而不是 libyui.so。

还要确保安装 .so 文件的路径位于 ruby​​ 加载路径中。

# c# - ASP MVC 中的动态验证

> ID：10522655
> 
> 赞同：4
> 
> 时间：2012-05-09T19:14:21.650
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

对于工作中的项目，我正在尝试创建一个流程，让用户动态创建一个表单，然后其他用户可以为其填写值。不过，我很难弄清楚如何让它与内置的模型绑定和使用 ASP MVC 3 的验证配合得很好。

我们的视图模型是这样设置的。请注意，我已经过度简化了示例代码：

```
public class Form 
{
    public FieldValue[] FieldValues { get; set; }
}

public class Field
{
    public bool IsRequired { get; set; }
}

public class FieldValue 
{
    public Field Field { get; set; }
    public string Value { get; set; }
} 
```

我们的视图看起来像：

```
@model Form
@using (Html.BeginForm("Create", "Form", FormMethod.Post))
{
    @for(var i = 0; i < Model.Fields.Count(); i++)
    {
        @Html.TextBoxFor(_ => @Model.Fields[i].Value) 
    }
    <input type="submit" value="Save" name="Submit" />
} 
```

我希望我们能够创建一个自定义 ModelValidatorProvider 或 ModelMetadataProvider 类，该类能够分析 FieldValue 实例，确定其 Field.IsRequired 属性是否为真，然后将 RequiredFieldValidator 添加到该特定实例的验证器中。不过，我对此并不走运。似乎使用 ModelValidatorProvider（和 ModelMetadataProvider），您无法访问父容器的值（即：将为 FieldValue.Value 调用 GetValidators()，但无法从那里获取 FieldValue 对象）。

我尝试过的事情：

*   在 ModelValidatorProvider 中，我尝试过使用 ControllerContext.Controller.ViewData.Model，但如果您有嵌套类型，这将不起作用。如果我试图找出验证器 Form.FieldValues[3]，我不知道要使用哪个 FieldValue。

*   我尝试使用自定义 ModelMetadata 尝试使用内部 modelAccessor 的 Target 属性来获取父级，但如果您有嵌套类型，这也不起作用。在 MVC 内部的某个地方，像我的示例中的表达式将导致目标是模型的类型（表单），而不是字段值。所以我遇到了与上面相同的问题，我不知道要比较哪个 FieldValue 实例。

*   我可以将其放在 FieldValue 类本身上的类级别验证属性，但这只会在服务器验证期间调用。我也需要客户端验证。

我在 MVC 中尝试做的事情甚至可能吗？还是我完全错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:40:47.320

一种可能性是使用自定义验证属性。

但在开始实施之前，我想指出您的方案中的一个潜在缺陷。该`IsRequired`属性是您的模型的一部分。这意味着当提交表单时，它的值必须是已知的，以便我们有条件地将所需的规则应用于相应的属性。但是要在提交表单时知道此值，这意味着它必须是表单的一部分（作为隐藏或标准输入字段）或必须从某个地方检索（数据存储，...）。第一种方法的问题很明显 => 隐藏字段意味着用户可以设置他喜欢的任何值，因此它不再是真正的验证，因为它是用户决定需要哪个字段。

说到这个警告，假设您信任您的用户并决定采用隐藏字段方法来存储 IsRequired 值。让我们看看一个示例实现：

模型：

```
public class Form
{
    public FieldValue[] Fields { get; set; }
}

public class FieldValue
{
    public Field Field { get; set; }

    [ConditionalRequired("Field")]
    public string Value { get; set; }
}

public class Field
{
    public bool IsRequired { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new Form
        {
            Fields = new[]
            {
                new FieldValue { Field = new Field { IsRequired = true }, Value = "" },
                new FieldValue { Field = new Field { IsRequired = true }, Value = "" },
                new FieldValue { Field = new Field { IsRequired = false }, Value = "value 3" },
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(Form model)
    {
        return View(model);
    }
} 
```

看法：

```
@model Form
@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.Fields)
    <input type="submit" value="Save" name="Submit" />
} 
```

ConditionalRequired属性：

```
public class ConditionalRequiredAttribute : ValidationAttribute, IClientValidatable
{
    private RequiredAttribute _innerAttribute = new RequiredAttribute();

    private readonly string _fieldProperty;

    public ConditionalRequiredAttribute(string fieldProperty)
    {
        _fieldProperty = fieldProperty;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var containerType = validationContext.ObjectInstance.GetType();
        var field = containerType.GetProperty(_fieldProperty);
        if (field == null)
        {
            return new ValidationResult(string.Format("Unknown property {0}", _fieldProperty));
        }

        var fieldValue = (Field)field.GetValue(validationContext.ObjectInstance, null);
        if (fieldValue == null)
        {
            return new ValidationResult(string.Format("The property {0} was null", _fieldProperty));
        }

        if (fieldValue.IsRequired && !_innerAttribute.IsValid(value))
        {
            return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
        }

        return ValidationResult.Success;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule()
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "conditionalrequired",
        };

        rule.ValidationParameters.Add("iserquiredproperty", _fieldProperty + ".IsRequired");

        yield return rule;
    }
} 
```

关联的不显眼的适配器：

```
(function ($) {
    $.validator.unobtrusive.adapters.add('conditionalrequired', ['iserquiredproperty'], function (options) {
        options.rules['conditionalrequired'] = options.params;
        if (options.message) {
            options.messages['conditionalrequired'] = options.message;
        }
    });

    $.validator.addMethod('conditionalrequired', function (value, element, parameters) {
        var name = $(element).attr('name'),
        prefix = name.substr(0, name.lastIndexOf('.') + 1),
        isRequiredFiledName = prefix + parameters.iserquiredproperty,
        requiredElement = $(':hidden[name="' + isRequiredFiledName + '"]'),
        isRequired = requiredElement.val().toLowerCase() === 'true';

        if (!isRequired) {
            return true;
        }

        return value && value !== '';
    });

})(jQuery); 
```

# c# - 在 C# 中多次读取 SQLDataReader？

> ID：10522661
> 
> 赞同：2
> 
> 时间：2012-05-09T19:14:38.923
> 
> 标签：c#, sql-server, sqldatareader

我相信在 JAVA 中，我们可以将数据读取器设置为指向其结果集的第一行。我有一个包含 20 多列的 SQLDataReader，我需要在使用整个结果集之前预处理一些列并计算一些值。第一次读取数据读取器后是否可以重新读取数据读取器以获取选定的列？还是我需要将结果存储在数据表中并稍后读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:17:34.753

[来自http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)的 MSDN 文档

> 提供一种从 SQL Server 数据库中读取只进的行流的方法。

您可以一次读取一行，但是一旦您读取了下一行，就不能再回到一行。

您可以按任意顺序、任意次数读取一行中的列，并根据需要跳过字段。

```
while (reader.Read())
{
    var a = reader[2];   // you can skip fields
    var b = reader[0];   // you don't have to read the fields in order
    var c = reader[2];   // you can re-read fields
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:17:36.517

不，这是不可能的。

来自[`SqlDataReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)MSDN：

> 提供一种从 SQL Server 数据库中读取**只进的行流的方法。**

（强调我的）

您可以将所有需要的数据读入一个集合，并根据需要多次迭代副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:37:02.490

也许您可以运行 2 个查询作为存储过程的一部分。第一个查询仅限于预先计算字段的字段，第二个查询仅限于其余字段。然后在您的 C# 中使用该`reader.ReadNext`方法。

或者，SQL 确实支持计算字段，这可能会使事情变得更简单。

但就我个人而言，我会将整个数据读入一个`List<T>`用于处理的...

# python - 如何正确触发 python 扭曲传输？

> ID：10522662
> 
> 赞同：3
> 
> 时间：2012-05-09T19:14:44.863
> 
> 标签：python, twisted

我被要求编写一个连接到服务器的类，异步向服务器发送各种命令，然后将返回的数据提供给客户端。我被要求在 Python 中执行此操作，这对我来说是一门新语言。我开始四处挖掘，发现了 Twisted 框架，它提供了一些非常好的抽象（Protocol、ProtocolFactory、Reactor），如果我要推出自己的基于套接字的应用程序，我必须做很多事情。考虑到我必须解决的问题，这似乎是正确的选择。

我浏览了网络上的许多示例（主要是[Krondo](http://krondo.com/?page_id=1327 "克朗多")），但我仍然没有看到一个很好的示例来创建将通过线路发送多个命令并维护我创建的连接的客户端。在这种情况下，服务器（我无法控制）在发送响应后不会断开连接。那么，设计客户端的正确方法是什么，以便我可以以各种方式对服务器进行痒痒呢？

现在我这样做：

```
class TestProtocol(Protocol)
    def connectionMade(self):
         self.transport.write(self.factory.message)

class TestProtocolFactory(Factory):
    message = ''
    def setMessage(self, msg):
        self.message = msg

def main():
    f = TestProtocolFactory()
    f.setMessage("my message")
    reactor.connectTCP(...)
    reactor.run() 
```

我真正想做的是`self.transport.write(...)`通过反应器调用（实际上，从另一个执行线程按需调用 TestProtocolFactory::setMessage() ），而不仅仅是在建立连接时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:45:58.100

You may want to use a [Service](http://twistedmatrix.com/documents/current/api/twisted.application.service.html).

Services are pieces of functionality within a Twisted app which are started and stopped, and are nice abstractions for other parts of your code to interact with. For example, in this case you might have a SayStuffToServerService (I know, terrible name, but without knowing more about its job it was the best I could do here :) ) that exposed something like this:

```
class SayStuffToServerService:
    def __init__(self, host, port):
        # this is the host and port to connect to

    def sendToServer(self, whatToSend):
        # send some line to the remote server

    def startService(self):
        # call me before using the service. starts outgoing connection efforts.

    def stopService(self):
        # clean reactor shutdowns should call this method. stops outgoing
        # connection efforts. 
```

(That might be all the interface you need, but it should be fairly clear where you can add things to this.)

The `startService()` and `stopService()` methods here are just what Twisted's Services expose. And helpfully, there is a premade Twisted Service which acts like a TCP client and takes care of all the reactor stuff for you. It's `twisted.application.internet.TCPClient`, which takes arguments for a remote host and port, along with a ProtocolFactory to take care of handling the actual connection attempt.

Here is the SayStuffToServerService, implemented as a subclass of `TCPClient`:

```
from twisted.application import internet

class SayStuffToServerService(internet.TCPClient):
    factoryclass = SayStuffToServerProtocolFactory

    def __init__(self, host, port):
        self.factory = self.factoryclass()
        internet.TCPClient.__init__(self, host, port, self.factory)

    def sendToServer(self, whatToSend):
        # we'll do stuff here 
```

(See below for the SayStuffToServerProtocolFactory.)

Using this Service architecture is convenient in a lot of ways; you can group Services together in one container, so that they all get stopped and started as one when you have different parts of your app that you want active. It may make good sense to implement other parts of your app as separate Services. You can set Services as child services to `application`- the magic name that `twistd` looks for in order to know how to initialize, daemonize, and shut down your app. Actually yes, let's add some code to do that now.

```
from twisted.application import service

...

application = service.Application('say-stuff')

sttss = SayStuffToServerService('localhost', 65432)
sttss.setServiceParent(service.IServiceCollection(application)) 
```

That's all. Now when you run this module under `twistd` (i.e., for debugging, `twistd -noy saystuff.py`), that `application` will be started under the right reactor, and it will in turn start the SayStuffToServerService, which will start a connection effort to localhost:65432, which will use the service's `factory` attribute to set up the connection and the Protocol. You don't need to call `reactor.run()` or attach things to the reactor yourself anymore.

So we haven't implemented SayStuffToServerProtocolFactory yet. Since it sounds like you would prefer that your client reconnect if it has lost the connection (so that callers of `sendToServer` can usually just assume that there's a working connection), I'm going to put this protocol factory on top of `ReconnectingClientFactory`.

```
from twisted.internet import protocol

class SayStuffToServerProtocolFactory(protocol.ReconnectingClientFactory):
    _my_live_proto = None
    protocol = SayStuffToServerProtocol 
```

This is a pretty nice minimal definition, which will keep trying to make outgoing TCP connections to the host and port we specified, and instantiate a SayStuffToServerProtocol each time. When we fail to connect, this class will do nice, well-behaved exponential backoff so that your network doesn't get hammered (you can set a maximum wait time). It will be the responsibility of the Protocol to assign to `_my_live_proto` and call this factory's `resetDelay()` method, so that exponential backoff will continue to work as expected. And here is that Protocol now:

```
class SayStuffToServerProtocol(basic.LineReceiver):
    def connectionMade(self):
        # if there are things you need to do on connecting to ensure the
        # connection is "all right" (maybe authenticate?) then do that
        # before calling:
        self.factory.resetDelay()
        self.factory._my_live_proto = self

    def connectionLost(self, reason):
        self.factory._my_live_proto = None
        del self.factory

    def sayStuff(self, stuff):
        self.sendLine(stuff)

    def lineReceived(self, line):
        # do whatever you want to do with incoming lines. often it makes sense
        # to have a queue of Deferreds on a protocol instance like this, and
        # each incoming response gets sent to the next queued Deferred (which
        # may have been pushed on the queue after sending some outgoing
        # message in sayStuff(), or whatever).
        pass 
```

This is implemented on top of `twisted.protocols.basic.LineReceiver`, but would work as well with any other sort of Protocol, in case your protocol isn't line-oriented.

The only thing left is hooking up the Service to the right Protocol instance. This is why the Factory keeps a `_my_live_proto` attribute, which should be set when a connection is successfully made, and cleared (set to None) when that connection is lost. Here's the new implementation of `SayStuffToServerService.sendToServer`:

```
class NotConnectedError(Exception):
    pass

class SayStuffToServerService(internet.TCPClient):

    ...

    def sendToServer(self, whatToSend):
        if self.factory._my_live_proto is None:
            # define here whatever behavior is appropriate when there is no
            # current connection (in case the client can't connect or
            # reconnect)
            raise NotConnectedError
        self.factory._my_live_proto.sayStuff(whatToSend) 
```

And now to tie it all together in one place:

```
from twisted.application import internet, service
from twisted.internet import protocol
from twisted.protocols import basic

class SayStuffToServerProtocol(basic.LineReceiver):
    def connectionMade(self):
        # if there are things you need to do on connecting to ensure the
        # connection is "all right" (maybe authenticate?) then do that
        # before calling:
        self.factory.resetDelay()
        self.factory._my_live_proto = self

    def connectionLost(self, reason):
        self.factory._my_live_proto = None
        del self.factory

    def sayStuff(self, stuff):
        self.sendLine(stuff)

    def lineReceived(self, line):
        # do whatever you want to do with incoming lines. often it makes sense
        # to have a queue of Deferreds on a protocol instance like this, and
        # each incoming response gets sent to the next queued Deferred (which
        # may have been pushed on the queue after sending some outgoing
        # message in sayStuff(), or whatever).
        pass

class SayStuffToServerProtocolFactory(protocol.ReconnectingClientFactory):
    _my_live_proto = None
    protocol = SayStuffToServerProtocol

class NotConnectedError(Exception):
    pass

class SayStuffToServerService(internet.TCPClient):
    factoryclass = SayStuffToServerProtocolFactory

    def __init__(self, host, port):
        self.factory = self.factoryclass()
        internet.TCPClient.__init__(self, host, port, self.factory)

    def sendToServer(self, whatToSend):
        if self.factory._my_live_proto is None:
            # define here whatever behavior is appropriate when there is no
            # current connection (in case the client can't connect or
            # reconnect)
            raise NotConnectedError
        self.factory._my_live_proto.sayStuff(whatToSend)

application = service.Application('say-stuff')

sttss = SayStuffToServerService('localhost', 65432)
sttss.setServiceParent(service.IServiceCollection(application)) 
```

Hopefully that gives enough of a framework with which to start. There is sometimes a lot of plumbing to do to handle client disconnections just the way you want, or to handle out-of-order responses from the server, or handle various sorts of timeout, canceling pending requests, allowing multiple pooled connections, etc, etc, but this should help.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T19:34:22.007

要看。以下是一些可能性：

我假设

方法 1\. 您有一个发送服务器的命令列表，但由于某种原因不能一次全部完成。在这种情况下，在前一个答案返回时发送一个新的：

```
class proto(parentProtocol):
    def stringReceived(self, data):
        self.handle_server_response(data)
        next_command = self.command_queue.pop()
        # do stuff 
```

方法 2\. 您发送给服务器的内容取决于服务器发送给您的内容：

```
class proto(parentProtocol):
    def stringReceived(self, data):
        if data == "this":
            self.sendString("that")
        elif data == "foo":
            self.sendString("bar")
        # and so on 
```

方法 3\. 你不关心服务器发送什么，你只想定期发送一些命令：

```
class proto(parentProtocol):
    def callback(self):
        next_command = self.command_queue.pop()
        # do stuff
    def connectionMade(self):
        from twisted.internet import task
        self.task_id = task.LoopingCall(self.callback)
        self.task_id.start(1.0) 
```

方法 4：您的编辑现在提到从另一个线程触发。随意检查扭曲的文档，看看是否`proto.sendString`是线程安全的。您可能可以直接调用它，但我不知道。方法 3 *是*线程安全的。只需从另一个线程填充队列（这是线程安全的）。

基本上你可以在你的协议中存储任意数量的状态；它会一直存在，直到你完成。您可以向服务器发送命令作为对它给您的消息的响应，或者您设置一些调度来完成您的工作。或两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:09:35.027

twisted 框架是基于事件的编程；本质上，它的方法都是异步调用的，结果是通过defer对象获取的。

该框架的本质是适合协议开发的，只是你必须改变你对传统顺序编程的想法。Protocol 类就像一个有限状态机，具有以下事件：连接建立、连接丢失、接收数据。您可以将您的客户端代码转换为 FSM，然后很容易适应协议类。

下面是我想要表达的一个粗略的例子。有点胭脂，但这是我现在可以提供的：

```
class SyncTransport(Protocol):
    # protocol
    def dataReceived(self, data):
        print 'receive data', data
    def connectionMade(self):
        print 'i made a sync connection, wow'
        self.transport.write('x')
        self.state = I_AM_LIVING
    def connectionLost(self):
        print 'i lost my sync connection, sight'
    def send(self, data):
        if self.state == I_AM_LIVING:
            if data == 'x':
              self.transport.write('y')
           if data == 'Y':
              self.transport.write('z')
              self.state = WAITING_DEAD
        if self.state == WAITING_DEAD:
              self.transport.close() 
```

# java - 在Java中的按键上返回/停止执行函数

> ID：10522663
> 
> 赞同：1
> 
> 时间：2012-05-09T19:14:47.030
> 
> 标签：java, return, control-flow, program-flow

我的程序中有一个特定的功能，我想在按下一个键时停止。我为此目的设置了一个本机键盘挂钩。现在，当检测到该键时，我调用 System.exit(0)。但是，我不想退出程序，只需停止该操作并返回调用它的位置即可。下面给出一个例子。

```
public class Main {
    public static void main(String[] args) {
        System.out.println("Calling function that can be stopped with CTRL+C");
        foo(); // Should return when CTRL+C is pressed
        System.out.println("Function has returned");
    }
} 
```

我已经尝试将 foo() 的调用放在一个线程中，以便我可以调用`Thread.interrupt()`，但我希望函数调用是阻塞的，而不是非阻塞的。还有阻塞的 IO 调用，`foo()`所以除非有必要，否则我宁愿不处理中断，因为我必须处理`ClosedByInterruptException`异常并且这之前已经引起了问题。

此外，它的主体`foo()`很长，里面有很多函数调用，所以`if (stop == true) return;`不能在函数中编写。

有没有比制作阻塞线程更好的方法来做到这一点？如果是这样，怎么做？如果没有，我将如何制作阻塞线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:11:22.800

这个怎么样？

```
// Create and start the thread
MyThread thread = new MyThread();
thread.start();

while (true) {
    // Do work

    // Pause the thread
    synchronized (thread) {
        thread.pleaseWait = true;
    }

    // Do work

    // Resume the thread
    synchronized (thread) {
        thread.pleaseWait = false;
        thread.notify();
    }

    // Do work
}

class MyThread extends Thread {
    boolean pleaseWait = false;

    // This method is called when the thread runs
    public void run() {
        while (true) {
            // Do work

            // Check if should wait
            synchronized (this) {
                while (pleaseWait) {
                    try {
                        wait();
                    } catch (Exception e) {
                    }
                }
            }

            // Do work
        }
    }
} 
```

（取自[http://www.exampledepot.com/egs/java.lang/PauseThread.html](http://www.exampledepot.com/egs/java.lang/PauseThread.html)不是我自己的作品）

# javascript - 滚动条在 IE7 中消失

> ID：10522667
> 
> 赞同：-4
> 
> 时间：2012-05-09T19:15:15.300
> 
> 标签：javascript, css

我似乎一辈子都无法确定这个问题。可能是 CSS 或 JS 问题。

请参阅[https://healthplans.providence.org/Pages/default.aspx](https://healthplans.providence.org/Pages/default.aspx)

PS。请不要关闭这个问题。我认为这对社区是有益的，因为这有助于解决 IE7 中缺少滚动条的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:19:37.793

也许 IE7 只是尊重您在页面中的`body`'s `overflow: hidden;`，尽管您（其他）尝试在其他地方覆盖它。尝试删除该行，看看它是否有帮助（它位于 default.aspx 的第 54 行）。

# google-app-engine - AppEngine Google Apps 身份验证：您可以切换域吗？

> ID：10522668
> 
> 赞同：0
> 
> 时间：2012-05-09T19:15:17.000
> 
> 标签：google-app-engine, authentication

我已经使用 Google Apps 身份验证设置了一个 AppEngine 帐户，并且我已经接受了它[无法更改](https://developers.google.com/appengine/articles/auth)的事实。但是你能切换它绑定的域吗？

**更新** 忘记了一点。我们已经将新域中的用户添加为 AppEngine 管理员，并且我们能够与他们一起登录 AppEngine 控制台。但是应用程序本身中存在某些 URL（例如 cron 作业/任务队列），我们已将其限制为仅由管理员访问。当我们尝试访问它们时，我们会被定向到特定于域的 AppEngine 页面（即[http://appengine.google.com/a/myolddomain.com](http://appengine.google.com/a/myolddomain.com)）进行登录。当我将 URL 更新到新域时，我可以登录，但随后我得到一个页面，上面写着“该页面正在请求访问您的 Google 帐户的权限。请选择您要使用的帐户。” 并且列表中没有可供选择的选项。我可以单击“继续”，但随后又被重定向回旧域的登录页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:45:36.183

不会。如果您使用 Google Apps 身份验证创建了一个应用程序，它会与该域绑定以进行永久身份验证。当然，这仅在您使用用户 API 时才重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:43:43.747

是的，您可以切换到另一个域。App Engine 是您的应用程序域中的一项服务。因为它是一项服务，所以我认为您可以将同一个 apppot 服务添加到多个应用程序域。

# ms-access - Access 2003：无法让命令按钮查询的结果出现在表单的文本框中

> ID：10522675
> 
> 赞同：1
> 
> 时间：2012-05-09T19:15:45.553
> 
> 标签：ms-access, ms-access-2003

我有一个与名为“GenderCount”的查询相关联的命令按钮。当我单击按钮时，结果出现在子表中。我需要将结果显示在表单 (Text26) 上的文本框中。这是我的代码 - 在此先感谢您的任何建议：

```
Private Sub Command21_Click()
On Error GoTo Err_Command21_Click

    Dim stDocName As String

    stDocName = "GenderCount"
    DoCmd.OpenQuery stDocName, acNormal, acEdit

Exit_Command21_Click:
    Exit Sub

Err_Command21_Click:
    MsgBox Err.Description
    Resume Exit_Command21_Click

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:16:43.063

这是你需要的

```
Private Sub Command21_Click()
On Error GoTo Err_Command21_Click

    me.txtField1 = dlookup("CountOfGender","GenderCount","Gender = M")
    me.txtField1 = dlookup("CountOfGender","GenderCount","Gender = F")

Exit_Command21_Click:
    Exit Sub

Err_Command21_Click:
    MsgBox Err.Description
    Resume Exit_Command21_Click

End Sub 
```

# android - Android UI 最佳实践 iOS UIButton TypeInfoLight

> ID：10522680
> 
> 赞同：2
> 
> 时间：2012-05-09T19:16:30.870
> 
> 标签：android

是否有在应用程序屏幕上提供有关特定按钮或功能的帮助文本的 Android 最佳做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:28:58.003

这通常不适用，但请记住始终为您的 ActionBar 操作项提供 title 属性。长按这些按钮将显示带有标题的吐司。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:21:23.160

您是指`android:contentDescription`XML 中的属性吗？

[在developer.android.com 网站](http://developer.android.com/training/accessibility/index.html)上也有一篇很好的文章

# macos - 用于根据文件名查找文件并对其进行搜索替换的 Bash 脚本

> ID：10522681
> 
> 赞同：2
> 
> 时间：2012-05-09T19:16:35.323
> 
> 标签：macos, bash, replace

我有一堆文件（同名，比如 abc.txt）散布在网络文件系统中。

我需要递归搜索每个文件，一旦找到每个文件，就进行内容搜索并替换它们。

经过一番研究，我发现我可以使用 find 命令找到文件（使用 -r 进行递归，对吗？）。就像是：

```
 find . -r -type f  abc.txt 
```

并使用 sed 对每一个进行查找和替换：

```
 sed -ie 's/search/replace/g' abc.txt 
```

但我不确定如何将两者粘合在一起，以便找到所有出现的 abc.txt，然后对每一个进行搜索/替换。

我的目录树非常大，所以我知道递归搜索所有目录需要很长时间，但这比手动尝试查找每个文件要好。

我在带有 Bash 的 OSX 10.6 上。

谢谢大家！

更新：我认为下面发布的答案可能适用于其他操作系统（也许是 linux），但对于 OSX，我不得不稍微调整一下。

```
 find . -name abc.text -exec sed -i '' 's/search/replace/g' {} + 
```

在 sed 中的 -i 之后似乎需要空引号，以表明我们不想生成备份文件。手册页内容如下：

-i 扩展名：

就地编辑文件，以指定的扩展名保存备份。如果给出零长度扩展名，则不会保存备份。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T19:20:14.490

```
find . -r -type f abc.txt -exec sed -i -e 's/search/replace/g' {} + 
```

# asp.net - 我想覆盖gridview HeaderStyle。目前皮肤（通过主题）正在申请

> ID：10522683
> 
> 赞同：1
> 
> 时间：2012-05-09T19:16:38.530
> 
> 标签：asp.net, css, themes

我想覆盖gridview HeaderStyle。
目前皮肤（通过主题）正在我的网格视图上应用。
我只想覆盖headerstyle，想给我自己的CSS。
我怎样才能做到这一点。

提前致谢

**编辑*_ _* __ *_* __ *_* __ *_* __ *_* __**

```
 <asp:GridView ID="gvSports" runat="server"> 
      <HeaderStyle BackColor="Blue" ForeColor="Navy" />

....List of Columns

</asp:Gridview> 
```

皮肤文件(App_Themes>Default>skinFile.skin)-----------------------------

```
asp:GridView runat="server">
    <HeaderStyle BackColor="Green" />
    <PagerStyle BackColor="Gray" />
</asp:GridView> 
```

我想在 HeaderStyle 中赋予蓝色（背景色），但由于皮肤文件，它需要绿色（请检查皮肤代码）

**我只想覆盖 HeaderStyle**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:42:08.417

为此，您可以使用 skinid 制作新皮肤。

```
<asp:GridView ID="gvSports" runat="server" SkinID="BlueGrid"> 

....List of Columns

</asp:Gridview> 
```

对于皮肤，您通常为 gridvievs 保留旧的皮肤，并为您的特殊情况保留一个额外的皮肤。

```
<asp:GridView runat="server">
    <HeaderStyle BackColor="Green" />
    <PagerStyle BackColor="Gray" />
</asp:GridView>

<asp:GridView SkinID="BlueGrid" runat="server">
    <HeaderStyle BackColor="Blue" />
    <PagerStyle BackColor="Gray" />
</asp:GridView> 
```

# php - 在php中以root身份运行shell脚本？

> ID：10522690
> 
> 赞同：-2
> 
> 时间：2012-05-09T19:17:02.903
> 
> 标签：php

我正在尝试编写一个 php 脚本来将用户添加到 LDAP。为此，我有一个名为“addldapuser.sh”的 shell 脚本，它将接受用户/屏幕名/密码组合并将它们添加到 LDAP。该脚本可以正常工作。我们希望用户能够在 Web 表单上输入他们的信息，然后该表单将调用所述脚本并将用户正确添加到 LDAP。addldapuser 脚本目前需要以 root 身份运行，虽然我知道安全问题，但可以稍后处理。我已经尝试了我能想到或找到的所有东西，给出了我能想到的所有许可，给出了我能扎根的所有东西，在 Apache 上混了一段时间，现在我没有想法了。

```
$scrName = $_POST['screenname'];
$usrName = $_POST['username'];
$pass = $_POST['password'];

if (isset($_POST['submit']))
{
    $out =  nl2br(shell_exec("sudo /EasyLDAP/old_scripts/addldapuser.sh " . $usrName . " " . $scrName . " " . $pass));

} 
```

再一次，我知道这只是一个可怕的想法，肯定会导致黑客永远摧毁我们所有人，但我的老板希望我至少让它以这种方式运行。

我知道我们至少应该清理输入，并且会在适当的时候处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:28:07.580

我建议创建一个守护进程，它将以 root 身份运行，并与在用户级别运行的脚本进行通信。

您可以做非常简单的python rpc 服务器（例如，内置的XML-RPC）和一个客户端作为粘合剂，将其中一个作为服务器和root 运行，另一个作为客户端脚本运行。

然后，php 代码将使用所需参数执行 python 脚本，然后可以与 python 服务器脚本通信。

作为一个好处，如果您做好服务器部分，您将获得潜在的安全性。我选择 python 作为一种语言，它内置了大部分功能并且使用起来非常简单。

例子：

服务器 - [http://docs.python.org/library/simplexmlrpcserver.html#simplexmlrpcserver-example](http://docs.python.org/library/simplexmlrpcserver.html#simplexmlrpcserver-example)

客户端 - [http://docs.python.org/library/xmlrpclib.html#example-of-client-usage](http://docs.python.org/library/xmlrpclib.html#example-of-client-usage)

或者，如果您坚持使用 php，您可以将服务器进程作为[php 守护进程](http://kevin.vanzonneveld.net/techblog/article/create_daemons_in_php/)运行，并通过一些类似的 RPC 方式连接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T10:07:28.890

我最近发布了一个项目，可以让 PHP 获得一个真正的 Bash shell 并与之交互，你可以很容易地用 root 获得一个 shell。在这里获取：[https ://github.com/merlinthemagic/MTS](https://github.com/merlinthemagic/MTS)

下载后，您只需使用以下代码：

```
$shell    = \MTS\Factories::getDevices()->getLocalHost()->getShell('bash', true);

$strCmd = "/EasyLDAP/old_scripts/addldapuser.sh " . $usrName . " " . $scrName . " " . $pass;
$return1  = $shell->exeCmd($strCmd);

echo $return1;// return from your script 
```

# php - 使用 jQuery ajax 将多个复选框和文件上传到 php 到电子邮件

> ID：10522694
> 
> 赞同：0
> 
> 时间：2012-05-09T19:17:13.543
> 
> 标签：php, jquery, ajax, forms, form-post

我正在尝试将复选框值传递给电子邮件，并将上传的文件作为附件添加到电子邮件中。到目前为止，这是我所拥有的（一切正常，但是复选框被传递和文件上传）......我需要的主要是复选框 - 文件上传只是一个额外的 - 你也将如何将它发送到数据库;]

**HTML 表单**：

```
<form id="reg-form" class="cols" method="post" action="#">  
    <fieldset class="w50">                                                        
        <p class="form-subscr-field">
            <label for="reg_first" id="reg_first_label">First Name: <span style="color:#F00">*</span></label>
            <input id="reg_first" type="text" name="reg_first" class="inputbox" size="10" tabindex="1" />
            <label class="error error-tip" for="reg_first" id="first_error" style="display: none;">Please enter your First Name</label>
        </p>
        <p class="form-subscr-field">
            <label for="reg_email" id="reg_email_label">E-mail Address: <span style="color:#F00">*</span></label>
            <input id="reg_email" type="text" name="reg_email" class="inputbox" size="10" tabindex="3" />
            <label class="error error-tip" for="reg_email" id="email_error" style="display: none;">Please enter your Email Address</label>
            <label class="error error-tip" for="reg_email" id="invalid_error" style="display: none;">Invalid Email Address.</label>
            </p>
        <p class="form-subscr-field">
            <label for="reg_zip" id="reg_zip_label">Zip Code: <span style="color:#F00">*</span></label>
            <input id="reg_zip" type="text" name="reg_zip" class="inputbox"  size="10" tabindex="5" />
            <label class="error error-tip" for="reg_zip" id="zip_error" style="display: none;">Please enter your Zip Code</label>
            <label class="error error-tip" for="reg_zip" id="invalid_error2" style="display: none;">Invalid Zip Code.</label>
        </p>
        <p class="form-subscr-field">
            <label for="reg_company" id="reg_company_label">Company Name: </label>
            <input id="reg_company" type="text" name="reg_company" class="inputbox" size="10" tabindex="1" />
        </p>
    </fieldset>

    <fieldset class="w50">
        <p class="form-subscr-field">
            <label for="reg_last" id="reg_last_label">Last Name: <span style="color:#F00">*</span></label>
            <input id="reg_last" type="text" name="reg_last" class="inputbox" size="10" tabindex="2" />
            <label class="error error-tip" for="reg_last" id="last_error" style="display: none; width:200px;">Please enter your Last Name</label>
        </p>
        <p class="form-subscr-field">
            <label for="reg_phone" id="reg_phone_label">Phone Number: <span style="color:#F00">*</span></label>
            <input id="reg_phone" type="text" name="reg_phone" class="inputbox" size="10" maxlength="20" tabindex="4" />
            <label class="error error-tip" for="reg_phone" id="phone_error" style="display: none; width:200px;">Please enter your Phone Number</label>
        </p>
        <p class="form-subscr-field">
            <label for="reg_areyou" id="reg_areyou_label">Are you&hellip;</label>
            <select id="reg_areyou" type="text" name="reg_areyou" class="inputbox" tabindex="6">
                <option value="Opt1">Select an option</option>
                <option value="Homeowner">Homeowner</option>
                <option value="Contractor">Contractor</option>
                <option value="Commercial Buyer">Commercial Buyer</option>
                <option value="Other">Other</option>
            </select>
        </p>
        <p class="form-subscr-field">
            <label for="reg_upload" id="reg_upload_label">Do you have a detailed file or image for your project - Upload it now! </label>
            <input name="reg_upload" id="reg_upload" type="file" style="cursor:pointer;">
        </p>
    </fieldset>
    <div class="clear"></div><br/>
    <h3 class="underline"><strong>Project</strong> Information</h3> 
    <label>Are you looking into doing any of the following?</label>       
        <table cellpadding="5" cellspacing="5" border="1" width="100%">
            <tr>
                <td align="left" valign="top"><input name="reg_checkPick" id="Decking" value="Decking" type="checkbox"><label>Decking</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Windows" value="Windows" type="checkbox"><label>Windows</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Doors" value="Doors" type="checkbox"><label>Doors</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Flooring" value="Flooring" type="checkbox"><label>Flooring</label></td>
            </tr>
            <tr>
                <td align="left" valign="top"><input name="reg_checkPick" id="Countertops" value="Countertops" type="checkbox"><label>Countertops</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Cabinets" value="Cabinets" type="checkbox"><label>Cabinets</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Sink and Faucets" value="Sink and Faucets" type="checkbox"><label>Sink and Faucets</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Siding" value="Siding" type="checkbox"><label>Siding</label></td>
            </tr>
            <tr>
                <td align="left" valign="top"><input name="reg_checkPick" id="Roofing" value="Roofing" type="checkbox"><label>Roofing</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Paint" value="Paint" type="checkbox"><label>Paint</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Hardware" value="Hardware" type="checkbox"><label>Hardware</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Fireplaces" value="Fireplaces" type="checkbox"><label>Fireplaces</label></td>
            </tr>
            <tr>
                <td align="left" valign="top"><input name="reg_checkPick" id="Installation" value="Installation" type="checkbox"><label>Installation</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Design Ideas" value="Design Ideas" type="checkbox"><label>Design Ideas</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Furnishings" value="Furnishings" type="checkbox"><label>Furnishings</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Plumbing" value="Plumbing" type="checkbox"><label>Plumbing</label></td>
            </tr>
            <tr>
                <td align="left" valign="top"><input name="reg_checkPick" id="Lumber" value="Lumber" type="checkbox"><label>Lumber</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Specialty Rooms" value="Specialty Rooms" type="checkbox"><label>Specialty Rooms</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Trusses" value="Trusses" type="checkbox"><label>Trusses</label></td>
                <td align="left" valign="top"><input name="reg_checkPick" id="Mill Work" value="Mill Work" type="checkbox"><label>Mill Work</label></td>
            </tr>
        </table>
    <p class="form-subscr-field">
        <label for="reg_message" id="comment_label">Project Details: <span style="color:#F00">*</span></label>
        <textarea id="reg_message" name="reg_message" rows="8" cols="30" tabindex="8" placeholder="Please provide as much information and details that you can."></textarea>
        <label class="error error-tip" for="reg_message" id="message_error" style="display: none;">Please enter Your Message</label>
    </p>
    <p class="form-subscr-field">
        <label for="reg_human" id="reg_human_label">Please add <strong>2 + 2</strong> to verify your human! <span style="color:#F00">*</span></label>
        <input id="reg_human" type="text" name="reg_human" class="inputbox" maxlength="1" size="1" placeholder="Hint - it's 4" tabindex="9" />
        <label class="error error-tip" for="reg_human" id="human_error" style="display: none;">You need to enter 4.</label>
        <label class="error error-tip" for="reg_human" id="invalid_error3" style="display: none;">Your math is off.</label>
    </p>
    <div class="clear"></div>
    <div class="submit-contact">
        <p><input type="submit" class="cool-button2 csbutton spot-action" value="Submit" tabindex="10" /> <button type="reset" class="csbutton-color" tabindex="11">Reset</button></p> 
    </div>
</form> 
```

**JS文件**

```
//quote form validation
$(function () {$('.error').hide(); $(".cool-button2").click(function () {$('.error').hide(); $("label#invalid_error").hide(); $("label#email_error").hide();
    var first2 = $("input#reg_first").val(); if (first2 === "") {$("label#first_error").show(); $("input#reg_first").focus(); return false; }
    var last2 = $("input#reg_last").val(); if (last2 === "") {$("label#last_error").show(); $("input#reg_last").focus(); return false; }
    var email2 = $("input#reg_email").val(); if (email2 === "") {$("label#email_error").show(); $("input#reg_email").focus(); return false; }
    var emailRegEx2 = /^([a-zA-Z0-9])(([a-zA-Z0-9])*([\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/;
    var phone2 = $("input#reg_phone").val(); if (phone2 === "") {$("label#phone_error").show(); $("input#reg_phone").focus(); return false; }
    var zip2 = $("input#reg_zip").val(); if (zip2 === "") {$("label#zip_error").show(); $("input#reg_zip").focus(); return false; }
    var zipRegEx2 = /^\d{5}(-\d{4})?$/;
    var areyou2 = $('#reg_areyou option:selected').text();
    var company2 = $("input#reg_company").val();
    var checkboxValues = new Array(); $("input[name='reg_checkPick']:checked").each(function(i) {data.push($(this).val());});
    var message2 = $("textarea#reg_message").val(); if (message2 === "") {$("label#message_error").show(); $("textarea#reg_message").focus(); return false; }
    var human2 = $("input#reg_human").val(); if (human2 === "") {$("label#human_error").show(); $("input#reg_human").focus(); return false; }
    var humanRegEx2 = 4;

    if (document.getElementById('reg_email').value.search(emailRegEx2) === -1) { $("label#invalid_error").show(); $("input#reg_email").focus(); }
    else if (document.getElementById('reg_zip').value.search(zipRegEx2) === -1) { $("label#invalid_error2").show(); $("input#reg_zip").focus(); }
    else if (document.getElementById('reg_human').value.search(humanRegEx2) === -1) { $("label#invalid_error3").show(); $("input#reg_human").focus(); }
    else {
        var dataString = 'reg_first=' + first2 + '&reg_last=' + last2 + '&reg_email=' + email2 + '&reg_phone=' + phone2 + '&reg_zip=' + zip2 + '&reg_areyou=' + areyou2 + '&reg_company=' + company2 + '&reg_checkPick=' + checkboxValues + '&reg_message=' + message2; $.ajax({type: "POST", url: "reg.php", data: dataString, success: function () {$('#reg-form').html("<div id='message2'></div>"); $('#message2').html("<h3>Request Submitted</h3>").append("<p>Thank you for contacting us - we will be in touch. If you have any further questions, you can always mail us at <a href=\"mailto:\">notmine</a> or call our support team at Ph: 00000000.</p>").hide().fadeIn(1500, function () {$('#message2').append("<img id='checkmark' src='/submit.png' />"); }); }}); }
    return false; }); }); 
```

**PHP 文件**：

```
<?php
if ((isset($_POST['reg_first'])) && (strlen(trim($_POST['reg_first'])) > 0)) {
    $reg_first = stripslashes(strip_tags($_POST['reg_first']));
} else {$reg_first = 'No First Name entered';}

if ((isset($_POST['reg_last'])) && (strlen(trim($_POST['reg_last'])) > 0)) {
    $reg_last = stripslashes(strip_tags($_POST['reg_last']));
} else {$reg_last = 'No Last Name entered';}

if ((isset($_POST['reg_email'])) && (strlen(trim($_POST['reg_email'])) > 0)) {
    $reg_email = stripslashes(strip_tags($_POST['reg_email']));
} else {$reg_email = 'No email entered';}

if ((isset($_POST['reg_phone'])) && (strlen(trim($_POST['reg_phone'])) > 0)) {
    $reg_phone = stripslashes(strip_tags($_POST['reg_phone']));
} else {$reg_phone = 'No Phone Number entered';}

if ((isset($_POST['reg_areyou'])) && (strlen(trim($_POST['reg_areyou'])) > 0)) {
    $reg_areyou = stripslashes(strip_tags($_POST['reg_areyou']));
} else {$reg_areyou = 'No selection';}

if ((isset($_POST['reg_zip'])) && (strlen(trim($_POST['reg_zip'])) > 0)) {
    $reg_zip = stripslashes(strip_tags($_POST['reg_zip']));
} else {$reg_zip = 'No Zip Code entered';}

if ((isset($_POST['reg_company'])) && (strlen(trim($_POST['reg_company'])) > 0)) {
    $reg_company = stripslashes(strip_tags($_POST['reg_company']));
} else {$reg_company = 'No Company Name entered';}

if ((isset($_POST['reg_checkPick'])) && (strlen(trim($_POST['reg_checkPick'])) > 0)) {
    $reg_checkPick = stripslashes(strip_tags($_POST['reg_checkPick']));
} else {$reg_checkPick = 'Noting was checked';}

if ((isset($_POST['reg_message'])) && (strlen(trim($_POST['reg_message'])) > 0)) {
    $reg_message = stripslashes(strip_tags($_POST['reg_message']));
} else {$reg_message = 'No message entered';}

ob_start();
?>
<html>
<head>
<style type="text/css">
</style>
</head>
<body>
<table width="600" border="1" cellspacing="2" cellpadding="2">
  <tr bgcolor="#eeffee">
    <td>First Name</td>
    <td>Last Name</td>
    <td>Email</td>
    <td>Phone Number</td>
    <td>Zip Code</td>
    <td>Are You</td>
    <td>Company Name</td>
    <td>Looking into doing the following</td>
    <td>Message</td>
  </tr>
  <tr bgcolor="#eeeeff">
    <td><?=$reg_first;?></td>
    <td><?=$reg_last;?></td>
    <td><?=$reg_email;?></td>
    <td><?=$reg_phone;?></td>
    <td><?=$reg_zip;?></td>
    <td><?=$reg_areyou;?></td>
    <td><?=$reg_company;?></td>
    <td><?=$reg_checkPick;?></td>
    <td><?=$reg_message;?></td>
  </tr>
</table>
</body>
</html>
<?
$body = ob_get_contents();

$to = 'notmine@hotmail.com';
$email = $reg_email;
$fromaddress = $reg_email;
$fromname = "Request a Quote";

require("phpmailer.php");

$mail = new PHPMailer();

$mail->From     = $reg_email;
$mail->FromName = ("$reg_first $reg_last");
$mail->AddAddress("notmine@hotmail.com","not mine");      //change to your email address

$mail->WordWrap = 50;
$mail->IsHTML(true);

$mail->Subject  =  "Request a Quote: form submitted";
$mail->Body     =  $body;
$mail->AltBody  =  "This is the text-only body";

if(!$mail->Send()) {
    $recipient = 'notmine@hotmail.com';    //change to your email address
    $subject = 'reg Info Form: form failed';
    $content = $body;   
  mail($recipient, $subject, $content, "From: $reg_email\r\nReply-To: $email\r\nX-Mailer: DT_formmail");
  exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:25:36.033

用于获取复选框值使用

`<input name="reg_checkPick[]" id="Countertops" value="Countertops" type="checkbox">`

代替

`<input name="reg_checkPick" id="Countertops" value="Countertops" type="checkbox">`

即您必须将名称指定为数组。

并且在提交复选框值将在一个数组中，并且可以使用循环或其他方式获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:00:09.507

我希望这能帮到您。

```
$(':checkbox').map(function() {
  return this.id;
}).get().join(','); 
```

一旦在我的项目中，我使用了这样的地图：我已经更改，以便您可以在代码中使用首先，使用 id 制作表格。

```
<table id='checkboxes' cellpadding='5' cellspacing='5' border='1' width='100%'> 
```

在您的 js 中更改复选框代码。您仍然可以将确切的 [name='reg_checkPick'] 用于下面的代码以使其更具体。

我在本地测试过。

```
var selected = $("#checkboxes input:checked").map(function(i,el){
return $(this).val();}).get();
 alert(selected); 
```

您将获得警报中的值，因为

例如：如果我选择了绘画和设计理念

油漆，设计理念

# vim - 映射函数以键入 vim，将行从一个缓冲区中拉出，将某些内容添加到该行并将其放入另一个缓冲区

> ID：10522702
> 
> 赞同：1
> 
> 时间：2012-05-09T19:17:41.187
> 
> 标签：vim

在 .c 文件中，我想在函数定义上按 F2，将该定义拉到寄存器中，将其放入 .h 文件中，并在该行中添加一个分号。

我已经把拉下来的部分放下了。

```
:nmap  <F2> "aY 
```

其余的对我来说是个问题。

```
:nmap  <F2> "aY :let@a.=";"<CR> 
```

将分号放在换行符上

而且我什至不知道如何将缓冲区作为目标。我知道`:b<number>`更改为一个，但我不知道如何解决特定的问题。

更新：

```
nmap <F2> "aY :b12<CR>"ap A;<ESC>:b11<CR> 
```

作品。

:b12 是标题， :b11 是源，但正如预期的那样，它只能通过在当前窗口中切换缓冲区来工作。没有办法直接做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:42:56.463

对于缓冲区切换部分，您可以使用 a.vim 插件： [http ://www.vim.org/scripts/script.php?script_id=31](http://www.vim.org/scripts/script.php?script_id=31)

或者使用如下功能：

```
fun! ToggleCSourceHeader()
  if (expand ("%:e") == "c")
    find %:t:r.h
  else
    find %:t:r.c
  endif
endfun 
```

# c# - 基于另一个配置值的自定义配置验证？

> ID：10522703
> 
> 赞同：1
> 
> 时间：2012-05-09T19:17:49.487
> 
> 标签：c#, .net, validation, filesystemwatcher, custom-configuration

我正在寻找使用 .NET FileSystemWatcher 监视某些目录的 Windows 服务。我的计划是拥有一个具有 IncludeSubdirectores=True 的 FileSystemWatcher。但是我不想监视所有的子目录。所以我的方法是创建一个我确实想要监控的目录的“白名单”。如果文件被更改并且它位于我真正关心的目录中，我将采取一些措施。

现在这是我的问题所在。我希望在 app.config 中使用自定义配置部分来构建我的“白名单”。

```
<ApplicationMonitoring>
    <MainDirectoryMonitored path="C:\MonitoredApps" />
    <SubDirectoriesMonitored>
        <Directory application="App1" path="C:\MonitoredApps\App1" />
        <Directory application="App2" path="C:\MonitoredApps\App2" />
        <Directory application="App3" path="C:\MonitoredApps\App3\SubDir1" />
    </SubDirectoriesMonitored>
</ApplicationMonitoring> 
```

到目前为止还不错吧？我可以将 fileSystemWatcher.Path = 设置为“MainDirectoryMonitored”的“path”属性，并且可以枚举“SubDirectoriesMonitored”并检查它是否是我想要监控的。

我想知道的是是否有可能**验证**子目录的路径确实确实落在了受监控的主目录的路径下。

示例：验证 C:\MonitoredApps\App3\SubDir1 确实位于 C:\MonitoredApps 等之下的*某个位置。*

我知道它对用户来说应该非常直观，他们应该正确输入内容，但我想尽可能消除所有错误。

我认为这可以通过某种自定义配置验证器来完成，但是
a) 我不确定它是否可以使用配置中的另一个值来验证
b) 我不知道如何去做:)

# c# - 在 WPF 中，如何在代码后面引用资源库中的字体？

> ID：10522704
> 
> 赞同：15
> 
> 时间：2012-05-09T19:17:51.633
> 
> 标签：c#, wpf, fonts, pack-uri

我有一个应用程序对资源使用单独的库程序集（但不是没有代码的仅资源程序集），我想在库中包含自定义字体。

`Open Type Font`如果我将其 .otf 文件作为资源添加到正在执行的程序集的项目（而不是资源库项目）中，我可以加载字体，即.otf 文件，并将属性设置为 Build Action = 'Resource ' 和 Copy to Output = 'Do Not Copy'，使用以下代码：

```
FontFamily font = new FontFamily(new Uri("pack://application:,,,/"), 
                      "./Resources/#CustomFont")); // Resources is a subfolder 
```

但是，当我尝试将字体添加到资源库项目时，字体不会加载。我尝试使用以下代码来加载它（另请注意：我对包 URI 没有太多经验）：

```
FontFamily font = new FontFamily(new Uri("pack://application:,,,/MyLibrary"),
                      "./Resources/#CustomFont")); 
                      // there is a Resources subfolder in my library as well
                      // not sure about whether I need the . 
```

该库确实适用于其他资源，例如图像。

我还尝试了 URI 的一系列其他排列但没有成功（它也不会抛出异常，只是使用默认字体显示，不确定这是否是一个单独的问题）。

我一直在 MSDN 上[使用 Packaging Fonts with Applications](http://msdn.microsoft.com/en-us/library/ms753303.aspx)工作，它有一个创建字体资源库的示例，但没有使用代码背后的示例（我被迫为此使用代码）。

关于我需要做什么的任何想法？我偏离轨道了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T20:19:09.640

我让它在我的应用程序中工作（在代码隐藏中从另一个程序集中加载字体）。对于这样的字体 URI：

```
pack://application:,,,/MyAssembly.Name;component/Resources/Fonts/#Swis721 Md BT 
```

我让它工作的方式（经过痛苦的反复试验，如果我没记错的话）是：

```
new FontFamily(
    new Uri("pack://application:,,,/MyAssembly.Name;component/Resources/Fonts/"),
    "./#Swis721 Md BT"
) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T13:45:01.873

WPF 不支持使用包表示法以编程方式创建 FontFamily 对象。

文档在页面末尾说，[here](https://msdn.microsoft.com/en-us/library/ms753303(v=vs.110).aspx)

这是报价：

> **使用 pack: 表示法的绝对 URI：** WPF 应用程序不允许您以编程方式使用“pack:”作为对字体的绝对统一资源标识符 (URI) 引用的一部分来创建 FontFamily 对象。例如，“pack://application:,,,/resources/#Pericles Light”是一个无效的字体引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T21:48:16.223

（我知道，老问题，但我没有找到正确的答案。）

罗斯的答案仅适用于某些版本的网络框架。（不适用于网络 4.6）

我认为这是最好的答案：

**枚举应用程序中的字体：**

```
 foreach (FontFamily fontFamily in Fonts.GetFontFamilies(new Uri("pack://application:,,,/"), "./resources/"))
            {
                // Perform action.
            } 
```

[参考](https://msdn.microsoft.com/en-us/library/ms753303(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T07:12:43.983

为了从代码中引用字体资源项，您必须提供由两部分组成的字体资源引用：基本统一资源标识符 (URI)；和字体位置参考。这些值用作 FontFamily 方法的参数。下面的代码示例显示了如何在名为 resources 的项目子目录中引用应用程序的字体资源。

```
// The font resource reference includes the base URI reference (application directory level),
// and a relative URI reference.

myTextBlock.FontFamily = new FontFamily(new Uri("pack://application:,,,/"), "./resources/#Pericles Light"); 
```

基本统一资源标识符 (URI) 可以包括字体资源所在的应用程序子目录。在这种情况下，字体位置引用不需要指定目录，但必须包含前导“./”，这表示字体资源位于由基本统一资源标识符 (URI) 指定的同一目录中。下面的代码示例显示了引用字体资源项的​​另一种方法——它等同于前面的代码示例。

```
// The base URI reference can include an application subdirectory.

myTextBlock.FontFamily = new FontFamily(new Uri("pack://application:,,,/resources/"), "./#Pericles Light"); 
```

来源：[docs.microsoft.com](https://docs.microsoft.com/en-us/dotnet/desktop/wpf/advanced/packaging-fonts-with-applications?view=netframeworkdesktop-4.8)

# android - Eclipse 中带有 Maven 的 Android SDK Full Javdocs

> ID：10522707
> 
> 赞同：0
> 
> 时间：2012-05-09T19:18:07.020
> 
> 标签：android, eclipse, maven, javadoc

我有一个使用 maven-eclipse-plugin 和 android-maven-plugin 的 Android Maven 项目。由于它从 Maven Central（已存根）中获取 jars 和 javadocs，我想改为链接回 Android SDK 文件夹中的 javadocs。

我尝试了两件事

1.  将 $ANDROID_HOME/docs/reference 文件夹打包到一个 Jar 中，然后使用`mvn install:install-file`.

2.  在我的构建路径上手动将 android-2.2.1.jar 的 javadoc 位置定义为 $ANDROID_HOME/docs/reference

这些都没有在实际链接回正确的 Javadocs 方面取得任何成功——我仍然使用那些不提供有关方法的任何实际信息的存根文件。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:45:48.847

这应该适用于您的 IDE 设置。

但是 Eclipse 可能会感到困惑，因为源代码和二进制工件将不再相互对应，因为 SDK 和中央存储库中的原始 android jar 都是存根的。

也就是说，我也从未尝试过将其连接在一起，而且我正在使用 IntelliJ，所以我无法在 Eclipse 方面为您提供太多帮助。

# ruby - 使用 webdriver 和 Grid2 并行执行 RSpec 测试

> ID：10522708
> 
> 赞同：1
> 
> 时间：2012-05-09T19:18:16.560
> 
> 标签：ruby, rspec, parallel-processing, webdriver

*   GUI自动化工具：Webdriver
*   并行执行：Selenium Grid 2
*   脚本语言：Ruby
*   BDD 工具：Rspec

**我的测试看起来像：**

```
def set_up
  @driver = Selenium::WebDriver.for(:remote,:url => "http://localhost:4444",
    :desired_capabilities => :firefox)
end

def clean_up
  @driver.quit
end

it "test_direct_log_in" do
  @log_in_page = Page.new(@driver).go_to_log_in_Page
  @log_in_page.login("apple@gmail.com","password")
  Assert.new(@driver).verify_text_present("My Dashboard")
end

it "test_direct_log_in" do
  @log_in_page = Page.new(@driver).go_to_log_in_Page
  @log_in_page.login("banana@gmail.com","password")
  Assert.new(@driver).verify_text_present("My Dashboard")
end 
```

脚步 ：

*   使用 java -jar selenium-server-staalone-2.3.0.jar -role hub 启动中心
*   使用 java -jar selenium-server-standalone-2.21.0.jar -role node -hub [http://localhost:4444/grid/register](http://localhost:4444/grid/register) -maxsession=20 -port 5555将节点分配给集线器

我能够按顺序执行测试..真正的问题是我无法并行执行测试......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:54:57.507

根据您所说的，让我澄清一下，硒网格不会在一个测试套件下运行多个单元测试，因为如果您在一个文件（例如 apple.rb）中的一个测试套件下有 4 个测试，因为当运行测试文件，rspec 将按顺序运行它们，最终 sel grid 将按顺序运行它们。

Selenium 网格虽然会同时运行多个请求到达集线器。因此，例如，如果您有两个终端实例并从两个实例运行 apple.rb，则 Sel 网格将并行运行这些测试。

您可能正在寻找的是让 Rspec 并行运行各个测试。

这可以帮助[https://github.com/grosser/parallel_tests](https://github.com/grosser/parallel_tests)

# c# - 弱事件如何运作？

> ID：10522712
> 
> 赞同：17
> 
> 时间：2012-05-09T19:18:28.683
> 
> 标签：c#, wpf, weak-events

我目前正在学习 WPF，并且偶然发现了弱事件的概念，但我真的很难“得到它”。我已经阅读了无数关于 Stackoverflow 的文章并查看了代码示例，但它并没有深入人心。

这是我的困境：

1.  我知道当一个对象订阅一个事件时，事件的源必须持有对订阅者的引用。
2.  我也明白，如果订阅者超出范围或被显式销毁但事件源没有被销毁，那么订阅者将不会被垃圾收集，因为事件源仍然保留对订阅者的引用。
3.  避免这种情况的常用方法是在对象被销毁之前显式取消订阅源的订阅。我知道如果程序员无法确定何时会发生这种情况，这可能是一个问题。

所以从上面我了解了事件的使用如何导致内存泄漏以及为什么需要弱引用模式，但阻止我理解的是弱事件模式实际上是如何实现这个目标的？它有什么不同？

当然，即使有一个管理事件的类，它仍然必须订阅和取消订阅处理程序到/从源，因此引用必须存在，这给使用事件的标准方式带来了同样的问题。

有人请向我解释我缺少或误解的基本概念，并帮助我“了解”弱事件模式。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T19:28:06.630

您缺少的是弱事件（在幕后使用[弱引用](http://msdn.microsoft.com/en-us/library/ms404247.aspx)，而后者又使用[GCHandle](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.aspx)）正在利用内置 CLR 行为来处理需要访问对象而不持有对它的强引用的特定情况-也就是说，它们不受您的应用程序代码所遵循的正常“规则”的约束。

见[http://sankarsan.wordpress.com/2008/08/09/weak-references/](http://sankarsan.wordpress.com/2008/08/09/weak-references/)

在幕后，WeakEventManager 持有对事件订阅者的弱引用。如果订阅者恰好在事件引发之前被 GC，WeakEventManager 只是耸耸肩说“好吧，那家伙死了，从现在开始我将停止尝试通知他这个事件”

# azure - Azure CDN - 使用 ETag 启用 HTTP 304 缓存 - 托管 Web 角色

> ID：10522714
> 
> 赞同：8
> 
> 时间：2012-05-09T19:18:37.100
> 
> 标签：azure, azure-web-roles, http-compression, http-caching, azure-cdn

我们正在尝试通过 Azure CDN 上的 ETag启用**HTTP 压缩**(gzip) 和**HTTP 304 缓存。**我们已经发现了[启用 Azure CDN 压缩](https://stackoverflow.com/a/10434390/175679)的问题，但现在我们无法让压缩和 ETag 缓存 ( [304s](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5) ) 同时工作。此问题已在[此处发布到 Azure 论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/e16a3017-651b-41a7-af2a-d0b0ae1cfe1b)。

### [这是一个压缩的示例](http://bit.ly/Lfb6c8)，但不是 HTTP 可缓存 (304) 链接：

> [https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA&group=core.js](https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA&group=core.js)

### [这是可缓存 (304)](http://bit.ly/KR3b24)但不可压缩 (gzip) 链接的示例：

> [https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA&group=core.png](https://xxxx.vo.msecnd.net/resourceManager.axd?token=HL80vX5hf3lIAAA&group=core.png)

有谁知道如何让**HTTP 缓存 (304s)**和**HTTP 压缩**在 Azure CDN 上协同工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:39:04.650

重要的是要知道您指定的是**If-None-Match**还是**If-Match**？根据我的经验，大多数用户依赖于**修改日期**和 GET **If-Modified-Since**。

**如果您需要为具有多种编码等的给定实体缓存标志，则**ETag会更强大。****

 **对于您的要求，请使用**Modified/If-Modified-Since**并且您不需要基于编码的变量缓存，这应该可以工作。

更多信息在这里：[HttpWebResponse LastModified](https://stackoverflow.com/questions/3887622/httpwebresponse-lastmodified/3889533#3889533)**

# asp.net - 保存连接到数据库的按钮代码在 ASP.NET 中不起作用

> ID：10522715
> 
> 赞同：0
> 
> 时间：2012-05-09T19:18:57.780
> 
> 标签：asp.net, database, forms, save

我正在尝试将表单中的填写信息提交到数据库。我已经为保存按钮完成了下面提到的编码。当我单击保存按钮保存信息时，我收到错误消息。我需要完成它，同样需要这里的极客提供帮助。

数据库中保存按钮数据的代码

```
public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {

        string conn = ConfigurationManager
                       .ConnectionString("welcome").ConnectionString;
        SqlConnection con=new SqlConnection(conn);
        SqlCommand cmd = new SqlCommand("Insert into abhishek(pr_name,Add,add2) values(@ah,@Ap,@qe)",con);

        cmd.CommandType = CommandType.Text;

        cmd.Parameter.Addwithvalue("@ah", TextBox1.Text.Trim());
        cmd.Parameter.Addwithvalue("@ap", TextBox2.Text.Trim());
        cmd.Parameter.Addwithvalue("@qe", TextBox3.Text.Trim());
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }
} 
```

检查下图中的错误：

![在此处输入图像描述](../Images/e8364f6f90f523585304df39f8c4b639.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:05:05.673

您在`ConnectionStrings`索引属性中缺少一个“s”。但是，一旦您修复了该错误，您还会发现该`SqlCommand.Parameters`属性中缺少更多“s”。

要揭示这些问题，请打开代码隐藏文件的属性，然后选择编译的构建操作。（另外，我可以从您的图片中看到，您的项目看起来像是设置为网站而不是 Web 应用程序；如果可能，请考虑将其转换为 Web 应用程序，因为它提供了许多好处。）

纠正语法后，您应该更改代码，以便通过按钮单击处理程序调用更新，而不是在页面加载时调用。

在您的 aspx 标记代码中：

```
<asp:Button runat="server" ID="btnSave" Text="Save" OnClick="btnSave_Click" /> 
```

在您的代码隐藏中：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    string conn = ConfigurationManager.ConnectionStrings["welcome"].ConnectionString;
    using (SqlConnection con = new SqlConnection(conn))
    {
        SqlCommand cmd = new SqlCommand("Insert into abhishek(pr_name,Add,add2) values(@ah,@Ap,@qe)", con);

        cmd.CommandType = CommandType.Text;

        cmd.Parameters.AddWithValue("@ah", TextBox1.Text.Trim());
        cmd.Parameters.AddWithValue("@ap", TextBox2.Text.Trim());
        cmd.Parameters.AddWithValue("@qe", TextBox3.Text.Trim());
        con.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

请注意，我已将代码移到按钮单击事件处理程序中，并*移出*Page_Load。Load 事件处理程序应仅用于页面执行路径上无条件需要的初始化项（即，无论在页面上单击了任何按钮），并且应该类似于以下内容：

```
protected void Page_Load(object sender, EventArgs e)
{
    // Code to run every time the page is created, both initially and on postback

    if (IsPostBack)
    {
        // Code to run every time the page is posted back (any submit event)
    }
    else
    {
        // Code to run on the initial creation of the page
    }
} 
```

# javascript - 第一个下拉列表被选中，它将从下一个下拉列表中删除所选项目

> ID：10522723
> 
> 赞同：0
> 
> 时间：2012-05-09T19:19:45.837
> 
> 标签：javascript

我在 html 中有 7 个下拉框。它们都将填充相同的数据。我想要做的是，当第一个下拉列表被选中时，它会从下一个下拉列表中删除选定的项目。因此，如果您有数据：A、B、C、D、E、F、G、H、I 在一个下拉列表中，如果我在第一个下拉列表中选择 B，那么在下一个下拉列表中它应该只显示 A、C、D ,E,F,G,H,I 等最多 7 个下拉菜单。我不知道在 JavaScript 中解决这个问题的最佳方法是什么。提前感谢您的帮助示例代码：

```
 <select>
   <option value="1">1</option>
   <option value="2">2</option>
    <option value="3">3</option>
     </select>

     <select>
     <option value="1">1</option>
     <option value="2">2</option>
      <option value="3">3</option>
      </select>
    <select>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
     </select>

     <select>
      <option value="1">1</option>
       <option value="2">2</option>
      <option value="3">3</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:40:50.973

您可以使用属性定位。我会假设 jQuery，因为为什么不呢。

```
$("select").change(function() {
   $(this)
       .next("select")
       .find("option").removeAttr("disabled")
       .end()
       .find("option[value=" + $(this).val() + "]").attr("disabled", "disabled");
})​ 
```

同样，这只是一种方法，因此如果您发布代码，我们可以做出更好的猜测。

**更新** 了这里的 JSFiddle：http: [//jsfiddle.net/FaVdu/1/](http://jsfiddle.net/FaVdu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:49:18.163

像这样**[的 jsFiddle 示例](http://jsfiddle.net/j08691/LrfNw/)**怎么样？每个下拉菜单的选定选项在其他每个下拉菜单中都被禁用。这允许您更改选项而不删除它。

```
$('select').change(function() {
    var ary = new Array();
    $('select option:selected').each(function() {
        if ($(this).val().length > 0) {
            ary.push($(this).val());
        }
    });
    $('select option').each(function() {
        if ($.inArray($(this).val(), ary) > -1) {
            $(this).attr('disabled', 'disabled');
        } else {
            $(this).removeAttr('disabled');
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T08:15:46.350

您好，以上问题的解决方案检查一下

```
 <script type="text/javascript">
        function cleanOptions(selectedOption) {
            var val = selectedOption.options[selectedOption.selectedIndex].value;
            if(val!="select"){
            //Clear all items
            $("#drop2 > option").remove();

            //Add all options from dropdown 1
            $("#" + selectedOption.id + "> option").each(function () {
                var opt = document.createElement("option");
                opt.text = this.text;
                opt.value = this.value;
                document.getElementById("drop2").options.add(opt);
            });

            //Remove selected
            $("#drop2 option[value='" + val + "']").remove();
        }
        }
    </script>

<select id="drop1"  onchange="cleanOptions(this)">
  <option value="select" selected>---select---</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="vw">VW</option>
  <option value="audi" >Audi</option>
</select>

<select id="drop2">
  <option value="select" selected>---select---</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="vw">VW</option>
  <option value="audi" >Audi</option>
</select> 
```

# android - Android软键盘会无故隐藏

> ID：10522727
> 
> 赞同：4
> 
> 时间：2012-05-09T19:20:10.947
> 
> 标签：android, webview, keyboard, visible

我遇到以下问题 - 我已放置

```
android:windowSoftInputMode = "stateAlwaysVisible" 
```

在我的清单中，它工作得相对较好，因为软件键盘**几乎**总是可见的。我有一个 webview，其中有一个可编辑的 div，用户可以在其中输入文本。但是，当用户输入一些文本并在 webview 上的其他位置（在与当前光标位置不同的位置）点击时，软件键盘将隐藏片刻，然后重新出现。我束手无策，找不到对此的解释。使用 InputMethodManager 使键盘始终可见也无济于事。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:20:54.903

问题是由于我们将所有触摸事件传递给我们通过`loadUrl("javascript : bar(event.getX(), event.getY()));"`.

原来该`loadUrl`方法在内部隐藏了软件键盘。我通过不将触摸事件传递给javascript来解决这个问题，而是使用`window.onmousemove`

# java - Mac Eclipse 项目能否在安装了 Eclipse 的 Windows PC 上运行？

> ID：10522729
> 
> 赞同：1
> 
> 时间：2012-05-09T19:20:15.430
> 
> 标签：java, eclipse

我不必能够在 Windows 上编辑它，但我必须能够在 Windows 上运行使用 Eclipse 的 mac 版本制作的程序。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:22:46.867

Java 可以在任何带有 JVM 的系统上运行，所以是的。

# java - 在逗号后面的空格后找不到要拆分的正确正则表达式

> ID：10522731
> 
> 赞同：3
> 
> 时间：2012-05-09T19:20:17.960
> 
> 标签：java, regex, string, split

我使用 string.split(regex) 所以在每个“，”之后剪切我的字符串，但我不知道如何在“，”后面的空格之后剪切。

```
String content = new String("I, am, the, goddman, Batman");
content.split("(?<=,)"); 
```

给了我数组

```
{"I,"," am,"," the,"," goddman,"," Batman"} 
```

我真正想要的是

```
{"I, ","am, ","the, ","goddman, ","Batman "} 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:23:47.207

只需将空格添加到您的正则表达式中：

[http://ideone.com/W8SaL](http://ideone.com/W8SaL)

```
content.split("(?<=, )"); 
```

另外，你打错字了`goddman`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:09:05.953

如果字符串用多个空格分隔，则使用正向向后查找将不允许您执行匹配。

```
public static void main(final String... args) {
    // final Pattern pattern = Pattern.compile("(?<=,\\s*)"); won't work!
    final Pattern pattern = Pattern.compile(".+?,\\s*|.+\\s*$");
    final Matcher matcher = 
                  pattern.matcher("I,    am,       the, goddamn, Batman    ");
    while (matcher.find()) {
        System.out.format("\"%s\"\n", matcher.group());
} 
```

输出：

```
"I,    "
"am,       "
"the, "
"goddamn, "
"Batman    " 
```

# django - 如何在我的所有模板中加载 sorl 的缩略图模板标签

> ID：10522732
> 
> 赞同：0
> 
> 时间：2012-05-09T19:20:36.150
> 
> 标签：django, django-templates, sorl-thumbnail

鉴于 sorl 不是应用程序目录范围，并且模板标签定义位于 virtualenv 目录中

我希望能够使用 {% thumbnail .... %} 而不必先使用 {% load thumbnail %}。它显然无法加载到布局中。

我知道这很重要，但它会很好 %}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:20:54.630

将以下代码复制粘贴到已加载的**init** .py 中，

```
from django import template
template.add_to_builtins('sorl.thumbnail.templatetags.thumbnail') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:31:52.483

我不认为这是可能的。

[“当您加载自定义标签或过滤器库时，标签/过滤器仅对当前模板可用 - 而不是模板继承路径上的任何父模板或子模板。”](https://docs.djangoproject.com/en/dev/topics/templates/#custom-libraries-and-template-inheritance)

所以你必须`{% load thumbnail %}`在每个使用`thumbnail`标签的模板中声明。

# objective-c - 将 Apple 的 MVC 网络示例转换为 ARC

> ID：10522733
> 
> 赞同：1
> 
> 时间：2012-05-09T19:20:39.923
> 
> 标签：objective-c, ios, automatic-ref-counting, ios5.1

有没有人将 Apple MVC Networking 示例转换为 ARC？

[http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html)

作为一名新的 iOS 开发人员，我对 ARC 非常感兴趣，并尝试转换但未成功，向 Apple 发送了几封电子邮件，但没有回复。

在转换过程中，有一些我无法正确桥接的 CF 函数，并且存在各种内存问题和异常。

目前我没有例子，只是想看看是否有其他人通过转换，谷歌这次没有帮助我:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:49:17.050

只是好奇，但你为什么要尝试进行这种转换？如果您将此示例集成到已使用 ARC 运行的项目中，则可以在 Target 的构建阶段的 Compile Source 部分中明确排除不是 ARC 的源文件。

如果您想尝试此操作，请选择没有 ARC 的来源并按 Enter。应该会出现一个对话框，您可以在其中输入：

```
-fno-objc-arc 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:37:04.320

XCode 4.3.2 具有将项目转换为 ARC 的新功能。

编辑->重构->转换为 Objective-C ARC

应该让你马上去！

# ruby-on-rails - 捆绑更新然后链轮抛出 filenotfound 错误 rails 3.2.3 ruby 1.9.3p194

> ID：10522745
> 
> 赞同：3
> 
> 时间：2012-05-09T19:21:51.487
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我一直在运行 Rails 3.2.3，一切运行良好。昨晚我做了一个包更新来更新我的 Gemfile 中的所有内容，这里是更新日志。

```
Updating git://github.com/stefants/negative-captcha.git
Fetching gem metadata from http://rubygems.org/......
Fetching gem metadata from http://rubygems.org/..
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Installing multi_json (1.3.4) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Installing sprockets (2.1.3) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Installing tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Installing addressable (2.2.8) 
Using bundler (1.1.3) 
Using rack-ssl (1.3.2) 
Installing json (1.7.1) with native extensions 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using rails (3.2.3) 
Using awesome_nested_fields (0.6.0) 
Using xml-simple (1.1.1) 
Using aws-s3 (0.6.2) 
Using bcrypt-ruby (3.0.1) 
Installing bson (1.6.2) 
Installing bson_ext (1.6.2) with native extensions 
Installing business_time (0.6.1) 
Using cancan (1.6.7) 
Installing carrierwave (0.6.2) 
Installing mongo (1.6.2) 
Installing mongoid (2.4.9) 
Installing carrierwave-mongoid (0.2.0) 
Using chronic (0.6.7) 
Installing cocoon (1.0.20) 
Installing coderay (1.0.6) 
Installing coffee-script-source (1.3.1) 
Installing execjs (1.3.2) 
Using coffee-script (2.2.0) 
Using coffee-rails (3.2.2) 
Using coffeebeans (1.0.1) 
Using datejs-rails (1.1.0) 
Installing delayed_job (3.0.2) 
Using delayed_job_mongoid (1.0.8) 
Using orm_adapter (0.0.7) 
Using warden (1.1.1) 
Using devise (2.0.4) 
Using ejs (1.0.0) 
Using eventmachine (0.12.10) 
Using em-websocket (0.3.6) 
Installing excon (0.13.4) 
Using faker (1.0.1) 
Using multipart-post (1.1.5) 
Using faraday (0.7.6) 
Using ffi (1.0.11) 
Using formatador (0.2.1) 
Using net-ssh (2.3.0) 
Using net-scp (1.0.4) 
Using nokogiri (1.5.2) 
Using ruby-hmac (0.4.0) 
Using fog (1.3.1) 
Using git (1.2.5) 
Using term-ansicolor (1.0.7) 
Installing grizzled-rails-logger (0.1.3) 
Using rb-appscript (0.6.1) 
Using growl_notify (0.0.3) 
Installing guard (1.0.2) 
Using guard-livereload (0.4.2) 
Using hirb (0.6.2) 
Using humane-rails (2.8.0.0.1.2) 
Using jeweler (1.8.3) 
Installing jquery-rails (2.0.2) 
Installing jquery-ui-rails (0.4.0) 
Using kaminari (0.13.0) 
Using knockout-rails (1.0.1) 
Using method_source (0.7.1) 
Using momentjs-rails (1.5.0) 
Using mongoid-data_table (1.3.3) 
Using mongoid-eager-loading (0.3.1) 
Using negative-captcha (0.1.0) from git://github.com/stefants/negative-captcha.git (at master) 
Using nifty-generators (0.4.6) 
Installing oauth (0.4.6) 
Using oauth2 (0.5.2) 
Using typhoeus (0.3.3) 
Using panda (1.5.0) 
Using slop (2.4.4) 
Installing pry (0.9.9.4) 
Using pry-rails (0.1.6) 
Installing rails-backbone (0.7.2) 
Using rb-fchange (0.0.5) 
Installing rb-fsevent (0.9.1) 
Using rb-inotify (0.8.8) 
Using rest-client (1.6.7) 
Installing sass (3.1.17) 
Using sass-rails (3.2.5) 
Installing simple_form (2.0.2) 
Installing simple_oauth (0.1.7) 
Using stripe (1.6.3) 
Installing stylus-source (0.26.0) 
Installing stylus (0.5.1) 
Using uglifier (1.2.4) 
Using underscore-rails (1.3.1) 
Using webshims-rails (0.1) 
Using wirble (0.1.3) 
Using youtube_it (2.1.4) 
Using zero-clipboard-rails (1.0.1) 
Your bundle is updated! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

然后我重新启动了服务器，现在我的 sass 文件中的某些 @import "file.css" 行会引发 Sprockets::FileNotFound 错误。

我对 Sprockets gem 做了一些研究，发现当前版本是 2.4.2。但是我的包更新将链轮更新到 2.1.3。这也是你的 Rails 应用程序的内容吗，Rails 使用的 sprocket 比 Github 落后几个版本？-- 我应该如何处理这个 Sprockets::FileNotFound 问题？

附录：我刚刚还看到 gemfile.lock 中的链轮是 2.1.2 版本。然而 bundle show sprockets 说 2.1.3。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:39:51.357

尝试删除`Gemfile.lock`（首先备份）并`bundle install`再次运行

# sql - 有没有办法将商业智能项目模板添加到 Visual Studio 2008？

> ID：10522746
> 
> 赞同：1
> 
> 时间：2012-05-09T19:22:03.387
> 
> 标签：sql, sql-server-2008, visual-studio-2008

据我了解，它应该自动安装它。我现在安装的是 SQL Server 2008 R2 和 Visual Studio 2008 Developer。

谢谢，法赫德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:36:50.820

如果您安装了 SQL Server 2008 R2 客户端工具，您将`Business Intelligence project`在 Visual Studio 2008 中看到模板。

因此，请确保您安装了 SQL Server 2008 R2 客户端工具，而不仅仅是 Express 版本。

检查以下链接以了解哪些 SQL Server 版本支持 Business Intelligence Development Studio (BIDS)。

[**SQL Server 2008 R2 各版本支持的功能 - 开发工具**](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx#Dev_tools)

按照此链接查找安装 SQL Server 客户端工具的步骤。

[**SQL Server 2008 客户端工具安装**](http://www.mssqltips.com/sqlservertip/1807/sql-server-2008-client-tools-installation/)

### 更新：

如果您安装了 SQL Server 2008 R2 客户端工具，您应该会在`Windows Start --> All Programs`选项中看到一个文件夹。在其中你应该看到`SQL Server Business Intelligence Development Studio`. 如果没有，则说明您没有安装客户端工具。

![投标](../Images/06cc785168668ffdecccf9567d9a248a.png)

您还可以打开 Visual Studio 2008 并导航到`Help --> About Microsoft Visual Studio`并查找要安装的以下组件。

*   SQL Server 分析服务
*   SQL Server 报告服务
*   SQL Server 集成服务

![帮助](../Images/2bc8358502868bfd00b9da0201696341.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:42:13.683

您需要安装 SSIS、SSAS 和 SSRS（SQL Server 2008 安装附带，您只需选择选项）。

安装任何它们后，您将可以访问 BIDS（商业智能开发工作室），这是带有 BI 模板的可视化工作室

# jquery - qTip2 显示和隐藏缓慢

> ID：10522747
> 
> 赞同：2
> 
> 时间：2012-05-09T19:22:13.070
> 
> 标签：jquery, qtip

在我的网络应用程序中，我有许多（有时是 100 多个）单元格，其中嵌入了一个隐藏的跨度，如下所示：

```
<td class='providerInfo' tabindex=0>
    FIRE DEPARTMENT
    <span class='HIDDEN'>
        Address: New York, NY<br />
        Phone: 123-456-7890<br />
        Type: Facility
    </span>
</td> 
```

在页面加载时，我将 qTip 与隐藏跨度相关联，以便在关注具有信息的单元格时显示它：

```
function loadProviderInfo() {

    $(document).ready(function() {
        $('.providerInfo').each(function() {
            $(this).qtip({
                content: {
                    text: function(api) { return $(this).children(".HIDDEN").html(); }
                },
                style: {
                    classes: 'ui-tooltip-blue',
                    def: 'false'
                },
                position: {
                    my: 'bottom left',  // Position my bottom left...
                    at: 'top right', // at the top right of...
                    target: $(this) // my target
                }
            });

            $(this).focusin(function() { $(this).qtip('toggle', true); });
            $(this).focusout(function() { $(this).qtip('toggle', false); });        
        });
    });
} 
```

qTip 看起来不错，但它的显示和隐藏速度非常慢。

关于如何加快 qTip 的显示和隐藏的任何想法？我对 qTip 没有任何延迟感到满意。

只需要在 IE 8 中工作。

**编辑 1**
单元格越少，qTips 显示越快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T05:49:08.213

**查看** [文档](http://craigsworks.com/projects/qtip/docs/reference/#show)

```
hide: { delay: 1000 } 
```

> 1000 毫秒（1 秒）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:16:52.877

The problem is most likely with your .each loop, and all of the event listeners (more overhead).

Why not just qTip every .providerInfo element, and use qTips build in events for mouseover and mouseleave?

```
function loadProviderInfo() {

    $(document).ready(function() {

        $('.providerInfo').qtip({
                content: {
                    text: function(api) { return $(this).children(".HIDDEN").html(); }
                },
                style: {
                    classes: 'ui-tooltip-blue',
                    def: 'false'
                },
                position: {
                    my: 'bottom left',  // Position my bottom left...
                    at: 'top right', // at the top right of...
                    target: $(this) // my target
                },
                show: {
                    event: 'mouseenter',
                    target: $(this)
                },
                hide: {
                    event: 'mouseleave',
                    target: $(this)
                }
            });

    });
} 
```

I didn't test this code - I was going to do a JSFiddle for you but I couldn't get qTip to include correctly. Just try it out and see if you see any speed increase.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T20:04:50.160

我猜它与事件侦听器的关系比 qTip 插件更多（尽管我可能是错的）。

我的第一个想法是尝试以不同的方式绑定事件。为什么不试试 jQuery`.on()`绑定监听器的新方法呢？将侦听器从循环中取出，`$.each`然后像这样添加它：

```
$('table').on('focusin focusout', '.providerInfo', function(e){
    if(e.type == 'focusin'){
        $(this).qtip('toggle', true);
    }else{
        $(this).qtip('toggle', false);
    }
}); 
```

显然，如果您有多个表，请使用相关表的相应类或 id。

如果你有很多表格单元格（就像听起来你所做的那样，因为你拥有的越多，它就会越慢）这可以真正减轻负载，绑定一个事件而不是这么多。

**编辑**这仅适用于 jQuery 1.7+，因此如果您使用的是早期版本，我建议您`.delegate()`以类似的方式使用。

# javascript - 使用 selenium 从 window.location 获取 url

> ID：10522750
> 
> 赞同：2
> 
> 时间：2012-05-09T19:22:57.173
> 
> 标签：javascript, selenium, webdriver, selenium-webdriver

有谁知道我如何在 javascript **window.location.href="url";之间获取一个 url** 在 java 中使用 seleniumhq 网络驱动程序。

想象一下这样的流程。

链接页面 > 第 2 页 > 第 3 页 > 最后一页

`"Link Page"`有链接：

<a href="linkToPage2"> Link </a> 然后 Selenium 单击链接元素，如下所示：

> webElement.click();

`Page 2`执行 window.location.href="Page 3" 然后`Page 3` 将重定向发送到`Final Page`.

是否有可能获得`url`从`Page 3`甚至历史导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:46:16.720

> 字符串 url = selenium.getLocation();
> 
> System.out.println(url);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-16T14:45:21.380

selenium webdriver（Java）中最简单的方法：

```
String browserUrl = driver.getCurrentUrl(); 
```

您还可以在 selenium 中进行 javascript 调用：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
String browserUrl = (String) js.executeScript("return window.top.location.href.toString()");
System.out.println("Your browser URL is " + browserUrl); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T22:36:50.080

到目前为止，除了使用记录浏览器发出的所有请求的代理之外，我想不出任何其他方法。可以设置这样的代理并从您的代码中控制它。您没有指定用于编写测试的语言。如果是 Java，那么[Browsermob](https://github.com/webmetrics/browsermob-proxy)可能会有所帮助。如果是 C#，请查看[FiddlerCore](http://www.fiddler2.com/fiddler/Core/)。

# cocoa-touch - 获取给定当前位置、方位和距离的 GPS 坐标

> ID：10522751
> 
> 赞同：0
> 
> 时间：2012-05-09T19:22:59.000
> 
> 标签：cocoa-touch, gps, cllocation

给定当前位置、方位和距离，我正在尝试获取 GPS 坐标。

但我找不到任何与可可触感有关的东西。

我在这里找到了公式[获取给定当前点、距离和方位的纬度/经度](https://stackoverflow.com/questions/7222382/get-lat-long-given-current-point-distance-and-bearing)

iOS有更简单的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:56:43.843

将链接中的代码转换为 Objective-C。

```
- (double)degreesToRadians:(double)degrees {
    return degrees * M_PI / 180;
}

- (double)radiansToDegrees:(double)radians {
    return radians * 180/ M_PI;
}

- (CLLocationCoordinate2D)remoteCoordinate:(CLLocationCoordinate2D)localCoordinate withDistance:(double)distance withBearing:(double)bearing {

    double earthRadius = 6378.1;         // Radius of Earth in kilometres.

    double rLat1 = [self degreesToRadians:localCoordinate.latitude];     // Convert latitude to radians
    double rLon1 = [self degreesToRadians:localCoordinate.longitude];    // Convert longitude to radians

    double rLat2 = asinl( sinl(rLat1) * cosl(distance / earthRadius) + cosl(rLat1) * sinl(distance / earthRadius) * cosl(bearing) );
    double rLon2 = rLon1 + atan2l( sinl(bearing) * sinl(distance/earthRadius) * cosl(rLat1), cosl(distance/earthRadius) - sinl(rLat1) * sinl(rLat2) );

    double dLat2 = [self radiansToDegrees:rLat2];        // Convert latitude to degrees
    double dLon2 = [self radiansToDegrees:rLon2];        // Convert longuitude to degrees

    return CLLocationCoordinate2DMake(dLat2, dLon2);
} 
```

# html - div内文本的垂直旋转

> ID：10522752
> 
> 赞同：3
> 
> 时间：2012-05-09T19:23:15.870
> 
> 标签：html

我有一个包含两行的 div，但我想让它们显示为垂直。

这就是我的 div 的样子

```
<div>
 Line One <br>Line Two
</div> 
```

有没有办法使 div 内的文本方向垂直，使其看起来像

```
L L
I I
N N
E E

O T
N W
E O 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:29:08.720

将它们都包装在 p 标签中，并设置`word-break`为`break-all`和`width`to `1px`。

一个 hacky 解决方案，但一个有效的解决方案！

看这个[例子](http://jsfiddle.net/jackdent/CUadz/)，否则，我不相信有一个跨浏览器的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:33:36.697

在 CSS 中，您可以旋转文本。但有一些不同：

```
<div style="-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform: rotate(90deg);filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);">
 Line One
</div> 
```

# java - Android - 获取异步下载的原始文件名

> ID：10522753
> 
> 赞同：4
> 
> 时间：2012-05-09T19:23:17.017
> 
> 标签：java, android, pdf, download, filenames

我想在下载 PDF 文件时从网站检索原始文件名，而不是重命名它，而是将其保存为目录 SD/Android/Data/(MyAPP)/Files 下的相同名称。到目前为止，我必须告诉 android 文件名在查找时应该是什么以及在下载时将其保存为什么。有没有一种简单的方法可以更改它以将其保存为原始名称？谢谢

```
private void startDownload() {

    String isFileThere = Environment.getExternalStorageDirectory()
            + "/Android/Data/" + getApplicationContext().getPackageName()
            + "/files/xxxxxxxx.pdf";
    File f = new File(isFileThere);

    if (f.exists()) {
        mProgressDialog.setProgress(0);
        showPdf();
    } else {

        DownloadFile downloadFile = new DownloadFile();
        downloadFile
                .execute(url);

    }
}

class DownloadFile extends AsyncTask<String, Integer, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected String doInBackground(String... aurl) {

        try {

            URL url = new URL(aurl[0]);
            URLConnection connection = url.openConnection();

            connection.connect();
            int fileLength = connection.getContentLength();
            int tickSize = 2 * fileLength / 100;
            int nextProgress = tickSize;

            Log.d(

            "ANDRO_ASYNC", "Lenght of file: " + fileLength);

            InputStream input = new BufferedInputStream(url.openStream());

            String path = Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files";
            File file = new File(path);
            file.mkdirs();
            File outputFile = new File(file, "xxxxxxxx.pdf");

            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024 * 1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                if (total >= nextProgress) {
                    nextProgress = (int) ((total / tickSize + 1) * tickSize);
                    this.publishProgress((int) (total * 100 / fileLength));
                }
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            mProgressDialog.setProgress(0);
            mProgressDialog.dismiss();

        } catch (Exception e) {
        }
        return null;
    }

    {

    }

    @Override
    protected void onPostExecute(String unused) {

        File file = new File(Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName()
                + "/files/" + "xxxxxxxx.pdf");
        Intent testIntent = new Intent(Intent.ACTION_VIEW);
        testIntent.setType("application/pdf");
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(file);
        intent.setDataAndType(uri, "application/pdf");
        try {
            startActivity(intent);
        } catch (ActivityNotFoundException e) {
            Toast.makeText(atcChoice.this,
                    "No PDF viewer is available, please download one from Play store",
                    Toast.LENGTH_LONG).show();

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T19:26:57.970

尝试使用[`URLUtil.guessFileName()`](http://developer.android.com/reference/android/webkit/URLUtil.html#guessFileName%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

这是一个如何使用它的简单示例：

```
String url = http://...;
String fileExtenstion = MimeTypeMap.getFileExtensionFromUrl(url);
String name = URLUtil.guessFileName(url, null, fileExtenstion); 
```

# recursion - 序言中的阶乘（一般递归） - 为什么术语的顺序很重要

> ID：10522754
> 
> 赞同：0
> 
> 时间：2012-05-09T19:23:18.823
> 
> 标签：recursion, prolog, factorial

为什么这个阶乘实现不起作用：

```
factorial(0, B) :- B is 1.
factorial(A, B) :-
                   A > 0,
                   Ax is A-1,
                   B is A*Bx,
                   factorial(Ax, Bx). 
```

这有效：

```
factorial2(0, B) :- B is 1.
factorial2(A, B) :-
                   A > 0,
                   Ax is A-1,
                   factorial2(Ax, Bx),
                   B is A*Bx. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:34:23.427

因为`is/2`需要右手边被完全实例化。

在您的第一个示例中， Bx 未实例化并在右侧使用，而在您的第二个示例中，它在实例化后使用。

# ruby-on-rails - 我的 Rails 应用程序中的价格太准确了

> ID：10522758
> 
> 赞同：1
> 
> 时间：2012-05-09T19:23:26.523
> 
> 标签：ruby-on-rails, testing, rspec, currency, invoice

我目前正在为有发票的工作建立一个 Intranet。我目前正在为其编写测试，以确保增值税汇总正确等。

我注意到在某些方面，Rails/Ruby 似乎比它需要的更准确。我明白了：`expected there to be content "2586.6099999999997"`。注意`099999999997`它应该是什么时候`1`。

在我的数据库迁移文件中，我有这个 -`t.decimal :price, :precision => 8, :scale => 2`

在我的测试中，我只是试图将两个值相加，`949`并且不`1637.61`应该相加。`2586.61``2586.60999...`

会有什么问题？

我应该使用十进制还是应该使用整数？

编辑：规范代码基本上就是这个`page.should have_content(item1.price + 1637.61)`。item1 正在使用 FactoryGirl。

当像这样手动将 949 或 949.00 放入测试中时，我遇到了同样的问题`page.should have_content(949 + 1637.61)`

```
item1 = FactoryGirl.create(:item, :quantity => 1, :price => 949.00, :description => "macbook for 949") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:37:25.447

听起来您的数据库列实际上就像它应该的那样运行，因为它是一个`decimal`列。问题出在您的规范代码中：

```
page.should have_content(item1.price + 1637.61) 
```

因此，如果价格为 949.00，则为`949.00 + 1637.61`. 请记住，这与您的数据库列无关，它只是 ruby​​ 代码。因此`949.00 + 1637.61`被评估为将浮点数 ( `1637.61`) 添加到十进制值 ( `949.00`)，这将返回一个浮点数，因此`2586.60999`. 所以规范是期待`2586.60999`的，但视图正在显示`2586.61`（因为它应该是十进制列）。

如果您可以在规范中使用字符串和固定值，那么这可能是一个简单的解决方法：

```
page.should have_content("2586.61") 
```

或者，您可以确保将所有内容保留为十进制格式，例如：

```
page.should have_content(item1.price + BigDecimal.new("1637.61")) 
```

# android - 在 Android 中的 BluetoothSocket inputstream.read() 中实现超时

> ID：10522767
> 
> 赞同：10
> 
> 时间：2012-05-09T19:24:05.640
> 
> 标签：android, bluetooth, timeout, inputstream

是否可以在 Android 中的 BluetoothSocket 的 inputstream.read() 函数中实现超时？

我试过使用 Thread.sleep() 但这只会暂停我的活动。

- -更新 - -

我有一个想法，在这里创建 2 个线程代码（t1 和 t2），其中每个线程中断其他线程，其中一个线程（t1）执行睡眠（5000）然后中断另一个线程（t2），从另一侧另一个线程（ t2）如果在读取输入流中检测到某些字符为 0x0D 中断另一个线程（t1），但这是我的问题，有人可以帮助我吗？因为我没有使用线程的interrupt()方法，希望有人能帮助我，谢谢...

- -更新 - -

```
 public void run(){
        while(true){
            try {
            char r;
            String respuesta = "";
            while (true) {
                    r = (char) mmInStream.read();
                respuesta += r;
                if (r == 0x3e) {
                break;
                    }
                }
            respuesta = respuesta.replaceAll(" ", "");
            Log.d("respuesta", respuesta);
            rHandler.obtainMessage(MESSAGE_READ, -1, -1, respuesta).sendToTarget();
            } catch (IOException readException) {
            Log.e("ServicioGeneral", "Error de lectura", readException);
            this.interrupt();
            connectionLost();
            // posibly break();
            }
        }
    } 
```

这是我在其他线程中出现某些东西时的实现，问题是如果我没有从 de mmInStream 获得 0x3e 字符，则会达到超时。

我认为在第二个示例中我必须使用 notifyAll()，但是，我什么时候必须启动 readThread()？

谢谢你，@weeman

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T23:24:55.733

你可以这样做：

```
InputStream in = someBluetoothSocket.getInputStream();
int timeout = 0;
int maxTimeout = 8; // leads to a timeout of 2 seconds
int available = 0;

while((available = in.available()) == 0 && timeout < maxTimeout) {
    timeout++;
    // throws interrupted exception
    Thread.sleep(250);
}

byte[] read = new byte[available];
in.read(read); 
```

通过这种方式，您可以最初从具有特定超时的流中读取。如果你想在阅读的任何时候实现超时，你可以尝试这样的事情：

```
Thread readThread = new ReadThread(); // being a thread you use to read from an InputStream
try {
   synchronized (readThread) {
      // edit: start readThread here
      readThread.start();
      readThread.wait(timeOutInMilliSeconds);
   }
catch (InterruptedException e) {} 
```

使用它，如果线程实际上从输入流中读取了某些内容，您可能需要某种事件处理程序来通知您的应用程序。

我希望这会有所帮助！

- - 编辑：

我在没有使用任何处理程序的情况下实现了一个示例。

```
Socket s = new Socket("localhost", 8080);
    final InputStream in = s.getInputStream();

    Thread readThread = new Thread(new Runnable() {
        public void run() {
            int read = 0;
            try {
                while((read = in.read()) >= 0) {
                    System.out.println(new String(new byte[]{ (byte) read }));
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });

    synchronized (readThread) {
        readThread.start();
        try {
            readThread.wait(2000);

            if(readThread.isAlive()) {
                                    // probably really not good practice!
                in.close();
                System.out.println("Timeout exceeded!");
            }
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-11T01:25:01.037

用于超时读取套接字的 Kotlin 扩展函数：

```
fun InputStream.read(
  buffer: ByteArray,
  offset: Int,
  length: Int,
  timeout: Long
): Int = runBlocking {
    val readAsync = async {
        if (available() > 0) read(buffer, offset, length) else 0
    }
    var byteCount = 0
    var retries = 3
    while (byteCount == 0 && retries > 0) {
        withTimeout(timeout) {
            byteCount = readAsync.await()
        }
        delay(timeout)
        retries--
    }
    byteCount
} 
```

# python - 为什么我只能从文件中读取行一次？

> ID：10522769
> 
> 赞同：7
> 
> 时间：2012-05-09T19:24:07.950
> 
> 标签：python

我有一个包含 python 对象作为字符串的文件，然后我打开它并执行如下操作：

```
>>> file = open('gods.txt')
>>> file.readlines()
["{'brahman': 'impersonal', 'wishnu': 'personal, immortal', 'brahma': 'personal, mortal'}\n"] 
```

但是后来我遇到了问题，因为不再有任何线条：

```
>>> f.readlines()
[]
>>> f.readline(0)
'' 
```

为什么它正在发生，我如何才能保持对文件行的访问？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T19:26:41.173

该文件中只有一行，您只需阅读即可。readlines 返回所有行的列表。如果要重新读取文件，则必须执行 file.seek(0)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-09T19:34:09.050

您在文件中的位置已移动

```
f = open("/home/usr/stuff", "r")
f.tell()
# shows you're at the start of the file
l = f.readlines()
f.tell()
# now shows your file position is at the end of the file 
```

readlines() 为您提供文件内容列表，您可以一遍又一遍地阅读该列表。读取文件后关闭文件，然后使用从文件中获得的内容是一种很好的做法。不要一直试图一遍又一遍地阅读文件内容，你已经明白了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T19:26:23.963

将结果保存到变量或重新打开文件？

```
lines = file.readlines() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T19:28:41.577

您可以将行列表存储在变量中，然后随时访问它：

```
file = open('gods.txt')
# store the lines list in a variable
lines = file.readlines()
# then you can iterate the list whenever you want
for line in lines:
  print line 
```

# java - 无法使用带有 WSSE 的 WSDL2Java 生成 Web 服务客户端

> ID：10522770
> 
> 赞同：0
> 
> 时间：2012-05-09T19:24:11.427
> 
> 标签：java, wsdl, wss, wsdl2java

我无法使用 Axis1.4 中的 WSDL2Java 生成客户端类。WSDL 包含标头

```
xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
```

显示的错误是

```
java.io.IOException: Element {http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}Security is referenced but not defined.
    at org.apache.axis.wsdl.symbolTable.SymbolTable.checkForUndefined(SymbolTable.java:670)
    at org.apache.axis.wsdl.symbolTable.SymbolTable.add(SymbolTable.java:545)
    at org.apache.axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.java:518)
    at org.apache.axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.java:495)
    at org.apache.axis.wsdl.gen.Parser$WSDLRunnable.run(Parser.java:361)
    at java.lang.Thread.run(Thread.java:680) 
```

WSDL2Java 的参数是：`-o ./src --package ws.generated -v https://myurl/?WSDL`

我是否缺少参数或某些特殊配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:53:48.910

我必须查看整个 WSDL 才能确定，但​​看起来虽然您在定义 wsse 前缀时引用了命名空间，但没有指示 (wsdl2java) 引擎在哪里可以找到命名空间中的元素/类型定义。尝试将以下内容添加到您的 WSDL 并再次执行：

```
 <wsdl:import namespace="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
       location="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" /> 
```

此元素应该是对等元素`<wsdl:types>`和`<wsdl:message>`元素等。

这确实假设 wsdl 前缀是用 wsdl 定义的命名空间标识的，这是一种通用约定。

# opengl - C : printf 改变程序的进程

> ID：10522772
> 
> 赞同：-2
> 
> 时间：2012-05-09T19:24:30.750
> 
> 标签：opengl, timer, printf, glut, glui

我有一个使用 openGL、GLUT、GLUI 模拟碰撞（圆圈）的程序。一切正常，但是当我稍微更改代码时，它开始做一些奇怪的事情。

我有 2 个按钮，“play”和“step”，“play”模拟了用计时器更新的碰撞，“step”也模拟了但你必须点击它才能走得更远。

最初它是这样做的，但现在“播放”按钮的作用与“步骤”相同。如果我在我的计时器回调中添加一个 printf ，它就会完美地工作......

我能做些什么 ？

在我的 timer_cb 中，我只有：

```
 // printf("something\n");
 glutPostRedisplay();
 glutTimerFunc(getDeltaT(), timer_cb, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:33:50.993

I/O 例程，如 printf，通过调用它们引入了合理的延迟。为了回答一定程度的正确性，您向我们展示了用户界面代码，但我想我可以猜到......

你在使用线程吗？也许它可能是一个并发错误，因为按钮事件处理程序的执行与更新逻辑不同步？

# unit-testing - 在使用 phantomjs 和 jasmine 进行单元测试时拍摄网页快照

> ID：10522773
> 
> 赞同：5
> 
> 时间：2012-05-09T19:24:32.813
> 
> 标签：unit-testing, jasmine, snapshot, phantomjs

我似乎无法让 jasmine 和 phantomjs 正常工作。我正在使用 phantomjs 的示例文件夹中的 run-jasmine.js 文件。我得到的问题是文件找不到系统，所以它不能要求它。

这是具体消息：

```
undefined:0 Unknown module system for require() 
```

最重要的是，我想知道如何使用 jasmine 对 html 文件进行 dom 操作。

编辑：看起来 DOM 问题很简单，因为它只是使用 phantom js 的无头浏览器功能。我仍然有系统问题，我想知道如何在每次测试之间调用渲染页面，而不是在页面加载完成时调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T23:25:02.623

我按照此页面上的说明解决了这个问题

[https://groups.google.com/forum/#!topic/phantomjs/Ac-77s4kFGk](https://groups.google.com/forum/#!topic/phantomjs/Ac-77s4kFGk)

基本上，如果您从 debian 存储库安装 phantomjs，它不是最新的。从他们的官方网站安装最新版本就可以了。

# javascript - JSON循环遍历子对象

> ID：10522778
> 
> 赞同：0
> 
> 时间：2012-05-09T19:25:20.820
> 
> 标签：javascript, json, iteration

我试图找出我在使用 JSON 和循环子对象时遇到的问题。我以前从未使用过 JSON，所以如果语法错误导致我的问题，请告诉我。

我定义了这个 JSON 对象：

```
var columnData = {
    "obj1":{Heading: "Test 1", Required: "True", DataTypeCode:"str", DropDownOptions: "", ColumnId: "1"},
    "obj2":{Heading: "Test 2", Required: "False", DataTypeCode:"dropdown", DropDownOptions: "Alpha,Beta,Gamma,Delta", ColumnId: "2"},
    "obj3":{Heading: "Test 3", Required: "True", DataTypeCode:"int", DropDownOptions: "", ColumnId: "3"}
}; 
```

我将它传递给执行此操作的函数：

```
for (var col in columnData) {
    r += '<td><input type="text" name="col' + col.ColumnId + '" value="' + col.Heading + '" /></td>'
} 
```

FireBug 中的断点确认 columnData 是一个有效对象，它具有三个子对象，并且子对象具有预期的属性和值。但这是调用函数后我得到的输出：

```
<td><input name="colundefined" value="undefined" type="text"></td> 
```

不幸的是，我认为我缺乏使用 JSON 的经验使得我试图追踪答案的结果无法使用。如何编写一个能正确获取 columnData 子对象的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:28:03.883

您仍然需要 columnData：

```
columnData[col].ColumnId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:29:01.747

做这个：

```
var key;
var col;

for ( key in columnData ) {
    col = columnData[ key ];
    r += '<td><input type="text" name="col' + col.ColumnId + '" value="' + col.Heading + '" /></td>';
} 
```

* * *

另外一个选项：

```
r += Object.keys( columnData ).map( function ( key ) {
    var col = columnData[ key ];
    return '<td><input type="text" name="col' + col.ColumnId + '" value="' + col.Heading + '" /></td>';
}).join( '' ); 
```

我还推荐了一个模板引擎（如 Handlebars.js）来满足您的 HTML 字符串连接需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:30:27.500

JSON 要求键值用双引号括起来，您的`columnData`变量是 javascript 对象，而不是 JSON。

话虽这么说，`col`是`columnData`被迭代的当前关键，例如`obj1`，`obj2`，`obj3`。如果要访问这些对象之一的属性，则需要先访问它：

```
var col;
for (var key in columnData) {
    col = columnData[key];
    r += '<td><input type="text" name="col' + col.ColumnId + '" value="' + col.Heading + '" /></td>'
} 
```

# php - Facebook GraphApi -> 错误：UOAuthException: (#282) 需要扩展权限：share_item 已抛出

> ID：10522781
> 
> 赞同：0
> 
> 时间：2012-05-09T19:25:28.300
> 
> 标签：php, facebook, facebook-graph-api

尝试使用 Facebook Graph API 自动发布链接时出现错误

我的php代码

```
<?
  $config = array();
  $config['appId'] = '3545XXXXXXX6207';
  $config['secret'] = '60068XXXXXXXXXXXe45a426';

  $facebook = new Facebook($config);

$retour_login = json_decode(stripslashes($_GET['session']), true);
$uid = $retour_login['uid'];
$access_token = $retour_login['access_token'];

$me = null;

if ($session) {
  try {
    $uid = $facebook->getUser();
    $me = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}

if(!isset($_GET['session'])) { // Asking permissions
    $params = array(
    'locale' => 'fr_FR',
    'display' => 'popup', 
    'req_perms' => 'email,user_about_me,user_birthday,user_location',
    'ext_perms' => 'publish_stream,share_item,manage_pages'
    );
    header("Location: ".$facebook->getLoginUrl($params));
}

        $args = array(
                'message'   => "XXXX",
                'link'      => 'XXXX',
                'name'      => 'XXXX',
                'picture'   => 'XXXX',
                "caption"=> "lien.com",
                      "type"=> "link");

        $post_id = $facebook->api("/me/links", "post", $args); // execute this to automatically post on FB

?> 
```

我收到此错误：OAuthException: (#282) 需要扩展权限：share_item throw

有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:56:22.223

'req_perms' 和 'ext_perms' 是什么？根据文档，权限应位于“范围”参数中 - [https://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)和[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

检查您是否使用过时的示例或教程 - 始终首先检查官方文档

# android - 安卓：海森堡

> ID：10522782
> 
> 赞同：2
> 
> 时间：2012-05-09T19:25:34.413
> 
> 标签：android, memory-management, garbage-collection

我正在使用 Aviary 图片编辑库开发 Android 应用程序，但遇到了问题。在调试器中运行时，一切运行良好。但是，当我在手机上运行它时，它会在日志中出现“java.lang.IllegalArugmentException: Unknow URL nulluuid/6d77d345......”错误。我很确定该错误与 mSessionId 变量有关。以下是相关代码：

```
 private void startFeather( Uri uri ) {
    Log.d( LOG_TAG, "uri: " + uri );
    Intent newIntent = new Intent( this, FeatherActivity.class );
    newIntent.setData( uri );
    newIntent.putExtra( "API_KEY", API_KEY );
    newIntent.putExtra( "output-format", Bitmap.CompressFormat.JPEG.name() );
    newIntent.putExtra( "output", Uri.parse(picDir + File.separator + "Final_" + getIntent().getStringExtra("file")));
    newIntent.putExtra( "output-quality", 90 );
    newIntent.putExtra( "tools-list",
            new String[] {
                FilterLoaderFactory.Filters.ENHANCE.name(), FilterLoaderFactory.Filters.EFFECTS.name(),
                FilterLoaderFactory.Filters.STICKERS.name(), FilterLoaderFactory.Filters.ADJUST.name(),
                FilterLoaderFactory.Filters.CROP.name(), FilterLoaderFactory.Filters.BRIGHTNESS.name(),
                FilterLoaderFactory.Filters.CONTRAST.name(), FilterLoaderFactory.Filters.SATURATION.name(),
                FilterLoaderFactory.Filters.SHARPNESS.name(), FilterLoaderFactory.Filters.DRAWING.name(),
                FilterLoaderFactory.Filters.TEXT.name(), FilterLoaderFactory.Filters.MEME.name(),
                FilterLoaderFactory.Filters.RED_EYE.name(), FilterLoaderFactory.Filters.WHITEN.name(),
                FilterLoaderFactory.Filters.BLEMISH.name(), } );
    final DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics( metrics );
    final int max_size = Math.max( metrics.widthPixels, metrics.heightPixels );
    newIntent.putExtra( "max-image-size", max_size );
    newIntent.putExtra( "effect-enable-borders", true );
    mSessionId = StringUtils.getSha256( System.currentTimeMillis() + API_KEY );
    Log.d( LOG_TAG, "session: " + mSessionId + ", size: " + mSessionId.length() );
    newIntent.putExtra( "output-hires-session-id", mSessionId );
    startActivityForResult( newIntent, AVIARY_ACTIVITY );
} 
```

我在类内声明 mSessionId 变量，但在任何函数之外。

```
private String mSessionId; 
```

任何想法这可能是什么？我已经被难住了好几个小时了。

编辑：这是对 startFeather() 的调用：

```
Uri imagePath = Uri.parse(picDir + File.separator + getIntent().getStringExtra("file"));
startFeather(imagePath); 
```

imagePath 的值为：“/mnt/sdcard/XXXX/Pictures/dd00b97b-eebd-4780-a6c3-993bffdbee37.png”

编辑：这是 logcat 输出：

```
05-09 15:28:34.654: D/CLIPBOARD(2965): Hide Clipboard dialog at Starting input: finished by someone else... !
05-09 15:28:35.365: V/XXXX(2965): initPath: dd00b97b-eebd-4780-a6c3-993bffdbee37.png
05-09 15:28:35.375: V/XXXX(2965): fileURI: file:///mnt/sdcard/XXXX/Pictures/dd00b97b-eebd-4780-a6c3-993bffdbee37.png
05-09 15:28:36.166: D/CLIPBOARD(2965): Hide Clipboard dialog at Starting input: finished by someone else... !
05-09 15:28:36.166: W/IInputConnectionWrapper(2965): showStatusIcon on inactive InputConnection
05-09 15:28:42.852: D/XXXX(2965): uri: /mnt/sdcard/XXXX/Pictures/dd00b97b-eebd-4780-a6c3-993bffdbee37.png
05-09 15:28:42.852: D/XXXX(2965): session: 5faf1fb832e59d18e1366f0f458f93a0d5fd3d5ff5a639faae990af4a0e2e7f1, size: 64
05-09 15:28:42.902: D/InputTransport(2965): Input channel constructed: name='407ec7b8 XXXX.app/XXXX.app.PhotoActivity (client)', ashmemFd=49, receivePipeFd=50, sendPipeFd=51
05-09 15:28:42.942: V/Localytics(2965): Opening new session
05-09 15:28:42.972: D/dalvikvm(2965): GC_EXTERNAL_ALLOC freed 134K, 47% free 2984K/5575K, external 3186K/3335K, paused 20ms
05-09 15:28:43.102: D/dalvikvm(2965): GC_EXTERNAL_ALLOC freed 87K, 46% free 3021K/5575K, external 5052K/5631K, paused 20ms
05-09 15:28:43.122: I/dalvikvm(2965): Could not find method com.aviary.android.feather.graphics.AnimatedRotateDrawable.getCallback, referenced from method com.aviary.android.feather.graphics.AnimatedRotateDrawable.invalidateDrawable
05-09 15:28:43.122: W/dalvikvm(2965): VFY: unable to resolve virtual method 4244: Lcom/aviary/android/feather/graphics/AnimatedRotateDrawable;.getCallback ()Landroid/graphics/drawable/Drawable$Callback;
05-09 15:28:43.122: D/dalvikvm(2965): VFY: replacing opcode 0x6e at 0x0006
05-09 15:28:43.122: D/dalvikvm(2965): VFY: dead code 0x0009-000e in Lcom/aviary/android/feather/graphics/AnimatedRotateDrawable;.invalidateDrawable (Landroid/graphics/drawable/Drawable;)V
05-09 15:28:43.122: I/dalvikvm(2965): Could not find method com.aviary.android.feather.graphics.AnimatedRotateDrawable.getCallback, referenced from method com.aviary.android.feather.graphics.AnimatedRotateDrawable.scheduleDrawable
05-09 15:28:43.122: W/dalvikvm(2965): VFY: unable to resolve virtual method 4244: Lcom/aviary/android/feather/graphics/AnimatedRotateDrawable;.getCallback ()Landroid/graphics/drawable/Drawable$Callback;
05-09 15:28:43.122: D/dalvikvm(2965): VFY: replacing opcode 0x6e at 0x0006
05-09 15:28:43.122: D/dalvikvm(2965): VFY: dead code 0x0009-000e in Lcom/aviary/android/feather/graphics/AnimatedRotateDrawable;.scheduleDrawable (Landroid/graphics/drawable/Drawable;Ljava/lang/Runnable;J)V
05-09 15:28:43.122: I/dalvikvm(2965): Could not find method com.aviary.android.feather.graphics.AnimatedRotateDrawable.getCallback, referenced from method com.aviary.android.feather.graphics.AnimatedRotateDrawable.unscheduleDrawable
05-09 15:28:43.122: W/dalvikvm(2965): VFY: unable to resolve virtual method 4244: Lcom/aviary/android/feather/graphics/AnimatedRotateDrawable;.getCallback ()Landroid/graphics/drawable/Drawable$Callback;
05-09 15:28:43.122: D/dalvikvm(2965): VFY: replacing opcode 0x6e at 0x0006
05-09 15:28:43.122: D/dalvikvm(2965): VFY: dead code 0x0009-000e in Lcom/aviary/android/feather/graphics/AnimatedRotateDrawable;.unscheduleDrawable (Landroid/graphics/drawable/Drawable;Ljava/lang/Runnable;)V
05-09 15:28:43.122: I/dalvikvm(2965): Could not find method android.app.ActivityManager.getLargeMemoryClass, referenced from method com.aviary.android.feather.Constants.initContext
05-09 15:28:43.122: W/dalvikvm(2965): VFY: unable to resolve virtual method 36: Landroid/app/ActivityManager;.getLargeMemoryClass ()I
05-09 15:28:43.132: D/dalvikvm(2965): VFY: replacing opcode 0x6e at 0x0024
05-09 15:28:43.132: D/dalvikvm(2965): VFY: dead code 0x0027-002e in Lcom/aviary/android/feather/Constants;.initContext (Landroid/content/Context;)V
05-09 15:28:43.132: D/dalvikvm(2965): VFY: dead code 0x0052-0053 in Lcom/aviary/android/feather/Constants;.initContext (Landroid/content/Context;)V
05-09 15:28:43.132: I/feather(2965): screen size: 480x800
05-09 15:28:43.132: D/dalvikvm(2965): No JNI_OnLoad found in /system/lib/libcutils.so 0x4051e4e8, skipping init
05-09 15:28:43.132: D/dalvikvm(2965): Trying to load lib /data/data/XXXX.app/lib/libstlport_shared.so 0x4051e4e8
05-09 15:28:43.132: D/dalvikvm(2965): Added shared lib /data/data/XXXX.app/lib/libstlport_shared.so 0x4051e4e8
05-09 15:28:43.132: D/dalvikvm(2965): No JNI_OnLoad found in /data/data/XXXX.app/lib/libstlport_shared.so 0x4051e4e8, skipping init
05-09 15:28:43.132: D/dalvikvm(2965): Trying to load lib /data/data/XXXX.app/lib/libfeathernative.so 0x4051e4e8
05-09 15:28:43.132: D/dalvikvm(2965): Added shared lib /data/data/XXXX.app/lib/libfeathernative.so 0x4051e4e8
05-09 15:28:43.142: E/filter-native(2965): cpu: armv7? 1
05-09 15:28:43.142: E/filter-native(2965): cpu: fpu? 1
05-09 15:28:43.142: E/filter-native(2965): cpu: neon? 1
05-09 15:28:43.202: D/dalvikvm(2965): GC_CONCURRENT freed 143K, 46% free 3089K/5639K, external 5403K/6381K, paused 2ms+2ms
05-09 15:28:43.202: E/feather(2965): [FeatherActivity] , MAX MEMORY, 64
05-09 15:28:43.202: D/InputTransport(2965): Input channel constructed: name='40801d90 XXXX.app/com.aviary.android.feather.FeatherActivity (client)', ashmemFd=64, receivePipeFd=65, sendPipeFd=66
05-09 15:28:43.243: D/dalvikvm(2965): GC_EXTERNAL_ALLOC freed 67K, 47% free 3112K/5767K, external 5395K/6381K, paused 26ms
05-09 15:28:43.793: I/image(2965): setImageBitmap: android.graphics.Bitmap@40635790
05-09 15:28:43.793: E/feather(2965): [FeatherActivity] , original.size: 2448x3264
05-09 15:28:43.793: E/feather(2965): [FeatherActivity] , final.size: 600x800
05-09 15:28:43.793: W/dalvikvm(2965): threadid=14: thread exiting with uncaught exception (group=0x4001e578)
05-09 15:28:43.803: E/AndroidRuntime(2965): FATAL EXCEPTION: Service[hiresService]
05-09 15:28:43.803: E/AndroidRuntime(2965): java.lang.IllegalArgumentException: Unknown URL nulluuid/5faf1fb832e59d18e1366f0f458f93a0d5fd3d5ff5a639faae990af4a0e2e7f1
05-09 15:28:43.803: E/AndroidRuntime(2965):     at android.content.ContentResolver.insert(ContentResolver.java:600)
05-09 15:28:43.803: E/AndroidRuntime(2965):     at com.aviary.android.feather.library.services.HiResService$1.run(HiResService.java:120)
05-09 15:28:43.803: E/AndroidRuntime(2965):     at android.os.Handler.handleCallback(Handler.java:587)
05-09 15:28:43.803: E/AndroidRuntime(2965):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 15:28:43.803: E/AndroidRuntime(2965):     at android.os.Looper.loop(Looper.java:130)
05-09 15:28:43.803: E/AndroidRuntime(2965):     at android.os.HandlerThread.run(HandlerThread.java:60)
05-09 15:28:44.013: D/InputTransport(2965): Input channel constructed: name='408ab4f0 Toast (client)', ashmemFd=75, receivePipeFd=76, sendPipeFd=77
05-09 15:28:44.123: D/InputTransport(2965): Input channel destroyed: name='40801d90 XXXX.app/com.aviary.android.feather.FeatherActivity (client)', ashmemFd=64, receivePipeFd=65, sendPipeFd=66
05-09 15:28:44.123: D/InputTransport(2965): Input channel destroyed: name='407ec7b8 XXXX.app/XXXX.app.PhotoActivity (client)', ashmemFd=49, receivePipeFd=50, sendPipeFd=51
05-09 15:28:45.995: D/InputTransport(2965): Input channel destroyed: name='408ab4f0 Toast (client)', ashmemFd=75, receivePipeFd=76, sendPipeFd=77 
```

通过实验，我发现问题肯定出在 mSessionId = StringUtils.getSha256( System.currentTimeMillis() + API_KEY ); 线。如果我将其注释掉（禁用高分辨率处理），它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:57:36.567

供将来参考...如果其他人有此错误，您必须将其添加到清单文件中：

```
<!-- Required for the hi-res image processing -->
<!-- authorities can have the value you prefer -->
<provider 
    android:name="com.aviary.android.feather.library.providers.FeatherContentProvider"
    android:exported="false"
    android:authorities="com.aviary.launcher.HiResProvider">
</provider> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T11:10:13.950

我也遇到了同样的问题。我的解决方案是增加 Eclipse 的堆大小和 perm 的内存。当 eclipse ADT 没有足够的内存时，它似乎无法正确构建 apk。当 android 项目包含大型 jar 库（例如 aviary）时，会发生这种情况。

要增加 eclipse 的内存，请编辑 eclipse.ini 并更改以下值：-XX:MaxPermSize=512m -Xms512m -Xmx1024m

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:53:02.017

要启用“高分辨率图像编辑”需要额外的步骤，请参阅[官方文档](http://www.aviary.com/android/documentation) 中 的第**10 段高分辨率图像编辑**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T19:52:09.603

```
newIntent.putExtra( "output", Uri.parse( "file://" + mOutputFile.getAbsolutePath() ) ); 
```

我想，我们需要更多代码来回答您的问题。不过我注意到的一件事是，您的 Uri 不以“file://”前缀开头，如文档中所示。

无论如何，我认为问题与 Uri 有关，因为在 contentprovider 中插入 Url 时，错误是抱怨 IllegalArgumentException。

仔细检查，您的 Uri 存在于设备上，并且它以“file://”开头并将结果发布给我们

# c# - 在 Windows 窗体中传递变量

> ID：10522786
> 
> 赞同：0
> 
> 时间：2012-05-09T19:25:38.970
> 
> 标签：c#, .net, winforms

我有一个非常复杂的 Windows 应用程序，它有 8 个表单。每个表单上都有“上一个”和“下一个”按钮来回方便地编辑表单。

```
 private void ShowNext()
    {
        if (FormNext == null)
            FormNext = new SomeForm(this);
        FormNext.Show();
        this.Hide();
    }

    private void ShowPrev()
    {
        FormPrev.Show();
        this.Hide();
    }

    private void btnNext_Click(object sender, EventArgs e)
    {
        ShowNext();
    }

    private void btnBack_Click(object sender, EventArgs e)
    {
        ShowPrev();
    } 
```

每个表格都会执行不同的 sql insert table 命令。但问题是我不想在每个表单上完成所有插入。

一旦用户确认正确的输入值，我想要的是在最后一个表单中完成所有操作。这意味着我必须将所有变量从一开始传递到最后一个。

问题：内存可以保存所有变量吗？如何通过它们交叉形式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:27:40.103

在主窗体中定义一个静态公共字段，并更新每个子窗体中的值。最后选择最后一个表单中的字段进行插入

以下几行：

```
public partial class Form1 : Form //your main fomr
    {
        public static List<MyContainerClass> myContainer= new List<MyContainerClass>();
        ............. 
```

这里的 MyContainerClass 可能是您的代码中定义的某个类，它可以保存您想要保留的所有值。如果它只是一个字符串，那么您可以创建一个字符串列表。然后在每个表单中设置值

```
Form1.myContainer.Add(new_values); 
```

在最后一种形式中，您可以访问值

```
foreach(MyContainerClass mc in Form1.myContainer)
{
//Do your work
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:35:22.437

您可以轻松地将字符串查询传递给新/旧表单的公共变量，如下所示

```
protected void btnNext_Click(object sender, EventArgs e)
{
    MyForm2 x = new MyForm2();
    x.Query = "My Query";   // here "Query" is your custom public string variable on form2
    x.Show()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:27:26.170

创建一个包含所有变量的静态单例类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T19:28:01.573

您只需要保留对可以访问所需数据的某些上下文的引用。

```
protected void btnNext_Click(object sender, EventArgs e)
{
    SomeContext.Push(myFormStateDataThatIsReady);
    ShowNext();
} 
```

然后，当最后一步到来时，您可以将这些数据从该上下文中提取出来并写入该数据。

# ruby - typhoeus 与 activerecord 一起使用是否安全？回复？

> ID：10522787
> 
> 赞同：0
> 
> 时间：2012-05-09T19:25:40.667
> 
> 标签：ruby, ruby-on-rails-3, concurrency, resque, typhoeus

typhoeus 与 activerecord 一起使用是否安全？回复？我已经在源代码中四处寻找并在这里和那里搜索，但我无法确定它的正面或反面。我想我真正想知道的是，响应回调是一次运行一个还是并行运行？因为如果回调是原子的或顺序的或其他任何东西，那么在其中做任何事情都是安全的。我认为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:22:55.960

从[我对 github 问题的回答](https://github.com/typhoeus/typhoeus/issues/154#issuecomment-5702886)：

> 我在 Resque 工作人员中广泛使用了它。Typhoeus::Hydra 按返回请求的顺序返回（触发#on_complete）。我建议不要在 #on_complete 块中执行任何数据库工作，而是存储响应对象的集合并在完成可能需要执行的任何验证后执行数据库工作。

# autocomplete - 如何在自动完成中实现与最后一个匹配的组合框

> ID：10522789
> 
> 赞同：1
> 
> 时间：2012-05-09T19:25:52.530
> 
> 标签：autocomplete, combobox, wpf-controls

对于自动完成功能，它会自动匹配项目的前缀。并聚焦第一个过滤的项目。但我想让组合框专注于过滤项目的最后一项。

例如，如果数据集是“ABA，ABB，ACC”，如果我输入AB，ABA和ABB将被过滤，焦点将在ABA（ABB之上），现在我想要的是关注ABB（低于 ABA)。

我检查了组合框确实有 AutoCompleteMode，但似乎没有一个可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:36:55.530

您可以指定不同于组合框项目列表的自定义自动完成源。这允许您指定以相反顺序排序的条目并同时保持组合框项目的正确顺序

```
cb.AutoCompleteSource = AutoCompleteSource.CustomSource;
var strings = new AutoCompleteStringCollection();
strings.AddRange(arrayWithItemsInReverseOrder);
cb.AutoCompleteCustomSource = strings; 
```

# scripting - 通过点击自动进入下一页？（自动化）

> ID：10522790
> 
> 赞同：0
> 
> 时间：2012-05-09T19:25:53.947
> 
> 标签：scripting, automation, web

作为工作流程的一部分，我的工作需要在整个网站上进行大量乏味的点击。在一个步骤中，我单击一个链接，转到该页面，然后始终单击该页面上的一个链接。我希望我可以直接转到该链接，因为它会大大加快速度。

有没有办法做到这一点？或者非常快速地选择正确的链接？

就我而言，我必须在图像上单击编辑，然后下一页是编辑图像的方法列表，我单击的链接总是相同的，因为我们总是使用相同的方法来编辑图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:44:10.970

你用什么浏览器？我有一些在谷歌浏览器中编写插件的经验，但没有其他经验。我不认为差异真的那么大。以 Chrome 为例：

创建一个新文件夹和两个新文件 - manifest.json 和 myscript.js

manifest.json 文件的代码：

```
{
"name": "My awesome script",
"description": "Some description",
"version": "1.0",
"content_scripts": [
    {
        "matches": [
            "http://www.mypage.com/*"
        ],
        "js": [
            "myscript.js"
        ]
    }
]
} 
```

将“匹配”更改为您希望它与您的自定义脚本一起注入的页面，并将 js 文件更改为您想要运行的任何文件。我也经常倾向于包含 jquery（为此，只需键入

```
 "js": [
            "myscript.js",
            "jquery.js"
        ] 
```

使用 JQuery/JS 执行此操作的方法可能是这样的：

```
$(document).ready(function() {

var autoLink = $("#imageID").attr('href');
document.location=autoLink;

}); 
```

我希望这回答了你的问题。

编辑：要加载脚本 - 打开页面 chrome://extensions/ 并选择“加载解压脚本”或类似的东西（我没有英文版）并选择您创建的文件夹。瞧。

# javascript - 禁用第一列的点击事件

> ID：10522796
> 
> 赞同：1
> 
> 时间：2012-05-09T19:26:40.377
> 
> 标签：javascript, jquery

有人可以帮我如何禁用第一列上的点击事件，其他列应该是可点击的。我尝试了几种不同的方法，例如切片

> tr 元素之后的 td.slice() 以及 td:gt(0)

等，并没有成功。两天以来我一直在敲我的头，我没有在谷歌上找到任何相关的解决方案。

```
$('#Table tbody tr').on("click",function(){
                    var aPos Table.fnGetPosition(this);
                    var aData = Table.fnGetData( aPos[6] );
                    //aData = $(this).parent().parent().html();
                    xyz = $(this).parent().parent().find("td").eq(1).html();                    
                    yzx= $(this).parent().parent().find("td").eq(7).html();
                    zxy= $(this).parent().parent().find("td").eq(2).html();
                    alert(aPos);

            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:28:59.537

尝试`stopPropogation`在第一列单击[**DEMO**](http://jsfiddle.net/skram/aQEY9/)

**编辑：**添加演示并修复`.find('td:first')`

```
$('#Table tr').find('td:first').on('click', function (e) {
 e.preventDefault();
 e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:28:51.803

在第一列添加某种唯一标识符，然后

```
$('identifier').click(function(){
    return false;
}); 
```

我认为您也可以使用第 n 个子对象来定位第一列，但我不确定确切的语法。也许像

```
$('table tr td:(nth-child(1)').on('click', function(){
    return false;
}); 
```

或者类似上面的，希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:30:50.013

您需要向要使用的列添加某种标识符：

```
<tr>
    <td class="dontClickMe"></td>
    <td class="clickMe"></td>
</tr> 
```

然后它很简单：

```
$('.clickMe').on('click', function() { ... }); 
```

# jquery - Jquery animate left 不工作，怎么了？

> ID：10522799
> 
> 赞同：2
> 
> 时间：2012-05-09T19:26:54.113
> 
> 标签：jquery, jquery-animate

我正在使用 jQuery `animate()`，但它不起作用。我试图让一个 div 从另一个包含它的 div 上滑下来，并具有`overflow:hidden`. 我已经尝试`left`了动画的所有组合，但什么也没有。只是为了确保，我还尝试更改 div （画廊）的宽度，它确实改变了宽度，但没有改变左边。

我究竟做错了什么？

```
function an() {

  //$('#gallery').fadeOut();
  //$('#gallery').animate({left:'-=1000'},'slow');
  $('#gallery').animate({
    'left': '+=100px'
  }, 'slow');

}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div align="center" style="position:relative; height:137px; overflow:hidden; width:1000px; border:3px solid #ff0000;">
  <div id="gallery" style="background-color:#033; width:100px; height:137px;"></div>
</div>
<a href="#" onclick="an(); return false;">test</a>
```

[在 JSFiddle 上查看](http://jsfiddle.net/cLdRW/1/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T19:33:32.053

你应该给#gallery div a`position:relative`然后它工作正常。

```
function an() {

  //$('#gallery').fadeOut();
  //$('#gallery').animate({left:'-=1000'},'slow');

  $('#gallery').animate({
    'left': '-=700px'
  }, 'slow');

}
```

```
#gallery {
  position: relative;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div align="center" style="position:relative; height:137px; overflow:hidden; width:1000px; border:3px solid #ff0000;">
  <div id="gallery" style="background-color:#033; width:100px; height:137px;"></div>
</div>
<a href="#" onclick="an(); return false;">test</a>
```

[在 JSFiddle 上查看](http://jsfiddle.net/j08691/cLdRW/8/)

顺便说一句，您应该尽可能避免使用内联 JavaScript（如 onclick）和 CSS。此外，该`align`属性在 HTML 4.01 中已被弃用，并在 HTML5 中被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-13T12:32:34.703

您必须设置`position: relative`主属性下的所有属性才能激活该`animate()`功能。

```
<div style='position:fixed'>
<div style='position:relative'></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T06:59:32.420

只需添加：

```
style="position:relative;" 
```

到要移动的元素。

*   你不必将它添加到它的容器 div 中。
*   它将相对于它的容器，并将根据它的位置移动。

# jquery - jquery将光标设置为textarea的第一个字符

> ID：10522804
> 
> 赞同：-2
> 
> 时间：2012-05-09T19:27:02.447
> 
> 标签：jquery, focus, textarea, character

我在 textarea 中有自定义占位符，我希望每个浏览器在用户单击或关注它时立即将光标移动到该占位符的第一个字符。

我怎样才能做到这一点？我不知道所以没有发布代码。

谢谢！

丹尼斯

编辑 1

这是文本区域：

```
<textarea id="posttext"> Post something...</textarea><br/> 
```

这是删除“发布某些东西...”的代码：

```
//Placeholder in posttext
$('#posttext').keydown(function(){
if($(this).val()==' Post something...') $(this).val('').css('color','black');
}).blur(function(){
    if($(this).val()=='') $(this).val(' Post something...').css('color','grey');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:47:58.673

```
$('#posttext').on('focus', function() {
    if($(this).val() == ' Post something...') {
        $(this).val('').css('color','black');
    }
}).blur(function() {
    if($(this).val() == '') {
        $(this).val(' Post something...').css('color','grey');
    }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<textarea id="posttext"> Post something...</textarea>
```

# python - 如何在 Flask 中获取上传文件的状态

> ID：10522805
> 
> 赞同：8
> 
> 时间：2012-05-09T19:27:04.553
> 
> 标签：python, file-upload, flask

需要向我的应用程序添加某种上传进度对话框。我知道有很多 Flash/Java/HTML5 解决方案，但它们不适合我的情况。

Flask[文档](http://flask.pocoo.org/docs/patterns/fileuploads/)提供了“更简单的解决方案”，提供了[Flask-Uploads](http://packages.python.org/Flask-Uploads/)扩展。但是，我还没有为我的问题找到任何解决方案。

*是否有可能获得上传文件的状态（即已上传的字节数）？*

事实上，我知道如果文件大小不大，Flask 会将文件数据累积在内存中。否则，它将文件存储在临时文件夹中。如果没有获取接收字节数的选项，也许至少有办法获取临时文件名？

任何类型的技巧都非常受欢迎。

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:32:27.100

我认为这与 Flask 无关

请看这个链接：

*   [使用 Ajax 和 jQuery 上传到带有进度条的 Django Laurent Luce's Blog](http://www.laurentluce.com/posts/upload-to-django-with-progress-bar-using-ajax-and-jquery/)

我认为这些很有帮助

```
request.META['REMOTE_ADDR'], request.GET['X-Progress-ID'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T08:12:51.397

我尚未对其进行测试，但我在[这里找到了类似内容的链接](https://github.com/kirsle/flask-multi-upload)

# java - Selenium 项目的建议

> ID：10522807
> 
> 赞同：1
> 
> 时间：2012-05-09T19:27:09.267
> 
> 标签：java, selenium, testng

这是一个 Java - Selenium（任何其他相关技术？）项目，我需要为一个在非营利组织做志愿者的朋友做。我应该创建一个应用程序来测试他们的网页。我更喜欢 java、c、c++ 的服务器端。我的问题是有哪些可用的开源技术和框架可以帮助我构建一个健壮的测试框架，我需要为它们创建一个流程，以便未来任何具有 java 和 selenium 基础知识的志愿者都可以维护，添加新的测试必要时的情况。我读了一些关于 TestNG 的文章，但现在确定它是最好的。

请建议构建 java selenium 测试框架的最佳实践

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:57:22.807

1.  使用 Selenium 2/WebDriver 作为浏览器自动化工具
2.  [Geb](http://www.gebish.org/) + [Spock](http://code.google.com/p/spock/)如果你可以使用 Groovy 否则 JUNIT + [PageObject](http://code.google.com/p/selenium/wiki/PageObjects)模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:05:51.477

如果这只是一个没有很多 Javascript 的简单主页，我推荐 HTMLUnit，因为它比 Selenium 快。但是您可能对 BDD 风格的 Cuke4Duke 感兴趣。

[https://github.com/cucumber/cuke4duke/tree/master/examples/java-webdriver](https://github.com/cucumber/cuke4duke/tree/master/examples/java-webdriver)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:58:26.143

Junit 或 TestNG 是与 selenium RC 一起使用的不错选择。首先，您应该探索 ide，然后选择 selenium RC。[http://www.dev2all.com/articles/](http://www.dev2all.com/articles/)上提供了一个很好的示例

# android - Android 通知动态图标

> ID：10522808
> 
> 赞同：11
> 
> 时间：2012-05-09T19:27:12.867
> 
> 标签：android, dynamic, notifications, icons

是否可以用一些文本/整数覆盖通知图标？还是可以即时生成自定义图标？

例如，我为我的通知显示了当前图标，我希望能够在红色框中显示例如数字 2。

![图标](../Images/83789777805c4dd4e915dec9ce98d498.png)

由于这不是通知计数（所以不是红色气泡），因此在通知中设置“数字”将不起作用。

我是否必须为我希望显示的每个可能的数字创建一个单独的图标？还是有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:36:19.673

尝试使用 AnimationDrawable 的。您可以使用它们将多个可绘制对象组合成一个，然后选择要显示的。我真的认为，这是要走的路。

更多信息：[AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)

当然，您必须为要显示的所有整数提供单独的可绘制对象，但是这样，您可以轻松更改通知的外观

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:37:01.313

[Notification.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)

有两种方法：

```
setLargeIcon(Bitmap icon) 
```

和

```
setSmallIcon(int icon) 
```

由于小图标似乎只需要一个资源 ID，我认为您必须为您想要的每个可能的数字提供一个可绘制资源，然后您可以选择在运行时使用哪一个。

然而，大图标需要一个位图，因此您应该能够使用一些 java 代码生成一个并传递它。

说实话，虽然我不完全知道大图标和小图标之间的区别是什么。一般来说，我对通知没有太多经验。您可能会走运并发现 setLargeIcon 可以满足您的需要。但也可能是您只能对下拉通知栏时显示的图像使用 Bitmap 对象，而不是在折叠时显示的图像。

# ruby-on-rails - 如何在 ruby on rails 中将选定文件的数据从一种形式获取到另一种形式？

> ID：10522813
> 
> 赞同：0
> 
> 时间：2012-05-09T19:27:34.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, carrierwave, ruby-on-rails-3.2

我有一个微博表单，可以让用户发布微博。现在我想让他们能够上传照片/照片来代表他们将发布的微博。

**这是表格：**

```
 = form_for @micropost, :remote => true do |f|
        = f.file_field :image  # Needed for image previewing with html5 file api
        = f.hidden_field :user_id
        = f.text_area :content
        = f.submit "Post" 
```

我已经设置了模型、用于创建相册和上传照片的数据库表。

**我有一个照片模型：**

```
class Photo < ActiveRecord::Base

    belongs_to :photo_album

    attr_accessible :photo_album_id, :photo_title, :image, :remote_image_url
    mount_uploader :image, ImageUploader

    alpha_num_non_word_char = /^[a-zA-Z0-9\D_ -]*$/

    validates :image, :presence => true
    validates :photo_title, :presence => true,
      :length        => { :minimum => 2, :maximum => 50 },
      :format        => {
                          :with => alpha_num_non_word_char,
                          :message => "error"
                        }    
    validate :picture_size_validation, :if => "image?"

    def picture_size_validation
    errors[:image] << "Your photo should be less than 1MB" if image.size > 1.megabytes
    end

end 
```

**和照片模型：**

```
class PhotoAlbum < ActiveRecord::Base

    belongs_to :user
    has_many :photos
    belongs_to :photo

    attr_accessible :album_title, :user_id, :photo_id

    alpha_num_non_word_char = /^[a-zA-Z0-9\D_ -]*$/

    validates :album_title, :presence => true,
      :length        => { :minimum => 2, :maximum => 50 },
      :format        => {
                          :with => alpha_num_non_word_char,
                          :message => "error"
                        }    
end 
```

用户注册后，会为他们创建一个“微博相册”，其中将保存他们为微博上传的所有照片。

**我可以像这样轻松访问微博相册：**

```
@photo = Photo.new(:photo_album_id => PhotoAlbum.where(:user_id => current_user.id, :album_title => "microposts album").first.id) 
```

**最后是上传照片到相册的表格：**

```
= form_for @photo, :html => {:multipart => true} do |f|
  = f.hidden_field :photo_album_id
  = f.label :photo_title
  = f.text_field :photo_title
  = f.file_field :image
  = f.submit 
```

**我想要一个解决方案/帮助：**

现在，在用户通过微帖子表单选择照片后，我使用 html5 文件阅读器 api 读取用户选择的本地图像，然后将其显示在页面下方的页面上。这很好，但我接下来要做的是将所选图像上传并添加到“微博相册”。然后我想将它与微博的内容一起显示。

我像这样访问我的内容@microposts.each do |m|..... m.content 这样我就可以访问像 m.image 这样的图像。我需要如何将刚刚存储在“microposts 相册”相册中的图像路径放入 microposts 表的图像列中，以便可以使用 image_tag 帮助器显示它。

总而言之，我希望用户从微博表单中选择的照片上传到“微博相册”，这意味着照片详细信息将上传到照片表并从 photo_albums 表中引用，如果这有意义的话。

我不确定我是否从头到尾考虑过这一点，但如果可能的话，我想获得一些帮助、想法或解决方案。

我只是觉得最好使用我现有的图片上传资源，而不是为微博创建一个新资源。

提前致谢

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:45:08.560

将这些拼凑在一起，并从回形针的角度讲，为什么不让回形针在“微帖子”中处理所有图像上传，无论那是什么。这就像一条带有图像的推文吗？还是脸书状态更新？

另外，如果这不起作用，我只需在用户的 PhotoAlbum 中创建一张照片，然后将 ID 或路径或其他内容保存在 Micropost 模型中，这样你就可以执行类似`image_tag User.first.microposts.last.image_path`伪代码的操作，但你明白了。如果一个人有多个图像要保存，那么您可以从图像上传角度进行操作。

# html - 将数据发送到 CSS Modal Popup

> ID：10522823
> 
> 赞同：0
> 
> 时间：2012-05-09T19:28:15.977
> 
> 标签：html, css

我需要在以下位置操作我的 Mysql 数据：

1.  我在 HTML 表上填充 Mysql DB 内容，每一行都有“编辑”和“删除”按钮......（HTML“a”标签按钮）
2.  当我单击“编辑”按钮时，会打开一个纯 CSS3 模式弹出窗口，我需要在其中编辑行上的记录，
3.  如果我单击“删除”按钮，则打开纯 CSS3 模态弹出窗口以确认删除记录，如果答案为“是”，则继续删除记录，如果答案为“否”，则应返回父页面...

填充选定记录的列表正在运行。CSS3 Modal Popup 正在工作......问题是我如何向 Modal Popup 发送参数来操作数据？

有人可以帮忙吗。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:42:04.933

我这样做的方式没有特别的顺序：

1.  为桌子上的每个项目单独的模式。可能很麻烦，而且肯定效率不高，但不使用 Javascript 就可以完成工作。
2.  Javascript - 在按钮中有一个`data-id`and`data-table`属性。单击后，通过 AJAX 使用 Javascript 填充模式。
3.  Javascript - 将表数据存储在 JSON 数组中。使用上述属性访问 JSON 表对象的特定元素。
4.  Javascript - 如果可能，将 JSON 对象直接存储在`data`属性中，并在单击时加载模式。
5.  隐藏`<div>`所有内容，单击按钮时，将 HTML 传输到模态。

真的有很多其他的方法来完成它。选择一个看起来简单、高效、安全的，然后试一试。当您遇到困难时回到这里，我们很乐意为您提供帮助。

# c++ - 位从 0 ~ N in O(logn) 计数

> ID：10522825
> 
> 赞同：2
> 
> 时间：2012-05-09T19:28:30.903
> 
> 标签：c++

以下是我在采访街网站上看到的 C++ 代码，它从 0 ~ a（输入数字）开始计算 1 的位，我们可以说是 1 ~ a 虽然因为 0 没有 1。这段代码的时间复杂度是 O(logn) 使用递归。

我只是不明白其中的逻辑。谁能解释为什么？谢谢！

```
long long solve(int a)
{
 if(a == 0) return 0 ;
 if(a % 2 == 0) return solve(a - 1) + __builtin_popcount(a) ;
 return ((long long)a + 1) / 2 + 2 * solve(a / 2) ;
} 
```

BTW __builtin_popcount() 是 GNU 提供的一种内置方法，用于计算位为 1 的位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:57:19.953

我会尝试一下`O(lg n)`复杂性。请注意，尽管证明仍应保持运行时间，但我不太了解该函数的作用。

鉴于我们的递归关系：

```
T(a) = 0, if a == 0
     | T(a - 1) + O(1), if a is divisible by 2
     \ O(1) + T(a/2) 
```

我将在这里使用迭代方法：

```
T(a) = T(a/2) + O(1)
T(a) = T(a/2^2)) + O(1) + O(1)
T(a) = T(a/2^k)) + (k-1)O(1)
// continue unrolling until we reach the base case
T(a) = 0 + O(1) + ... + O(1) + O(1) = kO(1)
// k here corresponds to lg a since we continued dividing the problem set in half
T(a) = (lg a)*O(1)
T(a) = lg a 
```

量子点

# iphone - 你如何让 CSS 平铺/重复的背景在视网膜屏幕上保持清晰？

> ID：10522826
> 
> 赞同：10
> 
> 时间：2012-05-09T19:28:36.893
> 
> 标签：iphone, css, safari

在网页上，我使用 CSS 将所有图像缩放 50%，以使它们在视网膜屏幕上看起来清晰，但这不适用于平铺图像，似乎没有办法缩放平铺背景图像，这样它在视网膜屏幕上会很清晰，不会翻倍。对不起，如果这个问题令人困惑。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T19:48:31.033

设置[`background-size: 150px 150px;`](http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size0)300x300 背景图像似乎可以解决问题。请注意，这`background-size: 50%;`不会*像*您期望的那样，因为它将宽度和高度设置为父容器的 50%。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-05-09T19:34:30.790

我没有使用过 Retina 显示器，但我想为它们创建一个分辨率更高的备用背景图像会更好。

# actionscript-3 - 浏览器之间的 Flash 显示问题

> ID：10522827
> 
> 赞同：1
> 
> 时间：2012-05-09T19:28:39.053
> 
> 标签：actionscript-3, flash, browser

我遇到了一个问题，Flash 显然无法正确显示和/或不同操作系统和浏览器之间的功能被破坏——我一直认为这个问题不存在，因为 Flash 开发的本质是跨浏览器兼容性。

**问题：** 我正在为一个网站开发一个 Flash 模块，该网站显示了很多层图像以创建一个完整的图像。在 Windows 上的 Chrome、FireFox 或 Safari 中使用该站点时，一切正常。使用IE9时，一切都完全崩溃，图像消失，透明度变得疯狂，到处都是伪影；功能甚至中断。在 Mac 上，使用 FireFox 或 Safari，除了少数图层 (3) 不会显示并且在可见性切换为 true 时似乎锁定浏览器之外，所有内容都正确显示。

这一切归结为以下两个问题：

1.  Flash 在每个浏览器中的显示方式是否存在已知错误，需要我以任何特定方式编码或避免某些技术？
2.  这是否完全超出了我的掌控，以至于我需要告诉人们只使用带有*y浏览器的**x*操作系统？

 ***一些细节：** 这是一个 AS3 项目。

这些是动态加载的具有透明度的 .png 文件。

一些包含这些加载图像的 MovieClip 实例将其 BlendMode 设置为 BlendMode.MULTIPLY，但除此之外，它是一个直接显示的图像列表。

当其他图像正在加载但只是关闭时，正在加载导致问题的图像。使用 Windows/Chrome|FireFox|Safari 组合，它们工作得非常好。

任何帮助将不胜感激！如果您需要更多详细信息，请告诉我其他信息可能会有所帮助！提前致谢！-杰森

编辑：这是 html/js 嵌入代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Website</title>
<meta name="description" content="" />

<script src="js/swfobject.js"></script>
<script>
    var flashvars = {
    };
    var params = {
        menu: "false",
        scale: "noScale",
        allowFullscreen: "false",
        allowScriptAccess: "always",
        bgcolor: "",
        wmode: "direct" // can cause issues with FP settings & webcam
    };
    var attributes = {
        id:"Website"
    };
    swfobject.embedSWF(
        "movie.swf", 
        "altContent", "960", "530", "11.2.0", 
        "expressInstall.swf", 
        flashvars, params, attributes);
</script>
<style>
    html, body { height:100%; overflow:hidden; background-image:url('background.jpg'); background-repeat:no-repeat; }
    body { margin:0; }
</style>
</head>
<body>
<div id="altContent">
    <h1>Website</h1>
    <p><a href="http://www.adobe.com/go/getflashplayer">Get Adobe Flash player</a></p>
</div>
</body>
</html> 
```*

# python - 如何在 Python 中将 sqlite 导出为 CSV 而不格式化为列表？

> ID：10522830
> 
> 赞同：26
> 
> 时间：2012-05-09T19:28:51.817
> 
> 标签：python, sqlite, csv, export-to-csv

这是我目前拥有的：

```
conn = sqlite3.connect(dbfile)
conn.text_factory = str ## my current (failed) attempt to resolve this
cur = conn.cursor()
data = cur.execute("SELECT * FROM mytable")

f = open('output.csv', 'w')
print >> f, "Column1, Column2, Column3, Etc."
for row in data:
  print >> f, row
f.close() 
```

它会创建一个 CSV 文件，其输出如下所示：

```
Column1, Column2, Column3, Etc.
(1, u'2011-05-05 23:42:29',298776684,1448052234,463564768,-1130996322, None, u'2011-05-06 04:44:41') 
```

我不希望行在括号中，也不希望在字符串之前有引号或“u”。在没有所有这些的情况下，如何让它将行写入 csv？谢谢，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-09T19:31:49.070

您当前正在做的是打印出元组的 python 字符串表示形式，即`str(row)`. 这包括引号和'u'和括号等等。

相反，您希望为 CSV 文件正确格式化数据。好吧，试试这个[`csv`模块](http://docs.python.org/library/csv.html)。它知道如何为 CSV 文件格式化，这不足为奇。

```
with open('output.csv', 'wb') as f:
    writer = csv.writer(f)
    writer.writerow(['Column 1', 'Column 2', ...])
    writer.writerows(data) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2020-02-06T15:52:19.570

我的版本只需几行就可以正常工作。

```
import pandas as pd

conn = sqlite3.connect(db_file, isolation_level=None,
                       detect_types=sqlite3.PARSE_COLNAMES)
db_df = pd.read_sql_query("SELECT * FROM error_log", conn)
db_df.to_csv('database.csv', index=False) 
```

如果您想要一个表格分隔文件，请将 .csv 扩展名更改为 .tsv 并添加`sep='\t'`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-08T14:04:52.307

也可以直接使用 sqlite3 工具将 sqlite 数据库表转换为 csv 文件：

```
>sqlite3 c:/sqlite/chinook.db
sqlite> .headers on
sqlite> .mode csv
sqlite> .output data.csv
sqlite> SELECT customerid,
   ...>        firstname,
   ...>        lastname,
   ...>        company
   ...>   FROM customers;
sqlite> .quit 
```

上面的 sqlite3 命令将`data.csv`在您当前目录中创建一个名为的 csv 文件（当然该文件可以命名为您选择的任何名称）。此处提供更多详细信息：[http ://www.sqlitetutorial.net/sqlite-export-csv/](http://www.sqlitetutorial.net/sqlite-export-csv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T13:59:45.633

*如果只有一张桌子，我会使用一个愚蠢但更容易的方法！*

**首先，我将数据库转换为 Pandas DataFrame**

```
conn = sqlite3.connect(database file)
df = pd.read_sql_query("select * from TABLE", conn) 
```

**然后将 df 转换为 CSV 文件**

```
df.to_csv(r'...\test_file.csv') 
```

因此，正在以 test_file.CSV 的名称创建一个 CSV 文件

# hadoop - Hadoop java.io.IOException：Mkdirs 未能创建 /some/path

> ID：10522835
> 
> 赞同：44
> 
> 时间：2012-05-09T19:29:08.690
> 
> 标签：hadoop, hdfs, ioexception

当我尝试运行作业时，出现以下异常：

```
Exception in thread "main" java.io.IOException: Mkdirs failed to create /some/path
    at org.apache.hadoop.util.RunJar.ensureDirectory(RunJar.java:106)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:150) 
```

/some/path 是 hadoop.tmp.dir 的位置。但是，当我在 /some/path 上发出 dfs -ls cmd 时，我可以看到它存在并且数据集文件存在（在开始工作之前复制）。此外，在 hadoop 配置中正确定义了路径。任何建议将不胜感激。我正在使用 hadoop 0.21。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-07-08T01:08:54.533

刚刚在我的 MacBook Air 中以独立模式从 CDH4 运行 mahout 时遇到了这个问题。

问题是在解开 mahout 作业时，在不区分大小写的文件系统上创建了 /tmp/hadoop-xxx/xxx/LICENSE 文件和 /tmp/hadoop-xxx/xxx/license 目录。

我可以通过从 jar 文件中删除 META-INF/LICENSE 来解决此问题，如下所示：

```
zip -d mahout-examples-0.6-cdh4.0.0-job.jar META-INF/LICENSE 
```

然后用

```
jar tvf mahout-examples-0.6-cdh4.0.0-job.jar | grep -i license 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-26T18:14:10.967

问题是 OSX 特有的，这是因为默认情况下文件系统在 Mac 上设置为 **不区分大小写**（保留大小写但不区分大小写，我认为这非常糟糕）。

避免这种情况的一种方法是使用区分大小写的**磁盘实用程序**创建一个 .dmg 磁盘映像，并使用以下命令（作为超级用户）将此映像安装在您需要的位置（即 hadoop.tmp.dir 或 /tmp）：

```
sudo hdiutil attach -mountpoint /tmp <my_image>.dmg 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-09T23:24:08.950

这是正在创建的本地磁盘上的文件（用于将您的作业 jar 解压到），而不是在 HDFS 中。检查您是否有权 mkdir 此目录（从命令行尝试）

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-01T16:12:28.383

我过去多次遇到过这个问题，我相信这是 Mac 特有的问题。因为我使用 Maven 来构建我的项目，所以我可以通过在我的 Maven pom.xml 中添加一行来绕过它，如下所示：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>2.0</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <transformers>
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ApacheLicenseResourceTransformer">
                    </transformer>
                </transformers>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-21T15:24:19.647

在我的例子中，Maven 项目中 pom.xml 中的以下代码行在 Mac 上工作。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>2.0</version>
    <configuration>
      <shadedArtifactAttached>true</shadedArtifactAttached>
    </configuration>
    <executions>
      <execution>
        <phase>package</phase>
        <goals>
          <goal>shade</goal>
        </goals>
          <configuration>
            <filters>
              <filter>
                <artifact>*:*</artifact>
                <excludes>
                  <exclude>META-INF/*.SF</exclude>
                  <exclude>META-INF/*.DSA</exclude>
                  <exclude>META-INF/*.RSA</exclude>
                  <exclude>META-INF/LICENSE*</exclude>
                  <exclude>license/*</exclude>
                </excludes>
              </filter>
            </filters>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-01T13:07:47.147

检查所需空间是否可用。这个问题主要是因为空间问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-10T17:09:27.093

我在使用 MacOS Sierra 的 Mac 上构建 MapReduce 作业时遇到了同样的问题。相同的代码在 Ubuntu Linux（14.04 LTS 和 16.04 LTS）上运行没有问题。MapReduce 发行版是 2.7.3，并配置为单节点独立操作。该问题似乎与将许可证文件复制到 META_INF 目录有关。我的问题是通过在 Maven Shade 插件配置中添加一个转换器来解决的，特别是：`ApacheLicenseResourceTransformer`.

这是 POM.xml 的相关部分，它是该部分的`<build>`一部分：

```
<plugin>                                                                                                             <groupId>org.apache.maven.plugins</groupId>                                                                      
   <artifactId>maven-shade-plugin</artifactId>                                                                      
   <version>3.0.0</version>                                                                                         
   <executions>                                                                                                     
     <execution>                                                                                                    
       <phase>package</phase>                                                                                       
       <goals>                                                                                                      
         <goal>shade</goal>                                                                                         
       </goals>                                                                                                     
       <configuration>                                                                                              
         <transformers>                                                                                             
           <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">       
             <mainClass>path.to.your.main.class.goes.here</mainClass>                                        
           </transformer>                                                                                           
           <transformer implementation="org.apache.maven.plugins.shade.resource.ApacheLicenseResourceTransformer">  
           </transformer>                                                                                           
         </transformers>                                                                                            
       </configuration>                                                                                             
     </execution>                                                                                                   
   </executions>                                                                                                    
 </plugin> 
```

请注意，我还使用`ManifestResourceTransformer`指定 MapReduce 作业的主类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-22T13:02:41.393

就我而言，我只是将文件重命名为“log_test.txt”

因为操作系统（UBUNTU）试图生成一个同名的文件夹。“log_test.txt/__results.json”

# request - fb请求对话框过滤器不起作用

> ID：10522839
> 
> 赞同：2
> 
> 时间：2012-05-09T19:29:53.890
> 
> 标签：request, facebook-javascript-sdk

我们正在使用请求对话框

```
method  : 'apprequests',
new_style_message: true,
message : 'msg',
display: 'popup',
title : 'sometitle',
filters: ['app_non_users'],
to : [array of id] 
```

由于我们的用户将邀请他们的朋友加入应用程序，我们的目的是让 `App_non_users`过滤器与 `to`数组组合一起使用。

因此，如果我们传递`to`数组 [id1,id2,id3]，并且如果`id1`已经是应用程序的用户，则应用程序请求应该只传递给其余两个 id！

但看起来它不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:40:55.930

您对`filter`参数的理解并非 100% 正确。该`filter`参数告诉 Facebook 多选对话框要显示什么。*如果您还*包含该`to`参数，则与将请求发送给谁无关。

来自 Facebook 请求对话框文档 - [https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

> 如果显示多朋友选择器，这将控制用户看到的朋友集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:31:49.077

您可以手动进行...获取用户朋友列表，排除已经在您的数据库中注册为应用用户的朋友，然后使用 to 数组填充对话框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T20:16:54.540

请参阅 Facebook 错误： [https ://developers.facebook.com/bugs/151958874949988/](https://developers.facebook.com/bugs/151958874949988/)

它已经坏了一年，所以你将不得不解决它。

# html - 在后台 WP7 应用程序中流式传输 HTML 音频

> ID：10522840
> 
> 赞同：0
> 
> 时间：2012-05-09T19:30:01.023
> 
> 标签：html, windows-phone-7, audio, background

我试图找出某种方法来在后台/关闭我的应用程序时流式传输我在 WebBrowser 控件中的 HTML 音频。有没有人有这方面的经验，成功或失败？

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:48:51.160

这实际上取决于您使用的流媒体基础架构的方式。一些网站，比如 Pandora，有一个很好的实现。

您可以从[这里](http://html5doctor.com/native-audio-in-the-browser/)开始了解如何使用 HTML5`<audio>`标记（如果您打算使用该标记）。

# django - django 是否包含基本的 http 身份验证中间件实现？

> ID：10522841
> 
> 赞同：0
> 
> 时间：2012-05-09T19:30:04.880
> 
> 标签：django, authentication, basic-authentication

我正在 Django 中实现一个 api，并希望在用户发出 api 请求时使用基本身份验证来识别用户。

到目前为止，我发现的文档似乎不完整，或者似乎没有回答正确的问题（例如，[这里](https://stackoverflow.com/questions/152248/can-i-use-http-basic-authentication-with-django)的答案似乎取决于让 Apache 处理身份验证）。

Django中的http基本身份验证是否有标准或默认实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:23:34.400

看起来基本身份验证已融入 Django 随附的身份验证库中，并且开箱即用。[optixx 提到的](https://stackoverflow.com/a/10522881/383793)django-piston似乎是一个有用的工具，可以将 api 添加到现有的 django 项目（或者甚至创建一个仅 api 的项目）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:33:18.327

您应该考虑查看[https://bitbucket.org/jespern/django-piston/wiki/Home](https://bitbucket.org/jespern/django-piston/wiki/Home)。构建 API 所需的一切，无论是带有 JSON 的 REST 还是 XML。包括基本身份验证甚至 oauth2。

# ruby-on-rails - 过滤和搜索的好宝石？

> ID：10522842
> 
> 赞同：2
> 
> 时间：2012-05-09T19:30:10.467
> 
> 标签：ruby-on-rails, ruby

我必须创建一个网站，每个注册用户都可以创建代表产品的帖子（用于过滤的帖子有多个标签），并且任何人都可以看到帖子，可以搜索特定单词（在帖子名称或帖子标签中）并且可以应用过滤器（发布标签）。

我再说一遍，任何注册用户都可以发帖，不仅仅是管理员。

我可以使用什么宝石？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:31:00.560

有许多 gems/engines 等可以帮助您做到这一点，您可以在以下位置看到其中的一些：

[https://www.ruby-toolbox.com/categories/rails_search](https://www.ruby-toolbox.com/categories/rails_search)

Thinking Sphinx 会进行全文搜索，但对于您感兴趣的内容，这听起来可能有点矫枉过正。

探索各种选项并可能帮助您入门的好教程位于：

[http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)

# android - 有什么类似于Android中iPhone的CCHMac的方法吗？

> ID：10522843
> 
> 赞同：1
> 
> 时间：2012-05-09T19:30:12.320
> 
> 标签：android

我有一个问题，我有一个 iPhone 代码来转换 MD5 中的东西，我必须在 Android 中编写相同的代码。但问题是有一个方法名**CCHMac**，我不知道那是什么？**它对两个字符串作为key & data**执行了什么功能。JAVA/Android中是否有类似的方法？请向我建议任何有关相同的解决方案。

* *iPhone 代码：*

```
secret  = @"e24a6167409288f486a78271cc316c4f";
data = @"/v1/vehicles/get-make-models.json?sort=mpg&to=&filter=category&client-id=10030812&from=convertible";
(NSString  *)signRequestNSString  *)data
{
const  char  *cKey  = [secret  cStringUsingEncoding:NSASCIIStringEncoding];       
const  char  *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
unsigned  char  cHMAC[CC_MD5_DIGEST_LENGTH];
CCHmac(kCCHmacAlgMD5, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
NSData  *HMAC = [[NSData  alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
NSString  *hash = [HMAC base64EncodedString];
    [HMAC release];
return  hash;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:44:57.757

javax.crypto 包包含 HMAC 功能，尤其是 javax.crypto.Mac。

# ruby-on-rails - 模块 AbstractController::Rendering 的未定义方法 render_to_body

> ID：10522845
> 
> 赞同：3
> 
> 时间：2012-05-09T19:30:19.073
> 
> 标签：ruby-on-rails, ruby

我创建了一个新的 rails 应用程序（3.2.3，ruby 1.9）并尝试启动服务器。服务器正常启动，但后来我去[http://localhost:3000](http://localhost:3000)我有错误：

```
 => Rails 3.2.3 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    [2012-05-09 22:20:03] INFO  WEBrick 1.3.1
    [2012-05-09 22:20:03] INFO  ruby 1.9.3 (2012-02-16) [i686-linux]
    [2012-05-09 22:20:03] INFO  WEBrick::HTTPServer#start: pid=3998 port=3000
    [2012-05-09 22:20:05] ERROR NameError: undefined method `render_to_body' for module `AbstractController::Rendering' 
```

这是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T19:43:51.020

我在使用 HAML 3.1.5 版时遇到了这个问题。恢复到 3.1.4 修复了它。如果不是 HAML，完整的堆栈跟踪将有助于诊断您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:06:19.890

如果您刚刚启动您的应用程序，最好使用 alpha

```
gem 'haml', '~> 3.2.0.alpha.10' 
```

为新事物做好准备

# sql - 行组内的 ssrs 列可见性

> ID：10522848
> 
> 赞同：3
> 
> 时间：2012-05-09T19:30:27.643
> 
> 标签：sql, reporting-services

我有一个报告，其中有多个组，主要是行和一个列组，但我需要根据选择的参数显示某些列。如图所示，当我右键单击专业列时，列可见性不可用。有人可以帮我解决这个问题。

谢谢

[![图片](../Images/2c8943507454a63f0f5a2d9c836ad2d1.png)](https://i.stack.imgur.com/HuMxy.png)
[（来源：[ravidowluri.com](http://www.ravidowluri.com/untitled.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:59:52.317

我自己解决了这个问题，没有在列中使用可见性选项，而是根据属性窗口中的参数值和边框样式隐藏和显示标题文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:52:31.600

可以在该组列的“属性”侧栏中设置可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T15:01:00.263

我通过选择组标题/列下的所有单元格（一次一个）并将关联的文本框隐藏设置为“真”来解决

# android - 如何在 android 模拟器中为冰淇淋三明治设置剪贴板？

> ID：10522850
> 
> 赞同：0
> 
> 时间：2012-05-09T19:30:35.533
> 
> 标签：android, clipboard, android-4.0-ice-cream-sandwich, avd, android-2.3-gingerbread

我找到了在 Gingerbread AVD 中设置剪贴板文本的命令行解决方案，但是当我运行 ICS AVD 时，此命令行不起作用。

我从这个页面构建了一个脚本：[Pasteing text into Android emulator clipboard using adb shell](https://stackoverflow.com/questions/7283446/pasting-text-into-android-emulator-clipboard-using-adb-shell)。

同样，如果我使用的是 Gingerbread AVD，这对于写入剪贴板和读取内容非常有效，但是当我写入 ICS 剪贴板时，返回的包裹只会显示“未知包”，而当我尝试阅读剪贴板，它似乎返回一个空字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:30:18.577

这是如何做到的：

当 false 使用 Android 的旧 Clip API 并且当 true 使用新 Clip API 时，我使用一个 main 方法，该方法采用参数 oldApi。

完整项目：[https ://github.com/daniel-c05/LightClipper/blob/master/src/com/deadpixels/light/clipper/utils/ClipHelper.java](https://github.com/daniel-c05/LightClipper/blob/master/src/com/deadpixels/light/clipper/utils/ClipHelper.java)

```
/**
 * 
 * @param context The context
 * @param label The label to show to the user via {@code ClipDescription}
 * @param value The actual value to store on the clipboard via {@link ClipHelper#addItemToClipboard(Context, String, String)}
 * @param oldAPI Whether or not we are running on pre-HoneyComb API.
 */
public static void addItemToClipboard(final Context context, final String label, final String value, final boolean oldAPI) {
    if (oldAPI) {
        addTextToClipboard(context, value);
    }
    else {
        addItemToClipboard(context, label, value);
    }
}

/**
 * This is only called when oldAPi is passed as false on {@link #addItemToClipboard(Context, String, String, boolean)}
 * @param context The context, required to get the Cliboard System Service. 
 * @param label The label to show to the user via {@code ClipDescription}
 * @param value The value to store on the clipboard. 
 */
@SuppressLint("NewApi")
private static void addItemToClipboard (final Context context, final String label, final String value) {
    ClipboardManager manager = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);
    ClipData.Item item = new Item(value);
    ClipDescription description = new ClipDescription(label, new String [] {ClipDescription.MIMETYPE_TEXT_PLAIN});
    ClipData data = new ClipData(description, item);
    manager.setPrimaryClip(data);               
}

/**
 * This is only called when oldAPi is passed as true on {@link #addItemToClipboard(Context, String, String, boolean)}
 * @param context The context, required to get the Cliboard System Service. 
 * @param value The value to store on the clipboard. 
 */
@SuppressWarnings("deprecation")
private static void addTextToClipboard (final Context context, final String value) {
    android.text.ClipboardManager manager = (android.text.ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);
    manager.setText(value);         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:04:44.710

我希望这个示例链接对您的答案有用。该项目的构建目标：Android 4.0 将在 ICS 的 Emulator 上运行。

[http://www.edumobile.org/android/android-tutorial/clipboard-example-in-android-development/](http://www.edumobile.org/android/android-tutorial/clipboard-example-in-android-development/)

这个例子展示了如何使用剪贴板管理器在 android 中复制 text/intent/url。

# c++ - 返回 c++ 迭代器

> ID：10522852
> 
> 赞同：7
> 
> 时间：2012-05-09T19:30:37.753
> 
> 标签：c++, vector, iterator

如果找到对象，我有一个返回迭代器的函数。

现在我有一个问题。如何解决通知调用此函数的对象找不到对象的问题？

```
vector<obj>::iterator Find(int id, int test)
{
        vector<obj>::iterator it;
            aClass class;

            for(it = class.vecCont.begin(); it != class.vecCont.end(); ++it)
            {
               if(found object) //currently in psuedo code
               return it;
            }

            return ???? // <<< if not found what to insert here?

} 
```

我是否需要更改我的数据结构？

提前致谢！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T19:33:39.373

Return `vector::end()`，抛出异常或返回普通迭代器以外的其他内容

更好的是，不要实现自己的`Find`功能。这就是`<algorithm>`图书馆的用途。根据您的伪代码，您可能可以使用`std::find`or `std::find_if`。 `find_if`在平等不一定意味着`operator==`. 在这些情况下，您可以使用 [C++11] lambda，或者如果您无法使用 C++11，则可以使用仿函数类。

由于函子是最小的公分母，我将从以下开始：

```
#include <cstdlib>
#include <string>
#include <algorithm>
#include <vector>
#include <functional>
using namespace std;

class Person
{
public:
    Person(const string& name, unsigned age) : name_(name), age_(age) {};

    string name_;
    unsigned age_;
};

class match_name : public unary_function <bool, string>
{
public:
  match_name(const string& rhs) : name_(rhs) {};
  bool operator()(const Person& rhs) const
  {
    return rhs.name_ == name_;
  }
private:
    string name_;
};

#include <iostream>

int main()
{
    vector<Person> people;
    people.push_back(Person("Hellen Keller", 99));
    people.push_back(Person("John Doe", 42));

    /** C++03 **/
    vector<Person>::const_iterator found_person = std::find_if( people.begin(), people.end(), match_name("John Doe"));

    if( found_person == people.end() )
        cout << "Not FOund";
    else
        cout << found_person->name_ << " is " << found_person->age_;
} 
```

`found_person`now 指向名为“John Doe”的人，否则指向`people_.end()`是否找不到该人。

C++11 lambda 是一种新的语言语法，它使得声明/定义函子和使用的过程在许多情况下更加简单。它是这样完成的：

```
string target = "John Doe";
vector<Person>::const_iterator found_person = std::find_if(people.begin(), people.end(), [&target](const Person& test) { return it->name_ == target; }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T19:33:35.040

您可以将迭代器返回到末尾，即`return class.vecCont.end()`表明这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T19:34:43.347

只返回结束迭代器怎么样？

您的代码变为：-

```
vector<obj>::iterator Find(int id, int test)
{
   vector<obj>::iterator it;
   aClass class;

   for(it = class.vecCont.begin(); it != class.vecCont.end(); ++it)
   {
     if(found object) //currently in psuedo code
       break;
   }

   return it;
} 
```

或者只是使用`std::find`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T19:33:42.110

`class.vecCont.end()`如果找不到对象，您应该返回。但是@chris 是对的——这正是`std::find`它的用途。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T19:34:50.073

像这样的东西

```
std::vector<obj>::iterator pos;
pos = find(coll.begin(),coll.end(), val); 
```

并且不要忘记检查您的元素是否存在于容器中

```
if (pos != coll.end()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T19:39:36.967

永远不要在类中模拟`std::algorithm`函数。它们是免费功能是有原因的。公开返回正确迭代器（可能还有 a ）的成员函数`begin`通常就足够了。如果您需要使用仿函数进行花哨的查找，请同时公开仿函数。`end``boost::iterator_range`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T19:43:42.093

不要将迭代器返回到隐藏的容器。简单地返回您想要的，即访问对象（如果存在）的方法。在此示例中，我通过指针将对象存储在容器中。如果您的对象只是暂时存在，那么新建一个并将对象复制过来！

```
class AClass;

//...some time later
std::vector<AClass*> vecCont; //notice, store pointers in this example!

//..some time later
AClass * findAClass(int id, int test)
{
  vector<AClass*>::iterator it;

  for(it = class.vecCont.begin(); it != class.vecCont.end(); ++it)
  {
     if(found object) //currently in psuedo code
     return it;
  }

  return NULL;
}

//later still..

AClass *foundVal = findAClass(1, 0);
if(foundVal)
{
  //we found it!
}
else
{
  //we didn't find it
} 
```

编辑：明智的做法是为您的班级编写一个比较器并使用标准算法排序并为您找到它们。然而，做你想做的事。

# sql-server - SQL Server MERGE + 加入其他表

> ID：10522855
> 
> 赞同：11
> 
> 时间：2012-05-09T19:30:51.067
> 
> 标签：sql-server, tsql, merge, common-table-expression, sql-merge

我在数据库项目中使用 MERGE 语句从静态值集中填充参考数据，如下所示：

```
 MERGE INTO dbo.[User] AS TARGET
USING (VALUES
    ('me@somewhere.com', 'My Name'))
AS SOURCE(UserName, FullName)
ON SOURCE.UserName = TARGET.UserName
WHEN NOT MATCHED BY TARGET THEN
    INSERT (UserId, UserName, FullName)
    VALUES (NEWID(), UserName, FullName); 
```

当我想根据其他表中的内容填充辅助表时，问题就出现了。例如，我的 UserPermission 表包含用户 ID 和角色 ID，我希望我的静态值设置为 ('me@somewhere.com', 'Admin') 并且能够加入用户和权限以获得插入的 ID 值。不知道在哪里做...

编辑：

用户表（ID、用户名）1、John Smith 2、Mark Wahlerg

角色表(ID, RoleName) 1, Administrator 2, User 3, Guest

用户角色表（用户 ID、角色 ID）

我希望 MERGE 语句的 SQL 来调整 User-Role 表，以便我可以指定如下内容：

```
USING(VALUES
 ('John Smith', 'Administrator'),
 ('Mark Wahlburg', 'User') 
```

它将加入以确定 ID，插入不存在的组合（并可能删除存在但不在 MERGE 中的组合。

解决方案：

```
WITH CTE AS
(
   SELECT UserId, RoleId
   FROM (VALUES
      ('John Smith', 'Administrator'),
      ('Mark Wahlburg', 'User'))
      AS SOURCE(UserName, RoleName)
   INNER JOIN User ON SOURCE.UserName = User.UserName
   INNER JOIN Role ON SOURCE.RoleName = Role.RoleName
)
MERGE INTO UserRole AS TARGET
USING CTE
ON CTE.UserId = TARGET.UserID AND CTE.RoleId = TARGET.UserId
WHEN NOT MATCHED BY TARGET THEN
  INSERT(UserId, RoleId)
  VALUES(UserId, RoleId) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T19:58:30.890

Merge 支持 CTE，因此也许您可以将其用作源，组合您的静态数据并在 cte 中执行任何连接。

# sql - Where vs. 有计算字段

> ID：10522856
> 
> 赞同：1
> 
> 时间：2012-05-09T19:30:52.837
> 
> 标签：sql

我正在寻找某个年龄之间人口中的所有人。我在下面尝试的查询给出了每个年龄的计数。例如，我正在寻找 5-10 年，查询给了我每个年龄的计数，而不是返回单个数字

```
select datediff(yyyy,dob,admitdate) as age, count(datediff(yyyy,dob,admitdate) as counts
from myTable
group by datediff(yyyy,dob,admitdate)
having (count(datediff(yyyy,dob,admitdate) between 5 and 10) 
```

这是不正确的，但我尝试过的事情（比如删除 HAVING 和使用 WHERE）没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:34:23.200

```
select count(*) as counts
from myTable
where datediff(yyyy,dob,admitdate) between 5 and 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:34:29.097

1.  删除`group by`子句
2.  更改`having`为`where`并删除`count`
3.  不要选择`age`，**选择**`count(*)`

# c# - 追加和清除文本文件 Web 表单 C#

> ID：10522858
> 
> 赞同：0
> 
> 时间：2012-05-09T19:31:00.840
> 
> 标签：c#, webforms

有一个现有进程正在写入我网站上的文本文件。假设文件位于[http://www.mysite.com/addresses/addresses.txt](http://www.mysite.com/addresses/addresses.txt)

我已经能够使用client.DownloadString成功地在文本框中显示文件的内容，但是我找不到关于如何附加到这个文本文件的末尾以及清除这个文件的内容的明确答案. 这是我的网络服务器上的一个文本文件。

我在 C# 中工作。我也知道服务器上文件的路径 c:\inetpub\site\addresses\address.txt。

关于如何附加或清除此文件的任何想法？我似乎在它上面找到的所有东西都在 Windows 窗体上，我没有使用足够的 DotNet 来知道在哪里看。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:35:37.900

查看这篇文章[CodeSnip：使用 ASP.NET 2.0 读写文本文件](http://aspalliance.com/544_CodeSnip_Read_and_Write_Text_Files_with_ASPNET_20)

```
System.IO.StreamWriter StreamWriter1 = 
new System.IO.StreamWriter(Server.MapPath("test.txt"));
StreamWriter1.WriteLine(TextBox1.Text);
StreamWriter1.Close(); 
```

# sql - 累积条件查询

> ID：10522862
> 
> 赞同：-1
> 
> 时间：2012-05-09T19:31:42.290
> 
> 标签：sql, sql-server

表格1：

```
ID      Total1 Total2 Total3
1         10       0          20
1         40       0          50
1         15       0          5 
```

表 2：

```
ID     Total

1        140 
```

如何累积添加所有行并在 table2 中找到匹配的总数？

我如何累积添加所有行并在 table2 中找到不匹配的总数并编写更新语句来更新（添加那些）并写入 table2？

```
select sum(t1.total1) + sum(t1.total2) +sum(t1.total3) as "Total" from
table t1, table t2 where t1.ID=t2.ID and  sum(t1.total1) +
sum(t1.total2) +sum(t1.total3)=t2.total; 
```

我无法正确获取更新语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:40:23.893

看起来您有正确的查询来查找总数并将它们匹配起来。要更新总数不同的行，您可以使用这样的相关子查询：

```
UPDATE table2
SET total = (
   SELECT SUM(Total1 + Total2 + Total3) FROM table1
   WHERE id = table2.id
   GROUP BY id
) 
```

或者使用连接（稍微复杂一些，但可能更快）

```
UPDATE t2
SET t2.total = t1.total
FROM table2 t2
INNER JOIN (
   SELECT id, SUM(Total1 + Total2 + Total3) as total FROM table1
   GROUP BY id
) t1 ON t1.id = t2.id
WHERE t2.total <> t1.total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:37:14.030

```
select T1.* from
(
    select t1.ID, sum(t1.total1) + sum(t1.total2) + sum(t1.total3) as Total
    from table t1
    group by t1.ID
) t1
inner join table t2 on t1.ID = t2.ID and t1.Total = t2.total 
```

# dojo - dojox.form.Uploader 和 FileList - FileList 不显示多个文件

> ID：10522865
> 
> 赞同：0
> 
> 时间：2012-05-09T19:31:52.760
> 
> 标签：dojo

我对 dojox.form.Uploader 有疑问。我想用它来附加文件以发送电子邮件，虽然我认为我已经复制了文档的示例，但我没有成功地使它与 FileList 一起工作以查看附加的内容。

详细来说，我创建了这个 ContentPane：

```
attachPane = new ContentPane({
    id: name + "attach_top" + counter,
    region: 'right',
    style: "width: 55%; height: 100%;",
    "class": "edgePanel",
    content: "<div id='attachdiv'></div>" +
             "<div id='files' dojoType='dojox.form.uploader.FileList' uploaderId='uploader'></div>" +
             "<input type='button' id='remBtn' label='Clear' dojoType='dijit.form.Button' />"
}); 
```

它位于 BorderContainer 内。此 ContentPane 是在单击按钮后创建的。通过此单击，我还使用 Uploader 函数创建了一个函数，并将其绑定如下：

```
function createattacher(name) {                
        var attacher = new dojox.form.Uploader({
        id: "uploader",
        label: "Add Attachments",
        multiple: true,                    
        url: "./Attachments.apsx"
    }, "attachdiv");
    attacher.startup();                
} 
```

上传器正在工作我可以选择文件但 FileList 小部件一次只显示一个文件！！！！当我尝试上传另一个文件时，新文件不会添加到 FileList 中，但它会替换以前的文件，看起来好像只上传了一个文件。尽管您可以看到 Uploader 具有属性“multiple：true”！

我究竟做错了什么？我为这件愚蠢的事情浪费了半天的时间:(我敢打赌这一定很明显，但我被卡住了！请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:34:15.093

您可以在选择窗口中同时选择多个文件

# bouncycastle - 从 CRMF 请求到 CertificateRequest (PKCS#10) 签名

> ID：10522868
> 
> 赞同：0
> 
> 时间：2012-05-09T19:32:31.947
> 
> 标签：bouncycastle, asn.1, csr

我做了一个示例代码来了解如何获取 CRMF（mozilla 证书请求）以将其转换为更类似于 PKCS#10 的 CSR

我将 Base 64 CRMFRequest 作为 ASN1InputStream 类型。

我将其转换为 CertReqMsg 类型（Bouncycastle）

当我调试时，我意识到 CertReqMsg 有公钥，另一个数据，如 Subject（CN、O、OU 等）等，但更重要的是，它有一个签名和一个 AlgoritmIdentifier。

但该对象没有吸气剂

如何将签名提取为 DERBitString ...？我需要将它用作 CertificationRequest 对象的参数（它根据我的需要返回 CSR）

顺便说一下，CertificationRequest 需要一个 CertificationRequestInfo 对象作为参数。在其中（CertificationRequestInfo），它接收 Attributes 作为参数。我认为这个属性是这样的：

分发点、通知、policyOID、subjectAlternativeNameDN

我知道它以

```
 ASN1Set attributes = null;
    attributes = new DERSet(); 
```

但我不知道如何填写这个参数

```
 CertificationRequestInfo info = new CertificationRequestInfo(subject, infoPublicKey, attributes); 
```

抱歉，如果某些问题似乎很明显...但我找不到解决方案..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:58:48.780

您将无法将 CRMF 格式转换为 PKCS#10 CSR。

CSR的[结构如下所示](http://www.rsa.com/rsalabs/node.asp?id=2132)，并由主题的私钥签名：

```
CertificationRequest ::= SEQUENCE {
    certificationRequestInfo CertificationRequestInfo,
    signatureAlgorithm AlgorithmIdentifier{{ SignatureAlgorithms }},
    signature BIT STRING
} 
```

（本质上，它与自签名 X.509 证书非常相似，没有颁发者和有效期。）

由于当您收到 CRMF 请求时，您将没有主题的私钥，因此您将无法进行此签名。

如果您正在编写某种 CA 软件，那么您实际上并不需要它。处理 CRMF 请求和 CSR 请求或多或少是等效的。无论如何，CA 不应该真的盲目地做 CSR 想要的事情，因此无论如何它都必须以其他方式审查它与公钥和身份相关联的属性。

# java - 从 SWT 组合框获取数据

> ID：10522871
> 
> 赞同：0
> 
> 时间：2012-05-09T19:32:39.563
> 
> 标签：java, swt

我正在尝试在从数据库填充的组合框中使用数据密钥对。更新数据库中的记录。
我可以用数据库中的数据填充组合框，但是当我用组合框的数据更新记录时，我收到一条错误消息，指出如果组合框的选择索引为空，我有一个空指针。
我正在尝试设计一种方法来检查该框是否为空白，这样如果是，我就不会将其用于更新。
我对此感到非常困惑。

这是我到目前为止检查空值并在值不为空时运行更新的代码。更新自行工作，但是当我尝试从组合框中获取数据时，我必须转换数据类型并且没有选择任何内容时，我会收到错误消息。

```
public Boolean checkStrNull(String strTest) {
    if (strTest == null) {
        return false;
    } else if (strTest.isEmpty()) {
        return false;
    } else if (strTest == "") {
        return false;
    } else {
        return true;
    }
}

public Boolean checkIntNull(int intTest) {
    if (intTest == 0) {
        return false;
    } else {
        return true;
    }
}

public void updateIntAnimal(Animal a, String strField, Integer intNew)
        throws SQLException {
    if (checkIntNull(intNew)) {
        a.updateIntField(strField, intNew);
    }
}

public void updateStrAnimal(Animal a, String strField, String strNew)
        throws SQLException {
    if (checkStrNull(strNew)) {
        a.updateStrField(strField, strNew);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:42:32.547

您可以使用[`getSelectedIndex()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#getSelectedIndex%28%29)组合框上的方法来查看是否有选择：

> [...] 如果没有选定的项目或用户指定的项目不在列表中，则返回 -1。

# android - 使用来自 url 的 android 设置壁纸我不明白

> ID：10522877
> 
> 赞同：0
> 
> 时间：2012-05-09T19:33:02.523
> 
> 标签：android, image, url, button, wallpaper

大家好，我已经从 URL 检查了设置壁纸上的帖子，但我对编程真的很陌生，我仍然不明白，谁能给我一个例子，基本上我在服务器上有一张图片，我想推送一个按钮并将其设置为手机壁纸再次感谢您的帮助

```
public class TestingThree extends Activity {

ImageView image;

private class BackgroundTask extends AsyncTask
<String, Void, Bitmap> {
    protected Bitmap doInBackground(String...url) {
        //--- download an image ---
        Bitmap bitmap = DownloadImage(url[0]);
        return bitmap;

    }
    protected void onPostExecute(Bitmap bitmap) {
        ImageView image = (ImageView) findViewById(R.id.imageView1);
        image.setImageBitmap(bitmap);
    }
}

private InputStream OpenHttpConnection(String urlString)
throws IOException

{InputStream in = null;
int response= -1;

URL url = new URL(urlString);
URLConnection conn = url.openConnection();

if (!(conn instanceof HttpURLConnection ))
    throw new IOException("Not an HTTP connection");
try{
    HttpURLConnection httpConn = (HttpURLConnection) conn;
    httpConn.setAllowUserInteraction(false);
    httpConn.setInstanceFollowRedirects(true);
    httpConn.setRequestMethod("GET");
    httpConn.connect();
    response = httpConn.getResponseCode();
    if (response == HttpURLConnection.HTTP_OK){
        in = httpConn.getInputStream();
    }

    }
catch (Exception ex)
{
    throw new IOException("Error connecting");
}
return in;
}

private Bitmap DownloadImage(String URL)
{
    Bitmap bitmap = null;
    InputStream in = null;
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in);
        in.close();

    }
    catch (IOException e1){
        Toast.makeText(this,e1.getLocalizedMessage(),
        Toast.LENGTH_LONG).show();

        e1.printStackTrace();

    }
    return bitmap;
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.wallpaper);

    new BackgroundTask().execute("http://myglobaljournal.com/images/imagetest.jpg");

    Button setWallpaper = (Button) findViewById(R.id.button3);
    setWallpaper.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            WallpaperManager wManager;
            Bitmap bitmap;

            try {
                bitmap = BitmapFactory.decodeFile(null);
                wManager = WallpaperManager.getInstance(getApplicationContext());
                wManager.setBitmap(bitmap);

            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    });
}

} 
```

我正在尝试将它实现到底部的按钮，我从链接中提取图像并将其直接设置为壁纸再次谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:40:59.083

试试这个：

```
 ImageView image;
    private class BackgroundTask extends AsyncTask
    <String, Void, Bitmap> {
        protected Bitmap doInBackground(String...url) {
            //--- download an image ---
            Bitmap bitmap = DownloadImage(url[0]);
            return bitmap;
        }
        protected void onPostExecute(Bitmap bitmap) {
            ImageView image = (ImageView) findViewById(R.id.imageView1);
            bitmaptwo=bitmap;
            image.setImageBitmap(bitmap);
        }
    }
    private InputStream OpenHttpConnection(String urlString)
    throws IOException
    {InputStream in = null;
    int response= -1;
    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();
    if (!(conn instanceof HttpURLConnection ))
        throw new IOException("Not an HTTP connection");
    try{
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK){
            in = httpConn.getInputStream();
        }
        }
    catch (Exception ex)
    {
        throw new IOException("Error connecting");
    }
    return in;
    }
    private Bitmap DownloadImage(String URL)
    {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        }
        catch (IOException e1){
            Toast.makeText(this,e1.getLocalizedMessage(),
            Toast.LENGTH_LONG).show();

            e1.printStackTrace();
        }
        return bitmap;
    }
    public Bitmap bitmaptwo;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.wallpaper);
        new BackgroundTask().execute("http://myglobaljournal.com/images/imagetest.jpg");
        Button setWallpaper = (Button) findViewById(R.id.button3);
        setWallpaper.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                WallpaperManager wManager;

                try {
                   // bitmap = BitmapFactory.decodeFile(null);
                    wManager = WallpaperManager.getInstance(getApplicationContext());
                    wManager.setBitmap(bitmaptwo);

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

        });

    } 
```

所需权限：

```
<uses-permission android:name="android.permission.SET_WALLPAPER"/> 
```

# c# - 如何在 C# 中动态添加到数组

> ID：10522879
> 
> 赞同：0
> 
> 时间：2012-05-09T19:33:11.690
> 
> 标签：c#, arrays, asp.net-mvc-3

为了回应这个答案...[从视图中的 Javascript 访问 MVC3 模型属性](https://stackoverflow.com/questions/9007434/access-mvc3-model-properties-from-javascript-in-the-view)我想知道如何在该示例中动态地构造视图模型的数据，而无需进行硬编码。即我希望能够做 model.Values.Add(...)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:34:48.773

已经有一个动态对象，您可以将值添加到......它被称为[`ViewBag`](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications).

尝试自己动手是没有意义的，因为您已经失去了强类型模型的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:53:52.980

你可以有一个看起来像这样的模型

```
public class MyViewModel()
{
    private readonly List<string> _values = new List<string>();

    public string[] Values { get { return _values.ToArray(); } }

    public void AddValue(string value)
    {
        _values.Add(value);
    }
} 
```

# python - python语法：评估0时如何返回0而不是False

> ID：10522880
> 
> 赞同：4
> 
> 时间：2012-05-09T19:33:12.887
> 
> 标签：python, syntax, return, return-value

对于一个任务，我们被要求定义一个斐波那契函数，我用这个来完成：

```
def fibonacci(n):
    if n < 2:
        return n
    return fibonacci(n-1) + fibonacci(n-2) 
```

但是，我已经看到递归函数，例如阶乘函数，在一行 return 语句中定义，如下所示：

```
def factorial(n):
    return n > 1 and n * factorial(n-1) or 1 
```

因此，我尝试将其应用于我的斐波那契函数。经过几次尝试，我让它适用于所有测试用例，除了 s = 0 时，在这种情况下它应该返回 0 时返回 False。这是我所在的位置：

```
def fibonacci(n):
    return ((n == 0 or n == 1) and n) or (n > 1 and (fibonacci(n-1) + fibonacci(n-2))) 
```

我知道python将0评估为False，那么当n为0时，我如何让python返回零而不是False，同时保持代码的当前长度/结构？这甚至可能吗？

此外，这种创建函数（递归或其他）的风格是否比教科书版本更可取/更不受欢迎？（我想不仅仅是因为可读性）

需要明确的是，我已经满足了作业的要求，并且仅出于个人知识，我希望更清楚地了解 return 语句中发生的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T19:36:49.197

如果是[falsy](http://docs.python.org/reference/expressions.html#boolean-operations)，这个`x and y or z`成语就不起作用。您可以交换条件以使其仍然有效：`y`

```
def fibonacci(n):
    return n >= 2 and fibonacci(n-1) + fibonacci(n-2) or n 
```

然而，从 Python 2.5（6 年前发布）开始，我们有了适当的[条件表达式](http://docs.python.org/whatsnew/2.5.html#pep-308)，不再需要`and/or`hack：

```
def fibonacci(n):
    return n if n < 2 else fibonacci(n-1) + fibonacci(n-2) 
```

现在，这具有指数运行时复杂性。如果您想提高效率，请使用以下`O(n)`算法：

```
def fibonacci(n):
    a, b = 0, 1
    for _ in range(n):
        a, b = b, a + b
    return a 
```

或者甚至编写一个生成器来产生所有数字，并且只取你需要的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:38:19.860

也许这更清楚：

```
def fibonacci(n):
    print ((n == 0 or n == 1) and n)
    print (n > 1 and (fibonacci(n-1) + fibonacci(n-2)))
    return ((n == 0 or n == 1) and n) or (n > 1 and (fibonacci(n-1) + fibonacci(n-2)))

print 0 or False
print False or 0 
```

# linux - 如何将匹配的文件移动到另一个目录？

> ID：10522882
> 
> 赞同：2
> 
> 时间：2012-05-09T19:33:19.433
> 
> 标签：linux, file, bash, shell

我需要移动数千张图片：

```
/Directory/0000/000000.jpg
/Directory/..../.......jpg
/Directory/ZZZZ/ZZZZZZ.jpg 
```

到一个平面目录：

```
/Directory/000000.jpg
/Directory/.......jpg
/Directory/ZZZZZZ.jpg 
```

我怎样才能做到这一点？

本质上我正在寻找这样的东西：（但是，你知道，实际上有效）

```
mv -r /Directory/*/*.jpg /Directory 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T19:34:54.403

关于什么：

```
find /Directory -name \*.jpg -exec mv {} /Directory \; 
```

那应该行得通。

# sqlalchemy - 网站标记：SQLAlchemy 继承、将参数传递给超类以及多对多关系

> ID：10522884
> 
> 赞同：0
> 
> 时间：2012-05-09T19:33:26.600
> 
> 标签：sqlalchemy, flask

为糟糕的标题道歉。

我正在使用 Flask 和 SQLAlchemy 建立一个网站。我想要一个可用于所有内容类型的标签列表。我正在使用 sqlite3 作为我的开发数据库。

使用html表单输入数据后，只有标签没有被保存到数据库中。我不确定弱点在哪里？我不知道我在概念上是否有关于 SQLAlchemy 如何处理继承、将参数传递给子类和/或多对多关系的问题。我真的很感激任何关于如何改进模型的主题或建议的明确性。

这是代码：

我有一个标签和内容之间的多对多关系的关联表：

```
tagging_association = Table('tagging', Model.metadata,
    Column('content_id', Integer, ForeignKey('content.id')),
    Column('tag_id', Integer, ForeignKey('tags.id'))
) 
```

我已经设置了一个 Content 类：

```
class Content(Model):
    ''' 
    The base class for all content types.
    '''
    __tablename__ = 'content'
    id = Column(Integer, primary_key=True)
    tag = relationship('Tag', secondary='tagging', backref='content')
    type = Column(String(50))

    __mapper_args__ = { 
        'polymorphic_identity':'content',
        'polymorphic_on':type
    } 
```

所有内容类型都是 Content 的子类，使用 SQLAlchemy 的 Joined Table Inheritance：

```
class Entry(Content):
    '''The database model for blog-like entries on the homepage.'''
    __tablename__ = 'entries'
    id = Column(Integer, ForeignKey('content.id'), primary_key=True)
    title = Column(String(200))
    body = Column(String)

    __mapper_args__ = { 
        'polymorphic_identity':'entries',
    }   

    # Want to pass a single tag first, just to get it to work. Is this how would I do that?
    def __init__(self, title, body, *args, **kwargs):
        super(Entry, self).__init__(*args, **kwargs)
        self.title = title
        self.body = body 
```

和标签类：

```
class Tag(Model):
    '''Tag database model.'''
    __tablename__ = 'tags'
    id = Column(Integer, primary_key=True)
    tag = Column(String(30), nullable=False, unique=True)

    def __init__(self, tag):
        self.tag = tag 
```

这是我的 WTForms 课程：

```
class EntryForm(Form):
    title = TextField('Title', validators=[Required()])
    body = TextAreaField('Body', validators=[Required()])
    tags = TextField('Tags') 
    submit = SubmitField('Submit') 
```

这是我获取表单数据并将其添加到数据库的地方：

```
@mod.route('/add_entry/', methods=['GET', 'POST'])
@requires_admin
def add_entry():
    form = EntryForm()
    if form.validate():
        entry = Entry(form.title(), form.body(), form.tags())
        form.populate_obj(entry)
        db_session.add(entry)
        db_session.commit()
        return redirect(url_for('general.index'))
    return render_template('general/add_entry.html', form=form) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:10:30.170

如果您在上面显示的是实际代码，您可以看到您的关系被命名为`tag`( `tag = relationship(...)`，但在`EntryForm`您的`TextField`属性中被称为`tags`。所以您的`tag`关系永远不会设置，因此永远不会保存。设置到该字段`tags`的内容将被忽略。我假设您只需要将 重命名`Content.tag`为`Content.tags`.

上面应该回答为什么它没有保存的问题，但是如果你只是重命名字段，这不会解决你的问题。您需要编写正确处理标签的代码：

*   将标记文本分配给内容时，您需要：
    1.  看看这个标签是否`tag`已经存在。
    2.  如果是，请加载它。
    3.  如果没有，请创建它
    4.  将找到/创建的标签附加到`Content.tags`

[有关类似问题，请参阅在 SQLAlchemy 中以多对多关系插入数据](https://stackoverflow.com/a/2310548/99594)的答案，让您了解要做什么以及如何完成。

# go - 上传请求无效

> ID：10522892
> 
> 赞同：1
> 
> 时间：2012-05-09T19:33:59.927
> 
> 标签：go, google-bigquery, google-api-go-client

[尝试使用Go 的 Google API 客户端库](http://code.google.com/p/google-api-go-client)将数据上传到 BigQuery 时，我收到以下响应。

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "badRequest",
    "message": "Invalid Upload Request"
   }
  ],
  "code": 400,
  "message": "Invalid Upload Request"
 }
} 
```

我的工作描述符如下所示：

```
j := &bigquery.Job{
    Configuration: &bigquery.JobConfiguration{
        Load: &bigquery.JobConfigurationLoad{
            DestinationTable: &bigquery.TableReference{
                projectId,
                "xyz",
                name + "_" + yyyymmdd,
            },
            SkipLeadingRows: 1,
            FieldDelimiter:  "|",
            MaxBadRecords:   3,
            Schema: &bigquery.TableSchema{
                []*bigquery.TableFieldSchema{
                    {Name: "f1", Type: "STRING"},
                    {Name: "f2", Type: "STRING"},
                    {Name: "f3", Type: "STRING"},
                    {Name: "f4", Type: "STRING"},
                    {Name: "f5", Type: "STRING"},
                    {Name: "f6", Type: "STRING"},
                    {Name: "f7", Type: "STRING"},
                    {Name: "f8", Type: "STRING"},
                    {Name: "f9", Type: "STRING"},
                    {Name: "f10", Type: "STRING"},
                    {Name: "f11", Type: "STRING"},
                    {Name: "f12", Type: "STRING"},
                    {Name: "f13", Type: "STRING"},
                    {Name: "f14", Type: "STRING"},
                    {Name: "f15", Type: "STRING"},
                    {Name: "f16", Type: "STRING"},
                    {Name: "f17", Type: "STRING"},
                },
            },
        },
    },
} 
```

FWIW，使用这个库的其他调用工作正常，所以我已经排除了 oauth 问题等。

**编辑**：我在请求发出之前捕获了它。请注意，这是在 http.Client 能够添加 oauth 标头之前。实际请求很大，因此我将其缩短并删除了标识符。

```
POST /upload/bigquery/v2/projects/.../jobs HTTP/1.1
Host: www.googleapis.com
User-Agent: google-api-go-client/0.5
Content-Length: 56369074
Content-Type: multipart/related; boundary=2220cacc03485c8143026fe3f0c40dcb1aaec8c8c2426e69adf620fc12cf

--2220cacc03485c8143026fe3f0c40dcb1aaec8c8c2426e69adf620fc12cf
Content-Type: application/json

{"configuration":{"load":{"destinationTable":{"projectId":"...","datasetId":"...","tableId":"..."},"skipLeadingRows":1,"fieldDelimiter":"|","maxBadRecords":3,"schema":{"fields":[{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"},{"name":"...","type":"STRING"}]}}}}

--2220cacc03485c8143026fe3f0c40dcb1aaec8c8c2426e69adf620fc12cf
Content-Type: text/plain; charset=utf-8

H0|H1|H2|H3|H4|H5|H6|H7|H8|H9|H10|H11|H12|H13|H14|H15|H16
f0_0|f0_1|f0_2|f0_3|f0_4|f0_5|f0_6|f0_7|f0_8|f0_9|f0_10|f0_11|f0_12|f0_13|f0_14|f0_15|f0_16
f1_0|f1_1|f1_2|f1_3|f1_4|f1_5|f1_6|f1_7|f1_8|f1_9|f1_10|f1_11|f1_12|f1_13|f1_14|f1_15|f1_16
# Three lines
# of comments
# in the trailer

--2220cacc03485c8143026fe3f0c40dcb1aaec8c8c2426e69adf620fc12cf-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:20:43.097

事实证明，这是由库中的错误引起的，该错误未发送所需的“uploadType”查询参数。有关修复错误的补丁，请参阅[这些差异](http://code.google.com/p/google-api-go-client/source/diff?spec=svn121eae2528fc59038468bbaffb29d72c5457e389&r=121eae2528fc59038468bbaffb29d72c5457e389&format=side&path=/bigquery/v2/bigquery-gen.go&old_path=/bigquery/v2/bigquery-gen.go&old=dec617be81a2f4f0c95067dc0f95334485b00825)。

However this exposed another bug in the library that I am currently working with the author to fix. I will update this answer when that fix is in.

**EDIT**: As of [this patch](http://code.google.com/p/google-api-go-client/source/detail?r=f49294b59cd7b4d9078687b9215622a38b1d016e), the bug referenced above is fixed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:20:43.943

让我从我不是围棋专家的警告开始。也就是说，问题似乎出在您上传的数据上。看起来您正在执行媒体上传请求，因为您没有在作业配置中提供源 Google 存储路径，并且您发送的错误来自媒体上传器。

但是，您没有显示对[JobInsertCall.Media](http://code.google.com/p/google-api-go-client/source/browse/bigquery/v2/bigquery-gen.go#993)的调用 ——您如何设置 Media 字段？您可以验证它是有效数据，还是尝试使用虚拟数据？

# excel - 初始化用户窗体类

> ID：10522899
> 
> 赞同：0
> 
> 时间：2012-05-09T19:34:26.850
> 
> 标签：excel, vba, userform

我在excel中创建了一个用户表单和几个按钮（数字将在运行时设置）。单击时，每个按钮将打开自己的用户表单版本（相同的用户表单，但每个按钮将有自己的用户表单，例如：按钮 1 将打开用户表单 1，按钮 2 将打开用户表单 2 等，每个用户表单是相同的用户表单类）。

我正在考虑以某种方式创建一个用户表单类，每个按钮都会实例化一个用户表单对象。

我只是不确定实现这一目标的正确代码/语法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:08:45.687

根据您的最后评论，我认为这可能会有所帮助。

只需创建一个用户表单。然后创建一个打开用户表单并用参数化变量填充特定数据的函数。然后为每个按钮调用将变量传递给函数。像这样的东西：

```
Private Sub Button1_Click()

load_user_form "Handy", "Code"

End Sub

Private Sub Button2_Click()

load_user_form "different", "data"

End Sub

Function load_user_form(strField1 as String, strField2 as String)

userForm.Show
userForm.TextBox1.Value = strField1
userForm.textBox2.value = strfield2
End Function 
```

这段代码可能不会出现，但它会让你到达那里。

# jquery - django 和 jquery 点击加载对象字段到 div

> ID：10522906
> 
> 赞同：1
> 
> 时间：2012-05-09T19:34:48.840
> 
> 标签：jquery, django

我需要解决这个问题：

我有一个 django 站点，它在食谱列表中显示所有食谱

这些配方中的每一个都是一个链接，单击该链接时应将该配方的字段加载到 popupdiv 中

到目前为止，我已经设置了弹出 div - 现在我只需要弄清楚如何访问该按钮的配方字段。

基本上我想加载的内容是 recipe.name recipe.author recipe.steps 等，但我不知道该怎么做。

现在我也有一个表单正在使用 ajax 加载到 div 中，所以我不想干扰 ajax 调用（我也会发布此代码）。对这样的问题也使用 ajax 是否有意义？

这是我的按钮点击功能

```
$(document).ready(function(){

    $(".button").click(function(){
        var content = $("#popupContact").load($('#recipe'));
    });
}); 
```

这是我页面的模板：

```
{% block content %}
{% autopaginate recipe_list 6 %}
    <div id="recipe_cont">
            {% for recipe in recipe_list %}
        <div class="recipe">
            <div class="button">//here is the button that is clicked to load recipe 
            <a href="{% url cookbook.views.userrecipe recipe.id %}" style="display: none;"></a>   
            <img src="{{ STATIC_URL }}chicknbraw.jpg" alt="" height="70" width="70" style="display:inline;" />
            <h4>{{ recipe.name }}</h4>
             </div>
            <h5>{{ recipe.author }}</h5>
            <h5>Prep Time: {{ recipe.prep_time }} minutes</h5>

            <h6><a href="/addrecipe/{{ recipe.id }}">Add Recipe</a>
                <a href="/removerecipe/{{ recipe.id }}">Remove Recipe</a></h6>
        </div>
    {% endfor %}
    </div>

    <div id="popupContact" class="popup">//load recipe information into this div
            <a id="popupContactClose" style="cursor:pointer;float:right;">x</a>
            <p id="contactArea">
            <h1 style="text-align:center">Create New Recipe</h1>
            {% include 'cookbook/create_form.html' %} //this is for the form that is loaded. Is there a way to include a different template? Maybe have multiple contactAreas and hide/show different ones depending on what is being loaded?
            </p>
    </div>
    <div id="backgroundPopup">
    </div>  
    <div id="col2-footer">
    {% paginate %}
    <p id="recipe_order_text"> order by: <a href="/userbook/ordered/name">abc</a>|<a href="/userbook/ordered/date">date</a> 
    </div>

{% endblock %} 
```

这是表单ajax调用：

```
$(document).ready(function(){

    function hijack() {
        var form = $('form#createrecipeform');
        form.each (function(){
            this.reset();
            });
        form.submit(function(e) {
            e.preventDefault();
            console.log('ajax form submission function called successfully.');
            //form = $(this);
            console.log(form)
            var serialized_form = form.serialize();
            $.ajax({ type: "POST", 
                url: $(this).attr('action'),
                data: serialized_form, 
                success: (function(data) { 
                    console.log('ajax success function called successfully.');
                    data = $.parseJSON(data);
                    if (data.success) {
                        console.log('success');
                    } else {        
                        console.log('failure');
                        var newForm = data.form;
                        form.replaceWith(newForm);
                        hijack();
                    }
                })
            });
            return false;
        });
    };

    hijack();

}); 
```

非常感谢您提供的任何解决方案

凯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:07:55.730

一种 hack-y 方法（不推荐！）将类似于以下内容（在 javascript 中）

```
$('.button').click(function() {
    var recipe = $(this).parent();
    var name   = $('h4', recipe);
    var author = $('h5', recipe);
    // etc etc
}); 
```

为了使它更好*一点*，将类分配给包含名称和作者的元素，然后您可以执行以下操作而不是获取 h4 和 h5

```
var name = $('.recipe-name', recipe); 
```

同样，这在很大程度上是一个 hack，应该以不同的方式完成......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:03:23.070

我最终为每个加载的配方创建了一个隐藏的 div，然后使用 .html() 将每个 div 放置在弹出窗口中

这最终完美地工作 - 比 replaceWith 附加或克隆更好

谢谢你的帮助@akhaku

# php - 通过字符串引用类变量

> ID：10522908
> 
> 赞同：1
> 
> 时间：2012-05-09T19:34:54.147
> 
> 标签：php

这是一些伪代码代表我的代码，你不会理解范围。

Class Tester 有私有变量，持有类。数组包含 var 的基本名称。函数 bar 尝试从字符串中构造变量，然后使用它。如果这不能完成，我理解，但我只是在构建一个变量名。

```
Class Tester{

     private $preClass1post = new TestClass1();

     private $preClass2post = new TestClass2();;

     private $preClass2post = new TestClass2();;

     public $classBasicNames = array('Class1','Class2','Class3');

     function Bar(){
          foreach($classBasicNames as $classBasicName){

             $fullClassName = 'PreText'.classBasicName.'PostText';

             $fullClassName->DoWork();
             //always throws object does not exist
          }

}

}

                    //actual code for context
            $mapperName = 'mapper'.$entityName.'Stat';
            echo $mapperName;
            $dbos = $this->{$mapperName}->fetchAll($options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:37:54.527

首先，您似乎在调用对象的方法——即使您评估字符串以获取类，您仍然需要实例化对象。

你可以做：

```
$class = 'PreText'.classBasicName.'PostText';
$object = new $class();
$object->DoWork(); 
```

[请参阅此处](http://www.php.net/manual/en/language.oop5.basic.php)的示例 3 ，或访问相关[讨论](https://stackoverflow.com/q/4578335/1039678)。

**更新：**

如果已知变量名，请使用`$$fullClassName->doWork()`

# node.js - 在 Windows 中创建 derbyjs 应用程序

> ID：10522911
> 
> 赞同：4
> 
> 时间：2012-05-09T19:35:06.273
> 
> 标签：node.js, derbyjs

可能是一个愚蠢的问题。我已经在我的 Windows 7 机器上安装了 node.js 并尝试安装 derbyjs。我运行了“npm install -g derby”命令，一切似乎都很好。

现在，当我尝试通过

```
 derby new --coffee testProj01 
```

它给了我一个错误，即 derby 不是一个公认的命令。我也尝试从 node_modules/derby/bin 目录运行新项目命令。现在它显示“选择一个应用程序以打开选定的文件”弹出窗口。

我想问题是bin文件夹中没有exe。我应该先建造德比，然后才能开始工作吗？我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T00:44:01.830

从 v0.3.8 开始，Derby 和它所依赖的库现在可以在 Windows 上再次运行。做一个节点安装和一个 npm 更新，你应该很好。

有关背景，请参阅[https://github.com/codeparty/derby/issues/42](https://github.com/codeparty/derby/issues/42)。

# javascript - 无法访问 JSON 对象数组，让我发疯

> ID：10522915
> 
> 赞同：1
> 
> 时间：2012-05-09T19:35:29.880
> 
> 标签：javascript, asp.net, json, jquery

我已经坚持了一天了，我快疯了。可能真的很简单，但这里有。

我有一个 jQuery.Ajax 方法，它调用一个检索订单列表的 WebMethod。jQuery方法是这样的......

```
/* Get orders by the current logged in employee's department */
    function getOrdersByDept(department, filter, dateFrom, dateTo) {
        var dto = {};
        dto['department'] = department;
        dto['filter'] = filter;
        dto['dateFrom'] = dateFrom;
        dto['dateTo'] = dateTo;
        $.ajax({
            type: 'POST',
            url: 'ProcessPO.aspx/GetOrdersByDept',
            data: JSON.stringify(dto),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (data) {
                displayOrders(data.d);
            },
            error: function (xhr, status, errorThrown) {
                alert(xhr.responseText);
            }
        });
    } 
```

返回此 JSON...

![订单](../Images/dd9dea4e138220527749838e3e952c89.png)

从这个 WebMethod...

```
[WebMethod]
    public static List<Order> GetOrdersByDept(Department department, Filter filter, DateTime? dateFrom = null, DateTime? dateTo = null)
    {
        return OrderLists.GetOrdersByDepartment(department, filter, dateFrom, dateTo);
    } 
```

现在这里是 displayOrders 代码...

```
/* Fill the orders table. */
    function displayOrders(data) {
        $('#gdvOrders tbody').empty();
        for (var key in data) {
            var altRow;
            if (key % 2 == 0)
                altRow = 'class="alt-row"';
            else
                altRow = '';
            /* Convert JSON formatted date to readable short date format */
            var orderDate = data[key].OrderDate.substr(6);
            var currentTime = new Date(parseInt(orderDate));
            var month = currentTime.getMonth() + 1;
            var day = currentTime.getDate();
            var year = currentTime.getFullYear();
            orderDate = day + "/" + month + "/" + year;

            var orderStatus;
            switch (data[key].Status) {
                case 0:
                    orderStatus = 'Pending';
                    break;
                case 1:
                    orderStatus = 'Closed';
                    break;
            }
            $('#gdvOrders tbody').append($('<tr ' + altRow + '><td>' + data.d[key].OrderId + '</td>' +
                                                '<td>' + orderDate + '</td>' +
                                                '<td>' + data[key].EmployeeName + '</td>' +
                                                '<td>' + data[key].Items + '</td>' +
                                                '<td>$' + data[key].SubTotal.toFixed(2) + '</td>' +
                                                '<td>$' + data[key].TaxTotal.toFixed(2) + '</td>' +
                                                '<td>$' + data[key].GrandTotal.toFixed(2) + '</td>' +
                                                '<td>' + orderStatus + '</td></tr>'));
        }
        $('#gdvOrders tbody td:nth-child(4)').hide();
        $('#gdvOrders tbody td:nth-child(5)').hide();
        $('#gdvOrders tbody td:nth-child(6)').hide();
    } 
```

每个订单都有一个 Items 的属性，基本上是一个 List。我将其存储在表格的第 4 列中并将其隐藏。当用户单击表中的行/顺序时，我想将每个项目的另一个列表加载到另一个表中。为您查看而剥离的订单行的点击功能是这样的......

```
$('#gdvOrders tbody tr').live('click', function () {
            displayItems($(this).find('td:nth-child(4)').text());
}); 
```

现在 displayItems 函数被定义为...

```
function displayItems(data) 
```

我尝试了许多不同的方法来遍历数据，当我...

```
alert(data) 
```

我收到...

```
[object Object], [object Object] 
```

当我尝试遍历它（尝试了几种不同的方式）时，我得到了未定义的字符，或者当我尝试数据 [0] 时，数据[1](https://i.stack.imgur.com/U33tC.jpg)将显示 o 等字符，以此类推。基本上只是给我返回 [object Object] 的每个字符而不是数组中的对象。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:38:37.980

尝试：

```
 success: function (data) {
            displayOrders(data.d);
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:39:49.457

更改这些行

```
data: '{"department": "' + department + '", "filter": "' + filter + '", "dateFrom": "' + dateFrom + '", "dateTo": "' + dateTo + '"}',
contentType: 'application/json; charset=utf-8',
dataType: 'json', 
```

简单地

```
data: dataObj, 
dataType: 'json', 
```

在 ajax 之前根据您的方便在 json 对象或数组中创建您的数据

```
var dataObj = {};
dataObj['department'] = department;
dataObj['filter'] = filter;
dataObj['dateFrom'] = dateFrom;
dataObj['dateTo'] = dateTo; 
```

并在数据中使用此dataObj并删除co​​ntentType，同时发送数据jquery本身会将dataObj转换为键值对，如下所示

`department=valueofdepartment&filter=valueoffilter&....`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:41:11.240

您在不使用控制台的情况下做到了这一点吗？

`alert()`不会显示对象，您应该使用`console.log(data)`查看对象结构，然后执行以下操作：

```
var key2 = data.key1.key2 
```

ETC...

迭代使用

```
$.each(data, function(index, item) {
  console.log(item); 
}); 
```

或（已在您的脚本中使用？）

```
for (var key in data) {
   console.log(data[key]);
} 
```

另一方面，这是：

```
$(this).find('td:nth-child(4)').text(); 
```

会给你一个文本字符串，而不是一个对象，因此是 name `text()`，这就是你传递给`displayItems()`函数的文本字符串，或者在你的情况下，你可能没有达到目标并且什么也没传递。

在`text[4]`对字符串执行操作时，它会为您获取文本字符串中的第五个字母。

尝试做：

```
$('#gdvOrders tbody tr').live('click', function () {
    var data = $(this).find('td:nth-child(4)').text();
    console.log(data);
    displayItems(data);
}); 
```

看看控制台说什么？如果使用较新版本的 jQuery，请考虑移至 on()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T22:11:56.037

这个问题与我的类似，在 AJAX 之后，我失去了对 OO JS 类成员的访问权限。解决方案很简单。在调用 $.getJSON() 之前，执行 'var obj = this;' 然后您可以在 .done() 之后访问您的所有班级成员/资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T23:02:22.513

所以最终结果必须在 displayOrders 的行中......

```
+ '<td>' + data[key].Items + '</td>' + 
```

我不得不用..

```
+ '<td>' + JSON.stringify(data[key].Items) + '</td>' + 
```

并在行

```
$('#gdvOrders tbody tr').live('click', function () {
    displayItems($(this).find('td:nth-child(4)').text());
}); 
```

我不得不将其更改为...

```
$('#gdvOrders tbody tr').live('click', function () {
    displayItems(JSON.parse($(this).find('td:nth-child(4)').text()));
}); 
```

然后允许我用......迭代它

```
function displayItems(data) {
    for (var key in data) {
        /* this can be accessed like */
        data[key].PropertyName
    }
} 
```

似乎发生了一些转换，但它确实有效。感谢大家的意见！

# asp.net - 试图通过 ASP.NET 在 AD 中更改“用户必须更改”的密码

> ID：10522919
> 
> 赞同：2
> 
> 时间：2012-05-09T19:35:57.537
> 
> 标签：asp.net, active-directory, passwords

如果帐户没有选中“用户下次登录时必须更改”，我可以更改密码。
但是，如果选中该框，当我尝试访问用户时会收到错误的密码错误。

LogOnUser() 返回正确的错误代码，因此我知道用户必须更改密码。
正如 Joe Kaplan 所说（早[在](http://bytes.com/topic/c-sharp/answers/245640-changing-password-account-has-change-password-first-logon-using-system-directoryservices#post995764)2004 年），我无法绑定到用户以更改他们的密码。

无论是使用 AccountManagement/PrincipalContext 还是 DirectoryEntry/DirectorySearcher，都是同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:48:40.730

我在上一个职位的一个项目中这样做了。我们没有尝试使用他们自己的凭据绑定到用户，而是设置了一个仅具有更改密码权限的 AD 帐户。

因此，一旦您有指示用户必须更改密码的错误代码，请询问新密码，以管理员身份获取用户，然后进行更改。

我记得，我们必须明确地传递管理员用户名和密码才能使其工作，而不是依赖于运行代码的凭据。

为了安全起见，我们将受限管理员用户名和密码的加密副本存储在注册表中，并在我们拨打电话时对其进行解密。

代码将是这样的：

```
 PrincipalContext dc = new PrincipalContext(ContextType.Domain, 
            "www.yourdomain.com", "dc=yourdomain,dc=com", 
            ContextOptions.SimpleBind, "AdminUserName", "AdminPassword");
        UserPrincipal usr = UserPrincipal.FindByIdentity(dc, 
            "UserWhoNeedsPasswordChanged");
        usr.ChangePassword("oldPass", "newPass"); 
```

# xml - XSLT 将 Root 节点放入 Target Schema 的字符串元素中

> ID：10522926
> 
> 赞同：1
> 
> 时间：2012-05-09T19:36:27.187
> 
> 标签：xml, xslt, biztalk

我在尝试解决我面临的问题时遇到了很多困难。我们有一个源 XML 模式，我们正在使用 XSLT 将其转换为目标模式。然而，目标模式中的元素之一旨在保存来自源 XML（包括属性）的原始 XML。我不希望使用 CDATA，因为这会在再次使用数据时引起问题。我在 BizTalk 2009 中运行此 XSLT，因此我将仅限于使用 XSLT 1.0/XPATH 1.0。

哦，更复杂一点的是，源 XML 中的数据在某些元素中有 < 和 >。

源示例：

```
<root>
<foo company="1">
    <bar id="125" title="foobar3">
    &gt; 15 years
</bar>
    <bar id="126" title="foobar4">
    &lt; 5 years
</bar>
</foo>
<foo company="2">
    <bar id="125" title="foobar3">
    &gt; 15 years
</bar>
    <bar id="126" title="foobar4">
    &lt; 5 years
</bar>
</foo> 
```

示例目标

```
<newXML>
    <Company>1</Company>
    <SourceXML>
&lt;root&gt;
    &lt;foo company="1"&gt;
        &lt;bar id="125" title="foobar3"&gt;
        "&gt;" 15 years
    &lt;/bar&gt;
        &lt;bar id="126" title="foobar4"&gt;
        "&lt;" 5 years
    &lt;/bar&gt;
    &lt;/foo&gt;
    &lt;foo company="2"&gt;
        &lt;bar id="125" title="foobar3"&gt;
        "&gt;" 15 years
    &lt;/bar&gt;
        &lt;bar id="126" title="foobar4"&gt;
        "&lt;" 5 years
    &lt;/bar&gt;
    &lt;/foo&gt;
&lt;/root&gt;   
    </SourceXML>
</newXML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:19:46.493

没那么复杂。您只需为将所需文本表示写入输出树的元素和属性节点编写两个模板。只有文本节点中的引号`<`和`>`引号需要更多的输入。样式表可能如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
      <newXML>
         <Company>1</Company>
         <SourceXML>
            <xsl:apply-templates/>
         </SourceXML>
      </newXML>
   </xsl:template>

   <xsl:template match="*">
      <xsl:value-of select="concat('&lt;',name())"/>
      <xsl:apply-templates select="@*"/>
      <xsl:text>&gt;</xsl:text>
      <xsl:apply-templates select="node()"/>
      <xsl:value-of select="concat('&lt;/',name(), '>')"/>
   </xsl:template>

   <xsl:template match="@*">
      <xsl:value-of select="concat(' ', name(),'=','&quot;', ., '&quot;')"/>
   </xsl:template>

   <xsl:template match="text()">
      <xsl:call-template name="wrap">
         <xsl:with-param name="str">
            <xsl:call-template name="wrap">
               <xsl:with-param name="str" select="."/>
               <xsl:with-param name="find" select="'&lt;'"/>
            </xsl:call-template>
         </xsl:with-param>
         <xsl:with-param name="find" select="'&gt;'"/>
      </xsl:call-template>
   </xsl:template>

   <xsl:template name="wrap">
      <xsl:param name="str"/>
      <xsl:param name="find"/>
      <xsl:choose>
         <xsl:when test="contains($str, $find)">
            <xsl:variable name="before" select="substring-before($str, $find)"/>
            <xsl:variable name="after" select="substring-after($str, $find)"/>
            <xsl:value-of select="concat($before, '&quot;', $find, '&quot;')"/>
            <xsl:call-template name="wrap">
               <xsl:with-param name="str" select="$after"/>
               <xsl:with-param name="find" select="$find"/>
            </xsl:call-template>
         </xsl:when>
         <xsl:otherwise>
            <xsl:value-of select="$str"/>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

# ios - 使用 GCD 运行重复 NSTimer？

> ID：10522928
> 
> 赞同：21
> 
> 时间：2012-05-09T19:36:30.273
> 
> 标签：ios, objective-c, grand-central-dispatch, nstimer, nsrunloop

我想知道为什么当您在 GCD 块中创建重复计时器时它不起作用？

这工作正常：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(runTimer) userInfo:nil repeats:YES];
}
-(void)runTimer{
    NSLog(@"hi");
} 
```

但这不起作用：

```
dispatch_queue_t myQueue;

-(void)viewDidLoad{
    [super viewDidLoad];

    myQueue = dispatch_queue_create("someDescription", NULL);
    dispatch_async(myQueue, ^{
        [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(runTimer) userInfo:nil repeats:YES];
    });
}
-(void)runTimer{
    NSLog(@"hi");
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-09T19:39:04.763

[NSTimers](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/)被安排在当前线程的[run loop](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/)上。但是，GCD 调度线程没有运行循环，因此在 GCD 块中调度计时器不会做任何事情。

有三种合理的选择：

1.  弄清楚你想在哪个运行循环上安排计时器，并明确地这样做。用于[`+[NSTimer timerWithTimeInterval:target:selector:userInfo:repeats:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/doc/uid/20000319-CHDECCEE)创建计时器，然后[`-[NSRunLoop addTimer:forMode:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/doc/uid/20000321-addTimer_forMode_)将其实际安排在您要使用的运行循环上。这需要处理有问题的运行循环，但[`+[NSRunLoop mainRunLoop]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/doc/uid/20000321-SW3)如果你想在主线程上执行它，你可以只使用它。
2.  切换到使用基于计时器的[调度源](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW41)。这在 GCD 感知机制中实现了一个计时器，它将以您希望在您选择的队列上的间隔运行一个块。
3.  在创建计时器之前显式[`dispatch_async()`](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW7)返回主队列。这等效于使用主运行循环的选项#1（因为它还将在主线程上创建计时器）。

当然，这里真正的问题是，你为什么要从 GCD 队列中创建一个计时器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-22T12:33:30.610

NSTimer 被调度到线程的runloop。在问题代码中，GCD 调度的线程的 runloop 没有运行。您必须手动启动它，并且必须有退出运行循环的方法，因此您应该保留对 NSTimer 的引用，并在适当的时候使其无效。

NSTimer对target有强引用，所以target不能对timer有强引用，runloop对timer有强引用。

```
weak var weakTimer: Timer?
func configurateTimerInBackgroundThread(){
    DispatchQueue.global().async {
        // Pause program execution in Xcode, you will find thread with this name
        Thread.current.name = "BackgroundThreadWithTimer"
        // This timer is scheduled to current run loop
        self.weakTimer = Timer.scheduledTimer(timeInterval: 1, target: self, selector: #selector(runTimer), userInfo: nil, repeats: true)
        // Start current runloop manually, otherwise NSTimer won't fire.
        RunLoop.current.run(mode: .defaultRunLoopMode, before: Date.distantFuture)
    }
}

@objc func runTimer(){
    NSLog("Timer is running in mainThread: \(Thread.isMainThread)")
} 
```

如果以后定时器失效了，在Xcode中再次暂停程序执行，你会发现那个线程已经消失了。

当然，GCD 调度的线程有runloop。GCD 在内部生成和重用线程，线程对调用者是匿名的。如果你觉得不安全，你可以使用 Thread. 不要害怕，代码很容易。

实际上，我上周尝试了同样的事情并与提问者同样失败，然后我找到了这个页面。在我放弃之前，我尝试了 NSThread。有用。那么为什么 GCD 中的 NSTimer 不能工作呢？它应该是。阅读[runloop 的文档](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW6)以了解 NSTimer 的工作原理。

使用 NSThread 与 NSTimer 一起工作：

```
func configurateTimerInBackgroundThread(){
    let thread = Thread.init(target: self, selector: #selector(addTimerInBackground), object: nil)
    thread.name = "BackgroundThreadWithTimer"
    thread.start()
}

@objc func addTimerInBackground() {
    self.weakTimer = Timer.scheduledTimer(timeInterval: 1, target: self, selector: #selector(runTimer), userInfo: nil, repeats: true)
    RunLoop.current.run(mode: .defaultRunLoopMode, before: Date.distantFuture)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-12T14:53:50.263

这是个**坏主意**。我正要删除这个答案，但我把它留在这里是为了避免其他人犯同样的错误。感谢#Kevin_Ballard 指出这一点。

您只需在示例中添加一行，它就会像您编写的那样工作：

`[[NSRunLoop currentRunLoop] run]`

所以你会得到：

```
 -(void)viewDidLoad{
        [super viewDidLoad];

        myQueue = dispatch_queue_create("someDescription", NULL);
        dispatch_async(myQueue, ^{
            [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(runTimer) userInfo:nil repeats:YES];
            [[NSRunLoop currentRunLoop] run]
        });
    } 
```

由于您的队列`myQueue`包含一个 NSThread 并且它包含一个 NSRunLoop 并且由于其中的代码在该`dispatch_async`NSThread 的上下文中运行，因此`currentRunLoop`将返回与您的队列线程相关联的停止运行循环。

# java - Java：在循环中实例化变量：好还是坏的风格？

> ID：10522931
> 
> 赞同：12
> 
> 时间：2012-05-09T19:36:36.993
> 
> 标签：java, object, memory, coding-style

我有一个简单的问题。通常我写这样的代码：

```
String myString = "hello";

for (int i=0, i<10; i++)
{
  myString = "hello again";
} 
```

因为我认为以下样式不是很好的样式，因为它会创建太多不必要的对象。

```
for (int i=0, i<10; i++)
{
  String myString = "hello again";
} 
```

这甚至正确吗？或者这只是当我从我创建的类中获得一个明确的对象（如对象）时的情况？如果它是一个布尔值或整数呢？什么是更好的编码风格？在循环之前实例化一次并在循环中使用它还是每次在循环中再次实例化它？为什么？因为程序更快或使用更少的存储空间或......？

有人告诉我，如果它是一个布尔值，我应该直接在循环中实例化它。他说这不会对堆产生影响，而且变量属于循环内部会更清楚。那么什么是正确的呢？

感谢您的回答！:-)

====

感谢您的所有回答！

总之：最好在尽可能小的范围内声明一个对象。通过在循环外声明和实例化对象并没有提高性能，即使在每个循环中都重新实例化了对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T19:38:27.930

不，后面的代码实际上是无效的。不过，它会带有大括号：

```
for (int i=0; i<10; i++)
{
    String myString = "hello again";
} 
```

（基本上，您不能将变量声明用作`if`语句、循环等的单语句体。）

这将毫无意义，但有效 - 并且比第一个版本 IMO*更可取。*它不需要更多的内存，但通常最好为局部变量提供尽可能窄的范围，尽可能晚地声明，理想情况下在同一点初始化。它使每个变量的使用位置更加清晰。

当然，如果您需要在循环外（之前或之后）引用变量，那么您也需要在循环外声明它。

考虑效率时，需要区分*变量*和*对象。*上面的代码最多使用*一个*对象——字面“hello again”所指的 String 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T20:04:18.200

正如 Binyamin Sharet 所提到的，您通常希望在尽可能小的范围内声明一个变量。在您的具体示例中，第二个通常更可取，除非您需要访问循环外的变量。

但是，在某些情况下，这可能会对性能产生影响——即，如果您一遍又一遍地实例化同一个对象。在您的特定示例中，您受益于 Java 的字符串文字自动池。但是假设您实际上在循环的每次迭代中都创建了同一对象的新实例，并且该循环被执行了数百或数千次：

```
for (int i=0, i<1000; i++)
{
  String myString = new String("hello again"); // 1000 Strings are created--one on every iteration
  ...
} 
```

如果您的循环循环了数百或数千次，但碰巧您一遍又一遍地实例化同一个对象，那么在循环内实例化它会导致大量不必要的垃圾收集，因为您创建并抛出在每次迭代中删除一个新对象。在这种情况下，最好在循环之外声明和实例化变量：

```
String myString = new String("hello again"); // only one String is created

for (int i=0, i<1000; i++)
{
  ...
} 
```

而且，为了完整的循环，您可以通过在相关代码部分周围添加额外的大括号来手动限制范围：

```
{ // Limit the scope
  String myString = new String("hello again");

  for (int i=0, i<1000; i++)
  {
    ...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:51:55.973

第二个问题是您创建对象并且有人（GC）必须清理它们，当然对于 10 次迭代来说这并不重要。

顺便说一句，在你的具体例子中，我会写

```
 String myString = null; 
    final String HELLO_AGAIN="hello again";
    for (int i=0; i<10; i++)
      myString = HELLO_AGAIN; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T19:37:58.603

似乎您的意思是`declare`，不是`instantiate`，一般来说，您应该在所需的最小范围内声明一个变量（在这种情况下 - 在循环中）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T19:39:39.643

如果要在 for 循环之外使用变量，则将其声明在外面，否则最好将范围保持在最小

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T19:38:16.107

除非值被改变，否则你绝对应该在循环之外实例化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T18:06:31.207

这里的问题是 String 是一个不可变对象：您不能更改字符串的值，只能创建新的 String 对象。无论哪种方式，如果您的目标是为变量分配一个新的对象实例，那么限制您的范围并在循环体中声明它。

如果您的对象是可变的，那么在循环的每次下一次迭代中重用该对象是合理的，并且只需更改您需要的那些属性。此概念用于多次运行相同的查询，但使用不同的参数，您使用 PreparedStatement。

在极端情况下，您甚至可以维护可以在整个应用程序中共享的对象池。当您耗尽资源时，您会创建额外的对象，如果您检测到合理数量的未使用，您会缩小。这个概念用于维护一个连接池。

# mysql - 从 MySQL 数据中删除奇怪的字符

> ID：10522932
> 
> 赞同：5
> 
> 时间：2012-05-09T19:36:42.257
> 
> 标签：mysql

一路走来，在我所做的所有导入和导出之间，我运行的博客上的很多文本都充满了奇怪的重音 A 字符。

当我使用 mysqldump 导出数据并将其加载到文本编辑器中以使用搜索和替换清除坏字符时，搜索只匹配每个“a”字符。

有谁知道我可以直接在 MySQL 中或通过使用 mysqldump 然后重新导入内容来成功追捕这些字符并摆脱它们？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T19:45:48.533

这是一个编码问题；这`Â`是 Unicode 中的不间断空格（HTML 实体`&nbsp;`），以 Latin1 显示。

你可以尝试这样的事情......首先我们检查以确保匹配工作：

```
SELECT * FROM some_table WHERE some_field LIKE BINARY '%Â%' 
```

`some_table`这应该返回`some_field`具有错误字符的任何行。假设它工作正常并且你找到了你正在寻找的行，试试这个：

```
UPDATE some_table SET some_field = REPLACE( some_field, BINARY 'Â', '' ) 
```

这应该删除这些字符（根据您链接的页面，您并不真的想要一个 nbsp，因为您最终会在句子之间连续三个空格等，您应该只有一个）。

如果它不起作用，那么您需要查看正在使用的编码和排序规则。

编辑：刚刚添加`BINARY`到字符串中；无论编码如何，这都有望使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T03:25:00.827

接受的答案对我不起作用。

从这里[http://nicj.net/mysql-converting-an-incorrect-latin1-column-to-utf8/](http://nicj.net/mysql-converting-an-incorrect-latin1-column-to-utf8/) 我发现 Â 字符的二进制代码是 c2a0 （通过将列转换为 VARBINARY 并查看它变成了什么到）。然后在这里[http://www.oneminuteinfo.com/2013/11/mysql-replace-non-ascii-characters.html](http://www.oneminuteinfo.com/2013/11/mysql-replace-non-ascii-characters.html)找到了删除（替换）它的实际解决方案：

```
update entry set english_translation = unhex(replace(hex(english_translation),'C2A0','20')) where entry_id = 4008; 
```

上面的查询将其替换为空格，然后可以应用普通修剪或简单地替换为 ''。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T20:17:27.697

我遇到过这个问题，很烦人，但可以解决。此外，您可能会发现您的数据中显示了大量字符，如下所示：“这与数据库中的编码更改有关，但只要您的数据库中没有这些字符中的任何一个您想要保留的（例如，如果您实际上使用的是欧元符号），那么您可以按照前面的建议使用一些 MySQL 命令将它们删除。

就我而言，我继承的 Wordpress 数据库遇到了这个问题，我在这里找到了一组有用的适用于 Wordpress 的预先形成的查询[http://digwp.com/2011/07/clean-up-weird-数据库中的字符/](http://digwp.com/2011/07/clean-up-weird-characters-in-database/)

还值得注意的是，首先导致问题的原因之一是在文本编辑器中打开数据库，这可能会以某种方式更改编码。因此，如果您可以仅使用 MySQL 而不是文本编辑器来操作数据库，这将降低引发进一步麻烦的风险。

# mysql - 如何在 MySQL 中找到当前用户连接的 IP 地址？

> ID：10522933
> 
> 赞同：4
> 
> 时间：2012-05-09T19:36:44.907
> 
> 标签：mysql, sql, ip, ip-address

在您回答“使用 current_user()”（这在许多情况下确实有效）或“使用 user()”（实际上不起作用）之前，请阅读以下内容...

我正在尝试在表上创建一个视图，该视图限制用户对表中某些行的访问，由用户连接的 IP 地址控制。

我的第一次尝试是这样的：

```
create table testtable (
  `RowID` bigint not null auto_increment,
  `owner` varchar(64),
  `key` varchar(64),
  `val` varchar(64),
  primary key (`RowID`)
);
create view testview (
  `RowID`,
  `owner`,
  `key`,
  `val`
) as select
  `testtable`.`RowID` as `RowID`,
  `testtable`.`owner` as `owner`,
  `testtable`.`key` as `key`,
  `testtable`.`val` as `val`
from testtable
where (testtable.owner = substring_index(current_user(), '@', -1));

create user 'testuser'@'192.168.3.30' identified by 'testpass';
grant select, insert, update, delete on testview to 'testuser'@'192.168.3.30'; 
```

现在的理论是，我应该能够从主机 192.168.3.30 以 testuser 身份登录并执行类似的操作`select * from testview`并获得适用于我的 testtable 的正确子集。

以上不起作用。它不起作用的原因是默认情况下`current_user()`返回视图的*定义*器，导致没有数据，或者（更糟）错误的数据，这取决于定义器是谁。如果我想`current_user()`返回*调用*用户，我需要创建一个带有`SQL SECURITY INVOKER`子句的视图，这也限制了调用用户的安全权限，从而违背了代码的初衷。

我很想使用`user()`，但不幸的是，它几乎总是返回主机名/域而不是 IP 地址。

旁注，以防不清楚：在这种情况下，在 PHP（或 Ruby、perl 或其他任何东西）中获取 IP 地址是没有用的。我正在设置一些数据库安全性，因此依赖客户端显然是不够的。我需要 SQL 中的 IP 地址。

对于寻找想法/参考/背景的好奇：

[作为参考，我从这里](http://www.sqlmaestro.com/resources/all/row_level_security_mysql/)得到了这个漂亮的安全技巧的想法，但他们使用的是用户名而不是 IP 地址，这会使这更容易。就我而言，我正在尝试建立一个主机数据库，该数据库是从主机本身部分更新的。我不想为每台主机设置不同的用户，但我确实希望每台主机能够更新自己的记录（文件系统、风扇速度、温度等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:43:30.110

如果您可以控制该`mysqld`过程，则可以使用[`--skip-name-resolve`](http://dev.mysql.com/doc/en/server-options.html#option_mysqld_skip-name-resolve)选项启动它；然后`SUBSTRING_INDEX(USER(), '@', -1)`会给你当前用户的IP地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:30:14.270

我讨厌留下一个没有答案的问题...

如果不全局修改 mysqld 的行为（通过完全禁用名称解析），似乎没有办法做到这一点，这显然会在其他领域产生影响。

幸运的是，另一种选择是创建一个“存根”程序，通过 SSH 访问，该程序接受来自客户端的数据，检查 IP 地址，并将（可能已修改的）数据传递到数据库。当然，这使用 SSH 验证而不是数据库帐户，并引入了另一层复杂性。它还要求您对可以充当中间人的服务器具有外壳级别的访问权限。从好的方面来说，如果存根实施得当，它确实可以提供更好的安全性（线路加密和高级身份验证）。

# xcode - Xcode 4.3.2 和 100% CPU 不断在空闲时间

> ID：10522936
> 
> 赞同：11
> 
> 时间：2012-05-09T19:36:53.620
> 
> 标签：xcode, performance, cpu, xcode4.3

我的 Xcode 从昨天开始在处理中等大小的项目（大约 200 个源文件）时表现得非常严重。项目正确编译并在模拟器和设备中运行。我不使用任何 3rd 方库，除了少数广泛使用的包含（如 JSON 或 facebook ios sdk）。

即使处于空闲状态（无索引、无编译、无编辑），它也会持续全速使用 CPU。RAM的使用量比较正常（300-50MB）。

我的机器使用：Core 2 Duo 3.04Ghz CPU、8GB RAM 和 Vertex OCZ 3 SSD 驱动器。

我已经尝试了在 stackoverflow 找到的每个建议的解决方案：

1.  清洁项目
2.  在管理器中清理派生数据
3.  在管理器中清理存储库
4.  按照此处的建议从工作区和 userdata 文件中清理 xcodeproject 包：[https](https://stackoverflow.com/a/8165886/229229) ://stackoverflow.com/a/8165886/229229 （它只是暂时提供帮助，大约一分钟后重新开始）。
5.  多次重启Xcode（效果和4一样）。
6.  禁用“实时问题”
7.  甚至重新安装Xcode

没有什么帮助。在大多数情况下，Xcode 会暂时索引项目，然后恢复正常性能，但过一会儿又变得无法使用。两个核心的 CPU 都跳回 95-100%，智能挂起等……

我附上了仪器如何看到 Xcode 进程的屏幕截图：

![在此处输入图像描述](../Images/b0646179e36dd012117ac0063a675921.png) ![在此处输入图像描述](../Images/3efeea0d332c8dbf3103a6ea32dd1004.png) ![在此处输入图像描述](../Images/3d97a5fb5d1033355e4a486fa5e80514.png) ![在此处输入图像描述](../Images/2decdbcee65cd83088555104d532ab59.png) ![在此处输入图像描述](../Images/57564ed6d8d9238e063ccf450cf77cae.png)

**更新：** 经过片刻的希望，我通过四处走动解决了这个问题

`#import "header.h"`

从头文件到实现文件的语句并用前向声明交换它们......一段时间后问题又回来了。我正在添加控制台日志。奇怪的是，与 Xcode 相关的日志是在我退出后出现的，而不是在运行 itef 期间。

控制台日志：

```
5/11/12 9:27:03.777 AM [0x0-0x45045].com.apple.dt.Xcode: com.apple.dt.instruments.backgroundinstruments: Already loaded
5/11/12 9:27:05.571 AM Xcode: Performance: Please update this scripting addition to supply a value for ThreadSafe for each event handler: "/Library/ScriptingAdditions/SIMBL.osax"
5/11/12 9:27:58.168 AM Xcode: ERROR: Failed to create an alert for ID "enabled" based on defaults: 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:15:02.153

阻止我噩梦的是：

1.  在项目构建设置（粗体）中将始终搜索用户路径更改为 NO。
2.  删除 -objC 标志 其他链接器标志（也是粗体设置）。

然后删除 Derived Data 并等待 Xcode 重新索引。

我不确定它们中的哪一个有帮助，因为我同时更改了它们，而且我的进度太落后了，我没有时间测试它。当我在业余时间重现错误和解决方案时，我会改进这个答案。

**但是，有一个提示：** ****重新考虑并重新检查您的项目/目标构建设置。****

这种奇怪的行为很可能是由一些不幸的构建设置组合引起的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T13:09:45.433

我所有的项目都不时这样做。我可以关闭 X-code 并重新启动它，它会运行一段时间，然后回到使用 200% 的 CPU 时间（两个核心完全加载）。

我的解决方案是使用 AppCode 作为我的主要 IDE（具有更好的 IDE 的额外好处，但这是另一回事）。我只在需要编辑情节提要时启动 XCode，并在完成后将其关闭——通常这样可以避免问题。

AppCode 运行相同的项目文件/结构具有更好更快的索引，并且永远不会遇到这个问题，所以我看不出这怎么可能是一个设置/配置问题 - 它一定是 XCode 中的一个错误。因此，我不会浪费时间更改您的代码结构，因为它很可能只会延迟问题，而不是修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T13:18:19.933

无法知道 OP 是否真的有不同的根本原因，但对我来说，这似乎是 git 的 Xcode 故障。 **添加/提交我当前的更改解决了我的问题**。这是完整的场景以及我为修复它所做的工作：

*   环境：
    *   Xcode 版本 5.1.1 (5B1008)
    *   Macbook Pro OS X 10.9.2
    *   2 GHz 英特尔酷睿 i7，8GB 内存
*   我注意到 Xcode 开始不断地占用我**200** % 的 CPU。
*   不确定它是什么时候开始的，但是 Xcode 确实在尝试制作快照时冻结了（400% CPU 使用了几分钟，直到我强制退出 Xcode）
*   重新打开后，我注意到 Xcode 仍然无限期地停留在**200** % 的 CPU 使用率。
*   关闭所有项目不起作用。
*   删除所有派生数据并重新启动不起作用。
*   卸载 Xcode 并重新安装起初是有希望的，但是一旦我重新打开我的主项目，CPU 就会恢复到恒定的**200** % CPU 使用率。（索引完成后）
*   关闭陷入困境的项目并没有帮助。Xcode 现在再次陷入了永远杀死 200% 的 CPU 领域。

在查看 Stack Overflow 之后，很多人都提到 git 是个问题。

*   我有一个稍微复杂的 git repo（在主 Xcode 项目中有一个子模块 repo 和一个子项目）。
*   我在 repo 的主 repo 和 submodule 部分都有待处理的更改。
*   我关闭了 Xcode 并 git 添加并提交了我当前的所有更改。
*   重新打开 Xcode 和**VIOLA！**没有更多的 CPU 被杀死。回到**0.0** % 的空闲使用率。

Xcode 5.1.x 对我来说似乎也以其他方式与 git 作斗争（有时不接受 GUI 中的更改等），所以可能存在 Xcode git 集成错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T08:04:18.380

看起来它正在花时间解析 PCH 中包含的 ObjC。

*   clang 必须生成多少个 PCH？在您的项目中，对于您项目中使用的每种方言/语言和任何相关目标，这将是一个用于 C，一个用于 ObjC，一个用于 C++，一个用于 ObjC++。也就是说 - 如果您的应用程序的 PCH 中包含一个依赖库并且您正在破解该库，那么每次您更改 pch 包含的标头时，应用程序目标中的所有代码意义都必须失效并再次解析。如果你的目标编译一个 C 文件，它需要一个用于 C 的 PCH。如果它需要一个用于 ObjC，它需要为 ObjC 生成一个。
*   您多久更改一次 PCH（或其中包含的任何内容）？
*   从 PCH 中删除包含。看到 PCH 中包含的每个链接框架并不罕见（避免这样做！）。
*   如果您更改构建或预处理器设置，则可能需要每次都*完全重建目标的代码感知索引。*
*   您是否尝试过禁用实时问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T08:38:09.110

在我的项目（所有项目）中，它是自动完成/智能感知。当我更改 .h 文件中的一行代码时，它变得乱七八糟，CPU 使用率增加了 100%（超过一个内核）。我刚刚禁用了它，现在我必须为自己考虑更多（就像我以前在 Windows 上做的那样），它在 CPU 使用率低的情况下效果很好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-22T08:58:16.567

以前也遇到过这个问题，是git引起的.

# c# - winform 到 GTK# for Mono

> ID：10522938
> 
> 赞同：1
> 
> 时间：2012-05-09T19:37:00.973
> 
> 标签：c#, .net, winforms, mono, gtk

我创建了一个包含 50 个表单的 C# 应用程序。

不幸的是，Mono（Mac OS 版本）不适用于标准窗口 winform。

我不知道为什么，但我现在需要解决这个问题。

唯一的解决方案似乎将 winform 转换为 GTK#，但我对 GTK# 没有任何经验。

我的问题是：

*   将我的 50 个表格转换为 GTK# 有多难？
*   我需要做什么？

这是一个简单的解决方案？或者我需要重新编写我的应用程序？

除此之外，我不知道在哪里可以找到/使用 Visual IDE 来进行像 Visual Studio IDE 这样的设计修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:43:16.823

GTK 是一个很好的框架，在 windows 和 linux 上，GTK# 都非常容易手工编写或使用**[monodevelop进行](http://monodevelop.com/)****[设计](http://monodevelop.com/Stetic_GUI_Designer)**。因此，如果您好奇，值得一试，GTK# 应用程序通常**[更容易找到帮助](http://www.mono-project.com/GtkSharpBeginnersGuide)**（GTK+ 文档很有帮助）

GTK# 最好的地方是自动布局，不再像 winforms 那样疯狂的面板放置或绝对定位。

我很好奇为什么你的 winforms 应用程序不工作，Mono 的 winforms 支持非常好，非常接近完全匹配.Net。你有什么错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:36:19.387

我在 Mono 使用 Winforms 时遇到的问题是，在文件“xyz.designer.cs”中通常有一个代码：

```
((System.ComponentModel.ISupportInitialize)(xyz)).BeginInit(); 
```

和

```
((System.ComponentModel.ISupportInitialize)(xyz)).EndInit(); 
```

看起来 Mono 不接受此代码。我的印象是，这段代码可以从大多数 Windows 窗体中删除。但我不太确定。确保“xyz.designer.cs”文件不能在 Visual Studio 下修改，因为此代码是由 GUI 设计器自动创建的。但是您可以在 Monodevelop 下修改这些文件。看起来您需要手动更新 50 个文件。

# gmail - google-drive-sdk 向内部资源发送邮件时将 Gmail 附件推送到 GDrive

> ID：10522948
> 
> 赞同：0
> 
> 时间：2012-05-09T19:37:41.520
> 
> 标签：gmail, google-drive-api

向同一域中的用户发送文件附件时，自动将文件附件推送到 GDrive 会很好。然后改为发送 GDrive 链接 url。希望这对发件人是透明的认为我们可以用现有的 get 和 insert api 处理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:15:56.103

是的，使用 Drive API 可能是可能的，尽管我更有可能使用支持 GMail 和 Google Drive 的 Google Apps Script 来实现这一点。

# java - 将 Element 对象转换为 Int？

> ID：10522951
> 
> 赞同：1
> 
> 时间：2012-05-09T19:37:51.250
> 
> 标签：java, xml, dom

我在我的代码中遇到了一个阶段，当我知道`Element`对象包含一个. 但我似乎找不到将其转换为. 这是代码：`int``Element``int``int`

```
 // extract data from XML file 
       NodeList roundNumber = element.getElementsByTagName("roundNumber");
       Element line = (Element) roundNumber.item(0);

       // now convert "line" into an int 
```

如何将 转换`line` `Element`为`int`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:45:49.957

```
int number = Integer.parseInt(line.getTextContent()); 
```

确保`line.getTextContext()`总是返回一个整数，否则`NumberFormatException`会抛出 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:50:31.120

如果您知道属性的名称，您可以执行以下操作：

```
Integer.valueOf(line.getAttribute("<attribute name>")); 
```

# c - K&R 1.5.4 C 中的字数统计

> ID：10522955
> 
> 赞同：1
> 
> 时间：2012-05-09T19:37:59.337
> 
> 标签：c, if-statement, word-count

我是一名初出茅庐的 C 程序员，我编写了这个程序来计算第 2 版 K&R 1.5.4 的字数。我的 if 语句有问题吗？该代码似乎在不应该增加变量时增加了变量，因为它不符合初始测试。

```
#include <stdio.h>
#define IN 1
#define OUT 0

main()
{
      int word, state, c;

      word = state = OUT;

      while((c = getchar()) != EOF)
      {
               if(c != ' ' || c != '\n' || c != '\t')
               {
                    if(state == OUT)
                    {
                             word++;
                             state = IN;
                    }

                    /*else
                    {
                         state = IN;
                    }*/
               }

               if(c == ' ' || c == '\n' || c == '\t')
               {
                   state = OUT;
               }

               printf("char: %c %x | state: %d | word: %d\n", c, c, state, word); 
      }

      printf("\n//maniac: %d\n", word); 
```

这导致：

```
>count_word_my.exe
Hello  he   he
char: H 48 | state: 1 | word: 1
char: e 65 | state: 1 | word: 1
char: l 6c | state: 1 | word: 1
char: l 6c | state: 1 | word: 1
char: o 6f | state: 1 | word: 1
char:   20 | state: 0 | word: 1
char:   20 | state: 0 | word: 2
char: h 68 | state: 1 | word: 3
char: e 65 | state: 1 | word: 3
char:   20 | state: 0 | word: 3
char:   20 | state: 0 | word: 4
char:   20 | state: 0 | word: 5
char: h 68 | state: 1 | word: 6
char: e 65 | state: 1 | word: 6
char:
 a | state: 0 | word: 6

char:
 a | state: 0 | word: 7

//maniac: 7 
```

我修改的K&R代码：

```
#include <stdio.h>

#define IN 1 /* inside a word */
#define OUT 0 /* outside a word */

/* count lines, words, and characters in input */
main()
{
      int c, nl, nw, nc, state;

      state = OUT;
      nl = nw = nc = 0;
      while ((c = getchar()) != EOF) {
            ++nc;
            if (c == '\n')
               ++nl;
            if (c == ' ' || c == '\n' || c == '\t')
               state = OUT;
            else if (state == OUT) {
                 state = IN;
                 ++nw;
            }
            printf("char: %c %x | state: %d | word: %d\n", c, c, state, nw);
      }
      printf("%d %d %d\n", nl, nw, nc);
} 
```

K&R 代码导致：

```
>count_word_test.exe
Hello  he   he
char: H 48 | state: 1 | word: 1
char: e 65 | state: 1 | word: 1
char: l 6c | state: 1 | word: 1
char: l 6c | state: 1 | word: 1
char: o 6f | state: 1 | word: 1
char:   20 | state: 0 | word: 1
char:   20 | state: 0 | word: 1
char: h 68 | state: 1 | word: 2
char: e 65 | state: 1 | word: 2
char:   20 | state: 0 | word: 2
char:   20 | state: 0 | word: 2
char:   20 | state: 0 | word: 2
char: h 68 | state: 1 | word: 3
char: e 65 | state: 1 | word: 3
char:
 a | state: 0 | word: 3

char:
 a | state: 0 | word: 3
2 3 16
^C 
```

当我的代码不满足第一个 if 语句中的测试时，它如何在处理“Hello”之后的第二个空格 (0x20) 时增加 word/nw？即使它确实到达了第二个 if 语句，我也会假设它将“状态”变量设置为 1(IN)。我在这里遗漏了一些重要的东西。我非常感谢提供的任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T19:40:47.027

好吧，每个`char`人都会认为这是真的`if(c != ' ' || c != '\n' || c != '\t')`，因为没有 char 既是`' '`,`'\n'`又是`'\t'`.

应该是：

```
if(c != ' ' && c != '\n' && c != '\t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:56:25.843

你已经（至少）得到了一个好的答案（我赞成）。但请让我详细说明“以防万一”：

`if(c == ' ' || c == '\n' || c == '\t') ...` 您清楚地了解这一点：如果“空格”或“换行符”或“制表符”，那么“空格 == true”。

...但是... `if (c != ' ' || c != '\n' || c != '\t') ...`说“如果不是空格...或者不是换行符..或者不是制表符”

换句话说， '\n' 将评估为 "whitespace == false" ...因为 '\n' 不是空白，也不是制表符。

你真正的意思是`if (c &= ' ' && c != '\n' && c != '\t') ...` ......或`if (!(c == ' ' || c == '\n' || c == '\t')) ...`

换句话说，问题在于“C 语法”而不是“布尔逻辑”。

这是两个“重理论”的简短教程……但您可能会喜欢：

*   [http://www.malinc.se/math/octave/logicen.php](http://www.malinc.se/math/octave/logicen.php)

*   [http://www.youtube.com/watch?v=gj8QmRQtVao](http://www.youtube.com/watch?v=gj8QmRQtVao)

# java - 对象池的堆栈或链表？

> ID：10522956
> 
> 赞同：4
> 
> 时间：2012-05-09T19:38:00.540
> 
> 标签：java, multithreading, object-pooling

我确信对此的正确答案取决于池对象的类型和工作负载，所以我将详细介绍一下我的实现：

我有一个 ObjectPool 用于汇集长时间运行的命令行进程。这些进程通过标准输入/标准输出进行通信，并执行文件/网络操作。许多任务的完成速度比其他任务快得多，并且可能会很快将进程返回到池中。对池的所有访问都必须是线程安全的。

我的问题是，我是使用 LIFO/Stack 还是 FIFO/ConcurrentLinkedQueue 来管理池更好？我的两面推理：

*   堆栈保持“热”对象在运行，其中资源可能保持缓存/等。更长时间。
*   FIFO 在进程之间更均匀地平衡调用，每个进程做的工作更少。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:28:46.600

我的第一个想法是：**基准测试**！你的两个论点似乎都有道理。您应该实施这两种策略并进行测试，哪些会导致更高的吞吐量。

您在问题中描述的问题类似于操作系统必须面对的进程调度。因此，也许利用优先级会很有用。使用[PriorityQueue](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)并为您的任务分配不同的优先级，这些优先级可能随时间动态变化，例如使用[Aging](http://en.wikipedia.org/wiki/Aging_%28scheduling%29)。

最后但同样重要的是，正如评论中已经指出的那样，您可以同时尝试[ConcurrentLinkDeque](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html)并让一些获取前面的对象和一些后面的对象。在这里，我的建议也是尝试并衡量哪种平衡效果最好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:36:07.450

它可能不会产生性能差异。做任何最容易编码的事情，并使您的代码易于理解。当您处理执行文件和网络 I/O 的命令行进程时，这里的缓存未命中并不会产生影响……这些将占主导地位。

# objective-c - 以编程方式调用情节提要场景（无需转场）？

> ID：10522957
> 
> 赞同：44
> 
> 时间：2012-05-09T19:38:15.637
> 
> 标签：objective-c, ios, xcode, uistoryboard

我有一个模态故事板场景，我希望所有其他场景都可以访问它。从我的故事板上的每个场景中创建一个模态转场会导致到处乱七八糟的字符串。有没有办法让我离开转场并以编程方式调用场景？

基本上我想做这样的事情：

```
 MyNewViewController *myNewVC = [[MyNewViewController alloc] init];
  [self presentModalViewController:myNewVC animated:YES]; 
```

除了创建和推送视图控制器类之外，我想做一个模态转换到“隔离”（不与 segue 连接）情节提要场景。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-09T19:47:15.287

是的你可以。做这样的事情来访问 VC，然后只是 Modal Push 它：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
MyNewViewController *myVC = (MyNewViewController *)[storyboard instantiateViewControllerWithIdentifier:@"myViewCont"]; 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-13T18:08:03.930

注意：方法**presentModalViewController:animated**在 iOS 6 中已弃用。

新代码应为：

```
NSString * storyboardName = @"MainStoryboard_iPhone";
NSString * viewControllerID = @"ViewID";
UIStoryboard * storyboard = [UIStoryboard storyboardWithName:storyboardName bundle:nil];
MyViewController * controller = (MyViewController *)[storyboard instantiateViewControllerWithIdentifier:viewControllerID];
[self presentViewController:controller animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-05-09T19:45:21.890

在情节提要中为您的视图控制器提供一个标识符（在属性检查器下），然后使用以下代码将该视图向前推进。

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"STORYBOARDNAME" bundle:nil];
UIViewController *vc = [mainStoryboard instantiateViewControllerWithIdentifier:@"VIEWCONTROLLERIDENTIFIER"];
[self presentModalViewController:vc animated:YES]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-26T19:04:37.010

我有一个案例，我想从应用程序的主要部分展示一个视图控制器，一个带有设置和帮助等的视图控制器。为此，我希望它位于导航控制器中，有点像我们可以从 UIBarButtonItem 调用的小插件模块。

现在，这可以是/在当前故事板中，也可以是另一个，没关系。

我想这样做，因为我讨厌在我的故事板上充满连续线意大利面的潜力。

这是如何做到的。

```
- (IBAction)displaySettings:(id)sender
{
    LOG_SELECTOR() // google that for extra goodness

    // FYI, this can be done using a different storyboard like so.
    /*
     NSString * storyboardName = @"MainStoryboard_iPhone"; // possibly use device idiom?
     UIStoryboard * storyboard = [UIStoryboard storyboardWithName:storyboardName bundle:nil];
     */

    // To push a new set of scenes with a new Navigation Controller, it is done like this:
    UINavigationController *settingsNC = [self.storyboard instantiateViewControllerWithIdentifier:@"Settings Nav Controller"];
    OBSettingsUIViewController *settingsVC = [self.storyboard instantiateViewControllerWithIdentifier:@"Settings root"];
    [settingsNC pushViewController:settingsVC animated:NO];

    [settingsNC setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

    // Present the view controller;
    [self presentViewController:settingsNC animated:YES completion:NULL];
} 
```

在呈现的视图控制器（或导航控制器的子类）中，您可以有一个 UIBarButtonItem 来关闭视图控制器的整个呈现层次结构，如下所示：

```
- (IBAction)dismissThisVC:(id)sender {
     [self dismissViewControllerAnimated:YES completion:nil];
} 
```

希望这可以帮助一群人。干杯。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-10T04:42:47.063

[![在此处输入图像描述](../Images/59c933e1c208b5f82ca0821471ec9454.png)](https://i.stack.imgur.com/vKSqD.png)只需使用导航控制器调用 viewcontroller 在 vi​​ewcontroller 中编写此代码，并在情节提要中设置 viewcontroller，如图像中设置的那样。

```
ProfileVC *vc = [[UIStoryboard storyboardWithName:@"Main" bundle:nil] instantiateViewControllerWithIdentifier:@"ProfileVC"];
[self.navigationController pushViewController:vc animated:YES]; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-28T04:24:57.373

调用导航到其他类

```
UIWindow *window = [[[UIApplication sharedApplication] windows] objectAtIndex:0];
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle: nil];

UINavigationController *navController = (UINavigationController *)window.rootViewController;

DumpFeed *dump = [storyboard instantiateViewControllerWithIdentifier:@"DumpFeed"];

dump.isPushed=YES;

dump.strUserId = appDelegate.strFriendid;

[navController pushViewController:dump animated:YES]; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-03T08:28:40.370

这是一个 Swift 版本：

```
let storyboard = UIStoryboard(name: "Main", bundle: nil)
let myVC = storyboard.instantiateViewControllerWithIdentifier("myStoryId")
self.presentViewController(myVC, animated: true, completion: nil) 
```

您还应该像这样更改您的故事板ID： [![在此处输入图像描述](../Images/32b5d0228bd51f5961ac5c1d4510fedd.png)](https://i.stack.imgur.com/JnrAx.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-28T17:28:52.847

我认为使用 iOS7，通过故事板实现它变得非常容易

我目前正在学习 iOS7 中的新功能并找到了这个简单的解决方案，但即使在以前的版本中也可能相关，我不确定。

首先，您需要将呈现的 VC 与目标 VC 连接起来（这是唯一需要的连接），然后在情节提要的属性检查器中选择要模态的样式，在身份检查器中为您的 VC 提供一个情节提要并确保您选中了“使用” storyboardID'复选框，

如果它还没有这个方法添加到您的presentingVC：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

   YourTargetVC * targetVC = 
         (YourTargetVC *)segue.destinationViewController;

   if(nil != targetVC) {

       //Do preparations here
   }

} 
```

现在，当您希望从 presentingVC 中显示您的 targetVC 时，您可以使用：

```
[self performSegueWithIdentifier:(NSString *) sender:(id)]; 
```

其中标识符是您的 viewController 的 storyboardID，发送者是触发操作的视图，此方法将调用情节提要场景，因此将调用该`[prepareForSegue: sender:]`方法，允许您在 targetViewController 出现之前进行最后修改。

# ruby-on-rails - Rails ActiveRecord 如何关闭记录特定查询

> ID：10522961
> 
> 赞同：2
> 
> 时间：2012-05-09T19:38:25.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在 Rails 中处于开发者模式。
我正在尝试使用 AR 将带有二进制数据的记录插入数据库。

```
Edoc.create(
            :id_claim => @claim_index, 
            :id_material => @doc_code, 
            :size => @file_list.first[:size],
            :efile => params[:files][0].read
        ) 
```

但这需要很多时间，因为 Rails 会记录整个文件内容的查询。

如何关闭记录特定查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:58:04.913

尝试：

```
old_logger = ActiveRecord::Base.logger
ActiveRecord::Base.logger = nil
# your code here... 
```

恢复记录器：

```
ActiveRecord::Base.logger = old_logger; nil # nil just to suppress some garbage 
```

# android - 以编程方式创建的 ImageButtons 中定义的 putExtra 数据只看到最后一个值？

> ID：10522966
> 
> 赞同：0
> 
> 时间：2012-05-09T19:38:46.403
> 
> 标签：android, android-intent, imagebutton

我在 for 循环中以编程方式定义了一组图像按钮。对于每个按钮，我定义了它的 setOnClickListener 函数，它将一些数据放入 Intent 中，然后切换活动。但是，似乎无论我单击哪个按钮，检索到的额外数据都设置为 for 循环中的最后一个值。请参阅此处的代码：

```
public void onCreate(Bundle savedInstanceState) {
   <...>

        RelativeLayout rl = (RelativeLayout) findViewById(R.id.rlayout);

        for (int i=1; i<=maxMapLoc; i++ ) {
            mapLocation = i;
            ImageButton btnMapLoc = new ImageButton(FirstActivity.this);
            RelativeLayout.LayoutParams vp = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            btnMapLoc.setLayoutParams(vp);
            btnMapLoc.setBackgroundColor(Color.TRANSPARENT);
            btnMapLoc.requestLayout();
            String imgName = "map_loc_" + mapLocation;                
            int id = getResources().getIdentifier(imgName,"drawable",getPackageName());
            btnMapLoc.setImageResource(id);
            int imgMapLoc = 2000 + mapLocation;
            btnMapLoc.setId(imgMapLoc);
            rl.addView(btnMapLoc, vp);

            btnMapLoc.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
                    intent.putExtra("MapLocation", mapLocation);

                    startActivity(intent);

                }
            }); 
```

知道我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:45:06.507

您可以使用当前 mapLocation 值向按钮添加标签。

```
btnMapLoc.setTag(i);
...

// In onClick
    intent.putExtra("MapLocation", v.getTag());
    ... 
```

您只获得最后一个值的原因`mapLocation`是 onClick() 中的代码在用户按下按钮时运行。换句话说，您`mapLocation`在循环构建按钮之后很长时间才进行查询。您需要`mapLocation`在每次循环迭代中创建对当前的引用，就像使用标签功能一样。

# c# - 没有评估两次的条件运算符？

> ID：10522972
> 
> 赞同：3
> 
> 时间：2012-05-09T19:39:25.000
> 
> 标签：c#, conditional, conditional-operator

说我有以下内容：

```
MyDate = 
  (db.MyTables.FirstOrDefault(x => x.MyID == idToFind).DateValue == DateTime.MinValue) 
    ? DateTime.Now 
    : db.MyTables.FirstOrDefault(x => x.MyID == idToFind).DateValue 
```

有没有办法在不运行两次 LINQ 查询的情况下做到这一点？
我不能先将它运行到一个临时变量中，因为这个查询本身就是一个更大的 LINQ 查询的一部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T19:43:44.027

> 我不能先将它运行到一个临时变量中，因为这个查询本身就是一个更大的 LINQ 查询的一部分。

您可以在查询中使用`let`赋值（或者，如果您使用 lambda 语法，也可以使用包含辅助字段的投影 - 这就是它被编译成的内容）：

```
var query = from foo in db.Bar
            let bar = db.MyTables.FirstOrDefault(x => x.MyID == idToFind).DateValue
            select  new 
            {
               MyDate = bar == DateTime.MinValue ? DateTime.Now : bar
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:42:01.177

是的。

```
var dateValue = db.MyTables.FirstOrDefault(x => x.MyID == idToFind).DateValue;

return dateValue == DateTime.MinValue ? DateTime.Now : dateValue; 
```

现在，当您说该值不能填充到临时值中时，您是什么意思？上面的代码当然看起来能够转换为该模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:42:03.077

评估一次并分配给变量 - 在条件中使用变量：

```
var item = db.MyTables.FirstOrDefault(x => x.MyID == idToFind);

MyDate = (item.DateValue == DateTime.MinValue) 
    ? DateTime.Now 
    : item.DateValue 
```

或者：

```
var theDate = db.MyTables.FirstOrDefault(x => x.MyID == idToFind).DateValue;

MyDate = (theDate == DateTime.MinValue) 
    ? DateTime.Now 
    : theDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T19:42:28.620

您仍然可以使用临时变量，声明它但在该表达式中分配它。在某些情况下，大量代码可能会让人难以阅读，但至少可以减少重复。

```
MyDate = 
  (temp = db.MyTables.FirstOrDefault(x => x.MyID == idToFind).DateValue) == DateTime.MinValue) 
    ? DateTime.Now 
    : temp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T19:43:35.917

使用 LINQ 的`let`语句

```
from a in someSource
let d = db.MyTables.FirstOrDefault(x => x.MyID == a.idToFind).DateValue
select (d == DateTime.MinValue) ? DateTime.Now : d; 
```

# delphi - 启用 vcl 样式后如何使用本机进度条？

> ID：10522974
> 
> 赞同：3
> 
> 时间：2012-05-09T19:39:33.567
> 
> 标签：delphi, delphi-xe2, vcl-styles

我需要使用*pbstMarquee*风格的进度条，我阅读了这个[问题](https://stackoverflow.com/questions/9861136/is-vclstyle-bug-tprogressbar-style-pbstmarquee-does-not-work)并且接受的答案工作正常，但现在我需要绘制原生进度条

![在此处输入图像描述](../Images/aade6070d0f238e66b8ff45950c83598.png)

启用 vcl 样式后如何使用本机进度条？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T19:46:45.090

只需将默认的 vcl 样式挂钩分配给[`TStyleHook`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Themes.TStyleHook) 组件[`TProgressBar`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TProgressBar)，这样进度条就会以 Windows 的外观和感觉绘制。

```
 TStyleManager.Engine.RegisterStyleHook(TProgressBar, TStyleHook); 
```

![在此处输入图像描述](../Images/21cab707900de24bfdd795c39708c54b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-15T10:44:02.763

德尔福：`Form1.ProgressBar1.StyleElements := [seClient, seBorder, seFont];`

C++：`Form1->ProgressBar1->StyleElements = TStyleElements();`

# ios - tableView 以及如何正确使用“加载更多...”

> ID：10522987
> 
> 赞同：0
> 
> 时间：2012-05-09T19:40:27.590
> 
> 标签：ios, load, tableview

我有一个非常小而烦人的问题。（没有双关语）我似乎发现了我的错误。我也在聊天中问过，但我们找不到解决方案。我从 Abizerns github 获得了我的 tableView 的“加载更多...”并实现了它。它可以工作，除了部分，当它启动时我必须单击“加载更多...”。所以在开始时它不会向我显示 tableView 的第一个条目，直到我单击“加载更多...”。你可以看到我的烦恼。也许有人会发现我的错误，因此 tableView 实际上会在启动时加载前十个条目。

```
#define kNumberOfItemsToAdd 10
#define PADDING 10.0f

@interface Main ()

@end

@implementation Main
@synthesize tabelle;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    numberOfItemsToDisplay = kNumberOfItemsToAdd;
    return self;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (numberOfItemsToDisplay == [tabelle count]) {
        return 1;
    }
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0) {
        return numberOfItemsToDisplay;
    } else {
        return 1;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 6;
        cell.detailTextLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.detailTextLabel.numberOfLines = 1;
    }

    if (indexPath.section == 0) {            

    cell.textLabel.font = [UIFont fontWithName:@"Verdana" size:14.0];
    cell.detailTextLabel.font = [UIFont fontWithName:@"Verdana" size:12.0];

    NSString *TableText = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:indexPath.row] Name]];
    NSString *TableText2 = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:indexPath.row] m_m]];  

    NSString *cellValue = [NSString stringWithFormat:@"%@", TableText2];
    NSString *cellValue2 = [NSString stringWithFormat:@"by: %@", TableText];
    cell.textLabel.text = cellValue;
    cell.detailTextLabel.textColor = [UIColor colorWithRed:0.196f green:0.3098f blue:0.52f alpha:1.f];
    cell.detailTextLabel.text = cellValue2;
    } else {
        cell.textLabel.text = [NSString stringWithFormat:@"Next %d items", kNumberOfItemsToAdd];
        cell.textLabel.textAlignment = UITextAlignmentCenter;
        cell.textLabel.textColor = [UIColor colorWithRed:0.196f green:0.3098f blue:0.52f alpha:1.f];
        cell.textLabel.font = [UIFont boldSystemFontOfSize:14.f];
    }
    return cell;
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *text = [[self.tabelle objectAtIndex:indexPath.row] m_m];
    CGSize textSize = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(self.tableView.frame.size.width - PADDING * 3, 1000.0f)];

    return textSize.height + PADDING * 3;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 1) {
        NSUInteger i, totalNumberOfItems = [tabelle count];        
        NSUInteger newNumberOfItemsToDisplay = MIN(totalNumberOfItems, numberOfItemsToDisplay + kNumberOfItemsToAdd);
        NSMutableArray *indexPaths = [[NSMutableArray alloc] init];        

        for (i=numberOfItemsToDisplay; i<newNumberOfItemsToDisplay; i++) {
            [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
        }        

        numberOfItemsToDisplay = newNumberOfItemsToDisplay;                

        [tableView beginUpdates];
        [tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationTop];
        if (numberOfItemsToDisplay == totalNumberOfItems) {
            [tableView deleteSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationTop];
        }        
        [tableView endUpdates];
        // Scroll the cell to the top of the table
        if (newNumberOfItemsToDisplay < totalNumberOfItems) {
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 200000000), dispatch_get_main_queue(), ^(void){
                [tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
            });
            [tableView deselectRowAtIndexPath:indexPath animated:YES];
        } else {
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 200000000), dispatch_get_main_queue(), ^(void){
                [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:totalNumberOfItems-1 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
            });
        }

    }    

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:46:45.663

我没有使用“*加载更多...* ”实现，但也许您需要`[self.tabelle reloadData]`在您的`- (void)viewWillAppear:(BOOL)animated`方法中添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:15:12.170

单击“加载更多...”时会调用什么方法？加载表格视图时，您不能以编程方式调用该方法吗？

# sql - 如何按列分组

> ID：10522988
> 
> 赞同：3
> 
> 时间：2012-05-09T19:40:29.183
> 
> 标签：sql, oracle

嗨，我知道如何对 sql 使用 group by 子句。我不确定如何解释这一点，所以我会画一些图表。这是我的原始数据：

```
Name          Location
----------------------
user1         1
user1         9
user1         3
user2         1
user2         10
user3         97 
```

这是我需要的输出

```
Name          Location
----------------------
user1         1
              9
              3
user2         1
              10
user3         97 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:44:01.443

正常的方法是在**表示层**而不是数据库层处理它。

原因：

*   该`Name`字段是该数据行的属性
*   如果你离开`Name`了，你怎么知道`Location`哪个名字是什么？
*   您隐含地依赖数据的顺序，这在 SQL 中是一种非常糟糕的做法（因为返回的数据没有固有的顺序）
*   任何解决方案都需要涉及游标或循环，这不是 SQL 优化的对象 - 它喜欢在 SETS 中工作，而不是在单个行上工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:03:24.447

希望这可以帮助

```
 SELECT A.FINAL_NAME, A.LOCATION
  FROM (SELECT DISTINCT DECODE((LAG(YT.NAME, 1) OVER(ORDER BY YT.NAME)),
                               YT.NAME,
                               NULL,
                               YT.NAME) AS FINAL_NAME,
                        YT.NAME,
                        YT.LOCATION
          FROM YOUR_TABLE_7 YT) A 
```

正如 Jirka 正确指出的那样，我不必要地使用了外部选择、独特和原始的名称。我的错误是，当我使用 DISTINCT 时，我得到的结果排序如下

```
 1           1
2   user2   1
3   user3   97
4   user1   1
5           3
6           9
7          10 
```

我想避免这样的输出。

因此我添加了原始 id 和外部选择

但是，删除 DISTINCT 可以解决问题。因此只有这么多就足够了

```
 SELECT DECODE((LAG(YT.NAME, 1) OVER(ORDER BY YT.NAME)),
              YT.NAME,
              NULL,
              YT.NAME) AS FINAL_NAME,
       YT.LOCATION
  FROM SO_BUFFER_TABLE_7 YT 
```

谢谢吉尔卡

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T20:02:18.960

如果您使用直接的 SQL*Plus 来制作报告（别笑，您可以用它做一些非常酷的事情），您可以使用[BREAK 命令](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm#i1081534)执行此操作：

```
SQL> break on name
SQL> WITH q AS (
SELECT 'user1' NAME, 1 LOCATION FROM dual
UNION ALL
SELECT 'user1', 9 FROM dual
UNION ALL
SELECT 'user1', 3 FROM dual
UNION ALL
SELECT 'user2', 1 FROM dual
UNION ALL
SELECT 'user2', 10 FROM dual
UNION ALL
SELECT 'user3', 97 FROM dual
)
SELECT NAME,LOCATION
  FROM q
 ORDER BY name;

NAME    LOCATION
----- ----------
user1          1
               9
               3
user2          1
              10
user3         97

6 rows selected.

SQL> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T20:06:56.000

我不得不同意其他评论者的观点，即这种问题看起来不应该使用 SQL 来解决，但无论如何让我们面对它。

```
SELECT
    CASE main.name WHERE preceding_id IS NULL THEN main.name ELSE null END,
    main.location
FROM mytable main LEFT JOIN mytable preceding
    ON main.name = preceding.name AND MIN(preceding.id) < main.id
GROUP BY main.id, main.name, main.location, preceding.name
ORDER BY main.id 
```

GROUP BY 子句不负责分组作业，至少不直接负责。在第一个近似值中，同一个表的外连接（下面的左连接）可用于确定特定值第一次出现在哪一行。这就是我们所追求的。这假设有一些唯一`id`值可以任意排序所有记录。（ORDER BY 子句不这样做；它对输出进行排序，而不是对整个计算的输入进行排序，但仍然需要确保输出正确呈现，因为剩余的 SQL 并不暗示任何特定的处理顺序.)

如您所见，SQL 中仍有一个 GROUP BY 子句，但可能有意想不到的用途。它的工作是“撤消” LEFT JOIN 的副作用，即复制具有许多“先前”（=成功连接）记录的所有主记录。

这对于 GROUP BY 来说是很正常的。GROUP BY 子句的典型作用是减少记录数；并且无法查询或测试未在 GROUP BY 子句中列出的列，除非通过 COUNT、MIN、MAX 或 SUM 等聚合函数。这是因为由于 GROUP BY，这些列真正代表“值组”，而不仅仅是特定值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T20:56:10.353

如果您使用的是 SQL*Plus，请使用 BREAK 函数。在这种情况下，在 NAME 上中断。

如果您使用其他报告工具，您可以将“名称”字段与之前的记录进行比较，并在它们相等时禁止打印。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-16T05:09:11.020

如果您使用`GROUP BY`，则输出行将根据 GROUP BY 列进行排序，就好像您`ORDER BY`对相同的列有一个一样。**为了避免 GROUP BY 产生的排序开销，添加 ORDER BY NULL：**

```
SELECT a, COUNT(b) FROM test_table GROUP BY a ORDER BY NULL; 
```

在 MySQL 5.6 中依赖隐式 GROUP BY 排序已被弃用。要实现分组结果的特定排序顺序，最好使用显式 ORDER BY 子句。GROUP BY 排序是一个 MySQL 扩展，可能会在未来的版本中改变；例如，使优化器能够以它认为最有效的任何方式对分组进行排序并避免排序开销。

有关完整信息 - [http://academy.comingweek.com/sql-groupby-clause/](http://academy.comingweek.com/sql-groupby-clause/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-17T06:33:43.403

SQL GROUP BY 语句 SQL GROUP BY 子句与 SELECT 语句配合使用，将相同的数据排列成组。语法： 1\. SELECT column_nm, aggregate_function(column_nm) FROM table_nm WHERE column_nm operator value GROUP BY column_nm; 示例：要了解 GROUP BY 子句，请参考示例数据库。下表显示“订单”表中的字段： 1\. |EMPORD_ID|employee1ID|customerID|shippers_ID|

下表显示了“托运人”表中的字段： 1\. | 托运人_ID| 托运人_姓名 |

下表显示了“table_emp1”表中的字段： 1\. | 员工1ID| first1_nm | 最后1_nm |

示例：查找每个发货人发送的订单数量。1\. SELECT shipper.shippers_Name, COUNT (orders.EMPORD_ID) AS No_of_orders FROM orders LEFT JOIN shipper ON orders.shippers_ID = shipper.shippers_ID GROUP BY shippers_Name; 1\. | 托运人_姓名 | No_of_orders | 示例：在多个列上使用 GROUP BY 语句。1\. SELECT shipper.shippers_Name, table_emp1.last1_nm, COUNT (orders.EMPORD_ID) AS No_of_orders FROM ((orders INNER JOIN shipper ON orders.shippers_ID=shipper.shippers_ID) INNER JOIN table_emp1 ON orders.employee1ID = table_emp1.employee1ID) 2\. GROUP BY shippers_Name,last1_nm;

1.  | 托运人_姓名 | last1_nm |No_of_orders |

有关更多说明，请参阅我的链接 [http://academy.comingweek.com/sql-groupby-clause/](http://academy.comingweek.com/sql-groupby-clause/)

# drupal - 如何通过 Drupal 7 站点中的搜索 URL 或 solr 术语方面？

> ID：10522990
> 
> 赞同：1
> 
> 时间：2012-05-09T19:40:32.910
> 
> 标签：drupal, solr, drupal-7, faceted-search

我有一个运行 apachesolr 搜索并通过 facetapi 模块使用分面的 Drupal 7 网站。

当我使用构面来缩小搜索范围时，一切正常，我可以看到过滤器被添加到搜索 URL，因此我可以将它们作为链接（现成的缩小搜索）复制到网站的其他地方。

以下是我选择多个方面/过滤器后 apachesolr URL 的外观示例：

```
search_url/search_keyword?f[0]=im_field_tag_term1%3A1&f[1]=im_field_tag_term2%3A100 
```

' **search_keyword** ' 部分是我正在搜索的文本，' **%3A** ' 只是 url 编码的 ':'（冒号）。

了解这种格式后，我可以通过为 URL 创建正确格式来创建任意数量的现成搜索。完美的！

但是，这些过滤器始终是 AND 运算，与使用 facet 接口时的方式相同。有谁知道我是否可以使用某种语法（特别是在搜索 URL 中）来**OR**我的过滤器/构面？意思是，使其结果是包含两个过滤器中的任何一个的所有条目？

提前感谢您提供正确方向的任何帮助或指示！

新编辑：

我确实知道如何通过 URL 对同一词汇表中的术语进行 OR，我只是想知道如何对不同词汇表中的术语进行 OR。;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:36:35.313

您可以编写如下所示的过滤器查询：

```
fq=field1:value1 OR field2:value2 
```

或者，您可以使用 localparams 来指定查询运算符：

```
fq={!q.op=OR}field1:value1 field2:value2 
```

据我所知，没有更简单的方法可以做到这一点。事实上，有一个[相当古老的错误](https://issues.apache.org/jira/browse/SOLR-1223)要求提供参数的`OR`方法`fq`......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:42:19.607

I finally found a way to do this in Drupal

**Enable the fq parameter setting.**

*   Go to admin/config/search/apachesolr/[your_search_page]/core_search/edit or just navigate to the settings of the search page you're trying to modify

*   Check the 'Allow user input using the URL' setting

**URL Syntax**

*   Add the following at the end of the URL: ?fq=tid:(16 OR 38), where 16 and 38 are the term ids