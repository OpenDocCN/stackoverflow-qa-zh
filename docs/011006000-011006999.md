# StackOverflow 问答 11006000-11006999

# ruby-on-rails - Rails Sendmail 生产服务器配置问题

> ID：11006000
> 
> 赞同：0
> 
> 时间：2012-06-12T22:52:34.993
> 
> 标签：ruby-on-rails, configuration, sendmail, actionmailer

我正在尝试将 actionmailer 与 sendmail 一起使用，但我不知道为什么它不起作用。

这是我从 production.log 得到的错误

```
 Sent mail to hackerkiba@gmail.com (19ms)
    Completed 500 Internal Server Error in 152ms

    Errno::ECONNREFUSED (Connection refused - connect(2)):
    app/controllers/users_controller.rb:9:in `create' 
```

这是我的生产环境配置文件，其中包含相关详细信息：

```
 Srsreview::Application.configure do
      # ...
      config.action_mailer_delievery_method = :sendmail
      config.action_mailer.raise_delivery_errors = true
      config.action_mailer.sendmail_settings = {
      :location       => '/usr/sbin/sendmail',
      :arguments      => '-t -i'
      }
      config.action_mailer.default_url_options = {host: "srsdecks.com"}
      # ...
    end 
```

我还验证了 /usr/sbin/sendmail 存在。

# php - 与不需要 VM 的已编译程序一起使用时，CGI 是否仍然很慢？

> ID：11006004
> 
> 赞同：2
> 
> 时间：2012-06-12T22:53:39.140
> 
> 标签：php, web-services, perl, cgi

当我学习 CGI 时，我了解到任何编程语言都可以用来将它的输出挂钩到 http 响应消息，它的输入是 http 请求消息。很多文章我都在 Perl 的上下文中讨论了 CGI，这是因为 Perl 是与 CGI 结合使用的最常用的语言吗？

我想知道的是，如果 CGI 连接到用 C/C++ 编写的程序，它仍然会比使用 PHP 慢吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T22:57:48.817

CGI 是表示应用程序应如何交互的标准，而不是特定程序本身。
CGI 通常太慢的原因是因为它需要为请求启动一个进程并在该请求结束时关闭。

FastCGI 与 CGI 的不同之处在于它允许一个进程服务多个请求（它维护一个请求处理器池）。这样可以避免大多数传入请求的冗长进程启动/关闭。

有关 CGI 及其“继承者”的更多信息，请查看[http://en.wikipedia.org/wiki/Common_Gateway_Interface#Drawbacks](http://en.wikipedia.org/wiki/Common_Gateway_Interface#Drawbacks)

考虑到这一点，性能特征不仅取决于语言及其实现，还取决于用于处理请求的接口。

对于许多简单的请求，进程启动时间可能会远远超过处理时间，这使得语言 X 与 Y 的论点没有实际意义。

# r - caret 包：是否可以实现我自己的引导方法？

> ID：11006007
> 
> 赞同：4
> 
> 时间：2012-06-12T22:53:51.810
> 
> 标签：r

我正在为 R 使用[caret](http://cran.r-project.org/web/packages/caret/caret.pdf)包来为我的模型选择变量。使用**rfe**命令时，应传递 rfeControl 对象，该对象具有**方法**参数。此参数的选项有 boot、cv、LOOCV 和 LGOCV。由于我正在处理时间序列数据，因此我需要使用特殊的引导/交叉验证技术，因为普通技术不适用于时间序列数据（否则分布会损坏等）。

我的问题是如何插入我自己的引导实现但仍使用插入符号**rfe**方法，该方法具有我需要的所有其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:56:13.417

没有简单的方法。如果您研究代码，`rfe.default()`您会注意到在使用`method = "boot"`该`createResample()`函数的情况下。这是生成引导样本的函数。类似的函数用于其他 CV 方法。

有一条艰难的路；超越`create*()`最合适的功能；说你想做一个block bootstrap或者ME bootstrap，接管`createResample()`功能并使用`method = "boot"`，或者如果你想要一个特殊形式的CV，使用`method = "cv"`并接管`createFolds()`。

您将需要编写自己的`create*()`函数并将插入符号 NAMESPACE 中的函数替换为您的版本。不容易，但非常可行。假设您编写自己的`createResample()`函数；首先，您需要注意，此函数会创建*n* = `times`bootstrap 样本，并将其返回到一个矩阵中，该矩阵的`times`列数和行数与您的样本数一样多。您需要编写一个自定义`createResample()`函数，该函数返回相同的对象，但执行您想要使用的时间序列引导。

编写完该函数后，您需要将其放入 caret 命名空间，以便 caret 包中的函数使用它。为此，您使用`assignInNamespace()`. 假设您的新引导函数被调用`createMyResample()`并且它是您的工作区，要将其插入到插入符号命名空间中，请执行以下操作：

```
assignInNamespace("createResample", createMyResample, ns = "caret") 
```

抱歉，我不能更具体，但你没有说你希望*如何*执行 bootstrap/CV，也没有说你想用什么 R 代码来进行重采样。如果您提供有关如何进行重采样的更多详细信息，我会再看一下，看看我是否可以帮助您编写`create*()`函数。

如果没有这一切，请联系 caret 的作者和维护者 Max Kuhn；他可能会提供进一步的建议，或者至少您可以建议将此功能作为未来版本的愿望清单。

# android - Android Intent.ACTION_SEND Youtube

> ID：11006012
> 
> 赞同：0
> 
> 时间：2012-06-12T22:54:07.640
> 
> 标签：android, android-intent

我想使用我的应用程序在 YouTube 上上传视频。我正在使用这段代码：

```
uploadIntent.setDataAndType(Uri.fromFile(f), "video/quicktime");
startActivity(Intent.createChooser(uploadIntent, "Upload")); 
```

但当我希望它仅显示 YouTube 选项时，它也会向我显示蓝牙、gmail 等选项。如何仅显示 YouTube 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:00:06.090

我误解了你在问什么。您似乎可以上传，但希望将其限制为仅限 YouTube。要实现这一点，您不应该使用，`Intent.createChooser`因为选择是否只想显示一个选项是没有意义的。相反，您可以使用[`Intent.setClassName`](http://developer.android.com/reference/android/content/Intent.html#setClassName%28java.lang.String,%20java.lang.String%29)为 YouTube 指定包和类。

当您选择 YouTube 时，只需检查~~当前代码中~~`Intent`传回的 s即可发现正确的值。~~您需要将`Intent.createChooser`~~from的返回值设置[`PackageManger.queryIntentActivites`](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)为一个局部变量，在后面的行中设置一个断点，并`Intent`在它中断时检查 YouTube 的内容。

# php - HTTP 请求获得部分响应

> ID：11006013
> 
> 赞同：0
> 
> 时间：2012-06-12T22:54:13.493
> 
> 标签：php, http, request

我正在尝试[将此 CrunchBase API 页面](http://api.crunchbase.com/v/1/financial-organization/first-round-capital.js)作为 PHP 中的字符串。当我在浏览器中访问该页面时，我得到了完整的响应（大约 230K 个字符）；但是，当我尝试在脚本中获取页面时，响应要短得多（服务器上的 24341 个字符和本地的 36629 个字符，其他长 CrunchBase 页面的字符数完全相同）。为了获取该页面，我使用了与[drupal_http_request()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_http_request/7)几乎相同的函数，尽管我没有使用 Drupal。（我也尝试过使用 cURL 和 file_get_contents() 并得到了相同的结果。现在我正在考虑它，我过去在 Python 中的 CrunchBase 也经历过同样的事情。）

可能是什么原因造成的，我该如何解决？PHP 5.3.2、Apache 2.2.14、Ubuntu 10.04。以下是有关响应的其他详细信息：

```
[protocol] => HTTP/1.1
[headers] => Array
    (
        [content-type] => text/javascript; charset=utf-8
        [connection] => close
        [status] => 200 OK
        [x-powered-by] =>
        [etag] => "d809fc56a529054e613cd13e48d75931"
        [x-runtime] => 0.00453
        [content-length] => 230310
        [cache-control] => private, max-age=0, must-revalidate
        [server] => nginx/1.0.10 + Phusion Passenger 3.0.11 (mod_rails/mod_rack)
    ) 
```

我不认为这是我`User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6`在请求中使用的用户代理问题。

**更新**

根据[这个线程](https://groups.google.com/forum/?fromgroups#!topic/crunchbase-api/zgVExJlkPOU)，我需要将`Accept-Encoding: gzip, deflate`标头添加到请求中。这确实会导致请求结果更长，但现在我必须弄清楚如何膨胀它。gzinflate [()](http://www.php.net/manual/en/function.gzinflate.php)函数失败并显示`Warning: Data error`. 关于如何夸大响应的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:15:02.933

请参阅 PHP 文档中关于[gzinflate()](http://www.php.net/manual/en/function.gzinflate.php)的注释，特别是关于剥离初始字节的注释。最后[一条评论](http://www.php.net/manual/en/function.gzinflate.php#33810)对我有用：

```
<?php $dec = gzinflate(substr($enc,10)); ?> 
```

尽管似乎要剥离的字节数取决于原始编码器。[另一篇评论](http://www.php.net/manual/en/function.gzinflate.php#77336)有更彻底的解决方案，并参考[RFC1952](http://www.faqs.org/rfcs/rfc1952.html)以供进一步阅读。

显然[gzdecode()](http://www.php.net/manual/en/function.gzdecode.php)是为了解决这个问题，但它还没有发布。

ps——我删除了关于返回数据是纯文本的评论。我错了。

# windows - 如何使用 Windows 命令行搜索文件，然后创建带有位置的文本文档？

> ID：11006014
> 
> 赞同：2
> 
> 时间：2012-06-12T22:54:17.380
> 
> 标签：windows, file, search, command-line

我正在编写我的第一个批处理文件，因为我以前从未使用过 Windows 命令行，所以我遇到了一些问题。

这是我的场景。我在几个图像上使用这个批处理文件来安装一些东西。我希望批处理文件检查安装程序应该在的文件夹，如果不存在，我希望批处理文件在计算机中搜索安装程序。之后，我希望它运行所述安装程序。

这是我所拥有的：

```
ECHO.
ECHO Starting Foo installation

IF EXIST Install\Installer.cmd (CALL Install\Installer.cmd & GOTO NextPart) ELSE (GOTO SearchInstaller)

:SearchInstaller
SET the_path =
E: & CD\
DIR /S/B Installer.cmd > installer_location.txt
IF EXIST installer_location.txt (SET /P the_path =< installer_location.txt & GOTO FoundIt)
C: & CD\
DIR /S/B Installer.cmd > installer_location.txt
IF EXIST installer_location.txt (SET /P the_path =< installer_location.txt & GOTO FoundIt)
D: & CD\
DIR /S/B Installer.cmd > installer_location.txt
IF EXIST installer_location.txt (SET /P the_path =< installer_location.txt & GOTO FoundIt)
ECHO Installation file not found.

:FoundIt
ECHO Batch file found at%the_path%
CALL %the_path%
ECHO Finished installation & ECHO. 
GOTO NextPart

:NextPart
(more stuff) 
```

我认为问题在于，一旦我使用 DIR 定位它，它就没有保存路径。我已经研究了好几天，我的谷歌搜索都充满了紫色链接。我发现的一切都表明我的语法是正确的，但我知道我做错了什么。

我已经尝试`ECHO Program execution reached this point.`在几个位置放置一个，所以我至少知道它会到达哪里。我看到的问题在于将文本文件的内容分配给`the_path`我尝试`ECHO`路径的行，因此我可以看到它有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:33:41.480

在您的`SET /P`命令中，变量名和等号之间有一个空格。这完全符合您的要求，而不是您想要的：它设置了一个名称以空格结尾的变量。摆脱多余的空间，我认为它会起作用。

额外的：-

为了避免尼尔指出的问题（很好！）试试这个：

```
DIR /S/B Installer.cmd > installer_location.txt
SET /P the_path=< installer_location.txt
if defined the_path goto :foundit 
```

事实证明，如果`installer.cmd`未找到，`installer_location.txt`则为空`the_path`且未定义。如果您想格外小心，请尝试

```
if defined the_path if exist "%the_path%" goto :foundit 
```

# mysql - 具有 3 个表的复杂 IF 语句

> ID：11006025
> 
> 赞同：2
> 
> 时间：2012-06-12T22:55:31.440
> 
> 标签：mysql, relational-database, relational

这是[昨天这个问题](https://stackoverflow.com/questions/10989796/more-complex-if-statements-within-mysql-query)的延续。

这是我的三个表：

战斗机表

```
fighter_id |  name
-----------------------
1          | John
2          | Steve
3          | Bill
4          | Bobby 
```

事件表

```
event_id  |  event_name  |  event_date
-------------------------------------------
1          | MMA         |  01/01/2010
2          | Cool        |  02/20/2010
3          | Yeaa!       |  04/15/2010 
```

战斗表

```
fight_id  |  fighter_a  |  fighter_b  |  winner  |  method  |  event
-----------------------------------------------------------------------
1         | 1           |  2          |  1       | Sub      | 1
2         | 4           |  1          |  4       | KO       | 2
3         | 1           |  3          |  NULL    | Draw     | 3 
```

结果试图得到

```
result  |  opponent  |  method  |  event  |  date        
----------------------------------------------------------
Draw    | Bill       |  Draw    |  Yeaa!  |  04/15/2010  
Loss    | Bobby      |  KO      |  Cool   |  02/20/2010 
Win     | Steve      |  Sub     |  MMA    |  01/01/2010 
```

所以在fights 表中，fighter_a、fighter_b 和winner 是对应于Fighters 表中的fighter_id 的整数。

我基本上是在基于 fighter_id ($fighter_id) 检索数据的页面上。

我正在尝试为该战斗机的每次战斗创建行，其中包括他的对手的名字、结果（赢、输、平或 nc）、方法、event_name 和 event_date。挑战在于获胜者可以在 fighter_a 或 fighter_b 中。它并不总是在同一列中。我很感激我能得到的任何帮助。

```
select 
    fight_id,
    CASE
      WHEN winner is not null and winner=fighter_id then 'win'
      WHEN winner is not null and winner<>fighter_id then 'loss'
      WHEN winner is null and method='Draw' then 'draw'
      WHEN winner is null and method = 'No Contest' then 'no contest'
      ELSE ''
    END as match_result,
    participant.name 'participant',
    opponent.name 'opponent'
FROM fights
    INNER JOIN fighters as participant on participant.fighter_id = fights.fighter_a
    INNER JOIN fighters as oppoent on opponent.fighter_id = fights.fighter_b
WHERE 
    fighter_a=$fighter_id OR fighter_b=$fighter_id
ORDER BY
    event_date DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:10:40.007

您可以只修改您`CASE`的语句以匹配`$fighter_id`.

所以你的`CASE`陈述将是 -

```
select fight_id,
       CASE
           WHEN winner is not null and winner = f.fighter_id then 'win'
           WHEN winner is not null and winner <> f.fighter_id then 'loss'
           WHEN winner is null and method='Draw' then 'draw'
           WHEN winner is null and method = 'No Contest' then 'no contest'
           ELSE ''
        END as match_result,
        f.name AS participant,
        (SELECT o.name FROM fighters o WHERE o.fighter_id = IF(f.fighter_id = fs.fighter_a, fs.fighter_b, fs.fighter_a)) AS opponent
FROM fights fs,
     fighters f
WHERE f.fighter_id = $fighter_id
AND (fs.fighter_a = f.fighter_id OR fs.fighter_b = f.fighter_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:25:43.507

您可以使用联合：

```
SELECT CASE WHEN winner = participant_id THEN 'Win'
            WHEN winner = opponent_id then 'Loss'
            ELSE method
       END AS result, fighters.name AS opponent, method, event_name, event_date
  FROM fights
  INNER JOIN fighters ON fighter_id = opponent_id
  INNER JOIN events ON event = event_id
  WHERE participant_id = $fighter_id
UNION ALL
SELECT CASE WHEN winner = participant_id THEN 'Loss'
            WHEN winner = opponent_id then 'Win'
            ELSE method
       END AS result, fighters.name AS opponent, method, event_name, event_date
  FROM fights
  INNER JOIN fighters ON fighter_id = participant_id
  INNER JOIN events ON event = event_id
  WHERE opponent_id = $fighter_id
ORDER BY event_date DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T00:10:27.743

使用带有条件的子选择将您要查找的 fighter_id 切换到 column_a（如果它在 column_b 中），这样可以简化您的操作并加入外部查询：

```
SELECT
    (
        CASE
            WHEN a.winner = a.f_a THEN 'Win'
            WHEN a.winner = a.f_b THEN 'Loss'
            WHEN a.winner IS NULL THEN a.method
        END
    ) AS result,
    b.name AS opponent,
    a.method AS method,
    c.event_name AS event,
    c.event_date AS date
FROM
    (
        SELECT 
            IF(fighter_b = $fighter_id, fighter_b, fighter_a) AS f_a,
            IF(fighter_b = $fighter_id, fighter_a, fighter_b) AS f_b,
            winner,
            method,
            event
        FROM 
            fights
        WHERE
            $fighter_id IN (fighter_a, fighter_b)
    ) a
INNER JOIN
    fighters b ON a.f_b = b.fighter_id
INNER JOIN
    events c ON a.event = c.event_id
ORDER BY
    c.event_date DESC 
```

此外，如果获胜者字段为空，则只需回显方法字段。这样，当您想在系统中添加另一种获胜者为空的方法时，您不必继续对`CASE`语句进行更多条件检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T23:54:22.827

```
SELECT
    CASE
      WHEN winner is not null and winner=fighter_id then 'win'
      WHEN winner is not null and winner<>fighter_id then 'loss'
      WHEN winner is null and method='Draw' then 'draw'
      WHEN winner is null and method = 'No Contest' then 'no contest'
      ELSE ''
    END result,
    f2.name opponent,
    method,
    event_name event,
    event_date date
FROM fights f1
INNER JOIN fighters f2
ON f1.fighter_b = f2.fighter_id
INNER JOIN events e
ON e.event_id = f1.event
ORDER BY date DESC 
```

# asp.net-mvc-3 - MVC3 Controller.Redirect（字符串）

> ID：11006031
> 
> 赞同：3
> 
> 时间：2012-06-12T22:56:42.670
> 
> 标签：asp.net-mvc-3

我的控制器中有这样的私人功能。

```
private UserDetails GetUserDetails(int userid)
{
    ...
    if (some condition check is false)
        Redirect("some other page in a different subdomain");

    return userDetails;
} 
```

如果条件失败，则执行 Redirect 语句，但不会停止执行。userDetails 返回给调用函数。没有重定向到其他页面。

如何强制重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:00:39.830

在某些情况下，您无法重定向，尽管我不确定对整个集合的规定是什么。解决此问题的一种方法是将字符串返回到视图并让 javascript`window.location(url)`强制重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:06:16.553

重定向返回一个结果 - 您应该在 Action 方法中使用它，如下所示：

```
public ActionResult MyAction() 
{
    if (check is false) 
    {
        return Redirect("other url");
    }
    // this code won't get executed after redirect
} 
```

看起来您应该从上面发布的函数中返回 null，然后检查 null 以及`return Redirect("...")`GetUserDetails 是否返回 null。

# jar - 尝试运行 jar 文件时出错

> ID：11006033
> 
> 赞同：0
> 
> 时间：2012-06-12T22:56:50.853
> 
> 标签：jar

我试图帮助我似乎没有人理解我的问题。我在 netbeans 中创建了一个项目，当我编译它时它会生成一个 jar 文件。它通过 IDE 运行得很好，但是当我尝试从命令提示符启动它时，它根本不做任何事情。它只是将光标移动到下一行以获取另一个命令？当我回显我的类路径时，这是我得到的结果

```
/opt/netbeans-7.1.2/ide/modules/ext/mysql-connector-java-5.1.13-bin.jar:/h/USERS/local/pagola/NetBeansProjects/mylib/dist/mylib.jar:/h/USERS/local/pagola/NetBeansProjects/EOPPrototype/build/classes 
```

我添加了包含 jar 中所有内容的类路径。我的清单文件包含主类（入口点），这就是它的样子

```
 Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_22-b04 (Sun Microsystems Inc.)
Class-Path: lib/mysql-connector-java-5.1.13-bin.jar lib/mylib.jar
X-COMMENT: Main-Class will be added automatically by build
Main-Class: eopprototype.EOPPrototype 
```

所以我无法弄清楚我做错了什么？我是否需要在我的 PATH 变量中添加任何内容（可能是 java jdk bin 的东西）它是否无法找到 java 命令，因为它不知道在哪里寻找该可执行文件？

注意：我没有设置我的 PATH 和 LIBRARY PATH - 我需要这样做吗？这是 ac 风格的 shell 脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:23:49.463

**先试试这个**

如果您的清单不以换行符结尾，则可能会被忽略。查看[清单需要换行符](https://stackoverflow.com/questions/2169188/why-is-jar-ignoring-my-manifest)

**否则我必须做出假设**

如果该 JAR 文件包含您希望执行的方法，则您不需要`lib/mylib.jar`在清单中。所以删除它，所以它只列出. 然后您的清单将如下所示`EOPPrototype``public static void main(String[] args)``mysql-connector-java-5.1.13-bin.jar`

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_22-b04 (Sun Microsystems Inc.)
Class-Path: lib/mysql-connector-java-5.1.13-bin.jar
X-COMMENT: Main-Class will be added automatically by build
Main-Class: eopprototype.EOPPrototype 
```

然后假设你所有的代码都在 mylib.jar 中并且唯一的其他依赖 jar 是 mysql-connector-java-5.1.13-bin.jar，创建一个这样的目录结构

```
/h/USERS/temp/mylib.jar
/h/USERS/temp/lib/mysql-connector-java-5.1.13-bin.jar 
```

然后像这样执行

```
cd /h/USERS/temp

java -cp .:mylib.jar eopprototype.EOPPrototype 
```

# parsing - 如何解析文本对于形式语法来说太可变但对于 NLP 来说太受限制了？

> ID：11006039
> 
> 赞同：3
> 
> 时间：2012-06-12T22:57:17.420
> 
> 标签：parsing, nlp, linguistics

我正在处理非正式编写的文本语料库，但通常按照惯例符合非常标准的格式（想想像*Froyo Frozen Yogurt*，*Smucker's Peanut Butter 之*类的东西），并且偶尔需要递归（*Froyo Frozen Yogurt with Smucker's Peanut Butter*）。

使用正则表达式，复杂性很快就会失控（ Froyo 的 Frozen Yogurt ，*Smucker's 的**Froyo* Froyo Frozen Yogurt with Peanut Butter等）。

 *我很难找到资源来帮助我为此编写 EBNF，而且 NLP 方法太复杂（加上我的“词性”并不真正对应于普通英语）。是否有针对半正式文本的中间方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:47:53.457

You could build a cheap and simple EBNF "into" your favorite programming language, e.g: (pseudocode, let's imagine these variables represent regexes)

```
var digit_excluding_zero = "1|2|3|4|5|6|7|8|9";
var digit = "0|" + digit excluding zero; 
```

(this is the first example from the [EBNF Wikipedia page](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form#Basics))*

# html - 使用 CakePHP 从布局文件中调用 .ctp 文件

> ID：11006040
> 
> 赞同：0
> 
> 时间：2012-06-12T22:57:41.743
> 
> 标签：html, cakephp, layout

是否可以从也是 .ctp 文件的布局中调用 .ctp 文件？

我有一个默认布局，顶部栏、页脚，当然还有中间的变量 $content_for_layout。我想将顶栏和页脚分派到另外两个不同的 .ctp 文件中，我想从我的布局中调用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:08:13.363

你可以使用[元素](http://book.cakephp.org/1.3/view/1081/Elements)。

```
<?php 
echo $this->element('topbar');
echo $content_for_layout;
echo $this->element('footer');
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T23:08:49.353

您可以使用[元素](http://book.cakephp.org/1.3/view/1081/Elements)，或者在 CakePHP 2.1 中，您可以签出[blocks](http://book.cakephp.org/2.0/en/views.html#using-view-blocks)。

# python - (Python) 创建包 __init__.py

> ID：11006044
> 
> 赞同：0
> 
> 时间：2012-06-12T22:58:04.290
> 
> 标签：python, packages, init

我正在尝试制作以下层次结构的python包：

```
\standard
    \__init__.py
    \text.txt
    \scan.py 
```

scan.py 中有一个名为 parse() 的函数，它通过以下方式打开 text.txt：

`name_list = open('text.txt','r')`

但是，当我跑步时

```
from standard import *
result = scan.parse() 
```

我得到以下信息：

```
IOError: [Errno 2] No such file or directory: '/text.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:00:20.980

Python 有一个有趣的变量`__file__`，它是包含运行代码的文件的名称。您的代码正在查看当前工作目录。

使用它来打开您的文件：

```
open(os.path.join(os.path.dirname(__file__), 'text.txt'), 'r') 
```

与特殊变量相关的文档`__file__`：

[http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)

# visual-c++ - 无法在动态链接库中定位过程入口点

> ID：11006045
> 
> 赞同：0
> 
> 时间：2012-06-12T22:58:04.473
> 
> 标签：visual-c++

我正在尝试为我正在开发的游戏代理 ddraw.dll（不用于作弊目的），主游戏调用了两个函数以启动它：

DirectDrawEnumerateExA

DirectDrawCreateEx

我已经将这两个都添加到了我的 C++ 项目中，并在网上进行了无数次研究，但到目前为止我一无所获，我尝试了各种教程和各种方法，例如使用 .def 文件，我似乎无法找出问题所在。

启动游戏时出现“程序入口点 DirectDrawEnumerateExA 无法位于动态链接库 DDRAW.dll 中”

这是我目前正在使用的代码库：

```
#include <windows.h>
#include <ddraw.h>

typedef HRESULT (WINAPI* DirectDrawEnumerateExA_td)(LPDDENUMCALLBACKEXA lpCallback, LPVOID lpContext, DWORD dwFlags);
typedef HRESULT (WINAPI* DirectDrawCreateEx_td)(GUID FAR *lpGuid, LPVOID *lplpDD, REFIID iid, IUnknown FAR *pUnkouter);

static struct
{
    HMODULE hGameDLL;
    char* pGameDLL;

    // entry points
    DirectDrawEnumerateExA_td OldDirectDrawEnumerateExA;
    DirectDrawCreateEx_td OldDirectDrawCreateEx;

} g_state;

extern "C" HRESULT __declspec(dllexport) OldDirectDrawEnumerateExA(LPDDENUMCALLBACKEXA lpCallback, LPVOID lpContext, DWORD dwFlags)
{
    return g_state.OldDirectDrawEnumerateExA(lpCallback, lpContext, dwFlags);
}

extern "C" HRESULT __declspec(dllexport) WINAPI OldDirectDrawCreateEx(GUID FAR *lpGuid, LPVOID *lplpDD, REFIID iid, IUnknown FAR *pUnkouter)
{
    return g_state.OldDirectDrawCreateEx(lpGuid, lplpDD, iid, pUnkouter);
}

BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
{
    if(fdwReason == DLL_PROCESS_ATTACH)
    {
            char infoBuf[MAX_PATH];
            GetSystemDirectory(infoBuf, MAX_PATH);
            strcat_s(infoBuf, MAX_PATH, "\\ddraw.dll");

            g_state.hGameDLL = LoadLibrary(infoBuf); 
            g_state.pGameDLL = (char*)g_state.hGameDLL;

            if(!g_state.hGameDLL)
            {
                MessageBox(NULL, "Unable to load ddraw.dll", "Error", MB_OK | MB_ICONEXCLAMATION);
                ExitProcess(0);
            }

            g_state.OldDirectDrawEnumerateExA = (DirectDrawEnumerateExA_td)GetProcAddress(g_state.hGameDLL, "DirectDrawEnumerateExA");

            if(!g_state.OldDirectDrawEnumerateExA)
            {
                MessageBox(NULL, "Unable to find entry point: DirectDrawEnumerateExA", "Error", MB_OK | MB_ICONEXCLAMATION);
                ExitProcess(0);
            }

            g_state.OldDirectDrawCreateEx = (DirectDrawCreateEx_td)GetProcAddress(g_state.hGameDLL, "DirectDrawCreateEx");

            if(!g_state.OldDirectDrawCreateEx)
            {
                MessageBox(NULL, "Unable to find entry point: DirectDrawCreateEX", "Error", MB_OK | MB_ICONEXCLAMATION);
            }

            MessageBox(NULL, "Test.", "Test Box", MB_OK | MB_ICONEXCLAMATION);
    }
    else if(fdwReason == DLL_PROCESS_DETACH)
    {
        if (g_state.hGameDLL)
        {
            FreeLibrary(g_state.hGameDLL);
        }
    }

    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:44:35.467

一个大问题是发生 DLL_PROCESS_ATTACH 时对 LoaLibrary 的调用。永远不要那样做！相反，请查看[创建 DLL 的最佳实践](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487379.aspx)并更正此问题。您正在试验的失败与在加载程序尚未完成将 DLL 附加到进程时调用 LoadLibrary 的副作用有关。

# javascript - 如何将插入符号移动到可竞争元素内的特定字符偏移量

> ID：11006052
> 
> 赞同：0
> 
> 时间：2012-06-12T22:58:50.620
> 
> 标签：javascript, contenteditable, caret

我正在使用它来检索计数

```
var window.getSelection().getRangeAt(0).startOffset; 
```

这就是我到目前为止恢复计数的方法。

```
var range = window.getSelection().getRangeAt(0);
range.setStart(dNode, dc);
range.insertNode (mcmsfinalLinkhandle); 
```

我正在使用 localStorage 来保存计数。这可能看起来很乏味，但我感谢任何帮助。这应该是一个入门级的 javascript 问题，所以我觉得我应该能够在没有复杂解决方案的情况下做到这一点。到目前为止，我所缺乏的是按字符而不是按节点或行放置并将插入符号保持在插入点的能力。再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:57:56.643

首先，有单独的 Range 和 Selection API。范围只是文档的单个连续块，不一定与选择相关联。浏览器对于更改从选择中获得的范围是否会影响选择有所不同（Firefox 会，而其他浏览器不会），因此要确定更新选择，您需要删除并添加范围：

```
var sel = window.getSelection();
var range = sel.getRangeAt(0);
range.setStart(dNode, dc);
range.insertNode(mcmsfinalLinkhandle);
sel.removeAllRanges();
sel.addRange(range); 
```

将插入符号移动到可编辑元素的可见文本中的特定字符偏移量并非易事，实现它的代码远非入门级，因为 DOM Range API 中的所有内容都围绕节点而不是文本旋转，并确定正在编辑的文本需要计算各种 CSS 属性（`display`, `white-space`, `visibility`, 等等）。

您可以使用我的[Rangy](http://code.google.com/p/rangy)库及其新的[TextRange 模块](http://code.google.com/p/rangy/wiki/TextRangeModule)( [demo](http://rangy.googlecode.com/svn/trunk/demos/textrange.html) ) 将插入符号和选择用作字符偏移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:12:52.687

不幸的是，答案是 - 这取决于浏览器。我相信 FF、Chrome 和 Safari 使用相同的界面 - 在这里进行更多研究：[https ://developer.mozilla.org/en/DOM/Range](https://developer.mozilla.org/en/DOM/Range)

IE 和我认为 Opera，使用不同的界面： http: [//msdn.microsoft.com/en-us/library/ie/ms535872 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms535872(v=vs.85).aspx)

忠告：如果可以的话，尽量远离这个。要么使用现成的 RTE 编辑器，要么只使用常规文本区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:13:51.823

您必须使用 来创建一个范围`document.createRange`，将其移动到正确的位置，然后选择它。

这是一个很好的解决方案[https://stackoverflow.com/a/3866442/1450483](https://stackoverflow.com/a/3866442/1450483)

# jquery - jQuery/AJAX 读取 div 标签内的 html

> ID：11006053
> 
> 赞同：3
> 
> 时间：2012-06-12T22:59:00.417
> 
> 标签：jquery, ajax, html

我通过 AJAX 从数据库中获取 HTML，但是当我将该 HTML 输出到 div 中时，它只显示实际的 HTML 文本，而不是图片，例如浏览器看到它。有人知道怎么做吗？我在 textarea #html 中输出 HTML，并希望看到它在 div #preview 中呈现。这是代码：

```
$(document).ready(function(){
    $('#creative').change(function() {
        $.ajax({
            url: '/app/components/MailingsReport.cfc',
            //POST method is used
            type: "POST",
            //pass the data 
            data: {
                method: "getCreativeHTML",
                creativeID: $('#creative').val(),
                datasource: "shopping_cart"
                 },
            dataType: "html",
            //contentType: "application/text; charset=utf-8",
            success: function(response){
                var obj = $.trim(response);
                //alert("response");
                if (obj == '"0 records"') {
                    $('#preview').html("No creative found.");
                }
                else { 
                    $('#html').val( obj );
                    $('#preview').html( obj );
                }
            }
        })
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T23:04:46.887

我看到你回答了你自己的问题。您还可以考虑为此类事情设计的 jQuery [.load()方法。](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:32:18.653

我通常使用`$("myul").append("<li>anitem<\li>").`试一试，看看它是否有效。

# asp.net - ASP.NET MVC3 - 单页上的多个存储过程

> ID：11006054
> 
> 赞同：1
> 
> 时间：2012-06-12T22:59:02.857
> 
> 标签：asp.net, asp.net-mvc-3, stored-procedures

是否可以调用多个存储过程（不是一个过程的多个结果集）并在 ASP.NET MVC 3 应用程序的单个页面上显示结果？

据我了解，在任何单个页面上只能创建一个模型，并且我的存储过程已经绑定到该模型。我想调用另一个程序并在我的页面上显示该结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:31:00.557

我认为根本问题是要理解**MVC 模式中****Model**的含义。

 **首先，

> **模型由应用程序数据和业务规则组成**，控制器调解输入，将其转换为模型或视图的命令。 [3] 视图可以是数据的任何输出表示，例如图表或图表

[资源](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

在 ASP.Net MVC 中，您将*模型*链接到您的视图，此模型**不应该**是您的域逻辑或任何**域对象的一部分**

真正的模型（使用 MVC 模式的含义）由您的域对象表示。

那么您应该在链接到视图的对象中放入什么？

这些对象应该包含**视图的表示，**换句话说，简单的 DTO**只**包含将在视图中使用的数据，仅此而已。这些模型应该代表视图中使用的数据。如果您遵循这种方法，并且需要在页面中显示更多数据，则只需向此*模型*添加另一个属性，瞧，您可以从视图中使用它。

在 CQRS 架构中，这些 DTO 应该由*Query repositories*填充。

如果您没有 CQRS 架构，只需将这些对象填充到您的域、存储库等中。不要在控制器内部执行此操作，通过使用服务或存储库调用您的真实域来保持控制器清洁和简单

尽量避免重复使用这些 DTO，它们应该只属于一个视图。帮自己一个忙，不要试图重用域对象而不是 DTO 只是为了将其用作模型。

按照这种方法，您的视图模型将是干净的，因为它们将只是 DTO 并且仅包含视图所需的数据。您可以从不同的来源填充这些 DTO，如果需要，甚至可以从不同的数据库中填充。

当您想要执行某个操作时，您将从模型中读取用户提供的数据，并使用这些数据通过存储库、服务或在 CQRS 弧中调用您的域。使用命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:08:06.047

您的问题的简单答案是“是”。

我建议您对 MVC 进行更多研究（即阅读文章和查看示例应用程序）并专注于理解以下几点：

*   **Model**是一个类，用于对要在**View**中显示的数据进行分组。它可以通过多种方法填充，不必是域对象或数据库结果的纯粹表示。
*   “页面”（用户在浏览器窗口中看到的概念）可以由一个或多个**Views**组成。每个**View**可以负责显示一种允许重用的**Model ，但是一个“页面”可以有***多个* **Views**。
*   模型没有“绑定”到存储过程。也许您正在使用返回 DTO 类（称为模型）的 ORM 工具？这不一定是**View**使用的**Model**。**控制器**可以将这些 DTO 类中的几个组合成一个**模型**类。
*******   N 层应用程序设计，其中数据库访问与显示逻辑分离。MVC 试图鼓励这一点，但它仍然必须正确地完成，以避免让自己陷入困境。******

 ******祝你好运！********

# javascript - JavaScript：如何通过 AJAX 打开返回的文件

> ID：11006055
> 
> 赞同：3
> 
> 时间：2012-06-12T22:59:04.020
> 
> 标签：javascript, jquery, download

这类似于：[如何使用 JavaScript 打开文件？](https://stackoverflow.com/questions/761682/how-to-open-a-file-using-javascript)

### 目标：通过双击图像检索/打开文件

```
function getFile(filename){
   // setting mime this way is for example only
   var mime = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';

   jQuery.ajax({ url      : 'get_file.pl',
                 data     : {filename:filename}, 
                 success  : function(data){
                               var win = window.open('','title');
                               win.document.open(mime);
                               win.document.write(data);
                               win.document.close();
                            }
               });
}

jQuery('#imgID').dblclick(function(){ 
   getFile('someFile.docx');
}); 
```

我正在做这件事，但我认为以上内容适用于文本文件，但不适用于二进制文件。有没有可以正确执行此操作的插件？理想的情况是在浏览器（或应用程序）中打开文件，而不是下载，但我怀疑这是一个梦想。如果必须使用保存/打开对话框下载文件，那很好。

* * *

### 编辑：

我忘记提及的一条信息是，我希望这是一个 POST 请求。这也是我开始关注 AJAX 的部分原因。我已经看到了创建表单/iframe 来执行类似操作的解决方法，但我一直在寻找返回信息的更好处理程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T23:09:42.347

在我看来，没有理由通过 AJAX 做到这一点。只需打开新窗口*get_file.pl?filename=...*并让浏览器处理它。如果用户有一个能够处理*get_file.pl*`Content-Type`发送的插件，该文件将显示；否则，它应该像任何其他文件一样下载。

 *```
function getFile(filename) {
   window.open('get_file.pl?filename=' + filename,'title');
}

jQuery('#imgID').dblclick(function() { 
   getFile('someFile.docx');
}); 
```

* * *

**编辑**：如果你想要`POST`你的脚本，[你可以](http://jsfiddle.net/josh3736/2Y5fR/)用一些`<form>`hackery来做：

```
function getFile(filename) {
    var win = 'w' + Math.floor(Math.random() * 10000000000000);
    window.open('', win,'width=250,height=100');
    var f = $('<form></form>')
            .attr({target: win, method:'post', action: 'get_file.pl'})
            .appendTo(document.body);

    var i = $('<input>')
            .attr({type:'hidden',name:'filename',value:filename})
            .appendTo(f);

    f[0].submit();
    f.remove();
} 
```

当然，这有点愚蠢，因为使用开发人员工具无法“窥探”您的数据。如果您的文件名确实很敏感，请向客户端发出访问令牌，并在您的服务器脚本中查找数据。*

# jquery - 单击时动画旋转 DIV

> ID：11006056
> 
> 赞同：1
> 
> 时间：2012-06-12T22:59:13.317
> 
> 标签：jquery

> **可能重复：**
> [jQuery：如何为 div 旋转设置动画？](https://stackoverflow.com/questions/3789984/jquery-how-do-i-animate-a-div-rotation)

我有一个 div，当您单击它时，我希望它围绕中心点平滑旋转 30 度。我搜索了一堆，但没有找到任何我可以开始工作的东西。到目前为止，这是我尝试过的-我一生都无法弄清楚自己做错了什么。

```
$("#box").click(function() {
    $(this).animate({
        rotate: '30deg'
    }, 1000);
});​ 
```

这是一个例子：[**jsFiddle**](http://jsfiddle.net/svz2J/2/)

这看起来很简单，我可能会因为问而被活生生吃掉，但我真的坚持这一点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:07:00.763

使用[jQuery Rotate 插件](http://code.google.com/p/jqueryrotate/)- 它是合理的跨浏览器。

```
$("#box").rotate({ 
    angle:0,
        bind: {
            click : function(){
                var curAngle = parseInt($(this).getRotateAngle());
                $(this).rotate({
                    angle: curAngle,
                    animateTo: curAngle + 30
                });
            }
        }
   }); 
```

​演示 **：http:** [//jsfiddle.net/svz2J/6/](http://jsfiddle.net/svz2J/6/)

正如下面评论中的要求 - 一种通过按钮执行此操作的方法。另外，添加了一个`duration`例子。

```
$("button").click(function(){ 
    var curAngle = parseInt($("#box").getRotateAngle()) || 0;
    $("#box").rotate({
        angle: curAngle,
        animateTo: curAngle + 30,
        duration: 5000
    });
}); 
```

​</p>

**演示：http:** [//jsfiddle.net/svz2J/10/](http://jsfiddle.net/svz2J/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:12:23.873

我真的建议你改用这个插件： [http ://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)

我在一个项目上建议的 ahren 花了很长时间，但由于性能不佳而最终不得不更换。

如果它是一个相对较低的过程密集型的事情，那么就足够公平了.. 只是想我会权衡一下。

# ios - 用动画切换视图

> ID：11006057
> 
> 赞同：0
> 
> 时间：2012-06-12T22:59:29.450
> 
> 标签：ios, uiview, viewwillappear, viewdidappear

我必须改变看法。在视图中，我有一个带有此代码的按钮：

```
 FormazioneViewController *formazioneC = [[FormazioneViewController alloc] initWithNibName:@"FormazioneView" bundle:nil];

self.formazioneViewController= formazioneC;

[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:1.25];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationDidStop)];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];

[self viewWillDisappear:YES];
[self viewDidDisappear:YES];
[self.view addSubview:formazioneViewController.view];
[formazioneViewController viewWillAppear:YES];
[formazioneViewController viewDidAppear:YES];

[UIView commitAnimations]; 
```

我添加了一个超级视图，现在我必须在这个视图中返回，我使用一个带有这个代码的按钮：

```
 [UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:1.25];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationDidStop)];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];

[self viewWillDisappear:YES];
[self viewDidDisappear:YES];

[self.view removeFromSuperview];

[****** viewWillAppear:YES];
[****** viewDidAppear:YES];

[UIView commitAnimations]; 
```

我必须调用 viewWillAppear 和 ViewDidAppear 方法的对象是什么？谢谢

对不起，我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:59:26.580

你写过这个方法吗，

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

# python - 唯一键和 Python 字典

> ID：11006061
> 
> 赞同：0
> 
> 时间：2012-06-12T22:59:45.360
> 
> 标签：python

以下是相关功能的代码：

```
def populateSubscribers(csvfile, db):
  conn = sqlite3.connect(db)
  conn.text_factory = str  #bugger 8-bit bytestrings
  cur = conn.cursor()

  subscriber_dict = {}

  # read values from tab-delimited csv file
  reader = csv.reader(open(csvfile, "rU"), delimiter = '\t')
  for Number, Name, Message, Datetime, Type in reader:
    if str(Number)[:1] == '1':
      tmpNumber = str(Number)[1:]
      Number = int(tmpNumber)

      # check to ensure name/number not null
      if Number and Name:
        # add unique subscribers to dictionary
        subscriber_dict[Number] = Name
      else:
        print 'Subscriber missing name or number'

  # insert unique subscribers into subscriber table
  for number, name in subscriber_dict.items():
    cur.execute('INSERT OR IGNORE INTO subscriber (name, phone_number) VALUES (?,?)', (name, number))
    conn.commit()

  cur.close()
  conn.close()
  print '...Successfully populated subcriber table.' 
```

它从 csv 文件中读取订户姓名和电话号码，然后应该将每个唯一订户的条目写入数据库。我希望电话号码成为键/值对中的键，因为它是唯一的。但由于某种原因，它没有从数据中读取所有数字，它缺少一些订阅者。如果我将名称作为预期的键丢失（删除所有未知数），但作为键的电话号码完全丢失了一些数字。关于如何修复这里的逻辑的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:14:56.620

在我看来`if str(Number)[:1] == '1':`可能是过滤掉了你的一些数据。

添加一个 else 并打印出它拒绝的任何内容。这些可能是出错的地方。

Either way, pare down your input data and find which one's aren't being used. Without seeing the data and the alternative you've said which *does* work, it's hard to pin down the exact cause here.

# php - 制作动态数组

> ID：11006062
> 
> 赞同：1
> 
> 时间：2012-06-12T22:59:50.303
> 
> 标签：php, mysql, arrays, blogs

基于给出的答案对我有用的答案

```
while($post = mysql_fetch_array($tags)) {
        $push = explode(',', $post['tags']);
        $array = array_merge($array, $push);
} 
```

所以我试图从我的数据库中显示标签并用它们制作链接，如下所示：

```
<?
$tags = mysql_query( 'SELECT tags  FROM `Table`');
$array = array();
while($post = mysql_fetch_array($tags)) {
$push = explode(',', $post['tags']);
array_push($array, $push);
}
foreach ($array as $value) {?>
    <a href="url.php?tags=<? echo $value?>"><? echo $value?></a>
<? }
?> 
```

然而我得到的只是

```
 <a href="url.php?tags=Array">Array</a> 
```

我应该至少有三行，就像以前制作的那样

```
<?
$tags = mysql_query( 'SELECT tags  FROM `Table`');
while($post = mysql_fetch_array($tags)) {
$array = explode(',', $post['tags']);
foreach ($array as $value) {?>
<a href="url.php?tags=<? echo $value?>"><? echo $value?></a>
<? }
}
?> 
```

被调用的代码如下所示：

```
tag1, tag2, tag3 
```

试过了

```
while($post = mysql_fetch_array($tags)) {
    $push = explode(',', $post['tags']);
array_merge($array, $push);
}
foreach ($array as $value) {?>
<a href="index.php?tags=<? echo $value?>"><? echo $value?></a> 
```

现在 foreach 不返回值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:04:31.273

使用[`array_merge()`](http://php.net/manual/en/function.array-merge.php), 因为`array_push()`会将作为数组的 的输出`explode()`作为一个整体推送到第一个参数中的数组，从而创建一个锯齿状数组。

至于您的编辑，这有效：

```
$array = array_merge($array, $push);

foreach ($array as $value)
{
    echo '<a href="url.php?tags=' . $value . '">' . $value . '</a>';
} 
```

请注意`array_merge()`（相反`array_push()`，必须喜欢一致性）不会改变作为其第一个参数传递的数组，因此您必须存储我在第一行（`$array = ...`）中所做的返回值。

在输出到 HTML 时，您可能还希望将 a`$value = htmlentities(trim($value));`放入`foreach`循环中。

# php - Codeigniter 错误框显示何时不需要和成功消息实现

> ID：11006064
> 
> 赞同：0
> 
> 时间：2012-06-12T23:00:13.800
> 
> 标签：php, codeigniter

我不确定将成功消息实现到不同 div 的最佳方法是什么。

当页面加载时，我也将错误 div 加载到我的视图中，为什么？我希望它仅在出现错误时才显示。

如果没有错误，我如何更改 div 并包含成功消息？

**看法：**

```
<div class="alert alert-error">
    <?php echo validation_errors();?>
</div> 
```

**控制器：**

```
if($this->form_validation->run() === TRUE)
            {
                $userData = array(
                    'fName' => $this->input->post('userFirstName', TRUE),
                    'lName' => $this->input->post('userLastName', TRUE),
                    'email' => $this->input->post('userEmail', TRUE),
                    'password' => sha1($this->input->post('userPassword', TRUE))
                );  

                $this->db->escape($userData);
                $this->user_model->addUser($userData);
            }

            $data['contentMangement'] = $this->options_model->systemOptions();
            $data['pageTitle'] = 'Add User';
            $this->load->view('_assets/header', $data);
            $this->load->view('addUser', $data);
            $this->load->view('_assets/footer');
    } 
```

**更新：**

```
<?php 

    $errorMessage = validation_errors('<div class="alert alert-error">', '</div>'); 
    $successMessage = '<div class="alert alert-success"><strong>Thank You</strong> Your User Has Been Added';   
        if($errorMessage)
        {
            echo $errorMessage;
        }else{
            echo $successMessage;
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:13:44.667

尝试

```
<?php 
$errorMsg = validation_errors('<div class="alert alert-error">', '</div>');
if ($errorMsg){
    echo $errorMsg;
}
else{
    echo 'Success message';
}
?> 
```

[错误分隔符](http://codeigniter.com/user_guide/libraries/form_validation.html#errordelimiters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:42:50.590

我已通过以下方式解决了此问题：

```
 if($this->form_validation->run() === TRUE)
        {
            $userData = array(
                'fName' => $this->input->post('userFirstName', TRUE),
                'lName' => $this->input->post('userLastName', TRUE),
                'email' => $this->input->post('userEmail', TRUE),
                'password' => sha1($this->input->post('userPassword', TRUE))
            );  

            $this->db->escape($userData);
            $this->user_model->addUser($userData);

            $data['contentMangement'] = $this->options_model->systemOptions();
            $data['pageTitle'] = 'Add User';
            $data['message'] = '<div class="alert alert-success"><strong>Thank You</strong> Your User Has Been Added';
            $this->load->view('_assets/header', $data);
            $this->load->view('addUser', $data);
            $this->load->view('_assets/footer');

        }elseif($this->form_validation->run() === FALSE)
        {
            $data['contentMangement'] = $this->options_model->systemOptions();
            $data['pageTitle'] = 'Add User';
            $data['message'] = validation_errors('<div class="alert alert-error">', '</div>'); 
            $this->load->view('_assets/header', $data);
            $this->load->view('addUser', $data);
            $this->load->view('_assets/footer');
        } 
```

# windows - 在 pygtk for windows 中拖放光标问题

> ID：11006066
> 
> 赞同：0
> 
> 时间：2012-06-12T23:00:29.263
> 
> 标签：windows, pygtk

我正在linux下使用pygtk编写接口。在 Windows (XP) 下尝试我的程序时，我遇到了一个非常微小的小问题。这很荒谬，但我有点着迷了，我周围的一些人认为我应该和某人谈谈，所以我来了。

我正在对一些包含图像的事件框进行拖放。想法是通过 Pixbuf 将拖动图标设置为 EventBox 中的 Image。在 Linux 下 set_icon_pixbuf 没问题，工作得很好。

在 Windows XP 下（不幸的是我没有更新的东西）当图标覆盖光标热点时，不再发生下降。有什么解决方法吗？我在谷歌上没有看到类似的东西，所以我在这里试试运气。

如果有人想尝试一下，我已经编写了一个重现此行为的代码片段。

```
import gtk

TARGET_TYPE_BT = 0
BUTTON = [('button', gtk.TARGET_SAME_APP, TARGET_TYPE_BT)]

def on_drag_begin(widget, context) :
    context.set_icon_pixbuf(pixbuf, size / 2, size / 2)

def on_drag_data_get(widget, context, selec, targ, time) :
    selec.set( selec.target, 8, widget.get_label())

def on_drag_data_received(widget, context, x, y, selec, targ, time) :
    widget.set_label(selec.data)

size = 48
pixbuf = gtk.gdk.Pixbuf( gtk.gdk.COLORSPACE_RGB, True, 8, size, size)
pixbuf.fill(0xff7777ff)
buttons = [gtk.Button('Spam'), gtk.Button('Spam, spam, egg and spam')]
hbox = gtk.HBox(True)
for button in buttons :
    button.connect('drag_begin', on_drag_begin)
    button.connect('drag_data_get', on_drag_data_get)
    button.connect('drag_data_received', on_drag_data_received)
    button.drag_source_set(gtk.gdk.BUTTON1_MASK, BUTTON, gtk.gdk.ACTION_MOVE)
    button.drag_dest_set(gtk.DEST_DEFAULT_ALL, BUTTON, gtk.gdk.ACTION_MOVE )
    hbox.pack_start(button)

win = gtk.Window(gtk.WINDOW_TOPLEVEL)
win.connect("destroy", lambda w: gtk.main_quit())
win.add(hbox)
win.show_all()
for button in buttons :
    button.window.set_cursor(gtk.gdk.Cursor( gtk.gdk.HAND1 ))
gtk.main() 
```

在这段代码中，图标的大小似乎有意想不到的相关性：尝试 24，一切正常！

感谢您的关注。欢迎任何建议。

# c++ - 如何改变operator=的返回值？

> ID：11006069
> 
> 赞同：0
> 
> 时间：2012-06-12T23:00:37.823
> 
> 标签：c++

所以我一直在创建这个基本上将源代码（用于着色器）放在一起的“框架”。当我想出创建语句类并重载其所有运算符（完全改变它们的含义）以自然方式形成其他语句的想法时，我认为我非常聪明。它看起来像这样：

```
class Statement {

public:
    Statement operator=(const Statement &other) const;
    Statement operator+(const Statement &other) const;
    ...

} 
```

然而，当我认为我已经完成时，结果发现 operator= 完全忽略了返回值，而是总是在“=”之前返回对象。我是否正确理解没有办法做到这一点？

编辑：好的，对不起，我提供的示例编译（我在 A 中也重载了运算符，这不起作用）。

**编辑 2： operator= 实际上是 const 故意的：**它的意图是创建一个新的赋值语句对象。

**例子：**

```
Block b; // Represents a sequence of commands.
Statement var1, var2; // Represent some variables.
...
b.append(var1 = var2); 
```

预期：b 包括命令 var1 = var2;

观察到：b 包括 var1；

**已解决：**问题是因为我使用的是派生类而不是使用其默认运算符 = 的语句。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T23:10:11.143

除非你声明一个，否则一个类总是有一个带有签名的隐式声明的复制赋值运算符：

```
Statement& operator=(const Statement&) 
```

请注意，它*不是*const，因此在分配给非 const 对象时是首选，因为您的赋值运算符是 const。[**编辑**：我的错误，`const`赋值运算符抑制了隐含的，所以`const`应该使用非常规限定的赋值运算符。]

（您希望如何分配给即修改，一个 const 对象？）

（注意更准确地说，`Statement& operator=(Signature&)`如果子对象声明具有该签名的赋值运算符，则隐式声明的赋值运算符可能具有签名，但在您的示例中并非如此。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:07:56.423

您的代码很好（它适用于[g++-4.5.1](http://ideone.com/HS0ZE)、[g++-4.3.4](http://ideone.com/6TNbV)、 Clang 和 VS2010）。如果它不起作用，那么你的编译器一定有问题，或者一定有一些你没有告诉我们的东西。

# birt - 如何在 BIRT IServer 中添加数据源

> ID：11006082
> 
> 赞同：1
> 
> 时间：2012-06-12T23:02:08.067
> 
> 标签：birt, actuate

我已经下载了 Actuates iServer 的试用版。我想尝试使用“BIRT Studio”设计器。

但是我找不到如何设置数据源以连接到所需的数据库。

注意我已经使用了 Eclipse BIRT 报告设计器并创建了数据源，但它在 BIRT IServer 应用程序中我找不到在哪里做。

我所能看到的只是大量的示例报告，并且无法在我的数据库上创建报告......

我敢肯定它一定很容易，但我就是找不到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:12:55.773

BIRT Studio 需要现有的信息对象或数据对象才能创建报告。这两者都可以在 BIRT Designer Professional 中创建，然后迁移到 iServer。

# objective-c - 在 Xcode 中使用 Storyboard，如何在 iOS 中处理海量 Storyboard

> ID：11006090
> 
> 赞同：4
> 
> 时间：2012-06-12T23:03:25.780
> 
> 标签：objective-c, xcode, storyboard

我一直在使用故事板制作应用程序，目前有很多 segues 和几个组件。当我尝试在情节提要中做任何事情时，这会导致大量延迟。有没有办法在故事板中隐藏组件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:35:06.267

+1，用于改进 Xcode 的潜在功能。现在，您无法隐藏这些视图（我不知道）。但我建议你，

*   隐藏不需要的调试区域。
*   使用 segue 时隐藏文档大纲。

### 为什么？

我认为，只要您进行更改，系统就不必重新绘制那些不需要的视图和长文档大纲。大概这样会不那么卡顿（我不认为有这样的词）！

* * *

# 解决方法

将你的 segue 划分为不同的元 segue，然后你可以从你的 main segue 中调用这些 segue。这样，您不必将每个连接放在一个文件上，而是将其压缩！

在这里，我们得到它的文档！现在您可以通过不同的文件获取故事板，然后轻松地使用 UIViewController 启动。然后，您可以使用旧方法在不同的 ViewController 之间进行切换。

UIStoryboard 的 Apple 文档

# 演示应用程序。

为了实现这一点，我制作了一个快速演示应用程序，它将帮助任何未来的访问者。

[https://github.com/Krutarth/LargeStoryboardManagement](https://github.com/Krutarth/LargeStoryboardManagement)

* * *

### 视觉上是这样的，

![在此处输入图像描述](../Images/d77e29a96c50ae188284dea973e4750a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T10:13:55.407

您可以将一个巨大的故事板拆分为多个小故事板。选择要移动到较小情节提要的视图控制器，然后

在顶部菜单中，单击 Editor -> Refactor to Storyboard

使用所需的名称保存新的故事板。XCode 将自动生成从您的大故事板到这个新创建的小故事板的所有必需的故事板链接。

# mysql - 将时间数据存储为 Int 还是 Timestamp 更好？

> ID：11006091
> 
> 赞同：-1
> 
> 时间：2012-06-12T23:03:26.113
> 
> 标签：mysql, sql, time

使用 MySQL 时，我应该将时间数据存储为 Int，它是自 1970 年 1 月 1 日 UTC 午夜以来的毫秒数，还是数据库中的 Timestamp。

我知道两者都有优势，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:05:03.397

从您的 PHP 代码的角度来看，不能肯定地说，但是以 MySQL 日期时间格式存储它会打开所有 MySQL 日期/时间函数，而无需处理首先使用 FROM_UNIXTIME 进行转换。此外，时间戳有 2038 年的限制 - 请参阅[为什么时间戳有 2038 年的限制？](https://stackoverflow.com/questions/5879173/why-do-timestamps-have-a-limit-to-2038)

正如评论所说，您*可以*转换任何一种方式，因此问题在于您希望在哪里最方便 - 在您的 SQL 语句或 PHP 代码中。

恕我直言，时间/日期*不仅仅是*一个数字——它们在我们使用它们时有特殊目的，所以将它们存储为一个数字会限制你自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:39:34.750

在 MySQL 中使用时间戳时，还有一些其他的事情需要考虑。

您（不是，请参阅下面的编辑）只允许数据库中每个表有一个时间戳列

您可以对时间戳列做的一件很酷的事情是，您可以在更新 CURRENT_TIMESTAMP 时使用默认的 CURRENT_TIMESTAMP（同样您只能得到一个可以执行此操作的列）。

除此以外以及已经提到的其他内容，我认为这是使用这些列的唯一动机。

编辑：一张表中可以有多个时间戳列。但是，每个表只能有一个 DEFAULT CURRENT_TIMESTAMP 时间戳。请注意，如果您向表中添加列：

`ALTER TABLE table_name ADD COLUMN col_name TIMESTAMP`

并且该表中没有另一个时间戳列，它隐式地将其添加到定义中。至少在 MySQL 5.0.92 上。请参阅下面的讨论。

# html - 居中对齐 Google 图表

> ID：11006096
> 
> 赞同：14
> 
> 时间：2012-06-12T23:04:13.703
> 
> 标签：html, css, positioning, google-visualization

我正在尝试将我的谷歌图表居中对齐，但没有成功。我玩过填充物将其移动到中心，但我不想坐在那里长时间玩萤火虫并找出正确的位置。有没有更简单的比如对齐文本`text-align: center`。显然它不适用于谷歌图表。（我对这一切都很陌生）

```
var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));

...some code ...

    <div id='chart_div' style='width: 900px; height: 400px;'></div> 
```

虽然我这样做了，`padding-left: 140px`但有没有更好的方法`align: center`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-12T23:08:16.167

给`chart_div`: `display: block`和`margin: 0 auto;`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T19:32:06.570

你也可以这样做`<div id='chart_div' align='center'>`这对我有用，虽然现在我的图表悬停功能不起作用。还有人遇到这个问题吗？我说的是当您将鼠标悬停在图表上的某个点上时。它通常显示诸如 Jan Sales 440 之类的点。有人知道解决方法吗？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-12T12:33:34.733

我在使用谷歌仪表时遇到了同样的问题。检查生成的代码，我意识到里面的下一个东西`<div id='chart_div'>`是一个边距 0 设置为内联样式的表格。

因此，为了覆盖它，我使用了以下 css：

```
div.chart_div table {
    width: auto;
    margin: 0 auto !important;
} 
```

这奏效了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-08-23T23:46:41.350

已接受的答案已损坏；你必须使用*display: inline-block*来居中对齐你的图表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T23:08:19.273

由于是固定的，请`width`尝试设置`margin-left`和。假设位置是相对的，它应该可以工作。`margin-right``auto`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-13T16:28:42.277

这些答案中的任何一个都对我不起作用，所以我这样做了：

```
<div class="chart_box">
  <div id="chart_div" style='width: 900px; height: 400px;'></div>
</div>

.chart_box {
  width: 900px;
  margin: 0 auto;
} 
```

您需要为chart_div 和chart_box 使用相同的宽度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-27T00:49:58.500

将*chart_div*设置为以下属性：

```
#chart_div{
  display: inline-block;
  margin: 0 auto;
}
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-15T05:57:01.637

注意：当你移除侧边菜单（“legend: 'none'”）时，宽度应该改变。

这主要发生在您使用“图例：'none'”时，因为它留下了用于容纳该菜单的侧面空间，而不是自动调整宽度。您需要重新设置宽度并缩小它，以操纵其对齐方式：

```
var options = {
          title: 'center alignment',
          width:  350, 
          height: 350,
          legend: 'none'
        }; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-19T14:48:37.243

我在这里结合了几个答案，如下：

创建一个 CSS 类：

```
.customChartStyle{
    border:1px solid #eee;
    text-align:center !important;
} 
```

并通过将以下内容添加到我的 table.draw() 调用中，将其添加到表格的单元格中：

```
'allowHtml': true, 'cssClassNames': {'tableCell': 'customChartStyle'}} 
```

我是谷歌图表的新手，但对我来说关键是添加 !important 到文本对齐样式（感谢thanassis）。对于我的情况，我需要边框样式，因为覆盖 tableCell 样式会删除它。此外，我更喜欢定义类并让图表 api 应用它，而不是覆盖 api 生成的样式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-03T22:01:10.583

订阅`ready`事件以使用 JavaScript 修改 CSS。像下面这样的东西可以解决问题。

```
google.charts.load('current', {
  'packages': ['gauge']
});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {

  var data = google.visualization.arrayToDataTable([
    ['Label', 'Value'],
    ['Memory', 80],
    ['CPU', 55],
    ['Network', 68]
  ]);

  var guageOptions = {
    width: 400,
    height: 120,
    redFrom: 90,
    redTo: 100,
    yellowFrom: 75,
    yellowTo: 90,
    minorTicks: 5
  };

  var guage = new google.visualization.Gauge(document.getElementById('my-div'));

  // HERE'S HOW TO SUBSCRIBE TO THE EVENT
  google.visualization.events.addListener(guage, 'ready', resetTableStyle);

  guage.draw(data, guageOptions);

  // HERE'S THE JAVASCRIPT TO SET YOUR CSS
  // NOTE TOGGLING A CSS CLASS HERE IS PROBABLY CLEANEST
  function resetTableStyle(){
    var myDiv = document.getElementById('my-div');
    var myTable = myDiv.getElementsByTagName('table')[0];
    myTable.style.margin = 'auto';
  } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-22T05:26:05.050

下面的代码对我有用：

```
width:fit-content;
margin:0 auto; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-23T09:10:14.723

通过为我的 div 实现一个类，它现在可以居中。

**HTML**

```
<div id="chart_div2" class="chart_hum"></div> 
```

**CSS**

```
.chart_hum {
    margin: 0 auto;
    display: inline-block;
} 
```

# winapi - 使用 DiskVolumeInfo（集群故障转移 API）

> ID：11006099
> 
> 赞同：2
> 
> 时间：2012-06-12T23:04:39.527
> 
> 标签：winapi, windows-server-2008, failovercluster

我找到了这个`DiskVolumeInfo`属性——我想用它来获取集群设置中的一些磁盘信息。

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb309235(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb309235(v=vs.85).aspx)

问题是我不知道获取这些数据需要什么技术。这与函数/方法引用的标准 C/C++/C#/VB 格式不同。

**问题：如何获取 DiskVolumeInfo 数据？**

理想情况下，我可以将二进制输出直接写入文件，比如 data.bin。

任何想法都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:30:03.180

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369638%28v=vs.85%29.aspx)描述了获取对象属性的过程。

看起来您需要[`ClusterResourceControl`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369016%28v=vs.85%29.aspx)使用物理磁盘资源和[`CLUSCTL_RESOURCE_GET_PRIVATE_PROPERTIES`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367476%28v=vs.85%29.aspx)控制代码的句柄来调用该函数。然后，您可以使用[`ResUtilFindBinaryProperty`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372338%28v=vs.85%29.aspx)从返回的属性列表中提取 DiskVolumeInfo 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-14T01:33:45.410

对于任何仍然感兴趣的人：

如此处给出[的](https://social.technet.microsoft.com/Forums/windowsserver/en-US/ab830d46-096d-4553-abda-2a8ffcdef9ce/how-to-get-the-volume-guid-for-the-cluster-volume?forum=winserverClustering)CLUSCTL_RESOURCE_STORAGE_GET_DISK_INFO_EX 是执行此操作的更好方法。

# c# - 部署时如何解决我的应用程序中的 TypeInitialization 异常？

> ID：11006100
> 
> 赞同：0
> 
> 时间：2012-06-12T23:04:43.240
> 
> 标签：c#, .net, deployment, event-log, typeinitializeexception

我的应用程序在我的机器上运行良好（当然/著名的遗言）。但是，将其部署到网络上的另一台机器时，它甚至不会启动。我在那台机器上运行了我的 EventLog 实用程序，它告诉我：

```
Type:Error
Source: .NET Runtime
Time Generated: 06/12/2012 15:35:12
Message: Application: duckbilledPlatypus.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.TypeInitialization
Exception
Stack:
   at duckbilledPlatypus.PlatypusMainForm..ctor()
at duckbilledPlatypus.Program.Main() 
```

所以问题出在我的主窗体的构造函数中，显然……我承认，这有点“忙”：

```
InitializeComponent();

foreach (string arg in Environment.GetCommandLineArgs())
{
    if (arg == "-DEBUG")
    {
        InDebugMode = true;
        break;
    }
}

SuspendLayout();
tsch = new ToolStripControlHost(dateTimePickerScheduleDate);
toolStripPlatypusMain.Items.Add(tsch);

CreateTableLayoutPanelAndChildren();

LimitPlatypusIDTextBoxesToOneChar();
ShareEventsAmongDynamicTextBoxes();

SetAllPlatypusDataControlsReadOnly();
ResumeLayout(); 
```

这看起来有问题吗？（除了 ToolStripControlHost 之外，这些都是非常标准的东西）。

现在关于框架版本：事件日志报告用于创建我的应用程序的框架版本，还是安装在尝试运行应用程序的机器上的框架版本？如果前者，而后者没有安装该框架，那是个问题，对吧？

因此，如果这可能是问题所在，我如何确定该机器上安装了哪个版本的 .NET 运行时？

## 更新

我不知道为什么会这样，但是只有当我右键单击并选择 Run As（并以我自己的身份运行，因为我没有该机器上的“更多特殊”权限）。当我这样做时，我得到“无法找到运行此应用程序的运行时版本”。

如果我只是 2-click 应用程序，它会在没有呜咽声的情况下死掉（没有错误消息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:08:40.530

观看

> 查看 %WINDIR%\Microsoft.NET\Framework 目录

确定安装了哪些版本的 .NET。

[http://msdn.microsoft.com/en-us/library/y549e41e.aspx](http://msdn.microsoft.com/en-us/library/y549e41e.aspx)

尝试在有问题的机器上运行 Fusion Log Viewer。它将提供有关绑定失败的详细信息。

[http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.100).aspx)

确保**以管理员身份**运行它。如果你不这样做，它会默默地失败。

**更新**

根据您的错误“无法找到运行此应用程序的运行时版本。”，我建议您没有在应用程序所针对的盒子上安装相同版本的 .NET。您是否使用上述步骤验证了已安装的版本？

另见

[.Net 框架 - “无法找到运行此应用程序的运行时版本”](https://stackoverflow.com/questions/7335133/net-framework-unable-to-find-a-version-of-the-runtime-to-run-this-applicatio)

# php - CakePHP 和 MVC – 查找与 id 关联的“名称”时可能会出现多余的 SQL 查询

> ID：11006103
> 
> 赞同：0
> 
> 时间：2012-06-12T23:04:55.423
> 
> 标签：php, cakephp, join, has-and-belongs-to-many

我可能已经在某个地方谋杀了 MVC 的整个概念，但我目前的情况是：

我`participants`在`events`它们之间有一个 HABTM 关系（带有一个关联的字段`money_raised`）。我有一个控制器，它成功地在预先存在的事件和参与者之间创建了新的 HABTM 关系，它完全按照我的意愿工作。

创建新关系时，我希望将 flash 设置为包含刚刚添加的参与者的名称。实际添加是使用 ids 完成的，所以我使用了以下代码：

```
public function addParticipantToEvent($id = null) {
    $this->set('eventId', $id);

    if ($this->request->is('post')) {
        if ($this->EventsParticipant->save($this->request->data)) {
            $participant_id = $this->request->data['EventsParticipant']['participant_id'];
            $money_raised = $this->request->data['EventsParticipant']['money_raised'];
            $participant_array = $this->EventsParticipant->Participant->findById($participant_id);
            $participant_name = $participant_array['Participant']['name'];
            $this->Session->setFlash('New participant successfully added: ' . $participant_name . ' (' . $participant_id . ') ' . '&mdash; &pound;' . $money_raised);
        } else {
            $this->Session->setFlash('Unable to create your event-participant link.');
        }
    }
} 
```

这可行，但会生成以下 SQL 查询：

```
INSERT INTO `cakephptest`.`cakephptest_events_participants` (`event_id`, `participant_id`, `money_raised`) VALUES (78, 'crsid01', 1024)     1   1   0

SELECT `Participant`.`id`, `Participant`.`name`, `Participant`.`college` FROM `cakephptest`.`cakephptest_participants` AS `Participant` WHERE `Participant`.`id` = 'crsid01' LIMIT 1        1   1   0

SELECT `Event`.`id`, `Event`.`title`, `Event`.`date`, `EventsParticipant`.`id`, `EventsParticipant`.`event_id`, `EventsParticipant`.`participant_id`, `EventsParticipant`.`money_raised` FROM `cakephptest`.`cakephptest_events` AS `Event` JOIN `cakephptest`.`cakephptest_events_participants` AS `EventsParticipant` ON (`EventsParticipant`.`participant_id` = 'crsid01' AND `EventsParticipant`.`event_id` = `Event`.`id`) 
```

最后一个似乎是多余的（而且相当昂贵），因为第二个应该给我我需要的所有东西，但是删除`$this->EventsParticipant->Participant->findById($participant_id)`第二个和第三个查询（这对我来说有点道理，但不完全）。

我能做些什么来弥补这种冗余（如果我确实没有错，那就是冗余）？请告诉我我是否已经对这些事情应该如何工作进行了完整的哈希处理——我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:42:14.343

这可能是由于默认的[递归](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)设置拉动了关系。您可以通过`public $recursive = -1;`在模型上进行设置来解决此问题（注意这会影响所有查找调用）。或者，为此查找暂时禁用它：

```
$this->EventsParticipant->Participant->recursive = -1;
$this->EventsParticipant->Participant->findById($participant_id); 
```

我*总是*建议`public $recursive = -1;`在你的 AppModel 上设置并使用[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)在你需要的地方引入相关数据。

# php - WordPress；显示帖子中的所有图像及其相应的标题

> ID：11006111
> 
> 赞同：1
> 
> 时间：2012-06-12T23:05:55.040
> 
> 标签：php, wordpress

从任何特定的帖子中，我试图显示所有图像及其相应的标题，并将它们一个接一个地排列，例如：

```
-------------
|           |
|    Img1   |
|           |
-------------
  Caption 1    

-------------
|           |
|    Img2   |
|           |
-------------
  Caption 2        

-------------
|           |
|    Img3   |
|           |
-------------
  Caption 3 
```

这就是我想要实现的。

编码：

```
<?php

$attachments = get_children( array(
'post_parent' => get_the_ID(), 
'order' => 'ASC', 
'post_mime_type' =>'image') );

$args = array(
'post_parent' => get_the_ID(),  
        'order' => 'ASC',
        'post_type' => 'attachment' ); 

$thumb_images = get_posts($args);

foreach ($attachments as $attachment_id => $attachment)  

foreach ($thumb_images as $thumb_image) 

{
{
  echo "<div class='image'>";
  echo wp_get_attachment_image( $attachment_id, 'full' );
  echo "</div>";
  echo "<div class='caption'>";  
  echo $thumb_image->post_excerpt;
  echo "</div>";
}
}

?> 
```

如果有 3 张图片及其对应的标题，则此代码显示每张图片 3 次，并且每张图片都有 3 个不同的标题。那是9张图片和9个标题。至少标题是有序的，但图像重复。

```
-------------
|           |
|    Img1   |
|           |
-------------
 Caption 1    

-------------
|           |
|    Img1   |
|           |
-------------
 Caption 2        

-------------
|           |
|    Img1   |
|           |
-------------
 Caption 3

-------------
|           |
|    Img2   |
|           |
-------------
  Caption 1    

-------------
|           |
|    Img2   |
|           |
-------------
  Caption 2        

-------------
|           |
|    Img2   |
|           |
-------------
  Caption 3            

  ETC 
```

如果代码更新为：

```
 <?php

$attachments = get_children( array(
'post_parent' => get_the_ID(), 
'order' => 'ASC', 
'post_mime_type' =>'image') );

$args = array(
'post_parent' => get_the_ID(),  
        'order' => 'ASC',
        'post_type' => 'attachment' ); 

$thumb_images = get_posts($args);

foreach ($attachments as $attachment_id => $attachment)   {

foreach ($thumb_images as $thumb_image)     {}  

  echo "<div class='image'>";
  echo wp_get_attachment_image( $attachment_id, 'full' );
  echo "</div>";
  echo "<div class='caption'>";  
  echo $thumb_image->post_excerpt;
  echo "</div>";

}

?> 
```

它不重复显示图像，但标题属于加载的最后一张图像，并重复与帖子相关联的图像总数。

```
-------------
|           |
|    Img1   |
|           |
-------------
  Caption 3    

-------------
|           |
|    Img2   |
|           |
-------------
  Caption 3        

-------------
|           |
|    Img3   |
|           |
-------------
  Caption 3 
```

关于如何正确编写它的任何想法，以便您一个接一个地以 x 倍的图像数量和 x 倍的标题数量结束？没有重复。

最好的祝福。

劳拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:19:40.103

假设它`$attachments`的大小与`$thumb_images`：

```
$i = 0;
foreach ($attachments as $attachment_id => $attachment) {
    echo "<div class='image'>";
    echo wp_get_attachment_image($attachment_id, 'full');
    echo "</div>";
    echo "<div class='caption'>";  
    echo $thumb_images[$i]->post_excerpt;
    echo "</div>";
    $i++;
} 
```

为了更好地理解`$attachments`and`$thumb_images`中的内容，请使用以下代码片段进行调试：

```
echo "<pre>";
echo var_dump($attachments);
echo var_dump($thumb_images);
echo "</pre>"; 
```

你会发现那`$thumb_images`是一个数组。

**问：什么是逻辑`$i++`？**

`$i++`是[后增量运算符](http://www.php.net/manual/en/language.operators.increment.php)。

`$i++`确实是 的简写`$i = $i + 1`，因此对于循环的每次迭代，`$i`增量的值。最初，`$i = 0`. 一旦`$i++`被调用，`$i = 1`. 如果`$i++`在另一个迭代中再次调用，`$i = 2`依此类推。

除了使用`foreach`循环之外，您还可以使用`for`循环来迭代数组。有关`for`循环的示例（以及使用该`$i++`概念的相应示例），请参阅[PHP 的`for`](http://php.net/manual/en/control-structures.for.php).

# .net - 在任何浏览器中将 URL 参数传递给 ClickOnce 应用程序

> ID：11006112
> 
> 赞同：13
> 
> 时间：2012-06-12T23:05:55.853
> 
> 标签：.net, url, deployment, clickonce

我有一个 ClickOnce 应用程序，我需要能够将 URL 参数传递给它。例如，用户可以单击“http://foo.bar/MyApp.application?flavor=grape”形式的 URL，这将启动我的应用程序，并将“?flavor=grape”查询传递给它。

不幸的是，看起来这只适用于开箱即用的 IE。在 Firefox 和 Chrome 上，用户必须安装附加组件才能使 ClickOnce 部署工作。我的用户在限制性的公司环境中工作，并且不允许安装任何附加组件或其他任何东西（不过，ClickOnce 确实适用于他们）。那么，我该怎么办？

我能想到的一种技巧是将我的应用程序注册为一些足够独特的文件扩展名的文件处理程序，例如 ".bugmaster" 。然后——或者我的理论是这样的——我可以让我的网络服务器生成一个名为“flavor_grape.bugmaster”的文件；用户将单击指向该文件的 URL，然后选择“运行”而不是“保存”，这将启动我的应用程序，然后我的应用程序将解析 URL 参数的文件名。不幸的是，这种方法也不起作用。当从本地文件系统打开“flavor_grape.bugmaster”文件时，它工作得非常好，但是，由于某种原因，当用户尝试从浏览器打开文件时，这不起作用。

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T23:34:58.627

ClickOnce 有一个漂亮的小技巧，您实际上可以将参数直接编码到 setup.exe 使用的 URL 中。例如，要创建一个包含“flavor=grape”参数的 setup.exe，您可以从命令行运行以下命令：

```
copy setup.exe setup-for-grape.exe
setup.exe -url="http://foo.bar/MyApp.application?flavor=grape" /dest=setup-for-grape.exe 
```

这使用未记录的 /dest 标志将结果输出到 setup-for-grape.exe 文件，而不是修改原始 setup.exe。完成此操作后，setup-for-grape.exe 将指向您的 URL*并*包含您的 flavor=grape 参数。请注意，如果您使用签名，则需要对 setup.exe 的*未签名*副本执行此操作，然后再对其进行签名，因为它会破坏签名。

如果可能的参数选择数量相当有限，您可以为它们全部生成 setup.exe 并从您的网站链接到它们。

另一方面，如果有无限数量的选择，您可以设置一个 Web 服务，该服务接受一些参数，生成一个 setup.exe，其中编码了所需的参数，然后将其返回给客户端。我已经使用这种方法为连接到特定服务器的客户端生成 setup.exe - 客户端安装 URL 中编码了服务器连接信息，因此当安装客户端时，它会自动知道要连接到哪个服务器。

当然，如果您不想使用 setup.exe，或者如果您的限制性公司环境不允许它，那么所有这些都会直接消失。但希望你会发现它很有用，或者至少提供了丰富的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-10T07:49:45.320

接受的答案在过去可能有效，但`/dest`现在使用那个未记录的参数失败了：*无法修改“grape_setup.exe”。该文件可能是只读的或锁定的。*

幸运的是，`/dest`当我在 VS 2017 和现在在 VS 2019 中尝试时没有必要，因此可以简单地忽略该选项。

## 网址设置步骤：

1.  制作可执行文件的副本，因为下一个命令会更改文件：

    ```
     COPY setup.exe grape_setup.exe 
    ```

2.  像这样替换 URL：

    ```
     grape_setup.exe -url="http://foo.bar/MyApp.application?flavor=grape#" 
    ```

这会`grape_setup.exe`发生变化，以便后续运行启动 ClickOnce 应用程序，就好像它是从指定的 URL 打开的一样。

但是等等，最后那是什么`#`？

出于某种原因，我还没有弄清楚， using给了我一个可执行文件，它在 URL 的末尾`-url`有一个额外的。`/MyApp.application`用于分隔此字符串，因此`#`它不会被视为最后一个 URL 参数值的一部分。Using`#`将其放在[片段标识符](https://en.wikipedia.org/wiki/Fragment_identifier)中，但替代方法是使用`&junk=`or`&_=`或 just `&`。

## 退出可执行文件

使用`-url`修改可执行文件并删除任何 Authenticode 签名。

不幸的是，它以一种`signtool.exe`在尝试辞职时中断的方式将其删除：

```
SignTool Error: SignedCode::Sign returned error: 0x800700C1
        %1 is not a valid Win32 application. 
```

[这篇博客文章](https://markcz.wordpress.com/2013/01/26/signtool-exe-returned-error-0x800700c1/)以及一个[名为的工具*`delcert`*](https://forum.xda-developers.com/showthread.php?p=2508061#post2508061)揭示了为什么会发生这种情况。

这是输出`delcert`：

```
ImageRemoveCertificate failed with error 0x00000057
This happens when there's a listing in IMAGE_DIRECTORY_SECURITY
in the PE's header, but the actual Authenticode signature has been stripped.
Let's fix that ...
Setting both fields to zero ...
Succeeded. 
```

这表明`-url`以非干净的方式删除签名，并且`delcert`可以为我们解决这个问题。

鉴于此问题，似乎有三个选项可用于获取带有嵌入式 URL 参数的签名可执行文件：

*   在发布之前取消选中“签署 ClickOnce 清单”，发布，然后用于`-url`设置 URL。最后`signtool.exe`用来签名。
*   像往常一样发布，`-url`用于设置 URL。跟进`delcert`以清理损坏的签名。最后`signtool.exe`用来签名。
*   照常发布。然后使用`delcert`删除签名。`-url`用来设置网址，最后用`signtool.exe`.

这三种方法都可能创建相同的可执行文件。第一个需要更改为`.csproj`. 第二个和第三个依赖第三方软件[*`delcert`*](https://forum.xda-developers.com/showthread.php?p=2508061#post2508061)。

这是一个实际的例子：

1.  将可执行文件复制为`grape_setup.exe`. （在第一个例子中描述）

2.  删除 Authenticode 签名：

    ```
    delcert.exe grape_setup.exe 
    ```

3.  替换 URL 以设置我们的参数。（在第一个例子中描述）

4.  退出新创建的可执行文件：

    ```
    signtool.exe sign /sha1 XYZ /t "http://..." grape_setup.exe 
    ```

的值`/sha1`在`<ManifestCertificateThumbprint>`项目`.csproj`文件中。

`/t`is`<ManifestTimestampUrl>`但`/t`如果不需要时间戳，则可以省略该值。

## 让构建过程留下一个未签名的引导程序

我找到了另一种获得未签名的方法，`setup.exe`这减轻了我必须使用`delcert`.

通过将此添加到我的文件中，构建过程会在as`.csproj`下留下未签名的副本。`bin\Release\app.publish\``unsigned_setup.exe`

```
<Target Name="UnsignedBootstrapper" AfterTargets="_DeploymentGenerateBootstrapper" BeforeTargets="_DeploymentSignClickOnceDeployment">
  <Copy SourceFiles="$(PublishDir)\setup.exe" DestinationFiles="$(PublishDir)\unsigned_setup.exe" />
</Target> 
```

`_DeploymentGenerateBootstrapper`目标生成引导程序并`_DeploymentSignClickOnceDeployment`对其进行签名。上述目标在两者之间运行以制作可执行文件的副本。

这在 VS 2019 中有效，但目标名称在其他版本中可能有所不同。`Options`在> `Project and Solutions`>下将详细程度设置为“诊断”后，我通过查看构建输出发现了它们`Build and Run`。

# java - 获取 Java 类中泛型字段的类型

> ID：11006113
> 
> 赞同：0
> 
> 时间：2012-06-12T23:05:56.293
> 
> 标签：java, generics, reflection

```
class A<Type>{

    private Type id;

}

class B extends A<String>{

}

B b = new B();
Field idField = //reflection code to get id field 
```

如何从 "idField" 中获取 idField 的确切类型，即 String 而不是 Type ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:20:58.403

我不确定您要达到的目标。但我猜你想确定字段“id”的具体类型。

```
 public class A<T>{
    public T id;
    public Class<T> idType;

    public A(){
        idType = (Class<T>)((ParameterizedType)this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    }
}

public class B extends A<String>{

}

public static void main(String[] args) throws Exception {
    B b = new B();
    System.out.println(b.idType);
} 
```

上述代码片段中的最后一个 sysout 语句将打印“java.lang.String”。

这是在基类中编写通用功能时非常常用的技术。

# rest - 当前日期/时间到 RFC 2822 日期函数与 vb/经典 asp

> ID：11006118
> 
> 赞同：0
> 
> 时间：2012-06-12T23:07:07.293
> 
> 标签：rest, asp-classic, amazon-s3, rfc2822

我正在尝试编写一个脚本来将数据推送到亚马逊 s3 存储桶，我需要生成我认为是 RFC 2822 日期以发送到标头请求中。

日期看起来像这样“2012 年 6 月 12 日星期二 23:41:58 +0000”

我只需要一个函数来生成正确的时间格式，因为我收到以下错误。

`RequestTimeTooSkewed The difference between the request time and the current time is too large.`

这是我目前所拥有的......

```
<%
sTimeStamp = "Tue, 12 June 2012 23:41:58 +00002012-06-12T22:45:47Z"
sAWSAccessKeyId = "AESDQWDQWD"
sSignature=Encrypt("SecretQWEQWEQWEQWEYAYAY")

AWSServiceUrl = "https://s3.amazonaws.com/"
Set oXMLHTTP = Server.CreateObject("MSXML2.ServerXMLHTTP")
oXMLHTTP.open "GET", AWSServiceUrl, False
oXMLHTTP.setRequestHeader "Authorization", "AWS " & sAWSAccessKeyId & ":" & sSignature
oXMLHTTP.setRequestHeader "x-amz-date", sTimeStamp
on error resume next
oXMLHTTP.send sRequest
Response.Write oXMLHTTP.responseText
%> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:33:10.600

最简单的方法是让 JScript 提供帮助：

```
<script runat="server" language="javascript">
    function JSNow() { return new Date(); }
</script> 
```

现在您可以通过以下方式获取所需时间的字符串格式：

```
Dim sTimeStamp: sTimeStamp = JSNow().toString() 
```

# ios - IOS：验证字符串是否为空字符串

> ID：11006121
> 
> 赞同：5
> 
> 时间：2012-06-12T23:07:22.053
> 
> 标签：ios, nsstring

有没有一种方法可以验证 NSString 是否没有字符？不带字符的字符串示例可以是：

@"" 或@" " 或@"\n " 或@"\n\n "，我想将这些字符串视为空字符串并打印一个nslog，告诉我这些是空的，我应该使用什么样的控件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T23:15:41.483

您可以使用此测试：

```
if ([[myString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] length] == 0) {
    // The string is empty
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:12:05.513

您可以遍历字符串中的每个字符并检查它是空格（“”）还是换行符（“\n”）。如果不是，则返回 false。否则，如果您搜索整个字符串并且没有返回 false，则它是“空的”。

像这样的东西：

```
NSString* myStr = @"A STRING";
for(int i = 0; i < [myStr length]; i++)
{
    if(!(([myStr characterAtIndex:i] == @' ') || ([myStr characterAtIndex:i] == @'\n')))
    {
        return false;
    }
} 
```

# osx-lion - 将 Lion 安装到配备 core 2 双核芯片的 iMac 4,1

> ID：11006133
> 
> 赞同：-1
> 
> 时间：2012-06-12T23:09:04.867
> 
> 标签：osx-lion

为了升级 XCode 以涵盖 ios 5.0.2 我正在尝试将我的 iMac 4,1 Snow Leopard 升级到 OS Lion - 我最初收到关于我的处理器类型错误的消息，所以我将它升级到了 core 2 duo。现在，当返回 App Store 购买 Lion 时，这反映在“关于此 Mac”中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:13:53.950

这是一个与 StackOverflow 无关的问题。在 Apple 的论坛上尝试，他们可能遇到了同样的问题，或者尝试使用 Google，或者如果错误消息为 #13 ，请检查[此](https://apple.stackexchange.com/questions/42241/there-was-an-error-in-the-mac-app-store-please-try-again-later-13)

# javascript - HTML-如何将当前时间插入 web 表（）？

> ID：11006140
> 
> 赞同：2
> 
> 时间：2012-06-12T23:10:06.990
> 
> 标签：javascript, html

我知道如何获得当前日期。但我希望它使用 document.write 函数在标记后显示（嗯。这是需求:)/）

我正在`<td>document.write(day)<td>`用 form 和 /form 标签创建的表中尝试“”，day 是我在其中定义的变量`<script>`，它具有正确的值；

但它没有显示正确的信息。有人可以告诉我该怎么做吗？（必须使用 document.write 函数，不要使用此函数创建表格标签，如`<td>`or `<tr>`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:13:32.043

您需要将 javascript 包装在`<script>`标签中。

```
<td><script>document.write(day);</script><td> 
```

或者，您可以为 td 分配一个 id，然后稍后再引用它。

```
<td id="writeDay"></td>
...
<script>document.getElementById("writeDay").innerHTML = day;</script> 
```

或者你甚至可以制作整个元素，然后在你想要的时候放置它

```
<td id="writeDay"></td>
<script>
 var dayElement = document.createElement("div");
 dayElement.innerHTML = day;
 function appendDay(target){
  document.getElementById(target).appendChild(dayElement);
 }
</script>
...
<script>appendDay("writeDay");</script> 
```

# java - appengine-mapper 库和 1.6.6 appengine-api-labs.jar 冲突

> ID：11006141
> 
> 赞同：0
> 
> 时间：2012-06-12T23:10:08.243
> 
> 标签：java, google-app-engine, mapreduce

我正在尝试使用 java appengine mapreduce 库（此处：[http](http://code.google.com/p/appengine-mapreduce/) ://code.google.com/p/appengine-mapreduce/ ），但它似乎与 1.6 的实验室 jar 中的 mapreduce 的一半实现相冲突.6 应用引擎 SDK。

我只是在 Eclipse 中创建了一个新的 Web 应用程序项目，按照上面链接中的说明将 mapper.jar 添加到我的项目中，并测试我是否可以转到 localhost:8888/mapreduce/status。它抛出一个异常，因为它试图使用实验室 jar 中未完全实现的 mapreduce 功能。

如何强制 eclipse 使用 mapper.jar？我已经在构建路径中首先列出了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:20:51.380

您应该能够安全地删除`api-labs.jar`. 您正在看到与过早逃逸到野外的事物的冲突，因为缺少更好的词组。

对于那个很抱歉。

# xcode - 无法更改工作表上的文本标签

> ID：11006152
> 
> 赞同：1
> 
> 时间：2012-06-12T23:11:55.153
> 
> 标签：xcode, cocoa, nstextfield, cocoa-sheet

我创建了一个工作表，我想在程序进行数据处理时显示各种消息。工作表正确打开和关闭，工作表上有一个文本标签，它通过 IB 插座连接到我的主控制器（工作表的所有者）。

Nib 正确加载、正确打开和关闭，但静态文本标签永远不会更新。连接的 IBOutlet 是这样定义的：

```
IBOutlet id mySheetText; 
```

我用来尝试修改工作表上的文本的调用是这样的：

```
[mySheetText setStringValue:@"Some text message..."]; 
```

如果标签在主窗口中，这种格式可以正常工作，但如果标签在工作表上，则不执行任何操作。

IB 中的所有连接似乎都是正确的。我确定我遗漏了一些非常简单的东西，我猜这与工作表是与主窗口不同的“窗口”这一事实有关，但我似乎找不到任何东西在文档中为我指明正确的方向。

顺便说一下，这是我连接工作表的方式......

```
NSWindow *mySheet;

@property (assign) IBOutlet NSWindow *mySheet;
@synthesize mySheet; 
```

...并打开它：

```
if (!serverSyncSheet) {
    [NSBundle loadNibNamed:@"mySheetNibFile" owner:self];
}

[NSApp beginSheet: self.mySheet
   modalForWindow: [[NSApp delegate] mainWindow]
    modalDelegate: self
   didEndSelector: NULL
          contextInfo: NULL]; 
```

有任何想法吗？

*** 编辑 ***

好的，事实证明我是部分正确的。如果我尝试读取文本值，事实证明它正在将其设置为正确的文本，但工作表并未更新以显示更改。我怀疑我需要告诉窗口重绘......以前从未这样做过。回到文档，看看我能不能找到它。如果有人知道调用方法，请告诉我。：） 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:23:58.377

好吧，我的怀疑是正确的……这很简单。

我只需要重绘窗口：

```
[mySheet display]; 
```

嗬！:)

# iphone - 传递注释 Mapkit 的坐标

> ID：11006154
> 
> 赞同：0
> 
> 时间：2012-06-12T23:12:10.597
> 
> 标签：iphone, mapkit

在我的应用程序中，我有一组位置及其相关注释。我有一个单击它的按钮，我转到一个调用 URL Web 服务的方法来获取谷歌街景。

我的代码是：

```
- (NSString*)urlStreetview:(id<MKAnnotation>)annotation{

    CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:annotation.coordinate.latitude longitude:annotation.coordinate.longitude];

    NSLog(@"lat:%f",pinLocation.coordinate.latitude);
    NSLog(@"lon:%f",pinLocation.coordinate.longitude);

    NSString *lat_string = [[NSString alloc] initWithFormat:@"%f", pinLocation.coordinate.latitude];
    NSString *lon_string = [[NSString alloc] initWithFormat:@"%f", pinLocation.coordinate.longitude];

    NSString *url1 = [NSString stringWithFormat:@"http:myweb/streetview.php"];

    NSString *url2 =  [url1 stringByAppendingString: @"?lat="];
    NSString *url3 =  [url2 stringByAppendingString:lat_string];
    NSString *url4 =  [url3 stringByAppendingString:@"&lon="];
    NSString *url  =  [url4 stringByAppendingString:lon_string];

    NSLog(@"url:%@",url);
    return url;
} 
```

我编写了前面的方法来获得一个由注释的 LatLong 组成的 url。

我在注释针上有一个名为 PressMe 的按钮。当我推送它时，我想执行以前的方法，调用 url，但我不明白如何将选定的注释传递给 streetView 方法。

```
- (IBAction)PressMe:(id)sender
{
    UIViewController *webViewController = [[[UIViewController alloc] init] autorelease];
    UIWebView *uiWebView = [[[UIWebView alloc] initWithFrame: CGRectMake(0,0,320,480)] autorelease];

    [uiWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString: [self urlStreetview: ????]]]];      //HERE IS MY MY PROBLEM

    [webViewController.view addSubview: uiWebView];
    webViewController.title = @"web bar";
    [self.navigationController pushViewController:webViewController animated:YES];

    //[[self navigationController] pushViewController:thirdViewController animated:YES];
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:17:03.070

我将自己回答我的问题。我只是解决了我的问题，它工作得很好。该代码允许显示 web 视图，以便拥有注释地图套件注释的 steet View google 服务。显然，由于我是相对较新的 iphone 开发人员，如果有人想添加/建议/改进，欢迎他。

我的按钮实现：

```
- (IBAction)PressMe:(id)sender
{
    UIViewController *webViewController = [[[UIViewController alloc] init] autorelease];
    UIWebView *uiWebView = [[[UIWebView alloc] initWithFrame: CGRectMake(0,0,320,480)] autorelease];

    [uiWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString: self.urlStreetview]]];

    [webViewController.view addSubview: uiWebView];
    webViewController.title = @"web bar";
    [self.navigationController pushViewController:webViewController animated:YES];

    //[[self navigationController] pushViewController:thirdViewController animated:YES];
} 
```

使用此按钮，我将我的（以下）方法称为“urlStreetview”，并在选择注释的情况下组成一个字符串，以便获得一个带有适当 GET php 参数的完整 url。url 是我的（非常简单的）网络服务的方向，它允许调用谷歌 API 街景。

```
- (NSString*)urlStreetview{

    //there can only be one selected annotation so get the one at index 0
    id<MKAnnotation> selectedAnnotation = [_mapView.selectedAnnotations objectAtIndex:0];

    CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:selectedAnnotation.coordinate.latitude longitude:selectedAnnotation.coordinate.longitude]; 
```

//现在我选择了注释坐标，所以现在我可以将 urladdingo 复合到我的基本 url：http://myurl/streetview.php，GET 部分，我的意思是 lat lon 坐标：

```
 NSString *lat_string = [[NSString alloc] initWithFormat:@"%f", pinLocation.coordinate.latitude];
    NSString *lon_string = [[NSString alloc] initWithFormat:@"%f", pinLocation.coordinate.longitude];

    NSString *url1 = [NSString stringWithFormat:@"http://myurl/streetview.php"];

    NSString *url2 =  [url1 stringByAppendingString: @"?lat="];
    NSString *url3 =  [url2 stringByAppendingString:lat_string];
    NSString *url4 =  [url3 stringByAppendingString:@"&lon="];
    NSString *url  =  [url4 stringByAppendingString:lon_string];

    NSLog(@"url:%@",url);
    return url;
} 
```

我希望它可以有用！

# .net - 使用 LINQ2XML 过滤 xml

> ID：11006160
> 
> 赞同：0
> 
> 时间：2012-06-12T23:12:46.650
> 
> 标签：.net, linq

我是 LINQ2XML 的新手。我正在尝试过滤一个 xml 文件并获取另一个带有结果的 xml。我想按某些属性的值进行过滤。

xml看起来是这样的（缩略版，实际版本有更多的节点和属性）：

```
<Root>
    <Group Price="50">
       <Item Price="60"/>
       <Item Price="50"/>
       <Item Price="70"/>
    </Group>
    <Group Price="55">
       <Item Price="62"/>
       <Item Price="57"/>
       <Item Price="55"/>
    </Group>
    <Group Price="61">
       <Item Price="62"/>
       <Item Price="61"/>
       <Item Price="65"/>
    </Group>
    <!--More Group Nodes--> 
</Root> 
```

现在假设我想要价格低于 60 的节点。我想要得到的是：我已经删除了价格为 60、70 和 62 的节点。编辑：我想删除价格为 61 的组节点（它没有t 满足条件）。

```
<Root>
    <Group Price="50">
       <Item Price="50"/>
    </Group>
    <Group Price="55">
       <Item Price="57"/>
       <Item Price="55"/>
    </Group>
    <!--More Group Nodes--> 
</Root> 
```

或者也许有什么方法可以删除不满足条件的节点？感谢您的回答。

PS：我想知道这是否也可以使用 XPATH 来完成。我将其发布在另一个问题中：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:18:32.327

搜索要删除的节点，然后删除它们。

```
var filterPrice = 60M;
var removeMe =
    from item in doc.Descendants("Item")
    where (decimal)item.Attribute("Price") >= filterPrice
    select item;
removeMe.Remove(); 
```

或使用 XPath：

```
var filterPrice = 60M;
var xpath = String.Format("//Item[@Price>={0}]", filterPrice);
var removeMe = doc.XPathSelectElements(xpath);
removeMe.Remove(); 
```

结合起来也可以删除组：

```
var filterItemPrice = 60M;
var filterGroupPrice = 60M;
var removeGroups =
    from grp in doc.Descendants("Group")
    where (decimal)grp.Attribute("Price") >= filterGroupPrice
    select grp;
var removeItems =
    from item in doc.Descendants("Item")
    where (decimal)item.Attribute("Price") >= filterItemPrice
    select item;
var removeMe = removeItems.Concat(removeGroups); 
```

# mysql - MySQL 会为 LIKE 使用覆盖索引吗？

> ID：11006164
> 
> 赞同：1
> 
> 时间：2012-06-12T23:13:16.603
> 
> 标签：mysql, sql, performance

假设我有一个穷人的搜索引擎，我正在搜索一张产品表......

```
select
  category_id
from products
where
  description like '%blue%' 
```

我知道你一定在想什么。如果删除前导通配符，查询可以正确使用描述索引。**这不是我要问的。**

如果我有以下索引，查询性能会更好吗？

```
IX_description (description, category_id) 
```

我认为它可以只扫描索引而不是整个表，但这不是 EXPLAIN 告诉我的。如果我删除了前导通配符，EXPLAIN 中的“额外”字段告诉我我已经被覆盖了，但是如果我把它放回去，它不会。

我不应该在这两种情况下都被覆盖，因为我只访问 category_id 和 description，尽管使用 description 不同？

编辑：

我刚刚意识到，如果产品是多对一的 category_id，那么所写的这个查询实际上并没有太大的语义意义。所以有一个缺失的 DISTINCT，这使得索引正确

```
 IX_description (category_id, description) 
```

这实际上确实被覆盖了。但我仍然想知道为什么它没有像最初所说的那样被涵盖在场景中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:18:25.757

由于您在 like 查询的两端都使用通配符，因此 MySQL 通常没有必要使用索引。无论如何，进行全表扫描同样快。

但是......这里应该可以进行仅索引扫描，所以我想知道它是否没有使用它，因为表上有更新。或者仅仅是因为它可能是一个更糟糕的查询计划。

为感兴趣的人提供有关仅索引扫描的更多信息：http: [//mysqlha.blogspot.nl/2010/11/how-are-index-only-scans-implemented-in.html](http://mysqlha.blogspot.nl/2010/11/how-are-index-only-scans-implemented-in.html)

# javascript - 我的 python 代码 - 用于 javascript？

> ID：11006165
> 
> 赞同：0
> 
> 时间：2012-06-12T23:13:23.560
> 
> 标签：javascript, python

我想知道是否有人可以就这段代码给我建议。我已经在 python 中完成了它，但我认为我需要在 javascript 中使用它，因为它是用于网站的。我是编程新手，所以请善待！

网站宗旨：

*   用户必须回答 6 个多项选择题。（Q1 有 7 个可能的答案，但其他只有 2 个）。
*   根据他们的输入，他们将收到一个结果（我现在只是将结果设置为 range(1,225) 但根据输入会有不同的结果
*   结果和可能的输入组合都是固定的，不会改变

我很确定我没有以最好的方式做到这一点，因为我没有太多经验，但到目前为止它似乎有效。

代码看起来没问题吗？你认为我可以很容易地把它翻译成javascript吗？我是否应该以某种方式固定结果/输入表，这样就不需要每次都由计算机计算出来，还是可以这样？

确实非常感谢任何建议或帮助。

```
#list of possible inputs

list = [[23,24,25,26,27,28,29],["male","female"],["true","false"],["true","false"],
["true","false"],["true","false"]]

#make a list of outcomes
outcome=[]
for i in range(1,225):
    outcome.append(i)

#make a table of all possible list input combinations
r=[[]]
for e in list:
    table = []
    for item in e:
            for i in r:
                table.append(i+[item])
    r = table

#make a dictionary where the input is the key and outcome is the value
adict = dict((str(r), outcome) for r, outcome in zip(r, outcome))

#dummy inputs as an example   
input1 = 27
input2 = "male"
input3 = "true"
input4="true"
input5="true"
input6="true"

#put all the inputs into one string & look up outcome in adict
new_input = []
new_input.extend([input1,input2,input3,input4,input5,input6])
print adict.get(str(new_input)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:53:16.570

不需要用javascript重写；而是尝试使用 Python Web 框架之一，例如[Flask](http://flask.pocoo.org/)或[Django](https://www.djangoproject.com/)。

# bash - Bash 数组功能还是错误？

> ID：11006166
> 
> 赞同：0
> 
> 时间：2012-06-12T23:13:29.960
> 
> 标签：bash

在尝试调试作业提交脚本时，我最终将错误范围缩小到：

```
 [testuser@bes ~]$ var=( 1 foo1*bar4 echo 1*4=4 )
    [testuser@bes ~]$ echo "${var[@]}"
    1 foo1*bar4 echo 1*4=4
    [testuser@bes ~]$ cd /data/testuser/jobs/example/a16162/
    [testuser@bes a16162]$ var=( 1 foo1*bar4 echo 1*4=4 )
    [testuser@bes a16162]$ echo "${var[@]}"
    1 foo1-bar4 foo1*bar4 echo 1*4=4
    [testuser@bes a16162]$ 
```

这是一个新的 bash 会话的未删减记录。有人知道那个是如何工作的吗？这是我以前从未听说过的 bash 的一些古老功能，还是只是一个非常奇怪的错误？

版本（是的，我知道它已经过时了）：

```
GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2005 Free Software Foundation, Inc.

Linux bes 2.6.18-194.11.3.el5 #1 SMP Mon Aug 30 16:19:16 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux 
```

编辑：这是用于需要处理用户传递的数组的东西，我宁愿使用这种方法，也不愿使用三元组相当尴尬的`awk`黑客。它们是微不足道的“提取元素 2”之类的东西，这就是为什么使用数组看起来更好的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:21:18.323

当数组形成时，globs 仍然是 glob 的。如果您不想要这个，那么您需要引用或转义它们。

```
$ var=( 1 "foo1*bar4" echo "1*4=4" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T05:31:34.033

`ls /data/testuser/jobs/example/a16162/foo1*`揭示什么？

您可以禁用文件名通配符`set -f`并使用重新启用它`set +f`

# django - django 文本链接设计

> ID：11006168
> 
> 赞同：0
> 
> 时间：2012-06-12T23:13:42.970
> 
> 标签：django

我有几段文字要放在我的网站上（在 django 上运行）。在这篇文章中每隔一个句子左右就有一个链接。如何显示此文本的最佳设计是什么？

文本应该驻留在模板、视图函数还是数据库中？标签应该硬编码到文本中，还是应该在数据库中有一个 url/站点名称表？

如果一切都在数据库中，我个人觉得它会更好。所以我正在考虑编写一个伪模板系统，在数据库中存储这样的文本：

我在问一个问题{{“这里”，“堆栈溢出”}}

然后编写一个函数来获取所有标签并用正确的 html 替换它们。

django 是否已经提供了一种方便的方法来做到这一点？有公认的约定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:22:01.827

我建议保持简单，除非您有特定的理由涉及您自己的模板、数据库查找等，并且只需在您的页面中编写 html。

如果您决心让自己的生活变得艰难，或者您正在尝试解决比您的问题所暗示的更复杂的问题，那么[降价之](http://packages.python.org/django-markdown/)类的东西可能会有所帮助。

# ios - 如何在 XCode 中获取用户桌面的路径？

> ID：11006172
> 
> 赞同：8
> 
> 时间：2012-06-12T23:14:00.190
> 
> 标签：ios, cocoa, path, environment-variables

我试过了：

```
path = @"~/Desktop/files/text.plist";
NSDictionary *aDict = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

结果路径：~/Desktop/files/text.plist

```
path = @"$(HOME)/Desktop/files/text.plist";
NSDictionary *aDict = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

结果路径：$(HOME)/Desktop/files/text.plist

```
path = [NSHomeDirectory() stringByAppendingString:@"/Desktop/files/text.plist"];
NSDictionary *aDict = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

结果路径：/Users/my_name/Library/Application Support/iPhone Simulator/5.1/Applications/639DC66A-7092-4ECB-9E48-59935AC1C394/Desktop/files/text.plist

1.  有没有办法在 XCode 中访问用户的桌面路径？
2.  可以在上面的示例中使用环境变量吗？如何使用？

编辑：关于第二个问题的进一步解释：就像 MAC 控制台中有环境变量（或宏）一样，这些也可以在代码中使用吗？如果可以使用它们，任何人都可以举个例子吗？像 $HOME_DIRECTORY 或类似的东西。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-23T10:34:06.407

您可以在搜索路径中指定桌面：

```
NSArray * paths = NSSearchPathForDirectoriesInDomains (NSDesktopDirectory, NSUserDomainMask, YES);
NSString * desktopPath = [paths objectAtIndex:0]; 
```

这样做的好处是它不会假设用户如何配置他的 Mac，如果他的桌面文件夹不在默认位置，这仍然会找到正确的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T01:47:06.087

这应该有效：

```
NSString *pathToDesktop = [NSString stringWithFormat:@"/Users/%@/Desktop/text.txt", NSUserName()]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-06T13:43:10.737

我使用这个语句，它假定桌面文件夹在通常的位置。

```
[NSURL fileURLWithPath:[NSHomeDirectory()stringByAppendingPathComponent:@"Desktop"]; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-12T23:18:03.743

这应该为您的 #1 问题做到这一点：

```
 NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString* documentsDirectoryPath = [paths objectAtIndex:0]; 
```

你能进一步解释你的第二个问题吗？:)

# iphone - iPhone App：具有水平滚动的 UIScrollView 嵌入在具有垂直滚动的 UIScrollView 中

> ID：11006173
> 
> 赞同：1
> 
> 时间：2012-06-12T23:14:15.200
> 
> 标签：iphone, ios5

我在另一个主 UIScrollView（垂直滚动）中嵌入了 UIScrollView（水平滚动）。但是，我只能滚动内部滚动视图（水平滚动视图）。在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:38:47.767

如果水平滚动视图的高度小于垂直滚动视图，则将水平滚动视图内容大小的高度设置为与您在 nib 文件中设置的原始高度相同。例如，如果您的内部滚动视图高度为 200 像素，则将其 contentsize 设置为：innerScrollView.contentSize = CGSizeMake(1000,200) 并取消选中 nib 文件中此滚动视图的垂直滚动选项。如果需要，为内部滚动视图启用分页。取消选中主滚动视图的水平滚动，使其仅垂直滚动。

# eclipse - 不接受 struts 2 更改操作

> ID：11006175
> 
> 赞同：0
> 
> 时间：2012-06-12T23:14:26.770
> 
> 标签：eclipse, tomcat, struts2

我用 struts2 开发了一些 web 应用程序。我的实际问题是，行动的改变是不被接受的。例如，我有一个等于 null 的属性，编译器说：类 xyz.java 中的 nullpoint 异常......我注释掉这一行并清理并重新启动服务器并得到同样的问题。错误异常指的是同一行，这意味着它不接受更改。清理 tomcat 工作目录没有帮助。删除服务器也无济于事，知道吗？

ps：我试过用eclipse调试。正如您在屏幕截图中看到的，程序计数器仍在显示旧行，即使它不存在。

![在此处输入图像描述](../Images/587618fbfc9f3901aa95dbd5419216eb.png)

# ruby-on-rails - 在命令行创建一个HABTM关系模型时可以自动生成join_table吗？

> ID：11006177
> 
> 赞同：0
> 
> 时间：2012-06-12T23:14:38.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型`User`并将创建另一个模型`Category`。

两者之间都将具有HABTM关系。

我还没有创建`Category`模型。

但是，当我在命令行生成它时，我也可以生成连接表吗？

如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:58:17.890

如果要显式生成联结表，请在模型中使用`has_many :categories, through: :junction`和`has_many :users, through: :junction`。然后显式生成一个模型 Junction，其中包含 user_id 和 category_id，以及 belongs_to user 和 belongs_to category。用户和类别也需要有 has_many :junctions。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:45:03.607

据我所知，无法在命令行为 HABTM 关联生成连接表。

# php - 如何在关闭的 jQuery Accordion 选项卡中淡出 div 容器

> ID：11006184
> 
> 赞同：1
> 
> 时间：2012-06-12T23:15:38.650
> 
> 标签：php, jquery

嘿，真的很难为我的问题定义一个确切的标题。

我在 2008 年到 2012 年之间使用 jQuery Accordions。这些手风琴里面是带有超链接的日期。如果您按下任何链接，将跟随一个 ajax get 调用并将结果附加到 div 容器中。

如果我单击下一个链接，前一个链接会淡出，新的 div 会淡入。

如果我在 2012 年和 2011 年之间进行更改，一切都会像魅力一样发挥作用。然后我在 2012 年打开的最后一个 div 容器不会淡出。

这是我的 JS 代码：

```
var tempDiv = '';
//Auswahl Jahr zum Anzeigen von Presseartikeln
$("#select_media").live("click", function() {
    var currentPos = $(this).data("pos");
    var currentDiv = $(this).data("div");

    alert(tempDiv);
    $("#" + tempDiv).fadeOut();
    tempDiv = currentDiv;

    $.ajax({
        url: 'edit.php?action=media_select&pos=' + currentPos,
        type: 'GET',
        dataType: 'html',
        success: function (select) {
            $("#" + currentDiv).html(select);
            $('#myGallery').galleryView();
            $("#" + currentDiv).fadeIn();
        }
    });
    return false;
}); 
```

media_select 的源代码并不重要，您只需要知道有一个完整的图像作为响应的无序列表。

这是我的手风琴代码：

```
$date = getdate();
        $year = $date['year'];

        for ($i=$year; $i>=2008; $i--) {
            $getID = array();
            $getDate = array();
            $getTitle = array();
            $string = array();

            echo '<h3><a href="#" class="media_year_click">'.$i.'</a></h3>
            <div>';
            $sql = "SELECT 
                        ID,
                        DATE_FORMAT(Date, '%d.%m.%Y') AS Date_media,
                        Title
                    FROM 
                        Media
                    WHERE
                        YEAR(Date) = '".mysqli_real_escape_string($db, $i)."'
                    ORDER BY 
                        Date ASC
                    ";

            if (!$result = $db->query($sql)) {
                echo 'Datenbankfehler\n';
                echo $db->error;
            }

            $j = 0;
            while ($row = $result->fetch_assoc()) {
                $getID[$j] = $row['ID'];
                $getDate[$j] = $row['Date_media'];
                $getTitle[$j] = $row['Title'];
                $j++;
            }

            $result->close();

            //Ausgabe
            if (count($getID) == '0') {
                echo 'Kein Eintrag vorhanden';
            } else {
                echo '<ul id="media_no_point">';
                for($k = 0; $k < count($getID); $k++) {
                    $unique_id = '';
                    $string = explode(".", $getDate[$k]);
                    //Fix wenn Datum Tag 0 am Anfang enthält (wird nicht korrekt an JS übergeben)
                    //05032012 = 5032012 in JS
                    if ($string[0] < 10) {
                        $string[0] = mb_substr($string[0], 1);
                        $unique_id .= $string[0];
                    } else $unique_id .= $string[0];
                    $unique_id .= $string[1];
                    $unique_id .= $string[2];
                    echo '<li><a href="#" data-pos="'.$getID[$k].'" data-div="'.$unique_id.'" id="select_media">'.$getDate[$k].' - '.$getTitle[$k].'</a>
                        <div id="'.$unique_id.'" class="pictures"></div></li>';
                }
                echo '</ul>';
            }
            echo '</div>';
        } 
```

如果您不明白我的意思，请访问[我的网站](http://test.geschichtsverein-bademstal.de/media.html)并单击 2012 年的一个链接，然后转到 2011 单击该链接并返回 2012。应该没有图片库。插入 alert() 以显示哪个 div id 设置为 temp 并显示正确的 id。但是淡出在关闭的手风琴选项卡中不起作用。

编辑：所以似乎我无法对关闭的 Accordion 选项卡中的内容进行任何更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:24:18.673

编辑：您必须在选项卡单击时隐藏每个可见图库。添加`class="mygallery"`到画廊容器。

在选项卡上单击`$('.mygallery').hide();`以隐藏所有画廊，然后您可以在单击的选项卡内显示一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:19:41.433

修复了这个问题。添加了以下代码：

```
$("#media_accordion").accordion({
    autoHeight: false,
    navigation: true,
    //Everytime a new tab is clicked hide previous div container    
    change: function(event, ui) {
        $("#" + tempDiv).hide();
    }
}); 
```

# php - 使用 OOP 将数据从表单插入数据库

> ID：11006188
> 
> 赞同：-2
> 
> 时间：2012-06-12T23:15:55.513
> 
> 标签：php, oop

我正在尝试以面向对象的方式将表单中的数据插入到我的数据库中，但只是没有插入数据。为什么不？

```
class users {
    var $username;
    var $password;
    var $conection;
    var $tablename = usertable;

    function mysqldb() {
        $this->conection = mysql_connect("local host", "root", "") or die(mysql_error());
        mysql_select_db("this->tablename");
    }

    function insertdb() {
        $query = mysql_query("INSERT INTO $this->tablename values ('', '$user', '$pass')");
        $result = mysql_query($query);
        if(!$result) die("Query didn't work. " . mysql_error());
    }
}

$user1 = new users;
$user1->username = $_POST["user"];
$user1->password = $_POST["pass"];
$user1->insertdb(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:19:04.710

第一个问题是您的主机名错误。使用`localhost`，不使用`local host`。

现在，你需要转义你的数据，否则你会遇到麻烦！我建议完全抛弃你在`mysql_`功能方面的东西，并[学习使用 PDO 进行准备好的查询](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:23:09.557

在你实例化你的类之后，你调用方法 insertdb()，但是你没有连接到你的数据库。您必须先调用 mysqldb() ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:20:05.313

你有`mysql_select_db("this->tablename")`

你需要`mysql_select_db($this->tablename)`

这至少是我看到的直接问题。您应该真正检查能够将数据提取到类和对象中的[PDO 。](http://php.net/PDO)最好是到处练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T23:22:55.117

```
$this->conection = mysql_connect("local host", "root", "") 
```

`local host`应该`localhost`是。

* * *

```
$query = mysql_query("INSERT INTO $this->tablename values ('', '$user', '$pass')"); 
```

最后两个变量都没有定义——你可能是指`$this->username`和`$this->password`. 您也可能正面临一些 SQL 注入漏洞——查看 PDO 和准备好的语句。如果这是针对实际的 Web 应用程序，请开始对您的密码进行加盐和散列处理。

* * *

```
mysql_select_db("this->tablename"); 
```

`"this->tablename"`应该`$this->tablename`是。

* * *

您也从不`mysqldb()`首先打电话；您需要在尝试插入数据库之前执行此操作。

```
$user1->mysqldb(); 
```

# mysql - 如何强制执行条件唯一性约束

> ID：11006191
> 
> 赞同：2
> 
> 时间：2012-06-12T23:16:33.463
> 
> 标签：mysql, django

假设我有一堆表，其中对象被标记为已删除而不是实际删除。现在，我想强制执行一个约束，即只能有一个具有一组特定字段值的未删除对象，但我可以有多个具有相同字段值的已删除对象。

```
class Deletable(models.Model):
    deleted = models.BooleanField(default=False)

    class Meta:
       abstract=True

    def soft_delete(self):
       self.deleted=True
       self.save()

class ConcreteModel(Deletable):
    a = models.IntegerField()
    b = models.IntegerField()

    class Meta:
       #wrong because there may have been some deleted rows
       unique_together=('a', 'b') 
```

执行约束的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:44:10.567

在另一个字段中定义您的唯一约束： `deleted`以及您的伪唯一字段。然后，为了表示软删除，将模型的 id 分配给`deleted`; 对于未删除的项目，分配 0。

使用这种方法，对于未删除的项目，由于`deleted`字段是一致的，多字段唯一约束将有效地忽略 的值，`deleted`并仅对伪唯一字段强制唯一性；对于已删除的项目，`deleted`将被考虑在内，并且由于它是唯一的，因此将始终满足约束 - 因此具有相同伪唯一字段值的任意数量的模型可以共存。

例如，以下代码可能就是您要查找的代码。

```
class Deletable(models.Model):
    deleted = models.IntegerField(default=0)

    class Meta:
       abstract=True

    def soft_delete(self):
       self.deleted=self.id
       self.save()

class ConcreteModel(Deletable):
    a = models.IntegerField()
    b = models.IntegerField()

    class Meta:
       unique_together=('a', 'b', 'deleted') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-25T07:36:53.550

对于高于 Django 2.2 的版本，可以使用 UniqueConstraint。

在您的模型上使用：

```
from django.db.models import Q

class ConcreteModel(Deletable):
    a = models.IntegerField()
    b = models.IntegerField()

    class Meta:
        constraints = [
            models.UniqueConstraint(fields=['a', 'b'], condition=Q(deleted=False), name='a_b_unique')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:31:30.977

使用模型验证。

[https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects](https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects)

# installation - 在 Dreamhost 上配置 PostGis

> ID：11006193
> 
> 赞同：2
> 
> 时间：2012-06-12T23:17:15.197
> 
> 标签：installation, postgis, dreamhost

我已经在我的 Dreamhost 托管的 VPS 上安装了 PostGIS，并已进入该过程的配置部分，如下所述：http: [//postgis.refractions.net/documentation/manual-2.0/postgis_installation.html#installation_configuration](http://postgis.refractions.net/documentation/manual-2.0/postgis_installation.html#installation_configuration)

在我运行 ./configure 的最后一行中，我收到此错误：

```
configure: error: could not find pg_config within the current 
path. You may need to try re-running configure with a --with-pgconfig parameter. 
```

我在说明中看到说：

```
--with-pgconfig=FILE 
```

PostgreSQL 提供了一个名为 pg_config 的实用程序来启用 PostGIS 等扩展来定位 PostgreSQL 安装目录。使用此参数 (--with-pgconfig=/path/to/pg_config) 手动指定 PostGIS 将针对其构建的特定 PostgreSQL 安装。

但是，我找不到找到该文件所在位置的方法。我知道我已经安装了 PostGre，因为当我运行它时它这样说：

```
aptitude show postgresql | grep State 
```

回来

```
State: installed 
```

但我不知道从这里去哪里。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:40:44.183

您还需要为 PostgreSQL 安装“开发”包。例如，在 Debian 6.0 (squeeze) 中，这个包被称为[`postgresql-server-dev-8.4`](http://packages.debian.org/stable/database/postgresql-server-dev-8.4). 它会给你`pg_config`配置 PostGIS。

[在此处](http://trac.osgeo.org/postgis/wiki/UsersWikiInstall)查看各种 Linux 发行版上各种 PostGIS 版本的简单安装说明。

# objective-c - 检查当前在 NSPasteBoard 上复制的数据类型

> ID：11006198
> 
> 赞同：1
> 
> 时间：2012-06-12T23:18:38.897
> 
> 标签：objective-c, macos, copy, copy-paste, nspasteboard

我正在开发一个应用程序，我需要能够知道什么类型的数据只是被复制到`NSPasteBoard`. 从文档中我知道，当我们复制文件的任何内容时，`NSPasteBoard`都会将该内容传递到粘贴板服务器，系统上的任何应用程序都可以从中访问该数据。

现在，我想轮询粘贴板服务器并确定用户是否刚刚复制了一些文本内容，如果是文本内容，那么应用程序将处理这些数据，否则忽略其他数据，如图片、文件夹等。

* * *

### Apple 文档中的发现

从文档中我发现，当我们将数据设置到粘贴板上时，我们可以设置数据[类型](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPasteboard_Class/Reference/Reference.html)。但是如果我们在系统上复制一些文本内容，我不能 100% 确定要设置什么类型的数据类型。`dataType`in`setData`方法的参数是`NSString`.

* * *

任何进一步的指导都会非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T02:16:56.283

将文本复制到粘贴板的设计良好的应用程序应使用文档中列出的标准类型之一：

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPasteboard_Class/Reference/Reference.html#//apple_ref/doc/uid/20000328-SW33](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPasteboard_Class/Reference/Reference.html#//apple_ref/doc/uid/20000328-SW33)

因此，您可以检查粘贴板上是否存在某些标准文本类型，例如`NSPasteboardTypeString`or `NSPasteboardTypeRTF`，`-[NSPasteboard availableTypeFromArray:]`

应用程序可以以多种不同的形式将数据放入粘贴板。例如，如果您在 Safari 中复制文本，您将获得纯文本和富文本表示。这是支持各种应用程序的好方法；如果一个应用程序不能粘贴富文本，也许它可以粘贴纯文本，所以 Safari 会复制两者。

但是，从您描述问题的方式来看，应用程序将多种类型复制到粘贴板这一事实可能会使确定是否仅复制文本更具挑战性。例如，在 Safari 中复制图像会将图像数据复制到 . `NSPasteboardTypeTIFF`，但也会将 URL 复制到`NSPasteboardTypeString`. 因此，（完全取决于您想要完成的任务）您可能需要检查是否存在某些类型，例如 NSPasteboardTypeTIFF，以及是否存在文本类型，以确定是否复制了有用的文本。

探索粘贴板上所有数据的好方法是使用 Apple 的 ClipboardViewer 示例代码：http: [//developer.apple.com/library/mac/#samplecode/ClipboardViewer/Introduction/Intro.html#//apple_ref/doc/uid /DTS40008825-简介-DontLinkElementID_2](http://developer.apple.com/library/mac/#samplecode/ClipboardViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008825-Intro-DontLinkElementID_2)

# python - 附加到每条打印的消息

> ID：11006199
> 
> 赞同：2
> 
> 时间：2012-06-12T23:18:42.327
> 
> 标签：python, pretty-print

简单的问题，我想将文本附加到每个`print`调用的前面，例如，如果我将文本设置为`hello`并运行：

```
print 'hello there'
print ' hi again' 
```

它会打印这个：

```
hellohello there
hello hi again 
```

有没有办法做到这一点，而不使用函数来使用它而不是`print`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:27:27.283

您可以根据[DevPlayer 在 StackOverflow 上的帖子覆盖打印，此处](https://stackoverflow.com/a/10106489/15369)稍作修改：

```
from __future__ import print_function
# Note: If you are using Python 3 leave this line out
# This must be the first statement before other statements.
# You may only put a quoted or triple quoted string, 
# Python comments or blank lines before the __future__ line.
import sys

def print(*args, **kwargs):
    """My custom print() function."""
    # Adding new arguments to the print function signature 
    # is probably a bad idea.
    # Instead consider testing if custom argument keywords
    # are present in kwargs
    sys.stdout.write('hello')
    return __builtins__.print(*args, **kwargs)

print ("hello there")
print (" hi again") 
```

**[编辑]** ...或者正如 DSM 建议的那样，您可以通过以下方式避免 sys 调用：

```
from __future__ import print_function
# Note: If you are using Python 3 leave this line out
# This must be the first statement before other statements.
# You may only put a quoted or triple quoted string, 
# Python comments or blank lines before the __future__ line.

def print(*args, **kwargs):
    """My custom print() function."""
    # Adding new arguments to the print function signature 
    # is probably a bad idea.
    # Instead consider testing if custom argument keywords
    # are present in kwargs
    __builtins__.print('hello',end='')
    return __builtins__.print(*args, **kwargs)

print ("hello there")
print (" hi again") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:33:07.043

您不能更改 Python 2 的 print 语句，但您可以编写自己的类似文件的对象并使用它：

```
class PrefixedFile(object):
    def __init__(self, f, prefix):
        self.f = f
        self.prefix = prefix

    def write(self, s):
        s = s.replace("\n", "\n"+self.prefix)
        self.f.write(s)

sys.stdout = PrefixedFile(sys.stdout, "hello: ")

print "One"
print "Two" 
```

请注意，此代码不太有效，因为它在第一行缺少前缀，并在最后添加了一个前缀，但您明白了！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:33:38.887

尽管 Jon Cage 的回答是替换`print()`函数的好方法，我还是建议改用你自己的 print 函数（使用 Jon 的代码）：

```
from __future__ import print_function
# Note: If you are using Python 3 leave this line out
# This must be the first statement before other statements.
# You may only put a quoted or triple quoted string, 
# Python comments or blank lines before the __future__ line.

def my_print(*args, **kwargs):
    """My custom print() function."""
    # Adding new arguments to the print function signature 
    # is probably a bad idea.
    # Instead consider testing if custom argument keywords
    # are present in kwargs
    print('hello', end='')
    print(*args, **kwargs) 
```

与乔恩答案的唯一区别是您*不会覆盖内置* `print()`（“猴子补丁”）。我提倡这样做而不是修改`print()`，因为这使您的代码更易于维护，因为每个人都希望`print()`成为内置代码。

使用`print()` *函数*而不是`print`语句 in`my_print()`提供了[更大的灵活性](http://docs.python.org/library/functions.html#print)。

# javascript - 为什么 onpropertychange 对我不起作用？

> ID：11006202
> 
> 赞同：0
> 
> 时间：2012-06-12T23:19:14.587
> 
> 标签：javascript, internet-explorer, events, internet-explorer-9

我在 IE 9 中，我打电话给：

```
document.attachEvent('onpropertychange', function(){
    console.log("triggered");
}); 
```

在返回的控制台中`true`。

然后我改变一个属性：

```
$('div').eq(0).attr("data-url", "url"); 
```

这会更改属性但不会打印`triggered`到控制台。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:27:49.887

[根据 MSDN](http://msdn.microsoft.com/en-us/library/ie/ms536956%28v=vs.85%29.aspx)，此事件不会冒泡，因此将处理程序放在`document`不会观察到`div`元素的属性更改。

![在此处输入图像描述](../Images/4211b322e9f81ce9867bc23cb67e72cb.png)

另外，我不确定对子属性的更改`element.dataset`会触发处理程序。我想值得测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:33:31.853

也许您应该尝试将此事件附加到您的所有 div 中，如下所示：

```
var divs = $('div');
$.each(divs, function(divObj){
 divObj.attachEvent('onpropertychange', function(){
  console.log("triggered");
 });
}); 
```

# grails - 使用 Routing 1.2.2 插件时，Grails 无法解析 Apache Camel 组件（它需要 .zip，但需要 .jar）

> ID：11006206
> 
> 赞同：0
> 
> 时间：2012-06-12T23:19:42.213
> 
> 标签：grails, maven, apache-camel

这是我的第一个问题，所以请温柔一点。

我正在使用 Routing 1.2.2 插件在 Grails 2.0.3 项目中试用 Apache Camel。我已按照插件页面上的说明进行操作，并且能够成功执行一个简单的路线：

```
from('seda:input').to('stream:out') 
```

但是，当我尝试使用另一个组件（在这种情况下为码头）进行路线时，我添加

```
runtime "org.apache.camel:camel-jetty:2.9.2" 
```

根据插件页面上的说明添加到我的 BuildConfig.groovy 文件，但出现以下错误：

```
 ::::::::::::::::::::::::::::::::::::::::::::::

    ::              FAILED DOWNLOADS            ::

    :: ^ see resolution messages for details  ^ ::

    ::::::::::::::::::::::::::::::::::::::::::::::

    :: org.apache.camel#camel-jetty;2.9.2!camel-jetty.zip

    :::::::::::::::::::::::::::::::::::::::::::::: 
```

它确实是一个应该获取的 jar 文件，但我看不到指定它的方法。有任何想法吗？

顺便说一句，我使用的是 IntelliJ IDEA 11.0.1。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:08:03.503

您在哪个部分添加了依赖项？看起来你在下面添加了它：

```
plugins {
} 
```

但你应该在下面添加这个（猜测依赖，所以你可能需要改变它）

```
dependencies {
    runtime "org.apache.camel:camel-jetty:2.9.2"
} 
```

# php - 通过 SOAP 对 SharePoint 2010 列表进行分页

> ID：11006215
> 
> 赞同：1
> 
> 时间：2012-06-12T23:20:53.910
> 
> 标签：php, soap, sharepoint-2010, sharepoint-api

我无法通过 SOAP 对列表进行分页。

我可以检索一个列表，但它只返回前 30 个项目。（这是默认视图中的设置）。

```
$methodName = 'GetListItems';
$listName = '{259134c5-fa87-441e-8c31-641b51193710}';
$camlQuery="";
$paging = urlencode('Paged=TRUE&p_ID=30');

$xmlAction = 
    '<GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
      <listName>' . $listName . '</listName>
      <query>' . $camlQuery . '</query>
      <queryOptions>
            <QueryOptions>
              <Paging ListItemCollectionPositionNext="' . $paging . '" />
            </QueryOptions>
          </queryOptions>
         </GetListItems>';

echo '<hr><h1>My Action is:</h1><pre>' . htmlentities($xmlAction) . '</pre>';

$client = new Nusoap_Client($wsdl,true);
$response = $client->call($methodName,$xmlAction);
echo '<hr><h1>Response:</h1><pre>' . htmlentities(print_r($response,true)) . '</pre>'; 
```

这将返回这样的响应，除了有 30 个项目。

```
Response:

Array
(
    [GetListItemsResult] => Array
        (
            [listitems] => Array
                (
                    [data] => Array
                        (
                            [row] => Array
                                (
                                    [0] => Array
                                        (
                                            [!ows_Region] => 7
                                            [!ows_District_x0020_ID] => 1902
                                            [!ows_District] => SOME ISD
                                            [!ows_Campus_x0020_ID] => 1902001
                                            [!ows_Campus] => MY H S
                                            [!ows_Grade_x0020_Range] => 09-12
                                            [!ows_FileRef] => 30;#sites/ti/Lists/Schools/30_.000
                                            [!ows_MetaInfo] => 30;#
                                        )

                                )

                            [!ItemCount] => 30
                            [!ListItemCollectionPositionNext] => Paged=TRUE&p_ID=30
                        )

                )

        )

) 
```

[文档说](http://blogs.msdn.com/b/khavas/archive/2008/10/13/sharepoint-getlistitems-and-pagination.aspx)要获取下一页，我需要提供“ListItemCollectionPositionNext”中返回的值并再次查询。这就是上面所做的，它返回相同的 30 条记录。此列表中有 26K 项。

它不是权限问题。我是这个列表的管理员，可以通过 sharepoint web gui 操作它。

我还想念什么人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:39:54.493

我无法让分页工作，但我能够使用 ID 列和 rowLimit 将我的列表结果过滤到页面中来伪造它。

查询 50 的第一个“页面”。

```
<GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
<listName>{259134c5-fa87-441e-8c31-641b51193710}</listName>
<query><Query>
            <Where>
            <And><Gt><FieldRef Name="ID"/><Value Type="Number">0</Value></Gt>
            <Leq><FieldRef Name="ID"/><Value Type="Number">50</Value></Leq>
            </And>
            </Where>
</query></Query>
<rowLimit><RowLimit>50</RowLimit></rowLimit>
</GetListItems> 
```

和第二页 50

```
<GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
<listName>{259134c5-fa87-441e-8c31-641b51193710}</listName>
<query><Query>
            <Where>
            <And><Gt><FieldRef Name="ID"/><Value Type="Number">51</Value></Gt>
            <Leq><FieldRef Name="ID"/><Value Type="Number">100</Value></Leq>
            </And>
            </Where>
</query></Query>
<rowLimit><RowLimit>50</RowLimit></rowLimit>
</GetListItems> 
```

仅供参考：这些查询对换行符很敏感。确保在一行中完成所有操作。我把它分开了，以便于阅读。

这将返回 50 行。

```
 <rowLimit><RowLimit>50</RowLimit></rowLimit> 
```

这将返回一个空集。（或者在我的环境中确实如此）

```
 <rowLimit>
 <RowLimit>50</RowLimit>
 </rowLimit> 
```

默认视图的设置不考虑在内。RowLimit 似乎覆盖了它。单个结果集中的[默认限制为 5000 个项目。](http://blogs.technet.com/b/speschka/archive/2009/10/27/working-with-large-lists-in-sharepoint-2010-list-throttling.aspx)

# javascript - 将 HTML 字符串加载到 jQuery 中而不请求图像

> ID：11006216
> 
> 赞同：10
> 
> 时间：2012-06-12T23:20:54.883
> 
> 标签：javascript, jquery

有没有办法在不请求图像的情况下将包含图像标签的 HTML 字符串加载到 jQuery 中？我希望能够在 jQuery 对象上运行选择器以提取一些信息。举个例子：

```
var string = $('<p><img src="http://image.url/file.jpg" /></p>');
string.find('img'); 
```

浏览器将请求[http://image.url/file.jpg](http://image.url/file.jpg)。我正在尝试找到一种方法来做同样的事情，但没有浏览器请求图像。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T23:29:37.503

您可以使用 XML 文档来执行搜索：

```
function searchXml(xmlStr, selector) {
    var parser, xmlDoc;
    if(window.DOMParser) {
        parser = new DOMParser();
        xmlDoc = parser.parseFromString(xmlStr, "text/xml");
    } else {
        xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = false;
        xmlDoc.loadXML(xmlStr); 
    }
    return $(xmlDoc).find(selector);
}

console.log(searchXml('<p><img src="http://image.url/file.jpg" /></p>', 'img').attr('src'));​​​​ 
```

在行动中看到它：http: [//jsfiddle.net/na9Tt/](http://jsfiddle.net/na9Tt/)

请记住，它是 XML 文档，而不是 HTML 文档，因此某些特定于 HTML 的特定类型的搜索可能不会以完全相同的方式工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T23:24:51.090

你需要清楚你的问题的界限。如果您的问题是：“有什么方法可以将确切的 HTML（不更改它）加载到 jQuery 对象中（就像您正在做的那样）而不会导致图像加载”，那么答案是否定的。jQuery 创建一个临时父对象并将您的 HTML 分配给 innerHTML 属性，这会导致浏览器完全解析将加载图像 URL 的此 HTML。

所以，如果你想在这个 HTML 上运行选择器操作而不加载图像，你有几个选择：

1.  在将 HTML 提供给 jQuery 之前修改图像标签，使其`.src`属性消失或为空，或者`<img>`标签不是图像标签或不再存在。

2.  使用这种类型的 jQuery 以外的东西来解析您的 HTML，以便为选择器操作做好准备。

如果您透露更多关于您为什么尝试这样做或您尝试对选择器操作做什么，我们可能会建议更多替代方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T23:27:49.373

您可以将图像路径添加到另一个属性，如下所示

```
<img id="imgid" src="" data-src="/path_to_image"> 
```

然后您可以在需要时将 src 属性替换为 data-src 。像这样的东西

```
$('#imgid').attr('src',$('#imgid').attr('data-src')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T11:33:38.117

据我所知，这只是 Chrome，在[这里](https://developer.mozilla.org/en/docs/Parsing_HTML_From_Chrome)找到的，如果字符串不是有效的 HTML，该页面上的第一种方法可能不起作用，第二种方法可以正常工作。不会创建对图像的请求，也不会尝试执行内联脚本（这非常适合我的用例 - Chrome 扩展后台任务）。

```
var doc = document.implementation.createHTMLDocument("");
doc.body.innerHTML = htmlString; 
```

# java - 如何使用 SWT 或 Jface 将 xml 解析为树？以及如何同步树和xml？

> ID：11006223
> 
> 赞同：0
> 
> 时间：2012-06-12T23:22:13.510
> 
> 标签：java, tree, swt, jface

我想使用 SWT 或 JFace 构建如下所示的树：http: [//publib.boulder.ibm.com/infocenter/adiehelp/v5r1m1/topic/com.ibm.etools.xsdeditor.doc/images/ncalxml.gif](http://publib.boulder.ibm.com/infocenter/adiehelp/v5r1m1/topic/com.ibm.etools.xsdeditor.doc/images/ncalxml.gif)

如何基于 XML 构建树？以及如何同步树和xml（当我更新树节点（或xml）时，xml（或树）应该同时更新）。

谁能给我一个教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:33:55.010

Take a look at Structured Source Editors framework from WebTools project - [http://www.eclipse.org/webtools/wst/components/sse/overview.html](http://www.eclipse.org/webtools/wst/components/sse/overview.html)

Note it is pretty standalone, so you won't have to add whole WTP to your project.

It provides you a base class for editors with source/grid/design tabs, XML parser that properly handles broken code (XML is invalid when the user is typing so most parsers fail) and a DOM where you can listen for events.

# java - 如何使用刚刚映射到本地驱动器的网络文件夹？

> ID：11006224
> 
> 赞同：1
> 
> 时间：2012-06-12T23:22:13.573
> 
> 标签：java, smb, shared-directory

按照[这个线程](https://stackoverflow.com/questions/9914536/how-would-i-allow-an-application-running-on-tomcat-access-to-a-network-directory)和其他线程中的线索，我设置了一个代码块，在其中将网络驱动器映射到本地驱动器，然后列出其中的一些文件。

问题是：看起来映射在第一次调用中对 FileUtils 方法不可用，只有当我等待并再次调用该例程时，它才会发现映射的驱动器已准备好使用。

```
String path = "B:/Files/Somwething/SomethingElse/FinalDepth";
File newFile = new File("B:/Files/Something/SomethingElse");
if (!newFile.isDirectory()) {
    flagNetwork = true;
    p = Runtime.getRuntime().exec("net use B: " + networkSharedFolder);

    if(p != null) {
        Collection<File> files = FileUtils.listFiles(new File(path), arrExt, false);
        Iterator<File> iterFiles = files.iterator();
        while(iterFiles.hasNext()) {
            File tmpFile = (File) iterFiles.next();
            listResult.add(tmpFile);
        }
        LogServicio.doLog("[MyApplication, ContextListener] Drive B mapped to " + networkSharedFolder + ".", LogServicio.CErrorLvl);
    } else {
        throw new Exception("Error mapping network drive.");
    }
} 
```

¿ 我应该怎么做才能立即使用映射的驱动器（或保证我等到驱动器可用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:27:48.000

`Runtime.exec`启动一个正在运行的进程，但并不真正等待它。`p.waitFor()`在您知道驱动器的映射之前，您必须等待该过程完成（通过类似的东西）。

```
...
if (p != null) {
    while (true) {
        try { p.waitFor(); break; }
        catch (InterruptedException ex) { /* don't care */ }
    }

    Collection<File> files ... 
```

# c# - c# 中的 LINQ to SQL 和数据库访问

> ID：11006232
> 
> 赞同：0
> 
> 时间：2012-06-12T23:23:41.997
> 
> 标签：c#, database, linq-to-sql

我不知道怎么问这个问题。所以我只举一个例子。

代码：

```
var db = new dbContext();
var dlo = new DataLoadOptions()

dlo.LoadWith<Order>(x => x.Company);
db.LoadOptions = dlo;
var compIds = prms.companies.Select(x => x.Id).ToArray(); 
```

正如我对上面代码的理解，我从 Order 表中加载 Company，然后通过他们的 ID 获取公司。是否与

```
var compIds = (from it in context.GetTable<Order>()
                       select it.Company.Id).ToArray(); 
```

? 还是我完全混淆了两个不同的概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:43:48.107

我认为您对三件事感到困惑：

1.  `context.GetTable<Order>()`与`context.Orders`（假设一切配置正确。

2.  您作为示例提供的查询不等效；他们问两个不同的问题。第一个是询问“给我所有的公司 ID”。`DataLoadOptions`甚至不会被使用。第二个是询问给我每个订单的公司 ID。你会得到重复的。

3.  `DataLoadOptions`一般用于相关对象实例的预加载，而不是加入。

我认为你真正想要的是：

```
var uniqueCompanyIDsThatHaveAtLeastOneOrder = db.Orders.Select(o => o.Company.Id).Distinct(); 
```

# c# - 在带有 .net 包装器版本或 quickfix/n 版本的 quickfix 之间进行选择？

> ID：11006239
> 
> 赞同：2
> 
> 时间：2012-06-12T23:24:47.793
> 
> 标签：c#, quickfix

我正在尝试决定使用哪个版本，并希望获得有关此主题的任何反馈。得到一些赞成和反对的人会很好。

到目前为止，我所做的研究是 quickfix/n 版本会运行得更快，并且可能更容易实现，但似乎 quickfix/n 版本不支持某些功能，即数据库支持存储消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:52:18.623

目前，我们在生产环境中使用基于 QuickFix 和 .net 包装器的服务。我们对性能没有任何问题，而且很容易实现。一个很棒的功能是可以将消息和日志存储在数据库中（我们使用 sqlserver）。

我已经测试了 /n 版本，但目前我正在等待切换。在我看来，数据库支持是一个很棒的功能。

因此，开始实施 .net 包装器解决方案！

最好的问候， stex

**已编辑**

如果您需要一些示例代码的资源，请尝试：

[http://old.nabble.com/QuickFIX-f1039.html](http://old.nabble.com/QuickFIX-f1039.html)

和官方 FIX 论坛：

[http://fixprotocol.org/discuss/](http://fixprotocol.org/discuss/)

# php - 如何搜索按特定值过滤的 MongoDB 数据库

> ID：11006244
> 
> 赞同：1
> 
> 时间：2012-06-12T23:25:00.967
> 
> 标签：php, regex, search, mongodb, find

我正在尝试搜索对特定数据项进行筛选的 MongoDB 数据库。具体来说，我想要 USA = PG-13 作为我的过滤器。

**如何提出请求：获取电影，其中美国 MPAA = PG-13？**

采集**国家：**

```
{
   "_id": ObjectId("4fd79ec34c9fda9d05000080"),
   "en": "USA" 
}
{
   "_id": ObjectId("4fd79ec34c9fda9d0500007f"),
   "en": "Hong Kong" 
} 
```

合集**电影：**

```
{
   "_id": ObjectId("4fd79ec34c9fda9d05000081"),
   "movieId": {
     "imdb": "0848228" 
  },
   "movieTitle": "The Avengers",
   "movieYearSpan": {
     "start": "2012",
     "end": "2012" 
  },
   "movieType": "Movie",
   "movieMpaa": {
     "verdict": "Rated PG-13",
     "0": {
       "mpaa": "IIA",
       "country": ObjectId("4fd79ec34c9fda9d0500007f") 
    },
     "1": {
       "mpaa": "PG-13",
       "country": ObjectId("4fd79ec34c9fda9d05000080") 
    } 
  } 
} 
```

我试图首先获得美国的身份证。

```
$cursorCountry = $collectionCountry->find(array("en" => "USA"));
$idCountry = $cursorCountry->getNext();
$_id = $idCountry["_id"];
$cursorMovie = $collectionMovie->find(array("movieMpaa.country" => $_id, "movieMpaa.mpaa" => "PG-13")); 
```

不工作！那么如何提出请求呢？要获得电影，美国的 MPAA = PG-13？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:01:28.813

由于您的数据已布置好，因此这里没有很好的查询。

如果您可以将您的`movies`收藏更改为以下内容，那么您的查询将起作用：

```
 "movieMpaa": {
     "verdict": "Rated PG-13",
     "countries": [
         {
           "mpaa": "IIA",
           "country": ObjectId("4fd79ec34c9fda9d0500007f") 
       },
         {
           "mpaa": "PG-13",
           "country": ObjectId("4fd79ec34c9fda9d05000080") 
        } 
     ] 
```

When`movieMpaa.countries`是一个对象数组，那么您可以在该数组中查询`movieMpaa.countries.country`. MongoDB 将识别数组并“钻取”对象。

However, there is another way structure this that probably much easier longer term:

```
 "movieMpaa": {
     "verdict": "Rated PG-13",
     "countries": {
         ObjectId("4fd79ec34c9fda9d0500007f") : { "mpaa": "IIA" },
         ObjectId("4fd79ec34c9fda9d05000080") : { "mpaa": "PG-13" }
     } 
```

If a country can only have one rating, then technically that `countries` value is a dictionary of `Countries => ratings`. The structure above stores them this way.

However, the use of `ObjectId` is a little ugly there. Note that you can override the ID in the `country` collection. Consider using the 2 or 3-character ISO codes instead. These are easier to read.

```
 "movieMpaa": {
     "verdict": "Rated PG-13",
     "countries": {
         "UK" : { "mpaa": "IIA" },
         "US" : { "mpaa": "PG-13" }
     }

db.movies.find({'movieMpaa.countries.US': 'PG-13'}) 
```

# php - 动态页面标题

> ID：11006245
> 
> 赞同：1
> 
> 时间：2012-06-12T23:25:04.447
> 
> 标签：php, title

我有一个 index.php 页面，它是主页。所有页面都通过 GET 变量动态包含在 index.php 中。

这是 uFlex 类的一部分。这将根据包含的文件的文件名生成标题，我不喜欢这种方式。

```
<?php

$page = @$_GET['page'];
$page = !$page ? "home" : $page;
$ext = ".php";
$page_inc = "page/" . str_replace("-", "_", $page) . $ext;
//Page not found
if(!file_exists($page_inc)) send404();
if(!$page_title){
$page_title = ucfirst($page);
}
?>

//   HTML CODE <head>, <title>, ecc
//   And then

<?php include($page_inc); ?> 
```

示例：我查看`http://sitename.ext/?page=user&id=nickname`

它将包含`user.php`并且因为包含是在`<title>`标记之后进行的。我无法根据 php 变量设置标题。在里面`user.php`我有`$user['username']`并且我想将此变量设置为标题..

我需要重写一种新方法来包含文件，以便从包含的文件中设置标题。

建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:30:00.620

您应该考虑使用 require，然后调用函数来生成数据。

```
<?php require($page_inc); ?>
<html>
<title><?php echo $page_title; ?></title>
....
<div><?php echo $page_content?></div> 
```

这与 wordpress 所做的非常相似，尽管水平非常高。

# cocos2d-iphone - Box2D 检测 2 个特定边缘何时接触

> ID：11006252
> 
> 赞同：0
> 
> 时间：2012-06-12T23:25:54.067
> 
> 标签：cocos2d-iphone, box2d, collision-detection, game-physics, box2d-iphone

我正在使用 Box2D 进行 Cocos2D 项目，并且我试图检测对象上的 2 个特定边缘何时接触，例如下图中的红色边缘：

![在此处输入图像描述](../Images/90f9f1d8165f394525ef53ee10fd9123.png)

我仍在学习碰撞，但我了解基础知识以及如何检测 2 个特定物体是否接触，但我无法弄清楚如何检测特定边缘。

我想到的一种解决方案是在我想要检测的边缘上新创建实体，但我想知道两个红色边缘何时完全对齐并且盒子形成一个矩形。

可能有一种简单的方法可以做到这一点，但我在互联网上搜索并没有找到有用的例子。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:58:12.060

基本上，Box2D 检测的碰撞不是在 b2Bodies 之间，而是在 b2Fixtures 之间。您所需要的只是将传感器固定装置添加到您的 b2Bodies ( `fexture.isSensor = YES`)，将其位置设置到所需的点（距离右边缘仅 1-2 个像素，超出您的物理形状）并检测这两个传感器的接触。我希望这很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T05:10:10.190

您可以像这样在每个主体的相关角添加两个小固定装置，并检查两对（红色/红色，蓝色/蓝色）何时同时重叠。圆形装置会很好，调整它们的大小是调整匹配精度的一种简单方法。 ![在此处输入图像描述](../Images/5bdce4def8493ac2b26c3cad82ebc379.png)

# jquery - 如何添加转义键功能来关闭灯箱？

> ID：11006253
> 
> 赞同：3
> 
> 时间：2012-06-12T23:26:27.417
> 
> 标签：jquery, lightbox

我使用以下脚本创建了一个灯箱：

```
<script type="text/javascript">
    $(document).ready(function(){
            $(".BtnAction").click(function(){                               
                var objPopup = $($(this).attr("rel"));

                var mask = $("<div/>", {
                    id : "mask",
                    style: "background:#000; display:block;top:0;left:0;position:absolute;opacity:0.8;filter: alpha(opacity=80);width:100%;height:100%;z-index:9998;",
                    click: function(){
                        $(objPopup).hide();
                        $(this).remove();   
                    }       
                }); 

                $(".PopupWrap").before(mask);
                objPopup.show();
            });

            $(".CloseIcon").click(function(){
                $(this).parent().hide();
                $("#mask").remove();
            });

    });
</script> 
```

如何实现 ESC 键，以便在单击它时，灯箱也会关闭？

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T23:53:09.200

您可以在 $(document).ready() 块中向文档添加 esc 键侦听器，并重复您当前为 $('.CloseIcon').click() 函数使用的代码，但将灯箱定位为ID：

```
$(document).ready(function(){

// Your existing code

    $(document).keyup(function(e) { 
        if (e.keyCode == 27) { // esc keycode
            $('#lightboxId').hide();
            $('#mask').remove();
        }
    });
}); 
```

[https://stackoverflow.com/a/3369624/1010337](https://stackoverflow.com/a/3369624/1010337)

# jquery - 在两张桌子上悬停上课？

> ID：11006255
> 
> 赞同：4
> 
> 时间：2012-06-12T23:26:52.573
> 
> 标签：jquery, html, css

```
<table border=2>
    <tr class="here1 yes">
        <td>aaa1</td><td>bbb1</td>
    </tr>
    <tr class="here2 yes">
        <td>aaa2</td><td>bbb2</td>
    </tr>

    <tr class="here55 yes">
        <td>aaa3</td><td>bbb3</td>
    </tr>
</table>

<table border=2>
    <tr class="here1 yes">
        <td>ccc1</td><td>ddd1</td>
    </tr>
    <tr class="here2 yes">
        <td>ccc2</td><td>ddd2</td>
    </tr>

    <tr class="here55 yes">
        <td>ccc3</td><td>ddd3</td>
    </tr>
</table>

.yes:hover {
   background-color: red;
} 
```

直播：http : [//jsfiddle.net/KzzW8/](http://jsfiddle.net/KzzW8/)

上表是使用以下 PHP 生成的：

```
 `<tr class="here<? echo $i ?> yes">` 
```

我希望将鼠标悬停在下属所在组`TR.here1`中的任何内容变为红色：（aaa1，bbb1，ccc1，ddd1），无论它在哪个表中。`TR.here1``TD`

我相信我可以为此使用 jQuery。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T23:32:44.647

[http://jsfiddle.net/KzzW8/1/](http://jsfiddle.net/KzzW8/1/)

```
$('tr').hover(function() {
    var cls = $(this).prop('class').match(/here\d+/);
    if (cls) {
        $('.' + cls).addClass('hover');
    }
}, function() {
    $('.yes.hover').removeClass('hover');
});​ 
```

因此，您在悬停事件中获取`here*`类并将类应用于`.hover`具有相同类的所有行。悬停时 - 您删除所有额外添加的类

# xcode - xcode 不会在 Cocoa Programming 第 4 版中构建示例

> ID：11006265
> 
> 赞同：-1
> 
> 时间：2012-06-12T23:27:53.117
> 
> 标签：xcode, cocoa

我收到的错误和警告似乎表明第 4 版示例适用于 OSX 10.7 和 xcode 4，但我使用的是 OSX 10.6 和 Xcode 3.2。

我已经编辑了项目设置以设置 Xcode 3.2，但是当我尝试构建 Typing Tutor 时继续收到这些错误。我不知道在哪里寻找修复程序。这是我的第一次尝试；当我尝试其他示例时，大概会发生相同类型的错误。如何修复所有这些的 Xcode 设置？某处是否有勘误表文件，其中包括我的问题？

缺口

```
ERRORS and WARNINGS:

COPY OF "BUILD FAILED" :

Check dependencies

[WARN]Deployment target 10.7 for architecture 'x86_64' and variant 'normal' is greater than the maximum value 10.6 for the Mac OS X 10.6 SDK.

error: unknown property attribute 'strong'
@property (strong) NSColor *bgColor;
^
warning: no 'assign', 'retain', or 'copy' attribute is specified - 'assign' is assumed
@property (strong) NSColor *bgColor;
^
warning: default property attribute 'assign' not appropriate for non-gc object
2 warnings and 1 error generated. 
```

尼克

帖子：1 加入时间：2011 年 12 月 31 日星期六晚上 10:19

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:50:14.853

该项目可能正在使用仅在 OS X 10.7 和 iOS 5+ 中可用的 ARC（自动引用计数）。该项目还可能使用 UI 故事板，这意味着您将不得不使用 Xcode 4 和 iOS 5。要摆脱这些错误，尽管您会将这些属性从强转换为保留，并且如果它不是属性，可能还会放入非原子您在其他线程中使用。

```
@property (retain) NSColor *bgColor; 
```

# php - 验证和处理表单块

> ID：11006267
> 
> 赞同：0
> 
> 时间：2012-06-12T23:28:11.597
> 
> 标签：php, html, forms, content-management-system

我正在为自己构建一个 CMS。我以前从未从头开始构建过 CMS，我真的不想使用 Wordpress 或类似的东西。

我的目标是创建一个更新其他几个页面的表单页面。除了时间和有大量 process.php 文件来分别处理每个表单之外，我已经成功了，这对我自己来说很耗时，我无法想象成为用户。

但是我已经搜索过，但没有找到足够相似的东西来操纵或从中获得想法来解决我的问题。我正在看的是一个大规模的多形式过程（如果可能的话？）来加速这个过程。到目前为止，我所读到的是使它成为具有相同操作的一个表单块。这正是我想去的地方，但不完全了解如何一次处理并以一种形式将其分成相应的块。

下面是一个表单块的示例。这是几乎相同的 4 个块之一，差异值是隐藏值。

```
<form action="xboxtopratedprocess.php" method="post" enctype="multipart/form-data">
            <p><h3>Xbox 360</h3>
                <!-- title of post/ game name -->
                <p><label for="title"> Title of Game </lable></p>
                <input type="text" name="title" size=20 /><br />

                <!-- image uploader -->
                <p><label for="image">Game Image:</label><sup>*png, png, bmp, jpeg and jpg only!</sup></p>
                <input type="file" name="image" /><br />
                <input type="hidden" name="MAX_FILE_SIZE" value="100000" />

                <!-- large text box -->
                <p><label for="text">Displayed text:</label><sup> * limit of 250 characters allowed.</sup></p>
                <textarea cols=40 rows=10 name="message"></textarea>

                <input type="hidden" name="system" value="xbox">
                <p><input type="submit" id="submit" value="Upload" /></p>

                </p>
            </form> 
```

表格的总体思路是给一张图片一个游戏的描述和游戏的标题以及系统类型。

处理此表单后，它会上传到 mysql 数据库并存储要重新发布的值。如果我一次处理一个，这一切都很好；尽管唯一不同的值是每个表单块的“系统”值和 process.php，但它们分别与不同的进程分开。

我想去的地方是一个巨大的形成一个巨大的过程。我不是在这里寻找确切的解决方案，我也不指望一个。

但是，我想知道的是：a）是否可以一次提交多个表单块？ii）如果是这样，可以使用像上面这样的块吗？/需要添加什么才能使其成为可能。b）如果我在一个页面上使用上面的块和 4 次具有不同的隐藏值我如何区分它们以便我可以分别处理每个游戏系统并形成可以分解到每个数据库的形式？（我已经有了细分、存储和页面发布）

# jquery - 随机 jQuery Dom 访问失败——没有想法

> ID：11006268
> 
> 赞同：3
> 
> 时间：2012-06-12T23:28:36.080
> 
> 标签：jquery, dom

随机地，在进行正常的有效查询时，我们看到了奇怪的东西。

我已经在 jQuery1.6.4 中跟踪了它的一些行（也尝试了 1.7.2，结果相同）。第 4737 行（makeArray）。

我已经链接到两个图像，第一个是预期的情况，第二个是错误的情况，突出显示变量结果。

预期的情况是一个简单的 jquery 对象，而第二种情况不是。它看起来像 dom 文档元素？不是100%确定。

任何帮助将不胜感激！我完全不知道我们可以做些什么来在 jQuery 中导致这个错误:(这个问题是间歇性的，只发生在大约 50% 的时间。

它似乎不是页面上的任何特定元素。所有与 jQuery 交互的元素都可以触发这个。

**注意：这只发生在 Chrome 18+ 中。在旧版本的 Chrome 或 FF/Safari 中不会发生。**

*预期：http:* [//i.imgur.com/efi0w.png](http://i.imgur.com/efi0w.png)

*错误：http:* [//i.imgur.com/F0cq7.png](http://i.imgur.com/F0cq7.png)

用更多信息更新我的帖子。下面是具有有效结果和非常奇怪结果的图像。如您所见，它不是 jquery 对象，而只是带有选择器的“对象”，该选择器是 FUNCTION 调用以及选择器字符串....

[http://i.imgur.com/TdCUe.png](http://i.imgur.com/TdCUe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:00:20.703

这可能是获取图像时的传输级错误以及`.load()`该元素的失败。`img`元素确实有一个`load`你可以玩和进一步检查的事件。

此外，

> Web 服务器的硬件配置决定了可以在 HTTP 响应中成功发送的最大文件大小。

# javascript - 可拖动框小故障

> ID：11006270
> 
> 赞同：0
> 
> 时间：2012-06-12T23:28:52.480
> 
> 标签：javascript, jquery

通常我更喜欢为琐碎的问题编写自己的解决方案，因为通常插件会添加许多不需要的功能并增加您的项目规模。大小使页面变慢，并且 100k 页面浏览量/天网站中的 30k 差异（与 jquery 可拖动相比）对账单产生了很大影响。我已经使用 jquery，我认为这就是我现在所需要的，所以请不要告诉我使用另一个插件或框架来拖动东西。

考虑到这一点，我编写了以下代码，以允许可以拖动一个框。代码工作得很好（任何关于代码本身的提示都会非常感谢），但是当我将鼠标光标拖动到框限制的左侧时出现了一个小故障：框内的文本被选中。

我该如何解决？谢谢。

JavaScript：

```
$(document).ready(function () {

    var x = 0;
    var y = 0;

    $("#d").live("mousedown", function () {

        var element = $(this);
        var parent = element.parent();

        $(document).mousemove(function (e) {

            var x_movement = 0;
            var y_movement = 0;

            if (x == e.pageX || x == 0) {
                x = e.pageX;
            } else {
                x_movement = e.pageX - x;
                x = e.pageX;
            }

            if (y == e.pageY || y == 0) {
                y = e.pageY;
            } else {
                y_movement = e.pageY - y;
                y = e.pageY;
            }

            var left = parseFloat(element.css("left")) + x_movement;

            // hold inside left
            if (left <= 0) left = 0;

            // hold inside right
            var max_right = (parseFloat(element.outerWidth()) - parent.width()) * -1;
            if (left >= max_right) left = max_right;

            element.css("left", left);

            var top = parseFloat(element.css("top")) + y_movement;

            // hold inside top
            if (top <= 0) top = 0;

            // hold inside bottom
            var max_bottom = (parseFloat(element.outerHeight()) - parent.height()) * -1;
            if (top >= max_bottom) top = max_bottom;

            element.css("top", top);

            return false;

        });

    });

    $(document).mouseup(function () {
        x = 0;
        y = 0;
        $(document).unbind("mousemove");
    });

}); 
```

HTML：

```
<div style="position: relative; width: 500px; height: 500px; background-color: Red;">
    <div id="d" style="position: absolute; width: 100px; left: 0px; height: 100px; top: 0px; cursor: move; border: 1px solid black;">a</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:37:41.490

选择文本的事实与 JavaScript 无关。如果您在按下一个按钮时在鼠标光标周围移动，这是浏览器和选择文本的问题。

您可以应用一些 css，这将阻止文本被选中，至少在现代浏览器上：

```
#d {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
} 
```

（这不是标准`css`，但应该可以。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:37:21.163

您可以在元素上使用 CSS 来阻止选择，以及将`unselectable="on"`属性添加到元素

示例：http: [//jsfiddle.net/PS79Y/](http://jsfiddle.net/PS79Y/)

**CSS：**

```
#d{
 -moz-user-select: -moz-none; 
 -khtml-user-select: none;
 -webkit-user-select: none;
 -ms-user-select: none;
 user-select: none;
} 
```

要查看`-moz-none`和 just之间的示例`none`，请访问[https://developer.mozilla.org/en/CSS/user-select](https://developer.mozilla.org/en/CSS/user-select)

# java - 如何检查用户是否属于java中的某个AD组

> ID：11006277
> 
> 赞同：2
> 
> 时间：2012-06-12T23:29:46.407
> 
> 标签：java, windows, active-directory

我知道这一定是一个非常简单的问题，但我是 java 新手，很难获得我需要的确切代码。我需要做的是从 Windows 获取当前登录的用户名，并检查该用户是否属于需要在某个配置文件中定义的特定 AD 用户组。在 C# 中很容易做到，但我不知道如何在 JAVA 中做到这一点。示例代码会很棒。在 c# 中，我会将安全组放入 App.Config 到应用程序设置中，然后我可以获取当前登录用户的 Windows 身份，然后遍历用户所属的所有组并与所需的匹配。我需要在java中做同样的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:27:48.833

如果您只关心当前登录的 Windows 用户（即，您的 Java 程序将在 Windows 上运行）并且不介意使用[JNA](https://github.com/twall/jna/)，您可以使用 中提供的函数`platform.jar`来[`Advapi32Util#getCurrentUserGroups()`](http://twall.github.com/jna/3.3.0/javadoc/com/sun/jna/platform/win32/Advapi32Util.html#getCurrentUserGroups%28%29)获取用户所属的组.

例如：

```
import com.sun.jna.platform.win32.Advapi32Util;

for (Advapi32Util.Account account : Advapi32Util.getCurrentUserGroups()) {
    System.out.println(account.fqn);
} 
```

这还利用了当用户登录时 Windows 缓存所有组（包括包含用户所属的其他组的组）中的用户成员身份这一事实。

* * *

这里的要求似乎有点不具体，这开始转向可能不太适合 SO 的领域，但无论如何我都会试一试。

最终，您的系统将在哪里运行决定了设置的难度。如果您要在基于 Windows 的服务器上运行，该服务器连接到您正在验证的同一个域，那么您应该查看[Waffle](https://github.com/dblock/waffle)，它提供了一个 servlet、一个 Spring Security 过滤器、一个 JAAS 插件和其他一些您可以使用的方式可以实现 Windows 集成身份验证，该身份验证使用本机 Windows 方法加载 Windows 身份和关联的 Active Directory 组。这将为您提供最类似于将 IIS 和 WIA 与 .NET 框架应用程序一起使用的体验。这样做的缺点是服务器需要在 Windows 系统上运行。

不幸的是，在非 Windows 环境中运行将需要更多的设置和配置。最集成的解决方案可能是 Spring Security，它具有能够提供 SPNEGO（Windows 集成身份验证）[的 Kerberos 扩展。](http://blog.springsource.org/2009/09/28/spring-security-kerberos/)上面的链接包含有关启动和运行 Kerberos 过滤器所需的详细信息（我相信它们仍然是最新的）。要访问组信息，您需要更改`userDetailsService`示例`security.xml`文件中的值。此处最简单的做法是提供适当配置的[LdapUserDetailsS​​ervice](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/ldap/userdetails/LdapUserDetailsService.html)作为此处的对象。我对 Spring 的经验并不丰富，但看起来配置会像这样（这缺少`contextSource`）。

```
<bean id="adUserSearch" class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
    <constructor-arg value="dc=domain,dc=com"/>
    <constructor-arg value="(sAMAccountName={0})"/>
    <constructor-arg ref="contextSource" />
</bean>

<bean id="adAuthoritiesPopulator" class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
    <constructor-arg ref="contextSource"/>
    <constructor-arg value="dc=domain,dc=com" />
    <property name="groupSearchFilter" value="(member={0})"/>
    <property name="rolePrefix" value="ROLE_"/>
    <property name="searchSubtree" value="true"/>
    <property name="convertToUpperCase" value="true"/>
</bean>

<bean id="userDetailsService" class="org.springframework.security.ldap.userdetails.LdapUserDetailsService">
    <constructor-arg ref="adUserSearch"/>
    <constructor-arg ref="adAuthoritiesPopulator"/>
</bean> 
```

这应该让您获得一个经过 Kerberos 身份验证的用户及其关联的组。

如果 Spring Security 不可接受，您可以尝试使用[Shiro](http://shiro.apache.org/index.html)和[纯 Java SPNEGO 过滤器](http://spnego.sourceforge.net/)来滚动您自己的版本，但展示一个示例需要基本上编写一个程序。

我希望这有帮助。一旦你决定了一种方法，将更具体的问题作为 SO 类型的问题来解决可能是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:18:08.507

您可以像这样获得没有 JNA 的所有组：

```
String groups[] = (new com.sun.security.auth.module.NTSystem()).getGroupIDs(); 
```

显然，这只适用于 Windows，甚至在 Windows 上也不鼓励使用 com.sun.* 包。有关结果的说明，请参见[this](http://support.microsoft.com/kb/243330/en-us)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T17:40:45.430

这可以通过 Java SE API 完成，而无需直接使用 com.sun.* 包。使用[Java 身份验证和授权服务 (JAAS)](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/AcnOnly.html)（javax.security.auth.* 和 javax.security.auth.login.*）访问此信息。使用以下条目创建[JAAS 配置文件：](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/LoginConfigFile.html)

```
sampleApp {
    com.sun.security.auth.module.NTLoginModule required debug=false;
}; 
```

将该条目另存为`sampleapp_jaas.config`. 接下来设置系统属性，以便 Java 将查找配置文件。

```
-Djava.security.auth.login.config==sampleapp_jaas.config 
```

请注意，双等号具有特殊含义。有关加载顺序的详细信息，请参见[com.sun.security.auth.login.ConfigFile](http://docs.oracle.com/javase/7/docs/jre/api/security/jaas/spec/com/sun/security/auth/login/ConfigFile.html)。

然后创建将在 JAAS 配置中查找条目的 LoginContext。调用 login 填充主题，然后访问代表用户组的主体。

```
LoginContext l = new LoginContext("sampleApp");
l.login();
try {
    Subject s = l.getSubject();
    for (Principal p : s.getPrincipals()) {
        System.out.println(p);
    }
} finally {
    l.logout();
} 
```

使用此设置，Java 将使用 com.sun.security.auth.module.NTSystem 类来获取信息，但您的任何代码都不会被硬连接到非标准 API。

# objective-c - 在主线程上运行方法的宏

> ID：11006280
> 
> 赞同：4
> 
> 时间：2012-06-12T23:30:49.667
> 
> 标签：objective-c, ios, multithreading

我想要一种简单的方法在方法的开头删除代码，这将强制该方法仅在主线程上运行（因为该方法会更新 UI 元素）。

目前，我有类似的东西：

```
 if (![NSThread isMainThread]){
    [self performSelectorOnMainThread:_cmd withObject:_results waitUntilDone:NO];
    return;
} 
```

但我想要一种将其包含在宏中的方法，而无需输入该方法的参数。似乎应该有某种方法来迭代传递给当前方法的参数列表并创建一个 NSInvocation 或类似的。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T00:19:16.243

这行得通吗？

```
#define dispatch_main($block) (dispatch_get_current_queue() == dispatch_get_main_queue() ? $block() : dispatch_sync(dispatch_get_main_queue(), $block)) 
```

如果您也从主线程调用它，这也将起作用，这是一个奖励。如果您需要异步调用，只需使用`dispatch_async`而不是`dispatch_sync`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T00:16:23.300

我建议不要尝试在不同的线程上重新调用您的方法，而是使用`dispatch_sync()`并`dispatch_get_main_queue()`确保只有敏感代码位于主线程上。这可以很容易地包装在一个函数中，就像[Brad Larson 对“GCD to perform task in main thread”的回答](https://stackoverflow.com/a/8186206/)一样。

他的过程与您已经拥有的过程基本相同，不同之处在于代码被放入一个块中并根据需要调用或入队：

```
if ([NSThread isMainThread])
{
    blockContainingUICode();
}
else
{
    dispatch_sync(dispatch_get_main_queue(), blockContainingUICode);
} 
```

如果您愿意，也可以轻松地将其转换为宏。

创建块本身不需要太多改变。如果您的 UI 代码如下所示：

```
[[self textLabel] setText:name];

[[self detailTextLabel] setText:formattedDollarValue];

[[self imageView] setImage:thumbnail]; 
```

将其放入要排队的块中，如下所示：

```
dispatch_block_t blockContainingUICode = ^{

    [[self textLabel] setText:mainText];

    [[self detailTextLabel] setText:detailText];

    [[self imageView] setImage:thumbnail];
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-31T00:10:51.640

如果使用 NSThread 条件三元从主线程或后台线程调用，这将起作用。

* * *

同步：

```
#define dispatch_main(__block) ([NSThread isMainThread] ? __block() : dispatch_sync(dispatch_get_main_queue(), __block)) 
```

异步：

```
#define dispatch_main(__block) ([NSThread isMainThread] ? __block() : dispatch_async(dispatch_get_main_queue(), __block)) 
```

* * *

要使用：

```
-(void)method {
    dispatch_main(^{
        //contents of method here.
    });
} 
```

* * *

归属：灵感来自[理查德·罗斯的回答](https://stackoverflow.com/a/11006635/2057171)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T00:04:54.597

我知道从这样的方法创建动态 NSInvocation 的唯一方法需要方法的参数是 va_list。

您需要能够将当前方法的参数作为数组获取（以便您可以循环数组并将参数添加到 NSInvocation），我不确定这是可能的（我不认为它是）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-04T14:10:55.023

我认为这就是你要找的：

```
- (void)someMethod
{
    // Make sure the code will run on main thread

    if (! [NSThread isMainThread])
    {
        [self performSelectorOnMainThread:_cmd withObject:nil waitUntilDone:YES];

        return;
    }

    // Do some work on the main thread
} 
```

# java - Java 7 对 Google App Engine Java 的支持

> ID：11006281
> 
> 赞同：2
> 
> 时间：2012-06-12T23:30:51.777
> 
> 标签：java, google-app-engine, thread-dump

Google App Engine Java[概览页面](https://developers.google.com/appengine/docs/java/overview)表明支持 Java 版本 5 和 6。使用 Java 7u4 启动本地开发服务器时，会出现以下错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGBUS (0xa) at pc=0x000000010d733a96, pid=32766, tid=140735250205024
#
# JRE version: 7.0_04-b21
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.0-b21 mixed mode bsd-amd64 compressed oops)
# Problematic frame:
# J  com.google.appengine.repackaged.org.objectweb.asm.MethodWriter.visitInsn(I)V
# 
```

有关更多信息，请参阅[输出](http://pastebin.com/rP1WAunw)和[线程转储](http://pastebin.com/r72ff0gC)。

这个特定的 Java 7 版本是否存在任何已知问题？路线图上是否会对 GAE Java 提供完整的 Java 7 支持？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:36:23.730

`Is there any known issue with this particular Java 7 version?`

我们很清楚 Java 1.7 的问题。

`Is there going to be full Java 7 support for GAE Java on the roadmap?`

在我们正式宣布之前，我们必须耐心等待。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:35:51.900

从 AppEngine 1.7.7 开始，添加了对 Java 7 的支持。

[http://googleappengine.blogspot.ca/2013/04/app-engine-177-released.html](http://googleappengine.blogspot.ca/2013/04/app-engine-177-released.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T00:18:02.507

> 这个特定的 Java 7 版本是否存在任何已知问题？

好吧，正如你所说，它不受支持。

此外，这个 2011[线程](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/IEAohfEN-oE)似乎引用了 OS X 上的一个类似错误并宣布了一个错误修复。

> 路线图上是否会对 GAE Java 提供完整的 Java 7 支持？

可能不会在很长一段时间内。

但是，您可以尝试在 Eclipse 项目（或您使用的任何构建系统）中强制使用 1.6 源格式和 1.6 目标类格式。

## 延伸阅读：

*   [是否可以在 GAE 上使用 Java 7？](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/IEAohfEN-oE) *（来自[google-appengine-java](https://groups.google.com/group/google-appengine-java)邮件列表）*
*   [Google App Engine 和 Java 版本？](https://stackoverflow.com/questions/8139477/google-app-engine-and-java-version)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T02:09:08.117

以下是最近在此宣布[的](http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes) 内容：

> 版本 1.7.3 - 2012 年 10 月 23 日
> 
> 我们鼓励您尝试使用 Java 7 和 App Engine SDK 测试您的应用程序。请注意，Java 7 不是受支持的运行时。
> 
> **我们鼓励您在 dev appserver 中尝试的 Java 7 功能：**
> 
> 开关中的字符串
> 
> 数字文字中的二进制整数文字和下划线
> 
> 多抓和更精确的再投掷
> 
> 改进了通用实例创建的类型推断（菱形）
> 
> try-with-resources 语句
> 
> 简化的可变参数方法调用

* * *

> **不支持的 Java 7 功能：**
> 
> 所有新的 Java 7 类（Google App Engine 白名单尚未更新）
> 
> 方法句柄
> 
> 调用动态字节码

# optimization - 如何提高 GPU 中的内存访问速度？(CUDA)

> ID：11006282
> 
> 赞同：2
> 
> 时间：2012-06-12T23:30:52.260
> 
> 标签：optimization, memory, cuda, gpu

首先，我需要描述我正在使用 CUDA 的应用程序。

这是一个相当标准的热流模拟。我采用一堆 3D 浮点数组（可变温度和热量，以及恒定 k 值、sar_value 和其他一些）并将它们复制到分配在 GPU 上的线性数组中。所有这些都在全局内存中。

接下来，我启动一个计算热流的核函数。我使用 2 维块构造和 1D 线程构造启动这个内核。该块对应于我们正在对其执行热流计算的模拟立方体的 x 和 y 坐标。线程对应于 z 坐标。所有线程/块坐标都是总立方体大小的倍数，以最大限度地提高性能。

接下来，在每个单元格上，我执行冗长的计算。所有的数组都是线性的，所以我准备了偏移量来计算 z、y 和 x 方向上的下一个单元格。大部分空间局部性发生在写入/读取内存中，因此纹理内存不是一个选项。总共，每次计算有 2 次写入大数组，6 次常量大数组读取（如在 300 MB 浮点数组的一个索引中），8 次可变大数组读取，6 次常量小数组读取（如 300 的立方根）兆）。所有这些都发生在两行代码中。我没有将同一内存位置的多次读取作为单独的读取包括在内，因为我假设它们已被缓存。

其次，我将描述我通过这个计算得到的结果。

我在 Tesla C1060 上获得了大约 2.25 亿个细胞/秒。在大型数据集（40-6000 万个单元）上，我发现每个单元启动 1 个线程与每 2 个单元启动 1 个线程与每 4 个单元启动 1 个线程之间的性能没有差异，一直到某个点。这向我表明，计算的限制因素是实际的内存获取。当我为多个块启动 1 个线程时，我减轻了系统上的内存过载，因此每次计算都更快，尽管计算的并行性较低 - 净没有性能提升，+ 或 - 一个或两个百分比。

我尝试了什么？我尝试将我在空间上最局部的常量大数组放入 3D 纹理内存 - 灾难性的 3-4 倍减速。我认为常量内存是不可行的，因为数据访问模式使得大数组中的每个索引只被访问一次或两次，此外，我不一定知道编译时输入的大小。我在大型常量数组上尝试过一维纹理；也不好。

我还能做些什么吗？此外，如果您可以看到每秒获取的字节数（2.25 亿/秒 * 100 左右字节），它正好在 Tesla C1060 的内存带宽的大约 10 倍之内。为什么内存是限制因素？我在某处看到有人“平铺”他们的数据集以进行类似的热流计算（我认为在“Mint”背后的人的论文中），这是什么意思？

谢谢你的任何答案。请随时在评论部分提出任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:11:34.753

> 接下来，在每个单元格上，我执行冗长的计算。所有的数组都是线性的，所以我准备了偏移量来计算 z、y 和 x 方向上的下一个单元格。

仔细考虑你在数组中获得的访问模式类型，在一个扭曲中。warp 中的线程应该以“行优先”的顺序访问连续的地址。如果您碰巧遇到了“列主要”访问模式之类的东西，那么您的代码将发出比必要更多的内存事务。

CUDA 编程指南 4.2 中的第 2.2 节，线程层次结构描述了线程索引如何映射到线程 ID。检查以查看连续的线程 ID 是否也导致（至少在很大程度上）连续的数组索引。

# php - 第 6 行的错误预期）但它有足够的

> ID：11006290
> 
> 赞同：1
> 
> 时间：2012-06-12T23:31:36.830
> 
> 标签：php, arrays, map

好的，让我们从代码开始

```
<?php
function LuhnCalc($number) {
  $chars = array_reverse(str_split($number, 1));
  $odd = array_intersect_key($chars, array_fill_keys(range(1, count($chars), 2), null));
  $even = array_intersect_key($chars, array_fill_keys(range(0, count($chars), 2), null));
  $even = array_map(function($n) { return ($n >= 5)?2 * $n – 9:2 * $n; }, $even);
  $total = array_sum($odd) + array_sum($even);
  return ((floor($total / 10) + 1) * 10 – $total) % 10;
}

print LuhnCalc($_GET['num']);
?> 
```

错误显示在以下几行中

```
 $even = array_map(function($n) { return ($n >= 5)?2 * $n – 9:2 * $n; }, $even);

  return ((floor($total / 10) + 1) * 10 – $total) % 10; 
```

错误是

> 解析错误：语法错误，意外的 T_FUNCTION，在第 6 行的 /home/MONKEY DO /public_html/gateway/crn.php 中需要 ')'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:35:29.463

错误消息说“我有一个函数，但我期望一个`)`”。它告诉您，根据解析器的语法，令牌`function`预计不会在此时发生。当您编写时，您正在使用编译器不喜欢`array_map(function(...`的 token 传递一个匿名函数。`function`

PHP 5.3 中引入了匿名函数。您可能正在运行旧版本的 PHP。检查您正在运行的版本，并在需要时进行升级。

# android - 将应用程序上传到 google play

> ID：11006291
> 
> 赞同：0
> 
> 时间：2012-06-12T23:31:52.213
> 
> 标签：android

我正在尝试在 google play 中上传我的应用程序 (.apk) 的更新版本。这个apk只有1.5mb大小，但是已经上传了20分钟了，进度条没有动。有任何想法吗？我已经尝试了 3 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:35:09.773

您可以尝试重新启动计算机。如果没有任何效果，您可能需要考虑 Google Play 当前在上传新应用程序文件时遇到网络问题以及可能发生其他问题的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:35:15.453

这可能只是您的 Internet 连接上的问题，也可能是 Google 服务器上的问题。

尝试断开连接并重新连接或更改浏览器。

# c# - 环境相关设置

> ID：11006294
> 
> 赞同：2
> 
> 时间：2012-06-12T23:32:12.947
> 
> 标签：c#, configuration-files, configurationmanager, visual-studio-2012

我有一个 Web 应用程序（带有一个 Web.config 文件），它将通过正常的“开发”、“测试”、“暂存”和“生产”环境。我试图弄清楚如何在我的 Visual Studio 项目中创建特定于环境的 Web.config 文件。

我正在寻找一种方法来提供“Web.config.testing”和“Web.config.staging”，应用程序将在运行时或编译时使用它们，基于环境变量“ENVIRONMENT=testing” ”、“ENVIRONMENT=staging”等。我查看了 Visual Studio 中的“配置管理器”，但不明白如何或是否可以将不同的设置附加到那里的不同配置。

谁能告诉我 Visual Studio 是否具有允许这种类型的环境相关配置的功能？

**更新：** Visual Studio 支持此功能，无需使用带有[Web.config 转换的外部类](http://msdn.microsoft.com/en-us/library/dd465326.aspx "Web.config 转换")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:22:14.667

更新：Visual Studio 支持此功能，无需使用带有 Web.config 转换的外部类

# mysql - MySQL中奇怪的分隔十六进制 - 需要转换为UTF8

> ID：11006295
> 
> 赞同：3
> 
> 时间：2012-06-12T23:32:25.223
> 
> 标签：mysql, ruby-on-rails, utf-8, character-encoding, latin1

好的。所以我有一个大型的遗留数据库，它支持一个高流量的网站。这些表是 latin1 编码的，我正在转换为 UTF-8。我们已经将该站点转换为 Rails，并且我们开始直接访问数据库。然而，似乎在将 utf8 字符插入数据库时​​发生了一些非常奇怪的事情。我们正在使用 Tolk (https://github.com/dhh/tolk) 将站点转换为中文，不幸的是，该站点是在将翻译表转换为 UTF-8 之前设置的。问题是我们将一个奇怪的字符格式插入到 latin1 表中用于 unicode 字符。

这是一个例子：

```
--- "xfire\xE7\x94\xA8\xE6\x88\xB7\xEF\xBC\x9F\xE8\xAF\xB7\xE7\x82\xB9\xE5\x87\xBB<a dialog-name='account_actions' href='#login' class='dialog_link login add_overlay'>Sign in</a>\xE7\xBC\x96\xE8\xBE\x91\xE4\xBD\xA0\xE7\x9A\x84\xE8\xB4\xA6\xE6\x88\xB7\xE4\xBF\xA1\xE6\x81\xAF" 
```

数据被序列化为 YAML，Rails 或数据库似乎正在做一些事情来将 unicode 中文字符转换为这种反斜杠分隔的十六进制格式。

任何想法可能会发生什么？有没有办法将这些十六进制字符串翻译成相应的 utf-8 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:46:19.877

事实证明，问题出在 YAML 上（请参阅[Rails: encoding woes with serialized hashes 尽管 UTF8](https://stackoverflow.com/questions/8558101/rails-encoding-woes-with-serialized-hashes-despite-utf8)）。

将此添加到 environment.rb 完全解决了问题：

```
YAML::ENGINE.yamler= 'syck' if defined?(YAML::ENGINE) 
```

# android - 为什么在我以前不需要它时开始使用 -libraryjars？

> ID：11006305
> 
> 赞同：14
> 
> 时间：2012-06-12T23:33:13.387
> 
> 标签：android, adt, proguard

自从我将 ADT 从 16 更新到 18（这要求 Proguard 从 4.6 更新到 4.8）以来，Proguard 的行为一直很奇怪（并且不一致？）。

最新的此类问题是当我尝试导出已签名（发布）的 APK 时，我收到以下错误：

```
Proguard returned with error code 1\. See console
Warning: com.bta.LibProj2: can't find referenced class com.bta.R$string
Warning: com.bta.MyDlg1: can't find referenced class com.bta.R$string
Warning: com.bta.MyMenu: can't find referenced class com.bta.R$menu
Warning: com.bta.R: can't find referenced class com.bta.R$attr
Warning: com.bta.R: can't find referenced class com.bta.R$drawable
Warning: com.bta.R: can't find referenced class com.bta.R$menu
Warning: com.bta.R: can't find referenced class com.bta.R$string
Warning: com.bta.myapp.MyAppActivity$1: can't find referenced class com.bta.myapp.MyAppActivity
Warning: com.bta.myapp.MyAppActivity$ELicenseResponse: can't find referenced class com.bta.myapp.MyAppActivity
Warning: com.bta.myapp.MyAppActivity$MyLicenseCheckerCallback$1: can't find referenced class com.bta.myapp.MyAppActivity$MyLicenseCheckerCallback
Warning: com.bta.myapp.MyAppActivity$MyLicenseCheckerCallback$1: can't find referenced class com.bta.myapp.MyAppActivity
Warning: com.bta.myapp.R$array: can't find referenced class com.bta.myapp.R
Warning: com.bta.myapp.R$layout: can't find referenced class com.bta.myapp.R
Warning: com.bta.myapp.R$xml: can't find referenced class com.bta.myapp.R
Warning: there were 49 unresolved references to classes or interfaces.
         You may need to specify additional library jars (using '-libraryjars').
java.io.IOException: Please correct the above warnings first.
    at proguard.Initializer.execute(Initializer.java:321)
    at proguard.ProGuard.initialize(ProGuard.java:212)
    at proguard.ProGuard.execute(ProGuard.java:87)
    at proguard.ProGuard.main(ProGuard.java:493) 
```

我确实注意到了添加`-libraryjars`proguard.cfg 的建议，但我以前从未需要这样做（而且我没有更改代码中的任何内容，我所做的只是将 Proguard 从 4.6 更新到 4.8）。这是否表明我的开发环境配置有问题？

此外，我检查了 Proguard 的疑难解答部分中的[Can't find referenced class](http://proguard.sourceforge.net/manual/troubleshooting.html#unresolvedclass)：它指的是忘记或忽略指定一个库`-libraryjars`（我承认），但我从未指定任何库，它以前*一直*有效！发生了什么变化？

我的 proguard.cfg 文件顺便说一句以：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/* 
```

知道发生了什么吗？为什么 Proguard 开始让我这么难受？（我已经用它顺利滑行了一年多）我的系统配置中是否缺少一些基本的东西？

顺便说一句，我确实尝试通过在行中指定所有库来添加我一直在使用的库`-libraryjars`，但 Proguard 的行为只会变得更糟：它会失败而不会给出我上面引用的任何错误日志。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T04:45:23.737

问题解决了。~~在 SO 中搜索了很多线索后，我终于找到了 Proguard 开发人员本人的[这个提示](https://stackoverflow.com/a/8017068)：~~

 ~~```
-dontwarn scala.** 
```~~ 

我没有使用任何包含“scala”的东西，我也不知道 scala 是什么。但这让我想到了`-dontwarn`在**我自己的应用程序包**上放置一个：

```
-dontwarn com.bta.** 
```

那成功了。

作为记录，导致我找到这个提示的搜索短语是：[proguard admob "can't find referenced class"](https://stackoverflow.com/search?q=proguard%20admob%20%22can%27t%20find%20referenced%20class%22&submit=search)。

PS Proguard 的建议`You may need to specify additional library jars (using '-libraryjars')`甚至没有朝着正确的方向发展……

**更新：**虽然`-dontwarn com.bta.**`允许生成签名的 APK，但当我尝试使用以下命令启动它时它就崩溃了：

```
ClassNotFoundException: com.bta.myapp.MyAppActivity in loader dalvik.system.PathClassLoader[/data/app/com.bta.myapp.myapp-1.apk]. 
```

~~什么样的恶梦。~~

 ~~~~**更新2：** `-dontwarn com.bta.**`结果过于包容。我将其更改为：~~

 ~~```
-dontwarn com.bta.myapp.MyAppActivity.R** 
```~~ 

~~现在一切都运行良好，没有发生任何事故。~~ 什么样的恶梦。

在浪费了太多时间来调试应该可以*节省*我时间的工具之后，我发现了问题的根源。**[这是 Android SDK 工具中的一个错误](http://code.google.com/p/android/issues/detail?id=27940#c25)**。它被记录为已在 r17 中解决，但我使用的是今天最新的（2012 年 6 月 18 日），**但尚未解决！**（见评论 24）。[评论 25](http://code.google.com/p/android/issues/detail?id=27940#c25)还描述了允许我现在进行实际开发的解决方法。

错误是复杂系统中的事实。但是，Proguard 和向 Proguard 提供输入的构建工具都不能提供任何有用的错误消息（实际上它们完全相反），这表明[谷歌推荐](http://developer.android.com/sdk/eclipse-adt.html#installing)的 Android 开发工具的“方法论”存在某些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:45:28.520

在 SDK 和 ADT 的最新更新后，我遇到了类似的问题，最终需要我从头开始检查我的项目。尝试检查项目的新副本，看看是否可行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T21:40:50.900

首先，调查 Proguard 告诉您的内容：

```
Warning: com.bta.LibProj2: can't find referenced class com.bta.R$string
Warning: com.bta.MyDlg1: can't find referenced class com.bta.R$string 
```

它找不到 com.bta.R$string。为什么不？com.bta.R$string 在那里吗？不是源代码，我们现在不关心源代码。.class 文件在那里吗？如果它在文件系统中，它实际上是否在 Proguard 配置文件中被引用？确保你知道它应该如何被包括在内；什么是引用 com.bta.R$string？您可能会使用 javap 来解决这个问题。

在这种情况下使用更好的大锤不是关闭警告（因为它们实际上是在警告您一些重要的事情），而是告诉 Proguard 保留缺少的 com.bta 类，如下所示：

```
-keep class com.bta.** 
```

考虑图书馆罐子的建议只是一个建议。这显然是 proguard 的常见错误配置，因此添加注释以将人们指向该方向是完全合理的。它没有解决您的问题，但这并不意味着它不是有用的建议。

> 顺便说一句，我确实尝试通过在 -libraryjars 行中指定所有这些库来添加我一直在使用的库，但是 Proguard 的行为只会变得更糟：它会失败而不会给出我上面引用的任何错误日志。

您可能需要那些 -libraryjars 条目。他们不会让问题变得更糟。您已经从有 N 个错误（未指定 -libraryjars）的配置转变为有 N - 1 个错误的配置。修复 N - 1 解决方案。如果有的话，它会给出什么错误？如果没有错误，如果重新打开警告会发生什么？

仅限专家：实际上，您可以在没有 -libraryjars 条目的情况下进行有用的配置，但您需要完全了解Proguard 对您的代码所做的*确切操作。*在我的脑海中，除了性能之外，我想不出任何理由来解释你为什么要这样做。~~

# javascript - 如果之前以编程方式更改了值，则手动更改值不会触发 onChange 事件

> ID：11006314
> 
> 赞同：6
> 
> 时间：2012-06-12T23:34:19.043
> 
> 标签：javascript, event-handling, mobile-safari

我们有一个输入`type = "number"`，我们已经设置了一个`onChange`方法。

输入的默认值为 0。

然后我们以编程方式将值更改为 10。

现在我们再次手动将值更改为 0。

`onChange`手动更改时不会调用该方法。我认为这是因为当我们以编程方式将它们的值更改为 10 时，没有调用该事件。所以在某种程度上，控件认为该值仍然是 0。

仅当我将值手动设置为程序更改之前的值时才会发生这种情况。如果我使用任何其他值进行手动更改，则`onChange`事件会正确触发。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T02:34:13.463

以编程方式更改表单控件的值不会触发其更改处理程序，可能是因为[*更改*](http://www.w3.org/TR/html401/interact/scripts.html#adef-onchange)事件被指定为在用户更改值并且控件失去焦点之后发生。程序化更改不遵循该顺序（尽管可以在元素上调度程序化更改事件，但以编程方式设置焦点和模糊以模仿用户操作并没有帮助）。

HTML5 引入了一个新的[*输入*](http://dev.w3.org/html5/spec/single-page.html#handler-oninput)事件，只要输入接收到用户输入就会触发：

```
<input id="i0" oninput="alert(this.value);" value=""> 
```

您可以使用它而不是 onchange，但它会在每次按键以及将文本粘贴或拖动到输入时触发。

但是请注意，没有浏览器完全支持 HTML5（可能永远不会，因为它是一个移动的目标），因此如果不支持*输入*事件，您将需要提供功能测试和回退机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T10:17:21.337

输入需要关注才能触发 onchange。如果以编程方式设置输入值不会触发 onchange 事件，那实际上是一件好事。它会在输入和代码之间创建一个循环设置。

# javascript - 根据输入值隐藏/显示字段

> ID：11006316
> 
> 赞同：0
> 
> 时间：2012-06-12T23:34:33.270
> 
> 标签：javascript, show-hide

我试图根据“full_day”的值隐藏div类“hideme”如果“full_day”的值= 1，那么div类“hide me”必须向下滑动，如果不是，那么div类hideme一定不能可见的。我究竟做错了什么

（我只使用了这部分： hideme: ("Hello Hideme") 作为一个例子来使用 - 及时这将被其他输入字段替换，例如复选框和单选按钮）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Conference Form</title>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jqueryui.js"></script>
<link href="style.css" rel="stylesheet" type="text/css"/>
<link href="css/jqueryui.css" rel="stylesheet" type="text/css" />

<body>

<div id="wrapper">
<div id="header"></div>

<table width="899" border="1" align="left" cellpadding="1">
  <form action="" method="get" name="myform">

  <tr>
    <td width="275"><label>Company Name</label></td>
    <td width="180"><input type="text" name="companyname" id="companyname" /></td>
    <td width="27">&nbsp;</td>
    <td width="223">Enquiry Date</td>
    <td width="160"><input type="text" name="enquiry_date" id="enquiry_date" class="datepicker" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Conference Date In</td>
    <td><input type="text" name="conference_date_in" id="conference_date_in" class="datepicker" /></td>
    <td>&nbsp;</td>
    <td>Conference Date Out</td>
    <td><input type="text" name="conference_date_out" id="conference_date_out" class="datepicker" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>Total Days</td>
    <td><input type="text" name="total_days" id="total_days" /></td>
  </tr>
  <tr>
    <td>Number of Delegates</td>
    <td><input type="text" name="no_of_delegates" id="no_of_delegates" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Accommodation:</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>Check in Date</p></td>
    <td><input type="text" name="check_in_date" id="check_in_date" class="datepicker" /></td>
    <td><p>&nbsp;</p></td>
    <td><p>Check out Date</p></td>
    <td><p>
      <input type="text" name="check_out_date" id="check_out_date" class="datepicker" />
        </p></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>Total Days Accommodation</td>
    <td><input type="text" name="total_days_acc" id="total_days_acc" /></td>
  </tr>
  <tr>
    <td>Number of Rooms:</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Single</td>
    <td><input type="text" name="no_of_rooms_single" id="no_of_rooms_single" /></td>
    <td>&nbsp;</td>
    <td>Double / Twin</td>
    <td><input type="text" name="no_of_rooms_double" id="no_of_rooms_double" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Contact Person</td>
    <td><input type="text" name="contact_person" id="contact_person" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Telephone Number</td>
    <td><input type="text" name="tel_no" id="tel_no" /></td>
    <td>&nbsp;</td>
    <td>Fax Number</td>
    <td><input type="text" name="fax_no" id="fax_no" /></td>
  </tr>
  <tr>
    <td>Cell Number</td>
    <td><input type="text" name="cell_no" id="cell_no" /></td>
    <td>&nbsp;</td>
    <td>Email</td>
    <td><input type="text" name="email" id="email" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Full Day Conference @ R260.00 p/p</td>
    <td><input type="text" name="full_day" id="full_day" /></td>
    <td>&nbsp;</td>
    <td>Total Cost Full Day</td>
    <td><input type="text" name="total_full" id="total_full" readonly="readonly" /></td>
  </tr>
  <tr>
    <td>Half Day Conference @ R240.00 p/p</td>
    <td><input type="text" name="half_day" id="half_day" /></td>
    <td>&nbsp;</td>
    <td>Total Cost Half Day</td>
    <td><input type="text" name="total_half" id="total_half" readonly="readonly" /></td>
  </tr>
  <tr>
    <td>Single Rooms @ R480.00 p/p</td>
    <td><input type="text" name="single_rooms" id="single_rooms" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Double / Twin Rooms @ R720.00 p/p</td>
    <td><input type="text" name="double_rooms" id="double_rooms" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Data Projector @ R400.00 rental p/day</td>
    <td><input type="text" name="data_proj" id="data_proj" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Sub Total</td>
    <td><input type="text" name="sub_total" id="sub_total" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td height="23">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  </form>
</table>

</div>

<div id="hideme">
Hello Hideme
</div>

<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>

<script type="text/javascript">

$(function() {
    $(".datepicker").datepicker({ minDate: -0, maxDate: "+100M +10D",dateFormat: 'dd-mm-yy'})
    ({
        changeMonth: true,
        changeYear: true,
    });
        });

var enquiry_date = $.datepicker.formatDate('dd-mm-yy', new Date());
document.getElementById('enquiry_date').value = enquiry_date;

var calcDate = function() {
    var start = $('#conference_date_in').datepicker('getDate');
    var end = $('#conference_date_out').datepicker('getDate');
    var days = (end - start) / 1000 / 60 / 60 / 24 + 1;

    if(days==0) {days=1
    }
    if( days >= 0 ) {
    document.getElementById('total_days').value = days;
    } 
        }

$('#conference_date_out').change(calcDate);
$('#conference_date_in').change(calcDate);

var calcDateAcc = function() {
    var startacc = $('#check_in_date').datepicker('getDate');
    var endacc = $('#check_out_date').datepicker('getDate');
    var daysacc = (endacc - startacc) / 1000 / 60 / 60 / 24;

    if(daysacc==0) daysacc=1
    if( daysacc >= 0 ) {
    document.getElementById('total_days_acc').value = daysacc;
    } 
        }

$('#check_in_date').change(calcDateAcc);
$('#check_out_date').change(calcDateAcc);

function calculateFull()
{
    var fulldays = parseInt(document.getElementById("full_day").value);

    var no_of_delegates = parseInt(document.getElementById("no_of_delegates").value);

    var fullprice = 260;

    var resultfull =  fulldays * no_of_delegates * fullprice;

    document.getElementById("total_full").value = resultfull;
    }

    $('#full_day').change(calculateFull).keyup(calculateFull);

    function calculateHalf()
{
    var halfdays = parseInt(document.getElementById("half_day").value);

    var no_of_delegates = parseInt(document.getElementById("no_of_delegates").value);

    var halfprice = 240;

    var resulthalf =  halfdays * no_of_delegates * halfprice;

    document.getElementById("total_half").value = resulthalf;
    }

    $('#half_day').change(calculateHalf).keyup(calculateHalf);

    $(document).ready(function(){
    $("#full_day").change(function(){

        if ($(this).val() == "1" ) {

            $("#hideme").slideDown("fast"); //Slide Down Effect

        } else {

            $("#hideme").slideUp("fast");    //Slide Up Effect

        }
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:44:37.180

.keyup 也可以，如果寻找整数删除引号

```
<div id="hideme">
 Hello Hideme
</div>

<input type='text' id="full_day"/>

$("#full_day").change(function(){

    if ($('#full_day').val() == 1) {   
        $("#hideme").hide("fast"); //Slide Down Effect
    }
    else {
        $("#hideme").show("fast");    //Slide Up Effect
    }
}); 
```

演示 - [http://jsfiddle.net/3XGGn/8/](http://jsfiddle.net/3XGGn/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:41:41.507

使用`keyup`事件而不是更改

```
$(document).ready(function(){
    $("#full_day").keyup(function(){
        if ($(this).val() == "1" ) {
            $("#hideme").slideDown("fast"); //Slide Down Effect
        } else {
            $("#hideme").slideUp("fast");    //Slide Up Effect
        }
    });
}); 
```

JsFiddle 示例[http://jsfiddle.net/n2HPk/7/](http://jsfiddle.net/n2HPk/7/)

# node.js - 使用 PassportJS 和 Connect for NodeJS 来验证 Facebook 用户

> ID：11006318
> 
> 赞同：6
> 
> 时间：2012-06-12T23:34:50.667
> 
> 标签：node.js, facebook, connect, passport.js

我正在尝试使用 connect 将护照集成到我的 nodejs 服务器中，但似乎无法正确执行。所有指南/示例都使用 expressJS，所以我尽力重新格式化代码以使用我的代码，但我似乎无法让它工作。相关部分写在下面。有人对可能是什么问题有任何建议吗？passport.authenticate() 似乎从未被调用（至少 facebook 身份验证回调中的 console.log 消息从不打印）。我目前没有将任何内容保存到数据库中，所以希望这个问题应该是我刚刚错过的非常简单的事情。

唯一想到的是我对 facebook 的潜在回调，它是一个 localhost url（因为我仍在本地开发它）。我能够使用everyauth（来自纯粹的本地实例）很好地使用facebook进行身份验证，但切换到passportJS，因为我在那里遇到了passportJS似乎解决的不同问题。

```
passport = require('passport');
  fpass = require('passport-facebook').Strategy;

passport.serializeUser(function(user,done){
    done(null, user);
});
passport.deserializeUser(function(obj,done){
    done(null,obj);
});

passport.use(new fpass({
        clientID:'facebook app id',
        clientSecret:'facebook app secret',
        callbackURL:'http://localhost:3000/auth/facebook/callback'
    },
    function(accessToken, refreshToken, fbUserData, done){
        console.log('got here');
        return done(null,fbUserData);
    }
));

    function checkLoggedIn(req, res, next){
        console.log("req.user: " + req.user);
        if(req.user)
            next();
        else{
            console.log('\nNot LOGGED IN\n');
            if(req.socket.remoteAddress || req.socket.socket.remoteAddress == '127.0.0.1'){
                var folder,contentType;
                console.log('req url = '+req.url);
                if(req.url == '/'){
                    folder = __dirname + '/landingPage.html';
                    contentType = 'text/html';
                }
                else if(req.url == '/auth/facebook'){
                    passport.authenticate('facebook');
                    return;
                }
                else if(req.url == '/auth/facebook/callback'){
                    passport.authenticate('facebook', {failureRedirect: '/failbook', successRedirect:'/'});
                    return;
                }
                if(folder){
                    console.log('got to folder part\n\n');
                    fs.readFile(folder, function(error, content){
                      if(error){
                        res.writeHead(500);
                        res.end();
                      }
                      else{
                        res.writeHead(200, {'Content-Type': contentType});
                        res.end(content);
                      }
                    });
                  }
                    else{ res.writeHead(500); res.end();}
            }
            else {res.writeHead(500); res.end();}
        }
    }

  connect.createServer(
    connect.cookieParser(),
    connect.bodyParser(),
    connect.session({secret:'wakajakamadaka'}),
    passport.initialize(),
    passport.session(),
    checkLoggedIn).listen(8888);
  console.log('Server has started.');
} 
```

有人有什么建议或看到我在做什么吗？我的另外两个选择是切换回everyauth 并弄清楚那里发生了什么，或者切换到 ExpressJS，但我宁愿不使用其中任何一个选项。

最好的，
萨米

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T00:01:29.153

`passport.authenticate`返回一个通常在中间件链中使用的函数，该函数`req`由`res`Express 调用。

它将在其他中间件或路由处理程序（例如您的`checkLoggedIn`函数）中独立工作，但您必须显式调用使用 , 返回的函数`req`，`res`并`next`让它处理请求。

```
else if(req.url == '/auth/facebook'){
  // NOTE: call the function returned to process the request
  passport.authenticate('facebook')(req, res, next);
  return;
} 
```

否则看起来不错。让我知道这是否能让你启动并运行。

**更新**

Jared 在 stackoverflow 之外帮助了我一点，我们已经完全解决了这个问题。我正在更新此答案以包含我们发现的新信息。

**1)**一个问题显然是在 Express 中存在 redirect() 中间件，但在 Connect 中不存在（至少当前版本不存在）。使用 connect 时，您需要将 PassportJS 模块中 authenticate.js 的第 97 行更改`return res.redirect(options.successRedirect);`为：

```
var redirect = function(redirectionURL){
    res.writeHead(302, {'location':redirectionURL});
    res.end();             
}

return redirect(options.successRedirect); 
```

注意 -`options.successRedirect`以上与`successRedirect`回调函数代码中的相同。这将是`passport.authenticate('facebook', {failureRedirect: '/failbook', successRedirect:'/'});`我问题中的代码行。

**2）**另一个是我在我的应用程序中使用集群模块（不是我上面的代码片段中显示的东西）。这意味着 nodeJS 应用程序没有正确读取会话数据，这导致了我的问题。**此问题将影响任何依赖会话的库，包括所有其他使用会话的身份验证模块（例如everyauth、connect-auth 等）。**我将引用 Jared 的解决方案：

> 快速回复：您是使用集群还是启动多个服务器实例？
> 
> 如果是这样，会话的内置 MemoryStore 将无法正常工作，您需要切换到如下内容： [https ://github.com/visionmedia/connect-redis](https://github.com/visionmedia/connect-redis)
> 
> 或此处列出的其他会话存储之一： [https ://github.com/senchalabs/connect/wiki](https://github.com/senchalabs/connect/wiki)
> 
> 原因是您最终会遇到一个不提供原始请求的服务器，因此它自己的内存中没有该会话信息。如果没有 100% 的时间调用 deserializeUser，这听起来可能会发生什么。

希望这对在这里成功的人有所帮助！

# c++ - 在对象指针数组上调用函数

> ID：11006329
> 
> 赞同：1
> 
> 时间：2012-06-12T23:36:07.393
> 
> 标签：c++, arrays, pointers, hash

我在任何地方都找不到类似的东西。我有一个指向哈希表的对象（链表）的指针数组：

```
LinkList * table[TABLE_SIZE];
for (int i = 0; i < TABLE_SIZE; i++)
    table[i] = NULL; 
```

在我的哈希表类的一个函数中，我需要调用数组中`LinkList`对象的函数之一。`table`我这样称呼它：

```
void HashMap::add_customer(string first, string last, string phone) {   
    int hash = get_hash(phone);
    if (table[hash] == NULL) {
        table[hash] = new LinkList;
    }
    table[hash]->add_customer(first, last, phone); // I HATE THIS LINE
} 
```

一切都编译得很好，但是当我在运行时执行该`table[hash]->add_customer()`行时，我得到一个`Segmentation Fault`错误。当这条线被注释掉时，我没有收到任何错误，但显然，我不能将任何客户添加到我的哈希表中。这不是正确的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:45:06.230

您必须将指针数组初始化为 NULL，因为它们将被分配在堆栈/堆上或带有垃圾值的任何地方......

```
LinkList * table[TABLE_SIZE];
memset(table, NULL, sizeof(LinkList *) * TABLE_SIZE); 
```

假设您已正确初始化，请检查您的哈希并断言它们确实是哈希 < TABLE_SIZE

试试这个：

```
 int hash = get_hash(phone) % TABLE_SIZE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:45:26.173

对于哈希映射的行为，这个片段看起来是正确的。我会检查您的 LinkList 实现中的 add_customer 方法。尝试在此哈希映射之外使用您的链接列表，以确保它们按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:46:14.007

试试这个：

```
LinkList * table[TABLE_SIZE] = {}; 
```

这会使您的指针无效。

* * *

你能确认 get_hash 返回值 < TABLE_SIZE 吗？添加断言或其他内容。

# state - 状态代码应该在Controller类中处理还是在unrealscript中的Pawn类中处理？

> ID：11006334
> 
> 赞同：0
> 
> 时间：2012-06-12T23:37:10.070
> 
> 标签：state, unreal-development-kit, unrealscript

我正在将 sprint 状态写入我的 UDK 游戏中的自定义 pawn 类。我正在查看 Epic 用于管理状态的示例代码，并且大部分游戏逻辑位于 Controller 类而不是 Pawn 类中。这对我来说似乎倒退了。我最初认为控制器只是处理 AI 和玩家输入，现在我不确定在哪里放置我自己的状态代码。

例如，PlayerController.uc 文件有 PlayerWalking、PlayerClimbing 等，但似乎也改变了 Pawn 的状态：

```
// player is climbing ladder
    state PlayerClimbing
    {

        ignores SeePlayer, HearNoise, Bump;

            event NotifyPhysicsVolumeChange( PhysicsVolume NewVolume )
            {
                if( NewVolume.bWaterVolume )
                {
                    GotoState( Pawn.WaterMovementState );
                }
                else
                {
                    GotoState( Pawn.LandMovementState );
                }
            }
... 
```

由于冲刺状态应该否定 PlayerWalking 状态，我应该将冲刺状态代码放在 Controller 类而不是 Pawn 中吗？这个逻辑应该怎么处理？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:26:18.103

PlayerWalking 和 PlayerClimbing 更多地指的是 Pawns 的物理和动画模式，而不是实际的步行与冲刺。

一种基于状态的简单方法是创建一个派生自 PlayerWalking 的 PlayerSprinting 状态，然后在这两种状态下，在进入该状态时将您的 GroundSpeed 设置为您想要的状态。

一个例子：

```
state PlayerSprinting extends PlayerWalking
{
    event BeginState(Name PreviousStateName)
    {
         //coped from UTPawn
        DoubleClickDir = DCLICK_None;
        bPressedJump = false;
        GroundPitch = 0;
        if ( Pawn != None )
        {
            Pawn.ShouldCrouch(false);
            if (Pawn.Physics != PHYS_Falling && Pawn.Physics != PHYS_RigidBody) // FIXME HACK!!!
                Pawn.SetPhysics(Pawn.WalkingPhysics);
        }
        //END UTPawn

        //Ground speed modify
        GroundSpeed=SprintSpeed;
    }
} 
```

# mysql - 使用 eclipselink 和 mysql 持久化数据时的奇怪行为

> ID：11006340
> 
> 赞同：0
> 
> 时间：2012-06-12T23:37:51.197
> 
> 标签：mysql, spring, jpa, eclipselink, spring-roo

我正在开发一个新的应用程序，我的起点是 Spring Roo，所以我遵循与它相同的架构。

我选择 eclipselink 作为我的 JPA 实现，选择 MYSQL 作为我的数据库。

该应用程序的核心是一个网络爬虫，它从特定网站收集 HTML 并处理 HTML，从中提取一些数据，这些提取的数据与 JPA 实体一起保存。

在我的开发环境中一切正常，爬虫运行速度非常快，所有数据都存储在数据库中。

但是，当部署在我的测试环境中时，该环境运行在亚马逊 ec2 之上（使用弹性 beanstalk）并连接到远程 mysql 服务器（一个便宜的 hostgator 计划，因为用于测试的亚马逊 RDS 非常昂贵），数据实际上变得一团糟不是所有的数据，一个特定实体的一个特定字段得到的它的数据都搞砸了。

最有趣的是我调用了persist()方法并在使用同一个实体发送通知电子邮件之后，并且电子邮件数据是正确的，但是当eclipselink（或连接器）发送数据时，它存储了一些奇怪的数据库值，例如：

> 456d207472c3a26e7369746f207061726120554e49444144452044452054524154414d454e544f20494e5445524e4143494f4e2e2e2e

它正确地保持 1 个值，然后保持 1 个错误。

有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:52:40.767

当驱动程序和数据库不匹配时，我也遇到过类似的问题。检查您的 jdbc 驱动程序的确切版本是否与您的数据库的确切版本匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:38:39.357

我自己发现了这个错误，它与编码问题有关。

我正在使用 phpmyadmin 浏览这些数据，它不支持我在应用程序中使用的编码类型和数据库类型。

当我用不同的客户端检查数据时，它显示正确。

奇怪的是，即使在 phpmyadmin 上，也只有包含特殊字符的行显示错误

# java - 在 Struts2 中重定向时在 url 中传递参数

> ID：11006341
> 
> 赞同：3
> 
> 时间：2012-06-12T23:38:39.060
> 
> 标签：java, struts2

> **可能重复：**
> [Strut2 - 在下一个操作中获取属性值](https://stackoverflow.com/questions/5221475/strut2-get-property-value-in-next-action)

我正在尝试使用 Struts2 实现以下目标

```
response.sendRedirect("Pay.jsp?msg=transfer"); 
```

这就是我正在做的事情：

```
 <action name="AddPayAction" class="controller.AddPayAction">
            <param name="paraA"></param>
            <param name="paraB"></param>
            <param name="msg">SomeMessage</param>
            <result name="error">/Error.jsp</result>
            <result name="success" type="redirect">/Pay.jsp</result>
 </action> 
```

为什么上述内容没有被重定向的任何建议：

```
 Pay.jsp?msg=SomeMessage 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T11:57:25.953

到目前为止，对我有用的解决方案是

```
 <result name="success" type="redirect">
                <param name="location">/Pay.jsp?msg=${msg}</param>
 </result> 
```

msg 的 setter 和 getter 在 action 中定义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T05:57:20.077

```
<action name="AddPayAction" class="controller.AddPayAction">
      <result name="success" type="redirectAction">
        <param name="actionName">Pay</param>
        <param name="msg">SomeMessage</param>
      </result>
  </action>

  <action name="Pay">
      <result name="success">/Pay.jsp</result>
  </action> 
```

如果你想传递一个变量值，例如`msg`声明了它的getter/setter，`AddPayAction`那么使用这个

```
<param name="msg">${msg}</param> 
```

[一个类似的帖子](https://stackoverflow.com/a/5242013/456135)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T00:01:52.943

我认为应该是这样的：

```
<action name="AddPayAction" class="controller.AddPayAction">
    <result name="error">/Error.jsp</result>
    <result name="success" type="redirect">
        <param name="location">Pay.jsp</param>
        <param name="paraA"></param>
        <param name="paraB"></param>
        <param name="msg">SomeMessage</param>
    </result>
</action> 
```

[请参阅http://struts.apache.org/2.1.6/docs/redirect-result.html](http://struts.apache.org/2.1.6/docs/redirect-result.html)中的示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T06:27:17.047

查看您的代码，您似乎只想在 JSP 中结束操作，所以我不明白您为什么要尝试使用`redireciton`type 来完成它。我建议使用默认重定向类型：`dispatcher`

```
<action name="AddPayAction" class="controller.AddPayAction">
    <result name="error">/Error.jsp</result>
    <result name="success">/Pay.jsp</result>
</action> 
```

请注意，作为`dispatcher`默认类型，您不需要`type="dispatcher"`在结果中写入。因此，现在，如果您想在 JSP 中使用可用的变量，您只需在操作中使用其 get/set 方法声明这些变量。例如：

```
private String msg;

public String AddPayAction() {

    // your action code

    this.setMsg("my message");

    return SUCCESS;

}

public String getMsg() {

    return msg;
}

public void setMsg(String msg) {

    this.msg= msg;
} 
```

查看可用的[结果类型](http://struts.apache.org/2.1.6/docs/result-types.html)。

# cron - 如何设置 rsync cron 作业以同步 Maildir？

> ID：11006347
> 
> 赞同：0
> 
> 时间：2012-06-12T23:39:51.800
> 
> 标签：cron, rsync, postfix-mta, dovecot, maildir

我想移动到一个新的服务器，并`Maildir/`通过使用 cron 作业来自动化将保持同步的内容移动到切换点的过程。我不想启用 root 登录，也不想启用 LDA 用户名 postalworker 的登录。服务器是运行 postfix/dovecot 的 CentOS 5。

处理这个问题的最佳方法是什么？我已经拥有为另一个用户名工作的公钥/私钥 ssh，但我如何绕过直接以邮递员身份登录？的内容`Maildir/`都归邮递员所有，似乎都有`0600`权限。因此，使用组权限需要重置所有权限。必须有一种更简单的方法，我错过了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:00:39.467

您可以在以 root 身份运行的源服务器上使用 rsync

在源上以 root 身份运行

```
 rsync -avz -e ssh --delete /stuff/ user@desktop ip:/home/laptop/stuff/ 
```

如果目标用户没有正确的权限，则可以以 root 身份运行 rync cron，然后同步目录

所以它看起来像这样

```
*/2 * * * * root rsync -avz -e ssh --delete /stuff/ user@desktop ip:/home/laptop/stuff/ 
```

然后

```
*/10 * * * * root rsync -avz --delete /home/laptop/stuff /Maildir/ 
```

# php - 我如何将 MYSQL 行计数到 PHP 中的特定行？

> ID：11006352
> 
> 赞同：3
> 
> 时间：2012-06-12T23:40:34.733
> 
> 标签：php, mysql, count, sql-order-by, row

我有一个表，它充当自动排队的文件的保管箱。

我根据两件事来排序文件的优先级，日期和时间，以及是否已经过验证。

这是我的查询：

```
$dropcount = mysql_query("SELECT COUNT(*) FROM queue WHERE status=2 OR status=3 
OR status=4 ORDER BY authorised DESC, timestamp DESC;"); 
```

我需要做的是计算用户当前文件前面有多少行，因为这将计算每一行，包括当前用户后面的文件。

谢谢你。

我的表如下所示：

[http://tabbidesign.com/table.png](http://tabbidesign.com/table.png)

它的工作方式是如果将文件添加到队列中。但是，如果该文件被授权，它优先于未经验证的文件，这意味着它需要被计算在内，即使它是在一些未经验证的苍蝇之后添加的。

状态列说明文件是否为： - 正在处理

- 在 Dropbox 中排队

- 被用户取消

- 被管理员取消

编辑：好的@curtisdf's answer如果我做了以下工作：

```
$countauth =
SELECT COUNT(*)
FROM queue
WHERE (status=2 OR status=3 OR status=4)
AND authorised=1
AND timestamp < $timestamp

$countnorm =
SELECT COUNT(*)
FROM queue
WHERE (status=2 OR status=3 OR status=4)
AND authorised=0
AND timestamp < $timestamp

$actualcount = $countnorm + $countauth; 
```

我如何将其合并到一个查询中，或者这不可能？

**解决方案**

```
SELECT COUNT(*)FROM queue WHERE (status=2 OR status=3 OR status=4)AND 
timestamp < $timestamp OR authorised=1 
```

由@curtisdf 发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:51:11.047

假设您的`idqueue`列是主键并且它是自动递增的，那么使用它来过滤掉以后的 ID 怎么样？就像是：

```
SELECT COUNT(*) 
FROM queue 
WHERE status=2 OR status=3 OR status=4 
AND idqueue < $currentFileId
ORDER BY authorised DESC, timestamp DESC 
```

编辑：知道如何回答有点困难，因为您的表格有很多列，而且不清楚您将所有列用于什么。`status`例如，与该列相比，该列是什么意思`authorized`？但是无论如何，由于您`ORDER BY`对此查询无关紧要，并且由于您正在寻找在给定文件之前进入的授权文件，所以这个怎么样：

```
SELECT COUNT(*)
FROM queue
WHERE (status=2 OR status=3 OR status=4)
AND authorised=1
AND timestamp < $timestamp 
```

编辑2：好的，现在我知道你在追求什么。:-) 如果您只是删除了“AND authorised=X”部分，我相信您可以在一个查询中完成。这假设您的`authorised`列仅具有`0`or的值`1`。但如果它有更多，那么你可以通过将`WHERE ... AND ...`每个查询的部分包装在它们自己的括号中来做到这一点，如下所示：

```
SELECT COUNT(*)
FROM queue
WHERE (
    (status=2 OR status=3 OR status=4)
    AND authorised=1
    AND timestamp < $timestamp
) OR (
    (status=2 OR status=3 OR status=4)
    AND authorised=0
    AND timestamp < $timestamp
) 
```

这可以进一步简化：

```
SELECT COUNT(*)
FROM queue
WHERE (status=2 OR status=3 OR status=4)
AND timestamp < $timestamp
AND (authorised=1 OR authorised=0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T23:53:25.147

您需要添加 where 语句：

```
$dropcount = mysql_query("SELECT COUNT(*) FROM queue WHERE (status=2 OR status=3
OR status=4) AND authorised=1 and timestamp<'$currentUserTimeStamp'  ORDER BY 
authorised DESC, timestamp DESC;"); 
```

如果您不知道当前用户时间戳，则需要先选择它。

```
$result = mysql_query("select `timestamp` from queue where (status=2 or status=3 or 
status=4) and `userid`='$user'");
$row = mysql_fetch_row($result);
$currentUserTimeStamp = $row[0]; 
```

当然，我已经为用户 ID 编好了列名。

# python - Python 描述符在 Python 2.7 中不起作用

> ID：11006354
> 
> 赞同：5
> 
> 时间：2012-06-12T23:40:37.557
> 
> 标签：python, python-3.x, python-2.7, compatibility

`Python 2`此代码在和中产生不同的输出`Python 3`。

```
class Descriptor(object):
    def __get__(self, instance, owner):
        print('read')
        return 1

    def __set__(self, instance, value):
        print('write')

    def __delete__(self, instance):
        print('del')

class C():
    a = Descriptor()

c = C()                                
c.a                                    
c.a = 3
del c.a
c.a

print('finished') 
```

Python 2 的输出是：

```
read
read
finished 
```

对于 Python 3，它是：

```
read
write
del
read
finished 
```

为什么会这样？描述符与描述符有何`Python 2`不同`Python 3`？

这也没有任何意义，因为[http://docs.python.org/release/3.0.1/reference/datamodel.html#invoking-descriptors清楚地描述了与](http://docs.python.org/release/3.0.1/reference/datamodel.html#invoking-descriptors)[http://docs.python.org/reference/](http://docs.python.org/reference/datamodel.html#invoking-descriptors)完全相同的 内容[datamodel.html#invoking-descriptors](http://docs.python.org/reference/datamodel.html#invoking-descriptors)

（这些是 和 的文档`Python 2.7`。`Python 3.0`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T23:45:52.893

编辑：正如 Ned Deily 在评论中准确指出的那样，发生这种情况的**原因**是您的类`C`是 Python 2 上的旧式类，因为您没有指定`object`或另一个新式类作为其基类。

* * *

因为在 Python 2 上，当您创建一个新的实例属性`c.a`时，`c.a = 3`它会隐藏位于`C.a`.

```
c = C()
c.a
c.a = 3
print c.__dict__['a']
print C.__dict__['a']
del c.a
c.a 
```

给出：

```
read
3
<__main__.Descriptor object at 0x04625570>
read
finished 
```

# haskell - 全局变量和阅读器单子

> ID：11006364
> 
> 赞同：5
> 
> 时间：2012-06-12T23:41:51.620
> 
> 标签：haskell

我有一个**模块**，其中通过调用初始化函数来创建和初始化全局环境（定义某些约束，例如邻居 IP 地址等）。许多后续函数在调用时应使用这些约束。

虽然原则上我了解 reader monad 的作用，但我不太确定如何将其应用于我的问题，尤其是。

*   如何使用它来初始化由用户定义并作为数据/参数传递给初始化函数的环境。我的意思是，阅读器 monad 必须从某个地方获取构成全局不可变环境的实际值。我希望这些值是从初始化函数调用中读取的，例如`myinitial :: arg1 -> arg1 -> IOString`where 随后`arg1`成为`arg2`全局不可变数据，后续函数可以通过 reader monad(?)

*   我如何将这些环境值用作函数参数，例如我的环境`recvFrom s arg1`中`arg1`的全局不可变数据在哪里。或者`if arg2 > arg1 then ... else ...`

我当然可以制作配置文件，但我觉得配置文件会带来很大的灵活性。

[编辑]我理解询问，但是如果函数签名已正确定义，是否应该有额外的“类似pointfree”的方式以便可以省略全局/环境不可变？我将如何需要重构我的 if-then-else 来应用[this](http://lambdaman.blogspot.nl/2007/10/monadreader.html)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T00:29:50.450

您的大多数问题都可以通过检查[ask](http://hackage.haskell.org/packages/archive/mtl/2.1.1/doc/html/Control-Monad-Reader.html#v%3aask)和[runReader](http://hackage.haskell.org/packages/archive/mtl/2.1.1/doc/html/Control-Monad-Reader.html#v%3arunReader)函数的类型和文档来回答。

首先，`ask`：

```
ask :: Reader m r => m r 
```

这将返回包装在 monad 中的底层只读数据。很酷，所以当您想将它与其他功能一起使用时，这就是您将如何进入状态，在上面的示例中：

```
do x <- ask
   recvFrom s x 
```

（当然取决于 的类型`recvFrom`）

接下来是`runReader`，这就是你如何给它你正在谈论的初始数据。它基本上只是`Reader`使用它给出的数据运行计算：

```
runReader :: Reader r a -> r -> a 
```

这意味着：使用类型的只读数据`r`（第二个参数）运行计算（第一个参数）。它最终将返回第一个参数的结果类型`a`. 在您的情况下，这可能如下所示：

```
result = runReader computationUsingArg1Arg2 (arg1, arg2) 
```

然后在里面`computationUsingArg1Arg2`你可以阅读`arg1`和`arg2`通过`ask`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T08:17:20.610

这是一个可以解决问题的示例。首先你需要导入 Reader 模块：

```
import Control.Monad.Reader 
```

现在让我们定义一些数据结构（我们将使用它来保存姓名和年龄）

```
data Config = Config { name :: String, age :: Int } 
```

现在定义一个在 Reader monad 中工作的函数（它的类型是`Reader Config (String, Int)`，但我们不需要指定它 - 它可以被推断出来）。这个函数所做的只是询问环境（类型`Config`），然后提取字段并对其进行处理。

```
example = do
    c <- ask
    return ("Hello " ++ name c, 2 * age c) 
```

现在我们把它们放在一个程序中。do 块之后的前四行允许用户输入他们的姓名和年龄。然后我们`Config`使用用户的输入构建一个结构（我们必须使用`read`将变量`_age`a 转换为 a`String`以便`Int`我们可以将其提供给`Config`构造函数）并`example`使用该`runReader`函数在此环境中执行。最后，我们使用这个计算的结果来生成一些输出。

```
main = do
    putStrLn "Enter your name:"
    _name <- getLine
    putStrLn "Enter your age:"
    _age <- getLine
    let config = Config _name (read _age)
    let result = runReader example config
    putStrLn $ fst result
    putStrLn $ "Twice your age is: " ++ show (snd result) 
```

# css - 需要防止在包含幻灯片的 div 或 iframe 上继承不透明度

> ID：11006365
> 
> 赞同：0
> 
> 时间：2012-06-12T23:41:54.047
> 
> 标签：css, opacity

所以，我花了无数个小时试图阻止 div 或 iframe 中的幻灯片从页面 css 继承透明度。我尝试过使用 z-index、绝对/相对定位……都没有成功。从我的研究中了解到，Firefox 中的 iframe 默认情况下会从父级继承，但 IE 不会继承，默认情况下会使用白色背景；所以我切换到使用 div，结果相同。我正在使用 Firefox 进行所有初始测试。最重要的是幻灯片从 css 继承了透明度，所以我可以通过幻灯片看到背景图像。

这是相关代码：

**CSS**

```
* { margin: 0; padding: 0; }

html { 
    background: url(blue_water.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#Slideshow1 img {
    width:379px;
    z-index:12;
 }

#page-wrap {
    width: 660px;
    margin: 50px auto;
    padding: 15px; 
    background: white;
    opacity:0.6;
    filter:alpha(opacity=60); /* For IE8 and earlier */

    -moz-box-shadow: 0 0 20px black;
    -webkit-box-shadow: 0 0 20px black;
    box-shadow: 0 0 20px black;
} 
```

**HTML**

```
<div id="slideshow">
    <div style="float:right">
        <div style="margin: 0 auto; width: 400px; height: 310px; overflow:auto;">
            <object type="text/html" data="slideshow.html" style="width:100%; height:300px; z-index:12; margin:0;"></object>
        </div>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:56:52.200

首先回答您的问题：为什么不将幻灯片 div 放在 page-wrap div 之前，并在幻灯片上使用绝对定位将其移动到需要的地方。那是：

```
<div class="relative position">
    <div class="slideshow"> <!--absolute position -->
    </div> <!-- end slideshow -->

    <div class="page-wrap">
        content
    </div> <!-- end page-wrap -->
</div> <!-- end relative position div --> 
```

如果您使“相对位置”容器 div 与页面换行 div 具有相同的宽度、高度和定位，那么您应该能够移动绝对 div，就好像它在实际的页面换行 div 中一样。您可能必须对绝对 div 进行 z-index 索引。

此外，如果这是您的实际代码，我不会使用内部或内联样式；我会把我所有的css放在一个外部文件中。它更快更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:46:48.853

这可能无法解决您在所有浏览器中的问题，但我所做的是淡化背景颜色本身而不是整个元素，例如

```
 background: none repeat scroll 0 0 rgba(18, 18, 18, 0.7); 
```

最后一个值是不透明度，范围从 0.1 到 1.0

# c# - 将动态属性绑定到用户控件

> ID：11006366
> 
> 赞同：1
> 
> 时间：2012-06-12T23:42:01.240
> 
> 标签：c#, asp.net, webforms

嗨，stackoverflowers（如果这是一个词！），

我正在尝试使用具有动态属性的用户控件，但无法使其按我想要的方式工作。该控件的目的是拥有通用的 AddThis 小部件，设计人员可以将其放入 ASPX 中，而无需开发人员在 ASPX.CS 中执行任何操作。以前，我只在 ASPX 页面的代码隐藏中设置用户控件的动态属性，但现在让程序员和设计人员参与这样的简单任务似乎太麻烦了。

这是我的代码：

**用户控制代码 (ASCX)：**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="AddThisSocial.ascx.cs"
    Inherits="MyWebsite.Controls.AddThisSocial" %>
<!-- Begin AddThis Social Share -->
<div class="addthis_toolbox addthis_default_style" addthis:url="<%=Url%>" addthis:title="<%=Title %>"
    addthis:description="<%=Description%>">
    <%
        if (Facebook)
        {
    %>
    <a class="addthis_button_facebook" title="Send to Facebook" style="margin-top: 5px;">
    </a>
    <%
        }
    %>
    <%
        if (Twitter)
        {
    %>
    <a class="addthis_button_twitter" title="Send to Twitter" style="margin-top: 5px;">
    </a>
    <%
        }
    %>
    <%
        if (Google)
        {
    %>
    <a class="addthis_button_google" title="Send to Google" style="margin-top: 5px;">
    </a>
    <%
        }
    %>
    <%
        if (Pinterest)
        {
    %>
    <a class="addthis_button_pinterest_pinit" style="margin-top: 0px;">
    </a>
    <%
        }
    %>
    <%
        if (CompactButton)
        {
    %>
    <a class="addthis_button_compact" style="margin-top: 5px;"></a>
    <%
        }
    %>
</div>
<!-- End AddThis Social Share --> 
```

**用户控制代码 (ASCX.CS)：**

```
namespace MyWebsite.Controls
{
    public partial class AddThisSocial : System.Web.UI.UserControl
    {

        #region Public Properties

        public string Url { get; set; }        
        public string Title { get; set; }        
        public string Description { get; set; }        
        public string ImageUrl { get; set; }

        [DefaultValue("False")]        
        public Boolean Facebook { get; set; }
        [DefaultValue("False")]        
        public Boolean Twitter { get; set; }
        [DefaultValue("False")]        
        public Boolean Google { get; set; }
        [DefaultValue("False")]        
        public Boolean Pinterest { get; set; }
        [DefaultValue("False")]        
        public Boolean CompactButton { get; set; }

        #endregion

        #region Page Events

        protected void Page_Load(object sender, EventArgs e)
        {

            // facebook doesn't like addthis attributes - add opengraph attributes seperately
            var page = HttpContext.Current.Handler as Page;
            if (page == null) return;

            if(!String.IsNullOrEmpty(Url))
            {
                var mUrl = new HtmlMeta();
                mUrl.Attributes.Add("property", "og:url");
                mUrl.Attributes.Add("content", Url);
                page.Header.Controls.Add(mUrl);
            }

            if (!String.IsNullOrEmpty(Title))
            {
                var mTitle = new HtmlMeta();
                mTitle.Attributes.Add("property", "og:title");
                mTitle.Attributes.Add("content", Server.HtmlEncode(Title));
                page.Header.Controls.Add(mTitle);
            }

            if (!String.IsNullOrEmpty(Description))
            {
                var mDescription = new HtmlMeta();
                mDescription.Attributes.Add("property", "og:description");
                mDescription.Attributes.Add("content", Server.HtmlEncode(Description));
                page.Header.Controls.Add(mDescription);
            }

            if (!String.IsNullOrEmpty(ImageUrl))
            {
                var mImageUrl = new HtmlMeta();
                mImageUrl.Attributes.Add("property", "og:image");
                mImageUrl.Attributes.Add("content", ImageUrl);
                page.Header.Controls.Add(mImageUrl);
            }

        }

        #endregion

    }
} 
```

**ASPX 页面代码的一部分：**

```
<MyWebsite:AddThisSocial runat="server" ID="ProductAddThisSocial" Description="<%# Eval("Description") %>" ImageUrl="<%= GetImageUrl() %>" Facebook="True" Twitter="True" Google="True" CompactButton="True" Pinterest="True" /> 
```

以上不起作用，而如果我为控件设置静态字符串，它会起作用。

```
<MyWebsite:AddThisSocial runat="server" ID="ProductAddThisSocial" Description="My Description" ImageUrl="My Image Url" Facebook="True" Twitter="True" Google="True" CompactButton="True" Pinterest="True" /> 
```

我已经对此进行了调试，并且在网上阅读有关此内容后，这不起作用是有道理的。控件属性在父页面的加载方法时未初始化。我还尝试将属性设置为可绑定并将 page_load 更改为 page_prerender 方法，但没有任何运气。我需要找到一个解决方案，让我不能以某种方式在代码隐藏中设置控制属性。任何人都可以帮忙吗？

谢谢， 海拉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:08:31.290

看看这些帖子。基本上你需要利用 Render 方法和 ViewState 来获得你的属性绑定：

[ASP.NET 用户控件：无法使用 Eval("...") 初始化用户控件属性](https://stackoverflow.com/questions/2317089/asp-net-user-control-cant-initialize-a-user-control-property-using-eval)

[难倒用户控件上的自定义属性](https://stackoverflow.com/questions/8668711/stumped-with-custom-property-on-user-control)

# android - 位置服务在 android 中发送天气警报通知

> ID：11006373
> 
> 赞同：1
> 
> 时间：2012-06-12T23:42:40.917
> 
> 标签：android, notifications, weather-api

我有一个客户想要一个可以检测人员位置的应用程序，如果发生天气警告或警报，则向他们发送通知，让他们知道检查警告。我不认为警报必须有细节，因为我将在应用程序中拥有所有这些信息。它只需要提醒他们打开应用程序并查看警告或类似性质的详细信息。不知道从哪里开始这样的事情。我一直在查看一些可用于预报的天气 api，并计划将 webview 用于雷达服务，但不确定我可以将什么用于警告系统。如果有人对我可以去哪里有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:02:51.290

您的问题非常广泛，但是这是一种通用方法。

创建后台服务以：

*   使用 GPS 和/或网络位置跟踪用户的位置
*   查询[NOAA](http://alerts.weather.gov/)（或类似）以获取用户区域中的任何警报
*   如果发现任何内容，请启动与您的应用程序链接的通知以显示详细信息、雷达图像等

# ruby-on-rails - 使用 MongoMapper 在 Rails 中进行地理编码器

> ID：11006374
> 
> 赞同：0
> 
> 时间：2012-06-12T23:42:42.393
> 
> 标签：ruby-on-rails, ruby, mongomapper, rails-geocoder

我已经在我的 ruby​​ on rails 应用程序中使用了一段时间的地理编码器，但是当我移动计算机时，我无法让它与我模型中的 include 语句一起工作。我使用 Mongo 数据库并不断收到此错误：

未初始化的常量 Geocoder::Model::MongoMapper

根据说明（并且之前有效），我在模型文件的顶部使用了这一行：

包括 Geocoder::Model::MongoMapper

我正在使用这些宝石：

地理编码器 1.1.2 mongo 1.6.4 mongo_mapper 0.11.1

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:50:22.360

出于某种原因，重新安装我的 activesupport gems 使应用程序再次运行.../confused

# android - Android：BitmapFactory.decodeByteArray 返回 null 解码 base64 图像

> ID：11006377
> 
> 赞同：0
> 
> 时间：2012-06-12T23:43:42.250
> 
> 标签：android, image, decode

我从 .net Web 服务获取以 base64Binary 编码的图像，当我尝试使用解码的字符串创建位图时，我得到空值。知道为什么吗？谢谢你的帮助！:D

1.  我确定响应字符串不为空，我对其进行了测试，它的长度为 28000。我还使用在线解码器检查了它的内容，它返回了我需要的图像。

2.  在使用 bitmapfactory 之前，我正在使用 Android 本机 Base64 库对其进行解码

3.  我使用 Ksoap2 来获取图像 base64 字符串

4.  这是 Android 2.2 谷歌 API

这是代码：

```
String serverResponse = "" + result.get(0);

byte[] decodedString = Base64.decode(serverResponse, Base64.DEFAULT);

imgMap = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); 
```

ImgMap 是位图，它总是为空，我做错了什么？

我得到一个日志条目，上面写着：

```
TAG: SKIA     
TEXT: ---SkImageDecoder:: Factory returned null 
```

这是decodedString的样子：

```
06-13 03:09:54.957: D/CODED(491): SIZE: 22486
06-13 03:09:55.008: D/CODED(491): Content: first 200 positions of the array: 737342012400068796785786984327110111410997110121068656783328411111110810710511632737305048495058485358505132494858515158525200000000000000000000000000000000000000000000000000000000000000000250-20401000000001301000-22900113010003930021301000100031301000400061301000000071 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:18:11.047

我想我想通了。

看起来响应 base 64 字符串是 TIFF 图像，而 android 不支持该格式，因此工厂不会将其识别为图像并停止解码过程。

# c - rlimit64 整数溢出

> ID：11006378
> 
> 赞同：3
> 
> 时间：2012-06-12T23:43:43.967
> 
> 标签：c, integer-overflow

我目前正在尝试限制进程的内存资源。在这样做之前，我准备了`rlimit64`结构调用`getrlimit64`. 编译以下代码时

```
 rlimit64 as_limit;
    if (getrlimit64(RLIMIT_AS, &as_limit) == 0)
    {
        std::cerr << as_limit.rlim_cur << std::endl;
        std::cerr << as_limit.rlim_max << std::endl;

        as_limit.rlim_cur = 0x040000000 * 16;

        std::cerr << as_limit.rlim_cur << std::endl;
        std::cerr << as_limit.rlim_max << std::endl;
    } 
```

我收到有关分配为 的行的整数溢出的警告`as_limit.rlim_cur`。悬停，作为我得到的输出：

```
 18446744073709551615
    18446744073709551615
    0
    18446744073709551615 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:45:41.693

十六进制文字被解释为 int。

尝试使用：

```
0x040000000LL * 16; 
```

以便编译器将文字视为 long long。

由于 long long 文字（LL 后缀）是 C99，因此您最好转换为 struct 成员的任何类型（尽管我想任何最近的编译器都会支持 LL——gcc 肯定会支持）。例如，您可以转换为 long long。

# ejb - 在 Liferay 6.1 MVCPortlet 上使用 @EJB 注解

> ID：11006379
> 
> 赞同：1
> 
> 时间：2012-06-12T23:44:00.620
> 
> 标签：ejb, liferay-6, inject

是否可以像我们过去对 servlet 和 JSF 托管 bean（带有`@EJB`注释）所做的那样，在 MVCPortlet 类型（JBoss 7 上的 Liferay 6.1）上注入 EJB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:57:39.783

对同样的事情感到好奇，所以我使用 JBoss AS 7.1.1 和 liferay 6.1 和我用 Liferay IDE 制作的 portlet 设置了一个测试

它似乎不起作用。

```
public class TestEjbPortlet extends MVCPortlet
{
    @EJB 
    TestService testService;

    public  void doView (RenderRequest renderRequest, RenderResponse renderResponse) throws PortletException, IOException 
    {
        if (testService != null)
        {
            System.out.println( " works " + testService.getTest());
        }
        else
        {
            System.out.println( " EJB failed to inject in view" );
        }

     }
} 
```

输出：

09:55:57,975 INFO [stdout] (http-localhost-127.0.0.1-8080-1) EJB 未能注入视图

# php - 在 PHP 中出现子字符串之前删除最近的单词

> ID：11006380
> 
> 赞同：0
> 
> 时间：2012-06-12T23:44:06.577
> 
> 标签：php, string, substring, str-replace

这是我试图弄清楚的一个例子。我有几个字符串，都说明了两种不同的情况。

**案例 1**：营养学/营养、健身和健康

**案例 2**：大气科学/气象学

我想编写一个函数来删除“/”*右侧的单词。*所以案例 1 和 2 会变成：

**案例 1（更改）**：营养学、健身和健康

**案例 2（更改）**：大气科学

不过，我发现它有点棘手，因为在一种情况下，它在短语的开头，而在另一种情况下，它在结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:52:33.510

尝试这个：

```
preg_replace( '#/[a-z]+#i', '', $string); 
```

你可以看到它[在这里](http://codepad.viper-7.com/NhBahr)工作。

它的作用是使用正则表达式来查找 a`/`后跟一个或多个字母字符。当它找到它时，它会用空 ( `''`) 替换它。

# xml - XPath 计数为什么它不能本能地工作？

> ID：11006381
> 
> 赞同：2
> 
> 时间：2012-06-12T23:44:09.067
> 
> 标签：xml, xpath, count, xquery

开门见山，

我正在使用的数据库：http: [//metalab.unc.edu/bosak/xml/eg/shaks200.zip](http://metalab.unc.edu/bosak/xml/eg/shaks200.zip)

查询 1：

```
count(db:open("shaks200","r_and_j.xml")//ACT) 
```

查询 2：

```
count(db:open("shaks200","r_and_j.xml")//ACT[.]) 
```

查询 1 给出的结果是 185，而查询 2 给出的结果是 5。5 是正确答案，但为什么 Query 1 没有给出正确答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:56:45.623

感谢您的报告和引用的示例文件。该错误已在[最新的稳定快照](http://files.basex.org/releases/latest/)中修复，也将在下一个正式版本中提供（本周末到期）。

# android - 获取android视图中的每个控件以对每个控件执行事件

> ID：11006383
> 
> 赞同：0
> 
> 时间：2012-06-12T23:44:16.187
> 
> 标签：android, layout

android上有没有办法收集XML文件中的所有控件以进行布局，也许将它们添加到数组中，然后循环遍历每个控件以执行特定操作。

例如，我的 main.xml 布局文件将包含几个输入框。我希望做的是自动添加每个输入框并将数组传递给另一个函数。然后该函数可以循环遍历数组并对控件执行某些操作，即清除每个edittext 中的文本。

这有可能吗。

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:53:36.273

您可以获取父 ViewGroup，然后使用其`getChildCount()`和`getChildAt`方法获取此 ViewGroup 的所有子视图。

例如：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.your_viewgroup);
List<View> childViews = new ArrayList<View>();
for(int count = 0; count < layout.getChildCount(); count ++) {
    childViews.add(layout.getChildAt(count));
} 
```

然后，您应该能够将列表传递给另一种方法以进行进一步处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:47:03.077

就在这里。它被称为“列表视图”。

# wordpress - 将组合框添加到 WordPress 搜索表单

> ID：11006384
> 
> 赞同：0
> 
> 时间：2012-06-12T23:44:16.497
> 
> 标签：wordpress, search, combobox

![在此处输入图像描述](../Images/c428609d4514de308b5ece2f5094cf7f.png)

我想用四个组合框替换 WordPress 搜索表单中的默认文本框，如上图所示。我需要允许我的用户根据组合框中选择的值搜索帖子。

每个组合框都会提取自定义字段的值。例如，Property Type 应该检查 property_type 自定义字段中的值。

我的头疼是如何使表单看起来像上图，以及如何使用这些条件的组合正确查询帖子。例如，搜索房产类型：Townhouse 应该给我所有在 property_type 自定义字段中带有“Townhouse”的帖子。

我非常感谢我能得到的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:51:42.540

为此，您需要创建一个自定义查询，并从组合组合框中获取查询字符串。

此查询还取决于您的搜索词是如何排序的。

例如“属性类型”是一个类别？一个标签？分类？自定义字段？？

这比一个简单的答案要复杂一些。

例如，如果您希望搜索词包含“类别”（假设“属性类型”是类别，您可以这样做：

```
<form role="search" method="get" id="searchform" action="<?php bloginfo('siteurl'); ?>">
  <div>
    <label class="screen-reader-text" for="s">Search for:</label>
    <input type="text" value="" name="s" id="s" />
    in <?php wp_dropdown_categories( 'show_option_all=All Categories' ); ?>
    <input type="submit" id="searchsubmit" value="Search" />
  </div>
</form> 
```

或作为一个函数：

```
function wp_combo_search_form($form) {
$form = '<form method="get" id="searchform" action="' . get_option('home') . '/" >
<div><label class="hidden" for="s">' . __('Search for:') . '</label>
<input type="text" value="' . attribute_escape(apply_filters('the_search_query', get_search_query())) . '" name="s" id="s" />
<input type="submit" id="searchsubmit" value="'.attribute_escape(__('Search')).'" />
<br />
'.wp_dropdown_categories('show_option_all=All Categories&hide_empty=0&echo=0&selected='.intval($_GET['cat']).'').'
</div>
</form>';
return $form;
}

//uncomment following line for automatic filtering your theme
//add_filter('get_search_form', 'wp_combo_search_form'); 
```

用法 ：

```
<?php echo wp_combo_search_form(''); ?> 
```

但老实说——从问题的类型和它的“风格”来看——我建议你搜索一个插件来为你做这件事。[在这里搜索](http://wordpress.org/extend/plugins/)

**编辑我** 仍然有很多方法和方法可以做到这一点（jQuery，Json，直接查询..）但是：

既然您说您需要自定义字段 -

从 wp3.1 开始，您可以将 meta_query 添加到 query_posts。

```
<?php
$args = array(
    'post_type' => 'your_post_type', //typically "post"
    'meta_query' =>
        array(
            'key' => 'your_key',
            'value' => 'your_value',
            'compare' => 'NOT LIKE' //just an example
        ),
        array(
            'key' => 'your_key_2"',
            'value' => array( 20, 100 ), //value can be array
            'type' => 'numeric', //just an example
            'compare' => 'BETWEEN' //just an example
        )
)
query_posts( $args );
?> 
```

首先在 search.php 中捕获您的变量，例如`$_GET['field name'];`

```
$p_type = $_GET['property_type'];
$p_city = $_GET['property_city'];
$n_bedrooms = $_GET['no_bedrooms'];
$n_bathrooms = $_GET['no_batrhooms']; 
```

然后将其传递给查询数组

```
$args = array(
    'meta_query' => array(
        'relation' => 'AND',
array(
            'key' => $p_type,
 'value' => $whatever,

        ),
        array(
            'key' => $p_city,
 'value' => $whatever,

        )
    ) // etc.etc...
 ); 
```

现在您只需要使用正确的值填充下拉列表。

您可以在这里看到一个示例（搜索字段 - 不是下拉列表 - 但它是相同的）：

[http://dev.matthewaprice.com/](http://dev.matthewaprice.com/)

并在这里阅读它是如何完成的：

[http://matthewaprice.com/search-multiple-custom-fields-in-wordpress/](http://matthewaprice.com/search-multiple-custom-fields-in-wordpress/)

另请阅读：http: [//www.wp1stop.com/wordpress-101-guide-search-multiple-custom-fields-in-wordpress-custom-field-search-custom-query-part-1/](http://www.wp1stop.com/wordpress-101-guide-search-multiple-custom-fields-in-wordpress-custom-field-search-custom-query-part-1/)

# perl - 使用 mod_perl，我未更改的 CGI 脚本实际上更快吗？

> ID：11006386
> 
> 赞同：1
> 
> 时间：2012-06-12T23:44:17.993
> 
> 标签：perl, apache, cgi, mod-perl

我的 apache 服务器以前使用用 perl 编写的 CGI 脚本。我听说使用 mod_perl 比使用标准 cgi 脚本要快得多，所以我开始在我的服务器上设置 mod_perl。根据[这个页面](http://perl.apache.org/docs/2.0/api/ModPerl/Registry.html)，为了让我的 CGI 脚本在 mod_perl 下运行，我需要做的就是编辑我的 httpd.conf 文件。我在 httpd 的末尾添加了以下几行：

```
LoadModule perl_module libexec/apache2/mod_perl.so
<Location /cgi-bin>
    SetHandler perl-script
    PerlResponseHandler ModPerl::Registry
    Options ExecCGI
    PerlSendHeader On
    Order allow,deny
    Allow from all
</Location> 
```

如果我检查

```
存在 $ENV{"MOD_PERL"}
```

在 CGI 文件中，MOD_PERL 变量似乎存在。所以我很确定我已经设置并运行了 mod_perl。

我的问题是：我**完全不变**的CGI 脚本是否**真的**经历了加速？我能做些什么来加快速度吗？或者任何进一步的工作是否真的不值得加速？有没有人有这种东西的经验？

我一直在搜索文档和论坛以寻找答案，但我真的找不到任何东西。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:15:01.840

是的，一个完全不变的 CGI 脚本将体验 mod_perl 的加速，使用 ModPerl::Registry 处理程序，只要一切配置正确，并且看起来它是在你的情况下。

它更快的原因是现在，Apache 将使用内置的 Perl 解释器执行脚本，而不是为每个请求启动一个新的解释器。此外，您的脚本被缓存并保存在内存中，因此 Perl 不必重新编译它们，重新加载您`use`d 的所有模块等。您甚至可以在启动时使用 ModPerl::RegistryLoader 加载它们，以便它们已经被缓存并且准备好在第一个访问者点击您的页面时获取。

你怎样才能让它们更快？一个人可以写一本关于这个主题的书。您可以从将代码移动到模块而不是脚本开始。可以使用本机 mod_perl API，但我建议使用支持多种架构的框架（其中大多数都支持：mod_perl、psgi/Plack 和 FastCGI）。

注意，[ModPerl::Registry的一个](http://perl.apache.org/docs/general/perl_reference/perl_reference.html#my____Scoped_Variable_in_Nested_Subroutines)[*主要*](http://perl.apache.org/docs/general/perl_reference/perl_reference.html#my____Scoped_Variable_in_Nested_Subroutines)缺陷是您不能在子例程中[关闭](http://enwp.org/Closure_%28computer_science%29)文件范围的`my`变量。它将导致变量被缓存。（打开`warnings`，如果发生这种情况，您将看到“$x 将不会保持共享”警告。您可以将它们作为参数*传递*给 sub，或者将它们更改为`our`变量。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T01:55:49.030

您不必`perl`再次加载自身。您加载的任何模块都不必第二次加载。脚本本身只编译一次。肯定有节省。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T00:10:48.207

您的问题在类似的问题中得到了部分回答： [CGI 在与不需要 VM 的已编译程序一起使用时是否仍然很慢？](https://stackoverflow.com/questions/11006004/is-cgi-still-slow-when-used-with-a-compiled-program-that-doesnt-require-a-vm/11006041#11006041)

链接的答案及其阅读材料讨论了 CGI 和 FastCGI 或其他技术（如 mod_perl eg）之间的差异。

解释和扩展答案：
您可能会看到加速，但它可能是微不足道的。这在很大程度上取决于您的程序的工作量。具有大量请求的轻型工作负载可能会看到最大的性能改进。

在考虑进一步优化时，首先问问自己是否需要。[在http://en.wikipedia.org/wiki/Program_optimization](http://en.wikipedia.org/wiki/Program_optimization)有更多关于程序优化的阅读

# php - 银条。setFormAction 导致错误

> ID：11006387
> 
> 赞同：2
> 
> 时间：2012-06-12T23:44:27.483
> 
> 标签：php, silverstripe

我有一个注册表单：

```
function SignupForm() { 

      $fields = new FieldSet( 
         new TextField("FirstName", "First name"), 
         new TextField("Surname"), 
         new EmailField("Email", "Email address") 
      );    
   $submitAction = new FieldSet(new FormAction("SignupAction", "Sign up")); 
   $required = new RequiredFields("Email"); 

      $SignupForm = new Form($this, "SignupForm", $fields, $submitAction, $required);

      return $SignupForm; 
   }

   function SignupAction($data, $form) {

      $member = new Member(); 
      $form->saveInto($member);

      $member->write(); 

      if($group = DataObject::get_one('Group', "ID = $this->defaultGroupID")){ 
         $member->Groups()->add($group); 
         Director::redirect('thanks-for-registering/'); 
      }else{ 
         Director::redirect('registration-failed/'); 
      }

   } 
```

从主页运行良好，但它出现在网站的每个页面和子页面上，因此我需要设置表单操作。

我试过添加这个：

```
$SignupForm->setFormAction(Director::baseURL().'home/SignupAction'); 
```

在返回 $SignupForm 之前，当我（从任何地方）提交表单时出现以下错误

```
Missing argument 2 for Page_Controller::SignupAction()

function SignupAction($data, $form) { 
68 
69        
70       $member = new Member(); 
71       $form->saveInto($member); 
..... 
```

这里发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:19:24.700

发生此错误是因为 silverstripe 处理表单的方式

silverstripe 永远不会重定向到表单操作，它总是重定向到它自己的表单，所以如果你的表单是

```
function SignupForm() {
   ...
   return new Form(...);
} 
```

那么 silverstripe 将始终重定向回这个函数，所以如果你在 mysite.com/foobar/ 上，表单会转到 mysite.com/foobar/SignupForm 然后，它会调用 ->SignupAction()，所以 SignupAction 永远不会 i网址。

我会这样做：

```
<?php

class Page extends SiteTree {
}

class Page_Controller extends ContentController {
    public static $allowed_actions = array(
        'SignupForm',
        'registeringThanks',
        'registrationFailed',
    );
    public function SignupForm() {
        $fields = new FieldSet(
            new TextField("FirstName", "First name"),
            new TextField("Surname"),
            new EmailField("Email", "Email address")
        );
        $actions = new FieldSet(
            new FormAction("SignupAction", "Sign up")
        );
        $validator = new RequiredFields("Email");
        // use __FUNCTION__ here so we don't have to type SignupForm again
        return new Form($this, __FUNCTION__, $fields, $actions, $validator);
    }
    public function SignupAction($data, Form $form, SS_HTTPRequest $request) {
        $member = new Member();
        $form->saveInto($member);
        $member->write();
        $home = SiteTree::get_by_link(null);
        // instead of using $group = DataObject::get_one('Group', "ID = {$home->defaultGroupID}");
        // we can just use $group = $home->defaultGroup(); if defaultGroup is a has_one relation
        if ($home && $home->defaultGroup()) {
            $member->Groups()->add($home->defaultGroup());
            $this->redirect('registeringThanks/');
        } else {
            $this->redirect('registrationFailed/');
        }
    }
    public function registeringThanks(SS_HTTPRequest $request) {
        // display the same page again, but overwrite the Title and Content
        return $this->customise(array(
            'Title' => 'Thank you!',
            'Content' => 'All sorts of spam mails are on there way to you',
        ));
    }
    public function registrationFailed(SS_HTTPRequest $request) {
        // display the same page again, but overwrite the Title and Content
        return $this->customise(array(
            'Title' => 'Great, ... you broke it!',
            'Content' => 'Sorry, we can\'t send you any spam because something went wrong',
        ));
    }
} 
```

注意：我没有测试过这段代码，我只是把它写在我的头上，你可能会发现它的拼写错误或其他小错误）（在这种情况下你不需要重定向到主页，组的东西，感谢页面，所有页面都以这种方式工作）

如果您还有任何问题，请随时在此处或在[http://irc.silverstripe.org/上提问](http://irc.silverstripe.org/)

# php - 回显 simplexml 对象

> ID：11006390
> 
> 赞同：3
> 
> 时间：2012-06-12T23:44:55.170
> 
> 标签：php, html, rss, simplexml, blogger

这个问题有两个部分。

**第 1 部分。**昨天我有一些代码可以回显来自 RSS 提要的 XML 的全部内容。然后我从我的 php 文档中删除它，保存它，我完全在踢自己。

我相信语法是这样的：

```
$xml = simplexml_load_file($url);
echo $xml; 
```

我又试了一次，但它不起作用，所以显然我忘记了正确的语法，可以使用你的帮助，亲爱的 stackoverflow 问答者。

我一直试图弄清楚我在做什么，但我无法在 Google 或 PHP 网站上找到示例。我试过 print_r($url); 命令，它给了我似乎是一个原子化版本的提要。我想要整个字符串，疣和所有。我意识到我可以在窗口中键入 RSS 链接并查看它，但是在我编码和点头时将它放在我的 PHP 页面上很有帮助。

**第 2 部分**我想重建它的主要原因是因为我试图从博客 RSS 中解析节点，以便将其显示在托管在私有域上的网页上。我发布了一个虚拟博客，当我未能为其中一个虚拟帖子添加标题时，发现了一个尴尬的格式错误。

那么在这种情况下该怎么办呢？我试了一下：

```
if(entry->title == "")
{$entryTitle = "untitled";} 
```

那根本行不通。

这是我处理博客的整个 php 脚本：

```
<?php
/*create variables*/
$subtitle ="";
$entryTitle="";
$html = "";
$pubDate ="";
/*Store RSS feed address in new variable*/
$url = "http://www.blogger.com/feeds/6552111825067891333/posts/default";
/*Retrieve BLOG XML and store it in PHP object*/
$xml = simplexml_load_file($url);
print_r($xml);
/*Parse blog subtitle into HTML and echo it on the page*/
$subtitle .= "<h2 class='blog'>" . $xml->subtitle . "</h2><br />";
echo $subtitle;
/*Go through all the entries and parse them into HTML*/
foreach($xml->entry as $entry){
/*retrieve publication date*/
    $xmlDate = $entry->published;
    /*Convert XML timestamp into PHP timestamp*/
    $phpDate = new DateTime(substr($xmlDate,0,19));
    /*Format PHP timestamp to something humans understand*/
    $pubDate .= $phpDate->format('l\, F j\, Y h:i A');
    if ($entry->title == "")
    {
        $entryTitle .= "Untitled";
    }
        echo $entry->title;
    /*Pick through each entry and parse each XML tree node into an HTML ready blog post*/
        $html .= "<h3 class='blog'>".$entry->title . "<span class='pubDate'> | " .$pubDate . "</span></h3><p class='blog'>" . $entry->content . "</p>";
    /*Print the HTML to the web page*/  
        echo $html;
    /*Set the variables back to empty strings so they do not repeat data upon reiteration*/
        $html = "";
        $pubDate = "";
}
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-22T11:48:32.827

根据`php`手册：

```
$xml = new SimpleXMLElement($string);
.
.
. 
```

那么如果你想要`echo`结果：

```
echo $xml->asXML(); 
```

或将 xml 保存到文件中：

```
$xml->asXML('blog.xml'); 
```

**参考**

*   [http://php.net/manual/fr/simplexmlelement.asxml.php](http://php.net/manual/fr/simplexmlelement.asxml.php)

*   [http://spotlesswebdesign.com/blog.php?id=14](http://spotlesswebdesign.com/blog.php?id=14)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:06:48.213

**第1部分**

这仍然不是我想要的，而是一种非常整洁和有组织的方式来回显 xml 数据：

```
 $url = "http://www.blogger.com/feeds/6552111825067891333/posts/default";
$xml = simplexml_load_file($url);
echo '<pre>';
print_r($xml); 
```

**第2部分**

我必须让 firephp 运行，这样我才能准确地看到 php 在到达没有博客标题的条目时遇到的元素。最终它是一个空数组。因此，简单的：

```
if(empty($entry->title)) 
```

完美运行。对于字符串比较，我发现您可以简单地将其转换为字符串。就我的目的而言，这是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T23:52:51.863

`simplexml_load_file`返回一个**SimpleXMLElement**，所以：

```
print_r($xml); 
```

将显示*其次要对象*和*数组*。

调整后，您可以调用**$xml->asXML("filename.xml");** 正如@Tim Withers 指出的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T23:52:08.900

第 1 部分：`echo $xml->asXML();`- [http://www.php.net/manual/en/simplexmlelement.asxml.php](http://www.php.net/manual/en/simplexmlelement.asxml.php)

第 2 部分：[php SimpleXML 检查子项是否存在](https://stackoverflow.com/questions/1560827/php-simplexml-check-if-a-child-exist)

```
$html .= "<h3 class='blog'>".($entry->title!=null?$entry->title:'No Title')
    . "<span class='pubDate'> | " .$pubDate . "</span></h3><p class='blog'>" 
    . $entry->content . "</p>"; 
```

**注意**我可能会像这样加载网址：

```
$feedUrl = 'http://www.blogger.com/feeds/6552111825067891333/posts/default';
$rawFeed = file_get_contents($feedUrl);
$xml = new SimpleXmlElement($rawFeed); 
```

根据您对第 1 部分的评论，我不确定 XML 是否已完全加载。如果您尝试以这种方式加载它，它*应该*会显示所有 XML 数据。

# iphone - iOS5 - 创建一个与其他 iOS 通信的应用程序

> ID：11006391
> 
> 赞同：-1
> 
> 时间：2012-06-12T23:44:58.290
> 
> 标签：iphone, ios, ipad, ios5, ipod

我上周开始学习 iOS，在进一步学习之前，我想问一些问题。当我学习如何开发 iOS 时，我想创建一个用于餐厅的应用程序。服务员将使用 ipods 为每张桌子点菜。收银台处将有一台 iPad，它使用相同的应用程序接收每张桌子的所有订单。

我不想知道如何开发这样的应用程序，但我的问题是非常基本的。我怎样才能保护订单？本地？以及 iCloud 的交易历史（每年、每月等）？还是其他服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:59:05.847

由于它可以是本地 WiFi 网络，无需 Internet，应用程序可以直接向餐厅内的服务器发送和接收信息。因此，如果有任何订单，iPad 应用程序可以从该服务器读取并显示它。iPod 将发送订单做服务器，您可以将所有内容存储在数据库中（如 SQL Server Express，这是免费的），iPad 可以继续从那里读取。就像同一个应用程序中的 2 种模式（每个表发送订单并接收订单）。

无需超级服务器，也无需在 iPod 和 iPad 上进行本地存储，因为它位于 Wifi 本地网络中。它确实比本地存储和同步框架到服务器或在 iDevices 之间发送数据更简单。

将所有数据存储在数据库中，您可以在应用程序或其他应用程序内开发任何类型的报告、报告的 Web 报告

# java - 有没有一种简单的方法来比较 BufferedImage 实例？

> ID：11006394
> 
> 赞同：20
> 
> 时间：2012-06-12T23:45:15.410
> 
> 标签：java, awt

我正在开发一个 Java 应用程序的一部分，该应用程序将图像作为字节数组，将其读入`java.awt.image.BufferedImage`实例并将其传递给第三方库进行处理。

对于单元测试，我想获取一个图像（来自磁盘上的文件）并断言它等于已由代码处理的同一图像。

*   我的**预期** `BufferedImage`是使用`ImageIO.read(URL)`.
*   我的**测试**代码将相同的文件读入 a`BufferedImage`并将其作为 PNG 写入字节数组，以提供给被测系统。

当被测系统将字节数组写入新的时，`BufferedImage`我想断言这两个图像以有意义的方式相等。使用`equals()`（继承自`Object`）不起作用（当然）。比较`BufferedImage.toString()`值也不起作用，因为输出字符串包含对象引用信息。

有人知道捷径吗？我不希望在大型应用程序的一小部分中为单个单元测试引入第三方库。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-04-27T03:40:06.573

这是最好的方法。无需保留变量来判断图像是否仍然相等。当条件为假时立即返回假。短路评估有助于在比较失败后节省循环像素的时间，就像 trumpetlick 的[答案](https://stackoverflow.com/a/11006474/1762224)一样。

```
/**
 * Compares two images pixel by pixel.
 *
 * @param imgA the first image.
 * @param imgB the second image.
 * @return whether the images are both the same or not.
 */
public static boolean compareImages(BufferedImage imgA, BufferedImage imgB) {
  // The images must be the same size.
  if (imgA.getWidth() != imgB.getWidth() || imgA.getHeight() != imgB.getHeight()) {
    return false;
  }

  int width  = imgA.getWidth();
  int height = imgA.getHeight();

  // Loop over every pixel.
  for (int y = 0; y < height; y++) {
    for (int x = 0; x < width; x++) {
      // Compare the pixels for equality.
      if (imgA.getRGB(x, y) != imgB.getRGB(x, y)) {
        return false;
      }
    }
  }

  return true;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T01:12:18.263

如果速度是一个问题，并且两者`BufferedImages`具有相同的位深度、排列等（这里似乎必须如此），您可以这样做：

```
DataBuffer dbActual = myBufferedImage.getRaster().getDataBuffer();
DataBuffer dbExpected = bufferImageReadFromAFile.getRaster().getDataBuffer(); 
```

找出它是哪种类型，例如`DataBufferInt`

```
DataBufferInt actualDBAsDBInt = (DataBufferInt) dbActual ;
DataBufferInt expectedDBAsDBInt = (DataBufferInt) dbExpected ; 
```

对 DataBuffers 的大小和 bank 进行一些“健全性检查”，然后循环

```
for (int bank = 0; bank < actualDBAsDBInt.getNumBanks(); bank++) {
   int[] actual = actualDBAsDBInt.getData(bank);
   int[] expected = expectedDBAsDBInt.getData(bank);

   // this line may vary depending on your test framework
   assertTrue(Arrays.equals(actual, expected));
} 
```

这接近于你能得到的最快速度，因为你一次抓取一大块数据，而不是一次抓取一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T23:54:46.660

您可以编写自己的例程进行比较！

```
int width;
int height;
boolean imagesEqual = true;

if( image1.getWidth()  == ( width  = image2.getWidth() ) && 
    image1.getHeight() == ( height = image2.getHeight() ) ){

    for(int x = 0;imagesEqual == true && x < width; x++){
        for(int y = 0;imagesEqual == true && y < height; y++){
            if( image1.getRGB(x, y) != image2.getRGB(x, y) ){
                imagesEqual = false;
            }
        }
    }
}else{
    imagesEqual = false;
} 
```

这将是一种方式！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-09T09:14:18.243

我在 Groovy 中更改[了等于像素的函数](https://stackoverflow.com/a/11006474/1049542)，可能会有所帮助：

```
boolean imagesAreEqual(BufferedImage image1, BufferedImage image2) {
    if (image1.width != image2.width || image1.height != image2.height) {
         return false
    }
    for (int x = 1; x < image2.width; x++) {
        for (int y = 1; y < image2.height; y++) {
             if (image1.getRGB(x, y) != image2.getRGB(x, y)) {
                 return false
             }
        }
    }
    return true
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-03T12:55:42.253

如果你想使用[Mockito](https://site.mockito.org/)，那么你可以写一个[Hamcrest](http://hamcrest.org/) Matcher

```
import org.mockito.ArgumentMatcher;

public class BufferedImageMatcher extends ArgumentMatcher<BufferedImage> {

  private final BufferedImage expected;

  public BufferedImageMatcher(BufferedImage expected) {
    this.expected = expected;
  }

  @Override
  public boolean matches(Object argument) {
    BufferedImage actual = (BufferedImage) argument;

    assertEquals(expected.getWidth(), actual.getWidth());
    assertEquals(expected.getHeight(), actual.getHeight());

    for (int x = 0; x < actual.getWidth(); x++) {
      for (int y = 0; y < actual.getHeight(); y++) {
        assertEquals(expected.getRGB(x, y), actual.getRGB(x, y));
      }
    }

    return true;
  }
} 
```

并像这样使用它

```
assertThat(actual, new BufferedImageMatcher(expected)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T23:57:58.523

除了蛮力“循环”之外，我想不出任何东西：

```
 BufferedImage bi1, bi2, ...
   ...
  Raster r1 = bi1.getData();
  DataBuffer db1 = r1.getDataBuffer();
  if (db1.getSize() != db2.getSize ())
     ...
  for (int i = 0; i < db1.getSize(); i++) {  
    int px = db1.getElem(i);
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T15:50:21.010

`imageio`您可以通过 a`OutputStream`到 a写入该图像`byte[]`。在我的代码中，它或多或少看起来像这样：

```
byte[] encodeJpegLossless(BufferedImage img){...using imageio...}
...
Assert.assertTrue(Arrays.equals(encodeJpegLossless(img1)
                               ,encodeJpegLossless(img2)
                               )
                 ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-24T11:24:15.410

工作良好但效率不高

```
public static boolean compareImage(File fileA, File fileB) {        
    try {
        // take buffer data from botm image files //
        BufferedImage biA = ImageIO.read(fileA);
        DataBuffer dbA = biA.getData().getDataBuffer();
        int sizeA = dbA.getSize();                      
        BufferedImage biB = ImageIO.read(fileB);
        DataBuffer dbB = biB.getData().getDataBuffer();
        int sizeB = dbB.getSize();
        // compare data-buffer objects //
        if(sizeA == sizeB) {
            for(int i=0; i<sizeA; i++) { 
                if(dbA.getElem(i) != dbB.getElem(i)) {
                    return false;
                }
            }
            return true;
        }
        else {
            return false;
        }
    } 
    catch (Exception e) { 
        e.printStackTrace();
        return  false;
    }
} 
```

# javascript - 在 jQuery 数据表中初始化搜索输入

> ID：11006402
> 
> 赞同：11
> 
> 时间：2012-06-12T23:46:01.550
> 
> 标签：javascript, jquery, datatables, jquery-events

我正在尝试使用用户可以替换或细化的默认搜索值初始化数据表。这与服务器端数据有关。我还没有在 Datatables 文档中阅读任何可以执行此操作的内容。

```
$('#example_filter label input[type=text]').val('Default Product') 
```

上面设置了值，但是因为没有涉及到按键，所以事件处理程序不会拾取它。有没有一种方法可以链接到上面，就像输入键一样，或者我应该编写一个事件处理程序来查找字段中的更改。我对数据表和 jQuery 新手很陌生。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T16:56:30.580

因此，正确的做法是使用 oSearch 参数。

[https://datatables.net/docs/DataTables/1.9.0/DataTable.defaults.oSearch.html](https://datatables.net/docs/DataTables/1.9.0/DataTable.defaults.oSearch.html)

```
$(document).ready( function() {
  $('#example').dataTable( {
    "oSearch": {"sSearch": "Initial search"}
  } );
} ) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-13T00:19:22.470

您可以使用以下命令手动触发事件[`.trigger()`](http://api.jquery.com/trigger/)：

```
$('#example_filter label input[type=text]')
    .val('Default Product')
    .trigger($.Event("keypress", { keyCode: 13 })); 
```

根据您的代码，您可能需要`"keyup"`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-15T15:34:11.930

现在正确的方法是：

```
var table = $( '#mytable' ).DataTable();
table.search( 'initial search value' ).draw(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-23T20:56:32.427

所指的答案`oSearch`是使用遗留语法。 [从 DataTables 1.10+ 开始](https://datatables.net/reference/option/search)，正确的语法是：

```
$(document).ready( function() {
  $('#example').dataTable( {
    "search": {"search": "Initial search"}
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-06T15:57:05.647

您可以更改默认设置：

```
var my_config = {
            oLanguage: {
                sSearch: ""
            },
            oSearch: {
                sSearch: "Default Search value"
            }
        };
$('#search').dataTable(my_config);
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-18T18:50:15.227

```
$('#example_filter label input[type=search]').val(i).trigger($.Event("keyup", { keyCode: 13 })); 
```

# jquery - jquery切换css类

> ID：11006406
> 
> 赞同：1
> 
> 时间：2012-06-12T23:46:16.650
> 
> 标签：jquery, css, toggle, addclass

这个 jquery 切换了两件事。(1) 一个 css 类和 (2) 显示一个 div。如果我在元素外部单击（菜单切换），切换效果很好，但是如果我在元素本身内部单击，div 会切换，但 css 类不会。这是为什么？

[在http://jsfiddle.net/aL7Xe/68/](http://jsfiddle.net/aL7Xe/68/)实时预览

**第二次单击“菜单切换”时，我需要添加的 css 类消失。**

```
<div id="menuwrap">
 <a href="#" id="menutoggle">Menu Toggle</a>
 <ul id="menucontainer">
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
 </ul>
</div>
this is more text

<script>
$('html').click(function() {
$('#menucontainer').hide();
$('#menutoggle').removeClass('menutoggle');
});

$('#menuwrap').click(function(event){
 event.stopPropagation();
});

$('#menutoggle').click(function(event){
 $('#menucontainer').toggle();
 $(this).addClass('menutoggle');
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T23:53:44.617

```
$('#menutoggle').click(function(event){
    $('#menucontainer').toggle();
    $(this).toggleClass('menutoggle');
}); 
```

[http://jsfiddle.net/L5Cq3/](http://jsfiddle.net/L5Cq3/)

最少的行来达到预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:49:21.377

更改`$(this).addClass('menutoggle');`为`$(this).toggleClass('menutoggle');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T23:50:14.463

这是因为，当您单击 Menu 容器时，会触发两个事件（即 HTML 单击处理程序和 div 单击处理程序）。

也许这就是你想要的：

```
$('#menutoggle').click(function(event){
     $('#menucontainer').toggle();
      if ($(this).hasClass('menutoggle') 
           $(this).removeClass('menutoggle');
       else 
         $(this).addClass('menutoggle');
}); 
```

**编辑** 您也可以使用`toggleClass`（感谢 Juan 提醒我它的存在）。我很确定，在幕后，它和我上面的代码做的事情是一样的。

这是你固定的小提琴：http: [//jsfiddle.net/aL7Xe/69/](http://jsfiddle.net/aL7Xe/69/)

# html - 使用 EaselJS 在 HTML5 画布中渲染单个帧或视频的给定部分

> ID：11006411
> 
> 赞同：0
> 
> 时间：2012-06-12T23:46:59.723
> 
> 标签：html, canvas, html5-canvas, easeljs

我怀疑肯定应该以某种方式完成，但我不知道如何，我将不胜感激；）我正在使用 EaselJS 以这种方式在 HTML5 画布中呈现视频：

**HTML**

```
<div>
  <canvas id="terminal1" width="140" height="82">
  <video id="video1" loop="true" width="127" height="70" autoplay="true" src="/url/to/video.mp4"> 
  <source  type="video/mp4"/> 
  </video>
</div> 
```

**Javascript**

```
function init() {
  stage = new Stage(document.getElementById("cnvs_images"));
  var videoTag = document.getElementById('videoTag');
  video = new Bitmap(videoTag);
  video.visible = true;
  terminal1 = new Stage(document.getElementById('terminal1'));
  stage.addChild(video);
}

function tick() {
  stage.update();
  stage_terminal1.update();
} 
```

请不要太在意Javascript代码...我只是综合了我记得的基础知识，我的真实代码要大得多；这只是一个参考，说我正在以许多教程中给出的 EaselJS 正常方式渲染视频；所以这个片段可能不起作用，但给你的想法。我的真实代码完美运行！

*我只是想知道你们是否知道一种只渲染视频的单帧而不是全部播放的方法。*

我为我的应用程序使用了许多画布，并且在渲染所有需要的视频（6 个视频，6 个画布）时，如果不是超慢的话，它会减慢我的应用程序的速度。我只想渲染给定视频的预可视化（几秒钟）或只是一个帧。它必须用 EaselJS 完成，因为我已经完成了很多功能代码 =)

有人可以请教我吗？非常感谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:29:13.323

老实说，我认为目前很难做到。我刚刚在我的应用程序中停用了相应的代码部分，并简单地将画布覆盖在视频顶部。

主要问题是，视频有时在搜索后更新得不够快，并且触发的事件也没有真正的帮助——除非视频正在播放。我最终在画布上画了很多黑屏。使用一些超时来调用专有的 copy2canvas 函数会有所帮助，但是一旦您的系统或网络有点慢，事情就不会再工作了。

如果您仍想尝试，这里有一个教程：[http ://www.html5rocks.com/en/tutorials/video/basics/#toc-fun-canvas](http://www.html5rocks.com/en/tutorials/video/basics/#toc-fun-canvas)

# php - MySQL Join 显示具有相同值的多行

> ID：11006415
> 
> 赞同：1
> 
> 时间：2012-06-12T23:47:44.400
> 
> 标签：php, mysql

我正在尝试更好地学习 MySQL 选择语句，但我最终以某种方式选择了具有相同值的多行。如果我删除最后一个 JOIN，查询会正确显示，但我仍然需要将 tasks.Rate_Schedule_ID 与 hourlyrates.Rate_Schedule_ID 连接起来，如最后一个 JOIN 语句所示。

编辑：每行复制一次。这是我得到的结果的图片。

![在此处输入图像描述](../Images/7811dd2dc6bb323a1a2c5f62f56eebdf.png)

```
 SELECT 
 project_timecard_tasks.Task_ID, 
 project_timecard_tasks.DateTime,
 project_timecard_tasks.Total_Hours,
 project_timecard_tasks.User_ID,
 project_timecard_tasks.Project_ID,
 users.User_ID,users.FirstName,
 users.LastName,
 tasks.id,
 tasks.taskName, 
 tasks.billingOption,
 tasks.fixedRate,
 tasks.Rate_Schedule_ID,
 hourlyrates.Rate_Schedule_ID,
 hourlyrates.hourlyRate

FROM 
 project_timecard_tasks 

JOIN users ON project_timecard_tasks.User_ID = users.User_ID 
JOIN tasks ON project_timecard_tasks.Task_ID = tasks.id 
JOIN hourlyrates ON tasks.Rate_Schedule_ID = hourlyrates.Rate_Schedule_ID

WHERE 
 project_timecard_tasks.Project_ID = '$jobNumber' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:02:22.990

问题是您的结果（来自任务表）中有多个具有相同 Rate_Schedule_ID 的行。这意味着对于其中的每一个，您都会在 hourlyrates 表中找到一个匹配项，这会为每行提供两个匹配项。

您可以将 SELECT 更改为 SELECT DISTINCT，这将解决问题。但这可能表明您的数据中存在更深层次的问题。

检查这是否真的是问题的方法是查看没有最后一次连接的结果集。如果有重复的 Rate_Schedule_ID，那么这就是它重复行的原因。

# aop - 面向方面的编程：c#中的慢

> ID：11006416
> 
> 赞同：1
> 
> 时间：2012-06-12T23:47:53.483
> 
> 标签：aop

[我在http://www.developerfusion.com/article/5307/aspect-orienting-programming-using-net/3](http://www.developerfusion.com/article/5307/aspect-oriented-programming-using-net/3)尝试了 AOP 示例， 它运行良好，但我遇到了性能问题。现在每个调用都有 40 毫秒的开销。

有没有办法 1\. 减少开销？不确定是否有可以从示例中删除的内容。2\. 更重要的是，是否只对公共方法进行了调用拦截？我可以查看 Preprocess 中的类型，但那时我已经使用了 20 毫秒，我希望私有方法根​​本不被拦截。我可以通过将属性目标设置为方法来做到这一点，但我宁愿避免这种情况并将属性目标留给类。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:20:32.853

`MarshalByRefObjects`从我的角度来看，用于实现 AOP并不是一个好主意。还有很多其他好的 AOP 实现具有更好的性能，因为它们使用代码生成来实现这些方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T12:11:42.737

即使使用 MarshalByRefObjects，如果您拦截的调用很少，性能也是可以接受的。40 ms 似乎是一个非常糟糕的开销，它是由执行“建议”而不仅仅是拦截过程造成的。

您可以尝试像 PostSharp 这样的编译时 AOP 框架，但如果您对“建议的实施方式”有疑问，它不会解决您的问题。

如果你想比较，可以试试[NConcern .NET](https://github.com/Virtuoze/NConcern)，这是一个运行时轻量级 AOP 框架，性能好，易于使用。

# c# - 从 C# 中的 xml 文件中选择多个值

> ID：11006418
> 
> 赞同：1
> 
> 时间：2012-06-12T23:48:20.940
> 
> 标签：c#, asp.net, xml, xmlnode

我正在尝试从 xml 文档中选择三个值。我想从节点内获取值。xml 文件中有五个值，我想知道采用它们的最佳方法是什么。请在下面找到 xml 文件。在此先感谢，拉齐尔

```
 <?xml version="1.0" encoding="UTF-8"?>
<RatingServiceSelectionResponse>
   <Response>
      <TransactionReference>
         <CustomerContext>Bare Bones Rate Request</CustomerContext>
         <XpciVersion>1.0001</XpciVersion>
      </TransactionReference>
      <ResponseStatusCode>1</ResponseStatusCode>
      <ResponseStatusDescription>Success</ResponseStatusDescription>
   </Response>
   <RatedShipment>
      <Service>
         <Code>03</Code>
      </Service>
      <RatedShipmentWarning>Your invoice may vary from the displayed reference rates</RatedShipmentWarning>
      <BillingWeight>
         <UnitOfMeasurement>
            <Code>LBS</Code>
         </UnitOfMeasurement>
         <Weight>34.0</Weight>
      </BillingWeight>
      <TransportationCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>32.44</MonetaryValue>
      </TransportationCharges>
      <ServiceOptionsCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>0.00</MonetaryValue>
      </ServiceOptionsCharges>
      <TotalCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>32.44</MonetaryValue>
      </TotalCharges>
      <GuaranteedDaysToDelivery />
      <ScheduledDeliveryTime />
      <RatedPackage>
         <TransportationCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>32.44</MonetaryValue>
         </TransportationCharges>
         <ServiceOptionsCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>0.00</MonetaryValue>
         </ServiceOptionsCharges>
         <TotalCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>32.44</MonetaryValue>
         </TotalCharges>
         <Weight>13.0</Weight>
         <BillingWeight>
            <UnitOfMeasurement>
               <Code>LBS</Code>
            </UnitOfMeasurement>
            <Weight>34.0</Weight>
         </BillingWeight>
      </RatedPackage>
      <NegotiatedRates>
         <NetSummaryCharges>
            <GrandTotal>
               <CurrencyCode>USD</CurrencyCode>
               <MonetaryValue>24.52</MonetaryValue>
            </GrandTotal>
         </NetSummaryCharges>
      </NegotiatedRates>
   </RatedShipment>
   <RatedShipment>
      <Service>
         <Code>12</Code>
      </Service>
      <RatedShipmentWarning>Your invoice may vary from the displayed reference rates</RatedShipmentWarning>
      <BillingWeight>
         <UnitOfMeasurement>
            <Code>LBS</Code>
         </UnitOfMeasurement>
         <Weight>34.0</Weight>
      </BillingWeight>
      <TransportationCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>93.32</MonetaryValue>
      </TransportationCharges>
      <ServiceOptionsCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>0.00</MonetaryValue>
      </ServiceOptionsCharges>
      <TotalCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>93.32</MonetaryValue>
      </TotalCharges>
      <GuaranteedDaysToDelivery>3</GuaranteedDaysToDelivery>
      <ScheduledDeliveryTime />
      <RatedPackage>
         <TransportationCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>93.32</MonetaryValue>
         </TransportationCharges>
         <ServiceOptionsCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>0.00</MonetaryValue>
         </ServiceOptionsCharges>
         <TotalCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>93.32</MonetaryValue>
         </TotalCharges>
         <Weight>13.0</Weight>
         <BillingWeight>
            <UnitOfMeasurement>
               <Code>LBS</Code>
            </UnitOfMeasurement>
            <Weight>34.0</Weight>
         </BillingWeight>
      </RatedPackage>
      <NegotiatedRates>
         <NetSummaryCharges>
            <GrandTotal>
               <CurrencyCode>USD</CurrencyCode>
               <MonetaryValue>69.95</MonetaryValue>
            </GrandTotal>
         </NetSummaryCharges>
      </NegotiatedRates>
   </RatedShipment>
   <RatedShipment>
      <Service>
         <Code>02</Code>
      </Service>
      <RatedShipmentWarning>Your invoice may vary from the displayed reference rates</RatedShipmentWarning>
      <BillingWeight>
         <UnitOfMeasurement>
            <Code>LBS</Code>
         </UnitOfMeasurement>
         <Weight>34.0</Weight>
      </BillingWeight>
      <TransportationCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>148.56</MonetaryValue>
      </TransportationCharges>
      <ServiceOptionsCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>0.00</MonetaryValue>
      </ServiceOptionsCharges>
      <TotalCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>148.56</MonetaryValue>
      </TotalCharges>
      <GuaranteedDaysToDelivery>2</GuaranteedDaysToDelivery>
      <ScheduledDeliveryTime />
      <RatedPackage>
         <TransportationCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>148.56</MonetaryValue>
         </TransportationCharges>
         <ServiceOptionsCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>0.00</MonetaryValue>
         </ServiceOptionsCharges>
         <TotalCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>148.56</MonetaryValue>
         </TotalCharges>
         <Weight>13.0</Weight>
         <BillingWeight>
            <UnitOfMeasurement>
               <Code>LBS</Code>
            </UnitOfMeasurement>
            <Weight>34.0</Weight>
         </BillingWeight>
      </RatedPackage>
      <NegotiatedRates>
         <NetSummaryCharges>
            <GrandTotal>
               <CurrencyCode>USD</CurrencyCode>
               <MonetaryValue>99.21</MonetaryValue>
            </GrandTotal>
         </NetSummaryCharges>
      </NegotiatedRates>
   </RatedShipment>
   <RatedShipment>
      <Service>
         <Code>13</Code>
      </Service>
      <RatedShipmentWarning>Your invoice may vary from the displayed reference rates</RatedShipmentWarning>
      <BillingWeight>
         <UnitOfMeasurement>
            <Code>LBS</Code>
         </UnitOfMeasurement>
         <Weight>34.0</Weight>
      </BillingWeight>
      <TransportationCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>204.04</MonetaryValue>
      </TransportationCharges>
      <ServiceOptionsCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>0.00</MonetaryValue>
      </ServiceOptionsCharges>
      <TotalCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>204.04</MonetaryValue>
      </TotalCharges>
      <GuaranteedDaysToDelivery>1</GuaranteedDaysToDelivery>
      <ScheduledDeliveryTime />
      <RatedPackage>
         <TransportationCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>204.04</MonetaryValue>
         </TransportationCharges>
         <ServiceOptionsCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>0.00</MonetaryValue>
         </ServiceOptionsCharges>
         <TotalCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>204.04</MonetaryValue>
         </TotalCharges>
         <Weight>13.0</Weight>
         <BillingWeight>
            <UnitOfMeasurement>
               <Code>LBS</Code>
            </UnitOfMeasurement>
            <Weight>34.0</Weight>
         </BillingWeight>
      </RatedPackage>
      <NegotiatedRates>
         <NetSummaryCharges>
            <GrandTotal>
               <CurrencyCode>USD</CurrencyCode>
               <MonetaryValue>129.82</MonetaryValue>
            </GrandTotal>
         </NetSummaryCharges>
      </NegotiatedRates>
   </RatedShipment>
   <RatedShipment>
      <Service>
         <Code>14</Code>
      </Service>
      <RatedShipmentWarning>Your invoice may vary from the displayed reference rates</RatedShipmentWarning>
      <BillingWeight>
         <UnitOfMeasurement>
            <Code>LBS</Code>
         </UnitOfMeasurement>
         <Weight>34.0</Weight>
      </BillingWeight>
      <TransportationCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>248.35</MonetaryValue>
      </TransportationCharges>
      <ServiceOptionsCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>0.00</MonetaryValue>
      </ServiceOptionsCharges>
      <TotalCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>248.35</MonetaryValue>
      </TotalCharges>
      <GuaranteedDaysToDelivery>1</GuaranteedDaysToDelivery>
      <ScheduledDeliveryTime>8:00 A.M.</ScheduledDeliveryTime>
      <RatedPackage>
         <TransportationCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>248.35</MonetaryValue>
         </TransportationCharges>
         <ServiceOptionsCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>0.00</MonetaryValue>
         </ServiceOptionsCharges>
         <TotalCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>248.35</MonetaryValue>
         </TotalCharges>
         <Weight>13.0</Weight>
         <BillingWeight>
            <UnitOfMeasurement>
               <Code>LBS</Code>
            </UnitOfMeasurement>
            <Weight>34.0</Weight>
         </BillingWeight>
      </RatedPackage>
      <NegotiatedRates>
         <NetSummaryCharges>
            <GrandTotal>
               <CurrencyCode>USD</CurrencyCode>
               <MonetaryValue>248.35</MonetaryValue>
            </GrandTotal>
         </NetSummaryCharges>
      </NegotiatedRates>
   </RatedShipment>
   <RatedShipment>
      <Service>
         <Code>01</Code>
      </Service>
      <RatedShipmentWarning>Your invoice may vary from the displayed reference rates</RatedShipmentWarning>
      <BillingWeight>
         <UnitOfMeasurement>
            <Code>LBS</Code>
         </UnitOfMeasurement>
         <Weight>34.0</Weight>
      </BillingWeight>
      <TransportationCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>212.86</MonetaryValue>
      </TransportationCharges>
      <ServiceOptionsCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>0.00</MonetaryValue>
      </ServiceOptionsCharges>
      <TotalCharges>
         <CurrencyCode>USD</CurrencyCode>
         <MonetaryValue>212.86</MonetaryValue>
      </TotalCharges>
      <GuaranteedDaysToDelivery>1</GuaranteedDaysToDelivery>
      <ScheduledDeliveryTime>10:30 A.M.</ScheduledDeliveryTime>
      <RatedPackage>
         <TransportationCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>212.86</MonetaryValue>
         </TransportationCharges>
         <ServiceOptionsCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>0.00</MonetaryValue>
         </ServiceOptionsCharges>
         <TotalCharges>
            <CurrencyCode>USD</CurrencyCode>
            <MonetaryValue>212.86</MonetaryValue>
         </TotalCharges>
         <Weight>13.0</Weight>
         <BillingWeight>
            <UnitOfMeasurement>
               <Code>LBS</Code>
            </UnitOfMeasurement>
            <Weight>34.0</Weight>
         </BillingWeight>
      </RatedPackage>
      <NegotiatedRates>
         <NetSummaryCharges>
            <GrandTotal>
               <CurrencyCode>USD</CurrencyCode>
               <MonetaryValue>135.38</MonetaryValue>
            </GrandTotal>
         </NetSummaryCharges>
      </NegotiatedRates>
   </RatedShipment>
</RatingServiceSelectionResponse> 
```

编辑：我需要从 NegotiatedRates 元素中获取 MonetaryValue。对于那个很抱歉。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:15:29.960

用来`LINQtoXML`处理这个

```
string filePath = Server.MapPath(@"../YourFileLocation/somexml.xml");

//you can load the XML from file/stream /string etc...

XElement elem = XElement.Load(filePath);
if (elem != null)
{
    var items = elem.Descendants("NegotiatedRates").ToList();
    foreach (var singleItem in items)
    {
        var mo = singleItem.Descendants("MonetaryValue").SingleOrDefault();
        string monetaryValue = mo.Value;
    }
} 
```

根据您提供的 XML，您将`items`在 items 变量中获得 6，在您的`foreach`中，您将`MonetaryValue`在字符串变量中获得 element 的值`monetaryValue`

# c++ - 在应用程序中编写控制台

> ID：11006421
> 
> 赞同：9
> 
> 时间：2012-06-12T23:48:36.400
> 
> 标签：c++, shell, console, sfml

我的应用程序需要在应用程序窗口中*嵌入*控制台，例如在 autoCAD 之类的程序中，控制台位于窗口底部等待命令。

![在此处输入图像描述](../Images/0ccb11af226a3914c3fb8ad647fcf155.png)

我需要在我的应用程序中使用控制台，以便我可以更改变量和其他内容，因此控制台不需要是一个完全爆炸的外壳。

目前，我的应用程序中有一个简单的控制台，但与我希望控制台类似的终端（shell）相比，它似乎非常笨重。

![在此处输入图像描述](../Images/fbe59ac39b69f60970259815c828f172.png)

我使用控制台完成此操作的方式是，当用户按下`TAB`控制台显示的键时，他们可以输入他们的命令行/命令行；一旦`Return`按键被按下，他们输入的字符串就会被解析并处理命令。

我正在使用`sf::Text`对象在我的应用程序窗口中打印出文本。总共使用了 5 个`sf::Text`对象，4 个用于先前的命令/错误消息，1 个用于当前命令行。当`Return`按键被按下时，第 4 个`sf::Text`将其当前字符串更改为第 3 个，第 3 个更改为第 2 个，第 2 个更改为第 1 个，第 1 个更改为当前命令字符串，然后当前命令字符串被清除并准备再次输入。这样就有了 4 个命令和/或错误的“历史”的空间。不是最好的，但它是我能想到的最好的。当然，历史的数量可以通过添加更多的`sf::Text`对象来改变。所以最后这就是我将控制台渲染到屏幕上的方式

```
sf::RectangleShape rectangle;

rectangle.setSize(sf::Vector2f(App->getSize().x, App->getSize().y / 3));
rectangle.setPosition(0, 0);

rectangle.setFillColor(sf::Color::black);

App->draw(rectangle);   // This renders the console looking background rectangle
App->draw(CLine);   // This renders the current command line

for(int i = 4; i >= 0; --i) // This renders the history as described above, their idevidual positions are setup earlier on in the program
{
    CHistory[i].setString(CS[i]);
    App->draw(CHistory[i]);
} 
```

`App`只是一个`sf::RenderWindow*`

我的总体问题是，**有没有一种方法可以将控制台嵌入到我的 SFML 窗口**中，而不必像上面那样简单地将文本对象的图像渲染成看起来像控制台。我希望在我的应用程序中有一个实际的控制台/shell/终端。就像标准的 bash shell，当然还有我自己的 shell 解释器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:54:57.523

我将以下内容实现为我不久前正在编写的 opengl 游戏的控制台。这绝不是您问题的明确答案，但它对我有用，您可能会从中得到一些有用的东西。

这两个文件在这篇文章的底部。该代码不太可能直接运行，因为我不打算包含 2 个库头文件中的一个。如果您想要完整的来源，请告诉我。

基本上，尽管控制台类允许您向它添加可以在运行时更改的变量指针。它接受来自 Windows 事件消息的输入。（输入的实际处理在别处完成）命令解析在 ProcessInput() 方法中完成，变量在 ChangeVariable() 方法中更新。

一句警告。这种方法本质上使控制台用户可以直接访问单个变量的内存位置。这需要良好的输入验证，以确保用户不会导致应用程序在运行时崩溃。如果我坐下来尝试制作另一个控制台，我可能会做一些稍微不同的事情。不过我希望这能给你一点帮助。

头文件：

```
#ifndef CONSOLE_H
#define CONSOLE_H

#include <vector>
#include <map>
#include <string>
#include "Singleton.h"
#include <Windows.h>
#include "Enumerations.h"
#include "StringConversion.h"

class Console
{
public:

    Console();
    ~Console();

    void Update(std::vector<WPARAM> pressedKeys);

    void AddInt(std::string varName, int *ptrToInt);
    void AddFloat(std::string varName, float *ptrToFloat);
    void AddLong(std::string varName, long *ptrToLong);
    void AddBool(std::string varName, bool *ptrToBool);

    const std::string &GetCurrentText();
    const std::vector<std::string> &GetPreviousText();

private:
    std::map<std::string, int *> m_Ints;
    std::map<std::string, float *> m_Floats;
    std::map<std::string, long *> m_Longs;
    std::map<std::string, bool *> m_Bools;

    std::map<std::string, std::string> m_Variables;

    std::vector<std::string> m_PrevConsoleText;
    std::string m_CurrInput;

    int m_PrevSelection;

    bool ProcessInput();
    void ChangeVariable(const std::string &varName, const std::string &value);
};

typedef Singleton<Console> g_Console;

#endif // CONSOLE_H 
```

.cpp 文件：

```
#include "Console.h"

Console::Console()
{
    m_PrevSelection = 0;
}

Console::~Console()
{

}

void Console::AddInt(std::string varName, int *ptrToInt)
{
    m_Ints[varName] = ptrToInt;
    m_Variables[varName] = "int";
}

void Console::AddFloat(std::string varName, float *ptrToFloat)
{
    m_Floats[varName] = ptrToFloat;
    m_Variables[varName] = "float";
}

void Console::AddLong(std::string varName, long *ptrToLong)
{
    m_Longs[varName] = ptrToLong;
    m_Variables[varName] = "long";
}

void Console::AddBool(std::string varName, bool *ptrToBool)
{
    m_Bools[varName] = ptrToBool;
    m_Variables[varName] = "bool";
}

void Console::ChangeVariable(const std::string &varName, const std::string &value)
{
    //*(m_Bools[varName]) = value;

    std::string temp = m_Variables[varName];

    if(temp == "int")
    {
        //*(m_Ints[varName]) = fromString<int>(value);
    }
    else if(temp == "float")
    {
        //*(m_Floats[varName]) = fromString<float>(value);
    }
    else if(temp == "long")
    {
        //*(m_Longs[varName]) = fromString<long>(value);
    }
    else if(temp == "bool")
    {
        if(value == "true" || value == "TRUE" || value == "True")
        {
            *(m_Bools[varName]) = true;
        }
        else if(value == "false" || value == "FALSE" || value == "False")
        {
            *(m_Bools[varName]) = false;
        }
    }
}

const std::string &Console::GetCurrentText()
{
    return m_CurrInput;
}

void Console::Update(std::vector<WPARAM> pressedKeys)
{
    for(int x = 0; x < (int)pressedKeys.size(); x++)
    {
        switch(pressedKeys[x])
        {
        case KEY_A:
            m_CurrInput.push_back('a');
            break;
        case KEY_B:
            m_CurrInput.push_back('b');
            break;
        case KEY_C:
            m_CurrInput.push_back('c');
            break;
        case KEY_D:
            m_CurrInput.push_back('d');
            break;
        case KEY_E:
            m_CurrInput.push_back('e');
            break;
        case KEY_F:
            m_CurrInput.push_back('f');
            break;
        case KEY_G:
            m_CurrInput.push_back('g');
            break;
        case KEY_H:
            m_CurrInput.push_back('h');
            break;
        case KEY_I:
            m_CurrInput.push_back('i');
            break;
        case KEY_J:
            m_CurrInput.push_back('j');
            break;
        case KEY_K:
            m_CurrInput.push_back('k');
            break;
        case KEY_L:
            m_CurrInput.push_back('l');
            break;
        case KEY_M:
            m_CurrInput.push_back('m');
            break;
        case KEY_N:
            m_CurrInput.push_back('n');
            break;
        case KEY_O:
            m_CurrInput.push_back('o');
            break;
        case KEY_P:
            m_CurrInput.push_back('p');
            break;
        case KEY_Q:
            m_CurrInput.push_back('q');
            break;
        case KEY_R:
            m_CurrInput.push_back('r');
            break;
        case KEY_S:
            m_CurrInput.push_back('s');
            break;
        case KEY_T:
            m_CurrInput.push_back('t');
            break;
        case KEY_U:
            m_CurrInput.push_back('u');
            break;
        case KEY_V:
            m_CurrInput.push_back('v');
            break;
        case KEY_W:
            m_CurrInput.push_back('w');
            break;
        case KEY_X:
            m_CurrInput.push_back('x');
            break;
        case KEY_Y:
            m_CurrInput.push_back('y');
            break;
        case KEY_Z:
            m_CurrInput.push_back('z');
            break;
        case KEY_0:
            m_CurrInput.push_back('0');
            break;
        case KEY_1:
            m_CurrInput.push_back('1');
            break;
        case KEY_2:
            m_CurrInput.push_back('2');
            break;
        case KEY_3:
            m_CurrInput.push_back('3');
            break;
        case KEY_4:
            m_CurrInput.push_back('4');
            break;
        case KEY_5:
            m_CurrInput.push_back('5');
            break;
        case KEY_6:
            m_CurrInput.push_back('6');
            break;
        case KEY_7:
            m_CurrInput.push_back('7');
            break;
        case KEY_8:
            m_CurrInput.push_back('8');
            break;
        case KEY_9:
            m_CurrInput.push_back('9');
            break;
        case KEY_QUOTE:
            m_CurrInput.push_back('\"');
            break;
        case KEY_EQUALS:
            m_CurrInput.push_back('=');
            break;
        case KEY_SPACE:
            m_CurrInput.push_back(' ');
            break;
        case KEY_BACKSPACE:
            if(m_CurrInput.size() > 0)
            {
                m_CurrInput.erase(m_CurrInput.end() - 1, m_CurrInput.end());
            }
            break;
        case KEY_ENTER:
            ProcessInput();
            break;
        case KEY_UP:
            m_PrevSelection--;
            if(m_PrevSelection < 1)
            {
                m_PrevSelection = m_PrevConsoleText.size() + 1;
                m_CurrInput = "";
            }
            else
            {
                m_CurrInput = m_PrevConsoleText[m_PrevSelection - 1];
            }

            break;
        case KEY_DOWN:
            if(m_PrevSelection > (int)m_PrevConsoleText.size())
            {
                m_PrevSelection = 0;
                m_CurrInput = "";
            }
            else
            {
                m_CurrInput = m_PrevConsoleText[m_PrevSelection - 1];
            }
            m_PrevSelection++;
            break;
        }
    }
}

bool Console::ProcessInput()
{
    int x;
    std::string variable = "NULL", value;
    bool ok = false;
    std::string::iterator it;

    //Split up the input from the user.
    //variable will be the variable to change
    //ok will = true if the syntax is correct
    //value will be the value to change variable to.
    for(x = 0; x < (int)m_CurrInput.size(); x++)
    {
        if(m_CurrInput[x] == ' ' && variable == "NULL")
        {
            variable = m_CurrInput.substr(0, x);
        }
        else if(m_CurrInput[x] == '=' && m_CurrInput[x - 1] == ' ' && m_CurrInput[x + 1] == ' ')
        {
            ok = true;
        }
        else if(m_CurrInput[x] == ' ')
        {
            value = m_CurrInput.substr(x + 1, m_CurrInput.size());
        }
    }

    if(ok)
    {
        m_PrevConsoleText.push_back(m_CurrInput);
        m_PrevSelection = m_PrevConsoleText.size();

        if(m_PrevConsoleText.size() > 10)
        {
            m_PrevConsoleText.erase(m_PrevConsoleText.begin(), m_PrevConsoleText.begin() + 1);
        }
        m_CurrInput.clear();

        ChangeVariable(variable, value);
    }
    else
    {
        m_PrevConsoleText.push_back("Error invalid console syntax! Use: <variableName> = <value>");
        m_CurrInput.clear();
    }

    return ok;
}

const std::vector<std::string> &Console::GetPreviousText()
{
    return m_PrevConsoleText;
} 
```

**编辑 1：添加 DrawConsole()** 我只是从控制台类中获取文本，渲染一个看起来类似于在任何最近的 Valve 游戏中找到的源引擎控制台窗口的图像，然后在适当的位置绘制文本。

```
void View::DrawConsole()
{
    Square console;
    std::vector<std::string> temp;
    temp = g_Console::Instance().GetPreviousText();

    console.top = Vector3f(0.0, 0.0, 1.0);
    console.bottom = Vector3f(640, 480, 1.0);

    g_Render::Instance().SetOrthographicProjection();
    g_Render::Instance().PushMatrix();
    g_Render::Instance().LoadIdentity();

    g_Render::Instance().BindTexture(m_ConsoleTexture);
    g_Render::Instance().DrawPrimative(console, Vector3f(1.0f, 1.0f, 1.0f));
    g_Render::Instance().DisableTexture();

    g_Render::Instance().SetOrthographicProjection();
    //Draw the current console text
    g_Render::Instance().DrawString(g_Console::Instance().GetCurrentText(), 0.6f, 20, 465);

    //Draw the previous console text
    for(int x = (int)temp.size(); x > 0; x--)
    {
        g_Render::Instance().DrawString(temp[x-1], 0.6f, 20, (float)(425 - (abs((int)temp.size() - x) * 20)));
    }

    g_Render::Instance().SetPerspectiveProjection();

    g_Render::Instance().PopMatrix();
    g_Render::Instance().SetPerspectiveProjection();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:27:43.413

这有几件事。首先，您需要某种行编辑支持。有这方面的库，例如 NetBSD 的*编辑线* [http://www.thrysoee.dk/editline/](http://www.thrysoee.dk/editline/)

然后你需要以某种方式处理按键。现在这就是乐趣的开始。我没有尝试直接处理关键事件，而是将它们输入到使用Windows上的`pipe`on (POSIX) /创建的匿名管道中。`CreatePipe`然后在另一端，您可以阅读它们，就好像它们来自*stdin*一样。第二个匿名管道将*标准输出*的功能加倍，并将其输出显示在游戏控制台上。我会调用生成的一对*FD consolein*和*consoleout*。我还会为紧急错误消息添加一个*consoleerr* FD；控制台可能会以另一种颜色显示它们或过滤它们。

这种方法的好处是，您可以使用所有不错的标准库功能与您的控制台对话。您可以使用`fprintf(consoleout, ...)`,`fscanf(consolein, ...)`等等；当然，它也适用于 C++ iostream。但更重要的是，您可以直接将其附加到上述*编辑线*之类的库中。

最后，您需要处理用户在控制台中键入的命令。在那里我会走懒惰的路线，只是嵌入一个脚本语言解释器，一个支持交互式操作的解释器。像*Python*或在整个游戏中非常普遍的*Lua*。当然，您也可以实现自己的命令解释器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:52:23.550

好吧，如果你想让它感觉更像一个控制台，你可能想要的是：

*   只需按一下按钮就可以打开和关闭它，可能是类似`~`的，经常使用。
*   为您正在输入的行提供背景颜色，可能是透明的，但至少要确保它不仅仅是漂浮在 RenderWindow 上的文本。如果命令的输出是多行，请确保它们都是可见的，或者人们至少可以滚动浏览历史记录。
*   确保命令易于理解且一致。例如，如果我没记错的话，源引擎上的很多游戏都使用`cl_`前缀来表示与渲染相关的任何内容。`cl_showfps 1`例如参见。
*   传统的终端输入将是一个不错的选择。Up 向您显示您之前填写的命令。也许如果您喜欢冒险，请使用 Tab 完成。
*   如果您还有一些时间，`--help`例如显示可用命令的方法也很好。当然，这取决于你的游戏有多复杂。

剩下的，看看其他游戏是如何做到的。您提到了 Quake，它有一个很好的游戏终端示例。我个人认为许多 Source 游戏中的一款也很容易使用（参见《半条命 2》、《反恐精英》、《军团要塞 2》、《Left 4 Dead》等）。我认为没有任何标准库可以解决这个问题，不包括 OGRE 或 IrrLicht 等其他框架。

# azure - 是否可以让多个 azure 网站在单个预留实例上运行

> ID：11006428
> 
> 赞同：5
> 
> 时间：2012-06-12T23:49:23.183
> 
> 标签：azure

微软最近发布了预览 Azure 网站。我一直希望这将允许我们在一个保留实例上托管多个网站。虽然网站的管理界面允许您定义多个主机标头，但据我所知，这些标头将指向同一个网站，即您可以浏览到 www.someurl.com 和 www.someurl.org 并最终到达同一个网站，而不是 2 个是同一 VM 上的不同站点。

有谁知道我的阅读是否正确，如果不正确（即可以通过网站功能托管多个站点），您如何进行设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:01:25.767

是的。

一旦您为您的网站使用保留的 Windows Azure 网站，您就可以在其中运行多个网站。运行多个网站的过程将与您创建多个网站的任何其他 IIS Web 服务器完全相同，并且取决于不同的主机头，您会将流量路由到特定的物理文件夹。

# linux - 按第三列排序，在 Linux 中保持第一列和第二列不变？

> ID：11006431
> 
> 赞同：20
> 
> 时间：2012-06-12T23:50:01.953
> 
> 标签：linux, unix, sorting, command-line

我需要按第三列对平面文件进行排序，使第一列保持不变[第一列已经排序]（在 linux 中）。（第二列可能会改变）

示例 i/p 文件：-

```
b:di:wave
b:di12:red
b:di12:wave
b:di06:pir 
```

应该看起来像： -

```
b:di06:pir
b:di12:red
b:di12:wave
bast:di:wave 
```

我尝试了几个排序选项，但我只能按第二列而不是第三列排序。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-13T00:27:22.493

试试这个：

```
sort  -t: -k1,1 -k3 data.txt 
```

给出：

```
bast:disp-san-d5-06:piranha 
bast:display-san-12:redbird
bast:display-san-07:waverider
bast:display-san-12:waverider 
```

这将使用第一个字段作为主键进行排序，将第三个字段作为辅助键将行拆分为字段`:`

**详情**：

`data.txt`包含您帖子中的 4 行。

您可以指定多个字段作为排序键，请参阅[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)

`-k1,1`表示在第一个*字段*上排序（从字段 1 开始并在字段 1 结束，否则它将继续使用该行的其余部分来确定排序）

`-k3`表示在第三个*字段*上排序作为辅助键。由于后面没有其他字段，因此无需指定`-k3,3`，但也不会受到伤害。

`-t:`表示以字符分隔字段`:`，否则默认使用空白

更多信息请参阅此 SO 问题[Sorting multiple keys with Unix sort](https://stackoverflow.com/questions/357560/sorting-multiple-keys-with-unix-sort)和[sort 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)

# jquery - 计时器后的JQuery else语句

> ID：11006432
> 
> 赞同：-1
> 
> 时间：2012-06-12T23:50:01.967
> 
> 标签：jquery, timer, if-statement

我有一个 div 我想每小时淡出。但在几个小时之间，我希望 div 完全消失。我尝试使用以下代码执行此操作，但不知道为什么它不起作用：

```
 var now = (new Date()).getTime();
  var lastTime = 0;
  var lastTimeStr = localStorage['lastTime'];
  if (lastTimeStr) lastTime = parseInt(lastTimeStr, 10);
  if (now - lastTime > 1000 *60*60) {
    $('#startup').delay(1500).fadeOut(2000);
  }
  else {
    $('#startup').addClass('nodisplay');
  }

  localStorage['lastTime'] = ""+now;​ 
```

目前，直到 else 语句的所有内容都可以正常工作。我只是不知道为什么它不起作用。

（ps：css .nodisplay 只是有 display:none;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:58:16.550

```
setInterval(function(){
      $('#startup').show().delay(1500).fadeOut(2000);
}, 1000*60*60); 
```

更简单的方法。不需要一个`'nodisplay'`类，在fadeOut 发生后jQuery 使用`display:none`的是它会在此之后保持隐藏。

[http://jsfiddle.net/T3yqP/1/](http://jsfiddle.net/T3yqP/1/)

# jquery - jQuery scrollTo 固定标题偏移量

> ID：11006440
> 
> 赞同：15
> 
> 时间：2012-06-12T23:50:26.703
> 
> 标签：jquery, offset, scrollto

我正在使用 jQuery scrollTo 插件，您可以在我正在构建的页面上看到[http://portfolio.tomvervoort.net/](http://portfolio.tomvervoort.net/)

由于 300px 固定标题，内容移动到标题下方。当您单击菜单中的关于按钮时，您可以清楚地看到这一点。是否可以向 scrollTo 脚本添加 300px 偏移量，以便所有内容都位于标题/菜单下？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T16:35:54.583

您可以使用如下所述的“偏移”设置：

[http://flesler.blogspot.com.ar/2007/10/jqueryscrollto.html](http://flesler.blogspot.com.ar/2007/10/jqueryscrollto.html)

就像是：

```
$.scrollTo(newLoc, o.scrollSpeed, {
     // ...
     offset:-300
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-13T00:06:49.497

您可以尝试在 jquery.nav.js 中更改此行：

```
$.scrollTo(newLoc, o.scrollSpeed, { 
```

到

```
$.scrollTo($('newLoc').offset().top-300, o.scrollSpeed, { 
```

因此，您无需告诉`scrollto`滚动到该元素，而是自己获取元素的位置并减去 300

# html - HTML 表单在点击提交按钮时执行一些“操作”

> ID：11006443
> 
> 赞同：19
> 
> 时间：2012-06-12T23:50:58.630
> 
> 标签：html, form-submit

我想了解 HTML 表单。例如，我有 2 个用于名字和姓氏的输入文本字段和一个提交按钮。单击提交按钮时，我希望网页显示如下内容：您的名字是“名字”“姓氏”。

```
<!DOCTYPE html>
<html>
   <body>
      <form>
         First name: <input type="text" name="firstname" /><br />
         Last name: <input type="text" name="lastname" /><br />
         <input type="submit" value="Submit" />
      </form> 
   </body>
</html> 
```

当我单击该按钮时，我需要在这里拥有什么才能进行一些“操作”？

**编辑：**好的，现在我发现我需要 PHP 或 JavaScript。有人可以建议或提供 PHP 或 Js 的示例代码作为我的参考吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T00:31:09.143

好的，我会尝试一下。如果你想使用 PHP，你需要在你的机器上安装和配置 PHP 和 web 服务器。本文可能会让您入门：[PHP 手册：Windows 系统上的安装](http://php.net/manual/en/install.windows.php)

设置好环境后，您就可以开始使用 Web 表单了。直接来自文章：[使用 PHP 处理表单数据](http://php.about.com/od/learnphp/ss/php_forms.htm)：

> 对于此示例，您将需要创建两个页面。在第一页上，我们将创建一个简单的 HTML 表单来收集一些数据。这是一个例子：
> 
> ```
> <html>   
> <head>
>  <title>Test Page</title>
> </head>   
> <body>   
>     <h2>Data Collection</h2><p>
>     <form action="process.php" method="post">  
>         <table>
>             <tr>
>                 <td>Name:</td>
>                 <td><input type="text" name="Name"/></td>
>             </tr>   
>             <tr>
>                 <td>Age:</td>
>                 <td><input type="text" name="Age"/></td>
>             </tr>   
>             <tr>
>                 <td colspan="2" align="center">
>                 <input type="submit"/>
>                 </td>
>             </tr>
>         </table>
>     </form>
> </body>
> </html> 
> ```
> 
> 此页面会将姓名和年龄数据发送到页面 process.php。现在让我们创建 process.php 以使用我们制作的 HTML 表单中的数据：

```
<?php   
    print "Your name is ". $Name;   
    print "<br />";   
    print "You are ". $Age . " years old";   
    print "<br />";   $old = 25 + $Age;
    print "In 25 years you will be " . $old . " years old";   
?> 
```

> 您可能知道，如果您省略了表单的 method="post" 部分，则 URL 会显示数据。例如，如果您的名字是 Bill Jones，并且您 35 岁，我们的 process.php 页面将显示为 [http://yoursite.com/process.php?Name=Bill+Jones&Age=35](http://yoursite.com/process.php?Name=Bill+Jones&Age=35)如果需要，您可以手动更改以这种方式访问​​ URL，输出将相应更改。

**附加 JavaScript 示例**

这个单个文件示例从您的问题中获取 html，并将表单的 onSubmit 事件与一个 JavaScript 函数联系起来，该函数提取 2 个文本框的值并将它们显示在警报框中。

**注意**：`document.getElementById("fname").value`获取`ID`标签为 equals的对象`fname`，然后将其拉出`value`- 在本例中是 First Name 文本框中的文本。

```
 <html>
    <head>
     <script type="text/javascript">
     function ExampleJS(){
        var jFirst = document.getElementById("fname").value;
        var jLast = document.getElementById("lname").value;
        alert("Your name is: " + jFirst + " " + jLast);
     }
     </script>

    </head>
    <body>
        <FORM NAME="myform" onSubmit="JavaScript:ExampleJS()">

             First name: <input type="text" id="fname" name="firstname" /><br />
             Last name:  <input type="text" id="lname" name="lastname" /><br />
            <input name="Submit"  type="submit" value="Update" />
        </FORM>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T06:07:46.030

**索引.html**

```
<!DOCTYPE html>
<html>
   <body>
       <form action="submit.php" method="POST">
         First name: <input type="text" name="firstname" /><br /><br />
         Last name: <input type="text" name="lastname" /><br />
         <input type="submit" value="Submit" />
      </form> 
   </body>
</html> 
```

在按下提交按钮后，再添加一个文件要显示哪个页面

**提交.php**

```
<html>
  <body>

    Your First Name is -  <?php echo $_POST["firstname"]; ?><br>
    Your Last Name is -   <?php echo $_POST["lastname"]; ?>

  </body>
</html> 
```

# android - 根据使用的资源视图回收 ListView 行？

> ID：11006448
> 
> 赞同：0
> 
> 时间：2012-06-12T23:51:18.820
> 
> 标签：android, android-listview, android-arrayadapter

`ArrayAdapter`我为我做了一个自定义，`ListView`它会改变被点击的行的资源视图（当你点击它时模拟一种扩展行）。使用 a`OnItemClickListener`我观察点击并将点击位置设置为适配器。然后我告诉适配器数据发生了变化。然后适配器更新，并在单击的位置使用一个不同的资源视图，使用一个简单的 if 语句。最后一次单击发生的视图返回到其初始“未展开”状态。如果我只是让适配器从头开始膨胀每个视图，这很好用。这是我`MyAdapter`为此使用的类的代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row;
    LayoutInflater inf = ((Activity) mContext).getLayoutInflater();

    if(clickposition == position){
        row = inf.inflate(R.layout.expandedoverviewrow, parent, false); 
    }
    else{
        row = inf.inflate(R.layout.overviewrow, parent, false);
    }

    TextView txtPayedby = (TextView)row.findViewById(payedbyId);
    TextView txtAmount = (TextView)row.findViewById(amountId);
    TextView txtDate = (TextView)row.findViewById(dateId);
    TextView txtDescript = (TextView)row.findViewById(descriptId);
    TextView txtPersons = (TextView)row.findViewById(personId);

    txtPayedby.setText(payedbyList.get(position));
    txtAmount.setText(amountList.get(position));
    txtDate.setText(dateList.get(position));
    txtDescript.setText(descriptList.get(position));
    txtPersons.setText(personList.get(position));

    return(row);
}

public void clicked(int position){
    clickposition = position;
} 
```

但是，如果我想回收视图，那就大错特错了。随机行获得“扩展”视图，因为它正在回收视图。如果我使用上面的代码，这是预期的。我尝试稍微更改代码以区分`convertView`是正常视图还是“扩展”视图。我通过将代码的第一部分更改为：

```
View row = convertView; 
    if{row == null || ......){
        LayoutInflater inf = ((Activity) mContext).getLayoutInflater();
        row = inf.inflate(R.layout.overviewrow, parent, false);
    }
    if(clickedposition == position){
        LayoutInflater inf = ((Activity) mContext).getLayoutInflater();
        row = inf.inflate(R.layout.expandedoverviewrow, parent, false);
    } 
```

在第一个 if 语句中的多个点处，我想检查视图是否是“扩展”视图。我尝试了各种东西，将getId与Resource Id进行比较，将内容描述与字符串进行比较。将 convertView 与使用充气器创建的视图进行比较。所有人都未能检测到视图是正常视图还是“扩展”视图。导致该操作系统正在回收视图，从而使越来越多的“扩展”视图成为行。

有谁知道一种可以检测不同视图的方法？还是在这种情况下不回收视图更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:28:01.377

> ...或者在这种情况下最好不要回收视图？

始终以使用`ListView`' 的回收机制为目标，下面是我的做法（您实现该`getView`方法的逻辑有点奇怪）。首先我会使用适配器的`getItemViewType`and`getViewTypeCount`方法。它们看起来像这样：

```
@Override
public int getItemViewType(int position) {
    if (clickposition != -1 && position == clickposition) {
        return SPECIAL_VIEW;
    }
    return NORMAL_VIEW;
}

@Override
public int getViewTypeCount() {
    return 2; // we have two types of views
} 
```

其中`NORMAL_VIEW`和`SPECIAL_VIEW`是两种类型的行（普通行和扩展行）：

```
// fields in your adapter class
public static final int NORMAL_VIEW = 0;
public static final int SPECIAL_VIEW = 1; 
```

使用上面的所有代码，该`getView`方法将如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    int whichOne = getItemViewType(position);
    if (convertView == null) {
        switch (whichOne) {
        case NORMAL_VIEW:
            convertView = mInflater.inflate(R.layout.overviewrow, parent, false);
            break;
        case SPECIAL_VIEW:
            convertView = mInflater.inflate(R.layout.expandedoverviewrow, parent, false);
            break;
            }
    } else {
        // there is no else, the getItemViewType will make sure that you have a valid view                    
    }
    // then you would set the data based on the value of whichOne 
    //... 
```

当您单击一个项目时，更新`clickposition`并调用`notifyDataSetChanged`适配器，以便它可以调整行。

# sql-server - SQL Server：将 GROUP BY 的结果拆分为单独的列

> ID：11006449
> 
> 赞同：4
> 
> 时间：2012-06-12T23:51:30.070
> 
> 标签：sql-server, sql-server-2008-r2

我有一个 SQL Server 2008 R2 数据库，其中包含大约 5 亿行数据，目前看起来像这样

```
ID          Eventtype
201         1
201         3
201         4
201         1
201         1
664         1
664         0
664         1
664         3 
```

我似乎找不到可以以这种格式提供数据的查询：

```
ID         Event0   Event1  Event2  Event3  Event4
201        0        3       0       1       1
664        1        2       0       1       0 
```

这是我目前所得到的：

```
select distinct ID as ID, count(EventType)
from database.dbo.events 
group by questID, EventType 
```

它将数据吐回给我，例如：

```
ID       EventType
201      0
201      3
201      0
201      1
201      1
664      1
664      2
664      0
etc. 
```

这确实显示了我需要的所有数据，但是在试图弄清楚`EventType`哪个是非常令人沮丧的过程中所涉及的格式和猜测。

谁能建议一个更好的查询，以良好的格式返回数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:03:04.757

怎么样...之类的

```
select ID, sum(Event0), sum(Event1), sum(Event2), sum(Event3), sum(Event4)
from (
    select ID, 
        case EventType when 0 then 1 else 0 end as Event0,
        case EventType when 1 then 1 else 0 end as Event1,
        case EventType when 2 then 1 else 0 end as Event2,
        case EventType when 3 then 1 else 0 end as Event3,
        case EventType when 4 then 1 else 0 end as Event4
    from dbo.events
) E
group by ID 
```

*   假设恰好有 5 种事件类型，编号为 0 到 4。
*   根据表的索引方式，它可能会占用大量的排序空间，并且如果没有足够的空间可用，则可能会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T00:06:00.697

Sql Server 中有数据[透视](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能。如果你有例如 6 个不同的事件，你可以使用这个：

```
select ID, [0], [1], [2], [3], [4], [5]
from events
pivot 
(
  -- aggregate function to apply on values
  count(EventType) 
  -- list of keys. If values of keys are not fixed,
  -- you will have to use dynamic sql generation 
  for EventType in ([0], [1], [2], [3], [4], [5])
) pvt 
```

对于动态枢轴生成，请参阅[此 SO 帖子](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)。

顺便说一句，我相信您的原始查询应该是：

```
select ID, EventType, count(EventType)
from events 
group by ID, EventType
order by ID, EventType 
```

您可以在[@Sql Fiddle](http://sqlfiddle.com/#!3/9b89c/6)中看到它（向下滚动以查看旋转结果）。

# ruby-on-rails - 如何通过 JSON API 通过 Carrierwave 上传文件？

> ID：11006453
> 
> 赞同：7
> 
> 时间：2012-06-12T23:52:10.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在 Rails 中构建文件操作 API，我需要能够通过单独的 gem 访问它。该 API 使用 Carrierwave，并且该部分可以毫无问题地工作。我不明白该怎么做是获取任意文件并将其从 gem 接口传递给 API。

Carrierwave 将其文件作为`File.open('foo.jpg')`文件字段的结果或作为 POST。不过，我真的不确定两者都在做什么来序列化文件并将其发送。

如何获取文件的内容并将其转换为可以通过 JSON 传递和发布的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:15:38.960

当 HTML 表单 POST 文件时，实际发生的是 HTTP 的一个特殊部分，称为多部分请求。实际上，文件被“附加”到请求中。

该问题将由您用于将 JSON 发布到您的 api 的库来回答。将文件附加到请求应该是相当普遍的，但并非所有库都支持它。

[这篇堆栈溢出文章似乎很好地说明了如何做到这一点。](https://stackoverflow.com/questions/184178/ruby-how-to-post-a-file-via-http-as-multipart-form-data)

# java - 确定是否在文本文件中找到某个正则表达式 (Java)

> ID：11006458
> 
> 赞同：0
> 
> 时间：2012-06-12T23:53:01.327
> 
> 标签：java, regex, string, text

我对 Java 还很陌生，我刚开始使用 RegEx，我想知道哪种方法是检查在给定文本墙作为输入的情况下是否找到某个正则表达式并且它有效的最佳方法。我举个例子。

我有这个文本文件作为输入：

> Derpity64_1 64 3 6 1
> 
> HerpDerp32 1 6 3 0 26
> 
> 呼尔杜尔16 2 5 7 7 78

现在，与我相关的部分是 HerpDerp32。在确保文本文件包含 HerpDerp 字符串之后，我想确保 HerpDerp 之后的数字（在本例中为 32）是 16、32 或 64。

我该如何继续？如果我犯了任何错误/没有很好地解释，我很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:05:29.763

这里不需要正则表达式...

您所要做的就是遍历文件（一次读取一行）。

找到以搜索词开头的行后，只需检查该词后面的字符即可。

您可以使用[String.substring()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)检查 HerpDerp 之后的字符。

如果你打算使用 java，你不妨习惯阅读 API 文档。

这是[带有字符串函数的页面](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)。你会经常使用**这个**。

```
 http://docs.oracle.com/javase/6/docs/api/java/lang/String.html 
```

这是[FileReader 类的文档，在](http://docs.oracle.com/javase/6/docs/api/java/io/FileReader.html)这里也很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:25:44.133

你真的必须使用正则表达式吗？Jahroy 提出了更快的建议

```
String[] data = { "Derpity64_1 64 3 6 1", "HerpDerp32 1 6 3 0 26",
        "HurrDurr16 2 5 7 7 78" };

for(String s:data){//iterate over all Strings in 'data' array
    if (s.startsWith("HerpDerp"))//check if tested string starts with HerpDerp
        //HerpDerp32 1 6 3 0 26
        //        ^^
        //0123456789
        //show only chars from 8 till 9 index
        System.out.println(s.substring(8,10));//(10 is excluded)
} 
```

* * *

编辑：

我不确定这是否是您正在寻找的，因为它基于您的原始问题，但请使用您的数据和正则表达式尝试它。

```
String[] data = { "Derpity64_1 64 3 6 1", "HerpDerp32 1 6 3 0 26",
    "HurrDurr16 2 5 7 7 78" };
Pattern p=Pattern.compile("^HerpDerp(\\d*)");
for (String s : data) {
    Matcher m=p.matcher(s);
    if(m.find()) 
        System.out.println(m.group(1));
        //group(1) will return content from first bracket in regex
} 
```

# codeigniter - 一个搜索词 - 使用 codeigniter 的两组结果。如何？

> ID：11006470
> 
> 赞同：0
> 
> 时间：2012-06-12T23:53:47.753
> 
> 标签：codeigniter

我有一个搜索表格。我想当有人输入这个词时，首先搜索用户表并返回他的姓名、用户名、电子邮件等……接下来我应该使用另一个表示例中的相同搜索词执行另一个查询：posts and return posts with用户名和帖子。

所以我必须返回并显示两组结果。我必须承认我完全迷失了，不知道如何继续。

任何人都可以帮助我了解如何使用 codeigniter 做到这一点？

在此先感谢，佐雷利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:04:56.183

如果那是您要执行的操作，则不能进行两次搜索。

最好和最简单的方法是这样做：

```
$this->load->model('search');

$data['users'] = $this->search->searchUsers($searchTerm);
$data['posts'] = $this->search->searchPosts($searchTerm);

$this->load->view('yourView',$data); 
```

这假定`search`模型具有搜索表的方法。在您看来，您可以迭代`$users`并`$views`引用返回的结果。

# javascript - javascript 对象始终为空

> ID：11006476
> 
> 赞同：3
> 
> 时间：2012-06-12T23:54:57.883
> 
> 标签：javascript, object

这是我的代码：

```
myExt = {};
myExt.Panel = function (config){
    var d = document.createElement("div");
    /*Do something (a lot) with config and d here
    // a lot of code here
    */
    return
    {
        div:d,
        events:e,
        customattribs:ca
     };
} 
```

这是我的来电者：

```
var p = new myExt.Panel({
    id:'parent',
    events:{
        onload:function(){
            alert("onload");
        }
    },
    //more configs
}); 
```

如果我做

```
console.log(p) 
```

我得到空值。请帮我调试问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T00:00:22.943

[自动分号插入](http://es5.github.com/x7.html#x7.9)已将您的函数的返回值从：

```
return { div: d, events: 3, customattribs:ca }; 
```

进入：

```
return; 
```

最好将要返回的值存储在变量中，然后返回该对象：

```
var ret;
ret = {
    div: d,
    events: e,
    customattribs: ca
};
return ret; 
```

# python - 错误的默认 python 命令

> ID：11006481
> 
> 赞同：1
> 
> 时间：2012-06-12T23:55:54.940
> 
> 标签：python, linux, centos

我刚刚安装了与我的 python2.4 并行的 python2.6。我运行了这个命令`ln -s /opt/python2.6/bin/python /usr/bin/python2.6`，现在当我输入`python`我得到这个错误：

```
/opt/python2.6/bin/python: error while loading shared libraries: libpython2.6.so.1.0: cannot open shared object file: No such file or directory 
```

我可以输入 /usr/bin/python2.4 并且旧的 python 加载正常。如何将命令“python”恢复到 /usr/bin/python2.4 中的旧 python

现在我的服务器不会因此而提供网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:01:53.360

检查您的 PATH 变量。修复那里的路径。

# css - 更改 Wordpress 分页符的颜色

> ID：11006482
> 
> 赞同：0
> 
> 时间：2012-06-12T23:55:58.383
> 
> 标签：css, wordpress

我有一个 wordpress 页面（沙发 QandA）。我想更改主屏幕上灰色分页符的颜色。我在css中找不到相关代码。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:59:49.747

假设水平中断是一个`<hr>`元素，您可以根据需要设置它的样式。

```
hr {
   /* your styles here */
} 
```

[**演示**](http://jsfiddle.net/zSWbg/5/)

如果它不是`hr`元素，您可以右键单击它并选择“检查元素”以查看换行符是如何形成的，以及应用了哪些样式。

# sql-server-2008 - 在同一个表中更新/插入触发器

> ID：11006483
> 
> 赞同：0
> 
> 时间：2012-06-12T23:56:17.253
> 
> 标签：sql-server-2008, tsql, triggers

我对此有点陌生，但想写一些第一个简单的触发器。如果我有字段 A、B、C 的 mytable。当用户插入或更新 A 和 B 时，我想通过触发器更新 C=A+B 会容易吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:07:34.940

这是一个可以按照您的要求执行的触发器。由于 mytable 中缺少 ID 列，因此无法为已更新的行仅指定 update c（即，`c`每次插入/更新时，将为每一行重新计算 的值）。

```
CREATE TRIGGER mytrigger
ON mytable
FOR INSERT, UPDATE
AS
    UPDATE mytable
    SET    c = COALESCE(a, 0) + COALESCE(b, 0) 
```

这将是计算列的合适候选者：

```
CREATE TABLE mytable
  (
     a INT,
     b INT,
     c AS COALESCE(a, 0) + COALESCE(b, 0)
  ) 
```

**编辑**：带有 ID 列的示例仅更新`c`更新/插入的行：

```
CREATE TRIGGER mytrigger
ON mytable
FOR INSERT, UPDATE
AS
    UPDATE mytable
    SET    c = COALESCE(a, 0) + COALESCE(b, 0)
    WHERE  ID IN (SELECT ID
                  FROM   inserted) 
```

我创建了一个[SQL Fiddle](http://sqlfiddle.com/#!3/5e571/3)，您可以在其中实时查看。

让您了解 SQL Fiddle 示例：

1.  创建模式，添加一些示例数据，然后添加触发器定义（`c`此时未填充）。
2.  从表中选择，以便您查看示例值。
3.  更新一行，然后再次从表中选择（可以看到`c` 现在已经被填充了）。
4.  插入一个新行，然后再次从表中选择所有内容（`c` 已为此新行填充）。

为了进一步解释这是如何工作的 - 在触发器执行期间，SQL 服务器（我现在假设这是您正在使用的）创建两个临时表`inserted`并`deleted`包含受影响行的副本 - 我们可以加入或选择如果我们需要从这些表中获取数据；在这种情况下，只需获取受更新/插入操作影响的 id 列表，然后仅更新`c`这些行。有关这方面的更多详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms191300.aspx)。

# c++ - 使用 MSVC++ 2005 在 Windows 上的 C++ 内存问题和诊断

> ID：11006488
> 
> 赞同：1
> 
> 时间：2012-06-12T23:57:19.423
> 
> 标签：c++, windows, memory, memory-management, visual-studio-2005

我正在用一个不太有用的诊断信息来追踪一个内存错误：

```
HEAP[myprogram_run.exe]: HEAP: Free Heap block e0969b0 modified at e096a70 after it was freed
Windows has triggered a breakpoint in myprogram_run.exe.

This may be due to a corruption of the heap, and indicates a bug in myprogram_run.exe or any of 
the DLLs it has loaded.

The output window may have more diagnostic information
The program '[9340] myprogram_run.exe: Native' has exited with code -1 (0xffffffff). 
```

环顾四周后，我发现这些 MSDN 链接： http: [//msdn.microsoft.com/en-US/library/e5ewb1h3%28v=vs.80%29](http://msdn.microsoft.com/en-US/library/e5ewb1h3%28v=vs.80%29)我将项目属性预处理器定义（在 C/C++ 下）设置为包括 _DEBUG 并且在我的主要功能中，我也按照推荐的顺序添加了以下内容（在上面的链接中）：

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h>

...

int main(..,..) {
   ...
   _CrtDumpMemoryLeaks();
   return retval;
} 
```

但我仍然没有在 Visual Studio 解决方案的输出窗口中看到广告的诊断输出（包括行号等）？感谢有关如何正确诊断此问题的任何见解。谢谢！

我可以在项目属性下设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:04:28.857

你确定你的代码`_CrtDumpMemoryLeaks`在它崩溃之前就可以到达调用了吗？我的猜测是你的代码在有机会报告任何可能的内存泄漏之前试图释放一些已经释放的内存而崩溃。

有关如何使用调试功能的更多线索，请查看[Microsoft 示例。](http://msdn.microsoft.com/en-us/library/fxszt639%28v=vs.80%29.aspx)

# java - 具有安全约束的 JSP 中的 CSS 问题

> ID：11006490
> 
> 赞同：0
> 
> 时间：2012-06-12T23:58:05.643
> 
> 标签：java, security, jsp, web.xml

我的css和我的一个jsps有一个愚蠢的问题。我创建了一个受限文件夹，只有注册的人才能访问其中的页面。

由于某种原因，当我转到安全文件夹内的任何页面时，CSS 会消失，login.jsp（位于安全文件夹之外）或 login-error.jsp（也在安全文件夹之外）。

我尝试使用绝对和相对链接来链接回 CSS，但似乎仍然没有任何效果。

关于如何解决这个问题的任何想法？

这是安全约束：

```
 <security-constraint>
        <display-name>user</display-name>
        <web-resource-collection>
            <web-resource-name>Users Area</web-resource-name>
            <description>Protected Users Area</description>
            <url-pattern>/user/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>PUT</http-method>
            <http-method>HEAD</http-method>
            <http-method>POST</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>user</role-name>
        </auth-constraint>
    </security-constraint> 
```

这是截图文件夹结构： ![目录结构](../Images/e59b32d07cfc0481855221a2b684c62f.png)

我再次测试，css 没有显示任何与 sec 约束相关的文件（login.jsp、login-error.jsp、user/Dashboard.jsp）。

# java - 使用鼠标选择要捕获的区域

> ID：11006496
> 
> 赞同：8
> 
> 时间：2012-06-12T23:58:48.560
> 
> 标签：java, image, screenshot, selected, area

我正在制作一个基于 Java 的屏幕截图应用程序，并且我想制作它，因此当您按下键盘上的组合键时，会在您选择屏幕上的区域和区域时发生类似[此视频](http://www.youtube.com/watch?v=bJ6VbbpQ0XY)的情况，它会截取屏幕截图选定的区域。

如何使用鼠标选择要捕获的区域？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T02:21:53.890

从这样的事情开始。

![屏幕截图矩形](../Images/53420c60f51e701b16c98555737a97f4.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.swing.*;

/** Getting a Rectangle of interest on the screen.
Requires the MotivatedEndUser API - sold separately. */
public class ScreenCaptureRectangle {

    Rectangle captureRect;

    ScreenCaptureRectangle(final BufferedImage screen) {
        final BufferedImage screenCopy = new BufferedImage(
                screen.getWidth(),
                screen.getHeight(),
                screen.getType());
        final JLabel screenLabel = new JLabel(new ImageIcon(screenCopy));
        JScrollPane screenScroll = new JScrollPane(screenLabel);

        screenScroll.setPreferredSize(new Dimension(
                (int)(screen.getWidth()/3),
                (int)(screen.getHeight()/3)));

        JPanel panel = new JPanel(new BorderLayout());
        panel.add(screenScroll, BorderLayout.CENTER);

        final JLabel selectionLabel = new JLabel(
                "Drag a rectangle in the screen shot!");
        panel.add(selectionLabel, BorderLayout.SOUTH);

        repaint(screen, screenCopy);
        screenLabel.repaint();

        screenLabel.addMouseMotionListener(new MouseMotionAdapter() {

            Point start = new Point();

            @Override
            public void mouseMoved(MouseEvent me) {
                start = me.getPoint();
                repaint(screen, screenCopy);
                selectionLabel.setText("Start Point: " + start);
                screenLabel.repaint();
            }

            @Override
            public void mouseDragged(MouseEvent me) {
                Point end = me.getPoint();
                captureRect = new Rectangle(start,
                        new Dimension(end.x-start.x, end.y-start.y));
                repaint(screen, screenCopy);
                screenLabel.repaint();
                selectionLabel.setText("Rectangle: " + captureRect);
            }
        });

        JOptionPane.showMessageDialog(null, panel);

        System.out.println("Rectangle of interest: " + captureRect);
    }

    public void repaint(BufferedImage orig, BufferedImage copy) {
        Graphics2D g = copy.createGraphics();
        g.drawImage(orig,0,0, null);
        if (captureRect!=null) {
            g.setColor(Color.RED);
            g.draw(captureRect);
            g.setColor(new Color(255,255,255,150));
            g.fill(captureRect);
        }
        g.dispose();
    }

    public static void main(String[] args) throws Exception {
        Robot robot = new Robot();
        final Dimension screenSize = Toolkit.getDefaultToolkit().
                getScreenSize();
        final BufferedImage screen = robot.createScreenCapture(
                new Rectangle(screenSize));

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new ScreenCaptureRectangle(screen);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:35:59.870

这很简单：

[http://www.javalobby.org/forums/thread.jspa?threadID=16400&tstart=0](http://www.javalobby.org/forums/thread.jspa?threadID=16400&tstart=0)

[http://www.javaworld.com/javaworld/jw-04-2006/jw-0424-funandgames.html](http://www.javaworld.com/javaworld/jw-04-2006/jw-0424-funandgames.html)

# android - Android：如何使用for循环查找多个textView的文本值？

> ID：11006498
> 
> 赞同：0
> 
> 时间：2012-06-12T23:59:21.463
> 
> 标签：android

我很难像这样根据实际ID找到每个视图-

```
TextView updateText = (TextView)findViewById(R.id.courtText1); 
```

根据循环中“i”的当前值查找每个视图，如下所示-

```
for(int i=1; i<3; i++){
    TextView updateText = (TextView)findViewById(R.id.courtText"i");
} 
```

这是布局 XML-

```
<TableLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="2dp" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:background="@drawable/row_background"
                android:clipToPadding="true"
                android:padding="5dp" android:onClick="goToDetail">

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/courtText1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Moscone Rec Center"
                        android:textColor="#D8D8D8"
                        android:textSize="20dp" />

                    <TextView
                        android:id="@+id/updateText1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />

                    <TextView
                        android:id="@+id/timeText1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />

                </LinearLayout>

                <ImageButton
                    android:id="@+id/imageButton2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@android:drawable/ic_dialog_map" android:onClick="goToMap"/>

                <ImageButton
                    android:id="@+id/imageButton3"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:src="@android:drawable/ic_menu_share" android:onClick="shareUpdate"/>

            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:background="@drawable/row_background"
                android:clipToPadding="true"
                android:padding="5dp" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/courtText2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Joe Dimaggio"
                        android:textColor="#D8D8D8"
                        android:textSize="20dp" />

                    <TextView
                        android:id="@+id/updateText2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />

                    <TextView
                        android:id="@+id/timeText2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />
                </LinearLayout>
                <ImageButton
                    android:id="@+id/imageButton2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@android:drawable/ic_dialog_map" />

                <ImageButton
                    android:id="@+id/imageButton3"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:src="@android:drawable/ic_menu_share" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:background="@drawable/row_background"
                android:padding="5dp" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/courtText3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Brentwood Rec Center"
                        android:textColor="#D8D8D8"
                        android:textSize="20dp" />

                    <TextView
                        android:id="@+id/updateText3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />

                    <TextView
                        android:id="@+id/timeText3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />
                </LinearLayout>
                <ImageButton
                    android:id="@+id/imageButton2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@android:drawable/ic_dialog_map" />

                <ImageButton
                    android:id="@+id/imageButton3"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:src="@android:drawable/ic_menu_share" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="2dp"
                android:background="@drawable/row_background"
                android:padding="5dp" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Can't find your court?"
                        android:textColor="#D8D8D8"
                        android:textSize="20dp" />
                     <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Let us know"
                        android:textColor="#D8D8D8"
                        android:textSize="15dp" />

                     <ImageButton
                         android:id="@+id/imageButton4"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:src="@android:drawable/ic_dialog_email" android:onClick="createSupportEmail"/>

                </LinearLayout>
            </TableRow>
        </TableLayout> 
```

关于如何通过循环找到每个项目的价值的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:02:57.827

给你的容器 ( `LinearLayout`) 一个 id，然后遍历它的子容器。

```
LinearLayout container = (LinearLayout) findViewById(R.id.whatever);
TextView updateText;

for (int i = 0; i < container.getChildCount(); i++) {
    updateText = (TextView) container.getChildAt(i);
    // Do something to `updateText`
} 
```

**更新：**这是这类事情的一般习惯用法。我只是更仔细地查看了您的代码，如果我理解您在这种情况下要执行的操作，您希望遍历表行并对`TextArea`每一行的特定内容执行某些操作。如果是这样，那么您应该摆脱数字，而不是 , 等`courtText1`。每行`courtText2`有一个`courtText`、一个`upateText`和一个。`timeText`然后做这样的事情：

```
TableLayout table = (TableLayout) findViewById(R.id.give_it_an_id);
TextView courtText;

// For each row
for (int i = 0; i < table.getChildCount(); i++) {
    // Get the one `courtText` in this row
    courtText = table.getChildAt(i).findViewById(R.id.courtText);
    if (courtText != null) {
        // Do something to `courtText`
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:27:31.263

既然你知道有多少而且你知道 ids......你可以很容易地做类似的事情，

```
for (int id : new int[] {R.id.courtText1, R.id.timeText1, R.id.updateText1, R.id.courtText2, R.id.timeText2, R.id.updateText2}) {
    TextView tv = (TextView)findViewbyId(id);
    // do something with the view
} 
```

但是，也许如果你有一堆重复的结构，那么也许一个 custom`Adapter`和 a`GridView`会更适合它。

# php - 如何使用图形 api 通过表单将图像上传到 facebook

> ID：11006499
> 
> 赞同：-1
> 
> 时间：2012-06-12T23:59:24.287
> 
> 标签：php, facebook, facebook-graph-api, sdk, upload

关于这篇文章 - [如何使用图形 api 设置 facebook 个人资料图片](http://facebook.stackoverflow.com/questions/4306786/how-to-set-a-facebook-profile-picture-using-the-graph-api/5431751#5431751)

如何从表单域提交图像？realpath 方法有什么作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:20:28.873

这是使用表单将图像发布到 facebook 的示例。[脸书文档](https://developers.facebook.com/blog/post/498/)

# ios5 - 无法找到必要的用户位置图形资产 (MapBox)

> ID：11006501
> 
> 赞同：0
> 
> 时间：2012-06-12T23:59:57.573
> 
> 标签：ios5, geolocation, ios6

我们是否需要在主项目中手动导入来自 iOS MapBox SDK 的用户位置图形资产？

如果我尝试显示用户位置，则会出现此错误（在 iOS6 上的 iPhone 4s 上构建 - 在模拟器 iOS 5.1 上记录了相同的错误）

```
if (!self.mapView.isUserLocationVisible) {
    self.mapView.showsUserLocation = YES;
} 
```

记录的确切错误是：

> [RMUserLocation initWithMapView:coordinate:andTitle:]，/Users/franco/Apps/XXXX/Application/XXXX/Vendors/mapbox-ios-sdk/MapView/Map/RMUserLocation.m:24 2012-06-13 01:41:52.426 XXXX[2058:907] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法找到必要的用户位置图形资产（从 MapView/Map/Resources 复制）”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:46:54.287

我是 SDK 的开发者。没有更简单的解决方案，因为 SDK 构建为静态库，因此不能包含图形资产。您可以做的一件事是仅引用资产，不必将它们复制到您的项目中，并使用 SDK 附带的实际文件。但我把它放进去是`NSAssert()`为了避免开发人员不知道为什么用户位置没有出现的情况。

我还应该补充一点，就像 Apple 的 MapKit 一样，该`isUserLocationVisible`属性不是用于测试位置是否显示，而是用于测试当前是否在屏幕上。因此，您应该检查`showsUserLocation`以确定是否设置`showsUserLocation`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:52:06.957

找到的解决方案是**将 MapView/Map/Resources 中的资产文件添加（复制）到我的根项目**中。

我认为标头搜索路径（设置为**$(SRCROOT)/IntraMuros/Vendors/mapbox-ios-sdk**）将使这些资产可用。

可能有一种更清洁的方法可以做到这一点。

请注意，资产文件在 MapView 子项目中可用。

# ruby - 如何为 Ruby 开发者安装 Xcode 4.1

> ID：11006503
> 
> 赞同：1
> 
> 时间：2012-06-13T00:00:10.380
> 
> 标签：ruby, xcode, installation

如何在没有“LLVM”的情况下安装 gcc？

我想安装一个较旧的 Xcode 副本，以便可以在 Ruby 1.8.7 上进行 Ruby 开发。在我通过应用商店从 4.1 升级到 4.3 之前，这曾经在我的机器上工作。升级后，我发现许多 gem 无法编译。`sudo /Developer/Library/uninstall-devtools --mode=all`(TheRubyRacer, MySQL) 我已经使用该命令从我的系统中删除了 4.1 和 4.3 。重新启动后，我确认`gcc`命令失败并且 Xcode 未列在 Applications 文件夹中。

我从开发者中心下载了 Xcode 4.1 for Lion 并安装了它。不幸的是，我仍然无法从以前构建宝石。我从 gcc 检查了版本，发现我确实安装了 4.2。

`gcc --version`是

```
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

我的错误`gem install mysql`如下

```
构建原生扩展。这可能需要一段时间...
错误：安装mysql时出错：
    错误：无法构建 gem 原生扩展。

        /Users/jjasonclark/.rvm/rubies/ruby-1.8.7-p358/bin/ruby extconf.rb
检查 -lmysqlclient 中的 mysql_query()... 否
检查 -lm 中的 main()... 是
检查 -lmysqlclient 中的 mysql_query()... 否
检查 -lz 中的 main() ......是的
检查 -lmysqlclient 中的 mysql_query()... 否
检查 -lsocket 中的 main()... 否
检查 -lmysqlclient 中的 mysql_query()... 否
检查 -lnsl 中的 main()... 否
检查 -lmysqlclient 中的 mysql_query()... 否
检查 -lmygcc 中的 main() ... 否
检查 -lmysqlclient 中的 mysql_query()... 否
*** extconf.rb 失败 ***
由于某种原因无法创建 Makefile，可能缺少
必要的库和/或头文件。查看 mkmf.log 文件了解更多信息
细节。您可能需要配置选项。

提供的配置选项：
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --没有-make-prog
    --srcdir=。
    --curdir
    --ruby=/Users/jjasonclark/.rvm/rubies/ruby-1.8.7-p358/bin/ruby
    --with-mysql-config
    --没有-mysql-config
    --with-mysql-dir
    --没有-mysql-dir
    --with-mysql-include
    --without-mysql-include=${mysql-dir}/include
    --with-mysql-lib
    --without-mysql-lib=${mysql-dir}/lib
    --with-mysqlclientlib
    --没有-mysqlclientlib
    --with-mlib
    --没有-mlib
    --with-mysqlclientlib
    --没有-mysqlclientlib
    --with-zlib
    --没有-zlib
    --with-mysqlclientlib
    --没有-mysqlclientlib
    --with-socketlib
    --不带socketlib
    --with-mysqlclientlib
    --没有-mysqlclientlib
    --with-nsllib
    --没有-nsllib
    --with-mysqlclientlib
    --没有-mysqlclientlib
    --with-mygcclib
    --没有-mygcclib
    --with-mysqlclientlib
    --没有-mysqlclientlib

Gem 文件将继续安装在 /Users/jjasonclark/.rvm/gems/ruby-1.8.7-p358/gems/mysql-2.8.1 以供检查。
结果记录到 /Users/jjasonclark/.rvm/gems/ruby-1.8.7-p358/gems/mysql-2.8.1/ext/mysql_api/gem_make.out

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:06:49.540

我永远无法让 Xcode 与旧版本的 Ruby 一起工作。我的解决方案是安装[osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)。

# mysql - DECIMAL mysql和存储空间？

> ID：11006505
> 
> 赞同：4
> 
> 时间：2012-06-13T00:00:26.187
> 
> 标签：mysql, decimal

根据我对 mysql 文档中手册的理解`DECIMAL`，它指出每个九位数字的倍数需要 4 个字节，剩下的数字如下；

```
number of digits leftover  |   bytes

0                          |   0
1                          |   1
2                          |   1
3                          |   2
4                          |   2
5                          |   3
6                          |   3
7                          |   4
8                          |   4 
```

所以 a`decimal(12,6)`等于 6 个字节的总存储空间？

我知道小数部分将始终等于 6 位，因为填充了零，但是对于`DECIMAL(12,6)`列而言，整数部分不是这样，存储是按行还是在列定义时获得值？

例子

```
 DECIMAL(12,6)
 1: 178.999999 // 3 digits for integer part so total would be 5 bytes?
 2: 0.880000 // 1 digits for integer part so total would be 4 bytes?
 3  123456.123456 // 6 digits would equal 6 bytes? 
```

或者如果声明它总是 6 个字节`(12,6)`？

**编辑**

同样，声明为的小数`(5,5)`需要 6 个字节来存储，而声明为的小数`(12,6)`也需要 6 个字节来存储。看到存储大小不是问题，大小差异会影响 mysql 如何检索或索引列吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-12T13:48:22.393

```
DECIMAL(12,6) 
```

1: 178.999999 // 整数部分为 3 位，因此总计为 5 个字节（正确） 2: 0.880000 // 整数部分为 1 位，因此总计为 4 个字节？（错误）3 123456.123456 // 6 位等于 6 个字节？ （正确的）

解释：剩余数字字节数 0 0

1 1

2 1

3 2

4 2

5 3

6 3

7 4

8 4

并且所有 9 的倍数将包含 4 个字节

所以 0.880000 整数部分取 0，小数部分取 3，因此 0+3=3

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T00:13:44.950

对于 MySQL 5.1（及更高版本），它将整数部分和小数部分的存储分开，并为可能的最大数字留出空间。所以对于 DECIMAL(12,6)，整数部分需要 3 个字节，小数部分需要 3 个字节。看起来它不会根据值减少存储；无论值是什么，它都会将内存放在一边。

您可以在此处查看文档：

[MySQL 十进制手册页](https://dev.mysql.com/doc/refman/8.0/en/precision-math-decimal-characteristics.html)

# macos - 控制台单声道可执行文件完成后不退出

> ID：11006506
> 
> 赞同：0
> 
> 时间：2012-06-13T00:00:26.843
> 
> 标签：macos, mono, ikvm

我有一个 .NET 项目，多年来我一直在用 Visual Studio 编译并在 Windows 上成功运行。我想转而使用 Mac OS X 来运行这个特定的程序，因此使用单声道已经有一段时间了，这使这成为可能。结果非常好，程序在单声道（2.10.9，BTW）下按预期执行。

唯一的问题是程序完成后不会退出。它是一个单线程进程，但是当它的工作完成时（它在`Main(string[])`方法结束时报告），进程并没有退出；`^C`需要返回到 shell 提示符。最后添加显式`System.Environment.Exit(exitCode);`调用没有任何效果。

[几年前，我在这里](http://www.mail-archive.com/mono-devel-list@lists.ximian.com/msg05462.html)只找到了一个关于这类问题的故事，尽管那个 ML 线程没有提供潜在的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:41:01.170

罗尔夫（在他对这个问题的评论中）是对的，虚拟机在关机时陷入僵局。

我在这个应用程序中使用[IKVM](http://www.ikvm.net/)，在某些情况下它需要在 vm 关闭时启动一个线程来清理它的 JVM<->CLR 互操作机制；这显然不适用于单声道（但始终适用于.NET）。

这是由 IKVM 的作者[在 IKVM 开发列表上的一个线程上](https://sourceforge.net/mailarchive/forum.php?thread_name=B75FBFED-D6C4-4E19-BD7E-B4F331F3C3E9%40snowtide.com&forum_name=ikvm-developers)发现的，他在 mono 项目中提交[了这个错误。](https://bugzilla.xamarin.com/show_bug.cgi?id=5650)

在我的情况下，解决方法是显式调用`java.lang.System.exit(exitCode)`而不是简单地让程序自然终止或使用`System.Environment.Exit(exitCode)`. 这允许 IKVM 在 vm 终止生命周期之外关闭，从而避免单声道错误。

# android - 使用 cursor.respond(Bundle) 和 cursor.getextras()

> ID：11006511
> 
> 赞同：3
> 
> 时间：2012-06-13T00:01:10.260
> 
> 标签：android, sqlite, cursor, android-viewbinder, mergecursor

我有 2 个来自 SQLite 数据库中不同表的游标。我试图将两个游标中的数据合二为一，`ListView`但每个游标的数​​据格式不同。

我的想法是使用 a`MergeCursor`来组合两个光标，但`ViewBinder`for my`SimpleCursorAdapter`会将它们视为单个光标，并且无法区分格式（除非我更改我不想这样做的表格）。

最后，我找到了两个名为`Cursor.repond(Bundle)`&的方法`Cursor.getExtras()`，但是开发者控制台上的文档很短，谷歌搜索这些方法并没有说明它们的用途。

我测试了我的想法以`resond()`在我的数据库类中用于查询：

```
 extr.putString("table", the_tab);
    Cursor c_in = db.rawQuery(qry, null);
    c_in.respond(extr);
    return c_in; 
```

并在 中使用`getExtras()`以`ViewBinder`了解查询表并`ListView`相应地格式化项目：

```
Bundle extr=cur.getExtras();
String tab= extr.getString("table"); 
```

但我总是遇到一个`tab`例外`null`。

经过这么长的描述后，我的问题是：我是否正确使用了`respond`and`getExtras`方法？如果没有，是否有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T15:59:17.763

如果你想使用`Bundle`in`getExtras`似乎`AbstractCursor`which is extended by `AbstractWindowedCursor`which is extended by`SQLiteCursor`定义了一个`setExtras`方法。它的文档读取

> 设置将由 getExtras() 返回的 android.os.Bundle。null 将被转换为 android.os.Bundle.EMPTY。

`respond``Cursor`根据文档，用于带外通信。

所以答案是：

```
((AbstractCursor) cursor).setExtras(bundle); 
```

然后你应该可以打电话

```
cursor.getExtras(); 
```

在稍后的时间来检索那个`Bundle`。

**编辑：**

进一步看，似乎`setExtras`由于某种原因被标记为隐藏，因此它是公开的，并且旨在按照描述（和期望）使用。请参阅[ContactsProvider2 示例](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.4_r2.1/com/android/providers/contacts/ContactsProvider2.java#4881 "源示例")

所以，我想出了使用`CursorWrapper`，并覆盖`getExtras`那里提供`Bundle`. 就我而言，我在 中创建`Bundle`，`CursorWrapper`所以我不需要设置它的方法。

```
@Override
public Bundle getExtras() {
    return _meta_data;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:44:57.973

尝试将表名构建为两个`SELECT`s 中的字段。

```
SELECT "A", * from tableA;  SELECT "B", * from tableB; 
```

然后计算一个合并的游标。交替，

```
SELECT "A", * from tableA UNION ALL SELECT "B", * from tableB; 
```

现在游标的每一行将`"A"`在第一列中有一个如果它来自`tableA`和一个`"B"`如果它来自`tableB`。因此，您可以轻松查看此列`ViewBinder`来做出格式决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T20:18:14.760

这是另一种选择（尽管[您不应该使用它](https://stackoverflow.com/questions/17035271/what-does-hide-mean-in-the-android-source-code)）：

```
Class.forName("android.database.AbstractCursor")
        .getMethod("setExtras", new Class[]{Bundle.class})
        .invoke(c_in, extr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T05:03:28.233

我会坚持让你看看[`MergeCursor`](http://developer.android.com/reference/android/database/MergeCursor.html)并[`AbstractCursor`](http://developer.android.com/reference/android/database/AbstractCursor.html)解决你的问题并找到解决方案。例如，您可以检查[`this`](https://stackoverflow.com/questions/3235746/listview-using-two-cursoradapters)答案。

# jquery - 如何添加jquery背景图片属性

> ID：11006516
> 
> 赞同：-1
> 
> 时间：2012-06-13T00:01:53.567
> 
> 标签：jquery

如何使用`jQuery.css()`.

我正在尝试更改此代码：

```
$("body").css("background-image","url('resources/ipad.png')") 
```

有点像这样：

```
$("body").css("background","#026EB7 url('resources/ipad.png') center top repeat") 
```

谁能指出我这个方向，有什么可能是错的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:07:51.033

我相信以下应该有效：

```
$("body").css("background","url('resources/ipad.png') center top repeat #026EB7 "); 
```

但你总是可以尝试备用 jQuery css 语法

```
$('body').css({
     backgroundImage    : 'url("resources/ipad.png")',
     backgroundPosition : 'center top',
     backgroundRepeat   : 'repeat',
     backgroundColor    : '#026EB7'
}); 
```

# php - 从 PHP 中的字符串中提取 Twitter 主题标签

> ID：11006518
> 
> 赞同：5
> 
> 时间：2012-06-13T00:02:21.743
> 
> 标签：php, twitter, hashtag

我需要一些关于 twitter 主题标签的帮助，我需要在 PHP 中提取某个主题标签作为字符串变量。直到现在我有这个

```
$hash = preg_replace ("/#(\\w+)/", "<a href=\"http://twitter.com/search?q=$1\">#$1</a>", $tweet_text); 
```

但这只是将 hashtag_string 转换为链接

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T00:13:52.603

用于[`preg_match()`](http://php.net/preg_match)识别哈希并将其捕获到变量中，如下所示：

```
$string = 'Tweet #hashtag';
preg_match("/#(\\w+)/", $string, $matches);
$hash = $matches[1];
var_dump( $hash); // Outputs 'hashtag' 
```

[演示](http://codepad.viper-7.com/AlrHgb)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T06:18:25.433

据我了解，您是说在 text/pargraph/post 中您想显示带有井号 (#) 的标签，如下所示：- #tag 和在 url 中您要删除 # 符号，因为之后的字符串`#`未在请求中发送到服务器所以我编辑了你的代码并试试这个： -

```
$string="www.funnenjoy.com is best #SocialNetworking #website";    
$text=preg_replace('/#(\\w+)/','<a href=/hash/$1>$0</a>',$string);
echo $text; // output will be www.funnenjoy.com is best <a href=search/SocialNetworking>#SocialNetworking</a> <a href=/search/website>#website</a> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-30T22:46:14.277

我认为这个功能会帮助你：

```
echo get_hashtags($string);

function get_hashtags($string, $str = 1) {
    preg_match_all('/#(\w+)/',$string,$matches);
    $i = 0;
    if ($str) {
        foreach ($matches[1] as $match) {
            $count = count($matches[1]);
            $keywords .= "$match";
            $i++;
            if ($count > $i) $keywords .= ", ";
        }
    } else {
        foreach ($matches[1] as $match) {
            $keyword[] = $match;
        }
        $keywords = $keyword;
    }
    return $keywords;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-27T02:26:01.017

提取多个主题标签到数组

```
$body = 'My #name is #Eminem, I am rap #god, #Yoyoya check it #out';
$hashtag_set = [];
$array = explode('#', $body);

foreach ($array as $key => $row) {
    $hashtag = [];
    if (!empty($row)) {
        $hashtag =  explode(' ', $row);
        $hashtag_set[] = '#' . $hashtag[0];
    }
}
print_r($hashtag_set); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-11T05:20:57.293

你可以使用[`preg_match_all()`](https://php.net/preg_match_all)PHP函数

```
preg_match_all('/(?<!\w)#\w+/', $description, $allMatches); 
```

只会给你 hastag 数组

```
preg_match_all('/#(\w+)/', $description, $allMatches); 
```

会给你 hastag 并且没有 hastag 数组

```
print_r($allMatches) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T00:14:02.930

[您可以使用preg_match 函数](http://php.net/manual/fr/function.preg-match.php)提取字符串中的值

```
preg_match("/#(\w+)/", $tweet_text, $matches);
$hash = $matches[1]; 
```

preg_match 将匹配结果存储在一个数组中。您应该查看文档以了解如何使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T00:14:48.203

这是一种非正则表达式的方法：

```
<?php

$tweet = "Foo bar #hashTag hello world";

$hashPos = strpos($tweet,'#');
$hashTag = '';

while ($tweet[$hashPos] !== ' ') {
 $hashTag .= $tweet[$hashPos++];
}

echo $hashTag; 
```

[**演示**](http://codepad.org/JlvfvIOa)

*注意：这只会获取推文中的第一个主题标签。*

# android - findViewByID(R.id.Button1) 方法无法识别参数中的“id”

> ID：11006520
> 
> 赞同：1
> 
> 时间：2012-06-13T00:02:23.800
> 
> 标签：android, android-widget

出于某种原因，参数中的“id”带有红色下划线，并且是“未解析且或不是字段”

```
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.os.Bundle;
import android.widget.Button;

public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button toggleButton = (Button)findViewById(R.id.toggleButton);
    toggleButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

            }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:41:29.327

检查包资源管理器中的 gen[Generated Java Files] 文件夹。

可能是空的，试试

项目 --> 清理

这将生成文件

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:41:04.850

这是每个人在使用 EclipseIDE 时都会遇到的问题之一。清理您的项目并再次构建它。

PS：还要确保您的 mail.xml 中 Button 的 id 是 android:id="@+id/toggleButton"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:35:50.623

这是eclipse IDE面临的一个问题。我有这个问题

*   当我的 xml 文件之一出现错误时
*   当我的清单文件中的包定义发生更改时
*   当我生成的文件在另一个包中时。

检查以上是否是您的问题。可能会有所帮助

清理和构建项目也可能对您有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-06T18:12:40.000

只需单击构建按钮（绿锤）。

//完毕

# css - 浮动 div 返回下一行

> ID：11006523
> 
> 赞同：0
> 
> 时间：2012-06-13T00:02:32.490
> 
> 标签：css, html, fluid-layout

为什么我的流体 div 会喷出来？

[http://jsfiddle.net/NF2T2/](http://jsfiddle.net/NF2T2/)

谢谢你的帮助！

抱歉，我对 CSS/HTML 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:11:24.877

可能你的计算是错误的。

通过将其设置为零来取出边距，使 div 正确对齐。这意味着您的百分比加起来没有达到 100%

```
#div_left{
   float:left;
   width:48%;
   margin-left:0;  //this was 3.6%
   height:auto;
} 
```

# ruby-on-rails - Capistrano 为每次部署创建新数据库

> ID：11006525
> 
> 赞同：0
> 
> 时间：2012-06-13T00:02:49.030
> 
> 标签：ruby-on-rails, sqlite, capistrano

目前，我将 Capistrano 部署到设置为开发环境的服务器上。

但是，每次我运行`cap deploy`时，它根本不会保留数据库，因此每次部署都会以一个全新的数据库结束，完全是空的。我必须运行`cap deploy:migrations`来设置数据库，但这里的问题是每个部署都有一个单独的数据库。

我想我可以更改`database.yml`为使用诸如`../../db/development.sqlite3`数据库之类的路径，但这意味着我必须在本地复制该更改，并且将我的数据库从我自己的笔记本电脑上的项目目录中移出将非常不方便。

有没有办法告诉 Capistrano 为每个部署使用单个数据库位置，但仍将我的数据库保持在本地的同一个位置？不幸的是，将服务器设置为生产环境不是这个阶段的选择。像能够做的事情：

```
development: 
  adapter: sqlite3
  :on local
      database: db/development.sqlite3
  :on server
      database: /webapps/rails/shared/dev.sqlite3
  pool: 5
  timeout: 5000 
```

（在这一点上，可能还值得一提的是，我仍然在学习如何使用 Rails）。

您的任何想法将不胜感激，谢谢。如果唯一的选择是将环境设置为生产环境，那将不得不这样做，但如果有办法让我将服务器保留为开发服务器，那就太好了。

杰克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:22:49.880

在 capistrano 中添加一个在任何数据库内容之前运行的步骤，以便为您希望指向共享目录的任何数据库文件创建符号链接。这就是`logs`为您设置的方式。类似这样的东西：

```
namespace :custom do
  task :symlink, :roles => :app do
    run "ln -nfs #{shared_path}/development.sqlite3 #{release_path}/db/development.sqlite3"
  end
end

after "deploy:create_symlink", "customs:symlink" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:15:14.827

我认为您在使用多种应用程序环境：一种用于在服务器上登台，一种用于本地开发，最后一种用于生产。为了顺利通过，[试试这里](http://cjohansen.no/en/rails/multi_staging_environment_for_rails_using_capistrano_and_mod_rails)。

# java - 配置 Spring Bean 以重用它自己的属性？

> ID：11006529
> 
> 赞同：1
> 
> 时间：2012-06-13T00:03:35.207
> 
> 标签：java, spring

我对 Spring 还很陌生，我需要一个具有两个属性的 bean——第二个是引用第一个属性的内联 bean。像这样的东西：

```
<bean id="aBean" class="com.sample.Bean">
    <property name="propertyOne" value="something" />
    <property name="propertyTwo">
        <bean class="com.sample.AnotherBean">
            <property name="propertyThree" ref="propertyOne />
        </bean>
    </property>
</bean> 
```

在这里制作`propertyOne`自己的 bean 不是一种选择。实现这一目标的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:54:00.707

我能想到的唯一方法是为您的公共属性创建一个 bean 并在两者中引用这个公共属性`Bean`-`AnotherBean`为什么这不是您的选择？

由于依赖关系图，任何其他方式都行不通 - aBean 依赖于另一个 Bean，因此`AnotherBean`会在之前实例化`aBean`并且无法引用子 bean 属性。

如果没有这种依赖关系，您可以使用 Spring-EL 来引用该属性：

```
<property name="propertyThree" value="${aBean.propertyOne}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:41:36.810

您可以将“propertyOne”创建为单独的 bean。

并从 aBean 和您的内联 bean 中引用它。

```
<bean id="propertyOne" class="java.lang.String">
    <constructor-arg><value>"blabla"</value></constructor-arg>
</bean>

<bean id="aBean" class="com.test.SimpleBean">
<property name="name" ref="firstProperty" />
<property name="newBean">
    <bean class="com.test.OtherSimplwBean">
        <property name="otherName" ref="propertyOne" />
    </bean>
</property> 
```

# spring - Spring MVC 3嵌套对象验证因@Valid而失败

> ID：11006530
> 
> 赞同：4
> 
> 时间：2012-06-13T00:03:54.460
> 
> 标签：spring, spring-mvc, bean-validation

我有以下嵌套对象。我在我的控制器中使用@Valid 进行验证。这里 BindingResult 对象不验证子对象的名称字段。我错过了什么吗？

```
class Parent{
         @Valid  
         private Child child;
         //getter and setter for child object
 }

 class Child{
     @NotNull(messag="Name cannot be null")
     private String name;
     //getter and setter for name
 }

My controller validate method

@RequestMapping(value = "/validate", method = RequestMethod.POST)
public @ResponseBody  String validate(@Valid @ModelAttribute("parent") Parent parent, BindingResult bindingResult) {
    //Here I can see child name value if I say parent.getChild().getName()

  // But if  parent.getChild().getName() is null, bindingResult.hasErrors() is returning false

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:38:52.343

据我所知，`@NotNull`字符串验证不太合适，因为 Spring 模型通常将“未收到对象”映射到“空白字符串”。

请尝试`@NotBlank`查看 BindingResults 是否返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:55:52.227

你不能这样做。你不能像那样验证嵌套对象。

您必须使用验证器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T02:45:03.863

我之前也遇到过类似的问题。

经过 2-3 天的研发后，我成功验证了嵌套对象。我尝试对嵌套对象进行自定义验证。

您需要创建一个自定义验证器类并在控制器和方法调用中自动装配它 validator.validate(parent, bindingResult) 它将返回与 bindingResult 对象中的嵌套对象字段绑定的错误，然后您可以将其显示在jsp页面照常。

希望这对您有所帮助。干杯。

# entity-framework-4 - EF4 SaveChanges 如何避免内存不足异常

> ID：11006531
> 
> 赞同：1
> 
> 时间：2012-06-13T00:04:13.693
> 
> 标签：entity-framework-4, savechanges

现有片段

```
foreach (var ownerCandidates in ownerToCandidatesDictionary)
  {
    foreach (var candidate in ownerCandidates.Value)
    {
       transactionEntities.AddToSomeEntity(someObject)
    }
  }
                transactionEntities.SaveChanges(System.Data.Objects.SaveOptions.AcceptAllChangesAfterSave); 
```

正在重写

```
 int i = 0 ; 
    foreach (var ownerCandidates in ownerToCandidatesDictionary)
    {
         foreach (var candidate in ownerCandidates.Value)
         {
             transactionEntities.AddToSomeEntity(someObject)
          }
          if ( i++ % 1000 == 0 ) 
          {
               transactionEntities.SaveChanges(System.Data.Objects.SaveOptions.AcceptAllChangesAfterSave);
          } 
    }

transactionEntities.SaveChanges(System.Data.Objects.SaveOptions.AcceptAllChangesAfterSave); 
```

在程序成功终止的情况下为我们提供相同的功能？我们不断添加我的担忧是，循环中的 SaveChanges 是否仅适用于自上一次 SaveChanges 以来添加的内容。我们这里有批量保存吗？如果不是这种情况，如何更改原始片段以避免

```
12/06/2012 7:50:37 PM : System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.
   at System.Data.Mapping.Update.Internal.Propagator.Project(DbProjectExpression node, PropagatorResult row, TypeUsage resultType)
   at System.Data.Mapping.Update.Internal.Propagator.Visit(DbProjectExpression node)
   at System.Data.Common.CommandTrees.DbProjectExpression.Accept[TResultType](DbExpressionVisitor`1 visitor)
   at System.Data.Mapping.Update.Internal.Propagator.Propagate(UpdateTranslator parent, EntitySet table, DbQueryCommandTree umView)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.<ProduceDynamicCommands>d__0.MoveNext()
   at System.Linq.Enumerable.<ConcatIterator>d__71`1.MoveNext()
   at System.Data.Mapping.Update.Internal.UpdateCommandOrderer..ctor(IEnumerable`1 commands, UpdateTranslator translator)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.ProduceCommands()
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T05:38:39.577

如果在之前的 SaveChanges() 之后没有对实体集进行更改，则对 SaveChanges() 的后续调用将不会产生任何影响。在 SaveChanges() 之后进入数据库的是新批次。批处理是在使用 EntityFramework 进行大量插入期间克服 OutOfMemoryException 的选项。实际上 SaveChanges() 应该只调用一次，但在你的情况下，由于数据很大，它必须分成批次。

此外，在批量添加实体以获得显着的性能改进时，通过设置`AutoDetectChangesEnabled` 为 false 暂时禁用更改的自动检测。[这是信息](http://msdn.microsoft.com/en-us/library/gg696177%28v=vs.103%29.aspx)`context.Configuration.AutoDetectChangesEnabled = false;`

# android - 关于这个 UI 实现的建议？

> ID：11006533
> 
> 赞同：2
> 
> 时间：2012-06-13T00:04:32.160
> 
> 标签：android, xml, layout, user-interface

这是我打算的基本用户界面：

![开始](../Images/3d14846e21d7fd005e172f7494d0da39.png) ![旋转](../Images/ab20f18d5668d457b37a5a563cfa6d05.png) ![结尾](../Images/8031ade17bbe1bdee0a1e0594d6d32c0.png)

有中心圆：CENTER。随着视图的旋转，新的 circles:NAME 在圆周上生成。顶部的圆圈是一个新生成的圆圈，即如果一个已经生成的圆圈经过顶部，它会获取一个新名称。

我还不太了解Android API，所以有人能指出我正确的方向吗？我应该看什么课？我怎样才能创建那种路径？我是以编程方式生成圆圈还是在 xml 布局中已有视图但不可见？

谢谢。

编辑：目前我正在研究每个圆圈的自定义视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:20:43.893

我认为您可以通过扩展[AdapterView](http://developer.android.com/reference/android/widget/AdapterView.html)来做到这一点。我将首先查看它的源代码和它的一些死者，看看他们是如何实现它们的。

我认为您所追求的功能与 ListView 或其他一些简单的 Adapter 就绪 View 小部件相去甚远。

主要区别在于您的 onDraw() 方法，您需要覆盖该方法才能为您绘制圆圈。无论您是以编程方式制作圆圈还是在 xml 中定义您自己的视图，都将取决于您希望如何在视觉上显示。

对于您所追求的旋转效果，我没有任何示例代码，但可以肯定的是，它可以通过画布和一些几何图形来完成。

一旦你建立了 AdapterView ，你可能还想继承一个 Adapter 来保存你的名字并覆盖它的 getView() 方法来为你填充名字到圆圈中。

如果您从未实现过任何 ViewGroup 小部件，我建议您从探索其中的一些小部件开始。ListView、GridView 等。了解如何将它与适配器和一些数据一起使用来创建动态布局。一旦你很好地理解了如何使用已经构建的那些，然后开始尝试处理你想要制作的。

# php - 获取子数组键php

> ID：11006537
> 
> 赞同：1
> 
> 时间：2012-06-13T00:05:00.340
> 
> 标签：php, arrays, foreach

我有一个数组：

```
Array
( 
[47] => Array
    (
        [name] => 3543 good
        [price] => 100.0000
        [image] => data/hp_1.jpg
        [discount] => 
        [stock_status] => 
        [weight_class] => kg
    )

[28] => Array
    (
        [name] => HTC Touch HD
        [price] => 100.0000
        [image] => data/htc_touch_hd_1.jpg
        [discount] => 
        [stock_status] => 
        [weight_class] => g
    )

[41] => Array
    (
        [name] => iMac
        [price] => 100.0000
        [image] => data/imac_1.jpg
        [discount] => 
        [stock_status] => 
        [weight_class] => kg
    )

[40] => Array
    (
        [name] => iPhone
        [price] => 101.0000
        [image] => data/iphone_1.jpg
        [discount] => 
        [stock_status] => 
        [weight_class] => kg
    )
) 
```

我需要子数组键（47 ,28 等），因为它是我的产品 ID

我正在运行一个 foreach 循环来获取详细信息并分配给一个新数组，例如`'name' => $result['name']`，但无法弄清楚如何定位产品 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:07:26.890

您可以将键分配给 foreach 循环中的变量：

```
foreach($array as $id => $result) {
    $item = array('name' => $result['name'], 'id' => $id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:07:14.950

将其作为具有键值对的关联数组进行迭代。

```
foreach($array as $key=>$value) {
   echo $key; // this is what you need, if I got you right
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T00:13:29.693

`foreach`允许您以这种方式迭代不仅值而且键：

```
foreach($items as $key => $value)
{
    ...
} 
```

在您的情况下，它看起来像：

```
foreach($results as $id => $result)
{
    $item = array('name' => $result['name'], 'id' => $id, ...);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T00:07:13.110

将关键变量添加到`foreach`循环中，如下所示：

```
foreach( $array as $product_id => $result)
    echo $product_id . ' costs ' . $result['price'] . "\n"; 
```

# android - Android Activity Stack 未按文档中的说明工作 - 未显示任务堆栈中的最后一个活动

> ID：11006539
> 
> 赞同：2
> 
> 时间：2012-06-13T00:05:06.750
> 
> 标签：android, android-activity, stack

根据 Android 文档：

[http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

“当用户通过按下 Home 按钮离开任务时，当前活动停止，其任务进入后台。系统保留任务中每个活动的状态。如果用户稍后通过选择启动器图标恢复任务开始任务后，任务进入前台并恢复堆栈顶部的活动。”

如果我理解正确，这意味着：

1.  活动 A 作为主要活动。
2.  通过“startActivity”在 A 中启动的活动 B - 常见的、普通的意图实例。
3.  我第一次打开应用程序，A 被加载。
4.  我点击A中的按钮，B是openend。
5.  我按主页按钮。
6.  我第二次再次打开应用程序，预计会显示 B

...正确的？我想这是期望的正确行为......

但是，我在我的应用程序中没有看到这一点。

如果我点击“主页按钮”然后通过按下启动器图标恢复我的应用程序，它将从主要活动开始 - 而不是顶部的活动或最新的活动。

我在三星 Galaxy Tab Android 2.2.1 上进行编码 - 我在 Android 清单中有最常见的选项 - 事情是我处理 10 个不同的活动，具有不同的意图额外内容 - 以及 Dispatcher 类方法 - 或保存每个活动状态 -听起来要求很高。

我正在使用带有 ADT 版本 12 的 Eclipse IDE；我发现了一些非常有趣的东西：

当我从 Eclipse IDE 运行应用程序并连接我的设备时，我看不到这种行为。该应用程序的行为如文档中所述。事实上，我是在将我的 apk 部署到 Google Play 应用程序存储库后才看到这一点的；并下载它进行测试。

我的问题是，有没有人找到发生这种情况的真正原因？文档有错吗？还是遗漏了什么？这是Android上的错误吗？

我做过的另一项研究是：

当我尝试从谷歌播放下载的应用程序作为 APK 时，如果我第二次进入我的应用程序，我会得到“主要”活动而不是最后一个 openend。我按回家。按主页后，我进入android的应用程序管理设置，找到我的应用程序并单击“强制停止”。执行此操作后，应用程序的行为如文档中所述。

有人帮忙！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T22:21:26.783

这是android平台中的一个错误：

[http://code.google.com/p/android/issues/detail?id=2373](http://code.google.com/p/android/issues/detail?id=2373)

解决方法是将其放在主 Activity 的 onCreate 方法中：

```
if (!isTaskRoot())
{
    final Intent intent = getIntent();
    final String intentAction = intent.getAction(); 
    if (intent.hasCategory(Intent.CATEGORY_LAUNCHER) && intentAction != null && intentAction.equals(Intent.ACTION_MAIN))
    {
        Log.w(LOG_TAG, "Main Activity is not the root.  Finishing Main Activity instead of launching.");
        finish();
        return;       
    }
} 
```

摘自：

[当以不同的意图启动活动时如何防止活动的多个实例](https://stackoverflow.com/questions/4341600/how-to-prevent-multiple-instances-of-an-activity-when-it-is-launched-with-differ)

...花了 3 天的时间来寻找这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T15:10:17.823

我将解释它失败的原因，以及如何以编程方式重现此错误，以便您可以将其合并到您的测试套件中：

1.  当您通过 Eclipse 或 Market App 启动应用程序时，它会以意图标志启动：FLAG_ACTIVITY_NEW_TASK。

2.  通过启动器（主页）启动时，它使用标志：FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_BROUGHT_TO_FRONT | FLAG_ACTIVITY_RESET_TASK_IF_NEEDED，并使用动作“ *MAIN* ”和类别“ *LAUNCHER* ”。

如果您想在测试用例中重现这一点，请使用以下步骤：

```
adb shell am start -f 0x10000000 -n com.testfairy.tests.regression.taskroot/.MainActivity 
```

然后做任何需要做的事情来进行其他活动。出于我的目的，我只是放置了一个按钮来启动另一个活动。然后，使用以下命令返回启动器（主页）：

```
adb shell am start -W -c android.intent.category.HOME -a android.intent.action.MAIN 
```

并通过启动器模拟启动它：

```
adb shell am start -a "android.intent.action.MAIN" -c "android.intent.category.LAUNCHER" -f 0x10600000 -n com.testfairy.tests.regression.taskroot/.MainActivity 
```

如果您没有合并 isTaskRoot() 解决方法，这将重现问题。我们在我们的自动测试中使用它来确保这个错误不再发生。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T01:15:11.710

文档是正确的，我能想到的唯一可能的问题是您正在测试的设备，如果它在模拟器（即库存 Android）上按预期工作，它应该在至少 90% 的 Android 上工作，这是制造商的错，我相信不是安卓。

# emacs - emacs：reindent-then-newline-and-indent 之后的 ruby 模式

> ID：11006544
> 
> 赞同：1
> 
> 时间：2012-06-13T00:05:50.960
> 
> 标签：emacs, ruby-mode

我正在使用 emacs 23.2 和 purcell [https://github.com/purcell/emacs.d](https://github.com/purcell/emacs.d)的参考配置 我在编辑 ruby​​ 文件和 rails 文件时遇到了问题，见下文![在此处输入图像描述](../Images/6808d35634b78937d7fcbeef9f1d9c64.png)

步骤：
1\. 将光标移动到某处
2\. 按“RET”键添加更多新行，然后将光标移动到某处
3\. 最后一个新行出现红色空间。

你知道如何关闭这个标记吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:35:35.147

你对这个功能有什么问题？一旦您开始打字，红色空间就会消失，不是吗？

该功能是`show-trailing-whitespace`，旨在帮助您查看 EOL 的虚假空间。这对于团队开发环境非常有帮助，因为签入此类代码会惹恼您的队友。

您应该做的是添加一个`before-save-hook`删除虚假空白的内容，请参见：

[http://www.emacswiki.org/emacs/DeletingWhitespace#toc3](http://www.emacswiki.org/emacs/DeletingWhitespace#toc3)

代码：

```
(add-hook 'before-save-hook 'delete-trailing-whitespace) 
```

如果您也想禁用`show-trailing-whitespace`：

```
(add-hook 'ruby-mode-hook (lambda ()
                            (setq show-trailing-whitespace nil))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:58:14.590

您可能想查看[ws-trim.el](ftp://ftp.lysator.liu.se/pub/emacs/ws-trim.el)库，它从您编辑的行中删除尾随空格，但默认情况下不会从其他行中删除它们*。

我发现这最适合版本控制（与保存时删除所有尾随空格相比），因为如果您编辑同一个文件，您不会在其他人的工作中引入更改。

(*) 虽然如果您希望它做更多的事情，它也可以很好地配置。

# sql - 在 Django 模型上执行 INNER JOIN、GROUP BY 和 COUNT

> ID：11006550
> 
> 赞同：4
> 
> 时间：2012-06-13T00:06:58.323
> 
> 标签：sql, database, django, models, inner-join

我在理解如何使用 Django 模型进行复杂查询（甚至是简单查询）时遇到问题。我希望使用 django 模型在一个语句中进行内部连接、分组和计数。

例子：

```
Select ab.userid, count(ab.userid) as bids, u.username 
from auctionbids ab 
inner join users u on ab.userid=u.id 
group by ab.userid 
order by numbids desc; 
```

这种类型的查询非常常见且直接，所以我不得不想象它可以用 django 模型完成，但从文档中看不出来。

编辑：添加模型

```
class Users(models.Model):
    id = models.IntegerField(primary_key=True)
    username = models.CharField(max_length=150)

class Auctionbids(models.Model):
    id = models.IntegerField(primary_key=True)
    user = models.ForeignKey(Users) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:38:45.927

如果您发布您的 models.py 文件，我可能会给您一个更准确的答案，但我认为您想要的是[Django Aggregration API](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-filter-clauses)

你会像这样使用它：

```
from django.db.models import Count
User.objects.all().annotate(bids=Count('auctionbids')).order_by('bids') 
```

# python - 阻止 Sphinx 执行模块

> ID：11006553
> 
> 赞同：5
> 
> 时间：2012-06-13T00:07:15.347
> 
> 标签：python, python-sphinx

我正在尝试使用 Sphinx 生成 python 文档。问题是 sphinx-build 最终会执行模块/评估全局范围内的任何内容。这样做有什么原因吗？有谁知道可以设置为禁用此功能的标志？

似乎 Sphinx 正在尝试进行代码覆盖或类似的事情，这绝对不是我想要的。通常这不会是一个问题，但一组特定的模块非常特定于环境。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T00:11:35.780

Sphinx 会评估全局范围内的所有内容，因为 autodoc 插件会导入模块，并且导入模块会评估全局范围内的所有内容。

要阻止这种情况，请执行以下任一操作：

*   禁用 autodoc 插件（`autodoc`在 sphinx 配置文件中搜索），或
*   用类似的东西保护你不想执行的代码`if __name__ == "__main__": do_stuff()`

# java - 我的异或加密不适用于复杂文件

> ID：11006555
> 
> 赞同：3
> 
> 时间：2012-06-13T00:07:33.427
> 
> 标签：java, encryption, xor

只是为了好玩，我一直在尝试制作一个文件加密器，它对 128 位密钥进行按位异或加密。它似乎适用于使用某些编辑器的纯文本文件，但对于其他和更复杂的文件，我会遇到“文件损坏”错误。如果我对文本文件进行两次加密，在 Gedit 中它会显示原始文件的内容，但在记事本中，我只会得到一大堆问号。

我已经用 Java 编写了这段代码，但是加密部分非常通用。密钥采用 8 个 16 位字符的数组形式：

```
char[] key = {26372, 15219, 53931, 50406, 26072, 23469, 25002, 37812}; 
```

要加密文件，我有一个运行此代码的循环：

```
builder.append((char)(bR.read() ^ key[pos++]));
if(pos == 8) pos = 0; //returns to first position in key 
```

这使用 BufferedReader 从文件中读取下一个字符，将其与键中的下一个字符异或并将其附加到 StringBuilder。

这是整个代码：

```
import java.awt.BorderLayout;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.UIManager;

public class Encryptor implements Runnable {

    /**
     * @param args
     */
    public static void main(String[] args) {
        try {
            SwingUtilities.invokeAndWait(new Encryptor());
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    JFrame frame;
    JButton bCancel, bEncrypt;
    JTextArea statusArea;
    JScrollPane statusScroll;
    JProgressBar progressBar;
    String fileContents, fileType, fileName;
    EncryptSwingWorker encryptWorker;
    char[] key = {
        26372, 15219, 53931, 50406, 26072, 23469, 25002, 37812};

    public void run() {

        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch(Exception e) {}

        frame = new JFrame();

        statusArea = new JTextArea();
        statusArea.setEditable(false);
        statusScroll = new JScrollPane(statusArea);
        progressBar = new JProgressBar();
        progressBar.setValue(0);

        bCancel = new JButton("Cancel");
        bCancel.setEnabled(false);
        bCancel.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                int option = JOptionPane.showOptionDialog(frame,
                        "Are you sure you want to cancel?",
                        "Warning", JOptionPane.YES_NO_OPTION,
                        JOptionPane.QUESTION_MESSAGE, null,
                        null, null
                );
                if(option == 0) {
                    encryptWorker.cancel(true);
                    statusArea.append("Encryption cancelled\n");
                    progressBar.setValue(0);
                    progressBar.setIndeterminate(false);
                    bCancel.setEnabled(false);
                    bEncrypt.setEnabled(true);
                }
            }

        });
        bEncrypt = new JButton("Encrypt file...");
        bEncrypt.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                encryptWorker = Encryptor.this.new EncryptSwingWorker();
                encryptWorker.execute();
            }

        });

        JPanel top = new JPanel(new BorderLayout());
        top.add(bEncrypt, BorderLayout.CENTER);
        top.add(bCancel, BorderLayout.EAST);
        frame.getContentPane().add(top, BorderLayout.NORTH);
        frame.getContentPane().add(statusScroll, BorderLayout.CENTER);
        frame.getContentPane().add(progressBar, BorderLayout.SOUTH);

        frame.setSize(200, 150);
        frame.setResizable(false);
        frame.setTitle("sEncryptor");
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setIconImage(Toolkit.getDefaultToolkit().getImage("encryptor.png"));
    }

    void encrypt() throws IOException {
        JFileChooser fc = new JFileChooser();
        int returnVal = fc.showOpenDialog(frame);

        if(returnVal == JFileChooser.APPROVE_OPTION) {
            if(fc.getSelectedFile() == null) {
                JOptionPane.showOptionDialog(frame,
                    "You did not select a file",
                    "File Open Error",
                    JOptionPane.DEFAULT_OPTION,
                    JOptionPane.WARNING_MESSAGE, null,
                    null, null
                );
                encrypt();
                return;
            }

            bCancel.setEnabled(true);
            bEncrypt.setEnabled(false);

            fileName = fc.getSelectedFile().getPath();

            statusArea.append("Calculating size...\n");
            progressBar.setIndeterminate(true);
            int size = (int)(new File(fileName).length() / 32);
            progressBar.setIndeterminate(false);
            progressBar.setMaximum(size);

            BufferedReader bR = new BufferedReader(new FileReader(fc.getSelectedFile()));
            StringBuilder builder = new StringBuilder();

            statusArea.append("Encrypting...\n");
            int pos = 0;
            for(double d = 0; bR.ready(); d += 0.03125) {
                if(encryptWorker.isCancelled()) return;
                progressBar.setValue((int)d);
                builder.append((char)(bR.read() ^ key[pos++]));
                if(pos == 8) pos = 0;
            }

            progressBar.setValue(0);
            progressBar.setIndeterminate(true);

            fileContents = builder.toString();
            bR.close();
            statusArea.append("Encryption finished\n");
            progressBar.setIndeterminate(false);
        }
    }

    void save(String file) throws IOException {
        statusArea.append("Saving...\n");
        progressBar.setIndeterminate(true);
        BufferedWriter bW = new BufferedWriter(new FileWriter(file));
        bW.write(fileContents);
        bW.close();
        progressBar.setIndeterminate(false);
        statusArea.append("Done!\n");
    }

    void saveAs() throws IOException {
        JFileChooser fc = new JFileChooser();
        int returnVal = fc.showSaveDialog(frame);

        if(returnVal == JFileChooser.APPROVE_OPTION) {
            if(fc.getSelectedFile() == null) {
                JOptionPane.showOptionDialog(frame,
                    "You did not select a file",
                    "File Open Error",
                    JOptionPane.DEFAULT_OPTION,
                    JOptionPane.WARNING_MESSAGE, null,
                    null, null
                );
                saveAs();
                return;
            }

            save(fc.getSelectedFile().getPath());
        }
    }

    class EncryptSwingWorker extends SwingWorker<Void, Void> {

        @Override
        protected Void doInBackground() throws Exception {
            encrypt();
            if(EncryptSwingWorker.this.isCancelled()) return null;
            bCancel.setEnabled(false);
            while(true) {
                Object[] options = {"Override", "Save As...", "Cancel"};
                int option = JOptionPane.showOptionDialog(frame,
                        "Override existing file?",
                        "Save", JOptionPane.YES_NO_CANCEL_OPTION,
                        JOptionPane.QUESTION_MESSAGE, null,
                        options, options[0]
                );
                if(option == 0)
                    try {
                        save(fileName);
                    } catch(IOException e1) {
                        e1.printStackTrace();
                    }
                else if(option == 1)
                    try {
                        saveAs();
                    } catch(IOException e1) {
                        e1.printStackTrace();
                    }
                else {
                    int option1 = JOptionPane.showOptionDialog(frame,
                            "The encryption will be lost if you continue\n" +
                            "Are you sure you want to cancel?",
                            "Warning", JOptionPane.YES_NO_OPTION,
                            JOptionPane.QUESTION_MESSAGE, null,
                            null, null
                    );
                    if(option1 == 1) continue;
                    break;
                }
                break;
            }
            fileContents = "";
            bEncrypt.setEnabled(true);
            return null;
        }

    }
} 
```

我的代码中是否缺少某些内容，或者异或整个文件是否会导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:07:42.837

知道了。问题出在文件编码中，一如既往:)。永远不要*依赖*默认编码——它最终会适得其反。

由于`Reader`和`Writer`类是为纯文本输入/输出而设计的，所以它变得一团糟。在这种情况下，`Writer`不知道如何处理它获得的各种整数并最终失败。当您修复 时`Writer`，您也必须修复`Reader`，因为加密的数据可能不仅仅由有效字符...

**最好**的解决方案是忽略字符，使用字节和[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html), （必要时[`FileOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html)由他们的兄弟包装），因为它们是用来处理二进制数据的。`Buffered`这样，您最终将准确地读取/写入您打算读取/写入的数据。尝试自己破解它，这是一个很好的教训。如果您会遇到困难，请看[这里](http://pastebin.com/NuXJQhAN)。

最**简单**的解决方案是只更改两行。请注意，它再次仅适用于文本文件！说真的，不要把随机数和可打印的字符混在一起。

```
BufferedReader bR = new BufferedReader(new FileReader(fc.getSelectedFile())); 
```

至

```
BufferedReader bR = new BufferedReader(new InputStreamReader(new FileInputStream(fc.getSelectedFile()), "UTF-8")); 
```

和

```
BufferedWriter bW = new BufferedWriter(new FileWriter(file)); 
```

至

```
BufferedWriter bW = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(file), "UTF-8")); 
```

# android - 在 Android 中有效地更改位图颜色/色调

> ID：11006558
> 
> 赞同：1
> 
> 时间：2012-06-13T00:08:01.320
> 
> 标签：android, colors, bitmap, hsv, hsl

我正在使用以下方法来更改位图的色调：

```
public Bitmap changeHue( Bitmap source, double hue ) {

    Bitmap result = Bitmap.createBitmap( screenWidth, screenHeight, source.getConfig() );

    float[] hsv = new float[3];
    for( int x = 0; x < source.getWidth(); x++ ) {
        for( int y = 0; y < source.getHeight(); y++ ) {
            int c = source.getPixel( x, y );
            Color.colorToHSV( c, hsv );
            hsv[0] = (float) ((hsv[0] + 360 * hue) % 360);
            c = (Color.HSVToColor( hsv ) & 0x00ffffff) | (c & 0xff000000);
            result.setPixel( x, y, c );
        }
    }

    return result;
} 
```

它完美地工作并保持位图的亮度。但是，当更改位图大小 800*480 或更高的色调时，此方法非常慢。如何在不损失太多图像质量的情况下对其进行优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-17T19:16:19.730

如果你用`ImageView`一个非常简单的方法包装你的位图：

```
ImageView circle = new ImageView(this);
circle.setImageBitmap(yourBitmap);
circle.setColorFilter(Color.RED); 
```

# html - 浮动 div 不会给出全高

> ID：11006561
> 
> 赞同：3
> 
> 时间：2012-06-13T00:08:14.917
> 
> 标签：html, css

[jsFiddle](http://jsfiddle.net/weka/gDByS/)

左边的红色 div 不会一直向下。无论主（“li”）div有多高，我都希望它一直向下。

css

```
.li_wrap {
    padding:7px;
    float:left;
}
.song-list li{
    position: relative;
    display: block;
    padding:0;
    margin-bottom:10px;
    background: black;
    color: yellow;
    z-index:7;
    text-decoration: none;
}
.rank_pos {
    background:red;
    margin:0;
    padding:3px;
    height:100%;
    float:left;
}
body {font-size:12px; font-family:Verdana, serif;} 
```

html

```
<ul class="song-list">
  <li id="1">
  <div class="rank_pos">1st</div>

  <div class="li_wrap">Testing</div>

  <div style="clear:both;"></div>
  </li>

  <li id="2">
  <div class="rank_pos">2nd</div>

  <div class="li_wrap">Testing</div>

  <div style="clear:both;"></div>
  </li>
</ul>​ 
```

或者也许有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:19:55.283

稍微清理一下 - [http://jsfiddle.net/gDByS/2/](http://jsfiddle.net/gDByS/2/)

HTML

```
 <li>
      <span>3rd</span>
      <div>Testing<br />Testing<br />Testing<br />Testing<br />Testing</div>
  </li> 
```

CSS

```
.song-list li{
    position: relative;
    display: block;
    padding:0;
    margin-bottom:10px;
    background: black;
    color: yellow;
    z-index:7;
    text-decoration: none;
    overflow: hidden;
    line-height: 22px;
}

ul li span{
    background:red;
    margin:0;
    padding: 0 5px;
    height:100%;
    display: block;
    position: absolute;
}

ul li div {
    margin-left: 40px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:16:24.903

此页面可能会引导您朝着正确的方向前进：

[http://www.tutwow.com/htmlcss/quick-tip-css-100-height/](http://www.tutwow.com/htmlcss/quick-tip-css-100-height/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:34:10.437

您可以为此使用 jQuery：http: [//jsfiddle.net/SF24t/](http://jsfiddle.net/SF24t/)

或者有一个技巧在**某些**情况下会有所帮助：例如，如果您希望两个“框”由一直到底部的边框分隔，您可以使用 repeat-y 在背景图像中绘制该边框

# .net - 如何通过类型名称获取泛型接口的类型？

> ID：11006562
> 
> 赞同：3
> 
> 时间：2012-06-13T00:08:32.617
> 
> 标签：.net, generics, reflection

好的，这是我的问题：

我有一个 xml 文件，其中记录了方法及其参数。此 xml 文件记录了一个 ID 值列表，其 .net 通用接口类型名称如下：

```
System.Collections.Generic.IList`1[CoreLib.Domain.MyClass] 
```

我知道这些参数中的大多数将是通用列表或字典。当我尝试对从 xml 读取的字符串值使用 GetType 时，它​​都返回 null，如果我尝试将 throw 异常标志设置为 true，它会抛出以下消息：

> “无法从程序集 'TestLibrary，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 加载类型 'CoreLib.Domain.MyClass'。”

获得可以拉回我可以填充的实际类型的东西的最佳策略是什么？先感谢您！

*更新*我试图将程序集引用添加到字符串名称，如下所示：

```
Type.GetType("System.Collections.Generic.List`1[CoreLib.Domain.MyClass,CoreLibrary]") 
```

或者

```
coreLibAssembly.GetType("System.Collections.Generic.List`1[CoreLib.Domain.MyClass,CoreLibrary]") 
```

两者都会导致一个空对象，或者如果我请求抛出一个异常，如果我没有指定程序集名称，我会得到相同的消息。我也尝试使用程序集绑定日志查看器，但列表中没有出现任何应用程序，并且在我运行我的代码后，应用程序中似乎没有出现任何内容（它在 nunit 执行的测试项目中）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:44:09.493

您通常可以将字符串传递给 Type.GetType()。例如：

```
Type t = Type.GetType("System.Collections.Generic.Dictionary`2[System.String,System.Int32]"); 
```

我怀疑在您的情况下，CLR 不知道如何解析 type `CoreLib.Domain.MyClass`。您可能需要通过指定程序集来帮助它，例如[取自 MSDN](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)的示例：

```
Type.GetType("System.Collections.Generic.Dictionary`2[System.String,[MyType,MyAssembly]]") 
```

如果在指定程序集之后它仍然“爆炸” *（下一次，建议您更好地定义它，例如使用特定错误、异常或堆栈跟踪:-)*尝试**以管理员身份运行**[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx) （否则它会静默失败）以记录绑定失败。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:42:58.687

我已经想通了。问题是如何引用程序集，以及 GetType 方法如何确定程序集的位置。我最终用 GetType 的[Assembly Resolver](http://msdn.microsoft.com/en-us/library/ee332784.aspx)匿名代表解决了这个问题：

```
 result = Type.GetType(typeName + ",mscorlib", //<-- needing to identify the mscorlib  for generics!
        //this anonymous delegate method is used by the GetType Framework to identify and return the correct assembly for the given assembly name.
        //most of this is default, except to handle the mscorlib library
        delegate(AssemblyName potentialAssembly)
        {
            if (potentialAssembly.Name == coreLibAssembly.FullName)
                return coreLibAssembly; // this was never called, I had to check the namespace within the rest of my code
            else if (potentialAssembly != null)
                return Assembly.Load(potentialAssembly);
            else
                return null;
        },
        //this anonymous delegate is used to return the type specific to the assembly. this method is called for each nested generic, 
        //so we don't have to parse the type string name by hand.
        delegate(Assembly potentialAssembly, string inputTypeName, bool ignoreCase)
        {
            if (inputTypeName.StartsWith("CoreLib.Domain"))
                return coreLibAssembly.GetType(inputTypeName, true, ignoreCase);
            else if (potentialAssembly != null)
                return potentialAssembly.GetType(inputTypeName, true, ignoreCase);
            else
                return Type.GetType(inputTypeName, true, ignoreCase);
        }, true); 
```

现在，如果通用 Type.GetType(string typeName) 不起作用，我使用此代码解析类型字符串，并将程序集与给定 typeName 字符串变量中的相应类型名称匹配。**

# scala - 我可以在开发中使用码头读取属性文件吗？

> ID：11006569
> 
> 赞同：1
> 
> 时间：2012-06-13T00:10:12.910
> 
> 标签：scala, properties, jetty, lift

我正在将一个电梯项目作为一个巨大的 mvn 项目的子项目。我将属性文件放入：

*   src/main/resources/props/staging.props
*   src/main/resources/props/production.props

在子项目文件夹中。

然后我运行码头：

```
mvn jetty:run -Drun.mode=staging 
```

我使用以下方法打印了设置`net.liftweb.util.Props`：

```
println("file_name:" + Props.fileName)
println("mode_name:" + Props.modeName) 
```

输出：

```
file_name:lift.props
mode_name:staging 
```

模式名称是正确的。但是，文件名完全错误。`net.liftweb.util.Props`仍在使用已在源代码中硬编码的文件名。它似乎从未到达我的财产文件。

我错过了什么吗？或者它不能与码头一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:39:44.303

虽然[duffymo 是正确的](https://stackoverflow.com/a/11006616/115478)，并且您可以使用底层 servlet 工具来获取资源，但我仍然会使用[Lift 的 Properties abstraction](http://www.assembla.com/spaces/liftweb/wiki/Properties)。它已经完成了区分不同[运行模式](http://www.assembla.com/wiki/show/liftweb/Run_Modes)的工作。它还允许您为每个用户和/或每台机器拥有不同的属性，这可能很有用，具体取决于您的开发团队。

给定模式的默认属性应放在 中`/props/modeName.default.props`，因此您的文件应重命名为：

*   `src/main/resources/props/staging.default.props`
*   `src/main/resources/props/production.default.props`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:16:06.560

我会将 .properties 文件放在您的 /WEB-INF/classes 中，并使用 servlet 上下文`getResourceAsStream()`来读取它。

# asp.net-mvc-3 - 移除 MVC SPA 的影响

> ID：11006573
> 
> 赞同：1
> 
> 时间：2012-06-13T00:10:54.517
> 
> 标签：asp.net-mvc-3, model-view-controller, asp.net-mvc-4, asp.net-spa

我目前正在开发一个工具并在 MVC SPA（单页应用程序）中编写它，刚刚发现它已从最终版本中删除。这对我的项目意味着什么。我是否必须停止工作并转移到 MVC Internet 应用程序。[我在http://www.asp.net/single-page-application](http://www.asp.net/single-page-application)中没有找到太多信息

请让我知道此问题的影响和可能的解决方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:17:20.467

您可以从 ASP.NET CodePlex 页面下载 SPA 源代码并对其进行编译，然后将二进制文件包含在您的应用程序中。当前版本不是“完整的”，但是如果您这样做，您一直依赖的代码应该仍然像在 Mvc 4 Beta 版本中一样受到支持。

# c# - 从 List 加载时 DataGridView 显示灰色框

> ID：11006582
> 
> 赞同：0
> 
> 时间：2012-06-13T00:11:41.297
> 
> 标签：c#, .net, winforms, datagridview

我有一个自定义对象列表，我想在我的表单上放入 DataGridView。这些对象是从 Excel 电子表格中解析的。我尝试进行解析，然后设置`DataGridView.DataSource`但没有骰子 - 它总是显示一个灰色框！

```
 public Critr()
    {
        InitializeComponent();
        pLogSheet = LogParser.ParseExcelLog("C:\\working.xlsx");
    }

    private void Critr_Load(object sender, EventArgs e)
    {
        dgvLogEntries.AutoGenerateColumns = true;
        dgvLogEntries.DataSource = pLogSheet.Entries;
    } 
```

当我调试时，我可以看到我`pLogSheet.Entries`的实际上是被填充的，它有三行数据。

![在此处输入图像描述](../Images/3df1b801572541b061215b6094487148.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:46:47.350

我的班级设置有问题。类的字段不被 识别`DataGridView`，但属性被识别。所以我将我的字段转换为属性，效果很好！

```
class LogEntry
{
  public string foo;
  public string bar;

  public string fooP { get { return foo; } }
  public string barP { get { return bar; } }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:44:06.253

这适用于`List<T>`. 你可以复制粘贴试试。有一个新的 Winforms 项目并拖放一个`DataGridView control`

然后，您可以映射您的`pLogSheet.Entries`wrt`List<Books>`

```
using System.Collections.Generic;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public class  Books
    {
        public string Title { get; set; }
        public int TotalRating { get; set; }
    }

    public partial class Form2 : Form
    {
        public Form2()
        {
            var list = new List<Books>
                           {
                               new Books() {Title = "Harry Potter", TotalRating = 5},
                               new Books() {Title = "C#", TotalRating = 5}
                           };
            InitializeComponent();
            dataGridView1.AutoGenerateColumns = true;
            dataGridView1.DataSource = list;
        }

    }
} 
```

# java - 不断出现不可救药的错误，无法解决，请帮忙？

> ID：11006583
> 
> 赞同：2
> 
> 时间：2012-06-13T00:12:17.580
> 
> 标签：java

我是 Java 的新手，我不断收到这个我无法解决的愚蠢错误。这是我的代码：

```
class HelloWorldApp {
    public static void main(String [] args) {
       System.out.print1n("Hello World!");
    }
} 
```

这是我在尝试编译时不断遇到的错误：

```
error: Cannot find symbol
symbol: method print1n (String)
location: variable out of type PrintStream 
```

纳格...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:13:20.957

您输入的方法不正确。这是更正后的行：

```
System.out.println("Hello World!"); 
```

即`println`, 和“L”，而不是“1”。那是因为`println`代表 PrintLine，因此是拼写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:13:27.197

将 1 替换为 l，它是 printLn（如“打印行”），而不是“打印一个 n”。

# javascript - jquery幻灯片需要图像从一个无缝淡入到下一个

> ID：11006584
> 
> 赞同：1
> 
> 时间：2012-06-13T00:12:27.983
> 
> 标签：javascript, jquery, slideshow

我有一个 jquery 幻灯片放映，现在从一个图像淡化到另一个图像。理想情况下，我希望在上一张幻灯片完成时出现下一张图片。

这是调用淡入淡出的脚本，任何帮助将不胜感激。

```
slidesContainer
    .find(options.slides)
    .filter(':visible')
    .hide()
    .end()
    .end()
    .find(options.slides)
    .filter(':eq('+ordernum+')')
    .stop()
    .fadeIn(4000).fadeOut(2000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:38:25.593

看看[这个](http://jonraasch.com/blog/a-simple-jquery-slideshow)页面

```
setInterval( "slideSwitch()", 5000 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:50:01.777

看起来您在隐藏当前可见幻灯片之前隐藏了当前的可见幻灯片，然后等待下一张幻灯片淡入。我首先要确保后面有可见幻灯片，然后淡入顶部，但您可以创建一个同时排队和淡入淡出（淡入淡出一个）。

# renderman - RenderMan“rgba”显示模式产生3通道图像而不是4？

> ID：11006585
> 
> 赞同：0
> 
> 时间：2012-06-13T00:12:32.837
> 
> 标签：renderman

我有一个 .rib 文件，其中包含以下显示和量化语句：

```
Display "output.tif" "tiff" "rgba"
Quantize "rgba" 65535 0 65535 0 
```

我希望得到一张有 4 个通道（每通道 16 位）的图像。

然而，我得到的图像只有 3 个通道。

如何在输出中获取 Alpha 通道？

我正在使用prman。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:31:19.640

只需删除**Quantize**行，它应该可以按预期工作。

# javascript - 在更改的多个复选框之一上运行 javascript 函数

> ID：11006586
> 
> 赞同：2
> 
> 时间：2012-06-13T00:12:36.953
> 
> 标签：javascript, html, checkbox, onchange

我想在选中或取消选中复选框时运行一个函数。但是，我有大约 70 个复选框。它们都在一个div中。我如何编写一个命令来对其中任何一个被更改做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:13:42.097

事件冒泡，因此您只需将 onchange 处理程序附加到 div 并用于`e.target`获取已更改的复选框。这是一个简单的例子：

**HTML：**

```
<div id="checkbox-container">
    <input type="checkbox" name="one" />
    <input type="checkbox" name="two" />
    <input type="checkbox" name="three" />
    <input type="checkbox" name="pizza" />
</div> 
```

​<strong>Javascript：

```
document.getElementById('checkbox-container').onchange = function(e){
    alert(e.target.name);
}​ 
```

[这是一个JSFiddle](http://jsfiddle.net/Paulpro/twGpZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:32:24.223

根据 ascii-time 的回答，您可以使用事件委托。但是，请注意 change 事件不会在所有浏览器中冒泡，并且您还必须支持 IE 事件模型，因此请使用 click 事件并过滤掉您不想要的元素（或添加替代响应）：

```
<div id="checkbox-container">
     <input type="checkbox" name="one">
     <input type="checkbox" name="two">
     <input type="checkbox" name="three">
     <input type="checkbox" name="pizza">
</div>

<script type="text/javascript">

(function() {

  var container = document.getElementById('checkbox-container');

  if (container) {
    container.onclick = function(evt) {
      evt = evt || window.event;
      var el = evt.target || evt.srcElement;

      if (el && el.nodeType == 1 && el.type == 'checkbox') {
        alert(el.name + ' is ' + (el.checked? '':'not') + ' checked'); 
      }
    }
  }
}())

</script> 
```

请注意，脚本必须位于容器元素下方。就在结束正文标签之前是好的。

# mysql - 用于存储一天中每个小时的“计数”的数据库建议

> ID：11006591
> 
> 赞同：1
> 
> 时间：2012-06-13T00:13:32.210
> 
> 标签：mysql, database, database-design

我已经有一年多的在线存档服务了。不幸的是，我没有投入基础设施来保持统计数据。我现在只有存档访问日志。

每小时有两个音频文件（一个为 0-30 分钟，另一个为 30-60 分钟）。我目前使用 MySQL 进行计数。看起来像这样：

```
|     DATE     |   TIME  | COUNT |
|  2012-06-12  |  20:00  |  39   |
|  2012-06-12  |  20:30  |  26   |
|  2012-06-12  |  21:00  |  16   | 
```

等等...

这使得 365 天 * 24 小时 * 2（一小时 2 次）> 17500 行。这使得读/写速度变慢，我觉得以这种方式存储它浪费了很多空间。

那么您知道任何其他数据库可以更有效地存储这些数据并且速度更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:20:47.710

这不是太多行。如果它被正确索引，读取应该非常快（写入会慢一点，但即使有大约 50 万行的表，我也几乎没有注意到）。

如果您使用类似的东西从数据库中选择项目

`select * from my_table where date='2012-06-12'`

然后你需要确保你在日期列上有一个索引。如果您在 where 语句中使用多个列，也可以创建多个列索引。这将使您的阅读语句非常快（就像我说的多达一百万行）。

如果您不熟悉索引，请参阅此处：

[MySQL 索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

# php - 900 MB http 强制下载很少完成

> ID：11006598
> 
> 赞同：6
> 
> 时间：2012-06-13T00:14:21.503
> 
> 标签：php, http, header, download

我已经尝试了所有的标题。有和没有内容长度。

问题是下载过程中途出现了问题。但只是大多数时候。

有时它工作得很好。

服务器资源使用是微不足道的。所有配置文件都很好。我在运行时不运行 php 脚本。

有没有人见过这个？难道连我的错都没有吗？为什么有时？

```
$file = "http://domain.com/files/".$item_number.".mov";
header( 'Pragma: no-cache' );
header( 'Cache-Control: must-revalidate, post-check=0, pre-check=0' );
header( 'Content-Description: File Download' );
header( 'Content-Type: application/force-download');
//header ('Content-Type: video/quicktime');//doesnt seem to download at all here
header( 'Content-Length: '.filesize( $file ) );
header( 'Content-Disposition: attachment; filename="'.basename( $file ).'"' );
header( 'Content-Transfer-Encoding: binary' );
readfile( $file ); 
exit(); 
```

谢谢，对不起，我是第一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:23:46.523

这可能有几个原因。

您是说服务器资源还可以，但我认为 PHP`readfile()`在发送之前会将整个文件加载到内存中。幸运的是，文档中有一个很好的[解决方案](http://ca2.php.net/manual/en/function.readfile.php#48683)，您绝对应该使用它来防止遇到多次下载问题:)

另外，您是否将脚本执行时间设置为无限？

接下来是您的服务器设置。也许他们出于某种超时/资源消耗的原因关闭了连接。

例如，使用 Google Chrome 开发者工具来仔细检查您发送的标头。PHP 自己设置一些标头。你应该把`session_cache_limiter(false);`你的脚本放在开头。如果我没记错的话，甚至`Expires: Thu, 19 Nov 1981 08:52:00 GMT`......为什么这很糟糕？接下来的是;）

您可以发送 Etag 和 Last-Modified 标头。我总结它是您资源的唯一标识符，可以恢复下载。我认为查找有关此的好文章比在这里给您一些句子要好。在您的情况下，您可以使用 PHPs`stat()`函数来创建 Etag。

有些人在标题和下载方面苦苦挣扎，您可以从[这里开始（或解决您的问题）](http://perishablepress.com/http-headers-file-downloads/)

概括：

*   检查您的 PHP/服务器到期/限制/资源设置
*   确保发送缓冲的文件
*   使恢复下载成为可能
*   检查您发送的标头

在这之后你应该没事。恢复即使它仍然应该中断......

良好的进步和成功！

# java - 如何将 simulink 文件转换为 XML

> ID：11006599
> 
> 赞同：2
> 
> 时间：2012-06-13T00:14:25.140
> 
> 标签：java, xml, simulink

我需要将 Simulink 文件 (.mdl) 转换为 XML 文件，在任何搜索之后我都找不到任何内容来帮助我解决这个问题。

你会知道一些在 Java 中解决这个问题的方法或现成的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:48:42.887

[从 R2008b 开始，您可以使用save_system](http://www.mathworks.com/help/toolbox/simulink/slref/save_system.html)将 .mdl 文件导出到 .xml 文件，

```
>> save_system('model.mdl', 'model_xml.xml','ExportToXML', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:55:47.657

我知道没有简单的解决方案。

但是，Java 中有几个库显然可以**解析**simulink 文件。它们应该足以为您提供内存中的表示，然后您可以使用 XML 绑定来生成可传递的 XML。

# iscroll - iScroll 不滚动内容，只是弹回顶部

> ID：11006601
> 
> 赞同：7
> 
> 时间：2012-06-13T00:14:36.857
> 
> 标签：iscroll

我已经阅读了很多关于此的论坛，但没有一个能解决我的问题。我确定它是我想念的小东西

这是 iscroll 初始化：

```
// make PI scroll
piScroll2 = new iScroll('pi_scroll2'); 
```

这是我的CSS：

```
.pi_panel.large .content{
position: absolute;
width: 963px;
height: 616px;
top: 65px;
left:30px;
background:none;
/*background:url(../images/ISI_body.png) repeat-y;*/
overflow:scroll;
    -webkit-border-radius: 0px; 
```

}

```
#FullPiWrapper
{
   position:relative; 
   z-index: 1; 
   overflow:hidden; 
   top: 60px; 
   width:980px;
   height: 610px;
}

.pi_panel .pi_box{
padding: 0px;
margin: 20px 0px; 
```

}

这是我的html：

```
<!-- BEGIN:   PI PANEL LARGE -->
    <div class="pi_panel large">
     <div class="topBarPiFull">
                <div class="title">Full Prescribing Information</div>
                <div class="close_button_fullpi">Close</div>
                <div class="annotated_pi_button">Annotated PI</div>
            </div>
<!--            <div class="popContent"></div>-->
          <div class="content" id="FullPiWrapper">

                <div id="pi_scroll2">

                    <div class="pi_box" >
                        <img src="_globals/images/PI/pi_1.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_2.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_3.png"/>
                        <img src="_globals/images/PI/pagebreak.png"/>
                        <img src="_globals/images/PI/pi_4.png"/>
                        <img src="_globals/images/PI/pagebreak.png"/>
                        <img src="_globals/images/PI/pi_5.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_6.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_7.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_8.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_9.png"/>
                        <img src="_globals/images/PI/pagebreak.png" />
                        <img src="_globals/images/PI/pi_10.png"/>
                    </div>
                 </div>

            </div>
     </div>
    <!-- END:   PI PANEL LARGE --> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T02:44:18.077

问题是，当页面首次加载时，您不能将任何父级的 div 类显示设置为“无”。所以我将 'pi_panel large' 设置为 display: 'block';

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T12:58:02.130

确保容器的高度超过包装器的高度，即不要制造`height:100%`. 例如，如果包装器包含一个容器，并且容器中有 10 个 div：

如果每个 div 为 100px，则包装器可能为 150px。然后 Container 必须是 1000px （不是 100% ！）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T06:24:38.153

给你的包装纸一个高度，它对我有用。

```
.wrapper1 {
    position:absolute; z-index:1;
    top:250px; bottom:0px; left:3%;
    margin-left:25px;
    width:100%;
    background:none;
    overflow:auto;
    height:100px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T20:49:45.157

要解决“div display none”问题，请在将数据加载到网格、div 等后执行以下操作：

```
 myScroll.refresh();
            myScroll.scrollTo(0, 0, 1000); 
```

myScroll 的加载位置：

> var myScroll = new iScroll('friendsWrapperDrug', { desktopCompatibility: true, vScroll: true, hScroll: false, hScrollbar: false, lockDirection: true });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T20:48:27.027

```
myScroll.refresh();
myScroll.scrollTo(0, 0, 0); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-06T19:12:43.280

当您有一个`container`div时会出现此问题`wrapper`。解决此问题的方法是将 的高度设置`container`为`99%`.

以下是最终为我解决此问题的 CSS：

```
#productsScreen{ /* my container */
    height: 99%;
    z-index: 1;
    top: 0px;
    left: 0;
    overflow: auto;
}
#productListWrapper{
    background:transparent;
    position:absolute; 
    z-index:1;
    top: 88px;
    bottom:49px; 
    left:0;
    width:100%;
    overflow:auto;
}
#productsListScroller {
    position:absolute; z-index:1;
    -webkit-tap-highlight-color:rgba(0,0,0,0);
    width:100%;
    padding:0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
} 
```

希望有帮助！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-24T09:17:11.270

另一个对我有用的解决方案是用 setTimeout 包装 iScroll init 函数。这将为浏览器在应用 iScroll 之前渲染元素提供一些时间。

# amazon-web-services - 如何让 EMR 继续运行

> ID：11006603
> 
> 赞同：0
> 
> 时间：2012-06-13T00:14:42.350
> 
> 标签：amazon-web-services, amazon-emr, emr

> **可能重复：重复**
> [使用 Amazon Elastic MapReduce 实例](https://stackoverflow.com/questions/6880283/re-use-amazon-elastic-mapreduce-instance)

我可以让已启动的 EMR 集群继续运行并继续向其提交新作业，直到我完成（比如几天后）然后关闭集群，还是我必须在 EC2 中启动我自己的集群才能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:59:25.903

是的。

特别是，我使用 CLI 客户端。这是我的一个脚本的片段：

```
JOBFLOW_ID=`elastic-mapreduce --create --alive --name cluster --num-instances $
COUNT --hadoop-version 0.20.205 --ami-version 2.0 --plain-output --debug --log-uri $LOG_
URI`

echo "Launched --jobflow $JOBFLOW_ID"

elastic-mapreduce -j $JOBFLOW_ID --ssh 
```

您可以使用 -j --term 终止，使用 --ssh 向主服务器发出 cli 命令。DevGuide 中甚至有一个页面（你真的应该阅读它）[关于添加超过 256 个步骤](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/AddMoreThan256Steps.html)（在已经启动的实例上完成，请注意），所以它真的不是一个大问题。

# java - 多态 JPA 查询

> ID：11006605
> 
> 赞同：2
> 
> 时间：2012-06-13T00:14:48.630
> 
> 标签：java, jakarta-ee, jpa, persistence

有人可以给我一个选择几个选定子类实体的 JPA 查询示例吗？例如，父实体是机构。我已将其细分为制造商、供应商、服务提供商。我想在返回机构对象的单个查询中获取所有供应商和服务提供商，但不是制造商。

我用谷歌搜索，但找不到解决这个特定问题的任何资源。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T06:16:43.973

来自 JPA 2.0 规范：

> 4.6.17.4 实体类型表达式 [...] 实体的 Java 类用作指定实体类型的输入参数。例子：
> 
> SELECT e FROM Employee e WHERE TYPE(e) IN (Exempt, Contractor)
> 
> SELECT e FROM Employee e WHERE TYPE(e) IN (:empType1, :empType2)
> 
> [...]

所以我会尝试类似的东西：

```
List<Institution> institutions = em.createQuery("SELECT i FROM Institution i WHERE TYPE(i) IN ( Supplier, ServiceProvider ) ).getResultList(); 
```

# android - HTC 手机不会将给定的 WifiConfiguration 用于 Android 中以编程方式创建的热点

> ID：11006607
> 
> 赞同：2
> 
> 时间：2012-06-13T00:14:52.067
> 
> 标签：android, wifi, wifimanager

我正在开发一个 Android 应用程序，它要求用户提供 SSID 和密码来创建热点。我正在使用反射方法和 WifiManager 类。

在所有手机上一切正常，但在 HTC Desire 和 HTC Explorer 上我用于测试接入点不使用我提供的 SSID 和密码，但它使用在 Wi-fi 热点应用程序中设置的 SSID 和密码这是HTC的默认应用程序。

有人可以指导我吗，可能有一些我遗漏的东西或者我必须做的一些额外的事情，以使 HTC 手机使用给定的设置

# ios - 仅使用 NSUbiquitousKeyValueStore 时，如何以编程方式检测用户设备上是否启用了 iCloud？

> ID：11006610
> 
> 赞同：13
> 
> 时间：2012-06-13T00:15:25.327
> 
> 标签：ios, detect, icloud, nsubiquitouskeyvaluestore

我正在使用`NSUbiquitousKeyValueStore`将一些偏好数据同步到 iCloud。我发现如果用户在“设置应用程序”中禁用 iCloud 的“文档和数据”项，`NSUbiquitousKeyValueStore`则无法将其数据同步到 iCloud。所以，我想先检查一下这个设置是否打开。我找到了这个代码片段：</p>

```
 NSURL *ubiq = [[NSFileManager defaultManager] 
                   URLForUbiquityContainerIdentifier:nil];
    NSLog(@"url=%@",ubiq);
    if (!ubiq) {
        UIAlertView *av = [[UIAlertView alloc] initWithTitle:nil message:@"Please enable iCloud in Setting app" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [av show];
        return;

    } 
```

我想知道的是这是否是唯一的检测方法，即使我只是使用`NSUbiquitousKeyValueStore`（不是 iCloud 文档存储）。有更好的选择吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T03:59:23.073

基本上，`NSUbiquitousKeyValueStore`它始终可用，即使用户没有 iCloud 帐户（在这种情况下，`NSUbiquitousKeyValueStore`只是一个简单的本地存储）。所以一般来说，你不需要问自己或用户是否有配置的 iCloud 帐户。

如果您真的想确定，在 iOS 5 中，唯一的解决方案就是您提到的那个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-30T22:41:13.030

我不知道文档是否已更新，但苹果现在说：

> 要确定 iCloud 是否可用，尤其是在启动时，请检查 ubiquityIdentityToken 属性的值

参见[NSFileManager](https://developer.apple.com/Library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/index.html#//apple_ref/occ/instm/NSFileManager/URLForUbiquityContainerIdentifier:)`ubiquityIdentityToken`和`URLForUbiquityContainerIdentifier`. _

另请注意，Apple 说这`URLForUbiquityContainerIdentifier`可能相对较慢，而检查`ubiquityIdentityToken`相对较快。

这适用于 iOS6 及更高版本。

# java - 将安全标头信息添加到从 WSDL 生成的 Java 代码

> ID：11006613
> 
> 赞同：3
> 
> 时间：2012-06-13T00:15:55.903
> 
> 标签：java, web-services, netbeans, wsdl

我使用 Netbeans Web 服务向导在给定 WSDL 的情况下生成 Java 代码。如果我将 Web 服务方法拖到一个类中，那么它会创建一些 Java 代码来调用该 Web 服务（例如：SubmitApplication）。我可以看到如何填充对象以将信息发送到该 Web 服务，但该服务还需要一个带有用户名/密码的安全标头。

有一个名为 SecurityHeader 的生成类，其中包含用户名/密码属性。我可以使用有效的用户名/密码创建此对象，但我看不到如何传递该对象或将其添加到 SubmitApplication 调用。如何将 SecurityHeader 添加到 SubmitApplication 调用中？

以下是 SOAP 请求的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Header>
        <SecurityHeader xmlns="http://schemas.turss.com/BDS/1.0/">
            <CreateTime>6/8/2012 8:32:59 PM</CreateTime>
            <Owner>Sample_Owner</Owner>
            <HashKey>Sample_Hash_Key</HashKey>
        </SecurityHeader>
    </soap:Header>
    <soap:Body>
        <SubmitApplication xmlns="http://schemas.turss.com/BDS/1.0/">
            <newSearch>
                <CurrentApplicant xmlns="http://schemas.turss.com/BDS/1.0/proxy">
                    <FirstName>Bob</FirstName>
                    <MiddleName />
                    <LastName>Smith</LastName>
                    <Suffix />
                    <BirthDate>1970-10-20T00:00:00</BirthDate>
                    <SSN />
                    <Address />
                    <City />
                    <State />
                    <PostalCode />
                </CurrentApplicant>
                <PermissiblePurpose xmlns="http://schemas.turss.com/BDS/1.0/proxy">TenantScreening</PermissiblePurpose>
            </newSearch>
        </SubmitApplication>
    </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:53:47.873

我找到了一个将令牌字符串添加到肥皂安全标头的示例代码。这是下面代码的标题形式：

```
<TicketHeader>
    <Ticket>OD01096347CCA</Ticket>
</TicketHeader> 
```

将标头添加到消息的方法：

```
// Security token
String token;
// MyService and MySoapService are stubs generated from WSDL
MyService service = new MyService();
MyServiceSoap ep = service.getMyServiceSoap();

Binding binding = ((BindingProvider) ep).getBinding();
List handlers = binding.getHandlerChain();
handlers.add(new MySOAPHandler(token));
binding.setHandlerChain(handlers); 
```

MySoapHandler 的代码：

```
public class MySOAPHandler implements SOAPHandler {

    private String token;

    public DHSOAPHandler(String token) {
        this.token = token;
    }
    public boolean handleMessage(SOAPMessageContext messageContext) {
        SOAPMessage
        msg = messageContext.getMessage();
        if ((Boolean) messageContext.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY)){
            try {
                SOAPEnvelope envelope = msg.getSOAPPart().getEnvelope();
                SOAPHeader header = envelope.addHeader();
                SOAPElement el = header.addHeaderElement(envelope.createName("TicketHeader",
                                    "", "http://ws.service.com/"));
                el = el.addChildElement(envelope.createName("Ticket", "", "http://ws.service.com/"));
                el.setValue(token);
                msg.saveChanges();
            }
            catch (SOAPException    e) {
                return false;
            }
        }
        return true;
    }

    public boolean handleFault(SOAPMessageContext messageContext) {
        return true;
    } 

    public void close(MessageContext messageContext){
    }
    // I'm not quite sure about what should this function do, but I guess something like this...
    public Set getHeaders(){
        Set headers = new HashSet();
        headers.add(new QName("https://ws.service.com/", "TicketHeader"));
        return headers;
    }
} 
```

# c++ - 注册全局热键而不禁用其键

> ID：11006623
> 
> 赞同：2
> 
> 时间：2012-06-13T00:17:00.813
> 
> 标签：c++, winapi, hotkeys

我想制作一个可以捕获键盘事件的程序，即使它在任何时候都不活动。钩子太复杂了，我必须做的所有事情才能使它工作（制作一个 DLL，读取它，等等），所以我决定继续使用热键。

但现在我有一个问题。注册热键会禁用键盘上的键，因此我只能将键发送到程序，而不能在任何其他程序（例如记事本）上键入。

这是我的代码：

```
#include <iostream>
#include <windows.h>
using namespace std;

int main(int argc, char* argv[]) {
    RegisterHotKey(NULL, 1, NULL, 0x41); //Register A
    MSG msg = {0};

    while (GetMessageA(&msg, NULL, 0, 0) != 0) {
        if (msg.message == WM_HOTKEY) {
            cout << "A"; //Print A if I pressed it
        }
    }

    UnregisterHotKey(NULL, 1);
    return 0;
}

// and now I can't type A's 
```

这个问题有什么简单的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-14T00:05:19.163

我会让您的程序模拟一个与您实际执行的按键相同的按键。这意味着：

1.  你按'A'。
2.  该程序捕获'A'。
3.  该程序模拟按键。

这很简单。唯一的问题是你的程序也会捕捉到模拟的按键。为避免这种情况，您可以执行以下操作：

1.  你按'A'。
2.  该程序捕获'A'。
3.  程序取消注册热键。
4.  该程序模拟按键。
5.  （该程序不会（！）捕获“A”。）
6.  程序再次注册热键。

这就是整个循环。

现在，要模拟按键，您需要添加一些额外的代码。看看这个：

```
#include <iostream>
#include <windows.h>
using namespace std;

int main(int argc, char* argv[]) {
    RegisterHotKey(NULL, 1, 0, 0x41);            //Register A; Third argument should also be "0" instead of "NULL", so it is not seen as pointer argument
    MSG msg = {0};
    INPUT ip;
    ip.type = INPUT_KEYBOARD;
    ip.ki.wScan = 0;
    ip.ki.time = 0;
    ip.ki.dwExtraInfo = 0;
    ip.ki.wVk = 0x41;                            //The key to be pressed is A.

    while (GetMessage(&msg, NULL, 0, 0) != 0) {
        if (msg.message == WM_HOTKEY) {
            UnregisterHotKey(NULL, 1);           //Prevents the loop from caring about the following
            ip.ki.dwFlags = 0;                   //Prepares key down
            SendInput(1, &ip, sizeof(INPUT));    //Key down
            ip.ki.dwFlags = KEYEVENTF_KEYUP;     //Prepares key up
            SendInput(1, &ip, sizeof(INPUT));    //Key up
            cout << "A";                         //Print A if I pressed it
            RegisterHotKey(NULL, 1, 0, 0x41);    //you know...
        }
    }

    UnregisterHotKey(NULL, 1);
    return 0;
} 
```

我试过了，它工作正常，我猜。希望我能帮上忙；）

# c++ - 在 C++ 中按升序对数组集进行排序

> ID：11006627
> 
> 赞同：0
> 
> 时间：2012-06-13T00:17:51.483
> 
> 标签：c++, sorting

我正在尝试编写一个代码来实际按升序对我的数组进行排序，所以会发生什么说这就是我所拥有的。

```
char myListArray[10][40];
myListArray = "Yeah?",
              "Tomorrow",
              "Again",
              "I will see you"; 
```

所以发生的事情是它应该按 ASCII 值的顺序排序。

```
Again
I will see you
Tomorrow
Yeah? 
```

我创造了这样的东西......

```
char temp[40];
temp[0] = '\0';           
int i, j, pos = 10, flag = 1;

for(i = 1; (i <= pos) && flag; i++)
{
    flag = 0;
    for (j=0; j < (pos -1); j++)
    {
        if (phrase[i][j+1] > phrase[i][j])     
        {
            strcpy(temp, phrase[i]);
            strcpy(phrase[i], phrase[i+1]);
            strcpy(phrase[i+1], temp);
            flag = 1;
        }
    }
} 
```

现在我不知道我的逻辑有问题，我想知道是否有一个功能可以轻松排序？还是`bubble sort`最简单的？

更新：

我将接受以下答案之一，但我找到了如何以最简单的方式对数组进行排序的解决方案。

```
while(pos < 9){

  if(phrase[pos][i] > phrase[pos+1][i]){

   strcpy(temp, phrase[pos]);
   strcpy(phrase[pos], phrase[pos+1]);
   strcpy(phrase[pos+1], temp);
   flag = 1;

 if(flag = 1){

    pos = 0;

  }

  }

pos++;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:37:19.383

使用`std::array`,`std::string`和`std::sort`...

```
std::array<std::string, 4> arr = { "Yeah?", "Tomorrow", "Again", "I will see you" };
std::sort(arr.begin(), arr.end()); 
```

这也可以很容易地适应使用 C 数组，或者`std::vectors`如果您无权访问`std::array`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:26:03.790

> 我想知道是否有一个简单的排序功能？

*   尝试使用 C++ 结构，例如`string`,`vector`和`sort`. 那时你的工作就容易多了。
*   但是，如果您想使用 C，您可以查找`qsort`. 不过，您将需要提供自定义比较器功能。

> 冒泡排序最简单？

排序算法的选择取决于最坏情况下的性能、元素数量等因素。考虑需要排序的元素数量。想想什么样的表现是可以接受的。IMO，实现冒泡排序与插入排序或 Shell 排序一样简单。合并排序/快速排序/基数排序OTOH，可能涉及更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T03:24:45.390

如果您希望它像您看起来那样使用纯 C，那么您就错过了`strcmp`and `qsort`。请注意，您的代码与 C++*无关*，它是经典的 C 代码，问题被错误标记。如果您想在 C++ 中完成，请参阅其他实际使用 C++ 容器的答案。如果你实际上不使用 C++，你知道，使用 C++ 的部分，而不仅仅是 C，那么使用 C++ 是没有意义的！

下面是一个独立的工作示例。请注意，您的二维数组和指向字符串的指针数组都有一个示例。您的 2D 数组声明具有多余的第一个数组大小。这是不必要的，编译器知道有多少字符串。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void sort1(void)
{
    // 2D array
    char strings[][40] = {
        "Yeah?",
        "Tomorrow",
        "Again",
        "I will see you"
    };
    const int el_size = sizeof(strings[0]);
    const int el_count = sizeof(strings)/el_size;
    int i;
    printf("\n%s\n", __FUNCTION__);
    qsort(strings, el_count, el_size, strcmp);
    for (i = 0; i < el_count; ++i) {
        printf("%s\n", strings[i]);
    }
}

int strcmp_ptr(const char ** a, const char ** b)
{
    return strcmp(*a, *b);
}

void sort2(void)
{
    // Array of pointers to string constants
    const char * strings[] = {
        "Yeah?",
        "Tomorrow",
        "Again",
        "I will see you"
    };
    const int el_size = sizeof(strings[0]);
    const int el_count = sizeof(strings)/el_size;
    int i;
    printf("\n%s\n", __FUNCTION__);
    qsort(strings, el_count, el_size, strcmp_ptr);
    for (i = 0; i < el_count; ++i) {
        printf("%s\n", strings[i]);
    }
}

int main(void)
{
    sort1();
    sort2();
    return 0;
} 
```

# javascript - 在网页问题中添加小工具

> ID：11006628
> 
> 赞同：0
> 
> 时间：2012-06-13T00:17:52.240
> 
> 标签：javascript, jquery, html

我想在我的网页中嵌入[这个小工具。](http://www.gmodules.com/ig/creator?synd=open&url=http%3A%2F%2Fwww.pilyrics.com%2Fgadgets%2Fmoneyc.xml&lang=en)这就是为什么我使用它上面给出的嵌入代码（最后给出，“获取代码”）。但是，无法理解如何在特定位置显示它，例如右上角或例如 500、500 像素。谁能帮助我我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:51:51.277

将它包裹在一个 div 周围并添加样式。在示例中，顶部和右侧距离设置为零像素，如果您希望从顶部 20px 到顶部：20x。 [http://jsfiddle.net/efortis/uhPfr/](http://jsfiddle.net/efortis/uhPfr/)

```
<div style="position: fixed; top: 0; right: 0;">
    <script src="//www.gmodules.com/ig/ifr?url=http://www.pilyrics.com/gadgets/moneyc.xml&amp;synd=open&amp;w=320&amp;h=645&amp;title=LIVE+MARKET+RATES&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script>
</div> 
```

​</p>

# c# - 更改货币格式以显示 4 个小数位，而不是全局显示 2 个小数位

> ID：11006629
> 
> 赞同：15
> 
> 时间：2012-06-13T00:18:01.330
> 
> 标签：c#, .net

我有一个工作网站，我到处使用这个表达。

```
price.ToString("C") 
```

它目前显示 2 个小数位，例如。1.45 美元

现在我需要网站显示 4 位小数，例如。1.4515 美元

有什么简单的方法可以在全球范围内更改它吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T00:22:53.190

您无法修改格式说明符的默认行为，但您可以在项目中进行全局搜索和替换。假设您使用的是 Visual Studio，您可以执行全局搜索和替换 (Ctrl-Shift-H) 并替换`.ToString("C")`为`.ToString("C4")`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T00:24:12.743

你能覆盖线程的[CurrentCulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx)并设置[CurrencyDecimalDigits](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencydecimaldigits.aspx)吗？

# sql - SQL 关系和查询

> ID：11006633
> 
> 赞同：2
> 
> 时间：2012-06-13T00:18:46.950
> 
> 标签：sql

我正在尝试创建一个包含两个表的数据库。如果有帮助，我已经包含了 create_tables.sql 代码。我正在尝试设置关系以使 STKEY 成为定义键，以便可以使用查询来搜索 thr 键并显示该学生遇到的问题。在我使用以下搜索时：

```
SELECT *
FROM student, student_log
WHERE 'tilbun' like student.stkey 
```

它显示了表中的所有问题，无论 STKEY 是什么。我想我的外键设置可能不正确。我在这里包含了 create_tables.sql。

```
CREATE TABLE `student`
(
`STKEY` VARCHAR(10),
`first_name` VARCHAR(15),
`surname` VARCHAR(15),
`year_group` VARCHAR(4),
PRIMARY KEY (STKEY)
)
;

CREATE TABLE `student_log`
(
`issue_number` int NOT NULL AUTO_INCREMENT,
`STKEY` VARCHAR(10),
`date_field` DATETIME,
`issue` VARCHAR(150),
PRIMARY KEY (issue_number),
INDEX (STKEY),
FOREIGN KEY (STKEY) REFERENCES student (STKEY)
)
; 
```

为帮助喝彩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:23:06.757

尽管您已经正确定义了表中的外键关系，但在执行查询时仍必须指定连接条件。否则，您将得到两个表的笛卡尔积（一个的所有行乘以另一个的所有行）

```
SELECT
  student.*,
  student_log.*
FROM student INNER JOIN student_log ON student.STKEY = student_log.STKEY
WHERE student.STKEY LIKE 'tilbun' 
```

请注意，我没有使用隐式连接（以逗号分隔的表列表），而是使用了显式连接`INNER JOIN`，这是首选的现代语法。

最后，除非您还使用通配符，否则使用`LIKE`子句几乎没有什么用处`=`

```
WHERE student.STKEY LIKE '%tilbun%' 
```

# windows - windows下有类似VI的编辑器吗？

> ID：11006634
> 
> 赞同：25
> 
> 时间：2012-06-13T00:18:52.240
> 
> 标签：windows, vim, windows-7, vi

我想知道windows命令行下是否有类似vi的编辑器？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-13T00:21:17.477

[只需从http://www.vim.org](http://www.vim.org)下载 vim for windows —— 在安装时它会询问您是否要创建从命令行调用它的快捷方式。然后你就可以了`vim <filename>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:31:04.010

[Komodo](http://www.activestate.com/komodo-ide)有 vi 模式，eclipse 有几个 vi 插件，使用 cygwin，或者如 Juan 所说，使用 gvim

# php - 如何在本文中使用 php explode 或 pregmatch

> ID：11006637
> 
> 赞同：0
> 
> 时间：2012-06-13T00:19:23.577
> 
> 标签：php, preg-match, explode

谁能帮助我如何将 /explode verse 格式拆分为 3 个部分？

条件应该如下。

第二部分和第三部分必须用冒号分隔。例如在创 1:1

它必须分开为

```
[0] = Gen
[1] = 1
[2] = 1 
```

它由一个空格（或多个空格以使其用户友好）和冒号分隔

其次，在前面有数字的经文中是一个问题，因为用户可以将其键入为

1 Cor 1:1 他们也可以将其输入为 1Cor 1:1

在任何一种情况下，我都希望 [1] 和 [2] 用冒号分隔，其余部分将被修剪所有空间并成为 [0] 值。

这可能吗？因为我正在考虑只使用一个文本框来搜索诗句，php 会在将其作为查询传递之前相应地对其进行验证。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:29:02.090

我想出了以下似乎可行的模式。试试这个：

```
<?php

$string = '7 Genesis 16:23';

if (preg_match('/^(.*?)\s+(\d+):(\d+)$/', $string, $match)) {
    echo "You selected book {$match[1]}, chapter {$match[2]}, verse {$match[3]}!";
} else {
    echo "I couldn't understand your input.  Please use 'Book chapter:verse' format.";
} 
```

表达式的第一部分`(.*?)`与书相匹配，(1 Cor) 或只是 (Cor)，因此您可能需要/想要对该部分进行额外验证或改进它，但这对我来说没问题。希望能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:29:01.937

尝试这样的事情：

```
$str = 'Gen 1:1'; // OR: $str = '1 Cor 1:1';
$array = explode( ' ', $str);
$last = end( $array);
$array = array_merge( array_slice( $array, 0, count( $array) - 1), explode( ':', $last));
var_dump( $array); 
```

[演示](http://codepad.viper-7.com/jvv3jq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:30:55.850

这种模式应该有效：

```
$subject = <<verse here>>;
$pattern = '/^([0-9a-zA-Z ]+) ([0-9]+):([0-9]+)/';
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

请注意，第一个元素`$matches`将是完整的 $subject。元素 1-3 将映射到您的元素 0-2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T00:32:44.673

所以听起来你想要以下内容，按顺序：

*   一些文字（也许空格也许不是）`(.*)`
*   一些空格（至少 1 个）`[ ]+`
*   一个数字（1+ 位）`([0-9]+)`
*   一个冒号`:`
*   另一个数字（1+ 位）`([0-9]+)`

因此，您的正则表达式看起来像这样：

```
/^(.*)[ ]*([0-9])+:([0-9]+)$/ 
```

运行后：

```
$m = '1 Cor 3:14';
$matches = array();
preg_match("/^(.*)[ ]*([0-9])+:([0-9]+)$/", $m, $matches); 
```

`$matches`看起来像这样：

```
Array
(
    [0] => 1 Cor 3:14
    [1] => 1 Cor 
    [2] => 3
    [3] => 14
) 
```

# jquery - JQuery删除行不起作用

> ID：11006639
> 
> 赞同：0
> 
> 时间：2012-06-13T00:19:40.267
> 
> 标签：jquery

我有一个函数，它接受两个参数，一个项目（酒）的 ID 和订购的瓶子数量。

订单建立在动态 jquery 表中。

逻辑是，如果用户购买超过 3 瓶，则应用折扣，并添加显示葡萄酒折扣的行。如果他们将值更改为 3 或更多，然后将值降至 3 以下，我希望删除显示折扣的行。

为什么这不起作用？警报正在触发，所以我猜这是 remove() 行的错误。

```
 function UpdateWineDiscount(id, qty) {
            // Does discount row already exist?
            if ($("#trTable tr > td:contains('D" + id + "')").length) {
                // If discount row exists and qty is now below 3, remove it
                if (qty < 3) {
                    $("D" + id).remove();
                    alert("remove");
                };
            } else {
                // Is qty >= 3?
                if (qty >= 3) {
                    // Add discount row
                    var newRow = $("<tr id='D" + id + "' style='color:red'> <td class='drinkID' style='display:none'>D" + id + "</td> <td class='drinkName'>Wine Discount</td>  <td></td>  <td></td>  <td></td>  <td></td>  <td class='drinkTotal'>-1</td>  </tr>");
                    $("#trTable").append(newRow);
                } else {
                    // Update discount value
                };
            };
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:28:16.270

您的代码有点偏离，以便通过 id 删除元素，它需要`#`在前面有一个：

`$("#D" + id).remove();`

# javascript - 为什么要在函数定义之外引用静态变量（函数属性）？

> ID：11006641
> 
> 赞同：1
> 
> 时间：2012-06-13T00:20:07.197
> 
> 标签：javascript

我正在查看[JavaScript 中的静态变量，](https://stackoverflow.com/questions/1535631/static-variables-in-javascript)我注意到我之前看到的一些东西，即定义了函数并且*在*函数定义之后更新了函数原型：

```
function MyClass () { // constructor function
  //function definition here
}

//now add a (static?) method *outside* the function definition
MyClass.prototype.publicMethod = function () {
  alert(this.publicVariable);
};

//add a static property *outside* the function definition
MyClass.staticProperty = "baz"; 
```

这是我的问题 - 为什么不在函数定义中定义它们，如下所示：

```
 function MyFunc(){
    MyFunc.staticVar = 1;
    //static method showing static var
    MyFunc.showVarStatic  = function(){
        alert(MyFunc.staticVar);
    }
    //instance method referring to static var
    this.showVarInstance = function(){
        alert(MyFunc.staticVar);
    }
    //instance method - doesn't change static var
    this.inc1 = function(){
        this.staticVar += 1;//no such property
    }
    //static method, changes var
    this.inc2 = function(){
        MyFunc.staticVar += 1;//increments static property
    }
  } 
```

这似乎在 IE8、FF 和 Chrome 中表现得如预期。这只是个人喜好/风格吗？我喜欢它，因为我的整个函数都包含在那些大括号中。

[编辑：在做了更多的阅读和实验之后，我更好地理解了 javascript 函数*是*如何构造函数的，以及它们与例如 C# 类的不同之处——这是我用来演示这一点的一些代码]

```
//this is deceiving, notSoStaticVar won't exist until MyFunc1 has been run
//and then it will be reset whenever MyFunc1 (a constructor) is run
function MyFunc1(){
    MyFunc1.notSoStaticVar = "I belong to MyFunc1";
    this.instanceVar = "I belong to instances of MyFunc1";
}

//this code will be run inline one time, 
//so the static property of MyFunc2 will exist
//(I like how all the functionality is in one code block, but it's kind of messy)
MyFunc2 = (function(){
    var temp = function(){
        this.instanceVar = "I belong to an instance of MyFunc2";
    }
    temp.staticVar = "I belong to MyFunc2";
    return temp;
})();

//this seems to be equivalent to MyFunc2, but the code is cleaner
MyFunc3 = function(){
}
MyFunc3.prototype.instanceVar = "I belong to an instance of MyFunc3";
MyFunc3.staticVar = "I belong to MyFunc3";

//tests
console.log(MyFunc1.notSoStaticVar);//undefined!
var a = new MyFunc1();
console.log(MyFunc1.notSoStaticVar);//"I belong to MyFunc1"
console.log(a.instanceVar);//"I belong to instances of MyFunc1"
MyFunc1.notSoStaticVar = "I will be changed when another instance of MyFunc1 is created";
console.log(MyFunc1.notSoStaticVar);//"I will be changed when another instance of MyFunc1 is created"
var b = new MyFunc1();
console.log(MyFunc1.notSoStaticVar);//"I belong to MyFunc1" - was reset by constructor!

//now test MyFunc2
console.log(MyFunc2.staticVar);//"I belong to MyFunc2"
MyFunc2.staticVar = "I am not affected by the construction of new MyFunc2 objects";
var c = new MyFunc2();
console.log(c.instanceVar);//"I belong to an instance of MyFunc2"
console.log(MyFunc2.staticVar);//"I am not affected by the construction of new MyFunc2 objects"

//now test MyFunc3
console.log(MyFunc3.staticVar);//"I belong to MyFunc3"
MyFunc3.staticVar = "I am not affected by the construction of new MyFunc3 objects";
var d = new MyFunc3();
console.log(d.instanceVar);//"I belong to an instance of MyFunc3"
console.log(MyFunc3.staticVar);//"I am not affected by the construction of new MyFunc3 objects"

//interesting
console.log(c);//"temp" <-- not really intuitive!
console.log(d);//"MyFunc3" <-- makes sense 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:22:38.987

**简而言之**：性能。

在函数内部定义它们将导致每次调用构造函数时都重新定义它们。

虽然这将按预期运行，但这只是没有充分理由的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:23:02.873

因为这将为每个对象实例添加独特的功能。这会消耗通常不必要的额外内存开销。

它在某些情况下很有用，比如函数应该引用局部变量时，但如果不是这种情况，它们应该在原型上。

此外，静态的将不断被覆盖。

# function - 来自其他函数的输入元素 1 by 1 w/o for 循环

> ID：11006646
> 
> 赞同：1
> 
> 时间：2012-06-13T00:21:10.923
> 
> 标签：function, matlab, for-loop, scope

我有一个函数可以计算一个数字数组（randparam），我想将它逐个元素地输入到另一个进行模拟的函数中。

例如

```
function [randparam] = arraycode

code 

randparam = results of code 
% randparam is now a 1x1001 vector. 

end 
```

接下来我想将 randparam 1 by 1 输入到我的模拟函数中

```
function simulation 

x = constant + constant * randparam + constant

return 
end 
```

让我感到困难的是因为模拟函数中的return命令，它只计算上面方程x的一步，将结果返回到另一个函数，调用它积分器，然后积分器函数会再次调用模拟函数来计算 x。

所以积分器功能可能看起来像

```
function integrator (x)
y = simulation(x) * 5
u = y+10
yy = simulation(x) * 10 + u

end 
```

如您所见，积分器函数调用了模拟函数两次。这给我带来了两个问题：

1.  如果我在模拟函数中创建一个 for 循环，在其中我使用以下内容逐个元素输入：

    对于 i = 1:100

    x = 常数 + 常数 * randparam(i) + 常数

    返回
    端

然后每次我的积分器函数再次调用我的模拟函数时，我的 for 循环又从 1 开始。

2.如果我如何将 i 保存在我的基本工作区中，以便我的模拟函数中的 for 循环知道从 1 开始，那么我的 y 和 yy 函数将具有不同的 x 输入，因为一旦它被称为第二个yy 的时间，那么由于 y 的来电，我现在是 i+1。

在这种情况下有没有办法避免 for 循环？第二个问题的一个潜在解决方案是复制脚本但使用不同的名称，并让我的 for 循环使用不同的变量，但这似乎效率很低。

希望我说清楚了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:32:36.130

首先，如果您通常希望对数组的每个元素应用相同的函数并且还**没有内置的矢量化方式来执行此操作**，您*可以*使用`arrayfun`（尽管通常一个简单的`for`循环更快且更具可读性）：

```
%# randparam is a 1x1001 vector. 
%#next I want to input randparam 1 by 1 into my simulation function
function simulation 
    x = constant + constant * randparam + constant
    return 
end 
```

（注意：问问自己这个函数可能在做什么，因为它没有返回值并且 MATLAB 不会通过引用传递。）这是`arrayfun`为了：将函数应用于数组（或向量，在这种情况下）。同样，您应该确保在您的情况下这样做是有意义的，而不是显式循环。

```
function simulation(input_val)
#% your stuff
end

sim_results = arrayfun( @simulation, randparam); 
```

当然，你写的方式，行

```
x = constant + constant*randparam + constant; 
```

可以（并且将）向量化 - 如果你给它一个向量或矩阵，一个向量或矩阵将是结果。

**其次**，您似乎不清楚 MATLAB 中函数变量的“范围”。如果调用函数，则会创建一个干净的工作区。因此`x`，从一个函数不会自动在您调用的另一个函数中可用。变量在函数末尾也会超出范围，因此`x`在函数内使用不会更改/覆盖`x`该函数外部存在的变量。**一个函数的多次调用每个都有自己的工作**区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:17:27.077

积分器级别的循环有什么问题？

```
function integrator (x)

for i=1:length(x)
    y = simulation(x(i)) * 5
    u = y+10
    yy = simulation(x(i)) * 10 + u
end 
```

并将您的整个 randparm 传递给积分器？从您的问题中不清楚您是否希望`simulation`在给定相同输入时返回相同的值，或者您是否希望它使用相同的输入执行两次，或者您是否希望每次调用都有新的输入。也不清楚是否`simulation`保持任何内部状态。按照您编写示例的方式，模拟仅取决于输入值，而不取决于任何先前的输入或输出，这使得矢量化变得微不足道。如果我们都错过了这条船，请使用更精致的示例代码编辑您的问题。

# spring - 为什么 NuGet 会强制升级已经满足的依赖项？

> ID：11006649
> 
> 赞同：1
> 
> 时间：2012-06-13T00:21:18.990
> 
> 标签：spring, nunit, nuget

我正在尝试使用 NuGet 安装 Spring.Testing.NUnit，它迫使我更新依赖项，即使我已经有一个可接受的版本。它甚至没有将其更新到最新版本，即 2.6.0。

我可以使用 安装`-IgnoreDependencies`，但是当我这样做时，运行测试时出现错误`Could not load file or assembly 'nunit.framework, Version=2.6.0.12051` 是 Spring.Testing.NUnit 包对它需要什么版本的 NUnit 有错误吗？

```
PM> Install-Package NUnit -Version 2.5.7.10213
'NUnit 2.5.7.10213' already installed.
Successfully added 'NUnit 2.5.7.10213' to Services.Tests.Unit.

PM> Install-Package Spring.Testing.NUnit
Attempting to resolve dependency 'Common.Logging (= 1.2.0)'.
Attempting to resolve dependency 'NUnit (= 2.5.7)'.
Attempting to resolve dependency 'Spring.Core (= 1.3.2)'.
Attempting to resolve dependency 'Spring.Data (= 1.3.2)'.
Attempting to resolve dependency 'Spring.Aop (= 1.3.2)'.
Successfully installed 'NUnit 2.5.10.11092'.
Successfully installed 'Spring.Testing.NUnit 1.3.2'.
Successfully removed 'NUnit 2.5.7.10213' from Services.Tests.Unit.
Successfully added 'NUnit 2.5.10.11092' to Services.Tests.Unit.
Successfully added 'Spring.Testing.NUnit 1.3.2' to Services.Tests.Unit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:27:52.037

Spring.Testing.Packages 需要 NUnit >= 2.5.7。NuGet 认为版本字符串的第三部分可以安全更新到（通常，它不特定于此包）。在这种情况下，NuGet 将选择版本至少为 2.5.7 且低于 2.6 的最高可能情况。

# visual-studio-2010 - 如何更改 Visual Studio 解决方案在调试模式下打开的服务器

> ID：11006650
> 
> 赞同：1
> 
> 时间：2012-06-13T00:21:20.160
> 
> 标签：visual-studio-2010, visual-studio

我有一个 asp.net 网站解决方案，并且在某些时候有人更改了该解决方案，以便在调试模式下运行它时，它不再使用内置的 VS Web 服务器，而是使用托管在我的本地计算机上的 IIS 7 sserver。出于测试目的，以及更好地了解 VS，我想将其更改回来，以便使用内置服务器打开网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:02:03.700

答案取决于您使用的是网站项目 (WSP) 还是 Web 应用程序项目 (WAP)。两者在 VS 中的实现方式非常不同。

如果您有 WAP，则可以在项目属性中配置设置。要到达此处，请右键单击项目并选择“属性”，或者双击项目下的“属性”节点（对于 VB，它称为“我的项目”）。然后转到 Web 选项卡：

![解决方案资源管理器中的属性节点](../Images/57106ff31921dccfd23a5a528018b2ca.png) ![服务器设置](../Images/2f5b355690f482e30d65f9e06af97c2e.png)

如果您有 WSP，则无法将项目转换为使用不同的设置。相反，只需打开网站并将其指向您网站所在的文件夹。（虽然，鉴于没有转换过程，我怀疑你有 WSP。）

# c# - 在一个站点上为另一个站点创建一个经过 asp.net 身份验证的 cookie

> ID：11006651
> 
> 赞同：1
> 
> 时间：2012-06-13T00:21:24.143
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我有 3 个 mvc4 站点。站点 1 'www.mydomain.com' 是一个允许用户创建帐户的营销站点。

站点 2 'https://businessnamewhatever.mydoman.com' 用于企业登录和使用可用功能。

站点 3 WebApi 项目“https://api.mydomain.com”

在营销站点中创建帐户（通过调用 webapi 创建帐户）后，我想将它们重定向到第二个站点，自动将它们登录。

这两个站点都有表单身份验证设置，并且都使用在 web.config 身份验证部分中设置的自己的 cookie 名称

在调用 api 后在我的营销站点中，我需要设置允许用户自动登录站点 2 的身份验证 cookie

我认为这只是在我的营销网站内使用的一个案例

FormsAuthentication.SetAuthCookie(userName, true,"我在站点 2 上的 cookie 的名称");

我的第二个想法是做一个肮脏的重定向，比如

```
 var url = string.Format("https://{0}.mydomain.com/account/sign-in?userName={1}&password={2}", model.BusinessName, model.BusinessName, model.Password);
   return Redirect(url); 
```

但是重定向永远不会发生。查看网络选项卡，我可以看到响应，如果单击它，我将正确重定向到该站点。

有没有更好的方法来做到这一点？

更新

对不起！我忘了提到我有第三个应用程序作为我的 API

我已经按照 Kenneth 的建议更新了所有的 web.config。添加具有身份验证设置的相同机器密钥和域名

在营销站点中调用 create user 方法后，我应该尝试在那里设置 cookie 还是应该做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:44:02.480

如果 2 个站点共享一个根域，即 site1.yourdomain.com 和 site2.yourdomain.com，您应该能够设置 machinekey 和共享域以允许两个站点访问身份验证票。

详情在这里。[http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx](http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:03:02.807

首先，我假设这两个产品都在不同的域上（否则你可以参考@Kenneth 的答案），你可以对两个站点的源代码进行更改。

*   在营销站点上创建帐户后，从服务器端向业务站点发送一个 POST（使用 SSL 确保安全），其中包含用户名、密码哈希和重定向回营销 URL。
*   业务站点存储这些值（视情况而定），然后使用一次性使用的 URL 进行响应，以重定向客户端浏览器，该 URL 仅在短时间内有效（例如 1 或 2 分钟）。
*   营销网站将该 URL 作为 302 重定向发送给客户端。
*   客户端浏览器重定向到业务站点。
*   业务站点验证 URL，确保它没有过期。
*   业务站点将浏览器重定向回重定向回营销 URL。在此响应中包含任何身份验证 cookie。

如果发生验证错误（例如超时或无效参数），则业务站点应重定向到营销站点上的预定义 URL。

# dojo - 我在哪里可以找到 dojo 模块的位置？

> ID：11006653
> 
> 赞同：2
> 
> 时间：2012-06-13T00:21:50.227
> 
> 标签：dojo, js-amd

似乎除了我之外没有人遇到这个问题，但是在哪里可以找到各种 Dojo 模块的模块位置和文档？例如，这些示例给出了 xhr 模块的位置`dojo/_base/xhr`，但在搜索文档后，我找不到任何关于 xhr 模块或任何模块的信息。找到它的唯一方法是谷歌，但这似乎不利于学习，嗯，任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:43:34.293

[xhr 文档](http://dojotoolkit.org/reference-guide/1.7/dojo/_base/xhr.html)作为[Dojo 参考指南](http://dojotoolkit.org/reference-guide/1.7/)的一部分在 Dojo 站点的文档部分提供。登陆页面可以布局得更好。欢迎您提出建议。大多数文档页面的底部都有一个反馈链接。

# wordpress - 如何在悬停而不是单击时制作 twitter bootstrap（对于 Wordpress！）菜单下拉菜单

> ID：11006654
> 
> 赞同：1
> 
> 时间：2012-06-13T00:22:16.013
> 
> 标签：wordpress, twitter-bootstrap, drop-down-menu

我已经基于[wordpress 版本的引导程序](http://bootstrapwp.rachelbaker.me/)构建了一个自定义 wordpress 主题，我试图让下拉导航栏在悬停而不是单击时打开。

我在这里找到[了这个答案](https://stackoverflow.com/questions/8878033/how-to-make-twitter-bootstrap-menu-dropdown-on-hover-rather-than-click)，但它似乎解决了原始（无 wordpress）引导程序。要么那个，要么我只是不清楚如何实现它，但它看起来对于 wordpress 来说只是不同。

我几乎设法通过在 bootstrap-dropdown.js 文件中将“click”替换为“hover”来做到这一点，但是我实际上无法将鼠标移动到子菜单项，因为一旦我移动光标，下拉菜单就会消失下拉菜单不会保持打开状态。

理想情况下，它将在桌面上悬停，在移动设备上仍处于点击状态，但这不是必须的。我将牺牲点击移动设备以将鼠标悬停在桌面上。

如果有人可以帮助解决这个问题，那就太棒了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T01:25:02.123

解决此问题的三个步骤：

1) 只需将此代码添加到主题 -> 库 -> css -> bootstrap.css 中的 bootstrap.css

```
ul.nav li.dropdown:hover ul.dropdown-menu {
display: block;    
} 
```

这是一个快速修复，只使用 CSS，而不涉及 Javascript 或 JQuery。但是，当您悬停菜单时，这可能会导致一些错误的 UI 行为。

2) 您将无法链接到父类别。要解决这个问题，请转到主题的 functions.php 并在第 417 行删除它：

```
class="dropdown-toggle" data-toggle="dropdown" 
```

所以你的行将是：

```
$attributes .= ''; 
```

3）如果您将光标从父类别移动到下拉菜单的速度太慢，菜单将关闭。这是因为留有余量。要解决此问题，请将此代码添加到 bootstrap.css 中的第一个代码下方：

```
.navbar .dropdown-menu {
 margin-top: 0px;
} 
```

就是这样，您的 Wordpress Bootstrap 主题现在应该可以工作，而无需单击父类别以显示下拉菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:47:47.827

我所做的是将此行添加到下拉样式附近的 bootstrap.css 中：

```
.dropdown.open .dropdown-menu {
  ..........
/*--- Hover Dropdown Menu---*/
ul.nav li.dropdown:hover ul.dropdown-menu {
    display: block;    
}
.dropdown-menu:before {
............ 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:53:39.520

这适用于 Wordpress Bootstrap：

```
.navbar .nav > li > .dropdown-menu:after, .navbar .nav > li > .dropdown-menu:before {
    content: none;
} 
```

# c++ - 根据执行时间分析 C++ 项目

> ID：11006658
> 
> 赞同：18
> 
> 时间：2012-06-13T00:22:34.340
> 
> 标签：c++, performance

在根据执行时间分析现有代码方面，我需要一些帮助。目的是加快速度。

我得到了一些以前工作过的代码。它完全用 C++ 编写，带有 OO 概念。它有一个基于 GUI 的界面，选择某个选项会运行选定的代码片段。（作为项目的一部分，大约有 11 个类）。

我希望能够按下 GUI 选项并让代码运行并生成资源映射，例如：

```
Functions of Class 1 = 20% of execution time
Functions of Class 2 = 60% of execution time
Functions of Class 3 = 10% of execution time
Functions of Class 4 = 10% of execution time 
```

这样一来，我就知道哪一门课占用的时间最多，然后就知道要改进和改进哪一门课。但是，我不知道该怎么做。我只有基本的 C++ 知识。

我确实读过这篇文章：[find c++ execution time](https://stackoverflow.com/questions/3400309/find-c-execution-time)，但是由于程序不是串行的。一个类调用另一个类，然后调用另一个类，我不知道系统时钟/刻度如何实现？

我读过 Valgrind、Zoom、Poor Man's Profiler 等程序，但老实说不知道将它与代码集成。有这么简单的方法吗？

我还阅读了这个方法：[如何分析在 Linux 中运行的 C++ 代码？](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)，但是我看不到如何获得关于基于类的信息（1 类、2 类等）的精确信息

有人可以为新手提供建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T00:40:52.617

Valgrind（子工具 callgrind）使用起来非常简单。您只需要确保将足够的调试信息编译/链接到您的程序中，以便 callgrind 可以找到被调用的各种函数的名称。然后，不要直接调用您的程序，而是将其（及其参数）作为参数传递给 valgrind，例如：

```
valgrind --tool=callgrind --trace-children=yes <myprogram> <myprogram_args> 
```

（--trace-children 是否存在，以防您的真正可执行文件隐藏在某些层或多层包装脚本后面）

请注意，您的程序将运行*得更*慢（比如慢 100 倍），因为正在跟踪每个函数入口点。

存在各种工具来探索 callgrind 的输出，特别是 kcachegrind/qcachegrid。

或者，您可以测量少量高级函数的系统时钟滴答（因此您会看到“函数 X 及其下的所有内容所花费的时间”），并在您找到热点时继续执行您的代码。

像这样的东西（从概念上讲，需要适当地组织到标题/源中）：

```
struct FunctionTimer {
  FunctionTimer(char const * name) : mName(name), mStartTime(clock()) { }
  ~FunctionTimer() { mFunctionTimes[mName] += clock() - mStartTime; }

  static void report()
  {
    ... iterate through mFunctionTimes, printing out
    the names and accumulated ticks ...
  }

  std::string mName;
  clock_t mStartTime;

  static std::map<std::string, clock_t> mFunctionTimes;
};

...

void myfunc()
{
  FunctionTimer ft("myfunc");
  ... code of myfunc ...
}

...

int main(int argc, char* argv[])
{
  ... do stuff ...
  FunctionTimer::report();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:43:20.920

[Wikipedia](http://en.wikipedia.org/wiki/List_of_performance_analysis_tools#C_and_C.2B.2B)维护了一个很好的[c 和 c++ 性能分析工具](http://en.wikipedia.org/wiki/List_of_performance_analysis_tools#C_and_C.2B.2B)列表，看看它们是否对您有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T00:29:39.180

一个丑陋的解决方案是围绕每个感兴趣的函数启动和停止计时器，在每次调用后将时间添加到某个全局变量。然后，在主要结束时，您只需比较变量即可计算百分比时间。

但是，这可能会变得非常糟糕，尤其是在有很多功能的情况下。如果您熟悉 C++ 的面向方面的风格，您可以暂时使用它，因为方面可以让您更轻松地将样板代码放在所有函数周围。

# asp.net - ASP.NET ApplicationInstance.CompleteRequest 不起作用？

> ID：11006662
> 
> 赞同：4
> 
> 时间：2012-06-13T00:22:55.167
> 
> 标签：asp.net, system.web.ui.webcontrols

HttpContext.Current.ApplicationInstance.CompleteRequest 似乎什么也没做。我错过了什么？

例如，尽管在每个有趣的事件期间都会调用 CompleteRequest，但以下所有事件仍然在一个简单的测试页面上运行。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;

namespace LifeCycle
{
    public partial class _Default_NoMasterPage : System.Web.UI.Page
    {
        private int count = 0;

        protected override void OnInit(EventArgs e)
        {
            nextLabel("InitBeforeBase");
            base.OnInit(e);
            HttpContext.Current.ApplicationInstance.CompleteRequest();
            nextLabel("Init");
        }

        protected override void OnInitComplete(EventArgs e)
        {
            nextLabel("InitCompleteBeforeBase");
            base.OnInitComplete(e);
            HttpContext.Current.ApplicationInstance.CompleteRequest();
            nextLabel("InitComplete");
        }

        protected override void OnLoad(EventArgs e)
        {
            nextLabel("OnLoadBeforeBase");
            base.OnLoad(e);
            HttpContext.Current.ApplicationInstance.CompleteRequest();
            nextLabel("OnLoad");
        }

        protected override void OnLoadComplete(EventArgs e)
        {
            nextLabel("OnLoadCompleteBeforeBase");
            base.OnLoadComplete(e);
            HttpContext.Current.ApplicationInstance.CompleteRequest();
            nextLabel("OnLoadComplete");
        }

        protected override void OnPreInit(EventArgs e)
        {
            // can't add a control to the page during OnPreInit as the other page control doesn't exist yet.
            base.OnPreInit(e);
        }

        private void nextLabel(string eventName)
        {
            string lbl = "" + ++count + " " + eventName + " at " + DateTime.Now.ToLongTimeString() + "";
            System.Web.UI.HtmlControls.HtmlGenericControl c = new HtmlGenericControl("div");
            c.InnerText = lbl;
            Page.Controls.Add(c);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T15:19:18.067

所以事实证明我对 completerequest 有一个根本的误解。CompleteRequest 跳过了 IIS HTTP 管道链的其余部分，但 ASP.NET 页面处理程序事件生命周期完成了运行，因为它只是 HTTP 管道链的一部分，没有任何东西告诉这部分停止。

# asp.net - ASP.NET MVC 远程验证：返回布尔值和字符串

> ID：11006663
> 
> 赞同：1
> 
> 时间：2012-06-13T00:22:59.690
> 
> 标签：asp.net, asp.net-mvc, string, validation

我一直在尝试对用户名登录访问使用 ASP.NET MVC 远程验证来返回字符串和布尔值。如果我只返回一个字符串，它将假定布尔值为 false 并且不允许用户提交表单。有没有一种方法可以同时传入 true 和字符串，例如“[USERNAME] is available！”？

当前方法：

```
public JsonResult isUserAvailable(string username)
    {
        if (Membership.GetUser(username) == null)
        {
            return Json(String.Format(CultureInfo.InvariantCulture, "<strong style='color: green;'>{0} is available!</strong>", 
                username), JsonRequestBehavior.AllowGet);
        }

        else
        {
            return Json(false, JsonRequestBehavior.AllowGet);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:12:56.433

使用 Json 对象发回数据，像这样修改你的 else 块并在客户端使用 JSON

```
 else
    {
       var data = new 
       { 
         result = false, 
         userName = username 
       };
 return Json(data, JsonRequestBehavior.AllowGet);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:09:34.703

正如@Furqan 建议的那样，您返回的数据不是 Json 而是 Html。

我建议你要么返回一个 Json 对象，要么返回一个不同的 ActionResult，也许`ContentResult`. 这篇[博](http://brendan.enrick.com/post/Types-of-ASPNET-MVC-3-Action-Results.aspx)文很好地解释了不同的`ActionResult`类型。

# objective-c - iOS 客户端/服务器实现和“操作正在进行中”错误

> ID：11006673
> 
> 赞同：5
> 
> 时间：2012-06-13T00:24:11.147
> 
> 标签：objective-c, ios, network-programming, client-server, nsstream

## 背景

我一直在通过各种示例代码和经典的*Unix 网络编程*教科书自学套接字和网络编程，同时尝试将这些知识应用到我现在正在开发的应用程序中。我目前正在处理需要简单的客户端-服务器设置的应用程序的一部分。

现在是这样的（嗯，应该是这样的）：

1.  服务器发布自己`NSNetService`并使用创建套接字`CFSocketCreateWithNative()`
2.  客户端找到服务器`NSNetServiceBrowser`
3.  客户端解析发现的服务
4.  服务器从 CFSocket 获得一个回调，它创建一个类 ( `MyConnection`) 的新实例来处理连接。连接的读取和写入流通过`CFStreamCreatePairWithSocket()`.
5.  客户端向服务器发送消息 (@"hi")
6.  服务器将从客户端接收到的数据发送回客户端（这是我的问题所在）
7.  客户端在 UIAlertView 中显示字符串

## 两个问题

1.  当我尝试让服务器将数据发送回客户端时，我收到“正在进行操作”错误，如下面的连接代码中所述。我相信这是因为`NSOutputStream`没有可用空间。处理这个问题的最佳方法是什么？我知道它应该等待`NSStreamEventHasSpaceAvailable`事件，但它似乎没有发生……<br> 编辑：呃……当我收到此错误时，我仅使用 iPhone 模拟器测试应用程序并让它充当服务器和客户，因为我的新公寓还没有互联网：P 使用两个真实设备时似乎不是问题。

2.  是否可以使这个服务器，使得每个连接对象的数据发送和接收不会阻塞其他连接对象的数据发送和接收？每个新的连接对象是否需要在新的运行循环或线程或类似的东西上？我已经浏览了苹果并发文档，但没有任何东西跳出来......目标是尽可能快地向客户端发送回复，无论有多少其他客户端连接到服务器。
    更新：我考虑只对连接进行排队并一次处理一个，而不是允许与该服务器的并发连接，因为需要发送到每个客户端的数据量非常小。这是最好的决定吗？如果队列中有数百个客户端怎么办？再想一想，这可能是个坏主意，因为在快速的本地网络上建立连接需要一两秒钟，而使用蓝牙则需要更长的时间......我希望得到一些关于这个问题的专家建议 :)

## 相关代码

注意：APNetService 和 APNetServiceBrowser 类似于 NSNetService 和 NSNetServiceBrowser

### 服务器代码

```
- (void) startServerForGroup:(NSString *)name
{
  self.groupName = name;

  NSInteger port = [self prepareListeningSocket];

  self.service = [[APNetService alloc] initWithDomain:@"local."
                                                 type:@"_example._tcp." 
                                                 name:self.groupName
                                                 port:port];
  self.service.delegate = self;
  [self.service publish];
}

- (NSInteger) prepareListeningSocket
{
  int     listenfd, err, junk, port;  
  BOOL    success;

  struct sockaddr_in addr;

  port = 0;

  listenfd = socket(AF_INET, SOCK_STREAM, 0);
  success = (listenfd != -1);

  if (success) {
    bzero(&addr, sizeof(addr));  
    addr.sin_len    = sizeof(addr);
    addr.sin_family = AF_INET;
    addr.sin_port   = 0;
    addr.sin_addr.s_addr = INADDR_ANY;
    err = bind(listenfd, (const struct sockaddr *) &addr, sizeof(addr));
    success = (err == 0);
  }
  if (success) {
    err = listen(listenfd, 5);
    success = (err == 0);
  }
  if (success) {
    socklen_t   addrLen;

    addrLen = sizeof(addr);
    err = getsockname(listenfd, (struct sockaddr *) &addr, &addrLen);
    success = (err == 0);

    if (success) {
      assert(addrLen == sizeof(addr));
      port = ntohs(addr.sin_port);
    }
  }
  if (success) {
    CFSocketContext context = { 0,(__bridge void*) self, NULL, NULL, NULL };

    CFSocketRef socket = CFSocketCreateWithNative(
                                                  NULL, 
                                                  listenfd, 
                                                  kCFSocketAcceptCallBack, 
                                                  AcceptCallback, 
                                                  &context
                                                  );
    if (socket) {
      self.listeningSocket = socket;
      CFRelease(socket);
      success = YES;
    }

    if (success) {
      CFRunLoopSourceRef  rls;

      listenfd = -1;

      rls = CFSocketCreateRunLoopSource(NULL, self.listeningSocket, 0);
      assert(rls != NULL);

      CFRunLoopAddSource(CFRunLoopGetCurrent(), rls, kCFRunLoopDefaultMode);

      CFRelease(rls);
    }
  }

  if ( success ) {
    return port;
  } 
  else {
    NSLog(@"FAILED TO START SERVER");

    if (listenfd != -1) {
      junk = close(listenfd);
      assert(junk == 0);
    }
    return -1;
  }
}

#pragma mark - Callback

// Called by CFSocket when someone connects to the listening socket
static void AcceptCallback(CFSocketRef s, CFSocketCallBackType type, CFDataRef address, const void *data, void *info)
{
  MyServer *  obj;

  obj = (__bridge MyServer *) info;

  assert(s == obj->_listeningSocket);

  MyConnection *newCon = [[MyConnection alloc] initWithFileDescriptor:*(int*)data];

  [newCon startReceive];

    //add the new connection object to the servers mutable array of connections
  [obj.connections addObject:newCon];

} 
```

### 连接代码

```
- (void) startReceive
{
  CFReadStreamRef     readStream;
  CFWriteStreamRef    writeStream;

  CFStreamCreatePairWithSocket(NULL, self.fd, &readStream, &writeStream);

  self.inputStream =  (__bridge_transfer NSInputStream *) readStream;
  self.outputStream = (__bridge_transfer NSOutputStream*) writeStream;

  [self.inputStream setProperty:(id)kCFBooleanTrue forKey:(NSString *)kCFStreamPropertyShouldCloseNativeSocket];
  [self.outputStream setProperty:(id)kCFBooleanTrue forKey:(NSString *)kCFStreamPropertyShouldCloseNativeSocket];

  self.inputStream.delegate = self;
  self.outputStream.delegate = self;

  [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
  [self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

  [self.inputStream open];
  [self.outputStream open];
}

#pragma mark - NSStreamDelegate

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
  switch (eventCode) {

    case NSStreamEventHasBytesAvailable: {
      NSInteger       bytesRead;
      uint8_t         buffer[32768];

      bytesRead = [self.inputStream read:buffer maxLength:sizeof(buffer)];
      if (bytesRead == -1)...
      else if (bytesRead == 0)...
      else {
                NSData  *data = [NSData dataWithBytes:buffer length:bytesRead];
                [self didReceiveData:data];
      }
    } break;
    case NSStreamEventHasSpaceAvailable: {
      self.space = YES;
    } break;

    . . .
  }
}

- (void) didReceiveData:(NSData *)data
{
  if (self.space) 
    NSLog(@"SPACE");
  else
    NSLog(@"NO SPACE"); //this gets printed

  NSInteger i = [self.outputStream write:data.bytes maxLength:data.length];

  if (i < 0) {
    printf("%s",strerror(errno)); //"Operation now in progress" error
  }  
} 
```

### 客户代码

```
#pragma mark - APNetServiceBrowserDelegate

- (void) browser:(APNetServiceBrowser *)browser didAddService:(APNetService *)service moreComing:(BOOL)moreComing
{
        //omitting checks that determine which server to connect to, if multiple

    service.delegate = self;
    [service resolveWithTimeout:20]; 
}

#pragma mark - APNetServiceDelegate

- (void) netServiceDidResolveAddress:(APNetService *)service
{    
  NSInputStream   *input; 
  NSOutputStream  *output;

  [service getInputStream:&input outputStream:&output];

  self.inputStream = input;
  self.outputStream = output;

  self.inputStream.delegate = self;
  self.outputStream.delegate = self;

  [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
  [self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

  [self.inputStream open];
  [self.outputStream open];
}

#pragma mark - NSStreamDelegate

- (void) stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    switch (eventCode) {      

    case NSStreamEventHasBytesAvailable: {
      NSInteger       bytesRead;
      uint8_t         buffer[32768];

      bytesRead = [self.inputStream read:buffer maxLength:sizeof(buffer)];

      if (bytesRead == -1) NSLog(@"Error reading data");
      else if (bytesRead == 0) NSLog(@"no bytes read");
      else {
                NSData  *data = [NSData dataWithBytes:buffer length:bytesRead];
                [self didReceiveData:data];
      }
    } break;

    case NSStreamEventHasSpaceAvailable: {
      if (!self.isWaitingForReply) {
        [self sendHelloMessage];
      }
    } break;
        //omitted other NSStreamEvents    
  }
}

- (void) sendHelloMessage
{
  NSData *d = [NSKeyedArchiver archivedDataWithRootObject:@"hi"];

  [self.outputStream write:d.bytes maxLength:d.length];
  self.isWaiting = YES;
}

- (void) didReceiveData:(NSData *)data
{
  NSString  *string = [NSKeyedUnarchiver unarchiveObjectWithData:data];

  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" 
                                                  message:string
                                                 delegate:self
                                        cancelButtonTitle:@"OK"
                                        otherButtonTitles:nil];
  [alert show];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:28:46.427

正如我所看到的，您想要制作一个可以非常快速地处理许多连接的服务器。一个好的起点文档是 c10k 页面：[http](http://www.kegel.com/c10k.html) ://www.kegel.com/c10k.html 。是的，排队可能是个好主意，它消耗的资源比分叉少得多，而且响应速度更快。然而，这也意味着您的计算保持相对较小，以便您仍然能够快速回复。一个好的开始可能是[http://libevent.org/](http://libevent.org/)，检查它是如何做到的，它是为这种用途而设计的。

祝你好运。

# javascript - 在包装集上绑定jQuery点击事件

> ID：11006675
> 
> 赞同：2
> 
> 时间：2012-06-13T00:24:30.750
> 
> 标签：javascript, jquery, binding, click

假设我`<span class='remove-type'>`在一个页面上有几个元素。

在 jQuery document.ready 中，即使我正在调用`$('.remove-type').on('click', removeType);`

`removeType`是本地定义的函数。

出于某种原因， a`removeType(data)`仅在第一次单击任何 .remove-type 跨度时才被调用和执行。随后的点击不会触发功能。这是 jQuery`.on`事件绑定的正确行为吗？

附加信息：我确实删除了生成单击事件的项目的容器，但其他`remove-type`跨度仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:44:13.540

您只是在设置一个单击处理程序，`.on()`就像您当前正在使用它一样。该`on()`功能应该看起来像

```
$(document).on('click', '.remove-type', function()... 
```

# java - 向向量中添加值时抛出 NullPointerexception

> ID：11006676
> 
> 赞同：3
> 
> 时间：2012-06-13T00:24:36.213
> 
> 标签：java, memory-management, vector, nullpointerexception

我正在尝试以字符串的形式为初学者初始化一个具有整数 1 到 n 的向量。

这是我对向量的声明。

```
 Vector<String> candidatesSet,frequentItemSet,mFCandidatesSet,mFSet = new <String>Vector(); 
```

我用来初始化的循环是

```
for(int i=0; i<crows; i++)
        {
           candidatesSet.add(Integer.toString(i+1));
        } 
```

这里我们得到运行时变量 crows 的值。

但它在我向对象添加字符串的行中抛出了 NullpointerException。

我尝试将向量初始化为空

```
 candidatesSet = null; 
```

但它没有工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:34:02.587

首先，类似的事情是错误的：

```
Vector<String> set = new <String>Vector(); 
```

正确的语法是这样的：

```
Vector<String> set = new Vector<String>(); 
```

其次，如果你这样做：

```
Vector<String> set1,set2,set3,set4,set5 = new Vector<String>(); 
```

...只有`set5`将被初始化。每个变量必须独立初始化。你*可以*这样做：

```
Vector<String> set1,set2,set3,set4,set5;
set1 = set2 = set3 = set4 = set5 = new Vector<String>(); 
```

...但是所有变量都会指向同`Vector`一个变量，对一个变量的修改会影响所有其他变量。您必须分别初始化每个变量。

第三，这样做：

```
candidatesSet = null; 
```

...如果`candidatesSet`尚未初始化，则什么也不做，因为非原始实例变量无论如何都被初始化为 null。那是您的问题，您正在调用`.add(String)`一个空对象，这种情况是`NullPointerException`.

解决这些问题将使您的代码正常工作，但还有最后一个问题。`Vector`是一个有点过时的类，它已被 Java Collections API 取代。尝试使用[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)代替`Vector`，如下所示：

```
List<String> candidatesSet = new ArrayList<String>(); 
```

这将使您的代码更高效且不那么陈旧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:26:32.467

尝试

```
Vector<String> candidatesSet = new Vector<String>(); 
```

添加元素之前

# powershell - PowerShell - 为什么要获取日期 -displayhint

> ID：11006677
> 
> 赞同：2
> 
> 时间：2012-06-13T00:24:43.883
> 
> 标签：powershell

为什么在 PowerShell 中，日期格式是“get-date -displayhint”而不是“get-date -display”？我知道“get-date -display”有效，但我不明白“提示”的重要性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:12:08.747

您所看到的是 PowerShell 的快捷方式参数名称的能力。基本上，该命令的形式参数名称是`-DisplayHint`. 之所以`-Display`有效，是因为 PowerShell 将允许您尽可能少地指定参数名称，以消除它与其他参数的歧义。

事实上，您甚至可以指定 just`-di`并且它会起作用，因为没有其他以“Di”开头的参数会发生冲突。但是，您不能将其缩短为，`-d`因为这会与`-Day`参数冲突，并且 PowerShell 将无法确定您打算使用哪个。

额外提示：许多 PowerShell 命令为其参数名称指定短别名。如果您键入`Get-Help <commandname> -Full`，您可以看到为该命令提供的别名。

# java - 为什么变量不存储这个java程序中的值？

> ID：11006680
> 
> 赞同：0
> 
> 时间：2012-06-13T00:25:47.380
> 
> 标签：java, string, variable-assignment

我收到变量可能未初始化的错误。我使用普通的字符串数据类型和 if..else 语句进行决策。这是一个关于向用户发放 5 张随机卡片的程序。我认为，我得到的错误出现在 if else 语句的第一个语句中变量赋值方法是正确的，甚至在其他程序中尝试过，并且在这些程序中有效。有人可以找到其中的错误吗？

```
import java.util.Random;
public class RandomCard 
{
public static void main(String[] args)
{
    int cardNumber;
    int cardSign;
    String sign;
    Random card = new Random();
    for(int counter = 0; counter < 5; counter++)
    {

        cardSign = card.nextInt(4);

        if(cardSign == 0)
        {
            sign = "Spades";
        }

        else if(cardSign == 1)
        {
            sign = "Hearts";
        }

        else if(cardSign == 2)
        {
            sign = "Clubs";
        }

        else if(cardSign == 3)
        {
            sign = "Diamond";
        }

        cardNumber = 1 + card.nextInt(13);
        if(cardNumber>1 && cardNumber<11)
        {
            System.out.print(sign + " ");
            System.out.println(cardNumber);
        }

        else if(cardNumber == 11)
        {
            System.out.print(sign + " ");
            System.out.println("Jack");
        }

        else if(cardNumber == 11)
        {
            System.out.print(sign + " ");
            System.out.println("Jack");
        }

        else if(cardNumber == 12)
        {
            System.out.print(sign + " ");
            System.out.println("Queen");
        }

        else if(cardNumber == 13)
        {
            System.out.print(sign + " ");
            System.out.println("King");
        }

        else if(cardNumber == 1)
        {
            System.out.print(sign + " ");
            System.out.println("ACE");
        }

    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:33:49.290

初始化**String sign=null**或在 else 中的 if 语句末尾提供默认值。

```
if(){
} else if() {
} else {
// default value for sign here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:29:42.760

改变

```
String sign; 
```

至

```
String sign=null; 
```

Java 编译器总是在让您读取/使用该引用之前检查引用是否保证已分配值（甚至为 null）。Dan Spiteri 给了你[一个很好的例子](https://stackoverflow.com/questions/11006680/why-does-the-variable-does-not-store-the-value-in-this-java-program/11006738#11006738) ，如果没有`String sign=null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:40:16.173

这是一个示例设计，您最好窃取，呃模仿：

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T00:32:28.347

总是尝试初始化所有变量。

```
int cardNumber = 0;
int cardSign = 0;
String sign = null; 
```

任何语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T00:35:49.497

局部变量默认没有初始值。因此，您需要先进行初始化，然后才能使用它们。

请注意，Java 中的 String 是不可变的，因此当您分配时`sign = "Spades";`，它基本上是在创建一个新对象。为了做到这一点，它需要有它的初始值，它可以是`""`或`null`。这不是`int`变量的情况`cardNumber`。

# c# - Redis 服务器并连接多个客户端

> ID：11006682
> 
> 赞同：0
> 
> 时间：2012-06-13T00:26:12.887
> 
> 标签：c#, .net, nosql, redis

我有一个在 Windows 2008 机器上运行的 Redis 服务器。我有多个网站，每个网站都使用`BasicRedisClientManager.`此实例在应用程序启动时设置一次并设置到`Application[]`商店中。这样它就可以在所有用户中重复使用。我遇到的问题是一个站点在专用服务器上运行，而其他站点在运行 Redis 服务器的 localhost 上运行。一个是生产，另一个是新工作/演示的测试地点。远程客户端工作得很好，但本地主机客户端不会与服务器通信，并且似乎处于锁定/死机状态。当我运行该站点时，我只会遇到堆栈溢出，并且该站点会自行回收。以下是我所拥有的设置的一些示例代码。我看到有一些关于在客户端之间创建锁的信息，但我不确定这是否是我需要采取的路线。

[http://www.servicestack.net/docs/redis-client/distributed-locking-with-redis](http://www.servicestack.net/docs/redis-client/distributed-locking-with-redis)

示例代码：

```
 protected override void Application_Start(object sender, EventArgs e)
    {
        /*
         * Create basicRedisClientManager for redis.
         */
        var redisHost = ConfigurationManager.AppSettings["RedisHostIp"].ToString();
        BasicRedisClientManager basicRedisClientManager = new BasicRedisClientManager(redisHost);
        Application["BasicRedisClientManager"] = basicRedisClientManager;

     .....
    } 
```

然后在类构造函数中使用

```
 public CacheManager()
    {
        if (Application["BasicRedisClientManager"] != null)
        {
            /*local variable*/
            basicRedisClientManager = (BasicRedisClientManager)Application["BasicRedisClientManager"];
        }
    } 
```

在课堂上使用管理器。

```
 if (basicRedisClientManager != null)
        {
            using (var redisClient = (RedisClient)basicRedisClientManager.GetClient())
            {
                if (!saveToInProcOnly && redisClient != null)
                {
                    using (var redis = redisClient.GetTypedClient<T>())
                    {
                        redis.SetEntry(key, value);
                    }
                }
            }
        } 
```

这个逻辑在所有站点上都是相同的。

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:24:10.757

我不知道`BasicRedisClientManager`，但我建议您使用[BookSleeve](http://code.google.com/p/booksleeve/)客户端库。关于连接重用，答案是不要重用。也就是说，正如 BookSleeve 的作者建议的那样，每次需要时都重新创建连接。

请参阅[此问题](https://stackoverflow.com/questions/8645953/maintaining-an-open-redis-connection-using-booksleeve)和[接受的答案](https://stackoverflow.com/a/8777999/290343)，以了解如何创建防弹 Redis 客户端连接。

# api - LinkedIn 应用程序可以自己执行操作吗？

> ID：11006685
> 
> 赞同：0
> 
> 时间：2012-06-13T00:26:23.013
> 
> 标签：api, rest, linkedin

在 Twitter 上，应用程序可以对其请求进行自签名。在 LinkedIn 中，您似乎必须有一个外部用户才能执行任何操作。我想运行一个不依赖外部用户操作而自行查询的服务。解决这个问题的最佳方法是什么？让您的开发人员用户的凭据来签署请求似乎是最好的选择，但它有点骇人听闻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:18:57.273

正如您所说的正确，与 LinkedIn API 的所有交互都应通过经过身份验证的用户完成。API[使用条款中的](https://developer.linkedin.com/documents/linkedin-apis-terms-use)某些条款也禁止其他人使用您的开发者帐户，例如 1.5(b)。

不幸的是，目前不支持自签名功能。

# html - 创建纯 HTML5 + CSS3 动画“声纳波”图标的最佳方法。

> ID：11006687
> 
> 赞同：2
> 
> 时间：2012-06-13T00:26:36.837
> 
> 标签：html, animation, css, css-transitions

我在这里创建了以下动画图标：

[http://jsfiddle.net/KphgD/9](http://jsfiddle.net/KphgD/9)

有没有人有设计类似图标的经验，或者有什么建议让这个更好，更“现实”？

我愿意使用 javascript 来增加动画，以便每条曲线以增加的速度向外移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:39:57.223

检查这部分动画原理 [https://en.wikipedia.org/wiki/12_basic_principles_of_animation#Follow_through_and_overlapping_action](https://en.wikipedia.org/wiki/12_basic_principles_of_animation#Follow_through_and_overlapping_action)

而不是一次显示全部，重叠各个弧的某些动作。

**编辑**

例如：http: [//jsfiddle.net/efortis/KphgD/7/](http://jsfiddle.net/efortis/KphgD/7/)

```
<span class="pulse1 circ">&#9696;</span>
<span class="pulse2 circ med">&#9696;</span>
<span class="pulse3 circ small">&#9696;</span>
<span class="pulse4 circ tiny">&#9696;</span>
<span class="circ small point">&#8226;</span>

.pulse1 { -webkit-animation: pulsate 1.1s infinite ease-out; }
.pulse2 { -webkit-animation: pulsate .9s infinite ease-out; }
.pulse3 { -webkit-animation: pulsate .7s infinite ease-out; }
.pulse4 { -webkit-animation: pulsate .2s infinite ease-out; } 
```

PD 使用缓动和持续时间来调整它。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:07:57.947

**状态更新：**

***Firefox v14.0.1 无法正确呈现此答案（以及消息中的 jsFiddle）。使用 Firefox v14.0.1 之前的版本或稳定的 v15.0***

* * *

查看您的 jsFiddle，我可以看到 Chrome 正在***放大***原始字体**而不**调整其大小。

我的目标是包含唯一的 CSS 方法来缩放字体大小，但我无法在纯 CSS 中做到这一点。也许**其他人**可以。

然后我的方法采取了不同的方法。也就是说，我更改了您示例中的所有字体大小，因此它们非常大。然后我把所有的东西都`span tags`放在一个包装纸里，让它`div`变得非常小。

最终结果是您的示例的**高清版本**在 Chrome 中运行良好。在字体上看不到更多的像素化边缘。

目前，当网页上有 2 个或更多示例时， **CSS3 动画**会导致稳定版本**Firefox v13的速度变慢。****Chrome**没有这个问题，可以 **毫无**减速地显示***所有***这些！

 *** * *

这是我的 jsFiddles，其中包括**10 个**CSS3 样式示例：

[**用于 Firefox 的jsFiddle**](http://jsfiddle.net/GEUvZ/)（仅启用了 1 个示例）。

[**适用于 Chrome 的jsFiddle**](http://jsfiddle.net/GEUvZ/1/)（所有 10 个示例均已启用）。

**提醒：** Chrome jsFiddle 会导致 Firefox 中的*CPU 峰值，*因为 Firefox 会阻塞过于密集的 CSS3 动画。下一次 Firefox 更新可能会修复该错误。

* * *

**编辑：**对于不同的**缓动风格**，您可以使用任何**三次贝塞尔曲线**。有许多**在线缓动生成器**将提供预设或定制值，例如这里的生成[**器**](http://matthewlein.com/ceaser/)。只需选择一个缓动预设并点击**左键**即可查看。然后，如果您喜欢它，请仅复制**三次贝塞尔曲线**并像这样使用它：

```
.pulse{
    -webkit-animation: pulsate 1.600s infinite cubic-bezier(0.190, 1.000, 0.220, 1.000);
    -moz-animation: pulsate 1.600s infinite cubic-bezier(0.190, 1.000, 0.220, 1.000);
} 
```

只需将`1.600s`持续时间更改为您使用的时间或根据需要进行调整。
单个示例：[**jsFiddle**](http://jsfiddle.net/GEUvZ/7/)**

# javascript - 订购 facebook 好友列表回复

> ID：11006689
> 
> 赞同：0
> 
> 时间：2012-06-13T00:27:18.877
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我列出了 facebook 朋友，所以：

```
FB.api('/me/friends?fields=id,name,updated_time&date_format=U&<?=$access_token?>',
                    {limit:3,
                    function(response){      console.log('Friend name: '+response.data[0].name);
                    }
    ); 
```

但我希望能够自定义（随机首选）订单，我该怎么做？

请注意：[我不想随机化响应](https://stackoverflow.com/questions/2862285/how-do-i-order-the-friends-list-returned-from-the-new-facebook-graph-api)，我想获得随机响应。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:55:36.780

您链接到的 SO 帖子的已接受解决方案的哪一部分是不可接受的？Using[`FB.Data.query`](http://fbdevwiki.com/wiki/FB.Data.query)允许您指定任何您想要的顺序（包括[`ORDER BY rand()`](http://fbdevwiki.com/wiki/FQL)）。

编辑

实际上不知道这是否有效，但你基本上想要这个：

```
FB.api('/fql?q={"all+friends":"SELECT+id,+name,+profile_update_time+FROM+user+WHERE+id+IN+(SELECT+uid2+FROM+friend+WHERE+uid1+=+me())"}&date_format=U&<?=$access_token?>',
  ...
); 
```

重要的部分是 FQL 查询：

```
SELECT id, name, profile_update_time FROM user WHERE id IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

# linq - 动态构建 linq 查询

> ID：11006691
> 
> 赞同：3
> 
> 时间：2012-06-13T00:27:27.090
> 
> 标签：linq

假设我有一个字符串列表，比如

```
list<string> cols = {"id", "name", "position"}. 
```

这个列表是动态生成的，这个列表中的每一个都代表一个数据库表中的一个列名。

我想要做的是动态创建一个 linq 查询，它只返回这些列。

```
var q = from e in employ
        select new {
          id = id,
          name = name,
          position = position
}; 
```

如何根据输入列列表生成这样的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:14:08.810

正如Chocoboboy所说，`System.Linq.Dynamic`会有所帮助。不幸的是，这不包含在 .NET 框架中，但您可以从 Scott Guthrie 的博客下载它。在您的情况下，您需要调用`Select(string selector)`（使用硬编码的列列表或从列表中获取）。可选地，我的示例包括一个动态`Where`子句 ( `Where("salary >= 50")`)：

```
List<string> cols = new List<string>(new [] { "id", "name", "position" });
var employ = new[] { new { id = 1, name = "A", position = "Manager", salary = 100 },
    new { id = 2, name = "B", position = "Dev", salary = 50 },
    new { id = 3, name = "C", position = "Secretary", salary = 25 }
};
string colString = "new (id as id, name as name, position as position)";
//string colString = "new ( " + (from i in cols select i + " as " + i).Aggregate((r, i) => r + ", " + i) + ")";
var q = employ.AsQueryable().Where("salary >= 50").Select(colString);
foreach (dynamic e in q)
    Console.WriteLine(string.Format("{0}, {1}, {2}", e.id, e.name, e.position)); 
```

但是，这种方法在某种程度上违背了 LINQ 强类型查询的目的，所以我会谨慎使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:58:44.317

您可以使用表达式树来构建动态 Linq 查询。这是一个示例：http: [//msdn.microsoft.com/en-us/library/bb882637.aspx](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

# php - PDO fetch 在 PHP 中总是返回 false

> ID：11006692
> 
> 赞同：3
> 
> 时间：2012-06-13T00:27:28.893
> 
> 标签：php, database, pdo

我正在尝试在 PHP 中使用 PDO 运行一个简单的查询。代码非常简单：

```
try {

    $sql_query = "select * from Articles where title=':article'";
    $dbh = get_PDO_connection();
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->prepare($sql_query);
    $stmt->execute( array( ':article' => "MD Example") );
    var_dump($stmt);
    $row = $stmt->fetch();
    //if($row==null)return 'null';
    var_dump($row);
} catch (PDOException $e) {
    print $e->getMessage ();
} 
```

`var_dump($stmt)`总是打印：

```
object(PDOStatement)#3 (1) { ["queryString"]=> string(45) "select * from Articles where title=':article'" } 
```

...无论我投入什么`execute()`，都没有抛出异常。而且，正如标题所述，`fetch()`总是返回 false。您应该知道，如果我将 SQL 查询“硬编码”到字符串中，所有这些都可以正常工作。换句话说，如果我设置`$sql_query`为“select * from Articles where title='MD Example'”，则`fetch()`返回预期结果。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:29:08.733

从占位符周围删除引号：

```
$sql_query = "select * from Articles where title=:article";
//---------------------------------------------^^^^^^^^^^^ 
```

通过使用占位符，您放弃了必须正确引用字符串或不引用数值的责任。这成为 PDO 为您正确转义和引用输入的业务。

通过保留引号而不是使用占位符，PDO 将真正查询列中的值`:article` ，`title`而不是您传递给`execute()`数组的值。

# python - Python 3.2 中 MAC 地址的优雅格式

> ID：11006702
> 
> 赞同：11
> 
> 时间：2012-06-13T00:29:27.957
> 
> 标签：python

我正在寻找一种更优雅的解决方案来用冒号格式化 MAC 地址。我正在使用 Python 3.2。也许是一个花哨的列表理解？

```
s=""
h="00233a990c21"
for i in range(0,12,2):
    s += h[i:i+2] + ":"
s=s[:-1]
print("s=",s) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T00:39:26.113

您的代码很容易转换为理解形式：

```
':'.join(h[i:i+2] for i in range(0,12,2)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-04T11:55:32.427

这不是最短的解决方案，但它接受所有常见类型的 mac 格式作为输入。它还进行一些验证检查。

```
import re

def format_mac(mac: str) -> str:
    mac = re.sub('[.:-]', '', mac).lower()  # remove delimiters and convert to lower case
    mac = ''.join(mac.split())  # remove whitespaces
    assert len(mac) == 12  # length should be now exactly 12 (eg. 008041aefd7e)
    assert mac.isalnum()  # should only contain letters and numbers
    # convert mac in canonical form (eg. 00:80:41:ae:fd:7e)
    mac = ":".join(["%s" % (mac[i:i+2]) for i in range(0, 12, 2)])
    return mac 
```

以下是 mac 地址字符串的列表，以及它们将被视为有效还是无效：

```
'008041aefd7e',  # valid
'00:80:41:ae:fd:7e',  # valid
'00:80:41:AE:FD:7E',  # valid
'00:80:41:aE:Fd:7E',  # valid
'00-80-41-ae-fd-7e',  # valid
'0080.41ae.fd7e',  # valid
'00 : 80 : 41 : ae : fd : 7e',  # valid
'  00:80:41:ae:fd:7e  ',  # valid
'00:80:41:ae:fd:7e\n\t',  # valid

'aa:00:80:41:ae:fd:7e',  # invalid
'0:80:41:ae:fd:7e',  # invalid
'ae:fd:7e',  # invalid
'$$:80:41:ae:fd:7e',  # invalid 
```

所有有效的将以规范形式返回：

```
'00:80:41:ae:fd:7e' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-07T23:22:49.663

```
from netaddr import EUI, mac_unix_expanded
print(EUI('00:01:02:03:04:05', dialect=mac_unix_expanded))
print(EUI('1-2-3-4-5-6', dialect=mac_unix_expanded)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T00:36:51.150

不知道这有多漂亮，但它会满足你的要求：

```
':'.join([h[i:i+2] for i,j in enumerate(h) if not (i%2)]) 
```

给出：

```
'00:23:3a:99:0c:21' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-05T15:56:00.467

不是新的，但我认为仍然是最优雅的：

```
import re
':'.join(re.findall('..', '08002714f616')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T00:39:18.277

这里最简单的解决方案就是使用`str.join()`

```
>>> ":".join(str_grouper(2, "00233a990c21"))
'00:23:3a:99:0c:21' 
```

`grouper()`这里使用文档中配方的修改版本`itertools`：

```
def str_grouper(n, iterable):
     args = [iter(iterable)] * n
     for part in zip(*args): #itertools.izip in 2.x for efficiency.
         yield "".join(part) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T00:44:30.873

好吧，我可能会从一些非常具体的东西开始，因为你知道它是一个 MAC 地址，你知道它的确切大小和格式。

```
print "%s:%s:%s:%s:%s:%s" % (h[0:2], h[2:4], h[4:6], h[6:8], h[8:10], h[10:12]) 
```

但是如果我们创建一个类然后告诉它如何格式化它的字符串，我们可以做得更好。

```
class Mac():
    def __init__(self, mac):
        self.mac = mac
    def __str__(self):
        return "%s:%s:%s:%s:%s:%s" % (
            self.mac[0:2],
            self.mac[2:4],
            self.mac[4:6],
            self.mac[6:8],
            self.mac[8:10],
            self.mac[10:12])

m = Mac("123456789012")
print m 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T01:09:29.247

```
>>> import itertools
>>> h = '00233a990c21'
>>> ':'.join(a+b for a, b in (itertools.izip(
...                              itertools.compress(h, itertools.cycle((1,0))),
...                              itertools.compress(h, itertools.cycle((0,1))))))
>>> '00:23:3a:99:0c:21' 
```

这会赢得最高密度的括号吗？

# ruby-on-rails - 具有管理命名空间的控制器特定资产？

> ID：11006705
> 
> 赞同：2
> 
> 时间：2012-06-13T00:29:44.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个控制器“组织”，既可以作为普通资源使用，也可以在“管理员”下命名。

我需要添加一些仅与组织操作相关的 javascript，它适用于管理命名空间和非管理命名空间。我在指南中读到我应该创建一个文件“organizations.js.coffee”并在我的布局文件中包含这样的内容：

```
<%= javascript_include_tag params[:controller] %> 
```

问题是 params[:controller] 包含 /admin 的 admin 命名空间。

我应该这样做的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:52:56.797

几点。首先，在这种情况下，这应该有效：

```
<%= javascript_include_tag params[:controller].split('/').last %> 
```

但是，如果您在每个页面上都有它，并且一个控制器没有 JS 文件，那么事情就会中断，因此您可能想要这样做：

```
<% if params[:controller].split('/').last == "organization" %>
  <%= javascript_include_tag "organisation" %>
<% end %> 
```

可能值得将其添加为辅助方法，例如：

```
module OrganizationHelper
  def organization_javascript
    javascript_include_tag "organization" if params[:controller].split('/').last == "organization"
  end
end

<%= organization_javascript %> 
```

此外，在较新版本的 Rails 中，您可以`controller_name`使用`params[:controller]`

您可能还想考虑只将 渲染`organization.js`到您的`application.js`（这将在 Rails 3.1 及更高版本的资产管道中自动完成）。如果它包含用户在访问期间可能会点击的 JS，那么减少需要下载的文件数量可能是值得的。

# iphone - xib 文件中的 iOS 自定义视图

> ID：11006707
> 
> 赞同：10
> 
> 时间：2012-06-13T00:29:53.730
> 
> 标签：iphone, ios, ipad, ios5

我通常以编程方式创建我的自定义视图，并让它们也可以通过自定义初始化方法（例如 initWithFrame:SomeParam:OtherParam）以编程方式初始化。是否可以将此类自定义视图与 xib 文件结合使用？也就是说，有一个父 xib 文件，其中包含各种这些自定义视图作为子视图，其中这些子视图可能需要使用不同的 init 方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T06:05:45.203

如果将自定义视图添加到 xib 文件中，则不能使用自定义初始化程序。它们都将使用`initWithCoder`.

通常，您会在从那里调用的通用方法中进行任何设置，或者在`awakeFromNib`.

如果您需要在视图上设置任何源自外部的自定义属性，请在`viewDidLoad`视图控制器中进行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T06:20:47.083

获取视图的 xib 以常规方式初始化并使用参考进行自定义设置。这部分可以像这样放在init方法中-

```
 -(void)initfunction{
        UIView *containerView = [[[NSBundle mainBundle] loadNibNamed:@"myView"  owner:self    options:nil] lastObject];
       containerView.property1 = xyz;//Customization
       containerView.property2= abc;//Customization
       containerView.frame = CGRectMake(x,y,z,p);//Customization
       [rootView addSubview:containerView];

   } 
```

关键是当我们使用我们没有显式初始化的 xib 时，`xib`实用程序函数返回一个初始化的对象（of `UIView`），在获得`UIView`对象后，他/她可以将初始化的对象用作常规对象来进行进一步的自定义更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T05:45:53.683

当然有可能。在 xib 中拖动一个 uiview，而不是在默认视图内。然后制作一个`IBOutlet UIView *myCustomView;`，然后将其与另一个视图连接起来。当你想显示这个视图`[self.view addSubview:myCustomView];`时添加这个作为想要删除它的时候

`[myCustomView removeFromSuperView];`

![在此处输入图像描述](../Images/54866a7ba596c82d6c5f614fb975d9bd.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T08:48:50.533

UINib (iOS) 和 NSNib (OS X) 类在您想要创建 nib 文件内容的多个副本的情况下提供更好的性能。正常的 nib 加载过程包括从磁盘读取 nib 文件，然后实例化它包含的对象。但是，对于 UINib 和 NSNib 类，nib 文件从磁盘读取一次，内容存储在内存中。因为它们在内存中，所以创建连续的对象集需要更少的时间，因为它不需要访问磁盘。

1.  创建单视图 xib 文件：右键单击项目 -> 新建文件 -> 用户界面 -> 视图（例如，您将拥有“MyView.xib”）
2.  使用 Interface Builder 填充视图
3.  将下一个方法添加到您的父组件

    ```
    static UINib *nib = nil;

    - (UIView*)createNewViewFromNib: (NSString *)nibFileName
    {
        if( nib == nil) {
            nib = [UINib nibWithNibName:nibFileName bundle:nil ];
        }

        // Unarchiving objects from the nib. You can do it multiple times to create a number of objects from same nib.
        NSArray*    topLevelObjs = [nib instantiateWithOwner:self options:nil];

        if (topLevelObjs == nil)
        {
            NSLog(@"Warning! Could not load nib file.\n");
            return nil;
        }
        // We have only one view in the nib.
        return [topLevelObjs objectAtIndex:0];
    } 
    ```

4.  使用下一行代码用可重用的 nib 对象实例化您的视图：

    ```
    UIView *item = [self createNewViewFromNib:@"MyView"];
    // [self.view addSubview:item]; 
    ```

# javascript - jquery背景只改变一个轴

> ID：11006709
> 
> 赞同：6
> 
> 时间：2012-06-13T00:30:06.483
> 
> 标签：javascript, jquery, axis, background-position

我认为我的最后一个问题让每个人都不知所措，所以我将简化

我正在尝试仅更改 x 轴的背景位置。默认情况下，如果只定义一个值，另一个默认为`50%`，所以这个函数：

```
function colorChangePiano() {
    var bp = $("background-position").css;
    $("#target").css('background-position', (bp == -1131) ? '-377' : '0');
} 
```

返回背景位置：`0 50%`；

如何修改函数以更改 x 轴但保持 y 轴不变？

***编辑 --> 这是一个有 4 列和 4 行的精灵，所以 y 轴应该保持动态。工作网站在这里：[http](http://www.avalonbyeaw.com) ://www.avalonbyeaw.com点击“完成”。我们让它在现场网站上使用了一些疯狂的复杂脚本，但无论如何我都会把它留在这里，因为我仍然真的很想找到解决这个问题的方法***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:04:28.920

这就是我将如何做到的。

```
$('#target').css('background-position', function(i, backgroundPosition) {
    return backgroundPosition.replace(/\d+px/, '60px');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:38:20.140

将 2 个值添加到`background-position`（如预期的那样）。还将当前位置保存在一个变量中，这样更容易。

```
var pos = -377;
var colorChangePiano = function() {
  if (pos == -377) {
    pos = -1131
  }
  else {
    pos = -377
  }
  $('#target').css({
    'backround-position': pos + 'px 0px' // will result in "Xpx 0px"
  });
} 
```

# vb.net - 使用 .NET 获取当前 IP 连接（如 netstat）

> ID：11006710
> 
> 赞同：1
> 
> 时间：2012-06-13T00:30:07.263
> 
> 标签：vb.net, tcp, udp

我正在尝试在 Visual Basic 中设置一个 Com-view 类型的应用程序，

我希望我的应用程序能够提取我的计算机当前连接到的 IP 地址和进程名称。

所以说如果我在 Skype 通话中，我想运行扫描仪，并提取另一个用户的远程 IP，以及它正在使用的进程（Skype.exe）我在谷歌上搜索过，发现了一些东西通过 cmd 执行此操作但我没有运气，我最接近抓取任何东西的是应用程序中的“此操作需要提升权限”。

# ruby - 在 Ruby 中向集合中添加短字符串很慢

> ID：11006711
> 
> 赞同：5
> 
> 时间：2012-06-13T00:30:21.013
> 
> 标签：ruby, performance, set

我正在尝试使用此 Ruby 代码从我的 utf-8 法语词典文件中提取所有唯一字符。字典为 3.7 MB。出于某种原因，我的体面计算机需要大约半小时才能执行。有任何想法吗？

```
c = Set.new
f = open "dict"
s = f.read
f.close

for i in 0..s.length-1
    c << s[i]
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T00:41:47.260

在对其执行任何计算之前一次性读取整个文件可防止 IO 与计算交错。此外，它会增加内存压力（如果您的内存接近极限，这可能很重要）并大大降低[缓存一致性](http://en.wikipedia.org/wiki/Cache_coherence)。

我编写了以下小脚本，该脚本在我的`/usr/share/dict/words`文件上在 0.3 秒内执行——不到一兆字节，但仍然足够大，有点有趣：

```
$ cat /tmp/set.rb 
#!/usr/bin/ruby

require 'set'

c = Set.new
f = open "/usr/share/dict/words"

f.each_char do |char|
    c << char
end

p c
$ time /tmp/set.rb 
#<Set: {"A", "\n", "'", "s", "B", "M", "C", "T", "H", "I", "D", "S", "O", "L", "P", "W", "Z", "a", "c", "h", "e", "n", "l", "i", "y", "r", "o", "b", "d", "t", "u", "j", "g", "m", "p", "v", "x", "f", "k", "z", "w", "q", "ó", "ü", "á", "ö", "ñ", "E", "F", "R", "U", "N", "G", "K", "é", "ä", "Q", "è", "V", "J", "X", "ç", "ô", "í", "Y", "â", "û", "ê", "å", "Å"}>

real    0m0.341s
user    0m0.340s
sys 0m0.000s 
```

一分钟后你的程序还在执行，我放弃了。

主要区别在于我的使用内置迭代器将少量文件（可能是 4k-16k）读入缓冲区，并在每次迭代时给我一个特定的字符。这将一遍又一遍地重复使用相同的少量内存，并允许 CPU 相对较小的高速缓存行来存储全部数据。

**编辑**

通过一个小测试用例，我能够将速度差异主要与`each_char`vs 字符串子脚本隔离开来。[Jörg 指出字符串下标是一个 O(N) 操作](https://stackoverflow.com/questions/11006711/adding-short-strings-to-a-set-in-ruby-is-slow/11006800#comment14392286_11006800)——因为 UTF-8 字符串不能像人们预期的那样简单地通过乘法来索引，找到第 N 个字符意味着从头开始。因此，您的方法是 O(N^2)，而我的方法是 O(N)，*这*更进一步解释了性能差异。我终于满足于我们找到了核心原因。

# php - 配置使用 Zend 框架构建的网站

> ID：11006722
> 
> 赞同：0
> 
> 时间：2012-06-13T00:31:20.350
> 
> 标签：php, zend-framework

我正在尝试将使用 Zend PHP 框架构建的网站移动到新服务器，但我很难启动和运行它。我最初并没有建立这个网站，而且我以前从未使用过这个框架，所以这对我来说非常混乱。

我收到的错误消息是：

```
Error : Invalid controller specified (~iswlp)
Trace info : #0 /home/iswlp/library/Zend/Controller/Front.php(954):
Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) #1 /home/iswlp/public_html/index.php(80):
Zend_Controller_Front->dispatch() #2 {main} 
```

我尝试从 APPLICATION_PATH 目录 (/home/iswlp/application) 中删除尾部斜杠，但这没有任何区别。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:18:05.280

配置/路由问题 - 要检查的几件事：

显然有几种方法可以安装 Zend，但为了安全起见，大多数人将应用程序和库文件夹放在服务器上的 www/public_html 文件夹之外。这实际上是 Zend 解决问题的方式（或假设如此）。所以这里有一些片段可以帮助你，因为你的一些配置可能已经改变以适应以前的主机（再次假设你的应用程序和库文件是一个级别的深度（即在你的服务器上的公共目录之外）：

**index.php 文件片段：**

```
// Define path to application directory
if (!defined('APPLICATION_PATH')) {    
    define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));
}

// Define the application root
if (!defined('APPLICATION_ROOT')) {    
    define('APPLICATION_ROOT', realpath(dirname(__FILE__) . '/..'));
}

// Ensure library/ is on include_path
set_include_path(    
    APPLICATION_ROOT . '/library' . PATH_SEPARATOR    
    . get_include_path()
); 
```

**htaccess 文件片段**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} \.(js|css|gif|jpg|png|swf)$ [OR]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

如果您没有标准的 Zend 安装，您将不得不编辑 index.php 和 htaccess 文件以适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:12:57.313

问题似乎与路由有关。

我猜你正在通过`mod_userdir`like访问应用程序`http://somedomain.com/~iswlp/foo`，这是正确的吗？

从似乎是什么导致 Zend Framework 关闭的错误，因为您的文档根在任何一种情况下都是相同的，但是当从`domain.com`vs.调用时，您的 baseUrl 是不同的。`anotherdomain.com/~iswlp`

作为一种解决方法，您可以尝试修改 PC 上的主机文件，并查看当您尝试访问该站点时错误是否消失。

尝试这个：

*   确定托管 ZF 应用程序的服务器的 IP 地址。
*   打开系统上的[主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)。
*   添加`1.2.3.4 domain.com`到 hosts 文件，其中 1.2.3.4 是服务器 IP，并且`domain.com`是在 Apache/IIS/OtherServer 中配置的站点的假定域名
*   现在打开浏览器并尝试访问 domain.com

在这种情况下你仍然得到错误吗？

我从未尝试过，但如果 ZF 应用程序将托管在`/~username`文件夹中，则可能必须对应用程序进行小的配置更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:54:57.673

如果`/Users/Tim/Sites/iswlp.com.au/`是您的项目根目录（包含名为`application`、`library`等的文件夹），`APPLICATION_PATH`应设置为：`/Users/Tim/Sites/iswlp.com.au/application/`而不是`/home/iswlp/application/`.

# iphone - 将新时间添加到总时间

> ID：11006724
> 
> 赞同：0
> 
> 时间：2012-06-13T00:31:39.530
> 
> 标签：iphone, ios

我想做的是将玩家在游戏中存活的总时间加起来。所以，每次游戏开始时，我都会启动一个计时器，当玩家死亡时，我会终止计时器。每次发生这种情况时，我都希望将这个新时间加到总生存时间中。这是我的代码：

```
int newTime = [newTimeLabel.text intValue];
int totalTime = [totalTimeLabel.text intValue];
int newTotalTime = newTime + totalTime;
totalTimeLabel.text = [NSString stringWithFormat:@"Total Time: %d",newTotalTime]; 
```

但是，totalTimeLabel.text 只显示新时间，而不是添加到先前总时间的 newTime。我不确定我做错了什么。

我试图实现的一个例子：

> 试验一：
> newTime = 5
> totalTime = 0
> newTotalTime = 5 + 0 = 5
> 
> 试验 2：
> newTime = 7
> totalTime = 5
> newTotalTime = 7 + 5 = 12
> 
> 试验 3：
> newTime = 3
> totalTime = 12
> newTotalTime = 3 + 12 = 15

等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:17:33.327

问题是您正在尝试使用 UI 元素（**Model-View-Controller****中**的View ）来存储您的应用程序状态/数据（**Model** **-View-Controller**中的 Model ）。

 ********您应该使用一些适当类型的数据变量来存储您的总累积时间和您的新时间，并且您应该将它们加在一起并完全独立于 UI ( View** )来跟踪它们。

如果这些值是瞬态的（即只需要在**Controller**的生命周期内维护），那么可以（从实际的角度来看，不是纯**MVC**的）跳过整个**Model**部分，只在你的**控制器**。然后，每当您更新它们时，您还应该通过设置标签来更新**视图。**我现在推荐这种方法。

但是，如果用户关闭应用程序并稍后返回，如果这些值保持不变不是很好吗？在这种情况下，您应该实现一个持久数据**模型**，这些值将存储在那里，以便即使在应用程序关闭后您也可以检索它们。

搜索有关**MVC**设计模式的信息，您会发现它对设计和实现应用程序非常有帮助。它将帮助你避免愚蠢的错误，这些错误会在以后再次咬你:)******

# cocoa-touch - 在 iOS 中拼接音频文件

> ID：11006728
> 
> 赞同：0
> 
> 时间：2012-06-13T00:32:24.087
> 
> 标签：cocoa-touch, audio

我有一堆 .wav 文件，我想按照它们存储在 .wav 文件中的顺序拼接它们`NSMutableArray`。
我认为我可以将`NSURL`音频文件（小的）存储到数组中，然后以某种方式按顺序播放它们。

# jquery - jQuery 在函数中的 promise with each()

> ID：11006732
> 
> 赞同：6
> 
> 时间：2012-06-13T00:32:37.050
> 
> 标签：jquery, function, each, deferred, promise

我正在尝试调用自己的函数并等到它完成。过渡结束后，我想开始下一个功能。请看看我的 jsfiddle [http://jsfiddle.net/hrm6w/](http://jsfiddle.net/hrm6w/)

console.log("upper finished") 应该在 console.log("promise finished") 并且所有动画都结束之后开始。

在每个对象中的所有动画都结束后，我想开始下一个动作（函数）。

我认为 promise() 函数是我所需要的，但我只是没有得到这个工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:05:40.123

玩了一会儿之后，您似乎需要从过渡中返回承诺。我对其进行了一些修改，但结果相同。

这篇文章帮助解释了一些概念：[http ://hermanradtke.com/2011/05/12/managing-multiple-jquery-promises.html](http://hermanradtke.com/2011/05/12/managing-multiple-jquery-promises.html)

演示：http: [//jsfiddle.net/lucuma/hrm6w/5/](http://jsfiddle.net/lucuma/hrm6w/5/)

```
 (function($) {
    //Transition Out
    $.fn.ajaxTransitionOut = function() {

        var $animators = $('.animate', this);
        $animators.each(function() {
            $(this).animate({
            left: 1000,
            opacity: 0
        }, 400);
        console.log('animating');
                        });
        return $animators.promise().done(function() {
            console.log('promise finished');
        });

    };

})(jQuery);

$(document).ready(function() {
    console.log('starting');
    $.when($('#content').ajaxTransitionOut()).done(function() {
        console.log('upper finished');
    });
    console.log('ending');

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:53:19.877

我认为这很简单：

```
(function($) {
    $.fn.ajaxTransitionOut = function() {
        return this.find('.animate').each(function() {
            $(this).animate({
                left: 500,
                opacity: 0
            }, 4000);
        });
    };
})(jQuery);
$.when($('#content').ajaxTransitionOut()).done(function() {
    $('html').css('backgroundColor','#999');
}); 
```

小提琴 - [http://jsfiddle.net/hrm6w/8/](http://jsfiddle.net/hrm6w/7/)

您会看到我更改了常量和终端操作以更好地观察该过程。

我承认我不完全理解为什么会这样，但似乎所有选定元素的复合承诺都隐含在插件返回的 jQuery 对象中（因此可用于`.done()`方法链的下游）。

我希望这只会起作用，因为我们正在处理动画并且 promise 的默认值`type`是 'fx'（请参阅[.promise() 的文档](http://api.jquery.com/promise/)）。

编辑：

您也可以像这样在方法链中删除`.when()`并生成显式承诺：`.promise()`

```
$('#content').ajaxTransitionOut().promise().done(function() {
    $('html').css('backgroundColor','#999');
}); 
```

插件保持不变。

# facebook - 个性化 Facebook 赞按钮

> ID：11006736
> 
> 赞同：0
> 
> 时间：2012-06-13T00:33:11.277
> 
> 标签：facebook, wordpress, facebook-like

我正在 Wordpress 中创建一个应用程序，用户在喜欢视频后下载视频。视频就像帖子。我有 Facebook 喜欢按钮，但如果用户喜欢该帖子，我希望该按钮变为下载。知道我应该做什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:22:40.970

只需将 Facebook Like 按钮与下载按钮放在同一个位置，例如将它们放在一个公共`div`元素中：

```
<div id="like_download_container">
    <div id="fb-like></div>
    <div id="download_button><!-- button code here --></div>
</div> 
```

并将下载按钮的`z-index`值设置为`-1`。然后，将 Javascript 中的事件绑定到 Like 按钮上的单击事件，然后将 z-index 提升到`2`.

使用 jQuery（好吧，即使没有，但 jQuery 让它变得更简单），您甚至可以对其应用漂亮的动画。由于您无法真正为`z-index`更改设置动画（它只会使底部元素在通过第二个`z-index`值时突然出现），因此一个想法是使用不透明度：

```
$('#download_button').css({
    'opacity' : '0',
    'z-index' : '2'
});
$('#download_button').animate('opacity', '1'); 
```

# c# - 如何删除 Facebook 上上传的视频？

> ID：11006737
> 
> 赞同：1
> 
> 时间：2012-06-13T00:33:38.120
> 
> 标签：c#, facebook-graph-api, facebook-c#-sdk

我使用[Facebook SDK](http://csharpsdk.org/)在 Facebook 上上传视频，一切正常，但我找不到任何方法来删除上传的视频？

**我可以通过 API (USERID_VideoID) 删除视频帖子，但视频仍在 Facebook 中，并且可以通过直接 url 访问。那么有什么方法可以通过 API 将视频设为私有吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:59:28.633

据我所知，API 不支持删除视频。通常以编程方式与 facebook 交互是通过 HTTP 请求。您可以尝试向视频对象发送 HTTP DELETE 调用

# r - 如何使用 arima 模拟具体值？

> ID：11006739
> 
> 赞同：0
> 
> 时间：2012-06-13T00:33:54.680
> 
> 标签：r, prediction, forecasting

我们用 acf 和 pcf 分析了一个数据集，并看到了使用 arima 的必要性。Arima 被执行并提供系数。现在我们想用它来预测一个随机值。当我做对时，预测或预测的预测是预期值。但是，我们希望创建正态分布在该预测周围的随机值 - 正如在原始数据中观察到的那样。我们怎样才能轻松应对？

谢谢！最好的，F！

```
> summary(arima_res)
      Length Class  Mode     
coef        4    -none- numeric  
sigma2      1    -none- numeric  
var.coef   16    -none- numeric  
mask        4    -none- logical  
loglik      1    -none- numeric  
aic         1    -none- numeric  
arma        7    -none- numeric  
residuals 852    ts     numeric  
call        3    -none- call     
series      1    -none- character
code        1    -none- numeric  
n.cond      1    -none- numeric  
model      10    -none- list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:16:27.320

使用`forecast`包。然后使用`simulate(fit)`where`fit`是`arima()`or的输出`Arima()`。这是一个简单的例子：

```
library(forecast)
fit <- Arima(USAccDeaths,order=c(0,1,1),seasonal=c(0,1,1))
plot(USAccDeaths,xlim=c(1973,1980),ylim=c(6000,12000))
for(i in 1:10)
  lines(simulate(fit,nsim=24),col="blue") 
```

模拟值的均值等于 生成的点预测`forecast(fit)`。模拟值的百分位数等于以相同方式获得的预测区间。（不完全是，因为这是一个模拟，但渐近。）

# css - 手写笔不适用于有效的 css

> ID：11006740
> 
> 赞同：1
> 
> 时间：2012-06-13T00:33:55.567
> 
> 标签：css, stylus

我使用[手写笔](http://learnboost.github.com/stylus/)的编译原因之一是它可以与手写笔文件中的常规 css 一起使用（因此我可以根据需要进行转换，而不必一次转换所有内容），但这似乎不是真的。以下 .styl 文件：

```
.page-wrap
{
    min-height: 300px;
    font-size: 1.4em;
    line-height: 1;
    min-width: 940px;
    max-width: 1170px;
    margin: 0 auto;
} 
```

编译为此 .css 文件：

```
.page-wrap,
{
  min-height: 300px;
  font-size: 1.4em;
  line-height: 1;
  min-width: 940px;
  max-width: 1170px;
  margin: 0 auto;
} 
```

选择器末尾的多余逗号无效。

手写笔不应该与常规 css 一起使用还是这是一个错误（我使用的是 npm 的最新版本）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:03:32.000

这不是一个真正的错误。将打开的花括号放在与选择器相同的行上，我认为它会消失。

我相信它这样做是因为手写笔还支持编写不带逗号、分号等的代码。因此它理解以没有左大括号结尾的行表示您将在下一行添加另一个选择器，因此它插入一个逗号为你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:10:10.973

我前段时间对此[提出了一个问题，](https://github.com/stylus/stylus/issues/585)[该问题应从 0.45.0 开始修复](https://github.com/stylus/stylus/issues/585#issuecomment-42783900)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T10:17:43.767

```
.page-wrap
{
    min-height: 300px;
    font-size: 1.4em;
    line-height: 1;
    min-width: 940px;
    max-width: 1170px;
    margin: 0 auto;
} 
```

生产

```
.page-wrap {
    min-height: 300px;
    font-size: 1.4em;
    line-height: 1;
    min-width: 940px;
    max-width: 1170px;
    margin: 0 auto;
} 
```

包在我身上。[资源](http://codepen.io/anon/pen/LpBVwJ%20)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T07:57:37.950

手写笔不使用 {} 标签，您不需要使用 {}。例子：

```
.page-wrap,
    min-height: 300px;
    font-size: 1.4em;
    line-height: 1;
    min-width: 940px;
    max-width: 1170px;
    margin: 0 auto; 
```

# asp.net-mvc - .NET 自定义成员资格与。自定义登录/注册：身份验证/授权

> ID：11006741
> 
> 赞同：5
> 
> 时间：2012-06-13T00:34:01.743
> 
> 标签：asp.net-mvc, session, asp.net-membership, authorization

当我创建一个需要注册和登录的站点时，为了快速而不需要很多要求，我将使用具有 [Authorize] 属性的会员资格等等。适用于它的工作。但现在我想要更多的东西。基本上我正在使用 ASP.NET MVC EF CodeFirst 开发一个站点，并希望创建一个用户实体以持久保存到包含更多信息的数据库。注册时所需的此类信息将具有其他属性，例如名字，姓氏，性别，国家/地区等...

我已经尝试阅读实现自定义 MembershipProvider 和 MembershipUser 等...我已经走了这么远，但它最终并没有按照我想要的方式组合在一起。现在，当我使用 PHP 或其他时间使用 ASP.NET 开发站点时，我将创建我的 User 类并为他提供注册页面所需的所有属性，然后将其推送到数据库。然后，当我登录时，我只需获取用户名或电子邮件和密码，然后创建一个会话变量来指示用户是否被授权。

这可以吗？我只是不明白为什么整个会员资格问题比看起来要复杂得多，所以我觉得我错过了这一切的重点。另外，我注意到在 ASP.NET MVC Web 应用程序中，当您通过身份验证时，它会写出这一行......

```
FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false); 
```

那和这有什么区别...

```
Session["username"] = model.UserName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:31:16.827

您是否考虑过简单地为您的应用程序创建一个自定义[IPrinicipal](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.aspx) / [IIdentity](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx)对象并使用属性扩展它们你想从你的“用户”对象？

在 SO 上已经有一些很好的资源涵盖了这个概念，而不是深入细节：[ASP.NET MVC - Set custom IIdentity or IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)

关于您的问题，`Session["username"]`只是一个会话cookie。您将失去 FormsAuthentication 的所有好处。例如，对于表单身份验证，如果用户请求的页面需要经过身份验证的访问并且该用户之前没有登录到该站点，则用户将被重定向到使用表单身份验证配置的登录页面。

`Session["username"]`您需要手动滚动身份验证的各个方面。我强烈建议不要这样做。

# iphone - 如何根据多个属性之一的计数设置谓词

> ID：11006742
> 
> 赞同：1
> 
> 时间：2012-06-13T00:34:02.830
> 
> 标签：iphone, core-data

我正在编写一个 iPhone 应用程序。在我的应用程序中，我的数据库中有一个实体（我们称之为 MusicCategory），它与我的数据库中的另一个实体（我们称之为歌曲）具有一对多关系。

我正在尝试编写一个查询来获取歌曲数量最多的 5 个 MusicCategories。

有人可以给我一些关于如何为这个查询编写谓词的指示吗？？？？

非常感谢您的帮助维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:25:18.760

排序的方法是正确的。您可以将获取请求限制为您需要的前 5 个请求：

```
fetchRequest.sortDescriptors = [NSArray arrayWithObject:
   [NSSortDescriptor sortDescriptorWithKey:@"songs.count" 
                                descending:YES]];
fetchRequest.fetchLimit = 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:39:08.317

您只需要设置一个按歌曲数量排序的排序描述符，而不是使用一些谓词。但这不是有效的，因为它会引发错误。所以你可以添加一个**计数**属性来提高效率。

```
request.sortDescriptors =[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"songs.count" ascending:YES]]; 
```

# javascript - 如何使用数组和 map 函数构建 javascript 对象？

> ID：11006748
> 
> 赞同：17
> 
> 时间：2012-06-13T00:34:50.153
> 
> 标签：javascript

我有一**组通道**，我想将它们转换为**单个对象（channelSettings），****每个通道**都有一个 true / false属性。

我已经使用下面的代码让它工作了，但它看起来很冗长。没有“temp”变量有没有办法做到这一点？如果我能驾驭它，那么我也可以驾驭自执行功能。

```
var channels = ["TV", "Billboard", "Spot TV"];

var channelSettings = function() {
    var temp = {};

    channels.map(function(itm, i, a) {
        var channel = itm.toLowerCase().replace(" ", "");
        temp[channel] = false;
    });

    return temp;
}(); 
```

我想我正试图让 map 函数返回一个带有属性而不是数组的对象。这可能吗？是不是被误导了？建议？

这就是我希望它最终的样子：

```
var channels = ["TV", "Billboard", "Spot TV"];

var channelSettings = channels.map(function(itm, i, a) {
        var channel = itm.toLowerCase().replace(" ", "");
        return ????;
}); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-13T00:40:49.603

改用`.reduce()`函数。

```
var channelSettings = channels.reduce(function(obj, itm) {
        var channel = itm.toLowerCase().replace(" ", "");
        obj[channel] = false;

        return obj;
}, {}); 
```

***演示：http:*** [//jsfiddle.net/MjW9T/](http://jsfiddle.net/MjW9T/)

* * *

第一个参数引用先前返回的项，但第一次迭代除外，它引用 Array 中的第一项或我们作为空对象提供的种子项。

第二个参数引用数组中的当前值。只要我们总是 return `obj`，第一个参数总是那个对象，最终的返回值也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T00:42:30.257

该[`map`](http://es5.github.com/#x15.4.4.19)函数接受一个数组，并返回一个数组。没有其他的。但你可以使用[`reduce`](http://es5.github.com/#x15.4.4.21)：

```
var settings = ["TV", "Billboard", "Spot TV"].reduce(function(obj, item) {
   obj[item.toLowerCase().replace(" ", "")] = false; // probably too concise
   return obj // yay, we can skip a semi-colon here :-P
}, {}); 
```

好吧，“我不是”打败了我，但无论如何：
`map`不仅返回数组，而且只返回与原始数组长度相同的数组。它用于将一个数组的值 1:1 转换为一个新数组。`reduce`旨在“将数组减少为单个值”。因此在这里使用它。

如果您使用直接`for`循环或`forEach`方法向对象添加属性，则确实需要声明该对象。所以，不，你不能`temp`在你的代码中没有（除非你使用`reduce`而不是循环）。

有关 MDN 的更多信息：

1.  地图：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)
2.  减少：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:38:34.380

嗯..看起来像把它包装在这样的函数中就可以了。

```
function toObject(arr) {
  var rv = {};
  for (var i = 0; i < arr.length; ++i)
    if (arr[i] !== undefined) rv[arr[i]] = true;
  return rv;
} 
```

# android - 动态更改 ActionBar 中的图标

> ID：11006749
> 
> 赞同：60
> 
> 时间：2012-06-13T00:35:10.087
> 
> 标签：android, android-actionbar

我有一个`Activity`其中有一个`ActionBar`但我需要`ActionBar`动态更改图标，我有一个*暂停*和一个*播放*按钮，当用户点击它时，我需要用*暂停按钮替换**播放*按钮。我已经搜索并找到了它：

 *```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    if(DEBUG) Log.i("onCreateOptionsMenu()", "onCreateOptionsMenu() -> LogicAnalizerView");
    //menu.add("").setIcon(R.drawable.pause).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.actionbarlogic, menu);
    menu.removeItem(R.id.pauseLogic);

    return true;
} 
```

所以通过这种方式我删除了*暂停*按钮，我也可以添加它，但它只发生在我启动`Activity`和`ActionBar`绘制时。我怎样才能强制重绘`ActionBar`？此外，通过这种方式，整体`ActionBar`被重绘。那正确吗？有什么方法可以只重绘我想要的按钮/图标吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-13T00:55:38.690

在进行膨胀之后，您必须保存对 MenuItem 的引用。所以类似于以下内容：

```
public boolean onCreateOptionsMenu( Menu menu ) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate( R.menu.actionbarlogic, menu );
    playMenu = menu.findItem(R.id.playMenu);
    updatePlayStatus();
    return menu;
}

public void updatePlayStatus() {
    if( playService.isConnected() ) {
        playService.isPlaying() ? playMenu.setIcon(R.drawable.pause) : playMenu.setIcon(R.drawable.play);
    }
} 
```

然后你可以随时参考playMenu。因此，您可以修改该项目，例如您的播放器完成播放并返回播放图标。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-01T16:43:15.400

您可以隐藏不想显示的按钮，而不是删除它们。

例如：

```
private boolean isPlaying;
MenuItem mPlayMenuItem;
MenuItem mPauseMenuItem;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu items for use in the action bar
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.actionbarlogic, menu);

    mPlayMenuItem = menu.findItem(R.id.action_play);
    mPauseMenuItem = menu.findItem(R.id.action_pause);

    return super.onCreateOptionsMenu(menu);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case R.id.action_play:
            isPlaying = true;
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                this.invalidateOptionsMenu();
            }
            return true;
        case R.id.action_pause:
            isPlaying = false;
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                this.invalidateOptionsMenu();
            }
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

 @Override
public boolean onPrepareOptionsMenu (Menu menu) {
    super.onPrepareOptionsMenu(menu);

    if (isPlaying) {
        mPlayMenuItem.setVisible(false); // hide play button
        mPauseMenuItem.setVisible(true); // show the pause button
    } else if (!isPlaying) {
        mPlayMenuItem.setVisible(true); // show play button
        mPauseMenuItem.setVisible(false); // hide the pause button
    }

    return true;
} 
```

只是一个注释，这个：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
     this.invalidateOptionsMenu();
} 
```

需要更新操作栏。在 3.0 设备之后，操作栏不会自动更新。因此，您必须手动告诉它调用“OnPrepareOptionsMenu(Menu)”，以便它通过调用“Activity.invalidateOptionsMenu()”来刷新项目。

希望这可以帮助！

参考： http: [//developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu(android.view.Menu)](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu(android.view.Menu))

[http://developer.android.com/reference/android/support/v4/app/ActivityCompat.html#invalidateOptionsMenu(android.app.Activity)](http://developer.android.com/reference/android/support/v4/app/ActivityCompat.html#invalidateOptionsMenu(android.app.Activity))

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-12T13:33:52.777

```
private Menu mMenu;

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_main_activity, menu);

    // Save the menu reference
    mMenu = menu;
    return super.onCreateOptionsMenu(menu);
}

// For example - Call when you need to change icon
private void setActionIcon(boolean showWithBadge)
{
    MenuItem item = mMenu.findItem(R.id.ITEM_ID);

    if(mMenu != null)
    {
        if(showWithBadge)
        {
            item.setIcon(R.drawable.IC_WITH_BADGE);           
        }
        else 
        {
            item.setIcon(R.drawable.IC_WITHOUT_BADGE);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-23T18:25:22.937

如果您想从菜单中获取第一项，**

> `use menu.getItem(0);`

此代码完美运行：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.my_menu, menu);
       MenuItem m =  menu.getItem(0);
       m.setIcon(R.drawable.your_icon_here);
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-04T05:44:00.987

Override the `onPrepareOptionsMenu` in your activity class and then you can add/ remove or visible/invisible menu items.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-20T17:50:59.800

使用 invalidateOptionsMenu() 方法。

```
private boolean isPlaying;

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.actionbarlogic, menu);
    if (isPlaying) menu.removeItem(R.id.play_button);
    else menu.removeItem(R.id.pause_button);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.play_button:
            // Do what the play button should do here
            isPlaying = true;
            break;

        case R.id.pause_button:
            // Do what the pause button should do here
            isPlaying = false;
            break;
    }
    invalidateOptionsMenu();
    return true;
} 
```*

# python - Python - 检查日期字符串中的字符

> ID：11006750
> 
> 赞同：0
> 
> 时间：2012-06-13T00:35:44.797
> 
> 标签：python, date

我现在对 Python 有点困惑。我想要求用户以特定格式输入日期。但我也想检查输入中是否有两个“/”。例如：MM/DD/YYYY.... 否则我会输出一条错误消息。

这是我到目前为止所拥有的：

```
date = str((raw_input("Please enter a date in the form MM/DD/YYYY: ")))
while date[(2),(5)]!="/":
    date_input=(str(raw_input("Error: Your date must be in the format YYYY/MM/DD including the slashes, try again: "))) 
```

但我很困。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:40:23.690

用于`datetime.strptime`解析日期，它会在格式错误时告诉您：

```
import datetime
d = datetime.datetime.now()
try:
    d.strptime(date_str, "%d/%m/%Y")
except ValueError:
    print "Bad format!" 
```

# objective-c - “无法使用 BAR 类型的右值初始化 FOO 类型的返回对象”是什么意思？

> ID：11006753
> 
> 赞同：4
> 
> 时间：2012-06-13T00:36:08.327
> 
> 标签：objective-c

我认为 'rvalue' 只是*return value*的简写。*初始化返回对象*是什么意思？这是我的主要问题。其余的是我特定情况的背景，但我对一般答案非常感兴趣。

我在看别人的代码：

```
return [p_facebook.facebook handleOpenURL:url]; 
```

从理论上讲，这是调用：

```
- (BOOL)handleOpenURL:(NSURL *)url; 
```

我看到了：`Cannot initialize return object of type 'BOOL' (aka 'signed char') with an rvalue of type 'id'`。我猜这个类可能是在其他地方定义的，我有一个路径问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T00:42:27.807

在这种情况下，`rvalue`不是“返回值”，而是（大致）“右手值”的简写，或出现在赋值或语句右侧的对象。我想你可能会在实现中`-handleOpenURL:`发现它在某些时候返回一个类型的对象`id`，这显然与声明的`BOOL`返回类型不兼容。如果您可以访问 的来源`-handleOpenURL:`，我建议您先检查那里的错误返回。

# iphone - 针对 iPhone iPad 的 CSS 样式表不起作用

> ID：11006754
> 
> 赞同：0
> 
> 时间：2012-06-13T00:36:18.470
> 
> 标签：iphone, css, ipad, stylesheet, media-queries

我只有两周的时间让我的网站在 iPad iPhone 上运行，只需要更改一些边距和一些字体大小。我在网上找到了这个教程，说要添加这个代码：

```
<!--[if !IE]>-->
<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)"  href="css/style_ipad.css" />
<link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" href="css/style_ipad.css" />
<!--<![endif]--> 
```

所以我在我的普通样式表的链接上方添加了这个，并用我的调整上传了 style_ipad.css，但它没有奏效。任何人都知道为什么这不起作用？这是过时了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:39:43.317

它并没有过时，但是由于您说您将其添加到普通样式表*之上*，因此您的样式规则很可能被覆盖了。毕竟，它们是*级联样式表。*

另外我想指出，您`css/style_ipad.css`在两个链接标签中都链接到了同一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:12:03.320

使用“设备宽度”定义媒体查询时，您必须记住它指的是渲染屏幕的实际像素宽度（这在视网膜显示器上会变得很棘手） - 请参阅[http://www.w3中的第 4.3 节.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)。要获得实际宽度，您必须使用像素比率来解释它。

但是您也可以简单地更改媒体查询以检查您的文档输出到的浏览器/视口的宽度。只需删除`device`您的查询部分：

```
<link type="text/css" rel="stylesheet" media="only screen and (max-width: 480px)"  href="css/style_ipad.css" />
<link type="text/css" rel="stylesheet" media="only screen and (min-width: 768px) and (max-width: 1024px)" href="css/style_ipad.css" /> 
```

`device-width`有关和之间区别的更完整定义，请参阅这两个回复`width`：

[移动网络的最大设备宽度和最大宽度有什么区别？](https://stackoverflow.com/questions/6747242/what-is-the-difference-between-max-device-width-and-max-width-for-mobile-web)

[CSS媒体查询中宽度和设备宽度的区别](https://stackoverflow.com/questions/5716066/difference-between-width-and-device-width-in-css-media-queries)

# c# - 在 XML 序列化中重命名类

> ID：11006756
> 
> 赞同：0
> 
> 时间：2012-06-13T00:36:44.347
> 
> 标签：c#, xml

考虑以下 C# 代码：

```
[XmlRoot]
public class A 
{
    [XmlArray]
    public List<B> ArrayOfBItems { get;set; }

}

public class B
{
    [XmlAttribute]
    public String Name { get;set; }
} 
```

通过 XmlSerialzier 运行时，将产生以下内容：

```
<A>
    <B Name="Foo" />
    <B Name="Bar" />
</A> 
```

除了重命名 B 类以更改在 XML 中输出的名称之外，我还能做什么？不允许将 XmlAttribute 添加到类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:06:28.827

```
[XmlRoot]
public class A 
{
    [XmlElement("NewName")]
    public List<B> ArrayOfBItems { get;set; }

} 
```

如果您将 xml 装饰从 XmlArray 更改为 XmlElement，您应该会得到预期的结果。

# database - 违反复合主键和联结表约束

> ID：11006762
> 
> 赞同：0
> 
> 时间：2012-06-13T00:37:31.570
> 
> 标签：database, database-design, database-schema

myTable `id, admitDate, dischargeDate`PK
jxn `id ,code`
代码表 `code, description`

myTable 中还有许多其他字段，而为每条记录设置唯一标识符的唯一方法是拥有 id、admitDate、dischargeDate 这三个值 PK。如果同一个人（相同 ID）被录取两次，则 ID 将重复，但admitDate 和dischargeDates 将不同。我试图将`id`主键的一部分从 myTable 复制到 jxn 表，SSMS 发疯了，说我没有唯一约束。

我意识到这现在行不通，但我想知道在实践中这个问题通常会如何解决？正如我所说，可靠地识别记录的唯一方法是将这三个字段放在一起。多于一次入院/出院的人如何处理？

我是否需要找到违反 PK 唯一约束的人并将其移至`moreThanOneAdmission`表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:47:31.653

您应该能够使用患者 ID 和入院日期（可能加上时间）的复合主键。如果他们尚未出院，您可能不知道出院日期。

如果您收到有关唯一约束的错误，可能是因为您在定义它时遇到了错误。拥有复合主键绝对是合法的。

要将患者入院表与联结表进行完全内部联接，则联结表中的 FK 必须具有由患者入院表中的（所有三个）PK 字段组成的外键。

# html - 表格单元格内的 Div 覆盖错误

> ID：11006764
> 
> 赞同：0
> 
> 时间：2012-06-13T00:37:34.697
> 
> 标签：html, iframe, overlay

我有这个代码：

```
<td width="140">
    <div style="position:relative; width:140; height:600; z-index:1;">
        <img height="100%" width="100%" src="core_rec/web_res/menubg.png" />
    </div>
    <div style="position:relative; z-index:0;">
        <iframe src="iframes/menus/main.html" width="140" id="sidebar" height="600">
        </iframe>
    </div>
</td> 
```

那应该有一个包含图像的背景 div，在它的顶部，在同一个空间中，一个具有透明背景的 iframe，这样我就可以在不重新加载图像的情况下更改 iframe 内容。但是当我尝试显示该代码时，两个 div 是分开的，图像在顶部，然后 iframe 在它下面。我不明白为什么他们没有像他们应该的那样堆叠。

我犹豫要不要做一个绝对的参考，所以如果可能的话，我会尽量让这两个位置都动态到单元格中。是做绝对参考的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:33:28.303

不知道你到底要做什么，但这[是一个使用负数`margin-top`重新定位所有内容](http://jsfiddle.net/dcNd7/)的小提琴。

# internet-explorer - iframe 缩放问题

> ID：11006765
> 
> 赞同：1
> 
> 时间：2012-06-13T00:37:42.927
> 
> 标签：internet-explorer, iframe, zooming

我正在尝试让跨浏览器 css 缩放工作，但我在这里找到的所有东西都不适合我。

这是我所拥有的：

**HTML**

```
<div id="themeframe">
<div class="themeframe-overlay"></div>
<iframe src="/index.php"></iframe>
</div> 
```

**CSS**

```
#themeframe{
position:relative;
width:520px;
height:400px;
margin-top: 20px;
border: none;
overflow: hidden;
}

#themeframe .themeframe-overlay{
position:absolute;
z-index:95;
left:0;top:0;
height:100%;width:100%;
background:#fff;
opacity:0;
filter: alpha(opacity = 0);
}

#themeframe iframe {
width:1040px;
min-height: 800px;
overflow: hidden;
-moz-transform: scale(0.5);
-moz-transform-origin: 0 0;
-o-transform: scale(0.5);
-o-transform-origin: 0 0;
-webkit-transform: scale(0.5);
-webkit-transform-origin: 0 0;
-ms-transform: scale(0.5);
-ms-transform-origin: 0 0;
margin: 0;
padding:0;
border: none;
} 
```

**我想达到什么目的？** 我有一个 520 x 400 的 div，我想用 50% 的缩放版本填充网页。如上所示，我在 IE 中遇到问题，其中 div/iframe 的大小正确，但里面的网页是 100%，而不是 50%。这适用于所有其他浏览器。如果我添加缩放：0.5; 到 iframe css，它在 IE 中修复它，但在 chrome 中破坏它。

我无法让它同时在 IE、Chrome、Safari 和 Firefox 中运行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:30:05.183

找到了答案，这至少对我有用。此答案的一部分是按照[此处找到的步骤使用的。](https://stackoverflow.com/questions/166160/how-can-i-scale-the-content-of-an-iframe)

首先，像这样安排你的**HTML**（我不擅长在这个网站上安排代码）：

```
<div id="themeframe">
    <iframe src="/index.php" id="frame" width="794" height="1550"></iframe >
</div> 
```

然后**CSS**看起来像这样：

```
#themeframe {
    overflow: hidden;
    position: relative;
    width:800px;
    height:850px;
    -ms-zoom: 0.75;
}

#frame {
    position: absolute;
    overflow-x: hidden;
    top: -300px;
    -moz-transform: scale(0.75);
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.75);
    -o-transform-origin: 0 0;
    -webkit-transform: scale(0.75);
    -webkit-transform-origin: 0 0; 
```

我要指出的变化是：

1.  我把它包裹`iframe`在一个`div`叫`themeframe`

2.  我给出了`iframe`一个`id`，所以我们可以在 CSS 中设置它的样式。

3.  我`-ms-zoom`在包装 div 上使用了`themeframe`不在`iframe`. 这是因为 IE 会将整个 iframe 缩放到您设置的`zoom`大小，而不是其中的内容（Chrome 和 Firefox 就是这样做的）。在 CSS中使用也很重要，`-ms-zoom`而不仅仅是`zoom`因为 Chrome 会发疯并注意两者`zoom`，`-webkit`如果你不`ms`区分。

希望这可以帮助。它适用于 Chrome、FF 和 IE8。

# mysql - 将 mysql 数据库从一个 vps 移动到另一个 vps

> ID：11006767
> 
> 赞同：2
> 
> 时间：2012-06-13T00:38:15.877
> 
> 标签：mysql, sql, mysqldump

我正在将大型 wordpress mysql db (1.49gb) 从旧服务器移动到新服务器，我所做的是：

```
mysqldump -u root -p dbname > public_location/db.sql 
```

然后我做了一个：

```
wget http://oldserver/db.sql 
```

我在新服务器上创建了数据库，创建了用户，然后：

```
mysqldump -u root -p dbname < db.sql 
```

它说转储完成，但是为什么新服务器上的数据库仍然是空的？我根本没有看到任何桌子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:40:21.660

而不是`mysqldump`使用输入文件调用新服务器，只需调用`mysql`

```
mysql -u root -p dbname < db.sql 
```

你可以，如果你很勇敢，并且第二个 VPS 的端口 3306 通过 TCP 向旧的 VPS 开放，并且你有一个`root@oldserver`可以执行写入的用户帐户，那么只需一个操作即可：

```
# Pipe the dump directly from the old vps to the new vps:
mysqldump -uroot -p dbname | mysql -h newserver -uroot -p dbname 
```

我不会在 Internet 上尝试它，但我已经在 LAN 上做过几次了。

`--routines`最后，如果您有存储的函数和过程需要随数据库迁移，请不要忘记该参数。没有它，他们不会进入垃圾场。

```
mysqldump --routines -u root -p dbname > public_location/db.sql 
```

# c# - 在 C# 中，如果只有索引号，如何获取索引属性的名称？

> ID：11006770
> 
> 赞同：1
> 
> 时间：2012-06-13T00:38:30.880
> 
> 标签：c#, reflection, properties, litjson

我有一个由 json 映射器函数（使用 LitJson）创建的对象。它包含索引属性。

我可以遍历属性并像这样获取每个属性值

```
for(int i = 0; i < jdata.Count;i++) {
    Console.WriteLine(jdata[i]);
} 
```

我想获取每个属性名称，作为一个字符串，而不是属性值。

我发现的最接近的是这个 [https://stackoverflow.com/questions/1011109/how-do-you-get-the-name-of-the-property](https://stackoverflow.com/questions/1011109/how-do-you-get-the-name-of-the-property)

这在哪里工作

```
string name = ReflectionUtility.GetPropertyName((Sample2 s) => s.Foo); 
```

但这不是（似乎是因为它是索引属性？）

```
string name = ReflectionUtility.GetPropertyName((Sample2 s) => s[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:30:56.723

我发现我必须先将 JsonData 转换为 IDictionary，然后才能访问 Keys 属性。

像这样：

```
JsonData x = getMyData();//however you're getting your JsonData object
var keys = (x as IDictionary).Keys; // you should probably check for null 
foreach(string s in keys)
   Console.WriteLine("Another key: "+s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:43:34.667

我找到了[源代码](http://repo.or.cz/w/litjson.git/blob/HEAD:/src/LitJson/JsonData.cs)。看起来像`JsonData`实现了 IDictionary，所以您应该能够访问该`Keys`属性。

索引器基本上是作为带有索引参数的函数实现的，因此无法使用反射来获取与给定索引关联的“名称”。

# haskell - 有没有更好的方法来用无点表示法表达绝对误差函数？

> ID：11006772
> 
> 赞同：16
> 
> 时间：2012-06-13T00:38:35.193
> 
> 标签：haskell, pointfree

用有针对性的符号表示：

`absoluteError x y = abs (x-y)`

无点表示法中的一个不清楚的例子：

`absoluteError' = curry (abs . uncurry (-))`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-13T06:20:26.687

以下是您可以通过小步骤自己推导出它的方法：

```
absoluteError x y = abs (x-y) = abs ((-) x y) = abs ( ((-) x) y) 
                  = (abs . (-) x) y = ( (abs .) ((-) x) ) y = 
                  = ( (abs .) . (-) ) x y 
```

所以，如果我们得出结论，通过[eta-reduction](http://www.haskell.org/haskellwiki/Eta_conversion)。`f x y = g x y``f = g`

此外，使用[`_B = (.)`](http://en.wikipedia.org/wiki/Combinatory_logic#Combinators_B.2C_C)片刻，

```
(abs .) . (-) = _B (abs .) (-) = _B (_B abs) (-) = (_B . _B) abs (-)
              = ((.) . (.)) abs (-) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-13T00:49:08.877

这里有几种方法。

1.  老式的：`absoluteError = (abs .) . (-)`
2.  使用所谓的“胸部操作员”或“猫头鹰操作员”`absoluteError = ((.) . (.)) abs (-)`
3.  将胸部操作员命名为政治上更正确的名称（到底是什么，同时概括它）

    ```
    (.:) = fmap fmap fmap
    absoluteError = abs .: (-) 
    ```

4.  使用[语义编辑器组合器](http://conal.net/blog/posts/semantic-editor-combinators)：

    ```
    result :: (o1 -> o2) -> (i -> o1) -> (i -> o2)
    result = (.)

    absoluteError = (result . result) abs (-) 
    ```

当然，这些都是一样的伎俩，只是名称不同而已。享受！

# ruby - rails 3：我如何调试@foo.to_xml 抛出 NoMethodError 的原因/位置（未定义的方法 `type' for nil:NilClass）

> ID：11006773
> 
> 赞同：1
> 
> 时间：2012-06-13T00:38:35.860
> 
> 标签：ruby, xml, activerecord

@foo 是两个 activerecord 表之间 LEFT JOIN 的结果，当第二个表中没有匹配的行时，JOIN 的结果是 nil 值。

有趣的是，调用@foo.to_yaml 很好。

调用 @foo.to_json 很好。

但是调用`@foo.to_xml`会引发错误`NoMethodError (undefined method 'type' for nil:NilClass)`

即使我使用 :skip_types，也会抛出相同的错误，例如：即使我使用`@foo.to_xml(:skip_instruct => true, :skip_types => true)`

当某些行在右列中没有匹配的行时，如何使 to_xml 在连接的数据集上正常工作？

JSON 和 YAML 都正确显示了“缺失”的字段名，但没有任何值。只有 to_xml 抛出错误。

# android - 如何在屏幕上拖动图像

> ID：11006775
> 
> 赞同：3
> 
> 时间：2012-06-13T00:38:43.843
> 
> 标签：android

任何人都可以帮助我编写可以在屏幕上拖动的图像的程序吗？你能给我一个示例代码吗？多谢。我怎样才能为它打分。我会很感激你的回应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:22:56.027

```
imageView.setOnLongClickListener(new OnLongClickListener() {

            public boolean onLongClick(View v) {
                modeEdit = false;
                ClipData.Item item = new ClipData.Item((CharSequence) v.getTag());
                String[] mimeTypes = {ClipDescription.MIMETYPE_TEXT_PLAIN};
                ClipData dragData = new ClipData(v.getTag().toString(), mimeTypes, item);

                // Instantiates the drag shadow builder.
                DragShadowBuilder myShadow = new MyDragShadowBuilder(treeBitmap);
                v.startDrag(dragData,  // the data to be dragged
                        myShadow,  // the drag shadow builder
                        treeBitmap,      // no need to use local data
                        0          // flags (not currently used, set to 0)
                );
                return true;
            }
        }); 
```

下面这段代码是设置拖动监听器

```
MyDragEventListener mDragListen = new MyDragEventListener(); 
```

这是拖动监听器

```
protected class MyDragEventListener implements OnDragListener {

        public boolean onDrag(View v, DragEvent event) {
            final int action = event.getAction();

            switch(action) {

                case DragEvent.ACTION_DRAG_STARTED:
                    Log.d(TAG, "FIELD ACTION_DRAG_STARTED");
                    if (event.getClipDescription().hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN)) {
                        v.invalidate();
                        return(true);
                    } 
                    else {
                        return(false);
                    }

                case DragEvent.ACTION_DRAG_ENTERED:
                    Log.d(TAG, "FIELD ACTION_DRAG_ENTERED");
                    treePresentInMyView = true;
                    //Toast.makeText(getApplicationContext(), "Dragged data entered", Toast.LENGTH_LONG).show();
                    v.invalidate();
                    return(true);

                case DragEvent.ACTION_DRAG_LOCATION:
                    Log.d(TAG, "FIELD ACTION_DRAG_LOCATION");
                    positionX = event.getX();
                    positionY = event.getY();
                    layoutParams = v.getLayoutParams();
                    return(true);

                case DragEvent.ACTION_DRAG_EXITED:
                    Log.d(TAG, "FIELD ACTION_DRAG_EXITED");
                    modeEdit = false;
                    treePresentInMyView = false;
                    //Toast.makeText(getApplicationContext(), "Dragged data exited", Toast.LENGTH_LONG).show();
                    v.invalidate();
                    return(true);

                case DragEvent.ACTION_DROP:
                    Log.d(TAG, "FIELD ACTION_DROP");
                    keyOfTree = event.getClipDescription().getLabel().toString();
                    Log.d(TAG, "KEY VALUE = "+keyOfTree);

                    final ImageView view = new ImageView(getApplicationContext());
                    String treeWidth = getResources().getString(R.string.treeWidth);
                    String treeHeight = getResources().getString(R.string.treeHeight);

                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(Integer.parseInt(treeWidth), Integer.parseInt(treeHeight));
                    view.setLayoutParams(params);
                    view.setImageResource(R.drawable.tree1);

                    //to get image width and height:
                    BitmapFactory.Options o = new BitmapFactory.Options();
                    o.inTargetDensity = DisplayMetrics.DENSITY_DEFAULT;
                    Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.tree1, o);
                    int w = bmp.getWidth();
                    int h = bmp.getHeight();

                    Log.d(TAG, "width = " + w + " height = " +h);
                    params.leftMargin = (int) positionX - w;//-w and -h so dragged image placed not at mouse
                    params.topMargin = (int) positionY - h;//    but where actual image is on map

                    view.setVisibility(View.VISIBLE);
                    openField.addView(view);
                    LinearLayout.LayoutParams paramsOpenField = new LinearLayout.LayoutParams(openFieldWidth, openFieldHeight);
                    openField.setLayoutParams(paramsOpenField);

                    try {
                        Thread.sleep(1000);
                    } 
                    catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    v.invalidate();
                    return true;

                case DragEvent.ACTION_DRAG_ENDED:
                    Log.d(TAG, "FIELD ACTION_DRAG_ENDED");
                    v.invalidate();
                    if (event.getResult() & treePresentInMyView) {
                        Log.d(TAG, "(x,y) = ("+positionX+", "+positionY+")");
                        int subSubPlot = 0;
                        if (positionX > openField.measuredWidth/2) { //3 and 4
                            if (positionY > openField.measuredHeight/2) {
                                subSubPlot = 4;
                            }
                            else {
                                subSubPlot = 3;
                            }
                        }
                        else {
                            if (positionY > openField.measuredHeight/2) {
                                subSubPlot = 1;
                            }
                            else {
                                subSubPlot = 2;
                            }
                        }
                        double latitudeOfTree = mValues[0] + (Math.abs(mValues[0] - mValues[2]) / openField.measuredWidth) * positionX;
                        double longitudeOfTree = mValues[1] + (Math.abs(mValues[1] - mValues[3])/ openField.measuredHeight) * positionY;
//                      openField.drawTreeCoordinated(latitudeOfTree, longitudeOfTree, positionX, positionY);

                        return true;
                    } 
                    else {
                        return false;
                    }

                default:
                    Log.e(TAG,"Unknown action type received by OnDragListener.");
                break;
            };
            return false;
        }
    }; 
```

# sql - 使用 Oracle SQL 检索字符串中的某些字符串 - 第 2 部分

> ID：11006777
> 
> 赞同：0
> 
> 时间：2012-06-13T00:38:50.320
> 
> 标签：sql, regex, oracle, plsql

不幸的是，我现在遇到了一些问题，因为我的数据已经根据我开始看到的原始线程发生了变化：

[使用 Oracle SQL 检索字符串中的某些字符串](https://stackoverflow.com/questions/9110399/retrieving-certain-strings-within-a-string-using-oracle-sql)

我的数据现在已更改为：

> member_of = CN=DAaXYZApple-Au, CN=DAaXYZApple-Readonly, CN=aXYZApple-Write, CN=DAaXYZApple-Au-Admin, CN=aTest123_RW, {CN=# XXY22,} CN=aInternet-1

使用我原始帖子中描述的相同类型的技术，我只需要获取包含字符串“aXYZApple”的所有字符串。因此，基于上述内容，以下结果是我所追求的，并且只会显示：

```
aXYZApple-Au
aXYZApple-Readonly
aXYZApple-Write
aXYZApple-Au-Admin 
```

我不确定是否仍需要像我原来的帖子中那样使用 Oracle regexp_substr。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:31:16.617

基于更新数据集的我自己的问题的解决方案如下，这几乎是基于我在原始问题中提供给我的解决方案，即：

```
SELECT regexp_substr(line, 'aXYZApple[^,]*') subtxt
FROM (SELECT regexp_substr(:x, '[^,]*\,', 1, rownum + 1) line
      FROM dual
      CONNECT BY LEVEL <= length(:x) - length(REPLACE(:x, ',', '')))
WHERE line LIKE '%aXYZApple%'; 
```

# regex - 从变量中的值构建的 Perl 正则表达式

> ID：11006781
> 
> 赞同：0
> 
> 时间：2012-06-13T00:39:27.607
> 
> 标签：regex, perl, pattern-matching

给定变量：

```
my $var1 = "fish";
my $var2 = "ocean"; 
```

我的输入字符串可以是**fishin_ocean**或**fishout_ocean**。

如何编写一个 Perl 正则表达式来匹配两个输入字符串，其中正则表达式的部分在`$var1`和中`$var2`？这个（字符串所在的位置`$var3`）不返回上述任何一个字符串：

```
 $var3 =~ /$var1.+?$var2/; 
```

**从OP的答案编辑：**

我认为是最后的特殊方括号导致了问题

```
 my $a = "slash_wideiscan"; my $b = "_mnn3h_reg[0]";
    my @array1 = qw (slash_wideiscanps_mnn3h_reg[0] 
                     slash_wideiscanptlr_mnn3h_reg[0] 
                     slash_wideiscanps_mnn0h_reg);
    for my $element (@array1) {
        if ($element =~ /($a.+?$b)/) {
            print "YES : $element\n";
        } else {
            print "NO : $element\n";
        }
    } 
```

回来的答案是

```
 NO : slash_wideiscanps_mnn3h_reg[0]
    NO : slash_wideiscanptlr_mnn3h_reg[0]
    NO : slash_wideiscanps_mnn0h_reg 
```

我其实想要

```
 YES : slash_wideiscanps_mnn3h_reg[0]
    YES : slash_wideiscanptlr_mnn3h_reg[0]
    NO : slash_wideiscanps_mnn0h_reg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:54:01.817

不太清楚你在找什么，但这里是你的正则表达式：

```
my $fish  = "fish";
my $ocean = "ocean";

for my $word ("fishin_ocean", "fishout_ocean") {
    if ($word =~ /($fish.+?$ocean)/) {  # parens capture to $1
         print "Word $word matches\n";
         print "The matching part is: $1\n";  # $1 contains the captured text
    }
} 
```

[perldoc perlretut](http://perldoc.perl.org/perlretut.html)和[perldoc perlre](http://perldoc.perl.org/perlre.html)中的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:18:34.953

根据您的回答（这必须是对您的问题的更新），使用`\Q\E`以下内容转义正则表达式的每个部分：

```
my $a = "slash_wideiscan"; 
my $b = "_mnn3h_reg[0]";
my @array1 = qw (slash_wideiscanps_mnn3h_reg[0] 
                 slash_wideiscanptlr_mnn3h_reg[0] 
                 slash_wideiscanps_mnn0h_reg);
for my $element (@array1) {
    if ($element =~ /(\Q$a\E.+?\Q$b\E)/) {
               here___^   ^    ^   ^
        print "YES : $element\n";
    } else {
        print "NO : $element\n";
    }
} 
```

**输出：**

```
YES : slash_wideiscanps_mnn3h_reg[0]
YES : slash_wideiscanptlr_mnn3h_reg[0]
NO : slash_wideiscanps_mnn0h_reg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:48:06.583

这应该有效：

```
/fish(in|out)_ocean/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:50:57.807

你的正则表达式很好。问题是您认为正则表达式返回匹配的字符串，但实际上，它只返回 true 或 false（如果匹配或不匹配）。

如果要捕获匹配项，请在要捕获的部分周围使用括号。捕获按 1 美元、2 美元、3 美元等的顺序存储...

```
my ($var1, $var2, $var3) = ("fish", "ocean", "fishin_ocean")

$var3 =~ /($var1)(.+?$var2)/;    # only returns true or false
print $1;                        # prints fish
print $2;                        # prints in_ocean 
```

# ruby - Ruby 中 x.inspect 和 x.to_s 的区别？

> ID：11006785
> 
> 赞同：4
> 
> 时间：2012-06-13T00:40:05.623
> 
> 标签：ruby

> **可能重复：**
> [为什么这个 Ruby 对象有两个 to_s 和 inspect 做同样事情的方法？或者，看起来](https://stackoverflow.com/questions/2625667/why-do-this-ruby-object-have-two-to-s-and-inspect-methods-that-do-the-same-thing)

在 Ruby 中：如果 x 是某个变量，那么使用 x.inspect 和使用 x.to_s 有区别吗？2种方法有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T00:56:24.010

它们通常但并不总是相同。根据以下[文档](http://ruby-doc.org/core-1.9.3/Object.html#method-i-inspect)`Object.inspect()`：

> 如果未覆盖，则使用 to_s 方法生成字符串。

所以默认情况下，它们返回相同的东西，因为`inspect()`调用`to_s()`. 然而，有时，重写做一件事是有意义`to_s()`的，但是当从 irb 检查一个对象时，你想看到更多的细节。因此可以设置它们来做不同的事情。

# c# - 什么是标准输出流？

> ID：11006786
> 
> 赞同：0
> 
> 时间：2012-06-13T00:40:08.470
> 
> 标签：c#, .net, stream, system.diagnostics

我的代码看起来或多或少类似于下面的代码，但它不会从我正在打开的应用程序（记事本）中检索文本。也许我错过了重点。有人可以解释什么是标准输出流，如果我想打开一个应用程序然后检索它显示的文本，它是否真的是我想要使用的？

```
ProcessStartInfo psi = new ProcessStartInfo("notepad.exe", "c:\\test.txt");
psi.RedirectStandardOutput = true;
psi.UseShellExecute = false;

Process p = new Process();
p.StartInfo = psi;
p.Start();

string s = p.StandardOutput.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:46:25.733

来自[维基百科](http://en.wikipedia.org/wiki/Standard_streams)的文章：

> 在计算机编程中，标准流是计算机程序开始执行时与其环境（通常是文本终端）之间预先连接的输入和输出通道。这三个 I/O 连接称为标准输入 (stdin)、标准输出 (stdout) 和标准错误 (stderr)。

正如 Joe 所提到的，写入标准输入和输出的信息通常在控制台应用程序之间链接在一起。Windows 应用程序中显示的文本通常不遵循这种模式，尽管它们确实有 3 个可用的标准流，但它们通常不向它们写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:47:32.520

有三个标准流输入输出和错误。它们主要被控制台程序用来相互发送输入和输出。记事本是一个 gui 程序，标准输出和标准输入的概念并没有真正映射。在这种情况下，一个使用示例是`dir | fndstr hi` 命令 dir 将其输出发送到 fndstr 的标准输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T00:48:36.383

标准输出流主要用于控制台输出。例如，如果在 python 中，你可以

```
print('hello world') 
```

它将打印到标准输出流（也称为标准输出）。

要执行您想做的事情，您需要打开记事本并在参数中包含一个位置，要求用户以某种方式保存文件，然后读取用户保存的文件。

# php - mysqli 导致 courseid 根本找不到

> ID：11006787
> 
> 赞同：0
> 
> 时间：2012-06-13T00:40:12.537
> 
> 标签：php, mysqli

我的代码有问题。当下面的代码是旧的 mysql 代码时，它可以完美运行，因为用户可以在文本框中输入 courseid，如果文本框中的 courseid 与数据库中的 courseid 匹配，它将显示 courseid 和课程名称，否则它不在数据库中，然后它会显示一条消息，指出它找不到课程 ID。

但是由于我尝试将代码从mysql更改为mysqli，然后无论我在文本框中输入的courseid是否正确，它都会提示找不到courseid的消息，这是为什么？

下面是代码（我明明是连接数据库的：

```
 <?    

  $courseid = (isset($_POST['courseid'])) ? $_POST['courseid'] : '';

    ?>

    <h1>CREATING A NEW SESSION</h1>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
         <p>Course ID: <input type="text" name="courseid" /><input id="courseSubmit" type="submit" value="Submit" name="submit" /></p>      <!-- Enter User Id here-->
        </form>        

        <?php
if (isset($_POST['submit'])) {
    $query = "
                 SELECT cm.CourseId, cm.ModuleId, 
                 c.CourseName,
                 m.ModuleName
                 FROM Course c
                 INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
                 JOIN Module m ON cm.ModuleId = m.ModuleId
                 WHERE
                 (c.CourseId = ?)
                 ORDER BY c.CourseName, m.ModuleId
                ";

    $qrystmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $qrystmt->bind_param("ss",$courseid);
    // get result and assign variables (prefix with db)
    $qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

    $num = $qrystmt->num_rows($result = $qrystmt->execute());

    if($num ==0){
        echo "<p>Sorry, No Course was found with this Course ID '$courseid'</p>";
    } else { 

        $dataArray = array();

        while ($row = $qrystmt->fetch()) { 
            $dataArray[$row['CourseId']]['CourseName'] = $row['CourseName']; 
            $dataArray[$row['CourseId']]['Modules'][$row['ModuleId']]['ModuleName'] = $row['ModuleName']; 

$_SESSION['idcourse'] = $row['CourseId'];
$_SESSION['namecourse'] = $row['CourseName'];

    }

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:29:34.463

您对 mysqli 语句不太走运，是吗？这是使用（希望）工作示例修改的代码。您仍然犯了一些错误，我在代码中突出显示了这些错误。请参考您数据库中的 CourseId 列，这是 int 还是 char？

```
<?php
//........
// SESSION / DB Connection        
//........

// Don't do a foreach loop on variables that you can explicitly create
$courseid = (isset($_POST['courseid'])) ? $_POST['courseid'] : '';
$foundResult = false;

if (isset($_POST['submit'])) {
    $query =    "SELECT cm.CourseId, cm.ModuleId, 
                 c.CourseName,
                 m.ModuleName
                 FROM Course c
                 INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
                 JOIN Module m ON cm.ModuleId = m.ModuleId
                 WHERE
                 (c.CourseId = ?)
                 ORDER BY c.CourseName, m.ModuleId
                ";

    $qrystmt=$mysqli->prepare($query);
    // only one 's' as there is only one variable
    $qrystmt->bind_param("s",$courseid);
    // execute query
    $qrystmt->execute(); 
    // get result and assign variables (prefix with db)
    $qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);
    // Store the result (so num_rows can be calculated)
    $qrystmt->store_result();
    // set a bool for results recieved (not really neccessary but to keep with your code)
    $foundResult = ($qrystmt->num_rows > 0) ? true : false;

    // if a result is found process the results
    if ( $foundResult ) {

        // are you expecting more than one course to be retrieved?
        // if so why only one session for a single course?
        $dataArray = array();

        while ( $qrystmt->fetch() ) { 
          // data array
          $dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
          $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
           // session data
          $_SESSION['idcourse'] = $dbCourseId;
          $_SESSION['namecourse'] = $dbCourseName;
        }
    }

    /* 
     * Good practise to free result / close connection if not doing anymore 
     * processing with mysqli - otherwise exclude the below statements
     */
    // Free the stmt result
    $qrystmt->free_result();

    // Close statement
    $qrystmt->close();
}
?>
<html>
<head></head>
<body>
  <?php if ($foundResult == false && $_POST) {
     echo "<p>Sorry, No Course was found with this Course ID " . htmlentities($courseid,ENT_QUOTES,'UTF-8') . "</p>";
    }
  ?>
  <h1>CREATING A NEW SESSION</h1>
  <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <p>Course ID: <input type="text" name="courseid" /><input id="courseSubmit" type="submit" value="Submit" name="submit" /></p>      <!-- Enter User Id here-->
  </form> 
</body>
</html> 
```

# c++ - 计数排序卡在 for 循环中

> ID：11006791
> 
> 赞同：1
> 
> 时间：2012-06-13T00:40:33.473
> 
> 标签：c++, sorting

我正在尝试编写一个计数排序函数，但由于某种原因，它卡在了我的第一个 for 循环中。有人能告诉我我的逻辑有什么问题吗？我是 C++ 新手，所以请解释任何答案，以便我学习。提前致谢！

`maxInt`编辑：只有当我输入小于 130,000时，我才会遇到问题（弹出窗口说“CountSort.exe 已停止工作”） 。如果我输入任何高于它的数字，它就会很好。我要排序的数字列表来自我阅读的外部 .txt 文件。这些数字是：1 4 6 2 34 65 2 3 64 2 12 97 56 45 3 43 23 99 2

```
struct CalcMaxInt
{
    int maxInt;
    CalcMaxInt () : maxInt(0) {}
    void operator () (int i) { if (i > maxInt) maxInt = i; }
};

void countSort(vector<int> &numbers)
{
    CalcMaxInt cmi = std::for_each(numbers.begin(), numbers.end(), CalcMaxInt());
    int maxInt = cmi.maxInt + 1;

    vector <int> temp1(maxInt);
    vector <int> temp2(maxInt);
    int min = 0;

  for (int i = 0; i < numbers.size(); i++)
  {
      temp2[numbers[i]] = temp2[numbers[i]] + 1;
  }

  for (int i = 1; i <= maxInt; i++)
  {
      temp2[i] = temp2[i] + temp2[i - 1];
  }

  for (int i = numbers.size() - 1; i >= 0; i--)
  {
      temp1[temp2[numbers[i]] - 1] = numbers[i];
      temp2[numbers[i]] = temp2[numbers[i]] -1;
  }

   for (int i =0;i<numbers.size();i++)
   {
       numbers[i]=temp1[i];
   }
   return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:44:59.630

我没有寻找算法错误，但是应该调整临时向量的大小并初始化为`0`（这只是为了偏执，默认初始化程序`int`应该是`0`）。

```
vector<int> temp1(maxInt, 0);
vector<int> temp2(maxInt, 0); 
```

修复后，该程序似乎在我的系统上运行，正确排序了一个反向排序的数组。但是，您应该使用更完整的测试用例集进行测试。

由于计数排序的工作方式，`maxInt`参数需要是一个至少比输入数组所保存的最大值大一倍的值。

您可以修改函数以通过向量来定位最大的向量。

```
struct CalcMaxInt {
    int maxInt;
    CalcMaxInt () : maxInt(0) {}
    void operator () (int i) { if (i > maxInt) maxInt = i; }
};

CalcMaxInt cmi = std::for_each(numbers.begin(), numbers.end(), CalcMaxInt());
int maxInt = cmi.maxInt + 1; 
```

然后，您不必将其传递进去。

您可能想要添加一些代码来打印您输入的内容，以便您确定它是您认为应该是的。

# php - 分配数组键并将其值与相同的键相加

> ID：11006797
> 
> 赞同：3
> 
> 时间：2012-06-13T00:40:52.970
> 
> 标签：php, multidimensional-array

我有这样的数组，

```
array(
  [0]=>111 //id
  [1]=>5   //value to ad
  [2]=>3   //value to ad
)
array(
  [0]=>111
  [1]=>3
  [2]=>7   
)
array(
  [0]=>111
  [1]=>2
  [2]=>1   
)
array(
  [0]=>222
  [1]=>5
  [2]=>3   
) 
```

我如何过滤那些结果是每个“id”显示一次的数组，如果它们具有相同的“id”，则添加“要添加的值”。所以结果将是：

```
array(
  [111]=>array(
          [0]=>10
          [1]=>11
         )
  [222]=>array(
          [0]=>5
          [1]=>3
         )
) 
```

答案和建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:45:38.303

您必须使用循环手动执行此操作。像这样的东西应该工作：

```
$result = array();

foreach( $input as $row) {
    $id = array_shift( $row);

    foreach( $row as $key => $value) {

        $result[ $id ][ $key ] = 
            ( isset( $result[ $id ][ $key ]) ? 
                  $result[ $id ][ $key ] + $value : 
                  $value
            );
    }
} 
```

**输出：**

```
array(2) {
  [111]=>
  array(2) {
    [0]=>
    int(10)
    [1]=>
    int(11)
  }
  [222]=>
  array(2) {
    [0]=>
    int(5)
    [1]=>
    int(3)
  }
} 
```

[演示](http://codepad.viper-7.com/4eBIHI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:03:26.863

把事情简单化

```
foreach ($arrays as $array) {

    $final[$array[0]] = array(
        @$final[$array[0]][0] + $array[1],
        @$final[$array[0]][1] + $array[2]
    );
} 
```

[http://codepad.org/lCCXHjKR](http://codepad.org/lCCXHjKR)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T00:55:06.417

# 代码

```
// This is your input.
$Input[] = array(
  0=>111, //id
  1=>5,   //value to ad
  2=>3   //value to ad
);
$Input[] = array(
  0=>111,
  1=>3,
  2=>7   
);
$Input[] = array(
  0=>111,
  1=>2,
  2=>1   
);
$Input[] = array(
  0=>222,
  1=>5,
  2=>3   
);

// This is your output.
$Output = array();
for($i=0; $i<count($Input); $i++)
{
    $id = $Input[$i][0];

    // If key already exists...
    if(array_key_exists($id, $Output))
    {
        // Sum it.
        $Output[$id][0] += $Input[$i][1];
        $Output[$id][1] += $Input[$i][2];
    }
    // If not...
    else
    {
        // Initialize it.
        $Output[$id][0] = $Input[$i][1];
        $Output[$id][1] = $Input[$i][2];
    }
}

// This is your output dumped.
print_r($Output); 
```

# 输出

```
Array
(
    [111] => Array
        (
            [0] => 10
            [1] => 11
        )

    [222] => Array
        (
            [0] => 5
            [1] => 3
        )

) 
```

# 附加说明

关键是使用[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)来检查数组中是否已经存在索引。

# common-lisp - 如何在 common lisp 中获得负随机整数？

> ID：11006798
> 
> 赞同：1
> 
> 时间：2012-06-13T00:40:56.827
> 
> 标签：common-lisp

如何在 common lisp 中获得负随机整数？标准库中有一些功能吗？

---- 更新于 2012/06/15 ---- 也许我没有正确描述我的问题。我真正想要的是得到n和-n之间的随机整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T05:36:08.337

直接应用否定。

```
(- (random x)) 
```

修改后的问题的编辑。这不是一个普通的 lisp 事情，而是一个通用的编程事情。

```
(defun random-n (n)
  (- (random (1+ (* 2 n))) n)) 
```

`random`在[CLHS](http://www.lispworks.com/documentation/HyperSpec/Body/f_random.htm)中继续阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:26:08.920

如果你想要从`-n`到的随机数`n`：

### 编辑了，应该是`2n+1`因为random是从0到n（排除n）

```
(defun my-random (n)
    (- (random (1+ (* 2 n))) n)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:38:52.193

既然这里已经有一个很好的答案，我就再添加一个[有趣的答案](http://i3.kym-cdn.com/photos/images/original/000/287/427/608.jpg)（另外，请注意，它可能比正确答案更有效！）

```
(boole boole-c1 (random (1- n)) 0) 
```

将为您提供您所寻求的！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T00:52:40.357

如您所料，`(- -1 (random n))`, 会给您一个介于 -n 和 -1 之间的随机整数，概率（大约）一致，其中 n 是任意整数。

# php - 在 PHP 的 MVC 框架中对控制器进行身份验证

> ID：11006799
> 
> 赞同：2
> 
> 时间：2012-06-13T00:41:18.260
> 
> 标签：php, model-view-controller, codeigniter

我正在使用 codeigniter 框架，并且正在尝试实现 tankauth 身份验证。它适用于常规页面。在控制器的 __construct 中，我把

```
if (!authenticated) { redirect('auth'); } 
```

在那里，它可以保护控制器中的所有功能。如果用户的凭据超时并且他们尝试加载新页面，这将正常工作，它只是将他们重定向到身份验证页面，以便他们可以再次登录。但是，如果通过 ajax 调用控制器中的函数，我会得到一个无限循环。我假设是因为它正在尝试在页面已加载时发送重定向标头。

当没有登录的人尝试调用该函数时，保护 ajax 调用并将用户重定向到身份验证页面的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:04:37.690

我一般不熟悉tankauth，所以可能有更好的方法，但一般来说，不是从控制器调用重定向，而是需要返回一条消息（例如在JSON中）然后终止脚本，而不是重定向.

发出 Ajax 调用的客户端 Javascript，然后检查响应，如果它表明用户已注销，则使用 javascript 重定向到登录 ( `window.location`)。如果您在通过 Ajax 请求的页面上发送重定向，它不会导致浏览器重定向，Ajax 调用只是跟随重定向，并且 Ajax 调用的结果是您的登录页面返回的任何 HTML。

所以它可能看起来像这样：

```
if (!authenticated) {
    if (is_ajax_call) {
        echo json_encode(array('error' => 'loggedout'));
        exit;
    } else {
        redirect('auth');
    }
} 
```

Javascript 检查响应是否包含`error`密钥，如果是`loggedout`，则应将用户的浏览器重定向到您的登录页面。

# java - Spring JUnit 测试运行器 @ContextConfiguration 只加载单个文件

> ID：11006804
> 
> 赞同：0
> 
> 时间：2012-06-13T00:42:21.863
> 
> 标签：java, spring, junit

我正在使用 bean factory 从测试类中加载一个 spring bean

```
XmlBeanFactory factory = new XmlBeanFactory(new ClassPathResource("my-bean-file.xml"))
MyBean bean = (MyBean) factory.getBean("myBean") 
```

我可以使用 Spring JUnit4TestRunner 加载单个 bean 还是仅用于加载整个应用程序上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:06:55.100

如果你想这样做是因为你的 bean 太昂贵而无法全部加载，你可以声明它们是惰性的，这意味着它们只会在需要时加载。

Spring 文档示例：

```
<bean id="lazy" class="com.foo.ExpensiveToCreateBean" lazy-init="true"/>

<bean name="not.lazy" class="com.foo.AnotherBean"/> 
```

> 但是，当延迟初始化的 bean 是未延迟初始化的单例 bean 的依赖项时，ApplicationContext 会在启动时创建延迟初始化的 bean，因为它必须满足单例的依赖项。延迟初始化的 bean 被注入到没有延迟初始化的其他地方的单例 bean 中。

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lazy-init](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lazy-init)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:01:17.883

它将加载整个应用程序上下文。但是你可以拆分你的 bean 文件（例如分成 DAO、服务层、控制器），并在你的主应用程序中包含每个文件一次。在您的测试中，只需使用您感兴趣的图层即可。

# iphone - 在 xcode 中更改版权“组织”

> ID：11006807
> 
> 赞同：0
> 
> 时间：2012-06-13T00:42:32.020
> 
> 标签：iphone, ios, xcode, organization, copyright-display

我已经尝试了多种方法。

*   默认写入 com.apple.Xcode PBXCustomTemplateMacroDefinitions '{ORGANIZATIONNAME="YourNameHere";}'
*   我还尝试更改项目文档下的“组织”部分。

为什么还是不会变？这意味着每当我制作新项目时，它仍然默认为旧项目。

> // 版权所有 (c) 2012 IWantToChangeThis。版权所有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:03:05.603

还有第三种方法，就是更改通讯录卡中的公司名称，但我猜这不是你的问题。这些方法中的任何一个都会更改您在项目中创建的任何新文件的组织名称，并且不会更改已创建的文件。如果要更改现有文件，可以在整个项目中查找并替换“__MyCompanyName__”。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:00:21.947

如果您谈论的是已经在 App Store 中的应用程序......这可以通过在 Apple 的 iTunes 连接中在线调整元数据来轻松完成。无需重新发布您的二进制文件。

# ruby-on-rails - 如何在 Rails 会话中存储不分青红皂白的对象？

> ID：11006810
> 
> 赞同：1
> 
> 时间：2012-06-13T00:43:00.990
> 
> 标签：ruby-on-rails, session

我想在 Rails 会话中存储不可编组的对象。特别是[https://github.com/toland/patron/blob/master/lib/patron/session.rb](https://github.com/toland/patron/blob/master/lib/patron/session.rb)对象，但我想要一个适用于任何 ruby​​ 对象的解决方案。

我不关心对象大小、安全性、前向兼容性、速度。我不关心使用多台服务器和内存空间可访问性，总会有一台服务器。我不想为会话中可能结束的每个对象编写一个序列化程序。

缓存方案会是更好的选择吗？如果是这样，我将如何为会话实施一个？这些不是 ActiveRecord 对象，所以不要告诉我存储 id 并查找它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:03:06.030

相当简单，您不能在会话中存储任何对象，只能存储可以轻松编组和解组的对象。一个非常常见的例子是 IO/File 对象，如果不使用专门的序列化器/反序列化器，就无法编组这些对象。

如果你解释你想要什么而不是在你的问题中定义你想要它的方式，它可能**会**更**简单**。

# html - HTML5 样板：元视口和宽度=设备宽度

> ID：11006812
> 
> 赞同：41
> 
> 时间：2012-06-13T00:43:27.923
> 
> 标签：html, viewport, html5boilerplate

我正在建立一个自适应/响应式网站。

关于最近对 HTML5BP 的更改：

“[移动/iOS css 修订版](http://h5bp.com/viewport)”

我已经开始使用：

```
<meta name="viewport" content="width=device-width"> 
```

...我的 CSS 中有这个：

```
html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
} 
```

包括在内时`initial-scale=1`，从垂直旋转到水平（在 iPad/iPhone 上）导致布局从 2 列（例如）变为 3 列（由于 meida 查询，`initial-scale=1`以及[针对视口缩放错误的 JS 修复](https://gist.github.com/901295)）。

**总而言之**，在横向模式下，这会缩放页面：

```
<meta name="viewport" content="width=device-width"> 
```

...这不会：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

***注意：****在 iPad/iPhone 上查看**[HTML5BP 网站](http://html5boilerplate.com/)**时，您可以看到这种缩放效果。*

我的问题：

1.  这是否成为新标准（即在横向模式下缩放）？
2.  我花了很长时间向我的同事和老板解释这种变化......他们习惯于在水平模式下看到不同的布局；现在页面缩放并且布局保持不变（除了它更大）。关于如何向无知的群众（其中可能包括我）解释这一点的任何提示？

* * *

@robertc：谢谢！这很有帮助。

我实际上喜欢**没有**; `initial-scale=1`习惯于看到布局变化而不是缩放的是我的同事。我敢肯定我会*被迫*添加`initial-scale=1`只是为了取悦所有人（因为**不**缩放，看到布局变化，是他们习惯看到的）。

[我刚刚注意到github 上](https://github.com/h5bp/html5-boilerplate/blob/master/index.html)的 HTML5BP index.html和[网站](http://html5boilerplate.com/)正在使用`<meta name="viewport" content="width=device-width">`；对我来说，这是放弃的充分理由，但是当我试图向“非极客”解释[这些事情](https://github.com/h5bp/html5-boilerplate/issues/37)`initial-scale=1`时，我会扬起眉毛。:D

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-13T13:31:51.273

这不是一个新标准，它一直是 AFAIK 的工作方式。如果将宽度设置为固定数量的像素，则将纵向旋转为横向只会更改比例，因为虚拟像素的数量保持不变。我猜测添加`initial-scale=1`会在您切换时阻止缩放 - 也就是说，您的页面的缩放因子不会随着设备的旋转而改变。如果您最初以横向而不是纵向加载页面，该页面会是什么样子？

我建议如果你想要你指定时得到的行为`initial-scale=1`，然后指定`initial-scale=1`. HTML5 BoilerPlate 是您*应该*根据自己的要求进行修改的东西。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T06:22:57.870

Apple [有点] 清楚地描述了[这里](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)的视口行为。

iOS 设备中的 device-width 和 device-height 主要是指纵向模式下的屏幕尺寸。如果将视口宽度设置为设备宽度，则与将其设置为*常量值*相同。因此，当屏幕的物理宽度随着纵横比的变化而变化时，浏览器会将您输入的*恒定*尺寸拉伸到横向模式下的屏幕宽度。这种行为既不对也不对，就是这样。

Apple 建议`width=device-width`为平台量身定制应用程序，因此这肯定是“Apple”的做法：

> 如果您正在专门为 iOS 设计 Web 应用程序，那么推荐的网页大小是 iOS 上可见区域的大小。Apple 建议您将宽度设置为 device-width，以便纵向缩放为 1.0，并且当用户更改为横向时不会调整视口大小。[IE。视口保留纵向设备宽度，但会缩放或拉伸以适应横向宽度]

就个人而言，我更喜欢没有绝对设备宽度设置方法的 initial-scale=1.0，因为它使视口始终填满设备屏幕而不会拉伸。Apple 也认为此有效标记：

> 图 3-14 显示了 iPhone 上初始比例设置为 1.0 时的相同网页。iOS 上的 Safari 会推断宽度和高度以适应可见区域中的网页。视口宽度在纵向设置为设备宽度，在横向设置为设备高度。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-24T16:49:44.467

**添加一点更新：**这仍然是草稿形式，但绝对值得研究。还有一个支持 IE 10 的前缀版本。`initial-scale:1;`通过使用 CSS 而不是 HTML，它通过应用to`zoom:1;`和为, , &提供`min`/`max`选项来消除您所说的很多混淆，这进一步增加了需要时的调整范围。`width``height``zoom`

`extend-to-zoom`救援！（[http://dev.w3.org/csswg/css-device-adapt/#lsquoextend-to-zoomrsquo](http://dev.w3.org/csswg/css-device-adapt/#lsquoextend-to-zoomrsquo)）

`<meta name="viewport" content="initial-scale=1.0">`翻译为……

```
@viewport{
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport{
  width: extend-to-zoom; 
  zoom: 1.0;
} 
```

`<meta name="viewport" content="width:device-width,initial-scale=1.0">`翻译成…

```
@viewport{
  zoom: 1.0;
  width: device-width; /* = 100vw */
}
@-ms-viewport{
  width: device-width;
  zoom: 1.0;
} 
```

注：`width:extend-to-zoom 100%;`等于`width:device-width;`

[http://dev.w3.org/csswg/css-device-adapt/](http://dev.w3.org/csswg/css-device-adapt/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-08T22:10:57.910

我发现[Mozilla 的视口解释](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)最详细、最有帮助。这是一段摘录：

> width 属性控制视口的大小。它可以设置为特定数量的像素，例如`width=600`或设置为特殊值 device-width 值，它是以 CSS 像素为单位的屏幕宽度，比例为 100%。（有对应的`height`和`device-height`值，这对于具有根据视口高度改变大小或位置的元素的页面可能很有用。）
> 
> 该`initial-scale`属性控制页面首次加载时的缩放级别。、`maximum-scale`和属性控制允许用户放大或缩小页面的`minimum-scale`方式`user-scalable`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-24T21:07:55.667

你试过这个吗？

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# objective-c - 关闭拆分视图弹出框控制器

> ID：11006814
> 
> 赞同：0
> 
> 时间：2012-06-13T00:44:04.513
> 
> 标签：objective-c, ios, uinavigationcontroller, uitabbarcontroller, uisplitviewcontroller

我有一个 UISplitViewController，主视图设置如下：

```
UITabBarController
  Tab1:
    UINavigationController -> UIViewController -> UIViewController
  Tab2:
    UINavigationController -> UIViewController 
```

每个 UIViewController 都是一个表格视图，当用户在最后一个中选择一行时，详细视图中会显示一个图像，其中包含一个 UIScrollView。

选项卡栏控制器是 UISplitViewControllerDelegate 并处理在滚动视图顶部的工具栏上放置按钮。

问题是，我想添加代码以在用户做出选择时关闭弹出框。当按钮上升时，指向弹出框的指针必须保存在选项卡栏控制器中，然后在用户做出最终选择时用于关闭弹出框几个视图控制器。视图控制器似乎没有任何方法需要该指针来获取它，而无需做一些像将它存储在 App Delegate 中这样的粗俗操作。

我没有看到其他人问这个问题，这让我相信我再次忽略了一些简单的事情。请赐教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:21:04.973

您可以创建一个单例类来跟踪您的弹出框状态，然后将其平等且轻松地提供给所有类。这样，它可以很容易地从任何代码更新和访问，而不必直接让应用程序代理负担过重，即使这基本上是相同的想法，但在它自己的单例中更简洁一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T00:47:13.770

听起来您的标签栏控制器已经是 的子类`UITabBarController`，这意味着您已经在其中获得了一些自定义代码。我建议标签栏控制器是弹出框的主要所有者，表格视图控制器有责任简单地通知标签栏控制器已进行选择。标签栏控制器可以通过关闭弹出框来响应该消息。您可以利用`UIViewController`已经具有访问包含给定控制器的选项卡栏控制器的方法这一事实。

所以它看起来像这样：

```
@interface MyTabBarController : UITabBarController
- (void)itemWasSelected;
@end

@implementation MyTabBarController {
  UIPopoverController *popover;
}

- (void)itemWasSelected {
  [popover dismissPopoverControllerAnimated:YES];
}
@end

//////////////

@implementation TableController

- (void)tableView:(UITableView *)tv didSelectRowAtIndexPath:(NSIndexPath *)path {
  // Do whatever else you want to do
  MyTabBarController *tabController = (MyTabBarController *)self.tabBarController;
  [tabController itemWasSelected];
} 
```

使用这个解决方案，表格控制器不必知道任何关于弹出框的信息；它只需要知道它将在 a 中呈现`MyTabBarController`，这对它来说似乎是一件合理的事情。

# c# - 向 Firefox 发送纯文本

> ID：11006817
> 
> 赞同：1
> 
> 时间：2012-06-13T00:44:18.370
> 
> 标签：c#, firefox, temporary-files

关于在 Firefox 中查看文本，我有一个非常直接的问题。我的应用程序正在生成一些我需要在 Firefox 中查看的文本。如果我保存一个 .txt 文件并在 Firefox 中打开它，浏览器的其中一个插件就能够利用该文本并执行它需要执行的操作。

我一直在通过创建一个临时文件，将文本写入其中，然后在 Firefox 中打开该文件来完成此操作。问题是，一旦它提供给 Firefox，我需要删除该文件，所以我没有数百个这样的文件。我正在使用临时文件方法，因为我找不到有关能够在浏览器的参数中仅传递一些直接文本的信息。

无论如何，这就是我现在所拥有的，您可以看到我`File.Delete`实际上在 Firefox 可以访问之前删除了该文件。如果我更慢地单步执行代码，那很好。

有任何想法吗？

```
try
{
   string fileName = Path.GetTempFileName();
   FileInfo fileInfo = new FileInfo(fileName);
   fileInfo.Attributes = FileAttributes.Temporary;

   string writetext = "text I need in a Firefox page";
   File.WriteAllText(fileName, writetext);

   ProcessStartInfo startInfo = new ProcessStartInfo();
   startInfo.FileName = "firefox.EXE";
   startInfo.Arguments = fileName;
   Process.Start(startInfo);

   if (File.Exists(fileName))
     {
         File.Delete(fileName);
     }

   }
   catch (SystemException ex)
   {
     MessageBox.Show("An error occured: " + ex.Message);
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:56:07.253

或者您可以改用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，例如`firefox.exe "data:text/plain,Lorem ipsum dolor sit amet"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:57:37.253

我会在用户 TEMP 文件夹中创建特定于应用程序的子文件夹并将文件存储在那里。

这样做我会假设除了我之外没有其他人会写入该文件夹。

每次`Process.Start`运行代码时，都需要使用过滤器“文件创建时间超过 30 分钟”从该文件夹中删除所有文件（值可以不同）。

在最坏的情况下，该文件夹中会有一些文件，但文件数量不会增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T01:02:09.927

您可以在这里采取几种方法。最危险的方法是打电话`Thread.Sleep( 5000 )`并希望有足够的时间让 Firefox 有足够的时间在你去删除文件之前读取文件。但是，在一个非常慢的系统上，这可能还不够。

更好的方法是等到进程退出后再删除文件：

```
var p = Process.Start( startInfo );
p.WaitForExit();
if( File.Exists( fileName ) ) {
    File.Delete( fileName );
} 
```

当然，这会阻止您的调用程序，直到 Firefox 退出。还有另一种选择，那就是等待`Exited`事件：

```
var p = Process.Start( startInfo );
p.Exited += FirefoxExited;

// ...

void FirefoxExited( object sender, EventArgs e ) {
    if( File.Exists( fileName ) )
        File.Delete( fileName );
} 
```

# ruby-on-rails - 升级到 rails 3 和acts_as_authenticated

> ID：11006822
> 
> 赞同：1
> 
> 时间：2012-06-13T00:45:26.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication

嗨，我正在尝试将应用程序升级到用 Rails 2.3.5 编写的 Rails 3，我面临的最大挑战之一是插件acts_as_authenticated。

我想知道是否有从acts_as_authenticated 迁移到简单自定义身份验证的教程或步骤。

我的应用程序需要非常基本的身份验证。我看到 railscast 从头开始​​编写身份验证，但没有帮助

最大的挑战是插件编写的 current_user 方法。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T00:48:40.997

插件acts_as_authenticated 现在已弃用，并已替换为[restful-authentication](http://github.com/technoweenie/restful-authentication/tree/master)。

你应该安装这个插件，或者使用像[Devise](https://github.com/plataformatec/devise)这样的新插件。

这两个都包含 current_user 方法，与您习惯的方式相同。

act_as_authenticated 和 restful-authentication 表之间的唯一区别是后者有一个 name 列。如果您的数据库已经有其中之一，那么您无需更改任何内容。否则添加迁移：

```
add_column :users, :name, :string, :limit => 100, :default => '', :null => true 
```

# seo - 网站地图 / RSS / Atom, SEO

> ID：11006823
> 
> 赞同：0
> 
> 时间：2012-06-13T00:45:30.537
> 
> 标签：seo, rss, sitemap, feed, atom-feed

所以，我正要为我的站点制作一个常规的 sitemap.xml，然后我看到 Google 和 Bing 都接受 Atom 和 RSS 作为站点地图。

我的网站是一个论坛，所以会非常频繁地创建新页面。

与使用常规 sitemap.xml 相比，使用 RSS/Atom 提要会导致新页面被更快地编入索引吗？
一种方法与另一种方法相比有哪些 SEO 优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:47:47.523

站点地图更好，因为它们告诉搜索引擎您的*所有*内容，而不仅仅是 RSS 和 Atom 提要限制的 X 数量的新线程。此外，它们还提供额外的信息，例如重要性和 RSS 和 Atom 不提供的其他项目。

# maps - PHP 将 Exif GPS 数据转换为 Google 友好值

> ID：11006827
> 
> 赞同：4
> 
> 时间：2012-06-13T00:45:57.777
> 
> 标签：maps, exif

我正在尝试将 Exif 经度和纬度数据转换为 Google 友好的十进制值。我已经阅读了很多教程，但似乎没有什么对我有用。我可能完全错了。

我成功获取Exif数据如下：

$exif_data = exif_read_data($path . '/user/images/4.jpg');

```
$egeoLong = $exif_data['GPSLongitude'];
$egeoLat = $exif_data['GPSLatitude'];
$egeoLongR = $exif_data['GPSLongitudeRef'];
$egeoLatR = $exif_data['GPSLatitudeRef']; 
```

从那里我最终得到以下数组的值：

```
deg Long: 118/1
min Long: 2147/100
sec Long: 0/1
Longitude Ref: W

deg Lat: 34/1
min Lat: 433/100
sec Lat: 0/1
Latitude Ref: N 
```

我通过这个函数运行它们以获得十进制值（我在 Stackoverflow 上得到了这个函数）。

```
$geoLong = gpsDecimal($egeoLong[0], $egeoLong[1], $egeoLong[2], $egeoLongR);
$geoLat = gpsDecimal($egeoLat[0], $egeoLat[1], $egeoLat[2], $egeoLatR);

function gpsDecimal($deg, $min, $sec, $hemi) {
    $d = $deg+((($min*60)+($sec))/3600);
    return ($hemi=='S' || $hemi=='W') ? $d*=-1 : $d;
} 
```

它返回以下内容......将坐标放在海洋中间......不是我拍照的地方。

纬度：41.216666666667 经度：-153.78333333333

谁能告诉我我做错了什么，或者更好的方法来实现这一点。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:17:30.043

我找到了相同的公式，它也对我不起作用。我终于想通了，对我有用的是：

```
function toDecimal($deg, $min, $sec, $hem) 
{
    $d = $deg + ((($min/60) + ($sec/3600))/100);
    return ($hem=='S' || $hem=='W') ? $d*=-1 : $d;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T18:59:17.593

我发现最好的近似是（基于谷歌地图翻译的坐标）

```
$deg + ($min/60) + ($sec/36000000) 
```

# python - 求和可能性，一个循环

> ID：11006829
> 
> 赞同：0
> 
> 时间：2012-06-13T00:46:28.820
> 
> 标签：python

早些时候，我有很多出色的程序员帮助我完成一个功能。但是，讲师希望它在一个循环中，并且所有工作解决方案都使用多个循环。

我写了一个几乎可以解决问题的程序。您必须使用函数 has_key 来查看该特定键是否存在，而不是使用循环来比较所有值。答案将使您无需遍历字典以查找匹配值，因为您只需知道它们是否匹配。同样，charCount 只是一个函数，它将自身的常量输入字典并返回字典。

```
def sumPair(theList, n):
    for a, b in level5.charCount(theList).iteritems():    
        x = n - a     
        if level5.charCount(theList).get(a):
            if a == x:
                if b > 1: #this checks that the frequency of the number is greater then one so the program wouldn't try to multiply a single possibility by itself and use it (example is 6+6=12\. there could be a single 6 but it will return 6+6
                    return a, x
            else:
                if level5.charCount(theList).get(a) != x:
                    return a, x           
print sumPair([6,3,8,3,2,8,3,2], 9) 
```

我只需要通过查看当前元素是否存在于元素列表中来使此代码无需迭代即可找到总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:49:41.893

您可以使用[collections.Counter](http://docs.python.org/library/collections.html?highlight=counter#collections.Counter)函数代替`level5.charCount`

而且我不知道你为什么需要检查`if level5.charCount(theList).get(a):`。我认为没有必要。`a`是您从`level5.charCount(theList)`

所以我简化了你的代码：

```
form collections import Counter

def sumPair(the_list, n):
    for a, b in Counter(the_list).iteritems():
        x = n - a
        if a == x and b >1:
            return a, x
        if a != x and b != x:
            return a, x

print sumPair([6, 3, 8, 3, 2, 8, 3, 2], 9)   #output>>> (8, 1) 
```

也可以像这样使用[列表理解](http://www.python.org/dev/peps/pep-0202/)：

```
>>>result = [(a, n-a) for a, b in Counter(the_list).iteritems() if a==n-a and b>1 or (a != n-a and b != n-a)]
>>>print result
[(8, 1), (2, 7), (3, 6), (6, 3)]
>>>print result[0]   #this is the result you want
(8, 1) 
```

# mysql - MySQL DATE_SUB 生日选择语句

> ID：11006831
> 
> 赞同：1
> 
> 时间：2012-06-13T00:47:19.633
> 
> 标签：mysql, date, select

我正在编写一个脚本来从数据库中选择所有生日提前 7 天的人并向他们发送电子邮件

我可以选择今天所有生日的人，但我需要减去 7 天，这样我才能提前发送电子邮件。我尝试了几种用法，但都`Date_Sub`没有成功。

这是我现在使用的代码。

```
select
  name, 
  email, 
  birthday 
from members 
where 
  month(birthday) = month(now()) 
  and dayofmonth(birthday) = dayofmonth(now()); 
```

如何从日期中减去 7 天？我正在使用 Mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:51:41.627

```
select
  name, 
  email, 
  birthday 
from members 
where 
  month(birthday) = month(DATE_SUB(NOW(), INTERVAL 1 WEEK)) 
  and dayofmonth(birthday) = dayofmonth(DATE_SUB(NOW(), INTERVAL 1 WEEK)); 
```

# algorithm - 将一个非常大的数字从十进制字符串转换为二进制表示？

> ID：11006844
> 
> 赞同：5
> 
> 时间：2012-06-13T00:49:24.483
> 
> 标签：algorithm, base-conversion

我有一个非常大的数字，大约有一千个十进制数字，我必须将它转换为它的二进制表示。数字存储为字符串。

由于很少有语言具有处理这么大的数字的基本数据类型，因此我认为没有简单的方法可以将其转换为可以转换的整数值。

有人可以帮我吗？这样做的可行方法是什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-13T01:18:39.320

如果这是一个真正的问题，那么有很多 BigNum 库可以提供帮助，例如 MPIR[库](http://mpir.org/)。

如果是*不能*使用第三方库的东西，还是比较容易的。你实际上并不*需要*一个复杂的 BigNum 库，你只需要一个操作：除以二。

这是你如何做到的。从一个空的二进制数字堆栈开始。然后循环直到数字为“0”（是的，这仍然是一个字符串）。如果数字的最后一位是奇数，则将 1 压入堆栈，否则压入 0。然后将数字除以 2 并重新开始循环。

一旦循环完成（数字为“0”），一次从堆栈中弹出一个数字并打印它们。你去吧。

* * *

哦，是的，除以二，这*是*一个相当重要的难题:-)

让我们从“12345”开始。这是您遵循的过程，采用伪代码。

```
Set next_additive to 0.
For every digit in number (starting at the left):
    Set additive to next_additive.
    If the digit is odd, set next_additive to 5, else set it to 0.
    Divide the digit by two (truncating) then add additive.
Remove leading zero if necessary (if it starts with 0 but is not just 0). 
```

这可以通过一次处理一个字符的实际字符串来完成。

*   从`1`(from `12345`) 开始，additive 是`0`，number 是奇数，所以 next_additive 是`5`。除以`1`的`2`加法`0`，得到`0`：`02345`。

*   下一个数字`2`，加法是`5`，数字是偶数，所以 next_additive 是`0`。除以`2`的`2`加法`5`，得到`6`：`06345`。

*   下一位`3`，加法是`0`，数字是奇数，所以 next_additive 是`5`。除以`3`的`2`加法`0`，得到`1`：`06145`。

*   下一个数字`4`，加法是`5`，数字是偶数，所以 next_additive 是`0`。除以`4`的`2`加法`5`，得到`7`：`06175`。

*   下一位`5`，加法是`0`，数字是奇数，所以 next_additive 是`5`。除以`5`的`2`加法`0`，得到`2`：`06172`。

*   去掉前导零：`6172`. 忽略下一个加法，因为您要截断结果。

你有它：`12345 / 2 = 6172`。

* * *

举例来说，这里有一个 Python 方法来实现这个算法，如下所示。首先是用于检查字符串数字是否为奇数的支持例程（请记住，这并不是*Pythonic*代码，它只是为了展示它是如何完成的 - 在 Python 中几乎可以肯定有更好的方法来做到这一点，但那赢了'不一定能很好地映射到另一种语言）：

```
def oddsToOne(s):
    if s.endswith('1'): return 1
    if s.endswith('3'): return 1
    if s.endswith('5'): return 1
    if s.endswith('7'): return 1
    if s.endswith('9'): return 1
    return 0 
```

然后是另一个将字符串数除以二的支持例程：

```
def divByTwo(s):
    new_s = ''
    add = 0

    for ch in s:
        new_dgt = (ord(ch) - ord('0')) // 2 + add
        new_s = '%s%d' % (new_s, new_dgt)
        add = oddsToOne(ch) * 5

    if new_s != '0' and new_s.startswith('0'):
        new_s = new_s[1:]

    return new_s 
```

最后，一些从十进制字符串生成二进制字符串的实际代码：

```
num = '12345'

if num == '0':
    stack = '0'
else:
    stack = ''
    while num != '0':
        stack = '%d%s'%(oddsToOne(num), stack)
        num = divByTwo (num)

print(stack) 
```

请注意，如果您想实际使用它来填充真实位（而不是制作一串位），那么更改`if`and`else`子句中发生的事情是一件简单的事情。

如前所述，它可能不是你能想出的*最有效或最漂亮的 Python 代码，但它只是为了展示这个过程，而不是一些精心设计的生产就绪代码。*输出是（下面有一些添加的东西来显示发生了什么）：

```
12345
11000000111001
||      |||  |
||      |||  +-     1
||      ||+----     8
||      |+-----    16
||      +------    32
|+-------------  4096
+--------------  8192
                =====
                12345 
```

* * *

因为这适用于数字的字符串表示，所以没有任意数字限制，例如 64 位整数的大小。一些示例值是（为了便于阅读，稍微重新格式化为 32 位块）：

```
123456781234567812345678
=> 11010001001001001101100000011011
   01110110001110110010110110101111
   0111101001110

99999999999999999999999999999999
99999999999999999999999999999999
99999999999999999999999999999999
9999
=> 10010010010011010110100100101100
   10100110000110111110011101011000
   01011001001111000010011000100110
   01110000010111111001110001010110
   01110010000001000111000100001000
   11010011111001010101010110010010
   00011000010001010100000101110100
   01111000011111111111111111111111
   11111111111111111111111111111111
   11111111111111111111111111111111
   1111111111111 
```

# mod-rewrite - mod重写添加url参数

> ID：11006850
> 
> 赞同：1
> 
> 时间：2012-06-13T00:50:19.537
> 
> 标签：mod-rewrite

我正在与 Yiiframework 和 Joomla 集成。我大部分时间都在工作，但想让它更干净一点。在 Joomla 中调用的 URL 需要获取一些附加到 URL 的 URL 参数。我已经设置了 .htaccess 来重写 URL，但它不起作用，我不知道为什么。请帮忙。

当前的 URL 是：

```
/index.php?r=site/index 
```

我希望它附加的是“option=com_jumi&fileid=3”所以它看起来像这样

```
/index.php?r=site/index&option=com_jumi&fileid=3 
```

这是我的重写

```
RewriteCond %{QUERY_STRING} ^r=(.*)$ [NC]
RewriteRule ^/index.php$ /index.php?r=%1&option=com_jumi&fileid=3 [NC,L,R=301] 
```

求指导，谢谢

# vb.net - 确定何时编译/构建.net程序的任何方法

> ID：11006854
> 
> 赞同：5
> 
> 时间：2012-06-13T00:50:58.680
> 
> 标签：vb.net, visual-studio

我需要证明我编写的 VB.NET 程序是在特定时间编写的。

（原因是学术诚信调查，有人复制了我的代码）。

我的磁盘上有所有代码，包括调试和发布文件夹，我的用户名在构建路径中。

我可以做他们添加的事情吗，比如查看二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:58:03.613

如果使用 IL Disassembler 打开 EXE/DLL，然后选择菜单选项 View>Header，COFF/PE 头中有一个名为“Time-date stamp”的字段。它是二进制格式，根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680313%28v=vs.85%29.aspx)，它是：

> 图像时间戳的低 32 位。这表示链接器创建图像的日期和时间。根据系统时钟，该值表示为自 1970 年 1 月 1 日世界标准时间午夜 (00:00:00) 以来经过的秒数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:05:59.163

您应该做的第一件事是将所有数据原样复制到另一台设备上 - 确保保留所有日期时间。不要打开或编辑任何文件。

每个文件将具有三个时间戳，即创建时间、上次修改时间等。可以使用 DIR /T 找到这些时间戳

```
 /T          Controls which time field displayed or used for sorting
  timefield   C  Creation
              A  Last Access
              W  Last Written 
```

获取目录列表，如下所示：

```
DIR myrootdir /s /ah /as /tc > fileslist.txt 
```

这会将所有具有创建时间的文件转储到一个名为 fileslist.txt 的文件中

同样正如@EricJ 所说：提供您的磁盘作为证据 - 但就像我说的那样先制作一份副本。最好先将映像副本（Windows 备份）复制到另一个驱动器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:10:04.560

调查人员正在以错误的方式处理这一切。

任何时间戳数据都可能被伪造，因此最好的方法是让他们坐下来分别向双方询问有关代码如何工作的详细问题。或者要求双方完成一个小测试项目，再次分开 - 在考试条件下。

复制作品的人不会理解他们最有可能复制的内容，并且无法根据类似的概念复制某些东西。

写它的人——好吧，除非他们作弊，否则他们会深入理解这一切。

# java - 在android上禁用软键盘不起作用。用于检测

> ID：11006867
> 
> 赞同：0
> 
> 时间：2012-06-13T00:53:12.920
> 
> 标签：java, android, android-softkeyboard

我尝试了多种方法来从我的测试中禁用软键盘，但没有奏效。

1.  添加到我的 androidmanifest.xml

    ```
     <activity android:name="com.photos.ui.activity.WelcomeActivity"
      android:windowSoftInputMode="stateHidden"
      /> 
    ```

    活动是应用程序文件夹的名称（不是我的测试脚本）

2.  添加到我的 androidmanifest.xml

    ```
    <LinearLayout 
    android:focusable="true"
    android:focusableInTouchMode="true" 
    ```

    />

3.  把它放在我的测试和我的设置中

    ```
    EditText edtView=solo.getEditText(0);   
    edtView.setInputType(InputType.TYPE_NULL); 
    ```

4.  试过了

    ```
     InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
     imm.hideSoftInputFromWindow(solo.getEditText(0).getWindowToken(),0); 
    ```

但 getSystemService 给了我一个错误。（在我的课堂上未定义）我不知道如何使用这两个命令

我正在使用 2.3 和三星展览 II。

现在我正在使用：

```
 hnm, what calls would I need to create the context object? right now im using:    private Context context;

private static Class<?> launcherActivityClass;
static{
        try {
                launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e) {
                throw new RuntimeException(e);
        }
}

public TestMain() throws ClassNotFoundException {
    super(TARGET_PACKAGE_ID, launcherActivityClass);
}

public TestMain(String name) throws ClassNotFoundException {
    super(TARGET_PACKAGE_ID, launcherActivityClass);
    setName(name);
}

public TestMain(String name, Class<?> className) throws ClassNotFoundException {
    super(TARGET_PACKAGE_ID, className);
    setName(name);

}

private Solo solo;

 @Override  
protected void setUp() throws Exception {

        solo = new Solo(getInstrumentation(), getActivity());

    Log.v("setup","setup");

}

@Override
protected void tearDown() throws Exception {

        solo.finishOpenedActivities();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:27:06.020

getSystemService() 是一种方法，`Context`因此如果您在尝试调用时所在的类不是`Context`（Activity 扩展，因此*是*Context），那么您需要在前面放置一个引用和一个点的方法。您需要如何执行此操作取决于您尝试将这两行放入哪种类型的结构中。如果您仍在 Activity 中，但当前在内部类中，则可以通过以下方式修复它：

```
YourActivityName.this.getSystemService(); 
```

如果您在某个其他类中，那么您需要有一种方法将 Context 传递给它，以便您可以在传递给您的 Context 对象上调用该方法（即作为构造函数参数）。

**编辑：**

我认为，您可能希望将此代码放在 WelcomeActivity 中，而不是放在这个测试对象中。我无法根据您发布的内容来判断您一直在尝试做什么，但是如果您从那段代码中死心塌地地做这件事，我的猜测是这 `launcherActivityClass`将涉及获取上下文。您是否将其膨胀为 Activity 对象？如果是这样，您可以将其作为上下文传递而无需对其进行任何操作。

# php - PHP：读取由 XML API 更新的远程文件

> ID：11006873
> 
> 赞同：2
> 
> 时间：2012-06-13T00:54:34.617
> 
> 标签：php, ajax, file-io, proxy

我正在通过[像这里这样](http://jquery-howto.blogspot.de/2009/04/cross-domain-ajax-querying-with-jquery.html)的 PHP 代理访问 XML API（航班搜索比较） 。

API 总是有一个完整的文件供下载。第一个版本声明有 0 个结果，然后在调用它几次后弹出第一个结果。

API 文档说：

> result 方法将始终为您提供搜索结果的当前状态。您可以多次调用它（可能使用 ajax 调用）

我的问题是，我不知道何时完成，即何时交付所有结果。

我试过这个：

1.  读到`feof`，然后通过重置文件位置指示器并[像这里一样](https://stackoverflow.com/questions/1425223/how-do-i-read-a-file-which-is-constantly-updating)`fseek()`等待，但这不起作用，因为流不支持.`fseek()`

2.  等待*几*秒钟，然后显示结果，但这效果不佳，因为 API 有时需要很长时间（而且我没有得到所有内容）

3.  read until `feof`，然后使用`ftell()`来查看是否已将新内容写入文件，但我缺乏事后做某事的可能性...

    ```
    $handle = fopen($flights_url, "r");
    if ($handle) {
        while (!feof($handle)) {
            $buffer = fgets($handle);
            echo $buffer;
        }
        fclose($handle);
    } 
    ```

我现在没有主意了。这应该如何以一种好的方式完成？

-T

**编辑**：更改格式并添加了一些代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:52:48.037

好的，我联系了 API 的一位开发人员。

他告诉我，他们没有发送就绪信号，因为他们也不知道响应何时结束。这是因为它们可以与许多其他 API 一起使用（毕竟这是一个比较 API）。

**他给我的建议/解决方案**，他们使用的是，轮询几次，每次轮询之间有几秒钟的延迟，然后把剩下的拿走。

对我来说，这似乎是务实而不是优雅，但他们就是这样做的:-) 感谢所有试图提供意见的人！

# jquery - JQuery：是否可以设置标签样式以在点击时更改？

> ID：11006877
> 
> 赞同：0
> 
> 时间：2012-06-13T00:55:16.150
> 
> 标签：jquery, click, styles

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:14:52.410

根据您问题中的标记，您需要引用容器的类而不是其 id，因为它没有。

如果你想点击一下：

```
$('.mainmenu a').click(function() {
            $('li', this).addClass("menupressed");
}); 
```

如果在鼠标按下时：

```
$('.mainmenu a').mousedown(function() {
    $('li', this).addClass("menupressed");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:16:14.550

标记无效，您不应该用内联元素包装块元素。

```
 <div class="content">
          <ul class="mainmenu">
              <li><a href="page1.html">Page1</a></li>
              <li><a href="page2.html">Page2</a></li>
              <li><a href="page3.html">Page3</a></li>
          </ul>    
      </div><!--content--> 
```

您也正在使用 id 选择器选择一个类，试试这个：

```
$(function() {

//MOUSE CLICK EVENTS
$('.mainmenu a').click(function() {
     $(this).addClass("menupressed");
})

});//END ONLOAD 
```

[http://jsfiddle.net/KLjH3/1/](http://jsfiddle.net/KLjH3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T01:00:15.083

假设一个标记

```
<ul><li><a></li>...</ul>

$(function() {
  $('#mainmenu a').on('click', function() {
     $(this).parent().addClass("menupressed");
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T01:02:04.760

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T01:02:55.643

要将点击添加到您的特定`<a>`元素，只需丢失内部选择器：

```
$('#mainmenu a').click(function() {
  this.addClass('menupressed');
}); 
```

如果需要将该类添加到下一个`<li>`父元素：

```
$('#mainmenu a').click(function() {
  this.closest('li').addClass('menupressed');
}); 
```

这使用的`.closest()`方法，在这里找到：http: [//api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T01:03:39.530

如果保持 3 秒，这将增加课程。

**编辑为与班级一起工作**

```
var hammertime=0;
$('.mainmenu a').bind('mousedown',function() {
    hammertime= window.setTimeout((function(elem){
     return function(){
        elem.addClass("menupressed");
     }
   })($(this).children('li')),3000) // Edit: If li is child, then use children('li')
})
.bind('mouseup',function() {
     window.clearTimeout(hammertime);
}) 
```

编辑：

还要确保将整个内容包装在其中，以便在加载时执行：

```
$(document).ready(function(){
   /* the code here */
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T01:06:12.513

当链接变为活动状态时，您可以使用 CSS 更改链接的样式

在此处查看示例：[http ://www.w3schools.com/css/tryit.asp?filename=trycss_link](http://www.w3schools.com/css/tryit.asp?filename=trycss_link)

```
a:link {color:#FF0000;}    /* unvisited link */
a:visited {color:#00FF00;} /* visited link */
a:hover {color:#FF00FF;}   /* mouse over link */
a:active {color:#0000FF;}  /* selected link */ 
```

所以 a:active 是你需要做的事情。所有需要做的造型都可以放在那里。

# c++ - sourceFile 编译器错误 - 常见问题

> ID：11006882
> 
> 赞同：2
> 
> 时间：2012-06-13T00:56:04.760
> 
> 标签：c++

我从 sourceForge 获得的这个 sourceFile 中有 26 个错误。它是[斯坦福 CS106B 库](http://sourceforge.net/projects/progabstrlib/)的一部分，因此不应该有任何错误。

错误示例：

*   C2059：语法错误：'public C2990：'Iterator'：非类模板已被声明为类模板
*   C2255：“朋友”：不允许在类定义之外
*   C2146：语法错误：缺少“；” 在标识符“foreachHook”之前
*   C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
*   C2065：“FE_State”：未声明的标识符

有了这么多错误，直觉可能是一个简单的原因，而不是 26 个复杂的原因。

```
/*
 * File: private/bst.h
 * Last modified on Fri Jun  5 15:40:43 2009 by eroberts
 * -----------------------------------------------------
 * This file contains the private section of the bst.h interface.
 * This portion of the class definition is taken out of the bst.h
 * header so that the client need not have to see all of these
 * details.
 */

public:

/*
 * Class: BST<ElemType>::Iterator
 * ------------------------------
 * This interface defines a nested class within the BST template that
 * provides iterator access to the keys contained in the BST.
 */

    class Iterator {
    public:
        Iterator();
        bool hasNext();
        ElemType next();

    private:
        struct iteratorMarkerT {
            void *np;
            bool processed;
        };

        Iterator(BST *bstp);
        BST *bstp;
        Stack<iteratorMarkerT> stack;
        long timestamp;
        void advanceToNextNode();
        void findLeftmostChild();
        friend class BST;
    };
    friend class Iterator;
    ElemType foreachHook(FE_State & _fe);

/*
 * Deep copying support
 * --------------------
 * This copy constructor and operator= are defined to make a
 * deep copy, making it possible to pass/return trees by value
 * and assign from one tree to another. The entire contents of
 * the tree, including all elements, are copied. Each tree
 * element is copied from the original tree to the copy using
 * assignment (operator=). Making copies is generally avoided
 * because of the expense and thus, trees are typically passed
 * by reference, however, when a copy is needed, these operations
 * are supported.
 */
    const BST & operator=(const BST & rhs);
    BST(const BST & rhs);

private:

/* Type definition for node in the tree */
    struct nodeT {
        ElemType data;
        nodeT *left, *right;
        int bf;    /* AVL balance factor */
    };

/* Constant definitions */
    static const int BST_RIGHT_HEAVY = +1;
    static const int BST_IN_BALANCE = 0;
    static const int BST_LEFT_HEAVY = -1;

/* Instance variables */
    nodeT *root;
    int numNodes;
    long timestamp;
    int (*cmpFn)(ElemType, ElemType);

/* Private method prototypes */
    nodeT *recFindNode(nodeT *t, ElemType & key);
    bool recAddNode(nodeT * & t, ElemType & key, bool & createdNewNode);
    bool recRemoveNode(nodeT * & t, ElemType & key, bool & didRemove);
    bool removeTargetNode(nodeT * & t);
    void updateBF(nodeT * & t, int bfDelta);
    void recDeleteTree(nodeT *t);
    void recBSTAll(nodeT *t, void (*fn)(ElemType));
    void fixRightImbalance(nodeT * & t);
    void fixLeftImbalance(nodeT * & t);
    void rotateRight(nodeT * & t);
    void rotateLeft(nodeT * & t);
    void copyOtherEntries(const BST & other);

/* Template method prototypes */

    template <typename ClientDataType>
    void recBSTAll(nodeT *t, void (*fn)(ElemType, ClientDataType &),
                   ClientDataType & data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:05:42.150

此文件本身不会形成有效的 C++。如果您阅读评论，则将其取出`bst.h`以形成课程的私有部分，而客户（图书馆的用户）无需查看详细信息。只有当它进入正确的位置`private/bst.h`时才有意义。然后编译器将在正确的上下文中解析它。`#include``bst.h`

查看此文件（）*上方*`bst.h`目录中的文件。*`private/bst.h`*

# c++ - 构造函数参数的默认值的链接器问题

> ID：11006886
> 
> 赞同：2
> 
> 时间：2012-06-13T00:56:21.717
> 
> 标签：c++, static, linker, default-value

我试图为方法（或构造函数）参数的默认值强加某种语义逻辑。这是我尝试过的：

```
#include <iostream>
#include <vector>
class Test
{
public:
    static const std::vector<int> staticVector;
    Test (const std::vector<int> &x = Test::staticVector) {}
};

int main ()
{
    Test x;

    return 0;
} 
```

尽管 staticVector 相当多余，但由于 C++ 不允许将 NULL 作为 std::vector 的实例传递，我希望避免对构造函数 std::vector() 进行冗余调用，所以我想出了这种方法。 .

不幸的是，当我尝试编译它时，链接器会抛出这个错误：

```
error LNK2001: unresolved external symbol "public: static class std::vector<int,class std::allocator<int> > const Test::staticVector" (?staticVector@Test@@2V?$vector@HV?$allocator@H@std@@@std@@B) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T00:59:00.787

这实际上与使用默认参数无关。相反，它是静态变量在 C++ 中如何工作的副作用。

在 C++ 类中拥有静态对象是一个两步过程。首先，您必须声明已完成的静态对象，但随后您必须在某处实际定义它，以便 C++ 知道哪个翻译单元应包含该静态对象的一个​​定义。你可以通过写来做到这一点

```
const std::vector<int> Test::staticVector; 
```

类之外的 C++ 源文件中的某个位置。这告诉 C++ 你的源文件包含这个对象的定义，它应该解决链接器错误。

如果您有多个不同的源文件而不仅仅是一个，那么您应该将此行放在`Test`类的源文件中，而不是放在标题中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:11:47.217

您已经声明了静态成员，但没有定义它。课后你需要类似的东西：

```
 const std::vector<int> Test::staticVector; 
```

You may want to initialise it with some value depending on what you'rre really planning on doing with it.

# ruby-on-rails - 测试：如何在不损失速度的情况下专注于行为而不是执行？

> ID：11006888
> 
> 赞同：43
> 
> 时间：2012-06-13T00:56:36.597
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec

似乎有两种完全不同的测试方法，我想引用它们。

问题是，这些观点是 5 年前（2007 年）提出的，我很感兴趣，从那时起发生了什么变化以及我应该走哪条路。

[布兰登守护者](http://opensoul.org/blog/archives/2007/06/20/rspec-is-getting-too-intimate-with-my-code/)：

> 理论上，测试应该与实现无关。这导致不那么脆弱的测试并实际测试结果（或行为）。
> 
> 使用 RSpec，我觉得完全模拟模型来测试控制器的常用方法最终会迫使你过多地关注控制器的实现。
> 
> 这本身并不算太糟糕，但问题是它过多地关注控制器来决定如何使用模型。为什么我的控制器调用 Thing.new 很重要？如果我的控制器决定采用 Thing.create！和救援路线？如果我的模型有一个特殊的初始化方法，比如 Thing.build_with_foo？如果我更改实现，我的行为规范不应该失败。
> 
> 当您有嵌套资源并且为每个控制器创建多个模型时，这个问题会变得更糟。我的一些设置方法最终会长达 15 行或更多行并且非常脆弱。
> 
> RSpec 的目的是将您的控制器逻辑与您的模型完全隔离开来，这在理论上听起来不错，但对于像 Rails 这样的集成堆栈来说，这几乎是违反规定的。特别是如果你练习瘦控制器/胖模型纪律，控制器中的逻辑量会变得非常小，而设置会变得巨大。
> 
> 那么 BDD 想要做什么呢？退后一步，我真正想要测试的行为不是我的控制器调用 Thing.new，而是给定参数 X，它会创建一个新事物并重定向到它。

大卫切利姆斯基：

> 这都是关于权衡的。
> 
> The fact that AR chooses inheritance rather than delegation puts us in a testing bind – we have to be coupled to the database OR we have to be more intimate with the implementation. We accept this design choice because we reap benefits in expressiveness and DRY-ness.
> 
> In grappling with the dilemma, I chose faster tests at the cost of slightly more brittle. You’re choosing less brittle tests at the cost of them running slightly slower. It’s a trade-off either way.
> 
> In practice, I run the tests hundreds, if not thousands, of times a day (I use autotest and take very granular steps) and I change whether I use “new” or “create” almost never. Also due to granular steps, new models that appear are quite volatile at first. The valid_thing_attrs approach minimizes the pain from this a bit, but it still means that every new required field means that I have to change valid_thing_attrs.
> 
> But if your approach is working for you in practice, then its good! In fact, I’d strongly recommend that you publish a plugin with generators that produce the examples the way you like them. I’m sure that a lot of people would benefit from that.

[Ryan Bates](http://railsforum.com/viewtopic.php?id=6528):

> Out of curiosity, how often do you use mocks in your tests/specs? Perhaps I'm doing something wrong, but I'm finding it severely limiting. Since switching to rSpec over a month ago, I've been doing what they recommend in the docs where the controller and view layers do not hit the database at all and the models are completely mocked out. This gives you a nice speed boost and makes some things easier, but I'm finding the cons of doing this far outweigh the pros. Since using mocks, my specs have turned into a maintenance nightmare. Specs are meant to test the behavior, not the implementation. I don't care if a method was called I just want to make sure the resulting output is correct. Because mocking makes specs picky about the implementation, it makes simple refactorings (that don't change the behavior) impossible to do without having to constantly go back and "fix" the specs. I'm very opinionated about what a spec/tests should cover. A test should only break when the app breaks. This is one reason why I hardly test the view layer because I find it too rigid. It often leads to tests breaking without the app breaking when changing little things in the view. I'm finding the same problem with mocks. On top of all this, I just realized today that mocking/stubbing a class method (sometimes) sticks around between specs. Specs should be self contained and not influenced by other specs. This breaks that rule and leads to tricky bugs. What have I learned from all this? Be careful where you use mocking. Stubbing is not as bad, but still has some of the same issues.
> 
> I took the past few hours and removed nearly all mocks from my specs. I also merged the controller and view specs into one using "integrate_views" in the controller spec. I am also loading all fixtures for each controller spec so there's some test data to fill the views. The end result? My specs are shorter, simpler, more consistent, less rigid, and they test the entire stack together (model, view, controller) so no bugs can slip through the cracks. I'm not saying this is the "right" way for everyone. If your project requires a very strict spec case then it may not be for you, but in my case this is worlds better than what I had before using mocks. I still think stubbing is a good solution in a few spots so I'm still doing that.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T12:47:53.093

I think all three opinions are still completely valid. Ryan and I were struggling with the maintainability of mocking, while David felt the maintenance tradeoff was worth it for the increase in speed.

But these tradeoffs are symptoms of a deeper problem, which David alluded to in 2007: ActiveRecord. The design of ActiveRecord encourages you to create god objects that do too much, know too much about the rest of the system, and have too much surface area. This leads to tests that have too much to test, know too much about the rest of the system, and are either too slow or brittle.

So what's the solution? Separate as much of your application from the framework as possible. Write lots of small classes that model your domain and don't inherit from anything. Each object should have limited surface area (no more than a few methods) and explicit dependencies passed in through the constructor.

With this approach, I've only been writing two types of tests: isolated unit tests, and full-stack system tests. In the isolation tests, I mock or stub everything that is not the object under test. These tests are insanely fast and often don't even require loading the whole Rails environment. The full stack tests exercise the whole system. They are painfully slow and give useless feedback when they fail. I write as few as necessary, but enough to give me confidence that all my well-tested objects integrate well.

Unfortunately, I can't point you to an example project that does this well (yet). I talk a little about it in my presentation on [Why Our Code Smells](http://opensoul.org/blog/archives/2012/05/23/why-our-code-smells), watch Corey Haines' presentation on [Fast Rails Tests](http://www.youtube.com/watch?v=bNn6M2vqxHE), and I highly recommend reading [Growing Object Oriented Software Guided by Tests](http://www.growing-object-oriented-software.com/).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T18:37:53.047

Thanks for compiling the quotes from 2007\. It is fun to look back.

My current testing approach is covered in [this RailsCasts episode](http://railscasts.com/episodes/275-how-i-test) which I have been quite happy with. In summary I have two levels of tests.

*   **High level:** I use request specs in RSpec, Capybara, and VCR. Tests can be flagged to execute JavaScript as necessary. Mocking is avoided here because the goal is to test the entire stack. Each controller action is tested at least once, maybe a few times.

*   **Low level:** This is where all complex logic is tested - primarily models and helpers. I avoid mocking here as well. The tests hit the database or surrounding objects when necessary.

Notice there are no controller or view specs. I feel these are adequately covered in request specs.

Since there is little mocking, how do I keep the tests fast? Here are some tips.

*   Avoid excessive branching logic in the high level tests. Any complex logic should be moved to the lower level.

*   When generating records (such as with Factory Girl), use `build` first and only switch to `create` when necessary.

*   Use [Guard](http://railscasts.com/episodes/264-guard) with [Spork](http://railscasts.com/episodes/285-spork) to skip the Rails startup time. The relevant tests are often done within a few seconds after saving the file. Use a `:focus` tag in RSpec to limit which tests run when working on a specific area. If it's a large test suite, set `all_after_pass: false, all_on_start: false` in the Guardfile to only run them all when needed.

*   I use multiple assertions per test. Executing the same setup code for each assertion will greatly increase the test time. RSpec will print out the line that failed so it is easy to locate it.

I find mocking adds brittleness to the tests which is why I avoid it. True, it can be great as an aid for OO design, but in the structure of a Rails app this doesn't feel as effective. Instead I rely heavily on refactoring and let the code itself tell me how the design should go.

This approach works best on small-medium size Rails applications without extensive, complex domain logic.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-13T21:35:04.937

Great questions and great discussion. @ryanb and @bkeepers mention that they only write two types of tests. I take a similar approach, but have a third type of test:

*   Unit tests: isolated tests, typically, but not always, against plain ruby objects. My unit tests don't involve the DB, 3rd party API calls, or any other external stuff.
*   Integration tests: these are still focused on testing one class; the differences is that they integrate that class with the external stuff I avoid in my unit tests. My models will often have both unit tests and integration tests, where the unit tests focus in the pure logic that can be tested w/o involving the DB, and the integration tests will involve the DB. In addition, I tend to test 3rd party API wrappers with integration tests, using VCR to keep the tests fast and deterministic, but letting my CI builds make the HTTP requests for real (to catch any API changes).
*   Acceptance tests: end-to-end tests, for an entire feature. This isn't just about UI testing via capybara; I do the same in my gems, which may not have an HTML UI at all. In those cases, this exercises whatever the gem does end-to-end. I also tend to use VCR in these tests (if they make external HTTP requests), and like in my integration tests, my CI build is setup to make the HTTP requests for real.

As far as mocking goes, I don't have a "one size fits all" approach. I've definitely overmocked in the past, but I still find it to be a very useful technique, especially when using something like [rspec-fire](https://github.com/xaviershay/rspec-fire). In general, I mock collaborators playing roles freely (particularly if I own them, and they are service objects) and try to avoid it in most other cases.

Probably the biggest change to my testing over the last year or so has been inspired by [DAS](https://www.destroyallsoftware.com/): whereas I used to have a `spec_helper.rb` that loads the entire environment, now I explicitly load just the class-under test (and any dependencies). Besides the improved test speed (which does make a huge difference!) it helps me identify when my class-under-test is pulling in too many dependencies.

# sql - 使用 SQL Azure Reporting Services 的用户特定报告

> ID：11006889
> 
> 赞同：0
> 
> 时间：2012-06-13T00:56:47.743
> 
> 标签：sql, sql-server, reporting-services, azure, azure-sql-database

Azure SSRS 是否有针对用户特定报告的解决方案？我有一个带有用户表的 Azure 数据库，并且只希望我的报告查询与用户有关的数据。

任何提示/替代方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:47:45.727

Azure SSRS 是否支持 User!UserID 属性？如果没有，您应该能够使用 user_name() 函数在 SQL 查询中进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T00:30:32.110

Windows Azure SSRS 支持 User!UserID 属性，因此您可以将其用于特定于用户的报告，这将是完成它的最简单方法。

另外关于使用 user_name() 过滤 SQL 查询可能有效或无效。如果您对 RS 数据源使用“存储凭据”选项，则多个用户将共享同一个凭据。在这种情况下，您不能依赖 user_name()。如果您使用“提示”，并且如果每个用户都需要为自己提供唯一的凭证，那么您可以使用 user_name()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:30:27.543

这些人实际上在他们的报告中实现了用户特定的 SQL 查询。看看： [http ://www.upsizing.co.uk/Art68_ReportViewerControlAndSQLAzure.aspx](http://www.upsizing.co.uk/Art68_ReportViewerControlAndSQLAzure.aspx)

# valgrind - 如何在 valgrind 中忽略“可能丢失”

> ID：11006894
> 
> 赞同：5
> 
> 时间：2012-06-13T00:57:56.740
> 
> 标签：valgrind, glib

我最近将 valgrind 与 glib（与 gobject）一起使用，但效果不是很好。

我已经`G_SLICE=always-malloc G_DEBUG=gc-friendly`在命令行中添加了，但是 valgrind 仍然报告了许多“可能丢失”。

由于我在自动化测试套件中使用 valgrind，所以我添加`--error-exitcode=1`了 ，但那些“可能丢失”的内容将使 valgrind 以 1 退出，这将导致我的测试失败。

有谁知道如何使 valgrind 不将“可能丢失”视为错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T21:19:31.973

对于 valgrind 3.7.0，使用： --show-possibly-lost=no|yes 显示泄漏检查中可能丢失的块？[是的]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:20:00.017

检查[https://live.gnome.org/Valgrind](https://live.gnome.org/Valgrind)以获取有关如何将 Valgrind 与 glib/gtk+/gnome 一起使用的提示。您可能对抑制部分感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-22T20:46:40.920

> 有谁知道如何使 valgrind 不将“可能丢失”视为错误。

用于`--errors-for-leak-kinds=definite`此。请参阅[Valgrind 用户手册，Memcheck 命令行选项部分](https://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.options)

# ruby-on-rails - 盐在 Rails 的 has_secure_password 中是如何工作的

> ID：11006895
> 
> 赞同：13
> 
> 时间：2012-06-13T00:58:11.417
> 
> 标签：ruby-on-rails, ruby, security, salt

根据我对加盐的理解以使加密密码更安全，我将生成一个随机数（盐）并将其与散列密码一起存储在用户记录中（例如）。我会将盐与明文连接起来密码，然后加密它（散列）。由此产生的哈希将更难以破解。将重复此过程以验证密码。

查看[`has_secure_password`](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-c-attributes_protected_by_default)和`bcrypt_ruby`（披露：我不是安全专家）我不知道这是如何完成的，因为存储在用户记录中的唯一内容是散列密码。盐在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:13:05.260

密码哈希和盐保存在数据库中名为 password_digest 的字符串列中。看到这个[问题](https://stackoverflow.com/questions/10139954/does-has-secure-password-uses-any-form-of-salting)。

# ruby - ruby 中 * 和 flatten 的含义是什么

> ID：11006897
> 
> 赞同：5
> 
> 时间：2012-06-13T00:58:36.153
> 
> 标签：ruby, flatten

我是 ruby​​ 语言的新手，所以当我尝试按值对哈希进行排序时，我使用了这种方法进行排序：

```
movie_popularity.sort_by{|m,p| p}.reverse 
```

但是 sort 方法返回一个数组，而我需要返回一个哈希，所以我使用了这个命令：

```
movie_popularity=Hash[*movie_popularity.sort_by{|m,p| p}.reverse.flatten] 
```

我的问题是上面一行中的`*`和是什么意思？`flatten`

谢谢 =)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T01:12:53.053

被`*`称为“splat 算子”；我不确定我能否给你技术定义（虽然我相信你会在谷歌的帮助下很快找到它），但我描述它的方式是它基本上取代了手写多个代码中的逗号分隔值。

为了使这一点更具体，请考虑`Hash[]`您在示例中使用的情况。该类`Hash`有一个`[]`类方法，它接受可变数量的参数，通常可以这样调用：

```
# Returns { "foo" => 1, "bar" => 2 }
h = Hash["foo", 1, "bar", 2] 
```

请注意，这不是数组、散列或我传入的任何东西；这是一个（手写的）值序列。运算符允许您使用`*`数组来实现基本相同的事情——在您的情况下，是由`movie_popularity.sort_by{|m,p| p}.reverse.flatten`.

至于那个`flatten`调用：当你调用`sort_by`一个散列时，你实际上是在利用包含在提供枚举`Enumerable`的各种类（最值得注意的是`Array`and ）中的模块。`Hash`在散列的情况下，您可能已经注意到，不是像这样迭代一个：

```
hash.each { |value| ... } 
```

相反，你这样做：

```
hash.each { |key, value| ... } 
```

也就是说，对哈希进行迭代会在每次迭代中产生*两个值。*因此，您自己的`sort_by`调用将返回一系列*pairs*。调用`flatten`此结果会将对折叠成一维值序列，如下所示：

```
# Returns [1, 2, 3, 4]
[[1, 2], [3, 4]].flatten 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T01:11:01.927

'flatten' 使数组变平：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten)

'*' 是 splat 运算符： http: [//theplana.wordpress.com/2007/03/03/ruby-idioms-the-splat-operator/](http://theplana.wordpress.com/2007/03/03/ruby-idioms-the-splat-operator/)

最后一个网址中的相关位是这样的：

```
a = [[:planes, 21], [:cars, 36]]
h = Hash[*a]  # => { :planes=>21, :cars=>36} 
```

# c# - 这是使方法异步的错误方法吗？

> ID：11006898
> 
> 赞同：2
> 
> 时间：2012-06-13T00:58:48.240
> 
> 标签：c#, async-await

我想要这样的方法：

```
public async void DoSomething()
{
    DoSomethingElse();
} 
```

但是因为没有 AWAIT 我得到一个警告，它会同步运行。那不是我的意图。我的意图是异步运行。所以，我这样做：

```
public async void DoSomething()
{
    await Task.Delay(0);
    DoSomethingElse();
} 
```

这行得通。但这是作弊还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:01:45.880

如果你想让方法异步运行，你通常会这样写：

```
public Task DoSomething()
{
    return Task.Factory.StartNew( () => DoSomethingElse());
} 
```

这将导致 TPL 安排您的方法运行（在后台线程上），并允许调用者`await`在他们调用您的方法时使用，如果他们需要使用 async/await 支持。

您当前的代码实际上不会导致它异步运行 - 它会导致该方法运行并立即返回，但随后安排`DoSomethingElse()`在您当前运行的同一同步上下文中发生。这意味着，如果您在 UI 线程上调用您的方法，您将立即继续之前的代码，并且不会立即阻塞 UI ，但*稍后*在上下文执行调用时仍会阻塞它`DoSomethingElse()`。

当然，这是假设它`DoSomethingElse()`本身不是异步方法。如果它被定义为`Task DoSomethingElse()`，你可以写：

```
public async Task DoSomething()
{
    // other code as needed
    await DoSomethingElse();
    // other code as needed
} 
```

# android - 在联系人活动打开时进入后台退出应用程序

> ID：11006899
> 
> 赞同：0
> 
> 时间：2012-06-13T00:58:57.427
> 
> 标签：android, android-intent, android-activity, android-contacts

在我们的 Android 应用程序中，我通过在 *ContactsContract.Contacts.CONTENT_URI* 上使用 Intent 操作 *ACTION_PICK* 来实现联系人选择。这种方法工作正常（大部分），但不幸的是我无法控制传入的事件活动。

当应用程序强制进入后台时，它必须注销并退出。目前它是通过使用活动事件实现的：主要活动的*onStop()*，但显然如果系统中的联系人活动打开，应用程序将不会收到该事件。

我试图以某种方式对联系人活动进行子类化，但恐怕无法对其进行管理。

我尝试使用不同的活动开始标志，但在这种情况下找不到任何相关标志（更不用说标志不适用于*startActivityForResult()*方法）。

我试图挂钩不同的广播事件，但有太多的可能性最终将应用程序推到后台。

我发现了一些在顶部轮询应用程序的技巧，但这需要 GET_TASKS 许可，而且通常无论如何这将是一个重大黑客攻击。我宁愿不去那里。

所以，总结一下我的问题：

**有没有办法在联系活动打开时检测到应用程序被强制执行到后台？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:05:04.617

最后，我的同事找到了答案：

将以下属性添加到主要活动：

```
android:launchMode="singleTask"
android:clearTaskOnLaunch="true" 
```

在联系人选择打开时用户按下主页按钮并重新启动应用程序后，将在主活动上触发一个新事件：

```
public void onNewIntent(Intent newIntent) 
```

取消结果代码仍然像用户在联系人选择活动上按下后退按钮时一样返回，但在这种情况下，不会触发此特定事件。通过这种方式，我可以区分用户关闭联系活动和系统关闭联系活动的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:07:14.583

您所做的是等待结果，当返回联系人时，联系人应用程序将使用数据创建一个新意图，然后在您的应用程序中您应该使用类似 onActivityResult 的东西（对不起，我不记得实际的方法）

在资源下查看 Android 开发者网站，在基本或高级培训中，有一些关于与其他应用程序通信的信息

* * *

编辑

```
import android.provider.ContactsContract.Contacts;
import android.provider.ContactsContract.CommonDataKinds.Email;

private static final int CONTACT_PICKER_RESULT = 1001;
private boolean chooseContact = false;
private boolean returned = false;

public void doLaunchContactPicker(View view) {
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,
            Contacts.CONTENT_URI);
    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);
    chooseContact = true;
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
        case CONTACT_PICKER_RESULT:
            // handle contact results
            break;
        }

    } else {
        // gracefully handle failure
        Log.w(DEBUG_TAG, "Warning: activity result not ok");
    }
}

@Override
public void onResume(){
    super.onResume();
    if(contactChoose && !returned){
            finish();
    }
} 
```

# python - 在Python中检查字符串的python语法？

> ID：11006903
> 
> 赞同：1
> 
> 时间：2012-06-13T00:59:30.863
> 
> 标签：python

假设我有一个字符串

```
s="""

print 'hi'
    print 'hi'
print 3333/0
""" 
```

有什么模块或方法可以帮助我检查这个字符串的语法吗？

我希望输出如下：

第 2 行，缩进 第 3 行，除以零

我听说过 pyFlakes、pyChecker 和 pyLint，但它们检查的是文件，而不是字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T01:04:53.723

compile() 函数会告诉你编译时错误：

```
try:
    compile(s, "bogusfile.py", "exec")
except Exception as e:
    print "Problem: %s" % e 
```

但请记住：一个错误将阻止其他错误被报告，并且您的一些错误（ZeroDivision）是运行时错误，而不是编译器检测到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:16:00.667

```
s="""

print 'hi'
    print 'hi'
print 3333/0
"""
eval(s) 
```

**输出：**

```
Traceback (most recent call last):
  File "prog.py", line 7, in <module>
    eval(s)
  File "<string>", line 3
    print 'hi'
        ^
SyntaxError: invalid syntax 
```

# php - php mail（）在使用phonegap和ajax时不发送标题

> ID：11006908
> 
> 赞同：1
> 
> 时间：2012-06-13T01:00:25.270
> 
> 标签：php, ajax, email, cordova, header

发送电子邮件时遇到一个非常奇怪的问题。这可能很容易解决，但我在网上找不到任何答案。

我的 JQuery Mobile Phonegap 应用程序中的 ajax 是（简化的）：

```
$.ajax({
    url: 'http://mysite.com/ajax/app/email.php',
    type: "POST",
    dataType: "text",
    data: {
        email: $('#email').val(),
    },
    success: function(data) {
        alert('done!')
    }
}); 
```

我的 email.php 文件中的代码是（再次简化）：

```
<?php
$email = $_POST['email'];
$headers = 'From: MySite <admin@mysite.com>' . "\r\n" .
    'Reply-To: MySite <admin@mysite.com>' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
$msg = "Welcome to MySite!";
@mail($email, 'Hello', $msg, $headers); 
```

电子邮件通过正常，但不是来自 admin@mysite.com，而是来自 myaccount@web54.justhost.com。当我从与 email.php 脚本存储在同一服务器上的 HTML5 应用程序运行相同的 ajax 查询时，电子邮件来自正确的电子邮件地址。

有任何想法吗？我已将 myserver + 所有子域列入白名单 - 我想不出还能做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:44:36.797

尝试通过`-f`第五个参数将带有标志的电子邮件地址传递给[mail()](http://php.net/mail)。这将帮助 MTA 知道使用哪个地址作为信封发件人。

看看这段代码是否有效：

```
mail($email, 'Hello', $msg, $headers, '-fadmin@mysite.com'); 
```

有关 PHP mail() 函数的信息，请参阅上面的邮件链接，还可以从 Exim Docs 中搜索`-f`The Exim [Command Line 。](http://www.exim.org/exim-html-current/doc/html/spec_html/ch05.html)

如果在您的 PHP 版本中启用了[safe_mode](http://php.net/safe_mode) ，您将需要禁用它。

# java - 使用缓冲图像将视频编码为 h264？

> ID：11006910
> 
> 赞同：5
> 
> 时间：2012-06-13T01:00:57.500
> 
> 标签：java, video, h.264

我正在尝试使用 java 将大量缓冲图像（由我的应用程序动态创建的预保存图像）翻译成视频，并希望有一个可以帮助该过程的库。

我探索了许多不同的选项，例如 jcodec（没有关于如何使用它的文档）。Xuggler（由于与 jdk5 及其相关库的兼容性问题而无法运行）。以及其他一些文档很差的库。

我正在尝试找到一个我可以使用的库，它使用 java 来（1）通过逐帧编写 bufferedimages 来创建 h264 视频，并且（2）有文档，这样我就可以真正弄清楚如何使用 dam 的东西。

关于我应该研究什么的任何想法？

如果纯 java 源代码存在于某个可以实现这一点的地方，我会非常有兴趣看到它。因为我很想看看这个人是如何实现这些功能的，以及我如何使用它！

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T19:23:59.287

以下是使用 JCodec 的方法：

```
public class SequenceEncoder {
    private SeekableByteChannel ch;
    private Picture toEncode;
    private RgbToYuv420 transform;
    private H264Encoder encoder;
    private ArrayList<ByteBuffer> spsList;
    private ArrayList<ByteBuffer> ppsList;
    private CompressedTrack outTrack;
    private ByteBuffer _out;
    private int frameNo;
    private MP4Muxer muxer;

    public SequenceEncoder(File out) throws IOException {
        this.ch = NIOUtils.writableFileChannel(out);

        // Transform to convert between RGB and YUV
        transform = new RgbToYuv420(0, 0);

        // Muxer that will store the encoded frames
        muxer = new MP4Muxer(ch, Brand.MP4);

        // Add video track to muxer
        outTrack = muxer.addTrackForCompressed(TrackType.VIDEO, 25);

        // Allocate a buffer big enough to hold output frames
        _out = ByteBuffer.allocate(1920 * 1080 * 6);

        // Create an instance of encoder
        encoder = new H264Encoder();

        // Encoder extra data ( SPS, PPS ) to be stored in a special place of
        // MP4
        spsList = new ArrayList<ByteBuffer>();
        ppsList = new ArrayList<ByteBuffer>();

    }

    public void encodeImage(BufferedImage bi) throws IOException {
        if (toEncode == null) {
            toEncode = Picture.create(bi.getWidth(), bi.getHeight(), ColorSpace.YUV420);
        }

        // Perform conversion
        transform.transform(AWTUtil.fromBufferedImage(bi), toEncode);

        // Encode image into H.264 frame, the result is stored in '_out' buffer
        _out.clear();
        ByteBuffer result = encoder.encodeFrame(_out, toEncode);

        // Based on the frame above form correct MP4 packet
        spsList.clear();
        ppsList.clear();
        H264Utils.encodeMOVPacket(result, spsList, ppsList);

        // Add packet to video track
        outTrack.addFrame(new MP4Packet(result, frameNo, 25, 1, frameNo, true, null, frameNo, 0));

        frameNo++;
    }

    public void finish() throws IOException {
        // Push saved SPS/PPS to a special storage in MP4
        outTrack.addSampleEntry(H264Utils.createMOVSampleEntry(spsList, ppsList));

        // Write MP4 header and finalize recording
        muxer.writeHeader();
        NIOUtils.closeQuietly(ch);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T11:55:08.483

[`jcodec`](http://jcodec.org)现在（jcodec-0.1.9.jar）包括`SequenceEncoder`直接允许将`BufferedImage`s 写入视频流。

我花了一些时间来修复这个新类到 Eclipse 中的默认导入。删除第一个导入后，尝试（如上所述，我找不到某些类）使用 Stanislav 的代码创建*自己的类并重新导入，我发现了错误：*

```
import org.jcodec.api.awt.SequenceEncoder;
//import org.jcodec.api.SequenceEncoder; 
```

第二个已完全弃用，没有文件将我指向后者。

那么对应的方法是：

```
private void saveClip(Trajectory traj) {
    //See www.tutorialspoint.com/androi/android_audio_capture.htm
    //for audio cap ideas.
    SequenceEncoder enc;
    try {
        enc = new SequenceEncoder(new File("C:/Users/WHOAMI/today.mp4"));
        for (int i = 0; i < BUFF_COUNT; ++i) {
            BufferedImage image = buffdFramToBuffdImage(frameBuff.get(i));
            enc.encodeImage(image);
        }
        enc.finish();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# java - 为导入的 Spring XML 资源设置前缀

> ID：11006911
> 
> 赞同：1
> 
> 时间：2012-06-13T01:01:04.840
> 
> 标签：java, spring

我有一个导入其他几个资源的 Spring 应用程序上下文文件。但是，导入文件中的某些资源具有相似的名称，例如 include1.xml 具有类似的名称

```
<bean id="MyBean" class="...">
...
</bean> 
```

include2.xml 中使用了相同的 bean id。有没有办法为包含的 bean 设置前缀，或者有没有办法限制包含的资源的范围。例如类似的东西。

```
<import resource="include1.xml" prefix="foo"/>
<import resource="include2.xml" prefix="bar"/> 
```

现在在父文件中我可以引用 foo.MyBean 和 bar.MyBean。如果不存在这样的系统，有没有办法限制范围，所以没有 bean id 冲突，这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:09:13.927

不，没有办法根据文件命名bean（稍后定义的具有相同名称的bean将覆盖之前定义的bean）但是，您可以自由地给它们自己的“名称” - 所以您可能可以命名所有foo 文件中的 bean：

```
<bean name="foo.bean1" class=../>
<bean name="foo.bean2" class=../> 
```

并在您的 bar 文件中，从而手动命名它们：

```
<bean name="bar.bean1" class=../>
<bean name="bar.bean2" class=../> 
```

# .htaccess - 用于 htaccess 的 Mod_Rewrite

> ID：11006913
> 
> 赞同：0
> 
> 时间：2012-06-13T01:01:25.833
> 
> 标签：.htaccess, mod-rewrite

Joomla 1.5 的 URL 结构在 2.5 版中已更改。

之前是：

[http://example.com/index.php?option=com_content&task=view&id=587&Itemid=73](http://example.com/index.php?option=com_content&task=view&id=587&Itemid=73)

现在是：

[http://example.com/index.php?option=com_content&view=article&id=587&Itemid=114](http://example.com/index.php?option=com_content&view=article&id=587&Itemid=114)

*请注意，id 和 itemid 编号会根据页面而变化，虽然所有页面都有 id，但并非所有页面都在 url 中具有 Itemid。

虽然我们更新了数据库中的所有链接，但很多人仍然拥有旧的链接结构，所以我们想要编辑 htaccess 文件，这样如果有人输入旧的结构，它将转发到正确的结构。

只需将在 example.com 中输入的任何带有 task=view 的 URL 都替换为 view=article。

有谁知道在 htaccess 中执行此操作的简单方法，可能是替换查询字符串方法和 301 重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:41:01.440

`RewriteCond`您可以使用 mod_rewrite和`%{QUERY_STRING}`变量匹配查询字符串。然后在 a 中使用**%**反向引用`RewriteRule`

尝试这样的事情：

```
RewriteCond %{QUERY_STRING} ^(.*)&task=view&(.*)$ [NC]
RewriteRule ^(.*)$ /$1?%1&view=article&%2 [R=301,L] 
```

# css - 未设置价格时 div 布局中断

> ID：11006917
> 
> 赞同：0
> 
> 时间：2012-06-13T01:01:51.480
> 
> 标签：css

正如您在链接中看到的那样，一旦我不添加价格，产品的布局就会中断。[http://wptemp.wendybellissimo.com/?pcategory=accessories](http://wptemp.wendybellissimo.com/?pcategory=accessories)

它不响应我所针对的任何课程？我应该瞄准哪个班级？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:09:14.020

您需要保留价格标签的位置而不显示价格；`visibility: hidden`非常适合这个。`no_price`如果价格不可用，请添加一个类并将可见性设置为隐藏，如下所示。

```
<p class="sale_price no_price"></p>

p.no_price {
    visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:24:54.960

我会为“sale_price”元素设置一个 45 像素（或最小高度）的高度。依靠内容来防止布局被破坏似乎是一个坏习惯。

# solr - 在 Solr 中索引我自己的数据

> ID：11006925
> 
> 赞同：0
> 
> 时间：2012-06-13T01:03:39.927
> 
> 标签：solr, indexing

我是 Solr 的新手，有几个问题想向更有经验的人寻求帮助：

1.  我可以运行示例，但是 start.jar 到底是什么？

2.  我知道通过运行“java -jar start.jar”，我可以启动 solr。但是我是否在索引我自己的数据而不是给定的样本数据之后运行这个命令？如果没有，我应该怎么做才能用我自己的索引数据运行我自己的 solr 实例？

3.  我确实需要索引我自己的示例数据，与给定的示例 solr 事情完全无关。我应该怎么做？我应该复制示例目录然后修改 sechema.xml 中的字段吗？然后我应该相应地运行 post.sh 来索引数据，就像我为设置示例 solr 所做的那样？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:10:54.293

脚步：

1.  决定你在 SOLR 中存储的文档结构是什么。（有点像为一个表创建关系数据库的模式）。
2.  删除示例核心并使用该架构创建您自己的核心
3.  一旦模式正常工作（您检查托管 SOLR 应用程序的服务器日志），您就可以开始将您拥有的数据输入 SOLR。您通过 HTTP 以 SOLR Wiki 中记录的特定结构发布它。各种框架都有一些类来处理它。

标记为 Wiki，因为对于那些不关心 RTFM 的人来说，这个答案太宽泛了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T06:33:20.370

亲爱的自定义索引并不是一项艰巨的任务，因为我几天前才开始研究它。首先，您需要根据您的 schema.xml 编写包含字段的文档是 xml、csv 或 json（solr 支持的格式），然后在 example/exampledocs 中运行以下命令

对于文档 mydoc.xml

**./post.sh mydoc.xml**

如果在输出中，状态值为 0，则索引成功，您可以在 solr 中搜索文档

参考： http: [//www.solrtutorial.com/solr-in-5-minutes.html](http://www.solrtutorial.com/solr-in-5-minutes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T08:38:51.110

虽然这个问题很老，但我正在为有同样问题的新访客写信。这个问题不是几句话就能回答的。您必须了解 Solr 是什么，Solr Admin UI 是什么，为什么我们需要 Solr 而不是关系数据库。然后您可以了解如何导入示例数据。我最近发表了两篇文章，即 Solr Introduction 和 Importing Sample Data，这些可能对您有所帮助。

[http://www.devtrainings.com/2017/03/apache-solr-introduction-and-server.html](http://www.devtrainings.com/2017/03/apache-solr-introduction-and-server.html)

[http://www.devtrainings.com/2017/03/apache-solr-index-data-and-run-search.html](http://www.devtrainings.com/2017/03/apache-solr-index-data-and-run-search.html)

# math - 计算视差背景的位置（2d）

> ID：11006930
> 
> 赞同：0
> 
> 时间：2012-06-13T01:03:59.143
> 
> 标签：math, language-agnostic, background, parallax

我正在尝试在我的游戏中对齐 4 个不同的视差背景。这些不是像太空射击游戏那样无休止的平铺背景，它们不会填满整个屏幕。它们是一排沿着地面奔跑的树。

我的图像左下对齐，我试图将它们全部对齐到地形的最低点。

我有以下信息： 地图上我希望所有东西都对齐的最低点（300 处）。背景的视差/滚动因子。背景的高度。

![http://i.imgur.com/BRlNP.jpg](../Images/91a754ef002422bc39c9fe2d39f8b78f.png)

我试过了：

```
background.y = lowestPoint; // doesn't work
background.y = lowestPoint * parallaxFactor; // doesn't work, way off
background.y = lowestPoint + lowestPoint * parallaxFactor; // doesn't work 
```

我显然在这里遗漏了一些东西。

基本上，我试图根据它的视差因子和地形中的最低点来计算放置背景图块的注册点的位置。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:49:38.230

如果我理解正确；屏幕位置计算为

```
screenX = (positionX - cameraX) * parallaxFactor
screenY = (positionY - cameraY) * parallaxFactor 
```

然后要在某个相机位置对齐具有不同视差因子的两个位置，您需要匹配屏幕坐标：

```
obj1.screenY = (obj1.positionY - cameraY) * obj1.parallaxFactor
obj2.screenY = (obj2.positionY - cameraY) * obj2.parallaxFactor

(obj1.positionY - cameraY) * obj1.parallaxFactor =
    (obj2.positionY - cameraY) * obj2.parallaxFactor

obj1.positionY =
    (obj2.positionY - cameraY) * F + cameraY 
```

哪里`F = obj2.parallaxFactor / obj1.parallaxFactor`。

水平方向也是如此。

# c++ - 卸载基于 Inno 的设置时从用户配置文件中删除文件

> ID：11006934
> 
> 赞同：1
> 
> 时间：2012-06-13T01:04:32.200
> 
> 标签：c++, installation, inno-setup

是否可以从此文件夹中删除文件以及如何删除？

目前我有这个不起作用

```
[UninstallDelete]
Type: files; Name: "{userappdata}\Roaming\Myapp\*";
Type: files; Name: "{commonappdata}\Roaming\Myapp\*";
Type: files; Name: "{app}\*.*";

[Code]
/////////////////////////////////////////////////////////////////////
function GetUninstallString(): String;
var
  sUnInstPath: String;
  sUnInstallString: String;
begin
  sUnInstPath := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\{#emit SetupSetting("AppId")}_is1');
  sUnInstallString := '';
  if not RegQueryStringValue(HKLM, sUnInstPath, 'UninstallString', sUnInstallString) then
    RegQueryStringValue(HKCU, sUnInstPath, 'UninstallString', sUnInstallString);
  Result := sUnInstallString;
end;

/////////////////////////////////////////////////////////////////////
function IsUpgrade(): Boolean;
begin
  Result := (GetUninstallString() <> '');
end;

/////////////////////////////////////////////////////////////////////
function UnInstallOldVersion(): Integer;
var
  sUnInstallString: String;
  iResultCode: Integer;
begin
// Return Values:
// 1 - uninstall string is empty
// 2 - error executing the UnInstallString
// 3 - successfully executed the UnInstallString

  // default return value
  Result := 0;

  // get the uninstall string of the old app
  sUnInstallString := GetUninstallString();
  if sUnInstallString <> '' then begin
    sUnInstallString := RemoveQuotes(sUnInstallString);
    if Exec(sUnInstallString, '/SILENT /NORESTART /SUPPRESSMSGBOXES','', SW_HIDE, ewWaitUntilTerminated, iResultCode) then
      Result := 3
    else
      Result := 2;
  end else
    Result := 1;
end;

/////////////////////////////////////////////////////////////////////
procedure CurStepChanged(CurStep: TSetupStep);
begin
  if (CurStep=ssInstall) then
  begin
    if (IsUpgrade()) then
    begin
      UnInstallOldVersion();
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:35:15.217

虽然 Inno 可以从运行卸载程序的用户的配置文件中删除文件，但它不能触及任何其他用户的配置文件。

如果尝试运行卸载程序的用户是受限用户，它将询问管理员详细信息，因此任何`{user...}`常量都将解析为管理员用户，而不是受限用户。

在这种情况下，您最好的选择是保留任何用户的配置和数据，以防他们想要重新安装或拥有漫游配置文件。另请注意，在上面的代码中，旧设置在升级过程中被删除，这将触发“删除所有用户的数据”选项。我确定这不是你想要的...

# php - 电话号码从 ipad 的网站上消失

> ID：11006939
> 
> 赞同：1
> 
> 时间：2012-06-13T01:05:35.587
> 
> 标签：php, html, ios, phone-number

我发现这是一个完全“WTF”的情况。[在本网站](http://www.akra.com.au)上，联系人页面上的电话号码在 ipad 和 iphone 上查看时会消失。在其他所有方面，电话号码都正确显示。主页上有一个电话号码，在ipad和iphone上都能正确显示，但联系人页面上的号码却没有。

我试过了：

*   删除联系页面和/或头文件中的其他表单脚本。结果：数字仍然不显示；
*   使用 html 字符代替 +、( 和 )。结果：数字仍然不显示；
*   使用字母而不是数字。结果：文本正确显示；
*   将电话号码从联系人页面复制并粘贴到主页。结果：数字在主页上正确显示
*   将电话号码从联系人页面复制并粘贴到其他页面。结果：数字不显示；
*   检查不可见字符。结果：没有隐形字符。

我发现[了另一个](https://stackoverflow.com/questions/10191014/phone-number-are-not-visible-in-ipad)与此问题相关的问题，但它已被关闭，因为它不是一个真正的问题。

请在下面找到我的代码：

```
 <p><em>A &amp; K Ross Associatest Pty Ltd</em><br>
    3 Gunyah Drive<br>
    Trentham<br>
    Vic 3458 Australia<br>
    Email: info@akra.com.au<br>
    Telephone: + 61 (0)3 5424 1700</p>
    <p><em>Alan Ross</em><br>
    Mobile: +61 (0)407 842 537</p>
    <p><em>Katherine Ross</em><br>
    Mobile: +61 (0)438 120 704</p> 
```

是的，当然，这可能是我在某个地方犯的一个荒谬的错误，但我终其一生都无法找到我犯错的地方。

我真的很感激一些帮助。MTIA。

编辑：

我没有使用任何特定于移动/手持设备或屏幕宽度等的样式。应用于文本的 CSS 样式如下：

```
.contact p {
line-height:18px;
margin-bottom:13px;
}
p {
color:#858585;
font-family:Arial,Helvetica, sans-serif;
font-size:13px;
width:630px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:17:31.190

电话号码在 iPad 和 iPhone 上的风格有所不同，因此您可以轻点它们来拨打电话。我可能猜想您的 CSS 中使用了它们的类的样式冲突，使其变为白色或不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-25T05:47:57.747

我制定了一个简单的解决方案。Iphone 为电话号码创建锚标签并应用白色，使其变得不可见。

浏览器上的普通视图

```
 <span class="Phone-no">1800-658-128</span> 
```

苹果手机视图

```
 <span class="Phone-no"><a>1800-658-128</a></span> 
```

解决方案

```
.Phone-no a{
   color : #0000;
  } 
```

将颜色更改为用户所需的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T09:54:39.430

谢谢你，我在使用 iPhone 时遇到了同样的问题！了解不可见的添加`<a>`有助于解决这个问题，除了标签造成的间距问题！只为 iPhone 做这么多额外的工作！！！所以我做了这个风格：

```
.iphoneSucksForMakingMeStyleThisText a {color: black;} 
```

在模态中使用此 HTML：

```
 <div class="modal__content" id="modal-1-content">
    <h3>SOLD</h3>
    <p class="iphoneSucksForMakingMeStyleThisText">Call: 0000000000</p>
    <p>Email: bla@blablabla.co.za</p>
  </div> 
```

# ruby - 大虾PDF：创建没有默认页面的模板

> ID：11006942
> 
> 赞同：0
> 
> 时间：2012-06-13T01:05:45.413
> 
> 标签：ruby, pdf, prawn

我想创建一个包含一页或多页长的虾的文档，每个页面使用不同的模板。

```
Prawn::Document.generate("test.pdf") do
  doc.faces.each do |face|
    start_new_page(:template => face.background_path)
  end
end 
```

这可以工作并创建一个文档，但是第一页是空白字母大小的页面，然后显示我添加了 start_new_page 的页面。有没有办法让虾不生成第一页？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:43:43.630

```
pdf = Prawn::Document.new(:skip_page_creation => true)
doc.faces.each do  |face|
  pdf.start_new_page(:template => face.background_path)
  < your page building code here >
end 
```

如果我正确阅读文档应该可以工作。

我的控制器代码如下所示：

```
def pdf
  @person = Person.find(params[:id])
  send_data @person.as_pdf, :filename => "#{@person.pdfName}.pdf", :type => "application/pdf"
end 
```

person.rb 中的 as_pdf 方法看起来像

```
def as_pdf(type = 'short')
  pdf = Prawn::Document.new(:margin => [36, 36, 36, 36] )
  driver = self.pdf_layout_info
  driver.each do |element|
    < lots of ugly layout logic >
  end
  pdf.render
end 
```

# android - 检测连接了两个耳机的耳机上的按钮按下？

> ID：11006944
> 
> 赞同：0
> 
> 时间：2012-06-13T01:06:01.697
> 
> 标签：android

如果我将两套耳机插入一部手机（使用耳机分离器），按下按钮时设备有什么方法可以区分两者？

每个耳机上都有一个小按钮（并且只有一个按钮），可以被 android 检测到。但是，我想知道是否可以确定哪个耳机按下了它的按钮。

从我目前看到的情况来看，使用`getSource()`或`getDeviceID()`在关键事件上对任一耳机产生相同的结果

编辑 - 我尝试了不同的耳机型号，但所有信息都是相同的。看起来不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:10:30.260

我认为这对于软件来说是不可能的，它更多的是硬件问题，所以我说的是不，我不相信有可能做到这一点，因为 android 认为它与每个耳机完全相同。

# wpf - 杀毒软件说我的程序可疑

> ID：11006947
> 
> 赞同：2
> 
> 时间：2012-06-13T01:06:12.710
> 
> 标签：wpf, antivirus

我在 wpf visual studios 中构建了一个程序，当我运行它时，avast 说检测到可疑程序然后关闭我的程序。

我可以做任何事情来验证它，还是我必须进入 avast 并将其设置为不阻止我的程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:11:47.850

您当然可以在大多数主要的防病毒包中解锁您自己的程序（首先确保您的防病毒软件是最新的并且您最近扫描了您的开发机器以确保实际上没有病毒） .

我无权访问 Avast，但从他们网站上的支持文章看来，您可以将文件添加到“文件屏蔽中的排除列表”中。

如果您打算分发该程序，您可以[将该程序](https://support.avast.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=586)作为疑似误报提交给 Avast。如果他们同意这是误报，他们可以在下次更新时取消阻止它。

# c# - 我应该如何构建使用内联 SQL 从数据库生成数据的应用程序？

> ID：11006955
> 
> 赞同：1
> 
> 时间：2012-06-13T01:08:16.260
> 
> 标签：c#, asp.net, sql, sql-server-2008

我目前有一个数据访问层，它也使用 Web 服务公开一些 API。

### API 调用

```
[WebMethod]
public List<GlobalStat> GetStats()
{
    List<GlobalStat> Stats = new List<GlobalStat>();

    string sql = @"
       A huge multi-line SQL query
    ";

    try
    {
        string ConString = Constants.connString;
        con = new SqlConnection(ConString);

        cmd = new SqlCommand(sql, con);
        con.Open();
        dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            GlobalStat stat = new GlobalStat();
            stat.Key = dr[0].ToString();
            stat.Value = int.Parse(dr[1].ToString());

            Stats.Add(stat);
        }

    }
    catch (Exception x)
    {

        Response.Write(x);
    }

    return Stats;
} 
```

我有点担心 SQL 的编写方式。

有很多东西硬编码在其中：数据库名称，表名称等。

为了解决这个问题，我是只在一个地方创建一个包含所有 SQL 命令的单独全局文件，还是有更好的范例？我没有在应用程序中创建 SQL 表，但这些表驻留在不同的预构建数据库中。

我应该如何构建使用内联 SQL 从数据库生成数据的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:11:22.057

恕我直言，正确的方法是调用存储过程。在您的 C# 代码中，您只需引用一个存储过程并传递正确类型的参数。在您的 C# 代码中构建的即席 SQL 为许多事情打开了大门——其中最重要的是 SQL 注入和计划缓存的低效使用。此外，它使您很难在不重新编译和重新部署应用程序的情况下重构查询。这对于某些更改是必要的（例如，当存储过程的接口更改时），但对于许多其他典型的查询更改则不需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T01:17:09.417

您提出了几个问题，而您向我们展示的代码又提出了一些问题。您可能需要考虑的事情：

*   尝试将以数据库为中心的活动限制在它们自己的类中。`GlobalStats`除了处理从数据库中提取数据并将其变为实际对象的实际类之外，没有其他人需要知道如何为对象返回行列表。没有人。如果其他人确实知道，那么您的班级没有使用信息隐藏（因为我们使用的是面向对象的语言，所以您应该使用）。

*   如果对象 implements `IDisposable`，那么你应该用一个`try {} finally {}`块来包装它，或者更好的是，用一个`using`语句来包装它（见我下面的第二个例子）。

*   您的连接字符串应该只能被实际需要它的类访问（分离您的关注点的一部分）。也许有一个包含该信息的基本 DataAccess 类？

    ```
    public abstract class DataAccess 
    {
        protected const string ConnectionString = "YourConnectionStringHere";
    } 
    ```

然后您的存储库可以从此类继承，并且您没有导致代码不必要地耦合的全局静态常量。

*   您的代码现在的方式（如果您的所有代码确实是您向我们展示的示例），那么您可能遇到了[SQL 注入问题](https://www.owasp.org/index.php/SQL_Injection)。这值得立即修复（我将在下面向您展示一个示例）。

    1.  [使用参数化查询](https://stackoverflow.com/questions/305044/how-can-i-avoid-sql-injection-attacks-in-my-asp-net-application)（如果您确实必须在 C# 中使用 SQL）。
    2.  [分离您的关注点](https://stackoverflow.com/questions/98734/what-is-separation-of-concerns)（从什么时候开始 Web API 调用需要关注数据库？
    3.  不要[捕获你无法处理的异常](https://stackoverflow.com/questions/22623/net-throwing-exceptions-best-practices)。

以下是我将如何编写您正在编写的内容（请注意，此代码并不是真正要使用的，仅用于说明目的）：

```
[WebMethod]
public List<GlobalStat> GetStats()
{
    GlobalStatsRepository repository = new GlobalStatsRepository();
    List<GlobalStat> stats = repository.GetStats();
    return stats;
} 
```

### 数据访问层

```
public class GlobalStatsRepository
{
    public List<GlobalStat> GetStats()
    {

         string sql = @"SELECT * from GlobalStats"; //no, not a good practice

        var stats = new List<GlobalStat>();

        try
        {
            string ConString = Constants.connString;
            conn = new SqlConnection(ConString);

            cmd = new SqlCommand(sql, conn);
            conn.Open();
            dr = cmd.ExecuteReader();

            while (dr.Read())
            {
                GlobalStat stat = new GlobalStat();
                stat.Key = dr[0].ToString();
                stat.Value = int.Parse(dr[1].ToString());

                stats.Add(stat);
            }

        }
        catch (SQLDataReaderException ex)
        {
            logger.Log(ex);
            throw;
        }
    return stats;
    }
} 
```

### 参数化查询示例

```
public List<GlobalStat> GetStatsById(int id)
{
    var stats = new List<GlobalStat>();

    string sql = @"SELECT * from GlobalStats WHERE Id = @Id";
    using (SqlConnection conn = new SqlConnection(ConString))
    {
         conn.Open();
         using (SQLCommand command = new SqlCommand(sql, conn))
         {         
             command.Parameters.Add(new SqlParameter("Id", id));
             SqlDataReader reader = command.ExecuteReader();
             while (reader.Read())
             {
                  GlobalStat stat = new GlobalStat();
                  stat.Key = dr[0].ToString();
                  stat.Value = int.Parse(dr[1].ToString());

                  stats.Add(stat);
             }
         }
     }
     return stats;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T01:17:01.583

[存储过程](http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx)或[LINQ to SQL](http://msdn.microsoft.com/en-us/library/bb425822.aspx)是 C# 中两种流行的数据库访问范例。

有关 LINQ to SQL 的更多信息，请查看Scott Gu 博客上的[Using Linq to SQL 。](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

# objective-c - 不同的 View Controller 如何对 applicationWillResignActive 做出不同的响应

> ID：11006956
> 
> 赞同：4
> 
> 时间：2012-06-13T01:08:17.750
> 
> 标签：objective-c, ios

当我的应用程序被中断时，例如接听电话、屏幕锁定或切换应用程序，我需要它根据中断时屏幕上的视图/视图控制器做出不同的响应。

在我的第一个视图控制器中，我们称之为 VCA，我有这个

```
 [[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(doSomething)
 name:UIApplicationWillResignActiveNotification 
 object:NULL];

    -(void)doSomething{
    //code here
    }; 
```

在VCB我有

```
 [[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(doSomethingElse)
 name:UIApplicationWillResignActiveNotification 
 object:NULL];

    -(void)doSomethingElse{ //code here }; 
```

但是如果 VCB 在屏幕上，或者任何后续的视图控制器（vcc，vcd，vce），并且屏幕被锁定，它只会响应 VCA 中定义的 doSomething 方法。即使我在 VCA 之后的视图控制器之一中没有 UIApplicationWillResignActiveNotification，它仍然会响应 VCA 中定义的 doSomethign 方法。

有什么方法可以让我的应用程序根据进入后台时屏幕上的哪个视图做出不同的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:14:45.043

这在**applicationDidEnterBackground中对我有用**

```
if ([navigationViewController.visibleViewController isKindOfClass:[YourClass class]]) {
    //your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:06:30.373

你是说你的 doSomethingElse 函数永远不会被调用吗？你确定这一点，也许除了 doSomething 之外它还被调用？我认同。

在这种情况下，在 doSomething 和 doSomethingElse 中，您可以在第一行添加一个检查以忽略当前未加载的通知：

```
if ([self isLoaded] == NO)
   return; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:55:38.463

收到通知后检查当前的 visibleViewController 怎么样？如果它与您的接收器匹配而不是执行操作，否则忽略它。

# python - 更新 Oracle 数据库中的单个列

> ID：11006960
> 
> 赞同：-3
> 
> 时间：2012-06-13T01:08:41.633
> 
> 标签：python, cx-oracle

如何使用 Python 更新 Oracle 数据库中的单个列？我的脚本基本上制作了一个字符串列表，如 ["abc","world",...] 并尝试更新 oracle 数据库中的特定列。

```
var = ["abc","world",...]
cursor.prepare("INSERT INTO table(col10) VALUES (:var)")
cursor.executemany(None, var) 
```

但我最终得到“DatabaseError：ORA-01036：非法变量名/编号”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:30:41.733

请参阅使用 executemany 的[说明](http://www.gingerandjohn.com/archives/2004/02/26/cx_oracle-executemany-example/)。您需要一个 dicts 列表，每个 dicts 都有一个键“var”，其值是您在 var 列表中的字符串。

# c# - 使用asp.net网格中的标题复选框选择所有复选框

> ID：11006961
> 
> 赞同：0
> 
> 时间：2012-06-13T01:08:43.757
> 
> 标签：c#, jquery, asp.net

它尝试了许多解决方案，但没有任何效果。请为我提供 jquery 代码，通过选中标题模板中的复选框来选中 gridview 当前页面的所有复选框。我正在使用 c# 使用 asp.net 4。任何详细的指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:29:36.257

[演示](http://jsfiddle.net/8Xhj4/6/ "演示")

替换`div.gridview`为当前页面中所有复选框的容器的选择器。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:10:07.630

```
$(function () {
 $('#selectall').click(function () {
  $('#friendslist').find(':checkbox').attr('checked', this.checked);
 });
}); 
```

selectall ：复选框切换器的 id 朋友列表：要搜索 voor 复选框的 dom 元素的 id

当然，如果您希望切换器对其他复选框中的更改做出反应，您必须添加第二个 jquery 来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:32:37.363

```
$(function () {
 $('#selectall').click(function () {
  $(':checkbox[id*="checkid"]').attr('checked', this.checked);
 }); 
```

});

请务必在网格中将 checkid 替换为您的 asp.net 复选框 ID。

# html - 将导轨插入 HTML 文件

> ID：11006962
> 
> 赞同：0
> 
> 时间：2012-06-13T01:09:01.423
> 
> 标签：html, ruby-on-rails

在编写 HTML 文件时，为什么要使用`<%= INSERT RAILS HERE %>`vs.`<% INSERT RAILS HERE %>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:10:06.597

`<%= %>`发出一个字符串，`<% %>`运行代码。

在迂腐方面，您正在编写 ERb 模板，而不是 HTML 文件——无论是 HTML、JS 或其他模板，语法都是相同的。

[ERB 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)提供了额外的[（但不完整的）]信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:28:09.523

`<%= %>`将返回值并显示在您的页面中。假设你有 person.name = 'Dark'

```
 <%= person.name %> 
```

将显示`Dark`在您的网页中。

`<% %>`不会向您的页面返回任何值。它只是嵌入了简单的 ruby​​ 代码。通常与“控制语句”一起使用。

```
 <% if person.present? %>
   <span><%= person.name %></span>
 <% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:49:57.747

当我们使用`<%= %>`它时，它只是在 html 页面上显示返回的值。 `<% %>`执行了代码，但没有在 html 页面上显示它。

# android - Sony SmartWatch - 如何传递数据来控制扩展？

> ID：11006965
> 
> 赞同：0
> 
> 时间：2012-06-13T01:09:20.810
> 
> 标签：android, sony, sony-smartwatch

如果我想通过操作将一些数据（通过捆绑包或其他东西）传递给我的控制扩展`CONTROL_START_REQUEST_INTENT`，我能做什么？

我没有看到任何 Intent 或 Bundle 对象被传递给 ControlExtension 类的构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:55:27.937

您不能为此使用首选项吗？

在使用 START_REQUEST 之前，在首选项中输入一个值，即扩展是在请求中启动的，然后从扩展代码中检查该值是否存在。

但是，IMO 您应该重新考虑您的应用程序逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:03:36.527

不幸的是，目前无法知道 ControlExtension 是否由用户从手表启动，或者您是否通过 START_REQUEST 意图自己请求启动。从主机应用程序发送的结果启动不提供此类信息。

您可以通过在发送 START_REQUEST 意图时设置一个标志来解决它，然后您将知道（在一定程度上，当然不是 100%）扩展是通过请求而不是由用户启动的。这是一种解决方法，但正如我所说，不防水。

你能给我一个你想完成的例子吗？

# java - netty 文件上传内存不足错误

> ID：11006968
> 
> 赞同：0
> 
> 时间：2012-06-13T01:10:12.547
> 
> 标签：java, netty

我正在使用 netty 3.5.0 并且我已经实现了上传示例`HttpUploadServer`, `HttpUploadServerHandler`, `HttpUploaderServerPipeLineFactory`.

在`HttpUploadServerHandler`中，有一些注释掉的行

```
// fileUpload.isInMemory();// tells if the file is in Memory
// or on File
// fileUpload.renameTo(dest); // enable to move into another
// File dest
// decoder.removeFileUploadFromClean(fileUpload); //remove
// the File of to delete file 
```

当我在这些行中注释时，特别是`renameTo(dest)`，我发现它在传输大文件时间歇性失败，下面会出现内存不足错误。

旁白：`removeFileUploadFromClean`似乎没有解决

谁能告诉我发生了什么或如何解决？

我希望能够传输大文件，然后将它们从临时位置移动到最终目的地。当您不使用 时`renameTo`，转移到临时位置似乎非常好，但我想由于清理，文件很快就会被删除。

```
HttpUploadServerHandler::messageReceived
HttpUploadServerHandler::messageReceived
HttpUploadServerHandler::messageReceived
HttpUploadServerHandler::messageReceived
renaming fileoxygen.exe
fileUpload.getFilename() oxygen.exe
fileUpload.getName() myfile
java.io.IOException: Map failed
at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:748)
at sun.nio.ch.FileChannelImpl.transferToTrustedChannel(FileChannelImpl.java:437)
at sun.nio.ch.FileChannelImpl.transferTo(FileChannelImpl.java:510)
at org.jboss.netty.handler.codec.http.multipart.AbstractDiskHttpData.renameTo(AbstractDiskHttpData.java:292)
at org.jboss.netty.handler.codec.http.multipart.MixedFileUpload.renameTo(MixedFileUpload.java:117)
at com.vayyoo.vaf.nettyapp.upload.HttpUploadServerHandler.writeHttpData(HttpUploadServerHandler.java:317)
at com.vayyoo.vaf.nettyapp.upload.HttpUploadServerHandler.readHttpDataChunkByChunk(HttpUploadServerHandler.java:253)
at com.vayyoo.vaf.nettyapp.upload.HttpUploadServerHandler.messageReceived(HttpUploadServerHandler.java:208)
at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
at org.jboss.netty.handler.codec.http.HttpContentEncoder.messageReceived(HttpContentEncoder.java:67)
at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:95)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:359)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:568)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437)
at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.OutOfMemoryError: Map failed
at sun.nio.ch.FileChannelImpl.map0(Native Method)
at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:745)
renamed file to c:\temp\oxygen.exe
HttpUploadServerHandler::messageReceived
renaming fileoxygen.exe
fileUpload.getFilename() oxygen.exe
fileUpload.getName() myfile
... 32 more
java.io.IOException: Map failed
at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:748)
at sun.nio.ch.FileChannelImpl.transferToTrustedChannel(FileChannelImpl.java:437)
at sun.nio.ch.FileChannelImpl.transferTo(FileChannelImpl.java:510)
at org.jboss.netty.handler.codec.http.multipart.AbstractDiskHttpData.renameTo(AbstractDiskHttpData.java:292)
at org.jboss.netty.handler.codec.http.multipart.MixedFileUpload.renameTo(MixedFileUpload.java:117)
at com.vayyoo.vaf.nettyapp.upload.HttpUploadServerHandler.writeHttpData(HttpUploadServerHandler.java:317)
at com.vayyoo.vaf.nettyapp.upload.HttpUploadServerHandler.readHttpDataAllReceive(HttpUploadServerHandler.java:236)
at com.vayyoo.vaf.nettyapp.upload.HttpUploadServerHandler.messageReceived(HttpUploadServerHandler.java:211)
at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
at org.jboss.netty.handler.codec.http.HttpContentEncoder.messageReceived(HttpContentEncoder.java:67)
at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:95)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:359)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:568)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437)
at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)
at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.OutOfMemoryError: Map failed
at sun.nio.ch.FileChannelImpl.map0(Native Method)
at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:745)
... 32 more
renamed file to c:\temp\oxygen.exe
HttpUploadServerHandler::messageReceived 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:05:25.143

对我来说，它的目的地看起来`renameTo()`与临时文件不属于同一个文件系统。因此，移动文件的尝试失败并将文件`renameTo()`复制到目标并删除临时文件。但是，似乎`renameTo()`以一种奇怪的方式实现了文件复制操作。（即错误）。在修复错误之前，您可以：

1.  指定与临时文件目录属于同一分区的目标，或
2.  获取临时文件的路径，自行实现复制操作。

您可以在此处跟踪此问题：[https ://github.com/netty/netty/issues/398](https://github.com/netty/netty/issues/398)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:39:37.460

您提出的问题将在版本 3.5.1.Final 中修复。

# ruby-on-rails - 初始化变量 RUBY

> ID：11006972
> 
> 赞同：0
> 
> 时间：2012-06-13T01:10:40.480
> 
> 标签：ruby-on-rails, ruby, class-variables

我有一个班级样本

Sample.class 返回

```
(id :integer, name :String, date :date) 
```

并且哈希将所有给定的属性作为其键。那么如何在不独立分配每个属性的情况下初始化 Sample 的变量。

就像是

```
Sample x = Sample.new

x.(attr) = Hash[attr] 
```

如何遍历属性，问题是哈希包含不属于类属性的键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:17:57.743

看看[这篇关于对象初始化](http://www.rubyist.net/~slagell/ruby/objinitialization.html)的文章。你想要一个`initialize`方法。

编辑你也可以看看[这个关于设置实例变量的帖子](https://stackoverflow.com/questions/6741567/ruby-metaprogramming-dynamic-instance-variable-names)，我认为这正是你想要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:05:58.470

```
class Sample
  attr_accessor :id, :name, :date
end

h = {:id => 1, :name => 'foo', :date => 'today', :extra1 => '', :extra2 => ''}

init_hash = h.select{|k,v| Sample.method_defined? "#{k}=" }

# This will work
s = Sample.new
init_hash.each{|k,v| s.send("#{k}=", v)}

# This may work if constructor takes a hash of attributes
s = Sample.new(init_hash) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T05:06:36.957

试试这个：

```
class A
  attr_accessor :x, :y, :z
end

a = A.new
my_hash = {:x => 1, :y => 2, :z => 3, :nono => 5} 
```

如果您没有可以从哈希分配的属性列表，您可以这样做：

```
my_attributes = (a.methods & my_hash.keys) 
```

使用`a.instance_variable_set(:@x = 1)`语法赋值：

```
my_attributes.each do |attr|
  a.instance_variable_set("@#{attr.to_s}".to_sym, my_hash[attr])
end 
```

注意（感谢 Abe）：这假设所有要更新的属性都有 getter 和 setter，或者任何只有 getter 的属性在 my_hash 中没有键。

祝你好运！

# html - 数据库中的 Html 选项卡

> ID：11006974
> 
> 赞同：0
> 
> 时间：2012-06-13T01:10:59.773
> 
> 标签：html

如果我在标签中有一个`<pre> TABHERE </pre>`标签，然后将`<pre>`标签内的所有信息存储在数据库中。当我尝试显示数据库中的内容时，该选项卡是否仍然存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:31:25.333

除非您的数据库对选项卡做了一些奇怪的事情，否则它应该完全按照您放入的方式返回它。然后，当您显示它时，只要它位于另一个`<pre>`标记内，html 就会将它显示为选项卡。如果您的 html 源代码中有一个不在`<pre>`标签（或其他保留空格的标签）中的制表符，那么它将被呈现为空格。

# java - 将json从php解析到android时显示空

> ID：11006976
> 
> 赞同：0
> 
> 时间：2012-06-13T01:11:13.787
> 
> 标签：java, php, android, json

这是我的php代码

```
$titikPetaInti = array();
while($row = mysql_fetch_assoc($hasil2))
{
     $titikPetaInti[] = $row['koordinat'];
}

$data = "{titikPeta:".json_encode($titikPetaInti)."}";
echo $data;
?> 
```

那么这里是我的 android 代码 xResultTitikPeta 是对 php 的结果请求

```
jObject = new JSONObject(xResultTitikPeta);
        JSONArray myArray1 = (JSONArray) jObject.getJSONArray("titikPeta");
        String[]titikPeta = new String[myArray1.length()];

        for(int a = 0; a < myArray1.length(); a++)
        {
            titikPeta[a] = myArray1.getJSONObject(a).toString();
        }
        teks1 = (TextView) findViewById(R.id.textView1);
        teks1.setText(Arrays.toString(titikPeta)); 
```

它在模拟器上显示 null 就像没有价值

**- 编辑 -**

我认为在解析代码时出现了一些错误，当我在 android 中显示 xResultTitikPeta 时，它给了我字符串结果

这是 xResultTitikPeta 的结果

```
{titikPeta:["-8.705378,115.225189","-8.56056700000000,115.42395100000","-8.57659700000000,115.40065300000","-8.55596300000000,115.41085700000","-8.51855200000000,115.491908000000","-8.54743200000000,115.41036800000","-8.56551100000000,115.45173900000","-8.44321000000000,115.616019000000"]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:27:46.527

这是**格式错误**的JSON！键上没有双引号。

```
$data = "{titikPeta:".json_encode($titikPetaInti)."}"; 
```

而是这样做：

```
$data = '{"titikPeta":'.json_encode($titikPetaInti).'}'; 
```

**编辑：**

好的，删除手工制作的方法：

```
$data = json_encode(array("titikPeta"=>$titikPetaInti)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:50:20.693

尝试

```
$data = "{\"titikPeta\":".json_encode($titikPetaInti)."}"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T04:28:27.573

好的，我找到了你的错误！除了解决`$data = json_encode(array("titikPeta" => $titikPetaInti));`问题外，问题还在这里：

```
titikPeta[a] = myArray1.getJSONObject(a).toString(); 
```

的元素`myArray1`实际上是类型`string`并导致抛出异常，因此您需要：

```
titikPeta[a] = myArray1.getString(a); 
```

这会产生以下输出：

```
[-8.705378,115.225189, -8.56056700000000,115.42395100000, -8.57659700000000,115.40065300000, -8.55596300000000,115.41085700000, -8.51855200000000,115.491908000000, -8.54743200000000,115.41036800000, -8.56551100000000,115.45173900000, -8.44321000000000,115.616019000000] 
```

由于您的数组中的每个元素都是 form `"-8.705378,115.225189"`，因此 JSON 解析器假定它们是字符串。如果将元素更改为`"-8.705378","115.225189"`还可以使用：

```
titikPeta[a] = Double.toString(myArray1.getDouble(a)); 
```

但是，第一个版本也可以使用。

注意：我个人的偏好是我将每个数组元素声明为：

```
{"x":-8.705378,"y":115.225189} 
```

# ruby - jinja2 中宏的 erb 等价物是什么？

> ID：11006977
> 
> 赞同：0
> 
> 时间：2012-06-13T01:11:14.067
> 
> 标签：ruby, sinatra, erb, jinja2

在 jinja2 中，我可以在宏中指定常用的模板代码，本质上类似于模板函数：

```
{% macro input(name, value='', type='text', size=20) -%}
    <input type="{{ type }}" name="{{ name }}" value="{{value|e }}" size="{{ size }}">
{%- endmacro %} 
```

然后像这样使用它：

```
{% input("hello") %} 
```

有没有办法用 erb 模板完成类似的事情？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:50:50.773

如果您使用 lambdas/procs 而不是方法，那么您可以：

```
require 'erb'

doc = <<ERB
<% input = lambda do |name, value='', type='text', size=20| %>
  <input type="<%= type %>" name="<%= name %>" value="<%= value || 'e' %>" size="<%= size %>">
<% end %>
<% input["hello"] %>
<% input["HELLO", 123, 'select', 50] %>
ERB

puts ERB.new(doc, 0, '>').result
# >>   <input type="text" name="hello" value="" size="20">
# >>   <input type="select" name="HELLO" value="123" size="50"> 
```

问题是 erb（和 erubis）通过解析文档并创建另一段代码来创建这些字符串，其中标签内部和外部的值被反转。然后标签之间的模板只是附加到一些局部变量。（实际上有一些方法可以解决这个问题，但你必须深入一些，我必须先扩展 erubis 才能获得我想要的替代行为）。当您创建方法时，会更改范围并且不再可以看到局部变量，因此它会给您一些模糊的错误`NameError: undefined local variable or method ‘_erbout’ for main:Object`当您使用闭包时，会捕获环境，包括局部变量，因此您可以写入它。

# boost - boost_thread 未在 NaCl 上链接

> ID：11006985
> 
> 赞同：1
> 
> 时间：2012-06-13T01:12:25.453
> 
> 标签：boost, boost-thread, google-nativeclient

将 -lboost_thread 链接到我在 google Native Client (pepper_19) 上的可执行文件时收到此错误：

nacl_sdk/pepper_19/toolchain/mac_x86_glibc/x86_64-nacl/usr/lib/libboost_thread.a：无法读取符号：存档没有索引；运行ranlib添加一个

我在这里根据naclports的说明编译了boost：[http](http://code.google.com/p/naclports/wiki/InstallingSDL) ://code.google.com/p/naclports/wiki/InstallingSDL （除了使用boost库目录而不是SDL...我也使用了同样的过程来正确编译NaCl zlib 库）

```
cd naclports/src/libraries/boost_1_47_0

export NACL_PACKAGES_BITSIZE=32; ./nacl-boost_1_47_0.sh
export NACL_PACKAGES_BITSIZE=64; ./nacl-boost_1_47_0.sh 
```

这会生成 libboost_thread.a 文件并将其放在我的 NACL 安装的 /usr/lib 目录中。我想也许不知何故我错误地构建了一个错误类型的库来与 NaCl 链接。有没有办法检查和/或修复它？

我试过了：

```
cd naclports/src/out/repository-x86_64/boost_1_47_0/bin.v2/libs/thread/build/darwin-4.2.1/release/link-static/threading-multi

nm libboost_thread.a 
```

这产生了：

```
libboost_thread.a(thread.o):
0000000000052d08 s EH_frame0
000000000004f50c s GCC_except_table100
000000000004f534 s GCC_except_table101
000000000004f574 s GCC_except_table102
000000000004f5c0 s GCC_except_table103
000000000004f600 s GCC_except_table104
000000000004f64c s GCC_except_table105
000000000004f68c s GCC_except_table106
000000000004f6d8 s GCC_except_table107
.
.
.
. 
```

等等等等。但是后来我跑了：

nacl_sdk/pepper_19/toolchain/mac_x86_glibc/bin/x86_64-nacl-nm libboost_thread.a

并得到：

```
__.SYMDEF SORTED: File format not recognized
nacl_sdk/pepper_19/toolchain/mac_x86_glibc/bin/x86_64-nacl-nm: thread.o: File format not recognized
nacl_sdk/pepper_19/toolchain/mac_x86_glibc/bin/x86_64-nacl-nm: once.o: File format not recognized 
```

最后。我跑了：

```
file pthread/thread.o
pthread/thread.o: Mach-O 64-bit object x86_64 
```

但是 zlib 目标文件上的相同命令会导致：

```
ELF 64-bit LSB relocatable, x86-64, version 1, not stripped 
```

我将不胜感激有关构建正确交叉编译的 NaCl libboost_thread.a 的建议

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:50:41.140

NaCl 端口中的一些库只能在 linux 上构建。因此，您必须找到为什么 boost 决定使用系统 ar 而不是 x86_64-nacl-ar 或者在它们相同的地方安装带有 linux 的 VM。

# html - IE7 中 CSS 菜单的奇怪可见性问题

> ID：11006990
> 
> 赞同：0
> 
> 时间：2012-06-13T01:13:05.813
> 
> 标签：html, css, menu

我有一个纯 CSS 菜单（即没有 JS），它在所有现代浏览器中都运行良好，但在 IE7 中有一个奇怪的错误。它在 IE6 中根本不能正常工作，但我们不需要在这里解决这个问题。问题如下：

当您将鼠标悬停在菜单选项选项卡上时，会出现下拉菜单。当您将鼠标移开该选项时，下拉菜单会消失 - 仅在 IE7 中，选项卡也会消失！让我印象深刻的是——如果您再次将鼠标悬停在它上面，或者将鼠标悬停在任何其他选项卡上，该选项卡将重新出现。这怎么可能？！将鼠标悬停在另一个元素上使原始选项卡再次可见？令人讨厌的是，它在这个网站的最后一个版本中工作，不知何故在新设计中，它被打破了。我试过比较，无法弄清楚它是什么。

这是当前损坏版本的小提琴：http: [//jsfiddle.net/pXZLJ/1/](http://jsfiddle.net/pXZLJ/1/)

这是旧的工作之一：http: [//jsfiddle.net/43utK/](http://jsfiddle.net/43utK/)

在 IE7 中查看这些以查看问题。帮助？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:09:39.347

尝试在您的 css: 中删除这一行`.nrmenu * {position:relative}`。它似乎可以解决问题。

编辑：正如 sarcastyx 指出的那样，它似乎确实会影响下拉菜单。因此，添加`position:relative`到`.nrmenu li`并再次出现下拉菜单。

# c# - 使用 innerHtml 设置后获取 textarea 内容

> ID：11006994
> 
> 赞同：0
> 
> 时间：2012-06-13T01:14:30.103
> 
> 标签：c#, asp.net, html

我正在研究asp.net 中的一些东西，它需要允许用户更改文本区域内的信息内容。发生的情况是，我通过在外部 .txt、.html 或 .rtf 文件中获取信息来设置文本区域内容，然后使用 innerHtml 将其设置到文本区域中。

至于检索数据，我也在页面后面的 .cs 文件中使用 innerHtml 来执行此操作。问题是当我尝试这样做时，即使我已经替换了每一行文本，我也会恢复以前设置的内容。例如，如果我最初设置“这是初始文本”，然后将其全部替换为“新文本”，innerHtml 只会返回“这是初始文本”。

有没有另一种方法来获取新文本或让 innerHtml 做我想做的事？

编辑：忘记包含代码。

在代码的 aspx 方面，我只有一个简单的文本区域，
`<textarea id="TextArea1" cols="80" rows="10" runat="server"></textarea>`

在 aspx.cs 方面，

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ces = new ContentEditorService.ContentEditorService();
        strRtfDir = Server.MapPath("Testfile.rtf");

        string strContents = ces.loadEditorContents(strRtfDir);
        TextArea1.InnerText = strContents;
    } 
```

其中 ces 加载一个单独的 .cs 文件，用于加载和保存文本。

至于获取内容，我正在使用

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        string strTxtArea = TextArea1.InnerHtml;

        System.Diagnostics.Debug.WriteLine(strTxtArea);   
        //ces.saveEditorContents(strContents, strRtfDir);
    } 
```

它现在获取内容并将它们打印在 Visual Studio 的调试窗口中，只是为了查看我是否设法获取更改的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:48:54.633

您可以使用 jquery 来获取文本区域内的值

```
var text = $('#yourTextAreaId').html(); 
```

或者

```
var text = $('#yourTextAreaId').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:53:10.970

将您的代码更改为：

```
 if (!IsPostBack)
    {
        ces = new ContentEditorService.ContentEditorService();
        strRtfDir = Server.MapPath("Testfile.rtf");

        string strContents = ces.loadEditorContents(strRtfDir);
        TextArea1.InnerText = strContents;
    } 
```

因为即使您单击了 Button1，Page_Load 也将始终被执行。

# video - 如何修复损坏的 3gp 文件

> ID：11006996
> 
> 赞同：0
> 
> 时间：2012-06-13T01:14:57.090
> 
> 标签：video, vlc, codec, repair, 3gp

我有一个损坏的 3gp 视频文件：缺少文件末尾。

发生这种情况是因为我手机的电池几乎没电了，当手机将视频保存在 SD 卡上时，它就停在了中间。

我怎样才能看这个半视频文件？它已经有 50MB，所以视频中最重要的部分应该还在。

我尝试了 VLC、GOM、Adobe Premiere 等几个程序，但没有一个可以播放这个文件。

我猜文件的标题以某种方式包含整个长度，如果长度不合适，玩家会说它坏了。但这只是一个猜测。

也许有人知道，如何用合适的新标题替换标题，例如来自另一个视频？

# python - 让你的 python 代码在所有计算机上执行

> ID：11006997
> 
> 赞同：1
> 
> 时间：2012-06-13T01:14:57.510
> 
> 标签：python, python-2.7, exe

我编写了一个 python GUI 应用程序。我想在我朋友的计算机上运行代码，他的计算机中没有 python 解释器，并且由于无法连接到互联网而无法下载。我该怎么做发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:17:20.520

使用 py2exe（适用于 Windows）、py2app（适用于 Mac）或 cx_freeze（适用于 Linux）将 Python 解释器、您的程序和标准库捆绑到一个可执行文件中，您可以在完全没有 Python 的机器上使用。

PS：如果你朋友的电脑不在网上，但是你给他你的程序，你也可以给他找Python的工具包等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:17:30.163

[py2exe](http://www.py2exe.org/index.cgi/Tutorial)是一个库，允许您为 Windows 编译 Python 可执行文件。还有[cx_Freeze](http://cx-freeze.sourceforge.net/)，它是跨平台的。

# c# - 使用 C# 和 ASP 检查数据集中是否存在列值

> ID：11006998
> 
> 赞同：0
> 
> 时间：2012-06-13T01:15:02.103
> 
> 标签：c#, asp.net, ms-access

我尝试了各种我找到的解决方案，要么我不知道如何正确实施它们，要么它们根本不起作用。我有一种方法允许某人在表格中搜索特定订单号，然后该行的其余部分将显示在网格视图中。但是，如果输入的订单号在表中不存在，那么我会收到服务器错误/异常。我怎样才能做到这一点，以便在搜索完成之前或搜索完成时，如果搜索到数据库中不存在的订单号，那么我可以创建错误？

我正在使用 ms 访问数据库、C# 和 ASP。

这是我正在使用的一些代码：

查询订单表的方法：

```
public static dsOrder SearchOrder(string database, string orderNum)
{
    dsOrder DS;
    OleDbConnection sqlConn;
    OleDbDataAdapter sqlDA;

    sqlConn = new OleDbConnection("PROVIDER=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" + database);

    DS = new dsOrder();

    sqlDA = new OleDbDataAdapter("select * from [Order] where order_num='" + orderNum + "'" , sqlConn);

    sqlDA.Fill(DS.Order);

    return DS;
} 
```

并使用该方法：

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    Session["OrderNum"] = txtSearch.Text;
    Session["ddl"] = ddlSearch.Text;

    if (Session["ddl"].ToString() == "Order")
    {
        dsOrder dataSet2;

        dataSet2 = Operations.SearchOrder(Server.MapPath("wsc_database.accdb"), Session["OrderNum"].ToString());

        grdSearch.DataSource = dataSet2.Tables["Order"];

        grdSearch.DataBind();

    } 
```

我需要尝试/捕捉吗？

非常感谢谁能帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:46:13.517

您可以简单地检查一下 DataSet 是否为空

```
if (dataSet2 == null || dataSet2.Tables.Count == 0 || dataSet2.Tables["Order"] == null || dataSet2.Tables["Order"].Rows.Count == 0)
{
    //display error to user
}
else
{
    // your code to populate grid 
} 
```

如果您不想显示错误，则只需在填充 GridView 之前进行此检查

```
if (dataSet2.Tables != null && dataSet2.Tables["Order"] != null)
{
    // your code to populate grid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:58:18.447

我在填充数据网格时使用了不同的方法，并且始终使用如下参数：

```
public static DataTable GetGridDatasource(string database, string ordnum) {
  using (OleDbConnection con = new OleDbConnection("PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source=" + database))
  {
    con.Open();
    OleDbCommand cmd = con.CreateCommand();
    cmd.CommandText = "select * from [Order] where order_num=[OrderNumber]";
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("OrderNumber", ordnum);
    OleDbDataAdapter da = new OleDbDataAdapter(cmd);
    DataTable dt = new DataTable();
    da.Fill(dt);
    return dt;
  }
}
protected void btnSearch_Click(object sender, EventArgs e)
{
  Session["OrderNum"] = txtSearch.Text;
  Session["ddl"] = ddlSearch.Text;

  if (Session["ddl"].ToString() == "Order")
  {
    grdSearch.DataSource = GetGridDatasource(Server.MapPath("wsc_database.accdb"), Session["OrderNum"].ToString());

  }
} 
```