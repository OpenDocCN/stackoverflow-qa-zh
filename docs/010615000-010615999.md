# StackOverflow 问答 10615000-10615999

# c# - 如何区分真实和虚拟按键？

> ID：10615001
> 
> 赞同：1
> 
> 时间：2012-05-16T08:47:40.547
> 
> 标签：c#, wpf

我正在开发一个 C# 应用程序，它监视键盘和鼠标事件，并在发生预设组合的键或鼠标按钮按下时做出反应。热键检测已经通过使用键盘和鼠标挂钩起作用。但是，当应用程序的答案是使用 SendInput() 发送新的组合键时，我遇到了麻烦。

假设应用程序等待“ *Alt+RMB* ”m 抑制它并改为发送“ *Shift+A ”。*当我开始物理按下“ *Alt+RMB* ”时，检测到组合并发送虚拟“ *Shift+A* ”。

然而，假按键立即与原始键混合，因此应用程序现在检测到“ *Alt+Shift+A+RMB* ”组合不再是“ *Alt+RMB* ”，因此“ *Shift+A* ”停止发送。虚拟按键清除系统后，我的真实热键再次被检测到，循环重新开始。（“ *A* ”需要用“ *B* ”替换而“ *B* ”用“ *A* ”替换的设置会导致无限循环。）

所以看来我的主要问题是区分真实和虚拟键/鼠标事件。有什么建议么？

（是的，该任务确实类似于[Autohotkey](http://www.autohotkey.com/)所做的。但是，我在热键检测和可选的虚拟输入发送步骤之间有自定义业务逻辑。使用[Autohotkey.dll](http://www.autohotkey.net/~HotKeyIt/AutoHotkey/files/AutoHotkey-dll-txt.html)可能是一种选择，但我担心 a 的性能影响在那里运行的自定义脚本解释器。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:04:12.540

事实证明，虚拟键/鼠标事件的正确术语是“**注入**”，并且低级键盘挂钩确实在[KBDLLHOOKSTRUCT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644967%28v=vs.85%29.aspx)中提供了相关标志。

现在我修改了与钩子相关的事件管理，因此它允许带有“LLKHF_INJECTED”标志的任何事件通过，而不会抑制或通知有关它的主要逻辑。

# javascript - 从任意url中提取域名后缀

> ID：10615013
> 
> 赞同：1
> 
> 时间：2012-05-16T08:48:23.447
> 
> 标签：javascript

我有一个这样的字符串格式的网址：

```
str="http://code.google.com"

and some other like str="http://sub.google.co.in" 
```

我想从第一个字符串中提取 google.com，从第二个字符串中提取 google.co.in。

我所做的是：

```
var a, d, i, ind, j, till, total;

a = document.createElement('a');

a.href = "http://www.wv.sdf.sdf.sd.ds..google.co.in";

d = "";

if (a.host.substr(0, 4) === "www.") {
  d = a.host.replace("www.", "");
} else {
  d = a.host;
}

till = d.indexOf(".com");

total = 0;

for (i in d) {
  if (i === till) {
    break;
  }
  if (d[i] === ".") {
    total++;
  }
}

j = 1;

while (j < total) {
  ind = d.indexOf(".");
  d = d.substr(ind + 1, d.length);
  j++;
}

alert(d); 
```

我的代码有效，但仅适用于“.com”，它不适用于“.co.in”，“co.uk”等其他人，直到我手动指定它们，谁能告诉我解决方案？我什至不介意我需要更改完整的代码，但它应该可以工作。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:50:01.747

当前唯一实用的解决方案（即使不是 100% 有效）是在您的代码中引用[公共后缀列表](http://publicsuffix.org/)，并根据需要与该列表同步。

没有一种算法可以查看域名*并*找出哪个部分是“注册域名”以及哪些部分是子域。它甚至不能通过询问 DNS 本身来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T15:03:54.187

正则表达式对于此类问题非常强大。

[https://regex101.com/r/rW4rD8/1](https://regex101.com/r/rW4rD8/1)

下面的代码应该适合这个目的。

```
var getSuffixOnly = function (url) {

    var normalized = url.toLowerCase();
    var noProtocol = normalized.replace(/.*?:\/\//g, "");
    var splittedURL = noProtocol.split(/\/|\?+/g);

    if (splittedURL.length > 1){
        noProtocol = splittedURL[0].toString().replace(/[&\/\\#,+()$~%'":*?<>{}£€^ ]/g, '');
    }

    var regex = /([^.]{2,}|[^.]{2,3}\.[^.]{2})$/g;
    var host = noProtocol.match(regex);

    return host.toString();

};

getSuffixOnly(window.location.host); 
```

# c++ - 在 C++ 中取消引用 void 指针

> ID：10615018
> 
> 赞同：1
> 
> 时间：2012-05-16T08:48:49.997
> 
> 标签：c++, c, pointers, linked-list

我正在尝试实现一个通用链表。节点的结构如下 -

```
typedef struct node{
        void *data;
        node *next;      
}; 
```

现在，当我尝试为数据分配地址时，例如假设为 int，例如 -

```
int n1=6;
node *temp;
temp = (node*)malloc(sizeof(node));
temp->data=&n1; 
```

如何从节点获取 n1 的值？如果我说 -

```
cout<<(*(temp->data)); 
```

我得到 -

```
`void*' is not a pointer-to-object type 
```

当我为它分配一个 int 地址时，void 指针不会被强制转换为 int 指针类型吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T08:49:56.083

您必须首先将`void*`指针类型转换为实际有效的类型（例如`int*`），以告诉编译器您希望取消引用多少内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T08:50:08.600

无法取消引用 void 指针。您需要将其转换为合适的非空指针类型。在这种情况下，`int*`

```
cout << *static_cast<int*>(temp->data); 
```

由于这是 C++，因此您应该使用 C++ 强制转换而不是 C 样式强制转换。而且您不应该`malloc`在 C++ 等中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T09:05:07.637

无法取消引用 void 指针。您需要将其转换为合适的非空指针类型。问题是关于 C++，所以我建议考虑使用模板来实现你的目标：

```
template <typename T> struct node
{
   T *data;
   node<T> *next;      
}; 
```

然后：

```
int n1=6;
node<int> *temp = new node<int>();
temp->data=&n1; 
```

最后：

```
cout << (*(temp->data)); 
```

可以进行类型转换，但这将是一种 C 风格的类型不安全解决方案，而不是 C++ 解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:09:14.237

将 temp->data 类型转换为 int 然后打印。

```
cout<<*((int *)temp->data); 
```

# c# - 通过 COM 对象的反射获取属性名称

> ID：10615019
> 
> 赞同：19
> 
> 时间：2012-05-16T08:49:00.977
> 
> 标签：c#, reflection, com, properties

如何通过 C# 中 COM 对象的反射读出所有属性名称？如果我知道名字，我就知道如何获得房产。

```
comObject.GetType().InvokeMember("PropertyName", System.Reflection.BindingFlags.GetProperty, null, comObject, null); 
```

但是当我想转储所有属性时怎么办？

```
PropertyInfo[] properties = t.GetProperties(); 
```

这种方式不适用于 Com-Objects。如果我做一个 GetMembers() 我得到这些成员：

```
Name: GetLifetimeService
Name: InitializeLifetimeService
Name: CreateObjRef
Name: ToString
Name: Equals
Name: GetHashCode
Name: GetType 
```

问候克里斯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T11:22:18.050

您获得了 __ComObject 类的成员，这是 RCW 的基础 .NET 类。

COM 对反射有一点支持，只要 COM coclass 实现 IDispatch，即自动化接口。这并不罕见，它是脚本语言用来进行调用的接口。IDispatch.GetIDsOfNames() 总是被实现，但你必须事先知道成员的名字。IDispatch.GetTypeInfo() 允许访问 coclass 的类型库，但并不总是实现。将类型库信息转换为元数据是一门不完美的艺术，这也是 .NET 希望您使用 Tlbimp.exe 预先完成此操作的核心原因。如果您想采用运行时方法，那么您可能会从 Tlbimp 托管版本的源代码中受益，[可在此处获得](http://clrinterop.codeplex.com/releases/view/17579)。

在构建时预先这样做总是最好的，您可以通过添加对类型库的引用（通常嵌入在可执行文件中）或自己运行 Tlbimp.exe 来做到这一点。现在，您得到了一个 .NET 互操作包装类，其中包含底层 COM coclass 和接口的所有成员。到那时你可能不再需要反思了:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-08T03:42:57.533

我刚刚发布了一篇关于如何[使用基于 IDispatch 的 COM 对象进行反射](http://www.codeproject.com/Articles/523417/Reflection-with-IDispatch-based-COM-objects)的 CodeProject 文章。本文提供了一个小型 C#`DispatchUtility`帮助器类，它很容易包含在其他项目中。在内部，它使用 IDispatch 的自定义声明和 .NET 的 TypeToTypeInfoMarshaler 将 IDispatch 的 ITypeInfo 转换为丰富的 .NET Type 实例。

在您的示例中，您可以调用`DispatchUtility.GetType(comObject, true)`以取回一个 .NET 类型实例，然后您可以在该实例上调用 GetProperties 或 GetMembers。

我还在 StackOverflow 上提供了 DispatchUtility 源代码的一个版本，以响应[如何在 C# 中枚举 COM 对象的成员？](https://stackoverflow.com/a/14208030/1882616)

# php - 基于多个值对多维数组进行排序

> ID：10615022
> 
> 赞同：3
> 
> 时间：2012-05-16T08:49:27.097
> 
> 标签：php, arrays

我有以下数组，我需要从最高分到最低分进行排序。

```
Array
(
    [0] => Array
        (
            [team id] => 5
            [score] => 52
            [fouls] => 0
        )

    [1] => Array
        (
            [team id] => 4
            [score] => 47
            [fouls] => 0
        )

    [2] => Array
        (
            [team id] => 8
            [score] => 46
            [fouls] => 6
        )

    [3] => Array
        (
            [team id] => 1
            [score] => 46
            [fouls] => 5
        )

    [4] => Array
        (
            [team id] => 9
            [score] => 46
            [fouls] => 3
        )

) 
```

上面的数组已经用这个函数排序了：

```
function sortByOrder($a, $b){
    $Return = $b['score'] - $a['score'];
    return $Return;
}

usort($Array, 'sortByOrder'); 
```

这似乎工作正常，因为得分最高的数组在列表中。

但是，有些球队得分相同，但犯了一些犯规。当一个分数等于另一个分数时，如何调整函数以将犯规也考虑在内？犯规最少的球队应该放在更高的位置。

期待创造性的解决方案！

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T08:56:49.383

你只需要更新你的功能`sortByOrder()`。

基本上：

```
function sortByOrder($a, $b){
  if ($b['score'] == $a['score'])
    return $a['fouls'] - $b['fouls'];
  else
    return $b['score'] - $a['score'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:57:23.917

我想你正在使用`usort`将你的数组排序成一个顺序而不维护条目的原始键关联。

当您的主要排序相等时，您可以使用以下方法进一步优化排序函数以打破平局：

```
function sortByOrder($a, $b) {
    if ($a['score'] == $b['score']) {
        return ($a['fouls'] < $b['fouls']) ? -1 : 1;;
    }
    return ($a['score'] < $b['score']) ? -1 : 1;
} 
```

*注意 请注意，使用您的用户定义的排序方法，在这种情况下您需要返回的唯一两个值是 -1（a 小于 b）和 1（a 大于 b）。*

# java - 使用 java 脚本检索 GSM CellId,mnc,mcc

> ID：10615030
> 
> 赞同：0
> 
> 时间：2012-05-16T08:50:05.327
> 
> 标签：java, javascript, gsm, mobile-website, cellid

我正在开发一个移动网络应用程序。即使设备 GPS 关闭，我也想找到用户的当前位置。经过一些谷歌搜索后，我发现 opencellid 数据库我们可以通过将 cellId、mnc、mcc 传递给 opencellId 来检索手机的纬度和经度。

有没有办法通过使用 java 脚本或 java 程序来获取 cellId、mnc、mcc？如果可能，请建议任何其他方式。这是一个移动网络应用程序。

谢谢和问候， vinay

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:50:50.387

无法使用 Web 应用程序获取电话信息。您需要实现在移动设备上运行的特定应用程序。

# apache - Htaccess 重定向规则不起作用

> ID：10615036
> 
> 赞同：0
> 
> 时间：2012-05-16T08:50:16.107
> 
> 标签：apache, .htaccess, mod-rewrite

我们有这个有效的重写规则，但是我们遇到了博客“下一页”页面链接不起作用的问题。这是一个不起作用的示例 URL：[http](http://www.mydomain.com/blog/page/2/) ://www.mydomain.com/blog/page/2/它被重定向到[http://www.mydomain.com/page/2/](http://www.mydomain.com/page/2/)（显示站点主页页）。

这是目前的规则：

```
RewriteCond %{REQUEST_URI} /blog/$ [NC]   
RewriteRule (.*) %1 [L]   
RewriteCond %{REQUEST_URI} !^blog/$ [NC]   
RewriteRule ^blog/(.*)$ http://www.mydomain.com/$1 [R=301,L] 
```

我们之前的博客文章位于 /blog/ 文件夹下，但新站点现在已在根级别 (http://www.mydomain.com/category/some-blog-post/) 呈现博客文章。所以这条规则将旧的索引博客文章重定向到新的 URL 结构。

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:23:08.063

IIRC you want to redirect `www.mydomain.com/blog/<anything>` to `www.mydomain.com/<anything>`

If that's correct, then the only thing to to should be:

```
RewriteRule ^blog/(.*) /$1 [R=301,L] 
```

**EDIT**

Ok, after the precisions in the comment:

```
RewriteCond %{REQUEST_URI} ! ^/blog/page.*
RewriteRule ^blog/([^/]+)/(.*) /$1/$2 [R=301,L] 
```

# iphone - AVPlayer seektoTime iPhone

> ID：10615038
> 
> 赞同：5
> 
> 时间：2012-05-16T08:50:19.897
> 
> 标签：iphone, ios, xcode, avfoundation, avplayer

我在我的应用程序中使用了 seekToTime 并且它工作正常。但我想了解更多有关它的信息。也就是说，如果我现在有一个 1 分钟的流式视频文件，我想从第 15 秒到第 45 秒播放它（前 15 秒和最后 15 秒不会播放）。

我该怎么做？

我知道通过使用 seekToTime 我可以从第 15 秒开始播放视频，但是如何在第 45 秒停止播放，并且还可以通过视频在指定时间段内播放的方法引起注意？

```
CMTime timer = CMTimeMake(15, 1);
[player seekToTime:timer]; 
```

上面的代码将我带到流文件的第 15 秒，但如何在第 45 秒停止它并获得通知？

我已经搜索了很多，但无法获得任何信息。

谢谢

**编辑：**

正如@codeghost 建议的那样，只需使用`forwardPlaybackEndTime`.

您可以简单地使用：

```
yourAVPlayerItem.forwardPlaybackEndTime = CMTimeMake(10, 1); 
```

这里 10 是播放 AVPlayerItem 的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T08:57:07.843

`forwardPlaybackEndTime`在您的 AVPlayerItem 上设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:50:06.087

我不知道是否有内置的东西`AVPlayer`，但我会做的是构建一个函数并调用它：

```
[self performSelector:@selector(stopPlaying) withObject:nil afterDelay:45];

-(void)stopPlaying{
   [player pause];
} 
```

这将在 45 秒后停止播放，当然您可以将 45 改为您想要的任意秒数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T08:39:35.113

您可以`[AVPlayer addPeriodicTimeObserverForInterval:queue:usingBlock:]`用于此目的。

定期获取`AVPlayer.currentTime`，并在确切时间调用暂停或停止。

# svn - SVN：如何处理文件夹中的多个文件？

> ID：10615041
> 
> 赞同：1
> 
> 时间：2012-05-16T08:50:37.073
> 
> 标签：svn

我们有一个大项目的资源。我和我的同事只处理这个项目中的几个文件，我们不想将它们全部置于版本控制之下。我和我的同事在我们的机器上拥有该项目的本地副本。我在执行命令的副本中修改并提交了几个文件：

```
svn add --non-recursive folder1/folder2
svn add folder1/folder2/file1.txt
svn ci -m "Message" 
```

之后我的同事更新了他的项目并收到错误：

```
svn: Failed to add directory 'folder': an unversioned directory of the same name already exists 
```

是否有可能以某种方式处理这个问题。我们不想将整个项目置于版本控制之下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:01:28.823

您可以提交项目的主干并让 svn 忽略您不希望在版本控制下的文件和文件夹。

这样，您想要协同工作的所有文件都将可用，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:03:36.197

使用`svn up --force`. 这是来自的报价`svn up --help`：

```
If --force is used, unversioned obstructing paths in the working
copy do not automatically cause a failure if the update attempts to
add the same path.  If the obstructing path is the same type (file
or directory) as the corresponding path in the repository it becomes
versioned but its contents are left 'as-is' in the working copy.
This means that an obstructing directory's unversioned children may
also obstruct and become versioned.  For files, any content differences
between the obstruction and the repository are treated like a local
modification to the working copy.  All properties from the repository
are applied to the obstructing path.  Obstructing paths are reported
in the first column with code 'E'. 
```

# c - 如何更新（刷新）控制台屏幕？

> ID：10615042
> 
> 赞同：-2
> 
> 时间：2012-05-16T08:50:44.530
> 
> 标签：c, windows, console

我正在编写一个在屏幕上显示一些信息的程序，我希望它们每秒更新一次。

我应该怎么办？

我正在 Windows 上编写一个 C 控制台应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:57:30.110

钢琴家，您可以使用 WinAPI 函数与控制台一起工作。

```
HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);
if (!hConsole)
    return; 
```

之后确定光标位置：

```
CONSOLE_SCREEN_BUFFER_INFO csbi = {0};
GetConsoleScreenBufferInfo(hConsole, &csbi);
COORD coordCur = csbi.dwCursorPosition; 
```

和...

```
while (TRUE) {  // your cycle goes here
    // ...
    // now you can change position of the cursor
    coordCur.X = newX;
    coordCur.Y = newY;
    SetConsoleCursorPosition(hConsole, coordCur);
    // and print any information from the new position
    printf("..."); // old text will be replaced
} 
```

因此，如果您想更改一小段文本，则无需清除和刷新所有控制台。

附言。不要忘记释放句柄：

```
CloseHandle(hConsole); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:55:20.180

Since you are on Windows, you can do this:

```
system('cls') 
```

Here is an example:

```
#include <stdio.h>

int main()
{
    printf("Press enter to clear the screen.");
    getchar();
    system("cls");
    return 0;
} 
```

If you are developing using Microsoft Visual Studoo and you want to programmatically clear the screen by outputting spaces, see Example 2 at [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682022(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682022(v=vs.85).aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:55:37.147

If you had searched google before asking, you would have found [this link](http://www.cplusplus.com/forum/articles/10515/) right in the first results.

To quote one of the methods:

> **Windows:**
> 
> ```
> #include <windows.h>
> 
> void ClearScreen()
>   {
>   HANDLE                     hStdOut;
>   CONSOLE_SCREEN_BUFFER_INFO csbi;
>   DWORD                      count;
>   DWORD                      cellCount;
>   COORD                      homeCoords = { 0, 0 };
> 
>   hStdOut = GetStdHandle( STD_OUTPUT_HANDLE );
>   if (hStdOut == INVALID_HANDLE_VALUE) return;
> 
>   /* Get the number of cells in the current buffer */
>   if (!GetConsoleScreenBufferInfo( hStdOut, &csbi )) return;
>   cellCount = csbi.dwSize.X *csbi.dwSize.Y;
> 
>   /* Fill the entire buffer with spaces */
>   if (!FillConsoleOutputCharacter(
>     hStdOut,
>     (TCHAR) ' ',
>     cellCount,
>     homeCoords,
>     &count
>     )) return;
> 
>   /* Fill the entire buffer with the current colors and attributes */
>   if (!FillConsoleOutputAttribute(
>     hStdOut,
>     csbi.wAttributes,
>     cellCount,
>     homeCoords,
>     &count
>     )) return;
> 
>   /* Move the cursor home */
>   SetConsoleCursorPosition( hStdOut, homeCoords );
>   } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:59:10.827

有一篇关于该主题的[知识库文章。](http://support.microsoft.com/kb/99261)

> 两种选择：
> 
> 1.  编写一个以编程方式清除屏幕的函数
>     
>     
>     
>     ```
>     /* Standard error macro for reporting API errors */ 
>     #define PERR(bSuccess, api){if(!(bSuccess)) printf("%s:Error %d from %s \ 
>         on line %d\n", __FILE__, GetLastError(), api, __LINE__);}
>     
>     void cls( HANDLE hConsole )
>     {
>         COORD coordScreen = { 0, 0 };    /* here's where we'll home the
>                                             cursor */ 
>         BOOL bSuccess;
>         DWORD cCharsWritten;
>         CONSOLE_SCREEN_BUFFER_INFO csbi; /* to get buffer info */ 
>         DWORD dwConSize;                 /* number of character cells in
>                                             the current buffer */ 
>     
>         /* get the number of character cells in the current buffer */ 
>     
>         bSuccess = GetConsoleScreenBufferInfo( hConsole, &csbi );
>         PERR( bSuccess, "GetConsoleScreenBufferInfo" );
>         dwConSize = csbi.dwSize.X * csbi.dwSize.Y;
>     
>         /* fill the entire screen with blanks */ 
>     
>         bSuccess = FillConsoleOutputCharacter( hConsole, (TCHAR) ' ',
>            dwConSize, coordScreen, &cCharsWritten );
>         PERR( bSuccess, "FillConsoleOutputCharacter" );
>     
>         /* get the current text attribute */ 
>     
>         bSuccess = GetConsoleScreenBufferInfo( hConsole, &csbi );
>         PERR( bSuccess, "ConsoleScreenBufferInfo" );
>     
>         /* now set the buffer's attributes accordingly */ 
>     
>         bSuccess = FillConsoleOutputAttribute( hConsole, csbi.wAttributes,
>            dwConSize, coordScreen, &cCharsWritten );
>         PERR( bSuccess, "FillConsoleOutputAttribute" );
>     
>         /* put the cursor at (0, 0) */ 
>     
>         bSuccess = SetConsoleCursorPosition( hConsole, coordScreen );
>         PERR( bSuccess, "SetConsoleCursorPosition" );
>         return;
>     } 
>     ```
>     
>     
> 2.  使用系统函数（不是很漂亮；需要启动 shell 和命令）
>     
>     
>     
>     ```
>     system("cls"); 
>     ```

# eclipse - Maven Eclipse 运行时插件依赖

> ID：10615050
> 
> 赞同：1
> 
> 时间：2012-05-16T08:51:10.837
> 
> 标签：eclipse, maven, plugins, m2e

我们有一个最近从 Ant+Ivy 转换而来的多模块 maven 项目。其中一个模块是一个遗留的自定义可插拔组件，它在类路径中查找插件并加载它们。多模块项目中的另一个模块是由上述插件运行的插件实现。

从 Eclipse 运行配置运行我们的自定义应用程序服务器时，我们必须在类路径中包含我们的每个插件。当我们在 eclipse 工作区中构建时，这些插件不会编译到 jar 中。因此，没有要包含的 jar 工件。

如果我在 Eclipse 运行配置中添加插件模块项目作为依赖项，则不会继承其传递依赖项（由 Maven 提供）。因此，当应用程序服务器找到并加载插件时，会发生类未找到异常。

这里的问题是，在导入多模块项目时，m2e 插件没有设置要导出的 maven 容器。因此缺少传递依赖。

有什么方法可以在 eclipse 中运行时使用 Application Server 组件及其插件的“构建工作区”来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:09:12.243

Ivy 只是一个依赖管理工具，而 Apache Maven 是一个软件项目管理。

意味着它可以处理软件开发中的所有过程，如编译、将其构建到 jar、搜索依赖项、链接等。

您无需在类路径中提供您的 jar，而是将其放在本地存储库中或编辑 pom.xml 以从远程存储库中获取。

这个链接[http://ant.apache.org/ivy/history/2.0.0/use/makepom.html](http://ant.apache.org/ivy/history/2.0.0/use/makepom.html)

# django - 哪一个 Django 应用程序更适合调整图像大小（easy-thumbnails 或 django-imagekit）？

> ID：10615051
> 
> 赞同：1
> 
> 时间：2012-05-16T08:51:13.023
> 
> 标签：django, image-processing

我安装了 django-imagekit，对我来说效果很好，但想实现与 easy_thumbnails 集成的用户自定义图像裁剪（https://github.com/jonasundderwolf/django-image-cropping）。

哪一个更适合用于 Django 项目以显示不同大小的图像？各有什么好处和坏处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:40:49.807

所有这些应用程序都服务于（略微）不同的目的，因此您无法真正比​​较它们。如果一个比另一个更好，取决于您的用例，并且非常主观，[不适合 SO](https://stackoverflow.com/faq#dontask)。

[`easy_thumbnails`](https://github.com/SmileyChris/easy-thumbnails)帮助您快速生成缩略图。当然，您可以指定尺寸、缩放图像，甚至使用[PIL](http://www.pythonware.com/products/pil/)进行各种处理（通过处理器）。如果您“仅”需要缩略图，我会说这是要走的路。

[`django-image-cropping`](https://github.com/jonasundderwolf/django-image-cropping)允许您在管理员中选择图像的一部分（裁剪），并帮助您在页面上显示裁剪的选择（使用 easy_thumbnail 缩略图处理器）。

我没用过[`ImageKit`](https://github.com/jdriscoll/django-imagekit)，但宣传如下：

> ImageKit 是一个 Django 应用程序，可帮助您将上传图像的变体添加到模型中。这些变体被称​​为“规格”，可以包括不同尺寸之类的东西。

所以它似乎与 easy_thumbnails 类似，因为它还带有[处理器](http://django-imagekit.readthedocs.org/en/latest/#processors)和生成缩略图的能力。

对我来说，如果您需要在后端进行大量图像处理，ImageKit 似乎是更强大的选择，而*简单*_thumbnails 的重点似乎是*快速*生成缩略图。

# mysql - MySQL joins + 子查询混淆

> ID：10615054
> 
> 赞同：0
> 
> 时间：2012-05-16T08:51:15.910
> 
> 标签：mysql, join, left-join

我需要问一些关于连接的真正令人困惑的事情

我的想法，我确信这过去对我有用，但似乎缺少一些东西：

此查询导致来自两个表的数据，其中 client_id 为 1 - 工作正常

```
/* gets data for one client_id*/

approach 1A

SELECT * 
FROM clients  LEFT JOIN client_modules 
                ON client_modules.client_id = clients.client_id
WHERE clients.client_id = 1; 
```

现在，我认为这个查询应该返回相同的结果，因为我在连接中使用了子查询来首先过滤结果，即。已经从 client_id 1 的模块中获取数据，但是由于某种原因，它在最终结果中提供了其他 client_ids 数据。

```
/* gets data for one client_id sub-query approach*/

approach 2A

SELECT * 
FROM clients LEFT JOIN (SELECT client_id, module_name 
                        FROM client_modules 
                        WHERE client_modules.client_id = 1) 
             AS client_moduless ON client_moduless.client_id = clients.client_id;

/* gets data for all client_ids */

approach 1B

SELECT * FROM clients
LEFT JOIN client_modules ON client_modules.client_id = clients.client_id;

/* gets data for all client_ids*/

approach 2B

SELECT * 
FROM clients LEFT JOIN (SELECT client_id, module_name 
                        FROM client_modules) AS client_moduless
              ON client_moduless.client_id = clients.client_id; 
```

> 问题：

1）在处理大量数据时，哪种方法更有效`xA and xB`？

2）为什么第二种方法`2A`会给出结果`client_ids other then 1`，尽管在 join 中单独运行子查询可以正常工作

3) 如果不使用 where 子句，子查询是否会`2B`针对父项的每条记录执行？

4）如果我将 1A 查询更改为

```
SELECT * FROM clients
JOIN client_modules ON client_modules.client_id = clients.client_id AND client_modules.client_id = 1 
```

刚刚删除了客户端表上的 where 子句并将其放在子表上的 join 子句中，这是有效的还是 where 子句？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:01:24.973

2a 拉出额外的客户，因为您使用了左连接 - 即左侧的所有记录，但只有右侧的相关记录。您应该使用“完全加入”或“加入”，而不是“左加入”。

不确定其他问题，但我更喜欢 1B 而不是子选择

编辑添加 - 要了解左连接发生了什么，请考虑其众多用途之一 - 哪些客户端在 client_modules 中没有任何记录？

很想写：

```
SELECT * FROM clients WHERE clientid NOT IN (select distinct(clientid) FROM client_modules) 
```

但是，以下编写可能更有效：

```
SELECT * FROM clients
     LEFT JOIN  client_modules ON clients.clientid = client_modules.clientid
WHERE client_modules.clientid IS NULL 
```

（即仅显示来自无法加入 client_module 行的客户端的记录）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:01:38.360

没有。在我看来，我认为您不应该使用`left join`. 您应该使用`join`. 像虎钳：

```
SELECT * FROM clients
JOIN client_modules ON client_modules.client_id = clients.client_id
WHERE clients.client_id = 1; 
```

这更加困难，并且您`LEFT JOIN`在 where 语句中限制了它，因此它具有相同的效果。

```
SELECT * 
FROM clients LEFT JOIN (SELECT client_id, module_name 
                        FROM client_modules 
                        WHERE client_modules.client_id = 1) 
             AS client_moduless ON client_moduless.client_id = clients.client_id; 
```

使用此查询，您将返回客户端表中的所有行，对于那些可以匹配 client_moduless.client_id = clients.client_id 的行，您将拥有该表。但这不是限制 JOIN，它是左连接，这意味着当没有匹配的值时，它返回 null。将为每一行运行子查询。要获得相同的效果，您可以这样做：

```
SELECT * 
FROM clients JOIN (SELECT client_id, module_name 
                        FROM client_modules 
                        WHERE client_modules.client_id = 1) 
             AS client_moduless ON client_moduless.client_id = clients.client_id; 
```

现在这将限制`clients`表格，您将只获得在`client_modules`. 但我看不出这样做的意义。我会选择海峡前进`join`。

这也取决于您对什么感兴趣。如果您只是在客户表的列中。然后你可以这样做：

```
SELECT * 
FROM clients
WHERE EXISTS
(
    SELECT 
        NULL
    FROM
        client_modules=1
        AND client_moduless.client_id = clients.client_id
) 
```

因此，如果您想要表中的所有列`clients`并`client_modules`使用连接。否则与`exists`

**编辑**

我认为这：

```
SELECT * FROM clients
JOIN client_modules ON client_modules.client_id = clients.client_id 
AND client_modules.client_id = 1 
```

还有这个：

```
SELECT * FROM clients
JOIN client_modules ON client_modules.client_id = clients.client_id
WHERE client_modules.client_id = 1 
```

是一样的。这将大多数 cretin 导致相同的查询计划。

# html - HTML、CSS 问题：HTML 字段集放置/定位

> ID：10615057
> 
> 赞同：1
> 
> 时间：2012-05-16T08:51:26.433
> 
> 标签：html, css, positioning

我有一个使用文本框包含个人信息详细信息的 HTML 页面。我有两个字段集，如

[**这个 Jsfiddle**](http://jsfiddle.net/XdRYT/)。

正如注意到的那样，字段集是上下放置的。我的问题是

**如何并排放置这两个字段集（左右位置）？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:56:07.207

我删除了表单`width: 40%;`并在这些字段集上分配了一个`float:left;`属性。这是更正的小提琴：[试试我](http://jsfiddle.net/XdRYT/7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T08:56:12.257

从您的. `width:40%`_`form``float``fieldsets`

检查这个：http: [//jsfiddle.net/XdRYT/8/](http://jsfiddle.net/XdRYT/8/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T08:56:04.557

最简单的解决方案是创建包含两个单元格和一行的表格，并将每个字段集放在不同的单元格中。另一个更复杂的是使用 CSS 来格式化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:54:57.390

将字段集样式更改为以下

```
 fieldset {
            border: 1px dotted #61B5CF;
            margin-top: 1.4em;
            padding: 0.6em;
            float:left;
            width:40%;
           } 
```

# ruby-on-rails - ActiveRecord - 在组模型中查找下一个用户

> ID：10615065
> 
> 赞同：0
> 
> 时间：2012-05-16T08:52:19.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有四个用户模型：`Zone`, `Product`, `User`,`Group` 我想选择什么s 可以在 a`User`中出售 a ，这就是它的作用，与 one和 one具有多对多关系和外键。所以我每对区域/产品有一组。我还需要在多对多关系上设置自定义属性，所以我使用了（我找不到更好的名称来描述和之间的关系）。所以我最终有 5 个模型：, , , , .`Product``Zone``Group``User``Product``Zone``has_many :through Sell``Group``User``Zone``Product``User``Group``Sell`

它工作正常，但现在我需要选择`Group`. 我正在考虑利用 Sell.id 来查找分配到具有更高 id 的同一组的用户，如果不存在，请再次选择第一个（这允许我创建一个环链）。`Group.next_user`有一个方法会很有用。

不幸的是，我不知道如何做到这一点，我需要帮助才能找到组中的下一个可用用户（如果没有更多用户，则为第一个）。

遵循模型所有模型的代码：

```
################
# models/group.rb
################
class Group < ActiveRecord::Base
  has_many :sells
  has_many :users, :through => :sells

  belongs_to :zone
  belongs_to :product
  attr_accessible :priority, :product_id, :user_ids, :zone_id
end

################
# models/zone.rb
################
class Zone < ActiveRecord::Base
  belongs_to :location
  has_many :cities
  has_many :groups

  attr_accessible :name, :location_id
  validates :location, :presence => true
end

################
# models/user.rb
################
class User < ActiveRecord::Base
  after_create :create_calendar
  before_destroy :destroy_calendar
  belongs_to :location
  belongs_to :mall
  has_one :event_calendar

  has_many :sells
  has_many :groups, :through => :sells

  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable, :registerable,
  # :recoverable, :rememberable,
  devise :database_authenticatable, :trackable,
         :validatable, :authentication_keys => [:username]

  # Setup accessible (or protected) attributes for your model
  attr_accessible :username, :password, :password_confirmation, :remember_me, :name,
                  :surname, :role, :location_id
  # attr_accessible :title, :body

  ROLES = %w[Admin Agente Hostess HostessAdmin]

  validates_uniqueness_of :username, :case_sensitive => false
  validates :username, :presence => true
  validates_presence_of :role, :name, :surname, :location_id
  validates :location, :presence => true
    validates :role, :inclusion => { :in => ROLES, :message => "%{value} non è un ruolo valido." }

  def display_name
      "#{self.name} #{self.surname}"
  end

  def has_role?(role)
    # convert the role string to a sybmol
    self.role.downcase.gsub(/\s+/, "_").to_sym == role
  end

  private
  def create_calendar
    if self.has_role? :agente
      calendar = EventCalendar.new({:user_id => self.id})
      calendar.save()
    end
  end

  def destroy_calendar
    if self.has_role? :agente
      calendar = EventCalendar.find_by_user_id(self.id)
      calendar.destroy()
    end
  end

  def email_required?
    false
  end

  def email_changed?
    false
  end
end

################
# models/product.rb
################
class Product < ActiveRecord::Base
  after_create :create_groups
  before_destroy :destroy_groups
  attr_accessible :name

  def create_groups
    for zone in Zone.all
      group = Group.new({:zone_id => zone.id, :product_id => self.id})
      group.save()
    end
  end

  def destroy_groups
    for zone in Zone.all
      group = Group.find_by_product_id(self.id)
      group.destroy
    end
  end
end

################
# models/sell.rb
################
class Sell < ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end 
```

你能给我一些帮助来完成这件事吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:15:46.393

如果我做对了，那么将其添加到您的用户模型中

```
scope :next, lambda { |p| {:conditions => ["id > ?", p.id], :limit => 1, :order => "id"} } 
```

这对你的团体模型

```
def self.next_user
  return User.first if Group.users.blank?
  next_user = User.next(Group.users.last).first
  return next_user || Group.users.first
end 
```

这应该可以解决问题。我没有为此编写测试，因此您应该对其进行测试:)

# ruby-on-rails-3 - 应用程序布局中的渲染引擎

> ID：10615067
> 
> 赞同：32
> 
> 时间：2012-05-16T08:52:28.360
> 
> 标签：ruby-on-rails-3, ruby-on-rails-plugins, rails-engines

## 背景

我正在创建一个由一个核心和几个模块组成的应用程序。这些模块是 rails 引擎，并提供实际功能，因为核心本身仅充当主机。引擎从它们各自的路径托管`/lib`并安装在它们各自的路径上。

```
coreApp
└──lib
   ├── module1
   ├── module2
   └── etc 
```

然后像这样安装模块

```
mount Module1::Engine => "/module1", :as => "module1"
mount Module2::Engine => "/module2", :as => "module2" 
```

核心还负责处理会话，尽管登录本身是由模块完成的。

## 问题

我还没有找到与引擎共享核心应用程序布局的好方法。到目前为止，这就是我使引擎可以使用布局的方式：

```
coreApp
└── app
    └── views
        └── layouts
            ├── application.html.erb
            └── core.html.erb 
```

该文件`core.html.erb`仅包含

```
<%= render :template => 'layouts/application' %> 
```

然后像这样包含在每个模块中

```
module Module1
  class ApplicationController < ActionController::Base
    layout "core"
  end
end 
```

尽管它不是特别优雅，但它工作正常，并且模块的内容`yield`在应用程序布局中的语句处呈现。

问题如下：

### 1\. 模块特定样式表不包含在标题中

我需要一种方法来包含活动模块的样式表。

### 2\. 标头需要访问有关登录用户的信息

标头包含有关登录用户的信息，例如

```
Logged in as <%= @user[:realname] %> 
```

这来自核心`home_controller`

```
def index
  @user = User.find_by_id(session[:user])
end 
```

但是当我尝试访问该模块时，出现以下错误

```
NoMethodError in Module1/home#index

You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[] 
```

显然是指`@user`。

## 问题

如何在不对发动机侧进行过多篡改的情况下尽可能优雅和干燥地解决这个问题？

我已经用谷歌搜索*了很多*，但无法真正了解如何解决它。可能完全缺乏对 Rails 工作原理的了解，所以这个问题很可能对于熟悉 Rails 的人来说甚至没有意义。

如果有任何不清楚或模棱两可的地方，请发表评论，我会尽力详细说明。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-10T12:02:07.373

我已经成功地在我的引擎中使用了我的父应用程序的布局。首先，根据[Rails Guides (Engines) 的第 4.3.2 节](http://edgeguides.rubyonrails.org/engines.html#using-a-class-provided-by-the-application)，为了访问父应用程序 ApplicationController 的变量（如`session`您在上面使用的），您需要替换`application_controller.rb`您当前拥有的引擎：

```
module Module1
  class ApplicationController < ActionController::Base
    layout "core"
  end
end 
```

对此：

```
class Module1::ApplicationController < ::ApplicationController
end 
```

这将继承父应用程序的 ApplicationController 以及它的所有变量。

其次，您需要`app/views/layouts/application.html.erb`从引擎视图中删除该文件，因为您使用的是父应用程序的文件，因此不需要它。

现在，当您从父应用程序渲染 Module1 的视图时，将使用父应用程序的布局，并且`session[]`将正确评估所有变量。

不要忘记添加单词“main_app”。在布局中的每个链接之前，否则它将尝试在引擎中而不是父应用程序中查找路径。例如，如果父应用程序中的布局包含指向`some_path`（即父应用程序中的视图）的链接，则当在引擎中显示使用此布局的视图时，将尝试`some_path`在引擎中而不是父应用程序中查找。您需要将链接更改`main_app.some_path`为才能正常工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-03T15:33:55.257

采用`layout 'layouts/application'`

如果你不想使用 main_app.your_path 你也可以添加：

```
module YourEngine
  module ApplicationHelper
    def method_missing(method, *args, &block)
      if (method.to_s.end_with?('_path') || method.to_s.end_with?('_url')) && main_app.respond_to?(method)
        main_app.send(method, *args)
      else
        super
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-08T17:12:17.040

我在我的应用程序中也做了同样的事情。我所做的只是：

1.  删除 /app/view/layouts/ 中的引擎布局
2.  将您的 application_controller 更改为

    ```
    module EngineModule
      class ApplicationController < ::ApplicationController
        layout 'layouts/application' 
      end
    end 
    ```

3.  在您看来，如果您想引用任何路径，例如`login_path`，可以通过`main_app.login_path`

# java - 单击某个选项时，如何将值从 jsp 传递给控制器 中的某些方法？

> ID：10615069
> 
> 赞同：0
> 
> 时间：2012-05-16T08:52:32.380
> 
> 标签：java, spring-mvc, jstl

我是一个使用jstl和spring的新手iam，这里我有一个jsp，它从数据库中获取所有产品，如汽车、自行车、自行车，我使用jstl检索了arraylist中添加的所有产品。现在在jsp中我有某些选项，比如getlicense, getproduct 点击 getlicense 它应该导航到控制器中的方法 getlicense 从那里它应该导航到 getlicense.jsp。但是控制器中的方法 getlicense 我必须传递我的产品的某些值（如许可证信息，许可证号）（汽车、自行车、自行车）。请帮我解决这个问题这是我在许可证选项中的 jsp，我需要将 partnumber 的值传递给 modelandview 中的方法

```
 <td class="listData" valign="top" width="14%">${suites.partNumber}</td>
            <td class="listData" valign="top" width="20%">${suites.assetDescription}</td>
            <td class="listData" valign="top" width="20$">${suites.assetNumber}</td>
            <td class="listData" valign="top" width="10$">  
        <c:choose>
            <c:when test="${empty suites.licenseType}">
                <c:out value="Not Available" />
            </c:when>
            <c:otherwise>
                <c:out value="${suites.licenseType}" />
            </c:otherwise>
        </c:choose>

            </td>

            <td class="listData" valign="top" width="15%">
                <a href="/webapp/servicerequest.create_SR.framework">
                    Submit Service Request
                </a>
            </td>

            <td class="listData" valign="top" width="11%">${suites.registeredDate}</td>
            <td class="listData" valign="top" width="11%">${suites.endDate}</td>

            <td class="listData" valign="top" width="10%" align="center">
                <a href="/webapp/licensing/licenseOptions.jsp">
                    <img src="/licensing/images/1443_LICENSE_OPTIONS.gif" alt="License Options" border="0"/>
                </a>

                <a href="/webapp/ecommerce.add_item.framework?PART_NUMBER=${suites.partNumber}&entitlementId=${suites.entitlementId}&ITEM_TYPE=${suites.assetType}&QUANTITY=1&RETURN_URL=/licensing/getSuiteList.sp&attribName=ENTITLEMENT_ID&licenseType=${suites.licenseType}">
                    <img src="/licensing/images/purchase.gif" alt="Purchase More Seats" border="0"/>
                </a>
            </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:20:05.323

我从您的问题中了解到，您需要访问在控制器方法中传入的 PART_NUMBER。

为此，您应该在控制器方法中添加一个参数来访问该变量。就像下面提到的代码。

```
@RequestParam String PART_NUMBER 
```

希望这对您有所帮助。如果您还有其他问题，请更具体。

干杯。

# c# - 字符 Å Ä Ö 没有显示在我的 DDL 中，我如何告诉 restclient 使用特定的字符集？

> ID：10615072
> 
> 赞同：5
> 
> 时间：2012-05-16T08:52:40.053
> 
> 标签：c#, xml, asp.net-mvc, json, json.net

在我开始之前是问题所在。它应该是这样的：

Björn Nilsson，而不是显示奇怪的特殊字符，所有具有字符 Å、Ä 和 Ö 的值都变成了这样。

![在此处输入图像描述](../Images/bc1f1a78c36d962efa1e08bda23c0fee.png)

我用来自具有所有值的 XML 格式的 API 的值填充我的 DDL，我们也为此使用 Linq2Rest。

这个过程的样子

```
 private readonly RestContext<ADConsultants> restContext;

public ConsultantContext(Uri uri, Format format)
{
    restContext = new RestContext<ADConsultants>(GetRestClient(uri, format), GetSerializerFactory(format));
}
public enum Format
{
    Pox,
    Json
}

private static readonly IEnumerable<Type> knownTypes = new[] {typeof (ADConsultants)};

public static IRestClient GetRestClient(Uri uri, Format format)
{
    switch (format)
    {
        case Format.Pox:
            return new XmlRestClient(uri);
        case Format.Json:
            return new JsonRestClient(uri);
        default:
            throw new NotImplementedException();
    }
}
private static ISerializerFactory GetSerializerFactory(Format format)
{
    switch (format)
    {
        case Format.Pox:
            return new XmlSerializerFactory(knownTypes);
        case Format.Json:
            return new JsonNetSerializerFactory();
        default:
            throw new NotImplementedException();
    }

}
public IQueryable<ADConsultants> Consultant
{
    get { return restContext.Query; }
} 
```

}

这是我的 JsonNetSerializerFactory 类：

```
public class JsonNetSerializerFactory :ISerializerFactory 
{
    public ISerializer<T> Create<T>()
    {
        return new JsonNetSerializer<T>();
    }
    public class JsonNetSerializer<T> : ISerializer<T>
    {
        public T Deserialize(string input)
        {
            return JsonConvert.DeserializeObject<T>(input);
        }

        public IList<T> DeserializeList(string input)
        {
            return JsonConvert.DeserializeObject<IList<T>>(input);
        }
    }
} 
```

这是在我的控制器内部：

```
var consultants = new ConsultantContext(
        new Uri("http://adress:port/api/consultants"),
                ConsultantContext.Format.Json)
                    .Consultant
                    .Where(x => x.Office == "Örebro")  
                    .OrderBy(x => x.DisplayName)  
                    .ToList() 
                    .Select(x => new
                    {
                        name = x.DisplayName
                    }); 
```

我通过这样做做了一个测试：

```
name = "åäö" 
```

它运行良好，ddl 值为“åäö”

感谢任何有关如何修复字符 Å Ä Ö 的帮助作为我的 DDL 中的值。

HTTP 标头是 utf-8，我的 html 内容也有。它必须是需要设置为特定字符集的 XML，我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:48:03.200

从理论上讲，您遇到了字符集编码/解码问题。

原因：您尝试阅读的内容已使用 iso-8859-1 或 iso-8859-15 等字符集进行编码。您将尝试将其直接读取（解码）为“UTF-8”字符模型。当然它不会起作用，因为 UTF-8 因为 UTF-8 奇迹般地无法识别您的特殊字符（Ä、Ü、Ö 等等..）。UTF-8 不是字符编码的猜测者。

**解决方案**：

1-（重新）将您的内容（例如“Björn Nilsson”）及其相应的字符集（iso-8859-1/iso-8859-15）编码为字节集合。

2-将您的内容解码为基于“UTF-8”的字符集。

这里有一个帮助类作为例子：

```
using System;
using System.Collections.Generic;
using System.Text;

    namespace csharp.util.charset
    {
        public class SysUtil
        {
            /// <summary>
            /// Convert a string from one charset to another charset
            /// </summary>
            /// <param name="strText">source string</param>
            /// <param name="strSrcEncoding">original encoding name</param>
            /// <param name="strDestEncoding">dest encoding name</param>
            /// <returns></returns>
            public static String StringEncodingConvert(String strText, String strSrcEncoding, String strDestEncoding)
            {
                System.Text.Encoding srcEnc = System.Text.Encoding.GetEncoding(strSrcEncoding);
                System.Text.Encoding destEnc = System.Text.Encoding.GetEncoding(strDestEncoding);
                byte[] bData=srcEnc.GetBytes(strText);
                byte[] bResult = System.Text.Encoding.Convert(srcEnc, destEnc, bData);
                return destEnc.GetString(bResult);
            }

        }
    } 
```

**用法：**

在您的（JSON-，XML，其他）序列化器/反序列化器类中，只需像这样转换您的内容

```
String content = "Björn Nilsson";
SysUtil.StringEncodingConvert(content, "ISO-8859-1","UTF-8"); 
```

您可以尝试在您的反序列化器中进行调用（如果他们真的按照他们的意思行事）：

```
public class JsonNetSerializerFactory :ISerializerFactory 
{
    public ISerializer<T> Create<T>()
    {
        return new JsonNetSerializer<T>();
    }
    public class JsonNetSerializer<T> : ISerializer<T>
    {
        public T Deserialize(string input, String fromCharset, String toCharset)

        {
           String changedString = SysUtil.StringEncodingConvert(input, fromCharset,toCharset);

            return JsonConvert.DeserializeObject<T>(changedString  );
        }

        public IList<T> DeserializeList(string input, String fromCharset, String toCharset)
        {
         String changedString =  SysUtil.StringEncodingConvert(input, fromCharset,toCharset);

            return JsonConvert.DeserializeObject<IList<T>>(changedString);
        }
    }
} 
```

那是给你的

```
JsonNetSerializerFactory 
```

请尝试为其他工厂做同样的事情

```
XmlSerializerFactory 
```

并且不要忘记您在 HTML 页面中的设置

```
<meta charset="utf-8"> <!--HTML 5 -->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> <!-- if HTML version < 5--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:59:56.967

文本的字符集与浏览器解释为字符集的字符集之间很可能不匹配。

你有`<meta>`内容或字符集的标签吗？

鉴于您发送的字符集是 UTF-8，并且您使用的是 HTML5，这将是适当的标签

```
<meta charset="utf-8"> 
```

或者在早期版本的 HTML

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

对于`iso-8859-1`或任何其他字符集，只需替换`charset`属性。

# sql - using "like" in cakephp to return search results

> ID：10615075
> 
> 赞同：0
> 
> 时间：2012-05-16T08:52:57.750
> 
> 标签：sql, cakephp

this is the scenario:

i typed an address in a search box: "Blk 6 lot 34 brgy teniente tiago"

it must return all the "Blk 6 lot 34 brgy teniente tiago" from the column "address" of a particular table:

say for example the addresses are these:

```
 1   = "Blk 6 lot 34 brgy teniente tiago gma cavite"
        2   = "Blk 6 lot 34 brgy teniente tiago trece martirez cavite"
        3   = "Blk 100 lot 34 brgy teniente tiago gma cavite"
        4   = "Blk 6 lot 34 brgy teniente tiago gma cavite"
        5   = "whatever address it may be" 
```

the 1-4 records should be displayed... but the thing is if you did not type the exact address, as in the EXACT ADDRESS, it won't return anything.

i am coding in cakephp and it looks like this:

```
array('UserDetail.address LIKE'=>'%'.$filterparams['address'].'%') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:00:41.987

假设您有两个相似的值

将相似的词分配给一个变量，例如，`keyword`

并尝试：

```
$this->Model->find('all', array(
'conditions' => array('Model.column LIKE' => '%keyword%')
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:43:54.817

发现我的错误。实际上，我没有将查询的值存储到我试图在控制器中挑战的变量中。所以这就是我现在得到的：

```
$address = array('UserDetail.address LIKE'=>'%'.$filterparams['address'].'%'); 
```

# php - twitvid 视频上传问题“code”：“1002”，“msg”：“没有指定要上传的文件”

> ID：10615076
> 
> 赞同：0
> 
> 时间：2012-05-16T08:53:01.083
> 
> 标签：php, video, file-upload, twitter

我正在使用其官方 php 库在 twitvid 上上传视频。 [http://www.martin-gardner.co.uk/twitvid/twitvid.class.example.php#embedvideo](http://www.martin-gardner.co.uk/twitvid/twitvid.class.example.php#embedvideo)

但是当我上传视频时，它会返回这样的错误。

```
include_once('twitvid.class.php');
$Tv = new Twitvid;
$Tv->username = 'iphoneteamds@gmail.com';
$Tv->password = 'ds#123456';
$login_test = $Tv->authenticate_it();
$Tv->token="62BE4CB70D9A49100A1C6A175C8ED3E5";

if($_FILES['file']){
    pr($_FILES);
    $myfile = $_FILES['file'];
    //$myfile = fread(fopen($_FILES ['file']['tmp_name'], 'r'), $_FILES['file']['size']);
    $my_upload = $Tv->upload_video($myfile,"test","test1");
    pr($my_upload);
} 
```

ehre 是我上传视频的方法

```
function upload_video($media, $message="", $title="", $format='json', $playlist_id="", $vidResponse_parent="", $yt_username="", $yt_password="", $user_tags="", $geo_latitude="", $geo_longitude="", $tags="", $description="")
        {
            $request = 'https://im.twitvid.com/api/upload ';
            if($this->token !== ""){ 
                $postargs = "token=".$this->token."&format=".$format."&message=".$message."&playlist_id=".$playlist_id."&vidResponse_parent=".$vidResponse_parent."&yt_username=".$yt_username;
                $postargs.= "&yt_password=".$yt_password."&user_tags=".$user_tags."&geo_latitude=".$geo_latitude."&geo_longitude=".$geo_longitude."&tags=".$tags;
                $postargs.= "&description=".$description."&title=".$title."&media=".$media;
            }else {
                $postargs = "username=".$this->username."&password=".$this->password."&format=".$format."&message=".$message."&playlist_id=".$playlist_id."&vidResponse_parent=".$vidResponse_parent."&yt_username=".$yt_username;
                $postargs.= "&yt_password=".$yt_password."&user_tags=".$user_tags."&geo_latitude=".$geo_latitude."&geo_longitude=".$geo_longitude."&tags=".$tags;
                $postargs.= "&description=".$description."&title=".$title."&media=".$media;
            }
            return $this->process($request,$postargs);
        } 
```

请帮我解决并上传视频

我的表格如下

```
<form method="post" enctype="multipart/form-data" action="">
<input name="file" type="file" />
<input name="submit" type="submit" value="Submit" />
</form> 
```

结果如下。

```
{
"rsp": {
"stat": "fail",
"err": {
"code": "1002",
"msg": "No file specified to upload"
}
}
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:50:44.560

我是 Marty，我编写了 twitvid 类，看起来，您可能只是将文件名发送到上传方法，而不是二进制文件数据？

无论如何...自从该课程更新以来已经有一段时间了！

我已将课程更新到 1.3 版

它可以在网站上找到：[http ://martin-gardner.co.uk/twitvid/](http://martin-gardner.co.uk/twitvid/)

它从头开始完全重写该类，以符合 twitvid（众所周知的 Telly）对 api 和它们提供的功能所做的所有更改。

下载最新版本的课程，下载中包含一个演示页面，它是[示例页面](http://martin-gardner.co.uk/twitvid/twitvid.class_v1.3/)的副本，您可以在其中看到用于上传的基本代码...

# jquery - TinyMCE Preview Not Working in IE 8 and IE 7

> ID：10615077
> 
> 赞同：1
> 
> 时间：2012-05-16T08:53:12.410
> 
> 标签：jquery, tinymce

Im working with a web app and i used the latest version of tinyMCE as editor on the backend.. everything looks fine except with the template preview on IE..

is there anyone who encounter or has a fix for this??

THanks in advance.

here is my code

```
 tinyMCE.init({
// General options
mode : "textareas",
theme : "advanced",
plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

// Theme options
theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_resizing : true,

// Skin options
skin : "o2k7",
skin_variant : "silver",

// Drop lists for link/image/media/template dialogs
template_external_list_url : "../../js/tiny_mce/plugins/template/template_list_2.php",
external_link_list_url : "js/link_list.js",
external_image_list_url : "js/image_list.js",
media_external_list_url : "js/media_list.js",

editor_selector : "htmlEditor",
convert_urls : false,
width : "100%",
height: "500px",

init_instance_callback : function() { 
    $('.mceToolbar a').each(function(item){
        $(this).attr('tabindex', -1);
    }); 
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:20:56.490

将您的代码添加到此处。如果代码在 FF&chrome 中运行良好，我猜你可能会留下尾随逗号

# terminal - How to launch an iOS application in Simulator from Terminal and AppleScript

> ID：10615081
> 
> 赞同：3
> 
> 时间：2012-05-16T08:53:21.400
> 
> 标签：terminal, ios-simulator, applescript, .app

I have made an iOS application in Xcode and built it. It has created an `.app` bundle. I am able to launch the app in Simulator or on the device successfully from Xcode or iTunes, but now I want to launch it in Simulator through AppleScript from Terminal.

I am able to build the app from Terminal, but unable to launch it in Simulator. Somehow I found out that an `.ipa` file is needed to run the app from Terminal.

Is there a way to launch an iOS app I built in Simulator from Terminal?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:29:12.920

我找到了一个我想要使用 iTunes 的 .ipa 文件并将其复制到我的桌面上。之后，我将扩展名更改为 .zip 并将其解压缩。接下来，我找到了 Payload 文件夹，并将应用程序移到了我的桌面上。最后，我将该应用程序移动到我的 iPhone 模拟器应用程序文件夹中，该文件夹位于：“您的磁盘名称”>“开发人员”>“平台”>“iPhoneSimulator.platform”>“开发人员”>“SDKs”>“iPhoneSimulator4.3.sdk”>“应用程序”

希望这可以帮助！（注意：某些应用程序比其他应用程序更频繁地崩溃。）

# python - 如何在迁移后而不是在syncdb之后加载initial_data（fixture）？

> ID：10615084
> 
> 赞同：2
> 
> 时间：2012-05-16T08:53:24.347
> 
> 标签：python, django, migration, fixtures, django-syncdb

我有一个`bootstrap`执行`syncdb`和的脚本`migrate`：

```
import settings
from django.core.management import setup_environ, call_command

setup_environ(settings)                                         # Setting up the env settings
call_command('syncdb', migrate=True, interactive=False)         # Sync the database 
```

**先决条件：**

*   `django-south`用于迁移。

**过程发生：**

*   `initial_data`夹具包含由迁移创建的模型的数据。
*   `syncdb`执行它会创建所有表，除了那些存在迁移的应用程序。
*   发布`syncdb`它尝试加载`initial_data`并引发db not found**错误**，因为带有迁移的应用程序表不是由 syncdb 创建的。[**问题**]
*   然后它执行创建数据库的迁移。
*   发帖本次`migration`自动加载`initial_data`成功。

**问题：**

*   `error`当它试图为尚未创建的表加载夹具时，我该如何摆脱它？
*   我可以以某种方式编辑上述脚本，使其`initial_data`仅在执行后加载`migration`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:27:35.657

您可以在 syncdb 时禁用加载初始数据：

```
call_command('syncdb', load_initial_data=False, interactive=False)
call_command('migrate', interactive=False) 
```

从syncdb.py的源代码：

```
# Stealth option -- 'load_initial_data' is used by the testing setup                                                               
# process to disable initial fixture loading.                                                                                      
load_initial_data = options.get('load_initial_data', True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:09:03.690

有几种方法可以解决这个问题：

1.  只需调用要为其填充数据的应用程序，即可从初始数据转储中排除应用程序
2.  可以试试这个库[https://github.com/davedash/django-fixture-magic](https://github.com/davedash/django-fixture-magic)
3.  您可以编写自定义管理命令来填充您需要的模型
4.  您还可以使用南方附带的数据迁移[http://south.aeracode.org/docs/tutorial/part3.html](http://south.aeracode.org/docs/tutorial/part3.html)

就我个人而言，我会选择 1 或 3。对于第一点，将灯具单独存储在灯具文件夹下的每个应用程序中。但是，如果您的模型发生变化，这将很难更新。因此编写自定义管理命令可能是最轻松的。

# c# - 如何将工作编组到单线程c#

> ID：10615085
> 
> 赞同：2
> 
> 时间：2012-05-16T08:53:29.343
> 
> 标签：c#, multithreading, marshalling, single-threaded

我有一个应用程序需要处理来自 UDP 广播的一些数据包，并将结果写入 SQL 数据库。在间隔期间，传入数据包的速率变得非常高，并且我发现底层缓冲区溢出，即使是 8MB，因为数据库写入速度很慢。

为了解决这个问题，我提出了两个选项，缓存一些数据库写入，和/或将数据库写入编组到另一个顺序操作线程。（必须保留数据库写入的顺序）。

我的问题是如何使用 c# 的内置结构/功能最有效地编组工作？

我是否应该只拥有一个同步队列，将委托工作项放在它上面，并在事件循环中让一个线程为它服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:19:59.057

最简单的方法是为 UDP 读取创建一个单独的线程。

线程只是接收包并将它们放入 BlockingCollection。（不知道你是如何读取数据包的，所以这将是伪代码）

```
BlockingCollection<Packet> _packets = new BlockingCollection<Packet>();
...

while (true) {
    var packet = udp.GetNextPacket();
    _packets.Add(packet);
} 
```

这将确保您不会因为阅读线程很忙而错过任何包裹。

然后，您创建一个工作线程，它与您当前的代码执行相同的操作，但它从blockingcollection 中读取。

```
while (true) {
   var nextPacket = _packets.Take();
   ...
} 
```

如果您的包是独立的（因为您使用 UDP，它们应该是独立的），您可以启动多个工作线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:57:53.627

如果您使用的是 .Net 4，[Tasks 和 TaskScheduler](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)可以在这里为您提供帮助。在 MSDN 上，您会找到[LimitedConcurrencyLevelTask​​Scheduler](http://msdn.microsoft.com/en-us/library/ee789351.aspx)。创建一个并发级别为 1 的单个实例，每次您有工作要做时，创建一个任务并使用该调度程序安排它。

# javascript - 通过 javascript 请求和响应第三方域

> ID：10615087
> 
> 赞同：-3
> 
> 时间：2012-05-16T08:53:32.623
> 
> 标签：javascript, jquery, cross-domain, jsonp, client-side

我在一个基于网络的应用程序中工作，它必须在第 3 方网站上从他们的帐户向用户显示信息，他们将提供他们的登录详细信息，我必须从他们的帐户中提取数据并将其显示在我的基于网络的应用程序上但是问题是**第 3 方网站不允许任何其他人访问他们没有在他们的数据库中注册的 ip 的帐户**。所以，**我不能使用任何服务器端或任何类型的代理，我必须使用用户 ip 来发送和接收站点的数据**。

所以我的主要问题是“**如何以任何基于客户端的语言获得跨域请求的响应**”。我听说这是不可能的，因为它违反了跨域策略，但我发现一些网站告诉它可以使用 JSONP 和一些 src 属性。我实际上很困惑如何做到这一点。我需要一个该方法的示例，例如我向 3rd 方站点发出请求并能够读取他们发送的响应。

请帮我 。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:58:17.603

您不能让访问者的浏览器向任意网站发出 HTTP 请求并用 JavaScript 处理响应。

如果第 3 方构建了 JSON-P API，您可以使用它。

如果第 3 方支持 CORS（并且您的访问者有[兼容的浏览器](http://caniuse.com/#search=cors)，那么您可以使用 XHR。

除非您被告知它们是受支持的，否则对这两种方法中的任何一种进行详细介绍都没有什么意义。（如果第三方将他们的服务锁定到特定的 IP 地址，如果任何一个都支持，我会感到惊讶）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:59:35.703

对于 JSONP 请求，您可以使用库或手动完成。对于后者，您插入一个具有所有请求信息和附加回调属性`<script>`的属性的新标签。`src`

```
 <script src="//remote.host.com/getJSONP.php?param1=0&callback=myFunc"></script> 
```

然后，您必须在您的页面中定义一个与回调（此处）同名的函数，该函数`myFunc`处理响应。

```
function myFunc( data ) {
  // do something with data
} 
```

响应通常是一个或多或少复杂的 JS 对象，然后您可以在回调函数中使用它。

注意：您只能传递 GET 参数，不能传递 POST 或任何其他类型！

# c# - Serialize list with base type into derived type json

> ID：10615089
> 
> 赞同：3
> 
> 时间：2012-05-16T08:53:44.567
> 
> 标签：c#, .net, json, json.net, asp.net-web-api

I have a Web API controller action which has a parameter of type CommandMessage. That type has a list with base types, CommandBase. My problem is that I can't make them to be of derived types, MyCommand in this example.

I'm using [JsonNetFormatter](https://github.com/WebApiContrib/WebAPIContrib/blob/master/src/WebApiContrib.Formatting.JsonNet/JsonNetFormatter.cs) from the Web API contrib project. It's using Json.Net as serializer.

Web API controller:

```
public class CommandController : ApiController
{
    public HttpResponseMessage Post(CommandMessage command)
    {
        //command.Commands[0].GetType().Name is always "CommandBase" instead of "MyCommand"
        var message = new HttpResponseMessage(HttpStatusCode.OK)
                          {
                              Content = new StringContent(string.Format("Type of command 1 is '{0}'", command.Commands[0].GetType().FullName))
                          };
        return message;
    }
} 
```

This i my request:

```
private void When()
    {
        using (client)
        {
            command = new MyCommand
                          {
                              CommandId = Guid.NewGuid(),
                              Id = Guid.NewGuid(),
                              Name = "Martin"
                          };

            var message = new CommandMessage(Guid.NewGuid(),new List<CommandBase> {command});

            var requestMessage = GetHttpRequestMessage(message);
            var task = client.PostAsync("http://localhost.:16218/api/command", requestMessage.Content);
            task.Wait();
            responseMessage = task.Result;
        }
    }

private static HttpRequestMessage GetHttpRequestMessage<T>(T data)
    {
        var mediaType = new MediaTypeHeaderValue("application/json");
        var jsonFormatter = new JsonNetFormatter(DefaultJsonSettings.Settings());

        var requestMessage = new HttpRequestMessage<T>(data, mediaType, new[] {jsonFormatter});

        return requestMessage;
    } 
```

And as JSON:

```
{
  "$type": "PostToBaseClassList.Models.CommandMessage, PostToBaseClassList",
  "Commands": [
    {
      "$type": "PostToBaseClassList.Models.MyCommand, PostToBaseClassList",
      "Id": "45923a41-0c15-46e3-907d-64dd06840539",
      "Name": "Martin"
    }
  ],
  "MessageId": "c873970a-8621-4223-806e-b809039438ab"
} 
```

The return message from the API controller action is:

> Type of command 1 is 'PostToBaseClassList.Models.CommandBase'

Command classes:

```
 [DataContract]
[XmlRoot]
public class MyCommand : CommandBase
{
    private readonly string name;

    public MyCommand()
    {
    }

    public MyCommand(Guid id, string name)
    {
        this.name = name;
        Id = id;
    }

    [DataMember(Order = 1)]
    [XmlElement]
    public Guid Id { get; set; }

    [DataMember(Order = 2)]
    [XmlElement]
    public string Name { get; set; }
}

 [DataContract]
[KnownType("GetKnownTypes")]
public class CommandBase
{
    public Guid CommandId { get; set; }

    public static Type[] GetKnownTypes()
    {
        var query =
            from type in typeof (CommandBase).Assembly.GetTypes()
            where typeof (CommandBase).IsAssignableFrom(type)
            select type;

        var types = query.ToArray();
        return types;
    }
}

[DataContract]
[Serializable]
[XmlRoot]
public class CommandMessage
{
    public CommandMessage()
    {
    }

    public CommandMessage(Guid messageId, IEnumerable<CommandBase> commands)
    {
        MessageId = messageId;
        Commands = new List<CommandBase>(commands);
    }

    [DataMember]
    [XmlElement]
    public List<CommandBase> Commands { get; set; }

    [DataMember]
    [XmlElement]
    public Guid MessageId { get; set; }
} 
```

Json.Net settings:

```
//DefaultJsonSettings.Settings()
var settings = new JsonSerializerSettings
                           {
                               NullValueHandling = NullValueHandling.Ignore,
                               TypeNameHandling = TypeNameHandling.Objects,
                               Converters = new List<JsonConverter>
                                                {
                                                    new IsoDateTimeConverter
                                                        ()
                                                }
                           };

private static void RegisterFormatters(HttpConfiguration config)
    {
        var jsonNetFormatter = new JsonNetFormatter(DefaultJsonSettings.Settings());
        config.Formatters.Insert(0, jsonNetFormatter);
    } 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:20:16.550

Json.NET 不尊重`KnownTypes`属性，您必须提供自己的转换器。

这个问题提供了几个不同的解决方案来解决这个问题： [Using Json.NET converters to deserialize properties](https://stackoverflow.com/questions/2254872/using-json-net-converters-to-deserialize-properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:10:42.120

在我将此行添加到 RegisterFormatters() 后它起作用了

```
config.Formatters.Remove(config.Formatters.JsonFormatter); 
```

这还不够

```
config.Formatters.Insert(0, jsonNetFormatter); 
```

完整版本

```
private void RegisterFormatters()
{
    config.Formatters.Remove(config.Formatters.JsonFormatter);
    var jsonNetFormatter = new JsonNetFormatter(DefaultJsonSettings.Settings());
    config.Formatters.Insert(0, jsonNetFormatter);
} 
```

# instance - Instance of OWL-class with unionOf (n3)

> ID：10615090
> 
> 赞同：2
> 
> 时间：2012-05-16T08:53:45.493
> 
> 标签：instance, owl, restriction, n3

Suppose i have an OWL-class as following:

```
:picture    rdf:type owl:Class ;
            owl:unionOf(:creator :theme :title :date) . 
```

With `:creator`, `:theme`, `:title` and `:date` either an `owl:ObjectProperty` or `owl:DataProperty`.

For example:

```
:creator    rdf:type owl:ObjectProperty ;
            rdfs:comment "The creator of this picture." ;
            rdfs:domain :picture ;
            rdfs:range foaf:Person . 
```

How can i create an instance of this picture class ?

(I understand how i create an instance of an easy thing such as : `<http://dbpedia.org/resource/Paris> rdf:type :location .` would be an instance of a location)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:59:38.267

If you want to describe the class which **may** contain properties `:creator`, `:theme`, `:title`, and `:date` you should just describe the domain for all properties (no additional definitions in picture class are necessary):

```
:picture a owl:Class .

:creator rdfs:domain :picture ;
         rdfs:range foaf:Person . 
```

And so on.

If you want to describe the class which **must** contain these properties, cardinality constraints should be added:

```
:picture a owl:Class ;
         rdfs:subClassOf [
             a owl:Restriction ;
             owl:onProperty creator ;
             owl:minCardinality "1"^^<http://www.w3.org/2001/XMLSchema#int>
         ]
         rdfs:subClassOf [
             a owl:Restriction ;
             owl:onProperty theme ;
             owl:cardinality "1"^^<http://www.w3.org/2001/XMLSchema#int>
         ]
         ... etc ... 
```

In both cases the definition of an instance looks like following:

```
:monaLisa a :picture ;
          :creator :LeonardoDaVinci ;
          ...
          :date "1503-01-01"^^<http://www.w3.org/2001/XMLSchema#date> 
```

More about restriction you can learn, for example, from [this](http://www.cs.vu.nl/~guus/public/owl-restrictions/#h3-qcr) document.

# c# - C# Excel 互操作：无法从 excel 中读取所有数据

> ID：10615095
> 
> 赞同：0
> 
> 时间：2012-05-16T08:54:15.720
> 
> 标签：c#, excel, excel-interop

我在从 xlsx 文件中读取日期时遇到问题，我的意思是它没有读取单元格中的所有信息，例如我在单元格中有以下信息：

```
"4876112","3456151712","345627712","3125HPC21017500011","34131HPC210349014112","35134HPC210273008212" 
```

当我查看 DataTable 时，我只在行中看到此信息

```
"4876112","3456151712","345627712", 
```

这是我的代码：

```
Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Interop.Excel.Workbook workbook = excelApp.Workbooks.Open(input, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

string sheetname = "";

foreach (Microsoft.Office.Interop.Excel.Worksheet sheet in workbook.Sheets)
{
    sheetname = sheet.Name;
    break;
}

string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", input);
string query = String.Format("select * from [{0}$]", sheetname);
OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);
DataSet ds = new DataSet();
dataAdapter.Fill(ds);
tabela = ds.Tables[0]; 
```

我输入并将Excel的单元格格式化为文本并且工作正常。我可以以编程方式将所有单元格格式更改为文本吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:06:44.330

如果您希望将工作表中的所有单元格格式化为文本，您可以简单地执行以下操作：

```
sheet.Cells.NumberFormat = "@"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:43:56.047

这是如何使用 C# 访问 Excel 的框架。最好使用 C# 4.0 或更高版本，因为它具有更好的 COM 互操作性。

```
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection;
using System.Runtime.InteropServices;

...
//create objects
Excel.Application oXL;
Excel._Workbook oWB;
Excel._Worksheet oSheet;

oXL         = new Excel.Application();
oXL.Visible = false;
oWB         = oXL.Workbooks.Open(template_file);
oSheet      = (Excel._Worksheet)oWB.Worksheets[1];

//set cell values
oSheet.Cells[1, 1] = "my value here";

//set formatting
oSheet.get_Range("A1", "A15").Font.Bold         = true;
oSheet.get_Range("A1", "A15").VerticalAlignment = Excel.XlVAlign.xlVAlignCenter;
oSheet.get_Range("A1", "A15").ColumnWidth       = 20;

//close 
oXL.ActiveWorkbook.Close();
Marshal.ReleaseComObject(oWB);
Marshal.ReleaseComObject(oSheet);
Marshal.ReleaseComObject(oXL); 
```

# python - 如何使用 M2Crypto 从 .pem 文件加载受密码保护的私钥？

> ID：10615098
> 
> 赞同：5
> 
> 时间：2012-05-16T08:54:18.430
> 
> 标签：python, m2crypto, pem, python-2.4

我在 .pem 文件中有一个受密码保护的私钥；我想用它来签署对远程服务器的请求。在提示输入密码后，我可以加载密钥并输入密码：

```
python
>>> import M2Crypto
>>> pk = M2Crypto.RSA.load_key('private.pem')
Enter passphrase:
>>> 
```

但是，我需要这个用于每天早上重新启动的服务器进程，因此密码必须以某种方式自动传递。load_key 方法为此目的支持回调参数，因此我尝试了以下几种变体：

```
>>> def gimmepw():
...     return 'mysecret'
...
>>> pk = M2Crypto.RSA.load_key('private.pem', gimmepw)
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "/usr/local/Plone/Python-2.4/.../M2Crypto/RSA.py", line 351, in load_key
    return load_key_bio(bio, callback)
  File "/usr/local/Plone/Python-2.4/.../M2Crypto/RSA.py", line 372, in load_key_bio
    rsa_error()
  File "/usr/local/Plone/Python-2.4/.../M2Crypto/RSA.py", line 302, in rsa_error
    raise RSAError, m2.err_reason_error_string(m2.err_get_error())
M2Crypto.RSA.RSAError: bad password read
>>> 
```

*（将“...”替换为“lib/python2.4/site-packages”）*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:19:37.577

这是由于您的回调函数中缺少参数支持。由于将使用至少一个参数调用它，因此`TypeError`将发生异常（由 M2Crypto 捕获）。

```
>>> def gimmepw(*args):
...     print 'args:', repr(args)
...     return 'test'
... 
>>> M2Crypto.RSA.load_key('key.pem', gimmepw)
args: (0,)
<M2Crypto.RSA.RSA instance at 0xb6e8050c> 
```

你应该试试：

```
def gimmepw(*args):
    return 'mysecret' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-08T08:06:18.110

一个警告：从 Python 2.7 开始，方法的返回值`callback`必须返回一个`str`类型。

例如，一个`unicode`类型会以同样的方式出错。

```
>>> def gimmepw(*args):
...     return u'test'
... 
>>> M2Crypto.RSA.load_key('key.pem', gimmepw)
Traceback (most recent call last):
  File "test_intuit_data.py", line 76, in <module>
    intuit_rsa_key = RSA.load_key(file='key.pem', callback=gimmepw)
  File "lib/python2.7/site-packages/M2Crypto/RSA.py", line 351, in load_key
    return load_key_bio(bio, callback)
  File "lib/python2.7/site-packages/M2Crypto/RSA.py", line 372, in load_key_bio
    rsa_error()
  File "lib/python2.7/site-packages/M2Crypto/RSA.py", line 302, in rsa_error
    raise RSAError, m2.err_reason_error_string(m2.err_get_error())
M2Crypto.RSA.RSAError: bad password read 
```

如果您使用类型以外的任何输入`str`，请务必`str`正确转换为：

```
>>> def gimmepw(*args):
...     return str(u'test')
... 
>>> M2Crypto.RSA.load_key('key.pem', gimmepw)
<M2Crypto.RSA.RSA instance at 0xb6e8050c> 
```

# asp.net - Getting hidden field value from content-page after cross-page post

> ID：10615099
> 
> 赞同：0
> 
> 时间：2012-05-16T08:54:35.740
> 
> 标签：asp.net, hidden-field

I have the following situation:

`Page1.aspx` is based on a master page and has a hidden field called "hdFlotaID" in it. On the same page I have a button for which I set `PostBackUrl="Page2.aspx"`. When I click the buton, the Page2 is loaded but I can't get the hidden field. I tried both (as I saw on msdn or other posts):

```
this.PreviousPage.Controls[0].FindControl("hdFlotaID") 
```

and

```
this.PreviousPage.FindControl("hdFlotaID") 
```

but they return null.

`This.PreviousPage` returns a value, but `Controls[0]` of that value seems to return the masterpage and I want the content page.

I also checked and the hidden field has runat server value and ClientID mode is set to static (I even checked the generated HTML and the ID is correct)

Can you please help me! Thank you

**SOLUTION**: Ok,so based on your help I got it to work like this

```
this.PreviousPage.Controls[0].FindControl("CPH").FindControl("hdFlotaID") 
```

where CPH is the ID of the ContentPlaceHolder from the master page.

Also the ideea with the public property is very good allthough in my case adding the PreviousPageType directive was giving me some errors about namespaces. If I removed the directive and cast it in codebehind it works fine.

Thank you all very much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:08:05.113

FindControl 只搜索一个级别，即顶级容器，并且内容页面的所有控件并不直接在主控件集合中，而是在主内容控件集合中。

为达到这个

1）你需要编写一个递归版本的FindControl。试试这样（没有测试过）：

```
((Page1)this.PreviousPage).FindControl("hdFlotaID") 
```

或者

2) 将前一页类型转换为它所在的页面类型。然后您可以访问控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:07:01.833

在 page1.aspx 中设置一个属性，使用 .aspx 返回隐藏字段的值`this.Page.MasterPage.FindControl("hdFlotaID")`。在 Page2.aspx 中，`"PreviousPageType"`在 ASPX 文件中添加标签。这样，您可以以类型安全的方式访问 previos 页面属性，例如`this.PreviousPage.hdFlotaID_property`

# javascript - doc.evaluate 的替代品

> ID：10615103
> 
> 赞同：0
> 
> 时间：2012-05-16T08:54:54.547
> 
> 标签：javascript, firefox, xpath

是否有任何更短的表达式可以通过 XPath 获取 DOM 节点，从以下需要大量变量的命令中更简洁。

```
doc.evaluate(xpath, doc, nsResolver, XPathResult.ANY_TYPE, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:10:29.353

据我所知，Firefox 只支持 DOM Level 3 XPath API，其中部分`evaluate`功能是。如果你想要更短的东西，那么你需要自己动手（或找到一个为你做的库），或者你需要使用不同的浏览器，例如使用 Opera，你可以`node.selectSingleNode(path [,nsResolver])`选择一个节点，`node.selectNodes(path [, nsResolver])`你可以选择节点的 DOM NodeList。在您与 IE 一起使用的 MSXML 的 XML DOM 实现中，您还拥有`selectSingleNode`和`selectNodes`功能，尽管命名空间处理与 Opera 实现不同，因为您需要使用 MSXML `document.setProperty('SelectionNamespaces', 'xmlns:pf1="http://example.com/ns1" xmlns:pf2="http://example.com/ns2"')`。

# c++ - 临时对象可以绑定到非常量引用吗？

> ID：10615106
> 
> 赞同：5
> 
> 时间：2012-05-16T08:55:05.380
> 
> 标签：c++, pass-by-reference, temporaries

我编写了以下代码来测试它：

```
struct X
{
   char* x;
   X()
   {
      x = new char('a');
   }
   ~X()
   {
      *x = 'b';
      delete x;
   }
};

void foo(const X& x)
{
}
void goo(X& x)
{
}

int main()
{
   foo(X());
   goo(X());
} 
```

*两个函数退出后*都会调用临时对象的析构函数，但我认为您只能将临时对象绑定到`const`引用。那为什么会`goo`起作用？

是 UB 和 MSVS 错了，还是没问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:58:08.387

这是非法的。符合标准的实现会诊断它（即它必须至少发出警告），但 MSVC++ 允许它作为扩展。

或者如果您不友善，则可能是一个错误，但是 IIRC 他们仍然允许它的原因是由于长期存在的遗留原因：名义上支持在 C++ 标准化之前为 MSVC++ 编写的代码，但是当然，一旦您允许人们编写此代码，他们就会编写它也意外地出现在新代码中，因此遗产继续存在。如果它是故意的，那么它是一个（错误）功能，而不是一个错误，对吧？无论如何，诊断格式错误的程序*需要*一个符合要求的实现，因此如果您没有收到警告，则编译器不符合要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:58:01.763

这显然是一个 MS 扩展。例如，在 GCC 4.3.4 中，它[无法编译](http://ideone.com/oH3cM)，并显示以下消息：

```
prog.cpp: In function ‘int main()’:
prog.cpp:25: error: invalid initialization of non-const reference of type ‘X&’ from a temporary of type ‘X’
prog.cpp:18: error: in passing argument 1 of ‘void goo(X&)’ 
```

# jquery - Scroll the content at set intervals?

> ID：10615110
> 
> 赞同：0
> 
> 时间：2012-05-16T08:55:14.377
> 
> 标签：jquery

There are two lines as the following:

```
<div id="test"> test one jquery is a good library.<br/>
test two php is a good language.</div> 
```

now i want to scroll them one by one (**the top line hide the bottom line show.vice versa**)and the line shows and hides automatically which time interval is 500 milliseconds . the scroll direction is from bottom to top.

i don't know how to do.

the following is my code. but I am totally stucked. i don't know how to write the function.

```
$(function(){
            $('#test').slideUp('500' function(){
        //how to write
      });
        })​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:46:12.000

要切换内容，您需要交换 div 中的文本，并且您需要某种方式在定义的间隔后重复此操作，这可以通过 javascript 的 setInterval 方法来实现。 [JsFiddle 上的演示](http://jsfiddle.net/FSK2S/2/)

```
div1= document.getElementById('test');    

interval = setInterval(function myfun(){ 
    arr = div1.innerHTML.split(/<br[^>]*>/gi);
    div1.innerHTML = arr[1] + '<br/>' + arr[0];
  //alert(div1.innerHTML);
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:47:58.743

这可以通过使用一些 CSS3 动画和几行 JS 代码来存档。演示在[http://jsfiddle.net/Vm2wz/2/](http://jsfiddle.net/Vm2wz/2/)

```
<!doctype html>
<html>
<head>
<style type="text/css">
/* Effect Rules */
.animated { /* you can add moz support as well */
  -webkit-transition-properties: top opacity;
  -webkit-transition-duration: 0.25s; 
}
.hide {
  opacity: 0;
}
.top {
  top: -30px;
}
.bottom {
  top: 30px;
}

/* Canvas Setup Rules */
ul, li {
  padding: 0;
  margin: 0;
  height: 30px;
  list-style: none;
}

ul {
  position: relative;
}

li {
  top: 0;
  position: absolute;
}
</style>
</head>
<body>
<ul>
  <li>CSS3 is so amazing.</li>
  <li>DOM is best toy.</li>
  <li>jQuery sucks every way.</li>
</ul>
<script type="text/javascript">
var ul = document.querySelector('ul');
var items = ul.querySelectorAll('li');

for (var i = 0, item; item = items[i]; i++)
  items[i].className = 'bottom hide';

var curid = 0, nextid = 1, state = 0;
setInterval(function() {
  switch (state) {
    case 0: // hide items[curid], and show items[nextid] in 250ms
      items[curid].className = 'animated top hide';
      items[nextid].className = 'animated';
      state = 1;
    break;
    case 1: // move items[curid] to bottom, curid = nextid, nextid++;
      items[curid].className = 'bottom hide';
      curid = nextid;
      if (++nextid >= items.length) nextid = 0;
      state = 0;
    break;
  } // you may also add a state 2 which do nothing but wait 250ms. then the state goes from 0 -> 2 -> 1 -> 0.
}, 250);

</script>
</body>
</html> 
```

# c# - 具有自动实现属性和构造函数初始化程序的结构

> ID：10615114
> 
> 赞同：2
> 
> 时间：2012-05-16T08:55:35.390
> 
> 标签：c#, .net, constructor, struct, automatic-properties

最近一个编译器警告和（非常有用的）提示提示我编写下面的代码。

我不知道你可以这样做，但这是完全合法的，而且也很方便，因为我可以声明一个具有类似于非托管结构的公共字段的公共属性的托管结构，并且还可以用一个对象来初始化它，而不必通过所有字段作为参数。

让我感到困惑的是，这似乎调用了显式无参数构造函数，这对于这个结构当然是非法的。

这是怎么回事，这种语法是否一直受到支持？

```
internal struct IconEntry
{
    public byte Width { get; set; }
    public byte Height { get; set; }
    public byte ColorCount { get; set; }
    public byte Reserved { get; set; }
    public short Planes { get; set; }
    public short BitCount { get; set; }
    public int BytesInRes { get; set; }
    public int ImageOffset { get; set; }

    public IconEntry(BinaryReader reader)
        : this()
    {
        Width = reader.ReadByte();
        Height = reader.ReadByte();
        ColorCount = reader.ReadByte();
        Reserved = reader.ReadByte();
        Planes = reader.ReadInt16();
        BitCount = reader.ReadInt16();
        BytesInRes = reader.ReadInt32();
        ImageOffset = reader.ReadInt32();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:59:04.600

结构始终具有无法覆盖的公共无参数构造函数：http: [//msdn.microsoft.com/en-us/library/aa288208%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288208%28v=vs.71%29.aspx)

这意味着用户仍然可以创建此结构的实例，该实例未根据您的逻辑进行初始化，但所有属性都具有默认值：

```
var s = new IconEntry(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:59:17.157

所有结构都有一个无参数的构造函数——它只是隐式的（例如，它总是与默认例程一起存在——将所有值设置为 0）——你不能有一个显式的构造函数（例如，你在代码中定义的那个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:16:55.640

您是否有任何理由公开结构的属性而不是字段？如果您的数据类型的语义暗示

1.  实例的整个状态将完全由某些公共成员公开的值定义，因此所有这些报告或包含相同值的两个实例将被视为相同。
2.  给定所讨论的所需值，可以轻松创建具有上述成员值的任意组合的结构实例。

这听起来非常适合 PODS（普通旧数据结构）。与结构属性相比，暴露的字段更有效且不那么古怪。鉴于所有结构类型总是公开所有字段以通过结构赋值进行突变或捕获，因此结构属性提供的封装价值极其有限。

按照您编写构造函数的方式，您的结构将所有字段设置为所有位为零，然后重复传递给方法，这些方法将使用所需的值一次更新一个字段。结构被指定为初始化为全零的事实`this`将使编译器感到高兴，但是使用许多单独的属性来零碎地设置字段是低效的。

顺便说一句，在许多情况下，甚至比构造函数更好的是静态方法，它只是将您的结构作为`ref`参数。在许多情况下，使用带有结构的构造函数会导致不必要的复制操作，这可以通过使用带有`ref`参数的静态方法来避免。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-11T19:12:37.567

由于结构是值类型，因此如果显式调用构造函数，则应初始化其数据成员。如果您提到任何内容，请向亲密的编译器提及“this()”以完成自动实现属性的分配。

```
struct Student
{        
    string _sname;       

    public int ID
    {
        get; set;
    }

    internal Student(string sname):this()
    {            
        _sname = sname;
    }

    internal void PrintDetails()
    {
        Console.WriteLine("ID : {0} Name: {1}", ID, _sname);
    }
} 
```

主要方法：

```
class Program
     {
         static void Main()
         {
             Student st = new Student("John")
             {
                 ID=101
             };

             st.PrintDetails(); 

         } 
     }

Output:
ID : 101 Name: John 
```

如果您没有提及“this()”，编译器会强制要求您完成 ID 属性的完整分配。

如果您没有显式调用构造函数，编译器会为结构数据成员隐式设置默认值。

# grails - How to solve memory leak problems?

> ID：10615118
> 
> 赞同：3
> 
> 时间：2012-05-16T08:55:51.053
> 
> 标签：grails, memory-leaks, tomcat7

I have a problem with some thread and memory leak...In the log of my Tomcat7 I found this lines about my grails application:

```
SEVERE: The web application [/myApp] appears to have started a thread named [MySQL Statement Cancellation Timer] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-1] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-2] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-3] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-4] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-5] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-6] but has failed to stop it. This is very likely to create a memory leak.
May 16, 2012 6:02:10 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myApp] appears to have started a thread named [pool-63-thread-7] but has failed to stop it. This is very likely to create a memory leak. 
```

and more of those... The problem is that I think that all those threads are created in a part of the application developed from a 3th party JAR which I don't have the source and I can't modify by myself.

Is there a way to solve it, or at least to understand what is not going well?

thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:57:00.190

第一行表示 MySQL JDBC 驱动程序中的错误。看起来它已在 5.1.6 中修复 - 请参阅[http://bugs.mysql.com/bug.php?id=36565因此您可以尝试用](http://bugs.mysql.com/bug.php?id=36565)[http://dev.mysql.com/downloads](http://dev.mysql.com/downloads/connector/j/)中的最新版本替换 jar [/连接器/j/](http://dev.mysql.com/downloads/connector/j/)

其他行表示已启动的 ThreadPool，并且在应用程序停止时未停止。这实际上只能通过修改第三方 jar 的源代码来解决，如果那是问题所在。

如果可能，您可以尝试暂时消除第三方 jar 以查看问题是否消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T11:36:10.667

对于 ThreadPool 问题，我使用的解决方案（并且似乎有效）是：

*   我创建了一个`ServletContextListener`
*   在该`contextDestroyed`方法中，通过使用反射，我调用了 DataSource 的 close 方法 - 在我的情况下，它似乎适用于 c3p0 和 DBCP
*   对于 c3p0，我认为还应该调用静态方法 `com.mchange.v2.c3p0.DataSources.destroy`（dataSource）；

# arrays - 在 Perl 中，如何将散列数组转换为值数组？

> ID：10615120
> 
> 赞同：2
> 
> 时间：2012-05-16T08:56:01.700
> 
> 标签：arrays, perl, hash, mapping

我有一个哈希数组：

```
my @sports;
push @sports, { id=>1, name=>'Rugby' };
push @sports, { id=>2, name=>'Football' }; 
```

我想得到一个包含所有名称的数组（显示在 CGI 弹出菜单中）。我尝试使用这个 grep 语句：

```
my @names = grep { $_->{name} } @sports; 
```

但它只返回一个哈希值数组......

所以我目前正在使用循环来遍历所有值，将它们推入另一个数组。

有没有办法加快这个速度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T09:29:36.693

你想要[`map`](http://perldoc.perl.org/functions/map.html)，而不是[`grep`](http://perldoc.perl.org/functions/grep.html)：

```
use strict;
use warnings;
my @sports;
push @sports, { id=>1, name=>'Rugby' };
push @sports, { id=>2, name=>'Football' };
my @names = map $_->{name}, @sports;
print for @names; 
```

```
D:\temp> perl -l m.pl
橄榄球
足球
```

但是请注意，这与速度没有任何关系，至少在很大程度上没有关系，而且速度不应该是您最关心的问题；可读性应该是它。当然，效率很重要，但不要让自己误以为代码越简洁和神秘，程序的性能就越好。事实并非如此。[要评估性能，请对您的程序进行基准测试](https://metacpan.org/module/Benchmark)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:19:06.730

```
my @sports;
push @sports, { id=>1, name=>'Rugby' };
push @sports, { id=>2, name=>'Football' };
foreach(@sports){
  push @names, $_->{'name'};
}
foreach(@names){
  print "$_\n";
} 
```

啊，对不起 - 重读你的帖子。TBH，不管你怎么写，我怀疑无论如何都会在内部发生一个循环。你确定你没有试图过早地优化吗？有性能问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:31:52.077

```
for my $i ( 0 .. $#sports) {  
     print "$sports[$i]{name} \n";    
} 
```

事实上，你也可以使用 map 函数来循环遍历

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:59:59.313

如果您真的对`@sports`示例中的填充进行了硬编码，则解决方案很简单：

```
my (@sports, @names);
push @sports, { id=>1, name=>'Rugby' };
push @names, 'Rugby';
push @sports, { id=>2, name=>'Football' };
push @names, 'Football'; 
```

这完全避免了第二个循环。

# maven - Jacoco w/ Jetty + Selenium RC

> ID：10615133
> 
> 赞同：3
> 
> 时间：2012-05-16T08:56:42.817
> 
> 标签：maven, sonarqube, maven-jetty-plugin, jacoco

我回到这里是因为我有一些问题。（我之前发布了关于我正在从事的项目的 2 或 3 个问题，这个问题仍然与这个项目有关）
所以我有一个使用 Maven 构建的 smartGWT Web 应用程序。为了对其进行单元测试，我必须使用 Selenium RC（能够使用 smartClient 提供的 user-extensions.js），并且由于它必须与持续集成兼容，我必须将 webapp 部署在 Jetty 容器上。现在我只剩下一个问题：
**如何使用 Jacoco 和 Jetty 让 Sonar 识别我的测试并给我代码覆盖率？**

jetty-maven-plugin 中是否有允许我在每次部署应用程序时运行 jacoco-agent 的属性？

提前谢谢，再来一次=）
（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:56:44.850

看来您唯一的选择是货物插件。

如重复问题的链接中所述，Jetty 在与 Maven 相同的 JVM 中执行。

因此，如果无法使用 JVM 选项，则必须使用 cargo 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:30:06.257

maven-jetty-plugin 最近添加了对在单独的 JVM 中运行 jetty 的支持，ala cargo，所以你可能很幸运：http: [//jira.codehaus.org/browse/JETTY-991](http://jira.codehaus.org/browse/JETTY-991)。否则你可以使用货物（这就是我所做的）。

# c++ - 捕获预定义的 int 异常

> ID：10615135
> 
> 赞同：2
> 
> 时间：2012-05-16T08:56:47.927
> 
> 标签：c++

我定义了一个简单的 int 错误代码：

```
#define my_error 20 
```

在我的代码的某个地方，我抛出了这个错误：

```
throw my_error; 
```

现在我想尝试捕获抛出的异常：

```
try
{
    ...
    ...
}
catch (my_error)
{
    cout << "Error: my error";
} 
```

不幸的是，编译器不同意这一点：

*   语法错误：'常量'
*   catch 处理程序必须指定一种类型
*   从“34”行开始的“try”块没有捕获处理程序

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T08:57:53.303

`20`不是类型，所以你无法捕捉到它。您可以做的是过滤`catch`块中的值：

```
catch (int exception)
{
    if ( exception == 20 )
        cout << "Error: my error";
} 
```

更好的方法是定义自己的异常：

```
class MyException : public std::exception
{
}

//...

try
{
   throw MyException();
}
catch(MyException& ex)
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T11:02:39.207

如果您使用 C++11，则可以使用`decltype(my_error)`，以防万一您更改`my_error`.

```
try {
  // ...
} catch (const decltype(my_error)& e) {
  // ...
} 
```

这是一个[演示](http://ideone.com/asKR9)。

# web-services - Web服务和Web应用程序之间的区别

> ID：10615136
> 
> 赞同：37
> 
> 时间：2012-05-16T08:56:49.337
> 
> 标签：web-services, web-applications, terminology

让我们有一个示例场景：

客户打开一个网站并找到他从文本框中输入的两个数字的总和。然后单击“添加”按钮。两个参数被 HTTP GET'ed 到服务器，在其中编写 PHP 代码以添加数字并回显结果.

基于这种情况，任何人都可以解释 Web 服务和应用程序之间的区别吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-16T09:07:15.170

在您的情况下，如果您有提供两个数字然后获取结果的用户界面，它应该被称为 Web 应用程序。但是如果你有一个 API 暴露来接收两个数字并通过 http 返回结果，那么它应该被称为 Web 服务。
在底层，Web 应用程序和 Web 服务是一回事。但要点是，Web 服务用于机器/程序到机器/程序的通信，而 Web 应用程序用于用户。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-16T09:02:10.617

我会说 Web 应用程序是为用户设计的，而 Web 服务是为其他应用程序设计的。这是最重要的区别。Web 应用程序通常以 HTML 格式呈现数据，这对用户来说看起来不错，而 Web 服务通常以 XML 格式呈现数据，以便其他应用程序解析。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-05-16T09:10:39.590

一个人开车。那辆车可以由内燃机、电动机或核反应堆提供动力。不过，电源对驾驶员来说并不重要，因为他们需要看到的只是控制装置和前方的道路。

应用程序是汽车。Web 服务是核反应堆。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-22T09:12:02.950

加 2 我们编写一个 web 服务，减去我们编写一个不同的 web 服务，但是计算器是一个 web 应用程序，它使用了 add、subtract 和许多其他 web 服务的组合。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-03-16T09:56:56.667

让我们以谷歌搜索为例。我们可以通过两种方式使用 Google 搜索。首先，我们可以访问[http://www.google.com](http://www.google.com)并提出查询进行搜索。谷歌返回结果。其次，我们可以将 Google 搜索与自定义搜索 API 集成到我们的网站中。

在第一种情况下，Google 搜索充当 Web 应用程序，而在第二个示例中，它充当 Web 服务。

在这里我们可以指出一些不同之处，

1.  用户与 Web 应用程序交互，而机器与 Web 服务交互。
2.  要访问 Web 应用程序，必须访问应用程序。虽然可以从任何地方（从任何集成它的应用程序）访问 Web 服务。我们不需要显式访问服务。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-16T09:02:27.233

webservice 相当于 java 中的一个方法，它有一个 web 包装器。它存在于服务器上，可以发送数据/查询等，并且可能会或可能不会返回结果。它没有任何前端，只能通过 http get、put、delete 等方式访问。

Web 应用程序是一个功能齐全的软件，它存在于旨在帮助人们完成任务的服务器上。这将有一个前端，允许用户与之交互/输入数据等。

Web 应用程序可以使用多个 Web 服务来实现其目标/最终结果

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-05-05T19:19:54.663

Web 应用程序和 Web 服务之间几乎没有区别。Web 应用程序：在 Web 应用程序中，当用户请求任何数据时，服务器会将响应嵌入到一些 HTML 中并将其转发给用户，然后在浏览器上呈现 HTML。而在 Web 服务中，它的完成方式不同，当一些用户请求某些数据时，服务器会返回一个 json 或 XML 对象数组，并且数据可以按 Web 设计人员想要的任何方式显示。
谢谢希望它能解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-20T12:30:30.887

Web service is for application consumption , invoked through web application To communicate with webservice data should be sent as SOAP message or as REST i.e XML over HTTP

Most of the times web service is not part of application because to facilitate the use by other web applications and it is not for direct consumption to end users

Web application is for human consumption invoked directly by GUI which may or may not use web service for giving response

# javascript - javascript中的加密和Ruby中的解密

> ID：10615140
> 
> 赞同：0
> 
> 时间：2012-05-16T08:56:59.980
> 
> 标签：javascript, ruby, encryption, aes

我需要使用 javascript 加密客户端中的字符串，并需要在 Ruby on Rails 服务器中对其进行解密。

我想使用AES。

执行此操作的最佳脚本/库/方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:05:48.493

仔细想想你*到底*需要做什么。

如果您需要确保用户输入的页面数据安全地传输到服务器，而不会在通过过程中被截获和解密，并且您希望对此充满信心，那么显而易见、经过良好测试和维护良好这样做的方法是使用 HTTPS 进行通信。

如果你想在你的页面上做 AES 来搞笑，那么[这个问题](https://stackoverflow.com/questions/793812/javascript-aes-encryption)涵盖了客户端上的 AES，Ruby 可以很容易地在服务器上与 OpenSSL 对话。

# android - 某些设备上的 Android 应用程序奇怪行为

> ID：10615145
> 
> 赞同：0
> 
> 时间：2012-05-16T08:57:28.737
> 
> 标签：android

我在某些设备上遇到了我的应用程序的奇怪行为。每次我的应用程序被最小化并重新打开时，我的应用程序都会从​​头开始重新启动。这只发生在某些设备上，我不确定为什么会这样。有没有人遇到过这种问题？请让我知道解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:00:51.927

这是由于某些设备中的内存处理 - 那些内存低且皮肤较厚的设备会更快地破坏后台应用程序，这样它们就不会耗尽内存。

您不能保证您的应用程序在任何时候都将保持活动状态（除非它是一项服务），因此您必须围绕此设计应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:01:34.850

此行为可能是由于这些设备上的内存不足。但是，您可以*尝试*做的是设置`android:alwaysRetainTaskState="true"`清单中的第一个活动。即使在内存不足的情况下，此属性也会尽力将应用程序的活动保留在内存中。

根据开发人员[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#always)：

> **android:alwaysRetainTaskState**
> 
> Activity 所在任务的状态是否将始终由系统维护——如果是，则为“true”，如果允许系统在某些情况下将任务重置为其初始状态，则为“false”。默认值为“假”。该属性仅对任务的根活动有意义；它被所有其他活动忽略。
> 
> 通常，当用户从主屏幕重新选择该任务时，系统会在某些情况下清除任务（从根活动上方的堆栈中删除所有活动）。通常，如果用户在一定时间内（例如 30 分钟）没有访问任务，则会执行此操作。
> 
> 但是，当此属性为“true”时，用户将始终返回到任务的最后状态，无论他们如何到达那里。这很有用，例如，在诸如 Web 浏览器之类的应用程序中，其中有很多用户不想丢失的状态（例如多个打开的选项卡）。

# javascript - 如何在 ajax javascript 中设置计时器控制？

> ID：10615146
> 
> 赞同：0
> 
> 时间：2012-05-16T08:57:42.107
> 
> 标签：javascript, ajax, timer

海我的应用程序试图与服务器通信，所以我在 ajax 中调用了 web 服务，现在我想在 ajax 中设置时间间隔。任何人都可以指导我

```
$(document).ready(function () {
    $("#btn").attr("disabled", true);
    //waitingDialog({});
    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        var imei2 = '';
        imei2 = device.uuid;
        checkConnection_inonload(imei2);
    }

    function checkConnection_inonload(imei2) {
        var networkState = navigator.network.connection.type;
        alert(networkState);
        var states = {};
        states[Connection.WIFI] = 'WiFi connection';
        if (states[networkState] == 'WiFi connection') {
            $.ajax({
                cache: false,
                async: true,
                type: "GET",
                dataType: "json",
                url: "http://xxxx/Service1.svc/GetKeepMeStatus",
                data: {
                    IMEINO: imei2
                },
                contentType: "application/json;charset=utf-8",
                success: function (r) {
                    //closeWaitingDialog();
                    //alert(r);
                    if (r == "status") {}
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:34:08.677

我在我的 ajax 函数中设置了超时`timeout:3000`它现在可以工作了。

# java - 为什么它为两个字符串对象生成相同的哈希码？

> ID：10615151
> 
> 赞同：0
> 
> 时间：2012-05-16T08:57:59.483
> 
> 标签：java, reference, hashmap

我是 Java 编程新手，我想创建多个字符串，为此我编写了下面的代码。为什么它为两个字符串对象生成相同的哈希码？

```
 class SingletonClass {
            public static String mystring="this"; 
        }
        public class SingletonObjectDemo {
            public static void main(String args[]) {
                String str = SingletonClass.mystring;
                String str2 = SingletonClass.mystring;
                System.out.println("String str  "+str.hashCode());
                System.out.println("String str1  "+str2.hashCode());
                    }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:58:39.947

它为两个字符串对象生成相同的哈希码……因为它们是同一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:59:26.183

它们在内存中引用相同的对象，本质上没有区别..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:01:06.903

您说您“想要创建多个字符串”，但您使用的是名为 SingletonObjectDemo 的东西。单例的要点是，无论您“创建”多少次，都只会有一个对象，因此您无法创建多个对象。正如 Louis 解释的那样，这就是哈希码返回相同的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:02:59.667

似乎您将对象与对它们的引用混淆了。当您编写时，`String str = "a", str2 = "a";`您不是创建两个字符串，而是将两个包含完全相同引用的变量声明为字符串常量“a”。

此外，如果它们是两个对象，`String str = new String("a"), str2 = new String("a")`那么`hashCode`s**仍然**是相同的，因为对于相等的对象，它们的哈希码必须匹配——这是哈希码的基本原则。

但是，如果你说， write `Object o = new Object(), o2 = new Object()`，现在哈希码是不同的，因为没有两个实例`Object`是相等的（这是根据定义，而不是某些不可避免的逻辑）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T09:03:19.163

这是一个好的哈希码的属性。

如果 A 和 B 是满足 A.equals(B) 的对象，则应具有以下属性。

A.hashCode().equals(B.hashCode())

[您可以在此处](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)阅读有关 hashCode 和 equals()的信息

# c# - DevExpress eXpressApp——数据库更新

> ID：10615158
> 
> 赞同：0
> 
> 时间：2012-05-16T08:58:17.277
> 
> 标签：c#, devexpress

我目前正在使用 DevExpress 的 eXpressApp。我想知道如何在租用视频时触发客户表的更新，以及可能是一个rentalHistory 表？我需要用代码来做吗？或者我可以创建触发器或查询，当调用 CommitChanges() 时可以自动调用

```
 public class Rent : VideoRentBaseObject {
        MovieItem item;
        int days;
        DateTime? returnedOn;
        Receipt receipt;
        Receipt receiptOverdue;
        decimal payment;
        decimal overduePayment;

        public Rent(Session session) : base(session) { }
        public Rent(Session session, int selfId)
            : this(session) {
            SelfId = selfId;
        }
        public Rent(Receipt receipt, MovieItem item) : this(receipt, item, 0) { }
        public Rent(Receipt receipt, MovieItem item, int days)
            : this(receipt.Session) {
            if(receipt == null) throw new ArgumentNullException("Receipt");
            if(item == null) throw new ArgumentNullException("Item");
            if(item.Status != MovieItemStatus.Active) throw new ArgumentException("Item is not active");
            Receipt = receipt;
            Item = item;
            if(receipt.Type == ReceiptType.Purchases) {
                Item.Status = MovieItemStatus.Sold;
                Item.AvailableForSell = false;
                Days = 0;
            } else {
                Item.Status = MovieItemStatus.Rented;
                Days = days != 0 ? days : item.Movie.Category.GetPrice(item.Format).DefaultRentDays;
            }
        }
        public override void AfterConstruction() {
            base.AfterConstruction();
            Days = 1;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:32:14.953

您可以覆盖 Rent 类的 onSaving() 方法，您可以在其中放入一些逻辑，在关联的 Client 对象中进行更改，保存它，在保存租金更改之前或之后。

# file - MODX - 如何列出特定文档 ID 的静态资源？

> ID：10615163
> 
> 赞同：0
> 
> 时间：2012-05-16T08:58:45.987
> 
> 标签：file, modx

我正在玩 MODx 2.2。有谁知道如何从某个文档 ID 轻松列出“静态资源”？在我的系统中，基于“静态资源”的文章内容下方有一个文件附件列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:54:40.870

不是 100% 确定这是否是你想要做的。但是您是否试图列出特定合作资源的子资源？例如：

父母 - 孩子 - 孩子 - 孩子

如果是这样，您将需要使用 getResource 片段： [http ://rtfm.modx.com/display/ADDON/getResources](http://rtfm.modx.com/display/ADDON/getResources)

如果父母的 ID=20，您将在要显示列表的页面上放置的示例调用将是

```
[[getResources? &parents=`20`]] 
```

如果您希望使用当前页面作为 id 列出所有子资源，请将 20 更改为

```
[[*id]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:40:57.363

好的-谢谢，现在更清楚了。

所以开箱即用？'不'。但是您可能可以通过编写一个小插件来完成工作，该插件通过资源内容寻找静态资源[如果您不熟悉插件，它们基本上只是在您定义的系统事件上执行的片段]，请参见此处：[http](http://rtfm.modx.com/display/revolution20/Plugins) ://rtfm.modx.com/display/revolution20/Plugins [底部有不完整的事件列表] 我想你有两个选择：

1.  编写一个在 OnWebPagePrerender 事件上触发的插件，该事件基本上只是通过资源内容寻找您的 [[~xxx]] - 应该很容易提取这些并将它们传递给自定义脚本或 getResources。我预计这里的缓存会出现一些问题。

2.  如果它实际上只是一个静态资源列表，而不是分散在资源内容中：a。将您的静态资源 ID 放入模板变量 [http://rtfm.modx.com/display/revolution20/Template+Variables] 并使用 getResources 提取它们。湾。按照 Ben 的回答并将您的静态资源设置为文档资源的子项。

# css - 如何将多行文本与左侧的图像垂直居中？

> ID：10615168
> 
> 赞同：1
> 
> 时间：2012-05-16T08:59:02.397
> 
> 标签：css, layout

我想要一个 2 列的图像网格和矩阵中的不同文本，不知道如何使用 LI & css 或类似方法来实现。请提供概念或良好资源的帮助。

（网格将用于填充“假”增强组合框。）

```
|  o o   |                                     |
|   ¨    | This text verically centered        |
|  ---   |  
------------------------------------------------
|  o o   |                                     |
|   ¨    | This text verically centered        |
|  ---   |                                     | 
```

到目前为止的代码 - 没有正常工作的 valign：

```
<div class="list2" style="width:400px;">
  <ul>
    <li>
      <div style="float:left;border:1px solid #000;width:400px;">
        <img style="float:left;" src="imgcache/91427.jpg" height="60"/>
        <p style="margin-left:20px;float:left;">I want to be vert. centered.</p>
      </div>
      <div style="clear:both;"></div>
    </li>
    <li>
     <div style="float:left;border:1px solid #000;width:400px;">
       <img style="float:left;" src="52352.jpg" height="60"/>
       <p style="margin-left:20px;float:left;">I want to be vert. centered.</p>
     </div>
   </li>
 </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:34:05.450

这是使用`display: table-cell`and的解决方案`display: table-row`。我稍微修改了您的标记以仅显示相关和重要的部分，因此您可能需要根据您的目的对其进行一些调整。请注意，[IE 7 和更低版本不支持这些属性](http://www.quirksmode.org/css/display.html)。

```
.list2 li {
    display: table-row;
}

.list2 img { 
    display: table-cell;
}
.list2 p { 
    display: table-cell;
    padding-left: 20px; 
    vertical-align: middle;
} 
```

[jsFiddle 演示](http://jsfiddle.net/r8TFM/9/)

Vertical centering is not really possible in CSS2 without hacks like this (check out [Chris Coyier's post](http://css-tricks.com/centering-in-the-unknown/) also), but the [CSS3 Flexible Box Model](http://hacks.mozilla.org/2010/04/the-css-3-flexible-box-model/) could [help you](http://www.html5rocks.com/en/tutorials/flexbox/quick/#toc-center) if you accept [the browser support](http://caniuse.com/#search=flex).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:29:39.123

这是在段落标签上使用 inline-block 并在图像和段落标签上使用 vertical-align:center 的解决方案。

[在这里看到它：http://jsfiddle.net/uHzZR/](http://jsfiddle.net/uHzZR/)

```
<div class="list2" style="width:400px;">
  <ul>
    <li>
      <div style="float:left;border:1px solid #000;width:400px;">
        <img style="vertical-align: middle;" src="imgcache/91427.jpg" height="100">
        <p style="margin-left:20px;width: 288px;vertical-align: middle;display: inline-block;">I want to be vert. safjsdfl asdf asf saf sdfsf sdfs fsffsd fdfss centered.</p>
      </div>
      <div style="clear:both;"></div>
    </li>
    <li>
     <div style="float:left;border:1px solid #000;width:400px;">
       <img style="vertical-align: middle;" src="52352.jpg" height="60">
       <p style="margin-left:20px;vertical-align: middle;width: 288px;display: inline-block;">I want to be vert. centered.</p>
     </div>
   </li>
 </ul>
</div>​ 
```

# windows-8 - 标准磁贴和宽磁贴的不同标题（Metro 风格的应用程序）

> ID：10615171
> 
> 赞同：1
> 
> 时间：2012-05-16T08:59:06.247
> 
> 标签：windows-8, windows-runtime, visual-studio-2012

有没有办法为标准和宽瓷砖设置不同的文本（名称）？当我编辑包清单时，填写短名称并选择宽或标准磁贴似乎仅适用于该磁贴，而另一个不显示任何文本（名称）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:32:58.780

显示名称组合允许指定您的短名称将出现在哪个图块上 - 它可以同时显示、不显示或仅显示其中一个。如果您想设置不同的文本 - 您可以将光栅化文本嵌入平铺图像本身。

# c++ - 为什么我们需要维护自己的矩阵来转换游戏对象？

> ID：10615174
> 
> 赞同：0
> 
> 时间：2012-05-16T08:59:17.670
> 
> 标签：c++, opengl, 3d, matrix

首先，我认为我对 3D/游戏数学没有完全的了解。但我了解 C++ 和 OpenGL 基础知识。最近我已经将 NVidia PhysX 与 OpenGL 集成并且运行良好。所以我可以使用 PhysX 转换我的 OpenGL 对象。这是我的代码的一部分，

```
NxMat34 pose = actor->getGlobalPose(); 
float mat[16];
pose.getColumnMajor44(mat);

glPushMatrix(); 
glMultMatrixf(mat);
-- draw the object --
glPopMatrix(); 
```

我知道其他人使用单独的矩阵来表示他们的对象转换，即使他们有物理库来转换他们的对象。我的问题是为什么我们需要维护单独的矩阵/四元数？我们不能使用物理库的矩阵吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:16:15.700

您的问题的前提是：

1.  每个人都使用完全相同的物理库。或*任何*与此相关的物理库；许多游戏不需要它们。

2.  每个人都准确且仅使用来自该库的矩阵。动画经常需要将渲染实体的位置从它的“物理”位置偏移，更不用说具有不同的方向了。或者有*骨骼*（几乎从不属于任何物理系统）或物体的其他独立部分。

你*不需要*做任何事情。如果你有适合你的东西，那就去做吧。请记住，每一个动作都有后果。在这种情况下，结果是您将游戏对象的物理位置直接绑定到游戏对象的位置。

你的代码耦合得越紧密，它就越不灵活。

# node.js - 类似于 Node 和 mongoose 的存储库模式

> ID：10615182
> 
> 赞同：8
> 
> 时间：2012-05-16T08:59:51.753
> 
> 标签：node.js, mongodb, mongoose

我正在使用 node 和 mongoose 开发我的第一个应用程序，并尝试使用存储库模式构建应用程序。

我有我的应用程序模块，一个使用旅程的路由器模块和一个猫鼬层。我为每个 mongo 实体创建了一个单独的模块，并为像存储库一样的 CRUD 操作创建了导出方法。

这是构建应用程序的好方法还是我应该采用另一种方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T20:20:06.493

这是一个不错的方法，尽管我鼓励您放置更多层：

*   服务
*   控制器

为公共资源创建控制器，例如：UserController。

您还应该创建一个 UserService 而不是直接从控制器调用存储库。如果您除了仅使用存储库之外还需要执行其他任务，这将非常有用。

例如，您可能需要将用户添加到索引服务或保存与用户存储库无关的其他数据。

# iphone - 如何在不同方向找到相同视图的 UISwipeGestureRecognizer 和 UIPanGestureRecognizer？

> ID：10615183
> 
> 赞同：0
> 
> 时间：2012-05-16T08:59:56.753
> 
> 标签：iphone, objective-c, direction, uipangesturerecognizer, uiswipegesturerecognizer

我将两者都设置`UISwipeGestureRecognizer`为`UIPanGestureRecognizer`相同的视图。该视图有一个表格视图。我想`UISwipeGestureRecognizer`在用户向左滑动表格单元格时执行，并且想`UIPanGestureRecognizer`在用户触摸并向右拖动视图时执行。

我想用..

*   `UISwipeGestureRecognizer`用于在单元格上显示快速链接。（[参考这个链接](http://idevrecipes.com/2011/04/14/how-does-the-twitter-iphone-app-implement-side-swiping-on-a-table/)）

*   `UIPanGestureRecognizer`用于拖动整个视图。以便用户可以看到下面的视图。（[参考这个链接](http://cocoacontrols.com/platforms/ios/controls/ecslidingviewcontroller--2)）

我了解到这种`shouldRecognizeSimultaneouslyWithGestureRecognizer:`方法`UIGestureRecognizer`可以在同一视图中允许/保护多个手势。（我对吗？）

但是，我真的不知道如何找到触摸方向并相应地阻止手势。

我希望，我的问题与[此](https://stackoverflow.com/questions/5111828/how-to-have-a-uiswipegesturerecognizer-and-uipangesturerecognizer-work-on-the-sa)不同。

我只是糊涂！！

提前致谢

# javascript - 根据onKeyUp函数中的输入控件值填充ListBox

> ID：10615186
> 
> 赞同：0
> 
> 时间：2012-05-16T09:00:04.067
> 
> 标签：javascript, jquery, asp.net

我有一个 ListBox 控件

```
 <asp:ListBox ID="ListBox1" runat="server">
                            <asp:ListItem Value="1" Text="XYZ" />
                            <asp:ListItem Value="0" Text="XYZD" />
                            <asp:ListItem Value="-1" Text="D" />
 </asp:ListBox> 
```

输入：

```
<input id="listBoxFilterTextBox" type="text" onkeyup="FilterListBox()" 
```

js函数：

```
 function FilterListBox() {
        var listBox = Get('ListBox1');
        var textBox = Get('listBoxFilterTextBox');

        for (i = 0; i < listBox.options.length; i++) {
            if (listBox.options[i].text.toLowerCase().indexOf(textBox.value.toLowerCase()) != -1) {
                listBox.options[i].style.display = "";
            } else {
                listBox.options[i].style.display = "none";
            }
        }

         function Get(id) {
        return document.getElementById(id);
         } 
```

当我输入“X”来输入控制时，它会带来“XYZ”、“XYZD”。它可以在 Firefox 和 Chrome 中正常工作。但在 IE 中，它不能正常工作。如何解决这个 IE 问题？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:13:45.120

您不能使用 CSS 在 IE 中的 SELECT 中隐藏 OPTION。而是添加第二个 ListBoxSource 以及所有需要的选项，然后仅将满足您条件的选项从 ListBoxSource 复制到 ListBoxSource。

# java - 带有 Jboss 异常的 JPA

> ID：10615188
> 
> 赞同：1
> 
> 时间：2012-05-16T09:00:12.267
> 
> 标签：java, eclipse, jpa, jboss

## 如何解决此异常？

有人可以让我知道我收到此异常的原因：

配置：

```
 jdk1.6
           Jboss4.2
           JPA provider: OpenJpa
           EclipseIDE 
```

完整的堆栈跟踪：

```
 java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:323)
at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:338)
Caused by: java.util.MissingResourceException: org.apache.openjpa.persistence.PersistenceProductDerivation:java.lang.NoSuchMethodError: javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;
at org.apache.openjpa.lib.conf.ProductDerivations.reportErrors(ProductDerivations.java:380)
at org.apache.openjpa.lib.conf.ProductDerivations.load(ProductDerivations.java:283)
at org.apache.openjpa.lib.conf.Configurations.populateConfiguration(Configurations.java:357)
at org.apache.openjpa.enhance.PCEnhancerAgent.registerClassLoadEnhancer(PCEnhancerAgent.java:165)
at org.apache.openjpa.enhance.PCEnhancerAgent.premain(PCEnhancerAgent.java:145)
... 6 more
Caused by: java.lang.NoSuchMethodError: javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;
FATAL ERROR in native method: processing of -javaagent failed
at org.apache.openjpa.persistence.PersistenceUnitInfoImpl.toOpenJPAProperties(PersistenceUnitInfoImpl.java:477)
at org.apache.openjpa.persistence.PersistenceUnitInfoImpl.toOpenJPAProperties(PersistenceUnitInfoImpl.java:359)
at org.apache.openjpa.persistence.PersistenceProductDerivation.load(PersistenceProductDerivation.java:541)
at org.apache.openjpa.persistence.PersistenceProductDerivation.load(PersistenceProductDerivation.java:360)
at org.apache.openjpa.lib.conf.ProductDerivations.load(ProductDerivations.java:274)
... 9 more
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:56:09.420

说明显而易见的......正在使用的 OpenJPA 版本需要 JPA2，而 JBoss 4.x 存在 JPA1 API jar......因此没有找到 JPA2 方法的异常。使用一致的 JPA 版本和 JPA 实现

# autocomplete - 在 XCode 4 中使用 #import 指令自动完成

> ID：10615190
> 
> 赞同：2
> 
> 时间：2012-05-16T09:00:27.703
> 
> 标签：autocomplete, import, xcode4.2

我要问的问题不是一个大问题，只是在 XCode 中使用 #import 指令自动完成有点烦恼。

我有一个带有静态库和使用它们的应用程序的工作区。我的工作区文件夹架构如下：

```
Workspace dir
\->libs
    \-> lib1
        \-> lib1Object1.h
        \-> lib1Object1.m
        \-> lib1Object2.h
        \-> lib1Object2.m
    \-> lib2
    \-> lib3
\->tests
\->apps
    \-> app1
    \-> app2 
```

对于每个应用程序项目，我都在*User Header Search Paths*设置中添加了*../../libs路径。*

 *对于每个 lib 项目，我都在*User Header Search Paths*设置中添加了*..路径。*

 *这样，我可以使用以下指令将每个头文件包含在任何其他文件中：

```
#import "lib1/lib1Object1.h" 
```

我的问题是自动完成不能完美地工作，因为当我开始输入*#import "li*它用*lib1Object1.h*而不是*lib1/lib1Object1.h 完成*。

或者，当使用框架时，自动完成首先显示头目录。

例如，如果我键入*#import 它以 AVFoundation/AVFoundation.h 完成*。

有人知道关于自动完成的规则​​吗？**

# delphi - Datasnap 和 TObject 引用

> ID：10615193
> 
> 赞同：1
> 
> 时间：2012-05-16T09:00:47.877
> 
> 标签：delphi, delphi-xe2, datasnap

如何处理数据快照服务器中的对象引用？

我有返回 TUser 对象的 Datasnap 服务器方法

```
TServerMethods.CurrentUser(const AId: Integer): TUser
begin
  Result := GlobalCurrentUser; // <- Don't want to free this object
  Result.AddReference;
end; 
```

TReferencedObject 子类中的 TUser

```
TReferencedObject = class(TObject)
private
  FReferenceCnt:     integer;
public
  procedure AddReference; virtual;
  procedure RemoveReference; virtual; // Frees object if reference count goes to 0
  property ReferenceCnt: integer Read FReferenceCnt Write FReferenceCnt;
end; 
```

目前 DataSnap 服务器释放 TUser 对象，但我想为 TReferencedObject 后代调用 RemoveReference。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:35:51.593

我将 DataSnap 文件 Data.DBXJSONReflect.pas 和 Datasnap.DSReflect.pas 复制到项目目录，添加到项目并进行了三处修改。

Data.DBXJSONReflect 中的两个更改以设置正确的 ReferenceCount

1) TJSONUnMarshal.CreateObject

```
 if HasObject(ObjId) then
  begin
    Obj := GetObject(ObjId);
    if Obj is TReferencedObject then {Framework}
      TReferencedObject(Obj).AddReference; {Framework}    
    exit(Obj);
  end 
```

2) TJSONPopulationCustomiser.PostPopulate

```
 if Data is TReferencedObject then {Framework}
    TReferencedObject(Data).AddReference; {Framework} 
```

Datasnap.DSReflect 中的一项更改以发布参考

1) TDsMethodValues.ClearReferenceParameters

将**FUserObject.Clear**更改为**ClearUserObjects(FUserObjects)；**并添加了本地功能

```
 procedure ClearUserObjects(const AUserObjects: TObjectList<TObject>); {Framework}
  var
    i: Integer;
  begin
    FUserObjects.OwnsObjects := False;
    for i := FUserObjects.Count - 1 downto 0 do
      if FUserObjects.Items[i] is TReferencedObject then
      begin
        TReferencedObject(FUserObjects.Items[i]).RemoveReference;
        FUserObjects.Delete(i);
      end;
    FUserObjects.OwnsObjects := True;
    FUserObjects.Clear;
  end; 
```

# python - 检查列表中有多少元素落在指定范围内（Python）

> ID：10615196
> 
> 赞同：7
> 
> 时间：2012-05-16T09:00:54.343
> 
> 标签：python, list, range

我有一个元素列表（整数），我需要做的是快速检查该列表中有多少元素落在指定范围内。示例如下。

范围是从 34 到 566

l = [9,20,413,425]

结果是2。

我当然可以为此目的使用一个简单的 for 循环，并将每个元素与最小值和最大值（34 < x < 566）进行比较，然后在语句为真时使用计数器，但是我认为可能有更简单的方法要做到这一点，可能有一个很好的单线。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T09:15:20.350

```
>>> l = [9,20,413,425]
>>> sum(34 < x < 566 for x in l)
2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-16T09:10:33.713

`len([x for x in l if x > 34 and x < 566])`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T09:10:34.373

好吧，我不确定这很好，但它是一行;-)

```
len(set([9,20,413,425]).intersection(range(34,566))) 
```

# c# - 如何获得类似列表框的 WP 市场？

> ID：10615197
> 
> 赞同：2
> 
> 时间：2012-05-16T09:00:56.967
> 
> 标签：c#, windows-phone-7, listbox

我想制作一个按自定义行数加载数据的列表框。更像是市场上的列表框。有任何想法吗？

编辑：我的意思是该列表框的工作方式。它一次加载 x 行的市场数据。我希望它按 x 的数量加载数据行，这样应用程序就不必一次加载所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:24:30.170

您可以使用`ExtendedListBox`此库中的控件：http: [//mytoolkit.codeplex.com](http://mytoolkit.codeplex.com)

```
public MyPage()
{
    list.ScrolledToEnd += OnScrolledToEnd;
}

public void OnScrolledToEnd(object sender, ScrolledToEndEventArgs args)
{
    list.TriggerScrolledToEndEvents = false; 
    // TODO load more data async. => call OnDataLoaded on loaded
}

public void OnDataLoaded()
{
    // TODO add new items to list
    list.TriggerScrolledToEndEvents = true; 
} 
```

如果您在使用本课程时遇到问题，请在此处通知我。

更多信息：[http ://mytoolkit.codeplex.com/wikipage?title=ExtendedListBox](http://mytoolkit.codeplex.com/wikipage?title=ExtendedListBox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:20:39.267

看看是否`VirtualizingStackPanel`符合你的要求？

[类似问题](https://stackoverflow.com/questions/7441510/listbox-data-virtualization-is-not-taking-effect)

[登录](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:03:02.180

有一个带有包装面板而不是堆栈面板的列表框或在列表框内添加网格，并使图像添加到自定义行和列中的网格中

添加一个包装面板，它将图像排列成行，然后像这样添加后台工作人员类。它将按行添加图像。

var worker = new BackgroundWorker();

```
worker.DoWork += delegate(object sender, DoWorkEventArgs args)

{

    // Loop through all the items

    for (int i = 0; i < items.Count - 1; i++)

    {

        // Create a slight delay and add each item to the Items collection

        Thread.Sleep(200);

        Deployment.Current.Dispatcher.BeginInvoke(
         () =>

            {

                Items.Add(items[i]);

            });

    }

};
worker.RunWorkerCompleted += delegate(object sender, RunWorkerCompletedEventArgs args)

{

};

worker.RunWorkerAsync(); 
```

}

如果您有 4 张图片，请在您的列表中连续显示。尝试在后台工人阶级中获得喜欢。

Deployment.Current.Dispatcher.BeginInvoke(() =>

```
 {

              Add first 4 items in list box then start the loop at index 5

            }); 
```

# java - 网址响应时间

> ID：10615207
> 
> 赞同：0
> 
> 时间：2012-05-16T09:01:57.823
> 
> 标签：java, url, time, response

我正在制作一个程序来通过任何网址获取响应时间...

```
 HttpURLConnection conn = (HttpURLConnection)url.openConnection();
 for(int i=0; i<20; i++ ) {
       long starTime = System.currentTimeMillis();       
       conn.connect();

       long elasedTime = System.currentTimeMillis() - starTime;
       System.out.println(elasedTime);

       conn.disconnect();
  } 
```

但大多数时候它给我的输出结果为0 ..请有人帮帮我！我需要捕获从我的请求的最后一点到响应的第一位的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:03:17.493

简单地打开连接根本不需要任何时间。您需要实际从 URL 获取内容以获得有意义的基准。您还移到`url.openConnection()`了基准循环*之外*，这有点奇怪。

所以改变你的循环，以便：

1.  `url.openConnection()`在循环内移动
2.  `conn.getInputStream()`在`conn.connect()`. _
3.  （也许）阅读内容`InputStream`- 这可能不是必需的，具体取决于您要测量的内容
4.  最重要的是，阅读 JavaDoc`HttpURLConnection`以正确理解这些方法的真正作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:08:37.213

仅仅打开一个连接就不会得到太多的响应。

此外，由于您的连接已经打开，您的呼叫`connect()`很可能被忽略 - 这就是您获得 0 时间的原因。从`URLConnection#connect()`javadoc：

> 如果在`connect`连接已经打开时调用该方法（由`connected` 具有 value 的字段指示`true`），则忽略该调用。

如果您想实际检索响应，请获取`InputStream`(call `conn.getInputStream()`)，然后读取其中的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T21:09:55.470

conn.connect() 建立连接（TCP 三向握手），但它不会“获取”URL 处的内容。您可以使用 Wireshark 来验证这一点。

所以要知道，使用这种方法，您不会测量在 URL 处接收内容的响应时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:04:50.617

Java api 表示当您调用 conn.connect() 时建立连接，但除非您从连接中获取 InputStream，否则不会建立连接。

```
connection.getInputStream() 
```

# objective-c - obj-c 中也继承了协议？

> ID：10615208
> 
> 赞同：0
> 
> 时间：2012-05-16T09:02:04.690
> 
> 标签：objective-c, design-patterns

我的问题是理论上的。在 obj-c 中，如果一个类实现了一个协议：

```
@interface Class:NSObject<protocol> 
```

第二个类继承自第一个类：

```
@interface Class2:Class 
```

Class2 是否实现了协议？我想创建一个具有多个实现的接口。我是通过定义一个父类来实现的，该类实现一个协议，该协议包括所有应该实现的方法。因此，如果子类未实现协议规定的所有方法，我希望子类化父类的程序员收到警告。顺便说一句，如果对响应很重要，我将为对象创建实现一个抽象工厂。

我读了一些关于抽象类的帖子，但我没有找到我的问题的答案，但其他关于实现的建议会很受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:17:00.610

协议基本上是您的类将实现某些方法的承诺。当你继承一个实现协议的类时，子类也实现了协议，因为它继承了超类的所有方法。

当您声明您的公共超类实现了您的协议​​时，如果您实际上并未为协议中的所有方法提供实现，您将收到警告。您的子类继承了所有这些实现，因此您不会在那里收到任何警告。

根据您实际构建的内容，仅使用协议来定义必须实现的接口（方法），但没有任何通用超类可能会更好。然后，当您创建一个声明实现协议的新类时，如果您尚未实现协议的方法之一，您会收到警告。

# r - R中的colMeans函数并遇到大小为1的列的问题

> ID：10615214
> 
> 赞同：7
> 
> 时间：2012-05-16T09:03:00.397
> 
> 标签：r

我对 colMeans 函数有疑问。是否有这样的版本在遇到长度为 1 的列时不会返回错误？例如

```
temp<-cbind(c(2,2),c(3,4))
colMeans(temp)

[1] 2.0 3.5 
```

但是对于这个

```
temp2<-c(2,2)
colMeans(temp2)

Error in colMeans(temp2) : 
'x' must be an array of at least two dimensions 
```

但是，如果我将函数均值应用于每一列，它会正确得出 2 和 2 的值。

我写了一个函数来做到这一点

```
testfun<-function(i,x){
mean(x[,i])
}
sapply(1:ncol(x),testfun,x) 
```

给出与 colMeans 相同的结果。
我听说 colMeans 应该比这种方法快得多。那么，当我的列大小为 1 时，是否有一个 colMeans 版本可以使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T10:06:27.833

正如@Paul 指出的那样，它的参数（来自）`colMeans`期望“一个二维或更多维的数组” 。但不是数组`x``?colMeans``temp2`

```
is.array(temp2)
# [1] FALSE 
```

`temp2`可以做成数组：

```
(tempArray <- array(temp2, dim = c(1, 2)))
#      [,1] [,2]
# [1,]    2    2

colMeans(tempArray)
# [1] 2 2 
```

也许`temp2`来自对数组进行子集化，例如

```
array(temp2, dim = c(2, 2))[1, ] 
```

但这不是一个数组。要将其保留为数组，`drop = FALSE`请在括号内添加：

```
array(temp2, dim = c(2, 2))[1, , drop = FALSE]
#      [,1] [,2]
# [1,]    2    2 
```

然后您可以在子集数组上使用 colMeans。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T09:06:31.257

该`colMeans`函数适用于 n 维数组。当您的列大小为 1（1 列或 1 行？？）时，您实际上有一个向量。在向量上，使用 just`mean`就可以了。在速度方面，计算一百万个数字的平均值非常快：

```
> system.time(mean(runif(10e5)))
   user  system elapsed 
  0.038   0.000   0.038 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T14:13:38.390

@PaulHiemstra 和 @BenBarnes 提供了正确的答案。我只是想补充他们的解释。

**向量与数组**

向量是 R 中的基本数据结构。几乎所有内容在内部都表示为向量，甚至是列表（除了一种特殊的列表，点对列表，请参阅 参考资料`?list`）。数组只是带有附加属性的向量，该`dim`属性描述了对象的尺寸。考虑以下：

```
v <- c(1:10)
a <- array(v, dim = c(5, 2))
length(v) # 10
length(a) # 10
attributes(v) # NULL
attributes(a) # $dim 10  1
is.vector(v) # TRUE
is.array(v) # FALSE
is.vector(a) # FALSE
is.array(a) # TRUE 
```

两者都是`v`长度。唯一的区别是附加了属性。由于这个附加属性，R在外部将其视为数组而不是向量。仅修改属性可以将 R 的对象的外部表示从数组更改为向量并返回：`a``10``a``dim``a``dim`

```
attr(a, "dim") <- NULL
is.vector(a) # TRUE
is.array(a) # FALSE
attr(v, "dim") <- c(5, 2)
is.vector(v) # FALSE
is.array(v) # TRUE 
```

在您的示例中，`temp2`是一个矢量对象，因此缺少`dim`属性。`colMeans`期望具有至少长度为 2（二维）`array`的属性的对象。`dim`您可以轻松地转换`temp2`为具有单列的二维数组：

```
temp3 <- array(temp2, dim = c(length(temp2), 1)) 
# or:
temp4 <- temp2
attr(temp4, "dim") <- c(length(temp2), 1)
is.array(temp2) # FALSE
is.array(temp3) # TRUE
is.array(temp4) # TRUE 
```

**colMeans() 与 mean()**

@PaulHiemstra 是对的，与其将向量转换为单列 for `colMeans()`，不如仅在向量上使用更为常见`mean()`。但是，您是对的，`colMeans()`速度更快。我相信这是因为它对格式正确的数据的检查少了一点，但我们必须查看内部 C 代码才能确定。考虑这个例子：

```
# Create vector "v" and array "a"
n <- 10e7
set.seed(123) # Set random number seed to ensure "v" and "a[,1]" are equal
v <- runif(n)
set.seed(123) # Set random number seed to ensure "v" and "a[,1]" are equal
a <- array(runif(n), dim=c(n, 1))

# Test that "v" and "a[,1]" are equal
all.equal(v, a[,1]) # TRUE

# Functions to compare
f1 <- function(x = v){mean(x)} # Using mean on vector
f2 <- function(x = a){mean(x)} # Using mean on array
f3 <- function(x = a){colMeans(x)} # Using colMeans on array

# Compare elapsed time
system.time(f1()) # elapsed time = 0.344
system.time(f2()) # elapsed time = 0.366
system.time(f3()) # elapsed time = 0.166 
```

`colMeans()`在数组上比`mean()`在向量或数组上更快。但是，大多数情况下，这种加速可以忽略不计。我发现只`mean()`在向量或单列数组上使用更自然。`colMeans()`但是，如果你是一个真正的速度恶魔，你可能会在晚上睡得更好，因为你知道通过使用单列数组可以节省数百毫秒的处理时间。

# opengl-es - OpenGL ES 1.x 可编程流水线

> ID：10615224
> 
> 赞同：0
> 
> 时间：2012-05-16T09:03:43.077
> 
> 标签：opengl-es, opengl-es-1.1

是否可以在 OpenGL ES 1.x 中使用可编程着色器？我的猜测不是通过查看 API，但我想确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:40:10.290

查看[规格，例如 OpenGL ES 2.0.25](http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf)。最后，简短的摘要列出了与以前版本的差异。从这个规范：

> 它引入了可编程顶点和片段着色器，但删除了相应的固定功能管线功能。

*薄冰上滑：*在融入规范之前，这些是*扩展*；例如，[顶点着色器扩展](http://www.opengl.org/registry/specs/EXT/vertex_shader.txt)是针对 OpenGL 1.2.1 编写的，而 OpenGL ES 1.1 基于 OpenGL 1.5。因此，可能会有一个扩展允许您在 OpenGL ES 1.1 上进行可编程着色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:14:43.487

这是可能的，但您必须查看您正在编码的设备的规格。例如，PS3 支持 OpenGL ES 1.0，但提供了很多扩展，以便您可以使用 CG 着色器。

# python - Python如何通过python加载存储在简单cookie中的对象

> ID：10615225
> 
> 赞同：1
> 
> 时间：2012-05-16T09:03:44.783
> 
> 标签：python, cookies

嗨，我已经编写了一个代码来将当前用户存储在一个由 py​​thon 制作的简单 cookie 中

```
 user_cookie = Cookie.SimpleCookie()
    user_cookie['current_user'] = pickle.dumps(profile_user)
    user_cookie['current_user']['max-age'] = 60 * 60 * 24 * 365
    logging.info(user_cookie['current_user']) 
```

我想检索我存储在 cookie 中的对象并从另一个处理程序访问它的元素，这就是我所做的。

```
 user_cookie = Cookie.SimpleCookie()
        cookie_string = os.environ.get('HTTP_COOKIE')
        if cookie_string is not None:
            user_cookie.load(cookie_string)

            logging.info(user_cookie['current_user'].user_name)

            cookie_user = pickle.loads(user_cookie['current_user'])
        if cookie_user is not None:

            logging.info(cookie_user.user_name) 
```

它给出了一个错误。谁能告诉我如何完成这件事？

# c# - C#中枚举的xml序列化

> ID：10615230
> 
> 赞同：4
> 
> 时间：2012-05-16T09:04:13.257
> 
> 标签：c#, xml-serialization

那里。我有以下类定义：

```
[Serializable]
public enum FilterType
{
    [XmlEnum("1")]
    Text = 1,
     [XmlEnum("2")]
    Date = 2,
     [XmlEnum("3")]
    Combo = 3,
     [XmlEnum("4")]
    Multichoice = 4
}

public class FilterValues : List<string>
{
    public FilterType Type { get; set; } 
}

[Serializable]
public struct SerializableKeyValuePair<K, V>
{
    public SerializableKeyValuePair(KeyValuePair<K, V> p)
    {
        this.key = p.Key;
        this.value = p.Value;
    }

    private K key;
    public K Key
    {
        get { return key; }
        set { key = value; }
    }

    private V value;
    public V Value
    {
        get { return this.value; }
        set { this.value = value; }
    }
} 
```

`SerializableKeyValuePair<string, FilterValues>[]`当我尝试使用字符串类型的键和 FilterValues ( )类型的值序列化 SerializableKeyValuePair 数组时，我无法序列化 xml 中的 Type 属性。我得到了这个结果：

```
<?xml version="1.0" encoding="utf-16"?>  
<ArrayOfSerializableKeyValuePairOfStringFilterValues xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">    
<SerializableKeyValuePairOfStringFilterValues>      
<Key>Date</Key>     
 <Value>        <string>2012-5-16</string>      </Value>    
 </SerializableKeyValuePairOfStringFilterValues>    
 <SerializableKeyValuePairOfStringFilterValues>      
 <Key>bgName</Key>      <Value>        <string>4</string>      </Value>    
 </SerializableKeyValuePairOfStringFilterValues>  
 </ArrayOfSerializableKeyValuePairOfStringFilterValues> 
```

请帮忙，我尝试了任何可能的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:43:31.617

它与这个问题有关：[当一个类从List<>继承时，XmlSerializer不会序列化其他属性](https://stackoverflow.com/questions/5069099/when-a-class-is-inherited-from-list-xmlserializer-doesnt-serialize-other-att)

因此，正如在回答该问题时指出的那样，您必须以至少三种可能的方式之一更改您的 FilterValues 实现：

```
-实现 IXmlSerializable
- 从列表中删除继承
- 使用另一个序列化程序
```

# jquery - 使用 jQuery 选项卡定位类而不是 ID

> ID：10615234
> 
> 赞同：1
> 
> 时间：2012-05-16T09:04:42.717
> 
> 标签：jquery, jquery-ui, tabs

我想在我的页面上使用标签，点击每个标签会切换两个窗格，而不仅仅是一个。由于 ID 应该是唯一的，因此我不能在窗格和选项卡上使用 ID。但是仅仅将hrefs和标签内容更改为类是行不通的。我怎么能这样做？

这是一个开发页面，我确实在其中工作。但是我的标签在 IE6-7 中根本不起作用，所以我正在考虑尝试使用 jquery ui 标签，但这不起作用。

[http://johandahl.com/wp/malmocityfastigheter/testsida/](http://johandahl.com/wp/malmocityfastigheter/testsida/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:07:14.810

向两个选项卡面板添加[`select`](http://jqueryui.com/demos/tabs/#event-select)事件处理程序。这个处理程序看起来像

```
function(e, ui) {
    var currentTabIndex = ui.index;
    $("selector that matches all tab panels").not(this)
        .tabs("select", currentTabIndex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:08:39.757

您可以像往常一样通过 id 切换第一个选项卡集，并添加事件侦听器执行“选择”事件，并在此侦听器中更改其他选项卡集。

# php - PHP ob_start() 和 ob_start('ob_gzhandler')

> ID：10615235
> 
> 赞同：11
> 
> 时间：2012-05-16T09:04:49.597
> 
> 标签：php, buffer, content-encoding

使用`ob_start()`和 和有什么不一样`ob_start('ob_gzhandler')`？
它如何影响页面速度？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T09:08:26.777

这不会影响您可能认为的页面速度。

[ob_gzhandler](http://php.net/ob_gzhandler)是一个回调函数，它从输出缓冲区获取内容并在输出之前压缩数据。

这减少了发送到浏览器的内容的**大小**，这可能会加快内容传输到客户端的速度。但它不会加速您的应用程序/网站。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-05T06:00:51.607

我需要对一些没有为某些客户端自动压缩的管理页面（充满复杂的 HTML 表）强制 gzip，所以我添加了这个方法。我不确定我会为每个页面强制它，但至少管理页面很好。

```
function force_gzip()
{
    // Ensures only forced if the Accept-Encoding header contains "gzip"
    if (substr_count($_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip'))
    {
        header('Content-Encoding: gzip');
        ob_start('ob_gzhandler');
    }
} 
```

950Kb 的 HTML 被压缩到 80KB 左右，导致页面加载速度提高了 5-10 倍。

# iphone - UIPanGestureRecognizer 的使用

> ID：10615237
> 
> 赞同：1
> 
> 时间：2012-05-16T09:05:06.843
> 
> 标签：iphone, objective-c, uigesturerecognizer, uipangesturerecognizer

我有一个小的 imageView 使用 ，它在屏幕上移动`UIPanGestureRecognizer`，但是当它从超级视图的边缘出来时不会得到更多的触摸，因此不能再回头。如何防止图像从超级视图的边缘出现？这是代码：

```
- (void)pan:(UIPanGestureRecognizer *)gestureRecognizer
{
if (inLongPress) {
    UIView *hitView = [gestureRecognizer view];

    [self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

    if (!(CGRectContainsRect(self.imageView.frame, hitView.frame))) {

        [UIView beginAnimations:@"" context:NULL];
        [hitView setCenter:CGPointMake(_prevCenter.x, _prevCenter.y)];
        [UIView commitAnimations];

     }
    _prevCenter=hitView.center;

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer   state] == UIGestureRecognizerStateChanged) {
        CGPoint translation = [gestureRecognizer translationInView:[hitView superview]];

        [hitView setCenter:CGPointMake([hitView center].x + translation.x, [hitView center].y + translation.y)];

        [gestureRecognizer setTranslation:CGPointZero inView:[hitView superview]];
    }

    if ([gestureRecognizer state] == UIGestureRecognizerStateEnded){
        inLongPress=NO;
        hitView.alpha=1.0;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:16:18.900

只需使用其中的几个`if`将 CGPoint 限制在允许的范围内。

这样的事情确保您不能将对象移动到视图之外：

```
CGFloat proposedX = location.x;
CGFloat proposedY = location.y;

CGRect objectFrame = hitView.frame;
CGFloat allowedXMin = 0 + objectFrame.size.width / 2.0f;
CGFloat allowedXMax = self.view.bounds.size.width - objectFrame.size.width / 2.0f;
CGFloat allowedYMin = 0 + objectFrame.size.height / 2.0f;
CGFloat allowedYMax = self.view.bounds.size.height - objectFrame.size.height / 2.0f;

if (proposedX < allowedXMin) {
    proposedX = allowedXMin;
}
else if (proposedX > allowedXMax) {
    proposedX = allowedXMax;
}

if (proposedY < allowedYMin) {
    proposedY = allowedYMin;
}
else if (proposedY > allowedYMax) {
    proposedY = allowedYMax;
}
location = CGPointMake(proposedX, proposedY);

hitView.center = location; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:12:10.537

在视图控制器的 viewDidLoad 方法中，只需将 superview 的**clipsToBounds**属性设置为**YES**。

`[superview setClipsToBounds:YES];`

# android - 如何检索以下 JSON 输出的数据？

> ID：10615245
> 
> 赞同：0
> 
> 时间：2012-05-16T09:05:32.660
> 
> 标签：android, json

```
{"Result": {
    "version": [
      "001","002","003","004","005"
    ],
 "Names": {
      "001": "NoName","002": "NoName","003": "Cupcake","004": "Donut","005": "Eclair"
    }
}} 
```

> 上面显示的结果是我现在作为响应得到的结果，我如何从上面检索相应的名称。请。任何人都可以帮助我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:08:10.020

请参考这个[Android Json 解析示例](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

你可以像下面这样可以帮助你。

```
JSONObject mjsonObject = null;
        try {
            mjsonObject=new JSONObject(jsonString);
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        JSONArray mjsonArray;

        JSONObject mJsonObject2,jsonObjectNames;
        try{
            mJsonObject2= mjsonObject.getJSONObject("Result");
            mjsonArray=mJsonObject2.getJSONArray("version");
            jsonObjectNames=mJsonObject2.getJSONObject("Names");

            String[] versionName=new String[mjsonArray.length()];
            for(int i=0;i<mjsonArray.length();i++){
                if(!mjsonArray.isNull(i)){
                    versionName[i]=mjsonArray.getString(i);
                }
            }
            String [] versionString=new String[mjsonArray.length()];

        }catch(JSONException json){
            json.printStackTrace();
        }catch(NullPointerException excep){

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:32:35.877

海参考这个你会得到一个想法

```
 try {
        resp = new JSONObject(shared);
        cities = new JSONArray(resp.getString("cities"));

        for (int i = 0; i < cities.length(); i++) {

            JSONObject jsonObject = cities.getJSONObject(i);
            id = jsonObject.getString("id");

            operators = jsonObject.getJSONArray("operators");

            if (id.equalsIgnoreCase(String.valueOf(srcid1))) {

                for (int j = 0; j < operators.length(); j++) {
                    JSONObject jsonObject1 = operators.getJSONObject(j);
                    oid = jsonObject1.getString("id");

                    vehicle = jsonObject1.getJSONArray("vehicles");

                    if (oid.equalsIgnoreCase(value)) {
                        Log.v("json", "msg");
                        for (int k = 0; k < vehicle.length(); k++) {

                            jsonObject2 = vehicle.getJSONObject(k);
                            vehiclename = jsonObject2.getString("name");
                            id = jsonObject2.getString("id");
                            int vehicleid = Integer.parseInt(id);
                            map = new HashMap<String, String>();
                            Log.v("vehi", "" + vehiclename);
                            Log.v("vehi", "" + vehicleid);
                            map.put("id", "" + id);
                            map.put("vehiclename", "" + vehiclename);
                            mylist.add(map);
                            Log.v("count", "" + mylist.toString());

                        }

                    }

                }

            }

        } 
```

# iphone - NSFileManager 不删除存在的文件

> ID：10615246
> 
> 赞同：13
> 
> 时间：2012-05-16T09:05:32.643
> 
> 标签：iphone, ios, nsfilemanager

我在使用 NSFileManager 功能时遇到了一些问题。这在模拟器和 iPhone 设备 (iOS 5.1) 上都会发生。

基本上，我有一堆文件存储在我创建的文档中。现在我正在尝试将一个文件（存储在路径中）移动到另一个名称的同一目录中，以检查删除是否有效。

```
if ([[NSFileManager defaultManager] isDeletableFileAtPath:path]) {
BOOL success = [[NSFileManager defaultManager] moveItemAtPath:path toPath:[path            stringByAppendingString:@".deleted"] error:&error];
if (!success) {
        NSLog(@"Error removing file at path: %@", error.localizedDescription);
    }
} 
```

其输出是*path*和*path* .deleted 处的文件。我最终只想使用*removeItemAtPath*删除文件，但这不起作用。它返回成功，但如果我在文件目录中看到它，即使一个小时后我仍然可以在那里看到它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-16T11:50:02.460

如果你想删除一个文件，你应该使用`removeItemAtPath:myPath error:NULL`像

```
NSError *error;
if ([[NSFileManager defaultManager] isDeletableFileAtPath:path]) {
    BOOL success = [[NSFileManager defaultManager] removeItemAtPath:path error:&error];
    if (!success) {
        NSLog(@"Error removing file at path: %@", error.localizedDescription);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-02T15:12:14.073

当你使用 NSFileManager 时，我只是想出了一些非常重要的事情。您必须了解 App Sandboxing。

```
let documentDirectory = NSSearchPathForDirectoriesInDomains(NSSearchPathDirectory.DocumentDirectory, .UserDomainMask, true)[0] 
```

此行返回您的应用沙盒的路径文档目录。当您在文档目录中使用 FileManager 创建文件时（例如），不要保存完整的文件路径，而只保存当前文档目录的路径。

You'll be able to recreate the full path of your created file.

Hope (after 5 years) help over developers ;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T06:24:33.950

将此用于搜索路径并删除视频

```
(NSString *)applicationDocumentsDirectory {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
    }
NSString *dataFilePath = [[[self applicationDocumentsDirectory]
                               stringByAppendingPathComponent:@"Data.nosync"]
                              stringByAppendingPathComponent:[NSString stringWithFormat:@"%@-%@.mp4",[dicForDelete valueForKey:keyVideoId],[dicForDelete valueForKey:keyVideoName]]];
NSError *error;
if ([[NSFileManager defaultManager] isDeletableFileAtPath:dataFilePath]) {
        BOOL success = [[NSFileManager defaultManager] removeItemAtPath:dataFilePath error:&error];
        if (success) {
          NSLog@"file deleted ");
        }else
        {
        NSLog@"file not deleted ");
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-05T16:39:53.690

我遇到了同样的问题。我仍然对修复工作的原因感到困惑，但值得一提的是，以防其他人可以解释它。

我发现这`[[NSFileManager defaultManager] removeItemAtURL:url error:&error]`会在第一次尝试时返回 false，但会出现 nil 错误。在第二次尝试时，它将返回 true。

这是我的代码的样子：

```
// success == NO error = nil
BOOL success = [[NSFileManager defaultManager] removeItemAtURL:storeUrl error:&error]; 

// success == YES error = nil
success = [[NSFileManager defaultManager] removeItemAtURL:storeUrl error:&error]; 
```

我发现如果我创建自己的 NSFileManager 实例，它会在第一次尝试时工作。

```
NSFileManager *fm = [[NSFileManager alloc] init];
[fm removeItemAtURL:storeUrl error:&error]; 
```

我在 iOS9 模拟器上运行。这闻起来像个虫子。我要归档雷达。

# python - Python 访问 SQL Server 2008

> ID：10615247
> 
> 赞同：1
> 
> 时间：2012-05-16T09:05:36.700
> 
> 标签：python, sql-server-2008, pyodbc

我想用 python 访问 SQL server 来做一些数据操作。

SQL Server 位于小型企业服务器 SBS2011 上，并包含公司使用的数据库，其中包含我们 ERP 使用的所有业务数据。

我已经安装了 pyodbc 并阅读了示例：

```
cnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=localhost;DATABASE=testdb;UID=me;PWD=pass')
cursor = cnxn.cursor() 
```

但问题是我不知道用什么作为 SERVER 和 DATABASE 参数...代码示例是通用的...我应该把本地网络 SBS2011 服务器的目录吗？应该是 IP:port 像 192.168.0.3:1441 吗？我在哪里可以找到它们？有什么线索吗？

提前致谢

* * *

我可以通过浏览软件“Microsoft SQL Server Management Studio”将这些信息检索到服务器中

我不明白强调连接的机制，但这有效：

```
import pyodbc
server="SBS2011"
user="sa"
database="topimpresa_web" //the database i want to access
connectionString='DRIVER={SQL Server};SERVER=%s;DATABASE=%s;UID=%s;PWD=<secret>' % (server,database,user) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:27:01.830

通常，SERVER 是运行 SBS2011 的机器的名称，DATABASE 是贵公司数据库的名称。你试过什么？您收到错误消息吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-02T04:24:53.110

这很简单。

```
import pyodbc

dsn = 'sqlserverdatasource'
user = '<username>'
password = '<password>'
database = '<dbname>'

con_string = 'DSN=%s;UID=%s;PWD=%s;DATABASE=%s;' % (dsn, user, password, database)
conn = pyodbc.connect(con_string) 
```

# python - python列出项目并将语言代码转换为名称

> ID：10615249
> 
> 赞同：0
> 
> 时间：2012-05-16T09:05:39.137
> 
> 标签：python, list

我的数据存储中有一个国家/地区的语言列表，存储如下：

```
[u"[u'fa-AF'", u" u'ps'", u" u'uz-AF'", u" u'tk']"] 
```

我希望输出为：

fa-AF、ps、uz-AF、tk

或者

fa-AF - ps, uz-AF - tk

我已经尝试了几件事，但还没有成功。似乎已导入数据存储的数据未正确导入。对此的任何帮助将不胜感激。

另外，我想请您就如何使用这些代码显示语言名称提出建议。

例如，如果我们有“en-US”，那么我们希望将其显示为英语（美国）（注意：我们没有存储在数据存储中的语言名称。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:08:26.047

```
a = [u"[u'fa-AF'", u" u'ps'", u" u'uz-AF'", u" u'tk']"] 
```

看起来像是原始字符串的简单拆分。您可以重新构建字符串或剥离单个元素：

```
import ast
codes = [ast.literal_eval(x.strip('[] ')).encode() for x in a] 
```

或者

```
codes = [elem.encode() for elem in ast.literal_eval(','.join(a))] 
```

两者都返回：

```
['fa-AF', 'ps', 'uz-AF', 'tk'] 
```

语言的名称可以存储在字典中，例如：

```
lang = {'fa-AF': 'farsi-Afghanistan', ... } 
```

并打电话给

```
for code in codes:
    print lang[code] 
```

或者你可以看看[Babel](http://babel.edgewall.org/)库。

# android - 单击android中的菜单按钮打开上下文菜单

> ID：10615253
> 
> 赞同：4
> 
> 时间：2012-05-16T09:05:57.403
> 
> 标签：android, menu, contextmenu

如何在 Android 设备上单击菜单按钮打开上下文菜单？任何人都可以帮助我吗..

```
@Override  
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
    super.onCreateContextMenu(menu, v, menuInfo);  
    menu.setHeaderTitle("Select");  
    menu.add(0, v.getId(), 0, "Gmail");  
    menu.add(0, v.getId(), 0, "Facebook");
    menu.add(0, v.getId(), 0, "Twitter");  
}  

@Override  
public boolean onContextItemSelected(MenuItem item) {  
    if(item.getTitle()=="Gmail"){function1(item.getItemId());}  
    else if(item.getTitle()=="Facebook"){function2(item.getItemId());}  
    else if(item.getTitle()=="Twitter"){function3(item.getItemId());}  

    return true;  
} 
```

单击菜单按钮如何打开上述上下文菜单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:12:42.937

```
Are you sure you want to open context Menu on Click of Menu button? 
```

因为，**上下文菜单是针对特定视图的，**

上下文菜单提供影响 UI 中特定项目或上下文框架的操作。您可以为任何视图提供上下文菜单，但它们最常用于 ListView、GridView 或其他视图集合中的项目，用户可以在其中对每个项目执行直接操作。

要在长按时显示上下文菜单，大多数客户端都希望调用`registerForContextMenu(View)`并覆盖`onCreateContextMenu(ContextMenu, View, ContextMenu.ContextMenuInfo)`.

对于设备的菜单按钮，您可以使用[选项菜单](http://developer.android.com/guide/topics/ui/menus.html)

**更新：**

我从来没有尝试过，但你可以做类似的事情，

1.  处理设备的菜单按钮按下事件，

    ```
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_MENU) {
             // ........
         }
        return true;
     } 
    ```

2.  在里面放线，

    ```
    this.openContextMenu(view); // Here view is reference for which you have a register contect menu.. 
    ```

# jquery - 我怎样才能把它写成一个 jQuery 延迟函数

> ID：10615254
> 
> 赞同：1
> 
> 时间：2012-05-16T09:05:58.977
> 
> 标签：jquery, asynchronous, jquery-deferred, web-sql

我需要获取数据库中的所有表，然后将它们一一删除。但是每个`DROP TABLE`都是异步的。**最重要**的是，只有在删除所有表时才应解决返回的承诺。

```
clear: function() {
    var dfd = $.Deferred();
    var sql = "SELECT name FROM sqlite_master WHERE type='table' AND name != ?",
    args = ["__WebKitDatabaseInfoTable__"];

    var dbTableNamesResult = function(tx, result) {
        var dropSql = "";
        for (var i = 0; i < result.rows.length; i++) {
            dropSql = "DROP TABLE IF EXISTS " + result.rows.item(i).name + "; ";
            execute(dropSql, null, errorCallback);
        }
    };

    execute(sql, args, dbTableNamesResult, dfd.reject);
    return dfd;
}, 
```

`Execute`接受四个参数，`sql`，`arguments`，`successCallback`和`errorCallback`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:36:07.013

这个怎么样：

```
clear: function() {
    var dfd = $.Deferred();
    var sql = "SELECT name FROM sqlite_master WHERE type='table' AND name != ?",
    args = ["__WebKitDatabaseInfoTable__"];

    dfd.pipe(function(tx, result) {
        var deferreds = [];

        for (var i = 0; i < result.rows.length; i++) {
            var dfd = $.Deferred();
            dropSql = "DROP TABLE IF EXISTS " + result.rows.item(i).name + "; ";
            execute(dropSql, dfd.resolve, errorCallback);
            deferreds.push(dfd);
        }

        return $.when.apply(null, deferreds);
    });

    execute(sql, args, dfd.resolve, dfd.reject);
    return dfd;
}, 
```

这是一个类似的例子[http://jsfiddle.net/zerkms/XQwPq/](http://jsfiddle.net/zerkms/XQwPq/)

```
function getTables()
{
    var dfd = $.Deferred();

    $.ajax({
        url: '/echo/json/',
        data: {
            json: '{"tables":["a","b","c"]}',
            delay: 1
        },
        type: 'post',
        dataType: 'json',
        success: function(response) {
            dfd.resolve(response.tables);             
        }
    });

    return dfd;
}

function dropTables(tables)
{
    console.log('tables to delete: ' + tables.join(', '));

    var deferreds = [];

    for (var i = 0, len = tables.length; i < len; i++) {
        var dfd = $.Deferred();
        (function(dfd) {
            $.ajax({
                url: '/echo/json/',
                data: {
                    json: '{"table":"' + tables[i] + '"}',
                    delay: Math.random() * 3
                },
                type: 'post',
                dataType: 'json',
                success: function(response) {
                    console.log('table ' + response.table + ' deleted');
                    dfd.resolve();             
                }
            });
        })(dfd);

        deferreds.push(dfd);
    }

    return $.when.apply(null, deferreds);
}

getTables().pipe(dropTables).done(function() {
    console.log('process finished');
});
​ 
```

说明：第一个函数`getTables`返回带有 ajax 请求结果的延迟对象。我们`dropTables`用它传递另一个函数，并在其中创建另一个延迟对象，它将接受 N 延迟到它的`when`. 只要他们得到解决 -`process finished`显示最终的匿名与

# entity-framework-4.1 - 实体框架 4.1 - 在同一列上使用外键继承

> ID：10615259
> 
> 赞同：0
> 
> 时间：2012-05-16T09:06:19.647
> 
> 标签：entity-framework-4.1

我这样做是为了基于 TPH 和鉴别器过滤器在同一个表上创建几个子类。

```
public class TraceBilletStation : Trace
{
    [UserVisible(Ordre = 6)]
    public BilletStation BilletStationnement { get; set; }
}

public class TraceBilletStationMap : EntityTypeConfiguration<TraceBilletStation>
{
    public TraceBilletStationMap()
    {
        this.HasOptional(p => p.BilletStationnement).WithMany()
            .Map(x => x.MapKey("TRA_CONCEPT_ID_INFO"));
    }
} 
```

它适用于一个孩子，但我需要更多，所以我添加了这个：

```
public class TraceAcheteur : Trace
{
    [UserVisible(Ordre = 6)]
    public Acheteur Acheteur { get; set; }
}

public class TraceAcheteurMap : EntityTypeConfiguration<TraceAcheteur>
{
    public TraceAcheteurMap()
    {
        this.HasOptional(p => p.Acheteur).WithMany()
            .Map(x => x.MapKey("TRA_CONCEPT_ID_INFO"));
    }
} 
```

并且我得到一个`MetadataException`说法，属性“TRA_CONCEPT_ID_INFO”已经被定义。

你有什么想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:11:33.413

您不能将任何列映射两次。您必须为第二个关系使用另一列，或者您必须只使用基类中定义的单个关系。

# cocoa-touch - 如何从目录中删除特定文件夹

> ID：10615260
> 
> 赞同：2
> 
> 时间：2012-05-16T09:06:28.773
> 
> 标签：cocoa-touch

我正在开发一个应用程序。在那我必须从目录中删除文件夹。我已经有了那个文件夹路径。

那么如何从目录中删除该文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:39:40.703

您可以使用[NSFileManager](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)：

```
NSError *error=nil;
BOOL isDeleted = [[NSFileManager defaulManager] removeItemAtPath:pathToYourFolder error:&error]; 
```

# mysql - MySQL 按另一个表的 SUM 字段查询顺序

> ID：10615261
> 
> 赞同：0
> 
> 时间：2012-05-16T09:06:31.180
> 
> 标签：mysql, sql, sum

我有 3 张桌子：

> 酒店 : id, hotel_name
> 
> 酒店供应商：ID，供应商名称
> 
> hotel_price:id、hotel_id、supplier_id、分配、价格

我想按酒店价格的总和（分配）从酒店订单中选择所有，因此结果从分配最多的酒店排序。如何做到这一点..？，任何想法都非常感谢......，谢谢。

> 抱歉，我忘记了一件事，还有另一个条件，在hotel_price 上，如果价格 == 0，那么行的分配不计入总和（分配）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:10:55.920

试试这个变种：

```
select h.id, h.hotel_name, sum(hp.allotment)
  from hotel h join hotel_price hp on (h.id = hp.hotel_id)
 group by h.id, h.hotel_name
 order by 3 desc; 
```

# php - 如何使用具有相同方法名称的父类方法的参数？

> ID：10615265
> 
> 赞同：4
> 
> 时间：2012-05-16T09:06:40.313
> 
> 标签：php, codeigniter

标题有点混乱，我知道，但这是我能做的最好的。=P

希望有人能够提供帮助。

我正在使用 CodeIgniter，并且我在具有多个参数的基类中有一个方法：

```
class MY_Base extends CI_Model {

    function some_function($param1, $param2 ... $param8) {
        // do stuff
    }
} 
```

我想要做的基本上是这个，在一个子类中：

```
class Child extends MY_Base {

    function some_function($param1, $param2 ... $param8) {
        parent::some_function($param1, $param2 ... $param8);
        // call a methods found in this class only
        $this->some_method();
    }

    function some_method() {
        // do more stuff
    }
} 
```

我不能触及基类，所以我必须从它扩展。问题是，参数太多了。这也发生在不同的方法中，有时我会忘记一种导致代码失败的方法。

所以我想知道，是否有办法这样写：

```
function some_function(__PARAMETERS__) {
    parent::some_function(__PARAMETERS__)
} 
```

我似乎隐约记得这是可能的，但我在 Google 中找不到。可能是因为我搜索了错误的关键字。

任何帮助，将不胜感激。

编辑：然后，当然，我`func_get_args()`在发布这个问题后发现。这似乎符合我的要求，但我会留下这个问题以获得更好的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-07-13T08:03:31.800

对于 PHP >=7.0，我使用：

```
parent::{__FUNCTION__}(...func_get_args()) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T09:09:19.617

```
function some_function($a, $b, $c) {
    call_user_func_array('parent::some_function', func_get_args());
} 
```

**警告**：PHP >= 5.3

甚至：

```
function some_function($a, $b, $c) {
    call_user_func_array('parent::' . __FUNCTION__, func_get_args());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T13:35:51.340

`callParent()`您可以在最父类中声明以下方法

```
/**
 * Calls the parent class's same function, passing same arguments.
 * This is similar to ExtJs's callParent() function, except that agruments are 
 * FORCED to be passed (in extjs, if you call this.callParent() - no arguments would be passed,
 * unless you use this.callParent(arguments) expression instead)
 */
function callParent() {

    // Get call info from backtrace
    $call = array_pop(array_slice(debug_backtrace(), 1, 1));

    // Make the call
    call_user_func_array(get_parent_class($call['class']) . '::' . $call['function'], $call['args']);
} 
```

所以，在你的子类方法中，如果你想调用父方法，你可以使用

```
$this->callParent(); 
```

代替

```
call_user_func_array('parent::' . __FUNCTION__, func_get_args()); 
```

表达

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:10:46.333

您可以使用[call_user_func_array()](http://php.net/manual/en/function.call-user-func-array.php)函数调用它。

例如：

```
 <?php
 function some_function($var1, $var2, $var3)
 {
    call_user_func_array('parent::'.__METHOD__, func_get_args());
 }
 ?> 
```

# ada - ada语法问题

> ID：10615269
> 
> 赞同：1
> 
> 时间：2012-05-16T09:06:52.677
> 
> 标签：ada

我是 ada 的新手，我想定义一个矢量包并能够将它传递给一个方法，我应该在哪里定义包，这是我需要的代码

```
package Document is new Ada.Containers.Vectors(Positive,Unbounded_String);
use Document; 
```

我不知道放在哪里，所以它会对主文件和另一个函数文件可见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:54:42.573

如果您使用 GNAT（[来自 AdaCore 的 GPL 版本](http://libre.adacore.com/)或 FSF GCC 版本），您需要一个文件`document.ads`（与您要放置主程序和其他文件的工作目录相同）。

您的新包`Document`需要“<code>with”另外两个包：`Ada.Containers.Vectors`和`Ada.Strings.Unbounded`.

你不能放进`use Document;`去`document.ads`；它需要放入使用它的包`Document`中`with`。该`use`子句控制您是否需要编写完全限定名称 - 例如，按照您的方式编写`Document`，您会说

```
with Ada.Containers.Vectors;
with Ada.Strings.Unbounded; use Ada.Strings.Unbounded;
package Document is new Ada.Containers.Vectors (Positive, Unbounded_String); 
```

但写起来会更传统

```
with Ada.Containers.Vectors;
with Ada.Strings.Unbounded;
package Document is new Ada.Containers.Vectors
  (Positive,                                                
   Ada.Strings.Unbounded.Unbounded_String); 
```

你的主程序和其他包现在可以说`with Document;`（如果你愿意，也可以说`use Document;`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T10:51:06.350

除了西蒙的回答之外，您还可以将您在任何地方声明的两行放入[声明部分](http://rm.ada.cx/12a/AA-3-11.html#S0086)。这可以在子程序中，例如您的主程序、库或其他任何地方。

主要程序示例：

```
with Ada.Containers.Vectors;
with Ada.Strings.Unbounded;
procedure My_Main is
   package Document is new Ada.Containers.Vectors
     (Positive,
      Ada.Strings.Unbounded.Unbounded_String);
   -- use it or declare other stuff...
begin
   -- something...
end My_Main; 
```

要在多个源文件中使用它，请将其放入您的一个包或像 Simon 所写的单独文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T11:06:10.233

除此之外，要[实际](https://stackoverflow.com/a/10616130/571138)声明您需要放入声明性部分的向量：

```
my_document : document.vector; 
```

然后就可以使用vector[包中描述的方法了](http://en.wikibooks.org/wiki/Ada_Programming/Libraries/Ada.Containers.Vectors)

# c++ - OpenGL 闪烁/损坏，窗口调整大小和 DWM 处于活动状态

> ID：10615272
> 
> 赞同：26
> 
> 时间：2012-05-16T09:07:01.367
> 
> 标签：c++, windows, opengl, direct3d, dwm

我有一个 wxWidgets 应用程序，它有许多子 opengl 窗口。我正在使用我自己的 GL 画布类，而不是 wx 类。窗口共享它们的 OpenGL 上下文。我不认为它是 wxwidgets 的事实在这里真的很重要。

opengl 窗口是一个窗口的子窗口，它们是彼此的兄弟窗口，包含在选项卡控件中。一种 MDI 风格的界面，但它不是 MDI 窗口。每个都可以单独调整大小。除非启用 Aero 并且 DWM 处于活动状态，否则一切正常。

**调整任何窗口（甚至是 opengl 窗口）的大小会导致所有 opengl 窗口偶尔闪烁，并带有一个陈旧的后备存储视图，其中包含当时屏幕上的任何垃圾，而不是 opengl。这只发生在启用 Aero 的情况下。**

我很确定这是 DWM 实际上在其绘图表面后备存储中没有 opengl 内容，并且窗口没有在正确的时刻重新绘制。

我已经尝试了很多方法来解决这个问题，我确实有一个解决方案，但它不是很好，并且涉及将带有 glReadPixels 的帧缓冲区读取到 DIB 中，然后在我的 onPaint 例程中将其传送到绘图 DC。仅当 DWM 处于活动状态时才启用此解决方法，但我宁愿根本不必这样做，因为它会稍微损害性能（但在功能强大的系统上并不算太糟糕 - 场景是相对简单的 3d 图）。也不建议将 GDI 和 opengl 混合使用，但令人惊讶的是，这种方法很有效。我现在可以忍受它，但我宁愿不必。无论如何，如果我想截取子窗口的屏幕截图，我仍然必须在 WM_PRINT 中执行此操作，我看不到解决方法。

**有谁知道更好的解决方案？**

**在有人问之前，我肯定会做以下事情：**

*   窗口类有 CS_OWNDC
*   WM_ERASEBACKGROUND 什么都不做并返回 TRUE。
*   双缓冲已启用。
*   Windows 具有 WS_CLIPSIBLINGS 和 WS_CLIPCHILDREN 窗口样式。
*   在我的 resize 事件处理程序中，我立即重新绘制窗口。

我试过了：

*   在像素格式描述符中设置 PFD_SUPPORT_COMPOSITION。
*   不在绘制处理程序中使用 wxPaintDC 而是调用 ::ValidateRect(hwnd, NULL) 。
*   处理 WM_NCPAINT 并排除客户区
*   通过 DWM API 禁用 NC 绘制
*   在绘制事件中排除客户区
*   在缓冲区交换前后调用 glFlush 和/或 glFinish。
*   在每个绘画事件中使窗口无效（作为测试！） - 仍然闪烁！
*   不使用共享 GL 上下文。
*   禁用双缓冲。
*   写入 GL_FRONT_AND_BACK

禁用 DWM 不是一种选择。

**据我所知，如果您在 OpenGL 上使用 Direct3D 而不是这甚至是一个问题**，尽管我没有对此进行测试，因为它代表了很多工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-30T18:02:48.340

这是一个远景，但我自己*刚刚*解决了同样的问题。

长镜头部分出现是因为我们正在对围绕我们的 OpenGL 窗口的无标题组框的轮廓进行所有者绘制（即，制作一个漂亮的小边框），这可能无法描述您的情况。

我们发现导致问题的原因是：

我们一直在使用 RoundRect() 调用（带有 HOLLOW_BRUSH）来绘制组框的轮廓。将其更改为 MoveToEx() 和 LineTo() 调用以确保仅绘制线条并且在组框内没有任何操作可以防止 GDI 尝试意外地重绘控件的整个内容。无效逻辑可能存在差异（或者我们在加载预期的空心画笔时遇到了错误）。我们还在调查。

-诺埃尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-26T08:34:14.423

我的应用程序只有一个 OpenGL 窗口（主窗口），但我在调整窗口大小时遇到​​了一些令人讨厌的 DWM 撕裂问题，我想知道其中一种解决方案是否适合您。

首先，我发现在窗口调整大小期间，至少有两个不同的坏人想要通过修改您的客户区来“帮助”您，然后您才有机会自己更新窗口，从而产生闪烁。

第一个坏人可以追溯到 XP/Vista/7`BitBlt`在`SetWindowPos()`Windows 内部在窗口调整大小期间所做的内部操作，并且可以通过涉及拦截的技巧`WM_NCCALCSIZE`或其他涉及拦截的技巧来消除`WM_WINDOWPOSCHANGING`。

在 Windows 8/10 中，我们仍然有这个问题，但我们有一个新的坏人，Aero DWM.exe 窗口管理器，`BitBlt`当他认为你“落后”更新屏幕时，他会做他自己的不同类型。

我怀疑您看到的垃圾像素实际上可能是 DWM 在等待您绘制时故意且非常糟糕的尝试填充“可接受”的东西。我发现当 DWM 对新客户区进行 blit 时，它会扩展旧客户区数据的边缘像素，这太疯狂了。

不幸的是，我不知道有任何 100% 的解决方案可以阻止 DWM 这样做，但我确实有一个计时技巧，可以大大降低它的频率。

有关`WM_NCCALCSIZE`/ `WM_WINDOWPOSCHANGING`hack 以及 DWM 计时 hack 的源代码，请参阅：

[如何在调整窗口大小时平滑难看的抖动/闪烁/跳跃，尤其是拖动左/上边框（Win 7-10；bg、bitblt 和 DWM）？](https://stackoverflow.com/questions/53000291/how-to-smooth-ugly-jitter-flicker-jumping-when-resizing-windows-especially-drag/53000292#53000292)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T01:01:40.233

嗯，也许您遇到了同样的问题：如果您使用的是“新”MFC，它将使用选项卡和窗口拆分器创建和应用程序。

拆分器有一些逻辑（我猜测透明窗口周围的某个地方并为拆分绘制 XOR 线）会导致这种行为。卸下分离器以确认它可以解决您的问题。如果您需要拆分功能 - 放入不同的拆分器。

选项卡还允许停靠并再次拆分具有相同问题的窗口 - 删除/替换。

祝你好运，伊戈尔

# google-places-api - 在 Google Places API 中使用 radius 参数的正确方法是什么？

> ID：10615275
> 
> 赞同：3
> 
> 时间：2012-05-16T09:07:03.490
> 
> 标签：google-places-api

我正在使用[Google Places API](https://developers.google.com/maps/documentation/places/)检索当前位置周围的所有 POI（感兴趣的地方），它工作正常，但我注意到无论半径的值是多少，我总是得到相同数量的结果（〜 20 ）。结果，如果我给出的半径太大，我不一定会得到最近`POI`的 s。如果我将半径的量减小到足够小，我将再次检索那些最近的地方（通过实验，我注意到 100 米是一个合适的值）但这意味着我不会得到任何超过 100 米的 POI，即不是我想要的。

**我的问题是：**有什么方法可以让我在一定半径内获得**所有POI（没有限制）。**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T03:14:19.260

Google Places API 始终按设计返回 20 个结果，选择最符合您在请求中定义的条件的 20 个结果。开发人员指南/文档没有在我见过的任何地方明确引用该数字。我了解了观看[Autocomplete Demo & Places API Demo & Discussion Video](https://www.youtube.com/watch?v=9MZzosZkzpQ&feature=plcp)的限制，该视频由 Google 的开发者倡导者 Paul Saxman 和 Google 的 Places API 技术主管 Marcelo Camelo 提供。

整个视频都值得一看，但更具体到您的问题，如果您将播放计时器设置在 11:50 左右，Marcelo Camelo 将自动完成工具与通用 Places API 进行对比，这就是他提到的视频部分20 个结果限制。他多次提到 20 作为标准结果计数。

YouTube 上还有许多其他优秀的 Places API 和 Google Maps 视频链接到该区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T03:20:31.217

正如此处的 Google Places 问题跟踪器所述：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=3425](http://code.google.com/p/gmaps-api-issues/issues/detail?id=3425)

我们受到数据提供商许可证的限制，使应用程序一次只能显示不超过 20 个地点的结果。因此，我们目前无法提高此限制。

但是，听起来您确实在尝试返回最接近指定位置的结果，现在可以通过在请求中使用“rankby=distance”参数而不是“radius”来实现。

例如

> [https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&rankby=distance&types=food&name=harbour&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&rankby=distance&types=food&name=harbour&sensor=false&key=YOUR_API_KEY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:49:35.820

尝试`google.maps.places.RankBy.DISTANCE;`默认为`google.maps.places.RankBy.PROMINENCE;`

[此处](https://github.com/googlemaps/js-samples/blob/gh-pages/places/2012-may-hangout/search.html)显示了一个简单的示例

（仅限铬）

# php - 如何在 PHP 中读取 tcp/ip 标头？

> ID：10615277
> 
> 赞同：1
> 
> 时间：2012-05-16T09:07:09.897
> 
> 标签：php, tcp, header

我想获取源端点。
基本上我想通过从 tcp/ip 标头而不是从 http 标头获取端口/ip 来阻止一些 ip。PHP是否有任何内置方法可以实现这一目标，或者我应该做一个解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:32:30.607

如果您只是想从您的网站阻止某些 IP，则该`$_SERVER['REMOTE_ADDR']`变量将保存 IP。如果您需要在请求到达您的网络服务器之前阻止它，GordonM 是对的，防火墙就是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:28:12.170

PHP 在网络堆栈中太高了，无法做到这一点。一旦 PHP 脚本启动，连接就已经启动。如果要阻止某些 IP/端口组合，则必须在网络堆栈的较低级别进行。防火墙正是为这项工作而构建的，您需要设置一个以强制执行您想要的限制。

# r - R 中用于 adaBoost 的 GBM ~ predict() 值位于 [0,1] 之外

> ID：10615279
> 
> 赞同：4
> 
> 时间：2012-05-16T09:07:13.347
> 
> 标签：r

我目前正在尝试使用 gbm.fit 模型在 R 中拟合 adaBoost 模型。我已经尽我所能，但最后我的模型一直给我[0,1]之外的预测值。我知道 type = "response" 仅适用于伯努利，但我不断得到 0,1 之外的值。有什么想法吗？谢谢！

```
GBMODEL <- gbm.fit(
               x=training.set,
               y=training.responses,
               distribution="adaboost",
               n.trees=5000,
               interaction.depth=1,
               shrinkage=0.005,
               train.fraction=1,
               )

predictionvalues = predict(GBMODEL, 
                  newdata=test.predictors,
                  n.trees=5000,
                  type="response") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:26:14.693

通过 gbm 包选择“adaboost”作为损失函数来获得 [0,1] 之外的 y 范围是正确的。训练后，adaboost 通过输出的符号预测类别。

例如，对于二元类问题 y{-1,1}，类标签将被标记为输出 y 的符号。所以如果你得到 y=0.9 或 y=1.9 会给你同样的结果观察属于 y=1 类。然而，y=1.9 只是表明比 y=0.9 更自信的结论。（如果你想知道为什么，我建议你阅读 adaboost 的基于边距的解释，你会发现与 SVM 非常相似的结果）。

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T21:23:12.630

这在数学上可能并不完全准确，但我只是做了 pnorm（预测值），你得到的值是从 0 到 1，因为 adaboost 预测值似乎是在 Normal(0,1) 上缩放的。

# javascript - 为什么这个 Javascript 返回未定义？

> ID：10615280
> 
> 赞同：1
> 
> 时间：2012-05-16T09:07:14.220
> 
> 标签：javascript, loops, for-loop, dom-events, settimeout

```
var linksList = [
   "http://a.com",
   "http://b.com",
   "http://c.com",
]

for (var i=0; i<linksList.length; i++) {
    setTimeout(function() {
        console.log(linksList[i]); 
    }, 3000);
} 
```

我将其粘贴到 Chrome 检查器中，无论出于何种原因它都会返回一个数字（它似乎是一个完全随机的数字？）......然后它等待......然后返回 3 个“未定义”控制台错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:09:08.573

使用闭包：

```
for (var i=0; i<linksList.length; i++) {
    (function(i){
       setTimeout(function() {
          console.log(linksList[i]); 
       }, 3000);
    })(i);
} 
```

您的问题是，已经`setTimeout`调用了回调`i = linksList.length`，因此您正在输出：

```
 console.log(linksList[ linksList.length ]); 
```

`3`次，在`linksList[ linksList.length ]`哪里`undefined`。

# javascript - 从 twitter 搜索 api 迁移到状态 api 时遇到问题

> ID：10615282
> 
> 赞同：0
> 
> 时间：2012-05-16T09:07:15.233
> 
> 标签：javascript, jquery, html, twitter, local-storage

我正在使用搜索 api 来获取特定用户的推文。它工作得很好，只是它无法获取用户名包含数字的推文。

因此，根据建议，我将查询替换为状态 api 的查询。但我现在无法解析它！

在旧代码下方发布以显示推文详细信息。

```
function displayTweets(data) {
        //var data = JSON.parse(d);
        $("#heading").html("Tweets: <span class='handleName'>@"+handle+"</span>");
    $("#loading").remove();
    $("#tweets").children().remove();
    alert("1");
    $.each(data.results, function(i, tweet) {
        alert("hi");
        if(tweet.text !== undefined) {
         // Calculate how many hours ago was the tweet posted
            var date_tweet = new Date(tweet.created_at);
            var date_now   = new Date();
            var date_diff  = date_now - date_tweet;
            var hours      = Math.round(date_diff/(1000*60*60));        // calc time to tweet in hours
            if(hours < 1){
                hours = Math.round(date_diff/(1000*60));
                if(hours<1){
                    $("#tweets").append($("<li/>").html(tweet.text+" <span class='tweetTime'>--a moment ago.</span>"));
                }else{
                    $("#tweets").append($("<li/>").html(tweet.text+" <span class='tweetTime'>--"+hours+" minute(s) ago.</span>"));
                }
            }else{
                $("#tweets").append($("<li/>").html(tweet.text+" <span class='tweetTime'>--"+hours+" hour(s) ago.</span>"));
            }
        }
    });
} 
```

现在我用来获取响应并将响应存储在本地存储中的查询字符串：

```
function sendRequest(handle, noOfTweets, boolDisplay){
    $.getJSON("http://api.twitter.com/1/statuses/user_timeline.json?screen_name="+ handle + "&count=" + noOfTweets + "&callback=?", function(data) {
    if(boolDisplay){
        displayTweets(data);
    }
    localStorage.setItem("tweets"+handle, JSON.stringify(data));
  }); 
```

请告诉我需要哪些更改！}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:25:25.477

返回的 JSON 的结构完全不同。[请参阅https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)和[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)中的示例

例如，你说

```
$.each(data.results, function(i, tweet) { 
```

但用户时间线不包含结果元素。

你想要类似的东西

```
$.each(data, (function(i, tweet) { 
```

# sql - 按多列排序

> ID：10615284
> 
> 赞同：9
> 
> 时间：2012-05-16T09:07:16.937
> 
> 标签：sql, sql-server, sql-server-2005

我需要按两列排序数据，我该怎么做？

这是我的桌子：

```
Name   |  ImpFile   |  ImpTime
Sam      Imp01        2012-05-16 09:54:02.477
Ann      Imp01        2012-05-16 09:54:02.478
Mark     Imp01        2012-05-16 09:54:02.477
John     Import12     2012-05-16 09:55:37.384
Bart     Import12     2012-05-16 09:55:37.387
Sasha    Import12     2012-05-16 09:55:37.385 
```

我需要按 ImpTime 和 ImpName 对该表进行排序，它应该如下所示：

```
Name   |  ImpFile   |  ImpTime
         Import12    2012-05-16 09:55:37.387
Bart     Import12    2012-05-16 09:55:37.387
John     Import12    2012-05-16 09:55:37.384
Sasha    Import12    2012-05-16 09:55:37.385
         Imp01       2012-05-16 09:54:02.478
Ann      Imp01       2012-05-16 09:54:02.478
Mark     Imp01       2012-05-16 09:54:02.477
Sam      Imp01       2012-05-16 09:54:02.477 
```

我正在使用此查询，但它不按名称对表进行排序，仅在多行的时间值相同时按名称排序。

```
select Name, ImpFile, ImpTime
from people
union
select distinct '', ImpFile, max(ImpTime)
from people 
group by ImpFile
order by ImpTime desc, Name 
```

这个查询给了我这样的表：

```
Name   |  ImpFile   |  ImpTime
         Import12     2012-05-16 09:55:37.387
John     Import12     2012-05-16 09:55:37.384
Bart     Import12     2012-05-16 09:55:37.387
Sasha    Import12     2012-05-16 09:55:37.385
         Imp01        2012-05-16 09:54:02.478
Sam      Imp01        2012-05-16 09:54:02.477
Ann      Imp01        2012-05-16 09:54:02.478
Mark     Imp01        2012-05-16 09:54:02.477 
```

有没有办法同时按这两列排序？

**编辑** 当我使用时会发生什么`order by ImpFile DESC, ImpTime desc`？
它给了我一个这样的结果表：

```
Name   |  ImpFile   |  ImpTime
         Import12    2012-05-16 09:55:37.387
         Imp01       2012-05-16 09:54:02.478
Bart     Import12    2012-05-16 09:55:37.387
John     Import12    2012-05-16 09:55:37.384
Sasha    Import12    2012-05-16 09:55:37.385
Ann      Imp01       2012-05-16 09:54:02.478
Mark     Imp01       2012-05-16 09:54:02.477
Sam      Imp01       2012-05-16 09:54:02.477 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:16:59.327

为什么你可以这样做：

```
order by ImpFile DESC, ImpTime desc 
```

不，它不会导致您展示的内容。结果是这样的：

```
 Import12    2012-05-16 09:55:37.387
Bart    Import12    2012-05-16 09:55:37.387
Sasha   Import12    2012-05-16 09:55:37.387
John    Import12    2012-05-16 09:55:37.383
        Imp01       2012-05-16 09:54:02.477
Ann     Imp01       2012-05-16 09:54:02.477
Mark    Imp01       2012-05-16 09:54:02.477
Sam     Imp01       2012-05-16 09:54:02.477 
```

有关示例，请参见[此处](http://sqlfiddle.com/#!3/2e0bb/1)

**编辑**

我有一个建议给你。也许是这样的：

**测试数据**

```
DECLARE @T TABLE(Name VARCHAR(100),ImpFile VARCHAR(100),ImpTime DATETIME)

INSERT INTO @T
    ([Name], [ImpFile], [ImpTime])
VALUES
    ('Sam', 'Imp01', '2012-05-16 09:54:02.477'),
    ('Ann', 'Imp01', '2012-05-16 09:54:02.478'),
    ('Mark', 'Imp01', '2012-05-16 09:54:02.477'),
    ('John', 'Import12', '2012-05-16 09:55:37.384'),
    ('Bart', 'Import12', '2012-05-16 09:55:37.387'),
    ('Sasha', 'Import12', '2012-05-16 09:55:37.385'); 
```

**询问**

```
;WITH CTE
AS
(   
    SELECT
        ROW_Number() OVER(PARTITION BY  t.[ImpFile] 
                     ORDER BY t.[ImpTime] DESC) AS RowNbr,
        '' AS Name,
        t.ImpFile,
        t.[ImpTime]
    FROM
        @T AS t
)
SELECT
    CTE.Name,
    CTE.ImpFile,
    CTE.[ImpTime],
    0 as SortOrder
FROM
    CTE
WHERE
    CTE.RowNbr=1
UNION ALL
SELECT
    t.Name,
    t.ImpFile,
    t.[ImpTime],
    1 as SortOrder
FROM
    @T AS t
ORDER BY
    ImpFile DESC,SortOrder, ImpTime desc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T13:48:08.427

获取每个组的领导者并按时间降序对它们进行排序：

```
with grp(Name,ImpFile,TimeGroup,ImpTime) as 
(
  select cast(null as varchar(5)), ImpFile, max(ImpTime) as TimeGroup, 
         max(ImpTime) as ImpTime
  from people 
  group by ImpFile  
)
select * 
from grp
order by TimeGroup desc; 
```

输出：

```
NAME      IMPFILE   TIMEGROUP                     IMPTIME
(null)    Import12  2012-05-16 09:55:37.3870000   2012-05-16 09:55:37.3870000
(null)    Imp01     2012-05-16 09:54:02.4780000   2012-05-16 09:54:02.4780000 
```

然后将追随者加入领导者并获取领导者的时间（TimeGroup）：

```
with grp(Name,ImpFile,TimeGroup,ImpTime) as 
(
  select cast(null as varchar(5)), ImpFile, max(ImpTime) as TimeGroup, 
         max(ImpTime) as ImpTime
  from people 
  group by ImpFile  

  union all

  select p.Name, p.ImpFile, ldr.TimeGroup, p.ImpTime
  from people p
  inner join grp ldr -- leader
  on ldr.name is null and ldr.ImpFile = p.ImpFile
)
select Name, ImpFile, ImpTime
from grp 
order by TimeGroup desc, Name 
```

输出：

```
NAME      IMPFILE   IMPTIME
(null)    Import12  2012-05-16 09:55:37.3870000
Bart      Import12  2012-05-16 09:55:37.3870000
John      Import12  2012-05-16 09:55:37.3840000
Sasha     Import12  2012-05-16 09:55:37.3850000
(null)    Imp01     2012-05-16 09:54:02.4780000
Ann       Imp01     2012-05-16 09:54:02.4780000
Mark      Imp01     2012-05-16 09:54:02.4770000
Sam       Imp01     2012-05-16 09:54:02.4770000 
```

查询的逻辑是，我们根据 ImpFile 将追随者（有名字的人）的时间与其领导者的时间（TimeGroup）对齐。Leader和它的Follower有相同的时间组，所以当我们按时间排序时，它们会相互粘连；然后，我们按名称排序

现场测试：[http ://www.sqlfiddle.com/#!3/c7859/21](http://www.sqlfiddle.com/#!3/c7859/21)

* * *

如果我们希望组长出现在其追随者之后，只需在 ORDER BY 上放置一个案例：

```
with grp(Name,ImpFile,TimeGroup,ImpTime) as 
(
  select cast(null as varchar(5)), ImpFile, max(ImpTime) as TimeGroup, 
         max(ImpTime) as ImpTime
  from people 
  group by ImpFile  

  union all

  select p.Name, p.ImpFile, ldr.TimeGroup, p.ImpTime
  from people p
  inner join grp ldr -- leader
  on ldr.name is null and ldr.ImpFile = p.ImpFile
)
select Name, ImpFile, ImpTime
from grp 
order by TimeGroup desc, 

  case 
  when Name is null then 2 -- leader last
  else 1 -- followers first
  end,

  Name 
```

输出：

```
NAME      IMPFILE   IMPTIME
Bart      Import12  2012-05-16 09:55:37.3870000
John      Import12  2012-05-16 09:55:37.3840000
Sasha     Import12  2012-05-16 09:55:37.3850000
(null)    Import12  2012-05-16 09:55:37.3870000
Ann       Imp01     2012-05-16 09:54:02.4780000
Mark      Imp01     2012-05-16 09:54:02.4770000
Sam       Imp01     2012-05-16 09:54:02.4770000
(null)    Imp01     2012-05-16 09:54:02.4780000 
```

现场测试：[http ://www.sqlfiddle.com/#!3/c7859/23](http://www.sqlfiddle.com/#!3/c7859/23)

* * *

这个怎么运作：

```
with grp(Name,ImpFile,TimeGroup,ImpTime) as 
(
  select cast(null as varchar(5)), ImpFile, max(ImpTime) as TimeGroup, 
         max(ImpTime) as ImpTime
  from people 
  group by ImpFile  

  union all

  select p.Name, p.ImpFile, ldr.TimeGroup, p.ImpTime
  from people p
  inner join grp ldr -- leader
  on ldr.name is null and ldr.ImpFile = p.ImpFile
)
select *
from grp 
order by TimeGroup desc, Name; 
```

输出：

```
NAME      IMPFILE   IMPTIME                       TIMEGROUP
(null)    Import12  2012-05-16 09:55:37.3870000   2012-05-16 09:55:37.3870000
Bart      Import12  2012-05-16 09:55:37.3870000   2012-05-16 09:55:37.3870000
John      Import12  2012-05-16 09:55:37.3840000   2012-05-16 09:55:37.3870000
Sasha     Import12  2012-05-16 09:55:37.3850000   2012-05-16 09:55:37.3870000
(null)    Imp01     2012-05-16 09:54:02.4780000   2012-05-16 09:54:02.4780000
Ann       Imp01     2012-05-16 09:54:02.4780000   2012-05-16 09:54:02.4780000
Mark      Imp01     2012-05-16 09:54:02.4770000   2012-05-16 09:54:02.4780000
Sam       Imp01     2012-05-16 09:54:02.4770000   2012-05-16 09:54:02.4780000 
```

现场测试：[http ://www.sqlfiddle.com/#!3/c7859/25](http://www.sqlfiddle.com/#!3/c7859/25)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T11:24:27.550

首先，您应该意识到，由于`datetime`类型的粒度，SQL Server 无法区分`2012-05-16 09:55:37.384`和`2012-05-16 09:55:37.385`：两者都将存储为`2012-05-16 09:55:37.384`.

牢记这一点并假设您要对组进行排序`MAX(ImpTime) DESC`以及按 对详细信息行进行排序`ImpTime DESC`，您可以尝试以下操作：

```
WITH agg AS (
  SELECT
    *,
    ImpTimeMax = MAX(ImpTime) OVER (PARTITION BY ImpFile),
    rn         = ROW_NUMBER() OVER (PARTITION BY ImpFile ORDER BY ImpTime DESC)
  FROM Table1
)
SELECT
  Name = CASE x.IsAgg WHEN 1 THEN '' ELSE agg.Name END,
  agg.ImpFile,
  agg.ImpTime
FROM agg
  INNER JOIN (SELECT 0 UNION ALL SELECT 1) x (IsAgg) ON x.IsAgg = 0 OR agg.rn = 1
ORDER BY
  agg.ImpTimeMax DESC,  /* the primary order for groups */
  agg.ImpFile    ASC ,  /* in case two or more groups have the same max time */
  x.IsAgg        DESC,  /* the group summary row goes first */
  agg.ImpTime    DESC,  /* or: agg.rn ASC */
  agg.Name       ASC    /* in case two or more people have the same time */ 
```

运行时[在 SQL Fiddle 上](http://sqlfiddle.com/#!3/ccbc1/3)时，将为您的示例生成以下输出：

```
NAME   IMPFILE   IMPTIME
-----  --------  -----------------------
       Import12  2012-05-16 09:55:37.387
Bart   Import12  2012-05-16 09:55:37.387
Sasha  Import12  2012-05-16 09:55:37.385
John   Import12  2012-05-16 09:55:37.384
       Imp01     2012-05-16 09:54:02.478
Ann    Imp01     2012-05-16 09:54:02.478
Mark   Imp01     2012-05-16 09:54:02.477
Sam    Imp01     2012-05-16 09:54:02.477 
```

请注意，我暂时将其定义`ImpTime`为 a `varchar`，而不是 a `datetime`，只是为了更好地演示，因为就像我说的那样，因为`datetime`' 的粒度会导致存储的值略有不同（因此，产生的输出也略有不同）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T09:29:01.263

您可能想要擦洗毫秒：[http ://www.sqlfiddle.com/#!3/35065/2](http://www.sqlfiddle.com/#!3/35065/2)

```
select Name, ImpFile, 

   ImpTimeX = 
      DATEADD(ms, -DATEPART(ms, ImpTime), ImpTime)

from tbl

union

select distinct '', ImpFile, 

   ImpTimeX = 
       MAX(DATEADD(ms, -DATEPART(ms, ImpTime), ImpTime))

from tbl 
group by ImpFile
order by ImpTimeX desc, Name 
```

输出：

```
NAME           IMPFILE        IMPTIMEX
               Import12       May, 16 2012 09:55:37-0700
Bart           Import12       May, 16 2012 09:55:37-0700
John           Import12       May, 16 2012 09:55:37-0700
Sasha          Import12       May, 16 2012 09:55:37-0700
               Imp01          May, 16 2012 09:54:02-0700
Ann            Imp01          May, 16 2012 09:54:02-0700
Mark           Imp01          May, 16 2012 09:54:02-0700
Sam            Imp01          May, 16 2012 09:54:02-0700 
```

清除此处来源的毫秒的技术：[SQL Server remove milliseconds from datetime](https://stackoverflow.com/questions/3286849/sql-server-remove-milliseconds-from-datetime)

* * *

如果要保留并显示原始时间，只需这样做：[http ://www.sqlfiddle.com/#!3/35065/1](http://www.sqlfiddle.com/#!3/35065/1)

```
with a as(

  select Name, ImpFile, 

     ImpTimeX = 
        DATEADD(ms, -DATEPART(ms, ImpTime), ImpTime),

     ImpTime

  from tbl

  union

  select distinct '', ImpFile, 

     ImpTimeX = 
         MAX(DATEADD(ms, -DATEPART(ms, ImpTime), ImpTime)),

     MAX(ImpTime)

  from tbl 
  group by ImpFile

)
select Name, ImpFile, ImpTime
from a
order by ImpTimeX desc, Name 
```

我认为 SqlFiddle 不显示毫秒。请在你的 Sql Server 上尝试第二个查询，我现在在其他操作系统上，我看不到第二个查询的实际输出

* * *

这是第二个查询的输出，日期时间完整，在 SSMS 上测试：

```
Name    ImpFile         ImpTime     
        Import12        2012-05-16 09:55:37.3870000
Bart    Import12        2012-05-16 09:55:37.3870000
John    Import12        2012-05-16 09:55:37.3840000
Sasha   Import12        2012-05-16 09:55:37.3850000
        Imp01           2012-05-16 09:54:02.4780000
Ann     Imp01           2012-05-16 09:54:02.4780000
Mark    Imp01           2012-05-16 09:54:02.4770000
Sam     Imp01           2012-05-16 09:54:02.4770000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T12:33:26.163

您可以通过 ImpFile desc,Name 的 order 获得所需的输出

```
select Name, ImpFile, ImpTime
    from dbo.tbl_stack 
    union
    select distinct '', ImpFile, max(ImpTime)
    from dbo.tbl_stack 
    group by ImpFile
    order by ImpFile desc,Name 
```

这是输出

```
Name    ImpFile         ImpTime 
        Import12        2012-05-16 09:55:37.387
Bar     Import12        2012-05-16 09:55:37.387
John    Import12        2012-05-16 09:55:37.383
Sasha   Import12        2012-05-16 09:55:37.387
        Imp01       2012-05-16 09:54:02.477
Ann     Imp01       2012-05-16 09:54:02.477
Mark    Imp01       2012-05-16 09:54:02.477
Sam     Imp01           2012-05-16 09:54:02.477 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T09:42:39.727

看起来`order by`仅应用于查询中的第二`select`个`union`。

尝试使用 a`subselect`创建一个临时表来应用`order by`：

```
select Name, ImpFile, ImpTime from (
select Name, ImpFile, ImpTime from people
union
select distinct '', ImpFile, max(ImpTime) from people group by ImpFile
) order by ImpTime desc, Name 
```

# visual-studio-2008 - 引用的项目在 VS 2008 的编译时丢失

> ID：10615285
> 
> 赞同：0
> 
> 时间：2012-05-16T09:07:16.730
> 
> 标签：visual-studio-2008, reference, multiple-projects

我知道相同的标语已用于回答相同类型的问题，但是，那里的答案没有帮助。我的解决方案中有几个项目。一个项目说 Prj.Infrastructure 有一些接口 IA、IB、IC、ID 和 IE，这些接口由项目 Prj.Bridge 中的一些 C++/CLI 类实现，也用于 Prj.UI 中的一些 winforms。

当我单独构建每个项目时，它构建得很好，但是当我构建整个解决方案时，由于某种原因它丢失了接口 IA、IB 和 IC，并且 Prj.UI 找不到它给出一个错误，例如

错误 6 找不到类型或命名空间名称“IA”（您是否缺少 using 指令或程序集引用？） D​​:\svnroot\branches\blah1\blah2\blah3\blah4\blah5\blah6\INVS.cs

INVS 在哪里实施 IA。

我尝试了以下方法：我已经清洁和建造了很多次。我检查了我的解决方案中的所有项目，并且未选中客户端配置文件复选框。删除了 Resharper（因为 Resharper 识别引用的项目没有问题，我认为它可能值得一试）删除并重新添加了引用和使用语句。还尝试在其他计算机上检查我的分支，但仍然失败。

请帮助我，我已经被困了2天了。

编辑：它适用于.Net 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:17:35.857

解决方案->属性

公共属性->项目依赖项

Prj.UI 依赖于 Prj.Infrastructure

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:24:07.977

对不起大家。原来我的同事在构建脚本中添加了一个注册表（在 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft.NETFramework\AssemblyFolders 下添加了键）指向另一个构建文件夹（来自另一个源代码控制结帐），所以每当我构建整个解决方案时，它正在从中获取数据，并且无法识别新添加的接口。对不起这个问题，事实证明，我们可能会为这个问题增加一种可能性。检查您的注册表，因为这是 Visual Studio 在构建整个解决方案时获取其构建信息的地方。VS 使用此文件夹来解析引用（即，传送 API）。它是从这个文件夹而不是分支输出文件夹中解析一个库，它是如何将程序集添加到“添加引用”部分的

# ios - 将图像 UIBarItem 添加到 UINavigationController 或替代

> ID：10615287
> 
> 赞同：0
> 
> 时间：2012-05-16T09:07:28.467
> 
> 标签：ios, uiview, uinavigationcontroller

我`UINavigationController`在一个应用程序上有一个左右按钮，用作一个硬件的遥控器。我想通过在右侧按钮左侧的导航栏中显示一个图标来表明硬件已连接到应用程序。从文档看来，我只能添加`UIBarButtonItems`这让我怀疑我的“已连接 LED”指示灯还有另一个更传统的位置。

所以我的问题是我可以在`UINavigationController`导航栏中显示一个图标吗？如果不能，我应该在哪里显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:31:46.983

对于这样的事情，真的没有一个“传统的地方”。:)

我怀疑这个“连接的 LED”应该显示在所有视图上，无论当前视图（及其`UINavigationItem`）如何。如果这是正确的，最简单的方法可能是不将该图标放在实际的 中`UINavigationBar`，而是将它作为一个单独`UIView`的图标放在`UINavigationBar`的**superview**中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:27:29.170

`UINavigationBar`是 的子类`UIView`，因此您可以像这样向其中添加项目：

```
[navBar addSubview:whatever]; 
```

导航栏是导航控制器的一个属性（即你可以像这样引用它`self.navigationController.navigationBar`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:35:39.937

您应该能够以编程方式创建一个 uiview 并将其添加为导航栏的子视图

```
UIImageView *connectedView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"connected-icon.png"]];
[self.navigationController.navigationBar insertSubview:connectedView atIndex:0];
[connectedView release]; 
```

如果 insertSubview 不能按预期工作，请尝试 addSubview：

```
[self.navigationController.navigationBar addSubview:connectedView]; 
```

不过，您可能希望将 connectedView 创建为属性，以便在不再“连接”时可以（更）轻松地将其删除。

[请参阅该方法的其他示例](http://www.icab.de/blog/2009/10/13/adding-any-kinds-of-ui-elements-into-a-uinavigationbar/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:09:25.340

试试这个代码

```
[[[yourViewController viewControllers] lastObject] navigationItem].titleView = yourImageView; 
```

为我在邮件控制器中自定义导航栏工作。希望你能从这里得到一些想法。

# c# - 如何将不同的项目加载到 llblgen pro 集合中

> ID：10615288
> 
> 赞同：1
> 
> 时间：2012-05-16T09:07:29.713
> 
> 标签：c#, llblgenpro, llblgen

我有一个类似下面代码的集合。我从表中加载所有项目。如何仅在特定字段上加载不同的项目？

```
 var objlogcollection = new ClsfIcdNineToClsfIcdTenDiagnosisCollection();

 IPredicateExpression filter = new PredicateExpression();
 filter.Add(new FieldCompareValuePredicate(ClsfIcdNineToClsfIcdTenDiagnosisFields.ClsfIcdNineCodeFormatted, ComparisonOperator.NotEqual, ClsfIcdNineToClsfIcdTenDiagnosisFields.ClsfIcdNineCodeFormatted));
 objlogcollection.GetMulti(null); 
```

# jquery - 使用 jquery 更改多个图像扩展名

> ID：10615289
> 
> 赞同：1
> 
> 时间：2012-05-16T09:07:31.427
> 
> 标签：jquery

对不起，我是 jquery 的新手。我在标签上有这个代码：

```
<img class="fluidimage" src="img/picture1.jpg"/> 
<img class="fluidimage" src="img/goodimage1.jpg"/> 
```

如果用户调整他们的网络浏览器的大小，我想更改流体图像类上的所有 src。所以我想要的输出是：

```
<img class="fluidimage" src="img/picture1_small.jpg"/> 
<img class="fluidimage" src="img/goodimage1_small.jpg"/> 
```

我的问题是如何在jquery中将字符串“_small”放在“.jpg”之前？我尝试编写 jquery 函数，但它不起作用。

```
$(document).ready(function() {  
        function imageresize() {  
            var contentwidth = $('#container').width(); 
            if ((contentwidth) < '700'){ 
                $('.fluidimage').attr('src','img/picture1.jpg');
                $('.fluidimage').attr('src', $(this).attr('src').replace('.jpg', '_small.jpg'));
            } else {  
            $('.fluidimage').attr('src','img/picture1.jpg');  
            }  
        }  

        imageresize();     

        $(window).bind("resize", function(){  
            imageresize();  
        });  

        }); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:12:32.267

你可以使用

```
var source = $(this).attr("src");
$(this).attr("src",source.replace(".jpg","_small.jpg")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:14:05.800

尝试迭代它：

```
 if ((contentwidth) < '700'){
            $('.fluidimage').each(function() {

               $(this).attr('src','img/picture1.jpg');
               $(this).attr('src', $(this).attr('src').replace('.jpg', '_small.jpg'));

            });
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:14:49.633

```
if ((contentwidth) < '700')
{ 
   $('.fluidimage').each(function(){
       $(this).attr('src', str_replace(".jpg", "_small.jpg"));
   });
} 
else 
{  
   $('.fluidimage').each(function(){
       $(this).attr('src', str_replace("_small.jpg", ".jpg"));
   });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:14:57.893

尝试这个 ：

```
var usingsmall = false;
$(document).ready(function () {
    $(window).resize(function () {
        var contentwidth = $('#container').width();
        if (contentwidth < 700) {
            if (!usingsmall) {
                $('.fluidimage').each(function () {
                    $(this).attr('src', $(this).attr('src').replace('.jpg', '_small.jpg'));
                    usingsmall = true;
                });
            }
        } else {
            if (usingsmall) {
                $('.fluidimage').each(function () {
                    $(this).attr('src', $(this).attr('src').replace('_small.jpg', '.jpg'));
                    usingsmall = false;
                });
            }
        }
    })
}) 
```

我已经更改了很多代码！您可以使用

```
$(window).resize(function () { 
```

而不是[jQuery](http://api.jquery.com/resize/)`window.resize =`中的内置调整大小处理程序

该`if`语句正在检查`'700'`您何时应该检查一个数字（尽管它可以与 一起使用`'700'`）：

```
if (contentwidth < 700) { 
```

最后的更改是使用类迭代图像`fluidimage`并更改每个`src`属性：

```
$('.fluidimage').each(function() { 
```

这使用[`.each()`](http://api.jquery.com/each/)

我引入了一个变量，以`usingsmall`确保只执行必要的工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T09:15:24.433

```
$('img.fluidimage').attr('src', function(i, oldSrc){
   this.src = oldSrc.replace('.jpg','_small.jpg');
}) 
```

# javascript - 在使用 javascript（d3 库）加载之前从 CSV 中选择数据

> ID：10615290
> 
> 赞同：16
> 
> 时间：2012-05-16T09:07:32.033
> 
> 标签：javascript, csv, d3.js

我想在使用 javascript（使用 d3 库）加载之前从 CSV 文件中选择一些数据。

这就是我加载 CSV 的方式：

```
d3.csv("data.csv", function(csv) {
    vis.datum(csv).call(chart);
        }); 
```

这是 CSV 文件的示例：

```
Class,Age,Sex,Survived
First Class,Adult,Male,Survived
First Class,Adult,Male,Survived
First Class,Adult,Male,Survived
First Class,Adult,Male,Survived
First Class,Adult,Male,Survived
First Class,Adult,Female,Survived
First Class,Adult,Female,Survived
First Class,Adult,Female,Survived
Second Class,Adult,Male,Perished
Second Class,Adult,Male,Perished
Second Class,Adult,Male,Perished
Third Class,Adult,Male,Survived
Third Class,Adult,Male,Survived
Third Class,Adult,Male,Survived
Third Class,Adult,Male,Survived
Third Class,Adult,Male,Perished
Third Class,Adult,Male,Perished
Crew,Adult,Male,Perished
Crew,Adult,Male,Perished
Crew,Adult,Female,Survived
Crew,Adult,Female,Survived 
```

例如，我只想在加载它之前选择`Second Class`和`First Class`行`d3.csv`。

我知道我可以删除 CSV 中的其他行，但我想创建一个函数，以便用户可以选择他想要使用的类别。我希望这有点道理。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-17T23:12:18.183

快速回答是，用于`.filter()`选择您想要的行，例如：

```
d3.csv("data.csv", function(csv) {
    csv = csv.filter(function(row) {
        return row['Class'] == 'Second Class' || row['Class'] == 'First Class';
    })
    vis.datum(csv).call(chart);
}); 
```

如果您（编码员）正在选择过滤器，这很容易。但是，如果您需要通过用户交互来选择它，您将需要构建一个更复杂的功能。假设您已将用户选择保存在名为 的对象`filters`中，键对应于您的行，一个选项可能如下所示：

```
// an example filters object
var filters = {
    'Class': ['First Class', 'Second Class'],
    'Sex': 'Female'
};

d3.csv("data.csv", function(csv) {
    csv = csv.filter(function(row) {
        // run through all the filters, returning a boolean
        return ['Class','Age','Sex','Survived'].reduce(function(pass, column) {
            return pass && (
                // pass if no filter is set
                !filters[column] ||
                    // pass if the row's value is equal to the filter
                    // (i.e. the filter is set to a string)
                    row[column] === filters[column] ||
                    // pass if the row's value is in an array of filter values
                    filters[column].indexOf(row[column]) >= 0
                );
        }, true);
    })
    console.log(csv.length, csv);
}); 
```

（你不必这样做`.reduce()`，但我喜欢它的干净程度。）

如果（可能是这种情况）您不想在加载时进行此过滤，而是根据用户输入动态过滤，您仍然可以使用过滤器功能，但您需要存储`csv`在内存中的某处并过滤它在运行中，可能在`update()`由用户交互触发的功能中。

# php - 在 PHP 中处理大文件

> ID：10615291
> 
> 赞同：0
> 
> 时间：2012-05-16T09:07:35.760
> 
> 标签：php, mysql, unix

在 php.ini 中处理非常大的文件的最佳方法是什么？这是我目前的情况：

1.  我从网络管理系统 (NMS) 中提取有关所有网络元素的所有参数的原始文件（NMS 在 UNIX 框中运行）。
2.  我使用 PHP 将原始文件传输到我的 PC 盒中。
3.  我使用 PHP 的 fget() 函数逐行处理原始文件。
4.  每一行我都使用字符串匹配和正则表达式匹配来提取必要的数据，直到我能够组成用逗号（“，”）分隔的 1 行必要数据。
5.  我重复第 4 步，直到 EOF 并获得完整的 CSV 文件。
6.  然后我使用 sql 的“LOAD DATA INFILE”将这些数据扔到我的数据库中

我现在的问题是，我有 1 个原始文件达到更多/更少 200MB，并且有更多/更少 180 列数据，因此我的 php 脚本无法完成对整个文件的处理，因为在处理时它耗尽了所有 1024MB 内存我在我的 php.ini 文件上分配。

希望有关于此问题的最佳解决方法的建议。谢谢！

处理部分代码如下：

```
while( !feof($fh) ){
set_time_limit(0);
$l_buffer = fgets( $fh, $fsize );
$l_LineStream = explode( ' ', trim( $l_buffer ) );
$l_FilteredLineStream = array_filter( $l_LineStream, array( $this, 'RemoveEmptyElement' ) );
$l_GrepMatchArray = preg_grep( '/^BSC.*_.*$/', $l_FilteredLineStream );
if( count( $l_GrepMatchArray ) > 0 ){
    foreach( $l_GrepMatchArray as $l_BSCFound ){
        $l_BSCFound = explode( '_', $l_BSCFound );
        $l_BSCHoming = $l_BSCFound[1];
    }
}
$l_GrepMatchArray = preg_grep( '/^BTS-[0-9]*$/', $l_FilteredLineStream );
if( count( $l_GrepMatchArray ) > 0 ){
    foreach( $l_GrepMatchArray as $l_BTSFound ){
        $l_CurrBTS = $l_BTSFound;
    }
}
/**/
if( $l_PrevBTS != $l_CurrBTS && isset( $l_BTSArray ) && count( $l_BTSArray ) > 0 ){
    #$this->BTS_Array[] = $l_BTSArray;
    if( $l_FirstLoop == true ){
        $this->WriteDataToCSVFile( $l_BTSArray, $l_FilePath, true );
        $l_FirstLoop = false;
    }else{
        $this->WriteDataToCSVFile( $l_BTSArray, $l_FilePath );
    }
}
/**/
if( count( $l_GrepMatchArray ) > 0 ){
    #var_dump( $l_FilteredLineStream );
    $l_BTSArray = $this->InstantiateEmptyBTSArray();
    #$l_BTSArray['CI'] = '';
    $l_BTSArray['BSC'] = $l_BSCHoming;
    $l_BTSArray['BCF'] = $l_FilteredLineStream[0];
    $l_BTSArray['BTS'] = $l_FilteredLineStream[3];
    $l_BTSArray['CELL NAME'] = $l_FilteredLineStream[6];
}
if( $l_GetPLMNNextLineData == true && isset( $l_BTSArray['PLMN'] ) ){
    $l_BTSArray['PLMN'] .= trim( $l_buffer );
    $l_GetPLMNNextLineData = false;
}
$l_GrepMatchArray = preg_match( '/\.\(.*$/', $l_buffer, $reg_match );

if( count( $reg_match ) > 0 ){
    $l_KeyName = substr( $reg_match[0], 2, strpos( $reg_match[0], ')' ) - 2 );
    preg_match( '/[[:space:]].*|[-].*/', $reg_match[0], $param_value );
    $l_BTSArray[$l_KeyName] = trim( $param_value[0] );
    if( $l_KeyName == 'PLMN' ){
        $l_GetPLMNNextLineData = true;
    }
}
$l_PrevBTS = $l_CurrBTS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:25:10.933

您应该检查您的脚本是否真的逐行处理大文件（一次一行）。

*   你在数组中保留一条读取线吗？
*   您是立即在文件中写入 CSV 行，还是将所有生成的行保存在一个数组中？
*   等等

如果您逐行处理文件，则不应使用 1GB+ 内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:27:02.243

如果您在处理 200MB 文件时用完了 1024MB 内存，那么我建议您在某个地方遇到内存问题。我建议您检查您的代码以查找可能占用不再需要的资源的区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:24:51.887

Why do you save to MySQL only in the end of process? When you parsed a line flush that to the database, so you will just use few MB for each rows.

## To address the comment:

You can use `INSERT DELAYED` to let database manage the load, and to don't stress it too much

# javascript - 如何在这个 Javascript 正则表达式中保持间距？

> ID：10615292
> 
> 赞同：0
> 
> 时间：2012-05-16T09:07:38.747
> 
> 标签：javascript, regex

```
/[^A-Za-z0-9]/g 
```

现在它修剪了空间。但我想保留空间。（我只想删除符号）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:16:27.423

这个

```
[A-Za-z0-9] 
```

是一个**[字符类](http://www.regular-expressions.info/charclass.html)**。它将匹配该类中列出的任何字符。

如果你`^`在类中放置一个作为起始字符

```
[^A-Za-z0-9] 
```

它是一个**否定字符类**。它将匹配该类中未列出**的任何字符。**

因此，如果您不希望空间匹配，只需将其添加到类中：

```
[^A-Za-z0-9 ] 
```

如果要保留所有**空格**（空格、制表符和换行符），可以使用速记字符类`\s`

```
[^A-Za-z0-9\s] 
```

**JavaScript 代码：**

```
var s = '#fashion!?;Foobar,.;:'; 
s = s.replace(/[^A-Za-z0-9 ]/g, ''); 
alert(s); 
```

看跌期权

> 时尚Foobar

我的博文：[每个程序员都应该知道的关于正则表达式的知识](http://blog.xisb.de/?p=4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:09:35.997

只需添加空格字符。

```
/[^A-Za-z0-9 ]/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:14:52.577

你可以试试这个：

```
/[^\sA-Za-z0-9]/g 
```

# java - 您如何使用 scribe 在 vi meo api 上获取 ticket_id

> ID：10615293
> 
> 赞同：0
> 
> 时间：2012-05-16T09:07:39.007
> 
> 标签：java, vimeo, scribe

我正在尝试将视频上传到 vimeo，我知道您需要 ticket_id 才能上传。

我的想法是我无法弄清楚如何使用 scribe 来获取这个 ticket_id。有没有人有任何例子如何做到这一点？

提前致谢。

当我使用：

```
OAuthRequest request = new OAuthRequest(Verb.GET, "http://vimeo.com/api/rest/v2");
request.addQuerystringParameter("method", "vimeo.videos.upload.getTicket"); 
```

这导致：

```
<err code="401" expl="The consumer key passed was not valid." msg="Invalid consumer key"/> 
```

当我使用方法时：

```
request.addQuerystringParameter("method", "vimeo.videos.upload.getQuota"); 
```

一切正常。我尝试在 vimeo.videos.upload.getQuota 方法中放置一些假的 api 密钥。这也导致了无效的密钥。所以它不像方法 vimeo.videos.upload.getQuota 不需要 api 密钥。事实上它确实如此，如果您不提供有效的密钥，它将无法工作。不知何故，当调用方法 vimeo.videos.upload.getTicket 时，使用适用于方法 getQuota 的相同 api 密钥，我得到响应：

```
<err code="401" expl="The consumer key passed was not valid." msg="Invalid consumer key"/> 
```

带有假 api 密钥的完整代码：

```
public class VimeoServiceConcept {

public static void main(String[] args) {

    String apikey="api key";
    String apisecret="secret";
    String accessToken="access token";
    String accessTokenSecret="access token secret";

    OAuthService service = new ServiceBuilder()
    .provider(VimeoApi.class)
    .apiKey(apikey)
    .apiSecret(apisecret)
    .build();

    Token token = new Token(accessToken, accessTokenSecret);

    OAuthRequest request = new OAuthRequest(Verb.GET, "http://vimeo.com/api/rest/v2");
//  request.addQuerystringParameter("method", "vimeo.videos.upload.getQuota");
    request.addQuerystringParameter("format", "xml");
    request.addQuerystringParameter("method", "vimeo.videos.upload.getTicket");
    request.addQuerystringParameter("upload_method", "post");
    service.signRequest(token, request);        
    System.out.println(request.getCompleteUrl());
    Response response = request.send();

     System.out.println("Got it! Lets see what we found...");
     System.out.println(response.getHeader("code"));
     System.out.println(response.getCode());
     System.out.println(response.getBody());
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:06:46.553

获得配额后尝试获得门票。我从来没有尝试在没有配额的情况下先获得票，因为他们的文档明确指出您需要在获得票之前检查配额。看起来你只是注释掉你没有测试的东西。试试这个：

```
public class VimeoServiceConcept {

public static void main(String[] args) {

    String apikey="api key";
    String apisecret="secret";
    String accessToken="access token";
    String accessTokenSecret="access token secret";

    OAuthService service = new ServiceBuilder().provider(VimeoApi.class).apiKey(apiKey).apiSecret(apiSecret).build();

    OAuthRequest request;
    Response response;

    accessToken = new Token("your_token", "your_tokens_secret");

    accessToken = checkToken(vimeoAPIURL, accessToken, service);
    if (accessToken == null) {
      return;
    }

    // Get Quota
    request = new OAuthRequest(Verb.GET, vimeoAPIURL);
    request.addQuerystringParameter("method", "vimeo.videos.upload.getQuota");
    signAndSendToVimeo(request, "getQuota", true);

    // Get Ticket
    request = new OAuthRequest(Verb.GET, vimeoAPIURL);
    request.addQuerystringParameter("method", "vimeo.videos.upload.getTicket");
    request.addQuerystringParameter("upload_method", "streaming");
    response = signAndSendToVimeo(request, "getTicket", true);
    //... the rest of your code...

   }
} 
```

这是检查令牌：

```
/**
  * Checks the token to make sure it's still valid. If not, it pops up a dialog asking the user to
  * authenticate.
  */
  private static Token checkToken(String vimeoAPIURL, Token vimeoToken, OAuthService vimeoService) {
    if (vimeoToken == null) {
      vimeoToken = getNewToken(vimeoService);
    } else {
      OAuthRequest request = new OAuthRequest(Verb.GET, vimeoAPIURL);
      request.addQuerystringParameter("method", "vimeo.oauth.checkAccessToken");
      Response response = signAndSendToVimeo(request, "checkAccessToken", true);
      if (response.isSuccessful()
              && (response.getCode() != 200 || response.getBody().contains("<err code=\"302\"")
              || response.getBody().contains("<err code=\"401\""))) {
        vimeoToken = getNewToken(vimeoService);
      }
    }
    return vimeoToken;
  } 
```

这是getNewToken：

```
/**
* Gets authorization URL, pops up a dialog asking the user to authenticate with the url and the user
* returns the authorization code
*
* @param service
* @return
*/
private static Token getNewToken(OAuthService service) {
  // Obtain the Authorization URL
  Token requestToken = service.getRequestToken();
  String authorizationUrl = service.getAuthorizationUrl(requestToken);
  do {
    String code = JOptionPane.showInputDialog("The token for the account (whatever)" + newline
            + "is either not set or is no longer valid." + newline
            + "Please go to the URL below and authorize this application." + newline
            + "Paste the code you're given on top of the URL here and click \'OK\'" + newline
            + "(click the 'x' or input the letter 'q' to cancel." + newline
            + "If you input an invalid code, I'll keep popping up).", authorizationUrl + "&permission=delete");
    if (code == null) {
      return null;
    }
    Verifier verifier = new Verifier(code);
    // Trade the Request Token and Verfier for the Access Token
    System.out.println("Trading the Request Token for an Access Token...");
    try {
      Token token = service.getAccessToken(requestToken, verifier);
      System.out.println(token); //Use this output to copy the token into your code so you don't have to do this over and over.
      return token;
    } catch (OAuthException ex) {
      int choice = JOptionPane.showConfirmDialog(null, "There was an OAuthException" + newline
              + ex + newline
              + "Would you like to try again?", "OAuthException", JOptionPane.YES_NO_OPTION);
      if (choice == JOptionPane.NO_OPTION) {
        break;
      }
    }
  } while (true);
  return null;
} 
```

这是signAndSend：

```
/**
* Signs the request and sends it. Returns the response.
*
* @param request
* @return response
*/
public static Response signAndSendToVimeo(OAuthRequest request, String description, boolean printBody) throws org.scribe.exceptions.OAuthException {
  System.out.println(newline + newline
          + "Signing " + description + " request:"
          + ((printBody && !request.getBodyContents().isEmpty()) ? newline + "\tBody Contents:" + request.getBodyContents() : "")
          + ((!request.getHeaders().isEmpty()) ? newline + "\tHeaders: " + request.getHeaders() : ""));
  service.signRequest(accessToken, request);
  printRequest(request, description);
  Response response = request.send();
  printResponse(response, description, printBody);
  return response;
} 
```

# vim - NERDTree - 如何删除文件

> ID：10615294
> 
> 赞同：49
> 
> 时间：2012-05-16T09:07:57.100
> 
> 标签：vim, nerdtree

如何使用 NERDTree: [vim plugin page](http://www.vim.org/scripts/script.php?script_id=1658)删除文件？

我已将其放入我的`.vimrc`文件中：

```
set modifiable 
```

但我不知道删除的命令！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-16T09:46:02.140

这 [如何在 Vim 中创建文件夹（优先使用 NERDTree）？](https://stackoverflow.com/questions/3102115/how-to-create-folders-in-vim-by-preference-using-nerdtree) 应该给出答案。只需`m`在 NERDTree 窗口中输入，QuickFix 窗口中就会出现一个对话框

[此外，在 nerdtree https://github.com/ivalkeen/nerdtree-execute](https://github.com/ivalkeen/nerdtree-execute)之上制作了一个插件，它允许使用`m`+执行文件`x`-> 我用它来打开我从编译 LaTeX 获得的 pdf

# network-programming - 相当于 ETH_P_ARP 的 IPv6

> ID：10615300
> 
> 赞同：0
> 
> 时间：2012-05-16T09:08:12.050
> 
> 标签：network-programming, ipv6

要以编程方式确定 IPv4 网关是否处于活动状态，可以使用以 ETH_P_ARP 作为协议的原始数据包套接字，如下所示：

```
int fd = socket (PF_PACKET, SOCK_RAW, ETH_P_ARP); 
```

我正在寻找与 ETH_P_ARP 等效的 IPv6 来使用类似的方式 ping IPv6 网关。还有哪些其他选项可以以编程方式实现？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:31:29.973

使用 wireshark，ND 请求和通告的协议只是 0x86DD，并且在 if_ether.h 中分配给 ETH_P_IPV6。

# windows-7 - 如何在 Windows 7 上的 ActiveSync 远程显示器上连接 Windows CE 以太网设备？

> ID：10615302
> 
> 赞同：0
> 
> 时间：2012-05-16T09:08:16.747
> 
> 标签：windows-7, windows-ce, activesync, remoteview

我有一个设备通过以太网电缆连接到我的 Windows 7 台式电脑。我的目标是远程查看设备并从我的电脑控制它。我在 XP 计算机上运行过这个，但在 Windows 7 机器上没有。我在网上研究过下载我已经完成的 Microsoft Windows Mobile Device Cente。我可以加载 ActiveSync 软件，但是这两个设备在远程查看器上没有通信。我还在我的台式计算机和 Windows CE 设备上输入了正确的 IP 地址。

提前感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:04:18.100

我通过下载[Windows Mobile Power Tools](http://www.microsoft.com/en-us/download/details.aspx?id=10601)解决了这个问题。一旦我下载了这个，我就运行了 Active Sync Remote Display (ASRDisp.exe)。

注意我必须先加载 Active Sync，然后在出现警告消息时单击忽略，然后我必须打开设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T14:12:17.940

我知道，这是一个古老的，已回答的问题。

不过，如果有人需要回答这个疑问：

> 我有一个 WinCE 设备通过以太网电缆连接到我的 Windows 7 台式电脑。我的目标是远程查看设备并从我的 PC 控制它。

请参阅[使用以太网 - Windows Embedded Compact 7 远程显示 WEC7 设备](http://wec7.blogspot.in/2014/02/remote-display-of-wec7-device-using.html)。

# security - Phonegap / Cordova：安全地存储密码？

> ID：10615306
> 
> 赞同：4
> 
> 时间：2012-05-16T09:08:25.570
> 
> 标签：security, encryption, cordova

我正在开发一个 Cordova 应用程序（此时仅适用于 iOS），我需要存储用于调用某些 Web 服务以检索数据的用户密码。

我一直在搜索这方面的信息，例如在这个[谷歌代码线程](http://groups.google.com/group/phonegap/browse_thread/thread/8786e0c4ce9107db)中，最后一个答案说在我的 phonegap localstorage 上存储未加密的密码是足够安全的......：

然后，在 Phonegap wiki 中，他们讨论了 iOS 的原生方法，但看起来它们已经被破解了，我不喜欢这个解决方案，因为它使我的应用程序代码依赖于平台。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:43:18.103

钥匙串插件可能是您最好的选择。

[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Keychain](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Keychain)

# html - IE9 不能在视频标签中播放 MP4

> ID：10615312
> 
> 赞同：1
> 
> 时间：2012-05-16T09:08:37.787
> 
> 标签：html, video, internet-explorer-9, mp4

我正在使用 CodeCanyon 的作品 - [http://codecanyon.net/item/html5-video-gallery-with-live-playlist-/490139](http://codecanyon.net/item/html5-video-gallery-with-live-playlist-/490139)创建画廊。这一切都在本地运行 WAMP，但是当我上传到服务器时，它不会在 IE9 中播放 MP4。我遇到了一个问题，即 Mime 类型不正确并且 ogv/mp4 返回纯文本，但现在已修复。

通过查看 IE9 中的网络选项卡，它加载了大约 2kb 的文件然后停止，我无法理解发生了什么（这在本地服务器上也可以正常工作）。

Webkit & Gecko 玩 OGV 很好。Safari 也可以正常播放视频。

[http://www.guildproperty.co.uk/videos/](http://www.guildproperty.co.uk/videos/)是网址。

```
Key Value
Response    HTTP/1.1 304 Not Modified
ETag    "355802a-1561d8e-4c013c59aa2c0"
Content-Length  22420878
Content-Type    video/mpeg
Last-Modified   Tue, 15 May 2012 14:10:59 GMT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:43:24.733

`Content-Type:` `video/mpeg`用于 MPEG-1 视频。对于 MP4，它应该是`video/mp4`.

# xcode - Xcode 4.3.1 - 切换到输出/控制台窗口快捷方式

> ID：10615318
> 
> 赞同：2
> 
> 时间：2012-05-16T09:08:49.043
> 
> 标签：xcode, console, keyboard-shortcuts

Xcode 4.3.1 中是否有一个键盘快捷键可以将我的光标放在输出/控制台窗口中。为了清楚起见，我想要一种将光标`(lldb)`放在输出/控制台窗口旁边的快速方法。

此外，将光标放回文本编辑器窗口的键盘快捷键也很方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-18T15:58:20.790

“Command + Shift + C”是 Xcode 7 的默认设置。

**编辑**：在 Xcode 9 中仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-07T19:27:30.987

为了完整起见，我添加了 Xcode 8 的快捷方式。转到`View->Debug Area`，在这里您将看到快捷方式命令：`Command+Shift+Y`在调试/控制台输出窗口区域和编辑器之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:29:49.127

原来是“Command + Option +。” 在包含文本编辑器和控制台的窗口之间循环。

# android - 在android中通过意图获取uri数据

> ID：10615319
> 
> 赞同：0
> 
> 时间：2012-05-16T09:08:55.190
> 
> 标签：android, html

嗨，我必须在 android 应用程序和浏览器之间建立连接。因此，在单击浏览器上的按钮时，它应该重定向到 android 应用程序。在我写的android活动中

```
Uri data = getIntent().getData(); 
        if (data.equals(null)) { 
            System.out.println("Data is null");
        } else { 
            String scheme = data.getScheme();
            System.out.println(scheme);
            String host = data.getHost(); 
            int port = data.getPort(); 
            List<String> params = data.getPathSegments();
            String first = params.get(0); // "hello"
            System.out.println(first); 
```

在清单中我已经给出了

```
<intent-filter>
                <data android:scheme="Integration" />
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter> 
```

在按钮上的 html 中单击我已经给出`<FORM METHOD="LINK" ACTION="Integration://1">`

它正在引发 indexoutofboundexception。请告诉我错误在哪里

**更新** **我在活动中不必要地使用了意图。通过删除 html5 中的 n 参数，我的应用程序现在可以成功运行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:13:35.577

引用来自：[如何侦听自定义 URI 的答案](https://stackoverflow.com/questions/3471503/how-to-listen-for-a-custom-uri)

> 要在您的 android 应用程序中注册协议，请在 AndroidManifest.xml 中添加一个额外的块

我稍微修改了代码，但我想我也会引用源代码

```
<manifest>
 <application>
   <activity android:name=".activityToCall">
           <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="scheme" android:host="path"/>
            </intent-filter>
   </activity>
 </application>
</manifest> 
```

Then when a url matching your schema is opened your app will be called to handle it I assume. Taking into consideration that `scheme` and `path`correspond to this:

```
scheme://host/path 
```

After that, in the activity you've set in the manifest to handle this stuff:

```
Uri data = getIntent().getData(); 
if (!data.equals(null)){ 
    String scheme = data.getScheme(); 
    //Or whatever you needed
} 
```

# iphone - 带有自定义 UIButton 的 UITableViewCell

> ID：10615320
> 
> 赞同：1
> 
> 时间：2012-05-16T09:08:58.227
> 
> 标签：iphone, objective-c, ios

我正在尝试在每个表格单元格中创建`UITableView`一个自定义项。`UIButton`我是这样实现的..

```
@implementation CouponDetailsCustomTableViewCell

          ...............

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        [self setBackgroundColor:[UIColor whiteColor]];

        CGRect frame = self.contentView.frame;

        self.radioButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [self.radioButton setImage:[UIImage imageNamed:@"radio_blank.png"] forState:UIControlStateNormal];
        [self.radioButton setImage:[UIImage imageNamed:@"radio_selected"] forState:UIControlStateSelected];
        [self.radioButton setFrame:CGRectMake(16, 10, 29, 29)];
        [self.radioButton addTarget:nil action:@selector(radioButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:radioButton];
}

@end 
```

和 UITableView 委托一样......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *COUPON_CELL_ID = @"CouponCell" ;

    CouponDetailsCustomTableViewCell * couponCell = (CouponDetailsCustomTableViewCell *) [tableView dequeueReusableCellWithIdentifier:COUPON_CELL_ID];
    if (couponCell == nil) {
        couponCell = [[[CouponDetailsCustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:COUPON_CELL_ID] autorelease];
        couponCell.selectionStyle = UITableViewCellSelectionStyleNone;

    }
    [couponCell.radioButton setSelected:NO];
    return couponCell;
} 
```

并且 radioButtonPressed 方法是

```
-(void)radioButtonPressed:(id) sender
{
     [sender setSelected:YES];
} 
```

现在我运行程序并`UIButton`在每个表格行中显示一个自定义。如果我单击一个按钮，它将被选中（显示`radio_selected.png`）。

当我向下滚动表格时出现问题（我在窗口中只显示了 4 行表格）。当我再次向上滚动时..我看到的是单击的按钮正在显示`radio_blank.png`。

我是 iPhone 开发的新手。我不知道为什么会这样。我能猜到的最多的是按钮属性正在改变 `setSelected:NO`......

有人请给我建议来解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:20:50.950

当您滚动 UITableView 时，隐藏的单元格不再呈现，并且可能会被重用于变得可见的单元格。如果一个新的单元格变得可见，`tableView:cellForRowAtIndexPath:`则被调用。

问题是您在那里设置**选定**的状态：

```
[couponCell.radioButton setSelected:NO]; 
```

因此，每当您将单元格滚动出可见区域并再次返回时，它都会重置为`selected = NO`.

我建议您创建一个`NSMutableDictionary`存储每行/NSIndexPath 的选择状态的位置，然后在`tableView:cellForRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:15:14.513

替换`[couponCell.radioButton setSelected:NO];`为`tableView:cellForRowAtIndexPath:`根据数据源中的状态设置所选属性的代码。

类似的东西：

```
/* get the button state from your data source */
FancyCouponObject *coupon = [self.coupons objectAtIndex:indexPath.row];
BOOL buttonState = coupon.buttonState;
[couponCell.radioButton setSelected:buttonState]; 
```

tableView 的单元格在移出屏幕时会被重用。您无法在其中保存状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:21:05.537

问题是，当您滚动表格时，您的`cellForRowAtIndexPath:`委托方法为每一行调用......所以在这里当它调用时，您的`setSelected`方法调用没有像下面这样的参数......

[couponCell.radioButton setSelected:NO];

因此，当您在 setSelected 方法调用时滚动表格并且您的按钮与 radio_blank.png 一起转动时... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:13:26.567

```
-(void)radioButtonPressed:(id) sender
{
     [sender setSelected:YES];
} 
```

在此方法中，您将按钮设置为选中状态，对于选中的按钮，您已设置 radio_blank.png 图像

# javascript - Jquery，在用户控件中获取标签值

> ID：10615321
> 
> 赞同：2
> 
> 时间：2012-05-16T09:09:01.227
> 
> 标签：javascript, jquery, asp.net, jquery-selectors

我需要使用来自用户控件标签的值在 asp.net 页面中进行计算。

用户控件标签为：

```
 <asp:Label ID="LblInvoicePriceValue" runat="server" ></asp:Label> 
```

我像这样包括它：

```
<Controls:VehicleInformation ID="VehicleInformationControl" runat="server" /> 
```

我的 jquery 函数类似于：请参阅第 1 点和第 2 点。

```
<script type="text/javascript">
        $(document).ready(function () {
            alert('call function to do calculation here');
            // 1\.   Find in the vehicle information user control the invoiced ammount label
            // 2\.   Find the vat excluded value **after** it was typed in the textbox
            // 3\.   If invoiced ammount is greater than zero, then
            // 3.a  Find Label Percentage 
            // 3.b  Label.Text = (AmmountWithoutVat/InvoicedAmmount)*100 + '%'
        });
  </script> 
```

**生成的 HTML：UPdate1**

对于标签：

```
 <span id="MainContent_VehicleInformationControl_LblInvoicePriceValue" class="bold"></span> 
```

对于文本框：

```
<input name="ctl00$MainContent$TxtVatExcluded" type="text" id="TxtVatExcluded" class="calculation" /> 
```

**更新 2：**

```
<script type="text/javascript">
        $(document).ready(function () {
            alert('call function to do calculation here');

            $("#TxtVatExcluded").keypress(function() {
                var invoiceprice = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
                var vatexcluced = $("#TxtVatExcluded").val();
                var lblPercentage = $("#MainContent_LblPercentage");
                if (invoiceprice > 0) {
                    lblPercentage.text((vatexcluced / invoiceprice) * 100);
                }
            })

            // 1\.   Find in the vehicle information user control the invoiced ammount label
            // 2\.   Find the vat excluded value after it was typed in the textbox
            // 3\.   If invoiced ammount is greater than zero, then
            // 3.a  Find Label Percentage 
            // 3.b  Label.Text = (AmmountWithoutVat/InvoicedAmmount)*100 + '%'
        });
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:17:41.433

```
var label_text = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
$("#TxtVatExcluded").val(label_text); 
```

**更新** 如果您想检查文本字段是否为空白，则只需复制标签，然后使用以下代码

```
var label_text = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
var txt = $("#TxtVatExcluded").val();
if(txt.length==0)
{
  $("#TxtVatExcluded").val(label_text);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T09:16:39.343

您可以使用元素的渲染 ID 来使用 jQuery 获取值

```
var lbl = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
var tbox = $("#TxtVatExcluded").val(); 
```

稍后当计算完成时，您可以将标签文本更新为

```
$("#MainContent_VehicleInformationControl_LblInvoicePriceValue").html("new label"); 
```

### 更新：

要使用用户类型的逻辑，您必须将函数绑定到`keypress`//`keyup`事件`keydown`

```
$("#myinputbox").keypress(function() {
    var lbl = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
    var tbox = $("#TxtVatExcluded").val();
    //... so on
} 
```

### 更新 2：

由于您正在尝试使用这些值进行计算，因此首先确保有数字会更安全。为此，您可以`parseInt()`根据`parseFloat()`需要使用 。

```
 $("#TxtVatExcluded").keypress(function() {
            var invoiceprice = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
            var vatexcluced = $("#TxtVatExcluded").val();
            var lblPercentage = $("#MainContent_LblPercentage");
            if (invoiceprice > 0) {
                lblPercentage.text((parseInt(vatexcluced) / parseInt(invoiceprice)) * 100);
            }
        }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T09:18:04.573

这将为您提供标签控件的值：

```
function Calculate()
{
    var InvoicedAmmount = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
    var AmmountWithoutVat = $("#TxtVatExcluded").val();

    var Result = (AmmountWithoutVat/InvoicedAmmount)*100

    $("#OutputLabel").html(Result + " %");
} 
```

您可以将 onBlur 事件附加到您的文本框以在它们离开文本框时触发您的计算 - 您真的不想在他们输入时重新计算数量。

```
$(document).ready(function () 
{ 
    $("#TxtVatExcluded").bind("blur",function(){ Calculate(); });
} 
```

# iphone - iPhone - 如何下载大量文件

> ID：10615323
> 
> 赞同：0
> 
> 时间：2012-05-16T09:09:05.810
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我需要从服务器下载一些文件。最好的方法是什么？所有文档都存储在 NSMutableArray 中，每个文档都有两个文件 - 文档本身及其更改日志。所以我要做的是：

```
- (void)downloadDocuments:(int)docNumber
{
    NSString *urlString;
    NSURL *url;   
    for (int i=0; i<[items count]; i++) {
        [progressBar setProgress:((float)i/[items count]) animated:YES];
        urlString = [[items objectAtIndex:i] docUrl];
        url = [[NSURL alloc] initWithString:[urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];
        [self downloadSingleDocument:url];
        urlString = [[items objectAtIndex:i] changeLogUrl];
        url = [[NSURL alloc] initWithString:[urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];
        [self downloadSingleDocument:url];
    }
    urlString = nil;
    url = nil;
    [self dismissModalViewControllerAnimated:YES];
}

- (void)downloadSingleDocument:(NSURL *)url
{
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    [req addValue:@"Basic XXXXXXX=" forHTTPHeaderField:@"Authorization"];
    downloadConnection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
}

- (void)connection:(NSURLConnection *)conn didReceiveResponse:(NSURLResponse *)response
{
    if (conn == downloadConnection) {
        NSString *filename = [[conn.originalRequest.URL absoluteString] lastPathComponent];
        filename = [filename stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

        filePath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:filename];
        [[NSFileManager defaultManager] createFileAtPath:filePath contents:nil attributes:nil];

        file = [[NSFileHandle fileHandleForUpdatingAtPath:filePath] retain];
        if (file)
        {
            [file seekToEndOfFile];
        }
    }

}

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    if (conn == downloadConnection) {
        if (file) { 
            [file seekToEndOfFile];
        }
        [file writeData:data];
    }

}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{

    if (conn==downloadConnection) {
        [file closeFile];
    }
} 
```

我的问题是只下载了最后一个文件。关于我做错了什么有什么建议吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:27:20.843

问题是你用一个新的 NSURLConnection 实例（通过方法调用 downloadSingleDocument）在你的循环中“覆盖”了成员变量“downloadConnection”。这样做会导致 didReceiveResponse、didReceiveData 和 connectionDidFinish 方法中的 if 语句只会在最新创建的连接中评估为 true。尝试使用连接列表来避免这种情况。

# extjs - ExtJS 4 在使用 filterFn 函数时返回商店的记录

> ID：10615324
> 
> 赞同：0
> 
> 时间：2012-05-16T09:09:07.420
> 
> 标签：extjs

我有一个简单`textfiled`的方法，用于通过获取插入的值并将过滤器添加到存储中来在我的网格中搜索，如下所示：

```
instructionSearchField: function(field, e) {
        if (e.getKey() == e.ENTER) {
            var searchTxt = this.getValue();

            this.recordsStore = Ext.data.StoreManager.lookup('Instructions');
            this.recordsStore.clearFilter(true);
            this.recordsStore.filter({
                filterFn: function(item) { 
                    return item.get('title').toLowerCase().indexOf(searchTxt.toLowerCase()) != -1;
                        }
                    });
            this.recordsStore.load();
            }
        }, 
```

因此，用户可以随心所欲地进行搜索 - 它可以正常工作。问题是在某些时候我想返回过滤/搜索之前的网格状态。从服务器加载它并不容易，所以我想知道 ExtJS4 中是否有一种方法可以返回商店的开始状态，当上面的本地过滤器被多次使用时？对我来说最简单的方法是只返回商店的基本状态然后加载它，但我在文档中没有找到这样的东西 - 有没有办法做到这一点？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:09:38.500

如果您不使用远程过滤（如您的服务器过滤记录并仅返回匹配集），您不需要`load()`在应用过滤器后执行此操作。这是基本的工作流程：

*   `store.load()`- 之后您的本地副本包含数据库中的所有记录
*   `store.filter(...)`- 您存储的内存中仍有所有记录，但您只能访问与您的过滤器匹配的记录
*   `store.clearFilter()`- 您再次存储显示所有记录，您可以再次应用不同的过滤器（请注意，`load()`操作仅执行一次）

# android - Adobe AIR 和 Google Play 不兼容的设备阻塞

> ID：10615325
> 
> 赞同：0
> 
> 时间：2012-05-16T09:09:08.037
> 
> 标签：android, air, adobe

如何阻止 Adob​​e Air 不兼容的设备不在 Google Play 上显示 apk（在此设备上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:11:14.550

您可以访问本机清单“Main-app.xml”，您可以在其中添加所需的限制。例如最低 SDK 版本等。Google Play 将自动仅向设备显示您的应用程序满足您的要求

# r - 从向量中绘制带有希腊符号的轴标签

> ID：10615334
> 
> 赞同：6
> 
> 时间：2012-05-16T09:09:26.153
> 
> 标签：r, plot, label, symbols

我正在努力尝试将希腊符号绘制为轴标签。由于要循环几个不同比例的图，我想使用一个包含符号名称的向量，而不是在 中使用符号名称`expression()`，这样可以正常工作：

```
x <- rnorm(10, 5,6)
y <- rnorm(10, 2,1)
xlab <- expression(paste(mu, "mol/mol"))
plot(x,y, xlab = xlab) 
```

出于某种原因，我不能用包含符号名称的向量替换“mu”：

```
k <- "mu"
xlab <- expression(paste(get(k), "mol/mol"))
plot(x,y, xlab = xlab) 
```

我发现了一个类似的[问题](https://stackoverflow.com/questions/4973898/combining-paste-and-expression-functions-in-plot-labels)，但对函数有效的方法似乎不适用于希腊符号：

```
ylab <- substitute(paste(nn, "mol/mol"), list(nn=k))
xlab <- bquote(.(k) * "mol/mol")

plot(x,y, ylab = ylab, xlab = xlab) 
```

我做错了什么？如何通过向量将希腊符号转换为轴标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:47:58.227

尝试这个：

```
xlab = parse(text=paste(k, "*mol/mol")) 
```

# android - 在图像上显示单词或特定字符串

> ID：10615336
> 
> 赞同：0
> 
> 时间：2012-05-16T09:09:52.423
> 
> 标签：android, image

我正在创建一个应用程序，当我触摸人类时，它会显示不同的部件名称。![在此处输入图像描述](../Images/accfae1d54caf014c12e7af4ab10b972.png)

我的主要活动课程如下......

```
 public class VideosActivity extends Activity implements OnTouchListener {
        //DrawView draw;
        float a=0;
        float b=0;
        ImageView image;
        MotionEvent event;
        Button  back ;
        Button next;
        TextView t;
        String info = "";
        int count =0;
        FirstImage i;
        ViewFlipper c;
        Infoview v;
        String huma="human";
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
             setContentView(R.layout.videos_layout);
             i=new FirstImage(this);
             v=new Infoview(this);
             c=(ViewFlipper) findViewById(R.id.viewFlipper1);
             back = (Button) findViewById(R.id.button1);
             next = (Button) findViewById(R.id.button2);
             t=(TextView) findViewById(R.id.textView1);
             if(count==0)
                i.changeImage(R.drawable.human ); 
             i.invalidate();
             c.addView(i,0);
             c.setOnTouchListener(this);
                c.onTouchEvent(event);
             addListenerOnButton();

    }

 public void pageinfo(float a,float b){

        t.setText(Float.toString(a)+"x"+Float.toString(b)+"y");
        if(i.getSrc()==R.drawable.human){
            v.updateInfo(huma, a, b);
            i.invalidate();
            v.invalidate();
        }
    }

    public boolean onTouch(View v, MotionEvent me) {
        // TODO Auto-generated method stub
        switch(me.getAction()){
        case MotionEvent.ACTION_DOWN:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        case MotionEvent.ACTION_MOVE:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        case MotionEvent.ACTION_UP:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        case MotionEvent.ACTION_OUTSIDE:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        default: return false;
        }
        return true;

    }
    } 
```

用于在图像上显示文本的另一个类 infoView 无法正常工作.....

```
public class Infoview extends View {

 String info = "";
 float x = 0; //init value 
 float y = 0; //init value
 int color = Color.WHITE;

 public Infoview(Context context) {
  super(context);
  // TODO Auto-generated constructor stub
 }

 public Infoview(Context context, AttributeSet attrs) {
  super(context, attrs);
  // TODO Auto-generated constructor stub
 }

 public Infoview(Context context, AttributeSet attrs, int defStyle) {
  super(context, attrs, defStyle);
  // TODO Auto-generated constructor stub
 }

 @Override
 protected void onDraw(Canvas canvas) {
  // TODO Auto-generated method stub
  super.onDraw(canvas);

  Paint paint = new Paint();
  paint.setStyle(Paint.Style.FILL_AND_STROKE);
  paint.setColor(color);
  paint.setStrokeWidth(2);
  paint.setTextSize(30);

  canvas.drawLine(x-10, y, x+10, y, paint);
  canvas.drawLine(x, y-10, x, y+10, paint);
  canvas.drawText(info, x, y, paint);

 }

 public void updateInfo(String t_info, float t_x, float t_y){
  info = t_info;
  x = t_x;
  y = t_y;
  invalidate();
 }

 public void clearInfo(){
  info = "";
  x = 0;
  y = 0;
  invalidate();
 }

} 
```

它没有显示任何输出....

# c# - C#如何打开excel文件（如果存在），如果不存在则从WinForm创建excel文件？

> ID：10615339
> 
> 赞同：0
> 
> 时间：2012-05-16T09:09:54.290
> 
> 标签：c#, excel

我正在制作一个适用于 Excel 文件的程序。我需要它来尝试打开现有的 Excel 文件，或者如果它不存在则创建一个新文件，用于读取和写入选项。我必须在不使用 OleDb 的情况下做到这一点。所以问题是，当我单击按钮时，它会尝试创建一个新的 Excel 文件，即使我已经在目录中拥有该文件。有想法该怎么解决这个吗？所有用户输入都必须从 WinForm 完成。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace test2
{
    public partial class Form1 : Form
    {
        Microsoft.Office.Interop.Excel.Application oXL;
        Microsoft.Office.Interop.Excel._Workbook oWB;
        Microsoft.Office.Interop.Excel._Worksheet oSheet;
        Microsoft.Office.Interop.Excel.Range oRng;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        FileInfo fi = new FileInfo(@"C:\Users\User\Desktop\data.xls");
        if (!fi.Exists)
        {
            oXL = new Microsoft.Office.Interop.Excel.Application();
            oXL.Visible = true;
            oWB = (Microsoft.Office.Interop.Excel._Workbook)(oXL.Workbooks.Add(System.Reflection.Missing.Value));
            oSheet = (Microsoft.Office.Interop.Excel._Worksheet)oWB.ActiveSheet;

            oSheet.Cells[1, 1] = "First Name";
            oSheet.Cells[1, 2] = "Last Name";
            oSheet.Cells[1, 3] = "Full Name";
            oSheet.Cells[1, 4] = "Age";

            oSheet.get_Range("A1", "D1").Font.Bold = true;
            oSheet.get_Range("A1", "D1").VerticalAlignment =
            Microsoft.Office.Interop.Excel.XlVAlign.xlVAlignCenter;      
        }
        else
        {
            Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
            string myPath = (@"C:\Users\User\Desktop\data.xlsx");
            excelApp.Workbooks.Open(myPath);
            excelApp.Visible = true;                
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
} 
```

}

另外，如果有人能给我一个代码示例，用于在不与用户交互的情况下保存和关闭 Excel 文件，我将不胜感激。用户输入数据然后单击按钮，它将自动保存并关闭 Excel 文档，而不会向用户显示任何弹出窗口。

```
Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
            string myPath = (@"C:\Users\User\Desktop\data.xlsx");
            excelApp.Workbooks.Open(myPath);
            excelApp.Visible = false;
            int rowIndex = 2; int colIndex = 2;
            excelApp.Cells[rowIndex, colIndex] = textBox1.Text;
            //how do I save workbook?
            //how do I colose Workbook? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:24:59.273

首先，如果您碰巧拥有 Visual Studio 的新版本（例如 2010），我绝对建议您使用 Visual Studio Tools for Office ( **VSTO** )。您可以在该框架内创建 Excel 项目并加快开发时间。如果您想了解更多信息，请查看此处：http: [//msdn.microsoft.com/en-US/office/hh133430.aspx](http://msdn.microsoft.com/en-US/office/hh133430.aspx)

要回答有关从 WinForm 应用程序保存 Excel 工作簿的问题，您可以执行以下操作：

```
excelApp.ScreenUpdating = false;
excelApp.DisplayAlerts = false;

excelApp.ActiveWorkbook.Save();

excelApp.ScreenUpdating = true;
excelApp.DisplayAlerts = true; 
```

希望这会有所帮助，但如果还有其他内容，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T08:39:42.777

```
excelWorkbook.SaveAs(filePath, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Excel.XlSaveAsAccessMode.xlExclusive, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
excelWorkbook.Close();
excelApp.Quit(); 
```

# dotnetnuke - DotNetNuke 'TrueFalse' 配置文件属性标签

> ID：10615341
> 
> 赞同：1
> 
> 时间：2012-05-16T09:09:55.997
> 
> 标签：dotnetnuke

默认情况下，DotNetNuke 'TrueFalse' 配置文件属性显示两个带有“True”和“False”标签的单选按钮。有没有办法重命名这些标签，例如，它们会说“是”和“否”之类的东西？

像这样：http: [//img837.imageshack.us/img837/5773/profileproperty.jpg](http://img837.imageshack.us/img837/5773/profileproperty.jpg)

用户配置文件属性具有布尔标签似乎有点奇怪，所以我假设这必须以某种方式可定制。我就是看不出来怎么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:34:35.777

自定义 DNN 中的几乎所有标签都是通过门户中的本地化（语言）功能完成的。我会在 DNN 网站上的 wiki 上查看详细信息（我不确定您正在查看的标签在哪里）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T19:55:17.773

您可以使用 jquery 设置或仅更改 TrueFalse 数据类型默认标签。

我对我的一个项目使用了相同的程序。

```
var genderCount = 1;
$('#dnn_ctr632_Register_userForm_a304ec533c1ae2f23db908fa1cc294c5 .dnnFormInput').each(function () {
        if (genderCount===1)
            $(this).html('Women');
        else {
            $(this).html('Men');
        }
        genderCount++;
    }); 
```

# java - Android - 帮助我使用 ArrayList

> ID：10615342
> 
> 赞同：0
> 
> 时间：2012-05-16T09:09:59.430
> 
> 标签：java, android, xml, xml-parsing

我这里有问题。我想测试我的解析器结果。

我有一个从请求到谷歌地图的 KML 文档。这是我的 KML 文档：

```
<Placemark>
<name>Head north on Jalan Kebagusan Raya toward Jalan Anggrek</name>
<description><![CDATA[go 850&#160;m]]></description>
<address>Jalan Kebagusan Raya</address>
....
....
....
</Placemark> 
```

我想将标签保存`<name>`到我的变量中。你能帮我解决我的问题吗？从解析结果中保存字符串、int 甚至 double 很容易。但是要保存类似“在 Jalan Kebagusan Raya 向北向 Jalan Anggrek 行驶”这样的句子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:19:21.997

这是相同的示例链接

[https://github.com/frogermcs/RoutePathExample](https://github.com/frogermcs/RoutePathExample)

# iphone - 显示日期选择器/组合框而不是键盘

> ID：10615355
> 
> 赞同：1
> 
> 时间：2012-05-16T09:10:43.693
> 
> 标签：iphone, titanium

我有一个包含多个文本字段的表单。大多数这些文本字段在单击时会通过以预期方式显示键盘来产生标准行为。

但是，当单击其中一些文本字段时，我想通过显示以下任一方式来覆盖标准行为：

```
1) A datepicker, or
2) A Combobox 
```

**问题 1：**

如何覆盖标准行为并显示日期选择器/组合框而不是默认键盘？

**问题2：**

我目前的情况是，屏幕上可能同时显示键盘和日期选择器/组合框（键盘位于日期选择器/组合框之上，反之亦然）。如何防止这种情况发生，因为在任何给定时间都应该只显示一个或另一个（默认键盘或日期选择器/组合框）。

PS 我在这个网站上查看了其他类似的问题，但他们似乎没有回答我的问题。

任何意见/建议表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:24:42.573

Implement textfiled delegates and in the delegate method

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField  
{  
   //Check the textfield for which you want to display date picker
    if(textField == datePickerTextField)
    {
       [self showDatePicker];
       return NO; //to disallow editing i.e it will not open keyboard
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:21:07.430

这可以通过技巧来实现。要隐藏显示键盘，请在文本字段中设置此属性。

```
enabled:false 
```

并使用文本字段单击事件来显示日期选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:48:09.147

首先，您需要创建文本字段。然后它的编辑事件模糊该文本字段并打开您的日期选择器或组合框。这就是在 Titanium 中隐藏键盘和显示日期选择器的方法。

# symfony - 使用 FOSUserBundle 在同一登录时只允许一个连接

> ID：10615363
> 
> 赞同：0
> 
> 时间：2012-05-16T09:11:01.120
> 
> 标签：symfony, connection, fosuserbundle

感谢 Symfony2 和 FOSUserBundle，我正在创建一个网站。

我试图在同一登录名上拒绝多个连接（例如来自不同的计算机）。我有 2 个解决方案：

*   创建一个关于身份验证的事件监听器，但我没能成功。（即使有食谱）。
*   覆盖 login_check 方法，但如果我这样做，我的 FOSUserBundle 将不起作用。

你有更好的选择吗？或者有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:33:10.827

终于明白了 只需进行最后一次更新即可解决所有问题。您需要向 User 实体添加其他字段。sessionId（字符串）。然后像这样更新您的 LoginListener 类：

```
// YourSite\UserBundle\Listener\YourSiteLoginListener.php

//...
public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
{
    $request = $event->getRequest();
    $session = $request->getSession();
    $user = $event->getAuthenticationToken()->getUser();
    $has_session = is_file ( '/path_to_your_php_session_file/'.'sess_'.$user->getSessionId() );

    if($user->getLogged() && $has_session){
        throw new AuthenticationException('this user is already logged');
    }else{
        $user->setLogged(true);
        $user->setSessionId($session->getId());
        $this->userManager->updateUser($user);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:12:20.047

也许这将帮助人们解决这个问题。

这是一种解决方案，但仍然存在问题：如果用户会话被 php 杀死（例如，在没有采取行动的时间太长之后），您将不得不进入数据库将“记录”值重置为 0。

所以我的解决方案是：

- 将字段“记录”（布尔）添加到您的用户实体。

-in YourSite\UserBundle\Listener 创建一个：YourSiteLoginListener.php 与此代码

```
namespace YourSite\UserBundle\Listener;

use FOS\UserBundle\Model\UserManagerInterface;
use FOS\UserBundle\Model\UserInterface;
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\SecurityContext;

class YourSiteLoginListener
{
private $userManager;

    public function __construct(UserManagerInterface $userManager)
    {
        $this->userManager = $userManager;
    }

    public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
    {   
        $user = $event->getAuthenticationToken()->getUser();

        if($user->getLogged()){
            throw new AuthenticationException('this user is already logged');
        }else{
            $user->setLogged(true);
            $this->userManager->updateUser($user);
        }   
    }
} 
```

- 然后在同一目录中，创建一个注销处理程序：YourSiteLogoutHandler.php

命名空间 YourSite\UserBundle\Listener;

```
use FOS\UserBundle\Model\UserManagerInterface;
use FOS\UserBundle\Model\UserInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Http\Logout\LogoutHandlerInterface;

class YourSiteLogoutHandler implements LogoutHandlerInterface
{
    private $userManager;

    public function __construct(UserManagerInterface $userManager)
    {
        $this->userManager = $userManager;
    }

    public function logout (Request $request, Response $response, TokenInterface $token){
        $user = $token->getUser();
        if($user->getLogged()){
            $user->setLogged(false);
            $this->userManager->updateUser($user);
        }
    }
} 
```

-finaly 在您的 app/config.yml 中声明这些服务，例如：

```
services:
    yoursite_login_listener:
        class: YourSite\UserBundle\Listener\YourSiteLoginListener
        arguments: [@fos_user.user_manager]
        tags:
            - { name: kernel.event_listener, event: security.interactive_login, method :onSecurityInteractiveLogin }

    yoursite_logout_handler:
        class: YourSite\UserBundle\Listener\YourSiteLogoutHandler
        arguments: [@fos_user.user_manager] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T11:37:13.370

在 Symfony3 中，注销处理程序不是由上面的代码触发的。我重建代码，以便在用户注销时更新系统。

```
namespace YourSite\UserBundle\Listener;

use FOS\UserBundle\Model\UserManagerInterface;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\Security\Http\Logout\LogoutSuccessHandlerInterface;

class LogoutSuccessHandler implements LogoutSuccessHandlerInterface
{
    private $userManager;

    public function __construct(UserManagerInterface $userManager)
    {
        $this->userManager = $userManager;
    }

    public function onLogoutSuccess(Request $request){
        global $kernel;
        $user = $kernel->getContainer()->get('security.token_storage')->getToken()->getUser();
        if($user->getLogged()){
            $user->setLogged(false);
            $this->userManager->updateUser($user);
        }
        $referer = $request->headers->get('referer');

        return new RedirectResponse($referer);      
    }
} 
```

# html - 如何将跨度与文本和图像垂直对齐

> ID：10615365
> 
> 赞同：9
> 
> 时间：2012-05-16T09:11:10.037
> 
> 标签：html, css, vertical-alignment

我现在一直在寻找几个小时（显​​然不是在正确的地方！）

请考虑这个示例：http: [//jsfiddle.net/DYLs4/9/](http://jsfiddle.net/DYLs4/9/)

```
<div id="wrapper">
    <span id="text24">Text 24</span>
    <span id="text12">Text 12</span>
    <span id="icon"></span>
</div> 
```

CSS：

```
#text24{
    font-size:24px; color:#999;   
}
#text12{
    font-size:12px; color:#000;  
}
#icon{
    height:36px; width:36px;
    display:inline-block;
    background:url(some-icon.png);
}​ 
```

​​​ ![结果](../Images/b3a709bb9cb630b39b4af3aded62ed3b.png)

我想要实现的是：

*   text24 垂直居中（相对于图像）
*   将 text12 的底部与 text24 的底部对齐
*   确保整个事情在 IE6 -> chrome 中工作

![目标](../Images/4c038e580ee30bc16e081ef545f7f5c2.png)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T09:17:18.337

添加`vertical-align: middle`到您的图像。

**编辑**

根据评论，此解决方案还需要**display:inline-block;** .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:44:34.187

这是有效的

[http://jsfiddle.net/rizwanabbasi/frsA5/1/](http://jsfiddle.net/rizwanabbasi/frsA5/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:19:13.120

我知道大多数设计师讨厌使用表格进行布局，但还是让我试试吧。您可以使用`valign`表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:33:38.840

最后结果

[http://jsfiddle.net/rizwanabbasi/frsA5/](http://jsfiddle.net/rizwanabbasi/frsA5/)

```
<div id="wrapper">
    <span id="text24">Text 24</span>
    <span id="text12">Text 12</span>
    <img src="http://www.adlittle.com/fileadmin/templates/images/rss_feed_icon.png" id="icon"/>
</div>

#wrapper{
    position:absolute; left:0;
}
#text24{
    font-size:24px; color:#999; font-weight:bold;
}
#text12{
    font-size:12px; color:#000; font-weight:bold; }
#icon{
    height:36px; width:36px;
    display:inline;
    vertical-align:middle;
    } 
```

# drupal - Drupal 唯一登录

> ID：10615370
> 
> 赞同：1
> 
> 时间：2012-05-16T09:11:31.127
> 
> 标签：drupal, login, single-sign-on

我在同一服务器实例 1 和具有不同数据库的实例 2 上有两个 Drupal 实例。我想做以下功能，所以我会继续我的工作。

1.  两个实例的唯一登录名。当我登录到实例 1 时，如果我在同一个浏览器上打开实例 2 的 url，那么它不应该要求我登录。
2.  在实例 1 或实例 2 上执行任何添加/更新操作时，应在两个数据库中更新用户表。

请让我知道，所以我会继续。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:49:08.433

如果你在那里，我会使用 Drupal 的 openid (oAuth) 技术。这可以通过一些小的编码甚至几个模块来完成。
这将允许您创建链接帐户，但为每个站点创建不同的配置文件。您将拥有类似于 stackexchange 网络中的设置和一些附加功能。

**编辑**：有一个名为[OpenID URL](http://drupal.org/project/openidurl)的模块。它将使您的用户能够将他们的个人资料页面用作 OpenID URL。你可以用一点点编码来做到这一点。
然后，您可以简单地从您的其他站点复制“Loin with OpenID”URL 并将其命名为“创建加入帐户...”或类似名称。

如果您想要更高级的连接，您可以使用 oAuth 技术。

也有可能创建一个多站点网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:06:56.510

我还没有尝试过这个模块，但它听起来很有希望，可以解决你问题的第一部分：[project bakery](http://drupal.org/project/bakery)。

> Bakery 为位于同一二级域（即 example.com、subsite.example.com、subsite2.example.com）上的基于 Drupal 的站点提供“单点登录”功能。它还可以为实现相同 Web cookie、xmlrpc 和 POST 方法的任何其他网站提供支持。

对于第二部分，我对解决方案非常感兴趣。目前我唯一能想到的就是某种 RSS 提要。我知道您可以基于此创建节点。

# java - 我似乎无法让我的程序崩溃以获得我想要的错误

> ID：10615374
> 
> 赞同：1
> 
> 时间：2012-05-16T09:11:59.640
> 
> 标签：java

我的任务说要尝试并抓住这个：

*   如果用户没有输入至少 3 个令牌
*   如果用户没有为令牌一和三输入有效数字。

我尝试对其进行研究，但似乎找不到会发生这种情况的异常。现在我的例外似乎适用于上述两个条件，但我的教练希望我有两个捕获，而不是一个。

我希望能够使该程序崩溃，以便我最终可以再次抛出并捕获或修改该程序，以便异常会专门捕获一件事（仅当用户未输入至少 3 个令牌时）。

顺便说一句，如果我尝试执行上述任一操作来使该程序崩溃，它总是会给我错误消息，因此它显然涵盖了我上面的两件事。

我的例外涵盖了我需要捕获的两件事，但我需要两个捕获，而不是一个。

```
import java.util.NoSuchElementException;
import java.util.Scanner;
import java.util.StringTokenizer;
public class Driver {
    public static void main (String[] args) {
        Scanner sc = new Scanner(System.in);
        StringTokenizer st;
        String input, tok1, tok2, tok3;
        double dtok1, dtok3;
        boolean loop = true;

        //input
        System.out.println("Simple calculator program");
        System.out.println("This program will only except a math expression with");
        System.out.println("2 operands and 1 operator. Exceptable operators");
        System.out.println("are +, -, *, /, and %. For example, 2*3 or 6%4.");
        while (loop) {
            System.out.print("\nplease enter an expression or q to quit: ");
            try {
                input = sc.next();

                if (input.equalsIgnoreCase("q")) {
                    loop = false;
                } else {
                    //calculations
                    st = new StringTokenizer(input,"+-*/%",true);
                    tok1 = st.nextToken();
                    tok2 = st.nextToken();
                    tok3 = st.nextToken();
                    dtok1 = Double.parseDouble(tok1);
                    dtok3 = Double.parseDouble(tok3);
                    System.out.println(input + "=" + 
                    singleExpression(dtok1,dtok3,tok2));
                }
            } catch (Exception NoSuchElementException) {
                System.out.println ("Error! Please enter 2 operands and 1 operator!");
            }
        }
    }

    static double singleExpression (double num1, double num2, String operator) {
        double output = 0.0;
        if (operator.equals("+")) {
            output = num1 + num2;
        } else if (operator.equals("-")) {
            output = num1 - num2;
        } else if (operator.equals("*")) {
            output = num1 * num2;
        } else if (operator.equals("/")) {
            output = num1 / num2;
        } else if (operator.equals("%")) {
            output = num1 % num2;
        } else {
            output = 0;
        }
        return output;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:19:05.647

[`st.nextToken()``NoSuchElementException`](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html#nextToken%28%29)如果此标记器的字符串中没有更多标记，[将抛出 a 。](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html#nextToken%28%29)你已经看到了。

[`Double.parseDouble``NumberFormatException`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)如果字符串不包含可解析的双精度数，[将抛出 a 。](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)

2 条评论：

*   [StringTokenizer 是一个遗留类](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)（虽然没有被弃用）——你可以使用它`String#split`。
*   你的 catch 子句看起来像：`catch (NoSuchElementException e)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:28:08.000

我认为您使用异常类作为变量名，应该是Class var。

异常会捕获任何东西（数字和少数元素）

```
try{
..
}  catch (NoSuchElementException nse) {
    System.out.println ("Exception for the String Tokenizer");
}catch (NumberFormatException nfe) {
    System.out.println ("Exception for the Number format");
}
catch (Exception otherException) {
    System.out.println ( "Something else.. " + otherException.getMessage() );
} 
```

# javascript - （如何）我可以直接在 Javascript 中访问 struts 操作字段吗？

> ID：10615375
> 
> 赞同：1
> 
> 时间：2012-05-16T09:12:07.540
> 
> 标签：javascript, struts2

我以前使用隐藏变量来实现这一点。但出于安全原因，我想删除隐藏变量，因此我必须能够在不使用隐藏字段的情况下访问操作字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:46:13.703

您可以使用以下操作字段初始化 js 变量 -

```
<script>
var item = '<s:property value="item" />';
....
</script> 
```

其中 Action 类有一个`getItem()`方法。

# spring - 使用 ServletContextListener 进行单元测试

> ID：10615377
> 
> 赞同：2
> 
> 时间：2012-05-16T09:12:09.643
> 
> 标签：spring, unit-testing, servlets, listener

我有一个 ServletContextListener 来初始化我的数据库。我已经在我的 web.xml 中添加了它：

```
<listener>
   <listener-class>util.MySessionListener</listener-class>
</listener> 
```

当我启动服务器时，一切都很好。

但是当我运行我的 AbstractTransactionalJUnit4SpringContextTests-tests 时，它不会被调用。我能做些什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T16:41:16.357

这是[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)还是[`HttpSessionListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)？你的命名令人困惑。

不过，只需在以下位置运行`@Before`：

```
MockServletContext mockServletContext = new MockServletContext()
new MySessionListener().contextInitialized(
  new ServletContextEvent(mockServletContext)
) 
```

春天[`MockServletContext`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/mock/web/MockServletContext.html)从何而来。如果您的侦听器使用[`WebApplicationContextUtils`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html)，您将需要在运行之前添加它`contextInitialized()`：

```
mockServletContext.setAttribute(
  WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, 
  yourTestApplicationContext
); 
```

你可以简单地在你的测试用例中注入`yourTestApplicationContext`一个实例：`ApplicationContext`

```
@Autowired
private ApplicationContext yourTestApplicationContext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:15:29.087

我用

```
ApplicationContextAware 
```

界面：

```
<bean id="springApplicationContext" class="server.utils.SpringApplicationContext" /> 
```

并且在

```
public void setApplicationContext(ApplicationContext context) throws BeansException { 
```

我可以进行初始化，休眠，此时一切都准备就绪

# java - 继承映射注解

> ID：10615380
> 
> 赞同：0
> 
> 时间：2012-05-16T09:12:30.320
> 
> 标签：java, hibernate, inheritance, jpa

我正在开发一个 JPA 项目，其中我有一些不同的实体扩展了一个超类，注释为`Entity`：

```
@Entity
@Table(name = "export_profiles")
@NamedQueries({
    @NamedQuery(name = "ExportProfile.getAll", query = "select ep from PersistentExportProfile ep"),
    @NamedQuery(name = "ExportProfile.getByName", query = "select ep from PersistentExportProfile ep where ep.profileName = :name") })
public abstract class PersistentExportProfile extends AbstractExportProfile {

    // other mappings...

} 
```

我想将我定义的映射继承`PersistentExportProfile`到每个子类中。是否可以？我必须在我的超类中更改什么，我必须在我的子实体中添加什么？

**注意**所有子类都将映射到同一张表上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:44:20.817

如果您的超类的唯一目的是为子类定义公共映射，但本身不是持久的，那么您最好使用`@MappedSuperclass`注解或`<mapped-superclass>`for xml 映射。[这里](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)有一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:52:01.100

这个案例在 Postgres 中可能是一个好的开始。

举例

```
CREATE TABLE "public"."abstract_export_profile" (
"label" TEXT
) WITHOUT OIDS;

CREATE TABLE "public"."persistent_export_profile" (
"id" BIGSERIAL, 
"value" TEXT, 
CONSTRAINT "mandant_pkey" PRIMARY KEY("id")
) INHERITS ("public"."abstract_export_profile")
WITHOUT OIDS; 
```

名称类：

```
@MappedSuperclass
public class AbstractExportProfile { ... } 
```

和

```
@Entity
@Table(name= "mandant")
public class PersistentExportProfile extends AbstractExportProfile { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:13:48.680

对我来说最好的解决方案是将`@Inheritance(strategy=InheritanceType.SINGLE_TABLE)`和添加`@DiscriminatorColumn(name="export_type", discriminatorType=DiscriminatorType.STRING)`到我的抽象类中，然后在我添加的具体类`@DiscriminatorValue`中定义`DiscriminatorColumn`.

# python - 在python中查找和替换

> ID：10615385
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:12:50.323
> 
> 标签：python, replace

早上好，

我是 python 的初学者，我想得到一点帮助：

我给你举个例子：

我进入了一个文件：

```
blabla add_signed_123_548 blabla
blabla add_unsigned_77_10 blabla 
```

而且我要 ：

```
blabla adder blabla
blabla adder blabla 
```

我必须找到它们，然后我必须用加法器替换它们。我没有得到关于我给随机数的信息。但我不知道你是如何选择整个字符串的？

我想找到'add_'然后我想替换 adder_signed_123_548 是否可行？

我希望这很清楚。谢谢帮助:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T09:16:32.050

这将替换所有以 开头的`add_`单词`adder`：

```
>>> import re
>>> s = """foo bar add_signed_123_548 foo bar
... Baddest add_unsigned_77_10 additional"""
>>> print(re.sub(r"\badd_\w+", "adder", s))
foo bar adder foo bar
Baddest adder additional 
```

`\b`单词边界锚确保`add_`仅在单词的开头匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:37:44.483

没有正则表达式的答案：

```
>>> value = "blabla add_signed_123_548 blabla"
>>> print ' '.join((word, 'adder')[word.startswith('add_')] for word in value.split())
blabla adder blabla 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:17:32.090

您可以获取输入字符串并将其拆分为下划线，例如`'add_signed_123_548'.split('_')`这将为您提供所有组件的列表`['add', 'signed', '123', '548']`，然后您可以根据需要处理它。

# java - 为什么 Tomcat 服务器不更改复制的 JSF 项目的名称

> ID：10615387
> 
> 赞同：0
> 
> 时间：2012-05-16T09:12:57.753
> 
> 标签：java, jsf, tomcat

在 Eclipse IDE 中，我复制并粘贴了一个 JSF 项目。重命名项目并将其在项目>属性中的上下文根更改为应用程序的新名称，但是当我运行两个应用程序（原始和复制的）时，Tomcat服务器显示两个应用程序的名称相同（原始的那个）应用程序有）即使是新复制的应用程序？这有时也会产生问题？我究竟做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:16:49.217

*   右键项目，选择webcontent，设置新的上下文根，点击ok
*   清理当前项目
*   从服务器视图右键单击tomcat，选择添加和删除，删除项目并再次右键单击tomcat并单击clean
*   刷新项目，然后*在服务器上运行*

# html - 当使用 yyyy-mm-dd 以外的日期格式时，如何使 Mobiscroll 在 iPhone 5 中工作

> ID：10615388
> 
> 赞同：0
> 
> 时间：2012-05-16T09:13:04.163
> 
> 标签：html, ios5, datepicker, mobiscroll

我们在我们的智能手机产品中使用**Mobiscroll** ( [http://code.google.com/p/mobiscroll/](http://code.google.com/p/mobiscroll/) ) 作为日期选择器解决方案。

它适用于桌面浏览器、android 2.3、iPhone 4S - 任何日期格式。*但是，仅当日期格式为 yyyy-mm-dd*时，它才能在 iPhone 5（准确地说是 5.0.1 版）中工作。

 *由于日期的格式来自 excel 表，我们无法控制那里，因此选择器必须使用各种格式。

**重现问题的步骤：**

1.  设置页面并输入 type="date" 以使用 mobiscroll。您可以使用 mobiscroll 演示页面 ( [http://demo.mobiscroll.com/](http://demo.mobiscroll.com/) )

2.  有任何不同于 yyyy-mm-dd 的格式，比如说 mm/dd/yyyy，所以将 input type="date" 的值设置为 value="09/27/2012"。

3.  在 IOS 5 中打开页面。

**预期：** 当我们点击日期选择器时，选择器应该加载给定的初始值，我们应该能够将其设置为新值。此外，即使设置了新值，也应保留格式。

**实际：** 输入字段为空。选择器显示今天的日期，当我在选择器中单击“设置”时，该值未设置到输入字段中。

我们正在使用 mobiscroll 2.0 rc3。

**可能的原因：** 我认为这个问题与浏览器对 html 输入类型的支持有关。我们也在 Iphone 4S 中进行了测试，没有任何问题。我们发现，Iphone 4S 不支持输入 type="date"（与 Modernizr 核对过），但 Iphone 5 支持。

我们还没有找到修复的确切位置，但我们至少认为原因可能是这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:35:26.023

根据 HTML5 规范工作草案，日期输入要求值为 'yyyy-mm-dd' 格式（http://www.w3.org/TR/html-markup/input.date.html#input.date )

因此，我建议不要使用 input type="date" 或重新格式化您的初始日期值。我了解您无法控制 excel 工作表，但您可以在从 excel 文件中读取值时重新格式化日期。*

# apache - 当 Tomcat 位于 Apache 服务器前面时，blazeds 推送消息不起作用（尽管 rpc 有效）

> ID：10615389
> 
> 赞同：0
> 
> 时间：2012-05-16T09:13:05.120
> 
> 标签：apache, tomcat, blazeds

将 blazeds 与 apache tomcat 一起使用时，rpc 调用和推送消息系统工作。但是当apache服务器放在apache tomcat前面时，只有rpc调用起作用，blazeds push消息不起作用。希望有人能解决这个问题，如果这个人愿意分享他/她的有效配置设置，我会很高兴。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:02:34.100

也有完全相同的问题，这是要点。您可能正在使用 SteamingAmf。Apache 服务器不希望您留下与底层服务器的永久开放连接，因此会缓冲您的数据。

为了使一切正常，您必须使用轮询版本。这是您需要在 services-config.xml 中进行的配置的一个示例

```
<channel-definition id="my-polling-amf" class="mx.messaging.channels.SecureAMFChannel">
  <endpoint url="https://{server.name}:{server.port}/{context.root}/messagebroker/amfpolling" class="flex.messaging.endpoints.SecureAMFEndpoint"/>
<properties>
    <polling-enabled>true</polling-enabled>
    <polling-interval-millis>0</polling-interval-millis>
    <wait-interval-millis>60000</wait-interval-millis>
    <client-wait-interval-millis>3000</client-wait-interval-millis>
    <max-waiting-poll-requests>100</max-waiting-poll-requests>
</properties>
</channel-definition> 
```

对于上述配置，我使用的是 https。

配置你的消息配置.xml 如下

```
 <destination id="DestinationID">
    <channels>
    <channel ref="my-polling-amf"/>
    </channels>
    <adapter ref="DestinationAdapter"/>        
  </destination> 
```

假设您的原始设置正常工作，这应该可以工作。祝你好运。

# c++ - 在编译时检查销毁顺序约束

> ID：10615390
> 
> 赞同：0
> 
> 时间：2012-05-16T09:13:05.277
> 
> 标签：c++, destruction

有没有办法在编译时检查“A在B之前被破坏”形式的破坏顺序约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:15:49.410

我不认为这是可能的。以下面的代码为例：

```
int main(int argc, char **argv){
  Object A = new Object(), B = new Object();
  if(argc == 1){
    delete A;
    delete B;
  }else
  {
    delete B;
    delete A;
  }
} 
```

您如何在编译时知道首先调用哪个析构函数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:19:52.023

您可以通过向析构函数添加命令来轻松检查。请参阅（例如此处获取更详细的说明）： http: [//msdn.microsoft.com/en-us/library/8183zf3x (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8183zf3x(v=vs.80).aspx)

亲切的问候，博

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:26:47.997

它对于自动变量是固定的，对于动态分配的对象不能固定。此外，如果您的问题是针对类的成员对象，那么是的，它是固定的。在类声明中首先列出的成员，它们首先被销毁。

# openjpa - 当项目中不存在时，OpenJPA 执行准备好的语句

> ID：10615391
> 
> 赞同：0
> 
> 时间：2012-05-16T09:13:05.663
> 
> 标签：openjpa

我有一个使用 OpenJAP 进行数据库连接的 Web 项目。我已经配置了 persistence.xml 并且能够连接到数据库并检索数据。但是在控制台输出中我看到了这个条目

```
1953  OpenJPA  TRACE  [main] openjpa.jdbc.SQL - <t 31156635, conn 6888942> executing prepstmnt 9690924 

UPDATE student 
    SET scourse = ?, sname = ?, sroll = ? 
    WHERE id = ? 
[params=?, ?, ?, ?] 
```

到目前为止，在我的整个项目中，我还没有添加任何准备好的声明或任何更新声明。我想知道为什么 OpenJPA 会执行此语句，以及当我获取数百万范围内的大数据时会对性能产生什么影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:30:51.397

我在 build.xml 文件中添加了以下代码

```
<!-- ***************************************************************************************************************** -->
<!-- DO NOT DELETE FOLLOWING CODE. THIS IS ADDED FOR ENCHANCING THE CLASSES AT COMPILE TIME. IT IS REQUIRED BY OPENJPA -->
<!-- Define the classpath to include the necessary files. -->
<!-- ex. openjpa jars, persistence.xml, orm.xml, and target classes  -->
<path id="jpa.enhancement.classpath">
    <!-- Assuming persistence.xml/orm.xml are in WebContent/WEB-INF/classes/META-INF -->
    <pathelement location="WebContent/WEB-INF/classes" />

    <!-- Location of the .class files -->
    <pathelement location="build/classes" />

    <!-- Add the openjpa jars -->
    <fileset dir=".">
        <include name="**/lib/*.jar" />
    </fileset>
</path>
<!-- define the openjpac task; this can be done at the top of the -->
<!-- build.xml file, so it will be available for all targets -->
<taskdef name="openjpac" classname="org.apache.openjpa.ant.PCEnhancerTask" classpathref="jpa.enhancement.classpath" />

<!-- invoke enhancer on all .class files below the model directory -->
<openjpac>
    <classpath refid="jpa.enhancement.classpath" />
    <fileset dir=".">
        <include name="**/model/*.class" />
    </fileset>
</openjpac>
<echo message="Enhancement complete" />
<!-- ***************************************************************************************************************** --> 
```

添加这个并设置 Eclipse 以使用这个 build.xml 文件来创建 WAR 文件。对象正在得到增强，我的日志中没有“执行准备好的语句”跟踪，也没有执行额外的“更新”语句。

# css - CSS光标：一行中的指针（IE）

> ID：10615392
> 
> 赞同：1
> 
> 时间：2012-05-16T09:13:09.187
> 
> 标签：css, internet-explorer

连续的CSS`cursor : pointer`在 IE 上不起作用。任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:20:35.770

你的意思是表格行吗？以及您使用的是哪个版本的 IE？

[http://jsfiddle.net/kKdSh/](http://jsfiddle.net/kKdSh/)在 IE9 上为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:49:02.520

在你的 CSS 中，插入一行，设置“display:inline-block;”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T19:03:24.647

你必须设置你的 CSS：

```
#modelTable td, #modelTable th
{
    width:90px;
    cursor: hand; 
} 
```

有关信息，请参阅我测试过的[IE-CSS](http://msdn.microsoft.com/en-us/library/ie/aa358795%28v=vs.85%29.aspx) ，它对我有用。

# html - 从 ASP 字符串中去除 IFRAME

> ID：10615394
> 
> 赞同：1
> 
> 时间：2012-05-16T09:13:24.360
> 
> 标签：html, string, iframe, asp-classic

**我想专门`<iframe>`从我的 ASP 字符串中删除任何代码。**

我目前正在使用这个：

```
Function stripTags(HTMLstring)
    Set RegularExpressionObject = New RegExp
    With RegularExpressionObject
        .Pattern = "<[^>]+>"
        .IgnoreCase = True
        .Global = True
    End With
    stripTags = RegularExpressionObject.Replace(HTMLstring, "")
    Set RegularExpressionObject = nothing
End Function 
```

但是，我意识到这将删除所有 HTML，而不仅仅是 IFRAME 代码。

**有人可以帮忙吗？**

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:33:53.877

在这里，事情是……我对正则表达式不是很好，但我有一个解决方案：

对于开放标签 iframe `<iframe src="">`，正则表达式是

`<iframe[^>]+>`

* * *

对于关闭标签`</iframe>`，正则表达式是

`<[/iframe[^>]+>`

* * *

在代码中：.Pattern = "INSERT-IT-HERE"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:15:31.053

你可以试试这个：

```
Function stripIframeTags(HTMLstring)
    Set RegularExpressionObject = New RegExp
    With RegularExpressionObject
        .Pattern = "<iframe[^>]+>.*?</iframe>"
        .IgnoreCase = True
        .Global = True
    End With
    stripIframeTags = RegularExpressionObject.Replace(HTMLstring, "")
    Set RegularExpressionObject = nothing
End Function 
```

这假定 iframe 始终有一个结束标记，但这可以在正则表达式中标记为可选。

# javascript - JS 编译器删除正则表达式中的转义 (\) 字符

> ID：10615399
> 
> 赞同：2
> 
> 时间：2012-05-16T09:13:41.580
> 
> 标签：javascript, regex, ant, google-closure-compiler, yui-compressor

我最近一直在努力解决一个关于在我们的 ant 构建任务的压缩/最小化阶段编译 javascript 正则表达式的问题。

基本上，问题在于每个 javascript 正则表达式，即：

```
var x = y.replace(/(\d|\.)/g, ''); 
```

获取其转义字符并替换如下：

```
var x = y.replace(/(d|.)/g, ''); 
```

这变得非常烦人，因为项目进展迅速，而我的测试由于构建阶段的这些问题而不断失败。

**这些是我尝试过的事情：**

编译器工具：

*   [谷歌闭包编译器](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CG8QFjAA&url=https://developers.google.com/closure/compiler/&ei=bm-zT56aC6Ko0QXa5ZiTCQ&usg=AFQjCNFK2LY2Sp7-Dqzq1Y2qUtS6tb8VOQ)
*   [YUI 压缩机](http://developer.yahoo.com/yui/compressor/)

形成正则表达式的不同方法：

```
// Same problem occurs when regex placed inside a string
var x = y.replace(new RegExp('(\\d|\\.)', 'g'), ''); 
```

从 Ant 中调用编译器/压缩器的不同方法：

```
<!-- Closure Compiler Ant Task -->
<taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask"
         classpath="lib/compiler.jar"/>

<!-- Executable called from command line -->
<exec executable="java" dir=".">
         <arg line="-jar lib/compiler.jar" />
         <!-- other args -->
</exec> 
```

运行 Ant 任务的不同操作系统：

*   Mac OSX
*   Windows 7的
*   Unix

**关于如何在这里进行的任何想法？**

我发现 Closure Compiler 和 YUI Compressor 都会遇到解析正则表达式的问题，这太巧合了，所以问题可能出在其他地方......

非常感谢任何输入。

**更新**

正如下面的 Chad 所提到的，[Closure Compiler 服务](http://closure-compiler.appspot.com/home)没有报告同样的问题，这意味着问题一定出在 ANT（或底层控制台进程）处理输入/输出字符串的方式上。

目前完成的方法是通过（google）编译器ant任务，使用相同的文件作为进程的输入和输出（注意，通过使用命令行调用发生了同样的问题）。

```
<!-- CLOSURE COMPILER MACRO -->
<!-- @see http://code.google.com/p/closure-compiler/wiki/BuildingWithAnt -->
<macrodef name="compile">
    <attribute name="file" />
    <sequential>
        <echo>Compiling @{file}</echo>
        <jscomp compilationLevel="simple" warning="quiet"
                debug="false" output="@{file}">
            <sources dir=".">
                <file name="@{file}"/>
            </sources>
        </jscomp>
    </sequential>
</macrodef> 

<!-- ACTUAL USAGE -->
<compile file="${local.output.dir}/app.js" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:42:29.320

我无法在这里重现此问题：

```
http://closure-compiler.appspot.com/home 
```

这段代码：

```
// ==ClosureCompiler==
// @compilation_level SIMPLE_OPTIMIZATIONS
// @output_file_name default.js
// @formatting pretty_print
// ==/ClosureCompiler==

y.replace(/(\d|\.)/g, ''); 
```

编译为：

```
y.replace(/(\d|\.)/g, ""); 
```

似乎其他东西正在改变您的代码，您是否对脚本进行任何预处理或后处理？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:38:08.277

这个答案并没有解决构建过程中什么工具导致恶作剧的普遍谜团，但它确实处理了您想要匹配的特定正则表达式。正如其他海报所指出的那样，. 字符类中的 (dot) 不需要转义。所以

```
var x = y.replace(/(\d|\.)/g, ''); 
```

可以在没有反斜杠的情况下重写为

```
var x = y.replace(/([0-9.])/g, ''); 
```

而且我认为在这种情况下您不需要括号来捕获，所以我们可以说

```
var x = y.replace(/[0-9.]/g, ''); 
```

# c# - 如何将字符串格式化为货币

> ID：10615405
> 
> 赞同：95
> 
> 时间：2012-05-16T09:14:00.517
> 
> 标签：c#

我有一个类似的字符串`000000000100`，我想将其转换为 1.00，反之亦然。

前导零将被删除，最后两位是小数。

我举更多例子：

```
000000001000 <=> 10.00
000000001005 <=> 10.05
000000331150 <=> 3311.50 
```

下面是我正在尝试的代码，它给了我没有小数的结果：

```
amtf = string.Format("{0:0.00}", amt.TrimStart(new char[] {'0'})); 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-16T09:16:57.160

将字符串转换为小数，然后除以 100 并应用货币格式字符串：

```
string.Format("{0:#.00}", Convert.ToDecimal(myMoneyString) / 100); 
```

编辑以根据要求删除货币符号并转换为十进制。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-16T09:19:04.227

您需要先将其转换为小数，然后使用货币格式对其进行格式化。

前任：

```
decimal decimalMoneyValue = 1921.39m;
string formattedMoneyValue = String.Format("{0:C}", decimalMoneyValue); 
```

一个工作示例：[https ://dotnetfiddle.net/soxxuW](https://dotnetfiddle.net/soxxuW)

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2016-07-25T10:19:14.013

```
decimal value = 0.00M;
value = Convert.ToDecimal(12345.12345);
Console.WriteLine(value.ToString("C"));
//OutPut : $12345.12
Console.WriteLine(value.ToString("C1"));
//OutPut : $12345.1
Console.WriteLine(value.ToString("C2"));
//OutPut : $12345.12
Console.WriteLine(value.ToString("C3"));
//OutPut : $12345.123
Console.WriteLine(value.ToString("C4"));
//OutPut : $12345.1234
Console.WriteLine(value.ToString("C5"));
//OutPut : $12345.12345
Console.WriteLine(value.ToString("C6"));
//OutPut : $12345.123450 
```

控制台输出：
![](../Images/fb1a8ce842fa67e8ac66eee1c359e165.png)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-06-27T03:55:01.903

有用！

```
decimal moneyvalue = 1921.39m; 
string html = String.Format("Order Total: {0:C}", moneyvalue); 
Console.WriteLine(html); 
```

输出

```
Order Total: $1,921.39 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-03-24T16:35:15.120

一旦您的字符串采用双/十进制格式，就可以将其转换为特定语言环境使用的正确格式

```
double amount = 1234.95;

amount.ToString("C") // whatever the executing computer thinks is the right fomat

amount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("en-ie"))    //  €1,234.95
amount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("es-es"))    //  1.234,95 € 
amount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("en-GB"))    //  £1,234.95 

amount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("en-au"))    //  $1,234.95
amount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("en-us"))    //  $1,234.95
amount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("en-ca"))    //  $1,234.95 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-16T09:19:44.743

```
 string s ="000000000100";
    decimal iv = 0;
    decimal.TryParse(s, out iv);
    Console.WriteLine((iv / 100).ToString("0.00")); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-04-22T11:39:22.503

试试这样简单

```
 var amtf = $"{Convert.ToDecimal(amt):#0.00}"; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-16T09:19:29.607

```
//Extra currency symbol and currency formatting: "€3,311.50":
String result = (Decimal.Parse("000000331150") / 100).ToString("C");

//No currency symbol and no currency formatting: "3311.50"
String result = (Decimal.Parse("000000331150") / 100).ToString("f2"); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-10T19:18:49.713

你也可以这样做：

```
string.Format("{0:C}", amt) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-16T09:20:52.803

尝试这样的事情：

```
decimal moneyvalue = 1921.39m;
string html = String.Format("Order Total: {0:C}", moneyvalue);
Console.WriteLine(html); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-16T09:17:22.447

首先将您的字符串解析为小数。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-16T09:23:14.427

```
var tests = new[] {"000000001000", "000000001005", "000000331150"};
foreach (var test in tests)
{
    Console.WriteLine("{0} <=> {1:f2}", test, Convert.ToDecimal(test) / 100);
} 
```

由于您没有要求货币符号，因此我使用“f2”而不是“C”

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-05-16T09:23:58.277

尝试

```
amtf =  amtf.Insert(amtf.Length - 2, "."); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-23T16:22:00.793

就我而言，我使用这种字符串格式来显示不带符号的十进制值的货币。

**字符串格式：**

```
string.Format("{0:#,##0.00}", decimalValue) 
```

**例子：**

```
var decimalNumbers = new decimal[] { 1M, 10M, 100M, 1000M,10000M,100000M,1000000M,1000000000M };          

foreach (var decimalNumber in decimalNumbers)
{
   Console.WriteLine(string.Format("{0:#,##0.00}", decimalNumber));
} 
```

# javascript - 如何在 JavaScript 中使用五位长的 Unicode 字符

> ID：10615409
> 
> 赞同：16
> 
> 时间：2012-05-16T09:14:30.807
> 
> 标签：javascript, unicode, ecmascript-harmony

在 JavaScript 中，我可以这样做：

```
foo = "\u2669" // 1/4 note 
```

但我不能这样做

```
foo = "\u1D15D" // full note  -five hex digits 
```

它将被解释为“\u1D15”后跟“D”

有什么解决方法吗？

2012-07-09 更新：[ECMAScript Harmony 提案](http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts)现在包括对所有 Unicode 字符的支持。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2018-10-24T15:38:54.967

尝试将 unicode 放在大括号之间：`'\u{1D15D}'`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T09:25:47.840

在[fromCharCode 的 MDN 文档中](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/fromCharCode)，他们注意到 javascript 只会自然地处理不超过 0xFFFF 的字符。但是，他们也有一个 fromCharCode 的固定方法的实现，可以做你想做的事情（转载如下）：

```
function fixedFromCharCode (codePt) {
    if (codePt > 0xFFFF) {
        codePt -= 0x10000;
        return String.fromCharCode(0xD800 + (codePt >> 10), 0xDC00 + (codePt & 0x3FF));
    }
    else {
        return String.fromCharCode(codePt);
    }
}

foo = fixedFromCharCode(0x1D15D); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-09T23:29:32.867

如今，您可以简单地使用`String.fromCodePoint()`，如[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint)中所述。例如：

```
> String.fromCodePoint(0x1f0a1)
"" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:34:33.187

我做了一点检查，似乎附近没有完整的注释`0x2669`。（[Unicode字符表](http://en.wikibooks.org/wiki/Unicode/Character_reference/2000-2FFF)）

虽然 using`0x01D15D`确实给了我一个未知的 unicode 字符，但这可能是因为我没有音乐字体。Javascript 将尝试尽可能解析为字节，并且`0x1D15D`使用 2.5 字节填充它将`0`使其成为 3 并且可解析。

这也很方便：unicode.org/charts/PDF/U1D100.pdf

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T10:12:51.043

你可以使用这个：

```
function fromOutsideBMP(cp) {
// 0x01D120
  var x=cp-0x10000;
  var top10=parseInt("11111111110000000000",2);
  var end10=parseInt("1111111111",2);
  var part1=(x&top10)/1024+0xD800;
  var part2=(x&end10)+0xDC00;
  var s=String.fromCharCode(part1)+String.fromCharCode(part2);
  return s;
} 
```

例子：

```
> fromOutsideBMP(0x01d122)
  ""
> 
```

# web-services - 在接收服务器上没有磁盘缓冲的 Jersey 多部分流式传输

> ID：10615410
> 
> 赞同：7
> 
> 时间：2012-05-16T09:14:39.067
> 
> 标签：web-services, tomcat, stream, jersey, multipartform-data

我正在尝试通过 HTTP 将（大）文件流式传输到数据库中。我使用 Tomcat 和 Jersey 作为 Web 框架。我注意到，如果我 POST 一个文件到我的资源，该文件首先在磁盘上缓冲（在 temp\MIME*.tmp} 中，然后在我的 doPOST 方法中处理它。

这确实是一种不受欢迎的行为，因为它使磁盘 I/O 加倍，并且还导致了一些糟糕的 UX，因为如果浏览器已经完成上传，用户需要等待几分钟（当然取决于文件大小）直到他得到HTTP 响应。

我知道这可能不是大文件上传的最佳实现（因为您甚至没有任何恢复功能），但要求也是如此。：/

所以我的问题是，是否有任何方法可以禁用 MULTIPART POST 的（磁盘）缓冲。内存缓冲显然太贵了，但我真的不认为需要磁盘缓冲吗？（请解释）像 YouTube 这样的大型网站如何处理这种情况？或者如果文件被发送，至少有机会给用户即时反馈？（应该是坏的，因为可能仍然有类似 SQLException 的东西）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:10:26.937

好的，所以经过几天的阅读和尝试不同的东西后，我偶然发现了 HTTPServletRequest。起初我什至不想尝试，因为它带走了@FormDataParam 的所有便利方法，但因为我不知道还能做什么......

事实证明它有帮助。当我使用时 `@Context HTTPServletRequest request`，`request.getInputStream()`我根本没有得到磁盘缓冲。

现在我只需要弄清楚如何在没有@FormDataParam 的情况下到达 FormDataContentDisposition

编辑：

行。MultiPartFormData 可能必须在磁盘上缓冲以解析请求的 InputStream。所以看来我必须自己手动解析它，如果我想防止任何缓冲:(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-15T23:55:43.343

如果有人仍然感兴趣，我通过使用[Apache Commons Streaming api解决了同样的问题](http://commons.apache.org/proper/commons-fileupload/streaming.html)

该页面上的代码示例对我来说效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T10:33:31.167

我很确定 Jersey 正在将文件写入磁盘以确保内存不会被淹没。由于您确切知道需要对传入数据做什么 -> 流入数据库，因此您可能必须编写自己的 MessageBodyReader 并让 Jersey 使用它来处理传入的多部分数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T15:22:19.970

您最好的选择是完全控制并编写您自己的 servlet，它只获取 request.getInputStream（或 request.getWriter，如果您正在使用文本）并自己进行流式传输。大多数框架通过为您处理所有上传、临时存储等，使您的生活“轻松”，并且通常使您难以进行流式传输等事情。自己抓住流并做任何你想做的事情是很容易的。

# java - 如何在会话中获取所有已初始化的托管 bean？

> ID：10615416
> 
> 赞同：0
> 
> 时间：2012-05-16T09:14:57.740
> 
> 标签：java, jsf-2, myfaces

如何在会话中获取所有已初始化的托管 bean？以下代码每次都会使 JVM 崩溃。

```
FacesContext facesContext=FacesContext.getCurrentInstance();
com.sun.faces.application.ApplicationAssociate application = 
ApplicationAssociate.getInstance(facesContext.getExternalContext()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:21:13.727

你不能使用类似的东西

```
 FacesContext context = FacesContext.getCurrentInstance();
 HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
 Enumeration mySessionBeans = session.getAttributeNames(); 
```

# weblogic - 将文件部署到 WebLogic - 错误：未解析的 Webapp 库引用

> ID：10615421
> 
> 赞同：4
> 
> 时间：2012-05-16T09:15:11.517
> 
> 标签：weblogic, weblogic-10.x

我在将文件部署到 WebLogic 时收到此错误。

**我应该对Weblogic.xml**文件进行任何更改吗？

> 错误：在 weblogic.xml [扩展名： jstl，规范版本：1.1，精确匹配：true]，[扩展名：jsf-myfaces，规范版本：1.1，精确匹配：true]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-11T21:05:43.213

为了解决这个问题，我必须采取以下步骤（我正在使用 Eclipse 进行开发并部署到 Weblogic 10.3.5）：

1.  从 /WebContent/WEB-INF/ 目录中删除 weblogic.xml
2.  将所需的 jar 添加到您的 lib 目录 (/WEB-INF/lib/)，包括 JSTL.jar
3.  将项目库添加​​到您的部署描述符
4.  将 EAR 或 WAR 安装到 Weblogic

这解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:42:16.163

该错误是因为在部署期间未访问 Weblogic.xml 中引用的某些库。

尝试通过运行（Windows 操作系统）调用所有引用库。就像您对名为 \systemlib\alllibs\lib1.jar 的库有一些引用，然后运行并尝试调用库文件，或者手动查看是否可以访问服务器中的文件。

如果文件存在，那么对于 unix/linux 服务器，检查系统上是否没有访问权限问题。就像库是由 root 用户放置的，而 weblogic 用户（应用程序服务器）没有权限读取或写入库文件夹。删除任何此类问题。

最后，由于错误特别指出 JSTL，因此请检查 JRE 版本和 JSTL 版本是否同步。

如果仍然没有解决错误，请分享 weblogic.xml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-23T14:41:55.140

在 wlServer\common\deployable-libraries 文件夹中深入搜索“jsf”。找到与该扩展对应的库并将其安装到您的服务器中。重新部署应用程序

# 它对我有用

# shell - 读取 csv 文件

> ID：10615423
> 
> 赞同：1
> 
> 时间：2012-05-16T09:15:14.617
> 
> 标签：shell, unix, programming-pearls

我有逗号分隔的平面文件，其内容如下。

```
Name,Empno,Address,Contact,Company
A,1,”BTM, Bangalore”,1234,”HCL”
B,2,”Tatanagar”,1243,”WIPRO”
C,3,”Patna”,1254,”CTS”
D,4,”Doranda,Ranchi”,1253,”TCS” 
```

我只需要为每个人获取姓名和联系方式。如果我使用分隔符作为“”，则 A 和 D 的联系人将是班加罗尔和兰契，这是不正确的。如何获得第一个和第四个字段。另外请告知我是否可以使用 awk 命令获取所需的详细信息

**编辑** 只是添加这是示例数据，我的原始数据将有更多字段，引号内的任何字段也可以有逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:20:57.110

我认为联系总是最后一个领域。你可以试试这个

```
awk -F, '{if(NR>1)printf("%s,%s\n",$1,$(NF-1));}' ip.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:31:14.407

```
$ awk -F, '{print $1, $(NF-1)}' csv.txt 
Name Contact
A 1234
B 1243
C 1254
D 1253 
```

# html - 行高继承

> ID：10615425
> 
> 赞同：3
> 
> 时间：2012-05-16T09:15:18.007
> 
> 标签：html, inheritance, css

我无法更改在正文中定义的跨度元素行高（我尝试使用！important，以及不同的行高表示法，包括字体/行高）。这是代码：

```
body {
    font: 16px/1.5 Arial, Helvetica, sans-serif;
}

.pageBody.oferta > .cnt .columns ul span {
    font-size: 9px;
    line-height: 1;
} 
```

问题显然是我的 spans line-height 是 1.5

该 Web 开发工具的更多内容并没有显示来自 body 的继承覆盖它（然后它在 Web 开发工具中交叉）。网站上也有很多代码，但我认为它无论如何都不会影响行高（所以粘贴它会是很多垃圾邮件）。

编辑：我发现有趣的事情：当我应用大于 2 的行高时，它开始应用于跨度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T10:53:44.530

设置`line-height`在块容器上，而不是`span`. 对于`span`，或者对于一般不可替换的内联元素，内容区域的高度取决于字体和浏览器，并且通常会为降序和升序做出规定；请参阅CSS 2.1 规范中的[10.6.1 内联、非替换元素](http://www.w3.org/TR/CSS2/visudet.html#inline-non-replaced)。

即使对于一个`div`元素或其他块元素，用户设置可能会阻止您将高度调整到 9px，例如将最小字体大小设置为更大的值（Firefox 上的用户选项；作者不能覆盖）。

我不知道您是如何推断行高的，但我的 Firebug 说，对于根据您的示例构建的文档，计算的行高为 9px，但在“布局”窗格中，高度为 13px。这是正常的，符合 CSS 2.1 原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:29:59.847

[您在这里](http://jsfiddle.net/HWtDX/1/)缺少定义示例的单位部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:38:25.650

```
span {
    line-height: 0.66; /* 66% of 1.5 ~= 1 
} 
```

由于 line-height 值在嵌套元素上相乘，您可以使用`0.66`. 另一种覆盖值的方法是设置`line-height: normal`（但实际值[会根据浏览器而变化](https://developer.mozilla.org/en/CSS/line-height)）

# silverlight - Silverlight 中 DatePicker 的值

> ID：10615427
> 
> 赞同：0
> 
> 时间：2012-05-16T09:15:21.967
> 
> 标签：silverlight, datepicker

有谁知道如何从 Silverlight 中的 Datepicker 获取日期和时间值？

在我所见的任何地方，我都能找到仅适用于 Silverlight 的 DateTimePicker 的答案。这可以在不使用 Event 参数的情况下完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:16:26.740

尝试`SelectedDate`DatePicker 中的属性，它应该返回一个`Nullable<DateTime>`值。

# redirect - 由于符号链接，Rails 使用 HTTPS 重定向问题

> ID：10615429
> 
> 赞同：1
> 
> 时间：2012-05-16T09:15:30.497
> 
> 标签：redirect, ruby-on-rails-3.1, https

这与所有其他 Rails 3 重定向 https 问题略有不同。让我解释。

为了使用 Phusion Passenger 发布我们的网站，我们必须创建一个子域并使用`www/rails`文件夹中的符号链接（或软链接或别名）到`/home/user/app/railsapp`.

为了使 HTTPS 正常工作（由于各种域问题），我们需要一个重写模块来实际创建此路由：

```
https://my.site.com/rails 
```

注意尾随的**/rails**路线。

我们的应用程序上不存在这条路线。所以我需要一种方法来重定向该路由中的任何内容：

```
https://my.site.com/login 
```

所以我想我会这样做，在`routes.rb`文件中有这个：

```
match '/rails' => 'sessions#redirect_to_login' 
```

在 session_controllers.rb 中：

```
 def redirect_to_login
    redirect_to login_path, :status => :moved_permanently
  end 
```

这导致应用程序抱怨它找不到`/rais/login/`，所以它仍在寻找那个`/rails`位。

如果我添加类似`redirect_to "/"`的内容，当您未登录时，它会通过重定向将您发送到`my.site.com/login`，我会在浏览器中收到太多重定向的错误。

`redirect_to login_url`也没有成功。

从某种意义上说，它变得有点复杂，每当我为该站点使用 https 协议时，它都会附加该`/rails`路由，因此我需要一种方法将其从所有链接中删除。例如，`https://my.site.com/movies`将被翻译为`https://my.site.com/rails/movies`.

除登录页面外，删除`/rails`或将所有 https 流量重定向到 http。

我确信有一个相对简单的解决方法，但我无法弄清楚。

帮助表示赞赏。

# javascript - 实现 JQuery 日期选择器

> ID：10615430
> 
> 赞同：0
> 
> 时间：2012-05-16T09:15:34.483
> 
> 标签：javascript, jquery

我想实现 JQuery Datepicker。我在我的 JSF 代码中添加了 JavaScript。这是 HTML 输出：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
            <title>DX-57 History Center</title>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <link rel="shortcut icon" type="image/x-icon" href="resources/css/themes/nvidia.com/images/favicon.ico" />
            <link href="resources/css/helper.css" media="screen" rel="stylesheet" type="text/css" />
            <link href="resources/css/dropdown.css" media="screen" rel="stylesheet" type="text/css" />
            <link href="resources/css/default.advanced.css" media="screen" rel="stylesheet" type="text/css" />

            <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script>
            <script type="text/javascript" src="resources/js/jquery-ui-1.8.18.custom.min.js"></script>
            <link href="resources/css/jquery-ui-1.8.18.custom.css" media="screen" rel="stylesheet" type="text/css" />
            <script type="text/javascript" src="resources/js/tabs.js"></script>
        <script type="text/javascript">
            $(function(){                                
                // Datepicker
                $('#datepicker').datepicker({
                    inline: true,
                    showWeek: true,
                    firstDay: 1
                });
            });            
        </script><script type="text/javascript" src="/test/javax.faces.resource/jsf.js.jsf?ln=javax.faces&amp;stage=Development"></script></head><body>
        <!-- demo inset for with validator -->
        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ul class="dropdown dropdown-horizontal" style="margin: 0 auto">
                <li><a href="/SR_57-1.0-SNAPSHOT/UserNav.jsf" class="dir">Home</a>
                    <ul>
                        <li><a href="Dashboard.jsf">Dashboard</a></li>
                    </ul>       
                </li>
                <li><a href="Sessions.jsf" class="dir">Sessions</a>
                </li>
                <li><a href="Application.jsf" class="dir">Application</a>
                    <ul>                
                        <li><a href="Glassfish.jsf">Glassfish</a></li>
                    </ul>
                </li>
                <li><a href="Linux.jsf" class="dir">Linux</a>                   
                </li>
                <li><a href="Database.jsf" class="dir">Database</a> 
                    <ul>                
                        <li><a href="History.jsf">History</a></li>
                    </ul>
                </li>                   
            </ul>          

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"><img src="resources/images/logo_databasez.png" alt="Demo Insert Form" style="position:relative; top:-20px; left:9px;" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">
<form id="j_idt13" name="j_idt13" method="post" action="/test/Database.jsf" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="j_idt13" value="j_idt13" />

                        <div id="settingsdiv" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px"><table>
<tbody>
<tr>
<td>Session ID</td>
<td><input id="j_idt13:sessionid" type="text" name="j_idt13:sessionid" onblur="mojarra.ab(this,event,'blur',0,'j_idt13:sessionidMessage')" /><span id="j_idt13:sessionidMessage"></span></td>
</tr>
<tr>
<td>Date</td>
<td><input id="j_idt13:datepicker" type="text" name="j_idt13:datepicker" /></td>
</tr>
<tr>
<td>Login Time</td>
<td><input id="j_idt13:logintime" type="text" name="j_idt13:logintime" /></td>
</tr>
<tr>
<td>Last Refresh Time</td>
<td><input id="j_idt13:lastrefreshtime" type="text" name="j_idt13:lastrefreshtime" /></td>
</tr>
<tr>
<td>User IP</td>
<td><input id="j_idt13:userip" type="text" name="j_idt13:userip" /></td>
</tr>
</tbody>
</table>

                        </div>   

                        <div id="settingstwodiv" style="width:150px; height:60px; position:absolute;  background-color:transparent; top:380px; left:800px"><input type="submit" name="j_idt13:j_idt32" value="Create User" />

                        </div><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="7591771537138283258:6254434046150824528" autocomplete="off" />
</form> 

                </div>   

            </div>  
        </div></body>
</html> 
```

但是当我点击输入文件时，什么也没有发生。有什么遗漏吗？在我发现日历`<div id="datepicker"></div>`用于显示的示例中。我在示例中使用输入字段。

最好的祝愿

**编辑**

我添加`div`以仅可视化日历。

我在`div`这里添加了：

```
<h:panelGrid columns="2">
                                <h:panelGroup>Session ID</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="sessionid" value="#{DatabaseController.formMap['sessionid']}" 
                                                 validator="#{ValidatorController.validatebean}">                                        
                                        <f:ajax event="blur" render="sessionidMessage" />                                          
                                    </h:inputText>
                                    <h:message id="sessionidMessage" for="sessionid" />
                                </h:panelGroup>

                                <h:panelGroup>Date</h:panelGroup>
                                <h:panelGroup>
                                     <div id="datepicker"></div>
                                    <h:inputText id="datepicker" value="#{DatabaseController.formMap['userid']}" >                                       
                                    </h:inputText>
                                </h:panelGroup>

                                <h:panelGroup>Login Time</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="logintime" value="#{DatabaseController.formMap['logintime']}" >
                                        <f:validateLength minimum="0" maximum="35"/>
                                    </h:inputText>
                                </h:panelGroup>

                                <h:panelGroup>Last Refresh Time</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="lastrefreshtime" value="#{DatabaseController.formMap['lastrefreshtime']}" >
                                        <f:validateLength minimum="0" maximum="35"/>
                                    </h:inputText>
                                </h:panelGroup>

                                <h:panelGroup>User IP</h:panelGroup>
                                <h:panelGroup>
                                    <h:inputText id="userip" value="#{DatabaseController.formMap['userip']}" >
                                        <f:validateLength minimum="0" maximum="15"/>
                                    </h:inputText>
                                </h:panelGroup>

                            </h:panelGrid> 
```

![在此处输入图像描述](../Images/ed665c0bf112b402b4c506a2d54005e2.png)

我想在[这里](http://jqueryui.com/demos/datepicker/)打开这个例子的日历- 当我点击输入字段时。

似乎还有其他方法可以在 JSF 中调用日历。

编辑 2

这个 JavaScript 是否正确？

```
function calendar(){                                
    // Datepicker
    datepicker({
        inline: true,
        showWeek: true,
        firstDay: 1
    });
} 
```

我将使用以下代码调用它：

```
<h:inputText onclick="calendar" value="#{DatabaseController.formMap['userid']}" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:19:44.040

此处错过了 datepicker id。你打电话给错误的 id 。像这样尝试，你`:`在你的属性中使用，通过使用斜杠

```
$(function(){
    $('#j_idt13\\:datepicker').datepicker({
        inline: true,
        showWeek: true,
        firstDay: 1
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:19:37.690

```
 <script type="text/javascript">
            $(function(){                                
                // Datepicker
                $('#j_idt13:logintime').datepicker({
                    inline: true,
                    showWeek: true,
                    firstDay: 1
                });
            });            
        </script> 
```

改成这样。你的选择器错了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T09:19:48.880

您需要将“#datepicker”设置为输入框的ID。

例如

```
 $(function(){                                
            // Datepicker
            $('#j_idt13:datepicker').datepicker({
                inline: true,
                showWeek: true,
                firstDay: 1
            });
        }); 
```

我建议研究[jquery 选择器](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T09:22:02.337

HIya**演示** [http://jsfiddle.net/8Hp26/](http://jsfiddle.net/8Hp26/)

你的 id 不同，看起来你正在使用某种模板或用户控制器来生成 html，在演示中我添加了一个新的 class = foo 或者你可以尝试`:`在你的 JQuery 中转义。

**注意**使用转义添加`\\:`，但添加类应该像演示中所示的那样做。

希望这可以帮助。

**代码**

```
 $(function(){                                
            // Datepicker
          //  $('#datepicker').datepicker({
         $('.foo').datepicker({                
                inline: true,
                showWeek: true,
                firstDay: 1
            });
        });​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T09:18:47.257

您输入字段的 id 不是`datepicker`but `j_idt13:datepicker`。调用 datepicker 组件时必须使用此 id：

```
$(function(){
    $('#j_idt13\\:datepicker').datepicker({
        inline: true,
        showWeek: true,
        firstDay: 1
    });
}); 
```

`\\`用于转义jQuery ，`:`否则它会被 jQuery 使用。

但是，我建议使用**没有** `:`其中的 id。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T18:24:30.807

这是特定于 JSF 的。您必须使用`styleClass="datepicker"`才能调用`#datepicker`JS。

# wpf - 在 wpf 中，如何在自定义控件中设置依赖属性的值

> ID：10615432
> 
> 赞同：0
> 
> 时间：2012-05-16T09:15:47.067
> 
> 标签：wpf, user-controls, dependency-properties

我创建了一个 WPF UserCotrol。在它里面我有 3 个默认的网格
`visibility="collapsed"`。我创建了一个这样的依赖属性：

```
public int PanelId
    {
        get { return (int)GetValue(PanelIdProperty); }
        set { SetValue(PanelIdProperty, value); }
    }

public static readonly DependencyProperty PanelIdProperty =
        DependencyProperty.Register("PanelId", typeof(int), typeof(RecurrencePattern), new UIPropertyMetadata(1)); 
```

我想在另一个 xaml 中使用这个用户控件。我这样声明：

```
<uc:RecurrencePattern PanelId="2"/> 
```

我认为通过这样做，PanelId 将为 2，并且在运行时的默认构造函数中，我可以使用它来设置可见的面板。相反，PanelId 是 UIPropertyMetadata(1) 定义的 1。如何使用 xaml 中提供的值来设置哪个网格可见。我有：

```
<Grid x:Name="a" Visibility="Collapsed">
    <label Content"a"/>  
</Grid>
<Grid x:Name="b" Visibility="Collapsed">
    <label Content"b"/>  
</Grid>
<Grid x:Name="c" Visibility="Collapsed">
    <label Content"c"/>  
</Grid> 
```

在默认构造函数中是这样的：

```
switch (PanelId)
  {
    case 1:
      a.Visibility = System.Windows.Visibility.Visible;
      break;
    case 2:
      b.Visibility = System.Windows.Visibility.Visible;
      break;
    case 3:
      c.Visibility = System.Windows.Visibility.Visible;
      break;
    default:
      a.Visibility = System.Windows.Visibility.Visible;
      break;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:25:39.050

更改代码`Visibility`需要在依赖属性更改事件中......

```
 public static readonly DependencyProperty PanelIdProperty
     = DependencyProperty.Register(
          "PanelId",
          typeof(int),
          typeof(RecurrencePattern),
          new UIPropertyMetadata(1, PanelIdPropertyChangedCallback)); 

    private static void PanelIdPropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var recurrencePattern = d as RecurrencePattern;
        if (recurrencePattern != null)
        {
            var panelId = Convert.ToInt32(e.NewValue);
            switch (panelId)
            {
                case 1:
                    recurrencePattern.Visibility
                       = System.Windows.Visibility.Visible;
                    break;
                case 2:
                    recurrencePattern.Visibility
                       = System.Windows.Visibility.Visible;
                    break;
                case 3:
                    recurrencePattern.Visibility 
                       = System.Windows.Visibility.Visible;
                    break;
                default:
                    recurrencePattern.Visibility 
                       = System.Windows.Visibility.Visible;
                    break;
            }
        }
    } 
```

希望这可以帮助...

# iphone - 从挂起状态恢复 - iOS

> ID：10615434
> 
> 赞同：4
> 
> 时间：2012-05-16T09:15:53.213
> 
> 标签：iphone, ios, application-lifecycle

当我的应用程序从挂起状态恢复时，它的行为非常奇怪，所以我想在这种情况下从头开始重新启动它。

但我不想每次它进入后台并回到前台时都重新启动它。

是否有可能知道应用程序是从挂起状态返回还是只是后台状态？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T09:31:10.320

我相信对此的简短回答是否定的。

Apple 的状态文档并不明确，但我认为该文档暗示在这种情况`didEnterBackground` *下*调用它，因为它声明每个转换都有相关的方法，但它并不明确，所以我进行了测试。

我编写了一个简短的测试程序，它使用区域监控来强制应用程序从挂起过渡到后台。这不是确定的，因为也很难知道应用程序是否已从后台转换为挂起，但几分钟后，应用程序应该处于挂起状态，除非它们使用后台模式或任务。触发区域更改（通过调试器），我得到`didExtRegion`回调，但没有`didEnterBackground`。

# php - 致命错误：调用未定义函数 mysql_connect()

> ID：10615436
> 
> 赞同：50
> 
> 时间：2012-05-16T09:16:02.773
> 
> 标签：php, mysql

我已经设置了 PHP、MySQL 和 Apache。`localhost()`对于 PHP，它运行良好。但是在我下载 MySQL 之后，它会报告：

> 致命错误：调用未定义函数 mysql_connect()

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2016-03-24T23:45:54.953

您已升级到 PHP 7，现在`mysql_connect`已弃用。检查你的：

```
php -version 
```

将其更改`mysqli_connect`为：

```
$host = "127.0.0.1";
$username = "root";
$pass = "foobar";
$con = mysqli_connect($host, $username, $pass, "your_database"); 
```

如果您正在升级旧版 PHP，那么现在您将面临使用函数升级所有`mysql_*`函数的任务`mysqli_*`。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-03-16T08:25:34.377

如果您在升级到 PHP 7.0 后收到此错误，那么您使用的是已弃用的库。

> mysql_connect — 打开与 MySQL 服务器的连接
> 警告
> 此扩展在 PHP 5.5.0 中已弃用，并在 PHP 7.0.0 中被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

更多信息：http: [//php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-02-14T12:19:14.647

打开终端并运行以下命令。

```
sudo apt-get install mysql-server 
```

如果您正在运行 PHP，您还需要为 mysql 5 安装 php 模块：

```
sudo apt-get install php5-mysql 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-16T09:18:10.950

验证您的 PHP 安装是否已使用 mysql 支持进行编译。创建一个包含测试网页`<?php phpinfo(); exit(); ?>`并将其加载到浏览器中。在页面中搜索 MySQL。如果你没有看到它，你需要重新编译 PHP 并支持 MySQL，或者重新安装一个内置它的 PHP 包

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-19T18:14:45.170

```
PHP.INI 
```

检查您是否忘记启用以下选项（加载 mysql 等模块）：

```
; Directory in which the loadable extensions (modules) reside.
; http://php.net/extension-dir
; extension_dir = "./"
; On windows:
extension_dir = "ext" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-03-15T08:05:42.110

利用。 `<?php $con = mysqli_connect('localhost', 'username', 'password', 'database'); ?>`

在 PHP 7 中。您可能在 XAMPP 中有 PHP 7。您现在有两个选择：MySQLi 和 PDO。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-05-20T10:11:24.307

对于*CPanel*用户，如果您看到此错误并且您已经为站点选择了 PHP 5.x，则可能存在禁用的*CPanel*`mysql`更新和`mysqli`PHP 扩展。

要检查并启用扩展：

1.  在*CPanel*中*选择 PHP 版本*
**   确保您选择了 PHP 5.x*   确保`mysql`检查`mysqli`PHP 扩展*

 ** * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-12-29T04:13:31.580

此错误仅针对您的 PHP 版本 v7.0。您可以使用 PHP v5.0 来避免这些

用它

```
mysqli_connect("localhost","root","") 
```

我只用 mysql 制作了 mysqli

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-03T12:00:29.387

一个解决方案可能是使用这样的适配器函数来开始使用`mysqli`，而不是`mysql`在整个应用程序中使用：

```
if (!function_exists('mysql_connect')) {
    function mysql_connect($host = '', $user = '', $password = '', $database = '', $port = 0, $socket = '') {
        return mysqli_connect($host, $user, $password, $database, $port, $socket);
    }
}

if (!function_exists('mysql_select_db')) {
    function mysql_select_db($link, $dbname) {
        mysqli_select_db($link, $dbname);
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-06-10T17:45:39.657

我在 RHEL6 上遇到了同样的问题。原来 /etc/php.d 中的 mysql.ini 文件只有一个模块名，但需要一个完整的路径名。在我的 RHEL6 系统上，有效的条目是：

```
; Enable mysql extension module

extension=/usr/lib64/php/modules/mysql.so 
```

修改文件后，我重新启动了 apache，一切正常。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-26T07:09:29.617

我正在使用 Windows 8，通过更改环境变量解决了这个问题

请按照以下步骤操作：打开我的电脑属性->高级系统设置->环境变量。在“系统变量”下，选择“路径”并单击“编辑”在“变量值”中，添加“C:\php;” 或安装 php 的路径。

单击确定并应用设置并重新启动系统。它应该工作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-09-18T11:57:09.613

我的解决方案在这里（我只需要从 中删除最后一个斜杠（注意：反斜杠）`PHPIniDir 'c:\PHP\'`）：[致命错误：调用未定义函数 mysql_connect() 无法解决](https://stackoverflow.com/questions/12221364/fatal-error-call-to-undefined-function-mysql-connect-cannot-solve/18871425#18871425)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-10-08T15:52:23.017

如果您使用的是 Windows10，PHP 7.2 并尝试连接到 mysql。如果发生此错误

> 未捕获的错误：调用未定义的函数 mysqli()

执行以下步骤以使其正确。

1.  转到 PHP 安装文件夹，
2.  检查 php.ini 文件，（只有 dev、prod 文件存在，然后文件之一为 php.ini 文件）
3.  查找“extension=mysqli”并删除“;” 在它之前。
4.  寻找“extension_dir”并提到“ext”目录的路径。
5.  重新启动应用程序。

希望这对某人有所帮助。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-01T04:16:45.410

这是一个快速修复：

所有的专业人士可能会因为这个答案而讨厌我。但是我在服务器上遇到了同样的错误：**致命错误：未捕获错误：调用**使用 PHP 7 的未定义函数 mysql_connect()。没有时间重写所有 mysql 代码，所以如果有人需要，可以快速临时修复它在 CPANEL 中查找**PHP 配置**并将该帐户的版本更改为 PHP 5.4 而不是 PHP 7。然后代码工作正常，没有上述错误。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-03T01:03:10.657

检查是否为您的 PHP 版本安装了 mysqli 模块

```
$ ls /etc/php/7.0/mods-available/mysql*
/etc/php/7.0/mods-available/mysqli.ini /etc/php/7.0/mods-available/mysqlnd.ini 
```

启用模块

```
$ sudo phpenmod mysqli 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-09-02T21:11:14.527

此代码可以帮助您

```
<?php 

$servername = "localhost";
$username = "root";
$password = "";

$con = new mysqli($servername, $username, $password);

?> 
```

但更改“服务器名”、“用户名”和“密码”

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2017-10-11T00:45:59.390

当您`mysql_connect`在代码行中使用时会出现问题，因此只需将其添加为 in 即可`mysqli_connect`解决问题。
然后，您还必须在`mysqli`整个代码行中使用，否则问题会再次出现。
该示例`mysql_select_db`将`mysqli_select_db`用于选择数据库。*

# c# - 防止使用 Response.Redirect() 刷新左侧导航菜单

> ID：10615446
> 
> 赞同：0
> 
> 时间：2012-05-16T09:16:39.273
> 
> 标签：c#, asp.net, html, css, asp.net-ajax

我的左侧导航菜单在我的母版页上，并且我也在使用更新面板，我的问题是每当我调用 Response.Redirect() 时，整个页面都会被刷新，并且左侧导航菜单的状态每次都会被刷新. 我需要维护左侧导航菜单的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:27:05.600

如果您不想使用框架集或构建 Ajax 驱动的网站，则处理此问题的标准方法是为您的网站实现站点地图，以便左侧导航知道在加载每个页面时要显示什么状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:27:15.047

您很可能需要在页面加载时运行 javascript/jQuery 代码。

您将运行此代码以获取当前页面名称/标题/可用于区分页面的任何内容，然后您将使用此值更新指向此页面的左侧菜单项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:23:26.867

Two ways to do that.

1.use frame

```
<html>
......
<body>
<frame>left menu</frame>
<frame>right</frame>
</body>
</html> 
```

redirect right frame.

2.use ajax and div/frame

```
<html>
......
<body>
<div>left menu</div>
<div>right</div>
</body>
</html> 
```

you can use ajax(try jquery) to update right div.

# javascript - 不想在 Flexigrid 中调整列的大小

> ID：10615453
> 
> 赞同：3
> 
> 时间：2012-05-16T09:17:00.573
> 
> 标签：javascript, jquery, resize, flexigrid

我想禁用 Flexigrid 中的列大小调整。
有没有像 colresize:false/true 这样的选项？我找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:24:38.813

## 我找到了这个：

将 dragStart 的开头更改为：

```
if (dragtype=='colresize' && p.colResize == true) //column resize
{
    $(g.nDiv).hide();$(g.nBtn).hide();
    var n = $('div',this.cDrag).index(obj);
    var ow = $('th:visible div:eq('+n+')',this.hDiv).width();
    $(obj).addClass('dragging').siblings().hide();
    $(obj).prev().addClass('dragging').show();
    this.colresize = {startX: e.pageX, ol: parseInt(obj.style.left), ow: ow, n : n };
    $('body').css('cursor','col-resize');
    //cleanup
    n=null;
    ow=null;
} 
```

为了让它更简洁，你可以添加一个属性来传递，比如 colResize:true，但在 flexigrid 中将 colResize:false 设置为默认值。然后检查 p.colResize == true 以启用调整大小。这样，您可以在需要时同时使用它。只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T11:04:59.697

`colResize: false` 属性将禁用该选项。

# php - 表中的变量

> ID：10615458
> 
> 赞同：0
> 
> 时间：2012-05-16T09:17:27.317
> 
> 标签：php

好的，所以我得到了这个代码：

```
$serieid = mysql_query("SELECT * FROM orderregels WHERE orderid='$headerdata["orderid"]'"); 
```

我想要“WHERE orderid”后面的变量 $headerdata["orderid"]，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:19:21.010

你可以这样做

```
$serieid = mysql_query("SELECT * FROM orderregels WHERE orderid='{$headerdata['orderid']}'"); 
```

或者你可以这样做

```
$serieid = mysql_query("SELECT * FROM orderregels WHERE orderid='" . $headerdata['orderid'] . "'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:20:23.273

```
$serieid = mysql_query("SELECT * FROM orderregels WHERE orderid='".$headerdata["orderid"]."'"); 
```

# rest - WP7 和 F# 上的异步 POST 失败

> ID：10615461
> 
> 赞同：87
> 
> 时间：2012-05-16T09:17:32.267
> 
> 标签：rest, asynchronous, f#, windows-phone

当我`let! read = from.AsyncRead buf`在 F# 中执行此操作时，它会阻塞并且在 TCP 套接字失效之前不会返回。为什么？我该如何解决？

它的代码：

```
module StreamUtil

open System.IO

/// copy from 'from' stream to 'toStream'
let (|>>) (from : Stream) (toStream : Stream) =
  let buf = Array.zeroCreate<byte> 1024
  let rec doBlock () =
    async {
      let! read = from.AsyncRead buf
      if read <= 0 then
        toStream.Flush()
        return ()
      else
        do! toStream.AsyncWrite(buf, 0, read)
        return! doBlock () }
  doBlock () 
```

它是从这段代码中调用的：

```
use fs = new FileStream(targPath, FileMode.CreateNew, FileAccess.ReadWrite)
do! req.InputStream |>> fs 
```

并使用来自 Windows Phone 7.1 模拟器的此代码通过 HTTP 请求：

```
public void Send()
{
    var b = new UriBuilder(_imageService.BaseUrl) {Path = "/images"};

    var req = WebRequest.CreateHttp(b.Uri);
    req.ContentType = "image/jpeg";
    req.Method = "POST";
    var imgLen = SelectedImage.ImageStream.Length;
    req.Headers[HttpRequestHeader.ContentLength] = imgLen.ToString(CultureInfo.InvariantCulture);
    req.Accept = "application/json";
    req.BeginGetRequestStream(RequestReady, new ReqState(req, imgLen));
}

void RequestReady(IAsyncResult ar)
{
    var state = (ReqState)ar.AsyncState;
    var req = state.Request;

    var reqStream = req.EndGetRequestStream(ar);

    SmartDispatcher.BeginInvoke(() =>
        {
            using (var sw = new StreamWriter(reqStream))
            using (var br = new BinaryReader(SelectedVoucher.ImageStream))
            {
                var readBytes = br.ReadBytes(state.ImgLen);

                // tried both 2
                sw.Write(readBytes);
                //sw.Write(Convert.ToBase64String(readBytes));
                sw.Flush();
                sw.Close();
            }
            req.BeginGetResponse(ResponseReady, req);
        });
}

// WHY IS IT YOU ARE NOT CALLED???
void ResponseReady(IAsyncResult ar)
{
    try
    {
        var request = (HttpWebRequest)ar.AsyncState;
        var response = request.EndGetResponse(ar);

        SmartDispatcher.BeginInvoke(() =>
            {
                var rdr = new StreamReader(response.GetResponseStream());
                var msg = rdr.ReadToEnd();

                var imageLocation = response.Headers["Location"];

                Debug.WriteLine(msg);
                Debug.WriteLine(imageLocation);
            });
    }
    catch (WebException ex)
    {
        Debug.WriteLine(ex.ToString());
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.ToString());
    }
} 
```

不成功。`ResponseReady`回调永远不会到达。

同时，这段代码运行良好：

```
open System
open System.Net.Http // WebAPI nuget

let sync aw = Async.RunSynchronously aw

let postC<'a> (c : HttpClient) (r : Uri) (cont : HttpContent) =
  let response = sync <| Async.AwaitTask( c.PostAsync(r, cont) )
  let struc:'a = sync <| deserialize<'a> response
  response, struc

let withContent<'a> (fVerb : (HttpClient -> Uri -> HttpContent -> _ * 'a))=
  let c = new HttpClient()
  fVerb c

[<Test>]
let ``POST /images 201 + Location header`` () =
  let post = withContent<MyImage> postC
  let bytes = IO.File.ReadAllBytes("sample.jpg")
  let hash = SHA1.Create().ComputeHash(bytes) |> Convert.ToBase64String
  let pic = new ByteArrayContent(bytes)
  pic.Headers.Add("Content-Type", "image/jpeg")
  pic.Headers.Add("X-SHA1-Hash", hash)
  let resp, ri = (resource "/images", pic) ||> post

  resp.StatusCode =? Code.Created
  ri.sha1 =? hash
  mustHaveHeaders resp 
```

我无法让 Fiddler2 与 WP7 一起工作。

**编辑：欢迎来到牦牛。我自己已经搬到了更绿色的牧场；）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:03:29.613

您应该在发送和使用 BufferStream 输入输出之前将字节放入

# javascript - 具有多个签名的文档构造函数

> ID：10615467
> 
> 赞同：3
> 
> 时间：2012-05-16T09:17:44.943
> 
> 标签：javascript, jsdoc

我想知道如何使用 jsdoc 为构造函数定义两个签名：

```
makeClass("Person",
/** @lends Person */
{
    /**
        @constructs
        @param {int} p1
    */
    /**
        @constructs
        @param {string} p1
    */
    constructor: function () {

    },

    /**
        @name Person.prototype.func
        @function
        @param {object} arg arg desc
    */
    /**
        @name Person.prototype.func^2
        @function
        @param {int} arg arg desc
        @param {int} arg2 arg2 desc
    */
    func: function () {

    }
}); 
```

这会产生一个带有 {string} p1 的构造函数。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:24:06.580

JSDoc 没有可与 Visual Studio XML Doc 多重签名相媲美的概念。一种选择是将参数记录为具有多种可能的类型，并标记一些可选的。

```
/**
 * @param {Number|Object} arg Description of arg
 * @param {Number} [arg2] Description of arg2
 */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T03:04:37.160

[JavascriptMVC](http://javascriptmvc.com)项目使用/创建的文档工具[DocumentJS](https://github.com/bitovi/documentjs)[发布了一个新的“@signature”注释](https://gist.github.com/justinbmeyer/6171192#documentjs)，允许您为同一方法注释多个签名。

我找不到太多[文档](http://javascriptmvc.com/docs/DocumentJS.tags.signature.html)，但根据[来源](https://github.com/bitovi/canjs/blob/v1.1.7/observe/observe.js#L412)（为简洁而编辑），它看起来很简单：

```
 /**
     * @signature `observe.attr()`
     * @return {Object<String, *>} an object with all the properties in this `can.Observe`.
     * 
     * @signature `observe.attr(key)`
     * @param {String} key the property to read
     * @return {*} the value assigned to _key_.
     *
     * @signature `observe.attr(key, value)`
     * @param {String} key the property to set
     * @param {*} the value to assign to _key_.
     * @return {can.Observe} this Observe, for chaining
     */
   attr: function( attr, val ) { 
```

# c# - Winforms：带有信息文本的等待光标

> ID：10615468
> 
> 赞同：3
> 
> 时间：2012-05-16T09:17:46.413
> 
> 标签：c#, .net, winforms, cursor

是否有可能在等待光标旁边显示一个小的信息文本。这将是一个不错的功能，可以在用户等待期间向用户提供一些活动信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:34:06.963

是的。您必须在鼠标位置旁边使用标签。只需尝试以下代码：

```
private void pictureBox1_MouseEnter(object sender, EventArgs e)
        {
            pictureBox1.Cursor = Cursors.WaitCursor;
            Label lb = new Label();
            lb.Location = new Point(MousePosition.X-this.Left,MousePosition.Y-this.Top);
            lb.Text = "Your Info";
            this.Controls.Add(lb);

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:25:07.530

我建议使用自定义光标。[C# 教程 - 如何使用自定义游标](http://www.switchonthecode.com/tutorials/csharp-tutorial-how-to-use-custom-cursors)

# iphone - 如何使用 NSUserDefaults 保存按钮状态

> ID：10615469
> 
> 赞同：1
> 
> 时间：2012-05-16T09:17:51.417
> 
> 标签：iphone, objective-c, ios, nsuserdefaults

我是 iphone 新手。我有一点疑问，当我们单击该按钮时，我有一个名为 Sync 的按钮，以下操作将执行：

```
- (IBAction)syncOffClickedInRegisterUserScreen:(id)sender {
    if ([syncOnorOff.titleLabel.text isEqualToString:@"Sync off"]) {
        [syncOnorOff setTitle:@"Sync on" forState:UIControlStateNormal];
    } 
    else {
        [syncOnorOff setTitle:@"Sync off" forState:UIControlStateNormal];
    }
} 
```

由于上面的代码，当我单击按钮时，标题会交替出现。

如何使用 NSUserDefaults 保存具有不同标题的按钮状态。如果有人知道这个请帮助我....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:27:45.197

您需要定义一个键来保存此按钮示例：

```
 #define KEYSTATE @"key.syncState" 
```

并在您的功能中：

```
-  (IBAction)syncOffClickedInRegisterUserScreen:(id)sender {

    // Get User Defaults
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    if ([syncOnorOff.titleLabel.text isEqualToString:@"Sync off"]) {
        [prefs setBool:NO forKey:KEYSTATE];
        [syncOnorOff setTitle:@"Sync on" forState:UIControlStateNormal];
    } 
    else {
        [prefs setBool:YES forKey:KEYSTATE];
        [syncOnorOff setTitle:@"Sync off" forState:UIControlStateNormal];
    }

    // save 
    [prefs synchronize];
} 
```

然后你可以得到布尔（`viewDidLoad:`例如）来设置按钮，如下所示：

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:KEYSTATE]) {
    // Set ON
}
else {
    // Set OFF
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T13:49:21.377

```
UIButton *button;

// get nsuserdefaults
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
// save selected state
[defaults setBool:button.selected forKey:@"myButtonState"]; 
```

然后稍后，在应用程序再次启动后......

```
// restore the selected state
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
button.selected = [defaults boolForKey:@"myButtonState"]; 
```

# delphi - 具有 stdcall 调用约定的回调系统的组件模式

> ID：10615473
> 
> 赞同：2
> 
> 时间：2012-05-16T09:18:13.197
> 
> 标签：delphi, pointers, methods, callback, stdcall

这个问题就是从这个问题中产生[的](https://stackoverflow.com/questions/10460171/get-pointer-of-member-function-delphi)。
问题是：创建可以容纳来自系统的许多回调命令的非可视组件。用户可以在 IDE 中定义无限数量的回调。回调将在 TCollection 中定义为 TCollectionItem。

这是一种效果很好的模式，但也有一些缺点。（稍后描述）因此我想知道是否可以做得更好;-)

这是一个主要组件，用户可以在IDE中通过CommandsTable集合定义无限数量的回调函数

```
TMainComp = class(TComponent)  
private
   CallbacksArray: array [0..x] of pointer;
   procedure BuildCallbacksArray;    
public 
   procedure Start;
published
   property CommandsTable: TCommandCollection read FCommandsTable write SetCommandsTable;
end; 
```

每个集合项都是这样的，InternalCommandFunction 是回调，从系统调用。（标准调用约定）

```
TCommandCollectionItem = class(TCollectionItem)
public
   function InternalCommandFunction(ASomeNotUsefullPointer:pointer; ASomeInteger: integer): Word; stdcall;
published
   property OnEventCommand: TComandFunc read FOnEventCommand write FOnEventCommand;
end; 
```

```
TComandFunc = function(AParam1: integer; AParam2: integer): Word of Object; 
```

这是一个实现。整个过程可以从“开始”程序开始

```
procedure TMainComp.Start;
begin  
  // fill CallBackPointers array with pointers to CallbackFunction
  BuildCallbacksArray;

  // function AddThread is from EXTERNAL dll. This function creates a new thread, 
  // and parameter is a pointer to an array of pointers (callback functions).
  // New created thread in system should call our defined callbacks (commands) 
  AddThread(@CallbacksArray);
end; 
```

**这是有问题的代码。我认为获取“InternalEventFunction”函数指针的唯一方法是使用 MethodToProcedure() 函数。**

```
procedure TMainComp.BuildCallbacksArray;
begin
   for i := 0 to FCommandsTable.Count - 1 do begin
      // it will not compile
      //CallbacksArray[i] := @FCommandsTable.Items[i].InternalEventFunctionWork;

      // compiles, but not work
      //CallbacksArray[i] := @TCommandCollectionItem.InternalCommandFunction;

      // works pretty good
      CallbacksArray[i] := MethodToProcedure(FCommandsTable.Items[i], @TCommandCollectionItem.InternalCommandFunction);

   end;         
end; 
```

```
function TEventCollectionItem.InternalEventFunction(ASomeNotUsefullPointer:pointer; ASomeInteger: integer): Word; stdcall;
begin
  // some important preprocessing stuff
  // ...

  if Assigned(FOnEventCommand) then begin
     FOnEventCommand(Param1, Param2);
  end;
end; 
```

正如我之前描述的，它工作正常，但是函数 MethodToProcedure() 使用了**Thunk**技术。我喜欢避免这种情况，因为程序无法在启用了数据执行保护 (DEP) 的系统上以及在 64 位架构上运行，可能需要全新的 MethodToProcedure() 函数。
你知道一些更好的模式吗？

* * *

*只是为了完成，这里是一个 MethodToProcedure()。（不知道原作者是谁）。*

```
TMethodToProc = packed record
    popEax: Byte;
    pushSelf: record
      opcode: Byte;
      Self: Pointer;
    end;
    pushEax: Byte;
    jump: record
      opcode: Byte;
      modRm: Byte;
      pTarget: ^Pointer;
      target: Pointer;
    end;
  end;    

function MethodToProcedure(self: TObject; methodAddr: Pointer): Pointer;
var
  mtp: ^TMethodToProc absolute Result;
begin
  New(mtp);
  with mtp^ do
  begin
    popEax := $58;
    pushSelf.opcode := $68;
    pushSelf.Self := Self;
    pushEax := $50;
    jump.opcode := $FF;
    jump.modRm := $25;
    jump.pTarget := @jump.target;
    jump.target := methodAddr;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:45:32.880

如果您可以将 DLL 更改为接受记录数组而不是指针数组，那么您可以将记录定义为同时包含回调指针和对象指针，并为回调签名提供一个额外的指针参数。然后定义一个简单的代理函数，DLL可以以对象指针作为参数调用，代理可以通过该指针调用真正的对象方法。无需 thunking 或低级汇编，无需特殊编码即可在 32 位和 64 位下工作。类似于以下内容：

```
type
  TCallback = function(AUserData: Pointer; AParam1, AParam2: Integer): Word; stdcall;

  TCallbackRec = packed record
    Callback: TCallback;
    UserData: Pointer; 
  end;

  TCommandFunc = function(AParam1, AParam2: integer): Word of object; 

  TCommandCollectionItem = class(TCollectionItem) 
  private
    FOnEventCommand: TCommandFunc;
    function InternalCommandFunction(APara1, AParam2: Integer): Word; 
  published 
    property OnEventCommand: TCommandFunc read FOnEventCommand write FOnEventCommand; 
  end;  

  TMainComp = class(TComponent)  
  private
    CallbacksArray: array of TCallbackRec;
  public 
    procedure Start;
  published
    property CommandsTable: TCommandCollection read FCommandsTable write SetCommandsTable;
  end; 
```

.

```
function CallbackProxy(AUSerData: Pointer; AParam1, AParam2: Integer): Word; stdcall;
begin
  Result := TEventCollectionItem(AUserData).InternalEventFunction(AParam1, AParam2);
end;

procedure TMainComp.Start; 
var
  i: Integer;
begin 
  SetLength(CallbacksArray, FCommandsTable.Count);
  for i := 0 to FCommandsTable.Count - 1 do begin 
    CallbacksArray[i].Callback := @CallbackProxy; 
    CallbacksArray[i].UserData := FCommandsTable.Items[i]; 
  end;          
  AddThread(@CallbacksArray[0]);
end;    

function TEventCollectionItem.InternalEventFunction(AParam1, AParam2: Integer): Word;
begin 
  // ... 
  if Assigned(FOnEventCommand) then begin 
    Result := FOnEventCommand(Param1, Param2); 
  end; 
end; 
```

如果这不是一个选项，那么使用 thunk 是给定您展示的设计的唯一解决方案，并且您需要单独的 32 位和 64 位 thunk。不过，不要担心 DEP。只需使用`VirtualAlloc()`and`VirtualProtect()`而不是`New()`这样您就可以将分配的内存标记为包含可执行代码。这就是 VCL 自己的 thunk（例如，由`TWinControl`and使用`TTimer`）避免 DEP 干扰的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:13:17.067

由于您无法修改 DLL 代码，因此您别无选择，只能使用问题中代码样式的 thunk。您没有其他方法可以将实例信息传递给回调函数。

# jquery - jQuery 将数据追加到 li 的级别

> ID：10615476
> 
> 赞同：2
> 
> 时间：2012-05-16T09:18:26.163
> 
> 标签：jquery, html, click, html-lists

我正在寻找一种将 的数据响应附加到调用它`$.post()`的高度的方法。`li`

我知道它已经完成，但我找不到任何可以阅读的内容。那么，有什么想法吗？

方案

*   列表项1

*   列表项2

*   清单 item3，点击这里：

    ```
     * sublist item1
                          * sublist item2
                          * sublist item3 
    ```

*   清单项目4

## 更新

我拥有的唯一代码是有效的`$.post()`，我`console.log(data)`只是为了查看响应。

好的，我想实现这样的目标：[http](http://www.alistapart.com/d/horizdropdowns/horizontal.htm) ://www.alistapart.com/d/horizdropdowns/horizo​​ntal.htm的`$.post()`响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:25:32.770

关于它的外观的想法......

```
 $('yourliclass').click(function(){
       //do ajax
       $.ajax({
        .......
        .......

        success:function(data){ //data needs to be in json format
           var htmlcontent = "";
        htmlcontent = '<ul>';
        for(var i=0;i<data.length;i++){
        htmlcontent += '<li>'+data[i]['your_index']+'</li>';
    }
    htmlcontent += '</ul>';
        }
$(this).appendTo(htmlcontent);

}); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:26:10.780

试试这个

```
 var data;
        $(document).ready(function()
        {

            $(".list li").click(function()
            {
                $.post("filename.php",function(res)
                {
                     data="<li>"+res+"</li>";           
                });
                $(this).after(data);
            });
        });     

<body>
    <ul class="list">
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
    </ul>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:27:06.270

```
$('li.clickable').on('click', function() {
  var list = $(this);
  $.ajax({
      url: 'url_to_script',
      method: 'post',
      success: function(res) {

         var response = $(res); // assume that you response contains li tags i.e '<li>subitem 1</li>' and more
         list.append(response); // append response to list that clicked

         /* >> OR  << */
         // if you response contains data as array/field
         $.each(res, function(index, data) {
            list.append('<li>'+ data['some_text'] +'</li>'); // some_text is assumed property, you have something else
         });

        // ACCORDING TO YOUR COMMENT
        var sublist = '<ul>';
        $.each(res, function(index, data) {
            sublist += '<li>'+ data['some_text'] +'</li>'; // some_text is assumed property, you have something else
         });
            sublist += '</ul>'; // now sublist is like <ul><li>...</li>....</ul>
        list.append(sublist); // append the sublist to ul.clickable
      }
  });
}); 
```

**注意：您必须制作一些 CSS 来改善外观**

# android - 滚动视图不起作用

> ID：10615478
> 
> 赞同：1
> 
> 时间：2012-05-16T09:18:37.087
> 
> 标签：android, android-layout

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/scrollViewContact"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:fillViewport="true">
    <LinearLayout 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:id="@+id/contactOuterLayout"
    >

    <RelativeLayout 
        android:layout_height="fill_parent"
        android:id="@+id/contactOuterRelativeLayout" 
        android:layout_width="fill_parent"
        android:background="@drawable/radialback">

            <RelativeLayout android:id="@+id/relativeLayout1"
                android:layout_height="wrap_content"                     
                android:layout_width="fill_parent"
                android:layout_below="@+id/tableLayout1" 
                android:paddingBottom="10sp">

                <TableLayout
                    android:id="@+id/contactdetails"
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent"
                    android:stretchColumns="*" >

                    <TableRow 
                        android:id="@+id/mapView"
                        android:layout_height="wrap_content"
                        android:layout_width="fill_parent"
                        >
                        <LinearLayout 
                            android:id="@+id/liny"
                            android:layout_height="match_parent"
                            android:layout_width="match_parent"
                            android:orientation="horizontal"
                            android:weightSum="100">

                            <com.google.android.maps.MapView
                                 android:id="@+id/map"
                                 android:layout_height="100dp"
                                 android:layout_width="100dp"
                                 android:layout_marginLeft="20dp"
                                 android:layout_marginTop="15dp"
                                 android:enabled="true"
                                 android:clickable="true"
                                 android:apiKey="00n1pmS8eEhXhD5a6Q3UTDd6zortw9t4l_jXioQ"
                                />

                <TextView
                    android:id="@+id/MapAdrress"
                    android:layout_width="0dp"
                    android:layout_height="fill_parent"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="15dp"
                    android:layout_weight="30"
                    android:text="TextView" />

                        </LinearLayout>

                    </TableRow>

                    <TableRow android:layout_width="fill_parent"
                        android:layout_height="wrap_content">

                        <TableLayout android:id="@+id/contactinfo" 
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            >

                            <TableRow android:layout_width="fill_parent"
                                android:layout_height="wrap_content">
                                <TableLayout android:id="@+id/contactinfo2" 
                                    android:layout_width="fill_parent"
                                    android:layout_height="wrap_content">
                                    <!-- Telephone number, web-site etc -->         
                                </TableLayout>                                                                      
                            </TableRow> 

                    </TableLayout>              

                    </TableRow> 

                    <TableRow android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center">

                        <TableLayout android:id="@+id/contactinfo" 
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center"

                            >

                        <Button
                            android:id="@+id/butonek"
                            android:layout_width="10dp"
                            android:layout_height="wrap_content"
                             />

                    </TableLayout>

                    </TableRow>

                    <TableRow android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:gravity="center"
                        android:paddingTop="20dip">
                        <TableLayout android:layout_width="fill_parent"
                            android:layout_height="wrap_content">                                   
                            <TableRow android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:gravity="center_horizontal">
                                <TableLayout android:id="@+id/address" 
                                    android:layout_width="200dip"
                                    android:layout_height="wrap_content">
                                    <!-- Address -->
                                </TableLayout>
                            </TableRow>
                        </TableLayout>
                    </TableRow>                     
                    <TableRow android:layout_width="fill_parent"
                        android:layout_height="match_parent"
                        android:layout_gravity="center_horizontal"
                        android:gravity="center"
                        android:paddingTop="20dip">
                                        <ListView
                     android:id="@+id/contactlist"
                     android:layout_width="match_parent"
                     android:layout_height="match_parent" 
                     android:choiceMode="multipleChoice"
                     />

                    </TableRow> 
                </TableLayout>
            </RelativeLayout>

    </RelativeLayout>
</LinearLayout>
    </ScrollView> 
```

这是图片：

![在此处输入图像描述](../Images/5fa4ebaf8259d9c7e41dc467695a07c6.png)

我在列表中有 4 个元素，但我只能看到两个并且无法滚动。我怎么能这样做来滚动所有页面而不仅仅是列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:28:59.107

您不能将 ListView 放在 ScrollView 中。由于 ListView 有自己的 Scrolling 实现，将它放在 ScrollView 中会影响它的 Scroll 以及您的 ScrollView。因此，请以这样一种方式替换您的布局，即您在 ScrollView 中没有您的 ListView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:51:59.507

```
 <LinearLayout 
        android:layout_height="match_parent"
        android:layout_width="match_parent">
            <ListView
                 android:id="@+id/contactlist"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent" 
                 android:choiceMode="multipleChoice"
                 />
                 </LinearLayout> 
```

在这种情况下，我将 listView 放在 linearlayout 中，这解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:49:04.590

在滚动视图中添加列表视图并不是一个更好的实现。当您在滚动视图中有一个列表视图并且当您滚动列表视图时，android 很难做出改变，并且滚动将被滚动视图消耗，尽管您滚动列表视图，因此您的列表视图中的项目不会被抬起。所以你用线性布局替换你的滚动视图。

此外，通过查看您的布局设计，可以发现许多布局并不是真正需要的。你最好审查你的设计。Lint 可以帮助您删除不必要的布局。

# java - 打开的线程太多错误

> ID：10615479
> 
> 赞同：1
> 
> 时间：2012-05-16T09:18:41.263
> 
> 标签：java, multithreading, io

我正在使用开放目录项目 (ODP) 中的 URL 实现多线程 Wget。我收到以下错误：

```
java.io.FileNotFoundException: log (Too many open files)
at java.io.FileOutputStream.openAppend(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
at java.io.FileWriter.<init>(FileWriter.java:78)
at ODP.run(ODP.java:103) 
```

我读过这是因为它超过了系统变量中指示的打开文件描述符的限制： **cat /proc/sys/fs/file-max**

有没有办法限制可以同时启动的线程数？我认为它是通过可以运行 CPU 的线程数自动完成的。

谢谢！

**编辑：**这是 main 方法中的主循环：

```
 while (rs.next ()) {                
            // Process entry
            String rsc = rs.getString ("resource");
            String tpc = rs.getString("topic");             
            (new ODP(rsc, tpc, rs.getString("description"))).start();   
            BufferedWriter outLog = new BufferedWriter(new FileWriter("log", true));
    outLog.write(count + ": " + rsc + " | " + tpc  + "\n");
    outLog.close(); 
            ++count;                
        } 
```

在**ODP.run()**方法中，我创建了一个 BufferedWritter：

```
 BufferedWriter out = new BufferedWriter(new FileWriter(cat.split("/")[1] + ".webtrec", true));
        out.write(webtrec);
        out.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:21:43.040

在整个问题中，您似乎对*线程*和*文件感到困惑。*

大多数操作系统都会限制给定进程可以打开的文件描述符的数量。这包括文件系统上的实际文件，通常还包括诸如数据库或服务器连接之类的套接字。（这与您的进程中运行的线程数无关。）

如果您当前持有最大数量的打开文件句柄，则您的进程将无法再打开。这通常是资源泄漏的迹象——即您没有正确关闭 I/O 资源。 *很少*，如果您的应用程序合法地需要同时读取数万个文件，您是否需要增加操作系统限制。

在您的`ODP.run`方法中，您是否`FileWriters`在循环中创建，但未能调用`close()`它们？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:31:17.743

> 有没有办法限制可以同时启动的线程数？

是的，通过使用某种线程池。如果您使用的是 Java 1.5 及更高版本，那么您很幸运；您可以使用[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)来限制并发线程的数量。

# android - ActionBarSherlock - 将溢出的操作项显示为图标 + 文本

> ID：10615484
> 
> 赞同：24
> 
> 时间：2012-05-16T09:18:53.070
> 
> 标签：android, actionbarsherlock

**语境**

我正在使用 ActionbarSherlock 创建一个带有一些操作项的操作栏。其中一些是溢出的，因此它们显示在溢出子菜单中。

**我的问题**

那些溢出的项目仅作为文本显示在子菜单中。

我已经尝试过，`MenuItem.SHOW_AS_ACTION_IF_ROOM`但两者都有相同的行为：`MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT``setShowAsAction()`

![没有图标的溢出项目](../Images/33dd4ba4fcb1cdadaee84d80c930859e.png)

**我想要的是**

是否可以在溢出子菜单中将这些项目显示为`<their_icon>`+ `<their_text>`？像这样的东西：

![带有图标的溢出项目](../Images/8325b8bd345b3206bfe790ad2096861c.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T19:01:25.537

我也不明白为什么子菜单可以有图标和菜单只有文本。也许将菜单项作为子菜单添加到*根*菜单可以帮助您。:)

提一下，添加这样的图标将迫使您使用 ActionBar (Sherlock)，而不是在旧版本的 Android 中按下菜单键时在底部显示菜单的标准方式。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/root_menu"
    android:icon="@drawable/ic_menu_moreoverflow_normal_holo_light"
    android:showAsAction="always"
    android:title="More">
    <menu>
        <item
            android:id="@+id/menu_settings"
            android:icon="@drawable/ic_menu_settings_holo_light"
            android:showAsAction="never"
            android:title="Settings" />
        <item
            android:id="@+id/menu_about"
            android:icon="@drawable/ic_menu_info_details"
            android:showAsAction="never"
            android:title="About"/>
   </menu>
</item>
</menu> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T19:12:21.350

1、将com.actionbarsherlock.internal.view.menu.MenuBuilder.java中“mOptionalIconsVisible”的值改为true。然后你会一直看到这些图标。仅适用于 ActionBarSherlockCompact.java。

2、修改源代码为MenuBuilder.java和MenuWrapper.java添加一个api来设置图标。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-27T08:58:48.710

我有一个解决这种情况的方法。如果您确定要放入溢出菜单中的内容，则可以将它们放入子菜单中，并且可以通过覆盖`onCreateOptionsMenu`方法将该子菜单项的图标和标题与子菜单一起放置。

这是我为实现此功能所做的工作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add(0, 1, 1, "MENU ONE TITLE")
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    SubMenu subMenu = menu.addSubMenu(0, 0, 2, "MENU TWO TITLE");

    subMenu.add(0, 2, 2, "SUB MENU ONE TITLE")
    .setIcon(R.drawable.sub_menu_one_icon);

    subMenu.add(0, 3, 3, "SUB MENU TWO TITLE")
    .setIcon(R.drawable.sub_menu_two_icon);

    MenuItem subMenuItem = subMenu.getItem();
    subMenuItem.setIcon(R.drawable.menu_two_icon);
    subMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-24T13:07:24.150

实际上，即使对于为溢出菜单创建的弹出菜单，也有一种方法可以在文本中添加图标。例如：

```
final MenuItem menuItem=...
final ImageSpan imageSpan=new ImageSpan(this,R.drawable.ic_stat_app_icon);
final CharSequence title=" "+menuItem.getTitle();
final SpannableString spannableString=new SpannableString(title);
spannableString.setSpan(imageSpan,0,1,0);
menuItem.setTitle(spannableString); 
```

这将在菜单项的开头放置一个图标，就在其原始文本之前。

# c - C中以字符串为返回类型的函数

> ID：10615492
> 
> 赞同：2
> 
> 时间：2012-05-16T09:19:13.757
> 
> 标签：c, function, return-type

我需要一个函数来返回一个字符串。我使用以下代码来声明函数：

```
const char* serv_con(char app_data[50])
{
    char send_data[1024],recv_data[1024];
    //i am avoiding code segments irrelevant to the issue.
    return recv_data;
} 
```

然后像这样在main中调用函数：

```
int main()
{
    char ser_data[50], app_data[50];
    ser_data[0] = '\0';
    app_data[0] = '\0';
    //avoiding code segments irrelevant to the issue.
    app_data = serv_con(ser_data); //function call
} 
```

在编译它给出了错误：

```
connect.c:109: error: incompatible types when assigning to type ‘char[50]’ from type ‘const char *’ 
```

然后我用 std::string 替换了声明中的*const char*。现在的声明如下：

```
std::string serv_con(char app_data[50])
{
    char send_data[1024],recv_data[1024];
    //avoiding code segments irrelevant to the issue.
    return recv_data;
} 
```

并以与上述相同的方式调用它。但它仍然在编译时给出以下错误：

```
connect.c:13: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘:’ token 
```

请告诉我如何将字符串作为函数的返回类型。我工作的平台是linux。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T09:29:06.677

```
const char* serv_con(char app_data[50])
{
  char send_data[1024],recv_data[1024];
  //i am avoiding code segments irrelevant to the issue.
  return recv_data;
} 
```

这是行不通的，因为您要返回一个指向局部变量的指针，该指针在返回后无效。您需要`recv_data`在堆上分配才能在返回后使用它

```
char* serv_con(char app_data[50])
{
  char send_data[1024];
  char *recv_data = malloc(1024);
  if (!recv_data)
      return NULL;

  // ...
  return recv_data;
 } 
```

然后将主要功能更改为

```
int main()
{
 char ser_data[50];
 char *app_data;
 ser_data[0] = '\0';
 //avoiding code segments irrelevant to the issue.
 app_data = serv_con(ser_data); //function call
 if (!app_data) {
   // error
 }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T09:27:53.940

你在做什么是一个非常糟糕的主意。该`serv_con`函数在堆栈上为数组分配一些空间`recv_data`，然后返回指向该位置的指针。当然，一旦您调用另一个函数，数据就会被清除，从而导致难以诊断的错误。如果必须从函数返回一块内存，请使用`malloc`. 基本上，永远不要返回指向堆栈上对象的指针。

当您将指针`serv_con`分配给 时`app_data`，它已经分配了一些空间。没有理由这样做：只需声明`app_data`为 a`char *`将指向分配的存储空间`serv_con`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:47:02.267

返回指向本地数组或数组本身的指针是一个坏主意。

即使您在函数内部执行 malloc，调用者也需要释放该内存，这又不是一个很好的做法。

我建议最好的方法是传递一个输出参数，即传递您希望将结果作为参数复制到其中的数组。

```
int serv_con(char app_data[50], char recv_data[50])
{
    char send_data[1024];
     //recv_data[1024];
    //i am avoiding code segments irrelevant to the issue.
    return 1; // return status success or failure which can be tested in main
} 
```

然后像这样在main中调用函数：

```
int main()
{
    char ser_data[50], app_data[50];
    ser_data[0] = '\0';
    app_data[0] = '\0';
    //avoiding code segments irrelevant to the issue.

    serv_con(ser_data, app_data); //function call
} 
```

我发现并纠正了一个小错误。您在 main 中传递的 app_data 大小为 50，而您尝试从函数 serv_con 返回的大小为 1024。这应该是一致的。我在上面的代码中都使用了 50 号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:54:05.553

从你的问题我可以很确定你是一个初学者。请阅读一本好的教科书，即[The C Programming Language](https://rads.stackoverflow.com/amzn/click/com/0131103628)。

除了错误，您还必须得到这个。
警告：函数返回局部变量的地址。

始终查看警告。[Greg](https://stackoverflow.com/users/163956/greg-inozemtsev)已经回答了这个问题。

# drupal - 如何以编程方式在 Drupal 7 中批量创建/更新别名

> ID：10615502
> 
> 赞同：7
> 
> 时间：2012-05-16T09:19:38.140
> 
> 标签：drupal, drupal-7, pathauto, drupal-path-aliases

如何仅使用 drupal 7 核心以编程方式批量化别名节点 url（使用它很棒的批处理 API！）？

我的问题实际上是**如何使用 drupal 并识别存储在 url_alias 表中的别名**？

## 背景：

我从事的项目有超过 200,000 个节点（Drupal 7），并且使用 pathauto 模块（每 20 分钟 10 个别名）为所有这些节点的系统默认 URL 设置别名实际上需要数年时间。我尝试了一切来提高这些性能，但失败了（尝试了不同的服务器、不同的 mysql 优化、不同的模式）。

我已经准备好批处理功能，它们在 20 分钟内为 200,000 个节点起别名，它们创建了存储在表“url_alias”中的干净别名。我花了很多时间查看 pathauto 代码，但无法找到或理解该模块如何为 drupal 提供识别批量更新路径的命令。

感谢您的提示、答案或想法……非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T15:44:12.453

这是将更新指定类型的所有节点的别名的函数

```
<?php
  module_load_include('inc', 'pathauto');
  module_load_include('inc', 'pathauto.pathauto');

  // Get all nodes that need to be updated
  $query = db_select('node', 'n');
  $query->addField('n', 'nid');
  $query->condition('n.type', array('TYPE1', 'TYPE2'), 'IN');

  $nids = $query->execute()->fetchCol();

  // Save current action for new aliases and change it to delete old one.
  $alias_action = variable_get('pathauto_update_action', 0);
  variable_set('pathauto_update_action', PATHAUTO_UPDATE_ACTION_DELETE);

  pathauto_node_update_alias_multiple($nids, 'bulkupdate');

  // Restore original action for new aliases.
  variable_set('pathauto_update_action', $alias_action);

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:13:52.997

如果您在 hook_node_update 或 Rule 或其他内容中执行此操作，则新的 $node 将无法用于其他模块，如 token、pathauto 等，因此您不会得到预期的结果。一个解决方案是重置缓存`$node`：

```
<?php
// Reset the cached $node.
entity_get_controller('node')->resetCache(array($node->nid));

// Get all nids that reference this node. This is just an example.
$nids = db_query("SELECT entity_id FROM field_data_field_reference WHERE field_reference_target_id = {$node->nid}")->fetchCol();

// Include necessary Pathauto files.
module_load_include('inc', 'pathauto');
module_load_include('inc', 'pathauto.pathauto');

// Save current action for new aliases and change it to delete old one.
$alias_action = variable_get('pathauto_update_action', 0);
variable_set('pathauto_update_action', PATHAUTO_UPDATE_ACTION_DELETE);

pathauto_node_update_alias_multiple($nids, 'bulkupdate');

// Restore original action for new aliases.
variable_set('pathauto_update_action', $alias_action);

// Clear path cache. 
cache_clear_all('*', 'cache_path', TRUE);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:49:03.763

检查以确保为 pathauto 包设置了变量。

变量名是pathauto_[entity]_[bundle]_pattern，所以pathauto_node_[bundle]_pattern

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-30T19:52:44.053

此代码基于 Eugene Fidelin 的代码，但使用 $conf 全局而不是变量集。

```
 module_load_include('inc', 'pathauto');
  module_load_include('inc', 'pathauto.pathauto');

  // Get all nodes that need to be updated.
  $query = db_select('node', 'n');
  $query->addField('n', 'nid');
  $query->condition('n.type', array('TYPE1', 'TYPE2'), 'IN');

  $nids = $query->execute()->fetchCol();

  global $conf;
  // Store old value.
  $old_pathauto_var = $conf['pathauto_update_action'];
  // Set new value.
  $conf['pathauto_update_action'] = PATHAUTO_UPDATE_ACTION_DELETE;

  // Generate aliases.
  pathauto_node_update_alias_multiple($nids, 'bulkupdate');

  // Restore original action for new aliases.
  $conf['pathauto_update_action'] = $old_pathauto_var; 
```

# java - 数据在哈希表中被覆盖

> ID：10615503
> 
> 赞同：1
> 
> 时间：2012-05-16T09:19:38.520
> 
> 标签：java, hashtable

哈希表中的数据被同一个键覆盖。我试图在不同的时间间隔针对同一个键添加“n”个数据，以前添加到哈希表的数据被覆盖，如何解决这个问题？

```
if (value == RepeatRule.DAILY) {

                            setHashRepeatData(repDates, eventBean,
                                    listRepeatEvents);

                        }
                        if (value == RepeatRule.WEEKLY) {

                            setHashRepeatData(repDates, eventBean,
                                    listWeekEvents);
                        }

private void setHashRepeatData(Vector repDates, EventData eventBean,
            Vector listOfRepeatData) {

        if (repDates != null) {
            System.out.println("the size of repDates is :" + repDates.size());
            System.out.println("summ" + eventBean.getSummary());
            listOfRepeatData.addElement(eventBean);
            for (int i = 0; i < repDates.size(); i++) {
                String currentRepDate = (String) repDates.elementAt(i);
                System.out.println("currentRepDate" + currentRepDate);

                listUserEvents.put(currentRepDate, listOfRepeatData);

            }
        }

    } 
```

我在不同的时间间隔调用上述方法并尝试为相同的键设置数据。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:27:52.883

您正在寻找一个多值映射（对于同一个键，您可以有多个值）。

要么你自己实现这个（通过改变你的`Map<K,V>`to `Map<K,List<V>>`），但这对作家来说有点痛苦。

或者使用提供该功能的 Guava：[Multimaps](http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Multimaps)（我会推荐这种方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:47:16.493

如果您自己做，这将是您想要实现的示例实现：

```
// I took a set because I wanted have the inputs sorted
HashMap<String, Set<String>> var = new HashMap<String, Set<String>>();

String key= "key";
String value = "value";

if(var.containsKey(key)){
// the set is already there we can proceed to add the value
} else {
    //first time you have to create the List
    var.put(key, new TreeSet<String>());
}
var.get(key).add(value); 
```

您将不得不根据您的情况对其进行修改，例如：

```
HashMap<String, Vector<String>> var = new HashMap<String, Vector<String>>();

String key= "key";
String value = "value";

if(var.containsKey(key)){
// the set is already there we can proceed to add the value
} else {
    //first time you have to create the List
    var.put(key, new Vector<String>());
}
var.get(key).addElement(value); 
```

# python - 为什么python没有提到这个非常简单的场景？

> ID：10615510
> 
> 赞同：-6
> 
> 时间：2012-05-16T09:19:56.007
> 
> 标签：python, maven

为什么python没有提到这个如此基本的场景？

[处理多个模块版本](https://stackoverflow.com/questions/6570635/how-to-deal-pip-install-multiple-package-versions)

我怎么需要自己处理？在 java 中，我有 maven 产品来为我完成所有这些工作？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:45:16.807

查看 virtualenv 和 virtualenvwrapper。像 maven 一样，这些是第三方项目，而不是语言分发本身的一部分。我不知道 maven 究竟做了什么，所以我不能确定 virtualenv 是否直接等价。它主要用于开发和测试环境。

# java - 多个对象的相同参考..？

> ID：10615512
> 
> 赞同：-5
> 
> 时间：2012-05-16T09:20:05.900
> 
> 标签：java

> **可能重复：**
> [字符串对象的哈希码](https://stackoverflow.com/questions/10615151/hash-code-for-string-objects)

嗨，我是 java 编程新手，我想创建多个 Myclass 的 obj，为此编写了下面的代码。为什么它会生成相同的对象

```
class Myclass {

        private static Myclass single;
        private Myclass() {

        }
        public static synchronized Myclass obj() {
            if (single == null) {
                single = new Myclass();
            }
            return single;
        }
    }
    public class Demo {
        public static void main(String args[]) {
            Myclass obj = Myclass.obj();
            System.out.println("one  "+obj);
            Myclass obj1 = Myclass.obj();
            System.out.println("two  "+obj1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:23:47.890

You're explicitly designing MyClass.obj() to return a singleton, so you shouldn't be suprised that is returns the same instance - so both references point to the same object and have the same hashcode.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:21:28.783

实际上是单个实例，两者都是同一个对象

# android - Android Irrlicht Bullet 随机内存管理崩溃

> ID：10615518
> 
> 赞同：0
> 
> 时间：2012-05-16T09:20:25.300
> 
> 标签：android, memory, physics, bullet, irrlicht

我一直在努力修复我们游戏中的一些最终错误。游戏使用 Irrlicht 和 Bullet 物理的 Android 端口。

在 OS X 和 Windows 上尝试了相同的代码，没有任何问题。但是，当我们将代码移植到 Android NDK 时，现在出现随机崩溃。大多数崩溃都`libc.so`可能是空指针异常。我们不在`scenenode->remove()`我们的代码中使用，而是使用`smgr->addToDeletionQueue`.

崩溃是如此随机，以至于它发生在以下语句中。

1.  `libc.so`
2.  `smgr->drawall()`
3.  `stepsimulation`在子弹中。

当我们卸载一个关卡并加载下一个关卡或重新加载一个关卡时，90% 的时间都会发生错误。我们首先怀疑编译器并使用了stlport。应该提升图书馆的帮助吗？

我敢肯定，我提供的信息很少能猜出问题所在。但是由于相同的游戏代码在其他平台上运行良好，我只是想清除我对编译器相关差异的怀疑。

一个简单`malloc`的然后`delete`在 android ndk 中在删除时崩溃。因此，我想更好地了解我们正在努力解决的问题是否是与编译器相关的愚蠢问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:21:31.220

在摆弄这个问题几个星期后，我终于找到了问题的根源。

我像这样初始化了一个char数组

```
char data = new char[10]; 
```

然后考虑像往常一样用 '\0' 填充最后一个字符

```
data[10] = '\0'; 
```

抛出一个空指针异常。

当我在 Windows 中运行相同的代码时，我能够查明这个问题。即使在 Windows 上，在附加调试器的情况下运行时也不会出现问题。但是，当我通过直接打开 exe 运行应用程序时，它崩溃了。所以我不得不使用程序“应用程序验证器”来确定问题所在。

# c# - 使用反射更新列表中的值

> ID：10615523
> 
> 赞同：2
> 
> 时间：2012-05-16T09:20:40.547
> 
> 标签：c#, .net, list, reflection

我有一个具有 100 多个属性的对象。然后我有一个包含很多这些对象的列表。我需要计算列表中所有属性的最小值、最大值、中值和中值。

所以不要写：

```
Ag = _valuesForExtraCalculations.Min(c => c.Ag),
Al = _valuesForExtraCalculations.Min(c => c.Al),
Alkal = _valuesForExtraCalculations.Min(c => c.Alkal), 
```

那 100 次，我以为我可以使用反射，所以我写道：

```
var Obj = new Analysis();
Type t = Obj.GetType();
PropertyInfo[] prop = t.GetProperties();
foreach (var propertyInfo in prop)
{
    propertyInfo = _valuesForExtraCalculations.Min(?????);
} 
```

但是我不确定在 foreach 循环中要写什么，所以我可以将该属性的新最小值设置为我创建的新分析对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:08:13.043

据我了解您的问题，您可以使用表达式来实现：

```
/// <summary>
/// A class with many-many properties
/// </summary>
class MyClass
{
    public Decimal A { get; set; }
    public Decimal B { get; set; }
    public Decimal C { get; set; }
}

class PropertyHelper<T, TProperty>
{
    private readonly Func<T, TProperty> selector;
    private readonly Action<T, TProperty> setter;

    public PropertyHelper(Func<T, TProperty> selector, Action<T, TProperty> setter)
    {
        this.selector = selector;
        this.setter = setter;
    }

    public Func<T, TProperty> Selector
    {
        get { return selector; }
    }

    public Action<T, TProperty> Setter
    {
        get { return setter; }
    }
}

class AggregateHelper<T, TProperty>
{
    private readonly Dictionary<PropertyInfo, PropertyHelper<T, TProperty>> helpers;

    public AggregateHelper()
    {
        this.helpers = typeof(T)
            .GetProperties()
            .Where(p => p.PropertyType == typeof(TProperty))
            .ToDictionary(p => p, p => new PropertyHelper<T, TProperty>(MakeSelector(p), MakeSetter(p)));
    }

    private Func<T, TProperty> MakeSelector(PropertyInfo property)
    {
        var parameterExpr = Expression.Parameter(typeof(T));
        var lambda = (Expression<Func<T, TProperty>>)Expression.Lambda(
            Expression.Property(parameterExpr, property), parameterExpr);

        return lambda.Compile();
    }

    private Action<T, TProperty> MakeSetter(PropertyInfo property)
    {
        var instanceExpr = Expression.Parameter(typeof(T));
        var parameterValueExpr = Expression.Parameter(typeof(TProperty));
        var lambda = (Expression<Action<T, TProperty>>)Expression.Lambda(
            Expression.Call(instanceExpr, property.GetSetMethod(), parameterValueExpr),
            instanceExpr,
            parameterValueExpr);

        return lambda.Compile();
    }

    public IEnumerable<PropertyInfo> Properties
    {
        get { return helpers.Keys; }
    }

    public PropertyHelper<T, TProperty> this[PropertyInfo property]
    {
        get { return helpers[property]; }
    }
} 
```

用法：

```
 public static void Do()
    {
        var target = new MyClass();
        var list = new List<MyClass>
        {
            new MyClass { A = 1M, B = 2M, C = 3M },
            new MyClass { A = 10M, B = 20M, C = 30M },
            new MyClass { A = 100M, B = 200M, C = 300M }
        };

        // calculate 'min' for all decimal properties
        var helper = new AggregateHelper<MyClass, Decimal>();

        foreach (var property in helper.Properties)
        {
            var propertyHelper = helper[property];

            propertyHelper.Setter(target, list.Min(propertyHelper.Selector));
        }
    } 
```

编译的 lambda 比反射工作得更快，并且不会有装箱/拆箱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:31:33.230

您需要知道属性的确切类型。假设它是`int`：

```
var Obj = new Analysis();
Type t = Obj.GetType();
PropertyInfo[] prop = t.GetProperties();
foreach (var pi in prop.Where(p => p.PropertyType == typeof(int)) 
{
    int min = _valuesForExtraCalculations.Min(c => (int)pi.GetValue(c, null));
    propertyInfo.SetValue(Obj, min, null);
} 
```

如果您有不同的类型要计算最小值，您将无法检查类型并相应地进行切换，以便`Min`调用正确的重载。

我仍然不会认为这是最好或最高效的解决方案。

`PropertyInfo.GetValue`并且`PropertyInfo.SetValue`比直接字段访问慢（[根据这篇文章](http://lotsacode.wordpress.com/2010/04/12/getting-data-through-reflection-getvalue/)要慢得多），而且会涉及很多拳击。您会调用`PropertyInfo.GetValue`(countOfObjects * countOfProperties) 次。根据项目和属性的数量，这可能会引起关注。

# android - 按下按钮时计算距离和速度

> ID：10615524
> 
> 赞同：-7
> 
> 时间：2012-05-16T09:20:43.307
> 
> 标签：android

我正在尝试使用 android gps 的小型跑步者应用程序。这是我的情况。你能帮忙吗？或者告诉我任何可用的源代码当你走路时，它应该告诉你你的步行速度和你走过的距离。只有一个按钮

开始

当您按开始时，其标签应更改为 PAUSE

点击暂停应该暂停您的测量。当您按下 PAUSE 时，您现在应该显示 2 个按钮 STOP 和 RESTART

如果 GPS 未打开，它应该要求您打开手机 GPS。我可以看到您的应用程序确实可以识别它，稍微添加一下应该可以得到我正在寻找的东西。

我的要求非常简单。只是速度和距离

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:11:20.830

对，这是我将采取的方法：

*   创建一个空列表，其中包含具有 GPS 位置和 IsNew 标志的类
*   在开始单击时，将当前 GPS 位置添加到列表中（IsNew = true），并作为计时器
*   每 10 秒（可能会在测试后调整）在列表中弹出当前 GPS 位置（IsNew = false）
*   如果单击暂停，则停止计时器并弹出当前 GPS
*   恢复时，重新启动计时器，弹出当前 GPS (IsNew = true)
*   停止时，停止计时器和弹出 GPS

现在，在所有这些结束时，您将获得一个带有一些 IsNew 标志的 GPS 位置列表，可能是这样的：

*   GPS = {x, y, z}, IsNew = true //开始按钮点击
*   GPS = {x, y, z}, IsNew = false //计时器已过
*   GPS = {x, y, z}, IsNew = false //计时器已过
*   GPS = {x, y, z}, IsNew = false //计时器已过
*   GPS = {x, y, z}, IsNew = false //暂停点击
*   GPS = {x, y, z}, IsNew = true //点击重启
*   GPS = {x, y, z}, IsNew = false //计时器已过
*   GPS = {x, y, z}, IsNew = false //计时器已过
*   GPS = {x, y, z}, IsNew = false //计时器已过
*   GPS = {x, y, z}, IsNew = false //停止点击

现在该列表应该包含足够的信息，以便您使用一些不错的数学来计算总距离；-)（[这里有一些信息](http://www.movable-type.co.uk/scripts/latlong.html)）

请注意，如果`IsNew = true`那样，则不应在总距离中包括它与前一点之间的距离。

此外，速度 = 距离 / 时间

* * *

当然，您可以采用另一种方法并在处理每个点时计算总距离。这将允许您提供“半实时”反馈。

为此，您将保留一个总距离计数器并使用每个 GPS 点更新它（即当计时器经过时）......使用这种方法，您可能可以避免存储“IsNew”标志的需要

# ruby - callcc -- 当前继续调用

> ID：10615536
> 
> 赞同：3
> 
> 时间：2012-05-16T09:21:25.490
> 
> 标签：ruby

我开始熟悉 Ruby 并遇到了一个以前从未见过的函数—— `callcc`。
我已经了解了它的用途，但是当我尝试编写一个示例时，我得到了意想不到的结果。

```
require 'continuation'
def callcc_func
  i = 0
  while true
    c = nil
    callcc {|x| c = x}
    i += 1
    puts i    
    return c if (i % 3) == 0
  end
end

c = callcc_func()
puts
callcc_func.call 
```

结果是无限循环。为什么？
我预计会是：

```
# for `c = callcc_func()` line
1
2
3

# callcc_func.call
4
5
6
#end here because of `return c if (i % 3) == 0` 
```

*PS*
对不起我的英语，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T13:56:56.977

这个答案有点晚了，但也许有人会感兴趣。

您只需将代码的最后一行更改为：

```
c.call 
```

此功能的应用之一是制作发电机。这是示例随机数生成器（取自 Numerical Recipies 书中的常量）：

```
def randomLCG(a,m,c,seed)
    initialized = false
    while true
        callcc {|x| $cc = x}
        if not initialized
            initialized = true
            return
        end
        seed = (a*seed + c) % m;
        return seed
    end
end 
```

和用法：

```
> randomLCG( 1664525, 2147483647 , 1013904223, 107 )
 => nil 
> $cc.call
 => 1192008398 
> $cc.call
 => 2079128816 
> $cc.call
 => 667419302 
```

在 Python 中，我们可能会使用关键字`yield`来实现相同的目标（请注意，在 Ruby 中关键字`yield`会做不同的事情）：

```
def randLCG (a , m , c , seed):
    while True:
        seed = ( a∗seed + c ) % m
        yield seed 
```

用法：

```
>>> random = randLCG ( 1664525 , 2147483647 , 1013904223, 107 ) 
>>> random
<generator object randLCG at 0x7fdc790f70a0>
>>> random.next()
1192008398
>>> random.next()
2079128816
>>> random.next()
667419302 
```

Ofc 在 Ruby ofc 中你可以使用闭包来解决这个问题，这样你的程序会更短：

```
require 'continuation'

def rand(a, m, c, seed)
    return lambda{ seed = (a*seed + c) % m; return seed }
end

c = rand( 1664525, 2147483647 , 1013904223, 107 )
c.call
c.call 
```

我想到的第二个用法是实现[`mutual recursions`](http://en.wikipedia.org/wiki/Mutual_recursion)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:04:44.770

`call-with-current-continuation`（通常缩写为`call/cc`起源于 Scheme，所以如果您想了解更多信息，Scheme 文档是一个很好的起点：

*   [球拍文档中的 call/cc](http://docs.racket-lang.org/reference/cont.html#%28def._%28%28quote._~23~25kernel%29._call-with-current-continuation%29%29)
*   [在维基百科上致电/抄送](http://en.wikipedia.org/wiki/Call-with-current-continuation)

至于您的 Ruby 问题：请查看此博客文章标题[Continuations 和 ruby](http://blog.mostof.it/continuations-and-ruby/#.T7N7DHktiWU)​​ ，它实现了与您正在尝试做的非常相似的事情。你会在那里找到解释：

> 作为由主 ruby​​ 解释器运行的脚本文件，这将循环 forerver，因为它捕获程序在何时何地被调用的控制状态，这包括返回延续，然后再次调用它。

# python - 通过 Python 脚本接收电子邮件

> ID：10615538
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:21:30.387
> 
> 标签：python, email, outlook

我编写了以下用于发送电子邮件的脚本：

```
to = 'ToAddress@mail.com'
gmail_user = 'FromAddress@mail.com'
gmail_pwd = 'User_password'
smtpserver = smtplib.SMTP("smtp.gmail.com",587)
smtpserver.ehlo()
smtpserver.starttls()
smtpserver.ehlo
smtpserver.login(gmail_user, gmail_pwd)
header = 'To:' + to + '\n' + 'From: ' + gmail_user + '\n' + 'Subject:testing \n'
print header
msg = header + '\n this is test msg from Python email \n\n'
smtpserver.sendmail(gmail_user, to, msg)
print 'done!'
smtpserver.close()

time.sleep(5) 
```

现在我想从 Outlook Express 接收邮件，通过 python 脚本访问和打开邮件。我已经尝试了 pop 和 imap lib 的代码。但我似乎无法让它正常工作。

任何人都可以通过任何建议指导我完成这个过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:38:01.423

您可以使用 Python 的 imaplib 来获取您的电子邮件。PyMOTW 系列有一篇[关于 imaplib](http://www.doughellmann.com/PyMOTW/imaplib/)的帖子，它为您提供了很好的示例。

我编写了一个脚本来根据主题行中的正则表达式进行获取和过滤。它在[这里](https://github.com/nibrahim/openlibrary/blob/master/openlibrary/core/fetchmail.py)可用。

最后，如果您在使用 imaplib 时遇到问题，您应该发布相关的回溯和其他详细信息以获取更多信息。

# c# - 正则表达式验证序列

> ID：10615539
> 
> 赞同：1
> 
> 时间：2012-05-16T09:21:31.587
> 
> 标签：c#, java, regex, perl

我有一系列逗号分隔的单词，例如 x1,x2,x3.... 这个序列中的一些单词可能是可选的，即序列 x1,x3,x4,x6 有效，x2 和 x5 是可选的，其余的单词是强制性的。上述序列最多可重复 n 次。

例如，单词序列 x1,x2,x3 最多可以重复 3 次，其中 x2 是可选的，以下是有效序列：x1,x3,x1,x2,x3,x1,x3

如何使用正则表达式模式验证上述内容？

我尝试了类似 `(,{0,1}x1,(x2,){0,1}x3,{0,1}){3}` 但上面的方法适用于所有三的倍数，如果我使用 {1,3} 那么任何数量的重复都将匹配，因为它们是 1 { 1,3} 的**倍数**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:10:08.170

您的示例工作正常，但正如您所注意到的，您只检查目标字符串是否*包含*匹配的字符序列。您需要将正则表达式*锚定*在字符串的开头和结尾，并使用`\A`并`\z`确保整个字符串匹配。

此外，`{0,1}`更简单地写为，当您不需要捕获子字符串时`?`，捕获括号`( ... )`最好写为非捕获括号。`(?: ... )`

尝试对正则表达式进行这种修改，它使用`/x`修饰符允许将无关紧要的空格添加到表达式中以更好地布局。

```
m/ \A (?: x1, (?: x2, )? x3 ,? ){1,3} \z /x; 
```

# java - RestEasy：警告 NoClassDefFoundError DocumentProvider

> ID：10615540
> 
> 赞同：1
> 
> 时间：2012-05-16T09:21:37.360
> 
> 标签：java, resteasy

我正在使用 RestEasy 客户端框架并具有`WARN`以下代码：

```
RegisterBuiltin.register(ResteasyProviderFactory.getInstance());

// [WARN] org.jboss.resteasy.logging.impl.Log4jLogger-103: NoClassDefFoundError:
//   Unable to load builtin provider:     
//   org.jboss.resteasy.plugins.providers.DocumentProvider 
```

根据[GrepCode](http://www.grepcode.com/file/repo1.maven.org/maven2/org.jboss.resteasy/resteasy-jaxrs/2.3.1.GA/org/jboss/resteasy/plugins/providers/DocumentProvider.java#DocumentProvider) ，这个类应该在`resteasy-jaxrs`模块中。这只是一个警告，但我在 Google 上只找到了一些提示，不知道我是否应该忽略它或找到解决方案，因为它只是一个警告而不是 CNFE。以下代码可以正常工作。

```
<dependencyManagement>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-bom</artifactId>
        <version>2.3.1.GA</version>
        <type>pom</type>
        <scope>import</scope>
    </dependency> 
</dependencyManagement>
<dependencies>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:41:30.127

要避免此警告，请尝试以下操作：

```
public class SomeClass
{       
  static {ResteasyProviderFactory.setRegisterBuiltinByDefault(false);}

  public static void main(String[] args) {}
} 
```

**更新**根据[http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Migration_from_older_versions.html](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Migration_from_older_versions.html)`RegisterBuiltin.register(ResteasyProviderFactory.getInstance());`不再需要方法调用！

# c# - 如何在c#中使用动态语法？

> ID：10615545
> 
> 赞同：4
> 
> 时间：2012-05-16T09:22:03.103
> 
> 标签：c#, asp.net, dynamic

我想将数据源绑定到GridView，但它不起作用，因为数据源是动态的，谁能帮我一把？谢谢！

/ ***** ***** *c#******* *** ** *** *** /**

 **```
List<dynamic> dyList = new List<dynamic>();
dynamic info1 = new ExpandoObject();
info1.FFID = 1;
info1.Name = "Bill1";

dynamic info2 = new ExpandoObject();
info2.FFID = 2;
info2.Name = "Bill2";

dyList.Add(info1);
dyList.Add(info2);

Repeater1.DataSource = dyList;
Repeater1.DataBind(); 
```

/ ***** ***** *aspx* ***** ** *** ***** /

```
<asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
            <%# Eval("FFID") %> <%# Eval("Name") %>
        </ItemTemplate>
    </asp:Repeater> 
```

找不到 FFid 和名称，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:29:34.340

也许如果您将项目投射到`dynamic`

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
         <%# ((dynamic)Container.DataItem).FFID %>
     </ItemTemplate>
</asp:Repeater> 
```

或到`IDictionary<string, object>`. （`ExpandoObject`实现）

```
<asp:Repeater ID="Repeater1" runat="server">
     <ItemTemplate>
          <%# ((IDictionary<string, object>)Container.DataItem)["FFID"] %>
     </ItemTemplate>
</asp:Repeater> 
```**

# nunit - 在没有 Visual Studio 的情况下运行 SpecFlow 测试

> ID：10615546
> 
> 赞同：11
> 
> 时间：2012-05-16T09:22:07.687
> 
> 标签：nunit, mstest, specflow

我希望 QA 团队能够运行 SpecFlow 测试。我希望他们能够更改值并附加更多场景。这些附加的场景将具有匹配的步骤定义，因此它们只需要修改功能。

QA 团队无权访问 Visual Studio。

是否可以在不使用 Visual Studio 的情况下实现这一目标？

我们目前正在使用 MS Test，但如果有帮助，我们愿意使用 NUnit。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-17T13:21:30.453

是的 - 有一个“简单”的方法。

由于 SpecFlow 仅从 .feature 文件中的文本生成测试，因此您可以使用您选择的工具的命令行运行程序。

SpecFlow 还附带一个命令行版本 SpecFlow.exe，您可以将它们链接在一起，不仅可以生成和运行测试，还可以生成一个很好的测试报告。Visual Studio 之外的所有内容。

我在这里写过这个；[http://www.marcusoft.net/2010/12/specflowexe-and-mstest.html](http://www.marcusoft.net/2010/12/specflowexe-and-mstest.html)在一个简单的分步文章中。

希望这很有用。

# bash - Verifying type of data

> ID：10615549
> 
> 赞同：0
> 
> 时间：2012-05-16T09:22:22.107
> 
> 标签：bash, shell, awk

I want to verify the type of data in `output.txt`.

example:

```
52   40.5  60  yes
30.3 20   40   no 
```

result:

```
52 is Integer
40.5 is Decimal
60 is Integer
Yes is Character 
```

What should be better to choose for this task - `bash` or `awk`?

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:21:09.207

```
awk '
BEGIN {
    types["Integer"] = "^[[:digit:]]+$"; 
    types["Decimal"] = "^[[:digit:]]+[.][[:digit:]]+$"; 
    types["Character"] = "^[[:alpha:]]+$"
} 
{
    for (i = 1; i <= NF; i++) {
        found = 0;
        for (type in types) {
            if ($i ~ types[type]) {
                print $i, "is", type;
                found = 1
            } 
        }
        if (! found) {
            print "Type not found for:", $i
        }
    }
    printf "\n"
}' inputfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:07:34.847

使用[bash 模式](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)

```
shopt -s extglob
while read line; do
  set -- $line
  for word; do
    case $word in
      ?([-+])+([[:digit:]]) ) echo "$word is an integer" ;;
      ?([-+])@(*([[:digit:]]).+([[:digit:]])|+([[:digit:]]).*([[:digit:]])) ) echo "$word is a decimal" ;;
      +([[:alpha:]]) ) echo "$word is alphabetical" ;;
      *) echo "$word is a mixed string" ;;
    esac
  done
done < output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:37:37.443

使用 bash，您可以尝试以下操作：

```
#!/usr/bin/env bash

while read -r; do
    for token in $REPLY; do                    # no quotes here!
        if [[ "$token" =~ ^[[:digit:]]+$ ]]
        then printf -- "%d is digit\n" "$token"
        elif [[ "$token" =~ ^[[:digit:]]+\.[[:digit:]]+$ ]]
        then printf -- "%f is float\n" "$token"
        elif [[ "$token" =~ ^[[:alpha:]]+$ ]]
        then printf -- "%s is string\n" "$token"
        else printf -- "unknown class: %s\n" "$token"
        fi
    done
done < file.txt 
```

*   读取一行（`while read`from `file.txt`，行在 var 中`REPLY`）
*   拆分为标记（`for`行中的每个标记/ `REPLY`）
*   查找当前令牌的类型（将完整`^..$`令牌与正则表达式和类匹配）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T18:36:28.820

TXR：一点点正则表达式，一点点类型系统。如果令牌看起来像一个数字，那么让我们尝试将其从字符串转换为数字对象`num-str`。如果失败，则一定是范围错误。该`typeof`函数为我们提供了对象的类型`fixnum`：`bignum`或`float`。

```
@(freeform)
@(coll)@{token /[^\s]+/}@(end)
@(output)
@  (repeat)
@token @(if (eql (match-regex token #/[+\-]?\d+([.]\d+)?([Ee][+\-]?\d+)?/)
                 (length token))
          (let ((x (num-str token)))
            (if x (typeof x) "out-of-range"))
          "non-numeric")
@  (end)
@(end) 
```

跑：

```
$ txr verify.txr  -
hello world     
1.5E900 1.43 52  5A  12341234123412341234 12341234123412341234243.42 42
[Ctrl-D]
hello non-numeric
world non-numeric
1.5E900 out-of-range
1.43 float
52 fixnum
5A non-numeric
12341234123412341234 bignum
12341234123412341234243.42 float
42 fixnum 
```

# symfony - Redirect from a Service in Symfony2

> ID：10615550
> 
> 赞同：7
> 
> 时间：2012-05-16T09:22:23.027
> 
> 标签：symfony

I have a service that looks up data for a page, but if that data isn't found, should redirect to the homepage. For the life of me, I can't figure out how to do this in Sf2\. There are so many different ways to work with services and router, but none seem to work.

```
namespace Acme\SomeBundle\Services;

use Acme\SomeBundle\Entity\Node;
use \Doctrine\ORM\EntityManager;
use \Symfony\Component\HttpKernel\Event\GetResponseEvent;
use \Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
use \Symfony\Bundle\FrameworkBundle\Routing\Router;
use \Symfony\Component\Routing\Generator\UrlGenerator;
use Symfony\Component\HttpFoundation\RedirectResponse;

class NodeFinder
{

    private $em;
    private $router;

    public function __construct(EntityManager $em, Router $router)
    {

        $this->em = $em;
        $this->router = $router;

    }

    public function getNode($slug)
    {

        $node = $this->em->getRepository('SomeBundle:Node')->findOneBy(array('slug' => $slug));

        if (!$node) { //if no node found

                return  $this->router->redirect('homepage', array(), true);
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:43:00.223

在 Symfony2 中，不为重定向提供服务。您应该尝试像这样更改您的服务：

```
namespace Acme\SomeBundle\Services;

use Acme\SomeBundle\Entity\Node;
use \Doctrine\ORM\EntityManager;

class NodeFinder
{
    private $em;

    public function __construct(EntityManager $em)
    {
        $this->em = $em;
    }

    public function getNode($slug)
    {
        $node = $this->em->getRepository('SomeBundle:Node')->findOneBy(array(
            'slug' => $slug
        ));
        return ($node) ? true : false;
    }
} 
```

然后在您的控制器中调用您的服务并进行重定向：

```
// in the controller file

$nodefinder = $this->container->get('your_node_finder_service_name');

if (!$nodefinder->getNode($slug)) {
    $this->redirect('homepage');
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-09T22:33:55.340

你可以在你的服务中做到这一点（写在我的脑海里）

```
class MyException extends \Exception
{
    /**
     * @var \Symfony\Component\HttpFoundation\RedirectResponse
     */
    public $redirectResponse;
}

class MyService 
{    
    public function doStuff() 
    {
        if ($errorSituation) {
            $me = new MyException()
            $me->redirectResponse = $this->redirect($this->generateUrl('loginpage'));
            throw $me;
         }
    }
}

class MyController extends Controller
{
    public function doAction()
    {
        try {
            // call MyService here
        } catch (MyException $e) {
            return $e->redirectResponse;
        }
    }
} 
```

虽然这并不完美，但肯定比 sllly 试图做的要好得多

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-22T10:31:27.720

在你的服务中注入**路由器**服务。比你可以返回一个**新的 RedirectResponse**。看[这里](https://stackoverflow.com/questions/31104002/redirecting-in-service-symfony2)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-18T18:41:03.613

从 Symfony 的角​​度来看，您可以将控制器创建为服务，然后从该服务进行重定向。语法是：

```
use Symfony\Component\HttpFoundation\RedirectResponse;

return new RedirectResponse($url, $status); 
```

更多信息可以在这里找到：[http ://symfony.com/doc/current/cookbook/controller/service.html#alternatives-to-base-controller-methods](http://symfony.com/doc/current/cookbook/controller/service.html#alternatives-to-base-controller-methods)

# java - jdbc connection error

> ID：10615557
> 
> 赞同：0
> 
> 时间：2012-05-16T09:22:47.550
> 
> 标签：java, jdbc, google-spreadsheet-api

I would like to fill in a google spreadsheet cell with the output of a mysql database query, so I've written this simple script following the example in the google tutorial:

```
function get_tbs_number() {
    var conn = Jdbc.getConnection("jdbc:mysql://127.0.0.1:9008/icadata");
    var stmt = conn.createStatement();
    stmt.setMaxRows(100);
    var start = new Date();
    var rs = stmt.executeQuery("select count(*) from CNGSfiltered where run=10269 and (GTO1>4 or GTO2>4 or GTO3>4 or GTO4>4);");
    var doc = SpreadsheetApp.getActiveSpreadsheet();
    var cell = doc.getRange('a1');
    cell.offset(0, 0).setValue(rs.getString(1));
    rs.close();
    stmt.close();
    conn.close();
    var end = new Date();
    Logger.log("time took: " + (end.getTime() - start.getTime()));
} 
```

The problem is that when I try to run the script a get an error connecting to the database, while the connection to the same database from command line (mysql -h localhost -P 9008 -u # -p# icadata) does work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:04:29.053

问题是 Google 无法访问`127.0.0.1`. 尝试在路由器上打开 mysql 端口（9008）。然后使用 www.whatismyip.com 获取您的公共 IP 地址。

```
"jdbc:mysql://<myPublicIP>:9008/icadata" 
```

然后，您可能必须运行包含谷歌 IP 的 sql grant 命令或使用 %（不是很安全）。

```
grant all on icadata.* to '<user>'@'<google ips>' identified by '<password>'; 
```

祝你好运！这里有一些参考：[https ://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc)

# c# - 从 from.txt 文件中删除文本行

> ID：10615561
> 
> 赞同：0
> 
> 时间：2012-05-16T09:22:57.503
> 
> 标签：c#, text

我目前正在从事一个项目，我必须从文本文件中删除特定的文本行。

这是我已经拥有的代码：

```
static void Main( string[] args )
    {
        string line = null;
        string line_to_delete = "--";
        string desktopLocation = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
        string text = Path.Combine( desktopLocation, "tim3.txt" );
        string file = Path.Combine( desktopLocation, "tim4.txt" );

        using (StreamReader reader = new StreamReader( text))
        {
            using (StreamWriter writer = new StreamWriter(file ))
            {
                while((line = reader.ReadLine()) != null)
                {
                    if (string.Compare( line, line_to_delete ) == 0)
                        continue;
                    writer.WriteLine( line );
                }
            } 
```

这只会将文本写入新的 txt 文件，但不会删除任何内容。

谢谢。主要问题是我只需要删除 txt 文件中的特定文本行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:26:41.920

我怀疑前导/训练空间导致 String.comapre 返回意外结果

代替

```
 if (string.Compare( line, line_to_delete ) == 0) 
```

尝试

```
if(String.IsNullOrEmpty(line) || String.Equals(line.Trim(), line_to_delete)) 
```

如上所述不起作用，您可以尝试以下（LINQ）

**编辑**- 仅替换文本

```
File.WriteAllText(file, File.ReadAllText(text).Replace(line_to_delete,"")) 
```

如果上述方法有效，它将替换代码中的所有 using 块

如果上述方法不起作用，我怀疑是数据问题（文本文件中不存在“__”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:28:29.853

据我所知，您不能同时读取和写入文件（文件锁定）。您可以做的是将适当的数据写入 tim4.txt（如您的示例中），完成后，删除 tim3.txt 并将 tim4.txt 重命名为 tim3.txt。

编辑：误解了你的问题。我以为您无法将更改写入同一个文件，但您的文本甚至没有被过滤。你应该试试 Tilan 的建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:55:42.927

从您的评论中，我了解到您正在尝试删除以 -- 开头的行。如果是这种情况，您只需要更改 if 条件：

```
 if (string.Compare( line, line_to_delete ) == 0)
                continue; 
```

到：

```
 if (line.Trim().IndexOf(line_to_delete) == 0)
                continue; 
```

# mysql - mysql中的更新需要好的语句

> ID：10615565
> 
> 赞同：0
> 
> 时间：2012-05-16T09:23:09.593
> 
> 标签：mysql, sql

我是 sql 新手。我正在根据数据进行书面查询

如何编写查询来更新行；我想遵循这种格式；

```
UPDATE `reports_attributes` 
  (`ConID`,`CheckServices`,`Attribute1`,`Attribute2`,`Attribute3`,`Attribute4`,`Attribute5`,`Attribute6`,`Attribute7`,`Attribute8`) 
VALUES ('78','Execute Summary','criminality','color1','education','color5','employment_check_2','color7','report_status','color9')  
WHERE ConID=78 AND ReportType='interim_report' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:29:56.583

更新语句语法与插入不同。

```
UPDATE reports_attributes 
 Set 
 ConID='78',
 CheckServices='Execute Summary',
 Attribute1='criminality',
 Attribute2='color1',
 Attribute3='education',
 Attribute4='color5',
 Attribute5='employment_check_2',
 Attribute6='color7',
 Attribute7='report_status',
 Attribute8='color9'
WHERE ConID=78 AND ReportType='interim_report' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:28:10.590

UPDATE 语句的语法是

```
UPDATE reports_attributes
    SET ConID = 78,
        CheckServices = xxx, 
        .
        .
        n
WHERE ConID=78 AND ReportType='interim_report' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:28:19.083

[问题中的语法与更新语句](http://dev.mysql.com/doc/refman/5.5/en/update.html)的语法不匹配

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count] 
```

有效更新语句的示例是：

```
UPDATE mytable
SET
    foo = "bar"
WHERE
    id = 123 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T09:29:46.297

```
UPDATE reports_attributes 
SET ConID='78', 
    CheckServices='Execute Summary' ,
    Attribute1='criminality', 
    Attribute2='color1', 
    Attribute3='education', 
    Attribute4='color5',
    Attribute5='employment_check_2',
    Attribute6='color7', 
    Attribute7='report_status', 
    Attribute8='color9' 
WHERE ConID=78 
      AND ReportType='interim_report' 
```

# javascript - 我的显示/隐藏功能代码有什么问题？

> ID：10615569
> 
> 赞同：2
> 
> 时间：2012-05-16T09:23:24.633
> 
> 标签：javascript, jquery, html

这是我的 HTML 和 javascript 代码：

**HTML：**

```
<div id="common">
    Hi Welcome
</div>

<div>
    <a href="javascript:toggleDiv('customize');" >click here</a>
</div>

<div  id="customize">
    <form action="" method="post" id="MyForm">
        {%  form%}
    </form>
</div> 
```

**Javascript代码：**

```
<script>
    function toggleDiv(divId) {
        if ($("#"+divId).show()) {
            $("#common").hide();
        }
        else {
            $("#common").show();
        }
    }
</script> 
```

如果我单击“单击此处”链接，则应隐藏一个 div id，应显示另一个，如果我再次单击它，则应发生反之亦然的过程。我尝试使用这个 javascript 但它不能正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:27:14.563

您需要使用`:visible`来检查传递的 div 是否已经可见。试试这个：

```
function toggleDiv(divId) {
    var $el = $("#" + divId);
    if ($el.is(":visible")) {
        $el.hide();
        $("#common").hide();
    }
    else {
        $el.show();
        $("#common").show();
    }
} 
```

您还应该更改代码以使用 jQuery 附加事件而不是笨重的`onclick`属性：

```
<a href="#" id="link" data-rel="other-div">click here</a> 
```

```
$("#link").click(function(e) {
    e.preventDefault();
    toggleDiv($(this).data("other-div"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:28:36.617

试试这个：

```
function toggleDiv(divId) {
    if ($("#"+divId).is(':visible')) {
        $("#common").hide();
    }
    else {
        $("#common").show();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:26:52.903

您的代码总是要输入`if`，而不是`else`. 您正在评估 的返回值[`show`](http://api.jquery.com/show/)，它始终是一个 jQuery 对象，其评估结果始终为真。

[`is`](http://api.jquery.com/is/)使用方法和选择器检查元素当前是否可见[`:visible`](http://api.jquery.com/visible-selector/)：

```
function toggleDiv(divId) {
    if ($("#"+divId).is(":visible")){
        $("#common").hide();
    }
    else{
        $("#common").show();
    }
} 
```

附带说明一下，既然您已经在使用它，为什么不将您的事件处理程序代码移出 HTML 并将其与 jQuery 绑定（以下假设您为链接提供了“yourLink”的 ID）：

```
$("#yourLink").click(function() {
    //Event handler
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:35:53.947

您正在测试`$("#"+divId)`我应用[jQuery .show()](http://api.jquery.com/show/)方法的可见性！

您应该做的是使用[:visible](http://api.jquery.com/visible-selector/)测试可见性，如下所示：

```
if ($("#"+divId).is(":visible")) {...} 
```

所以你的功能应该变成：

```
function toggleDiv(divId) {
    if ($("#"+divId).is(":visible")){
        $("#common").hide();
    }else{
        $("#common").show();
    }
} 
```

* * *

**但是**，如果您只需要切换元素的当前显示状态，则可以使用[.toggle()](http://api.jquery.com/toggle/)，如下所示：

```
function toggleDiv(divId) {
  $("#"+divId).toggle();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T09:41:44.363

试试这个没有单独的功能。

```
<div id="common">
      Hi Welcome
</div>

<div>
<a onClick="$('#customize').toggle()" >click here</a>
</div>

<div  id="customize">
  <form action="" method="post" id="MyForm">
        Content
  </form>​​​​​​ 
```

奖励积分的不显眼示例：

```
<div id="common">
      Hi Welcome
</div>

<div>
<a data-linkedId="customize" >click here</a>
</div>

<div  id="customize">
  <form action="" method="post" id="MyForm">
        Content
  </form>​​​​​​

<script type="text/javascript">
$(document).ready(){
    $('a[data-linkedId]').on('click',function(){
        var divId = $(this).attr('data-linkedId');
        $('#'+divId).toggle();
    });
}
</script> 
```

# iis-7 - IIS 7.5 URL 重写 - 从 URL 重写文件夹

> ID：10615572
> 
> 赞同：12
> 
> 时间：2012-05-16T09:23:44.813
> 
> 标签：iis-7, url-rewriting, iis-7.5

我使用 IIS 7.5 和 URL 重写。

我有一个具有以下文件层次结构的网站：

```
webroot
webroot/LegacySite 
```

webroot/ 和 legacy/ 都是 IIS 中单独的 App-Folders。

* * *

我需要重写我的网址：

*   如果请求是[http://mysite.co/LegacySite/page.aspx](http://mysite.co/LegacySite/page.aspx)，则 URL 将被重写为[http://mysite.co/page.aspx](http://mysite.co/page.aspx)

在我的`Web.Conf`（在 webroot 文件夹中）下面不能正常工作，你能指出我缺少什么吗？

```
<?xml version="1.0" encoding="UTF-8"?>
    <configuration>
        <system.webServer>
            <rewrite>
                <rules>
                    <rule name="MyRole" stopProcessing="true">
                        <match url=".*" />
                        <conditions>
                            <add input="{HTTP_HOST}" pattern="^mysite.com" />
                            <add input="{PATH_INFO}" pattern="^\LegacySite\" negate="true" />
                        </conditions>
                        <action type="Rewrite" url="\LegacySite\{R:0}" />
                    </rule>
                </rules>
            </rewrite>
        </system.webServer>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T14:05:43.580

以下应该有效：

```
<rule name="MyRole" stopProcessing="true">
    <match url="LegacySite/(.*)" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^mysite.com$" />
    </conditions>
    <action type="Rewrite" url="/{R:1}" appendQueryString="true" />
</rule> 
```

您可能希望删除检查主机名的条件。这真的很重要吗？您是否有任何其他域名绑定到您不希望发生重定向的该网站？似乎没有必要。您可能只需要：

```
<rule name="MyRole" stopProcessing="true">
    <match url="LegacySite/(.*)" />
    <action type="Rewrite" url="/{R:1}" appendQueryString="true" />
</rule> 
```

我添加`appendQueryString="true"`了将任何（可选）查询字符串参数传递给重写的 URL。

# code-analysis - CA0055 error in FxCop

> ID：10615584
> 
> 赞同：2
> 
> 时间：2012-05-16T09:24:22.590
> 
> 标签：code-analysis, fxcop

I'm trying to Run Code Analysis manually on one project and I'm getting following error: CA0055: Could not load xxx.dll.

This is detailed log from xml log:

```
<Exception Keyword="CA0055" Kind="AssemblyLoad">
   <Type>Microsoft.FxCop.Common.AssemblyLoadException</Type>
   <ExceptionMessage>Could not load D:\...\bin\debug\xxx.dll.</ExceptionMessage>
   <InnerType>System.IO.InvalidDataException</InnerType>
   <InnerExceptionMessage>Invalid type for custom attribute argument</InnerExceptionMessage>
   <InnerStackTrace>   at   

Phx.Metadata.LoaderImplementation.DeserializePointerTypeConstant(Type type,   
AttributeBlobReader&amp; blobReader, Boolean doResolveEnums)
at Phx.Metadata.LoaderImplementation.DeserializeConstant(Type type,  
AttributeBlobReader&amp; blobReader, Boolean doResolveEnums)
at Phx.Metadata.MetadataLoader.ParseCustomAttribute(AttributeSymbol attributeSymbol,  
Boolean doResolveEnums)
at Microsoft.FxCop.Engines.Phoenix.AssemblyLoader.LoadAttributes(List`1 attributes,  
MetadataLoader metadataLoader)
at Microsoft.FxCop.Engines.Phoenix.AssemblyLoader.LoadAttributes(ProgramUnit 
programUnit, MetadataLoader metadataLoader)
at Microsoft.FxCop.Engines.Phoenix.AssemblyLoader.LoadAssembly(String filePath)
at Microsoft.FxCop.Engines.Phoenix.PhoenixAnalysisEngine.AnalyzeInternal()     

</InnerStackTrace>
</Exception> 
```

The xxx.dll exists in the path and the access is allowed.

Can somebody help what can be wrong?

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:24:20.990

您可能在 Phoenix 程序集加载器中遇到了错误。不幸的是，异常详细信息不包含任何有关 Phoenix 在轰炸时试图解析的自定义属性的信息，因此几乎不可能猜测是否有可用的解决方法。如果您无法共享导致问题的程序集，那么最好的办法是将调试器附加到 fxcopcmd.exe 进程，以便您可以尝试提取有关有问题的属性的更多信息。

如果您无法执行此操作，但可以与 Microsoft 共享问题 DLL，您可能需要考虑将其上传到[https://connect.microsoft.com/VisualStudio/Feedback](https://connect.microsoft.com/VisualStudio/Feedback)的私有错误报告中。

# android - SVG Matrix to Android Graphics Matrix

> ID：10615587
> 
> 赞同：1
> 
> 时间：2012-05-16T09:24:30.680
> 
> 标签：android, matrix, svg

I have troubles converting a 6 values SVG matrix to an Android Matrix. The SVG matrix looks like this : {SCALE_X, SKEW_X, SKEW_Y, SCALE_Y, OFFSET_X, OFFSET_Y }

I've tried something like this but no result:

```
Matrix t_matrix = new Matrix();
t_matrix.setScale(SVG[0], SVG[3]);
t_matrix.setSkew(SVG[1], SVG[2]);
t_matrix.setTranslate(SVG[4], SVG[5]);
float[] f_t_matrix = {1, 0, 0,0,1,0,0,0,1} ;
t_matrix.mapPoints(f_t_matrix); 
```

Data stored in f_t_matrix are inconsistent with real data. For example for a SVG matrix like : 1,0,0,1,448.2275,110.54 the Android Matrix is [449.2275, 110.54, 448.2275, 110.54, 449.2275, 110.54, 448.2275, 110.54, 1.0] . What may be the problem ?

Regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:44:47.373

会是这样

```
Matrix t_matrix = new Matrix();
t_matrix.setScale(SVG[0], SVG[4]);
t_matrix.setSkew(SVG[1], SVG[3]);
t_matrix.setTranslate(SVG[2], SVG[5]); 
```

# ruby - How to pull the public information from GitHub repos using Ruby

> ID：10615588
> 
> 赞同：0
> 
> 时间：2012-05-16T09:24:31.343
> 
> 标签：ruby, git, github, github-api

Is there any way to retrieve public GitHub repository information via an Ruby API?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:29:31.760

您应该检查[github-api-client](https://github.com/farnoy/github-api-client) gem，它涵盖了 API 的 v2 和 v3。还有[Octopi](https://github.com/fcoury/octopi)，但它只支持 v2 并且有一段时间没有更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:34:09.627

我自己不会使用 github 特定的 API，因为它将您的应用程序绑定到*仅*使用github 而不是一般的远程 git 存储库。它还使您依赖于他们的 API，这可能不是一个好主意。

[grit](http://grit.rubyforge.org/) gem 为您提供对 git 存储库的读/写访问权限。我会用它来处理你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:28:00.183

Github 提供了一些 RESEful API 供你访问[http://developer.github.com/v3/git/refs/](http://developer.github.com/v3/git/refs/)

您当然可以使用[http://rubygems.org/gems/rest-client](http://rubygems.org/gems/rest-client) gem 来包装 Git API 并提取您需要的信息。

# asp.net - 选中复选框时如何触发数据网格事件？

> ID：10615593
> 
> 赞同：0
> 
> 时间：2012-05-16T09:24:52.787
> 
> 标签：asp.net, datagridview, checkbox, itemtemplate, datagridviewcheckboxcell

在项目模板的数据网格内，按钮被替换为复选框以提高可行性，如果我单击按钮，面板会相应显示，面板元素也会与其内容一起显示。

现在我的要求是使用复选框更改项目模板中的此按钮，并且在标题模板中包含另一个复选框。

我可以选择检查中的项目，也可以检查数据网格中的所有项目。我有两个面板 A 和 B（比如说），当我选中多个复选框时，将显示面板 B。

当我只选中一个复选框时，只会显示面板 A。

就我而言，当检查此复选框时，我可以看到面板A和B的相应操作，但是面板内的元素（如（相应的行数据库事件未正确获取）。任何人都可以通过一些示例清楚地解释我如何解决这个问题，或者你可以帮助我的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:46:26.183

是的，因为像复选框这样的事件冒泡控件无法触发 ItemCommand 事件。您可以尝试通过创建解决方法。

通过添加 display:none 样式来获取按钮并隐藏它，添加客户端 OnClientClick 事件使用 javascript 调用此按钮的单击事件。

例如

```
chk.Add("onclick", "javascript:document.getElementById('" + btn.ClientID + "').click()"); 
```

# javascript - 设置对话框位置

> ID：10615594
> 
> 赞同：1
> 
> 时间：2012-05-16T09:24:58.873
> 
> 标签：javascript, jquery

我在单击链接时使用了一个对话框弹出窗口。当我单击父页面的链接背景更改为白色时，会在中心看到对话框。

但是当我要最小化浏览器大小/屏幕时，弹出窗口会向右移动。无论浏览器屏幕是否最小化，我都希望在中心弹出对话框。

我将以下 jquery & css & 代码用于对话框

1.  jquery-ui-1.8.7.custom.css
2.  jquery-ui.min.js

代码 ：

```
$('.addlink').click(function() {
    $("#add_action").dialog({
        modal: true, 
        draggable: false, 
        resizable: true, 
        minWidth: 200, 
        width:560,
        minheight:98, 
        zIndex: 50000},
        {position:[400,120]
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:28:15.403

尝试这个：

```
$(window).resize(function() {
    $("#add_action").dialog("option", "position", "center");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:31:01.290

## 第1部分：

指定应显示对话框的位置。可能的值：1) 表示视口内位置的单个字符串：'center'、'left'、'right'、'top'、'bottom'。2) 一个数组，其中包含一个 x,y 坐标对，像素偏移量为视口左上角的像素偏移量（例如 [350,100]） 3) 一个包含 x,y 位置字符串值的数组（例如 ['right','top']右上角）。代码示例

使用指定的位置选项初始化对话框。

```
$( ".selector" ).dialog({ position: "top" }); 
```

在 init 之后获取或设置位置选项。

```
//getter
var position = $( ".selector" ).dialog( "option", "position" );
//setter
$( ".selector" ).dialog( "option", "position", "top" ); 
```

## 第2部分：

设置[`position`选项](http://jqueryui.com/demos/dialog/#option-position)将强制执行此操作，因此只需使用相同的选择器覆盖我`#dialog`在此处使用的所有对话框（如果没有找到它们，则不采取任何操作，就像所有 jQuery 一样）：

```
$(window).resize(function() {
    $("#dialog").dialog("option", "position", "center");
}); 
```

[这是相同的 jQuery UI 演示页面，仅添加了上面的代码](http://jsfiddle.net/39GqM/)，我们只是为窗口的`resize`事件添加了一个处理程序[`.resize()`](http://api.jquery.com/resize/)，因此它会在适当的时间触发重新居中。​</p>

# ruby-on-rails - Rails 开发环境 - 有什么提示吗？

> ID：10615597
> 
> 赞同：2
> 
> 时间：2012-05-16T09:25:10.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, development-environment, sublimetext, sublimetext2

我通过 ssh 在我的主机上使用 ruby​​ 环境，我的所有开发都通过 sublimeText2 进行。

问题是我必须手动下载文件，更改它们并上传它们。因此可以使用我的服务器设置一个 Dropboxsync，但这不是在我的轨道上工作的最佳方式。

有没有一个很好的解决方案来获得一个甜蜜的工作流程？

编辑：这里的 Ubuntu 机器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:29:51.770

你有没有想过sshfs？这将为您提供本地计算机上的目录，该目录“是”远程计算机上的目录。然后您可以“本地”编辑文件，甚至不会注意到它们在另一台机器上。

```
sshfs user@remotehost:/remote/path localdirectory 
```

# jquery-ui - symfony2 jquery ui datepicker 图片

> ID：10615600
> 
> 赞同：1
> 
> 时间：2012-05-16T09:25:25.593
> 
> 标签：jquery-ui, symfony

我正在使用 jQuery-ui datepicker，但图像和路径有问题。这就是我链接我的CSS的方式：

```
 {% stylesheets  '@BackendBundle/Resources/public/css/bootstrap.min.css' 
                    '@BackendBundle/Resources/public/css/bootstrap-responsive.min.css' 
                    '@HotelBundle/Resources/public/css/ui-lightness/jquery-ui-1.8.20.custom.css' 
                    '@HotelBundle/Resources/public/css/encargado.css'
               output='css/encargado.css' %}
        <link href="{{ asset_url }}" rel="stylesheet" type="text/css" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {% javascripts  '@BackendBundle/Resources/public/js/jquery-1.7.2.min.js' 
                    '@BackendBundle/Resources/public/js/modernizr-2.5.3-respond-1.1.0.min.js' 
                    '@HotelBundle/Resources/public/js/jquery-ui-1.8.20.custom.min.js' 
                    output='js/backend.js' %}
        <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %} 
```

我将我的文件 css 文件保存在那里：

```
../src/Gitek/HotelBundle/Resources/public/css/ui-lightness/
 - jquery-ui-1.8.20.custom.css
 - images/ui-bg_diagonals-thick_18_b81900_40x40.png;ui-bg_diagonals-thick_20_666666_40x40.png ... 
```

我的js文件在那里：

```
../src/Gitek/HotelBundle/Resources/public/js/jquery-ui-1.8.20.custom.min.css 
```

之后，我用 php app/consoleassetic:dump 转储资产，没有错误

我还使用 php app/console assets 安装资产：install web --symlink

并清除缓存 php app/console cache:clear

我做了所有这些，我可以看到并使用我的日期选择器，但有些图片没有加载。如果我转到 Chrome 控制台，我会看到以下错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://hotel.local/app_dev.php/css/images/ui-bg_highlight-soft_100_eeeeee_1x100.png
Failed to load resource: the server responded with a status of 404 (Not Found) http://hotel.local/app_dev.php/css/images/ui-bg_gloss-wave_35_f6a828_500x100.png
Failed to load resource: the server responded with a status of 404 (Not Found) http://hotel.local/app_dev.php/css/images/ui-bg_glass_100_f6f6f6_1x400.png
Failed to load resource: the server responded with a status of 404 (Not Found) http://hotel.local/app_dev.php/css/images/ui-icons_ffffff_256x240.png
Failed to load resource: the server responded with a status of 404 (Not Found) http://hotel.local/app_dev.php/css/images/ui-bg_highlight-soft_75_ffe45c_1x100.png 
```

我认为问题可能出在css文件中的路径上，但我不确定。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:07:57.207

1) 在 config.yml 中启用 cssrewrite 过滤器：

```
assetic:
    filters:
        cssrewrite: ~ 
```

2) 使用相对 URL 和 cssrewrite 过滤器列出 css 文件，例如

```
{% stylesheets '/bundles/backend/css/bootstrap.min.css' 
               '/bundles/backend/css/bootstrap-responsive.min.css' 
               '/bundles/hotel/css/ui-lightness/jquery-ui-1.8.20.custom.css' 
               '/bundles/hotel/css/encargado.css'
               output='css/encargado.css' filter='cssrewrite' %}
<link href="{{ asset_url }}" rel="stylesheet" type="text/css" />
{% endstylesheets %} 
```

过滤器应该正确地重写所有 CSS URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:36:21.630

您需要手动更新`jquery-ui-1.8.20.custom.min.css`文件中图像的路径。

例如：[_](http://code.google.com/p/castle-age-auto-player/source/browse/trunk/jquery-ui-1.8.6/css/ui-lightness/jquery-ui-1.8.6.custom.css?r=80#61)

```
.ui-widget-content { border: 1px solid #dddddd; background: #eeeeee url(images/ui-bg_highlight-soft_100_eeeeee_1x100.png) 50% top repeat-x; color: #333333; } 
```

您需要通过`images/`更新`/css/ui-lightness/images/`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T14:20:56.533

不要修改外部插件。

只需像这样覆盖css：

```
.ui-state-default,
.ui-widget-content .ui-state-default,
.ui-widget-header .ui-state-default {
    background: #e6e6e6!important;
}

.ui-widget-header {
    background: #ccc!important;
}

.ui-state-hover,
.ui-widget-content .ui-state-hover,
.ui-widget-header .ui-state-hover,
.ui-state-focus,
.ui-widget-content .ui-state-focus,
.ui-widget-header .ui-state-focus {
    background: #dadada!important;
}

.ui-state-active,
.ui-widget-content .ui-state-active,
.ui-widget-header .ui-state-active,
.ui-widget-content {
    background: #fff!important;
}

.ui-state-highlight,
.ui-widget-content .ui-state-highlight,
.ui-widget-header .ui-state-highlight {
   background: #fbf9ee!important;
}

.ui-state-error,
.ui-widget-content .ui-state-error,
.ui-widget-header .ui-state-error {
    background: #fef1ec!important;
} 
```

将此 css 添加到您的 css 文件中。它将消除此类错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T15:56:23.233

您需要使用 cssrewrite 过滤器 + 加载图像来加载 css。

```
{% block stylesheets %}
  {% stylesheets 'bundles/testbundle/css/jquery-ui/jquery-ui.css' filter='cssrewrite' %}
     <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
  {% endstylesheets %}
  {% image '@TestBundle/Resources/public/css/jquery-ui/images/*' %}{% endimage %}
{% endblock %} 
```

比安装和转储资产。

# java - Java在中心旋转图像

> ID：10615606
> 
> 赞同：3
> 
> 时间：2012-05-16T09:25:44.423
> 
> 标签：java, image, rotation, center

如果本身，我如何在中心旋转图像？此代码有效，但它会旋转屏幕左上角的图像：

```
 AffineTransform oldtrans = new AffineTransform();
    AffineTransform trans = new AffineTransform();

    trans.setToIdentity();
    trans.rotate(Math.toRadians(angle));
    trans.translate(_x-(width/2), _y-(height/2));
    g.setTransform(trans);
    g.drawImage(this.getImage(), (int)_x, (int)_y, (int)width, (int)height, null);
    trans.setToIdentity();
    g.setTransform(oldtrans); 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T09:32:28.007

您应该在 rotate() 调用中再提供两个参数：

```
affineTransform.rotate(Math.toRadians(angle), m_imageWidth/2, m_imageHeight/2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:31:28.683

从字面上看，你已经成功了一半。你要做的是两个翻译。类似于以下内容：

1.  将图像平移到其中心 (tanslate(x-width/2, y-width/2)。
2.  按角度弧度旋转图像（就像你一样）。
3.  将图像平移回其原始位置 (tanslate(x+width/2, y+width/2)。

希望这对你有用。

# php - 字段列表错误中的 MySQL 未知列

> ID：10615609
> 
> 赞同：0
> 
> 时间：2012-05-16T09:25:54.167
> 
> 标签：php, mysql

在 PHP 中执行此语句时出现此错误：

```
 $sql = mysql_real_escape_string("INSERT INTO `locations`(`id`,`anchor_url`,`anchor_title`) 
    VALUES (1,`http%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fmsid%3D210426849026628615459.0004bd6aaf4e431aab7f9%26msa%3D0%26output%3Dembed`, `Se &quot;Mar Menor&quot; p&aring; kartet`)"); 
```

我认为它与引号有关，但我尝试了不同的引号，这给我提供了另一个错误，说我在 SQL 语法中有错误（单引号）。

执行上述查询时抛出的错误是：

“字段列表”中的未知列“http%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fmsid%3D210426849026628615459.0004bd6aaf4e431aab7f9%26msa%3D0%26output%3Dembed”

**编辑：**

答案被接受，但仅针对其中一些，因为我没有测试提供的其他信息：我使用 PDO 来查询数据库，而不是使用准备好的语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:27:42.023

您不能调用`mysql_real_escape_string`整个查询；您必须分别在每个变量上调用它。

例子：

```
// THIS IS AN EXAMPLE ONLY -- NOT A BEST PRACTICE!
$sql = "INSERT INTO `locations`(`id`,`anchor_url`,`anchor_title`) VALUES ".
       "(1, '".mysql_real_escape_string('http://...')."', ".
       "'".mysql_real_escape_string('whatever')."')"; 
```

您还必须注意`mres`产生的值周围的单引号；*这些是绝对关键的*。

现在当然上面看起来非常难看，所以你可以把它美化一下：

```
// THIS IS AN EXAMPLE ONLY -- NOT A BEST PRACTICE!
$sql = sprintf("INSERT INTO `locations`(`id`,`anchor_url`,`anchor_title`) VALUES ".
               "(1, '%s', '%s')",
               mysql_real_escape_string('http://...'),
               mysql_real_escape_string('whatever')); 
```

以上几乎是清理数据库输入所必须做的最低限度的工作。[但是，如果您使用准备好的语句代替（使用mysqli](http://php.net/manual/en/mysqli.prepare.php)或[PDO](http://php.net/manual/en/pdo.prepare.php)扩展）会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:29:05.937

```
$sql = mysql_real_escape_string("INSERT INTO 
locations(id,anchor_url,anchor_title) VALUES (1,'http%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fmsid%3D210426849026628615459.0004bd6aaf4e431aab7f9%26msa%3D0%26output%3Dembed', 'Se &quot;Mar Menor&quot; p&aring; kartet')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:27:27.360

将撇号放在字符串值中，您有一个 ` 字符

```
INSERT INTO `locations`(`id`,`anchor_url`,`anchor_title`) 
VALUES (1,'http%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fmsid%3D210426849026628615459.0004bd6aaf4e431aab7f9%26msa%3D0%26output%3Dembed', 'Se &quot;Mar Menor&quot; p&aring; kartet') 
```

# php - 通过从视图中调用控制器来处理重复耗时的代码？

> ID：10615614
> 
> 赞同：1
> 
> 时间：2012-05-16T09:26:29.967
> 
> 标签：php, model-view-controller, codeigniter

我对 mvc 和框架非常陌生，到目前为止，我遇到了很多挑战，真正困扰我的是从视图中调用控制器或任何其他方式来处理将在每个页面中重复的代码

假设我有一个站点，并且用户现在访问我的站点时可以登录或不登录如果用户已登录我想在我的标题视图中说“欢迎用户名”

标题视图将从许多不同的控制器中调用我想正确的方法是检查用户是否登录到每个控制器并将该数据传递给标题视图

但更简单的方法是直接在视图中执行此操作并使用控制器身份验证部分

我想在标题视图中做这样的事情：

```
$this->load->controller('user');
$user = $this->user->is_logged();
if($user)
echo "welcome $user"; 
```

有没有办法做到这一点 ？如果答案是肯定的，这是正确/有效的做法吗？如果没有，有没有办法减少时间和编码是这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:00:20.763

您不要从视图中调用控制器！

如果您有“重复性”任务 - 应该将它们放入库或助手中，然后从那里运行。

在那个库中 - 你有一个像

```
function display_log_status()
{
     if ($this->user->is_logged())
     {
         return "welcome!";
     }
     else
     {
          return "please log in!";
     }
} 
```

然后在您的视图中调用“display_log_status()”。

[MVC 指南](http://codeigniter.com/user_guide/overview/mvc.html)

[在 CI 中创建库](http://codeigniter.com/user_guide/general/creating_libraries.html)

# sqlite - 我们可以在sqlite中为单个列存储多个值吗

> ID：10615615
> 
> 赞同：0
> 
> 时间：2012-05-16T09:26:31.543
> 
> 标签：sqlite

在我的应用程序中，我想在 sqlite 数据库中存储单个列的两个字符串，即同一个单词的两个图像，除了主键和外键关系之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:27:24.643

您可以为图像设置两列，例如：

**我的表**

```
columnWord
columnImage1
columnImage2 
```

# java - 如何在没有实体类的情况下使用 Hibernate Criteria API？

> ID：10615618
> 
> 赞同：4
> 
> 时间：2012-05-16T09:26:41.853
> 
> 标签：java, hibernate, criteria-api, hibernate-criteria

我想利用 Criteria API 的 db 独立 HQL 和类型安全性。但我没有实体类。

我可以直接使用 Criteria API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:30:11.017

不，你不能。HQL 和 Criteria API 的重点是根据实体和它们之间的关联来查询对象模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:42:19.207

首先，很高兴注意到 Criteria API 通常用于替代 HQL 来构建动态查询（“ *HQL 非常强大，但一些开发人员更喜欢使用面向对象的 API 动态构建查询，而不是构建查询字符串*”[参考链接](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objecstate-querying-criteria)） .

其次，Hibernate 是一个对象/关系（数据库）持久化实现。为了使用它，我们需要定义其对象应映射到目标数据库表（实体）的类。

对于使用域类为 Hibernate 会话获取 Criteria API：

```
Criteria crit = sess.createCriteria(Cat.class);
crit.setMaxResults(50);
List cats = crit.list(); 
```

Session 对象使用从“Cat”类到其对应表（可能在数据库中命名为“Cat”）的映射。

因此，最终没有实体类及其映射，没有 Session 对象。并且没有 Session ，没有 Criteria 对象。

Criteria 需要知道需要查询的 Classes (Cat.class)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:36:29.233

你怎么能告诉hibernate你想应用哪个类？

所以你必须在 createcriteria(Entity.class) 中传递实体类名。

而且你... Criteria 提供了丰富的功能，这将减少你的代码。

但请注意……所有事物都有正面 - 负面的意义。

标准也有一些负面影响......

所以..小心。根据您的应用程序相关规范使用

# doxygen - 如何超链接到深层 Doxygen 内容？

> ID：10615619
> 
> 赞同：5
> 
> 时间：2012-05-16T09:26:43.523
> 
> 标签：doxygen, permalinks

正如[Are URLs to doxygen pages Permanent](https://stackoverflow.com/questions/5705703)所暗示的那样，doxygen中的 URL**不是**永久的。

那么，您如何从外部站点/文档超链接 doxygen 中的深层内容（例如：特定功能）？

（目前，提示用户在家中使用搜索框似乎是一种适当的解决方法）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:07:46.690

链接基于函数签名，因此它们确实是持久的（在设置为 的条件下*，*`SHORT_NAMES`这`NO`是默认值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:46:17.697

根据[这个线程](http://old.nabble.com/Howto-get-HTML-links-to-functions-so-external-documents-links-o-function-documentation--td20025814.html)：

> Doxygen 确实已经生成了持久链接（除非`SHORT_NAMES`设置为`YES`）。

这是来自 doxygen 的创造者（他可能想在这里用他自己的，比我的更明确的答案插话）。因此，您似乎可以放心地假设您的 URL 不应更改，除非您当然更改了类/函数的名称。

# objective-c - 如何在没有内存泄漏的情况下将图像的 NSData 转换为 CGImageRef

> ID：10615621
> 
> 赞同：5
> 
> 时间：2012-05-16T09:26:47.770
> 
> 标签：objective-c, memory-leaks, cgimageref

我将图像的 NSData 转换为 CGImage 如下，但我在那里遇到内存泄漏，但有人告诉我如何转换它而不发生泄漏：

```
CFDataRef imgData;
CGDataProviderRef imgDataProvider;
CGImageRef image1;
imgData = (CFDataRef)[array objectAtIndex:i];
    imgDataProvider = CGDataProviderCreateWithCFData (imgData);
    image1 = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T09:49:15.920

这应该有效：

```
CFDataRef imgData;
CGDataProviderRef imgDataProvider;
CGImageRef image1;
imgData = (CFDataRef)[array objectAtIndex:i];
imgDataProvider = CGDataProviderCreateWithCFData (imgData);
CFRelease(imgData);
image1 = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);
CGDataProviderRelease(imgDataProvider); 
```

完成后不要忘记使用`CGImageRelease(image1);`。

# java - Apache POI在读取xlsx文件时获取单元格颜色

> ID：10615628
> 
> 赞同：3
> 
> 时间：2012-05-16T09:27:03.390
> 
> 标签：java, apache-poi

大家好，我正在使用of读取一个`xlsx`文件。现在我想读取单元格的颜色并在新文件上应用相同的颜色。我将如何做。我的代码是：`XSSF``Apche POI``xlsx`

```
public void readXLSXFile(String filePath) throws FileNotFoundException, IOException
    {
        XSSFRow row;
        XSSFRow new_row;
        XSSFSheet sheet;
        XSSFCell cell;
        XSSFCell new_cell;
        XSSFCellStyle cellStyle;
        XSSFDataFormat dataFormat;
        XSSFColor color;

        XSSFWorkbook xssfWorkbook = new XSSFWorkbook(new FileInputStream(filePath));
        XSSFWorkbook workbook = new XSSFWorkbook();
        XSSFSheet new_sheet = (XSSFSheet) workbook.createSheet();
        for(int i = 0; i < xssfWorkbook.getNumberOfSheets(); i++ )
        {
            sheet = xssfWorkbook.getSheetAt(i);
            for(int j =0; j<sheet.getLastRowNum(); j++)
            {
                row = (XSSFRow) sheet.getRow(j);
                new_row = new_sheet.createRow(j);
                for(int k = 0; k<row.getLastCellNum(); k++)
                {
                    cell = row.getCell(k);
                    new_cell = new_row.createCell(k);
                    cellStyle = workbook.createCellStyle();
                    dataFormat = workbook.createDataFormat();
                    cellStyle.setDataFormat(dataFormat.getFormat(cell.getCellStyle().getDataFormatString()));
                    color = cell.getCellStyle().getFillBackgroundColorColor();
                    cellStyle.setFillForegroundColor(color);
                    new_cell.setCellStyle(cellStyle);
                    System.out.println(cell.getCellStyle().getFillForegroundColor()+"#");
                    switch (cell.getCellType()) {
                    case 0:
                        new_cell.setCellValue(cell.getNumericCellValue());
                        break;
                    case 1:
                        new_cell.setCellValue(cell.getStringCellValue());
                        break;
                    case 2:
                        new_cell.setCellValue(cell.getNumericCellValue());
                        break;
                    case 3:
                        new_cell.setCellValue(cell.getStringCellValue());
                        break;
                    case 4:
                        new_cell.setCellValue(cell.getBooleanCellValue());
                        break;
                    case 5:
                        new_cell.setCellValue(cell.getErrorCellString());
                        break;
                    default:
                        new_cell.setCellValue(cell.getStringCellValue());
                        break;
                    }
                }
            }
        }
        workbook.write(new FileOutputStream("G:\\lalit.xlsx"));
    } 
```

我使用 Apche POI 3.8。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T10:55:28.113

我对 vikiiii 的回答发表了评论。我想我会进一步扩展它。他的回答特定于 HSSF (.xls)，但是 HSSF 和 XSSF 类都来自同一个接口，因此代码是相同的，您只需使用 XSSF 而不是 HSSF。看到你想重用我推荐使用的颜色：

```
XSSFColor bgColor = xssfCell.getCellStyle().getFillBackgroundColorColor(); 
```

有关 Javadoc，请参见[此处](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFCellStyle.html#getFillBackgroundColorColor%28%29)。现在要将新单元格设置为该颜色，您可以使用[它](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFCellStyle.html#setFillBackgroundColor%28org.apache.poi.xssf.usermodel.XSSFColor%29)。

```
secondCell.getCellStyle().setFillBackgroundColor(bgColor); 
```

我建议查看 XSSF 和 HSSF 类所继承的接口，并查看使您的代码能够同时处理 xls 和 xlsx 文件。据我所知，唯一的区别是您使用[WorkbookFactory](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/WorkbookFactory.html#create%28java.io.File%29)设置工作簿的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T09:30:06.537

您可以使用此代码获取单元格颜色。

```
cell.getCellStyle().getFillBackgroundColor(); 
```

尝试

```
HSSFColor.getIndexHash().get(myCell.getCellStyle().getFillBackgroundColor()) 
```

# php - 如何显示来自其他站点的 RSS 提要

> ID：10615635
> 
> 赞同：4
> 
> 时间：2012-05-16T09:27:16.297
> 
> 标签：php, javascript, html, rss

我已经研究这个话题几天了，但我仍然不知道如何去做。

我想从 forexfactory.com 获取 RSS 提要到我的网站，我想对正在发生的事情进行一些格式化，我还想从他们那里获得最新信息（尽管最后两点可以等待，只要我有更多或提要跑步）。

如果有人知道教程或我可以使用的东西，我最好从头开始开发它？

如果不是，我会满足于使用第三方 API 或类似的东西，只要我能做一些工作。

我不知道它是什么，但有一些关于 RSS 的东西我没有得到，所以如果有人知道任何好的东西，可能是基本教程，这会对我有很大帮助。一页一页的谷歌搜索有点难。

此外，我不会对它以 Javascript、PHP 或 HTML 输出的语言大惊小怪。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:49:20.123

看起来 SimplePie 可能是您正在寻找的东西。这是一个非常基本的 RSS 插件，非常易于使用并且也可以自定义。您可以从[网站](http://simplepie.org/)下载它。

您可以直接使用它，也可以根据需要[深入](http://simplepie.org/wiki/setup/sample_page)[研究](http://simplepie.org/wiki/reference/start)插件。这是他们网站上的[演示](http://simplepie.org/demo/?feed=http://newsrss.bbc.co.uk/rss/newsonline_world_edition/front_page/rss.xml)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T08:04:37.153

索引.php

```
include('rss_class.php');

  $feedlist = new rss($feed_url);
  echo $feedlist->display(2,"Feed Title"); 
```

rss_class.php

```
<?php
 class rss {
        var $feed;
        function rss($feed){
            $this->feed = $feed;
        }

        function parse(){
            $rss = simplexml_load_file($this->feed);

            //print_r($rss);die; /// Check here for attributes

            $rss_split = array();

            foreach ($rss->channel->item as $item) {

              $title = (string) $item->title; 
              $link   = (string) $item->link; 
              $pubDate   = (string) $item->pubDate; 
              $description = (string) $item->description; 
              $image = $rss->channel->item->enclosure->attributes();
              $image_url =   $image['url'];

             $rss_split[] = '
                    <li>
                        <h5><a href="'.$link.'">'.$title.'</a></h5>
                        <span class="dateWrap">'.$pubDate.'</span>
                        <p>'.$description.'</p>
                        <a href="'.$link.'">Read Full Story</a>
                    </li>
                ';
            }
            return $rss_split;
        }

        function display($numrows,$head){

            $rss_split = $this->parse();
            $i = 0;
            $rss_data = '<h2>'.$head.'</h2><ul class="newsBlock">';
            while($i<$numrows){
              $rss_data .= $rss_split[$i];
              $i++;
            }
            $trim = str_replace('', '',$this->feed);
            $user = str_replace('&lang=en-us&format=rss_200','',$trim);

            $rss_data.='</ul>';

            return $rss_data;
        }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T23:05:47.340

我没有加入 < TABLE > 标记，因为您可能想要显示的文章不止一篇。

```
class RssFeed
{
    public $rss = "";

    public function __construct($article)
    {
      $this->rss = simplexml_load_file($article, 'SimpleXMLElement', LIBXML_NOERROR | LIBXML_NOWARNING);

      if($this->rss != false)
      {
        printf("<TR>\r\n");
        printf("<TD>\r\n");
        printf("<h3>%s</h3>\r\n", $this->rss->channel->title);
        printf("</TD></TR>\r\n");

        foreach($this->rss->channel->item as $value)
        {
          printf("<TR>\r\n");
          printf("<TD id=\"feedmiddletd\">\r\n");
          printf("<A target=\"_blank\" HREF=\"%s\">%s</A><BR/>\r\n", $value->link, $value->title);
          printf($value->description);
          printf("</TD></TR>\r\n");
        }
      }
    }
} 
```

# blackberry - 如何在黑莓应用程序中使用泰卢固语字体

> ID：10615644
> 
> 赞同：0
> 
> 时间：2012-05-16T09:27:44.963
> 
> 标签：blackberry, fonts, blackberry-eclipse-plugin, truetype

![在此处输入图像描述](../Images/1d72769b97034c0089e07c3889685d49.png)由于我是黑莓/Java 开发的新手，我不知道如何在我的黑莓应用程序中使用*“泰卢固语”*字体。请举个例子。

![在此处输入图像描述](../Images/1d72769b97034c0089e07c3889685d49.png) 查看三个模拟器之间的区别 9300-OS6 不显示 9790-os7 仅在此设备中显示。9900-os7 甚至 OS7 都不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:55:39.943

```
import net.rim.device.api.system.*;
import net.rim.device.api.ui.*; 
import net.rim.device.api.ui.container.*;
import net.rim.device.api.ui.component.*;
import java.util.*;

public class FontLoadingDemo extends UiApplication
{
    public static void main(String[] args)
    {
        FontLoadingDemo app = new FontLoadingDemo();
        app.enterEventDispatcher();
    }

    public FontLoadingDemo()
    {
        pushScreen(new FontLoadingDemoScreen());
    }
}

class FontLoadingDemoScreen extends MainScreen
{   
    public FontLoadingDemoScreen()
    {
        setTitle("Font Loading Demo");

        LabelField helloWorld = new LabelField("Hello World");

        if (FontManager.getInstance().load("Myfont.ttf", "MyFont", FontManager.APPLICATION_FONT) == FontManager.SUCCESS) 
        {
            try 
            {
                FontFamily typeface = FontFamily.forName("MyFont");
                Font myFont = typeface.getFont(Font.PLAIN, 50);
                helloWorld.setFont(myFont); 
            }
            catch (ClassNotFoundException e) 
            {
                System.out.println(e.getMessage());
            }
        }
        add(helloWorld);
    }
} 
```

资料来源：[http ://docs.blackberry.com/en/developers/deliverables/11958/Load_and_use_a_custom_font_899948_11.jsp](http://docs.blackberry.com/en/developers/deliverables/11958/Load_and_use_a_custom_font_899948_11.jsp)

# android - Android : 带定时器的录音机

> ID：10615646
> 
> 赞同：4
> 
> 时间：2012-05-16T09:27:47.747
> 
> 标签：android, timer, audio-recording

我正在尝试开发记录音频和播放的应用程序。我能够记录和播放录制的文件。现在我想在录制音频或声音时显示录制时间。搜索谷歌和许多东西都无法得到任何想法。谁能告诉我如何进行下一步。

这是我用计时器录制音频的代码

```
public class AudioRecordActivity extends Activity implements OnClickListener {

MediaRecorder recorder = new MediaRecorder();
private String fileName;
private Button record;
private Button play;
private Button stop;
private TextView timeDisplay;
Chronometer myChronometer;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    record = (Button) findViewById(R.id.recordButton);
    record.setOnClickListener(this);

    play = (Button) findViewById(R.id.playButton);
    play.setOnClickListener(this);

    stop = (Button) findViewById(R.id.stopButton);
    stop.setOnClickListener(this);

    myChronometer = (Chronometer) findViewById(R.id.timer);
    record.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            myChronometer.start();
        }
    });

    stop.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            myChronometer.stop();

        }
    });
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.recordButton:
        try {

            stop.setEnabled(true);
            record.setEnabled(false);

            startRecording();
        } catch (IOException e) {
            System.out.println(e + "");
            e.printStackTrace();
        }
        break;
    case R.id.stopButton:

        stop.setEnabled(false);
        record.setEnabled(true);
        stopRecording();

        break;

    case R.id.playButton:
        Intent intent = new Intent();
        // PLAY ANY AUDIO/VIDEO FILE
        intent.setAction(android.content.Intent.ACTION_VIEW);
        File file = new File("/sdcard/" + fileName);
        intent.setDataAndType(Uri.fromFile(file), "audio/*");
        startActivity(intent);
        break;

    default:
        break;
    }

}

void startRecording() throws IOException {
    SimpleDateFormat timeStampFormat = new SimpleDateFormat(
            "yyyy-MM-dd-HH.mm.ss");
    // fileName = "audio_" + timeStampFormat.format(new Date()) + ".mp4";
    fileName = "audioTest" + ".mp4";

    recorder = new MediaRecorder();

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);

    recorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);

    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

    recorder.setOutputFile("/sdcard/" + fileName);

    recorder.setAudioEncodingBitRate(320);
    recorder.setAudioSamplingRate(16000);
    recorder.setAudioChannels(2);
    recorder.prepare();

    recorder.start();

}

private void stopRecording() {
    if (null != recorder) {
        try {
            recorder.stop();
            recorder.reset();
            recorder.release();
            recorder = null;
        } catch (NullPointerException e) {
            Toast.makeText(getApplicationContext(),
                    "Recording not started", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (KeyEvent.KEYCODE_BACK == keyCode) {
        finish();
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

这里我的 logcat 错误

```
05-16 16:11:11.603: E/AndroidRuntime(21256): FATAL EXCEPTION: main
05-16 16:11:11.603: E/AndroidRuntime(21256): java.lang.RuntimeException: Unable to start     activity ComponentInfo{xxx.com/xxx.com.AudioRecordActivity}:    java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.Chronometer
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.os.Looper.loop(Looper.java:137)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at java.lang.reflect.Method.invokeNative(Native Method)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at java.lang.reflect.Method.invoke(Method.java:511)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at dalvik.system.NativeStart.main(Native Method)
05-16 16:11:11.603: E/AndroidRuntime(21256): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.Chronometer
05-16 16:11:11.603: E/AndroidRuntime(21256):    at xxx.com.AudioRecordActivity.onCreate(AudioRecordActivity.java:45)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.Activity.performCreate(Activity.java:4465)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-16 16:11:11.603: E/AndroidRuntime(21256):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T10:09:18.203

为此，您应该尝试 Chronometer，这样您就可以实现您的目标，祝您好运

Chronometer 的示例代码在这里：

在 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="@string/hello"
  />
<Chronometer
 android:id="@+id/chronometer"
 android:layout_gravity="center_horizontal"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
 />
<Button
 android:id="@+id/buttonstart"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Start"
 />
<Button
 android:id="@+id/buttonstop"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Stop"
 />
<Button
 android:id="@+id/buttonreset"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Reset"
 />
</LinearLayout> 
```

在java文件中

```
package com.exercise.AndroidChronometer;

import android.app.Activity;
import android.os.Bundle;
import android.os.SystemClock;
import android.view.View;
import android.widget.Button;
import android.widget.Chronometer;

public class AndroidChronometer extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       final Chronometer myChronometer = (Chronometer)findViewById(R.id.chronometer);
       Button buttonStart = (Button)findViewById(R.id.buttonstart);
       Button buttonStop = (Button)findViewById(R.id.buttonstop);
       Button buttonReset = (Button)findViewById(R.id.buttonreset);

       buttonStart.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    myChronometer.start();
   }});

       buttonStop.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    myChronometer.stop();

   }});

       buttonReset.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    myChronometer.setBase(SystemClock.elapsedRealtime());

   }});

   }
} 
```

# regex - tcl 中的正则表达式 - 字符串

> ID：10615648
> 
> 赞同：1
> 
> 时间：2012-05-16T09:27:50.823
> 
> 标签：regex, tcl

我有个问题。我有 1 个变量

```
set a "mau_gigabitethernet0/0/cpu0/2" 
```

`regexp`在我需要获取的帮助下`0/0/CPU0`

我收到一个错误，“<code>invalid escape \ sequence”谁能帮帮我..???

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:50:38.003

我会寻找这样的东西：

```
regexp {(?i)\d+/\d+/cpu\d+} $a extracted
puts $extracted 
```

请注意，正则表达式在*大括号*中，而不是双引号。这很重要。（如果它是在双引号中，那肯定`"(?i)\\d+/\\d+/cpu\\d+"`是很尴尬的。）另外，我用`(?i)`它来标记它为一个不区分大小写的正则表达式。

# c# - 将部门与案例相关联

> ID：10615652
> 
> 赞同：0
> 
> 时间：2012-05-16T09:28:01.290
> 
> 标签：c#, plugins, dynamics-crm-2011

我们公司有两个子部门，每个公司都有一个团队。事情是我们不希望一个部门能够看到另一个部门的情况。这里没有什么很复杂的。

我的问题是，与部门关联的帐户默认情况下应该与其案例相关联......无论谁创建案例（来自一个团队或另一个团队）。

那可能吗？如果是这样，你能给我一个提示吗？

多谢你们 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:06:06.607

MSCRM 通过业务部门开箱即用地做到了这一点。阅读 Technet 上的 BU 和安全性：[http ://technet.microsoft.com/en-us/library/gg328427.aspx](http://technet.microsoft.com/en-us/library/gg328427.aspx)

通过插件自己做几乎可以肯定是错误的方法。

# php - 由 mysql php 填充的链接下拉菜单

> ID：10615653
> 
> 赞同：0
> 
> 时间：2012-05-16T09:28:02.273
> 
> 标签：php, mysql, drop-down-menu

对不起，如果我是开发新手，术语有误，但我链接了多个下拉菜单，以便上一个菜单的结果确定下一个菜单将填充下一个。

即如果我选择英国，下一个列表将显示，伦敦，如果我选择西班牙，下一个列表将显示马德里

我的下拉菜单被 mysql 填充，这很好，但是我如何在不调用另一个页面的情况下将它们链接起来

**这是我拥有的 HTML 示例：**

```
<div id="container">
  <h3>Price List</h3>
  <form method="post" action="" name="form1">
  <? 
  include 'classes.php';
  $query="SELECT * FROM Sex_Table";
  $result=mysql_query($query);
  ?>
  <div id="select-1">
    <select class="calculate" name="sdf" onChange="getClothing(this.value)">
    <option value="0">Please Select</option>
    <? while($row=mysql_fetch_array($result)) { ?>
    <option value=<?=$row['Price']?> sex_price="<?=$row['Price']?>"><?=$row['Sex_Name']?>&nbsp;(£<?=$row['Price']?>)</option>
  <? } ?>
    </select>
  </div>
  <? 
  $Sex=intval($_GET['Sex_var']);
  include 'classes.php';
  $query="SELECT * FROM Clothing_Table WHERE Sex_Table_ID='$Sex'";
  $result=mysql_query($query);
  ?>
  <div id="select-2">
    <select class="calculate" name="sdf" onChange="">
    <option value="0">Please Select</option>
    <? while($row=mysql_fetch_array($result)) { ?>
    <option value=<?=$row['Price']?> sex_price="<?=$row['Price']?>"><?=$row['Clothing_Name']?>&nbsp;(£<?=$row['Price']?>)</option>
  <? } ?>
    </select>
  </div>
</form> 
```

您会注意到在“getClothing(this.value)”上的更改调用

这是那个js：

```
function getClothing(Sex_Table_ID) {        

    $.ajax({
       type: "get",
       url: "findClothing.php",
       data: { Sex_var: Sex_Table_ID },
       error: function(error) { alert('System error, please try again.'); },
       success: function(data){ //data is the response from the called file
         $("#select-2").html(data); //this changes the contents of the div to data that was returned
       }
     });    
} 
```

我需要它，这样它就不会调用 url：“findClothing.php”，因为一旦它这样做了，我的价格就不再计算了。

我确定我真的不需要展示这部分，但只是以防万一，这是计算我的价格的原因：

```
$(function(){
    $('.calculate').change(function() {
        var total = 0;
        $('.calculate').each(function() {
            if($(this).val() != 0) {
                total += parseFloat($(this).val());
            }
        });
        $('#total').text('£' + total.toFixed(2));
    });

});//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:36:43.503

您确定您的 ajax 数据包含以价格为值的选项标签吗？

也改变：

```
$('.calculate').change(function() { 
```

和

```
$(".calculate").live("change", function(){ 
```

# sql - 将文本文件数据拆分为列

> ID：10615654
> 
> 赞同：0
> 
> 时间：2012-05-16T09:28:06.107
> 
> 标签：sql, text

大家好，我有一个文本文件，其中包含数千行/记录，它们采用以下格式

```
6242S10TH AVENUE                    KWANOBUHLE                    Y 6242 
```

这些单词之间的空格也不一致。所以，现在我只想将这些数据分成三个单独的列，以便制作一个表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:32:43.740

这里提到的类--> [http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser(v=vs.100).aspx)会有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:33:31.457

如果你假设：

*   列之间至少有三个空格
*   列值最多不包含三个空格
*   没有空列值

您可以在三个空格上分割一行并修剪值。C# 示例：

```
string[] columns =
  line.Split(new string[]{"   "}, StringSplitOptions.None)
  .Select(s => s.Trim())
  .ToArray(); 
```

# scalaxb - 使用 Scalaxb 连接到 SOAP 服务时如何构建蛋糕？

> ID：10615662
> 
> 赞同：0
> 
> 时间：2012-05-16T09:28:21.050
> 
> 标签：scalaxb

我已经阅读了文档，但我需要知道的是：

我没有使用虚构的股票报价服务（带有虚构的 wsdl 文件）。我正在使用不同名称的不同服务。

在已经生成的成千上万行代码中，我将在哪里找到我需要放在一起的与文档示例中的这一行相对应的 Scala 特征：

```
val service = (new stockquote.StockQuoteSoap12Bindings with scalaxb.SoapClients with scalaxb.DispatchHttpClients {}).service 
```

现在，您可能会想“为什么不在生成的代码中搜索 Soap12Bindings”？好主意 - 但结果为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:31:01.220

文档中的示例已过时或过于具体。（该文档在内部也不一致*，并且*与使用 scalaxb 输出的实际文件名不一致。）

首先，搜索`SoapBindings`而不是`Soap12Bindings`查找特定于服务的特征（第一个特征）。

然后，代替`scalaxb.SoapClients`，使用`scalaxb.Soap11Clients`。

# asp.net - 在 asp.net 中的 PDF 到 EPUB

> ID：10615663
> 
> 赞同：2
> 
> 时间：2012-05-16T09:28:27.343
> 
> 标签：asp.net, pdf, epub

在我的项目中，我正在制作一个阅读器。它需要 PDF 格式的书籍，我必须以 EPUB 格式显示它们。我不知道如何将 PDF 转换为 EPUB。这是在 CALIBER 软件中实现的。EPUB（电子出版）是一个开放的电子书标准，基本上是为可重排的内容而设计的。参考：[EPUB 维基百科](http://en.wikipedia.org/wiki/EPUB)

请提供一些关于我应该如何进行的指导来提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:31:43.877

查看本教程： http: [//www.codeproject.com/Articles/44395/Conversion-of-PDF-to-EPUB-Format](http://www.codeproject.com/Articles/44395/Conversion-of-PDF-to-EPUB-Format)

亲切的问候，
博

# javascript - 如何从json中检索值

> ID：10615666
> 
> 赞同：0
> 
> 时间：2012-05-16T09:28:36.880
> 
> 标签：javascript, json

我是 json 新手，所以请帮我解决这个问题。我正在尝试从此 json 中检索值，例如：我想从此 json 中获取 fname。我如何得到这个值；我尝试了 showdata.fname ， showdata.id[0].fname，但没有让我知道这是愚蠢的要求，但请帮助我。

```
var showdata = {
    "fc1d3f54-bcd3-2c4d-2626-cb9904e63800": {
        "fname": "Nitish",
        "lname": "pakhare",
        "phoneno": "4545445",
        "id": "fc1d3f54-bcd3-2c4d-2626-cb9904e63800"
    },
    "6ae08ee6-b02d-0eeb-4ead-1d52bbdadf5e": {
        "fname": "Ashish",
        "lname": "Pakahre",
        "phoneno": "454545",
        "id": "6ae08ee6-b02d-0eeb-4ead-1d52bbdadf5e"
    },
    "7e418c15-17c1-da8e-b614-b362f7937eb9": {
        "fname": "Arpita",
        "lname": "kimar",
        "phoneno": "454545",
        "id": "7e418c15-17c1-da8e-b614-b362f7937eb9"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:32:30.087

此代码记录`fname`此对象内的所有属性。

```
for( var key in showdata ) {
  if ( showdata.hasOwnProperty( key ) ) {
     console.log( showdata[ key ][ 'fname' ] );
  }
} 
```

您实际上有一个具有多个属性的对象。上面的代码遍历所有属性，检查属性是否真的存在于这个对象中（这解决了一些来自 JavaScript 对象的原型性质的问题）并记录值。您应该用您的程序逻辑替换日志记录。

更容易的是使用数组而不是对象的实现。这样你就可以使用所有的原生 JavaScript 数组函数，比如`map`etc。但是，在这种情况下，你会丢失你的键（除非你将它们作为附加属性添加到子对象中）。这将如下所示：

```
var showdata = [
    {
        "key": "fc1d3f54-bcd3-2c4d-2626-cb9904e63800",
        "fname": "Nitish",
        "lname": "pakhare",
        "phoneno": "4545445",
        "id": "fc1d3f54-bcd3-2c4d-2626-cb9904e63800"
    },
    {
        "key": "6ae08ee6-b02d-0eeb-4ead-1d52bbdadf5e",
        "fname": "Ashish",
        "lname": "Pakahre",
        "phoneno": "454545",
        "id": "6ae08ee6-b02d-0eeb-4ead-1d52bbdadf5e"
    },
    {
        "key": "7e418c15-17c1-da8e-b614-b362f7937eb9",
        "fname": "Arpita",
        "lname": "kimar",
        "phoneno": "454545",
        "id": "7e418c15-17c1-da8e-b614-b362f7937eb9"
    }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:30:29.687

`showdata.fc1d3f54-bcd3-2c4d-2626-cb9904e63800.fname`应该是答案，但我不确定它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:32:46.340

```
showdata["fc1d3f54-bcd3-2c4d-2626-cb9904e63800"].fname 
```

实际上，这是正确的语法。

请参阅此修补程序：[JSON Tinker](https://tinker.io/8745e)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:32:59.257

如果你想访问它们，你可以这样做：

```
showdata.fc1d3f54-bcd3-2c4d-2626-cb9904e63800.fname 
```

但这将是硬编码。相反，您可以通过循环访问它们。

```
var key, entry;

for(key in showdata){
    if(showdata.hasOwnProperty(key)){
        entry = showdata[key];
        //entry.fname
        //entry.lname
        //entry.phoneno
        //entry.id, which would be the same as key in your case
    }
} 
```

您还可以考虑使用数组，这样您就不会对键进行硬编码：

```
var showdata = [
    {
        "fname": "Nitish",
        "lname": "pakhare",
        "phoneno": "4545445",
        "id": "fc1d3f54-bcd3-2c4d-2626-cb9904e63800"
    }, {
        "fname": "Ashish",
        "lname": "Pakahre",
        "phoneno": "454545",
        "id": "6ae08ee6-b02d-0eeb-4ead-1d52bbdadf5e"
    }, {
        "fname": "Arpita",
        "lname": "kimar",
        "phoneno": "454545",
        "id": "7e418c15-17c1-da8e-b614-b362f7937eb9"
    }
]

//showdata[0].fname 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T09:33:43.803

看起来您正在使用长 HEX 字符串作为键，您将访问类似的项目

```
showdata['fc1d3f54-bcd3-2c4d-2626-cb9904e63800']['fname'] 
```

方括号表示法比点表示法更受欢迎，因为它更适合查找内容，尤其是像这样的长键。

```
showdata['fc1d3f54-bcd3-2c4d-2626-cb9904e63800'].fname 
```

也可以

如果你希望它用整数索引，也许你可以像这样构造它：

```
var showdata = [
    { 
    "fname": "Nitish",
    "lname": "pakhare",
    "phoneno": "4545445",
    "id": "fc1d3f54-bcd3-2c4d-2626-cb9904e63800"
    },
    {
    "fname": "Ashish",
    "lname": "Pakahre",
    "phoneno": "454545",
    "id": "6ae08ee6-b02d-0eeb-4ead-1d52bbdadf5e"
    }
] 
```

作为一个对象数组，那么你可以做

```
showdata[0].fname 
```

# web-services - Spring Web - Restful Webservice - 在客户端/服务器端传递/接收 ArrayList 作为参数/参数

> ID：10615667
> 
> 赞同：1
> 
> 时间：2012-05-16T09:28:44.357
> 
> 标签：web-services, spring, rest, arraylist, resttemplate

我创建了一个示例应用程序来全面了解带有 REST Web 服务的 Spring MVC。我创建了一个托管 Web 服务的应用程序和一个调用该 Web 服务并获取相关数据的客户端。我能够像字符串一样从客户端传递参数，并且能够以列表或单个对象的形式接收数据，直到这里一切顺利..

现在我想将列表作为参数从客户端传递，并且还想在 web 服务端实现以获取从客户端应用程序传递的列表。任何人都可以帮助解决这种情况吗？

请找到我的工作版本的代码片段。

```
ApplicationContext applicationContext = new ClassPathXmlApplicationContext("appContext.xml", Client.class);
RestTemplate restTemplate = applicationContext.getBean("restTemplate", RestTemplate.class);
String url;
// retrieve a list of customers
url = "http://localhost:8080/restful-ws/app/testlist.xml";

List<CustomerBean> custList = (List) restTemplate.getForObject(url, List.class);
for (CustomerBean cust : custList) {
  System.out.println(">> cust :"+ cust.toString());} 
```

Web 服务端实现。

```
@RequestMapping(method=RequestMethod.GET, value="/testlist")
public ModelAndView showCustomers() {
    ModelAndView mv = new ModelAndView("customerListKey");
    List<Customer> custs = new ArrayList<Customer>();
    for (Customer customer:customers.values()) {
        custs.add(customer);
    }
    mv.addObject("allCustomers", custs);
    return mv;
} 
```

我也有相关文件，但是如果将所有代码片段都放上，它会变得太多。主要是我的查询是如何从客户端传递列表以及如何从接收器/服务器端获取它？，在双方我只使用弹簧

提前感谢您的时间和帮助。

-罗纳克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:09:47.463

使用 CustomerBean 数组

```
CustomerBean[] custList = restTemplate.getForObject(url, CustomerBean[].class); 
```

从数组到列表的转换留给感兴趣的读者作为练习......

# facebook - 将照片上传到页面时间线 Facebook SDK

> ID：10615668
> 
> 赞同：1
> 
> 时间：2012-05-16T09:28:45.253
> 
> 标签：facebook

我制作了这个小应用程序，它基本上要求用户登录并将照片发布到 FB 页面。我拥有的代码非常适合在您自己的墙上发布，但是在发布到页面时我遇到了一些困难。

```
require_once('../src/facebook.php');

$config = array(
'appId' => 'XXXXXXXXXXXXX',
'secret' => 'XXXXXXXXXXXXXXX',
'fileUpload' => true,
);

$facebook = new Facebook($config);
$user_id = $facebook->getUser();

$photo = realpath("mypic.png"); // Path to the photo on the local filesystem
$message = 'Photo upload via the PHP SDK!';

if($user_id) {
try {
$ret_obj = $facebook->api('/PAGE_ID_HERE_??/photos', 'POST', array(
'source' => '@' . $photo,
'message' => $message,)); 
```

如果我使用提要而不是照片，就像这里

```
$facebook->api('/PAGE_ID_HERE_??/FEED', 
```

它有效，但只发布消息。我拥有所需的所有权限：
user_photos user_videos publish_action
manage_pages publish_stream

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:48:19.623

要与页面交互，您需要用户的访问令牌。用户需要是页面的“管理员”或“内容创建者”。这些令牌是每个用户每页的。

我有一个使用 cURL 调用处理的 PHP 示例。我认为它给出了这个想法。

```
$ch = curl_init();
$url = "https://graph.facebook.com/" . $album_id . "/photos?access_token=" . $access_token;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$retdata = curl_exec($ch);
echo($retdata); 
```

在这一个中，`$album_id`是页面的专辑 ID， 是页面`$access_token`用户的访问令牌。

这里还有一个 Facebook个人相册[的例子。](https://developers.facebook.com/blog/post/498/)您可以更改专辑 ID 和令牌并使用该方法。

# java - 在 Ext GWT 3.0 树中展开并选择节点

> ID：10615681
> 
> 赞同：1
> 
> 时间：2012-05-16T09:29:17.657
> 
> 标签：java, gxt, uibinder

我在布局的第一个内容窗格中添加了一个带有树的手风琴布局容器。不，在加载应用程序时需要调用扩展并选择一个节点（它是一个模型）。

然后我将它添加到类的构造函数中，对应于 uibinder 布局：

```
widget = uiBinder.createAndBindUi(this);               // everything's bound

accordionLayoutContainer.setActiveWidget(firstPanel);  // OK, expands first pane
tree.getSelectionModel().select(mynode, true);        // no visible effect
tree.setExpanded(mynode, false);                       // no visible effect 
```

这里缺少什么？设置状态后是否必须强制“某物”的布局，还是选择和展开节点的位置错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:20:32.983

找到了解决方案。必须推迟调用 to`setExpand`直到树被附加。所以我向*父小部件*`AttachEvent.Handler`添加了一个- 将其直接添加到树中不起作用，因为在模型注册之前，处理程序被提前调用。

 *```
widget = uiBinder.createAndBindUi(this);               // everything's bound

accordionLayoutContainer.setActiveWidget(firstPanel);  // OK, expands first pane
accordionLayoutContainer.addAttachHandler(new AttachEvent.Handler() {

  @Override
  public void onAttachOrDetach(AttachEvent event) {
    clientsTree.getSelectionModel().select(mynode, true);
    clientsTree.setExpanded(mynode, true);              
  }
}); 
```*

# theory - 计算理论：为这种语言设计一个 2 栈的 PDA？

> ID：10615682
> 
> 赞同：0
> 
> 时间：2012-05-16T09:29:18.793
> 
> 标签：theory, computation

考虑一种语言 L2 = { ak bk ck | k >= 0 }。

（k 应该是上标）

为语言 L2 设计一个 2-stack PDA。

谁能给我一些关于如何去做的指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:39:34.933

尝试用 1-stack PDA 和语言解决这个问题`{ aⁿ bⁿ | n >= 0 }`- 这应该揭示如何`{ aⁿ bⁿ cⁿ| n >= 0 }`使用额外的堆栈来解决。

# asp.net - 我们可以将 xml 格式的文本传递给内部 xml 吗？

> ID：10615683
> 
> 赞同：0
> 
> 时间：2012-05-16T09:29:24.610
> 
> 标签：asp.net, xml

我想将 xml 格式的文本传递给内部 xml 文本。可能吗？

```
 XmlNode parentNode = myTemplate.CreateNode (XmlNodeType.Element, "Parent","myns");
 XmlNode childNode = myTemplate.CreateNode(XmlNodeType.Element, "head", "myns");
 childNode.InnerText = "<paragraph>sample text</paragraph>";
 parentNode.AppendChild(childNode); 
```

但我的 O/P 就像

```
<head>&lt;paragraph&gt;sample text&lt;/paragraph&gt;</head> 
```

所需的 O/P 是

```
<head><paragraph>sample text</paragraph></head> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:36:51.203

当您向 InnerText 写入内容时，它是 HTMLEncoded，这是必需的，否则 xml 解析器无法识别主 xml 和内部文本之间的区别。

看起来您想添加内部 xml 而不是 text，为此尝试使用 childNode.InnerXML 而不是 childNode.InnerText。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:37:44.920

如果您使用`InnerText`它将删除标记。`innerXml`取而代之的是用户。

```
childNode.InnerXml = "<paragraph>sample text</paragraph>"; 
```

# python - 使用 visa 与 GPIB 接口总是给我 VisaIOError

> ID：10615691
> 
> 赞同：2
> 
> 时间：2012-05-16T09:29:42.903
> 
> 标签：python, gpib, visa

我正在尝试`visa`在 Python 中导入并与之交互`GPIB`以控制设备。我使用的设备名称是`"GPIB0::9::INSTR"`，我认为这应该没有问题。

我在 2.7.3 Python Shell 中运行了以下代码

```
>>> from visa import *
>>> a = instrument("GPIB0::9", timeout = 20)
>>> a.write("*IDN?")
>>> print a.read()

Traceback (most recent call last):
  File "<pyshell#53>", line 1, in <module>
    print a.read()
  File "C:\Python27\lib\site-packages\pyvisa\visa.py", line 433, in read
    return self._strip_term_chars(self.read_raw())
  File "C:\Python27\lib\site-packages\pyvisa\visa.py", line 407, in read_raw
    chunk = vpp43.read(self.vi, self.chunk_size)
  File "C:\Python27\lib\site-packages\pyvisa\vpp43.py", line 840, in read
    visa_library().viRead(vi, buffer, count, byref(return_count))
  File "C:\Python27\lib\site-packages\pyvisa\vpp43.py", line 398, in check_status
    raise visa_exceptions.VisaIOError, status
VisaIOError: VI_ERROR_TMO: Timeout expired before operation completed. 
```

以上是系统给我的错误。实际上一开始，我设置`Timeout`为3，它显示了这个错误。但是我如上图将值改为20后，还是不行。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:04:43.307

有不同的问题可能导致超时。首先，您应该检查您的设备是否支持该`*IDN?`查询。它是一个 IEEE-488.2 标准命令，因此支持它的可能性很高（如果不检查您的手册以获取支持的命令）。

然后你应该检查你的通信设置，特别是终止字符和 EOI。

如果您使用了错误的终止字符，签证将继续阅读并最终超时。

**注意**：如果您使用可查询的命令（它是一个组合的写入和读取），您可以使用 pyvisa 的 ask 功能。

```
import visa

# If you've got just one gpib card installed, you can ommit the 0.
# ASsuming the EOI line should be asserted and a termination character
# of '\n'
instrument = visa.instrument('GPIB::9', term_chars='\n', send_end=True)
# use ask to write the command and read back the response
print instrument.ask('*IDN?') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T22:38:44.983

```
import visa

rm = visa.ResourceManager()
devices = rm.list_resources()
comm_channel = rm.open_resource(devices[0])     #assuming you only have 1 address to worry about

print(comm_channel.query("*IDN?")) 
```

这利用了 PYVisa 的模块和它提供的许多功能，用于连接/写入/读取 USB/GPIB 设备。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T01:45:57.733

对于每一个特定的仪器，它都有自己的命令来控制它们。请参阅设备的用户手册。

# ios - facebook用户登录手机的上限

> ID：10615692
> 
> 赞同：0
> 
> 时间：2012-05-16T09:29:44.100
> 
> 标签：ios, facebook, mobile

我正在努力解决客户提出的构建应用程序的请求，该应用程序允许用户在活动中登录他们的 Facebook 帐户并将照片发布到他们的墙上。

出现的担忧是 Facebook 可能不允许在一台设备上使用太多不同的用户。是否有任何关于应用程序在该用例下的行为方式的指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:26:49.197

看看[这个](https://stackoverflow.com/questions/6226950/facebook-ios-sdk-logout-question)

我不认为你正在做的事情是可能的，除非你建立自己的登录机制而不是使用 facebookSDK

# jquery - jQuery / CSS 问题

> ID：10615700
> 
> 赞同：0
> 
> 时间：2012-05-16T09:30:07.980
> 
> 标签：jquery, css, bxslider

所以我有这个代码：

```
 <script type="text/javascript">
    $(function(){
  $('.content_slider').bxSlider({
    pager: true,
    buildPager: function(slideIndex){
      switch (slideIndex){
        case 0:
          return '<a href=""><img src="images/bullet1.png" /></a>';
        case 1:
          return '<a href=""><img src="images/bullet1.png" /></a>';
        case 2:
          return '<a href=""><img src="images/bullet1.png" /></a>';
        case 3:
          return '<a href=""><img src="images/bullet1.png" /></a>';
      }
    }
  });
});
    </script> 
```

如何设置另一个 .png 图像以显示在“活动”幻灯片上？

例如，当您在幻灯片“nr.2”上从分页器到第二个 .png 图像时，它将是 bullet2.png 而不是 bullet1.png，因为它是在 switch 块中设置的。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:45:57.650

你的意思是这样吗？

```
'<a href=""><img src="images/bullet'+slideIndex+'.png" /></a>'; 
```

在这种情况下，您可以完全取消开关

# android - Android C2DM - 在 http post 中发送什么？

> ID：10615704
> 
> 赞同：1
> 
> 时间：2012-05-16T09:30:17.903
> 
> 标签：android, http, android-c2dm

根据 Lars Vogel 的指南和 android 开发者博客，我已经设置了客户端并获得了“token/registration_ID”...

But i want to test this before going onwards with the server part, so i was thinking of testing it with [Advanced Rest Client](https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo/details) which when choosing POST method looks like this: ![Advanced Rest 客户端的图像](../Images/78724487cb5fec37b3fbe64a0aa16870.png)

现在考虑到我需要发送的不同方面：registration_id、collapse_key、data.、delay_while_idle、授权：GoogleLogin auth=[AUTH_TOKEN]。

我如何编写这些以便它在标题/正文中正确发送它以及什么语法？我看到人们的服务器代码用 & 分隔事物，是这样完成的吗？

编辑：

像这样尝试，得到0作为响应...... ![在此处输入图像描述](../Images/ae5ce40528eb29f07641a203cf96e7df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:34:21.727

您可以发送二进制数据，即字节数组或超过 255 个字符限制的大数据。

请[在此处](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)访问 C2DM 示例。这是非常简单的一步一步的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:08:54.223

必须在 2 个请求中执行此操作，一个是获取身份验证密钥，第二个是发送消息... GCM 更容易

# java - 客户端/服务器应用程序连接重置 Java

> ID：10615705
> 
> 赞同：0
> 
> 时间：2012-05-16T09:30:24.797
> 
> 标签：java, networking, client

当我在运行服务器后运行客户端时，服务器会因错误连接重置而崩溃......这是我的代码：

启动客户端套接字并连接到服务器。等待输入。客户：

```
 private Socket socket;
private BufferedReader in;
private PrintWriter out;
private String fromServer,fromUser;

public ClientTest() {
    try {
        socket = new Socket("127.0.0.1", 25565);
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void start() {
    try {
        while ((fromServer = in.readLine()) != null) {
            System.out.println(fromServer);
            out.println("1");
        }
        System.out.println("CLOSING");
        out.close();
        in.close();
        socket.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static void main(String[] args) {
    new ClientTest();
} 
```

启动服务器套接字并向客户端发送“2”并启动对话

服务器：

```
 public ServerTest() {
    try {
        serverSocket = new ServerSocket(25565);
        clientSocket = serverSocket.accept();

    } 
    catch (IOException e) {
        System.out.println("Could not listen on port: 4444");
        System.exit(-1);
    }
    start();
}

public void start() {

    try {
        PrintWriter out;
        out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in;
        in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        String inputLine, outputLine;
        // initiate conversation with client
        out.println("2");
            while ((inputLine = in.readLine()) != null) {   
                System.out.println(inputLine);
                out.println("2");
            }
        System.out.println("Stopping");
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public static void main(String[] args) {
    new ServerTest();
} 
```

当我运行服务器时，一切都很好，但是当我运行客户端之后，服务器因连接重置错误而崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:11:20.433

ClientTest() 不调用 start() 方法。您的客户端在建立连接后立即退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:09:14.180

亚历克斯的回答是对的。

该程序也进入无限循环。您需要在客户端和服务器的while循环中添加退出条件。

# java - 如何使用 EJB2.0 连接到数据库

> ID：10615708
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:30:36.153
> 
> 标签：java, ejb

如何使用 EJB2.0 连接到数据库。我可以为此使用 JDBC。否则有哪些可用的替代选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:34:22.113

您应该能够通过诸如[Hibernate](http://www.hibernate.org/)之类的 ORM 连接到您的数据库。您还可以使用[JPA](http://www.oracle.com/technetwork/articles/javaee/jpa-137156.html)或[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/index.html)。

# vb.net - VB silverlight for windows phone“Handles 子句需要在包含类型或其基本类型之一中定义的 WithEvents 变量”

> ID：10615710
> 
> 赞同：1
> 
> 时间：2012-05-16T09:30:38.857
> 
> 标签：vb.net, silverlight, windows-phone-7

当我从 .xaml 文件中选择一个按钮，然后从右侧点击事件（为了设置点击事件）它会自动生成这个子：

```
Private Sub btn(ByRef sender As Object, e As System.Windows.RoutedEventArgs) Handles btn.Tap

End Sub 
```

但它也有这个错误：

> 错误 1 ​​Handles 子句需要在包含类型或其基类型之一中定义的 WithEvents 变量。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:39:27.060

`Public WithEvents btn As Button` 就在潜艇上方，以驱散虫子！

# eclipse - 有人可以解释 eclipse.p2.profile

> ID：10615712
> 
> 赞同：10
> 
> 时间：2012-05-16T09:30:41.610
> 
> 标签：eclipse, eclipse-rcp, p2

我正在组织一个 Eclipse RCP 的构建。

使用`p2-director`，一个属性是`profile`。Eclipse[文档](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)只说明了下面的解释，在我看来这不是很清楚。

> -profile：包含目标产品描述的配置文件ID。此 ID 由目标产品的 config.ini 中包含的 eclipse.p2.profile 属性定义。对于 Eclipse SDK，ID 是“SDKProfile”

所以我的问题是：

配置文件的用途是什么，它描述了什么以及如何确保我正确使用它？

有没有人有更好的解释或正确文档的链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:43:39.437

我不是专家，但我会尝试。它基本上包含使软件更新机制适用于您的应用程序所需的所有 p2 内容。您将需要使用 RCP 应用程序。它包含（除其他外）当前安装的工件列表。它允许您恢复到以前的安装状态。

您可以在任何 Eclipse 安装中找到此示例`p2//org.eclipse.equinox.p2.engine/profileRegistry`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-17T00:02:45.643

由于 P2 安装东西，它必须有一个安装状态的数据库。P2可以保持多种安装状态。P2 必须维护的每个数据库称为配置文件。使用标识符访问配置文件。运行时，P2 具有这些数据库的注册表。

`config.ini`当 P2作为 Eclipse RCP 的一部分启动时，它会收到两个属性： `eclipse.p2.data.area`- 物理存储其数据的位置 - 以及`eclipse.p2.profile`- 用于您正在运行的安装的安装状态的密钥。

# objective-c - 从 JSON 填充 NSMutableArray - 空 =o

> ID：10615714
> 
> 赞同：-2
> 
> 时间：2012-05-16T09:30:56.493
> 
> 标签：objective-c, ios, json, parsing

我有一个问题，我不明白发生了什么。它在一小时前工作，然后停止工作，我不明白为什么。：秒

您能否将此 JSON 添加到本地主机上的文件夹中并尝试这段代码。那你能告诉我你的 NSLOG 打印的东西是否比这更好：

```
2012-05-16 11:18:21.996 WonderBox[51241:fb03] JSON : (null)

NSString *urlString = [NSString stringWithFormat:@"http://localhost:8888/WonderBox/json.txt"];
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]; 
    NSError *err;
    NSMutableArray *json = (NSMutableArray* )[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&err];

    NSLog(@"JSON : %@", json); 
```

我的 JSON：

```
{
    "boxesDetail": [
        {
            "name": "NAME1",
            "number": "12",
            "sexe": "female",
            "topic": "Bien-Ãªtre",
                   },
        {
          "name": "NAME2",
            "number": "33",
             "sexe": "couple",
             "topic": "Bien-Ãªtre",
        },
         {
             "name": "NAME3",
            "number": "43",
             "sexe": "female",
             "topic": "Gastronomie",

        },
             {
          "name": "NAM  E4",
            "number": "33",
             "sexe": "couple",
             "topic": "Adventure",
        },
             {
          "name": "NAME5",
            "number": "102",
             "sexe": "group",
             "topic": "Gastronomie",
        },
             {
          "name": "NAME6",
            "number": "40",
             "sexe": "male",
              "topic": "Sport",
        },
             {
          "name": "NAME7",
            "number": "12",
             "sexe": "male",
             "topic": "Sport",
        }

    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:37:42.890

您的 JSON 无效，请使用[http://jsonlint.com/](http://jsonlint.com/)

`topic`每个键的末尾不应该有逗号。

```
{
    "boxesDetail": [
        {
            "name": "NAME1",
            "number": "12",
            "sexe": "female",
            "topic": "Bien-Ãªtre" <-- there should be no comma here
        },
... 
```

# linux - 如何自定义 kwrite 来执行程序

> ID：10615719
> 
> 赞同：1
> 
> 时间：2012-05-16T09:31:04.307
> 
> 标签：linux, editor

kwrite 是 linux (PClinuxOS 2012) 中存在的文件编辑器我可以自定义 kwrite 以直接从 kwrite 直接执行 C 程序而不离开 kwrite 编辑器，并将错误写入指定的日志文件说 error.log，如果是的话我会从哪里得到参考资料。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:13:44.897

试试凯特吧。KWrite 现在只是 Kate 的简化版。

它具有您需要的功能。

# iphone - iOS zip 与 gzipDeflate

> ID：10615722
> 
> 赞同：0
> 
> 时间：2012-05-16T09:31:10.630
> 
> 标签：iphone, ios5, gzip

我正在使用 NSData+compression.h 和 Base64Transcoder.h 元素来压缩和解压缩内容。

基本上是解压缩服务器响应。

解压缩方法完美运行

```
+ (NSString *) unzip: (NSString*) stringValue{
    Byte inputData[[stringValue lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];
    [[stringValue dataUsingEncoding:NSUTF8StringEncoding] getBytes:inputData];
    size_t inputDataSize = (size_t)[stringValue length];
    size_t outputDataSize = EstimateBas64DecodedDataSize(inputDataSize);
    Byte outputData[outputDataSize];//prepare a Byte[] for the decoded data
    Base64DecodeData(inputData, inputDataSize, outputData, &outputDataSize);
    NSData *theData = [[NSData alloc] initWithBytes:outputData length:outputDataSize];

    //And now we gunzip:
    NSData* result = [theData gzipInflate];//make bigger==gunzip

    NSString *temp = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];

    return temp;
} 
```

但是当我尝试使用 simetric 方式压缩内容时，gzipDeflate 失败，并返回空值或 nil 值。

这是我的邮政编码

```
+ (NSData *) zip:(NSData *) theSourceData {
    // And now we zip:
    NSData *result = [theSourceData gzipDeflate];

    Byte inputData[[result length]];
    [result getBytes:inputData];
    size_t inputDataSize = (size_t)[result length];
    size_t outputDataSize = EstimateBas64DecodedDataSize(inputDataSize);
    char outputData[outputDataSize];//prepare a Byte[] for the decoded data
    Base64EncodeData(inputData, inputDataSize, outputData, &outputDataSize, NO);

    NSData *theData = [[NSData alloc] initWithBytes:outputData length:outputDataSize];

    return theData;
} 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:39:19.880

问题出在 Base64 编码器上。

```
+ (NSString *) zip:(NSData *) theSourceData {

    // And now we zip:
    NSData *result = [theSourceData gzipDeflate];
    NSString *source = [NSString base64StringFromData:result length:[result length]];

    return source;
} 
```

我们集成了 base64StringFromData:length: 方法来解决它。

谢谢，

伊万

# java - Java 将 oracle 时间戳解析为 date.util.date

> ID：10615723
> 
> 赞同：2
> 
> 时间：2012-05-16T09:31:12.927
> 
> 标签：java, oracle, date, timestamp

我想将 oracle 时间戳（`01-MAY-12 01.00.47.000000000 PM`）解析为`java.util.Date` 我使用了这个：

```
Date dateStart=new SimpleDateFormat("yy-MM-dd HH:mm:ss.S").parse("01-MAY-12 01.00.47.000000000 PM"); 
```

但我得到这个错误

> java.text.ParseException：无法解析的日期：“2012-5-1.13.0.47.0”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:35:50.173

你不应该解析任何东西。使用[ResultSet.getTimestamp()](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getTimestamp%28int%29)方法之一，您将[`java.sql.Timestamp`](https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html)直接拥有一个对象，它扩展了`java.util.Date`.

```
java.sql.Timestamp ts = myResultSet.getTimestamp( … ); 
```

这将具有跨数据库和语言环境的门户网站的额外优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:54:04.257

“yy-MM-dd”？

“12 年 5 月 1 日”

你的天数真的是“12”而你的年份真的是“01”吗？

你的错误怎么会显示“2012-5-1.13.0.47.0”，这可能是另一种格式的日期？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:33:43.077

如果您尝试使用 JDBC 访问它，那么就像@JB Nizet 建议的那样使用`getTimestamp()`，或者如果您只有 String 并且需要解析为 Date 然后按照以下方式进行操作

尝试以下格式

```
01-MAY-12 01.00.47.000000000 PM

yy-MMM-dd hh.mm.ss.SSSSSSSSSS a 
```

*   [工作演示](http://ideone.com/1Bwq0)

# cocoa - 为什么 AuthorizationExecuteWithPrivileges 不起作用

> ID：10615725
> 
> 赞同：1
> 
> 时间：2012-05-16T09:31:17.067
> 
> 标签：cocoa, authorization, root

为什么命令“AuthorizationExecuteWithPrivileges”可以与“/bin/mv”之类的命令一起正常工作，而不能与另一种“/usr/sbin/calendarserver_manage_principals”一起工作......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:03:48.387

如果问题是真实的用户 ID，您可以调用一个蹦床程序，它只是执行`setuid(0)`然后使用一个`exec`函数来运行`calendarserver_manage_principals`。你用`AuthorizationExecuteWithPrivileges()`.

# cocos2d-iphone - cocos2d中一个sprite的动作堆栈

> ID：10615729
> 
> 赞同：0
> 
> 时间：2012-05-16T09:31:32.850
> 
> 标签：cocos2d-iphone, stack, action

我有一个问题：我的游戏英雄可以跳跃（**CCJumpTo**）并向前和向后移动（**CCMoveTo**）。

我遇到了一个问题：如果游戏收到用户移动英雄的命令，但此时英雄正在跳跃（**CCJumpTo**），我该如何在跳跃结束后执行此命令。（我可以在 cocos2d 中对一个 sprite 使用一些操作堆栈吗）

我不能立即使用**[self.sprite stopAllActions];** 开始**CCMoveTo**因为英雄必须完成跳跃动作，如果我使用**CCMoveTo**动作**CCJumpTo**将不会完成。英雄不能跳跃并开始在高处前后移动。

对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:13:53.170

例如，您可以将您的操作堆栈存储在数组中，然后像这样运行操作

```
- (void) runNextAction
{
    id actionFromStack = [stack objectAtIndex: 0];
    [stack removeObjectAtIndex: 0];
    id callback = [CCCallFunc actionWithTarget: self selector: @selector(runNextAction)];
    id sequence = [CCSequence actionOne: actionFromStack two: callback];
    [self runAction: sequence];
} 
```

# c# - 如何使用实现 IExtenderProvider 的类？

> ID：10615731
> 
> 赞同：0
> 
> 时间：2012-05-16T09:31:36.023
> 
> 标签：c#, .net

我写了一个扩展器提供程序。我在解决方案资源管理器的文件中有该类（标有组件图标）。

现在，我怎样才能“安装”、“放置”它在表单上……以便表单上所有可以从我的类扩展其属性的组件都可以检索它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:39:40.610

将其从工具箱顶部拖放到表单上。

如果你没有看到它，那么你可能有一个设置错误。工具 + 选项，Windows 窗体设计器，常规。确保 AutoToolboxPopulate 属性为其默认值 True。

# sql - 在 SQL 中存储联系信息时的最佳实践，我应该加密吗？

> ID：10615735
> 
> 赞同：2
> 
> 时间：2012-05-16T09:31:44.633
> 
> 标签：sql, sql-server, database, encryption

我只是想知道当我将用户联系信息存储在数据库中时是否应该加密它？

例如电子邮件、电话号码等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:46:46.207

通常您只加密敏感信息，这取决于您的项目要求。如果用户电子邮件或电话号码很敏感，请对其进行加密。另一方面，由于您需要从数据库中获取联系人信息，因此您将使用对称加密，并且很容易解密，因此您在这种情况下的“安全性”只是非法数据，并且不够强大。

无论如何，您应该始终对密码等敏感数据进行加密，我建议使用哈希进行非对称加密。

在我的项目中，我从不需要加密任何联系信息，只有密码在数据库中被加密。如果您正在实施 Web 应用程序，我建议您使用安全令牌（基于声明的安全性）并在网络上旅行时对所有联系信息进行加密（通过使用消息或传输安全性），因此泄露任何联系人的风险非常低信息给第三方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:39:27.910

我要解决更广泛的问题：我应该加密吗？

在我非常拙见的意见中，如果信息以任何方式与一个人的身份相关联并且可以公开访问您的网站或网络，那么答案是肯定的。我将忽略索引和搜索加密信息的技术复杂性，只给你以下思考：

1.  身份和信用卡窃贼，不太可能从一个来源获取您的所有信息。
2.  Information they are likely to pursue in pieces are broad. Name, address, phone, CC number and expiration date, etc...
3.  Once a person possesses fragmented records, all that information can be used in an attempt to associated one fragmented record with another. IE, John Smith in Garland, TX is likely to be J Smith at 1111 Some Dr, Garland, TX.
4.  Once successfully associated, fragmented records from YOUR data combined with fragmented records from MY data become a complete record, then OUR customer's life is a wreck.

This is a very simplified path, and lots of information is public record so in one sense protecting it is a moot point. However, if you are slapped with a lawsuit, and it DOES happen, that may be of little comfort when you're coughing up $500 a hour to your attorney.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:57:31.587

*仅当您希望*自己的安全受到损害或知道不值得信任的人将直接访问您的数据库时，加密联系信息才有意义。

单向加密（散列）将使您的数据无用，因为无法检索它，因此您必须使用某种形式的可逆加密。

加密数据库中的联系信息有几个缺点，最明显的是：

*   加密不是免费的，处理数据需要时间
*   您无法根据部分数据（如部分联系人姓名）搜索加密数据

请注意，可逆加密的弱点在于解密所需的密钥。不要将其存储在同一个数据库中。

使用传输层安全性（如 SSL）更有意义。

# android - AChartEngine 添加第二个系列

> ID：10615740
> 
> 赞同：0
> 
> 时间：2012-05-16T09:31:56.553
> 
> 标签：android, achartengine

我在 AChartEngine 中有一个简单的 TimeChart，一切正常，但我不知道如何添加第二个系列。ANR 结束了我的每一次尝试。您对如何添加另一个系列有任何想法吗？这是我的代码：

编辑：我更改了代码，我尝试添加第二行但我有 ANR：

```
public class TestgrafActivity extends Activity {
private XYMultipleSeriesDataset mDataset;
private XYMultipleSeriesRenderer mRenderer;
List<double[]> values = new ArrayList<double[]>();
private GraphicalView mChartView;
private TimeSeries time_series,time_series2;

private LinearLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    layout = (LinearLayout) findViewById(R.id.chart);

    time_series = new TimeSeries("Temperature");
    for (int i = 0; i < 50; i++){
        long value = new Date().getTime();
        time_series.add(new Date(value+(i*1000)), new Random().nextInt(25));

    } 

    time_series2 = new TimeSeries("Temperature2");
    for (int i = 0; i < 50; i++){
        long value = new Date().getTime();
        time_series2.add(new Date(value+(i*1000)), new Random().nextInt(40));

    } 

    mDataset = new XYMultipleSeriesDataset();
    mDataset.addSeries(time_series);
    mDataset.addSeries(time_series2);

    XYSeriesRenderer r = new XYSeriesRenderer();
    r.setColor(Color.GREEN);
    r.setPointStyle(PointStyle.CIRCLE);
    r.setFillPoints(true);
    r.setLineWidth(3);
    r.setDisplayChartValues(true);

    XYSeriesRenderer r2 = new XYSeriesRenderer();
    r2.setColor(Color.RED);
    r2.setPointStyle(PointStyle.CIRCLE);
    r2.setFillPoints(true);
    r2.setLineWidth(3);
    r2.setDisplayChartValues(true);

    mRenderer = new XYMultipleSeriesRenderer();
    mRenderer.addSeriesRenderer(r);
    mRenderer.addSeriesRenderer(r2);

    mRenderer.setAxisTitleTextSize(16);
    mRenderer.setChartTitleTextSize(20);
    mRenderer.setLabelsTextSize(15);
    mRenderer.setLegendTextSize(15);
    mRenderer.setPointSize(3f);
    mRenderer.setPanEnabled(true, true);
    mRenderer.setZoomEnabled(true, true);

    mRenderer.addSeriesRenderer(r2);
    mRenderer.setClickEnabled(true);
    mRenderer.setSelectableBuffer(20);
    mRenderer.setPanEnabled(true);       
    mRenderer.setChartTitle("Temperature");
    mRenderer.setXTitle("Time");
    mRenderer.setYTitle("Degrees C");
    mRenderer.setZoomButtonsVisible(true);
    mRenderer.setZoomEnabled(true);
    mRenderer.setXLabels(12);
    mRenderer.setYLabels(10);
    mRenderer.setShowGrid(true);
    mRenderer.setXLabelsAlign(Align.RIGHT);
    mRenderer.setYLabelsAlign(Align.RIGHT);

    mChartView = ChartFactory.getTimeChartView(this, mDataset, mRenderer,
            "HH:mm:ss");

    layout.addView(mChartView);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:21:10.783

此代码中只有一个系列。您尝试添加另一个系列的代码在哪里？

一般的做法是这样的：

```
mDataset.addSeries(0, time_series);
mRenderer.addSeriesRenderer(0, time_renderer);
//...
//...
mDataset.addSeries(1, some_other_series);
mRenderer.addSeriesRenderer(1, some_other_renderer);
//...
//... 
```

# xcode - 如何在 Xcode 4 中定义非标准文件对应项？

> ID：10615743
> 
> 赞同：4
> 
> 时间：2012-05-16T09:32:02.087
> 
> 标签：xcode, ide, header, header-files

我有一些结构（类似）的文件：

```
MONLibrary/file.h
MONLibrary/file.support.h 
```

我希望 Xcode 将这些文件识别为彼此的对应文件，就像`file.h`并且`file.c`是公认的对应文件。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:29:02.320

这不完全是你所追求的（我想知道是否也有答案......），但重命名`file.support.h`会`file.support`导致它被识别为对应物。

默认情况下，它不会被视为 Obj-C 头文件 w/r/t 语法突出显示/构建规则，但您可以使用文件检查器 (⌘-opt-1) 轻松覆盖它。

# parsing - 将上下文无关文法转换为 LL(1) 文法

> ID：10615746
> 
> 赞同：2
> 
> 时间：2012-05-16T09:32:14.987
> 
> 标签：parsing, compiler-construction, grammar

首先，我检查了类似的问题，但没有一个包含我所寻求的信息。

我想知道，给定上下文无关的语法，是否有可能：

*   知道是否存在等效的 LL(1) 语法。等效于它应该生成相同的语言。
*   将上下文无关文法转换为等效的 LL(1) 文法，前提是它存在。如果存在等效的 LL(1) 语法，则转换应该成功。如果不存在等价物，它不终止也没关系。

如果这些问题的答案是肯定的，那么这些算法或工具是否在某处可用？我自己的研究没有结果。

[另一个答案](https://stackoverflow.com/questions/2963689/convert-the-context-free-grammar-to-ll1-grammar)提到 Dragon Book 有一种算法可以消除左递归并留下上下文无关语法。我可以访问这本书并检查了它，但我不清楚语法是否保证为 LL(1)。对上下文无关语法（没有空产生和没有循环）施加的限制对我来说是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:38:39.397

从我参加的大学编译器课程中，我记得 LL(1) 语法是上下文无关语法，但上下文无关语法比 LL(1) 大得多。没有通用算法（意味着不是 NP 难）来检查和从上下文无关（可以转换为 LL(1)）转换为 LL(1)。

当您想要集成一个函数时，应用诸如移除左递归、移除首尾冲突、左因子分解等技巧的袋子类似于数学变换......您需要的经验有时非常接近一门艺术。这些变换通常是彼此相反的。

LR 类型文法现在大量用于生成的解析器的一个原因是，它们比 LL(1) 涵盖了更广泛的上下文无关文法。

顺便提一句。例如，C 语法可以表示为 LL(1)，但 C# 不能（例如`x -> x + 1`想到 lambda 函数，您无法确定您看到的是 lambda 参数还是已知变量）。

# excel-2003 - 以 .csv 格式保留“0”

> ID：10615748
> 
> 赞同：0
> 
> 时间：2012-05-16T09:32:20.563
> 
> 标签：excel-2003, export-to-csv

我已将 .xls 文件转换为 .csv 格式。我通过打开 Excel 并保存为 csv 格式来完成此操作。.xls 文件具有“00116”、“0860371”等值。但是一旦转换为 .csv，它就不会保留“0”并且值类似于“116”、“860371”等。

我已将格式更改为“文本”并尝试过..但它没有保留“0”

如何解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:47:59.850

当您在 excel 中打开 csv 文件时，它会修剪前面的所有零。更好地在其他文本编辑器中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:27:08.597

我无法复制这个问题。

在 Excel 2003 中，我`'00116`在单元格 A1 和`'0860371`单元格 B1 中输入。

我转到“另存为”对话框并选择“CSV”作为类型。当我点击“保存”时，它要求我确认。我单击**是**。我关闭 Excel 并在询问我是否要将更改保存到 CSV 文件时单击**“否”。**

我浏览到保存的 CSV，右键单击并选择**编辑**（在记事本中打开文件）。文件内容为：

`00116,0860371`

为了在 Excel 中打开这个文件而不丢失前导零，我：

*   再次启动 Excel 并转到数据 » 导入外部数据 » 导入数据。
*   浏览到文件并单击**打开**。
*   在导入对话框的第 1 步中，选择“定界”并单击“下一步”。
*   在第 2 步中，选择“逗号”作为分隔符，然后单击下一步。
*   在第 3 步中，我将两列都设置为**Text**，然后单击 Finish。

单击“确定”并导入两个值，前导零不变。前导撇号被删除。

# html - JS 小提琴和 Dreamweaver

> ID：10615749
> 
> 赞同：0
> 
> 时间：2012-05-16T09:32:23.750
> 
> 标签：html

[http://jsfiddle.net/amosrivera/AYWku/](http://jsfiddle.net/amosrivera/AYWku/)

每当我尝试在 Dreamweaver 中实现这个特定的 JS Fiddle 时，按钮上的滑动功能根本不起作用。我已经在 HTML 文档中的 javascript 代码周围放置了“脚本”等，但仍然无济于事。使用 JS fiddle 的任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:37:53.113

使用 Chrome 测试并按 F12 以查看控制台。如果它说“$ 不是函数”左右，你可能没有包含 jQuery 库。请参阅此处（[http://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)）如何做到这一点。

或者，您可以在 Firefox 中使用插件“Firebug”

# c# - 如何在 Windows 窗体中以编程方式获取用户姓名缩写

> ID：10615750
> 
> 赞同：0
> 
> 时间：2012-05-16T09:32:23.750
> 
> 标签：c#, winforms, visual-studio-2010

我能够得到这个文件夹：

```
C:\Users\XXX\Documents 
```

从我的代码中：

```
string myDocuments = 
                Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments); 
```

我需要获取用户`(XXX)`名，有没有很好的获取方式，比如`MyDocuments`？

如果是这样，我更喜欢这种干净的方式，而不是从我的文件夹路径中选择用户名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:34:21.240

您可以签出[UserName](http://msdn.microsoft.com/en-us/library/system.environment.username.aspx)属性：

```
string username = Environment.UserName; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:35:42.947

用于`Environment.UserName`获取当前登录到 Windows 操作系统的人员的用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:43:55.387

Office 应用程序询问和存储首字母缩写，但不是 Windows 因此，与其他帖子一样，使用 Environment.UserName

然后，使用此扩展方法检索首字母（每个单词的首字母）

```
/// <summary>
/// Remove any special character and return the first letters of all words
/// </summary>
/// <param name="str">String to retrieve the initials from</param>
/// <returns></returns>
public static string GetInitials(this string str)
{
    if (string.IsNullOrEmpty(str))
        return str;

    var space = ' ';
    var previousWasSpace = true;
    var buffer = new char[str.Length];
    var index = 0;
    foreach (char c in str)
    {
        if (c == space)
        {
            previousWasSpace = true;
        }
        else if (previousWasSpace && char.IsLetterOrDigit(c))
        {
            previousWasSpace = false;
            buffer[index] = c;
            index++;
        }
    }

    return new string(buffer, 0, index);
} 
```

此方法较旧，可能会进行优化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T01:49:57.400

这是从用户名获取首字母的另一种方法（在此示例中按空格或句点分隔）：

```
foreach (string s in Environment.UserName.Split(" .".ToCharArray()))
    userInitials += s.Substring(0,1).ToUpper(); 
```

# android - 在android中实现进度条

> ID：10615752
> 
> 赞同：0
> 
> 时间：2012-05-16T09:32:27.630
> 
> 标签：android, file, progress-bar

我正在开发一个文件加密和解密应用程序，并向用户显示文件加密和解密的一点进度条。我需要实现一个进度条。我怎么做 ？对于下面的代码。

```
 public void main(String[] args) throws Exception
      {

         // File to decrypt.
      filename = "/file.enc";

      String password = "codecodecode";

      inFile = new FileInputStream(new File(Environment.getExternalStorageDirectory()+ filename));
      outFile = new FileOutputStream(new File(Environment.getExternalStorageDirectory()+ filename + ".txt"));

      PBEKeySpec keySpec = new PBEKeySpec(password.toCharArray());
      SecretKeyFactory keyFactory =
          SecretKeyFactory.getInstance("PBEWithMD5AndDES");
      SecretKey passwordKey = keyFactory.generateSecret(keySpec);

      // Read in the previouly stored salt and set the iteration count.

      byte[] salt = new byte[8];
      inFile.read(salt);
      int iterations = 100;

      PBEParameterSpec parameterSpec = new PBEParameterSpec(salt, iterations);

      // Create the cipher and initialize it for decryption.

      Cipher cipher = Cipher.getInstance("PBEWithMD5AndDES");
      cipher.init(Cipher.DECRYPT_MODE, passwordKey, parameterSpec);

      byte[] input = new byte[64];
      int bytesRead;
      while ((bytesRead = inFile.read(input)) != -1)
      {
         byte[] output = cipher.update(input, 0, bytesRead);
         if (output != null)
            outFile.write(output);
      }

      byte[] output = cipher.doFinal();
      if (output != null)
         outFile.write(output);

      inFile.close();
      outFile.flush();
      outFile.close();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:37:20.377

查看进度条教程：[https ://developer.android.com/guide/topics/ui/dialogs.html#ShowingAProgressBar](https://developer.android.com/guide/topics/ui/dialogs.html#ShowingAProgressBar)

还有“带有第二个线程的示例 ProgressDialog” - 很高兴检查。

还可以考虑`AsyncTask`用于此类事情，它内置支持在 UI 线程上发布进度更新事件。

# java - java SVD JAMA 错误结果

> ID：10615757
> 
> 赞同：0
> 
> 时间：2012-05-16T09:32:34.340
> 
> 标签：java, jama

我有这个数组

```
double a[][] = {{1,1,1}, {0,1,1} , { 1,0,0}
        ,{0,1,0},{1,0,0},{1,0,1},{1,1,1},{1,1,1},{1,0,1},{0,2,0},{0,1,1}}; 
```

我想获得 SVD（奇异值解压缩），这是代码

```
Matrix A = new Matrix(a);
        SingularValueDecomposition s = A.svd();
        Matrix U = s.getU();
        Matrix S = s.getS();
        Matrix V = s.getV();

        Matrix K = U.times(S.times(V.inverse()));
        System.out.println("A=\n" + A);
        System.out.println("U=\n" + U);
        System.out.println("S=\n" + S);
        System.out.println("V=\n" + V);
        System.out.println("K=\n" + K); 
```

我使用了 JAMA 库，我得到了这些结果

```
U=
0.42012156898152025   -0.07479925424066838   -0.04597243910578701   
0.29948675880470416   0.20009225506128975   0.4078276625537902   
0.12063481017681585   -0.27489150930195816   -0.4538001016595771   
0.15756100229407313   0.3046476172068067   -0.2006466962808193   
0.12063481017681585   -0.27489150930195816   -0.4538001016595771   
0.2625605666874469   -0.379446871447475   0.15467425717503247   
0.42012156898152014   -0.0747992542406683   -0.04597243910578692   
0.42012156898152014   -0.0747992542406683   -0.04597243910578692   
0.2625605666874469   -0.379446871447475   0.15467425717503247   
0.31512200458814627   0.6092952344136134   -0.4012933925616386   
0.29948675880470416   0.20009225506128975   0.4078276625537902   

S=
4.098871971532176   0.0   0.0   
0.0   2.361570801317849   0.0   
0.0   0.0   1.2736686819384786   

V=
0.49446664222485476   -0.6491757618976977   -0.5779909773443018   
0.6458223761096932   0.7194469174866516   -0.2555574131873014   
0.581735505399926   -0.24691489036406603   0.7749947346102383 
```

但是V错了，应该是这样的

V = -0.49446664222485476 0.6491757618976977 -0.5779909773443018
-0.6458223761096932 0.7194469174866516 -0.2555574131873014
-0.581735505399926 0.24691489036406603 0.7749947346102383

真的这是一个拥抱错误，因为在multibluein USV之后我得到了这个matirx，看看E-16

```
K=
1.0000000000000013   1.0000000000000004   1.000000000000001   
4.996003610813204E-16   1.0   0.9999999999999998   
1.0000000000000002   -3.885780586188048E-16   8.881784197001252E-16   
-1.1102230246251565E-16   1.0000000000000002   1.3877787807814457E-16   
1.0000000000000002   -3.885780586188048E-16   8.881784197001252E-16   
1.0000000000000004   -5.551115123125783E-16   1.0000000000000004   
1.0000000000000009   1.0000000000000002   1.0000000000000007   
1.0000000000000009   1.0000000000000002   1.0000000000000007   
1.0000000000000004   -5.551115123125783E-16   1.0000000000000004   
-2.220446049250313E-16   2.0000000000000004   2.7755575615628914E-16   
4.996003610813204E-16   1.0   0.9999999999999998 
```

请帮帮我，我该怎么办，哪里错了，JAMA错了吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:53:21.193

结果看起来是正确的。在矩阵 K 中，像 1.0000000000000013 和 4.996003610813204E-16 这样的值分别[非常接近] 1 和 0。这里发生了浮点错误，这就是数字略有偏差的原因。Matlab 做同样的事情。

# php - PHP批量插入foreach

> ID：10615762
> 
> 赞同：4
> 
> 时间：2012-05-16T09:32:47.123
> 
> 标签：php, mysql

我有一个 curl 脚本，它从远程源读取数据。以下是当前代码：

```
function download_page($path){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$path);
    curl_setopt($ch, CURLOPT_FAILONERROR,1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 15);
    $retValue = curl_exec($ch);                      
    curl_close($ch);
    return $retValue;
}
$sXML = download_page('http://remotepage.php&function=getItems&count=100&page=1');
$oXML = new SimpleXMLElement($sXML);
foreach($oXML->results->item->item as $oEntry){
    $insert_query = mysql_query("INSERT INTO tbl_item (first_name, last_name, date_added) VALUES ('" . $oEntry->firstname . "', '" . $oEntry->lastname . "', '" . date("Y-m-d H:i:s") . "')");
} 
```

但是，该脚本的插入速度非常慢，正如我想象的那样，因为它写入了每个单独的记录。count 变量是为每个页面返回的记录数，而 page 变量是一个简单的页面计数器。

我想知道是否有办法执行批量插入语句来一次插入所有 100 条记录。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:36:07.897

您可以通过执行以下操作在一个语句中执行此操作：

```
$sXML = download_page('http://remotepage.php&function=getItems&count=100&page=1');
$oXML = new SimpleXMLElement($sXML);
$query = "INSERT INTO tbl_item (first_name, last_name, date_added) VALUES";
foreach($oXML->results->item->item as $oEntry){
    $query .=  "('" . $oEntry->firstname . "', '" . $oEntry->lastname . "', '" . date("Y-m-d H:i:s") . "'),";
}
mysql_query($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:40:02.690

也许是这样的？

```
foreach($oXML->results->item->item as $oEntry){
  $inserts[] = "(". implode(', ', array ($oEntry->firstname, $oEntry->lastname, date("Y-m-d H:i:s") ) ) .")";
}
$insert_query = mysql_query("INSERT INTO tbl_item (first_name, last_name, date_added) VALUES ".implode(', ', $inserts)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:44:26.853

您可以一次插入所有记录，如下所示： 就像我们从 mysql 表中导出数据一样。

```
INSERT INTO tablename (id, field2, field3, field3) VALUES ('', 5454, '454', '545'), ('', 'erwe', 'rewrew', 'werew'), ('', 'ewrew', 'rwerwe', 'werwer'), ('', 'jkj', 'ere', 'uju') , ('', '343', '3434', 'dfdf'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:49:35.287

要批量插入操作，您可以将脚本附加到变量中，并且可以整体运行，但为此您必须使用`mysqli_multi_query`. 检查此链接[http://www.php.net/manual/en/mysqli.multi-query.php](http://www.php.net/manual/en/mysqli.multi-query.php)

# dojo - 保存 dojo 数据网格的更新值

> ID：10615765
> 
> 赞同：0
> 
> 时间：2012-05-16T09:33:10.113
> 
> 标签：dojo, dojox.grid.datagrid

谁能告诉我如何将我的 dojo 数据网格连接到“onApplyCellEdit”事件以及如何使用网格中的更新值更新 dojo 存储。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:35:57.170

如果您使用的是实现 dojo.data.api.Write 的商店（如 ItemFileWriteStore 等），那么一旦连接到数据网格，您的商店将默认处理此问题。

当您完成编辑（或在 cell.onblur 等上进行）后，通过调用来检查是否对存储进行了任何更改`store.isDirty()`。如果它返回 true，则新的、修改的或删除的项目与服务器不同步。

要同步，请查看 api.Write 并查看每个商店都有一个调用`.save()`- 您必须实现哪个 ofc（除非您使用带有 PUT/DELETE/POST 模式的 REST）

# c# - 使用命名空间时如何使用 C# 处理特定的 XML 元素？

> ID：10615771
> 
> 赞同：0
> 
> 时间：2012-05-16T09:33:25.713
> 
> 标签：c#, xml, namespaces

我必须通过 C# 将 XML 文档导入 SQL-DB。XML 有几个名称空间。

我试图解决我希望通过 XPath 导入的特定元素，但由于命名空间而中断。代替

```
XmlDocument doc = new XmlDocument();
doc = XDocument.Load(Filename);
GENERATOR_INFO = doc.SelectSingleNode("ORDER/ORDER_HEADER/ORDER_INFO/GENERATOR_INFO").InnerText; 
```

我写这样的东西：

```
XmlDocument doc = new XmlDocument();
doc = XDocument.Load(Filename);
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("openTrans", "http://www.opentrans.org/XMLSchema/2.1");
GENERATOR_INFO = doc.SelectSingleNode("//openTrans:GENERATOR_INFO", nsmgr).InnerText; 
```

从而缩短了我需要值的元素的“路径”。

我的问题是：我怎样才能直接解决一个元素？在 XMl 中有两个称为“ORDER_ID”的元素：

```
ORDER/ORDER_HEADER/ORDER_INFO/ORDER_ID 
```

和

```
ORDER/ORDER_HEADER/CUSTOMER_ORDER_REFERENCE/ORDER_INFO 
```

当使用上面的语法时，我只得到一个元素，使用循环/Linq 我得到两个值，但不知道哪个是哪个。尽管有命名空间，是否有一个选项可以通过唯一的 XPath 来处理元素？

问候

延斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-31T14:09:58.237

找到了 :) 我必须引用 XPath 的每个“步骤”： ORDER_ID = doc.SelectSingleNode("//openTrans:ORDER_INFO/openTrans:ORDER‌​_ID", nsmgr).InnerText; 分别 VIND_ORDER_ID = COR.SelectSingleNode("//openTrans:CUSTOMER_ORDER_REFERENCE/o‌​penTrans:ORDER_ID", nsmgr).InnerText

# c# - 单元测试异常处理

> ID：10615772
> 
> 赞同：2
> 
> 时间：2012-05-16T09:33:27.293
> 
> 标签：c#, unit-testing

这里看似简单的一个。如何使用单元测试测试此代码块的异常处理？

```
 public DbFactoryResponseType Close()
    {
        DbFactoryResponseType dbFactoryResponse = new DbFactoryResponseType();
        try
        {
            if (m_isConnected)
            {
                m_isConnected = false;

                if (m_hasRecordSet)
                {
                    m_hasRecordSet = false;

                    m_dbFactoryDatabaseDataReader.Close();
                    m_dbFactoryDatabaseDataReader.Dispose();
                }

                m_dbFactoryDatabaseCommand.Dispose();
                m_dbFactoryDatabaseConnection.Close();
                m_dbFactoryDatabaseConnection.Dispose();

            }

            dbFactoryResponse.ExceptionMessage = "";
            dbFactoryResponse.Success = true;
            dbFactoryResponse.UserFriendlyMessage = "OK";

            return dbFactoryResponse;
        }
        catch (Exception ex)
        {
            dbFactoryResponse.ExceptionMessage = ex.Message;
            dbFactoryResponse.Success = false;
            dbFactoryResponse.UserFriendlyMessage = "Error: Error while attempting to close the database connection.";

            return dbFactoryResponse;
        }
    } 
```

这是我到目前为止所拥有的，但我不知道如何让异常触发以允许我测试输出。

```
 /// <summary>
    /// Test method to test closing a PosgreSQL database connection.
    /// </summary>
    [TestMethod]
    public void TestClosePostgreSQLConnectionException()
    {
        const string connectionString = "Server=myIp;Port=myPort;Database=myDatabase;User Id=myUser;Password=myPassword;";

        const string provider = "Npgsql";

        DbProviderFactoryConnection aDbProviderFactoryConnection = new DbProviderFactoryConnection(connectionString, provider);

        DbFactoryResponseType dbFactoryResponseType = aDbProviderFactoryConnection.Close();

        Assert.IsNotNull(dbFactoryResponseType);

        Assert.AreEqual(false, dbFactoryResponseType.Success);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:36:44.997

您可以创建一个模拟版本`IDbFactoryDatabaseConnection`（这是您需要引入的接口），然后在模拟的设置中，在调用模拟时抛出异常`Close()`，然后在您的测试检查中抛出异常`ExceptionMessage`，`Success`然后`UserFriendlyMessage`.

这样做的方法是使用像 Rhino Mocks 或 MoQ 这样的模拟框架，或者您甚至可以创建自己的模拟或存根。然后，您将在测试中将类的模拟版本注入到您的类构造函数中（假设您使用的是构造函数注入而不是 setter 注入），然后您将能够控制模拟的行为。

下面是一个使用 MoQ 的示例，说明您将如何执行此操作：

```
Mock<IDbFactoryDatabaseConnection> connectionMock = new Mock<IDbFactoryDatabaseConnection>();

DbProviderFactoryConnection aDbProviderFactoryConnection = new DbProviderFactoryConnection(connectionString, provider, connectionMock.Object);

connectionMock.Setup(c => c.Close()).Throws<Exception>();

DbFactoryResponseType dbFactoryResponseType = aDbProviderFactoryConnection.Close(); 
```

当然，根据行业最佳实践，这也意味着您必须遵守 SOLID 原则，特别是 Dependency Inversion 原则，这意味着您将需要为 DbFactoryDatabaseConnection 类创建一个接口（我假设这是您的名称类），这就是我在上面的例子中展示的。

# select - SqlDataAdapter Fill 方法跳转执行

> ID：10615775
> 
> 赞同：0
> 
> 时间：2012-05-16T09:33:33.687
> 
> 标签：select, view, dataset, fill, sqldataadapter

我有一个在表单加载时调用的函数，
它应该从视图中检索一些数据并填充数据集
，但是当它到达**da.Fill(ds);** 行，它下面的所有代码（包括它自己）都被笨拙地跳转
然后表单加载并且我的函数变得无用
下面是我的函数的主体

```
SqlConnection conn = create_conn();
conn.Open();
SqlCommand cmd = new SqlCommand("View1", conn);
cmd.CommandType = System.Data.CommandType.StoredProcedure;
cmd.Parameters.Add("keyfield", System.Data.SqlDbType.Char).Value = keyfieldval;
SqlDataAdapter da = new SqlDataAdapter();
da.SelectCommand = cmd;
DataSet ds = new DataSet();
da.Fill(ds); // <--- THIS IS THE LINE
Form1.field1 = ds.Tables[0].Rows[0]["field1"].ToString();
Form1.field2 = ds.Tables[0].Rows[0]["field2"].ToString();
conn.Close(); 
```

# objective-c - 未找到子 UIView 中的翻转动画

> ID：10615787
> 
> 赞同：0
> 
> 时间：2012-05-16T09:34:14.200
> 
> 标签：objective-c, ios5, uiview, flip, modal-view

我想在我的子视图中翻转运动。在下一个方法中更改我的子视图但没有翻转动画....

```
 int tag=g.view.tag;
    UIViewController* vc2 = [controlersOfTableBoxes objectAtIndex:tag-1];

    UIView* viewOfSelf = self.view;
    UIViewController* v = [[UIViewController alloc] init];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:v.view cache:NO];

    int maxGraphs = [[viewOfSelf subviews] count];

    for (int i = 0; i < maxGraphs; i++ ) 
    {
        if([[[viewOfSelf subviews] objectAtIndex:i]  isKindOfClass:[UIView class]])
        {
            UIView* v = [[viewOfSelf subviews] objectAtIndex:i];
            if(v.tag==tag)
            {
                 [[[viewOfSelf subviews] objectAtIndex:i] removeFromSuperview];
               break;   
            }
        }
    }
    [viewOfSelf addSubview:vc2.view];
    v.view = viewOfSelf;

    [UIView commitAnimations]; 
```

如果我更改此行：

```
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:v.view cache:NO]; 
```

为了

```
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:NO]; 
```

运动在所有屏幕中，但我只想在子视图控制器的子视图中。

我尝试这种方法：

```
 [UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationTransitionFlipFromRight animations:^(void) 
     { 
         int tag=g.view.tag;
         UIViewController* vc2 = [controlersOfTableBoxes objectAtIndex:tag-1];

         UIView* viewOfSelf = self.view;
         UIViewController* v = [[UIViewController alloc] init];
         int maxGraphs = [[viewOfSelf subviews] count];

         for (int i = 0; i < maxGraphs; i++ ) 
         {
             if([[[viewOfSelf subviews] objectAtIndex:i]  isKindOfClass:[UIView class]])
             {
                 UIView* view = [[viewOfSelf subviews] objectAtIndex:i];
                 if(view.tag==tag)
                 {
                     v.view=view;
                     [[[viewOfSelf subviews] objectAtIndex:i] removeFromSuperview];
                     break;   
                 }
             }
         }
         [viewOfSelf addSubview:vc2.view];
         v.view = viewOfSelf;
     } 
     completion:^(BOOL finished) 
     {}]; 
```

但结果是一样的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:38:19.747

您可以使用

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:5];
[UIView transitionFromView:view2 toView:view1 duration:3 options:UIViewAnimationOptionTransitionFlipFromBottom completion:NULL];
[UIView commitAnimations]; 
```

试试我

```
nt tag=g.view.tag;
 UIViewController* v = [controlersOfBoxes objectAtIndex:tag-1];
 UIViewController* vc2 = [controlersOfTableBoxes objectAtIndex:tag-1];
 [UIView transitionWithView:vc2.view duration:0.5 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^ { [v.view removeFromSuperview]; [self.view addSubview:vc2.view]; } completion:nil]; 
```

# windows-installer - 如何在卸载时检索 MSI 属性的值？

> ID：10615792
> 
> 赞同：2
> 
> 时间：2012-05-16T09:34:27.603
> 
> 标签：windows-installer, installshield, installshield-2009

我有一个应用程序的安装程序，我在其中使用了一些自定义操作。在安装时，我一直在使用一些自定义 MSI 属性，如 DBHOST 等来确定数据库主机。

它的默认值是 localhost。

但我一直在安装时通过命令行将此 DBHOST 属性设置为其他值（如 192.168.1.3）。并且安装与通过命令行设置的属性正常工作。

但是当我使用

```
 MsiGetProperty 
```

在必须在卸载期间执行的自定义功能中，我得到了默认值（localhost），而不是我在安装时通过命令行设置的值（192.168.1.3）

任何人都可以帮助我吗？为什么会这样。？卸载时是否需要做任何其他事情才能获得相同的 MSI 属性值？

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:48:59.227

属性值不是持久的，这意味着在卸载时它不会记住它在安装期间的最后一个值，它将使用其默认值。最好和更简单的解决方案是将此值写入注册表项，并在卸载期间使用注册表搜索检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:26:38.527

由于您提到 DBHOST，如果您使用 InstallShield 的本机 SQL 脚本功能，他们会在其基础架构中预先编写自定义操作，以保留 SQL 连接所需的属性，以供后续在维修、小升级和卸载期间使用。

默认属性名称是 IS_SQLSERVER_SERVER。

顺便说一句，DBHOST 是很无辜的，但要意识到一些持久化数据（例如 IS_SQLSERVER_USERNAME 和 IS_SQLSERVER_PASSWORD ）是敏感的，需要加密、解密。InstallShield 会自动执行此操作。安全性是否足以满足您的需求，由您自行审查。

# android - Android：我添加了另一个按钮，但现在应用程序崩溃了

> ID：10615795
> 
> 赞同：0
> 
> 时间：2012-05-16T09:34:41.727
> 
> 标签：android, android-manifest, android-button

我在我的应用程序中添加了另一个按钮，但现在应用程序在启动时崩溃。这是我添加的代码，当我阻止它时，应用程序运行良好。

```
btnnext.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        startActivity(new Intent("com.com.com.addtask"));
    }
});

} 
```

我认为这可能是清单的问题，所以这里也是清单（这只是一个玩转应用程序，所以不要因为包裹是 com.com.com 而困扰我）

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.com.com"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET"/>

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:permission="android.permission.INTERNET">
    <activity android:name=".HelloWorldActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".addtask"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="com.com.com.addtask" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application>
</manifest> 
```

这也可能有帮助：

```
05-16 21:21:55.446: E/AndroidRuntime(581): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.com.com/com.com.com.HelloWorldActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:37:50.027

您是否声明了在活动中添加的新按钮？

```
Button btnnext = (Button)findViewById(R.id.myNewButton); 
```

如果你不这样做并设置一个监听器，它将抛出空指针错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:46:58.023

首先使用 xml 识别按钮到活动

```
Button b = (Button) findViewById(R.id.btnNext); 
```

# delphi - 两个 TrackBar 镜子

> ID：10615796
> 
> 赞同：6
> 
> 时间：2012-05-16T09:34:44.840
> 
> 标签：delphi, pascal, trackbar

我想知道如何使我的第二个 trackbar.position 镜像到 trackbar1.position 的相反方向。例如。范围从 1 到 100。

所以当`TrackBar1.Position := 2`，然后`trackbar2.Position := 99` 无论轨迹条走哪条路，我都想朝相反的方向镜像。

到目前为止，这是我的代码：（对使用键不感兴趣），只是鼠标交互。

```
Direction : string; 
Skip : boolean;

procedure TForm1.TrackBar1Change(Sender: TObject);
begin
if TrackBar1.Position = TrackBar2.Position then
begin
if Direction = 'up' then   TrackBar2.Position := TrackBar2.Position + 1;
if Direction = 'down' then TrackBar2.Position := TrackBar2.Position - 1;
skip := true;
end;

if TrackBar1.Position < TrackBar2.Position then
begin 
if skip = false then
begin
TrackBar2.Position := TrackBar2.Position - 1;
Direction := 'down';
end;
end
else
begin
if skip = false then
begin
TrackBar2.Position := TrackBar2.Position + 1;
Direction := 'up';
end;
end;
end; 
```

我可能做得过火了。也许有更简单的方法。我更喜欢更简单的方法。谢谢，

本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:48:00.970

2 个 trackbars`OnChange`事件链接到此代码：

```
procedure TForm1.TrackBarChange(Sender: TObject);
var
  tbSource, tbTarget: TTrackBar;
begin
  if Sender = TrackBar1 then // Check the Trackbar which triggers the event
  begin
    tbSource := TrackBar1;
    tbTarget := TrackBar2;
  end
  else
  begin
    tbSource := TrackBar2;
    tbTarget := TrackBar1;
  end;
  tbTarget.OnChange := nil;                           // disable the event on the other trackbar
  tbTarget.Position := tbSource.Max + tbSource.Min - tbSource.Position; // set the position on the other trackbar
  tbTarget.OnChange := TrackBarChange;                // define the event back to the other trackbar

  // Call a function or whatever after this line if you need to do something when it changes
//  lbl1.Caption := IntToStr(TrackBar1.Position);
//  lbl2.Caption := IntToStr(TrackBar2.Position);
end; 
```

**替代开始**（由 Ken White 建议和我的评论；o））：

```
procedure TForm1.TrackBarChange(Sender: TObject);
var
  tbSource, tbTarget: TTrackBar;
begin
//  if Sender is TTrackBar then      // is it called 'from' a trackbar?
//  begin
    tbSource := TTrackBar(Sender); // Set the source

    if tbSource = TrackBar1 then   // Check the Trackbar which triggers the event
      tbTarget := TrackBar2
    else
      tbTarget := TrackBar1;

    tbTarget.OnChange := nil;                                             // disable the event on the other trackbar
    tbTarget.Position := tbSource.Max + tbSource.Min - tbSource.Position; // set the position on the other trackbar
    tbTarget.OnChange := TrackBarChange;                                  // define the event back to the other trackbar

    // Call a function or whatever after this line if you need to do something when it changes
//    lbl1.Caption := IntToStr(TrackBar1.Position);
//    lbl2.Caption := IntToStr(TrackBar2.Position);
//  end;
end; 
```

# php - 用于移动设备的 HTTP 标头“内容类型：应用程序/强制下载”的实用程序？

> ID：10615797
> 
> 赞同：48
> 
> 时间：2012-05-16T09:34:53.350
> 
> 标签：php, http, mobile, download, content-type

我目前正在编写一个 PHP 脚本，它允许您通过访问链接从移动设备下载媒体内容（视频、音频、图片...）。（即[http://www.my-web-site.com/download.php?id=7ejs8ap](http://www.my-web-site.com/download.php?id=7ejs8ap)）当我用最近的手机（三星 Galaxy S、iPhone 4S、其他一些... ) 但我的旧手机三星 C3050 出现错误。我想下载的媒体只是一个我通常很容易下载的音频 mp3 文件。

错误似乎是“未知的内容类型”。因此，由于我唯一的 HTTP 标头 Content-Type 是“application/force-download”，我尝试对此发表评论并重试。然后，它起作用了。但是现在，我目前正在询问此 Content-Type 的含义以及它是否对其他移动设备是强制性的。我在 iPhone 4 上没有 Content-Type 的情况下进行了测试，它可以工作，但我不确定这种兼容性是否适用于所有移动设备。

有人可以解释一下 Content-Type 是如何工作的吗，为什么这不是标准 MIME 或其他所有可以帮助我确保这是每次下载的可选 Content-Type 的内容，无论文件、浏览器或设备如何正在下载吗？

谢谢大家。

这是我发送的 PHP 标头：

```
<?php
//Assume that $filename and $filePath are correclty set.
header('Content-Description: File Transfer');
header('Content-Disposition: attachment; filename="'.$filename.'"');
// header('Content-Type: application/force-download'); Non-standard MIME-Type, incompatible with Samsung C3050 for example. Let it commented
readfile($filePath);
?> 
```

编辑：我刚刚尝试使用 Sony Xperia，但下载不成功：我只看到要下载的文件的“html 编码”字节。如果 application/octet-stream 或 application/force-download 不起作用，我怎么知道我必须使用什么内容类型？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-05-16T10:34:43.813

`Content-Type: application/force-download`意思是“我，网络服务器，将向你（浏览器）撒谎这个文件是什么，这样你就不会把它当作 PDF/Word 文档/MP3/任何东西，并提示用户将神秘文件保存到而是磁盘”。当客户端不执行“保存到磁盘”时，这是一个肮脏的黑客攻击。

为您使用的任何媒体（例如`audio/mpeg`mp3）使用正确的 mime 类型。

`Content-Disposition: attachment; etc etc`如果您想鼓励客户端下载它而不是遵循默认行为，请使用标题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-16T09:42:06.120

要下载文件，请使用以下代码...将文件名和位置存储在 $file 变量中。它支持所有mime类型

```
$file = "location of file to download"
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

要了解 Mime 类型，请参阅此链接： http: [//php.net/manual/en/function.mime-content-type.php](http://php.net/manual/en/function.mime-content-type.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T10:36:34.363

`application/force-download`不是标准的 MIME 类型。这是最近添加的一些浏览器支持的 hack。

你的问题真的没有任何意义。这就像是在问为什么 Internet Explorer 4 不支持最新的 CSS 3 功能。

# symfony - Symfony2 中的响应头没有改变

> ID：10615799
> 
> 赞同：0
> 
> 时间：2012-05-16T09:35:05.240
> 
> 标签：symfony

我正在使用`symfony2`.

首先我开始一切都很好，重定向返回`301`响应，在服务器错误`Symfony`返回`300`响应......但现在每次我使用`redirect Response`symfony 时都会返回带有`200`状态的响应并`meta refresh`重定向。此外，当发生内部服务器错误时，它会返回带有`200`status 的响应。

在另一种情况下，我尝试创建`RSS`提要，尽管我将`Content-Type: application/xml`客户端内容类型设置为`text-html`.

是不是`Symfony`配置有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:28:33.903

您在某个地方的 php 标签之外留下了 BOM 标记或空白字符？

在`return new Response...`尝试之前：

```
if (headers_sent($filename, $linenum)) {
    echo "Headers already sent in $filename on line $linenum\n";
    exit; 
} 
```

# java - 来自 HBase 的奇怪连接拒绝

> ID：10615800
> 
> 赞同：1
> 
> 时间：2012-05-16T09:35:13.020
> 
> 标签：java, jakarta-ee, hadoop, hbase

从 java 客户端从远程连接到 HBase 服务器时，我遇到了一个非常奇怪的异常。奇怪的是，我的这个 HBase 服务器工作正常，我已经用它做了很多工作，而我所做的所有工作都是通过远程连接。但是今天这个服务器搞砸了我，我不知道为什么。我检查了 Hbase 的日志，但没有发现任何异常，当我在 HBase 服务器上运行 jps 时，我发现所有进程都运行良好。那么问题是什么？我也格式化了Namenode，但问题仍然存在。下面给出了从我的 java 客户端连接到 HBase 服务器时出现的异常：

```
Hbase Demo Application 
12/05/16 14:22:52 WARN hbase.HBaseConfiguration: instantiating HBaseConfiguration() is deprecated. Please use HBaseConfiguration#create() to construct a plain Configuration
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.3.2-1031432, built on 11/05/2010 05:32 GMT
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:host.name=aliraza-desktop
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.version=1.6.0_26
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Sun Microsystems Inc.
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.home=/usr/lib/jvm/java-6-sun-1.6.0.26/jre
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.class.path=.:/opt/COM/hbase-0.90.4/hbase-0.90.4.jar:/opt/COM/hbase-0.90.4/lib/commons-cli-1.2.jar:hadoop-core-0.20.205.0.jar:/opt/COM/hbase-0.90.4/lib/log4j-1.2.16.jar:/opt/COM/hbase-0.90.4/lib/slf4j-log4j12-1.5.8.jar:/opt/COM/hbase-0.90.4/lib/slf4j-api-1.5.8.jar:/opt/COM/hbase-0.90.4/lib/commons-logging-1.1.1.jar:/opt/COM/hbase-0.90.4/lib/zookeeper-3.3.2.jar
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/i386/client:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/i386:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:os.arch=i386
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.32-21-generic
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:user.name=COM
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:user.home=/home/COM
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Client environment:user.dir=/opt/COM/hbase-sample
12/05/16 14:22:53 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.15.20:2181 sessionTimeout=180000 watcher=hconnection
12/05/16 14:22:53 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.15.20:2181
12/05/16 14:22:53 INFO zookeeper.ClientCnxn: Socket connection established to hbase/192.168.15.20:2181, initiating session
12/05/16 14:22:53 INFO zookeeper.ClientCnxn: Session establishment complete on server hbase/192.168.15.20:2181, sessionid = 0x13754f410eb0003, negotiated timeout = 180000
12/05/16 14:22:53 INFO client.HConnectionManager$HConnectionImplementation: getMaster attempt 0 of 1 failed; no more retrying.
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:604)
    at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:328)
    at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:883)
    at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:750)
    at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:257)
    at $Proxy4.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:419)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:393)
    at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:444)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:360)
    at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:94)
    at org.apache.hadoop.hbase.client.HBaseAdmin.checkHBaseAvailable(HBaseAdmin.java:1258)
    at HBaseDemo.main(HBaseDemo.java:55)
HBase is not running!
Execution script exiting 
```

我真的被困在那里。

# shell - 当路径中有FIFO时如何递归grep

> ID：10615803
> 
> 赞同：5
> 
> 时间：2012-05-16T09:35:20.683
> 
> 标签：shell, grep, fifo

我想做一个递归的grep。所以通常我会做以下事情：

```
grep pattern -r /some/path 
```

通常这会起作用。但是，当路径中存在 FIFO 文件时，grep 会卡在那里。

```
johnson@ISD32_54_sles10:~/tmp$ ls -l 1
prw-r--r-- 1 neoli users 0 2012-05-16 17:24 1 
```

然后我调用 strace 命令来识别问题，我得到了这个。

```
...
stat64("./1", {st_mode=S_IFIFO|0644, st_size=0, ...}) = 0
open("./1", O_RDONLY|O_LARGEFILE) = 3
read(3,  <unfinished ...> 
```

所以我的问题是当路径中有FIFO时如何递归grep？grep 是否有一个命令行选项，它会告诉 grep 在指定时忽略 FIFO？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T09:37:50.190

来自`man grep`(GNU)

```
-D ACTION, --devices=ACTION

   If  an  input  file is a device, FIFO or socket, use ACTION to process it.
   By default, ACTION is read, which means that devices are read just as if
   they were ordinary files.  If ACTION is skip,  devices  are  silently skipped. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T09:38:15.980

一种方法是使用`find`

```
find . -type f -exec grep pattern {} \; 
```

这只会 grep 用于常规文件上的模式（因此没有符号链接、管道等）

# sql - 关键字 DECLARE 附近的语法不正确

> ID：10615811
> 
> 赞同：1
> 
> 时间：2012-05-16T09:35:47.123
> 
> 标签：sql, sql-server-2008

我在上一个问题中已经回答了这种问题，但现在我有另一个问题。我正在尝试创建一个视图，并且已经帮助创建了以下查询；

```
DECLARE @table TABLE
    (
      [Type_ID] INT,
      [Client_ID] VARCHAR(50),
      [PBX_Vendor] VARCHAR(50)
    )

INSERT  INTO @table
        SELECT  dbo.AMGR_User_Fields_Tbl.Type_Id, dbo.AMGR_User_Fields_Tbl.Client_Id, dbo.AMGR_User_Field_Defs_Tbl.Description AS PBX_Vendor
            FROM    dbo.AMGR_User_Fields_Tbl INNER JOIN
                    dbo.AMGR_User_Field_Defs_Tbl ON dbo.AMGR_User_Fields_Tbl.Type_Id = dbo.AMGR_User_Field_Defs_Tbl.Type_Id AND 
                    dbo.AMGR_User_Fields_Tbl.Code_Id = dbo.AMGR_User_Field_Defs_Tbl.Code_Id
            WHERE     (dbo.AMGR_User_Fields_Tbl.Type_Id = 127)

SELECT  [Type_ID],
        [Client_ID],
        (
          SELECT    STUFF((
                            SELECT  ', ' + [PBX_Vendor]
                            FROM    @table
                            WHERE   [Client_ID] = tbl.[Client_ID]
                                    AND [Type_ID] = tbl.[Type_ID]
                            GROUP BY [PBX_Vendor]
                            ORDER BY [PBX_Vendor]
                          FOR
                            XML PATH('')
                          ), 1, 1, '')
        ) PBX_Vendor
FROM    @table tbl
GROUP BY [Type_ID],
        [Client_ID] 
```

这给了我需要的结果，并将列的结果放在同一个单元格中。但是，当我保存视图时，我得到“关键字 DECLARE 附近的语法不正确”。我知道我无法在视图中运行 Declare，那么我可以运行什么替代方案？它必须是一个视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:39:57.640

您不能在视图中声明变量。

> 您不能在视图定义中声明变量。您可以在过程中创建逻辑或修改视图以使用内置的 user_name() 函数来返回过滤结果。

参考[这里](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/b22350f9-9c9b-42c3-9d36-77d489095ab8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:43:53.220

我可能在这里遗漏了一些东西，但你为什么不这样做呢？

```
WITH ctetable 
     AS (SELECT dbo.AMGR_User_Fields_Tbl.Type_Id, 
                dbo.AMGR_User_Fields_Tbl.Client_Id, 
                dbo.AMGR_User_Field_Defs_Tbl.Description AS PBX_Vendor 
         FROM   dbo.AMGR_User_Fields_Tbl 
                INNER JOIN dbo.AMGR_User_Field_Defs_Tbl 
                  ON dbo.AMGR_User_Fields_Tbl.Type_Id = 
                     dbo.AMGR_User_Field_Defs_Tbl.Type_Id 
                     AND dbo.AMGR_User_Fields_Tbl.Code_Id = 
                         dbo.AMGR_User_Field_Defs_Tbl.Code_Id 
         WHERE  ( dbo.AMGR_User_Fields_Tbl.Type_Id = 127 )) 
SELECT [Type_ID], 
       [Client_ID], 
       (SELECT Stuff((SELECT ', ' + [PBX_Vendor] 
                      FROM   ctetable 
                      WHERE  [Client_ID] = tbl.[Client_ID] 
                             AND [Type_ID] = tbl.[Type_ID] 
                      GROUP  BY [PBX_Vendor] 
                      ORDER  BY [PBX_Vendor] 
                      FOR xml path('')), 1, 1, '')) PBX_Vendor 
FROM   ctetable tbl 
GROUP  BY [Type_ID], 
          [Client_ID] 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms190766(v=SQL.100).aspx)了解有关 CTE的更多信息。

> # 使用公用表表达式
> 
> 可以将公用表表达式 (CTE) 视为在单个 SELECT、INSERT、UPDATE、DELETE 或 CREATE VIEW 语句的执行范围内定义的临时结果集。CTE 类似于派生表，因为它不存储为对象，并且仅在查询期间持续存在。与派生表不同，CTE 可以是自引用的，并且可以在同一查询中多次引用。

# ajax - 使用 PrimeFaces 的 RequestContext 更新另一个页面中的组件

> ID：10615815
> 
> 赞同：1
> 
> 时间：2012-05-16T09:35:54.700
> 
> 标签：ajax, jsf, primefaces

我发现了 PrimeFaces' `RequestContext#update`，我发现它非常有用。

现在我希望它更新一个不在调用 bean 的页面上的组件。

有没有办法告诉`RequestContext#update`需要更新的组件在另一个页面上？

就像是 ：`RequestContext.getCurrentInstance().update("downloads.xhtml", ":downloadPanel")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:43:48.017

仅当您在操作方法完成时导航回该页面时才有可能。否则无论如何都没有意义，因为它`RequestContext`仅适用于当前请求。

# oauth - google oauth2 grant_type=authorization_code 返回处理 OAuth 2 请求时出错

> ID：10615818
> 
> 赞同：4
> 
> 时间：2012-05-16T09:36:02.733
> 
> 标签：oauth

这段代码为

帖子网址为[https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)

范围是“https://www.googleapis.com/auth/userinfo.profile [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email) https://www.google.com/m8/feeds/”

授权类型为授权代码

代码来自谷歌

```
        我的 %args = (
            client_id => $config->{client_id},
            client_secret => $config->{client_secret},
            redirect_uri => $config->{redirect_uri},
            范围 => $config->{范围}，
            grant_type => $config->{grant_type},
            代码 => $代码，
        );
        我的 $ua = LWP::UserAgent->new;
        我的 $ua_response = $ua->post( $uri, \%args );

```

我得到的是如下所示：（响应是 html 转义）

```
$VAR1 = \祝福（{

'_content' => '<HTML> <HEAD> <TITLE>错误处理 OAuth 2 请求</TITLE> </HEAD> <BODY BGCOLOR="#FFFFFF" TEXT="#000000"> <H1>错误处理 OAuth 2请求</H1> <H2>错误500</H2> </BODY> </HTML>'，
1990 年 1 月 1 日 00:00:00 GMT', 'pragma' => 'no-cache', 'server' => 'GSE', 'title' => 'Error processing OAuth 2 request', 'x-content-type -options' => 'nosniff', 'x-frame-options' => 'SAMEORIGIN', 'x-xss-protection' => '1; 模式=块' }, 'HTTP::Headers' ),

'_msg' => '处理 OAuth 2 请求时出错',

'_protocol' => 'HTTP/1.1',

'_rc' => '500',

'_request' => bless( { '_content' => 'grant_type=authorization_code&redirect_uri=http%3A%2F%2Fwww.xxx.com%2Foauth%2Fcallback%2Fgoogle&client_secret=xxx&client_id=xxx.apps.googleusercontent.com&code=4%2FSihUM4Zw1OPiWLMi- gdGvKOfiY4M.cggfQHKT31QagrKXntQAax3e4-qpbgI&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww。 google.com%2Fm8%2Ffeeds%2F',
'_headers' => bless( { 'content-length' => 424, 'content-type' => 'application/x-www-form-urlencoded', 'user-agent' => 'libwww-perl/6.04' }, 'HTTP::Headers' ),
 '_method' => 'POST',
'_uri' => bless(do{\(my $o = 'https://accounts.google.com/o/oauth2/token')}, 'URI::https' ),
'_uri_canonical' => ${$VAR1}->{'_request'}->{'_uri'} },

'HTTP::Request' ) }, 'HTTP::Response' );
```

实际上它有时会起作用，但并非适用于所有情况。

有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:16:10.733

在尝试为某些客户端获取访问令牌时，我们也面临同样的问题。这些客户的所在地是澳大利亚、日本、中国等，我们的服务器在德国。其他人也有同样的问题（[https://groups.google.com/d/msg/google-content-api-for-shopping/Cx2hp8Ey5Sc/uBHqkwbTbXoJ](https://groups.google.com/d/msg/google-content-api-for-shopping/Cx2hp8Ey5Sc/uBHqkwbTbXoJ)）所以这个问题还没有得到解决，不幸的是......

# c# - 如何从数据表中选择所有字段

> ID：10615819
> 
> 赞同：0
> 
> 时间：2012-05-16T09:36:02.583
> 
> 标签：c#, linq, select, join, datatable

如何从数据表中选择所有字段？前任。：

```
var common = from c in dt1.AsEnumerable()
             join x in dt2.AsEnumerable() on c.Field<int>("ID") equals
             x.Field<int>("ID")
             select
             new object[]
             {
                 c["Col1"], x["NameCol1"], x["NameCol2"], x["NameCol3"], x["NameCol4"]

             }; 
```

如何选择 x 的所有字段？（如果 x 有 20 列，我不想为所有字段写名称）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:57:14.427

也许这有帮助：

```
 var customers = new DataTable();
        customers.Columns.Add("ID", typeof(int));
        customers.Columns.Add("Name");

        customers.Rows.Add(1, "Tom");
        customers.Rows.Add(2, "Dick");
        customers.Rows.Add(3, "Harry");

        var purchases = new DataTable();
        purchases.Columns.Add("ID");
        purchases.Columns.Add("Description");
        purchases.Columns.Add("PurchaseID", typeof(int));

        purchases.Rows.Add(1, "Bike", 1);
        purchases.Rows.Add(2, "Holiday", 1);
        purchases.Rows.Add(3, "Bike", 2);
        purchases.Rows.Add(4, "Car", 3);

        var query = customers.AsEnumerable().Join(purchases.AsEnumerable(),
                                    cust => cust.Field<int>("ID"),
                                    purch => purch.Field<int>("PurchaseID"),
                                    (cust, purch) =>
                                    {
                                        var res = new List<object>();
                                        res.AddRange(cust.ItemArray);
                                        res.AddRange(purch.ItemArray);
                                        return res.ToArray();
                                    }
                                    ); 
```

# directx - DirectX 9 着色不是线性的？

> ID：10615822
> 
> 赞同：1
> 
> 时间：2012-05-16T09:36:09.147
> 
> 标签：directx, pixel-shading

我正在使用带有 C# 的托管 DirectX9。我做了一个数控机床的可视化。

在计算机 1 上它运行良好。圆形管在左侧是亮灰色，阴影是线性到深灰色。

在计算机 2 上，我得到了不同的东西（相同的代码！）：左边是白色，右边是深灰色，但不是线性的。它仍然是白色到大约 45% 的试管和黑暗的 55%。阴影仅在此点之间可见....

任何想法？？？

看起来我使用了太亮的光，但代码完全一样......

/Edit 好的，这是一个屏幕截图： ![左边是错误的阴影，右边是正确的](../Images/23d24de61f0d48baf1054c66106d5325.png) 有问题的计算机是 i3 + Intel 板载显卡 + Win7 64Bit 具有正确可视化的计算机是带有板载显卡和 XP 32Bit 的旧 Intel

以下是 DirectX 的设置：

```
PresentParameters aPresentParams = new PresentParameters();
aPresentParams.Windowed = true;
aPresentParams.DeviceWindow = theControl;
aPresentParams.DeviceWindowHandle = theControl.Handle;
aPresentParams.SwapEffect = SwapEffect.Copy;
aPresentParams.EnableAutoDepthStencil = true;
aPresentParams.AutoDepthStencilFormat = DepthFormat.D16;
CreateFlags aCreateFlags = CreateFlags.HardwareVertexProcessing;
itsDevice = new Device(0, DeviceType.Hardware, theControl, aCreateFlags, aPresentParams);
itsDevice.RenderState.AntiAliasedLineEnable = true;
itsDevice.RenderState.CullMode = Cull.None;
//some materials...
itsMaterialBasic.Diffuse = Color.LightGray;
itsMaterialBasic.Ambient = Color.FromArgb(0, 80, 80, 80);
itsMaterialBasic.Specular = Color.Red;
itsMaterialBasic.SpecularSharpness = 1000.0f;
//...
itsDevice.RenderState.Lighting = true;
itsDevice.Lights[0].Type = LightType.Point;
itsDevice.Lights[0].Diffuse = Color.LightGray;
itsDevice.Lights[0].Range = 10000f;
itsDevice.Lights[0].Falloff = 10f;
itsDevice.Lights[0].Direction = new Vector3(-5, -28, 10);
itsDevice.Lights[0].Position = new Vector3(1000, 2000, 3350);
itsDevice.Lights[0].Attenuation0 = 0f;
itsDevice.Lights[0].Update();
itsDevice.Lights[0].Enabled = true;
itsDevice.RenderState.ShadeMode = ShadeMode.Phong;
itsDevice.RenderState.SpecularEnable = true;
itsDevice.RenderState.SpecularMaterialSource = ColorSource.Color1;
itsDevice.RenderState.Ambient = Color.FromArgb(110, 110, 110);
itsDevice.RenderState.AmbientMaterialSource = ColorSource.Color1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:43:06.937

我有消息！！！computer1..n：Intel i7 集成显卡或新显卡：软件和硬件顶点处理：错误

computer0：32 位 WinXP 与旧显卡：硬件顶点处理：正确软件顶点处理：错误

我尝试使用着色器。但我也得到了错误的可视化。我通过三角形内2个向量的叉积为三角形的3个顶点生成法线（并将它们归一化）。但是当我使用这个 normal.XYZ 值作为像素着色器返回值 (rgb) 时，它应该看起来像一个法线贴图。但有些部分只是一种颜色......

真正疯狂的事情是：与来自互联网的简单教程示例相同！！！！我的代码有什么问题？？？？？？

# c# - 我应该在代码后面插入当前日期时间还是在数据库服务器中设置

> ID：10615825
> 
> 赞同：3
> 
> 时间：2012-05-16T09:36:22.140
> 
> 标签：c#, .net, sql-server, datetime, insert

我做了一个表格订阅表格。插入数据时，我会将订阅日期和时间放在那里。我们应该将订阅日期时间放在代码后面还是 mssql 服务器中作为默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:42:28.067

我认为这是个人选择，尽管我总是在 SQL 中使用`CURRENT_TIMESTAMP`

我的理由是为什么要为您的查询添加一个并不真正需要的额外参数，它只是您必须生成的额外数据。

正如已经提到的，在代码隐藏中添加它可能有助于代码的可读性，但我不同意，当你调用一个过程时，你并不总是需要知道它在存储什么以及它是如何做的，你只需要知道它做了什么。

作为一个例子，我有很多程序可以编辑我的数据库中的内容，作为一项附带任务，它们还更新审计表，所以我有一个正在做的事情的日志。任何调用这些程序的程序员都不需要知道这一点，因为程序的主要功能是在主表中插入或编辑数据，生成的审计跟踪只是关于数据的数据，与程序员正在做的事情无关。

如果我将所有审计参数添加到代码中的每个 SP，那么将有 5-6 个额外的参数，这只会使我的代码隐藏变得混乱并使事情变得更加复杂。

在您的场景中，将数据插入数据库的人是否需要知道它记录了插入数据的时间？我猜可能不是，所以没有真正需要在代码隐藏中生成日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:59:40.873

如果您将应用程序托管在服务器（共享托管）中，请尝试以 UTC 格式存储日期和时间。您可以使用 GETUTCDATE() 以 UTC 格式存储日期时间。

# javascript - 如何在 Nodejs 中使用时区偏移？

> ID：10615828
> 
> 赞同：26
> 
> 时间：2012-05-16T09:36:32.300
> 
> 标签：javascript, node.js, datetime, timezone

我需要下一个流程：

```
var a = new Date(1337324400000, 'Europe/Amsterdam'); //+2h
console.log(a); // for example 12:00 Mon ...
a.setTimeZone('Europe/Kiev'); //+3h
console.log(a); // 13:00 Mon ... 
```

nodejs utils api中是否有这种可能性？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-30T23:47:28.517

您可以使用[node-time](https://github.com/TooTallNate/node-time)，如下所示：

```
var time = require('time');

var a = new time.Date(1337324400000);

a.setTimezone('Europe/Amsterdam');
console.log(a.toString()); // Fri May 18 2012 09:00:00 GMT+0200 (CEST)
a.setTimezone('Europe/Kiev');
console.log(a.toString()); // Fri May 18 2012 10:00:00 GMT+0300 (EEST) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-17T05:10:43.067

Moment.js 现在有**[Moment 时区](http://momentjs.com/timezone/)**

**安装**：

```
npm install --save moment-timezone 
```

**使用**：

```
var Moment = require('moment-timezone');
Moment().tz('America/Los_Angeles').format(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-16T14:53:02.037

更新：现在还有一个:) [https://github.com/mde/timezone-js](https://github.com/mde/timezone-js)

> 一个启用时区的、插入式替换股票 JavaScript 日期。timezoneJS.Date 对象与 JS Date API 兼容，具有相同的 getter 和 setter 方法——它应该可以在任何与普通 JavaScript 日期一起使用的代码中正常工作。

* * *

不，那里没有

但是您可以使用**moment.js**来简化[http://momentjs.com/docs/](http://momentjs.com/docs/)

您仍然需要知道每个偏移量，因此您需要像这样的映射`{"Europe/Amsterdam":2,"Europe/Kiev":3}`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-08T19:23:26.483

请参阅 npm 中的时区包。它内置了所需的一切，并且是纯 JS，并且似乎是可用的最佳时区处理库。

[https://www.npmjs.com/package/timezone](https://www.npmjs.com/package/timezone)

[http://bigeasy.github.io/timezone/](http://bigeasy.github.io/timezone/)

```
var tz = require('timezone/loaded'),
    equal = require('assert').equal,
    utc;

// Get POSIX time in UTC. 
utc = tz('2012-01-01');

// Convert UTC time to local time in a localize language. 
equal(tz(utc, '%c', 'fr_FR', 'America/Montreal'),
      'sam. 31 déc. 2011 19:00:00 EST'); 
```

> *   Timezone 是纯 JavaScript 中的 MicroJS 库，没有提供时区感知日期数学和日期格式的依赖项。
> *   时区使用 IANA 数据库来确定世界任何地方自标准化时间开始以来的任何时间的正确挂钟时间。
> *   时区使用 strftime 格式的完整实现来格式化日期，包括 GNU 日期扩展。
> *   时区使用 RFC 3999 日期字符串以 POSIX 时间和本地时间表示时间。
> *   Timezone 是一个功能齐全的基于标准的纯 JavaScript 时间库，用于 3K 以下的压缩和 gzip 压缩。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-08T04:39:45.123

使用[moment-timezone.js](https://momentjs.com/timezone/docs/#/using-timezones/)它是解析、验证和更改不同时区时间的最佳选择。

# java - Java：从指向 jar 中目录的非分层 URI 创建文件

> ID：10615832
> 
> 赞同：1
> 
> 时间：2012-05-16T09:36:45.870
> 
> 标签：java, jar, uri

我正在使用反射来查找某个包中的所有目录，然后将这些目录作为 java.io.Files 返回，以便我可以从中提取类文件。我获取包中所有目录的方法是：

```
private static List<File> findDirs(String packageName) throws IOException,
        UnsupportedEncodingException, URISyntaxException {
    List<File> result = new ArrayList<File>();
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    assert classLoader != null;

    String path = packageName.replace('.', '/');
    Enumeration<URL> resources = classLoader.getResources(path);
    while (resources.hasMoreElements()) {
        URL resource = resources.nextElement();
        URI uri = resource.toURI();
        File f = new File(uri);// this line throws the exception
        result.add(f);
    }
    return result;
} 
```

从源代码运行我的应用程序时，它工作得非常好。但是，一旦我部署并运行它，findDirs 方法就会失败，因为 File 构造函数会抛出 IllegalArgumentsException“URI 不是分层的”。

我已经调试了代码，导致问题的 URI 是： `jar:file:/C:/Program%20Files/apache-activemq-5.5.1/bin/../lib/App.jar!/com/demo/payload`

而从源代码运行时，URI 没有问题： `file:/C:/Marcus/JavaProjects/App/build/prod/classes/com/demo/payload`

如何从非分层 URI（例如提到的那个）创建指向 App.jar 中的有效负载目录的文件？

我可以创建一个指向 App.jar 本身的 JarFile ，`JarURLConnection`然后可以获取一个指向我正在搜索的目录的 JarEntry ，但似乎无法将此条目转换为文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:47:16.903

期望您能够将您从中获得的所有东西都视为`#getResources(String)`有效`File`参考是错误的。在您的运行案例中，它是您的应用程序/库的 Jar 中文件的引用。您应该这样访问这些`URL`s：在它们上获取`InputStream`s( `URL#openStream`) 以读取内容，而不是尝试跳过s `File`。

为了获得`File`s，您需要弄清楚何时查看 in-jar URL，然后可能从 ZIP 中提取文件（因为 JAR 是 ZIP）以获得适当的一等公民`File`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:57:51.663

您可以`java.util.zip.ZipFile`在指向 jar 文件内部时使用。只需将引用的 jar 文件加载到 a 中`ZipFile`并使用`getEntry`or`entries`来检索 jar 中的元素。

# java - 为系统生成唯一 ID（可重现）

> ID：10615837
> 
> 赞同：1
> 
> 时间：2012-05-16T09:36:55.543
> 
> 标签：java, uuid

我正在寻找一种为系统生成唯一 ID 的方法，这样，每次生成此 ID 时，它应该与系统上的一样长。（我不确定这是否可能）我正在使用 Java 来实现这一点，并且应该在 Windows 和 Unix (Linux) 上运行

在花了一些时间搜索各种文章后，如果找到了一些好的解决方案，但每个都有自己的局限性。以下 2 个选项非常接近。

1.  **在 Java 中使用 UUID 包：**这会给出可能发生冲突的唯一 ID，但我没有为系统获得相同的唯一 ID。
2.  **使用系统的mac地址：**我怀疑这是否适用于虚拟主机。

各位有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T05:54:57.037

生成一个[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)，并将 128 位或它们的十六进制字符串表示形式保存到存储中。稍后从存储中读取以发现您之前写入的值。

捆绑类[java.util.UUID](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html)可以生成版本 3 或版本 4 UUID。其他库可以生成其他版本。

# mysql - 如何强制 Mysql 在 IN 子句中使用主索引...？

> ID：10615839
> 
> 赞同：2
> 
> 时间：2012-05-16T09:37:05.520
> 
> 标签：mysql, sql, indexing, where-in

```
 Query1\. SELECT * FROM traffic WHERE id IN (1904817,1904699,1882859);

    Query2\. SELECT * FROM traffic WHERE id IN 
            (SELECT id FROM data_table where condition=1); 
```

这里的流量表有近百万条记录，并且`id`是主键。

Query1 使用索引`id`

与 Query2 一样，它没有使用 index 。

如何有效地运行 Query2... 通过使用索引...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T09:39:03.740

使用`inner join`代替`IN`并在 上创建另一个索引`condition column`：

```
select t.* from traffic t
inner join data_table d on t.id = d.id and d.contition = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:42:10.240

和野蛮的方式：`SELECT * FROM traffic, data_table WHERE traffic.id=data_table.id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:39:46.233

通过指定 USE INDEX (index_list)，您可以告诉 MySQL 仅使用一个命名索引来查找表中的行。

```
SELECT * FROM traffic USE INDEX (ID_INDEX) WHERE id IN 
            (SELECT id FROM data_table where condition=1); 
```

# html - html 表格布局在 Outlook 中不固定，用于电子邮件模板

> ID：10615840
> 
> 赞同：2
> 
> 时间：2012-05-16T09:37:05.513
> 
> 标签：html

以下是我保持表格布局固定的代码，但是当我在 Outlook 中收到邮件时，它的布局不固定->

```
<table border=1 borderColor='solid #9BBB59 2.25pt' style='border-top: solid #9BBB59 2.25pt;border-bottom: solid #9BBB59 2.25pt;border-left: solid #9BBB59 2.25pt;border-right: solid #9BBB59 2.25pt;table-layout:fixed;width=82%'> 
```

我有两个表，`m trying to maintain same width for both the tables,it`当我将 html 代码粘贴到文件中时，我在 IE 中工作，但它在 Outlook 中不起作用，宽度变化......有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:50:57.363

对于您的情况，我考虑将两个表包装在同一个表容器中，以便在 Outlook 中具有相同的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T09:14:50.917

我最近遇到了完全相同的问题，我结合使用了一些东西来解决它。

最重要的是，确保您的表格宽度略大于各个列宽的总和。并在你的 "" 或 "" 元素中使用这种风格：style="word-break:break-all"

```
<HTML style="font-family:arial;font-size:15px;">
    <style>
           table, th, td { border:thin solid black; border-collapse: collapse; text-align:left; font-size:15px; font-weight: normal;}
    </style>
    <table width="600" cellpadding="5">
        <tr style="background-color:#045411; color:white;font-family:arial;font-size:15px;">
            <th width="100">ID</th>
            <th width="200" style="word-break:break-all">Name</th>
            <th width="200" style="word-break:break-all">Description</th>
        </tr>
        <tr style="color:black;background-color:white;font-family:arial;font-size:15px;">
            <td width="100">I3026</td>
            <td width="200" style="word-break:break-all">ABFCL3hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh</td>
            <td width="200" style="word-break:break-all">lalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallallalalalalalallal</td>
         </tr>
    </table>
    <br>
    <table width="600" cellpadding="5">
        <tr style="background-color:#045411; color:white;">
            <th width="100">ID</th>
            <th width="200" style="word-break:break-all">Name</th>
            <th width="200" style="word-break:break-all">Description</th>
        </tr>
        <tr style="color:black;background-color:white;">
            <td width="100">ABC100</td>
            <td width="200" style="word-break:break-all"></td>
            <td width="200" style="word-break:break-word">sdfsdfsdfsdfsdf</td>
        </tr>
    </table>
</HTML> 
```

# static - Nginx - 如何实现防盗链？

> ID：10615843
> 
> 赞同：2
> 
> 时间：2012-05-16T09:37:22.483
> 
> 标签：static, nginx, hotlinking

在这里寻求 Nginx 专家的帮助。

我想阻止人们直接从我的网站访问 CSS 或 JS。有点像这样：[http ://assets.behance.net/](http://assets.behance.net/)

我从 ServerFault 得到这个参考： [https ://serverfault.com/a/332493/117595](https://serverfault.com/a/332493/117595)

```
location ~* (\.jpg|\.png|\.gif|\.jpeg|\.png)$ {
 valid_referers none blocked www.example.com example.com;
 if ($invalid_referer) {
    return 403;
 }
} 
```

但有几个问题：

1.  在 中`valid_referers`，我应该如何包含我的 vhosts 目录中的所有域，该目录包含此服务器上我所有域的服务器块。（这是一个具有许多 Cpanel 域的专用 WHM 服务器。）我希望这个允许域列表以某种方式自动化，以防我们将来添加更多域。

2.  更重要的是，我怎样才能在主“http”块中制作它，而不是逐个服务器（即每个域的虚拟主机！）？

3.  “IF”条件不会让 Nginx 服务器变慢吗？到目前为止，我们已经远离所有 IF 块，因为我记得阅读这对性能有很大的不利影响。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:57:10.993

谢谢@dmitry-paskal。我将继续跳过“无”。但问题是 403 消息来自 nginx 默认值。我的“服务器”块中有这个：

```
error_page 404 /404.html;
location = /404.html {
  root   /etc/nginx/html;
  internal;
}
error_page 403 /403.html;
  location = /403.html {
  root   /etc/nginx/html;
  allow all;
}
error_page 500 502 503 504  /500.html;  
  location = /500.html {  
  root  /etc/nginx/html;  
} 
```

目录 /etc/nginx/html 是 chmod 777。

我发现的文档和所有谷歌搜索结果表明上述代码应该可以工作。我错过了什么，如何显示我自己的 403 页面？

# javascript - 如何在 jQuery 中获取浏览器滚动位置？

> ID：10615845
> 
> 赞同：76
> 
> 时间：2012-05-16T09:37:26.013
> 
> 标签：javascript, jquery

我有一个带有滚动条的网络文档。我想获取当前滚动位置的值（以像素为单位）。当我运行以下函数时，它返回值为零。我怎样才能做到这一点？

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.mousewheel.min.js"></script>
<script type="text/javascript">
    $(function (){
        $('#Eframe').on("mousewheel", function() {
            alert(document.body.scrollDown)
        }
    })
</script> 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-05-16T11:05:18.353

由于您似乎正在使用 jQuery，因此这是一个 jQuery 解决方案。

```
$(function() {
    $('#Eframe').on("mousewheel", function() {
        alert($(document).scrollTop());
    });
}); 
```

这里不多解释。如果你愿意，这里是[jQuery 文档](http://api.jquery.com/scrollTop/)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-06-03T01:11:32.933

最好使用`$(window).scroll()`而不是`$('#Eframe').on("mousewheel")`

`$('#Eframe').on("mousewheel")`如果人们使用滚动条上的向上和向下箭头手动滚动或抓取并拖动滚动条本身，则不会触发。

```
$(window).scroll(function(){
    var scrollPos = $(document).scrollTop();
    console.log(scrollPos);
}); 
```

If`#Eframe`是一个带有它的元素，`overflow:scroll`并且您想要它的滚动位置。我认为这应该可行（虽然我还没有测试过）。

```
$('#Eframe').scroll(function(){
    var scrollPos = $('#Eframe').scrollTop();
    console.log(scrollPos);
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-04-03T06:31:34.977

纯javascript就可以做到！

```
var scrollTop = window.pageYOffset || document.documentElement.scrollTop; 
```

# actionscript-3 - 在 as3 中压缩文件夹

> ID：10615851
> 
> 赞同：0
> 
> 时间：2012-05-16T09:37:48.450
> 
> 标签：actionscript-3

我正忙于从闪存中的文件夹创建一个 zip 文件。到目前为止，我有以下内容。

```
public function writeFolderToZip():void {
            var byteLoader:URLLoader = new URLLoader();
            byteLoader.dataFormat = URLLoaderDataFormat.BINARY;
            byteLoader.addEventListener (flash.events.Event.COMPLETE, onBytesLoaded);
            var fileRequest:URLRequest = new URLRequest ("//Users/Thibaut/Desktop/vincent_test.indd");
            byteLoader.load (fileRequest);  
        }

        public function onBytesLoaded(event:flash.events.Event):void {
            var saveZip : Function = function(zip : FZip) : void {
                var out : ByteArray = new ByteArray();
                zip.serialize(out);

                saveRef.addEventListener(flash.events.Event.COMPLETE, 
                 function(e : flash.events.Event) : void {
                    trace("done");
                });

                var fs : FileStream = new FileStream;
                var targetFile : File = File.desktopDirectory.resolvePath(zipName);
                fs.open(targetFile, FileMode.WRITE);
                fs.writeBytes(out);
                fs.close();
            };
                var zip : FZip = new FZip();
                zip.addFile("vincent_test.indd", event.target.data);
                saveZip(zip);
        } 
```

这会选择一个带有 urlLoader 的文件，将其压缩并作为 zip 文件放在我的桌面上。这工作得很好，但我怎样才能选择一个文件夹而不是一个文件？我想选择一个文件夹及其子文件夹和内容并将其保存在我的桌面上。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:52:58.097

使用方法`flash.filesystem.File.browseForDirectory()`

请参阅：[Adobe AS3 参考 flash.filesystem.File](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#browseForDirectory%28%29)

# javascript - 网站 - 根据鼠标位置更改图像（2 个区域）

> ID：10615857
> 
> 赞同：0
> 
> 时间：2012-05-16T09:38:03.880
> 
> 标签：javascript, html, css

我有以下情况很简单（1页，3个区域：左-中-右）：

HTML：

```
<div class="page">
    <div class="answer-on-the-right-or-left">
        Left zone
    </div>

    <div class="picture-in-the-middle">
        <img src="@Url.Content("/content/images/qres/faceblackandwhite.png")"/>
    </div>

    <div class="answer-on-the-right-or-left">
        Right zone
    </div>
</div> 
```

CSS：

```
.page { width: 800px; height: 500px; }

.answer-on-the-right-or-left { float: left; width : 300px; height: 500px; }

.picture-in-the-middle { float: left; width : 150px; height: 500px; } 
```

我想做以下事情：

*   当鼠标在左侧区域时，中间的图片变为：`"/content/images/qres/facecolorleft.png"`
*   当鼠标在右侧区域时：`"/content/images/qres/facecolorright.png"`
*   在其他任何地方，图像都保持不变：`"/content/images/qres/faceblackandwhite.png"`

我知道如何使用 javascript 在图片上进行鼠标悬停，但我找不到解决此问题的方法。

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:44:16.370

为每个区域分配一个 id：

```
<div class="answer-on-the-right-or-left" id="leftZone">Left Zone</div>
<div class="answer-on-the-right-or-left" id="rightZone">Right Zone</div> 
```

并绑定悬停

```
$('.answer-on-the-right-or-left').hover(function() {
   var id = $(this).attr('id');
   var img = $('.picture-in-the-middle img');

   if(id == 'leftZone') img.attr('src', '/content/images/qres/facecolorleft.png');
   else if(id == 'rightZone') img.attr('src', '/content/images/qres/facecolorright.png');

}, function() {
   $('.picture-in-the-middle img').attr('src', '/content/images/qres/faceblackandwhite.png');
}); 
```

# asp.net - Https 请求在 Windows Azure 中不起作用

> ID：10615859
> 
> 赞同：2
> 
> 时间：2012-05-16T09:38:13.677
> 
> 标签：asp.net, iis, azure

我有一个托管在 Windows azure 上的 asp.net 网站。该应用程序运行良好。我已经在 Windows azure 的 IIS 中配置了自签名证书。我还将 IIS 绑定配置为使用 https（端口 443）。但是，现在我的网站无法使用 https。

注意：我也没有看到任何有关无效证书的屏幕。浏览器说找不到站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:45:44.467

您是否使用该证书配置了[HTTPS IN 输入端点？](http://msdn.microsoft.com/en-us/library/windowsazure/ff795779.aspx)如果您刚刚在 Azure Web 角色实例中的 IIS 上配置了自签名证书，它将永远无法工作。由于您的服务定义没有配置 HTTPS 端点，因此负载均衡器不会将任何 https 流量路由到您的实例。

您可以阅读[这篇博文](http://blogs.staykov.net/2012/03/windows-azure-basics-part-2-of.html)，了解 Windows Azure 网络的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:48:16.607

我写了一篇关于如何使用 SSL 证书使用 HTTPS 端点配置 Windows Azure 应用程序的详细博客，如下所示：

[http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/28/complete-solution-adding-ssl-certificate-with-windows-azure-application.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/28/complete-solution-adding-ssl-certificate-with-windows-azure-application.aspx)

# php - 如何使用 Selenium2 类中的 Selenium 功能？

> ID：10615861
> 
> 赞同：1
> 
> 时间：2012-05-16T09:38:18.650
> 
> 标签：php, selenium, phpunit, selenium-webdriver

我在我的 PHP 项目中使用 PHPUnit 和 Selenium。

我一直在遵循以下说明：[http](http://www.phpunit.de/manual/3.6/en/selenium.html) ://www.phpunit.de/manual/3.6/en/selenium.html 。目前我能够启动 Selenium 服务器，并且我已经完成了一些扩展 PHPUnit_Extensions_Selenium2TestCase 或 PHPUnit_Extensions_SeleniumTestCase 类的测试类。

我一直在使用[https://github.com/sebastianbergmann/phpunit-selenium/blob/master/Tests/Selenium2TestCaseTest.php](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/Tests/Selenium2TestCaseTest.php)作为 Selenium2 测试的参考。

我试图找到实现 keyPress 功能的方法，但我无法从 PHPUnit_Extensions_Selenium2TestCase 中找到它。它可以从 PHPUnit_Extensions_SeleniumTestCase 中找到。

**问题来了：**我可以在我的 PHPUnit_Extensions_Selenium2TestCase 类中使用 PHPUnit_Extensions_SeleniumTestCase 功能吗？例如，这个 keyPress 功能。

**版本信息：**

PHPUnit：3.6.10

selenium-server-standalone-2.21.0.jar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:33:44.250

你需要按键做什么？

未经测试，但从您已经参考的测试用例中：

`$this->keys('phpunit ');`

将发送按键 p、h、p、u、n、i、t 和空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T12:28:06.103

它应该是：用于模拟人类行为键入键：

```
$this->webDriver->getKeyboard()->sendKeys('TEXTHERE'); 
```

或者

```
$this->webDriver->getKeyboard()->pressKey(WebDriverKeys::ENTER); 
```

是的，只要您调用它们，您就可以使用这些功能。

# linux - 在 crontab 下安装的脚本未运行

> ID：10615865
> 
> 赞同：0
> 
> 时间：2012-05-16T09:38:33.390
> 
> 标签：linux, shell, unix, cron, crontab

我一直在编写家政脚本，现在我需要在登台和生产环境中安装家政脚本作为 cronjob。我可以在舞台上毫无问题地做到这一点，它给了我预期的输出。当我在生产中运行它时，相同的脚本不会变成 cronjob。以下是我安装的 cronjob。

```
#OTB housekeeper scripts
* * * * * /product/susara/tools/housekeeper.sh -t OTB > /tmp/susara.out 2>&1 
```

这就是我所做的，以找出为什么它不能用于生产

1.  检查 cronjob 守护进程是否正在运行。当我检查它时，得到以下输出，并且说 cronjob 守护进程正在运行

> ps ax|grep cron

输出

```
 4120 ?        Ss     0:06 crond
13640 pts/6    S+     0:00 grep cron 
```

1.  检查 cron 作业日志

这些日志位于 /log/var 中有名为 cron cron.1 cron.2 等的日志文件。

这些日志的内容对我解决问题没有任何帮助。我很难理解它在说什么。

```
May 16 08:01:01 pr2vmx08 crond[17471]: (root) CMD (run-parts /etc/cron.hourly)
May 16 08:08:22 pr2vmx08 crontab[17180]: (user1) REPLACE (user1)
May 16 08:08:22 pr2vmx08 crontab[17180]: (user1) END EDIT (user1)
May 16 08:09:01 pr2vmx08 crond[4162]: (user1) RELOAD (cron/user1)
May 16 08:10:01 pr2vmx08 crond[17762]: (root) CMD (/usr/lib64/sa/sa1 1 1)
May 16 08:20:01 pr2vmx08 crond[18229]: (root) CMD (/usr/lib64/sa/sa1 1 1) 
```

这两个步骤并没有帮助我解决问题。任何人都可以在这方面有一些经验让我知道这里出了什么问题。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:20:25.230

我会先检查一些事情：

1.  文件 /tmp/susara.out 的内容是什么？该文件是否正在写入？使用命令

    尾 -f /tmp/susara.out

    查看正在写入此文件的内容；

2.  检查您的脚本的权限，/product/susara/tools/housekeeper.sh 在生产机器下；使用命令

    ls -al /product/susara/tools/housekeeper.sh

3.  这个脚本应该每分钟运行一次吗？

4.  检查文件 /var/log/messages 上可能的错误消息

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T04:19:01.620

cron 日志在括号之间指示日期、机器名称、进程和一些内核“pid”，括号之间是用户，括号之间是命令行，在“CMD”之后。

如果你 grep 你的脚本名称，你应该会看到一些行，如果它每分钟执行一次，因为它应该给定全星号参数。但也许“正确的”日志文件是 syslog(.*)，但也可能不是，因为这个显然已经在记录 cron。

此外，我认为如果此脚本包含对不在标准 PATH 环境变量中的命令或其他脚本的调用，它可能无法正常工作/根本无法工作。我的“用户”crontab 发生了这种情况，我在 crontab 中添加了正确的 PATH 行，它开始工作。我的印象是，我必须通过这个特殊的更改实际重新启动 cron，这与正常调度行中的简单更改不同。

# asp.net-mvc-3 - 添加新文件时，TFS2010 门控签入“无法应用标签”

> ID：10615866
> 
> 赞同：1
> 
> 时间：2012-05-16T09:38:33.490
> 
> 标签：asp.net-mvc-3, msbuild, tfvc, gated-checkin

添加新文件时，我们在 MVC3 项目的门控签入场景中收到“无法应用标签”。

经过一些谷歌搜索，似乎是因为我们正在使用 MSBuild 脚本来做额外的事情：[http ://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/af9c65a2-dc27-40df-ae6d -958008ad106f](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/af9c65a2-dc27-40df-ae6d-958008ad106f)

我们需要“额外的东西”，因为当我们使用 MVC AREA 时，TFS 似乎将二进制文件放在完全错误的文件夹中。所以 TFSBuild.proj 正在调用另一个 MSBuild 文件来进行文件复制。我们没有专业知识来弄清楚 TFS2010 的做事方式——即 Windows 工作流。

所以问题是 - 我们如何才能继续使用门控值机，但应用标签问题来解决这个问题？

干杯，
皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:36:19.130

您对门控登记有一个普遍的问题：登记只是在您有机会强制执行标签之后发生。我也遇到过这个问题，查看[这个](https://stackoverflow.com/questions/6280730/tfs-2010-issue-with-tracking-changesets-in-builds-that-are-a-result-of-gated-che)较旧的帖子。

我的决定是简单地删除我所有 Gated Check-in 构建中的标签并将此任务分配给*夜间*构建。

# java - 使用线程写入和读取对象的文件

> ID：10615867
> 
> 赞同：1
> 
> 时间：2012-05-16T09:38:37.933
> 
> 标签：java, multithreading, file-io

我有一个主线程，我们从它启动两个后续线程，分别执行文件写入和文件读取操作。我有另一个名为 orderDetails 的类，具有属性及其 getter 和 setter。当前程序以这样一种方式运行，它将对象列表一次写入文件并读回。

***问题：我需要将对象（cust1）的内容写入文件并同时从文件中读取。这必须对所有指定的对象（cust1，cust2）执行。提出解决此问题的可能方法。***

**主班**

```
public class MainThread  {
         public static void main(String[] args) throws InterruptedException {
              Thread1 td1=new Thread1();
              Thread2 td2=new Thread2();
              Thread t1=new Thread(td1);
              Thread t2=new Thread(td2);
              t1.start();
              t1.sleep(100);
              t2.start();
        }
    } 
```

**orderDetails 类 - 一个普通的 pojo 类**

```
 public class orderDetails {
        private String custName;
        private double advancePaid;
        private int mobileModel;
        private boolean replacement;
        private String problemFaced;
        private boolean softwareRequirement;
       public orderDetails(String custName, double advancePaid, int mobileModel,
                boolean replacement, String problemFaced,
                boolean softwareRequirement) {
            super();
            this.custName = custName;
            this.advancePaid = advancePaid;
            this.mobileModel = mobileModel;
            this.replacement = replacement;
            this.problemFaced = problemFaced;
            this.softwareRequirement = softwareRequirement;
        } 
        public boolean isSoftwareRequirement() {
            return softwareRequirement;
        }
        public void setSoftwareRequirement(boolean softwareRequirement) {
            this.softwareRequirement = softwareRequirement;
        }
        public int getMobileModel() {
            return mobileModel;
        }
        public void setMobileModel(int mobileModel) {
            this.mobileModel = mobileModel;
        }
        public String getProblemFaced() {
            return problemFaced;
        }
        public void setProblemFaced(String problemFaced) {
            this.problemFaced = problemFaced;
        }
        public boolean isReplacement() {
            return replacement;
        }
        public void setReplacement(boolean replacement) {
            this.replacement = replacement;
        }
        public double getAdvancePaid() {
            return advancePaid;
        }
        public void setAdvancePaid(double advancePaid) {
            this.advancePaid = advancePaid;
        }
        public String getCustName() {
            return custName;
        }
        public void setCustName(String custName) {
            this.custName = custName;
        }

    } 
```

**文件写入——将属性写入文件**

```
 public class FileWriting implements Runnable {
        orderDetails cust1=new orderDetails("vid",2000.00,2543,true,"display",false);
        orderDetails cust2=new orderDetails("kesav",8000.00,7845,false,"battery",true);
        ArrayList<orderDetails> orderArr=new ArrayList<orderDetails>();
         orderDetails obj;
                public void run() {
            orderArr.add(cust1);
            orderArr.add(cust2);
             try {
                for(orderDetails obj:orderArr)
                {
                fileOperations(obj);
                }
            }
                catch (IOException e) {
                    e.printStackTrace();
            }
        }

        public void fileOperations(orderDetails obj) throws IOException{
            File f= new File("C:\\Users\\311518\\Desktop\\threadtest2.txt");
            Calendar calNow = Calendar.getInstance();
            Calendar orderDate;
            SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
            FileWriter fstream;
              if(f.exists()){
                  //append mode
             fstream = new FileWriter(f,true);
              }
              else
              {
                  // to open a new file
              f.createNewFile();
                    // write mode
             fstream = new FileWriter(f,false);
              }
              BufferedWriter out = new BufferedWriter(fstream);
                     out.write(obj.getCustName()+" "+obj.getMobileModel()+" "+obj.getProblemFaced()+" "+obj.getAdvancePaid()+" "+obj.isReplacement()+" "+obj.isSoftwareRequirement());  
                     double balanceAmt=obj.getAdvancePaid()-200;
                     out.write(" "+balanceAmt); 
                     orderDate = (Calendar) calNow.clone();
                     out.write(" "+formatter.format(orderDate.getTime()));
                     orderDate.add(Calendar.DAY_OF_YEAR, + 10);
                     out.write(" "+formatter.format(orderDate.getTime()));
                     out.newLine();
                 out.close();
        }
     } 
```

**文件读取类——从文件中读取属性**

```
 public class FileReading implements Runnable{
        File f= new File("C:\\Users\\311518\\Desktop\\threadtest2.txt");
        public void run() {
            try {
                readingText();
                System.out.println("Thanks for ur order");
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        public void readingText() throws IOException{
            String [] temp = null;
            FileReader fr = new FileReader(f); 
            BufferedReader br = new BufferedReader(fr); 
            String s; 
            System.out.println("--------ORDER DETAILS------");
             System.out.println("Name Model Adv Prob Replacement S/w Bal OrderDate Deliverdate ");
                while((s = br.readLine()) != null) { 
                                      //display ordered details
                      temp = s.toString().split("\n");
                      for(int i=0;i<temp.length;i++){
                    System.out.println(temp[i]);
                      }
        }

    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:27:48.487

你可以尝试使用一个普通的锁对象，在你写的时候给它加个锁，然后在你读之前等待写完成。例子：

写：

```
for(orderDetails obj:orderArr)
{
    synchronized(FileWriting.class)
    {
        fileOperations(obj);
    }
    Thread.yield();
} 
```

读：

```
synchronized(FileWriting.class) {
    readingText();
    Thread.yield();
} 
```

也许您还应该在循环中添加读取，并让编写器在完成写入时发出信号，以便阅读器可以停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:50:12.423

您可以像下面的代码一样执行上述操作。完美使用生产者消费者线程使用`wait()`和`notify()`。

**文件操作员.java**

```
public class FileOperator {
    File file = new File("D:\\Personal\\MyProjects\\File\\file.txt");

    BufferedWriter bw;
    BufferedReader br;
    boolean isWriteComplete = false;

    public FileOperator() throws IOException {
        if(!file.exists())
            file.createNewFile();
        bw = new BufferedWriter(new FileWriter(file));
        br = new BufferedReader(new FileReader(file));

    }

    public void writeInFile(String str) throws IOException{
        bw.write(str);
        bw.newLine();
        bw.flush();
    }

    public String readFromFile() throws IOException{
        return br.readLine();
    }
} 
```

这是我们的**FileReaderWriterDemo.java**

```
class ThreadReader implements Runnable{
    FileOperator fo;

    public ThreadReader(FileOperator fo) {
        super();
        this.fo = fo;
    }

    @Override
    public void run() {
        synchronized (fo) {
            if(!fo.isWriteComplete){
                try {
                    fo.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            System.out.println("--------ORDER DETAILS------");
            try {
                System.out.println(fo.readFromFile());
            } catch (IOException e) {
                e.printStackTrace();
            }
            fo.notify();
        }
    }
}

class ThreadWriter implements Runnable{
    FileOperator fo;

    public ThreadWriter(FileOperator fo) {
        super();
        this.fo = fo;
    }
    @Override
    public void run() {
        synchronized (fo) {
            System.out.println("Going to write...");
            try {
                fo.writeInFile("OrderNo:1 | advancePaid: 2000 | custName: Mr.XXX | mobileModel: Nokia");
            } catch (IOException e) {
                e.printStackTrace();
            }
            fo.isWriteComplete = true;
            fo.notify();
        }
    }

}

public class FileReaderWriterDemo {

    public static void main(String[] args) {
        FileOperator fop = null;
        try {
            fop = new FileOperator();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Thread tr = new Thread(new ThreadWriter(fop));
        tr.start();

        Thread tw = new Thread(new ThreadReader(fop));
        tw.start();
    }

} 
```

控制台输出：

要去写

- - - - 订单详细信息 - - -

订单号：1 | 预付：2000 | 客户姓名：XXX先生 | 手机型号：诺基亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T10:25:06.070

请找到以下代码示例....

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.RandomAccessFile;

class MyBuffer{
    transient byte[] bytes = null;
    public int bytesTransmitted = 0;
    private int bufferedBytes = 0;
    public static boolean isWriting = false;
    public static boolean readComplete = false;
    MyBuffer(File srcFile,File desFile){
        try {
            if(!desFile.exists()){desFile.createNewFile();}

            ReadThread  readThrd  = new ReadThread  (this,new RandomAccessFile(srcFile,"r"),"read");
//          ReadThread  readThrd  = new ReadThread  (this,new FileInputStream(srcFile),"read");
//          WriteThread writeThrd = new WriteThread (this,new RandomAccessFile(desFile,"rw"),"write");
            WriteThread writeThrd = new WriteThread (this,new FileOutputStream(desFile),"write");
        } catch (Exception e) {
            e.printStackTrace();
        }       
    }
    public void clearBytes() {
        this.bytes = null;
        this.bytesTransmitted+=this.bufferedBytes;
        this.bufferedBytes=0;
        MyBuffer.isWriting = false;

    }
    public byte[] getBytes() {
        return this.bytes;
    }
    public void setBytes(byte[] bytes) {
        if(bytes!=null){
            if(this.bytes!=null){
                byte[] tempByte = new byte[this.bytes.length+bytes.length];
                System.arraycopy(this.bytes, 0, tempByte, 0, this.bytes.length);
                System.arraycopy(bytes, 0, tempByte, this.bytes.length, bytes.length);
                this.bytes = tempByte;
            }else{
                this.bytes = bytes;
            }
            this.bufferedBytes+=bytes.length;
        }
    }

}
class ReadStreamThread implements Runnable{
    @Override
    public void run() {
        // TODO Auto-generated method stub

    }
}
class ReadThread implements Runnable{
    private Thread t;
    private RandomAccessFile file=null;
    private FileInputStream fis=null;
    private MyBuffer buffer;

    ReadThread(MyBuffer obj,RandomAccessFile readFile,String threadName) {
        // TODO Auto-generated constructor stub
        this.t = new Thread(this,threadName);
        this.file = readFile;
        this.buffer = obj;
        this.t.start();
    }
    ReadThread(MyBuffer obj,FileInputStream readFis,String threadName) {
        // TODO Auto-generated constructor stub
        this.t = new Thread(this,threadName);
        this.fis = readFis;
        this.buffer = obj;
        this.t.start();
    }
    @Override
    public void run() {
        // TODO Auto-generated method stub
        try {
            while(true){
                if(!MyBuffer.isWriting){
                    byte[] b = new byte[10];
                    if(file!=null){
                        if(this.file.length()<=this.buffer.bytesTransmitted){
                            this.buffer.setBytes(null);
                            this.buffer.readComplete = true;
                            break;
                        }
                        this.file.read(b);
                        this.buffer.setBytes(b);
                    }else if(fis!=null){
                        if(this.fis.available()<=this.buffer.bytesTransmitted){
                            this.buffer.setBytes(null);
                            break;
                        }
                        this.fis.read(b);
                        this.buffer.setBytes(b);
                    }
                }
            }
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

    }
}
class WriteThread implements Runnable{
    private Thread t;
    private RandomAccessFile file=null;
    private FileOutputStream fos=null;
    private MyBuffer buffer;

    WriteThread(MyBuffer obj,RandomAccessFile writeFile,String threadName) {
        // TODO Auto-generated constructor stub
        this.t = new Thread(this,threadName);
        this.file = writeFile;
        this.buffer = obj;
        this.t.start();
    }

    WriteThread(MyBuffer obj,FileOutputStream writeFos,String threadName) {
        // TODO Auto-generated constructor stub
        this.t = new Thread(this,threadName);
        this.fos = writeFos;
        this.buffer = obj;
        this.t.start();
    }
    @Override
    public void run() {
        // TODO Auto-generated method stub
        try {
            while(true){
                    if(this.buffer.getBytes()!=null){
                        MyBuffer.isWriting = true;
                        if(this.file!=null){
                            this.file.write(this.buffer.getBytes());
                        }else if(this.fos!=null){
                            this.fos.write(this.buffer.getBytes());
                        }
                        this.buffer.clearBytes();
                    }else{
                        if(MyBuffer.readComplete)
                            break;

                        MyBuffer.isWriting = false;
                    }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
public class ReadWriteModifyMain {
    public static void main(String[] args) {
        new MyBuffer(new File("C:\\Users\\Manoj\\Samples\\Samplers\\src.txt"),new File("C:\\Users\\Manoj\\Samples\\Samplers\\des.txt"));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:54:42.560

我认为 wait() 和 notify() 的完美案例。

文件写入

1.  构建订单详细信息列表
2.  在此同步
3.  将订单详细信息写入文件
4.  通知（）
5.  结束同步块

文件阅读

1.  在 FileWriting 上同步
2.  从文件中读取
3.  等待（）
4.  在有利于您的订单条件的情况下执行此操作
5.  结束同步块

# php - 未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR: Parsing WSDL: xxxx already defined

> ID：10615868
> 
> 赞同：2
> 
> 时间：2012-05-16T09:38:38.483
> 
> 标签：php, wcf, web-services

我正在尝试阅读此 .NET WCF Basic http 绑定 Web 服务：http: [//videoconferencingbookingsystem.com/BasicInfo/WhyGoService.svc ?wsdl](http://videoconferencingbookingsystem.com/BasicInfo/WhyGoService.svc?wsdl)

我的调用脚本如下：

```
define('RESPONSE_TIMEOUT', 600);
set_time_limit(RESPONSE_TIMEOUT+30);

header('Content-Type: text/plain');

$options = array(
   'soap_version' => SOAP_1_2,
   'trace' => 1,
   'connection_timeout' => 30,
   'login' => 'xxxxxxx',
   'password' => 'xxxxxxx',
   'trace' => 1
   );

$client = new SoapClient('http://videoconferencingbookingsystem.com/BasicInfo/WhyGoService.svc?wsdl', $options); 
```

...我收到了这个错误：

致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：'IWhygoService_getBasicInformation_InputMessage' 已定义

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:29:23.687

没有看到调试跟踪，我帮不上什么忙，但快速查看代码

您是否需要在选项中跟踪两次？无论如何，它不应该是真/假而不是位表示吗？

如果您有一个返回跟踪的调试器，它会有所帮助:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-09T13:58:21.323

一个月前，当我将一些代码更改为 WCF 服务，然后尝试让不同的应用程序使用该服务时，我遇到了一个完全相同的问题。一个名为 SoapUI 的程序帮助我在 2 分钟内确定了我的问题。

[http://soapui.org/](http://soapui.org/)

它也是免费的。

# .net - 如何将 lync 与 Windows 窗体应用程序集成

> ID：10615870
> 
> 赞同：2
> 
> 时间：2012-05-16T09:38:43.107
> 
> 标签：.net, winforms, integration, lync

我有一个用 .net winforms 编写的应用程序。

有一个显示文档作者的表单，我需要在作者姓名旁边添加 Lync 状态球。

与将联系人添加到电子邮件时在 Outlook 中看到的相同。

这个存在球是否有预建的 winforms 控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:31:45.217

Microsoft 提供了一组 WPF 控件，可以很容易地将诸如状态等内容添加到现有应用程序中。我上周在这里写了一篇博客：http: [//thoughtstuff.co.uk/2012/05/microsoft-lyncs-development-secret-its-easy/](http://thoughtstuff.co.uk/2012/05/microsoft-lyncs-development-secret-its-easy/)

但是，这仅适用于 Silverlight 和 WPF。如果您在经典 WinForms 中进行开发，则可以在 WinForms 应用程序中托管 WPF 控件：MSDN 在此处提供了有关执行此操作的信息，并且在[此处](http://msdn.microsoft.com/en-us/library/ms742215.aspx)有一个很好的[演练](http://www.programmerfish.com/how-to-add-wpf-controls-in-simple-windows-forms/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:22:37.240

有一个名为[Presence Indicator](http://msdn.microsoft.com/en-us/library/hh378628.aspx)的 WPF 控件。您必须使用[ElementHost 对象](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)将其嵌入到标准 WinForms 应用程序中。

显示对我有用的代码片段。

```
public TestForm()
{
    ElementHost lyncHost;
    lyncHost = new ElementHost();
    this.Controls.Add(lyncHost);
    PresenceIndicator lyncControl = new PresenceIndicator();
    lyncControl.Source = "sip:j.smith@example.com";
    lyncHost.Child = lyncControl;
} 
```

# iphone - 根据数组计数创建 UITextField

> ID：10615871
> 
> 赞同：-1
> 
> 时间：2012-05-16T09:39:03.340
> 
> 标签：iphone, ios, ipad, uitextfield

我有一个名为 setUpArray 的可变数组，我想动态生成 UITextField。textField 的数量必须等于 [setUpArray 计数]。我试过以下代码。它适用于 UITextFields 的生成，但问题是它们都具有相同的名称。所以我不能独立设置单个文本的属性。

```
 for(int i=0;i<[setUpArray count];i++)
{
    UITextField *nameTextField=[[UITextField alloc]initWithFrame:CGRectMake(x, y, 60, 40)];
   nameTextField.delegate=self;
    [view addSubview:nameTextField];
    y=y+50;

} 
```

所以请给我这个问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:41:49.067

您可能希望稍后使用标签来访问它们。就像这样：

```
for(int i=0;i<[setUpArray count];i++) {
  UITextField *nameTextField=[[UITextField alloc]initWithFrame:CGRectMake(x, y, 60, 40)];
  nameTextField.delegate=self;
  [view addSubview:label];
  y=y+50;
  nameTextField.tag = 10 + i;
} 
```

稍后访问它：

```
UITextField *theTextField = [view viewWithTag:12]; //or any other number 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:42:04.717

您可以添加：=

```
nameTextField.tag=i;

for(int i=0;i<[setUpArray count];i++)
{
    UITextField *nameTextField=[[UITextField alloc]initWithFrame:CGRectMake(x, y, 60, 40)];
   nameTextField.delegate=self;
   nameTextField.tag = i;
    [view addSubview:nameTextField];
    y=y+50;
}

and access it using :-
if(nameTextField.tag==someIntValue)
{
//perform this operation
} 
```

# css - Bootstrap：将输入与按钮对齐

> ID：10615872
> 
> 赞同：321
> 
> 时间：2012-05-16T09:39:03.497
> 
> 标签：css, twitter-bootstrap

为什么按钮和输入在 Bootstrap 中不能很好地对齐？

我尝试了一些简单的方法，例如：

```
<input type="text"/><button class="btn">button</button> 
```

该按钮大约`5px`低于 chrome/firefox 中的输入。

![在此处输入图像描述](../Images/cb61ce051a8f469b8565592857d1601f.png)

* * *

## 回答 #1

> 赞同：592
> 
> 时间：2012-05-16T09:52:14.517

## 推特引导程序 4

在 Twitter Bootstrap 4 中，可以使用`input-group-prepend`和`input-group-append`类对齐输入和按钮（请参阅[https://getbootstrap.com/docs/4.0/components/input-group/#button-addons](https://getbootstrap.com/docs/4.0/components/input-group/#button-addons)）

### 左侧的分组按钮（前置）

```
<div class="input-group mb-3">
  <div class="input-group-prepend">
    <button class="btn btn-outline-secondary" type="button">Button</button>
  </div>
  <input type="text" class="form-control">
</div> 
```

### 右侧的分组按钮（附加）

```
<div class="input-group mb-3">
  <input type="text" class="form-control">
  <div class="input-group-append">
    <button class="btn btn-outline-secondary" type="button">Button</button>
  </div>
</div> 
```

## 推特引导 3

如@abimelex 的回答所示，输入和按钮可以通过使用`.input-group`类来对齐（参见[http://getbootstrap.com/components/#input-groups-buttons](http://getbootstrap.com/components/#input-groups-buttons)）

### 左侧的分组按钮

```
<div class="input-group">
  <span class="input-group-btn">
    <button class="btn btn-default" type="button">Go!</button>
  </span>
  <input type="text" class="form-control">
</div> 
```

### 右侧的分组按钮

```
<div class="input-group">
   <input type="text" class="form-control">
   <span class="input-group-btn">
        <button class="btn btn-default" type="button">Go!</button>
   </span>
</div> 
```

添加了此解决方案以使我的答案保持最新，但请对[@abimelex 提供的答案](https://stackoverflow.com/a/22592382/681807)投赞成票。

* * *

## 推特引导 2

Bootstrap 提供了一个`.input-append`类，该类用作包装元素并为您更正此问题：

```
<div class="input-append">
    <input name="search" id="search"/>
    <button class="btn">button</button>
</div> 
```

正如@OleksiyKhilkevich 在他的回答中指出的那样，还有第二种对齐方式`input`和`button`使用`.form-horizontal`类：

```
<div class="form-horizontal">
    <input name="search" id="search"/>
    <button class="btn">button</button>
</div> 
```

### 差异

这两个类之间的区别在于，`.input-append`将`button`向上放置在`input`元素上（因此它们看起来像是附加的），它们`.form-horizontal`之间将放置一个空格。

**- 笔记 -**

*为了允许`input`和`button`元素彼此相邻而没有间距，`font-size`已`0`在类中设置了 （这将删除元素`.input-append`之间的白色间距）。如果您想使用或测量来覆盖默认值`inline-block`，这可能会对元素中的字体大小产生不利影响。`input``em``%`*

* * *

## 回答 #2

> 赞同：211
> 
> 时间：2014-03-23T14:45:50.360

**引导程序 5**

```
<div class="input-group">
  <input type="text" class="form-control">
  <button class="btn btn-outline-secondary" type="button">Go</button>
</div> 
```

**引导程序 3 和 4**

您可以使用[input-group 按钮属性](https://getbootstrap.com/docs/3.3/components/#input-groups-basic)将按钮直接应用于输入字段。

```
<div class="input-group">
  <input type="text" class="form-control">
  <span class="input-group-btn">
    <button class="btn btn-default" type="button">Go!</button>
  </span>
</div><!-- /input-group --> 
```

查看[BS4](https://getbootstrap.com/docs/4.0/components/button-group/)或[BS5](https://getbootstrap.com/docs/5.0/forms/input-group/#button-addons) Input-Group 文档以获取更多示例。

![bs3 输入组按钮示例](../Images/e05935f187d5d292d5c2737a5a1d589c.png)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-12-06T23:10:47.837

请注意，这似乎有一个特殊的 CSS 类`form-horizontal`

input-append 有另一个副作用，它会将 font-size 降为零

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-07-15T20:04:00.993

使用**.form-inline** = 这将左对齐标签和内联块控件以实现紧凑布局

示例：http: [//jsfiddle.net/hSuy4/292/](http://jsfiddle.net/hSuy4/292/)

```
<div class="form-inline">
<input type="text">
<input type="button" class="btn" value="submit">
</div> 
```

**.form-horizo​​ntal** = 右对齐标签并将它们浮动到左侧，使它们与控件出现在同一行，这对于 2 列表单布局更好。

```
(e.g. 
Label 1: [textbox]
Label 2: [textbox]
     : [button]
) 
```

示例：http: [//twitter.github.io/bootstrap/base-css.html#forms](http://twitter.github.io/bootstrap/base-css.html#forms)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-01-06T11:55:11.890

我首先尝试了一些我想分享的更改。这是对我有用的代码（找到随附的屏幕截图）：

```
<div class="input-group">
    <input type="text" class="form-control" placeholder="Search text">
    <span class="input-group-btn" style="width:0;">
        <button class="btn btn-default" type="button">Go!</button>
    </span>
</div> 
```

[![在此处输入图像描述](../Images/0a5389c406b6547e754b147fcd825cc1.png)](https://i.stack.imgur.com/N99G9.png)

如果你想看到它工作，只需在你的编辑器中使用下面的代码：

```
<html>
    <head>
        <link type='text/css' rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css' />
    </head>
    <body>
        <div class="container body-content">
            <div class="form-horizontal">
              <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search text">
                  <span class="input-group-btn" style="width:0;">
                      <button class="btn btn-default" type="button">Go!</button>
                  </span>
              </div>
            </div>
        </div>
    </body>
</html> 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-08-11T01:00:03.330

我也在为同样的问题而苦苦挣扎。我使用的引导类对我不起作用。我想出了一个解决方法，如下所示：

```
<form action='...' method='POST' class='form-group'>
  <div class="form-horizontal">
    <input type="text" name="..." 
        class="form-control" 
        placeholder="Search People..."
        style="width:280px;max-width:280px;display:inline-block"/>

    <button type="submit" 
        class="btn btn-primary" 
        style="margin-left:-8px;margin-top:-2px;min-height:36px;">
      <i class="glyphicon glyphicon-search"></i>
     </button>
  </div>
</form> 
```

基本上，我覆盖了“form-control”类的显示属性，并使用其他样式属性来校正大小和位置。

结果如下：

[![在此处输入图像描述](../Images/e4d0ac955f5389bcfc22b52810b3dd67.png)](https://i.stack.imgur.com/JqPBh.jpg)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-06-11T07:52:29.723

引导程序 4：

```
<div class="input-group">
  <input type="text" class="form-control">
  <div class="input-group-append">
    <button class="btn btn-success" type="button">Button</button>
  </div>
</div> 
```

[https://getbootstrap.com/docs/4.0/components/input-group/](https://getbootstrap.com/docs/4.0/components/input-group/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-10T11:58:48.910

```
<form class="form-inline">
  <div class="form-group">
    <label class="sr-only" for="exampleInputEmail3">Email address</label>
    <input type="email" class="form-control" id="exampleInputEmail3" placeholder="Email">
  </div>
  <button type="submit" class="btn btn-default">Sign in</button>
</form> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-06-09T13:15:34.960

我尝试了上述所有代码，但没有一个能解决我的问题。这对我有用。我使用了输入组插件。

```
<div class = "input-group">
  <span class = "input-group-addon">Go</span>
  <input type = "text" class = "form-control" placeholder="you are the man!">
</div> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-01T13:24:09.743

没有直接关系，除非您有类似的代码，但我只是注意到 form-inline, bootstrap 3.3.7 的奇怪行为

我没有为此使用行和单元格，因为它是一个桌面项目，如果开始标签在表格下方（在这种情况下）：

```
<table class="form-inline"> 
<form> 
<tr> 
```

表单元素会堆叠。

开关并正确排列。

```
<form>
<table class="form-inline">
<tr> 
```

Safari 10.0.2 和最新的 Chrome 没有任何区别。也许我的布局是错误的，但它不是很宽容。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-22T11:30:22.780

将输入浮点数设为左侧。然后按下按钮并使其向右浮动。当您采取多于一的距离时，您可以清除固定类。

```
<input style="width:65%;float:left"class="btn btn-primary" type="text" name="name"> 
<div style="width:8%;float:left">&nbsp;</div>
<button class="btn btn-default" type="button">Go!</button>
<div class="clearfix" style="margin-bottom:10px"> </div> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-09-18T19:35:30.230

```
style="padding-top: 8px" 
```

使用它在您的行中向上或向下移动您的 div。为我创造奇迹。

# asp.net - 在 Asp.net 中使用 Web 身份验证时在 webconfig 文件中写什么

> ID：10615875
> 
> 赞同：0
> 
> 时间：2012-05-16T09:39:05.067
> 
> 标签：asp.net, adam

我有这个问题：

在 Asp.net 中使用 Web 身份验证时，在 webconfig 文件中应该写什么？

我知道如果在 Asp.net 中使用 Web 身份验证不必输入用户 ID 和密码。所以这是 webconfig 文件中的原始编码：

> add name="HibahTotalConnectionString" connectionString="Data Source=HTP7526\SQLEXPRESS_2;Initial Catalog=HIBAHV4;Persist Security Info=True; User ID=sa;Password=uts" providerName="System.Data.SqlClient"/>

而且，我已经用这个替换了用户`ID=sa;Password=uts`部分，`Integrated Security=SSPI`但它不起作用。当我运行我的网页时，它说`cannot connect to database`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:57:29.387

设置`Integrated Security=SSPI`意味着您的 Web 应用程序将尝试使用运行 Web 应用程序的 Windows 帐户连接到数据库。假设您在 IIS 中运行此应用程序，默认情况下这将是本地系统的 IIS 用户帐户。

您可以确保本地 IIS 用户有权访问数据库，但如果数据库位于不同的计算机上，这可能不起作用。可能更好的解决方案是将应用程序池配置为作为有权访问数据库的不同 Windows（域）用户运行。

# javascript - 客户端模板、服务器端模板还是客户端的原始克隆和编辑存根 DOM 元素？

> ID：10615879
> 
> 赞同：0
> 
> 时间：2012-05-16T09:39:26.500
> 
> 标签：javascript, jquery

有一个页面显示对象列表（例如书籍）。此列表可以通过客户端交互以编程方式增加。哪个是在 DOM 中创建新“书籍”的好方法？

我想在 DOM 中创建一个不可见的对象存根，然后克隆它 n 次，每次编辑属性（例如书名和拇指）。

哪个是最佳实践？

性能不是主要关注点。代码可操作性和简单性是我的重点。我已经使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:42:10.080

避免“克隆”并使用像[Mustache](http://mustache.github.com/)或[Handlebars](http://handlebarsjs.com/)这样的客户端模板解决方案。加载您的模板（通过 AJAX 等预加载在变量中），缓存它们（在对象、数组、变量等中）以供重用，然后通过 jQuery 构建它们：

```
//the data
var data = {
    text : 'foo'
}

//HTML template string
var templateString = '<div><span>{{text}}</span></div>';

//render contents to template
var templateWithData = Mustache.render(templateString,data);

//build using jQuery
//should now be a div that has a span that contains foo
var newElement = $(templateWithData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:42:19.740

您可能想要使用模板引擎。我个人最喜欢的是[icanhaz.js](http://icanhazjs.com/)，但还有很多其他可用的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T23:49:11.350

你最好使用数据绑定框架/引擎而不是模板引擎。

数据绑定框架，如[knockoutjs](http://knockoutjs.com)

```
//View (Template)
<form data-bind="submit: addItem">
New item:
<input data-bind='value: itemToAdd, valueUpdate: "afterkeydown"' />
  <button type="submit" data-bind="enable: itemToAdd().length > 0">Add</button>
  <p>Your items:</p>
  <select multiple="multiple" width="50" data-bind="options: items"> </select>
</form>

// ViewModel - Here's my data model
var SimpleListModel = function(items) {
    this.items = ko.observableArray(items);
    this.itemToAdd = ko.observable("");
    this.addItem = function() {
        if (this.itemToAdd() != "") {
            this.items.push(this.itemToAdd()); // Adds the item. Writing to the "items" observableArray causes any associated UI to update.
            this.itemToAdd(""); // Clears the text box, because it's bound to the "itemToAdd" observable
        }
    }.bind(this);  // Ensure that "this" is always this view model
};

ko.applyBindings(new SimpleListModel(["Alpha", "Beta", "Gamma"])); 
```

[在 jsFiddle 中尝试](http://jsfiddle.net/rniemeyer/LkqTU/)

# python - 如何通过tipfy保存和检索cookie

> ID：10615888
> 
> 赞同：1
> 
> 时间：2012-05-16T09:39:50.833
> 
> 标签：python, google-app-engine, tipfy

嗨，我想将一个对象作为安全 cookie 存储在tipfy 中，并希望从tipfy 中检索该对象。这个怎么做？

这就是我这样做的原因。此代码段位于从请求处理程序扩展的处理程序内

```
 class UserLogin(RequestHandler, Jinja2Mixin):
        do_post(self):
          user_cookie = Cookie.SimpleCookie()
          user_cookie['current_user'] = pickle.dumps(profile_user)
          user_cookie['current_user']['max-age'] = 60 * 60 * 24 * 365
          logging.info(user_cookie['current_user']) 
```

我不知道如何保存文档 werkzeug.contrib.securecookie.SecureCookie.save_cookie 中提到的 cookie：

# delphi - 在运行时更改 dbgrid 选项

> ID：10615889
> 
> 赞同：3
> 
> 时间：2012-05-16T09:39:52.503
> 
> 标签：delphi, delphi-xe2, dbgrid

我想更改 DBGrid.Option。我找到了以下代码：

```
DBGrid.Options:=DBGrid.Options + [dgEditing];
DBGrid.Options:=[dgEditing]; 
```

但不能正常工作并报错[dgEditing]。我想启用或禁用 [​​dgEditing],[dgRowSelect] 模式。

非常感谢，非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T09:51:03.357

使用集合类型时，您可以这样做：

```
DBGrid.Options := DBGrid.Options + [dgEditing];  // Adds dbEditing option

DBGrid.Options := DBGrid.Options - [dgEditing];  // Removes dbEditing option 
```

一次更改多个选项：

```
DBGrid.Options := DBGrid.Options + [dgEditing,dgRowSelect]; 
DBGrid.Options := DBGrid.Options + [dgEditing] + [dgRowSelect]; // Same as above 
```

# php - MySQL 基础架构和 PHP $_SESSION 处理

> ID：10615894
> 
> 赞同：0
> 
> 时间：2012-05-16T09:40:04.767
> 
> 标签：php, mysql, session, foreign-key-relationship

我正在使用 PHP 5+ 和 MySQL 5+

我将很快开始为客户构建一个 Web 应用程序，但在开始之前，我想问一些关于基础设施的问题......

我正在为希望跟踪客户数据的 HR（人力资源）公司构建此 Web 应用程序。它将有人力资源（人民）、客户、联系人等表格，这些表格将通过关系相互链接。例如，应用程序的管理员会说 John 将在 X 时间段之间在客户 Doe 处。

没有什么特别的，但这里是我需要你帮助我思考的部分：

我正在为其执行此操作的客户在不同地区（城市）设有分支机构，每个办公室都有一些管理员，他们将在我的应用程序中工作，只使用“他们的”客户数据。并且会有人使用多个领域的数据。

因此，在成功登录后，他们应该只看到来自他们所连接的 city_id 的数据。

我可以通过将“city_id”列添加到我的所有表中，然后在登录表单中开始一个，然后像 我猜`$_SESSION['city_id']` 的那样编写我的 MySQL 查询 来做到这一点。`"SELECT * FROM company WHERE city_id={$_SESSION['city_id']}`

但我希望它简单灵活，超级管理员应该能够添加新城市，并将其链接到新客户。

我应该如何构建我的数据库结构？我应该如何让超级管理员能够创建新城市并将其动态链接到其他表？

我正在考虑使用 X + 2 结构，例如 X 可以是表 Customer，另外两个是 City_list 和 City_handler。City_list 将包含所有可用的城市，City_handler 将存储与哪个城市相关联的谁和什么。这是一个坏主意吗？

如果我有一个看起来像这样的数据库结构，那么在实践中应该如何实现：

**客户**
customer_id
customer_name

**City_list**
city_id
city_name

**City_handler**
customer_id
city_id

如果您能帮我将这些与 FK 联系起来（我猜？）并告诉我一些如何工作以及可能出现的问题，我将非常感激，因为这将是一个围绕整个解决方案的核心功能，帮助我开始！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:07:25.493

**用户**

编号 | 姓名

**城市**

编号 | 姓名

**users_to_citys**

用户 ID | city_id

每个用户可以服务任意数量的城市，城市数量可以轻松更改。

现在您只需为每个对象指定城市并检查用户是否有权管理它们。

一些代码：

```
$res = mysql_query("SELECT city_id FROM users_to_citys WHERE user_id = ". (int)$uid);
while($array = mysql_fetch_assoc($res)) {
    $citys[] = $array['city_id'];
}
$_SESSION['citys'] = $citys;
$_SESSION['citys_syfix'] = ' AND city_id IN('. implode(',',$citys) .') '; 
```

# c# - 将字节值的字符串数组转换为字节数组

> ID：10615895
> 
> 赞同：0
> 
> 时间：2012-05-16T09:40:08.740
> 
> 标签：c#, bytearray, arrays

我在表单上有一个文本框，其中一个人以如下所示的格式输入字节数组。

我的问题是如何将生成的字符串数组转换为具有相同值的字节数组？

所以这将被输入到文本框中：

```
0x11, 0x01, 0x49, 0x4D, 0x41, 0x47, 0x45, 0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x53, 0x75, 0x6D, 0x6D, 0x61, 0x72, 0x79, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
```

然后以下代码将其拆分并将其转换为字节数组

```
string text = txtChecksumText.Text;
        string[] parts = text.Split(new string[] { ", " }, StringSplitOptions.None);
        byte[] bytes = new byte[parts.Length];

        for (int i = 0; i < parts.Length; i++)
        {
            bytes[i] = Convert.ToByte(parts[i], 16); // this isn't working as expected
            txtResponse.Text += Environment.NewLine + "     " + i + " = " + parts[i] + " = " + bytes[i].ToString() ;
        } 
```

以及显示它不起作用的响应

```
 0 = 0x11 = 17
 1 = 0x01 = 1
 2 = 0x49 = 73
 3 = 0x4D = 77
 4 = 0x41 = 65
 5 = 0x47 = 71
 6 = 0x45 = 69
 7 = 0x31 = 49
 8 = 0x00 = 0
 9 = 0x00 = 0
 10 = 0x00 = 0
 11 = 0x00 = 0
 12 = 0x00 = 0
 13 = 0x00 = 0
 14 = 0x00 = 0
 15 = 0x00 = 0
 16 = 0x00 = 0
 17 = 0x00 = 0
 18 = 0x00 = 0
 19 = 0x00 = 0
 20 = 0x00 = 0
 21 = 0x00 = 0
 22 = 0x00 = 0
 23 = 0x01 = 1
 24 = 0x53 = 83
 25 = 0x75 = 117
 26 = 0x6D = 109
 27 = 0x6D = 109
 28 = 0x61 = 97
 29 = 0x72 = 114
 30 = 0x79 = 121
 31 = 0x00 = 0
 32 = 0x00 = 0
 33 = 0x00 = 0
 34 = 0x00 = 0
 35 = 0x00 = 0
 36 = 0x00 = 0
 37 = 0x00 = 0
 38 = 0x00 = 0
 39 = 0x00 = 0
 40 = 0x00 = 0
 41 = 0x00 = 0
 42 = 0x00 = 0
 43 = 0x00 = 0
 44 = 0x00 = 0
 45 = 0x00 = 0
 46 = 0x00 = 0
 47 = 0x00 = 0
 48 = 0x00 = 0
 49 = 0x00 = 0
 50 = 0x00 = 0
 51 = 0x00 = 0
 52 = 0x00 = 0
 53 = 0x00 = 0
 54 = 0x00 = 0
 55 = 0x00 = 0 
```

为了清楚起见，0x11 应该作为字节 11 而不是字节 17 返回，与所有其他人一样我不想转换为十进制我试图将文字字节字符串转换为字节数组以进行检查-总和创造

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:58:13.210

你得到的字节只是字节；它们本质上不是十进制或十六进制。

如果您想将字节传递给其他东西（用于校验和），它们很好。

您唯一的问题是您以十进制形式将它们写入控制台 -`ToString("x")`如果您出于任何原因希望以十六进制形式将它们写出，请使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-22T07:52:49.733

请执行以下操作：

```
txtHexString.Text="0x11, 0x01, 0x49, 0x4D, 0x41, 0x47, 0x45, 0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x53, 0x75, 0x6D, 0x6D, 0x61, 0x72, 0x79, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00";

string[] namesArray =  txtHexString.Text.Split(',');
byte[] abc= new byte [namesArray.Length];

for (int i = 0; i <= namesArray.Length - 1; i = i + 1)
        {
            abc[i] = Convert.ToByte(namesArray[i].Replace(" ", ""), 16);
        } 
```

这里， abc 是所需的字节数组。现在用 abc 做任何你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:53:18.753

您的代码正在运行。检查此以观察不同的转换并选择您需要的任何内容：

```
MessageBox.Show(11.ToString());
MessageBox.Show(11.ToString("x"));
MessageBox.Show(0x11.ToString());
MessageBox.Show(0x11.ToString("x"));
MessageBox.Show(BitConverter.ToString(new byte[] { 11, 0x11, 16 })); 
```

# .net - 使用协议缓冲区 (.NET) 序列化哈希表

> ID：10615896
> 
> 赞同：1
> 
> 时间：2012-05-16T09:40:13.533
> 
> 标签：.net, protocol-buffers, protobuf-net

我正在尝试使用 protobuf-net v2 序列化/反序列化包含哈希表属性的自定义类。

```
 [ProtoContract]
    public class MyClass
    {
        [ProtoMember(1)]
        public Hashtable MyHashTable { get; set; }
   } 
```

当我调用 Serializer.Serialize(...) 时出现异常： *No serializer defined for type: System.Collections.Hashtable*

我尝试修改：

```
 [ProtoContract]
    public class MyClass
    {
        [ProtoMember(1, DynamicType = true)]
        public Hashtable MyHashTable { get; set; }
   } 
```

但我有另一个例外： *类型不是预期的，并且无法推断出任何合同：System.Collections.DictionaryEntry*

也许有人知道我如何序列化哈希表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:00:40.063

感谢所有帮助过我的人。这是我的解决方案。我知道这不是最好的方法，但也许有人可以接受。

```
 [ProtoContract]
    public class HashtableTestClass
    {
        private string inputParametersBase64 = string.Empty;
        private Hashtable myHashTable;

        public Hashtable MyHashtable
        {
            get { return myHashTable; }
            set { myHashTable = value; }
        }

        [ProtoMember(1)]
        public string InputParametersBase64
        {
            get
            {
                if (myHashTable == null)
                    return string.Empty;

                return HashtableToBase64(myHashTable);
            }
            set
            {
                inputParametersBase64 = value;
                if (!string.IsNullOrEmpty(inputParametersBase64))
                {
                    try
                    {
                        myHashTable = Base64ToHashtable(inputParametersBase64);
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e);
                    }
                }
            }
        }

        public static Hashtable Base64ToHashtable(string s)
        {
            MemoryStream stream = new MemoryStream(Convert.FromBase64String(s), false);
            IFormatter formatter = new BinaryFormatter();

            return (Hashtable)formatter.Deserialize(stream);
        }

        public static string HashtableToBase64(Hashtable hashtable)
        {
            IFormatter formatter = new BinaryFormatter();
            MemoryStream stream = new MemoryStream();
            formatter.Serialize(stream, hashtable);
            stream.Close();
            return Convert.ToBase64String(stream.ToArray());
        }
    } 
```

# sql - 第三个表中的一对零或多个关联和 FK 使用情况

> ID：10615897
> 
> 赞同：1
> 
> 时间：2012-05-16T09:40:19.820
> 
> 标签：sql, database-design

我有两张桌子 - 第一张是地方，第二张是位置。地点可以有零个或多个位置。Place PK 是 id，location PK 是两个组件键 place_id + id。

![在此处输入图像描述](../Images/c5b6ed652ecf70f928323d999361ea56.png)

在第三张桌子（例如发票）中，我可以找到没有任何位置的地方。

问题是：如何在发票表中设置FK？

1.  我不能只使用 place.id 作为 FK，因为我想知道位置。
2.  如果我使用由 place_id + id 列组成的位置 PK - 那么与表位置的关系不一致 - 某些地方可以有 0 位置。

因此，主要问题是某些地方可以有 0 个位置。

是的，我可能会在位置表中设置代理 PK，并将 place_id FK、location_id FK 设置为 NULL。但是，要求是位置和位置键是自然的（基于公司组织结构）。第二个想法是进行一对一/多关联，并将位置 id 值 0 用于具有零位置的位置，并在用户界面中隐藏该位置。实际上，然后我需要为每个地方放置位置 0（无位置）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:46:33.993

您应该能够简单地将这两个 FK“合并”在一起：

![在此处输入图像描述](../Images/e68b057179411a1a631664db365710d3.png)

```
CREATE TABLE invoice (
    id INT PRIMARY KEY,
    place_id INT NOT NULL,
    location_id INT NULL,
    FOREIGN KEY (place_id) REFERENCES place (id),
    FOREIGN KEY (place_id, location_id) REFERENCES location (place_id, id)
); 
```

DBMS 将忽略具有至少一个 NULL 的 FK：

*   `place_id`不是 NULL，因此第一个 FK 将始终有效。
*   如果`location_id`为 NULL，则将忽略第二个 FK。

您可以在这个[SQL Fiddle](http://sqlfiddle.com/#!4/36e4c/6)中使用它。

*（事实上​​，自然键的存在使您能够做到这一点 - 如果`location`有一个代理键，您不能保证两个 FK 指向同一个`place`。）*

* * *

在不太可能的情况下，您的 DBMS 会以一种有趣的方式处理 NULL，因此不会忽略带有 NULL 的 FK，您可以将这两个 FK 完全分开，并使用 CHECK 确保它们属于同一位置：

```
CREATE TABLE invoice (
    id INT PRIMARY KEY,
    place_id INT NOT NULL,
    location_place_id INT NULL,
    location_id INT NULL,
    FOREIGN KEY (place_id) REFERENCES place (id),
    FOREIGN KEY (location_place_id, location_id) REFERENCES location (place_id, id),
    CHECK (place_id = location_place_id)
); 
```

# python - 使用 PIL 修剪空格

> ID：10615901
> 
> 赞同：61
> 
> 时间：2012-05-16T09:40:39.753
> 
> 标签：python, imagemagick, python-imaging-library

是否有一个简单的解决方案来修剪 PIL 中图像上的空白？

ImageMagick 通过以下方式轻松支持它：

```
convert test.jpeg -fuzz 7% -trim test_trimmed.jpeg 
```

我找到了 PIL 的解决方案：

```
from PIL import Image, ImageChops

def trim(im, border):
    bg = Image.new(im.mode, im.size, border)
    diff = ImageChops.difference(im, bg)
    bbox = diff.getbbox()
    if bbox:
        return im.crop(bbox) 
```

但这种解决方案有缺点：

1.  我需要定义`border`颜色，这对我来说没什么大不了的，我的图像有白色背景
2.  最不利的是，这个 PIL 解决方案不支持 ImageMagick 的`-fuzz`密钥。添加一些模糊裁剪。因为我可以有一些 jpeg 压缩伪影和不需要的巨大阴影。

也许 PIL 有一些内置功能？还是有一些快速的解决方案？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-16T10:32:13.300

我不认为 PIL 内置任何东西可以做到这一点。但我已经修改了你的代码，所以它会这样做。

*   它使用 获取左上角像素的边框颜色`getpixel`，因此您无需传递颜色。
*   从差异图像中减去一个标量，这是一种将（在我的示例中）下的所有值饱和`100, 100, 100`为零的快速方法。因此，这是一种消除压缩导致的任何“摆动”的巧妙方法。

代码：

```
from PIL import Image, ImageChops

def trim(im):
    bg = Image.new(im.mode, im.size, im.getpixel((0,0)))
    diff = ImageChops.difference(im, bg)
    diff = ImageChops.add(diff, diff, 2.0, -100)
    bbox = diff.getbbox()
    if bbox:
        return im.crop(bbox)

im = Image.open("bord3.jpg")
im = trim(im)
im.show() 
```

高度压缩的jpeg：

![在此处输入图像描述](../Images/6dc606682d54fe8281ddfaf1999b149f.png) 裁剪： ![在此处输入图像描述](../Images/8f1d1e955072667247e9b86a7884c7be.png)

嘈杂的jpeg：

![在此处输入图像描述](../Images/4e087b7adb3c334291ffd06799c43a95.png) 裁剪：![在此处输入图像描述](../Images/3fc31148e81c77e3511bffd133aa50a5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-13T01:26:57.300

使用魔杖[http://docs.wand-py.org/en/0.3-maintenance/wand/image.html](http://docs.wand-py.org/en/0.3-maintenance/wand/image.html)

trim(color=None, fuzz=0) 从图像中删除实心边框。默认情况下使用左上角像素作为指导，或者您也可以指定要删除的颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-22T07:38:48.613

在 ufp.image 模块中使用修剪功能。

```
import ufp.image
import PIL
im = PIL.Image.open('test.jpg', 'r')
trimed = ufp.image.trim(im, fuzz=13.3)
trimed.save('trimed.jpg') 
```

# iphone - 自定义标签栏 iOS - 3 个按钮

> ID：10615902
> 
> 赞同：2
> 
> 时间：2012-05-16T09:40:42.517
> 
> 标签：iphone, xcode, ios5, custom-controls, uitabbar

我想创建一个只有 3 个按钮的自定义标签栏设计。尝试拆分图像以适合 iPhone 屏幕时出现问题。宽度为 320 时，您需要 2 个选项卡的宽度为 106，第 3 个选项卡的宽度为 108。当我以正确的尺寸创建图像时，它们不适合，我最终在右侧下方有一条 1px 的线，例如这个：

![在此处输入图像描述](../Images/359077e180bc94cb5ca213ab9bb0dd48.png)

这是我正在使用的代码：

```
UIImage *selectedImage0 = [UIImage imageNamed:@"tb_1_down.png"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"tb_1_up.png"];

UIImage *selectedImage1 = [UIImage imageNamed:@"tb_2_down.png"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"tb_2_up.png"];

UIImage *selectedImage2 = [UIImage imageNamed:@"tb_3_down.png"];
UIImage *unselectedImage2 = [UIImage imageNamed:@"tb_3_up.png"];

UITabBar *tabBar = self.tabBarController.tabBar;
UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
UITabBarItem *item2 = [tabBar.items objectAtIndex:2];

self.tabBarController.tabBar.frame = CGRectMake(0, 430, 320, 50);

[self.tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tb_tabBar_BG.png"]];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
[item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2]; 
```

有什么方法可以使“item1”的宽度为 108 而不是 106？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:22:53.723

这可能会给你你想要的： [为标签栏设置背景图像](https://stackoverflow.com/questions/8909379/setting-a-background-image-for-a-tabbar)

这具有制作完全自定义标签栏按钮的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:47:40.647

我担心您可能正在查看 UITabBar/UITabBarController 的 100% 自定义实现 - 我不知道有任何方法可以在这种程度上自定义库存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:46:25.987

我设法通过继承 UITabBarController 来解决这个问题，并按照@human 的建议使用 UIImageViews 而不是 UIButtons，因为我无法摆脱更改按钮图像的不合理方式，无论您是否设置图像，它都会闪烁和突出显示或不。

我的代码可以在此处的答案中找到：[UITabBar 自定义未按预期工作](https://stackoverflow.com/questions/14130794/uitabbar-customisation-not-working-as-expected)

# ios - 如何让用户更改 iPhone 应用主题？

> ID：10615907
> 
> 赞同：0
> 
> 时间：2012-05-16T09:41:00.260
> 
> 标签：ios, core-data, nspredicate, lookup

我有`Article`和`Category`实体具有多对多关系。`Category`有 a`name`和 a `imagePath`（保留其名称和该类别图标图像的路径）。

使用这个模型，我可以显示文章所属的类别名称（和类别的图像）。

**问题**

如果我想让用户更改类别图像（例如使用新图标包更改主题）我应该怎么做？

我现在在想的是创建单独的实体，`ThemeItem`称为`categoryId``imagePath``Category``ThemeItem`

```
Article <<------------>> Category  
- text                   - categoryId
                         - name
- categories(Relation)   - articles(Relation 
```

和

```
Theme   <-->> ThemeItem
-themeId      -categoryId
-themeName    -imagePath
              -theme(Relation) 
```

使用这种方法，我将继续让用户通过设置界面选择主题并`themeId`保持`NSUserDefaults`

有什么我应该关心的，或者有更好的方法来做这种事情吗？

**检索图像**

有了新模型，我只是从那里得到`categoryId`的`Category`，所以我必须抬头`ThemeItem`才能得到`imagePath`。这是`NSPredicate`我想到的一些

```
NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"ThemeItem" inManagedObjectContext:moc];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"categoryId == %@ AND theme.themeId = %@", category_id_for_article, theme_id_from_user_defaults];
[request setPredicate:predicate]; 
```

有了这个谓词，我得到了`ThemeItem`它`imagePath`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:50:38.127

如果我理解您的问题，您需要获取`ThemeItem`属于特定主题（在用户设置中选择的主题）和当前`Category`. 这样对吗？

如果是这样，那么您就在正确的轨道上。您正在执行的查询没问题。

现在，在我看来，如果你删除 a`Theme`和它的`ThemeItem`. 在这种情况下，您可以拥有一个`Category`未“链接”到任何`ThemeItem`. 换句话说，为此`Category`你没有`ThemeItem`.

在这里你有两个选择。

1）手动删除`Categorie`不再与a链接的s`ThemeItem`

`ThemeItem`2）或在和`Category`（您不再需要a ）之间创建关系（我想是一对多`categoryId`）。From`ThemeItem`使用`Category`Cascade Rule 并使用 Nullify 作为逆。当您删除时，也`ThemeItem`将`Category`被删除。由于级联规则如果管理不当是危险的（它们可以删除整个数据库），您需要测试它们的行为方式。

希望能帮助到你。

**编辑**

如果需要，您可以在`ThemeItem`和之间创建关系`Category`。例如调用它`categories`：

您的模型可能如下所示：

```
ThemeItem                   Category
- categories (rel)  <-->>   - themeItem (inverse rel) 
```

关系是与级联规则`categories`的一对多关系。与无效规则是一对一的反比关系。`Category``themeItem``ThemeItem`

当你删除一个`ThemeItem`对象时，`Categorie`s 对象也会被删除。相反，当您删除 a 时`Category`，`ThemeItem`对象（与 that 链接的对象`Category`）会删除其子项的特定`Category`表单。

通过这种方式，您可以避免在模型中维护图形完整性。

显然，在这种情况下，这些新关系可以应用于您的模型：

*   用户删除 a`ThemeItem`并且您想删除`Category`与它链接的 s
*   a`Category`属于特定的`ThemeItem`；换句话说，每一个`Category`都包含在一个特定的`ThemeItem`

我建议您阅读有关[Core Data Programming Guide 的关系](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)。

注意：没有创建模型的正确方法。在我看来，处理 Core Data 时最重要的主要方面是性能。当你使用 Core Data 时，你处理的是对象而不是行数据。说这个，让你的模型适应这个方面。

我希望这个答案能让您决定适合您问题的正确模型。干杯。

# vim - 自动格式化时如何使vim不中断字符串？

> ID：10615908
> 
> 赞同：3
> 
> 时间：2012-05-16T09:41:09.213
> 
> 标签：vim, autoformatting

我有一个字符串值列表，我想自动格式化，但如果里面有空格，vim 会破坏字符串。

这可以以某种方式解决吗？

例子

```
 "sdasda", "asdasdasd", "afasfasf", "asdasda asdasd", "asdasd" 
```

变成

```
 "sdasda", "asdasdasd", "afasfasf", "asdasda
    asdasd", "asdasd" 
```

但我想要

```
 "sdasda", "asdasdasd", "afasfasf",
    "asdasda asdasd", "asdasd" 
```

额外奖励：如果它支持不同的字符串格式（Python、“。”和“”），那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:23:43.360

这可以通过自定义来实现`'formatexpr'`（检查光标前未闭合的字符串引号，然后从该位置而不是插入位置执行重新格式化）。

但是，在我多年使用 Vim 的过程中，我没有看到任何自定义`'formatexp'`，所以除非这里或 vim_use [archives] 上出现某些内容，否则您可能必须自己实现这样的事情（如果您也想这样做，这并不重要）支持通过 重新格式化`gq`，并且需要对 Vimscript 有一定的了解）。

# python - python：导入 scipy.io 似乎会阻止 sys.exit() 正常工作

> ID：10615917
> 
> 赞同：2
> 
> 时间：2012-05-16T09:42:09.137
> 
> 标签：python, import

在 Windows 下，执行以下 Python 脚本时，我得到的 ERRORLEVEL 为 0，而不是预期的 2。

```
import sys
import scipy.io

sys.exit(2) 
```

如果我删除 import scipy.io，我得到了正确的 ERRORLEVEL 2 ...

知道为什么导入 scipy.io 会导致这样的问题吗？

PS：Windows 7，python 2.72，scipy 0.10.1

在 sys.exit 调用之前调用 help(sys.exit) 会返回以下内容（这似乎很好）：

```
Help on built-in function exit in module sys: 

exit(...) 
    exit([status]) 

    Exit the interpreter by raising SystemExit(status). 
    If the status is omitted or None, it defaults to zero (i.e., success). 
    If the status is numeric, it will be used as the system exit status. 
    If it is another kind of object, it will be printed and the system 
    exit status will be one (i.e., failure). 
```

如果我打电话

```
sys.exit('Something wrong') 
```

字符串已打印，但系统仍将 0 作为 ERRORLEVEL 返回，而不是预期的 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:29:45.427

这似乎是由于 SciPy 中的一个错误。以下是一些相关的门票（只有第一个仍然开放）：

*   [http://projects.scipy.org/scipy/ticket/1314](http://projects.scipy.org/scipy/ticket/1314)
*   [http://projects.scipy.org/scipy/ticket/1521](http://projects.scipy.org/scipy/ticket/1521)
*   [http://projects.scipy.org/scipy/ticket/1485](http://projects.scipy.org/scipy/ticket/1485)

一个奇怪的观察是

> 导入编织时该错误消失。

也许尝试导入`scipy.weave`以查看此解决方法是否有帮助？

# java - 在Java中传递对对象的引用还是传递对象中的单个属性更好？

> ID：10615924
> 
> 赞同：18
> 
> 时间：2012-05-16T09:42:22.427
> 
> 标签：java, parameters

我正在处理遗留代码，我经常看到来自同一个对象的多个属性的方法调用被传递到一个方法中：

```
update(user.getID(), user.getLanguage() etc...) 
```

这样做是否有明显的优势或劣势，或者我是否也可以传入用户对象（在这种情况下）并处理调用方法中的属性？

**跟进：**

很多优秀的答案，谢谢。为问题中缺乏确切的细节而道歉，但正如我所说，这在我正在处理的整个系统中都可以看到，这似乎是一个很好的简单示例。请随意将这个问题变成一个社区 wiki 问题，因为没有一个答案可以被其他人接受，因为它们都很好并且有有效的观点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T10:10:13.247

两者都有自己的优势。我会根据它应该做什么来决定每种方法。但是，对于遗留代码，除非确实存在问题，否则我宁愿不更改任何内容。

pro几个值，con对象引用：

*   你没有绑定到特定的类，你可以从其他来源传递值
*   方法不能（出乎意料地）改变对象状态（C++ 可以为此使用“const”）

Pro 传递单个用户对象：

*   您被绑定到用户对象，因此很难意外传递不相关/无效的值
*   很明显，该方法需要用户对象的数据
*   更改（例如重命名）getter 需要在方法的所有调用中进行更改，而不仅仅是在其实现中
*   如果添加了新属性并且需要传递，则类似
*   方法可以改变对象状态

如您所见，根据您的需要，可以将房产视为优势或劣势。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-16T09:46:39.053

事实上，传递对对象的引用会**好得多**，原因有二：

*   它避免在调用该方法的每个地方重复所有 getter（DRY 原则）
*   它导致更短的方法签名。方法几乎不应该有超过三个参数，因为它很容易混淆顺序，并且很难重构。

为避免参数列表过长，建议的重构是创建一个包含所有数据的对象——你不是很幸运，你已经有了这样一个对象吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-16T09:53:38.750

这取决于您是否会接受调用方法对对象类的依赖。

当使用这个

```
update(user) 
```

声明更新的类必须知道用户的类。

如果你使用这个

```
update(user.getID(), user.getLanguage() etc...) 
```

并且成员是原语或属于 Java 标准库，而不是 update() 对用户类没有进一步的依赖关系......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-16T14:00:40.967

这是一种代码异味，让我考虑将 update() 方法移至用户类。面向对象设计的一大原则是[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)——将您的数据和对这些数据的操作捆绑在一起。

然后你就有了[告诉，不要问](http://pragprog.com/articles/tell-dont-ask)的原则。告诉一个对象做某事比向它询问信息要好。

> 程序代码获取信息然后做出决定。面向对象的代码告诉对象做事。

当然我没有足够的细节说你绝对应该做这样的事情，但这是需要考虑的事情。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-16T09:46:27.913

1.  看起来很奇怪
2.  这意味着方法签名看起来像`update(String, String, String...)`这样引入了以错误顺序传递参数的风险
3.  如果您需要在某个阶段在更新方法中考虑新属性，则无需更改方法的签名，只需更改其实现即可。
4.  我不知道有什么`update`作用，但将其作为用户类的一部分可能是有意义的：`user.update(additionalInformation)`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-16T09:47:31.340

根据我的经验，我认为这取决于方法应该做什么，如果它严格链接到包含所有参数的对象，最好传递对象，例如在执行更新或保存的 DAO 对象中最好传递Domain对象，否则如果方法更通用，并且有可能所有参数不是来自同一个对象，最好将参数传递给方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-16T09:53:30.027

考虑到您正在处理遗留代码，您需要确保更改方法

签名不会破坏任何可能调用它的代码。如果您可以完全控制调用这些方法的代码库，那么您可以通过传入`user`对象来简化代码。

您还应该考虑用户对象是否是“重量级”对象，每次调用这些方法时都会加载可能浪费创建的附加数据。`user`这将是您不能将对象作为参数传递的原因之一。同样的道理也适用于延迟加载的对象。

不传递整个对象的另一个可能原因可能是您不希望它被该方法更新，并且由于“某种原因”不能使其成为不可变的。可以使用户对象的 getter 方法返回值的“安全防御副本”。有关这种在多线程应用程序中特别有用的编码实践，请参阅 Joshua Bloch 的有效 java。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-16T09:46:19.790

很难说从代码片段中更新的方法是什么。但是如果你传入用户对象，你将把用户对象耦合到方法中。如果您只是传入字符串、整数等，则可以将该方法与用户以外的源一起使用。我的建议是，你不应该强迫方法比它需要的更具体。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-16T10:07:51.453

*将一个*对象的属性作为单独的参数传递给方法没有任何好处。它的缺点是代码变得难以阅读和维护。争论越少越好。如果您可以将参数组合在一个对象中，那就去做吧。

如果您想重构它，有一种重构技术，称为[Preserve Whole Object](http://martinfowler.com/refactoring/catalog/preserveWholeObject.html)。您可能还会发现我对类似主题的[回答](https://stackoverflow.com/a/10489252/1333481)很有用。

# c# - 如何在下拉列表中获取所选项目的值？

> ID：10615926
> 
> 赞同：0
> 
> 时间：2012-05-16T09:42:36.630
> 
> 标签：c#, asp.net, data-binding, drop-down-menu, selecteditem

我有一个从数据库填充的下拉列表。当我使用 dplTags.SelectedItem.Value**它只返回第一个值而不是我选择的那个？**

有人可以告诉我我哪里出错了吗？

当我调用它时：

```
String TagID = dplTags.SelectedItem.Value; // Will only select the first value???? 
```

它总是返回第一项的 TagID，而不是选定的：\

这就是我绑定它的方式：

```
using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
            {
                conn.Open();

                SqlDataAdapter daTags
                = new SqlDataAdapter("Select * From Tag", conn);

                DataSet dsTags = new DataSet("TagCloud");

                daTags.FillSchema(dsTags, SchemaType.Source, "Tag");
                daTags.Fill(dsTags, "Tag");

                daTags.MissingSchemaAction = MissingSchemaAction.AddWithKey;
                daTags.Fill(dsTags, "Tag");

                DataTable tblTag;
                tblTag = dsTags.Tables["Tag"];

                dplTags.DataSource = dsTags;
                dplTags.DataMember = "Tag"; 
                dplTags.DataValueField = "TagID"; //Value Member
                dplTags.DataTextField = "Value"; // Display Member
                dplTags.DataBind();
            } 
```

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:52:02.610

您在哪里将数据绑定到这些下拉列表控件？它们应该只在页面的初始加载时绑定，如下所示。我怀疑您在每次页面加载时都绑定了它们，因此选定的值会消失。

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!Page.IsPostBack)
    {
        //Please check if you are binding checkbox controls here. 
        //If not bring them in here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:50:25.023

仅在 Page.IsPostback == false 时保持页面的视图状态启用并数据绑定下拉列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:55:16.457

在第一页加载时绑定下拉列表一次，不要在回发时再次绑定。再次绑定它将用新元素填充下拉列表，并且先前的选择将丢失。

```
if(!Page.IsPostBack)
{
using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
            {
                conn.Open();

                SqlDataAdapter daTags
                = new SqlDataAdapter("Select * From Tag", conn);

                DataSet dsTags = new DataSet("TagCloud");

                daTags.FillSchema(dsTags, SchemaType.Source, "Tag");
                daTags.Fill(dsTags, "Tag");

                daTags.MissingSchemaAction = MissingSchemaAction.AddWithKey;
                daTags.Fill(dsTags, "Tag");

                DataTable tblTag;
                tblTag = dsTags.Tables["Tag"];

                dplTags.DataSource = dsTags;
                dplTags.DataMember = "Tag"; 
                dplTags.DataValueField = "TagID"; //Value Member
                dplTags.DataTextField = "Value"; // Display Member
                dplTags.DataBind();
            }
} 
```

# html - 如何自动下载可通过 html 表单获得的数据？我应该学习什么？

> ID：10615927
> 
> 赞同：2
> 
> 时间：2012-05-16T09:42:38.713
> 
> 标签：html, http, post, scripting, get

有一个网站，提供我想要获取的数据。但是下载表格允许小部分下载，所以我需要填写它并按“下载”按钮大约 18000 次。在该网站的一个论坛上，管理员说，使用此表单下载数据是获取数据的唯一方法，并且有些人编写脚本来自动化该过程，如果他们不同时启动多个下载，则此类脚本是合格的。我想写这样的脚本，但我不知道从哪里开始，因为我不熟悉网页与服务器的交互。

我有一些编写 C/C++ 程序的经验，并且我知道一些 bash 脚本。我知道 html 的基础知识，但我不太了解 html 表单是如何工作的。我通常在 Ubuntu 中工作，如果需要，我也安装了 Windows 7。

请告诉我，从哪里开始：我可以使用哪些工具以及我应该学习哪些概念来解决这个任务，哪些书籍/教程/文章可能对我在这个方向上的教育有所帮助。

特别是，我知道的语言（C++、bash 脚本）是否适合这种脚本，或者学习其他语言更好？您使用哪些程序来理解，脚本应该向服务器发送什么以及它应该如何接收文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:48:55.997

这种事情称为[网络抓取](http://en.wikipedia.org/wiki/Web_scraping)。有多种方法可以做到这一点。一个名为[curl](http://curl.haxx.se/)的命令行工具允许您以与浏览器相同的方式从网站获取资源。然而，它是可编写脚本的，您可以将参数传递给它以使其像浏览器一样工作。

通常，我会使用 Python 之类的脚本语言来执行此操作，但可以使用 bash 脚本和 curl 来执行此操作，尽管更难。当您单击提交按钮时，您需要弄清楚您向网站提交的确切内容。firefox 插件[firebug](http://getfirebug.com/)可以帮助你解决这个问题，然后使用 curl 做同样的事情。将 curl 调用置于循环中并改变参数以模拟 18000 次点击。

# android - 如何解决android中的fatexception

> ID：10615929
> 
> 赞同：0
> 
> 时间：2012-05-16T09:42:44.573
> 
> 标签：android, android-emulator

在这里，当我单击每个按钮时，我有 50 个按钮，那时我需要在画廊中显示一些图像。它工作正常。但同时我也需要播放与图像相关的声音，那时我得到错误。我运行模拟器的同一个应用程序工作正常。但是在三星galaxy gt-p1010中，当运行应用程序图像滚动时间时，我遇到了错误。在这个gt-1010中，在为每个图像添加音乐之前它的工作良好。但是在添加音乐之后，我面临这个prblm ..请任何人建议我...

```
 logcat error:
         05-16 09:00:53.152: E/AndroidRuntime(12917): FATAL EXCEPTION: main
        05-16 09:00:43.292: E/AndroidRuntime(12799): java.lang.NullPointerException
       05-16 09:00:43.292: E/AndroidRuntime(12799):     at  com.sample2.HomE.onItemSelected(HomE.java:508)
  HomE.class: 
     public class HomE extends Activity implements
    AdapterView.OnItemSelectedListener, ViewSwitcher.ViewFactory{
private TextSwitcher mSwitcher;
private TextSwitcher mSwitcher3;
private TextSwitcher mSwitcher7;
ImageButton home, sound;
Gallery g;
static int nextbtn = 0;
static int prebtn = 0;
ImageAdapter iadapter;
int galpos;
int countk1 = 0;
int countk2;
int countk3 = 0;
int countk4 = 0;
int count111 = 0;
int count111i = 0;
int count111l = 0;
int count111s = 0;
public static int countin,counti,countl,counts;
public static int countin1=0;
public static int countini=0;
public static int countinl=0;
public static int countins=0;
public int ht;
public int wt;
MediaPlayer intro1, intro2, intro3, intro4, intro5, intro6, intro7, intro8,
intro9, intro10, intro11, intro12, intro13;

public static int motiongal = 3000;
RelativeLayout l1, l2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.home1);
    intro1 = MediaPlayer.create(this, R.raw.abcsongnorwegianonlymusic);
    intro2 = MediaPlayer.create(this, R.raw.bokstavslottet_2);
    intro3 = MediaPlayer.create(this, R.raw.bokstavslottet_3);
    intro4 = MediaPlayer.create(this, R.raw.bokstavslottet_4);
    intro5 = MediaPlayer.create(this, R.raw.bokstavslottet_5);
    intro6 = MediaPlayer.create(this, R.raw.bokstavslottet_6);
    intro7 = MediaPlayer.create(this, R.raw.bokstavslottet_7);
    intro8 = MediaPlayer.create(this, R.raw.bokstavslottet_8);
    intro9 = MediaPlayer.create(this, R.raw.bokstavslottet_9);
    intro10 = MediaPlayer.create(this, R.raw.bokstavslottet_10);
    intro11 = MediaPlayer.create(this, R.raw.bokstavslottet_11);
    home = (ImageButton) findViewById(R.id.homeimage);
    home.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Intent i = new Intent(HomE.this, HomeDEmo.class);
            startActivity(i);
            return false;
        }
    });
    sound = (ImageButton) findViewById(R.id.soundimage);
    sound.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return false;
        }
    });
    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    ht = displaymetrics.heightPixels;
    wt = displaymetrics.widthPixels;
    l1 = (RelativeLayout) findViewById(R.id.linear);
    l2 = (RelativeLayout) findViewById(R.id.linear1);
    l1.setVisibility(View.INVISIBLE);
    l2.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            l1.setVisibility(View.VISIBLE);
            final Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
                public void run() {
                    // Do something after 100ms
                    l1.setVisibility(View.INVISIBLE);
                }
            }, 1500);
            return false;
        }
    });
    mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
    mSwitcher.setFactory(this);
    mSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    mSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
    mSwitcher.startLayoutAnimation();
    mSwitcher3 = (TextSwitcher) findViewById(R.id.switcher3);
    mSwitcher3.setFactory(this);
    mSwitcher3.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    mSwitcher3.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
    mSwitcher3.startLayoutAnimation();

    mSwitcher7 = (TextSwitcher) findViewById(R.id.switcher7);
    mSwitcher7.setFactory(this);
    mSwitcher7.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    mSwitcher7.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
    mSwitcher7.startLayoutAnimation();

     countin = getIntent().getIntExtra("a1", 0); 
     counti = getIntent().getIntExtra("i1", 0); 
     countl = getIntent().getIntExtra("l1", 0);
     counts = getIntent().getIntExtra("s1", 0); 
    try {
        g = (Gallery) findViewById(R.id.gallery);
        g.setAdapter(new ImageAdapter(this));
        g.setHorizontalScrollBarEnabled(true);
        Bundle bundle = getIntent().getExtras();
        galpos = bundle.getInt("GALPOS");
        countk1 = getIntent().getIntExtra("k", 0);
        // countk2 = getIntent().getIntExtra("k2", 0);
        // countk3 = getIntent().getIntExtra("k3", 0);
        // countk4 = getIntent().getIntExtra("k4", 0);
        // count = getIntent().getIntExtra("k", 0);
        g.setSelection(galpos);
        g.setAnimationDuration(motiongal);

    } catch (Exception e) {

    }
    g.setOnItemSelectedListener(this);

    ImageButton nextButton = (ImageButton) findViewById(R.id.nextimage);
    nextButton.setOnClickListener(nextButtonOnClick);

    ImageButton preButton = (ImageButton) findViewById(R.id.preimage);
    preButton.setOnClickListener(preButtonOnClick);
     g.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                // Toast.makeText(GalleryActivity.this, "" +
                // mTextNames[position] , Toast.LENGTH_SHORT).show();
                if (countk1 == 0) {
                    // mSwitcher8.setVisibility(View.INVISIBLE);
                    // mSwitcher7.setVisibility(View.INVISIBLE);
                    // mSwitcher6.setVisibility(View.INVISIBLE);
                    // mSwitcher5.setVisibility(View.INVISIBLE);
                    // mSwitcher4.setVisibility(View.INVISIBLE);
                    // mSwitcher3.setVisibility(View.INVISIBLE);
                    // mSwitcher1.setVisibility(View.INVISIBLE);
                    // mSwitcher2.setVisibility(View.INVISIBLE);
                    if (position == 12) {
                        count111 = 111;
                        countin1++;
                        Intent i = new Intent(HomE.this, HomeDEmo.class);
                        i.putExtra("k3", count111);
                        i.putExtra("aa1", countin1);
                        startActivityForResult(i, 0);
                    }
                }

                if (countk1 == 9) {
                    if (position == 12) {
                        count111i=9;
                        countini++;
                        Intent i = new Intent(HomE.this, DrawingScreEn1.class);
                        i.putExtra("i", countini);
                        i.putExtra("k3",count111i);
                        startActivityForResult(i, 0);
                    }
                }

                if (countk1 == 12) {
                    if (position == 13) {
                        count111l=13;
                        countinl++;
                        Intent i = new Intent(HomE.this, DrawingScreEn1.class);
                        i.putExtra("k3",count111l);
                        i.putExtra("l", countinl);
                        startActivityForResult(i, 0);
                    }
                }

                if (countk1 == 19) {
                    // mSwitcher.setVisibility(View.INVISIBLE);
                    // mSwitcher1.setVisibility(View.INVISIBLE);
                    // mSwitcher2.setVisibility(View.INVISIBLE);
                    if (position == 10) {
                        count111s=19;
                        countins++;
                        Intent i = new Intent(HomE.this, DrawingScreEn1.class);
                        i.putExtra("k3", count111s);
                        i.putExtra("s", countins);

                        startActivityForResult(i, 0);
                    }
                }

                l1.setVisibility(View.VISIBLE);
                final Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    public void run() {
                        // Do something after 100ms
                        l1.setVisibility(View.INVISIBLE);
                    }
                }, 1500);
            }
        });
}
public void onItemSelected(AdapterView<?> parent, View v, int position,
        long id) {

    nextbtn = position;

    if (countk1 == 0) {
        mSwitcher.setText(mTextNames[position]);

    }

    if(countk1==9)
    {
        mSwitcher.setText(mTextNames[position]);

    }

if(countk1==12)
    {
        mSwitcher7.setText(mTextNamesfourtin[position]);

    }

    if(countk1==19)
    {
        mSwitcher3.setText(mTextNamesleven[position]);

        if (position == 0) {

            intro1 = MediaPlayer.create(this, R.raw.abcsongnorwegianonlymusic);
            intro1.start();
            intro2.stop();
        }
        if (position == 1) {
            intro1.stop();

            intro2 = MediaPlayer.create(this, R.raw.bokstavslottet_2);
            intro2.start();
            intro3.stop();

        }
        if (position == 2) {
            intro2.stop();

            intro3 = MediaPlayer.create(this, R.raw.bokstavslottet_3);
            intro3.start();
            intro4.stop();
        }
        if (position == 3) {
            intro3.stop();

            intro4 = MediaPlayer.create(this, R.raw.bokstavslottet_4);
            intro4.start();
            intro5.stop();

        }
        if (position == 4) {
            intro4.stop();
            intro5 = MediaPlayer.create(this, R.raw.bokstavslottet_5);
            intro5.start();
            intro6.stop();
        }
        if (position == 5) {
            intro5.stop();
            intro6 = MediaPlayer.create(this, R.raw.bokstavslottet_6);
            intro6.start();
            intro7.stop();
        }
        if (position == 6) {
            intro6.stop();
            intro7 = MediaPlayer.create(this, R.raw.bokstavslottet_7);
            intro7.start();
            intro8.stop();
        }
        if (position == 7) {
            intro7.stop();
            intro8 = MediaPlayer.create(this, R.raw.bokstavslottet_8);
            intro8.start();
            intro9.stop();
        }
        if (position == 8) {
            intro8.stop();
            intro9 = MediaPlayer.create(this, R.raw.bokstavslottet_9);
            intro9.start();
            intro10.stop();
        }
        if (position == 9) {
            intro9.stop();
            intro10 = MediaPlayer.create(this, R.raw.bokstavslottet_10);
            intro10.start();
            intro11.stop();
        }
        if (position == 10) {
            intro10.stop();
            intro11 = MediaPlayer.create(this, R.raw.bokstavslottet_11);
            intro11.start();

        }
    }
}

public OnClickListener nextButtonOnClick = new OnClickListener() {
    public void onClick(View v) {
        if ( countk1 == 9 && countk1 == 13
                ) {
            if (nextbtn < (mTextNames.length - 1)) {
                try {
                    mSwitcher.setText(mTextNames[nextbtn + 1]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(nextbtn + 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);

                } catch (Exception e) {
                }

            } else {
                try {
                    mSwitcher.setText(mTextNames[0]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(0);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                } catch (Exception e) {
                }
            }
        }

        if (countk1 == 12
                ) {
            if (nextbtn < (mTextNamesfourtin.length - 1)) {
                try {
                    mSwitcher7.setText(mTextNamesfourtin[nextbtn + 1]);
                    mSwitcher7.startLayoutAnimation();
                    mSwitcher7.getDrawingTime();
                    g.setSelection(nextbtn + 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);

                } catch (Exception e) {
                }

            } else {
                try {
                    mSwitcher7.setText(mTextNamesfourtin[0]);
                    mSwitcher7.startLayoutAnimation();
                    mSwitcher7.getDrawingTime();
                    g.setSelection(0);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                } catch (Exception e) {
                }
            }
        }

        if (countk1 == 19 ) {
            if (nextbtn < (mTextNamesleven.length - 1)) {
                try {
                    mSwitcher3.setText(mTextNamesleven[nextbtn + 1]);
                    mSwitcher3.startLayoutAnimation();
                    mSwitcher3.getDrawingTime();
                    g.setSelection(nextbtn + 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);

                } catch (Exception e) {
                }

            } else {
                try {
                    mSwitcher3.setText(mTextNamesleven[0]);
                    mSwitcher3.startLayoutAnimation();
                    mSwitcher3.getDrawingTime();
                    g.setSelection(0);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                } catch (Exception e) {
                }
            }
        }

                }
};

public OnClickListener preButtonOnClick = new OnClickListener() {
    public void onClick(View v) {
        if ( countk1 == 9 && countk1 == 13
                ) {
            if (nextbtn > 0) {
                try {
                    // mSwitcher.setText(mTextNames[nextbtn-1]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(nextbtn - 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);

                } catch (Exception e) {
                }

            } else {
                try {
                    mSwitcher.setText(mTextNames[mTextNames.length - 1]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(mTextNames.length - 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                } catch (Exception e) {
                }

            }
        }

        if ( countk1 == 12 
                ) {
            if (nextbtn > 0) {
                try {
                    // mSwitcher.setText(mTextNames[nextbtn-1]);
                    mSwitcher7.startLayoutAnimation();
                    mSwitcher7.getDrawingTime();
                    g.setSelection(nextbtn - 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);

                } catch (Exception e) {
                }

            } else {
                try {
                    mSwitcher7
                            .setText(mTextNamesfourtin[mTextNamesfourtin.length - 1]);
                    mSwitcher7.startLayoutAnimation();
                    mSwitcher7.getDrawingTime();
                    g.setSelection(mTextNamesfourtin.length - 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                } catch (Exception e) {
                }

            }
        }

        if ( countk1 == 19 
                ) {
            if (nextbtn > 0) {
                try {
                    // mSwitcher.setText(mTextNames[nextbtn-1]);
                    mSwitcher3.startLayoutAnimation();
                    mSwitcher3.getDrawingTime();
                    g.setSelection(nextbtn - 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);

                } catch (Exception e) {
                }

            } else {
                try {
                    mSwitcher3
                            .setText(mTextNamesleven[mTextNamesleven.length - 1]);
                    mSwitcher3.startLayoutAnimation();
                    mSwitcher3.getDrawingTime();
                    g.setSelection(mTextNamesleven.length - 1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                } catch (Exception e) {
                }

            }
        }

    }
};

public void onNothingSelected(AdapterView<?> parent) {
}

public View makeView() {
    TextView i = new TextView(this);
    i.setTextSize(18);

    i.setGravity(1);
    return i;
}

public class ImageAdapter extends BaseAdapter {
    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getView() {
        // TODO Auto-generated method stub
        return 0;
    }

    public int getCount() {
        // if(countk1==1)
        // {
        // return mPhotos.size();
        // }
        // else
        //
        // if(countk2==2)
        // {
        // return mPhotos1.size();
        // }
        countk2 = getIntent().getIntExtra("k1", 0);
        return countk2;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);
        if (countk1 == 0) {
            mSwitcher.setVisibility(View.INVISIBLE);

            mSwitcher3.setVisibility(View.INVISIBLE);

            mSwitcher7.setVisibility(View.INVISIBLE);

            i.setImageResource(mPhotos.get(position));

        }

        if (countk1 == 9) {
            mSwitcher.setVisibility(View.INVISIBLE);

            mSwitcher3.setVisibility(View.INVISIBLE);

            mSwitcher7.setVisibility(View.INVISIBLE);

            i.setImageResource(mPhotosi.get(position));
        }

        if (countk1 == 12) {
            mSwitcher7.setVisibility(View.INVISIBLE);
            mSwitcher.setVisibility(View.INVISIBLE);

            mSwitcher3.setVisibility(View.INVISIBLE);

            i.setImageResource(mPhotosl.get(position));
        }

        if (countk1 == 19) {
            mSwitcher3.setVisibility(View.INVISIBLE);
            mSwitcher.setVisibility(View.INVISIBLE);

            mSwitcher7.setVisibility(View.INVISIBLE);

            i.setImageResource(mPhotosi.get(position));
        }

        // i.setMaxHeight(ht);
        // i.setMaxWidth(wt);
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setLayoutParams(new Gallery.LayoutParams(
                android.view.ViewGroup.LayoutParams.FILL_PARENT,
                android.view.ViewGroup.LayoutParams.FILL_PARENT));

        // if(wt >= 480){
        // if(wt == 480 && ht > 320) {
        // i.setLayoutParams(new Gallery.LayoutParams(
        // LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        // } else {
        // i.setLayoutParams(new Gallery.LayoutParams(
        // LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        // }
        //
        // }else{
        //
        // i.setLayoutParams(new Gallery.LayoutParams(
        // LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        // }
        // i.setBackgroundResource(R.drawable.picture_frame);
        return i;
    }

    private Context mContext;

}

private Integer[] mImageIds = { R.drawable.bokstavslottet01,
        R.drawable.bokstavslottet02, R.drawable.bokstavslottet03,
        R.drawable.bokstavslottet04, R.drawable.bokstavslottet05,
        R.drawable.bokstavslottet06, R.drawable.bokstavslottet07,
        R.drawable.bokstavslottet08, R.drawable.bokstavslottet09,
        R.drawable.bokstavslottet10, R.drawable.bokstavslottet11,
        R.drawable.bokstavslottet12, R.drawable.bokstavslottet13,

};

private Integer[] mImageIdsi = { R.drawable.i1, R.drawable.i2,
        R.drawable.i3, R.drawable.i4, R.drawable.i5, R.drawable.i6,
        R.drawable.i7, R.drawable.i8, R.drawable.i9, R.drawable.i10,
        R.drawable.i11, R.drawable.i12, R.drawable.i13 };
private Integer[] mImageIdsl = { R.drawable.l1, R.drawable.l2,
        R.drawable.l3, R.drawable.l4, R.drawable.l5, R.drawable.l6,
        R.drawable.l7, R.drawable.l8, R.drawable.l9, R.drawable.l10,
        R.drawable.l11, R.drawable.l12, R.drawable.l13, R.drawable.l14

};
private static String[] mTextNamesleven = { "BOOKSTOVEN1", "BOOKSTOVEN2",
    "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6",
    "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10",
    "BOOKSTOVEN11" };
private static String[] mTextNames = { "BOOKSTOVEN1", "BOOKSTOVEN2",
    "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6",
    "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10",
    "BOOKSTOVEN11", "BOOKSTOVEN12", "BOOKSTOVEN13" };
 private static String[] mTextNamesfourtin = { "BOOKSTOVEN1", "BOOKSTOVEN2",
    "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6",
    "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10",
    "BOOKSTOVEN11", "BOOKSTOVEN12", "BOOKSTOVEN13", "BOOKSTOVEN14" };
    private ArrayList<Integer> mPhotos = new ArrayList<Integer>(
    Arrays.asList(mImageIds));
 private ArrayList<Integer> mPhotosi = new ArrayList<Integer>(
    Arrays.asList(mImageIdsi));
private ArrayList<Integer> mPhotosl = new ArrayList<Integer>(
    Arrays.asList(mImageIdsl));

 protected void onPause() {

if (intro1 != null){
    intro1.stop();
    if (isFinishing()){
        intro1.stop();
        intro1.release();
    }
}

if (intro2 != null){
    intro2.stop();
    if (isFinishing()){
        intro2.stop();
        intro2.release();
    }
}
    if (intro3 != null){
        intro3.stop();
        if (isFinishing()){
            intro3.stop();
            intro3.release();
        }
    }
    if (intro4 != null){
        intro4.stop();
        if (isFinishing()){
            intro4.stop();
            intro4.release();
        }
    }
    if (intro5 != null){
        intro5.stop();
        if (isFinishing()){
            intro5.stop();
            intro5.release();
        }
    }
    if (intro6 != null){
        intro6.stop();
        if (isFinishing()){
            intro6.stop();
            intro6.release();
        }
    }
    if (intro7 != null){
        intro7.stop();
        if (isFinishing()){
            intro7.stop();
            intro7.release();
        }
    }
    if (intro8 != null){
        intro8.stop();
        if (isFinishing()){
            intro8.stop();
            intro8.release();
        }
    }
    if (intro9 != null){
        intro9.stop();
        if (isFinishing()){
            intro9.stop();
            intro9.release();
        }
    }
    if (intro10 != null){
        intro10.stop();
        if (isFinishing()){
            intro10.stop();
            intro10.release();
        }
    }
    if (intro11 != null){
        intro11.stop();
        if (isFinishing()){
            intro11.stop();
            intro11.release();
        }
   }
    super.onPause(); 
```

} }

# javascript - Android自定义事件到Javascript EventListener

> ID：10615933
> 
> 赞同：3
> 
> 时间：2012-05-16T09:42:50.520
> 
> 标签：javascript, android, events, dom-events, android-event

是否可以在 Android 事件中创建，将数据发送到 WebView 中的 Havascript EventListener？

例如：
在后台，我开始线程搜索服务器上的更新。找到更新后，我发送事件以更新用户页面上的数据。而且我不想重新加载视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:35:58.817

目前我发现的唯一方法是使用 JavaScript 注入：

```
mWebView.loadUrl("javascript:helloWorld(\"hi\");"); //or postUrl if using HTTP POST 
```

这将导致在`helloWorld`网页的 JavaScript 中定义的函数以参数 value 被调用`hi`。

# ajax - Web2py ajax ':eval' 操作不返回 HTML 函数

> ID：10615934
> 
> 赞同：1
> 
> 时间：2012-05-16T09:42:52.360
> 
> 标签：ajax, web2py

在我的 ajax 函数调用中，我使用目标 ':eval' 从控制器执行一些操作。我的控制器函数返回值与 web2py HTML 函数 def ajaxmessage(): return "jQuery('#divAjaxTest').html(%s);" % repr(H1('ajax message')) #不返回任何值。

但如果它只是一个带有 repr() 的文本，那么它会返回正常。return "jQuery('#divAjaxTest').html(%s);" % repr('ajax 消息')。#这工作正常

我是 web2py 的新手，可能是一个小问题。请让我知道如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:34:27.303

第一个应该返回一个值，但生成的字符串将类似于：

```
jQuery('#divAjaxTest').html(<gluon.html.H1 object at 0x153ccd0>) 
```

`repr()`不是序列化 web2py HTML 助手的正确函数——相反，您应该使用`str(H1('ajax message'))`or `H1('ajax message').xml()`。您可能还需要在 Javascript 代码中用引号将字符串括起来：

```
def ajaxmessage():
    return "jQuery('#divAjaxTest').html('%s');" % H1('ajax message').xml() 
```

# android - 使用 ProGuard 的 Android 导出应用程序

> ID：10615937
> 
> 赞同：1
> 
> 时间：2012-05-16T09:43:02.300
> 
> 标签：android, export, proguard

每当我使用 ProGuard 导出 Android 应用程序时，都会收到以下错误消息：

> @C:\xxxx\xxxx~1\xxxxx\xxxxx\xxxx\android_7813736973653258335.pro（文件名、目录名或卷标语法不正确）

我一直在努力找出问题所在，但没有任何解决办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:53:10.350

确保您的项目的路径或您将文件导出到的路径不包含任何以下特殊字符`\\ \\ / [ ] : | < > + ; = . ? "`。还要确保任何一条路径中都没有尾随或前导空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:45:10.717

该问题可以通过使用 proguard 4.6 来解决，并且工作空间的名称不应包含任何空格。android sdk windows文件夹中的proguard文件夹应该替换为proguard 4.6

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T14:47:42.540

Windows 7，Eclipse Juno，使用 ADT 22.2.1。

最初的 Proguard 是 4.6。我不得不升级到 4.10 来解决这个问题。

# android - 与 Internet 的数据连接

> ID：10615939
> 
> 赞同：0
> 
> 时间：2012-05-16T09:43:09.990
> 
> 标签：android

我的应用程序正在使用 DefaultHttpClient 和 HttpPost 连接到互联网。我将其配置为具有 Internet 权限（清单），并且当我的设备通过 WIFI 连接时一切正常。关闭 WIFI 并尝试通过电话网络使用数据连接似乎失败（实际上并没有连接错误，但似乎数据（来自服务器）永远不会到达。

欢迎对导致此行为的原因提出任何建议。我需要添加更多权限吗？

谢谢，

文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:18:03.240

检查此链接。[http://talk.maemo.org/archive/index.php/t-36774.html](http://talk.maemo.org/archive/index.php/t-36774.html)

Edge 的运行频率与 GSM 语音相同，因此您不能同时进行这两种操作。wifi 或 3g 连接将持续存在

# c# - 发送 utf-8 时响应 500

> ID：10615940
> 
> 赞同：0
> 
> 时间：2012-05-16T09:43:17.020
> 
> 标签：c#, objective-c, ios, asp.net-mvc-3

当我使用 utf-8 特殊字符（例如“Ö”）向我的 Web 服务发送请求时，它返回响应 500“处理请求时出错”这就是我在 iOS 应用程序中登录的内容。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{    
    NSError *error = nil;

    dict = [[CJSONDeserializer deserializer] deserializeAsDictionary:self.responseData error:&error];
    for (id key in dict) {
        NSLog(@"%@=%@", key, [dict objectForKey:key]);
    } 
```

如果我只用简单的英语发送消息，它就可以正常工作。

我不确定错误是在服务器端还是在应用程序本身。这就是我发送 JSON POST 的方式：

```
 - (void)stringWithUrl:(NSURL *)url jsonReq:(NSString *)json{

    self.requestURL = [[[NSMutableURLRequest alloc] initWithURL:url] autorelease];
    self.responseData = [NSData dataWithBytes:[json UTF8String] length:[json length]];

    [self.requestURL setHTTPMethod:@"POST"];
    [self.requestURL setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [self.requestURL setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [self.requestURL setValue:@"application/json" forHTTPHeaderField:@"UTF-8"];
    [self.requestURL setValue:[NSString stringWithFormat:@"%d", [self.responseData length]] forHTTPHeaderField:@"Content-Length"];
    [self.requestURL setHTTPBody: self.responseData]; 
```

这就是 Web 服务的外观：

```
 ....    
[WebService(Namespace = "http://mypage.com/webservicesF")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX,
    [System.Web.Script.Services.ScriptService]
.....
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:06:08.873

尝试在发送之前进行编码，例如：

```
 NSString *strEncode =  [src stringByAddingPercentEscapesUsingEncoding:NSUnicodeStringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:52:06.887

这一行：

```
self.responseData = [NSData dataWithBytes:[json UTF8String] length:[json length]]; 
```

是不正确的。的`NSString`长度是 UTF-16 字符，而不是 UTF-8 字符。您可以执行以下操作：

```
const char* utf8 = [json UTF8String];
self.responseData = [NSData dataWithBytes:utf8 length:strlen(utf8)]; 
```

但更好的方法是让字符串`NSData`直接创建，而不通过 C 样式的字符串。

```
self.responseData = [json dataUsingEncoding:NSUTF8StringEncoding]; 
```

# asp.net - 登录 Windows 6 Mobile 应用程序

> ID：10615945
> 
> 赞同：0
> 
> 时间：2012-05-16T09:43:34.167
> 
> 标签：asp.net, mobile, log4net, windows-mobile-6

我想在 Windows 6 移动应用程序中记录事件。

我基本上正在寻找 Log4Net 的等价物，但用于移动应用程序。特别是我希望能够限制日志的大小。

对人们登录移动应用程序有什么建议，或者我应该自己动手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:50:46.470

为什么不使用 log4net？有一个 .net cf 版本。

# asp.net-mvc-3 - Mvc Telerik Window 不发布部分视图的值

> ID：10615946
> 
> 赞同：0
> 
> 时间：2012-05-16T09:43:35.980
> 
> 标签：asp.net-mvc-3, telerik-mvc

再会，

我有以下情况：我有一个 Razor 视图，页面顶部有一个“@using(Html.BeginForm(....))”语句。在 using 语句中，我有几个文本框，其值由用户填充，还有一个按钮。

单击该按钮时，会弹出一个 Telerik 模式窗口（显示与初始视图相同模型的部分视图），以便用户可以填充更多字段。在模态窗口中有一个必须提交整个表单的按钮，它确实如此，但是在我调试我的操作之后，我注意到模型缺少在弹出窗口中输入的值（部分视图）。

我的 Telerik 窗口代码位于 using 语句中，如下所示：

```
 Html.Telerik().Window()
                .Name("AddEditScaleWindow")
                .Title("Save Scale")
                .Content(@<text>@Html.Partial("AddUpdateFeeScale")</text>)
                .Buttons(e => e.Close())
                .Height(250)
                .Width(350)
                .Modal(true)
                .Draggable(true)
                .Visible(false)
                .Render(); 
```

我尝试了不同的方法让窗口发布其值，但无济于事。

如果我查看源代码，我可以看到窗口（部分视图）在表单内。如果我进行网络跟踪，我可以看到发布的值是在视图中输入的所有值，但没有来自局部视图。

有谁知道为什么没有发布窗口内的值？

先感谢您。

马太

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:14:43.643

您可能需要检查这一点，因为我猜，但是许多对话框渲染器在文档下方和您的表单元素之外创建他们的 dom 元素。如果 Telerik 是这种情况，您将需要在客户端上做一些工作以将对话框中的值复制回您的其他表单。

# sencha-touch - 用 sencha touch 2 做一个漂亮的路由器

> ID：10615947
> 
> 赞同：1
> 
> 时间：2012-05-16T09:43:37.243
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用 sencha touch 2 应用程序，我想制作一个具有许多控制器的出色路由器，就像在常规 Web 应用程序中一样。

我怎样才能做到这一点？例如，我想将特定控制器/操作上的每个 url 重定向为：

```
/:controller/:action 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:34:59.737

这在 Sencha Touch 2 文档中并没有很好地记录，但实际上有一种方法可以将 URL 映射到控制器函数或定义资源丰富的路由，如 Rails。这可能对您有帮助：

[http://jenwendling.com/sencha-touch-resource-routing/](http://jenwendling.com/sencha-touch-resource-routing/)

# php - 在php中将“1小时10分钟”转换为01:10:00

> ID：10615948
> 
> 赞同：2
> 
> 时间：2012-05-16T09:43:45.120
> 
> 标签：php, date

如何使用 php 将“1 小时 10 分钟”字符串转换为以下格式 01:10:00。这就是我所做的 -`echo date('H:i:s',strtotime('1 hour and 10 min'));`
输出是 -`01:00:00`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:58:31.227

假设*始终存在*`hour` `and` `min`（强调），您可以使用*`sscanf`*

 *```
$text = "1 hour 10 min";
list($hour, $min) = sscanf($text, "%d hour %d min");
echo 
   str_pad($hour, 2, '0', STR_PAD_LEFT) . ':' . 
   str_pad($min, 2, '0', STR_PAD_LEFT) . 
   ':00'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:54:53.067

```
$time = '1 hour and 10 min';

$arr = explode( ' ', $time);

if ( count($arr) > 2) {
 echo date( 'H:i:s', strtotime($arr[0] . ':' . $arr[count($arr)-2]));
} else {
    echo $arr[1] == 'hour' ? date( 'H:i:s', strtotime($arr[0] . ':' . '00')):
    date( 'H:i:s', strtotime(00 . ':' . $arr[0]));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T09:59:34.410

```
php > preg_match('/^(\d+)\shour[^\d]+(\d+)\smin.+$/i', '1 hour and 10 minutes', $matches);
php > echo str_pad($matches[1], 2, '0', STR_PAD_LEFT).':'.str_pad($matches[2], 2, '0', STR_PAD_LEFT).':00';
01:10:00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T10:36:49.460

查看[PHP 文档中 strtotime 函数](http://php.net/manual/en/function.strtotime.php)的示例，似乎它可能`and`是导致您出现问题的词。

我不知道您的输入字符串来自哪里，但是否可以排除`and`（即只有`1 hour 10 min`）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T10:09:26.963

假设小时和分钟总是存在（甚至`0 hours 0 minutes`）：

```
$my_time_string = '1 hour and 10 min';
preg_match_all('/\d+/', $my_time_string, $out);
$output = sprintf('%02d:%02d:00', $out[0][0], $out[0][1]);
echo $output; 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-16T09:52:17.433

试试这个

$string="1 小时 10 分钟";

echo preg_replace("/[az\s]+/",":",$string)."00*

# objective-c - UINavigationController 标题重叠

> ID：10615949
> 
> 赞同：2
> 
> 时间：2012-05-16T09:43:45.897
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller

我正在使用 UINavigationController 并将 UIViewControllers 推送/弹出到它上面。在某些情况下，我试图弹出到根视图控制器，然后在短暂延迟（0.1f）后推送视图控制器。

我的消息视图控制器的推送代码如下。我的应用会触发两个通知。第一个选择选项卡，第二个将正确的视图控制器推送到该选项卡的堆栈上。

```
//user taps a button and the app needs to switch tab and push the correct viewController
//onto the tab. I have tried setting pop == NO to avoid a 'double pop' but I still get
//overlapped titles
-(IBAction)messages:(id)sender {
    NSDictionary* dictionary = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:[NSNumber numberWithInt:4], [NSNumber numberWithBool:YES] , nil] forKeys:[NSArray arrayWithObjects:@"tab",@"pop", nil]];
    [[NSNotificationCenter defaultCenter] postNotificationName:kAutoSelectTab object:dictionary]; 

    [[NSNotificationCenter defaultCenter] performSelector:@selector(postNotificationName:object:) withObject:kMessages afterDelay:0.1f];
}

//responds to the first notification
-(void)autoSelectTab:(NSNotification*)notification {

    NSDictionary* dictionary = (NSDictionary*)[notification object];

    int tab = [[dictionary objectForKey:@"tab"] intValue];
    BOOL pop = [[dictionary objectForKey:@"pop"] boolValue];

    [self.tabBarController setSelectedIndex:tab];

    UIViewController* vc = [[self.tabBarController childViewControllers] objectAtIndex:tab];
    PSLogDebug(@"Selecting tab:%@",[vc class]);
    [self tabBarController:self.tabBarController didSelectViewController:vc];

    if (pop == YES) {

        if ([vc isKindOfClass:[UINavigationController class]]) {
            [(UINavigationController*)vc popToRootViewControllerAnimated:YES];
        }
    }
}

//responds to the second notification
-(IBAction)messages:(id)sender {
    [self.navigationController popToRootViewControllerAnimated:NO];
    MessagesViewController* vc = [[MessagesViewController alloc] init];
    [self.navigationController pushViewController:vc animated:YES];
    [vc release];
} 
```

从功能上讲，视图似乎可以正确弹出和推送，但标题没有弹出，并且每个新标题都覆盖在旧标题之上。

我在 viewDidLoad 中为每个视图控制器设置了标题

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.navigationItem.title = @"More";
} 
```

当我不尝试弹出到根目录然后延迟再推送时 - 标题和视图的行为符合预期，没有发生重叠。

来自屏幕截图的示例图像

![在此处输入图像描述](../Images/0a0bbc820cb0075157f94b2a6b30cb11.png) ![在此处输入图像描述](../Images/869f8748c1b8260546607ebde4ac260a.png) ![在此处输入图像描述](../Images/606f65b46e3a884f07486877c90f8841.png)

我对堆栈溢出进行了很好的挖掘，但我看不到任何描述与我遇到的问题相同的问题的问题。

Qn.1：popToRoot、Delay、push View 方法是否存在根本错误？Qn.2：如果有人以前见过这种行为，你是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:51:54.050

将延迟从 0.1f 增加到 0.5f 解决了这个问题

改变

```
[[NSNotificationCenter defaultCenter] performSelector:@selector(postNotificationName:object:) withObject:kMessages afterDelay:0.1f]; 
```

至

```
[[NSNotificationCenter defaultCenter] performSelector:@selector(postNotificationName:object:) withObject:kMessages afterDelay:0.5f]; 
```

# ios - 隐式转换失去整数精度：“long long”到“NSInteger”（又名“int”）

> ID：10615950
> 
> 赞同：5
> 
> 时间：2012-05-16T09:43:46.327
> 
> 标签：ios, ios5, xcode4.2, long-integer, nsuinteger

我正在尝试将类型为“long long”的变量分配给 NSUInteger 类型，正确的方法是什么？

我的代码行：

```
expectedSize = response.expectedContentLength > 0 ? response.expectedContentLength : 0; 
```

其中`expectedSize`是 NSUInteger 类型，返回类型`response.expectedContentLength`是 ' `long long`'。变量`response`的类型为`NSURLResponse`。

显示的编译错误是：

> 语义问题：隐式转换失去整数精度：“long long”到“NSUInteger”（又名“unsigned int”）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T10:30:46.547

您可以尝试使用 NSNumber 进行转换：

```
 NSUInteger expectedSize = 0;
  if (response.expectedContentLength) {
    expectedSize = [NSNumber numberWithLongLong: response.expectedContentLength].unsignedIntValue;
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T10:46:04.323

这实际上只是一个演员表，有一些范围检查：

```
const long long expectedContentLength = response.expectedContentLength;
NSUInteger expectedSize = 0;

if (NSURLResponseUnknownLength == expectedContentLength) {
    assert(0 && "length not known - do something");
    return errval;
}
else if (expectedContentLength < 0) {
    assert(0 && "too little");
    return errval;
}
else if (expectedContentLength > NSUIntegerMax) {
    assert(0 && "too much");
    return errval;
}

// expectedContentLength can be represented as NSUInteger, so cast it:
expectedSize = (NSUInteger)expectedContentLength; 
```

# blackberry - 单选按钮在黑莓的 Horizo ntalFieldManager 中不可见？

> ID：10615957
> 
> 赞同：2
> 
> 时间：2012-05-16T09:44:14.697
> 
> 标签：blackberry, radio-button

我正在开发一个包含单选按钮控件的黑莓应用程序。

```
HorizontalFieldManager hr = new HorizontalFieldManager();
setTitle("UI Component Sample"); 
RadioButtonGroup rbg = new RadioButtonGroup();
RadioButtonField r1 = new RadioButtonField("Option 1",rbg,true); 
RadioButtonField r2 = new RadioButtonField("Option 2",rbg,false);
hr.add(r1);
hr.add(r2);
add(hr); 
```

使用此代码，我可以在曲线设备中看到我的两个单选按钮，但是当我在 Torch 设备中安装我的应用程序时，屏幕上只有第一个单选按钮可见。在水平场中显示一个无线电组时遇到问题。当我为组使用垂直字段时，它可以工作。

当我在曲线设备上工作时，水平和垂直都有效。

请建议这是什么类型的公共汽车或问题。

![我们可以看到只有一个单选按钮可见](../Images/8c4dfb213bcabdc8d27c9d74b54b3711.png)

![在此处输入图像描述](../Images/a2faa18c84a5b0ff98a5c2609534b76d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:37:44.533

在 OS 6 中，`RadioButtonField`会导致一些关于其宽度的问题。覆盖该`layout(int, int)`方法可能会解决您的问题。试试下面的代码。

```
RadioButtonGroup rbg = new RadioButtonGroup();

RadioButtonField rbf = new RadioButtonField("Label", rbg, true) {
    protected void layout(int width, int height) {
        super.layout(getPreferredWidth(), height);
    }
}; 
```

# python - Matplotlib：将字符串添加为自定义 x-ticks，但还保留现有的（数字）刻度标签？matplotlib.pyplot.annotate 的替代品？

> ID：10615960
> 
> 赞同：20
> 
> 时间：2012-05-16T09:44:25.397
> 
> 标签：python, matplotlib, annotate, axis-labels

我正在尝试制作一个图表，但在注释它时遇到了一些问题。

我的图表在 x 轴上有一个对数刻度，显示时间。我想要做的是将现有的（但不可预测的）数字刻度标签保持在 100 个单位、1000 个单位、10000 个单位等，但还要在 x 轴上添加自定义刻度标签，以明确哪里更“人性化”可读”的时间间隔出现——例如，我希望能够标记“一周”、“一个月”、“6 个月”等。

我可以使用 matplotlib.pyplot.annotate() 来标记点，但它并没有真正做到我想要的。我真的不想在图表顶部显示文本和箭头，我只想添加一些额外的自定义刻度线。有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T10:13:32.343

如果您真的想添加额外的刻度，您可以使用 获取现有刻度， `axis.xaxis.get_majorticklocs()`添加您想要添加的任何内容，然后使用 设置刻度`axis.xaxis.set_ticks(<your updated array>)`。

另一种方法是使用添加垂直[线`axvline`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.axvline)。优点是您不必担心将自定义刻度插入现有数组，但您必须手动注释行。

另一种选择是添加带有自定义刻度的链接轴。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-16T10:13:13.703

来自[http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.xticks](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.xticks)：

```
# return locs, labels where locs is an array of tick locations and
# labels is an array of tick labels.
locs, labels = xticks() 
```

因此，您需要做的就是获取`locs`然后根据自己的喜好`labels`进行修改`labels`（虚拟示例）：

```
labels = ['{0} (1 day)','{0} (1 weak)', '{0} (1 year)']
new_labels = [x.format(locs[i]) for i,x  in enumerate(labels)] 
```

然后运行：

```
xticks(locs, new_labels) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-25T16:01:14.227

这是我的解决方案。主要优点是：

*   您可以指定轴（适用于双轴或同时使用多个轴）
*   您可以指定轴（在 x 轴或 y 轴上放置刻度）
*   您可以轻松添加新报价，同时保留自动报价
*   如果您添加一个已经存在的刻度，它会自动替换。

代码：

```
#!/usr/bin/python
from __future__ import division
import matplotlib.pyplot as plt
import numpy as np

#Function to add ticks
def addticks(ax,newLocs,newLabels,pos='x'):
    # Draw to get ticks
    plt.draw()

    # Get existing ticks
    if pos=='x':
        locs = ax.get_xticks().tolist()
        labels=[x.get_text() for x in ax.get_xticklabels()]
    elif pos =='y':
        locs = ax.get_yticks().tolist()
        labels=[x.get_text() for x in ax.get_yticklabels()]
    else:
        print("WRONG pos. Use 'x' or 'y'")
        return

    # Build dictionary of ticks
    Dticks=dict(zip(locs,labels))

    # Add/Replace new ticks
    for Loc,Lab in zip(newLocs,newLabels):
        Dticks[Loc]=Lab

    # Get back tick lists
    locs=list(Dticks.keys())
    labels=list(Dticks.values())

    # Generate new ticks
    if pos=='x':
        ax.set_xticks(locs)
        ax.set_xticklabels(labels)
    elif pos =='y':
        ax.set_yticks(locs)
        ax.set_yticklabels(labels)

#Get numpy arrays
x=np.linspace(0,2)
y=np.sin(4*x)

#Start figure
fig = plt.figure()
ax=fig.add_subplot(111)

#Plot Arrays
ax.plot(x,y)
#Add a twin axes
axr=ax.twinx()

#Add more ticks
addticks(ax,[1/3,0.75,1.0],['1/3','3/4','Replaced'])
addticks(axr,[0.5],['Miguel'],'y')

#Save figure
plt.savefig('MWE.pdf') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-05T09:30:58.230

我喜欢上面米格尔的回答。工作得很好。但是，必须进行一个小的调整。以下：

```
# Get back tick lists
locs=Dticks.keys()
labels=Dticks.values() 
```

必须改为

```
# Get back tick lists
locs=list(Dticks.keys())
labels=list(Dticks.values()) 
```

因为，在 Python 2.7+/3 中， Dict.keys() 和 Dict.values() 返回 dict_keys 和 dict_values 对象，matplotlib 不喜欢（显然）。[有关PEP 3106](https://www.python.org/dev/peps/pep-3106/)中这两个对象的更多信息。

# asp.net - 访问 microsoft interop dll 发送电子邮件的安全问题

> ID：10615963
> 
> 赞同：0
> 
> 时间：2012-05-16T09:44:37.707
> 
> 标签：asp.net

我们这里有一段简单的代码最近停止工作，我尝试了很多“事情”来尝试解决错误。

编码

`Application outLook = new Application();` :)

错误

> 由于以下错误，检索具有 CLSID {0006F03A-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {0006F03A-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80070005。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 上的网络服务），如果应用程序不模拟，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。

现在虽然错误很明显，但我无法解决它。

该应用程序是一个 .net 2.0 Web 应用程序，服务器是使用 IIS 7.0 的 windows 2008 r2 标准

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:19:18.277

在服务器上使用客户端应用程序总是会出现问题——还有其他方法可以访问邮箱。

也就是说，这可能会有所帮助：

[http://technoblogy.net/retrieving-the-com-class-factory-for-component-with-clsid-00024500-0000-0000-c000-000000000046-failed-due-to-the-following-error-80040154/](http://technoblogy.net/retrieving-the-com-class-factory-for-component-with-clsid-00024500-0000-0000-c000-000000000046-failed-due-to-the-following-error-80040154/)

# antlr - 用gradle编译3.2 Antlr语法

> ID：10615966
> 
> 赞同：4
> 
> 时间：2012-05-16T09:45:11.060
> 
> 标签：antlr, gradle

我正在尝试用 gradle 编译我的 antlr 语法。我对 gradle 很陌生，所以无法解决如何解决这个问题。

我认为它正在尝试使用 2.7 antlr 进行编译（因为我已经看到其他一些人在使用错误版本时报告了类似的错误），因此引发了错误。

我怎样才能：

1.  显示试图使用什么版本的 Antlr gradle？
2.  让 gradle 正确编译？

这是我的语法：

```
grammar Test;

options {
  language = Java;
}

rule: ; 
```

这是我的gradle脚本：

```
apply plugin: 'java'
apply plugin: 'antlr'

repositories {
    mavenCentral()
}

dependencies {
    antlr 'org.antlr:antlr:3.2'
    testCompile group: 'junit', name: 'junit', version: '4.+'
} 
```

这是尝试编译的输出：

```
$ gradle compileJava
:generateGrammarSource
/home/admin/workspace/BuildTools/src/main/antlr/Test.g:1:1: unexpected token: grammar
:compileJava UP-TO-DATE

BUILD SUCCESSFUL

Total time: 2.458 secs 
```

**编辑：**

似乎在 gradle 中还没有直接支持 Antlr3。

有一个[拉取请求将 antlr3 支持添加](https://github.com/gradle/gradle/pull/69)到[这里讨论](http://gradle.1045684.n5.nabble.com/Antlr-v3-plugin-td5605784.html)的 gradle 。

这是另一个包含手动[支持 Antlr3 的版本。](http://tapestryjava.blogspot.co.uk/2011/03/combining-gradle-with-antlr3.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:33:57.170

为了完整起见，我为我的项目提出了以下 gradle 构建文件，该文件从[tapestryjava blogspot](http://tapestryjava.blogspot.co.uk/2011/03/combining-gradle-with-antlr3.html)获取版本并添加了一些评论。

我唯一需要改变的是不使用动态属性来删除警告。

```
apply plugin: 'java'

project.ext.grammarpackage = "eclipse"

repositories {
    mavenCentral()
}

configurations {
    antlr3
}

dependencies {
    compile 'org.antlr:antlr-runtime:3.2'
    antlr3 'org.antlr:antlr:3.2'
    testCompile group: 'junit', name: 'junit', version: '4.+'
}

task antlrOutputDir << {
    mkdir(generateGrammarSource.destinationDir)
}

task generateGrammarSource(dependsOn: antlrOutputDir, type: JavaExec) {
    description = 'Generates Java sources from Antlr3 grammars.'

    destinationDir = "$buildDir/generated-sources/antlr"
    def antlrSource = 'src/main/antlr'

    inputs.dir file(antlrSource)
    outputs.dir file(destinationDir)

    def grammars = fileTree(antlrSource).include('**/*.g')

    main = 'org.antlr.Tool'
    classpath = configurations.antlr3
    args = ["-o", "${destinationDir}/${project.ext.grammarpackage}", grammars.files].flatten()
}

compileJava {
    dependsOn generateGrammarSource
    source generateGrammarSource.destinationDir
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T21:40:44.603

我自己对 Gradle 不是很了解，但`generateGrammarSource`使用 ANTLR 2.7.x（不确定哪个确切版本），因为如果我在 2.7 语法上使用它，则 .java 文件*会*正确生成。

你总是可以做这样的事情来使用 ANTLR 3 和 Gradle：

```
task generateWithANTLR3(type:Exec) { 
  commandLine = ['java', '-cp', 'antlr-3.2.jar', 'org.antlr.Tool', 'T.g']  
} 
```

*（假设 ANTLR jar 和语法文件与 Gradle 构建文件位于同一目录中）*

**编辑**

并且您还可以让`Tool`输出生成的源文件在特定目录中。以下任务：

```
task generateWithANTLR3(type:Exec) { 
  commandLine = ['java', '-cp', 'antlr-3.2.jar', 'org.antlr.Tool', '-o', 'src/x/y/generated/', 'T.g']  
} 
```

将生成的文件放入`src/x/y/generated/`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:59:16.053

这是 Mark Fisher 和 Bart Kiers 响应的混合，它从依赖项中获取 antlr jar 并放入类路径中。这个对我有用：

```
configurations {
    antlr3
}

dependencies {
    antlr3 'org.antlr:antlr:3.4'
}

task generateWithANTLR3(type:Exec) { 
  commandLine = ['java', '-cp',  configurations.antlr3.getAsPath(), 'org.antlr.Tool', '-o', 'target/generated-sources/antlr3/t3', 'src/main/antlr3/t2/Exp.g']
} 
```

# macos - Mac OS X 上的静态链接 wxHaskell

> ID：10615968
> 
> 赞同：8
> 
> 时间：2012-05-16T09:45:16.943
> 
> 标签：macos, haskell, ghc, static-linking, wxhaskell

我想在 Mac OS X 上分发一个 wxHaskell 应用程序。我该如何创建一个可以独立使用的 Mac OS X 应用程序，而无需用户安装任何额外的库？

我注意到为 Mac OS X 制作包的[cabal-macosx](https://github.com/gimbo/cabal-macosx)项目`.app`。当我构建示例 wxHello 应用程序时，应用包在我的机器上运行良好（添加`extra-lib-dirs: /usr/lib`到`.cabal`文件后）。但是当我在另一台机器上尝试时，我得到了错误：`Dyld Error Message: Library not loaded: /Users/binil/.cabal/lib/wxc-0.90.0.3/ghc-7.0.4/libwxc.dylib`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:08:25.323

您可以将所需的 dylibs 放在`Contents/Resources`应用程序包内的文件夹中，因为这是 dylibs 搜索路径的一部分。您可以使用项目的复制文件构建阶段自动执行此操作。

从技术上讲（尽管这并不总是适用于所有 dylib），您应该能够通过将 dylib 转换为框架，然后在您的 XCode 项目中链接它来“正确”地完成它。有[一个可用的转换脚本](http://att.macrumors.com/attachment.php?attachmentid=144763&d=1227020243)[注：下载]。

# php - Best practice for a simple encryption class. Am I using crypt and mcrypt well?

> ID：10615969
> 
> 赞同：0
> 
> 时间：2012-05-16T09:45:20.850
> 
> 标签：php, encryption, hash, mcrypt, crypt

These days I read a lot here on SO about password hashing and data encryption. It's a real mess, I mean, deciding what the best practice is. I need a very simple class that can be reused anywhere and that provide a ***decent-but-not-paranoic*** security level for my PHP applications (I do not handle bank data). Additionally, I want to rely as much as possible on PHP standard libs. I came up with this:

```
class Security {

    public static function hashPassword($plain) {
        $salt = md5(rand(0, 1023) . '@' . time()); // Random salt
        return crypt($plain, '$2a$07$' . $salt); // '$2a$07$' is the Blowfish trigger
    }

    public static function checkPassword($plain, $hash) {
        return (crypt($plain, $hash) === $hash);
    }

    public static function generateIv() {
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC); // It's 32
        return mcrypt_create_iv($iv_size, MCRYPT_RAND);
    }

    public static function encrypt($key, $data, $iv = null, $base64 = true) {
        if (is_null($iv)) $iv = md5($key);
        $ret = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $data, MCRYPT_MODE_CBC, $iv);
        return ($base64 ? base64_encode($ret) : $ret);
    }

    public static function decrypt($key, $data, $iv = null, $base64 = true) {
        if (is_null($iv)) $iv = md5($key);
        return rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $base64 ? base64_decode($data) : $data, MCRYPT_MODE_CBC, $iv), "\0");
    }

} 
```

As you can see, I choose to hash passwords with [**`crypt()`**](http://us.php.net/manual/en/function.crypt.php) using **Blowfish hashing algorithm**. The return value of `hashPassword()` is the salt + hash that then I store in the DB. I made this choice because `crypt()` is available on every server, provides a confortable way to check hash regardless of algorithm used (it's based on salt prefix) and, I read, *bcrypt* is a decent hashing method.

Then, for data encryption I used [**`mcrypt()`**](http://www.php.net/manual/en/book.mcrypt.php) **Rijndael 256** algorithm with **CBC mode**. As you can see, I can use encryption methods in two way. I can pass a IV (and `generateIv()` helps me to create one) that I will store in the DB along crypted data, or, if I don't, a basic IV is derived from key in both crypt and decrypt process.

What do you think about it? Am I missing something? Can I be finally relaxed about hashing and encryption in my PHP aplications?!?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:35:39.667

2.  You are using Rijndael 256 bit encryption, which is *not* AES standard. Try to use AES (`MCRYPT_RIJNDAEL_128`) using 256 bit keys instead.

3.  A random IV should be kept with cipher text if the derived key is also used to encrypt other data.

4.  You are using out of date functions, you might want to use [bcrypt](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php) and [SHA-256](http://php.net/manual/en/function.hash.php) for the IV (only use the 16 - blocksize - left most bytes) .

Note that this list may not be complete.

# dynamics-crm-2011 - 使用 Javascript 将 Appointment 上的 `scheduledend` 设置为 null

> ID：10615971
> 
> 赞同：0
> 
> 时间：2012-05-16T09:45:25.623
> 
> 标签：dynamics-crm-2011

我正在约会表单上编写 Javascript，需要清除`scheduledend` DateTime 字段。

我已经尝试了明显的方法，但它不起作用。

```
Xrm.Page.getAttribute('scheduledstart').setValue(null);
Xrm.Page.getAttribute('scheduledend').setValue(null); // Both do nothing 
```

如何将 DateTime 字段设为空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:26:27.860

这应该有效。我刚刚在预约表“onLoad”上进行了测试

```
crmForm.all.scheduledend.DataValue = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:25:30.060

你是对的，你可以清除价值 -

```
Xrm.Page.getAttribute('scheduledend').setValue(); 
```

应该管用。

# jquery - JQuery 列表的水平滚动

> ID：10615973
> 
> 赞同：1
> 
> 时间：2012-05-16T09:45:29.803
> 
> 标签：jquery, jquery-plugins

我正在使用 php 将图像缩略图添加到列表中...

例如： - 输出将是......

```
<ul>
<li><img src="images/image1.png" /></li>
<li><img src="images/image2.png" /></li>
<li><img src="images/image3.png" /></li>
<li><img src="images/image4.png" /></li>
<li><img src="images/image5.png" /></li>
<li><img src="images/image6.png" /></li>
</ul> 
```

这是在水平视图中显示的，因此一个在另一个旁边，6 个适合页面。

我需要做的是一次加载所有这些，但只显示 6 个，并有一个“查看更多”按钮，我可以按下它，然后显示下一个 6，依此类推。

任何人都知道用于此的 JQuery 插件或可以指向脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:22:39.827

您正在寻找的是所谓的轮播，任您选择：[50 多个最佳 jQuery 轮播综述](http://www.tripwiremagazine.com/2012/01/jquery-carousel.html)

# php - 处理此表格

> ID：10615975
> 
> 赞同：0
> 
> 时间：2012-05-16T09:45:34.357
> 
> 标签：php, html, forms

一个用 html 构建它的设计师给了我这个表单，我需要创建一些 php 来处理表单。但是，当我测试表单以查看它是否会传递变量时，$_POST 是空的。但是，当我更改获取方法时，我可以很好地访问变量。谁能看到错误在哪里？

这是代码：

```
<form action="process/appointment.php" method="post" accept-charset="utf-8" enctype="text/plain" id="appointments">
    <input type="text" placeholder="Contact Name..." name="contactName"  style="width:150px;"/>
    <input type="text" placeholder="Contact Telephone..." name="contactTel"  style="width:150px;"/>
    <!--<input type="image" src="images/send_purple.gif" alt="send appointment request" style="margin-top:0; height:auto; border:none;"/>-->
    <input type="submit" value="submit">
</form> 
```

**编辑**

这是我用来测试变量接收的页面：

```
<?php
print_r($_POST); print_r($_GET); 
?> 
```

当表单设置为 post 时，$_POST 返回一个空数组，但当 for 设置为 get 时，$_GET 返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:56:01.070

`enctype="text/plain"`没有多大意义。去掉它。

如果它在做任何事情，它就是告诉浏览器以 PHP 无法转换为`$_POST`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:56:25.057

您的 enctype 错误，您需要 enctype="multipart/form-data"

交换这一行：

`<form action="process/appointment.php" method="post" accept-charset="utf-8" enctype="text/plain" id="appointments">`

至

`<form action="process/appointment.php" method="post" accept-charset="utf-8" enctype="multipart/form-data" id="appointments">`

# java - IntelliJ 中的共享内容根（跨模块共享源）

> ID：10615978
> 
> 赞同：1
> 
> 时间：2012-05-16T09:45:46.183
> 
> 标签：java, intellij-idea

也许我的方法是错误的，但这是我想要的：

*   一个日志库，用纯 JAVA 编写
*   它也应该适用于Android
*   我想在 Android 和桌面应用程序中使用它

我尝试的方法取自 VS 和 C#，它被称为“多目标”——它基本上意味着一个模块与另一个模块共享源代码。

所以我的想法是创建4个模块：

*   安卓应用
*   安卓日志
*   桌面应用
*   桌面日志

日志记录的“实际工作”（大多数是纯 Android 兼容的 JAVA 类）将进入 AndroidLog（以防止我意外使用不在 Android SDK 中的类）。

Android App可以毫无问题地使用日志库，这就是我目前的做法。现在 DesktopLog 应该有**一些**AndroidLog 有的文件夹，基本上重复使用了相同的 JAVA 代码。

我尝试将 AndroidLog 中的源文件夹添加到 DesktopLog，但我收到一条错误消息，告诉我“根目录已经属于...”。我正在使用 SVN，但我认为这不是问题所在（实际上，我在没有 SVN 的情况下尝试了上述方法，但如果没有更简单的解决方案，它可能会提供一些解决方法）。

那么我如何让 IntelliJ：
**在不同目标平台的不同模块之间共享 JAVA 文件。**

谢谢你的提示，克里斯

PS：也欢迎搜索泪点“分享源码JAVA”对google不太友好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:55:29.660

毫米。我认为你的做法是错误的。我会这样组织它：

1.  Common-Log - 一个通用 Java 包，包含 DesktopLog 和 AndroidLog 使用的类
2.  DesktopLog，依赖于 Common-Log
3.  AndroidLog，依赖于 Common-Log
4.  桌面应用
5.  安卓应用

试图在不同的子项目中同时引用来自单个项目的部分源代码树听起来很头疼；我认为，如果您遵循从两个 Logging 项目中提取公共支持类到单独的公共项目的方法，您将会有更多的运气。

# android - Webservice 客户端从 PhoneGap 连接 SugarCRM Web 服务

> ID：10615979
> 
> 赞同：0
> 
> 时间：2012-05-16T09:45:47.070
> 
> 标签：android, web-services, cordova

我在下面的链接中有 SugarCRM Web 服务。 [http://www.sugarcrm.besplatform.com/soap.php?wsdl](http://www.sugarcrm.besplatform.com/soap.php?wsdl)

使用 Web 服务，我想通过 SugarCRM Web 服务登录并列出潜在客户管理详细信息。由于“跨域安全”问题和“同源”问题，我无法访问 SugarCRM 网络服务。

我曾尝试使用 JSONP ，但未能成功。

我是 jquery 和 jsonp 的新手。有人可以帮我解决这个问题。提前致谢。

使用 ajax 代码：

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
        alert("inside ajax");
        var username = "admin";
        var password = "admin";
        $.ajax({
              url: "www.sugarcrm.besplatform.com/soap.php/login",
              data: "{'user_name':'" + username + "','password':'" + password + "'}",
              dataType: "json",
              type: "POST",
              contentType: "application/json; charset=utf-8",
              success: function(data) {
                    if (data == null) { 
                          alert( "nothing."); 
                    }
                    else {
                          alert(data);
                    }
              },
              error: function(e){
                alert("failure : "+e);
              }
        }); 
```

使用 jsonp：

```
<script type="application/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="application/javascript">
        var url = "http://www.sugarcrm.besplatform.com/soap.php/login?user_name=admin&password=admin";
        jQuery.getJSON(url+"&callback=?", function(data) {
            alert("Success" + data.id);
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:01:19.527

我认为您需要将密码 MD5 加密发送给 Sugar。在“../service/v2/rest.php”中还有一个可用的 REST WS，您可以使用它来代替 SOAP 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:07:50.820

从 6.5.11 版开始，此问题已修复。如果您使用“jsoncallback”，然后使用它的名称。查看文件 service/core/REST/SugarRestJSON.php 以了解更改的内容并修补旧版本的 Sugar

# couchdb - 比较两个 couchdb 数据库

> ID：10615980
> 
> 赞同：1
> 
> 时间：2012-05-16T09:45:52.877
> 
> 标签：couchdb, replication, couchdb-python

我有一个带有数据库 a 和数据库 b 的 couchdb 实例。它们应该包含相同的文档集，只是`_rev`属性不同，这意味着我不能使用复制。

我如何验证这两个数据库确实包含相同的文档，这些文档在其他方面都“相等”？

我已经尝试使用`couchdb-dump`具有很多`sed`魔法的基于 python 的工具来摆脱`_rev`和 MD5 和 ETag 标头，但是似乎 JSON 结构中的属性顺序仍然略微随机，这意味着我仍然无法比较使用类似的东西轻松输出`diff`。

这里有更好的方法吗？其他人是否想解决类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:12:13.017

如果您想确保它们*完全相同*，请编写一个映射作业，将文档路径作为键，并将文档哈希（以您喜欢的任何方式生成）作为值。不要`_rev`在哈希生成中包含该字段。

您不能减少到单个哈希，因为不能保证顺序，但是您可以将生成的 JSON 文档提供给一个好的`diff`程序。

# css - Div css overflor auto and not used style table

> ID：10615989
> 
> 赞同：1
> 
> 时间：2012-05-16T09:46:13.903
> 
> 标签：css, html, overflow

Привет, ребята. Столкнулся с проблемой, див блок не хочет отображать скрол. А еще одна проблема - не подключается таблица стилей после добавления элементов.

Hi, guys. Faced with a problem, block divas do not want to display to scroll. And another problem - can not connect after adding stylesheet elements.

[http://jsfiddle.net/sombik/nuX6B/1/](http://jsfiddle.net/sombik/nuX6B/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:51:27.427

In your HTML markup, where you have input type button. The last button onclick handler is not closed. It should be:

```
<input type="button" value="delete" onclick="keyPressTest();" /> 
```

That should solve your issue. Here is a working JSFiddle link: [http://jsfiddle.net/RumxQ/](http://jsfiddle.net/RumxQ/)

# asp.net-mvc - Telerik mvc 网格 ForeignKey 列

> ID：10615990
> 
> 赞同：3
> 
> 时间：2012-05-16T09:46:18.633
> 
> 标签：asp.net-mvc, grid, telerik

我有一个网格，其中前 2 列与 ForeignKey（类别和产品）绑定。第一个下拉列表的值决定了第二个下拉列表的值。第一个下拉列表值更改后，如何重新加载第二个下拉列表的值？

```
@(Html.Telerik().Grid<Order>().HtmlAttributes(new { style = "width: 700px" })
.Name("grdOrders")
.ToolBar(tb => tb.Insert())
.DataBinding(binding => binding.Ajax()
    .Select("GetOrders", "Home")
    .Update("UpdateOrder", "Home")
    .Insert("InsertOrder", "Home")
    .Delete("DeleteOrder", "Home"))
.DataKeys(keys => keys.Add(o => o.OrderID))
.Columns(cols =>
{
    cols.Bound(c => c.OrderID).Width(100).ReadOnly();
    cols.Bound(c => c.Name);
    cols.ForeignKey(c => c.ItemCategoryID, (System.Collections.IEnumerable)ViewData["Categories"],
                    "ItemCategoryID", "CategoryName").Title("dbCategory").Width(300);        
    cols.ForeignKey(c => c.ItemID, (System.Collections.IEnumerable)ViewData["dbItems"],
                "ItemID", "ItemName").Width(200).Title("Item");
    cols.Command(cmd =>
    {
        cmd.Edit().ButtonType(GridButtonType.Image);
        cmd.Delete().ButtonType(GridButtonType.Image);
    }).Title("Commands").Width(100);
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:02:12.657

遇到同样的问题，我发现了这个：“网格中的依赖下拉” [http://www.telerik.com/community/forums/aspnet-mvc/grid/dependent-drop-down-in-grid.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/dependent-drop-down-in-grid.aspx)

PopUp 模式有一个完整的解释，但只有内联模式解决方案的描述（不幸的是，这对我来说太难理解了）。