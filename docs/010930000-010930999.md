# StackOverflow 问答 10930000-10930999

# java - java代码中的getParameter()怎么办？

> ID：10930004
> 
> 赞同：0
> 
> 时间：2012-06-07T10:28:32.233
> 
> 标签：java, jakarta-ee, applet, jcreator

我正在制作一个必须播放视频文件的 java 小程序。我在网上搜索了一个代码，但它给出了一个错误`getParameter`

这是代码...

```
 public void init() {

        //$ System.out.println("Applet.init() is called");
        setLayout(null);
        setBackground(Color.white);
        panel = new Panel();
        panel.setLayout( null );
        add(panel);
        panel.setBounds(0, 0, 320, 240);

        // input file name from html param
        String mediaFile = null;
        // URL for our media file
        MediaLocator mrl = null;
        URL url = null;

        // Get the media filename info.
        // The applet tag should contain the path to the
        // source media file, relative to the html page.

       // Error here: Invalid media file parameter

        if ((mediaFile = getParameter("C:\\Users\\asim\\Documents\\JCreator LE\\MyProjects\\SimplePlayerApplet\\src\\Movie.avi")) == null)
            Fatal("Invalid media file parameter");

        try {
            url = new URL(getDocumentBase(), mediaFile);
            mediaFile = url.toExternalForm();
        } catch (MalformedURLException mue) {
        } 
```

这是整个代码的链接：

[http://docs.oracle.com/javase/1.4.2/docs/guide/plugin/developer_guide/SimplePlayerApplet.java.html](http://docs.oracle.com/javase/1.4.2/docs/guide/plugin/developer_guide/SimplePlayerApplet.java.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:35:13.913

你是如何“调用”你的小程序的？

似乎您正在尝试将“参数”指定为位于本地文件系统上的东西，但您正在构建一个“小程序”，因此您应该通过 HTML 调用它，然后将“参数”这样传递：

```
<applet code=SimplePlayerApplet.class width=320 height=300>
<param name="file" value="sun.avi">
</applet> 
```

因此你的`getParameter`电话应该仍然是 for `"file"`。就像您之前使用的代码一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:34:56.770

这里有几个想法：

1.  您正在使用驻留在本地文件系统中的文件。默认情况下，Applet 无权访问文件系统。本教程中的方法上方有一条评论。并且它明确指出文件应该与 html 页面相关并且驻留在服务器上。只需仔细阅读那里的评论。

2.  该示例使用 Applet（他们提供的类扩展了 Applet）——它是一种旧方法，现在已弃用。基本上它所做的是使用 AWT 而不是较新的 Swing。因此，您应该寻找一个使用 JApplet 的示例。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:36:36.007

您应该将参数放在 HTMLpart 中，这将使小程序独立于内容。您将参数名称与其值混淆了。

```
<HTML> <BODY>
<APPLET CODE="SimplePlayerApplet.class" WIDTH=320 HEIGHT=240>
 <PARAM NAME="filename" VALUE="C:\\Users\\asim\\Documents\\JCreator LE\\MyProjects\\SimplePlayerApplet\\src\\Movie.avi">

</APPLET>
</BODY> </HTML>

 if ((mediaFile = getParameter("filename")) == null)
    ... 
```

为了访问文件系统，您需要对小程序进行签名。

线路：

```
 URL(getDocumentBase(), mediaFile); 
```

尝试从 DocumentBase 打开相对的 mediaFile。这意味着相对于嵌入此小程序的文档的 URL。另请参见[小程序](http://docs.oracle.com/javase/1.4.2/docs/api/java/applet/Applet.html)。

因此，让它运行的最简单方法是将您的 Movie.avi 复制到您的 HTML 文件所在的同一文件夹中并使用

```
URL(getDocumentBase(), "Movie.avi"); 
```

之后，您应该通过提供文件名作为参数来使其可配置。

# php - WORDPRESS：我刚刚在我的 wp_user 行上用 phpMyadmin 创建了一个额外的列，我现在需要每个用户在登录时更新该列

> ID：10930006
> 
> 赞同：0
> 
> 时间：2012-06-07T10:28:41.010
> 
> 标签：php, mysql, wordpress

WORDPRESS：我刚刚在我的 wp_user 行 (foo) 上用 phpMyadmin 创建了一个额外的列，我现在需要每个用户在登录时更新他们的列。我已经成功地调用了每个用户的值：

```
 <?php

        $wpdb->hide_errors(); auth_redirect_login(); nocache_headers();
                    $current_user = wp_get_current_user();
                    if ( 0 == $current_user->ID ) {
                        // Not logged in.
                    } else {
                        echo '<input>' . $current_user->foo . '/>';

                    }
                    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:41:49.867

你能解释一下为什么你改变了 WordPress 表吗？

这是一个糟糕的做法。如果 WP 必须及时更新，我非常怀疑您的专栏是否会持续存在。

有一个名为 WP_Usermeta 的表可以满足您的需求。

您可以通过以下方式访问和更新您的价值：

update_usermeta($userId,'foo',"1");

$foo = get_usermeta($userId,'foo');

**现在**，对于您的主要问题，您可以重载 wp_authenticate 函数或使用“Authenticate”之类的过滤器（取自[mjangda 的回答](https://stackoverflow.com/a/1806638/380392)）。

```
add_filter('authenticate', 'check_login', 10, 3);
function check_login($user, $username, $password) {
$user = get_userdatabylogin($username); 

if( /* check to see if user is allowed */ ) {
    return null;
}
return $user; 
```

}

# iphone - 在 iPhone 中使用加速度计查找距离

> ID：10930007
> 
> 赞同：0
> 
> 时间：2012-06-07T10:28:45.497
> 
> 标签：iphone, ios, filter, accelerometer, cmmotionmanager

请在这个寻找 iPhone 移动距离的过程中提出一些起点。目前系统对精度的要求是`cm`，位移可以是 3D 的。

我已经做的是

**1.**尝试使用声音计算两部 iPhone 之间的距离，但我只需要使用一部 iPhone 计算距离，即需要位移。

**2.**试过`CMMotionManager`和它的加速度计数据，但收到的数值是无奈的。

我认为我需要一个好的过滤器来从垃圾中获取有用的数据。我已经使用`Kalman Filter`并通过了链接

[iphone加速度计速度和距离](https://stackoverflow.com/questions/3177199/iphone-accelerometer-speed-and-distance)，

[如何使用 iphone sdk 使用加速度计计算距离？](https://stackoverflow.com/questions/2115288/how-to-calculate-distance-using-accelerometer-using-iphone-sdk),

[如何使用加速度计测量 iPhone 行驶的距离？](https://stackoverflow.com/questions/3707726/how-do-i-measure-the-distance-traveled-by-an-iphone-using-the-accelerometer),

[这个问题背后的基本微积分在表达式中](https://stackoverflow.com/a/6647683/459624)

尝试了[DCT-II 算法](http://en.wikipedia.org/wiki/Discrete_cosine_transform#Formal_definition)和[多维 DCT](http://en.wikipedia.org/wiki/Discrete_cosine_transform#Multidimensional_DCTs)来过滤数据。

我不知道我错过了什么，或者我应该从哪里开始，因为很难相信没有人使用加速度计来获得如此精确的精度，因为有[很多实际例子](http://www.analog.com/library/analogDialogue/archives/43-05/accelerometer.html)证明它被用于更高的精度。

请为我提供一些建议，以解决当前的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:20:53.217

[您无法达到厘米精度。](https://stackoverflow.com/a/7835988/341970)令人惊讶的是，原因是方向错误。

上面的链接包含一些提示，如果您需要位移，您可以做什么。

如果可以的话，一个更好的选择是在你的应用程序中使用方向。

# jquery - jQuery 样式未在 Safari 中应用

> ID：10930010
> 
> 赞同：14
> 
> 时间：2012-06-07T10:28:55.227
> 
> 标签：jquery, css, macos, safari

我有一个绝对定位的元素，我在 jQuery 的帮助下使用 CSS 正确地“向左”移动。

```
$("#element").css('left', '103px'); 
```

在 Firefox 中，这按预期工作。但是在 Safari 中，我可以在 element.style 下的 Web Inspector 中看到该样式，但该样式并未更新。如果我禁用（并重新启用）任何匹配的 CSS 规则（即使是那些不直接应用于我的 div 的），则会呈现与 jQuery 一起应用的样式。

我在旧的 PowerMac 上使用 jQuery 1.7.2 运行 Safari 5.0.6。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T08:14:37.883

我曾经遇到过这个问题，最终我在元素父容器上使用了 addClass 和 removeClass 。

尝试这个

```
$("#element").css('left', '103px').parent().addClass("dummyClass").removeClass("dummyClass"); 
```

如果这不起作用，以下肯定会起作用。

```
$("#element").css('left', '103px');
$("body").addClass("dummyClass").removeClass("dummyClass"); 
```

问题是有时当我们更改 CSS 时 safari 不会重绘页面，所以我们需要强制重绘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:43:03.470

!important 应该可以解决问题

```
$("#element").css('left', '103px !important'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T15:00:44.887

我在实现视频进度条时遇到了类似的问题。我想要定位的元素位于带有“display:table-caption;”的 DIV 中 在阅读了@gaurang171 对 td 元素的评论后，我最终不得不从 div 表中删除该元素并设置“显示：块；” 并且无需 dummyClass 即可更新元素位置。带有 display:block 的 div 在表格标题内不起作用，它必须完全在表格之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T15:46:05.857

Safari 似乎有重绘元素的问题。`transform: translateZ(0);`幸运的是，我们可以通过添加到 css 类来强制重绘。这似乎在 BigSur 上已修复，但发生在 Safari Catalina 上。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T23:52:23.340

好吧，它在 safari 5.1.7 中对我有用

根据我的经验，当 .css() 失败时，我尝试使用 .animate() 以 0 作为时间（即时）

尝试这样的事情，让我知道它是否有效（在 safari 5.1.7 中测试并有效）

```
 $(document).ready(function(){
           $("#element").animate({
               left: '+=103px'
           }, 0);
        }); 
```

# javascript - 如何正确使用 SWFObject

> ID：10930011
> 
> 赞同：3
> 
> 时间：2012-06-07T10:28:56.120
> 
> 标签：javascript, events, youtube, youtube-api, swfobject

我正在使用 SWFObject 将 YouTube 视频嵌入我们的网站。一个页面中有许多指向视频的链接，每个链接都会清除一个包装器 div，然后使用以下代码将新的嵌入加载到其中：

```
$('a.video-link').each(function () {
    $(this).on('click', function(e) {
        e.preventDefault();

        if ($('#video-wrap').has('object').length == 0) {
            var params = { allowScriptAccess: 'always', allowFullScreen: 'true' };
            var atts = { id: 'ytapiplayer' };
            swfobject.embedSWF($(this).attr('href'), 'ytapiplayer', '1000', '562', '8', null, null, params, atts);
            $('#video-wrap').show();
        } else {
            $('#video-wrap').find('object').remove();
            $(this).trigger('click');
        }
    });
}); 
```

这些是我用于每个嵌入的 Youtube 链接：

```
http://www.youtube.com/v/{Youtube ID}?hl=en_US&rel=0&hd=1&border=0&version=3&fs=1&autoplay=1&autohide=1&enablejsapi=1&playerapiid=ytapiplayer 
```

然后，这里是 onYouTubePlayerReady() 事件处理程序：

```
function onYouTubePlayerReady(id) {
    console.log('youtube player is ready.');
    var ytplayer = document.getElementById('ytapiplayer');
    ytplayer.addEventListener('onStateChange', 'onYouTubePlayerStateChange');
    ytplayer.addEventListener('onError', 'onYouTubePlayerError');
} 
```

**所有视频都可以正常加载，但永远不会点击 onYouTubePlayerReady！**

我已经尝试过[这里](https://stackoverflow.com/questions/2083128/youtube-api-not-firing-onyoutubeplayerready)和[这里](https://stackoverflow.com/questions/2001558/embed-youtube-video-without-youtube-link)的解决方案，但没有任何效果:(

请帮我解决这个问题。**最终目标是让 Youtube API 工作。**

谢谢。

编辑：我尝试使用代码，确保所有名称都是正确的，分成不同的脚本标签和/或 .js 文件，在开头加载它，在 document.ready() 中，仍然，onYouTubePlayerReady 没有触发。**你怎么看？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:01:04.090

这是工作代码：

在每个视频链接上执行 SWFObject：

```
$('a.video-link').on('click', function(e) {
    e.preventDefault();
    // SWFObjects loads a video object into div with ID ytapiplayer.
    // If the wrapper div already contains a video we need to remove it first:
    if ($('#video-wrap').has('object').length == 0) {
        var params = { allowScriptAccess: 'always', allowFullScreen: 'true' };
        var atts = { id: 'ytapiplayer' };
        swfobject.embedSWF($(this).attr('href'), 'ytapiplayer', '1000', '562', '8', null, null, params, atts);

        $('#video-wrap').show();
    } else {
        $('#video-wrap').find('object').remove();
        $(this).trigger('click');
    }
}); 
```

带有 API 值的 YouTube 链接：

```
http://www.youtube.com/v/' + data.YoutubeLink + '?hl=en_US&rel=0&hd=1&border=0&version=3&fs=1&autoplay=1&autohide=1&enablejsapi=1&playerapiid=ytapiplayer 
```

而 SWFObject 事件处理程序**我将此代码放在一个单独的 .js 文件中，在执行 SWFObject 的代码之前加载。我不知道是否有必要，但它仍然有效：**

```
function onYouTubePlayerReady(id) {
    // We need the actual DOM element for this, if we want to use more advanced API.
    // This is because addEventListener activates the API.
    var ytplayer = $('#ytapiplayer').get(0);
    ytplayer.addEventListener('onStateChange', 'onYouTubePlayerStateChange'); // onYouTubePlayerStateChange(newState)
    ytplayer.addEventListener('onError', 'onYouTubePlayerError'); // onYouTubePlayerError(errorCode)
} 
```

# php - 在二维数组中查找最近邻点

> ID：10930016
> 
> 赞同：3
> 
> 时间：2012-06-07T10:29:10.300
> 
> 标签：php, mysql, html

我有一个二维数组，在不同的位置有各种条目。然而，有些位置具有相同的值（比如 5）。我需要从任何其他定位元素中找到最近的值为 5 的块。！

图片在此链接中:) [这是更好地理解问题的图片](http://corpopolis.com/images/pixels.png)

在上面这张照片中。我们可以使用数字图像处理的概念来找到每个块之间的 m 距离。但是如果问题空间太大（假设一个 100X100 或 200X200 的数组），那么这种方式的解决方案将需要时间。

在解决方案中，我发现了这些链接。 [最近邻居的维基百科链接](http://en.wikipedia.org/wiki/Nearest_neighbor_search)

除此之外，如何在编程中映射整个事情......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T18:21:37.123

您可以为此尝试任何 PL/SQL 代码，然后您可以从那里获得最近的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:43:47.583

最简单（也许不是最有效）的方法是如果您使用 Wikipedia 方法 #1，如下所示：

遍历所有坐标对，找到它们之间的距离。公式：sqrt((x2-x1)^2+(y2-y1)^2)

跟踪哪一对最接近您正在测试的点，以及最近的距离。

每次计算后，测试距离是否更短；如果是这样，则覆盖距离和最近对变量。

如果你愿意，我可以扩展它。

# ruby-on-rails - Jasmine 在 RoR 上使用 jasmine-headless-webkit 调试回溯

> ID：10930022
> 
> 赞同：2
> 
> 时间：2012-06-07T10:29:37.783
> 
> 标签：ruby-on-rails, jasmine

我可以在运行时以某种方式获得更深的错误回溯吗

> jasmine-headless-webkit 运行 Jasmine 规格... ..F 失败：3 次测试，1 次失败，0.019 秒。
> 
> (/Users/User/Development/project/spec/javascripts/modal_spec.coffee:14) TypeError: 'undefined' is not a function

我想知道错误发生在JS中的确切位置。一个不错的回溯将是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:44:44.997

[正如这里](https://stackoverflow.com/questions/11115916/better-failure-report-in-jasmine-headless-webkit)所指出的，您可以使用

```
jasmine-headless-webkit --runner-out ~/Desktop/jasmine-out.html 
```

生成具有良好回溯的良好报告。只需在您喜欢的浏览器中打开生成的 html

# objective-c - 在 OS X 中使用 Objective-C 获取视频的原始大小

> ID：10930023
> 
> 赞同：1
> 
> 时间：2012-06-07T10:29:40.043
> 
> 标签：objective-c, macos, video, osx-lion, avfoundation

在 Mac OS X 10.7 中使用 Objective-C 获取视频的原始大小（宽度和高度）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:17:17.940

假设这部电影是 QuickTime 可读的——如果不是，你可能无论如何都不走运——这样的事情应该可以解决问题，我认为：

```
QTMovie* movie = [QTMovie movieWithFile:movieFileName error:nil];
NSSize size = [(NSValue*)[movie attributeForKey:QTMovieNaturalSizeAttribute] sizeValue]; 
```

（注意：未经测试，没有错误检查等）

# java - 在 Web 应用程序中由第三方代码创建的线程中记录未捕获的异常

> ID：10930026
> 
> 赞同：1
> 
> 时间：2012-06-07T10:29:42.767
> 
> 标签：java, multithreading, glassfish, uncaught-exception

我怀疑由我的 Web 应用程序使用的第三方 jar 创建的线程可能会抛出异常，并且没有捕获它。但是，我在日志文件中没有看到任何证据。如何强制将所有未捕获的异常转储到日志文件？这是针对在 Glassfish 中运行的 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:36:43.103

您可以更改未捕获的异常处理程序。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)

[http://www.javapractices.com/topic/TopicAction.do?Id=229](http://www.javapractices.com/topic/TopicAction.do?Id=229)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:37:57.453

`Thread's` `setDefaultUncaughtExceptionHandler`您可以使用静态方法设置默认的未捕获异常处理程序：

```
Thread.setDefaultUncaughtExceptionHandler( new Thread.UncaughtExceptionHandler() {
            public void uncaughtException( final Thread t, final Throwable e ) {
                ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:55:23.023

事实证明，Glassfish 没有必要这样做，因为 Glassfish 已经这样做了——但我在日志中查看了错误的位置。

异常被打印到主`server.log`文件 - 而不是我的应用程序自己的 log4j 日志文件。

# android - 有什么方法可以检查是否已经设置了闹钟？

> ID：10930034
> 
> 赞同：32
> 
> 时间：2012-06-07T10:30:04.140
> 
> 标签：android, alarmmanager

我被困住了。当我的应用程序启动时，我想检查我之前设置的警报是否存在。如果没有，那么我想设置它。

我提到了[这个解决方案](https://stackoverflow.com/questions/4556670/how-to-check-if-alarmmamager-already-has-an-alarm-set)。我试图匹配这样的意图：

```
Intent intent = new Intent();
        intent.setAction("com.vit.upload");
        PendingIntent pIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_NO_CREATE); 
```

但它不起作用。还有什么工作？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-14T04:51:44.333

首先，关于如何访问以前创建的警报的小教程：

您可以通过创建具有唯一 ID 的警报来区分警报，例如：

```
Intent intent = new Intent(this, AlarmReceiverActivity.class);
PendingIntent pi = PendingIntent.getActivity(this,UNIQUE_ID_GOES_HERE, intent, 0);
AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, triggerAtMillis ,pi); 
```

当您想要访问此警报时，您必须创建具有相同唯一 ID 的相同 PendingIntent。例如，以下将仅访问您使用 PendingIntent id 1234 创建的警报。然后它将取消前一个并重置它。

```
Intent intent = new Intent(this, AlarmReceiverActivity.class);
PendingIntent pi = PendingIntent.getBroadcast(this, 1234, intent, 0);
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, triggerAtMillis ,pi); 
```

这个想法很简单。跟踪 id，然后使用它们访问各自的警报。如果您创建多个具有相同 id 的警报，则最近的警报将取消上一个警报。

来到你的主要问题，而不是每次启动应用程序时检查警报是否处于活动状态，只需在 Activity 的`onCreate()`方法中重新设置它。与我上面描述的相同的 PendingIntent 。这样可以省去检查警报是否之前设置的所有麻烦。由于您的目标是让警报保持活跃，因此每次启动应用程序时覆盖先前设置的警报不会有什么坏处。只要确保你使用相同的 id 来创建你的 PendingIntent。

不要忘记检查您的闹钟时间是否已经过去，以避免尝试将闹钟设置为过去的时间，这将立即触发它。

让我们考虑另一种情况：当您关闭设备时，您的所有闹钟都将被取消。这使您别无选择，只能在重新启动时再次设置它们。为此，您必须使用[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

[这个答案](https://stackoverflow.com/questions/5290141/android-broadcastreceiver-on-startup)将帮助你如何做到这一点。只需按照上面的建议在 BroadcastReceiver 的 onReceive() 方法中重新创建警报。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T10:54:52.393

*   当您重新启动您的 Android 设备时，第一个警报将不起作用。
*   您可以使用布尔共享首选项来检查是否创建了警报。
*   Android 待定意图使用唯一 ID

    ```
    int REQUEST_CODE=2344; // Unique ID  
    PendingIntent pIntent = PendingIntent.getBroadcast(context, REQUEST_CODE, intent, PendingIntent.FLAG_NO_CREATE);
    ```

您必须在系统重新启动时使用 Boot Receiver 广播，然后使用相同的请求代码再次创建警报`REQUEST_CODE=2344;`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T10:11:34.320

基本上从我的经验来看，如果您使用相同的 Intent 和[FLAG_UPDATE_CURRENT](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_UPDATE_CURRENT)，您可以确定不会为相同的意图设置两个警报。您还可以仔细查看与 get 函数一起使用的 FLAG_NO_CREATE，如果具有描述意图的pendingintent 已经存在，则返回null [。](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_NO_CREATE)

还要记住对待处理的意图使用相同的请求 ID，因为它们是可区分的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T02:10:06.943

根据[此处](http://code.google.com/p/android/issues/detail?id=3776)的信息，您似乎无法直接检查警报是否存在，但它们确实提供了一些解决方法。

# javascript - 根据另一个输入更改表单字段的值

> ID：10930036
> 
> 赞同：1
> 
> 时间：2012-06-07T10:30:05.800
> 
> 标签：javascript

我将从代码开始：

```
<input type="text" name="13939069" alt="2171">
<input type="text" name="2171"> 
```

基本上名称是类别 ID，当存在 alt 值时，它是父类别的 id。

需要发生的是，当父类别的值发生变化时，子类别的值也会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:50:34.620

这是我为您的简单案例制作的小提琴：http: [//jsfiddle.net/shershen08/qhCUr/3/](http://jsfiddle.net/shershen08/qhCUr/3/)

# hadoop - Apache Pig：用字符串替换 null

> ID：10930037
> 
> 赞同：1
> 
> 时间：2012-06-07T10:30:14.900
> 
> 标签：hadoop, apache-pig

我的数据中有很多空条目。由于稍后的处理，如果我可以将 null 的默认值设置为字符串“其他”，这将非常有帮助。我找不到这样做的方法（版本 0.8.1-cdh3u4）

此外，我的 GENERATE 语句中有一些变量可能会返回 null，我需要类似于 SQL DECODE 函数的东西来获取“其他”字符串而不是 null。

例子：

```
tmp = FOREACH dump GENERATE site, REGEX_EXTRACT(name, '^(?:([^.]+)\\.?){1}', 1) AS project, ((ami MATCHES '.*datatype.*') ? REGEX_EXTRACT(name, '^(?:([^.]+)\\.?){5}', 1) : 'other') AS datatype, ami, duid, nbfiles, length, rnbfiles, rlength, name; 
```

这里：'site' 和 'datatype' 可以返回一个空字符串（这是有效的）并被解释为 null，但应该是“other”。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:32:30.853

所以我唯一能找到的是 ?: 三元运算符。这使得整个 pig 脚本有点冗长，但是很好，它可以工作:-)

```
(((ami MATCHES '.datatype.') ? REGEX_EXTRACT(name, '^(?:([^.]+)\.?){5}', 1) : 'other') IS NULL ? 'other' : ((ami MATCHES '.datatype.') ? REGEX_EXTRACT(name, '^(?:([^.]+)\.?){5}', 1) : 'other')) AS datatype 
```

# c# - 设置默认签名前景

> ID：10930040
> 
> 赞同：8
> 
> 时间：2012-06-07T10:30:27.673
> 
> 标签：c#, outlook

我做了一些东西来为用户生成签名，但现在我也想将它设置为默认签名。这将自动添加到您正在撰写或回复的新电子邮件中。

我无法找到任何示例或参考来说明我如何做到这一点。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-18T09:34:15.513

我发现通过 VSTO Word 对象设置签名更容易：

```
 static void SetDefault(string signature)
    {
        Word.Application oWord = new Word.Application();
        Word.EmailOptions oOptions;
        oOptions = oWord.Application.EmailOptions;
        oOptions.EmailSignature.NewMessageSignature = signature;
        oOptions.EmailSignature.ReplyMessageSignature = signature;
        //Release Word
        if (oOptions != null) System.Runtime.InteropServices.Marshal.ReleaseComObject(oOptions);
        if (oWord != null) System.Runtime.InteropServices.Marshal.ReleaseComObject(oWord);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T16:17:26.717

找到了一种使用注册表项执行此操作的方法。密钥位于 HKCU\Software\Microsoft\Windows NT\CurrentVersion\Windows 消息传递子系统\Profiles[OutlookProfilename]\9375CFF0413111d3B88A00104B2A6676

在那个密钥中，每个签名都会有多个文件夹 00000001 上升。如果您删除某人的 Windows 配置文件，则计数再次从 1 开始。

如果您在这里放置一个名为“新签名”或“回复转发签名”的 REG_Binary，则该值应该是十六进制格式的签名名称。假设签名名称是测试，它会变成
十六进制的 54 65 73 74。注册密钥会这样：
54006500730074000000000000000000000000

我希望我像这样清楚地表明自己：D 找到这个并不容易：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T06:29:13.307

每个帐户签名的名称存储在可通过`IOlkAccountManager`MAPI 接口访问的帐户配置文件数据中。由于该接口是扩展 MAPI，因此只能使用 C++ 或 Delphi 访问它。

Outlook 对象模型不公开签名或访问帐户的任意属性。

您可以在[OutlookSpy](http://www.dimastr.com/outspy)中看到数据- 单击 IOlkAccountManager，双击该帐户，新建和回复签名名称将分别在属性 0x0016001F 和 0x0017001F 中。

可以使用 IOlkAccount 接口上的扩展 MAPI（C++ 或 Delphi）设置这些属性。您还可以使用[Redemption](http://www.dimastr.com/redemption/)（任何语言）设置它们 - [RDOAccount](http://www.dimastr.com/redemption/RDOAccount.htm)对象公开 NewMessageSignature 和 Reply 属性以及 Fields[]（可用于设置任何属性）。

# spring - Spring 3 应用程序的 Rest Client 实现

> ID：10930042
> 
> 赞同：1
> 
> 时间：2012-06-07T10:30:28.910
> 
> 标签：spring, rest, http-headers, httpclient, rest-client

我需要为我的 Spring 3 Web 应用程序之一编写 Java API。我应该能够通过这些 API 执行我使用 Web UI 执行的所有操作。我有用@RequestMapping 装饰的控制器方法。我最近听说，这些方法可以公开为 Restful 服务，可以通过 REST 客户端访问，只需极少的修改。我只是想知道为 spring3 服务创建 Rest 客户端的推荐方法。我不想在这些 java API 中使用任何 spring 依赖项。我应该能够使用这些 API 上传文件，因为我在我的 spring 应用程序中实现了 multipart/form-data。有人可以帮我选择在 java 中为 Spring 应用程序开发 RestClients 的最佳方法吗？

我有以下 HTTP 实现：

Java - 使用 JVM 提供的 HTTP 实现。与 HttpClient 实现相比，这有一些限制。

HTTPClient3.1 - 使用 Apache Commons HttpClient 3.1。

HTTPClient4 - 使用 Apache HttpComponents HttpClient 4.x。

请让我知道你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:35:50.687

就个人而言，我使用 org.springframework.web.client.RestClient，因为您已经在使用 Spring。他们在管理你需要的东西方面做得很好，只要记住他们的例外，没有内容处理很糟糕。我必须做的唯一修改是覆盖它们`doExecute(URI, HttpMethod, RequestCallback, ResponseExtractor<T>)`并添加：

```
if (response.getStatusCode().equals(HttpStatus.NO_CONTENT)) {
    return null;
} 
```

前

```
if (!getErrorHandler().hasError(response)) { ... 
```

除了那个小怪癖（和一些自定义异常处理）之外，它还是一个很棒的工具。

# objective-c - 可以在单元测试中重置 dispatch_once 的状态，使它们再次运行

> ID：10930044
> 
> 赞同：34
> 
> 时间：2012-06-07T10:30:30.513
> 
> 标签：objective-c, grand-central-dispatch

是否可以在单元测试拆解中重置 dispatch_once 代码的状态？

我认为如果我们的单元测试可以从一个非常干净的状态运行会很好，但是我们正在努力处理 dispatch_once 和一些使用 dispatch once 制作的单例。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-07T18:51:32.607

我首先应该指出，除了测试之外，这在任何情况下都不是一件好事。即便如此，请谨慎行事——AliSoftware 在下面的评论中提供了一些细节和示例代码。[另请参阅可以将谓词声明`dispatch_once_t`为成员变量而不是静态](https://stackoverflow.com/q/13856037)的有趣答案吗？[，包括马口中的](https://stackoverflow.com/a/19845164/)一些重要信息。

`dispatch_once_t`是一个`typedef`d `long`。它的 false 值为 0。如果将该标志重置为 0，`dispatch_once()`将再次运行。您的问题是“只是”如何从另一个编译单元更改静态变量的值。为此，我认为您需要一个调试/单元测试挂钩，如下所示：

MakeWhoopie.h

```
#import <Foundation/Foundation.h>

void makeWhoopie(void);

#ifdef DEBUG
void resetDispatchOnce(void);
#endif 
```

MakeWhoopie.m

```
#include "MakeWhoopie.h"

static dispatch_once_t * once_token_debug;

void makeWhoopie(void)
{

    static dispatch_once_t once_token;
    once_token_debug = &once_token;    // Store address of once_token
                                       // to access it in debug function.
    dispatch_once(&once_token, ^{
        NSLog(@"That's what you get, folks.");
    });

    NSLog(@"Making whoopie.");
}

#ifdef DEBUG
void resetDispatchOnce(void)
{
    *once_token_debug = 0;
}
#endif 
```

（您也可以`once_token`向上移动到文件级别并直接更改它。）

试试这个：

```
#import <Foundation/Foundation.h>
#import "MakeWhoopie.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        makeWhoopie();
        makeWhoopie();
        resetDispatchOnce();
        makeWhoopie();
    }
    return 0;
} 
```

结果是：

> 2012-06-07 18:45:28.134 ResetDispatchOnce[8628:403] 这就是你得到的，伙计们。
> 2012-06-07 18:45:28.163 ResetDispatchOnce[8628:403] 大惊小怪。
> 2012-06-07 18:45:28.164 ResetDispatchOnce[8628:403] 大惊小怪。
> 2012-06-07 18:45:28.165 ResetDispatchOnce[8628:403] 这就是你得到的，伙计们。
> 2012-06-07 18:45:28.165 ResetDispatchOnce[8628:403] 大惊小怪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T23:25:01.487

我们也对我们的单例进行单元测试，偶尔需要用模拟对象替换它们或重置它们。我接受了乔希的回答并进一步简化了它：

```
static ArticleManager *_sharedInstance = nil;
static dispatch_once_t once_token = 0;

+(ArticleManager *)sharedInstance {
    dispatch_once(&once_token, ^{
        if (_sharedInstance == nil) {
            _sharedInstance = [[ArticleManager alloc] init];
        }
    });
    return _sharedInstance;
}

+(void)setSharedInstance:(ArticleManager *)instance {
    if (instance == nil) once_token = 0;
    _sharedInstance = instance;
} 
```

# wordpress - 在我的 wordpress 网站上显示第三方提要

> ID：10930045
> 
> 赞同：0
> 
> 时间：2012-06-07T10:30:35.630
> 
> 标签：wordpress, rss

我有这个 wordpress 网站，类别的提要显示为[http://site.com/category/category_name/feed](http://site.com/category/category_name/feed)。这显示了“category_name”类别的所有帖子。我在这里想要的是显示从我的其他站点之一托管的自定义提要，而不是默认的 wordpress rss 提要。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:36:37.233

试试这个

```
$xml = '//site.com/category/category_name/feed';
            $doc = new DOMDocument();
            $doc->load($xml);
            $item = $doc->getElementsByTagName('item');

            //$data = array();

            for($i=0; $i<=3; $i++){
                $title = $item->item($i)->getElementsByTagName('title')->item(0)->childNodes->item(0)->nodeValue;
                $link = $item->item($i)->getElementsByTagName('link')->item(0)->childNodes->item(0)->nodeValue;
                echo '<a href="' . $link . '" target="_blank"><h2>' . $title . '</h2></a>';
            } 
```

并从您要显示提要的位置过去这个 php 代码..

有关更多信息，请~~[访问使用 php 访问跨域提要，](http://blog.webtech11.com/2012/05/30/display-cross-domain-feeds-with-php.html)~~希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:56:38.303

有许多不同的方法可以在 WP 站点中显示来自另一个站点的提要，要么只是提要，要么是完整的提要内容作为帖子。

见[FeedWordPress |](http://feedwordpress.radgeek.com/) WordPress和WordPress[的简单灵活的 Atom/RSS 联合](http://feedwordpress.radgeek.com/)[› SimplePie WordPress 插件 « WordPress 插件](http://wordpress.org/extend/plugins/simplepie-plugin-for-wordpress/)和[开发人员指南 - Google AJAX Feed API - Google Code](https://developers.google.com/feed/) and [Magpie RSS - PHP RSS Parser](http://magpierss.sourceforge.net/)

# jquery - 获取具有特定值的复选框

> ID：10930048
> 
> 赞同：34
> 
> 时间：2012-06-07T10:30:54.397
> 
> 标签：jquery, checkbox

我想获得具有特定值的复选框并使其选中..

我这样做

```
$(":checkbox").filter({"value":5}).attr("checked","true");​ 
```

这是html

```
​&lt;input type="checkbox" name="priv"​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ value="1"​​​​​​​​​​​​​​​​​/>
<input type="checkbox" name="priv" value="2"/>
<input type="checkbox" name="priv" value="3"/>
<input type="checkbox" name="priv" value="4"/>
<input type="checkbox" name="priv" value="5"/>
<input type="checkbox" name="priv" value="6"/>
<input type="checkbox" name="priv" value="7"/>
 <input type="checkbox" name="priv" value="8"/>​ 
```

这是问题的[演示](http://jsfiddle.net/2wnUJ/)

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-07T10:32:45.940

您可以使用[属性等于选择器 [name="value"]](https://api.jquery.com/attribute-equals-selector/)来获取具有特定值的复选框。也使用[prop()](http://api.jquery.com/prop/)而不是[attr()作为](https://api.jquery.com/attr/)[jQuery doc](https://api.jquery.com/attr/)推荐的方式。

[**现场演示**](http://jsfiddle.net/LCU4C/2/)

```
$(":checkbox[value=4]").prop("checked","true"); 
```

或者

```
$("input[type=checkbox][value=5]").prop("checked",true); 
```

**描述：**选择具有指定属性的元素，该属性的值与某个值完全相同，[jQuery doc](https://api.jquery.com/attribute-equals-selector/)。

您也可以使用 attr() 但 prop 更适合布尔属性。

```
$(":checkbox[value=4]").attr("checked","true"); 
```

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法，[jQuery doc](https://api.jquery.com/attr/)

**编辑**，在评论中询问，“*具有复杂值的答案/查找表达式看起来如何，例如 value="Smith, David* "

您可以用单引号将*Smith、David等值括起来。*您甚至可以使用 jQuery 使用的字符，例如 #、.、$ 等，请参阅[此处](http://jsfiddle.net/LCU4C/433/)更新的小提琴。

```
$("input[type=checkbox][value='#Smith, David$']").attr("checked","true"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-07T10:43:12.787

```
$(":checkbox").filter(function() {
  return this.value == '5';
}).prop("checked","true");​ 
```

[**演示**](http://jsfiddle.net/59hHK/)

如果您想将其用于不同的值，请使其通用，如下所示：

```
function checkWithValue(val) {
    $(":checkbox").filter(function() {
        return this.value == val;
    }).prop("checked", "true");
}

checkWithValue(5);​ 
```

**[演示](http://jsfiddle.net/59hHK/3/)**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T10:42:29.230

```
$("input:checkbox[value='5']").attr("checked","true") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-23T19:33:45.200

我有一个需要循环的动态值。这对我有用：

```
for (var i = 0, len = value.length; i < len; i++) {
  $("#form-name").find("input[type=checkbox][name='fName']").filter(function () {
    return this.value == values[i];
  }).prop("checked", true);
} 
```

希望能帮助别人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T10:43:47.860

它也适用于方形练习

```
 $(":checkbox").filter(["value":5]).prop("checked","true"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-01T13:25:25.387

**Sometimes we want to get checkbox dynamically for a specific value.**

```
$(document).on('click','.at-filter a', function(){
    var aaa = $(this).parent().find("em").html();
    $("input[type=checkbox][value='"+aaa+"']").prop('checked',false)
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T10:33:45.303

```
$(":checkbox[value=5]").attr("checked",true);​​​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-08T21:29:07.683

```
$("#catalogTBL").find("input[type=checkbox][value='snet']").prop("checked", true); 
```

这是我可以让它工作的唯一方法。在表格中寻找复选框。

# android - 在android中创建一个带有垂直分隔符、固定列长度和标题的表格

> ID：10930050
> 
> 赞同：0
> 
> 时间：2012-06-07T10:31:00.767
> 
> 标签：android, file, android-layout, tableview

我正在尝试在 Android 布局中创建一个表格。我希望这个表是一个普通的表，比如 gridView 或 datagridView，你可以使用 Microsoft Word 获得同一个表：

我想定义列的长度（因此下面的文本将是直的）以及列和行之间的分隔符，当然还有一个不错的列标题。

到目前为止，我尝试使用 TableLayout，但它不一样：

1.  文本未对齐 - 根据文本长度，各列不会在另一列之下，因为每一行只是一个字符串。

2.  列之间没有分隔符。

我在每行之后将其添加到 TableLayout 中的行之间的分隔：

```
View v = new View(this);
 v.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, 1));
 v.setBackgroundColor(Color.rgb(51, 51, 51)); 
```

我想要实现的是用户将能够查看我正在为他编写的文件。此文件以制表符分隔（在列之间），通过在计算机上使用 Excel 打开它，它显示为表格。

如果有另一种方式（而不是我试图创建的这个表）来查看这个制表符分隔的文件，我会很高兴知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:46:36.180

查看Android SDK 附带的 ApiDemos 示例中的 FixedGridLayout.java[链接。](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/FixedGridLayout.html)要了解如何实现它，请参见 com.example.android.apis.animation.LayoutAnimations.java[链接](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/LayoutAnimations.html)

# background - 根据值更改文本框背景颜色

> ID：10930051
> 
> 赞同：0
> 
> 时间：2012-06-07T10:31:02.640
> 
> 标签：background, textbox

嗨，我有一个文本框字段，其中可以包含 1 - 6 或更多之间的数字。1-3 为绿色 4-5 为橙色 6 以上为红色

此字段根据从其他字段中选择的值自动计算。

```
function changeColour() {
if (document.getElementById("Q49I1029").value > 0) {  
document.getElementById("Q49I1029").style.background = '#00FF33'; // Green
}
else if (document.getElementById("Q49I1029").value > 3) {
document.getElementById("Q49I1029").style.background = '#EC582D'; // Orange
}
else (document.getElementById("Q49I1029").value > 5) {
document.getElementById("Q49I1029").style.background = '#990000'; // Reg
}
alert ("This box must be filled!");
document.getElementById("Q49I1029").focus();
return false;
} 
```

但我无法让它发挥作用。任何帮助都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:45:56.163

仅对所有条件使用 IF 语句。

删除“else if”和“else”。

# .net - .NET TcpClient/NetworkStream 实现，支持异步操作并遵守超时

> ID：10930052
> 
> 赞同：5
> 
> 时间：2012-06-07T10:31:02.900
> 
> 标签：.net, tcpclient, asyncsocket, networkstream, base-class-library

根据问题、论坛帖子等的数量，BCL 中的 TcpClient/NetworkStream 实现似乎缺乏对取消 IO 操作的良好支持。随着在 .NET 4.5 中添加 Async 方法，这种取消（或体面的超时支持）的缺乏使事情变得更加令人沮丧，因为在执行 IO 时取消拒绝监视其 CancellationToken 的任务变得更加复杂（几乎不可能） .

我见过许多实现，它们会启动额外的线程来监视网络操作并在出现问题时关闭底层流。在我们试图通过使用异步操作来节省这些资源的世界中​​，这感觉非常肮脏。

任何人都可以向我指出如何有效地取消/超时网络 IO 操作或实现真正有效的强大的第 3 方实施的指导方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:44:58.743

取消 IO 并非易事。从 Vista 开始，我们有 CancelIO 功能，但这是一个相当新的东西，驱动程序需要支持它。

实际上，您能做的最好的事情就是关闭套接字以取消所有内容。或者，您可以围绕一个任务实现一个包装函数，该函数在 CancellationToken 被设置时提供即时完成。IO 操作仍将继续，但其结果将被丢弃。

这是关于这个问题的彻底讨论： http: [//social.msdn.microsoft.com/Forums/da-DK/async/thread/54632b19-0e9c-4078-aa59-c4389e75b187](http://social.msdn.microsoft.com/Forums/da-DK/async/thread/54632b19-0e9c-4078-aa59-c4389e75b187)

# sql - 在实体创建期间休眠关联违反约束

> ID：10930054
> 
> 赞同：0
> 
> 时间：2012-06-07T10:31:10.720
> 
> 标签：sql, hibernate

我有实体到实体的`one to many`关联。`Student``Subject`

`Student`实体关联映射是

```
<class name="Student" table="STUDENT">
    <id name="studentId" column="STUD_ID">
        <generator class="increment"/>
    </id>
    <property name="studentName" column="STUD_NAME"/>
   <list access="field" lazy="false" name="subjects" cascade="all-delete-orphan" fetch="subselect">
     <key column="STUD_ID" />
     <list-index column="SUBJECT_ORDER_ID" />
     <one-to-many class="com.sample.Subject" />
    </list>
</class> 
```

主题表映射是

```
<class name="Subject" table="SUBJECT">
    <id name="subjectId" column="SUB_ID">
        <generator class="increment"/>
    </id>
   <property name="subjectName" column="SUB_NAME"/>

</class> 
```

我在表中有一个表级约束，`SUBJECT`并且`STUDENT_ID`不`SUBJECT_ORDER_ID` 应该是`null`。

```
ALTER TABLE SUBJECT ADD CONSTRAINT CHK_FIELD CHECK(STUD_ID IS NOT NULL AND SUBJECT_ORDER_ID IS NOT NULL) 
```

保存这些条目的主类

```
public static void main(String[] args) {
         Session session = HibernateHelper.getSessionFactory().getCurrentSession();
         session.beginTransaction();

          Subject subject = new Subject();
          subject.setSubjectName("Test Subject2");
         // session.save(subject);
          List<Subject> subjects  = new ArrayList<Subject>();
          subjects.add(subject);
         Student student = new Student();
         student.setStudentName("Test student2");
         student.setSubjects(subjects);

         session.save(student);
         session.getTransaction().commit();
    } 
```

当`Student`实体被创建时关联`Subject`。Hibernate 正在尝试`Subject`使用空创建实体，`STUD_ID`然后`SUBJCT_ORDER_ID`再分配映射。因此，`Subject`由于违反约束，实体创建失败。异常日志是

```
Hibernate: select max(STUD_ID) from STUDENT
Hibernate: select max(SUB_ID) from SUBJECT
Hibernate: insert into STUDENT (STUD_NAME, STUD_ID) values (?, ?)
Hibernate: insert into SUBJECT (SUB_NAME, SUB_ID) values (?, ?)
2012-06-07 17:26:52,484 [main] ERROR org.hibernate.util.JDBCExceptionReporter - Check constraint violation: "CHK_FIELD: ((STUD_ID IS NOT NULL)
    AND (SUBJECT_ORDER_ID IS NOT NULL))"; SQL statement:
insert into SUBJECT (SUB_NAME, SUB_ID) values (?, ?) [23513-164]
2012-06-07 17:26:52,484 [main] ERROR org.hibernate.util.JDBCExceptionReporter - Check constraint violation: "CHK_FIELD: ((STUD_ID IS NOT NULL)
    AND (SUBJECT_ORDER_ID IS NOT NULL))"; SQL statement:
insert into SUBJECT (SUB_NAME, SUB_ID) values (?, ?) [23513-164]
Exception in thread "main" org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:96)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
    at com.sample.TestMain.main(TestMain.java:27)
Caused by: org.h2.jdbc.JdbcBatchUpdateException: Check constraint violation: "CHK_FIELD: ((STUD_ID IS NOT NULL)
    AND (SUBJECT_ORDER_ID IS NOT NULL))"; SQL statement:
insert into SUBJECT (SUB_NAME, SUB_ID) values (?, ?) [23513-164]
    at org.h2.jdbc.JdbcPreparedStatement.executeBatch(JdbcPreparedStatement.java:1107)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 8 more 
```

当我禁用约束 CHK_FIELD:`STUD_ID`并且`SUBJECT_ORDER_ID` 不应该为空时，两个实体都成功创建。请帮我弄清楚我是否错过了任何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:41:47.927

使用注释你可以这样做 -

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
@JoinColumn(name = "STUDENT_ID",nullable=false)
@ForeignKey(name = "fk_student")     
private List<Subject> subjects= new ArrayList<Subject>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:26:35.550

此实体创建 Student 和 Subject 分三步完成

1.  创建学生实体
2.  创建所有主题实体
3.  在所有主题实体中设置 STUD_ID

由于 Subject 实体有约束 STUD_ID 不应为空。第二步违反了这个约束。

# python - 在 zope 中流式传输 xls 文件

> ID：10930058
> 
> 赞同：0
> 
> 时间：2012-06-07T10:31:35.897
> 
> 标签：python, zope, zope3

我在使用 zope 时遇到问题。我只需要向客户端提供一个使用 python xlwt 模块创建的 xls 文件，但我找不到这样做的方法。

在我的 .pt 文件中，我有一个调用 .py 函数的按钮，该函数会正确创建文件，但不会将其提供给客户端浏览器。我正在尝试这种方式：

```
f = open(temp_file, 'rb').read()
self.request.response.setHeader('Content-Type', 'application/vnd.ms-excel')
self.request.response.setHeader('Content-Disposition',' attachment; filename=Excel_Workbook.xls')
return f 
```

我怎样才能做到这一点？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:33:56.043

你如何调用脚本？您需要直接从 URL 调用它，而不是从您的模板。

在您的模板中包含一个*指向*您的 python 脚本的下载 URL：

```
<a href="http://yoursite/path/to/script">Download an Excel spreadsheet</a> 
```

# iphone - 在objective c中编写一个简单的c++函数

> ID：10930060
> 
> 赞同：0
> 
> 时间：2012-06-07T10:31:44.473
> 
> 标签：iphone, c++, objective-c, cocoa

我正在努力让我的生活更轻松一些。我从 NSDictionary 获得了很多值，如下所示：

```
//First, make sure the object exist 
if ([myDict objectForKey: @"value"])
{
     NSString *string = [myDict objectForKey: @"value"]; 
     //Maybe do other things with the string here... 
} 
```

我有一个文件（Variables.h），我在其中存储了很多东西来控制应用程序。如果在那里放一些辅助方法会很好。所以我不想做上面的代码，而是想在 Variables.h 中有一个 c++ 函数，所以我可以这样做：

```
NSString *string = GetDictValue(myDictionary, @"value"); 
```

你怎么写那个c++方法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:50:44.590

我想这在技术上是 ac 函数，是 c++ 的严格要求吗

```
static NSString* GetDictValue(NSDictionary* dict, NSString* key)
{
    if ([dict objectForKey:key])
    {
         NSString *string = [dict objectForKey:key]; 
         return string;
    }
    else 
    {
        return nil;
    }
} 
```

考虑`id`在必要时使用和强制转换：

```
static id GetDictValue(NSDictionary* dict, NSString* key)
{
    if ([dict objectForKey:key])
    {
         id value = [dict objectForKey:key]; 
         return value;
    }
    else 
    {
        return nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:43:55.290

就个人而言，我会像这样重写您的测试以摆脱查找：

```
NSString *string = [myDict objectForKey: @"value"]; 
if (string)
{
     // Do stuff.
} 
```

但是，如果您想要缺少键的默认值并且它不必*是*C++ 函数，我相信更惯用的解决方案是使用类别来扩展 NSDictionary。

完全未经测试和未编译的代码：

```
@interface NSDictionary (MyNSDictionaryExtensions)
- (NSString*) objectForKey: (NSString*) key withDefaultValue: (NSString*) theDefault;
- (NSString*) safeObjectForKey: (NSString*) key;
@end

@implementation NSDictionary (MyNSDictionaryExtensions)
- (NSString*) objectForKey: (NSString*) key withDefaultValue: (NSString*) theDefault
{
    NSString* value = (NSString*) [self objectForKey: key];
    return value ? value : theDefault;
}
- (NSString*) safeObjectForKey: (NSString*) key
{
    return [self objectForKey: key withDefaultValue: @"Nope, not here"];
}
@end 
```

# android - 在android中单击按钮时如何构造json对象

> ID：10930064
> 
> 赞同：2
> 
> 时间：2012-06-07T10:32:14.493
> 
> 标签：android

我有 2 个活动。我正在从 FirstActivity 切换到 SecondActivity。在 SecondActivity 我可以添加一些行，这些行包含 3 个文本视图及其值和图像。在 SecondActivity 中有一个名为“完成”的按钮。单击此按钮，我想创建包含 textviews 值和图像的 JSONObject。是否可以？

请任何人帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:30:24.500

当然有可能。在 onClick 方法中实现 jsonObject 的创建，使用 findViewById(R.id.objectID) 获取您的对象，读取您需要的值，您的 jsonObject 有 putString() 方法。

# excel - Excel vba如何将范围传递给函数从mysql检索数据

> ID：10930067
> 
> 赞同：0
> 
> 时间：2012-06-07T10:32:37.597
> 
> 标签：excel, vba

我编写了一个 vba 将范围的偏移量作为另一个函数的查询表的输入传递，但我遇到了错误。

```
Sub test2()

Dim LastCol As Long
With ThisWorkbook.Sheets("Summary (AIX)")
LastCol = .Range("A2").SpecialCells(xlCellTypeLastCell).Column
End With

Dim r As Long
Dim ser_name As String
Dim y As String

For r = (LastCol - 1) To 2 Step -2
With ThisWorkbook.Sheets("Summary (AIX)")
y = Cells(2 + 2, r + 1).Address(RowAbsolute:=False, ColumnAbsolute:=False)

MsgBox CStr(Cells(2, r).Value)
ser_name = CStr(Cells(2, r).Value)
get_unix_avg_cpu ser_name, y
End With
Next r
End Sub 
```

==================================================== ========================

```
Sub get_unix_avg_cpu(server_hostname, x)

Dim oRS As ADODB.Recordset
Dim ConnString As String
Dim SQL As String

Dim qt As QueryTable
ThisWorkbook.Sheets(server_hostname).Activate

ConnString = "Driver={MySQL ODBC 5.1 Driver};Server=localhost;Database=test;User=root;Password=123456;Option=3;"
Set oCn = New ADODB.Connection
oCn.ConnectionString = ConnString
oCn.Open

SQL = "SELECT cpu_max_unix_0.CPU FROM test.cpu_max_unix cpu_max_unix_0 where cpu_max_unix_0.SERVER_NAME='" & server_hostname & "' Order By cpu_max_unix_0.LOGDATE"

Set oRS = New ADODB.Recordset
oRS.Source = SQL
oRS.ActiveConnection = oCn
oRS.Open

Set qt = ThisWorkbook.Sheets("Summary (AIX)").QueryTables.Add(Connection:=oRS, _
Destination:=ThisWorkbook.Sheets("Summary (AIX)").Range(x))

qt.Refresh

If oRS.State <> adStateClosed Then
oRS.Close
End If

If Not oRS Is Nothing Then Set oRS = Nothing
If Not oCn Is Nothing Then Set oCn = Nothing

End Sub 
```

停止“Sub get_unix_avg_cpu(server_hostname, x)”编译错误：未定义用户定义类型

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:42:35.740

ADODB 是一个外部库，这意味着它没有内置在 Excel 中，因此您需要将其添加到您的项目中。

为此，在 IDE 中单击工具 > 参考

然后向下滚动，直到找到“Microsoft ActiveX 数据对象”，其中会有一些，因此选择具有最高数字的一个，勾选它，然后按确定。

然后，您应该能够运行您的代码。

这种方法称为早期绑定，为了让您的工作簿为其他人工作，他们还需要在他们的计算机上安装此参考。通常，在开发时最好使用运行代码的最低版本的库。您也可以使用后期绑定。

# macos - Mac 服务（相当于 Windows 服务）

> ID：10930072
> 
> 赞同：1
> 
> 时间：2012-06-07T10:33:06.443
> 
> 标签：macos, service, daemon

我想创建一个 Mac 服务（相当于 Windows 服务），它应该继续在后台运行，我想从我的客户端应用程序 (GUI) 向它传递一些参数。

您能否给我一些示例/教程，清楚地解释这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-20T16:57:09.010

这是我刚刚为您入门而制作的 Mac 上的服务示例：

## 创建文件夹的 ISO 映像

[Matt Berther](https://matt.berther.io/2008/12/14/creating-iso-images-from-a-folder-in-osx/)提交了这个方便的终端脚本，用于从 OS X 中的文件夹创建 ISO 映像。我知道我很快就会忘记如何执行此操作，因此我为此做了一个方便的服务。

**第 1 步：** 打开 Automator < 创建一个新的***“服务”***

**步骤 2：** 搜索***“运行 Shell 脚本”***操作并将其拖到右侧的主面板上。

**第 3 步：**

1.  将“服务接收选定”下拉菜单设置为“文件夹”
2.  将“in application”下拉菜单设置为“Finder”
3.  将“Shell”下拉菜单设置为“/usr/bin/python”
4.  将“将输入传递为”下拉菜单设置为“作为参数”

**第 4 步：** 在脚本本身中，将现有代码替换为以下代码：

```
import sys
from subprocess import call

call('hdiutil makehybrid -o {0}.iso {0} -iso -joliet'.format(sys.argv[1]), shell=True) 
```

将服务另存为“创建 ISO”。退出自动机。

**第 5 步：**

1.  ***使用鼠标访问：***当您在 Finder 中右键单击文件夹时，您现在应该会在菜单中看到新服务。如果您已经创建了大量服务（如我），那么它将嵌套在右键单击的“服务”子菜单中。

2.  ***使用键盘快捷键访问：*** 如果这是您经常使用的服务，您可以为其分配键盘快捷键：

    *   打开系统偏好设置>键盘>快捷键
    *   单击左侧菜单上的服务
    *   找到您刚刚创建的服务 > 添加密钥对以创建快捷方式。

**第 6 步（可选）：调试 PBS** [来源：[一个非常古老的 Macworld 提示]](http://hints.macworld.com/article.php?story=20100805100621261)

有时 Snow Leopard 中的服务会无缘无故停止工作。右键单击时上下文菜单项中缺少该菜单，并且菜单栏中的“服务”菜单仅显示“正在构建...”其他时候，同一服务可能有多个条目。这些问题总是可以（根据我的经验）在不注销或重新启动的情况下得到纠正。

技术很简单。在终端窗口中运行以下命令：

```
/System/Library/CoreServices/pbs 
```

您的服务现在应该可以工作了。

> [crarko @Macworld 补充说：多一点解释对这个有好处；pbs 实用程序是一个与 Cocoa 中的粘贴板服务相关的调试工具（点击链接，并向下滚动到底部的“测试”）。运行它将强制重新扫描服务，这就是上述工作的原因。早在 2004 年的一个提示中就提到过它，所以它已经存在了一段时间。我怀疑是否有人注意到 10.6 之前的服务是否存在问题。Apple 提到它可能会在某个时候更改或被删除，所以不要无限期地依赖它。]

# jquery - 做这个jQuery的更聪明的方法？

> ID：10930074
> 
> 赞同：1
> 
> 时间：2012-06-07T10:33:21.700
> 
> 标签：jquery

我的网站上有一张地图，单击区域应该切换一个类，在悬停和单击时，我已经制作了一个 jQuery 解决方案来做到这一点，但是，我认为它可以做得比我做得更聪明它？我的 HTML 输出是这样的：

```
<div class="mapdk">
                <a data-class="nordjylland" class="nordjylland" href="#"><span>Nordjylland</span></a>
                <a data-class="midtjylland" class="midtjylland" href="#"><span>Midtjylland</span></a>
                <a data-class="syddanmark" class="syddanmark" href="#"><span>Syddanmark</span></a>
                <a data-class="sjaelland" class="sjalland" href="#"><span>Sjælland</span></a>
                <a data-class="hovedstaden" class="hovedstaden" href="#"><span>Hovedstaden</span></a>
            </div> 
```

我的 jQuery 看起来像：

```
if ($jq(".area .mapdk").length) {
    $jq(".mapdk a.nordjylland").hover(function () {
        $jq(".mapdk").toggleClass("nordjylland");
    }).click(function () {
        $jq(".mapdk").toggleClass("nordjylland");
    });
    $jq(".mapdk a.midtjylland").hover(function () {
        $jq(".mapdk").toggleClass("midtjylland");
    }).click(function () {
        $jq(".mapdk").toggleClass("midtjylland");
    });
} 
```

问题是，根据我所做的，我必须为我拥有的每个链接创建一个悬停和单击功能 - 我想我可以将它保持在一个悬停，单击功能，然后使用类似 $ jq（这个）？但不确定如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:37:05.990

你需要利用`$jq(this)`. `$jq(this)`指调用事件监听器的元素。

例如：

```
$jq(".mapdk a").hover(function () {
        $jq(this).parents(".mapdk").toggleClass($jq(this).data("class"));
    }).click(function () {
        $jq(this).parents(".mapdk").toggleClass($jq(this).data("class"));
    }); 
```

分解它：

*   `$jq(this)`调用被悬停的元素（即锚元素）。
*   `.parents(".mapdk")`找到班级的第一个父母`.mapdk`
*   `$jq(this).data("class")``data-class`从你的锚元素中获取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:38:36.927

使用这个选择器

```
if ($jq(".area .mapdk").length) {
    $jq(".mapdk a").hover(function () {
        $jq(".mapdk").toggleClass($jq(this).attr("class"));
    }).click(function () {
        $jq(".mapdk").toggleClass($jq(this).attr("class"));
    });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:41:52.770

您可以使用 jQuery 的 each 函数来迭代 .mapdk 中的所有锚标记

**免责声明**我假设您只希望设置父 .mapdk 的类。如果您有多个该类（不是锚的父级），那么下面的代码将无法作为您的代码，但我假设您不想为所有 .mapdk 设置类，无论您悬停哪个锚/点击。

```
//Since the function is the same for all event handlers let's just declare that once
var handler = function () {
        var $this = $jq(this);
        $this.parents(".mapdk").toggleClass($this.attr("class"));
};
//find all the anchor tags within .mapdk that has a class specified
$jq(".mapdk a[class]").each(function{
    this.hover(handler).click(handler);
}); 
```

# android - Android开发：simple_list_item1和simple_list_item2有什么区别？

> ID：10930075
> 
> 赞同：0
> 
> 时间：2012-06-07T10:33:22.103
> 
> 标签：android, listview, android-arrayadapter

我知道 simple_list_item1 在 Android 中用于创建 ListView。simple_list_item2 是做什么用的？另外，如何更改 ListView 的整体外观？

示例代码：ListView lv; lv.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, results));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:36:23.180

simple_list_item2 是一个 LineListItem 意味着只有一个 TextView

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@android:id/text1" android:layout_width="match_parent" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceListItemSmall" android:gravity="center_vertical" android:paddingLeft="?android:attr/listPreferredItemPaddingLeft" android:paddingRight="?android:attr/listPreferredItemPaddingRight" android:minHeight="?android:attr/listPreferredItemHeightSmall" /> 
```

simple_list_item2 是 TwoLineListItem 表示有 2 个 TextViews......

```
 <TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="wrap_content" android:minHeight="?android:attr/listPreferredItemHeight" android:mode="twoLine">

      <TextView android:id="@android:id/text1" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="?android:attr/listPreferredItemPaddingLeft" android:layout_marginTop="8dip" android:textAppearance="?android:attr/textAppearanceListItem" />

      <TextView android:id="@android:id/text2" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_below="@android:id/text1" android:layout_alignLeft="@android:id/text1" android:textAppearance="?android:attr/textAppearanceSmall" />

</TwoLineListItem> 
```

用于[http://mylifewithandroid.blogspot.in/2008/03/my-first-meeting-with-simpleadapter.html](http://mylifewithandroid.blogspot.in/2008/03/my-first-meeting-with-simpleadapter.html)

# javascript - 正则表达式匹配 JavaScript 中某些字符中不包含的字符串？

> ID：10930076
> 
> 赞同：1
> 
> 时间：2012-06-07T10:33:26.007
> 
> 标签：javascript, regex, replace

我正在尝试用 JavaScript 中的正则表达式替换字符串的某些部分，但前提是它们没有包含在`{{{`and`}}}`中。

我目前使用的系统会进行多个字符串替换，并将替换内容包含在这些括号中。因此，如果我用星期几（比如说星期四）替换“h”，替换将输出`"{{{Thursday}}}"`. 如果替换再次发生，则字符串最终将变为`"{{{T{{{Thursday}}}ursday}}}"`星期四中的“h”已被替换。

我正在寻找的是一个正则表达式模式，它将替换“h”，但前提是它不包含在`{{{`and`}}}`包装器中。

提前致谢 ：）

编辑：

这是一些示例代码。每个替换都包含在括号中，正则表达式模式使用 (?!{{{) 和 (?!}}}) 以避免过去的替换。

```
var string = 'n d m y',
    dayTextRegex = /(?!{{{)n(?!}}})/g,
    dayRegex = /(?!{{{)d(?!}}})/g,
    monthRegex = /(?!{{{)m(?!}}})/g,
    yearRegex = /(?!{{{)y(?!}}})/g;

string = string.replace(dayTextRegex, '{{{Monday}}}');
string = string.replace(dayRegex, '{{{04}}}');
string = string.replace(monthRegex, '{{{June}}}');
string = string.replace(yearRegex, '{{{2012}}}');

//string is now equal to "{{{Mon{{{04}}}ay}}} {{{04}}} {{{June}}} {{{2012}}}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:54:34.123

**更新**

刚刚意识到这行不通，但现在把它留在这里，直到我弄明白为止。尽管如此，这很有趣:)

模仿正则表达式中的lookbehind和lookbehind断言：

```
var str = '{{{h}}}';
str.replace(/({{{)?h(}}})?/g, function($0, $1, $2) { 
    return $1 && $2 ? $0 : '{{{' +$0 + '}}}';
}); 
```

回报：

```
{{{h}}} 
```

另见：http: [//blog.stevenlevithan.com/archives/mimic-lookbehind-javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)

**更新 2**

看看你是如何使用表达式的，我会用这个结构来代替：

```
string.replace(/[ndmy]/g, function($0) {
    switch ($0) {
        case 'n':
            return '{{{Monday}}}';

        case 'd':
            return '{{{04}}}';

        case 'm':
            return '{{{June}}}';

        case 'y':
            return '{{{2012}}}';
    }
}) 
```

输出：

```
{{{Monday}}} {{{04}}} {{{June}}} {{{2012}}} 
```

这基本上执行了没有重叠的替换，因此您不必担心以前的大括号表达式。

# ruby-on-rails - Nokogiri 解析 xml 的问题

> ID：10930081
> 
> 赞同：0
> 
> 时间：2012-06-07T10:33:38.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nokogiri

在我的控制器中，我有：

```
xml_doc.xpath('//locale').map do |i|
Thing.create!(:name => i.xpath('englishName').inner_text, :lang => i.xpath('representation').inner_text)
end 
```

xml 文档是： http: [//www.facebook.com/translations/FacebookLocales.xml](http://www.facebook.com/translations/FacebookLocales.xml)

问题是 lang 列设置为：

```
af_ZAar_ARaz_AZbe_BYbg_BGbn_INbs_BAca_EScs_CZcy_G... 
```

对于创建的每个元素。

问题： ![在此处输入图像描述](../Images/d0f02e6e0389c45d9cc8b39bb3aabd1c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:58:14.483

最终的问题是 与`representation`不在同一级别`englishName`：

```
xml_doc.xpath('//locale').map do |i|
  englishName = i.xpath('englishName').inner_text

  # Or just ".//representation", or if there may be multiple codes, you
  # need to be even more clever about determining which to use.
  representation = i.xpath('codes/code/standard/representation').inner_text

  puts "#{englishName} - #{representation}"
end 
```

输出（截断）：

```
Thai - th_TH
Filipino - tl_PH
Turkish - tr_TR
Ukrainian - uk_UA
Vietnamese - vi_VN
Simplified Chinese (China) - zh_CN
Traditional Chinese (Hong Kong) - zh_HK
Traditional Chinese (Taiwan) - zh_TW 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:46:33.473

只需稍作改动即可修复它：

```
xml_doc.xpath('//locale').map do |i|
    Thing.create!(:name => i.xpath('englishName').inner_text, :lang => i.xpath('.//representation').inner_text)
end 
```

我`'representation'`改为`'.//representation'`因为`representation`不是`locale`. 我刚刚对其进行了测试，并且效果很好。

# javascript - 将包含的已加载 javascript 分配给变量

> ID：10930082
> 
> 赞同：0
> 
> 时间：2012-06-07T10:33:40.967
> 
> 标签：javascript, jquery, json

我正在创建一个简单的离线 javascript 应用程序，它将通过 CD 或其他媒体分发给客户端。在 HTML 文件的头部，我加载了最新的“jquery”脚本，然后是另一个文件（“webpages.js”），其内容是以下 json 格式的字符串：

```
[
  {
    "id":1,
    "name":"Google",
    "url":"http://www.google.com"
  }
] 
```

在随后的 javascript 文件中，我希望通过变量访问数据，例如`websites`. 我已经成功尝试了以下两个选项。

**选项1：**编辑文件websites.js，直接赋值变量，即

```
websites = 
[
  {
    "id":1,
    "name":"Google",
    "url":"http://www.google.com"
  }
] 
```

**选项2：**使用jquery的getJSON，即

```
$.getJSON('websites.js', function(websites){
  // use websites data here
}) 
```

我希望避免上述选项，因为 (a) 我希望保留文件“websites.js”的完整性；(b) 因为使用 jquery 的 getJSON() 仅适用于 Firefox 浏览器，但不适用于 Chrome（尚未在其他浏览器上测试过）。

所以，问题是：是否可以将包含的“websites.js”中的字符串分配给变量？如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:56:15.153

您是否尝试使用您的**选项 1**，但在 website.js 中以任何其他名称调用 var（例如：myWsVar001），并且在主文件中仅分配：`var websites = myWsVar001;`

# java - 如何从谷歌日历中的辅助日历中获取数据？

> ID：10930087
> 
> 赞同：2
> 
> 时间：2012-06-07T10:33:53.683
> 
> 标签：java, android, google-calendar-api

我正在编写一个代码，显示与特定 Gmail 帐户同步的所有日历的所有事件。但我只能从主日历获取数据。有人可以帮助如何为辅助日历做这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:58:13.063

这是获取所有事件的代码：

```
Uri l_eventUri; 
l_eventUri = Uri.parse("content://com.android.calendar/events");

    Cursor l_managedCursor = null;  
     l_managedCursor = this.managedQuery(l_eventUri, null,null, null, null);

     l_managedCursor.moveToFirst();
    Log.v("TOTAL NUMBER OF EVENTS :",l_managedCursor.getCount()+"");

 for(int i=0;i<l_managedCursor.getCount();i++){
for(int j=0;j<l_managedCursor.getColumnCount();j++){

    Log.d(l_managedCursor.getColumnName(j)+"===>",""+l_managedCursor.getString(j));
}

l_managedCursor.moveToNext(); 
```

}

*****最重要的是在您的设备中同步 gmail 日历在 ICS 中，我们可以选择是否要同步辅助日历。确保辅助日历在您的设备中同步。只有这样我们才能从辅助日历中获取事件。在 Android Gingerbread 中，默认情况下，当我们选择帐户和同步时，所有日历都会同步，而在 ICS 中，只有选定的日历会同步*******

# python - 用scrapy警告“_mysql已被导入”

> ID：10930089
> 
> 赞同：1
> 
> 时间：2012-06-07T10:33:55.303
> 
> 标签：python, mysql, warnings, scrapy

我部署了一个scrapy项目，与一个使用MySQLdb的类链接（用于持久性并在运行蜘蛛之前获取一些数据）在Python 2.7（本地机器）上，我没有问题。但是，在 Python 2.6（生产中）上，每次调用爬虫时都会出现此错误：

```
/usr/lib/python2.6/dist-packages/zope/__init__.py:3: UserWarning: Module _mysql was already imported from /usr/lib/pymodules/python2.6/_mysql.so, but /usr/lib/pymodules/python2.6 is being added to sys.path
import pkg_resources 
```

我试图忽略 警告`warnings.filterwarnings('ignore')`，但它没有效果。经过一些研究，我相信这个警告的原因是因为我在 pythonpath 的两个目录中有两个相同版本的 MySQLdb。 **但是，如何解决呢？**

为了您的信息，我已经安装了这些包（Python 2.6），其中`aptitude`：

```
python-mysql
python-scrapy0.14
python-lxml 
```

遗憾的是，无法在生产中更新到 Python 2.7。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:01:17.003

通过使用easy_install 重新安装scrapy 和MySQL-python 解决了问题。我做了什么 ：

```
apt-get remove --purge scrapy-0.14 python-mysqldb
apt-get autoremove
apt-get clean
easy_install -U scrapy
easy_install -U MySQL-python 
```

确保你有`python-setuptools`,`python-dev`并`libmysqlclient-dev`安装（通过 apt）

# c++ - 结构和类以及继承 (c++)

> ID：10930091
> 
> 赞同：5
> 
> 时间：2012-06-07T10:34:05.647
> 
> 标签：c++, inheritance, struct

`struct`如果所有访问说明符（包括继承）都是，你能确保我`public`吗？

换句话说：它们是平等的吗？

```
class C: public B, public A { public:
    C():A(1),B(2){}
    //...
}; 
```

和

```
struct C: B, A {
    C():A(1),B(2){}
    //...
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T10:37:36.157

是的，它们都是公开的。

```
struct A : B {
  C c;
  void foo() const {}
} 
```

相当于

```
struct A : public B {
 public:
  C c;
  void foo() const {}
} 
```

对于成员，在 §11 中有规定：

> 默认情况下，使用关键字 class 定义的类的成员是私有的。默认情况下，使用关键字 struct 或 union 定义的类的成员是公共的。

对于 §11.2 中的基类：

> 在基类没有访问说明符的情况下，当派生类使用类键结构定义时假定为公共，而当使用类键类定义类时假定为私有。

其中引用了 C++11 标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:44:37.237

从[C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)，11.2.2，第 208 页：

> 如果基类没有访问说明符，则当派生类声明为 struct 时假定为 public，而当声明类时假定为 private。

所以是的，你是对的：当派生类是 a`struct`时，它继承其他类，`public`除非你另有说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T10:45:02.247

来自 C++11 标准（[N3242 草案](http://www.open-std.org/jtc1/sc22/wg21/)）

> 11.2 基类和基类成员的可访问性
> 
> 2 在基类没有访问说明符的情况下，当派生类使用类键结构定义时假定为公共，而当使用类键类定义类时假定为私有。

# php - 没有带有表单类的实体的验证表单

> ID：10930093
> 
> 赞同：3
> 
> 时间：2012-06-07T10:34:36.240
> 
> 标签：php, symfony

我需要关于没有实体但有表单类的验证表单的帮助。我的问题是覆盖方法getDefaultOoptions中我的表单类中的集合约束。当我在我的控制器中绑定表单时，它没有考虑这个集合。

**这是我的班级表格**

```
 namespace Projet\TicketBundle\Form;

use Symfony\Component\Validator\Constraints\NotBlank;
use Symfony\Component\Validator\Constraints\Collection;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class TicketPackAndAppType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('total', 'text' ,array('label' => 'Total de la commande  ',     'read_only' => true))

            ->add('address_delivery', 'entity' , array('class' => 'TacTill\CustomerBundle\Entity\Address',
                  'property' => 'address',
                  'required' => false,
                  'label' => 'Adresse de livraison  ',
                  'required' => false
                 ))
            ->add('address_invoice', 'entity' , array('class' => 'TacTill\CustomerBundle\Entity\Address',
                  'property' => 'address',
                  'required' => false,
                  'label' => 'Adresse de facturaton  ',
                  'required' => false
                 ))

            ->add('color', 'choice', array(
                'choices' => array(
                    'B' => 'Noir', 
                    'W' => 'Blanc'),
                'required' => true,
                "property_path" => false,
                'expanded' => true,
                'multiple' => false
            ))

            ->add('model', 'choice', array(
                'choices' => array(
                    'iPadDeux16Gowifi' => '16 Go Wifi', 
                    'iPadDeux16Gowifi3G' => '16 Go Wifi et 3G', 
                    'iPadNew16Gowifi' => '16GoWifi', 
                    'iPadNew32Gowifi' => '32 Go Wifi',
                    'iPadNew64Gowifi' => '64 Go Wifi',
                    'iPadNew16Gowifi4G' => '16 Go Wifi et 4G',
                    'iPadNew32Gowifi4G' => '32 Go Wifi et 4G',
                    'iPadNew64Gowifi4G' => '64 Go Wifi et 4G'
                    ),
                'required' => true,
                "property_path" => false,
                'expanded' => true,
                'multiple' => false
            ))       

            ->add('stand', 'choice', array(
                'choices' => array(
                    'standsecurity' => 'Sécurité', 
                    'standdesign' => 'Design',
                    'standmobility' => 'Mobilité'
                    ),
                'required' => true,
                "property_path" => false,
                'expanded' => true,
                'multiple' => false
            )) 

            ->add('printer', 'choice', array(
                'choices' => array(
                    'printerB' => 'Noire', 
                    'printerW' => 'Blanche'
                    ),
                'required' => true,
                "property_path" => false,
                'expanded' => true,
                'multiple' => false
            ))  

            ->add('cashDrawer', 'choice', array(
                'choices' => array(
                    'cashDrawerG' => 'Graphite', 
                    'cashDrawerP' => 'Perle'
                    ),
                'required' => true,
                "property_path" => false,
                'expanded' => true,
                'multiple' => false
            )) 

            ->add('app', 'choice', array(
                'choices' => array(
                    'appSmall' => 'S\'abonner à TacTill', 
                    'noApp' => 'Télécharger l\'application plus tard'
                    ),
                'required' => true,
                "property_path" => false,
                'expanded' => true,
                'multiple' => false
            ))                  
        ;                      

    }

    public function getName()
    {
        return 'ticket_packandapptype';
    }

    public function getDefaultOptions(array $options)
    {
        $collectionConstraint = new Collection(array(
                'color' => new NotBlank(array('message' => 'Champ vide')),
                'model' => new NotBlank(array('message' => 'Champ vide')),
                'stand' => new NotBlank(array('message' => 'Champ vide')),
                'printer' => new NotBlank(array('message' => 'Champ vide')),
                'cashDrawer' => new NotBlank(array('message' => 'Champ vide')),
                'app' => new NotBlank(array('message' => 'Champ vide')),
        ));

        return array('validation_constraint' => $collectionConstraint);
    }
} 
```

**在我的控制器中**

```
public function createOrderAction()
{

    $em = $this->getDoctrine()->getEntityManager();

    $requestInArray = $this->getRequest()->request->get('ticket_packandapptype'); 

    $request = $this->getRequest();
    $form    = $this->createForm(new TicketPackAndAppType());

    if ($request->getMethod() == 'POST') {

        $form->bind($requestInArray);

        $stand = $requestInArray['stand'];
        $printer = $requestInArray['printer'];
        $cashDrawer = $requestInArray['cashDrawer'];
        $app = $requestInArray['app'];
  }
} 
```

我也用 bindRequest 测试过，这是同样的问题。

我在没有课程的情况下遵循[验证，](http://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class)但我不知道错误在哪里。当我完成无表单类时，集合约束效果很好。

如果您有任何想法，请向我解释。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:02:16.590

你应该这样做：

```
if ($request->getMethod() == 'POST') {

    $form->bindRequest($request);
    if ($form->isValid()) {
        //do your actions with form values
    } else {
       //return form with error messages
       //or do smth else...
    } 
```

}

当你调用 isValid() Symfony 会尝试用你的约束来检查你...

您还应该通过表单获取数据：

```
$data = $form->get('your_field_name')->getData(); 
```

当然，您应该在从请求中绑定表单后执行此操作...

# jsf-2 - 如何在 jsf 2.0 outputText 中访问 DualTreeBidiMap 键/值

> ID：10930102
> 
> 赞同：1
> 
> 时间：2012-06-07T10:35:07.300
> 
> 标签：jsf-2

我在 WebSphere Application Server 8 上使用 Apache MyFaces 2.0.2。

如何在 JSF 2.0 中获取 DualTreeBidiMap 的密钥？

DualTreeBidiMap 提供了一个 getKey(Object Value) 或 get(Object Key) 方法。

我在另一个 ManagedBean 中有值，所以我想用 EL 打印出这个值的键。

我尝试过这样的事情：

```
<h:outputText value="#{bean1.dualTreeBidiMap.key(bean2.value)}"  /> 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:11:07.443

由于您的 value 属性是方法表达式而不是值表达式，因此正确的语法应该是：

```
<h:outputText value="#{bean1.dualTreeBidiMap.getKey(bean2.value)}"  /> 
```

`get`只需要为值表达式省略前缀（对于具有无参数 getter 的字段）。

请注意，只有从 EL 2.2 起才可以使用参数调用方法。我没有使用 WAS 8，但快速的 Google 搜索显示它应该支持 EL 2.2。

# xml - 如何让 Open XML DOM 解析器解析 ntEntityRef 节点？

> ID：10930111
> 
> 赞同：0
> 
> 时间：2012-06-07T10:35:41.137
> 
> 标签：xml, delphi, delphi-2007

我有这个 XML 输入：

```
<?xml version="1.0" encoding="utf-8"?>
<string>
&lt;N/A&gt;
</string> 
```

这是一个简短的代码示例来说明问题：

```
uses
  xmldom, oxmldom, XMLDoc, XMLIntf;

procedure TForm1.Test;
var
  Document     : IXMLDocument;
  StringNode   : IXMLNode;
  LessThanNode : IXMLNode;
begin
  DefaultDOMVendor := 'Open XML';
  Document         := LoadXMLData(Memo1.Lines.Text);
  StringNode       := Document.DocumentElement;
  LessThanNode     := StringNode.ChildNodes.First;
  ShowMessage(LessThanNode.Text); // Displays '' (an emtpy string)
  ShowMessage(LessThanNode.XML);  // Displays '&lt;'
  ShowMessage(StringNode.Text);   // Causes an EXMLDocError, because the string node contains more than just a single node with NodeType = ntText
end; 
```

如何让`Open XML`解析器将`&lt;`,`&gt`和类似的 XML 实体转换为它们的真实文本（如`<`and `>`）？

我可以为 XML 规范中的预定义实体编写一个解决方法：http: [//www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent)

不过，这对额外的实体节点没有帮​​助......

相关：[为什么 IXMLNode.IsTextElement 不为 CDATA 元素返回 True？](https://stackoverflow.com/questions/8416986/why-doesnt-ixmlnode-istextelement-return-true-for-cdata-elements)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:19:22.463

在您的情况下，我认为该`InnerText`属性应该可以工作。

```
ShowMessage(Document.DocumentElement.InnerText); 
```

**编辑：**该`InnerText`属性不是`IXMLNode`接口的一部分（我认为 MSXML 有它。） OpenXML 实现（ADOM）有一个`GetTextContent`可能做同样事情的方法，所以你可能想看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:06:46.377

较新版本的 Delphi 不再提供 oxmldom 单元，并且可以使用较新版本的所谓 ADOM：

[http://www.philo.de/xml/downloads.shtml](http://www.philo.de/xml/downloads.shtml)

因此，使用不同的解析器或升级 OpenXML 都可以解决问题。

# ember.js - Ember StateManager，注入控制器并使用 initialState

> ID：10930114
> 
> 赞同：2
> 
> 时间：2012-06-07T10:35:45.237
> 
> 标签：ember.js

我有以下处理几个视图的 StateManager。我希望不必手动转换到初始状态 `App.stateManager.transitionTo('showingPhotos')`。我宁愿只使用`initialState`状态管理器的属性。

在这种情况下，使用 StateManager的`initialState`属性不起作用，因为控制器在注入之前不可用`App.initialize(App.stateManager)`。

有没有办法避免在注入控制器的同时手动转换到初始状态？有没有更好的方法来构建这样的状态管理器？

我创建了两个 JSfiddles：

[http://jsfiddle.net/GmD8A/](http://jsfiddle.net/GmD8A/) - 这可行，但我必须手动转换到初始状态

[http://jsfiddle.net/tgbuX/](http://jsfiddle.net/tgbuX/) - 这使用`initialState`而不是手动转换到初始状态，因此不起作用。

```
PhotosListView = Ember.View.extend({
  template: Ember.Handlebars.compile('<h2>Showing Photos</h2><a {{action "showContacts"}}>Show Contacts</a>')
});

ContactsListView = Ember.View.extend({
  template: Ember.Handlebars.compile('<h2>Showing Contacts</h2><a {{action "showPhotos"}}>Show Photos</a>')
});

StateManager = Ember.StateManager.extend({
  rootElement: '#body',
  showingContacts: Ember.ViewState.extend({
    view: ContactsListView,
    showPhotos: function(manager) {
      manager.transitionTo('showingPhotos');
    },
    enter: function(manager) {
      this._super(manager);
      this.setPath('view.controller', manager.get('photosController'));
    }
  }),
  showingPhotos: Ember.ViewState.extend({
    view: PhotosListView,
    showContacts: function(manager) {
      manager.transitionTo('showingContacts');
    },
    enter: function(manager) {
      this._super(manager);
      this.setPath('view.controller', manager.get('contactsController'));
    }
  })
});

App                    = Ember.Application.create()
App.PhotosController   = Ember.ArrayController.extend()
App.ContactsController = Ember.ArrayController.extend()
App.stateManager       = StateManager.create()

App.initialize(App.stateManager) // This injects the controllers
App.stateManager.transitionTo('showingPhotos') // I don't want to have to manually transition into this initial state 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:23:05.753

你应该看看最新的 Ember 版本，它现在有一个路由器，自动连接任何`*Controller`类实例，并`outlets`按照你想要的方式进行管理。

您可以从[https://gist.github.com/2679013](https://gist.github.com/2679013)和[https://gist.github.com/2728699开始](https://gist.github.com/2728699)

**编辑**

您有一个新的进行中指南 @ [https://emberjs-staging-new.herokuapp.com/guides/outlets#toc_the-router](https://emberjs-staging-new.herokuapp.com/guides/outlets#toc_the-router)

# blackberry - 如何在黑莓地图上绘制可点击的针点？

> ID：10930115
> 
> 赞同：2
> 
> 时间：2012-06-07T10:35:50.353
> 
> 标签：blackberry, map

从最后一天开始，我正在搜索如何在 os 5.0 的黑莓地图上绘制可点击的针脚。我在特定的纬度上绘制图像，但我想通过单击该图像进入另一个屏幕。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:23:16.377

这与最近的另一个问题非常相似。在另一个问题中，发帖人询问如何为地图图钉（标记）绘制自定义图像。我不清楚您是否想要自定义图像作为地图图钉。但是，如果您这样做并且乐于使用[MapField](http://www.blackberry.com/developers/docs/5.0.0api/index.html?net/rim/device/api/lbs/MapField.html)，那么

[看到这个解决方案](https://stackoverflow.com/a/10878296/119114)。

您无需担心我在图钉上绘制**第二**层的部分，用于圆形用户个人资料图片。

但是，您仍将覆盖`paint()`绘制自定义图钉的方法，然后确定用户在地图上触摸/点击的位置，并计算从该触摸/点击到图钉的距离，以确定点击了哪个图钉。处理触摸/点击对于触摸屏和非触摸屏设备的工作方式不同，但我链接到您需要为两者使用的 API 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:03:55.253

我用谷歌地图做过这样的事情。

```
 String initial = "<!DOCTYPE html>\r\n" +
    "<html> \r\n" +
    "<head> \r\n" +
    "  <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\" /> \r\n" +
    "  <title>Google Maps Multiple Markers</title> \r\n" +
    "  <script src=\"http://maps.google.com/maps/api/js?sensor=false\" \r\n" +
    "          type=\"text/javascript\"></script>\r\n" +
    "</head> \r\n" +
    "<body>\r\n" +
    "  <div id=\"map\" style=\"width: 360px; height: 390px;\"></div>\r\n" +
    "\r\n" +
    "  <script type=\"text/javascript\">\r\n" +
    "    var locations = [";
String second= " ];\r\n" +
        "\r\n" +
        "    var map = new google.maps.Map(document.getElementById('map'), {\r\n" +
        "      zoom: 8,";
String centerPoint ="";
String finalpart = " mapTypeId: google.maps.MapTypeId.ROADMAP\r\n" +
        "    });\r\n" +
    "\r\n" +
    "    var infowindow = new google.maps.InfoWindow();\r\n" +
    "\r\n" +
    "    var marker, i;\r\n" +
    "\r\n" +
    "    for (i = 0; i < locations.length; i++) {  \r\n" +
    "      marker = new google.maps.Marker({\r\n" +
    "        position: new google.maps.LatLng(locations[i][1], locations[i][2]),\r\n" +
    "        map: map\r\n" +
    "      });\r\n" +
    "\r\n" +
    "      google.maps.event.addListener(marker, 'click', (function(marker, i) {\r\n" +
    "        return function() {\r\n" +
    "          infowindow.setContent(locations[i][0]);\r\n" +
    "          infowindow.open(map, marker);\r\n" +
    "        }\r\n" +
    "      })(marker, i));\r\n" +
    "    }\r\n" +
    "  </script>\r\n" +
    "</body>\r\n" +
    "</html>";

html=new StringBuffer();
html.append(initial);

 point = "['"+name[i]+"',"+lat[i]+","+ lon[i]+","+i+"],";
 html.append(point);

 html.append(second);
   html.append(centerPoint);
   html.append(finalpart);
   //System.out.println("Plot is"+html.toString());
   BrowserFieldConfig _bfConfig = new BrowserFieldConfig();        
  _bfConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
  _bfConfig.setProperty( BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE );
  _bfConfig.setProperty(BrowserFieldConfig.USER_AGENT, "MyApplication 1.0");
  BrowserField myBrowserField = new BrowserField(_bfConfig);

   myBrowserField.displayContent(html.toString(), "");
   HorizontalFieldManager horf=new HorizontalFieldManager(HORIZONTAL_SCROLL);
   horf.add(myBrowserField);
   add(horf); 
```

当我单击图钉时，它将显示用户名。

# java - 将字符串转换为 byte[] 并在客户端和服务器之间转换回字符串

> ID：10930117
> 
> 赞同：0
> 
> 时间：2012-06-07T10:35:56.067
> 
> 标签：java, string, web-services, servlets, character-encoding

我正在将文本发送到 Web 服务，但首先转换为字节，然后在服务器端接收到我想将字节更改回字符串。我已经能够转换为字节，但无法转换回字符串。我看过很多关于 SO 的教程，但到目前为止似乎都没有。

这是客户端应用程序

```
try {   
        String text = "holiday";
        byte[] byte_text = text.getBytes();
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        URI link = new URI("http://192.165.1.3:8080/HelloWorld/hello?text="+byte_text);
        request.setURI(link);
        HttpResponse response = client.execute(request);

    } catch (Exception e1) {
        e1.printStackTrace();
    } 
```

这是我在客户端所做的

```
 byte[] why = req.getParameter("text").getBytes();
    String text = new String(why);
    System.out.println(text); 
```

当我调用 getbyte 和 new String 函数时，我尝试使用 UTF 和 ASCII 编码，但我仍然得到这样的字节结果 [B@405c0ce0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:43:34.807

执行`"http://192.168.0.3:8080/HelloWorld/hello?text=" + byte_text`时，会在字节数组上调用该`toString()`方法将其转换为字符串，并将此字符串附加到 URL。返回`toString()`方法后跟对象的哈希码。`byte[]``"[B@"`

也就是说，你的代码真的没有意义。您有一个字符串并希望将其附加到 URL。将字符串转换为字节数组然后将字节数组转换回字符串有什么意义？

有意义的是使用`java.net.URLEncoder`它来确保所有特殊字符都被正确编码，并且编码的结果可以安全地作为查询字符串参数附加。

# android - 不幸的是，该应用程序停止了 Android

> ID：10930120
> 
> 赞同：0
> 
> 时间：2012-06-07T10:36:05.617
> 
> 标签：android, android-emulator

这是代码。它不会在控制台中给出任何错误。我制作了另一个活动类 test_me.java。当我单击对话框选项时，它会给出“不幸的是应用程序停止工作”的错误。请告诉我这里有什么问题。

```
 public class TestActivity extends Activity {

    Context context=this;
    Intent testIntent;
        Intent progIntent;
        Intent settingIntent;
        Intent resultIntent; public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.main);  
            Button b1 = (Button)findViewById(R.id.button1);        
            b1.setOnClickListener(new Button.OnClickListener(){

        @Override
         public void onClick(View v) {
                  if(v.getId()==R.id.button1)
                  {                   final CharSequence[] items = {"Test", "ProgMode", "Settings","Result"};
                     AlertDialog.Builder builder = new AlertDialog.Builder(context)
                    .setTitle("Menu Options")
                  .setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
                         public void onClick(DialogInterface dialog, int item) {

                             if(items[item]=="Test")
                            {testIntent = new Intent(TestActivity.this, test_me.class);
                                startActivity(testIntent);
                                }
                             else if(items[item]=="ProgMode")
                                {progIntent = new Intent(TestActivity.this,prog_mode.class);
                                startActivity(progIntent);

                                    }
                             else if(items[item]=="Settings")
                                {settingIntent = new Intent(TestActivity.this,setting_mode.class);
                                startActivity(settingIntent);
                                                                }
                             else if(items[item]=="Results")
                                {
                                 resultIntent = new Intent(TestActivity.this,result_mode.class);
                                startActivity(resultIntent);
                                                                }

                             Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
                         }
                     });
                      builder.setPositiveButton("Back",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();

                }
            });
} 
```

这是日志

```
06-07 17:44:15.598: I/dalvikvm(654): threadid=3: reacting to signal 3
06-07 17:44:15.978: I/dalvikvm(654): Wrote stack traces to '/data/anr/traces.txt'
06-07 17:44:16.088: I/dalvikvm(654): threadid=3: reacting to signal 3
06-07 17:44:16.148: I/dalvikvm(654): Wrote stack traces to '/data/anr/traces.txt'
06-07 17:44:16.538: D/android.widget.GridLayout(654): vertical constraints: y3 - y0 > 637, y1 - y0 > 129, y2 - y1 > 135, y3 - y0 < 618 are inconsistent; permanently removing: y3 - y0 < 618\. 
06-07 17:44:16.608: I/dalvikvm(654): threadid=3: reacting to signal 3
06-07 17:44:16.638: I/dalvikvm(654): Wrote stack traces to '/data/anr/traces.txt'
06-07 17:44:16.858: D/gralloc_goldfish(654): Emulator without GPU emulation detected.
06-07 17:44:17.108: I/dalvikvm(654): threadid=3: reacting to signal 3
06-07 17:44:17.139: I/dalvikvm(654): Wrote stack traces to '/data/anr/traces.txt'
06-07 17:44:21.638: D/AndroidRuntime(654): Shutting down VM
06-07 17:44:21.638: W/dalvikvm(654): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-07 17:44:21.688: E/AndroidRuntime(654): FATAL EXCEPTION: main
06-07 17:44:21.688: E/AndroidRuntime(654): android.content.ActivityNotFoundException: Unable to find explicit activity class {achira.test/achira.test.test_me}; have you declared this activity in your AndroidManifest.xml?
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.app.Activity.startActivityForResult(Activity.java:3190)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.app.Activity.startActivity(Activity.java:3297)
06-07 17:44:21.688: E/AndroidRuntime(654):  at achira.test.AchActivity$1$1.onClick(AchActivity.java:84)
06-07 17:44:21.688: E/AndroidRuntime(654):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.os.Handler.handleCallback(Handler.java:605)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.os.Looper.loop(Looper.java:137)
06-07 17:44:21.688: E/AndroidRuntime(654):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-07 17:44:21.688: E/AndroidRuntime(654):  at java.lang.reflect.Method.invokeNative(Native Method)
06-07 17:44:21.688: E/AndroidRuntime(654):  at java.lang.reflect.Method.invoke(Method.java:511)
06-07 17:44:21.688: E/AndroidRuntime(654):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-07 17:44:21.688: E/AndroidRuntime(654):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-07 17:44:21.688: E/AndroidRuntime(654):  at dalvik.system.NativeStart.main(Native Method)
06-07 17:44:22.349: I/dalvikvm(654): threadid=3: reacting to signal 3
06-07 17:44:22.388: I/dalvikvm(654): Wrote stack traces to '/data/anr/traces.txt'
06-07 17:44:24.118: I/Process(654): Sending signal. PID: 654 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:40:41.993

我认为这

```
Context context=TestActivity.this; 
```

应该进入 onCreate

也关闭你的对话框

重置您的 adb 或重新启动您的模拟器，您将在 logcat 中收到错误

你的日志猫说

```
E/AndroidRuntime(654): android.content.ActivityNotFoundException: Unable to find explicit activity class {achira.test/achira.test.test_me}; have you declared this activity in your AndroidManifest.xml? 
```

这意味着您尚未在清单中声明您的活动

在应用程序标签中声明这样的活动

```
<activity
            android:name=".test_me"
            android:label="@string/app_name">
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:42:32.210

我有一些类似问题的经验。如果您正在创建上下文变量，请在任何地方使用它。即使是敬酒也不要写 getApplicationContext() 。并在 oncreate(){} 中像这样更改上下文变量

```
context = TestActivity.this; //pass activity context. 
```

将上下文声明为类级别变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:42:59.850

按下 singleChoiceButton 后，您不会关闭对话框。`dialog.cancel()`在方法内部的每个`startActivity()`语句之后调用`onClick`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:49:07.433

```
Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show(); 
```

只需评论或删除此声明...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T11:19:14.737

在您的代码中进行 2 处更改。

```
Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show(); 
```

改成

```
Toast.makeText(TestActivity .this, items[item], Toast.LENGTH_SHORT).show(); 
```

和

```
AlertDialog.Builder builder = new AlertDialog.Builder(context) 
```

改成

```
AlertDialog.Builder builder = new AlertDialog.Builder(TestActivity .this) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-10T09:18:53.540

将类 test_me.java 添加到您的清单中，之后它应该可以工作。

# ruby-on-rails - rails 3 多态路由

> ID：10930122
> 
> 赞同：2
> 
> 时间：2012-06-07T10:36:21.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, polymorphism, rails-routing

一段时间以来一直试图找到这个问题的答案，决定值得问一个新的......

我有多个多态模型，定义如下：`class Transport`, `class Transport::Car < Transport`,`class Transport::Plane < Transport`

我有一个 base `TransportController`，然后每种类型`Transport`都有一个相应的控制器（都在`Transport`命名空间下），即`Transport::CarController`, `Transport::PlaneController`。

我想弄清楚如何为不同的`Transport`操作创建路由......

*   我事先不知道我将拥有多少`Transport`个子类（这是通过数据库调用作为初始化程序的一部分完成的）。
*   对于每个`Transport`，都有两个共享控制器操作，分别调用它们`#board`和`#depart`。这些方法应该存在于内部`TransportController`，因为它们执行相同的操作并显示相同的视图，而与 Transport 的类型无关。
*   不同`Transport`的类型可以对自己的操作有不同的实现。例如`#choose_seat`对于汽车和飞机来说，不同的约束和不同的视图是不同的，但动作是相同的。
*   不同`Transport`的类型有权有独特的行动。例如`Transport::PlaneController`应该有一个`#landing_gear_up`动作，而这对于`Transport::CarController`.

我可能喜欢的是一个路由文件，例如：

```
# for an action landing_gear_up only inside plane
match '/transport/plane/landing_gear_up',
      :controller => "Transport::PlaneController",
      :action => "landing_gear_up"

# for an action on every transport type that are handled differently
match '/transport/:type/choose_seat',
      :controller => "Transport::<type>Controller",
      :action => "choose_seat"

# for the actions that are handled commonly across every type of transport
match '/transport/:type/board', :to => "transport#board"
match '/transport/:type/depart', :to => "transport#depart" 
```

我觉得这应该可以通过“动态细分”实现，但我无法让它正常工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:44:32.173

`routes.rb`您可以在其中定义可以使代码更加干燥的方法和变量。我将如何尝试这样做的一个例子：

```
Your::Application.routes.draw do
  ## other routes

  ## helper method to define transport route
  def route_transport action, types
    match "/transport/:type/#{action}", :to => "transport##{action}" and return if types == :common
    [types].flatten.each { |t| match "/transport/#{t}/#{action}", :controller => "Transport::#{t}Controller", :action => action }
  end

  {
    :board => :common,
    :depart => :common,
    :landing_gear_up => :plane,
    :choose_seat => [:car, :plane],
    # action name => :common or transport type(s)
  }.each { |action, types| route_transport action, types }

  ## other routes
end 
```

我没有检查代码，它可能包含错误。运行`rake routes`检查是否正在生成正确的路由。

另外，看看[RESTful 路由](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)——从长远来看，它们可能会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:37:32.957

如果您在控制器中具有相同的继承层次结构，那么您不必做任何特别的事情。只需声明资源，为每个控制器声明非 RESTful 路由即可。PlaneController#board 会自动调用 TransportController#board。特定于 PlaneController 的操作将保持特定于该控制器。

# javascript - 限制数组中打印内容的数量

> ID：10930129
> 
> 赞同：0
> 
> 时间：2012-06-07T10:36:34.977
> 
> 标签：javascript, jquery, arrays, json

我有一个包含元素的数组，

```
var input=[

{
    "count": 1,
    "entity": "Company",
    "Company": [
        {
            "sector": "Consumer, Cyclical",
            "ticker": "NWY",
            "entity": "New York & Co",
            "New_York_&_Co": [
                {
                    "count": 1,
                    "entity": "New York"
                }
            ],
            "type": "SCap"
        }
    ]
},
{
    "count": 1,
    "entity": "Country",
    "Country": [
        {
            "region": "North Americas",
            "index": "MEXICO IPC INDEX",
            "Mexico": [
                {
                    "count": 1,
                    "entity": "Mexico"
                }
            ],
            "entity": "Mexico",
            "currency": "Peso (MXN)"
        }
    ]
},
{
    "count": 2,
    "entity": "Persons",
    "Persons": [

        {
            "count": 1,
            "entity": "Edwin Garay"
        },

        {
            "count": 1,
            "entity": "Rosa"
        }
    ]
}]; 
```

我正在尝试订购此数据的输出。我想显示像这样的值，

```
Company-New York & Co, Country-mexico, Persons-Edwin Garay,Rosa 
```

我不需要最后一级中的数据......我写了一个函数，

```
 function generateTree(input) {  
if (input == undefined) {
    return;
}

else {

    for ( var i = 0; i < input.length; i++) {

        if(entityName1!=input[i].entity)
            {

            entityName = input[i].entity;
            entityName1 = input[i].entity;
            entityName = entityName.replace(/ /g, "_");
            alert(entityName);
            }

        if (input[i][entityName] != undefined) {
            generateTreeHTML(input[i][entityName]);

        }
    }
}} 
```

上面的脚本将打印输出，

```
Company-New York & Co, NewYork , Country-mexico,mexico, Persons-Edwin Garay,Rosa 
```

我不想要纽约和墨西哥的基本水平。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:14:09.310

您的数据结构对我来说似乎过于复杂。这些`count`字段尤其无用。你不能修改你的数据结构看起来像这样吗？

```
var data = {
    "companies": [{
        "name": "New York & Co",
        "sector": "Consumer, Cyclical",
        "ticker": "NWY",
        "type": "SCap"
    }],
    "countries": [{
        "name": "Mexico",
        "region": "North Americas",
        "index": "MEXICO IPC INDEX",
        "currency": "Peso (MXN)"
    }],
    "people": [
        "Gustavo",
        "Rosa"
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:43:46.440

以下产生您请求的输出：

```
function ​generateTree​(input) {
    var i,
        j,
        currentEntity,
        currentEntityType,
        output = "";

    for (i=0; i<input.length; i++)​ {
        if (i > 0) output += ", ";
        currentEntity = input[i];
        currentEntityType = currentEntity.entity;
        output += currentEntityType + "-";
        for (j=0; j<currentEntity[currentEntityType].length; j++){
            if (j > 0) output += ",";
            output += currentEntity[currentEntityType][j].entity;
        }
    }
    return output;
}

​alert(generateTree(input));​ 
```

演示：http: [//jsfiddle.net/7PpEY/](http://jsfiddle.net/7PpEY/)

我忽略了所有你不关心的领域。我忽略了这样一个事实，即在您的数据中，“Persons”对象的“Count”为 10，即使内部数组中只有两个人。你的函数是递归的，但我认为没有必要。

# javascript - 仅当电子邮件有效时才提交表格

> ID：10930134
> 
> 赞同：3
> 
> 时间：2012-06-07T10:36:44.523
> 
> 标签：javascript

仅当电子邮件有效时，我才需要一种提交表单的方法。如果电子邮件无效，则仅显示警报（您可以在下面看到我的代码）。

JAVASCRIPT：

```
 function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
 } 

 function continueornot() {
    if(validateEmail(document.getElementById('emailfield').value)){
    // ok
    }else{ alert("email not valid"); return false;}
 } 
```

HTML：

```
<form method="post" action="register.php" enctype="multipart/form-data">
<table>
<tr><td>Email:</td></tr>
<tr><td><input type="text" size="30" name="email" id="emailfield"> </td></tr>
<tr><td>Password:</td></tr>
<tr><td><input type="password" size="30" name="password"> </td></tr>
</table>
<input name="steptwo" value="Create Account" type="submit" onclick="continueornot();"/>
</form> 
```

问题是即使电子邮件无效，表单也会提交。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T10:38:19.127

您应该附加`return continueornot();`到`onsubmit`表单的事件，而不是按钮的单击事件。

看到这个小提琴：http: [//jsfiddle.net/NdSmu/](http://jsfiddle.net/NdSmu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:38:49.030

您需要返回值。

```
function continueornot() {
    if(validateEmail(document.getElementById('emailfield').value)){
      // ok
      return true;
    }else{ alert("email not valid"); return false;}
 }

onclick="return continueornot();" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:39:18.890

```
<form method="post" action="register.php" enctype="multipart/form-data" onsubmit=" return continueornot();"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:43:55.570

实现这一点的最简洁方法是使用 HTML5 模式属性以及 javascript：

```
<input id="emailField" type="email" pattern="emailRegexHere"> 
```

浏览器对此属性的支持有所不同，但会有所改进。

以下标记也应该实现您的警报：

```
<form method="post" action="register.php" enctype="multipart/form-data" onsubmit="return continueornot();"> 
```

在我看来，警报不是解决问题的方法——它们会给用户带来糟糕的体验。查看一些 javascript 验证库，它们将以更用户友好的方式显示任何错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T10:38:39.063

```
function continueornot() {
    if(validateEmail(document.getElementById('emailfield').value)){
    return true;
    }else{ alert("email not valid"); return false;}
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T10:59:56.380

您可以简单地使用正则表达式验证器来验证电子邮件字段而不是 javascript 函数

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-13T01:08:12.590

返回是否为真；你唯一添加的东西？您无需返回 true 即可提交，您只需要不返回 false，尽管 OP 遇到的问题是尽管返回 false，但它仍在提交。（因为在这种情况下，任何返回值都会被忽略，因为内联事件属性不使用它。） -

# iphone - 为什么要在 iPhone 应用程序的钥匙串中存储用户名和密码

> ID：10930136
> 
> 赞同：4
> 
> 时间：2012-06-07T10:36:53.973
> 
> 标签：iphone, ios, keychain

我曾经使用过，`NSUserDefault`但这个钥匙串概念对我来说是全新的。

我曾尝试寻找类似的问题，但找不到这样做的确切原因。

**我做了什么：**

我已经知道如何将数据存储在`NSUserDefault`. 以及我们需要存储它的原因。

**关于钥匙串**，我只知道存储在钥匙串中通过对原始文本进行编码而`NSUserDefault`将数据存储为纯文本，从而以一些额外的安全性存储数据。即使在应用程序被删除后，它也会存储数据。

这是将数据存储在钥匙串中的唯一原因吗？

**编辑：** 我得到了[这个链接](http://mobiledevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)，它准确地说明了我所说的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:50:04.480

与 NSUserDefault 相比，钥匙串数据更安全。从设备中删除应用程序后，钥匙串数据也在设备中。有关钥匙串包装器的更多信息，请阅读[此内容。](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797-Intro-DontLinkElementID_2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:40:31.523

也许[LKKeychain](https://github.com/lakesoft/LKKeychain)可以帮助：

> LKKeychain 类是一个小型的钥匙串服务包装器。它提供：
> 
> 添加帐户 更新帐户 删除帐户 转储帐户（用于调试）

# zend-framework - Zend_Auth_Adapter_DbTable 身份不是唯一的

> ID：10930144
> 
> 赞同：3
> 
> 时间：2012-06-07T10:37:15.133
> 
> 标签：zend-framework, authentication

对于网站上的身份验证，我使用 Zend_Auth_Adapter_DbTable。一切正常，但 Zend 框架只允许表中的唯一标识。

作为身份，我使用用户的邮件地址。问题是，该邮件地址的表格中有更多项目。用户可以删除那里的帐户，所以我不会删除整行，我只会将状态更改为 -2 或其他内容。活跃用户的状态为 1。

我尝试像这样使用它：

```
 $authAdapter = new Zend_Auth_Adapter_DbTable($db, 'user', 'email', 'password', "? AND `status`='1'");
    $authAdapter->setIdentity($email);
    $authAdapter->setCredential($password); 
```

但它不起作用。如果我删除具有相同邮件地址的非活动用户，一切正常。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:43:38.903

你可以这样做

```
$authAdapter->setIdentity($email);
$authAdapter->setCredential($password);

$select = $authAdapter->getDbSelect();
$select->where('status = 1'); 
```

**试试这个完整的代码**

```
 $authAdapter = new Zend_Auth_Adapter_DbTable($db, 'user', 'email', 'password');
     $authAdapter->setIdentity($email);
    $authAdapter->setCredential($password);
    $select = $authAdapter->getDbSelect();
            $select->where('status = "1"'); 
```

或者

```
$authAdapter = new Zend_Auth_Adapter_DbTable(Zend_Db_Table::getDefaultAdapter());

       $authAdapter->setTableName('user')
            ->setIdentityColumn('email')
            ->setCredentialColumn('password');     

        $select = $authAdapter->getDbSelect();
        $select->where('status = "1"'); 
```

**[编辑]**
或

```
$authAdapter = new Zend_Auth_Adapter_DbTable($db, 'user', 'email', 'password');
         $authAdapter->setIdentity($email);
        $authAdapter->setCredential($password);
$authAdapter->setCredentialTreatment('? and status = "1"'); 
```

仅供参考：[zend.auth.adapter.dbtable](http://framework.zend.com/manual/en/zend.auth.adapter.dbtable.html#zend.auth.adapter.dbtable.advanced.advanced_usage)

# apache - htaccess 允许访问 3 个文件

> ID：10930154
> 
> 赞同：1
> 
> 时间：2012-06-07T10:38:09.797
> 
> 标签：apache, .htaccess

我正在使用这个 .htaccess

```
AuthName "Reserved Area"
AuthType Basic

AuthUserFile /opt/bitnami/apache2/htdocs/k4demo60/.htpasswd
AuthGroupFile /opt/bitnami/apache2/htdocs/k4demo60/.htgroup

<FilesMatch ".(jpg|php|swf|htm|html|pdf|PDF|JPG|msg|css|js|inc|gif|png)$">
Order Deny,Allow
Require group -1 1 3 4
</FilesMatch>

<FilesMatch ".(register.php|remind.php|changepwd.php)$">
Order Deny,Allow
require valid-user
</FilesMatch> 
```

简而言之，我想允许所有有效用户访问显示的三个文件。应该只允许某些用户组访问同一目录中的其他文件。

不幸的是，第一条规则的存在是为了允许访问文件：register.php | 提醒.php | changepwd.php 仅适用于授权用户组。

我会避免把 register.php | 提醒.php | changepwd.php 在一个单独的目录中，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:52:22.103

这是一个有效的解决方案：

```
<Files  ~ "^(changepwd|login|register|remind|securitycode|registersuggest)\.php$">
AuthName "Reserved Area"
AuthType Basic
AuthUserFile path_to/.htpasswd
AuthGroupFile path_to/.htgroup
Order Deny,allow
Require valid-user
</Files>

<Files ~ "^(?!(changepwd|login|register|remind|securitycode|registersuggest)\.php$).*(\.php)$">
AuthName "Reserved Area"
AuthType Basic
AuthUserFile path_to/.htpasswd
AuthGroupFile path_to/.htgroup
Order Deny,allow
Require group allowed_groups  
</Files> 
```

我只是想知道是否有更聪明的解决方案。

# iphone - 架构 armv7 的未定义符号：“_SCNetworkReachabilityCreateWithAddress”

> ID：10930156
> 
> 赞同：10
> 
> 时间：2012-06-07T10:38:23.103
> 
> 标签：iphone, ios, objective-c, xcode, frameworks

是的，这已成为一种正确的痛苦，我已经看了 2 天了，似乎无法解决它。这是我得到的错误。

```
Undefined symbols for architecture armv7:
"_SCNetworkReachabilityCreateWithAddress", referenced from:
  +[Reachability reachabilityWithAddress:] in Reachability.o
"_SCNetworkReachabilityCreateWithName", referenced from:
  +[Reachability reachabilityWithHostName:] in Reachability.o
"_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
  -[Reachability stopNotifier] in Reachability.o
"_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
  -[Reachability startNotifier] in Reachability.o
"_SCNetworkReachabilitySetCallback", referenced from:
  -[Reachability startNotifier] in Reachability.o
"_SCNetworkReachabilityGetFlags", referenced from:
  -[Reachability connectionRequired] in Reachability.o
  -[Reachability currentReachabilityStatus] in Reachability.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经添加了**SystemConfiguration.framework**，它似乎不想用它做任何事情，因为这个错误不会消失。我已经看过很多相同的问题，但其中很多确实证实了任何答案。这种是周末才发展起来的，没人碰过。任何人都可以帮忙。

**编辑** 忘记添加这个位。

> ld：警告：忽略文件/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks//SystemConfiguration.framework/SystemConfiguration，缺少所需的架构armv7在文件中

**编辑**

对了，感谢@gaige，我发现了一个问题；在 SystemConfiguration.framework 之前有一个不应该存在的额外斜线。我已删除框架并重新添加，但没有帮助。如何删除这个多余的斜线？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T09:08:59.500

*通常*，额外的斜线不会破坏类似 UNIX 的构建过程。

但是，您确实需要确保**armv7**架构位于您的构建尝试使用的框架文件中。为此，请`lipo -info`在命令行中使用以下命令：

```
lipo -info /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer‌​/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks//SystemConfiguration.framework/Sy‌​stemConfiguration 
```

你应该看到这样的输出：

```
Architectures in the fat file: SystemConfiguration are: armv6 armv7 
```

如果不这样做，您的项目可能设置为链接到错误版本的 SystemConfiguration.framework。您的机器上有该框架的多个版本。因此，我将验证您在项目中拥有的框架（即 SystemConfiguration）的路径。

通常，我希望该文件是这样的（针对您使用的操作系统版本进行了调整）：

```
/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/System/Lib‌​rary/Frameworks/SystemConfiguration.framework 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T14:53:54.430

`org.apache.cordova.network-information`我在使用 Cordova 项目和插件时遇到了这个问题大约 8 小时。通过上面的答案和其他几个答案，我被鼓励在`Project > Target > Build Phases > Link Binary with Libraries`Xcode 的部分中搜索，这是正确的。

但是，虽然`SCNetworkReachabilityCreateWithAddress`在 中定义`SystemConfigration.framework`，但我无法通过系统地添加和删除这个库和其他库来摆脱链接器错误。

最后，我使用插件创建了一个新项目，并完全复制了原来的框架星座。现在它正在工作。

结论：

*   如果可能，创建一个具有必要扩展的新项目并从中复制星座。它可能会有所帮助。
*   有时，一个库包含太多，所以取消选中它。有时情况正好相反。
*   要深入挖掘，请`SystemConfiguration.framework`按照上述出色答案中的说明进行检查。它可能与目标架构不匹配。此外，检查构建中的奇怪字符，包括路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T19:52:06.277

我只是清理并重新启动了xcode，它就可以工作了。

# c# - Linq 语句中的 TSource 有什么意义？

> ID：10930158
> 
> 赞同：3
> 
> 时间：2012-06-07T10:38:32.167
> 
> 标签：c#, linq

许多语句（在 Linq 中经常看到）在编译或执行都不需要 TSource 时使用它。为什么要指定 TSource？

例子：

```
 List<int> list = new List<int>(5) { 0, 1, 2, 0, 3 };

 int x = list.Where<int>(i => i == 0).FirstOrDefault<int>();
 int y = list.Where(i => i == 0).FirstOrDefault(); 
```

陈述有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T10:41:18.747

在您的两个 LINQ 语句中，`TSource`类型都是必需的。

它只是在第一个语句中明确提供，在第二个语句中隐式**推断**。

您可以`TSource`在编译器无法推断类型的情况下指定 - 通常是在 lambda 嵌套且非常复杂的情况下。

此外，如果您希望使用 lamdba 中使用的超类型类型执行操作。例如，您可以指定`Fruit`类型而不是让它推断`Apple`是否`Apple`继承自`Fruit`.

最后，您可以选择指定（或不指定）`TSource`只是为了使您的代码更具可读性 - 通过显式包含类型或删除冗余类型重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:40:03.340

因为有时（我的意思是有时）如果我们没有定义`TSource`，那么它就无法从它的使用中检测到它的类型，即它的 lambda 表达式。

有时如果我们不提供`TSource`.

在您的情况下，如果我们不提供它是可以的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:41:26.720

通常它是完全多余的，没有任何实际用途。我怀疑某些代码工具（例如重构引擎）即使没有必要也会添加通用参数。

Resharper 将它们标记为多余的，我通常会删除它们。他们不添加有价值的信息，也不（通常）记录重要的事情。

# ruby-on-rails - 如何更新用户密码？Devise + OpenID

> ID：10930167
> 
> 赞同：0
> 
> 时间：2012-06-07T10:38:50.417
> 
> 标签：ruby-on-rails, devise, openid, omniauth

环境：Rails + 设计 + OmniAuth

当我使用 Google OpenID 登录时，该网站会自动创建一个用户和一个随机密码。

但是当我尝试更新用户密码时，它告诉我：你需要当前密码。

所以我不能更新我的密码。（我只能用谷歌 OpenID 登录这个网站。）

有什么解决办法吗？THX。

# java - java中数字的自动拆箱应该使用Number.xxxValue()而不是转换为XXX.xxxValue()吗？

> ID：10930168
> 
> 赞同：1
> 
> 时间：2012-06-07T10:39:03.727
> 
> 标签：java

示例效果最好，想象 Object 是一个 Byte 并且我们尝试将它转换为一个长...

目前字节码看起来有点像这样

```
 Byte b = Byte.valueOf(1);
   Object source = b;
   Long long = (Long) source;     // fails CCE because a Byte is not a Long
   long value = long.longValue(); 
```

对 Number 进行演员表会更好吗？

```
 Byte b = Byte.valueOf(1);
   Number number = (Number) b;     // f
   long value = number.longValue(); 
```

真正的问题当然是我们减少了 ClassCastExceptions 的可能性，这是一件坏事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:42:32.853

为什么要投？`Byte`s也有[`longValue()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Byte.html#longValue%28%29)方法。

```
Byte b = Byte.valueOf(1);
long value = b.longValue(); 
```

或者更好：

```
byte b = 1;
long value = (long) b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:43:11.027

如果您不关心原始类型是什么，我会像您所做的那样转换为数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:06:49.097

从较小的整数到较大的整数，您不需要强制转换。它被称为*提升*和分配工作：

```
 byte b = (byte) 200;
    long l = b;
    Long ll = l; 
```

对于 Byte-byte 和 long-Long 转换，您可以使用自动装箱。

# django - 如何让 Django 的 ORM 检查模型是否具有或具有某种关系？

> ID：10930169
> 
> 赞同：1
> 
> 时间：2012-06-07T10:39:03.963
> 
> 标签：django, django-models, django-orm

我读过避免使用大的 IN 子句是不好的，因为它们很慢（尤其是 PostgreSQL）。

假设我有一门课叫冰箱，还有一门课叫蔬菜和调味品。

这两者在自己和冰箱之间都有多对多关系。

所以像：

```
class Fridge(models.Model):
     condiments = models.ManyToManyField(Condiments)
     vegetables = models.ManyToManyField(Vegetables) 
```

这里我们有一个 QuerySet 代表我们的白色冰箱：

```
qs = Fridges.objects.filter(color='white') 
```

**第一个问题**：

“给定一份调味品 ID 列表，给我所有的冰箱，里面有任何调味品（修改原始的 QuerySet）。”

**第二个查询**：

“给定一个蔬菜 ID 列表，给我所有的冰箱，里面有所有这些蔬菜（修改原来的 QuerySet）。”

如果不构建冰箱 ID 列表并在我的查询集中添加 IN 子句，我到底该怎么做呢？

以下是使用 IN 子句的解决方案（我现有解决方案的名称更改版本）：

第一个查询：

```
 condiment_ids = [...] # list of condiment IDs
    condiments = Condiment.objects.filter(
        id__in=condiment_ids).all()
    condiment_fridges = None
    for condiment in condiments:
        qs = condiment.fridge_set.all()
        if not condiment_fridges:
            condiment_fridges = qs
        else:
            condiment_fridges = condiment_fridges | qs
    qs = qs.filter(id__in=[l.id for l in condiment_fridges]) 
```

第二个查询：

```
 vegetable_ids = [...] # list of vegetable IDs
    vegetables = vegetable.objects.filter(id__in=vegetable_ids).all()
    vegetable_fridges = None
    for vegetable in vegetables:
        qs = vegetable.location_set.all()
        if not vegetable_fridges:
            vegetable_fridges = qs
        else:
            vegetable_fridges = vegetable_fridges & qs
    qs = qs.filter(id__in=[l.id for l in vegetable_fridges]) 
```

这些解决方案看起来很可怕而且很老套，我想知道是否有更好的方法来使用 Django 的 ORM 来解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:21:55.247

除非我误解了这个问题，否则您只需要：

```
Fridge.objects.filter(condiments__in=[1,2,3,4,5]) 
```

可能有一种更有效的方法来确定冰箱是否有所有的调味品。未经测试，但类似：

```
max_conds = Condiment.objects.all().count()
result = Fridge.objects.annotate(conds=Count('condiments')).filter(conds=max_conds) 
```

尽管取决于您的数据库后端和每个模型的行数，但这可能会更慢。

# ios - 宏来了解 Xcode 4.3.2 中是否启用了 ARC

> ID：10930171
> 
> 赞同：10
> 
> 时间：2012-06-07T10:39:17.690
> 
> 标签：ios, objective-c, cocoa, xcode4

在同一个文件中，我们要编写支持 ARC 和非 ARC 的代码。为此需要一些宏。

```
#ifdef ARC_ENABLED 
NSLog(@" ARC enabled ");
#else
NSLog(@" ARC disabled ");
[self release];
#endif 
```

如何实现这个宏，有没有可用的宏？请告诉我。提前感谢支持注意：ARC_ENABLED 只是我写的例子

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-07T10:44:37.017

有一个客观的 C 宏`__has_feature`，您可以使用它来检查是否启用了弧。

来自[Clang 语言扩展文档](http://clang.llvm.org/docs/LanguageExtensions.html)

> **自动引用计数**
> 
> Clang 在 Objective-C 中提供了对自动引用计数的支持，这消除了手动保留/释放/自动释放消息发送的需要。有两个与自动引用计数相关的特性宏： `__has_feature(objc_arc)`一般表示自动引用计数的可用性，同时`__has_feature(objc_arc_weak)` 表示自动引用计数还包括对 `__weak`指向 Objective-C 对象的指针的支持。

[功能检查宏](http://clang.llvm.org/docs/LanguageExtensions.html#feature-checking-macros)部分非常好读。

你可以这样用。。

```
#if !__has_feature(objc_arc)
    //Do manual memory management...
#else
    //Usually do nothing...
#endif 
```

[代码部分无耻地从这个答案](https://stackoverflow.com/questions/10700661/how-to-programmatically-detect-automatic-reference-counting/10700791#10700791)中复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:20:11.627

以下将定义`USING_ARC`, `USING_MRC`&`USING_GC`为 0 或 1，以及一些健全性检查：

```
// Utility macros (undefined below)

#define PREFIX_ONE(a) 1##a
#define EMPTY_DEFINE(a) (PREFIX_ONE(a) == 1)

// Memory management kind

#if !defined(USING_GC)
#  if defined(__OBJC_GC__)
#     define USING_GC 1
#  else
#    define USING_GC 0
#  endif
#elif EMPTY_DEFINE(USING_GC) 
#   undef USING_GC
#   define USING_GC 1
#endif

#if !defined(USING_ARC)
#  if __has_feature(objc_arc)
#     define USING_ARC 1
#  else
#    define USING_ARC 0
#  endif
#elif EMPTY_DEFINE(USING_ARC)
#   undef USING_ARC
#   define USING_ARC 1
#endif

#if !defined(USING_MRC)
#  if USING_ARC || USING_GC
#     define USING_MRC 0
#  else
#    define USING_MRC 1
#  endif
#elif EMPTY_DEFINE(USING_MRC)
#   undef USING_MRC
#   define USING_MRC 1
#endif

// Remove utility

#undef PREFIX_ONE
#undef EMPTY_DEFINE

// Sanity checks

#if USING_GC
#   if USING_ARC || USING_MRC
#      error "Cannot specify GC and RC memory management"
#   endif
#elif USING_ARC
#   if USING_MRC
#      error "Cannot specify ARC and MRC memory management"
#   endif
#elif !USING_MRC
#   error "Must specify GC, ARC or MRC memory management"
#endif

#if USING_ARC
#   if MAC_OS_X_VERSION_MIN_REQUIRED < MAC_OS_X_VERSION_10_6
#      error "ARC requires at least 10.6"
#   endif
#endif 
```

将其放在项目 .pch 中包含的合适 .h 中

您现在`#if USING_x`可以在任何地方控制条件编译。

您还可以排除某些文件在某些​​内存模型下编译的可能性，例如，在文件顶部包含：

```
#if USING_GC | USING_ARC
   #error "Sorry, this file only works with MRC"
#endif 
```

# google-apps-script - 无法从谷歌表单电子表格中的某些行中检索数据

> ID：10930173
> 
> 赞同：0
> 
> 时间：2012-06-07T10:39:28.423
> 
> 标签：google-apps-script, google-sheets

我试过这个脚本将行数据提取到一个数组中。前两列的数据能够提取，但收集的其余列数据显示为“未定义”。谁能指导我脚本中发生的错误？

在其他工作表中也进行了同样的尝试，效果很好，但不是基于表单的电子表格？任何人都可以拉出这个脚本背后的错误吗

```
function sendEmails3() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Issues");
  var startRow = 2;  // First row of data to process
  var numRows  = sheet.getLastRow(); // Number of rows to process
  var dataRange = sheet.getRange(startRow, 1, numRows, 3)

      // Fetch values for each row in the Range.
      var data = dataRange.getValues();
  var message_body2= new Array();
  var message_body1 =    " <html> <body> <table> <tbody>" 
      +"<tr>    <th> Timestamp </th> "
      +"    <th>    Program</th> "
      +"    <th>    District</th> "
      +"    <th>    Type to Issue</th> "
      +"    <th>    Name</th> "
      +"    <th>    Mobile Number</th> "
      +"    <th>    Personal Mail ID</th> "
      +"    <th>    Issue Description (not more that 100 words) if more, Kindly mail to ap_admin@drreddysfoundation.org</th> "
      +"    <th>    Share us the duration, since how many days the issue persist. ( in DAYS)</th> "
      +"    <th>    Center Mail ID</th> "
      +"    <th>    Issue Addressed</th> "
      +"    <th>    Issue Addressed Date</th> ";

  var message_body3 =   "</tbody> </table> </body> </html>";

  for (var i = 0; i < data.length; ++i) {
    var row = data[i];
    var timeStamp = row[0];  // timestamp column
    var addressedDate = row[11];

    if (addressedDate != "" && timeStamp != "") {  // Prevents sending duplicates

      message_body2[i] = "</tr> <tr> "
        +"  <td>" + row[0] + "</td> "
        +"  <td> "+ row[1] + " </td> "
        +"  <td> "+ row[2] + " </td> "
        +"  <td> "+ row[3] + " </td> "
        +"  <td> "+ row[4] + " </td> "
        +"  <td> "+ row[5] + " </td> "
        +"  <td> "+ row[6] + " </td> "
        +"  <td> "+ row[7] + " </td> "
        +"  <td> "+ row[8] + " </td> "
        +"  <td> "+ row[9] + " </td> "
        +"  <td> "+ row[10]+ " </td> "
        +"  <td> "+ row[11]+ " </td> "
        +"  <td> "+ row[12]+ " </td> " + "</tr> " ; 
    }
    Browser.msgBox( row[2] + " - " + row[3] + " - " + row[4] + " - " +  row[5] + " - " + row[6] + " - " + row[7] + "  - " + row[8] + "  - " + row[9] + " - " + row[10]+ " - " + row[11]+ " - " + row[12]);
  }
  var complete_message = message_body1 + message_body2+ message_body3;

  // check data accumulated
  Browser.msgBox(complete_message);  

  // export to a cell all the extracted data to verifiy  
  sheet.getRange(i, 3).setValue(complete_message);
} 
```

[单击此处查看脚本和电子表格](https://docs.google.com/spreadsheet/ccc?key=0AjkkHlm3kCphdC1CTHV6RkhlYjFaQklSa0U4RTJmcXc&pli=1#gid=0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:49:12.577

看起来有几个不同的错误会导致您的问题。

首先，您将 startRow 设置为 2，但电子表格中的第 2 行是空白的。您应该从第 3 行开始或删除第 2 行。

其次，这一行说只包括 3 列：

```
var dataRange = sheet.getRange(startRow, 1, numRows, 3) 
```

最后一个参数 3 是数据范围中的列数。因此，如果您希望包含所有列，则应为 12。或者，您可以使用 sheet.getLastColumn()。

# html - 隐藏图像及其覆盖

> ID：10930174
> 
> 赞同：0
> 
> 时间：2012-06-07T10:39:37.733
> 
> 标签：html, css, image

我有一个图像，只有在它的 ALT 属性中有一些内容时才会出现。这很好用：

```
 img.video[alt=""] {
    display:none;
    height:0px;
} 
```

但是，我希望图像也有一个也会消失的叠加层……叠加层是一个播放按钮，但它仍然存在。

```
 <li>
            <img class="video" src="<?php echo $row_rs_dealItem['imagemain']; ?>" alt="<?php echo $row_rs_dealItem['video']; ?>">
              <img id="videoLogo" src="images/video.png"/>
            </img>
          </li> 
```

有没有更好的方法来解决这个问题？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:47:11.160

是的，有，你必须使用[相邻的兄弟](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)选择器，因为 img 元素不能有子元素。

的HTML：

```
<li>
    <img class="video" src="..."   alt="...">
    <img class=v src="images/video.png">
 </li> 
```

和 CSS ：

```
img.video[alt=""], img.video[alt=""] + img.v {
    display:none;
    height:0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:43:23.167

当需要隐藏内容时（如果您的情况没有替代文本），请尝试向父 li 添加一个类。然后使用 CSS 显示/隐藏你喜欢的元素。

# java - 从网页获取数据到桌面应用程序

> ID：10930189
> 
> 赞同：1
> 
> 时间：2012-06-07T10:41:27.950
> 
> 标签：java, html, swing, web-scraping, netbeans-7

我正在开发一个桌面应用程序。我们如何从网站检索数据并将该格式准确地放置在桌面应用程序中？意味着我想代表网站的网页*（**不是整页**，一些块）*并在我的桌面应用程序中使用它。

我正在使用 Netbeans IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:48:05.377

查看[如何在 Swing 中使用 html](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)或[通过 Swing 的简单浏览器](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)

# android - 蓝牙追踪？

> ID：10930191
> 
> 赞同：0
> 
> 时间：2012-06-07T10:41:31.460
> 
> 标签：android, iphone, geolocation, gps, bluetooth

有没有办法三角测量或找到**蓝牙**设备的位置。如果是这样，有人知道找到更多信息的好地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:56:18.643

这是可能的，但您需要考虑几个问题。蓝牙是一种无线电系统，它会被周围的物体衰减。此外，可能会关闭蓝牙无线电或将其设置为不可发现，因此无法定位这些设备。您需要在检测阵列中使用提供 SNR 值的设备，并且所有设备都需要具有相同的无线电特性。

# http - RESTful Web 服务可以从 SPDY 协议中受益吗？

> ID：10930192
> 
> 赞同：8
> 
> 时间：2012-06-07T10:41:33.570
> 
> 标签：http, spdy

我正在设计一个 RESTful Web 服务。它将包括一些`GET`和`POST`请求。我有点困惑 Web 服务是否可以从 SPDY 协议中受益。我打算使用 Ruby on Rails 来实现。有没有支持 SPDY 的 gem？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T16:13:25.253

可能，是的。

SPDY 的主要设计目标之一是减少与每个请求相关的延迟量。实现这一点的方法是在同一个 TCP 连接上启用多路复用。此外，SPDY 进行标头压缩，这是一个巨大的胜利，特别是对于通常携带非常小的 (JSON) 有效负载但发送大的 HTTP 标头（cookie 等）的 REST 样式交互而言。

那么，SPDY 会给您带来性能提升吗？这取决于您的应用程序，但 SPDY 中的特定优化肯定会有所帮助。

至于Ruby的“宝石”。有解析协议的[spdy](https://github.com/igrigorik/spdy) gem，但你不应该需要它。SPDY 是 HTTP 之下的一个层，应该主要由服务器为您处理。如果您有兴趣尝试它并且正在使用 Rails，我建议您尝试 Passenger + [mod_spdy](https://developers.google.com/speed/spdy/mod_spdy/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:18:42.937

SPDY 与应用程序本身无关。如果您使用的是 Apache，请检查[mod_spdy](https://developers.google.com/speed/spdy/mod_spdy/)。rack也有[SPDY 守护进程](https://github.com/romanbsd/spdy)。

# javascript - 在 jsp 页面上显示来自 mysql 数据库的 Highcharts 数据

> ID：10930195
> 
> 赞同：1
> 
> 时间：2012-06-07T10:41:51.083
> 
> 标签：javascript, mysql, jsp, highcharts

我想使用 Highcharts（主/详细示例）在 .jsp 页面中显示数据。数据将从mysql数据库动态加载。有没有人有如何做到这一点的例子。任何从头开始的建议都会有所帮助，即使是最基本的，这意味着您可以建议任何数据以显示在最简单的 jsp 页面上。

感谢您的时间和帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:54:41.610

您可能已经找到了解决方案。如果不是，就是这样。

1) 您将需要在您的 JSP 中以 <% %> scriptlet 甚至更好的 servlet 形式的 JDBC 连接。我使用 SQLITE 是为了方便。

```
Class.forName("org.sqlite.JDBC");
Connection conn = DriverManager.getConnection("jdbc:sqlite:/DBlocation/Dbname");
Statement stat = conn.createStatement(); 
```

2）然后您希望通过 ResultSet 将结果解析为 ArrayList

```
ArrayList al = new ArrayList();

    // Query DB for dates
    ResultSet rs = stat.executeQuery("select distinct(date) from project_time;");
    while (rs.next()) 
      { 
         al.add(rs.getString("COLUMN_NAME"));
      } 
    rs.close(); 
```

3) 接下来，您要使用 RequestDispatcher 将此 ArrayList 传递回您的 JSP 页面

```
RequestDispatcher rd = null;

request.setAttribute("values",al);
rd = request.getRequestDispatcher("chart.jsp");
rd.forward(request,response); 
```

4) 在您的 jsp 页面上，您希望获取从 servlet 传递的值，如下所示并将它们传递给迭代器

```
ArrayList valuelist=(ArrayList)request.getAttribute("values");
Iterator valueIterator = valuelist.iterator(); 
```

5）接下来，您需要循环遍历 javascript 中的迭代器以生成图形值。

```
xAxis: {
                    categories: 
                        [<% while(valueIterator.hasNext()) { out.println("'"+ valueIterator.next() +"',");} %>],                    
                    tickmarkPlacement: 'on',
                    title: {
                        enabled: false
                    }
                }, 
```

就是这样。希望这足够清楚，如果不是轻弹我的消息，我会进一步帮助你。

# json - 未找到端点 WCF

> ID：10930199
> 
> 赞同：2
> 
> 时间：2012-06-07T10:42:12.200
> 
> 标签：json, wcf, entity-framework, c#-4.0

我有我托管的 WCF 库，登录功能运行良好，但第二个功能 ReturnCounter

界面是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.ServiceModel;
using System.ServiceModel.Web;

namespace PMAService
{
    [ServiceContract]
    public interface IPMA
    {
        [OperationContract]
        string Login(string username, string password);

        [OperationContract]
        List<usp_ReturnEncounter_Result> ReturnEncounter();

    }
} 
```

代码是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel.Web;
using System.Security.Cryptography;
using System.Web.Security;

namespace PMAService
{
    public class PMA : IPMA
    {

        [WebInvoke(Method = "GET",
   ResponseFormat = WebMessageFormat.Json,
   UriTemplate = "LogIn/{username}/{password}")]
        public string Login(string username, string password)
        {
            if (Membership.ValidateUser(username, password))
                return "true";
            else
                return "false";
        }

        // Method to retrieve the Counter 
        [WebInvoke(Method = "GET",
ResponseFormat = WebMessageFormat.Json,
UriTemplate = "ReturnEncounter")]
        public List<usp_ReturnEncounter_Result> ReturnEncounter()
        {
            using (PMAEntities context = new PMAEntities())
            {
              return   context.usp_ReturnEncounter().ToList();
            }
        }

    }
} 
```

我连接到实体框架的地方

web.config 看起来像

```
<?xml version="1.0"?>
<configuration>
  <appSettings/>
  <connectionStrings>
</connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <roleManager enabled="true" />
    <membership>
      <providers>
        <remove name="AspNetSqlMembershipProvider"/>
        <add name="AspNetSqlMembershipProvider"
             type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
             connectionStringName="Login"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             requiresQuestionAndAnswer="false"
             applicationName="/"
             requiresUniqueEmail="false"
             passwordFormat="Hashed"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="1"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             passwordStrengthRegularExpression="" />
      </providers>
    </membership>

    <authentication mode="Windows"/>
    <customErrors mode="On"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="PMAService.PMA">
        <endpoint binding="webHttpBinding" contract="PMAService.IPMA" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

login/x/y 运行良好，而 ReturnCounter 给出错误端点未找到

请有任何解决方法的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:54:36.170

首先在您的服务上启用[跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)并查看异常的原因。

此外，您还可以考虑在服务器和客户端增加 ReaderQuotas，以便传递更大的数据而不会出现任何问题。示例如下所示：

```
<system.serviceModel>    
<bindings>
<webHttpBinding>
          <binding maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
             <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                  maxArrayLength="2147483647" maxBytesPerRead="2147483647"
                  maxNameTableCharCount="2147483647" />
            <security mode="None" />
          </binding>
        </webHttpBinding>
</bindings>
</system.serviceModel> 
```

我还在您的代码中看到您正在直接传递实体框架获取的对象。在某些情况下，实体框架对象不会反序列化并可能导致异常。创建一个简单的 POCO，然后填充获取的数据并返回 POCO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:29:09.307

为什么选择 WebInvoke？

要使用 Get 操作，您需要为此方法使用 WebGet。

WebInvoke 仅用于执行插入更新删除操作。我们为它们使用 POST、PUT 和 DELETE 方法名称。（有序）

当您需要获取一些数据时，您应该执行类似的操作，

```
 [WebGet(UriTemplate = "ReturnEncounter",
 RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
```

正如您所注意到的，有一种请求格式，它可能是 WebMessageFormat 上枚举的 XML 或 JSON。

对于后期操作。您可以使用 WebRequest 对象。

希望有所帮助。

# jquery-ui - JqueryUI datepicker，buttontext作为值

> ID：10930200
> 
> 赞同：3
> 
> 时间：2012-06-07T10:42:21.890
> 
> 标签：jquery-ui, datepicker

我正在尝试获取 datepicker 的按钮文本（默认为省略号），以将其自身设置为输入的值。

我在页面上有多个日期选择器，与下面的示例不同，我有一个图标而不是文本输入。我希望值本身显示在您将鼠标悬停在图标上时出现的工具提示上。

我已经尝试过 -`buttonText: $(this).val()`作为一种选择，但它没有任何反应

示例 - [http://jsbin.com/unolot/3/](http://jsbin.com/unolot/3/)

**所以我的问题**- 如何让日期选择器输入的按钮文本动态匹配值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:06:18.917

您必须处理两种情况：

*   When the selected date changes: use the `onSelect`event to change the button's title attribute
*   在初始渲染时：不幸的是，日期选择器还没有实现小部件工厂，因此没有`create`事件，您必须在小部件初始化后*手动更新标题属性。*

*不要忘记将picker的默认日期设置为字段的初始值，否则默认选择的日期是“今天”*

像这样的东西：

```
// as you have several instances, loops through them
$(".deadline_picker_on").each(function() {

    var dt = $(this);

    dt.datepicker({
        showOn: "button",
        buttonText: '',
        // set the default date to the value of the field
        defaultDate: dt.val(),
        duration: 100,
        dateFormat: 'yy-mm-dd',
        showOptions: {
            direction: 'right'
        },
        onSelect: function(dateText, inst) {
            // on data selection, change the title attribute of the button
            $(this).next().attr('title', dateText);
        }
    })
    // get the button (next element)
    .next()
    // set the title attribute with the formatted initial date from the picker
    .attr('title', $.datepicker.formatDate('yy-mm-dd', dt.datepicker('getDate')));
});
​ 
```

# interop - Microsoft Interop Outlook c# - invalidcastexception？

> ID：10930201
> 
> 赞同：2
> 
> 时间：2012-06-07T10:42:22.930
> 
> 标签：interop, outlook, .net

突然得到一个 System.invalidcastexception: unable to cast COM object of type 'system._object' to interface type 'Microsoft.office.interop.outlook.mailitem' ... 到我写的一个运行良好的程序，现在 BAM！例外。

不知道为什么...请注意我是新手程序员。

这是我使用 Outlook 的代码片段：

```
using Microsoft.Office.Interop.Outlook;

static Microsoft.Office.Interop.Outlook.Application app = null;
static _NameSpace ns = null;
static MailItem item = null;
static MAPIFolder inboxFolder = null;
static MAPIFolder dest = null;
static void SendMail(string mailSubject, string htmlMailBody, string mailTo)
{
    Microsoft.Office.Interop.Outlook.Application outlookApp = new Microsoft.Office.Interop.Outlook.Application();
    NameSpace outlookNS = outlookApp.GetNamespace("MAPI");
    outlookNS.Logon(Missing.Value, Missing.Value, true, true);
    MailItem oMsg = (MailItem)outlookApp.CreateItem(OlItemType.olMailItem);
    oMsg.To = mailTo;
    oMsg.Recipients.ResolveAll();
    StreamReader sr = new StreamReader(@"C:\Users\" + WindowsIdentity.GetCurrent().Name.Split('\\')[1] + @"\AppData\Roaming\Microsoft\Signatures\Default.htm");
    string signature = sr.ReadToEnd();
    oMsg.Subject = mailSubject;
    oMsg.HTMLBody = htmlMailBody + "<br><br>" + signature + "</font>";
    oMsg.Save();
    ((Microsoft.Office.Interop.Outlook._MailItem)oMsg).Send();
    oMsg = null;
    outlookNS = null;
    outlookApp = null;
}

app = new Microsoft.Office.Interop.Outlook.Application();
ns = app.GetNamespace("MAPI");
ns.Logon(null, null, false, false);
inboxFolder = ns.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);

#region match - convert - extract
foreach (string tifFile in Directory.GetFiles(workFolder, "*.tif", SearchOption.TopDirectoryOnly))
{
    string currentFile = Path.GetFileNameWithoutExtension(tifFile);

    for (int i = 1; i <= inboxFolder.Items.Count; i++)
    {
        //##############CODE CRASHES HERE##############

        item = (MailItem)inboxFolder.Items[i];
        // item = inboxFolder.Items[i];
        if (item.Body != "")
        {
            if ((item.Body.Contains("Box Number =")) && (item.Body.Contains("Contract ID = ")) && (item.Body.Contains("Branch = ")) && (item.Body.Contains(currentFile.Replace('_', '/'))))
            {
                //    matchFound = true;
                MailStack current = new MailStack();
                Console.WriteLine("________________________");
                Console.WriteLine("File matched \t\t:\t" + currentFile + ".tif"); 
```

我环顾四周，但无法理解可用的答案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:07:54.233

试试这个...

```
item = inboxFolder.Items[i] as MailItem;
if (item != null) 
{ 
   // ...
} 
```

# iphone - 如何将基于视图的应用程序转换为基于导航的应用程序？

> ID：10930208
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:42:43.137
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

任何人都可以向我解释将基于视图的应用程序转换为基于导航的应用程序的分步过程吗？这是 IB 和我的 appdelegate 中为实现这一目标而采取的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:23:34.770

在您的应用程序委托中，您可以像这样放置代码：

```
 self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [self.window addSubview:navigationController.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:46:52.393

在界面文件中添加一个 UInavigation 控制器对象。然后在您的 didfinishlaunch 中添加代码

```
self.navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [self.navigationController setNavigationBarHidden:NO];
    //self.navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
    //self.navigationController.navigationBar.translucent = YES;

    // Override point for customization after app launch    
    [window addSubview:self.navigationController.view];
    [window makeKeyAndVisible]; 
```

返回是；

并且不要忘记将委托连接到 IB 中的文件所有者。

# serialization - 如何使用 protobuf 序列化大型嵌套数组？

> ID：10930209
> 
> 赞同：5
> 
> 时间：2012-06-07T10:42:48.197
> 
> 标签：serialization, protobuf-net

我正在使用 protobuf-net 进行二进制序列化。*我在序列化Class A*时遇到了 OutOfMemory 。使用 BinaryFormatter 可以很好地序列化同一个对象。

下面是类示例：

```
[ProtoContract]
class A:
   [ProtoMember(1, DataFormat = DataFormat.Group)]
   B[] Array1 {get; set;}
   ....

class B:
   [ProtoMember(1)]
   string Field1 {get; set;}

   [ProtoMember(2)]
   string Field1 {get; set;}

   [ProtoMember(3, DataFormat = DataFormat.Group)]
   C[] Array2 {get; set;} // 20000 elements
   ....

class C:
   [ProtoMember(1)]
   string Field1 {get; set;}

   [ProtoMember(2)]
   string Field1 {get; set;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:13:39.633

哇。简直哇。感谢您提出这个问题。有一个小故障，它在一些场景中错误地没有应用组编码，包括你的。对于 protobuf-net，这并不是什么大问题，因为 group 和 string 可以互换处理，但这仍然是一个令人尴尬的故障，尤其是因为“group”是（正如你正确使用的那样）使事情向前发展的关键 -仅用于序列化大图。

我已经在本地和源代码中修复了这个问题 - 但是，我想在正式发布之前做更多的稳定性测试。如果您乐于从源代码构建，它现在应该可以正常工作 - 或者如果您愿意，我可以通过电子邮件将 dll 发送给您。

# linq - 用于内表的左连接和过滤器的 Linq 表达式

> ID：10930212
> 
> 赞同：0
> 
> 时间：2012-06-07T10:43:11.277
> 
> 标签：linq, join, subquery, left-join

我想知道如何制作与这些 SQL 查询具有相同效果的 Linq 表达式

```
SELECT item.*, priceforitem.*
FROM
  item
  LEFT JOIN priceforitem
    ON priceforitem.ItemID = item.ItemID
    AND priceforitem.PriceID = ?PriceID 
```

我已经使用 Method 查询完成了，但我不知道它是否会产生相同的结果

```
db.Items
    .GroupJoin(
        db.PriceForItems.Where(pi => pi.PriceID == id),
        i => i.ItemID,
        pi => pi.ItemID,
        (i, pi) => new { Item = b, Prices = pi })
    .SelectMany(
        a => a.Prices.DefaultIfEmpty(),
        (i, pi) => new
        {
            ItemID = i.Item.ItemID,
            Code = i.Item.Code,
            Name = i.Item.Name,
            PriceForItemID = pi.PriceForItemID,
            Price = pi.Price 
        }) 
```

然后想了一会儿我就这样缩短它

```
db.Items
    .SelectMany(
        i => db.PriceForItems.Where(
            pi => pi.PriceID == id 
                && pi.ItemID = i.ItemID).DefaultIfEmpty(),
        (i, pi) => new 
        {
            ItemID = i.Item.ItemID,
            Code = i.Item.Code,
            Name = i.Item.Name,
            PriceForItemID = pi.PriceForItemID,
            Price = pi.Price 
        }) 
```

我是 Linq 的新手，我不知道哪个更好以及如何将其转换为 Linq 查询语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:29:55.700

首先你的sql查询。它是有效的内部连接，因为 where 条件将过滤掉所有数据`priceforitem`为空的行。如果您确实想将相同的查询转换为 linq，您可以像 db.Items 中的 i 一样执行此操作

```
join p in db.PriceforItems on
i.ItemId equals p.ItemId into tempvals
from t in tempvals.DefaultIfEmpty()
where t.PriceId == id
select new{i.ItemId, ..., t.PriceId, t...., t....} 
```

我主要编写 linq 查询而不是表达式，它们对我来说更具可读性。如果您仍想获得一个表达式，您可以编写一个有效的 linq 查询并将其粘贴到[Linqpad 中](http://www.google.com.pk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFkQFjAA&url=http://www.linqpad.net/&ei=m5DQT7esOcXqrQfozY3_Cw&usg=AFQjCNFw-ZpPkP4je7u9udiur5Wg5us7tQ&sig2=qCRPnsfxPj2F8OEunnHoDg)，它将给出查询的结果以及 lambda 表达式。

# qt - 动态 QImage ，当没有指定初始大小时

> ID：10930228
> 
> 赞同：2
> 
> 时间：2012-06-07T10:43:49.093
> 
> 标签：qt, paint, qt4.8

我正在尝试使用 QPainter 将项目绘制到 QImage 上，但由于我无法预测此 QImage 的确切大小，因此我无法使用 QImage::save() ，它总是告诉我：

`QPainter::begin: Paint device returned engine == 0, type: 3`

但是如果我在声明这个 QImage 时指定图像的高度和宽度，它会顺利运行：

`QImage output = QImage (500 , 500 , QImage::Format_ARGB32);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:14:01.027

`QImage`, `QPixmap`, 等需要在绘图开始之前分配数据。使用默认构造函数`QImage`不会分配任何内存，所以`image.isNull() == true`. 因此，当您调用时`QPainter::begin()`（可能通过创建一个`QImage`作为绘图设备的间接调用），它无法绘制到任何内存中，因为它不存在。

从`QPainter::begin()`文档：

```
QPixmap image(0, 0);
painter->begin(&image); // impossible - image.isNull() == true; 
```

所以你必须在绘制之前想出一个尺寸。在您的情况下，最好的办法是确定最大尺寸（或在可行的情况下计算一个），然后在您知道确切尺寸后 - 裁剪图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:30:23.517

或者，您可以在 a 上绘制，`QGraphicsScene`当您在其上添加项目时会自动扩展，然后仅保存由 给出的绘制区域`QGraphicsScene::itemsBoundingRect()`：

```
QGraphicsScene scene;
scene.addItem(...);

QImage image(scene.itemsBoundingRect().size(), QImage::Format_ARGB32);

QPainter painter(&image);
scene.render(&painter, image.rect(), scene.itemsBoundingRect()); 
```

# javascript - DistanceMatrixService 和多个同时回调

> ID：10930236
> 
> 赞同：1
> 
> 时间：2012-06-07T10:44:35.073
> 
> 标签：javascript, google-maps, asynchronous, callback

情况如下：

*   我们有 1 个原始地址
*   我们有 x (admit 3) 个品牌，它们自己有 x (admit 3) 个商店

我必须为每个品牌确定离原产地最近的商店。

问题是异步的 getDistanceMatrix 回调函数，它们同时执行。我不知道如何找到这样的回调对应于这样的品牌。

所以实际上，我得到了所有最近的商店，但我不知道如何将它们与各自的品牌联系起来。

这是我的代码：

```
//Origin address
var origin = "origin address";

//For each brands, list store's address
var brand1 = new Array("address1", "address2", "address3");
var brand5 = new Array("address1", "address2", "address3");
var brand29 = new Array("address1", "address2", "address3");

calculateDistance(1, brand1);
calculateDistance(5, brand5);
calculateDistance(29, brand29);

//Classic google code
function calculateDistance(id_brand, adresses){ 
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix({
        origins: [origin],
        destinations: adresses,
        travelMode: google.maps.TravelMode.DRIVING,
        avoidHighways: false,
        avoidTolls: false,
    }, callback);
}

function callback(response, status) {
    var tabDistance = new Array();

    if (status == google.maps.DistanceMatrixStatus.OK) {  
        var origins = response.originAddresses;
        var destinations = response.destinationAddresses;

        for (var i = 0; i < origins.length; i++) {
            var results = response.rows[i].elements;
            for (var j = 0; j < results.length; j++) {
                var element = results[j];
                var distance = element.distance.value;
                var from = origins[i];
                var to = destinations[j];
                tabDistance[j] = new Array(distance,to);
            }
        }

        //Find the nearest store
        var indice = minDistance(tabDistance);

        alert('Nearest store ' + tabDistance[indice][0]);

    }
}
}); 
```

谢谢你的帮助 ！

# asp.net - 如何连接 SPSS 和 ASP.Net

> ID：10930237
> 
> 赞同：1
> 
> 时间：2012-06-07T10:44:35.717
> 
> 标签：asp.net, spss

我可以连接 SPSS 和 ASP.Net。我想在 ASP.Net 中创建预测表以使用 SPSS。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T15:47:56.490

merthsoft 对以下 stackoverflow 帖子的回答为启动和运行 spss 提供了一个很好的起点。

[在 C# 中使用 64 位 SPSS 库](https://stackoverflow.com/questions/5598968/using-64-bit-spss-libraries-in-c-sharp)

基本上将 SPSS 提供的 dll 复制到服务器上的 system32 文件夹中，并包装 spssio64.dll 的调用，以便您可以从代码中调用它。如果您使用的是 C#，则可以使用 DLLImport 属性。

我个人遇到的挂断包括所有适当的 dll，例如... spssio64.dll、icudt32.dll、icuin32.dll 和 icuuc32.dll

导出数据时，所有列都必须是唯一的。

我希望现在你已经让它工作了，但对于那些在未来遇到这个问题的人来说，这可能会有所帮助。

# facebook - Pagetab 对话框失败

> ID：10930242
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:44:53.347
> 
> 标签：facebook, request, facebook-apps

我目前正在尝试将自定义选项卡附加到页面。我通过调用[https://www.facebook.com/dialog/pagetab?app_id=](https://www.facebook.com/dialog/pagetab?app_id=) {my_app_id}&redirect_uri={my_tab_landing}来做到这一点

这会导致错误：

**抱歉，出了一些问题。**

我们正在尽快努力修复这个。

这个状态已经2天了，还有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:51:10.440

城里显然有新的网址；

[https://www.facebook.com/add.php?api_key=](https://www.facebook.com/add.php?api_key=) {YOURAPPID}&pages=1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:39:38.680

包含 Javascript SDK 后，您可以调用一个漂亮的对话框来选择要添加的应用程序的目标页面：

```
var obj = {
            method: 'pagetab'
        };

FB.ui(obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:43:21.163

详细介绍问题和解决方法的文章[将 Facebook 应用程序添加到页面的解决方案](http://blog.aswinlutchanah.info/2012/06/06/facebook-app-add-page-tab-bug/ "Facebook 应用程序错误")

也可以找到更多用于个性化实现的参数！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:53:12.387

修复即将推出：

[https://developers.facebook.com/bugs/304168516342380?browse=search_4fd087c2f30b06d49200886](https://developers.facebook.com/bugs/304168516342380?browse=search_4fd087c2f30b06d49200886)

# macos - 从死机中复制 Apple Mac 硬盘？

> ID：10930243
> 
> 赞同：0
> 
> 时间：2012-06-07T10:44:55.337
> 
> 标签：macos, hardware, hard-drive

我对 Mac 几乎没有经验，所以我想在继续之前先问一个简单的问题。

我朋友 6 年前的 mac 台式机前几天死了，她把它带到苹果商店的技术人员那里，看看她是否可以取回她的文件，他们说不可以，因为硬盘驱动器的代码不同，你不能把它拿出来。

这对我来说听起来像是一堆废话，所以我想撕掉硬盘驱动器并将其插入我的电脑，然后复制所有内容。如果需要，我也可以访问 linux。

那么在执行此操作之前我需要知道什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:26:30.900

假设硬盘驱动器本身没有死，您可以使用 Ubuntu 之类的东西并将所有文件复制到不同的硬盘驱动器上。您通常不能从 windows 执行此操作，因为 windows 使用 NTFS 文件系统并且不会识别 mac 文件系统（[HFS 或 HFSPlus](http://en.wikipedia.org/wiki/File_system#Mac_OS_X)）。大多数版本的 linux 都可以识别 mac 硬盘驱动器并复制内容。文件所有权可能有一些技巧，所以这里有一篇关于如何在 ubuntu 中执行此操作的好帖子：

[http://ubuntuforums.org/archive/index.php/t-852144.html](http://ubuntuforums.org/archive/index.php/t-852144.html)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:30:14.343

如果您的朋友打算购买新的 Mac，您应该保留磁盘本身；使用外部硬盘驱动器，新机器（或新的 OSX 安装）基本上可以从旧驱动器迁移所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T20:49:47.823

迟到的答案，我知道，但我刚刚使用 dd_rescue 救出了损坏的 mac 磁盘，在 HP 上启动 Trinity 3.4 并将损坏的磁盘克隆到工作磁盘。然后我将工作磁盘弹出到一个工作的 mac 中，嘿，用户拿回了文件。

# php - 在数据库中保存数组？

> ID：10930249
> 
> 赞同：-4
> 
> 时间：2012-06-07T10:45:21.993
> 
> 标签：php, mysql

这是我的数组：

```
array(2) {
  [0]=>
  string(4) "0002"
  [1]=>
  string(4) "0001"
} 
```

它从 javascript 传递到我的 php 以保存在数据库中。

在保存到数据库之前我：

```
$myArray = serialize($post['myArray']); 
```

但是在我的数据库（mysql）中，我得到了这个：

```
a:2:{i:0;s:4:"0002";i:1;s:4:"0001";} 
```

任何想法出了什么问题？

数据库提交之前的 var 转储也给出：

```
string(36) "a:2:{i:0;s:4:"0002";i:1;s:4:"0001";}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:49:04.253

您序列化一个结果为格式化字符串的数组。当您从数据库中取回数据时，您必须使用反序列化函数将此字符串转换回数组。

[http://cz.php.net/manual/en/function.unserialize.php](http://cz.php.net/manual/en/function.unserialize.php)

# coffeescript - 咖啡脚本中的 apply(this, arguments) 等价物是什么？

> ID：10930250
> 
> 赞同：3
> 
> 时间：2012-06-07T10:45:28.650
> 
> 标签：coffeescript

在 javascript 中，您会编写如下内容：

```
method.apply(this,arguments); 
```

但是，您如何将其翻译为咖啡脚本？：

```
method.apply(@, arguments) 
```

arguments 变量是否有不同的名称？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-01T03:17:16.157

使用 splats 你可以使用更简洁的 coffeescript 语法：

```
caller: ->
  @method arguments... 
```

以上编译为以下Javascript：

```
caller: function() {
  return this.method.apply(this, arguments);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T22:20:52.960

`arguments`也可以在咖啡脚本中使用。所以你可以这样做：

`method.apply @, arguments`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T10:51:06.347

如果您希望它像 javascript 一样工作，您可能可以，但是对于您可能想要完成的工作，coffeescript 有“splats”。这是来自 coffeescript.org 的解释：

```
gold = silver = rest = "unknown"

awardMedals = (first, second, others...) ->
  gold   = first
  silver = second
  rest   = others

contenders = [
  "Michael Phelps"
  "Liu Xiang"
  "Yao Ming"
  "Allyson Felix"
  "Shawn Johnson"
  "Roman Sebrle"
  "Guo Jingjing"
  "Tyson Gay"
  "Asafa Powell"
  "Usain Bolt"
]

awardMedals contenders...

alert "Gold: " + gold
alert "Silver: " + silver
alert "The Field: " + rest 
```

# sql - SQL Server 2005，将表导出到插入查询

> ID：10930251
> 
> 赞同：0
> 
> 时间：2012-06-07T10:45:29.743
> 
> 标签：sql, sql-server-2005, insert, dump

我无法在 SQL Server 2005 中找到 phpmyadmin 用于导出表的实用程序。

我需要一种方法来转储表中包含的所有信息，其中包含所有插入信息。

如何使用 SQL Server 2005 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:55:32.877

使用`Database publishing wizard`工具可以在 SQL Server 安装目录下找到

# c# - c#：如何实现服务器代理支持https？

> ID：10930253
> 
> 赞同：1
> 
> 时间：2012-06-07T10:45:36.767
> 
> 标签：c#, .net, http, https, proxy-server

我正在尝试将来自特定端口的所有请求（所有请求都来自 Web 浏览器）重定向到请求的主机名作为代码

1 - 从请求中读取所有接收数据

```
 while (recvRequest)
            {
                this.clientSocket.Receive(requestBuffer);
                string fromByte = ASCIIEncoding.ASCII.GetString(requestBuffer);
                requestPayload += fromByte;

                if (requestPayload.EndsWith(EOL + EOL))
                {
                    recvRequest = false;
                }
            } 
```

2-解析查询（获取主机和端口以及请求类型）

```
 HeaderFields = ParseQuery(requestPayload);
            if (HeaderFields == null || !HeaderFields.ContainsKey("Host"))
            {
                return;
            }
            int Port;
            string Host;
            int Ret; 
```

3 - 如果类型等于 CONNECT

```
 if (HttpRequestType.ToUpper().Equals("CONNECT"))
            { //HTTPS
                Ret = RequestedPath.IndexOf(":");
                if (Ret >= 0)
                {
                    Host = RequestedPath.Substring(0, Ret);
                    if (RequestedPath.Length > Ret + 1)
                        Port = int.Parse(RequestedPath.Substring(Ret + 1));
                    else
                        Port = 443;
                }
                else
                {
                    Host = RequestedPath;
                    Port = 443;
                }

            } 
```

4 - 如果输入等于 post 或 get

```
 else
            { //Normal HTTP
                Ret = ((string)HeaderFields["Host"]).IndexOf(":");
                if (Ret > 0)
                {
                    Host = ((string)HeaderFields["Host"]).Substring(0, Ret);
                    Port = int.Parse(((string)HeaderFields["Host"]).Substring(Ret + 1));
                }
                else
                {
                    Host = (string)HeaderFields["Host"];
                    Port = 80;
                }
                if (HttpRequestType.ToUpper().Equals("POST"))
                {
                    int index = requestPayload.IndexOf("\r\n\r\n");
                    m_HttpPost = requestPayload.Substring(index + 4);
                }
            }

            requestPayload = "";
            foreach (string line in requestLines)
            {

                requestPayload += line;
                requestPayload += EOL;
            } 
```

5 - 连接到主机

```
 Socket destServerSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            destServerSocket.Connect(Host, Port);
            //State 2: Sending New Request Information to Destination Server and Relay Response to Client
            destServerSocket.Send(ASCIIEncoding.ASCII.GetBytes(requestPayload));
            //Console.WriteLine("Begin Receiving Response..."); 
```

6 - 向客户端发送接收响应

而（destServerSocket.Receive（responseBuffer）！= 0）{

```
 Console.Write(ASCIIEncoding.ASCII.GetString(responseBuffer));
                this.clientSocket.Send(responseBuffer);
            }

            destServerSocket.Disconnect(false);
            destServerSocket.Dispose();
            this.clientSocket.Disconnect(false);
            this.clientSocket.Dispose(); 
```

但是当我打开电子邮件时无法正常工作

# java - 使用 JavaMail API 通过 servlet 发送带有附件的电子邮件未通过

> ID：10930254
> 
> 赞同：0
> 
> 时间：2012-06-07T10:45:52.050
> 
> 标签：java, jakarta-ee

我使用以下代码通过 JavaMail API 发送电子邮件

有人可以指导我如何在此代码中添加附件，以便我可以发送带有附件的电子邮件..

```
package Javamail;

import javax.mail.*;

import javax.mail.internet.*;

import java.util.*;

import java.io.*;

public class SendmailUsejavamail
{

  private static final String SMTP_HOST_NAME = "smtp.gmail.com";

  private static final String SMTP_AUTH_USER = "aaaa@gmail.com";

  private static final String SMTP_AUTH_PWD  = "xxxxxxxxx";

  private static final String emailMsgTxt      = "Online Order Confirmation Message. Also include the Tracking Number.";

  private static final String emailSubjectTxt  = "Order Confirmation Subject";

  private static final String emailFromAddress = "bbbbb@gmail.com";

  // Add List of Email address to who email needs to be sent to

  private static final String[] emailList = {"abc@gmail.com", "abcd@gmail.com"};

  public static void main(String args[]) throws Exception{

    SendmailUsejavamail smtpMailSender = new SendmailUsejavamail();

    smtpMailSender.postMail( emailList, emailSubjectTxt, emailMsgTxt, emailFromAddress);

    System.out.println("Sucessfully Sent mail to All Users");

  }

  public void postMail( String recipients[ ], String subject,
                            String message , String from) throws MessagingException
  {

    boolean debug = false;

     //Set the host smtp address
     Properties props = new Properties();

     props.put("mail.smtp.host", SMTP_HOST_NAME);

     props.put("mail.smtp.auth", "true");

    Authenticator auth = new SMTPAuthenticator();

    Session session = Session.getDefaultInstance(props, auth);

    session.setDebug(debug);

    // create a message
    Message msg = new MimeMessage(session);

    // set the from and to address
    InternetAddress addressFrom = new InternetAddress(from);
    msg.setFrom(addressFrom);
    InternetAddress[] addressTo = new InternetAddress[recipients.length];
    for (int i = 0; i < recipients.length; i++)
    {
        addressTo[i] = new InternetAddress(recipients[i]);
    }
    msg.setRecipients(Message.RecipientType.TO, addressTo);
    // Setting the Subject and Content Type
    msg.setSubject(subject);
    msg.setContent(message, "text/plain");
    Transport.send(msg);
 }

/**
* SimpleAuthenticator is used to do simple authentication
* when the SMTP server requires it.
*/

private class SMTPAuthenticator extends javax.mail.Authenticator{

    public PasswordAuthentication getPasswordAuthentication(){

        String username = SMTP_AUTH_USER;

        String password = SMTP_AUTH_PWD;

        return new PasswordAuthentication(username, password);

    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:16:14.537

```
 MimeMessage message = new MimeMessage(session);

 // create the message part 
  MimeBodyPart messageBodyPart = new MimeBodyPart();

 //fill message
  messageBodyPart.setText("Hi");

   Multipart multipart = new MimeMultipart();
   multipart.addBodyPart(messageBodyPart);

// Part two is attachment
messageBodyPart = new MimeBodyPart();
DataSource source =  new FileDataSource(fileAttachment); // your file
messageBodyPart.setDataHandler( new DataHandler(source));
messageBodyPart.setFileName(fileAttachment);
multipart.addBodyPart(messageBodyPart);

// Put parts in message
message.setContent(multipart);

// Send the message
Transport.send( message ); 
```

# entity-framework - 如何覆盖 MigratorScriptingDecorator 生成的 SQL 脚本

> ID：10930259
> 
> 赞同：6
> 
> 时间：2012-06-07T10:46:09.397
> 
> 标签：entity-framework, entity-framework-4

**首先使用 Entity Framework 4.3.1 代码和数据迁移。**

我编写了一个实用程序，使用 MigratorScriptingDecorator 自动为目标数据库生成迁移脚本。

但是，有时从头重新生成目标数据库时，生成的脚本是无效的，因为它两次声明了同名的变量。

变量名称是**@var0**。

当应用多个迁移并且至少有两个导致删除默认约束时，这似乎会发生。

生成脚本表单代码和使用包管理器控制台命令时都会出现此问题：

```
Update-Database -Script 
```

以下是生成脚本的违规片段：

```
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'SomeTableName') 
```

和

```
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'SomeOtherTableName') 
```

我希望能够覆盖它为每个迁移生成 SQL 的点，然后添加一个“GO”语句，以便每个迁移都在一个单独的批处理中，这将解决问题。

任何人都知道如何做到这一点，或者如果我在错误的树上吠叫，那么也许你可以提出更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:23:17.037

因此，通过广泛使用[ILSpy和在](http://wiki.sharpdevelop.net/ilspy.ashx)[这个问题的答案](https://stackoverflow.com/a/9831375/703714)中的一些指示，我找到了一种方法。

有兴趣的人在下面详细说明。

**问题**

该类`SqlServerMigrationSqlGenerator`最终负责创建 SQL 语句，这些语句在使用`-Script`包管理器控制台中的开关或使用`MigratorScriptingDecorator`.

**工作**

`SqlServerMigrationSqlGenerator`检查负责 a的 Genearate 方法`DROP COLUMN`，它看起来像这样：

```
protected virtual void Generate(DropColumnOperation dropColumnOperation)
{
    RuntimeFailureMethods
        .Requires(dropColumnOperation != null, null, "dropColumnOperation != null");
    using (IndentedTextWriter indentedTextWriter = 
        SqlServerMigrationSqlGenerator.Writer())
    {
        string value = "@var" + this._variableCounter++;
        indentedTextWriter.Write("DECLARE ");
        indentedTextWriter.Write(value);
        indentedTextWriter.WriteLine(" nvarchar(128)");
        indentedTextWriter.Write("SELECT ");
        indentedTextWriter.Write(value);
        indentedTextWriter.WriteLine(" = name");
        indentedTextWriter.WriteLine("FROM sys.default_constraints");
        indentedTextWriter.Write("WHERE parent_object_id = object_id(N'");
        indentedTextWriter.Write(dropColumnOperation.Table);
        indentedTextWriter.WriteLine("')");
        indentedTextWriter.Write("AND col_name(parent_object_id, 
                                                       parent_column_id) = '");
        indentedTextWriter.Write(dropColumnOperation.Name);
        indentedTextWriter.WriteLine("';");
        indentedTextWriter.Write("IF ");
        indentedTextWriter.Write(value);
        indentedTextWriter.WriteLine(" IS NOT NULL");
        indentedTextWriter.Indent++;
        indentedTextWriter.Write("EXECUTE('ALTER TABLE ");
        indentedTextWriter.Write(this.Name(dropColumnOperation.Table));
        indentedTextWriter.Write(" DROP CONSTRAINT ' + ");
        indentedTextWriter.Write(value);
        indentedTextWriter.WriteLine(")");
        indentedTextWriter.Indent--;
        indentedTextWriter.Write("ALTER TABLE ");
        indentedTextWriter.Write(this.Name(dropColumnOperation.Table));
        indentedTextWriter.Write(" DROP COLUMN ");
        indentedTextWriter.Write(this.Quote(dropColumnOperation.Name));
        this.Statement(indentedTextWriter);
    }
} 
```

您可以看到它跟踪使用的变量名称，但这**似乎只在批次内跟踪，即单个迁移**。因此，如果一个迁移包含多个`DROP COLUM`以上的工作正常，但如果有两个迁移导致`DROP COLUMN`生成一个，那么该`_variableCounter`变量将被重置。

不生成脚本时不会出现任何问题，因为每个语句都会立即针对数据库执行（我使用 SQL Profiler 检查过）。

如果您生成一个 SQL 脚本并想按原样运行它，尽管您遇到了问题。

**解决方案**

我创建了一个新的`BatchSqlServerMigrationSqlGenerator`继承`SqlServerMigrationSqlGenerator`如下（注意你需要`using System.Data.Entity.Migrations.Sql;`）：

```
public class BatchSqlServerMigrationSqlGenerator : SqlServerMigrationSqlGenerator
{
    protected override void Generate
       (System.Data.Entity.Migrations.Model.DropColumnOperation dropColumnOperation)
    {
        base.Generate(dropColumnOperation);

        Statement("GO");
    }
} 
```

现在要强制迁移使用您的自定义生成器，您有两个选择：

1.  如果您希望将其集成到包管理器控制台中，请将以下行添加到您的`Configuration`类中：

    ```
     SetSqlGenerator("System.Data.SqlClient", 
                       new BatchSqlServerMigrationSqlGenerator()); 
    ```

2.  如果您是从代码生成脚本（就像我一样），请在代码中添加配置程序集的位置添加类似的代码行：

    ```
    migrationsConfiguration.SetSqlGenerator(DataProviderInvariantName, 
                       new BatchSqlServerMigrationSqlGenerator()); 
    ```

# xcode - 核心绘图图中的两个 y 轴具有不同的轴比例

> ID：10930261
> 
> 赞同：8
> 
> 时间：2012-06-07T10:46:17.703
> 
> 标签：xcode, core-plot

我正在编写一个应用程序，其中我有两个 y 轴和一个 x 轴的图形。左 y 轴的范围从 0 到 20，所以有 20 个majorTick 轴。右 y 轴的范围从 0 到 10，所以我想要左 y 轴为每个备用的majorTickAxis 标记。

这是我的代码片段

```
//code
   CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
float xmax=10.0;
float xmin=0.0;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xmin)      length:CPTDecimalFromFloat(xmax-xmin)];
float ymax=20.0;
float ymin=0.0;
float ymax2=10.0;
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(ymin) length:CPTDecimalFromFloat(ymax-ymin)];

// Grid line styles
CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
majorGridLineStyle.lineWidth = 0.75;
majorGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.75];

CPTMutableLineStyle *minorGridLineStyle = [CPTMutableLineStyle lineStyle];
minorGridLineStyle.lineWidth = 0.25;
minorGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.1];

CPTMutableLineStyle *redLineStyle = [CPTMutableLineStyle lineStyle];
redLineStyle.lineWidth = 2.0;
redLineStyle.lineColor = [[CPTColor redColor] colorWithAlphaComponent:0.5];                         

CPTMutableLineStyle *greenLineStyle = [CPTMutableLineStyle lineStyle];
greenLineStyle.lineWidth = 2.0;
greenLineStyle.lineColor = [[CPTColor greenColor] colorWithAlphaComponent:0.5];     

// Axes
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
CPTXYAxis *x          = axisSet.xAxis;
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
x.majorIntervalLength = [[NSDecimalNumber decimalNumberWithString:@"1"] decimalValue];
x.minorTicksPerInterval       = 4;
x.labelOffset = 3.0f;
x.title         = @"Time";
x.titleOffset   = 20.0;
x.titleLocation = CPTDecimalFromFloat((xmax+xmin)/2);
x.majorGridLineStyle= majorGridLineStyle;
x.minorGridLineStyle=minorGridLineStyle;

CPTXYAxis *y = axisSet.yAxis;
y.majorIntervalLength         = CPTDecimalFromString(@"1.0");
y.majorTickLength=2.0f;
y.minorTicksPerInterval       = 4;
y.orthogonalCoordinateDecimal = CPTDecimalFromFloat(0.0);
y.labelExclusionRanges = [NSArray arrayWithObjects:
                          [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInteger(0.0) 
                                                       length:CPTDecimalFromInteger(0.0)],Nil];
y.majorGridLineStyle= majorGridLineStyle;
y.minorGridLineStyle=minorGridLineStyle;

CPTXYAxis *y2 = [[(CPTXYAxis *)[CPTXYAxis alloc] initWithFrame:CGRectZero] autorelease];
y2.plotSpace    =plotSpace;     
y2.orthogonalCoordinateDecimal = CPTDecimalFromFloat(xmax);
y2.majorGridLineStyle=majorGridLineStyle;
y2.minorGridLineStyle=minorGridLineStyle;
y2.minorTicksPerInterval       = 4;
y2.majorIntervalLength        = CPTDecimalFromString(@"1.0");
y2.labelOffset        = 10.0;
y2.coordinate          =CPTCoordinateY;

y2.axisLineStyle       = x.axisLineStyle;
y2.labelTextStyle              = x.labelTextStyle;
y2.labelOffset                 = -30.0f;
y2.visibleRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInteger(0) length:CPTDecimalFromInteger(ymax2)];

y2.title                       = @"Temperature";
y2.titleLocation               = CPTDecimalFromInteger(5.0);
y2.titleTextStyle              =x.titleTextStyle;
y2.titleOffset                 =-45.0f;
y2.labelExclusionRanges = [NSArray arrayWithObjects:
                          [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInteger(0.0) 
                                                       length:CPTDecimalFromInteger(0.0)],Nil];

self.graph.axisSet.axes = [NSArray arrayWithObjects:x, y, y2, nil];

// Create a plot that uses the data source method for red graph
CPTScatterPlot *redPlot = [[[CPTScatterPlot alloc] init] autorelease];
redPlot.identifier = @"red Plot";;

CPTMutableLineStyle *lineStyle = [[redPlot.dataLineStyle mutableCopy] autorelease];
lineStyle.miterLimit        = 1.0f;
redPlot.dataLineStyle = redLineStyle;
redPlot.dataSource = self;
redPlot.interpolation = CPTScatterPlotInterpolationStepped;

[self.graph addPlot:redPlot];

// Create a plot that uses the data source method for green graph
CPTScatterPlot *greenPlot = [[[CPTScatterPlot alloc] init] autorelease];
greenPlot.identifier = @"green Plot";;

CPTMutableLineStyle *greenlineStyle = [[greenPlot.dataLineStyle mutableCopy] autorelease];
greenlineStyle.miterLimit       = 1.0f;
greenPlot.dataLineStyle = greenLineStyle;
greenPlot.dataSource = self;
[self.graph addPlot:greenPlot];

 // Add some data
NSMutableArray *newData = [NSMutableArray arrayWithCapacity:100];
NSUInteger i;
for ( i = 0; i < 45; i++ ) {
    id x = [NSNumber numberWithDouble:i * 0.2];
    id y = [NSNumber numberWithDouble:i * rand() / ((double)RAND_MAX*5.0) ];        
    [newData addObject:[NSDictionary dictionaryWithObjectsAndKeys:
      x, @"x",y, @"y",nil]];
}
NSMutableArray *newData1 = [NSMutableArray arrayWithCapacity:100];
for ( i = 0; i < 45; i++ ) {
    id x =[NSNumber numberWithDouble:i * rand() / ((double)RAND_MAX*5.0) ]; 
    id y2 = [NSNumber numberWithDouble:i * 0.2];
    [newData1 addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                        x, @"x",y2, @"y2",nil]];
}
self.plotData = newData;
self.plotData2=newData1; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T01:39:58.900

如果您希望两个 y 轴具有不同的比例，则需要添加另一个绘图空间。对第二个绘图空间使用相同`xRange`的，但使用不同的`yRange`，例如，

```
CPTXYPlotSpace *plotSpace2 = [[[CPTXYPlotSpace alloc] init] autorelease];
plotSpace2.xRange = plotSpace.xRange;
plotSpace2.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(ymin)
                                                 length:CPTDecimalFromFloat(ymax2 - ymin)];
[graph addPlotSpace:plotSpace2];
y2.plotSpace = plotSpace2; 
```

使用`majorIntervalLength`来控制刻度线和网格线的位置：

```
y.majorIntervalLength = CPTDecimalFromFloat((ymax - ymin) / 10.0f);
y2.majorIntervalLength = CPTDecimalFromFloat((ymax2 - ymin) / 10.0f); 
```

# android - 如何保存已输入到android中纯文本字段中的文本

> ID：10930268
> 
> 赞同：-6
> 
> 时间：2012-06-07T10:46:56.173
> 
> 标签：android, text, field

我希望能够保存输入到纯文本字段中的文本。

我在那里有一个保存按钮，它已全部定义。因此，我希望能够单击该保存按钮，并且该文本字段中的字符串将保存到我的文本字段中。我也将在那里放置一个加载按钮来加载保存的文本。我对如何做到这一点有一点想法，但一点也不知道。如果有人可以帮助我，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:00:49.207

这是你应该做的。

1.  您可以创建一个数据库表，当按下保存按钮时，edittext 字段中的文本将保存在数据库表中。
2.  当按下加载按钮时，光标应搜索 id 数据库表并获取先前输入的文本，然后通过为 edittext 字段使用 set text 功能，您可以将该文本加载到 edittext 字段。

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:54:32.230

你到底想做什么？保存文本的onClick后应该从文本字段保存到文本字段是什么意思？加载按钮用于加载保存的文本，但从哪里获取保存的文本？

请清楚并粘贴您为实现此目的所做的代码。

# php - 如何在sql中连接两个表

> ID：10930271
> 
> 赞同：-6
> 
> 时间：2012-06-07T10:46:59.683
> 
> 标签：php, mysql, sql

我有两个餐桌人员和订单。我需要加入这两个表。

```
$sql=mysql_query("select id from users");
 while($row = mysql_fetch_row($sq))
  {
   $id=$row['id']

  } 
```

现在使用这个动态 id 我想加入餐桌人员并订购

表人。

```
id  LastName    FirstName   Address     
1   Hansen      Timoteivn   Sandnes
2   Svendson    Tove        Sandnes
3   Pettersen   Kari        Stavanger 
```

餐桌订单

```
 id    orders  OrderNo
    1   y   1256
    2   n   11251
    2   m   5555 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:52:22.593

转到此 URL 并阅读

[http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

我认为这对理解 SQL 中的 join 很有帮助...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T10:53:40.943

试试这个

```
SELECT * FROM `users` LEFT JOIN `orders` USING (`id`); 
```

# jquery - 无法根据属性选择器中的条件进行选择

> ID：10930273
> 
> 赞同：1
> 
> 时间：2012-06-07T10:47:14.803
> 
> 标签：jquery

如果我做`$var = $('[height > 100]');`

它抛出错误运行时错误

Microsoft JScript 运行时错误：语法错误，无法识别的表达式：[高度 > 100]

但是等于（=）有效

```
$var = $('[height = 100]'); 
```

那么如何过滤第一种情况呢？（使用属性选择器只是因为我正在学习它）

我有 `<table height="200">`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:48:29.727

```
$var = $(target).filter(function() {
  return $(this).height() >= 100;
}); 
```

这里`target`将替换为任何有效的[**jQuery 选择器**](http://api.jquery.com/category/selectors)

### 笔记

如果您`height`与`style`css 一起使用，那么您的方式是不可能的。

### 根据编辑

```
<table height="200"> 
```

然后尝试

```
$('table[height=200]'); 
```

**[演示](http://jsfiddle.net/54jba/1/)**

**或者**

```
$var = $('table').filter(function() {
  return $(this).attr('height') == 100;
}); 
```

**[演示](http://jsfiddle.net/AnnGE/4/)**

### 根据commebt

> 问：它适用于`!=`吗？
> 
> 答：是的

```
$var = $('table').filter(function() {
  return $(this).attr('height') != 100;
}); 
```

**[演示](http://jsfiddle.net/AnnGE/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:56:10.643

如果你想使用属性选择器，只需使用 codeparadoxes 方法，如下所示：

[http://jsfiddle.net/uVdcw/](http://jsfiddle.net/uVdcw/)

```
$var = $("div").filter(function() {
  return parseInt($(this).attr("height")) >= 300;
}).text("height is 300 or more");​ 
```

和 HTML：

```
<div height="200" width="100">Div 1</div>
<div height="300" width="140">Div 2</div>
<div height="200" width="130">Div 3</div>
<div height="500" width="120">Div 4</div>
<div height="200" width="120">Div 5</div>​ 
```

# jqgrid - 带有列标题的 JqGrid 列选择器

> ID：10930274
> 
> 赞同：2
> 
> 时间：2012-06-07T10:47:17.060
> 
> 标签：jqgrid, multi-select, name-conflict, column-chooser

我有两个关于列选择器的问题。第一个是我为我的网格使用标题分组，例如，我有一个显示标题组，其中包含两列类型和大小，还有另一个标题组，名称为存储，包含两个子列类型和大小。当我使用 columnChooser 时，它显示：Type Size Type Size。有没有办法在他们前面加上列标题名称？我还在 colModel 中将这些列命名为 DS_Size DS_Type ,.... 有什么方法可以使用这些列 colModel 名称而不是 colNames？我的第二个问题是我已经在我的搜索部分使用了 erichynds 多选（请参阅[链接](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)），并且它与 jqGrid 使用的那个有冲突（另请参阅[）](http://quasipartikel.at/multiselect/)。如何将 erichynds 多选插件重命名为其他名称？我没有找到任何 $.fn。在里面'

我实际上问了三个问题：P 但前两个是一个：D

感谢您阅读我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:27:47.677

您可以在jqGrid[的文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:groupingheadar#limitations)中找到关于您的主要问题的答案：

> 列选择器与标题分组不兼容

我编写了 Header Grouping 实现的许多部分，并且我知道`columnChooser`. 所以我知道如何`columnChooser`修改代码以包括对标题分组的支持。主要问题是，仅消除限制就需要做很多工作。jqGrid 是*免费*的开源产品。谁愿意花时间来消除这些限制？我花了很多时间在 stackoverflow 上帮助其他人，但我必须养活我的家人:-)。如果您真的需要这样的功能，您可以自己实现该功能。您需要修改的最重要信息将在[答案](https://stackoverflow.com/a/10439808/315935)`columnCooser`中找到。

现在关于您问题的最后一部分：谁多选小部件之间的“冲突”。简单查看 Eric Hynds jQuery UI MultiSelect Widget 的更改列表（请参见[此处](https://github.com/ehynds/jquery-ui-multiselect-widget)）表明该插件是有效的。另一方面，[另一个](http://quasipartikel.at/multiselect/)使用的（见[这里](https://github.com/michael/multiselect/)）`columnChooser`不会改变。尽管如此，它仍然有效并且可以在以后使用。你到底有哪些“冲突”？在旧版本的 Eric Hynds jQuery UI MultiSelect 小部件中，它使用了相同的小部件名称`"ui.multiselect"`，这是冲突的。许多后来的版本使用`"ech.multiselect"`名称（见[这里](https://github.com/ehynds/jquery-ui-multiselect-widget/blob/master/src/jquery.multiselect.js#L25)）。所以我不知道你到底指的是哪些冲突。可能您应该只获得代码的最新版本。

在我的回答结束时，我建议您阅读我提出的一些修改[的答案](https://stackoverflow.com/a/9688942/315935)`columnChooser`，这些修改可以提高可见性并使列选择器的对话框真正可调整大小。可以使用只是`$.jgrid.extend({columnChooser : function(opts) {...}});`将原始版本覆盖`columnChooser`到新版本。

# c++ - 使用非阻塞 udp 套接字的 poll()

> ID：10930278
> 
> 赞同：1
> 
> 时间：2012-06-07T10:47:40.557
> 
> 标签：c++, sockets, udp

我正在尝试制作一个由其他人编写的 c++ 程序。我很难理解它。我什至不 %100 确定我们可以将 poll() 与 UDP 套接字一起使用，但我正在重构的代码是使用 poll() 从 udp 套接字读取如下：

```
fd.fd = m_bsocket;
fd.events = POLLIN;

iPollResult = poll(&fd, 1, iTimeout);

if(iPollResult > 0)
{
    int iReceivedByteCount = recv(m_bsocket, p_pBuffer, p_iBufferSize, 0);
    if(iReceivedByteCount > 0)
    {
        *p_pReadSize = iReceivedByteCount;
    }
    else
    {
        eReturnValue = UDP_READ_ERROR;
    }
}

return eReturnValue; 
```

我尝试使用命令行向该程序发送 udp 数据包：

回声“123” | 数控-u 127.0.0.1 25

看起来 poll() 总是超时并返回 0，因此我无法读取任何内容。

我还写了一个发送udp数据报的小c#程序，但是收不到消息。我想知道我做错了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:45:26.677

虽然 UDP 套接字可用于连接到另一台主机，但它们大多用于“无连接”。阅读您的问题和评论，您有一个连接的套接字是没有意义的。相反，它应该是无连接的，正如 WouterH 在他的评论中所建议的那样。

```
int sockfd = socket(AF_INET, SOCK_DGRAM, 0);

struct sockaddr_in sin = { 0 };
sin.sin_family = AF_INET;
sin.sin_port = htons(25);
sin.sin_addr.s_addr = INADDR_ANY;
bind(sockfd, (struct sockaddr *) &sin, sizeof(sin));

// Make socket non-blocking if needed 
```

使用上面的代码，每当有人向您主机的任何地址上的端口 25 发送 UDP 数据包时，您的套接字都会拦截它。使用例如`poll`或`select`了解数据何时可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:47:41.323

您不需要调用`connect()`，因为 UDP 是无连接的。您需要`bind()`将套接字连接到您正在侦听的接口的 IP 或所有接口的 0.0.0.0 ( `INADDR_ANY`)。发送到目的地时，请使用`sendto()`.

为了完整性：如果您调用`connect()`UDP 套接字，您只是为`send()`函数设置了默认目标（然后您可以使用 send 而不是 sendto）。

如果你想接收数据，你总是得`bind()`把socket连接到接口，或者所有接口。请注意，您必须从收到的消息中验证源地址。因此，您可能希望通过使用`recvfrom()`和检查源地址来过滤发件人。

# java - 无法使用 java 连接 MS SQL Server 2008

> ID：10930279
> 
> 赞同：0
> 
> 时间：2012-06-07T10:47:50.067
> 
> 标签：java, sql-server, database, connection

我试图用我的 MS SQL express 连接 java，我也下载了 sqljdbc4.jar

当我不打扰 CLASSPATH 时，我尝试执行我的程序（即使使用 sqljdbc

> C:\Program 文件 (x86)\Java\jre6\lib

我收到以下错误

```
java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at Connect.getConnection(Connect.java:24)
    at Connect.displayDbProperties(Connect.java:42)
    at Connect.main(Connect.java:78) 
```

getConnection() 中的错误跟踪：com.microsoft.jdbc.sqlserver.SQLServerDriver 错误：没有活动连接

但是，如果我尝试将 CLASSPATH 变量设置为指向 sqljdbc4.jar，那么 ClassNotHoundExcepetion 会在识别我的类名时发生。

需要立即帮助。请回复。

我使用命令行模式调用它，我尝试在 Windows 7 的系统变量对话框中设置类路径。当我这样做或使用 set CLASSPATH="C:\temp\sqljdbc4.jar" 时，jre 无法识别我的程序的主类并抛出

```
Exception in thread "main" java.lang.NoClassDefFoundError: Connect
Caused by: java.lang.ClassNotFoundException: Connect
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

找不到主类：连接。程序将会退出。

所以我在这里不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:15:19.560

您应该设置类路径以包含 sqljdbc4.jar 文件。[在此处](http://msdn.microsoft.com/en-us/library/ms378526.aspx)查看详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:52:27.200

你的问题是因为类加载器没有找到驱动jar，你如何启动你的程序？你有没有`-cp`或者`-classpath`如果它是命令行？或者如果 web 应用程序添加到 lib 文件夹？

# spring - 同步访问 JPA EntityManager

> ID：10930280
> 
> 赞同：2
> 
> 时间：2012-06-07T10:48:00.633
> 
> 标签：spring, hibernate, jpa

我正在使用 Spring、Hibernate 和 JPA 实体管理器。当同时（通过 jquery/ajax）获取 UI 的不同区域时，我想同步对 JPA 实体管理器的访问，否则会导致对集合异常的共享引用。我该如何做到这一点？我有一个控制器，它在后端调用服务方法，这些方法负责在 entitymanager 上调用 get/save 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:52:22.340

您可以使用特定模式对对象应用锁定。

*   实体经理：`entityManager.lock(entity, LockModeType.OPTIMISTIC);`
*   询问 ：`query.setLockMode(LockModeType.OPTIMISTIC);`
*   NamedQuery : lockMode 元素

锁定模式`OPTIMISTIC`是`READ`& `OPTIMISTIC_FORCE_INCREMENT`to的同义词`WRITE`。

* * *

**编辑：**来自文档

> 如果事务 T1 在版本化对象上调用 LockModeType.OPTIMISTIC 类型的锁，实体管理器必须确保不会发生以下任何一种现象：
> 
> *   P1（脏读）：事务 T1 修改了一行。然后另一个事务 T2 在 T1 提交或回滚之前读取该行并获得修改后的值。事务 T2 最终提交成功；T1 是提交还是回滚以及它是在 T2 提交之前还是之后提交都无关紧要。
>     
>     
> *   P2（不可重复读取）：事务 T1 读取一行。然后另一个事务 T2 在 T1 提交之前修改或删除该行。两个事务最终都成功提交。
>     
>     
> 
> 锁定模式必须始终防止出现 P1 和 P2 现象。

# user-interface - 使用 Font.UNDERLINED 时是否可以设置下划线偏移？

> ID：10930283
> 
> 赞同：1
> 
> 时间：2012-06-07T10:48:16.487
> 
> 标签：user-interface, blackberry, blackberry-jde

**使用Font.UNDERLINED**时是否可以设置下划线偏移？我正在使用以下内容使字体加下划线：

```
LabelField lf = new LabelField("Forgot your password?");
lf.setFont(Font.getDefault().derive(Font.BOLD | Font.UNDERLINED)); 
```

上面的代码产生

![在此处输入图像描述](../Images/008036782a372f897a5825d9628b4193.png)

我希望下划线出现在字体的最底部位置。像这样：

![在此处输入图像描述](../Images/78b1087dd169e45e05a2bc7212337ab9.png)

我能想到的解决方案：

1.  一种可能的解决方案是扩展`LabelField`和覆盖其`paint()`方法。形式上的东西：

    ```
    paint(Graphics g) {
        super.paint(g);
        g.drawLine(...);
    } 
    ```

    只要`LabelField`'s 的内容占一行，上面的代码就可以正常工作。一旦内容占据多行就会变得非常混乱。因此，我正在寻找更合适的解决方案。

2.  另一种解决方案是编写一个类似于`LabelField`从头开始的新字段。

# node.js - socket.io 房间或命名空间？

> ID：10930286
> 
> 赞同：180
> 
> 时间：2012-06-07T10:48:20.977
> 
> 标签：node.js, socket.io

我正在调查 nodejs/socket.io 的实时聊天，我需要一些关于实施房间的建议。

哪个更好，使用命名空间或使用房间功能将聊天者完全隔离开来？

房间和命名空间之间真正的技术区别是什么？

是否有任何资源使用差异？

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-08-01T02:56:10.887

这是命名空间和房间**的共同点**（socket.io v0.9.8 - 请注意 v1.0 涉及完全重写，所以事情可能已经改变）：

*   命名空间（[io.of('/nsp')](https://github.com/learnboost/socket.io#restricting-yourself-to-a-namespace "io.of('/nsp')")）和房间（[socket.join('room')](https://github.com/LearnBoost/socket.io/wiki/Rooms "socket.join('房间')")）**都是在服务器端创建的**
*   多个命名空间和多个房间**共享同一个 (WebSocket) 连接**
*   服务器将**仅通过线路将消息传输到**连接到/加入 nsp / 房间的那些客户端，即它不仅仅是客户端过滤

**区别**：_

*   **命名空间由客户端**使用连接`io.connect(urlAndNsp)`（仅当客户端已经存在于服务器上时，客户端才会被添加到该命名空间）
*   **房间只能在服务器端加入**（尽管在服务器端创建 API 以使客户端加入很简单）
*   **命名空间可以受[授权保护](https://github.com/LearnBoost/socket.io/wiki/Authorizing "授权保护")**
*   **房间没有授权**，但可以将自定义授权添加到前面提到的服务器上易于创建的 API，以防一心想要使用房间
*   **房间是命名空间的一部分**（默认为“全局”命名空间）
*   **命名空间始终植根于全局范围**

为了不将概念与名称（房间或命名空间）混淆，我将使用*隔间*来指代概念，而其他两个名称则用于概念的*实现*。所以如果你

*   需要*每个隔间的授权*，命名空间可能是最简单的途径
*   如果您想要*分层的隔间*（最多 2 层），请使用命名空间/房间组合
*   如果您的客户端应用程序包含不同的部分（它们本身并不关心隔间，但）需要彼此分离，请使用命名空间。

后者的一个例子是一个大型客户端应用程序，其中不同的模块，可能是单独开发的（例如第三方），每个单独使用 socket.io，正在同一个应用程序中使用，并希望共享一个网络连接。

实际上并没有对此进行基准测试，在我看来，如果您只需要在项目中使用简单的隔间来分隔和分组消息，那么任何一个都可以。

不确定这是否回答了你的问题，但导致这个答案的研究至少让我看得更清楚。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-06-24T13:40:21.890

这是一个古老的问题，但在对该主题进行一些研究后，我发现接受的答案在一个重要点上并不清楚。根据 Guillermo Rauch 本人的说法（[见链接](https://groups.google.com/forum/#!topic/socket_io/dqpWtO8ZoAU)）：虽然理论上可以在正在运行的应用程序上动态创建命名空间，但您主要将它们用作应用程序的预定义单独部分。另一方面，如果您需要即时创建临时隔间以容纳用户/连接组，则最好使用房间。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-07T22:15:17.720

这取决于你想做什么。

主要区别在于**房间**更难实施。您必须制定一种方法，以便在每次重新加载页面时加入房间。

使用**命名空间**，您只需要 `var example = io.connect('http://localhost/example');`在*javascript 客户*端中编写，客户端就会自动添加到命名空间中。

使用示例：

*   房间：私人聊天。
*   namespaces：页面的聊天。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-10T20:11:56.207

房间和命名空间分割通信并将单个套接字分组。

对房间或命名空间的广播不会只到达每个成员。

命名空间和房间之间的区别如下：

*   命名空间：在前端进行管理，这意味着用户或攻击者通过前端加入，并在此处管理加入和断开连接。
*   房间：在后端管理，这意味着服务器分配加入和离开房间。

区别主要在于谁来管理它们

要决定使用什么，您必须决定是在前端还是在后端管理分段

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-03T12:34:09.980

命名空间允许您创建具有相同名称的对象，但它们将是分开的，因为它们将存在于不同的命名空间中，也称为范围。

这与 Socket.IO 命名空间应该具有的思维过程相同。如果您正在构建一个模块化 Node Web 应用程序，您将需要命名不同的模块。如果您回顾我们的命名空间代码，您会发现我们能够在不同的命名空间中侦听相同的确切事件。在 Socket.IO 中，默认连接上的连接事件和 /xxx 命名空间上的连接事件是不同的。例如，如果您的站点上有一个聊天和评论系统，并且希望两者都是实时的，那么您可以为每个系统命名。这允许您构建一个仅存在于其自身上下文中的整个 Socket.IO 应用程序。

如果您正在构建要打包和安装的东西，这也是正确的。您无法知道是否有人已经在使用默认命名空间中的某些事件，因此您应该创建自己的并在那里收听。这使您不会踩到任何使用您的包的开发人员的脚趾。

命名空间允许我们将连接划分为不同的上下文。我们可以将此与房间进行比较，它允许我们将连接分组在一起。然后我们也可以将相同的连接加入其他房间。

**命名空间允许您为 Socket.IO 创建不同的上下文来工作。房间允许您在这些上下文中对客户端连接进行分组。**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-11T10:14:09.127

命名空间内可以有房间，这有助于组织代码，但房间内不能有命名空间。所以命名空间是一个顶级分割，房间是一个较低级别的分割。

# ruby - 如何使用 rack-rewrite 重写到不同的域？

> ID：10930288
> 
> 赞同：2
> 
> 时间：2012-06-07T10:48:34.887
> 
> 标签：ruby, rewrite, rack-rewrite

我想重写另一个域，以便[http://domain1.com/abc](http://domain1.com/abc)指向[http://domain2.com/xyz](http://domain2.com/xyz)。这是我的代码：

```
require 'rack/rewrite'
config.middleware.insert_before(Rack::Lock, Rack::Rewrite) do
  rewrite '/abc', 'http://domain2.com/xyz'
end 
```

但是在我打开[http://domain1.com/abc](http://domain1.com/abc)之后，我被指向 [http://domain1.com/http:/domain2.com/xyz](http://domain1.com/http:/domain2.com/xyz)。我怎样才能重写它以使其指向正确的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:38:17.417

您需要为此使用重定向，而不是重写。重写只是更改您的应用程序看到的 URL，而重定向执行实际的 HTTP 301。

```
require 'rack/rewrite'
config.middleware.insert_before(Rack::Lock, Rack::Rewrite) do
  r301 '/abc', 'http://domain2.com/xyz'
end 
```

# facebook - 访问 Facebook 消息

> ID：10930289
> 
> 赞同：0
> 
> 时间：2012-06-07T10:48:36.457
> 
> 标签：facebook, facebook-graph-api, facebook-android-sdk

基本上我想通过访问他的 Facebook 消息（收件箱、发件箱等）来计算用户与他的朋友交换的消息。通过 Facebook 图形 API，我了解到以下链接将为我提供[Thread](https://developers.facebook.com/docs/reference/api/thread/)类型的 JSON 对象。

```
https://graph.facebook.com/me/inbox?access_token=
https://graph.facebook.com/me/outbox?access_token= 
```

但似乎检索到的数据并未提供与我所有朋友交换的消息。两个链接中的任何一个都没有显示与我交换过信息的一些朋友。有谁知道我怎样才能找回所有的消息？？？？

**编辑：**

我还发现它显示了您与之聊天的最后 25 个人的消息。此外，在每次聊天中，仅交换了最后 25 条对话/消息。如果一个人有大约 500-600 个朋友，我怎样才能得到所有朋友的消息列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:23:55.797

> 我还发现它显示了您与之聊天的最后 25 个人的消息。此外，在每次聊天中，仅交换了最后 25 条对话/消息。

您应该有带有响应的分页 URL——您必须自己关注这些 URL 以获取更多数据。

除此之外，您还可以尝试设置更高的限制（和偏移量，用于下一个数据块） - 请参阅“分页”下的[https://developers.facebook.com/docs/reference/api/ 。](https://developers.facebook.com/docs/reference/api/)

# watir - 附加浏览器窗口的 Watir 命令在 radrails ide 中不起作用

> ID：10930290
> 
> 赞同：0
> 
> 时间：2012-06-07T10:48:50.363
> 
> 标签：watir, title, radrails

我使用 radrails ide 来运行 watir 测试。我有以下命令：

```
ie.link(:text, "Task").click
ie1=Watir::IE.attach(:title, 'Task') 
```

使用上面的命令我得到错误：

```
E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:760:in `rescue in attach_browser_window': Unable to locate a window with title of Task (Watir::Exception::NoMatchingWindowFoundException)
    from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:755:in `attach_browser_window'
    from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:157:in `_attach_init'
    from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:151:in `attach'
    from file.rb:31:in `<main>' 
```

Ruby版本是1.9.3，即8，我要附加的页面的html代码-

```
<a id="sdmenu141" class="nodeSel" onclick="javascript: dmenu.s(141);" target="_self" href="javascript:configuredWindowOpen('../ROU/Mterou004p0001Form.do?resetFilter_‌​‌​action=','_blank','regular');">Task</a> 
```

单击第一行代码中的链接后，它会打开新的浏览器窗口。

今天我也遇到了一个新错误：

```
E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-cla‌​ss.rb:374:in method_missing': (in OLE method navigate': ) 
(WIN32OLERuntimeError) OLE error code:800700AA in <Unknown> <No Description> HRESULT error code:0x80020009
Exception occurred. from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-cla‌​ss.rb:374:in goto' from file.rb:7:in <main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:25:56.980

要解决此问题，请使用 Watir Web 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:43:12.973

好吧，错误消息说明了一切：`Unable to locate a window with title of Task`。

# java - 在 WebSphere 中配置签名者证书时出现异常

> ID：10930291
> 
> 赞同：2
> 
> 时间：2012-06-07T10:48:57.180
> 
> 标签：java, websphere

我必须调用一个网络服务来从远程服务器中清除文件（也从其子服务器中删除）。在那门课程中，我使用了一个包含 https 的 URL。

WebSphere 抛出一个`java.security.cert.CertPathValidatorException: Certificate chaining error`.

后来我找到并配置了签名者证书，通过使用主机名和端口号检索证书信息。我保存了这张新歌手证书，之后我没有得到那个例外。

但问题在于，有些 WebSphere 能够做到这一点，而有些则不能。在其他我收到此错误：`DerInputStream.getLength(): lengthTag=127, too big.`

所以这是我的问题，为什么无法在其他 WebSphere 中进行配置，可能是什么原因？我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:58:16.167

> DerInputStream.getLength()：lengthTag=127，太大了。

这是因为您尝试导入的证书不是 DER 格式文件。我的 PKCS7 文件出现此错误。

# ruby-on-rails - Delayed_job 和 Prawn 脚本

> ID：10930300
> 
> 赞同：0
> 
> 时间：2012-06-07T10:49:38.963
> 
> 标签：ruby-on-rails, delayed-job, prawn

如何使用**Delayed_job运行****Prawn**脚本。

 **（目前使用 Bj 但在 Rails3 中不支持）

此代码不起作用。

/lib/report_job.rb

```
class ReportJob < Struct.new(:prawn_script_name , :account_id )
      def perform
       bundle exec rails runner "#{Rails.root}/jobs/#{prawn_script_name}.rb #{@current_user.account_id} " 
  end 
```

/reports_controller.rb

```
def generate_report(prawn_script_name)
    Delayed::Job.enqueue(ReportJob.new("#{prawn_script_name}.rb","#{@current_user.account_id}"))
end 
```

delay_job 表按预期填充。

```
--- !ruby/struct:ReportJob 
prawn_script_name: statements.rb
account_id: '18' 

Error in last_error field. 
{undefined method `runner' for ReportJob:0xc28f080 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:01:46.197

我认为这里有几个误解：

*   您打算从应用程序外部调用 runner，例如，在 shell 脚本或命令行中。换句话说， bundle exec rails runner 都是命令和命令的参数，而不是 ruby​​ 方法或变量。runner 是在您的 perform 方法中评估的第一个表达式，因此您的错误。
*   rails runner 只是调出您的应用程序环境并评估给定的字符串或路径参数。
*   请注意执行任务中的 account_id，我猜是您的代码中的另一个错误。

您想要做的可能是一个简单的系统调用。

看来你的大虾脚本需要环境，所以只需调用

```
system "ruby #{Rails.root}/jobs/#{prawn_script_name}.rb #{account_id}" 
```

不会工作。

现在，您肯定可以使用项目目录中的 runner 执行脚本。

```
system "bundle exec rails runner #{Rails.root}/jobs/#{prawn_script_name}.rb  #{account_id}" 
```

但是通过您环境中的系统调用来执行此操作是非常多余的。延迟的作业已经可以访问您的 rails 环境。所以只需简单地加载它们。

```
class ReportJob < Struct.new(:prawn_script_name , :account_id )
   def perform
      load "#{Rails.root}/jobs/#{prawn_script_name}.rb"
   end
end 
```

希望这可以帮助**

# javascript - 如何防止用户从我的网页中选择和复制文本

> ID：10930301
> 
> 赞同：3
> 
> 时间：2012-06-07T10:49:43.873
> 
> 标签：javascript, html, css

我知道我们可以使用 javascript 来实现这一点，但在网络浏览器中禁用 javascript，用户可以轻松复制文本。有什么办法可以使用 CSS 吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-07T11:02:19.170

如果您不希望有人复制您的文本，请不要将其放在网络上。

网络的源代码是可见的，可以免费阅读和复制。

即使您使用了所有 CSS、JavaScript 或想象的技巧，也没有什么能阻止用户手动阅读您的文本并将其复制到不同的文档/位置。

您可能**希望**做的最好的事情就是**惹恼**人们以阻止他们复制您的文本。但就像所有其他事情一样，坚持不懈的人将能够成功。

这就是我们人类所做的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-07T12:50:28.500

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-07T13:58:36.590

没有办法阻止有足够决心的人复制您网站的文本。即使有一些假设的完美方法可以阻止复制和粘贴或下载仅查看而不保存的页面（没有），如果他们真的想要，有足够时间和动力的人可以手动输入文本它。

网络被设计为开放的。这也是一件好事。从 1991 年创作的网页中提取数据并不是特别困难。尝试在不使用 Microsoft 产品的情况下对同一时代的 Microsoft Word 文档执行相同的操作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-07T10:53:06.883

类似的问题[在这里](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)有一些很好的答案，所以我不会覆盖旧的领域

无论您做什么，用户仍然可以查看页面的源代码并从那里复制任何内容。完全防止它的唯一方法是根本不显示任何文本（例如显示图像，或动态创建不利于可访问性的图像）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-07T10:57:25.383

网络是开源的，免费阅读，即使使用 java 脚本也无法警告人们复制内容，但您可以通过 CSS 发出警告。像下面这样的把戏。

试试这个...

```
p
{
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-16T14:35:58.930

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

这是防止用户选择文本的好方法。这不是一个糟糕的答案。例如，如果您在使用 Canvas (HTML5) 并允许用户在此画布上拖放内容的网站上工作；如果用户要离开画布定义的区域，文本将开始被“选中”。这是丑陋的。因此，出于明显的人体工程学原因，这是一个不错的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T20:36:21.350

您的客户和许多其他人正在寻找的东西是不可能的，因为他们不了解网页是如何传输的，但是，这些客户可能会对让用户“难以”复制文本感到满意。在其他用例中，可以标记为不可复制的文本将是一个有用的功能，例如，您希望用户可以轻松复制某些文本，而无需复制无法复制的内容，例如元数据，例如时间戳。

至于前面的答案，他们似乎表明使用 css 执行此操作的方法是使用`user-select`css 属性，但是，这可以防止文本看起来被选中，但它仍会复制到剪贴板。但是，这是您单独使用 css 可以获得的最佳效果，并且可能会阻止某些用户复制您的内容。

Javascript 将更进一步，并且在不使用开发人员工具的情况下很难从浏览器窗口复制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-29T08:08:52.700

```
-webkit-touch-callout: none; ;
-webkit-user-select: none;
-khtml-user-select: none; 
-moz-user-select: none;
-ms-user-select: none; 
user-select: none; 
```

文本不会被选中，但是，我们可以在某些情况下复制文本。

# java - 无法为 Eclipse 安装 Windows Azure 插件

> ID：10930303
> 
> 赞同：0
> 
> 时间：2012-06-07T10:49:45.750
> 
> 标签：java, azure, eclipse-plugin

当我尝试通过帮助选择安装新软件来安装“Windows Azure Plugin for Eclipse with Java”时，会产生以下错误。我问过谷歌，但找不到任何有用的帖子。我已经为 .NET 安装了 Windows Azure Sdk，它添加了模拟器。

```
Cannot complete the install because one or more required items could not be found.
 Software being installed: Windows Azure Plugin for Eclipse with Java (by MS Open Tech)
 1.7.0.201206062138 (com.persistent.winazure.eclipseplugin.feature.feature.group 1.7.0.201206062138)
Missing requirement: WAEclipsePlugin 1.7.0.201206062138 (com.persistent.winazure.eclipseplugin 1.7.0.201206062138) requires 'bundle org.eclipse.ui 3.6.0' but it could not be found
 Cannot satisfy dependency:

From: Windows Azure Plugin for Eclipse with Java (by MS Open Tech) 1.7.0.201206062138 (com.persistent.winazure.eclipseplugin.feature.feature.group 1.7.0.201206062138)
To: com.persistent.winazure.eclipseplugin [1.7.0.201206062138] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:32:49.017

我们刚刚发布了修复此错误的更新（即对 Helios 的支持中断）以及其他一些错误。调用 Eclipse 的插件更新功能，或者只是告诉 Eclipse 从[http://dl.msopentech.com/eclipse](http://dl.msopentech.com/eclipse)安装插件。

Martin Sawicki
首席项目经理
Microsoft Open Technologies, Inc.
Microsoft Corporation 的子公司

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:59:52.547

实际上，这是该插件 2012 年 6 月发布的一个错误，它没有安装在 Helios 上。修复此问题的更新将于 7 月下旬发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:58:01.763

我相信这些是随机错误，如果有一些网络错误就会发生。您可能会发现类似的问题，并且在安装插件时再次尝试主要解决此类问题。

我只是快速尝试在 Eclipse 中将 新安装点设置为“ [http://dl.msopentech.com/eclipse ”，如下所示：](http://dl.msopentech.com/eclipse)![在此处输入图像描述](../Images/160640465778ff9145b1df62493dd297.png)

然后下载选定的组件：

![在此处输入图像描述](../Images/ddeb2330dbd4b818c3e78829a6fbd458.png) 下载和安装顺利，请再试一次，您应该没有任何问题，因为您只是遇到了随机问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:33:10.437

昨天发布了有关 Windows Azure 春季版本中的几个新功能的公告。[其中一个公告](http://blogs.technet.com/b/port25/archive/2012/06/06/a-new-milestone-for-openness-on-windows-azure.aspx)提到了更新的 Eclipse 插件，以及 sdk 的更新。根据错误消息，您可能为 Eclipse 安装了更新的位，这些位可能与尚未更新的其他内容不同步。

在今天的[Meet Windows Azure](http://www.meetwindowsazure.com)活动中，一切都将通过网络广播正式宣布。

# python - Python - 如何匹配和替换给定字符串中的单词？

> ID：10930306
> 
> 赞同：1
> 
> 时间：2012-06-07T10:50:07.060
> 
> 标签：python, python-2.7

我有一个包含大量集合的数组列表，并且我有一个输入字符串。如果在输入字符串中找到大集合，它将被给定选项替换。

我尝试了以下但它返回错误：

```
#!/bin/python
arr=['www.', 'http://', '.com', 'many many many....']
def str_replace(arr, replaceby, original):
  temp = ''
  for n,i in enumerate(arr):
    temp = original.replace(i, replaceby)
  return temp

main ='www.google.com'
main1='www.a.b.c.company.google.co.uk.com'
print str_replace(arr,'',main); 
```

输出：

```
www.google 
```

预期的：

```
google 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:52:56.790

`temp`您每次都从原始元素派生，因此只有最后一个元素`arr`会在返回的那个中被替换`temp`。试试这个：

```
def str_replace(arr, replaceby, original):
  temp = original
  for n,i in enumerate(arr):
    temp = temp.replace(i, replaceby)
  return temp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:01:42.927

你甚至不需要`temp`（假设上面的代码是整个函数）：

```
def str_replace(search, replace, subject):
    for s in search:
        subject = subject.replace(s, replace)
    return subject 
```

另一个（可能更有效）的选择是使用正则表达式：

```
import re

def str_replace(search, replace, subject):
    search = '|'.join(map(re.escape, search))
    return re.sub(search, replace, subject) 
```

请注意，如果`replace`包含来自 的子字符串，这些函数可能会产生不同的结果`search`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:53:51.380

```
temp = original.replace(i, replaceby) 
```

它应该是

```
temp = temp.replace(i, replaceby) 
```

您正在丢弃以前的替换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T11:03:34.880

简单的方法:)

```
arr=['www.', 'http://', '.com', 'many many many....']
main ='http://www.google.com'
for item in arr:
    main = main.replace(item,'')
print main 
```

# sql - 使用 Group By 的 SQL 查询问题

> ID：10930310
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:50:20.027
> 
> 标签：sql, sql-server, sql-server-2000

```
Table 1
Id(Key) Name
1       XYZ
2       ABC

Table 2
ID(Key) Bank
1       SC
2       CP

Table 3
Id(no key) month year noofduty
1          03     12   20
2          04     12   22
1          03     12   25
2          04     12   15 
```

要求的结果

```
ID Name Bank TotalDuty
1   XYZ  SC    42
2   ABC  CP    40 
```

我对多个表中的 GroupBy 感到困惑，需要帮助。使用 SQL 2000 服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:57:40.137

这是一个[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c48e4/1)

```
SELECT t1.id
  , t1.name
  , t2.bank
  , sum(t3.noofduty) as totalduty
FROM t1
INNER JOIN t3
  on t1.id = t3.id
INNER JOIN t2
  ON t2.id = t3.id
GROUP BY t1.id, t1.name, t2.bank 
```

# c# - 尽管完成了所有迭代，但带有 localFinally 的 Parallel.Foreach 仍然停滞不前

> ID：10930311
> 
> 赞同：3
> 
> 时间：2012-06-07T10:50:21.440
> 
> 标签：c#, multithreading, task-parallel-library

在我的 Parallel.ForEach 循环中，localFinally 委托确实在所有线程上被调用。我发现当我的并行循环停止时会发生这种情况。在我的并行循环中，我有大约三个条件检查阶段，它们在循环完成之前返回。似乎是当线程从这些阶段返回而不是整个主体的执行时，它才不执行 localFinally 委托。

循环结构如下：

```
 var startingThread = Thread.CurrentThread;
 Parallel.ForEach(fullList, opt,
         ()=> new MultipleValues(),
         (item, loopState, index, loop) =>
         {
            if (cond 1)
                return loop;
            if (cond 2)
                {
                process(item);
                return loop;
                }
            if (cond 3)
                return loop;

            Do Work(item);
            return loop;
          },
          partial =>
           {
              Log State of startingThread and threads
            } ); 
```

我在一个小数据集上运行循环并详细记录，发现虽然 Parallel.ForEach 完成了所有迭代，并且 localFinally 的最后一个线程的日志是 -- Calling Thread State is WaitSleepJoin for Thread 6 Loop Indx
16循环仍然没有优雅地完成并且仍然停滞不前......任何线索为什么会停滞？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:14:31.397

在看到 localFinally 的定义（在每个线程完成后执行）后进行了快速测试运行，这让我怀疑这可能意味着并行创建的线程比执行的循环少得多。例如

```
 var test = new List<List<string>> ();
        for (int i = 0; i < 1000; i++)
        {
            test.Add(null);
        }

        int finalcount = 0;
        int itemcount = 0;
        int loopcount = 0;

        Parallel.ForEach(test, () => new List<string>(),
            (item, loopState, index, loop) =>
            {
                Interlocked.Increment(ref loopcount);
                loop.Add("a");
                //Thread.Sleep(100);
                return loop;
            },
            l =>
            {
                Interlocked.Add(ref itemcount, l.Count);                    
                Interlocked.Increment(ref finalcount);                    
            }); 
```

在此循环结束时，itemcount 和 loopcount 为 1000，如预期的那样，并且（在我的机器上）finalcount 为 1 或 2，具体取决于执行速度。在有条件的情况下：直接返回时，执行速度可能要快得多，并且不需要额外的线程。只有在执行任务时才需要更多线程。但是参数（在我的例子中是 l）包含所有执行的组合列表。这可能是日志记录差异的原因吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:40:34.233

我想你只是误解了什么`localFinally`意思。不是为每个项目调用它，而是为每个使用的线程调用它`Parallel.ForEach()`。许多项目可以共享同一个线程。

它存在的原因是您可以在每个线程上独立执行一些聚合，并且仅在最后将它们连接在一起。这样，您只需在非常小的一段代码中处理同步（并让它影响您的性能）。

例如，如果您想计算一组项目的得分总和，您可以这样做：

```
int totalSum = 0;
Parallel.ForEach(
    collection, item => Interlocked.Add(ref totalSum, ComputeScore(item))); 
```

但是在这里，您调用`Interlocked.Add()`每个项目，这可能很慢。使用`localInit`and `localFinally`，您可以像这样重写代码：

```
int totalSum = 0;
Parallel.ForEach(
    collection,
    () => 0,
    (item, state, localSum) => localSum + ComputeScore(item),
    localSum => Interlocked.Add(ref totalSum, localSum)); 
```

请注意，代码`Interlocked.Add()`仅在 中使用，`localFinally`并且确实访问了 中的全局状态`body`。这样，同步成本只需支付几次，每个线程使用一次。

注意：我`Interlocked`在这个例子中使用了，因为它非常简单而且很明显是正确的。如果代码更复杂，我会`lock`先使用，并尝试`Interlocked`仅在需要良好性能时使用。

# iphone - iPhone：UIBarButtonItem 的动作选择器可以使用类方法吗？

> ID：10930312
> 
> 赞同：1
> 
> 时间：2012-06-07T10:50:22.030
> 
> 标签：iphone, objective-c, ios, uikit

我想使用类方法来选择 UIBarButtonItem 的操作。

代码是：

```
[[UIBarButtonItem alloc] 
    initWithTitle:@"title"                                            
    style:UIBarButtonItemStylePlain
    target: self
    action:@selector(method)] 
```

当我使用实例方法进行操作时，它可以工作。

但是当我使用类方法进行操作时，当我点击按钮时会发生错误。
错误信息是：`unrecognized selector sent to instance`。

我不能为此使用类方法吗？
如何为目标设置使用，而不是自我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:56:44.920

请更改为以下代码：
这里`target`应该是`self`而不是`[self class]`

```
[[UIBarButtonItem alloc] initWithTitle:@"title"
                                 style:UIBarButtonItemStylePlain
                                target:self
                                action:@selector(method)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:00:03.000

是的，你可以通过

```
[[UIBarButtonItem alloc] initWithTitle:@"title" style:UIBarButtonItemStylePlain target: self
    action:@selector(method)];

- (void)method
{
    // here call class method

   [YourClassName methodName];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:55:44.150

是的，您必须使用实例方法。只需从您的方法中调用您的类方法。

# facebook - Facebook 应用程序：Facebook 有什么方法可以存储应用程序历史记录吗？

> ID：10930313
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:50:28.777
> 
> 标签：facebook

我刚刚开始使用 facebook 应用程序开发，似乎对此感到非常兴奋。在对 facebook 应用程序开发进行研究时，我有一个想法——facebook 应用程序可以存储应用程序上线当天的所有应用程序历史记录吗？脸书能做到吗？作为开发人员，我们可以检索历史吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:00:52.000

您可以查看[Facebook 见解](https://developers.facebook.com/docs/insights/)

> 使用 Insights for your app 跟踪用户如何与您的应用交互，从而为您的用户打造最佳体验。对于应用程序管理员，洞察力包括对流故事的反馈、应用程序的推荐流量、哪些用户操作对活跃用户数有贡献的细分、授权用户和活跃用户的人口统计数据，以及提示和授予权限的次数。
> 
> 还提供有关您应用的 Open Graph 活动的详细见解。
> 
> 此外，它还为您的应用程序提供诊断，以便您可以跟踪 API 错误以及访问分配和限制信息。
> 
> 您可以直接通过 Insights Dashboard 访问应用程序的 Insights，也可以在开发者应用程序中选择您的应用程序并单击“见解”链接

# c# - C# LoadControl() (.ascx) 并添加到“this”而不是子控件

> ID：10930314
> 
> 赞同：2
> 
> 时间：2012-06-07T10:50:30.183
> 
> 标签：c#, asp.net, ascx

我很擅长使用 加载控件，`LoadControl("~/vitrualPath")`所以我有：

```
UserControl ctrl = (UserControl)LoadControl("~/controls/someControl.ascx");
this.Controls.Add(ctrl);
//plcCtrl.Controls.Add(ctrl); 
```

问题是我希望遍历用户控件中的所有控件：

```
foreach (Label c in this.Controls.OfType<Label>())
{
  // It's a label for an input
  if (c.ID.Substring(0, 8) == "lblInput")
   {
     // Do some stuff with the control here
   }
} 
```

但是，添加的控件不是 的一部分`this`，而是`ctrl`

有没有一种方法可以将加载的控件的内容添加到其中，或者`this`有一种方法可以一次循环遍历两者？`this``ctrl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:56:25.777

如果您只是想遍历顶级标签和标签 in `ctrl`，请尝试`this.Controls.Concat(ctrl.Controls).OfType<Label>()`在您的`foreach`循环中。

您还可以将您的移动`if`到 LINQ`Where`调用中：

`.Where(l => l.ID.Substring(0, 8) == "lblInput")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:30:01.403

通过使用递归函数，您无需担心子级别/容器中的控件。这样的事情应该没问题（您需要做的就是传递顶级控件以及您感兴趣的 id 子字符串）。因此，如果满足条件，它将执行您打算对控件和任何子级别执行的任何操作。

```
public void ProcessControl(Control control, string ctrlName)
{
    foreach (Label c in control.Controls.OfType<Label>())
   {
       // It's a label for an input
       if (c.ID.Substring(0, 8) == ctrlName)
       {
            // Do some stuff with the control here
       }
    }

    foreach (Control ctrl in control.Controls)
    {
        ProcessControl(ctrl, ctrlName);        
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:55:48.507

您应该编写一个递归方法，开始循环 this.Controls 中的控件并沿着控件树向下移动。然后它也会进入您的用户控件并找到您的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:56:08.890

我认为没有一种方法可以像您想要的那样循环遍历两者。

您可以轻松地创建一个接收 Control 作为参数的方法，并通过它的控件进行迭代。像这样的东西：

```
void Function(Control control)
{
    foreach (Label c in control.Controls.OfType<Label>())
    {
       // It's a label for an input
       if (c.ID.Substring(0, 8) == "lblInput")
       {
         // Do some stuff with the control here
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T10:56:49.380

您应该能够通过访问我认为访问用户控件内部的控件`this.Controls[index].Controls`，但这有点取决于您要实现的目标？他们可能是一种更清洁的方式来做你想做的事情？

# c# - C#中的数组大小确定

> ID：10930317
> 
> 赞同：0
> 
> 时间：2012-06-07T10:50:37.797
> 
> 标签：c#, .net, c#-4.0

首先，我是 C# 的新手。如何确定 C# 中的数组大小？使用 if 条件检查。

通常php这样做，

```
if((sizeof($NewArray)==3) && (strtolower($NewArray[1])=='dddd')) 
```

我就是这样试的

```
 If(NewArray.Length)==3) && ( 
```

之后我就卡住了....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:52:09.123

你在找`ToLower()`方法吗？

```
if (newArray.Length == 3 && newArray[1].ToLower() == "dddd") ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:59:15.807

我不确定你坚持的是哪一部分，所以我将解释我认为我能看到的所有部分。

看起来您正在寻找数组上的[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)语法。

您可能想要的代码是：

```
if (NewArray.Length == 3 && NewArray[1].ToLower() == "dddd") 
```

注意方括号 [] 索引到数组中。常规 C# 数组公开了一个`int`索引器。一旦被索引，点符号将使您可以访问数组内部的类型，这里我假设数组是 a `string[]`，因此我们可以这样做`NewArray[1].<string members here>`。

另请注意**，C# 中的数组索引是从零开始的**，因此 0 是数组的第一个元素，`NewArray.Length - 1`也是最后一个元素。*除非*您当然打算访问第二个数组项，否则您`[1]`可能不正确。

 *作为旁注， using`ToLower`不是获得不区分大小写比较的唯一方法，您还可以执行以下操作：

```
string.Compare(NewArray[1], "dddd", true) == 0 
```

[`string.Compare`文档](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)显示了这个论点`ignoreCase`。我绝不是想说我的建议是最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:01:04.623

```
 //in php
 if((sizeof($NewArray)==3) && (strtolower($NewArray[1])=='dddd'))

 //in C#
 if ((NewArray.Length == 3) && (NewArray[1].ToLower() == "dddd")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:52:06.307

尝试这个

```
if( NewArray.Length== 3 && NewArray[1].ToLower() =="dddd") 
```*

# ios - iOS Safari 的 HTML5 Canvas 问题

> ID：10930321
> 
> 赞同：2
> 
> 时间：2012-06-07T10:50:45.953
> 
> 标签：ios, html, canvas, safari, mask

我正在尝试用 HTML5 构建一个绘画应用程序。

我在 div 中有一个 HTML5 画布。此 div 使用 -webkit-mask 使用 SVG 文件进行屏蔽。

在 iOS Safari 和 iBooks 中固定布局：当您通过手势缩放页面时，遮罩突然停止工作，显示整个画布和 div 的内容。

1.  如果 div 的内容是图像，则没有问题。问题仅在于 Canvas 内部。
2.  当缩放越过标记时，问题似乎发生了 - 可能是 50%。即，如果您已经放大了 50% 并刷新页面，则在缩小到 50% 以下之前没有问题，反之亦然。

任何帮助将不胜感激。

# valgrind - 调试使用 valgrind 运行的应用程序

> ID：10930325
> 
> 赞同：1
> 
> 时间：2012-06-07T10:50:59.497
> 
> 标签：valgrind, gdbserver

我正在研究 valgrind 并想在 valgrind 运行时调试程序。但我不想使用内置的`vgdb`，而是想使用自定义 gdb 服务器。有没有办法在现有的 valgrind 代码中插入这个自定义 gdbserver。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:15:04.177

只能通过修补 valgrind。编译了 valgrind gdbserver 实现。

# primefaces - Primefaces rowselect 事件在 3.3 版中不起作用

> ID：10930327
> 
> 赞同：6
> 
> 时间：2012-06-07T10:51:03.980
> 
> 标签：primefaces

我有这个代码。在用户选择一行并关闭对话框后，它应该触发 rowSelect 事件。在我更新到 primfaces 3.3（我有 ver3.2）之前它工作得很好。我在控制台中没有任何异常，当我调试时我看到该方法没有调用。我不知道从哪里开始解决这个问题。有人可以帮我解决这个问题吗？

```
<p:dialog id="dlg" closable="true" header="New reciever" widgetVar="receiverListDlg" visible="false" modal="true">
        <p:dataTable var="reciever" value="#{transactionController.recieverList}">
            <p:ajax event="rowSelect" listener="#{transactionController.onRowSelect}" update=":form" onsuccess="receiverListDlg.hide()" />
            <f:facet name="header">  
            Previouse recievers for #{customer.firstName}   
        </f:facet>
            <p:column selectionMode="single" />

            <p:column headerText="#{msg.havale_customer_firstname}">
                <h:outputText value="#{reciever.firstName}" />
            </p:column>

            <p:column headerText="#{msg.havale_customer_lastName}">
                <h:outputText value="#{reciever.lastName}" />
            </p:column>

            <p:column headerText="#{msg.havale_customer_phoneNr}">
                <h:outputText value="#{reciever.phoneNr}" />
            </p:column>

        </p:dataTable>
    </p:dialog> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T01:00:05.220

现在 Primefaces 提供了一些新的 ajax 事件：

*   onSelectCheckBox
*   onUnselectCheckbox
*   onSelectRadio

因此`rowSelect`，`rowUnselect`在您的情况下不会被解雇。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T00:48:22.047

我认为您应该使用“rowSelectRadio”ajax 事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T11:52:42.290

dataTable 应该用`<h:form>`. 此外，您应该将以下属性添加到 p:dataTable （我不知道它们是否都是必需的，但我拥有它们并且工作正常）。
- `selectionMode="single"`
- `rowKey="#{receiver.id`}"（将'id'替换为Receiver的实际ID属性）
-`selection="#{transactionController.selectedReceiver"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:06:41.970

作为用户，我是stackoverflow的新手，但我经常使用它，因为我看到Prime在这里发生了一些事情！;-)
好的，我目前正在将 RichFaces 3.3.3 JSF 1.2 项目迁移到 Mojarra 2.1.7（SNAPSHOT 20120206）和 PrimeFaces 3.3，这是恕我直言对 JSF 的启示。
长话短说，我花了半周时间搜索主题中提到的这个错误，然后我尝试退回到 PF 3.2 和 tataaaa rowSelect，我的所有其他实现现在都可以工作了。
我有一个带有数据表和 selectionMode="multiple" 以及 ajax 事件的简单表单：

```
 <h:form>
        <p:dataTable id="massnahmenAuswahl"
            value="#{massnahmenController.massnahmen}"
            var="eineMassnahme"
            selection="#{massnahmenController.massnahmenSelected}"
            rowKey="#{eineMassnahme.massnahme}">
            <p:ajax event="rowSelect"
                listener="#{massnahmenController.rowSelected}" process="@this"
                update="@this" />
            <p:ajax event="rowUnselect"
                listener="#{massnahmenController.rowUnselected}" process="@this"
                update="@this" />
            <p:ajax event="toggleSelect"
                listener="#{massnahmenController.rowToggleSelected}" process="@this"
                update="@this" />
            <p:column selectionMode="multiple" style="width:18px"
                disabledSelection="#{!login.editable}" styleClass="checkbox" />
            <p:column>
                <h:outputText escape="false" value="#{eineMassnahme.zeile}" />
            </p:column>
            <p:column>
                <h:outputText escape="false" value="#{eineMassnahme.bezeichnung}" />
            </p:column>
            <p:column>
                <fiona:labelImgGA for="#{eineMassnahme.massnahme}" />
            </p:column>
            <p:column>
                <p:selectBooleanCheckbox value="#{eineMassnahme.vorjahr}"
                    disabled="true" />
            </p:column>
            <f:facet name="footer">
                <p:commandButton value="Speichern"
                    action="#{massnahmenController.speichern}"
                    disabled="#{!login.editable}" process="@this" update="@form" />
                <p:spacer/>
                <p:commandButton value="Weiter"
                    action="#{massnahmenController.saveAndNext}"
                    disabled="#{!login.editable}" process="@this" update="@form" />
            </f:facet>
        </p:dataTable>
    </h:form> 
```

这会在不久的将来得到解决吗？直到现在我真的和PF一起去！不要让我失望！;-)

更新：
解决方案是从 PF 3.3 开始使用lazy=true。我在 PrimeFaces 问题跟踪器的 issue [2993中看到了它！](http://code.google.com/p/primefaces/issues/detail?id=2993)

# php - PHP 和表单数据验证

> ID：10930329
> 
> 赞同：0
> 
> 时间：2012-06-07T10:51:07.210
> 
> 标签：php, forms, codeigniter

我是 PHP-Codeignitor 的初学者。所以我不知道这个问题对你们来说太浪费了。

但是有什么简单的方法来验证表单数据吗？

例如，我有一个表格，它包含一个文本字段“用户名”，还有一个插入按钮，当用户单击插入时，它将添加另一个文本字段。

那么我怎样才能得到 php 中的值呢？因为用户可以在那里添加任意数量的字段。

$用户名 = $_POST("用户名"); //在这种情况下它将检索什么？大批 ？

也怎么能处理这样的情况。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:02:49.320

如果你在表单中设置了一个数组，你会在 $_POST 中得到一个数组。

表单域：

```
<input type='text' name='username[]' />
<input type='text' name='username[]' /> 
```

php:

```
$users_array = $_POST['username']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:46:47.320

如果您的用户要添加许多字段，您应该让他们使用[HTML 数组输入](http://www.johnrockefeller.net/html-input-forms-sending-in-an-array-in-php/)来完成。就像是：

```
<input name="my_array[]" /> 
```

这是HTML 数组输入的[form_validation用法：](http://codeigniter.com/user_guide/libraries/form_validation.html)

1.  获取输入数组以确定有多少字段
2.  为每个字段设置规则

够简单吗？:) 这是我的演示代码：

控制器：`application/controllers/test.php`

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/**
* Test Controller
*
* It's really just a test controller
*
*/
class Test extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $data = array();
        if ($this->input->post('test_submit'))
        {
            $this->load->library('form_validation');
            $input_array = $this->input->post('test');

            for ($i = 0; $i < count($input_array); $i++)
            {
                $this->form_validation->set_rules("test[$i]", 'Test Field '.($i + 1), 'trim|is_numeric|xss_clean');
            }

            if ($this->form_validation->run() === TRUE)
            {
                $data['message'] = 'All input are number! Great!';
            }
        }
        $this->load->helper('form');
        $this->load->view('test', $data);
    }

}

/* End of file test.php */
/* Location: ./application/controllers/test.php */ 
```

看法：`application/views/test.php`

```
<p><?php echo isset($message) ? $message : ''; ?></p>
<?php echo validation_errors(); ?>
<?php echo form_open(); ?>
    <?php echo form_label('Test fields (numeric)', 'test[]'); ?>
    <?php for ($i = 0; $i < 3; $i++): ?>
        <?php echo form_input('test[]', set_value("test[$i]")); ?>
    <?php endfor; ?>
    <?php echo form_submit('test_submit', 'Submit'); ?>
<?php echo form_close(); ?> 
```

网址：`<your_base_url_here>/index.php/test` 检查一下：D

***注意***：`numeric`和`is_numeric`规则都需要输入，这意味着空字符串不是数字。

# android - 如何签署已编译的 Apk

> ID：10930331
> 
> 赞同：142
> 
> 时间：2012-06-07T10:51:12.430
> 
> 标签：android, android-install-apk, apk

我已经用 apktool 解码了一个 APK（因为原始源代码丢失了），所以我可以解决布局 xml 文件的一些问题。然后我用 apktool 重建了它，当我尝试在我的设备上安装它时（使用 adb：adb install appname.apk）它给了我这个错误：

```
[INSTALL_PARSE_FAILED_NO_CERTIFICATES] 
```

然而，原始的 apk 是由密钥库（在 Eclipse IDE 上）签名的，这个不是，我怎样才能用它在 Eclipse 之外的原始 keystone 文件正确签名！？

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2014-07-18T21:14:11.313

使用创建密钥

```
keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

然后使用以下命令对 apk 进行签名：

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore my_application.apk alias_name 
```

[在这里查看更多信息](http://developer.android.com/tools/publishing/app-signing.html#setup)

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2016-10-15T21:00:00.993

# 自动化流程：

使用此工具（使用来自 Google 的新 apksigner）：

[https://github.com/patrickfav/uber-apk-signer](https://github.com/patrickfav/uber-apk-signer)

^(免责声明：我是开发者:))

# 手动流程：

## 第 1 步：生成密钥库（仅一次）

您需要生成一次密钥库并使用它来签署您的`unsigned`apk。使用[JDK 提供](https://stackoverflow.com/questions/4830253/where-is-the-keytool-application)的[`keytool`](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html) `%JAVA_HOME%/bin/`

```
keytool -genkey -v -keystore my.keystore -keyalg RSA -keysize 2048 -validity 10000 -alias app 
```

## 第 2 步或第 4 步：压缩对齐

[`zipalign`](https://developer.android.com/studio/command-line/zipalign.html) `%ANDROID_HOME%/sdk/build-tools/24.0.2/`如果您想将 apk 上传到 Play 商店[，这是一个由 Android SDK 提供的工具](https://stackoverflow.com/questions/24442213/cannot-find-zip-align-when-publishing-app)，例如，这是一个强制性的优化步骤。

```
zipalign -p 4 my.apk my-aligned.apk 
```

**注意：**使用旧的时，`jarsigner`您需要在签名后进行*zipalign*。使用新`apksigner`方法时，请在签名*之前*进行（我知道，这很令人困惑）。[在 apksigner 之前调用 zipalign 可以正常工作](https://developer.android.com/studio/releases/build-tools.html)，因为 apksigner 保留 APK 对齐和压缩（与 jarsigner 不同）。

您可以*验证*对齐方式

```
zipalign -c 4 my-aligned.apk 
```

## 第 3 步：签名和验证

### 使用 build-tools 24.0.2 及更早版本

使用[`jarsigner`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/jarsigner.html)它，就像 keytool 一样，[随 JDK 发行版一起提供](https://stackoverflow.com/questions/12135699/where-is-jarsigner)， `%JAVA_HOME%/bin/`并像这样使用它：

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my.keystore my-app.apk my_alias_name 
```

并且可以验证

```
jarsigner -verify -verbose my_application.apk 
```

### 使用构建工具 24.0.3 和更新版本

Android 7.0 引入了 APK 签名方案 v2，这是一种新的应用程序签名方案，可提供更快的应用程序安装时间和更多保护，防止未经授权的 APK 文件更改（有关详细信息，请参阅[此处](https://developer.android.com/about/versions/nougat/android-7.0.html#apk_signature_v2)和[此处）。](https://source.android.com/security/apksigning/v2.html)因此，Google 实现了[自己的 apk 签名器，称为`apksigner`](https://developer.android.com/studio/command-line/apksigner.html)(duh!) 脚本文件可以在`%ANDROID_HOME%/sdk/build-tools/24.0.3/`（.jar 位于`/lib`子文件夹中）中找到。像这样使用它

```
apksigner sign --ks-key-alias alias_name --ks my.keystore my-app.apk 
```

并且可以验证

```
apksigner verify my-app.apk 
```

[官方文档可以在这里找到。](https://developer.android.com/studio/publish/app-signing.html#signing-manually)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-09-19T01:31:40.840

最快的方法是使用调试密钥库签名：

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore ~/.android/debug.keystore app.apk androiddebugkey -storepass android 
```

或在 Windows 上：

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore %USERPROFILE%/.android/debug.keystore test.apk androiddebugkey -storepass android 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-08T02:33:44.157

您使用 jarsigner 对 APK 进行签名。您不必使用原始密钥库进行签名，只需生成一个新密钥库即可。阅读详细信息：http: [//developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-04T09:53:42.070

**更新的答案**

检查[https://shatter-box.com/knowledgebase/android-apk-signing-tool-apk-signer/](https://shatter-box.com/knowledgebase/android-apk-signing-tool-apk-signer/)

**旧答案**

检查[apk-signer](https://bitbucket.org/haibison/apk-signer/)一个很好的方式来签署你的应用程序

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-14T20:01:54.883

对于那些不想为每个项目创建一个 bat 文件来编辑，或者不想记住与 keytools 和 jarsigner 程序相关的所有命令而只想在一个进程中完成它的人来说，使用这个程序：

[http://lukealderton.com/projects/programs/android-apk-signer-aligner.aspx](http://lukealderton.com/projects/programs/android-apk-signer-aligner.aspx)

我构建它是因为我厌倦了每次都必须键入所有文件位置的冗长过程。

该程序可以保存您的配置，因此下次启动它时，您只需点击“生成”，它就会为您处理。就是这样。

无需安装，它是完全可移植的，并将其配置保存在同一文件夹中的 CSV 文件中。

# google-ads-api - Google AdWords 转化跟踪（页面刷新效果）

> ID：10930335
> 
> 赞同：2
> 
> 时间：2012-06-07T10:51:42.273
> 
> 标签：google-ads-api

我将 Google AdWords 生成的 Google AdWords 转化跟踪代码复制并粘贴到我的订单确认页面上：

```
<!-- Google Code for Sale Conversion Page -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 0123456789;
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "ffffff";
var google_conversion_label = "V772CLqB........";
var google_conversion_value = {{total}};
if ({{total}}) {
  google_conversion_value = {{total}};
}
/* ]]> */
</script>
<script type="text/javascript" src="{{protocol}}://www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="{{protocol}}://www.googleadservices.com/pagead/conversion/0123456789/?value={{total}}&amp;label=V772CLqB........&amp;guid=ON&amp;script=0"/>
</div>
</noscript> 
```

对于转化计数（每次点击 1 次），当用户刷新页面时会发生什么？计数是否再次增加 1？

我了解用户刷新页面时的转化计数（每次点击多次）。计数再次增加 1。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:48:32.253

无论用户刷新页面多少次，每次点击 1 次转化只会计算每个用户 1 次转化。

您可以在此处阅读官方文档：http: [//support.google.com/adwords/bin/answer.py ?hl=en&answer=6365](http://support.google.com/adwords/bin/answer.py?hl=en&answer=6365)

“这种类型对于衡量每个客户计算一次的转化非常有用，例如潜在客户或注册。”

# javascript - 包括 Jasmine 规范中的主干.js

> ID：10930337
> 
> 赞同：2
> 
> 时间：2012-06-07T10:51:50.347
> 
> 标签：javascript, unit-testing, backbone.js, jasmine

我对backbone.js（以及一般的JavaScript）很陌生，我正在尝试用Jasmine对模型进行单元测试（我正在使用`jasmine-node`它）。我的目录结构如下：

```
project/
      src/models/mymodel.js
      spec/mymodel.spec.js
      lib/backbone-min.js 
```

现在，我的问题是如何在不将它们包含在 html 页面中的情况下使模型和规范可以使用主干.js？我想保持 js 代码与 html 分离，并且能够使用 jasmine-node 运行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:58:48.607

是的，通过使用 node.js 主干（和下划线）模块，您可以在必要时在模型中要求它们，就像这样。

**/models/car.js**

```
var args = typeof exports !== 'undefined' ? [exports, require('Backbone')] : [window, window.Backbone];

(function (exports, backbone){

    exports.Car = backbone.Model.extend({
        onHornPress: function () {
            return 'HONK';
        }
    });

}).apply(undefined, args); 
```

**/specs/car.spec.js**

```
var Backbone = require('Backbone'),
    Car = require('../models/car.js').Car;

describe("when the horn is pressed", function(){
    var car;

    beforeEach(function(){
        car = new Car();
    });

    it("should honk.", function(){
        var result = car.onHornPress();
        expect(result).toEqual('HONK');
    });

}); 
```

**/myapp.html**

```
<html>
<head>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script type="text/javascript" src="models/car.js"></script>
</head>
<body>
<script type="text/javascript">

    var car = new Car();

    console.log(car.onHornPress());

</script>
</body>
</html> 
```

# sql - 选择每组的第一行

> ID：10930347
> 
> 赞同：7
> 
> 时间：2012-06-07T10:52:35.953
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含三列的表：`A,B,C`.

这些值为：

```
+---+-----+----+
| A |  B  | C  |
+---+-----+----+
| 1 | -10 |  5 |
| 1 |   0 |  5 |
| 1 |  10 |  5 |
| 2 |  10 | 12 |
| 2 |   0 | 12 |
| 3 | -10 | 14 |
| 4 |   0 |  8 |
| 4 |  10 |  8 |
| 5 |   0 |  6 |
| 5 |   1 |  6 |
| 5 |  -5 |  6 |
+---+-----+----+ 
```

如果我首先按 column `A`，然后 column `B`，然后 column对数据进行排序`C`（尽管我确实使`C`每列值的所有列值都相同`A`）我将如何选择每列的“第一行” `A`？

因此，这应该导致：

```
+---+-----+----+
| A |  B  | C  |
+---+-----+----+
| 1 | -10 |  5 |
| 2 |   0 | 12 |
| 3 | -10 | 14 |
| 4 |   0 |  8 |
| 5 |  -5 |  6 |
+---+-----+----+ 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T10:55:49.970

```
SELECT  a, b, c
FROM    (
        SELECT  *, ROW_NUMBER() OVER (PARTITION BY a ORDER BY b, c) rn
        FROM    mytable
        ) q
WHERE   rn = 1
ORDER BY
        a 
```

或者

```
SELECT  mi.*
FROM    (
        SELECT  DISTINCT  a
        FROM    mytable
        ) md
CROSS APPLY
        (
        SELECT  TOP 1 *
        FROM    mytable mi
        WHERE   mi.a = md.a
        ORDER BY
                b, c
        ) mi
ORDER BY
        a 
```

为查询创建一个复合索引`(a, b, c)`以更快地工作。

哪个更有效取决于您的数据分布。

如果`a`每个 的不同值很少但有很多记录`a`，则第二个查询会更好。

您可以通过创建索引视图来进一步改进它：

```
CREATE VIEW v_mytable_da
WITH   SCHEMABINDING
AS
       SELECT  a, COUNT_BIG(*) cnt
       FROM    dbo.mytable
       GROUP BY
               a

GO

CREATE UNIQUE CLUSTERED INDEX
       pk_vmytableda_a
ON     v_mytable_da (a)

GO

SELECT  mi.*
FROM    v_mytable_da md
CROSS APPLY
        (
        SELECT  TOP 1 *
        FROM    mytable mi
        WHERE   mi.a = md.a
        ORDER BY
                b, c
        ) mi
ORDER BY
        a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T06:28:33.033

```
SELECT *
FROM
  (SELECT *,
          ROW_NUMBER() OVER (PARTITION BY Dealld
                             ORDER BY Price, Dealld) rn
   FROM DealOffers) q
WHERE rn = 1
ORDER BY Name 
```

# html - iOS UIWebView - 限制 HTML 路径

> ID：10930349
> 
> 赞同：1
> 
> 时间：2012-06-07T10:52:51.583
> 
> 标签：html, ios, xcode, uiwebview

我有一个 UIWebview，它正在加载特定的网站部分（新闻）。我想阻止用户访问网站的其他部分，这意味着他们应该只留在新闻部分/阅读 pdf 文章。

我已经构建了一组代码，但遗憾的是，由于一些技术限制，目前还无法对其进行测试。只能在下周访问它。但是，我认为现在是在这里提问并让高级用户查看我的草稿代码并查看其是否可行的好时机。

```
- (void)viewDidLoad
{   
    [super viewDidLoad];

    NSString *urlAddress = @"http://www.imc.jhmi.edu/news.html";
    NSURL *url =[NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];

    //finding current url and lead it back if it strayed off
    NSString *currentURL = webView.request.URL.absoluteString;
    NSRange range1 = [currentURL rangeOfString:@"news"];
    NSRange range2 = [currentURL rangeOfString:@"pdf"]; 
```

我应该使用

```
 if (range1.location ==NSNotFound){
    currentURL = @"http://www.imc.jhmi.edu/news.html";
    [webView reload];
    }else if (range2.location ==NSNotFound){
    currentURL = @"http://www.imc.jhmi.edu/news.html";
    [webView reload];
    }

} 
```

还是这组代码？

```
 if (range1.location ==NSNotFound){
    currentURL = @"http://www.imc.jhmi.edu/news.html";
    url = [NSURL URLWithString:currentURL
    [webView loadRequest:[NSURLRequest requestWithURL:url]];
    }else if (range2.location ==NSNotFound){
    currentURL = @"http://www.imc.jhmi.edu/news.html";
    url = [NSURL URLWithString:currentURL
    [webView loadRequest:[NSURLRequest requestWithURL:url]];
    } 
```

代码有问题吗？如果是，请指出为什么它不起作用，因为我仍处于学习阶段。在这个阶段将是一个了解更多信息的好机会。我正在寻找的逻辑是它将加载初始新闻部分。UIWebView 应该只显示那里的新闻部分/PDF 文章。如果用户尝试转到其他路径，它应该检测当前 url 并将它们重定向回新闻部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:03:15.417

要限制某些 url 的负载，请执行以下操作

```
webView.delegate = self; 
```

并添加以下功能

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
     NSString *urlString = [[request URL]absoluteString];
     if(ulrString == @"restricted ur")
          return NO;   //Restrict
     else
          return YES;  //Allow
} 
```

# xpages - 尝试发送文档时出现意外运行时错误

> ID：10930351
> 
> 赞同：1
> 
> 时间：2012-06-07T10:52:55.820
> 
> 标签：xpages, xpages-ssjs

我有新的 Lotus Domino Server 8.5.3 FP1 UP1（Windows 2008 64 位）。

我创建了一个从发送邮件的帮助中复制的 xpages 示例。

```
var doc:NotesDocument = database.createDocument();
doc.replaceItemValue("form", "Memo");
doc.replaceItemValue("sendTo", "daniel.recio@slug.es");
doc.replaceItemValue("subject", "hi there!");
doc.replaceItemValue("body", "content here");
doc.send(); 
```

但我有意外的运行时错误

执行 JavaScript 动作表达式时出错脚本解释器错误，line=6，col=5：[TypeError] 调用方法**NotesDocument.send()**时发生异常null

▼ Stack Trace javax.faces.FacesException: Error while execution JavaScript action expression com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:102) com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210 ) com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:96) com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250)

我已经完全卸载了这台服务器，并重新安装了同样的错误。

在其他测试服务器中工作，但在此服务器中，我的莲花设计器是 8.5.2 + Ext Lib，现在是 8.5.3 FP1 UP1。

你能帮助我吗？？

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:15:30.397

该错误可能是因为服务器无法实际发送消息。服务器端，当服务器无法路由消息时，会导致异常。确保您的服务器可以成功地自行路由邮件消息，那么您的错误可能会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:33:05.853

检查 ACL 并确保您（或匿名，如果您以匿名身份进行测试）有权创建文档。我的猜测是，这就是导致 NotesDocument 为空的原因。

此外，请查看位于 Domino 数据目录中的 /domino/workspace/logs/error-log-0.xml 文件以获取有关错误的更多说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:00:29.630

我会删除第一行的类型，然后再试一次。在演员阵容引起问题之前，我已经看到了问题。因此，您的代码应如下所示：

```
 var doc = database.createDocument();
 doc.replaceItemValue("form", "Memo");
 doc.replaceItemValue("sendTo", "daniel.recio@slug.es");
 doc.replaceItemValue("subject", "hi there!");
 doc.replaceItemValue("body", "content here");
 doc.send(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:41:57.883

我在我的应用程序中运行了完全相同的代码，除了我使用 appendItemValue 而不是 replaceItemValue 并且它工作正常。我也在 8.5.3 FP1 UP1 上。不确定内部会有什么不同，但这是可以尝试的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T03:40:49.230

代码是否在您的本地机器上运行（如果您在浏览器中打开本地副本）？

服务器文档可能已损坏：尝试重新创建它。这为我的一位客户解决了同样的问题。另一个想法是在数据库中重新创建默认视图。

**编辑：**
你能检查一下 Stacktrace 吗？最后一个块可能包含更多信息。应该有一些像这样的行：

```
 lotus.domino.local.Document.Nsend(Native Method)
    lotus.domino.local.Document.send(Unknown Source) 
```

*请在这些行上方*发布 NotesException 。

# c++ - 注入 C++ DLL

> ID：10930353
> 
> 赞同：23
> 
> 时间：2012-06-07T10:52:55.967
> 
> 标签：c++, dll

我知道有各种各样的问题和书籍，但我似乎无法将我的 C++ DLL 注入任何进程。

注入DLL的代码：

```
#include <iostream>
#include "windows.h"

bool Inject(DWORD pId, char *dllName);

using namespace std;

int main()
{
    Inject(600, "C:\\d.dll");
    return 0;
}

bool Inject(DWORD pId, char *dllName)
{
    HANDLE h = OpenProcess(PROCESS_ALL_ACCESS, false, pId);
    if(h)
    {
        LPVOID LoadLibAddr = (LPVOID)GetProcAddress(GetModuleHandleA("kernel32.dll"), "LoadLibraryA");
        LPVOID dereercomp = VirtualAllocEx(h, NULL, strlen(dllName), MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE);
        WriteProcessMemory(h, dereercomp, dllName, strlen(dllName), NULL);
        HANDLE asdc = CreateRemoteThread(h, NULL, NULL, (LPTHREAD_START_ROUTINE)LoadLibAddr, dereercomp, 0, NULL);
        WaitForSingleObject(asdc, INFINITE);
        VirtualFreeEx(h, dereercomp, strlen(dllName), MEM_RELEASE);
        CloseHandle(asdc);
        CloseHandle(h);
        return true;
    }
    return false;
} 
```

和我试图注入的 DLL：

```
#include <windows.h>
#include <stdio.h>

BOOL APIENTRY DllMain (HINSTANCE hInst     /* Library instance handle. */ ,
                       DWORD reason        /* Reason this function is being called. */ ,
                       LPVOID reserved     /* Not used. */ )
{
switch (reason)
    {
      case DLL_PROCESS_ATTACH:
           MessageBox (0, "From DLL\n", "Process Attach", MB_ICONINFORMATION);
        break;

      case DLL_PROCESS_DETACH:
           MessageBox (0, "From DLL\n", "Process Detach", MB_ICONINFORMATION);
        break;

      case DLL_THREAD_ATTACH:
           MessageBox (0, "From DLL\n", "Thread Attach", MB_ICONINFORMATION);
        break;

      case DLL_THREAD_DETACH:
           MessageBox (0, "From DLL\n", "Thread Detach", MB_ICONINFORMATION);
        break;
    }

    return TRUE;
} 
```

我不知道足够多的 C++ 来知道这是哪里出错了。我已经在我试图注入的进程上运行了 Process Explorer（进程也以管理员身份运行），但它没有被注入。当我运行它时，什么也没有发生，有什么想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-11T14:07:35.473

不要`MessageBox`从`DllMain`. 为什么？看：

*   [DLL_PROCESS_ATTACH 无法在 Windows 7 C++ 上执行](https://stackoverflow.com/questions/8556782/dll-process-attach-failing-to-execute-on-windows-7-c)
*   [在你的 DllMain 中不要做任何可怕的事情的一些理由](https://blogs.msdn.com/b/oldnewthing/archive/2004/01/27/63401.aspx)
*   [不要在静态初始化程序/DllMain 中使用标准库/CRT 函数！](http://blog.barthe.ph/2009/07/30/no-stdlib-in-dllmai/)

您的消息框在出现之前可能只是死锁。为确保您到达感兴趣的代码行，请`OutputDebugString`改用。正如您所指出的您熟悉 Process Explorer，您可能会注意到那里创建的线程（您可以通过在您的`CreateRemoteThread`.

这是您需要放置的地方`OutputDebugString`：

```
BOOL APIENTRY DllMain(HMODULE hModule, DWORD nReason, VOID* pvReserved)
{
    pvReserved;
    TCHAR pszMessage[1024] = { 0 };
    _stprintf_s(pszMessage, _T("GetCurrentProcessId() %d, hModule 0x%p, nReason %d\r\n"), GetCurrentProcessId(), hModule, nReason);
    OutputDebugString(pszMessage);
    /*switch(nReason)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }*/
    return TRUE;
} 
```

要确保的另一件事是您正在加载正确位数的 DLL。`Win32`DLL 到`Win32`进程，或`x64`DLL 到`x64`进程。

更新。我是从评论中提出的：这是执行此操作的 Visual Studio 2010 项目的源代码：[SVN](http://www.alax.info/svn/public/trunk/Utilities/InjectLibrary/)或[Trac](http://www.alax.info/trac/public/browser/trunk/Utilities/InjectLibrary)。

*   您将进程标识符放入源代码
*   可执行文件创建远程线程并加载库
*   该库从 DllMain 开始并生成调试输出
*   [`DebugView`](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)显示输出
*   [`ProcessExplorer`](http://technet.microsoft.com/en-us/sysinternals/bb896653)向您显示创建的线程，并且您还打印了它的标识符

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T14:15:09.843

您可能遇到的问题是您的应用程序中 LoadLibraryA() 的地址可能与目标进程中的地址不同，因为[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)是一种专门用于阻止您尝试的活动的技术。现代版本的 Windows (Vista+) 默认为系统 DLL 启用此功能

为了做你想做的事，你需要在你的应用程序中实现一个适当的 ThreadProc 来加载你的 DLL，在你的目标进程中分配一些可执行内存（PAGE_EXECUTE）内存，将它复制到那里，并使用这个地址作为你的线程开始观点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T12:46:45.440

管理员帐户不需要隐式拥有 SE_DEBUG 权限。如果您在 Vista/Win7 下运行，请确保已禁用 UAC。在尝试打开进程内存之前，请使用此代码启用它：

```
BOOL EnableDebugPrivilege()
{
    HANDLE hToken;
    LUID luid;
    TOKEN_PRIVILEGES tkp;

    if(!OpenProcessToken( GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken ))
    {
        return FALSE;
    }

    if(!LookupPrivilegeValue( NULL, SE_DEBUG_NAME, &luid ))
    {
        return FALSE;
    }

    tkp.PrivilegeCount = 1;
    tkp.Privileges[0].Luid = luid;
    tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

    if(!AdjustTokenPrivileges( hToken, false, &tkp, sizeof( tkp ), NULL, NULL ))
    {
        return FALSE;
    }

    if(!CloseHandle( hToken ))
    {
        return FALSE;
    }

    return TRUE;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T05:17:01.233

我将从别人的工作示例开始，然后从那里开始。CodeProject 上的示例项目、教程和解释非常可靠。

这是关于[Hooking 和 DLL](http://www.codeproject.com/Articles/1037/Hooks-and-DLLs)的。

还有[一个](http://www.codeproject.com/Articles/67091/Mouse-and-KeyBoard-Hooking-utility-with-VC)。和[谷歌搜索](https://www.google.com/search?q=dll%20injection%20tutorial%20code%20project)你。

对于某些类型的挂钩，您必须克服权限限制，或者您必须接受不能挂钩每个进程的事实。

将 UI-Access 设置为 true，并将可执行文件放在 C:/Program Files/ 中，并对 dll 进行数字签名，有助于访问 Windows 中的一些安全窗口。这是[一篇](http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/4d2e1358-af95-4f4f-b239-68ec7e2525a9/)讨论其中一些事情的文章。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T01:54:57.153

SetWindowsHookEx 还可以将您的 DLL 注入另一个进程。

# php - 表格不会提交

> ID：10930355
> 
> 赞同：0
> 
> 时间：2012-06-07T10:53:03.503
> 
> 标签：php, javascript, forms

我有下面的表格，它不会提交到我的电子邮件。我在下面粘贴了我的表单代码、javascript 和 php 代码。我是 javascript 的新手，请提供帮助。

```
<form id="form-main" action="bin/bookHandler.php">
                                    .

                                            <div class="clear"></div>
                                        </div>
                                        <div class="row1">Additional Comments:</div>
                                        <label class="message">
                                            <textarea></textarea>
                                        </label>
                                        <div class="clear"></div>
                                        <div class="buttons">
                                            <a onClick="document.getElementById('form-main').submit()">Send</a>
                                            <a onClick="document.getElementById('form-main').reset()">Clear</a>
                                        </div>
                                    </fieldset>
                                </form> 
```

以下是表单的javascript：

```
(function($){
    $.fn.extend({
        forms:function(opt){
            if(opt===undefined)
                opt={}
            this.each(function(){
                var th=$(this),
                    data=th.data('forms'),
                    _={
                        errorCl:'error',
                        emptyCl:'empty',
                        invalidCl:'invalid',
                        successCl:'success',
                        successShow:'4000',
                        mailHandlerURL:'bin/MailHandler.php',
                        ownerEmail:'username@gmail.com',
                        stripHTML:true,
                        smtpMailServer:'localhost',
                        targets:'input,textarea',
                        controls:'a[data-type=reset],a[data-type=submit]',
                        validate:true,
                        rx:{
                            ".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                            ".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                            ".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:'input'},
                            ".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                            ".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                            ".message":{rx:/.{20}/,target:'textarea'}
                        },
                        preFu:function(){
                            _.labels.each(function(){
                                var label=$(this),
                                    inp=$(_.targets,this),
                                    defVal=inp.val(),
                                    trueVal=(function(){
                                                var tmp=inp.is('input')?(tmp=label.html().match(/value=['"](.+?)['"].+/),!!tmp&&!!tmp[1]&&tmp[1]):inp.html()
                                                return defVal==''?defVal:tmp
                                            })()
                                trueVal!=defVal
                                    &&inp.val(defVal=trueVal||defVal)
                                label.data({defVal:defVal})                             
                                inp
                                    .bind('focus',function(){
                                        inp.val()==defVal
                                            &&(inp.val(''),_.hideEmptyFu(label),label.removeClass(_.invalidCl))
                                    })
                                    .bind('blur',function(){
                                        !inp.val()
                                            ?inp.val(defVal)                                        
                                            :(_.isValid(label)
                                                ?_.showErrorFu(label)
                                                :_.hideErrorFu(label)),
                                            (_.isEmpty(label)
                                                ?_.showEmptyFu(label)
                                                :_.hideEmptyFu(label))
                                    })
                                    .bind('keyup',function(){
                                        label.hasClass(_.invalidCl)
                                            &&_.isValid(label)
                                                ?_.showErrorFu(label)
                                                :_.hideErrorFu(label)
                                    })
                                label.find('.'+_.errorCl+',.'+_.emptyCl).css({display:'block'}).hide()
                            })
                            _.success=$('.'+_.successCl,_.form).hide()
                        },
                        isValid:function(el){
                            var ret=true,
                                empt=_.isEmpty(el)
                            if(empt)
                                ret=false,
                                el.addClass(_.invalidCl)
                            else
                                $.each(_.rx,function(k,d){
                                    if(el.is(k))
                                        d.rx.test(el.find(d.target).val())
                                            ?(el.removeClass(_.invalidCl),ret=false)
                                            :el.addClass(_.invalidCl)
                                })
                            return ret
                        },
                        isEmpty:function(el){
                            var tmp
                            return (tmp=el.find(_.targets).val())==''||tmp==el.data('defVal')
                        },
                        validateFu:function(){                          
                            _.labels.each(function(){
                                var th=$(this)                              
                                _.isEmpty(th)
                                    ?_.showEmptyFu(th)
                                    :_.hideEmptyFu(th)
                                _.isValid(th)
                                    ?_.showErrorFu(th)
                                    :_.hideErrorFu(th)
                            })
                        },
                        submitFu:function(){
                            _.validateFu()
                            if(!_.form.has('.'+_.invalidCl).length)
                                $.ajax({
                                    type: "POST",
                                    url:_.mailHandlerURL,
                                    data:{
                                        name:$('.name input',_.form).val()||'nope',
                                        email:$('.email input',_.form).val()||'nope',
                                        phone:$('.phone input',_.form).val()||'nope',
                                        fax:$('.fax input',_.form).val()||'nope',
                                        state:$('.state input',_.form).val()||'nope',
                                        message:$('.message textarea',_.form).val()||'nope',
                                        owner_email:_.ownerEmail,
                                        stripHTML:_.stripHTML
                                    },
                                    success: function(){
                                        _.showFu()
                                    }
                                })          
                        },
                        showFu:function(){
                            _.success.slideDown(function(){
                                setTimeout(function(){
                                    _.success.slideUp()
                                    _.form.trigger('reset')
                                },_.successShow)
                            })
                        },
                        controlsFu:function(){
                            $(_.controls,_.form).each(function(){
                                var th=$(this)
                                th
                                    .bind('click',function(){
                                        _.form.trigger(th.data('type'))
                                        return false
                                    })
                            })
                        },
                        showErrorFu:function(label){
                            label.find('.'+_.errorCl).slideDown()
                        },
                        hideErrorFu:function(label){
                            label.find('.'+_.errorCl).slideUp()
                        },
                        showEmptyFu:function(label){
                            label.find('.'+_.emptyCl).slideDown()
                            _.hideErrorFu(label)
                        },
                        hideEmptyFu:function(label){
                            label.find('.'+_.emptyCl).slideUp()
                        },
                        init:function(){
                            _.form=this
                            _.labels=$('label',_.form)

                            _.preFu()

                            _.controlsFu()

                            _.form
                                .bind('submit',function(){
                                    if(_.validate)
                                        _.submitFu()
                                    else
                                        _.form[0].submit()
                                    return false
                                })
                                .bind('reset',function(){
                                    _.labels.removeClass(_.invalidCl)                                   
                                    _.labels.each(function(){
                                        var th=$(this)
                                        _.hideErrorFu(th)
                                        _.hideEmptyFu(th)
                                    })
                                })
                            _.form.trigger('reset')
                        }
                    }
                if(!data)
                    (typeof opt=='object'?$.extend(_,opt):_).init.call(th),
                    th.data({cScroll:_}),
                    data=_
                else
                    _=typeof opt=='object'?$.extend(data,opt):data
            })
            return this
        }
    })
})(jQuery)

$(function(){
   $('#contact-form').forms({
     ownerEmail:'username@gmail.com'
     })
}) 
```

下面是php：

```
<?php
$field_name = $_POST["cf_name"];
$field_email = $_POST["cf_email"];
$field_tel = $_POST["tel"];
$field_stay = $_POST["selectStay"];
$field_people = $_POST["selectPeople"];
$field_month = $_POST["selectMonth"];
$field_day = $_POST["selectDay"];
$field_year = $_POST["selectYear"];
$field_message = $_POST["cf_message"];

$mail_to = 'username@gmail.com';
$subject = 'Message from a site visitor '.$field_name;

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Telephone/Cell: '.$field_tel."\n";
$body_message .= 'Length of stay: '.$field_stay."\n";
$body_message .= 'Number of people: '.$field_people."\n";
$body_message .= 'Month: '.$field_month.;
$body_message .= 'Day: '.$field_day.;
$body_message .= 'Year: '.$field_year."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for the message. We will contact you shortly.');

    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send an email to ssssss');

    </script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:01:04.090

看看 print_r($_POST); POST 成功了吗？

# mysql - 为每个用户更新 n 条记录

> ID：10930358
> 
> 赞同：0
> 
> 时间：2012-06-07T10:53:07.260
> 
> 标签：mysql, sql

我必须为每个用户更新 n 个最旧的订单。现在我使用以下代码更新每个用户 1 条最旧的记录，但不知道如何更新 n 条记录......

```
UPDATE orders
                INNER JOIN (
                    SELECT id, MIN(created) AS created
                    FROM orders 
                    WHERE status="queue" AND type="order"
                    GROUP BY user_id
                ) m ON orders.id = m.id
            SET orders.status = "process",
                orders.lock_id ="somehash" 
```

我找到了答案：

```
set @num := 0, @type := "";

UPDATE orders INNER JOIN(

SELECT id, user_id, created, row_number FROM (
   SELECT id, user_id, created,
      @num := if(@type = user_id, @num + 1, 1) AS row_number,
      @type := user_id AS dummy
  FROM orders
  WHERE status = "queue"
  ORDER BY user_id, created asc ) AS grouped_orders 
WHERE grouped_orders.row_number <= 2

) m ON orders.id = m.id SET orders.status = "process", orders.lock_id = "somehash"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:08:41.573

我认为这不会令人惊讶地执行，但是没有`ROW_NUMBER()`或其他 Window 函数，并且没有使用循环（甚至比这更糟糕），操作变得更加复杂：

```
UPDATE  Orders
        INNER JOIN
        (   SELECT  o1.ID
            FROM    Orders o1
                    LEFT JOIN Orders o2
                        ON o2.User_ID = o1.User_ID
                        AND o2.CreatedDate < o1.CreatedDate
            GROUP BY o1.ID
            HAVING  COUNT(*) < 3
        ) o
            ON orders.ID = o.ID
SET     Status = 1; 
```

在`n`这种情况下是`3`在`HAVING`条款中。如果每个 User_ID 的数据量很少，这可以正常工作。如果每个查询都有数千行，那么查询很快就会变得相当缓慢和繁琐。

**[SQL Fiddle 示例](http://sqlfiddle.com/#!2/07464/6)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:01:51.907

查看如何在查询中使用[limit](http://www.plus2net.com/sql_tutorial/sql_limit.php)和[order by](http://www.w3schools.com/sql/sql_orderby.asp)。这些将帮助您获取每个用户的 n 条最旧记录。

然后，您只需像对每个条目所做的那样进行更新即可。

您可能必须使用与此类似的查询：

```
update table set WHAT_YOU_WANT_TO_SET
where table.id in (select id, etc from other_table USING_LIMIT_AND_ORDER_BY) 
```

# visual-c++ - VS 2010 中的 C++ 项目设置

> ID：10930364
> 
> 赞同：2
> 
> 时间：2012-06-07T10:53:43.273
> 
> 标签：visual-c++

我正在使用 VS2010，有一个包含多个 C++ 项目的解决方案。如何在不进入每个项目并设置它（用于调试和发布）的情况下为所有项目设置一个额外的包含目录。我看到了“从父级或项目默认值继承”复选框。但不明白如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:03:16.170

使用属性管理器，您可以一次多选所有项目并添加新的公共属性表。打开此属性表并设置 Additional Include Directories。

我希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:59:33.590

使用[Visual Studio 属性表](http://msdn.microsoft.com/en-us/library/a4xbdz1e.aspx)。您可以定义具有包含路径的属性表，并将其包含在每个项目中

编辑：这个链接应该很有帮助[http://blog.gockelhut.com/2009/11/visual-studio-2010-property-sheets-and.html](http://blog.gockelhut.com/2009/11/visual-studio-2010-property-sheets-and.html)

# javascript - 移动平台 Web 浏览器中的 JavaScript 上下文菜单和工具提示

> ID：10930367
> 
> 赞同：0
> 
> 时间：2012-06-07T10:53:57.277
> 
> 标签：javascript, android, mobile, contextmenu, tooltip

我需要提供可在移动平台浏览器上使用的网页（为桌面浏览器制作）。

在我的页面上是表格（时间表），其中包含自定义工具提示和自定义上下文菜单的单元格。一些单元格也是链接。这意味着，onmouseover、onmouseout、oncontextmenu 和 onclick 有自定义事件。

移动浏览器（在安卓手机/平板电脑上）没有鼠标，所以我只能点击（实际上显示工具提示或在链接的情况下导航）或长按（实际上选择文本并显示浏览器标准菜单）。

是否有任何解决方案（例如 jQuery 插件）可以在移动浏览器中显示自定义上下文菜单并提供自定义工具提示？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:39:00.720

最后，使用[jQuery Mobile有一个很好的](http://jquerymobile.com/)[解决方案](https://stackoverflow.com/a/10505058/519856)。jQuery Mobile 是单个文件中的 jQuery 插件集合，我只从中获取了虚拟鼠标事件插件。

当我使用整个插件时，它破坏了页面布局和一些 JavaScript 功能。

对于我使用的上下文菜单`vmousedown`和`vmouseup`事件，因为`taphold`没有提供事件对象中事件的位置。

默认系统上下文菜单（复制、共享、查找）可以通过 CSS 定义 ( ) 关闭`-webkit-touch-callout: none! important;`。

# java - Android 中对无标签字符串的 JSON 解析

> ID：10930369
> 
> 赞同：0
> 
> 时间：2012-06-07T10:54:18.667
> 
> 标签：java, android, json

尝试解析此 JSON 时遇到问题。

```
{
    "bakso-roso-n'deso__-6.19_106.77":
    {"Latitude":"-6.185488","Longitude":"106.77366","Distance":"90.89210930799594"},
    "print-point-duri-kepa__-6.19_106.77":
    {"Latitude":"-6.18599544813468","Longitude":"106.772603988647","Distance":"118.9849339548274"},
    "apartment-menara-kebun-jeruk__-6.19_106.78":
    {"Latitude":"-6.18530376709007","Longitude":"106.775222279179","Distance":"247.8816947606767"},
    "ranch-market---pesanggrahan__-6.19_106.77":
    {"Latitude":"-6.18761306472002","Longitude":"106.77343661177","Distance":"294.4255786871916"}
} 
```

问题是我如何将“bakso-roso-n'deso__-6.19_106.77”作为字符串。它没有任何标签。

谢谢你。

现在处理 Json 的常规方法是这样的：

```
String jstring = "{\"menu\": {\"id\": \"file\", \"value\": \"File\",\"popup\": {\"menuitem\": [{\"value\": \"New\", \"onclick\": \"CreateNewDoc()\"},{\"value\": \"Open\", \"onclick\": \"OpenDoc()\"},{\"value\": \"Close\", \"onclick\": \"CloseDoc()\"}]}}}";
try
{
    jObject = new JSONObject(jstring); 
```

我将如何为这种类型的 json 做到这一点？jstring应该是什么？

基本上我想把这些 json 字符串变成一些字典。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:07:26.467

> 请检查此字符串，这不是有效的 json 字符串。

```
 String jstring = "{\"menu\": {\"id\": \"file\", \"value\": \"File\",\"popup\": {\"menuitem\": [{\"value\": \"New\", \"onclick\": \"CreateNewDoc()\"},{\"value\": \"Open\", \"onclick\": \"OpenDoc()\"},{\"value\": \"Close\", \"onclick\": \"CloseDoc()\"}]}}}"; 
```

> 检查 json 是否有效[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:59:28.427

其实你`"bakso-roso-n'deso__-6.19_106.77"`是标签（键？）本身..

```
JSONObject jsonObject = new JSONObject(YOUR_RESPONSE_STRING);
Iterator<String> myIter = jsonObject.keys();
while(myIter.hasNext()){
  //here you can get all keys
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:00:35.433

我认为您可以使用 jObject.keys(); 获取键上的迭代器；

根据您的代码....

```
String jstring = "{\"menu\": {\"id\": \"file\", \"value\": \"File\",\"popup\": {\"menuitem\": [{\"value\": \"New\", \"onclick\": \"CreateNewDoc()\"},{\"value\": \"Open\", \"onclick\": \"OpenDoc()\"},{\"value\": \"Close\", \"onclick\": \"CloseDoc()\"}]}}}";

  try
      {
         jObject = new JSONObject(jstring);
         Map<String,String> map = new HashMap<String,String>();
         Iterator iter = jObject.keys();

         while(iter.hasNext()){
            String key = (String)iter.next();
            String value = menu.getString(key);
            map.put(key,value);
        }
    } catch(exception e){} 
```

[仅使用字符串和值解析 JSON 对象](https://stackoverflow.com/questions/4407532/parse-json-object-with-string-and-value-only)

# sql - NHibernate .OrderBy.SelectMany.Select

> ID：10930373
> 
> 赞同：1
> 
> 时间：2012-06-07T10:54:50.223
> 
> 标签：sql, linq, fluent-nhibernate

在 Nhibernate 3.2 上，我遇到了 Linq 查询问题：

```
 var temp = Session.Query<RequestForQuotation>().OrderByDescending(o => o.DateIssued).ToList();
        var temp2 = Session.Query<RequestForQuotation>().OrderByDescending(o => o.DateIssued).SelectMany(o => o.RequestForQuotationItems).ToList();
        var temp3 = Session.Query<RequestForQuotation>().OrderByDescending(o => o.DateIssued).SelectMany(o => o.RequestForQuotationItems).Select(o => o.SupplierProduct).ToList(); 
```

temp3 抛出异常

NHibernate.QueryException：无法解析属性：DateIssued of：XXXX.Domain.Entities.RequestForQuotationItem

显然 DateIssued 是 RequestForQuotation 的属性/列而不是 RequestForQuotationItem

这是 Nhibernate Query 的一个已知问题还是我的想法有问题？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:12:40.057

可能的解决方法似乎是这样，但我不确定：

```
Session.Query<RequestForQuotation>().SelectMany(o => o.RequestForQuotationItems, (rfq, rfqi) => new { rfq, rfqi }).OrderByDescending(o => o.rfq.DateIssued).Select(o => o.rfqi.SupplierProduct) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:25:44.677

可能的解决方法（没有 SelectMany）

```
Session.Query<RequestForQuotationItem>()
  .OrderByDescending(i => i.RequestForQuotation.DateIssued)
  .Select(i => i.SupplierProduct)
  .ToList(); 
```

# java - 通过展开面板调整 gui

> ID：10930376
> 
> 赞同：1
> 
> 时间：2012-06-07T10:54:57.210
> 
> 标签：java, swing, jframe

我正在尝试创建一个 pdf 查看器，但我无法将视图与选项卡式窗格分开。我尝试了一切但没有成功，

*   我尝试添加***JSplit***窗格，但它没有工作。（我现在不需要添加，只需要展开右侧面板即可。
*   我尝试使用`setSize(x, y)`. 但它也没有奏效。

这是一个屏幕截图：

![在此处输入图像描述](../Images/3c6fc7f13c373bc3c6232d634d680ae2.png)

这里有一些代码：

```
class Main
{   
    public static void main(String args[]){
        JFrame frame = new JFrame("Pdf Reader");
        frame.setJMenuBar(new MenuBar());
        frame.getContentPane().add(new ToolBar(), BorderLayout.NORTH);
        frame.getContentPane().add(new LeftPanel(), BorderLayout.CENTER);

        frame.getContentPane().add(new ViewPanel(), BorderLayout.EAST);
        frame.setVisible(true);
        frame.setSize(1000, 700);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}

class LeftPanel extends JPanel
{
    private JTabbedPane tabs;
    private JPanel panel1;
    private JPanel panel2;
    private JPanel panel3;
    private JPanel panel4;

    public LeftPanel(){
        addTabs();  
    }

    public void addTabs()
    {   
        tabs = new JTabbedPane();

        panel1 = new JPanel();  
        tabs.addTab("Thumbnails", panel1);

        panel2 = new JPanel();
        tabs.addTab("Annotations", panel2);

        panel3 = new JPanel();
        tabs.addTab("Bookmarks", panel3);

        panel4 = new JPanel();
        tabs.addTab("Search", panel4);

        setLayout(new GridLayout(1, 1));

        add(tabs, BorderLayout.CENTER);
    }
}

class ViewPanel extends JPanel
{
    private JLabel viewLabel;

    public ViewPanel(){

        viewLabel = new JLabel("Just a view...............................");

        add(viewLabel);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:02:37.553

好吧，这就是我解决问题的方法。

```
//frame.getContentPane().add(new LeftPanel(), BorderLayout.CENTER);
JSplitPane pane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, new LeftPanel(), new ViewPanel());
frame.getContentPane().add(pane);
frame.setVisible(true);
frame.setSize(1000, 700);
//frame.pack();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

这很成功。

# javascript - 如何使用 JavaScript 清除身份验证缓存？

> ID：10930378
> 
> 赞同：1
> 
> 时间：2012-06-07T10:55:09.367
> 
> 标签：javascript, firefox, authentication, cache-control

我发现使用 JavaScript 清除了浏览器（FireFox 和 Chrome）之间的身份验证缓存。

通过引用这篇文章[Link](http://andre-pedroso.blogspot.com/2011/05/clear-authentication-cache-javascript.html)，使用 XMLHttpRequest 清除非 IE 浏览器缓存的部分在我的情况下不起作用。

我正在寻找替代方法，有什么建议吗？请帮忙

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:06:06.770

我一直在寻找类似的解决方案，并遇到了一个用于执行此操作的 Trac（问题管理系统）的补丁。

我已经查看了代码（我很累，所以我没有解释一切）；基本上，您需要使用保证无效凭据对您的登录页面进行 AJAX 调用。浏览器将收到 401 并知道下次您去那里时它需要询问您正确的凭据。您使用 AJAX 而不是重定向，以便您可以指定不正确的凭据并且浏览器不会弹出对话框。

在补丁（[http://trac-hacks.org/wiki/TrueHttpLogoutPatch](http://trac-hacks.org/wiki/TrueHttpLogoutPatch)）页面上，他们使用非常基本的 AJAX；像 jQuery 或 Prototype 等更好的东西可能会更好，尽管这样可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:03:00.927

浏览器处理提供的凭据的精确规则 - 如果它们在从 Javascript 提供时被保存，并且如果正确或不正确的尝试将覆盖身份验证缓存，则在任何地方都没有标准化。

此外，开发人员倾向于考虑任何允许无人看管的存储操作，这些操作通常需要用户手动交互，例如“你想保存密码吗？” 提示，因为不安全，即使它在过去由于某种原因有效，也会及时堵塞漏洞。

因此，我建议不要依赖它，也不要尝试从脚本中清除/无效此缓存。

# c++ - c++头文件返回对类型

> ID：10930379
> 
> 赞同：0
> 
> 时间：2012-06-07T10:55:12.963
> 
> 标签：c++

我对 C++ 的经验非常有限，所以就到这里吧.. :P

我有一个具有以下结构的头文件

```
namespace simpleDLLNS{
class simpleDLL
{
public:
void simpleCall();
pair<int, const char*> load();
};} 
```

问题是我收到以下错误：错误 C2143：语法错误：缺少';' 在'<'之前。我想我的问题是如何声明具有返回类型对的方法。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T10:56:39.440

您的代码看起来不错，所以我只能假设您缺少正确的标题和/或忽略指定`std`命名空间。

```
#include <utility>
namespace simpleDLLNS{
class simpleDLL
{
public:
  void simpleCall();
  std::pair<int, const char*> load();
};
} 
```

# java - Richfaces portlet | 未找到 FacesContext

> ID：10930384
> 
> 赞同：2
> 
> 时间：2012-06-07T10:55:23.150
> 
> 标签：java, jsf, richfaces, portlet, websphere-portal

我打算使用 RichFaces 3.3 创建一个 portlet。我在 IBM RSA 中创建了一个 portlet 项目。IBM RSA 生成的示例 portlet 工作正常，但只要我将 JSF/RichFaces 组件添加到`.jsp`页面，我就会收到`Error 500: java.lang.RuntimeException: FacesContext not found`异常。

我正在执行以下步骤以在 IBM RSA 8 中创建此 portlet：

*   New->Portlet Project，一个新项目，设置如下：配置：JSR286 Basic，Web 2.0 特性：客户端功能
*   将richface所需的所有库复制到WEB_INF/lib
*   将 portlet 项目导出为 .war
*   使用 IBM Websphere Portal Administration 模块部署和运行 .war 文件。

生成的 portlet 已成功部署在 IBM websphere 门户服务器上，但 portlet 只显示一条异常消息`Error 500: java.lang.RuntimeException: FacesContext not found`。

谁能指出我在这里做错了什么？任何帮助，提示，指针表示赞赏。

以下堆栈跟踪（包括在服务器上安装和运行 portlet 时的日志记录）显示在服务器控制台上：

```
[6/7/12 15:13:11:729 PKT] 00000067 webcontainer  I com.ibm.ws.wswebcontainer.VirtualHost addWebApplication SRVE0250I: Web Module loginBasic has been bound to default_host[*:80,*:443,*:10000,*:10002,*:10039,*:10029,*:10032].
[6/7/12 15:13:11:746 PKT] 00000067 ApplicationMg A WSVR0221I: Application started: PA_loginBasic
[6/7/12 15:13:11:751 PKT] 00000067 CompositionUn A WSVR0191I: Composition unit WebSphere:cuname=PA_loginBasic in BLA WebSphere:blaname=PA_loginBasic started.
[6/7/12 15:13:40:632 PKT] 00000045 servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [PA_loginBasic] [/wps/PA_loginBasic] [loginBasic]: Initialization successful.
[6/7/12 15:13:40:648 PKT] 00000045 servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [PA_loginBasic] [/wps/PA_loginBasic] [/_loginBasic/jsp/html/LoginBasicPortletView.jsp]: Initialization successful.
[6/7/12 15:13:40:932 PKT] 00000045 servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: Uncaught exception created in one of the service methods of the servlet /_loginBasic/jsp/html/LoginBasicPortletView.jsp in application PA_loginBasic. Exception created : 
java.lang.RuntimeException: FacesContext not found
    at javax.faces.webapp.UIComponentClassicTagBase.getFacesContext(UIComponentClassicTagBase.java:321)
    at javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:228)
    at com.ibm._jsp._LoginBasicPortletView._jspx_meth_f_view_0(_LoginBasicPortletView.java:428)
    at com.ibm._jsp._LoginBasicPortletView._jspService(_LoginBasicPortletView.java:230)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.handleRequest(AbstractJSPExtensionProcessor.java:353)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.ws.portletcontainer.core.impl.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:100)
    at com.ibm.ws.portletcontainer.core.impl.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:237)
    at com.ibm.loginbasic.LoginBasicPortlet.doView(LoginBasicPortlet.java:43)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:222)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:128)
    at com.ibm.wps.engine.el.init.AttributeCopyFilter.doFilter(AttributeCopyFilter.java:110)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:120)
    at com.ibm.wps.resolver.iwidget.filter.IWidgetPortletFilter.doFilter(IWidgetPortletFilter.java:60)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:120)
    at com.ibm.wps.propertybroker.standard.filter.C2APortletFilter.doFilter(C2APortletFilter.java:193)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:120)
    at com.ibm.wps.pe.pc.waspc.plm.GlobalPortletLoadMonitoringFilter.doFilter(GlobalPortletLoadMonitoringFilter.java:141)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:120)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:573)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:114)
    at com.ibm.isclite.container.collaborator.PortletServletCollaborator.doRender(PortletServletCollaborator.java:71)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.rrd.RRDServerPortletServletCollaborator.doRender(RRDServerPortletServletCollaborator.java:123)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.cache.CacheCollaborator.doRender(CacheCollaborator.java:92)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletServletCollaboratorImpl.doRender(PortletServletCollaboratorImpl.java:155)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:273)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:82)
    at com.ibm.isclite.container.collaborator.PortletServletCollaborator.doDispatch(PortletServletCollaborator.java:143)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.rrd.RRDServerPortletServletCollaborator.doDispatch(RRDServerPortletServletCollaborator.java:60)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.cache.CacheCollaborator.doDispatch(CacheCollaborator.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletServletCollaboratorImpl.doDispatch(PortletServletCollaboratorImpl.java:112)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.dispatch(PortletServlet.java:208)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.service(PortletServlet.java:165)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.portletcontainer.webextension.PortletExtensionProcessor.handleRequest(PortletExtensionProcessor.java:86)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.invoke(PortletInvokerImpl.java:214)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:78)
    at com.ibm.ws.portletcontainer.cache.PortletInvokerCacheCollaborator.doRender(PortletInvokerCacheCollaborator.java:58)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.invoke(PortletInvokerPerformanceCollaborator.java:313)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doInvoke(PortletInvokerPerformanceCollaborator.java:101)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.invokePMI(PortletInvokerPerformanceCollaborator.java:163)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doInvoke(PortletInvokerPerformanceCollaborator.java:91)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doRender(PortletInvokerPerformanceCollaborator.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.render(PortletInvokerImpl.java:97)
    at com.ibm.ws.portletcontainer.PortletContainerImpl.doRender(PortletContainerImpl.java:121)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:80)
    at com.ibm.ws.portletcontainer.ext.ExtCollaborator.doRender(ExtCollaborator.java:74)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.cache.CacheInvokerCollaborator.doRender(CacheInvokerCollaborator.java:66)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.wps.resolver.iwidget.filter.IWidgetPCInvokerCollaborator.doRender(IWidgetPCInvokerCollaborator.java:173)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:91)
    at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl$2.run(PortletInvokerImpl.java:100)
    at java.security.AccessController.doPrivileged(AccessController.java:251)
    at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl.invokeRender(PortletInvokerImpl.java:96)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletInvokerImpl$1.invoke(PortletInvokerImpl.java:98)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletInvokerImpl.invoke(PortletInvokerImpl.java:182)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletInvokerImpl.invokeRender(PortletInvokerImpl.java:96)
    at com.ibm.wps.pe.pc.waspc.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:148)
    at com.ibm.wps.pe.pc.waspc.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:128)
    at com.ibm.wps.pe.pc.PortletContainerImpl.doRenderPortlet(PortletContainerImpl.java:641)
    at com.ibm.wps.pe.ext.render.AbstractRenderManager.performService(AbstractRenderManager.java:263)
    at com.ibm.wps.pe.pc.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:132)
    at com.ibm.wps.resolver.model.layout.LayoutControlDataSource.renderPortlet(LayoutControlDataSource.java:820)
    at com.ibm.wps.resolver.model.layout.LayoutControlDataSource.renderLayoutControl(LayoutControlDataSource.java:764)
    at com.ibm.wps.resolver.model.layout.LayoutControlDataSource.write(LayoutControlDataSource.java:1132)
    at sun.reflect.GeneratedMethodAccessor81.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.wps.util.ContextWrapper$Handler.invoke(ContextWrapper.java:127)
    at $Proxy161.write(Unknown Source)
    at com.ibm.wps.spa.renderer.skin.DynamicContentSkinContentHandler.endDynamicContentSpot(DynamicContentSkinContentHandler.java:251)
    at com.ibm.wps.spa.parser.skin.RecordingSkinContentHandler.parse(RecordingSkinContentHandler.java:116)
    at com.ibm.wps.spa.parser.skin.CachingSkinURIParserImpl.parse(CachingSkinURIParserImpl.java:178)
    at com.ibm.wps.spa.data.locale.LocalizedContextDataSourceParserImpl.parse(LocalizedContextDataSourceParserImpl.java:278)
    at com.ibm.wps.spa.data.locale.LocalizedContextDataSource.write(LocalizedContextDataSource.java:179)
    at com.ibm.wps.spa.data.skin.DynamicContentSkinDataSource.write(DynamicContentSkinDataSource.java:188)
    at com.ibm.wps.engine.templates.skins.SPASkinTemplate.render(SPASkinTemplate.java:235)
    at com.ibm.wps.engine.templates.SkinTemplate.render(SkinTemplate.java:68)
    at com.ibm.wps.composition.elements.Component.render(Component.java:736)
    at com.ibm.wps.composition.elements.Control.render(Control.java:182)
    at com.ibm.wps.composition.elements.Component.render(Component.java:652)
    at com.ibm.wps.composition.elements.Control.render(Control.java:165)
    at com.ibm.wps.composition.Composition.render(Composition.java:3103)
    at com.ibm.wps.composition.Composition.render(Composition.java:164)
    at com.ibm.websphere.personalization.transformation.PznTransformationLayoutModel.render(PznTransformationLayoutModel.java:90)
    at com.ibm.wps.model.wrappers.LayoutModelWrapperFactoryImpl$LayoutModelWrapperImpl.render(LayoutModelWrapperFactoryImpl.java:275)
    at com.ibm.wps.spa.renderer.DefaultPageRendererImpl.renderLayoutControlWithSkin(DefaultPageRendererImpl.java:1086)
    at com.ibm.wps.spa.renderer.DefaultPageRendererImpl.renderLayoutControl(DefaultPageRendererImpl.java:1036)
    at com.ibm.wps.spa.renderer.DefaultPageRendererImpl.renderLayoutContainer(DefaultPageRendererImpl.java:935)
    at com.ibm.wps.spa.renderer.StaticPageRendererImpl.startPortletContainer(StaticPageRendererImpl.java:966)
    at com.ibm.wps.spa.parser.cache.CacheValueImpl$PlaybackHandler.playStartPortletContainer(CacheValueImpl.java:581)
    at com.ibm.wps.spa.parser.cache.CacheValueImpl$PlaybackHandler.parse(CacheValueImpl.java:389)
    at com.ibm.wps.spa.parser.cache.CacheValueImpl$PlaybackHandler.parse(CacheValueImpl.java:364)
    at com.ibm.wps.spa.parser.cache.CacheValueImpl.parse(CacheValueImpl.java:1148)
    at com.ibm.wps.spa.parser.cache.CachingParser.parse(CachingParser.java:531)
    at com.ibm.wps.spa.parser.StaticPageURIParserImpl.parse(StaticPageURIParserImpl.java:137)
    at com.ibm.wps.spa.parser.StaticPageURIParserImpl.parse(StaticPageURIParserImpl.java:171)
    at com.ibm.wps.spa.renderer.PortalStaticPageRendererImpl.render(PortalStaticPageRendererImpl.java:249)
    at com.ibm.wps.spa.renderer.PortalStaticPageRendererImpl.render(PortalStaticPageRendererImpl.java:192)
    at com.ibm.wps.engine.templates.screens.SPAScreenTemplate.render(SPAScreenTemplate.java:152)
    at com.ibm.wps.engine.templates.screens.SPAScreenTemplate.render(SPAScreenTemplate.java:119)
    at com.ibm.wps.engine.templates.screens.SPAScreenTemplate.render(SPAScreenTemplate.java:170)
    at com.ibm.wps.engine.templates.ScreenTemplate.render(ScreenTemplate.java:59)
    at com.ibm.wps.resolver.model.layout.LayoutTemplateDataSource.write(LayoutTemplateDataSource.java:294)
    at sun.reflect.GeneratedMethodAccessor81.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.wps.util.ContextWrapper$Handler.invoke(ContextWrapper.java:127)
    at $Proxy155.write(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor81.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.wps.util.ContextWrapper$Handler.invoke(ContextWrapper.java:127)
    at $Proxy156.write(Unknown Source)
    at com.ibm.wps.spa.renderer.theme.DynamicContentThemeContentHandler.endDynamicContentSpot(DynamicContentThemeContentHandler.java:249)
    at com.ibm.wps.spa.parser.theme.RecordingThemeContentHandler.parse(RecordingThemeContentHandler.java:109)
    at com.ibm.wps.spa.parser.theme.CachingThemeURIParserImpl.parse(CachingThemeURIParserImpl.java:178)
    at com.ibm.wps.spa.data.locale.LocalizedContextDataSourceParserImpl.parse(LocalizedContextDataSourceParserImpl.java:278)
    at com.ibm.wps.spa.data.locale.LocalizedContextDataSource.write(LocalizedContextDataSource.java:179)
    at com.ibm.wps.spa.data.theme.DynamicContentThemeDataSource.write(DynamicContentThemeDataSource.java:186)
    at com.ibm.wps.resolver.tags.DataSourceTag.doEndTag(DataSourceTag.java:229)
    at com.ibm._jsp._Default._jspx_meth_r_dataSource_0(_Default.java:2944)
    at com.ibm._jsp._Default._jspx_meth_c_when_2(_Default.java:2971)
    at com.ibm._jsp._Default._jspService(_Default.java:943)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.handleRequest(DispatcherServiceImpl.java:93)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.include(DispatcherServiceImpl.java:53)
    at com.ibm.wps.services.dispatcher.Dispatcher.include(Dispatcher.java:50)
    at com.ibm.wps.engine.templates.themes.Default.doDispatch(Default.java:294)
    at com.ibm.wps.engine.templates.themes.Default.render(Default.java:247)
    at com.ibm.wps.engine.templates.ThemeTemplate.render(ThemeTemplate.java:65)
    at com.ibm.wps.engine.phases.WPRenderPhase.processRendering(WPRenderPhase.java:509)
    at com.ibm.wps.engine.phases.WPBaseRenderPhase.execute(WPBaseRenderPhase.java:230)
    at com.ibm.wps.state.phases.AbstractRenderPhase.next(AbstractRenderPhase.java:106)
    at com.ibm.wps.engine.phases.WPAbstractRenderPhase.next(WPAbstractRenderPhase.java:100)
    at com.ibm.wps.engine.Servlet.callPortal(Servlet.java:955)
    at com.ibm.wps.engine.Servlet.doGet(Servlet.java:677)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
    at com.ibm.wps.engine.Servlet.doFilter(Servlet.java:1429)
    at com.ibm.wps.resolver.servlet.ContentHandlerCleanup.doFilter(ContentHandlerCleanup.java:672)
    at com.ibm.wps.resolver.servlet.AbstractFilter.doFilter(AbstractFilter.java:93)
    at com.ibm.wps.engine.Servlet.service(Servlet.java:1417)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.ibm.wps.engine.ExtensionFilter$ExtendedFilterChain.doFilter(ExtensionFilter.java:91)
    at com.ibm.wps.engine.ExtensionFilter.doFilter(ExtensionFilter.java:178)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.engine.ExtendedLocaleFilter.doFilter(ExtendedLocaleFilter.java:113)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.resolver.friendly.servlet.FriendlySelectionFilter.doFilter(FriendlySelectionFilter.java:191)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.mappingurl.impl.URLAnalyzer.doFilter(URLAnalyzer.java:412)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.engine.VirtualPortalFilter.doFilter(VirtualPortalFilter.java:88)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.state.filter.StateCleanup.doFilter(StateCleanup.java:94)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

环境：WebSphere Portal v7.0、IBM Rational® Software Architect 版本：8.0.4、JSR 286、JSF 1.2、Richfaces 3.3。

# css - 如果每个元素都嵌入另一个元素中，我怎样才能获得第二个元素？

> ID：10930385
> 
> 赞同：19
> 
> 时间：2012-06-07T10:55:25.077
> 
> 标签：css

```
<div class="question_container">
    <div class="views">
        <div>10</div>
    </div>
    <div>Something else</div>
</div>
<div class="question_container">
    <div class="views">
        <div>10</div>
    </div>
    <div>Something else</div>
</div>
<div class="question_container">
    <div class="views">
        <div>10</div>
    </div>
    <div>Something else</div>
</div> 
```

如何在纯 css 中设置第二类视图的样式。

在 jquery 我会做

```
$('*[class=views]:even').addClass('views'); 
```

但是我该怎么做这个CSS？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-07T10:58:35.830

您可以为此使用该`:nth-child`属性：

例子：

```
.question_container:nth-child(2n) .views{
    color: red;
} 
```

`:nth-child(2)`将**只**选择第二个项目，而`:nth-child(2n)`将选择**每隔一个**项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-20T09:39:06.247

您可以将`:nth-child`选择器与`even`关键字一起使用。

```
.question_container:nth-child(even) .views{
    /* styles for every second class */
} 
```

对于选择奇数或偶数孩子的琐碎情况，我不会使用`:nth-child(1n)`也不使用。`:nth-child(2n)`尽管这些是完全有效的，但它们不如关键字`odd`和`even`; 特别是对于那些每天不使用 CSS 的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T11:04:12.547

正如@Andrej 和@sandeep 所说，它确实有效：

```
<style>
.question_container:nth-child(2n) .views{
    color: red;
}
</style>

<div class="question_container">
    <div class="views">
        <div>10</div>
    </div>
    <div>Something else</div>
</div>
<div class="question_container">
    <div class="views">
        <div>10</div>
    </div>
    <div>Something else</div>
</div>
<div class="question_container">
    <div class="views">
        <div>10</div>
    </div>
    <div>Something else</div>
</div> 
```

[https://jsfiddle.net/pxmqc1au/](https://jsfiddle.net/pxmqc1au/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T10:22:25.557

那么你可以让盒子有一半的宽度（50%）吗？让它们向左浮动然后清除将是最好的解决方案

HTML：

```
<div class="legend-box">
  <div class="box"> [] box 1 </div>
  <div class="box"> [] box 2 </div>
  <div class="box"> [] box 3 </div>
  <div class="box"> [] box 4 </div>
  <div class="box"> [] box 5 </div>
  <div class="box"> [] box 6 </div>
  <div class="clear"></div>
</div> 
```

CSS：

```
.box {
  display: inline-block;
  width: 50%;
  float: left;
}

.clear {
  clear: both;
} 
```

这是一个小提琴： [https ://jsfiddle.net/r5xq9von/](https://jsfiddle.net/r5xq9von/)

# python - Python中的随机模块有替代方案吗？

> ID：10930386
> 
> 赞同：2
> 
> 时间：2012-06-07T10:55:25.280
> 
> 标签：python

我正在使用[Trypython.org](http://www.trypython.org)，发现没有包含随机模块，所以很好奇。

是否有另一种方法可以在不导入随机数的情况下生成一定范围内的随机数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:09:04.653

随机数生成并不难。困难的是发明自己的方法并找到证明它很好的证据，或者编写优化的/安全的/线程安全的/.../ 实现。

[这是我在http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods](http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods)中描述的乘法进位方法的 Python 版本

通过调用 getuniform()，您将获得介于 0 和 1 之间的非常好的和均匀的随机数，然后将它们缩放到您需要的大小。除了密码学或详细的蒙特卡洛模拟之外，这对于大多数情况应该没问题。

```
class myrandom:
    kz=36969
    kw=18000
    k3=65535
    maxz=kz*k3+(2<<16)
    maxw=kw*k3+(2<<16)
    max=(maxz<<16 )+maxw
    # Optionally initiate with different seed. Two numbers below 2<<16
    def __init__(self,z=123456789,w=98764321):
        self.m_w = w
        self.m_z = z
    def step(self):
        self.m_z = self.kz * (self.m_z & self.k3) + (self.m_z >> 16)  
        self.m_w = self.kw * (self.m_w & self.k3) + (self.m_w >> 16)       
    def get(self):
        self.step()
        return (self.m_z << 16) + self.m_w
    def time_reseed(self):
        # yes, sure, move out import if you like to
        import time
        t=int(time.time())
        # completely made up way to got two new numbers below 2<<16
        self.m_z = (self.m_z+(t*34567891011)) & ((2<<16)-1)
        self.m_w = (self.m_w+(t*10987654321)) & ((2<<16)-1)
        self.step()
    def getuniform(self):
        return self.get()*1.0/self.max 
```

例子：

```
myr=myrandom()
print [myr.getuniform() for x in range(20)] 
```

如果你调用 time_reseed() 一些来自 time() 的新随机性被添加到状态中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:07:12.607

它非常丑陋，不可靠，而且速度不是很快，但它确实有效：

```
>>> import time
>>> t = time.time()
>>> int(str(t-int(t))[2:])%100 #Keeping only the numbers after the decimal point, otherwise you would get the same "random" number each second
33 
```

这里的范围是 [0,99]（参见模 100）。需要您自担风险使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T11:02:04.200

生成随机数，或者更确切地说是伪随机数是一项棘手的工作，最好坚持使用默认库。我建议您硬着头皮下载 Python [2.7.2](http://www.python.org/download/releases/2.7.2/)或[3.2.3](http://www.python.org/download/releases/3.2.3/)，然后您也可以使用 trypython 未包含的任何其他库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T11:38:58.550

随机性不是一个微不足道的主题，因此我建议不要使用替代模块，而是建议使用替代在线 IDE。

看看[pythonfiddle](http://pythonfiddle.com/)。这是您应该在那里使用的代码：

```
import random
print random.randint(1, 100) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-03T06:30:03.323

使用“秘密”模块 - 它是一个内置模块：import secrets secrets.random(10) 它会生成一个介于 0 到 10 之间的数字或您的值！

# r - 将两行文本添加到 R 中的 csv 文件

> ID：10930387
> 
> 赞同：1
> 
> 时间：2012-06-07T10:55:32.340
> 
> 标签：r, csv

我正在寻找使用我在循环中创建的 R 将两行添加到 csv 文件中。我从一些文件开始，命名为 file1.csv、file2.csv 等，每个文件都包含两列坐标。然后，我将它们用作索引矩阵来创建新的 csv 文件，这些文件在索引文件的条目中列出了“2”，否则为“0”。我将标题添加到文件中，以便生成的文件如下所示：

```
"","1","2","3","4","5"
"1",0,0,0,0,0
"2",0,0,0,0,2 
```

这正是我需要的（我的代码在下面）。但是，我还需要在 csv 文件的开头添加两行，分别在标题之前读取“min 1”和“max 3”，这样它看起来像：

```
"min 1",,,,
"max 3",,,,
"","1","2","3","4","5"
"1",0,0,0,0,0
"2",0,0,0,0,2 
```

我尝试将行添加到 M 矩阵、rbinding、合并两个 csv、读回 csv 文件并尝试添加行，但我没有得到任何有效的东西。非常感谢您的建议（以及改进我确信非常不雅的现有代码）。

谢谢

```
 csvdat <- list.files(pattern='file.*.csv')
 for (i in seq_along(csvdat)){
data <- read.csv(csvdat[i])
data[,2] -> x
data[,3] -> y
index=cbind(x,y)   
a <- length(x)+1    
matrix(nrow=a,ncol=a) -> M
M[] <- 0
M[index] <- 2
Cn <- c(1:a)
colnames(M) <- Cn
file <- as.character(paste("matrix", i, ".csv", sep=""))
write.csv(M, file,col.names=TRUE)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:26:20.940

这是“你要解决的问题是什么”的经典案例。如果你解释你对输出文件做了什么，以及为什么它被限制在如此奇怪的配置中，有人可能会解释一个更好的方法来实现你最终想要的结果——而不仅仅是生成这个特定的 csv 文件。

也就是说，通常您可以使用`write`或`write.csv`将“min 1,min 3”字符串发送到文件，然后`write.csv(data,{other arguments},append=TRUE)`将数据矩阵放在字符串下方。

# java - 在 JAXB 编组期间是否可以忽略包装类

> ID：10930396
> 
> 赞同：5
> 
> 时间：2012-06-07T10:55:58.430
> 
> 标签：java, xml, jaxb

我试图让 JAXB 在编组过程中忽略包装类，在代码中使用这个包装类是有意义的，因为它将所有相关信息放在一起，但是我需要在编组过程中摆脱它。以下是相关代码。

```
@XmlType(name = "root")
@XmlRootElement(name = "root")
public class Root {

    @XmlElementRef
    private List<Resource> resources = new ArrayList<>();

    public void addResource(Resource resource) {
        resources.add(resource);
    }
}

@XmlRootElement(name = "", namespace = "")
@XmlAccessorType(XmlAccessType.NONE)
public class Resource {

    @XmlElementRef
    private Element element;
    @XmlElementRef
    private FieldType fieldType;
    @XmlElementRef
    private ListType listType;
} 
```

Root 是主要对象，而 Resource 是我不希望为其创建节点的包装器对象。但是，我仍然希望呈现 Resource 中的 Element、FieldType 和 ListType。

这是我目前拥有的：

```
<root>
    <>
        <element name="resource1"/>
        <fieldType name="resource1--type">
        </fieldType>
        <listType name="resource--list">
        </listType>
    </>
    <>
        <element name="resource2"/>
        <fieldType name="resource2--type">
        </fieldType>
        <listType name="resource2--list">
        </listType>
    </>
</root> 
```

我想要实现的是以下几点：

```
<root>
    <element name="resource1"/>
    <fieldType name="resource1--type">
    </fieldType>
    <listType name="resource--list">
    </listType>
    <element name="resource2"/>
    <fieldType name="resource2--type">
    </fieldType>
    <listType name="resource2--list">
    </listType>
</root> 
```

我不知道这是否可能，但任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:09:05.167

您无法在 JAXB 中实现这一点。即使您能够像这样进行序列化，例如使用 XmlAdapter，也无法对其进行反序列化。

试试这个：

```
@XmlType(name = "root")
@XmlRootElement(name = "root")
@XmlAccessorType(XmlAccessType.NONE)
public class Root {

    private ArrayList<Resource> resources = new ArrayList<Resource>();

    public void addResource(Resource resource) {
        resources.add(resource);
    }

    @XmlElementRefs(value = { @XmlElementRef(type = Element.class),
                              @XmlElementRef(type = ListType.class),
                              @XmlElementRef(type = FieldType.class) })
    public List<Object> getResourceFields() {
        List<Object> list = new ArrayList<Object>();
        for (Resource r : resources) {
            list.add(r.getElement());
            list.add(r.getFieldType());
            list.add(r.getListType());
        }
        return list;
    }
} 
```

基本上`getRerourceFields`将所有资源的字段连接在同一个列表中。如果您无法更改`Root`课程，这可能是您的`RootAdapter`，并按照@Biju 的建议使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:17:23.667

您可能必须为您的 Root 类创建一个 XmlAdapter，该适配器应该基本上将您的根实例映射到不同的类型，您可以在编组之前将根结构展平 - 沿着这些线：

```
public class CustomRootAdapter extends
                    XmlAdapter<CustomRoot,Root>> {
@Override
public Root unmarshal(CustomRoot v) throws Exception {
    return null;//if you are not keen on unmarshalling..
}
@Override
public CustomRoot marshal(Root v) throws Exception {
    return ...;
} 
```

}

您可以使用以下方法注册此自定义适配器：

`@XmlJavaTypeAdapter(CustomRootAdapter.class)`和你的`Root`班级

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T11:10:49.167

这听起来正是`@XMLTransient`如此。

> 当放置在一个类上时，它表明该类本身不应映射到 XML。此类的属性将连同其派生类一起映射到 XML，就好像该类是内联的一样。

参见[javadoc](http://jaxb.java.net/nonav/2.2.3/docs/api/javax/xml/bind/annotation/XmlTransient.html)

# android - 如何在等待线程完成时显示进度对话框？

> ID：10930397
> 
> 赞同：0
> 
> 时间：2012-06-07T10:55:59.280
> 
> 标签：android

这是我试图在里面调用的代码`onCreate()`

```
 _t = new TheThread(this);
        pd = new ProgressDialog(this);
        pd.setMessage("Trip Detection ..");
        pd.show();
        _t.start();
        while(_t.isAlive()){
            //DO NOTHING..WIAITING TILL MAIN THREAD FISHIN
        }
        printToScreen();
        pd.dismiss(); 
```

printToScreen() 更新列表视图。使用tread _t 更新列表视图的内容。但是当我调用这个方法时，我没有看到任何“等待”消息出现。电话像以前一样冻结（当我没有在线程上运行内容时）。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:10:53.837

使用异步任务

```
private class DownloadingProgressTask extends
        AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(ShowDescription.this);

    /** progress dialog to show user that the backup is processing. */

    /** application context. */

    protected void onPreExecute() {
         this.dialog.setMessage("Please wait");
         this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {
            downloadFile(b.getString("URL"));
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            Toast.makeText(ShowDescription.this,
                    "File successfully downloaded", Toast.LENGTH_LONG)
                    .show();
            imgDownload.setVisibility(8);
        } else {
            Toast.makeText(ShowDescription.this, "Error", Toast.LENGTH_LONG)
                    .show();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:11:31.120

下面的代码片段将为您提供帮助。

```
progressDialog.show();

    new Thread()
      {
        public void run()
         {
             //do async operations here

             handler.sendEmptyMessage(0);
         } 
      }.start();

    Handler handler = new Handler()
            {

                @Override
                public void handleMessage(Message msg)
                {
                    progressDialog.dismiss();
                    super.handleMessage(msg);
                }

            }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:03:37.480

```
class doback extends AsyncTask < URL, Integer, Long > {

    protected Long doInBackground(URL...arg0) {
        try {

        } catch (Exception e) {

        }
        return null;
    }

    protected void onProgressUpdate(Integer...progress) {

    }

    protected void onPostExecute(Long result) {
        try {
            dialog.dismiss();
        } catch (Exception e) {
            e.printStackTrace();
            dialog.dismiss();
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:08:02.233

创建对话框如下

```
pd = ProgressDialog.show(this, "Loading..", "Please Wait..", true,false);
new Thread(new Runnable() {                 
            @Override
            public void run() { 
                                               // your code here
                    }
        }).start(); 
```

# jquery - Jquery - 带有 textarea div 的 youtube

> ID：10930401
> 
> 赞同：0
> 
> 时间：2012-06-07T10:56:06.823
> 
> 标签：jquery, youtube

我嵌入了一个 youtube 视频，在下面我有一个关于视频的 textArea 评论，我想要做的就是当我点击视频时，文本评论作为视频下方的一个小条消失。

视频结束或单击最小化栏后，文本评论再次出现。

[代码在 Jsfiddle 上](http://jsfiddle.net/dtjmsy/VSa9k/7/)

但是我无法获得 textarea 的事件，也无法获得 youtube 视频，我该如何实现呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:21:35.393

textarea click 事件未触发的原因是您`disabled="true"`已从 textarea 中删除了该属性。

关于你的 iframe，看看这篇文章： [Can jQuery listen to a click event on a youtube / vimeo movie？](https://stackoverflow.com/questions/2225213/can-jquery-listen-to-a-click-event-on-a-youtube-vimeo-movie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:34:56.010

在我的网站上，我使用了 youtube api。

我使用 onStateChange 事件来监听视频停止或开始，然后在一个函数中做我的事情，如下所示：

```
 <script>
        var tag = document.createElement('script');
        tag.src = "http://www.youtube.com/player_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var myPlayer;
        function onYouTubePlayerAPIReady() {
           myPlayer= new YT.Player('myYouTubeVid', {
           height: '315',
           width: '420',
           videoId: 'VHkcOKMFLoU',
           events: {
                   'onReady': onPlayerReady,
                   'onStateChange': onMyPlayerStateChange
                }

            });

      //Whatever you want to happen onStateChange happens here
      function onMyPlayerStateChange(event) {
            if (event.data == 1) {
                // Do Stuff
            }
        }
    </script> 
```

# c# - 如何对 ASP.NET Web API 上的操作过滤器进行依赖注入

> ID：10930402
> 
> 赞同：21
> 
> 时间：2012-06-07T10:56:08.320
> 
> 标签：c#, asp.net-web-api, dependency-injection, ioc-container, asp.net-web-api-filters

我真的被困在将依赖注入到 web api 的动作过滤器中的方法上。我有一个像这样的动作过滤器：

```
public class AuthorizationAttribute : ActionFilterAttribute
{
    public IApiKeyRepository Repository { get; set; }

    private Guid GetApiKey(string customerKey)
    {
        return Repository.GetApiKey(customerKey);
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {        
    }
} 
```

我想通过使用 Windsor 对属性存储库进行属性注入（但使用哪个 IoC 容器并不重要）

我确实想出了自定义 FilterProvider 但对我来说没有用，有人有解决方案或运行代码吗？将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T11:10:37.363

对于 WebAPI 和 AutoFac，您可以使用：

```
builder.RegisterWebApiFilterProvider(GlobalConfiguration.Configuration); 
```

文档在[这里](http://autofac.org/apidoc/html/764A7690.htm)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T13:22:39.090

您需要检查您的特定 IOC 实施。NInject 和 Autofac 等 IOC 容器通过注入公共属性具有某种类型的过滤器注入。温莎我不确定，但这里有一个链接可以创建一个可能对温莎有帮助的包装器：http: [//eagle081183.wordpress.com/2010/09/21/dependency-injection-with-asp-net-mvc-action -filters/](http://eagle081183.wordpress.com/2010/09/21/dependency-injection-with-asp-net-mvc-action-filters/)和另一篇直接解决温莎问题的文章：[http ://weblogs.asp.net/psteele/archive/2009/11/04/using-windsor-to-inject-dependencies-into-asp-net-mvc -actionfilters.aspx](http://weblogs.asp.net/psteele/archive/2009/11/04/using-windsor-to-inject-dependencies-into-asp-net-mvc-actionfilters.aspx)。

为了 NInject 和 Autofac 的完整性：

N注入：

*   [http://codeclimber.net.nz/archive/2009/02/10/how-to-use-ninject-to-inject-dependencies-into-asp.net-mvc.aspx](http://codeclimber.net.nz/archive/2009/02/10/how-to-use-ninject-to-inject-dependencies-into-asp.net-mvc.aspx)
*   [在动作过滤器中注入](https://stackoverflow.com/questions/9381557/ninject-in-an-action-filter)

自动法：

*   [ASP.NET MVC 3、动作过滤器和 Autofac 依赖注入](https://stackoverflow.com/questions/4695902/asp-net-mvc-3-action-filters-and-autofac-dependency-injection)

**编辑 - 附加选项**

`GlobalConfiguration.Configuration.DependencyResolver.GetService(...)`无论您使用哪种 IOC 容器，您都应该能够从任何过滤器中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:43:29.327

您可以使用 Ninject.Web.WebApi 程序集（显然使用 Ninject 作为 IoC）来完成这项工作。我建议通过[https://github.com/ninject/Ninject.Web.WebApi](https://github.com/ninject/Ninject.Web.WebApi)查看源代码和 SampleApplication 以了解它们是如何完成过滤器注入的。

# objective-c - 提高代码执行速度

> ID：10930406
> 
> 赞同：1
> 
> 时间：2012-06-07T10:56:12.317
> 
> 标签：objective-c, ios, multithreading, objective-c-blocks

我的代码有一些问题，不知道如何加快速度。这是我来自应用程序委托的代码（didFinishLaunchingWithOptions 方法体）：

```
initialized = [[NSUserDefaults standardUserDefaults] boolForKey:@"initialized"];

if (!initialized) {
     dispatch_queue_t queue = dispatch_get_global_queue(
                                                       DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(queue, ^{
        [DAO setDocumentsCacheDirectory:[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]];

        ....download images and files needed by application

        NSLog(@"%@", @"Finished downloadding images and files");

        [[NSNotificationCenter defaultCenter] postNotificationName:@"refreshView" object:nil];
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"initialized"];
    });
} 
```

在进行此异步下载时，我的视图中有旋转的 gif 图像。正如您所看到的，当所有这些下载完成时，我的视图控制器中触发了 refreshView 方法。

加载完成重新加载后，我有 NSLog(@"%@", @"Finished reloading.."); 所以我知道视图何时重新加载。

**问题 ：**

所以我在看控制台：

```
2012-06-07 12:52:34.898 TestApp[29800:13c03] Finished downloadding images and files
[Switching to process 29800 thread 0x13c03]
2012-06-07 12:52:34.909 TestApp[29800:13c03] Finished reloading.. 
```

文件下载似乎在一两秒内完成。然后，正如您通过时间戳看到的那样，视图重新加载完成后立即。

但事情是应用程序等待 5 秒左右，我不知道发生了什么以及发生了什么，然后视图才会重新刷新，尽管消息完成重新加载.. 大约 5 秒前显示。

你接下来会做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T11:03:57.670

您在后台队列中发布通知 - 如果这是触发 UI 更新的原因，则需要在主队列中完成：

```
dispatch_async(queue, ^{
    [DAO setDocumentsCacheDirectory:[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]];

    ....download images and files needed by application

    NSLog(@"%@", @"Finished downloadding images and files");

    dispatch_sync(dispatch_get_main_queue(), ^{
        [[NSNotificationCenter defaultCenter] postNotificationName:@"refreshView" object:nil];
    }

    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"initialized"];
}); 
```

请注意，我在`dispatch_sync`这里使用过......在`NSUserDefaults`主队列块完成之前不会更新。

# gdata - 谷歌文档列表 API 中的“字段”参数

> ID：10930413
> 
> 赞同：1
> 
> 时间：2012-06-07T10:56:32.243
> 
> 标签：gdata, gdata-api, google-docs-api

我还查看了 gdata api 参考和许多其他 api。他们中的大多数似乎都支持“字段”参数以过滤掉生成的 xml 中的一些所需列。 [https://developers.google.com/gdata/docs/2.0/reference#PartialResponse](https://developers.google.com/gdata/docs/2.0/reference#PartialResponse)

这有时非常有帮助。例如，我的 google 文档列表 api 为我拥有的 35 个文件生成了大约 260kB 的数据。恐怕这会使解析变慢，并会在我的服务器上造成不必要的负载。

我们可以期待一个功能吗？有没有办法仍然有过滤结果？我最感兴趣的是使用“列出所有文档”api - [https://docs.google.com/feeds/default/private/full?v=3](https://docs.google.com/feeds/default/private/full?v=3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:44:14.023

Documents List API 不支持部分响应，但如果您担心响应的大小，则应依赖 Changes 提要。

与其检索所有文档，不如仅在第一次检索它们，然后查询 Changes 提要以检测自给定时间戳以来哪些资源发生了更改：

[https://developers.google.com/google-apps/documents-list/#detecting_changes_to_resources](https://developers.google.com/google-apps/documents-list/#detecting_changes_to_resources)

# php - MySQL 查询在 PHP 中显示 die 错误

> ID：10930415
> 
> 赞同：3
> 
> 时间：2012-06-07T10:56:36.560
> 
> 标签：php, mysql

以下是我从registration.php 页面重定向的test.php 页面。除了 sql 查询，这里的一切都很好。所有警报标签都很好地显示了会话变量值，但此页面给出了“错误，插入查询失败”错误。尝试了所有可能性，例如查询中变量的引号等，但没有任何效果..请有人帮忙..

```
<?php
include "connect.php";
session_start();

$ser= $_SESSION['service'];
$comp=$_SESSION['comp'];
$yr= $_SESSION['year'];
$addr= $_SESSION['addr'];
$per= $_SESSION['per'];
$no= $_SESSION['no'];
$email= $_SESSION['email'];
$uname= $_SESSION['uname']; 
  echo "<script>alert('$ser')</script>";
  echo "<script>alert('$comp')</script>";
  echo "<script>alert('$yr')</script>";
  echo "<script>alert('$no')</script>";
  echo "<script>alert('$addr')</script>";
if($ser=='designing'){
   $ser=1;
}else if($ser=='webdev'){
   $ser=2;
}else{
   $ser=3;
}
echo "<script>alert('$ser')</script>";
$sql= "insert into login values 
      ('$uname','xxxx',$ser,'$comp',$yr,'$addr','$per',$no,'$email')";
mysql_query($sql) or die('Error, insert query failed');
?>

<span style="font-family:Tahoma; font-weight:bold; font-size:11px;color:#666666" 
      align=center>Your Registration is successful...<br/>Our team will contact you at
      the earliest...
</span> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T11:09:03.683

```
mysql_query() or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:03:08.177

非常有趣的公式。但是，我宁愿推荐这样的东西：

```
mysql_query($sql);
if (mysql_error()) die('Error, insert query failed'); 
```

如果您对它为何死亡感兴趣，那么：

```
mysql_query($sql);
if ($error = mysql_error()) die('Error, insert query failed with:' . $error); 
```

但请注意，这种错误对用户来说是不可见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-31T16:50:30.027

```
$sql= "insert into login values 
  ('$uname','xxxx',$ser,'$comp',$yr,'$addr','$per',$no,'$email')"; 
```

从变量中删除简单引号

```
 $sql= "insert into login values 
      ($uname, xxxx, $ser, $comp, $yr, $addr, $per, $no, $email)"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-31T16:52:49.157

```
$sql= "insert into login (field1, field2, ....) values 
```

('$uname','xxxx',$ser,'$comp',$yr,'$addr','$per',$no,'$email')";

另外请使用 BIND 而不是来自用户的未过滤数据。另外还有：请用`mysqli_*`代替旧的`mysql_*`

# tridion - 在 XSLT TBB 中将 tcmse:PublishBinary 与 XSLT 中介器一起使用时出错

> ID：10930419
> 
> 赞同：1
> 
> 时间：2012-06-07T10:56:54.723
> 
> 标签：tridion, tridion-2011, tridion2009

我正在研究 SDL Tridion 2011 SP1 中的 XSLT TBB。我正在使用从 Tridion 站点下载的 XSLT 中介。

我创建了一个 TBB 来检索图像，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:simple="uuid:c5e80ef4-9afd-421a-9205-d5af4c9f2c5c" 
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tcm="http://www.tridion.com/ContentManager/5.0"
    xmlns:tcmse=”http://www.tridion.com/ContentManager/5.1/TcmScriptAssistant”
    exclude-result-prefixes="msxsl simple">

    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

    <xsl:template match="/">
        <xsl:element name="p">
            <xsl:apply-templates select="tcm:Component/tcm:Data/tcm:Content/simple:Content"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="simple:Content">
        <xsl:element name="img">
            <xsl:attribute name="src">
                <xsl:value-of select="tcmse:PublishBinary(string(simple:photo/@xlink:href)))"/>
            </xsl:attribute>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

我收到错误

```
 [CDATA[Unable to retrieve rendered data from Component Presentation.]]>
</tcm:Line>
<tcm:Line ErrorCode="80040000" Cause="true">
    <![CDATA[
     Cannot find a script or an extension object associated with namespace
     'http://www.tridion.com/ContentManager/5.1/TcmScriptAssistant'.]] 
```

我知道这个问题是由于“http://www.tridion.com/ContentManager/5.1/TcmScriptAssistant”造成的。

任何人都可以提出克服它所需的修改吗？

我是否需要更改 TBB 或组件模板中的任何内容。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:17:01.230

tcmse:PublishBinary 不是由 XSLT 介体实现的。这是*默认*XSLT 模板引擎的功能，而不是中介引擎的功能。

要使用 XSLT Mediator 发布二进制文件，您可以执行以下操作：

```
<xsl:element name="img">
  <xsl:attribute name="src">
    <xsl:value-of select="simple:image/@xlink:href"/>
  </xsl:attribute>
</xsl:element> 
```

然后确保使用默认完成操作，或者至少使用“从 HTML 中提取二进制文件”和“在包中发布二进制文件”TBB

（取自[http://yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1/](http://yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T13:33:34.313

XSLT Mediator 允许您向 XSLT Extension 对象添加新方法，您可以在 XSLT Mediator 包中的“XSLT Template Helper”类中找到它。

为了使用它，您需要在 XSLT 模板中添加“http://www.sdltridion.com/ps/XSLTHelper”命名空间，例如 xmlns:ext="http://www.sdltridion.com/ps/XSLTHelper ”。

下面显示了 PublishBinary 方法的示例。

```
public string PublishBinary(string tcmUri)
{
  Component mComponent = new Component(new TcmUri(tcmUri), session);
  Binary binary = engine.PublishingContext.RenderedItem.AddBinary(mComponent);
  return binary.Url;
}

public string PublishBinary(string tcmUri, string sgTcmUri)
{
  Component mComponent = new Component(new TcmUri(tcmUri), session);
  StructureGroup sg = new StructureGroup(new TcmUri(sgTcmUri), session);
  Binary binary = engine.PublishingContext.RenderedItem.AddBinary(mComponent,sg);
  return binary.Url;
} 
```

你可以像这样使用这些方法。

```
<xsl:element name="img">
    <xsl:attribute name="src">
        <xsl:value-of select="ext:PublishBinary(string(@xlink:href))" />
    </xsl:attribute>
</xsl:element> 
```

# jquery - 如何使用一个值（单击 li 时由 .text() 获取）作为选择器来隐藏某些 div

> ID：10930420
> 
> 赞同：5
> 
> 时间：2012-06-07T10:56:58.447
> 
> 标签：jquery

我有一个 ul li 列表，例如

```
<ul class="dropdown-menu" id="dropdown">
   <li><a id='l1' href='javascript:void(0);'>batch1</a></li>
   <li><a id='l2' href='javascript:void(0);'>batch2</a></li>
   <li><a id='l3' href='javascript:void(0);'>batch3</a></li>
   <li><a id='l4' href='javascript:void(0);'>batch4</a></li>
   <li><a id='l5' href='javascript:void(0);'>batch5</a></li>
   <li><a id='l6' href='javascript:void(0);'>batch6</a></li>
</ul> 
```

现在，我可以获取每个 li 的文本值，问题是，我不能将文本值用作选择器。我想做的是：我有一些 div（id 是“batch1，batch2...batch6”），如果单击 li，我想隐藏它（单击 li 除外）。代码是=

html:

```
<div id="batch1"></div> 
<div id="batch2"></div> ...... 
```

jQuery：

```
$(document).ready(function(e) {
    $('body').click(function(event) {

    if($(event.target).is('#l1')) {
       var id = "'#"+$('#l2').text()+"'";
       $(id).hide();
    }
});
}); 
```

我应该怎么办。我正在尝试大约 24 小时，但仍然在黑暗中。并提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:20:08.950

您应该为所有元素添加一个公共类`#batch1`，以便您可以一次将它们全部定位。`#batch2`

然后使用 id 作为例外...

html

```
<div id="batch1" class="batch"></div>
<div id="batch2" class="batch"></div> 
```

javascript

```
$('#dropdown').on('click','a', function(e){
    e.preventDefault();
    var id = '#' + $.trim( $(this).text() ); // create the id based on the text

    $('.batch').hide(); // hide all batch elements
    $(id).show(); // show the one that corresponds to the clicked li
}); 
```

**演示在** [http://jsfiddle.net/A5Vxm/](http://jsfiddle.net/A5Vxm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:00:48.770

```
$('body').click(function(event) {
    if(event.target.id  == 'l1' ) {
       var id = "#" + $.trim( $('#l2').text() );
       $(id).hide();
    }
});​ 
```

**[演示](http://jsfiddle.net/SmUec/3/)**

但是，如果您的 div 是动态的，这意味着在页面加载后添加到 DOM 中，然后尝试

```
$('body').on('click', 'a', function(event) {
        event.preventDefault();
        if(event.target.id  == 'l1' ) {
           var id = "#" + $.trim( $('#l2').text() );
           $(id).hide();
        }
    });​ 
```

# sql-server - MSSQL 选择前 10 名但包含具有重复值的列

> ID：10930422
> 
> 赞同：0
> 
> 时间：2012-06-07T10:57:04.280
> 
> 标签：sql-server

嗨，我正在尝试通过使用分数来获得比赛的前十名。问题是当有两个用户得分相同时，例如，我只获得前 9 名有效（如果有两个前 3 名得分，则应该返回 11 条记录，其余的记录是唯一的）......

我不确定如何解决这个问题，并希望得到一些指导。

提前致谢，

伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:14:47.890

> 如果有两个前 3 分，则应返回 11 条记录

听起来你想使用[`dense_rank`](http://msdn.microsoft.com/en-us/library/ms173825).

这将为您提供前 10 名中的所有行。

```
select T.Score
from (
       select Score,
              dense_rank() over(order by Score) as rn
       from YourTable
     ) T
where T.rn <= 10 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/71913)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:06:32.197

你想这样做：

```
SELECT TOP(10) WITH TIES
FirstName, LastName, score
FROM winners
ORDER BY score; 
```

有关详细信息，请参阅[TOP (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189463.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:59:44.067

顶级语法允许联系

```
[ 
    TOP (expression) [PERCENT]
    [ WITH TIES ]
] 
```

你试过吗？

[http://msdn.microsoft.com/en-us/library/ms189463.aspx](http://msdn.microsoft.com/en-us/library/ms189463.aspx)

# javascript - 使用 jquery 在某些单词下划线

> ID：10930424
> 
> 赞同：2
> 
> 时间：2012-06-07T10:57:06.543
> 
> 标签：javascript, jquery, css

我有以下内容：

**HTML：**

```
<span id="plus-shipping">+ Shipping</span> 
```

**CSS：**

```
span#plus-shipping {
    bottom: 25px;
    font-weight: bold;
    padding-left: 10px;
    position: relative;
    text-decoration: underline;
} 
```

我怎样才能设置下划线，所以它只是运输而不是+

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T11:00:10.223

最简单的选择是将'shipping'字符串包装在另一个标签中，例如`span`并将下划线仅应用于该标签`span`：

```
#plus-shipping > span {
    text-decoration: underline;
}

<span id="plus-shipping">+ <span>Shipping</span></span> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5vEFF/)。

我还尝试使用 CSS 生成`::before`的内容来生成`+`字符，不幸的是（至少在 Chrome 18/Win XP 中）它从其“父”`#plus-shipping`元素继承了下划线，即使`text-decoration: none`已明确声明也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T11:04:06.617

**工作演示**有点不同： http: [//jsfiddle.net/d74Tn/](http://jsfiddle.net/d74Tn/)和大卫的另一个演示在这里：http: [//jsfiddle.net/davidThomas/d74Tn/1/](http://jsfiddle.net/davidThomas/d74Tn/1/)

可以使用`replace`API​​然后添加`text-decoration: underline`

我希望它会帮助你。

**代码**

```
var $el = $('#plus-shipping');
 $el.html( $el.html().replace(/Shipping/g, '<span style="text-decoration: underline">Shipping</span>') );
​ 
```

# javascript - jQuery dataTables 使用 fnOpen() API 函数添加多个可折叠行

> ID：10930427
> 
> 赞同：5
> 
> 时间：2012-06-07T10:57:25.230
> 
> 标签：javascript, jquery, datatable, datatables

我正在使用 jQuery dataTables 插件为我们的应用程序构建高级表格。要求之一是具有“可折叠”行（而不是组！）：例如，行代表活动，它们可能有子活动。子行的结构（在基本情况下）与父表中的相同 - 相同的单元格，相同的数据类型。

但是，子行不应该影响父表本身：我的意思是，每页的行数应该保持不变，子行不应该与父行分开排序，它们应该始终保持绑定。因此我不能为此使用**fnAddData()** API func。

另一个棘手的要求是具有多级可折叠行的可能性（例如，子广告系列的子广告系列等）

我为此使用了**fnOpen()** API 函数，它允许“打开”任何行，向其附加一个子块，并且您通常可以在其中插入任何您想要的内容。它在 dataTables 1.8.2 中工作得很好，我使用这样的代码来生成子行：

```
$(childRowData).each(function(){
    row = $(oTable.fnOpen(row.get(0), $(this), "child_row"));
    $(row).addClass('child_row');
}); 
```

通常，它“打开”当前行（如上定义），在子行中插入数据，然后在循环中“打开”子行，向其添加子行，等等。

但从 dataTables 1.9.0 开始，它看起来只允许“打开”父行，并且只允许执行一次。

当然，我可以创建一个子表，对其应用**$.dataTable()**并将其插入子行，但这似乎是一个有点蹩脚且昂贵的解决方案，尤其是当我们可能有 3-4 级深度时。

有没有其他方法可以在 dataTables 中实现可折叠行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-14T08:36:11.570

数据表已以某种方式更新，现在将子行添加到父行非常简单：[http://datatables.net/reference/api/row().child()](http://datatables.net/reference/api/row%28%29.child%28%29)

不太明显的一件事是，如果您想对子行使用与父行相同的布局，则需要使用 jquery 选择器来传递节点而不是字符串（写在文档中，但是我第一次错过了）。

这样做是正确的：

```
.child(
    $(
        '<tr>'+
            '<td>'+rowIdx+'.1</td>'+
            '<td>'+rowIdx+'.2</td>'+
            '<td>'+rowIdx+'.3</td>'+
            '<td>'+rowIdx+'.4</td>'
        '</tr>'
    )
) 
```

但这样做是错误的：（它会将您的“tr”插入到一个“td”中，其 colspan 与您的表格大小相同，并且显然会破坏列对齐）

```
.child(
    '<tr>'+
        '<td>'+rowIdx+'.1</td>'+
        '<td>'+rowIdx+'.2</td>'+
        '<td>'+rowIdx+'.3</td>'+
        '<td>'+rowIdx+'.4</td>'
    '</tr>'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:53:42.050

当您创建具有子子项的子行时，您可能最好推出自己的解决方案。几周前我正在使用数据表做一些类似的事情，这是我能想到的最好的。

# android - 如何在 Android 模拟器上运行 Sencha 应用程序

> ID：10930430
> 
> 赞同：0
> 
> 时间：2012-06-07T10:57:36.307
> 
> 标签：android, android-emulator, sencha-touch, extjs, sencha-touch-2

我在命令行中使用以下 Sencha 命令创建了一个应用程序，如下所示

```
sencha app create mysenchaApp /path/to/www/mysenchaApp 
```

这给了我如下

```
Code:

[INFO] Created file C:\path\to\www\mysenchaapp\.senchasdk
[INFO] Created file C:\path\to\www\mysenchaapp\index.html
[INFO] Created file C:\path\to\www\mysenchaapp\app.js
[INFO] Created file C:\path\to\www\mysenchaapp\packager.json
[INFO] Created file C:\path\to\www\mysenchaapp\app.json
[INFO] Created file C:\path\to\www\mysenchaapp\app\view\Main.js
[INFO] Copied dir: C:\path\to\www\mysenchaapp\sdk\src
[INFO] Copied dir: C:\path\to\www\mysenchaapp\sdk\resources
[INFO] Copied dir: C:\path\to\www\mysenchaapp\resources\icons
[INFO] Copied dir: C:\path\to\www\mysenchaapp\resources\loading
[INFO] Copied dir: C:\path\to\www\mysenchaapp\sdk\command
[INFO] Copied file: C:\path\to\www\mysenchaapp\sdk\microloader\development.js
[INFO] Copied file: C:\path\to\www\mysenchaapp\sdk\microloader\testing.js
[INFO] Copied file: C:\path\to\www\mysenchaapp\sdk\microloader\production.js
[INFO] Copied file: C:\path\to\www\mysenchaapp\sdk\version.txt
[INFO] Copied file: C:\path\to\www\mysenchaapp\sdk\sencha-touch.js
[INFO] Copied file: C:\path\to\www\mysenchaapp\sdk\sencha-touch-all.js
[INFO] Created file C:\path\to\www\mysenchaapp\resources\sass\app.scss
[INFO] Created file C:\path\to\www\mysenchaapp\resources\sass\config.rb
[INFO] Copied file: C:\path\to\www\mysenchaapp\resources\css\app.css 
```

然后我修改了 packager.json 文件，使其在模拟器上运行：

```
Code:

/**
     * @cfg {String} applicationName
     * @required
     * This is the name of your application, which is displayed on the  device when the app is installed. On IOS, this should match
     * the name of your application in the Apple Provisioning Portal.
     */
    "applicationName":"My Application",

    /**
     * @cfg {String} applicationId
     * This is the name namespace for your application. On IOS, this  should match the name of your application in the Apple Provisioning  Portal.
     */
    "applicationId":"com.mycompany.myAppID",

    /**
     * @cfg {String} versionString
     * @required
     * This is the version of your application.
     */
    "versionString":"1.0",

    /**
     * @cfg {String} iconName
     * This is file name of your icon. This should be in the same directory of this configuration file.
     *
     * For iOS, please refer to their documentation about icon sizes:
     * https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html
     *
     * For Android, please refer to the Google Launcher icons guide:
     * http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html
     */
    "iconName":"resources/icons/Icon~ipad.png",

    /**
     * @cfg {String} inputPath
     * @required
     * This is location of your Sencha Touch 2 application, relative to this configuration file.
     */
    "inputPath":"build/native",

    /**
     * @cfg {String} outputPath
     * @required
     * This is where the built application file with be saved.
     */
    "outputPath":"build/",

    /**
     * @cfg {String} configuration
     * @required
     * This is configuration for your application. `Debug` should always be used unless you are submitting your app to an online
     * store - in which case `Release` should be specified.
     */
    "configuration":"Debug",

    /**
     * @cfg {String} platform
     * @required
     * This is the platform where you will be running your application. Available options are:
     *  - iOSSimulator
     *  - iOS
     *  - Android
     *  - AndroidEmulator
     */
    "platform":"AndroidEmulator",

    /**
     * @cfg {String} deviceType
     * @required
     * This is device type that your application will be running on.
     *
     * If you are developing for Android, this is not necessary.
     *
     * Available options are:
     *  - iPhone
     *  - iPad
     *  - Universal
     */
    "deviceType":"Universal",

    /**
     * @cfg {String} certificatePath
     * This is the location of your certificate.
     * This is required when you are developing for Android or you are developing on Windows.
     */
    "certificatePath":"/path/to/certificate.file",

    /**
     * @cfg {String} certificateAlias
     * This is the name of your certificate.
     *
     * IF you do not specify this on OSX, we will try and automatically find the certificate for you using the applicationId.
     *
     * This can be just a simple matcher. For example, if your  certificate name is "iPhone Developer: Robert Dougan (ABCDEFGHIJ)", you
     * can just put "iPhone Developer".
     *
     * When using a certificatePath on Windows, you do not need to specify this.
     */
    "certificateAlias":"",

    /**
     * @cfg {String} sdkPath
     * This is the path to the Android SDK, if you are developing an Android application.
     */
    "sdkPath":"C:\Program Files\Android\android-sdk",

    /**
     * @cfg  androidAPILevel
     * This is android API level, the version of Android SDK to use, you  can read more about it here:  http://developer.android.com/guide/appendix/api-levels.html.
     * Be sure to install corresponding platform API in android SDK manager (android_sdk/tools/android)
     */
    "androidAPILevel":"8",

    /**
     * @cfg  orientations
     * @required
     * This is orientations that this application can run.
     */
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

然后我在 Sencha 命令行工具上运行以下命令

```
sencha app build native

Code:

C:\path\to\www\mysenchaapp>sencha app build native
[INFO] Deploying your application to C:\path\to\www\mysenchaapp\build\package
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/loading
[INFO] Resolving your application dependencies...
[INFO] Found 139 dependencies. Concatenating all into app.js...
[INFO] Processed sdk/sencha-touch.js
[INFO] Minifying sdk/sencha-touch.js
[INFO] Processed app.js
[INFO] Minifying app.js
[INFO] Minifying resources/css/app.css
[INFO] Minified sdk/sencha-touch.js
[INFO] Minified app.js
[INFO] Minified resources/css/app.css
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Packaging your application as a native app...

C:\path\to\www\mysenchaapp 
```

现在我正在尝试在 android 模拟器上运行这个应用程序，我在 Eclipse 中创建了一个 Android 应用程序。我不能这样做。

我想知道如何将我的 Sencha 应用程序添加到这个 Android 以在模拟器上运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:01:28.823

仅当您想在 Eclipse 中的 android 模拟器中运行 sencha 应用程序并且您对电话间隙没有异议时，我的回答才是正确的。

如果您使用 eclipse 创建原生 android 应用程序，那么在您的 android 模拟器中运行 sencha 应用程序非常简单。

我可以向你展示一些简单的步骤。

1）我建议您使用 MDS 鼓掌电话间隙[http://wiki.phonegap.com/w/page/34483744/PhoneGap%20Eclipse%20PlugIn%20for%20Android](http://wiki.phonegap.com/w/page/34483744/PhoneGap%20Eclipse%20PlugIn%20for%20Android) 来安装 phonegap，因为您可能随时需要它。

2）一旦您完成安装，您将在顶部看到电话间隙图标。

3）点击它来创建一个最小的电话间隙项目。

4）然后你会看到索引文件没有必要的东西。你可以替换索引文件如下

```
 <!DOCTYPE html>
       <html>
        <head>
        <title>The Sencha Touch List Component</title>
       <link rel="stylesheet" href="app.css" type="text/css">

       <script type="text/javascript" src="touch/sencha-touch-all.js"></script>
       <script type="text/javascript" charset="utf-8">
       Ext.Loader.setConfig({
       enabled: true,
       paths: { 'Ext': 'touch/src' }
       });
      </script>
     <script type="text/javascript" src="app.js"></script>
      </head>
      <body></body>
      </html> 
```

5）然后在 assets 文件夹中，您可以创建创建 sencha 应用程序所需的文件夹。如 app 文件夹、styles 文件夹、touch 文件夹和其他必要的东西，如 css 文件和 app.js。

6）你可以检查配置是否正确，只需在eclipse中检查web浏览器中的index.html文件即可。

7）如果没问题，那么你可以在你的安卓模拟器中运行应用程序，就像你为你的原生应用程序做的那样。如果您想按照自己的方式进行操作，请点击此链接[http://docs.sencha.com/touch/2-0/#!/video/native-apis-from-touch](http://docs.sencha.com/touch/2-0/#!/video/native-apis-from-touch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:14:42.923

在 packager.json 中将您的平台更改为“Android”。

“AndroidEmulator”不起作用。

我在这个上两次用头撞墙！

# java - 如何将单个对象与多个 RMI 服务器绑定

> ID：10930431
> 
> 赞同：0
> 
> 时间：2012-06-07T10:57:39.640
> 
> 标签：java, rmi

我是 RMI 技术的新手，面临以下问题。

我们有多个相同类型的设备连接到本地系统，每个设备上的 RMI 服务在不同的端口上运行。

当我们尝试通过 RMI 将单个设备连接到本地系统时，它工作正常。当我们尝试将第二台设备连接到本地系统时，我们收到如下错误 -

您能帮我们解决以下问题吗？

提前致谢。

```
 java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: 
        java.net.ConnectException: Connection refused: connect
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
        at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
        at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
        at java.rmi.Naming.rebind(Naming.java:160)
        at com.rmi.server.RMIServer.exportAndBindObject(Unknown Source) 

```

**演示.java**

```
 this.myRMIServer = new RMIServer(this.RMIServerPort,this.RMIClientPort, new RMISocketFactory());
    this.helloWorld = new HelloWorld();
    this.myRMIServer.exportObject(this.helloWorld);
    this.myRMIServer.exportAndBindObject(this.rmiServiceName, this.helloWorld); 
```

**RMIServer.java**

```
 public RMIServer(int port, int rmiPort, java.rmi.server.RMISocketFactory sf)
            throws RemoteException {
        this.sf = sf;
        this.rmiPort = rmiPort;
        this.regPort = port;
        synchronized (this) {
            if (registry == null)
                registry = LocateRegistry.createRegistry(port);
        }
    }

    public void exportAndBindObject(String name, RemoteObject ro)
            throws RemoteException, MalformedURLException {
        exportObject(ro);
        String url = "//127.0.0.1:" + this.regPort + "/" + name;
        Naming.rebind(url, ro);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:58:46.703

您正在创建注册表，但在找不到它的地方`port`绑定到它。`regPort`

我不知道`this.RMIClientPort`可能的目的是什么。我会摆脱它。RMI 服务器无需考虑客户端端口。

此外，您要导出`HelloWorld`对象两次：一次在您调用的 Demo.java 中`exportObject()`，一次在`RMIServer.exportAndBindObject()`您再次调用 exportObject() 的位置。因此，其中一项操作一定失败了，否则它不会导出任何东西。所以你的`exportObject()`方法有问题。

# java - 解析外部依赖的类路径

> ID：10930433
> 
> 赞同：0
> 
> 时间：2012-06-07T10:57:44.297
> 
> 标签：java, jar, classpath, manifest, noclassdeffounderror

我有一个外部库（只有一个名为 org.vinay.dep.DependedClass 的类文件）。它位于其包目录结构中，并且目录 org 位于桌面上。

我有一个名为 a.jar 的 jar，它依赖于我的外部库。

执行**`jar -tf a.jar`**给出以下输出，

```
META-INF/                
META-INF/MANIFEST.MF     
com/      
com/os/          
com/os/hw/          
com/os/hw/HelloWorld.class       
com/os/hw/HwUtil.class 
```

我尝试以两种方式运行 jar

1.  **`java -classpath C:/Users/vinay/Desktop -jar a.jar`** manifest.mf 条目为

    Manifest-Version: 1.0
    Created-By: 1.6.0_05 (Sun Microsystems Inc.)
    Main-Class: com.os.hw.HelloWorld

    并得到了 DependedClass 的**NoClassDefFoundError**

2.  **`java -jar a.jar`** 如下更改清单条目后

    清单版本：1.0
    创建者：1.6.0_05 (Sun Microsystems Inc.)
    主类：com.os.hw.HelloWorld
    类路径：C:/Users/vinay/Desktop

    但是这次它为**HelloWorld** 类本身抛出了 NoClassDefFoundError

当我将外部库打包到 jar 中并在清单文件中使用 jar 名称作为 Class-Path 条目时，它可以工作。有没有办法在不将外部库打包到 jar 的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:07:07.253

我认为您不能将-classpath 和-jar 结合使用。你可以这样做：

```
java -cp C:/Users/vinay/Desktop;a.jar com.os.hw.HelloWorld 
```

这假设 a.jar 在当前文件夹中（或者您也可以添加 a.jar 的完整路径）。

将清单的 Class-Path 条目硬编码到本地计算机上的路径绝不是正确的解决方案:)

# asp.net - 如何建立评论页面？

> ID：10930436
> 
> 赞同：1
> 
> 时间：2012-06-07T10:57:58.447
> 
> 标签：asp.net, database, dynamic

如何构建一个页面，访问者可以在页面中添加评论？我知道使用 db 是可能的，问题是 - 我可以在没有 db 的情况下做到这一点吗？也许通过将新元素保存到正确位置的现有 .aspx 文件中（在插入最后一条评论之后），我该怎么做？

还有其他优雅的想法如何实现吗？

在这种情况下我不使用数据库的原因是为了简单和快速加载页面 - 我的方法是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:17:44.587

> 我可以在没有分贝的情况下做到这一点吗？

您可以用脚控制汽车，但这并不一定是个好主意。使用数据库有很多好处，例如安全性、并发性和性能。您应该将此视为为工作选择正确工具的机会，而不是重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:00:34.730

不！

您需要将数据存储在某处并稍后查询。你希望怎么做？您肯定需要在某个地方存储该信息，而数据库是最佳选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:08:58.170

我还建议使用数据库，我们需要为一个流量不多的小型网站制作低成本、简单和快速的东西。

所以这就是我建议你的。[使用File.AppendText](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)将您的推荐附加到文件中，然后使用此命令在您希望查看此评论的位置包含该文件。

```
<!--#include file="CommentsA.htm"--> 
```

不要在 aspx 文件中附加您的注释，因为这可能会导致重新编译您的站点。

正如我再次说的，这是一个简单的想法，用于快速和低成本的东西。您需要在这里处理通过 javascript 注入和垃圾邮件进行的攻击，而您也无权批准/拒绝消息。

这肯定是更快和最简单的方法 - 但您无法控制评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:54:34.440

我仍然建议使用数据库，但这基本上是我按照自己的方式做的思考过程。我从来没有这样做过，所以它只是理论而不是代码，可能需要有人添加。

创建一个 div，您希望在您的 aspx 页面上发表评论，您可以将此 div 命名为“comments”或其他名称。不过这里只有评论。您要做的是制作一个通用表单，该表单可能有一个用于评论的文本区域和一个提交按钮。当按下提交按钮时，它会触发一个事件，该事件使用流写入器直接写入文本文件。您需要能够遍历文本文件的行，直到您点击 div，然后它将 html 写入文本文件并保存。这意味着当你使用你的streamwriter时，你将已经为评论的格式设置了所有代码，并且只是获取评论的用户名和文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T11:26:51.633

asp.net 网站有一组很棒的教程，从静态页面转移到数据驱动页面：

您可能希望沿着微软描述为“网页”的路线走下去，这是它的大兄弟 web-forms 和 mvc-framework 的更简单但更基本的版本。

这是“网页”数据教程的直接链接： [http ://www.asp.net/web-pages/tutorials/data](http://www.asp.net/web-pages/tutorials/data)

查看这些教程将帮助您确定最适合您的教程。

但你不妨看看：

[http://www.asp.net/web-pages](http://www.asp.net/web-pages)

[http://www.asp.net/web-forms](http://www.asp.net/web-forms)

[http://www.asp.net/mvc](http://www.asp.net/mvc)

# jsp - Liferay 可以发布到另一台服务器吗？

> ID：10930437
> 
> 赞同：1
> 
> 时间：2012-06-07T10:57:59.683
> 
> 标签：jsp, web, liferay, portal, multiserver

这是我的liferay系列的第三个问题。:-) 抱歉，但这是一个不同的问题。

我想在我的服务器上为体育俱乐部提供服务。俱乐部应使用该系统管理其内部沟通。此外，他们应该在公共网站上为所有客人发布新闻、内容等。为了获得全部利益，俱乐部必须将其域名转移到我的服务器。为了避免这种情况，我想到了发布到不同的服务器。例如：俱乐部使用我的系统进行内部沟通。如果俱乐部想要更改公共内容，他们可以在我的系统中进行更改并将其发布到他们自己的服务器上。

另一种解决方案是将我的系统分发给所有俱乐部。在这种情况下，每个俱乐部都需要一台带有 java vm 的服务器。:-(

**我想将这些俱乐部的门户网站和网站结合起来。**有人有想法吗？

非常感谢你。

* * *

一台物理机器上的每个俱乐部对我来说是不可能的。想象一下一个大型体育俱乐部的网站。如果我将域转移到我的服务器，我必须管理他所有的电子邮件地址等等。:-(

因此，我正在寻找一种解决方案，将我的门户（内部部分）托管在我的服务器上，并将外部部分（公共网站）托管在俱乐部的服务器上。我想到了一种同步机制。所以我可以将公共站点同步到俱乐部服务器。但我认为这行不通，因为公共 liferay 站点也需要 JVM。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:53:06.563

您想查看暂存：这可以在本地（相同的服务器，轻松测试您上面概述的场景）和远程使用，您有一个用于设置所有内容的服务器和一个从中获取数据的生产服务器编辑登台服务器。它记录在[本章](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/field-type-variable-name)中（向下滚动一点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:05:40.873

Liferay 提供门户实例和门户站点的功能。在单个生命周期服务器中，您可以创建许多门户实例和站点。

在您的情况下，您可以为不同的体育俱乐部创建不同的网站。所有体育俱乐部的内容都有这个范围。

体育俱乐部的成员将拥有自己的公告、留言板、日历等。

此外，可能会有供客人使用的公共区域。

另外，请查看用于门户的分布式架构的[WSRP 。](http://www.liferay.com/community/wiki/-/wiki/Main/WSRP)

希望这可以帮助

# java - Guava根据另一个列表排序列表的方式？

> ID：10930443
> 
> 赞同：8
> 
> 时间：2012-06-07T10:58:35.480
> 
> 标签：java, collections, guava

我已经`List<Integer>`组成了我的用户的 ID。在数据库查询之后，我正在检索`List<User>`. 我想根据第一个 ID 列表订购此列表。`List<User>`可能不包括某些 Id。排序此列表的番石榴方式是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T11:50:23.913

使用 Guava 的完全“功能性”方式将`Ordering#explicit()`与`Ordering#onResultOf()`

```
public class UserService {

    @Inject private UserDao userDao;

    public List<User> getUsersWithIds(List<Integer> userIds) {
        List<User> users = userDao.loadUsersWithIds(userIds);
        Ordering<User> orderById = Ordering.explicit(userIds).onResultOf(UserFunctions.getId());
        return orderById.immutableSortedCopy(users);
    }

} 
```

您可以内联声明一个匿名函数，但我喜欢在单独的类中将我的函数声明为静态工厂方法，以获得更简洁的代码（Java 函数声明的冗长隐藏在实用程序类中）：

```
/**
 * Static factory methods to create {@link Function}s for {@link User}s.
 */
public final class UserFunctions {
    private UserFunctions() { /* prevents instantiation */ }

    /**
     * @return a {@link Function} that returns an {@link User}'s id.
     */
    public static Function<User, Integer> getId() {
        return GetIdFunction.INSTANCE;
    }

    // enum singleton pattern
    private enum GetIdFunction implements Function<User, Integer> {
        INSTANCE;

        public Integer apply(User user) {
            return user.getId();
        }
    }

} 
```

* * *

正如@Arne 在评论中提到的，这可以在 Java 8 中简化，使用方法引用而不是`UserFunctions`类：

```
public class UserService {

    @Inject private UserDao userDao;

    public List<User> getUsersWithIds(List<Integer> userIds) {
        List<User> users = userDao.loadUsersWithIds(userIds);
        Ordering<User> orderById = Ordering.explicit(userIds).onResultOf(User::getId);
        return orderById.immutableSortedCopy(immutableSortedCopy(users));
    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-07T11:12:06.173

我不认为番石榴有什么特别的东西可以做到这一点。但这只是编写这个比较器的问题：

```
Collections.sort(userList, new Comparator<User>() {
    @Override
    public int compare(User u1, User u2) {
         int i1 = idList.indexOf(u1.getId());
         int i2 = idList.indexOf(u2.getId());
         return Ints.compare(i1, i2);
    }
} 
```

现在想来，也可以这样实现：

```
final Ordering<Integer> idOrdering = Ordering.explicit(idList);
Collections.sort(userList, new Comparator<User>() {
    @Override
    public int compare(User u1, User u2) {
         return idOrdering.compare(u1.getId(), u2.getId());
    }
} 
```

这可能更有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T11:57:14.017

其他人已经使用 Guava 回答了您的问题。这是一个[函数式 Java](http://functionaljava.org/)答案。

请注意，您必须使用库中的不可变数据结构才能利用所有优点。

```
F<User, Integer> indexInIdList = new F<User, Integer>() {
  public Integer f(User u) {
    return idList.elementIndex(Equal.intEqual, u.getId()).toNull();
  }
};
userList.sort(Ord.intOrd.comap(indexInIdList)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T20:29:01.340

使用 Google Guava 更简单的答案

```
class Form {
  public Integer index; // for simplicity, no setter/getter included
}

List<Form> forms = ... // list instances, each of each with values for index

// ordering of forms by the ui sort index.
private static final Ordering<Form> sorter = Ordering.natural().onResultOf(new Function<Form, Integer>() {

    @Override
    public Integer apply(Form form) {
       return form.index;
    }
});

private List<Form> sortForms(List<Form> forms) {
    return sorter.sortedCopy(forms);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T14:42:34.237

以下是如何使用 Java 8 lambdas 做到这一点。

```
List<Integer> ids = ...; List<User> users = ...;
//map ids to their list indices, to avoid repeated indexOf calls
Map<Integer, Integer> rankMap = IntStream.range(0, ids.size()).boxed()
    .collect(Collectors.toMap(ids::get, Function.identity()));
//sort on the id's position in the list
users.sort(Comparator.comparing(u -> rankMap.get(u.id()))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-31T12:42:49.260

几乎没有找到 Kotlin 的答案，所以我在这里发布。

`list2.sortedBy { Pair(it, list1.indexOf(it.typeOfList1)).second }`

我写的完整的 TU 是为了找到答案：

```
 enum class Categorie { UNO, DOS, TRES, QUATROS }
data class Song(val name: String, val categorie: Categorie)

fun main() {
    val categories = arrayListOf(Categorie.QUATROS, Categorie.DOS, Categorie.TRES, Categorie.UNO)
    val songs = arrayListOf(
        Song("s1", Categorie.DOS),
        Song("s2", Categorie.DOS),
        Song("s3", Categorie.UNO),
        Song("s4", Categorie.QUATROS),
        Song("s5", Categorie.TRES),
        Song("s6", Categorie.QUATROS)
    )

    val expectedSortedListOfSongs = arrayListOf(
        Song("s4", Categorie.QUATROS),
        Song("s6", Categorie.QUATROS),
        Song("s1", Categorie.DOS),
        Song("s2", Categorie.DOS),
        Song("s5", Categorie.TRES),
        Song("s3", Categorie.UNO)
    )

    val sortedList: List<Song> = songs.sortedBy { Pair(it, categories.indexOf(it.categorie)).second }

    println("isValid=${sortedList == expectedSortedListOfSongs}")
} 
```

# flash - 编辑 Flash 嵌入属性

> ID：10930449
> 
> 赞同：0
> 
> 时间：2012-06-07T10:59:17.377
> 
> 标签：flash

我有一个下拉菜单，如果我设置参数标记属性 wmode="transparent"，它会不断出现在 IE、chrome 中嵌入的 Flash 视频后面，那么它工作正常。但在我的页面中，flash 视频会变得动态。加载后我必须进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:14:58.390

如果您嵌入来自 YouTube 的视频，您可以`&wmode=opaque`在 URL 的末尾添加。其他网站应该有类似的选择......

顺便说一句，wmode`opaque`更好/更安全。wmode`transparent`仍然有很多问题（不确定全屏模式是否适用于`transparent`wmode）。

# php - 无限循环的实际用法是什么：while（true）？

> ID：10930456
> 
> 赞同：0
> 
> 时间：2012-06-07T10:59:46.510
> 
> 标签：php, infinite-loop

有谁知道在哪些情况下无限循环可能在 PHP 中有用？

*例子 ：*

```
<?php
  while(true)
  {
    #..
  }
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:32:45.083

很少的用例。

1）如果您正在编写一个程序以允许输入数据只要用户想要，那么让脚本循环 30,000 次甚至 300,000,000 次是行不通的。相反，代码应该永远循环，不断地接受用户输入，直到用户按下 Ctrl-C 结束程序。
2）如果您有一些后台进程持续监控您的服务器。
3）当您的服务器脚本正在侦听套接字以进行连接时，可能是一个很好的用法。
4）视频游戏编程大量使用它们。

我与上面发布的一些答案不同，这些答案说“无限循环是无用的”。

[http://devzone.zend.com/209/writing-socket-servers-in-php/](http://devzone.zend.com/209/writing-socket-servers-in-php/) - 使用无限循环的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:37:13.410

嘿，如果您想创建一种服务类型的东西，这些是非常重要的，可能是您想监视服务器空间，我的意思是您想查看是否添加了任何新文件等。然后您可以使用这样的循环并24*7 监控。

我经常在 c++ 中使用它，在 php 中也可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:05:36.437

这并不是真正的 PHP 特定的。当您事先不知道需要做的工作量时，无限循环很有用。

1.  确实永远运行直到终止的作业。
2.  等待某事发生并中断循环以继续执行代码的作业。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T11:08:16.650

1.  在执行另一个操作之前需要满足特定条件的作业。
2.  应该运行直到被用户终止的作业

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T11:09:24.867

它几乎没用。没错，它可以与 Oleg V. Volkov 提到的 break 一起使用，但是您必须将条件添加到块中，但是 while 是一个带有条件本身的循环。从我的角度来看，这是错误的用法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T11:10:59.357

无限循环允许您遍历未知的数据集，直到终止（刹车）。或者您正在执行一些需要运行直到被用户或其他人打断的操作。这完全取决于您需要做什么以及您将如何解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T11:13:11.910

两种情况：

*   PHP 用于服务器端：通常**无用**，因为它会阻止页面加载，这不是您想要的用户。
*   PHP用于客户端（本地程序）：由于之前发布的原因（等待用户需求退出循环）有用。

# python - Django：如何正确处理数据库连接错误

> ID：10930459
> 
> 赞同：1
> 
> 时间：2012-06-07T11:00:00.763
> 
> 标签：python, mysql, django

我有一个桌面应用程序，它将 POST 请求发送到 django 应用程序存储结果的服务器。数据库服务器和 Web 服务器不在同一台机器上，有时连接会在很短的时间内丢失，但会导致某些请求出现连接错误：

> OperationalError: (2003, "Can't connect to MySQL server on 'xxx.xxx.xxx.xxx' (110)")

在一个“正常”的网站上，我想你不会太担心：浏览器显示一个 500 错误页面，访问者稍后再试一次。在我的情况下，丢失请求发布的信息不是一种选择，我想知道如何处理这个问题？我会尝试捕捉这个异常，等待连接恢复（延迟不是问题），然后继续该过程。但是由于异常可能发生在代码中的任何地方，我有点不知道如何继续。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:58:09.617

您可以在 yourproject/wsgi.py 中制作[自己的 WSGI 应用程序来装饰 django 的 wsgi 应用程序。](http://webpython.codepoint.net/wsgi_application_interface)

如果您的 wsgi 应用程序装饰器没有从被装饰的应用程序中获得可接受的值，它可能会等待一段时间，然后再试一次。

但实际上，您应该修复客户端。客户端不应期望 24/7 连接到工作服务器。在那之前，我不会把这个桌面客户端作为用户来推销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:18:50.503

您可以使用带有 process_view 方法和 try / 的中间件，除了包装您的调用。

或者您可以装饰您的视图并在此处结束通话。

或者，您可以将基于类的视图与在其调度方法上具有方法装饰器的基类或 overriden.dispatch 一起使用。

真的，你有很多解决方案。

现在，如上所述，您可能也想修改您的桌面应用程序！

# mysql - MySQL Count With 语句

> ID：10930462
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:16.410
> 
> 标签：mysql, count

谁能帮我计算我应该如何计算`jq.batchid != 0 and tl.taskqueueid IS NOT NULL`

这是初始数据：

```
+---------------+-----------+---------+---------------+
|  taskqueueid  |  batchid  |  jobid  |  taskqueueid  |
+---------------+-----------+---------+---------------+
|      19       |     0     |   140   |     (NULL)    |
+---------------+-----------+---------+---------------+
|      21       |    103    |   140   |       21      |
+---------------+-----------+---------+---------------+
|      22       |    104    |   140   |       22      |
+---------------+-----------+---------+---------------+
|      23       |    105    |   140   |     (NULL)    |
+---------------+-----------+---------+---------------+
|      20       |     0     |   140   |     (NULL)    |
+---------------+-----------+---------+---------------+ 
```

这是我的查询：

```
SELECT COUNT(jq.batchid),COUNT(tl.taskqueueid)
  FROM jobqueue jq
  LEFT JOIN taskslogs tl
    ON jq.taskqueueid=tl.taskqueueid
   AND jq.documentgroupid=0
   AND jq.batchid!=0
   AND tl.statusDefinitionID=1
 WHERE jq.jobid=140; 
```

上面的查询结果是：

```
+--------------------+-----------------------+
| COUNT(jq.batchid)  | COUNT(tl.taskqueueid) |
+--------------------+-----------------------+
|         5          |           2           |
+--------------------+-----------------------+ 
```

我想要一个结果：

```
+--------------------+-----------------------+
| COUNT(jq.batchid)  | COUNT(tl.taskqueueid) |
+--------------------+-----------------------+
|         3          |           2           |
+--------------------+-----------------------+ 
```

任何人都可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:14:00.147

这些计数有一个非常好的技巧：

```
SELECT
    SUM(jq.batchid > 0) as nb_batchid_positive,
    SUM(tl.taskqueueid IS NOT NULL) as nb_taskqueueid_not_null
FROM jobqueue jq
LEFT JOIN taskslogs tl
    ON jq.taskqueueid=tl.taskqueueid
    AND jq.documentgroupid=0
    AND tl.statusDefinitionID=1
WHERE jq.jobid=140; 
```

SUM(BOOLEAN CONDITION) 为您提供与条件匹配的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:11:59.683

如果您进行左连接，count 将始终为两个元素返回相同的行数，因为它们只能是相同的行数。

你需要做两个计数，每个表一个一个，用于你正在调查的条件。

# c# - 检查是否建立了与 IRC 服务器的连接

> ID：10930465
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:20.677
> 
> 标签：c#, irc

基本上，我的意图是让我的 IRC Bot 仅在实际连接正确时才发送消息（这是用于向 nickserv 识别它的消息），但是我不确定如何检查连接是否已建立。如果有人有任何可以帮助我的信息，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:25:40.200

当您的连接处于活动状态时，服务器会向您发送一个`001`( `RPL_WELCOME`) 数字。您可以发送您的 nickserv 登录信息作为回应。

# ios - 如何将屏幕坐标转换为 2D OpenGL 坐标

> ID：10930466
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:21.690
> 
> 标签：ios, math, opengl-es, geometry

我在 iPad 上设置了以下 2D 正交投影：

*   原点位于显示屏中心
*   (+1,+1) 在右上角
*   (-1,-1) 在右下角
*   这已调整为 iPad 的 1.333 纵横比，因此 X 从 -1.33 运行到 +1.33

iPad 是横向的，其按钮在左侧，屏幕坐标如下：

*   原点在右下角
*   (1024,768) 在左上角

用户触摸屏幕时如何计算 2D GL 位置？iOS 给了我用户点击的屏幕位置。

即，如果我点击中间的屏幕，iOS 会告诉我我点击了 (512,384)，所以这应该转换为 (0,0)，(1024,768) 到 (-1.33,1.0) 等。

我知道这应该是一个相当直接的数学，但我的大脑在试图弄清楚之后变得糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:05:06.543

对于尺寸为*w*和*h*的屏幕，映射到 [-1, -1]...[1, 1] 如下所示：

```
X = 2*x/w - 1
Y = 1 - 2*y/h 
```

要匹配屏幕的纵横比，请将 X 乘以 w/h。

# mvvm-light - 视窗 8 错误

> ID：10930469
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:30.037
> 
> 标签：mvvm-light, windows-runtime

我正在使用 Windows 8 发布预览版、Visual Studio Ultimate 2012 RC 和来自 MVVMLight Codeplex 页面的最新 V4RC 二进制文件。

创建一个新的空白metro项目，添加三个适用于windows 8的MVVMLight DLL并构建项目后，出现错误

```
Payload file 'C:\MVVMLight Binaries\Debug\Win8\GalaSoft.MvvmLight.Win8\License.txt' does not exist. 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:42:36.300

请提供有关您的错误的更多信息。否则，请使用 Nuget 包管理器添加库。右键单击 vs2012 中的参考选项卡，您可以找到从 Nuget 添加库的选项。享受编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:19:28.497

它实际上比我想象的要简单 - 只需在所需位置制作一个空白文本文件就足够了。

# hadoop - 通用连接脚本

> ID：10930472
> 
> 赞同：2
> 
> 时间：2012-06-07T11:00:36.107
> 
> 标签：hadoop, apache-pig

我有一个项目，我在其中计算帐户的各种数据并将每个数据保存在不同的文件中（每个计算都有不同的脚本）。然后，我需要创建最终文件，它将一个帐户的所有数据组合在一起。一种方法是将每个输出保存在不同的目录中，然后在最终脚本中使用模式加载每个目录，按帐户加入（或共同组）并打印。这里的问题是我需要告诉猪要加载哪些目录。我想制作一个更通用的脚本，以便轻松添加更多计算，因此我创建了一个父目录并将所有输出保存在该目录下（在子目录中）。然后我写了这个脚本

```
attributes_data=        load '$attributes_data' using CSVLoader;
union_data=         group attributes_data by TRIM ($0);
final_output=       foreach union_data generate
            FLATTEN(Merge_Bags(attributes_data));
store order_data into '$final_attr' using AttributesStorer; 
```

这样，我不需要告诉 pig 他应该加载哪些文件，它只需加载我的输出目录下的所有子目录。这里的问题是group by后包中元组的顺序不一致，所以我的最终结果没有一致的顺序，这是一个问题。

我真的很欣赏您的想法，以使脚本尽可能通用，同时在最终结果中保存一些数据顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:10:52.730

在分组之前，您可以尝试使用 ORDER BY 子句，如果这样可以达到目的。

# android - android中的自定义baseadapter prob

> ID：10930473
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:38.973
> 
> 标签：android, android-listview

基本适配器代码

```
public class ListAdapter extends BaseAdapter{

public ArrayList<HashMap<String,String>> list;
Activity activity;

public ListAdapter(Activity activity, ArrayList<HashMap<String, String>>list ) {
    // TODO Auto-generated constructor stub
    super();
    this.activity=(Activity)activity;
    this.list=list;
    for(int i=0;i<3;i++)
    {
        HashMap<String, String>temp=(HashMap<String, String>)list.get(i);
        System.out.println(temp.get("message"));
        System.out.println(temp.get("from_whom"));          
    }
}

public int getCount() {
    // TODO Auto-generated method stub
    list.size();
    return 0;
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
}

public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}
private class ViewHolder {
       TextView Message;
       TextView fromWhom;
  }

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;
    LayoutInflater inflater =  activity.getLayoutInflater();
    if (convertView == null)
    {   
        convertView = inflater.inflate(R.layout.custom_list_view, null);
        holder = new ViewHolder();
        holder.Message = (TextView) convertView.findViewById(R.id.message);
        holder.fromWhom = (TextView) convertView.findViewById(R.id.fromWhom);
        convertView.setTag(holder);
    }
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }
    HashMap<String, String> item = list.get(position);
    String message = item.get("message");
    String from_whom = item.get("from_whom");
    holder.Message.setText(message);
    holder.fromWhom.setText(from_whom);
    return convertView;

}
} 
```

主类代码

```
 public class go_on extends Activity 
{
    ListView list;
    ArrayList<String> nlist;
    ArrayList<HashMap<String, String>> Hlist;
    HashMap<String, String> temp;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        list = (ListView)findViewById(R.id.mylist);
        Hlist = new ArrayList<HashMap<String,String>>();
        for(int i=0;i<3;i++)
        {
            temp= new HashMap<String, String>();
            temp.put("message","I am fine");
            temp.put("from_whom", "123");
            Hlist.add(temp);
        }

        ListAdapter listAdapter = new ListAdapter(this, Hlist);
        list.setAdapter(listAdapter);       
    }

} 
```

但名单没有来。我找不到任何问题。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:03:17.460

您返回的计数为零。

```
public int getCount() {
    // TODO Auto-generated method stub
    list.size();
    return 0;
} 
```

你有回报`list.size()`。改成这样

```
public int getCount() {
    // TODO Auto-generated method stub

    return  list.size();
} 
```

getCount() 是通知适配器必须膨胀的元素数量的方法。当您返回零时，这意味着不存在任何元素，因此您无法看到您的列表视图。

# java - 如何将我的分组电子邮件直接拖放到我的 java 组件中？

> ID：10930474
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:40.403
> 
> 标签：java, drag-and-drop

我想将我的分组电子邮件直接拖放到我的 Java 面板。我可以在将我的分组电子邮件放在 Windows 资源管理器上后拖放它（邮件变成 .eml 文件）。

```
public synchronized void drop(final DropTargetDropEvent dtde)
{
try
{

Transferable tr = dtde.getTransferable();
DataFlavor[] flavors = tr.getTransferDataFlavors();

} 
```

当我尝试上面的代码时，没有 Dataflavors。请给我你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:41:04.620

您可以提供已拖放到 swing 组件上的 .eml 文件的绝对路径列表，然后您的代码可以从该路径获取这些文件以进行进一步操作。

您可以`Transferable`在自己的类中实现，该类可用于为传输操作提供数据，并扩展`TransferHandler`类以定义您自己的`DataFlavor`.

# java - 验证的正则表达式必须包含字母数字

> ID：10930485
> 
> 赞同：0
> 
> 时间：2012-06-07T11:00:57.813
> 
> 标签：java, regex

我想制作一个必须至少有一个数字和一个字母的正则表达式。

`onlyText`不会数学。但是`onlyText123`匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:03:33.750

干得好

```
^(?=.*[a-zA-Z])(?=.*[\d]).*$ 
```

关键是使用一种称为**环视的技术**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:09:14.173

你可以试试这样的

```
String p= "\\w*([a-zA-Z]\\d|\\d[a-zA-Z])\\w*";

System.out.println("1a".matches(p));//true
System.out.println("a1".matches(p));//true
System.out.println("1".matches(p));//false
System.out.println("a".matches(p));//false 
```

`([a-zA-Z]\\d|\\d[a-zA-Z])`== 字母后数字或数字后字母

之前和之后可以（但不必）是字母和数字 ( `\\w`)

# php - 跨多个文件的 PHP 会话变量

> ID：10930486
> 
> 赞同：1
> 
> 时间：2012-06-07T11:00:59.823
> 
> 标签：php, session

如果我有几个 PHP 文件并且我在一个文件中设置了一个会话变量，那么相同的设置值是否可以在另一个文件中用于同一会话？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:02:46.243

是的，只要您`session_start()`在每个页面中调用就应该

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:03:41.527

是的，它会 ！！
但在另一个文件中你必须调用 session_start(); meth0d 再次访问会话变量

# xml - emacs xpath xml xslt

> ID：10930491
> 
> 赞同：2
> 
> 时间：2012-06-07T11:01:09.067
> 
> 标签：xml, xslt, xpath, emacs

我正在使用 Emacs 开发一些适用于 XML 文档的应用程序，并且我想对其进行配置以实现以下目标：

1.  当我编辑 XML 文档时，我希望能够调用一些函数（例如`M-x get-xpath`）来获取当前放置光标的元素的 xpath。

2.  当我编辑 XML 文档时，我希望能够调用一些函数（例如`M-x run-xslt-transformation /path/to/file/transform_01.xslt`）在当前缓冲区上运行 XSLT 转换

有人可以帮我配置我的emacs吗？

最好的问候，卢卡斯 [http://www.wasthere.com](http://www.wasthere.com) ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:24:22.173

我建议安装[nXML 模式](http://www.thaiopensource.com/nxml-mode/)。它似乎支持显示当前 XML 路径，如[http://www.emacswiki.org/cgi-bin/wiki/NxmlMode#toc11](http://www.emacswiki.org/cgi-bin/wiki/NxmlMode#toc11)所示。

关于第二个问题，您应该能够设置您最喜欢的 XSLT 处理器，然后使用诸如 Emacs 命令“shell-command-to-string”之类的东西随时运行它。

# viewpagerindicator - viewpagerindicator 和不同的布局

> ID：10930492
> 
> 赞同：5
> 
> 时间：2012-06-07T11:01:11.290
> 
> 标签：viewpagerindicator

[我从http://www.zylinc.com/blog-reader/items/viewpager-page-indicator.html](http://www.zylinc.com/blog-reader/items/viewpager-page-indicator.html)引用了 viewpagerindicator 的这段代码。我想在不同的页面上显示不同的视图。现在我能够显示列表项每页（3 页），但我想在第二页和第三页上显示 textview。我做了一些更改并使用数组创建了标题，这是它的片段

```
 @Override
        public String getTitle(int pos){
            Log.i("FragmentList", "current page position is : " +mViewPager.getCurrentItem());
            switch (pos) {
            case 0:return titles[0];
            case 1:return titles[1];
            case 2:return titles[2];
            default:return titles[0];

            }
//          pageListener = new DetailOnPageChange();
//          mViewPager.setOnPageChangeListener(pageListener);
        } 
```

因此，当我更改页面时，我还想更改布局，我在想是否可以获取页面的当前位置，我可以将它们放入 switch case 并实现布局...但是由于 mViewpager.getcurrentitem 在此功能中的行为正常，因此无效some1 帮我谁我应该实现这是我的代码 viewpagerindicator activty

```
package com.zylinc.view;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.zip.Inflater;

import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.ListFragment;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ViewPagerIndicatorActivity extends FragmentActivity 
{
    DetailOnPageChange pageListener;
    PagerAdapter mPagerAdapter;
    static ViewPager  mViewPager;
    ViewPagerIndicator mIndicator;
    static TextView stv;
    static SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd");
    static SimpleDateFormat readableDateFormat = new SimpleDateFormat("yyyy - MM/dd");
    public int numberofPages = 3;
    Inflater inflater;
    public static final String[] titles = new String[]{"First Page","Second Page","Third Page"};
    public static int pos;
    public int currentPageIs;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create our custom adapter to supply pages to the viewpager.
        mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
        mViewPager = (ViewPager)findViewById(R.id.pager);
        mViewPager.setAdapter(mPagerAdapter);

        // Start at a custom position
        mViewPager.setCurrentItem(0);

        // Find the indicator from the layout
        mIndicator = (ViewPagerIndicator)findViewById(R.id.indicator);

        // Set the indicator as the pageChangeListener
        mViewPager.setOnPageChangeListener(mIndicator);

        // Initialize the indicator. We need some information here:
        // * What page do we start on.
        // * How many pages are there in total
        // * A callback to get page titles
        Log.i("number of counts are ", "pages are"+mPagerAdapter.getCount());
        mIndicator.init(0, mPagerAdapter.getCount(), mPagerAdapter);
        Resources res = getResources();
        Drawable prev = res.getDrawable(R.drawable.indicator_prev_arrow);
        Drawable next = res.getDrawable(R.drawable.indicator_next_arrow);
        mIndicator.setFocusedTextColor(new int[]{255, 0, 0});

        // Set images for previous and next arrows.
        mIndicator.setArrows(prev, next);

        mIndicator.setOnClickListener(new OnIndicatorClickListener());
    }

    class OnIndicatorClickListener implements ViewPagerIndicator.OnClickListener{
        @Override
        public void onCurrentClicked(View v) {
            Toast.makeText(ViewPagerIndicatorActivity.this, "Hello", Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onNextClicked(View v) {
            mViewPager.setCurrentItem(Math.min(mPagerAdapter.getCount() - 1, mIndicator.getCurrentPosition() + 1));
        }

        @Override
        public void onPreviousClicked(View v) {
            mViewPager.setCurrentItem(Math.max(0, mIndicator.getCurrentPosition() - 1));
        }

    }

    class PagerAdapter extends FragmentPagerAdapter implements ViewPagerIndicator.PageInfoProvider
    {
        ArrayList<Fragment> fragments = new ArrayList<Fragment>();
        //ArrayList<String> showTitles = new ArrayList<String>();
        //String myPos = titles[pos];
        public PagerAdapter(FragmentManager fm) {
            super(fm);

        }

        @Override
        public Fragment getItem(int pos) {

            Calendar cal = Calendar.getInstance();
            cal.add(Calendar.DAY_OF_MONTH, pos - getCount() / 2);
            return ItemFragment.newInstance(cal.getTime());
            //return ItemFragment.newInstance(titles[pos]);

        }

        @Override
        public String getTitle(int pos){
            Log.i("FragmentList", "current page position is : " +mViewPager.getCurrentItem());
            switch (pos) {
            case 0:return titles[0];
            case 1:return titles[1];
            case 2:return titles[2];
            default:return titles[0];

            }
//          pageListener = new DetailOnPageChange();
//          mViewPager.setOnPageChangeListener(pageListener);
        }

        @Override
        public int getCount() {
            return numberofPages;
        }

    }
    public class DetailOnPageChange extends ViewPager.SimpleOnPageChangeListener{

        @Override
        public void onPageSelected(int position) {
            Log.i("FragmentList", "************* position is : " +currentPageIs);
            currentPageIs = position;
        }
        public int getCurrentPage(){
            return currentPageIs;
        }
    }

    public static class ItemFragment extends ListFragment
    {
        static Date date;
        TextView tv;

        static ItemFragment newInstance(Date date) {

            ItemFragment f = new ItemFragment();
            // Supply num input as an argument.
            Bundle args = new Bundle();

            args.putString("date", sdf.format(date));
            f.setArguments(args);

            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            try {
                this.date = sdf.parse(getArguments().getString("date"));
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            //Log.i("FragmentList", "current page checker position is : " +titles[pos]);

            View v = inflater.inflate(R.layout.date_fragment, container, false);
            View tv = v.findViewById(R.id.text);
            ((TextView)tv).setText(readableDateFormat.format(date));
            return v;
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            setListAdapter(new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, list));
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Log.i("FragmentList", "Item clicked: " + id);
        }
    }

    public static final String[] list = new String[]{"France", "London", "Sweden", "Denmark", "Germany", "Finland", "Thailand", "Taiwan", "USA", "Norway", "Lithuania", "Bosnia", "Russia", "Vietnam", "Australia"};
} 
```

这是适配器

```
package com.zylinc.view;

import android.content.Context;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;

/**
 * An small bar indicating the title of the previous,
 * current and next page to be shown in a ViewPager.
 * Made to resemble the indicator in the Google+ application
 * in function.
 * 
 * @author Mark Gjøl @ Zylinc
 */
public class ViewPagerIndicator extends RelativeLayout implements OnPageChangeListener {
    private static final int PADDING = 5;

    TextView mPrevious;
    TextView mCurrent;
    TextView mNext;
    int mCurItem;
    int mRestoreCurItem = -1;

    LinearLayout mPreviousGroup;
    LinearLayout mNextGroup;

    int mArrowPadding;
    int mSize;

    ImageView mCurrentIndicator;
    ImageView mPrevArrow;
    ImageView mNextArrow;

    int[] mFocusedTextColor;
    int[] mUnfocusedTextColor;

    OnClickListener mOnClickHandler;

    public interface PageInfoProvider{
        String getTitle(int pos);
    }

    public interface OnClickListener{
        void onNextClicked(View v);
        void onPreviousClicked(View v);
        void onCurrentClicked(View v);
    }

    public void setOnClickListener(OnClickListener handler){
        this.mOnClickHandler = handler;
        mPreviousGroup.setOnClickListener(new OnPreviousClickedListener());
        mCurrent.setOnClickListener(new OnCurrentClickedListener());
        mNextGroup.setOnClickListener(new OnNextClickedListener());
    }

    public int getCurrentPosition(){
        return mCurItem;
    }

    PageInfoProvider mPageInfoProvider;
    public void setPageInfoProvider(PageInfoProvider pageInfoProvider){
        this.mPageInfoProvider = pageInfoProvider;
    }

    public void setFocusedTextColor(int[] col){
        System.arraycopy(col, 0, mFocusedTextColor, 0, 3);
        updateColor(0);
    }

    public void setUnfocusedTextColor(int[] col){
        System.arraycopy(col, 0, mUnfocusedTextColor, 0, 3);
        mNext.setTextColor(Color.argb(255, col[0], col[1], col[2]));
        mPrevious.setTextColor(Color.argb(255, col[0], col[1], col[2]));
        updateColor(0);
    }

    @Override
    protected Parcelable onSaveInstanceState() {
        Parcelable state = super.onSaveInstanceState();
        Bundle b = new Bundle();
        b.putInt("current", this.mCurItem);
        b.putParcelable("viewstate", state);
        return b;
    }

    @Override
    protected void onRestoreInstanceState(Parcelable state) {
        super.onRestoreInstanceState(((Bundle)state).getParcelable("viewstate"));
        mCurItem = ((Bundle)state).getInt("current", mCurItem);
        this.setText(mCurItem - 1);
        this.updateArrows(mCurItem);
        this.invalidate();
    }

    /**
     * Initialization
     * 
     * @param startPos The initially selected element in the ViewPager
     * @param size Total amount of elements in the ViewPager
     * @param pageInfoProvider Interface that returns page titles
     */
    public void init(int startPos, int size, PageInfoProvider pageInfoProvider){
        setPageInfoProvider(pageInfoProvider);
        this.mSize = size;
        setText(startPos - 1);
        mCurItem = startPos;
    }

    public ViewPagerIndicator(Context context, AttributeSet attrs) {
        super(context, attrs);
        addContent();
    }

    public ViewPagerIndicator(Context context, AttributeSet attrs, int defStyle){
        super(context, attrs, defStyle);
        addContent();
    }

    public ViewPagerIndicator(Context context) {
        super(context);
        addContent();
    }

    /**
     * Add drawables for arrows
     * 
     * @param prev Left pointing arrow
     * @param next Right pointing arrow
     */
    public void setArrows(Drawable prev, Drawable next){
        this.mPrevArrow = new ImageView(getContext());
        this.mPrevArrow.setImageDrawable(prev);

        this.mNextArrow = new ImageView(getContext());
        this.mNextArrow.setImageDrawable(next);

        LinearLayout.LayoutParams arrowLayoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        arrowLayoutParams.gravity = Gravity.CENTER;

        mPreviousGroup.removeAllViews();
        mPreviousGroup.addView(mPrevArrow, arrowLayoutParams);
        mPreviousGroup.addView(mPrevious, arrowLayoutParams);

        mPrevious.setPadding(PADDING, 0, 0, 0);
        mNext.setPadding(0, 0, PADDING, 0);

        mArrowPadding = PADDING + prev.getIntrinsicWidth();

        mNextGroup.addView(mNextArrow, arrowLayoutParams);
        updateArrows(mCurItem);
    }

    /**
     * Create all views, build the layout
     */
    private void addContent(){
        mFocusedTextColor = new int[]{0, 0, 0};
        mUnfocusedTextColor = new int[]{190, 190, 190};

        // Text views
        mPrevious = new TextView(getContext());
        mCurrent = new TextView(getContext());
        mNext = new TextView(getContext());

        RelativeLayout.LayoutParams previousParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        previousParams.addRule(RelativeLayout.ALIGN_LEFT);

        RelativeLayout.LayoutParams currentParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        currentParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

        RelativeLayout.LayoutParams nextParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        nextParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

        // Groups holding text and arrows
        mPreviousGroup = new LinearLayout(getContext());
        mPreviousGroup.setOrientation(LinearLayout.HORIZONTAL);
        mNextGroup = new LinearLayout(getContext());
        mNextGroup.setOrientation(LinearLayout.HORIZONTAL);

        mPreviousGroup.addView(mPrevious, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        mNextGroup.addView(mNext, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        addView(mPreviousGroup, previousParams);
        addView(mCurrent, currentParams);
        addView(mNextGroup, nextParams);

        mPrevious.setSingleLine();
        mCurrent.setSingleLine();
        mNext.setSingleLine();

        mPrevious.setText("previous");
        mCurrent.setText("current");
        mNext.setText("next");

        mPrevious.setClickable(false);
        mNext.setClickable(false);
        mCurrent.setClickable(true);
        mPreviousGroup.setClickable(true);
        mNextGroup.setClickable(true);

        // Set colors
        mNext.setTextColor(Color.argb(255, mUnfocusedTextColor[0], mUnfocusedTextColor[1], mUnfocusedTextColor[2]));
        mPrevious.setTextColor(Color.argb(255, mUnfocusedTextColor[0], mUnfocusedTextColor[1], mUnfocusedTextColor[2]));
        updateColor(0);
    }

    @Override
    public void onPageScrollStateChanged(int state) {

    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        positionOffsetPixels = adjustOffset(positionOffsetPixels);
        position = updatePosition(position, positionOffsetPixels);
        setText(position - 1);
        updateColor(positionOffsetPixels);
        updateArrows(position);
        updatePositions(positionOffsetPixels);
        mCurItem = position;
    }

    void updatePositions(int positionOffsetPixels){
        int textWidth = mCurrent.getWidth() - mCurrent.getPaddingLeft() - mCurrent.getPaddingRight();
        int maxOffset = this.getWidth() / 2 - textWidth / 2 - mArrowPadding;
        if(positionOffsetPixels > 0){
            maxOffset -= this.getPaddingLeft();
            int offset = Math.min(positionOffsetPixels, maxOffset - 1);
            mCurrent.setPadding(0, 0, 2 * offset, 0);

            // Move previous text out of the way. Slightly buggy.
            /*
            int overlapLeft = mPreviousGroup.getRight() - mCurrent.getLeft() + mArrowPadding;
            mPreviousGroup.setPadding(0, 0, Math.max(0, overlapLeft), 0);
            mNextGroup.setPadding(0, 0, 0, 0);
            */
        }else{
            maxOffset -= this.getPaddingRight();
            int offset = Math.max(positionOffsetPixels, -maxOffset);
            mCurrent.setPadding(-2 * offset, 0, 0, 0);

            // Move next text out of the way. Slightly buggy.
            /*
            int overlapRight = mCurrent.getRight() - mNextGroup.getLeft() + mArrowPadding;
            mNextGroup.setPadding(Math.max(0, overlapRight), 0, 0, 0);
            mPreviousGroup.setPadding(0, 0, 0, 0);
            */
        }
    }

    /**
     * Hide arrows if we can't scroll further
     * 
     * @param position
     */
    void updateArrows(int position){
        if(mPrevArrow != null){
            mPrevArrow.setVisibility(position == 0 ? View.INVISIBLE : View.VISIBLE);
            mNextArrow.setVisibility(position == mSize - 1 ? View.INVISIBLE : View.VISIBLE);
        }
    }

    /**
     * Adjust position to be the view that is showing the most.
     * 
     * @param givenPosition
     * @param offset
     * @return
     */
    int updatePosition(int givenPosition, int offset){
        int pos;
        if(offset < 0){
            pos = givenPosition + 1;
        }else{
            pos = givenPosition;
        }
        return pos; 
    }

    /**
     * Fade "currently showing" color depending on it's position
     * 
     * @param offset
     */
    void updateColor(int offset){
        offset = Math.abs(offset);
        // Initial condition: offset is always 0, this.getWidth is also 0! 0/0 = NaN
        int width = this.getWidth();
        float fraction = width == 0 ? 0 : offset / ((float)width / 4.0f);
        fraction = Math.min(1, fraction);
        int r = (int)(mUnfocusedTextColor[0] * fraction + mFocusedTextColor[0] * (1 - fraction));
        int g = (int)(mUnfocusedTextColor[1] * fraction + mFocusedTextColor[1] * (1 - fraction));
        int b = (int)(mUnfocusedTextColor[2] * fraction + mFocusedTextColor[2] * (1 - fraction));
        mCurrent.setTextColor(Color.argb(255, r, g, b));
    }

    /**
     * Update text depending on it's position
     * 
     * @param prevPos
     */
    void setText(int prevPos){
        if(prevPos < 0){
            mPrevious.setText("");
        }else{
            mPrevious.setText(mPageInfoProvider.getTitle(prevPos));
        }
        mCurrent.setText(mPageInfoProvider.getTitle(prevPos + 1));
        if(prevPos + 2 == this.mSize){
            mNext.setText("");
        }else{
            mNext.setText(mPageInfoProvider.getTitle(prevPos + 2));
        }
    }

    // Original:
    // 244, 245, 0, 1, 2
    // New:
    // -2, -1, 0, 1, 2
    int adjustOffset(int positionOffsetPixels){
        // Move offset half width
        positionOffsetPixels += this.getWidth() / 2;
        // Clamp to width
        positionOffsetPixels %= this.getWidth();
        // Center around zero
        positionOffsetPixels -= this.getWidth() / 2;
        return positionOffsetPixels;
    }

    @Override
    public void onPageSelected(int position) {
        // Reset padding when the page is finally selected (May not be necessary)
        mCurrent.setPadding(0, 0, 0, 0);
    }

    class OnPreviousClickedListener implements android.view.View.OnClickListener{
        @Override
        public void onClick(View v) {
            if(mOnClickHandler != null){
                mOnClickHandler.onPreviousClicked(ViewPagerIndicator.this);
            }
        }
    }
    class OnCurrentClickedListener implements android.view.View.OnClickListener{
        @Override
        public void onClick(View v) {
            if(mOnClickHandler != null){
                mOnClickHandler.onCurrentClicked(ViewPagerIndicator.this);
            }
        }
    }
    class OnNextClickedListener implements android.view.View.OnClickListener{
        @Override
        public void onClick(View v) {
            if(mOnClickHandler != null){
                mOnClickHandler.onNextClicked(ViewPagerIndicator.this);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:39:46.757

您可能会发现此博客很有用；[让 ActionBarSherlock 和 ViewPagerIndicator 玩得很好](http://droidista.blogspot.com/2012/08/making-actionbarsherlock-and.html)

您可能还会遇到这里提到的错误；[Android - SupportMapFragment 与 GoogleMaps API 2.0 给出 IllegalArgumentException](https://stackoverflow.com/questions/14124354/android-supportmapfragment-with-google-map-api-2-0-giving-error/14954117#14954117)

### *祝你好运..！！*

# jquery - 如何在 iPhone 上“隐藏”屏幕外的内容？

> ID：10930493
> 
> 赞同：3
> 
> 时间：2012-06-07T11:01:13.453
> 
> 标签：jquery, iphone, css, mobile-safari, responsive-design

我正在构建一个响应式网络应用程序，其中移动/瘦身部分隐藏了屏幕外的各种面板。我发现将这些项目放置在右侧，即`left: 100%`“隐藏”并不能正确隐藏项目，因为移动 safari 仍然显示它，即使它位于`html`和`body`区域之外。

我想通过添加这个类来滑动这些隐藏的项目：（`.focused`使用 jQuery click 事件），它将`left`值更改为`0`. 该类应用了一个 CSS 变换，它也处理动画。

在测试时，我发现将隐藏面板放置在左侧可以正常工作。

**谁能为我的解决方案提供更好的解决方案？**我真的需要将隐藏的内容定位在右侧。

下面是一些 CSS 来向您展示正在发生的事情：

```
#hidden-item {
  position: absolute;
  top: 50px;
  left: 100%;
  width: 100%;

  -webkit-transition: all 0.5s ease-in;
  -moz-transition: all 0.5s ease-in;
  -ms-transition: all 0.5s ease-in;
  -o-transition: all 0.5s ease-in;
  transition: all 0.5s ease-in;

  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -ms-backface-visibility: hidden;
  backface-visibility: hidden;
}

#hidden-item.focused {
  left: 0;

  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T13:41:45.513

我知道这篇文章很旧，但我最近遇到了同样的问题。我使用视口元数据标签来处理这个问题，使用固定宽度。此外，通过 CSS 中的媒体查询将固定宽度和 overflow-x: hidden 应用到正文可能会有所帮助。

```
<meta name="viewport" content="width=960; user-scalable=no; initial-scale=1.0; maximum-scale=1.0;"> 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:39:47.650

从外观上看，您几乎就在那儿。您需要确保#hidden-item 的父元素具有宽度设置和位置：固定或绝对。

用你的 css 稍微修改一下这个 jsfiddle：http: [//jsfiddle.net/HNrCD/2/](http://jsfiddle.net/HNrCD/2/)

# ruby-on-rails - 如何在 wicked_pdf 中打开 pdf 文件？

> ID：10930494
> 
> 赞同：0
> 
> 时间：2012-06-07T11:01:17.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, plugins, wkhtmltopdf, wicked-pdf

现在我使用 rail 3.0.0 版本。现在我生成 pdf 文件并使用 wicked_pdf 将该文件保存在公共文件夹中。现在我想使用控制器操作打开该 pdf 文件。我在控制器中使用此代码。但它不起作用。请帮我怎么做。

```
 def download_prescription_pdf 
            pdf_pres = UploadedDocument.find(params[:pdf]) 
            send_file "#{RAILS_ROOT}/public/prescription/#{pdf_pres.file_path}", :type => "application/pdf" 
         end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:32:46.420

这对我有用：

```
 render :template  => 'admin/idreport',
               :formats => [:pdf],
               :handlers => [:erb],
               :pdf => "ID List",
               :save_to_file => Rails.root.join('../Documents', "ID List") 
```

祝你好运

鲍勃

# java - 如何仅使用一个连接在休眠中进行嵌套事务？

> ID：10930496
> 
> 赞同：1
> 
> 时间：2012-06-07T11:01:33.190
> 
> 标签：java, spring, hibernate, jdbc

我要解决的问题背景：我有一个 java spring http 拦截器 AuditHttpCommunicationInterceptor ，它审计与外部系统的通信。进行通信的 HttpClieant 用于执行某些称为 DoBusinessLogicService 的业务逻辑的 java 服务类。DoBusinessLogicServices 打开一个新事务并使用几个协作者来做很多事情。

要解决的问题：无论 DoBusinessLogicSevice 中的任何操作的结果（意外异常等）如何，我都希望通过 AuditHttpCommunicationInterceptor 将审核存储在数据库中。

我使用的解决方案： AuditHttpCommunicationInterceptor 将以这种方式打开一个新事务：

```
 TransactionDefinition transactionDefinition = new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
    new TransactionTemplate(platformTransactionManager, transactionDefinition).execute(new TransactionCallbackWithoutResult() {
        @Override
        protected void doInTransactionWithoutResult(TransactionStatus status) {
            // do stuff
        }
    }); 
```

一切正常。当 DoBusinessLogicSevice 的一部分抛出意外异常时，它的事务被回滚，但 AuditHttpCommunicationInterceptor 设法将审计存储在数据库中。

此解决方案产生的问题： AuditHttpCommunicationInterceptor 使用新的数据库连接。因此，对于每个 DoBusinessLogicService 调用，我需要 2 个数据库连接。基本上，我想知道问题的解决方案：如何让 TransactionTemplate “暂停”当前事务并在这种情况下将连接重用于新的事务。

有任何想法吗？:)

PS 一个想法可能是采用不同的设计方法：删除拦截器并创建一个直接在 DoBusinessLogicSevice 中使用的 AuditingHttpClient（不是由 spring 调用的），但我不能这样做，因为我无法访问那里的所有 http 字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:32:59.477

Spring 支持嵌套事务（propagation="NESTED"），但这确实取决于数据库平台，我不相信每个数据库平台都能够处理嵌套事务。

我真的不明白从池中获取连接、进行快速审计事务并返回连接有什么大不了的。

**更新：**虽然 Spring 支持嵌套事务，但 Hibernate 似乎不支持。如果是这种情况，我会说：使用另一个连接进行审计。

# canjs - 在 CANJS 中创建 cookie

> ID：10930497
> 
> 赞同：0
> 
> 时间：2012-06-07T11:01:35.090
> 
> 标签：canjs

我正在使用 CANJS 创建一个应用程序。要根据 cookie 显示用户信息，我不知道如何使用 CANJS 创建和删除 cookie。

有人可以帮帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:17:58.527

转到[http://javascriptmvc.com/docs.html](http://javascriptmvc.com/docs.html)并[在搜索框中键入 cookie](http://javascriptmvc.com/docs.html#!jQuery.cookie)。

```
$.cookie('name','value');

var value = $.cookie('name'); 
```

或者你可以使用[http://jquerypp.com/](http://jquerypp.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:12:23.820

可能是我迟到了，但你可以试试[jquery++ cookies](http://jquerypp.com/#cookie)

# javascript - 如何在运行时向 Ember.Router 添加路由或状态？

> ID：10930498
> 
> 赞同：2
> 
> 时间：2012-06-07T11:01:36.430
> 
> 标签：javascript, ember.js, router, ember-old-router

我的应用程序上有以下 Ember.Router：

```
App.Router = Ember.Router.extend({
    location: 'hash',
    rootElement: '#content',
    enableLogging: true,

    root: Ember.State.extend({
        route: '/',

        index: Ember.State.extend({
            route: '/',
            redirectsTo: 'main.welcome'
        }),

        main: Ember.State.extend({
            route: '/main',

            welcome: Ember.ViewState.extend({
                route: '/welcome',
                view: App.WelcomeView
            })
        })
    })
}); 
```

我想要做的是通过在声明后添加到 App.Router 来添加额外的路由（这是为了启用任意模块）。是在 App.initialize() 之前还是之后完成并不重要。

这是一个关于模块路由对象的示例：

```
Module.routes = Ember.State.extend({
    route: '/module',
    index: Ember.State.extend({
        route: '/'
        view: Module.IndexView
    })
}); 
```

非常感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:49:03.800

您可以提取要丰富的状态，以便稍后重新打开它。

```
App = Ember.Application.create();

App.RootState = Em.State.extend({
    index : Em.State.extend({
        route : '/'
    }),
    main: Em.State.extend({
        route : '/main',
        index : Em.State.extend({
            route : '/'
        })
    })
});

App.Router = Ember.Router.extend({
    location : 'hash',
    enableLogging : true,
    root : App.RootState
});

// later...

App.RootState.reopen({
    module: Em.State.extend({
        route : '/module',
        index : Em.State.extend({
            route : '/'
        })
    })
});

App.initialize();​ 
```

编辑：我使用 GitHub 上的最新版本

# tomcat - 为什么是red5和tomcat？

> ID：10930500
> 
> 赞同：0
> 
> 时间：2012-06-07T11:01:40.397
> 
> 标签：tomcat, deployment, integration, red5, seek

是的，我注意到 red5 有时会不正常，尤其是当我在很短的时间间隔内多次尝试 seek() 时。但是我想知道如果我将整个red5部署到tomcat，我可以获得什么样的优势？还有我可能会遇到什么样的坏事？谢谢你。

* * *

改写的问题：

对不起。这是我的情况。我们有一个用 Flex 编写的客户端，它可以播放来自 red5 服务器的流式音频/视频。因为我的团队中没有一个人对red5很熟悉，基本上我们只是直接通过bash shell运行red5 server。这让我觉得通过这种方式我们无法发挥red5的优势。此外，我们在寻找音频/视频的时间过多时也会出现问题，播放器会卡住。我们也不得不经常重启red5服务器，因为卡住了播放器。所以我搜索了解决方案，我注意到有人将 red5 部署到 tomcat 服务器，但没有说明为什么要这样做。所以我的问题是关于将red5部署到tomcat的优缺点。而已。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:53:28.310

Red5 可以添加到任何 Web 或 Java EE 项目中：

第 1 步：下载并解压缩 Red5War_1.0.war 或更高版本

第二步：复制膨胀的war文件夹“/WEB-INF/classes”的内容，粘贴到项目的“Source”文件夹中。

第3步：导航到膨胀的war文件夹的“/WEB-INF/lib”，选择所有依赖jar并粘贴到项目的“Libraries”文件夹中。

第 4 步：将配置文件的内容复制到您的项目（如 web.xml...）

第五步：在防火墙中打开以下端口 TCP/843,TCP/1935,TCP/5229,TCP/5080

请求：请分享您的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:21:46.620

Red5 将自身安装在 Tomcat 实例中（它也安装了该实例）。你不需要把它放在那里。您可以将其作为服务启动 - 有很多示例脚本可以放入 /etc/init.d 中。

编辑配置文件，以便记录所有错误。然后看看它为什么会“卡住”。

# javascript - 取消绑定，然后将 onclick 函数（使用动态参数）绑定到 jquery 或 javascript 中中继器中的锚标记

> ID：10930503
> 
> 赞同：1
> 
> 时间：2012-06-07T11:01:56.160
> 
> 标签：javascript, jquery

我想取消绑定函数（带有参数
<%#Eval('')%>），然后在按钮上单击绑定 jquery 或 javascript 中的函数

```
 <ItemTemplate>
           <tr>
              <td nowrap="nowrap" align="center">
                                                                                                  <%#Eval("Comments")%>&nbsp;
               </td>
               <td nowrap="nowrap" align="center">
                  <a id="hlnkEditVoyageAssosiatedCompanyID" onclick="FillVoyageCompanyData(<%#Eval("VoyageAssosiatedCompanyID") %>);">          Edit</a>
                </td>
            </tr>
       </ItemTemplate> 
```

在这里我想取消绑定“FillVoyageCompanyData”功能。我是这样做的

```
 $("#hlnkEditVoyageAssosiatedCompanyID").unbind("click"); 
```

进而

```
 $("#hlnkEditVoyageAssosiatedCompanyID").bind("click", FillVoyageCompanyData); 
```

但它不工作。它不会取消绑定功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:03:19.253

`unbind`仅适用于通过 jQuery 附加的事件处理程序

代替：

```
<a id="hlnkEditVoyageAssosiatedCompanyID"
   onclick="FillVoyageCompanyData(<%#Eval("VoyageAssosiatedCompanyID") %>);"> 
```

和

```
<a class="hlnkEditVoyageAssosiatedCompanyID"
   data-vacid="<%#Eval("VoyageAssosiatedCompanyID") %>"> 
```

然后使用 jQuery 附加处理程序：

```
$('body').on('.hlnkEditVoyageAssosiatedCompanyID', 'click', function() {
    FillVoyageCompanyData($(this).data('vacid'))
}); 
```

# django - 在 django 中查询的更好方法

> ID：10930505
> 
> 赞同：1
> 
> 时间：2012-06-07T11:01:59.310
> 
> 标签：django, django-models, django-views, django-queryset

有一个更好的方法吗

```
questionobjects = Questions.objects.all()
for questionobject in questionobjects:
        answerobjects = Answers.objects.filter(question=questionobject.id).count() 
```

在上面的查询`Answers`模型中，有外键关系`Questions`。但在上面的脚本中，查询答案查询是根据问题对象的数量执行的。

假设有 10 个问题对象，然后发生 10 个单独的答案对象查询。有没有办法用单个查询来做到这一点，因为随着 questionobjects 数量的增加，这将是一个问题，因为 answerobjects 查询的数量也会增加

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:10:03.113

所以看起来你只关心答案的数量，而不是获取实际的答案对象。您可以使用注释来做到这一点：

```
from django.db.models import Count
Question.objects.all().annotate(Count('answers')) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T11:10:57.220

看一下注解：[Django Annotation](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)

```
from django.db.models import Count
questions = Questions.objects.annotate(count=Count('answers')) 
```

然后你可以访问计数`[q.count for q in questions]`

# javascript - 当 Internet 连接中断时，如何从 Ajax 调用中取回信息

> ID：10930506
> 
> 赞同：6
> 
> 时间：2012-06-07T11:02:03.670
> 
> 标签：javascript, jquery, ajax

我有以下内容：

```
 $.ajax({ cache: false,
    url: "/Admin/Contents/GetData",
    data: { accountID: AccountID },
    success: function (data) {
        $('#CityID').html(data);
    },
    error: function (ajaxContext) {
        alert(ajaxContext.responseText)
    }
}); 
```

当我失去与互联网的连接时，会调用错误，但我在 responseText 中看不到任何内容。

有没有办法根据返回的 ajaxContent 中的状态信息找出不同类型的错误？如果有其他问题，我真的希望能够发出一条消息说“Internet 连接丢失”和另一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:07:33.083

根据[jQuery 文档](http://api.jquery.com/jQuery.ajax/)，错误函数接收三个参数：

1.  `jqXHR`：
2.  `textStatus`: 描述发生的错误类型的字符串
3.  `errorThrown`: 一个可选的异常对象，如果发生了

此外，它指出：

> 第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。

所以你可能想看看第二个和第三个参数的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:03:56.143

更新。

您应该只添加： timeout: ，在 $.ajax({}) 中的某处。此外，cache: false 可能会在某些情况下有所帮助。

$.ajax 有据可查，你应该在那里检查选项，可能会发现一些有用的东西。

[JQuery Ajax - 如何在进行 Ajax 调用时检测网络连接错误](https://stackoverflow.com/questions/1730692/jquery-ajax-how-to-detect-network-connection-error-when-making-ajax-call)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:07:22.583

```
$.ajax({ cache: false,
    url: "/Admin/Contents/GetData",
    data: { accountID: AccountID },
    success: function (data) {
        $('#CityID').html(data);
    },
    error: function (ajaxContext) {
        if(ajaxContext.status=="404")
         {
          //write your not found handler code here
         }
        else
        alert(ajaxContext.status)
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:07:56.500

如果您的意思是不同种类的响应结果，它就在这里 - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) - **statusCode**参数

# c++ - 本地对象的范围

> ID：10930509
> 
> 赞同：1
> 
> 时间：2012-06-07T11:02:12.190
> 
> 标签：c++, object, scope

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)
> [返回对局部变量的引用](https://stackoverflow.com/questions/6689030/return-reference-to-local-variable)

这是一个示例程序，用于检查函数内本地类对象的范围。在这里，我正在创建 A 类的对象并为其赋值，并通过引用返回该对象`Function()`。我想知道变量的作用域什么时候结束？。既然是堆栈对象（不是指针），它会在函数（）结束时被破坏吗？如果是这样，当它的引用值被分配给一个新对象时会发生什么？

```
 #include "stdafx.h"
  #include <iostream>

  class A
  {
  public:
    int a, b;
    A(int aa, int bb)
    {
      a = aa;
      b = bb;
    }
    A(){}
  };

  A& Function()
  {
    A object;
    object.a = 10;
    object.b = 20;
    return object;
  }

  int _tmain(int argc, _TCHAR* argv[])
  {
    A aaa = Function();
    std::cout<<"\nValue : "<<aaa.a<<" "<<aaa.b;
    getchar();
    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:04:44.033

> 既然是栈对象（不是指针），会不会在Function()结束时被销毁？

是的。

> 如果是这样，当它的引用值被分配给一个新对象时会发生什么？

未定义的行为。

如果您创建某些东西是为了返回它，请按值返回它。这就是价值观的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:04:57.017

> **怎么了？**

**未定义的行为**会发生什么！

堆栈分配的对象是本地/自动的，因为一旦它们所在 的范围（ ， ）结束，这些对象的所有分配都会被***隐式***清除。`{``}`

返回对本地对象的引用是一种未定义的行为。
未定义的行为意味着可以看到任何行为。该程序可能会工作，也可能会崩溃或随机运行。只是它不是一个有效的 c++ 程序，任何事情都可能发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:23:33.127

我相信您的问题在这里得到了回答：[在 C++ 中，通过引用扩展范围是否安全？](https://stackoverflow.com/questions/256724/in-c-is-it-safe-to-extend-scope-via-a-reference) 不过，它有些旧了。您可能想研究 C++11、右值引用和移动语义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:09:36.453

该对象将在`Function()`. 通过传值机制返回数据。

# android - android以编程方式将文本视图添加到相对布局

> ID：10930510
> 
> 赞同：0
> 
> 时间：2012-06-07T11:02:15.270
> 
> 标签：android, layout

嗨，我正在尝试基于 JSON 提要添加文本字段中断还是我为提要中的每个项目添加一个新的文本字段到视图中。

这是我想要达到的目标

```
info                     info
Team Name     1-3   Team Name
Scorer                 Scorer
                       Scorer
                       Scorer 
```

继承人我的布局到目前为止它有一切，但得分手

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:paddingBottom="30dp"
    android:paddingTop="10dp" >

    <TextView
        android:id="@+id/Division"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="18dp"
        android:layout_marginTop="5dp"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/HomeTeam"
        android:layout_width="115dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Division"
        android:layout_below="@+id/Division"
        android:text="Medium Text"
     android:textSize="20dp"
        android:textColor="@color/blue" 
        android:ellipsize="end"
        android:lines="2"
        android:gravity="left"
        android:textStyle="bold"
        />

    <TextView
        android:id="@+id/Attendence"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/HomeTeam"
        android:layout_alignParentRight="true"
        android:layout_marginRight="18dp"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/AwayTeam"
        android:layout_width="115dp"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/Attendence"
        android:layout_below="@+id/Attendence"
        android:text="Medium Text"
     android:textSize="20dp"
        android:textColor="@color/blue"
        android:ellipsize="end"
        android:lines="2"
        android:gravity="right"
        android:textStyle="bold"
         />

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Attendence"
        android:layout_centerHorizontal="true"
        android:text="-"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue" />

    <TextView
        android:id="@+id/AwayScore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TextView02"
        android:layout_alignBottom="@+id/TextView02"
        android:layout_toRightOf="@+id/TextView02"
        android:text="0"
         android:textSize="20dp"
        android:textColor="@color/blue"
        android:layout_marginLeft="10dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/HomeScore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TextView02"
        android:layout_alignBottom="@+id/TextView02"
        android:layout_toLeftOf="@+id/TextView02"
        android:text="0"
        android:textSize="20dp"
        android:textColor="@color/blue" 
        android:layout_marginRight="10dp"
        android:textStyle="bold"/>

    <TextView
        android:id="@+id/HomeScorers"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/HomeTeam"
        android:layout_below="@+id/HomeTeam"

        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/AwayScorers"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/AwayTeam"
        android:layout_below="@+id/AwayTeam"

        android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:19:25.987

请查看链接。此处以编程方式创建相对布局。我认为它可以帮助你。

[关联](http://gafurbabu.wordpress.com/2012/04/15/android-relativelayout-programmatically/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:15:00.917

*   创建特定行的 xml（如在列表中创建）添加一个空的
*   布局 xml 中的列表项线性布局/表格布局。
*   根据循环视图中的 json 数据膨胀 java 文件中的该行
*   将数据设置为列表获取函数中的集合。

# oracle11g - ADF - 覆盖区域设置的默认设置

> ID：10930518
> 
> 赞同：1
> 
> 时间：2012-06-07T11:03:06.233
> 
> 标签：oracle11g, locale

我们正在编写 ADF 应用程序，并且正在实施国际化。看起来 JavaVM 无法识别法罗语语言环境 (fa)，因此使用了错误的日期格式。

有没有办法覆盖 Oracle ADF 中特定于语言环境的日期格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:00:12.693

找到了！添加：`<formatting-locale>da_DK</formatting-locale>`到 trinidad-config.xml

# python - 保存文件 openoffice Python

> ID：10930520
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:03:12.687
> 
> 标签：python, save, openoffice-writer

我正在编写一个脚本来创建一个 OpenOffice 文档。在此之后我想保存文件。也许以后也可以作为PDF ..谷歌没有给我任何信息来解决这个问题..

我的问题是：应该使用什么方法来保存 openoffice-writer 文档？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:06:36.973

你应该看看这个类似的问题，它的答案涵盖了 MSWord 和 OOWriter（顺便说一句，创建一个 Word 文件可能是最容易用 OpenOffice 阅读的）。

[如何使用 Python 创建 Word 文档？](https://stackoverflow.com/questions/1035183/how-can-i-create-a-word-document-using-python)

亚历克西斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:40:15.307

您可以使用 pyrtf 或其变体创建 rtf 文件，对于 pdf，您可以使用 reportlab。这些是在 python 中使用的库，而不是远程控制 oo。还有其他格式的其他库。

# c# - 到达窗体标题文本？

> ID：10930525
> 
> 赞同：3
> 
> 时间：2012-06-07T11:03:32.820
> 
> 标签：c#

我想知道如何从像这样的对象的引用中获取 Windows 窗体中的标题文本

```
 reference. ??? = "Title one"; 
```

帮助是preciated！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:06:49.953

```
this.Text = "Title one"; 
```

如果这不是您的意思，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:06:59.340

使用`Text`该表单引用对象的属性。

```
formrefrence.Text = "New caption"; 
```

# c# - GetRange() 方法中通用列表的访问字段？

> ID：10930530
> 
> 赞同：1
> 
> 时间：2012-06-07T11:03:40.043
> 
> 标签：c#, generic-list

有人知道如何从 List<> 访问特定字段吗？我不知道如何访问 newList 对象中的特定字段。

```
 List<Liner> LX = new List<Liner>();

  public class Liner
  {
      public double Temperature { get; set; }
      public double Moisture { get; set; }
  }

newList = LX.OrderBy(x => x.Temperature).ToList();

var lstMXLast = newList.GetRange(8755, 5);  // I need only 5 specific Moisture records in this case. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:10:37.707

[`GetRange`](http://msdn.microsoft.com/en-us/library/21k0e39c.aspx)返回具有给定范围的列表的副本。因此，您的列表至少需要 8760 项。要仅选择`Moisture`对象的属性，可以使用 LINQ [`Select`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)：

```
var lstMoistures = newList.GetRange(8755, 5).Select(l => l.Moisture).ToList(); 
```

注意：`ToList`只有在要持久化查询时才需要最后的 。您`ToList`在`OrderBy`查询末尾是无用的，因为您想链接另一个查询。我只会尽可能晚地实现 LINQ 查询。

您还可以对整个事情使用 LINQ：

```
var lstMoistures = newList.Skip(8755).Take(5).Select(l => l.Moisture).ToList(); 
```

假设您最初想选择温度最高的 5 个衬垫，这应该会给您正确的结果：

```
var lstMoistures = LX.OrderByDescending(x => x.Temperature).Take(5).Select(l => l.Moisture).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:06:18.300

您可以使用仅从五个选定记录中`newList.GetRange(8755, 5).Select(l => l.Moisture)`获取组件。`Moisture``Liner`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:07:52.427

采用

```
var results = newList.GetRange(8755, 5).Select(m => m.Moisture); 
```

它会给你`Liner`返回的水分水平，`GetRange()`即 5 个水分水平。

# c# - 在 Windows 手机中滚动到达末尾时将项目添加到列表框？

> ID：10930533
> 
> 赞同：3
> 
> 时间：2012-06-07T11:03:50.580
> 
> 标签：c#, xaml, listbox, windows-phone-7.1

我需要的要求是..

最初我有一组绑定到 ListBox 的数据...如果我们滚动到最后，我将向集合中添加更多数据并更新 ListBox...有没有办法在 Windows phone 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:46:00.313

我想“实现这一点”是指检测 ListBox 是否位于末尾的可能性。在这种情况下，这应该会有所帮助。

您首先需要访问 ScrollViewer 控件，以查看用户是否滚动，以及当前位置是什么。如果我的页面名为 ListContent，那么这段代码应该会给您一个良好的开端：

```
public partial class ListContent
{
    private ScrollViewer scrollViewer;

    public ListContent()
    {
        InitializeComponent();
        Loaded += OnLoaded();
    }

    protected virtual void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        scrollViewer = ControlHelper.List<ScrollViewer>(lbItems).FirstOrDefault();
        if (scrollViewer == null) return;

        FrameworkElement framework = VisualTreeHelper.GetChild(viewer, 0) as FrameworkElement;
        if (framework == null) return;

        VisualStateGroup group = FindVisualState(framework, "ScrollStates");
        if (group == null) return;

        group.CurrentStateChanged += OnListBoxStateChanged;
    }

    private VisualStateGroup FindVisualState(FrameworkElement element, string name)
    {
        if (element == null)
            return null;

        IList groups = VisualStateManager.GetVisualStateGroups(element);
        return groups.Cast<VisualStateGroup>().FirstOrDefault(@group => @group.Name == name);
    }

    private void OnListBoxStateChanged(object sender, VisualStateChangedEventArgs e)
    {
        if (e.NewState.Name == ScrollState.NotScrolling.ToString())
        {
            // Check the ScrollableHeight and VerticalOffset here to determine
            // the position of the ListBox.
            // Add items, if the ListBox is at the end.

            // This event will fire when the listbox complete stopped it's 
            // scrolling animation
        }
    }
} 
```

如果您正在谈论动态添加数据，请确保您使用 ObservableCollection 来存储您的数据。添加的项目将自动显示在您的列表框中。

# google-app-engine - GAE：拉队列中的leaseTask是异步调用吗？

> ID：10930539
> 
> 赞同：0
> 
> 时间：2012-06-07T11:04:17.630
> 
> 标签：google-app-engine, asynchronous, task-queue, pull-queue

我想在应用程序中使用`GAE` `Task Queue`( `pull queue`) 作为消息队列。`receiveMessage`其他消息队列服务（例如）中的`AmazonSQS`调用是异步调用，为应用程序提供 Web 可扩展性。

有`pull queue`调用：`leaseTask`而不是`receiveMessage`我想知道这个调用是否是异步的，因为我需要为我的应用程序提供 Web 可扩展性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:08:39.870

leaseTasks 返回一个任务（或多个任务），因此它不能是异步的。

# iphone - 如何检查核心数据中的实体是否具有值 id？

> ID：10930542
> 
> 赞同：0
> 
> 时间：2012-06-07T11:04:31.727
> 
> 标签：iphone, ios, xcode, core-data

我想获取存储在核心数据中的一些数据的 id...这是为了检查数据库中是否已经存在某些值。如果存在，它会显示一些东西，如果没有的话。

id 总是改变，因为我在推送的最后一个视图中得到它。因此，如果该 ID 存在于数据库中，我想检测它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:39:15.587

我想你问的是核心数据中的查询。这是一个基本示例：

```
NSString *testEntityId = @"555";

NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
fetch.entity = [NSEntityDescription entityForName:@"YourEntity" inManagedObjectContext:moc];
fetch.predicate = [NSPredicate predicateWithFormat:@"entityId == %@", testEntityId];
NSArray *array = [moc executeFetchRequest:fetch error:nil]; 
```

您将获得一组匹配的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:30:09.707

您可以直接将对象与

```
[Object isEqualsTo:secondObject] 
```

否则，您可以在核心数据中创建一个整数，其字段名称如“GUID”或其他名称，并验证每个添加的整数都不存在...

祝你好运 ;）

# visual-studio - Visual Studio Scrum 1.0 Sprint Burndown 报告未显示待办事项

> ID：10930543
> 
> 赞同：0
> 
> 时间：2012-06-07T11:04:36.730
> 
> 标签：visual-studio, visual-studio-2010, tfs, scrum

为什么 Sprint Burndown 报告不显示待办事项？

我在当前 sprint 的 Sprint Burndown 报告中没有看到任何内容。

几乎所有任务都有待办事项状态。并且都有估计。所有任务也将迭代设置为当前冲刺。Sprint 也将在今天开始。

上一个 sprint 当前仅显示已完成项目而不是待办事项，但这可能是正确的（但这确实证明报告正在收集一些数据）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:21:05.940

Sprint 燃尽图将显示在当天开始之前完成的所有工作，因此不会显示在添加当天添加到 sprint 中的任务。等到明天，他们应该会神奇地出现。

# java - 在没有证书的 https 上的 java SSL

> ID：10930544
> 
> 赞同：4
> 
> 时间：2012-06-07T11:04:36.913
> 
> 标签：java, ssl, https, network-programming

`HttpURLConnection`是否可以在不使用 Java 证书的情况下使用 ssl ？

我想使用随机数或对称密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:41:52.740

尽管[SSL/TLS 并不严格要求证书](https://security.stackexchange.com/a/9502/2435)，但 HTTPS 需要证书，因为[RFC 2818](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)（特别是第 3.1 节）明确提到了 X.509 证书。

您将[在 ServerFault 上的这个答案](https://serverfault.com/a/343556/47187)中找到更多详细信息，这是一个非常相似的问题。

无论您在没有证书的情况下做什么都将超出 RFC 2818 的范围，但它可能仍然有效（并且有意义）。但是，其他实现支持它可能会有所不同。如果您选择不使用证书，您仍然需要一种方法来验证服务器的身份，以确保通信的安全性。

*编辑：*

JSSE的[Oracle 提供程序](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html)不支持 PSK 密码套件（或 OpenPGP 证书）。最接近共享密钥的是 Kerberos 密码套件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:15:37.563

不，你不能。您需要证书才能通过 HTTPS 进行连接。您可以出于您的目的使用自签名证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:34:24.277

是的，您可以在 SSL/TLS 中使用多种不同的身份验证方法，包括对称密钥（PSK 密码套件）和用户名/密码组合（SRP 密码套件）。我不能说 Java 内置机制，但[SecureBlackbox](http://www.eldos.com/sbb/java-security.php)产品（包括其 Java 版本）允许您在 SSL/TLS 通道的客户端和服务器端使用上述机制。这也适用于提供的 HTTPS 客户端和服务器组件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-05T00:45:43.143

是的，您可以使用预共享密钥来建立 TLS 连接，不需要证书。

Clover 发布了由 Bouncy Castle 提供支持的 TLS PSK JSSE 套接字工厂。

见[https://github.com/clover?q=pskfactories](https://github.com/clover?q=pskfactories)

另外，WolfSSL 似乎也有一个支持 PSK 的 JSSE 实现。不幸的是，它依赖于本机代码，因此启动和运行可能比纯 Java 需要更多的工作。除非您购买商业许可证，否则它也是 GPLv2。

见[https://www.wolfssl.com/products/wolfssl-jni-jsse/](https://www.wolfssl.com/products/wolfssl-jni-jsse/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T13:02:35.827

查看以下问题的公认答案：

[如何忽略 Apache HttpClient 4.0 中的 SSL 证书错误](https://stackoverflow.com/questions/2703161/how-to-ignore-ssl-certificate-errors-in-apache-httpclient-4-0)

您只需要创建一个基本上不检查任何内容而只信任所有内容的 TrustManager。虽然我可以明白为什么这在开发时很有用，但这确实否定了 SSL 的目的。TrustManager 可以避免中间人攻击，其中第三方冒充服务器拦截和操纵数据等，因此如果您不验证服务器证书，任何人都可以提供“无效”证书！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-07T11:21:50.553

SSL 需要证书，但您可以像这样创建自签名证书：

```
keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048 
```

该证书将存储在 keystore.jks 中，有效期为 360 天。

`keystoreFile`根据您的 http 服务器实现，您通常会通过提供参数将其指向密钥库，并通过 a`keystorePass`设置密码（从 Apache Tomcat 的 HTTP 连接器获取的属性名称，但它们在其他 http 服务器中是相似的。

# windows - 如何在 32 位 Windows 中安装 cURL？

> ID：10930546
> 
> 赞同：-3
> 
> 时间：2012-06-07T11:04:42.843
> 
> 标签：windows, curl

如何在 32 位 Windows 中安装 cURL？

当我 [从 Windows 控制台执行运行 cURL 命令时，](https://stackoverflow.com/questions/2710748/run-curl-commands-from-windows-console)我遇到了这个问题：

![错误](../Images/bd2f0e2fd0cfdad1e011d47be726fbf6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T19:33:56.887

在 Windows 上安装 32 位 cURL 非常简单。您甚至可以按照屏幕截图的分步程序进行操作。您可以按照**[使 cURL 在 Windows 7 上工作中](http://blog.abelcallejo.com/2013/09/making-curl-work-on-windows-7.html)**的说明进行操作。那里有 32 位和 64 位安装的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:10:55.517

在 windows 中使用 Curl 的经验较少，但从你的错误来看，似乎你的 curl 可能没有安装，所以你可以尝试为你的系统安装另一个版本的 libcurl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T11:21:06.310

如果你安装了 git，curl 命令可以从 git bash 运行。

# java - R - lm 和 r 平方

> ID：10930548
> 
> 赞同：0
> 
> 时间：2012-06-07T11:04:43.993
> 
> 标签：java, r, statistics, lm

我一直在处理这个网站和其他网站上的问题，我只是想确保我理解我的做法是正确的，然后我需要一些建议来分析结果。

我将 n 个二进制矩阵从 Java 导出到 R（使用 jri），然后我想针对预期的 0 向量运行 lm()。

这是将矩阵导入 R 的导出函数

```
REXP x = re.eval("selectionArray <- c()");

for (int j = 0; j < currentSelection.length; j++){
    boolean result = re.assign("currentSNPs", currentSelection[j]);
        if (result == true){
             x = re.eval("selectionArray <- rbind(selectionArray, currentSNPs)");
        }
} 
```

那么我想执行 lm() 函数来获取 r 平方值

```
 x = re.eval("fm = lm(selectionArray ~ 0)"); 
```

我知道此时我需要使用 summary(fm) 来获取 r 平方值，但我不确定如何将它们拉出来或它们在这一点上的含义。我想知道每列与预期 0 值的偏差的重要性。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T23:48:08.490

从名为“m”的“lm”对象中提取 R^2 值

`summary(m)$r.squared`

您始终可以使用该`str()`函数查看 R 中对象的结构；在这种情况下你想要`str(summary(m))`

但是，尚不清楚您要在这里完成什么。`lm()`在您指定 的函数的公式参数中`selectionArray ~ 0`，这没有意义有两个原因：1）如前所述，公式右侧的 0 对应于一个模型，其中您的预测变量是一个零向量和无法定义与该预测变量对应的 beta 系数。2) 你的结果 selectionArray 是一个矩阵。据我所知，`lm()`没有设置为具有多个结果。

您是否尝试测试 selectionArray 的每一列与 0 不同的重要性？如果是这样，任何至少有一次成功 (1) 的列都与 0 列显着不同。如果您对每列中成功概率的置信区间感兴趣，请使用以下代码。请注意，这不会针对多重比较进行调整。

首先让我们从一个玩具示例开始来演示这个概念

```
v1 <- rbinom(100,size=1,p=.25)  
#create a vector, length 100, 
#where each entry corresponds to the 
#result of a bernoulli trial with probability p

binom.test(sum(v1), n=length(v1), p = 0)
##let's pretend we didn't just generate v1 ourselves, 
##we can use binom.test to determine the 95% CI for p

#now in terms of what you want to do...
#here's a dataset that might be something like yours:
selectionArray <- sapply(runif(10), FUN=function(.p) rbinom(100,size=1,p=.p))
#I'm just generating 10 vectors from a binomial distribution 
#where each entry corresponds to 1 trial and each column 
#has a randomly generated p between 0 and 1

#using a for loop
#run a binomial test on each column, store the results in binom.test.results
binom.test.results <- list()
for(i in 1:ncol(selectionArray)){
    binom.test.results[[i]] <- binom.test(sum(selectionArray[,i]), 
        n=nrow(selectionArray), p=0)
}

#for loops are considered bad programming in r, so here's the "right" way to do it:
binom.test.results1 <- lapply(as.data.frame(selectionArray), function(.v){
    binom.test(sum(.v), n=nrow(selectionArray), p = 0)
})

#using str() on a single element of binom.test.result will help you 
#identify what results you'd like to extract from each test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:29:23.673

我对Java不太了解，所以我不谈论这个。

那么，你有一个 0 和 1 值的矩阵，没有其他二进制数？

并且您想知道列的均值是否有效。不同于0？

这意味着，您应该进行假设检验，而不一定要进行回归。然而，回归可以等同于这样的测试。

`lm(y~0)`没有意义。如果你只想要一个拦截，你应该使用`lm(y~1)`. 但是，这相当于 t 检验，这在统计上是不正确的。

我怀疑使用`fit<-glm(y~1,family=binomial)`and 比提取 p-value更好`p<-summary(fit)$coef[4]`，但我不是统计学家。

# php - 查找 CSV 单元外壳

> ID：10930549
> 
> 赞同：2
> 
> 时间：2012-06-07T11:04:46.300
> 
> 标签：php, file, class, csv, quotes

我目前正在研究一个使用 PHP[`fgetcsv()`](http://php.net/fgetcsv)函数的 CSV 处理类。

我希望能够检测 CSV 文件的分隔符和附件字符。

现在我只是想弄清楚如何找到单元外壳，因为我知道我有一些文件要解析：

```
## *CSV File* ##
,,,foo,bar,,cats are
dead,lorem ipsum,csv,"this cell's enclosure is set",, 
```

无论如何我想不出一个好的算法，现在我只想暴力破解所有东西（用不同的附件读取文件并检查输出）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:25:43.983

您可以尝试所有已知的组合，然后检查结果是否有效：

*   所有行具有相同数量的值

如果这在没有外壳的情况下是可能的，那么您应该更喜欢没有外壳。

# java - 是否可以为条形图中的每个类别自定义标签？

> ID：10930550
> 
> 赞同：3
> 
> 时间：2012-06-07T11:04:52.457
> 
> 标签：java, jfreechart

最近，我需要创建一个条形图来显示每个项目的数据。这是一个例子：

![条形图示例](../Images/19fd389b2e882d0ebcf951ed2941d289.png)

如您所见，`Category`是项目的名称，是该项目`Series`中不同类型的数据。

但是，由于系统不保证项目名称的唯一性，将其用作类别会导致问题，并且我将无法使用项目名称为不同的项目生成 URL。另一方面，如果我使用唯一 id 作为类别，我将无法显示项目名称。这让我陷入了困境。

所以我的问题是：

有没有办法在 JFreeChart 中动态生成自定义类别标签？

类似于`CategoryItemLabelGenerator`类别本身的东西。所以我可以使用唯一 ID 作为类别，但在图表中显示项目名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T16:44:26.080

答案取决于您选择如何`CategoryDataset`实现`KeyedValues2D`接口。接口期望键是唯一的，而默认实现，`DefaultKeyedValues2D`要求键是`Comparable`不可变的。

唯一`String`实例是典型的具体参数类型，但没有`JFreeChart`强制执行唯一约束。一种方法是将您包装`String`在一个实现`Comparable`并强制唯一性的类中。这`class Value`是一个利用底层实现的[示例。](https://sites.google.com/site/drjohnbmatthews/table)`Double`您的实现将需要一个附加属性来区分一种`project`形式，可能使用源关系的主键。您可以覆盖`toString()`以获取名称的格式化表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T02:35:31.427

This is how I implement `UniqueValue`

```
public class UniqueValue implements Comparable<UniqueValue> {

    private final String uniqueId;
    private final String value;

    public UniqueValue(String uniqueId, String value) {
        this.uniqueId = uniqueId;
        this.value = value;
    }

    @Override
    public int compareTo(UniqueValue o) {
        return uniqueId.compareTo(o.uniqueId);
    }

    @Override
    public int hashCode() {
        return uniqueId.hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj instanceof UniqueValue) {
            return uniqueId.equals(((UniqueValue)obj).uniqueId);
        }
        return false;
    }

    @Override
    public String toString() {
            return value;
        }
    } 
```

You can use this class to deal with the uniqueness issue I mentioned in questions.

* * *

## UPDATE

However, since JFreeChart use `toString()` method to create the label for categories. So the `toString()` implementation in `UniqueValue` can be pretty weird. So here is another attempt.

First, a generator interface

```
public interface CategoryLabelGenerator {
    public String generate(Comparable<?> category);
} 
```

then I make a subclass for `CategoryAxis`

```
public class CategoryLabelCustomizableCategoryAxis extends CategoryAxis {

    private static final long serialVersionUID = 1L;
    private CategoryLabelGenerator labelGenerator;

    public CategoryLabelCustomizableCategoryAxis(String label) {
        super(label);
    }

    public void setCategoryLabelGenerator(CategoryLabelGenerator generator) {
        this.labelGenerator = generator;
    }

    @Override
    protected TextBlock createLabel(Comparable category, float width, 
        RectangleEdge edge, Graphics2D g2) {
        if (generator == null) {
            return super.createLabel(category, width, edge, g2);
        }
        return TextUtilities.createTextBlock(
            labelGenerator.generate(category),  // generate label for category on the fly
            getTickLabelFont(category), getTickLabelPaint(category), width,
            getMaximumCategoryLabelLines(), new G2TextMeasurer(g2));
    }
} 
```

example :

```
JFreeChart chart = makeChart();
CategoryPlot plot = chart.getCategoryPlot();

CategoryAxis axis = new CategoryLabelCustomizableCategoryAxis();
axis.setCategoryLabelGenerator(new MyCategoryLabelGenerator());
plot.setDomainAxis(axis); 
```

This is how I customize category label. (At least for chart that use `CategoryAxis` as domain axis..)

# c# - Facebook API 入门

> ID：10930553
> 
> 赞同：2
> 
> 时间：2012-06-07T11:05:30.377
> 
> 标签：c#, wpf, facebook, facebook-graph-api

我想在 wpf (c#) 中开发基于桌面的应用程序。这也需要登录他们的 Facebook 帐户的选项。所以我已经在 fb 开发者网站上注册了我的应用程序并下载了 C# sdk，并参考了一些堆栈溢出链接。**总是给连接失败**

// 我用过的代码

```
 string APIKey = ConfigurationManager.AppSettings["API_Key"];
    string APISecret = ConfigurationManager.AppSettings["API_Secret"];

Facebook.Session.ConnectSession connectsession = new Facebook.Session.ConnectSession(APIKey, APISecret);
if (connectsession.IsConnected())
            {
        Facebook.Rest.Api api = new Facebook.Rest.Api(connectsession);
        var friends = api.Friends.GetLists();
        foreach (var friend in friends)
        {
            System.Console.WriteLine(friend.name);
        }
} 
```

**一些网站告诉 C# sdk 已弃用。**

[http://developers.facebook.com/blog/post/624/](http://developers.facebook.com/blog/post/624/)

[Facebook Graph C# SDK Ver 6.0：无法在应用页面上创建事件](https://stackoverflow.com/questions/9965672/facebook-graph-c-sharp-sdk-ver-6-0-unable-to-create-event-on-apps-page)

请帮助我使用 wpf 在我的基于桌面的应用程序中开始 facebook api 集成。有人要求使用图形 api，但我怀疑这是否会支持 c#。am struk 开始我的 facebook 整合步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:31:25.917

C#完全支持Graph Api，因为它是基于rest的，你可以通过C#代码调用rest服务，显然url调用不同于方法调用，在graph api中你可以调用url并解析它的响应。我建议使用graph api，Facebook没有提供C# SDK，它是一个由开源社区维护的开源库，但是graph api帮助是由Facebook直接提供的。

检查[here](https://stackoverflow.com/questions/10721417/facebook-fan-page-app/10731744#10731744)和[here](https://stackoverflow.com/questions/3127143/which-sdk-to-use-for-asp-net-with-facebook/10583352#10583352)以了解如何通过C#调用graph api

# algorithm - 查找表格中的最小距离

> ID：10930554
> 
> 赞同：5
> 
> 时间：2012-06-07T11:05:33.950
> 
> 标签：algorithm, minimum

我有一张尺寸为 m * n 的表格，如下所示

```
2    6    9    13
1    4    12   21
10   14   16   -1 
```

关于这张表的一些限制：

1.  每行中的元素按升序排序（自然排序）。
2.  A -1 表示该单元格对于计算而言没有意义，即那里不存在任何元素。
3.  -1 之后的任何元素都不能出现在一行中。
4.  所有单元格可以具有介于 0 和 N 之间的正数或 -1。
5.  没有两个单元格具有相同的正数，即 -1 可以出现多次，但没有其他数字可以出现。

问题：我想从表中找到一组包含 n 个数字的 S，其中该集合必须仅包含每一行中**的一个数字，并且 max(S) - min(S) 尽可能小。**

例如，上表给了我 S = 12,13,14。

如果可以解决这个问题，我将不胜感激。我的解决方案很复杂，而且需要 `O(m^n)`而且太多了。我想要一个最佳解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:17:12.337

`O((m*n)^2 * nlog(m))`这是我可以证明有效的蛮力算法：

```
min <- INFINITY
For each 2 numbers in different rows, let them be a,b
   for each other row: 
        check if there is a number between a and b
    if there is a matching number in every other row:
        min <- min{min,|a-b|} 
```

**解释：**
检查a和b之间是否有数字可以使用二分搜索来完成，并且a，b`O(logm)`
有`O((n*m)^2)`不同的可能性。

这个想法是彻底检查产生最大差异的对，并检查它是否给出了“可行”的解决方案（该解决方案中的所有其他元素都在范围 [a,b] 内），并得到最小化之间差异的对所有“可行”的解决方案。

* * *

**编辑**：删除了我提出的第二个解决方案，这是贪婪和错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:38:08.870

1.  将每行的所有第一个元素的位置放入优先级队列（最小堆）。
2.  从队列中删除最小的元素并将其替换为同一行中的下一个元素。
3.  重复第 2 步，直到某行中不再有与“-1”不同的元素。计算每次迭代的 max(S) - min(S)，如果它小于任何先前的值，则更新迄今为止最好的集合 S。

时间复杂度为 O(m*n*log(m))。

# ios - 在 iOS 5 中的 UIImageView 上获取触摸事件的问题

> ID：10930559
> 
> 赞同：0
> 
> 时间：2012-06-07T11:05:49.500
> 
> 标签：ios, uiimageview

我在检测 UIImageView 上的触摸事件时遇到问题。我对 UIImageView 进行了分类并覆盖了 canBecomeFirstResponder、touchedBegan 和 touchesEnded：

```
@implementation ImageViewNext

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.userInteractionEnabled = YES;
    }
    return self;
}

-(BOOL)canBecomeFirstResponder
{
    return YES;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Touches Began event");
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Touches Ended");
} 
```

我确保所有父视图都启用了用户交互。

但我没有得到我的事件？

我试图在这里找到解决方案，但没有任何运气。但在我的搜索中，我发现有些人使用“UIGestureRecognizer”来获得相同的效果。那么作为一个附带问题，使用覆盖方法或使用 UIGestureRecognizer 的“正确”解决方案是什么？我不喜欢为普通按钮提供图像的解决方案，因此请远离这些帖子:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:16:24.037

你确定你`initWithFrame:`的被叫？UIViews 有两个指定的初始化器，`initWithFrame:`和`initWithCoder`，这取决于它们是如何创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:13:10.327

我不知道您为什么没有收到触摸事件，但是使用 UIGestureRecognizer 回答您问题的另一部分将显着简化您对任何可用识别器的手势的触摸处理。它使用起来更简单，您需要的代码也更少。

此外，如果将来您需要在不同的触摸事件之间进行协商（是否点击拖动类型的问题），那么所有这些逻辑都可以轻松处理。

# jquery - 如果元素有类，如何更改元素的值？

> ID：10930560
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:05:53.300
> 
> 标签：jquery

如果#new_user，我需要更改输入的值属性：

*   对艺术家有 .artist-registration
*   有 .team-registration 到 Artist_team
*   对消费者有 .consumer-registration

最优雅的解决方案是什么？

提前致谢！

```
<form id="new_user" class="artist-registration">
<input type="hidden" value="artist" name="user[profile_attributes][role]" id="user_profile_attributes_role">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:16:12.443

您的问题不是很清楚，但我认为您是说如果表单元素具有“艺术家注册”类，则将输入元素的值设置为“艺术家”，对于其他类名称依此类推？

如果你知道那只`#new_user`会有一个类，那么就像这样：

```
var val = ""; // default blank value will apply if no classes match

switch ($("#new_user").attr("class")) {
   case "artist-registration":
      val = "artist";
      break;
   case "team-registration":
      val = "artist_team";
      break;
   case "consumer-registration":
      val = "consumer";
      break;
}
$('#user_profile_attributes_role').val(val); 
```

如果`#new_user`可能有多个类，那么也许：

```
var val = "",
    $nu = $("#new_user");

switch (true) {
   case $nu.hasClass("artist-registration"):
      val = "artist";
      break;
   case $nu.hasClass("team-registration"):
      val = "artist_team";
      break;
   case $nu.hasClass("consumer-registration"):
      val = "consumer";
      break;
}
$('#user_profile_attributes_role').val(val); 
```

后者将根据*首先*匹配的类别设置值，即，如果表单具有所有三个类别，则“艺术家注册”将优先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:17:14.830

使用[jQuery](http://jquery.org)：

```
var $input = $('#new_user');
$input.filter('.artist-registration').val('artist');
$input.filter('.team-registration').val('artist_team');
$input.filter('.consumer-registration').val('consumer'); 
```

第一行找到你的`<input>`元素。`$input`严格来说是一个jQuery元素集。

在以下每一行中，`filter()`返回一个缩减的元素集，其元素与给定的 CSS 选择器匹配。`input`在命名类与元素的实际类不匹配的两种情况下，此集合为空。

然后该`val()`函数更新给定集合中每个元素的值。对于两个不匹配的调用，集合是空的，所以调用是空操作。

# zoho - 将 Zoho Creator 表单保存在 crm 和 mysql 数据库中

> ID：10930561
> 
> 赞同：0
> 
> 时间：2012-06-07T11:06:02.067
> 
> 标签：zoho

我喜欢创建一个注册表单，不仅将其中的一部分存储在 Zoho CRM 中，而且我还喜欢将数据保存在我服务器上的 MySQl 数据库中。

例如，在注册表格中，用户应输入用户名和密码。我喜欢把它放在数据库中，但名称等应该在 Zoho CRM 中。

我该怎么做？我想也许是 Curl 左右。那正确吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:26:42.420

将表单数据发布到两个不同服务器的更好更简单的方法是使用 Zoho Creator 表单。Zoho Creator 提供将数据推送到 Zoho CRM 的 deluge 任务，并且存在将数据推送到任何 HTTP 服务器的 postUrl 任务。有关详细信息，请参阅以下链接。

1.  [https://forums.zoho.com/topic/push-data-to-zoho-crm](https://forums.zoho.com/topic/push-data-to-zoho-crm)
2.  [https://www.zoho.com/creator/help/script/post-url.html](https://www.zoho.com/creator/help/script/post-url.html)

# node.js - 使用 node-http-proxy 的默认路由？

> ID：10930564
> 
> 赞同：3
> 
> 时间：2012-06-07T11:06:13.990
> 
> 标签：node.js, node-http-proxy

我想做一个简单的 node.js 反向代理来在同一个端口 80 上托管多个 Node.JS 应用程序以及我的 apache 服务器。所以我在[这里找到了这个示例](http://nerdpress.org/2012/04/20/hosting-multiple-express-node-js-apps-on-port-80/)

```
var http = require('http')
, httpProxy = require('http-proxy');

httpProxy.createServer({
    hostnameOnly: true,
    router: {
        'www.my-domain.com': '127.0.0.1:3001',
        'www.my-other-domain.de' : '127.0.0.1:3002'
    }
}).listen(80); 
```

问题是我想让例如 app1.my-domain.com 指向 localhost:3001，app2.my-domain.com 指向 localhost:3002，而所有其他都指向端口 3000，例如，我的 apache 服务器在哪里将运行。我在文档中找不到有关如何拥有“默认”路由的任何内容。

有任何想法吗？

**编辑**我想这样做是因为我的 apache 服务器处理了很多域/子域，并且我不想每次想要添加新的子域时都必须修改此路由表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-25T20:40:34.100

近一年来，我已经成功地使用接受的答案来拥有一个默认主机，但现在有一种更简单的方法，即 node-http-proxy 允许在主机表中使用 RegEx。

```
var httpProxy = require('http-proxy');

var options = {
  // this list is processed from top to bottom, so '.*' will go to
  // '127.0.0.1:3000' if the Host header hasn't previously matched
  router : {
    'example.com': '127.0.0.1:3001',
    'sample.com': '127.0.0.1:3002',
    '^.*\.sample\.com': '127.0.0.1:3002',
    '.*': '127.0.0.1:3000'
  }
};

// bind to port 80 on the specified IP address
httpProxy.createServer(options).listen(80, '12.23.34.45'); 
```

要求您没有`hostnameOnly`设置为 true，否则不会处理 RegEx。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:38:59.780

这并没有融入 node-http-proxy，但它的代码很简单：

```
var httpProxy = require('http-proxy'),
    http = require('http'),
    addresses;

    // routing hash
addresses = {
  'localhost:8000': {
    host: 'localhost',
    port: 8081
  },
  'local.dev:8000': {
    host: 'localhost',
    port: 8082
  },
  'default': {
    host: 'xkcd.com',
    port: 80
  }
};

// create servers on localhost on ports specified by param
function createLocalServer(ports) {
  ports.forEach(function(port) {
    http.createServer(function (req, res) {
      res.writeHead(200, {'Content-Type': 'text/html'});
      res.end('<h1>Hello from ' + port + '</h1');
    }).listen(port);
  });
  console.log('Servers up on ports ' + ports.join(',') + '.');  
}
createLocalServer([8081, 8082]);

console.log('======================================\nRouting table:\n---');
Object.keys(addresses).forEach(function(from) {
  console.log(from + ' ==> ' + addresses[from].host + ':' + addresses[from].port);
});

httpProxy.createServer(function (req, res, proxy) {
  var target;

      // if the host is defined in the routing hash proxy to it
      // else proxy to default host
  target = (addresses[req.headers.host]) ? addresses[req.headers.host] : addresses.default;

  proxy.proxyRequest(req, res, target);
}).listen(8000); 
```

如果您在端口 8000 上访问 localhost，它将代理到 localhost 端口 8081。

如果您在端口 8000 上访问 127.0.0.1（未在我们的路由哈希中定义），它将转到默认的“位置”，即端口 80 上的 xkcd.com。

# xslt - XSLT foreach 循环

> ID：10930567
> 
> 赞同：0
> 
> 时间：2012-06-07T11:06:25.710
> 
> 标签：xslt, variables, foreach

我最近几周才开始接触xslt和xml，我迫切需要一些帮助来编写一些代码来实现我想要实现的目标。我有以下xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<abc1 formName="Form">
    <Level1>
        <Element1>ZZZ</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Pears</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Milkshakes</SubElement5>
        </Element2>
    </Level1>
    <Level1>
        <Element1>XXX</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Kiwifruit</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Soda</SubElement5>
        </Element2>
    </Level1>
</abc1> 
```

和下面的 html 表：

```
<table>
<tr> 
    <td width="180" > Row 1</td>
    <td width="540" colspan="4"> Cell_A</td>
</tr>
<tr> 
    <td width="180" >Types</td>
    <td width="180" >Type 1</td>
    <td width="180" >Type 2</td>
    <td width="180" >Type 3</td>
</tr>
<tr> 
    <td width="180" >Row 2</td>
    <td width="180" >Cell_B</td>
    <td width="180" >Cell_C</td>
    <td width="180" >Cell_D</td>
</tr>
<tr> 
    <td width="180" > Row 3</td>
    <td width="180" >Cell_E</td>
    <td width="180" >Cell_F</td>
    <td width="180" >Cell_G</td>
</tr>
<tr> 
    <td width="180" >Row 4</td>
    <td width="180" >Cell_H</td>
    <td width="180" >Cell_I</td>
    <td width="180" >Cell_J</td>
</tr>
<tr> 
    <td width="180" > Row 5</td>
    <td width="540" colspan="4"> Cell_K</td>
</tr>
</table> 
```

我无法使用 xslt 将数据从 xml 提取到表中，因为我需要应用的规则使其非常复杂。以下是需要应用于我遇到问题的单元格的规则。

(1) 如果`<Element1>`整个 xml 中的值相同，则：

如果`<Element1>`= 'ZZZ' 那么 Cell_B = '10'，Cell_C = '20'，并且 Cell_D = '30'

如果`<Element1>`= 'XXX'，则 Cell_B = '100'，Cell_C = '90'，并且 Cell_D = '80'

但如果`<Element1>`xml 中的值不同，则：

Cell_B = '10,100'、Cell_C = '20,90' 和 Cell_D = '30,80'

(2) 如果`<SubElement5>`整个 xml 中的值相同，则：

Cell_J = 的值`<SubElement5>`

但如果`<SubElement5>`xml 中的值不同，则：

Cell_J =`<SubElement5>`以逗号分隔的两个值的值

所以在这种情况下，Cell_J 的值将是“奶昔，苏打水”。

我一直在尝试使用不同的东西：

```
<xsl:for-each select="./Level1/Element2">
<xsl:value-of select="./SubElement5"/>
</xsl:for-each> 
```

但我无法确定我可以使用哪些代码来检查它们是否相同，因为我无法覆盖变量的值。

**编辑：** 请注意，我上面指出的单元格（单元格 b、c、d 和 j）是我唯一需要帮助的单元格。此外，`Element1`我可以遇到四个潜在值：ZZZ、XXX、AAA 和 BBB。其中每个所需的值是：（单元格 b、c 和 d）

```
ZZZ:10,20,30
XXX:100,90,80
AAA:40,30,30
BBB:50,30,20 
```

因此，如果整个 xml 中只有一个潜在值，则单元格应显示为上述值。如果两个元素 1 的值不同，则单元格应列出每个单元格中的上述值，用逗号分隔。

关于cell_j，我会试着解释得更好一点。

首先，我需要确定`<SubElement5>`整个 xml 中的值是否相同。在这种情况下，它不是，在一个部分是奶昔，在另一个部分是“苏打水”。因此，cell_J 应包含文本“奶昔，苏打水”。

如果 xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
    <abc1 formName="Form">
        <Level1>
            <Element1>ZZZ</Element1>
            <Element2>
                <SubElement1>Apples</SubElement1>
                <SubElement2>Oranges</SubElement2>
                <SubElement3>Pears</SubElement3>
                <SubElement4>Blueberries</SubElement4>
                <SubElement5>Milkshakes</SubElement5>
            </Element2>
        </Level1>
        <Level1>
            <Element1>XXX</Element1>
            <Element2>
                <SubElement1>Apples</SubElement1>
                <SubElement2>Oranges</SubElement2>
                <SubElement3>Kiwifruit</SubElement3>
                <SubElement4>Blueberries</SubElement4>
                <SubElement5>Milkshakes</SubElement5>
            </Element2>
        </Level1>
    </abc1> 
```

那么 cell_j 的值就是“奶昔”。

提前感谢任何可以提供帮助的人。

**回答这个问题：**

总结伍迪在下面所做的事情以供任何人将来参考：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/abc1">
           <xsl:variable name="elements" select="//Element1[not(preceding::Element1 = .)]"/>
<table>
<tr> 
    <td width="180" > Row 1</td>
    <td width="540" colspan="4"> Cell_A</td>
</tr>
<tr> 
    <td width="180" >Types</td>
    <td width="180" >Type 1</td>
    <td width="180" >Type 2</td>
    <td width="180" >Type 3</td>
</tr>
<tr> 
    <td width="180" >Row 2</td>
    <td width="180" > <xsl:for-each select="$elements">
            <xsl:if test="position() != 1">,</xsl:if>
            <xsl:choose>
                <xsl:when test=". = 'AAA'">40</xsl:when>
                <xsl:when test=". = 'BBB'">50</xsl:when>
                <xsl:when test=". = 'XXX'">100</xsl:when>
                <xsl:when test=". = 'ZZZ'">10</xsl:when>
            </xsl:choose>
        </xsl:for-each></td>
    <td width="180" ><xsl:for-each select="$elements">
            <xsl:if test="position() != 1">,</xsl:if>
            <xsl:choose>
                <xsl:when test=". = 'AAA'">30</xsl:when>
                <xsl:when test=". = 'BBB'">30</xsl:when>
                <xsl:when test=". = 'XXX'">90</xsl:when>
                <xsl:when test=". = 'ZZZ'">20</xsl:when>
            </xsl:choose>
        </xsl:for-each></td>
    <td width="180" ><xsl:for-each select="$elements">
            <xsl:if test="position() != 1">,</xsl:if>
            <xsl:choose>
                <xsl:when test=". = 'AAA'">30</xsl:when>
                <xsl:when test=". = 'BBB'">20</xsl:when>
                <xsl:when test=". = 'XXX'">80</xsl:when>
                <xsl:when test=". = 'ZZZ'">30</xsl:when>
            </xsl:choose>
        </xsl:for-each></td>
</tr>
<tr> 
    <td width="180" > Row 3</td>
    <td width="180" >Cell_E</td>
    <td width="180" >Cell_F</td>
    <td width="180" >Cell_G</td>
</tr>
<tr> 
    <td width="180" >Row 4</td>
    <td width="180" >Cell_H</td>
    <td width="180" >Cell_I</td>
    <td width="180" ><xsl:for-each select="//SubElement5[not(preceding::SubElement5/text() = text())]">
       <xsl:if test="position() &gt; 1">, </xsl:if>
       <xsl:value-of select="."/>
    </xsl:for-each></td>
</tr>
<tr> 
    <td width="180" > Row 5</td>
    <td width="540" colspan="4"> Cell_K</td>
</tr>
</table>
        </xsl:template>
    </xsl:stylesheet> 
```

伍迪，再次感谢你。这太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:48:22.050

你的问题的关键是你不能遍历数据来得到你想要的，因为你想要的答案是固定的，即，如果这个，输出那个，如果那个，输出另一个。因此，您需要一次完成每个部分。

是否只有两个Level1？

```
 <xsl:template match="/abc1">
            <table>
                <tr> 
                    <td width="180" >Row 2</td>
            <xsl:choose>
                <xsl:when test="not(Level1/Element1='XXX')">
                    <!-- only ZZZ -->
                        <td width="180" >10</td>
                        <td width="180" >20</td>
                        <td width="180" >30</td>
                </xsl:when>
                <xsl:when test="not(Level1/Element1='ZZZ')">
                    <!-- only YYY -->
                        <td width="180" >100</td>
                        <td width="180" >90</td>
                        <td width="180" >80</td>   
                </xsl:when>
                <xsl:otherwise>
                    <!-- some combination -->
                        <td width="180" >10,100</td>
                        <td width="180" >20,90</td>
                        <td width="180" >30,80</td>
                </xsl:otherwise>
                </xsl:choose>
                </tr>
                .. continued
            </table>
        </xsl:template>
    </xsl:stylesheet> 
```

依此类推。如果您有许多行，并且您希望它们用逗号分隔，那么您需要按部分进行操作，或者如果您必须为每个部分放置一个逗号列表。

抱歉，我看不到你想用 cell_j 做什么，而且似乎没有其他规则

编辑：但是，如果您有很多项目而不仅仅是 2，并且您需要一个逗号分隔的列表，您可以使用 xpath 来完成，所以：

```
<tr>
  <td>
    <xsl:for-each select="//SubElement5[not(preceding::SubElement5/text() = text())]">
       <xsl:if test="position() &gt; 1">, </xsl:if>
       <xsl:value-of select="."/>
    </xsl:for-each>
  </td>
  .. maybe other rows the same
</tr> 
```

再次编辑：

因此，对于您关于 cell_j 的更新问题，上面给出了正确的值。

对于您在第一部分中的更新，如果您希望显示所有值（因此如果您拥有所有 4 个选项，则有 4 个值），可以对同一主题进行变体。不幸的是，由于您对每个都有固定的值，并且您必须逐个执行，因此您需要在一个很大的部分中执行此操作，因此在一个循环中：

```
<xsl:for-each select="//Element1[not(preceding::Element1/text() = text())]"> 
```

这将使您进入每个唯一条目的循环，然后根据该值是否为 XXX、ZZ​​Z 等来选择元素。

**再次编辑**

有几种方法可以完成您想要的第一部分，包括递归函数、外部文档和使用各种不同 XSLT 实现的节点集函数，但作为一种完全通用的易于查看的方式，这有点罗嗦，但很容易见版本（我希望）：

```
<xsl:variable name="elements" select="//Element1[not(preceding::Element1 = .)]"/>
<table>
    <tr> 
        <td width="180" >Row 2</td>
    <td>
        <xsl:for-each select="$elements">
            <xsl:if test="position() != 1">,</xsl:if>
            <xsl:choose>
                <xsl:when test=". = 'AAA'">40</xsl:when>
                <xsl:when test=". = 'BBB'">50</xsl:when>
                <xsl:when test=". = 'XXX'">100</xsl:when>
                <xsl:when test=". = 'ZZZ'">10</xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </td>
    <td>
        <xsl:for-each select="$elements">
            <xsl:if test="position() != 1">,</xsl:if>
            <xsl:choose>
                <xsl:when test=". = 'AAA'">30</xsl:when>
                <xsl:when test=". = 'BBB'">30</xsl:when>
                <xsl:when test=". = 'XXX'">90</xsl:when>
                <xsl:when test=". = 'ZZZ'">20</xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </td>
    <td>
        <xsl:for-each select="$elements">
            <xsl:if test="position() != 1">,</xsl:if>
            <xsl:choose>
                <xsl:when test=". = 'AAA'">30</xsl:when>
                <xsl:when test=". = 'BBB'">20</xsl:when>
                <xsl:when test=". = 'XXX'">80</xsl:when>
                <xsl:when test=". = 'ZZZ'">30</xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </td>
    </tr>
 </table> 
```

实际上 - 我不确定对变量（在这种情况下为 $elements ）的迭代是否是标准，它可能是 saxon 和 msxsl 的东西，但如果不是，你可以用值替换它（//Element1 [不是（前面的::Element1 = .)]）

# vb.net - 高质量全屏截图 VB.Net

> ID：10930569
> 
> 赞同：4
> 
> 时间：2012-06-07T11:06:34.883
> 
> 标签：vb.net

我正在尝试向我的程序添加一项功能，以便在用户单击按钮时对用户屏幕进行完整截图。我让程序截取屏幕截图并打开一个文件对话框来保存它，保存工作。问题是，无论我如何保存屏幕截图，保存的图像都会有明显的质量损失和文本和内容周围的像素化。这是一个大问题，因为我需要完全按照用户屏幕上所见的方式保存图像，我根本不会有任何质量损失。我试图将图像保存为 jpg 和 png 格式，但都给了我质量损失。我想知道是否有人可以向我指出一些代码或方法，使我能够以与用户屏幕相同的质量保存屏幕截图。如果可能，我想将图像保存为 JPG 或 PNG。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:10:28.903

获取位图格式的图像并将其保存为 bmp。

```
Private Function TakeScreenShot() As Bitmap

    Dim screenSize As Size = New Size(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)

    Dim screenGrab As New Bitmap(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)

    Dim g As Graphics = Graphics.FromImage(screenGrab)

    g.CopyFromScreen(New Point(0, 0), New Point(0, 0), screenSize)

    Return screenGrab

End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T13:34:31.430

对于初学者来说，JPEG 图像使用有损压缩算法，因此当您以该格式保存时，您往往会损失质量。最好保存为未压缩的**位图**(BMP) 或使用无损压缩的**PNG 。**

这是将屏幕的工作区域复制到 PNG 图像的代码。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    'the working area excludes all docked toolbars like taskbar, etc.
    Dim currentScreen = Screen.FromHandle(Me.Handle).WorkingArea

    'create a bitmap of the working area
    Using bmp As New Bitmap(currentScreen.Width, currentScreen.Height)

        'copy the screen to the image
        Using g = Graphics.FromImage(bmp)
            g.CopyFromScreen(New Point(0, 0), New Point(0, 0), currentScreen.Size)
        End Using

        'save the image
        Using sfd As New SaveFileDialog() With {.Filter = "PNG Image|*.png",
                                                .InitialDirectory = My.Computer.FileSystem.SpecialDirectories.Desktop}

            If sfd.ShowDialog() = Windows.Forms.DialogResult.OK Then
                bmp.Save(sfd.FileName, System.Drawing.Imaging.ImageFormat.Png)
            End If
        End Using
    End Using
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:20:17.290

我发现在上面的代码中添加 3 行可以显着提高图像的质量

```
var graphics = Graphics.FromImage(theRequestedAllocatedImage);

graphics.CompositingQuality = CompositingQuality.HighQuality;
graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
graphics.SmoothingMode = SmoothingMode.HighQuality;

// Then call
graphics.CopyFromScreen(..) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T11:32:45.907

.Net 通常将文件保存为 96dpi，因此使用以下代码可以将文件保存为 Jpeg 或其他格式的更高分辨率。

```
'Create a new bitmap
Using Bmp As New Bitmap(800, 1000, Imaging.PixelFormat.Format32bppPArgb)
'Set the resolution to 300 DPI
    Bmp.SetResolution(300, 300)
'Create a graphics object from the bitmap
    Using G = Graphics.FromImage(Bmp)
'Paint the canvas white
        G.Clear(Color.White)
'Set various modes to higher quality
        G.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
        G.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias
        G.TextRenderingHint = Drawing.Text.TextRenderingHint.AntiAlias

'Create a font
        Using F As New Font("Arial", 12)
'Create a brush
            Using B As New SolidBrush(Color.Black)
'Draw some text
                G.DrawString("Hello world", F, B, 20, 20)
            End Using
        End Using
    End Using

'Save the file as a TIFF
    Bmp.Save("c:\\test.Jpeg", Imaging.ImageFormat.Jpeg)
End Using 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-21T00:59:21.967

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim screenSize As Size = New Size(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)

    Dim screenGrab As New Bitmap(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)

    Dim g As Graphics = Graphics.FromImage(screenGrab)

    g.CopyFromScreen(New Point(0, 0), New Point(0, 0), screenSize)

    PictureBox1.Image = screenGrab
    PictureBox1.Image.Save("c:\picture.bmp")
End Sub 
```

# openssl - 密钥库过期 1 天并出现错误：“密钥库被篡改，或密码不正确”

> ID：10930577
> 
> 赞同：3
> 
> 时间：2012-06-07T11:07:06.963
> 
> 标签：openssl, keystore, jks

我正在处理关于我的密钥库的问题。

首先，我使用 openssl 在 java 应用程序和 cpp 应用程序之间开发了一个安全连接。我上个月工作得很好，但在过去的几天里，它不能正常工作。

我使用openssl生成了一个pem和一个密钥文件，并通过转换它们生成了一个keystore.jks，当我测试它时它可以正常工作1-2个月。但是大约 1 个月后，我意识到密钥库在 java 端不起作用，异常失败。两天前，我生成了一个新的密钥库并对其进行了测试。它工作正常（java和cpp部分）。一天后，它没有工作。

我使用 using 生成了一个新的密钥库`-validty 16500`，我希望它可以工作，但是今天，它给出了同样的错误（复制如下）。

有没有人见过这个问题，这是关于密钥库在一天内到期的问题？

我怎么解决这个问题？

```
java.io.IOException: Keystore was tampered with, or password was incorrect
at sun.security.provider.JavaKeyStore.engineLoad(Unknown Source)
at sun.security.provider.JavaKeyStore$JKS.engineLoad(Unknown Source)
at java.security.KeyStore.load(Unknown Source)
caused by: java.security.UnrecoverableKeyException: Password verification failed
... 13 more
2012-06-07 13:20:52,116 [           main]                       de 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T02:31:58.323

SDK更改/更新时发生在我身上。需要针对新的 JDK SDK 构建新的 Keystore（必须手动安装 JDK SE OSX）

我遇到的另一个奇怪问题是我创建的任何高于 10000 的密钥都给了我一个时间异常。

在生成密钥库时还要确保您的国家/地区代码有效。 [http://www.worldatlas.com/aatlas/ctycodes.htm](http://www.worldatlas.com/aatlas/ctycodes.htm)（此处列出的每日代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T10:08:06.833

您确定在签署 APK 时提供了正确的商店密码和发布密码吗？因为同样的问题也发生在我身上。

# akka - 在 Akka 2.0 中，是否可以拥有集群主管？

> ID：10930582
> 
> 赞同：3
> 
> 时间：2012-06-07T11:07:29.860
> 
> 标签：akka, fault-tolerance, akka-supervision

我知道使用 Akka 进行适当的集群是 Akka 2.1 的重点，但是需要用现在可用的东西来构建一些东西。

我有一个多节点 Akka 设置，并希望优雅地处理远程演员死亡。但是，由于系统是对称的并且不应该有单点故障，我不确定如何正确设置主管层次结构。监督者不能与被监督的参与者在同一个 Akka 实例上，因为我需要处理整个 Akka 节点的终止，但是如果我将监督者放在一个单独的节点上，我现在冒着孤立或终止被监督的参与者的风险运行主管的节点死亡。

我真正想要的是一个集群监督者，其中任何 Akka 节点（或其中 n 个）上的参与者可以处理一组参与者的监督，以避免任何单点故障。在 Akka 2.0 中这样的事情可能吗？如果没有，获得相同效果的最佳方法是什么？

# asp.net - 验证失败后在图像按钮中停止回发

> ID：10930593
> 
> 赞同：0
> 
> 时间：2012-06-07T11:08:09.643
> 
> 标签：asp.net

我有一个 aspx 页面，其中包含一个文本框和一个用于搜索的图像按钮。我在文本框中使用了比较验证器（检查整数值）。但是即使我输入字母数字字符，页面也会在图像按钮单击时重新加载，并显示错误消息。

我尝试使用正则表达式验证器，但问题仍然存在。

但是当我使用一个简单的 asp:button 并将其与文本框验证绑定时，它的工作正常（即回发不会发生在文本框的错误值上），下拉列表也是如此（没有回发发生）。

请建议。

这是代码-

@peroija：这是代码

```
<asp:ImageButton ID="btnSearch" runat="server" OnClick="btnSearch_Click" 
    ToolTip="Search" ValidationGroup="valControl" CausesValidation="true" />
<asp:TextBox ID="txtWidth" CssClass="TextFont" runat="server" 
    Width="233px" MaxLength="20" 
    ValidationGroup="valControl" CausesValidation="true"></asp:TextBox>
<asp:CompareValidator runat="server" ID="cmpValWidth" 
    ErrorMessage="Please enter integer values" ControlToValidate="txtWidth" Display="Dynamic" 
    Operator="DataTypeCheck" ValidationGroup="valControl"Type="Integer"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:43:24.167

从您的文本框中删除它，您只需要在验证器和按钮上使用它：

```
ValidationGroup="valControl" CausesValidation="true" 
```

如果禁用了 javascript，则不会有客户端验证，因此还要始终检查服务器端的有效性：

```
if(Page.IsValid)
{
    "your btnSearch_Click code"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:11:22.540

听起来你需要写

```
if(!isPostBack)
{ 
```

> “你的代码”

```
} 
```

在后面的代码中。防止在第一次没有查看页面的情况下运行代码

# c++ - SSE 指令添加数组的所有元素

> ID：10930595
> 
> 赞同：9
> 
> 时间：2012-06-07T11:08:13.210
> 
> 标签：c++, arrays, sse, simd, sse2

我是 SSE2 指令的新手。我找到了`_mm_add_epi8`可以添加两个数组元素的指令。但我想要一个可以添加数组所有元素的 SSE 指令。

我试图使用这段代码来开发这个概念：

```
#include <iostream>
#include <conio.h>
#include <emmintrin.h>

void sse(unsigned char* a,unsigned char* b); 

void main()
{
    /*unsigned char *arr;
    arr=(unsigned char *)malloc(50);*/

    unsigned char arr[]={'a','b','c','d','e','f','i','j','k','l','m','n','o','p','q','r','a','b','c','d','e','f','i','j','k','l','m','n','o','p','q','r'};
    unsigned char *next_arr=arr+16;
    for(int i=0;i<16;i++)
          printf("%d,%c   ",next_arr[i],next_arr[i]);
    sse(arr,next_arr);

    getch();
}

void sse(unsigned char* a,unsigned char* b)                                                                                                                                                                          
{                                                                                                                                                                                                                                                                                                                                                                                            
  __m128i* l = (__m128i*)a;                                                                                                                                                                                      
  __m128i* r = (__m128i*)b; 
  __m128i result;

      result= _mm_add_epi8(*l, *r);

      unsigned char *p;
         p=(unsigned char *)&result;

        for(int i=0;i<16;i++)
          printf("%d ",p[i]);

         printf("\n");
         l=(__m128i*)p;
         r=(__m128i*)(p+8);         
         result=_mm_add_epi8(*l, *r);
         p=(unsigned char *)&result;
         printf("%d ",p[0]);

         l=(__m128i*)p;
         r=(__m128i*)(p+4);
         result=_mm_add_epi8(*l, *r);
         p=(unsigned char *)&result;
         l=(__m128i*)p;
         r=(__m128i*)(p+2);
         result=_mm_add_epi8(*l, *r);
         p=(unsigned char *)&result;
         l=(__m128i*)p;
         r=(__m128i*)(p+1);
         result=_mm_add_epi8(*l, *r);
          p=(unsigned char *)&result;
            printf("result =%d ",p[0]);
} 
```

那么有人可以告诉我如何使用 SSE2 指令添加数组的所有元素吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T11:15:28.417

如果您只想对数组的所有元素求和，那么您需要加载数据，将其解压缩为更大的元素大小，然后对解压缩的元素求和。请注意，您可以保持多个部分总和，直到循环结束，然后只对这些部分总和进行最终总和。例如：

```
uint32_t sum_array(const uint8_t a[], int n)
{
    const __m128i vk0 = _mm_set1_epi8(0);       // constant vector of all 0s for use with _mm_unpacklo_epi8/_mm_unpackhi_epi8
    const __m128i vk1 = _mm_set1_epi16(1);      // constant vector of all 1s for use with _mm_madd_epi16
    __m128i vsum = _mm_set1_epi32(0);           // initialise vector of four partial 32 bit sums
    uint32_t sum;
    int i;

    for (i = 0; i < n; i += 16)
    {
        __m128i v = _mm_load_si128(&a[i]);      // load vector of 8 bit values
        __m128i vl = _mm_unpacklo_epi8(v, vk0); // unpack to two vectors of 16 bit values
        __m128i vh = _mm_unpackhi_epi8(v, vk0);
        vsum = _mm_add_epi32(vsum, _mm_madd_epi16(vl, vk1));
        vsum = _mm_add_epi32(vsum, _mm_madd_epi16(vh, vk1));
                                                // unpack and accumulate 16 bit values to
                                                // 32 bit partial sum vector

    }
    // horizontal add of four 32 bit partial sums and return result
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 8));
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 4));
    sum = _mm_cvtsi128_si32(vsum);
    return sum;
} 
```

请注意，上面的代码中有一个不明显的技巧——我们不是将每个 16 位向量进一步解包为一对 32 位向量（需要 4 个解包指令），然后使用四个 32 位加法（另外 4 个指令），而是使用`_mm_madd_epi16`( `PMADDWD`) 被乘数为 1 并`_mm_add_epi32`有效地为我们提供免费解包，因此我们使用 4 条指令而不是 8 条指令得到相同的结果。

另请注意，输入数组`a[]`需要 16 字节对齐，并且`n`应该是 16 的倍数。

# c# - 会话 Cookie，自动注销

> ID：10930599
> 
> 赞同：4
> 
> 时间：2012-06-07T11:08:49.813
> 
> 标签：c#, asp.net, session-cookies

我正在为我正在制作的网站使用 ASP.NET 4.0。它有一个登录到一些后端站点。这一切都很好......但是......会话cookie中似乎有一个注销的东西。每当我登录并离开几分钟时，它会在我加载页面时将我注销。

有谁知道我可以做些什么来改变这个......或删除它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:11:16.627

您需要在 web.config 上设置会话超时：

```
<configuration>
  <system.web>
     <sessionState timeout="10"></sessionState>
  </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:58:58.393

**会话超时的默认值为 20 分钟。**您可以根据需要在 webconfig 中更改它。

# jquery - jQuery 去一个 optgroup 标签

> ID：10930606
> 
> 赞同：6
> 
> 时间：2012-06-07T11:09:10.703
> 
> 标签：jquery, optgroup

我有一个用于搜索的下拉设置。这个想法是您单击一个选项，然后出现 OPTGROUP。我想做的是一旦选择了标签，它就会跳转到 OPTGROUP 的那个部分。

到目前为止，我已经写了一些 jQuery。看到这个[jsFiddle](http://jsfiddle.net/aNhzY/) - 所以一旦你选择了一个主要类别。我希望 optgroup 转到其配对标签。我怎样才能做到这一点？

**HTML**

```
<select id="category" name="category">
 <option selected="selected" value="0">Choose a category...</option>
 ...
 <option value="4">Photography</option>
</select>
<select multiple="multiple" id="subcategory" name="category_ids[]">
<optgroup label="Art Styles">
 <option value="5">Abstract</option>
 ...
 <option value="18">Graphics</option>
</optgroup>
<optgroup label="Art Subjects">
 <option value="19">Animals</option>
 ...
 <option value="45">Dreams &amp; Nighmares</option>
</optgroup>
<optgroup label="Media">
  <option value="46">Water Colour</option>
  ...
  <option value="56">Mixed Media</option>
</optgroup>
<optgroup label="Photography">
 <option value="57">Color Photography</option>
 ...
 <option value="64">Celebrity Photography</option>
</optgroup> 
```

人像风景广场

**JavaScript**

```
// Search Options Dropdown

// Hide Subcategory Dropdown

$('#subcategory').css('display', 'none');

// Hide Orientation Dropdown

$('#orientation').css('display','none');

$('#category').change(function()
{
    $('#subcategory').css('display', 'block');
    $('#orientation').css('display', 'block');

    var CatValue = $("#category").val();

    if (CatValue == '1')
    {

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:11:48.543

好吧，感觉有点 hacky，但它可以在 Chrome 中运行，而且我相信通过浏览器嗅探和确定每个浏览器中的选项项高度，你可以让它在所有浏览器中运行：

```
// Search Options Dropdown
// Hide Subcategory Dropdown
$('#subcategory').css('display', 'none');
// Hide Orientation Dropdown
$('#orientation').css('display', 'none');
$('#category').change(function() {
    var cat = $("#category :selected").text();
    var $subcat = $('#subcategory');
    $('#orientation').css('display', 'block');
    var optcount = 0;
    var optheight = 17;
    $subcat.css('display', 'block').find('optgroup').each(function() {
        optcount++;
        if ($(this).attr('label') == cat) {
            $subcat.val($('#subcategory optgroup[label="' + $(this).attr('label') + '"]').children('option:first').val())
                .scrollTop($('#subcategory :selected')[0].index * optheight + ((optcount - 1) * optheight));
        }
    });
});​ 
```

[jsfiddle](http://jsfiddle.net/jesus_tesh/dghLg/)

我相信你也可以做一些清理工作——比如移动 optgroup++ 并从 scrollTop 中删除 - 1 - ewww。它至少应该让你指向正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-14T08:45:26.487

我接受了蒂姆斯的回答并进一步改进。它将不再选择第一项以防止错误的多选框行为，并滚动到第一个 Optgroup 子项，而不是（不再）选定的子项。我还使用索引删除了计数变量，并根据父母大小属性确定了选项高度（与自定义 css 高度中断）。

```
$('#category').change(function() {
    var cat = $("#category :selected").text();
    var $subcat = $('#subcategory');
    var optheight = $subcat.height() / $subcat.attr('size');
    $subcat.find('optgroup').each(function(index) {
        $optgroupFirstChild = $('#subcategory optgroup[label="' + $(this).attr('label') + '"]').children('option:first');
        if ($(this).attr('label') == cat) {
          $subcat.scrollTop($optgroupFirstChild[0].index * optheight + (index * optheight));
        }
    });
}); 
```

[jsfiddle](http://jsfiddle.net/aopoph85/)

# c# - 在 asp.net 中找不到 OpenCV 非托管 DLL

> ID：10930610
> 
> 赞同：5
> 
> 时间：2012-06-07T11:09:21.467
> 
> 标签：c#, asp.net, opencv, unmanaged, emgucv

我们正在构建一个 Web 应用程序 (C# .NET)，它使用 Emgu opencv 包装器形式的非托管库。我们强制构建为 32 位 (x86)，并且我们使用的是 32 位版本的 Emgu。

所有这些在本地构建上都很好，但是当发布到我们的网络服务器时，openCV Dll(s) 无法加载：

```
System.DllNotFoundException
Unable to load DLL 'opencv_core240': The specified module could not be found. (Exception from HRESULT: 0x8007007E)

System.TypeInitializationException: The type initializer for 'Emgu.CV.CvInvoke' threw an exception. ---> System.DllNotFoundException: Unable to load DLL 'opencv_core240': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
   at Emgu.CV.CvInvoke.cvRedirectError(CvErrorCallback errorHandler, IntPtr userdata, IntPtr prevUserdata)
   at Emgu.CV.CvInvoke..cctor()
   --- End of inner exception stack trace ---
   at Emgu.CV.CvInvoke.cvCreateImageHeader(Size size, IPL_DEPTH depth, Int32 channels)
   at Emgu.CV.Image`2.AllocateData(Int32 rows, Int32 cols, Int32 numberOfChannels)
   at Emgu.CV.Image`2.set_Bitmap(Bitmap value)
   at Emgu.CV.Image`2..ctor(Bitmap bmp) 
```

我尝试了在 stackoverflow 和其他来源上发现的以下内容：

*   将非托管 Opencv Dll 放在一个单独的目录中，并将该目录的路径放在 path 环境变量中，然后重新启动 web 服务。
*   测试服务器配置是否允许非托管代码执行（是）
*   将非托管 Opencv Dll 放在 system32\inetsrv 和 SysWOW64\inetsrv 目录中
*   将非托管 Opencv Dll 放在前面提到的文件夹中的子目录“x86”中

我明白这一点：http: [//msdn.microsoft.com/en-us/library/ms366723.aspx](http://msdn.microsoft.com/en-us/library/ms366723.aspx)

是所有麻烦的原因，但是我不明白为什么编辑路径变量以包含包含 Dll 的正确路径并不能解决任何问题。

关于这个问题的最后一篇有用的帖子是在 2008 年，但是还没有提供万无一失的解决方案，因此非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:02:23.410

确保 tbb.dll 也在路径中，因为 opencv_core240.dll 对此有依赖关系。您可以在 opencv/build/common/tbb 下找到 tbb.dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:34:26.427

就我而言，“npp32_xx_x.dll”（xx_x 是版本号，32 是 32 位架构）解决了这个问题。因此，您可以尝试将此 dll 放入您的项目中，用于 win 应用程序的放置文件夹和 Web 应用程序中的等效文件夹。该 dll 是 Nvidia Cuda NPP 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T23:03:40.507

几天前我遇到了同样的问题，我尝试了我所知道的一切，但没有任何帮助解决这个问题。EmguCV 在我的本地 64 位 Windows 8 电脑上运行良好，但在服务器（Windows Web Server 64 位）上运行良好。

但是在我做了一些真正随机的事情后问题得到了解决，如下所示：服务器之前安装了 Visual C++ 2008 Runtime，但又一次

1.  我安装了`Visual C++ 2010 x86`。
2.  **已修复** `Visual C++ 2008 x86 Runtime installation`

这解决了问题。我无法解释这是怎么发生的，但我很高兴经过两天的随机实验后问题得到了解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T20:32:06.073

要解决此问题，请放入Web 服务器上的文件夹中`nvcuda.dll`。`/bin`确保`nvcuda.dll`必须**x86 Architecture**与服务器相同，或者 x64 如果 Web 服务器具有**x64 Architecture**。

将来在 Dependence Walker 中查看其他依赖项[`http://www.dependencywalker.com/`](http://www.dependencywalker.com/)并将此 dll 与父库一起放置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T12:10:12.540

从您的错误描述和您已经执行的检查来看，您似乎还没有安装 MSVCRT。

# file-type - Google 自定义搜索：在查询中使用文件类型排除来检索促销活动的问题

> ID：10930611
> 
> 赞同：3
> 
> 时间：2012-06-07T11:09:21.507
> 
> 标签：file-type, google-custom-search

在查询中使用文件类型排除时，我在检索促销时遇到问题。我已经在查询中测试了没有文件类型排除项，然后除了很多我不想要的结果之外，我还得到了我的提升。

有解决方法吗？是否可以在自定义搜索引擎控制台中设置文件排除？

[您可以在此处](https://developers.google.com/custom-search/docs/xml_results?hl=en#wsSpecialQueryTerms)查看我如何使用文件类型排除

**编辑：使用参数 as_eq**

我也试过参数 as_eq，例如 &as_eq=filetype%3Apdf

结果还是一样！？

# c# - Silverlight Webpart 获取列表项

> ID：10930616
> 
> 赞同：1
> 
> 时间：2012-06-07T11:09:30.593
> 
> 标签：c#, silverlight, sharepoint-2010, web-parts

我正在尝试创建一个 silverlight wepart 来从 SharePointList 中获取 listItems。

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    MessageBox.Show(ListName);
    clientContext = ClientContext.Current;
    oWebsite = clientContext.Web;
    List myList = clientContext.Web.Lists.GetByTitle(ListName);

    CamlQuery query = CamlQuery.CreateAllItemsQuery();
    ListItemCollection listItems = myList.GetItems(query);

    clientContext.Load(listItems);
    clientContext.ExecuteQueryAsync(onQuerySucceeded, onQueryFailed);

 }

private void onQuerySucceeded(object sender, ClientRequestSucceededEventArgs args)
{
    UpdateUIMethod updateUI = DisplayInfo;
    this.Dispatcher.BeginInvoke(updateUI);
}

private void DisplayInfo()
{
    foreach (ListItem listItem in listItems)
    {
        label1.Content += listItem.FieldValues["Typ"].ToString();
    }
} 
```

它正在加载列表，但不知何故它没有加载 listItems 和值......有谁知道如何获取特定字段的 listItems 值。

提前感谢埃布鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:21:08.247

尝试以这种方式访问​​字段：

```
foreach (ListItem listItem in listItems)
    {
        label1.Content += listItem.item["Title"] + " : " + listItem.item["Typ"];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:05:10.383

感谢您的快速回复！

我是这样做的：

```
 foreach (ListItem listItem in listItems)
   {
     textBox1.Text += listItem.FieldValues["File_x0020_Type"].ToString();
   } 
```

在 Silverlight 中，您只能使用内部 fieldNames 访问 listItems 的 fieldValues！[看这里](http://blogs.msdn.com/b/michael_yeager/archive/2008/11/03/reference-list-for-internal-field-names.aspx)

# flash - AS3 点击标签错误 #1010

> ID：10930620
> 
> 赞同：1
> 
> 时间：2012-06-07T11:09:42.960
> 
> 标签：flash, clicktag

我得到了这个点击标签，但它不起作用：

```
MyClickTagButton.addEventListener(
  MouseEvent.CLICK,
  function():void {
    if (root.loaderInfo.parameters.clickTAG.substr(0,5) == "http:") {
      navigateToURL(
        new URLRequest(root.loaderInfo.parameters.clickTAG), "_blank"
      );
    }
  }
); 
```

当我单击它时，我收到此错误：

```
TypeError: Error #1010: A term is undefined and has no properties.
           at Function/< anonymous >() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:33:48.603

使用匿名函数作为事件处理程序是一种不好的做法……</p>

其次，您的按钮是否有实例名称`MyClickTagButton`？如果不是，您要么必须更改其实例名称，要么更改代码以匹配现有实例名称。

```
MyClickTagButton.addEventListener(MouseEvent.CLICK, onButtonClick);
//this has to match the instance name of the button

function onButtonClick(e:MouseEvent):void 
{
    if (root.loaderInfo.parameters.clickTAG.substr(0,5) == "http:") 
    {
         navigateToURL(new URLRequest(root.loaderInfo.parameters.clickTAG), "_blank");
    }
} 
```

啊，最后一件事：当你在独立播放器中测试它时，clickTAG 参数没有设置，所以当你点击按钮时可能什么都不会发生。

# android - Android-向下移动内容

> ID：10930621
> 
> 赞同：0
> 
> 时间：2012-06-07T11:09:51.430
> 
> 标签：android, android-layout, button

我对为 android 开发应用程序非常陌生。现在我想做的是实现四个按钮，一旦用户点击，比如说，在最上面的按钮上，另外两个子按钮应该出现在点击的按钮下方，另外三个剩余的按钮应该自动向下移动。

我认为我的解释不是百分百清楚，所以我尝试用一​​些图像来说明问题。

现在是四个按钮：

[http://advancedata.ad.funpic.de/First-AGApp.png](http://advancedata.ad.funpic.de/First-AGApp.png)

* * *

一旦用户按下按钮一，就会出现两个额外的按钮，另外三个按钮应该向下移动：

[http://advancedata.ad.funpic.de/Second-AgApp.png](http://advancedata.ad.funpic.de/Second-AgApp.png)
我会非常感谢任何建议如何实现这一点。

谢谢，恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:13:53.377

在具有垂直方向的 LinearLayout 中绘制所有按钮。添加属性

```
android:visibility="gone" 
```

单击主按钮时应出现的按钮。然后你可以在主按钮的 OnClickListener 中显示这些按钮：

```
button.setVisibility(View.VISIBLE); 
```

其中 button 是对代码中布局的引用。

```
Button button = (Button) findViewById (R.id.your_button_id); 
```

编辑：

要将动画添加到流程中，您必须向上/向下滑动出现的新按钮和下面的按钮。（将视图分组到布局中，以便更轻松地应用动画）。

这里有两个 XML 文件要在 res/anim 文件夹中创建：

slide_down.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
 android:fromYDelta="-50" android:toYDelta="0"
 android:duration="300" /> 
```

slide_up.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
 android:fromYDelta="0" android:toYDelta="-50"
 android:duration="300" /> 
```

在您的代码中创建动画：

```
Animation slideDown = AnimationUtils.loadAnimation(this, R.anim.slide_down); 
```

并将其应用于按钮：

```
secondaryButton.startAnimation(slideDown); 
```

向上滑动时，需要在动画结束后将可见性设置为“消失”，而不是之前。为此，您需要设置动画侦听器并隐藏 onAnimationEnd 中的按钮：

```
slideUp.setAnimationListener(new AnimationListener () {

    @Override
    public void onAnimationEnd(Animation animation) {
      secondaryButton.setVisibility(View.GONE);
    }

    @Override
    public void onAnimationRepeat(Animation animation) {}

    @Override
    public void onAnimationStart(Animation animation) {}

}); 
```

# mysql - 返回行数

> ID：10930622
> 
> 赞同：0
> 
> 时间：2012-06-07T11:09:57.217
> 
> 标签：mysql, sql, count

我想返回查询受限时返回的总行数，以便我可以返回前 10 个结果，并在我的 PHP 中使用“查看全部 63”链接。我想我正在寻找类似的东西：

```
SELECT `n`.*, COUNT('id') AS `total` 
  FROM `table` 
 WHERE (name like '%search%') 
 LIMIT 10; 
```

但这只会返回第一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:13:50.873

```
SELECT n.*, total 
FROM table n, (select count(*) total  from table t2 where name like '%search%') 
where name like '%search%'
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:13:15.327

```
 SELECT n.*, 
   COUNT(select id from AStotalFROMtable(name like '%search%') )  as Total
   AStotalFROMtable(name like '%search%') LIMIT 10; 
```

**或者**

**阅读：[MySQL：使用 LIMIT 时获取总行数](http://www.arraystudio.com/as-workshop/mysql-get-total-number-of-rows-when-using-limit.html)**

也试试

[`FOUND_ROWS()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)- 对于带有 LIMIT 子句的 SELECT，如果没有 LIMIT 子句，将返回的行数

```
SELECT SQL_CALC_FOUND_ROWS *    FROM `table`    WHERE  name like '%     
          search%'    LIMIT 10;    

SELECT FOUND_ROWS(); 
```

第一个查询将返回 10 行，第二个查询将返回在第一个查询中没有 LIMIT 子句的情况下将返回的行数。

# java - 直接从 Java 中的模型类创建 JSON 对象

> ID：10930624
> 
> 赞同：32
> 
> 时间：2012-06-07T11:10:05.547
> 
> 标签：java, json, sockets

我的项目中有一些模型类，如`Customer`,`Product`等，它们有几个字段及其 setter-getter 方法，我需要**通过套接字将这些类的对象作为 JSONObject 交换**到客户端和服务器。

有什么方法可以`JSONObject`直接从模型类的对象创建，使得对象的字段成为键，该模型类对象的值成为这个 JSONObject 的值。

例子：

```
Customer c = new Customer();
c.setName("Foo Bar");
c.setCity("Atlantis");
.....
/* More such setters and corresponding getters when I need the values */
..... 
```

我将 JSON 对象创建为：

```
JSONObject jsonc = new JSONObject(c); //I'll use this only once I'm done setting all values. 
```

这让我得到了类似的东西：

```
{"name":"Foo Bar","city":"Atlantis"...} 
```

请注意，在我的一些模型类中，某些属性本身就是**其他模型类的对象**。如：

```
Product p = new Product();
p.setName("FooBar Cookies");
p.setProductType("Food");
c.setBoughtProduct(p); 
```

在上述情况下，正如我所料，生成的 JSON 对象将是：

```
{"name":"Foo Bar","city":"Atlantis","bought":{"productname":"FooBar Cookies","producttype":"food"}} 
```

我知道我可以`toJSONString()`在每个模型类中创建类似的东西，然后创建对 JSON 友好的字符串并对其进行操作，但是在我之前在 Java 中创建 RESTful 服务的经验中（这完全脱离了这个问题的上下文），我可以返回使用来自服务方法的 JSON 字符串，`@Produces(MediaType.APPLICATION_JSON)`并具有模型类的方法返回对象。所以它生成了 JSON 字符串，我可以在客户端使用它。

我想知道在当前情况下是否有可能获得类似的行为。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-07T11:20:45.947

[谷歌 GSON](http://code.google.com/p/google-gson/)这样做；我已经在几个项目中使用过它，它很简单而且效果很好。它可以在没有干预的情况下对简单对象进行翻译，但也有一种自定义翻译的机制（双向）。

```
Gson g = ...;
String jsonString = g.toJson(new Customer()); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-07T11:20:35.703

您可以为此使用*Gson*：

Maven依赖：

```
<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.8.0</version>
</dependency> 
```

Java代码：

```
Customer customer = new Customer();
Product product = new Product();

// Set your values ...

Gson gson = new Gson();
String json = gson.toJson(customer);

Customer deserialized = gson.fromJson(json, Customer.class); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-09T08:12:26.240

```
 User = new User();
    Gson gson = new Gson();
    String jsonString = gson.toJson(user);
    try {
        JSONObject request = new JSONObject(jsonString);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T11:22:08.560

使用[gson](http://code.google.com/p/google-gson/)来实现这一点。您可以使用以下代码获取json然后

```
Gson gson = new Gson();
String json = gson.toJson(yourObject); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T11:50:42.220

我使用[XStream](http://xstream.codehaus.org/tutorial.html) Parser 来

```
 Product p = new Product();
    p.setName("FooBar Cookies");
    p.setProductType("Food");
    c.setBoughtProduct(p);

    XStream xstream = new XStream(new JettisonMappedXmlDriver());
    xstream.setMode(XStream.NO_REFERENCES);
    xstream.alias("p", Product.class);
    String jSONMsg=xstream.toXML(product);
    System.out.println(xstream.toXML(product)); 
```

这将为您提供 JSON 字符串数组。

# java - Jersey 资源过滤器和 OPTIONS 方法

> ID：10930625
> 
> 赞同：1
> 
> 时间：2012-06-07T11:10:07.130
> 
> 标签：java, rest, jersey

我在我的应用程序中将 Jersey 用于 RESTful api。我有一些资源，用@ResourceFilters(value=...) 注释。在资源中声明的方法一切正常，但是当我尝试发出 OPTIONS 请求时，过滤器不起作用。有什么方法可以让过滤器适合我的情况，或者我需要声明显式的 OPTIONS 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:43:45.307

ResourceFilter 真正用于过滤资源方法的执行。如果您没有显式定义 OPTIONS 方法，则 HTTP 调用不会映射到资源方法（被隐式处理）。对于这种情况，您可以使用[ContainerRequestFilter](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/spi/container/ContainerRequestFilter.html)。

# ios - 这个 iOS 控制是什么以及如何实现它？

> ID：10930629
> 
> 赞同：0
> 
> 时间：2012-06-07T11:10:53.020
> 
> 标签：ios, uicontrol

![在此处输入图像描述](../Images/ca281befbec65ec1250c113cee6be79e.png)

我很困惑：

1) 上图所示的控件是什么类型的控件。我试过滑块，它没有给出相同的视觉效果

2）我怎样才能完全按照图像上看到的那样实现这样的控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:13:38.657

它可以是任何东西，但如果我想这样做，我会按照正常的习惯来做`UIView`，有 3`UIButtons`

此控件将具有类似 setLevel:1、2 或 3 的函数，具体取决于整数，它将相应地更改 UIButton 的图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:16:46.360

1）如果你只想要这 3 点（低、高、中），你可以按照@Omar 在他的回答中建议的那样做。

2）但是如果你想要所有的中间点和中间（蓝色）点作为一个句柄，你可以使用[UISlider](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISlider_Class/Reference/Reference.html)并改变它的 minimumValue，maximumValue 和 thumb images.. See [this](http://www.applausible.com/blog/?p=250) tutorial

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:16:32.680

现在预定义的 iOS 控件有这个演示文稿。

可能你可以在[cocoacontrols.org](http://www.cocoacontrols.org)或[binpress.com](http://www.binpress.com)上找到，看看你是否可以下载开发者制作的第三个控件。

此外，您可以自己创建控件，在前两个网站上，您肯定可以找到很多模仿您想要的显示的控件。您可以下载源代码，进行逆向工程并构建自己的控件

在最坏的情况下，使用 UIView（可能是 UISlider）作为超类从头开始构建此控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:17:40.743

您可以有两个图像，一个用于选中，另一个用于未选中，当按下任何按钮时，在按钮操作中将按钮的图像更改为选定的图像，另外两个按钮将具有未选中的图像。一次只有一个按钮被选中状态。

# python - 带有 argparse 模块的打印程序使用示例

> ID：10930635
> 
> 赞同：43
> 
> 时间：2012-06-07T11:11:03.167
> 
> 标签：python, argparse

我正在尝试学习如何使用 python 的`argparse`模块。目前我的python脚本是：

```
parser = argparse.ArgumentParser(description='My first argparse attempt',
                                add_help=True)
parser.add_argument("-q", action ="store", dest='argument',
                    help="First argument")
output = parser.parse_args() 
```

它给出的输出为：

```
usage: test.py [-h] [-q ARGUMENT]

My first argparse attempt

optional arguments:
  -h, --help   show this help message and exit
  -q ARGUMENT  First argument 
```

现在，假设我希望我的`-h or --help`论点也打印 a `usage example`。像，

```
 Usage: python test.py -q "First Argument for test.py" 
```

我的目的是打印上面的使用示例以及`-h`参数的默认内容，以便用户可以基本了解如何使用`test.py`python 脚本。

那么，此功能是否内置在`argparse`模块中。如果不是，那么解决此问题的正确方法是什么。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-07T11:16:05.627

用于[`parser.epilog`](http://docs.python.org/library/argparse.html#epilog)在生成的`-h`文本之后显示某些内容。

```
parser = argparse.ArgumentParser(
    description='My first argparse attempt',
    epilog='Example of use')

output = parser.parse_args() 
```

印刷：

```
My first argparse attempt

optional arguments:
  -h, --help  show this help message and exit

Example of use 
```

# akka - 在 Akka 2.0 中，我可以从主管重新启动新远程节点上的参与者吗？

> ID：10930640
> 
> 赞同：1
> 
> 时间：2012-06-07T11:11:19.187
> 
> 标签：akka, fault-tolerance

假设一个监督者正在监督一个远程参与者。如果远程actor由于其整个Akka节点已终止而死亡，是否有可能在新的Akka节点上复活actor，保持所有现有的ActorRefs都活着？

# c# - RichTextBox 最大尺寸限制？

> ID：10930642
> 
> 赞同：5
> 
> 时间：2012-06-07T11:11:22.817
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone 应用程序中，我使用 RichTextBox 来显示内容。但它只显示它的开头，将近 2000 像素。然后有一个空字段。是否可以显示所有内容？

**更新**

添加 ScrollViewer 没有帮助

```
 <Grid Visibility="{Binding ItemVisibility}" Margin="0,-25,0,0"  Width="480" Background="#dcdcdc">
                        <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Top" Height="Auto" MinHeight="730">
                                                              <RichTextBox x:Name="Browser" IsReadOnly="True" Foreground="Black" Height="Auto" Logic:RichTextBoxHelper.Html="{Binding BrowserHtml}"  HorizontalAlignment="Left"   Width="430" Margin="0,0,0,0" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" />

                        </ScrollViewer>
                    </Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:17:56.980

WP7 中任何控件的最大显示尺寸为 2048 x 2048 像素，因此如果您处于该限制，您将遇到这样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:28:04.860

2048x2048 限制适用于任何单个元素。绕过这个限制的方法是将你的数据分成块，每个块都在一个新元素（即TextBlock）中。如果您搜索谷歌，有几个示例片段可用。

看看这个[Scrollable-TextBlock 解决方案](http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx)

# php - 无法重新声明函数php

> ID：10930646
> 
> 赞同：39
> 
> 时间：2012-06-07T11:11:42.957
> 
> 标签：php, function, fatal-error, redeclare

我有一个名为 parseDate 的函数，但是当我在我的 php 页面（它是一个 joomla 组件页面）上调用它时，我得到了致命错误：无法重新声明 parsedate()（之前在模板/ja_zeolite/assets/functions.php:2 中声明）第 21 行的模板/ja_zeolite/assets/functions.php

第 2 行是函数 parsedate($data)，第 21 行是 }（函数结束）。功能是：

```
function parseDate($date){
$items = explode('.', $date);
switch($items[1]){
    case 1: $mese = 'Gen'; break;
    case 2: $mese = 'Feb'; break;
    case 3: $mese = 'Mar'; break;
    case 4: $mese = 'Apr'; break;
    case 5: $mese = 'Mag'; break;
    case 6: $mese = 'Giu'; break;
    case 7: $mese = 'Lug'; break;
    case 8: $mese = 'Ago'; break;
    case 9: $mese = 'Set'; break;
    case 10: $mese = 'Ott'; break;
    case 11: $mese = 'Nov'; break;
    case 12: $mese = 'Dic'; break;
    default: $mese = '---';
}
$data_corretta = array(0 => $mese, 1 => $items[2]);
return $data_corretta;
} 
```

我也尝试更改名称功能，但它仍然不起作用。

为什么？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-07T11:18:06.890

您（或 Joomla）可能多次包含此文件。将您的函数包含在条件块中：

```
if (!function_exists('parseDate')) {
    // ... proceed to declare your function
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-07T11:22:54.153

删除该功能并检查以下输出：

```
var_dump(function_exists('parseDate')); 
```

在这种情况下，请更改函数的名称。

如果你得到错误，你将包含该函数的文件两次，替换：

```
include 
```

经过

```
include_once 
```

并替换：

```
require 
```

经过

```
require_once 
```

EDIT : I'm just a little too late, post before beat me to it !

# excel - 获取对数趋势线的系数，EXCEL

> ID：10930648
> 
> 赞同：2
> 
> 时间：2012-06-07T11:11:53.260
> 
> 标签：excel, trendline

我想知道，是否可以从 excel 图表中获取对数趋势线的系数？我知道您可以显示它们，但我想将它们放在两个不同的单元格中。提前感谢您的帮助！

最好的问候， 巴特克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:15:52.167

Google 搜索“对数趋势线公式 excel”的第一个结果对我有用：

[http://spreadsheetpage.com/index.php/tip/chart_trendline_formulas/](http://spreadsheetpage.com/index.php/tip/chart_trendline_formulas/)

请注意，您可以右键单击趋势线方程并选择格式化趋势线标签... 使用科学格式和 14 位小数以查看完整精度。

# ruby-on-rails - 当页面有多个相同的链接时，Capybara 的“click_link”方法如何知道要点击哪个链接？

> ID：10930650
> 
> 赞同：2
> 
> 时间：2012-06-07T11:12:03.863
> 
> 标签：ruby-on-rails, tdd, capybara, railstutorial.org

这来自 Rails 教程：

```
 expect { click_link('delete') }.to change(User, :count).by(-1) 
```

如果正在测试的页面有多个名为“delete”的链接，但每个链接都有不同的 URI（基于 id），那么 Capybara 怎么知道要单击哪个链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T11:27:26.043

它检查给定元素的 id、值和文本。如果您有非唯一链接，您可能需要限定 click 命令的范围

```
within(#some_id_div) do
  click_button "my button"
end 
```

此外，对于该特定测试，这并不重要，因为所有链接都指删除用户

# mysql - 当我使用 MySQL 获取有关 sale.purchase_date 的月度数据时，哪个查询得到了优化？

> ID：10930653
> 
> 赞同：0
> 
> 时间：2012-06-07T11:12:11.947
> 
> 标签：mysql, query-optimization

当我从不同的函数执行两个查询时，我得到了相同的结果。我只是想知道哪个查询经过优化或逻辑正确（请参阅下面的查询 1 和 2）。

我得到关于的月度数据`sale.purchase_date`

查询 1

```
SELECT sales.purchase_date FROM `sales` 
WHERE sales.purchase_date LIKE  '2012-06-%'; 
```

查询 2

```
SELECT sales.purchase_date FROM `sales` 
WHERE MONTH(sales.purchase_date) = '6' AND YEAR(sales.purchase_date) = '2012'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:16:23.910

这两个都需要您进行表扫描，因为您需要检查该`purchase_date`行是否会在其中并且不能使用索引。我建议您使用`BETWEEN`查询，以便您可以使用以下任何索引`purchase_date`：

```
WHERE sales.purchase_date BETWEEN '2012-06-01' AND '2012-06-30' 
```

# jquery-mobile - JQM，后退按钮在android中不起作用

> ID：10930658
> 
> 赞同：1
> 
> 时间：2012-06-07T11:12:27.607
> 
> 标签：jquery-mobile, cordova

使用 'data-rel="back"' 的后退按钮
在包含多个页面的 html 文件中从一个页面返回到另一个页面时工作正常

但它在从一个 html 页面移回另一个 html 页面时不起作用。

我试过 data-add-back-btn="true"，但没有用。

我的代码看起来像：

```
<div data-role="page" data-add-back-btn="true">
    <div data-role="header" data-theme="a">
        <a data-role="button" data-rel="back" data-icon="back">back</a>
        <h1>Header</h1>
    </div>
    ...
</div> 
```

一切都在网络浏览器中正常工作。在为移动设备编译或在模拟器上运行时，它只会产生问题。

我想这与cordova/phonegap有关，而不是JQM本身。

# php - PHP：如何获得“给定月份的一周中第 N 次出现”

> ID：10930667
> 
> 赞同：2
> 
> 时间：2012-06-07T11:13:16.127
> 
> 标签：php

如何获得本月 A 的今天的发生率是多少？

例如：这个月从星期五开始，所以它（第一个星期五），在这种情况下，第一个星期日是第 2 周

我想知道这个月的本周今天发生了什么，就像今天一样

EX：“第 2 周的第一个星期四”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:16:53.137

这是我使用的 php 代码。这可能不是最好的方法，但至少它是一个答案。

```
 $wkDay = date('w', mktime(0, 0, 0, $date->month, 1, $date->year));
    $weekCount = 1;
    $monthDay = $date->day;
    while ($monthDay > 7) {
        --$monthDay;
        ++$weekCount;
    } 
```

我的日期类的结构是将日、月和年值存储为数字整数。第一行在我正在检查的月份的第一天抓取星期几。周计数器初始化为 1，因为我直接将它用于输出（例如 echo "The ".$weekCount."th Tuesday of the month.";）然后我只取一天并在每次减去时增加我的周数七。

# objective-c - Touches Moved CAEmitterLayer 在触摸点后的实例中延迟...

> ID：10930668
> 
> 赞同：0
> 
> 时间：2012-06-07T11:13:20.450
> 
> 标签：objective-c, ios, touchesmoved, caemitterlayer

我从一个问题跌跌撞撞地遇到了另一个问题：解决[了第一个问题，](https://stackoverflow.com/questions/10885480/how-to-get-the-emitter-position-of-an-animated-caemitterlayer-cell)现在当手指在屏幕上移动时，我的粒子轨迹被延迟到触摸位置之后。

当我通过覆盖初始化 CAEmitterLayer 时效果很好

```
+ (Class) layerClass 
{
    //configure the UIView to have emitter layer
    return [CAEmitterLayer class];
} 
```

和初始化

```
fireEmitter = (CAEmitterLayer*)self.layer; 
```

我把它改成了

```
fireEmitter = [CAEmitterLayer layer];
fireEmitter.frame = self.bounds;
[self.layer addSublayer:fireEmitter]; 
```

现在发射器单元像艺妓一样在远处跟随移动的接触点

这是为什么？因为我改变了发射器现在发射的层？请帮忙！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:49:19.977

您每秒只能获得这么多的触摸事件，并且您每秒只能在屏幕上绘制一定次数。让我们做一些数学运算。

假设您可以在 166 毫秒内沿对角线在整个屏幕上移动手指（滑动速度非常快）。还假设您正在渲染足够的粒子以将设备从 60 FPS 减慢到 30 FPS（每个渲染周期 33 毫秒）。这意味着您在滑动屏幕所需的时间内只会收到大约 5 次触摸回调。反过来，这意味着您只会在每 100 个像素左右的手指移动时获得一个触摸事件。

因此，即使您假设您收到的触摸位置的延迟为零（实际上没有），您也只能经常获得它们，以至于您几乎总是会有一些明显的延迟。减少这种延迟的唯一方法是提高帧速率（通过使用更少/更小的粒子或切换到可以更好地扩展粒子数量的技术，例如 OpenGL）。您应该首先使用 Instruments 来验证帧速率实际上是您的问题。

注意：我`[CATransaction setDisableActions:YES]`在设置发射器位置时测量了使用的效果，没有发现差异，所以这不仅仅是使用隐式动画的问题。

# sql - 我正在尝试创建一个存储过程来创建登录名和数据库用户？

> ID：10930669
> 
> 赞同：2
> 
> 时间：2012-06-07T11:13:22.773
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我正在使用 SQL Server 开发 C# 应用程序，并且想调用存储过程来创建登录名和用户。

我正在寻找最简单的方法来做到这一点，只是默认的东西，但有用户名和密码。

登录旁边的创建用红色下划线？

但我认为我的登录没问题？如果我遗漏了什么，请告诉我。

并且对于创建用户，它只是一个这样的衬线吗？

```
CREATE PROCEDURE CreateLoginAndUser 
       @UserName

   CREATE LOGIN @UserName 
   WITH PASSWORD = 'password', 
        DEFAULT_DATABASE = [TestAudit],
        DEFAULT_LANGUAGE = [British],
        CHECK_EXPIRATION=OFF,
        CHECK_POLICY=ON;

   CREATE USER 'DEV' + @UserName 
       [{ FOR | FROM } LOGIN @UserName] [WITH DEFAULT_SCHEMA = schema] 
```

我不明白`FOR`而且`FROM`...

我可以做这样的事情：

```
CREATE PROCEDURE CreateLoginAndUser
     @UserName

    CREATE LOGIN @UserName  
    WITH PASSWORD = 'password', 
         DEFAULT_SCHEMA = schema    

    CREATE USER 'DEV'+@UserName 
       [{ FOR | FROM } LOGIN @UserName] [WITH DEFAULT_SCHEMA = schema] 
```

谷歌如何搜索以下来源：

[http://ss64.com/sql/login_c.html](http://ss64.com/sql/login_c.html)

[http://ss64.com/sql/user_c.html](http://ss64.com/sql/user_c.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:50:00.633

考虑使用动态 SQL 创建用户。例如，要使用名为`@login`的数据库用户创建名为的服务器登录名`'DEV' + @login`：

```
create procedure dbo.CreateLoginAndUser(
        @login varchar(100),
        @password varchar(100),
        @db varchar(100))
as
declare @safe_login varchar(200)
declare @safe_password varchar(200)
declare @safe_db varchar(200)
set @safe_login = replace(@login,'''', '''''')
set @safe_password = replace(@password,'''', '''''')
set @safe_db = replace(@db,'''', '''''')

declare @sql nvarchar(max)
set @sql = 'use ' + @safe_db + ';' +
           'create login ' + @safe_login + 
               ' with password = ''' + @safe_password + '''; ' +
           'create user DEV' + @safe_login + ' from login ' + @safe_login + ';'
exec (@sql)
go 
```

在客户端构建 SQL 语句可能更容易。`create login`但即便如此，您也不能在语句中使用参数。所以要警惕 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:55:22.707

{ 为 | FROM } 表示您可以使用 for 或 from。

| （竖线）= 分隔括号或大括号中的语法项。您只能使用其中一项。

编辑：

我应该补充说它们是同义词，你可以使用它们中的任何一个，结果是一样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:46:24.297

您应该考虑用户权限。要创建 sql server 登录名和数据库用户，您必须对 SQL Server 实例具有高权限。因此，要么您必须授予用户执行该操作的权限（以及这意味着服务器级别和数据库杠杆权限），要么您必须使用其他机制来防止您的服务器易受攻击。

一种选择是使用证书和签名存储过程来“很好地”做事，并且不允许直接创建登录名/用户。

此外，能够使用跟踪的人将能够看到密码（如果您没有将其包装在程序中，则密码不会显示在跟踪中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:47:36.517

这是一个关于如何为服务器范围创建登录名的示例，以及如何为您的数据库创建一个用户使其适应一个过程

```
USE [master]
GO
CREATE LOGIN [usr] WITH PASSWORD=N'pass', DEFAULT_DATABASE=[yourDb], DEFAULT_LANGUAGE=[English], CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO

USE [yourDb]
GO
CREATE USER [usr] FOR LOGIN ['usr]
GO 
```

您只需要接收 usr 和 password 作为参数并使用它

# magento - 如何在 Magento 中获取 Block 孩子？

> ID：10930670
> 
> 赞同：12
> 
> 时间：2012-06-07T11:13:27.783
> 
> 标签：magento

我在一个**phtml**文件中，如何获取当前模板中的子块列表？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T11:16:11.777

```
$children = $this->getChild(); 
```

检查**app/code/Mage/Core/Block/Abstract.php中的代码**

```
public function getChild($name = '')
{
    if ($name === '') {
        return $this->_children;
    } elseif (isset($this->_children[$name])) {
        return $this->_children[$name];
    }
    return false;
} 
```

所以如果没有给出名字，它只会返回所有的孩子。

# javascript - Dojo 增强网格 - JsonRestStore，使用 JsonRestStore 时网格不显示数据

> ID：10930673
> 
> 赞同：0
> 
> 时间：2012-06-07T11:13:32.287
> 
> 标签：javascript, dojox.grid, dojo

我有一个像

```
[
    {
        "switchType": {
            "name": "sansayv15",
            "perform": false,
            "createBy": null,
            "createDate": null,
            "intId": 1,
            "id": 1
        },
        "collectorType": {
            "name": "FTP",
            "perform": false,
            "createBy": null,
            "createDate": null,
            "intId": 1,
            "id": 1
        },
        "fileType": {
            "name": "TEXT",
            "perform": false,
            "createBy": null,
            "createDate": null,
            "intId": 1,
            "id": 1
        },
        "exportType": {
            "name": "DB",
            "perform": false,
            "createBy": null,
            "createDate": null,
            "intId": 1,
            "id": 1
        },
        "linesToSkip": "1",
        "checkValidate": "true",
        "checkDuplicate": "true",
        "driver": "com.mysql.jdbc.Driver",
        "url": "jdbc:mysql://localhost:3306/panamaxmediation",
        "tableName": "sansayv15",
        "ftpIp": null,
        "ftpPort": null,
        "ftpUserName": null,
        "ftpPassword": null,
        "sftpIp": null,
        "sftpPort": null,
        "sftpUserName": null,
        "sftpPassword": null,
        "name": "sansayv15",
        "password": "root",
        "userName": "root",
        "perform": false,
        "createBy": null,
        "createDate": null,
        "intId": 1,
        "id": 1
    }
] 
```

这是我服务的输出。我在两个存储 JsonResStore 和 ObjectStore 中使用此输出而不是 MemoryStore 用于 EnhancedGrid

我在变量中定义了网格结构，

```
var templateGridStructure = [ {
        name : "ID",
        field : "id",
        hidden : "true"
    }, {
        name : "Name",
        field : "name",
        width : "auto"
    }, {
        name : "Collection Method",
        field : "_item",
        width : "auto",
        formatter : function(item) {
            return item.collectorType.name;
        }
    }, {
        name : "Export Method",
        field : "_item",
        width : "auto",
        formatter : function(item) {
            return item.exportType.name;
        }
    },  {
        name : "Source File Type",
        field : "_item",
        width : "auto",
        formatter : function(item) {
            return item.fileType.name;
        }
    },{
        name : "Duplication Check",
        field : "checkDuplicate",
        width : "auto",
    },{
        name : "Validation Check",
        field : "checkValidate",
        width : "auto",

    },{
        name : "Switch Type",
        field : "_item",
        width : "auto",
        formatter : function(item) {
            return item.switchType.name;
        }
    } ]; 
```

当我在 EnhancedGrid 中使用 ObjectStore

```
templateGrid = new dojox.grid.EnhancedGrid({
                id : "templateGrid",
                name : "templateGrid",
                store : objectStore}); 
```

网格显示正确的数据但是当我在 EnhancedGrid 中使用 JsonRestStore

```
templateGrid = new dojox.grid.EnhancedGrid({
                id : "templateGrid",
                name : "templateGrid",
                store : jsonRestStore}); 
```

我得到错误 - 网格没有显示数据。

这两个商店之间定义列结构有什么区别吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:29:48.317

我发现了错误，礼貌：Dojo IRC“Ravi：你不应该直接访问 dojo/数据存储的项目”而不是直接使用格式化程序方法中的项目

```
{
        name : "Switch Type",
        field : "_item",
        width : "auto",
        formatter : function(item) {
            return item.switchType.name;
        }
    } 
```

使用 store.getValue(item,property)、JsonRestStore，不允许直接访问项目

```
{
        name : "Switch Type",
        field : "_item",
        width : "auto" ,
        formatter : function(item) {
            return store.getValue(item,"switchType").name;
        } 
    } 
```

我希望，有人会从中得到帮助

# c++ - 臭名昭著的“功能”未在此范围内声明

> ID：10930679
> 
> 赞同：-2
> 
> 时间：2012-06-07T11:13:56.110
> 
> 标签：c++, oop, header, scope

我知道这已被问过很多次，但我无法理解这个问题。这是我的头文件：

```
#ifndef TASK_H
#define TASK_H

#include "storage_adaptors.hpp"
#include <boost/numeric/ublas/vector.hpp>

class Task {
private:
    boost::numeric::ublas::vector<double> taskPosistionConstraint;
    boost::numeric::ublas::vector<double> initialPosition;
    boost::numeric::ublas::vector<double> finalPosition;
    double pathLength;
    int taskType;

public:
    Task();
    Task(double* _initialPoint, double* _finalPoint, int type);
    double getLength();
    int getTaskType();

    ~Task();
};

#endif  /* TASK_H */ 
```

这是cpp文件：

```
#include "Task.h"

const int TASK_SIZE = 3;

Task::Task() {
}

Task::~Task() {
}

Task::Task(double* _initialPoint, double* _finalPoint, int type) {

    finalPosition = make_vector_from_pointer(TASK_SIZE,_finalPoint);
    initialPosition = make_vector_from_pointer(TASK_SIZE, _initialPoint);

} 
```

错误发生在其中`make_vector_from_pointer`定义的函数上，该函数`storage_adaptors.hpp`包含在`Task.h`其中`boost hpp file`。如果将标头添加到类头文件中，为什么我会出现超出范围的错误：

> Task.cpp:21：错误：“make_vector_from_pointer”未在此范围内声明

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:18:06.933

如果它是一个提升功能，不应该`boost::make_vector_from_pointer'`吗？或者它所在的任何命名空间（如果不是直接在 boost 命名空间中）。

# uiscrollview - 如何从所选图像开始滚动图像？

> ID：10930682
> 
> 赞同：1
> 
> 时间：2012-06-07T11:14:02.650
> 
> 标签：uiscrollview, uiimageview

我有一个包含图像视图的 tableView，比如每个单元格都有 3 个图像视图。现在，当我点击第 5 个图像（第 2 行的第 2 个图像）时，它被重定向到另一个包含 uiscrolleview 的视图控制器，并且在其 viewdidload 中我正在加载一个包含前一个控制器的所有图像的数组。它从第一个图像开始滚动。但我想从前一个控制器中点击的图像开始（这里是第 5 张图像）。

# java - 选择具有标准的Java模型列表中的前n个元素元素

> ID：10930684
> 
> 赞同：0
> 
> 时间：2012-06-07T11:14:18.057
> 
> 标签：java, list, jdbc, top-n

我有一个这样的 MySQL 表

```
id_user id_info
1 45
1 54
1 12
2 16
2 48
3 94
... ... 
```

对于我的所有用户，我想随机选择 n 个信息（比如 1 个），或者使用一个标准。我知道当表很大时它在纯 MySQL 中非常密集（我尝试了这个解决方案[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-每组-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/) )

在 Java 中，我查询整个表，并将数据放在 a 中`List<ModelData>`，其中`ModelData`是简单的模型，只有 getter 和 setter。什么是剥离这个列表的最佳方法，所以最后我会：

```
id_user id_info
1 54
2 16
3 94
... ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:42:12.740

如果你想要排序记录，我更喜欢 TreeMap。

`Map<Integer,id_info_type> records =new TreeMap<Integer, id_info_type>()`

键：**整数**

值：**id_info_type**如果它是字符串，则选择字符串。

我认为这可能会对你有所帮助。

无需关心 Map 会处理的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:20:49.230

而不是 list ，将它们放在以 userid 作为键的 hashmap 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:28:13.827

我建议您在创建`List`以下内容时进行操作

*   使用 a`LinkedHashMap`并使用 user_id 作为键，使用 info_id 作为值。
*   当您遍历您的行时，检查您是否`LinkedHashMap`包含该键，如果为 false，则插入 info_id 作为值。如果该密钥已经存在，则用新密钥随机更改值（使用可能性为 0.5 的随机数决策）。

最后你会得到你所希望的。

# c++ - sprintf 的内部工作

> ID：10930685
> 
> 赞同：0
> 
> 时间：2012-06-07T11:14:21.743
> 
> 标签：c++, c, printf

我正在像这样使用 sprintf

```
sprintf(cTmpBuf, "%0*lu",targetPrecision,ulFraction); 
```

在此之前我是这样使用的

```
sprintf(cTmpBuf, "%06lu", ulFraction); 
```

现在我知道它选择 targetPrecision 的值并将其放入 * 但我想知道它背后发生的内部事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:19:02.270

如果您想知道它是如何实现的，那就没有魔法了。这只是使用`<stdarg.h>`. 非常粗略，它会是这样的：

```
prec = -1;
⋮
if (*cp == '*') {
  prec = va_arg(ap, int);
  cp++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:30:46.417

我不确定这是否能回答您的问题，但在字符串格式中使用`*`可以让您控制格式宽度。因此，在第一次调用中，格式宽度由`targetPrecision`.

在第二次调用中，格式宽度固定为 6 位。

至于`sprintf`. 您可以参考@Marcelo Cantos 的回答。

检查此[`link`](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)格式参数。

# jquery - jquery slideDown() 之后的代码不执行

> ID：10930690
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:14:44.800
> 
> 标签：jquery, slidedown

jQuery代码：

```
$('#loading').slideDown('slow');
alert("go"); 
```

在我的例子中，alert() 函数没有调用，这意味着 slideDown() 之后的代码没有执行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:23:49.147

jQuery 库是否正确加载？

# linux - 在 centos 问题上删除软件包

> ID：10930691
> 
> 赞同：0
> 
> 时间：2012-06-07T11:14:45.567
> 
> 标签：linux, centos, rpm, yum

嗨，伙计们，我在尝试删除 centos 上的文件时得到以下输出。我已经尝试过 yum，但它已经挂了很久了 我能够安装和删除除基于 php 的软件包之外的其他软件包。

rpm -e --nodeps php-pear-Crypt-Blowfish

（进程：15212）：GLib-GObject-CRITICAL **：gtype.c:2458：初始化断言失败，在此函数之前使用 IA__g_type_init()

（进程：15212）：GLib-CRITICAL **：g_once_init_leave：断言`initialization_value！= 0'失败

（进程：15212）：GLib-GObject-CRITICAL **：g_object_new：断言“G_TYPE_IS_OBJECT（object_type）”失败

提前致谢，

gda2004

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:20:58.780

尝试擦除而不执行脚本：

```
rpm -e --nodeps --noscripts php-pear-Crypt-Blowfish 
```

如果这没有帮助，请确定是否有进程仍在访问该包中的文件。您使用`rpm -ql`. 检查`fuser`是否某些文件正在使用中。

请记住，--nodeps 和--noscripts 可能会导致安装失败，即其他软件包无法正常工作或内容未正确删除。

# delphi - 如何在 AdvancedCustomDrawItem 期间绘制 TTreeView 的样式选择矩形？

> ID：10930695
> 
> 赞同：8
> 
> 时间：2012-06-07T11:14:56.607
> 
> 标签：delphi, treeview, selection, ownerdrawn

我正在`TTreeView`使用事件从头开始进行自定义绘图`OnAdvancedCustomDrawItem`，我想知道如何在我的所有者绘制项目的背景中正确呈现这些选择和热矩形？它们是 Vista/7 风格的，所以我不能简单地用纯色填充背景。

![在此处输入图像描述](../Images/ce7699ebc21f3d7535e25254c646953a.png)

我试图在`cdPostPaint`舞台上绘制我的项目，但如果我离开舞台`DefaultDraw := True`以`cdPrePaint`绘制选择背景，则会出现完整的默认绘图，包括项目的文本。

```
procedure TForm1.TreeView1AdvancedCustomDrawItem(Sender: TCustomTreeView;
  Node: TTreeNode; State: TCustomDrawState; Stage: TCustomDrawStage; var PaintImages,
  DefaultDraw: Boolean);
begin
  case Stage of
    cdPreErase:
    begin
      DefaultDraw := True;
    end;

    cdPostErase:
    begin
      DefaultDraw := True;
    end;

    cdPrePaint:
    begin
      // I thought this will paint only the selected/hot backgrounds, 
      // however this will paint whole item, including text.
      DefaultDraw := True;
    end;

    cdPostPaint:
    begin
      DefaultDraw := False;

      // painting my owner-draw text
      // .........
    end;
  end;

  PaintImages := False;
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T16:39:51.350

Here is my solution (tested).

Note the TreeView must have `HotTrack := True` to draw hot items normally.

There also must be additional drawing when themes not enabled.

```
uses
  UxTheme,
  Themes;

const
  TreeExpanderSpacing = 6;

procedure TForm1.DrawExpander(ACanvas: TCanvas; ATextRect: TRect; AExpanded: Boolean;
  AHot: Boolean);
var
  ExpanderRect: TRect;
  Graphics: IGPGraphics;
  Points: array of TGPPoint;
  Brush: IGPBrush;
  Pen: IGPPen;
  ThemeData: HTHEME;
  ElementPart: Integer;
  ElementState: Integer;
  ExpanderSize: TSize;
  UnthemedColor: TColor;
begin
  if ThemeServices.ThemesEnabled then
  begin
    if AHot then
      ElementPart := TVP_HOTGLYPH
    else
      ElementPart := TVP_GLYPH;

    if AExpanded then
      ElementState := GLPS_OPENED
    else
      ElementState := GLPS_CLOSED;

    ThemeData := OpenThemeData(TreeView1.Handle, VSCLASS_TREEVIEW);
    GetThemePartSize(ThemeData, ACanvas.Handle, ElementPart, ElementState, nil,
      TS_TRUE, ExpanderSize);
    ExpanderRect.Left := ATextRect.Left - TreeExpanderSpacing - ExpanderSize.cx;
    ExpanderRect.Right := ExpanderRect.Left + ExpanderSize.cx;
    ExpanderRect.Top := ATextRect.Top + (ATextRect.Bottom - ATextRect.Top - ExpanderSize.cy) div 2;
    ExpanderRect.Bottom := ExpanderRect.Top + ExpanderSize.cy;
    DrawThemeBackground(ThemeData, ACanvas.Handle, ElementPart, ElementState, ExpanderRect, nil);
    CloseThemeData(ThemeData);
  end
  else
  begin

    // Drawing expander without themes enabled

    Graphics := TGPGraphics.Create(ACanvas.Handle);
    Graphics.SmoothingMode := SmoothingModeHighQuality;

    ExpanderRect := ATextRect;
    ExpanderRect.Right := ATextRect.Left - TDPIAware.GetScaledSize(TreeExpanderSpacing96dpi);
    ExpanderRect.Left := ATextRect.Left - TDPIAware.GetScaledSize(TreeExpanderSpacing96dpi) -
      TDPIAware.GetScaledSize(Max(TreeExpanderCollapsedWidth96dpi, TreeExpanderExpandedWidth96dpi));

    if ASelected then
      UnthemedColor := ColorToRGB(clHighlightText)
    else
      if AExpanded then
        UnthemedColor := clBlack
      else
        UnthemedColor := clGray;

    SetLength(Points, 3);
    if AExpanded then
    begin
      Points[0] := TGPPoint.Create(ExpanderRect.Right, ExpanderRect.Top +
        (ExpanderRect.Bottom - ExpanderRect.Top - TreeExpanderExpandedHeight96dpi) div 2);
      Points[1] := TGPPoint.Create(ExpanderRect.Right, ExpanderRect.Top +
        (ExpanderRect.Bottom - ExpanderRect.Top + TreeExpanderExpandedHeight96dpi) div 2);
      Points[2] := TGPPoint.Create(ExpanderRect.Right - TreeExpanderExpandedWidth96dpi,
        ExpanderRect.Top + (ExpanderRect.Bottom - ExpanderRect.Top +
        TreeExpanderExpandedHeight96dpi) div 2);
      Brush := TGPSolidBrush.Create(TGPColor.CreateFromColorRef(UnthemedColor));
      Graphics.FillPolygon(Brush, Points);
    end
    else
    begin
      Points[0] := TGPPoint.Create(ExpanderRect.Right - TreeExpanderCollapsedWidth96dpi,
        ExpanderRect.Top + (ExpanderRect.Bottom - ExpanderRect.Top -
        TreeExpanderCollapsedHeight96dpi) div 2);
      Points[1] := TGPPoint.Create(ExpanderRect.Right,
        ExpanderRect.Top + (ExpanderRect.Bottom - ExpanderRect.Top) div 2);
      Points[2] := TGPPoint.Create(ExpanderRect.Right - TreeExpanderCollapsedWidth96dpi,
        ExpanderRect.Top + (ExpanderRect.Bottom - ExpanderRect.Top +
        TreeExpanderCollapsedHeight96dpi) div 2);
      Pen := TGPPen.Create(TGPColor.CreateFromColorRef(UnthemedColor));
      Graphics.DrawPolygon(Pen, Points);
    end;
  end;
end;

procedure TForm1.TreeView1AdvancedCustomDrawItem(Sender: TCustomTreeView;
  Node: TTreeNode; State: TCustomDrawState; Stage: TCustomDrawStage; var PaintImages,
  DefaultDraw: Boolean);
var
  NodeRect: TRect;
  NodeTextRect: TRect;
  Text: string;
  ThemeData: HTHEME;
  TreeItemState: Integer;
begin
  if Stage = cdPrePaint then
  begin
    NodeRect := Node.DisplayRect(False);
    NodeTextRect := Node.DisplayRect(True);

    // Drawing background
    if (cdsSelected in State) and Sender.Focused then
      TreeItemState := TREIS_SELECTED
    else
      if (cdsSelected in State) and (cdsHot in State) then
        TreeItemState := TREIS_HOTSELECTED
      else
        if cdsSelected in State then
          TreeItemState := TREIS_SELECTEDNOTFOCUS
        else
          if cdsHot in State then
            TreeItemState := TREIS_HOT
          else
            TreeItemState := TREEITEMStateFiller0;

    if TreeItemState <> TREEITEMStateFiller0 then
    begin
      ThemeData := OpenThemeData(Sender.Handle, VSCLASS_TREEVIEW);
      DrawThemeBackground(ThemeData, Sender.Canvas.Handle, TVP_TREEITEM, TreeItemState,
        NodeRect, nil);
      CloseThemeData(ThemeData);
    end;

    // Drawing expander
    if Node.HasChildren then
      DrawExpander(Sender.Canvas, NodeTextRect, Node.Expanded, cdsHot in State);

    // Drawing main text
    SetBkMode(Sender.Canvas.Handle, TRANSPARENT);
    SetTextColor(Sender.Canvas.Handle, clBlue);

    Text := Node.Text;
    Sender.Canvas.TextRect(NodeTextRect, Text,
      [tfVerticalCenter, tfSingleLine, tfEndEllipsis, tfLeft]);

    // Some extended drawing...

  end;

  PaintImages := False;
  DefaultDraw := False;
end; 
```

# actionscript-3 - AS3 CustomEvent 根本没有被扩展？

> ID：10930700
> 
> 赞同：0
> 
> 时间：2012-06-07T11:15:06.067
> 
> 标签：actionscript-3, custom-event

创建 CustomEvent 时出现一些奇怪的错误，似乎正在扩展的事件无法访问事件属性：

```
package 
{
    import flash.events.Event;
    public class CustomEvent extends Event
    {

        //public static const COMPLETE:String = 'complete';

        private var _assetName:String;
        public function get assetName ():String
        {
            return _assetName;
        }
        public function set assetName ( aname:String ):void
        {
            _assetName = aname;
        }

        public function CustomEvent (type:String, bubbles:Boolean = false, cancelable:Boolean = false)
        {
            super (type, bubbles, cancelable);
        }

        public override function clone ():Event
        {
            return new CustomEvent(type, bubbles, cancelable) as Event;
        }
    }
} 
```

做的时候：

```
myObj.addEventListener(CustomEvent.COMPLETE, objLoaded); 
```

我收到 COMPLETE 不存在的错误...好的，我将其设置到该位置，然后它抱怨无法将 CustomEvent 转换为 Event。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:56:57.123

您需要将其声明`public static const COMPLETE:String = 'complete';`为静态 var/const 不会转移到扩展类。

将 CustomEvent 转换为 Event 的错误可能是由于将事件侦听器设置为侦听`Event`not引起的`CustomEvent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:05:40.040

我们有几个问题需要在这里讨论：

1.  你有你的`public static const COMPLETE`......注释掉了。为什么？如果您想将其`CustomEvent.COMPLETE`称为事件类型，则需要这样做。

2.  使用我的通灵第三只眼，你的事件监听器声明如下：

    ```
    public completeListener(evt:Event):void
    ... 
    ```

    这不会按照你想要的方式工作。你需要

    ```
    public completeListener(evt:CompleteEvent):Void
    ... 
    ```

3.  与编译问题无关，您的自定义事件还有另一个问题。您的克隆方法不会克隆该`assetName`属性。尝试这样的事情：

    ```
    public override function clone():Event
    {
        var ret:CustomEvent = new CustomEvent(type, bubbles, cancelable);
        ret.assetName = assetName;
        return ret;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:18:28.480

事件在哪里分派，侦听器的签名是什么样的？

# c# - 在循环中动态创建对象

> ID：10930705
> 
> 赞同：12
> 
> 时间：2012-06-07T11:15:28.203
> 
> 标签：c#, string, object, dynamic

我有一个要循环的字符串数组。我想遍历数组并在每次迭代时创建一个名称与字符串值匹配的新对象。

例如;

```
string[] array = new string[] { "one", "two", "three" };

class myClass(){

    public myClass(){
    }
}

foreach (string name in array)
{
   myClass *value of name here* = new myClass(); 
} 
```

将导致实例化三个对象，名称分别为“一”、“二”和“三”。

这是可能的还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T11:27:17.310

您尝试做的事情在静态类型语言中是不可能的。[IIRC](https://stackoverflow.com/questions/10930705/creating-objects-dynamically-in-loop/10931106#10931106)，这在 PHP 上是可能的，但这是不可取的。

改用字典：http: [//ideone.com/vChWD](http://ideone.com/vChWD)

```
using System;
using System.Collections.Generic;

class myClass{

    public string Name { get; set; }
    public myClass(){
    }
}

class MainClass
{

    public static void Main() 
    {
        string[] array = new string[] { "one", "two", "three" };
        IDictionary<string,myClass> col= new Dictionary<string,myClass>();
        foreach (string name in array)
        {
              col[name] = new myClass { Name = "hahah " + name  + "!"};
        }

        foreach(var x in col.Values)
        {
              Console.WriteLine(x.Name);
        }

        Console.WriteLine("Test");
        Console.WriteLine(col["two"].Name);
    }
} 
```

输出：

```
hahah one!
hahah two!
hahah three!
Test
hahah two! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T11:17:09.590

虽然其他人给了你一个替代品，但没有人告诉他们为什么推荐你。

那是因为**您无法使用动态名称访问对象。**

（**深思熟虑**：想一想，如果你能这样做，你将如何在它们被编码/命名之前访问它们。）

`Dictionary<string, myClass>`而是像其他人提到的那样创建一个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T11:17:52.587

使用 a[`Dictionary<String, myClass>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)代替：

```
var dict= new Dictionary<String, myClass>();

foreach (string name in array)
{
    dict.Add(name, new myClass());
} 
```

现在您可以`myClass`通过您的名称访问实例：

```
var one = dict["one"]; 
```

或循环：

```
foreach (string name in array)
{
    myClass m = dict[ name ];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-22T15:36:46.613

您可以使用这种方法：

```
 var array = [srt1, srt2, str3];
  var other_array = [];

  for(var i = 0; i <  array.length; i++){
    other_array.push({
    name: array[i]
    })
  } 
```

对于查找，很容易通过过滤找到所需的实例：

```
var instance1 = other_array.filter(function(result) {
return result.name == 'str1';
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T11:18:59.513

看起来您需要一个对象字典列表：

```
var myClassDictionary = new Dictionary<string,myClass>();

foreach (string name in array)
{
  myClassDicationry.Add(name, new myClass());
}

// usage:
// myClass["one"] <- an instance of myClass 
```

据我所知，没有一种编程语言可以让您在运行时定义变量名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T11:19:10.087

你可以做这样的事情 -

```
Dictionary<string, myClass> classes = new Dictionary<string, myClass>();

foreach(string name in array)
{
    classes[name] = new myClass();
} 
```

然后您可以稍后参考命名实例

```
classes[name].MyClassMethod(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T11:19:18.070

您可以使用以下代码。

```
string[] array = new string[] { "one", "two", "three" };
Dictionary<String, myClass> list;
class myClass(){

   public myClass(){
   list = new Dictionary<String, myClass>();
   }
 } 

 foreach (string name in array)
 {
    list.Add(name, new myClass())
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-07T11:20:31.710

您可以使用列表来存储对象，以便您可以访问它们

```
list<myClass> myClasses = new List<myClass>();
foreach (myClass object in myClasses)
{
    //preform interaction with your classes here 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-07T11:42:03.370

不适用于 C# 或任何静态类型语言。

出于好奇，我尝试了我在 PHP 中记住的内容（动态创建变量）是否仍然正确。

它仍然是相同的 PHP，我上次使用它是在 2000 年。您可以即时生成变量，但并不是说它是可取的，它会污染全局变量，它可能会破坏一些现有的变量或同名对象。

[https://ideone.com/nJDiou](https://ideone.com/nJDiou)

```
<?php

class MyClass
{
    private $v;
    function __construct($x) {
        $this->v = $x;
    }
    public function getValue() {
        return $this->v;
    }
}

$one = new MyClass("I'm tough!");

echo "The one: " . $one->getValue() . "\n";

$i = 0;
foreach(array("one","two","three") as $h) {
   $$h = new MyClass("Says who? " . ++$i);
}

echo "The one: " . $one->getValue() . "\n";

echo $two->getValue() . "\n";
echo $three->getValue() . "\n";

echo "loop\n";

foreach(array("three","one","two") as $h) {
   echo $$h->getValue() . "\n";
}

?> 
```

输出：

```
The one: I'm tough!
The one: Says who? 1
Says who? 2
Says who? 3
loop
Says who? 3
Says who? 1
Says who? 2 
```

# objective-c - Lajos/iFrameExtractor 适用于模拟器但不适用于设备

> ID：10930712
> 
> 赞同：0
> 
> 时间：2012-06-07T11:16:03.773
> 
> 标签：objective-c, ios

我从 github 下载了 Lajos/iFrameExtractor 项目，按照所有步骤操作后说该应用程序在 Simulator 上运行得非常好，但在 Device 上运行失败。请帮助

# android - 在 Android 中将资产或原始文件或资源文件作为 File 对象读取

> ID：10930716
> 
> 赞同：10
> 
> 时间：2012-06-07T11:16:13.973
> 
> 标签：android, file-handling, android-resources

我有一个 jar 文件，我需要为其传递文件对象。如何将资源或资产作为文件对象传递给该方法？

如何将项目文件夹中的资产或原始文件转换为文件对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T11:33:28.170

这是我所做的：

将您的资产文件复制到 SDCard：

```
AssetManager assetManager = context.getResources().getAssets();

String[] files = null;

try {
    files = assetManager.list("ringtone"); //ringtone is folder name
} catch (Exception e) {
    Log.e(LOG_TAG, "ERROR: " + e.toString());
}

for (int i = 0; i < files.length; i++) {
    InputStream in = null;
    OutputStream out = null;
    try {
        in = assetManager.open("ringtone/" + files[i]);
        out = new FileOutputStream(basepath + "/ringtone/" + files[i]);

        byte[] buffer = new byte[65536 * 2];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
        Log.d(LOG_TAG, "Ringtone File Copied in SD Card");
    } catch (Exception e) {
        Log.e(LOG_TAG, "ERROR: " + e.toString());
    }
} 
```

然后通过路径读取你的文件：

```
File ringFile = new File(Environment.getExternalStorageDirectory().toString() + "/ringtone", "fileName.mp3"); 
```

你去吧。您拥有资产文件的文件对象的副本。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T11:32:03.060

**将原始文件读入文件。**

```
 InputStream ins = getResources().openRawResource(R.raw.my_db_file);
    ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
    int size = 0;
    // Read the entire resource into a local byte buffer.
    byte[] buffer = new byte[1024];
    while((size=ins.read(buffer,0,1024))>=0){
      outputStream.write(buffer,0,size);
    }
    ins.close();
    buffer=outputStream.toByteArray();

    FileOutputStream fos = new FileOutputStream("mycopy.db");
    fos.write(buffer);
    fos.close(); 
```

**为避免 OutOfMemory 应用以下逻辑。**

不要一次创建一个包含所有数据的巨大 ByteBuffer。创建一个小得多的 ByteBuffer，用数据填充它，然后将这些数据写入 FileChannel。然后重置 ByteBuffer 并继续，直到所有数据都被写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:29:25.230

我不知道有什么方法可以得到一个实际的`File`对象，但如果你可以使用 a `FileDescriptor`，你可以这样做：

```
FileDescriptor fd = getAssets().openFd(assetFileName).getFileDescriptor(); 
```

# jquery - jQuery - 重命名元素

> ID：10930722
> 
> 赞同：1
> 
> 时间：2012-06-07T11:16:31.867
> 
> 标签：jquery

有一个 ID="cartArea" 的 div 我有多个文本框

```
<input type="text" id="tb_1" name="tb_1" />
<input type="text" id="tb_2" name="tb_2" />
<input type="text" id="tb_3" name="tb_3" /> 
```

依此类推，列表中可能有更多或更少的项目。每个文本框旁边都有一个删除选项。我可以将选定的文本框从容器 div 中删除没有问题，但我需要做的是重命名剩余的文本框。

所以如果我删除`tb_2`，我不会留下`tb_1`and `tb_3`，而是`tb_1`and`tb_2`

这可以做到吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:19:41.517

将此代码放入某个函数中，并在删除元素后调用该函数。

试试这个，[**现场演示**](http://jsfiddle.net/yrhEu/3/)

```
 $('#cartArea').children('input[type=text]').each(function(){

    this.name ='tb_' + eval($(this).index()+1);
    //alert( this.name)
  });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:21:11.770

您可以非常简单地实现您的目标，如下所示：

```
$('#cartArea input[type=text]').attr('id', function(){
  return 'tb_' + $(this).index();  // change id
}).attr('name', function() {
  return 'tb_' + $(this).index();  // change name
}); 
```

**[演示](http://jsfiddle.net/ekUty/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:46:34.217

我不喜欢其他人的回答，因为他们要么使用了昂贵的 input[id^=] 选择器、冗长的 input[type=text] 选择器，要么没有考虑基于 i-being 0 的原因，要么没有设置 name 属性。

您可以在删除后运行此代码以重命名文本框。

```
$('#cartArea input:text').each(function(i){ this.id = this.name = 'tb_' + (i + 1); }); 
```

JSFiddle：http: [//jsfiddle.net/HT6gS/](http://jsfiddle.net/HT6gS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:22:01.570

删除后，您可以遍历剩余元素并更改名称`attr`

示例 HTML：

```
<input type="text" id="tb_1" name="tb_1" /><span>remove</span>
<input type="text" id="tb_2" name="tb_2" /><span>remove</span>
<input type="text" id="tb_3" name="tb_3" /><span>remove</span>​ 
```

示例代码：

```
jQuery('span').click(function(){
   jQuery(this).prev().remove();
   jQuery(this).remove();
    jQuery('input').each(function(index){
       jQuery(this).attr('name','tb_' + (index +1));   
    });
});​ 
```

[JSFiddle](http://jsfiddle.net/mprabhat/ekUty/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T11:20:57.763

删除后，您可以运行此代码来重命名它们：

```
$('input[id^=tb_]').each(function(i, v){ this.name = 'tb_' + i; }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-28T10:09:27.320

这里不需要古怪的 javascript 解决方案。

就像这样做：

```
<input type="text" id="tb_1" name="tb[]" />
<input type="text" id="tb_2" name="tb[]" />
<input type="text" id="tb_3" name="tb[]" /> 
```

服务器端可以通过它访问`$_GET['tb']`它是一个数组。因此`$_GET['tb'][0]`，如果您向服务器发送 3 个输入，则表示您的数据`$_GET['tb'][1]`。`$_GET['tb'][2]`

# symfony - Symfony2 Forms 字段选择或添加新实体对象

> ID：10930727
> 
> 赞同：1
> 
> 时间：2012-06-07T11:16:51.807
> 
> 标签：symfony, symfony-forms

我有一个很大的问题，我有一个`many-to-one`关联定义如下的实体：

```
/**
 * @ORM\ManyToOne(targetEntity="Bundle\Entity\Proxy", inversedBy="meeting", cascade={"persist", "remove"})
 */
private $proxy; 
```

我想用这样的组合创建一个表单：

```
array(
      '_blank'  => 'No proxy',
      '_add_new'=> 'Add new',
      'Choose from existing' => array(
                                      '1' => 'John Smith',
                                      '2' => 'Brad Pitt'
      )
) 
```

基于 Symfony2 机制。因此，在选择之后，`_add_new`我将通过 JavaScript 表单从原型中添加新的代理对象，或者如果选择是现有的，则保存 id。

这将是[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)和[http://symfony.com/doc/current/reference/forms/types/entity.html的组合](http://symfony.com/doc/current/reference/forms/types/entity.html)

有谁知道从这个话题开始？

# c++ - 如何设置 boost::shared_array 的期望

> ID：10930730
> 
> 赞同：1
> 
> 时间：2012-06-07T11:17:01.167
> 
> 标签：c++, unit-testing, boost, googlemock

我正在为某些类编写一些单元测试。这些类使用另一个类`comms_client`来执行网络通信。例如，`comms_client`提供一个`send`接收参数 a 的方法`boost::shared_array`：

```
class comms_client
{
    ...

    public:
        void send(boost::shared_array<boost::uint8_t> const & buffer, size_t size) = 0;

    ...
}; 
```

为了测试类发送的内容，我想创建一个模拟类，它允许我检查发送的数组的内容是否正确。模拟类看起来像

```
class comms_client_mock : public comms_client
{
    ...

    public:
        MOCK_METHOD2(send, void(boost::shared_array<boost::uint8_t> const & buffer, size_t size));

    ..
}; 
```

不幸的是，我还没有找到将期望放在具有这种类型的参数中的方法。我尝试使用，`testing::ElementsAreArray`但它会引发编译错误。是否有一个函数可用于将期望放在具有此类类型的参数中？您能否为 gmock 库提供自定义谓词或类来比较预期参数和实际参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:24:11.780

在谷歌搜索和阅读一些文档之后，我终于找到了[GoogleMock Cookbook](http://code.google.com/p/googlemock/wiki/CookBook#Writing_New_Parameterized_Matchers_Quickly)。要按照其中包含的规范和示例编写一个简单的自定义匹配器，非常简单。

这是生成的匹配器：

```
#include <gmock/gmock.h>

MATCHER_P2(CompareArray, expected, size, "The buffer doesn't match the expected value.")
{
    return std::equal(arg.get(), arg.get() + size, expected.get());
} 
```

这就是它的使用方式：

```
boost::shared_array<boost::uint8_t> buffer(new boost::uint8_t[1]);
buffer[0] = 0x01;
EXPECT_CALL(send(_camera.get(), CompareArray(buffer, 1), 1)); 
```

# c++ - C++ 高效计算运行中位数

> ID：10930732
> 
> 赞同：26
> 
> 时间：2012-06-07T11:17:01.977
> 
> 标签：c++, algorithm, median

那些阅读过我之前的问题的人都知道我在理解和实现快速排序和快速选择以及其他一些基本算法方面所做的工作。

快速选择用于计算未排序列表中的第 k 个最小元素，这个概念也可以用于查找未排序列表中的中位数。

这一次，我需要帮助设计一种有效的技术来计算**运行中位数**，因为 quickselect 不是一个好的选择，因为它需要在每次列表更改时重新计算。因为 quickselect 每次都必须重新启动，所以它不能利用以前完成的计算，所以我正在寻找一种不同的算法，它相似（可能）但在运行中位数方面更有效。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-07T11:41:09.783

[流式中位数](http://programmingpraxis.com/2012/05/29/streaming-median/)是使用两个堆计算的。所有小于或等于当前中位数的数都在左堆中，左堆的排列使得最大数在堆的根。所有大于或等于当前中位数的数字都在右堆中，右堆的排列使得最小的数字在堆的根。请注意，等于当前中位数的数字可以在任一堆中。两个堆中的数字计数的差异永远不会超过 1。

当进程开始时，两个堆最初是空的。输入序列中的第一个数字被添加到其中一个堆中，无论哪个都没有关系，并作为第一个流媒体中位数返回。然后将输入序列中的第二个数字添加到另一个堆，如果右堆的根小于左堆的根，则交换两个堆，并将两个数字的平均值作为第二个流返回中位数。

然后主算法开始。输入序列中的每个后续数字都与当前中值进行比较，如果小于当前中值则添加到左堆，如果大于当前中值则添加到右堆；如果输入数字等于当前中位数，则将其添加到具有较小计数的堆中，或者如果它们具有相同的计数，则任意添加到任一堆中。如果这导致两个堆的计数相差超过 1，则删除较大堆的根并插入较小的堆。然后，如果它们的计数不同，则当前中位数被计算为较大堆的根，或者如果它们的大小相同，则计算两个堆的根的平均值。

[我的博客](http://programmingpraxis.com/2012/05/29/streaming-median/)上提供了 Scheme 和 Python 中的代码。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T03:44:32.203

Jeff McClintock 运行中位数估计。只需要保留两个值。此示例迭代一组采样值（CPU 消耗）。似乎相对较快地收敛（大约 100 个样本）到中位数的估计值。这个想法是在每次迭代中，中位数英寸以恒定速率朝向输入信号。该比率取决于您估计中位数的大小。我使用平均值作为中位数大小的估计值，以确定中位数每个增量的大小。如果您需要精确到大约 1% 的中位数，请使用 0.01 * 平均值的步长。

```
float median = 0.0f;
float average = 0.0f;

// for each sample
{
    average += ( sample - average ) * 0.1f; // rough running average.
    median += _copysign( average * 0.01, sample - median );
} 
```

![在此处输入图像描述](../Images/3d7a0931b3db97b2f269ba6d99463ff9.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T11:27:19.353

一种解决方案是维护一个[顺序统计树](http://pine.cs.yale.edu/pinewiki/OrderStatisticsTree)，依次插入序列的每个元素，然后计算树中元素的中值。

每次插入需要O(lg *n ) 时间，每个中位数需要 O(lg* *n* ) 时间，总共需要 O( *n* lg *n* ) 时间，加上 O( *n* ) 空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-17T18:16:29.980

这是一个 C++ 平衡树结构，它提供了按排序列表中的索引进行查询的能力。由于它按排序顺序维护所有值，因此它不如双堆方法有效，但它提供了一些额外的灵活性。例如，它还可以为您提供运行四分位数。

```
template <typename T>
class Node
{
public:
    T key;
    Node* left;
    Node* right;
    size_t size;

    Node(T k) : key(k)
    {
        isolate();
    }

    ~Node()
    {
        delete(left);
        delete(right);
    }

    void isolate()
    {
        left = NULL;
        right = NULL;
        size = 1;
    }

    void recount()
    {
        size = 1 + (left ? left->size : 0) + (right ? right->size : 0);
    }

    Node<T>* rotateLeft()
    {
        Node<T>* c = right;
        Node<T>* gc = right->left;
        right = gc;
        c->left = this;
        recount();
        c->recount();
        return c;
    }

    Node<T>* rotateRight()
    {
        Node<T>* c = left;
        Node<T>* gc = left->right;
        left = gc;
        c->right = this;
        recount();
        c->recount();
        return c;
    }

    Node<T>* balance()
    {
        size_t lcount = left ? left->size : 0;
        size_t rcount = right ? right->size : 0;
        if((lcount + 1) * 2 < (rcount + 1))
        {
            size_t lcount2 = right->left ? right->left->size : 0;
            size_t rcount2 = right->right ? right->right->size : 0;
            if(lcount2 > rcount2)
                right = right->rotateRight();
            return rotateLeft();
        }
        else if((rcount + 1) * 2 <= (lcount + 1))
        {
            size_t lcount2 = left->left ? left->left->size : 0;
            size_t rcount2 = left->right ? left->right->size : 0;
            if(lcount2 < rcount2)
                left = left->rotateLeft();
            return rotateRight();
        }
        else
        {
            recount();
            return this;
        }
    }

    Node<T>* insert(Node<T>* newNode)
    {
        if(newNode->key < key)
        {
            if(left)
                left = left->insert(newNode);
            else
                left = newNode;
        }
        else
        {
            if(right)
                right = right->insert(newNode);
            else
                right = newNode;
        }
        return balance();
    }

    Node<T>* get(size_t index)
    {
        size_t lcount = left ? left->size : 0;
        if(index < lcount)
            return left->get(index);
        else if(index > lcount)
            return right ? right->get(index - lcount - 1) : NULL;
        else
            return this;
    }

    Node<T>* find(T k, size_t start, size_t* outIndex)
    {
        if(k < key)
            return left ? left->find(k, start, outIndex) : NULL;
        else if(k > key)
            return right ? right->find(k, left ? start + left->size + 1 : start + 1, outIndex) : NULL;
        else
        {
            if(outIndex)
                *outIndex = start + (left ? left->size : 0);
            return this;
        }
    }

    Node<T>* remove_by_index(size_t index, Node<T>** outNode)
    {
        size_t lcount = left ? left->size : 0;
        if(index < lcount)
            left = left->remove_by_index(index, outNode);
        else if(index > lcount)
            right = right->remove_by_index(index - lcount - 1, outNode);
        else
        {
            *outNode = this;
            size_t rcount = right ? right->size : 0;
            if(lcount < rcount)
                return left ? right->insert(left) : right;
            else
                return right ? left->insert(right) : left;
        }
        return balance();
    }

    Node<T>* remove_by_value(T k, Node<T>** outNode)
    {
        if(k < key)
        {
            if(!left)
                throw "not found";
            left = left->remove_by_value(k, outNode);
        }
        else if(k > key)
        {
            if(!right)
                throw "not found";
            right = right->remove_by_value(k, outNode);
        }
        else
        {
            *outNode = this;
            size_t lcount = left ? left->size : 0;
            size_t rcount = right ? right->size : 0;
            if(lcount < rcount)
                return left ? right->insert(left) : right;
            else
                return right ? left->insert(right) : left;
        }
        return balance();
    }
};

template <typename T>
class MyReasonablyEfficientRunningSortedIndexedCollection
{
private:
    Node<T>* root;
    Node<T>* spare;

public:
    MyReasonablyEfficientRunningSortedIndexedCollection() : root(NULL), spare(NULL)
    {
    }

    ~MyReasonablyEfficientRunningSortedIndexedCollection()
    {
        delete(root);
        delete(spare);
    }

    void insert(T key)
    {
        if(spare)
            spare->key = key;
        else
            spare = new Node<T>(key);
        if(root)
            root = root->insert(spare);
        else
            root = spare;
        spare = NULL;
    }

    void drop_by_index(size_t index)
    {
        if(!root || index >= root->size)
            throw "out of range";
        delete(spare);
        root = root->remove_by_index(index, &spare);
        spare->isolate();
    }

    void drop_by_value(T key)
    {
        if(!root)
            throw "out of range";
        delete(spare);
        root = root->remove_by_value(key, &spare);
        spare->isolate();
    }

    T get(size_t index)
    {
        if(!root || index >= root->size)
            throw "out of range";
        return root->get(index)->key;
    }

    size_t find(T key)
    {
        size_t outIndex;
        Node<T>* node = root ? root->find(key, 0, &outIndex) : NULL;
        if(node)
            return outIndex;
        else
            throw "not found";
    }

    size_t size()
    {
        return root ? root->size : 0;
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T20:26:50.003

滚动窗口中位数的算法：

中位数是一个排序数组，您可以从中获取中间值。

简单的滚动实现是使用队列（dqueue）和 sorted_array（任何实现，二叉树，skiparray）。

d_queue 是一个数组，您可以在其中推到尾部并从数组的前面移动（弹出）。

sorted_array 是一个数组，您可以在其中按顺序插入使用二进制搜索找到的位置。

我使用队列（先进先出数组）来跟踪添加值的顺序，以了解当队列长于所需大小时要从中间数组中删除哪些项目。要按日期时间或某个运行索引删除元素，可以添加另一个队列并检查第一个元素是否太旧，然后决定是否从两个队列中删除第一个值。

为了有效地计算中位数，我使用了排序数组技术。这是当您将新项目插入其排序位置时，因此数组始终是排序的。

1.  插入：

    *   在 sorted_array 中的有序位置插入，
    *   并将一个值推入队列。
2.  删除：

    *   如果 d_queue 第一个元素不在窗口中，或者如果在另一个队列中可以有索引，则索引太旧，则：
        *   从 d_queue(s) 中删除第一项，
        *   并在排序后的数组中对其进行二进制搜索并将其删除。
3.  要有中位数：

    *   使用 sorted_array 中间的值。
    *   如果 sorted_array 长度甚至使用中间的项目。
    *   如果 sorted_array 长度为奇数，则在中间使用两个项目的平均值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-28T22:55:11.047

```
#include<cstdio>
#include<iostream>
#include<queue>
#include <vector>         
#include <functional>

typedef priority_queue<unsigned int> type_H_low;
typedef priority_queue<unsigned int, std::vector<unsigned int>, std::greater<unsigned int> > type_H_high;

size_t signum(int left, int right) {
    if (left == right){
        return 0;
    }
    return (left < right)?-1:1;
}

void get_median( unsigned int x_i, unsigned int &m, type_H_low *l, type_H_high *r) {

    switch (signum( l->size(), r->size() )) {
    case 1: // There are more elements in left (max) heap
        if (x_i < m) {
            r->push(l->top());
            l->pop();
            l->push(x_i);
        } else {
            r->push(x_i);
        }
        break;

    case 0: // The left and right heaps contain same number of elements
        if (x_i < m){
            l->push(x_i);
        } else {
            r->push(x_i);
        }
        break;

    case -1: // There are more elements in right (min) heap
        if (x_i < m){
            l->push(x_i);
        } else {
            l->push(r->top());
            r->pop();
            r->push(x_i);
        }
        break;
    }

    if (l->size() == r->size()){
        m = l->top();
    } else if (l->size() > r->size()){
        m = l->top();
    } else {
        m = r->top();
    }

    return;
}

void print_median(vector<unsigned int> v) {
    unsigned int median = 0;
    long int sum = 0;
    type_H_low  H_low;
    type_H_high H_high;

    for (vector<unsigned int>::iterator x_i = v.begin(); x_i != v.end(); x_i++) {
        get_median(*x_i, median, &H_low, &H_high);
        std::cout << median << std::endl;
    }
} 
```

# objective-c - UIPopoverController 重复

> ID：10930735
> 
> 赞同：0
> 
> 时间：2012-06-07T11:17:14.163
> 
> 标签：objective-c, ipad, uipopovercontroller

我的应用程序中有一个由 UIBarButtonItem 打开的弹出窗口视图，但是如果我继续点击该按钮，它只会创建越来越多的弹出窗口，但我当然只想要一个，而不是重复的负载！

我该如何处理？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:55:19.977

保留对`UIPopoverController`您在屏幕上的引用（您可以通过使用 ivar 来做到这一点）。单击按钮时，检查它是否存在，如果存在，则将其关闭并释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:08:28.673

乔希，

不幸的是，这不是答案，只是对我发布的同一个问题的参考。

[从 self.navigationItem（在 UINavigationController 内部）打开时，UIPopoverController 未解除](https://stackoverflow.com/questions/11578117/uipopovercontroller-not-dismissed-when-opened-from-self-navigationitem-inside-u)

希望以这种方式为他们所有人提供答案。

如果有人可以告诉我如何在问题上附加评论-我想这是提供此类提示的更好地方。

问候，诺比

# r - ggmap 与 geom_map 叠加

> ID：10930737
> 
> 赞同：10
> 
> 时间：2012-06-07T11:17:16.437
> 
> 标签：r, map, ggplot2, ggmap

```
library(sp)
library(spdep)
library(ggplot2)
library(ggmap)
library(rgdal) 
```

获取和摆弄数据：

```
nc.sids <- readShapePoly(system.file("etc/shapes/sids.shp", package="spdep")[1],ID="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
nc.sids=spTransform(nc.sids,CRS("+init=epsg:4326")) 
```

从 stamen.com 获取背景图，情节，看起来不错：

```
ncmap = get_map(location=as.vector(bbox(nc.sids)),source="stamen",maptype="toner",zoom=7)
ggmap(ncmap) 
```

创建一个带有 long、lat、Z 的数据框，并在地图上绘制一个空白图：

```
ncP = data.frame(coordinates(nc.sids),runif(nrow(nc.sids)))
colnames(ncP)=c("long","lat","Z")

ggmap(ncmap)+geom_point(aes(x=long,y=lat,col=Z),data=ncP)
ggplot()+geom_point(aes(x=long,y=lat,col=Z),data=ncP) 
```

给它一些独特的 id，称为“id”并强化（用维生素和铁？）

```
nc.sids@data[,1]=1:nrow(nc.sids)
names(nc.sids)[1]="id"
ncFort = fortify(nc.sids) 
```

现在，我的地图和我的限制，我想绘制 74 的出生率：

```
myMap = geom_map(aes(fill=BIR74,map_id=id),map=ncFort,data=nc.sids@data)
Limits = expand_limits(x=ncFort$long,y=ncFort$lat) 
```

在空白图上我可以：

```
ggplot() + myMap + Limits 
```

但在 ggmap 上我不能：

```
ggmap(ncmap) + myMap + Limits
# Error in eval(expr, envir, enclos) : object 'lon' not found 
```

一些版本：

```
> packageDescription("ggplot2")$Version
[1] "0.9.0"
> packageDescription("ggmap")$Version
[1] "2.0" 
```

我可以将 geom_polygon 添加到 ggplot 或 ggmap 并按预期工作。所以geom_map出了点问题......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T22:33:31.257

我认为错误消息是继承问题的结果。通常，在后续层中使用不同的数据帧时会出现这种情况。

在 ggplot2 中，每一层都继承了在初始调用时全局设置的默认 aes 映射`ggplot`。例如，`ggplot(data = data, aes(x = x, y = y))`全局设置 x 和 y 映射，以便所有后续层都期望在分配给它们的任何数据帧中`x`看到。`y`如果`x`并且`y`不存在，则会出现与您得到的结果类似的错误消息。有关类似问题和一系列解决方案，[请参见此处。](https://stackoverflow.com/questions/5415132/object-not-found-error-with-ggplot2-when-adding-shape-aesthetic)

在您的情况下，这并不明显，因为第一次调用是`ggmap`- 您看不到映射，也看不到它们是如何设置的，因为`ggmap`一切都很好地包裹起来。然而，在某处`ggmap`调用`ggplot`，因此默认美学映射必须在最初调用的某处设置`ggmap`。紧随`ggmap`其后的是`geom_map`不考虑继承问题导致错误。

因此，Kohske 在较早的帖子中的建议适用 - “当您使用不同的数据集时，您需要取消 geom_map 中的 lon aes”。在不太了解已设置的内容或设置方式的情况下，通过添加`inherit.aes = FALSE`到第二层（对`geom_map`.

请注意，您不会收到错误消息，`ggplot() + myMap + Limits`因为在 ggplot 调用中没有设置美学。

在下文中，我使用的是 R 版本 2.15.0、ggplot2 版本 0.9.1 和 ggmap 版本 2.1。我几乎完全使用您的代码，除了`inherit.aes = FALSE`在对`geom_map`. 一个小的变化允许`ggmap`并被`geom_map`叠加：

```
library(sp)
library(spdep)
library(ggplot2)
library(ggmap)
library(rgdal)

#Get and fiddle with data:
nc.sids <- readShapePoly(system.file("etc/shapes/sids.shp", package="spdep")[1],ID="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
nc.sids=spTransform(nc.sids,CRS("+init=epsg:4326"))

#Get background map from stamen.com, plot, looks nice:
ncmap = get_map(location=as.vector(bbox(nc.sids)),source="stamen",maptype="toner",zoom=7)
ggmap(ncmap)

#Create a data frame with long,lat,Z, and plot over the map and a blank plot:
ncP = data.frame(coordinates(nc.sids),runif(nrow(nc.sids)))
colnames(ncP)=c("long","lat","Z")

ggmap(ncmap)+geom_point(aes(x=long,y=lat,col=Z),data=ncP)
ggplot()+geom_point(aes(x=long,y=lat,col=Z),data=ncP)

#give it some unique ids called 'id' and fortify (with vitamins and iron?)
nc.sids@data[,1]=1:nrow(nc.sids)
names(nc.sids)[1]="id"
ncFort = fortify(nc.sids)

#Now, my map and my limits, I want to plot the 74 birth rate:
myMap = geom_map(inherit.aes = FALSE, aes(fill=BIR74,map_id=id), map=ncFort,data=nc.sids@data)
Limits = expand_limits(x=ncFort$long,y=ncFort$lat)

# and on a blank plot I can:
ggplot() + myMap + Limits

# but on a ggmap I cant:
ggmap(ncmap) + myMap + Limits 
```

最后一行代码的结果是：

![在此处输入图像描述](../Images/6c574c7fd095d12dec8dc2229b5e99b8.png)

# wcf - wcf 服务不允许 POST

> ID：10930742
> 
> 赞同：0
> 
> 时间：2012-06-07T11:17:34.003
> 
> 标签：wcf, http, iis, post, soap

一般来说，我对 webervices 还是很陌生，并且陷入（我认为）配置 IIS 和 web 服务本身的困境。

我在 MVS 2010 中创建了一个 wcf Web 服务，并将其托管在 Windows 7 上的 IIS7.5 上。我使用soapUI 4.5.0 发布一条从我创建 Web 服务合同的相同 wsdl 描述生成的消息。问题是我得到 405，因为 web 服务或 web 服务器似乎不支持 http POST。

尽管我知道我得到的错误足以解决我的问题，但我对 IIS 和 Web 服务的了解不足，使我无法找到正确的解决方案。

以下是我能想到的尽可能多的信息。希望它有任何帮助，有人可以指导我朝着正确的方向前进。

在 IIS 中进行的配置：

授权规则：允许，所有用户

*   目录浏览：启用
*   处理程序映射：功能权限：读取、脚本和执行
*   处理程序映射：添加 *.wsdl -> ProtocolSupportModule -> GET、HEAD、OPTIONS、TRACE、POST
*   应用程序池：使用 .net fw 4.0 添加具有身份 NetworkService 的条目

这是发送的消息：

RAW: POST http: xxxx:21378/HTTP/1.1 Accept-Encoding: gzip,deflate Content-Type: application/soap+xml;charset=UTF-8;action="/BootNotification"

XML:

```
<soap:Envelope xmlns:soap="org/2003/05/soap-envelope" xmlns:ns="urn://Ocpp/Cs/2012/02/">
   <soap:Header/>
   <soap:Body>
      <ns:bootNotificationResponse>
         <ns:status>Accepted</ns:status>
         <ns:currentTime>${now}</ns:currentTime>
         <ns:heartbeatInterval>900</ns:heartbeatInterval>
      </ns:bootNotificationResponse>
   </soap:Body>
</soap:Envelope> 
```

这是返回的结果：

我截断了它以限制这篇文章的大小。

RAW：HTTP/1.1 405 方法不允许缓存控制：私有允许：GET、HEAD、OPTIONS、TRACE 内容类型：text/html；charset=utf-8 服务器：Microsoft-IIS/7.5 X-Powered-By：ASP.NET 日期：星期四，2012 年 6 月 7 日 07:58:09 GMT 内容长度：5611

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns=".org/1999/xhtml"> 
<head> 
<title>IIS 7.5 Detailed Error - 405.0 - Method Not Allowed</title> 
<style type="text/css"> 

...
...
...

<div class="content-container"> 
 <fieldset><legend>Most likely causes:</legend> 
  <ul>  <li>The request sent to the Web server used an HTTP verb that is not allowed by the module configured to handle the request.</li>   <li>A request was sent to the server that contained an invalid HTTP verb.</li>  <li>The request is for static content and contains an HTTP verb other than GET or HEAD.</li>    <li>A request was sent to a virtual directory using the HTTP verb POST and the default document is a static file that does not support HTTP verbs other than GET or HEAD.</li> </ul> 
 </fieldset> 
</div> 
<div class="content-container"> 
 <fieldset><legend>Things you can try:</legend> 
  <ul>  <li>Verify the list of verbs enabled for the module handler this request was sent to, and ensure that this verb should be allowed for the Web site.</li>    <li>Check the IIS log file to see which verb is not allowed for the request.</li>   <li>Create a tracing rule to track failed requests for this HTTP status code. For more information about creating a tracing rule for failed requests, click <a href=".com/fwlink/?LinkID=66439">here</a>. </li> </ul> 
 </fieldset> 
</div> 

<div class="content-container"> 
 <fieldset><legend>Links and More Information</legend> 
  This error means that the request sent to the Web server contained an HTTP verb that is not allowed by the configured module handler for the request. 
  <p><a href="amp;IIS70Error=405,0,0x80070001,7601">View more information &raquo;</a></p> 

 </fieldset> 
</div> 
</div> 
</body> 
</html> 
```

XML:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" ".org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns=".org/1999/xhtml"> 
<head> 
<title>IIS 7.5 Detailed Error - 405.0 - Method Not Allowed</title> 
<style type="text/css"> 

...

</head> 
<body> 
<div id="header"><h1>Server Error in Application "SHENZIWEBSERVICEDEPLOYED"</h1></div> 
<div id="server_version"><p>Internet Information Services 7.5</p></div> 
<div id="content"> 
<div class="content-container"> 
 <fieldset><legend>Error Summary</legend> 
  <h2>HTTP Error 405.0 - Method Not Allowed</h2> 
  <h3>The page you are looking for cannot be displayed because an invalid method (HTTP verb) is being used.</h3> 
 </fieldset> 
</div> 
<div class="content-container"> 

...

</div> 
<div class="content-container"> 
 <fieldset><legend>Most likely causes:</legend> 
  <ul>  <li>The request sent to the Web server used an HTTP verb that is not allowed by the module configured to handle the request.</li>   <li>A request was sent to the server that contained an invalid HTTP verb.</li>  <li>The request is for static content and contains an HTTP verb other than GET or HEAD.</li>    <li>A request was sent to a virtual directory using the HTTP verb POST and the default document is a static file that does not support HTTP verbs other than GET or HEAD.</li> </ul> 
 </fieldset> 
</div> 
<div class="content-container"> 
 <fieldset><legend>Things you can try:</legend> 
  <ul>  <li>Verify the list of verbs enabled for the module handler this request was sent to, and ensure that this verb should be allowed for the Web site.</li>    <li>Check the IIS log file to see which verb is not allowed for the request.</li>   <li>Create a tracing rule to track failed requests for this HTTP status code. For more information about creating a tracing rule for failed requests, click <a href=".com/fwlink/?LinkID=66439">here</a>. </li> </ul> 
 </fieldset> 
</div> 

<div class="content-container"> 
 <fieldset><legend>Links and More Information</legend> 
  This error means that the request sent to the Web server contained an HTTP verb that is not allowed by the configured module handler for the request. 
  <p><a href=".com/fwlink/?LinkID=62293&amp;IIS70Error=405,0,0x80070001,7601">View more information &raquo;</a></p> 

 </fieldset> 
</div> 
</div> 
</body> 
</html> 
```

这是生成的服务合同的一部分（wsdl /language:CS /serverInterface

```
// CODEGEN: The optional WSDL extension element 'PolicyReference' from namespace 'http://schemas.xmlsoap.org/ws/2004/09/policy' was not handled.
[ServiceContract(Name = "CentralSystemServiceSoap", Namespace = "urn://Ocpp/Cs/2010/08/")]
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.3038")]
[System.Web.Services.WebServiceBindingAttribute(Name="CentralSystemServiceSoap", Namespace="urn://Ocpp/Cs/2010/08/")]
public interface ICentralSystemServiceSoap {
    /// <remarks/>
    [OperationContract]
    [System.Web.Services.Protocols.SoapHeaderAttribute("chargeBoxIdentity")]
    [System.Web.Services.WebMethodAttribute()]
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("/BootNotification", RequestElementName = "bootNotificationRequest", RequestNamespace = "urn://Ocpp/Cs/2010/08/", ResponseElementName = "bootNotificationResponse", ResponseNamespace = "urn://Ocpp/Cs/2010/08/", Use = System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle = System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
    [return: System.Xml.Serialization.XmlElementAttribute("status")]
    RegistrationStatus BootNotification(string chargePointVendor, string chargePointModel, string chargePointSerialNumber, string chargeBoxSerialNumber, string firmwareVersion, string iccid, string imsi, string meterType, string meterSerialNumber, out System.DateTime currentTime, [System.Xml.Serialization.XmlIgnoreAttribute()] out bool currentTimeSpecified, out int heartbeatInterval, [System.Xml.Serialization.XmlIgnoreAttribute()] out bool heartbeatIntervalSpecified); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:25:15.993

我不明白您的服务是如何构建的以及您在那里做了什么，但根据我的经验，这是创建支持 POST 请求的 wcf RESTful 服务的简单方法：

[http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By](http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By)

**根据评论更新：**

尝试使用它：

```
[OperationContract]
[WebInvoke(Method = "POST")]
[System.Web.Services.Protocols.SoapHeaderAttribute("chargeBoxIdentity")]
[System.Web.Services.WebMethodAttribute()]
[System.Web.Services.Protocols.SoapDocumentMethodAttribute("/BootNotification", RequestElementName = "bootNotificationRequest", RequestNamespace = "urn://Ocpp/Cs/2010/08/", ResponseElementName = "bootNotificationResponse", ResponseNamespace = "urn://Ocpp/Cs/2010/08/", Use = System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle = System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
[return: System.Xml.Serialization.XmlElementAttribute("status")]
RegistrationStatus BootNotification(string chargePointVendor, string chargePointModel, string chargePointSerialNumber, string chargeBoxSerialNumber, string firmwareVersion, string iccid, string imsi, string meterType, string meterSerialNumber, out System.DateTime currentTime, [System.Xml.Serialization.XmlIgnoreAttribute()] out bool currentTimeSpecified, out int heartbeatInterval, [System.Xml.Serialization.XmlIgnoreAttribute()] out bool heartbeatIntervalSpecified); 
```

**更新**

尝试这样做：

在 IIS 7.5 -> YourWebsite -> 处理程序映射

选择面板右侧的“添加模块映射”选项

在“请求路径”字段中输入 *.wsdl

在“模块”字段中输入“ProtocolSupportModule”

单击“请求限制”并转到动词选项卡

输入 POST 动词

保存更改

# excel - 如何使用 VBA 检测不适合 Excel 单元格的值？

> ID：10930743
> 
> 赞同：6
> 
> 时间：2012-06-07T11:17:35.580
> 
> 标签：excel, vba, column-width, row-height

我们正在使用各种工具生成长 Excel 表格，这些表格必须在工作流程中进一步审查并用作输入。某些单元格对于它们包含的文本来说太小了的问题。因此，正在阅读工作表的人和程序将不会看到相同的数据。

当 Excel 未正确调整行高时，这通常适用于包含自动换行文本的合并单元格。但也有其他情况：例如，当某些列明确设置了宽度时，这对于长值是不够的。

```
|Group|Def1 |Subgroup|Definition| Id   |Data |Comment   |
|-------------------------------------------------------|
| G1  |     | G1-1   |Important |G1-1-1|...  |          |
|     |Long |        |about G1-1|G1-1-2|.....|........  |
|     |text |-------------------------------------------|
|     |about| G1-2   |Another   |G1-2-1|...  |          |
|     |group|        |important |G1-2-2|...  |long comme|
|     |G1\.  |        |text about|G1-2-3|     |          |
|-------------------------------------------------------| 
```

在这里，“定义”和“注释”中的某些单元格不完全可见。有什么方法可以以编程方式找到这样的单元格吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:22:10.587

要检测这些单元格（我不是在谈论解决问题），您可以使用 Range 对象的 Text 方法。

例如，`Range("A1").Value`可能是 123456789，但如果它被格式化为数字并且列不够宽，`Range("A1").Text`则将是“###”（或者单元格中适合许多 # 符号）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T06:50:17.897

这是我以前使用过的一个技巧：

```
With Columns("B:B")
    oldWidth = .ColumnWidth ' Save original width

    .EntireColumn.AutoFit
    fitWidth = .ColumnWidth ' Get width required to fit entire text

    .ColumnWidth = oldWidth ' Restore original width

    If oldWidth < fitWidth Then
        ' Text is too wide for column.
        ' Do stuff.
    End If
End With 
```

当然，这将一次适用于整个列。您仍然可以通过将单元格一个接一个地复制到一个虚拟列并在`AutoFit`那里进行测试来使用它。

但可能对您更有用的是我对这个问题的早期回答：[Split text across multiple rows based on column width](https://stackoverflow.com/a/5378084/119775)。它描述了一种确定任何给定单元格中文本宽度的方法（并将其与单元格的实际宽度进行比较以确定文本是否适合）。

**编辑**回应您的评论：如果您的某些单元格足够高以显示 2 行或更多行文本，那么您可以使用我[之前的回答](https://stackoverflow.com/a/5378084/119775)中描述的类似方法，首先使用`.EntireRow.AutoFit`来确定字体的高度并`.RowHeight`确定如何许多行适合单元格，然后使用上一个问题的方法确定文本是否可以适合该宽度的单元格中的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:08:44.887

取消合并工作簿中的所有单元格并使用 Thisworkbook.sheets("Name").rows(index).entirerow.autofit 和列相同。除了美学原因，保留合并的单元格有什么用？仅考虑“基本单元”的值（左上角）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-27T10:51:05.353

我今天遇到了同样的问题。我正在尝试这个技巧来躲避它。也许，它可能对你有用。它被编码来处理一列宽合并区域：

```
'Sheet2 is just merely support tool no data sheet in ThisWorkbook
With Sheet2.Range(target.Address)
    target.Copy
    .PasteSpecial xlPasteAll
    .UnMerge
    If .MergeArea.Count > 1 Then .UnMerge
    .ColumnWidth = target.ColumnWidth
    .Value = target.Value
    .EntireRow.AutoFit
    target.MergeArea.EntireRow.RowHeight = _
         1.05 * .RowHeight / target.MergeArea.Rows.Count
    .ClearContents
    .ClearFormats
End With 
```

不幸的是，如果有几列像这样合并单元格，那么它们相互需要的高度可能会相互冲突，并且需要额外的代码来恢复和谐。看起来像一段有趣的代码。希望你觉得这很有帮助。

# matlab - Matlab给出错误答案

> ID：10930750
> 
> 赞同：6
> 
> 时间：2012-06-07T11:17:57.810
> 
> 标签：matlab, precision, numerical

如果执行以下代码，MATLAB 会出错。有人可以验证吗？

```
floor([0.1:0.1:2]/0.01) 
```

那么129在这里做什么？

```
ans = 10 20 30 40 50 60 70 80 90 100 110 120 129 140 150 160 170 180 190 200 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T11:41:49.190

由于冒号生成的向量，这是一个浮点舍入误差。
就像拉斯曼所说，如果你这样做：

```
floor((0.1:0.1:2 + eps) / 0.01) 
```

不会有舍入误差。

但是，根据[冒号运算符的工作原理](http://www.mathworks.com/support/solutions/en/data/1-4FLI96/?solution=1-4FLI96)，我建议您进行相同的计算，如下所示：

```
floor([(1:20)/10] / 0.01) 
```

[***编辑***：*在拉斯曼的评论之后，我将补充说后一种方法也适用于负值，而添加`eps`有时会失败*]

底线是最好使用带有*整数*的冒号运算符来最小化舍入误差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T11:27:42.177

它可能正在执行浮点计算，导致 129.99999999999999 的不精确值......而不是 130。然后你将它降低到 129。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T11:33:18.757

这是数组构造带来的舍入近似值。解决方案是添加 eps：

```
floor([0.1:0.1:2]/0.01+ eps([0.1:0.1:2]/0.01)) 
```

# java - 如何在phonegap中拼接照片和音频文件

> ID：10930752
> 
> 赞同：0
> 
> 时间：2012-06-07T11:18:04.473
> 
> 标签：java, android, cordova

我正在使用 phonegap 创建一个 android 应用程序。

是否可以使用 phonegap 框架将图片和声音（音频）文件拼接在一起。拼接后的新文件将是一个视频文件。

例如，像 animoto（适用于 iphone）这样的应用程序。您可以在其中从手机相册中选择音轨和几张照片，然后该应用程序会创建一个非常漂亮的幻灯片，并在背景中播放声音。

您能否提供一些链接来解释如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:35:41.543

拼接是不可能的，但你可以同时运行图像和声音

# java - 创建分段进度条的最佳方法？

> ID：10930753
> 
> 赞同：8
> 
> 时间：2012-06-07T11:18:06.137
> 
> 标签：java, android, user-interface

我正在构建一个 Android 应用程序，我想创建一个非常类似于 MIUI 文件资源管理器底部的进度条

![MIUI 文件浏览器应用](../Images/3b5c931a66817f05922385fb2874f317.png)

据我所知，没有完全明显的解决方案。到目前为止我能想到的是

*   将许多具有透明背景的进度条层叠在一起
*   扩展进度条类，取多个值，重写onDraw方法

我认为第一个选项太慢且效率低下，但第二个选项可能过于复杂，但绝对是更好的解决方案。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:24:55.770

你应该为它制作一个自定义视图。例子：

```
final Paint blue = new Paint();
blue.setColor(Color.BLUE);

View progressBar = new View(getActivity()){

        protected void onDraw(android.graphics.Canvas canvas) {

            canvas.drawRect(0,0,getWidth()*progressPecentFirst,getHeight(),blue);
            blue.setColor(Color.RED);
            canvas.drawRect(0,0,getWidth()*progressPecentSecond,getHeight(),blue);
            //Repeat this
        };
    };
parentLayout.addView(progressBar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:26:23.060

一种选择是根本不让它成为传统的进度条。在我的一个个人应用程序中，我需要一个类似于圆形进度条的显示器，它有不同颜色的部分。

我是否建议您首先绘制一个填充矩形，从 0B 到 14.9GB 的颜色用于音乐，从 939MB 到 14.9GB 的颜色用于视频，从 3.52GB 到 14.9GB 的颜色用于图片，等等。

然后，您可以将背景颜色的圆形末端绘制为蒙版。

这将非常快，因为您只绘制图形基元，并且可以根据需要扩展它。

唯一的小缺点是您必须自己实现大部分逻辑，但在我看来，这是一个很小的代价。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-10T01:21:39.333

对于其他可以提供帮助的人，我根据@Zelleriation 的答案在我的 github 上留下了一个示例。进度条。

**这适应了我的需要，请随时根据您的需要进行修改。**

```
<io.ekrlaz.segmentedprogressbar.view.SegmentProgressBar
            android:id="@+id/progress"
            android:layout_width="match_parent"
            android:layout_height="10dp"
            app:cornerRadius="16dp"
            /> 
```

在你的活动中。

```
val binding = ActivityMainBinding.inflate(layoutInflater)

 binding.progress.setMax(100F)
        binding.progress.setPrimaryProgress(40F)
        binding.progress.setSecondaryProgress(10F)
        binding.progress.setThirdProgress(40F) 
```

链接：[https ://github.com/EKRLAZ/segmented-progressbar](https://github.com/EKRLAZ/segmented-progressbar)

[![在此处输入图像描述](../Images/142a30bec7266aed49d1ca6eaab7eb8e.png)](https://i.stack.imgur.com/vs4m0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-26T19:13:20.737

这是基于@Zelleriation 答案的分段进度条。进度条。

```
 SegmentedProgressBar progressBar = (SegmentedProgressBar) findViewById(R.id.segmentedProgressBar);
    progressBar.setProgressColor(Color.BLACK);
    progressBar.publishProgress(0.5f);

    <com.muneikh.SegmentedProgressBar
     android:id="@+id/segmentedProgressBar"
     android:layout_width="match_parent" /> 
```

[https://github.com/muneikh/SegmentedProgressBar](https://github.com/muneikh/SegmentedProgressBar)

[![在此处输入图像描述](../Images/5b6c8e12c660d4a9ba745e638e564e86.png)](https://i.stack.imgur.com/nZwWU.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T11:43:41.687

亲爱的，请在 api demo 中查看 android SKD 2.2 的示例**API Demo**中的构建转到查看 -> 进度条 -> 增量，然后您会看到问题的解决方案。

# extjs4 - ExtJs4 锁定列

> ID：10930754
> 
> 赞同：0
> 
> 时间：2012-06-07T11:18:06.313
> 
> 标签：extjs4

我有一个 16 列的网格。我想要以下场景 -

我希望前 5 列和最后一列被锁定。我可以使用locked:true 来做到这一点。

但这会将最后一列与前 5 列一起带到网格的左侧。

我可以将最后一列置于其原始位置，即最后一列并将前 5 列和最后一列锁定。

我正在使用 ExtJs-4.0.7

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:44:18.580

简短的回答 - 不。在 ExtJs 中，网格的锁定部分将位于左侧。

# jquery-mobile - 如何将内容内部的 div 传播到比其内容更广泛的范围？

> ID：10930757
> 
> 赞同：0
> 
> 时间：2012-06-07T11:18:08.327
> 
> 标签：jquery-mobile, datagrid

前任。下面的代码表示为蓝色框，我想将 2 个网格扩展到黄色一个。但是，问题是；这 .. 需要在里面`content`，但它总是有左右边距。我不知道如何解决这个问题。

```
<div data-role="content" data-theme="d" >
        <div class="ui-grid-a" >
            <div class="ui-block-a"><strong>Time:</strong></div>
            <div class="ui-block-b" id="price-order-timestamp">yyyy-mm-dd hh24:mi:ss</div>
        </div>

        <div style="width:100%;"> <!-- Here-->
            <div class="ui-grid-d" id="data-table-header" >
                <div class="ui-block-a">Label A</div>
                <div class="ui-block-b">Label B</div>
                <div class="ui-block-c">Label C</div>
                <div class="ui-block-d">Label D</div>
                <div class="ui-block-e">Label E</div>
            </div>
            <div class="ui-grid-d" id="data-table" >
                <div class="ui-block-a">A</div>
                <div class="ui-block-b">B</div>
                <div class="ui-block-c">C</div>
                <div class="ui-block-d">D</div>
                <div class="ui-block-e">E</div>
            </div>
        </div>
    </div> 
```

![在此处输入图像描述](../Images/4406cf9b098afcc923b43e381bbb7db2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:51:55.143

如果要删除添加到`data-role=content`标签的默认填充，请在您的 custom.css 中添加以下覆盖

```
#myPageId .ui-content{
    padding-left:0;
    padding​-right:0;
}​ 
```

[http://jsfiddle.net/nirmaljpatel/LW5aC/](http://jsfiddle.net/nirmaljpatel/LW5aC/)

# f# - 在 F# 中存储多维点

> ID：10930760
> 
> 赞同：1
> 
> 时间：2012-06-07T11:18:21.523
> 
> 标签：f#

我目前正在将一些处理多维函数的代码从 Java 移植到 F#。它支持可变维度，因此在原始实现中，每个点都表示为一个双精度数组。代码的关键功能是一个优化例程，它基本上根据一些标准生成一系列点，在这些点评估给定函数并寻找最大值。这适用于任何维度。我需要的操作是：

*   检查点的尺寸
*   创建一个与给定点具有相同尺寸的新点
*   设置（在程序或功能意义上）点的给定坐标

在 F# 中，我显然也可以以相同的方式使用数组。如果有更好的方法，我正在徘徊。如果维度是预先固定的，那么明显的选择是使用元组。是否可以在此动态设置中使用元组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:47:39.107

不，元组将按维度固定。另请注意，.NET 元组是装箱的。如果您正在处理具有小维度的大量点集合（例如二维点数组），则使用结构可能会有所帮助。

如果您真的想将 F#/.NET 的优势推向 Java，请查看泛型。使用泛型编写代码允许编写适用于任何维度的代码，并为不同的维度使用不同的表示形式（比如 1-3 维度的结构，以及更大维度的向量）：

```
let op<'T where 'T :> IVector> (x: 'T) =
    ... 
```

仅当您愿意走很长一段路才能获得绝对最佳的性能和通用性时，这才有意义。大多数项目不需要那个，坚持最简单的工作。

有趣的是，这里有一个如何利用泛型和 F# 内联的扩展示例：

```
open System.Numerics

type IVector<'T,'V> =
    abstract member Item : int -> 'T with get
    abstract member Length : int
    abstract member Update : int * 'T -> 'V

let lift<'T,'V when 'V :> IVector<'T,'V>> f (v: 'V) : 'V =
    if v.Length = 0 then v else
        let mutable r = v.Update(0, f v.[0])
        for i in 1 .. v.Length - 1 do
            r <- r.Update(i, f v.[i])
        r

let inline norm (v: IVector<_,_>) =
    let sq i =
        let x = v.[i]
        x * x
    Seq.sum (Seq.init v.Length sq)

let inline normalize (v: 'V) : 'V =
    let n = norm v
    lift (fun x -> x / n) v

[<Struct>]
type Vector2D<'T>(x: 'T, y: 'T) =
    member this.X = x
    member this.Y = y

    interface IVector<'T,Vector2D<'T>> with
        member this.Item
            with get (i: int) =
                match i with
                | 0 -> x
                | _ -> y
        member this.Length = 2
        member this.Update(i: int, v: 'T) =
            match i with
            | 0 -> Vector2D(v, y)
            | _ -> Vector2D(x, v)

    override this.ToString() =
        System.String.Format("{0}, {1}", x, y)

[<Sealed>]
type Vector<'T>(x: 'T []) =

    interface IVector<'T,Vector<'T>> with
        member this.Item with get (i: int) = x.[i]
        member this.Length = x.Length
        member this.Update(i: int, v: 'T) =
            let a = Array.copy x
            a.[i] <- v
            Vector(a)

    override this.ToString() =
        x
        |> Seq.map (fun e -> e.ToString())
        |> String.concat ", "

[<Struct>]
type C(c: Complex) =
    member this.Complex = c
    static member Zero = C(Complex(0., 0.))
    static member ( + ) (a: C, b: C) = C(a.Complex + b.Complex)
    static member ( * ) (a: C, b: C) = C(a.Complex * b.Complex)
    static member ( / ) (a: C, b: C) = C(a.Complex / b.Complex)
    override this.ToString() = string c

let v1 = Vector2D(10., 30.)
normalize v1
|> printfn "%O"

let v2 = Vector2D(C(Complex(1.25, 0.8)), C(Complex(0.5, -1.)))
normalize v2
|> printfn "%O"

let v3 = Vector([| 10.; 30.; 50.|])
normalize v3
|> printfn "%O" 
```

请注意，`norm`它们`normalize`相当通用，它们处理专门的 2D 向量和广义 N 维向量，以及不同的组件类型，例如复数（您可以定义自己的）。泛型和 F# 内联的使用确保了这些算法虽然通用，但使用紧凑的表示在特殊情况下表现良好。这就是 F# 和 .NET 泛型与 Java 相比的优势所在，在 Java 中，您必须创建代码的专用副本才能获得良好的性能。

# c# - BlogEngine.Net Json 序列化长度错误？

> ID：10930762
> 
> 赞同：2
> 
> 时间：2012-06-07T11:18:23.677
> 
> 标签：c#, blogengine.net

进入管理员帖子页面时收到以下错误：

```
"Message":
"Error during serialization or deserialization using the JSON JavaScriptSerializer.
The length of the string exceeds the value set on the maxJsonLength property.",
"StackTrace":"   
at System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj, StringBuilder output, SerializationFormat serializationFormat)
at System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj, SerializationFormat serializationFormat)
at System.Web.Script.Services.RestHandler.InvokeMethod(HttpContext context, WebServiceMethodData methodData, IDictionary`2 rawParams)
at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)", "ExceptionType":"System.InvalidOperationException" 
```

如何增加 BlogEngine.Net 中的 JSON 长度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T11:28:28.143

尝试通过更改配置文件

```
<configuration> 
  <system.web.extensions>
    <scripting>
       <webServices>
           <jsonSerialization maxJsonLength="50000000"/>
       </webServices>
    </scripting>
  </system.web.extensions>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T08:02:04.547

最好的方法是将 int32.maxvalue 分配给 maxJSonLength 作为 2147483647

# c# - 将键/值对绑定到 asp 标签的最佳方法是什么

> ID：10930766
> 
> 赞同：5
> 
> 时间：2012-06-07T11:18:36.253
> 
> 标签：c#, asp.net, .net

我有一个经常出现在我面前的情况，但我现在没有任何解决方案。假设我有一个像这样的键/值对

```
用户名 | 用户名
-----------------
1 | 瑜伽士
2 | 麦克风

```

我想将此数据绑定到一个asp标签控件，现在我要做的是，我将用户ID绑定到标签的工具提示和用户名到标签的文本，它工作正常但缺点是当用户悬停标签时将 UserID 显示为用户的工具提示，这是显而易见的。我想找到一些更好的方法来完成这项工作，请帮助我在这里获得更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:21:09.873

**对于 ASP.Net**

创建一个自定义属性，例如

```
mylabel.Attributes["attributename"] = value; 
```

**对于 WinForms/WPF**

把它放在它的`Tag`属性中。我将该属性用于此类目的。

在标签中提供用户名，当标签悬停时，提取标签（数组或列表）并显示在工具提示中。

```
mylabel.Tag = value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T11:22:44.067

您只需使用任何其他自定义名称属性来保存和读取您的用户 ID。

例如

```
Control.Attributes["data-uid"] = UserID.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:24:52.747

我会使用 UserId 作为标签的 ID，为了更好的可读性，我会使用

```
Label.ID = "lblUser_" + UserId.toString(); 
```

# delphi - 在运行时创建 DSServerClass？

> ID：10930769
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:18:58.500
> 
> 标签：delphi, datasnap

任何人都知道如何在运行时创建和运行 DSServerClass？

如果我在 DSServer 启动之前（在运行时）创建它，一切都很好，该类在客户端找到。但是如果我在 DSServer 启动后创建它，客户端将找不到该类。

我是否应该在设计时为每个表手动创建超过 100 个 DSServerClasses，并为每个连接表创建其他 DSServerClasses？

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:02:15.323

Andreano Lanusse 有两篇关于在运行时创建 DataSnap DSServerClass 的博客文章。也许那里的信息可以帮助你。

[http://www.andreanolanusse.com/en/registering-datasnap-server-class-in-runtime-with-delphi/](http://www.andreanolanusse.com/en/registering-datasnap-server-class-in-runtime-with-delphi/)

[http://www.andreanolanusse.com/en/publishing-providers-when-registering-datasnap-server-class-in-runtime/](http://www.andreanolanusse.com/en/publishing-providers-when-registering-datasnap-server-class-in-runtime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:07:15.543

第一种方法是像这样发送表名的参数

```
procedure ActiveRecord(const TableName:string;Id:Integer);
begin
  // do something
end; 
```

其他方式[在运行时创建 TDSServerClass](https://stackoverflow.com/a/10932342/528588)。

# svn - 以编程方式在远程存储库上设置 svn:externals

> ID：10930770
> 
> 赞同：2
> 
> 时间：2012-06-07T11:18:58.977
> 
> 标签：svn, command-line-interface, svn-externals

我正在开发一个基于 Web 的工具，以允许项目经理设置新的 subversion 存储库和相应的 Trac 实例。

作为这个工具的一部分，我希望能够自动将一些特定的依赖项添加到新的存储库中，比如为其他库设置一些外部。

我知道这`svn propset`不适用于远程存储库，但是`svn propedit`可以。

我的问题是 - 我如何在命令行的一个命令中发出`svn propedit`并设置属性？`svn:externals`

换句话说，`propedit`需要一个编辑器，是否有某种我可以使用的“假”编辑器只接受命令行参数（我可以与 svn 的`--editor-cmd`选项一起使用）？这样，我可以以编程方式构建 CLI 命令并通过系统调用发出它。

我不担心覆盖现有属性，因为这只适用于在几个 CPU 周期之前创建的全新存储库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T12:44:15.900

您可以编写一个可执行脚本作为您的道具编辑器。它将获得`$1`一个临时文件名作为其第一个参数（在类 unix 系统上），其中包含正在编辑的属性的当前值。您在脚本中修改文件的内容 - 这就是属性的新值。您将脚本传递为`svn propedit <pro-name> <item> --editor-cmd <my-custom-editor>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T18:27:54.110

更具体的答案是使用简单的命令行“编辑器”，它使用 echo 命令设置属性的新文本。在 unix 上，这非常简单：

```
svn propedit svn:externals \
--editor-cmd "echo '<property_value>' >" \
<target> -m "<commit_message>" 
```

这甚至可以处理多行属性值（如多个外部），因为 unix 很乐意接受带引号的字符串中的换行符：

```
svn propedit svn:externals \
--editor-cmd "echo 'first property value
another property value
yet another one' >" \
<target> -m "<commit_message>" 
```

在 Windows 上，简单的情况看起来像这样，因为它的 echo 不需要引号：

```
svn propedit svn:externals ^
--editor-cmd "echo <property_value> >" ^
<target> -m "<commit_message>" 
```

但多行版本更棘手：

```
svn propedit svn:externals ^
--editor-cmd "(echo first property value & echo another property value & echo yet another one) >" ^
<target> -m "<commit_message>" 
```

在大多数脚本语言中，构建最后一个实际上非常简单，只需将属性值的行用“ `& echo`”而不是“ `\n`”连接起来，然后用括号括起来。

# jquery - 启动另一个事件后停止一个事件

> ID：10930774
> 
> 赞同：0
> 
> 时间：2012-06-07T11:19:05.083
> 
> 标签：jquery, fadein

我有这个 jQuery：

```
 $(function() {
        // create the image rotator
        var lightShow = setInterval(rotateImages, 500);

    function rotateImages() {

        var oCurPhoto = $('#photoShow div.current');
        var oNxtPhoto = oCurPhoto.next();

        if (oNxtPhoto.length == 0){
oNxtPhoto = $('#photoShow div:first');
}

        oCurPhoto.removeClass('current').addClass('previous');

oNxtPhoto.hide().addClass('current').fadeIn(2000, function() {

oCurPhoto.removeClass('previous');
 });

    }
    }); 
```

它包含在一个循环中，因此该行将连续执行 5 次
但我想要做的是停止使用循环启动`fadeIn`另一个的效果。`fadeIn`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:29:31.793

您应该在要停止淡入淡出的元素上淡入淡出之前使用 .stop() 。

它将清除任何动画的队列。请记住，它还将阻止淡入淡出进入其回调函数。

在此处了解更多信息：[.stop() - jQuery API](http://api.jquery.com/stop/ "停止，jQuery API")

# ruby - 导轨更新 3.2.5

> ID：10930782
> 
> 赞同：0
> 
> 时间：2012-06-07T11:19:44.020
> 
> 标签：ruby, ruby-on-rails-3

对于我们的 redmine 安装（=> 项目计划、票务等工具），我们在服务器上安装了 ruby​​，效果很好……但是现在我们需要一个 rails 更新（Rails 3.2.3）来更新 redmine 等等麻烦开始了：

我做了以下事情：

1.) 安装 ruby​​ 1.9.3

```
root@information:~#  rvm install 1.9.3

Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p194 (already extracted)
ruby-1.9.3-p194 - #configuring
ruby-1.9.3-p194 - #compiling 
ruby-1.9.3-p194 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-1.9.3-p194 ...
Installation of rubygems completed successfully.
ruby-1.9.3-p194 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p194 - #importing default gemsets (/usr/local/rvm/gemsets/)
Install of ruby-1.9.3-p194 - #complete 
root@information:~# ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]
root@information:~#
root@information:/var/www/redmine# rvm docs generate
Currently 'rvm docs ...' does not work with non-rvm rubies.
root@information:/var/www/redmine# 
```

2.) 更新宝石

```
root@information:/var/www/redmine# gem update

Updating installed gems
Updating actionmailer
Successfully installed i18n-0.6.0
Successfully installed multi_json-1.3.6
Successfully installed activesupport-3.2.5
Successfully installed builder-3.0.0
Successfully installed activemodel-3.2.5
Successfully installed rack-1.4.1
Successfully installed rack-cache-1.2
Successfully installed rack-test-0.6.1
Successfully installed journey-1.0.3
Successfully installed hike-1.2.1
Successfully installed tilt-1.3.3
Successfully installed sprockets-2.1.3
Successfully installed erubis-2.7.0
Successfully installed actionpack-3.2.5
Successfully installed mime-types-1.18
Successfully installed polyglot-0.3.3
Successfully installed treetop-1.4.10
Successfully installed mail-2.4.4
Successfully installed actionmailer-3.2.5
Updating activerecord
Successfully installed arel-3.0.2
Successfully installed activerecord-3.2.5
Updating activeresource
Successfully installed activeresource-3.2.5
Updating bundler
Successfully installed bundler-1.1.4
Updating fastercsv
Successfully installed fastercsv-1.5.5
Updating rails
Building native extensions.  This could take a while...

Depending on your version of ruby, you may need to install ruby rdoc/ri data:

<= 1.8.6 : unsupported
 = 1.8.7 : gem install rdoc-data; rdoc-data --install
 = 1.9.1 : gem install rdoc-data; rdoc-data --install
>= 1.9.2 : nothing to do! Yay!

Successfully installed rack-ssl-1.3.2
Successfully installed thor-0.15.2
Successfully installed json-1.7.3
Successfully installed rdoc-3.12
Successfully installed railties-3.2.5
Successfully installed rails-3.2.5

Gems updated: i18n, multi_json, activesupport, builder, activemodel, rack, rack-cache, rack-test, journey, hike, tilt, sprockets, erubis, actionpack, mime-types, polyglot, treetop, mail, actionmailer, arel, activerecord, activeresource, bundler, fastercsv, rack-ssl, thor, json, rdoc, railties, rails

root@information:/var/www/redmine# 
```

3.) 尝试更新rails

```
root@information:/var/www/redmine# gem install rails --version '~> 3.2.0'

Successfully installed rails-3.2.5

1 gem installed

Installing ri documentation for rails-3.2.5...
Installing RDoc documentation for rails-3.2.5...
root@information:/var/www/redmine# rails -v

Rails 2.3.5

root@information:/var/www/redmine# 
```

我的问题是，redmine 2.0.1 与 ruby​​ 1.9.3 有问题，因此尝试通过例如“rvm uninstall 1.9.3”降级 ruby​​ 并尝试重新安装 ruby​​ 1.8.6 ...

毕竟我刚刚升级到 ruby​​ 1.9.3 但未能升级到 rails 3.2.5 ....

你能帮帮我吗？

我是红宝石新手。我忘记安装步骤了吗？在此先感谢您的帮助？干杯，

安斯加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:34:42.957

一般来说，Ruby 升级不会干扰您的数据库。因此，第一步是备份您的数据库。一旦您进行了全新安装，Rails 升级通常会干扰您的数据库，因为您通常必须在最后执行“rake db:migrate”。

升级完整堆栈有很多步骤：ruby、rails，然后是 redmine。您需要阅读本文档，它将指导您逐步完成升级：

[http://www.redmine.org/projects/redmine/wiki/RedmineUpgrade](http://www.redmine.org/projects/redmine/wiki/RedmineUpgrade)

# javascript - 具有动态大小图像的马赛克网格画廊

> ID：10930783
> 
> 赞同：81
> 
> 时间：2012-06-07T11:19:49.057
> 
> 标签：javascript, jquery, grid, gallery, mosaic

我刚刚收到了一个项目的以下设计，一个图像网格库，带有动态宽度和高度图像（用户提交的图像）。（截图在文末）

我尝试过[jQuery Masonry](http://masonry.desandro.com/)、[Tympanus Automatic Image Montage](http://tympanus.net/codrops/2011/08/30/automatic-image-montage/)和[CSS-Tricks Seemless Responsive Photo Grid](http://css-tricks.com/seamless-responsive-photo-grid/)，但每个都有其局限性。

*   Jquery Masonry 允许宽度和高度都是动态的，但是会产生间隙
*   后 2 个脚本生成非常漂亮的网格，但存在宽度或高度必须是静态的问题

**编辑：**我遇到了[Isotope](http://isotope.metafizzy.co/index.html)，它几乎是完美的，我可能最终会使用它，除非有什么东西可以完全解决我的需求。因此我的问题仍然是一样的......

是否有任何 javascript（最好是 jQuery）脚本可以生成完全动态的马赛克（就图像大小而言），就像下面的屏幕截图中的那样？

谢谢你的帮助

* * *

![画廊](../Images/f45fdc9b7abd77cfe133e98e91e19638.png)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-01-14T15:18:40.513

我建议[`Freewall`](https://github.com/kombai/freewall)。它是一个跨浏览器和响应式的 jQuery 插件，可帮助您创建多种类型的网格布局：灵活的布局、图像布局、嵌套网格布局、metro 风格布局、类似 pinterest 的布局......具有出色的 CSS3 动画效果和回调事件。Freewall 是为台式机、移动设备和平板电脑创建动态网格布局的一体化解决方案。

主页和文档：也找到了[`here`](http://vnjs.net/www/project/freewall/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T14:01:44.757

我认为您可以尝试[“Google Grid Gallery”](http://tympanus.net/codrops/2014/03/21/google-grid-gallery/)，它基于前面提到的 Masonry 并添加了一些附加功能，例如样式和查看器。

# php - 将 Backbone.js 模型插入 MySQL 数据库

> ID：10930789
> 
> 赞同：7
> 
> 时间：2012-06-07T11:20:18.543
> 
> 标签：php, javascript, mysql, backbone.js

我有一个带有一些默认值和 url 的主干.js 模型：

```
var Box = Backbone.Model.extend({
    url: "./save.php",
    defaults: {
        x: 0,
        y: 0,
        w: 1,
        h: 1
    }
}); 
```

然后我有这个模型的一个实例，我继续保存它：

```
var box = new Box({ x:10, y:10, w:200, h:200 });
box.save(); 
```

现在我想使用 PHP 脚本“save.php”将此模型保存到 MySQL 数据库中，如下所示：

```
<?php 
    include('connection.php');

    $id = $_POST['cid'];
    $x = $_POST['x'];
    $y = $_POST['y'];
    $w = $_POST['w'];
    $h = $_POST['h'];

    mysql_query("INSERT INTO boxes (id, x, y, w, h)
                         VALUES('$id', '$x', '$y', '$w', '$h')
                       ") or die(mysql_error());
?>
echo "Data Inserted!"; 
```

我已经尝试阅读很多教程，但我无法让这个简单的模型保存工作。为什么我的代码不起作用？关于如何解决这个问题的任何想法？

谢谢

**编辑：快速解决方案**

在php脚本中，从发送的JSON对象中获取信息的正确方式如下：

```
$box_data = json_decode(file_get_contents('php://input'));
$x = $box_data->{'x'};
$y = $box_data->{'y'};
$w = $box_data->{'w'};
$h = $box_data->{'h'}; 
```

并存储在数据库中：

```
mysql_query("INSERT INTO boxes(id, x, y, w, h)
            VALUES('', '$x', '$y', '$w', '$h') ") 
or die(mysql_error()); 
```

这样，将在“boxes”表中插入一行，其中包含主干模型Box的每个属性的信息。在这种情况下，服务器请求方法是 POST，并且“boxes”表中的 id 设置为自动递增。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T11:41:14.447

Backbone 基于 REST API：当将模型保存/更新到服务器时，Backbone 将在请求正文中将其序列化为 JSON 与`POST`我们的`PUT`请求一起发送。来自[Backbone.sync 文档](http://backbonejs.org/#Sync)

> 使用默认实现，当 Backbone.sync 发送一个保存模型的请求时，它的属性将被传递，序列化为 JSON，并在 HTTP 正文中以内容类型 application/json 发送。

这意味着您必须在服务器端

*   确定请求的类型
*   解码序列化的 JSON

这样的事情应该让你开始

```
$request_method = strtolower($_SERVER['REQUEST_METHOD']);
$data = null;

switch ($request_method) {
    case 'post':
    case 'put':
        $data = json_decode(file_get_contents('php://input'));
    break;
}

// print_r($data);

// note that mysql_* functions are deprecated
// http://php.net/manual/en/function.mysql-query.php
// inserting with a PDO object, assuming an auto incremented id
$sql = "INSERT INTO boxes (x, y, w, h) VALUES(?, ?, ?, ?)";
$sth = $dbh->prepare($sql);
$sth->execute(array(
    $data->x,
    $data->y,
    $data->w,
    $data->h
));
$id = $dbh->lastInsertId(); 
```

[检查此页面以在 PHP http://www.gen-x-design.com/archives/create-a-rest-api-with-php/](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)中更彻底地实现 REST API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:33:31.000

你忘了发身份证。

//$id = $_POST['cid'];

![在此处输入图像描述](../Images/98415165a731be877f132bb6a58a7f31.png)

使 Id 为 AUTO_INCREMENT 并从代码中删除：

> $id = $_POST['cid'];

```
mysql_query("INSERT INTO boxes (x, y, w, h)
                         VALUES('$x', '$y', '$w', '$h')
                       ") or die(mysql_error()); 
```

# java - 通用方法，RESTful 应用

> ID：10930790
> 
> 赞同：0
> 
> 时间：2012-06-07T11:20:30.463
> 
> 标签：java, generics, rest

我在我的 java 项目中使用 RESTful 应用程序。通常在我的单元测试类中，我使用这样的方法：

```
public Employee getEmployeeByEmail(String email) {
    ClientResponse clientResponse = webResource.path(beginPath + "getByEmail/" + email).get(
            ClientResponse.class);

    Employee employee = null;
    if (200 == clientResponse.getStatus()) {
        employee = clientResponse.getEntity(Employee.class);
    }

    return employee;
} 
```

...但我必须在几乎 12 个不同的类中使用类似的方法。这就是我决定做的事情：

```
public class TestManager<T> {

private WebResource webResource;
private String beginPath;
private Class<T> clazz;

public TestManager(WebResource webResource, String beginPath, Class<T> clazz) {
    this.webResource = webResource;
    this.beginPath = beginPath;
    this.clazz = clazz;
}

public boolean objectExists(String methodPath, String uniqueFieldName, String uniqueField) {
    boolean check = false;
    ClientResponse clientResponse = webResource.path(beginPath + methodPath + "/" + uniqueField).get(
                ClientResponse.class);
    JSONObject jsonObject = clientResponse.getEntity(JSONObject.class);

    if (200 == clientResponse.getStatus() && !jsonObject.isNull(uniqueFieldName)) {
        check = true;
    }

    return check;
}

public T getObjectById(String methodPath, long id) {
    ClientResponse clientResponse = webResource.path(beginPath + methodPath + "/" + id).get(
            ClientResponse.class);
    T object = null;
    if (200 == clientResponse.getStatus() && !clientResponse.getEntity(JSONObject.class).isNull("id")) {
        object = clientResponse.getEntity(clazz);
    }

    return object;
} 
```

}

方法 objectExists() 工作正常，但 getObjectById() 方法生成堆栈跟踪：

```
javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException: Error creating JSON-based XMLStreamReader - with linked exception:[javax.xml.stream.XMLStreamException: java.io.IOException: stream is closed] 
```

看来我不能这样做：

```
object = clientResponse.getEntity(clazz); 
```

但我不知道如何解决它。对不起我的英语：P

编辑：我使用球衣

Edit2： **解决方案**：问题是我两次使用 getEntity() 方法......如果我只使用一次......它可以工作......该死

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:35:38.550

如果您只是在单元测试方面遇到问题，那么您可能想看看 Jersey 测试框架。[这](http://jersey.java.net/nonav/documentation/latest/test-framework.html)是上面的球衣文档的链接，谷歌可以为您指出进一步的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:26:21.267

这是一个 GET 调用。尝试从浏览器调用它。

如果这给出了相同的错误，那么您的客户没有任何问题。

# hive - 使用 Sqoop 向 Hive 向量化

> ID：10930795
> 
> 赞同：0
> 
> 时间：2012-06-07T11:20:47.497
> 
> 标签：hive, sqoop

我一直在尝试使用 Sqoop 将表从 Vectorwise 导入 Hive。我下载了 Vectorwise JDBC 驱动程序等。它只是行不通。

这是我正在使用的命令： sudo -u hdfs sqoop import --driver com.ingres.jdbc.IngresDriver --connect jdbc:ingres://172.16.63.157:VW7/amit --username ingres -password ingres --表 vector_table --hive-table=vector_table --hive-import --create-hive-table -m 1

我收到错误：12/06/07 22:08:27 错误 sqoop.Sqoop：运行 Sqoop 时出现异常：java.lang.RuntimeException：无法加载数据库驱动程序类：com.ingres.jdbc.IngresDriver java。 lang.RuntimeException：无法加载 db 驱动程序类：com.cloudera.sqoop.manager.SqlManager.makeConnection(SqlManager.java:635) 上 com.cloudera.sqoop.manager.GenericJdbcManager.getConnection 的 com.ingres.jdbc.IngresDriver（ GenericJdbcManager.java:53) 在 com.cloudera.sqoop.manager.SqlManager.execute(SqlManager.java:524) 在 com.cloudera.sqoop.manager.SqlManager.execute(SqlManager.java:547) 在 com.cloudera.sqoop .manager.SqlManager.getColumnTypesForRawQuery(SqlManager.java:191) 在 com.cloudera.sqoop.manager.SqlManager.getColumnTypes(SqlManager.java:175) 在 com.cloudera.sqoop.manager.ConnManager.getColumnTypes(ConnManager.java:263) 在 com.cloudera.sqoop.orm.ClassWriter.getColumnTypes(ClassWriter.java:1226) 在 com.cloudera.sqoop.orm.ClassWriter.generate(ClassWriter.java:1051) 在 com.cloudera.sqoop.tool.CodeGenTool .generateORM(CodeGenTool.java:84) 在 com.cloudera.sqoop.tool.ImportTool.importTable(ImportTool.java:370) 在 com.cloudera.sqoop.tool.ImportTool.run(ImportTool.java:456) 在 com。 cloudera.sqoop.Sqoop.run(Sqoop.java:146) at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) at com.cloudera.sqoop.Sqoop.runSqoop(Sqoop.java:182)在 com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:221) 在 com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:230) 在 com.cloudera.sqoop.Sqoop.main(Sqoop.java:239 )1051) 在 com.cloudera.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:84) 在 com.cloudera.sqoop.tool.ImportTool.importTable(ImportTool.java:370) 在 com.cloudera.sqoop.tool.ImportTool .run(ImportTool.java:456) 在 com.cloudera.sqoop.Sqoop.run(Sqoop.java:146) 在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) 在 com.cloudera。 sqoop.Sqoop.runSqoop(Sqoop.java:182) 在 com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:221) 在 com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:230) 在 com.cloudera .sqoop.Sqoop.main(Sqoop.java:239)1051) 在 com.cloudera.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:84) 在 com.cloudera.sqoop.tool.ImportTool.importTable(ImportTool.java:370) 在 com.cloudera.sqoop.tool.ImportTool .run(ImportTool.java:456) 在 com.cloudera.sqoop.Sqoop.run(Sqoop.java:146) 在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) 在 com.cloudera。 sqoop.Sqoop.runSqoop(Sqoop.java:182) 在 com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:221) 在 com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:230) 在 com.cloudera .sqoop.Sqoop.main(Sqoop.java:239)hadoop.util.ToolRunner.run(ToolRunner.java:65) at com.cloudera.sqoop.Sqoop.runSqoop(Sqoop.java:182) at com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:221) at com .cloudera.sqoop.Sqoop.runTool(Sqoop.java:230) 在 com.cloudera.sqoop.Sqoop.main(Sqoop.java:239)hadoop.util.ToolRunner.run(ToolRunner.java:65) at com.cloudera.sqoop.Sqoop.runSqoop(Sqoop.java:182) at com.cloudera.sqoop.Sqoop.runTool(Sqoop.java:221) at com .cloudera.sqoop.Sqoop.runTool(Sqoop.java:230) 在 com.cloudera.sqoop.Sqoop.main(Sqoop.java:239)

如果有人可以在这里帮助我，我将不胜感激。

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:37:38.010

好的，我得到它的工作。这是一个简单的权限问题。我将 iijdbc.jar 的所有者更改为 hdfs。

sudo chown hdfs /usr/lib/sqoop/lib/iijdbc.jar

现在它正在工作！:)

我现在可以使用 Sqoop 将我的 Vectorwise 表导入 Hive。伟大的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:18:24.937

我还不能发表评论，所以作为答案：

这是来自[文档](http://sqoop.apache.org/docs/1.4.1-incubating/SqoopUserGuide.html#_connecting_to_a_database_server)的引用：

> 您可以将 Sqoop 与任何其他 JDBC 兼容的数据库一起使用。首先，为您要导入的数据库类型下载适当的 JDBC 驱动程序，并将 .jar 文件安装在客户端计算机上的 $SQOOP_HOME/lib 目录中。（如果您从 RPM 或 Debian 软件包安装，这将是 /usr/lib/sqoop/lib。）每个驱动程序 .jar 文件还有一个特定的驱动程序类，它定义了驱动程序的入口点。例如，MySQL 的 Connector/J 库有一个驱动程序类 com.mysql.jdbc.Driver。请参阅您的数据库供应商特定文档以确定主要驱动程序类。此类必须通过 --driver 作为参数提供给 Sqoop。

Sqoop 可以访问的目录中是否有正确的 jar 文件？

对于未来，如果您提供有关您的环境的更多信息（例如您使用的 Sqoop 版本等），它也总是有用的。

# php - CakePHP 本地化问题

> ID：10930796
> 
> 赞同：1
> 
> 时间：2012-06-07T11:20:48.527
> 
> 标签：php, cakephp, localization, internationalization

我按照 cakePHP 书来配置我网站的 i18n 和 l10n。假设我有英语、西班牙语、德语。

浏览器通常有一个按优先级排序的语言列表。如果列表的第一个位置出现了在我的站点上配置的语言，则一切正常。但是，例如，如果列表是这样的：法语、德语、西班牙语、英语；本地化失败并显示我在代码中使用的 i18n 标识符。

在这种情况下，我希望该页面显示为德语翻译，因为列表中是我的网站可以提供的第一种语言。这将是完美的解决方案，但至少我希望如果我的页面不知道浏览器列表的第一种语言，我可以配置默认语言（例如英语）。

我能做些什么来实现这一点，应该把代码放在哪里？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:15:33.900

好吧，我做了下一个`app/Config/bootstrap.php`：

```
$browserLangs = explode(',',$_SERVER['HTTP_ACCEPT_LANGUAGE']);
$find = 'eng';
foreach($browserLangs as $browserLang) {
    $lang = substr($browserLang,0,2);
    var_dump($lang);
    if ($lang == 'en') {
        $find = 'eng';
        break;
    } else if ($lang == 'es') {
        $find = 'spa';
        break;
    } else if ($lang == 'ca') {
        $find = 'cat';
        break;
    }
}
Configure::write('Config.language', $find); 
```

在 Accept Language 标头中，我们有一个包含浏览器所有语言列表的字符串。然后我将英语定义为默认语言，并尝试在列表中找到其他语言，当我得到一个时打破了扣环。

我把它作为答案是因为它有效，但它很脏，因为：

1.  我不知道这是否是最好的方式和最好的地方，
2.  这是非常静态的，您必须逐个放置语言，当您添加另一种语言时，您必须更新算法。最好的解决方案将自动检查蛋糕应用程序上定义的语言环境，我不知道如何要求。
3.  也许这段代码应该被定义为插件、组件或类似的东西。

也许有人可以改进这一点或发布另一个更好的解决方案作为新答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:33:43.733

您必须使用编辑器（例如：[http://poedit.net](http://poedit.net)）打开创建的 .po 文件，在那里您可以创建多个语言版本。

不要忘记更改每种语言的复数形式，对于德语`nplurals=2; plural=(n != 1)`，这里有一个列表：[http](http://translate.sourceforge.net/wiki/l10n/pluralforms) ://translate.sourceforge.net/wiki/l10n/pluralforms 。

之后，您必须将语言文件保存在`app/Locale/deu/LC_MESSAGES/...`

最后，您应该在该文件夹中有一个 default.mo 和 default.po 文件。

# xml - microsoft office xml 格式架构参考

> ID：10930803
> 
> 赞同：2
> 
> 时间：2012-06-07T11:20:59.010
> 
> 标签：xml, html, ms-office, openxml

我正在开发一个类似[Google 文档](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CIMBEBYwAA&url=http://docs.google.com/&ei=s43QT5irMc6j-gbV_6z_Cw&usg=AFQjCNHj75Au5kt8svXmuNkhBD_DjnPhNQ&sig2=XV_xnlShzAb9dfnUtx521g)的项目，因此我会将 pptx、xlsx 和 docx 文件格式转换为 html5 文件。

现在我了解了如何解压缩文件并打开每个文件夹，并且知道每个文件的作用。但我需要 document.xml 文件的 xml 架构，每个标签和每个属性的含义。

我有这个来自 msdn 的[xml 电子表格参考](http://msdn.microsoft.com/en-us/library/aa140066%28office.10%29.aspx#odc_xmlss_b)，但我需要 Office 2007 和 2010 的 Excel、word 和 powerpoint 的类似链接和描述。

我也有 pptx 格式的完整架构，[但](http://msdn.microsoft.com/en-us/library/hh643138%28v=office.12%29)我不明白如何使用它。

# ruby - 如何为 emacs 安装 ruby -mode

> ID：10930805
> 
> 赞同：5
> 
> 时间：2012-06-07T11:21:02.600
> 
> 标签：ruby, emacs, ruby-mode

我刚刚为 fedora 安装了 emacs。我想用它`emacs`来编写`ruby`. 为我提供代码提示、ruby 代码完成类型功能所需的工具、扩展是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T11:25:41.593

`ruby-mode`从 Emacs 23 开始就已经包含了。不过，它也可以通过 ELPA 获得。您可能感兴趣的其他一些事情是集成 RVM、（Cucumber `feature-mode`）、、、、、（用于 Rails）等。这是我当前用于 Ruby 开发的 Emacs 配置：`rspec-mode``ruby-electric``inf-ruby``rinari`

[https://github.com/citizen428/emacs.d/blob/master/config/ruby-conf.el](https://github.com/citizen428/emacs.d/blob/master/config/ruby-conf.el)

我也曾经写过一篇关于这个主题的博客文章，它有点过时了，从那时起我的配置也发生了变化，但它的文档更好，也许可以帮助你入门：

[http://www.citizen428.net/blog/2010/07/06/emacs-for-rubyists](http://www.citizen428.net/blog/2010/07/06/emacs-for-rubyists)

如果你使用`yasnippet`你可以在这里找到 Ruby 完成：[https ://github.com/bmaland/yasnippet-ruby-mode](https://github.com/bmaland/yasnippet-ruby-mode)

如果您对 Emacs 完全陌生，您可能希望从 Emacs Prelude 或 Starter Kit 开始：

*   [Emacs 前奏曲](http://batsov.com/prelude/)
*   [emacs 入门套件](https://github.com/technomancy/emacs-starter-kit)

# .htaccess - .htaccess 如何重定向子域？

> ID：10930806
> 
> 赞同：0
> 
> 时间：2012-06-07T11:21:06.593
> 
> 标签：.htaccess, mod-rewrite

我想用“www”进行子域重定向，但这不起作用：

```
RewriteCond %{HTTP_HOST} !^www\.(blog\.)?example\.com$ [NC]
RewriteRule .? ht-tp://www.%1example.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:30:41.813

尝试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.([^.]*)\.example\.com$ [NC]
RewriteRule ^(.*)$ http://www.%1example.com/$1 [R=301,L] 
```

希望有帮助！

# r - n 行的累积和

> ID：10930810
> 
> 赞同：0
> 
> 时间：2012-06-07T11:21:15.483
> 
> 标签：r

我一直在尝试在 R 中生成一个命令，该命令允许我生成一个新向量，其中每一行是前一个向量的 25 行的总和。

我已经尝试制作一个函数来执行此操作，这使我可以为一个数据点生成结果。

我将把它放在我不得不去的地方；我意识到这可能是一个相当基本的问题，但这是我一直在努力解决的问题......任何帮助将不胜感激；

```
example<-c(1;200)

fun.1<-function(x)
{sum(x[1:25])}

checklist<-sapply(check,FUN=fun.1) 
```

然后这为我提供了一个长度为 200 的向量，其中所有值都是 NA。

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:53:26.500

您的示例有点嘈杂（例如，`c(1;200)`没有意义，可能您想要`1:200`那里，或者，如果您想要一个列表列表，那么类似`rep`，没有`check`变量，它应该是`example`，等等）。

这是我认为您可能需要的代码（据我所知）：

```
x <- rep(list(1:200), 5)
f <- function(y) {y[1:20]}
sapply(x, f) 
```

下次请更具体，在提交问题之前尝试您发布的代码作为示例。

# android - 如何检查 json 字符串是否有效？

> ID：10930811
> 
> 赞同：3
> 
> 时间：2012-06-07T11:21:20.713
> 
> 标签：android

是否可以检查json字符串是否有效？字符串如下，我要检查

```
{
    "bakso-roso-n'deso__-6.19_106.77":
    {"Latitude":"-6.185488","Longitude":"106.77366","Distance":"90.89210930799594"},
    "print-point-duri-kepa__-6.19_106.77":
    {"Latitude":"-6.18599544813468","Longitude":"106.77267676603988647","Distance":"118.9849339548274"},
    "apartment-menara-kebun-jeruk__-6.19_106.78":
    {"Latitude":"-6.185303767096767007","Longitude":"106.7752222767679179","Distance":"247.8816947606767"},
    "ranch-market---pesanggrahan__-6.19_106.77":
    {"Latitude":"-6.1876130647tg7t72002","Longitude":"106.77343661177","Distance":"294.4255786871916"}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:24:17.487

![在此处输入图像描述](../Images/f0b1909763ee6be792564b38875d4cfe.png)您可以使用链接[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:23:29.800

我使用[http://jsonlint.com/](http://jsonlint.com/)来验证我的 json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:59:28.827

我有一个更好的在线 json 解析器。它甚至告诉json在哪一点是错误的。并告诉在哪一点缺少什么。

你不需要点击验证。它会在运行时自动检查错误。这真的很酷。尝试一下 ：）

[http://json.parser.online.fr/](http://json.parser.online.fr/)

# android - 是否可以发送带有邮件意图的html？

> ID：10930812
> 
> 赞同：2
> 
> 时间：2012-06-07T11:21:29.587
> 
> 标签：android, html, email, content-type

是否可以发送带有邮件意图的 html。我已经看到了一些关于此的问题，但他们的回答如下：

```
 final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("text/html");
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, titleString);
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(htmlString));
        startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

我正在尝试在表格中发送一些数据，但 Html.fromHtml 将删除我的表格布局..

是否有任何其他选项可以发送 html 内容类型的电子邮件...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:41:31.950

通过以下解决方法解决了它：

创建一个 html 文件并将其作为附件发送..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:32:27.470

使用 android.text.Html 支持的标签创建电子邮件正文。[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/Html.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/Html.java)

# jboss7.x - 在 jboss 7.1.1 中向管理控制台添加自定义操作

> ID：10930813
> 
> 赞同：1
> 
> 时间：2012-06-07T11:21:29.633
> 
> 标签：jboss7.x

我想使用 jboss 控制台公开自定义操作。就像在 jboss 4.2 中一样，我们使用 xmbeans 创建我们自己的接口然后调用操作。我找到了与创建自定义子系统相关但只能使用 CLI 访问的示例（https://docs.jboss.org/author/display/AS7/Example+subsystem）。但是，如果可以公开相同的操作集和Web（管理员）控制台中的属性？如果没有，有什么计划吗？

谢谢你的帮助。

最好的问候， Divya Garg

# android - Eclipse 内容辅助问题

> ID：10930817
> 
> 赞同：2
> 
> 时间：2012-06-07T11:21:38.537
> 
> 标签：android, eclipse, parameters, content-assist

在某些情况下，Eclipse 可以使用 CTRL+SPACE 帮助我完成函数调用，我得到带有参数的函数调用，但参数名称错误，简单命名为“arg0”、“arg1”、...

例如：如果我制作一个微调器并开始调用：

```
spinner.setOnItemClickListener(new OnItemClickListener() ... 
```

然后我得到额外的：

```
{
  @Override
  public void onItemClick(final AdapterView<?> **arg0**, final View **arg1**, final int **arg2**, final long arg3)
  {
  }
}); 
```

虽然 Android 的 API 有明确的名称（如此[处](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)所写）：

```
onItemClick(AdapterView<?> parent, View view, int position, long id) 
```

为什么会发生，我能做些什么来解决它？顺便说一句，我有最新版本的 Eclipse、JDK、Android adt 和 sdk（甚至出现在版本 20 预览版 3 上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:29:16.960

Eclipse 无法计算出参数，因为它找不到源或 javadoc 附件。

确保您的来源已附加。

尝试以下解决方案？

1.  在eclipse中，右键单击您的Android项目并选择Properties
2.  在左侧菜单中，选择“Java Build Path”
3.  在右侧，选择标有“库”的“选项卡”。
4.  在这里，您应该会看到您所针对的 Android SDK。例如：“Android 2.2”。
5.  单击 Android SDK 左侧的箭头以展开子级别。
6.  找到“Android.jar”并单击该箭头左侧的箭头以展开它。
7.  您将看到一个名为“Javadoc 位置”的设置。选择它，然后单击“编辑”按钮。
8.  在顶部，重新选择您的 javadocs 的路径。这通常是“path_to_android_sdk/android-sdk-mac_86/docs/reference/”。我说重新选择是因为即使它是正确的，你也应该浏览并重新选择。
9.  点击“验证”。你现在应该准备好了！

[这里](http://hacksoflife.blogspot.com/2011/02/losing-javadocs-in-eclipse-solution.html)和[这里都](https://stackoverflow.com/questions/4728733/i-cant-see-android-sdk-javadoc-in-eclipse)提到了。

# android - 将 Android 应用程序转换为黑莓智能手机和平板电脑

> ID：10930819
> 
> 赞同：0
> 
> 时间：2012-06-07T11:21:49.620
> 
> 标签：android, blackberry, blackberry-playbook

android 应用程序从数据库读取，但不向数据库写入任何内容，应用程序显示一些网页，以及其他简单的东西，如搜索结果列表......

请注意，我使用 BlackBerry 自动化工具成功地将 .apk 文件转换为 .bar 没有任何问题，因此该代码与 Blackberry SDK 兼容。但是，**我需要创建所有必要的部署文件，.cod、.jad、.bar 等**，

我怎样才能做到这一点？我需要重写它是真的吗？我已经将 android 项目导入到 Blackberry 项目中，除了**R 类**之外一切似乎都很好，黑莓中似乎没有 R 类，我该怎么办？

要在 Android 市场上查看应用程序[https://play.google.com/store/apps/details?id=com.hazcheck.dgl](https://play.google.com/store/apps/details?id=com.hazcheck.dgl)

在 iTunes 上查看应用程序[http://itunes.apple.com/us/app/hazcheck-dgl-lite/id518643993](http://itunes.apple.com/us/app/hazcheck-dgl-lite/id518643993)

感谢您一直以来的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:42:27.337

对于 Android、BlackBerry 和 J2ME，域模型和其他部分可能相同。但请注意，它应该与 java 1.3 兼容，因此您可能会错过新类、反射、注释等糖。这也需要在设计和支持级别上付出额外的努力。最后一点，UI 和其他依赖于平台的部分应该从头开始编写。

我会从头开始为您的案例编写 BB 应用程序，因为您说它是简单的应用程序并且 Android 版本已经完成。

# c# - 禁用超线程与更改 ProcessorAffinity？

> ID：10930822
> 
> 赞同：7
> 
> 时间：2012-06-07T11:21:55.110
> 
> 标签：c#, performance, affinity, hyperthreading

我注意到如果我在 BIOS 中禁用超线程，我的一些多线程计算运行得更快。

我还了解到，我可以通过修改当前进程的处理器亲和性来以编程方式禁用（逻辑）CPU：s，例如在 C# 中是这样的：

```
// using System.Diagnostics;
var current = Process.GetCurrentProcess();
var affinity = current.ProcessorAffinity.ToInt32();
current.ProcessorAffinity = new IntPtr(affinity & 0x5555); 
```

至少从性能的角度来看，通过更改处理器亲和性来禁用每秒（逻辑）CPU 是否与完全禁用超线程具有相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:10:05.603

您可以尝试使用 NUMA API，或使用 CPUID 指令手动发现 CPU 拓扑......但恕我直言，最好的解决方案是做一些合理的默认设置，并让最终用户调整线程设置。除非您有特定的硬件目标，否则有相当多的可能场景需要处理——逻辑与物理内核、超线程与否、单路与多路系统、缓存和内存拓扑。

# clojure - 在clojure中对序列进行重复数据删除

> ID：10930823
> 
> 赞同：0
> 
> 时间：2012-06-07T11:21:54.950
> 
> 标签：clojure

我需要定义一个函数，它接受一个序列和一些作用于序列内元素的函数。它从旧序列返回一个序列，其中删除了具有重复函数值的元素。

```
(defn dedup [seq & functions] ...) 
```

例如，如果

```
(f1 1) = 'a'
(f1 2) = 'a'
(f1 3) = 'c'
(f1 4) = 'd'

(f2 1) = 'za'
(f2 2) = 'zb'
(f2 3) = 'zc'
(f2 4) = 'zb' 
```

然后

```
(dedup [1 2 3 4] f1 f2) 
```

返回 (1 3) 的序列

我该怎么做？

编辑：编辑测试值以免造成误解

编辑：下面是只有 1 个功能的情况下的（不是那么功能）实现

```
(defn dedup [seq f]
  (loop [values #{} seq1 seq seq2 '()]
    (let [s (first seq1)]
      (if (nil? s)
        (reverse seq2)
        (let [v (f s)]
          (if (contains? values v)
            (recur values (rest seq1) seq2)
            (recur (conj values v) (rest seq1) (conj seq2 s)))))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:47:47.927

您的示例似乎与文本相矛盾-它返回两个函数一致的值。

```
(defn dedup [seq & fns]
  (for [s seq :when (apply = (map #(% s) fns))] s))

(dedup [1 2 3 4] 
  #(case % 1 "a" 2 "a" 3 "c" 4 "d") 
  #(case % 1 "a" 2 "b" 3 "c" 4 "b"))
(1 3) 
```

也许这有点太紧凑了？ `#(... % ...)` 相当于`(fn [x] (... x ...))`并且`map`in`dup`在函数上运行，将它们全部应用于序列中的相同值。

你也可以用

```
(dedup [1 2 3 4] {1 "a" 2 "a" 3 "c" 4 "d"} {1 "a" 2 "b" 3 "c" 4 "b"})
(1 3) 
```

ps我想也许混淆是超过英语的意思。“重复”意味着一个值重复。所以“a”“a”是“a”的副本。一世*怀疑*您的意思是“多个”-您想删除获得多个（不同）值的条目。

pps 你也可以使用`filter`：

```
(defn dedup [seq & fns] 
  (filter #(apply = (map (fn [f] (f %)) fns)) seq)) 
```

我需要显式编写一个匿名函数，因为你不能嵌套`#(...)`。

# java - Spring 3 中的字符串数组问题

> ID：10930824
> 
> 赞同：1
> 
> 时间：2012-06-07T11:21:58.953
> 
> 标签：java, javascript, spring, spring-3

我正在尝试将 String[] 从客户端发布到 Spring 3。在控制器端，我已经定义了这样的方法。

```
@RequestMapping(value = "somemethod", method = RequestMethod.POST)
            public ModelAndView exportSomething(@RequestParam("sentences") String[] sentences) {
                 //.. logic
} 
```

我发送的数据如下所示

```
sentences: ["a","b,c","d"] 
```

问题出在服务器端，句子数组的大小为 4。它将 b 和 c 拆分为两个不同的单词。

这是 Spring 的问题还是我需要改变传递数据的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:26:07.713

我猜它是 Spring 框架的一个已知问题。见[https://jira.springsource.org/browse/SPR-7963](https://jira.springsource.org/browse/SPR-7963)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:19:46.067

尝试以这种格式发送数据。

**句子：“a;b,c;d”** 注意在这种情况下你的分隔符是 ; 不是，所以你发送了一个字符串，其中包含一个列表

```
@RequestMapping(value = "somemethod", method = RequestMethod.POST)
        public ModelAndView exportSomething(@RequestParam("sentences") String sentences) {
            String[] sentenceArray = sentences.split(";");
            for(String tempString:sentenceArray){
               // perform what operation you want to perform
            } 
```

}

在这种情况下，您将得到一个大小为 3 而不是 4 的数组。

您的方法不起作用的原因可能是因为您使用了逗号，它是数组的默认分隔符。

# apache-flex - 如何在运行时向 itemrenderer 添加“图形”？

> ID：10930826
> 
> 赞同：0
> 
> 时间：2012-06-07T11:22:04.423
> 
> 标签：apache-flex, actionscript, flex4, flex-spark

可能这很简单，但现在我无法为它提出解决方案。这是我的问题的简要描述：

我有一本剪贴画对象字典：

```
clipartDict['cat'] = Cat; //Cat.mxml
clipartDict['dog'] = Dog; //Dog.mxml 
```

猫.mxml：

```
<s:Graphic>
    <s:Path x="2.86723" y="-0.000106812" data="M3.45943 80.3419C3.06051 77.3605 0.002399>
    </s:Path>
</s:Graphic> 
```

MyView.mxml（相关代码）：

```
<s:SkinnableDataContainer width="300" dataProvider="{clipArts}">
    <s:layout>
        <s:TileLayout requestedColumnCount="1"/>
    </s:layout>
    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer>
                <fx:Script>
                    <![CDATA[
                        import models.vo.ClipArtVO;
                        // (data as ClipArtVO).clipArtFileName represents the 'key' in dictionary.
                        // Now, how can I display the relevent clipart from dict based on the key
                        // this.addElement throws an Type Coercion error

                    ]]>
                </fx:Script>

            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:SkinnableDataContainer> 
```

谁能建议我一个解决方案或任何想法以任何不同的方式实施它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:37:13.223

您在该字典中放入的是类引用而不是实例。您必须创建所需图形的实例才能将其添加到 displayList。因此，有两种方法可以解决您的问题。

**方法一**

将 Graphics 的实例放入 Dictionary 中（而不是 Class 引用）：

```
clipartDict['cat'] = new Cat();
clipartDict['dog'] = new Dog(); 
```

然后只需将其添加到 displayList 中：

```
var graphic:Graphic = clipartDict[(data as ClipArtVO).clipArtFileName];
addElement(graphic); 
```

**方法二**

动态创建 Class 引用的实例。我们保持字典原样：

```
clipartDict['cat'] = Cat;
clipartDict['dog'] = Dog; 
```

并创建一个实例并将其添加到 displayList 中，如下所示：

```
var Graphic:Class = clipartDict[(data as ClipArtVO).clipArtFileName];
addElement(new Graphic()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:32:20.737

您应该能够将 cat.mxml 文件包装在 SpriteVisualElement 中。这有点乏味，但基本上是这样做的：

```
protected var sprite :SpriteVisualElement;
protected var class : Class;
protected var graphicInstance : Graphic;

protected function dataChangeMethod():void{
  // (data as ClipArtVO).clipArtFileName represents the 'key' in dictionary.
  // You told us about the key, but not the value. I'm assuming the value is an actual class
  // and not an instance of the class 
  class = (data as ClipArtVO).clipArtFileName;
  // create an instance of the class
  graphicInstance = new class();
  // create the new spriteVisualElement instance
  sprite = new SpriteVisualElement();
  // Add the graphic instance as a child to the spriteVisualElement
  // you may need to do any sizing of the graphicInstance before adding it
  sprite.addChild(graphicInstance);
  // add the Sprite Visual Element as a child to your container
  this.addElement(sprite);
} 
```

# git - 如何对 git 主模块和子模块使用一次提交？

> ID：10930828
> 
> 赞同：2
> 
> 时间：2012-06-07T11:22:08.230
> 
> 标签：git, git-submodules

假设我有一个项目（UI），它有一个 git 子模块（数据层）。我会经常更改子模块和主 git 存储库。是否可以修改两者中的文件并将它们一起提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:16:37.673

它们位于两个单独的存储库中，所以不，不能使用单个提交来提交它们。事实上，由于子模块通常存在于“分离的 HEAD”状态，你不想在没有确保生成可访问的提交的情况下在那里提交。

您可能可以编写一个简短的 shell 脚本来为您处理这个问题（也就是说，您运行带有提交消息的 shell 脚本，它会负责进行所有必要的提交），但这会有点棘手 - - 在子模块中提交更改将需要在父存储库中提交，因此您执行操作的顺序很重要。确保子模块不处于分离状态*应该*很简单`git checkout master`，但如果失败了怎么办？

如果您经常同时更改两者，您确定它们需要是单独的存储库吗？

# java - 将可执行的 jar 制作成 .app（对于 mac），而不会留下 Jar 的痕迹

> ID：10930829
> 
> 赞同：1
> 
> 时间：2012-06-07T11:22:08.293
> 
> 标签：java, macos, obfuscation, protection

我已经在我的 Windows 机器上用 Java 编写了一个应用程序，并想为我的 Mac 打包它。我知道 JarBundler，最初我认为它会是完美的，因为`.jar`无论如何我都要用 ProGaurd 来混淆它，但是：当我混淆应用程序时，我在 Mac 上使用`AboutHandler`and时遇到了问题`QuitHandler`。

我一直在环顾四周，我注意到`.jar`Eclipse (IDE) 中没有文件`.app`，即使我相信它是用 Java 编写的，所以这似乎是我需要的。唯一的问题是我不知道它是如何完成的，我希望你们中的一个可以指导我。我已经读到 Mac 用户确实倾向于有不同的心态，应用程序也不会受到太多的黑客攻击，而且我知道仍然需要反编译器来阅读源代码，但是，如果我能做这样的事情，我会比较喜欢。对我来说，我能做的任何事情来帮助阻止人们阅读源代码都是一种优点，唯一的问题是由于某种原因混淆不是玩球！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:30:07.947

Eclipse IDE 使用本机启动器，但在初始启动后将控制权交给 Java。IDE 本身确实是用 Java 编写的。

你遇到了什么问题`AboutHandler`和`QuitHandler`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:01:29.230

不幸的是**，这是不可能的**。Eclipse 管理这个是我粗心的错误，而实际上它只是一个本机启动器，并且`.jar`文件存储在其他地方，正如 Ewald 和 Edvin Syse 正确指出的那样。

所以我想我的问题的真正答案是“你不能”。只要您使用 Java，您就必须与`jar`s 共存，这就是它的结束。但老实说，我认为这并不像互联网所说的那样糟糕。An对“Windows 黑客”的解构与对“Java 黑客”等的`exe`解构一样容易，这是您必须忍受的。`jar`

但实际上，您必须考虑您真正关心的任何观众破解您的软件的可能性。仅仅为了增加一层额外的保护只会让黑客感到沮丧并让他们更加坚定，是否真的值得所有这些压力和辛勤工作？

# jquery - 幻灯片JSNI？

> ID：10930832
> 
> 赞同：1
> 
> 时间：2012-06-07T11:22:22.020
> 
> 标签：jquery, jsni

我有一个关于幻灯片效果的 jQuery 文件。我想使用 JSNI，但没有任何反应。我不知道哪里错了。有谁能够帮我？这是我的本机功能

```
public native void slideshow() /*-{
$(window).load(function() {
        $('.flexslider').flexslider({slideshowSpeed: 5000});
    });
         }-*/;ter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:27:45.087

如果这是 GWT 中的 JSNI，则需要使用 $wnd 而不是 $(window) 来寻址窗口。

# php - 在 joomla 中使用选择框发送表单操作

> ID：10930839
> 
> 赞同：0
> 
> 时间：2012-06-07T11:23:07.403
> 
> 标签：php, mysql, joomla

我需要在 joomla 模块中进行一些修改。我需要一个选择框，当用户从该数据库中选择值时，它会从数据库中选择值，它将用户重定向到另一个页面。显示该页面的结果。我现在可以从数据库中生成带有值的选择框，如何将其重定向到 joomla 的另一页。这是我使用的代码：

```
<?php
$db = JFactory :: getDBO();
$query = "select * from #__galleries where parent=0 order by date";
$db->setQuery($query);
$result = $db->loadObjectList();
$options = array();
$options[] = JHTML::_('select.option', '0', '-Select Gallery-');
foreach($result as $row)
{
$options[] = JHTML::_('select.option', $row->id, $row->name);
}
$dropdown = JHTML::_('select.genericlist', $options, 'class="inputbox"', 'name="select"', 'value', 'text');
echo $dropdown; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:17:59.197

认为这段代码应该可以工作。显然，您需要根据自己的需要对其进行调整：

```
$this->setRedirect( 'LINK_GOES_IN_HERE', $options); 
```

希望这可以帮助。

# axapta - 为供应商类型帐户创建分类帐维度帐户

> ID：10930844
> 
> 赞同：0
> 
> 时间：2012-06-07T11:23:36.497
> 
> 标签：axapta, dynamics-ax-2012

我必须为供应商类型的帐户创建一个分类帐维度帐户（具有给定的默认维度）。是否可以为供应商类型的帐户创建分类帐维度帐户？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:46:47.690

很简单。查看白皮书[Dimension White paper](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFIQFjAA&url=http://download.microsoft.com/download/4/E/3/4E36B655-568E-4D4A-B161-152B28BAAF30/Implementing_the_Account_and_Financial_Dimensions_Framework_AX2012.pdf&ei=mATRT7r3DIej4gSQmc2QDw&usg=AFQjCNGQvczoTXuUa3vg2QM-dVXmT1rqjQ&sig2=bKamDhlgXnAkLOrrdSsxWg)的“将实体设置为可维度化”一章。

# android - android中的http连接错误

> ID：10930845
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:23:38.173
> 
> 标签：android, json, http

我收到这个错误。我不知道出了什么问题。有人可以帮我吗？搜索了一下，但不知道如何解决它......有点急。

这是我的代码：

```
 package nearest.moskee.almawada;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.List;
import java.util.Locale;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.location.Address;
import android.location.Geocoder;
import android.os.AsyncTask;
import android.os.Handler;
import android.os.Looper;
import android.util.Log;

import com.google.android.maps.GeoPoint;

public class MoskeeJSON extends Activity {
    private Handler mHandler = new Handler(Looper.getMainLooper());
    String url;
    HttpClient httpclient;
    InputStream is = null;

    private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

        ProgressDialog mProgressDialog;

        @Override
        protected void onPostExecute(Void result) {
            mProgressDialog.dismiss();
        }

        @Override
        protected void onPreExecute() {
            mProgressDialog = ProgressDialog.show(MoskeeJSON.this,
                    "Loading...", "Data is Loading...");

        }

        @Override
        protected Void doInBackground(Void... params) {
            try {
                HttpPost httppost = new HttpPost(url);
                //HttpGet httppost = new HttpGet(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
                Log.e("url", url);
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }

            return null;
        }

    }

    public JSONArray getCloseMosquesInJSON(float lat, float lng, float radius) {

        String result = "";

        try {
            httpclient = new DefaultHttpClient();
            url = "http://www.moskee.org/finder/getCloseDataInJSON.php?lat="
                    + lat + "&lng=" + lng + "&radius=" + radius;
            new MyAsyncTask().execute();
            Log.v("URL =>", url);

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
            Log.e("result", result);
            Log.e("resultLength", result.length() + "");
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
        // parse json data
        if (result.length() == 5) {
            Log.i("result is ", "LEEG");
            return null;
        } else {
            JSONArray jArray = null;
            try {
                jArray = new JSONArray(result);
            } catch (JSONException e) {
                Log.e("log_tag", "Error parrsing data " + e.toString());
            }

            return jArray;
        }
    }

    JSONObject jsonObject;
    StringBuilder stringBuilder;

} 
```

错误

> 06-07 15:04:07.329: I/dalvikvm(1643): threadid=3: 对信号 3 做出反应 06-07 15:04:07.370: I/dalvikvm(1643): 将堆栈跟踪写入 '/data/anr/ traces.txt' 06-07 15:04:07.828: I/dalvikvm(1643): threadid=3: 对信号 3 做出反应 06-07 15:04:07.898: I/dalvikvm(1643): 将堆栈跟踪写入 '/ data/anr/traces.txt' 06-07 15:04:07.988: D/gralloc_goldfish(1643): 没有检测到 GPU 仿真的仿真器。06-07 15:04:24.098: D/InputEventConsistencyVerifier(1643): KeyEvent: ACTION_UP 但键没有按下。06-07 15:04:24.098: D/InputEventConsistencyVerifier(1643): 在 android.widget.EditText@412aa7f0 06-07 15:04:24.098: D/InputEventConsistencyVerifier(1643): 0: 在 16907476000000 发送，KeyEvent { action= ACTION_UP，keyCode=KEYCODE_TAB，scanCode=15，metaState=0，flags=0x8，repeatCount=0，eventTime=16907476，

莫斯科结果

```
 package nearest.moskee.almawada;

import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.AlertDialog;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class MoskeeResults extends MapActivity {
    MapView mapView;
    MapController mc;
    GeoPoint p;

    @SuppressWarnings("unused")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.myMap);
        mapView.setBuiltInZoomControls(true);

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(
                R.drawable.iconmoskee);
        OverlayItems itemizedoverlay = new OverlayItems(drawable,this);

        try {
            MoskeeJSON m = new MoskeeJSON();

            Bundle extras = getIntent().getExtras();
            float lat = 0;
            float lng = 0;
            float radius = 1;
            lat = (float) extras.getDouble("lat");
            lng = (float) extras.getDouble("lng");

            JSONArray arrMosques = m.getCloseMosquesInJSON(lat, lng, radius);

            if (arrMosques != null) {
                Log.i("Array aangemaakt", "Array is aangemaakt, het bevat "
                        + arrMosques.length() + " moskeëen");
                for (int i = 0; i < arrMosques.length(); i++) {
                    JSONObject row;
                    row = arrMosques.getJSONObject(i);
                    double jlat = row.getDouble("Latitude");
                    double jlng = row.getDouble("Longitude");
                    OverlayItem overlayitem = new OverlayItem(new GeoPoint(
                            (int) (jlat * 1e6), (int) (jlng * 1e6)),
                            row.getString("Naam"), row.getString("Straat"));
                    itemizedoverlay.addOverlay(overlayitem);
                    Log.i("=>", "Another mosque is added to the map");

                }
                Log.i("Array aangemaakt", "Array is aangemaakt, het bevat "
                        + arrMosques.length() + " moskeëen");
                AlertDialog alert = new AlertDialog.Builder(this)
                        .setTitle("Aantal gevonden moskeëen")
                        .setMessage(
                                "Er zijn " + arrMosques.length()
                                        + " moskeëen gevonden in deze straal")
                        .create();
                alert.show();
            } else {
                AlertDialog alert = new AlertDialog.Builder(this)
                        .setTitle("Aantal gevonden moskeëen")
                        .setMessage(
                                "Er zijn geen moskeëen gevonden in deze straal.\nProbeer opnieuw te zoeken met een groter bereik")
                        .create();
                alert.show();
            }

            mapOverlays.add(itemizedoverlay);

            mc = mapView.getController();

            GeoPoint center = new GeoPoint((int) (lat * 1e6), (int) (lng * 1e6));
            Log.i("Center map?", "" + (int) (lat * 1e6) + ","
                    + (int) (lng * 1e6));
            mc.setCenter(center);
            Log.i("Center map?", "Toegepast zonder erreurs");
            mc.setZoom(17);

        } catch ( JSONException e) {
            // TODO Auto-generated catch block
            Log.i("JASOEN EXCEPTIOEN",
                    "I have absolutely no idea what's going on..."
                            + e.getMessage());
            e.printStackTrace();
        }
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:52:10.490

正如您所指出的，错误出现在您登录的行中。

```
JSONArray arrMosques = m.getCloseMosquesInJSON(lat, lng, radius);
Log.i("Array aangemaakt", "Array is aangemaakt, het bevat " + arrMosques.length() + " moskeëen"); 
```

正如您`m.getCloseMosquesInJson()`之前调用的那样，此方法可能会在以下代码块中返回 null：

```
if (result.length() == 5) {
    Log.i("result is ", "LEEG");
    return null; // HERE
} else {
    JSONArray jArray = null;
    try {
        jArray = new JSONArray(result);
    } catch (JSONException e) {
        Log.e("log_tag", "Error parrsing data " + e.toString());
    }
    return jArray; // HERE! might be null when JSONException was thrown
} 
```

您应该`null`在记录数组长度之前进行检查！

# mysql - 将整数转换为字符串 - rails - mysql

> ID：10930846
> 
> 赞同：1
> 
> 时间：2012-06-07T11:23:42.830
> 
> 标签：mysql, ruby-on-rails, casting

我正在尝试在 rails 查询中将整数转换为字符串。例如，我想复制这个 SQL

```
SELECT CAST(id AS CHAR) FROM `articles` WHERE `articles`.`name` = 'Frustrated'; 
```

这选择了id

```
Article.where( name: "Frustrated" ).select("id") 
```

但这会死

```
 Article.where( name: "Frustrated" ).select("CAST (id AS CHAR) ") 
```

即使 SQL 看起来相同。

有可能做到这一点，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T11:25:40.723

只是在错误的地方有空格。这有效

```
Article.where( name: "Frustrated" ).select("CAST(id AS CHAR)") 
```

# android - 使用麦克风记录数据一段固定的时间

> ID：10930853
> 
> 赞同：0
> 
> 时间：2012-06-07T11:23:57.060
> 
> 标签：android, audio, microphone, recording

我想知道是否有办法使用手机的麦克风修复录制的持续时间。就像当我单击一个按钮时，录制应该开始并且它应该在 5 秒后自行停止，你建议我使用什么方法:-)

编辑：

很抱歉造成混淆，但我正在使用 AudioRecorder 类来记录数据，我认为 MediaRecorder 类函数不能正常工作（/根本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:18:23.043

如果您只使用计时器，我认为您无法准确控制应用程序读取缓冲区中的数据量。

我认为他们录制 5 秒音频数据的方法是使用[此类](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/audio/record/AudioClipRecorder.java)中的技术。

那里的代码仔细设置了音频缓冲区的大小，以便在记录数据一定时间后回调。这是该课程的片段。

```
public boolean startRecordingForTime(int millisecondsPerAudioClip,
            int sampleRate, int encoding)
    {
        float percentOfASecond = (float) millisecondsPerAudioClip / 1000.0f;
        int numSamplesRequired = (int) ((float) sampleRate * percentOfASecond);
        int bufferSize =
                determineCalculatedBufferSize(sampleRate, encoding,
                        numSamplesRequired);

        return doRecording(sampleRate, encoding, bufferSize,
                numSamplesRequired, DEFAULT_BUFFER_INCREASE_FACTOR);
    } 
```

然后稍后在您的代码中执行以下操作：

```
while (continueRecording)
        {
            int bufferResult = recorder.read(readBuffer, 0, readBufferSize);
//do stuff
        } 
```

由于 readBufferSize 恰到好处，你会得到你想要的数据量（有一些细微的变化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:07:54.823

这就是你所需要的。

```
@Override
    public void onClick(View view)
    {
        if (view.getId() == R.id.Record)
        {
            new Timer().schedule(new TimerTask()
            {

                @Override
                public void run()
                {
                    runOnUiThread(new Runnable()
                    {

                        @Override
                        public void run()
                        {
                            mediaRecorder.stop();
                            mediaRecorder.reset();
                            mediaRecorder.release();
                            files.setEnabled(true);
                            record.setEnabled(true);
                            stop.setEnabled(false);

                        }
                    });

                }
            }, 5000);

            record.setEnabled(false);
            files.setEnabled(false);
            stop.setEnabled(true);
            try
            {
                File file = new File(Environment.getExternalStorageDirectory(),
                        "" + new Random().nextInt(50) + ".3gp");
                adapter.add(file.getAbsolutePath());
                adapter.notifyDataSetChanged();
                mediaRecorder = new MediaRecorder();
                mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                mediaRecorder
                        .setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                mediaRecorder
                        .setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                mediaRecorder.setOutputFile(file.getAbsolutePath());
                mediaRecorder.prepare();
                mediaRecorder.start();
                stop.setEnabled(true);
            } catch (IllegalStateException e)
            {
                e.printStackTrace();
            } catch (IOException e)
            {
                e.printStackTrace();
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:41:02.210

`setMaxDuration`从 MediaRecorder 类中使用。

交替

当您开始录制时，启动一个新线程并将其休眠 5 秒钟。当它醒来时停止录制。或使用定时器任务，它应在 5 秒延迟后调用停止录制。或者

# c++ - VS2011代码分析

> ID：10930859
> 
> 赞同：5
> 
> 时间：2012-06-07T11:24:17.447
> 
> 标签：c++, code-analysis, visual-studio-2012

我最近安装了 VS2011 测试版，以感受微软在其最新版本的编译器中实现的新 C++11 功能。

不过，当我回到使用 VS2010 时，我遇到了一个意想不到的问题。我在 VS2010 中打开了一个 Windows SDK 7.1 示例项目。

现在当我在VS2010中构建时，我得到以下输出，表示正在执行代码分析工具（似乎是在编译之后，但在链接之前）

```
1>------ Rebuild All started: Project: MFCaptureToFile, Configuration: Debug Win32 ------
1>  winmain.cpp
1>  capture.cpp
1>  Running Code Analysis for C/C++...
1>capture.cpp(112): error C2220: warning treated as error - no 'object' file generated
1>c:\program files\microsoft sdks\windows\v7.1\samples\multimedia\mediafoundation\mfcapturetofile\capture.cpp(105): warning C6309: Argument '3' is null: this does not adhere to function specification of 'IMFAttributes::GetAllocatedString'
1>c:\program files\microsoft sdks\windows\v7.1\samples\multimedia\mediafoundation\mfcapturetofile\capture.cpp(105): warning C6387: 'argument 3' might be '0': this does not adhere to the specification for the function 'IMFAttributes::GetAllocatedString': Lines: 98, 103, 105
1>c:\program files\microsoft sdks\windows\v7.1\samples\multimedia\mediafoundation\mfcapturetofile\capture.cpp(353): warning C6309: Argument '3' is null: this does not adhere to function specification of 'IMFAttributes::GetAllocatedString'
1>c:\program files\microsoft sdks\windows\v7.1\samples\multimedia\mediafoundation\mfcapturetofile\capture.cpp(353): warning C6387: 'argument 3' might be '0': this does not adhere to the specification for the function 'IMFAttributes::GetAllocatedString': Lines: 336, 338, 340, 343, 351, 353
1>C:\Program Files\Microsoft SDKs\Windows\v7.1\Include\ks.h(53): error C2220: warning treated as error - no 'object' file generated
1>c:\program files\microsoft sdks\windows\v7.1\include\ks.h(53): warning C6244: Local declaration of 'GUID_NULL' hides previous declaration at line '28' of 'c:\program files\microsoft sdks\windows\v7.1\include\cguid.h'
1>  Generating Code...
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

我试图确定项目的哪些更改导致代码分析工具被执行，但我在项目属性中找不到任何内容。我尝试在 VS2011 中重新加载项目，但没有可以关闭的代码分析选项（[如 MSDN 上所建议的那样](http://msdn.microsoft.com/en-us/library/6yz6c9dy)）。

该项目完全是本机 C++，我从未将 C++ 与 CLR 一起使用

此外，我尝试打开其他项目（我自己的），现在他们也在调用这个代码分析阶段。这可以防止在许多情况下由于 Microsoft 代码问题而构建！构建似乎在 VS2011 beta 中成功。

谁能提供有关如何关闭此代码分析工具的见解？我希望保持 VS2011 beta 的安装状态，所以请不要建议卸载它，除非它是唯一的选择！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T13:14:01.657

我认为只有 VS2010 Ultimate 支持代码分析。我没有 VS2012，但我认为您应该手动编辑 vcxproj 文件。

如果它们存在于您的项目文件中，则查找其中一个或两个参数： `<RunCodeAnalysis>true</RunCodeAnalysis>`和`<EnablePREfast>true</EnablePREfast>`

将这两个值都更改为`false`它应该可以工作。

请注意，这些名称由 VS2010 使用，我不确定他们是否在 VS2012 中更改了它。

# tsql - 使用 TOP 时合并两组 sql 结果

> ID：10930864
> 
> 赞同：0
> 
> 时间：2012-06-07T11:24:24.637
> 
> 标签：tsql

我有这两个查询，我想要一组结果，组合 TP 的前 5 个结果和 LP 的前 5 个结果。我真的不知道如何更清楚地解释这一点，我有两组结果，LP 前 5 名和 TP 前 5 名，我想要一组结果 Incident_TP, IncidentID_TP, IncidentHappenedDate_TP , IncidentNumber_TP , LossValue_TP , RecoveredValue_TP , TotalLoss_TP , Incident_LP, IncidentID_LP, IncidentHappenedDate_LP , IncidentNumber_LP , LossValue_LP , RecoveredValue_LP , TotalLoss_LP

```
 DECLARE @IncidentFromDate_TP DATE = '2011-1-12'
  DECLARE @IncidentToDate_TP DATE =  '2012-1-12'
  DECLARE @IncidentFromDate_LP DATE = '2010-1-12'
  DECLARE @IncidentToDate_LP DATE =  '2011-1-12'

SELECT TOP 5
    Incident_TP = Incident_TP.IncidentID
    , IncidentHappenedDate_TP = Incident_TP.IncidentHappenedDate
    , IncidentNumber_TP = Incident_TP.IncidentNumber
    , LossValue_TP = Incident_TP.TotalLoss
    , RecoveredValue_TP = Incident_TP.TotalRecovered
    , TotalLoss_TP = Incident_TP.CostOfIncident
FROM 
    Incident AS Incident_TP
    INNER JOIN Site AS Site_TP ON Incident_TP.SiteID = Site_TP.SiteID
    INNER JOIN Region AS Region_TP ON Site_TP.RegionID = Region_TP.RegionID

WHERE
    Incident_TP.TotalLoss > 0.00
    AND Incident_TP.IncidentHappenedDate BETWEEN @IncidentFromDate_TP AND  @IncidentToDate_TP

ORDER BY
    TotalLoss_TP DESC
    , IncidentHappenedDate_TP DESC

SELECT TOP 5
     Incident_LP = Incident_LP.IncidentID
    , IncidentHappenedDate_LP = Incident_LP.IncidentHappenedDate
    , IncidentNumber_LP = Incident_LP.IncidentNumber
    , LossValue_LP = Incident_LP.TotalLoss
    , RecoveredValue_LP = Incident_LP.TotalRecovered
    , TotalLoss_LP = Incident_LP.CostOfIncident

FROM 
    Incident AS Incident_LP
    INNER JOIN Site ON Incident_LP.SiteID = Site.SiteID
    INNER JOIN Region ON Site.RegionID = Region.RegionID

WHERE
    Incident_LP.TotalLoss > 0.00
    AND Incident_LP.IncidentHappenedDate BETWEEN @IncidentFromDate_LP AND @IncidentToDate_TP

ORDER BY
    TotalLoss_LP DESC
    , IncidentHappenedDate_LP DESC 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:06:36.953

正如蒂姆建议的那样，您可以将这些集合合并在一起，例如：

```
 DECLARE @IncidentFromDate_TP DATE = '2011-1-12';
  DECLARE @IncidentToDate_TP DATE = '2012-1-12';
  DECLARE @IncidentFromDate_LP DATE = '2010-1-12';
  DECLARE @IncidentToDate_LP DATE = '2011-1-12';

  WITH  RawData
          AS ( SELECT   Incident_TP = Incident_TP.IncidentID ,
                        IncidentHappenedDate_TP = Incident_TP.IncidentHappenedDate ,
                        IncidentNumber_TP = Incident_TP.IncidentNumber ,
                        LossValue_TP = Incident_TP.TotalLoss ,
                        RecoveredValue_TP = Incident_TP.TotalRecovered ,
                        TotalLoss_TP = Incident_TP.CostOfIncident
               FROM     Incident AS Incident_TP
                        INNER JOIN Site AS Site_TP ON Incident_TP.SiteID = Site_TP.SiteID
                        INNER JOIN Region AS Region_TP ON Site_TP.RegionID = Region_TP.RegionID
               WHERE    Incident_TP.TotalLoss > 0.00
             ),
        TopFiveSetA
          AS ( SELECT TOP 5
                        *
               FROM     RawData
               WHERE    IncidentHappenedDate_TP BETWEEN @IncidentFromDate_TP
                                                AND     @IncidentToDate_TP
               ORDER BY TotalLoss_TP DESC ,
                        IncidentHappenedDate_TP DESC
             ),
        TopFiveSetB
          AS ( SELECT TOP 5
                        *
               FROM     RawData
               WHERE    IncidentHappenedDate_TP BETWEEN @IncidentFromDate_LP
                                                AND     @IncidentToDate_LP
               ORDER BY TotalLoss_TP DESC ,
                        IncidentHappenedDate_TP DESC
             ),
        Merged
          AS ( SELECT   *
               FROM     TopFiveSetA
               UNION ALL
               SELECT   *
               FROM     TopFiveSetB
             )
    SELECT  *
    FROM    Merged 
```

# javascript - 在 Jquery 中自动格式化电话号码

> ID：10930866
> 
> 赞同：12
> 
> 时间：2012-06-07T11:24:42.613
> 
> 标签：javascript, jquery

我有一个电话号码文本框。我的电话号码应该是 XXX-XXX-XXX 这样的格式。

我得到了 XXX-XXX-XXX 格式的解决方案，但我不知道如何修改该代码。

```
$('#ssn').keyup(function() {
    var val = this.value.replace(/\D/g, '');
    var newVal = '';
    while (val.length > 3) {
      newVal += val.substr(0, 3) + '-';
      val = val.substr(3);
    }
    newVal += val;
    this.value = newVal;
}); 
```

[http://jsfiddle.net/ssthil/nY2QT/](http://jsfiddle.net/ssthil/nY2QT/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-07T11:34:30.667

由于您使用的是 jQuery，您可以尝试 jquery [masked-input-plugin](http://digitalbush.com/projects/masked-input-plugin/)。

[这里](http://jsfiddle.net/vandalo/7Q6gx/)有一个 jsFiddle 供您使用，您可以在其中看到它是如何工作的。

可以在 GitHub 上找到该项目的源[代码](https://github.com/digitalBush/jquery.maskedinput)。

实现不仅仅是简单的：

HTML：

```
<input id="ssn"/> 
```

javascript:

```
$("#ssn").mask("999-999-999"); 
```

**更新**：

另一个好的可以在[这里](http://igorescobar.github.io/jQuery-Mask-Plugin/)找到。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T12:26:13.447

据我所知，您真正需要做的就是：

```
$('#ssn').keyup(function()
{
    this.value = this.value.replace(/(\d{3})\-?/g,'$1-');
}); 
```

但这仅在人们输入数字时才有效，因此我建议引入额外的检查：

```
$('#ssn').keyup(function(e) {
  if ((e.keyCode > 47 && e.keyCode < 58) || (e.keyCode < 106 && e.keyCode > 95)) {
    this.value = this.value.replace(/(\d{3})\-?/g, '$1-');
    return true;
  }

  //remove all chars, except dash and digits
  this.value = this.value.replace(/[^\-0-9]/g, '');
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<input type="text" id="ssn">
```

关于正则表达式的更多信息`/(\d{3})\-?/g`：
这用它自己替换了 3 位数字组，然后是一个破折号。括号创建对匹配数字的反向引用，用于替换字符串（`$1-`-> $1 是反向引用）。
请注意，可选的破折号也被替换，但不包含在反向引用中。如果输入是`123`，则替换模式类似于`/(\d{3})/g`，或者`/(\d{3}\-?)/g`值将变为`123-4`, `123--45`，`123---456`依此类推，每次将破折号加倍。

*警告*：
这会给用户带来一些痛苦，因为箭头键等不起作用。幸运的是，这很容易解决：只需在函数顶部添加以下代码：

```
if (e.keyCode > 36 && e.keyCode < 41)
{
    return true;
} 
```

箭头工作得很好。对于其他键（如删除、退格、移位等），[请查看此页面](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)。

举一个完整的例子：[这是小提琴](http://jsfiddle.net/caxkm/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-08T12:13:41.067

对于格式 XXX-XXX-XXXX，这里有一个简单的解决方案：

```
if(this.value.trim().length <= 8){
    this.value = this.value.replace(/(\d{3})\-?/g,'$1-');
 } 
```

这是一个示例，您不需要任何框架或库或 npm：

```
this.phone.addEventListener('keyup', event => {

        if(this.phone.value.trim().length <= 8){
            this.phone.value = this.phone.value.replace(/(\d{3})\-?/g,'$1-');
        }
    } 
```

如果你愿意，你也可以这样做：

```
 this.phone.addEventListener('keyup', event => {

        if(this.phone.value.trim().length <= 8){
            this.phone.value = this.phone.value.replace(/(\d{3})\-?/g,'$1-');
        }else{
            this.phone.value = this.phone.value.replace(/(\d{4})\-?/g,'$1');
        }
    } 
```

将其替换`this.phone`为您的值。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-17T17:26:48.977

我在谷歌上搜索一种在 Javascript 中自动格式化电话号码的方法时发现了这个问题。接受的答案并不适合我的需求，自最初发布以来的 6 年中发生了很多事情。我最终找到了解决方案，并在这里记录下来以供后代使用。

**问题**

我希望我的电话号码 html 输入字段在用户键入时自动格式化（屏蔽）值。

**解决方案**

查看[Cleave.js](https://nosir.github.io/cleave.js/)。这是解决此问题以及许多其他数据屏蔽问题的一种非常强大/灵活且简单的方法。

格式化电话号码很简单：

```
var cleave = new Cleave('.input-element', {
    phone: true,
    phoneRegionCode: 'US'
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-13T11:33:01.753

```
$('#ssn').keyup(function() {
        var val = this.value.replace(/\D/g, '');
        var newVal = '';
        for(i=0;i<2;i++){
         if (val.length > 3) {
          newVal += val.substr(0, 3) + '-';
          val = val.substr(3);
        }
        }
        newVal += val;
        this.value = newVal;
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input id="ssn" maxlength="10"/>
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-02-09T09:52:18.400

您可以通过 3 个简单的步骤在任何字段上设置输入掩码：

1：首先调用这些库 [http://code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js) " " [https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1 /jquery.maskedinput.js](https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.js) "

2：创建这样的简单表格：

```
<form> <input type="text" name="phone" id="phone" /> </form> 
```

3：然后脚本代码过去到你的脚本标签..

$(文档).ready(函数($) {

```
$('#phone').mask("99999-9999999-9",{placeholder:""}); 
```

});

# iphone - 显示特定时间间隔的图像

> ID：10930867
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:24:43.643
> 
> 标签：iphone, objective-c, ios

我有 UIImageView 的视图控制器。在视图中确实加载了我想在特定时间间隔的图像视图上设置图像。之后应该清除图像视图并且应用程序应该切换到下一个屏幕。我尝试了以下不起作用的代码：

```
 welcomeImage.image=[UIImage imageNamed:@"abc.png"];
sleep(5);
homeScreenController *controller=[[homeScreenController alloc]initWithNibName:@"homeScreenController" bundle:nil];
controller.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:controller animated:YES]; 
```

在这种情况下，它在视图加载之前处于休眠状态，并且它也不会进入下一个屏幕。那么代码有什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:31:33.323

使用下面的代码/..

```
- (void)viewDidLoad 
{
    [super viewDidLoad];
    [self performSelector:@selector(goToNextView) withObject:nil afterDelay:5.0];
}

- (void)goToNextView
{
        homeScreenController *controller=[[homeScreenController alloc]initWithNibName:@"homeScreenController" bundle:nil];
        controller.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
        [self presentModalViewController:controller animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:30:14.530

最简单的解决方案是在一段时间后触发一个事件。我建议使用 performSelector。

```
- (void) hide {
   //For example. 
   [self dismissModalViewController];
}

- (void) viewDidLoad {
   //Setup my image.
   [self performSelector:@selector(hide) withObject:nil afterDelay:3];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:31:26.163

你可以使用类似这样的 NSTimer

```
- (void) viewDidLoad {
.......
NSTimer *timer = [[NSTimer scheduledTimerWithTimeInterval:(2.5)
                                              target:self selector:@selector(hideImage) 
                                            userInfo:nil repeats:NO] retain];
....
}

- (void)hideImage
{
 yourImage.hidden = YES;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T11:33:31.483

另外，你`sleep(5)`在主线程里面做了一个，这很糟糕。

尝试类似的东西

```
[self performSelectorOnBackground:@selector(hide) withObject:nil] 
```

并在方法中做你想要（和`sleep(5)`）的事情，`-(void)hide`比如

```
-(void) hide {
    sleep(5)
    // ...
} 
```

祝你好运 ;）

# ruby - PDFKit 和新的 WKHTMLTOPDF 二进制文件

> ID：10930868
> 
> 赞同：0
> 
> 时间：2012-06-07T11:24:44.107
> 
> 标签：ruby, report, wkhtmltopdf, pdfkit

根据[PDFkit Documentation](https://github.com/pdfkit/pdfkit)，它可以处理任何 wkhtml 选项。这就是它最酷的地方。但是现在根据它的[文档](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf_0.10.0_rc2-doc.html)接受 WKHTMLTOPDF-0.10.0 及更高版本

*   多个 Html 文档
*   页面、封面、目录部分 - 封面和目录不采用通用页脚和页眉。

pdfkit里面的怎么处理？

因为页面不是所谓的

`wkhtmltopdf --page my.html`

* * *

它是

* * *

`wkhtmltopdf cover some.html page my.html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:42:22.193

通过重写 pdfkit 以使用新的 wkhtmltopdf 二进制文件解决了这个问题 - 查看[http://github.com/prikha/pdfkit](http://github.com/prikha/pdfkit)

# spring - jpa 延迟加载在生产模式下失败 - 在测试模式下它工作正常

> ID：10930870
> 
> 赞同：0
> 
> 时间：2012-06-07T11:24:46.707
> 
> 标签：spring, hibernate, jpa

我调用一个服务来加载一个实体。如果我在集成测试中运行它一切都很好，但在服务器上的现实生活中它会失败。

此实体中的某些属性是集合。在这两种情况下，实体都加载了 bean。当我在“query.getSingleResult()”附近使用断点在调试模式下停止执行时，我看到集合已加载。但只是在试运行...

我在 servletcontainer 中停止相同的代码并获得 InvocationException！？

我的环境看起来像：
spring 3.1
hibernate 3.6.6.Final

我尝试过的事情：
- 搜索 context.xml（测试和生产）中的差异 - 在生产
模式下使用其他 context.xml 文件（测试）

`org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: de.hoeso.gwt.platform.server.domain.common.Person.anschrift, no session or session was closed at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383) at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:375) at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:122) at org.hibernate.collection.PersistentBag.size(PersistentBag.java:248) at de.hoeso.sis.server.services.common.impl.UserServiceBeanImpl.login(UserServiceBeanImpl.java:397) at de.hoeso.sis.server.rpc.LoginService.execute(LoginService.java:35)`

我发现，在测试模式下，休眠会话已连接并打开。在生产模式下（在 servletcontainer 中，没有通过`entitymanager.getDelegate()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:14:32.967

现在，在 JMelnik 的帮助下，我找到了自己问题的解决方案。为了后代，我将分享我的解决方案......

在我在加载对象的代码附近放置一个断点后，我看到了主要区别。

```
return entitymanager.isOpen(); 
```

(boolean) true // 测试模式和生产模式

```
return ((org.hibernate.Session)entitymanager.getDelegate()).isConnected(); 
```

(boolean) true // 在测试模式 (boolean) false // 在生产模式

```
return ((org.hibernate.Session)entitymanager.getDelegate()).isOpen(); 
```

(boolean) true // 在测试模式 (boolean) false // 在生产模式

```
return((org.hibernate.Session)entitymanager.getDelegate()).getTransaction().isActive(); 
```

在生产模式中这会抛出一个异常在测试模式中返回：（布尔值）真

结论：代码在没有事务的情况下以生产模式运行。在测试模式下，存在一个事务，因为测试类继承自一个超类，该超类使用@Transactional 进行注释。在 ServiceBean 的层次结构中，我忘记了这一点。

注释已插入，一切正常！

# mysql - 数据库中的必填字段

> ID：10930877
> 
> 赞同：2
> 
> 时间：2012-06-07T11:25:28.590
> 
> 标签：mysql

我创建了一个这样的数据库表：

```
CREATE TABLE test(
  name VARCHAR(30) NOT NULL, 
  password VARCHAR(40) NOT NULL); 
```

然后我像这样添加到它，它按预期失败了。

```
INSERT INTO test(name, password) VALUES ('test', NULL); 
```

但是当我尝试这个时，它插入没有问题：

```
INSERT INTO test(name) VALUES ('test'); 
```

我试图以不同的方式创建表，但它没有创建：

```
CREATE TABLE test(
 name VARCHAR(30) NOT NULL, 
 password VARCHAR(40) NOT NULL DEFAULT NULL ); 
```

那么有没有办法让它在插入时产生错误？

也许相关我认为我需要做其他事情才能验证数据输入到数据库中，我想我看到了一些关于约束的东西，但我认为这些在 mysql 中不受支持？那么空值检查和验证是我不能用mysql做的数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:28:10.173

默认情况下，用零（或字符串数​​据类型的空字符串）`MySQL`替换隐式值。`NULL`

您可以通过为会话或服务器启用严格模式来解决此问题：

```
SET sql_mode='STRICT_ALL_TABLES' 
```

或添加

```
sql_mode='STRICT_ALL_TABLES' 
```

在`[mysqld]`你的`my.cnf`.

# vb.net - 模拟 DataGridView 中的标题单击

> ID：10930884
> 
> 赞同：2
> 
> 时间：2012-06-07T11:26:01.703
> 
> 标签：vb.net

我正在尝试使用快捷键模拟 datagridview 第 1 列中的 headerclick，但我不知道如何。

```
Private Sub frm_lista_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles Me.KeyDown
  If e.KeyCode = Keys.S And e.Alt Then
    'this handler exists  
    DataGridView1_ColumnHeaderMouseClick(whathere, whathere)
  End If
End Sub 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:46:03.200

确保表单具有此属性集：

```
Me.KeyPreview = True 
```

由于您试图从键盘事件中指定第 1 列，因此您可以传递自己的事件参数：

```
Private Sub Form1_KeyDown(sender As Object, e As KeyEventArgs) Handles MyBase.KeyDown
  If ((Control.ModifierKeys And e.Alt) AndAlso e.KeyCode = Keys.S) Then
    Dim mea As New MouseEventArgs(MouseButtons.None, -1, -1, -1, -1)
    Dim dgvcme As New DataGridViewCellMouseEventArgs(1, -1, -1, -1, mea)
    DataGridView1_ColumnHeaderMouseClick(DataGridView1, dgvcme)
  End If
End Sub 
```

该事件现在应该具有`e.ColumnIndex`属性集。

```
Private Sub DataGridView1_ColumnHeaderMouseClick(sender As Object, e As DataGridViewCellMouseEventArgs) Handles DataGridView1.ColumnHeaderMouseClick
  If e.ColumnIndex = 1 Then
    MessageBox.Show("OK")
  End If
End Sub 
```

或者，您可以只从两个地方调用一个子例程：

```
Private Sub Form1_KeyDown(sender As Object, e As KeyEventArgs) Handles MyBase.KeyDown
  If ((Control.ModifierKeys And e.Alt) AndAlso e.KeyCode = Keys.S) Then
    Call HandelColumnOneClick()
  End If
End Sub

Private Sub DataGridView1_ColumnHeaderMouseClick(sender As Object, e As DataGridViewCellMouseEventArgs) Handles DataGridView1.ColumnHeaderMouseClick
  If e.ColumnIndex = 1 Then
    Call HandleColumnOneClick()
  End If
End Sub

Private Sub HandleColumnOneClick()
  '// Do Something
End Sub 
```

# listview - 黑莓消息对话列表

> ID：10930888
> 
> 赞同：0
> 
> 时间：2012-06-07T11:26:17.777
> 
> 标签：listview, blackberry, inbox

![在此处输入图像描述](../Images/d246a0ec6a2c2f0d338e92cc2a10422f.png)

是否可以在应用程序中实现上述默认的黑莓短信对话列表视图。如果是，我该怎么做？我对此完全空白，我没有找到任何线索来推进这件事。我将从我的应用程序服务器获得上述消息。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:19:10.777

![在此处输入图像描述](../Images/4809aded5a7ed83f47ff7e3325e79f36.png)

![在此处输入图像描述](../Images/384f3db93e5930417f1bc9f47bebbae4.png)

我用过这些图片。

```
final Border rightBorder = BorderFactory.createBitmapBorder(new XYEdges(16, 23, 27, 16), Bitmap.getBitmapResource( "bubble_right.png" ) ); 
final Border leftBorder = BorderFactory.createBitmapBorder(new XYEdges(16, 16, 27, 23), Bitmap.getBitmapResource( "bubble_left.png" ) );

addHeading(leftBorder, Field.FIELD_LEFT,0xbdbdbd, txt,time_);

 public static void addHeading(Border border, long style, int backgroundcolour, String msg ,String time_) {
    VerticalFieldManager vfm = new VerticalFieldManager(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR | Field.USE_ALL_WIDTH );
    vfm.setMargin(0, 0, 0, 0);
    FieldLayout tt =  new FieldLayout(style, backgroundcolour, msg,time_);
    tt.setBorder(border);
    tt.setMargin( 5, 5, 5, 5 );
    vfm.add(tt);
    add(vfm);

}

public class FieldLayout extends VerticalFieldManager{

    Bitmap a;

     public FieldLayout(long style, final int backgroundcolour, String msg,String time_) {
  //  FieldLayout(long style,final int backgroundcolour,final String msg, final String picture) {
        super(style);

    HorizontalFieldManager hfm = new HorizontalFieldManager(){
        public void paint(Graphics graphics) {
            graphics.setBackgroundColor(backgroundcolour);
            graphics.clear();
            super.paint(graphics);
        }
    };

    VerticalFieldManager vfm = new VerticalFieldManager(){
        public void paint(Graphics graphics) {
            graphics.setBackgroundColor(backgroundcolour);
            graphics.clear();
            super.paint(graphics);
        }
    };

    LabelField lf = new LabelField(msg, Field.FOCUSABLE){
        private XYRect xyrect=new XYRect();
        protected boolean navigationClick(int status, int time){
            Application.getApplication().invokeLater(new Runnable(){
                public void run() {

                }
            });
                return true;
        }
    };
    lf.setPadding(0,0,0,3);
    vfm.add(lf);

   /* LabelField tim = new LabelField(time_, Field.FOCUSABLE){
        private XYRect xyrect=new XYRect();
        protected boolean navigationClick(int status, int time){
            Application.getApplication().invokeLater(new Runnable(){
                public void run() {

                }
            });
                return true;
        }
    };
    tim.setFont(Font.getDefault().derive( Font.PLAIN,5, Ui.UNITS_pt));
    tim.setPadding(3,3,0,0);
    vfm.add(tim);*/
    // set the pin point in the map 

    hfm.add(vfm);

    add(hfm);

    setPadding(0,0,0,0);
    setMargin(0, 0, 0, 0);
}

protected void paintBackground(Graphics g){
    int oldColor = g.getColor();
    try {
        g.setColor(0xE0E0E0);

    } finally {
        g.setColor(oldColor);
    }
}

} 
```

# c# - 以编程方式更改 Crystal Reports 对象的可见性

> ID：10930894
> 
> 赞同：2
> 
> 时间：2012-06-07T11:26:49.783
> 
> 标签：c#, crystal-reports

我有一个 C# 2010 应用程序，其中包含使用 Crystal Reports for VS2010 创建的报表。

对于其中一份报告，可以选择打印报告或通过电子邮件将其发送给某人[通过 SMTP 导出和发送]。

我希望在查看报告以及通过电子邮件发送报告时显示水印。我不希望它在打印时显示，因为它将打印在带水印的页面上。

我想知道如何以编程方式[不是在运行时]更改包含 CrystalReportViewer 的表单中的水印可见性，以便在打印时也不会打印水印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:13:32.433

*   创建一个布尔参数 ( `{?Show Watermark}`)
*   添加`Not({?Show Watermark})`到图像的条件公式或包含图像的部分
*   以编程方式设置参数的值。

# php - 获取输入框中的url值

> ID：10930899
> 
> 赞同：0
> 
> 时间：2012-06-07T11:27:02.197
> 
> 标签：php, javascript

在我的 html 页面中，我有这样的链接

```
<table width="100%" border="0" cellspacing="4" cellpadding="4">
          <tr>
            <td><a href="ApplicationRegister.php?plan=trial"><img src="images/box4.png" width="230" height="300" /></a></td>
            <td><a href="ApplicationRegister.php?plan=plan1"><img src="images/box1.png" width="230" height="300" /></a></td>
            <td><a href="ApplicationRegister.php?plan=plan2"><img src="images/box2.png" width="230" height="300" /></a></td>
            <td><a href="ApplicationRegister.php?plan=plan3"><img src="images/box3.png" width="230" height="300" /></a></td>
          </tr>
        </table> 
```

当我点击任何一张图片时，它将转到 ApplicationRegister.php 页面，其中包含 plan= 相应的值。

在我的 ApplicationRegister.php 我有一个注册表单

```
<form action="emailconfirmation.php" method="post" name="form1" id="form1"  onsubmit="return Validate();">
    Company Name: 
        <input type="text" name="CompanyName" style="width:230px; height:20px;" /><br /><br />
    Company E-mail : 
    <input type="text" name="Companyemail" style="width:230px; height:20px;" /><br /><br />
     Company Contact <input type="text" name="CompanyContact" style="width:230px; height:20px;" /><br /><br />
     Company Address: <input type="text" name="CompanyAddress" style="width:230px; height:20px;" /><br /><br />
     <input type="hidden" name="form_submitted" value="1"/> 
     <input type="submit" value="REGISTER" name="submit" />
                    </form> 
```

在此页面中，它应该从 url 中获取值，例如 plan=trail 或 plan1... url 中的任何内容。然后在提交所有值时应与这些表单数据一起提交。

如何做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T11:29:15.840

首先，您需要清理计划输入：

```
<?php
    $plan = @$_GET['plan'];
    $plan = +$plan; #convert to number
?> 
```

只需添加另一个包含该值的隐藏字段

```
<form action="emailconfirmation.php" method="post" name="form1" id="form1" onsubmit="return Validate();">
    ...
    <input type="submit" value="REGISTER" name="submit" />
    <input type="hidden" name="plan" value="<?php echo $plan ?>"/> 
</form> 
```

另一种选择是将其作为 get 参数添加到`action`：

```
<form action="emailconfirmation.php?plan=<?php echo $plan ?>"
      method="post" name="form1" id="form1" onsubmit="return Validate();">
    ...
    <input type="submit" value="REGISTER" name="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:32:59.290

嘿，如果您将一个值作为 URL 的一部分发送，那么您应该有一个容器来抓取它。使用 php $_GET[] 来抓取该值..关于 php 表单的一些谷歌搜索将对您有所帮助，而不是给予你的代码。

[http://www.w3schools.com/php/php_forms.asp](http://www.w3schools.com/php/php_forms.asp)从此链接阅读并继续编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:34:19.360

您需要在 ApplicationRegister.php 上的表单中添加一个隐藏字段，其中包含“计划”查询参数。以下 HTML 应位于表单中：

```
<input type="hidden" name="plan" value="<?php echo isset($_GET['plan']) ? $_GET['plan'] : 'trial'; ?>" /> 
```

代码将默认值设置为“试用”，如果他们访问此页面而不通过上一页。

然后您可以像往常一样在“emailconfirmation.php”中处理表单数据。您可以执行以下操作：

```
 if (isset($_POST)) 
 { 
     $post_Plan = isset($_POST['plan']) ? $_POST['plan'] : null; 
     // etc ...
 } else {
     // redirect back 
 } 
```

# jsp - 通过jsp向mysql数据库插入数据

> ID：10930901
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:27:16.870
> 
> 标签：jsp

这段代码有什么问题，它没有得到处理，当我单击提交按钮时，它转发到这个 insert.jsp 并出现空白页面（结果失败）。

```
/*
Form.html
*/

<html>
<form method="post" action="Insert.jsp"> //form start
<table>
<tr><td>Fname:</td><td><input type="text" name="fname"></td></tr>
<tr><td>LName:</td><td><input type="text" name="lname"></td></tr>
<tr><td>Email:</td><td><input type="text" name="email"></td></tr>
<tr><td>pass:</td><td><input type="password" name="pass"></td></tr>
<tr><td>confirm pass:</td><td><input type="password" name="cpass"></td></tr>
<tr><td>dob:</td><td><input type="text" name="dob"></td></tr>
<tr><td>age:</td><td><input type="text" name="age"></td></tr>
<tr><td>gender:</td><td><input type="text" name="gender"></td></tr>
<tr><td>address:</td><td><input type="text" name="address"></td></tr>
<tr><td>country:</td><td><input type="text" name="country"></td></tr>
<tr><td>state:</td><td><input type="text" name="state"></td></tr>
<tr><td>city:</td><td><input type="text" name="city"></td></tr>
<tr><td>telephone:</td><td><input type="text" name="tno"></td></tr>
<tr><td>Mobile:</td><td><input type="text" name="mobile"></td></tr>
<tr><td></td><td><input type="submit" value="Submit"></td></tr>
</table>
</form>
</html>

/*
Insert.jsp 
*/
<%@page import="java.sql.*,java.util.*"%> // import
<%
String fname=request.getParameter("fname");
String lname=request.getParameter("lname");
String email=request.getParameter("email");
String pass=request.getParameter("pass");
String cpass=request.getParameter("cpass");
String dob=request.getParameter("dob");
int age=Integer.parseInt(request.getParameter("age"));
String gender=request.getParameter("gender");
String address=request.getParameter("address");
String country=request.getParameter("country");
String state=request.getParameter("state");
String city=request.getParameter("city");
int tno=Integer.parseInt(request.getParameter("tno"));
int mobile=Integer.parseInt(request.getParameter("mobile"));
        try{
         Class.forName("com.mysql.jdbc.Driver");
           Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/student", "root", "");
           Statement st=con.createStatement();
           int i=st.executeUpdate("insert into student(fname,lname,email,pass,cpass,dob,age,gender,address,country,state,city,tno,mobile) values('"+fname+"','"+lname+"','"+email+"','"+pass+"','"+cpass+"','"+dob+"','"+age+"','"+gender+"',"+address+",'"+country+"','"+state+"','"+city+"','"+city+"','"+tno+"','"+mobile+"')");
        out.println("Data is successfully inserted!");
        }
        catch(Exception e){
        System.out.print(e);
        e.printStackTrace();
        }
        %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:32:44.273

你的紧迫性不是我们的问题。

如果您可以引用日志消息或堆栈跟踪而不是“空白页”和“失败”，那会更有帮助。

当您点击提交按钮时，您希望显示什么？

这是一个糟糕的设计。您的 JSP 中不应该有数据库代码。Scriptlet 是一个非常糟糕的主意。学习 JSTL。`<sql>`标签甚至可能是您需要的。

一个更好的想法是在 JSP 和数据库之间建立一个 servlet，它将对用户进行身份验证和授权，绑定和验证输入，代表用户执行数据库操作，将响应编组到请求或会话范围，并将响应流式传输到需要显示的页面。

我猜你想在 INSERT 之后显示数据库的状态，所以应该有一个显示所有值的表。您的 JSP 是如何知道如何做到这一点的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T09:49:20.103

删除插入语句中数字类型字段的单引号。还要更改手机号码数据类型，因为 int 不能容纳 10 位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:31:35.217

一切都是错的。例如，它充满了 sql 注入问题。还要检查您的数据库是否处于自动提交模式或您是否开始/结束事务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T18:35:14.490

```
@WebServlet(name = "signup", urlPatterns = {"/signup"})
public class signup extends HttpServlet {

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String firstName = request.getParameter("firstname");
    String lastName = request.getParameter("lastname");
    String eMail = request.getParameter("email");
    String UserName = request.getParameter("username");
    String passWord = request.getParameter("password");

    PrintWriter out = response.getWriter();
    response.setContentType("text/plain");
    if (eMail.matches("^([a-zA-Z0-9_\\-\\.])+\\@([a-zA-Z0-9])+\\.([A-Za-z0-9]{2,4})")) {
        if (passWord.matches("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])(?=[\\S]+$).{8,}$")) {

            UserBean u = new UserBean();
            u.setname(firstName);
            u.setlname(lastName);
            u.setemail(eMail);
            u.setusername(UserName);
            u.setpasswords(passWord);
            UserManager umg = new UserManager();

            if (umg.insertUser(u)) {
                out.print("Registered Successfully");
            } else {
                out.print("Registration Failed");
            }

        } else {
            out.print("<h4 style='color: red; margin-left: -66px;'>Invalid Password</h4>");

        }
    } else {
        out.print("<h4 style='color: red; margin-left: -66px;'>Invalid Email</h4>");
    }

}

/**
 * Returns a short description of the servlet.
 *
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
} 
```

# android - 通过 Phonegap 应用程序开启 GPS 连接

> ID：10930907
> 
> 赞同：0
> 
> 时间：2012-06-07T11:27:27.667
> 
> 标签：android, ios, jquery-mobile, cordova, phonegap-plugins

我正在开发一个 phonegap 应用程序来跟踪用户的地理位置。我能够正确获取 gps 位置。但是为了获得那个位置，我应该在我的应用程序启动之前打开手机中的 GPS 连接。有什么方法可以打开我的应用程序中的 GPS 连接。

谢谢。

# python - 将格式错误的 csv 文件转换为 numpy 数组

> ID：10930908
> 
> 赞同：1
> 
> 时间：2012-06-07T11:27:28.570
> 
> 标签：python, csv, numpy

我有一个 7 行的 csv 文件，其中 5 行有 7 列，最后两行有 2 列。这些文件也是字符串、浮点数和 NaN 的混合体。例如：

```
883825.00,373395.00,0.00,"20,080.84",2012500.00,#EANF#,121449.39
0.00,0.00,0.00,"38,849.10",0.00,#EANF#,0.00
0.00,0.00,0.00,"83,167.42",1640625.00,#EANF#,0.00
#EANF#,#EANF#,#EANF#,#EANF#,#EANF#,#EANF#,#EANF#
"-1,202,600.00",-0.00,#EANF#,2267168,0.00,#EANF#,"-173,710.66"
-125.60,#EANF#
"17,459.68",#EANF#. 
```

我可以使用 MATLAB 读取此文件并进行处理。我可以对 numpy 做同样的事情吗？我试图在这个论坛上寻找解决方案，但似乎没有任何效果。需要将字符串和 NaN 转换为浮点数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:50:44.817

我不确定是否有使用 NumPy 的解决方案，如果列数发生变化，则分别引发错误`loadtxt`和`genfromtxt`警告，因此您可能必须编写自己的方法。

***编辑**：对以下内容进行了轻微编辑以反映 DSM 的评论。*

您可以使用内置`csv`模块：

```
import csv

arr = []

with open('test.txt', 'r') as fh:
    reader = csv.reader(fh)
    for row in reader:
        if row:
            arr.extend(row) 
```

csv 方法的优点是它会去除换行符，如果您只是使用`fileobj = open(...)`and读取文件，情况并非如此`for line in fileobj`。

此时你应该有

```
>>> arr
['883825.00', '373395.00', '0.00', '20,080.84', '2012500.00', '#EANF#', '121449.
39', '0.00', '0.00', '0.00', '38,849.10', '0.00', '#EANF#', '0.00', '0.00', '0.0
0', '0.00', '83,167.42', '1640625.00', '#EANF#', '0.00', '#EANF#', '#EANF#', '#E
ANF#', '#EANF#', '#EANF#', '#EANF#', '#EANF#', '-1,202,600.00', '-0.00', '#EANF#
', '2267168', '0.00', '#EANF#', '-173,710.66', '-125.60', '#EANF#', '17,459.68',
 '#EANF#.'] 
```

然后，您必须转换为浮点数并将`#EANF#`值替换为`numpy.NaN`. 我们还必须注意某些值中的逗号。逗号很容易处理

```
float(str(float_string).replace(',', '')) 
```

对于这些`#EANF#`值，我们可以检查一个项目是否以 this 开头（不等于 this，因为列表中的最后一项有一个尾随`.`）。将这两个转换组合成一个函数`convert`并用列表理解包装我们有：

```
import numpy

def convert(v):
    try:
        return float(v)
    except ValueError:
        if v.startswith('#EANF#'):
            return numpy.NaN
        else:
            return float(str(v).replace(',', ''))

arr = numpy.asarray([convert(a) for a in arr]) 
```

该函数`convert`可以概括为采用第二个可选参数，该参数定义应映射到的值`numpy.NaN`。

这个的最终结果是

```
>>> arr
[883825.0, 373395.0, 0.0, 20080.84, 2012500.0, nan, 121449.39, 0.0, 0.0, 0.0, 38
849.1, 0.0, nan, 0.0, 0.0, 0.0, 0.0, 83167.42, 1640625.0, nan, 0.0, nan, nan, na
n, nan, nan, nan, nan, -1202600.0, -0.0, nan, 2267168.0, 0.0, nan, -173710.66, -
125.6, nan, 17459.68, nan] 
```

注意：此答案假设您对结果是一维列表感到满意。如果您想要结果的不同形状，您应该在问题中这么说。

# ios - cocos2d 中绘图应用程序的 Alpha 混合

> ID：10930909
> 
> 赞同：1
> 
> 时间：2012-06-07T11:27:37.443
> 
> 标签：ios, cocos2d-iphone, drawing, alphablending, glblendfunc

我使用 cocos2d 创建一个简单的绘图应用程序，我在代码中创建了一个 32 位纹理，形状为我需要的画笔（圆形），具有简单的硬度梯度（中间的 alpha = 1，靠近边缘的 alpha = 0）纹理显然是方形的，所以 alpha 在圆外是 0。用户触摸屏幕进行绘制，并根据分离常数重复纹理。

我尝试在不启用 alpha 混合的情况下得到可怕的结果。

使用 (ccblendfunc){GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA} 我得到纹理的每个实例之间出现的边界。如果我通过点击而不是拖动手动创建每个点，则不会发生这种效果。

并且使用 (ccblendfunc){GL_SRC_ALPHA,GL_ONE} 我得到了很好的结果，但在边缘颜色被加在一起，蓝色和绿色 = 青色，红色和绿色 = 黄色和红色和蓝色 = 紫色

我怎样才能简单地创建一个像 Photoshop 标准一样工作的混合模式？？？？

# django - 新创建的 Pydev Django 项目不包括带有 Settings.py 等的初始包

> ID：10930919
> 
> 赞同：10
> 
> 时间：2012-06-07T11:27:58.037
> 
> 标签：django, eclipse, settings, pydev

在 Eclipse 中创建 Django Pydev 项目时，会自动创建默认配置包，其结构如下：

```
MyApp
    __init__.py
    settings.py
    urls.py
    wsgi.py
manage.py 
```

今天我创建了一个 Django Pydev 项目，但没有创建那些文件和初始包。

我曾多次尝试创建新的 Django Pydev 项目，但没有创建初始结构。

这个问题才刚刚开始发生。在今天之前我没有遇到过这个问题。

在命令行上运行它确实有效：

```
django-admin.py startproject mysite 
```

文件和项目结构已正确创建。所以只有 Eclipse 和 Pydev 失败了。

我在 Ubuntu 11.1 上使用 Django 1.4、Pydev 2.5 和 Eclipse Indigo 3.7

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-03T06:15:23.600

我今天遇到了同样的问题，但事实证明这是因为我的项目名称没有被处理 - 例如“我的项目”。空间扔了它。将项目称为“MyProject”是一种享受。

从 cmd 行它给出了以下错误 - eclipse 没有返回：

> c:\django-admin.py startproject "我的项目"
> 
> 错误：“我的项目”不是有效的项目名称。请仅使用数字、字母和下划线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T06:58:10.827

我在win7上遇到了同样的问题。

我还尝试从命令行手动运行 django-admin.py。它没有生成项目，而是为 .py 文件打开了一个默认编辑器。然后这对我来说很清楚，这是因为我安装了一些程序，该程序将自己注册为运行 .py 文件的默认程序。就我而言，它是 WebMatrix2，但即使您不安装任何东西，win7 也很有可能默认将其设置为记事本。

我知道 PyDev 实际上会运行 django-admin.py 来生成项目。所以我的猜测是 PyDev 试图运行 .py 文件。然后由于运行它的程序不是python.exe，所以什么也没有生成。PyDev 忽略了这个错误，所以项目中没有任何内容。

然后修复很简单。选择任意.py文件，右键打开属性窗口，将默认程序改为python.exe。

现在回到 Eclipse 并尝试再次创建一个 django 项目。您应该能够看到 manage.py 文件和创建的其他文件。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T19:42:44.757

我今天遇到了类似的问题（Win7）。我使用 eclipse、PyDev 和 Django 有一段时间了，没有任何问题。今天尝试创建一个新项目，但无法使用 manage.py 等填充项目文件夹。

我碰巧安装了 Python 32 和 64 位，但 Django 32 位。我在创建项目时忘记选择 32 位解释器，所以它调用 64 位解释器来运行 django-admin.py 并无声地失败。一旦我选择了 32 位解释器，它就会按预期创建项目文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T21:43:26.210

我遇到了这个问题 - 我试图创建一个名为 test-django 的项目，它不会将 manage.py 等添加到结构中。所以我尝试用 django-admin.py 做同样的事情，但它失败了，只说数字、字母和下划线！

所以问题是eclipse/pydev 无论如何都报不上这个错误，make 项目！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-28T00:33:57.370

在虚拟环境中创建 PyDev Django 项目时遇到了同样的问题。

中文或英文都找不到任何有效的解决方案。经过几次尝试，我设法解决了它

在创建 PyDev Django 项目时，不是将项目文件夹放在虚拟环境文件夹中，而是需要在外面选择另一个目录。

[Eclipse Pydev 截图](https://i.stack.imgur.com/jzsyH.jpg)

我倾向于相信这是一个 PyDev 错误，因为我可以使用以下命令将我的 django 项目文件夹放在任何地方：

django-admin 启动项目 PROJECT_NAME。

它在虚拟环境文件夹中工作正常。参考下面我的设置环境：

日食氧气：4.7.1a PyDev：6.1.0.201711051306 Django：1.11.7

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T03:36:00.643

有同样的问题。

通过执行帮助 -> 检查更新来修复。

更新 Eclipse 并重新启动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-12T11:36:22.937

请注意，只要您拥有最新的 PyDev，这应该可以工作（以前的版本与 Django 1.4 有问题）——它可能只是缺少刷新（即：它正在创建它但未在 PyDev 包资源管理器中显示）。

只需刷新它并查看它是否有效 - 并确保您在窗口 > 首选项 > 工作区中选择了“使用本机挂钩刷新”和“访问时刷新”。

如果您仍然有问题，请检查它们是否真的没有在文件系统中创建，如果它们没有检查您的错误日志是否存在错误并报告回来。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-11T15:47:16.197

我也遇到了这个问题。

然而，在网上搜索了一番之后。我决定使用全新的 Eclipse for Java EE Developer 重新安装插件，版本：Indigo（以前是 Classical Eclipse，Indigo）。

它奏效了！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-28T23:25:49.540

我知道很久以前有人问过这个问题，但是我在 Eclipse Neon 上遇到了同样的问题，我发现可能存在错误。

我猜你使用 File>New>PyDev Project 创建了一个项目。我使用 MyProject 作为项目的名称，因此名称中没有任何空格，因此项目名称不是问题。您应该看到配置项目的 3 个步骤，而第 3 个步骤未显示。第三步是 Django 设置，如果您无法进入该步骤，您的文件将不会被创建。

相反，如果您使用 CTRL+N，您将看到一个不同的向导，这样它将带您进入第 3 步，并且将生成所有文件。

# complexity-theory - 计算算法复杂度所需的帮助 - CSc 基础知识

> ID：10930926
> 
> 赞同：0
> 
> 时间：2012-06-07T11:28:16.697
> 
> 标签：complexity-theory

嗨，我有两种算法需要解决它们的复杂性，我一开始自己尝试过；O(N^2) & O(N^3) 它们是：

把 Y 当作它被声明为 'y=int[N][N]' 和 B 当作 'B=int[N][N]'....

```
int x(int [] [] y)
{
int z = 0
for (int i =0; i<y.length; i++)
    z = z + y[i].length;
  return z;
}

int A (int [] [] B)
{
    int c =0
    for ( int i =0; i<B.length; i++)
        for (int j =0; j<B[i].length; j++)
             C = C + B[i] [j];
    return C;
} 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:42:31.997

要计算算法复杂度，您需要计算算法中执行的操作数（big-O 表示法关注最坏情况）

在第一种情况下，您有一个执行 N 次 (y.length==N) 的循环。在循环内部，您有一个操作（在每次迭代中执行）。这与输入数量呈线性关系，因此 O(x)=N。

*注意*：计算 y[i].length 是一个恒定长度操作。

在第二种情况下，您有执行 N 次的外部循环（就像在第一种情况下一样），并且在每次迭代中，如果执行相同的长度 (N==B[i].length)，则执行另一个循环。在内循环内部，您有一个操作（在内循环的每次迭代中执行）。总体而言，这是 O(N*N)==O(N^2)。

*注意*：计算 b[i][j] 是一个定长操作

*注意*：请记住，对于 big-O，只有增长最快的项很重要，因此可以忽略加法常数（例如，返回值的初始化和返回指令都是操作，但都是常数，而不是在循环中执行；取决于 N 的项增长速度快于常数）

# c++ - 如何使用 Bison %destructor 指令

> ID：10930930
> 
> 赞同：1
> 
> 时间：2012-06-07T11:28:32.167
> 
> 标签：c++, bison, parser-generator

我会尽量简短。

目前我们正在使用 GNU Bison 构建解释器树，稍后将保存为专有格式并由我们的服务器加载。所以我们在 Bison 代码中使用了很多动态分配。问题是，最近我发现如果 Bison 出现任何语法错误，我们就会得到很多内存泄漏，因为在解析树的某些部分时已经分配了。阅读了一些书，我发现了一些关于“错误恢复”和 %destructor 的信息。第一个似乎是正确的方法，但是 %destructor 的使用对我来说还不是很清楚。

那么，如果由于某种原因 Bison 无法重新同步，是否意味着将调用 %destructor 来删除创建的所有令牌/符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:29:13.653

This question is a duplicate of :

[When is %destructor invoked in BISON?](https://stackoverflow.com/questions/6401286/when-is-destructor-invoked-in-bison)

In fact to my point of view the %destructor directive is almost useless : If you redefine the YYSTYPE, you can specify an alternate C++ class/union with what exactly what you want

```
class AToken
{
   char     *text;
 public:
   AToken() : text(0) {}
   ~AToken() { delete [] text; }
   ...
};

#define YYSTYPE AToken 
```

# c# - 将 OpenCover 与 xUnit 集成

> ID：10930932
> 
> 赞同：3
> 
> 时间：2012-06-07T11:28:36.573
> 
> 标签：c#, visual-studio, xunit, opencover

我对 Visual Studio IDE 比较陌生，并且正在使用 xUnit 框架进行测试的 C# 项目工作。

我计划使用“OpenCover”工具来确定代码覆盖率。有人能告诉我如何将此工具与 Visual Studio 集成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-08T19:44:54.300

OpenCover 本身是一个仅限命令行的工具。为了“很好地”呈现结果，您需要一个可视化工具，例如[ReportGenerator](http://reportgenerator.codeplex.com/)（可与 xUnit 一起正常工作）或[OpenCoverUI](http://visualstudiogallery.msdn.microsoft.com/6950a046-8919-4935-8542-c6f37956f688/view/Discussions)（仅*声称*可与 MSTest 和 NUnit 一起工作）。

# ruby - 错误：我的回归套件以前可以工作，但是在我执行 gem 更新并将 Firefox 更新到 13.0 之后发生错误

> ID：10930934
> 
> 赞同：0
> 
> 时间：2012-06-07T11:28:44.827
> 
> 标签：ruby, watir-webdriver

我在运行回归套件时不断收到的错误，有人可以对此有所了解。这让我疯狂。

> 由于目标机器主动拒绝，无法建立连接。- 连接(2) (Errno::ECONNREFUSED) C:/Ruby187/lib/ruby/1.8/net/http.rb:560:in `initialize' C:/Ruby187/lib/ruby/1.8/net/http.rb:560:in`open' C:/Ruby187/lib/ruby/1.8/net/http.rb: 560:in `connect' C:/Ruby187/lib/ruby/1.8/timeout.rb:53:in`timeout'C:/Ruby187/lib/ruby/1.8/timeout.rb:101:in `timeout' C:/Ruby187/lib/ruby/1.8/net/http.rb:560:in`connect'C:/Ruby187/lib/ruby/1.8/net/http.rb:553:in start'C: `do_start' C:/Ruby187/lib/ruby/1.8/net/http.rb:542:in`/ Ruby187/lib/ruby/1.8/net/http.rb:1035:in `request' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/default.rb:76:in` response_for' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/ http/default.rb:38:in `request' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/common.rb:40:in` call' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:576:in` 执行' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:189:in `quit' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/firefox/bridge.rb:43:in` 退出' C:/Ruby187/lib/ruby/gems/1.8/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/common/driver.rb:166:in `quit' C:/Ruby187/lib/ruby/gems/1.8/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:87:in` close'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T01:59:58.810

Firefox 13 需要`selenium-webdriver >= 2.23.0`. 更新它，它会正常工作。

# sql - 以 1:n 关系从两个表中连接和排序不同的行

> ID：10930942
> 
> 赞同：1
> 
> 时间：2012-06-07T11:29:36.667
> 
> 标签：sql, postgresql, left-join, aggregate-functions

我有一个`r_event`包含列的数据库表：

```
event_start (date), 
event_stop (date),
insurance_id (integer) 
```

和一个`r_insurance`带有列的表：

```
insurance_id serial primary key,
insurance_name (text) 
```

每个保险都有几个由 链接的事件`insurance_id`。

我正在尝试：
`SELECT insurance_id, insurance_name`- 每个只有 1 个，
并按*最大* `event_stop`的顺序排列：
`ORDER BY event_stop DESC NULLS LAST`- ??

### 例子

```
r_insurance (insurance_id, insurance_name)
1 | rca
2 | casco
3 | itp

r_event (insurance_id, event_start, event_stop)
1 | 12.10.2012 | 27.11.2012
1 | 07.05.2012 | 24.06.2012
2 | 21.01.2013 | 14.02.2013 
```

### 输出应该是：

```
1 | casco -- 因为它有最大 event_stop 的事件  
2 | rca -- 因为它在最大的 event_stop 之后有第一个 event_stop  
3 | itc——因为它没有事件

```

我编辑了我的初稿，我希望它们按最大的事件降序`event_stop`排列`NULLS LAST`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:45:44.937

```
SELECT i.insurance_id, i.insurance_name, max(e.event_stop) latest_stop
FROM   r_insurance i
LEFT   JOIN r_event e USING (insurance_id)
GROUP  BY 1, 2
ORDER  BY latest_stop DESC NULLS LAST; 
```

这`LEFT JOIN`对于避免丢失`r_insurance`没有相关行的行至关重要`r_event`-`itc`在您的示例中。
`ORDER BY`确实是`DESC`。另外，前面没有逗号`NULLS LAST`。

在 PostgreSQL 9.1 中，主键覆盖了列表中表的所有非聚合列`SELECT`，因此您可以简化（更多细节[在这里](https://stackoverflow.com/a/7871033/939860)）：

```
SELECT i.insurance_id, i.insurance_name, max(e.event_stop) latest_stop
FROM   r_insurance i
LEFT   JOIN r_event e USING (insurance_id)
GROUP  BY 1
ORDER  BY latest_stop DESC NULLS LAST; 
```

[sqlfiddle 上的演示。](http://sqlfiddle.com/#!1/03389/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:53:53.537

> “它可以用 GROUP BY 来完成，但我不太清楚它是做什么的以及如何做的”

Group by 采用关系并将其划分为具有相同值的所有行的分区。从那里，您将从结果关系中的每个分区中获得一行；聚合函数接管每个分区而不是整个分区。您可能可以制定如下内容：

```
SELECT
 insurance_id,
 insurance_name,
 max(stop) max_stop
FROM r_event JOIN r_insurance
 ON r_event.insurance_id = r_insurance.insurance_id
GROUP BY insurance_id, insurance_name
ORDER BY max_stop, NULLS LAST 
```

# powershell-2.0 - 使用 powershell 线程化函数并在同一脚本中使用结果

> ID：10930949
> 
> 赞同：0
> 
> 时间：2012-06-07T11:30:09.193
> 
> 标签：powershell-2.0

我有一个脚本可以连接到我们域中的所有服务器。然后，该脚本循环遍历每台服务器以获取本地管理员和组的嵌套成员，并将它们放入 PSObject 中，以便稍后将 PSObject 导出为 CSV。

现在我对如何使用传递参数的 start-job 调用函数以及如何在我现有的脚本中利用该函数的输出感到困惑。

因此，假设我执行以下操作：

```
function addnumbers{
param([int]$a, [int]$b)
[int]$c = $a + $b
$myobj = new-object PSObject
$myobj += $c
return $myobj
}

$exportdetail = @()

[int[]]$numbers = @(1,2,3,4)

foreach ($number in $numbers)
{
   $newobj = new-object PSObject
   $newobj = addnumbers $number
   $exportdetail += $newobj        
}

 $exportdetail | export-csv -notype "c:\export.csv" 
```

现在要线程循环，我将执行以下操作：

```
 function addnumbers{
param([int]$a, [int]$b)
[int]$c = $a + $b
$myobj = new-object PSObject
$myobj += $c
return $myobj
}

$exportdetail = @()

[int[]]$numbers = @(1,2,3,4)

foreach ($number in $numbers)
{
   $ScriptBlock {
   param($num)
   $newobj = new-object PSObject
   $newobj = addnumbers $num
   }
   start-job -ScriptBlock $ScriptBlock -ArgumentList $number
   $exportdetail += $newobj        
}

 $exportdetail | export-csv -notype "c:\export.csv" 
```

这些对象会更新为 exportdetail 整体对象吗？

当我运行代码时，各个线程启动，但它们不返回任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:07:24.990

来自帮助：`Start-Job returns an object that represents the job that it started.` 这意味着您不会从 Start-Job 获得结果，而只是对保存结果的作业的引用。

因此，要获得结果，您必须像这样接收作业（存储结果的位置）：

```
 $job = start-job -ScriptBlock $ScriptBlock -ArgumentList $number
    $exportdetail += $job
}
Wait-Job $exportdetail
Receive-Job $exportdetail | export-csv -notype "c:\export.csv" 
```

基本上，您为每个编号创建一个后台作业，然后将对该作业的引用添加到作业数组中。最后，您等待所有作业完成，然后接收结果。

# jquery - 悬停或单击时显示 div，默认隐藏 div

> ID：10930954
> 
> 赞同：-3
> 
> 时间：2012-06-07T11:30:28.330
> 
> 标签：jquery, html, css, onclick, onhover

我有一个带有地图的站点，该地图具有可以悬停和单击的不同区域，我想要的是当我悬停或单击一个区域时，页面上会出现一个 div，其中包含一些内容。**我尝试使用，`overflow:hidden;`但似乎没有做这项工作，什么是正确的代码使用，甚至可能吗？**

该网站在这里以获得更多理解：http: [//iseeit.no/maptest/](http://iseeit.no/maptest/)

那里有两个 div 的内容已经准备好了，默认情况下这些应该是隐藏的，当来到站点并悬停 og 单击一个区域时，它们应该出现，而不是两者，而是与该区域对应的一个，我拆分了 div彼此分开，以免重叠。

该站点由 jquery、css 和 html 组成。

div（css）：

```
#vest-agder {
    background: #111;
    ...........
} 
```

Jquery（如果这有帮助）：

```
;(function($){$.fn.cssMap=function(options){var s=$.extend({
    'size':'810',
'tooltips':false,
'tooltipArrowHeight':5,
'multipleClick':false,
'searchUrl':'search.php',
'searchLink':'',
'searchLinkVar':'region',
'clicksLimit':4,
'clicksLimitAlert':'Du kan bare velge %d region! || regioner!',
'cities':true,'visibleList':false,
'agentsListId':'addresses', 
'loadingText':'Laster inn kart ...',
'onHover':function(e){},
'onClick':function(e){},
'onLoad':function(e){}}, 
```

希望你明白我想在这里问什么:)

**更新 1**

HTML 中的区域：

```
<div id="map-norge">
 <ul class="norge">
  <li class="no2"><a href="#aust-agder">Aust-Agder</a></li>
  <li class="no19"><a href="#vest-agder">Vest-Agder</a></li>
 </ul>
</div> 
```

CSS 中的区域：

```
.m810 .no2:hover .bg,
.m810 .no2.focus .bg,
.m810 .no2.active-region .bg{height:86px;left:82px;top:816px;width:72px}
.m810 .no2:hover .bg,
.m810 .no2.focus .bg{background-position:-1584px -72px}
.m810 .no2.active-region .bg{background-position:-1584px -432px}

.m810 .no19:hover .bg,
.m810 .no19.focus .bg,
.m810 .no19.active-region .bg{height:67px;left:70px;top:842px;width:52px}
.m810 .no19:hover .bg,
.m810 .no19.focus .bg{background-position:-767px -17px}
.m810 .no19.active-region .bg{background-position:-767px -377px} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:13:04.190

你想让你的 div 显示：无；并进行悬停以更改要显示的 div 的显示...

外汇：

```
#aust-agder { display: none; }
.no19:hover #aust-agder { display: block; } 
```

或者使用 Jquery：

```
$(".no19").hover(function() {
$("#aust-agder").css({"display":"block"});
}); 
```

# extjs - Extjs4 如何动态更改模型？

> ID：10930955
> 
> 赞同：7
> 
> 时间：2012-06-07T11:30:30.827
> 
> 标签：extjs, model

我使用 Extjs4 和 MVC。我想动态更改模型的字段...比如添加可变数量的字段...有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T16:29:00.433

您可以使用API 中`model.setFields(fieldsArray)`显示[的函数。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-static-method-setFields)此方法将模型上的所有现有字段替换为您在参数中包含的任何新字段。没有静态`getFields`方法来捕获现有字段以免覆盖它们，但使用它们很容易`model.prototype.fields`。

我最近这样做是为了在加载用户之前将动态权限设置字段附加到“用户”模型。这是一个例子：

```
Ext.define('myApp.controller.Main', {
    extend: 'Ext.app.Controller',

    models: [
        'User',
    ],

    stores: [
        'CurrentUser', // <-- this is not autoLoad: true
        'PermissionRef', // <-- this is autoLoad: true
    ],

    views: ['MainPanel'],

    init: function() {
        var me = this;

        // when the PermissionRef store loads 
        // use the data to update the user model
        me.getPermissionRefStore().on('load', function(store, records) {
            var userModel = me.getUserModel(),
                fields = userModel.prototype.fields.getRange();
                // ^^^ this prototype function gets the original fields 
                // defined in myApp.model.User

            // add the new permission fields to the fields array
            Ext.each(records, function(permission) {
                fields.push({
                    name: permission.get('name'), 
                    type: 'bool'
                });
            });

            // update the user model with ALL the fields
            userModel.setFields(fields);

            // NOW load the current user with the permission data
            // (defined in a Java session attribute for me)
            me.getCurrentUserStore().load();

        });

    }
}); 
```

# jquery - 重新加载浏览器时防止 scrollLeft

> ID：10930956
> 
> 赞同：0
> 
> 时间：2012-06-07T11:30:36.753
> 
> 标签：jquery, refresh, reload

我正在设计一个水平导航/布局网站，我的文章一个接一个地加载，而不是一个在另一个之下。我遇到的问题是，当我水平滚动页面（scrollLeft 值大于 0）并刷新页面时，首先 scrollLeft 值为 0（这意味着它在最左侧），但是当页面完成时加载（ $(window).load(); ）它会自动滚动到重新加载之前的 scrollLeft 值。我试过使用

```
$(window).load(function() {     
    $('body').animate({scrollLeft: 0});
}); 
```

哪个有效。但我想找到另一个解决方案，因为我想在页面加载时开始向右滚动，并防止它在完成加载时将我送回左侧。我希望我说清楚了。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:57:15.613

好的，我想通了。问题是我的滚动 div 是“html”（主）元素。为了解决这个问题，我只是使用了另一个 div（显然是在 html 元素内）作为滚动 div。

# spring - 具有运行时初始化参数的 Spring bean

> ID：10930961
> 
> 赞同：3
> 
> 时间：2012-06-07T11:30:55.107
> 
> 标签：spring

我有一堂课需要

1.  它使用的各种bean的依赖注入
2.  初始化的运行时参数

该课程看起来与此类似

```
public class Validator {

    @Autowired
    private ServiceA serviceA;

    @Autowired
    private ServiceB serviceB;

    private String s;

    private ClassA a;
    private ClassB b;

    public void initialize(String s, ClassA a, ClassB b) {
        this.s = s;
        this.a = a;
        this.b = b;
    }

    public void performTaskA() {
        //use serviceA, serviceB, s, a and b
    }

    public void performTaskB() {
        //use serviceA, serviceB, s, a and b
    }

    public void performTaskC() {
        //use serviceA, serviceB, s, a and b
    }

} 
```

我可以通过哪些各种选项将上述类定义为spring bean（以利用依赖注入）并确保调用者在调用任何performTask *（）方法之前调用initialize（）？

注意 - 我知道`Object getBean(String name, Object... args) throws BeansException;`但它看起来不太好，因为我们会失去类型安全性。还有其他建议吗？

更新 -[这里](http://nurkiewicz.blogspot.in/2010/08/creating-prototype-spring-beans-on.html)提到的带有查找方法注入的解决方案是一个不错的选择。在春季实施之前，您对以下使用内部类的替代方案有何看法

```
public class MyService {
    private ServiceA serviceA;
    private ServiceB serviceB;

    public class DataClass {
        private Integer counter;

        public DataClass(Integer counter) {
            this.counter = counter;
        }

        public Integer performActionAndGetCount() {
            serviceB.performAction();
            return this.counter++;
        }
    } 
}

//client module
MyService service = beanFactory.getBean("myService");
MyService.DataClass dataClass = service.new DataClass(1); 
```

这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:24:21.900

使用组件、服务或存储库注释来注释您的类。这将使您的类被视为一个 spring bean，然后您可以使用依赖注入和运行时初始化。

确保在您的 {dispatcher-servlet}.xml（将 {} 中的名称替换为您在 web.xml 中为您的调度程序 servlet 指定的名称）文件中您已经编写了这一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T21:05:09.593

这可以使用`scope="prototype"`和的组合来完成`<lookup-method>`。

首先，将要参数化的类定义为 bean `scope="prototype"`。这将导致上下文在每次请求 bean 时生成一个新实例。

```
<bean class="com.example.Validator" scope="prototype"/> 
```

然后，定义一个“工厂类”，它将包装新对象的生成和初始化。

```
<bean class="com.example.ValidatorFactory">
  <lookup-method name="newValidator"/>
</bean> 
```

这个类看起来像这样：

```
public class ValidatorFactory {
    public Validator createValidator(String str, Class<?> classA, Class<?> classB) {
        Validator v = newValidator();
        v.initialize(str, classA, classB);
        return v;
    }

    protected void newValidator() {
        // Spring will implement this via AOP
    }
} 
```

这迫使客户端通过一个例程，该例程将`initialize()`在仍然通过 Spring 上下文加载 bean 的同时调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T12:16:39.930

我不太清楚你的要求。但我认为 @PostConstruct 带注释的方法可以帮助您。您可以在此处找到有关 @PostConstruct 注释的更多详细信息[。](http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/)

希望这对您有所帮助。干杯。

# algorithm - 骗子之谜

> ID：10930962
> 
> 赞同：3
> 
> 时间：2012-06-07T11:31:11.170
> 
> 标签：algorithm

我一直在尝试解决[Interviewstreet](https://www.interviewstreet.com/challenges/dashboard/#problem/4f9ea7df7d5c6)中的一个难题。但我现在不知道这个问题。如果有人可以给我一个提示，那就太好了。

谜题是：你有 N 个士兵，从 1 到 N 编号。你的每个士兵要么是骗子，要么是诚实的人。你有 M 组关于它们的信息。信息格式如下：

每行包含 3 个整数 - A、B 和 C。这意味着在编号为 {A, A+1, A+2, ..., B} 的士兵集合中，恰好有 C 个是骗子。像上面这样有M行。

让 L 是你的说谎者士兵的总数。由于您无法找到 L 的确切值，因此您希望找到 L 的最小值和最大值。

输入：

输入的第一行包含两个整数 N 和 M。接下来的 M 行中的每一行包含三个整数 - A、B 和 C (1 <= Ai <= Bi <= n) 和 (0 <= Ci <= Bi-Ai ）。其中Ai、Bi、Ci分别指第i行中A、B、C的值，N、M不大于101，保证给定信息可满足。您总能找到满足给定信息的情况。

输出：

将两个整数 Lmin 和 Lmax 打印到输出。

样本输入

```
3 2
1 2 1
2 3 1 
```

样本输出

```
1 2 
```

样本输入

```
20 11
3 8 4
1 9 6
1 13 9
5 11 5
4 19 12
8 13 5
4 8 4
7 9 2
10 13 3
7 16 7
14 19 4 
```

样本输出

```
13 14 
```

解释

在第一个示例测试用例中，第一行是“3 2”，表示有 3 名士兵，我们有两组信息。第一个信息是在士兵集合 {1, 2} 中有一个是骗子，第二个信息是在士兵集合 {2,3} 中又有一个骗子。现在这种情况有两种可能性：1号和3号士兵是骗子或2号士兵是骗子。所以说谎者的最小数量是 1，说谎者的最大数量是 2。因此答案是 1 2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T18:10:54.010

这是又一个动态规划问题。不需要启发式。

在每个`i`from`0`到`n`，您距离满足所有当前打开的条件有多远，您需要跟踪骗子的最小和最大数量。（开放条件是某种形式，“从这里到`j`我需要`k`更多的骗子。”）

如果您有 的解决方案，对于您拥有的每个部分解决方案`i`，移动到`i+1`如下：

1.  放弃你已经达到并满足的所有条件。
2.  为此号码添加所有新条件。如果新条件与您现有的解决方案冲突，请丢弃此部分解决方案。以下是条件之间的冲突规则，即`j`你需要`k`骗子和`j'`你需要`k'`骗子`j <= j'`：
    1.  如果`k < k'`有冲突。（你不能有更多的说谎者，`j`然后再减少`j'`。
    2.  如果`j' - j < k' - k`有冲突。（你不能在士兵中添加`k' - k`骗子。）`j' - j`
    3.  否则不存在冲突。
3.  如果没有条件说士兵`j`需要添加`j-i`骗子，则可以为当前步骤添加当前士兵不是骗子的部分解决方案。（这里的“添加”是指“确保跟踪此状态，如果未跟踪，则根据需要更新 max/min”。）
4.  如果没有条件说`0`未来会增加士兵，您可以为当前步骤添加部分解决方案，当前士兵是骗子。（在这个解决方案中，首先改变状态，说每个条件都需要少一个骗子——因为你添加了一个，然后像以前一样继续。）

你的起始条件是 ，`i = 0`有骗子的`1`解决方案，`0`绝对没有条件。

从解决方案`0`开始生成`1`, `2`, ... ,的部分解决方案`n`。当你到达时，`n`你有你的答案。

（注意，通过适度的修改，您不仅可以计算出最大和最小是什么，还可以计算出究竟有多少解决方案。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T15:47:01.427

使用以下原则，您可以获得 90% 的成功：

1.  如果集合中的骗子数量为零，则将该集合分解为大小为 1 的集合，每个集合的骗子数量为零。所以`1 3 0`变成`1 1 0`和。`2 2 0`_`3 3 0`

2.  如果集合中说谎者的数量等于集合的大小，则将该集合分解为大小为 1 的集合，每个集合中的说谎者数量等于 1。所以`2 5 4`变成`2 2 1`and`3 3 1`和`4 4 1`and `5 5 1`。

3.  对于我们拥有的任意两个集合 A 和 B，如果 A 是 B 的子集，则从 B 中删除 A 的所有元素，并从 B 中的骗子数中减去 A 中的骗子数。

我们将使用这些原则来解决您的两个示例问题中较长的一个。首先获取给定的输入，并将它们转换为索引集。

```
 3 4 5 6 7 8                                         [4]
1 2 3 4 5 6 7 8 9                                       [6]
1 2 3 4 5 6 7 8 9 10 11 12 13                           [9]
        5 6 7 8 9 10 11                                 [5]
      4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19         [12]
              8 9 10 11 12 13                           [5]
      4 5 6 7 8                                         [4]
            7 8 9                                       [2]
                  10 11 12 13                           [3]
            7 8 9 10 11 12 13 14 15 16                  [7]
                              14 15 16 17 18 19         [4] 
```

`4 5 6 7 8`是 的子集`3 4 5 6 7 8`，所以从另一个中减去一个。

```
 3                                                   [1]
1 2 3 4 5 6 7 8 9                                       [6]
1 2 3 4 5 6 7 8 9 10 11 12 13                           [9]
        5 6 7 8 9 10 11                                 [5]
      4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19         [12]
              8 9 10 11 12 13                           [5]
      4 5 6 7 8                                         [4]
            7 8 9                                       [2]
                  10 11 12 13                           [3]
            7 8 9 10 11 12 13 14 15 16                  [7]
                              14 15 16 17 18 19         [4] 
```

`7 8 9`, `10 11 12 13`, 和`14 15 16 17 18 19`都是 的子集`4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19`，所以减去它们。

```
 3                                                   [1]
1 2 3 4 5 6 7 8 9                                       [6]
1 2 3 4 5 6 7 8 9 10 11 12 13                           [9]
        5 6 7 8 9 10 11                                 [5]
      4 5 6                                             [3]
              8 9 10 11 12 13                           [5]
      4 5 6 7 8                                         [4]
            7 8 9                                       [2]
                  10 11 12 13                           [3]
            7 8 9 10 11 12 13 14 15 16                  [7]
                              14 15 16 17 18 19         [4] 
```

`4 5 6`有三个骗子，所以把他们分解成单独的集合。

```
 3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
1 2 3 4 5 6 7 8 9                                       [6]
1 2 3 4 5 6 7 8 9 10 11 12 13                           [9]
        5 6 7 8 9 10 11                                 [5]
              8 9 10 11 12 13                           [5]
      4 5 6 7 8                                         [4]
            7 8 9                                       [2]
                  10 11 12 13                           [3]
            7 8 9 10 11 12 13 14 15 16                  [7]
                              14 15 16 17 18 19         [4] 
```

从包含它们的所有集合中减去 3、4、5 和 6。

```
 3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
1 2         7 8 9                                       [2]
1 2         7 8 9 10 11 12 13                           [5]
            7 8 9 10 11                                 [3]
              8 9 10 11 12 13                           [5]
            7 8                                         [1]
            7 8 9                                       [2]
                  10 11 12 13                           [3]
            7 8 9 10 11 12 13 14 15 16                  [7]
                              14 15 16 17 18 19         [4] 
```

减去`7 8`_`7 8 9`

```
 3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
                9                                       [1]
1 2         7 8 9                                       [2]
1 2         7 8 9 10 11 12 13                           [5]
            7 8 9 10 11                                 [3]
              8 9 10 11 12 13                           [5]
            7 8                                         [1]
                  10 11 12 13                           [3]
            7 8 9 10 11 12 13 14 15 16                  [7]
                              14 15 16 17 18 19         [4] 
```

从包含它的所有集合中减去 9。

```
 3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
                9                                       [1]
1 2         7 8                                         [1]
1 2         7 8   10 11 12 13                           [4]
            7 8   10 11                                 [2]
              8   10 11 12 13                           [4]
            7 8                                         [1]
                  10 11 12 13                           [3]
            7 8   10 11 12 13 14 15 16                  [6]
                              14 15 16 17 18 19         [4] 
```

`7 8`从包含两者的任何集合中减去。

```
 3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
                9                                       [1]
1 2                                                     [0]
1 2               10 11 12 13                           [3]
                  10 11                                 [1]
              8   10 11 12 13                           [4]
            7 8                                         [1]
                  10 11 12 13                           [3]
                  10 11 12 13 14 15 16                  [5]
                              14 15 16 17 18 19         [4] 
```

`1 2`有 0 个说谎者，因此将它们分解为单独的集合。

```
1                                                       [0]
  2                                                     [0]
    3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
                9                                       [1]
1 2               10 11 12 13                           [3]
                  10 11                                 [1]
              8   10 11 12 13                           [4]
            7 8                                         [1]
                  10 11 12 13                           [3]
                  10 11 12 13 14 15 16                  [5]
                              14 15 16 17 18 19         [4] 
```

从包含它们的所有其他集合中减去 1 和 2。

```
1                                                       [0]
  2                                                     [0]
    3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
                9                                       [1]
                  10 11                                 [1]
              8   10 11 12 13                           [4]
            7 8                                         [1]
                  10 11 12 13                           [3]
                  10 11 12 13 14 15 16                  [5]
                              14 15 16 17 18 19         [4] 
```

`10 11`从包含两者的任何集合中减去。

```
1                                                       [0]
  2                                                     [0]
    3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
                9                                       [1]
                  10 11                                 [1]
              8         12 13                           [3]
            7 8                                         [1]
                        12 13                           [2]
                        12 13 14 15 16                  [4]
                              14 15 16 17 18 19         [4] 
```

`8 12 13`有三个骗子，所以将他们分解成单独的集合，然后从包含它们的任何其他集合中减去它们。

```
1                                                       [0]
  2                                                     [0]
    3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
            7                                           [0]
              8                                         [1]
                9                                       [1]
                  10 11                                 [1]
                        12                              [1]
                           13                           [1]
                              14 15 16                  [2]
                              14 15 16 17 18 19         [4] 
```

`14 15 16`从中减去`14 15 16 17 18 19`。

```
1                                                       [0]
  2                                                     [0]
    3                                                   [1]
      4                                                 [1]
        5                                               [1]
          6                                             [1]
            7                                           [0]
              8                                         [1]
                9                                       [1]
                  10 11                                 [1]
                        12                              [1]
                           13                           [1]
                              14 15 16                  [2]
                                       17 18 19         [2] 
```

我们得到的集合都是相互脱节的。如果我们将它们结合在一起，如下所示：

```
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19         [13] 
```

我们可以看到，从 1 到 19 的骗子数量是 13。

这种技术并不能完全解决所有情况下的问题。例如，在您的两个样本输入中较短的一个中，此技术实际上没有任何作用。但是，对于更大的问题，它确实将您的集合分解为更模块化的形式，我希望这会使暴力破解更容易/更快。例如，在更大的样本中，我们将问题空间分解为两种可能性：

```
1\. there are 13 liars among soldiers 1-19, and Soldier 20 is not a liar.
2\. there are 13 liars among soldiers 1-19, Soldier 20 is a liar. 
```

我们可以很容易地评估这两种情况，以确定最小的骗子数为 13，最大为 14。这比尝试所有 2^20 的骗子和非骗子组合要快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T22:27:35.267

您可以轻松地将其表述为整数线性程序。由于约束矩阵是完全单模的，它可以被任何 ILP 求解器快速求解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T21:46:04.033

好的，如何将问题重新转换为概率/分布估计

这与“逆问题”（例如从已知平均值推断概率分布）非常相似，MAXENT（最大熵）等方法可以很好地解决（例如[http://books.google.gr/books?id=Kk6SyQ0AmjsC&pg=PA35&lpg=PA35&dq =MAXENT+inference&source=bl&ots=W4kVjXRpe7&sig=IzjnOVT0FQJtIXSkeFssNxolLh4&hl=el&sa=X&ei=nxJkU-LUHMmkPciigZAH&ved=0CGcQ6AEwCDgK#v=onepage&q=MAXENT%20inference&f=false](http://books.google.gr/books?id=Kk6SyQ0AmjsC&pg=PA35&lpg=PA35&dq=MAXENT+inference&source=bl&ots=W4kVjXRpe7&sig=IzjnOVT0FQJtIXSkeFssNxolLh4&hl=el&sa=X&ei=nxJkU-LUHMmkPciigZAH&ved=0CGcQ6AEwCDgK#v=onepage&q=MAXENT%20inference&f=false) )

（另外很高兴能够将看似奇怪的场连接到底层的物理现实）

鸟类学？？:)

# magento - Magento：不同StoreViews的不同URL？

> ID：10930963
> 
> 赞同：0
> 
> 时间：2012-06-07T11:31:17.643
> 
> 标签：magento

在我们的 Magento 商店中，我们有 2 种不同语言的 2 个 StoreView。由于两个 StoreView 使用相同的 URL，因此只有一个 Storeview 被 Google 在正确的国家/地区编制索引。是否可以自动更改一个 StoreView 的 URL 以使其对两个 StoreView 都是唯一的？

谢谢，

托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:41:46.270

您可以更改您的商店网址，并且可以为不同的商店设置不同的网址。转到系统 -> 配置 -> 在下拉列表中选择商店视图（默认配置） -> 转到 Web -> 取消选中使用默认选项并输入商店视图的 URl。

希望这可以帮助你

# c# - 如何动态设置母版页？

> ID：10930965
> 
> 赞同：14
> 
> 时间：2012-06-07T11:31:24.227
> 
> 标签：c#, .net, master-pages, master

我有一个要求，我想根据用户 ID 为同一页面设置不同的母版页（即，对于一个用户，它必须设置一个母版页，对于另一个用户，它必须设置另一个母版页）。我们可以为任何页面设置不同的母版页吗动态？请帮助...

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-07T11:33:18.517

```
void Page_PreInit(Object sender, EventArgs e)
{
    this.MasterPageFile = "~/MyMaster.master";
} 
```

**说明：**您可以将母版页动态附加到内容页。由于在页面处理的初始化阶段合并了母版页和内容页，因此在此之前必须分配母版页。通常，您在 PreInit 阶段动态分配母版页。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T11:33:53.043

请注意 MSDN 上的这篇文章：

[http://msdn.microsoft.com/en-us/library/c8y19k6h.aspx](http://msdn.microsoft.com/en-us/library/c8y19k6h.aspx)

```
void Page_PreInit(Object sender, EventArgs e)
{
    this.MasterPageFile = "~/NewMaster.master";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T11:33:47.397

您可以通过设置 Page 的[MasterPageFile](http://msdn.microsoft.com/en-us/library/system.web.ui.page.masterpagefile.aspx)属性。[但是，如果在PreInit](http://msdn.microsoft.com/en-us/library/system.web.ui.page.preinit.aspx)事件`InvalidOperationException`之后调用它，则会抛出一个。查看[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

> MasterPageFile 属性只能在 PreInit 事件中设置；在 PreInit 事件之后尝试设置 MasterPageFile 属性将引发 InvalidOperationException 异常。如果 MasterPageFile 属性无效，则在页面生命周期的后期会引发 HttpException 类型的异常，但在 PreInit 事件中设置该属性时不会引发异常。

# mysql - 在 MySQL 中展示复制效果的好方法是什么？

> ID：10930970
> 
> 赞同：0
> 
> 时间：2012-06-07T11:31:28.410
> 
> 标签：mysql, replication

我们必须展示差异以展示使用复制的优势。我们有两台计算机，通过 teamviewer 链接，这样我们就可以向我们的班级展示我们正在做什么。

*   是否可以显示性能差异？（执行某些查询需要多长时间？）
*   我们应该测试什么类型的查询？（换句话说，使用/不使用复制最大的区别在哪里）
*   我们应该如何填充我们的数据库？应该有多少数据？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:41:40.337

[复制](http://dev.mysql.com/doc/refman/4.1/en/replication-intro.html)有几个优点：

*   **通过主/从设置增加了**鲁棒性。**万一master出现问题，可以切换到slave作为备份**
***   **通过在主服务器和从服务器之间分配处理客户端查询的负载，可以实现客户端**更好的响应时间*******   使用复制的另一个好处是您可以**使用从服务器执行数据库备份，**而不会干扰主服务器。****

 ****使用复制始终是一件安全的事情，您应该始终复制生产服务器，以防万一发生故障，这将很有帮助。

您可以`seconds_behind_master`在显示复制性能的同时显示值，这显示了从属设备的“延迟”时间，此值不应超过 600-800 秒，但网络延迟在这里确实很重要。确保服务器现在配置正确您可以停止服务器`Master`并让服务器发生一些更新/插入（批量插入），现在启动服务器您将看到更大的值，它应该继续减少直到达到值。`Slave``slave``Master``slave``seconds_behind_master``0`

有一个名为[MONyog - MySQL Monitor and Advisor](http://webyog.com)的工具可以实时显示复制状态。 ![在此处输入图像描述](../Images/9c89a0723c5702e5544cce527566b5fc.png)

此外，无论是基于语句还是基于行，这里已经解释了使用哪种复制 [http://dev.mysql.com/doc/refman/5.1/en/replication-sbr-rbr.html](http://dev.mysql.com/doc/refman/5.1/en/replication-sbr-rbr.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:18:00.763

我想上述问题的答案取决于您使用的存储引擎、数据库大小以及您选择的复制架构等因素。

我认为复制不会对简单的主->从架构的查询执行产生太大影响。但是，如果您的架构中有两个 master：一个处理写入，复制到另一个专门处理读取的 master，然后复制到处理备份的 slave，那么您更有可能呈现一些更积极的情景。阅读锁和存储引擎，因为这可能会影响您的选择。

展示复制如何积极的一种简单方法是演示一个简单的备份策略。例如，在主服务器本身上进行每小时备份会使底层应用程序在备份期间完全停止（使用 mysqldump 进行备份会锁定表，因此不会发生读/写操作）。而复制到从属服务器，然后从那里进行备份可以消除这种影响。

如果您想显示详细的统计信息，最好查看一些基准测试/分析工具（sysbench、mysqlslap、sql-bench 等等）。不过，这可能会变得相当复杂。也可能值得在这里查看 Percona Toolkit 和 Percona 监控插件：[http ://www.percona.com/software/](http://www.percona.com/software/)****

# iphone - UITouch 没有返回正确的位置

> ID：10930974
> 
> 赞同：0
> 
> 时间：2012-06-07T11:31:39.790
> 
> 标签：iphone, xcode, uitouch

我有个问题...

我想在主视图下方的单个视图中获取 UITouch 位置。

我的代码是：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint previous = [[touches anyObject] previousLocationInView:toolBarView];
    CGPoint current = [[touches anyObject] locationInView:toolBarView];
} 
```

问题是它返回任何视图而不是工具栏视图中的位置。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:34:36.667

你可能想纠正

```
CGPoint current = [[touches anyObject] locationInView:toolBarView]; 
```

至：

```
CGPoint current = [[touches anyObject] locationInView:[toolBarView view]]; 
```

# json - 杰克逊将空值传递给构造函数

> ID：10930975
> 
> 赞同：0
> 
> 时间：2012-06-07T11:31:40.110
> 
> 标签：json, jackson

考虑采用两个参数但允许第二个为空的 Java 类构造函数。

```
public class Category {
    String name;
    @JsonIgnore Category parent;
    Category(String name,Category parent){this.name = name;this.parent=parent;}
} 
```

我用@JsonIgnore 注释跳过了父序列化，因为我不需要它。现在 Jackson 无法反序列化它，因为它在生成的 Jason 中找不到父属性。

除了定义仅采用 name 参数的构造函数之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:04:13.063

缺少命名的构造函数参数是可以的——你只会得到 null 而不是 value。所以你可以有：

```
@JsonCreator
public Category(@JsonProperty("name") String name, @JsonProperty("whatever") Category parent) { ... } 
```

找到的都通过了。不会抛出异常；杰克逊从不要求财产存在。它只是抱怨它无法识别的东西（除非配置为不识别）。

# html - 内容垂直对齐之前的 CSS

> ID：10930978
> 
> 赞同：3
> 
> 时间：2012-06-07T11:31:52.417
> 
> 标签：html, css

我需要帮助。我在网上搜索了答案，但我找到的答案不起作用。

我试图在a“a：before”上方的框中显示a的内容，然后显示与a中相同的文本，我已经做到了

```
content:attr(title); 
```

但它不会垂直对齐。我试过了

```
display:table-cell;
vertical-align:center; 
```

[http://jsfiddle.net/CvZkX/](http://jsfiddle.net/CvZkX/)

它不起作用。有人知道它是怎么做的吗？

最好的问候垫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:34:03.027

对于单行文本，最简单的解决方案是使用`line-height`.

[http://jsfiddle.net/thirtydot/CvZkX/1/](http://jsfiddle.net/thirtydot/CvZkX/1/)

```
header nav a:before {
    line-height: 2.3em;
} 
```

我选择`2.3em`是因为你有`.5em`+ `.5em`+ `1.7em`( `padding-top`+ `padding-bottom`+ `font-size`)，并且我们试图将`line-height`equal 设置为元素的高度。

# xml - Castle Windsor 从 XML 添加组件

> ID：10930984
> 
> 赞同：0
> 
> 时间：2012-06-07T11:32:25.417
> 
> 标签：xml, initialization, castle-windsor, config

我在项目中使用 Castle Windsor，目前面临配置文件的问题，其中有很多，而且它们搞砸了。所以我决定将它们结构化。
我想用一个主要的 xml 文件初始化温莎工厂，并根据它的内容从 xml 文件中注册剩余的组件。
我想知道从xml配置文件初始化工厂后是否有机会注册组件。

像这样：

```
ComponentFactory.Initialize(Configuration.FromXmlFile("Main.xml"));
var config = ComponentsFactory.Resolve<MainConf>();
foreach(var xml in config.XMLList)
{
    ComponentFactory.RegisterFromXML(xml)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T14:28:49.603

可以使用以下方法：

```
<castle>
    <include uri="file://config_part_1.xml" />
    <include uri="file://config_part_2.xml" />
    <include uri="file://SomeConfigurationFolder/config_part_3.xml" />
    <include uri="file://SomeConfigurationFolder/config_part_4.xml" />
</castle> 
```

路径是相对于项目文件夹的。

不确定它是否符合所有要求，但它可用于在一组文件上逻辑划分城堡配置。

# ruby-on-rails - request.referrer 仅适用于 localhost 上的 URL

> ID：10930990
> 
> 赞同：2
> 
> 时间：2012-06-07T11:32:50.763
> 
> 标签：ruby-on-rails, rack

我想获得推荐人网址。到目前为止，我已经尝试了以下方法：

```
request.referer
request.referrer
request.headers["HTTP_REFERER"] 
```

只有当我从我的 localhost:3000 跟随 URL 时，它们才会起作用。如果我在外部站点上创建链接`http://localhost:3000`并单击它，那么所有这些方法都会返回`nil`.

即使用户来自外部站点，如何避免这种行为并获得实际的引荐来源网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:18:15.883

尝试使用 request.env['HTTP_REFERER']。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T00:08:02.150

1.  不要使用 webrick 并确保您的网站没有在开发中运行
2.  要激活推荐网址，请确保该链接嵌入在另一个网站中。我只是在我所在的任何网页上注入了一个链接，比如“stackoverflow”，然后点击那里的链接

终于为我工作了，下面是结果 `p request.referer`

![在此处输入图像描述](../Images/43b2028f4143df650d6e192a02d2d227.png)

# java - 将java线程池中的线程作为守护线程是否有任何问题

> ID：10930997
> 
> 赞同：1
> 
> 时间：2012-06-07T11:33:14.443
> 
> 标签：java, threadpool

我[在](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)`Weblogic server (WLS)`. _ 要正常关闭池，我需要调用`shutdown()`该池。但是由于我无法控制的原因，我无法在此 WLS 中添加任何应用程序生命周期侦听器，这意味着我没有任何关闭挂钩来调用此方法。所以我正在考虑将池中的线程作为守护线程，这样`WLS JVM`当它关闭时就不会等待这些线程完成。否则 JVM 不会正常关闭，因为池中的核心线程始终在运行。

将线程池中的线程作为守护进程有什么缺点吗？我了解守护线程，当JVM退出时，这些线程永远不会被正常清理，任何运行的东西都不会正常完成。此问题仅在关机阶段。

在线程池中创建线程守护程序还有其他问题吗？（或更好的方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:41:06.800

鉴于您在应用程序容器中，您可能希望按照@mprabhat 的建议使用工作管理器。但是，如果您确实需要受您控制的线程，您仍然可以将它们关闭。WebLogic 通过关闭钩子实现它的应用程序生命周期通知。您仍然可以使用该机制。您可以使用[Runtime.addShutdownHook](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)注册一个。不要忘记快速完成工作。WebLogic有超时，所以关闭顺序基本是：

1.  请求关闭（通过 System.exit() 或发送到 JVM 进程的信号）。
2.  您的关闭挂钩和 WebLogic 的关闭挂钩执行。
3.  在一些超时（我认为是 5-10 秒）之后，WebLogic 的关闭挂钩之一调用 System.halt()。
4.  无论关闭挂钩是否完成，JVM 都会终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:41:41.627

请参考下面的链接，我建议同时使用 java 7 线程

[http://www.baptiste-wicht.com/2010/09/java-concurrency-part-7-executors-and-thread-pools/](http://www.baptiste-wicht.com/2010/09/java-concurrency-part-7-executors-and-thread-pools/)

请享用

# ajax - fancybox 2 ajax 内容（等待加载图像）

> ID：10930998
> 
> 赞同：1
> 
> 时间：2012-06-07T11:33:17.773
> 
> 标签：ajax, image, fancybox

我只是尝试让 fancybox 显示 ajax 内容，包括一个更大的图像。到目前为止效果很好......我只是看到fancybox没有等待加载图像。所以在显示fancebox的那一刻，然后定位，然后图像到达，然后调整大小并再次定位。那不酷。

有人知道如何处理吗？在此先感谢，弗洛里安