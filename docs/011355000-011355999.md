# StackOverflow 问答 11355000-11355999

# git - 如何从任何地方将*所有*新/修改的文件添加到 git？（如 `git add -A` 或 `git commit -a` 用于新文件）

> ID：11355006
> 
> 赞同：3
> 
> 时间：2012-07-06T02:14:56.730
> 
> 标签：git

是否有`git commit -a`用于暂存新文件的等价物？

这是 的行为`git add -A`，但前提是您从存储库的根目录调用它。否则，它只会在子目录中添加文件。

还是不存在这样的内置功能，使最简单的程序可以编写类似的东西`git add -A $(git rev-parse --show-toplevel)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:56:45.527

您可以使用 git 的内置[aliasses](https://git.wiki.kernel.org/index.php/Aliases#Aliases)，其中包括调用 shell 脚本的能力。

# javascript - 使用 jquery 或 javascript 制作手风琴/切换菜单

> ID：11355010
> 
> 赞同：0
> 
> 时间：2012-07-06T02:15:47.150
> 
> 标签：javascript, jquery, html

找到了解决方案：

```
$('div.divname').not(':eq(0)').hide(); 
```

检查此页面：

[http://www.iloja.pt/index.php?_a=viewDoc&docId=19](http://www.iloja.pt/index.php?_a=viewDoc&docId=19)

我只想打开第一个文本（faqtexto），然后打开一个波纹管，在加载时隐藏（默认情况下）

这是 HTML：

```
 <div class="agendarfaq">
        <div class="topfaq"></div>

        <div class="faqtopics"><p class="textopics">Recolha e entrega, quanto tempo?</p></div>
        <div class="faqtexto"> Neque porro quisquam est, qui dolorem   ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem</div>

        <div class="faqtopics"><p class="textopics">Recolha e entrega, quanto tempo?</p></div>
        <div class="faqtexto"> Neque porro quisquam est, qui dolorem   ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem</div>
    </div> 
```

我建议的 jQuery：

```
$(".faqtopics").click(function(event) {
    $("div.faqtexto").slideUp(100);
    $(this).next("div.faqtexto").slideToggle();
}); 
```

您是否建议任何其他更清洁的 jQuery 代码？

欢迎任何帮助！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:24:10.333

使用 CSS 而不是 jQuery？

```
style="display: none;" 
```

在您希望在页面加载时隐藏的 HTML 元素上。

然后用 jQuery...

```
$("#MyElement").toggle(); 
```

...切换元素。

# python - RGB 颜色的图像读取？

> ID：11355013
> 
> 赞同：0
> 
> 时间：2012-07-06T02:16:11.287
> 
> 标签：python, image, rgb, image-manipulation, scanning

如何拍摄图像并读取图像中的每个像素，并确定它是否为绿色。如果是前者，返回真，如果是后者，返回假。我所说的绿色并不是指 100% 的绿色，我是指比红色更绿色。（如果你明白我的意思）。之后，它应该输出绿点的x，y。现在，由于它不仅仅是一个像素，如果它事先降低分辨率以最大化速度就可以了。我听说过 Image library，但我还没有看到读取每个像素并返回其 RGB 值的方法。

此外，如果您也可以指导我拍摄视频（好吧，每隔几秒钟拍摄一张图像。）然后处理这些图像并返回一组元组，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:41:23.740

PIL（[Python 图像库](http://www.pythonware.com/products/pil/index.htm)）将为您提供您所询问的一些功能。此示例向您展示如何打开`.gif`文件并检查给定位置的 RGB 值。

```
import Image

im = Image.open('image.gif')
rgb_im = im.convert('RGB')
r, g, b = rgb_im.getpixel((1, 1))

print r, g, b
(65, 100, 137) 
```

这是[支持的图像格式](http://infohost.nmt.edu/tcc/help/pubs/pil/formats.html)，这是一个基本[教程](http://www.pythonware.com/library/pil/handbook/introduction.htm)。

PIL 非常受欢迎，您应该可以通过 google找到其他示例和[文档。](http://infohost.nmt.edu/tcc/help/pubs/pil.pdf)也没有对 Python 3.x 的官方支持（还没有？），但您可以在[这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)获得 PIL 的非官方版本- 虽然看起来像 Windows。

另一个[教程](http://www.geeks3d.com/20100930/tutorial-first-steps-with-pil-python-imaging-library/)。

# ios - 如何使用 sharekit 在 Tumblr 上分享

> ID：11355014
> 
> 赞同：2
> 
> 时间：2012-07-06T02:16:53.580
> 
> 标签：ios, tumblr, sharekit

我正在使用 ShareKit [https://github.com/ShareKit](https://github.com/ShareKit)在 tumblr 上分享图片。[但问题是当我在http://www.tumblr.com/oauth/apps](http://www.tumblr.com/oauth/apps)在 tumblr 上注册应用程序时，我得到了一个 API 密钥。但是没有地方把这个键放在 ShareKit 配置文件上。

然后我忽略那个键，运行应用程序并选择在 tumblr 上分享，这个“登录错误”出现“服务遇到错误。请稍后再试”。
任何身体都有同样的问题？如何使用 sharekit 在 tumblr 上分享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:45:22.760

更新最新的 Sharekit 版本修复了这个问题

# c# - 未知网址的 MVC 3 路由

> ID：11355018
> 
> 赞同：1
> 
> 时间：2012-07-06T02:17:03.157
> 
> 标签：c#, asp.net-mvc-3, url, routing

我希望能够处理通过某个控制器请求的任何 url。

```
foo.com/a
foo.com/abcd
foo.com/x1 
```

对于 foo.com/a

我想用

`UrlHandlerController`用`Process(string url)`方法。

我应该如何添加路由规则才能做到这一点？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T02:21:18.583

创建一个新的自定义路由并使用 Phill Haack 的[Route Debugger](http://haacked.com/archive/2011/04/13/routedebugger-2.aspx)来测试您的路由：

```
routes.MapRoute(
    "customroute",
    "{url}", 
    new { controller = "UrlHandler",
        action = "Process",
        url = ""
    }
); 
```

控制器：

```
public class UrlHandlerController : Controller
{
    [HttpGet]
    public ActionResult Process(string url)
    {
        return View();

        /* or */
        if(url == "something"){
            return View("SomethingView");
        }
        else if(url == "somethingelse"){
            return View("SomethingElseView");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:43:39.403

达斯，看看这条路线是否有帮助：

```
routes.MapRoute(
    "CustomRoute", // Route name
    "{url}", //Route formation
    new { controller = "UrlHandler", action = "Process" }, // Where to send it
    new { keyWord = @"\S+" } // Regex to identify the argument
); 
```

问候。

# asp.net-mvc - 添加多对多关系而不从数据库中获取子实体

> ID：11355019
> 
> 赞同：2
> 
> 时间：2012-07-06T02:17:04.390
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4, many-to-many

我有具有多对多关系的 Book 和 Author 实体，我正在尝试使用数据库优先方法保存关系（联结表中的记录）。

我想从我的工作版本代码开始

```
 [HttpPost]
        public ActionResult Edit(BookViewModel bookv)
        {
            Mapper.CreateMap<AuthorViewModel, Author>();
            List<Author> authors = Mapper.Map<List<AuthorViewModel>, List<Author>>
(bookv.Authors.ToList());
//remove authors from book object to avoid multiple entities with same key error
           bookv.Authors.Clear();
            Mapper.CreateMap< BookViewModel,Book>();
            Book  book = Mapper.Map<BookViewModel,Book>(bookv);

            db.Books.Attach(book);          
            book.Authors.Clear();
            foreach (Author a in authors)
            {
                //Fetch Author and add relation to book object
                book.Authors.Add(db.Authors.Single(at=>at.AuthorId==a.AuthorId));
            }

            db.ObjectStateManager.ChangeObjectState(book, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");

        } 
```

在上面的代码中，我从数据库中获取作者对象（记录）以添加与书籍对象的关系。然而，**我不是从数据库中获取 Book 对象，而是将其附加到上下文中。我不能对 Author 对象做类似的事情吗？**

我尝试使用此代码执行此操作，但它首先将新记录添加到作者表并添加与书籍和新创建的（不需要的）作者的关系：

```
 [HttpPost]
    public ActionResult Edit(BookViewModel bookv)
    {
        Mapper.CreateMap<AuthorViewModel, Author>();
        List<Author> authors = Mapper.Map<List<AuthorViewModel>, List<Author>>(bookv.Authors.ToList());
    //   bookv.Authors.Clear();
        Mapper.CreateMap< BookViewModel,Book>();
        Book  book = Mapper.Map<BookViewModel,Book>(bookv);

        foreach (Author a in book.Authors)
        {
            db.Authors.Attach(a);
        }

        db.Books.Attach(book);

        foreach (Author a in authors)
        {
            book.Authors.Add(a);
        }
     db.ObjectStateManager.ChangeObjectState(book, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:51:54.163

```
[HttpPost]
        public ActionResult Edit(BookViewModel bookv)
        {
            //create maps
            Mapper.CreateMap<AuthorViewModel, Author>();
            Mapper.CreateMap<BookViewModel, Book>();

            //convert view objects to model objects
            Book book = Mapper.Map<BookViewModel, Book>(bookv);
            List<Author> authors = Mapper.Map<List<AuthorViewModel>, List<Author>>   (bookv.Authors.ToList());

            book.Authors.Clear();
            db.Books.Attach(book);

            foreach (Author a in authors) { db.Authors.Attach(a); }

            book.Authors.Clear();

            foreach (Author a in authors) { book.Authors.Add(a); }

            db.ObjectStateManager.ChangeObjectState(book, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:41:30.513

您是否尝试`db.Books.Attach(book)`过在`db.Authors.Attach(a)`循环之前调用？

另外，您是否尝试将这本书添加给作者？喜欢`a.Books.Add(book);`吗？

哦，

```
db.Books.Attach(book);
foreach (Author a in book.Authors)
{
    db.Authors.Attach(a);
    a.Books.Add(book);
} 
```

# java - Java，如何停用夏令时？

> ID：11355022
> 
> 赞同：3
> 
> 时间：2012-07-06T02:17:43.133
> 
> 标签：java, web-services, date, servlets, dst

埃及没有更多的夏令时，我正在服务器中制作一个网络应用程序，并试图将时间更改为埃及时间，它有效，但是在夏令时模式下，我该如何停用它！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T02:37:20.090

您不能在 JVM 中关闭夏令时。每个时区都使用偏移量进行编码，以及是否应用夏令时（如果是，则在哪些日期之间）。

您可以通过以下方式检查：

```
TimeZone.getDefault().useDaylightTime();
TimeZone.getDefault().inDaylightTime( new Date() ); 
```

但是，您可以使用 TZUpdater 工具更新 JDK 安装中的时区文件：

[http://www.oracle.com/technetwork/java/javase/downloads/tzupdater-download-513681.html](http://www.oracle.com/technetwork/java/javase/downloads/tzupdater-download-513681.html)

PS：这是引入埃及更改的时区文件的修订版。此后又进行了 10 次更新。

版本 JRE 版本介绍 TzUpdaterVersion 描述

tzdata2011g 1.4.2_33 5.0u31 6u26 7 1.3.39 更改埃及今年的夏令时规则以放弃夏令时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T03:11:29.463

与马特的回答相关，使用 Java 1.6.0_31：

```
Date now = new Date();

TimeZone zoneEET = TimeZone.getTimeZone("EET"); // Traditionally used for Egypt
System.out.println(zoneEET.getDSTSavings());  // 1h for DST
System.out.println(zoneEET.getRawOffset());  // GMT+2
System.out.println(zoneEET.inDaylightTime(now)); // true
TimeZone.setDefault(zoneEET));
System.out.println(now);
System.out.println("");

TimeZone zoneEgypt = TimeZone.getTimeZone("Egypt"));
System.out.println(zoneEgypt.getDSTSavings()); // no DST
System.out.println(zoneEgypt.getRawOffset()); // GMT+2
System.out.println(zoneEgypt.inDaylightTime(now)); // false
TimeZone.setDefault(zoneEgypt));
System.out.println(now); 
```

所以似乎从 1.6.0_26 开始有一个名为“埃及”的“特殊”区域，没有 DST。

# c# - C# Facebook SDK：如何

> ID：11355024
> 
> 赞同：1
> 
> 时间：2012-07-06T02:17:52.067
> 
> 标签：c#, wpf, facebook, sdk, desktop

我试图找到以下问题的答案至少一个小时，但没有成功。我有 WPF 项目（C#），我有 webBrowser 控件来导航到我的 Facebook 页面[http://www.facebook.com/TennisHelper](http://www.facebook.com/TennisHelper)，我想做接下来的几件事：

1.  我想通过在我的应用程序中创建包含电子邮件和密码的用户设置来避免登录，但我不知道如何使用 C# Facebook SDK 来做到这一点，

2.  我想让我的用户能够通过 textBox 控件在该页面上发布文本帖子，

3.  我想让我的用户能够将照片从他的计算机直接发布到该页面，但不创建新相册。只是为了在页面墙上发布图像。

我在谷歌上搜索所有这些问题，但没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:49:08.407

让我知道您的实际要求。我认为您的第一个要求是在您的网站登录页面中添加一个 facebook 登录（或使用 facebook 页面注册）按钮。

step1：您需要在 facebook 上注册一个新的 facebook 应用程序。第 2 步：安装 facebook c# sdk。您可以手动下载 zip 文件或使用 nuget 安装它。我推荐第二个选项。我使用的是 c# sdk 5.4.1[什么是 nuget？](http://nuget.codeplex.com/)[如何使用 nuget 安装软件包？](http://csharpsdk.org/) 第 3 步：现在您可以将名称空间 facebook 添加到页面第 4 步：在登录页面（比如 login.aspx）中插入一个登录按钮（只是一个带有文本登录的按钮）。让它成为按钮 1 第 5 步：单击按钮重定向到另一个页面（让 login1.aspx）这里是登录 1 的示例代码

使用脸书；//

```
 FacebookOAuthClient fb = new FacebookOAuthClient();
    UriBuilder red = new UriBuilder("www.example.com/Login1.aspx");
    protected void Page_Load(object sender, EventArgs e)
    {

        string appid = "{your app id}";
        string appsecret = "{your app secret}";
        string permissions = "publish_stream";

       if(Request.QueryString["code"] == null)
        {

            try
            {

            Response.Redirect("https://www.facebook.com/dialog/oauth?client_id=" + appid + "&redirect_uri=" + red.Uri.ToString() + "&scope=" + permissions +"&state=djfjfdjj");
            }
            catch (Exception b)
            {

                Label1.Text = b.ToString();
            }
            }
        else
        {
            try
            {

                FacebookOAuthClient cl = new FacebookOAuthClient();

                cl.RedirectUri = red.Uri;
                cl.AppId = appid;
                cl.AppSecret = appsecret;

             dynamic result = cl.ExchangeCodeForAccessToken(Request.QueryString["code"]);
                 Label1.Text = Convert.ToString(result);
              if (result["access_token"] != null)
                 {
                     Session["access_token"] = result["access_token"].ToString();//Now you have access token

                     Response.Redirect("Welcome.aspx");//replace welcome.aspx

                 }
                 else
                 {
                     Label1.Text = "Unable to authenticate\n Please try again later";
                 }
            }
            catch(Exception b)
            {
                Label1.Text = b.ToString();

            }
        }

    } 
```

现在您已经在会话中保存了访问令牌。

用于获取客户的基本信息

```
dynamic me=fb.Get("\me"); 
```

它包括当前用户的名字、姓氏、电子邮件地址、位置、图像 url 等。现在您可以使用此电子邮件或名称来验证您的用户或注册新用户等（由您决定）。

在该页面上发布是可能的，但很困难[如何使用 Facebook C# SDK 在 Facebook 页面上发布](https://stackoverflow.com/questions/4361561/how-can-i-use-the-facebook-c-sharp-sdk-to-post-on-facebook-pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:47:38.077

您应该在 Facebook 上注册一个应用程序才能使用 Facebook 登录。导航到 [http://developers.facebook.com](http://developers.facebook.com)

创建一个应用程序。您将获得一个应用程序 ID 和应用程序机密。将其用作 appid,appsecret

# html - 带有标签的 URL 在 Firefox 中滚动，而不是 Safari、Chrome

> ID：11355032
> 
> 赞同：0
> 
> 时间：2012-07-06T02:19:19.100
> 
> 标签：html, wordpress, url

我有一些链接，当您单击它时，会将您带到另一个页面并附加一个哈希以滚动到该页面上的某个 div，格式如下：[http://domain.com#respond](http://domain.com#respond)

这在 Firefox 中按预期工作，但 Safari 和 Chrome 删除了哈希并保留在页面顶部。这是我的页面： http: [//katielopezphotography.com/blog/](http://katielopezphotography.com/blog/)

点击每页底部的“添加评论”。它应该加载单个帖子并滚动到评论部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T07:32:24.637

您的问题是由于加载图像缓慢造成的。我对 jQuery 选项卡中的锚点有同样的问题。浏览器正确地转到该锚点，但随后图像正在加载并且浏览器不会再次转到该锚点。正如我所见，您的博客上有 jQuery，一个简单的解决方案是：

```
<script>
$(window).load(function() {
    if (window.location.hash != '') {
        window.location.hash = window.location.hash;
    }
});
</script> 
```

此代码将在 dom 和图像加载并转到特定锚点后触发。

# javascript - 为什么 jQuery 不注册我的点击？

> ID：11355035
> 
> 赞同：0
> 
> 时间：2012-07-06T02:19:48.727
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:25:11.917

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T02:27:21.977

由于元素是动态生成的，因此您需要在方法中使用委托`on()`或创建文字 jQuery 对象并添加点击事件。

```
$('closestParent').on('click', 'a', function(){ ... })

// OR

var $link = $('<a href=\'#\'>blah2</a>').click(function(){ ... })
$link.prependTo('#placeholder') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:25:37.740

这是因为您需要将点击委托给父元素。如果您使用的是 1.7+，请使用[.on](http://api.jquery.com/on/)，或者如果您使用的是 1.6 或更低版本，则可以使用 .delegate()。当 dom 准备好时，该元素不存在，因此您需要将事件[委托](http://api.jquery.com/delegate/)给父元素。这意味着您可以使用`$(document)`或使用任何已经存在的父元素

```
$(document).on("click","a", function () {  //<-- this allows for the event to bubble up to the document in this case
        alert('clicked');
});

$(document).delegate("a","click", function () {
        alert('clicked');
}); 
```

# java - java.lang.OutOfMemoryError，什么时候回收内存？

> ID：11355036
> 
> 赞同：0
> 
> 时间：2012-07-06T02:19:55.387
> 
> 标签：java, out-of-memory

一旦抛出此异常，是否是导致此异常的对象内存不足？它会立即发生吗？

换句话说，如果我将对象添加到列表中，在某些时候这将不再发生，并且会引发 OOM 错误。到时候，名单本身有什么事情吗？

```
java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:23:00.987

当无法创建新对象时抛出此错误。当前对象将继续存在。

但是，由于此类错误的性质，当前代码将停止执​​行，并且很可能当前对象将很快被垃圾收集。它仅取决于代码的结构以及引用是否仍保留在您的对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:23:01.483

从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/OutOfMemoryError.html)：

> 当 Java 虚拟机因为内存不足而无法分配对象时抛出，并且垃圾收集器无法提供更多内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:24:22.900

根据[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)， OutOfMemoryError 是：

> 当 Java 虚拟机因为内存不足而无法分配对象时抛出，并且垃圾收集器无法提供更多内存。

因此，一旦 JVM 发现它没有足够的堆空间来为您尝试创建的新对象分配内存，就会发生这种情况。所以对象永远不会被创建，因为你没有足够的内存。

# filemaker - 仅在有效时复制所有 Filemaker 门户行

> ID：11355037
> 
> 赞同：0
> 
> 时间：2012-07-06T02:20:06.193
> 
> 标签：filemaker

我想创建一个仅从记录中复制有效门户行的脚本。

IE。Sample Request 是主要记录 Sample 颜色是关系 (SampleNumberID) 即。颜色 1、颜色 2、颜色 3、颜色 4

如果输入了所有 4 行，我可以得到这个工作，但是如果有 2 个颜色条目，它将复制两次以每次填充 4 个门户。

任何帮助都会很棒，谢谢。

当前脚本的图像适用于 4 种颜色方式，但是如果只输入一种颜色，它将复制相同的颜色 4 次。

[http://www.coquet.com.au/wp-content/Script.png](http://www.coquet.com.au/wp-content/Script.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:09:50.913

这是我的做法，我将使用门户行关系转到相关记录。转到第一条记录，遍历所有记录并复制每个记录，然后返回父记录。所以它看起来像这样：

```
Go to Related Record [Show only related records; From table: "Sample Request"]
Go to Record/Request/Page [First]
Loop
    Duplicate Record/Request []
    Set Field [ByCoulor::StyleNumberID; GetNextSerialValue(Get(FileName); "Sample Request")]
    Go to Record/Request/Page [Next; Exit after last]
End Loop
Go to Layout [original layout] 
```

作为旁注，您似乎可以将字段 StyleNumberID 设置为自动输入序列号，因此您不必手动设置它。

# joomla2.5 - 在 Joomla 2.5 中激活 SEO 设置后出错

> ID：11355039
> 
> 赞同：0
> 
> 时间：2012-07-06T02:20:11.847
> 
> 标签：joomla2.5

我正在为 Joomla 2.5 使用 Shape5 Corporate Response 模板

为了让我激活 SEO freidnly 网站，我必须： 1- 将 htaccess.txt 更改为 .htaccess 2- 在全局配置中将搜索引擎友好 URL 从否更改为是 3- 将使用 URL 重写从否更改为是

之后模板运行，但我创建的菜单不起作用，当我点击它时，它说：

> 未找到
> 
> 在此服务器上找不到请求的 URL /联系人。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

我已经做了这个测试： [http ://docs.joomla.org/How_to_check_if_mod_rewrite_is_enabled_on_your_server](http://docs.joomla.org/How_to_check_if_mod_rewrite_is_enabled_on_your_server)

并且我的 mod 重写已启用。

我还在 htaccess 中将“# RewriteBase /”编辑为“RewriteBase /”，但没有运气。

这是我的htaccess：

```
> # @package        Joomla
> # @copyright  Copyright (C) 2005 - 2012 Open Source Matters. All rights reserved.
> # @license        GNU General Public License version 2 or later; see LICENSE.txt
> ##
> 
> ##
> # READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE!
> #
> # The line just below this section: 'Options +FollowSymLinks' may cause problems
> # with some server configurations.  It is required for use of mod_rewrite, but may already
> # be set by your server administrator in a way that dissallows changing it in
> # your .htaccess file.  If using it causes your server to error out, comment it out (add # to
> # beginning of line), reload your site in your browser and test your sef url's.  If they work,
> # it has been set by your server administrator and you do not need it set here.
> ##
> 
> ## Can be commented out if causes errors, see notes above. Options +FollowSymLinks
> 
> ## Mod_rewrite in use.
> 
> RewriteEngine On
> 
> ## Begin - Rewrite rules to block out some common exploits.
> # If you experience problems on your site block out the operations listed below
> # This attempts to block the most common type of exploit `attempts` to Joomla!
> #
> # Block out any script trying to base64_encode data within the URL. RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
> # Block out any script that includes a <script> tag in URL. RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
> # Block out any script trying to set a PHP GLOBALS variable via URL. RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
> # Block out any script trying to modify a _REQUEST variable via URL. RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
> # Return 403 Forbidden header and show the content of the root homepage RewriteRule .* index.php [F]
> #
> ## End - Rewrite rules to block out some common exploits.
> 
> ## Begin - Custom redirects
> #
> # If you need to redirect some pages, or set a canonical non-www to
> # www redirect (or vice versa), place that code here. Ensure those
> # redirects use the correct RewriteRule syntax and the [R=301,L] flags.
> #
> ## End - Custom redirects
> 
> ##
> # Uncomment following line if your webserver's URL
> # is not directly related to physical file paths.
> # Update Your Joomla! Directory (just / for root).
> ##
> 
> # RewriteBase /
> 
> ## Begin - Joomla! core SEF Section.
> # RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
> #
> # If the requested path and file is not /index.php and the request
> # has not already been internally rewritten to the index.php script RewriteCond %{REQUEST_URI} ^GET
> # and the request is for something within the component folder,
> # or for the site root, or for an extensionless URL, or the
> # requested URL ends with one of the listed extensions RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$
> [NC]
> # and the requested path and file doesn't directly match a physical file RewriteCond %{REQUEST_FILENAME} !-f
> # and the requested path and file doesn't directly match a physical folder RewriteCond %{REQUEST_FILENAME} !-d
> # internally rewrite the request to the index.php script RewriteRule .* index.php [L]
> #
> ## End - Joomla! core SEF Section. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:02:01.533

我找到了解决方案，只需在您的 .htaccess 文件中添加替换此代码：

```
AddHandler x-httpd-php5 .php
AddHandler x-httpd-php .php4
##
# @version $Id: htaccess.txt 14401 2010-01-26 14:10:00Z louis $
# @package Joomla
# @copyright Copyright (C) 2005 - 2010 Open Source Matters. All rights reserved.
# @license http://www.gnu.org/copyleft/gpl.html GNU/GPL
# Joomla! is Free Software
##

#####################################################
#  READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
#
#####################################################

##  Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

#
#  mod_rewrite in use

RewriteEngine On

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Send all blocked request to homepage with 403 Forbidden error!
RewriteRule ^(.*)$ index.php [F,L]
#
########## End - Rewrite rules to block out some common exploits

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
########## End - Joomla! core SEF Section 
```

# java - 如何监听端口上的传入数据包？

> ID：11355043
> 
> 赞同：0
> 
> 时间：2012-07-06T02:20:58.057
> 
> 标签：java, port, serversocket

我想监听端口 19132 上的传入数据包并在它们到来时将它们打印出来，但到目前为止我的代码根本没有打印任何东西。有一台服务器通过端口 19132 将数据包转发到我的计算机，并且该端口已打开并启用，但仍然没有打印任何内容。

```
public static void listenToPort(){
    try{
        ServerSocket serverSocket = new ServerSocket(19132);
        Socket socket = serverSocket.accept();
        BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        while(true){
            try{
                System.out.println(in.readLine());
            }
            catch(IOException e){
                System.out.println("Connection to server lost!");
                System.exit(1);
                break;
            }
        }
    }
    catch(IOException e){
        System.out.println(e.getMessage());
    }
} 
```

在服务器端有信息被发送，但是客户端程序（这个脚本）没有收到任何东西，这是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:28:35.517

您正在阅读行，而不是“数据包”。如果发送到此端口的数据不包含换行符，`readLine()`将永远阻塞，或者直到对等方关闭连接。

另一方面，当它*确实*读取某些内容或 EOS 时，您的代码将永远旋转打印`null`，因为您没有检查是否`readLine()`返回 null，此时您必须关闭套接字并退出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:33:48.453

更不用说，System.exit 完全有可能没有给控制台足够的时间来刷新它的输出（我不能 100% 确定 System.exit 是否会导致 System.exit 刷新。和 System.err）。

为什么不将调试器附加到您的服务器进程，看看它是否甚至超过了 in.readLine()？正如其他海报中提到的那样，如果您不发送换行符， in.readLine() 会阻塞，直到您发送。

其次，您不应该真正使用 System.exit。在大多数情况下，这是一种糟糕的形式，并导致人们想知道为什么应用程序会随机退出。如果你想退出一个应用程序，你应该允许代码返回到 main() 方法，如果需要，你可以从那里执行 System.exit。

# ruby-on-rails - 可以指定belongs_to 或has_many 关系对象返回哪些字段？

> ID：11355047
> 
> 赞同：0
> 
> 时间：2012-07-06T02:21:25.933
> 
> 标签：ruby-on-rails, activerecord

一个联系人有一个分配给他们的用户：

```
class Contact < ActiveRecord::Base
    ...
    belongs_to :user
    ...
end 
```

用户模型有一个字段，我想在任何时候从数据库返回一个或多个用户对象时排除。使其工作的方法之一是添加默认范围：

```
class User < ActiveRecord::Base
    ...
    has_many :contacts
    ...

    default_scope select((column_names - ['encrypted_password']).map { |column_name| "`#{table_name}`.`#{column_name}`"})
end 
```

所以在控制台中，如果我这样做：

```
User.first 
```

选择语句和结果集不包括“encrypted_pa​​ssword”。

但是，如果我这样做：

```
c = Contact.includes(:user).first

c.user 
```

他们是这样。在这种情况下，不会应用 User 模型的默认范围，并显示“encrypted_pa​​ssword”字段。

所以我的问题是为什么？此外，是否有一种干净的方法来指定应在相关对象上返回哪些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:54:43.673

您应该能够在 belongs_to 关系上使用 :select 选项。像这样的东西：

```
class Contact < ActiveRecord::Base
  ...
  belongs_to :user, :select => [:id, :first_name, :last_name, :email]
  ...
end 
```

# sql - 在rails中将一个表的内容复制到另一个表中

> ID：11355051
> 
> 赞同：0
> 
> 时间：2012-07-06T02:22:09.257
> 
> 标签：sql, ruby-on-rails, activerecord

我在 rails 有两个表..
pending_products
processes_products

在待处理产品中有一个状态字段。当一条记录被添加到待处理表（或更新）时，状态设置为 1。当我想处理时，我将所有 1 更改为 2，然后选择所有 2。当我处理完所有记录后，我将所有 2 更改为 1000 ..（似乎是一个不错的数字可以说完成了）。

（如果您想知道为什么我设置为 2，那么如果在我处理时有提要进入，它不会更新该记录，因为提要已将状态设置为 1）

在将所有 2 更改为 1000 之前，我想插入到已处理的表中。

现在我可以在纯 SQL 中进行“插入”，但我想知道是否有 Rails 方法可以做到这一点。比原始 SQL 更优雅的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:48:58.617

这样的事情可能对你有用：

```
class PendingProduct < ActiveRecord::Base
  OUTSTANDING = 1
  PROCESSING = 2
  PROCESSED = 1000

  scope :outstanding, where(status: OUTSTANDING)

  def process
    transaction do
      self.status = PROCESSING
      self.save!

      # do whatever processing you need to do...

      # ...then create your ProcessedProduct record...
      ProcessedProduct.create!( ... )

      # ...and finally update this PendingProduct
      self.status = PROCESSED
      self.save!
    end
  end
end

PendingProduct.outstanding.each(&:process) 
```

这可以说比原始 SQL 更“优雅”，但它保证会更慢。

# facebook - 新的@facebook.com 电子邮件 - API Howto？

> ID：11355054
> 
> 赞同：1
> 
> 时间：2012-07-06T02:22:35.210
> 
> 标签：facebook, api, sdk, facebook-opengraph

随着所有用户都可以使用新的@facebook.com 电子邮件，我想知道是否可以进行 Graph API 调用来获取用户的 facebook 电子邮件地址？

从我所见，您可以简单地获取用户别名（如我们在 URL 中看到的那样）并点击@facbook.com 以获取电子邮件。直到我遇到一个朋友，他的 FB ID 不是他账户上列出的别名。

我通过使用 myid@facebook.com 和 myalias@facebook.com 向自己发送电子邮件来测试这一点。发送别名时 ID 发送失败，并且接收时没有问题。

想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T00:53:16.677

有些人可以同时收到来自 ID@facebook.com 和 ALIAS@facebook.com 的邮件，有些人无法收到 ID@facebook.com 并显示邮件错误，说它不在他们的地址簿中。

我在这里看不到任何图案，它是随机的。不确定这是错误还是规范。

# optimization - 通过在图上移动集合来最小化空间使用

> ID：11355061
> 
> 赞同：1
> 
> 时间：2012-07-06T02:23:09.500
> 
> 标签：optimization, graph, complexity-theory

我有一个完整的方向图。在每条边上都有一组数字。该集合默认保存在源节点上。请注意，每个号码仅保存一次。例如，如果一个节点有两条边，集合 {1,2,3} 和 {2,3,4} 它只需要 4 个空格。现在，我们可以选择一条边来将集合从源移动到目标，但会损失一个空间。问题是哪个设置移动到另一侧以获得最小的空间使用。

例如，如果我有以下图表

```
1->2: {123}
1->3: {456}
2->1: {}
2->3: {456}
3->1: {}
3->2: {123} 
```

原始空间使用量为 12。但如果我将所有集合移动到目的地，则使用空间为 3+3=6，其中 4 个空间损失结果将是 10，这比原始设置要好。

有人对这个问题有任何提示吗？这类似于 NP 完全问题吗？

# javascript - 当我将 javascript 代码放入外部 Site.js 文件时，Ajax 页面方法不起作用

> ID：11355062
> 
> 赞同：1
> 
> 时间：2012-07-06T02:23:10.753
> 
> 标签：javascript, asp.net, ajax

```
function newedito() {
    var localTime = new Date();
    var year = localTime.getFullYear();
    var month = localTime.getMonth() + 1;
    var date = localTime.getDate();
    var hours = localTime.getHours();
    var minutes = localTime.getMinutes();
    var seconds = localTime.getSeconds();
    var x = document.getElementById('drdned').value;
    var y = document.getElementById('txtned1').value;
    var z = document.getElementById('txtned2').value;
    var v = "Date : " + date + "-" + month + "-" + year + " Time : " + hours + ":" + minutes + ":" + seconds;
    PageMethods.Ned(x, y, z, v, OnCallSumComplete, OnCallSumError);
    function OnCallSumComplete(result) {
        document.getElementById('updater').innerHTML = result;
    }
    function OnCallSumError() {
        document.getElementById('updater').innerHTML = "Error";
    }
}

<script src="Scripts/Site.js" language="javascript" type="text/javascript"></script> 
```

当我在我的 aspx 页面中放置上面编写的 javascript 时，一切正常，但是当我将该函数代码放在外部 Site.js 文件中时，页面方法被调用但 OnCallSumComplete() 和 OnCallSumError() 不起作用，它们没有更改 div 的 html （“更新程序”）。这里的结果是一个字符串，它要么是“success msg”，要么是“exception msg”。请帮帮我。

整个 aspx 文件非常大，在这里显示，这是包含 id="updater" 的 div 的 div。

```
<div id="popUpDiv" style="display:none; border:10px solid rgba(0, 0, 0, .8); box-shadow: 0px 0px 200px 200px Black; position:fixed; top:10%; left:20%; right:20%; height:80%; min-width:60%; z-index: 10002;">
    <div id="control" style=" background-color:rgba(0, 0, 0, .8); color:White; height:4%;">
        <div style="color:#01A9DB; float:left; font-weight:700;">OWPOST-ECLIPSE</div>
        <div style="position:static; right:0px; top:0px; float:right;">
            <a style="color:White;" href="#" onclick="togglePopUp('popUpDiv'); return false;">EXIT</a>
        </div>
    </div>
    <div id="updater" style=" background-color:White; overflow:scroll; height:96%;">
    </div>
</div> 
```

这是一个弹出 div，在单击按钮时显示，该按钮使用服务器端的 ajax 在其中显示一个表单，单击提交按钮函数 newedito() 应将所有数据提交给 pagemethod Ned()，该方法会将数据添加到数据库但是当我将 js 代码放在外部文件中时，数据被添加到数据库中，但是 newedito() 方法没有显示返回字符串。我应该告诉你，我有很多表单，所以我准备了他们的 html 并将它们保存在数据库中，并根据需要显示表单 'updater' div 并由 javascript 函数调用。请帮忙。

我将 Site.js 包含在我的母版页中。

```
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head runat="server">
        <title>THE OPEN WEB POST</title>
        <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
        <asp:ContentPlaceHolder ID="HeadContent" runat="server">
        </asp:ContentPlaceHolder>
        <style type="text/css">
    .style1
    {
        font-size:x-large;
        color: #FFFFFF;
    }
    .style2
    {
        text-decoration: none;
        color:White;

    }
    .style3
    {
        color: #01A9DB;
    }
    #mynew
    {
    }
</style>
<script src="Scripts/Site.js" language="javascript" type="text/javascript"></script>
    </head>
    <body>
        <form id="mynew" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
        </asp:ScriptManager>
        <div class="page" style="width: 100%; min-width:960px;"> 
```

我认为母版页的这一部分可能会对您有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:30:46.477

尝试通过脚本管理器注册您的脚本，如下所示。我猜脚本文件的路径在您的页面中未正确解析。

```
<asp:ScriptManager ID="SM1" runat="server" EnablePageMethods="true">
  <Scripts>
    <asp:ScriptReference Path="~/Scripts/Site.js" />
  </Scripts>
</asp:ScriptManager> 
```

# powershell - 使用 PowerShell 在 MS Word 中编写表格的内容。订单不正确

> ID：11355066
> 
> 赞同：2
> 
> 时间：2012-07-06T02:24:05.060
> 
> 标签：powershell

下面是代码：

```
$objWord = New-Object -Com Word.Application

$filename = 'C:\Chicago_NewUser.doc'
$objDocument = $objWord.Documents.Open($filename)

$LETable = $objDocument.Tables.Item(1)
$LETableCols = $LETable.Columns.Count
$LETableRows = $LETable.Rows.Count

Write-output "Starting to write... "

for($r=0; $r -le $LETableRows; $r++) {
    for($c=0; $c -le $LETableCols; $c++) {
        Write-host $r "x" $c
        $content = $LETable.Cell($r,$c).Range.Text
        Write-host $content
    }
}
$objDocument.Close()
$objWord.Quit() 
```

该文档是 2003 Word 文档，带有一个表格 - 2 列和 3 行。但是打印的输出以第 3 行和第 1 列中的文本开始。

Word 文档可在此处获得：

[https://docs.google.com/document/d/1W0usG4ASsvd3PqQ20l7P8rq0hWBsYlrI0iM1S5ZcumU/edit](https://docs.google.com/document/d/1W0usG4ASsvd3PqQ20l7P8rq0hWBsYlrI0iM1S5ZcumU/edit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:06:06.480

只需从 1 开始您的索引就可以了。我还在末尾添加了一行以正确关闭 winword。

```
$objWord = New-Object -Com Word.Application

$filename = 'c:\silogix\SILOGIX.doc'
$objDocument = $objWord.Documents.Open($filename)

$LETable = $objDocument.Tables.Item(1)
$LETableCols = $LETable.Columns.Count
$LETableRows = $LETable.Rows.Count

Write-output "Starting to write... "

for($r=1; $r -le $LETableRows; $r++) {
    for($c=1; $c -le $LETableCols; $c++) {
        Write-host $r "x" $c
        $content = $LETable.Cell($r,$c).Range.Text
        Write-host $content
    }
}
$objDocument.Close()
$objWord.Quit()
# Stop Winword Process
$rc = [System.Runtime.Interopservices.Marshal]::ReleaseComObject($objWord) 
```

# java - 如何在 Eclipse 的不同项目中将字符串和 int 从一个活动传递到 Android 中的另一个活动？

> ID：11355074
> 
> 赞同：2
> 
> 时间：2012-07-06T02:25:21.447
> 
> 标签：java, android, android-intent, android-activity, bundle

我正在尝试将一组数据从项目 A 下的一个 Activity 包 a 发送到项目 B 下的另一个 Activity 包 b 以进行 Android 项目集成。

怎样修改Intent myintent = new Intent()命令才能这样实现？

下面是我的项目A代码的一部分，打包一个..

```
try {
    Intent myIntent = new Intent();
    Bundle myData = new Bundle();
    myData.putInt("cntKey", contractKey);
    myData.putInt("workTypeKey", workType);
    myData.putInt("estateIDKey", estateID);
    myData.putInt("workIDKey", workID);
    myData.putInt("blockIDKey", blockID);
    myData.putInt("districtIDKey", districtID);
    myData.putString("estateRoomNumKey", estateRoomNumber);
    myData.putString("estateKey", estate);
    myData.putString("blockKey", block);
    myIntent.putExtras(myData);
    startActivityForResult(myIntent,0);
} catch (Exception e) {
    Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_LONG).show();
} 
```

* * *

现在我正在尝试将一些数据从一个 Activity 、 package a 、 project A 传递到另一个 Activity 、 package b 、 Project B

项目 A 本身就是一个图书馆项目。

如果使用 Indents 和 Bundle，我应该从什么开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:43:13.333

我认为您需要使用的是广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:23:43.213

如果您也可以修改项目 B，我会选择

```
myIntent = new Intent("some.very.unique.id.that.you.define") 
```

然后在包 B 中活动 B 的 Android 清单中为该 ID声明一个[意图过滤器。](http://developer.android.com/guide/components/intents-filters.html#ifs)

第三方应用程序的其他活动也可以注册相同的意图过滤器，因此如果您要传输敏感数据，请不要使用此解决方案。在这种情况下，完整的解决方案可能是[AIDL](http://developer.android.com/guide/components/aidl.html)。

# java - Primefaces：组件 DataTable syncColumnWidths 的异常

> ID：11355075
> 
> 赞同：1
> 
> 时间：2012-07-06T02:25:36.173
> 
> 标签：java, jsf, primefaces

我在 PrimeFaces 数据表中有问题，

在页面 xhtml，我有两个用于 SQL 和函数的单选按钮，然后我有一个输入文本来选择我想要调用的函数，例如“从 t_tenant 中选择 *”

这是页面 xhtml 的代码：

```
 <p:panel>

        <p:commandButton value="#{piece['org.jlego.commonui.run']}" actionListener="#{dbQueryController.run}" ajax="true" update="queryEditor grid growl exportButton panelMessage" />
        <p:commandButton value="#{piece['org.jlego.commonui.clear']}" update="queryEditor panelMessage grid  growl exportButton" actionListener="#{dbQueryController.clear}"/>

        <br/>

        <h:panelGrid columns="2">
            <h:outputText value="#{piece['org.jlego.commonui.type']}" />
            <h:selectOneRadio id="queryType" value="#{dbQueryController.type}">
                <f:selectItem itemValue="#{piece['org.jlego.commonui.sql']}" itemLabel="#{piece['org.jlego.commonui.sql']}" />
                <f:selectItem itemValue="#{piece['org.jlego.commonui.function']}" itemLabel="#{piece['org.jlego.commonui.function']}" />
            </h:selectOneRadio>
        </h:panelGrid>

        <p:inputTextarea id="queryEditor" style="width: 800px; height: 200px; font-family: Courier" 
           value="#{dbQueryController.query}" />

        <p:panel id="panelMessage">
            <h:outputText value="#{dbQueryController.message}" />
        </p:panel>

        <br/>
 <...><...>
<p:dataTable id="grid" value="#{dbQueryController.queryList}" var="item"
                        scrollable="true" scrollWidth="1000" scrollHeight="300" resizableColumns="true">

                <p:columns value="#{dbQueryController.columns}" var="column" columnIndexVar="colIndex">  
                    <f:facet name="header">  
                        #{column.header}  
                    </f:facet>  

                    #{item[column.property]}  
                </p:columns>          
       </p:dataTable>
    </p:panel> 
```

这是控制器的代码：

```
@Component
@Scope("view")
public class DbQueryController extends AbstractController {

private static final Logger log = LoggerFactory.getLogger(DbQueryController.class);

@Autowired
private ServiceContext serviceContext;
private String type;
private String query;
private String message;
private List<JSONObject> queryList;

private String columnTemplate = "";
private List<ColumnModel> columns;

public DbQueryController() {
    type = "SQL"; // Default value
    queryList = new ArrayList<JSONObject>();
    columns = new ArrayList<ColumnModel>();
}

@PostConstruct
private void init() {

}

 /**
 * When "Run" button clicked
 */
public String run() {
    log.debug("run() called");

    // Validate Query Must Be Filled
    if (query == null || query.equals("")){
        FacesUtils.addErrorMessage(getLabel("org.jlego.commonui.noStatementQueryFound"));
        return "";
    }

    queryList = new ArrayList<JSONObject>();
    message = "";

          JSONObject input = new JSONObject();
    input.put("type", type);
    input.put("query", query);

    try {
        JSONObject output = serviceContext.executeService("jlego#getResultQuery", input);
        JSONObject result = JSONObjectUtil.getResult(output);
        String status = JSONObjectUtil.getResultStatus(output);

        if (status != null && status.equals(GeneralConstants.OK)) {
            queryList = (List<JSONObject>) JSONObjectUtil.convertToArray(result.get("queryList"));
            if (queryList == null) {
                queryList = new ArrayList<JSONObject>();
            }
            message = queryList.size() + " data found";
            if (result.get("columns") instanceof JSONArray) {
                JSONArray arr = (JSONArray) result.get("columns");
                columnTemplate = "";

                StringBuilder build = new StringBuilder();
                for (int i = 0; i < arr.size(); i++) {
                    build.append(arr.get(i)).append(" ");
                }
                columnTemplate = build.toString();

            } else if (result.get("columns") instanceof String) {
                String str = (String) result.get("columns");
                columnTemplate = str;
            }

            createDynamicColumns();

        } else if (status != null && status.equals(GeneralConstants.FAIL)) 
   {
            FacesUtils.addErrorMessage((String) result.get("message"));
        }
    } catch (Exception e) {
        e.printStackTrace();
        FacesUtils.addErrorMessage(e.getMessage());
    }
    return "";
} 

  /**
 * When "Clear" button clicked
 */
public void clear() {
    setQuery("");
    queryList = null;
    columnTemplate = "";
    columns.clear();
    message = "";

}
<....>

/**
 * @return the queryList
 */
public List<JSONObject> getQueryList() {
    return queryList;
}

/**
 * @return the columnTemplate
 */
public String getColumnTemplate() {
    return columnTemplate;
}

 public List<ColumnModel> getColumns() {
    return columns;
}

static public class ColumnModel implements Serializable {

    private String header;
    private String property;

    public ColumnModel(String header, String property) {
        this.header = header;
        this.property = property;
    }
   <...>
 private void updateColumns() {
    // reset table state
    UIComponent table = FacesContext.getCurrentInstance().getViewRoot().findComponent(":rootform:grid");
    table.setValueExpression("sortBy", null);

    // update columns
    createDynamicColumns();
}

public void createDynamicColumns() {
    log.debug(columnTemplate);

    String[] columnKeys = columnTemplate.split(" ");
    columns.clear();

    for (String columnKey : columnKeys) {
        String key = columnKey.trim();
        columns.add(new ColumnModel(columnKey, columnKey));
    }

} 
```

问题是，当我填写输入文本查询以选择诸如“select * from t_tenant”之类的函数 SQL 并单击“运行”按钮时，已显示数据表，但表的网格无法显示数据库中的全部数据，我得到了异常.

这是我得到的异常消息：

```
Jul 6, 2012 9:13:14 AM com.sun.faces.context.PartialViewContextImpl processPartial
INFO: java.lang.NullPointerException
java.lang.NullPointerException
at org.primefaces.component.datatable.DataTable.syncColumnWidths(DataTable.java:1031)
at org.primefaces.component.datatable.DataTableRenderer.decode(DataTableRenderer.java:60)
at javax.faces.component.UIComponentBase.decode(UIComponentBase.java:787)
at javax.faces.component.UIData.processDecodes(UIData.java:1162)
at org.primefaces.component.datatable.DataTable.processDecodes(DataTable.java:554)
at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:506)
at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
at javax.faces.component.UIData.visitTree(UIData.java:1411)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
at javax.faces.component.UIForm.visitTree(UIForm.java:344)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:376)
at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:252)
at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:931)
at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
at org.jlego.web.WebLoginSessionFilter.doFilter(WebLoginSessionFilter.java:95)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

如果我使用的是 primefaces 3.3.1

谢谢你的帮助

问候

# c1-cms - 在 Composite c1 2.1 版中添加自定义页面

> ID：11355077
> 
> 赞同：1
> 
> 时间：2012-07-06T02:25:52.510
> 
> 标签：c1-cms

我正在开发一个需要导入 Excel 电子表格的功能的网站。这个网站的管理员要求我们有一个定制设计的复合页面，让他简单地选择一个 Excel 表并上传。

有没有办法在 c# 中构建自定义页面并合并或添加到复合中？

PS - 他们使用的是复合版本 2.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:54:10.270

在[http://docs.composite.net/Data/Adding-pages-with-Csharp](http://docs.composite.net/Data/Adding-pages-with-Csharp)上有使用 C# 将页面添加到 Composite C1 的指南。

但我建议您使用 C1 函数而不是生成新页面来处理这种情况（来自外部来源的动态内容，这里是 Excel 工作表）。像往常一样创建页面，但在该页面上托管 C1 函数。让这个 C1 函数生成所需的任何动态内容。

您可以使用多种语言（ASP.NET UserControls、Razor、MVC、XSLT、输出 html 的原始 C#）创建 C1 函数。选择您最熟悉的技术。

相关链接：

*   [http://users.composite.net/Functions/GuideToC1Functions/What-is-a-C1-Function](http://users.composite.net/Functions/GuideToC1Functions/What-is-a-C1-Function)
*   [http://docs.composite.net/ASP-NET/Razor](http://docs.composite.net/ASP-NET/Razor)
*   [http://docs.composite.net/ASP-NET/Web-Forms](http://docs.composite.net/ASP-NET/Web-Forms)
*   [http://docs.composite.net/ASP-NET/MVC](http://docs.composite.net/ASP-NET/MVC)
*   [http://docs.composite.net/XSLT/First-XSLT-Function](http://docs.composite.net/XSLT/First-XSLT-Function)
*   [http://docs.composite.net/ASP-NET/CSharpFunctions](http://docs.composite.net/ASP-NET/CSharpFunctions)

# java - address.isReachable 不会发现网络上的所有节点

> ID：11355085
> 
> 赞同：1
> 
> 时间：2012-07-06T02:26:49.097
> 
> 标签：java, networking, ping

我已经将我的代码精简到最基本的部分，它非常简单直接。

我有以下代码：

```
public ArrayList<Node> getNodes() throws IOException
{
    ArrayList<Node> nodes = new ArrayList<Node>();

    StringBuffer root = new StringBuffer(InetAddress.getLocalHost().getHostAddress());
    while(!root.toString().endsWith("."))
        root.deleteCharAt(root.length() - 1);
    //^^ this code gets the ip, for ex 127.0.0.1, and trims the last number, to make it
    //^^ 127.0.0\.  <-- see the trailing 0

    for(int host = 0;host < 256; host++)
    {
        InetAddress address = InetAddress.getByName(root.toString() + host);
        try
        {
            if(address.isReachable(500)) // pings the address
                nodes.add(new Node(address.getHostAddress(), false));
        }catch(Exception e){new Node(address.getHostAddress(), true);}
    }

    return nodes;
} 
```

这是节点类，非常简单：

```
public class Node 
{
    public Node(String address, boolean restricted)
    {
        this.address = address;
        this.restricted = restricted;
    }

    public String address;
    public boolean restricted;
} 
```

这是我的主要代码，它执行 getNodes()：

```
case 1:
    System.out.println("Searching for nodes...");
    NodeDetector node = new NodeDetector(); // this is the class
                                           //where getNodes resides
    ArrayList<Node> nodes = node.getNodes();

    Iterator<Node> it = nodes.iterator();
    while(it.hasNext())
    {
        System.out.println("Node: "+it.next().address);
    }

    System.out.println("stopped searching for nodes...");
    break; 
```

* * *

这是我的输出：

```
Searching for nodes...
Node: 00.00.17.99
Node: 00.00.17.100
Node: 00.00.17.149
Node: 00.00.17.150 <-- this is my computer
Node: 00.00.17.154
Node: 00.00.17.156
Node: 00.00.17.254
stopped searching for nodes... 
```

* * *

# 现在问题来了

我在手机上下载了一个网络节点发现工具，它可以找到至少 5 个以上的节点。我尝试更改超时值，但仍然没有运气。当我 ping 使用手机上的网络工具而不是计算机上找到的地址时，会立即收到并返回 ping。这个问题很相似，它对我有所帮助，但我仍然陷入困境：

*   [如何从 Windows 执行真正的 Java ping？](https://stackoverflow.com/questions/2448666/how-to-do-a-true-java-ping-from-windows)

我在 Mac 上运行我的工具，它似乎可以很好地处理其他 Mac、iPod 和路由器，但仅此而已。为什么我的程序无法检测到网络上的其他设备？

* * *

这是我从手机上的网络工具获得的输出：

```
00.00.17.99 <-- SMC Networks *
00.00.17.100 <-- XEROX *
00.00.17.133 <-- My Phone (Android)
00.00.17.134 <-- Intel
00.00.17.142 <-- Apple
00.00.17.149 <-- Apple *
00.00.17.150 <-- Apple * <-- this is my computer
00.00.17.154 <-- Apple *
00.00.17.155 <-- Intel
00.00.17.156 <-- Apple *
00.00.17.158 <-- Motorola Mobility
00.00.17.254 <-- Netopia * 
```

* * *

我在手机上的工具与我在计算机上编写的工具一致的地方打了一个 *。我已经运行了几次这个测试，每次在我的电脑和手机上都得到相同的输出，在测试期间没有从网络中添加或删除任何设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:22:15.447

经过几天的研究，我发现这是一个不错的解决方案：

```
try
{
    Process p1 = java.lang.Runtime.getRuntime().exec("ping -c 1 -W 250 " + address.getHostAddress());
    int returnVal = p1.waitFor();
    boolean reachable = (returnVal==0);

    if(reachable)
        nodes.add(new Node(address.getHostAddress(), false));
}catch(Exception e)
{
    new Node(address.getHostAddress(), true);
} 
```

唯一的缺点是它依赖于系统。我将是唯一一个使用这个工具的人，所以这对我来说真的没问题。

# python - Python 中的 Python：限制功能？

> ID：11355093
> 
> 赞同：6
> 
> 时间：2012-07-06T02:28:51.867
> 
> 标签：python, scripting, pylons, pyramid

> **可能重复：**
> [Python、安全、沙盒](https://stackoverflow.com/questions/3688708/python-safe-sandbox)

我正在用 Python 构建一个企业网络系统，它允许上传脚本并在服务器端运行。鉴于我已经在使用 Python 及其如此简单的语言进行开发，它似乎是一种编写脚本的好语言。但是，那里存在安全隐患，我想阻止除有限子集之外的所有函数调用。有没有我可以使用的机制或其他技术？我是否需要使用其他东西，也许是 Lua？我正在 Pyramid/Pylons 中开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:43:51.340

这是一个糟糕的主意，但只是为了让您了解该选项：

您可以使用 RegEx 清理包含 Python 代码的字符串（通过清理我的意思是您需要进行数百个恶意单元测试并大量测试卫生是否足够）以仅匹配您想要的函数调用，然后`eval()`调用字符串。

# google-drive-api - google drive sdk drive/v2/changes/get 500 错误

> ID：11355098
> 
> 赞同：1
> 
> 时间：2012-07-06T02:29:52.857
> 
> 标签：google-drive-api

如此处 [所述 https://developers.google.com/drive/v2/reference/changes/get](https://developers.google.com/drive/v2/reference/changes/get)

如果我得到[https://www.googleapis.com/drive/v2/changes/1](https://www.googleapis.com/drive/v2/changes/1)

{“错误”：{“代码”：500，“消息”：空}}

我正在使用 OAuth 2.0 游乐场。我所有其他 GET 工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:44:23.767

这是一个已知问题，我们应该尽快解决。对于那个很抱歉。不过，您可能不需要进行单独的更改，您只需从更改提要的`items`字段中读取数据即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:42:00.810

请先使用 OAuth

```
> Google Drive applications need these three values for authorization:
> 
> Client ID 
> Client secret 
> redirect URIs 
```

# ios - 在uitableview中完成的编辑通知

> ID：11355104
> 
> 赞同：0
> 
> 时间：2012-07-06T02:30:35.970
> 
> 标签：ios, uitableview

因此，我在自定义 UITableViewCell 中有一些标签，但它们是在一行中的，但是当编辑开始时，所有标签都混杂在一起。我有两个标签有一个自动调整边距，如果所有标签都小于文本标签的实际边界，它就可以工作。所以我尝试了一些事情，并认为我可以在编辑开始时通过让 tableView:canEditRowAtIndexPath 移动宽度来降低第一个文本标签的宽度，但是如果编辑完成（用户点击完成按钮）然后我永远不会收到通知无法将宽度向后移动，然后文本标签变得混乱，所有这些标签都变得混乱。我只想知道最好的方法，以免标签混乱（自动缩小/自动调整大小），然后让它们恢复到原来的位置。

在此先感谢，如果需要，我会上传一些代码，看看我到目前为止做了什么

# c++ - 调试 Python ctypes 分段错误

> ID：11355110
> 
> 赞同：11
> 
> 时间：2012-07-06T02:32:26.853
> 
> 标签：c++, python, ctypes

我正在尝试`ctypes`从特定于 Windows 的程序中移植一些 Python 代码，以链接到我的库的 Linux 端口。描述我的问题的最短 Python 代码示例如下所示。当我尝试执行它时，我`examine_arguments()`在 Python 中收到了分段错误。我在我的库中的崩溃函数调用处放置了一条`printf`语句，但它从未执行，这让我认为问题出在 ctypes 代码中。

```
import ctypes

avidll = ctypes.CDLL("libavxsynth.so")

class AVS_Value(ctypes.Structure, object):
    def __init__(self, val=None):
        self.type=ctypes.c_short(105) # 'i'
        self.array_size = 5
        self.d.i = 99

class U(ctypes.Union):
    _fields_ = [("c", ctypes.c_void_p),
                ("b", ctypes.c_long),
                ("i", ctypes.c_int),
                ("f", ctypes.c_float),
                ("s", ctypes.c_char_p),
                ("a", ctypes.POINTER(AVS_Value))]

AVS_Value._fields_ = [("type", ctypes.c_short),
                      ("array_size", ctypes.c_short),
                      ("d", U)]

avs_create_script_environment = avidll.avs_create_script_environment
avs_create_script_environment.restype = ctypes.c_void_p
avs_create_script_environment.argtypes = [ctypes.c_int]

avs_set_var = avidll.avs_set_var
avs_set_var.restype = ctypes.c_int
avs_set_var.argtypes = [ctypes.c_void_p, ctypes.c_char_p, AVS_Value]

env = avs_create_script_environment(2)
val = AVS_Value()
res = avs_set_var(env, b'test', val) 
```

我的库在其标题中有以下内容，并且执行我上面描述的纯 C 程序（调用`create_script_environment`后跟`set_var`）运行良好。查看我的库放在控制台上的日志信息，当我尝试输入`avs_set_var`.

```
typedef struct AVS_ScriptEnvironment AVS_ScriptEnvironment;
typedef struct AVS_Value AVS_Value;
struct AVS_Value {
  short type;  // 'a'rray, 'c'lip, 'b'ool, 'i'nt, 'f'loat, 's'tring, 'v'oid, or 'l'ong
               // for some function e'rror
  short array_size;
  union {
    void * clip; // do not use directly, use avs_take_clip
    char boolean;
    int integer;
    float floating_pt;
    const char * string;
    const AVS_Value * array;
  } d;
};
AVS_ScriptEnvironment * avs_create_script_environment(int version);
int avs_set_var(AVS_ScriptEnvironment *, const char* name, AVS_Value val); 
```

我尝试回溯来自 GDB 的调用，但我不明白如何解释结果，也不太了解使用 GDB。

```
#0  0x00007ffff61d6490 in examine_argument () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#1  0x00007ffff61d65ba in ffi_prep_cif_machdep () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#2  0x00007ffff61d3447 in ffi_prep_cif () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#3  0x00007ffff61c7275 in _ctypes_callproc () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#4  0x00007ffff61c7aa2 in PyCFuncPtr_call.2798 () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#5  0x00000000004c7c76 in PyObject_Call ()
#6  0x000000000042aa4a in PyEval_EvalFrameEx ()
#7  0x00000000004317f2 in PyEval_EvalCodeEx ()
#8  0x000000000054b171 in PyRun_FileExFlags ()
#9  0x000000000054b7d8 in PyRun_SimpleFileExFlags ()
#10 0x000000000054c5d6 in Py_Main ()
#11 0x00007ffff68e576d in __libc_start_main () from /lib/x86_64-linux-gnu/libc.so.6
#12 0x000000000041b931 in _start () 
```

我不知道如何解决这个问题。我查看了调用类型的详细信息，但我没有看到任何明显不正确的地方。我是否陷入任何特定于平台的类型用法？

**编辑**ctypes 模块中的 32 位与 64 位架构似乎存在问题。当我用我的库的 32 位构建和 32 位 Python 再次测试它时，它运行成功。在 64 位上，它在同一位置出现段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:05:33.003

尝试使用`c_void_p`不透明`AVS_ScriptEnvironment*`：

```
avs_create_script_environment.restype = c_void_p 
```

和：

```
avs_set_var.argtypes=[c_void_p,ctypes.c_char_p,AVS_Value] 
```

# ruby - ruby：使用哈希作为另一个哈希的默认值？

> ID：11355113
> 
> 赞同：1
> 
> 时间：2012-07-06T02:34:06.450
> 
> 标签：ruby, hash

我想使用散列作为更大散列的默认值。但我不知道如何通过外散列设置内散列的值。

```
h = Hash.new do 
  {:counter => 0}
end
h[:a][:counter] += 1
=> 1 
h[:a][:counter] += 1
=> 1
h[:a][:counter] += 1
=> 1 
h
=> {} 
```

呃，正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T02:39:45.113

如果您使用哈希[的默认值进行初始化：](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new)

```
h = Hash.new({:counter => 5}) 
```

然后您可以按照示例中的调用模式：

```
h[:a][:counter] += 1
 => 6 
h[:a][:counter] += 1
 => 7 
h[:a][:counter] += 1
 => 8 
```

或者，您可能希望使用块进行初始化，以便`:counter`每次使用新密钥时都会创建一个新的哈希实例：

```
# Shared nested hash
h = Hash.new({:counter => 5})
h[:a][:counter] += 1
 => 6 
h[:boo][:counter] += 1
 => 7 
h[:a][:counter] += 1
 => 8 

# New hash for each default
n_h = Hash.new { |hash, key| hash[key] = {:counter => 5} }
n_h[:a][:counter] += 1
 => 6 
n_h[:boo][:counter] += 1
 => 6 
n_h[:a][:counter] += 1
 => 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T11:09:35.923

```
def_hash={:key=>"value"}
another_hash=Hash.new(def_hash)
another_hash[:foo] # => {:key=>"value"} 
```

# java - 在浏览器上查看数据

> ID：11355115
> 
> 赞同：0
> 
> 时间：2012-07-06T02:34:25.443
> 
> 标签：java, url, grails, urlconnection

我有一个域，其中包含 URL、lastModified 等字段。现在我想查看从该代码获得的信息到列表页面中。我该怎么做

```
def url = new URL("http://www.google.com")
HttpURLConnection connection = (HttpURLConnection)url.openConnection()
//  long contentLength = Long.parseLong(connection.getHeaderField("Content-Length"));
connection.setRequestMethod("GET")
connection.connect()
connection.getURL()
println("Date: " + new Date(connection.getDate()))
println("LastModified Date:" + new Date(connection.getLastModified()))
if (connection.responseCode == 200 || connection.responseCode == 201){
    def returnMessage = connection.content

    //print out the full response
    println "${returnMessage}";
    System.out.println(connection.getURL());
} else {
    println "Error Connecting to " + url
    println "Couldn't connect to url"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:33:31.237

从您的控制器，您可以使用该`render`方法，

```
render returnMessage 
```

（见[http://grails.org/doc/2.0.x/ref/Controllers/render.html](http://grails.org/doc/2.0.x/ref/Controllers/render.html)）

或将其在模型中传递到 gsp 页面，然后从 gsp 打印，

```
return [returnMsg: returnMessage]

....(in .gsp)
${returnMsg} 
```

（见[http://grails.org/doc/2.0.x/guide/theWebLayer.html#GSPBasics](http://grails.org/doc/2.0.x/guide/theWebLayer.html#GSPBasics)）

# java - 如何通过sip在android中发送短信

> ID：11355120
> 
> 赞同：9
> 
> 时间：2012-07-06T02:35:27.453
> 
> 标签：java, android, eclipse, voip

我正在 android 中开发一个应用程序，我想在其中使用 sip/xmpp（会话启动协议）发送文本消息，任何人都可以给我它的代码以及关于它在任何免费 sip 提供程序上的开发和测试的任何指南。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-04T15:46:53.913

**更新重新阅读**
对不起，我没有意识到这个问题只与短信有关。SIP 本身不支持文本消息，SIMPLE 或 MSRP 扩展支持。您需要找到一个您乐于使用的堆栈，这里有一个示例[Doubango](http://doubango.org/)和他们的演示产品[IMSDroid](https://code.google.com/p/imsdroid/)，但谷歌“Android MSRP”有很多其他选项。我仍然对 XMPP 一无所知，但请查看[此线程](https://stackoverflow.com/questions/4769020/android-and-xmpp-currently-available-solutions)以获取大量库和用途列表。
**结束更新**

你试过什么了？对于您问题的 SIP（​​语音）部分，这里是[Android 开发者网站](http://developer.android.com/guide/topics/connectivity/sip.html)上的文档，其中包含您需要知道的所有内容，这里是一个免费的 SIP 提供程序：[Getonsip](https://www.getonsip.com/)。

*简化的代码示例，主要来自 Android 开发者网站。*

本质上，您需要确保 minSDK 设置为 9，因为 SIP 库直到 2.3 才添加。将服务添加到您的清单中：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.USE_SIP" /> 
```

`uses-feature voip`如果您希望您的应用程序不安装在无法运行的设备上，可以选择添加该指令。

```
<uses-feature android:name="android.hardware.sip.voip" /> 
```

创建一个 SipManager：

```
android.net.sip.SipManager manager = SipManager.newInstance(this); 
```

创建用于通过您的提供商拨打/接听电话的配置文件：

```
android.net.sip.SipProfile.Builder builder = new SipProfile.Builder(username, domain);
builder.setPassword(password);
android.net.sip.SipProfile sipProfile = builder.build(); 
```

如果您只关心拨打电话：

```
manager.open(profile); 
```

要拨打电话，您需要与听众一起工作：

```
SipAudioCall.Listener listener = new SipAudioCall.Listener() {

    @Override
    public void onCallEstablished(SipAudioCall call) {
        call.startAudio();
        call.setSpeakerMode(true);
        call.toggleMute();
        ...
    }

    @Override
    public void onCallEnded(SipAudioCall call) {
        // Do something.
    }
}; 
```

现在，只要您拥有对等方的 SIP 地址，您就可以使用：

```
SipProfile friendProfile = ...;
manager.makeAudioCall(sipProfile.getUriString(), friendAddress, listener, 30); 
```

那应该让你开始。不幸的是，我没有使用 XMPP 的经验。

# asp.net-mvc-3 - MVC 3 应用程序中的两个不同的资源文件夹

> ID：11355121
> 
> 赞同：0
> 
> 时间：2012-07-06T02:35:37.067
> 
> 标签：asp.net-mvc-3

我的项目需要有两个不同的资源文件文件夹。我在控制器视图和 javascript 中取键

谁能帮我实现这个功能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:15:20.127

您可以根据需要定义任意数量的资源文件。您只需要为它编写以下代码。

供查看

```
@HttpContext.GetGlobalResourceObject("ResourceFileName", "ResourceKeyName") 
```

在 JavaScript 中

```
var str = '@HttpContext.GetGlobalResourceObject("ResourceFileName", "ResourceKeyName")'; 
```

如果它的本地资源文件比简单

供查看

```
@ResourceName.ResourceKeyName 
```

在 JavaScript 中

```
var str = '@ResourceName.ResourceKeyName'; 
```

# python - python dict set min_size

> ID：11355124
> 
> 赞同：5
> 
> 时间：2012-07-06T02:36:13.053
> 
> 标签：python, optimization, dictionary, python-2.7, hashtable

我正在解析数亿条 JSON 记录，并将每个记录的相关组件存储在`dict`. 问题是，由于我正在处理的记录数量，python 被迫`dict`多次增加 ' 的基础哈希表的大小。这导致必须重新散列大量数据。大量的重新散列本身似乎花费了大量时间。因此，我想知道是否有办法在`dict`'s 的底层哈希表上设置最小大小，以便最小化调整大小操作的数量。

我已经从[这个问题](https://stackoverflow.com/questions/4279358/pythons-underlying-hash-data-structure-for-dictionaries)的答案中阅读[了](http://svn.python.org/view/python/trunk/Objects/dictnotes.txt?view=markup)关于优化 python 的这篇文章，但找不到如何更改 a的哈希表的初始大小。如果有人可以帮助我解决这个问题，我将不胜感激。`dict``dict`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:38:56.970

如果你这样做：

```
a = dict.fromkeys(range(n)) 
```

它将强制字典大小容纳 n 个项目。之后速度很快，但需要 3 秒。

# c# - 通过 HTTP/Post 将 JSON 写入 Solr

> ID：11355125
> 
> 赞同：1
> 
> 时间：2012-07-06T02:36:17.533
> 
> 标签：c#, json, rest, solr

我正在通过 C#/Winforms/.NET4.0 应用程序中的 HTTP/POST 使用 JSON 向 Solr 写入数据，以加快索引和使用下面的代码。我向 solr 写了一个文档（基于这些[说明](http://wiki.apache.org/solr/UpdateJSON/)），但不断收到“400 错误请求”。JSON 看起来很干净，没有问题。

这似乎是一个语法问题，但过去几个小时我一直在努力解决这个问题，但无济于事。关于什么是错误的任何想法？所有帮助表示赞赏。

这是发布的 URI 字符串

```
"http://localhost:8080/solr/update/json -H 'Content-type:application/json' -d ' [ {\"UUID\":\"d2a174e4-81d6-487f-b68d-392be5d3d47a\",\"Extension\":\".AVI\",\"VideoFileName\":\"Clip 1.avi\"} ' ]"

string uri = http://localhost:8080/solr/update/json;

public bool WriteJSONToSolr(string uri, string json)
        {
            WebRequest request = WebRequest.Create(uri + " -H 'Content-type:application/json' -d ' [ " + json + " ' ]" );
            request.ContentType = "application/x-www-form-urlencoded";
            request.Method = "POST";
            byte[] bytes = Encoding.ASCII.GetBytes(json);
            Stream stream = null;
            try
            { // send the Post
                request.ContentLength = bytes.Length;   //Count bytes to send
                stream = request.GetRequestStream();
                stream.Write(bytes, 0, bytes.Length);         //Send it
            }
            catch
            {
                return false;
            }
            finally
            {
                if (stream != null)
                {
                    stream.Close();
                }
            }
            System.Net.WebResponse response = request.GetResponse();
            if (response == null) return false;

            return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T19:18:23.053

如果要插入，则需要在 json 元素中使用 add 和 doc。您还需要添加一个提交以便更新索引。您还可以从 uri 中删除参数，因为您可以将它们添加到 Web 请求对象中。最后，您应该在 uri 中包含您的集合名称。

```
string json = "{\"add\":{\"doc\":{"
  + "\"UUID\":\"d2a174e4-81d6-487f-b68d-392be5d3d47a\","
  + "\"Extension\":\".AVI\","
  + "\"VideoFileName\":\"Clip 1.avi\"}},";
  + "\"commit\":{}}";
string uri = "http://localhost:8080/solr/collection/update";

WebRequest request = WebRequest.Create(uri);
request.ContentType = "application/json";
request.Method = "POST";
byte[] bytes = Encoding.ASCII.GetBytes(json);
Stream stream = null;

try {
  request.ContentLength = bytes.Length;
  stream = request.GetRequestStream();
  stream.Write(bytes, 0, bytes.Length);
}
catch {
  return;
}
finally {
  if (stream != null) {
    stream.Close();
  }
}
System.Net.WebResponse response = request.GetResponse();
if (response == null) {
  return;
} 
```

如果要向 solr 插入多个对象，则可以将多个 add 对象或 doc 对象添加到 json。例如...

```
json = "{add:{doc:{keys:values}}, add:{doc:{keys:values}}, commit:{}}" 
```

或者

```
json = "{add:{doc:{keys:values}, doc:{keys:values}}, commit:{}}" 
```

在您调试此程序时，请查看 solr 的日志。它会提醒您有关 solr 方面可能发生的任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T17:46:57.850

首先，我不认为您使用 -d 选项传递了正确的 json 数据。请查看代码中的以下格式代码。

```
" -H 'Content-type:application/json' -d ' [ " + json + " ' ]" 
```

假设，你的 json 数据是`{"name":"sam"}`那么，上面的格式化结果为

```
-H 'Content-type:application/json' -d ' [{"name":"sam"} ' ] 
```

您正在传递一个缺少 ] 的 json 数据。

除此之外，您在 solr 索引中更新文档的方法是错误的。看看下面的简单代码。[顺便说一句：您可以在 url 中传递 'commit' 参数]。

```
public async Task PostAsync()
{
    string json = "{\"add\": {\"doc\": {"
        + "\"id\":\"12345\","
        + "\"firstname\":\"Sam\","
        + "\"lastname\":\"Wills\","
        + "\"dob\":\"2016-12-14T00:00:00Z\""
        + "}}}";

    using (var client = new HttpClient())
    {
        string uri = "http://localhost:8983/solr/people/update/json?wt=json&commit=true";
        var jsonContent = new StringContent(json);
        await client.PostAsync(new Uri(uri), jsonContent);
    }
} 
```

如果要更新特定字段而不是整个文档 [部分更新]，请使用以下代码片段。

```
public async Task PartialPostAsync()
{
    string json = "{\"add\": {\"doc\": {"
        + "\"id\":\"12345\","
        + "\"lastname\":{\"set\":\"George\"}"
        + "}}}";

    using (var client = new HttpClient())
    {
        string uri = "http://localhost:8983/solr/people/update/json?wt=json&commit=true";
        var jsonContent = new StringContent(json);
        await client.PostAsync(new Uri(uri), jsonContent);
    }
} 
```

'id' 字段是一个唯一字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:43:41.327

The reasong that your code isn't working, is because you are using cURL syntax in .Net.

cURL is an executable that sends and receives HTTP requests and .Net is a framework for programming applications.

They are not the same.

To make it work with .Net you first should post to the correct uri, and you need to set the correct ContentType property like such:

```
var uri = "http://localhost:8080/solr/update/json";
using (var r = WebRequest.Create(uri))
{
    r.ContentType = "application/json";
    r.Method = "POST";
    using (var rs = r.GetRequestStream())
        rs.Write // your data
    // get response
    // return response data
} 
```

That said, why inflict pain upon yourself? Just use a SolR connector that already has a typed API for SolR operations!

[https://code.google.com/p/solrnet/](https://code.google.com/p/solrnet/) for example!

But if you don't want to use that, then at least use a modern HTTP API like [https://nuget.org/packages/RestSharp](https://nuget.org/packages/RestSharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T02:52:57.463

你之前忘了放一个`space`字符`-H`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T17:16:31.850

我今天遇到了同样的问题。

试试这两件事

1）请记住，您不能发送像

```
[{"A":"1","B":"0","C":"","D":"Washington"}] 
```

相反，您可能必须按摩 json 以使其更像

```
[{"A":"1","B":"0","D":"Washington"}] 
```

Solr 不喜欢空值。

**2）第二个有用的技巧（通过' curl** '向solr发送数据时）：在将请求发送到solr之前，尝试用两个双引号替换json字符串中的所有双引号。

`json = json.Replace(@"""", @"""""");`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-30T12:08:47.283

请在将 json 转换为流字节后尝试以下代码

```
protected override void Append(LoggingEvent loggingEvent)
{
    byte[] bodyBytes;
    try
    {
        string body = BodyFormatter.CreateBody(loggingEvent, _parameters);
        bodyBytes = Encoding.UTF8.GetBytes(body);
    }
    catch (Exception e)
    {
        ErrorHandler.Error("Failed to create body", e);
        return;
    }

    HttpWebRequest request = BuildRequest();
    request.BeginGetRequestStream(r =>
    {
        try
        {
            using (Stream stream = request.EndGetRequestStream(r))
            {
                stream.BeginWrite(bodyBytes, 0, bodyBytes.Length, c =>
                {
                    try
                    {
                        stream.EndWrite(c);
                        request.BeginGetResponse(a =>
                        {
                            try
                            {
                                var response = request.EndGetResponse(a);
                                if (((HttpWebResponse)response).StatusCode != HttpStatusCode.OK)
                                    ErrorHandler.Error("Got failed response: " + ((HttpWebResponse)response).StatusDescription);
                                response.Close();
                            }
                            catch (Exception e)
                            {
                                ErrorHandler.Error("Failed to get response", e);
                            }
                        }, null);
                    }
                    catch (Exception e)
                    {
                        ErrorHandler.Error("Failed to write", e);
                    }
                }, null);
            }
        }
        catch (Exception e)
        {
            ErrorHandler.Error("Failed to connect", e);
        }
    }, null);
} 
```

# zend-framework2 - 如何让 Zend Framework 2 beta4 中的服务管理器为专辑表创建一个实例？

> ID：11355126
> 
> 赞同：4
> 
> 时间：2012-07-06T02:36:40.310
> 
> 标签：zend-framework2

这是 Rob Allen 的 Zend Framework beta4 快速入门教程。

错误消息：Zend\ServiceManager\ServiceManager::get 无法获取或创建专辑表的实例

似乎尝试建立与数据库的连接失败，但我还没有找到方法来判断。它使用闭包从 ServiceManager 返回一个实例，但会收到上述错误消息。

模块/相册/Module.php

命名空间专辑；

```
class Module
{
public function getAutoloaderConfig()
{
    return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                    __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' => array(
                    'namespaces' => array(
                            __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                    ),
            ),
    );
}
public function getConfig()
{
    return include __DIR__ . '/config/module.config.php';
}

public function getServiceConfiguration()
{

    $albumTable = array(
            'factories' => array(
                    'album-table' => function($sm) {
                        $dbAdapter = $sm->get('db-adapter');
                        $table = new AlbumTable($dbAdapter);
                        return $table;
                    },
            ),
    );      
    return $albumTable;
}
} 
```

命名空间应用程序；

使用 Zend\Db\Adapter\Adapter 作为 DbAdapter，

```
class Module
{
    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }
    public function getServiceConfiguration()
    {
            $factoryDBAdaptor = array(
              'factories' => array(
                 'db-adapter' => function($sm) {
                    $config = $sm->get('config');
                    $config = $config['db'];
                    $dbAdapter = new DbAdapter($config);
                    return $dbAdapter;
                 }, 
              ), 
           );
        return $factoryDBAdaptor;
    }    
} 
```

配置\自动加载\global.php

```
return array(
    'db' => array(
        'driver' => 'PDO',
        'dsn'            => 'mysql:dbname=zf2tutorial;hostname=localhost',
        'username'       => 'user',
        'password'       => 'password',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:39:47.543

这与 Zend Framework 的 master 自 Beta 4 以来发生了变化有关，因此我的针对 beta 4 的教程不再适用于最新的 ZF master。

此外，SM 可能有以前的异常，因此您应该检查是否有任何以前的异常，因为这可能会显示潜在的错误。

**更新**
截至 2012 年 7 月 11 日，我的[教程](http://akrabat.com/zend-framework-2-tutorial/)现已针对 Beta 5 进行了更新。它现在使用 Db Adapter 的 ServiceFactory 来创建适配器，因此您甚至不再需要修改 Application 的 Module 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:07:17.910

使用以下行更新您的 composer.json 文件。

```
"zendframework/zendframework": "dev-master#18c8e223f070deb07c17543ed938b54542aa0ed8" 
```

运行以下命令你会很高兴。

```
php composer.phar self-update  
php composer.phar update
php composer.phar install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:05:46.307

我将提供的代码添加到 module.php 并没有执行。我将密钥更改为 Zend\db\Adapter\Adapter 并导致它执行。但是，我收到错误 Undefined index: db on line $config = $config['db']; 因为 $config 不包含该密钥。

在我看来，将 db 键加载到 $config 数组中需要额外的代码。真的吗？该代码是什么以及在哪里？我的 module.php 是：

```
<?php

namespace Album;

use Album\Model\Album;
use Album\Model\AlbumTable;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\TableGateway;
use Zend\ModuleManager\Feature\ServiceProviderInterface;
use Zend\Db\Adapter\Adapter as DbAdapter;

class Module implements ServiceProviderInterface {

    public function getAutoloaderConfig() {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }

    public function getConfig() {
        return include __DIR__ . '/config/module.config.php';
    }

    // Add this method:
    public function getServiceConfig() {
        return array(
            'factories' => array(
                'Zend\db\Adapter\Adapter' => function($sm) {
                    echo PHP_EOL . "SM db-adapter executed." . PHP_EOL;
                    $config = $sm->get('config');
                    $config = $config['db'];
                    $dbAdapter = new DbAdapter($config);
                    return $dbAdapter;
                },
                'Album\Model\AlbumTable' => function($sm) {
                    echo PHP_EOL . "SM AlbumTable executed." . PHP_EOL;
                    $tableGateway = $sm->get('AlbumTableGateway');
                    $table = new AlbumTable($tableGateway);
                    return $table;
                },
                'AlbumTableGateway' => function ($sm) {
                    echo PHP_EOL . "SM AlbumTableGateway executed." . PHP_EOL;
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $resultSetPrototype = new ResultSet();
                        $resultSetPrototype->setArrayObjectPrototype(new Album());
                        return new TableGateway('album', $dbAdapter, null, $resultSetPrototype);
                },
            ),
        );
    }

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:30:22.740

确保主 Module.php 具有对 getServiceConfiguration() 的引用。我有同样的问题，忘记包括它。

模块/应用程序/Module.php：

```
<?php
namespace Application;
use Zend\Db\Adapter\Adapter as DbAdapter;
class Module
{
    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getServiceConfiguration()
    {
        return array(
            'factories' => array(
                'db-adapter' => function($sm) {
                    $config = $sm->get('config');
                    $config = $config['db'];
                    $dbAdapter = new DbAdapter($config);
                    return $dbAdapter;
                },
            ),
        );
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T20:06:37.757

通过禁用工具栏修复了此错误。只需转到`config/autoload/zend-developer-tools.local-development`并将工具栏设置为 false。

```
 'toolbar' => [
            /**
             * Enables or disables the Toolbar.
             *
             * Expects: bool
             * Default: false
             */
            'enabled' => false, 
```

# javascript - Javascript：有时可拖动元素搞砸了在 Element 中，我正在实现从 Internet 获得的代码，并在其上进行了选择。当我在 Chrome 浏览器上执行此步骤时，元素被弄乱了；我移动元素并拖动它。我选择选择，然后元素移动到左上页。请帮忙，只需将此代码复制并粘贴到您的编辑器并运行它；

> ID：11355128
> 
> 赞同：0
> 
> 时间：2012-07-06T02:36:41.140
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:31:33.433

```
 var draggable = function(element) {
    element.addEventListener('mousedown', function(e) {
        e.stopPropagation();

        // if the current target is different (in the case of a child node), don't drag.
        // you can customize this to specify types of children which prevent dragging
        if (e.target != element)
            return;

        var offsetX = e.pageX - element.offsetLeft;
        var offsetY = e.pageY - element.offsetTop;

        function move(e) {
             element.style.left = (e.pageX - offsetX) + 'px';
             element.style.top = (e.pageY - offsetY) + 'px';
        }
        function stop(e) {
            // remove the event listeners on the document when not dragging 
            document.removeEventListener('mousemove', move);
            document.removeEventListener('mouseup', stop)
        }

        document.addEventListener('mousemove', move)
        document.addEventListener('mouseup', stop)

    })  

}

function init() {
  var ele = document.getElementById('ele');
  draggable(ele)
} 
```

这在某些 IE 版本中可能不起作用，但您应该能够为此添加必要的修复程序。这是小提琴[http://jsfiddle.net/seKbz/2/](http://jsfiddle.net/seKbz/2/)

# redmine - Redmine 插件：找不到模型，我必须复制到核心应用程序/模型

> ID：11355129
> 
> 赞同：0
> 
> 时间：2012-07-06T02:36:50.950
> 
> 标签：redmine, redmine-plugins

我正在使用 Redmine 2.0.3。我开发了一个名为 cg_process 的自定义插件。

在目录 plugins/cg_process/app/models/ 中有一个名为“ProjectInfo.rb”的模型文件。

当我使用插件时，Redmine 找不到模型。

它给出了以下错误：

```
Started GET "/project_infos/new?project_id=master-prj-setup" for 172.18.56.10 at Fri Jul 06 09:36:59 +0000 2012
Processing by ProjectInfosController#new as HTML
  Parameters: {"project_id"=>"master-prj-setup"}
Completed 500 Internal Server Error in 12ms

NameError (uninitialized constant ProjectInfosController::ProjectInfo):
  plugins/cg_process/app/controllers/project_infos_controller.rb:32:in `new'
  actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.6) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.6) lib/abstract_controller/callbacks.rb:18:in `process_action'
  activesupport (3.2.6) lib/active_support/callbacks.rb:469:in `_run__755186413__process_action__943997142__callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `send'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `send'
  activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.6) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  activesupport (3.2.6) lib/active_support/notifications.rb:123:in `instrument'
  activesupport (3.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.6) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.6) lib/action_controller/metal/params_wrapper.rb:206:in `process_action'
  activerecord (3.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.6) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.6) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.6) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.6) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.6) lib/action_controller/metal.rb:246:in `action'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:600:in `call'
  rack-openid (1.3.1) lib/rack/openid.rb:98:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__397314981__call__4__callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `send'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `send'
  activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.6) lib/rails/engine.rb:479:in `call'
  railties (3.2.6) lib/rails/application.rb:220:in `call'
  railties (3.2.6) lib/rails/railtie/configurable.rb:30:in `send'
  railties (3.2.6) lib/rails/railtie/configurable.rb:30:in `method_missing'
  passenger (2.2.14) lib/phusion_passenger/rack/request_handler.rb:92:in `process_request'
  passenger (2.2.14) lib/phusion_passenger/abstract_request_handler.rb:207:in `main_loop'
  passenger (2.2.14) lib/phusion_passenger/rack/application_spawner.rb:120:in `run'
  passenger (2.2.14) lib/phusion_passenger/rack/application_spawner.rb:65:in `spawn_application'
  passenger (2.2.14) lib/phusion_passenger/utils.rb:252:in `safe_fork'
  passenger (2.2.14) lib/phusion_passenger/rack/application_spawner.rb:58:in `spawn_application'
  passenger (2.2.14) lib/phusion_passenger/rack/application_spawner.rb:41:in `spawn_application'
  passenger (2.2.14) lib/phusion_passenger/spawn_manager.rb:159:in `spawn_application'
  passenger (2.2.14) lib/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
  passenger (2.2.14) lib/phusion_passenger/abstract_server.rb:352:in `__send__'
  passenger (2.2.14) lib/phusion_passenger/abstract_server.rb:352:in `main_loop'
  passenger (2.2.14) lib/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
  passenger (2.2.14) bin/passenger-spawn-server:61 
```

如果我将模型文件 ProjectInfo.rb 从插件目录（plugins/cg_process/app/models/）复制到核心目录（app/models），一切正常。

我暂时在 capistrano 部署文件中进行了修复，以便将模型文件复制到核心目录。但这只是一种解决方法。我想找到一个标准的解决方案。

我不明白为什么 Redmine 在插件目录中找不到模型。

可能我错过了一些东西，但我不知道是什么。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:31:47.123

我希望你正在尝试创建一个 redmine 插件模型。所以运行

```
rails generate redmine_plugin_model <plugin_name> <model_name> 
```

那是

```
rails generate redmine_plugin_model cg_process project_info 
```

然后编辑迁移文件并添加字段，运行

```
 rake redmine:plugins:migrate 
```

# jquery - 如何选择包含某个字符串的jquery元素？

> ID：11355132
> 
> 赞同：3
> 
> 时间：2012-07-06T02:37:13.180
> 
> 标签：jquery

说我有以下内容：

```
<div id="hellokat"></div>
<div id="hellodog"></div>
<div id="byekat"></div>
<div id="byedog"></div> 
```

我知道我可以使用 $('#hellokat') 和 $('hellodog') 单独选择 div，但我想同时选择所有在其 id 开头包含“hello”的 div。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T02:40:55.487

[jQuery 选择器中的通配符](https://stackoverflow.com/questions/5376431/wildcards-in-jquery-selectors)

只需在选择器中使用正则表达式：

```
$("div[id^=hello]").hide(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T02:40:53.477

您可以使用*[属性选择器](http://api.jquery.com/category/selectors/)*。

```
$('div[id^="hello"]') 
```

# asp.net-mvc - 是否可以仅自动更新现有实体对象上的选定属性而不接触其他属性

> ID：11355135
> 
> 赞同：0
> 
> 时间：2012-07-06T02:37:29.017
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4, objectcontext

假设我的实体类上有一堆布尔属性`public bool isActive`等。这些值将通过在 Web 应用程序中设置复选框来操作。我将一次只发回一个更改的名称/值对和主键，比如说 `{ isActive : true , NewsPageID: 34 }`，默认模型绑定器将创建一个仅设置这两个属性的 NewsPage 对象。现在，如果我运行下面的代码，它不仅会更新已在模型绑定器创建的 NewsPage 对象上设置的属性的值，而且当然还会尝试将现有实体对象的所有其他未设置值设为空，因为它们未在模型绑定器创建的 NewsPage 对象上设置。

是否有可能以某种方式告诉实体框架不要查看设置为 null 的属性并尝试将这些更改持久化回检索到的实体对象并因此保留到数据库？也许我可以编写一些代码，它们只会利用模型绑定器创建的 NewsPage 对象上的非空值及其属性名称，并且只尝试更新那些特定的属性？

```
 [HttpPost]
    public PartialViewResult SaveNews(NewsPage Np)
    {
        Np.ModifyDate = DateTime.Now;
        _db.NewsPages.Attach(Np);
        _db.ObjectStateManager.ChangeObjectState(Np, System.Data.EntityState.Modified);
        _db.SaveChanges();
        _db.Dispose();

        return PartialView("MonthNewsData");
    } 
```

我当然可以做类似下面的事情，但我觉得这不是最佳解决方案。特别是考虑到我需要设置 6 个布尔属性。

```
[HttpPost]
public PartialViewResult SaveNews(int NewsPageID, bool isActive, bool isOnFrontPage)
{
        if (isActive != null)   { //Get entity and update this property }
        if (isOnFontPage != null) { //Get entity and update this property }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:59:32.470

API 不是强类型的，但您可以按如下方式进行。`DbContext`API对此有更好的支持。

```
[HttpPost]
public PartialViewResult SaveNews(NewsPage Np)
{
    Np.ModifyDate = DateTime.Now;
    _db.NewsPages.Attach(Np);
    var entry = _db.ObjectStateManager.GetObjectStateEntry(Np);

    var cv = entry.CurrentValues;

    if (isActive)
    {
        cv.SetBoolean(cv.GetOrdinal("isActive"), true);
    }

    _db.SaveChanges();
    _db.Dispose();

    return PartialView("MonthNewsData");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:58:14.453

你可以选择两种选择

1.  为该操作注册一个自定义模型绑定器。在自定义模型绑定器中，您必须从数据库中获取完整的对象并且只更新 POSTed 属性。

2.  使用视图模型。而不是直接将`NewsPage`模型作为动作参数。您可以创建一个包含必要属性的自定义视图模型。在操作中，您必须调用 db 以获取完整的`NewsPage`实例并仅更新视图模型中的相应属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:27:20.790

有点丑陋，但在我的情况下，无需创建和注册自定义模型绑定器或使用多个 if 语句就可以解决问题。

```
 [HttpPost]
    public void SaveNews(string propname, bool propvalue, int PageID)
    {
        var prop = typeof(NewsPage).GetProperties().FirstOrDefault(x => x.Name.ToLower() == propname.ToLower());
        var Np = _db.NewsPages.FirstOrDefault(x => x.PageID == PageID);
        prop.SetValue(Np, propvalue, null);

         Np.ModifyDate = DateTime.Now;
        _db.SaveChanges();
        _db.Dispose();

    } 
```

# java - 关于 OutOfMemoryError 及其处理方法

> ID：11355138
> 
> 赞同：2
> 
> 时间：2012-07-06T02:37:51.760
> 
> 标签：java, out-of-memory

通过反复试验，我了解到这`11_451_104`是一个神奇的数字，它会导致我的机器抛出 OOM 错误。

使用`11_451_103`，我正在打包尽可能多的数据。

```
private static void init() {
    int i = 0;
    try {
        while (++i < 11451104) {
            list.add("a");
        }
    } catch (OutOfMemoryError e) {
        System.out.println("oh no, not again :("); // <-- Not getting here
    }
} 
```

如果在下一行我做

```
 String x = "some new string"; 
```

我希望会发生异常，因为堆无法为另外 1 个字符串分配空间。然而，事实并非如此。

如果我尝试将此新字符串添加到列表中，

```
 String x = "some new string"; // <-- expect OOM Error to happen here
    list.add(x); 
```

程序确实因 OOM 而中止。**为什么在字符串分配时没有发生这种情况？**

**如何最好地保护自己知道 OOM 是一种可能性，因为可能需要保存未知（可能非常大）数量的数据？序列化和持久化到磁盘是解决这个问题的方法吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T02:46:49.697

> 为什么在字符串分配时没有发生这种情况？

该`list.add(...)`方法也可以是分配内存。如果列表是一个，`LinkedList`那么每次`add`调用都会创建一个新的列表节点。如果它是`ArrayList`，那么`add`可能会导致支持数组被重新分配。

（**更新**- 我刚刚注意到你甚至没有创建新的字符串对象。你不断地将相同的文字字符串添加`"a"`到列表中，这**保证**了 OOME**不会**在字符串分配中发生！）

> 知道OOM是一种可能性，如何最好地保护自己...

尝试捕捉并从 OOME 中恢复是很诱人的，但这可能是有风险的。问题是您永远无法确定您的应用程序（例如，您的应用程序代码调用的某个库方法）实际上试图分配什么，以及是否`Error`发生在不方便的时间并且在部分或部分中留下了一些重要的数据结构不一致的状态。因此，您的应用程序可能不适合尝试恢复。

通常，当您获得 OOME 时，最安全的做法是让应用程序立即退出。不要尝试提交事务等。当您的应用程序的数据库连接套接字/管道/任何东西被操作系统关闭时，让数据库的自动回滚清理任何未提交的事务。

事实上，“不要试图恢复”的建议适用于所有`Error`例外情况。只是 OOME 是开发人员倾向于忽略建议的情况，因为他们认为自己更了解......

* * *

在“保护自己”方面，一般的解决方案是在非易失性存储上安全地保存一份重要状态的副本；例如，通过将其写入数据库、序列化为平面文件等。具体细节（例如哪种技术最好）将取决于数据、您的应用程序如何使用它以及如何使您的应用程序可重新启动。

问题/情况与处理可能的应用程序崩溃、操作系统重启、电源故障等问题没有本质上的不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:46:18.373

我会说**不要**尝试处理它；无论如何可以*可靠地*完成什么？

这是一个错误而不是异常。开始疯狂地挥手，如果合适的话，用看门狗重新启动这个过程。

如果怀疑超出可用内存量：

1.  改变流式传输的方法和/或更精简；使用更少的[瞬态]内存
2.  需要更多虚拟内存（OS*和*JVM）
3.  使用存储支持的结构：例如数据库、基于磁盘的哈希等（这是“序列化和持久化到磁盘”的一种形式）

# javascript - d3.js：当用户走到屏幕边缘时，我如何翻译我的图表？

> ID：11355139
> 
> 赞同：1
> 
> 时间：2012-07-06T02:37:56.663
> 
> 标签：javascript, animation, svg, d3.js

到目前为止我所拥有的：http: [//jsfiddle.net/DerNalia/GjmL7/4/](http://jsfiddle.net/DerNalia/GjmL7/4/)

相关代码：

```
function mouseMove(){
  var x = 0; var y = 1;
   mouse = d3.mouse(this);
   console.log(mouse)
   // check if close to bounds
   if (mouse[x] < 10){
      console.log("shift left")
      circle.attr("cx", function (d,i) { return d.x - 5; } ) // translate x value
      text.attr("cx", function (d,i) { return d.x - 5; } ) // translate x value
      path.attr("cx", function (d,i) { return d.x - 5; } ) // translate x value
   }
   if (mouse[y] < 10){
    console.log("shift right")
      circle.attr("cy", function (d,i) { return d.x - 5; } ) // translate x value
      text.attr("cy", function (d,i) { return d.x - 5; } ) // translate x value
      path.attr("cy", function (d,i) { return d.x - 5; } ) // translate x value
   }
} 
```

目前，当您接近屏幕边缘时，圆形节点、线条（路径）和文本都应该平移，但如果您查看小提琴，您会发现它们滚动的方向错误。

**我试图完成的行为：** 当用户滚动到屏幕边缘时，画布上的所有内容都应该远离光标——光标在说，“嘿，我想看看这里有什么”

但问题是（除了不知道如何翻译 svg 上的所有内容）是，一旦光标停止移动，我如何继续翻译，直到光标回到文档上？（当然，我会为翻译设置最大值和最小值，因为翻译过去的数据没有意义）

# c# - 为什么 .NET 中存在预定义接口

> ID：11355140
> 
> 赞同：0
> 
> 时间：2012-07-06T02:38:07.817
> 
> 标签：c#

我知道接口的概念.. 但有一件事我不明白为什么.NET 中有这么多预定义接口，比如 IComparable、IClonable、IFormattable、IDisposable？如果只是在这些接口中声明了方法，那么我们甚至可以定义自己的方法和权限任务。那么这里的接口有什么用呢？

在这里我要问这个问题的概念是接口只能声明函数签名，但不能定义功能......那为什么要预定义接口？即使我们必须实现接口定义的方法，那为什么不是我们自己的方法呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T02:48:14.627

举`List<T>`个例子，它有一个`Sort`方法。当您调用`myList.Sort()`时，列表将自行排序。但是如果你想控制它的排序方式呢？首先是什么？其次是什么？我们需要帮助 sort 方法并给它一些用于排序的东西。这就是其他版本的 sort 发挥作用的地方：`Sort(IComparer<T>)`

应该给予什么？可以在我们的列表中获取两个项目并告诉排序方法它们进入的顺序的东西，比如

```
int Compare(T a, T b); 
```

这正是中定义的方法`IComparer<T>`

我们完全可以在任何类中编写该方法，但问题是 C# 是一种*强类型*语言。我们不能给出`Sort`任何旧对象——即使它上面有那个方法——它必须`Sort`是熟悉的东西。接口弥合了这一差距。我们的类可以实现`IComparer<T>`，我们可以将其传递给`Sort`，并且由于我们知道`IComparer<T>`并且也知道 ，所以`Sort`每个人都很高兴并且在同一页面上。该接口告诉`Sort`知道传入的对象`Compare`在它上面，它可以安全地调用它。

# wordpress - 仅 WordPress wp_nav_menu 特定子菜单

> ID：11355141
> 
> 赞同：1
> 
> 时间：2012-07-06T02:38:15.680
> 
> 标签：wordpress, menu

我想创建一个仅提取特定页面的子菜单选项的菜单。

例如，如果菜单选项 DASHBOARD 具有子菜单 MESSAGE BOARD 和 CALENDAR，我希望能够创建一个仅包含 MESSAGE BOARD 和 CALENDAR 的单独菜单。

我想在没有 wp_list_pages 功能的情况下执行此操作，以便可以使用 WordPress 中的“外观”>“菜单”选项卡来管理菜单选项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:33:03.200

如果我理解正确，您想要子页面的其他菜单项吗？

IE 你有一个看起来像这样的菜单

主页 关于 DASHBOARD 常见问题 联系方式

DASHBOARD 有 2 个子页面 -> BOARD CALENDAR

当您在 DASHBOARD 页面上时，您希望 BOARD 和 CALENDAR 页面显示如下：

主页 关于 DASHBOAR 常见问题 联系板 日历

您可以像这样在functions.php中添加一个附加菜单

```
<?php if (function_exists('register_nav_menus'))
{
    register_nav_menus
    (
        array
        (
            'main_nav'=>'main menu', // your main menu
            'dash_nav'=>'dashboard menu', //your dashboard menu

        )
    );
}?> 
```

然后为仪表板创建一个页面模板，其中包含以下内容：

```
<?php wp_nav_menu(array('menu'=>'dashboard menu'));?> 
```

编辑：

好吧，您可以编辑 header.php 并添加类似这样的内容

```
<?php if (is_page_template('dashboard.php') :?>
    <link href="csspath" rel="stylesheet" type="text/css" />
<?php endif;?> 
```

这样，您可以添加另一个覆盖子菜单的 css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:02:28.523

我想我和您有类似的愿望，即选择并仅显示一个子菜单，该子菜单只是现有 wordpress 菜单中的子菜单项。这可以通过编辑 functions.php 并添加一个具有自己的 walker 类的短代码来定位和显示子菜单来完成。

### “menu”短代码和自定义菜单walker类的PHP代码（全部在functions.php中）：

```
 //register menu shortcode
    add_shortcode('menu', 'shortcode_menu');
    function shortcode_menu($args ) {
            //don't echo the ouput so we can return it
            $args['echo']=false;
            //in case menu isn't found display a message
            $args['fallback_cb']='shortcode_menu_fallback';
            //check if showing a submenu, if so make sure everything is setup to do so
            if (isset($args['show_submenu']) && !empty($args['show_submenu'])) {
                    if (!isset($args['depth'])) {
                            $args['depth']=1;
                    }
                    $args['walker']=new Sub_Menu_Walker_Nav_Menu();
            }
            $menu=wp_nav_menu( $args );
            return $menu;
    }
    //message to display if menu isn't found
    function shortcode_menu_fallback($args ) {return 'No menu selected.';}

    //special walker_nav_menu class to only display submenu
    //depth must be greater than 0
    //show_submenu specifies submenu to display
    class Sub_Menu_Walker_Nav_Menu extends Walker_Nav_Menu {
    function display_element( $element, &$children_elements, $max_depth, $depth=0, $args, &$output ) {
      if ( !$element )
       return;

      $id_field = $this->db_fields['id'];

      $displaythiselement=$depth!=0;
      if ($displaythiselement) {
              //display this element
              if ( is_array( $args[0] ) )
               $args[0]['has_children'] = ! empty( $children_elements[$element->$id_field] );
              $cb_args = array_merge( array(&$output, $element, $depth), $args);
              call_user_func_array(array(&$this, 'start_el'), $cb_args);
      }

      $id = $element->$id_field;
      if ( is_array( $args[0] ) ){
            $show_submenu=$args[0]['show_submenu'];
      }else
            $show_submenu=$args[0]->show_submenu;

      // descend only when the depth is right and there are childrens for this element
      if ( ($max_depth == 0 || $max_depth >= $depth+1 ) && isset( $children_elements[$id]) && $element->title==$show_submenu) {

       foreach( $children_elements[ $id ] as $child ){

        if ( !isset($newlevel) ) {
         $newlevel = true;
         //start the child delimiter
         $cb_args = array_merge( array(&$output, $depth), $args);
         call_user_func_array(array(&$this, 'start_lvl'), $cb_args);
        }
        $this->display_element( $child, $children_elements, $max_depth, $depth + 1, $args, $output );
       }
       unset( $children_elements[ $id ] );
      }

      if ( isset($newlevel) && $newlevel ){
       //end the child delimiter
       $cb_args = array_merge( array(&$output, $depth), $args);
       call_user_func_array(array(&$this, 'end_lvl'), $cb_args);
      }

      if ($displaythiselement) {
              //end this element
              $cb_args = array_merge( array(&$output, $element, $depth), $args);
              call_user_func_array(array(&$this, 'end_el'), $cb_args);
      }
     }
    } 
```

### 从“主”菜单显示一个标题为“关于”的子菜单（大写很重要）：

```
[menu menu='Main' show_submenu='About'] 
```

### 显示完整的“主”菜单：

```
[menu menu='Main'] 
```

如需进一步阅读/参考，请参阅[此 wordpress 问题](http://wordpress.org/support/topic/wp_nav_menu-list-only-2nd-level-separate-submenu/page/2)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-14T00:24:56.337

我很惊讶 Wordpress 没有在 wp_nav_menu 函数中内置这个选项。在 Wordpress 中实现二级菜单或拆分菜单一直很困难。在尝试了许多不同的解决方案来实现这个目标之后，我最终决定制作自己的插件，让您可以选择菜单的开始深度。因此，您可以将二级菜单的起始深度设置为“1”。

你像这样使用插件：

```
wp_nav_plus(array('theme_location' => 'primary_navigation', 'start_depth' => 1)); 
```

该插件在我的网站上可供任何感兴趣的人使用：[https ://mattkeys.me/products/wp-nav-plus/](https://mattkeys.me/products/wp-nav-plus/)

# c# - XNA 中的 Vector2 二维数组

> ID：11355143
> 
> 赞同：0
> 
> 时间：2012-07-06T02:38:46.587
> 
> 标签：c#, xna

我正在尝试在 XNA、C# 中创建 2D vector2 数组。

我使用了以下语句：

```
Vector2[][] SpritePosition=new Vector2[4][]; 
```

然后我使用以下 for 循环来初始化它们：

```
for(i=0;i<4;i++)  
{  
    for(j=0;j<4;j++)  
    {  
    }  
} 
```

但是，当我使用 for 循环时，如上所述，它给了我一个错误，实际上是两个：

1.  Int 是一个字段并用作类型。
2.  'for' 是类、结构或接口成员声明中的无效标记。

谁能告诉我为什么我面临这样的问题？

编辑：这是代码：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    int i=new int();
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Texture2D texture;
    //Vector2[,] SpritePosition = new Vector2[4,4];
    Vector2[,] SpriteSpeed = new Vector2[4,4];
    for(i=0;i<4;i++)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:04:43.073

似乎您需要阅读一些[C# 教程](http://www.csharp-station.com/Tutorial.aspx/)

您将需要一个功能，因此，

```
void LoadArray()
{
for(int i=0;i<4;i++)  
{  
    for(int j=0;j<4;j++)  
    {  
SpritePosition[i,j] = new Vector2(i,j)
    }  
} 
```

您可以从您的初始化方法调用它，使用`LoadArray()`

}

此外，`i = new Int()`对于字符串、整数等基本内容，您不需要 int，您不需要 new What() 部分

做就是了

`for(int i=0;i<4;i++) { }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:47:23.130

对于＃2，这意味着您的 for 循环不在函数内部...因此，您的代码中可能有一个额外的 } 更高的地方，您并不打算放在那里。很有可能这也是 #1 的问题，但是您并没有真正给我们足够的上下文（更多代码或编译器确切地说错误所在的位置）来肯定地说

# objective-c - 使用 Grand Central Dispatch 进行文件监控

> ID：11355144
> 
> 赞同：8
> 
> 时间：2012-07-06T02:38:48.783
> 
> 标签：objective-c, cocoa, grand-central-dispatch

我正在使用[David Hamrick](http://www.davidhamrick.com/2011/10/10/handling-filesystem-events-with-gcd.html)的代码示例来使用 GCD 监视文件。

```
int fildes = open("/path/to/config.plist", O_RDONLY);

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE,fildes, 
                                                  DISPATCH_VNODE_DELETE | DISPATCH_VNODE_WRITE | DISPATCH_VNODE_EXTEND | DISPATCH_VNODE_ATTRIB | DISPATCH_VNODE_LINK | DISPATCH_VNODE_RENAME | DISPATCH_VNODE_REVOKE,
                                                  queue);
dispatch_source_set_event_handler(source, ^
{
    //Reload the config file
});
dispatch_source_set_cancel_handler(source, ^
{
    //Handle the cancel
});
dispatch_resume(source); 
```

我想用来监控一个plist的变化。我在第一次更改后收到通知，但没有收到以下更改的通知。为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T05:13:29.270

当收到 DISPATCH_VNODE_DELETE 时，您确实可以重新打开文件并重新注册一个源（删除前一个）。或者您可以使用专为这种场景设计的调用，即 dispatch_io_create_with_path() - 它不仅会按路径观看，还会为您打开文件并让您异步读取内容。

既然你问了（不确定你要求的是哪种技术，但这是最简单的），这里有一个独立的代码示例：

```
#include <dispatch/dispatch.h>
#include <stdio.h>

int main(int ac, char *av[])
{
  int fdes = open("/tmp/pleasewatchthis", O_RDONLY);
  dispatch_queue_t queue = dispatch_get_global_queue(0, 0);
  void (^eventHandler)(void), (^cancelHandler)(void);
  unsigned long mask = DISPATCH_VNODE_DELETE | DISPATCH_VNODE_WRITE | DISPATCH_VNODE_EXTEND | DISPATCH_VNODE_ATTRIB | DISPATCH_VNODE_LINK | DISPATCH_VNODE_RENAME | DISPATCH_VNODE_REVOKE;
  __block dispatch_source_t source;

  eventHandler = ^{
    unsigned long l = dispatch_source_get_data(source);
    if (l & DISPATCH_VNODE_DELETE) {
      printf("watched file deleted!  cancelling source\n");
      dispatch_source_cancel(source);
    }
    else {
      // handle the file has data case
      printf("watched file has data\n");
    }
  };
  cancelHandler = ^{
    int fdes = dispatch_source_get_handle(source);
    close(fdes);
    // Wait for new file to exist.
    while ((fdes = open("/tmp/pleasewatchthis", O_RDONLY)) == -1)
      sleep(1);
    printf("re-opened target file in cancel handler\n");
    source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fdes, mask, queue);
    dispatch_source_set_event_handler(source, eventHandler);
    dispatch_source_set_cancel_handler(source, cancelHandler);
    dispatch_resume(source);
  };

  source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE,fdes, mask, queue);
  dispatch_source_set_event_handler(source, eventHandler);
  dispatch_source_set_cancel_handler(source, cancelHandler);
  dispatch_resume(source);
  dispatch_main();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T02:57:48.033

经过一番研究，我发现：

=> 我得到了旗帜`DISPATCH_VNODE_DELETE`

我正在监视`~/Library/Preferences/com.apple.dock.plist`我发现，更改停靠方向，删除原始文件并用新文件替换它。

因此，监控停止了。

同一作者提出[了一个解决方案](http://www.davidhamrick.com/2011/10/13/Monitoring-Files-With-GCD-Being-Edited-With-A-Text-Editor.html)，在删除的情况下，GCD 块调用自身以继续监控。

# javascript - 通过 JavaScript 更改字体

> ID：11355147
> 
> 赞同：23
> 
> 时间：2012-07-06T02:39:00.840
> 
> 标签：javascript, css, fonts, font-face

所以基本的工作流程是这样的：

1.  字体的异步文件上传（这已经完成）。

2.  获取 URL（完成）。

3.  将字体更改为新 URL。

我意识到这需要通过字体来完成，但我似乎无法弄清楚如何通过 JavaScript 访问它。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-06T02:51:31.487

您可以使用规则创建一个新`<style>`元素`@font-face`并将其附加到`document`'s `head`：

```
var newStyle = document.createElement('style');
newStyle.appendChild(document.createTextNode("\
@font-face {\
    font-family: " + yourFontName + ";\
    src: url('" + yourFontURL + "') format('yourFontFormat');\
}\
"));

document.head.appendChild(newStyle); 
```

当然，您可能还需要提供所有必要的字体格式和 URL，除非您只担心对现代桌面浏览器的支持（在这种情况下，您只需使用 WOFF——我认为这是合理的，因为您提到的其他功能）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-03-16T19:07:30.433

**定义一个 FontFace 对象**：

```
new_font = new FontFace('conthrax', 'url(fonts/conthrax-sb.ttf)') 
```

**调用它的 load 方法来下载字体**：

```
new_font.load().then(function(loaded_face) {
    // use font here

}).catch(function(error) {

}); 
```

...这会返回一个 Promise，它在解析时会传递加载的 FontFace。

**将加载的字体添加到文档中**：

```
new_font.load().then(function(loaded_face) {
    // use font here
    document.fonts.add(loaded_face)
}).catch(function(error) {

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-06T10:01:14.333

尝试这样的事情：

```
let font = new FontFace("ExampleFont", 'url(ExampleFont.woff2) format("woff2")');
font.load().then(function(loadedFont)
{
    document.fonts.add(loadedFont);
    //do something after the font is loaded
}).catch(function(error) {
    // error occurred
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-30T12:32:14.327

使用 js 在文档中创建样式元素，然后将 TextNode 子元素附加到它。简单功能：

```
function loadFont(name,url){
    var newStyle = document.createElement('style');
    newStyle.appendChild(document.createTextNode('@font-face{font-family: '+name+'; src: url('+url+');}'));
    document.body.appendChild(newStyle)
} 
```

使用示例：

```
loadFont("bonbon","fonts/bonbon.ttf"); 
```

# ruby-on-rails - 为什么`layout nil`不起作用？

> ID：11355149
> 
> 赞同：13
> 
> 时间：2012-07-06T02:39:19.483
> 
> 标签：ruby-on-rails, layout

我刚刚将我的 Rails 站点从 Rails 2 升级到 Rails 3.2。

在我的旧控制器上，我有：

```
class Foo::BarController < ApplicationController
   layout nil 
   ... 
end 
```

但是现在我升级到 Rails 3 似乎我需要将其更改为：

```
layout false 
```

[Rails Guides](http://guides.rubyonrails.org/layouts_and_rendering.html)上的文档声称`layout nil`应该可以正常工作：

> 布局声明在层次结构中向下级联......
> 
> 类 OldPostsController < SpecialPostsController
> 布局无

我的 Gemfile.lock 中有以下相关宝石

宝石

```
actionpack (3.2.6)
  activemodel (= 3.2.6)
  activesupport (= 3.2.6)
  builder (~> 3.0.0)
  erubis (~> 2.7.0)
builder (3.0.0)
erubis (2.7.0)
haml (3.1.6)

jquery-rails (2.0.2)
  railties (>= 3.2.0, < 5.0) 
```

这是某处记录在案的更改，还是相关的宝石猴子修补了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-06T02:59:34.383

[API](http://api.rubyonrails.org/classes/AbstractController/Layouts/ClassMethods.html#method-i-layout)是这样解释的：

如果指定的布局是：

*   一个字符串：该字符串是模板名称
*   一个符号：调用该符号指定的方法，该方法将返回模板名称
*   `false`: 没有布局
*   `true`: 提出一个`ArgumentError`
*   `nil`：通过继承强制默认布局行为

所以`nil`从没有布局的意思变成了“强制默认布局行为与继承”。似乎 Rails Guides 中的解释不正确。

# prolog - prolog跟踪如何使用

> ID：11355151
> 
> 赞同：4
> 
> 时间：2012-07-06T02:39:29.170
> 
> 标签：prolog, trace

跟踪prolog程序时如何进行第二步？例如，我想跟踪以下简单程序：

```
length1([],0).
length1([_X|Xs],N):- length1(Xs,N1), N is N1+1. 
```

我跟踪程序：

```
?- trace,length([1,2,3],N).
Call: (7) length([1, 2, 3], _G231) ? 
Exit: (7) length([1, 2, 3], 3) ? creep
N = 3. 
```

但正如我们所见，它立即给出了答案。但我认为它应该像`Call:(8) ... Call:(9) ...`我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T06:01:56.343

查看您的目标，您使用的是内置的`length/2`，而不是您自己的`length1/2`。内置插件通常无法追踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:25:07.687

编译文件后（例如 [length_program]. ），您需要编写跟踪。然后运行你的命令，但我猜你错过了拼写代码。您已将 pred 定义为 length1 ，因此您需要在跟踪之后准确地放置 length1

# python - 稀疏矩阵加法

> ID：11355154
> 
> 赞同：0
> 
> 时间：2012-07-06T02:39:55.237
> 
> 标签：python, scipy

我正在使用在 scipy 中实现的稀疏矩阵格式作为 csr_matrix。我有一个 mat 变量，它是 csr_matrix 格式的，它的所有元素都是非负的。但是，当我使用 mat + mat 操作时，非零元素数会减少，这对我来说很奇怪。想要的是逐元素加法，但为什么非元素数量会随着每个元素都是非负数而减少。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:01:21.373

SciPy 中的`nnz`成员`csr_matrix`计算显式零，因此根据您创建矩阵的方式，这可以解释您所观察到的内容。您可以通过在矩阵中显式设置零来查看此行为。

```
>>> from scipy.sparse import csr_matrix
>>> A = csr_matrix((5, 5))
>>> A.nnz
0
>>> A[0, 0] = 0
>>> A.nnz
1
>>> A[1,1] = 0
>>> A.nnz
2 
```

现在，当您执行创建新矩阵的操作（例如矩阵加法）时，不会保留显式零。

```
>>> B = A + A
>>> B.nnz
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:44:59.210

虽然它可能有点过度杀戮并且不相关，但可能值得研究这两个库

[petsc4py](http://code.google.com/p/petsc4py/)

[宠物](http://www.mcs.anl.gov/petsc/)

几乎可以解决您能想到的任何稀疏矩阵问题

# java - XSLT 和 Java：默认命名空间 XMLNS

> ID：11355156
> 
> 赞同：0
> 
> 时间：2012-07-06T02:40:02.553
> 
> 标签：java, xml, xslt, xml-namespaces, prefix

我是 XSLT 的新手，我正在尝试将一个 XML 文件转换为另一个。我的问题是原始 xml 文件中有一个没有任何前缀的命名空间“xmlns”，当我通过 xslt 将其转换为另一个命名空间时，什么也没有发生，但如果我删除了那个 xmlns 命名空间，那么它可以解决，但实际上我无法修改原始文件.xml 文件，因为我只能使用该文件，所以我必须将 xmlns 保留在原始文件中。所以任何人都可以建议对我的 .xsl 或 java 代码进行一些修改来解决这个问题。

我的原始 XML 命名空间看起来像 -

```
<?xml version="1.0" encoding="UTF-8"?>
        <manifest identifier="eXeorm_sample4823c6301f29a89a4c1f"
        xmlns:ims="http://www.imsglobal.org/xsd/imscp_v1p1"
        xmlns="http://www.imsglobal.org/xsd/imscp_v1p1"
        xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
        xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"      
</manifest> 
```

我想要的 xml 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <manifest identifier="eXescorm_quiz4823c6301f29a8419515" 
            xmlns="http://www.imsproject.org/xsd/imscp_rootv1p1p2" 
            xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
            xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        </manifest> 
```

我修改后的 XSLT-

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.imsproject.org/xsd/imscp_rootv1p1p2"
xmlns:ims="http://www.imsglobal.org/xsd/imscp_v1p1" 
xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" 
xmlns:imsmd="http://www.imsglobal.org/xsd/imsmd_v1p2" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/> 
<xsl:template match="ims:manifest">   
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:11:50.043

此页面顶部有一个搜索框：键入“XSLT 默认命名空间”，您将找到该问题的数百个答案。

顺便说一句，您的代码非常冗长。而不是这个：

```
<xsl:element name="item">
    <xsl:attribute name="identifier">ITEM-eXeorm_sample4823c6301f29a89a4d27</xsl:attribute>
    <xsl:attribute name="isvisible">true</xsl:attribute>
    <xsl:attribute name="identifierref">RES-eXeorm_sample4823c6301f29a89a4d28</xsl:attribute>
</xsl:element> 
```

用这个：

```
<item identifier="ITEM-eXeorm_sample4823c6301f29a89a4d27" invisible="true"
      identifierref="RES-eXeorm_sample4823c6301f29a89a4d28"/> 
```

# mysql - 如何在mysql触发器中同步表列中的值

> ID：11355161
> 
> 赞同：0
> 
> 时间：2012-07-06T02:40:49.450
> 
> 标签：mysql, triggers, sync, where

我需要在 mysql 触发器的表列中同步值，同时在另一列中具有相同的值。这是我的表的示例：

id___MP____sweek

1____2_____1

2____2_____1

3____1_____2

4____1_____2

5____3_____3

6____3_____3

如果用户改变，例如第一行（id=1）中的MP从2变为4，那么具有相同sweek的MP的值必须改变（例如，id=2，MP也变为4）。

我写了一个 BEFORE UPDATE 跳跳机，但它不起作用：

```
USE moodle;
DELIMITER $$

CREATE TRIGGER trigger_course_minpostUPD BEFORE UPDATE ON moodle.mdl_course_sections FOR EACH ROW     
BEGIN

    IF NEW.MP <> OLD.MP THEN 
    BEGIN
        SET @A=NEW.MP;
        SET NEW.MP = @A
        WHERE OLD.sweek=NEW.sweek;
    END;
    END IF;

END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:24:17.257

在 MySQL 触发器中，您无法影响同一张表上的其他行。你会想说这样的话：

```
UPDATE my_table SET MP=NEW.MP WHERE sweek = NEW.sweek 
```

但是——对不起——不行。这方面有一些技巧——也有丑陋的。如果您的表是 MyISAM，您可以用 MERGE 表将其包装起来，然后对 MERGE 表进行操作（此时 MySQL 并没有意识到您实际上是在修改它）。

然而，使用 MyISAM 作为存储引擎可能不是一件好事——今天的重点是 InnoDB，一个更复杂的引擎。

另一个技巧是尝试使用 FEDERATED 引擎。[请参阅Roland Bouman](http://rpbouman.blogspot.co.il/2011/10/mysql-hacks-preventing-deletion-of.html)的相关帖子。同样，这是一个肮脏的黑客。

我可能会让应用程序在同一个事务中做这件事。

# javascript - PHP 使用选择值设置变量

> ID：11355174
> 
> 赞同：0
> 
> 时间：2012-07-06T02:42:50.180
> 
> 标签：javascript, jquery, html, ajax, javascript-events

我在这里在 Wordpress 工作。

在帖子页面中，我有一个值的下拉列表：

```
<select name='imagesize'>
<option value='200x200'>200 x 200</option>
<option value='300x300'>300 x 300</option>
<option value='400x400'>400 x 400</option>
<option value='500x500'>500 x 500</option>
</select> 
```

我有一个按钮：

```
<a class="button" href="http://www.example.com/???">Click</a> 
```

我想替换“？？？” 当用户点击按钮时，当前在列表中选择的值。

任何想法我怎么能做到这一点？阿贾克斯？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:49:13.457

您应该使用表单提交按钮来提交表单。如果您使用链接，则需要先运行一些 javascript 来动态修改链接以附加您的信息。

```
<form action="yourPHP.php" method="post">

<select name='imagesize'>
<option value='200x200'>200 x 200
<option value='300x300'>300 x 300
<option value='400x400'>400 x 400
<option value='500x500'>500 x 500
</select>

<input type="submit">

</form> 
```

然后在您的 PHP 代码中，通过以下方式访问它：

```
<?php
    $yourImageSize="";
    if(isset($_POST["imagesize"]))
    {
        $yourImageSize=$_POST["imagesize"];
    }
    echo "Your image size is: ".$yourImageSize."<br>";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:08:04.500

```
<select name='imagesize' id='imagesize'>
<option value='200x200'>200 x 200</option>
<option value='300x300'>300 x 300</option>
<option value='400x400'>400 x 400</option>
<option value='500x500'>500 x 500</option>
</select>
<a class="button" id="click_btn" href="http://www.example.com/???">Click</a> 
```

你应该在元素之前添加一些javascript：

```
<script type="text/javascript">
    $("#imagesize").change(function(){
        $("#click_btn").attr("href","http://www.example.com/"+$("#imagesize").val())；
    });
</script> 
```

# android - 如何删除代码中的 frameLayout？

> ID：11355175
> 
> 赞同：3
> 
> 时间：2012-07-06T02:43:01.337
> 
> 标签：android, android-layout

我想从屏幕上删除一个包含 textview 的框架布局，以便所有其他布局向上移动并取而代之。这是布局：

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/etWarning"
                android:layout_width="fill_parent"
                android:layout_height="109dp"
                android:clickable="false"
                android:ems="10"
                android:enabled="false"
                android:focusable="false"
                android:inputType="textMultiLine" />

        </FrameLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingTop="10dp" >

            <TextView
                android:id="@+id/tvReasonLabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/ndr_Reason"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <Spinner
                android:id="@+id/spinNDRreasons"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />

        </LinearLayout>

               <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <TextView
                android:id="@+id/tvQueston"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="10dp"
                android:paddingBottom="5dp"
                android:text="Extra question goes here"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <EditText
                android:id="@+id/etResponse"
                android:layout_width="wrap_content"
                android:layout_height="120dp"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="textMultiLine" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

            <Button
                android:id="@+id/cmdDoneNDR"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/cmd_done" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

顶部布局是我希望能够添加/删除的布局，如果它不存在，其他布局会向上移动。

我需要一个框架布局吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:46:53.673

给 framelayout 一个 id，然后在您的 java 活动代码中，将该视图的 setvisibility 设置为消失。

或者

实际上，由于您在该框架布局中只有一个视图，因此您可能只想做

```
etWarning.setVisibility(View.GONE); // this is for gone

etWarning.setVisibility(View.VISBLE); // this is to show it 
```

希望这可以帮助

# html - 工具提示箭头向右

> ID：11355177
> 
> 赞同：1
> 
> 时间：2012-07-06T02:43:13.817
> 
> 标签：html, css, tooltip

我正在尝试使此工具提示箭头指向链接的右侧。

CSS

```
.tooltipside
{
position: relative;
cursor: help;
display: inline-block;
outline: none;
}

.tooltipside span
{
visibility: hidden;
position: absolute; 
bottom: -22px;

z-index: 999;
width: 52px;
margin-left: -63px;
padding: 2px;
border: 1px solid #80a7ba;
background-color: white;                     
-moz-border-radius: 4px;
border-radius: 4px;  
-moz-box-shadow: 0 1px 2px rgba(0,0,0,.4), 0 1px 0 rgba(255,255,255,.5) inset;
-webkit-box-shadow: 0 1px 2px rgba(0,0,0,.4), 0 1px 0 rgba(255,255,255,.5) inset;
box-shadow: 0 1px 2px rgba(0,0,0,.4), 0 1px 0 rgba(255,255,255,.5) inset;  
text-shadow: 0 1px 0 rgba(255,255,255,.4); 
}

.tooltipside:hover
{
border: 0; /* IE6 fix */
}

.tooltipside:hover span
{
visibility: visible;
}

.tooltipside span:before,
.tooltipside span:after
{
content: "";
position: absolute;
z-index: 1000;
bottom: -7px;
left: 50%;
margin-left: -8px;  
border-top: 8px solid #80a7ba;
border-left: 8px solid transparent;
border-right: 8px solid transparent;        
border-bottom: 0;  
}

.tooltipside span:before
{
border-top-color: #ccc;
bottom: -8px;
} 
```

​ html 是

```
 <a href='#' class='tooltipside'><span>
 <img src='http://cdn2.iconfinder.com/data/icons/32pxmania/misc_57.png' 
  border='0' width='52' height='52'></span>LINK</a> TEST TEST TEST</b>​ 
```

它目前指向工具提示的中心，我需要它指向链接。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:10:49.240

这就是你所追求的吗？[http://jsfiddle.net/kX5kH/](http://jsfiddle.net/kX5kH/)

我使用定位来移动箭头，然后在透明的broders周围交换以使箭头指向正确的方向。

注意：我添加了一个父对象`<div>`并将其绝对定位，因为否则它会紧贴边缘并且您看不到工具提示。

也没有起始`<b>`标签。

最后一点，我注意到你有一个*IE6 修复程序*，这很有趣，因为这些都不能在 IE6 中工作。框阴影、之前/之后选择器和透明边框将无法正确显示。但老实说，我不会担心 IE6 =P

希望这可以帮助。

# ios - 如何隐藏/取消隐藏特定表格单元格/行

> ID：11355181
> 
> 赞同：0
> 
> 时间：2012-07-06T02:43:37.887
> 
> 标签：ios, uitableview

XCOde 中的一个非常新手。目前我使用的是 4.2。我正在浏览一个执行特定功能的应用程序。我只是一步一步地处理应用程序应该如何工作/流程。

我只想知道单击按钮或分段控件后如何隐藏/取消隐藏特定的表格单元格/行。希望你能给个样品。

这些是我的示例表格单元格/行

`if (indexPath.row == 0){cell.textLabel.text = @"angel";}`
`if (indexPath.row == 1){cell.textLabel.text = @"bird";}`
`if (indexPath.row == 2){cell.textLabel.text = @"dog";}`
`if (indexPath.row == 3){cell.textLabel.text = @"elephant";}`
`if (indexPath.row == 4){cell.textLabel.text = @"flower";}`

我只想在单击按钮或分段控件后隐藏 row2 或任何行。反之亦然，一旦单击按钮/分段控件，再次取消隐藏行/单元格。

非常感谢您的立即回复！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:14:32.540

表不存储数据，它们只是某处托管数据的表示。

您可以做的是创建一个数组（或多个，具体取决于表中有多少部分）并让表反映数组的内容。如果要隐藏第二行，则可以从数组中删除 objectAtIndex:two。

在对数组进行任何更改后，您可以调用方法 [myTable reloadData]，它将再次循环通过委托方法并反映更改。

# image - 为什么 Cocos2d 会放大我的图像？

> ID：11355184
> 
> 赞同：0
> 
> 时间：2012-07-06T02:43:58.060
> 
> 标签：image, background, cocos2d-iphone, scaling

这是很简单的代码，但是不知道为什么 Cocos2D 继续将我的背景图片放大 x2？

我正在使用 Cocos2d Hello World 模板。除了删除 - (id) init 中的所有内容外，我没有对代码做任何事情

然后我添加了这个：

```
 //ADD BACKGROUND
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    CCSprite *background = [CCSprite spriteWithFile:@"justAbackground.png"];
    background.position = ccp(winSize.width/2, winSize.height/2);
    [self addChild:background]; 
```

当我构建并运行它时，它的大小是图像的两倍。

如果我添加：

```
background.scale = .5; 
```

这是它应该是的确切尺寸。

图像像素尺寸与 iPhone 完全相同。

我在这里想念什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:21:22.650

也许您对点坐标与像素坐标感到困惑？

在普通 iPhone 上，点和像素尺寸是相等的，并且都为 480x320 像素/点。在 Retina 设备上，点坐标保持 480x320，但像素坐标加倍为 960x640。

现在，如果您想在 Retina 设备上使用像素坐标显示常规图像，您必须*禁用*Retina 显示模式。否则 cocos2d 会将任何没有 -hd 后缀的图像放大到点尺寸。

另一种方法是启用 Retina 显示模式并使用 -hd 后缀 (justAbackground-hd.png) 以双倍分辨率保存图像。

# javascript - 简单的Javascript onclick问题

> ID：11355188
> 
> 赞同：-1
> 
> 时间：2012-07-06T02:44:37.827
> 
> 标签：javascript

我正在尝试将 onclick 方法添加到链接。

我想在用户单击链接 A 时制作 a++，而当用户单击链接 B 时，无论`a`值是什么，我都想制作 a++。

我的代码：

JS

```
var a=0;

function swapPost(a){

 //I want to make a++ when user click linkA;
 //a-- when user click linkB
 //not sure how to do this

   if(a>10){
    a=0;
   }
    if(a<0){
    a=0;
   }

}

swapPost(a); 
```

html

```
<a href="#" onclick="swapPost(a)">LinkA</a>
<a href="#" onclick="swapPost(a)">LinkB</a> 
```

我想知道是否有人可以帮助我解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:50:12.347

与其`a`作为参数传入，不如通过其 id（您尚未定义）传入被点击的链接。传入`this`函数。

```
<a id='linka' href="#" onclick='swapPost(this)'>LinkA</a>
<a id='linkb' href="#" onclick='swapPost(this)'>LinkB</a>

var a=0;    
function swapPost(nodeClicked){
   // Check the id of the node passed to the function.
   if (nodeClicked.id == 'linka') {
     a++;
   }
   else if (nodeClicked.id == 'linkb') {
     a--;
   }
   else return;

   // Set to zero if outside your bounds
   if(a>10){
    a=0;
   }
    if(a<0){
    a=0;
   }
} 
```

[在这里，它正在运行](http://jsfiddle.net/LTR92/)，登录到控制台......

通常，将函数绑定到事件而不是将它们内联到属性中是更好的做法。因为`this`里面的 an`onclick`指的是被点击的节点，所以你实际上不需要将它作为参数传入。然后，您可以绑定 onclick 事件而无需内联，并`this`在内部调用。

```
<a id='linka' href="#">LinkA</a>
<a id='linkb' href="#">LinkB</a>

var a=0;    
var swapPost = function(){
   // Check the id of the node passed to the function.
   if (this.id == 'linka') {
     a++;
   }
   else if (this.id == 'linkb') {
     a--;
   }
   else return;

   // Set to zero if outside your bounds
   if(a>10){
    a=0;
   }
    if(a<0){
    a=0;
   }
}
// Bind the function to the links
document.getElementById('linka').onclick = swapPost;
document.getElementById('linkb').onclick = swapPost; 
```

[这是更新的版本](http://jsfiddle.net/LTR92/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:47:52.737

```
<a href="#" id="a">LinkA</a>
<a href="#" id="b">LinkB</a>​ 
```

**JS**

```
<script type="text/javascript">
window.onload=function(){
    var a=0;
    var els=document.getElementsByTagName('a');
    for(i=0;i<els.length;i++)
    {
        (function(i){
            els[i].onclick=function(){
                if(this.id=='a') a++;
                else a--;
                a = a < 0 ? 0 : (a > 10 ? 0 : a);
                return false;
            }
        })(i);
    }
}
</script> 
```

[**演示。**](http://jsfiddle.net/zHwvp/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:54:37.053

试试这个： Javascript：

```
var a=0;
function swapPost(val){
  a=a+val;
 } 
```

HTML：

```
 <a href="#" onclick='javascript:return swapPost(1);'>LinkA</a>
  <a href="#" onclick='javascript:return swapPost(-1);'>LinkB</a> 
```

# share - 将文本分享到 Google+？

> ID：11355190
> 
> 赞同：1
> 
> 时间：2012-07-06T02:45:03.490
> 
> 标签：share, google-plus

我想允许我的网站（允许用户发布到网站本身，如果用户启用它，Facebook）能够将用户的帖子分享到 Google+。在阅读了我在 stackoverflow/etc 上可以找到的所有内容后，似乎官方 G+ API 不允许您将任何内容发布到用户的流中。这意味着我必须使用共享按钮/链接/等。问题是，我发现的每个共享按钮/链接都是用于共享 _url_s ......但我想共享文本（如果需要，可能还添加一个 URL）！如果已经有回答这个问题的问题，很抱歉重新发布，但它一定被隐藏在我搜索返回的 ~ 5,000 个问题之下：D

谢谢，

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:56:05.900

共享 API 旨在共享页面，尽管您可以共享一个页面并让该页面上的代码段数据包含您要共享的文本。

您可能还想查看目前处于开发者预览版中的[History API](https://developers.google.com/+/history/)，看看它是否能满足您的需求，或者向 Google 提供有关您可能需要进行哪些更改的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T07:43:29.593

您可以发布这样的消息..无论您的手机中是否安装了 G+ 应用程序，都可以尝试，这对我有用

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    shareMediaButton = (Button) findViewById(R.id.share_button);
    shareMediaButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

             if(isGooglePlusInstalled())
                    {

                 PlusShare.Builder share = new PlusShare.Builder(MainActivity.this);
                    share.setText("write your message here.....!");
                    //share.addStream(selectedImage);
                    share.setType("text/plain");

                    startActivityForResult(share.getIntent(), 0);

        }else{
             Intent shareIntent = new PlusShare.Builder(MainActivity.this)
              .setType("text/plain")
              .setText("write your message here.....!")

              .getIntent();

          startActivityForResult(shareIntent, 0);
        }
        }

        public boolean isGooglePlusInstalled()
{
    try
    {
        getPackageManager().getApplicationInfo("com.google.android.apps.plus", 0 );
        return true;
    } 
    catch(PackageManager.NameNotFoundException e)
    {
        return false;
    }
}
    });
} 
```

# jquery - 在使用 jQueryMobile 的原子提要方面需要帮助

> ID：11355192
> 
> 赞同：0
> 
> 时间：2012-07-06T02:45:29.327
> 
> 标签：jquery, jquery-mobile

从昨晚开始，我一直在尝试使用 jQueryMobile 使 atom feed 工作，但没有运气。我正在本地处理代码。

我正在使用 jQueryMobile 站点中提供的这个脚本

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

我尝试了很多代码，最终使用了这个问题[Parse RSS with jQuery中回答的代码](https://stackoverflow.com/questions/226663/parse-rss-with-jquery)

这是我的代码

```
function refreshFeed2() {
    $.get("resp2.xml", function (data) { 
        var $xml = $(data);
        $xml.find("item").each(function () {
            var $this = $(this),
            item = {
                title: $this.find("title").text(),
                link: $this.find("link").text(),
                description: $this.find("description").text(),
                pubDate: $this.find("pubDate").text(),
                author: $this.find("author").text()
            }
            alert(item.title);
        });
    });
} 
```

最后，我尝试弹出一个警报，但它没有显示任何内容。

代码有什么问题？

--- 更新 --- 我正在使用移动设备 --- 更新 ---
为了调试。这是一个更新的代码

```
function refreshFeed2() {
    alert("start call");

    $.get("resp.xml", function (data) {
        alert("start parse");

        var $xml = $(data);

        alert("set data");

        $xml.find("item").each(function () {
            var $this = $(this),
            item = {
                title: $this.find("title").text(),
                link: $this.find("link").text(),
                description: $this.find("description").text(),
                pubDate: $this.find("pubDate").text(),
                author: $this.find("author").text()
            }
            alert(item.title);
        });
    });

    alert("end call");
} 
```

所以我添加了警报..问题是它只在“开始通​​话”和“结束通话”中弹出。
我的示例 xml 看起来像这样.. 但这实际上要长得多

```
<rss    version="2.0" 
        xmlns:content="http://purl.org/rss/1.0/modules/content/" 
        xmlns:wfw="http://wellformedweb.org/CommentAPI/" 
        xmlns:dc="http://purl.org/dc/elements/1.1/" 
        xmlns:atom="http://www.w3.org/2005/Atom" 
        xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" 
        xmlns:slash="http://purl.org/rss/1.0/modules/slash/">
    <channel>
        <title>title of the feed</title>
        <atom:link href="http://www.mainlink.com/livefeed" rel="self" />
        <link>http://www.mainlink.com/</link>
        <description>
        </description>
        <language>en-us</language>
        <pubDate>Fri, 06 Jul 2012 04:47:51 +0800</pubDate>
        <lastBuildDate>Fri, 06 Jul 2012 04:47:51 +0800</lastBuildDate>
        <item>
            <title>title1</title>
            <link>http://www.link1.com/</link>
            <description>desc1</description>
            <pubDate>Fri, 06 Jul 2012 04:47:09 +0800</pubDate>
            <guid>25542832</guid>
        </item>
        <item>
            <title>title2</title>
            <link>http://www.link1.com/</link>
            <description>desc2</description>
            <pubDate>Fri, 06 Jul 2012 04:47:09 +0800</pubDate>
            <guid>25542831</guid>
        </item>
    </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:51:28.743

在其中放置一个断点并逐步执行代码。如果您的警报未显示，则意味着 1) $.get 请求失败，因此您的“成功”函数将永远不会被调用，或者 2) 您的成功函数被调用但它没有收到警报，因为其中一个`find`或`text`调用引发异常。

# parallel-processing - 使用 UPC 读取文件

> ID：11355194
> 
> 赞同：3
> 
> 时间：2012-07-06T02:45:38.810
> 
> 标签：parallel-processing, hpc, upc

我开始学习 UPC，我有以下代码来读取文件：

```
upc_file_t *fileIn;
int n;
fileIn = upc_all_fopen("input_small", UPC_RDONLY | UPC_INDIVIDUAL_FP , 0, NULL);
upc_all_fread_local(fileIn, &n, sizeof(int), 1, UPC_IN_ALLSYNC | UPC_OUT_ALLSYNC);

upc_barrier;
printf("%d\n", n);

upc_all_fclose(fileIn); 
```

但是，输出（n 的值）始终是 808651319，这意味着有问题，我找不到它是什么。我作为输入提供的文件的第一行是'7'，所以结果`printf`应该是 7...

知道为什么会这样吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:08:16.077

UPC 并行 I/O 库执行未格式化（二进制）输入/输出，而不是像您从标准 C 库中获得的那样`(f)printf(3)`格式化`(f)scanf(3)`。并行 I/O 无法处理文本文件，因为它们具有可变长度记录等固有属性。

```
upc_all_fread_local(fileIn, &n, sizeof(int), 1, UPC_IN_ALLSYNC | UPC_OUT_ALLSYNC) 
```

行为类似于以下对标准 C 库函数的调用，用于从文件中进行无格式读取：

```
fread(&n, sizeof(int), 1, fh) 
```

您只是`sizeof(int)`从文件中读取 1 个字节元素（在大多数平台上为 4 个字节）到`n`. 你得到`808651319`的十六进制数是`0x30330A37`. 在像 x86/x64 这样的小端系统上，它以`0x37 0x0A 0x33 0x30`（反转字节顺序）存储在内存和磁盘上。这些是字符串的前 4 个字节的 ASCII 代码`7\n30`（`\n`或 LF 是换行符/换行符）所以我猜你的`input_small`文件看起来像：

```
7
30...
... 
```

您应该使用而不是使用或您选择的文本编辑器来准备*二进制格式的输入数据。*`fwrite(3)``(f)printf(3)`

# php - CakePHP - 如何获取用户在 Twitter 克隆中关注的人的帖子？

> ID：11355200
> 
> 赞同：0
> 
> 时间：2012-07-06T02:46:43.080
> 
> 标签：php, mysql, cakephp, twitter, has-and-belongs-to-many

我正在尝试使用 CakePHP 构建 Twitter 克隆。我在我的模型之间建立了一个 HABTM 关系（我不是 100% 确定我这样做是否正确）。我的数据库中有 3 个表：

1.  用户（id、用户名、密码）
2.  推文（id、tweet_msg、user_id、已创建）
3.  关系（id、user_id、follower_id）

我的模型是这样设置的：

**用户模型：**

```
<?php

  class User extends AppModel {
    var $name = 'User';
    var $hasMany = 'Tweet';
    var $hasAndBelongsToMany = array(
            'Follower' => array(
                  'className'             => 'Follower',
                  'joinTable'             => 'relationships',
                  'foreignKey'            => 'user_id',
                  'associationForeignKey' => 'follower_id'
            )
      ); 
```

**推文型号：**

```
<?php

class Tweet extends AppModel {

     public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => 'Tweet.created DESC'
        )
    );

} 
```

**追随者型号：**

```
<?php

class Follower extends AppModel{
      var $name     = 'Follower';
      var $useTable = 'users';
} 
```

假设我正确设置了 HABTM 关联，​​我正在尝试获取用户关注的人的推文，但我不知道查询应该是什么样子。我尝试了几种方法来做到这一点，但没有一个奏效。我认为我不确定如何获取用户的以下 ID。我试过类似的东西：`$this->User->Follower->find('list');`但我不知道我是否走对了路。谁能告诉我如何获取用户关注的人的推文？将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:21:48.020

您应该这样设置您的用户模型：

```
<?php

class User extends AppModel {
    public $name = 'User';

    public $actsAs = array('Containable');

    public $hasMany = array(
        'Tweet'
    );

    public $hasAndBelongsToMany = array(
        'Follower' =>
            array(
                'className'             => 'User',
                'joinTable'             => 'relationships',
                'foreignKey'            => 'user_id',
                'associationForeignKey' => 'follower_id'
            )
    );

} 
```

这样做就不需要额外的 Follower 模型。接下来在你的控制器中尝试这样的事情：

```
public function followerTweets($userid) {
    $this->set('user',
        $this->User->find('all', array(
        'contain' => array(
             'Follower' => array(
                  'Tweet'
              )
        ),
        'conditions' => array(
            'User.id' => $userid
        )
    )));
} 
```

然后，您可以在视图中循环浏览指定用户的关注者的推文，如下所示：

```
<?php
$tweets = array();
foreach ($players['0']['Follower'] as $follower):
$tweets = array_merge($follower['Tweet'], $tweets);
endforeach;
?> 
```

这将为您留下一个如下所示的数组：

```
var_dump($tweets)

array
  0 => 
    array
      'id' => string '5' (length=1)
      'user_id' => string '5' (length=1)
  1 => 
    array
      'id' => string '20' (length=2)
      'user_id' => string '5' (length=1)
  2 => 
    array
      'id' => string '6' (length=1)
      'user_id' => string '4' (length=1)
  3 => 
    array
      'id' => string '7' (length=1)
      'user_id' => string '4' (length=1)
  4 => 
    array
      'id' => string '8' (length=1)
      'user_id' => string '4' (length=1)
  5 => 
    array
      'id' => string '21' (length=2)
      'user_id' => string '4' (length=1)
  6 => 
    array
      'id' => string '22' (length=2)
      'user_id' => string '4' (length=1)
  7 => 
    array
      'id' => string '23' (length=2)
      'user_id' => string '4' (length=1)
  8 => 
    array
      'id' => string '3' (length=1)
      'user_id' => string '2' (length=1)
  9 => 
    array
      'id' => string '11' (length=2)
      'user_id' => string '2' (length=1)
  10 => 
    array
      'id' => string '18' (length=2)
      'user_id' => string '2' (length=1)
  11 => 
    array
      'id' => string '26' (length=2)
      'user_id' => string '2' (length=1) 
```

# python - Python文件解析-> IndexError

> ID：11355201
> 
> 赞同：0
> 
> 时间：2012-07-06T02:46:48.310
> 
> 标签：python, string-parsing

我正在解析一个包含数百条记录的 ISI 文件，这些记录都以“”标记开头并以“ `PT J`”标记结尾`ER`。我试图从嵌套循环中的每条记录中提取标记信息，但不断收到 IndexError。我知道我为什么会得到它，但是有没有人有比检查前几个字符更好的方法来识别新记录的开始？

```
 while file:
        while line[1] + line[2] + line[3] + line[4] != 'PT J':
            ...                
            Search through and record data from tags
            ... 
```

我正在使用同样的方法，因此偶尔会在识别标签时遇到同样的问题，所以如果您对此也有任何建议，我将不胜感激！

您会注意到，示例数据并不总是包含每条记录的每个标签：

```
 PT J
    AF Bob Smith
    TI Python For Dummies
    DT July 4, 2012
    ER

    PT J
    TI Django for Dummies
    DT 4/14/2012
    ER

    PT J
    AF Jim Brown
    TI StackOverflow
    ER 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:00:14.397

```
with open('data1.txt') as f:
    for line in f:
        if line.strip()=='PT J':
            for line in f:
                if line.strip()!='ER' and line.strip():
                    #do something with data
                elif line.strip()=='ER':
                     #this record ends here move to the next record
                     break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T02:51:46.213

这些`'ER'`行是否仅包含“ER”？这就是你得到`IndexError`s 的原因，因为 line[4] 不存在。

首先要尝试的是：

```
while not line.startswith('PT J'): 
```

而不是您现有的 while 循环。

此外，**切片**：

```
line[1] + line[2] + line[3] + line[4] == line[1:5] 
```

（切片的末端不包含在内）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:54:00.977

您可以尝试这样的方法来读取您的文件。

```
with open('data.txt') as f:
    for line in f:
        line = line.split() # splits your line into a list of character sequences
                            # separated based on whitespace (blanks, tabs)
        llen = len(line)
        if llen == 2 and line[0] == 'PT' and line[1] == 'J': # found start of record
           # process
           # examine line[0] for 'tags', such as "AF", "TI", "DT" and proceed
           # as dictated by your needs. 
           # e.g., 

        if llen > 1 and line[0] == "AF": # grab first/last name in line[1] and line[2]

           # The data will be on the same line and
           # accessible via the correct index values.

        if lline == 1 and line[0] == 'ER': # found end of record. 
```

这肯定需要更多的“编程逻辑”（很可能是嵌入式循环，或者更好的是，调用函数）以将所有内容按正确的顺序/顺序放置，但基本结构已经存在，我希望能让你开始并给你一些想法.

# java - Jbutton 检索 JText.getText 并使用两个值从 arraylist 中搜索

> ID：11355204
> 
> 赞同：-2
> 
> 时间：2012-07-06T02:47:16.360
> 
> 标签：java, swing

i'm facing a problem when select a Jbutton to retrieve JText.getText and search from arraylist with two values (string,double). 以下是我的代码请帮助。谢谢

```
public void initCards(){
    StudentCard s1 = new StudentCard("1234567",5.00);
    EZLinkCard.add(s1); 
    StudentCard s2 = new StudentCard("1001001",0.00);
    EZLinkCard.add(s2);
    AdultCard a1 = new AdultCard ("5678901",20.00);
    EZLinkCard.add(a1);
}

public EZLinkCard searchCard(String cardNum){      
    for(int a=0; a < EZLinkCard.size(); a++){// Loop for print methods
        System.out.println(a);
        EZLinkCard p = (EZLinkCard)EZLinkCard.get(a);
        if (p.getCardNum().equals(cardNum)){ 
            return p;  
        } 
        else {
            JOptionPane.showMessageDialog(null,"Please Key in valid card number" );
        }
    } 

    if (event.getActionCommand().equals("Retrive card information")) {         
        String cardNum = TCardNumber.getText();
        CardList c = new CardList();
        EZLinkCard p ;
        p = c.searchCard("cardNum");
        String z = Double.toString(p.getBalance());
        TCardBalance.setText(z); 
    } 
```

线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException

```
at ezlink.MainMenu$ButtonHandler.actionPerformed(MainMenu.java:86)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased 
```

(BasicButtonListener.java:252)

```
at java.awt.Component.processMouseEvent(Component.java:6504)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6269)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4860)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege 
```

（保护域.java:76）

```
at java.security.ProtectionDomain$1.doIntersectionPrivilege 
```

(保护域.java:87)

```
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege 
```

（保护域.java:76）

```
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters 
```

(EventDispatchThread.java:211)

```
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy 
```

(EventDispatchThread.java:117)

```
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:01:03.433

我只是在猜测，但即使您输入了有效的卡号，您也可能多次收到“请输入有效的卡号”弹出窗口？如果是这样，您需要将`JOptionPane`呼叫移到`for`循环之外，就像这样......

```
public EZLinkCard searchCard(String cardNum){      
    for(int a=0; a < EZLinkCard.size(); a++){// Loop for print methods
        System.out.println(a);
        EZLinkCard p = (EZLinkCard)EZLinkCard.get(a);
        if (p.getCardNum().equals(cardNum)){ 
            return p;  
        }
    }
    JOptionPane.showMessageDialog(null,"Please Key in valid card number" );
} 
```

这是我能想到的最好的方法，但不知道您遇到的实际问题是什么。

# php - index.php/hello 而不是 index.php?title=hello

> ID：11355205
> 
> 赞同：0
> 
> 时间：2012-07-06T02:47:21.087
> 
> 标签：php, url

我试过这个，但结果好像我为 get 输入了一个 null，get 标题没有返回（我知道这可以在我的服务器上工作，因为我有 MediaWiki，它作为 index.php/main_page 工作）我想使用这种方法，因为我目前无权访问 .htaccess。

谢谢，

穆克曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:54:59.800

URL 中没有出现在 a 之后的值`?`不会被放入`$_GET`超全局变量中。您将需要`$_SERVER['REQUEST_URI']`改用。

您将需要手动解析出您要查找的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:32:09.740

也许将您的“hello”值放在 POST 而不是 GET 中来达到它是一个想法。当您出于美观 (SEO) 的原因让 URL 显示“你好”时。

# wordpress - 将鼠标悬停在链接上需要 WordPress hack/插件，在 DIV（图库）中显示图像

> ID：11355206
> 
> 赞同：1
> 
> 时间：2012-07-06T02:47:22.160
> 
> 标签：wordpress, gallery, jquery-hover

我正在为艺术画廊开发一个 WordPress 网站。客户想要一个与此完全相同的艺术家名册图片库：[http ://www.walkercontemporary.com/artists/](http://www.walkercontemporary.com/artists/)

我创建了一个自定义帖子类型，它生成一个列表、指向艺术家特定内容的链接。现在我需要一个在链接鼠标悬停时在相邻 DIV 中显示示例图像的效果。根据查看上述站点的源代码，我可以确定这是 Dreamweaver 的一项功能。我希望我的解决方案能够集成到 WordPress 易于使用的 CMS 功能中。否则我会建议客户寻求其他解决方案。他们没有足够的能力来维持大量进行手动编码的艺术家名单，并且他们不希望访客悬停在缩略图上（这是许多其他解决方案的方法）。

理想情况下，我希望在调用与自定义帖子类型中的每个艺术家关联的特色图像的列表项中生成某种 REL 值或自动生成的 onmouseover 值。这可能吗？-thx - 史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T03:23:24.377

由于某种原因，我无法访问您的网站来查看示例。

但如果我理解正确，你只需要 3-4 行 jQuery ..

```
$('#thumbs img').click(function(){
    $('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
    $('#description').html($(this).attr('alt'));// if you want to add description also
}); 
```

[演示](http://jsfiddle.net/obmerk99/6V7p5/1/)

**编辑我**

在OP的评论之后 -

我承认我错了……你不需要 4 行代码——你只需要 2 行。:-)

但是我没有错，相同的代码适用于 hover 和 click 。它本质上是一样的。

您只需要用“HOVER”更改单词（功能）“CLICK”（请注意，没有其他任何更改）

```
$('#thumbs img').hover(function(){
        $('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
    }); 
```

我也承认，有时我认为一些基本技能是理所当然的，这是我不应该的。当我学习时，我遇到了同样的初学者问题。因此，如果您仍有疑问 - 我做了 3 个演示。

1.  用拇指交换
2.  与实时链接交换
3.  与虚拟链接交换

在这里查看所有这些： [演示](http://jsfiddle.net/obmerk99/pbpHh/2/)

我希望现在很清楚。

**编辑二**

我的上帝 ！！我又错了。代码应该更短！（不需要 replace() ）

```
$('#largeImage2').attr('src',$(this).attr('href')); 
```

最终[演示](http://jsfiddle.net/obmerk99/pbpHh/3/)（更短的代码）

（顺便说一句——当网站在服务器上运行时，没有“Dreamweaver 功能”之类的东西——Dreamweaver 只是一个产生 CODE 的 UI。可能是 html / javascript / php 或其他什么。它最后只是TXT 文件。在这方面 - 它没有关于代码执行的“功能”。它可以被视为记事本的 GUI :-)。您看到的代码的“MM”部分只是通过 Dreamweaver 插入的普通 JAVASCRIPT（甚至不是最佳的）。就这样）

# ruby-on-rails - friendly_id，使用历史更新 slug

> ID：11355214
> 
> 赞同：3
> 
> 时间：2012-07-06T02:48:29.320
> 
> 标签：ruby-on-rails, friendly-id

我使用`friendly_id`如下：

```
class Page < ActiveRecord::Base
  extend FriendlyId
  friendly_id :title, :use => [:slugged, :history]
end 
```

我希望能够设置 slug（即能够设置自定义 URL）而不更改标题和维护历史中的旧 slug。

有没有一种直接的方法可以使用`friendly_id`或者我需要与历史表进行交互？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T02:02:00.133

我通过添加一个实例属性来实现这一点`url_seed`：

```
class Page < ActiveRecord::Base
  extend FriendlyId
  friendly_id :slug_for_url, :use => [:slugged, :history]

  attr_accessible :title, :url_seed
  attr_accessor :url_seed

  def slug_for_url
    self.url_seed.blank? ? self.title : self.url_seed
  end
end 
```

现在，保存时，如果`url_seed`已设置，则`friendly_id`使用自定义 URL 文本来设置 URL。奇迹般有效 ：）

# ruby-on-rails - Ruby RestClient.post 用于登录表单

> ID：11355215
> 
> 赞同：6
> 
> 时间：2012-07-06T02:48:33.207
> 
> 标签：ruby-on-rails, ruby, rest-client

我正在尝试使用以下代码登录网站：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'
require 'csv'
require 'restclient'

HEADERS_HASH = {"User-Agent" => "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.5 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.4"}

page = Nokogiri::HTML(open("http://example.com/login", HEADERS_HASH))

token = page.css("form.login_box div input")[0]['value']

login_resp = RestClient.post("https://example.com/session", {"authenticity_token" => token, "login" => 'username', "password" => 'password', "remember_me" => 1, 'commit' => 'Sign In'}) 
```

但我收到以下错误：

```
/usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/abstract_response.rb:39:in `return!': 302 Found (RestClient::Found)
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:230:in `process_result'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:178:in `block in transmit'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:745:in `start'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:172:in `transmit'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:64:in `execute'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient.rb:72:in `post'
    from btw.rb:13:in `<main>' 
```

我不确定这个错误告诉我什么？有什么建议吗？

这是表单代码：

```
<form action="https://example.com/session" class="login_box" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="Vfv9VpDzV2A4Bcgm8III8Gjhf/+GDe1EO7/3qIg+q6I="></div>
  <div style="padding:20px;">
  <fieldset>
    <label for="login">Email</label>
    <input id="login" name="login" size="40" tabindex="1" type="text" style="background-image: url(data:image/gif;base64,R0lGODlhEAAQAMQAAHgAFq9RZp8BJfT09JkCJKUuSO/q6/n//vHh5YYBGvf6+tOyucB0hsuLmpUiOpIAHIgJJtzFy7pneuvT2fP49/Dw8L5/juS+x8Scpn4BHaMDJ3cAHHQAG6YDKHEAGv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjEgNjQuMTQwOTQ5LCAyMDEwLzEyLzA3LTEwOjU3OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkZCN0YxMTc0MDcyMDY4MTFCRURDRjg2RUEzOUI0MjBEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjUyQjY0RUJGQTQ2QzExRTA5MkM2OTcwNjIwMUM1QjhFIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUyQjY0RUJFQTQ2QzExRTA5MkM2OTcwNjIwMUM1QjhFIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RkE3RjExNzQwNzIwNjgxMTkyQjA4Nzg0MUEyMjBGMUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RkI3RjExNzQwNzIwNjgxMUJFRENGODZFQTM5QjQyMEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQAAAAAACwAAAAAEAAQAAAFmGAnjmTZaSgqCCqbautKdMVaOEQsEDkRTAjN44IIyHi8R+DzYRSYjAcy+Ug0PojJZ/HoUh2BgGRwOCga4UK3uiwP3mSmJVFNBBQVQwWuVzASgAkQDmAVFIcShBCAGY0ZAAsHEZEREACOjgABBxQBDhUHFpeNG6UcDhgLHgCpBQClsKUeHBAeGxkctrAcvL2zub2+HsPExcYhADs=); padding-right: 18px; background-attachment: scroll; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(192, 31, 47); border-right-color: rgb(192, 31, 47); border-bottom-color: rgb(192, 31, 47); border-left-color: rgb(192, 31, 47); width: 288px; background-position: 100% 50%; background-repeat: no-repeat no-repeat; ">
  </fieldset>
  <fieldset>
    <label for="password">Password</label>
    <input id="password" name="password" size="40" tabindex="2" type="password" style="background-image: url(data:image/gif;base64,R0lGODlhEAAQAMQAAHgAFq9RZp8BJfT09JkCJKUuSO/q6/n//vHh5YYBGvf6+tOyucB0hsuLmpUiOpIAHIgJJtzFy7pneuvT2fP49/Dw8L5/juS+x8Scpn4BHaMDJ3cAHHQAG6YDKHEAGv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjEgNjQuMTQwOTQ5LCAyMDEwLzEyLzA3LTEwOjU3OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkZCN0YxMTc0MDcyMDY4MTFCRURDRjg2RUEzOUI0MjBEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjUyQjY0RUJGQTQ2QzExRTA5MkM2OTcwNjIwMUM1QjhFIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUyQjY0RUJFQTQ2QzExRTA5MkM2OTcwNjIwMUM1QjhFIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RkE3RjExNzQwNzIwNjgxMTkyQjA4Nzg0MUEyMjBGMUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RkI3RjExNzQwNzIwNjgxMUJFRENGODZFQTM5QjQyMEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQAAAAAACwAAAAAEAAQAAAFmGAnjmTZaSgqCCqbautKdMVaOEQsEDkRTAjN44IIyHi8R+DzYRSYjAcy+Ug0PojJZ/HoUh2BgGRwOCga4UK3uiwP3mSmJVFNBBQVQwWuVzASgAkQDmAVFIcShBCAGY0ZAAsHEZEREACOjgABBxQBDhUHFpeNG6UcDhgLHgCpBQClsKUeHBAeGxkctrAcvL2zub2+HsPExcYhADs=); padding-right: 18px; background-attachment: scroll; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(192, 31, 47); border-right-color: rgb(192, 31, 47); border-bottom-color: rgb(192, 31, 47); border-left-color: rgb(192, 31, 47); width: 288px; background-position: 100% 50%; background-repeat: no-repeat no-repeat; ">
    <a href="/forgot_password">Forgot?</a>
  </fieldset>
  <fieldset class="remember_me">
    <input id="remember_me" name="remember_me" tabindex="3" type="checkbox" value="1">
    <label for="remember_me">Remember Me</label>
  </fieldset>
  <input class="login_button" name="commit" tabindex="4" type="submit" value="Sign In">
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T03:52:52.143

您收到[302 重定向](http://en.wikipedia.org/wiki/HTTP_302)以响应您的 POST 请求。RestClient 不处理 POST 上的重定向，因此会引发异常。您需要在代码中处理此异常，以便您可以弄清楚响应是什么或它被重定向到哪里。

有关更多信息，请参阅[此处的 RestClient 文档](https://github.com/rest-client/rest-client#exceptions-see-wwww3orgprotocolsrfc2616rfc2616-sec10html)。

您还可以使用[此处描述的块形式](https://github.com/rest-client/rest-client#result-handling)，它似乎不会为 POST 302 重定向引发异常，并允许您直接在块内处理它：

```
# Follow redirections for all request types and not only for get and head
#
# RFC : "If the 301, 302 or 307 status code is received in response to a 
# request other than GET or HEAD, the user agent MUST NOT automatically 
# redirect the request unless it can be confirmed by the user, since this 
# might change the conditions under which the request was issued."
RestClient.get('http://my-rest-service.com/resource'){ |response, request, result, &block|
  if [301, 302, 307].include? response.code
    response.follow_redirection(request, result, &block)
  else
    response.return!(request, result, &block)
  end
} 
```

# php - mysql加入表php从2个表中检索数据

> ID：11355218
> 
> 赞同：0
> 
> 时间：2012-07-06T02:48:57.263
> 
> 标签：php, mysql

想知道加入表是否是从多个列中检索数据的最佳方法，例如我想从表中的两列和另一个表中的一列中检索字段。我想知道这是否是最好的方法。

为了从 php 中检索查询，我应该只做一个 mysql_num_rows 循环。正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:58:07.227

是的，join 绝对比大多数替代方案更好；这就是连接存在的原因。您的架构必须通过两个表共享的适当标识列来支持这一点（即`employees.id == paychecks.employee_id)`。如果您发现默认索引未正确使用，您可能需要创建一个索引（检查执行计划[https://dev.mysql.com /doc/refman/5.7/en/index-hints.html](https://dev.mysql.com/doc/refman/5.7/en/index-hints.html) )

您在 PHP 中迭代结果的方式取决于您用于从 MySQL 获取数据的库以及您需要对数据执行的操作。

# ruby-on-rails-3 - Rails 将路线与 slug 匹配，而不在链接中使用 ID

> ID：11355220
> 
> 赞同：4
> 
> 时间：2012-07-06T02:49:06.500
> 
> 标签：ruby-on-rails-3, routes, slug

在我的路线文件中，我可以轻松地将一个看起来像这样并且工作正常的匹配放在一起

```
match '/:slug/:id' => "pages#show", :id => :id 
```

这适用的视图中的链接是

```
link_to n.name, "/" + n.slug + "/" + n.id.to_s 
```

我宁愿不在 URL 中包含 ID 号，所以我希望做类似的事情

```
match '/:slug' => "pages#show", :slug => :slug 
```

但问题是这不会向页面显示控制器提供 id。是否有某种方法可以使用 :slug 将其与数据库中的页面进行匹配以找到 :id 以便我可以将 :id 传递给控制器​​？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T11:07:02.690

在您的路线中使用这个

```
match "/:slug" => "pages#show" 
```

并在你的控制器中使用这个通过 slug 找到页面

```
@page = Page.find_by_slug(params[:slug]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:13:25.833

看看[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id) gem，它大大简化了 slug 的路由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T12:58:03.673

你也可以这样做：

```
resources :pages, only: :show, param: :slug 
```

这将产生

> 页面 GET /pages/:slug/(.:format) pages#show

我为了能够像这样使用这个助手：`page_path(page)`，其中 page 是 的一个实例`Page`，您还需要`to_param`像这样覆盖该方法：

```
def to_param
  slug
end 
```

# iphone - 最常用的 NSString 方法有哪些？

> ID：11355222
> 
> 赞同：-3
> 
> 时间：2012-07-06T02:49:13.580
> 
> 标签：iphone, objective-c, ios, methods, nsstring

我对编程比较陌生，我想知道有哪些最常用和“基本”的 NSString 方法需要学习。显然，我无法记住所有这些，所以我只是想知道最常用的是什么？先谢谢了！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:51:23.250

这个问题太主观了。我的应用程序中最常用的 NSString 方法不一定是您的应用程序中最常用的应用*程序*。

也就是说，了解 Xcode 管理器中的文档。它会很快成为你最好的朋友（连同`.h`隐藏在 Xcode SDK 包中的 " " 头文件）。

我自己最常用的 NSString 方法可能包括：

```
stringWithFormat:
substringFromIndex:
initWithData:encoding:
initWithContentsOfURL:encoding:error:
length
stringByAppendingFormat:
compare:options: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:58:22.387

我发现当你有一个特定的目标时更容易学习。

话虽如此，这里有一些常见的：

```
myString = [NSString stringWithString:@"LOL! BBQ! ROFL!"];
int length = [myString length];
myString = [myString characterAtIndex:7];
myString = [myString stringByReplacingOccurrencesOfString:@"LOL" withString:@"ROFL"];
mystring = [myString lowercaseString];
int seven = [myString integerValue]; // converts @"7" into the integer 7. 
```

您可以在[此处仔细阅读整个列表](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

# ios - 如何为分组样式表视图的给定部分设置固定高度？

> ID：11355223
> 
> 赞同：1
> 
> 时间：2012-07-06T02:49:35.457
> 
> 标签：ios, tableview

我们确实遇到过许多关于控制分组表视图的页眉和页脚部分高度的帖子。我们正在寻找的是一种控制分组表视图的给定部分的整个高度的方法。换句话说，该部分返回的行数可能只有两行，但我们希望表格显示包含五个单元格，最后三个单元格为空。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:54:57.010

在这种情况下，您需要从 中返回 5 `numberOfRowsInSection:`，然后在`cellForRowAtIndexPath:`中检测到您没有*真正的*单元格并获得一个“空白”单元格以供使用（可以/应该是重复使用的原型）。

```
if(indexPath.row >= [[myModelArray objectAtIndex:indexPath.section] count]) {
  // use a 'blank' cell...
} else {
  // build a 'legit' cell...
} 
```

# bluetooth - 两个中央，一个外围

> ID：11355236
> 
> 赞同：5
> 
> 时间：2012-07-06T02:51:54.590
> 
> 标签：bluetooth, bluetooth-lowenergy

BTLE (4.0) 外围设备是否可以在中心连接后保持广告，然后另一个中心也可以同时连接？

我找不到清楚地解决这个问题的方法，但很明显中央可以一次连接到 n 个外围设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:11:04.100

蓝牙核心规范第 4 版在第 200 页上这样说：

“Peripheral 角色针对支持单个连接的设备进行了优化，并且没有中央设备那么复杂。支持 Peripheral 角色的设备只需要支持 Controller 从属角色的 Controller。Central 角色支持多个连接，并且是所有连接的发起者与外围角色设备的连接。支持中心角色的设备需要一个控制器，该控制器支持控制器的主角色，并且与其他 LE GAP 角色相比，通常支持更复杂的功能。

这对我来说似乎是一个不，但它并不像你希望的那样具体。

您可以在以下链接找到来自 bluetooth.com（以前称为 bluetooth.org）的已采用蓝牙规范的列表：

> [https://www.bluetooth.com/specifications/adopted-specifications](https://www.bluetooth.com/specifications/adopted-specifications)

上面的引用来自核心版本 4.0 第 200 页，也可在核心版本 4.2 第 98 页中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-08T23:43:06.020

“蓝牙规范版本 4.2 [Vol 3, Part C]”陈述了以下几个方面：

• 第 231 页：2.2.2.3 外设角色“任何接受使用第 9 节中定义的任何连接建立过程建立 LE 物理链路的设备都称为外设角色。”</p>

• 来自第 351 页“有限可发现模式”部分的第 9 节： 9.2.3.2 条件设备不应支持受限可发现模式。” ...“在有限可发现模式下，设备应发送带有广告数据的广告事件类型，包括 [核心规范补充]，A 部分，第 1.3 节中定义的标志 AD 类型，并按所述设置所有以下标志”“设备应保持有限的可发现模式，直到建立连接或主机终止该模式。”

• 来自第 352 页“一般可发现模式”部分的第 9 节：9.2.4.2 条件“当设备处于外围角色时，该设备可能支持一般可发现模式。当设备处于广播者、观察者或中心角色时设备不应支持一般可发现模式。” ...“虽然在一般可发现模式下，设备应发送带有广告数据的广告事件，包括 [核心规范补充]，A 部分，第 1.3 节中定义的标志 AD 数据类型，并按所述设置所有以下标志”.. . “设备应保持在一般可发现模式，直到建立连接或主机终止该模式。”

该标准是自信的，您必须在建立连接时停止广告。

# android - 如何与 AlarmManager 一起启动通知？

> ID：11355238
> 
> 赞同：4
> 
> 时间：2012-07-06T02:52:41.237
> 
> 标签：android, alarmmanager, android-notifications, reminders

我想弄清楚我应该如何启动通知。创建通知不是我要的，而是一种在后台启动它的方式，这样它不引人注目，用户可以做他们正在做的任何事情。它的日历，准确的提醒。同样重要的是要注意我正在使用`AlarmManager`.

1.  我应该使用什么方法在后台运行它。`BroadCastReciever`,`Service`等。

2.  我发现的研究也提出了一个问题`AlarmManager`。当应用程序被杀死或手机关闭时，警报也是如此。我应该使用什么其他方法来确保保证显示该事件提醒的通知？

如果需要任何其他信息，请询问，我会这样做。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:09:09.463

创建一个广播接收器或意图服务。然后...

```
AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

Date date = new Date(); //set this to some specific time
or Calendar calendar = Calendar.getInstance();

//set either of these to the correct date and time. 

then 
Intent intent = new Intent();
//set this to intent to your IntentService or BroadcastReceiver
//then...
PendingIntent alarmSender = PendingIntent.getService(context, requestCode, intent,
                            PendingIntent.FLAG_CANCEL_CURRENT);
//or use PendingIntent.getBroadcast if you're gonna use a broadcast

                alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), mAlarmSender); // date.getTime to get millis if using Date directly. 
```

如果您希望这些警报即使在手机重新启动时也能正常工作，请添加：

```
 <action android:name="android.intent.action.BOOT_COMPLETED"/> 
```

作为清单中接收器上的意图过滤器，并在 onReceive 中重新创建警报。

编辑

当你在你的应用程序中创建一个 BroadcastReceiver 时，它允许做它听起来的样子：在系统中接收广播。因此，例如，您可能会像这样使用一些 BroadcastReceiver：

```
public class MyAwesomeBroadcastReceiver extends BroadcastReceiver {

//since BroadcastReceiver is an abstract class, you must override the following:

    public void onReceive(Context context, Intent intent) {
       //this method gets called when this class receives a broadcast
    }
} 
```

要显式向此类发送广播，请在清单中定义接收器，如下所示：

```
<receiver android:name="com.foo.bar.MyAwesomeBroadcastReceiver" android:enabled="true" android:exported="false">
            <intent-filter>

                <action android:name="SOME_AWESOME_TRIGGER_WORD"/>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>

            </intent-filter>
        </receiver> 
```

在清单中包含此内容可为您带来两件事：您可以随时通过以下方式向接收器显式发送广播

```
Intent i = new Intent("SOME_AWESOME_TRIGGER_WORD");
                sendBroadcast(intent); 
```

此外，由于您已经告诉 android 您希望接收系统广播的 BOOT_COMPLETED 操作，因此您的接收器也会在发生这种情况时被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T02:57:17.940

使用 AlarmManager 是最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:12:05.287

**这是您可以执行的操作：**

1.  `Service`通过您的待处理意图启动`AlarmManager's`并在该服务中编写您的`Notification`代码。

2.  使用数据库存储所有您的信息`Alarms`，然后在设备重新启动时使用`BOOT_COMPLETED` `Broadcast reciver`.

# wix - 如何使用 WiX 使安装程序窗口可调整大小？

> ID：11355239
> 
> 赞同：2
> 
> 时间：2012-07-06T02:52:44.660
> 
> 标签：wix

我正在使用 WiX 构建一个安装程序，它具有基于 Minimal 界面的自定义 UI。运行安装程序时，我注意到它的窗口在右下角没有调整大小，并且它的最大化按钮被禁用。我怎样才能启用这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:52:29.303

我怀疑这在 Windows Installer UI 上是否可行。

WiX 元素[`<Dialog/>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_dialog.htm)依赖于[Dialog 表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368286.aspx)，也就是说，它只能做表允许它做的事情。该表没有通过直接列或[对话框样式位](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368285.aspx)定义调整大小按钮和/或夹点的设置。

# vba - Outlook 中的 VBA 可扩展性

> ID：11355245
> 
> 赞同：0
> 
> 时间：2012-07-06T02:53:51.923
> 
> 标签：vba, outlook, ms-office, office-2007

我想为 Outlook 2007 编写一个可以在 VBA 编辑器中添加/删除模块的宏。[VBA 可扩展性库](http://www.cpearson.com/excel/vbe.aspx)看起来很完美，但 Application.VBE 之类的属性似乎无法访问。

在 Excel 中，我需要启用["Trust access to the VBA project object model"](https://i.stack.imgur.com/ANjiX.png)。不幸的是，Outlook 2007 中缺少此选项。

有谁知道解决这个问题的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:37:38.453

[我使用SendKeys](http://msdn.microsoft.com/en-us/library/aa202943%28v=office.10%29.aspx)解决了这些限制：

*   Alt-F11
*   Ctrl-M
*   代码模块的路径
*   进入

不优雅，但足够好。

# excel - 简化 =Mid() 公式

> ID：11355253
> 
> 赞同：1
> 
> 时间：2012-07-06T02:55:16.403
> 
> 标签：excel, excel-formula

假设我想测试单元格 A1 中的第一个字母是否是“A”。

> =中(A1, 1, 1)="A"

现在假设我想知道单元格 A1 中的第一个或第四个字母是“A”。

我原以为你可以这样：

> =中（A1，或（1,4），1）=“A”

而不必这样做：

> =IF(MID(A1,1,1)="A",TRUE,IF(MID(A!,4,1)="A",TRUE,FALSE))

我在正确的轨道上吗？我可以让公式更简单吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:05:13.307

使用此公式，`=OR(MID(A2,{1,4},1)="A")`但输入为“数组公式”。即，按 ctrl+shift+enter 而不是像往常那样只输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:57:53.807

您可以使用 AND 功能

```
=OR(Mid(A1, 1, 1)="A",Mid(A1, 4, 1)="A") 
```

AND 接收逻辑输入测试，并在它们之间返回一个“AND”操作

然后，您只需在 IF 上使用它

**编辑：** 考虑到评论，您应该使用函数分隔符来考虑您的小数分隔符。由于您应该使用逗号作为小数分隔符，因此您需要用分号来分隔函数的参数。在这种情况下，假设您使用句点分隔十进制数，您将使用逗号分隔函数的参数。感谢您的评论。（抱歉英语不好）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T03:05:31.573

OR 函数需要在外部：

```
=OR(MID(A1, 1, 1)=”A”, MID(A1, 4, 1)=”A”) 
```

# eclipse - 资源不在 Java 项目的构建路径上

> ID：11355255
> 
> 赞同：3
> 
> 时间：2012-07-06T02:55:34.777
> 
> 标签：eclipse, maven, eclipse-plugin

我在 maven 的帮助下构建我的项目。我在 eclipse 中安装了 m2e 插件。但是，每次它给我这个消息：

该资源不在 Java 项目的构建路径上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-01T02:56:02.877

这是我所做的

右键单击项目属性 ==> 项目方面-> 检查 Java 选项，然后按确定。

如果单击项目构面后没有构面退出，则添加一个并检查 java 选项，您应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:00:39.737

```
If you right-click on your project, there should be an option under 
"maven" to "enable dependency management" 
```

如果您导入使用 mvn eclipse:eclipse 创建的项目，m2eclipse 默认不会执行此操作。

# google-maps-api-3 - 使用 google maps places API 获取相关（而非伪随机）结果

> ID：11355256
> 
> 赞同：0
> 
> 时间：2012-07-06T02:55:35.697
> 
> 标签：google-maps-api-3, google-places-api

我阅读了有关 Places API 的所有帖子（此处和其他地方），但仍然找不到解决方案。我有一个表格，用户可以在其中输入街道和号码或建筑物名称（如商场）。我想在提交和显示地图之前通过地理编码（如果是数字）或地点（如果是名称）验证信息，因为我需要确切的地址，但是地点搜索给了我伪随机结果。例如：

```
var cityCenter = new google.maps.LatLng(1.30563, 103.83751);
var building = 'Forum';
places = new google.maps.places.PlacesService(map); 
places.search({ location: cityCenter, radius:'50000', query:building }, function(results, status) 
{
    console.log(results);
}); 
```

maps.google.com 上的第一个结果是完美的。实际上，前几个结果是相关的或至少包含“论坛”一词。在我的应用程序中，我得到了 20 个与我的查询无关（显然）的结果。

有什么办法可以得到与网站相同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:46:26.430

看来您正在尝试使用该[`places.textSearch`](https://developers.google.com/maps/documentation/javascript/places#TextSearchRequests)服务，因为您正在使用该`query`参数，但是您正在调用该[`places.search`](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)服务。

尝试：

```
places.textSearch({ location: cityCenter, radius:'50000', query:building }, function(results, status) 
{
    console.log(results);
}); 
```

# php - CActiveDataProvider 根本不返回数据，只返回结构

> ID：11355264
> 
> 赞同：1
> 
> 时间：2012-07-06T02:57:40.283
> 
> 标签：php, mysql, yii

所以，我对 yii 有点陌生，如果这听起来像一个蹩脚的问题，我很抱歉，但我有一些奇怪的行为。我正在尝试加载带有评论的博客文章，但 actionView 仅返回博客文章：

```
 public function actionView($id)
    {
           $model = $this->loadModel($id);
           $criteria = new CDbCriteria;
           $criteria->condition = 'postId = ' . $id;
           $criteria->order = 'commentTime desc';
           $criteria->with = array('user');
           $dataSet = new CActiveDataProvider('Comments', array(
             'criteria' => $criteria,
            )
           );
           echo "<pre>";
           print_r($dataSet);
           echo "</pre>";
           $this->render('view',array(
                    'model'=>$model,
                    'dataSet'=>$dataSet,

            ));
    } 
```

现在查看文件：

```
$this->renderPartial('_view',array('data'=>$model,));
$this->renderPartial('comments',array('data'=>$dataSet,)); 
```

有趣的是，根据日志，它甚至没有从评论表中选择，但是当我 print_r 时，我得到了表的整个结构。

```
CActiveDataProvider Object
(
    [modelClass] => Comments
    [model] => Comments Object
        (
            [_md:CActiveRecord:private] => CActiveRecordMetaData Object
                (
                    [tableSchema] => CMysqlTableSchema Object
                        (
                            [schemaName] => 
                            [name] => Comments
                            [rawName] => `Comments`
                            [primaryKey] => id
                            [sequenceName] => 
                            [foreignKeys] => Array
                                (
                                    [postId] => Array
                                        (
                                            [0] => Posts
                                            [1] => id
                                        )

                                    [userId] => Array
                                        (
                                            [0] => users
                                            [1] => id
                                        )

                                )

                            [columns] => Array
                                (
                                    [id] => CMysqlColumnSchema Object
                                        (
                                            [name] => id
                                            [rawName] => `id`
                                            [allowNull] => 
                                            [dbType] => int(11)
                                            [type] => integer
                                            [defaultValue] => 
                                            [size] => 11
                                            [precision] => 11
                                            [scale] => 
                                            [isPrimaryKey] => 1
                                            [isForeignKey] => 
                                            [autoIncrement] => 1
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [postId] => CMysqlColumnSchema Object
                                        (
                                            [name] => postId
                                            [rawName] => `postId`
                                            [allowNull] => 
                                            [dbType] => int(11)
                                            [type] => integer
                                            [defaultValue] => 
                                            [size] => 11
                                            [precision] => 11
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 1
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [userId] => CMysqlColumnSchema Object
                                        (
                                            [name] => userId
                                            [rawName] => `userId`
                                            [allowNull] => 
                                            [dbType] => int(11)
                                            [type] => integer
                                            [defaultValue] => 
                                            [size] => 11
                                            [precision] => 11
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 1
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [commentTime] => CMysqlColumnSchema Object
                                        (
                                            [name] => commentTime
                                            [rawName] => `commentTime`
                                            [allowNull] => 
                                            [dbType] => timestamp
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 
                                            [precision] => 
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [commentText] => CMysqlColumnSchema Object
                                        (
                                            [name] => commentText
                                            [rawName] => `commentText`
                                            [allowNull] => 
                                            [dbType] => mediumtext
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 
                                            [precision] => 
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [voteUp] => CMysqlColumnSchema Object
                                        (
                                            [name] => voteUp
                                            [rawName] => `voteUp`
                                            [allowNull] => 
                                            [dbType] => mediumint(8) unsigned
                                            [type] => integer
                                            [defaultValue] => 0
                                            [size] => 8
                                            [precision] => 8
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [voteDown] => CMysqlColumnSchema Object
                                        (
                                            [name] => voteDown
                                            [rawName] => `voteDown`
                                            [allowNull] => 
                                            [dbType] => mediumint(8) unsigned
                                            [type] => integer
                                            [defaultValue] => 0
                                            [size] => 8
                                            [precision] => 8
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [reports] => CMysqlColumnSchema Object
                                        (
                                            [name] => reports
                                            [rawName] => `reports`
                                            [allowNull] => 
                                            [dbType] => smallint(5) unsigned
                                            [type] => integer
                                            [defaultValue] => 0
                                            [size] => 5
                                            [precision] => 5
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                )

                            [_e:CComponent:private] => 
                            [_m:CComponent:private] => 
                        )

                    [columns] => Array
                        (
                            [id] => CMysqlColumnSchema Object
                                (
                                    [name] => id
                                    [rawName] => `id`
                                    [allowNull] => 
                                    [dbType] => int(11)
                                    [type] => integer
                                    [defaultValue] => 
                                    [size] => 11
                                    [precision] => 11
                                    [scale] => 
                                    [isPrimaryKey] => 1
                                    [isForeignKey] => 
                                    [autoIncrement] => 1
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [postId] => CMysqlColumnSchema Object
                                (
                                    [name] => postId
                                    [rawName] => `postId`
                                    [allowNull] => 
                                    [dbType] => int(11)
                                    [type] => integer
                                    [defaultValue] => 
                                    [size] => 11
                                    [precision] => 11
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 1
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [userId] => CMysqlColumnSchema Object
                                (
                                    [name] => userId
                                    [rawName] => `userId`
                                    [allowNull] => 
                                    [dbType] => int(11)
                                    [type] => integer
                                    [defaultValue] => 
                                    [size] => 11
                                    [precision] => 11
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 1
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [commentTime] => CMysqlColumnSchema Object
                                (
                                    [name] => commentTime
                                    [rawName] => `commentTime`
                                    [allowNull] => 
                                    [dbType] => timestamp
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 
                                    [precision] => 
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [commentText] => CMysqlColumnSchema Object
                                (
                                    [name] => commentText
                                    [rawName] => `commentText`
                                    [allowNull] => 
                                    [dbType] => mediumtext
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 
                                    [precision] => 
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [voteUp] => CMysqlColumnSchema Object
                                (
                                    [name] => voteUp
                                    [rawName] => `voteUp`
                                    [allowNull] => 
                                    [dbType] => mediumint(8) unsigned
                                    [type] => integer
                                    [defaultValue] => 0
                                    [size] => 8
                                    [precision] => 8
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [voteDown] => CMysqlColumnSchema Object
                                (
                                    [name] => voteDown
                                    [rawName] => `voteDown`
                                    [allowNull] => 
                                    [dbType] => mediumint(8) unsigned
                                    [type] => integer
                                    [defaultValue] => 0
                                    [size] => 8
                                    [precision] => 8
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [reports] => CMysqlColumnSchema Object
                                (
                                    [name] => reports
                                    [rawName] => `reports`
                                    [allowNull] => 
                                    [dbType] => smallint(5) unsigned
                                    [type] => integer
                                    [defaultValue] => 0
                                    [size] => 5
                                    [precision] => 5
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                        )

                    [relations] => Array
                        (
                            [user] => CBelongsToRelation Object
                                (
                                    [joinType] => LEFT OUTER JOIN
                                    [on] => 
                                    [alias] => 
                                    [with] => Array
                                        (
                                        )

                                    [together] => 
                                    [scopes] => 
                                    [name] => user
                                    [className] => User
                                    [foreignKey] => userId
                                    [select] => *
                                    [condition] => 
                                    [params] => Array
                                        (
                                        )

                                    [group] => 
                                    [join] => 
                                    [having] => 
                                    [order] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [post] => CBelongsToRelation Object
                                (
                                    [joinType] => LEFT OUTER JOIN
                                    [on] => 
                                    [alias] => 
                                    [with] => Array
                                        (
                                        )

                                    [together] => 
                                    [scopes] => 
                                    [name] => post
                                    [className] => Posts
                                    [foreignKey] => postId
                                    [select] => *
                                    [condition] => 
                                    [params] => Array
                                        (
                                        )

                                    [group] => 
                                    [join] => 
                                    [having] => 
                                    [order] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                        )

                    [attributeDefaults] => Array
                        (
                            [voteUp] => 0
                            [voteDown] => 0
                            [reports] => 0
                        )

                    [_model:CActiveRecordMetaData:private] => Comments Object
 *RECURSION*
                )

            [_new:CActiveRecord:private] => 
            [_attributes:CActiveRecord:private] => Array
                (
                )

            [_related:CActiveRecord:private] => Array
                (
                )

            [_c:CActiveRecord:private] => 
            [_pk:CActiveRecord:private] => 
            [_alias:CActiveRecord:private] => t
            [_errors:CModel:private] => Array
                (
                )

            [_validators:CModel:private] => 
            [_scenario:CModel:private] => 
            [_e:CComponent:private] => 
            [_m:CComponent:private] => 
        )

    [keyAttribute] => 
    [_criteria:CActiveDataProvider:private] => CDbCriteria Object
        (
            [select] => *
            [distinct] => 
            [condition] => postId = 2
            [params] => Array
                (
                )

            [limit] => -1
            [offset] => -1
            [order] => commentTime desc
            [group] => 
            [join] => 
            [having] => 
            [with] => Array
                (
                    [0] => user
                )

            [alias] => 
            [together] => 
            [index] => 
            [scopes] => 
            [_e:CComponent:private] => 
            [_m:CComponent:private] => 
        )

    [_id:CDataProvider:private] => Comments
    [_data:CDataProvider:private] => 
    [_keys:CDataProvider:private] => 
    [_totalItemCount:CDataProvider:private] => 
    [_sort:CDataProvider:private] => 
    [_pagination:CDataProvider:private] => 
    [_e:CComponent:private] => 
    [_m:CComponent:private] => 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:30:09.897

您正在为 SQL 注入（或至少有可能）以这种方式构建您的标准做好准备。如果你做这样的事情，你会得到你的结果吗？

```
public function actionView($id)
{
       // the with will load your comments through your Blog relationship
       // with the comments and then user your Comment -> User relationship as well
       // doing it this way eliminates the need for creating your own criteria object
       $model = Blog::model()->with('comments.user')->findByPk((int)$id);

       // we then set a defaultOrder here
       $dataSet = new CActiveDataProvider($model->comments, array(
           'sort'=>array(
               'defaultOrder'=>'commentTime desc',
           ),
        )
       );
       echo "<pre>";
       print_r($dataSet);
       echo "</pre>";

       ....

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:16:34.277

试试这个模型调试器，然后测试你的输出，请把你的问题说清楚。`http://www.kevinkorb.com/post/26`

# windows - 在 Windows 中打开文件的最基本方法

> ID：11355265
> 
> 赞同：3
> 
> 时间：2012-07-06T02:57:44.403
> 
> 标签：windows

我正在编写一个静态链接（到其他库或应用程序）的库。我想让我的图书馆尽可能小。我的图书馆需要读取文件；文件名将提前知道，并且只包含 ASCII 字符。我的库绝对没有用户界面或 GUI 代码；它只是要调用的函数。

我应该调用什么函数来打开我的文件，链接器会尽可能少地引入额外的代码？

大概`CreateFile()`是位于共享库中的基本内置 Windows 功能。那么，我应该只使用`CreateFileA()`（以避免转换为宽字符）吗？

因为`CreateFileA()`我需要包括`Windows.h`；这会增加我的图书馆的规模吗？如果是这样，定义有`WINDOWS_LEAN_AND_MEAN`帮助吗？

我应该使用`_open()`吗？或者，我想应该是`_sopen_s()`现在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:06:40.627

_open 及其衍生品使用标准 c 库，这通常会增加库的大小。CreateFile 是要走的路。A 或 W 取决于您是否需要以 Unicode 链接，这取决于您要链接的内容。

# php - php中“新”对象的引用变量的寿命是多少？

> ID：11355267
> 
> 赞同：0
> 
> 时间：2012-07-06T02:57:48.677
> 
> 标签：php

假设我有一个名为 a.php 的 php 文件：

```
//a.php
<?php require_once('b.php'); ?> 
```

在 b.php 我有：

```
//b.php
<?php
     if (!$obj) $obj = new myclass();
?> 
```

那么它的寿命是`$obj`多少呢？
如果我多次刷新 a.php，我会得到多个实例`myclass`吗？

另外，如果我想`$obj`在其他页面中使用参考，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:01:26.990

该对象在脚本结束之前一直处于 MOST 状态，并且通常对象不会在页面加载之间持续存在。*您可以从包含在 a.php 中的其他脚本*引用 $obj ，但前提是它们包含在*同一个请求*中……其他请求也可能包含 b.php，但它确实是 myclass 的*新*实例。

为了引用相同的实体（即相同的概念对象），您需要一种持久性机制，以及一种使用持久化数据（通常通过 URL 参数传递）初始化任何给定 myclass 实例的方法。

# javascript - 使用 Javascript/jQuery 裁剪图像

> ID：11355273
> 
> 赞同：1
> 
> 时间：2012-07-06T02:59:16.627
> 
> 标签：javascript, jquery

我有一个显示几个缩略图的页面。当用户将鼠标悬停在这些图像上时，将出现一个显示完整图像的模式窗口。

**问题：**为了节省空间，我只想在服务器上存储图像的 1 个版本（原始版本），并在客户端“动态”创建缩略图，可能使用 javascript 进行裁剪（无需调整大小） /jquery。这可能吗？

*我见过（但没有尝试过）那些 jquery 裁剪插件，它们似乎有很多功能，比如交互式裁剪工具。我不需要这些功能，只想使用 javascript 进行裁剪。最有可能在图像中心使用重力进行裁剪。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:08:29.877

您可以使用 css 从中心部分裁剪图像。

看[演示](http://jsfiddle.net/H3Qpw/)

```
<div class="content">
<img src="http://www.letsgodigital.org/images/producten/2086/testrapport/nikon-p90-picture.jpg" width="400" height="400" />
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

​.content {
width:200px;//require width
height:200px;//require height
overflow:hidden;    
}
.content img {
margin-left:-50%;
 margin-top:-50%;   
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:31:24.043

为了获得等效的裁剪，一个 css 解决方案是`overflow:hidden`在每个全尺寸图像的外部容器上使用。

假设你想要 50px x 50px 的缩略图：

```
<div id="thumbnail_1" style="overflow: hidden; width: 50px; height:50px"> 
  <img src="..."/>  <!-- this is the full-size image -->
</div>

<div id="thumbnail_2" style="overflow: hidden; width: 50px; height:50px"> 
  <img src="..."/>
</div>

<div id="thumbnail_3" style="overflow: hidden; width: 50px; height:50px"> 
  <img src="..."/>
</div> 
```

# php - 如果语句 - WordPress

> ID：11355274
> 
> 赞同：0
> 
> 时间：2012-07-06T02:59:19.463
> 
> 标签：php, wordpress, if-statement

我怎么能在'if语句'中写这个，所以如果有内容它会发布，否则它不会输出任何东西？

**代码编辑：** 现在的问题是它不会输出*p 标签*，只是文本。

```
<?php 
```

`$desc = $custom_metabox->the_value('description');`

`if (!empty($desc)): ?>`

`<p class="description"><?php echo $desc; ?></p>`

`<?php endif; ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:04:16.320

PHP 允许您“退出”块内的解析......只需确保正确匹配大括号：

```
<?php if($whatYouWantToExist) { ?>
    <p class="description"><?php
    // usually needed
    global $custom_metabox;
    // get the meta data for the current post
    $custom_metabox->the_meta();
    // get value directly
    $custom_metabox->the_value('description'); 
    ?></p >
<?php } ?> 
```

# c# - 自动发送电子邮件应用程序

> ID：11355281
> 
> 赞同：0
> 
> 时间：2012-07-06T03:00:07.957
> 
> 标签：c#, email

我要开发一个网站，帮助向许多电子邮件地址发送电子邮件。本网站允许用户注册帐户。用户添加他的电子邮件地址后（例如：abc@gmail.com、abc@xxx.com），他可以创建他要发送的电子邮件列表。然后他单击发送，电子邮件将发送给列表中的人。

所以问题是我需要一个步骤来配置他的电子邮件信息吗？我的意思是他可以进入 smtp 服务器、端口……为他的电子邮件。例如：他使用 gmail -> abc@gmail.com。他需要输入

*Google Gmail 接收邮件服务器 (POP3) - pop.gmail.com（启用 SSL，端口 995） 发送邮件服务器 - 使用本地 ISP 或 smtp.gmail.com 提供的 SMTP 邮件服务器地址（启用 TLS，端口 587）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:06:13.557

它行不通。

1) 许多用户不知道他们的电子邮件服务器详细信息。

2) 许多邮件服务器不会接受来自不在其域中的 IP 的传出邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:38:20.623

您可以在与 Web 服务器相同的服务器上安装/启用 SMTP 服务器。提供一个页面，用户可以在其中输入“发件人”和“收件人”地址。从您的服务器发送电子邮件，但“欺骗”“发件人”电子邮件 ID。这样用户就不必输入他们的电子邮件服务器详细信息。

```
 public void SendEmailAsync(string id, string to, string from, string subject, string message, SendCompletedEventHandler callback)
    {
        // Command line argument must the the SMTP host.
        var client = new SmtpClient(ConfigurationManager.AppSettings["SmtpServer"]);

        if (bool.Parse(ConfigurationManager.AppSettings["PickupDirectoryFromIis"]))
        {
            client.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;
        }

        // Specify the message content.
        var message = new MailMessage(from, to)
                          {
                              Subject = subject,
                              Body = message,
                              BodyEncoding = Encoding.UTF8,
                              SubjectEncoding = Encoding.UTF8
                          };

        client.SendCompleted += callback;
        try
        {
            client.SendAsync(message, id);
        }
        catch (SmtpException e)
        {
            this.EventLog.WriteEntry(e.ToString(), EventLogEntryType.Error);
        }
    } 
```

# oracle - 如何检查连接是否存在？

> ID：11355283
> 
> 赞同：1
> 
> 时间：2012-07-06T03:00:20.493
> 
> 标签：oracle, jdbc, connect, keep-alive

我使用 JDBC 连接到 Oracle 数据库。应用程序运行很长时间。所以我需要如果连接没有被服务器关闭，没有发生网络断开等。我应该运行小查询还是以其他方式存在？使用 isValid 我不能，因为 jdbc 驱动程序不支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T03:17:49.493

运行一个简单的查询，比如

```
SELECT 1
  FROM dual 
```

是最万无一失的方法。这就是大多数 Java EE 应用服务器为验证来自其连接池的连接是否仍处于活动状态而执行的操作。

# python - 如何通过独立的python脚本读取私人Facebook群组的墙？

> ID：11355284
> 
> 赞同：4
> 
> 时间：2012-07-06T03:00:32.677
> 
> 标签：python, facebook, facebook-graph-api, oauth, facebook-oauth

我们正在制作一款游戏，对于该游戏，我需要 1) 获取私人群组墙上的所有消息 2) 解析自上次检查以来的新消息 3) 其他不相关的内容。

我已经写过了，问题是我的访问令牌有时会过期。如何从 python 脚本中获取新的访问令牌？这个 python 脚本将运行几个星期，我不能不时在半夜醒来去点击一个对话框，授予阅读该组墙的权限。

[另外，我在这里](https://stackoverflow.com/questions/3058723/programmatically-getting-an-access-token-for-using-the-facebook-graph-api)找到了这个python代码，我试图用它来获取访问令牌，但我对oauth_args一无所知：

```
def grabAccessToken ():
  print "grabbing access token..."
  oauth_args = dict(
    client_id     = "000000000000000",
    client_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    redirect_uri  = 'http://domain.com/',
    scope         = "user_groups"
  )
  oauth_curl_cmd = [
    'curl',
    'https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(oauth_args)
  ]
  oauth_response = subprocess.Popen(
    oauth_curl_cmd,
    stdout = subprocess.PIPE,
    stderr = subprocess.PIPE
  ).communicate()[0]

  print oauth_response
  try:
      oauth_access_token = urlparse.parse_qs(str(oauth_response))['access_token'][0]
      print "got access token: "+oauth_access_token
      return(oauth_access_token)
  except KeyError:
      return('ENOTOKEN') 
```

它不断响应“{“error”：{“message”：“缺少授权代码”，“type”：“OAuthException”，“code”：1}}”

简而言之：一个独立的 Python 脚本如何能长时间阅读 Facebook 群墙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:16:13.110

> 简而言之：一个独立的 Python 脚本如何能长时间阅读 Facebook 群墙？

没有用户交互，您**无法**获得新的访问令牌。这就是弃用offline_access 的全部意义所在。

因此，当现有令牌过期时，您必须重新访问您的应用程序以获取新令牌。

我建议将您的长期访问令牌*及其*到期日期存储在您的数据库中，然后让您的应用在到期日期临近时在后台向您发送电子邮件。选择你认为合适的任何时间框架——提前几天，一两周，任何你喜欢的时间。

# perl - 未初始化值错误

> ID：11355287
> 
> 赞同：2
> 
> 时间：2012-07-06T03:00:45.723
> 
> 标签：perl

我有每 5 分钟打印一次最高间隔的程序。我以前曾将这种相同的格式与另一个类似的数组一起使用，但这次我遇到了一些错误：

*   在除法中使用未初始化的值 $min ...
*   在 sprintf 中使用未初始化的值 $yr ...
*   在 sprintf 中使用未初始化的值...

    ```
    use strict;
    use warnings;
    use Text::CSV_XS;

    my %interval; 
    my %month; @month{qw/ jan feb mar apr may jun jul aug sep oct nov dec /} = '01' .. '12';  

    foreach my $line (@lastArray){          
            $line =~ s/$/,/;
            my ($dow, $mon, $day, $hr, $min, $sec, $yr, $amt) = split /[:,]/, $line;   
            my $key = sprintf "%4d-%02d-%02d %02d:%02d",                 
                $yr, $month{lc $mon}, $day, $hr, int($min / 5) * 5;      
                if (exists $interval{$key}) {         
                    if ($interval{$key}{amt} > $amt) {             
                        $interval{$key}{amt} = $amt;             
                        $interval{$key}{data} = [split ",", $line];         
                    }     
                }     
                else { # first time in this 5 minute interval         
                $interval{$key}{amt} = $amt;         
                $interval{$key}{data} = [split ",", $line];     
                }
        }   
        my $csv = Text::CSV_XS->new ({ binary => 1 }) or die "Cannot use CSV: ".Text::CSV_XS->error_diag ();  
        $csv->eol("\n");

        # Initialize CSV files  
        open my $fh, ">", 'log_5min.csv' or die $!;  
        open my $FILE, ">", 'last_5min.stat' or die $!;

        # Print Max Busy for all intervals
        print $fh "DayofWeek,Month,Day,Time,Year,rdy,bsy,rd,wr,ka,log,dns,cls\n";
        for my $time (sort keys %interval) {   
            $csv->print($fh, $interval{$time}{data}); 
        } 
    ```

数组 @lastArray 包含以下内容：

```
Wed,Jun,13,01:00:29,2012,777,23,0,15,6,0,0,2,15,0,0
Wed,Jun,13,01:01:29,2012,782,18,0,14,3,0,0,1,14,0,0
Wed,Jun,13,01:02:29,2012,787,13,0,10,3,0,0,0,10,0,0
Wed,Jun,13,01:03:29,2012,782,18,0,15,2,0,0,1,15,0,0
Wed,Jun,13,01:04:29,2012,779,21,0,12,9,0,0,0,12,0,0
Wed,Jun,13,01:05:30,2012,777,23,0,18,5,0,0,0,18,0,0
Wed,Jun,13,01:06:30,2012,783,17,0,10,4,0,0,3,10,0,0
Wed,Jun,13,01:07:30,2012,786,14,0,6,5,0,0,3,6,0,0
Wed,Jun,13,01:08:30,2012,789,11,0,6,5,0,0,0,6,0,0 
```

如何修复错误？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:36:54.493

“在除法中使用未初始化的值 $min”：@lastArray 中的值之一的“：”或“，”少于 3 个。

“在 sprintf 中使用未初始化的值 $yr”：@lastArray 中的值之一少于 6 个“：”或“，”

等等

PS-摆脱`$line =~ s/$/,/;`。它没有做任何有用的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:01:51.637

这些不是错误，实际上这些是警告。您可以删除使用警告；（虽然不是首选）或在使用之前初始化任何变量。

这里将显示这些类型的错误，如果您为它们分配 undef 值，例如 split 没有值可以放入 $min 和 $yr 列表中。

所以无论你在哪里使用这些变量，它都会抛出警告。

为了保持更安全的一面，您可以在从拆分分配值之前使用 null 或任何您喜欢的值初始化这些值。像我的 ($dow, $mon, $day, $hr, $min, $sec, $yr, $amt) = ("","","","","","","", "");

# ruby-on-rails - 返回 nil:NilClass 的未定义方法“每个”？

> ID：11355288
> 
> 赞同：1
> 
> 时间：2012-07-06T03:00:49.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我在视图中的代码：show.html.erb

```
<ul>
<% @bullets.each do |r| %>
    <li><%= r.content %></li>
<% end %>
</ul> 
```

这是我在控制器中的代码：users_controller.rb

```
if cookies[:bullets].nil?
  @bullets = Bullet.all.shuffle.first(4)
  cookies[:bullets] = @bullets.collect(&:id)
else
 @bullets = []
 cookies[:bullets].each do |id|
   @bullets << Bullet.find(id)
 end
end 
```

这将为 nil:NilClass 返回未定义的方法“每个”

```
<% @bullets.each do |r| %> 
```

我想知道它为什么这样做，以及如何修复它以从名为“bullets”的数据库（sqlite3）表中发布四个随机固定的项目符号内容（列是内容）。

编辑：这是整个控制器：

```
class StudentsController < ApplicationController
    #GET /
    def index
      @students = Student.all 

      respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @students }
        end  
    end 

    #GET /new
    def new 
      @student = Student.new
    end 

    #POST
    def create
      @student = Student.new(params[:student])
          if @student.save
        render :file => 'app/views/success'
      else 
        render :file => 'app/views/students/fail'
      end  
        end

    #GET /students/{:id}
    def show 
       @student = Student.find_by_url(params[:id])

           respond_to do |format|
         format.html # show.html.erb
         format.json { render json: @student } 
           end  
    end

    #BULLETS Randomizing /students/new.html.erb
    if cookies[:bullets].nil?
      @bullets = Bullet.all.shuffle.first(4)
      cookies[:bullets] = @bullets.collect(&:id)
    else
     @bullets = []
     cookies[:bullets].each do |id|
       @bullets << Bullet.find(id)
     end
    end

    #GET /students/1/edit
    def edit 
        @student = Student.find_by_url(params[:id])
    end 

    def update
      @student = Student.find_by_url(params[:id])
      respond_to do |format|
        if @student.update_attributes(params[:student])
          format.html { redirect_to @student, notice: 'Student was successfully updated.'}  
        else 
          format.html { render action: "edit" } 
          format.json { render json: @student.errors, status: :unprocessable_entity } 
        end 
        end 
    end 

    #DELETE
    def destroy 
    @student = Student.find_by_url(params[:id])
    @student.destroy

        respond_to do |format|
         format.html { redirect_to students_url }
         format.json { head :no_content }
        end
    end
end 
```

编辑＃2：像这样？

```
#GET /students/{:id}
    def show 
       @student = Student.find_by_url(params[:id])

        #BULLETS Randomizing /students/show.html.erb
    if cookies[:bullets].nil?
      @bullets = Bullet.all.shuffle.first(4)
      cookies[:bullets] = @bullets.collect(&:id)
    else
     @bullets = []
     cookies[:bullets].each do |id|
       @bullets << Bullet.find(id)
     end
    end

           respond_to do |format|
         format.html # show.html.erb
         format.json { render json: @student } 
           end  
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:20:00.233

看起来应该是：

```
#GET /students/{:id}
def show 

   @student = Student.find_by_url(params[:id])

   #BULLETS Randomizing /students/new.html.erb
   if cookies[:bullets].nil?
     @bullets = Bullet.all.shuffle.first(4)
     cookies[:bullets] = @bullets.collect(&:id)
   else
     # simpler to use an 'in list' for only 4 id's
     Bullet.where("id in (?)", cookies[:bullets])
   end

   respond_to do |format|
     format.html # show.html.erb
     format.json { render json: @student } 
   end  
end 
```

请注意，我将您在数组上的循环转换`cookies`为带有“in list”的单个语句——这应该简化为查找生成的 sql。

虽然，应该将此代码推送到模型中是有争议的：

```
class Bullet < ActiveRecord::Base

  NUM_USER_BULLETS = 4
  # fetch a random set of 
  def self.user_bullets
    Bullet.all.shuffle.first(NUM_USER_BULLETS)
  end
end 
```

或类似的东西。那么你的控制器就更简单了：

```
#GET /students/{:id}
def show 

   @student = Student.find_by_url(params[:id])

   #BULLETS Randomizing /students/new.html.erb
   if cookies[:bullets].nil?
     @bullets = Bullet.user_bullets
     cookies[:bullets] = @bullets.collect(&:id)
   else
     # simpler to use an 'in list' for only 4 id's
     Bullet.where("id in (?)", cookies[:bullets])
   end

   respond_to do |format|
     format.html # show.html.erb
     format.json { render json: @student } 
   end  
end 
```

将代码迁移到您的模型中后，您的控制器就更简单了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:19:43.767

```
class StudentsController < ApplicationController
   before_filter :get_bullets, :only => [:show]

  def show

  end

  ... 

  protected

  def get_bullets
  #BULLETS Randomizing /students/new.html.erb
    if cookies[:bullets].nil?
      @bullets = Bullet.all.shuffle.first(4)
      cookies[:bullets] = @bullets.collect(&:id)
    else
     @bullets = []
     cookies[:bullets].each do |id|
       @bullets << Bullet.find(id)
     end
    end

  end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T03:22:44.607

我建议将您的“随机项目符号”代码重构`before_filter`为`show`操作并在数据库中执行随机化，这将比加载整个表并在 Ruby 中执行随机化更快：

```
class UsersController < ApplicationController
  before_filter :assign_bullets, :only => :show

  # ...

private

  def assign_bullets
    if cookies[:bullets]
      @bullets = cookies[:bullets].map { |id| Bullet.find(id) }
    else
      @bullets = Bullet.order('RANDOM()').limit(4)
      cookies[:bullets] = @bullets.map(&:id)
    end
  end
end 
```

# mysql - 使用 Access 2007，如何删除表中部分重复的记录

> ID：11355290
> 
> 赞同：1
> 
> 时间：2012-07-06T03:01:13.840
> 
> 标签：mysql, sql, ms-access, ms-access-2007

表1看起来像这样......

```
Episode | Pgm | admitdate | dischargedate
_________________________________________
2345      170   1/19/12     00/00/00
2345      170   9/1/00      00/00/00
6789      110   10/20/11    12/10/11
6789      110   12/01/11    01/01/12
3456      170   10/12/93    00/00/00
3456      170   9/1/00      00/00/00 
```

表 1 应如下所示...（仅处理出院日期 = "00/00/00" 的重复记录，并删除最大的准入日期，已出院日期的将被忽略不删除）

```
Episode | Pgm | admitdate | dischargedate
_________________________________________
2345      170   9/1/00      00/00/00
6789      110   10/20/11    12/10/11
6789      110   12/01/11    01/01/12
3456      170   10/12/93    00/00/00 
```

如果我执行 SELECT QUERY 并将 3 个字段（episode、pgm、dischargeate with criteria = "00/00/00"）分组并将 admissiondate 设置为 MIN，它会向我显示要删除的记录，但是一旦我将其设置为 DELETE QUERY，它删除所有重复的情节、pgm 和出院日期=“00/00/00”的记录。解决这个问题的最佳方法是什么？

谢谢！

# vb.net - 在我选中复选框选项后，为什么我的复选框选项文本更改为选中？

> ID：11355293
> 
> 赞同：0
> 
> 时间：2012-07-06T03:01:32.693
> 
> 标签：vb.net, visual-studio, checkbox

我在 VB 中做一个测验，所以我有一个带有问题和复选框选项的问题表格。在我选中复选框选项后，为什么我的复选框选项文本更改为选中？如果我回到上一个问题？

这是我的选项之一的代码：

```
Private Sub Option1CheckBox_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Option1CheckBox.CheckedChanged

        If Option1CheckBox.Checked = True Then

            Option4CheckBox.Checked = False
            Option2CheckBox.Checked = False
            Option3CheckBox.Checked = False

        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:32:50.547

我的猜测是，您没有向我们展示的某些代码中有错字。如果您想让它只允许一个选择，请改用[RadioButton](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.aspx)。

从上面的链接：

> 当与其他 RadioButton 控件配对时，使用户能够从一组选项中选择一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:10:23.187

那是因为您正在使用事件“CheckedChanged”，一旦您单击它，它就会勾选或取消勾选复选框。

尝试使用“点击”事件，然后您可以输入代码来选中复选框或不选中它

# php - 使用相同的表单/请求值重定向 (POST)

> ID：11355294
> 
> 赞同：1
> 
> 时间：2012-07-06T03:01:42.187
> 
> 标签：php, http

是否可以重定向到另一个页面，例如 add.php 与发送到原始页面的请求。

假设我有一个文件：form.html，它有一个 post 表单 现在我将它提交给 form.php。

我希望 form.php 将请求重定向到 add.php 以便 add 接收与 form.php 相同的 POST 参数

这样做是为了 form.php 可以分析一个名为 action 的隐藏字段，并根据其值重定向到 add.php 或 edit.php 。我知道这可以通过更改 form.action 属性在 javascript 中完成。我想知道是否可以在服务器端

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:09:17.673

您可以在 switch 或 if 块中简单地 require_once。如果您确实需要*实际*重定向（即您希望用户*知道*他们被重定向到哪里），您可能需要发送一个“假”中间页面，其中包含一个充满隐藏输入的自动提交（通过 javascript）表单。

原因在[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)中是正确的：

> 如果收到 302 状态码以响应 GET 或 HEAD 以外的请求，除非用户可以确认，否则用户代理不得自动重定向请求，因为这可能会改变发出请求的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:28:46.920

在您的 form.php 中为 form.html 中的每个表单值声明隐藏字段，并从帖子数据中分配值

```
//form.php
<form name="newform" action="add.php" method="POST">
    <input type="hidden" name="field1" value="<?php echo(@$_POST['field1']); ?>" />
    ... declare other hidden fields like above
    ... field1 represent post value from the previous page form.html

</form>

<?php
    if(editConditionSatisfied)
    {
       echo '
          <script type="text/javascript">
             document.forms["newform"].action = "edit.php";
             document.forms["newform"].submit();
          </script>
       ';
    }
    else
    {
       echo '
          <script type="text/javascript">
             document.forms["newform"].action = "add.php";
             document.forms["newform"].submit();
          </script>
       ';
    }
?> 
```

在写出脚本之前，您可以确保所有条件和过程都已发生。该脚本在您写出它们并将您的数据重新提交到您想要的位置后才会生效

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:23:59.287

您还可以使用 cURL 根据您的逻辑从 form.php 发出对 edit.php 或 add.php 的 POST 请求。

表单.php

```
$value1 = $_POST["field1"];
//assuming your field names are field1 etc..
//assign variables for all fields.

$body = "field1=".value1."&field2=".value2;
//etc for all field/value pairs
//to transmit same names to edit.php or add.php

//pseudo code for condition based on $_POST["action"]
if(condition TRUE for add.php){
    $url = "example2.com/add.php";
} elseif((condition TRUE for edit.php){
     $url = "example3.com/edit.php";
}

if(isset($url)){     //most probably true, but just for safe-guard
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_POST, 1);            //we are making POST request
    curl_setopt($ch, CURLOPT_POSTFIELDS, $body);  //setting the POST fields
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    $response = curl_exec($ch);
    curl_close($ch);
}

//do something based on $response
//like doing a simple header redirect to $url 
```

现在，您的 add.php 或 edit.php 将与收到 POST 表单请求完全一样。

让他们都在 200（成功）或 404（失败）中发送响应，以便您可以在 $response 中捕获它并根据需要继续。

请注意，我假设用户输入已经过清理。（在将任何内容分配给 $value1 之前，您应该在 form.php 的顶部）

# c++ - 我应该实现我自己的意思吗，标准。C ++中的偏差和中位数？

> ID：11355295
> 
> 赞同：0
> 
> 时间：2012-07-06T03:01:44.050
> 
> 标签：c++

我应该实现我自己的意思吗，标准。C++ 中的偏差和中位数，还是我应该使用已经存在的代码？我需要为 std::vector 计算这些。

谢谢

# git - 将文件名从 Git 保存到 XML 文件中

> ID：11355297
> 
> 赞同：0
> 
> 时间：2012-07-06T03:01:59.503
> 
> 标签：git

我想创建一个 XML 文件，其中包含“git log”命令产生的数据，如提交哈希、作者名和文件名。

我知道我可以`git log --pretty=format:"%h - %an"`用来获取提交哈希和作者姓名。但是，我想知道是否有获取文件名的选项？

我*不想*使用`git log --name-only`，`git log --name-status`或者`git log --stat`因为他们给了我不需要的其他信息。

无论如何可以轻松获得 File Name 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:41:57.470

如果您只需要文件名，请使用以下命令：

```
git log --pretty="format:" --name-only 
```

它实际上很容易解析`git log`成 XML。查看[其他问题](https://stackoverflow.com/questions/11093911/git-log-pretty-with-list-of-files/11094170#11094170)以获取示例 shell 脚本。

# ios5 - 移动 iOS 应用程序以使用 Storyboards，同时以编程方式保留一些视图

> ID：11355298
> 
> 赞同：0
> 
> 时间：2012-07-06T03:02:47.710
> 
> 标签：ios5, uiview, xcode-storyboard

我正在尝试将现有项目转换为使用情节提要，以便我可以直观地布置我的视图。我仍然需要以编程方式将一些视图加载到其他视图中。

（作为旁注..我曾经在 Flash ActionScript 中编程，并且对 iOS 编程很陌生，并且只对 Objective-C 进行了入门，所以我有一些巨大的“漏洞”，我正在努力解决） .

我的布局是这样的：

日历有一个子视图来创建其单元格 - 'gridView'。我最初以编程方式创建了这个视图，它又为日历单元格（显示日期的正方形）添加了自己的子视图。我已成功将 gridView 添加到情节提要中，并且它确实显示了日历单元格（由 gridView 以编程方式添加）。我已经成功地能够在日历上显示正确的日期，现在我已经使用故事板打破了它，并试图决定是否需要返回以编程方式创建 gridView，或者我是否确实可以做我想做的事情故事板。

所以这就是我卡住的地方：

在我的 gridView 中，我使用 draw rect 创建所有单元格子视图：

```
// lay down the individual cells to build the calendar
    // 7 days across x 6 weeks down
    const CGSize gCellSize = {self.frame.size.width/7, (self.frame.size.height-20)/6};
    for(int w=0;w<6;w++) //6 weeks in the calendar
    {
        for(int d=0;d<7;d++) //7 days in a week
        {
            // ------------------ setting up the CELLVIEW ----------------------//
            CGRect calendarCellRect=CGRectMake(d*gCellSize.width,w*gCellSize.height+20, gCellSize.width, gCellSize.height);
            CalendarCellView *cellView=[[CalendarCellView alloc] initWithFrame:calendarCellRect];
            [self addSubview:cellView];
        }
    } 
```

所以这是我的问题：当我以编程方式创建所有内容时，gridView 被加载为父视图的子视图，并且 cellViews 的布局很好。加载 gridView 后，父视图将继续使用循环这些子视图的方法（displayDates - inside gridView），并将其适当的日期添加到每个 cellView。

但是现在我已将 gridView 添加到情节提要中，我需要确保在调用 displayDates 方法之前已加载其单元格子视图。

```
-(void)displayDates:(NSArray *)selectedMonthDates previousMonthVisibleDates:(NSArray *)previousMonthDates followingMonthVisibleDates:(NSArray *)followingMonthVisibleDates
    {   
        int cellNum=0;
        NSArray *displayDates[]={previousMonthDates,selectedMonthDates,followingMonthVisibleDates};
        for (int i=0; i<3; i++)
        {
            for (NSDate *d in displayDates[i])
            {            
                CalendarCellView *cell=[self.subviews objectAtIndex:cellNum];
                [cell resetState]; //initialize all properties within the CellView

                cell.date=d; // set the cell's date property to be equal to the respective date collected from the displayDate array            
                cellNum++;
            }
        }
        [self setNeedsDisplay];
    } 
```

那么，在我尝试将日期添加到这些子视图之前，如何确保 gridView 中的 drawRect 已经添加了所有子视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:17:52.243

布局阶段在渲染阶段之前完成。如果您在其中创建子视图，`drawRect`那么您已经做错了。应该为您覆盖`-layoutSubviews:`的子类完成所有“最后时刻”布局。`UIView`

添加到表格视图单元格时，您应该`cell.contentView`不`cell.view`直接添加子视图。请参阅[Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)段落**A Closer Look at Table-View Cells**了解表格视图单元格的解剖结构。

此外，您不应依赖数组中子视图的顺序。相反，您应该*标记*您的子视图 ( `cellView.tag = d`)，因为从*nib*或*情节提要*加载时，视图层次结构中的子视图顺序无法保证。您可以通过调用来获取子视图`cell.contentView.viewWithTag:tag`。

以及为什么不在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`表格视图单元格中设置 UI 元素值的最常见位置设置日期。

# ios - iOS 创建 Siri 图标和动画

> ID：11355299
> 
> 赞同：0
> 
> 时间：2012-07-06T03:03:10.890
> 
> 标签：ios, core-animation, siri

我有一个使用语音输入的应用程序，我想创建一个图标来复制 Siri 麦克风的外观和感觉。

是否有任何教程概述了如何进行此操作？我可以访问麦克风级别，更多的是使用什么技术来执行动画（例如，每个级别/等待状态（创建“火球”）需要一个单独的图像）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T01:30:55.273

Siri 的麦克风动画看起来很普通的核心动画。

我的猜测是它使用了填充麦克风的渐变静态图像，设置在椭圆形遮罩后面。梯度向上移动以获得更高的语音水平，向下移动以获得更低的语音水平，使用线性时序曲线的持续时间非常短的动画。

我为正在开发语音识别应用程序的客户做了类似的事情。

至于旋转的“思考”动画，看起来就像是静态图像的简单旋转动画。

# jquery - 在查看更多/更少操作中附加数据

> ID：11355300
> 
> 赞同：1
> 
> 时间：2012-07-06T03:03:46.070
> 
> 标签：jquery

我编写了一个小脚本，可以通过单击展开和折叠（查看更多/更少）。我的问题是我有“点击我”按钮，当我点击它时，div 是动态创建的。但是当 div 添加到 DOM 时，容器不会自动扩展，因为给定了高度。**将高度设置为单击时自动将解决此问题**，但还有其他可能的方法来解决此问题。

JSFiddle - [http://jsfiddle.net/7ntQR/](http://jsfiddle.net/7ntQR/)

代码

```
(function($) {
    $.fn.truncateText = function() {
        this.each(function() {

            var el = $(this);
            var height = el.height();       //get the current height
            el.data("dht",height);          //use jquery data store to store the original height
            el.css({                        //set the height to some pixel... 
                'height':'40px'
            }); 

            var btnState = 'collapse';

            var ix = $('<div>', {
                'class':'seeMore'
            }).appendTo($(el.parent()));

            var sm = $('<span>').html('more')
            .appendTo(ix)
            .on('click' , function() {
                if(btnState == 'collapse') {                 
                        btnState = 'expand';                            
                        el.animate({
                            'height':'40px'                         
                        },500);     
                }else {                                                     
                        btnState = 'collapse';
                        el.animate({
                            'height':el.data("dht")                         
                        },500);
                }   
            });

            btnState = 'expand';

            function expand(elm) {
                elm.html('SEE LESS');                                           
            }

            function collapse(elm) {
                elm.html('more');
            }

        }); 
    };

})(jQuery); 
```

最初使用 data() 存储 div 的原始高度，然后将 div 的高度更改为 40px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:56:12.830

我建议您在生成 div 时获取其大小。例如，获取`$('some div id').height();`And fix this height 并将其添加到要扩展的原始 div 中。这很容易理解和添加。但我还是建议你去`height:auto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T10:26:11.950

您可以使用纯 css 来完成，并将 html 保留在适当的位置。这里是一个JS fiddle（IE6,7,8上不会显示越来越少，内容会被展开）

[http://jsfiddle.net/6sj4e/45/](http://jsfiddle.net/6sj4e/45/)

```
.text {
    height: 50px;
    overflow: hidden;
    height: 100%\9;
  }

input.less-more,
input.less-more:checked ~ label.more,
input.less-more:not(:checked) ~ label.less {
    display: none;
} 
```

和 html ：

```
<input id="chbox" class="less-more" type="checkbox">
<div class="text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</div>
<label for="chbox" class='more'>more</label>
<label for="chbox" class='less'>less</label> 
```

# html - 如何从下方显示我的图像 20（像素或 %）CUT，以便不显示完整图片

> ID：11355301
> 
> 赞同：0
> 
> 时间：2012-07-06T03:03:58.467
> 
> 标签：html, css

假设原始图片的高度为 500 像素，宽度为 400 像素。我想在网站上显示这张图片，这样在高度上只有 480 像素可见。这可能使用css吗？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:32:01.157

如果不知道图片的高度，又需要裁剪图片，那么可以使用负边距和`overflow: hidden`（左边是原样，右边是裁剪过的）：

## HTML

```
<div class="crop">
    <span><img src="http://images.gizmag.com/hero/windows8leak.jpg" /></span>
    <strong><img src="http://images.gizmag.com/hero/windows8leak.jpg" /></strong>
</div>​ 
```

## CSS

```
.crop {overflow: hidden;}
.crop strong {display: inline-block; overflow: hidden; margin-bottom: -50px;}
.crop strong img {display: block; margin-bottom: -20px;}​ 
```

## 演示

![使用 CSS 裁剪图像](../Images/edd67c635c0958bba48cdfbc22c0813d.png)

查看演示：http: [//jsfiddle.net/xULaP/](http://jsfiddle.net/xULaP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:27:33.237

要裁剪，您可以尝试使用外部`<div>`with`overflow: hidden`和结果设置的宽度和高度，将图像放在其中，然后使用边距进行裁剪。边距值将是原始高度和裁剪高度之差，因此在您的情况下为 20px。

[http://jsfiddle.net/DjyzK/1/](http://jsfiddle.net/DjyzK/1/)

我为 DIV 添加了一个边框，以便您可以看到它的位置。

绝对定位很简单，因此您可以在它不紧贴页面边缘时看到它。

如果您不知道图像的高度/宽度，请尝试 Praveen 解决方案的这个分支：http: [//jsfiddle.net/xULaP/1/](http://jsfiddle.net/xULaP/1/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:20:33.720

是的：将图像设置为元素的背景，并指定该元素的宽度和高度。[JSFiddle 示例](http://jsfiddle.net/p7UAy/)

# php - 如何使用复选框对应值将多个数据插入mysql？

> ID：11355305
> 
> 赞同：0
> 
> 时间：2012-07-06T03:04:55.023
> 
> 标签：php, mysql, checkbox

我一直在尝试使用复选框向 mysql 插入多个值。我的代码是这样的。

```
 <form name='form' method='post'>
    <table>
    <?php
    $id=$_REQUEST['ID'];
    $sql=mysql_query("SELECT * FROM table WHERE id='".$id."'");
    while($row=mysql_fetch_array($sql)){
    ?>
    <tr>
    <td><input type="checkbox" name="select[]" value="<?php echo "$id"; ?>"/></td>
    <td><?php echo $row['shapes']; ?></td>
    <td><?php echo $row['area']; ?></td>
    <td><?php echo $row['characteristic']; ?></td>
    </tr>
    </form>
    <?php
    }//end whil loop
    ?>
    <tr>
    <td><input type="submit" name="submit" value="submit" class="del"/>      
    </td>
    </tr>
    </table>

    <?php
    if(isset($_POST['submit'])){
    $select[] = $_POST['select'];
    $select=$_POST['select'];

    for($i=0;$i<sizeof($select);$i++){
       $query=mysql_query("INSERT INTO table2(id, shapes, area, characteristic)
       VALUES('".$select[$i]."', '".$row['shapes']."', 
            '".$row['area']."', '".$row['characteristic']."')");
    }//end for loop
   }
   ?> 
```

我能够正确地将复选框值插入到 table2 但问题是，那些去形状、区域、特征字段的值不是对应的值。插入的值是表中最后一个数据的值。请帮忙。只有复选框值被正确插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:20:02.370

Oh, I get it. I have to add a hidden button for the other fields. Thanks.

# ssis - SSIS：如何在处理数据流任务之前以编程方式在 Excel 文件上添加列

> ID：11355319
> 
> 赞同：0
> 
> 时间：2012-07-06T03:08:02.007
> 
> 标签：ssis

我想请你在这方面的专业知识，任何回应将不胜感激。这是我的问题：

我有 10 个版本的 Excel 宏文件。我需要使用 SSIS 将数据从 excel 文件导入 MS SQL 服务器数据库，并将 OLEDB 作为 Excel 宏文件的数据源连接。

Excel 宏的最新版本（第 10 版）是我在数据流任务中用作我的源（和列的元数据库）的那个。旧版本的文件不包含与最新版本相同数量的列。如果我使用旧版本的 excel 文件作为源来执行我的包，它将引发错误，因为列不同步。

由于每个版本都有数百个 Excel 宏文件并且没有正确的命名约定，我想我可以做的是：

1.  使用 For Each Loop - 循环遍历所有宏文件
2.  通过脚本任务验证 excel 文件，检查缺少的列。如果缺少列，请修改文件，添加列然后保存。
3.  执行数据流任务

我试着搜索这个，但我找不到任何关于这个的详细文章。我听说 CozyRoc 有这个功能，但是它们的组件非常昂贵。我可以创建 10 个版本的包，但是我觉得这很乏味，而且我尽可能不想导致这种情况。

对此有任何解决方案，还是有其他替代方案？

抱歉英语不好。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T20:16:16.680

嗯，我知道这是一年前发布的。但以防万一我仍然可以帮助那些可能遇到同样问题并尝试寻求一些答案的人。

好吧，最近我遇到了 sp_makewebtask 的麻烦，这需要我搜索 SSIS 方法：

然后我在这里找到了这个链接：

[如何根据表格数据创建动态excel表格](https://stackoverflow.com/questions/15634418/how-to-create-dynamic-excel-sheets-based-on-table-data)

对我来说，您将在该链接上找到的内容将为您提供一个想法，即在处理数据流任务之前以编程方式在 Excel 文件上创建添加列。

# java - 如何以 Java 方式直接从设备读取/写入文件（如 O_DIRECT 标志的效果）？

> ID：11355323
> 
> 赞同：15
> 
> 时间：2012-07-06T03:08:45.800
> 
> 标签：java, android, file-io

我必须直接读/写文件，没有任何缓冲。在旧的 C 方式中，我通过使用带有`O_DIRECT`标志的 open 方法来做到这一点。

**这可能以Java方式吗？**

这里是`O_DIRECT`描述

> 尽量减少进出该文件的 I/O 的缓存影响。一般来说，这会降低性能，但在特殊情况下很有用，例如当应用程序进行自己的缓存时。文件 I/O 直接与用户空间缓冲区进行。

**更新：**

这是我的代码示例，

```
// write
fos = new FileOutputStream(fileName);
fos.write(inputData);
fos.flush();
fos.close();

// read
fis = new FileInputStream(fileName);
int len = fis.read(outputData, offset, length);
fis.close(); 
```

背景是我将数据（实际上是命令）写入 sd 卡（某种智能卡）上的文件，然后智能卡接收命令并将结果准备到同一个文件中。通常，我可以从该文件中读取数据（结果），但我得到了相同的结果`inputData`，`outputData`也就是说，我刚刚得到了我的命令。这是意想不到的结果。我怀疑代码是否只是从缓冲区写入/读取，而不是真正的文件。冲洗失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T21:13:35.077

FileOutputStream 的 android 文档明确指出它是一个无缓冲的流。无论如何，flush() 后跟 close() 应该可以解决问题。在 close() 之前您可能需要采取的唯一额外步骤是 getFD().sync()。

您提到了智能卡，因此该设备实现了自己的（假）文件系统，对主机显示为 SD 卡等。卡片的文档是否说明您应该给卡片多长时间才能注意到文件的更改？在块 I/O 级别没有相应的“打开”或“关闭”操作，因此设备应该注意到字节的写入。

或者，如果设备“聪明”并使用文件元数据上的时间更改，那么您可能需要调用 File.setLastModified(System.currentTimeMillis()) 来手动“触摸”文件。假设使用 'noatime' 选项安装类似 sd 的设备以提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:23:20.047

当您调用 时`close()`，与文件描述符关联的所有数据都消失了。由于您获得的输入数据与输出数据相同，因此这可能不是 Java 文件读取问题。

我建议您从 Linux 而不是 Android 调试您的设备（驱动程序）。如果您愿意，可以编写一个 C 程序来做同样的事情，并尝试从 adb shell 运行它。它应该可以帮助您找出原始问题。

# java - 鉴于它在 Welcome 下方打开，我如何从 Welcome 页面打开 Eclipse 中的透视图？

> ID：11355324
> 
> 赞同：2
> 
> 时间：2012-07-06T03:08:59.187
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

根据[这里，](http://www.eclipsezone.com/eclipse/forums/t98632.html)我已经实现了一个 IIntroAction，它将从介绍页面在 Eclipse 中打开一个透视图（我的操作几乎完全相同）。

我的与那里显示的有点不同，但本质上它被调用（作为 url）如下： `http://org.eclipse.ui.intro/runAction?class=my.plugin.actions.OpenPerspectiveAction&amp;pluginId=my.plugin&amp;pId=my.other.plugin.MyPerspective`

其中 pId 是我要打开的透视图的 id。（这有效！......大多数时候。）

如上面的链接所述，此操作的问题在于，如果 MyPerspective 在欢迎页面下方打开，那么它将不会打开（或者更确切地说，欢迎页面不会关闭......）。

如何在操作调用时显示所需的透视图，即使它在欢迎页面下方打开？

我探索的一些可能的解决方案的路径（不完全，所以我可能错过了一些东西）：

*   用 PerspectiveRegistry 做一些事情（虽然没有看到任何结果......）
*   检查工作台以查看打开的透视图并从中切换
*   检查工作台以查看打开的透视图是什么以及它是否是所需的透视图

这些只是概念性的解决方案——我不知道它们是否真的可以实现！如果有人能对我如何解决这个问题有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:56:05.090

以下代码在我的 RCP 项目中运行良好。

简介页面链接：

```
<a id="a-ism" href="http://org.eclipse.ui.intro/runAction?pluginId=sernet.gs.ui.rcp.main&#38;class=sernet.gs.ui.rcp.main.actions.ShowISMPerspectiveIntroAction"> 
```

动作类：

```
public class ShowISMPerspectiveIntroAction extends ShowPerspectiveIntroAction {

  @Override
  public String getCheatSheetId() {
    return "sernet.gs.ui.rcp.main.cheatsheet1";
  }

  @Override
  public String getPerspectiveId() {
    return Iso27kPerspective.ID;
  }
} 
```

动作基类：

```
import  org.eclipse.ui.intro.config.IIntroAction;

public abstract class ShowPerspectiveIntroAction implements IIntroAction {

  private static final Logger LOG = Logger.getLogger(ShowPerspectiveIntroAction.class);

  @Override
  public void run(IIntroSite arg0, Properties arg1) {
    // Switch to perspective
    final IWorkbenchWindow workbenchWindow = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
    IPerspectiveDescriptor activePerspective = workbenchWindow.getActivePage().getPerspective();
    if(activePerspective==null || !activePerspective.getId().equals(getPerspectiveId())) {           
        Display.getCurrent().asyncExec(new Runnable() {
            public void run() {
                // switch perspective           
                try {
                    workbenchWindow.getWorkbench().showPerspective(getPerspectiveId(),workbenchWindow);
                } catch (WorkbenchException e) {
                    LOG.error("Can not switch to perspective: " + getPerspectiveId(), e);
                }
            }
        });
    }

    // close intro/welcome page
    final IIntroPart introPart = PlatformUI.getWorkbench().getIntroManager().getIntro(); 
    PlatformUI.getWorkbench().getIntroManager().closeIntro(introPart);

    // Show CheatSheet
    ShowCheatSheetAction action = new ShowCheatSheetAction("Show security assessment cheat sheet", getCheatSheetId());
    action.run();
  }

  public abstract String getCheatSheetId();
  public abstract String getPerspectiveId();
} 
```

# url-rewriting - SEO - 重定向主页或根 URL - 尾部斜杠

> ID：11355328
> 
> 赞同：4
> 
> 时间：2012-07-06T03:09:59.733
> 
> 标签：url-rewriting, seo

有谁知道如果主页（带或不带斜杠）返回 200 ok 标头响应，Google 是否会惩罚网站？

我已经使用在线重定向检查器（CNN、NY Times、FOX News、Wikipedia 等）测试了大量网站，它们都返回 200“ok”，无论是否带有斜杠。

我知道所有内页都需要使用其中一个，但主页似乎是个例外。大家怎么看？

PS，我在 IIS7 中使用 URLRewrite 来强制 www、小写和删除尾部斜杠。主页似乎是唯一不受斜杠规则影响的页面。

谢谢！

**编辑** 例如，使用此在线工具： http: [//www.internetofficer.com/seo-tool/redirect-check/](http://www.internetofficer.com/seo-tool/redirect-check/) 以下 URL 是“直接链接”。301 重定向也不是... [http://www.wikipedia.org](http://www.wikipedia.org) http://www.wikipedia.org/

许多其他示例产生相同的结果。

**编辑 2** 这是我的 URLRewrite 代码（web.config）

```
 <rules>
        <rule name="CanonicalHostNameRule1" stopProcessing="true">
            <match url="(.*)" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.domain\.com$" negate="true" />
            </conditions>
            <action type="Redirect" redirectType="Permanent" url="http://www.kurtzandblum.com/{R:1}" />
        </rule>
        <rule name="LowerCaseRule1" stopProcessing="true">
            <match url="[A-Z]" ignoreCase="false" />
            <action type="Redirect" redirectType="Permanent" url="{ToLower:{URL}}" />
        </rule>
        <rule name="Remove trailing slash" stopProcessing="true">
            <match url="(.*)/$" />
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            </conditions>
            <action type="Redirect" redirectType="Permanent" url="{R:1}" />
        </rule>
    </rules> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T05:04:26.627

好的，这是来自[谷歌博客的官方答案](http://googlewebmastercentral.blogspot.com/2010/04/to-slash-or-not-to-slash.html)

我引用...“请放心，对于您的根 URL，[http](http://example.com) ://example.com等同于[http://example.com/](http://example.com/)，即使您是 Chuck Norris，也无法重定向。”

所以你有它。根 URL 不仅带有或不带有斜杠是安全的，而且甚至可能无法 301 将一个重定向到另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:24:41.647

我建议保持一套风格（使用一种或另一种）以防止目录混乱。SEO方面应该没有任何区别。在这种情况下，如果您觉得需要，可以选择使用 301 重定向。

# iphone - 为什么不需要在 NSURLConnectionDelegate 协议中声明的 NSURLConnection 委托方法

> ID：11355329
> 
> 赞同：4
> 
> 时间：2012-07-06T03:10:42.550
> 
> 标签：iphone, xcode, macos, nsurlconnection

我正在通过`NSURLConnectionDelegate`apple.developer.com 网站上的类参考。在那里，我意识到一些功能，例如`connectionDidFinishLoading`IOS 类中不存在，但在 MAC 库中存在。

然后，当我尝试在 XCODE 中为 IOS 应用程序使用这些功能时，自动完成功能无法完成，但功能确实按预期工作。

谁能解释一下这些是如何工作的，这会在部署应用程序时引起任何问题吗？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:31:20.377

这有点奇怪。的文档`NSURLConnectionDelegate`说：

> NSURLConnectionDelegate 协议定义了由 NSURLConnection 对象的委托实现的可选方法。

操作词是**可选**的。

但是，`NSURLConnection`类参考说：

> NSURLConnection 的委托方法——由 NSURLConnectionDelegate 协议定义——允许对象接收关于 URL 请求异步加载的信息回调。其他委托方法提供允许委托自定义执行异步 URL 加载过程的工具。在为关联的 NSURLConnection 对象启动异步加载操作的线程上调用这些委托方法。

这两个人似乎自相矛盾。

最后，“URL 加载系统编程指南”说：

> 为了下载 URL 的内容，应用程序需要提供一个委托对象，该对象至少实现以下委托方法：connection:didReceiveResponse:、connection:didReceiveData:、connection:didFailWithError: 和 connectionDidFinishLoading:。

这是你所期望的，因为`NSURLConnection`没有这些委托方法几乎没有用。

查看头文件`NSURLConnection`似乎有一个`NSURLConnectionDataDelegate`协议列出了所需的委托方法。但是，它们被标记为`@optional`在标题中。根据定义`NSURLConnectionDataDelegate`它必须实现`NSURLConnectionDelegate`。

如果你声明你的委托类来实现`NSURLConnectionDataDelegate`协议，Xcode 将自动完成委托方法。

这一切让我觉得有点乱。Cocoa/Cocoa Touch API 通常比这更简洁。

我当然不认为 Apple 可以拒绝使用这些委托方法的应用程序，因为`NSURLConnection`没有它们真的无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:27:14.487

请记住，如果您发现 API 不一致，您需要向[RADAR](http://bugreport.apple.com)提交错误报告，正如 Black Pixel 的友好人员所解释的那样：[RADAR 或 GTFO](http://blackpixel.com/blog/1558/radar-or-gtfo/)

# android - 无法获取 httpPost 参数，但可以从 php 获取 httpGet

> ID：11355332
> 
> 赞同：2
> 
> 时间：2012-07-06T03:11:21.987
> 
> 标签：android

这是我发送请求的android代码：

```
// defaultHttpClient
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(serverUrl);
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("abc", "abc2"));
httpPost.setEntity(new UrlEncodedFormEntity(params));
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
InputStream is = null;
is = httpEntity.getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"), 8);
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
}
is.close();
String json = "";
json = sb.toString();
Log.d("JSON", "JSON is:" + json); 
```

这是我获取请求的 php 代码：

```
<?php

echo $_POST['abc'];

?> 
```

当我运行应用程序时，字符串`json`什么都不是。我希望得到`JSON is:abc2`
然后我在android部分更改了一些代码：

```
HttpPost httpPost = new HttpPost(serverUrl); 
```

改成：

```
HttpPost httpPost = new HttpPost(serverUrl + "?abc=abc3"); 
```

在php部分：

```
<?php

echo $_GET['abc'];

?> 
```

这一次，logcat 中的字符串`json`是`JSON is:abc3`. 它是正确的！！
我已经尝试了很多时间，但似乎无法发送带有参数的 HttpPost 请求。
任何人都可以帮助我找出我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:45:57.553

试试这个代码

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
HttpConnectionParams.setSoTimeout(httpParameters, 5000);

DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);
HttpPost httppost = new HttpPost(serverUrl);

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("abc", "abc2"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);
    nameValuePairs.clear();
    nameValuePairs = null;

    HttpEntity httpEntity = response.getEntity();
    response = null;
    Log.e("Server Response",EntityUtils.toString(httpEntity));
} catch (IOException e) {
    Log.e("IOException", " IOException ");
    e.printStackTrace();
} catch (Exception e){
    Log.e("Exception", " Exception ");
    e.printStackTrace();
} finally {
    httpParameters = null;
    httppost = null;
} 
```

# java - 如何泛化Java中的方法调用（避免代码重复）

> ID：11355339
> 
> 赞同：3
> 
> 时间：2012-07-06T03:12:37.063
> 
> 标签：java, methods, inner-classes, anonymous-class, code-duplication

我有一个需要调用方法并返回其值的进程。但是，根据具体情况，此过程可能需要调用几种不同的方法。如果我可以将方法及其参数传递给进程（如在 Python 中），那么这将没有问题。但是，我不知道在 Java 中有任何方法可以做到这一点。

这是一个具体的例子。（此示例使用 Apache ZooKeeper，但您无需了解有关 ZooKeeper 的任何内容即可理解该示例。）

ZooKeeper 对象有几种方法，如果网络出现故障，这些方法将失败。在这种情况下，我总是想重试该方法。为了简化这一点，我创建了一个继承 ZooKeeper 类的“BetterZooKeeper”类，它的所有方法都会在失败时自动重试。

这就是代码的样子：

```
public class BetterZooKeeper extends ZooKeeper {

  private void waitForReconnect() {
    // logic
  }

  @Override
  public Stat exists(String path, Watcher watcher) {
    while (true) {
      try {
        return super.exists(path, watcher);
      } catch (KeeperException e) {
        // We will retry.
      }
      waitForReconnect();
    }
  }

  @Override
  public byte[] getData(String path, boolean watch, Stat stat) {
    while (true) {
      try {
        return super.getData(path, watch, stat);
      } catch (KeeperException e) {
        // We will retry.
      }
      waitForReconnect();
    }
  }

  @Override
  public void delete(String path, int version) {
    while (true) {
      try {
        super.delete(path, version);
        return;
      } catch (KeeperException e) {
        // We will retry.
      }
      waitForReconnect();
    }
  }
} 
```

（在实际程序中，为了简单起见，我从示例中取出了更多的逻辑和方法。）

我们可以看到我使用了相同的重试逻辑，但是每个方法的参数、方法调用和返回类型都不同。

这是我为消除代码重复所做的工作：

```
public class BetterZooKeeper extends ZooKeeper {

  private void waitForReconnect() {
    // logic
  }

  @Override
  public Stat exists(final String path, final Watcher watcher) {
    return new RetryableZooKeeperAction<Stat>() {
      @Override
      public Stat action() {
        return BetterZooKeeper.super.exists(path, watcher);
      }
    }.run();
  }

  @Override
  public byte[] getData(final String path, final boolean watch, final Stat stat) {
    return new RetryableZooKeeperAction<byte[]>() {
      @Override
      public byte[] action() {
        return BetterZooKeeper.super.getData(path, watch, stat);
      }
    }.run();
  }

  @Override
  public void delete(final String path, final int version) {
    new RetryableZooKeeperAction<Object>() {
      @Override
      public Object action() {
        BetterZooKeeper.super.delete(path, version);
        return null;
      }
    }.run();
    return;
  }

  private abstract class RetryableZooKeeperAction<T> {

    public abstract T action();

    public final T run() {
      while (true) {
        try {
          return action();
        } catch (KeeperException e) {
          // We will retry.
        }
        waitForReconnect();
      }
    }
  }
} 
```

RetryableZooKeeperAction 使用函数的返回类型进行参数化。run() 方法保存重试逻辑，而 action() 方法是需要运行的 ZooKeeper 方法的占位符。BetterZooKeeper 的每个公共方法都实例化了一个匿名内部类，该内部类是 RetryableZooKeeperAction 内部类的子类，并覆盖了 action() 方法。局部变量（很奇怪）隐式传递给 action() 方法，这是可能的，因为它们是最终的。

最后，这种方法确实有效，并且确实消除了重试逻辑的重复。但是，它有两个主要缺点：(1) 每次调用方法时都会创建一个新对象，以及 (2) 丑陋且难以阅读。我还必须解决具有 void 返回值的“删除”方法。

所以，这是我的问题：在 Java 中有没有更好的方法来做到这一点？这不可能是一个完全不常见的任务，其他语言（如 Python）通过允许传递方法使其更容易。我怀疑可能有一种方法可以通过反射来做到这一点，但我一直无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:29:08.883

这似乎（至少在我看来）是“正确的”Java 风格（或 Java 中与“Pythonic”类似的任何东西）重构。您已经正确使用了模板方法模式，并且您将最终变量传递到内部匿名子类中是正确的，并且正如内部类的设计者所期望的那样。您保留了静态类型并且很好地使用了泛型。

使用反射的解决方案确实是可能的，但它确实牺牲了一些静态类型的细节，并且您的代码将不得不捕获一些伴随调用方法而来的检查异常，从而增加了一些混乱。反射被高估了，恕我直言，这里没有必要。我们倾向于在 Java 中更多地使用它来进行检测，而不是使代码更易于阅读。如果您想干净地传递方法，请等待 Java 8！

另外，我不相信您的代码不可读。专业的 Java 程序员*应该*能够阅读此内容。此类事物存在内部类。也就是说，可以重构“多一步”并将现在的*匿名类*命名为*本地类*（当然仍在您的方法中），这样您的调用`run()`就不会那么难找到。除此之外，我没有真正的重构建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:34:03.760

所写的代码是完全合理的，并且对于当前版本的 Java 不能改进太多。闭包（现在很快就会实现）会有所帮助。

冒着引入另一种复杂性的风险，简化这种包装是[面向方面编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的主要好处之一。鉴于您正在使用 Java，您可能希望专门研究[AspectJ](http://www.eclipse.org/aspectj/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:33:54.540

我认为这需要接口和泛型的结合。首先，我将定义一个描述可调用方法行为的接口，使用泛型来指定参数并返回类型。

```
public interface Action<Arg, Return> {
    Return attempt(Arg arg) throws KeeperException;
} 
```

这可以用于编写一次重试方法作为泛型方法（无需创建整个泛型类）：

```
public <Arg, Return> ReturnType retry(Arg arg, Action<Arg, Return> action) {
    while (true) {
        try {
            return action.attempt(arg);
        } catch (KeeperException e) {
            // We will retry.
        }
        waitForReconnect();
    }
} 
```

然后，您需要指定一个数据结构来代替每个参数集合。对于该`exists`操作，它将是：

```
public class ExistsArgs {
    String path;
    Watcher watcher;
} 
```

该`exists`操作最适合该模式，因为它返回 void。我们需要一种更具体的类型：

```
public final class Void {
    // nothing class to take the place of void return type
}

public class ExistsAction implements Action<ExistsArgs, Void> {
    private ZooKeeper delegate;
    public ExistsAction(ZooKeeper delegate) {
        this.delegate = delegate;
    }
    public Void attempt(ExistsArgs args) throws KeeperException {
        delegate.exists(args.path, args.watcher);
        return null;
    }
} 
```

`ExistsArgs`（创建 .的静态内部类可能是有意义的`ExistsAction`。）其他方法可以类似地处理。如果`Action`实现是. `BetterZooKeeper`_`BetterZooKeeper.this``delegate`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T08:33:13.240

如前所述，您应该使用 AOP 和 Java 注释。我会推荐一个来自[jcabi-aspects](http://aspects.jcabi.com/annotation-retryonfailure.html)的已读机制（我是一名开发人员）：

```
@RetryOnFailure(attempts = 3, delay = 5)
public String load(URL url) {
  // do the work
} 
```

您可以注释任何方法，`@RetryOnFailure`当抛出异常时，它的调用将重复几次，直到句号成功。

另请阅读这篇博文：[http ://www.yegor256.com/2014/08/15/retry-java-method-on-exception.html](http://www.yegor256.com/2014/08/15/retry-java-method-on-exception.html)

# android - 雅虎身份验证中的 400 错误请求

> ID：11355340
> 
> 赞同：8
> 
> 时间：2012-07-06T03:12:43.570
> 
> 标签：android, yahoo, yahoo-api

我正在尝试将 Yahoo 集成到我的应用程序中。

我希望用户使用他们的 Yahoo 帐户登录，但每当我请求令牌时，我都会收到以下错误：

```
getRequestToken() Exception: oauth.signpost.exception.OAuthCommunicationException: 
Communication with the service provider failed: Service provider responded in error: 400 (Bad Request) 
```

这是我的代码（Request_Token_Activity.java）：

```
import oauth.signpost.OAuth;
import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthProvider;
import oauth.signpost.signature.HmacSha1MessageSigner;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.Uri;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;

public class Request_Token_Activity extends Activity {
    private OAuthConsumer consumer; 
    private OAuthProvider provider;
    private SharedPreferences prefs;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {

        consumer = new CommonsHttpOAuthConsumer("my consumer key", "my consumer secret");
        consumer.setMessageSigner(new HmacSha1MessageSigner()); 
        provider = new CommonsHttpOAuthProvider(
                "http://api.login.yahoo.com/oauth/v2/get_request_token",
                "http://api.login.yahoo.com/oauth/v2/get_token",
                "http://api.login.yahoo.com/oauth/v2/request_auth");

    } catch (Exception e) {
        Log.e("", "onCreate Exception: " + e.toString());
    }
    getRequestToken();
}
private void getRequestToken() {
    try {

        String url = provider.retrieveRequestToken(consumer, "yahooapi://callback");
        Log.i("", "Yahoo URL: " + url);
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
        this.startActivity(intent);
    } catch (Exception e) {
        Log.i("", "getRequestToken() Exception: " + e.toString());
    }
}
@Override
public void onNewIntent(Intent intent) {
    super.onNewIntent(intent); 
    prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals("yahooapi")) {
        getAccessToken(uri);
    }
}
private void getAccessToken(Uri uri) {
    final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
    try {
        provider.retrieveAccessToken(consumer, oauth_verifier);

        final Editor edit = prefs.edit();
        edit.putString("YAHOO_OAUTH_TOKEN", consumer.getToken());
        edit.putString("YAHOO_OAUTH_TOKEN_SECRET", consumer.getTokenSecret());
        edit.commit();

        String token = prefs.getString("YAHOO_OAUTH_TOKEN", "");
        String secret = prefs.getString("YAHOO_OAUTH_TOKEN_SECRET", "");
        consumer.setTokenWithSecret(token, secret);

        Log.i("", "Yahoo OAuth Token: " + token);
        Log.i("", "Yahoo OAuth Token Secret: " + token);

    } catch (Exception e) {
        Log.i("", "getAccessToken Exception: " + e.toString());
    }
}

} 
```

这是我的 AndroidManifest.xml 的快照：

```
 <activity android:name="Request_Token_Activity" android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="yahooapi" android:host="callback" />
        </intent-filter>
    </activity> 
```

我已将 my 设置为`Yahoo Project`a`Web Application`并放入and 。我究竟做错了什么？`Read and Write access``Social``Contacts`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:49:09.880

看起来雅虎的 api 调用是一个 ssl 调用。我不知道它是否那么简单，但您的代码具有 Oauth 提供程序：

```
 "http://api.login.yahoo.com/oauth/v2/get_request_token",
            "http://api.login.yahoo.com/oauth/v2/get_token",
            "http://api.login.yahoo.com/oauth/v2/request_auth"); 
```

根据[http://developer.yahoo.com/oauth/guide/oauth-requesttoken.html](http://developer.yahoo.com/oauth/guide/oauth-requesttoken.html)

提供者应该是 Http* *s* *//api.login.yahoo.com/oauth/v2/get_request_token

另外这里是雅虎 oauth 错误代码以及您收到 400 错误的原因[http://developer.yahoo.com/oauth/guide/oauth-errors.html](http://developer.yahoo.com/oauth/guide/oauth-errors.html) 我会记录我的请求并查看缺少/错误的参数/畸形等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:49:21.550

@Jayson Tamayo 我同意 Eliezer 的观点，尝试在 wifi 上使用您的应用程序。我在 wifi 中尝试过，它可以工作，但遗憾的是它不能在 GPRS 上工作。如果您的 android 应用程序是本机应用程序，那么您应该将您的项目设置为客户端/桌面。我已经做到了，它对我有用。

# javascript - twitter bootstrap 可折叠导航菜单

> ID：11355342
> 
> 赞同：4
> 
> 时间：2012-07-06T03:13:08.577
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我在我的网络应用程序上使用 twitter bootstrap 来完成所有的样式设置，并且在大多数情况下一切都很好。问题是我的导航栏一旦折叠，当我单击下拉图标时不会下拉。我已经列出了我的 HTML，但我认为问题出在我的 javascript 上，因为这个小提琴使用完全相同的代码：http: [//jsfiddle.net/YWUmb/30/](http://jsfiddle.net/YWUmb/30/)工作得很好。

```
<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Exployre</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/profile">Profile</a></li>
              <li><a href="/sponsors">Sponsors</a></li>
              <li><a href="/working">Exployrers</a></li>
              <li><a href="/about">About</a></li>
              <li><a href="/share">Share</a></li>
              <li>
                    {% if user %}
                        User:  {{ user }}<br>
                        <a href="{{ logout }}">Logout</a>
                    {% else %}
                        <a href="/login">Signin or Register</a>
                    {% endif %}
              <li>  
                    <a href="/profile">
                    {% if visits %}
                        {% if visits > 10 %}
                        Prestige: {{ visits }}
                        {% elif visits > 5 %}

                        {% endif %}
                    {% endif %}
                    </a>
              </li>
              <li>        
                <form action="/search" class="navbar-search">
                  <div>
                    <input type="text" placeholder="Search" class="search-query" name="q" size="55"/>
                  </div>
                </form>

                <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
              </li>

            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
<script type="text/javascript" src="/static/js/bootstrap.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

我的源代码链接有什么问题吗？或者我需要做些什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T03:19:36.503

问题在于你的js的顺序。首先是 jQuery 脚本，然后是引导插件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.js"></script> 
```

# javascript - Jquery：将永久高度设置为特定选项卡和调整大小插件

> ID：11355343
> 
> 赞同：2
> 
> 时间：2012-07-06T03:13:14.480
> 
> 标签：javascript, jquery

我正在使用 jquery 滑动标签。我找到了一个调整大小的插件，可以帮助标签适应扩展内容。唯一的事情是我想为选项卡 1（st_content_1）设置一个永久高度。我下面的代码有效，但有点错误。

*   应该放在函数if语句中吗？

*   检查第一个标签的高度然后设置它？

*   还是有更好的解决方案？

    您可以查看我的[示例](http://webprolearner2346.zxq.net/slidingtabs/horizontal.html)。

jQuery

```
 $('.st_tab_view').resize(function() {

    var height = 250
    $('div#st_content_1').css('height', height+'px');

    var $this = $(this);
    $this.closest('.st_view').css('height', $this.height());

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:06:13.247

为什么不在 .st_content_1 的 css 中使用最小高度或最大高度？特别是因为高度固定在 250。所以在你的 CSS 中：

```
#st_content_1 {
   min-height: 250px;
} 
```

当然，它不适用于旧 IE 版本。

然后删除这个

```
var height = 250
$('div#st_content_1').css('height', height+'px'); 
```

# ruby-on-rails-3 - 使用 js rails 响应时定位行

> ID：11355345
> 
> 赞同：0
> 
> 时间：2012-07-06T03:13:27.803
> 
> 标签：ruby-on-rails-3

我有一个应用程序，用户可以在其中对评论进行投票。他们可以投票赞成或反对。现在，当有评论列表时，我在定位用户投票的评论时遇到了问题。

我在我的 rails 控制器中使用了一个 respon_to 块并用 js 响应。例如，我有一个**vote_up**方法和一个**vote_up.js.erb**模板。在该模板中，我有以下内容：

```
var id = $('article.comment').attr('id').split('_')[1];
alert("id: " + id);
$('.votecomment_' + id).find('.score').html("<%= @review2.vote_total %>"); 
```

我只是提醒身份证。问题是 id 总是返回在页面上找到的第一个评论的值。如何将上下文（也称为 this）传递给 javascript，以便确定要定位的评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:48:39.580

我最终为*id*这样做了：
var id = <%= params[:id] %>
这解决了我的问题。

# android - Cocos2dxGLSurfaceView 无法解析为类型

> ID：11355347
> 
> 赞同：3
> 
> 时间：2012-07-06T03:14:06.087
> 
> 标签：android, cocos2d-iphone, cocos2d-x

当我尝试在 Eclipse 中运行 cocos2dx proj 时出现以下错误：

```
Cocos2dxActivity cannot be resolved to a type   ApplicationDemo.java    
Cocos2dxEditText cannot be resolved to a type   ApplicationDemo.java    
Cocos2dxGLSurfaceView cannot be resolved to a type  ApplicationDemo.java 
```

我错过了任何库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T01:09:20.277

我遇到了这个问题，似乎最新的 cocos2d-x 缺少 java 构建路径。

在 Eclipse 中右键单击该项目。单击构建路径/链接源。

在链接的文件夹位置中放入 cocos2d java src 的目录

IE

> /Users/XXX/lib/cocos2d-2.0-x-2.0.3/cocos2dx/platform/android/java/src

我将 src 命名为 cocos2d

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T10:15:55.380

在 cocos2d-x 2.0.3 ...Cocos2d-x Lib java 文件只被认为是一个不同的项目所以在 eclipse 中导入那个项目

让它变得简单

首先从这个路径导入eclipse中的项目 - cocos2d-2.0-x-2.0.3/cocos2dx/platform/android/java 你会在eclipse中看到libcocos2dx项目...保持这个项目一直打开，否则你的项目会出错库的语法

运行 create-android-project

现在导入您创建的项目并运行（如果您知道 isLibrary 的概念，那么这就是他们现在维护它的方式..）

还有其他信息仅从 Eclipse 运行 build-native.sh，右键单击 Project ->C/C++ Build 取消选中 Use Default Build COMmand 并添加以下 bash ${workspace_loc:/YourProjName}/build_native.sh NDK_DEBUG=1 V=1

祝你好运..如果有任何问题，请随时提问

# macos - 在 Mac 上为 Hadoop 设置 JAVA_HOME

> ID：11355350
> 
> 赞同：2
> 
> 时间：2012-07-06T03:14:45.487
> 
> 标签：macos, hadoop

我在 OS X 10.7 上为 Hadoop 正确设置 JAVA_HOME 时遇到问题 这是我所做的：转到 /usr/local/Cellar/hadoop/1.0.3/libexec/conf/hadoop-env.sh 并更改了 JAVA_HOME 形式是否默认**导出 JAVA_HOME=/Library/Java/Home/** 我对 Java 也很陌生，所以即使 JAVA_HOME 也可能是错误的。因此，通过转到 hadoop 的 bin 文件夹并运行以下命令：**hadoop jar hadoop-*-examples.jar** 这是我得到的讨厌的错误：

```
Exception in thread "main" java.io.IOException: Error opening job jar: hadoop-*-examples.jar
    at org.apache.hadoop.util.RunJar.main(RunJar.java:90)
Caused by: java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:127)
    at java.util.jar.JarFile.<init>(JarFile.java:135)
    at java.util.jar.JarFile.<init>(JarFile.java:72)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:88) 
```

你知道我该如何解决这个问题或有什么问题吗？如果您需要，这也是“which javac”命令的输出： **/usr/bin/javac**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:52:47.027

Hadoop 示例 jar 文件是您正在使用的 Hadoop 版本的 hadoop-1.0.3-examples.jar`。在命令中使用正确的 jar 文件名，它应该可以工作。

来到 JAVA_HOME，它设置正确，因为你得到一个 Java 异常，否则它会是一个不同的错误。

希望能帮助到你。对于那些开始使用 Hadoop 的人，这里是有用资源的[综合](http://www.thecloudavenue.com/p/hadoopresources.html)列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:25:44.237

我一定是去了“libexec”文件夹，然后运行了那个命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T18:01:18.587

我也面临同样的问题，请检查您的 jar 文件和类名，Java 区分大小写。还要检查您的命令，每个单词之间应该有适当的空格

现在我解决了这个问题..一切顺利

# audio - 如何将 QBASIC PLAY 命令转换为更现代的东西？

> ID：11355353
> 
> 赞同：7
> 
> 时间：2012-07-06T03:15:30.557
> 
> 标签：audio, dos, qbasic, freebasic, quickbasic

我的 QB 应用程序中有这样的播放命令：

```
PLAY "MSe8f#4f#8f#8g8a8b4.a4.g4.f#4.o0b8o1e8e8e4d8e2." 
```

我想以某种方式将这些转换为现代应用程序可以使用的东西。有什么想法吗？我目前正在使用 FreeBasic 中的应用程序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-08T02:36:59.393

您可以使用这样的工具（C 代码）将您的播放字符串转换为 WAV 文件：

```
// file: play2wav.c
#include <stddef.h>
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <math.h>

#ifndef M_PI
#define M_PI 3.14159265358
#endif

double Note2Freq(int Note) // Note=1 = C1 (32.7032 Hz), Note=84 = B7 (3951.07 Hz)
{
  double f = 0;
  if (Note > 0)
    f = 440 * exp(log(2) * (Note - 46) / 12);
  return f;
}

int Name2SemitonesFromC(char c)
{
  static const int semitonesFromC[7] = { 9, 11, 0, 2, 4, 5, 7 }; // A,B,C,D,E,F,G
  if (c < 'A' && c > 'G') return -1;
  return semitonesFromC[c - 'A'];
}

typedef struct tPlayer
{
  enum
  {
    StateParsing,
    StateGenerating,
  } State;

  int Tempo;
  int Duration;
  int Octave;
  enum
  {
    ModeNormal,
    ModeLegato,
    ModeStaccato,
  } Mode;

  int Note;
  double NoteDuration;
  double NoteTime;
  unsigned SampleRate;
} tPlayer;

void PlayerInit(tPlayer* pPlayer, unsigned SampleRate)
{
  pPlayer->State = StateParsing;
  pPlayer->Tempo = 120; // [32,255] quarter notes per minute
  pPlayer->Duration = 4; // [1,64]
  pPlayer->Octave = 4; // [0,6]
  pPlayer->Mode = ModeNormal;
  pPlayer->Note = 0;
  pPlayer->SampleRate = SampleRate;
}

int PlayerGetSample(tPlayer* pPlayer, const char** ppMusicString, short* pSample)
{
  int number;
  int note = 0;
  int duration = 0;
  int dotCnt = 0;
  double sample;
  double freq;

  *pSample = 0;

  while (pPlayer->State == StateParsing)
  {
    char c = **ppMusicString;

    if (c == '\0') return 0;

    ++*ppMusicString;

    if (isspace(c)) continue;

    c = toupper(c);

    switch (c)
    {
    case 'O':
      c = **ppMusicString;
      if (c < '0' || c > '6') return 0;
      pPlayer->Octave = c - '0';
      ++*ppMusicString;
      break;

    case '<':
      if (pPlayer->Octave > 0) pPlayer->Octave--;
      break;

    case '>':
      if (pPlayer->Octave < 6) pPlayer->Octave++;
      break;

    case 'M':
      c = toupper(**ppMusicString);
      switch (c)
      {
      case 'L':
        pPlayer->Mode = ModeLegato;
        break;
      case 'N':
        pPlayer->Mode = ModeNormal;
        break;
      case 'S':
        pPlayer->Mode = ModeStaccato;
        break;
      case 'B':
      case 'F':
        // skip MB and MF
        break;
      default:
        return 0;
      }
      ++*ppMusicString;
      break; // ML/MN/MS, MB/MF

    case 'L':
    case 'T':
      number = 0;
      for (;;)
      {
        char c2 = **ppMusicString;
        if (isdigit(c2))
        {
          number = number * 10 + c2 - '0';
          ++*ppMusicString;
        }
        else break;
      }
      switch (c)
      {
      case 'L':
        if (number < 1 || number > 64) return 0;
        pPlayer->Duration = number;
        break;
      case 'T':
        if (number < 32 || number > 255) return 0;
        pPlayer->Tempo = number;
        break;
      }
      break; // Ln/Tn

    case 'A': case 'B': case 'C': case 'D':
    case 'E': case 'F': case 'G':
    case 'N':
    case 'P':
      switch (c)
      {
      case 'A': case 'B': case 'C': case 'D':
      case 'E': case 'F': case 'G':
        note = 1 + pPlayer->Octave * 12 + Name2SemitonesFromC(c);
        break; // A...G
      case 'P':
        note = 0;
        break; // P
      case 'N':
        number = 0;
        for (;;)
        {
          char c2 = **ppMusicString;
          if (isdigit(c2))
          {
            number = number * 10 + c2 - '0';
            ++*ppMusicString;
          }
          else break;
        }
        if (number < 0 || number > 84) return 0;
        note = number;
        break; // N
      } // got note #

      if (c >= 'A' && c <= 'G')
      {
        char c2 = **ppMusicString;
        if (c2 == '+' || c2 == '#')
        {
          if (note < 84) note++;
          ++*ppMusicString;
        }
        else if (c2 == '-')
        {
          if (note > 1) note--;
          ++*ppMusicString;
        }
      } // applied sharps and flats

      duration = pPlayer->Duration;

      if (c != 'N')
      {
        number = 0;
        for (;;)
        {
          char c2 = **ppMusicString;
          if (isdigit(c2))
          {
            number = number * 10 + c2 - '0';
            ++*ppMusicString;
          }
          else break;
        }
        if (number < 0 || number > 64) return 0;
        if (number > 0) duration = number;
      } // got note duration

      while (**ppMusicString == '.')
      {
        dotCnt++;
        ++*ppMusicString;
      } // got dots

      pPlayer->Note = note;
      pPlayer->NoteDuration = 1.0 / duration;
      while (dotCnt--)
      {
        duration *= 2;
        pPlayer->NoteDuration += 1.0 / duration;
      }
      pPlayer->NoteDuration *= 60 * 4\. / pPlayer->Tempo; // in seconds now
      pPlayer->NoteTime = 0;

      pPlayer->State = StateGenerating;
      break; // A...G/N/P

    default:
      return 0;
    } // switch (c)
  }

  // pPlayer->State == StateGenerating
  // Calculate the next sample for the current note

  sample = 0;

  // QuickBasic Play() frequencies appear to be 1 octave higher than
  // on the piano.
  freq = Note2Freq(pPlayer->Note) * 2;

  if (freq > 0)
  {
    double f = freq;

    while (f < pPlayer->SampleRate / 2 && f < 8000) // Cap max frequency at 8 KHz
    {
      sample += exp(-0.125 * f / freq) * sin(2 * M_PI * f * pPlayer->NoteTime);
      f += 2 * freq; // Use only odd harmonics
    }

    sample *= 15000;
    sample *= exp(-pPlayer->NoteTime / 0.5); // Slow decay
  }

  if ((pPlayer->Mode == ModeNormal && pPlayer->NoteTime >= pPlayer->NoteDuration * 7 / 8) ||
      (pPlayer->Mode == ModeStaccato && pPlayer->NoteTime >= pPlayer->NoteDuration * 3 / 4))
    sample = 0;

  if (sample > 32767) sample = 32767;
  if (sample < -32767) sample = -32767;

  *pSample = (short)sample;

  pPlayer->NoteTime += 1.0 / pPlayer->SampleRate;

  if (pPlayer->NoteTime >= pPlayer->NoteDuration)
    pPlayer->State = StateParsing;

  return 1;
}

int PlayToFile(const char* pFileInName, const char* pFileOutName, unsigned SampleRate)
{
  int err = EXIT_FAILURE;
  FILE *fileIn = NULL, *fileOut = NULL;
  tPlayer player;
  short sample;
  char* pMusicString = NULL;
  const char* p;
  size_t sz = 1, len = 0;
  char c;
  unsigned char uc;
  unsigned long sampleCnt = 0, us;

  if ((fileIn = fopen(pFileInName, "rb")) == NULL)
  {
    fprintf(stderr, "can't open file \"%s\"\n", pFileInName);
    goto End;
  }

  if ((fileOut = fopen(pFileOutName, "wb")) == NULL)
  {
    fprintf(stderr, "can't create file \"%s\"\n", pFileOutName);
    goto End;
  }

  if ((pMusicString = malloc(sz)) == NULL)
  {
NoMemory:
    fprintf(stderr, "can't allocate memory\n");
    goto End;
  }

  // Load the input file into pMusicString[]

  while (fread(&c, 1, 1, fileIn))
  {
    pMusicString[len++] = c;

    if (len == sz)
    {
      char* p;

      sz *= 2;
      if (sz < len)
        goto NoMemory;

      p = realloc(pMusicString, sz);
      if (p == NULL)
        goto NoMemory;

      pMusicString = p;
    }
  }

  pMusicString[len] = '\0'; // Make pMusicString[] an ASCIIZ string

  // First, a dry run to simply count samples (needed for the WAV header)

  PlayerInit(&player, SampleRate);
  p = pMusicString;
  while (PlayerGetSample(&player, &p, &sample))
    sampleCnt++;

  if (p != pMusicString + len)
  {
    fprintf(stderr,
            "Parsing error near byte %u: \"%c%c%c\"\n",
            (unsigned)(p - pMusicString),
            (p > pMusicString) ? p[-1] : ' ',
            p[0],
            (p - pMusicString + 1 < len) ? p[1] : ' ');
    goto End;
  }

  // Write the output file

  // ChunkID
  fwrite("RIFF", 1, 4, fileOut);

  // ChunkSize
  us = 36 + 2 * sampleCnt;
  uc = us % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 / 256 / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);

  // Format + Subchunk1ID
  fwrite("WAVEfmt ", 1, 8, fileOut);

  // Subchunk1Size
  uc = 16;
  fwrite(&uc, 1, 1, fileOut);
  uc = 0;
  fwrite(&uc, 1, 1, fileOut);
  fwrite(&uc, 1, 1, fileOut);
  fwrite(&uc, 1, 1, fileOut);

  // AudioFormat
  uc = 1;
  fwrite(&uc, 1, 1, fileOut);
  uc = 0;
  fwrite(&uc, 1, 1, fileOut);

  // NumChannels
  uc = 1;
  fwrite(&uc, 1, 1, fileOut);
  uc = 0;
  fwrite(&uc, 1, 1, fileOut);

  // SampleRate
  uc = SampleRate % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = SampleRate / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = 0;
  fwrite(&uc, 1, 1, fileOut);
  fwrite(&uc, 1, 1, fileOut);

  // ByteRate
  us = (unsigned long)SampleRate * 2;
  uc = us % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 / 256 / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);

  // BlockAlign
  uc = 2;
  fwrite(&uc, 1, 1, fileOut);
  uc = 0;
  fwrite(&uc, 1, 1, fileOut);

  // BitsPerSample
  uc = 16;
  fwrite(&uc, 1, 1, fileOut);
  uc = 0;
  fwrite(&uc, 1, 1, fileOut);

  // Subchunk2ID
  fwrite("data", 1, 4, fileOut);

  // Subchunk2Size
  us = sampleCnt * 2;
  uc = us % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);
  uc = us / 256 / 256 / 256 % 256;
  fwrite(&uc, 1, 1, fileOut);

  // Data
  PlayerInit(&player, SampleRate);
  p = pMusicString;
  while (PlayerGetSample(&player, &p, &sample))
  {
    uc = (unsigned)sample % 256;
    fwrite(&uc, 1, 1, fileOut);
    uc = (unsigned)sample / 256 % 256;
    fwrite(&uc, 1, 1, fileOut);
  }

  err = EXIT_SUCCESS;

End:

  if (pMusicString != NULL) free(pMusicString);
  if (fileOut != NULL) fclose(fileOut);
  if (fileIn != NULL) fclose(fileIn);

  return err;
}

int main(int argc, char** argv)
{
  if (argc == 3)
//    return PlayToFile(argv[1], argv[2], 44100); // Use this for 44100 sample rate
    return PlayToFile(argv[1], argv[2], 16000);

  printf("Usage:\n  play2wav <Input-QBASIC-Play-String-file> <Output-Wav-file>\n");
  return EXIT_FAILURE;
} 
```

使用 gcc 编译：

```
gcc play2wav.c -o play2wav.exe 
```

测试文件，JingleBells.txt：

```
t200l4o2mneel2el4eel2el4egl3cl8dl1el4ffl3fl8fl4fel2el8eel4edde
l2dgl4eel2el4eel2el4egl3cl8dl1el4ffl3fl8fl4fel2el8efl4ggfdl2c 
```

跑：

```
play2wav.exe JingleBells.txt JingleBells.wav 
```

喜欢听 JingleBells.wav！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T16:24:53.190

此 QB 播放格式化字符串包含音符和持续时间符号，可以将其转换为 MIDI 命令，然后以 MIDI 文件格式打包。您可能需要根据某些默认值添加更详细的时间和相对音量信息。

MIDI 仍然被认为是一种当前格式，目前有无数的工具和设备支持它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T16:50:33.987

我猜“现代应用程序”播放音乐的方式是使用 .mid 文件。FreeBasic 包括通过 fmod 库支持音乐。因此，您可以使用 MIDI Tracker 或类似的工具将音乐转换为 .MID 文件格式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T03:24:11.070

在 Qbasic 中没有简单的方法可以做到这一点。您基本上需要编写一个现代声音驱动程序。你需要做一些更骇人听闻的事情，比如使用[Audio Hijack](http://rogueamoeba.com/audiohijackpro/)（或类似的 PC 应用程序），甚至是[这条 0.85 美元的电缆](http://www.monoprice.com/products/product.asp?c_id=102&cp_id=10218&cs_id=1021802&p_id=644&seq=1&format=2)。

# objective-c - Mac：检查键盘事件

> ID：11355355
> 
> 赞同：2
> 
> 时间：2012-07-06T03:15:52.990
> 
> 标签：objective-c, macos, cocoa, keyboard

我正在为 Mac 制作一个简单的钢琴游戏。当用户按下键盘时，钢琴的琴键

可以同时按下。

但是，我对如何检查何时在 Mac 键盘上按下“D，F .....”键一无所知。

Objective-C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:36:39.080

与许多事情一样，有多种方法可以做到这一点。然而，一种简单的方法是`-keyDown:`在您的 NSView 子类中覆盖。据推测，这将是绘制钢琴键盘的 NSView 子类。例子：

```
- (void)keyDown:(NSEvent *)event
{
    switch ([event keyCode])
    {
        case 0x02:
            // D key pressed
            break;
        case 0x03:
            // F key pressed
            break;
        // etc.
    }
} 
```

我发现[Key Codes](http://manytricks.com/keycodes/)应用程序可以方便地查找关键代码，但您也可以在您的`-keyDown:`方法中放置一个日志语句，然后按键查找相应的代码。它们也在`<HIToolbox/Events.h>`标题中。

有关详细信息，请参阅[Apple 的事件处理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingKeyEvents/HandlingKeyEvents.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:40:15.460

你有一个 NSView 子类作为钢琴视图吗？如果你这样做了，那么只需覆盖该`-(void)keyDown:(NSEvent *)event`方法，并记录下你想要的任何键。例如：

```
-(void)keyDown:(NSEvent *)event {
    NSString *characters;
    characters = [event characters];

    switch (characters)
    {
        case 'd':
             //do something;
        default:
             break;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:35:11.847

通过使用此代码，您可以捕获所有按键事件。

我是 KeyCode 。样本 kVK_End

```
while (true)

{

    for (int i=0; i<128; i++)
    {
        if (CGEventSourceKeyState(kCGEventSourceStateCombinedSessionState,i))
        {
            NSLog(@"Key Press");
        }
    }
} 
```

# iphone - 在 testflightapp.com 上为我的设备获取预配访问权限

> ID：11355358
> 
> 赞同：0
> 
> 时间：2012-07-06T03:16:16.703
> 
> 标签：iphone, testflight

有人刚刚邀请我作为“开发人员”(testflightapp.com) 加入他们的项目。我希望能够测试应用程序。我是否需要等待创建构建的人将我的设备添加到配置列表中？（即使我有开发人员访问权限？）是因为他们有自己独特的团队 ID（捆绑种子 ID）吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:19:15.160

您需要将设备的 UDID 添加到[Apple Developer Portal](http://developer.apple.com)。因此，您的问题的答案取决于您是否可以访问它。

[试飞常见问题解答：](http://help.testflightapp.com/customer/portal/articles/402851-testflight-faq)

> *[snip]*邀请并收集团队成员的 UDID，并将它们添加到您的 Apple Developer Portal 和应用程序的配置文件中。构建 iPhone 应用程序 (.IPA) 并上传到 TestFlight。将构建分发给团队成员，让奇迹发生。*[剪辑]*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:10:25.157

当您在 TestFlight 上注册为开发人员并在您的设备上执行所需的操作时，它会将您设备的 UDID 发送给 TestFlight 帐户上的团队负责人。然后，他们必须通过他们的配置文件添加您的 UDID，并使用包含您设备的更新配置文件创建他们的应用程序的新版本。将新构建提交到 TestFlight 后，您应该会收到一封电子邮件，通知您有新构建可用，然后您可以下载该构建。

幸运的是，一旦添加了您的 UDID，一切都应该运行顺利，并且您只会在有新版本可用时收到通知。

# asp.net - 一个 SqlDataSource 上的多个 INSERT 语句

> ID：11355359
> 
> 赞同：2
> 
> 时间：2012-07-06T03:16:21.303
> 
> 标签：asp.net, sql, sql-server, webforms

对于“新记录”网站，我有一个`FormView`附加到`SqlDataSource`. 用户输入数据并`InsertCommand`具有 SQL INSERT 语句。问题是我想做其他查询作为初始化的一部分，这些查询涉及其他表。

基本上我想在用户单击“插入”按钮时执行所有这些查询。第一个 INSERT 从输入表单中获取值，但其他三个始终相同。

```
INSERT INTO proceso (nombreProceso, macroProceso, analista_id)
VALUES (@nombreProceso,@macroProceso,@analista_id)
INSERT INTO marcador_progreso (marcador_id,state,proceso_id) VALUES (1,'False',@id)
INSERT INTO marcador_progreso (marcador_id,state,proceso_id) VALUES (2,'False',@id) 
INSERT INTO marcador_progreso (marcador_id,state,proceso_id) VALUES (3,'False',@id) 
```

当我运行它时，第一个语句显然被执行（即`proceso`插入了一条新记录），但其他 3 个 INSERT 没有。我应该如何着手解决这个问题？

SqlDataDource 包含 id 参数

```
 <InsertParameters>
     ... a few parameters...
     <asp:Parameter Name="id" />
</InsertParameters> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:15:32.377

如果我错了，请纠正我，但在我看来，您希望`@id`事物是刚刚插入的行的 ID `proceso`。至少这似乎来自相应`marcador_progreso`列的名称 ( `proceso_id`)。如果我的猜测是正确的，那么您不需要一个*名为*`id`. 查询中的`@id`应该是由 first 插入的行的 ID 初始化的*局部变量*`INSERT`。

如果`proceso`的 ID 是一个整数`IDENTITY`列，那么像这样更改您的脚本：

```
INSERT INTO proceso (nombreProceso, macroProceso, analista_id)
VALUES (@nombreProceso,@macroProceso,@analista_id);
 **DECLARE @id int;
SET @id = SCOPE_IDENTITY();** 
INSERT INTO marcador_progreso (marcador_id,state,proceso_id) VALUES (1,'False',@id);
INSERT INTO marcador_progreso (marcador_id,state,proceso_id) VALUES (2,'False',@id);
INSERT INTO marcador_progreso (marcador_id,state,proceso_id) VALUES (3,'False',@id); 
```

并删除`id`参数。

该[`SCOPE_IDENTITY()`](http://msdn.microsoft.com/en-us/library/ms190315.aspx "SCOPE_IDENTITY (Transact-SQL)")函数返回插入到`IDENTITY`当前执行范围内任何表的列中的最后一个值。

# heroku - Heroku 日志记录和异常跟踪

> ID：11355360
> 
> 赞同：1
> 
> 时间：2012-07-06T03:16:42.463
> 
> 标签：heroku, rsyslog, airbrake

我一直在玩 Heroku、Airbrake 和 Papertrail。我喜欢 Airbrake 界面和异常跟踪系统。一个严重的弱点是您必须同步向它发送消息。哎哟! 如果您可以将 Heroku rsyslog 指向 Papertrail 之类的服务，并让 Papertrail 检测 Airbrake XML 消息并将它们发布到您的 Airbrake/errbit 服务器，那不是很好吗？

有没有人做过这样的事情？

如果不是，人们会建议将数据异步发送到 Airbrake 吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:45:41.390

这现在是异步的。

[https://github.com/airbrake/airbrake/wiki/Using-Airbrake-asynchronously](https://github.com/airbrake/airbrake/wiki/Using-Airbrake-asynchronously)

斯图

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T23:24:35.707

目前有一张票可以让 Airbrake 异步，[https://github.com/airbrake/airbrake/issues/69](https://github.com/airbrake/airbrake/issues/69)。一旦更新，我会在这里发布。

本

# spring - html5音频找不到源

> ID：11355361
> 
> 赞同：0
> 
> 时间：2012-07-06T03:16:45.127
> 
> 标签：spring, html, jsp, html5-audio

我添加了一个音频 html5 标记，其中包含音频文件的正确来源。

```
<audio controls="controls"> 
    <source src="/WEB-INF/classes/newAudio.wav" type="audio/wav"/> 
</audio> 
```

当我运行我的 spring web 应用程序时，播放器找不到源。我正在使用 Chrome。

音频文件是在 /WEB-INF/classes/newAudio.wav 位置创建的 我应该更改创建的这个文件的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:23:29.367

WEB-INF 通常不可访问。您是否尝试将其移动到另一个文件夹？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:17:13.220

将文件放入您的`<webapp>/sounds/newAudio.wav`.

如果您使用的是 spring security，请在 spring security 配置中添加拦截器 url，例如：

```
<security:http auto-config="true">
    <security:intercept-url pattern="/sounds/**" filters="none"/>
</security:http> 
```

# mysql - 清理 MySQL 中的三重连接

> ID：11355365
> 
> 赞同：0
> 
> 时间：2012-07-06T03:17:18.780
> 
> 标签：mysql, join, left-join

我正在制作一个 QA 网站，与 SO 不同。我想列出我数据库中的所有问题，计算每个问题的投票数和答案数，然后找出特定用户是否已经为每个问题投票。在同一个查询中。

让我备份并提供一些背景信息。我有以下 SQL 表：

```
qa_questions => questionid    title    text
qa_votes => voteid    questionid    userid
qa_answers => answerid    text    questionid    userid 
```

第一个是问题表，其中包含数字 ID、标题和文本。用户可以为问题投票。只有赞成票。每个用户可以为他喜欢的多个问题投票，但每个问题只能投票一次。每当用户为一个问题投票时，都会在表格中添加一个条目`votes`，记录 quesitonid 和 userid。answers 表存储每个答案的数字 id 和文本，还引用正在回答的问题和提交答案的用户。

要获得所有问题的列表，计算每个问题的投票数，并显示特定用户（例如用户 #1）是否为该问题投票，我会：

```
SELECT qa_questions.questionid AS qid, title, text, COUNT( voteid ) AS num_votes,
MAX(CASE WHEN qa_votes.userid=1 THEN 1 ELSE 0 END ) AS voted_for
FROM qa_questions
LEFT JOIN qa_votes ON qa_questions.questionid = qa_votes.questionid
GROUP BY qa_questions.questionid 
```

这行得通。返回的示例：

```
qid    title            text                                                num_votes    voted_for
1      What is 2 + 2?   I want to know the answer to this math question!    2            1 
```

（`voted_for`列中的 1 代表`TRUE`，表示当前用户已投票支持该问题）。

通过这样做，我还可以找出每个问题有多少答案：

```
SELECT qa_questions.questionid AS qid, COUNT( answerid ) AS num_answers
FROM qa_questions
LEFT JOIN qa_answers ON qa_questions.questionid = qa_answers.questionid
GROUP BY qa_questions.questionid 
```

返回：

```
qid  num_answers
1    1
2    2
3    0
4    3 
```

好的，到目前为止一切顺利。现在我想把这两个表结合起来，所以我干脆对qid进行一个join：

```
SELECT t1.qid, title, TEXT, num_votes, voted_for, num_answers
FROM (
    SELECT qa_questions.questionid AS qid, title, text, COUNT( voteid ) AS num_votes,
    MAX(CASE WHEN qa_votes.userid=1 THEN 1 ELSE 0 END) AS voted_for
    FROM qa_questions
    LEFT JOIN qa_votes ON qa_questions.questionid = qa_votes.questionid
    GROUP BY qa_questions.questionid
) AS t1
JOIN (
    SELECT qa_questions.questionid AS qid, COUNT( answerid ) AS num_answers
    FROM qa_questions
    LEFT JOIN qa_answers ON qa_questions.questionid = qa_answers.questionid
    GROUP BY qa_questions.questionid
) AS t2
ON t1.qid = t2.qid 
```

嗯……呸。这行得通，但我不禁觉得它比它需要的*要*丑得多......有没有办法可以简化这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:29:14.357

您可以简单地“堆叠”这些连接......这将大大提高性能。

```
SELECT 
  qa_questions.questionid AS qid, 
  title, 
  text, 
  COUNT(DISTINCT voteid ) AS num_votes,
  MAX(CASE WHEN qa_votes.userid=1 THEN 1 ELSE 0 END) AS voted_for, 
  COUNT(DISTINCT answerid ) AS num_answers
FROM qa_questions
LEFT JOIN qa_votes ON qa_questions.questionid = qa_votes.questionid
LEFT JOIN qa_answers ON qa_questions.questionid = qa_answers.questionid
GROUP BY qa_questions.questionid 
```

# http - 如何将用户的浏览器 URL 重定向到 Nodejs 中的不同页面？

> ID：11355366
> 
> 赞同：101
> 
> 时间：2012-07-06T03:17:39.310
> 
> 标签：http, node.js, redirect, post, webserver

在我尝试编写的应用程序中，主页（[http://localhost:8675](http://localhost:8675)）具有以下形式：

```
<form action='/?joinnew' method='post'>
  <button>Start</button>
</form> 
```

这是 server.js 中的代码：

```
http.createServer(function(request, response) {
  var root = url.parse(request.url).pathname.split('/')[1];
  if (root == '') {
    var query = url.parse(request.url).search:
    if (query == '?joinnew') {
      var newRoom = getAvaliableRoomId(); // '8dn1u', 'idjh1', '8jm84', etc.
      // redirect the user's web browser to a new url
      // ??? How to do.  Need to redirect to 'http://whateverhostthiswillbe:8675/'+newRoom
...
}}} 
```

如果有一种方法可以让我不必知道主机地址，我会很高兴，因为这可能会发生变化。

'http' 对象是常规的 require('http')，而不是 require('express')。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-07-06T03:55:12.050

为了实现重定向，您发送一个重定向状态（301 表示永久重定向，302 表示“这当前存在于...”重定向，307 表示有意临时重定向）：

```
response.writeHead(301, {
  Location: `http://whateverhostthiswillbe:8675/${newRoom}`
}).end(); 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2012-07-06T03:28:24.623

对于那些（与 OP 不同）正在使用[express](https://expressjs.com/en/api.html#res.redirect)库的人：

```
http.get('*',function(req,res){  
    res.redirect('http://exmple.com'+req.url)
}) 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-05-04T16:16:31.747

OP：“如果有办法让我不必知道主机地址，我会很高兴......”

```
response.writeHead(301, {
  Location: "http" + (request.socket.encrypted ? "s" : "") + "://" + 
    request.headers.host + newRoom
});
response.end(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-10T10:14:20.137

在 Express 中，您可以使用

`res.redirect('http://example.com');`

从服务器重定向用户。

要包含状态代码 301 或 302，可以使用

```
res.redirect(301, 'http://example.com'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-12-21T21:36:39.693

如果您正在使用`Express`，最干净的完整答案是这个

```
const express = require('express')
const app     = express()

app.get('*', (req, res) => {
  // REDIRECT goes here
  res.redirect('https://www.YOUR_URL.com/')
})

app.set('port', (process.env.PORT || 3000))
const server = app.listen(app.get('port'), () => {}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-28T13:38:49.257

您可以使用 res.render() 或 res.redirect() 方法使用 node.js express 重定向到另一个页面

例如：

```
var bodyParser = require('body-parser');
var express = require('express');
var navigator = require('web-midi-api');
var app = express();

app.use(express.static(__dirname + '/'));
app.use(bodyParser.urlencoded({extend:true}));
app.engine('html', require('ejs').renderFile);
app.set('view engine', 'html');
app.set('views', __dirname);

app.get('/', function(req, res){
    res.render("index");
});

//This reponds a post request for the login page
app.post('/login', function (req, res) {
    console.log("Got a POST request for the login");
    var data = {
        "email": req.body.email,
        "password": req.body.password
    };

    console.log(data);

    //Data insertion code
    var MongoClient = require('mongodb').MongoClient;
    var url = "mongodb://localhost:27017/";

    MongoClient.connect(url, function(err, db) {
        if (err) throw err;
        var dbo = db.db("college");
        var query = { email: data.email };
        dbo.collection("user").find(query).toArray(function(err, result) {
            if (err) throw err;
            console.log(result);
            if(result[0].password == data.password)

 res.redirect('dashboard.html');
            else

 res.redirect('login-error.html');
            db.close();
        });
    });

});

// This responds a POST request for the add user
app.post('/insert', function (req, res) {
    console.log("Got a POST request for the add user");

    var data = {
        "first_name" : req.body.firstName,
        "second_name" : req.body.secondName,
        "organization" : req.body.organization,
        "email": req.body.email,
        "mobile" : req.body.mobile,
    };

    console.log(data);

    **res.render('success.html',{email:data.email,password:data.password});**

});

//make sure that Service Workers are supported.
if (navigator.serviceWorker) {
    navigator.serviceWorker.register('service-worker.js', {scope: '/'})
        .then(function (registration) {
            console.log(registration);
        })
        .catch(function (e) {
            console.error(e);
        })
} else {
    console.log('Service Worker is not supported in this browser.');
}

// TODO add service worker code here
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('service-worker.js')
        .then(function() { console.log('Service Worker Registered'); });
}

var server = app.listen(63342, function () {

    var host = server.address().host;
    var port = server.address().port;

    console.log("Example app listening at http://localhost:%s", port)
}); 
```

在登录部分，如果数据库中的电子邮件和密码匹配，则该站点将被定向到 dashbaord.html 否则我们将使用 res.redirect() 方法显示 page-error.html。您也可以使用 res.render() 在 node.js 中呈现页面

# html - 如何让一些文本出现在占据整个屏幕的 div 的屏幕中间

> ID：11355367
> 
> 赞同：0
> 
> 时间：2012-07-06T03:17:40.350
> 
> 标签：html, css

我试图获得一个占据整个屏幕并在其上显示单词 Loading... 的 div。我希望文本水平和垂直居中。

我设法让它水平对齐，但文本位于屏幕顶部而不是中间。

代码是：

```
<div id="loadingdiv" class="screenMask"><p>Loading . . .</p></div>

div.screenMask 
{ 
    position: fixed; 
    left: 0px; 
    top: 0px; 
    width: 100%; 
    height: 100%;
    overflow-y: auto;
    z-index: 1000; 
    background-color: #000000; 
    opacity: 0.7; 
    filter: alpha(opacity=70);
    text-align: center;
    font-size: 28px;
}

div.screenMask p
{
border: 1px solid red;
    color: white;
    display: inline;
    z-index: 1001;
vertical-align: middle;
} 
```

这是在jsFiddle中：

[http://jsfiddle.net/azEaq/](http://jsfiddle.net/azEaq/)

任何人都知道我怎样才能获得垂直中间位置的文本？

我认为垂直对齐会起作用，但它没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:25:42.783

将 div.screenMask p 更改为...

```
div.screenMask p
{
border: 1px solid red;
position:absolute;
top:50%;
color: white;
display: inline;
z-index: 1001;
}​ 
```

如果要将其向上移动几个像素，请添加负边距顶部。

**更新** 如果您不需要红色边框（如果用于故障排除），请使用此...

```
div.screenMask 
{ 
position: fixed; 
left: 0px; 
top: 0px; 
width: 100%; 
height: 100%;
overflow-y: auto;
z-index: 1000; 
background-color: #000000; 
opacity: 0.7; 
filter: alpha(opacity=70);
text-align: center;
font-size: 28px;
}

div.screenMask p
{
border: 1px solid red;
color: white;
position:absolute;
height:60px;
width:100%;
text-align:center;
top:50%;
margin:-30px 0 0 0px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:27:44.827

这会起作用，只需将`top: 50%;`和添加`position: absolute;`到您的`div.screenMask p`类中`css`，您可以在此处查看更新[http://jsfiddle.net/azEaq/5/](http://jsfiddle.net/azEaq/5/)

**CSS**标记看起来像：

```
div.screenMask p
{
    border: 1px solid red;
    color: white;
    display: inline;
    z-index: 1001;
    top: 50%;
    position: absolute;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:28:25.947

使用百分比定位然后使用负边距是一种解决方案。使用这种方法是更好的方法，因为它不会破坏窗口/框架调整大小的布局。

```
 div.screenMask p
    {
        border: 1px solid red;
        color: white;
        display: inline;
        z-index: 1001;
        position:absolute;
        height:30px;
        top:50%;
        margin:-15px 0 0 0px;
        vertical-align: middle;
    } 
```

这里看看[http://jsfiddle.net/azEaq/9/](http://jsfiddle.net/azEaq/9/)，调整框架大小以查看它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T03:39:18.267

更改`display`为`table`上`div`和`table-cell`上`p`。如果你想要文本周围的边框，那么只需`span`在它周围添加一个，并给它那个边框：http: [//jsfiddle.net/azEaq/11/](http://jsfiddle.net/azEaq/11/)

这都是完全有效的 css，而且您在这里没有使用表格（不好的做法，对吗？） - 您只是将显示更改为模仿表格。当您想要居中的块上没有预定义的高度时，这种技术很好 - 就像您介绍的情况一样。

# gridview - 在悬停或按下时更改磁贴的外观

> ID：11355371
> 
> 赞同：2
> 
> 时间：2012-07-06T03:18:23.243
> 
> 标签：gridview, winrt-xaml, visualstatemanager

在 GridView（Metro 风格的 XAML 应用程序）中，我希望我的一个图块上有一个 VCR 风格的“暂停”图标。但是当用户将鼠标悬停在按钮上（用鼠标）或按下按钮时，我希望图标变为“播放”。（我想给出一些微妙的暗示来强化它现在暂停的想法，但按下按钮将开始播放。）

如何检测鼠标是否在磁贴上，以及是否按下磁贴，以便更改磁贴的外观？

理想情况下，我想连接到磁贴的 VisualStateManager。但是我还是 VisualStateManager 的新手，当我编辑我的 ItemTemplate 时，我看不到任何可用的视觉状态。（Blend 的“状态”停靠窗口为空。）

如果我制作了 ItemContainerTemplate 的副本并对其进行编辑，那么我可以获得磁贴的视觉状态。但这似乎是*令人难以置信*的矫枉过正。它增加了大量的 XAML（因为这意味着复制任何地方的任何图块支持的每一个功能的最后一点）。这意味着如果微软在 Windows 8 发布之前做出任何更改，我将不得不重新进行更改。

有没有更轻量级的方法来改变我的瓷砖在“指针上方”和“按下”状态下的外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:25:42.550

没有。遗憾的是，如果您想更改控件的行为方式，则需要覆盖模板。我已经完成了您所描述的更改模板的外观和感觉的操作。这是颈部疼痛。

我在某处读到“Xaml 使完成难以置信的困难变得异常容易，而使难以置信的简单变得异常困难”。这几乎总结了我的经验。

抱歉，我无法提供更好的消息。

# ruby - sinatra 停止从公用文件夹加载文件

> ID：11355373
> 
> 赞同：2
> 
> 时间：2012-07-06T03:18:57.810
> 
> 标签：ruby, sinatra, settings

我已经设置了公共文件夹，它工作正常，但是突然 sinatra 停止从公共文件夹加载文件，我在尝试加载 css 和 javascript 文件时得到 404 这是我的配置

```
 set :root, File.dirname(File.dirname(__FILE__))
    set :views, File.dirname(__FILE__) + "/../views"
    set :public_folder, File.dirname(__FILE__) + "/../public" 
```

更新：

当我的代码是

```
 get '/' do
        if Sources.all.size>0 then
            haml :home, {:layout => :"home-layout"}
        elsif request.ip == "127.0.0.1" then
            redirect '/setup/sources'
        else
            redirect '/nothing-here'
        end             
    end 

    get '/setup/sources' do
        if Sources.all.size == 0 then
            @list=FOps.ls(Dir.home).to_json
            haml :setup, {:layout => :"nosetup-layout"}
        else
            redirect '/setup/files'
        end
    end 
```

它仅适用于 /setup/sources 它适用于 /

当我用

```
 get '/' do
        if 0 < 1 then
            haml :home, {:layout => :"home-layout"}
        elsif request.ip == "127.0.0.1" then
            redirect '/setup/sources'
        else
            redirect '/nothing-here'
        end             
    end 

    get '/setup/sources' do
        if 0 < 1 then
            @list=FOps.ls(Dir.home).to_json
            haml :setup, {:layout => :"nosetup-layout"}
        else
            redirect '/setup/files'
        end
    end 
```

它不会加载 js 和 css localhost:4567/setup/sources 但它在 localhost:4567 加载正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:55:55.263

问题出在相对路径上，使用根路径后已修复

# algorithm - 通过使用顶点数和边数之间的关系在可能格式错误的二叉树中查找循环

> ID：11355382
> 
> 赞同：4
> 
> 时间：2012-07-06T03:20:05.047
> 
> 标签：algorithm, data-structures, binary-tree

我最近在一次采访中遇到了这个问题。原来的问题是

> 给定一个指向结构的指针（其结构可以指向二叉树或双向链表），编写一个函数，返回它是指向二叉树还是 DLL。结构定义如下

```
struct node
    {
     /*data member*/
     node *l1;
     node *l2;
    }; 
```

我立即深入研究了这个问题，但后来我意识到这个问题存在一些歧义。如果指针不指向它们中的任何一个（即它是格式错误的 DLL 或格式错误的树）怎么办。所以面试官告诉我，然后我必须编写函数，以便它可以返回所有三种情况。所以函数的返回值变成了一个枚举形式

```
enum StatesOfRoot 
   {
   TREE,
   DLL,
   INVALID_DATA_STRUCTURE,  /* case of malformed dll or malformed tree */
   EITHER_TREE_DLL,         /* case when there is only 1 node */
   }; 
```

所以问题归结为验证二叉树和 DLL 的属性。对于 DLL，这很容易。对于二叉树，我能想到的唯一验证是从根到节点的路径不应该超过一条。（或者不应该有任何循环）所以我建议我们进行深度优先搜索并继续跟踪访问过的节点节点使用 HashMap（面试官直接拒绝）或使用 BST 维护一组访问节点（我想使用 std::set 但面试官突然弹出另一个限制，我不能使用 STL）。他拒绝了这个想法说我不允许使用任何其他数据结构。然后我提出了龟兔问题的修改版本（将二叉树的每个分支视为一个单链表），他说这行不通。

**问题的核心**

然后面试官提出了他的解决方案。他说我们可以计算顶点数和边数，并断言关系**顶点数=边数+1**（必须为二叉树保留的属性）。令我困惑的是我们如何计算顶点的数量（不使用任何额外的数据结构）？他说可以通过简单地执行任何遍历（preorder,postorder,inorder）来完成。我质疑如果树中有一个循环，我们将如何防止无限循环，因为我们没有跟踪访问过的节点。他说这是可能的，但没有告诉怎么做。我严重怀疑他的做法。谁能提供一些关于他提出的解决方案是否正确的见解？如果是，您将如何明确维护不同顶点的计数？请注意，您传递的只是一个指针，您没有其他信息。

PS：后来我收到通知说我通过了下一轮，甚至没有回答面试官的最终解决方案。它应该是诡计吗？

**编辑**：

为了清楚起见，如果我们假设第三种情况不存在（即我们保证它是一个 dll 或二叉树），那么问题就很简单了。它是第三种情况的树部分让我发疯. 请在回答时注意这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:46:47.583

你对他的解决方案持怀疑态度是对的。

双向链表是最简单的。DLL 强制执行不变量：

1.  除了空节点，一个节点的左节点的右节点就是它自己。
2.  除了空节点，一个节点的右节点的左节点就是它自己。
3.  当您继续向左移动时，非循环 DLL 最终将达到空值。
4.  当您继续正确操作时，非循环 DLL 最终将达到空值。
5.  当您继续向左移动时，循环 DLL 最终将到达起始节点。

前面的内容很容易检查，只需一个额外的临时变量，并遍历 DLL。

（注意：检查 3 和 4 或 5 可能需要很长时间。）

二叉树是最难的。BT 强制执行不变量：

1.  “无循环”可以通过以下任何方式显示：
    *   证明没有两个节点指向同一个节点，也没有节点指向根。
    *   证明从根开始的所有路径最终都以叶子结束。
    *   证明所有引用的节点都是不同的。
2.  “无合并”可以通过以下任何方式显示：
    *   证明没有两个节点指向同一个节点。
    *   证明所有引用的节点都是不同的。

正如您所建议的，这些可以通过遍历树并标记访问的每个节点来确定，以确保没有节点被访问两次，或者存储每个访问节点的列表（例如在哈希集或其他结构中）以快速查看-up 如果节点是不同的。

如果您在树中的深度超过计算机中的内存（或访问了更多的节点），你肯定会有一个无限循环。

然而，这并不能帮助我们区分二叉“有向无环图”（DAG）和二叉树。

但是，如果我们知道树中元素的数量，因为这通常是二叉树的库实现的情况。正如面试官建议的那样，您可以通过计算边数与先前已知的节点数相比来检测无限循环。

如果不提前知道这个数字，就很难知道无限大树和大型有限树之间的区别。（除非您知道计算机的内存大小，或其他信息，例如制作树需要多长时间等）

这仍然不能帮助我们检测“No Merges”不变量。

我想不出任何有用的方法来确定不存在合并，而不通过将访问的节点存储在外部数据结构中或在访问时将每个节点标记为已访问来显示没有节点被引用两次。

作为最后的手段，您可以执行以下操作：

1.  显示与计算机内存相比基于树深度（或访问节点数）的“无循环”。（或如下，在编辑中）
2.  通过这种方法演示“不合并”。
    *   从根的左孩子开始，即树的深度 1。
    *   访问深度 1 和深度 0 的每个节点，并验证只有直接父节点引用所选节点。
    *   对根的右孩子做同样的事情。
    *   对树中的每个节点继续此过程：
        1.  选择一个节点，保持对其直接父节点的引用，
        2.  访问树中较高且与所选节点相同深度的每个节点，
        3.  验证在访问节点之外，只有直接父节点引用选定的子节点。
    *   完成此操作后，再次遍历树以验证每个节点的左右指针是否都指向同一个节点。

这个过程只需要一些额外的变量，但会花费很多时间，因为您将每个节点分别与树中更高或相同深度的每个节点进行比较。

我的直觉告诉我，上述过程将是一个 v 平方算法，而不仅仅是 v 阶。

如果你们中的任何人想到另一种方法来解决这个问题，请添加评论。

* * *

编辑：您可以通过简单地将搜索扩展到相同深度和更高深度的每个节点，而是与树中的每个节点进行比较来验证此处的“无循环”。您需要在渐进式算法中执行此操作，将每个节点与树中其上方的每个节点及其自身深度进行比较，然后检查树中比它更深 1 到 5 个节点的所有节点，然后是 6-10 代更低，以此类推。如果您以非渐进方式检查，您可能会陷入无限搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:57:49.230

首先，原始问题清楚地表明正确的输入是 DLL 或树，因此 IMO 没有歧义：如果输入错误，您的代码如何工作并不重要。

不管怎样，你和你的面试官都被赶到了“假设”领域。

但是，他所说的“不使用其他数据结构”是什么意思，因为如果不使用堆栈来记住转折点（使用递归机制或手动创建堆栈数据结构），您甚至无法遍历保证正确的二叉树。

所以我假设我们可以使用堆栈和递归。

一点说明：是的，我知道如果`node`结构包含指向树的指针（我们可以修改指针并在最后将它们带回），我们可以在常量内存中执行此操作，但这里我们没有这些，所以我放弃这个证明并假设这个“显而易见”：我们至少必须能够使用递归。

好吧，我不会将以下称为“简单的中序遍历”，但在这里你有它：

```
#include <stdio.h>
#include <stdbool.h>

struct node
    {
     /*data member*/
     struct node *l1;
     struct node *l2;
    };

// This one counts the nodes in a subtree of V with a depth no more than l that are equal to V0
int CountEqual(struct node* V0, struct node* V, int l)
{
    int thisOneIsEqual = 0;
    if( V == NULL ) {
        return 0;
    }

    if( l == 0 ) {
        return 0;
    }

    if( V0 == V ) {
        thisOneIsEqual = 1;
    }

    return thisOneIsEqual +
        CountEqual(V0, V->l1, l - 1) +
        CountEqual(V0, V->l2, l - 1);
}

// This one checks whether there're equal nodes in a subtree of root with a depth of L
bool Eqs(struct node* root, int L, struct node* V, int l)
{
    if( V == 0 ) {
        return false;
    }

    if( l == 0 ) {
        return false;
    }

    if( CountEqual(V, root, L) > 1 ) {
        return true;
    }

    return
        Eqs(root, L, V->l1, l - 1) ||
        Eqs(root, L, V->l2, l - 1);
}

// This checks whether the depth of the tree rooted at V is no more than l
bool HeightLessThanL(struct node* V, int l)
{
    if( V == 0 ) {
        return true;
    }

    if( l == 0 ) {
        return false;
    }

    return
        HeightLessThanL(V->l1, l - 1) &&
        HeightLessThanL(V->l2, l - 1);
}

bool isTree(struct node* root)
{
    int l = 1;
    while( 1 ) {
        if( HeightLessThanL(root, l - 1) ) {
            return true;
        }

        if( Eqs(root, l, root, l) ) {
            return false;
        }

        l++;
    }
}

// A simple test: build a correct tree, then add cycles, equal nodes etc.
#define SIZE 5
int main()
{
    struct node graph[SIZE];
    int i;

    for( i = 0; i < SIZE; ++i ) {
        graph[i].l1 = 0;
        graph[i].l2 = 0;
        if( 2 * i + 1 < SIZE ) {
            graph[i].l1 = graph + 2 * i + 1;
        }
        if( 2 * i + 2 < SIZE ) {
            graph[i].l2 = graph + 2 * i + 2;
        }
    }

    graph[1].l2 = graph + 3;

    printf( "%d\n", isTree( graph ) );
    return 0;
} 
```

这个想法是，对于某些 L，我们要么知道我们有一棵高度为 L 的树，要么在深度为 L 的子树中有两个相等的节点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T03:51:56.360

您必须假设 DLL 和树的一些通用接口。一个抽象的父节点可能会定义一个虚拟的 toHead()，其中 DLL 将转到头节点，而树将转到根节点并返回节点对象等。哈希表在这里结束了。我的 C/C++ 生锈了，所以指针可能有点错误，但是，您要查找的是内存中的位置与“copyHead”的值相同，因为“copyHead”中存储的值是位置头部的...希望对你有所帮助。

```
type *myType;
myType = &structure;

node *copyHead = myType.toHead(); // Where toHead() returns a pointer to the head.

while( copyHead != &(*myType.next()) ) {
    if(*myType.curr() == null) { return "is tree"}
}

return "is DLL"; 
```

# twitter-bootstrap - zclip & twitter bootstrap：不兼容？

> ID：11355385
> 
> 赞同：0
> 
> 时间：2012-07-06T03:20:47.823
> 
> 标签：twitter-bootstrap, zclip

在我开始使用 twitter bootstrap css 框架之前，我一直在成功使用 zclip 复制到剪贴板功能。现在我似乎不能再使用 zclip 了，有人有解决方案吗？

部分测试结果：

这是我使用 zclip 的方法：

```
 $('.test').zclip({
        path:"{{ asset('bundles/yopyourownpoet/flash/ZeroClipboard.swf') }}",
        copy: 'test',
        afterCopy:function(){
            alert('The poem has been copied to the clipboard.');
        },
    }); 
```

这适用于以下 html：

```
<div class='test'>test</div> 
```

但是每当我尝试使用图像时，它就不再起作用了，flash 的东西不会出现：

```
<div class='test'><img src="{{ asset('bundles/yopyourownpoet/images/Star.png') }}" alt="Star" height="100" width="100" /></div> 
```

在我开始使用 bootstrap 之前，这工作得很好......关于使用 zclip 和 bootstrap 的任何提示，并且在图像上有 flash 的东西吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:39:11.750

好吧，经过多次尝试，我终于让它工作了。我不得不恢复到 zeroclipboard 并且不再使用 zclip。这是有效的代码：

```
 <div id="d_clip_container" style="position:relative; bottom: 25px; display: inline;">
        <img id='d_clip_button' style="position:relative; top: 25px;" src="{{ asset('bundles/yopyourownpoet/images/CopyPoemPage8.png') }}" alt="Copy Poem" height="71" width="300" />
    </div> 
```

-

```
 ZeroClipboard.setMoviePath("{{ asset('bundles/yopyourownpoet/flash/ZeroClipboard.swf') }}");
    var clip = new ZeroClipboard.Client();
    clip.setText( 'text to copy' );
    clip.glue( 'd_clip_button', 'd_clip_container' );
    clip.setHandCursor( true ); 
```

请注意，我必须使用一个技巧，容器底部 25px 和图像顶部 25px，以便 flash 的东西与图像叠加。

这很好用，只是在悬停图像时光标并不总是变为指针。

我认为这个解决方案有点阴暗，所以如果有人有更好的解决方案，请分享。

# java - 如何在 Popup ChoiceGroup 中设置元素 - Java ME

> ID：11355386
> 
> 赞同：2
> 
> 时间：2012-07-06T03:20:54.797
> 
> 标签：java, java-me, midp, lcdui, rms

我正在用 Java ME 开发一个短信应用程序。它具有选择不同运营商的选项。

我已经实现了一个 RMS 来存储从 POPUP ChoiceGroup 中选择的用户名、密码和运营商名称。

我需要设置用户在下次登录期间之前从 rms 中选择的 ChoiceGroup 元素。

如果我在 RMS 中选择了索引或字符串，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:40:22.407

> 我需要设置 ChoiceGroup 元素...

最直接的方法是使用`append`方法。

```
 myChoiceGroup.append(string1, null);
    myChoiceGroup.append(string2, null);
    // ... etc 
```

**[在API 文档](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ChoiceGroup.html#append(java.lang.String,%20javax.microedition.lcdui.Image))**中查找详细信息，很容易阅读：

```
public int append(String stringPart,
                  Image imagePart)

    Appends an element to the ChoiceGroup.

    Specified by:
        append in interface Choice

    Parameters:
        stringPart - the string part of the element to be added
        imagePart - the image part of the element to be added,
                    or null if there is no image part 
    Returns:
        the assigned index of the element 
    Throws:
        NullPointerException - if stringPart is null 
```

对于更复杂的用途，有一些方法`insert`和`set`API 文档，在与上述相同的链接中提供。

为了完整起见，上述方法不仅在 POPUP 选择组中可用，而且在所有实现`Choice`接口的对象中都具有相似的语义，包括其他类型的 ChoiceGroup 和 List。

由于您还提到了有效的 RMS，请考虑查看[另一个答案](https://stackoverflow.com/a/9719264/839601)中提到的 RMS 教程。

# google-maps - 谷歌地图提供谷歌地方 API 或谷歌地图 API 未返回的结果

> ID：11355393
> 
> 赞同：0
> 
> 时间：2012-07-06T03:23:01.803
> 
> 标签：google-maps, google-places-api

我正在尝试使用 Google maps API 或 Google Places API 查找悉尼歌剧院的纬度/经度。但是，尽管浏览器中的谷歌地图会立即找到正确的结果，但两者都不会返回类似的结果。

我正在使用这些网址：

[http://maps.googleapis.com/maps/api/geocode/json?sensor=false&bounds=-28.729,153.984|-36.102,142.470&address=OPERA%20HOUSE](http://maps.googleapis.com/maps/api/geocode/json?sensor=false&bounds=-28.729,153.984|-36.102,142.470&address=OPERA%20HOUSE)

和

[https://maps.googleapis.com/maps/api/place/search/json?location=-33.9179,151.2333&radius=5000&sensor=false&name=opera%20house&key=](https://maps.googleapis.com/maps/api/place/search/json?location=-33.9179,151.2333&radius=5000&sensor=false&name=opera%20house&key=) {secret}

Google Maps API 返回中国和美国的 3 个地点，Google Places API 返回“ZERO_RESULTS”。请原谅我没有包含我的 Google 地方信息密钥。纬度/经度适用于悉尼市中心。

我做错了什么，还是谷歌地图使用了一个比 API 使用的数据库更完整的私有数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:32:54.810

你试过[悉尼歌剧院](http://maps.googleapis.com/maps/api/geocode/json?sensor=false&bounds=-28.729,153.984|-36.102,142.470&address=Sydney+OPERA%20HOUSE)吗？

编辑：还是新的[关键字搜索](http://googlegeodevelopers.blogspot.com/2012/05/google-places-api-search-refinements-as.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T11:25:35.613

向大家道歉，实际上我做错了：（lat，lng）是针对距离歌剧院超过 5 公里的肯辛顿的，所以它在半径之外。当我增加半径时，我得到了预期的结果。

换句话说，我没有证据表明 Google Places API 提供的结果比 Google Maps 网页差。

Note: Adding "NSW" to the end of a Google *Maps* API query results in the opera house being found.

# python - Python：TypeError：“NoneType”类型的对象没有 len()

> ID：11355394
> 
> 赞同：10
> 
> 时间：2012-07-06T03:23:10.910
> 
> 标签：python

我从这个 Python 代码中得到一个错误：

```
with open('names') as f:
    names = f.read()
    names = names.split('\n')
    names.pop(len(names) - 1)
    names = shuffle(names)
    f.close()

assert len(names) > 100 
```

错误：

```
Python: TypeError: object of type 'NoneType' has no len() 
```

断言语句抛出此错误，我做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-06T03:24:00.273

`shuffle(names)`是就地操作。放下作业。

此函数返回`None`，这就是您遇到错误的原因：

```
TypeError: object of type 'NoneType' has no len() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T03:33:35.853

在您希望使用它之前，您不需要分配`names`给`list`or或其他任何东西。`[]`

使用列表推导来制作名称列表会更整洁。

`shuffle`修改您传递给它的列表。它总是返回`None`

如果您使用的是上下文管理器 ( `with ...`)，则无需显式关闭文件

```
from random import shuffle

with open('names') as f:
    names = [name.rstrip() for name in f if not name.isspace()]
    shuffle(names)

assert len(names) > 100 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T03:24:22.833

这样做的目的是什么

```
 names = list; 
```

? 此外，`;`在 Python 中不需要。

你想要

```
 names = [] 
```

或者

```
 names = list() 
```

在你的程序开始时？尽管给定了您的特定代码，但此语句不需要创建此`names`变量，因为您稍后会在从文件中将数据读入其中时这样做。

@JBernardo 已经指出了代码的另一个（也是更主要的）问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-01T10:06:02.100

我遇到了这个问题，但是在将对象更改为 str 后，问题解决了。str(fname).isalpha():

# visual-studio - Resharper 挑战：使用 .Mock().Return() 而不是 setter，反之亦然

> ID：11355399
> 
> 赞同：1
> 
> 时间：2012-07-06T03:23:42.627
> 
> 标签：visual-studio, resharper, rhino-mocks

我经常遇到一个与 Rhino Mocks 强制您在可用时使用 setter 而不是 mock（反之亦然）的方式有关的问题。

例如：

```
var foo = MockRepository.GenerateStub<IFoo>();

// Valid only if Bar has a setter (of course, otherwise it wouldn't compile)
foo.Bar = new Bar(); 

// Valid only if Bar does not have a setter (less obvious, as this will compile)
foo.Stub(x => x.Bar).Return(new Bar()); 
```

处理这些问题确实很麻烦，尤其是在进行重构时。

所以我的问题是，谁能想出一种自定义 Resharper/Visual Studio 快捷方式的好方法，让我可以快速从一个转换到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:17:58.267

回答我自己的问题 - 自定义检查模式可以帮助解决这个问题。

搜索模式是：$object$.$property$ = $value$;

替换模式是： $object$.Stub(x => x.$property$).Return($value$);

$object$ 和 $value$ 都是表达式占位符，$property$ 是标识符占位符。

不幸的是，因为这是代码检查，所以它始终可见，导致整个代码库中出现绿色曲线。

# c# - 一个事务中的 ASP.Net 数据库和 IO 操作

> ID：11355400
> 
> 赞同：1
> 
> 时间：2012-07-06T03:23:59.477
> 
> 标签：c#, asp.net, database, transactions

我需要在 .Net Web 应用程序中执行一系列文件系统和数据库操作，如果发生故障，一切都会回滚。操作是：

1.  使用 HttpPostedFile 将多页 tiff 文件上传到服务器
2.  将发布文件的记录插入数据库
3.  将多页 tiff 中的单个图像处理并保存为服务器上的单个文件
4.  将单个图像的记录插入数据库

我可以使用 3.5 框架中的可用类将这些操作包装在单个事务中吗？我应该手动使用 try catch 块和回滚操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:27:08.510

> 我可以使用 3.5 框架中的可用类将这些操作包装在单个事务中吗？

不，也不使用任何其他技术，因为您的链接薄弱。

1.使用HttpPostedFile上传多页tiff文件到服务器

2.将发布文件的记录插入数据库

3.将多页tiff中的单个图像处理并保存为服务器上的单个文件

4.将单个图像的记录插入数据库

2-4 可以在现代 Windows 上的事务中轻松完成 - NTFS 可以参与事务。

您的问题是 1。1 是不可能的，因为 - 注意 - HTTP 没有事务的概念。如果从您的服务器上传，您可以在上传 CRM（补偿资源管理器）中上传指令，但您需要能够通过 HTTP 删除它们，以防回滚，并且（完美，但可选）上传它们但不在您提交之前可见。这是如果 API 支持它 - 编写起来很简单（.NET 中的 CRM 非常简单），否则你会陷入死胡同或妥协。

如果您要上传到您的服务器然后处理事务，那么从技术上讲，要正确处理多图像上传，您必须决定事务控制的位置。上传必须有适当的 API 来启动事务，使用事务令牌进行上传，然后在所有上传完成后提交（因为只有这样才能开始处理）。这对编程来说是微不足道的——在大多数情况下甚至不使用 TPM，因为您可以在处理中滚动逻辑事务。但如果您愿意，CRM 可以再次处理回滚时的必要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:33:41.827

尝试以下操作：

```
using (TransactionScope scope = new TransactionScope())
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        try
        { 
            // Do all work here...  
        }
        catch (Exception ex)
        {
           // Delete files
           // LogError(ex);
        }                   
    }
    scope.Complete();
} 
```

# java - 在 Oauth2 身份验证后列出 Google 日历事件

> ID：11355407
> 
> 赞同：1
> 
> 时间：2012-07-06T03:24:45.717
> 
> 标签：java, jsp, oauth-2.0, google-calendar-api, google-data-api

我遇到了一个问题，我需要将当前事件在某人的默认 Google 日历中列出，可能需要一个星期。我在下面列出了我能找到的最好的代码示例，但它没有任何指向 Oauth2 调用的内容。另外，我收到服务错误。但我找不到任何可能引用它的东西，包括 accessProtectedResource 对象。

有人可以解释一下应该是什么服务，或者提供一个示例链接，该示例将在 Oauth2 调用后为我提供日历事件？

```
CalendarList calendarList = service.calendarList().list().execute();

    while (true) {
      for (CalendarListEntry calendarListEntry : calendarList.getItems()) {
        System.out.println(calendarListEntry.getSummary());
      }
      String pageToken = calendarList.getNextPageToken();
      if (pageToken != null && !pageToken.isEmpty()) {
        calendarList =     service.calendarList().list().setPageToken(pageToken).execute();
      } else {
        break;
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:52:41.770

由于 Google 文档在那里，我花了一段时间才得到这个，但它有一个错误。

```
Calendar service3 = new Calendar(transport, jsonFactory, accessProtectedResource);

com.google.api.services.calendar.model.Calendar calendar = service3.calendars().get("primary").execute();
com.google.api.services.calendar.model.Events events = service3.events().list("primary").execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:55:45.357

你可以参考

[https://developers.google.com/google-apps/calendar/v1/developers_guide_java](https://developers.google.com/google-apps/calendar/v1/developers_guide_java)

[在 Java JFrame 中显示 Google 日历](https://stackoverflow.com/questions/5216825/displaying-google-calendar-in-java-jframe)

[https://developers.google.com/google-apps/calendar/v2/developers_guide_java](https://developers.google.com/google-apps/calendar/v2/developers_guide_java)

编写类似这样的代码

```
// Create a CalenderService and authenticate
CalendarService myService = new CalendarService("exampleCo-exampleApp-1");
myService.setUserCredentials("jo@gmail.com", "mypassword");

// Send the request and print the response
URL feedUrl = new URL("https://www.google.com/calendar/feeds/default/allcalendars/full");
CalendarFeed resultFeed = myService.getFeed(feedUrl, CalendarFeed.class);
System.out.println("Your calendars:");
System.out.println();
for (int i = 0; i<resultFeed.getEntries().size(); i++) {
  CalendarEntry entry = resultFeed.getEntries().get(i);
  System.out.println("\t" + entry.getTitle().getPlainText());
} 
```

# php - 在 php 脚本中使用缓存

> ID：11355409
> 
> 赞同：2
> 
> 时间：2012-07-06T03:25:02.520
> 
> 标签：php, sql, file, caching, apc

我对 php 中的缓存感到困惑。我在我的 php 文件中创建了一个显示 2 到 500 的文件。现在我想使用缓存文件来存储数据并显示它。我的代码如下。

```
<?php
  for ($i = 2; $i <= 500; $i++)
    echo "The number is:".$i."<br />";
?> 
```

现在我如何使用缓存文件来保存输出并在浏览器中显示。如果还有其他方法可以在 php 中使用缓存文件，请帮助我。在 php 文件中，我想知道节省时间。如何在 php 中使用缓存脚本来存储输出并进一步显示以节省时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:28:24.670

PHP 中有多种形式的缓存。

如果您可以访问您的虚拟主机上的 memcached 或 APC（一些共享计划禁用此功能），请查找它们，因为它们被认为是相当高性能的缓存形式，因为它直接利用系统内存（memcached 更适合分布式系统） .

[http://php.net/manual/en/book.memcache.php](http://php.net/manual/en/book.memcache.php)

[http://php.net/manual/en/book.apc.php](http://php.net/manual/en/book.apc.php)

如果没有，请查看文件缓存。PHP 带有一个方便的文件库（记录在 PHP 文档中），它允许您读取/写入文件。

[http://www.php.net/manual/en/ref.filesystem.php](http://www.php.net/manual/en/ref.filesystem.php)

最后，您可以查看 SQL 缓存。尽管与其他选项相比，通常不建议这样做，但您希望通过数据库存储的数据也可能是一种选择（如果您需要将其链接到表中的其他数据）。

[http://php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)

祝你好运！

# c# - DirectoryServices PrincipalContext 可以添加到一级容器，但不能添加到子容器

> ID：11355410
> 
> 赞同：0
> 
> 时间：2012-07-06T03:25:14.967
> 
> 标签：c#, active-directory, directoryservices

不知道我在这里缺少什么。我尝试过使用 DirectoryEntry 和 PrincipalContext 并且两种方式都有相同的问题。AD的结构类似于

```
root (okwu.edu)
    students
        AGS
        Traditional 
```

我可以将用户添加到学生容器

```
PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, "OKWU.EDU", "OU=Students,DC=okwu,DC=edu", systemAccount, systemAccountPassword);

UserPrincipal user = new UserPrincipal(domainContext, model.SamAccountName, model.Password, true); 
```

但如果我将 dn 用于 AGS（或传统）

```
 PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, "OKWU.EDU", "OU=AGS,OU=Students,DC=OKWU,DC=edu", systemAccount, systemAccountPassword); 
```

然后我得到一个错误，该对象在服务器上不存在。我找到了第一级容器的东西，但是当我尝试进入第二级容器时，没有任何东西可以解释我缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:12:34.460

当然是因为您没有将主要上下文更改为 "OU=AGS,OU=Students,DC=okwu,DC=edu" ：

```
PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, "OKWU.EDU", "OU=AGS,OU=Students,DC=okwu,DC=edu", systemAccount, systemAccountPassword); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:21:28.513

我能想到三种不同的可能性。

**可能性一：**

你确定DN是真的`OU=AGS,OU=Students,DC=OKWU,DC=edu`吗？

OU 可能包含容器。因此，您的 DN 实际上可能看起来像这样

```
CN=AGS,OU=Students,DC=OKWU,DC=edu 
```

获取 ADexplorer 或 ADSIedit。首先检查他们的 distinctName 。

**可能性2：**

您有多个域控制器。创建了一个域控制器，`OU=AGS,OU=Students,DC=OKWU,DC=edu`但没有创建其他域控制器。这可能是由于复制设置不正确

**可能性3：**

您的*SystemAccount*无权查看`OU=AGS,OU=Students,DC=OKWU,DC=edu`。为了证明这一点，您可以在使用 ADSIedit 时尝试以*SystemAccount身份登录。*

# shell - 在 shell 脚本中块的内存存储

> ID：11355411
> 
> 赞同：0
> 
> 时间：2012-07-06T03:25:27.850
> 
> 标签：shell, awk

我需要一些关于下面的建议我已经写了一个脚本，下面是算法

```
Step 1: Get the RID's from file 1 and store that in "temp1"
Step 2: With the help of "temp1" get the corresponding blocks from file 2 and accumulate it
Step 3: With the help of the accumulated block, get the counts of each of the fields 
```

代码

```
Step 1: zgrep -i XXXX **FILE 1**|grep -o "RID=[0-9|A-Z]*"|uniq|cut -d "=" -f2 > **TEMP 1**  
Step 2 : awk 'while (getline < **TEMP 1**){requestArray[$0]++;} close(**TEMP 1**); GET BLOCKS >> **TEMP 2**}  **FILE 2**(CODE is trimmed) 
```

很久之后

```
Step 3: GET=( $(awk 'Get the necessary fields from temp 2' **TEMP 2**) )` 
```

我面临的问题

我面临的问题是由于输入输出操作导致程序运行缓慢。正如您在步骤 1 中看到的，我在步骤 1 中生成了一个临时文件 TEMP 1，在步骤 2 中，**TEMP 2 文件被多次附加**，因此由于这个巨大的 IO 操作，我的程序很慢

解决方案相同的解决方案是将temp 1和temp 2设置为内存变量

需要的建议要使 Temp 1 像在内存中一样，我需要知道**如何从终端读取输出并将其存储在数组中**。请您让我知道如何执行此操作。

与此类似，我需要将在 temp 2 中获得的输出存储为数组...

你能帮我解决这个问题吗？谢谢你。

```
SAMPLE DATA
**TEMP 1**
RID 1= 472349723478923489
RID 2= 672349723478923489
RID 3= 772349723478923489
RID 4= 872349723478923489
RID 5= 972349723478923489
RID 6= 372349723478923489

**FILE 1**
asjdghasdh23712893712983712893qwsdhaksdhask **RID 1= 472349723478923489**

**FILE 2**
Starting of block 1
time
date 
hour
parameter 1
parameter 2
parameter 3
RID 1= 472349723478923489
parameter 3
parameter 4
parameter 5
Ending of block 1

Starting of block 2
time
date 
hour
parameter 1
parameter 2
parameter 3
RID 57= 3423423423423234
parameter 3
parameter 4
parameter 5
Ending of block 2

Starting of block 3
time
date 
hour
parameter 1
parameter 2
parameter 3
RID 3= 772349723478923489
parameter 3
parameter 4
parameter 5
Ending of block 3

TEMP 2 
block 1 and block 3 from file 2 as in block 2 RID is 57 which is not present in temp 1\. So this will not be contained here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:10:33.800

现在，**因为你想从鼻子里吃意大利面而不**感到痛苦，所以我们将读懂你的想法并猜测你想做什么。我们有两种选择，一种是把意大利面磨成液体，另一种是张开嘴。

话虽如此，**我猜测问题*可能*出在** file1 上，它是某种结构化数据，它包含一个名为 RID 的键值对。我不知道它是什么，或者它做什么，或者代表什么，但是从字里行间看，file2 有一个对应的条目。

现在，file2 也以某种方式结构化，看起来像是有一些键值对组合成某种形式的结构化块，并且有多个块。

现在的问题是，我们的最终目标是什么？阅读_between_the_lines_，我猜你想要整个块，当该块的键值对，RID 键，匹配某个条件时。这个对吗 ？

**那么具体是什么条件呢？** 我的猜测是，当 FILE1 中存在 BLOCK 的 RID 时，您想从 FILE2 中执行 SELECT WHOLE_BLOCK 行

那么我们有两个选择。假设您的 file2 小于 9000PetaBytes，并且条目数量也少于 IEEE 52 位 fp 可以处理的数量，请将其存储在内存中。

```
echo ""| awk '
function cmd( E, A, this,v){ A[0]=0;while((E |getline v)>0)A[A[0]+=1]=v;A["RETURN_CODE"]=close(E);}
function grep( o, re, p, B, this, a,v ){
 B[0]=0;if(o~"-v"){while((getline v < p)>0){if(!match(v,re))B[B[0]+=1]=v;}return B[0];};
 if(o~"-o"){while((getline v < p)>0){a=v;while(match(a,re)){B[B[0]+=1]=substr(a,RSTART,RLENGTH);
 a=substr(a,RSTART+RLENGTH);}};return B[0];};while((getline v < p)>0){if(match(v,re))B[B[0]+=1]=v;}return B[0];
}
function dbg_printarray(ary , x , s,e, this , i ){x=(x=="")?"A":x;for(i=((s)?s:1);i<=((e)?e:ary[0]);i++){print x"["i"]=["ary[i]"]"}}
function agrep( o, re, A, B, this, a, i,k ){
 B[0]=0;k=0;if(o~"-v"){for(i=1;i<=A[0];i++){if(!match(A[i],re)) B[k+=1]=A[i];}B[0]=k;return k;};
 if(o~"-o"){for(i=1;i<=A[0];i++){a=A[i];while(match(a,re)){B[B[0]+=1]=substr(a,RSTART,RLENGTH);a=substr(a,RSTART+RLENGTH);};
 };B[0]=k;return k;};for(i=1;i<=A[0];i++){if(match(A[i],re))B[k+=1]=A[i];};B[0]=k;return k;
}
{
    SAFETY_SINCE_WE_WALK_IN_THE_DARK=2000;
    input="file1";
    lookup_file="file2";
    output="output.data";
    we_died = 0;
    # Instead of -i option to zgrep, use [Aa][Nn][Tt] way of representation. 
    PATTERN = "[Rr][Ii][Dd]=[0-9a-zA-Z]*";
    if(for_gods_sake_we_are_scanning_normal_uncompressed_content){
        grep("-o", PATTERN , input , A);
    }else{
        cmd("zgrep -o \""PATTERN"\" \""input"\" ",A);
    }
    # Now, A has matching data. A[0] holds total. A[1] to A[A[0]] holds data.

    # Lets read lookup_file, block at a time. 
    # Since you did not give any specific caracteristics of file2, we can not optimeze in any way.
    # Oh well.
    while((getline v < lookup_file)>0){
        # Throw away head until we reach a valid block header
        if(v!~"^Starting of block ") continue;
        # We are inside block.
        blockid = substr(r,match(r,"[0-9]*$"));
        # get whatever data inside block untill we reach end
        c=0;
        delete B;
        B[0]=0;
        B[B[0]+=1]=blockid;
        while(((getline v < lookup_file)>0)&&v!~"^Ending of block" && c < SAFETY_SINCE_WE_WALK_IN_THE_DARK){
            B[B[0]+=1]=v;
            if(v~"RID"){
                # store it so we can later play with it
                B["RID"]=v;
            };
            c++;# We are fucked as the structure EOB was missing.
        }
        # we ither died, or end of block.
        if(c >= SAFETY_SINCE_WE_WALK_IN_THE_DARK){
             we_died = 1;
            break;
       }
       # We assume B has whole block. B[0] has total. B[1] .. B[B[0]] has data. B["RID"] has RID for fast reference.
       # Now, since the data format of file2 is not explained at all, I am guessing
       # A[n] == "RID=DEADBEEF"
       # and
       # B["RID"] == "RID=DEADBEEF"
       # holds true, which is totally unlikely. what if it is "RID          =     \t\t\t DeadBeEf"
       # so this is really impossible to guess as the OP is not even sure what format they are using.
       #   sub("^[Rr][Ii][Dd][ \t]*=[ \t]*","",B["RID"])
       # or something should be done so we can compare the damn thing.
       matched_block = 0; matched_idx = 0;
       for(i=1;i<=A[0];i++){
         if(A[i]==B["RID"]){matched_idx = i; matched_block=1; break;}
      }
      if(matched_block){
         # This block in B[] also matches A[matched_idx];
        # Do what ever you want to do with it.
        dbg_printarray(B,"B");
        print "A["matched_idx"]=["A[matched_idx]"]";
        print "Have fun";
      }
    }
}' 
```

我不得不说，如果没有清楚地了解您想要实现的目标，就可以帮助您。下一次，不要认为你是提出逻辑的最佳人选。一般来说，有些专家专门创建逻辑，而我们大多数人会选择适合我们问题的东西。试图*解决*一个问题并不意味着你必须重新发明轮子。只需描述你拥有什么，以及你想要实现什么。很有可能，有人已经做到了，而且很可能有一个完整的框架和胶带将东西粘在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:35:40.500

这可能对您有用：

```
awk 'NR==FNR{requestArray[$0];next};$0 in requestArray{print "Found"}' TEMP1 FILE2 
```

解释：

在开始时读取`TEMP1`一次并存储在数组中。`NR`并且`FNR`是 使用的变量`awk`。每次读取记录时它们都会递增，除非`FNR`在文件更改时重置。

另一种方法是使用`BEGIN`块，请参见[此处](http://www.gnu.org/software/gawk/manual/gawk.html#BEGIN_002fEND)

# c - MPI：向文件写入和读取整数

> ID：11355412
> 
> 赞同：2
> 
> 时间：2012-07-06T03:25:30.287
> 
> 标签：c, multiprocessing, mpi, openmpi

刚开始使用 Openmpi。尝试将整数写入和读取文件..用于写入的代码：

写入文件的字符无法识别，主要是垃圾。

```
#include <stdlib.h>
#include <stdio.h>
#include "mpi.h"

#define BUFSIZE 10
#define FIRSTCHAR 1
#define FILENAME "file1.dat"

int main(int argc, char* argv[]) {
  int i, np, me;
  int buf[BUFSIZE];     /* The buffer to write */
  MPI_File myfile;       /* Shared file */

  /* Initialize MPI */
  MPI_Init(&argc, &argv);
  MPI_Comm_rank(MPI_COMM_WORLD, &me);
  MPI_Comm_size(MPI_COMM_WORLD, &np);

  /* Initialize buf with characters. Process 0 uses 'a', process 1 'b', etc. */
  for (i=0; i<BUFSIZE; i++) {
    buf[i] = FIRSTCHAR+(me);
  }

  /* Open the file */
  MPI_File_open (MPI_COMM_WORLD, FILENAME, MPI_MODE_CREATE | MPI_MODE_WRONLY,
         MPI_INFO_NULL, &myfile);
  /* Set the file view */
  MPI_File_set_view(myfile, me*BUFSIZE*sizeof(int), MPI_INT, MPI_INT, 
            "native", MPI_INFO_NULL);
  /* Write buf to the file */
  MPI_File_write(myfile, buf, BUFSIZE*sizeof(int), MPI_INT, MPI_STATUS_IGNORE);
  /* Close the file */
  MPI_File_close(&myfile);
  MPI_Finalize();
  exit(0);
} 
```

不工作..请帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T05:09:42.930

写入的文件不是垃圾，它们只是二进制文件

如果你在 linux

首先备份你的文件

```
cp file file2 
```

然后

尝试使用此命令从二进制转换为 ascii

```
hexdump -v -e '7/4 "%10d "' -e '"\n"' file2 
```

还有一个旁注：除非您将数百万行写入文件，否则您甚至可能不需要 mpi_file 写入/加载函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:32:34.883

s以`int`二进制模式写入文件，即它们不会像使用屏幕输出那样转换为字符串和打印`printf`，而是以某种方式将它们的内存表示复制到文件中。如果您编写代码从文件中读取它们（使用`MPI_File_read`），它将正常工作。

请注意，您自己阅读二进制格式可能非常棘手，因为 MPI 试图跨平台并且可能会写入一些额外的类型信息，因此您应该使用 MPI 从这些文件中读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T05:52:33.097

这是一个更简洁的命令，可以在 Linux 上以 ascii 格式查看二进制文件：按照 pyCthon 的建议备份文件：

```
cp file temp 
```

然后，运行以下命令将文件打印为 ascii 字符：

```
od -c temp 
```

如果您的数据恰好是整数：

```
od -i temp 
```

# php - 将产品复制到所有网站 - Magento 多店

> ID：11355415
> 
> 赞同：1
> 
> 时间：2012-07-06T03:25:54.873
> 
> 标签：php, mysql, magento, product

我正在尝试将我的产品从我创建的第一个网站复制到我后来在多商店设置中添加的另外 23 个网站。我有这段代码，我认为应该可以完成这项工作：

```
$arr_stores = array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24);
$store_from = 1;  // first store id

// get observer data and process each imported simple product - my products that need to be copied to     other websites
    $_event = $observer->getEvent();
    $_adapter = $_event->getAdapter();

    foreach($_adapter->getNewSku() as $sku => $value) {

        if($value['type_id'] == 'simple'){
            // load the next product - this loads product correctly
            $_product = Mage::getModel('catalog/product')->setStoreId($store_from)->load($value['entity_id']);

                   // set the websites
            $_product->setWebsiteIds($arr_stores);
            $_product->save();

                    // clear the var
            unset($_product);

        }
    } 
```

但是我收到此错误消息：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`workoutlife`.`catalog_product_website`, CONSTRAINT `FK_CATALOG_PRODUCT_WEBSITE_WEBSITE_ID_CORE_WEBSITE_WEBSITE_ID` FOREIGN KEY (`website_id`) REFERENCES `core_website` (`website_id`) ON DELET) 
```

谁能告诉我为什么这个约束可能会失败？为什么 ON DELET 在那里？我不想删除任何东西。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T00:40:56.813

这通常发生在找不到产品时，例如没有这样的 ID/SKU 或参数为 NULL，然后模型返回新产品对象。由于那是空模型，它需要您填写名称、价格等数据。但是从代码的外观来看，您不想这样做。

因此，答案是首先检查`$value['entity_id']`实际设置为某物且不为 NULL，然后检查该值`$_product->getData()`或`$_product->getId()`返回某物，如果不是，则意味着无法找到该产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:17:02.927

查看 core_website 表。我猜测数组中的一个或多个 id 无效（core_website 中没有匹配的 website_id）。这将违反错误中指定的约束。

catalog_product_website 表的完整约束是：

```
CONSTRAINT `FK_CATALOG_PRODUCT_WEBSITE_WEBSITE_ID_CORE_WEBSITE_WEBSITE_ID` FOREIGN KEY (`website_id`) REFERENCES `core_website` (`website_id`) ON DELETE CASCADE ON UPDATE CASCADE 
```

ON DELETE CASCADE 意味着如果您从 core_website 表中删除一个条目，catalog_product_website 表中的所有关联条目（具有相同的 website_id）也将被删除。这是一种确保没有剩余无用数据的方法。

您的示例中没有删除任何内容。MySQL 只是喜欢在失败时显示整个约束条目。

# android - 通过 ADB 的 Android 通知

> ID：11355417
> 
> 赞同：7
> 
> 时间：2012-07-06T03:25:59.287
> 
> 标签：android, shell, automation, adb

我正在编写一个**shell 脚本，允许您在使用****Terminal**并行连接到计算机的所有 android 手机上安装 .apk 。在我的公司，我们在许多设备上进行测试，因此这使得安装部分必须更快。

**问题：**我正在寻找一种方法来通过某种反馈/通知快速识别哪些手机安装了 .apk。理想情况下，您应该能够通过查看它（某种声音或屏幕闪烁）或简单地解锁设备（例如，新安装的应用程序已打开）来查看哪些手机收到了 .apk。

关于我如何做这些事情的任何想法？

我已经阅读了有关启动应用程序的信息，但似乎仅使用 .apk 就无法做到这一点（您还需要指定一个活动......）。

任何想法将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T15:38:09.583

找到了我自己的解决方案！

我正在使用：

```
aapt dump badging 
```

认为这只会输出包名。事实证明它输出了更多有用的信息。我注意到的其中一行是输出是应用程序的启动活动。我能够用 grep 隔离这条线，然后像这样切断启动活动：

```
aapt dump badging $1 | grep launchable | cut -d "'" -f 2 
```

然后，如果您知道其中一项活动，则有一个命令允许您启动应用程序。添加此行会启动使用上述命令检索到的活动。

```
adb -s $deviceID shell am start -a android.intent.action.MAIN -n $packageName/$launchableActivity 
```

我在安装命令之后将这一行放在我的 for 循环中。不安装应用程序后，脚本将尝试在之后启动它。非常便利！

感谢所有的帮助！:D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T03:57:06.987

使用包管理器检查 APK 是否已安装：

```
pm list packages [-f] [-d] [-e] [-s] [-3] [-i] [-u] [FILTER]

pm list packages: prints all packages, optionally only
  those whose package name contains the text in FILTER.  Options:
    -f: see their associated file.
    -d: filter to only show disbled packages.
    -e: filter to only show enabled packages.
    -s: filter to only show system packages.
    -3: filter to only show third party packages.
    -i: see the installer for the packages.
    -u: also include uninstalled packages. 
```

例如

```
$ adb shell pm list packages com.example.mypkg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T03:52:47.137

您可以使用带有参数的“adb shell am start”来启动新安装的软件包。

如果担心不会被旧的混淆，请在安装新的之前先卸载旧的，或者最好让您的启动活动显示版本控制。

您实际上可以使用 am start 来启动启动器不知道的活动，因此您可以使用它直接启动到将显示当前版本的“关于”活动。您的选择是在应用程序的普通过程中提供它，还是仅将它用作一次启动。

您还应该能够解析 adb install 命令的输出 - 您必须查看它是否将错误/成功发送到 stderr 或 stdout。

**更新：**这里是如何制作一个活动，您可以使用它来打开屏幕并显示一条消息，如下所示：

```
adb shell 'am start -n com.example.testreport/.ReportActivity -e result PASS' 
```

该代码大量抄录自早期 android 版本的内置 AlarmClock，它将需要：

```
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

在清单中

```
package com.example.testreport;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;
import android.view.Gravity;
import android.view.WindowManager;
import android.view.WindowManager.LayoutParams;
import android.widget.TextView;
public class ReportActivity extends Activity {
    PowerManager.WakeLock sScreenWakeLock;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         requestWindowFeature(android.view.Window.FEATURE_NO_TITLE);
         getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    }
    protected void onStart() {
        super.onStart();

        if (sScreenWakeLock == null) {
            PowerManager pm =
                    (PowerManager) getSystemService(Context.POWER_SERVICE);
            sScreenWakeLock = pm.newWakeLock(
                    PowerManager.FULL_WAKE_LOCK |
                    PowerManager.ACQUIRE_CAUSES_WAKEUP |
                    PowerManager.ON_AFTER_RELEASE, "ReportActivity Wakelock");
            sScreenWakeLock.acquire();
        }
        TextView tv=new TextView(this);
        tv.setTextSize(30);
        tv.setGravity(Gravity.CENTER);
        Intent i = getIntent();
        if ((i != null) && (i.hasExtra("result"))) 
            tv.setText(i.getStringExtra("result"));
        else 
            tv.setText("???");
        setContentView(tv);
    }
    protected void onStop() {
        if (sScreenWakeLock != null) {
            sScreenWakeLock.release();
            sScreenWakeLock = null;
        }
        super.onStop();
    }
} 
```

它可能需要一些清理和改进；例如，目前您无法使用电源按钮关闭手机，除非您首先通过导航使其失去可见性来停止活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T03:38:48.987

我可以看到这样做的一种方法是验证应用程序安装的应用程序。特别是应安装在设备上的应用程序清单，并且在 PackageManager 完成安装时，它会根据此广播进行更新。

除了在 App 层之外进行之外，我认为它是不可能的，除非您嗅探到设备的 USB 端口并识别命令和有效负载并弄清楚**（HACK）**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T19:30:30.720

您可以通过运行检查软件包是否已安装

```
adb shell pm list packages your-package-name-here 
```

如果已安装，它将返回`package:your-package-name-here`，因此您可以将返回值存储在变量中，然后检查该变量是否为 null 或“package:your-package-name-here”。

即使您没有任何特定活动要调用，也要在设备上打开已安装的应用程序，您可以运行

```
adb shell monkey -p your-package-name-here -c android.intent.category.LAUNCHER 1 
```

# c# - 在 XNA 中显示精灵数组

> ID：11355418
> 
> 赞同：0
> 
> 时间：2012-07-06T03:26:11.927
> 
> 标签：c#, xna, sprite

我创建了一个 Vector2 数组，它保存了精灵将显示的位置：
Vector2[,] SpritePosition = new Vector2[4,4];

然后我写了一个for循环来初始化每个成员的位置：

```
public void loadArray()
    {
        for(int i=0;i<4;i++)
        {
            for(int j=0;j<4;j++)
            {
                SpritePosition[i, j] = new Vector2(i*texture.Width , j*texture.Width);
            }
        }
    } 
```

我创建了一个包含精灵的纹理，下一个位置是根据纹理中图像所需的宽度计算的（一个图像被加载到 4 行中，每行 4 行）。

然后我在 Draw() 函数中使用了以下代码

```
spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        for(int i=0;i<4;i++)
            for(int j=0;j<4;j++)
                spriteBatch.Draw(texture, SpritePosition[i,j], Color.White);
        spriteBatch.End(); 
```

但是当我运行程序时，它只显示了 1 个图像，而不是 4 行的 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:29:25.107

不太确定，但一方面。我认为您的意思是`SpritePosition[i, j] = new Vector2(i*texture.Width , j*texture.Height);` （第二次高度，而不是宽度）

而且我认为这里不需要数组，为什么不只是

`spriteBatch.Draw(texture, new Vector2(i*texture.Width,j*texture.Height), Color.White);`

此外，这不是“为您准备的代码”网站。我看到你刚刚在我回答你的最后一个问题后发布了这个问题。看起来你似乎并没有想过要自己去弄清楚。

# authentication - 为什么 tortoisegit 从不提示我输入密码（并且因为缺少凭据而失败）？

> ID：11355419
> 
> 赞同：2
> 
> 时间：2012-07-06T03:26:23.487
> 
> 标签：authentication, credentials, tortoisegit

我现在在我的桌面上重新安装了两次 tortoisegit，由于某种原因，它在使用我的 Google 代码存储库时永远不会提示我。我已经提交了更改，我只想同步它们。我来自 tortoisesvn 和 tortoisehg，这绝对是可能的。我正在尝试将我的 repo 转换为 git，但遇到程序不提示输入任何类型密码的问题，然后由于权限而无法同步。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-02-12T09:55:13.733

更改以下设置以允许 Tortoise git 始终询问用户名和密码：

> TortoiseGit > Settings > Git > Credentials > Credential helper > 选择 None

[![在此处输入图像描述](../Images/b35b122eed376f13c80261fdec9b01a5.png)](https://i.stack.imgur.com/djOzT.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:53:37.173

谢谢你，Matteius——我不得不在我的电脑上重新安装 Windows，当我切换到最新版本的 TortoiseGit 时，它突然不会推送到我的谷歌代码仓库；它永远不会询问我的密码。

所以对于那些有这个问题的人来说，到目前为止，最简单的解决方案（让它再次开始要求输入密码）是编辑你的 Git 项目的设置，并将 URL 更改为*没有*用户名。

例如：右键单击项目，选择 TortoiseGit -> 设置。单击 Git 部分上的 Edit local .git/congif（如果这适用于您）。更改网址：

```
url = https://username@code.google.com/blah blah blah 
```

到

```
url = https://code.google.com/blah blah blah 
```

保存所有内容，您应该一切顺利。当您现在推送时，它会要求您输入用户名和密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-10T08:56:56.377

如果您设置了凭据，您可以转到 \Control Panel\User Accounts\Credential Manager 单击 windows 凭据并编辑相应的凭据以更正它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T03:32:58.793

谷歌代码不允许在 URL 中嵌入密码

```
https://username:password@code.google.com/blah 
```

如果您想存储密码，请使用 git credential helpers。

对于 TortoiseGit 1.8.1.2 或更高版本，有一个 GUI 可以打开/关闭凭证助手。

它支持`git-credential-wincred`和`git-credential-winstore`。

确保安装`msysgit 1.8.1`或`git-credential-winstore`.

![在此处输入图像描述](../Images/6e8f580c637f06e4222d39a64099668f.png)

# android - Android SDK 管理器加载问题

> ID：11355421
> 
> 赞同：1
> 
> 时间：2012-07-06T03:27:10.940
> 
> 标签：android, windows, sdk

我已经为此进行了多次搜索，但没有一个答案对我有用。该机器是全新的 Windows 7 64 位 PC。我有整个 SDK，Eclipse 系统在我的旧 32 位 PC 上运行没有问题，但我正在尝试迁移到新的。

我尝试过的事情：

*   确保 JDK 的 bin 目录是我的 PATH 中的第一件事，以免使用 C:\windows\system32\java.exe
*   在这两种情况下都尝试了 JDK 6 (6u32) 和 JDK 7 (7u5)，x64 版本
*   以管理员身份运行

我试图查看是否有任何错误，所以我从命令提示符运行它。完全没有消息，只是什么也没发生。我试过重新启动。

我做的一件事使它运行（但在我看来这不是最好的方法）是编辑 tools/android.bat 文件。我摆脱了对 java.exe 的搜索（基本上是对 find_java.bat 的调用），并直接在 android.bat 文件中设置了 java_exe 环境变量。

有什么我想念的还是这是最好的方法？这似乎有点不直观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:27:37.887

最后一组评论涵盖了解决方案。

简单地说，路径名中不要有空格！Java SDK 安装在“Program Files”目录中。该空间对 Google 用于查找 java.exe 的方法造成了严重破坏。通过将 Java SDK 重新安装到另一个目录（即 d:\apps），它解决了我遇到的问题。

因此，对于遇到这种情况的其他人来说，这是一个教训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:39:49.610

我的解决方案（解释问题本身的内容）：

首先，检查输入是否`java -version`在您的命令行上有效

然后，找到这些行并将其更改为`tools\android.bat`以下内容：

```
rem Check we have a valid Java.exe in the path.
set java_exe=java
rem call lib\find_java.bat
rem if not defined java_exe goto :EOF 
```

最后，在命令提示符下转到您的 sdk 根目录，然后运行`tools\android.bat`

即使不需要在非空格路径中重新安装 Java，这也可以让您的 android.bat 文件正常工作。

# java - 为什么 JNI 优于运行时和进程

> ID：11355424
> 
> 赞同：1
> 
> 时间：2012-07-06T03:27:38.197
> 
> 标签：java, java-native-interface

> **可能重复：**
> [JNI vs Runtime.exec()](https://stackoverflow.com/questions/782827/jni-vs-runtime-exec)

据我所知，我们可以使用 Java 原生接口 (JNI) 让 Java 运行原生代码。但我认为我们可以使用`Runtime`和`Process`接口来调用本机可执行文件。谁能告诉我为什么？

# architecture - GPU - 系统内存映射

> ID：11355426
> 
> 赞同：15
> 
> 时间：2012-07-06T03:27:49.350
> 
> 标签：architecture, io, hardware, gpu, computer-architecture

如何映射系统内存 (RAM) 以进行 GPU 访问？我很清楚虚拟内存如何为 cpu 工作，但不确定当 GPU 访问 GPU 映射的系统内存（主机）时它会如何工作。基本上与数据如何从系统内存复制到主机内存有关，反之亦然。你能提供参考文章支持的解释吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-06T23:23:08.810

我发现以下幻灯片非常有用：http: [//developer.amd.com/afds/assets/presentations/1004_final.pdf](http://developer.amd.com/afds/assets/presentations/1004_final.pdf)

FUSION APUS 上的内存系统 零拷贝的好处 Pierre Boudier AMD OpenGL/OpenCL 研究员 Graham Sellers AMD OpenGL 经理

AMD Fusion 开发者峰会 2011 年 6 月

但是请注意，这是一个快速发展的领域。与其说是开发新概念，不如说是（最终）将虚拟内存等概念应用于 GPU。让我总结一下。

在过去，比如 2010 年之前，GPU 通常是单独的 PCI 或 PCI-excpress 卡或板卡。他们在 GPU 卡上安装了一些 DRAM。这种板载 DRAM 非常快。他们还可以访问 CPU 端的 DRAM，通常是通过 PCI 上的 DMA 复制引擎。像这样 GPU 访问 CPU 内存通常很慢。

GPU 内存未分页。就此而言，GPU 内存通常是未缓存的，除了 GPU 内部的软件管理缓存，如纹理缓存。“软件管理”意味着这些缓存不是缓存一致的，必须手动刷新。

通常，GPU 只访问 CPU DRAM 的一小部分 - 一个光圈。通常，它是固定的 - 不受分页的影响。通常，甚至不受虚拟地址转换的影响 - 通常虚拟地址 = 物理地址，+ 可能是一些偏移量。

（当然，CPU 内存的其余部分是正确的虚拟内存，分页，当然翻译和缓存。只是 GPU 无法安全地访问它，因为 GPU 确实（没有）访问虚拟内存子系统和缓存相干系统。

现在，上述方法有效，但很痛苦。首先在 CPU 内部然后在 GPU 内部进行操作很慢。容易出错。还有一个很大的安全风险：用户提供的 GPU 代码通常可以（缓慢且不安全地）访问所有 CPU DRAM，因此可能被恶意软件使用。

AMD 宣布了更紧密集成 GPU 和 CPU 的目标。第一步是创建“Fusion”APU，即包含 CPU 和 GPU 的芯片。（英特尔在 Sandybridge 上也做了类似的事情；我希望 ARM 也会这样做。）

AMD 还宣布他们打算让 GPU 使用虚拟内存子系统，并使用缓存。

AMD IOMMU 是朝着让 GPU 使用虚拟内存的方向迈出的一步。英特尔也有类似的。尽管 IOMMU 比非虚拟机操作系统的虚拟内存更面向虚拟机。

CPU 和 GPU 在同一芯片内的系统通常让 CPU 和 GPU 访问相同的 DRAM 芯片。所以不再有“on-GPU-board”和“off-GPU--CPU”DRAM。

但是系统主板上的DRAM通常还是有一个分裂，一个分区，主要是CPU使用的内存，和GPU主要使用的内存。尽管内存可能存在于相同的 DRAM 芯片中，但通常一大块是“图形”。在上面的论文中，由于历史原因，它被称为“本地”内存。CPU 和图形内存可以进行不同的调整 - 通常 GPU 内存的优先级较低，视频刷新除外，并且具有更长的突发。

在我参考的论文中，有不同的内部总线：洋葱用于“系统”内存，“大蒜”用于更快地访问图形内存分区。Garlic 内存通常是未缓存的。

我参考的论文讨论了 CPU 和 GPU 如何具有不同的页表。他们的副标题“零复制的好处”是指将 CPU 数据结构器映射到 GPU 页表中，这样您就不需要复制它了。

等等等等，

系统的这一领域正在迅速发展，因此 2011 年的论文已经几乎过时了。但你应该注意趋势

(a) 软件想要统一访问 CPU 和 GPU 内存 - 虚拟内存和可缓存

但

(b) 尽管硬件试图提供 (a)，但特殊的显存特性几乎总是使专用显存（即使只是相同 DRAM 的一个分区）显着更快或更节能。

差距可能正在缩小，但每次您认为它即将消失时，都可以玩另一个硬件技巧。

——

顺便说一句，应该更新 2012 年的这个答案 - 我在 2019 年写这个。很多仍然适用，例如 tge CPU/GPU 内存区别。GPU 内存的速度仍然更高，但现在 GPU 内存通常比 CPU 多，至少在数据中心 DL 系统中是这样。在家用电脑中没有那么多。此外，GPU 现在支持虚拟内存。这绝不是一个完整的更新。

# android - 隐藏符号“__cxa_begin_cleanup”

> ID：11355432
> 
> 赞同：3
> 
> 时间：2012-07-06T03:28:34.233
> 
> 标签：android, hyperlink

在尝试为 Android 编译一个特殊的 sqlite3 混合时，我遇到了以下问题

> /Volumes/Projects/api9-arm/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld： .libs/sqlite3：隐藏符号 `__cxa_begin_cleanup' 在 /Volumes/Projects/api9-arm/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../.. /arm-linux-androideabi/lib/libstdc++.a(eh_arm.o) 被 DSO /Volumes/Projects/api9-arm/bin/../lib/gcc/arm-linux-androideabi/4.4.3/ 引用。 ./../../../arm-linux-androideabi/bin/ld：最终链接失败：输出collect2上的不可表示部分：ld返回1退出状态

这是什么意思？什么是隐藏符号？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:32:06.407

检查您安装的 NDK 版本并将其更新为最新可用

# c++ - 在 C++ 中将输出写入文件的问题

> ID：11355434
> 
> 赞同：0
> 
> 时间：2012-07-06T03:28:48.883
> 
> 标签：c++

我正在以追加模式写入 C++ 中的文件，我正在使用的程序是：

```
#include <fstream>
void main()
{
 ofstream f;
 f.open("f.txt", ios::app);
 f<<"\n Hello";
 f.close();
} 
```

现在在输出文件中打印的输出是一些垃圾......我无法理解：

```
 OUTPUT:
  牐湩㩴 
```

请帮我看看我哪里出错了？？？我正在研究Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:36:56.340

您要附加到的文件有一个 BOM 标记，表明它是 UTF-16 编码的。使用不会对文件进行编码的编辑器重新创建文件，或使用程序从头开始编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:37:08.347

这是因为您没有指定文本编码，并且在没有显式编码标记的情况下，Windows 只是猜测。最著名的例子是[布什隐藏事实](http://en.wikipedia.org/wiki/Bush_hid_the_facts)

# cpu-architecture - 如何用现有的 CPU 架构评估新的 CPU 架构

> ID：11355438
> 
> 赞同：1
> 
> 时间：2012-07-06T03:29:43.267
> 
> 标签：cpu-architecture, von-neumann

我有一个新的计算架构理念，而不是冯诺依曼。目前的机器都是基于冯诺依曼的 CPU-Memory 逻辑分离。在我的情况下，可以融合 Memory-ALU 以获得全新的 CPU。在那种情况下，我如何将我的新建筑理念与现有理念进行比较？

*   一种方法可能是运行各种算法并进行比较。但不幸的是，我们还没有那个硬件。

*   仿真可以吗？但是从头开始构建模拟器需要很大的努力

*   行业如何比较？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:11:08.270

这个想法在过去已经进行了一定程度的探索，例如这里：

*   伯克利[智能 RAM](http://iram.cs.berkeley.edu/) (IRAM) 项目
*   多伦多大学的[计算 RAM](http://www.eecg.toronto.edu/~dunc/cram/)
*   [DIVA 内存处理芯片的架构](http://www.isi.edu/~draper/papers/ics02.pdf)(PDF)

这种方法的问题之一是 CPU 和内存使用不同的处理技术。如果您将两者放在同一个模具上，您将不得不妥协两者之一。一种可能的解决方案是 3D 架构，其中不同的裸片一个接一个地安装。

[模拟器](http://en.wikipedia.org/wiki/Computer_simulation)（不是[模拟器](http://en.wikipedia.org/wiki/Emulator)！）将是比较您的架构与更传统架构的绝佳方式。模拟器越接近真实的硬件实现越好。

如果您想在模拟器上测试的不仅仅是玩具算法，您将需要一个工具链来在其上编译常规软件（例如 c++、java）。这是市长的努力，可能比单独的模拟器更复杂。

对于一个人来说，这是一个很容易花费数年时间的项目。

如果您只是想对您的想法进行一些反馈，您可以向学术会议提交论文并仔细阅读审稿人的意见。（这是我推荐的。）

# php - 如何自动请求新的访问令牌以获取开放组的提要？

> ID：11355440
> 
> 赞同：0
> 
> 时间：2012-07-06T03:30:02.097
> 
> 标签：php, facebook-graph-api, facebook-authentication, facebook-access-token

我在 Facebook 上有一个开放组，我想在我的网站上显示该组的提要。我可以做得很好，我创建的 PHP 代码获取了提要，并且它的格式就像我想将用户发送回 facebook 组一样。这很好，直到访问令牌在几个小时后显然过期。我能弄清楚获得新的有效访问令牌的唯一方法是手动返回[https://developers.facebook.com/tools/explorer?method=GET&path=](https://developers.facebook.com/tools/explorer?method=GET&path=){GROUP ID} 每几个小时获取一个新的访问令牌，然后将其复制并粘贴到我的 php 代码中。我不能这样做，原因很明显。有没有办法通过 cron 或其他方式请求新的有效访问令牌，然后我可以将其存储在我的数据库中并使用直到它过期并且我的网站获取新的访问令牌？我已经阅读了一整天，但找不到答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:17:26.627

要获取 60 天令牌，请调用`fb_exchange_token`URL：

```
https://graph.facebook.com/oauth/access_token?client_id=[ID]&client_secret=[SECRET]&grant_type=fb_exchange_token&fb_exchange_token=[PreviousToken] 
```

文档说你不能通过 cron 来做到这一点。不知道这是如何控制的，我还没有（还）尝试过，但最好的办法是在你获得初始令牌后立即执行此操作。您可以每天延长一次令牌。它持续60天，所以希望用户在60天内返回。

# javascript - 为什么无限对象不会破坏javascript中的流程？

> ID：11355445
> 
> 赞同：3
> 
> 时间：2012-07-06T03:30:42.450
> 
> 标签：javascript, object, recursion, circular-reference

我在这里遇到的这种奇怪现象可能有一个特定的名称，这可能是我在谷歌上找不到任何相关信息的原因。

我正在做我的项目，我在我的检查员身上发现了一个奇怪的物体。我的代码在许多文件中被破坏，并且同时发生了很多事情所以我没有立即注意到，但是当我打开我的对象时，我发现它是无限的。

我将尝试在这里重现我所做的：

```
var monkey = {dad: 1, son: 1, have: null};
var banana = {state: 1, eatable: 1, have: null};

monkey.have = banana;
banana.have = monkey;

console.log(monkey); 
```

如果你检查“猴子”对象，并展开“有”道具，你会发现它永远不会结束。因为香蕉总是有猴子，猴子总是有香蕉，递归。

（我认为这可能是因为 javascript 总是传递对对象的引用而不是实际值。）

我在其他语言中看到过这种情况，但它总是阻止执行并引发显式错误。

为什么javascript不会发生这种情况？而且，更令人担忧的是，这种代码有什么危险吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:37:42.743

现代浏览器的垃圾收集器很智能，可以检测到仅通过循环引用保持活动状态的对象并处理它们。很多语言都这样做；所有的.NET，Java、Ruby、Python……实现起来并不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T03:39:01.887

它被称为循环引用，它确实会在某些浏览器中引起问题（泄漏）。通常在 IE 中，当一个对象具有对 DOM 对象的循环引用（并且 DOM 元素被删除）时，会导致内存泄漏。大多数现代浏览器都解释了这种模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T03:46:39.010

以下代码片段举例说明了两个属性都引用了同一个***实例***：

[http://jsfiddle.net/tyrmF/](http://jsfiddle.net/tyrmF/)

```
var monkey = { name: "monkey boy", son: 1 };
var banana = { name: "ripe banana", eatable: 1 };

monkey.eats = banana;
banana.eatenby = monkey;

console.log(monkey);​

/* alerts "monkey boy" - original monkey instance */
alert(monkey.eats.eatenby.eats.eatenby.name); 
```

​ 请注意，当您继续“向下钻取”属性时，会保留对原始对象的引用（值相同）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T04:04:19.287

两个对象实例，存储的两个引用，仅此而已。没有任何内存泄漏的风险，因为没有任何内容被复制，它只是给人一种无限的“错觉”，但它总是指向相同的对象和为它们分配的相同内存。

# ruby-on-rails - Rails：如何实现这些模型之间的这种关系？习惯？通过？多态？

> ID：11355452
> 
> 赞同：0
> 
> 时间：2012-07-06T03:31:27.383
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations, activemodel, has-and-belongs-to-many

我将文件存储在 Amazon s3 上。每个文件都有许多**“消费者”**，这些消费者可以是任何类型（用户、外部应用程序、business_listings 等）。这需要多对多的关系。但是，我还想存储有关每个关系的某些属性。所以我认为解决这个问题的最好方法是在**“s3_files”**和**消费者之间创建一个 *has_and_belngs_to_many_through* 关系**

现在的问题是，既然有很多类型的消费者，我需要使用多态关联。

因此，基于此，我将采取以下步骤：

```
1) Create a model: "resource_relationship"
2) Have these fields in it:
  t.string: consumer_type
  t.string: s3_fileType
  t.string: file_path
  t.string: consumer_type
  t.integer: s3_file.id
  t.integer: consumer.id
  t.integer: resource_relationship.id
 3) Add to the model:
     belongs_to: s3_file
     belongs_to: consumer
 4) add_index:[s3_file.id, consumer.id]

 5) Inside: s3_file
     nas_many: resource_relationships
     has_many:consumers :through=> :resource_relationships
 6) Inside: Users
     nas_many: resource_relationships
     has_many:s3_files :through=> :resource_relationships
 7) Inside: business_listings
     nas_many: resource_relationships
     has_many:s3_files :through=> :resource_relationships 
```

我的困惑在于这种关系的多态部分。

因为我没有“消费者”模型。我不明白这如何适合这个等式。我在网上看到了一些教程并提出了上述方法和概念，但是，我不确定这是否是解决此问题的正确方法。

本质上，我在这里理解“消费者”就像所有模型“实现”的接口，然后 S3_file 模型可以将自己与任何“实现”此接口的模型相关联。问题是模型如何以及在哪里做的：用户和业务列表“实现”这个“消费者”接口。我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:52:03.700

每当您想在多对多关系中存储*有关模型之间关系的属性时，通常关系是***:has_many, :through**。

我建议从这种更简单的方法开始，然后在需要时考虑多态性。现在，从拥有一个`consumer_type`可以在需要时使用的属性开始。

消费者.rb：

```
class Consumer < ActiveRecord::Base
  has_many :resource_relationships
  has_many :s3_files, through: :resource_relationships
  validates_presence_of :consumer_type
end 
```

资源关系.rb：

```
class ResourceRelationship < ActiveRecord::Base
  belongs_to :consumer
  belongs_to :s3_file
end 
```

s3_file.rb

```
class S3File < ActiveRecord::Base
  has_many :resource_relationships
  has_many :consumers, through: :resource_relationships
  validates_presence_of :s3_fileType
  validates_presence_of :file_path
end 
```

请注意，这也简化了在`resource_relationships`表中包含属性的需求——这些属性实际上是`consumer`和`s3_file`模型的属性，因此最好将它们保留在那里。

`:has_many, :through`随着模型之间的关系发生变化，我通常会发现它更灵活、更容易修改。

# ios - ios 单点登录

> ID：11355454
> 
> 赞同：0
> 
> 时间：2012-07-06T03:31:42.437
> 
> 标签：ios, single-sign-on

如何使用 ios 进行 SSO。我知道在 Android 上您可以使用内容提供程序并从任何应用程序访问它，但是您对 IOS 做了什么，它仍然是实际的 sso 吗？

# sql - PSQL：在存储过程中将值与 LIKE 连接

> ID：11355458
> 
> 赞同：0
> 
> 时间：2012-07-06T03:31:58.210
> 
> 标签：sql, postgresql

我正在尝试使用该`LIKE`语句连接一个变量，由于某种原因，它只找到要搜索的单词位于文本变量末尾的值。

我正在使用 PostgreSQL 8.4，它存储在一个函数（存储过程）中

在这个例子中考虑：

**a.key1**是“你好”

**a_text**是“我向世界问好”

代码：

```
SELECT count(1), a.key1, a.active, a.campkeydbid
    FROM campkeydb a
WHERE a_text LIKE '%'|| a.key1 ||'%'
   GROUP BY a.key1, a.active, a.campkeydbid
INTO a_count, a_campaignkey, a_active, a_campkeydbid; 
```

在这个存储过程中，它不会返回值；它不会找到“HELLO”这个词？

如果**a_text**包含“I SAY HELLO” ，它只会返回值

有谁知道我做错了什么？似乎这是正确的，因为我在变量**a.key1**的两侧连接了一个**%**。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:41:39.123

您可以使用位置字符串函数代替like。这是使用法国地区和部门表的示例查询。我将尝试查找名称中包含区域名称的所有部门。

```
select r.name as region, d.name as deprtment, position( r.name in d.name) as pos
from regions r
join departments d on d.region = r.code
where position( r.name in d.name) != 0
and r.name != d.name; 
```

结果是

```
region  department     pos
"Corse" "Corse-du-Sud"  1
"Corse" "Haute-Corse"   7 
```

我添加了 pos 列以显示字符串是从 1 开始索引的，而不是 0。我尝试使用 'like' 进行相同的操作（两个查询具有相同的查询计划并且应该提供相同的性能）：

```
select r.name as region, d.name as deprtment, position( r.name in d.name) as pos
from regions r
join departments d on d.region = r.code
where d.name like '%' || r.name || '%'
and r.name != d.name; 
```

我喜欢第一个查询的外观，但它们都做同样的事情。所以你的逻辑似乎是正确的，所以这似乎是一个字符串中的错字。**

# c# - C# 根据时间对值进行排序

> ID：11355462
> 
> 赞同：1
> 
> 时间：2012-07-06T03:32:56.757
> 
> 标签：c#, time, delay, minute

我想创建一个这样的程序。
每一分钟的时间都应该以 `h:m`.
每 5 分钟它应该打印“break”
这应该持续 24 小时 .. 像这样

0:0
0:1
0:2
0:3
0:4
break
0:6
0:7
0:8
0:9
break
0 :11
。
.
.
23:59

我带来了一个解决它的程序..但我从未使用过`DateTime`或任何时间功能，我只是习惯于`Thread.Sleep`每次打印 1 分钟......我想使用其他方法而不是`Thread.Sleep`解决它......所以请指导我..（对不起我的英语不好）

我就是这样做的`Thread.Sleep`。
请为我提供任何其他解决方案

```
using System;
using System.Threading;

class try22
{
    public static void Main()
    {
        for(int i=0;i<24;i++)
        {
            for(int j=0;j<60;j++)
            { 
                if(j%5 != 0 || (j == 0 && i == 0))
                {
                    Thread.Sleep(20);        
                    Console.WriteLine(i+":"+j);
                }
                else if(j%5 == 0 )
                {
                    Thread.Sleep(20);
                    Console.WriteLine("break");
                }
            }
        }
     }
} 
```

谢谢大家，我想出了在我的问题中使用实际日期而不是数组数字的解决方案，我

的计时器出现了奇怪的错误.. :( 所以我使用了 thread.sleep itslef

```
using System;
using System.Threading;

class try22
{
    public static void Main()
    { 
        DateTime dt1 = new DateTime();
        dt1 = DateTime.ParseExact("0:0", "H:m",null);
        int cford=dt1.Day+1;
        for (; dt1.Day!=cford; )
        {
           dt1 = addm(dt1);
           Console.WriteLine(dts(dt1));
           Thread.Sleep(60000);
        }
    }
    public static string dts(DateTime dt)
    {

        string tmp = dt.ToString("H:m");
        if (dt.Minute % 5 == 0)
            return "BREAK";
        else
            return tmp;
    }
    public static DateTime addm(DateTime dt)
    {
        return dt.AddMinutes(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:58:01.830

你问的是哪一个？

1.  每分钟显示一次当前时间
2.  在每分钟开始时显示当前时间，就像闹钟一样

假设 1，这里有一些正确方向的提示（无论哪种方式都应该有帮助）：

1.  您可以使用获取当前日期和时间作为`DateTime`对象[`DateTime.Now`](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)
2.  `DateTime`对象可以使用 . 返回自定义字符串输出`.ToString("format")`。
3.  格式使用[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)指定。例如，要获取 24 小时制的当前小时（不带前导零），您可以使用`DateTime.Now.ToString("H")`.
4.  根据[参考](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，您可以在格式中包含字符串文字（未处理的字符串）。例如`DateTime.Now.ToString("'Hour is: 'H")`会返回`Hour is: 6`
5.  您可以将`DateTime`对象的“分钟”值作为`int`using获取`.Minute`。例如，`int minute = DateTime.Now.Minute;`
6.  如果您希望某些代码定期运行，一种方法是将其移动到自己的方法中，然后[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)像这样设置：

    ```
    void SomeMethod(object state) { /* DO STUFF HERE */ }

    // Initialise the timer in your main() method 
    // As per MSDN for System.Threading.Timer, first number (0) is start delay.
    // Second number (60000) is interval in milliseconds (60 seconds)
    // This will cause SomeMethod to be called once every 60 seconds starting now.
    Timer timer = new Timer(new TimerCallback(SomeMethod), null, 0, 60000); 
    ```

7.  制作完成后，您需要立即停止应用程序退出`Timer`（否则它将永远无法运行）。在命令行应用程序中执行此操作的一种简单方法是将 a`Console.Read()`放在方法的末尾，该`Main()`方法将等待用户输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:31:42.507

我使用了 Timer 而不是 Thread

```
 class Program
    {
        private static System.Timers.Timer aTimer;
        static int j = 0;
        static int i = 0;
        public static void Main()
        {         
            // Create a timer with a Minute interval.
            aTimer = new System.Timers.Timer(60000);

            // Hook up the Elapsed event for the timer.
            aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

            // Set the Interval to 1 Minute (60000 milliseconds).
            aTimer.Interval = 60000;
            aTimer.Enabled = true;

            Console.WriteLine("Press the Enter key to exit the program.");
            Console.WriteLine(0 + ":" + 0);
            Console.ReadLine();
        }

        // Specify what you want to happen when the Elapsed event is 
        // raised.
        private static void OnTimedEvent(object source, ElapsedEventArgs e)
        {            
            j++;
            if (j == 60)
            {
                Console.WriteLine("break");
                j = 1;
                i = i + 1;
            }
            if (i == 24)
            {
                i = 0;
            }

            if (j % 5 != 0 || (j == 0))
            {                              
                Console.WriteLine(i + ":" + j);
            }
            else if (j % 5 == 0)
            {
                Console.WriteLine("break");
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:49:29.683

我不确定您是否想使用实际的系统时间开始或只是程序执行开始以来的时间。自程序启动以来，我发布的解决方案使用时间。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Timers;
namespace ConsoleApplication1
{
   class Program
 {
    TimeSpan tt;
    static void Main(string[] args)
    {
        Program p = new Program();
        System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(p.run));
        t.Start();
        while (true) ;
    }

    void run()
    {
        tt=new TimeSpan(0,1,0);
        //Timer interval decides when even will be fired.
        Timer t = new Timer(60000);
        t.AutoReset = true;
        t.Elapsed += new ElapsedEventHandler(t_Elapsed);
        t.Start();

    }

    public void t_Elapsed(object sender, EventArgs e)
    {

        if (tt.Minutes % 5 == 0)
            Console.WriteLine("Break");
        Console.WriteLine(tt.Hours.ToString()+":"+tt.Minutes.ToString());
        tt = tt.Add(new TimeSpan(0, 1, 0));
    }
}
} 
```

# android - 从 web 服务生成的 URL 将图像保存在 sqlite 中

> ID：11355464
> 
> 赞同：2
> 
> 时间：2012-07-06T03:33:19.040
> 
> 标签：android, image, web-services, android-intent, imageview

在我的项目中调用`webservice`生成的图像 URL，每次都不同，它是定时的，不会像任何其他 URL 一样工作。当我单击该 URL 时，图像会下载到我的驱动器中。但我想将它保存在我的数据库中。

我看过[这个链接](http://www.getablogger.blogspot.in/2008/01/android-download-image-from-server-and.html)并尝试过。但是对于我自动生成的 URL 类型，该代码将不起作用。任何人都知道如何了解如何在我的 sqlite中保存**web 服务自动生成的 URL ？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:45:40.583

当我分析问题时，我认为您将有两种方法

1）将下载的图像存储在sqlite中并显示它。 [https://stackoverflow.com/questions/11304703/download-an-image-and-store-in-sqlite-in-android-local-db/11305051#11305051](https://stackoverflow.com/questions/11304703/download-an-image-and-store-in-sqlite-in-android-local-db/11305051#11305051)

2）或者只是按照他们在这个博客中所做的事情 [http://www.getablogger.blogspot.in/2008/01/android-download-image-from-server-and.html](http://www.getablogger.blogspot.in/2008/01/android-download-image-from-server-and.html)

可能是你可能会得到更好的方法。一切顺利

# java - 字符串数组值与edittext不匹配

> ID：11355471
> 
> 赞同：0
> 
> 时间：2012-07-06T03:34:16.480
> 
> 标签：java, android, android-edittext

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)
> [两个字符串的比较在 android 中不起作用](https://stackoverflow.com/questions/6819604/comparison-of-two-strings-doesnt-work-in-android)

我有一个字符串数组，其中包含我试图与输入到编辑文本字段中的文本进行比较的值。然而，尽管 edittext 和数组中的值相同，但我的 if (answer == guess) 永远不会解析为 true。

我已经通过 Toast 消息进行了调试，它显示答案和猜测是相同的。有人可以帮忙吗？下面的代码：

```
 final EditText et;

    et = (EditText) findViewById(R.id.editText1);
    String guess = et.getText().toString();
    String answer = LinesFromFile[LineNumber]; 

    if (answer == guess)
    {
        Toast msg = Toast.makeText(getBaseContext(), answer + " " + guess + " right", Toast.LENGTH_LONG);
        msg.show();
    }

    else
    {
        Toast msg = Toast.makeText(getBaseContext(), answer + " " + guess + " wrong", Toast.LENGTH_LONG);
        msg.show();         
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:37:50.247

您不能使用`==`...进行字符串比较，您需要使用`String.equals()`

```
if (answer.equals(guess))
{
  ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T03:38:08.110

我建议你不要使用`==`，最好使用`equals()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T03:38:59.263

Strings的`==`运算符检查引用是否相等，这就是它不适合您的原因。

利用`contentEquals()`

> 这些`String.contentEquals()`方法只比较内容（字符序列），而不检查另一个对象是否也是`String`.

或者，如果您确定这两个是字符串，则使用 equals()

**String.equals() 不仅比较字符串的内容，还检查其他对象是否也是字符串的实例。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T03:54:18.680

您不能使用 '==' 来比较字符串

您还可以使用比较：

```
 if(username.compareTo(name) == 0) // if string matches

            {
            // add the code

            } 
```

从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)：

```
public int compareTo(String anotherString) 
```

按字典顺序比较两个字符串。比较基于字符串中每个字符的 Unicode 值。此 String 对象表示的字符序列按字典顺序与参数字符串表示的字符序列进行比较。如果此 String 对象按字典顺序位于参数字符串之前，则结果为负整数。如果此 String 对象按字典顺序跟随参数字符串，则结果为正整数。如果字符串相等，则结果为零；当 equals(Object) 方法返回 true 时，compareTo 返回 0。

这是字典顺序的定义。如果两个字符串不同，则它们在某个索引处具有不同的字符，该索引是两个字符串的有效索引，或者它们的长度不同，或两者兼而有之。如果它们在一个或多个索引位置具有不同的字符，则设 k 为此类索引中的最小；然后，在位置 k 处的字符具有较小值的字符串（通过使用 < 运算符确定）按字典顺序位于另一个字符串之前。在这种情况下，compareTo 返回两个字符串中位置 k 处的两个字符值的差值——即值：

```
 this.charAt(k)-anotherString.charAt(k) 
```

如果它们没有不同的索引位置，则较短的字符串按字典顺序位于较长的字符串之前。在这种情况下， compareTo 返回字符串长度的差值——即值：

```
 this.length()-anotherString.length() 
```

指定者：

```
compareTo in interface Comparable<String> 
```

参数：

anotherString - 要比较的字符串。

回报：

如果参数字符串等于该字符串，则值为 0；如果此字符串按字典顺序小于字符串参数，则值小于 0；如果此字符串按字典顺序大于字符串参数，则值大于 0。

# c# - Url.RouteUrl 添加了错误的字符

> ID：11355473
> 
> 赞同：3
> 
> 时间：2012-07-06T03:34:53.913
> 
> 标签：c#, asp.net-mvc-3

这是我的 mvc3 应用程序的路由配置

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

 routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    // Parameter defaults:
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
 ); 
```

如您所见，这是 mvc3 应用程序的默认路由，您可以注意到我根本没有更改它。因此，当我尝试`RouteUrl`像这样使用 url 助手时

```
@Url.RouteUrl("Default", 
              new { Action = "RegistrarPago", 
                    IDPago = ViewBag.IDPago,
                    confirmNumber = ViewBag.ConfirmationNumber }, 
              Request.Url.Scheme) 
```

输出是这个

`http://localhost/DescuentoDemo/pago/RegistrarPago?IDPago=60&amp;confirmNumber=1798330254`

这个 url 对于这个字符基本上`amp;`是错误的 我假设这是一个编码问题，但为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T05:12:49.643

`@`Razor 函数默认进行 HTML 编码。`Url.RouteUrl`帮手没什么问题。这是您使用它的上下文。

就好像您在 Razor 视图中编写了以下内容：

```
@("http://localhost/DescuentoDemo/pago/RegistrarPago?IDPago=60&confirmNumber=1798330254") 
```

您在 HTML 页面上输出它的结果，因此正确的做法是对其进行 HTML 编码。如果您不想进行 HTML 编码，请使用以下`Html.Raw`功能：

```
@Html.Raw(Url.RouteUrl("Default", 
                       new { Action = "RegistrarPago", 
                             IDPago = ViewBag.IDPago, 
                             confirmNumber = ViewBag.ConfirmationNumber },
                       Request.Url.Scheme)) 
```

如果你想生成一个指向这个 url 的锚点，`Html.RouteLink`在这种情况下你可以直接使用 helper。

# javascript - jQuery对象转换为字符串

> ID：11355476
> 
> 赞同：0
> 
> 时间：2012-07-06T03:36:02.967
> 
> 标签：javascript, jquery

可以帮助我解决 jquery 对象问题。

问题如下，我有这个代码：

```
url = '<a href="http://url.com">Name</a>';
otherValue = "Other Value";

x = jQuery(url).text(otherValue);
console.log(x);         
console.log(typeof(x)); 
```

这个回报：

```
[<a href=​"http:​/​/url.com">​Other Value​&lt;/a>​]
object 
```

我如何制作这个对象并最终得到一个字符串？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:41:55.007

尝试`console.log(x[0].outerHTML);`

解释：`x[0]`给你`HTMLAnchorElement`对象，`HTMLAnchorElement.outerHTML`给你 html 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:52:28.197

看看这个链接。

```
url = '<a href="http://url.com">Name</a>';
otherValue = "Other Value";

x = jQuery(url).text(otherValue);
alert(x[0].outerHTML); 
```

[http://jsfiddle.net/SRjfq/](http://jsfiddle.net/SRjfq/)

# sql - 仅在值不变时折叠日期记录 - Oracle SQL

> ID：11355479
> 
> 赞同：0
> 
> 时间：2012-07-06T03:36:30.913
> 
> 标签：sql, oracle

我需要您的帮助来解决 Oracle SQL 中的以下问题。

表1（输入）

```
 Emp_ID Start_Date  End_Date    Rating  Department  Salary
2000    01012011    01012012    A   HR          10000
2000    01012012    01012013    A+  HR          20000
2000    01012013    12319999    A   HR          20000
3000    01012011    01012012    B   Operations  50000
3000    01012012    12319999    B   Operations  60000 
```

表2（输出）

```
 Emp_ID Start_Date  End_Date    Rating  Department
2000    01012011    12312011    A   HR
2000    01012012    12312012    A+  HR
2000    01012013    12319999    A   HR
3000    01012011    12319999    B   Operations 
```

仅当员工的评级在下一个连续日期范围内相同时才折叠日期记录，并且应该继续直到评级发生变化。

我希望我把我的问题说清楚了..

我查看了其他答案，并认为我需要领导和滞后功能..但是如果有人可以提供有关如何开始的信息，那就太好了..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:36:38.660

这似乎有点令人费解，所以我会对改进感兴趣。

```
select distinct emp_id,
    nvl(x_start_date,
        lag(x_start_date)
            over (partition by emp_id
                order by rn)) as start_date,
    nvl(x_end_date,
        lead(x_end_date)
            over (partition by emp_id
                order by rn nulls first))
                    as end_date,
        rating,
        department
from (
    select emp_id, start_date, end_date, rating, department,
        case start_date
            when lag(end_date)
                over (partition by emp_id, rating, department
                    order by start_date) then null
            else start_date end as x_start_date,
        case end_date
            when lead(start_date)
                over (partition by emp_id, rating, department
                    order by start_date) then null
            else end_date end as x_end_date,
        rownum as rn
    from table1
)
where x_start_date is not null or x_end_date is not null
order by emp_id, start_date
/ 
```

有了这个测试数据：

```
 EMP_ID START_DA END_DATE RA DEPARTMENT               SALARY
---------- -------- -------- -- -------------------- ----------
      2000 01012010 01012011 A  HR                         9000
      2000 01012011 01012012 A  HR                        10000
      2000 01012012 01012013 A+ HR                        20000
      2000 01012013 01012014 A  HR                        20000
      2000 01012014 12319999 A  HR                        21000
      3000 01012011 01012012 B  Operations                50000
      3000 01012012 12319999 B  Operations                60000
      4000 07012011 07012012 B  Operations                50000
      4000 07012012 07012013 B  Operations                50000
      4000 07012013 12319999 B  Operations                60000 
```

我明白了：

```
 EMP_ID START_DA END_DATE RA DEPARTMENT
---------- -------- -------- -- --------------------
      2000 01012010 01012012 A  HR
      2000 01012012 01012013 A+ HR
      2000 01012013 12319999 A  HR
      3000 01012011 12319999 B  Operations
      4000 07012011 12319999 B  Operations 
```

我还尝试了具有三个连续日期范围的`emp_id`( `4000`) ，并且它处理了 OK - 外部`where`子句使中间条目基本上消失了。**编辑添加**：现在也适用于您的附加日期范围`2000/A`，因为我修复了外部`lead`/`lag`分区中的排序。

内部查询将除第一个开始日期和最后一个结束日期之外的所有内容都清除为连续块，外部查询使用第二轮`lead`and`lag`将它们合并到相同的行中，`distinct`然后折叠。

我假设`start_date`and`end_date`是`DATE`字段，而不是`VARCHAR2`，并且您已`NLS_DATE_FORMAT`设置为`MMDDYYYY`. 如果它们存储为字符串，这是一个坏主意，您需要`to_date()`在很多地方使排序正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:18:51.733

```
select *
from inputtable it1
left join inputtable it2 
       on it1.emp_id = it2.emp_id
      and it1.rating = it2.rating
      and it1.start_date < it2.start_date
      and not exists(select * from inputtable it2a
                     where it1.emp_id = it2a.emp_id
                       and ((it1.rating <> it2a.rating
                         and it1.start_date < it2a.start_date
                         and it2.start_date > it2a.start_date)
                         or (it1.rating = it2a.rating
                         and exists(select * from inputtable it2b
                                    where it2a.emp_id = it2b.emp_id
                                      and it2a.rating = it2b.rating
                                      and it2a.end_date + 1 = it2b.start_date))))
where not exists(select * from inputtable it1a
                 where it1.emp_id = it1a.emp_id
                   and it1.rating = it1a.rating
                   and it1.start_date = it1a.end_date + 1) 
```

# android - 如何在 Android 上执行“su”？

> ID：11355480
> 
> 赞同：3
> 
> 时间：2012-07-06T03:36:34.600
> 
> 标签：android, root, su

```
process = Runtime.getRuntime().exec("su");
os = new DataOutputStream(process.getOutputStream());
os.writeBytes(command + "\n");
os.writeBytes("exit\n");
os.flush();
process.waitFor(); 
```

系统说：`"07-06 11:01:34.337: I/System.out(3864): su: uid 10170 not allowed to su"`

我在终端中执行“adb root”

```
:~/android/android-sdk/platform-tools$ ./adb root

adbd is already running as root 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:47:19.150

看起来您的 adb 以 root 身份运行，但您只有库存的“su”工具。您可以使用 adb 将其替换为您选择的自定义之一。

要么，要么你有一个定制的，它被配置为不允许你在这个应用程序用户ID下运行——在这种情况下，你需要打开它的配置工具并改变它。

**请注意**- 这是对一个*老问题的**旧*答案-由于采用 SELinux，传统的最终用户 Android 版本无法使用传统的 Android 版本，因此已经有几个 Android 版本。解决方法远远超出了这个问题的范围。*`su`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:40:27.940

如果您被系统拒绝root，除了root设备之外您无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:42:44.767

也许您应该尝试[如何获得 root 访问权限并执行](http://muzikant-android.blogspot.in/2011/02/how-to-get-root-access-and-execute.html)。*

# c# - Environment.SpecialFolder.CommonDocuments

> ID：11355484
> 
> 赞同：4
> 
> 时间：2012-07-06T03:37:04.557
> 
> 标签：c#, path, environment

当我执行此语句时：

```
string folderPath = 
   Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments); 
```

文件夹路径设置为`C:\ProgramData`.

当我在即时窗口中执行此语句时：

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments); 
```

`C:\Users\Public\Documents`显示（这是我所期望的）。

有什么不同的想法吗？

2012 年 7 月 6 日更新：

我在同一个 exe 的不同类中得到不同的结果。

我有一堂课在图书馆里，一堂课直接链接到应用程序中。

库类返回“C:\ProgramData”。链接代码返回“C:\Users\Public\Documents”。

此外，库代码为“Environment.SpecialFolder.CommonDocuments”和“Environment.SpecialFolder.ApplicationData”返回“C:\ProgramData”。

链接代码为“Environment.SpecialFolder.CommonDocuments”返回“C:\Users\Public\Documents”，为“Environment.SpecialFolder.ApplicationData”返回“C:\Users\Me\AppData\Roaming”。

我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:02:28.387

如果您的程序是 64 位，则可能会发生这种情况。由于 Visual Studio 是 32 位的，因此当您`Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments);`在即时窗口中执行时，它会查找 Windows 32 配置单元，而您的程序将查找 64 配置单元。并且可能是 CommonDocuments 文件夹已被移动，该文件夹只能在 64 配置单元中注册。

[这是此处](http://connect.microsoft.com/VisualStudio/feedback/details/686394/possible-bug-in-environment-getfolderpath-shgetknownfolderpath-with-redirected-public-documents-folder)定义的 Windows 错误

**编辑**您的更新说它发生在同一个 EXE 中的两个类中。由于进程只能是 32 位或 64 位（不能同时是两者），这表明上述错误不适用于您（假设程序集之间的通信正常，而不是带有包装器的 COM）。你能把它变成一个你可以发布的合适的测试吗？

作为快速确认，可能还值得在每个代码中包含以下代码，以双重确保它们都在同一进程中运行：

```
 Console.WriteLine("{0} Process {1} is {2}bit", GetType().ToString(), System.Diagnostics.Process.GetCurrentProcess().Id, IntPtr.Size * 8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:45:49.200

C:\Users\Public\Documents 是正确的路径：

```
Per Machine “Documents”
“Document” type files that users create/open/close/save in the application that are used across users.  These are usually template or public documents.

Example:    MyTemplate.dot
Windows 7:  C:\Users\Public
Vista:  %SystemDrive%\Users\Public
XP: %ALLUSERSPROFILE%\Documents
Environment Variable:   Vista/Win7: %PUBLIC%  Note: Does not exist on XP
Known Folder ID:    FOLDERID_PublicDocuments
System.Environment.SpecialFolder:   System.Environment.SpecialFolder.CommonDocuments
CSIDL:  CSIDL_COMMON_DOCUMENTS
It’s obvious after looking at all these locations that where you store your files can be challenging if you are targeting multiple OS versions.  The best guidance is to use API’s to find the special folder path.  API’s will return the appropriate location for the target OS. 
```

来源：http: [//blogs.msdn.com/b/patricka/archive/2010/03/18/where-should-i-store-my-data-and-configuration-files-if-i-target-multiple-操作系统版本.aspx](http://blogs.msdn.com/b/patricka/archive/2010/03/18/where-should-i-store-my-data-and-configuration-files-if-i-target-multiple-os-versions.aspx)

# java - 使用全局库中定义的库

> ID：11355491
> 
> 赞同：0
> 
> 时间：2012-07-06T03:37:46.903
> 
> 标签：java, netbeans, jar

我创建了一个新的类库，并在全局库中定义了它，名称为 Encryption。我还在这个新创建的类库中添加了 jar 文件。我的问题是我现在如何在我的其他项目中使用这个 jar 文件？我是否需要在我引用它的类中导入加密？这是我尝试在依赖文件夹中添加 jar 文件的打印屏幕和项目属性文件夹的打印屏幕：- ![打印屏幕](../Images/1a9c8220b212c25877fdc8ef8400a040.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:43:42.337

即使你为你的库类创建了一个 .jar 文件，你也必须导入它。对于下面的库的netbeans导入是一个屏幕截图 -

![在此处输入图像描述](../Images/6530f52019e116f2a31d614555cfbcb5.png)

* * *

## 编辑

为什么不尝试添加依赖项？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:45:38.297

使用 netbeans 选项将其定义为全局库后，您需要执行以下操作

*   右键单击项目-> 库
*   转到项目属性
*   编译器选项卡
*   添加库按钮 --> 在全局库列表中，您应该能够看到该库。
*   从您的加密 jar 文件创建一个库
*   将此库添加到您要使用的项目中

然后将该全局库添加到您的本地项目中，您可以在其中导入 Encryption 类并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:09:35.400

在创建依赖项后，我没有通过“添加本地资源”添加 jar，而是尝试使用“手动安装工件”选项。这允许 jar 文件在我的依赖项中可用，并且我可以通过使用引用该 jar 文件中类文件路径的简单导入语句来使用类文件。

# iphone - UITableViewController 不会做 UIDeviceOrientationPortraitUpsideDown 方向

> ID：11355497
> 
> 赞同：0
> 
> 时间：2012-07-06T03:38:25.690
> 
> 标签：iphone, objective-c, ios, ipad, uiinterfaceorientation

我有一个问题，`UITableViewController`它不会做`UIDeviceOrientationPortraitUpsideDown`定向。我已经设置了`shouldAutorotateToInterfaceOrientation`允许两个纵向方向的功能。

这是我实现 UITableViewController 的代码

```
UITableViewController *controller = [[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped];
controller.tableView.delegate = self;
controller.tableView.dataSource = self;
controller.tableView.scrollEnabled = NO; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:41:50.493

最可能的解释是您的应用程序本身不支持倒置（Apple 人机界面指南建议 iPhone 应用程序不应倒置旋转。）您可以在 Xcode 中的项目设置中修改它。

![Xcode 中的四个旋转选项。](../Images/06997e1eeaa769ee03ca681e205b3c14.png)

如果不是这样，您可以发布您的代码`shouldAutorotateToInterfaceOrientation`吗？

# css - 悬停/链接状态仅在链接的某些区域触发

> ID：11355498
> 
> 赞同：1
> 
> 时间：2012-07-06T03:38:26.943
> 
> 标签：css, hyperlink, hover

我遇到的问题是，当您将鼠标悬停在按钮上时，只有它的某些部分会触发悬停/可点击状态，而不是所有实际块。任何想法为什么？

这是使用它的网站：[http ://www.revival.tv/turningpoint/#about-wrap](http://www.revival.tv/turningpoint/#about-wrap)

这是CSS

```
#facebook, #twitter {
float: left;
display: block;
height: 25px;
width: 65px;
color:#fff;
line-height: 25px;
text-align: center;
margin-right: 7px;
border-radius:7px;
cursor: pointer;
opacity:1;
background-color: #DA178D;
background-image: -webkit-gradient(linear, left top, left bottom, from(#DA178D), to(#c3147d));
background-image: -webkit-linear-gradient(top, #DA178D, #c3147d);
background-image: -moz-linear-gradient(top, #DA178D, #c3147d);
background-image: -ms-linear-gradient(top, #DA178D, #c3147d);
background-image: -o-linear-gradient(top, #DA178D, #c3147d);
background-image: linear-gradient(to bottom, #DA178D, #c3147d);
}
#facebook:hover, #twitter:hover {
opacity:.7;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:50:36.413

问题是 div`#fbcount.count`的 z-index 比您的多`a#facebook`，而您的 div`#twcount.count`的 z-index 比`a#twitter`. 将它们调整到它们各自的链接下方（将它们的 z-index 减小到比链接更小的值）。截至目前，悬停事件由 div 注册，而不是鼠标悬停在链接上时的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:59:04.193

罪魁祸首是左侧定位为 -100%的`:before`选择器。无论如何，选择器在 IE 中都不起作用（如果你在乎的话）。`.count``:before`

另一种解决方案是为三角形制作一个单独的 DIV，让它们也向左浮动，以便它们完美对齐。

编辑：啊哈......`:before`伪元素继承了父级的属性，在这种情况下`.count`。所以那个小三角形实际上有 35px 的宽度。

**解决方案**：有点老套......但我把`:before`on`.count`变成了`:after`on `#facebook`and `#twitter`。一点定位，它似乎工作。要垂直对齐文本，您可以将 设置`line-height`为与 相同`height`。

JSFiddle：http: [//jsfiddle.net/XmYwe/1/](http://jsfiddle.net/XmYwe/1/)

希望这可以帮助！

# javascript - 如何提醒我的 json 结果？

> ID：11355503
> 
> 赞同：0
> 
> 时间：2012-07-06T03:39:18.137
> 
> 标签：javascript, jquery, json

我通过 php 获得这些结果以在我的 ajax 警报中发出警报

```
[{"message_id":"3","box":"0","from_id":"3","to_id":"1","title":"Hello sir!","message":"how are you?","sender_ip":"","date_sent":"","status":"0"}] 
```

我该怎么办`$('#divid').html(message);`？

我只想从 json 数组中指定值。

这是代码

```
function showMessage(id){
            var dataString = 'id=' + id;
                    $.ajax( 
                    {  
                        type: "POST",  
                        url: "/inbox/instshow",  
                        data: dataString,  
                        success: function(results) 
                        {

                            if(results == "error")
                            {
                                alert('An error occurred, please try again later. Email us with the issue if it persists.');
                            }

                            if(results != "notallowed" && results != "error" && results != "login")
                            {

                                alert(results);
                                alert(results[0].message);

                            }
                        }
                    });

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T03:42:33.820

```
data = [{"message_id":"3","box":"0","from_id":"3","to_id":"1","title":"Hello sir!","message":"how are you?","sender_ip":"","date_sent":"","status":"0"}] 

$('#divid').html(data[0].message); 
```

[演示](http://jsfiddle.net/j3fgw/)

您可能必须使用[`jQuery.parseJSON`](http://api.jquery.com/jQuery.parseJSON/).

```
// results is your JSON string from the request
data = jQuery.parseJSON(results);
$('#divid').html(data[0].message); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T04:06:55.980

如果`ajax`你应该包括：

```
dataType: 'json' 
```

***代码***

```
$.ajax( 
       {  
          type: "POST",  
          url: "/inbox/instshow",  
          data: dataString,

          dataType: 'json', // here

          success: function(results) {

           }

......... 
```

包含此***jQuery***`JSON`将自动为您解析返回的数据***（不需要任何手动解析工作）***，您将获得您现在正在尝试的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T03:46:59.663

使用`JSON.stringify()`功能

```
var data=[{"message_id":"3","box":"0","from_id":"3","to_id":"1","title":"Hello sir!","message":"how are you?","sender_ip":"","date_sent":"","status":"0"}] ;
alert(JSON.stringify(data)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T03:50:39.830

这是按级别细分的数据：

```
[
    {
        "message_id":"3",
        "box":"0",
        "from_id":"3",
        "to_id":"1",
        "title":"Hello sir!",
        "message":"how are you?",
        "sender_ip":"",
        "date_sent":"",
        "status":"0"
    }
] 
```

您将使用 data[0].message 因为第一级表示一个数组，因此需要 [0] 来引用第一个也是唯一的元素，第二个是一个对象，可以通过 object.member 语法访问其属性.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T03:51:52.020

用于调试目的

> console.log（数据，data.message，“随便”）

您需要打开 firebug 或 safari 的检查器并查看“控制台”

# c# - JSON 人类可读的正确格式

> ID：11355505
> 
> 赞同：0
> 
> 时间：2012-07-06T03:39:40.733
> 
> 标签：c#, .net, json, google-maps-api-3, yahoo-api

嗨，我有一个关于来自 Web 服务的 json 响应的快速问题，我构建了一个安静的 WCF 服务来返回 JSON 响应，但是响应非常混乱，因为它`Ilist<object>`有 60 个计数。我如何像 google 或 yahoo API 一样格式化这个数组以使它们易于阅读，例如

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:47:02.920

我认为不需要格式化。使用压缩的json非常好。但是你仍然可以检查这个[问题](https://stackoverflow.com/questions/4580397/json-formatter-in-c)。否则，请在您的文档中写下您可以使用一些在线格式化程序来格式化 json。我使用 json restfull api，我更喜欢使用压缩 json。

1.  [Json 格式化程序](http://jsonformatter.curiousconcept.com/)
2.  [Json 树查看器](http://www.jquery4u.com/demos/online-json-tree-viewer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:23:53.560

我不太清楚你为什么要格式化你的 Json 响应，它应该是你的服务客户端，如果需要，它应该进行格式化。您正在查看Json [Pretty Printer/Beautifier Library For .Net](http://www.markdavidrogers.com/oxitesample/Blog/json-pretty-printerbeautifier-library-for-net)，它将 Json 字符串作为输入并返回格式化的 Json 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:43:16.613

可以使用`JSON.stringify`，第三个参数是要缩进的空格数。

```
JSON.stringify({name: "jason"}, null, 4) 
```

结果：

```
{
    "name": "jason"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T12:51:04.793

我发布此答案是因为可能对未来的用户有用。我进入了这个问题，最后这段代码解决了我的问题。

在 C# 中，如果您使用[Newtonsoft 库](https://www.newtonsoft.com/json)，您可以简单地使用一行以缩进格式序列化 JSON。

```
JsonConvert.SerializeObject(objectToSerialize,Formatting.Indented); 
```

# c++ - 普通英语书籍示例中的 C++ 未编译

> ID：11355513
> 
> 赞同：0
> 
> 时间：2012-07-06T03:41:22.787
> 
> 标签：c++, ide

我是一个寻求学习 C++ 的新手。我有一本书，其中提供了许多可以使用的示例和概念。本书的第一个示例没有使用 Quincy 2005 进行编译。这是代码错误还是 IDE 错误？

示例在这里：

```
#include <stdio.h>

void main (){

int date = 10, d2=15;
float temp = 45.0, t2=33.5;

printf("On Dec. %d, temperature was %f.\n", date, temp);
printf("On Jan. %d, temperature was %f.\n", d2, t2);

} 
```

不幸的是，IDE 声明 ::main 必须返回一个整数。有任何想法吗？

这个例子看起来更像 C，这只是过时了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T03:43:50.310

你用的那本书真的很差。这是一个 C 示例（不是其中的单个 C++ 功能），不会在强制执行正确编码实践的现代 C++ 编译器上编译。

正确的代码如下所示：

```
#include <stdio.h>

int main (int argc, char **argv)
{
    int date = 10, d2=15;
    float temp = 45.0, t2=33.5;

    printf("On Dec. %d, temperature was %f.\n", date, temp);
    printf("On Jan. %d, temperature was %f.\n", d2, t2);

    return 0;
} 
```

注意：

*   的返回类型`main`已从更改`void`为`int`
*   `main`接受两个参数：命令行参数的数量，以及它们的 c-string 值
*   `main`现在返回退出代码

你确定这是一本 C++ 书吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T03:48:43.360

C++ 标准只有两种方式指定为最大可移植方式来声明`main`. 所有其他都是实现定义的。以下内容来自最新草案，第 3.6.1p2 节：

> 实现不应预定义主要功能。该功能不得重载。它应该有一个 int 类型的返回类型，否则它的类型是实现定义的。所有实现都应允许以下两种 main 定义： `int main() { /* ... */ }` 和 `int main(int argc, char* argv[]) { /* ... */ }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T03:43:49.587

您不能拥有`main()`类型为 的函数`void`。

将其更改为

```
#include <stdio.h>

int main ()
{
    int date = 10, d2=15;
    float temp = 45.0, t2=33.5;

    printf("On Dec. %d, temperature was %f.\n", date, temp);
    printf("On Jan. %d, temperature was %f.\n", d2, t2);

    return 0; /* The compiler will assume this for main() if you don't specify it */
} 
```

它会正常工作。它不允许`void`您的`main`函数的原因是因为 main 函数需要向操作系统返回成功或失败。约定是返回 0 表示程序执行成功，任何其他数字都是错误代码。

您可以选择将`argc`和`argv`参数添加到您的 main 函数中，这些参数用于获取从命令行传递给您的程序的值。例如，如果您的程序名为“myprogram”，那么如果您使用以下命令从命令行执行它：

```
./myprogram -test 
```

那么`argc`，它是数组 argv 的长度，将是 2，而 argv 将是一个具有以下值的数组：

```
argv[0] = "./myprogram";
argv[1] = "-test"; 
```

# mysql - 如何重置 MySQL root 用户密码和权限

> ID：11355514
> 
> 赞同：0
> 
> 时间：2012-07-06T03:41:47.883
> 
> 标签：mysql, passwords, xampp, root, reset

前段时间我在 XAMPP 中为 root MySQL 用户分配了密码。我最近尝试撤消它并且不给它密码，但它不起作用。

`mysqld --skip-grant-tables`我尝试使用然后直接使用mysql命令行将密码设置为空字符串。看起来它可以工作，root 用户不再有密码，但是如果我登录 PhpMyAdmin，我看不到我的任何数据库，只有一个“information_schema”和一个“test”数据库。如果我查看“用户”选项卡，它似乎拥有所有权限：

![在此处输入图像描述](../Images/2bfbee3d4a1220947d5e78f7e994b4ff.png)

有关如何解决此问题的任何建议？

注意：我用命令行检查过，我所有的数据库和表都还在，我只是在 PHPMyAdmin 中看不到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:52:50.297

尝试删除允许从任何主机连接的匿名用户。我的感觉是，当 MySQL 验证登录时，该行优先于 root 行。

如果您已删除该匿名用户并且问题仍然存在，请尝试将密码设置为 root 和主机，`localhost`然后再次连接。

# javascript - Javascript HighCharts 解析 CSV

> ID：11355526
> 
> 赞同：0
> 
> 时间：2012-07-06T03:43:45.690
> 
> 标签：javascript, highcharts

我已经通过 stackoverflow 和 Highcharts Support 尝试了类似的示例，但仍然无法正确显示图表。尝试使用格式为*小时、温度*的 csv 文件中的数据显示样条图，如下面的示例所示：

```
22,84
23,83
00,82
01,81
02,79
03,77
04,75 
```

这是我目前拥有的 html/javascript：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="../../js/highcharts.js"></script>
    <script src="../../js/modules/exporting.js"></script>

    <script type="text/javascript">

    $(document).ready(function() {

    var time = [];
    var temp = [];

    $.get('forecast.csv', function(data) {
               var lines = data.split('\n');
               $.each(lines, function(lineNo, line) {
                var items = line.split(',');
                time.push(parseInt(items[0]));
                temp.push(parseInt(items[1]));
               });
        });

        var options = {
          chart: {
             renderTo: 'container',
              type: 'spline'
          },
          title: {
              text: 'Temperature Forecast'
          },
          xAxis: {
             title: {
                text: 'Hour'
             },
             categories: time
          },      
          yAxis: {
                 title: {
                    text: 'Temperature'
                 }
          },
          series: [{
                 data: temp
          }]
          };                      

    var chart = new Highcharts.Chart(options);

    });

    </script>
</head>

<body>

    <div id="container" style="width: 100%; height: 400px"></div>

</body> 
```

我的图表显示，但没有数据。有任何想法吗？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:52:35.390

您需要添加一个二维数组作为数据。您可以声明一个全局变量并将数据添加到该变量。

```
var chartData=[]
    var dataTemp = new Array(parseInt(items[0]), parseInt(items[1]));
chartData.push(dataTemp); 
```

和

```
series: [{
                 data: chartData
          }] 
```

# ios - iOS：如何获取刚刚在界面生成器中设置的 UIView 的框架

> ID：11355530
> 
> 赞同：0
> 
> 时间：2012-07-06T03:44:50.433
> 
> 标签：ios, xcode, uiview

每个人！我已经通过***interface builder***添加了我的自定义 UIView 。在我的自定义 UIView 类中，我覆盖了`-awakeFromNib`我想注销我的 UIView 的 Frame.x 或 Frame.y**在 nib 文件中设置的方法**。谁能帮我？提前致谢！

PS：无论如何要获得我在界面构建器中设置的框架矩形吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:49:29.777

在调用 viewWillAppear 之前，您的视图框架*没有意义。*以我的经验，在此之前框架是 CGRectZero 。请记住，在您的故事板中，您使用的是“模拟指标”

# zend-framework - Zend 框架 - 如何在选择框中启用选项

> ID：11355531
> 
> 赞同：1
> 
> 时间：2012-07-06T03:44:52.803
> 
> 标签：zend-framework, zend-form

我使用这段代码来禁用 Zend Framework 中选择框的选项：

```
$this->getElement('selectbox')->setAttrib('disable', $disabled_options); 
```

但我不知道如何重新启用它们或通过 php 代码清除这些属性。你能告诉我如何实现这个目标吗？

有没有类似的方法`setAttrib('enable', $options);`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:20:09.480

我假设您正在使用“**禁用**”属性...然后删除它使用`unset($this->getElement('selectbox')->disabled);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:46:13.927

也许最好只删除不必要的选项：[https ://stackoverflow.com/a/878331/1333512](https://stackoverflow.com/a/878331/1333512)
[Demo](http://jsbin.com/anoci)

# java - While 循环和套接字

> ID：11355533
> 
> 赞同：1
> 
> 时间：2012-07-06T03:45:03.100
> 
> 标签：java, sockets, while-loop

我正在尝试制作一个网络应用程序，用于概念验证项目。我需要保持连接打开，加入的客户端，但我正在运行的 while 循环永远不会退出第一个循环。代码：

```
public class comm implements Runnable {

    private Socket socket;
    private String line, input;
    boolean sending = true;
    boolean connected = false;
    private int me;
    private BufferedReader br;
    private PrintWriter pw;

    doComms(Socket server) {
       socket = server;
        me = Main.connected;
    }

    public void run() {
        try {
                br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                pw = new PrintWriter(socket.getOutputStream(), true);

            while (true) {

                System.out.println("Waiting");
                readCommand();
            }
        } catch (Exception ex) {
            System.out.println(ex);
        }
    }

    private void readCommand() throws Exception {

        String str;

        while (br.readLine() != null) {

            if (!connected) {
                pw.println("connect");
            }

            str = br.readLine();
            System.out.println(str);

            if (str.startsWith("!START!")) {
                System.out.println("User connected");
                connected = true;
                String[] split = str.split("#");
                Main.jTable1.getModel().setValueAt(split[1], me, 2);
                Main.jTable1.getModel().setValueAt(split[2], me, 3);
                Main.jTable1.getModel().setValueAt("Connected...", me, 4);
            }

        }
    }
} 
```

启动该代码很好，它所做的只是为每个连接的用户创建一个新线程，并且客户端软件也运行良好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:09:56.567

我最好的猜测。它永远不会退出第一个 readCommand 调用，因为 readCommand 本身处于无限循环中：

```
 while (br.readLine() != null) { 
```

br.readLine 将阻塞，直到来自套接字输入的下一行到达。因此，退出循环的唯一方法是让远程客户端断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:58:35.123

> 但是我正在运行的 while 循环永远不会退出第一个循环。

您指的第一个循环是：

```
while(true) { ... } 
```

这永远不会退出，因为`true`它总是正确的。

# node.js - 是否可以在不同的网络中创建对等连接？

> ID：11355537
> 
> 赞同：4
> 
> 时间：2012-07-06T03:45:50.667
> 
> 标签：node.js, websocket, p2p, reverse-proxy, dnode

我想在 2 个 nodejs 客户端之间创建对等连接。

使用 websocket (dnode)

这是限制：

*   nodejs 客户端在不同网络中的 2 台电脑上运行。
*   他们在 NAT 或防火墙后面没有静态 IP（192.168.1.100 && 192.168.2.200）
*   无权更改路由器的映射。
*   公共网络中只有静态 Web 服务器。（可以人工修改文件）
*   可以在电脑上安装应用程序（win）

可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-10T12:30:01.263

也许您可以使用[PeerJS](http://peerjs.com/)来实现您的目标。PeerJS 简化了 WebRTC 点对点数据、视频和音频调用。PeerJS 封装了浏览器的 WebRTC 实现，以提供完整、可配置且易于使用的点对点连接 API。只配备一个 ID，对等点就可以创建到远程对等点的 P2P 数据或媒体流连接。

对于代理连接，PeerJS 连接到[PeerServer](https://github.com/peers/peerjs-server)。请注意，没有点对点数据通过服务器；**服务器仅充当连接代理。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T17:36:00.847

如果通过点对点连接，您的意思是对等点之间的直接连接（即，不通过服务器），那么是的，在大多数情况下理论上可能是可能的。但我从未见过有人实施了该解决方案。

您需要为 TCP 连接实现一个 NAT 打孔系统（由于无法在软件层解决的技术限制，它们并不总是 100% 成功）。然后，您只需要在此 tcp 连接之上实现 websocket 协议。

如果通过对等连接，您可以通过中央服务器（具有公共地址）进行通信，那么是的，这也是可能的。两个对等点只需要连接到中央服务器，它应该只是在两个对等点之间传输流量。

# algorithm - mongodb的数组操作的算法复杂度

> ID：11355539
> 
> 赞同：3
> 
> 时间：2012-07-06T03:46:22.867
> 
> 标签：algorithm, mongodb

Mongodb 支持许多有用的数组操作，例如 $push 和 $pop，但我似乎找不到任何关于它们的算法复杂性的信息，也找不到它们是如何实现的以找出它们的运行时复杂性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:52:05.287

我认为当谈到 Mongo 更新时，只有三个相关案例：

1) 就地原子更新。例如，只需增加一个整数。这是非常快的。

2) 就地替换。必须重写整个文档，但它仍然适合当前空间（它缩小或有足够的填充）。

3) 文件迁移。您必须将文档写入新位置。

除此之外，还有更新受影响索引的成本（全部，如果必须移动整个事物）。

您在文档中实际执行的操作（推动数组、添加字段）不应该对操作的总成本产生任何重大影响，这似乎主要线性地取决于文档的大小（网络和磁盘传输成本） ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:52:30.990

[这是它们的实施位置](https://github.com/mongodb/mongo/blob/master/src/mongo/db/ops/update_internal.cpp)。你可以从那里找出复杂性。

例如，这是`$pop`运算符（这对我来说似乎是 O(N)）：

```
 case POP: {
        uassert( 10135 ,  "$pop can only be applied to an array" , in.type() == Array );
        BSONObjBuilder bb( builder.subarrayStart( shortFieldName ) );

        int n = 0;

        BSONObjIterator i( in.embeddedObject() );
        if ( elt.isNumber() && elt.number() < 0 ) {
            // pop from front
            if ( i.more() ) {
                i.next();
                n++;
            }

            while( i.more() ) {
                bb.appendAs( i.next() , bb.numStr( n - 1 ) );
                n++;
            }
        }
        else {
            // pop from back
            while( i.more() ) {
                n++;
                BSONElement arrI = i.next();
                if ( i.more() ) {
                    bb.append( arrI );
                }
            }
        }

        ms.pushStartSize = n;
        verify( ms.pushStartSize == in.embeddedObject().nFields() );
        bb.done();
        break;
    } 
```

# codeigniter - 带有点燃数据表 CodeIgniter 的 Jquery DataTable

> ID：11355542
> 
> 赞同：2
> 
> 时间：2012-07-06T03:46:58.017
> 
> 标签：codeigniter, datatables

**更新：**

> 我终于找到了解决这个问题的方法。如果您遇到与我相同的问题，可以尝试访问此[链接](http://codeigniter.com/forums/viewthread/160896/P340/#1013662)

[想要将Jquery DataTables](http://datatables.net)与 [CodeIgniter Ignited-Datatables](https://github.com/IgnitedDatatables/Ignited-Datatables)库集成时遇到问题

当我使用默认的 DataTables **sServerMethod**属性“GET”时，我得到了 json 响应，其中包含来自我的 php.ini 的数据。然而，由于 CodeIgniter 使用 post，我坚持加载服务器数据，尽管该函数返回正确的 json 输出。

![在此处输入图像描述](../Images/a827126c131d02922c17987ed2e012cb.png)

所以我按照本[指南](http://gvlatko.com/2012/datables-stuck-on-server-side-processing-solution-for-codeigniter-with-ignitedtables/)将**sServerMethod**更改为“POST”。现在我不再坚持加载服务器数据，但我没有得到我需要的数据。

**使用sServerMethod** GET 的JSON 响应（获取正确的 json，但卡在加载图像中的服务器数据）

```
{
"sEcho": 0,
"iTotalRecords": 10,
"iTotalDisplayRecords": 10,
"aaData": [
    [
        "Munauwar",
        "Syed",
        "Mr",
        "6012345678",
        "0000-00-00",
        "basikal"
    ],        
    [
        "Mak",
        "Je Wei",
        "Mr",
        "6012345678",
        "0000-00-00",
        "motor"
    ]
],
"sColumns": "first_name,last_name,salutation,number,birthday,group_name"} 
```

**使用sServerMethod** POST的JSON 响应

```
{
"sEcho": 1,
"iTotalRecords": 10,
"iTotalDisplayRecords": 0,
"aaData": [],
"sColumns": "first_name,last_name,salutation,number,birthday,group_name"} 
```

这是我的 JavaScript 代码

```
$('#table1').dataTable({
        "bProcessing": true,
        "bServerSide": true,            
        "sPaginationType": "bootstrap",
        "sAjaxSource": config.base_url + "contact/popup_contact",
        "sServerMethod": "POST"

    }); 
```

我在联系人控制器中的功能

```
function popup_contact()
{
    $this->datatables
         ->select('first_name,last_name,salutation,number,birthday,group_name')
         ->from('tb_contact')
         ->join('tb_contact_group', 'tb_contact.contact_group_id = tb_contact_group.contact_group_id');          

    echo $this->datatables->generate();             

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T11:12:02.347

如果上面的方法还是不行，那是因为你设置了： $config['csrf_protection'] = true; // 在您的 Codeigniter 配置中

只需在 fnServerData 调用中添加 aoData.push 行：

```
"fnServerData": function(sSource, aoData, fnCallback) {
            aoData.push({name: '<?php echo $this->security->get_csrf_token_name(); ?>', value: '<?php echo $this->security->get_csrf_hash(); ?>'});
                $.ajax({
                    'dataType': 'json',
                    'type': 'POST',
                    'url': sSource,
                    'data': aoData,
                    'success': fnCallback
                });
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:27:32.677

```
$('#smstable').dataTable({
"bProcessing": true,
"bServerSide": true,
"iDisplayLength": 20,
//"bPaginate": true,
"bAutoWidth": false,
"iDisplayStart": 0,
"bLengthChange": false,//for sorting 10,20,30,50 ....
"sAjaxSource": "././myadmin/ajaxadmin/dt_sms",
"aaSorting": [[ 1, "desc" ]],
"sPaginationType": "full_numbers",
"aoColumns":[
    {"bSearchable": false,"bSortable": false,"bVisible": false},
    {"bSearchable": true,"bSortable": true},
    {"bSearchable": false,"bSortable": false},
    {"bSearchable": true,"bSortable": true},
    {"bSearchable": false,"bSortable": true},
    {"bSearchable": false,"bSortable": false}
],
"fnServerData": function(sSource, aoData, fnCallback){
    $.ajax(
          {
            'dataType': 'json',
            'type'  : 'POST',
            'url'    : sSource,
            'data'  : aoData,
            'success' : fnCallback
          }
      );//end ajx
    // console.log(fnCallback);
} 
```

});//end datable

```
Just check my code and check if you missed something. That code works very fine with me. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T18:30:55.640

每当您卡在从服务器加载数据时.....这基本上是由列集引起的。只需计算“aoColumns”数组并确保与视图文件中设置的表头完全相同。

它一次又一次地发生在我身上......唯一的解决方案一直是列数组集。

# python - 使用 Py2app 运行构建的 Python 应用程序时出错

> ID：11355547
> 
> 赞同：1
> 
> 时间：2012-07-06T03:47:16.063
> 
> 标签：python, macos, py2app

我正在尝试使用 Py2app 构建一个应用程序。我在 Python2.7 和 Mac OSX 10.7 上。OSX 10.5 上也会出现这些错误。该应用程序构建成功，但是在控制台中使用以下命令运行它时：

```
rsg.app/Content/MacOS/rsg
I get the following error:
2012-07-05 20:34:56.090 rsg[7483:707] rsg Error 
```

有谁知道发生了什么或我们如何能够获得更多信息，即堆栈跟踪？

# c - ioctl 给出无效参数

> ID：11355552
> 
> 赞同：3
> 
> 时间：2012-07-06T03:47:38.983
> 
> 标签：c, linux, ioctl

我想在两个不同的程序之间发送一个打开的文件描述符。所以我正在使用`ioctl`with`named pipes`这样做。但是我得到了 ioctl 的无效参数。

```
#include <stropts.h>
#include "accesories.c"
#include <fcntl.h>
#include <errno.h>
#include <string.h>
#include <sys/ioctl.h>

#define MSGSIZ 63
char *fifo = "fifo";

int send_err(int fd, int errcode, const char *msg)
{
    int     n;

    if ((n = strlen(msg)) > 0)
        if (write(fd, msg, n) != n)    /* send the error message */
            return(-1);

    if (errcode >= 0)
        errcode = -1;   /* must be negative */

    if (send_fd(fd, errcode) < 0)
        return(-1);

    return(0);
}

int send_fd(int fd, int fd_to_send)
{
    char    buf[2];     /* send_fd()/recv_fd() 2-byte protocol */

    buf[0] = 0;         /* null byte flag to recv_fd() */
    if (fd_to_send < 0) {
        buf[1] = -fd_to_send;   /* nonzero status means error */
        if (buf[1] == 0)
            buf[1] = 1; /* -256, etc. would screw up protocol */
    } else {
        buf[1] = 0;     /* zero status means OK */
    }
    //printf("From the write %d\n",buf[0]);
    if (write(fd, buf, 2) != 2)
        return(-1);

    if (fd_to_send >= 0)
        if (ioctl(fd, I_SENDFD, fd_to_send) < 0)
        {
            printf("Eroor ::: %s\n",strerror(errno));
            return(-1);
        }
    return(0);
}

int main(int argc, char const *argv[])
{
    int fd, j, nwrite;
    char msgbuf[MSGSIZ+1];
    int fd_to_send;

    if((fd_to_send = open("vi",O_RDONLY)) < 0)
        printf("vi open failed");

    if(argc < 2)
    {
        fprintf(stderr, "Usage: sendmessage msg ... \n");
        exit(1);
    }
    /* open fifo with O_NONBLOCK set */
    if((fd = open(fifo, O_WRONLY | O_NONBLOCK)) < 0)
        printf("fifo open failed");

    /* send messages */
    for (j = 1; j < argc; j++)
    {
        if(strlen(argv[j]) > MSGSIZ)
        {
            fprintf(stderr, "message too long %s\n", argv[j]);
            continue;
        }
        strcpy(msgbuf, argv[j]);
        if((nwrite = write(fd, msgbuf, 6)) == -1)
            printf("message write failed");
    }

    printf("From send_fd %d \n",send_fd(fd,fd_to_send));

    exit(0);

} 
```

文件附件 .h 仅包含一些常见的包含文件，仅此而已。首先我发送一个简单的消息，然后调用`send_fd`它首先发送一个 2 字节的消息，然后必须使用 ioctl 发送文件描述符。但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:10:58.257

看起来[linux 不支持 I_SENDFD](http://fixunix.com/unix/84093-streams-pipes-ioctl-i_sendfd.html)。注释表明它`I_SENDFD`在文档中，但实际上不受支持，并导致您遇到错误消息。STREAMS的[维基百科条目](http://en.wikipedia.org/wiki/STREAMS)指出 linux 内核不支持流。wikipedia 条目确实指向了一些可用于添加流支持的第三方包，但[LiS](http://www.gcom.com/home/linux/lis/kernel.html)尚未移植到 2.6 内核，并且[OpenSS7](http://www.openss7.org/index.html)在 4 年内没有任何积极的开发。

However, linux does support something similar. This mechanism uses a special message type `SCM_RIGHTS` to deliver a file descriptor over a UNIX domain socket with `sendmsg` and obtained from `recvmsg`. Examples can be found with a simple web search, a complete example seems to be from the book *The Linux Programming Interface*, with source for [sending](http://man7.org/tlpi/code/online/dist/sockets/scm_rights_send.c.html) and [receiving](http://man7.org/tlpi/code/online/dist/sockets/scm_rights_recv.c.html).

# lotus-notes - 如何在 LotusScript 中获取今天前 2 天的日期？

> ID：11355554
> 
> 赞同：1
> 
> 时间：2012-07-06T03:48:24.623
> 
> 标签：lotus-notes, lotusscript

我正在做一个代理，以便在今天前 2 天延迟发送通知，周日是非工作日。因此，如果今天是星期一，代理将发送上周五的迟到，如果是星期二，它将发送上周六，如果是星期三，它将发送星期一等等。我已经知道如何获得今天的日期。我如何在今天前 2 天获得？

```
Dim tdy, dayToUse
Dim intl As NotesInternational
Set intl = ss.International
tdy=intl.Today 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:39:23.510

您可以执行以下简单操作来获取特定日期：

```
dayToUse = DateNumber( Year( Now ), Month( Now ), Day( Now ) - 2 ) 
```

您还可以使用 NotesDateTime 对象：

```
Dim dateTime As New NotesDateTime( "Today" )
Call dateTime.AdjustDay( -2 ) 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:35:39.023

基于@Per Henrik Lausten 的回应：

为了排除星期日，您可以使用工作日功能。它是 LotusScript 语言的内置函数，而不是 NotesDateTime 类的方法。它采用 LotusScript 日期作为输入，而不是 NotesDateTime。所以你可能想做这样的事情：

```
Dim dateTime As New NotesDateTime( "Today" )
Dim day as variant
dim adjustment as integer

day = CDat(dateTime.dateOnly)
if Weekday(day) = 2 or Weekday(day) = 3 then ' Monday or Tuesday
   adjustment = -3
else
   adjustment = -2 ' any other day 
end if

Call dateTime.AdjustDay( adjustment ) 
```

上面的代码对于 Today = Sunday 没有特殊情况。我不清楚您是否可以忽略该案例或做一些特别的事情。

# ms-access - Access 2010 访问系统注册表时出错

> ID：11355558
> 
> 赞同：0
> 
> 时间：2012-07-06T03:48:51.413
> 
> 标签：ms-access

不知何故，我的 Access 2010 应用程序的 VBA 代码中有一个无效的引用。当我尝试访问 Toots, References 时，我收到一条错误消息“访问系统注册表时出错”。

我正在运行 Windows 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:10:09.847

我也在使用 Windows 7 并使用“用户帐户控制设置”解决了这个错误，然后选择“从不通知”关于我的计算机中的更改！

[用户帐户控制设置](http://i.stack.imgur.com/tlexA.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:33:22.277

我最终重新安装了 Windows，问题得到了解决。不幸的是，我从未解决发生这种情况的原因。

# sql-server - SQL Server 2012 中几个表的日志传送

> ID：11355561
> 
> 赞同：0
> 
> 时间：2012-07-06T03:49:37.350
> 
> 标签：sql-server, log-shipping

是否可以仅在 SQL Server 2012 中记录少数表的运输？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:20:31.537

简单的回答：不。没有每个表的日志。每个数据库有一个日志。就这么简单。你想要部分表的东西——唯一的机会是复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T11:05:12.780

您可以使用 FileGroups 手动配置它（即将表放入不同的 FILEGROUP），并手动管理恢复过程。

最初只恢复需要查找部分恢复的表。

这是一个目前正在工作的。

# json - WebClient 事件触发顺序

> ID：11355562
> 
> 赞同：0
> 
> 时间：2012-07-06T03:49:53.637
> 
> 标签：json, windows-phone-7, rest, webclient

我是 WP7 应用程序开发的新手，在将参数传递给网站上的 API 时遇到问题。

据我了解，在 WP7 上打开页面时首先触发 onNavigatedTo()，但是当我尝试获取参数时，首先触发 webClient_DownloadStringCompleted()。

```
public partial class Ranks : PhoneApplicationPage
{
    private WebClient webClient;
    private string pageType;
    private string pagePosition;
    public Ranks()
    {
        InitializeComponent();
        this.webClient = new WebClient();
        string header_auth = "application/json";
        this.webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
        this.webClient.Headers[HttpRequestHeader.Authorization] = header_auth;

        Uri serviceUri = new Uri(@"http://www.example.com/api/API.php?type=" + pageType + "&position=" + pagePosition);
        this.webClient.DownloadStringAsync(serviceUri);
    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) 
    { 
        string type, position;
        if (NavigationContext.QueryString.TryGetValue("type", out type))
        {
            pageType = type;
        }
        if (NavigationContext.QueryString.TryGetValue("pos", out position))
        {
            pagePosition = position;
        }

    }

    void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        string myJsonString = e.Result;
        List<PlayerDetails> dataSource = new List<PlayerDetails>();

        //load into memory stream
        using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(myJsonString)))
        {
            //parse into jsonser
            var ser = new DataContractJsonSerializer(typeof(PlayerDetails[]));
            PlayerDetails[] obj = (PlayerDetails[])ser.ReadObject(ms);

            foreach (PlayerDetails plyr in obj)
            {   

                dataSource.Add(plyr);

            }

            playerList.ItemsSource = dataSource;

        }

    } 
```

每当构建 URI 字符串时，它都会缺少参数“pageType”和“pagePosition”

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:21:22.790

类构造函数总是会在之前被调用`OnNavigatedTo`。您应该将该代码从构造函数中移到`OnNavigatedTo`（或加载）中。

我猜您在构造函数中有该代码，因为您只希望它在每次页面加载时发生一次（即当用户导航回页面时不发生）。如果是这种情况，您可以检查`NavigationMode`.

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) 
    { 
        if (e.NavigationMode == NavigationMode.New)
     {
string type, position;
        if (NavigationContext.QueryString.TryGetValue("type", out type))
        {
            pageType = type;
        }
        if (NavigationContext.QueryString.TryGetValue("pos", out position))
        {
            pagePosition = position;
        }

       this.webClient = new WebClient();
        string header_auth = "application/json";
        this.webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
        this.webClient.Headers[HttpRequestHeader.Authorization] = header_auth;

        Uri serviceUri = new Uri(@"http://www.example.com/api/API.php?type=" + pageType + "&position=" + pagePosition);
        this.webClient.DownloadStringAsync(serviceUri);

     }

    } 
```

# ember.js - 从 Handlebars 向 Ember JS 传递数据

> ID：11355566
> 
> 赞同：1
> 
> 时间：2012-07-06T03:50:37.230
> 
> 标签：ember.js, handlebars.js

我有一个菜单栏，单击时其状态/颜色等会发生变化。这些属于不同的 JSP/HTML 页面。当我单击页面时，有一个把手 #bindAttr 决定每个选项卡式菜单项的类。例如

```
<li id="index" {{#bindAttr class="active"}}>
<a href="./index.jsp">
<i class="icon-dashboard"></i>
<span>Dashboard</span>
</a>
</li> 
```

我这里还需要传递其他东西，以便计算属性可以根据 location.href 找出这个类是否应该为真。有没有办法将“li”标签的 id 传递给计算属性“active”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:59:31.753

解决了。自定义 HandleBar 辅助函数

```
<li {{activetab "index.jsp"}}> 

Handlebars.registerHelper("activetab", function(tabname) { 
var currentPage = window.location.href; console.log(currentPage); if(currentPage.indexOf(tabname)!=-1){
 return "class=active"; 
} 
else{ 
 return ""; 
} 
}); 
```

# javascript - 禁用/删除 ajax 对话框表单的关闭（X）按钮

> ID：11355569
> 
> 赞同：0
> 
> 时间：2012-07-06T03:50:46.247
> 
> 标签：javascript, asp.net-mvc-3, jquery

我正在调用 ajax 在提交表单时在 div 上加载部分视图。它工作正常。部分视图在定义 div 时正确加载。现在我需要删除/禁用该 ajax 弹出对话框的关闭（X）按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:19:03.690

试试这个我想它可能会帮助你..

```
$("yourdivid").dialog("widget").find(".ui-dialog-titlebar-close").hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:01:00.660

您必须创建一个隐藏的 div，然后使用阴影框或其他类似的实用程序将其带到前面，看起来像一个对话框。出于安全原因，该对话框不能删除关闭按钮。

# tumblr - 将 Tumblr 赞按钮添加到非 Tumblr 页面？

> ID：11355580
> 
> 赞同：0
> 
> 时间：2012-07-06T03:52:31.903
> 
> 标签：tumblr

[是否可以在这里](http://like-button.tumblr.com/)的示例中添加一个像 ThinkingStiff 所做的不错的按钮？

那个设计用于Tumblr 页面*。*我想在Tumblr*之外的页面上获得相同的功能。*

是的，我已经有一种方法来获取它需要`{ReblogURL}`的值。`{PostID}`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:16:46.870

啊，自己解决了。只需替换原始代码中的`{ReblogURL}`和：`{PostID}`

```
<div class="my-like" data-reblog="{ReblogURL}" data-id="{PostID}" title="Like"></div> 
```

使用新的变量（从您用来获取它们的任何方法）并替换该 div。

例子：

```
<div class="my-like" data-reblog="3Pbn6aNA" data-id="12345678901" title="Like"></div> 
```

**注意**：这些变量不是实时 Tumblr 帖子。

# php - 获取不带扩展名且不带完整 url 的 php 文件的文件名

> ID：11355581
> 
> 赞同：-1
> 
> 时间：2012-07-06T03:52:35.127
> 
> 标签：php, url

我只能找到一种涉及输入目录和内容的方法，但我想要的是这样我可以获取 php 文件名（没有扩展名或目录信息）并将其用作任何文件夹中的任何位置的 var（使用 include 函数包含变量）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:02:15.947

你可以使用[pathinfo](http://php.net/manual/en/function.pathinfo.php)：

```
$name = pathinfo($_SERVER['SCRIPT_FILENAME'], PATHINFO_FILENAME); 
```

但是请参考上面评论者的建议:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:15:32.037

```
$bname = basename($_SERVER['PHP_SELF']);
$name = rtrim($bname, '.php'); 
```

That's what works for me.

# c# - 可以在localhost上运行，但部署到服务器时无法运行

> ID：11355590
> 
> 赞同：0
> 
> 时间：2012-07-06T03:54:36.077
> 
> 标签：c#, asp.net, deployment, project, localhost

我的asp项目有一个非常奇怪的问题。当我在本地主机上测试时，我的项目可以顺利运行。但是当我部署到服务器时

它给了我这个错误

```
 ApplicationException: Object reference not set to an instance of an object.]
       LewreERP_MixsolProject.Module.Sales.SalesOrder.SalesOrderListing.createGridView() in C:\Users\user\Desktop\30052012\LewreERP_MixsolProject\Module\Sales\SalesOrder\SalesOrderListing.aspx.cs:309
       LewreERP_MixsolProject.Module.Sales.SalesOrder.SalesOrderListing.Page_Load(Object sender, EventArgs e) in C:\Users\user\Desktop\30052012\LewreERP_MixsolProject\Module\Sales\SalesOrder\SalesOrderListing.aspx.cs:148
       System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
       System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
       System.Web.UI.Control.OnLoad(EventArgs e) +91
       System.Web.UI.Control.LoadRecursive() +74
       System.Web.UI.Page.ProcessRequestMain(Boole

an includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

这是我的后端编码

```
protected void Page_Load(object sender, EventArgs e)
{
    try
    {
        if (!Page.IsPostBack)
        {

        }

    }
    catch (Exception ex)
    {
        logger.Error(ex.Message);
        throw;
    }
}

private void assignCmdBtn()
{
    //if (hfListStatus.Value == gbcSalesOrder.SNew)
    //{

    //}
    //else
    //{

    //}

}

protected void btnSearch_Click(object sender, EventArgs e)
{
    try
    {

    }
    catch (Exception ex)
    {
        logger.Error(ex.Message);
        throw;
    }
}

protected void btnSearchClear_Click(object sender, EventArgs e)
{
    try
    {

    }
    catch (Exception ex)
    {
        logger.Error(ex.Message);
        throw;
    }
}

protected void imgBtnLeft2_Click(object sender, ImageClickEventArgs e)
{

}

protected void ingBtnRight2_Click(object sender, ImageClickEventArgs e)
{

}

protected void ddlRowPerPage_SelectedIndexChanged(object sender, EventArgs e)
{

}

protected void btncAdd2_Click(object sender, EventArgs e)
{

}

protected void btncDelete_Click(object sender, EventArgs e)
{

}

protected void imgBtnLeft_Click(object sender, ImageClickEventArgs e)
{

}

protected void ingBtnRight_Click(object sender, ImageClickEventArgs e)
{

}

protected void btnGvPage2_Click(object sender, EventArgs e)
{

}

protected void btnGvPage_Click(object sender, EventArgs e)
{

}

protected void lnkNew_Click(object sender, EventArgs e)
{

}

protected void btncAdd_Click(object sender, EventArgs e)
{

}

protected void gvSaleOrder_RowCommand(object sender, GridViewCommandEventArgs e)
{

}

protected void gvSaleOrder_RowDataBound(object sender, GridViewRowEventArgs e)
{

}

protected void lnkCancel_Click(object sender, EventArgs e)
{

}

protected void lnkConfirmed_Click(object sender, EventArgs e)
{
}

protected void lnkPartialShip_Click(object sender, EventArgs e)
{

}

protected void lnkFullyShip_Click(object sender, EventArgs e)
{

}

protected void lnkComplete_Click(object sender, EventArgs e)
{

}

private void countTotalItem()
{

}

//Refresh all the page status
protected override void OnPreRender(EventArgs e)
{
    try
    {

    }
    catch (Exception ex)
    {
        logger.Error(ex.Message);
        throw;
    }
} 
```

我的前端

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Module/SharedPage/ProjectManagement.master"
    AutoEventWireup="true" CodeBehind="SalesOrderListing.aspx.cs" Inherits="LewreERP_MixsolProject.Module.Sales.SalesOrder.SalesOrderListing" %>

<%@ Register Assembly="LewreERP_MixsolProject" Namespace="blcCustomControl" TagPrefix="cc1" %>
<%@ Register Src="../../SharedPage/Master/messageAlertUC.ascx" TagName="messageAlertUC"
    TagPrefix="uc1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="PageTitle" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="PageContent" runat="server">

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <table style="width: 100%">
            <tr>
                <td class="titleContainer">
                    <table class="table100">
                        <tr>
                            <td class="icon">
                                <asp:Image ID="Image2" runat="server" ImageUrl="~/Styles/images/icon04.gif" />
                            </td>
                            <td class="title">
                                Sales Order
                            </td>
                            <td class="tableAlignRight">
                                <span class="titleSpecialHelp"><a href="">Need Help?</a></span> <span class="titleSpecialHelp">
                                    |</span> <span class="titleSpecialHelp"><a href="">Printable View</a></span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td class="rightColumnModule1">
                    <table width="100%">
                        <tr>
                            <td class="rightColumnModule2DetailColon" style="width: 10%">
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr class="rightColumnModule2">
                <td class="rightColumnModule2TitleContainer">
                    <table class="rightColumnModule2Table">
                        <tr>
                            <td>
                                &nbsp;</td>
                            <td class="tableAlignRight">
                                &nbsp;<asp:LinkButton ID="lnkNew" runat="server" OnClick="lnkNew_Click">New</asp:LinkButton>
                                &nbsp;&nbsp;|
                                <asp:LinkButton ID="lnkConfirmed" runat="server" OnClick="lnkConfirmed_Click">Confirmed</asp:LinkButton>
                                &nbsp;|
                                <asp:LinkButton ID="lnkPartialShip" runat="server" OnClick="lnkPartialShip_Click"> Partial Shipped</asp:LinkButton>
                                &nbsp;|
                                <asp:LinkButton ID="lnkFullyShip" runat="server" OnClick="lnkFullyShip_Click">Fully Shipped</asp:LinkButton>
                                &nbsp;|
                                <asp:LinkButton ID="lnkComplete" runat="server" OnClick="lnkComplete_Click">Completed </asp:LinkButton>
                                &nbsp;|
                                <asp:LinkButton ID="lnkCancel" runat="server" OnClick="lnkCancel_Click"> Cancelled</asp:LinkButton>
                                &nbsp;|
                              <%--  <asp:LinkButton ID="lnkDelete" runat="server" OnClick="lnkDelete_Click">Delete</asp:LinkButton>
                                &nbsp;--%>
                               <asp:LinkButton ID="lnkTotal" runat="server" OnClick="lnkTotal_Click" 
                                    Visible="False">Total List</asp:LinkButton>
                                &nbsp;&nbsp;&nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td class="tableAlignRight">
                                <asp:Panel ID="Panel5" runat="server" DefaultButton="btnSearch">
                                    &nbsp;&nbsp;&nbsp;</asp:Panel>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr class="rightColumnModule2">
                <td class="rightColumnModule2Content">
                    <asp:Panel ID="pnPageTextInput0" runat="server" HorizontalAlign="Right" Height="31px"
                        DefaultButton="btnGvPage2">
                        <table style="width: 100%">
                            <tr>
                                <td style="height: 26px" align="left">
                                    &nbsp;</td>
                                <td style="height: 26px">
                                    /<asp:Button ID="btnGvPage2" runat="server" BorderStyle="None" Height="18px" OnClick="btnGvPage2_Click"
                                        Width="36px" Style="display: none" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    &nbsp;
                                </td>
                                <td>
                                    &nbsp;
                                </td>
                            </tr>
                        </table>
                        <br />
                    </asp:Panel>
                    <asp:Panel ID="pnPageTextInput" runat="server">
                    </asp:Panel>
                    <asp:Panel ID="pnAccessLevel" runat="server" HorizontalAlign="Center" DefaultButton="btnGvPage">
                        <table style="width: 100%">
                            <tr>
                                <td style="height: 14px">
                                </td>
                                <td style="height: 14px">
                                </td>
                            </tr>
                            <tr>
                                <td width="33.3%">
                                </td>
                                <td width="33.3%">
                                    &nbsp; &nbsp;</td>
                                <td align="right" width="33.3%">
                                    /<asp:Button ID="btnGvPage" runat="server" BorderStyle="None" Height="18px" OnClick="btnGvPage_Click"
                                        Width="36px" Style="display: none" />
                                </td>
                            </tr>
                        </table>
                        &nbsp;</asp:Panel>
                </td>
            </tr>
        </table>
        <div class="rightColumnModule2">
            <!-- end of rightColumnModule1 -->
            <!-- end of rightColumnModule2 -->
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我非常确定我已经删除了一个函数名**createGridView()**并且我还注释了 pageLoad 方法中的所有函数。

我尝试清除并重建解决方案，但仍然保留相同的错误。请帮忙 。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:59:07.250

线

> 你调用的对象是空的

告诉您程序中的变量之一是`null`.

线

> LewreERP_MixsolProject.Module.Sales.SalesOrder.SalesOrderListing.createGridView() 在 C:\Users\user\Desktop\30052012\LewreERP_MixsolProject\Module\Sales\SalesOrder\SalesOrderListing.aspx.cs:309

告诉您源代码中的哪一行有一个值为空的变量。

很可能问题不在于您不再在 localhost 上运行，而是在此新服务器上采用不同路径的代码或数据库中的数据不同。

**更新**

在您的评论中，您说您已经删除了`createGridView()`. 但是，该功能显然是在服务器上运行的。

这意味着您没有在服务器上运行最新的代码。

# php - 将包含“Array”的原始字符串转换为 PHP Array 或 JSON

> ID：11355593
> 
> 赞同：1
> 
> 时间：2012-07-06T03:55:02.473
> 
> 标签：php, arrays, json, parsing

我有看起来像`Array`从这样的其他网络服务中获取的字符串

```
[
    [
        [189, 'Brazil Serie A', 0, ''],
        [
            [1053230, 'Flamengo', 'Atletico Goianiense', '1.196', 10, '07/02/2012 04:30', 0, 9, 1, 0, '', 0]
        ],
        [0, [
            [10770901, 0, 5000.00],
            [1, 17988654, '-0.78', '0.70', '1.0', 1],
            [3, 17965783, '0.97', '0.93', '2.5-3'],
            [7, 17965787, '-0.89', '0.77', '0.50', 1],
            [9, 17965789, '0.70', '-0.82', '1.0']
        ]]
    ],
    [, , [0, [
        [10748028, 0, 3000.00],
        [1, 17965781, '0.85', '-0.93', '0.5-1', 1],
        [3, 17988655, '0.79', '-0.89', '2.50']
    ]]]
] 
```

是否可以解析`PHP Array`或转换为`JSON`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:34:11.533

正如 ctrahey 所指出的，单引号需要交换为双引号才能成为有效的 JSON。前面没有任何内容的逗号也必须删除。

```
// quote to double quote                
$input = str_replace("'", '"', $input);                 

// remove empty commas
$input = preg_replace('/,\s*,/', ',', $input);          
$input = preg_replace('/\[\s*,/', '[', $input);

$output = json_decode($input)); 
```

我试图让它保持简单并建立一点灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:07:32.233

嗯，乍一看......如果你将单引号转换为双引号，你已经有了 JSON。我切换了大约一半，并且通过这一点验证可以。

有关详细信息，请参阅[规范](http://www.json.org/)，但这本质上只是一堆数组。字符串的双引号要求在那里明确说明，其余的看起来还可以。

# javascript - 是否可以在 JavaScript 中覆盖 keydown 重复延迟？

> ID：11355595
> 
> 赞同：12
> 
> 时间：2012-07-06T03:55:19.697
> 
> 标签：javascript, jquery, keypress, keydown, repeat

目标是手动设置保持键的“重复率”。

例如，当在文本框中按住 X 键时，我知道有[浏览器特定的方法可以重复按下的字符](http://unixpapa.com/js/key.html)。在某些情况下，它会暂停，然后连续触发按下的键。在其他情况下，它根本不会重复。我想通过强制按下的键以特定间隔重复来缓解这种情况，而不管浏览器如何。

通过研究，我想出了一个基于计时器的尝试，但在 Safari 中，它不会重复字符。我有一个菜单系统，其中按住箭头滚动列表，但翻译动画和重复率彼此不喜欢。

```
var repeating = false;
var repeatRateTimer = null;

$( document ).bind( 'keyup', function( input ) {
    if( repeatRateTimer != null )
    {
        clearTimeout( repeatRateTimer );
        repeatRateTimer = null;
    }

    repeating = false;
} );

$( document ).bind( 'keydown', function( input ) {
    input.preventDefault( );

    if( repeating == true )
    {
        if( repeatRateTimer != null )
        {
            clearTimeout( repeatRateTimer );
            repeatRateTimer = null;
        }
        else
        {
            repeatRateTimer = setTimeout( function( ){ repeating = false; }, 1000 );
        }

        return;
    }
    repeating = true;

    // ...keyboard logic
} ); 
```

我可能把这整件事搞砸了……我试图重新创建[这个 SO 帖子](https://stackoverflow.com/a/3691661/1028949)的简化版本。但是，我觉得必须*有*更好的方法来做到这一点。有什么想法吗？

**更新：**

我们可以假设最终用户没有将他们的操作系统键盘重复率设置为大于我想要使用的频率（1000 毫秒）。如果是，那么它应该回退到它们的重复率，因为它不会继续触发按键事件。如果不是（更有可能，因为大多数人不会修改它），那么我们将覆盖该行为以使其延迟我们指定的时期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:54:44.770

查看以下[JavaScript 文件](http://life.nodejitsu.com/scripts/index.js)。如果你向下滚动到第 530 行，你会发现以下类：

```
var Keyboard = new Class(function (constructor) {
    var key = {};

    var eventListener = {
        keyup: {},
        keydown: {},
        keypress: {}
    };

    constructor.overload(["Number"], function (interval) {
        setInterval(keypress, interval);
    });

    window.addEventListener("keyup", keyup, false);
    window.addEventListener("keydown", keydown, false);

    function keyup(event) {
        var keyCode = event.keyCode;
        var listener = eventListener.keyup[keyCode];
        key[keyCode] = false;
        if (listener)
        listener();
    }

    function keydown(event) {
        var keyCode = event.keyCode;
        var listener = eventListener.keydown[keyCode];
        key[keyCode] = true;
        if (listener)
        listener();
    }

    function keypress() {
        for (var code in key) {
            var listener = eventListener.keypress[code];
            if (key[code] && listener) listener();
        }
    }

    this.addEventListener = new Dispatcher(["String", "Number", "Function"], function (type, keyCode, listener) {
        type = eventListener[type];
        if (type) type[keyCode] = listener;
        else throw new Error("Unexpected value for type.");
    });
}); 
```

作者所做的是他创建了一个特殊的`Keyboard`类来委派关键事件`keyup`：`keydown`和`keypress`。该类只有一个构造函数，它接受一个参数 -`keypress`事件的间隔（这是你想要的）。`addEventListener`您可以使用类实例的方法添加事件侦听器`Keyboard`：

```
var keyboard = new Keyboard(125); // fire key press 8 times a second.

keypress.addEventListener("keypress", 65, function () {
    // do something every time A is pressed
}); 
```

请注意，上述类依赖于以下框架：[Lambda JS](https://github.com/JediCorp/lambda "绝地军团/拉姆达")。[您可以在此处查看](http://life.nodejitsu.com/ "为生活而奋斗")上述脚本的工作演示。希望这可以帮助。

**更新1：**

您的[代码](http://jsfiddle.net/LvBX5/1/ "单击结果框并按一个键。")在 Opera 中不起作用。此外，第二个事件在 Firefox 中额外延迟 500 毫秒后触发，并且连续事件不会保持相同的间隔。另外它不能同时处理多个关键事件。让我们纠正这个问题：

首先，我们需要为[Delta Timing](http://en.wikipedia.org/wiki/Delta_timing "Delta 计时 - 维基百科，免费的百科全书")创建一个简单的脚本，以便在恒定间隔后触发关键事件。我们使用以下代码片段来创建`DeltaTimer`：

```
function DeltaTimer(render, interval) {
    var timeout;
    var lastTime;

    this.start = start;
    this.stop = stop;

    function start() {
        timeout = setTimeout(loop, 0);
        lastTime = Date.now();
        return lastTime;
    }

    function stop() {
        clearTimeout(timeout);
        return lastTime;
    }

    function loop() {
        var thisTime = Date.now();
        var deltaTime = thisTime - lastTime;
        var delay = Math.max(interval - deltaTime, 0);
        timeout = setTimeout(loop, delay);
        lastTime = thisTime + delay;
        render(thisTime);
    }
} 
```

接下来我们编写触发自定义`keypressed`事件的逻辑。我们需要自定义事件，因为我们必须能够同时处理多个键：

```
(function (interval) {
    var keyboard = {};

    window.addEventListener("keyup", keyup, false);
    window.addEventListener("keydown", keydown, false);

    function keyup(event) {
        keyboard[event.keyCode].pressed = false;
    }

    function keydown(event) {
        var keyCode = event.keyCode;
        var key = keyboard[keyCode];

        if (key) {
            if (!key.start)
                key.start = key.timer.start();
            key.pressed = true;
        } else {
            var timer = new DeltaTimer(function (time) {
                if (key.pressed) {
                    var event = document.createEvent("Event");
                    event.initEvent("keypressed", true, true);
                    event.time = time - key.start;
                    event.keyCode = keyCode;
                    window.dispatchEvent(event);
                } else {
                    key.start = 0;
                    timer.stop();
                }
            }, interval);

            key = keyboard[keyCode] = {
                pressed: true,
                timer: timer
            };

            key.start = timer.start();
        }
    }
})(1000); 
```

`interval`设置为`1000`ms，但您可以更改它。最后注册一个我们做的事件：

```
window.addEventListener("keypressed", function (event) {
    document.body.innerHTML += event.keyCode + " (" + event.time + " ms)<br/>";
}, false); 
```

这是简单而高效的 JavaScript。不需要 jQuery。你可以在这里看到[现场演示](http://jsfiddle.net/BxbAG/)，看看你的脚本和我的脚本之间的区别。干杯。

**更新 2：**

查看 StackOverflow 上的另一个[问题](https://stackoverflow.com/q/3691461/783743 "事件 - 删除 javascript 中的按键延迟 - 代码日志")，这是使用上述模式实现它的方式：

```
window.addEventListener("keypressed", function (event) {
    switch (event.keyCode) {
    case 37:
        Move(-1, 0);
        break;
    case 38:
        Move(0, -1);
        break;
    case 39:
        Move(1, 0);
        break;
    case 40:
        Move(0, 1);
        break;
    }
}, false); 
```

使用上面的代码将消除您遇到的短暂延迟，并允许同时为不同的键触发多个事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T14:37:36.197

好吧，我弄清楚了为什么我的示例没有循环。在 keydown 循环中，它在超时之前清除超时：

```
if( repeatRateTimer != null )
{
    clearTimeout( repeatRateTimer );
    repeatRateTimer = null;
}
else
{
    repeatRateTimer = setTimeout( function( ){ repeating = false; }, 1000 );
} 
```

超时应该只有在它到期后才被清除，因此`if`需要将条件移到超时函数中：

```
if( repeatRateTimer == null )
{
    repeatRateTimer = setTimeout( function( ) {
        repeating = false;
        clearTimeout( repeatRateTimer );
        repeatRateTimer = null;
    }, 1000 );
} 
```

如果有人可以对此进行改进，或者提供更好的选择，我将保留此赏金。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T14:44:31.217

您如何制作自定义键事件。您可以收听原始的（keyup/keydown），如果它们通过时间条件，您将触发您的自定义事件。
这种方式的好处是您不依赖计时器并且它为您提供更多功能，因为您使用自定义事件（顺便说一句，如果您愿意，您可以跳过取消事件部分）。
这是一个演示，看看我在说什么：http: [//jsfiddle.net/gion_13/gxEMz/](http://jsfiddle.net/gion_13/gxEMz/)
基本代码如下所示：

```
$(document).ready(function(){
    var dispatcher = $(window),
        keyRate = 1000, //ms
        lastKeyEvent = 0,
        cancelEvent = function(e){
            var evt = e ? e:window.event;
            if(evt.stopPropagation)    
                evt.stopPropagation();
            if(evt.cancelBubble!=null) 
                evt.cancelBubble = true;
            return false;
        };

    dispatcher
        .bind('keydown',function(e){
            var now = new Date().getTime();
            if(now - lastKeyEvent <= keyRate)
                // cancel the event
                return cancelEvent(e);
            var keyEventsTimeDiff = now - lastKeyEvent;
            lastKeyEvent = now;
            dispatcher.trigger('special-keydown',[e,keyEventsTimeDiff ]);
        })
        .bind('keyup',function(e){
            cancelEvent(e);
            dispatcher.trigger('special-keyup',[e]);
        })
        // binding the custom events
        .bind('special-keydown',function(e,keyEventsTimeDiff){
            console.log(e,'special keydown triggered again after ' + keyEventsTimeDiff +'ms');
        })
       .bind('special-keyup',function(e,keyEventsTimeDiff){
            console.log(e,'special keyup');
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-12T08:21:51.100

这是一篇旧帖子，但我想与 rxjs 分享我当前的答案。我必须用 Javascript 做一个俄罗斯方块游戏，我想改变按键重复延迟以获得更好的游戏玩法。

事实上，我们不能覆盖操作系统特有的真正的 keydown 重复延迟属性。然而，我们可以通过 keyup 和 keydown 事件来模拟它。

最后，我想出了这个（打字稿）：

```
function keyDown$(key: KeyboardKey): Observable<KeyboardEvent> {
  return fromEvent<KeyboardEvent>(document, 'keydown').pipe(filter(event => event.key === key));
}

function keyUp$(key: KeyboardKey): Observable<KeyboardEvent> {
  return fromEvent<KeyboardEvent>(document, 'keyup').pipe(filter(event => event.key === key));
}

export function keyPressed$(key: KeyboardKey): Observable<KeyboardEvent> {
  return merge(keyDown$(key), keyUp$(key)).pipe(
    filter(event => event.repeat === false),
    switchMap(event => (event.type === 'keydown' ? merge(of(event), timer(150, 50).pipe(mapTo(event))) : NEVER))
  );
}

...

keyPressed$('ArrowRight').subscribe({
  next: (event) => {
    ...
  }
}); 
```

JS 版本：

```
function keyDown$(key) {
  return fromEvent(document, 'keydown').pipe(filter(event => event.key === key));
}

function keyUp$(key) {
  return fromEvent(document, 'keyup').pipe(filter(event => event.key === key));
}

export function keyPressed$(key) {
  return merge(keyDown$(key), keyUp$(key)).pipe(
    filter(event => event.repeat === false),
    switchMap(event => (event.type === 'keydown' ? merge(of(event), timer(150, 50).pipe(mapTo(event))) : NEVER))
  );
}

...

keyPressed$('ArrowRight').subscribe({
  next: (event) => {
    ...
  }
}); 
```

该`keyPressed$`函数将键盘键作为参数并返回一个可观察对象。当按下相应的键时，这个 observable 会立即发射，然后等待 150 毫秒，然后每 50 毫秒发射一次。

您可以在计时器功能中为您的情况更改这些值。

不要忘记取消订阅 observable。

# java - 涉及多个数据源之间交互的设计模式

> ID：11355600
> 
> 赞同：0
> 
> 时间：2012-07-06T03:56:10.577
> 
> 标签：java, design-patterns, jakarta-ee, dao

我一直使用 DAO 模式进行 CRUD 操作，每个 DAO 负责一次访问唯一的数据源，并使用泛型来支持多个实体。

现在我需要以下更改

1.- 数据源将在运行时动态添加/删除

2.- 一个工作单元涉及例如：从数据源 A 读取，在 B 上写入，如果 B 成功，则从 A 中删除。A 和 B 可以互换，这让我想到了某种起源/目的地机制。

3.- 仅针对 1 个数据源进行读取

所有数据源中的实体都是相同的，为此我可以添加一个工厂，该工厂在添加数据源时创建一个新的 DAO，回答第一个问题。但我不确定如何解决其余的问题。

DAO 模式还适用吗？如果是，需要添加什么？或者整体上是否有不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:20:54.237

如果`Spring`是您的应用程序堆栈的一部分，您可以使用`AbstractRoutingDataSource`它来灵活地添加动态`datasource`映射。如果不通过它的源代码，您可以构建自己的逻辑类似于此。

在快速谷歌上，我遇到了这个[http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)。它正在解释这种动态路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:00:37.447

这听起来像是商业交易。您需要一个涵盖事务的业务组件，其中涉及多个 DAO。

# ios - 按流派搜索 iTunes Web Store API

> ID：11355603
> 
> 赞同：2
> 
> 时间：2012-07-06T03:56:37.543
> 
> 标签：ios, itunes

所有，我正在尝试在 iTunes 商店中搜索一些歌曲，我可以毫无问题地按艺术家和歌曲名称进行搜索。我使用以下链接作为资源：

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

我的问题是我想按流派搜索，例如国家和基于该流派的歌曲。有人知道如何按类型搜索吗？

请告诉我。

谢谢！

# python - 函数中的python语法错误

> ID：11355605
> 
> 赞同：1
> 
> 时间：2012-07-06T03:57:02.533
> 
> 标签：python, function, python-2.7

我是 python 的初学者，在尝试我的新程序时遇到了问题。我试图定义一个函数来小写输入，但它只适用于整数，但 int 与字母，也不是字母，这就是我得到的：

```
def SomeString(string):
    lowcase = str(string)
    lowcase.lower()
    print lowcase 
```

只有整数有效，带字母或字母的整数无效：

```
>>> SomeString(TEST0110)
SyntaxError: invalid syntax 
```

和

```
>>> SomeString(TESTString)

Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    SomeString(TESTString)
NameError: name 'TESTString' is not defined 
```

我尝试不使用函数来执行此操作，并且效果很好：

```
>>> String = "TEST0110"
>>> String.lower()
'test0110' 
```

我不知道为什么它不适用于功能，请帮助。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:58:09.837

这样做`SomeString("TEST0110")`而不是`SomeString(TEST0110)`

当您编写`SomeString(TEST0110)`代码时，假定`TEST0110`是一个变量，但在您的情况下它不是

引号`""`表示它是一个字符串

该错误`NameError: name 'TESTString' is not defined`意味着您的代码正在尝试查找具有名称的变量`TESTString`

该函数`.lower()`返回您未捕获的输出...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T04:07:22.860

`SomeString(TEST0110)`不是语法错误，如果您没有名为的变量，则为 NameError`TEST0110`

`SomeString(0110TEST)` *是*语法错误

这是因为它`0110`是一个数字，但后面是垃圾

`SomeString("TEST0110")`大概就是你的意思。它将一个字符串传递给函数

如果你确保你总是通过 a`str`你不需要打电话`str()`

```
def SomeString(my_string):
    lowcase = my_string.lower()
    print lowcase 
```

# php - php ajax每1秒重新加载网页恒定数据库连接

> ID：11355608
> 
> 赞同：0
> 
> 时间：2012-07-06T03:57:14.483
> 
> 标签：php, javascript, ajax

我想知道如何使用 ajax 每秒重新加载一个包含一个表的 .php 网站？如果我使用javascript可以吗，但是快速的php脚本就可以了，reload方法的循环是否有效？

我尝试使用 javascript 进行 ajax，但每次使用 jquery 加载方法时它都没有加载任何内容，而且我看到所有 ajax 示例只处理接受使用 get 查询的 php 网站。我只需要我的网页尽快重新加载并检查数据库中的更改。我尝试了以下代码，但没有：

$("#newnav").load("polling.php");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:19:16.393

```
<meta http-equiv="refresh" content="5; URL=http://www.yourdomain.com/yoursite.php"> 
```

在该部分内的 HTML 代码中弹出它。这将每五秒自动重新加载页面。更改值以适应您想要的任何时间（以秒为单位）。

# java - 如何在hadoop中获取像素RGB值？

> ID：11355610
> 
> 赞同：0
> 
> 时间：2012-07-06T03:57:30.833
> 
> 标签：java, image, image-processing, hadoop, hdfs

我有数百万张图像存储在 hadoop 的 hdfs 中。我想建立这些图像的索引。如何获取这些图像的像素 rgb 值？我是hadoop新手，hadoop中的图像格式与原始图像二进制格式不同。另一个问题是我应该使用hadoop中的序列文件将巨大的图像打包成一个大文件以提高效率吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:51:07.210

如果您有额外的存储空间并且效率对您很重要，我肯定会使用 SequenceFile。Hadoop 将为您处理拆分文件。我们遇到了一个案例，我们从图像文件中提取数据，类似于您正在做的事情。在我们的例子中，我们在发现系统中提取用于摄取的元数据，以便可以在集群外部搜索我们的图像文件。在这种情况下，因为效率对我们来说不是什么大问题，我们只是单独处理文件，确保它们不可拆分。这样，其他系统就可以通过 http 获取源文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:04:08.113

我可以部分回答这个问题。

> 另一个问题是我应该使用hadoop中的序列文件将巨大的图像打包成一个大文件以提高效率吗？

取决于单个文件的大小。如果单个文件真的很大，那么合并它们可能并没有真正的帮助，反之亦然。

在 SO 上查看此[查询以获取更多详细信息。](https://stackoverflow.com/questions/5930955/processing-large-set-of-small-files-with-hadoop)

# xml - 合并 xml 并将输出作为正确的 xml 文件

> ID：11355612
> 
> 赞同：1
> 
> 时间：2012-07-06T03:57:40.357
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我需要将 4 个 xml 文件合并为一个。它们如下所示。 **文件 1**

```
<doc1>
....
<doc1> 
```

**文件 2**

```
<doc2>
....
<doc2> 
```

**文件 3**

```
<doc3>
....
<doc3> 
```

**文件 4**

```
<doc4>
....
<doc4> 
```

我想要输出如下

```
<doc1>
....

<doc2>
....
</doc2>

<doc3>
....
</doc3>

<doc4>
....
</doc4>
</doc1> 
```

我做了如下。

```
<xsl:transform version="2.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
      <xsl:copy-of select="document('doc1.xml')"/>
      <xsl:copy-of select="document('doc2.xml')"/>
      <xsl:copy-of select="document('doc3.xml')"/>
      <xsl:copy-of select="document('doc4.xml')"/>
  </xsl:template>
</xsl:transform> 
```

但我得到的输出如下

```
<doc1>
....
</doc1>

<doc2>
....
</doc2>

<doc3>
....
</doc3>

<doc4>
....
</doc4> 
```

是否可以更改我的脚本并得到我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:06:15.823

这种转换产生了想要的结果：

```
<xsl:transform version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:template match="/">
          <xsl:for-each select="document('doc1.xml')/*">
            <xsl:copy>
             <xsl:copy-of select="@*|node()"/>

             <xsl:copy-of select="document('doc2.xml')"/>
             <xsl:copy-of select="document('doc3.xml')"/>
             <xsl:copy-of select="document('doc4.xml')"/>
            </xsl:copy>
          </xsl:for-each>
      </xsl:template>
</xsl:transform> 
```

# java - 模拟股票价格

> ID：11355615
> 
> 赞同：2
> 
> 时间：2012-07-06T03:57:49.693
> 
> 标签：java, random

我想制作一个模拟股票价格的程序，其中数据是随机的。我正在使用 Math 中的 random() 方法来生成数字。该程序添加了一个浮点数，并在一些限制后减去它。我的问题是：我想要价值突然下降和上升。我怎样才能生成这个？

这是我的代码：

```
private static float lastValue= 50.187786f;
private static float limit=49.627786f;
private static float min_value=0.334834f;

private float randomValue() {

double factor = Math.random()/10;

if (lastValue >limit+min_value){
    lastValue=lastValue-(float)factor;
}else if(limit<limit-min_value){
    lastValue = lastValue + (float) factor;
}else{
    lastValue = lastValue + (float) factor;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:27:31.887

股票市场通常被建模为随机游走。即你有相同的机会上升或下降一个值。IE

```
price += Math.random() >= 0.5 ? +1 : -1; 
```

您可以在模型中添加更安静的时间（每秒更少的移动）和更繁忙的时间（每秒更多的移动）。

对新闻事件（导致股票突然增加、减少或持有）进行建模更为复杂。我会单独建模。即，您有很小的机会价格会比正常波动更多。

# haskell - 伪快速排序时间复杂度

> ID：11355621
> 
> 赞同：15
> 
> 时间：2012-07-06T03:58:33.910
> 
> 标签：haskell, time-complexity, quicksort

我知道快速排序具有`O(n log n)`平均时间复杂度。一个伪快速排序（当你从足够远的地方看它时，它只是一种快速排序，具有适当高的抽象级别），通常用于证明函数式语言的简洁性，如下所示（在 Haskell 中给出）：

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) = quicksort [y | y<-xs, y<p] ++ [p] ++ quicksort [y | y<-xs, y>=p] 
```

好的，所以我知道这件事有问题。这样做的最大问题是它没有就地排序，这通常是快速排序的一大优势。即使这无关紧要，它仍然会比典型的快速排序花费更长的时间，因为它在对列表进行分区时必须执行两次遍历，并且它会执行昂贵的附加操作以在之后将其拼接在一起。此外，选择第一个元素作为枢轴不是最佳选择。

但*即使考虑到所有这些*，这种快速排序的平均*时间*复杂度是否与标准快速排序相同？即，`O(n log n)`? 因为追加和分区仍然具有线性时间复杂度，即使它们效率低下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:08:15.890

这种“快速排序”实际上是砍伐森林的树排序： [http ://www.reddit.com/r/programming/comments/2h0j2/real_quicksort_in_haskell](http://www.reddit.com/r/programming/comments/2h0j2/real_quicksort_in_haskell)

```
data Tree a = Leaf | Node a (Tree a) (Tree a)

mkTree [] = Leaf
mkTree (x:xs) = Node x (mkTree (filter (<= x) xs)) (mkTree (filter (x <) xs)) 
```

二叉树是不平衡的，因此构建搜索树的最坏情况复杂度为 O(N^2)，平均情况复杂度为 O(N*Log N)。

```
foldTree f g Leaf = g
foldTree f g (Node x l r) = f x (foldTree f g l) (foldTree f g r)

treeSort l = foldTree (\x lft rht -> lft++[x]++rht) [] (mkTree l) 
```

检索算法具有 O(N^2) 最坏情况和 O(N*Log N) 平均情况复杂度。

均衡：

```
Prelude> let rnds = iterate step where step x = (75*x) `mod` 65537
Prelude> length . quicksort . take 4000 . rnds $ 1
4000
(0.08 secs, 10859016 bytes)
Prelude> length . quicksort . take 8000 . rnds $ 1
8000
(0.12 secs, 21183208 bytes)
Prelude> length . quicksort . take 16000 . rnds $ 1
16000
(0.25 secs, 42322744 bytes) 
```

不太平衡：

```
Prelude> length . quicksort . map (`mod` 10) $ [1..4000]
4000
(0.62 secs, 65024528 bytes)
Prelude> length . quicksort . map (`mod` 10) $ [1..8000]
8000
(2.45 secs, 241906856 bytes)
Prelude> length . quicksort . map (`mod` 10) $ [1..16000]
16000
(9.52 secs, 941667704 bytes) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T07:25:47.257

我同意你的假设，即平均时间复杂度仍然是`O(n log n)`. 我不是专家，100% 肯定，但这些是我的想法：

这是就地快速排序的伪代码：（使用 l=1 和 r=数组长度调用快速排序）

```
Quicksort(l,r)  
--------------
IF r-l>=1 THEN  
    choose pivot element x of {x_l,x_l+1,...,x_r-1,x_r}   
    order the array-segment x_l,...x_r in such a way that  
        all elements < x are on the left side of x // line 6  
        all elements > x are on the right side of x // line 7  
    let m be the position of x in the 'sorted' array (as said in the two lines above)  
    Quicksort(l,m-1);  
    Quicksort(m+1,r)  
FI 
```

然后，平均时间复杂度分析通过选择第 6 行和第 7 行中的“<”-比较作为该算法中的主要操作进行推理，最终得出平均时间复杂度为 O(n log n) 的结论。由于没有考虑“以这样的方式对数组段 x_l、...x_r 进行排序”的成本（如果你想找到界限，只有主导操作在时间复杂度分析中很重要），我认为“因为它在对它进行分区时必须执行两次列表传递”不是问题，因为您的 Haskell 版本在此步骤中只需要大约两倍的时间。附录操作也是如此，我同意这不会增加渐近成本：

> 因为追加和分区仍然具有线性时间复杂度，即使它们效率低下。

为了方便起见，我们假设这将“n”加到我们的时间复杂度成本中，因此我们有“O(n log n+n)”。由于存在一个自然数 o，对于所有大于 o 的自然数，n log n > n 都成立，因此您可以估计 n log n +n 到顶部 2 n log n 和底部 n log n，因此n log n+n = O(n log n)。

> 此外，选择第一个元素作为枢轴不是最佳选择。

我认为枢轴元素的选择在这里无关紧要，因为在平均案例分析中，您假设数组中元素的均匀分布。您不知道应该从数组中的哪个位置选择它，因此您必须考虑所有这些情况，在这些情况下，您的枢轴元素（独立于您取它的列表的哪个位置）是第 i-st 最小元素在您的列表中，对于 i=1...r。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T08:36:22.567

[我可以在Ideone.com](http://ideone.com/7XVCr)上为您提供一个运行时测试，它似乎显示了基于 (++) 的版本和使用[Landei 答案](https://stackoverflow.com/a/11360265/849891)中的累加器技术的版本以及另一个使用了[一个](https://stackoverflow.com/a/9550430/849891)的版本或多或少的线性运行时间[-通过三路分区](https://stackoverflow.com/a/9550430/849891)。在*有序*数据上，这对所有这些数据都变成二次方或更糟。

```
-- random:   100k        200k         400k         800k
-- _O    0.35s-11MB  0.85s-29MB   1.80s-53MB   3.71s-87MB   n^1.3  1.1  1.0
-- _P    0.36s-12MB  0.80s-20MB   1.66s-45MB   3.76s-67MB   n^1.2  1.1  1.2
-- _A    0.31s-14MB  0.62s-20MB   1.58s-54MB   3.22s-95MB   n^1.0  1.3  1.0
-- _3    0.20s- 9MB  0.41s-14MB   0.88s-24MB   1.92s-49MB   n^1.0  1.1  1.1

-- ordered:   230     460     900     1800
-- _P        0.09s   0.33s   1.43s    6.89s                 n^1.9  2.1  2.3
-- _A        0.09s   0.33s   1.44s    6.90s                 n^1.9  2.1  2.3
-- _3        0.05s   0.15s   0.63s    3.14s                 n^1.6  2.1  2.3

quicksortO xs = go xs  where
  go []  =  []
  go (x:xs) = go [y | y<-xs, y<x] ++ [x] ++ go [y | y<-xs, y>=x]

quicksortP xs = go xs  where
  go []  =  []
  go (x:xs) = go [y | y<-xs, y<x] ++ (x : go [y | y<-xs, y>=x])

quicksortA xs = go xs [] where
  go [] acc = acc
  go (x:xs) acc = go [y | y<-xs, y<x] (x : go [y | y<-xs, y>=x] acc)

quicksort3 xs = go xs [] where
  go     (x:xs) zs = part x xs zs [] [] []
  go     []     zs = zs
  part x []     zs a b c = go a ((x : b) ++ go c zs)
  part x (y:ys) zs a b c =
      case compare y x of
                  LT -> part x ys zs (y:a) b c
                  EQ -> part x ys zs a (y:b) c
                  GT -> part x ys zs a b (y:c) 
```

[经验运行时复杂度](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)在这里被估计为`O(n^a)`where `a = log( t2/t1 ) / log( n2/n1 )`。[时间非常近似，因为 ideone 对于偶尔的离群值不是很可靠，但是对于检查时间复杂度来说就足够了。]

因此，这些数据似乎表明，单通道分区*比*两通道方案快 1.5 倍至 2 倍，并且使用`(++)`绝不会减慢速度 - 根本*没有*。即“追加操作”根本不是“昂贵的”。~~二次行为或 (++)/append 似乎是一个城市神话——当然在 Haskell 上下文中~~（*编辑：* ...即在保护递归/[尾递归模 cons](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)的上下文中；参见[这个答案](https://stackoverflow.com/a/11933133/849891)）（*更新：*如[用户：AndrewC](https://stackoverflow.com/users/1598537/andrewc) [解释说，](https://stackoverflow.com/questions/11355621/pseudo-quicksort-time-complexity/11373542#comment20712850_11373542)*左*折叠确实是二次的；*右*`(++)`折叠使用时是线性的；更多关于这个*[这里](https://stackoverflow.com/questions/13879260/why-are-difference-lists-more-efficient-than-regular-concatenation/13879693#13879693)和[这里](https://stackoverflow.com/questions/14938584/haskell-foldl-poor-performance-with/14942678#14942678)）。*

 ** * *

*稍后补充：*为了稳定，三向分区快速排序版本也应该以自上而下的方式构建其部分：

```
q3s xs = go xs [] where
  go     (x:xs) z = part x xs  go  (x:)  (`go` z)
  go     []     z = z
  part x []      a  b  c = a [] (b (c []))
  part x (y:ys)  a  b  c =
      case compare y x of
                  LT -> part x ys  (a . (y:))  b  c
                  EQ -> part x ys  a  (b . (y:))  c
                  GT -> part x ys  a  b  (c . (y:)) 
```

（性能未测试）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T10:15:25.323

我不知道这在多大程度上提高了运行时的复杂性，但是通过使用累加器可以避免昂贵的`(++)`：

```
quicksort xs = go xs [] where
  go [] acc = acc
  go (x:xs) acc = go [y | y<-xs, y<x] (x : go [y | y<-xs, y>=x] acc) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T21:07:01.613

是的，这个版本具有与经典版本相同的*渐近*`partition`复杂性——您将线性时间替换为：两次通过（`<`和`>=`），并且您拥有额外的线性时间`++`（包括线性重新分配/复制）。所以它是一个比就地分区更糟糕的常数因子，但它仍然是线性的。该算法的所有其他方面都是相同的，因此给出“真实”（即就地）快速排序的 O(n log n) 平均情况的相同分析在这里仍然成立。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-02T20:09:52.557

在此处查找适用于数组和列表的真正 O(n log n) 快速排序： [http](http://citeseer.ist.psu.edu/viewdoc/download?doi=10.1.1.23.4398&rep=rep1&type=pdf) : //citeseer.ist.psu.edu/viewdoc/download ?doi=10.1.1.23.4398&rep=rep1&type=pdf在 Common Lisp 中很容易实现，并且它优于许多商业 lisp 的排序实现。*

# java - 如何制作可运行的 jar 文件？

> ID：11355623
> 
> 赞同：-1
> 
> 时间：2012-07-06T03:58:43.990
> 
> 标签：java, jar

我使用了一个程序来制作可运行的 .jar 文件。我现在找到的所有程序都是制作 .exe 文件的程序。我记得它还可以选择将文件制作为 .sh 脚本。有人知道它的名字吗？我一直在寻找几个小时无济于事：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:07:32.857

命令行

```
java -jar file.jar 
```

将运行您的 jar 文件，如果它有一个`Main-Class`定义为解释[here](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)。

您可以在 shell 脚本中使用该命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:04:44.607

您可以使用 NetBeans IDE 或 Eclipse IDE 创建一个可运行的 jar，只需提供要运行的主类。其余的事情将自动完成。该类必须有一个`main()`方法。然后你可以使用运行该 jar 文件`java -jar yourjarfile.jar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:04:05.917

你的意思是实际编码java然后编译成.jar？如果您尝试使用 [Eclipse 代码编辑器](http://www.eclipse.org/)

我用 eclipse 制作了 minecraft mods。如果您想制作 .jar 程序，它将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-04T16:49:22.940

如果您想要一个可以使用通常语法`./app.jar`（而不是`java -jar`）执行的 jar，这里有一篇解释该过程的帖子：[how to create executable jars](https://dev.to/derlin/how-to-create-jars-that-run-like-any-other-executable-binary-appjar-ic3)。

基本上，JAR 是 ZIP 的一种变体，它允许将随机字节预先/附加到 JAR 而不会损坏它。这意味着可以在 jar 的开头添加一个启动器脚本以使其“可执行”。

这是该过程的一个简单示例：

```
# Append a basic launcher script to the jar
cat \
  <(echo '#!/bin/sh')\
  <(echo 'exec java -jar $0 "$@"')\
  <(echo 'exit 0')\
  original.jar > executable.jar

# Make the new jar executable
chmod +x executable.jar 
```

有了这个，您现在可以运行`./executable.jar`而不是`java -jar original.jar`. 这适用于所有**类 Unix 系统**，包括 Linux、MacOS、Cygwin 和 Windows Linux 子系统。

# php - jQuery 代码中的 JavaScript .replace 函数没有给出预期的结果

> ID：11355625
> 
> 赞同：5
> 
> 时间：2012-07-06T03:58:53.263
> 
> 标签：php, jquery, navigation, jquery-hover

我有一个内置在 PHP 中的导航菜单，因此当前位置具有不同的图像，因此用户知道他们在哪里。

在函数中，我输出了这些 HTML 属性：

设置`td id`：

```
$menu_output .= '<tr><td id="nav_buttons">'; 
```

并设置`img id`和用户定义`img data-id`：

```
$menu_output .= '" id="alt" data-id="yes'; 
```

该函数也有这个位：

```
...
if ($current_page == $key) {
    $menu_output .= $image_dir . $ds . $page_nav_alt[$key];
    $menu_output .= '" id="alt" data-id="yes';
}

else {
    $menu_output .= $image_dir . $ds . $page_nav[$key];
}

$menu_output .= '" border="0" height="19" width="129"></a></td>'; 
```

将当前页面设置为 yes 以对其进行标记。

我基本上给它两个链接和图像数组，当前页面有一个突出显示的图像。这个菜单似乎工作正常，我已经使用了一段时间。

最近我想改变它，以便除了这个功能之外，我还可以使用 jQuery 将鼠标悬停在效果上。我的想法是，这有多难？好吧，这比我想象的要困难得多。我绝不是 JavaScript 或 jQuery 方面的专家，所以我把这件事搞砸了一点也不奇怪。

这是我正在使用的 jQuery，它没有给出预期的结果：

```
$(document).ready(function() {

    var test = $('#alt').attr('data-id');

    if (test != 'yes'){
        $('#nav_buttons img').hover(function() {
            this.src = this.src.replace('_dark', '_light');
        },
        function() {
            this.src = this.src.replace('_light', '_dark');
        });
    }

    else {
        $('#nav_buttons img').hover(function() {
            this.src = this.src.replace('_light', '_dark');
        },
        function() {
            this.src = this.src.replace('_dark', '_light');
        });
    }
}); 
```

这似乎适用于 if 部分，但 else 分支并没有做我认为应该做的事情。它将链接更改为亮，然后悬停将其更改为暗，然后亮。

当我使用 Firefox 检查元素时，类 id 和属性是我设置的，例如，突出显示的链接设置为是，而其他的没有设置。除了 else 分支之外，似乎一切正常。我错过了什么？

**编辑**

当主页处于当前状态时，我查看了页面源，认为它会是“_dark”，因为它看起来像深色图像，但源说它是“_light”图像。但是当我用 Firefox 检查元素时，它告诉我它是带有 alt 属性的“_dark”图像。我相信 PHP 正在按预期将数据写入页面（服务器派生），并且 jQuery 按预期对其进行操作（更改 DOM），但我无法让它们正确播放。我认为我需要在悬停事件之后以某种方式使用 jQuery 设置图像，以使其看起来像它应该的那样。我怎样才能让这些功能像我想要的那样？

**编辑 2**

我想我明白为什么jQuery 方法不起作用`.attr()`了。[文档](http://api.jquery.com/data/)说这些适用于集合中的第一个元素`.data()`。还是我对此有误解？所以基本上，即使 PHP 以我想要的方式编写元素，在正确的位置和正确的值，当我检查元素时，我会得到不同的值。这似乎阻止了悬停/替换正常工作。

我尝试了这种更简单的变体：

```
var test = $('img').data('id'); 
```

我测试是否`test`等于`alt`我现在告诉 PHP 放置在`img`标记之后。但是由于某种原因，当我提醒`test`变量时，我仍然不确定。大概是因为`img`标签属性的顺序。

PHP 开发人员如何解决这个问题并让 PHP 和 jQuery 一起玩得很好？似乎在使用 jQuery 的 PHP 站点中，这些类型的冲突将全部结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:54:22.627

自定义 HTML 属性仅在 HTML5 中真正出现，因此您可能会遇到一些关于 data-id 属性的额外问题。

我建议向 img [addClass()](http://api.jquery.com/addClass/)添加一个类。[然后，您可以使用hasClass()](http://api.jquery.com/hasClass/)测试元素是否具有该类。

```
$menu_output .= '" id="alt" class="data-id-yes"'; 
```

然后你会做类似的事情

```
$(document).ready(function() {
$('#nav_buttons img').hover(function() {
    if($(this).hasClass('data-id-yes')
    {
        this.src = this.src.replace('_dark', '_light');
    } else {
        this.src = this.src.replace('_light', '_dark');
    }
},
function() {
    if($(this).hasClass('data-id-yes')
    {
        this.src = this.src.replace('_light', '_dark');
    } else {
        this.src = this.src.replace('_dark', '_light');
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T04:05:22.170

听起来代码中存在语法错误。尝试改变这个：

```
$menu_output .= '" id="alt" data-id="yes'; 
```

到：

```
$menu_output .= 'id="alt" data-id="yes"'; 
```

```
$('#nav_buttons img').hover(function() {
      var test = $('#alt').data('id');
        if (test != 'yes'){
            this.src = this.src.replace('_dark', '_light');
        } else {
            this.src = this.src.replace('_light', '_dark');
        }
   }, function() {
       if (test != 'yes'){
            this.src = this.src.replace('_light', '_dark');
       } else {
         this.src = this.src.replace('_dark', '_light');
       }
}); 
```

# css - 使用 css 更改画布大小时遇到 问题。我使用的代码如下所示。有人帮我

> ID：11355628
> 
> 赞同：0
> 
> 时间：2012-07-06T03:59:11.363
> 
> 标签：css, html, html5-canvas

我是 html 的新手。我需要使用 css 更改 cavas 的大小。我试过这段代码。但它不适用于悬停。请有人帮助我。提前致谢

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
canvas:hover
{
id: mycanvas;
width: 400;
height: 400;

}
</style>
</head>
<body>

<canvas id="myCanvas" width="200" height="100" style="border:1px solid #c3c3c3;">
</canvas>

<script type="text/javascript">

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.fillStyle="#FF0000";
ctx.fillRect(0,0,150,75);

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:03:03.920

从标签中删除`width`and`height`属性。`<canvas>`

更改：

```
canvas:hover
{
id: mycanvas;
width: 400;
height: 400;
} 
```

到：

```
canvas#mycanvas:hover
{
    width: 400px;
    height: 400px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:04:00.427

我现在无法对此进行测试，但我在您的代码中发现了问题。改成这个...

```
canvas:hover { 
    width: 400;
    height: 400;
} 
```

或者

```
canvas#myCanvas:hover { 
    width: 400;
    height: 400;
} 
```

# math - 游戏编程的数学资源

> ID：11355629
> 
> 赞同：2
> 
> 时间：2012-07-06T03:59:15.467
> 
> 标签：math, physics

嗯，我有兴趣学习应用于游戏开发的数学和物理（我现在不关心语言），我知道有很多相关的书籍，但我在我的国家找不到，所以我必须购买他们在亚马逊，我希望有人向我推荐一些书，如果有的话，还有一些很好的免费资源。

谢谢你。

# sql - 比较SQL中不同类型的不同表中的两列

> ID：11355634
> 
> 赞同：1
> 
> 时间：2012-07-06T03:59:53.250
> 
> 标签：sql, sql-server, sql-server-2008-r2

有一个列存在于 2 个表中。在表 1 中，该列包含二进制形式 ( `int`)`1`和的值`0`，而另一个表包含形式`'Y'`和的列`'N'`。

本质上，我需要在表 1 中显示包含与表 2 中该列的值不同的值的行。如何计算 1 到 Y 和 0 到 N 进行比较？

例子：

表格1：

```
DateRecorded SchoolName StudentName isAbsent hasPassed
------------ ---------- ----------- -------- ---------
2011-04-03   ABC        John        Y        Y
2011-04-05   ABC        John        N        Y 
```

表 2：

```
DateRecorded SchoolName StudentName isAbsent hasPassed
------------ ---------- ----------- -------- ---------
2011-04-03   ABC        John        0        1
2011-04-05   ABC        John        0        1 
```

应该返回行：

```
2011-04-03   ABC        John        Y        Y 
```

来自表 1，因为该行与表 2 中的同一行冲突。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:04:36.947

试试这个：

```
SELECT * FROM tbl1

EXCEPT

SELECT 
    daterecorded,
    schoolname,
    studentname,
    CASE isAbsent WHEN 1 THEN 'Y' WHEN 0 THEN 'N' END AS isAbsent,
    CASE hasPassed WHEN 1 THEN 'Y' WHEN 0 THEN 'N' END AS hasPassed
FROM tbl2 
```

* * *

[SQL-Fiddle 演示](http://sqlfiddle.com/#!3/01574/2/0)

# jquery - 如何将自定义 HTML 添加到 Fancybox？

> ID：11355635
> 
> 赞同：3
> 
> 时间：2012-07-06T04:00:26.017
> 
> 标签：jquery, fancybox

我有一个简单的图片库，用户可以在其中单击缩略图，Fancybox 将打开全尺寸图片。太好了，它有效。现在，我想添加一些自定义 HTML，以便图像包含在底部有标题的包装器中，照片右侧有照片评论（想想 facebook）。我该怎么做呢？我已经尝试了好几个小时来弄清楚如何做到这一点，而我所能做的就是让原始照片用 Fancybox 打开。这是我正在使用的代码：

```
$(document).ready(function() {
    $(".fancybox-button").fancybox({
        padding     : 0,
        prevEffect  : 'none',
        nextEffect  : 'none',
        closeBtn    : false,
        helpers : { 
            title       : { type : 'inside' },
            buttons     : {}
        }
    });
}); 
```

我正在寻找这样的东西（注意最后一行）：

```
$(document).ready(function() {
    $(".fancybox-button").fancybox({
        padding     : 0,
        prevEffect  : 'none',
        nextEffect  : 'none',
        closeBtn    : false,
        helpers : { 
            title       : { type : 'inside' },
            buttons     : {},
            html : {'<div>my custom html</div>'}
        }
    });
}); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-19T03:42:09.623

在 Fancybox 2 上弹出自定义 HTML：

```
$.fancybox({ content: '<div>my custom html</div>' }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T05:18:17.830

看看这个[演示](http://jsfiddle.net/4HBrQ/1/)

你在找这样的东西吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:46:00.037

你说“*想想脸书*”吗？那么你也可以考虑我的fancybox“a la”Facebook：

[http://www.picssel.com/playground/jquery/fancyboxALAfacebook_26Mar12.html](http://www.picssel.com/playground/jquery/fancyboxALAfacebook_26Mar12.html)

它需要fancybox v2.x

# vb.net - 如何知道 2 个字符在 vb.net 中的 utf8 排序规则下的排名是否完全相同

> ID：11355637
> 
> 赞同：0
> 
> 时间：2012-07-06T04:00:51.567
> 
> 标签：vb.net, utf-8, collation

我采用了使用实际单词和标题作为主键的不同寻常的方法。当然，这些必须是独一无二的。

许多在 vb.net 中不同的字符在 mysql 中被视为相同

只需将[所有 UTF8 字符标准化为最标准的格式即可](https://stackoverflow.com/questions/11354999/normalize-all-utf8-character-into-its-most-standard-format#comment14955996_11354999)

我想要一种让 vb.net 知道它们是同一件事的方法。

# pdf - Safari PDF 控件缺少 PDF 在 iF rame 中呈现

> ID：11355639
> 
> 赞同：2
> 
> 时间：2012-07-06T04:01:02.877
> 
> 标签：pdf, iframe, safari

任何人都知道为什么在 Safari 中显示 PDF 时通常可用的 PDF 控件在 Safari 中显示时会丢失`iframe`？“悬停”控件或扩展上下文菜单均不可用。Safari 将其识别为 PDF，因为上下文菜单在打开命令中包含单词 PDF，即。“在新窗口中打开 PDF”

在空浏览器中打开 PDF 可以正常工作。Chrome 和 Firefox 中的内置控件也在那里并且工作正常。

我正在使用一个非常简单的网页提供 PDF，其中包含`iframe`一个`div`.

我可能是错的，但是当我第一次开始这个项目时我以为他们就在那里，但我今天才注意到他们不见了。没有它们，PDF 绘图就无法放大和缩小，从而使它们作为 PDF 无用。

# db2 - 扩展 DB2 以增加 tps

> ID：11355640
> 
> 赞同：0
> 
> 时间：2012-07-06T04:01:41.597
> 
> 标签：db2, cluster-computing, database-partitioning

我想与你们就 DB2 所具有的扩展选项进行头脑风暴。希望可以帮助我解决问题。

我需要扩展我的 DB2 数据库，以预测到数据库服务器的闪存人群事务。在我的数据库完全停止并耗尽 cpu 之前，我的数据库在应用程序术语中每秒只能处理大约 200 个事务++，而不是数据库 tps。

你们怎么看，如果我想增加到 2000++ 或之前的 10 倍，我必须有哪些选项来扩展我的数据库？

最近我读到了 pureScale 特性。它看起来很有前途，但它的解决方案并不灵活，因为它只能部署在 IBM System X 上，而我们的不是。在共享一切方法中是否有其他解决方案，如 pureScale？

第二个选项可能是数据库分区。数据库分区或无共享方法可以帮助解决我的问题吗？可以为我的系统增加处理能力吗？

谢谢并恭祝安康，

弗里茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:34:17.167

在您担心如何扩展（一台服务器中有更多硬件）或扩展（更多服务器）之前，请先了解如何调整您的数据库。花钱解决性能问题几乎总是比花时间查找和解决性能问题更昂贵。

假设在您的数据库服务器上消耗 CPU 的进程是数据库引擎，那么高 CPU 活动和低 I/O 活动表明您正在进行大量读取，但它们都在内存中。即使该表完全存储在内存（缓冲池）中，扫描一个巨大的表仍然是低效的。

查找使用最多 CPU 的 SQL 语句。查看解释计划，并弄清楚如何使它们更有效率。网络上有很多用于数据库性能调优的资源。

# xml - 使用 KXML 在 LWUIT 中解析自定义 XML 文件

> ID：11355641
> 
> 赞同：1
> 
> 时间：2012-07-06T04:01:46.343
> 
> 标签：xml, parsing, java-me, lwuit, kxml

我正在使用 LWUIT 创建一个应用程序，它的部分功能就是这样，我使用 KXML 2_2-3-0 来解析我的 Xml 文件。我正在解析两个文件，一个[XML 文件](http://mobileplanner.netau.net/counties.xml)和一个 RSS 提要。

这是我的 XML 文件的结构：

```
<?xml version="....<the usual stuff>.....>
<kenya>
<county>
    <name>Nairobi</name>
    <population>Population: some figure</population>
    <econ>Economy: Trade and Finance</econ>
    <admin>Governor: None yet</admin>
    <constituencies>Constituencies: Under Analysis</constituencies>
    <desc>Overview: Some data</desc>
    <irating>Rating: 8/10</irating>
</county>
    <!--there are 46 more county nodes. -->
</kenya> 
```

我想要一个包含所有 47 个县的列表的组合框，组合框列表中的项目应该是`<name></name>`标签之间的文本。当用户在组合框列表中选择一个项目时，将显示所选项目（在本例中为县）的信息。例如，从上面的 XML 文件中，组合框项应该是 Nairobi，当它被选中时，会显示以下内容，

人口：一些数字经济：贸易和金融州长：还没有选区：分析中概述：一些数据评级：6/10

我该怎么做呢？我尝试使用`getTitle`和定义节点，但应用程序连接到文件（通过 http）但什么也不显示（甚至没有错误消息）。如果您需要进一步查看 xml 文件，只需请求即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:11:41.727

使用 LWUIT XML 解析器，效果很好！

这里有一个例子。我很久以前做过。

[XML解析不适用于lwuit应用程序的android构建](https://stackoverflow.com/questions/9175745/xml-parsing-not-working-on-android-build-of-lwuit-app/9181807#9181807)

希望它有效！

# deployment - 使用 WLST 远程上传

> ID：11355642
> 
> 赞同：3
> 
> 时间：2012-07-06T04:02:12.877
> 
> 标签：deployment, weblogic, war, ear, wlst

我正在尝试**通过 WLST 执行远程上传和部署**。我成功部署了 WebLogic 服务器路径中已经存在的应用程序。但是现在，我想部署一个远程可用的。

是否有可能在部署之前**通过 WLST 在 WebLogic 服务器上上传 WAR/EAR ？**

我正在运行 weblogic 12C。

我试过：

```
java -cp wlserver/server/lib/weblogic.jar weblogic.Deployer -adminurl t3://WeblogicServer:7001 -user weblogic -password weblogic -deploy /tmp/HelloWorld.war -remote -upload 
```

给我作为回报：

```
weblogic.Deployer invoked with options:  -adminurl t3://WeblogicServer:7001 -user weblogic -deploy /tmp/HelloWorld.war -remote -upload
<6 juil. 2012 17 h 58 CEST> <Info> <J2EE Deployment SPI> <BEA-260121> <Initiating deploy operation for application, HelloWorld [archive: /tmp/HelloWorld.war], to configured targets.> 
[J2EE Deployment SPI:260080]Unable to define the application install directory at "/tmp/helloworld.war". Directory could not be created or is a file. 
```

当我检查服务器时，没有部署任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:20:23.273

我找到了解决方案： **我们不能使用 /tmp 目录作为源**，因为 weblogic.Deployer 使用这个目录。

所以命令是：

```
java -cp wlserver/server/lib/weblogic.jar weblogic.Deployer -adminurl
 t3://WeblogicServer:7001 -user weblogic -password weblogic -deploy 
/home/admin/HelloWorld.war -remote -upload 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:08:58.453

就在这里。查看[WLST`deploy`命令参考](http://docs.oracle.com/cd/E13222_01/wls/docs103/config_scripting/reference.html#wp1024285)（此链接适用于版本 10gR3）。
您可以使用 指定`remote`和`upload`选项`true`，因为它们的默认值为 false。

PS 1：该`remote`选项在 WebLogic 9.0 和旧版本上不可用（但您总是可以获取更新的`weblogic.jar`并尝试
。PS 2：您需要远程访问管理界面（通常是端口 7001 和/或 7002）。那意味着打开防火墙等。
PS 3：请提供您的 WebLogic 服务器的版本，因为这可能有助于我们帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T12:40:16.050

自己写的，可以取消部署+部署。部署行是：

> 部署（项目，存档，apptargets，“阶段”，计划，远程=“真”，上传=“真”，存档版本=存档版本，计划版本=计划版本）

*   disadvantage of using version number in deploy is that redeploy with plan is not working

Complete script: (line next code out yourself, I had to add some spaces to place it here)

```
from java.io import FileReader
from datetime import datetime

def deployApp( project, archive, archiveversion, plan, planversion, apptargets ):

#### UNDEPLOY app          
try:

    domainConfig()
    cd('/')
    found = false
    for app in cmo.getAppDeployments():
        name=app.getName()

        try:                 
            cd('/AppDeployments/' + name ) 
            applicationName=get('ApplicationName')

            if applicationName==project:
                print '\n__ FOUND aplication: ', name
                found = true

                version=get('VersionIdentifier')
                sourcePath=get('SourcePath')
                planPath=get('PlanPath')

                targets=''
                for target in cmo.getTargets():

                    targetName=target.getName()
                    if targets=='':
                        targets=targetName
                    else:
                        targets=targets + ', ' + targetName

                print '   applicationName:\t', applicationName
                print '   version:\t\t', version
                print '   sourcePath:\t', sourcePath
                print '   planPath:\t', planPath
                print '   targets:\t\t', targets

                if version==archiveversion + '#' + planversion: 
                    print '\nCorrect Application version found.  No installation needed\n'
                    return
                else:
                    print '\n__ REMOVING application: ',applicationName, '     version:', version 
                    undeploy(project)

        except:     
            print "IGNORE ERROR: (deployed applicaties gegevens ophalen) ", sys.exc_info()[0]

    if found==false:
        print "Application " + project + "not found."

except:     
    print "Failure in application remove part: ", sys.exc_info()[0]
    raise   

# get deploy targets
try:   
    if apptargets==None:
        serverConfig()
        cd('/')
        targetList = []              
        for cluster in cmo.getClusters():
            targetList.append( cluster.getName() )
        apptargets = ",".join(targetList)

        print 'USING default app target:', apptargets, "   (apptargets not found in environmentfile)" 
except:
    print "Failure while creating default target", sys.exc_info()[0]
    raise 

#### DEPLOY app
try:         
    print '\n__ DEPLOYING application: ', project, archiveversion + '#' + planversion  + '    target:' + apptargets

    deploy( project, archive
    , apptargets, 'stage', plan
    , remote='true', upload='true', archiveVersion=archiveversion, planVersion=planversion )
except:     
    print "Failure in deployment part: ", sys.exc_info()[0]
    raise

# connect to domein
# 1) in plain passsword
# 1)  using encrypted domain credential in separate files
# 2)  using encrypted domain credential in home directory user
def Connect( domainproperties ):
plainUser = domainproperties.getProperty("user")
plainPassword = domainproperties.getProperty("password")
if not (plainUser is None) and not (plainPassword is None):
    print "Connecting with user & password"
    connect( plainUser, plainPassword, domainproperties.getProperty("url"))
    return        

encryptedUserConfigFile = domainproperties.getProperty("encryptedCredentialsFile")
encryptionKeyFile = domainproperties.getProperty("encryptionKeyFile")    
if not (encryptedUserConfigFile is None) and not (encryptionKeyFile is None):
    print "Connecting with encryptedCredentialsFile: ", encryptedUserConfigFile, "  and encryptionKeyFile: ", encryptionKeyFile 
    connect(userConfigFile=encryptedUserConfigFile, userKeyFile=encryptionKeyFile, url=domainproperties.getProperty("url"))
    return

print "Connecting with encryptedCredentialsFile in home directory"
connect( url=domainproperties.getProperty("url") )
return    

try:
print "____ running app_deploy.py at   " + str(datetime.now())

project = sys.argv[1]
archive = sys.argv[3]
archiveversion = sys.argv[4]
plan = sys.argv[5]
planversion = sys.argv[6]    
environmentfile = sys.argv[2]

propertyfilereader=FileReader(environmentfile)
domainproperties=Properties()
domainproperties.load(propertyfilereader)

print "  environment: ", environmentfile 
print "  Ear:   ", archive, "  version:", archiveversion
print "  plan:  ", plan, "  version:", planversion

## Connect
#connect( domainproperties.getProperty("user"), domainproperties.getProperty("password"), domainproperties.getProperty("url") )
Connect( domainproperties )

try: 

    ## Deploy
    deployApp( project, archive, archiveversion, plan, planversion, domainproperties.getProperty("apptargets") )

finally:
    # niet dat het uitmaakt, maar wel zo netjes
    disconnect()

except:
print "ABORT APP DEPLOY: ", #  sys.exc_info()[0], "_", sys.exc_info()[1]
raise 
```

Have fun with it.

# heroku - 从 cli 运行“heroku run bash”时，heroku cedar 堆栈出现错误

> ID：11355647
> 
> 赞同：0
> 
> 时间：2012-07-06T04:02:29.167
> 
> 标签：heroku

我正试图进入 Heroku Cedar 堆栈上的 bash，我得到以下信息：

```
$ heroku run bash

Running `bash` attached to terminal... up, run.1
/usr/local/heroku/lib/heroku/client/rendezvous.rb:87:in `fixup': undefined method `force_encoding' for "\e[01;34m~\e[00m \e[01;32m$ \e[00m":String (NoMethodError)
    from /usr/local/heroku/lib/heroku/client/rendezvous.rb:63:in `start'
    from /usr/local/heroku/lib/heroku/client/rendezvous.rb:46:in `loop'
    from /usr/local/heroku/lib/heroku/client/rendezvous.rb:46:in `start'
    from /usr/local/heroku/lib/heroku/command/run.rb:118:in `rendezvous_session'
    from /usr/local/heroku/lib/heroku/command/run.rb:104:in `run_attached'
    from /usr/local/heroku/lib/heroku/command/run.rb:21:in `index'
    from /usr/local/heroku/lib/heroku/command.rb:167:in `send'
    from /usr/local/heroku/lib/heroku/command.rb:167:in `run'
    from /usr/local/heroku/lib/heroku/cli.rb:9:in `start'
    from /usr/bin/heroku:28 
```

关于导致此错误的原因或如何补救的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:08:27.087

heroku 命令行版本是什么？尝试升级它，无论是 toolbet 还是 ruby​​gem。

# c# - Sharepoint 中的 web.AllowUnsafeUpdates 默认值是否始终为 false？

> ID：11355649
> 
> 赞同：1
> 
> 时间：2012-07-06T04:02:53.700
> 
> 标签：c#, sharepoint, sharepoint-2010, object-model, sharepoint-object-model

这是我的示例代码：

```
SPWeb web = SPContext.Current.Web
SPList list = web.Lists["TestList"];

try {
    web.AllowUnsafeUpdates = true;
    list.Title = "Test";
    list.Update();
}

finally {
    web.AllowUnsafeUpdates = false;
} 
```

我删除了 finally 代码块，然后再次尝试。我发现“web.AllowUnsafeUpdates”仍然是假的。这是否意味着`web.AllowUnsafeUpdates = false`不需要设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:11:03.697

`web.AllowUnsafeUpdates`为请求的持续时间（对于 SPContext.Current.Web）或相应 SPWeb 对象的生命周期设置，如果通过`GetWeb(...)`或从 SPSite 获得`Webs[]`。

根据“再次尝试”的含义，您可能会为新请求获得新的 SPWeb 副本。

`AllowUnsafeUpdates`像使用 try/finally 一样，对非常范围的代码片段保持 tru 是一种很好的做法。可能有其他代码将在同一请求期间运行，并且在不应允许时错误地更新对象。

# jquery - 寻找复选框设计的 JQuery 解决方案

> ID：11355652
> 
> 赞同：-2
> 
> 时间：2012-07-06T04:03:04.637
> 
> 标签：jquery, css, checkbox

我正在尝试创建一个复选框组，可以在其中单击选项名称以切换选中和未选中状态。此外，我根本不想显示方框和刻度线。只是选项名称在单击以显示“已选中”和“未选中”状态时会更改颜色。有谁知道用 JQuery 做到这一点的简单方法？提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T04:04:40.720

嘿，现在检查这个网址

[http://line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons](http://line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons)

# javascript - 使用插入 html 的 ajax 调用保持 div 的高度静态

> ID：11355653
> 
> 赞同：0
> 
> 时间：2012-07-06T04:03:08.757
> 
> 标签：javascript, css, ajax, styles

我有一个 Ajax 调用，它插入一个带有多个 p 元素的 div 和文本。问题是每当我单击按钮以获取 Ajax 时，整个容器的高度都会发生变化，因为我没有在我的 css 样式表中为容器设置静态高度（尽管我已经设置了特定宽度）。

每当我单击按钮加载 Ajax 信息时，都会有一个短暂的瞬间，您可以看到容器变得非常小，因为我只是将容器中的文本替换为其他文本。有没有一个简单的css解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:07:37.117

利用

```
min-height:400px;//Whatever height you want it to not get smaller than
height:400px;//Whatever height you want the div to be 
```

这样它就不会变小并使用

```
overflow:auto; 
```

这样它就不会变大，而是在收到比预期更多的内容时变得可滚动。使用 overflow:auto 只会在内容溢出时显示滚动条。即，在需要时。

万一你想要滚动条不管有什么用

`overflow:scroll;`//默认情况下会出现滚动条，即使不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:05:20.223

您可以考虑使用 CSS`min-height`属性，这将防止容器缩小到太短的尺寸 ( [http://www.w3schools.com/cssref/pr_dim_min-height.asp](http://www.w3schools.com/cssref/pr_dim_min-height.asp) )。例如，

```
#myContainer {
  min-height: 600px;
} 
```

# sql - 从跨多个数据库的数据创建视图

> ID：11355656
> 
> 赞同：-1
> 
> 时间：2012-07-06T04:03:40.190
> 
> 标签：sql, database, tsql, consolidation

经过一番搜索，我找不到涵盖我的问题的好答案。我正在整合大约 100 个数据库。结构相同，它们都在同一台服务器上。所有数据库都有一个包含登录信息的表。

我们创建了一个核心数据库，其中包含来自其他数据库的所有连接信息。现在我们需要在核心数据库中创建一个视图，其中包含来自所有数据库的所有登录凭据。这意味着我们需要使用循环遍历所有数据库并选择用户名和密码。

欢迎任何想法或建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:26:04.173

一种可能的解决方案是创建一个存储过程

```
DECLARE @sql varchar(max), @Database1 varchar(300)
set @Database1 = 'tempdb'
SET @sql=' 
USE '+@Database1+'; 
IF EXISTS (SELECT 1 FROM SYS.VIEWS WHERE NAME =''test_view'')
BEGIN
DROP VIEW test_view
PRINT ''VIEW EXISTS''
END'
PRINT @sql
EXEC(@sql)    

declare @sql1 varchar(max)

// Modify below query as per your requirement its just for an idea

select @sql1 = IsNull(@sql1 + 'union all ','') +
              'select * from ' + name + '.dbo.tblUser'
from   sys.databases
where  name like 'DbNamePrefix%'

set @sql1 = 'create view dbo.YourView as ' + @sql1
exec (@sql1) 
```

制作数据库作业并根据您的要求安排它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:51:14.397

要引用第二个数据库中的表，请使用：[DBName].[dbo].[TableName] 例如

```
CREATE VIEW [dbo].[ViewName]
as
select 
a.ID, 
a.Name, 
b.Address
from TableA a
join SecondDBName.dbo.Table b
on ... ---Remaining code here... 
```

注意：这仅适用于同一台服务器 - 如果您的数据库位于不同的服务器上，那么您将需要创建一个链接服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:10:58.943

看看这个。这可以成为您问题的答案之一吗？ [http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)

# iphone - 我可以在方法中进行初始化吗？

> ID：11355658
> 
> 赞同：0
> 
> 时间：2012-07-06T04:03:46.057
> 
> 标签：iphone, objective-c, viewdidload, cs193p

例如，我有一个这样的方法：

```
- (void)addToRecents:(NSDictionary *)photo
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSMutableArray *recents = [[defaults objectForKey:@"RecentPhotos"] mutableCopy];
    if(!recents) recents = [NSMutableArray array];
    [recents addObject:photo];
    [defaults setObject:recents forKey:@"RecentPhotos"];
    [defaults synchronize];
    self.recentPhotos = [[NSUserDefaults standardUserDefaults] objectForKey:@"RecentPhotos"];    
    [self.tableView reloadData];
} 
```

然后它总是无法显示我想要的表格视图。我使用 nslog 打印一些东西，`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`看看这个方法是否真的被调用了。然后我发现它从来没有被调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:33:33.470

我自己在这部分上花了几个小时。我希望有几条评论会有所帮助：

1-您实际上是在向后使用 NSUserDefaults。我会不断地将图像添加到本地数组中，然后将该数组设置为首选项（而不是更新 NSUserDefaults 并将其复制到本地数组）。只是更符合逻辑。

2-我不认为代码中重新加载的位置是问题所在。我刚刚在我的代码上对其进行了测试，它运行良好。出于某种原因，当我在 IB 中移动 VC 时，它断开了 Source 和 delegate 的连接。所以我不得不重新连接它们。我想知道这是不是发生在你身上。

3- 在分配过程中提示：一旦将 VC 嵌入 TabBarController 中，请考虑重新加载表的事件顺序 :-)

知识库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:03:46.743

我根据我过去在 C 或 Java 方面的经验做了上述原因，我认为你进行设置或初始化的地方并不重要，只要你只是在任何你想要的地方做它，即使是在像这些行这样的方法或函数中：

```
self.recentPhotos = [[NSUserDefaults standardUserDefaults] objectForKey:@"RecentPhotos"];    
[self.tableView reloadData]; 
```

然而它根本没有用。我花了大约一个小时来检查所有其他的东西来弄清楚，因为我一直认为我在做正确的事情，就像在 Java 中一样。

然后我尝试将它们放在 viewDidLoad() 中，它起作用了。我再次观看了斯坦福关于 viewController 生命周期的讲座，正如 Paul 所说：最好在 vieDidLoad() 中进行所有设置或初始化。现在我了解了这种差异。

这只是我自己完成作业 4 的经验。

希望它会帮助其他人不要在这方面浪费太多时间。谢谢

# facebook - 我们可以直接显示 Facebook 权限对话框吗（我的应用程序已经授权）

> ID：11355669
> 
> 赞同：0
> 
> 时间：2012-07-06T04:04:41.423
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-authentication

基本上我想检查用户授予我的应用程序**的扩展权限。**如果用户没有给出我想要的任何一个权限，那么**我希望用户被重定向到 facebook 权限对话框（不是首先出现的 oauth 对话框）**。是否可以使用 php 或 js sdk（**php 首选**）来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:52:42.153

> 然后我希望将用户重定向到 facebook 权限对话框（不是首先出现的 oauth 对话框）。

首先，这里有一个误解：那**只是****一个**对话框，它只在适当的地方分成两页。

因此，当请求（更多）扩展权限时，您只需以*正常*方式调用 OAuth 对话框（PHP SDK 中的 getLoginURL，JS SDK 中的 FB.login）——如果用户已经授权您的应用程序并且只需要新的扩展权限，然后只自动显示对话框的第二页。

# ios - 如何在我的应用程序中实现 UITapGestureRecognizer

> ID：11355671
> 
> 赞同：49
> 
> 时间：2012-07-06T04:04:59.877
> 
> 标签：ios, objective-c, user-interface, uigesturerecognizer, uitapgesturerecognizer

我对编程和Objective C很陌生。我想知道如何制作一个具有空白屏幕和一分钟计时器的应用程序。你应该尽可能快地点击，只要你可以。我想知道如何在`UITapGestureRecognizer`我的代码中实现。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-07-06T04:08:42.620

这是有关如何在课堂上实现手势识别器的分步指南：

1.  使您的课程符合`UIGestureRecognizerDelegate`协议。

2.  实例化手势识别器。例如，要实例化 a `UITapGestureRecognizer`，我们将执行以下操作：

    ```
    UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapFrom:)]; 
    ```

    在这里，action 是处理手势的选择器。在这里，我们的选择器 handleTapFrom 看起来像：

    ```
    - (void) handleTapFrom: (UITapGestureRecognizer *)recognizer
    {
        //Code to handle the gesture
    } 
    ```

    选择器的参数是手势识别器。我们可以使用这个手势识别器来访问它的属性，例如，我们可以找到手势识别器的状态，比如, `UIGestureRecognizerStateBegan`,`UIGestureRecognizerStateEnded`等。

3.  在实例化的手势识别器上设置所需的属性。例如，对于 a `UITapGestureRecognizer`，我们可以设置属性`numberOfTapsRequired`和`numberOfTouchesRequired`。

4.  将手势识别器添加到要检测手势的视图中。在我们的示例代码中（我将分享该代码供您参考），我们将使用以下代码行将手势识别器添加到 imageView：

    ```
    [self.imageView addGestureRecognizer:tapGestureRecognizer]; 
    ```

5.  将手势识别器添加到视图后，设置手势识别器的委托，即处理所有手势识别器内容的类。在我们的示例代码中，它会像：

    ```
    tapGestureRecognizer.delegate = self; 
    ```

    **注意：**在将手势识别器添加到视图后分配委托。否则，将不会调用 action 方法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-12T14:08:42.130

**斯威夫特**的例子：

```
import UIKit

class ViewController: UIViewController {

    @IBOutlet var myUIImageView: UIImageView!

    override func viewDidLoad() {
        super.viewDidLoad()

        let singleTap: UITapGestureRecognizer = UITapGestureRecognizer(target: self, action: "myUIImageViewTapped:")
        singleTap.numberOfTapsRequired = 1
        singleTap.numberOfTouchesRequired = 1
        self.myUIImageView.addGestureRecognizer(singleTap)
        self.myUIImageView.userInteractionEnabled = true
    }

    func myUIImageViewTapped(recognizer: UITapGestureRecognizer) {
        if(recognizer.state == UIGestureRecognizerState.Ended){
            println("myUIImageView has been tapped by the user.")
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-13T09:11:12.110

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideKeyboard)];
[self.tableView addGestureRecognizer:gestureRecognizer];
self.tableView.userInteractionEnabled = YES;
gestureRecognizer.cancelsTouchesInView = NO;  // this prevents the gesture recognizers to 'block' touches 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-23T11:41:40.470

适用于 Xcode 11.4、Swift 5

```
class ViewController: UIViewController {

    @IBOutlet weak var targetView: UIView!
    override func viewDidLoad() {
        super.viewDidLoad()
        let tap = UITapGestureRecognizer(target: self, action: #selector(self.touchCallback(_:)))
        self.targetView.addGestureRecognizer(tap)
    }

    @objc func touchCallback(_ sender: UITapGestureRecognizer? = nil) {
        if(sender?.state == .ended) {
            print("tapped")
        }
    }
}

// If you want to touch start, available touchesBegan
class ViewController: UIViewController {

    @IBOutlet weak var targetView: UIView!
    override func viewDidLoad() {
        super.viewDidLoad()
    }

    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
          for touch in touches {
              let location = touch.location(in: targetView)
              print(location)
          }
      }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-22T06:38:05.303

如果您正在使用 Swift (iOS9) 和 SpriteKit，请尝试以下操作。

```
class GameScene: SKScene {
    override func didMoveToView(view: SKView) {
        let singleTap = UITapGestureRecognizer(target:self, action:#selector(self.handleSingleTap:))
        singleTap.numberOfTouchesRequired = 1
        singleTap.addTarget(self, action:#selector(self.handleSingleTap))
        view.userInteractionEnabled = true
        view.addGestureRecognizer(singleTap)
    }
    //event handler
    func handleSingleTap(sender:UITapGestureRecognizer){
        print("tapped")
    }
} 
```

# asp.net - 试图从一个表的主键列中获取值并将其输入到另一个表的外键列中

> ID：11355672
> 
> 赞同：0
> 
> 时间：2012-07-06T04:05:00.297
> 
> 标签：asp.net, sql, database

所以我有四个表，它们通过主键和外键链接。我有一个用于输入信息的表单，并且我已将我的主键列设置为在 Access 数据库中自动填充。如何从自动填充列中获取这些值并将其输入到我想要的另一个表中。这是我的插入代码..

```
 sqlString = "INSERT INTO [Members] ([MemberName], [Child], [Adult], [PaymentMethod]) VALUES ('" + MemberName + "','" + Child + "','" + Adult + "','" + PaymentMethod + "')"
    cmd = New OleDbCommand(sqlString, myConn)
    cmd.ExecuteNonQuery() 
```

这就是我用来从我的表单中输入信息并且它有效的方法。现在有另一列没有输入任何内容，因为它是外键列，而我在另一个表中的主键列设置为自动填充数字。如何填写我的外键列以匹配另一个表中的主键列？我希望我解释得很好，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:39:58.983

您必须手动映射外键列。

外键约束将阻止您输入除主键列中的值以外的任何内容。

[http://msdn.microsoft.com/en-us/library/ms175464%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms175464%28v=sql.105%29.aspx)

您可以从与该列对应的另一个表中获取值，以获取自动生成的主键值并将其插入到该表中。

您也可以参考： [外键未填充主键值](https://stackoverflow.com/questions/9046879/foreign-key-not-populating-with-primary-key-values)

# java - 方法名称为 CF 保留字的 Java cfObject

> ID：11355675
> 
> 赞同：2
> 
> 时间：2012-07-06T04:05:18.630
> 
> 标签：java, coldfusion, braintree

我一直在研究 ColdFusion 中的 Braintree 集成。Braintree 不直接支持 CF，但它们提供了一个 Java 库，到目前为止我所做的一切都运行良好......直到现在。似乎某些对象（尤其是搜索功能）具有无法从 CF 访问的方法，我怀疑这是因为它们是 CF 保留字，例如“is”和“contains”。有没有办法解决这个问题？

```
<cfscript>
gate = createObject( "java", "com.braintreegateway.BraintreeGateway" ).init(env,merchant.getMerchantAccountId(), merchant.getMerchantAccountPublicSecret(),merchant.getMerchantAccountPrivateSecret());
req = createObject( "java","com.braintreegateway.CustomerSearchRequest").id().is("#user.getUserId()#");
customer = gate.customer().search(req);
</cfscript> 
```

抛出的错误：无效的 CFML 构造 ... ColdFusion 正在查看以下文本：是

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T07:48:58.450

这表示 CF 编译器中的一个错误。CF 中没有规定不能定义称为`is()`or的方法`this()`，实际上在基本情况下调用它们也没有问题。此代码演示：

```
<!--- Junk.cfc --->
<cfcomponent>
    <cffunction name="is">
        <cfreturn true>
    </cffunction>
    <cffunction name="contains">
        <cfreturn true>
    </cffunction>
</cfcomponent>

<!--- test.cfm --->
<cfset o = new Junk()>

<cfoutput>
    #o.is()#<br />
    #o.contains()#<br />
</cfoutput> 
```

这 - 可以预见 - 输出：

```
true
true 
```

但是，如果我们向 Junk.cfc 引入一个 init() 方法，我们就会遇到问题，因此：

```
<cffunction name="init">
    <cfreturn this>
</cffunction> 
```

然后相应地调整 test.cfm ：

```
#o.init().is()#<br />
#o.init().contains()#<br /> 
```

这会导致编译器错误：

> 在第 4 行第 19 列发现无效的 CFML 构造。
> 
> ColdFusion 正在查看以下文本：
> 
> 是
> 
> [...]
> 
> Coldfusion.compiler.ParseException：在第 4 行第 19 列发现无效的 CFML 构造。
> 
> ```
> at coldfusion.compiler.cfml40.generateParseException(cfml40.java:12135) 
> ```
> 
> [ETC]

如果没问题，没有正当理由为什么`o.init().is()`不应该`o.is()`是好的。

我建议你[提交一个错误](https://bugbase.adobe.com/)。我会投票给它。

**作为一种解决方法**，如果您使用中间值而不是方法链接，您应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:55:51.153

您可能可以使用[Java 反射 API](http://docs.oracle.com/javase/tutorial/reflect/member/methodInvocation.html)来调用对象的 is() 方法。

我还会打电话给 Adob​​e，看看他们是否会修复它或提供他们自己的解决方法。我可以理解不允许定义您自己的方法或名为“is”的变量，但尝试在这里调用它应该是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T22:31:04.950

这是解决此问题的方法。至少有一个修复程序可以让您启动并运行。

试试这个代码。

```
<cfscript>
    //Get our credentials here, this is a custom private function I have, so your mileage may vary
    credentials = getCredentials();

    //Supply the credentials for the gateway    
    gateway = createObject("java", "com.braintreegateway.BraintreeGateway" ).init(credentials.type, credentials.merchantId, credentials.publicKey, credentials.privateKey);

    //Setup the customer search object  
    customerSearch = createObject("java", "com.braintreegateway.CustomerSearchRequest").id();

    //can't chain the methods here for the contains, since it's a reserved word in cf.  lame.
    customerSearchRequest = customerSearch.contains(arguments.customerId);

    //Build the result here
    result = gateway.customer().search(customerSearchRequest);
</cfscript> 
```

# ruby-on-rails - 如何使用 Datamapper 将模型映射到数据库视图

> ID：11355681
> 
> 赞同：2
> 
> 时间：2012-07-06T04:05:51.953
> 
> 标签：ruby-on-rails, datamapper

这听起来很简单，但是我似乎找不到答案，如何将视图映射到 datamapper 中的模型？如果我删除了我的视图没有的 ID 字段，datamapper 会抱怨，如果我把它留在那里，那么每次我执行一个选择时，它都会说我的列 ID 不存在，因为它是一个视图而不是一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:51:53.953

DataMapper 1.x 没有对视图的原生支持。它期望模型至少有一个属性作为主键。

此主键通常用于指定更新和延迟属性加载。

当您的视图确实有一个具有唯一值的列时，只需`:key => true`在属于该列的属性选项中指定。

无需指定名称为 的属性`:id`。

当您没有具有唯一值的列时，请使用复合主键 (CPK)。一组形成唯一值组合的列：

```
class ModelFromView
  include DataMapper::Resource
  property :key_like_property_a, String, :key => true
  property :key_like_property_b, Integer, :key => true
  property :other_property, Integer 
  ...
end 
```

# c - OpenGL鼠标“锁定”

> ID：11355686
> 
> 赞同：1
> 
> 时间：2012-07-06T04:06:17.977
> 
> 标签：c, opengl, mouse

如何将鼠标“锁定”到某个 OpenGL 窗口。有点像 Minecraft 中的操作方式。GameDev 是一个更好的提问地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:07:10.460

就像罗伯特在评论中所说的那样，OpenGL 实际上并不进行用户输入。

但是，有些库可以将平台相关部分抽象出来，例如[LibSDL](http://www.libsdl.org/)。您可以使用它将鼠标抓住您的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T12:55:23.947

[此处](https://stackoverflow.com/questions/2941324/how-do-i-set-the-position-of-the-mouse-in-java)提出了一个类似的问题，其中程序员使用了一个名为[机器人](http://java.sun.com/javase/6/docs/api/java/awt/Robot.html)的类来更改鼠标位置。

代码：`Robot.moveMouse(x,y)`

这段代码是用java编写的，但是，有几个像机器人这样的类可以做到这一点！

一种选择是不断将鼠标移动到屏幕中心或您想要的任何位置。

# vim - 如何删除每隔一行，并在选择后粘贴已删除的结果？

> ID：11355690
> 
> 赞同：2
> 
> 时间：2012-07-06T04:06:41.467
> 
> 标签：vim

[这是关于删除文件中每隔一行](https://stackoverflow.com/questions/1946738/vim-how-to-delete-every-second-row)的问题的一种后续。

如何在 Vim 中实现：

**前：**

```
aaa
bbb
ccc
ddd
eee
fff 
```

（比如说，它是视觉选择的一部分。）

**后：**

```
aaa
ccc
eee
bbb
ddd
fff 
```

我怎样才能做到这种宏风格（删除每隔一行，但将已删除的行存储到缓冲区，以便按顺序粘贴已删除的行）？

此外，如果您可以在非常方便的视觉选择中执行此操作（解析某个文件）！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:15:32.193

**1.** 当要重新排序的行是缓冲区中唯一存在的行时，可以使用命令

```
:g/^/+m$ 
```

**2.** 通常，当这些行被其他文本包围时，可以选择要重新排序的目标行范围，然后运行

```
:exe"'<,'>g/^/+m"line("'>") 
```

或选择除第一行之外的所有行重新排序，然后运行

```
:'<,'>-g/^/+m'<- 
```

反而。在任何一种情况下，重新排序都可以在一次运行中有效地完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:10:12.473

1.  键入`:let @e=''<CR>`以清空`e`寄存器（假设您不关心它以前的内容）。

2.  将光标放在`aaa`.

3.  键入`qa`（或任何其他字母而不是`a`）来记录您的宏。

4.  键入`j"Edd`向下一行并将其删除，同时将其附加到`e`寄存器。

5.  键入`q`以停止录制

6.  直观地选择整个事物。

7.  使用 应用宏`:'<,'>norm @a<CR>`，这将删除每隔一行。

8.  键入`"ep`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T06:32:33.337

你真的不需要宏。

我们需要一个临时寄存器来将结果放入，比如寄存器`e`（[由 romainl 提议](https://stackoverflow.com/a/11356743/520162)）。

1.  清空寄存器（寄存器必须为空，因为我们将使用大写的寄存器名称，这意味着追加而不是覆盖）
    `:let @e=''``ENTER`
2.  直观地选择要处理的区域（即`aaa`通过的线条`fff`）
3.  每隔一行删除一次并将该行附加到 register `e`：
    `:g/^/+d E`
    现在， register`e`保存已删除的内容
4.  将寄存器粘贴`e`到您需要的地方`"ep`

* * *

**讨论**

*   我们需要在使用它之前清空寄存器，因为我们使用大写的寄存器名称，这意味着附加到寄存器（参见*命名寄存器*一节[`:he registers`](http://vimdoc.sourceforge.net/htmldoc/change.html#registers)）

*   输入[`:he :global`](http://vimdoc.sourceforge.net/htmldoc/repeat.html#:global)go 了解更多关于这个令人难以置信的强大`:g`命令的信息（而且它的用处也不少[`:v`](http://vimdoc.sourceforge.net/htmldoc/repeat.html#:vglobal)

*   不幸的是，99% 的实际答案已经涵盖在您[所](https://stackoverflow.com/a/8336154/520162)引用问题的未接受但很好的答案中。您需要的唯一扩展是累积已删除的行而不是将它们丢弃（确切地说：将最后删除的行存储在默认寄存器中）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T07:12:02.783

试试这个命令：

```
:'<,'>g/^/+m$ 
```

它会将它们移动到文件的末尾。然后，您可以轻松地将它们移回。

# css - 由于上层菜单的高度，它比页面大。如何解决这个问题？

> ID：11355692
> 
> 赞同：0
> 
> 时间：2012-07-06T04:06:50.067
> 
> 标签：css, html, height

具体来说，这段代码：

```
<html>
    <body style="margin: 0px; padding: 0px">
        <div style="width:100%; background-color:#FFDDDD">head</div>
        <div style="height:100%; background-color:#DDFFDD">body</div>
    </body>
</html> 
```

呈现大于窗口，创建永久滚动条：

![渲染站点](../Images/d7b1d24aa43b6b3dbc575bee45a0b653.png)

解决此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:21:39.290

问题是你正在使这个 div 100% 高度：

```
<div style="height:100%; background-color:#DDFFDD">body</div> 
```

% 中的 height 属性将使 div 占据其容器的该百分比，在本例中是 HTML `<body>`，因此将 header div 更改为 be`height: 10%`并将 body div 更改为`height: 90%`应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:11:31.667

你可以简单地这样做：

HTML

```
<div class="header"> Header</div>
<div class="main">Main content area</div>​ 
```

CSS

```
body {
    background: yellow;
}

.header {
    height: 30px;
    background: red;
} 
```

看看：http: [//jsfiddle.net/EDWTM/](http://jsfiddle.net/EDWTM/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T04:20:06.093

将背景颜色移动到身体，并失去高度。

```
<html>
    <body style="margin: 0px; padding: 0px; background-color:#DDFFDD">
        <div style="width:100%; background-color:#FFDDDD">head</div>
        <div>body</div>
    </body>
</html> 
```

[http://jsfiddle.net/4XVrW/](http://jsfiddle.net/4XVrW/)

或者，您可以使用边距和绝对定位将标题放在正文上方：

```
<html>
    <body style="margin: 30px 0 0 0; padding: 0px">
        <div style="height: 30px; width:100%; background-color:#FFDDDD; position: absolute; top:0; left: 0;">head</div>
        <div style="height:100%; background-color:#DDFFDD;">body</div>
    </body>
</html> 
```

# ruby-on-rails - Rails - 禁用数据库连接

> ID：11355695
> 
> 赞同：0
> 
> 时间：2012-07-06T04:07:02.827
> 
> 标签：ruby-on-rails

有一个不使用任何数据库的 Rails 3.2.3 Web 应用程序。但尽管如此，如果我使用`gem 'sqllite3'`in`GemFile`我工作得很好。但是如果我`gem 'pg'`在那个文件中使用它会抛出一个错误

```
ActiveRecord::ConnectionNotEstablished 
```

当然，`database.yml`当我使用`postgreSql`or时，我会使用不同的版本`SqlLite3`。

但我绝对不使用任何数据库。

为什么会这样？我应该怎么做才能解决它？以及如何禁用使用数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:12:40.667

请参阅[此处的 SO 问题](https://stackoverflow.com/questions/3954307/rails-3-how-do-i-avoid-database-altogether)，了解如何绕过使用数据库。这比设置一个标志要多一点工作。

# c++ - lnker 在重载运算符上完成编译过程时的 C++ 问题

> ID：11355696
> 
> 赞同：2
> 
> 时间：2012-07-06T04:07:12.903
> 
> 标签：c++, namespaces, operator-overloading, linker-errors

考虑使用以下头文件 (c++)：`myclass.hpp`

```
#ifndef MYCLASSHPP_
#define MYCLASSHPP_

namespace A {
namespace B {
namespace C {

class myclass { /* Something */ };

myclass& operator+(const myclass& mc, int i);

}}}

#endif 
```

考虑实现文件：`myclass.cpp`

```
#include "myclass.hpp"
using namespace A::B::C;

myclass& operator+(const myclass& mc, int i) {
   /* Doing something */
} 
```

考虑主文件：`main.cpp`

```
#include "myclass.hpp"

int main() {
   A::B::C::myclass el = A::B::C::myclass();
   el + 1;
} 
```

好吧，链接器告诉我有一个未定义的引用`A::B::C::operator+(A::B::C::myclass const&, int)`

这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T04:10:50.950

仅仅因为您`using namespace A::B::C`在实现文件中并不意味着其中声明的所有内容都会自动在`A::B::C`命名空间中（否则，如果您有`using`多个命名空间，所有定义都会变得不明确）。

myclass.cpp 应该类似于：

```
namespace A {
namespace B {
namespace C {
    myclass operator+(const myclass& mc, int i) {
        // ...
    }
} 
```

或者（我发现这个更清洁）：

```
using namespace A::B::C;

myclass A::B::C::operator+(const myclass& mc, int i) {
    // ...
} 
```

目前，编译器认为您已经`operator+`在命名空间中声明了一个函数`A::B::C`，并定义了一个根本不在命名空间中的*不同函数，从而导致您的链接错误。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T04:11:19.063

`using namespace`指令更改名称搜索顺序。它不会改变定义的放置位置。

您`operator+`在错误的命名空间中定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T04:22:14.250

“using”关键字只对解析被调用的方法有用。定义方法时不能使用。您的语句实际上只是定义了全局命名空间中的方法。你的定义应该是：

```
A::B::C::myclass A::B::C::operator+(const myclass& mc, int i) {
   /* Doing something */
} 
```

当您调用该方法时，以下两个都做同样的事情：

```
using namespace A::B::C;
myclass tmp;
tmp + 1; 
```

-或者-

```
A::B::C::myclass tmp;
tmp + 1; 
```

希望这可以帮助...

# iphone - 如何从 SQLite 检索图像并在 UIImageView 中显示

> ID：11355699
> 
> 赞同：1
> 
> 时间：2012-07-06T04:07:30.800
> 
> 标签：iphone, objective-c, sqlite, xcode4.3

我将所有图像保存在 Xcode 中的一个文件夹中，并根据文件夹中的名称命名 SQLite 中的所有链接。我在 SQLite 中使用 BLOB 来存储图像。如何让我的 UIImage 从 SQLite 显示我想要的图像？假设从 TableView 中按下字符名称后会显示它，它将移动到 ViewController 以显示图像。

这是 AppDelegate.m 文件：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
// Setup some globals
databaseName = @"Database.sql";

// Get the path to the documents directory and append the databaseName
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

// Execute the "checkAndCreateDatabase" function
[self checkAndCreateDatabase];

// Query the database for all records and construct the array
[self readCharactersFromDatabase];
[self readChaptersFromDatabase];
[self readThemesFromDatabase];
//[self readPlotsFromDatabase];

// Configure and show the window
[window addSubview:[navigationController view]];
[window makeKeyAndVisible];
}

-(void) readCharactersFromDatabase {
// Setup the database object
sqlite3 *database;

// Init the Array
chars = [[NSMutableArray alloc] init];

// Open the database from the users filessytem
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    // Setup the SQL Statement and compile it for faster access
    const char *sqlStatement = "select * from Character";
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        // Loop through the results and add them to the feeds array
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
            // Read the data from the result row
            NSString *aName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
            NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];
            UIImage *aImage = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];

            // Create a new object with the data from the database
            Character *characters = [[Character alloc] initWithName:aName description:aDescription image:aImage];

            // Add the object to the Array
            [chars addObject:characters];

            //[characters release];
        }
    }
    // Release the compiled statement from memory
    sqlite3_finalize(compiledStatement);

}
sqlite3_close(database);

}

@end 
```

这是 TableViewController.m 文件：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return [appDelegate.chaps count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Set up the cell

Chapter *chapters = (Chapter *)[appDelegate.chaps objectAtIndex:indexPath.row];

cell.textLabel.text = chapters.name;
return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// Navigation logic -- create and push a new view controller

Chapter *chapters = [appDelegate.chaps objectAtIndex:indexPath.row];

if(chapView == nil) 
    chapView = [self.storyboard instantiateViewControllerWithIdentifier:@"chapter"];
// self.charView = viewController;

chapView.chapters = chapters;

chapView.chapDes = chapters.description;

[self.navigationController presentModalViewController:chapView animated:YES];

// [charView release];

}

- (void)viewDidLoad {
[super viewDidLoad];
// Uncomment the following line to add the Edit button to the navigation bar.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];  
self.title = @"Chapter Analysis";
}

-(IBAction)backbutton {
ViewController *mainPage = [self.storyboard instantiateViewControllerWithIdentifier:@"mainPage"];

[self.navigationController presentModalViewController:mainPage animated:YES];
}

@end 
```

这是 ViewController.m 文件：

```
// Implement viewDidLoad to do additional setup after loading the view.
- (void)viewDidLoad {
// self.title = characters.name;
charImage.image =  charI;
charDescription.text = charDes;
[super viewDidLoad];
}

-(IBAction)backbutton {
CharacterTableViewController *characterTable = [self.storyboard instantiateViewControllerWithIdentifier:@"characterTable"];

[self.navigationController presentModalViewController:characterTable animated:YES];
}

@end 
```

我不知道错误在哪里以及为什么我根本无法显示任何内容。

编辑

我将用于在 SQLite 中存储图像的变量更改为文本，然后输入图像名称。在 Xcode 中，我有一个图像文件夹，其中包含我需要的所有图像，并且图像的名称与我存储在数据库中的名称相同。我使用这行代码从数据库中检索图像名称并将其显示在 UIImage 中。

```
charView.image = [UIImage imageNamed:characters.image]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:29:26.993

将图像数据保存在数据库中是个坏主意，因为您的数据库文件很有可能损坏。如果要缓存图像，最好使用将这些图像下载并保存到文档文件夹中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:45:05.570

只是你这样设置，我假设你使用`NSData` `UIImagePNGRepresentation`然后使用`sqlite3_column_blob`而不是`sqlite3_column_text`.

代替 `UIImage *aImage = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];`

设置成这样，希望对你有帮助。

```
NSData *imageDataFromDb = [[NSData alloc]initWithBytes:sqlite3_column_blob(compiledStatement, 3) length:sqlite3_column_bytes(compiledStatement, 3)]; 
```

# java - 带类型参数的接口有什么用？

> ID：11355702
> 
> 赞同：3
> 
> 时间：2012-07-06T04:07:34.697
> 
> 标签：java, generics, interface

带类型参数的接口有什么用？它们的真正用途是什么？我的理解是否正确。假设我有这个界面

```
public interface Moveable <Person>{
    void move(double x, double z);
} 
```

这是否意味着只有类型为 Person 的对象才能使用 / 实现 this？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T04:12:36.347

这不是典型的模式，在您的情况下，类型参数没有做任何事情。这是一个更好的例子。

```
public interface Movable<T> {
    T move();
} 
```

现在您的代码将返回实现者指定的类型，而不是仅仅说 move 总是返回对象或其他更通用的类。

编辑：

```
public MyMover implements Movable<Truck> {
    public Truck move(){
        return new Truck();
    }
} 
```

您不能真正将接口的实现者限制为某些类型。如果你愿意，你可以[通过包](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html "按包装")来限制它。也许抽象类更适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:21:27.243

`Does this mean that only objects that are Type Person can use implement this?`

不，不完全是，在接口中使用泛型就像在普通类中使用一样。它指定接口将包含/操作的对象类型。

想想你如何声明一个`ArrayList`. 您需要指定`ArrayList`将包含哪种类型的对象，因为它以不同方式处理每种类型的对象。

在您的接口声明中，您说实现此接口的类将仅保存/操作类型的对象`Person`。

有关泛型的更多信息，请查看此链接：

[甲骨文：泛型](http://www.oracle.com/technetwork/articles/javase/generics-136597.html)

# algorithm - 快速傅里叶变换多项式乘法？

> ID：11355705
> 
> 赞同：2
> 
> 时间：2012-07-06T04:07:39.580
> 
> 标签：algorithm, math, computer-science, fft

我正在使用 FFT 在某些点评估多项式，以便可以使用值表示来表示它。（表示为等于其度数的点数）

但是，要将两个 d 次多项式相乘，我需要在 2d + 1 个点处同时评估这两个多项式。然而，使用 FFT 进行评估（乘以第 d 个单位根）仅评估 d 点处的多项式。因此，如果 FFT 仅在 d 点评估多项式，它如何用于评估多项式评估？（相对于 2d + 1）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:24:09.870

您可以选择您评估的 -1 的第 n 个根。如果您需要 2d-1 点（我怀疑您这样做），只需使用 -1 的 (2d-1)-th 根。实际上，您通常会使用 -1 的第 2^k 个根，其中 2^k 是 2 >= 2d-1 的第一次幂，因为对于 2 的幂更容易获得快速 FFT。复杂性仍然是 O(d log d)，因为 O 的定义允许常数因子。

# javascript - jquery克隆表单单个字段并增加ID

> ID：11355708
> 
> 赞同：2
> 
> 时间：2012-07-06T04:07:57.520
> 
> 标签：javascript, jquery

我有一个文件，我需要使用克隆按钮和删除按钮来删除克隆文件，我只制作了这个简单的脚本，但我相信它包含一些错误，因为它不起作用:)

**HTML**

```
<form method="post">
    <div id="fileds">
    <select name="lang" id='lang'>
    <option>select language</option>
    </select>
     </div>
    </form>
    <div class="actions">
        <button class="clone">Clone</button> 
        <button class="remove">Remove</button>
    </div> 
```

**JS**

```
$(function(){
    var regex = /^(.*)(\d)+$/i;
    var cloneIndex = $("#lang").length;

    $("button.clone").live("click", function(){
        $(this).parents("#lang").clone()
            .appendTo(".fileds")
            .attr("id", "lang" +  cloneIndex)
            .find("*").each(function() {
                var id = this.id || "";
                var match = id.match(regex) || [];
                if (match.length == 3) {
                    this.id = match[1] + (cloneIndex);
                }
        });
        cloneIndex++;
    });

}); 
```

我也没有找到如何为删除按钮编写删除代码

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:15:45.177

1)`#lang`不是父级`.clone`

2）`.fields`应该是`#field`这样和ID

这段代码应该可以工作。现场[演示](http://jsfiddle.net/Bhu52/3/)

```
$(function() {
    var counter = 1;

    $(".clone").live("click", function() {
        $("#lang:first").clone().appendTo("#fileds").addClass("lang" + counter);
        counter++
    });

    $(".remove").live('click', function() {
        if (counter > 1) { //Only apply if the lang field is more than 1
            counter = counter - 1;
            $("#lang:last").remove();
        }
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:20:17.937

`lang`不是按钮的父级，我为删除按钮添加了一个类和一个处理程序，试试这个：

```
$(function(){
    $(".clone").on("click", function() { // you can use `on` instead of live which is deprecated 
        var cloneIndex = $(".lang").length; // you can find the the current length of `.lang` within the handler  
        $(".lang:last").clone() // clones the last element with class of `lang`
            .attr("id", "lang" +  cloneIndex)
            .appendTo("#fileds") // change this to id selector
        });
     $("button.remove").on("click", function(){ // '.remove' click handler
         $(".lang:last").remove()
     })  
}); 
```

[**演示**](http://jsfiddle.net/pkNe3/1/)

# ios - 如何在 ios 中原生播放 youtube 视频列表

> ID：11355709
> 
> 赞同：2
> 
> 时间：2012-07-06T04:07:58.787
> 
> 标签：ios, uiwebview, youtube

我需要在 iphone 应用程序中播放 youtube 视频列表。我做了一个快速的研究，但仍然找不到答案。大多数答案都是关于通过在 HTML 页面中嵌入 youtube url 并将其加载到 UIWebview 中来在 iOS 中播放单个 youtube 视频。但这似乎不是播放列表的方式。但我想这是可能的，因为有些应用程序可以做到这一点。

更新：我设法使用 iframe 方法在 UIWebView 中播放列表，但这不是我打算做的。我需要播放视频而不是全屏模式。反正有这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:44:15.367

使用 UIWebView 的内部[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006953)，可以通过将视频的 URL 存储在数组中并在 iFrame 的 javascript 内部发送完成事件时递增数组的对象位置来逐个加载视频。此处记录了 iFrame 方法，[此处显示](https://developers.google.com/youtube/iframe_api_reference)[了](http://iphoneincubator.com/blog/windows-views/how-to-inject-javascript-functions-into-a-uiwebview)使用 javascript 注入 webview 的方法。

至于非内联视频播放（仅全屏），`allowsInlineMediaPlayback`在 UIWebView 上设置为 NO。

# sql - 使用 SQLDeveloper 在 CI oci8 上查询结果为空，它返回值

> ID：11355720
> 
> 赞同：0
> 
> 时间：2012-07-06T04:10:00.827
> 
> 标签：sql, oracle, codeigniter, oracle-call-interface

我对 C 的查询有问题，我使用的是 oci8 驱动程序。这是我的查询：

```
SELECT *
FROM employee
WHERE FIRST_NAME like '%BRUCEE%' AND BIRTH_DATE like '28-DEC-72' 
```

在 SQLDeveloper 中，我执行查询，它有一个输出，但是当我通过 CI 执行它时，我得到一个返回的空数组。

FIRSTNAME = VARCHAR2 BIRTH_DATE = DATE (DD-MON-YY)

有人可以帮我解决这个 CI 查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:18:26.593

这可能是不同工具`NLS_DATE_FORMAT`为会话设置不同的问题。尝试使用 ANSI 日期文字来避免任何可能的转换问题：

```
SELECT *
FROM employee
WHERE FIRST_NAME like '%BRUCEE%'
  AND trunc(BIRTH_DATE) = date '1972-12-28' 
```

# ios - Retina Display 图像看起来模糊不清。没有理由为什么？

> ID：11355722
> 
> 赞同：3
> 
> 时间：2012-07-06T04:10:44.997
> 
> 标签：ios, cocos2d-iphone

我是一名`Cocos2d`游戏开发者。我正在使用视网膜显示图像开发游戏。

我使用 zwoptex 创建了带有和不带有 HD 后缀的纹理文件。

我已经添加了那些 zwoptex plist 纹理文件，`app-delegate`就像`[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Background.plist"];` 我启用了视网膜显示器一样`YES` `[director enableRetinaDisplay:YES];`。

我在任何我想使用的地方都使用了 plist 中的 png 文件 `ccsprite *background = [CCSprite spriteWithSpriteFrameName:@"sample.png"];`。

我包含的所有这些 png 文件都是具有大小`960*640`和`480 * 320`. 但是当我在模拟器或 iPhone 中运行游戏时，图像毫无理由地看起来很模糊。任何人请帮我解决这个问题......

*（以下图片作为示例发布在评论中。）*

![在此处输入图像描述](../Images/93efc60fa93718f320db6161cdc22c8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:58:05.117

cocos2d 默认对精灵应用抗锯齿。您需要将其关闭：

```
[background.texture setAliasTexParameters]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:10:33.430

您发布的屏幕截图（我冒昧地将其添加到您的问题中）显示它是从 iPhone 模拟器而不是 iPhone (Retina) 模拟器中获取的。因此它不会使用高清图像。

运行 iPhone 模拟器后，转到 Hardware -> Device 菜单并选择**iPhone (Retina)**作为设备。然后重新启动您的应用程序。

另请注意，无论 cocos2d 或您的 Mac 中的设置如何，iPhone 模拟器都只会以 16 位的颜色深度渲染游戏。出于性能原因，iOS Simulator 渲染器仅限于 16 位渲染（它只使用软件渲染，没有硬件加速）。只有在实际设备上观看游戏，您才能对图像质量做出判断。

要测试游戏是否实际加载了高清资源或出于某种原因只加载了标清图像，请尝试在没有标清图像的情况下运行它。如果游戏尝试加载 SD 图像，则会导致错误。如果不是，它正在加载高清图像，并且“模糊问题”有不同的原因。您还可以通过将 NSLog 语句添加到 CCFileUtil 类方法 fullPathFromRelativePath 来记录加载的文件，该方法执行文件名更改以尽可能加载 -hd 图像。

您会发现，即使是对精灵应用极少量的缩放或旋转也可能使其看起来模糊，因此请检查您是否碰巧这样做。混合模式的任何变化（使用 ccBlendFunc）也可能导致图像模糊。还要检查您的图像是否完全不透明（不透明度 == 255）。

# javascript - 使用带有 GWT 的 JavaScript 获取用户位置，但变量未通过

> ID：11355728
> 
> 赞同：1
> 
> 时间：2012-07-06T04:11:26.160
> 
> 标签：javascript, variables, geolocation

我有一个在 java 代码中使用 javascript 的简单代码（使用 google 的 GWT），所以我要做的就是获取用户的纬度并将该数字传递回 Java 代码，以便我可以对其进行一些计算。

但是，我无法将变量 x= position.coords.latitude 返回到我的 Java 代码，因为即使当我调用 alert(x) 时，它在我的屏幕上显示正确的纬度，当我尝试返回它时，x仍然为空，没有任何反应。

```
public static native Number findlatitude() /*-{
    var x;
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            x = position.coords.latitude;
            alert(x);
        });
    }
    return x;
}-*/; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:45:18.220

您可以分配 x 的值，而不是从函数返回 x 的值

```
position.coords.latitude 
```

到一个可以被调用函数访问的变量。这样，分配给该变量的值将持续存在。像这样的东西： **编辑**

```
var b;
function callingFunction(){
    findLocation();
    //your stuff
}
function floc(position){
    b = position.coords.longitude;
}
function findLocation(){
    navigator.geolocation.getCurrentPosition(floc);
}

callingFunction(); 
```

# c++ - 使用 SetParent 将窗口嵌入外部进程的各种问题

> ID：11355730
> 
> 赞同：1
> 
> 时间：2012-07-06T04:11:44.287
> 
> 标签：c++, windows, external, window-management

> **可能重复：**
> [使用 SetParent 将 HWND 嵌入到外部进程中](https://stackoverflow.com/questions/170800/embedding-hwnd-into-external-process-using-setparent)

我正在尝试使用该函数将我的进程中的一个窗口嵌入到外部进程的窗口中，`SetParent`并且遇到了一些我希望有人可以帮助我解决的问题。首先，这是我目前将窗口嵌入应用程序的概述：

```
WND myWindow; //Handle to my application window
HWND externalWindow; //Handle to external application window

SetParent(myWindow,externalWindow);

//Remove WS_POPUP style and add WS_CHILD style
DWORD style = GetWindowLong(myWindow,GWL_STYLE);
style = style & ~(WS_POPUP);
style = style | WS_CHILD;
SetWindowLong(myWindow,GWL_STYLE,style); 
```

此代码有效，我的窗口出现在其他应用程序中，但引入了以下问题：

*   当我的窗口获得输入焦点时，外部进程的主应用程序窗口失去焦点（即标题栏改变颜色）。
*   当我的窗口有焦点时，主应用程序的键盘快捷键命令不起作用。

有人知道这些问题的解决方法吗？我希望我的窗口被视为主应用程序的另一个子窗口。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:36:27.280

> 当我的窗口获得输入焦点时，外部进程的主应用程序窗口失去焦点（即标题栏改变颜色）。

您需要使用[`AttachThreadInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681956.aspx)将进程的线程附加到主机进程的输入队列。除了在所有附加线程之间同步消息处理之外，这还使它们共享焦点、异步键状态、激活和其他与输入相关的属性。

> 当我的窗口有焦点时，主应用程序的键盘快捷键命令不起作用。

当您的窗口具有键盘焦点时，拥有您的窗口的线程会接收来自系统的所有键盘消息。如果您需要主窗口的 UI 线程来处理加速器，您必须以某种方式将键盘输入路由到该线程以进行预处理。您如何执行此操作很大程度上取决于您用于应用程序的 UI 技术以及您需要如何处理加速器。

构建跨不同进程中的多个线程的用户界面是困难的，并且存在许多陷阱。

# android - 如何以编程方式在 Android 应用程序中播放忙音

> ID：11355733
> 
> 赞同：-1
> 
> 时间：2012-07-06T04:12:13.243
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我是android应用程序开发的新手。我的问题是我想制作一个应用程序，如果我正在呼叫某个人而不是那个时候如果有人很忙，所以我们通常会听到忙音，现在我想以编程方式制作这样一个应用程序来代替那个忙音 应该播放我选择的歌曲。我用谷歌搜索了这个查询，但找不到关于这个问题的任何解决方案。我想知道在android中是否有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:03:41.580

你不能。占线信号是由电话网络生成的，而不是由 Android 生成的。

# c++ - Opencv 2.4.2 代码解释-人脸识别

> ID：11355738
> 
> 赞同：6
> 
> 时间：2012-07-06T04:12:58.530
> 
> 标签：c++, opencv, computer-vision, face-recognition

我参考了OpenCV提供的文档制作了一个人脸识别程序，它可以识别多个人脸并且工作正常。在文档中，他们制作了椭圆来突出面部。我不明白的是他们如何计算椭圆的中心，他们计算如下

```
for( int i = 0; i < faces.size(); i++ )
{
   Point center(faces[i].x+faces[i].width*0.5,faces[i].y+faces[i].height*0.5);
   //more code follows drawing the ellipse 
```

他们使用的面矢量产生如下

```
face_cascade.detectMultiScale(frame_gray,faces,1.1,2,0|CV_HAAR_SCALE_IMAGE,cv::Size(30,30)) 
```

文档即程序在链接中给出

[http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)

我想知道他们是如何计算椭圆的中心的，如果我想画一个矩形而不是圆形，我该怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T05:09:10.123

检测到的人脸以一组围绕人脸的矩形返回。正如文档所说，输出是`Vector of rectangles where each rectangle contains the detected object.`

所以一个矩形由 组成`[ initial x, initial y, width, height ]`。所以你可以通过 找到它的中心`( x + width*0.5 , y + height*0.5 )`。这个中心对于椭圆也是一样的。

如果要绘制矩形，请使用`rectangle`函数。请参阅[文档](http://docs.opencv.org/modules/core/doc/drawing_functions.html?highlight=rectangle#rectangle)。

函数中的参数如下：

```
pt1 = ( x , y )

pt2 = ( x + width , y + height ) 
```

将画线椭圆更改为以下行：

```
rectangle(frame,Point (faces[i].x,faces[i].y),Point (faces[i].x+faces[i].width, faces[i].y+faces[i].height),Scalar(255,0,255),4,8,0); 
```

结果如下：

![在此处输入图像描述](../Images/d621b6cec35a2cc0885f8a52e3b255ee.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T15:20:25.060

顺便说一句，OpenCV 2.4.2 包含人脸识别。以下是结合人脸检测（使用 cv::CascadeClassifier）和人脸识别（使用 cv::FaceRecognizer）的教程和完整源代码示例：

*   [http://docs.opencv.org/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html](http://docs.opencv.org/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html)

既然你要求人脸识别。它还展示了如何进行人脸检测，因此它也可能很有趣。

# java - 有没有办法在不使用多线程的情况下制作多客户端服务器应用程序？

> ID：11355742
> 
> 赞同：0
> 
> 时间：2012-07-06T04:13:40.747
> 
> 标签：java

我正在用 Java 制作一个多客户端服务器聊天应用程序。

有没有办法不使用多线程（每个客户端一个线程）？
因为我的应用是在手机上运行的，所以多线程会不会太慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:30:20.367

我猜你误解了这个概念。打算在移动设备上运行的聊天应用程序通常如下工作：

1.  您将拥有一个**不在**移动应用程序中的聊天服务器，托管在某处。这将与不同移动设备上的客户端应用程序进行通信。
2.  在移动客户端应用程序中，您将连接到聊天服务器并相应地处理数据。这种通信一般是通过套接字连接来完成的。
3.  在这里，每个应用程序都是单独运行的，因此您不需要***移动****应用程序中的多线程，*除非您的应用程序中的任何其他功能都需要多线程。您可以将每个应用程序视为连接在服务器套接字上的不同线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:38:34.937

对于非移动应用程序，有些人使用很棒的[Netty](https://netty.io/)客户端-服务器（我也是）。可能此服务器的一些想法可以帮助您创建正确的架构:)

# .net - 在 c++/cli 中将 std::string 或 string^ 转换为字节数组

> ID：11355743
> 
> 赞同：1
> 
> 时间：2012-07-06T04:13:45.130
> 
> 标签：.net, string, sockets, c++-cli, tcpclient

我知道这是一个常见问题，对于将 std::string 或 String^ 转换为字节数组以写入流以进行 tcp 通信，我还没有明确的答案。

这是我尝试过的

```
bool CTcpCommunication::WriteBytes(const std::string& rdatastr)
{
  bool retVal = false;

  try
  {
    if (static_cast<NetworkStream^>(stream) != nullptr)
    {
      array<Byte>^data = System::Text::Encoding::ASCII->GetBytes(rdatastr); 
      stream->Write( data, 0, data->Length ); 
    }
  }
  catch(Exception^)
  {
    // Ignore, just return false
  }
  return retVal;
} 
```

我知道 GetBytes 在这里不起作用，我还检查了将 std:string 转换为 .NET String 的编组选项，但没有发现任何问题。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:28:25.137

编码已经正确，无需转换。只需复制：

```
array<Byte>^ data = gcnew array<Byte>(rdatastr.size());
System::Runtime::InteropServices::Marshal::Copy(IntPtr(&rdatastr[0]), data, 0, rdatastr.size()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-23T01:19:34.857

这个方法怎么样：

```
String ^sTemp;
array<Byte> ^TxData;

sTemp = "Hello";
TxData = System::Text::Encoding::UTF8->GetBytes(sTemp); 
```

链接：[http ://www.electronic-designer.co.uk/visual-cpp-cli-dot-net/strings/convert-string-to-byte-array](http://www.electronic-designer.co.uk/visual-cpp-cli-dot-net/strings/convert-string-to-byte-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:42:15.717

这对我有用..感谢本

```
IntPtr ptr((void*)rdatastr.data());
array<Byte>^ data = gcnew array<Byte>(rdatastr.size()); 
System::Runtime::InteropServices::Marshal::Copy(ptr, data, 0, rdatastr.size()) 
```

# git - 使用 Git 恢复合并的分支

> ID：11355745
> 
> 赞同：1
> 
> 时间：2012-07-06T04:14:21.870
> 
> 标签：git, branch, rebase

使用我们的 Git 设置，我们有以下永久分支： - Master |- Fixes-xx - Release - Develop

开发是我们的开发代码所在的地方。当我们几乎准备好“发布”时，它被合并到“发布”中，我们在最后一刻进行任何额外的更改，然后将其合并到“主”中并用版本标记它。如果在旧版本中发现错误，我们会为其创建一个单独的分支，以便可以对其进行修复并赋予相关的版本标签。

我们犯了一个新手错误，我无意中将一些实验性代码合并到版本中（这是基于开发的），然后在将版本合并到修复分支后不久，一位同事犯了类似的错误。所以发布和修复几乎是我们开发分支的副本。

我想回去，最好从历史记录中删除提交，因为这不是编码错误，而是合并时完全搞砸了。但我一直在挖掘，找不到一个明确的方法来使用 rebase 来做到这一点。我找不到如何运行 rebase 来列出我要删除的提交。我们在master中犯了这个错误似乎很容易。

任何有关如何最好地从中恢复的建议表示赞赏。从那时起，这已经是几个提交，所以它们不在脑海中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:34:56.917

您可以像使用 git reset 的任何其他提交一样撤消合并提交。例如，如果您想删除 1、2 或 3 个提交，则简写分别为`git reset HEAD~1`, 。`git reset HEAD~2``git reset HEAD~3`

到目前为止，您将编辑本地提交树。如果要更新远程服务器，则必须执行`git push --force`（小心，`force`标志可能是更多问题的根源）。

由于其他开发人员可能已经取消了有问题的提交，因此由于您将更改远程服务器中的分支头引用，因此他们的 git 客户端可能会丢失跟踪。因此，他们再次获得一致副本的最简单方法是再次访问`git clone`repo。这就是您应该避免使用该`--force`标志的原因。当然，还有很多其他解决方案可以避免再次克隆所有内容。但它们更难解释并且取决于特定情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:30:00.273

我想我的答案就在这里 -[恢复合并所做的更改](https://stackoverflow.com/questions/8323029/revert-back-changes-made-by-merge)

它没有提到变基。对于这种情况，也许 rebase 是不可能的。

# jquery - jQGrid 多行标题

> ID：11355746
> 
> 赞同：3
> 
> 时间：2012-07-06T04:14:25.307
> 
> 标签：jquery, jquery-mobile, jqgrid

我想扩展 jQgrid 为我的 jquery mmobile 应用程序提供多个标题。

像这样的东西：

```
 -------------------------
   |       Main Header      |    <---------------- level 1
    -------------------------
   |   Sub1     |   Sub2    |     <---------------- level 2
    -------------------------
   |  Sub1 | Sub2 |  Sub3   |      <---------------- level 3
    ------------------------- 
```

这个怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:23:13.733

试试下面的代码。

**JS代码：**

```
mygrid = $("#list"),
                colModel, i, cmi, tr = "<tr>", skip = 0, ths;

            mygrid.jqGrid({
                datatype:'local',
                data: mydata,
                colNames:['Inv No','Date','Client A','Client B','Amount','Tax','Total','Closed','Shipped via','Notes'],
                colModel:[
                    {name:'id',index:'id',width:70,align:'center',sorttype: 'int'},
                    {name:'invdate',index:'invdate',width:80, align:'center', sorttype:'date',
                     formatter:'date', formatoptions: {newformat:'d-M-Y'}, datefmt: 'd-M-Y'},
                    {name:'name',index:'name', width:70,
                     cellattr: function(rowId, tv, rawObject, cm, rdata) {
                          if (Number(rowId) < 5) { return ' colspan=2' }} },
                    {name:'nameB',index:'nameB', width:70,
                     cellattr: function(rowId, tv, rawObject, cm, rdata) {
                          if (Number(rowId) < 5) { return ' style="display:none;"' }}},
                    {name:'amount',index:'amount',width:100, formatter:'number', align:'right'},
                    {name:'tax',index:'tax',width:70, formatter:'number', align:'right'},
                    {name:'total',index:'total',width:120, formatter:'number', align:'right'},
                    {name:'closed',index:'closed',width:110,align:'center', formatter: 'checkbox',
                     edittype:'checkbox',editoptions:{value:'Yes:No',defaultValue:'Yes'}},
                    {name:'ship_via',index:'ship_via',width:120,align:'center',formatter:'select',
                     edittype:'select',editoptions:{value:'FE:FedEx;TN:TNT;IN:Intim',defaultValue:'Intime'}},
                    {name:'note',index:'note',width:100,sortable:false}
                ],
                rowNum:10,
                rowList:[5,10,20],
                pager: '#pager',
                gridview:true,
                rownumbers:true,
                sortname: 'invdate',
                viewrecords: true,
                sortorder: 'desc',
                caption:'Just simple local grid',
                height: '100%'
            }); 
```

**工作样本：**

[好软](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridHeaders0.htm)

**样品小提琴：**

[小提琴](http://jsfiddle.net/ZGDa2/18/)

# android - 显示标题栏

> ID：11355748
> 
> 赞同：0
> 
> 时间：2012-07-06T04:14:33.053
> 
> 标签：android, titlebar

我有一个应用程序可以在特定条件下在全屏和普通屏幕之间切换。我已通过通知成功完成此操作，但在将其从全屏模式设置回正常屏幕模式后，标题栏仍保持隐藏状态。那么隐藏后如何显示标题栏？

编辑：

我遇到了他们制作自定义标题栏并在其可见性之间切换的答案，但这不是我想要的。

代码：

```
if(ScreenReceiver.wasScreenOn) {
    Toast toast=Toast.makeText(this, "screen was on", Toast.LENGTH_LONG);
    toast.show();
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);  
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    setContentView(R.layout.resume);
} else { 
    Toast toast=Toast.makeText(this, "screen was off", Toast.LENGTH_LONG);
    toast.show();
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);  
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    setContentView(R.layout.main);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T04:32:09.407

试试这个

```
 this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                              WindowManager.LayoutParams.FLAG_FULLSCREEN);

/// custom tittle bar declaration 
final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

/// custom tittle bar creation ///....
    if (customTitleSupported) {
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.tittle_bar);
    }
    final TextView myTitleText = (TextView) findViewById(R.id.title_bar);
    if (myTitleText != null) {
        myTitleText.setText("Categories");
    } 
```

# dojo - 在 Dojo 图表中复制图例

> ID：11355749
> 
> 赞同：0
> 
> 时间：2012-07-06T04:15:05.597
> 
> 标签：dojo, legend, dojox.charting

我在我的项目中使用 dojox 图表。

在图表区域右键单击并选择“复制”，复制图表，但我也希望复制图例。

我将图例创建为单独的 html 元素，将图表区域创建为单独的元素。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:29:02.177

复制不是图表的功能，它是由某些浏览器原生实现的。您可以为图例提供复制功能。

# java - Wedriver Windows 弹窗处理

> ID：11355752
> 
> 赞同：0
> 
> 时间：2012-07-06T04:16:40.457
> 
> 标签：java, webdriver

> **可能重复：**
> [从 iPhone 中的 ALAsset 检索的 URL 显示图像](https://stackoverflow.com/questions/3837115/display-image-from-url-retrieved-from-alasset-in-iphone)

我的代码是：

```
Set<String> windowsid = driver.getWindowHandles();
Iterator<String> iterate = windowsid.iterator();

while(iterate.hasNext()){
    System.out.println(iterate.next());
}

String mainwindow_id = iterate.next();
String tabbedwindow_id = iterate.next(); 
```

我收到一个错误@`String mainwindow_id = iterate.next();`

陈述如下，第 45 行是我在引号中的行。
我已经宣布`Set`为`String`

请帮忙 ！

```
Exception in thread "main" java.util.NoSuchElementException
at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:375)
at java.util.LinkedHashMap$KeyIterator.next(LinkedHashMap.java:384)
at windows.traverse.main(traverse.java:45) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:37:46.043

循环之后，

```
while(iterate.hasNext()){ 
    System.out.println(iterate.next()); 
} 
```

集合中没有要迭代的元素。您遍历了所有窗口，这就是为什么`NoSuchElementException`.

你能解释一下你想做什么吗？

如果我理解正确，则不需要使用循环。由于只有两个窗口，你可以做..

```
Set<String> windowsid = driver.getWindowHandles();
Iterator<String> iterate = windowsid.iterator();

String mainwindow_id = iterate.next();
String tabbedwindow_id = iterate.next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:55:15.093

如果必须使用循环，那么就像

```
while(iterate.hasNext()){
    String st = iterate.next();
    System.out.println(st);
} 
```

# php - PHP 和 jQuery 绘制数字动画

> ID：11355764
> 
> 赞同：0
> 
> 时间：2012-07-06T04:18:45.340
> 
> 标签：php, javascript, jquery, loops, jquery-animate

我一直在研究一个抽卡的程序。我有 54 张卡片，我想让它们单独绘制。这是我到目前为止所得到的。它读取一个数组，对其进行洗牌，重置它，然后将它们放在一个`foreach`.

```
<?
session_start();
include "array.php";
shuffle($cards);
reset($cards);
$i = 1;
foreach($cards as $card){
print <<<HERE
  <div id="$i">\n<img src="img/{$card[1]}.gif" alt="{$card[0]}" width="176" height="276"/><br/>
  <h1 style="font-family: sans-serif;">{$card[0]}</h1>\n</div><br />\n\n
HERE;
  $i++;
}

?> 
```

每张卡的每个结果都是这样的：

```
<div id="1">
<img src="img/#.gif" alt="Card Name #" width="176" height="276"/><br/>
<h1 style="font-family: sans-serif;">Card Name #</h1>
</div><br /> 
```

在 array.php 中，有一个二维数组，其中包含每张卡片的路径和名称。例如：

```
$array = array();
$array[] = array("Card Name 1", "1");
$array[] = array("Card Name 2", "2");
$array[] ... 
```

无论如何，我是 jquery 的新手，我需要帮助来创建一个显示卡片的动画，并按照输出的顺序更改每次点击的图片，直到它用完为止。

我怎样才能创建这个动画？我需要完全改变我的代码来完成这个吗？有没有更简单的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:24:33.340

为您的每个单独的 div 设置不透明度 0 并给出 class="card"

然后使用这个功能

```
$(document).ready(function()
{
    $(".card").animate({opacity:"1"});
}); 
```

例如：http: [//jsfiddle.net/FrrhZ/10/](http://jsfiddle.net/FrrhZ/10/)

$(".card") 是一个 jQuery 选择器，用于获取类“.card”的所有元素。上面将显示每张卡片从无到有，一个很酷的效果。这只是一个例子，你可以用 jQuery animate() 做更多的事情，看看[http://api.jquery.com/animate/](http://api.jquery.com/animate/) 例如，你可以这样设置速度

```
 $(".card").animate({opacity:"1"}, 1000);//animation to be completed in 1000 miliseconds. 
```

或者，您可以显示类似地铁的动画，其中实体在出现时稍微向上，为此添加 margin-top:10px 和 opacity:0 到您的 div，然后使用此功能

```
$(document).ready(function anim()
    {
        $(".card").animate({opacity:"1", marginTop:"0px"}, 'slow');//animate also excepts some keywords for speed like 'slow', 'fast'
    }); 
```

例如：http: [//jsfiddle.net/FrrhZ/14/](http://jsfiddle.net/FrrhZ/14/)

您可以使用 animate() 获得更多创意，这些只是 jQuery animate() 可能实现的众多功能中的一小部分，您甚至可以链接动画，所有内容都在链接中提供。继续探索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:33:36.503

有很多方法可以做到这一点，但首先想到的是：

```
$(document).ready(function(){
    var i=0,
        $cards = $("div").hide();
    $cards.click(function(){
        $cards.eq(i).slideUp(function() {
            i = (i+1)%$cards.length;
            $cards.eq(i).slideDown();
        });
    }).eq(0).slideDown();
}); 
```

您应该为您的卡片 div 分配一个公共类并更改 jQuery 选择器以使用它，例如 ，`$("div.card")`但一般的想法是选择所有卡片 div 并隐藏它们，显示第一个，然后单击显示的任何一个隐藏它和显示下一个。

我已经对上面的代码进行了编码以保持循环，但您可以根据需要添加自己的终端操作。

**演示：http:** [//jsfiddle.net/FrrhZ/](http://jsfiddle.net/FrrhZ/)

jQuery 提供了许多[动画方法](http://api.jquery.com/category/effects/)，你可以让动画变得任意复杂，但出于演示目的，我只使用了`.slideUp()`and `.slideDown()`。

顺便说一句，我会`<br>`从您的各个 div 之间删除元素。如果一次只显示一张卡片，则不需要它们，但即使显示多张卡片，div 也是块元素，默认情况下会在另一个下方显示一个 - 如果您需要更多间距，请通过 CSS 设置边距而不是添加间隔元素。

# javascript - 使用 Jquery 的单选按钮图像

> ID：11355776
> 
> 赞同：1
> 
> 时间：2012-07-06T04:21:33.207
> 
> 标签：javascript, jquery, html

我用 jQuery 设计了单选按钮，我想让每个单选按钮都有自己独特的图像和单击图像。但现在我普遍只为他们使用两张图片。

代码可以在[jsFiddle](http://jsfiddle.net/dGWJp/27/)查看。

现在我只有

```
var checkedImgUrl = 'http://b.vimeocdn.com/ps/879/87952_300.jpg',
    uncheckedImgUrl = 'http://www.mediabistro.com/alltwitter/files/2011/03/twitter_block.gif'; 
```

我怎样才能让这些图像中的每一个都有自己独特的图像和点击的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:01:50.413

您可以做到这一点的一种方法是向您的单选按钮添加一个包含图像网址的属性，例如：

```
<input name="version" type="radio" value="ATT" data-imageurl="radioimage1" /> 
```

然后在您的 jquery 代码中，您可以像这样引用 imageurl：

```
uncheckedImgUrl = $(this).attr("data-imageurl") + '.jpg'; 
```

如果您自己托管图像，则可以保存文件的“选定”版本，文件末尾带有“-on”。像这样：

```
checkedImgUrl = uncheckedImgUrl + '-on.jpg'; 
```

希望这可以帮助

编辑：http: [//jsfiddle.net/dGWJp/30/](http://jsfiddle.net/dGWJp/30/)

我只是对 jsfiddle 做了一个小改动，因为我懒得为示例创建图像。此 jsfiddle 仅将“已检查”图像更改为自定义图像。您现在应该有足够的信息来对此进行扩展以完成您的查询。这是我在 swapImage 函数中所做的唯一代码更改：

```
checkedImgUrl = $(radio).attr("data-imageurl"); 
```

# ios - Facebook ios sdk 的静态库是否应该出现在 Xcode 项目中？

> ID：11355778
> 
> 赞同：0
> 
> 时间：2012-07-06T04:21:46.040
> 
> 标签：ios, xcode, facebook

我目前正在做 facebook 集成，并且已经完成了本[教程](https://developers.facebook.com/docs/mobile/ios/build/#register)。到目前为止，我已经完成了第 2 步之前的所有工作。

为了测试单点登录，我决定在 Paul Heggarty 的 Photomania 项目中实现[它](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Photomania_0.zip)。为此，如上面链接的教程所述，我应该克隆 git hub 存储库（在步骤 2 下）。我已经通过`git clone git://github.com/facebook/facebook-ios-sdk.git` 在终端上复制和粘贴来完成此操作，并且效果很好。我可以找到`facebook-ios-sdk`文件夹所在的位置。太好了，所以我将文件夹拖到 Photomania 项目中。

在教程中还指出，如果我启用`Automatic Reference Counting`了应用程序（Photomania），我应该为 facebook-ios-sdk 创建一个静态库。这就是我在通过流回到 Core Data Demo 视频后发现 Photomania 实际上启用了 ARC 后所做的事情。所以现在，我通过将其复制并粘贴`~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh`到我的终端来完成静态库。这样做后，它实际上创建了新库。

但是，我看不到`lib`里面的文件夹`facebook-ios-sdk`（已经在 Photomania 中复制了）。即使通过 Finder 我可以找到 Photomania 项目，也可以使用静态库查看其中`facebook-ios-sdk`的`lib`文件夹。

请启发我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:24:55.280

您会看到，Xcode 和 finder 具有完全独立的文件系统（假设您没有选中“复制文件（如果需要）”选项）。当您将文件从 finder 拖到 Xcode 项目时，它们会被复制并放置在“Copy Bundle Resources”选项卡下，同时仍保留您在 Xcode 文件树中拖动的一般文件结构。因此，对查找器文件的更新需要将新文件拖到 Xcode 文件树中。就那么简单。

# iphone - 从 renderInContext 创建 uiview 快照的替代方法

> ID：11355779
> 
> 赞同：0
> 
> 时间：2012-07-06T04:22:01.197
> 
> 标签：iphone, xcode, ipad, uiview, snapshot

我是 ios 的新手，想创建一个 uiview 的快照，我正在以每秒 30 帧的速度拍摄快照，我正在使用 renderInContext 方法拍摄屏幕截图。但这需要很多时间，为此我必须降低帧速率。那么有什么替代方法吗？？任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:28:29.007

这可以替代 UIView [UIGetScreenImage](http://mobiledevelopertips.com/user-interface/screen-capture-using-uigetscreenimage.html)的快照。之前是私有API，大家说苹果已经开放了，使用前请确认:)

# c++ - 无法打开文件 libboost_thread_vc-100-mt-gd-1_48.lib

> ID：11355782
> 
> 赞同：0
> 
> 时间：2012-07-06T04:22:15.627
> 
> 标签：c++, boost, dll, qt-creator

在 Qt Creator 中编译我的程序时出现链接器错误

```
:-1: error: LNK1104: cannot open file 'libboost_thread-vc100-mt-gd-1_48.lib' 
```

我在 .pro 文件中添加以下行

```
win32: LIBS += -L$$PWD/../../../../../../../boost_1_48_0/stage/lib/ -lboost_thread-vc100-mt-gd-1_48

INCLUDEPATH += $$PWD/../../../../../../../boost_1_48_0/stage
DEPENDPATH += $$PWD/../../../../../../../boost_1_48_0/stage 
```

我仍然遇到同样的错误，所以我重建了库

```
C:\boost_1_48_0>bjam.exe --toolset=msvc --build-type=complete link=shared runtime-link=shared --with-thread --clean
C:\boost_1_48_0>bjam.exe --toolset=msvc --build-type=complete link=shared runtime-link=shared --with-thread 
```

关于使用静态库

```
win32: LIBS += -L$$PWD/../../../../../../../boost_1_48_0/stage/lib/ -llibboost_thread-vc100-mt-sgd-1_48

INCLUDEPATH += $$PWD/../../../../../../../boost_1_48_0/stage
DEPENDPATH += $$PWD/../../../../../../../boost_1_48_0/stage

win32: PRE_TARGETDEPS += $$PWD/../../../../../../../boost_1_48_0/stage/lib/libboost_thread-vc100-mt-sgd-1_48.lib 
```

我收到更多错误

```
msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: void __thiscall std::_Container_base12::_Orphan_all(void)" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in libboost_thread-vc100-mt-sgd-1_48.lib(thread.obj)
msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) already defined in libboost_thread-vc100-mt-sgd-1_48.lib(thread.obj)
msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::_Container_base12(void)" (??0_Container_base12@std@@QAE@XZ) already defined in libboost_thread-vc100-mt-sgd-1_48.lib(thread.obj)
msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: static unsigned int __cdecl std::numeric_limits<unsigned int>::max(void)" (?max@?$numeric_limits@I@std@@SAIXZ) already defined in libboost_thread-vc100-mt-sgd-1_48.lib(thread.obj)
msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: static __int64 __cdecl std::numeric_limits<__int64>::max(void)" (?max@?$numeric_limits@_J@std@@SA_JXZ) already defined in libboost_thread-vc100-mt-sgd-1_48.lib(thread.obj)
LINK : fatal error LNK1104: cannot open file 'libboost_thread-vc100-mt-gd-1_48.lib'
    link /LIBPATH:"c:\Qt\4.8.1\lib" /NOLOGO /DYNAMICBASE /NXCOMPAT /DEBUG /MANIFEST /MANIFESTFILE:"debug\Player.intermediate.manifest" /SUBSYSTEM:WINDOWS "/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'" /OUT:debug\Player.exe @C:\Users\vickey\AppData\Local\Temp\Player.exe.948.15.jom
    c:\qt\4.8.1\bin\qmake.exe -spec c:\Qt\4.8.1\mkspecs\win32-msvc2010 CONFIG+=declarative_debug -o Makefile c:\cygwin\home\vickey\tunebasket\p2p\test\Player\Player.pro
    C:\QtSDK\QtCreator\bin\jom.exe -f Makefile.Debug 
```

任何想法有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:49:31.783

```
#define BOOST_ALL_NO_LIB 
```

为我工作。我猜的问题是链接器正在寻找 libboost_thread_vc-100-mt-gd-1_48.lib，而我在 .pro 文件中配置了 boost_thread_vc-100-mt-gd-1_48.lib。定义宏使其显式上传 .pro 文件中定义的库。

# c - 关于我首先拟合 malloc 函数的方法的意见和建议

> ID：11355785
> 
> 赞同：1
> 
> 时间：2012-07-06T04:22:31.617
> 
> 标签：c, malloc, sbrk, brk

我正在为大学作业编写 malloc 函数。这是我的想法的基本布局：

1）定义一个节点结构，其中包含指向前一个节点、下一个节点的指针，以及一个用于大小和空缺的字符。堆中的每个区域都将包含一个带有此信息的隐藏节点。

2)malloc函数。从第一个节点循环开始，通过每个节点检查空缺。如果一个节点是空的并且足够大，则将一个 ptr 返回到不包括该节点的区域的开头。如果没有可用空间，请使用 sbrk 为节点分配请求的空间 PLUS 空间。

3）自由功能。转到作为参数sizeof（结构节点）传递的指针并将空缺设置为空缺。然后从列表的开头开始，遍历列表合并相邻的空闲空间。

这种方法听起来如何？我主要关心的是实际启动链表。例如，在开始进行任何分配并将 ptr 作为全局变量存储到它之前，是否应该使用 sbrk 创建一个节点？如果是这样，在允许驱动程序调用 malloc 函数之前如何初始化第一个节点？

提前致谢。我不是要求有人编写我的代码，只是为了提供一些关于我的想法的见解和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:46:03.697

1.  我会避免在分配节点时将所有簿记信息保留在节点上。我在块的开头只有最少的信息（通常只是块大小），但仅此而已。
2.  我会分别跟踪空闲块和分配的块，因此当您搜索空闲块时，您不会在已经使用的块上浪费时间。
3.  我会将空闲列表分成两部分，然后懒惰地合并块。换句话说，有一个你要分配的空闲列表，还有一个只是一个保留区。当用户免费调用时，只需将块链接到保持区域，仅此而已。当您用于分配的列表开始不足时，按地址对保留区域中的块进行排序，然后与分配空闲列表合并。然后遍历列表并合并相邻块。
4.  当您确实需要调用 sbrk（或其他）从系统分配更多空间时，不要*只*分配足够的空间来满足当前的分配请求。相反，分配一个相当大的块（例如，一兆字节），然后将其拆分以满足请求，并将其余作为块添加到空闲列表中。如果你的内存足够低以至于你必须去 sbrk 一次，那么接下来的几个调用很可能会做同样的事情，所以你不妨贪婪，并立即获取足够的内存来获得满足更多的机会请求也是如此。

第三种的基本思想是尽可能避免合并以增加找到相邻块的机会，所以当你合并时你可能会做一些真正的好事，避免浪费时间尝试合并时只有一个几个相邻的块空闲。

# delphi - 如何为 HTTP 数据快照服务器动态加载服务器方法？

> ID：11355786
> 
> 赞同：5
> 
> 时间：2012-07-06T04:22:40.197
> 
> 标签：delphi, datasnap

我正在使用 Delphi XE2 DataSnap 库。我的数据快照服务器是基于 HTTP 的（TIdHTTPWebBrokerBridge 或 ISAPI）。

首次访问 DataSnap 服务时，TDSServer 实例将通过 TDSServerMethodProvider.Open 和 TDSServerMethodProvider.AddRegisterServerClasses 注册所有可用的服务器方法（参见单元 Datasnap.DSCommonServer.pas）。

datasnap 类名和服务器方法必须预先注册，否则客户端访问服务时会失败。

我正在考虑制作一个可以动态加载数据快照类和服务器方法的应用程序。我的 datasnap 应用程序不知道类或服务器方法是否可供访问，直到它开始基于 URL 查找服务。例如，像这样的 URL：

```
http:/.../datasnap/rest/TServerMethods1/ReverseString 
```

将使应用程序在使用该方法之前寻找类 TServerMethods1 并注册。

我们可以使用 TWebModule.BeforeDispatch 事件来识别 Request.URL 字符串并确定为相应的 datasnap 类加载哪些包。

通过使用这种方法，我可以编写一个灵活且可扩展的通用 DataSnap 应用程序。

在检查了 DataSnap 源代码后，我发现除非对现有的 DataSnap 源进行一些额外的工作，否则这是不可能的。对注册至关重要的类 TDSServerMethodProvider 中很少有方法在私有部分中声明：`AddRegisteredServerClasses`, `AddAllMethods`。

TDSServerMethodProvider 类似乎不是为额外注册而设计的。它只允许注册一次。

# iphone - 这个 Core Graphics 代码线程安全吗？

> ID：11355787
> 
> 赞同：7
> 
> 时间：2012-07-06T04:22:40.770
> 
> 标签：iphone, objective-c, ios, core-graphics

我知道只要我打电话，在任何线程上画画都是安全的

```
UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
UIGraphicsEndImageContext(); 
```

在同一个线程上。

通过这种方法截取一个视​​图大约需要 300 毫秒，这还不错，但是我的情况很紧张，所以我想在后台线程中进行。

这就是我正在做的事情：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
        [view.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage * screenshot = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }); 
```

这里唯一有问题的是`view`，它位于主线程上。从后台线程调用`renderInContext`a是否安全？`view.layer`或者一般来说，从另一个线程只读 UIKit 对象是否安全？

（并且请不要给我默认的“UIKit 不是线程安全”的答案。我已经知道了。这是一个特例（不要告诉我没有特例）。）

（上面的代码运行良好，但我不确定这是否只是巧合。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T04:35:30.300

Core Graphics 和 Core Animation 是低级 API，通常是线程安全的。但是，关于访问的相同规则仍然适用：任何工作不得同时被多个线程访问，否则绘图将失败并且您的应用程序将崩溃。我会对 UIImage 保持警惕（但不害怕），因为 UIKit 对象不仅不是线程安全的，它们基本上是在后台线程中滴答作响的定时炸弹，并且会很高兴地无缘无故地从悬崖上直接跳入 Exception Land。然而，因为 UIImage 只是一个 CGImage 包装器，所以大多数绘图都是线程安全的。

# php - 在 CkEditor 上应用 jQuery 函数

> ID：11355788
> 
> 赞同：0
> 
> 时间：2012-07-06T04:22:44.700
> 
> 标签：php, jquery, html, ckeditor

我的 html 文件中有一个`textarea`，我需要将其中的数据发送`textarea`到数据库。但是，`textarea`发送没有`enter`空格的数据。所以这样的数据：

```
Shortly after reading a few books on web design, I was hooked. I wanted to know everything and anything about it. I was designing websites any chance I could. 

I spent almost all of my savings buying more books on different programming languages and other nerdy computer gear. 
```

在数据库中会是这样的。

```
Shortly after reading a few books on web design, I was hooked. I wanted to know everything and anything about it. I was designing websites any chance I could. I spent almost all of my savings buying more books on different programming languages and other nerdy computer gear. 
```

所以我决定将 textarea 更改为 a`ckeditor`以将数据作为 html 发送。但是现在我有一个`jQuery`方法的问题`textarea`，现在它不起作用了。

HTML：

```
<td>
<textarea maxlength="5000" id="blah" cols="100" rows="20" name="essay_content" class="ckeditor" onkeyup="words();">
</textarea></td> 
```

jQuery：

```
function words(content)
{
    var f = $("#blah").val()
    $('#othman').load('wordcount.php?content='+ encodeURIComponent(f));

} 
```

现在它对我不起作用，因为文本区域是 CkEditor ...有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:23:08.293

这应该让您获得 CkEditor 文本区域的内容：

```
function words(content)
{
    var f = CKEDITOR.instances.blah.getData();
    $('#othman').load('wordcount.php?content='+ encodeURIComponent(f));
} 
```

但是，我认为这`onkeyup`不会起作用，因为 CkEditor 替换了 textarea。您需要为 CkEditor 创建一个插件，以在编辑器实例中捕获按键触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:32:35.217

我用过`nlbr`，一切正常。

# javascript - 在页面加载时触发的 propertychange 事件

> ID：11355791
> 
> 赞同：3
> 
> 时间：2012-07-06T04:23:21.087
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 textarea 并且我已将 propertychange 事件绑定到它。下面是我使用的代码

```
$('#textareaID').bind('input propertychange', function() {}); 
```

但是只有在页面加载后文本区域发生更改时才会触发此事件。我希望它在页面加载时触发。由于在页面加载时，我正在分配一个我希望它当时发生的值。是否可以在页面加载时触发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T06:37:56.207

手动触发它对您有用吗？

jsFiddle 中的示例：http: [//jsfiddle.net/VAT83/](http://jsfiddle.net/VAT83/)

```
$(function() {
    var textValue = $('#textValue');        
    $('#textareaID')
         .bind('input propertychange', function() {
             textValue.html($(this).val());
         })
         .trigger('propertychange');
});​ 
```

# c# - 使用 mongodb 和 guids 作为文档 ID 存储 Guid 以轻松检索实际 Guid 的有效方法是什么？

> ID：11355792
> 
> 赞同：23
> 
> 时间：2012-07-06T04:23:37.560
> 
> 标签：c#, mongodb

我正在运行 2.06 版的 Mongodb 和 10Gen 提供的 C# 驱动程序的 (1.5) 版。

我的每个实体都有一个 Id 属性设置......

```
 [BsonId(IdGenerator = typeof(GuidGenerator))]
 public Guid Id { get; set; } 
```

Id 字段存储为 Binary - 3:UuidLegacy。由于当我在实体上调用 ToJson() 时它是如何存储的，它会为 Id 返回以下 javascript 对象。

```
_id : Object
 $binary: "some values here"
 $type: "03" 
```

这显然是因为数据被存储为 Binary = 3:UuidLegacy。这是有道理的。

我想在我的 Javascript 代码中使用实际的 Guid。如果我让我的 Id 属性如下所示，MongoDB 的效率会有多高？

```
 [BsonId(IdGenerator = typeof(GuidGenerator)),MongoDB.Bson.Serialization.Attributes.BsonRepresentation(BsonType.String)]
public Guid Id { get; set; } 
```

这使得 mongodb 将我的 Id 存储为字符串。但这真的有效吗？我猜我的 ID 的二进制格式更好，但我真的需要 Guid。

如何从 Binary - 3:uuidLegacy 转到我在 json 中需要的 Guid？

我想另一个想法是我可以只使用发送给我的 $binary 值吗？我使用 Id 来执行查找，例如查询字符串的一部分。

谢谢，

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-06T14:34:55.113

使用 GUID 有一些陷阱，主要与如何使用 mongo shell 中的二进制表示以及导致不同驱动程序使用不同字节顺序存储 GUID 的历史事故有关。

我使用以下代码来说明问题：

```
var document = new BsonDocument { { "_id", Guid.NewGuid() }, { "x", 1 } };
collection.Drop();
collection.Insert(document);
Console.WriteLine("Inserted GUID: {0}", document["_id"].AsGuid); 
```

当我运行它时输出：

```
Inserted GUID: 2d25b9c6-6d30-4441-a360-47e7804c62be 
```

当我在 mongo shell 中显示它时，我得到：

```
> var doc = db.test.findOne()
> doc
{ "_id" : BinData(3,"xrklLTBtQUSjYEfngExivg=="), "x" : 1 }
> doc._id.hex()
c6b9252d306d4144a36047e7804c62be
> 
```

请注意，即使显示为十六进制，字节顺序也与原始 GUID 不匹配。这就是我所说的历史事故。所有字节都在那里，由于微软实施了 Guid.ToByteArray()，它们只是以不寻常的顺序排列。

为了帮助您在 mongo shell 中使用 GUID，您可以将以下帮助函数文件复制到存储 mongo.exe 的目录中：

[https://github.com/rstam/mongo-csharp-driver/blob/master/uuidhelpers.js](https://github.com/rstam/mongo-csharp-driver/blob/master/uuidhelpers.js)

该文件顶部有一些简短的文档注释，您可能会发现它们对您有所帮助。要使这些函数在 mongo shell 中可用，您需要告诉 mongo shell 在启动时读取此文件。请参阅以下示例会话：

```
C:\mongodb\mongodb-win32-x86_64-2.0.6\bin>mongo --shell uuidhelpers.js
MongoDB shell version: 2.0.6
connecting to: test
type "help" for help
> var doc = db.test.findOne()
> doc
{ "_id" : BinData(3,"xrklLTBtQUSjYEfngExivg=="), "x" : 1 }
> doc._id.hex()
c6b9252d306d4144a36047e7804c62be
> doc._id.toCSUUID()
CSUUID("2d25b9c6-6d30-4441-a360-47e7804c62be")
> 
```

您还可以使用另一个辅助函数来查询 GUID：

```
> db.test.find({_id : CSUUID("2d25b9c6-6d30-4441-a360-47e7804c62be")})
{ "_id" : BinData(3,"xrklLTBtQUSjYEfngExivg=="), "x" : 1 }
> 
```

就将您的 GUID 存储为字符串而言，这并不是一件闻所未闻的事情，它确实使查看和查询 mongo shell 中的数据更加容易，并避免了不同字节顺序的所有问题。唯一的缺点是它使用了更多的空间（大约是两倍）。

# java - 我们可以为扩展 android.app.Application 的类添加壁纸吗？

> ID：11355795
> 
> 赞同：1
> 
> 时间：2012-07-06T04:23:53.903
> 
> 标签：java, android-layout, android

我在扩展应用程序的全局类中加载了一些必需的资源。由于它在我们启动应用程序时首先运行，因此启动第一个活动需要一些时间，这会导致在启动过程中出现几秒钟的空白屏幕。

我们可以添加墙纸或 gif 来显示应用程序正在加载而不是空白屏幕吗？

如果是，请帮助我如何开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:56:19.917

您可以在布局中设置背景图像，然后如果您需要在启动应用程序时加载大量信息，您可以使用异步任务或服务或线程在后台加载此信息。

# android - 下载android sdk - 错误

> ID：11355798
> 
> 赞同：0
> 
> 时间：2012-07-06T04:24:11.117
> 
> 标签：android

敬启者，

我目前正在尝试安装 android sdk 包，但是我执行了一个步骤，然后收到错误消息：“找不到 C:\windows\system32\java.exe 的 java 版本失败：[2] 系统找不到文件指定的”

我已经在我的 Windows 7 计算机上成功下载了 java jdk，所以我不太清楚为什么它说它在我的计算机上找不到它？

它还说“如果你认为你安装了 JDK 并且没有被正确识别，只需设置一个环境变量 JAVA_HOME 指向它”，我不知道这是什么意思？

有人可以帮我解决这个问题吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:40:52.980

我认为问题是您已经安装了 JDK，但未设置环境变量。按照以下步骤设置环境变量 -

1.  打开您的 jdk 文件夹并找到“javac”文件。（默认路径是 C:\Programs Files\Java\jdk\bin）。
2.  如果您能够找到“javac”和“java”文件，请复制此路径。
3.  右键单击“我的电脑”并选择属性。
4.  转到“高级系统设置”。当您单击此处时，将打开一个新的“系统属性”窗口。
5.  单击“环境变量”按钮。
6.  在新窗口中，在第二个列表中找到“路径”并双击。
7.  在“变量值”中，您必须添加“;.;” 没有引号。
8.  在每个窗口中单击“确定”按钮。这将设置环境变量。

# c# - 使用 UnityContainer 解析字典

> ID：11355801
> 
> 赞同：0
> 
> 时间：2012-07-06T04:24:36.743
> 
> 标签：c#, prism, unity-container, containers

我只是怀疑这个小界面。

我有以下界面，这是用于注册一些项目以在每个模块中映射 itemsViewModel。所以每个模块都会注册一些键。

```
public interface IExerciseMap
{
    Dictionary<Type, Func<BaseItem, BaseItemViewModel>> Maps { get; }
    void AddExercise(Type type, Func<BaseItem, BaseItemViewModel> func);
}

public class ExerciseMap : IExerciseMap
{
    public Dictionary<Type, Func<BaseItem, BaseItemViewModel>> maps;

    public void  AddExercise(Type type, Func<BaseItem,BaseItemViewModel> func)
    {
        maps.Add(type, func);
    }

    public Dictionary<Type, Func<BaseItem, BaseItemViewModel>> Maps
    {
        get
        {
            if (maps == null)
                maps = new Dictionary<Type, Func<BaseItem, BaseItemViewModel>>();
            return maps;
        }
    }
} 
```

到目前为止，我已经在其中实现了一个字典，我认为这不是最好的性能。好的，让我跟着解释你的场景。

我已经配置好了。。

```
 protected override void ConfigureContainer()
    {
        base.ConfigureContainer();
        ...
        Container.RegisterType<IExerciseMap, ExerciseMap>();
    } 
```

这是其中一个模块的 ModuleInit 示例。

```
 public ModuleInit(IUnityContainer container, IRegionManager regionManager,
        IExerciseMap maps)
    {
        ...
        _maps = maps;
    }

    public void Initialize()
    {
        // Add types to the mapping (this is right, no changes)
        _maps.Add(typeof(..), Func<...>);
        _maps.Add(typeof(..), Func<...>);
        ...
    } 
```

在这里，我从对象传递值（在构造函数中映射）。

```
public class WorksheetViewModel : NotificationObject
{
    private readonly Dictionary<Type, Func<BaseItem, BaseItemViewModel>> maps;

    public WorksheetViewModel(..., Dictionary<Type, Func<BaseItem, BaseItemViewModel>> maps)
    {
        ...
        this.maps = maps;
    }
 } 
```

正如我所说，我不相信这是一个好主意和性能。也许我应该在映射字典的容器中注册一个实例，你怎么看？

# html - 如何在比单元格大的表格单元格上显示图像？

> ID：11355802
> 
> 赞同：1
> 
> 时间：2012-07-06T04:24:45.093
> 
> 标签：html, css, layout

我有一个`TABLE`实际上被用于其预期目的的，以显示一个网格。单元格是固定大小的单元格，每个单元格的宽度和高度都是恒定的并在 CSS 中定义。

我可以很容易地将文本和图像放入单元格中，只要它们适合。但是，如果我尝试将比单元格大的图像放入 a`TD`中，它最终会拉伸单元格，以及它的整个列或整个行（或两者），具体取决于哪个维度太大。

我需要表格保持固定大小，但我还需要一个位于特定单元格的图像，该单元格比单元格大。我应该如何设置这个效果？

举一个简单的例子：

```
+---+---+---+
|   |   |   |
+---+---+---+
|   | X |   |
+---+---+---+
|   | X |   |
+---+---+---+ 
```

想象一下，图像的宽度和高度正好是一个单元格的两倍。我需要做什么才能使它完美地覆盖两个垂直单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:27:28.383

您可以使用`max-width`和`max-height`属性来`100%`使图像不超过单元格。小提琴来了！:)

## HTML

```
<table border="1" cellpadding="0" cellspacing="0">
    <tr>
        <td><img src="http://windows7supportnow.com/wp-content/uploads/2012/06/Windows-vista-help-1.jpg" class="normal" /></td>
        <td>Table Cell</td>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
        <td><img src="http://windows7supportnow.com/wp-content/uploads/2012/06/Windows-vista-help-1.jpg" class="fullsize" /></td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td>Table Cell</td>
        <td>Table Cell</td>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
    <tr>
        <td><img class="normal" src="http://edibleapple.com/wp-content/uploads/2009/04/silver-apple-logo.png" /></td>
        <td>Table Cell</td>
        <td>Table Cell</td>
        <td>Table Cell</td>
    </tr>
</table> 
```

## JavaScript

```
$(document).ready(function(){
    $("img").click(function(){
        $(this).toggleClass("normal");
    });
});​ 
```

## CSS

```
td, td img.normal, img.fullsize.normal {height: 100px; max-height: 100px; width: 100px; max-width: 100px;}
td {position: relative;}
img.fullsize {position: absolute; top: 0; left: 0; z-index: 100; height: auto; max-height: auto; width: auto; max-width: auto;}​ 
```

## 预览和演示

![桌子](../Images/a682f12226bda99f760ca920320f9abd.png)

## 小提琴：http: [//jsfiddle.net/4f9K5/1/](http://jsfiddle.net/4f9K5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:37:19.897

```
 <!DOCTYPE html>
    <html>
<head>
<style>td{ width:100px; vertical-align:top;  height:100px; border:solid 1px;}
img{position:absolute; top:0px; left:0px;}</style><script src="jquery.js"></script>
</head>    <body>

<table>
<tr><td><div style="position:relative;"><img src="planet.png"></div></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
</table>
</body>
    </html> 
```

[http://jsfiddle.net/bRyCw/4/](http://jsfiddle.net/bRyCw/4/)

# actionscript-3 - 在 Adob e AIR 的关卡编辑器中实现时间线编辑器时出现问题。

> ID：11355805
> 
> 赞同：1
> 
> 时间：2012-07-06T04:25:23.707
> 
> 标签：actionscript-3, flash, air

我目前正在开发一个 Adob​​e AIR 项目来抽出我的关卡编辑器，但我遇到了一个问题。我基本上需要实现一个交互式电影编辑器。我的问题是你会建议我如何开始时间线编辑？功能方面，它需要能够为位置、比例和 alpha 设置补间关键帧。有任何想法吗？

我也一直在尝试研究从 swf 中提取补间数据。我不完全确定这将如何适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:59:06.973

我不确定您所说的电影编辑器是什么意思 - 电影作为图像序列（位图）或电影作为 flash MovieClip ？

如果是后者，您可以使用像 TweenLite 这样的补间引擎来完成繁重的工作，然后由您决定如何组织时间线的可滚动 GUI（那里有很多示例，从 Flash/After Effectts/Blender/等开始） .) 我认为您的设计师/动画师的反馈至关重要。

从 Flash 中提取数据也是可能的。如果你想解析 swf，你可以试试 Claus Wahlers 的很棒的[as3swf](https://github.com/claus/as3swf)库。请务必查看他的一些帖子：

1.  [使用 as3swf 重建 SWF 时间线](http://wahlers.com.br/claus/blog/timeline-reconstruction-with-as3swf/)
2.  [Flash IDE Inspired Flex 4 时间轴组件](http://wahlers.com.br/claus/blog/flash-ide-inspired-flex-4-timeline-component/)

![Flex4 中的 as3swf 时间轴](../Images/1eb1670bf71ff180feec075ca28ea780.png)

另一种选择是使用 jsfl（Flash IDE 中的 JavaScript 脚本）并解析您的设计师/动画师创建的补间。这应该是为补间解析 XML 的问题（无论是旧的/[经典](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/motionXSD.html)的还是新的/[动作](http://flashthusiast.com/2008/11/04/understanding-flash-cs4-motion-xml/)）。如果您选择 JSFL 路线，您可能还会发现[xJSFL](http://www.xjsfl.com/)项目很有用。

此外，有关游戏/动画工具的灵感，请查看[Spriter](http://www.kickstarter.com/projects/539087245/spriter)

# python - 在 django 中使用 for 循环在谷歌可视化条形图中插入数据

> ID：11355806
> 
> 赞同：1
> 
> 时间：2012-07-06T04:25:35.980
> 
> 标签：python, django, linux, google-visualization, ubuntu-10.04

我目前正在 django 开发一个项目。在这个项目中，我想展示存储在 sqlite3 数据库表中的数据的图形表示。为此，我编写了一些代码，其中我想使用 for 循环在图表中添加表值，如下所示：（这里 list1 包含表的所有值，并且此页面被重定向以显示此图形结果）

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['FileName', 'Frequency'],
          {% for l in list1 %}
               [{{l.file_name}},{{l.frequency_count}}], 
          {% endfor %}
          ]);

        var options = {
            title: 'Search Performance',
            hAxis: {title: 'FileName', titleTextStyle: {color: 'red'}}
         };

         var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
         chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

服务器上没有显示任何内容。为什么？

请帮忙。我是 django 和 javascripts 的新手。所以，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:58:49.930

答案是我需要在 {{l.file_name}} 周围加上引号，即它应该是 '{{l.file_name}}' 并且有效。请始终记住，如果您将轴上的数据作为字符串（在我的情况下），请始终将其放在引号中 ' 或 " 。

# php - 添加急切加载后立即在 Yii 中出现致命错误

> ID：11355807
> 
> 赞同：1
> 
> 时间：2012-07-06T04:25:55.697
> 
> 标签：php, yii, eager-loading

我有3个`CActiveRecord`模型：

*   一个
*   乙
*   C

关系：

*   A有很多B。
*   A有很多C。
*   B属于A。
*   C属于A。

在`AController`'s中，我正在从数据库`actionHome($id)`中检索单行。`A`就像默认的一样`actionView($id)`。

在我的 View for 中，我还列出了属于 that的和的`actionHome()`所有实例。`B``C``A`

```
public function actionHome($id)
{
  $this->render('home', array('a' => A::model()->findByPk($id)));
} 
```

在`actionHome()`中，我想使用**渴望加载**的`A`关系。

但是，当我添加`with()`到该`findByPk()`函数时，我立即得到一个致命错误。

```
public function actionHome($id)
{
  $this->render('home', array('a' => A::model()->with('bs','cs')->findByPk($id)));
} 
```

`Fatal error: Call to a member function label() on a non-object in`我的`home.php`视图文件。

`label()`是我的`A`模型类中的一个公共静态函数。

因此，由于我添加了急切加载，这会导致该功能不可用。

有人可以帮忙吗？
为什么这个功能不再可用？

`label()`在我的视图中调用 home.php，如下所示：

```
$this->breadcrumbs = array(
  CHtml::encode($a->label(2)) => array('index'),
  CHtml::encode($a->name),
); 
```

`label()`在我的模型中定义如下：

```
public static function label($n = 1) 
{
  if ( $n == 0 ) $n = 1;
  return Yii::t('app', 'A|As', $n);
} 
```

如果我在视图中注释掉对的调用`label()`（或将调用更改为`A::label(2)`），那么下一行也会触发错误，..“名称”不是非对象的属性。

显然，由于某种原因，`$a`不再是一个对象。

**更新1：**

因此，在我看来，将原因添加到 return ，所以我`with()`试图`findByPk($id)`找出原因。延迟加载没有这个问题。`NULL``$a``NULL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:19:38.360

`findByPk()`正在返回，`NULL`因为关系`cs`为空。Yii 正在执行`INNER JOIN`from `A`to`B`并且因为没有`B`属于 的`A`，结果集是空的。

延迟加载没有这个问题，因为它在`B`需要数据之前不会进行查询。

# c - 当 MPI_Bcast 中的 root 是随机的时会发生什么

> ID：11355809
> 
> 赞同：0
> 
> 时间：2012-07-06T04:26:20.767
> 
> 标签：c, mpi

通常当我们调用 MPI_Bcast 时，必须确定根。但现在我有一个不关心谁会广播消息的应用程序。这意味着将广播消息的节点是随机的，但是一旦消息被广播，全局变量必须是一致的。我的理解是，由于 MPI_Bcast 是一个集合函数，所有节点都需要调用它，但顺序可能不同。所以谁先到达MPI_Bcast，谁将消息广播给其他人。我用3个节点运行了以下代码，我认为如果节点1（rank==1）首先到达MPI_Bcast，它会将local_count值（1）发送到其他节点，然后所有节点都用相同的local_count更新global_count，所以我的预期结果之一是（输出顺序无关紧要）
节点 0，全局计数为 1
节点 1，全局计数为 1
节点 2，全局计数为 1

但实际结果总是（输出顺序无所谓）：
节点1，全局计数为1
节点0，全局计数为0
节点2，全局计数为2

这个结果与没有 MPI_Bcast 的代码完全相同。那么我对 MPI_Bcast 或我的代码的理解有什么问题吗？谢谢。

```
#include <mpi.h>
#include <stdio.h>

int main(int argc, char *argv[])
{   

    int rank, size;
    int local_count, global_count;
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    global_count = 0;
    local_count = rank;

    MPI_Bcast(&local_count, 1, MPI_INT, rank, MPI_COMM_WORLD);
    global_count += local_count;

    printf("node %d, global count is: %d\n", rank, global_count);
    MPI_Finalize();
} 
```

该代码是一个简化的案例。在我的应用程序中，在 MPI_Bcast 之前有一些计算，我不知道谁会先完成计算。每当一个节点到达 MPI_Bcast 点时，它需要广播自己的计算结果局部变量，所有节点都更新全局变量。所以所有节点都需要广播一条消息，但我们不知道顺序。如何实现这个想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:38:10.023

的正确用法`MPI_BCast`是所有进程都以**相同**的根调用该函数。即使你不关心广播者是谁，所有的进程都必须调用具有相同等级的函数来收听广播者。在您的代码中，每个进程都`MPI_BCast`以自己的等级调用并且彼此不同。

我还没有查看标准文档，但是您很可能通过`MPI_BCast`使用不同等级的调用来触发未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:30:33.070

通常你写的东西会导致死锁。在典型`MPI_Bcast`情况下，具有等级的进程`root`将其数据发送到通信器中的所有其他进程。您需要`root`在这些接收进程中指定相同的等级，以便他们知道“听”谁。这是一个过于简单的描述，因为通常使用分层广播来减少总操作时间，但是通过三个进程，这种分层实现减少到非常简单的线性实现。在您的情况下，具有 rank 的进程`0`将尝试向两个进程发送相同的消息，`1`并且`2`. 同时，进程`1`不会收到该消息，而是会尝试将其发送给进程`0`和`2`。过程`2`还将尝试发送到`0`and `1`。最后，每个进程都将发送没有其他进程愿意接收的消息。这是一个几乎可以肯定的灾难秘诀。

为什么你的程序没有挂起？因为正在发送的消息非常小，只有一个`MPI_INT`元素，而且进程的数量也很少，因此这些发送都在每个进程中由 MPI 库在内部进行缓冲——它们永远不会到达目的地，但内部进行的调用`MPI_Bcast`却没有块，尽管操作仍在进行中，但您的代码会重新获得执行控制权。这是未定义的行为，因为标准不要求 MPI 库缓冲任何内容 - 某些实现可能会缓冲，而其他实现可能不会。

如果您试图计算`local_count`所有进程中所有变量的总和，那么只需使用`MPI_Allreduce`. 替换这个：

```
global_count = 0;
local_count = rank;

MPI_Bcast(&local_count, 1, MPI_INT, rank, MPI_COMM_WORLD);
global_count += local_count; 
```

有了这个：

```
local_count = rank;
MPI_Allreduce(&local_count, &global_count, 1, MPI_INT, MPI_SUM, MPI_COMM_WORLD); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:04:19.873

来自 openmpi 文档

`"MPI_Bcast broadcasts a message from the process with rank root to all processes of the group, itself included. It is called by all members of group using the same arguments for comm, root. On return, the contents of root’s communication buffer has been copied to all processes. "`

调用它可能会从等级！= root 可能会导致一些问题

一种更安全的方法是硬编码你自己的广播函数并调用它

它基本上是一个 for 循环和一个 mpi_send 命令，应该不难实现你自己

# jquery - 在 jquery 中检查输入字符串是否有效日期

> ID：11355811
> 
> 赞同：1
> 
> 时间：2012-07-06T04:26:45.000
> 
> 标签：jquery, validation, date

如何检查字符串是否为有效日期？如果它是有效的，我想返回 true，否则返回 false。字符串将类似于 '01-JUN-2012'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:08:15.163

以下函数检查 (dd MMM yyyy) 格式。不接受破折号 (-)。它可能会帮助您或仔细查看正则表达式以对其进行少量修改..

```
function isDate(txtDate)
{
    var currVal = txtDate;
    if(currVal == '')
        return false;

    var rxDatePattern = /^((31(?!\(Feb(ruary)?|Apr(il)?|June?|(Sep(?=\b|t)t?|Nov)(ember)?)))|((30|29)(?!\ Feb(ruary)?))|(29(?=\ Feb(ruary)?\ (((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)))))|(0?[1-9])|1\d|2[0-8])\ (Jan(uary)?|Feb(ruary)?|Ma(r(ch)?|y)|Apr(il)?|Ju((ly?)|(ne?))|Aug(ust)?|Oct(ober)?|(Sep(?=\b|t)t?|Nov|Dec)(ember)?)\ ((1[6-9]|[2-9]\d)\d{2})$/; //Declare Regex
    var dtArray = currVal.match(rxDatePattern); // is format OK?

    if (dtArray == null) 
        return false;

    //Checks for dd MMM yyyy format.

    dtMonth = dtArray[2];

    dtDay= dtArray[1];

    dtYear = dtArray[dtArray.length-2];       

    if (dtDay < 1 || dtDay> 31) 
        return false;
    else if (dtMonth == 2) 
    {
        var isleap = (dtYear % 4 == 0 && (dtYear % 100 != 0 || dtYear % 400 == 0));
        if (dtDay> 29 || (dtDay ==29 && !isleap)) 
                return false;
    }
    return true;
}

});​ 
```

[jsFiddle](http://jsfiddle.net/EywSP/112/)上的工作演示

# python-3.x - PyQt 不切换屏幕

> ID：11355812
> 
> 赞同：0
> 
> 时间：2012-07-06T04:26:46.037
> 
> 标签：python-3.x, pyqt4

我写了一个GUI程序，它在后面做了很多计算，同时显示一个进度条。完成后，一个新的屏幕将显示结果。

然后我想在计算之前再做一个界面让用户选择是否要使用最后的计算结果，从而跳过计算。

我制作了一个带有连接到计算的按钮的屏幕，以及一个用于选择最后一个计算结果文件的组合框。

但是，当我单击按钮时，它什么也没做。大约 10 秒后（计算的持续时间），结果屏幕弹出。因此，它跳过了进度条屏幕。为什么？

这是原始程序的一部分：

```
import sys
import configparser
import getpass
import telnetlib
import time
import subprocess
from datetime import *

from log_tracker import *
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4 import QtCore
from PyQt4 import QtGui

class Task_Checker(QMainWindow):

    def __init__(self):
        super(Task_Checker, self).__init__()

        config = configparser.RawConfigParser()
        config.read('profile.cfg')
        self.log_path = config.get('Config', 'log_path')
        self.log_prefix = config.get('Config', 'log_prefix')
        self.log_suffix = config.get('Config', 'log_suffix')

        self.initUI()

    def check_production(self):
        self.log_tracker = Log_Tracker(self)
        self.log_tracker.tick.connect(self.pbar.setValue)
        self.log_tracker.parseConfig()
        self.log_tracker.connectDb()
        self.log_tracker.trackLog()

    def initUI(self):
        self.resize(1400, 768)
        self.center()

        self.statusBar().showMessage('Checking Production Programs')

        self.wait_message = QLabel('Checking Production Programs')
        self.wait_message.setAlignment(Qt.Alignment(Qt.AlignHCenter))
        self.pbar = QProgressBar(self)
        self.pbar.setMinimum(0)
        self.pbar.setMaximum(100)

        vbox = QVBoxLayout()
        vbox.addWidget(self.wait_message)
        vbox.addWidget(self.pbar)
        tmpWidget2 = QWidget()
        tmpWidget2.setLayout(vbox)
        self.setCentralWidget(tmpWidget2)
        self.show()

        self.check_production()

        self.pbar.hide()
        self.statusBar().showMessage('Processing Information')

        self.tabs = QTabWidget()        
        mua_table = self.processInfo('MUA')
        bps_table = self.processInfo('BPS')
        obdua_table = self.processInfo('OBDUA')
        sua_table = self.processInfo('SUA')
        ngr_ftp_table = self.processInfo('NGR_FTP')
        bpspdfbill_table = self.processInfo('BpsPdfBill')
        disk_space_table = self.processInfo('Disk_Space')        
        self.tabs.addTab(mua_table, 'MUA')
        self.tabs.addTab(bps_table, 'BPS')
        self.tabs.addTab(obdua_table, 'ODBUA')
        self.tabs.addTab(sua_table, 'SUA')
        self.tabs.addTab(ngr_ftp_table, 'NGR_FTP')
        self.tabs.addTab(bpspdfbill_table, 'BpsPdfBill')
        self.tabs.addTab(disk_space_table, 'Disk_Space')
        self.setCentralWidget(self.tabs)

        self.statusBar().showMessage('Ready')

        self.setWindowTitle('Task Checker')    
        self.show()

    def center(self):

        qr = self.frameGeometry()
        cp = QDesktopWidget().availableGeometry().center()
        qr.moveCenter(cp)
        self.move(qr.topLeft())

    def processInfo(self, project_name):
        ...the processing... 
```

为了在进度条之前添加一个新屏幕（最初它会立即加载计算），我对 initUI() 进行了一些更改，并将计算部分移动到一个新的子程序 checkProd()，然后用一个按钮连接它：

```
import sys
import configparser
import getpass
import telnetlib
import time
import subprocess
from datetime import *

from log_tracker import *
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4 import QtCore
from PyQt4 import QtGui

class Task_Checker(QMainWindow):

    def __init__(self):
        super(Task_Checker, self).__init__()

        config = configparser.RawConfigParser()
        config.read('profile.cfg')
        self.log_path = config.get('Config', 'log_path')
        self.log_prefix = config.get('Config', 'log_prefix')
        self.log_suffix = config.get('Config', 'log_suffix')

        self.initUI()

    def check_production(self):
        self.log_tracker = Log_Tracker(self)
        self.log_tracker.tick.connect(self.pbar.setValue)
        self.log_tracker.parseConfig()
        self.log_tracker.connectDb()
        self.log_tracker.trackLog()

    def initUI(self):
        self.resize(1400, 768)
        self.center()

        btn_check = QPushButton('Check Lastest Status', self)
        btn_check.setToolTip('Click this if you want to check the lastest status in production')

        combo = QComboBox()
        dirlist = os.listdir(self.log_path)
        for f in dirlist:
            combo.addItem(f)

        QtCore.QObject.connect(btn_check, QtCore.SIGNAL('clicked()'), self.checkProd)

        hbox = QHBoxLayout()
        hbox.addWidget(btn_check)
        hbox.addWidget(combo)
        tmpWidget = QWidget()
        tmpWidget.setLayout(hbox)        
        self.setCentralWidget(tmpWidget)
        self.show()

    def checkProd(self):
        self.statusBar().showMessage('Checking Production Programs')

        self.wait_message = QLabel('Checking Production Programs')
        self.wait_message.setAlignment(Qt.Alignment(Qt.AlignHCenter))
        self.pbar = QProgressBar(self)
        self.pbar.setMinimum(0)
        self.pbar.setMaximum(100)

        vbox = QVBoxLayout()
        vbox.addWidget(self.wait_message)
        vbox.addWidget(self.pbar)
        tmpWidget2 = QWidget()
        tmpWidget2.setLayout(vbox)
        self.setCentralWidget(tmpWidget2)
        self.show()

        self.check_production()

        self.pbar.hide()
        self.statusBar().showMessage('Processing Information')

        self.tabs = QTabWidget()        
        mua_table = self.processInfo('MUA')
        bps_table = self.processInfo('BPS')
        obdua_table = self.processInfo('OBDUA')
        sua_table = self.processInfo('SUA')
        ngr_ftp_table = self.processInfo('NGR_FTP')
        bpspdfbill_table = self.processInfo('BpsPdfBill')
        disk_space_table = self.processInfo('Disk_Space')        
        self.tabs.addTab(mua_table, 'MUA')
        self.tabs.addTab(bps_table, 'BPS')
        self.tabs.addTab(obdua_table, 'ODBUA')
        self.tabs.addTab(sua_table, 'SUA')
        self.tabs.addTab(ngr_ftp_table, 'NGR_FTP')
        self.tabs.addTab(bpspdfbill_table, 'BpsPdfBill')
        self.tabs.addTab(disk_space_table, 'Disk_Space')

        self.setCentralWidget(self.tabs)

        self.statusBar().showMessage('Ready')

        self.setWindowTitle('Task Checker')    
        self.show()

    def center(self):

        qr = self.frameGeometry()
        cp = QDesktopWidget().availableGeometry().center()
        qr.moveCenter(cp)
        self.move(qr.topLeft())

    def processInfo(self, project_name):
        ...the processing... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:30:56.960

这是很多不必要的代码，但我设法从中解析出来的是，您正在主线程中进行大量计算，同时期望主线程中的另一个小部件也能保持响应能力。

这是使用 PyQt4（可能还有大多数使用主线程事件循环的 GUI 框架）时的常见缺陷。问题在于，当您启动应用程序时，主事件循环会不断轮询要从您的 GUI 处理的新事件。它期望每个操作都应该花费很短的时间来完成，或者定期将控制权交还给事件循环。现在，您的计算占用了主线程的所有可用性，而您的进度窗口试图做的任何事情都只是备份到队列中，等待事件循环获取它的机会。

对此的简单回答是：在单独的[QThread](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qthread.html)中进行任何繁重的计算，并通过信号与主线程通信。这将需要您进行一些改造。您不应该在任何类的 init 中添加任何繁重的东西。但是您已在第二个示例中通过将计算附加到按钮来解决此问题。好的开始。该按钮实际上应该在另一个线程中启动计算，因此不会阻塞主线程。

### [Qt4.7 线程基础](http://doc.qt.nokia.com/4.7-snapshot/thread-basics.html)

> **GUI 线程和工作线程**
> 如前所述，每个程序在启动时都有一个线程。该线程称为“主线程”（在 Qt 应用程序中也称为“GUI 线程”）。Qt GUI 必须在这个线程中运行。所有小部件和几个相关的类，例如 QPixmap，都不能在辅助线程中工作。辅助线程通常被称为“工作线程”，因为它用于从主线程卸载处理工作。
> ...
> **使用线程 线程**
> 基本上有两种用例：
> 1\. 通过使用多核处理器来加快处理速度。
> 2\. 通过卸载持久处理或阻塞对其他线程的调用来保持 GUI 线程或其他时间关键线程的响应。

如果您只想查看一些结果，作为快速解决方法，您可以定期[`QtGui.QApplication.processEvents()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qcoreapplication.html#processEvents)从您的计算方法中调用。这将经常允许事件循环清除挂起的操作。这样做会让你的进度小部件之类的东西真正发挥作用。本质上，您正在做的是手动“泵送”事件循环。虽然这不是最好的方法。通常它是为重量较轻的一次性东西保留的。如果您想要最佳性能，请将其移至线程。

# iphone - 从 superView 中删除 UIView

> ID：11355813
> 
> 赞同：3
> 
> 时间：2012-07-06T04:26:56.687
> 
> 标签：iphone, ios, uiview

我有两个 UIView，UIView1 和 UIView2。UIView2 被添加为 UIView1 的子视图，我想知道的是，如果我打电话

```
[UIView1 removeFromSuperview]; 
```

在 UIView2 上也应用 removeFromSuperView 的剂量？还是我也必须特别在 UIView2 上调用它...

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:39:01.143

```
UIView---->UIView1------>UIView2 
```

假设你想删除 UIView1 上的 UIView2，你可以这样写

```
[UIView2 removeFromSuperView]. 
```

假设你想删除 UIView 上的 UIView1，你可以这样写

`[UIView1 removeFromSuperView].`

在这种情况下，UIView2 也会被移除。因为当你移除任何视图时，视图的所有子视图都会被移除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T04:29:18.190

无需调用`[UIView2 removeFromSuperView]`，因为当您删除 UIView1 时，它也会删除其所有子视图。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T04:36:55.743

如果您认为所有 UIButtons、UILabels 和其他控件都继承自 UIView，并且您没有从视图中显式删除它们，那么很明显，从父视图中删除父视图也会导致所有子子视图的删除。

因此，您无需致电`[UIView2 removeFromSuperview]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T04:37:43.730

您将 UIView2 添加为 UIView1 的子视图。因此，如果您调用`[UIView1 removeFromSuperview];`意味着您在其中添加的内容以及 UIView1 从超级视图中删除的内容。所以不需要打电话`[UIView2 removeFromSuperView];`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T05:16:33.697

更好的是你必须创建主视图

```
UIView * main=[[[UIView alloc] initWithFrame:CGRectMake(20, 20, 20, 20)]autorelease];
[self.view addsubview main];
[main addsubview UIView1];
[main addsubview UIView2]; 
```

然后你打电话

```
[UIView1 removeFromSuperview]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T04:39:31.593

**removeFromSuperView**：将接收者与其父视图和窗口解除链接，并将其从响应者链中移除。

如果接收者的 superview 不为零，则 superview 释放接收者。如果您打算重用视图，请确保在调用此方法之前保留它，并在以后酌情再次释放它。

这里`[UIView2 removeFromSuperView]`将从 UIView1 中删除 UIView2

`[UIView1 removeFromSuperView]`还将从其 superView 中删除其所有子视图（可能是窗口或其他视图）

# css - 滚动条删除图像的右侧部分

> ID：11355814
> 
> 赞同：0
> 
> 时间：2012-07-06T04:27:03.003
> 
> 标签：css

样本：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
   <style type="text/css">
    div {display:inline-block; height:200px; overflow-x:hidden; overflow-y:auto;}
        a {display:block;}
    img {border:0;}
   </style>
</head>
<body>
   <div>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
   </div>
</body>
</html> 
```

除了在 Internet Explorer 和 Opera 中，图像的右侧部分被剪切。我想知道原因是什么以及它们如何在不同的浏览器中显示相同。

为了澄清问题，这里有一个类似的代码，没有*overflow-x:hidden*：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
   <style type="text/css">
    div {display:inline-block; height:200px; overflow:auto;}
        a {display:block;}
    img {border:0;}
   </style>
</head>
<body>
   <div>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
   </div>
</body>
</html> 
```

现在您会看到一个不必要的水平滚动条，除了在 IE 和 Opera 中。

提前谢谢了！

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:29:10.600

嘿，现在习惯了`vertical align` `top`

```
img{
vertical-align:top;
} 
```

现场演示[http://tinkerbin.com/GHQc5Qr7](http://tinkerbin.com/GHQc5Qr7)

* * *

在你的 css 中定义你的重置 css

更新的演示[http://tinkerbin.com/bwNH5c0I](http://tinkerbin.com/bwNH5c0I)

**更多信息** [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# ruby - Rails 3.2 遍历数组

> ID：11355820
> 
> 赞同：4
> 
> 时间：2012-07-06T04:27:40.753
> 
> 标签：ruby, arrays, ruby-on-rails-3.1, hash, iteration

我有一个看起来像这样的数组：

```
@shipment_products
[
  {"old_qty_shipped"=>"324", "product_id"=>"1", "qty_shipped"=>"12443"}
  {"old_qty_shipped"=>"4343423", "product_id"=>"3", "qty_shipped"=>"321344"}
  {"old_qty_shipped"=>"23", "product_id"=>"4", "qty_shipped"=>"321"}
] 
```

我希望最终能够做这样的事情

```
@shipment_products.each do |p|
  Product.adjust_qtys(p.old_qty_shipped, p.qty_shipped, p.product_id)
end 
```

我收到以下错误

```
NoMethodError (undefined method `qty_shipped' for #<ActiveSupport::HashWithIndifferentAccess:0x007f>) 
```

该数组的格式不完全适合执行此操作。我需要找到一种能够遍历键/值并提取属性的方法，这样我就可以调用我在模型中创建的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T04:56:26.163

检查以下代码。

```
 @shipment_products = [ {"old_qty_shipped"=>"324", "product_id"=>"1", "qty_shipped"=>"12443"}, {"old_qty_shipped"=>"4343423", "product_id"=>"3", "qty_shipped"=>"321344"} , {"old_qty_shipped"=>"23", "product_id"=>"4", "qty_shipped"=>"321"}]

    @shipment_products.each do |p|
      Product.adjust_qtys(p['old_qty_shipped'], p['qty_shipped'], p['product_id'])
    end 
```

# android - 如何使用此代码将音频文件作为附件发送

> ID：11355824
> 
> 赞同：0
> 
> 时间：2012-07-06T04:28:12.503
> 
> 标签：android, gmail

代码工作得很好。但不是作为附件发送的图像文件，我想附加一个录制的音频，比如 a.3gp 作为附件，它驻留在内存卡上。此代码需要进行哪些更改？

Mail.java 类是

```
package com.mycomp.android.test;

import java.util.Properties;

import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.mail.BodyPart;
import javax.mail.Message;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Mail extends javax.mail.Authenticator {

    private Multipart attachements;

    private String fromAddress = "x";
    private String accountEmail = "x";
    private String accountPassword = "";
    private String smtpHost = "smtp.gmail.com";
    private String smtpPort = "465"; // 465,587
    private String toAddresses = "x";
    private String mailSubject = "x";
    private String mailBody = "x";

    public Mail() {
        attachements = new MimeMultipart();

    }

    public Mail(String user, String pass) {
        this();
        accountEmail = user;
        accountPassword = pass;
    }

    public boolean send() throws Exception {

        Properties props = new Properties();
        //props.put("mail.smtp.user", d_email);
        props.put("mail.smtp.host", smtpHost);
        props.put("mail.smtp.port", smtpPort);
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.debug", "true");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.socketFactory.port", smtpPort);
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        try {
            Session session = Session.getInstance(props, this);
            session.setDebug(true);

            MimeMessage msg = new MimeMessage(session);
            // create the message part 
            MimeBodyPart messageBodyPart = new MimeBodyPart();
            //fill message
            messageBodyPart.setText(mailBody);
            // add to multipart
            attachements.addBodyPart(messageBodyPart);

            //msg.setText(mailBody);
            msg.setSubject(mailSubject);
            msg.setFrom(new InternetAddress(fromAddress));
            msg.addRecipients(Message.RecipientType.TO,
                    InternetAddress.parse(toAddresses));
            msg.setContent(attachements);

            Transport transport = session.getTransport("smtps");
            transport.connect(smtpHost, 465, accountEmail, accountPassword);
            transport.sendMessage(msg, msg.getAllRecipients());
            transport.close();
            return true;
        } catch (Exception e) {
            return false;
        }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
//      messageBodyPart.setFileName("filename");
        attachements.addBodyPart(messageBodyPart);
    }

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(accountEmail, accountPassword);
    }

    /**
     * Gets the fromAddress.
     * 
     * @return <tt> the fromAddress.</tt>
     */
    public String getFromAddress() {
        return fromAddress;
    }

    /**
     * Sets the fromAddress.
     *
     * @param fromAddress <tt> the fromAddress to set.</tt>
     */
    public void setFromAddress(String fromAddress) {
        this.fromAddress = fromAddress;
    }

    /**
     * Gets the toAddresses.
     * 
     * @return <tt> the toAddresses.</tt>
     */
    public String getToAddresses() {
        return toAddresses;
    }

    /**
     * Sets the toAddresses.
     *
     * @param toAddresses <tt> the toAddresses to set.</tt>
     */
    public void setToAddresses(String toAddresses) {
        this.toAddresses = toAddresses;
    }

    /**
     * Gets the mailSubject.
     * 
     * @return <tt> the mailSubject.</tt>
     */
    public String getMailSubject() {
        return mailSubject;
    }

    /**
     * Sets the mailSubject.
     *
     * @param mailSubject <tt> the mailSubject to set.</tt>
     */
    public void setMailSubject(String mailSubject) {
        this.mailSubject = mailSubject;
    }

    /**
     * Gets the mailBody.
     * 
     * @return <tt> the mailBody.</tt>
     */
    public String getMailBody() {
        return mailBody;
    }

    /**
     * Sets the mailBody.
     *
     * @param mailBody <tt> the mailBody to set.</tt>
     */
    public void setMailBody(String mailBody) {
        this.mailBody = mailBody;
    }
} 
```

SenderActivity 类是：

```
package com.mycomp.android.test;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MailSenderActivity extends Activity {

    private static final String GMAIL_EMAIL_ID = "xyz@gmail.com";
    private static final String GMAIL_ACCOUNT_PASSWORD = "xyz";
    private static final String TO_ADDRESSES = "xyz";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);

        writeFile();

        final Button send = (Button) this.findViewById(R.id.send);
        send.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                new MailSenderActivity.MailSender().execute();
            }
        });

    }

    private File imageFile;

    private boolean writeFile() {
        imageFile = new File(
                getApplicationContext().getFilesDir() + "/images/",
                "sample.png");

        String savePath = imageFile.getAbsolutePath();
        System.out.println("savePath :" + savePath + ":");

        FileOutputStream fileOutputStream = null;
        try {
            fileOutputStream = new FileOutputStream(savePath, false);
        } catch (FileNotFoundException ex) {
            String parentName = new File(savePath).getParent();
            if (parentName != null) {
                File parentDir = new File(parentName);
                if ((!(parentDir.exists())) && (parentDir.mkdirs()))
                    try {
                        fileOutputStream = new FileOutputStream(savePath, false);
                    } catch (FileNotFoundException e) {
                        e.printStackTrace();
                    }

            }
        }

        // here i am using a png from drawable resources as attachment. You can use your own image byteArray while sending mail. 
        Bitmap bitmap = BitmapFactory.decodeResource(
                MailSenderActivity.this.getResources(), R.drawable.english);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] imgBuffer = stream.toByteArray();

        boolean result = true;

        try {
            fileOutputStream.write(imgBuffer);
            fileOutputStream.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            result = false;
        } catch (IOException e2) {
            e2.printStackTrace();
            result = false;
        } finally {
            if (fileOutputStream != null) {
                try {
                    fileOutputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                    result = false;
                }
            }
        }

        return result;

    }

    class MailSender extends AsyncTask<Void, Integer, Integer> {

        ProgressDialog pd = null;

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onPreExecute()
         */
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(MailSenderActivity.this);
            pd.setTitle("Uploading...");
            pd.setMessage("Uploading image. Please wait...");
            pd.setCancelable(false);
            pd.show();

        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        @Override
        protected Integer doInBackground(Void... params) {

            Mail m = new Mail(GMAIL_EMAIL_ID, GMAIL_ACCOUNT_PASSWORD);

            String toAddresses = TO_ADDRESSES;
            m.setToAddresses(toAddresses);
            m.setFromAddress(GMAIL_EMAIL_ID);
            m.setMailSubject("This is an email sent using my Mail JavaMail wrapper from an Android device.");
            m.setMailBody("Email body.");

//          try {
//              ZipUtility.zipDirectory(new File("/mnt/sdcard/images"),
//                      new File("/mnt/sdcard/logs.zip"));
//          } catch (IOException e1) {
//              Log.e("MailApp", "Could not zip folder", e1);
//          }

            try {
                String path = imageFile.getAbsolutePath();
                System.out.println("sending path:" + path + ":");
                m.addAttachment(path);

                // m.addAttachment("/mnt/sdcard/logs.zip");

                if (m.send()) {
                    System.out.println("Message sent");
                    return 1;
                } else {
                    return 2;
                }

            } catch (Exception e) {
                Log.e("MailApp", "Could not send email", e);
            }
            return 3;
        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
         */
        @Override
        protected void onPostExecute(Integer result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            pd.dismiss();

            if (result == 1)
                Toast.makeText(MailSenderActivity.this,
                        "Email was sent successfully.", Toast.LENGTH_LONG)
                        .show();
            else if (result == 2)
                Toast.makeText(MailSenderActivity.this, "Email was not sent.",
                        Toast.LENGTH_LONG).show();
            else if (result == 3)
                Toast.makeText(MailSenderActivity.this,
                        "There was a problem sending the email.",
                        Toast.LENGTH_LONG).show();

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T04:28:19.527

您只需将音频文件转换为`byte[]`格式并通过附件发送：

```
private byte[] getByteArrayFromAudio(String filePath) throws FileNotFoundException, IOException {
    File file = new File(filePath);
    System.out.println(file.exists() + "!!");

    FileInputStream fis = new FileInputStream(file);
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    byte[] buf = new byte[1024];
    try {
        for (int readNum; (readNum = fis.read(buf)) != -1;) {
            bos.write(buf, 0, readNum); 
            System.out.println("read " + readNum + " bytes,");
        }
    } catch (IOException ex) {
        Log.d("error","error");
    }
    byte[] bytes = bos.toByteArray();

    return bytes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:36:20.487

在`sender activity class`您可以使用这样的东西将您的音频文件转换为`byte array`：

```
 try {
        InputStream is = new BufferedInputStream(new FileInputStream("sdcard/bbb.wav"));
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
ByteArrayOutputStream bos = new ByteArrayOutputStream();
byte[] b = new byte[1024];
while ((int bytesRead = is.read(b)) != -1) {
   bos.write(b, 0, bytesRead);
}
byte[] bytes = bos.toByteArray(); 
```

`// here i am using a png from drawable resources as attachment. You can use your own image byteArray while sending mail.`用代码替换它

我没有测试过它，但它应该可以工作。

# node.js - 通过 npm 安装 markdown 解析器时出现“错误的架构”

> ID：11355827
> 
> 赞同：0
> 
> 时间：2012-07-06T04:28:25.403
> 
> 标签：node.js, npm

我在 Mac OS X 10.7.4 上。当我尝试安装`robotskirt`or`node-discount`时，我得到了错误的架构错误。例子：

```
[1/2] cxx: src/markdown.cc -> build/Release/src/markdown_1.o
[2/2] cxx_link: build/Release/src/markdown_1.o -> build/Release/markdown.node
ld: warning: ignoring file ./libmarkdown.a, file was built for archive which is not the architecture being linked (i386)
Waf: Leaving directory `/Users/jong/node_modules/discount/build'
'build' finished successfully (2.639s)
discount@0.2.3 node_modules/discount 
```

和机器人裙：

```
[1/7] cc: src/markdown.c -> build/Release/src/markdown_1.o
[2/7] cc: src/array.c -> build/Release/src/array_1.o
[3/7] cc: src/buffer.c -> build/Release/src/buffer_1.o
[4/7] cc: src/html.c -> build/Release/src/html_1.o
[5/7] cxx: src/robotskirt.cc -> build/Release/src/robotskirt_2.o
[6/7] cxx_link: build/Release/src/robotskirt_2.o build/Release/src/markdown_1.o build/Release/src/array_1.o build/Release/src/buffer_1.o build/Release/src/html_1.o -> build/Release/robotskirt.node
[7/7] cc_link: build/Release/src/markdown_1.o build/Release/src/array_1.o build/Release/src/buffer_1.o build/Release/src/html_1.o -> build/Release/libsundown.dylib
ld: warning: ignoring file Release/src/markdown_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/array_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/buffer_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/html_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/markdown_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/array_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/buffer_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
ld: warning: ignoring file Release/src/html_1.o, file was built for unsupported file format which is not the architecture being linked (i386)
Waf: Leaving directory `/Users/jong/node_modules/robotskirt/build'
'build' finished successfully (0.406s)
robotskirt@0.2.5 node_modules/robotskirt 
```

对我来说，这看起来像是一个 C 编译器问题，但我对此一无所知。我打开的票：[https](https://github.com/benmills/robotskirt/issues/20#issuecomment-6794474) ://github.com/benmills/robotskirt/issues/20#issuecomment-6794474，https : [//github.com/visionmedia/node-discount/issues/20](https://github.com/visionmedia/node-discount/issues/20)。

任何人都知道我该如何解决这个问题，或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:55:57.423

您的路径上可能有多个 C 编译器，或者一个 C 编译器和一个不匹配的链接器（特别是，一个用于 x86，一个用于 x64）。使用“which -a gcc”和“which -a ld”找出编译器和链接器的运行位置。如果这些命令输出不止一件事，您将需要编辑 PATH 环境以变量排除其中一个目录并控制运行哪个版本。

# ajax - JSF：ajax 不适用于嵌套数据列表

> ID：11355830
> 
> 赞同：1
> 
> 时间：2012-07-06T04:28:46.707
> 
> 标签：ajax, jsf, primefaces, nested-datalist

我有一个 ul orderlist 多个列表项，最后一个列表项包含不同运输选项的下拉列表。

```
<ul class="shipping_group">
    <p:dataList id="cartOrderItemList" rendered="#{ not empty cart.cartSummary.orderItems}"
        type="none" var="orderItem" value="#{cart.cartSummary.orderItems}">
    <li>
        <div class="item"></div>
        <div class="finishing"></div>
        <div class="qty"></div>
        <div class="item_subtotal"></div>
    </li>
    </p:dataList>
    <li>
        <div class="shipping_method">
            <p>These items will ship together. Choose Shipping Method:</p>
            <p:selectOneMenu styleClass="shipping_select" value="#{cart.cartSummary.shippingMethod}">  
                <f:selectItems value="#{cart.cartSummary.shippings}" var="rate" itemValue="#{rate.method}" itemLabel="#{rate.displayNameDesc}"/>  
                <p:ajax update="shippingMethodText shippingMethod2Text" listener="#{cart.updateShippingMethod}" />
            </p:selectOneMenu>
        </div>  
    </li>
</ul> 
```

在我的代码的某个地方，我有这个：

```
<span class="shipping">Total Shipping Cost: <strong>
    <h:outputText id="shippingMethodText" value="#{cart.cartSummary.shippingPrice}">
    <f:convertNumber currencySymbol="$" type="currency" />
    </h:outputText></strong>
</span> 
```

以及支持bean的方法：

```
Cart.java
private CartSummary cartSummary;
private List shippings
public void updateShippingMethod(){ .... }

CartSummary.java
private List<OrderItem> orderItems; 
```

以下是基本功能：

1.  下拉选择更改
2.  updateShippingMethod() 将被触发
3.  shippingMethodText 将得到更新。

都好。直到...我用另一个数据列表嵌套了整个结构。

```
<!-- Cart Group -->
<p:dataList id="cartGroupList" rendered="#{not empty cart.cartSummary.cartGroups}" type="none"
    var="group" value="#{cart.cartSummary.cartGroups}">
    <ul class="shipping_group">
        <p:dataList id="shipping_group" type="none" var="orderItem" value="#{group.orderItems}">
        <li>
            <div class="item"></div>
            <div class="finishing"></div>
            <div class="qty"></div>
            <div class="item_subtotal"></div>
        </li>
        </p:dataList>
        <li>
            <div class="shipping_method">
                <p>These items will ship together. Choose Shipping Method:</p>
                <p:selectOneMenu styleClass="shipping_select" value="#{cart.cartSummary.shippingMethod}">  
                    <f:selectItems value="#{cart.cartSummary.shippings}" var="rate" itemValue="#{rate.method}" itemLabel="#{rate.displayNameDesc}"/>  
                    <p:ajax update="shippingMethodText" listener="#{cart.updateShippingMethod}" />
                </p:selectOneMenu>
            </div>  
        </li>
    </ul>
</p:dataList> 
```

随着相应的 Backing bean 的变化：

```
Cart.java
private CartSummary cartSummary;
public void updateShippingMethod(){ .... }

CartSummary.java
private List<CartGroup> cartGroups; 

CartGroup.java
private List<OrderItem> orderItems
private List shippings 
```

侦听器中的方法没有变化。不知何故，没有触发任何js。我尝试在 primefaces.js.jsf 和 jsf.js.jsf 中进行调试。但是没有断点被击中。我正在使用 primefaces 3.4 和 glassfish faces 2.1.4

JSF 将哪些 js 文件用于 ajax 函数？JSF 使用与“普通”jquery 相同的选择器，对吗？它如何找到选择器并捕获事件？

非常感谢您的任何建议。

# objective-c - 具有自定义返回类型的方法？

> ID：11355831
> 
> 赞同：0
> 
> 时间：2012-07-06T04:29:01.420
> 
> 标签：objective-c, cocoa-touch, interface-builder

如何创建具有自定义返回类型的方法？

我基本上想返回**“视图控制器”**并进一步使用与界面构建器中的 IBAction 相同的方法并指向一个按钮......

我基本上想调用下面的方法或创建一个可以使用按钮调用的自定义方法......有办法吗？

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController 

{ 
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController labelContents]];
    if(currentIndex == self.modelArray.count-1)
    {
        return nil;
    }
    ContentViewController *contentViewController = [[ContentViewController alloc] init];
    contentViewController.labelContents = [self.modelArray objectAtIndex:currentIndex + 1];
return contentViewController; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:33:46.330

您可以创建一个方法并将其连接到按钮

。H

```
 - (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController ;     
 -(IBAction)myMethod; //connect this to your button 
```

.m

```
-(IBAction)myMethod
 {
    //assuming you want you want to push to returned view controller
    [self.navigationController pushViewController:[self pageViewController:viewController viewControllerAfterViewController:viewController2] animated:YES];        
 }

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController 
 { 
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController labelContents]];
    if(currentIndex == self.modelArray.count-1)
    {
    return nil;
    }

 ContentViewController *contentViewController = [[ContentViewController alloc] init];
 contentViewController.labelContents = [self.modelArray objectAtIndex:currentIndex + 1];
 return contentViewController; 
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-06T04:37:54.590

IBAction 只是用作提示，它不是“绑定”。这意味着您可以通过以下几种方式之一做您想做的事：

1.  以编程方式。使用 @selector(yourActionMethod:) 在类似 viewDidLoad 中设置按钮的操作

2.  “技巧”xcode；首先将方法设置为 IBAction，然后通过拖放进行连接，然后更改方法的声明/实现。它会工作的。

# css - 如何为整个文档重新定义一个 CSS 类？

> ID：11355832
> 
> 赞同：1
> 
> 时间：2012-07-06T04:29:01.890
> 
> 标签：css

所以我有 style.css 定义了我所有的 CSS 类。但是我想在不修改 style.css 的情况下为整个页面重新定义一个类。我知道我可以通过在每个元素上使用 style 属性来覆盖 CSS 属性，但我不想这样做。

因此，假设我在 style.css 中定义了 colortext 类，其中 color:blue; 但我希望它是颜色：红色；一整页。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:33:12.267

你总是可以放置一个

```
<style type="text/css">
    .colortext { color: red; }
</style> 
```

在`<head>`标签内的某个位置的 HTML 文档中......但是，如果可能的话，我建议您只需在样式表中添加一条规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:31:43.283

现在定义您的`body id`并`css`像这样执行此操作

```
<body id="home">
<p class="red">hello</p>
</body> 
```

**CSS**

```
#home .red{
color:red;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T04:34:05.823

添加`style`标签顶部的结束标签并创建相同的类添加每个元素`!important`

```
 .old_class{
        color: new_value !important;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T04:35:59.583

覆盖是一种选择

```
* { color:red !important; } 
```

这不是一个好方法，（但是，我认为这听起来像是他在暗示他不想使用`id`s 或`class`s ）

# php - mysql更新多列单行语句vs多语句

> ID：11355837
> 
> 赞同：1
> 
> 时间：2012-07-06T04:29:21.573
> 
> 标签：php, mysql

仅当 3 个值中的任何一个不同时，我才尝试更新 mysql 中的一行中的 3 个列值。

说我有一张桌子

**x,y,z,id 列**

我目前，

方法A

```
update foo set x = 'x_value', y = 'y_value', z = 'z_value' where id = 'unique_id'
and ((x <> 'x_value') or (y <> 'y_value') or (z <> 'z_value')) 
```

我对mysql的理论基准测试/架构了解不多，我想知道这些陈述是否

方法B

```
update foo set x ='x_value' where id = 'unique_id' and ((x <> 'x_value')); 
update foo set y ='y_value' where id = 'unique_id' and ((y <> 'y_value')); 
update foo set z ='z_value' where id = 'unique_id' and ((z <> 'z_value')); 
```

更好或更优越。

我意识到如果只有一列发生了变化，方法 B 只会执行一次写入和 3 次读取，而方法 A 会执行 3 次写入和 3 次读取。我只是不知道它是否更耗时，因为方法 B 需要查找索引行 3 次。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:13:23.790

根据我在评论中读到的内容，我同意 octern 的观点，即您应该简单地运行更新。它将使用更少的资源，并且基于您的表引擎，它将在更短的时间内释放您的表/行锁，从而使您的表性能更好。

但是，如果您坚持在写入之前进行检查，请通过 PHP 执行此操作。只需执行一个 select 语句，比较 PHP 中的代码，然后更新相应的表。例如：

```
$res = mysql_query("SELECT * FROM table1 WHERE PK_ID = '0'");
$arr = mysq_fetch_assoc($res);
$更新=假；
if ($arr["field_1"] != $_POST["field_1"])
{
    $更新=真；
}

if ($arr["field_2"] != $_POST["field_2"])
{
    $更新=真；
}

如果（$更新）
{
    mysql_query(sprintf("UPDATE table1 SET field_1 = '%s', field_2 = '%s'", $_POST["field_1"], $_POST["field_2"]));
}
如果 （
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:42:26.660

方法 B 的成本当然会更高，因为您进行了 3 次不同的选择，而方法 A 的单选/条件更新。

它几乎是 1 个语句与 3 个语句的比较。1 会更快，因为它们都是更新语句。

# google-apps-script - 何时/如何在 Dart 中编写应用程序脚本

> ID：11355839
> 
> 赞同：5
> 
> 时间：2012-07-06T04:29:22.373
> 
> 标签：google-apps-script

是否可以使用 Dart 和 Dart->JS 翻译器创建应用程序脚本？

我猜答案是否定的，但我有兴趣了解集成这两个开发环境的任何计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:21:19.223

你猜对了，答案是否定的。你不能在 Dart 中编写 Apps 脚本。

虽然您的第二个问题只能由 Google 员工回答，但作为杰出贡献者，我可以说，如果存在这样的计划，它们可能不会在不久的将来出现。我猜它不会在一年之内出现。

Google Apps Script 有一组非常具体的库和用法，我认为这不是 Dart 的团队目标。我认为这种集成对任何一个团队（Apps Script 和 Dart）都没有太大的“吸引力”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-21T00:43:26.777

一位 Google 员工在[DartConf 2018 闪电演讲](https://www.youtube.com/watch?v=S0fEqbrIiBM)中展示了在 App Script 中使用 Dart。他承诺它将是开源的。演示的解决方案包括 Dart 中的 App Script 库、通过 Google Drive 自动构建和部署。

# python - 如何检测客户端用于访问 Django Web 服务的实际 URL？

> ID：11355843
> 
> 赞同：0
> 
> 时间：2012-07-06T04:30:07.517
> 
> 标签：python, django, wsgi

我已经实现了一个身份验证方案，它模仿了 Amazon 在我的 Django Web 服务上使用 S3 所做的事情。每个请求都使用秘密进行签名。要签名的字符串包括正在访问的资源的 URL。

例如，如果客户端向[http://myservices.org/users](http://myservices.org/users)发出 GET 请求，则客户端必须构造一个`string_to_sign`包含`http://myservices.org/users`. 当服务器处理请求时，它还将构造一个`string_to_sign`并且可以包含相同的 URL，基于它从 WSGI 包装器请求对象中学习到的信息。

我的问题是，当客户端决定包含端口号（例如`http://myservices.org:80/users`）时，服务器代码构造不正确`string_to_sign`，因为我不知道如何获取客户端使用的实际 URL。WSGI 包装器不会让我知道 URL 包含端口号。

有没有办法让 Django 应用程序学习作为 HTTP 请求一部分的实际 URL？我是否需要设置某种位于 WSGI 包装器前面的请求处理程序才能访问原始 HTTP 请求并自己拉出 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:15:17.190

你要求的是不可能的。您所拥有的只是请求的第一行，其中不包括网络位置（主机名和端口号）。您通常会得到一个 Host 标头（HTTP 1.0 或更高版本），它可能包含也可能不包含端口号。

您可能想查看 django-fost-authn，它实现了与亚马逊非常相似的方案。

*   [http://pypi.python.org/pypi/django-fost-authn/](http://pypi.python.org/pypi/django-fost-authn/)
*   [https://github.com/Felspar/django-fost-authn](https://github.com/Felspar/django-fost-authn)

即使您不使用它并且更喜欢自己的，您也应该能够在签名前计算中看到请求的规范化是如何完成的。最相关的观察是它只使用 HTTP 请求本身内部的因素。它允许在已签名的标头集中添加自定义标头，并且您可以坚持要对 Host 标头进行签名。

尤其看fost-authn/signature.py中的文档是如何生成的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:14:47.740

尽管它可能并不总是适用于不同的浏览器和 HTTP 版本，但您可以使用`request.META['HTTP_HOST']`. 对于我现在的本地开发服务器，这将返回“localhost:8000”，然后我可以用中间的冒号将其拆分，以分别获取这两个部分。

此外，您可能会`get_host()`在 HttpRequest 类的方法中找到一些用途。从[Django 文档](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.get_host)：

> 使用来自 HTTP_X_FORWARDED_HOST（如果启用 USE_X_FORWARDED_HOST）和 HTTP_HOST 标头的信息，按该顺序返回请求的原始主机。如果它们不提供值，则该方法使用 SERVER_NAME 和 SERVER_PORT 的组合，如 PEP 3333 中所述。
> 
> 示例：“127.0.0.1:8000”

# c# - 计时器还是线程？

> ID：11355844
> 
> 赞同：0
> 
> 时间：2012-07-06T04:30:16.387
> 
> 标签：c#, multithreading, timer

我有一个写入数据库（sqlserver）的方法（比如说method1）和另一个尝试在一段时间后访问同一个数据库并更新由method1创建的数据行的方法（比如说method2）。

当method1由于LAN断开而无法访问db时出现问题（这不是例外，这是我的软件中肯定会出现的场景，深入细节会使问题变得过于复杂）如果method1无法访问db method2不能工作。

我想要做的是让方法 1 将值存储到本地数据库而不是服务器，如果 LAN 断开连接，并且一旦它在本地数据库中输入值，应用程序应该在 10-15 秒后开始尝试访问服务器。

我应该使用什么计时器或创建一个新线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:32:32.123

要在某个时间间隔后执行某个操作，[Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)可能是最好的选择。

> 计时器：在应用程序中生成重复事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:37:16.633

您需要在将来的某个时间启动长时间运行（可能冻结 GUI）的操作。您可以使用计时器在间隔后开始操作，并使用线程来执行长时间的后台操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:35:57.470

下面的链接在 c# 中演示了一个通用轮询组件，它以指定的时间间隔运行并使用后台线程来执行指定的用户操作。您可以使用此操作检查本地数据库并执行必要的操作。

示例用法：

```
IPoller poller = new UrlPoller(args[0], TimeSpan.FromSeconds(7));
IPolling pollingComponent = new Polling.Core.Polling(poller);
pollingComponent.SubscribeForPollingUpdates(PollingAction);
pollingComponent.Start(); 
```

有关代码和完整示例，请参见：

[http://www.avantprime.com/blog/24/an-example-of-repeating-code-using-a-worker-thread-without-using-timers-c](http://www.avantprime.com/blog/24/an-example-of-repeating-code-using-a-worker-thread-without-using-timers-c)

# ruby-on-rails - 精炼厂图像未加载 - 蜻蜓错误

> ID：11355846
> 
> 赞同：8
> 
> 时间：2012-07-06T04:30:22.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms, dragonfly-gem

我正在开发一个在本地运行良好的refinerycms rails 应用程序，现在我已将其移至我的VPS，我遇到了我通过refinerycms 上传的图像未加载的问题，我一直在阅读我需要升级我的 imagemagick 版本。我从 6.2.8 升级到 6.7.8。现在图像都加载到某些页面上，但不是在管理端。

是什么导致了这个问题？这是错误的堆栈跟踪。

```
Dragonfly::Shell::CommandFailed (Command failed (convert '/var/www/vhosts/tomstestsite.us/PersonalTrainingKT/public/system/refinery/images/2012/06/03/16_36_48_339_pamLemke_after.jpg' '-resize' '225x255>' '/tmp/dragonfly20120705-7812-1xb3pce') with exit status 127):
  dragonfly (0.9.12) lib/dragonfly/shell.rb:29:in `raise_shell_command_failed'
  dragonfly (0.9.12) lib/dragonfly/shell.rb:23:in `run'
  dragonfly (0.9.12) lib/dragonfly/image_magick/utils.rb:17:in `convert'
  dragonfly (0.9.12) lib/dragonfly/image_magick/processor.rb:103:in `convert'
  dragonfly (0.9.12) lib/dragonfly/image_magick/processor.rb:27:in `resize'
  dragonfly (0.9.12) lib/dragonfly/image_magick/processor.rb:87:in `thumb'
  dragonfly (0.9.12) lib/dragonfly/function_manager.rb:39:in `call'
  dragonfly (0.9.12) lib/dragonfly/function_manager.rb:39:in `block (2 levels) in call_last'
  dragonfly (0.9.12) lib/dragonfly/function_manager.rb:38:in `catch'
  dragonfly (0.9.12) lib/dragonfly/function_manager.rb:38:in `block in call_last'
  dragonfly (0.9.12) lib/dragonfly/function_manager.rb:37:in `each'
  dragonfly (0.9.12) lib/dragonfly/function_manager.rb:37:in `call_last'
  dragonfly (0.9.12) lib/dragonfly/processor.rb:5:in `process'
  dragonfly (0.9.12) lib/dragonfly/job.rb:79:in `apply'
  dragonfly (0.9.12) lib/dragonfly/job.rb:253:in `block in apply'
  dragonfly (0.9.12) lib/dragonfly/job.rb:253:in `each'
  dragonfly (0.9.12) lib/dragonfly/job.rb:253:in `apply'
  dragonfly (0.9.12) lib/dragonfly/response.rb:25:in `to_response'
  dragonfly (0.9.12) lib/dragonfly/server.rb:43:in `block in call'
  dragonfly (0.9.12) lib/dragonfly/server.rb:39:in `catch'
  dragonfly (0.9.12) lib/dragonfly/server.rb:39:in `call'
  dragonfly (0.9.12) lib/dragonfly/middleware.rb:11:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
  passenger (3.0.11) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  passenger (3.0.11) lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
  passenger (3.0.11) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  passenger (3.0.11) lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  passenger (3.0.11) lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `block in handle_spawn_application'
  passenger (3.0.11) lib/phusion_passenger/utils.rb:479:in `safe_fork'
  passenger (3.0.11) lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:180:in `start'
  passenger (3.0.11) lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:219:in `block (2 levels) in spawn_rails_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:214:in `block in spawn_rails_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  passenger (3.0.11) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  passenger (3.0.11) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.11) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.11) helper-scripts/passenger-spawn-server:99:in `<main>' 
```

**更新**

[我已按照此处](https://github.com/resolve/refinerycms/issues/1781#issuecomment-6816678)的建议将以下代码添加到我的 config/application.rb 文件中，它帮助显示了一些文件，但我仍然无法通过应用程序上传文件，此堆栈跟踪的一部分如下所示.

config/application.rb 包含这个

```
initializer 'override-image-magick-paths', :after => 'attach-refinery-images-with-
    dragonfly' do
      app=Dragonfly[:refinery_images]
      app.configure_with(:imagemagick)
      app.configure do |c|
        c.convert_command = "/usr/local/bin/convert"          # defaults to "convert"
        c.identify_command = "/usr/local/bin/identify"        # defaults to "identify"
      end
    end 
```

堆栈跟踪

```
 Dragonfly::Shell::CommandFailed (Command failed (identify '/tmp/RackMultipart20120708-20096-4m1k9j') with exit status 127):
      dragonfly (0.9.12) lib/dragonfly/shell.rb:29:in `raise_shell_command_failed'
      dragonfly (0.9.12) lib/dragonfly/shell.rb:23:in `run'
      dragonfly (0.9.12) lib/dragonfly/image_magick/utils.rb:34:in `raw_identify'
      dragonfly (0.9.12) lib/dragonfly/image_magick/utils.rb:24:in `identify'
      dragonfly (0.9.12) lib/dragonfly/image_magick/analyser.rb:44:in `format'
      dragonfly (0.9.12) lib/dragonfly/function_manager.rb:39:in `call'
      dragonfly (0.9.12) lib/dragonfly/function_manager.rb:39:in `block (2 levels) in call_last'
      dragonfly (0.9.12) lib/dragonfly/function_manager.rb:38:in `catch'
      dragonfly (0.9.12) lib/dragonfly/function_manager.rb:38:in `block in call_last'
      dragonfly (0.9.12) lib/dragonfly/function_manager.rb:37:in `each'
      dragonfly (0.9.12) lib/dragonfly/function_manager.rb:37:in `call_last'
      dragonfly (0.9.12) lib/dragonfly/analyser.rb:25:in `analyse'
      dragonfly (0.9.12) lib/dragonfly/job.rb:247:in `analyse' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-05T04:30:41.467

我只是重新安装了 imagemagick 并且它起作用了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T17:29:06.787

我从 /usr/bin/convert -> /usr/local/bin/convert 和 /usr/bin/identify -> /usr/local/bin/identify 创建了一个符号链接，这似乎解决了我的问题。

```
$ cd /usr/bin
$ ln -s /usr/local/bin/convert convert
$ ln -s /usr/local/bin/identify identify 
```

我假设即使我在我的 config/application.rb 文件中指定了它，蜻蜓仍然没有获取我的转换和识别位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T04:50:50.853

您可能必须提供完整路径`convert`：

```
config/initializers/dragonfly.rb:

app.configure do |c|
  c.convert_command = "/usr/bin/convert"
end 
```

更改`/usr/bin/convert`为 的正确路径`convert`，您可以通过`whereis convert`在 VPS shell 上运行来找到该路径。

[文档](http://markevans.github.com/dragonfly/file.ImageMagick.html#Configuration)中的更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T19:36:36.123

尝试安装炼油厂图像 gem：

```
Gemfile:
   gem 'refinerycms-page-images', '~>1.0.3' //refinery v1 compatible (v2 available also) 
```

然后在你的模型中：

```
belongs_to :imagesizeyouwant, :class_name => 'Image' 
```

如果您查看 Image 类，您会发现处理图像的设置非常好。您可以在管理工具的 Refinery 设置页面中添加图像尺寸。如果您有自定义引擎，只需将 :imagesizeyouwant 更改为该大小（我的是 :thumbnail）。

当您发布图像时，请查看 identify 命令的输出并尝试自行运行它。您的系统可能有不同的参数用于 ImageMagick 二进制文件，或者发送给它的尺寸不被理解。尝试发布 Dragonfly 在 shell 中调用的实际命令的输出，以便我们更好地查看。

# iphone - 可变参数。如何将可变参数传递给方法

> ID：11355851
> 
> 赞同：0
> 
> 时间：2012-07-06T04:30:44.897
> 
> 标签：iphone, objective-c, ios

我创建了一个接受可变参数的方法，例如

```
- (NSDictionary *) getImagePixelsAtLocation: (int) locations,...NS_REQUIRES_NIL_TERMINATION 
```

但是当我向这个类方法发送消息时，被调用方法中位置变量的值是 0（我传递了多少参数都没有关系）。

该方法接收标量数据类型。我的问题是：我们可以将标量变量作为可变参数传递给方法吗？如果是，我做错了什么？

方法定义为：

```
- (NSDictionary *) getImagePixelsAtLocation: (int) pixel1,...
{
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    va_list args;
    va_start(args, pixel1);

    //processing logic

    va_end(args);
} 
```

这就是我发送消息的方式：

```
[HSImageProcessing getImagePixelsAtLocation:1,2,nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:12:40.673

实际上，您的代码中有一个明显的缺陷：当可变参数函数以 nil 终止时，接受的类型必须是对象。您不能将 int 与 nil 或 NULL 或 [NSNull null] 进行比较，这违背了 nil 终止的目的，并有效地挫败了使用标准 for 和 for-in 循环进行迭代的所有机会。此外，NSDictionary 对存储非对象类型不太满意，并且很乐意让编译器抱怨。我重写了它以接受 NSNumber*，并输出一个数字字典。

```
- (NSDictionary*) getImagePixelsAtLocation: (NSNumber*) pixel1,...
{
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    va_list args;
    va_start(args, pixel1);

    //processing logic
    for (NSNumber* arg = pixel1; arg != nil; arg = va_arg(args, NSNumber*)) {
        [dict setObject:arg forKey:[NSString stringWithFormat:@"%i", [arg intValue]]];
    }

    va_end(args);
    return dict;
} 
```

只需要一点额外的代码就可以让同样的调用也能正常工作：

```
[self getImagePixelsAtLocation:[NSNumber numberWithInt:1],[NSNumber numberWithInt:2],nil]; 
```

# ruby-on-rails - 在 Ruby 中异步加载图像

> ID：11355853
> 
> 赞同：3
> 
> 时间：2012-07-06T04:30:49.007
> 
> 标签：ruby-on-rails, ruby, asynchronous

我有一个 ruby​​ 脚本，它将从另一台服务器获取一大堆图像，然后用 ImageMagik 将它们拼接在一起，一切正常，唯一的问题是当我必须获取的图像数量增加时性能不好因为它们正在同步加载。

我需要一些可以异步加载所有图像的东西，然后告诉我它们什么时候准备好，以便我可以将它们拼接在一起。

我不是在寻找后台进程，因为有一个用户在这个请求的另一端等待一个拼接在一起的图像。

有任何想法吗？

干杯，

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:42:10.033

您可以使用像[Typhoeus](https://github.com/typhoeus/typhoeus)这样的库来获取图像。它可以并行执行 HTTP 请求。

# javascript - 如果使用 JavaScript 登录失败，如何在登录页面中显示消息

> ID：11355854
> 
> 赞同：0
> 
> 时间：2012-07-06T04:30:55.933
> 
> 标签：javascript, html, forms, servlets

我开发了一个登录页面，其中用户 id 和最小密码长度验证由 JavaScript 完成，并且我有一个连接到 DB 并验证用户的 servlet。有人可以告诉我身份验证失败时如何在同一登录页面中显示消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:41:30.067

HTML（将其放在应显示错误消息的页面 HTML 中）：

```
<span id="login_failed"></span> 
```

JavaScript：

```
<script type="text/javascript">
var login_success = false;  /* set this to true if the login was a success */

if(login_success == false)
{
    document.getElementById("login_failed").innerHTML = "Login Failed.";
}
else
{
     window.location = "http://www.yourpage.com/login_success.html";
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:47:24.133

像这样从您的 servlet 发送登录失败的标志值。

```
request.setAttribute("loginResult", true); 
```

现在在 JSP 中获取这个值。它的默认值为 false。如果为真，则显示错误消息。

```
<%
    if(request.getAttribute("loginResult") != null && request.getAttribute("loginResult") == "true"){
%>
 <p style="color:red"> Login Failed. Please try again. </p>
<%
}
%> 
```

对于 Javascript 调用一个函数来显示错误，而不是 `<p style="color:red"> Login Failed. Please try again. </p>`从我上面的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:59:53.987

在你的 web.xml 中放这个

```
<login-config>
  <auth-method>FORM</auth-method>
  <form-login-config>
    <form-login-page>/login.jsp</form-login-page>
    <form-error-page>/login.jsp?loginerror=100</form-error-page>
  </form-login-config>
</login-config> 
```

现在在你的 login.jsp 中放置这个 javascript 来读取 loginerror 参数并调用它 ondocument.ready (onload())

```
function gup()
{
  var name = 'loginerror';
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    //here you don't have login errors
  else
    //here you have login error
} 
```

请享用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T04:34:54.950

```
if(/*something fails*/){
    alert("Login fails!");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T04:43:31.717

在 Servlet 中打印 JavaScript。

*   警报消息：

    ```
    System.out.println("<script>alert('Login fail.')</script>"); 
    ```

*   再次重定向到登录页面：

    ```
    System.out.println("<script>window.location='loginUrl'</script>"); 
    ```

# python - 我应该为 facebook OAuth 和 OpenGraph 使用什么 python 库

> ID：11355857
> 
> 赞同：2
> 
> 时间：2012-07-06T04:31:37.900
> 
> 标签：python, facebook, facebook-graph-api, facebook-opengraph, django-socialauth

我设计了一个 Facebook 应用程序，需要添加 OAuth、Open Graph 以获得完整的功能。考虑到我对 Open Graph 和小 JS 一无所知，我想使用一个小的总结（python lib）来提供这些功能..

我在 Google、stackoverflow 上进行了搜索，发现很少有项目提供了一些很酷的功能，但我无法选择..

蟒蛇库：

1.  [django-social-auth](https://github.com/omab/django-social-auth)
2.  [凡詹戈](https://github.com/jgorset/fandjango/)
3.  [面子](https://github.com/jgorset/facepy)
4.  [pyFacebook](https://github.com/sciyoshi/pyfacebook/) - 我认为这不提供 OAuth。

我还在我的项目中使用 Google Data API。所以，更好的选择是 django-social-auth 但我不确定我是否可以用它来做 Open Graph ..

谁能告诉我什么是最好的、维护的、好的库？（如果不在上面的列表中，请注明）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:19:58.893

我强烈建议 django-social-auth。任何能够解析 JSON 的库都将支持 Open Graph，因为 FQL 和 Graph API 数据都可以从 Facebook 的 API (REST) 中检索。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:29:41.663

`django-social-auth`如果您想构建一个允许用户使用 Facebook 登录的网站，这真的很棒，但是如果您在 Facebook.com 上构建一个应用程序，您可能想要使用类似`fandjango`. `facepy`无论哪种方式，一旦您从用户那里检索到访问令牌，您将需要一种不同类型的库（例如）来与 Facebook 的 API 进行交互。

完全披露：我是`fandjango`and的作者`facepy`。

# javascript - 同一页面中两个 jquery 手风琴的不同样式

> ID：11355862
> 
> 赞同：0
> 
> 时间：2012-07-06T04:32:19.357
> 
> 标签：javascript, jquery, css, jquery-ui

我的页面中有两个 jquery 手风琴。一个在东面板，一个在西面板。是否可以为它们设置不同的样式？编辑 .ui-accordion 相关样式会更改两个手风琴的样式。有没有办法为两个手风琴提供不同的风格？

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:42:26.303

只需向两者添加不同的 ID（或类），然后将它们添加到 CSS 选择器。或者，您可以添加父元素的 ID。前任：

```
.ui-accordion{...}
.ui-accordion div{...}
.ui-accordion .arrow{...} 
```

变成

```
#left-column .ui-accordion{...}
#left-column .ui-accordion div{...}
#left-column .ui-accordion .arrow{...}

#right-column .ui-accordion{...}
#right-column .ui-accordion div{...}
#right-column .ui-accordion .arrow{...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:35:49.007

是的，你可以用一些技巧。
您所要做的就是为其他手风琴覆盖 jQuery、UI 和 CSS，就像[这样](http://jsfiddle.net/znw3e/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:39:26.243

是的，现在您可以像这样在 jQuery 中定义额外的 id

**HTML**

```
<div id="slider1" class="east">
   // some code of your html
</div>

<div id="slider2" class="east">
   // some code of your html
</div> 
```

**CSS**

```
#slider1.east .somecss{
 // css style as like your requirement 
 }

#slider2.east .somecss{
 // css style as like your requirement 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T04:39:28.363

你可以使用 jQuery`eq()`方法：

```
$('.ui-accordion:eq(0)').addClass('first') // the first ui.accordion element 
```

或 CSS3`nth-child`伪选择器：

```
.ui-accordion:nth-child(1) { the first ui.accordion element
   property: value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T04:50:26.113

另一种选择是使用两个主题，每个手风琴一个。下载[jQueryUi](http://jqueryui.com/download)时，单击右侧边栏中“主题”下的“高级主题设置”。使用“CSS 范围”和“主题文件夹名称”字段。几乎没有帮助图标来解释该做什么。

我从来没有这样做过，所以我不能告诉你它是多么容易或困难。

# ruby-on-rails - 如何为heroku config vars创建rails初始化程序？

> ID：11355865
> 
> 赞同：0
> 
> 时间：2012-07-06T04:32:57.283
> 
> 标签：ruby-on-rails, heroku, actionmailer

我正在努力在我的 Rails 应用程序中使用 Heroku 发送带有 actionmailer 的 gmail。

我已将我的 gmail 用户名和密码正确设置为 Heroku 配置变量，但我仍然遇到身份验证错误。我终于发现我需要创建一个初始化程序，但是我无法将所有内容连接在一起。以下代码在 heroku 日志中显示正确的用户名和密码，但出现 NoMethodError。不知道在哪里放置方法以使其全部工作。我试过把它放在我的 users_controller 中，但这会使整个事情崩溃。

一旦我开始工作，我打算将我的 S3 东西添加到这个初始化程序中。

我的初始化程序/heroku.rb

```
GMAIL_CREDENTIALS = { :username => ENV['GMAIL_USERNAME'],
  :password => ENV['GMAIL_PASSWORD'] } 
```

我的邮件程序/user_mailer.rb

```
class UserMailer < ActionMailer::Base
  default from: "mygmailaddress", :gmail_credentials => GMAIL_CREDENTIALS

  def signup_confirmation(user)
    @user = user
    mail to: user.email, subject: "Sign Up Confirmation"
  end
end 
```

并在我的 users_controller 中创建：

```
def create
  @user = User.new(params[:user])
  if @user.save
    UserMailer.signup_confirmation(@user).deliver
    sign_in @user
    flash[:success] = "Welcome to Plain Vanilla!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

heroku 日志中的错误消息：

```
Completed 500 Internal Server Error in 482ms
app/controllers/users_controller.rb:21:in `create'
NoMethodError (undefined method `encoding' for {:username=>"mygmailusername",
  :password=>"mypassword"}:Hash): 
```

谢谢你的帮助！

查理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:50:19.773

我通常将我的 gmail 凭据放在一个名为`mailer.rb`. 它看起来像这样：

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "mail.google.com",
  :user_name            => ENV['MY_GMAIL_USER_NAME'],
  :password             => ENV['MY_GMAIL_PASSWORD'],
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

你从哪里得到你正在使用的代码？我会尝试从您的 user_mailer 中删除 :gmail_credentials 行，并使用更像我的初始化程序。如果您更改这些文件，请不要忘记重新启动您的应用程序。

希望这可以帮助，

# ios - 将数据库存储在手机内存中

> ID：11355871
> 
> 赞同：1
> 
> 时间：2012-07-06T04:33:28.507
> 
> 标签：ios, database, cordova

如何将数据库存储在手机内存（IOS设备）中？

我尝试使用 window.opendatabase 概念..它存储在浏览器内存中..但我想将它存储在设备内存文件夹中..

window.openDatabase("数据库", "1.0", "Demo", 200000);

我还尝试使用用于将数据库存储在手机内存中的 phonegap 应用程序。但我的网页在外部服务器中。所以从外部服务器中的网页访问设备内存也是探测。

给出一些解决这个问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:36:39.433

使用[CoreData](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)框架。它不适合胆小的人，但它功能强大且有据可查。

# java - Java中的幻灯片放映？

> ID：11355881
> 
> 赞同：1
> 
> 时间：2012-07-06T04:34:06.853
> 
> 标签：java, swing, jframe

我正在尝试用 Java 编写幻灯片程序，并希望使实现尽可能简单。

目标是显示一系列幻灯片，除了依赖于幻灯片内容的其他按钮之外，每个幻灯片都有导航按钮。（显示文本的幻灯片会有一个`magnifyTextButton`，而带有图像的幻灯片没有这个按钮。）

我在想一个抽象`Slide`类是合适的，每个幻灯片类型都有子类：`TextSlide`和`ImageSlide`. 我将如何实现这些子类，以便它们`magnifyTextButton`出现在`TextSlide`s 中，而不是在任何其他幻灯片中？

此外，我的`Slide`课程扩展了`JFrame`. `Slide`如果节目被设计为在单个窗口中进行，例如在 PowerPoint 中，子类的每个实例是否都需要构造一个 JFrame 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:41:57.600

> 我将如何实现这些子类，以便 magnifyTextButton 将显示在 TextSlides 中，而不是在任何其他幻灯片中？

你可以拿一个标志来决定是否显示放大按钮。该标志在 TextSlides 中为真，在其他中为假。或者您可以直接在 TextSlide 中而不是在其他中使用此按钮，这样无需检查任何内容。并且与放大相关的处理只会在 TextSlide 一类中进行。

> 如果节目被设计为在单个窗口中进行，比如在 PowerPoint 中，Slide 子类的每个实例是否都需要构造一个 JFrame 对象？

在我看来，幻灯片类应该扩展`JPanel`。您可以轻松更改单个框架上的面板。

一些可以帮助您的问题/答案：

*   [JPanel 的幻灯片效果](https://stackoverflow.com/questions/11283554/slide-effect-with-jpanel/11283582#11283582)
*   [在 Java 上的 JForm 中滑动 JPanel 内容](https://stackoverflow.com/questions/5069152/slide-jpanel-content-in-a-jform-on-java/5071109#5071109)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T04:46:13.137

*   看看[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

*   将图像作为[图标 / ImageIcon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)到[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

*   将 JLabel 包含图像作为新卡

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T04:50:08.233

你有很多事情要做，但让我们看看我能不能帮忙。

**1：**我看到了两个关于如何布置“magnifyTextButton”的选项。首先是使其成为`TextSlide`. 没有理由`ImageSlide`需要知道任何关于`magnifyTextButton`. 在这种格式中，您将在您的总体抽象类中拥有一个“绘制”抽象方法（然后最好将其保留为接口）。我不像下面的那样喜欢这种方法。

您的另一个选择是制作`MagnifyTextButton`一个[decorator](http://en.wikipedia.org/wiki/Decorator_pattern)。这样，您可以混合和匹配`MagnifyTextButton`其他包含文本的类（`TextSlide`您可能非常想要的扩展名）。这将为您提供更多的多功能性，并要求您的`Slide`班级需要了解的更少`MagnifyTextButtons`！

**2：**我认为你希望这是一个 Jpanel 而不是 Jframe。

# android - 从 HTC Desire Android 设备中的相机拍摄图像无法正常工作？

> ID：11355887
> 
> 赞同：0
> 
> 时间：2012-07-06T04:34:49.917
> 
> 标签：android

我正在做一个相机应用程序，它从相机中挑选照片我正在使用以下代码，它在三星 Galaxy ace 中工作，但在带有 Android OS 2.2 的 Htc Desire 中它不起作用，请帮助我解决它，提前致谢。

```
**capture button Onclick:**
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyyMMdd_HHmmss");
String fileName = "IMG_" + simpleDateFormat.format(new Date()) + ".jpg";
File myDirectory = new File(Environment.getExternalStorageDirectory() + "/DCIM/Camera/");
cameraImageFile = new File(myDirectory, fileName);
Uri imageUri = Uri.fromFile(cameraImageFile);
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, CAMERA_PIC_REQUEST);

**OnActivityResult:**
switch (requestCode) {
case CAMERA_PIC_REQUEST:

ImageView.setImageBitmap(decodeFile(cameraImageFile.getAbsolutePath()));

}
break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:13:22.233

`Calendar currentDate = Calendar.getInstance();`
`SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss");` `String dateNow = formatter.format(currentDate.getTime());`
`imageName = dateNow + ".jpg";`
`//Create path to store image in SDCard path = Environment.getExternalStorageDirectory() + File.separator + imageName; startCameraActivity();`

`protected void startCameraActivity() { File file = new File(path); Uri outputFileUri = Uri.fromFile(file);`
`Intent intent = new Intent( android.provider.MediaStore.ACTION_IMAGE_CAPTURE);` `intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);`
`startActivityForResult(intent, Globals.CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
}`

`@Override protected void onActivityResult(int requestCode, int resultCode, Intent data) { if (requestCode == 100) {`
`switch (resultCode) {`
`case RESULT_CANCELED:`
`Log.i("MakeMachine", "User cancelled");`
`Toast.makeText(getBaseContext(), "User cancelled", Toast.LENGTH_LONG).show();` `break;`
`case RESULT_OK:`
`BitmapFactory.Options options = new BitmapFactory.Options(); options.inSampleSize = 4;`
`Bitmap bitmap = BitmapFactory.decodeFile(path, options); image.setImageBitmap(bitmap); }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:03:23.393

如果您在启动相机时传递图像的 Uri，则获取图像，如下所示`onActivityResult`：

```
 @Override 
protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
  super.onActivityResult(requestCode, resultCode, data); 

  if (CAMERA_PIC_REQUEST == resultCode) { 
     ImageView iv = (ImageView) findViewById(R.id.ReturnedImageView); 

      // Decode it for real 
     BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
                    bmpFactoryOptions.inJustDecodeBounds = false; 

     //imageFilePath image path which you pass with intent 
     Bitmap bmp = BitmapFactory.decodeFile(cameraImageFile, bmpFactoryOptions); 

      // Display it 
     iv.setImageBitmap(bmp); 
     }    
   } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:27:47.407

感谢所有。我解决了这个问题，我对我的代码做了一个小改动，我正在使用 File myDirectory = new File(Environment.getExternalStorageDirectory() + "/DCIM/Camera/") 在 SD 卡中创建文件；

Htc 中没有名为 DCIM/Camera 的文件夹只是将行更改为如下所示

File myDirectory = new File(Environment.getExternalStorageDirectory() + "/DCIM/");

# sql - SQL中一些括号的含义

> ID：11355894
> 
> 赞同：0
> 
> 时间：2012-07-06T04:35:20.470
> 
> 标签：sql, ruby-on-rails, activerecord

我看到这个：

```
Project.update_all("cost = cost * 3", 
                   "lower(technology) LIKE '%microsoft%'") 
```

`update_all`当我遵循*The Rails 3 Way*时，作为 Active Record 中的方法示例，非常简单的短语，是吗？但我只是无法弄清楚括号在`lower(technology)`这里是什么意思。

那么，你能告诉我一些可能的答案吗？因为我不知道是否有一些不同的情况我们可以像这样使用括号。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:37:53.653

他们调用 SQL[`LOWER`函数](http://msdn.microsoft.com/en-us/library/ms174400.aspx)来小写字符串。

```
LOWER technology 
```

将是语法错误，因为`LOWER`是函数，而不是关键字。

# java - Android MapController 让我的应用程序崩溃

> ID：11355897
> 
> 赞同：0
> 
> 时间：2012-07-06T04:35:55.667
> 
> 标签：java, android, eclipse, google-maps

我正在创建一个 mapView 活动，由于某种原因，此代码不起作用：

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.map_view);
    MapView mapView = (MapView)this.findViewById(R.layout.map_view);
    MapController mapController = mapView.getController(); 
```

此行特别导致应用程序崩溃：

```
MapController mapController = mapView.getController(); 
```

当我取出那条线时，应用程序会正常工作，但是当我放入它时，它会在我启动 Activity 时崩溃，并显示错误消息：

```
07-05 21:27:24.857: E/AndroidRuntime(23801): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.uie.top25.seattle/com.uie.top25.seattle.MapDetailActivity}: java.lang.NullPointerException 
```

这是我对 mapView 的调用：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    this.setContentView(R.layout.detail);
    Bundle bundle = this.getIntent().getExtras();
    ListData listdata = bundle.getParcelable("uie.top25.seattle.listdata");

    // int itemId = this.getIntent().getIntExtra(DiningActivity.ITEM_ID, -1);
    String itemTitle = listdata.getTitle();
    int itemNum = listdata.getItem();
    String sHead = listdata.getSubhead();
    String dText = listdata.getDetailText();
    final float latitude = listdata.getLatitude();
    final float longitude = listdata.getLongitude();
    Log.i(TAG, "Title that is set : " + itemTitle);
    Log.i(TAG, "Item Number that is set : " + itemNum);
    Log.i(TAG, "Latitude that is set : " + latitude);
    Log.i(TAG, "Longitude that is set : " + longitude);
    if (itemNum >= 0)
    {

        TextView tView = (TextView) this.findViewById(R.id.textTitle);
        tView.setText(itemTitle);
        TextView nView = (TextView) this.findViewById(R.id.itemNumber);
        nView.setText("" + itemNum);
        TextView subHead = (TextView) this.findViewById(R.id.textSubheader);
        subHead.setText(sHead);
        TextView details = (TextView) this.findViewById(R.id.itemDescription);
        details.setText(dText);
        ImageButton mapButton = (ImageButton) this.findViewById(R.id.mapButton);
            mapButton.setOnClickListener(new View.OnClickListener() {
                             //this is where I call my mapView from
                @Override
                public void onClick(View v)
                {
                    Intent mapIntent = new Intent(DetailActivity.this, MapDetailActivity.class);
                    //mapIntent.putExtra("uie.top25.seattle.listlat", latitude);
                    //mapIntent.putExtra("uie.top25.seattle.longitude", longitude);

                    startActivity(mapIntent);

                }
            });
    }
} 
```

}

谁能给我一些关于我做错了什么的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:41:17.883

问题出在这一行

```
 MapView mapView = (MapView)this.findViewById(R.layout.map_view); 
```

你是 Linding Layout`mapView`不会得到初始化尝试用 ID 改变，即

```
 MapView mapView = (MapView)this.findViewById(R.id.map_view); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T04:42:07.660

您可以尝试替换此行吗：

```
 MapView mapView = (MapView)this.findViewById(R.layout.map_view); 
```

有了这个：

```
 MapView mapView = (MapView)this.findViewById(R.id.<your mapView Id>); 
```

# android - Android：在 Beem App 中设置聊天状态通知

> ID：11355901
> 
> 赞同：1
> 
> 时间：2012-07-06T04:36:31.640
> 
> 标签：android, xmpp

我目前正在使用[Beem 的](http://beem-project.com)源代码进行开发。我想实现聊天状态通知。我查看了代码，发现有一个 setState() 方法，但我相信它还没有实现，我也不知道如何去做。如果我使用 Adium 向 Beem 用户键入消息，Beem 用户能够看到 Adium 用户正在编写消息。但是如果两个用户都在使用 Beem，那么它不会显示用户是否正在撰写消息。因此，我想尝试实现聊天状态通知。我该怎么做呢？那里有指南吗？有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-07T20:05:38.310

将此代码添加到**ChatAdapter.java**文件中的**setState**方法。

 **```
org.jivesoftware.smack.packet.Message message = new org.jivesoftware.smack.packet.Message();
    ChatStateExtension extension = null;
    switch (state) {
        case "composing":
            extension = new ChatStateExtension(ChatState.composing);
            break;
        case "active":
            extension = new ChatStateExtension(ChatState.active);
            break;
        case "inactive":
            extension = new ChatStateExtension(ChatState.inactive);
            break;
        case "gone":
            extension = new ChatStateExtension(ChatState.gone);
            break;
        case "paused":
            extension = new ChatStateExtension(ChatState.paused);
            break;
    }
    message.addExtension(extension);
    try {
        mAdaptee.sendMessage(message);
    } catch (XMPPException e) {
        e.printStackTrace();
    } 
```**

# .htaccess - 允许从代码访问文件，但从浏览器阻止？

> ID：11355902
> 
> 赞同：2
> 
> 时间：2012-07-06T04:36:35.183
> 
> 标签：.htaccess, hide, block

我有我的`.htaccess`文件，并且我有一个包含配置文件的文件夹，它们包含敏感内容，例如数据库详细信息等。我想知道的是，如何阻止来自浏览器的访问，但允许访问它们通过我的脚本？

我知道这可以在 PHP 文件本身内部实现，但我宁愿`.htaccess`尽可能使用这种方法。

这真的可以做到吗？我之前尝试过，但是在拒绝从浏览器访问文件的过程中，它也拒绝了来自编码的访问。

我以前研究过这个，我遇到的一些答案建议将扩展名更改为类似`.inc`的，然后拒绝访问。但是，我遇到的几个问题是 a) 它会立即提醒任何可以看到该文件名的人，无论出于何种原因，它是一个配置文件。另外，b）如果我的拒绝代码中断，浏览器不会将其解析为 PHP 文件，而是将其解析为`inc`文件，这意味着它将在浏览器中打印代码。

基本上，这可以在一个`.htaccess`文件中完成，还是我需要在每个配置文件的标题中放置一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:48:53.387

将这些文件放在 Web 服务器的文档根目录之外。

您仍然可以通过服务器端脚本访问它们，但这确保了外部世界无法直接访问它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:30:18.673

传统的建议是将此类文件放在“Web 服务器的文档根目录之外”。这一切都很好，但是许多共享托管产品只提供对您的 public_html 目录的写访问权限。

我使用一个简单的约定：任何私有内容（不是 URI 可寻址的）都以下划线为前缀，或者在名称以下划线为前缀的目录中（例如`_private`或`_include`）。然后我在我的 DOCROOT`.htaccess`文件中包含这个重写规则：

```
# if a forbidden directory or file name (starting with a . or /) 
# then raise 404 Fatal return

RewriteRule (^|/)[_.] -                                            [F] 
```

请记住，您需要在启用引擎的*任何*`RewriteEngine On`文件的顶部添加前缀和/或包含它。 *`.htaccess`*

 *注意“。” 前缀选择文件，例如`.htaccess`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-06T04:45:46.320

请使用框架，这类问题不需要存在。如果您坚持，请编写一个 .htaccess 将每个请求重定向到根目录中的单个 index.php，然后有更多逻辑来确定请求是否针对有效文件并包含它们，否则生成 404 或 403 . 如果您需要静态文件的性能，则使用 RewriteCond 从 index.php 检查中排除特定目录或文件类型。*

# javascript - 如何选择所有标签并注册 onclick 事件？

> ID：11355907
> 
> 赞同：2
> 
> 时间：2012-07-06T04:37:21.677
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:41:02.747

您将`onclick`属性设置为元素数组，而不是像您需要的那样单独设置每个元素。此外，您`show`在使用它之后进行定义。

```
var elts = document.getElementsByTagName('a');
var show = function() { alert('hahahha'); }
for (var i = elts.length - 1; i >= 0; --i) {
    elts[i].onclick = show;
} 
```

向后遍历数组比`elts.length`每次都测试更有效。如果需要向前迭代，请将数组长度存储在变量中以提高效率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T04:40:23.650

您需要将 onclick 事件`<a> tags`分别分配给所有事件，如下所示：

```
var s=document.getElementsByTagName('a');
var show = function(){
   alert('hahahha');
}
for (var i=0;i<s.length;i++)  
{  
 s[i].onclick = show;      
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T04:42:00.843

`document.getElementsByTagName('a')`返回一个数组，因此试试这个：

```
 var arr = document.getElementsByTagName('a');
    for(var key in arr){
      arr[key].onclick = show;
    } 
```

还没有测试过，但它应该可以工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T04:51:39.390

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T12:49:12.083

是的，我们可以使用 java 脚本和 jquery 来解决上述问题：

Javascript：

```
 var aLinks=document.getElementsByTagName('a'); // returns array of all <a> link objects

    //Function to be bind with link object
    var show = function(){
          alert("Now Show function has been binded...hahahhaha..!");
    }

    //Now we have to bind click event with each link object. 
    for(var i=0;i<aLink.length;i++){
       aLinks[i].onclick=show;
    } 
```

将所有链接标签与任何事件绑定的另一种替代方法是使用 jQuery，它为这种绑定问题提供了最简单的方法。

但首先我们必须包含 jquery.js javascript 文件（最好使用最新版本）。

jQuery：

```
$(function(){
    $("a").click(function(e){
             alert("Now Show function has been binded...hahahhaha..!");
      });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-21T14:21:43.727

由于新的 JS 标准，这可以很容易地完成。我所有的 a 标签都有类导航链接。因此，我将它们全部选中（这给了我一个节点列表）并在它们上运行 forEach 并添加了一个函数，以便在选择其中一个节点时调用。希望这可以帮助！

```
let navLink = document.querySelectorAll('.nav-link');
const navbar = document.querySelector('#navbarNav');

closeNavBar = () => {
    navbar.classList.remove('show');
};

navLink.forEach((nav) => nav.addEventListener('click', closeNavBar)); 
```

# xcode - #import 使用前向类引用中断 Xcode 中的构建

> ID：11355909
> 
> 赞同：0
> 
> 时间：2012-07-06T04:37:28.260
> 
> 标签：xcode, xcode4.3, header-files

我对我的一个视图控制器进行了子类化，并尝试在其他头文件之一中#import 新类的头文件。

一旦我包含该#import，整个构建就会变得疯狂，许多类中都会出现错误，例如：

*   找不到协议声明...
*   找不到接口声明...
*   未知类型名称...
*   不兼容的指针类型...

这些错误都在与新类、它的超类或与导入的文件没有直接关系的文件中。

一旦我删除#import，构建就很好了。

这是文件 ReadOnlySearchVC.h 和 ReadOnlySearchVC.m 中的子类定义。可以看出，这只是我最初创建新类时 Xcode 创建的模板。

**子类的头文件：**

```
#import "AdvancedSearchFormVC.h"

@interface ReadOnlySearchVC : AdvancedSearchFormVC

@end 
```

和**子类的代码文件：**

```
#import "ReadOnlySearchVC.h"

@interface ReadOnlySearchVC ()

@end

@implementation ReadOnlySearchVC

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

这是头文件，我在ResultHeaderView类中导入子类ReadOnlySearchVC

**引用类的头文件：**

```
#import <UIKit/UIKit.h>
#import "ReadOnlySearchVC.h"  // this is the offending line
@class SearchTerms;
@class DataInterfaceObject;
@class MapController;

@protocol resultsHeaderDelegate 

- (void) collapseSection:(NSInteger) section;
- (void) expandSection:(NSInteger) section;

@optional
- (void) deleteSection:(NSInteger) section;
- (void) headerDeleteButtonWillShow;
- (void) headerDeleteButtonDidHide;

@end

@interface ResultsHeaderView : UIView <UIGestureRecognizerDelegate>{

...  the rest of the file ... 
```

第二行，`#import "ReadOnlySearchVC.h"`是制造问题。

我将 Xcode 从 4.3.1 更新到 4.3.3 并没有改变。我做了一个干净的构建，它没有改变。

我只能想象有某种循环引用，但我不知道如何处理它。

现在这有点奇怪，因为我最初确实让它工作，只有一些骨架代码，但包括上面显示的内容。在某些时候，当我将设计的其余部分添加到上面显示的两个类中时，它坏了，我不知道为什么。将其剥离回这些基础仍然可以证明问题所在。

有谁知道我在看什么？

# excel - 编译错误：需要对象 VBA

> ID：11355911
> 
> 赞同：0
> 
> 时间：2012-07-06T04:37:38.677
> 
> 标签：excel, vba

我是 VBA 新手。我正在尝试编写一个脚本来清理实验中的一些数据。我不断收到“需要对象”的错误消息，它突出显示 pold。有谁知道为什么？

至于脚本，我正在尝试查看一列参与者编号并绘制出每个参与者的范围。每个参与者大约有 30 行，我想将其定义为数组中的值。

```
Sub Cleanthismofoup() 
Dim pranges(1 To 50) As Long 
Dim pbegin As Range
Dim pend As Range
Dim pold As Integer
Dim pnew As Integer
Dim pcell As Range
Dim pcounter As Long
Dim i As Long

Set pcell = Range("A1:A1")
Set pbegin = Range("A2:A2")
Set pold = Range("B2:B2").Value
pcounter = 0

'for every item, store value in pnew
' move down one line. Check pnew = pold
' if it is, do again. else create new range

For i = 1 To rngl
pcell = pcell.Offset(-1, 0)
pnew = pcell.Cells.Value
If pnnew <> pold Then pcell = pend
If pcell = pend Then
counter = counter + 1
pranges(counter) = pbegin
counter = counter + 1
pranges(counter) = pend
pbegin = pcell.Offset(-1, 0)
Else: pold = pnew
End If

i = i + 1
Next 
```

结束子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:29:19.543

该错误是因为您使用的`Set`关键字用于分配对对象的引用。由于 RHS 的输出`Set pold = Range("B2:B2").Value`是整数，因此 vba 会给您一个错误。要解决它，只需删除`Set`关键字。但是我也注意到你`rng1`在`for`循环中使用而没有初始化`rng1`变量，在这种情况下你的`for`循环将永远不会执行。您可能还想纠正这一点。

# javascript - 我可以在 jquery 或 javascript 中对 rel 语句使用 display none 吗，或者只是 css

> ID：11355913
> 
> 赞同：-3
> 
> 时间：2012-07-06T04:37:44.543
> 
> 标签：javascript, jquery, css

我有一段代码

```
<li id="node_8" rel="default" class="xx"></li> 
```

是否有一种自动查找所有语句的方法 was `rel="default"`，或者阻止它触发，或者通过 css 删除。

我需要使用`livequery`, 还是 jquery `live`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:38:35.827

只需尝试以下类似的方法来查找具有以下内容的元素`rel=default`：

```
$('[rel=default]') 
```

要删除所有带有 的元素`rel=default`，请调用[`remove()`](http://api.jquery.com/hide)：

```
$('[rel=default]').remove(); 
```

**隐藏**

您可以使用 jQuery[`.hide()`](http://api.jquery.com/hide)方法，例如：

```
$('[rel=default]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:16:44.303

发现 rel 语句可以在 css 中使用。即`li[rel~='default'] {display: none ;}`，任何包含 rel 声明`=`为 default 的 li 都不会显示。——</p>

# jquery - input-append 上的 jQuery 验证（Twitter Bootstrap）

> ID：11355920
> 
> 赞同：7
> 
> 时间：2012-07-06T04:38:13.800
> 
> 标签：jquery, validation, jquery-validate, twitter-bootstrap

我正在为一个网站使用 twitter 引导程序，我们使用 jquery.validate。

我有一个输入元素，按钮附加到输入元素。这是我们的 js 验证中的必填字段。

代码是：

```
<div class="controls">
<div class="input-append">
    <input tabindex="1" name="url" class="input-large" id="url" type="text" placeholder="http://somewebsite.com" autocapitalize="off">
    <button class="btn" type="button" name="attach" id="attach" />Fetch</button>
</div>
</div> 
```

验证错误类使用 jquery 验证规则，并且可以在所有其他元素上完美运行。但似乎错误的范围是在输入元素之后附加的，在大多数情况下这绝对没问题。但是在这个输入字段的例子中，它使显示向上翘起，因为它分离了附加的按钮。

下面是我的意思的图像（之前和之后） ![在此处输入图像描述](../Images/39fe2de48bace5ded91cc765c7ebae1a.png) 我真的需要为这个元素的错误消息应用一个不同的类，但是如果我能弄清楚怎么做，那就麻烦了。

```
errorClass: "help-inline",
            errorElement: "span",
            highlight:function(element, errorClass, validClass) {
                $(element).parents('.control-group').addClass('error');
            },
            unhighlight: function(element, errorClass, validClass) {
                $(element).parents('.control-group').removeClass('error');
                $(element).parents('.control-group').addClass('success');
            } 
```

对于输入字段，错误事件是：

```
url:{
required:true
}, 
```

消息是：

```
messages:{
url:{
    required:"Enter URL beginning with http"
}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T22:59:05.837

正如 odupont 所说，您可以添加自己的 errorPlacement 实现，但给出的代码不适用于表单中的正常输入字段。通过以下实现，错误放置将适用于本机输入字段和输入附加字段！

```
errorPlacement: function (error, element) {
   if (element.parent().is('.input-append'))
      error.appendTo(element.parents(".controls:first"));
   else
      error.insertAfter(element);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:29:28.483

您可以使用 errorPlacement 选项。

```
errorPlacement: function (error, element) {
   error.appendTo(element.parents(".controls:first"));
} 
```

在此示例中，错误元素将附加在父 div *.controls*中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:33:16.930

正如user579089和odupont所说的那样！

我刚刚解决了这个问题，然后跑去检查是否有人被它卡住了。这是我的代码：

```
 $("#myform").validate({ 
        highlight: function(label) {
            $(label).closest('.control-group').addClass('error');
        },
        errorPlacement: function (error, element) { 
             if (element.parent().hasClass("input-append")){
                error.insertAfter(element.parent());
             }else{
                error.insertAfter(element);
             } 
        },          
        onkeyup: false,
        onblur: false,
        success: function(label) {
            $(label).closest('.control-group').removeClass('error');
        } 
    }); 
```

![在此处输入图像描述](../Images/def51d455806dc33668f9a9193ea7374.png)

# scala - Scala 2.10 的 Scaladoc 中（或将要）添加哪些新功能？

> ID：11355923
> 
> 赞同：11
> 
> 时间：2012-07-06T04:38:32.217
> 
> 标签：scala, documentation, scaladoc

在进入 Scala 2.10 的所有各种不完整的特性列表中，有各种提到对 Scaladoc 的改进。但目前还不清楚哪些有哪些，哪些实际上正在实施——例如，改进列表之一说“对 Scaladoc 的修复”，其中包含指向各种拉取请求的链接，其中一些被拒绝了。

谁能总结一下 Scala 2.9 和 2.10 里程碑 4 之间的实际变化，或者指出 2.10 本身还有什么计划？

另外，他们*最终*会解决无法链接到方法的问题吗？例如，在我的代码中到处都是我有这样的事情：

```
/**
 * Reverse the encoding computed using `encode_ngram`.
 */
def decode_ngram(ngram: String): Iterable[String] = {
  DistDocument.decode_ngram_for_counts_field(ngram)
} 
```

我想在同一个类中引用另一个方法，但是 AFAIK 根本没有办法做到这一点。IMO 它应该是显而易见的`[[encode_ngram]]`——即我绝对不需要给出一个绝对的类（一旦我退出一个类并将它粘在其他地方，这会使一切都中断），我不应该需要给出如果方法名称本身是明确的（即非多态的），则参数类型。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T07:42:12.807

一些新功能以及许多错误修复即将推出，但目前还没有所有修复的最终列表。在更显着的新功能中：

*   **隐式添加的成员现在将可见**。一个很好的例子是查看[scala.Array](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.Array)，`map`您可能认为您拥有的方法现在在 Scaladoc 中可见。
*   **自动生成的 SVG 继承图**，用于鸟瞰包级别以及各个类级别的类/特征/对象之间的关系等。例如，每晚在两个[包级别](https://scala-webapps.epfl.ch/jenkins/view/scaladoc/job/scaladoc-diagram-nightly/ws/build/scaladoc/library/index.html#scala.collection.immutable.package)查看 Scaladoc 图表（单击“内容层次结构”）以及[类级别的](https://scala-webapps.epfl.ch/jenkins/view/scaladoc/job/scaladoc-diagram-nightly/ws/build/scaladoc/library/index.html#scala.collection.immutable.IndexedSeq@inheritance-diagram).
*   **某种有限形式**的方法链接***应该*进入 2.10（还没有在 nightly 中）。（正如您所指出的，由于重载等实际问题，以完整形式实现实际上并非完全微不足道。）**
***   **改进**的用例不再会双重生成具有用例的成员，它们现在比以前更清晰、更简单。*   （不太显着）已添加用于导航 Scaladoc 的**键盘快捷键，它们在**[此处](https://github.com/scala/scala/pull/582)和[此处进行了解释](http://heather.miller.am/scaladoc-keyboard-shortcuts.html)**

 **对于更详尽的错误修复列表，写信给 scala-internals 可能是一个好主意——很有可能有人会在那里为您编译过去一年中所有主要错误修复的列表。**

# ruby-on-rails - 设计：验证用户身份后重定向到上一页？（request.referer 导致循环）

> ID：11355928
> 
> 赞同：2
> 
> 时间：2012-07-06T04:39:16.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, routing, devise

我正在使用 Devise 和 Omniauth 进行 facebook 身份验证。在用户使用 Devise(regular) 或 Omniauth(fb) 登录后，我试图将用户重定向到上一页。

“request.referer”在用户使用我的导航栏上的下拉登录时有效，但是当用户尝试通过“http://localhost:3000/users/sign_in”url 登录时，“request.referer”会返回给我无限循环错误。

这是顺序。问题在（d）中。(a) 未登录用户点击为任务投票。(b) 用户被重定向到“users/sign_in” url，因为“before_filter :authenticate_user！” 在任务控制器中。(c) 用户通过输入用户名/密码或单击 Facebook 图标登录。(d) 用户应该被重定向回上一页，功能 VoteUp 完成，但给出路由错误 => 当我返回并刷新页面时，用户已登录，所以我知道这只是路由问题

MissionsController.rb

```
class MissionsController < ApplicationController
 before_filter :authenticate_user!, :except => [:show, :index] 

 def vote_for_mission
   @mission = Mission.find(params[:id])
   if @mission.voted_by?(current_user) 
     redirect_to request.referer, alert: 'You already voted on this mission.'
   else
     @mission.increment!(:karma)
     @mission.active = true
     @mission.real_author.increment!(:userpoints) unless @mission.real_author.blank?

     current_user.vote_for(@mission)
     redirect_to request.referer, notice: 'Your vote was successfully recorded.'
   end
 end 
```

应用程序控制器.rb

```
class ApplicationController < ActionController::Base

  protect_from_forgery                                                                                                                                    
  def after_sign_in_path_for(resource)
    sign_in_url = "http://localhost:3000/users/sign_in" || "http://onvard.com/users/sign_in" || 
    "http://www.onvard.com/users/sign_in" #url_for(:action => 'new', :controller => 'sessions', :only_path => false, :protocol => 'http')                                            
    if (request.referer == sign_in_url)                                                                                                                     
      env['omniauth.origin'] || request.env['omniauth.origin'] || stored_location_for(resource) || getting_started_path || root_path      
    else
      request.referer
    end
  end 
```

用户被重定向到我输入的“getting_started_pa​​th”，所以我知道之前的选项不起作用。'else' 案例，这是我使用 jquery 创建的下拉登录表单，将用户重定向到上一页非常好，但是当我尝试将 request.referer 放入 'request.referer==sign_in_url' 案例中时，它给了我一个无限循环。

即使用户通过“用户/登录”网址登录，我如何将用户重定向到上一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:00:48.783

您不能简单地重定向回来，因为这`sign_in_url`意味着只接受未登录的用户，并且在登录您的应用程序后会将已登录的用户发送回该页面。

如果您需要在登录后将用户重定向到特定位置，您应该存储用户在重定向到登录页面之前尝试去的原始位置，然后在登录后检查用户是否应该在登录后转到其他位置，并将他重定向到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T15:14:51.553

我正在向使用设计并遇到相同问题的 OP 的后代解决这个回复：您应该能够通过使用来解决它[`#stored_location_for`](https://github.com/plataformatec/devise/blob/280d12b81cbb15796188a6b6c00dc9658a3f6961/lib/devise/controllers/helpers.rb#L205)，它返回用户在被重定向到登录页面之前想要到达的路径。

# sql - oracle中字符串比较的问题

> ID：11355934
> 
> 赞同：3
> 
> 时间：2012-07-06T04:39:41.397
> 
> 标签：sql, oracle

我正在阅读 oracle 的基础知识，并遇到了奇怪的声明。我不知道它有多真实。

声明说

> "字符串值'2'大于字符串值'100'。字符'1'小于字符'10'。"

请对上述主题有所了解。我了解必须使用 ASCII 值进行内部比较。我正在寻求一些好的合乎逻辑的解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T04:52:09.233

这意味着被视为字符串的数字不是按*数字顺序*排序，而是按*词汇顺序*排序，就像单词在字典中排序一样。即，从左侧开始一次比较一个字符。

在您的第一个示例中，“2”大于“100”，因为将“2”与“1”进行比较并发现更大。将此与字典中“C”和“BAA”的顺序进行比较。

在您的第二个示例中，“1”小于“10”，因为“1”与“10”左侧的“1”完全匹配，但“10”在匹配后有字符。因此它更大。再次将其与字典中“B”和“BA”的顺序进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:59:19.510

假设它们按 ASCII 值排序是完全正确的——这称为字母排序。字符串不是按数值排序，而是按文本排序。

字母排序按位置比较值。当比较字符串“2”和字符串“100”时，首先比较“2”和“1”。'2' 按字母顺序出现在 '1' 之后（'2' 的 ASCII 值大于 '1' 的 ASCII 值），因此比较停止，因此在字母排序中，'100' 将列在 '2' 之前。这完全等同于比较 'b' 和 'azz' - 因为 'a' 排在 'b' 之前，所以 'azz' 将排在 'b' 之前。

您的文字指出了这一点，因为这种行为虽然可以理解，但并不直观。由于 2 < 100，您会期望排序在“2”之后放置“100”，但排序并非如此。

# css - MVC4 StyleBundle 无法解析图像

> ID：11355935
> 
> 赞同：297
> 
> 时间：2012-07-06T04:39:42.533
> 
> 标签：css, jquery-ui, asp.net-mvc-4, bundle, asp.net-optimization

我的问题与此类似：

> [ASP.NET MVC 4 缩小和背景图像](https://stackoverflow.com/questions/9780099/asp-net-mvc-4-minification-background-images)

除了如果可以的话，我想坚持使用 MVC 自己的捆绑。我想弄清楚指定样式包的正确模式是什么，以便独立的 css 和图像集（如 jQuery UI）工作，我陷入了大脑崩溃。

我有一个典型的 MVC 站点结构，`/Content/css/`其中包含我的基本 CSS，例如`styles.css`. 在该 css 文件夹中，我还有子文件夹，例如`/jquery-ui`其中包含其 CSS 文件和一个`/images`文件夹。jQuery UI CSS 中的图像路径是相对于该文件夹的，我不想弄乱它们。

据我了解，当我指定 a 时，`StyleBundle`我需要指定一个与真实内容路径不匹配的虚拟路径，因为（假设我忽略了到 Content 的路由）IIS 会尝试将该路径解析为物理文件。所以我指定：

```
bundles.Add(new StyleBundle("~/Content/styles/jquery-ui")
       .Include("~/Content/css/jquery-ui/*.css")); 
```

使用：

```
@Styles.Render("~/Content/styles/jquery-ui") 
```

我可以看到请求发送到：

```
http://localhost/MySite/Content/styles/jquery-ui?v=nL_6HPFtzoqrts9nwrtjq0VQFYnhMjY5EopXsK8cxmg1 
```

这将返回正确的、缩小的 CSS 响应。但随后浏览器会发送一个相对链接图像的请求，如下所示：

```
http://localhost/MySite/Content/styles/images/ui-bg_highlight-soft_100_eeeeee_1x100.png 
```

这是一个`404`.

我知道我的 URL 的最后一部分`jquery-ui`是一个无扩展名的 URL，它是我的包的处理程序，所以我可以看到为什么对图像的相对请求是简单的`/styles/images/`.

所以我的问题是处理这种情况**的正确方法是什么？**

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2012-07-08T21:47:21.900

根据这个关于[MVC4 css bundling and image references](https://forums.asp.net/t/1774324.aspx)的线程，如果你将你的包定义为：

```
bundles.Add(new StyleBundle("~/Content/css/jquery-ui/bundle")
                   .Include("~/Content/css/jquery-ui/*.css")); 
```

如果您在与组成包的源文件相同的路径上定义包，则相对图像路径仍然有效。捆绑包路径的最后一部分实际上是`file name`针对特定捆绑包的（即，`/bundle`可以是您喜欢的任何名称）。

这仅在您将同一文件夹中的 CSS 捆绑在一起时才有效（我认为从捆绑的角度来看这是有意义的）。

**更新**

根据@Hao Kung 下面的评论，或者现在可以通过应用`CssRewriteUrlTransformation`（[更改捆绑时对 CSS 文件的相对 URL 引用](https://web.archive.org/web/20140331115330/http://aspnetoptimization.codeplex.com/workitem/30)）来实现。

*注意：我尚未确认有关在虚拟目录中重写为绝对路径的问题的评论，因此这可能不适用于所有人（？）。*

```
bundles.Add(new StyleBundle("~/Content/css/jquery-ui/bundle")
                   .Include("~/Content/css/jquery-ui/*.css",
                    new CssRewriteUrlTransform())); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-22T20:30:03.160

Grinn / ThePirat 解决方案效果很好。

我不喜欢它在 bundle 上新增了 Include 方法，并且它在内容目录中创建了临时文件。（他们最终被签入、部署，然后服务无法启动！）

因此，为了遵循 Bundling 的设计，我选择执行基本相同的代码，但在 IBundleTransform 实现中：

```
class StyleRelativePathTransform
    : IBundleTransform
{
    public StyleRelativePathTransform()
    {
    }

    public void Process(BundleContext context, BundleResponse response)
    {
        response.Content = String.Empty;

        Regex pattern = new Regex(@"url\s*\(\s*([""']?)([^:)]+)\1\s*\)", RegexOptions.IgnoreCase);
        // open each of the files
        foreach (FileInfo cssFileInfo in response.Files)
        {
            if (cssFileInfo.Exists)
            {
                // apply the RegEx to the file (to change relative paths)
                string contents = File.ReadAllText(cssFileInfo.FullName);
                MatchCollection matches = pattern.Matches(contents);
                // Ignore the file if no match 
                if (matches.Count > 0)
                {
                    string cssFilePath = cssFileInfo.DirectoryName;
                    string cssVirtualPath = context.HttpContext.RelativeFromAbsolutePath(cssFilePath);
                    foreach (Match match in matches)
                    {
                        // this is a path that is relative to the CSS file
                        string relativeToCSS = match.Groups[2].Value;
                        // combine the relative path to the cssAbsolute
                        string absoluteToUrl = Path.GetFullPath(Path.Combine(cssFilePath, relativeToCSS));

                        // make this server relative
                        string serverRelativeUrl = context.HttpContext.RelativeFromAbsolutePath(absoluteToUrl);

                        string quote = match.Groups[1].Value;
                        string replace = String.Format("url({0}{1}{0})", quote, serverRelativeUrl);
                        contents = contents.Replace(match.Groups[0].Value, replace);
                    }
                }
                // copy the result into the response.
                response.Content = String.Format("{0}\r\n{1}", response.Content, contents);
            }
        }
    }
} 
```

然后将其包装在一个 Bundle 实现中：

```
public class StyleImagePathBundle 
    : Bundle
{
    public StyleImagePathBundle(string virtualPath)
        : base(virtualPath)
    {
        base.Transforms.Add(new StyleRelativePathTransform());
        base.Transforms.Add(new CssMinify());
    }

    public StyleImagePathBundle(string virtualPath, string cdnPath)
        : base(virtualPath, cdnPath)
    {
        base.Transforms.Add(new StyleRelativePathTransform());
        base.Transforms.Add(new CssMinify());
    }
} 
```

样品用法：

```
static void RegisterBundles(BundleCollection bundles)
{
...
    bundles.Add(new StyleImagePathBundle("~/bundles/Bootstrap")
            .Include(
                "~/Content/css/bootstrap.css",
                "~/Content/css/bootstrap-responsive.css",
                "~/Content/css/jquery.fancybox.css",
                "~/Content/css/style.css",
                "~/Content/css/error.css",
                "~/Content/validation.css"
            )); 
```

这是我的 RelativeFromAbsolutePath 扩展方法：

```
 public static string RelativeFromAbsolutePath(this HttpContextBase context, string path)
    {
        var request = context.Request;
        var applicationPath = request.PhysicalApplicationPath;
        var virtualDir = request.ApplicationPath;
        virtualDir = virtualDir == "/" ? virtualDir : (virtualDir + "/");
        return path.Replace(applicationPath, virtualDir).Replace(@"\", "/");
    } 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-10-02T18:41:30.330

更好的是（恕我直言）实现了一个修复图像路径的自定义 Bundle。我为我的应用程序写了一个。

```
using System;
using System.Collections.Generic;
using IO = System.IO;
using System.Linq;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.Optimization; 
```

...

```
public class StyleImagePathBundle : Bundle
{
    public StyleImagePathBundle(string virtualPath)
        : base(virtualPath, new IBundleTransform[1]
      {
        (IBundleTransform) new CssMinify()
      })
    {
    }

    public StyleImagePathBundle(string virtualPath, string cdnPath)
        : base(virtualPath, cdnPath, new IBundleTransform[1]
      {
        (IBundleTransform) new CssMinify()
      })
    {
    }

    public new Bundle Include(params string[] virtualPaths)
    {
        if (HttpContext.Current.IsDebuggingEnabled)
        {
            // Debugging. Bundling will not occur so act normal and no one gets hurt.
            base.Include(virtualPaths.ToArray());
            return this;
        }

        // In production mode so CSS will be bundled. Correct image paths.
        var bundlePaths = new List<string>();
        var svr = HttpContext.Current.Server;
        foreach (var path in virtualPaths)
        {
            var pattern = new Regex(@"url\s*\(\s*([""']?)([^:)]+)\1\s*\)", RegexOptions.IgnoreCase);
            var contents = IO.File.ReadAllText(svr.MapPath(path));
            if(!pattern.IsMatch(contents))
            {
                bundlePaths.Add(path);
                continue;
            }

            var bundlePath = (IO.Path.GetDirectoryName(path) ?? string.Empty).Replace(@"\", "/") + "/";
            var bundleUrlPath = VirtualPathUtility.ToAbsolute(bundlePath);
            var bundleFilePath = String.Format("{0}{1}.bundle{2}",
                                               bundlePath,
                                               IO.Path.GetFileNameWithoutExtension(path),
                                               IO.Path.GetExtension(path));
            contents = pattern.Replace(contents, "url($1" + bundleUrlPath + "$2$1)");
            IO.File.WriteAllText(svr.MapPath(bundleFilePath), contents);
            bundlePaths.Add(bundleFilePath);
        }
        base.Include(bundlePaths.ToArray());
        return this;
    }

} 
```

要使用它，请执行以下操作：

```
bundles.Add(new StyleImagePathBundle("~/bundles/css").Include(
  "~/This/Is/Some/Folder/Path/layout.css")); 
```

...代替...

```
bundles.Add(new StyleBundle("~/bundles/css").Include(
  "~/This/Is/Some/Folder/Path/layout.css")); 
```

它的作用是（当不处于调试模式时）查找`url(<something>)`并将其替换为`url(<absolute\path\to\something>)`. 我大约 10 秒前写了这件事，所以可能需要稍微调整一下。通过确保 URL 路径中没有冒号 (:)，我考虑了完全限定的 URL 和 base64 DataURI。在我们的环境中，图像通常与它们的 css 文件位于同一个文件夹中，但我已经使用父文件夹 ( `url(../someFile.png)`) 和子文件夹 ( `url(someFolder/someFile.png`) 对其进行了测试。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-06-12T16:37:36.287

没有必要指定转换或具有疯狂的子目录路径。经过多次故障排除后，我将其隔离为这个“简单”规则（这是一个错误吗？）......

如果您的包路径不是以所包含项目的相对根目录开头，则不会考虑 Web 应用程序根目录。

听起来对我来说更像是一个错误，但无论如何，这就是您使用当前 .NET 4.51 版本修复它的方式。也许其他答案对于较旧的 ASP.NET 版本是必要的，不能说没有时间回顾性地测试所有这些。

为了澄清，这里有一个例子：

我有这些文件...

```
~/Content/Images/Backgrounds/Some_Background_Tile.gif
~/Content/Site.css  - references the background image relatively, i.e. background: url('Images/...') 
```

然后像...一样设置捆绑包

```
BundleTable.Add(new StyleBundle("~/Bundles/Styles").Include("~/Content/Site.css")); 
```

并将其渲染为...

```
@Styles.Render("~/Bundles/Styles") 
```

并获得“行为”（错误），CSS 文件本身具有应用程序根目录（例如“http://localhost:1234/MySite/Content/Site.css”），但其中的 CSS 图像都以“/Content/Images”开头/..." 或 "/Images/..." 取决于我是否添加了转换。

甚至尝试创建“Bundles”文件夹以查看它是否与现有路径有关，但这并没有改变任何东西。问题的解决方案实际上是要求包的名称必须以路径根开头。

这意味着这个例子是通过注册和渲染捆绑路径来修复的，比如..

```
BundleTable.Add(new StyleBundle("~/Content/StylesBundle").Include("~/Content/Site.css"));
...
@Styles.Render("~/Content/StylesBundle") 
```

所以当然你可以说这是 RTFM，但我很确定我和其他人从默认模板或 MSDN 或 ASP.NET 网站的文档中的某个位置选择了这个“~/Bundles/...”路径，或者只是偶然发现了它，因为实际上它是虚拟路径的一个非常合乎逻辑的名称，并且选择与真实目录不冲突的虚拟路径是有意义的。

无论如何，就是这样。微软没有看到任何错误。我不同意这一点，要么它应该按预期工作，要么应该抛出一些异常，或者额外覆盖添加选择包含应用程序根目录的捆绑路径。我无法想象为什么有人不希望包含应用程序根目录（通常除非您使用 DNS 别名/默认网站根目录安装您的网站）。所以实际上这应该是默认值。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-06-16T14:46:37.093

也许我有偏见，但我非常喜欢我的解决方案，因为它不做任何转换、正则表达式等，而且它的代码量最少:)

这适用于作为**IIS 网站中的虚拟目录和 IIS 上的根网站托管的站点**

所以我创建了一个`IItemTransform`封装的实现`CssRewriteUrlTransform`，用于`VirtualPathUtility`修复路径并调用现有代码：

```
/// <summary>
/// Is a wrapper class over CssRewriteUrlTransform to fix url's in css files for sites on IIS within Virutal Directories
/// and sites at the Root level
/// </summary>
public class CssUrlTransformWrapper : IItemTransform
{
    private readonly CssRewriteUrlTransform _cssRewriteUrlTransform;

    public CssUrlTransformWrapper()
    {
        _cssRewriteUrlTransform = new CssRewriteUrlTransform();
    }

    public string Process(string includedVirtualPath, string input)
    {
        return _cssRewriteUrlTransform.Process("~" + VirtualPathUtility.ToAbsolute(includedVirtualPath), input);
    }
}

//App_Start.cs
public static void Start()
{
      BundleTable.Bundles.Add(new StyleBundle("~/bundles/fontawesome")
                         .Include("~/content/font-awesome.css", new CssUrlTransformWrapper()));
} 
```

对我来说似乎工作得很好？

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-12-12T00:18:42.753

我发现如果您引用一个文件并且在同一文件夹中`*.css`有关联的文件，则 CssRewriteUrlTransform 无法运行。`*.min.css`

要解决此问题，请删除该`*.min.css`文件或直接在您的包中引用它：

```
bundles.Add(new Bundle("~/bundles/bootstrap")
    .Include("~/Libs/bootstrap3/css/bootstrap.min.css", new CssRewriteUrlTransform())); 
```

之后，您的 URL 将被正确转换，并且您的图像应该被正确解析。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-01-11T19:03:27.503

**尽管 Chris Baxter 的回答有助于解决原始问题，但在我的情况下，当应用程序托管在 virtual directory 时**它不起作用。在研究了这些选项后，我完成了 DIY 解决方案。

`ProperStyleBundle`类包括从原始借用的代码，[`CssRewriteUrlTransform`](https://aspnetoptimization.codeplex.com/SourceControl/latest#src/System.Web.Optimization/CssRewriteUrlTransform.cs)以正确转换虚拟目录中的相对路径。如果文件不存在，它也会抛出并阻止重新排序包中的文件（代码取自[`BetterStyleBundle`](http://tech.trailmax.info/2014/01/mvc-bundling-and-minification-a-betterstylebundle/)）。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.Optimization;
using System.Linq;

namespace MyNamespace
{
    public class ProperStyleBundle : StyleBundle
    {
        public override IBundleOrderer Orderer
        {
            get { return new NonOrderingBundleOrderer(); }
            set { throw new Exception( "Unable to override Non-Ordered bundler" ); }
        }

        public ProperStyleBundle( string virtualPath ) : base( virtualPath ) {}

        public ProperStyleBundle( string virtualPath, string cdnPath ) : base( virtualPath, cdnPath ) {}

        public override Bundle Include( params string[] virtualPaths )
        {
            foreach ( var virtualPath in virtualPaths ) {
                this.Include( virtualPath );
            }
            return this;
        }

        public override Bundle Include( string virtualPath, params IItemTransform[] transforms )
        {
            var realPath = System.Web.Hosting.HostingEnvironment.MapPath( virtualPath );
            if( !File.Exists( realPath ) )
            {
                throw new FileNotFoundException( "Virtual path not found: " + virtualPath );
            }
            var trans = new List<IItemTransform>( transforms ).Union( new[] { new ProperCssRewriteUrlTransform( virtualPath ) } ).ToArray();
            return base.Include( virtualPath, trans );
        }

        // This provides files in the same order as they have been added. 
        private class NonOrderingBundleOrderer : IBundleOrderer
        {
            public IEnumerable<BundleFile> OrderFiles( BundleContext context, IEnumerable<BundleFile> files )
            {
                return files;
            }
        }

        private class ProperCssRewriteUrlTransform : IItemTransform
        {
            private readonly string _basePath;

            public ProperCssRewriteUrlTransform( string basePath )
            {
                _basePath = basePath.EndsWith( "/" ) ? basePath : VirtualPathUtility.GetDirectory( basePath );
            }

            public string Process( string includedVirtualPath, string input )
            {
                if ( includedVirtualPath == null ) {
                    throw new ArgumentNullException( "includedVirtualPath" );
                }
                return ConvertUrlsToAbsolute( _basePath, input );
            }

            private static string RebaseUrlToAbsolute( string baseUrl, string url )
            {
                if ( string.IsNullOrWhiteSpace( url )
                     || string.IsNullOrWhiteSpace( baseUrl )
                     || url.StartsWith( "/", StringComparison.OrdinalIgnoreCase )
                     || url.StartsWith( "data:", StringComparison.OrdinalIgnoreCase )
                    ) {
                    return url;
                }
                if ( !baseUrl.EndsWith( "/", StringComparison.OrdinalIgnoreCase ) ) {
                    baseUrl = baseUrl + "/";
                }
                return VirtualPathUtility.ToAbsolute( baseUrl + url );
            }

            private static string ConvertUrlsToAbsolute( string baseUrl, string content )
            {
                if ( string.IsNullOrWhiteSpace( content ) ) {
                    return content;
                }
                return new Regex( "url\\(['\"]?(?<url>[^)]+?)['\"]?\\)" )
                    .Replace( content, ( match =>
                                         "url(" + RebaseUrlToAbsolute( baseUrl, match.Groups["url"].Value ) + ")" ) );
            }
        }
    }
} 
```

像这样使用它`StyleBundle`：

```
bundles.Add( new ProperStyleBundle( "~/styles/ui" )
    .Include( "~/Content/Themes/cm_default/style.css" )
    .Include( "~/Content/themes/custom-theme/jquery-ui-1.8.23.custom.css" )
    .Include( "~/Content/DataTables-1.9.4/media/css/jquery.dataTables.css" )
    .Include( "~/Content/DataTables-1.9.4/extras/TableTools/media/css/TableTools.css" ) ); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-11-30T12:04:55.740

从 v1.1.0-alpha1（预发布包）开始，框架使用`VirtualPathProvider`来访问文件，而不是接触物理文件系统。

更新后的变压器如下所示：

```
public class StyleRelativePathTransform
    : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse response)
    {
        Regex pattern = new Regex(@"url\s*\(\s*([""']?)([^:)]+)\1\s*\)", RegexOptions.IgnoreCase);

        response.Content = string.Empty;

        // open each of the files
        foreach (var file in response.Files)
        {
            using (var reader = new StreamReader(file.Open()))
            {
                var contents = reader.ReadToEnd();

                // apply the RegEx to the file (to change relative paths)
                var matches = pattern.Matches(contents);

                if (matches.Count > 0)
                {
                    var directoryPath = VirtualPathUtility.GetDirectory(file.VirtualPath);

                    foreach (Match match in matches)
                    {
                        // this is a path that is relative to the CSS file
                        var imageRelativePath = match.Groups[2].Value;

                        // get the image virtual path
                        var imageVirtualPath = VirtualPathUtility.Combine(directoryPath, imageRelativePath);

                        // convert the image virtual path to absolute
                        var quote = match.Groups[1].Value;
                        var replace = String.Format("url({0}{1}{0})", quote, VirtualPathUtility.ToAbsolute(imageVirtualPath));
                        contents = contents.Replace(match.Groups[0].Value, replace);
                    }

                }
                // copy the result into the response.
                response.Content = String.Format("{0}\r\n{1}", response.Content, contents);
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-26T13:00:29.303

这是一个捆绑转换，它将用相对于该 css 文件的 url 替换 css url。只需将其添加到您的捆绑包中，它应该可以解决问题。

```
public class CssUrlTransform: IBundleTransform
{
    public void Process(BundleContext context, BundleResponse response) {
        Regex exp = new Regex(@"url\([^\)]+\)", RegexOptions.IgnoreCase | RegexOptions.Singleline);
        foreach (FileInfo css in response.Files) {
            string cssAppRelativePath = css.FullName.Replace(context.HttpContext.Request.PhysicalApplicationPath, context.HttpContext.Request.ApplicationPath).Replace(Path.DirectorySeparatorChar, '/');
            string cssDir = cssAppRelativePath.Substring(0, cssAppRelativePath.LastIndexOf('/'));
            response.Content = exp.Replace(response.Content, m => TransformUrl(m, cssDir));
        }
    }

    private string TransformUrl(Match match, string cssDir) {
        string url = match.Value.Substring(4, match.Length - 5).Trim('\'', '"');

        if (url.StartsWith("http://") || url.StartsWith("data:image")) return match.Value;

        if (!url.StartsWith("/"))
            url = string.Format("{0}/{1}", cssDir, url);

        return string.Format("url({0})", url);
    }

} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-09-12T19:54:33.713

另一种选择是使用 IIS URL 重写模块将虚拟包映像文件夹映射到物理映像文件夹。下面是一个重写规则的示例，您可以将其用于名为“~/bundles/yourpage/styles”的包 - 注意正则表达式匹配字母数字字符以及连字符、下划线和句点，这些在图像文件名中很常见.

```
<rewrite>
  <rules>
    <rule name="Bundle Images">
      <match url="^bundles/yourpage/images/([a-zA-Z0-9\-_.]+)" />
      <action type="Rewrite" url="Content/css/jquery-ui/images/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

这种方法会产生一些额外的开销，但允许您更好地控制包名称，并且还可以减少您可能必须在一页上引用的包的数量。当然，如果您必须引用多个包含相对图像路径引用的第 3 方 css 文件，您仍然无法绕过创建多个捆绑包。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-10-19T23:03:18.567

格林解决方案很棒。

但是，当 url 中有父文件夹相对引用时，它对我不起作用。IE`url('../../images/car.png')`

所以，我稍微改变了`Include`方法，以解析每个正则表达式匹配的路径，允许相对路径，还可以选择将图像嵌入到 css 中。

我还将 IF DEBUG 更改为 check`BundleTable.EnableOptimizations`而不是`HttpContext.Current.IsDebuggingEnabled`.

```
 public new Bundle Include(params string[] virtualPaths)
    {
        if (!BundleTable.EnableOptimizations)
        {
            // Debugging. Bundling will not occur so act normal and no one gets hurt. 
            base.Include(virtualPaths.ToArray());
            return this;
        }
        var bundlePaths = new List<string>();
        var server = HttpContext.Current.Server;
        var pattern = new Regex(@"url\s*\(\s*([""']?)([^:)]+)\1\s*\)", RegexOptions.IgnoreCase);
        foreach (var path in virtualPaths)
        {
            var contents = File.ReadAllText(server.MapPath(path));
            var matches = pattern.Matches(contents);
            // Ignore the file if no matches
            if (matches.Count == 0)
            {
                bundlePaths.Add(path);
                continue;
            }
            var bundlePath = (System.IO.Path.GetDirectoryName(path) ?? string.Empty).Replace(@"\", "/") + "/";
            var bundleUrlPath = VirtualPathUtility.ToAbsolute(bundlePath);
            var bundleFilePath = string.Format("{0}{1}.bundle{2}",
                                               bundlePath,
                                               System.IO.Path.GetFileNameWithoutExtension(path),
                                               System.IO.Path.GetExtension(path));
            // Transform the url (works with relative path to parent folder "../")
            contents = pattern.Replace(contents, m =>
            {
                var relativeUrl = m.Groups[2].Value;
                var urlReplace = GetUrlReplace(bundleUrlPath, relativeUrl, server);
                return string.Format("url({0}{1}{0})", m.Groups[1].Value, urlReplace);
            });
            File.WriteAllText(server.MapPath(bundleFilePath), contents);
            bundlePaths.Add(bundleFilePath);
        }
        base.Include(bundlePaths.ToArray());
        return this;
    }

    private string GetUrlReplace(string bundleUrlPath, string relativeUrl, HttpServerUtility server)
    {
        // Return the absolute uri
        Uri baseUri = new Uri("http://dummy.org");
        var absoluteUrl = new Uri(new Uri(baseUri, bundleUrlPath), relativeUrl).AbsolutePath;
        var localPath = server.MapPath(absoluteUrl);
        if (IsEmbedEnabled && File.Exists(localPath))
        {
            var fi = new FileInfo(localPath);
            if (fi.Length < 0x4000)
            {
                // Embed the image in uri
                string contentType = GetContentType(fi.Extension);
                if (null != contentType)
                {
                    var base64 = Convert.ToBase64String(File.ReadAllBytes(localPath));
                    // Return the serialized image
                    return string.Format("data:{0};base64,{1}", contentType, base64);
                }
            }
        }
        // Return the absolute uri 
        return absoluteUrl;
    } 
```

希望它有帮助，问候。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-12-23T21:21:18.467

您可以简单地为您的虚拟捆绑路径添加另一个层次的深度

```
 //Two levels deep bundle path so that paths are maintained after minification
    bundles.Add(new StyleBundle("~/Content/css/css").Include("~/Content/bootstrap/bootstrap.css", "~/Content/site.css")); 
```

这是一个超低技术含量的答案，有点像 hack，但它可以工作，不需要任何预处理。鉴于其中一些答案的长度和复杂性，我更喜欢这样做。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-11-05T13:45:53.723

我遇到了这个问题，捆绑包的图像路径不正确并且`CssRewriteUrlTransform`没有正确解析相对父路径`..`（外部资源也有问题，如 webfonts）。这就是我编写这个自定义转换的原因（似乎正确地完成了上述所有操作）：

```
public class CssRewriteUrlTransform2 : IItemTransform
{
    public string Process(string includedVirtualPath, string input)
    {
        var pathParts = includedVirtualPath.Replace("~/", "/").Split('/');
        pathParts = pathParts.Take(pathParts.Count() - 1).ToArray();
        return Regex.Replace
        (
            input,
            @"(url\(['""]?)((?:\/??\.\.)*)(.*?)(['""]?\))",
            m => 
            {
                // Somehow assigning this to a variable is faster than directly returning the output
                var output =
                (
                    // Check if it's an aboslute url or base64
                    m.Groups[3].Value.IndexOf(':') == -1 ?
                    (
                        m.Groups[1].Value +
                        (
                            (
                                (
                                    m.Groups[2].Value.Length > 0 ||
                                    !m.Groups[3].Value.StartsWith('/')
                                )
                            ) ?
                            string.Join("/", pathParts.Take(pathParts.Count() - m.Groups[2].Value.Count(".."))) :
                            ""
                        ) +
                        (!m.Groups[3].Value.StartsWith('/') ? "/" + m.Groups[3].Value : m.Groups[3].Value) +
                        m.Groups[4].Value
                    ) :
                    m.Groups[0].Value
                );
                return output;
            }
        );
    }
} 
```

编辑：我没有意识到，但我在代码中使用了一些自定义扩展方法。那些的源代码是：

```
/// <summary>
/// Based on: http://stackoverflow.com/a/11773674
/// </summary>
public static int Count(this string source, string substring)
{
    int count = 0, n = 0;

    while ((n = source.IndexOf(substring, n, StringComparison.InvariantCulture)) != -1)
    {
        n += substring.Length;
        ++count;
    }
    return count;
}

public static bool StartsWith(this string source, char value)
{
    if (source.Length == 0)
    {
        return false;
    }
    return source[0] == value;
} 
```

当然应该可以替换`String.StartsWith(char)`为`String.StartsWith(string)`.

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-01-07T20:29:39.837

经过一番调查，我得出以下结论：您有两个选择：

1.  进行转换。对此非常有用的软件包：[https](https://bundletransformer.codeplex.com/) ://bundletransformer.codeplex.com/ 您需要对每个有问题的捆绑包进行以下转换：

    ```
    BundleResolver.Current = new CustomBundleResolver();
    var cssTransformer = new StyleTransformer();
    standardCssBundle.Transforms.Add(cssTransformer);
    bundles.Add(standardCssBundle); 
    ```

优点：在此解决方案中，您可以随意命名您的包 => 您可以将不同目录中的 css 文件组合成一个包。缺点：您需要转换每个有问题的捆绑包

2.  对包的名称使用相同的相对根目录，例如 css 文件所在的位置。优点：无需改造。缺点：您在将不同目录中的 css 表单组合成一个包时受到限制。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-10T08:23:09.273

`CssRewriteUrlTransform`解决了我的问题。
如果您的代码在使用后仍未加载图像`CssRewriteUrlTransform`，则将您的 css 文件名更改为：

```
.Include("~/Content/jquery/jquery-ui-1.10.3.custom.css", new CssRewriteUrlTransform()) 
```

到：

```
.Include("~/Content/jquery/jquery-ui.css", new CssRewriteUrlTransform()) 
```

不知何故。（点）在网址中无法识别。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-22T08:53:11.880

只需记住修复捆绑包中的***多个***CSS 包含项，例如：

```
bundles.Add(new StyleBundle("~/Content/styles/jquery-ui")
    .Include("~/Content/css/path1/somestyle1.css", "~/Content/css/path2/somestyle2.css")); 
```

您不能`new CssRewriteUrlTransform()`像使用一个 CSS 文件一样添加到末尾，因为该方法不支持它，因此您必须**多次****使用`Include`**：

```
bundles.Add(new StyleBundle("~/Content/styles/jquery-ui")
    .Include("~/Content/css/path1/somestyle1.css", new CssRewriteUrlTransform())
    .Include("~/Content/css/path2/somestyle2.css", new CssRewriteUrlTransform())); 
```

# javascript - 是否可以在 window.onresize 上更改 jQuery 插件的静态变量？

> ID：11355937
> 
> 赞同：1
> 
> 时间：2012-07-06T04:39:47.130
> 
> 标签：javascript, jquery, resize

所以我有这个插件（嗯，它的一部分）。在调整窗口大小时，我想更改宽度变量的值。这可能吗？

这是代码：

```
(function($){
    $.fn.slides = function( option ) {
        // override defaults with specified option
        option = $.extend( {}, $.fn.slides.option, option );

        return this.each(function(){
            // wrap slides in control container, make sure slides are block level
            $('.' + option.container, $(this)).children().wrapAll('<div class="slides_control"/>');

            var elem = $(this),
                control = $('.slides_control',elem),
                total = control.children().size(),
                width = control.children().outerWidth(),
                height = control.children().outerHeight(),
                start = option.start - 1,
                effect = option.effect.indexOf(',') < 0 ? option.effect : option.effect.replace(' ', '').split(',')[0],
                paginationEffect = option.effect.indexOf(',') < 0 ? effect : option.effect.replace(' ', '').split(',')[1],
                next = 0, prev = 0, number = 0, current = 0, loaded, active, clicked, position, direction, imageParent, pauseTimeout, playInterval;
            }
        )};

    }
); 
```

我尝试使用

```
$.slides.width = 1000; 
```

但无济于事。请帮忙！

这是其余的代码（它是slidesjs）：

```
(function($){
    $.fn.slides = function( option ) {
        // override defaults with specified option
        option = $.extend( {}, $.fn.slides.option, option );

        return this.each(function(){
            // wrap slides in control container, make sure slides are block level
            $('.' + option.container, $(this)).children().wrapAll('<div class="slides_control"/>');

            var elem = $(this),
                control = $('.slides_control',elem),
                total = control.children().size(),
                width = control.children().outerWidth(),
                height = control.children().outerHeight(),
                start = option.start - 1,
                effect = option.effect.indexOf(',') < 0 ? option.effect : option.effect.replace(' ', '').split(',')[0],
                paginationEffect = option.effect.indexOf(',') < 0 ? effect : option.effect.replace(' ', '').split(',')[1],
                next = 0, prev = 0, number = 0, current = 0, loaded, active, clicked, position, direction, imageParent, pauseTimeout, playInterval;

            // is there only one slide?
            if (total < 2) {
                // Fade in .slides_container
                $('.' + option.container, $(this)).fadeIn(option.fadeSpeed, option.fadeEasing, function(){
                    // let the script know everything is loaded
                    loaded = true;
                    // call the loaded funciton
                    option.slidesLoaded();
                });
                // Hide the next/previous buttons
                $('.' + option.next + ', .' + option.prev).fadeOut(0);
                return false;
            }

            // animate slides
            function animate(direction, effect, clicked) {
                if (!active && loaded) {
                    active = true;
                    // start of animation
                    option.animationStart(current + 1);
                    switch(direction) {
                        case 'next':
                            // change current slide to previous
                            prev = current;
                            // get next from current + 1
                            next = current + 1;
                            // if last slide, set next to first slide
                            next = total === next ? 0 : next;
                            // set position of next slide to right of previous
                            position = width*2;
                            // distance to slide based on width of slides
                            direction = -width*2;
                            // store new current slide
                            current = next;
                            log(width);
                        break;
                        case 'prev':
                            // change current slide to previous
                            prev = current;
                            // get next from current - 1
                            next = current - 1;
                            // if first slide, set next to last slide
                            next = next === -1 ? total-1 : next;                                
                            // set position of next slide to left of previous
                            position = 0;                               
                            // distance to slide based on width of slides
                            direction = 0;      
                            // store new current slide
                            current = next;
                        break;
                        case 'pagination':
                            // get next from pagination item clicked, convert to number
                            next = parseInt(clicked,10);
                            // get previous from pagination item with class of current
                            prev = $('.' + option.paginationClass + ' li.'+ option.currentClass +' a', elem).attr('href').match('[^#/]+$');
                            // if next is greater then previous set position of next slide to right of previous
                            if (next > prev) {
                                position = width*2;
                                direction = -width*2;
                            } else {
                            // if next is less then previous set position of next slide to left of previous
                                position = 0;
                                direction = 0;
                            }
                            // store new current slide
                            current = next;
                        break;
                    }

                    // fade animation
                    if (effect === 'fade') {
                        // fade animation with crossfade
                        if (option.crossfade) {
                            // put hidden next above current
                            control.children(':eq('+ next +')', elem).css({
                                zIndex: 10
                            // fade in next
                            }).fadeIn(option.fadeSpeed, option.fadeEasing, function(){
                                if (option.autoHeight) {
                                    // animate container to height of next
                                    control.animate({
                                        height: control.children(':eq('+ next +')', elem).outerHeight()
                                    }, option.autoHeightSpeed, function(){
                                        // hide previous
                                        control.children(':eq('+ prev +')', elem).css({
                                            display: 'none',
                                            zIndex: 0
                                        });                             
                                        // reset z index
                                        control.children(':eq('+ next +')', elem).css({
                                            zIndex: 0
                                        });                                 
                                        // end of animation
                                        option.animationComplete(next + 1);
                                        active = false;
                                    });
                                } else {
                                    // hide previous
                                    control.children(':eq('+ prev +')', elem).css({
                                        display: 'none',
                                        zIndex: 0
                                    });                                 
                                    // reset zindex
                                    control.children(':eq('+ next +')', elem).css({
                                        zIndex: 0
                                    });                                 
                                    // end of animation
                                    option.animationComplete(next + 1);
                                    active = false;
                                }
                            });
                        } else {
                            // fade animation with no crossfade
                            control.children(':eq('+ prev +')', elem).fadeOut(option.fadeSpeed,  option.fadeEasing, function(){
                                // animate to new height
                                if (option.autoHeight) {
                                    control.animate({
                                        // animate container to height of next
                                        height: control.children(':eq('+ next +')', elem).outerHeight()
                                    }, option.autoHeightSpeed,
                                    // fade in next slide
                                    function(){
                                        control.children(':eq('+ next +')', elem).fadeIn(option.fadeSpeed, option.fadeEasing);
                                    });
                                } else {
                                // if fixed height
                                    control.children(':eq('+ next +')', elem).fadeIn(option.fadeSpeed, option.fadeEasing, function(){
                                        // fix font rendering in ie, lame
                                        if($.browser.msie) {
                                            $(this).get(0).style.removeAttribute('filter');
                                        }
                                    });
                                }                                   
                                // end of animation
                                option.animationComplete(next + 1);
                                active = false;
                            });
                        }
                    // slide animation
                    } else {
                        // move next slide to right of previous
                        control.children(':eq('+ next +')').css({
                            left: position,
                            display: 'block'
                        });
                        // animate to new height
                        if (option.autoHeight) {
                            control.animate({
                                left: direction,
                                height: control.children(':eq('+ next +')').outerHeight()
                            },option.slideSpeed, option.slideEasing, function(){
                                control.css({
                                    left: -width
                                });
                                control.children(':eq('+ next +')').css({
                                    left: width,
                                    zIndex: 5
                                });
                                // reset previous slide
                                control.children(':eq('+ prev +')').css({
                                    left: width,
                                    display: 'none',
                                    zIndex: 0
                                });
                                // end of animation
                                option.animationComplete(next + 1);
                                active = false;
                            });
                            // if fixed height
                            } else {
                                // animate control
                                control.animate({
                                    left: direction
                                },option.slideSpeed, option.slideEasing, function(){
                                    // after animation reset control position
                                    control.css({
                                        left: -width
                                    });
                                    // reset and show next
                                    control.children(':eq('+ next +')').css({
                                        left: width,
                                        zIndex: 5
                                    });
                                    // reset previous slide
                                    control.children(':eq('+ prev +')').css({
                                        left: width,
                                        display: 'none',
                                        zIndex: 0
                                    });
                                    // end of animation
                                    option.animationComplete(next + 1);
                                    active = false;
                                });
                            }
                        }
                    // set current state for pagination
                    if (option.pagination) {
                        // remove current class from all
                        $('.'+ option.paginationClass +' li.' + option.currentClass, elem).removeClass(option.currentClass);
                        // add current class to next
                        $('.' + option.paginationClass + ' li:eq('+ next +')', elem).addClass(option.currentClass);
                    }
                }
            } // end animate function

            function stop() {
                // clear interval from stored id
                clearInterval(elem.data('interval'));
            }

            function pause() {
                if (option.pause) {
                    // clear timeout and interval
                    clearTimeout(elem.data('pause'));
                    clearInterval(elem.data('interval'));
                    // pause slide show for option.pause amount
                    pauseTimeout = setTimeout(function() {
                        // clear pause timeout
                        clearTimeout(elem.data('pause'));
                        // start play interval after pause
                        playInterval = setInterval( function(){
                            animate("next", effect);
                        },option.play);
                        // store play interval
                        elem.data('interval',playInterval);
                    },option.pause);
                    // store pause interval
                    elem.data('pause',pauseTimeout);
                } else {
                    // if no pause, just stop
                    stop();
                }
            }

            // 2 or more slides required
            if (total < 2) {
                return;
            }

            // error corection for start slide
            if (start < 0) {
                start = 0;
            }

            if (start > total) {
                start = total - 1;
            }

            // change current based on start option number
            if (option.start) {
                current = start;
            }

            // randomizes slide order
            if (option.randomize) {
                control.randomize();
            }

            // make sure overflow is hidden, width is set
            $('.' + option.container, elem).css({
                overflow: 'hidden',
                // fix for ie
                position: 'relative'
            });

            // set css for slides
            control.children().css({
                position: 'absolute',
                top: 0, 
                left: control.children().outerWidth(),
                zIndex: 0,
                display: 'none'
             });

            // set css for control div
            control.css({
                position: 'relative',
                // size of control 3 x slide width
                width: (width * 3),
                // set height to slide height
                height: height,
                // center control to slide
                left: -width
            });

            // show slides
            $('.' + option.container, elem).css({
                display: 'block'
            });

            // if autoHeight true, get and set height of first slide
            if (option.autoHeight) {
                control.children().css({
                    height: 'auto'
                });
                control.animate({
                    height: control.children(':eq('+ start +')').outerHeight()
                },option.autoHeightSpeed);
            }

            // checks if image is loaded
            if (option.preload && control.find('img:eq(' + start + ')').length) {
                // adds preload image
                $('.' + option.container, elem).css({
                    background: 'url(' + option.preloadImage + ') no-repeat 50% 50%'
                });

                // gets image src, with cache buster
                var img = control.find('img:eq(' + start + ')').attr('src') + '?' + (new Date()).getTime();

                // check if the image has a parent
                if ($('img', elem).parent().attr('class') != 'slides_control') {
                    // If image has parent, get tag name
                    imageParent = control.children(':eq(0)')[0].tagName.toLowerCase();
                } else {
                    // Image doesn't have parent, use image tag name
                    imageParent = control.find('img:eq(' + start + ')');
                }

                // checks if image is loaded
                control.find('img:eq(' + start + ')').attr('src', img).load(function() {
                    // once image is fully loaded, fade in
                    control.find(imageParent + ':eq(' + start + ')').fadeIn(option.fadeSpeed, option.fadeEasing, function(){
                        $(this).css({
                            zIndex: 5
                        });
                        // removes preload image
                        $('.' + option.container, elem).css({
                            background: ''
                        });
                        // let the script know everything is loaded
                        loaded = true;
                        // call the loaded funciton
                        option.slidesLoaded();
                    });
                });
            } else {
                // if no preloader fade in start slide
                control.children(':eq(' + start + ')').fadeIn(option.fadeSpeed, option.fadeEasing, function(){
                    // let the script know everything is loaded
                    loaded = true;
                    // call the loaded funciton
                    option.slidesLoaded();
                });
            }

            // click slide for next
            if (option.bigTarget) {
                // set cursor to pointer
                control.children().css({
                    cursor: 'pointer'
                });
                // click handler
                control.children().click(function(){
                    // animate to next on slide click
                    animate('next', effect);
                    return false;
                });                                 
            }

            // pause on mouseover
            if (option.hoverPause && option.play) {
                control.bind('mouseover',function(){
                    // on mouse over stop
                    stop();
                });
                control.bind('mouseleave',function(){
                    // on mouse leave start pause timeout
                    pause();
                });
            }

            // generate next/prev buttons
            if (option.generateNextPrev) {
                $('.' + option.container, elem).after('<div class="control"><a href="#" class="'+ option.prev +'">&lt;</a>');
                $('.' + option.prev, elem).after('<div class="slideCount">' + (current+1) + '</div> /&nbsp;&nbsp;' + total +'<a href="#" class="'+ option.next +'">&gt;</a></div>');
            }

            // next button
            $('.' + option.next ,elem).click(function(e){
                e.preventDefault();
                if (option.play) {
                    pause();
                }
                animate('next', effect);
                $('.slideCount').html(current+1);
            });

            // previous button
            $('.' + option.prev, elem).click(function(e){
                e.preventDefault();
                if (option.play) {
                     pause();
                }
                animate('prev', effect);
                $('.slideCount').html(current+1);
            });

            // generate pagination
            if (option.generatePagination) {
                // create unordered list
                if (option.prependPagination) {
                    elem.prepend('<ul class='+ option.paginationClass +'></ul>');
                } else {
                    elem.append('<ul class='+ option.paginationClass +'></ul>');
                }
                // for each slide create a list item and link
                control.children().each(function(){
                    $('.' + option.paginationClass, elem).append('<li><a href="#'+ number +'">'+ (number+1) +'</a></li>');
                    number++;
                });
            } else {
                // if pagination exists, add href w/ value of item number to links
                $('.' + option.paginationClass + ' li a', elem).each(function(){
                    $(this).attr('href', '#' + number);
                    number++;
                });
            }

            // add current class to start slide pagination
            $('.' + option.paginationClass + ' li:eq('+ start +')', elem).addClass(option.currentClass);

            // click handling 
            $('.' + option.paginationClass + ' li a', elem ).click(function(){
                // pause slideshow
                if (option.play) {
                     pause();
                }
                // get clicked, pass to animate function                    
                clicked = $(this).attr('href').match('[^#/]+$');
                // if current slide equals clicked, don't do anything
                if (current != clicked) {
                    animate('pagination', paginationEffect, clicked);
                }
                return false;
            });

            // click handling 
            $('a.link', elem).click(function(){
                // pause slideshow
                if (option.play) {
                     pause();
                }
                // get clicked, pass to animate function                    
                clicked = $(this).attr('href').match('[^#/]+$') - 1;
                // if current slide equals clicked, don't do anything
                if (current != clicked) {
                    animate('pagination', paginationEffect, clicked);
                }
                return false;
            });

            if (option.play) {
                // set interval
                playInterval = setInterval(function() {
                    animate('next', effect);
                }, option.play);
                // store interval id
                elem.data('interval',playInterval);
            }
        });
    };

    // default options
    $.fn.slides.option = {
        preload: false, // boolean, Set true to preload images in an image based slideshow
        preloadImage: '/img/loading.gif', // string, Name and location of loading image for preloader. Default is "/img/loading.gif"
        container: 'slides_container', // string, Class name for slides container. Default is "slides_container"
        generateNextPrev: false, // boolean, Auto generate next/prev buttons
        next: 'next', // string, Class name for next button
        prev: 'prev', // string, Class name for previous button
        pagination: true, // boolean, If you're not using pagination you can set to false, but don't have to
        generatePagination: true, // boolean, Auto generate pagination
        prependPagination: false, // boolean, prepend pagination
        paginationClass: 'pagination', // string, Class name for pagination
        currentClass: 'current', // string, Class name for current class
        fadeSpeed: 350, // number, Set the speed of the fading animation in milliseconds
        fadeEasing: '', // string, must load jQuery's easing plugin before http://gsgd.co.uk/sandbox/jquery/easing/
        slideSpeed: 350, // number, Set the speed of the sliding animation in milliseconds
        slideEasing: '', // string, must load jQuery's easing plugin before http://gsgd.co.uk/sandbox/jquery/easing/
        start: 1, // number, Set the speed of the sliding animation in milliseconds
        effect: 'slide', // string, '[next/prev], [pagination]', e.g. 'slide, fade' or simply 'fade' for both
        crossfade: false, // boolean, Crossfade images in a image based slideshow
        randomize: false, // boolean, Set to true to randomize slides
        play: 0, // number, Autoplay slideshow, a positive number will set to true and be the time between slide animation in milliseconds
        pause: 0, // number, Pause slideshow on click of next/prev or pagination. A positive number will set to true and be the time of pause in milliseconds
        hoverPause: false, // boolean, Set to true and hovering over slideshow will pause it
        autoHeight: false, // boolean, Set to true to auto adjust height
        autoHeightSpeed: 350, // number, Set auto height animation time in milliseconds
        bigTarget: false, // boolean, Set to true and the whole slide will link to next slide on click
        animationStart: function(){}, // Function called at the start of animation
        animationComplete: function(){}, // Function called at the completion of animation
        slidesLoaded: function() {} // Function is called when slides is fully loaded
    };

    // Randomize slide order on load
    $.fn.randomize = function(callback) {
        function randomizeOrder() { return(Math.round(Math.random())-0.5); }
            return($(this).each(function() {
            var $this = $(this);
            var $children = $this.children();
            var childCount = $children.length;
            if (childCount > 1) {
                $children.hide();
                var indices = [];
                for (i=0;i<childCount;i++) { indices[indices.length] = i; }
                indices = indices.sort(randomizeOrder);
                $.each(indices,function(j,k) { 
                    var $child = $children.eq(k);
                    var $clone = $child.clone(true);
                    $clone.show().appendTo($this);
                    if (callback !== undefined) {
                        callback($child, $clone);
                    }
                $child.remove();
            });
            }
        }));
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:12:25.727

要访问宽度，您必须在该变量范围内的某处定义调整大小事件。也许就在这一行之前：

```
// is there only one slide?
if (total < 2) { 
```

将事件处理程序附加到窗口

```
$(window).on('resize', function(e) {
   // width is available here
   width = control.children().outerWidth() // recalculates width
}); 
```

# c# - SQL AZURE 中的设计联盟

> ID：11355938
> 
> 赞同：3
> 
> 时间：2012-07-06T04:39:55.633
> 
> 标签：c#, sql-server-2008, azure-sql-database, federation

我需要您对在 SQL AZURE 中应用联合的建议。在我最近的一个项目中，我已经有一个 Azure 数据库。在这个项目中，我有一个很大的客户列表，每个客户都有另外一大组注册用户（超过 25000，因为它是一个医疗系统）。

为此，我们的工作是为每个客户创建一个联盟。因此，客户数据存储在主数据库中，每个客户下的注册用户数据可以存储在单独的联合成员中。

这里我的问题是如何设计联合密钥，因为如果我使用客户 ID 作为联合密钥，那么第一个联合成员中的所有用户都应该拥有相同的密钥。所以这是不可能的。如果您有任何想法，请与我分享

我怎么解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:04:49.070

你的问题有点棘手。您想按客户联合，但您希望客户在根数据库中。如果用户属于客户，您的用户对客户有某种引用，那么您可以联合客户 ID。

如果用户登录，他们不需要访问客户吗？

我建议你看看这篇文章：

[使用联合进行数据库设计的规模优先方法：第 1 部分 - 选择联合和选择联合密钥](http://blogs.msdn.com/b/cbiyikoglu/archive/2012/02/29/database-design-with-federations-part-1-picking-federations-and-picking-the-federation-key.aspx)

# javascript - 将项目放在 JavaScript 数组中的任意索引上

> ID：11355946
> 
> 赞同：4
> 
> 时间：2012-07-06T04:41:04.433
> 
> 标签：javascript, arrays

> **可能重复：**
> [Javascript 数组是否稀疏？](https://stackoverflow.com/questions/1510778/are-javascript-arrays-sparse)

JavaScript中的以下“安全”吗？（如，可以预期在所有 JavaScript 引擎上可靠地工作）

```
a = [];
a[100] = "hello";

a[100] == "hello"; // should be true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T04:43:03.823

是的。JavaScript 中的数组是稀疏的，您的代码应该适用于所有 JavaScript 实现。

您可以在[规范 (PDF)](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)的第 15.4 节中了解要求。

简短摘要：数组是特殊对象，当在具有数字名称的属性处添加元素时（如 `a[123]="test"），它的长度属性会调整。其他方法（如 join）在操作期间会考虑长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:43:39.343

是的，为什么它不起作用？它完全可以接受的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:44:45.353

你甚至可以假设

```
a[100] === "hello"; // will return true 
```

# django - Django celery worker __init__() 错误

> ID：11355949
> 
> 赞同：1
> 
> 时间：2012-07-06T04:41:21.563
> 
> 标签：django, celery, newrelic, mixpanel

技术堆栈如下所示：

*   Django 前端和后端
*   用于异步处理耗时任务的 Celery 工作队列

在过去的一两天内，我在本地和生产环境中都注意到了很多这样的堆栈跟踪：

```
[2012-07-05 20:31:01,583: CRITICAL/MainProcess] Task site_endpoint.tasks.async_inbound_message[a950736c-ff93-420c-9fbf-6deb2b88ff4d] INTERNAL ERROR: TypeError('__init__() takes at least 3 arguments (1 given)',)
Traceback (most recent call last):
  File "/projects/site/venv/lib/python2.7/site-packages/celery/execute/trace.py", line 192, in trace_task
    R = I.handle_error_state(task, eager=eager)
  File "/projects/site/venv/lib/python2.7/site-packages/celery/execute/trace.py", line 91, in handle_error_state
    }[self.state](task, store_errors=store_errors)
  File "/projects/site/venv/lib/python2.7/site-packages/celery/execute/trace.py", line 114, in handle_failure
    task.backend.mark_as_failure(req.id, exc, self.strtb)
  File "/projects/site/venv/lib/python2.7/site-packages/celery/backends/base.py", line 96, in mark_as_failure
    traceback=traceback)
  File "/projects/site/venv/lib/python2.7/site-packages/celery/backends/base.py", line 229, in store_result
    return self._store_result(task_id, result, status, traceback, **kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/djcelery/backends/database.py", line 26, in _store_result
    traceback=traceback)
  File "/projects/site/venv/lib/python2.7/site-packages/djcelery/managers.py", line 40, in _inner
    return fun(*args, **kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/djcelery/managers.py", line 164, in store_result
    "traceback": traceback})
  File "/projects/site/venv/lib/python2.7/site-packages/djcelery/managers.py", line 82, in update_or_create
    return self.get_query_set().update_or_create(**kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/djcelery/managers.py", line 66, in update_or_create
    obj, created = self.get_or_create(**kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/query.py", line 385, in get_or_create
    obj.save(force_insert=True, using=self.db)
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/base.py", line 460, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/base.py", line 543, in save_base
    for f in meta.local_fields if not isinstance(f, AutoField)]
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/fields/subclassing.py", line 28, in inner
    return func(*args, **kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/fields/subclassing.py", line 28, in inner
    return func(*args, **kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 276, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/projects/site/venv/lib/python2.7/site-packages/django/db/models/fields/subclassing.py", line 53, in inner
    return func(*args, **kwargs)
  File "/projects/site/venv/lib/python2.7/site-packages/picklefield/fields.py", line 154, in get_db_prep_value
    value = force_unicode(dbsafe_encode(value, self.compress, self.protocol))
  File "/projects/site/venv/lib/python2.7/site-packages/picklefield/fields.py", line 57, in dbsafe_encode
    value = b64encode(dumps(deepcopy(value), pickle_protocol))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py", line 328, in _reconstruct
    args = deepcopy(args, memo)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py", line 237, in _deepcopy_tuple
    y.append(deepcopy(a, memo))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py", line 329, in _reconstruct
    y = callable(*args)
TypeError: __init__() takes at least 3 arguments (1 given) 
```

查看发生这种情况时的数据库调用，我可以看到正在执行以下查询：

```
LOG:  statement: SELECT "celery_taskmeta"."id", "celery_taskmeta"."task_id", "celery_taskmeta"."status", "celery_taskmeta"."result", "celery_taskmeta"."date_done", "celery_taskmeta"."traceback" FROM "celery_taskmeta" WHERE "celery_taskmeta"."task_id" = 'a950736c-ff93-420c-9fbf-6deb2b88ff4d' 
LOG:  statement: SAVEPOINT s140735259576672_x4
LOG:  statement: ROLLBACK
LOG:  statement: BEGIN
LOG:  statement: SELECT "celery_taskmeta"."id", "celery_taskmeta"."task_id", "celery_taskmeta"."status", "celery_taskmeta"."result", "celery_taskmeta"."date_done", "celery_taskmeta"."traceback" FROM "celery_taskmeta" WHERE "celery_taskmeta"."task_id" = 'a950736c-ff93-420c-9fbf-6deb2b88ff4d' 
LOG:  statement: SAVEPOINT s140735259576672_x5
LOG:  statement: ROLLBACK
LOG:  statement: BEGIN
LOG:  statement: SELECT "celery_taskmeta"."id", "celery_taskmeta"."task_id", "celery_taskmeta"."status", "celery_taskmeta"."result", "celery_taskmeta"."date_done", "celery_taskmeta"."traceback" FROM "celery_taskmeta" WHERE "celery_taskmeta"."task_id" = 'a950736c-ff93-420c-9fbf-6deb2b88ff4d' 
LOG:  statement: SAVEPOINT s140735259576672_x6 
```

我很难理解这个无效对象初始化的来源是什么。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:44:46.333

看起来您正在使用新的远程性能监控/取证分析。在使用旧版本的库之前，我已经看到过这种问题。我建议检查以确保您使用的是他们的客户端库的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T02:31:51.337

这发生在我身上，我通过阅读[Python multiprocessing pool hangs at join 解决了这个问题？](https://stackoverflow.com/questions/15314189/python-multiprocessing-pool-hangs-at-join)和[http://bugs.python.org/issue9400](http://bugs.python.org/issue9400)。

## 问题：

芹菜以某种方式腌制它得到的异常并将它们发送到某个地方（我猜是到数据库/经纪人）。所以，如果在任何时候，一个 Celery 任务引发了一个不可腌制的异常，这个 bug 就会发生。

## 解决方案：

你必须确保你正在处理你的 Celery 任务代码可能引发的所有奇怪的异常。可以给你提示，但它可能对`Traceback`所有事情都不是很准确。

如果您真的不知道您的异常来自哪里，请尝试将您的任务代码放在`try...except: pass`块中。

# bash - 变量和 CLI？

> ID：11355951
> 
> 赞同：0
> 
> 时间：2012-07-06T04:41:35.040
> 
> 标签：bash

我想要以下内容：

```
$ DOMAIN=chron echo snippet-www.$DOMAIN.com-head.html 
```

输出：

```
snippet.www.chron.com-head.html 
```

但是对于我的生活，除了通过两个命令之外，我无法弄清楚如何做到这一点：

```
$ export DOMAIN=chron
$ echo snippet-www.$DOMAIN.com-head.html 
```

有没有办法让它作为一个命令工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:54:08.390

我偶然发现了答案！

**只需在变量赋值后添加分号 (;)。**

```
$ DOMAIN=chron; echo snippet-www.$DOMAIN.com-head.html 
snippet-www.chron.com-head.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:50:37.203

```
$ ( export DOMAIN=chron ; echo snippet-www.$DOMAIN.com-head.html ) 
```

这会产生`$DOMAIN`一个环境变量（这对于本示例无关紧要，但对于其他类似的命令可能），并将其生命周期限制在括号内。

您的答案：

```
$ DOMAIN=chron; echo snippet-www.$DOMAIN.com-head.html 
```

导致`$DOMAIN`成为（非导出的）shell 变量，并为以后的命令保留设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:40:23.820

这应该工作

```
DOMAIN=chron eval 'echo snippet-www.$DOMAIN.com-head.html' 
```

# javascript - { myParameter : 77 } 和 { 'myParameter' : 77 } 之间的 JSON 差异

> ID：11355960
> 
> 赞同：3
> 
> 时间：2012-07-06T04:42:10.983
> 
> 标签：javascript, asp.net, json

我在 ASP.Net 应用程序中有几个对 Web 服务的 AJAX 调用，基本上我使用 JQuery 进行调用，但我想知道编写之间的区别（如果有的话）：

```
data: "{ 'myParameter' : 77 }" 
```

和

```
data: "{ myParameter : 77 }" 
```

我已经尝试了这两种方法，它们都有效，那么有什么区别？

## 编辑 1

好的，根据我的理解，它们是有效的，因为它们在 JavaScript 中是有效的，*但它们不是严格的 JSON 有效对象*，那么最佳实践或推荐使用是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T04:43:28.173

它们都不是真正有效的 JSON（这[要求所有键名都用*双*引号括起来`"`](http://www.json.org/)），但是在 JavaScript 中解析它们时，这三个之间确实没有区别，因为所有三个（单引号、双引号和无引号）在 JavaScript 对象字面量中有效。

当您需要在 JavaScript 中不是有效标识符的键名时，实际的区别就出现了。例如，`"key-name"`。`{"key-name": 5}`会工作，但`{key-name: 5}`不会。

# facebook - 链接到 Facebook 页面上的页面选项卡应用程序

> ID：11355963
> 
> 赞同：1
> 
> 时间：2012-07-06T04:42:41.610
> 
> 标签：facebook, facebook-page

当只知道页面 ID 和应用 ID 时，是否有可靠的方法链接到 Facebook 页面上的应用？具体来说，页面的 URL 是未知的，只有 ID。

[https://developers.facebook.com/docs/authentication/pagetab/](https://developers.facebook.com/docs/authentication/pagetab/)上的文档声称以下内容应该有效：

```
https://www.facebook.com/pages/null/PAGE_ID/app_YOUR_APP_ID 
```

但是，当我尝试这样做时，例如[http://www.facebook.com/pages/null/126169047465269/app_222972467721305](http://www.facebook.com/pages/null/126169047465269/app_222972467721305)不起作用，而是我得到“此内容当前不可用”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:53:26.523

始终适用于数字页面 ID 的最佳形式是：

[https://www.facebook.com/pages/null/PAGEID?sk=app_APPID](https://www.facebook.com/pages/null/PAGEID?sk=app_APPID)

将 PAGEID 和 APPID 替换为数字 ID。

如果您有用户名而不是数字页面 ID，则 URL 应采用以下形式：

[https://www.facebook.com/PAGEUSERNAME?sk=app_APPID](https://www.facebook.com/PAGEUSERNAME?sk=app_APPID) 或 [https://www.facebook.com/PAGEUSERNAME/app_APPID](https://www.facebook.com/PAGEUSERNAME/app_APPID)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:42:33.947

这里的页面不是公开的或者可能不可用？：
[https ://www.facebook.com/pages/126169047465269/](https://www.facebook.com/pages/126169047465269/)

试试这个，
`https://www.facebook.com/PAGE_NAME_OR_ID/app_222972467721305`

在`PAGE_NAME_OR_ID`add`pages/126169047465269`中，如果您的页面有自定义 slug，请添加 slug。

但要确保检查您的应用程序是处于沙盒模式还是未发布。

# java - SpringSource 工具套件中的 Maven 依赖项

> ID：11355971
> 
> 赞同：2
> 
> 时间：2012-07-06T04:43:39.033
> 
> 标签：java, maven, pom.xml

这是我第一次使用 Maven，由于某种原因在我的机器上我无法获得我需要的两个休眠依赖项。我的 Pom.xml 文件如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
            <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
                <modelVersion>4.0.0</modelVersion>
                <groupId>com.aramburu</groupId>
                <artifactId>depcheck</artifactId>
                <name>depcheck</name>
                <packaging>war</packaging>
                <version>1.0.0-BUILD-SNAPSHOT</version>

                <properties>
                    <java-version>1.6</java-version>
                    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
                    <org.aspectj-version>1.6.9</org.aspectj-version>
                    <org.slf4j-version>1.5.10</org.slf4j-version>
                </properties>
                <dependencies>
                    <!-- Spring -->
                    <dependency>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-context</artifactId>
                        <version>${org.springframework-version}</version>
                        <exclusions>
                            <!-- Exclude Commons Logging in favor of SLF4j -->
                            <exclusion>
                                <groupId>commons-logging</groupId>
                                <artifactId>commons-logging</artifactId>
                             </exclusion>
                        </exclusions>
                    </dependency>
                    <dependency>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-webmvc</artifactId>
                        <version>${org.springframework-version}</version>
                    </dependency>

                    <!-- AspectJ -->
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjrt</artifactId>
                        <version>${org.aspectj-version}</version>
                    </dependency>   

                    <!-- Logging -->
                    <dependency>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                        <version>${org.slf4j-version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.slf4j</groupId>
                        <artifactId>jcl-over-slf4j</artifactId>
                        <version>${org.slf4j-version}</version>
                        <scope>runtime</scope>
                    </dependency>
                    <dependency>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-log4j12</artifactId>
                        <version>${org.slf4j-version}</version>
                        <scope>runtime</scope>
                    </dependency>
                    <dependency>
                        <groupId>log4j</groupId>
                        <artifactId>log4j</artifactId>
                        <version>1.2.15</version>
                        <exclusions>
                            <exclusion>
                                <groupId>javax.mail</groupId>
                                <artifactId>mail</artifactId>
                            </exclusion>
                            <exclusion>
                                <groupId>javax.jms</groupId>
                                <artifactId>jms</artifactId>
                            </exclusion>
                            <exclusion>
                                <groupId>com.sun.jdmk</groupId>
                                <artifactId>jmxtools</artifactId>
                            </exclusion>
                            <exclusion>
                                <groupId>com.sun.jmx</groupId>
                                <artifactId>jmxri</artifactId>
                            </exclusion>
                        </exclusions>
                        <scope>runtime</scope>
                    </dependency>

                    <!-- @Inject -->
                    <dependency>
                        <groupId>javax.inject</groupId>
                        <artifactId>javax.inject</artifactId>
                        <version>1</version>
                    </dependency>

                    <!-- Servlet -->
                    <dependency>
                        <groupId>javax.servlet</groupId>
                        <artifactId>servlet-api</artifactId>
                        <version>2.5</version>
                        <scope>provided</scope>
                    </dependency>
                    <dependency>
                        <groupId>javax.servlet.jsp</groupId>
                        <artifactId>jsp-api</artifactId>
                        <version>2.1</version>
                        <scope>provided</scope>
                    </dependency>
                    <dependency>
                        <groupId>javax.servlet</groupId>
                        <artifactId>jstl</artifactId>
                        <version>1.2</version>
                    </dependency>

                    <!-- Test -->
                    <dependency>
                        <groupId>junit</groupId>
                        <artifactId>junit</artifactId>
                        <version>4.7</version>
                        <scope>test</scope>
                    </dependency>
                    <dependency>
                        <groupId>javax.validation</groupId>
                        <artifactId>validation-api</artifactId>
                    </dependency>
                    <dependency>
                        <groupId>org.hibernate</groupId>
                        <artifactId>hibernate-entitymanager</artifactId>
                        <version>3.6.8.Final</version><!--$NO-MVN-MAN-VER$-->
                    </dependency>
                </dependencies>
                <build>
                    <plugins>
                        <plugin>
                            <artifactId>maven-eclipse-plugin</artifactId>
                            <version>2.9</version>
                            <configuration>
                                <additionalProjectnatures>
                                    <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                                </additionalProjectnatures>
                                <additionalBuildcommands>
                                    <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                                </additionalBuildcommands>
                                <downloadSources>true</downloadSources>
                                <downloadJavadocs>true</downloadJavadocs>
                            </configuration>
                        </plugin>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-compiler-plugin</artifactId>
                            <version>2.3.2</version>
                            <configuration>
                                <source>1.6</source>
                                <target>1.6</target>
                                <compilerArgument>-Xlint:all</compilerArgument>
                                <showWarnings>true</showWarnings>
                                <showDeprecation>true</showDeprecation>
                            </configuration>
                        </plugin>
                        <plugin>
                            <groupId>org.codehaus.mojo</groupId>
                            <artifactId>exec-maven-plugin</artifactId>
                            <version>1.2.1</version>
                            <configuration>
                                <mainClass>org.test.int1.Main</mainClass>
                            </configuration>
                        </plugin>
                    </plugins>
                </build>

                <dependencyManagement>

                    <dependencies>
                        <dependency>
                            <groupId>javax.validation</groupId>
                            <artifactId>validation-api</artifactId>
                            <version>1.0.0.GA</version>
                        </dependency>
                        <dependency>
                            <groupId>org.hibernate</groupId>
                            <artifactId>hibernate-entitymanager</artifactId>
                            <version>3.6.8.Final</version>
                        </dependency>
                    </dependencies>
                </dependencyManagement>
            </project> 
```

出于某种原因 org.hibernate hibernate-entitymanager

找不到。我使用的 maven 设置是 springsource 工具套件附带的默认设置。我没有对他们给我的 maven 版本做任何修改。我正在尝试在安装了 jdk 7 的 64 位 Windows 机器上构建它。

我研究了其他解决方案，例如在您右键单击项目并转到 maven 时弹出的菜单中更新依赖项和配置。

有人说我需要启用依赖项，但右侧没有菜单可以这样做，我可以下载诸如休眠核心之类的东西并正确解决依赖项。只是对特定的依赖有问题。

我是否需要将存储库或任何类似性质的内容添加到 SpringSource Tool Suite 中安装 maven 时提供的原始 settings.xml 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:49:43.443

在您正在调查的默认存储库中似乎找不到此依赖项，它存在于[jboss 的 maven 存储库中](http://snapshots.jboss.org/maven2/)

因此，为了使 Maven 能够查找该存储库，也将以下内容添加到您的`pom.xml`

```
<project ...>
<repositories>
    <repository>
      <id>JBoss repository</id>
      <url>http://snapshots.jboss.org/maven2</url>
    </repository>
 </repositories>
</project> 
```

并尝试`mvn clean install`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:02:50.117

如果您从控制台运行 Maven，则需要在包含 pom.xml 文件的目录中执行此操作。

对于 Hibernate 的东西，您可能需要在 pom.xml（或 settings.xml）中声明以下内容：

```
 <repository>
        <id>repository.jboss.org</id>
        <name>JBoss Repository</name>
        <url>https://repository.jboss.org/nexus/content/repositories/releases/</url>
    </repository> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T12:30:46.670

用这个

中央 Maven 存储库交换机默认[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2) false com.springsource.repository.libraries.release SpringSource Enterprise Bundle Repository - SpringSource 库发布[http://repository.springsource.com/maven/libraries/release](http://repository.springsource.com/maven/libraries/release)

# c# - 在 ASP.NET 中检查单选按钮

> ID：11355976
> 
> 赞同：2
> 
> 时间：2012-07-06T04:44:18.657
> 
> 标签：c#, asp.net

可以检查是否选择了名为“foo”的单选按钮之一？例如：

```
<input type="radio" name="foo" id="baa"  value="..."   runat="server" />
<input type="radio" name="foo" id="baa1" value="....." runat="server" /> 
```

问题是：如果选中，是否有一些`<asp:..`可以测试上述复选框中的一个（不是两个，只能选择一个）？

我希望这很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:46:17.190

**编辑**

对于您的要求，最好 使用带有**RequiredFieldValidator的****RadioButtonList**。下面是例子

 **```
<asp:RadioButtonList 
    ID="RadioButtonList1"
    runat="server"
    RepeatColumns="3">
    <asp:ListItem>abcd</asp:ListItem>
    <asp:ListItem>xyz</asp:ListItem>
</asp:RadioButtonList>
<asp:RequiredFieldValidator 
    ID="ReqiredFieldValidator1"
    runat="server"
    ControlToValidate="RadioButtonList1"
    ErrorMessage="select atleast one radiobutton!">*
</asp:RequiredFieldValidator> 
```

* * *

您需要对单选按钮进行分组**GroupName="foo"**是其中两个单选按钮所在的组，因此一次只有一个被选中

```
<asp:panel runa="server" id="container">
    <asp:RadioButton id="Radio1" GroupName="foo"
                 Text="Beef" BackColor="Pink" runat="server"/>

            <br />
            <asp:RadioButton id="Radio2" GroupName="foo"
                 Text="Pork" BackColor="Pink" runat="server"/>
</asp:panel> 
```

请注意，即使在您的 html 中，您也需要为单选按钮指定组名以从单选按钮组中选择一个

要检查是否选择了比率按钮，只需使用此 linq 操作

```
bool isradchecked=container.Controls.OfType<RadioButton>)
                     .Any(r => r.Checked); 
```

这里单选按钮的容器是`Asp:Panel`.**

# forms - Symfony2：为每个选择添加类

> ID：11355977
> 
> 赞同：4
> 
> 时间：2012-07-06T04:44:19.860
> 
> 标签：forms, symfony

我正在尝试自定义 Symfony2 表单渲染以向生成的每个选择添加一个类。我认为有一个自定义 form_div_layout.html.twig ：

```
{% block choice_widget_collapsed %}
{% spaceless %}
    <select class='myclass' {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
    {% if empty_value is not none %}
        <option value="">{{ empty_value|trans({}, translation_domain) }}</option>
    {% endif %}
    {% if preferred_choices|length > 0 %}
        {% set options = preferred_choices %}
        {{ block('choice_widget_options') }}
        {% if choices|length > 0 and separator is not none %}
            <option disabled="disabled">{{ separator }}</option>
        {% endif %}
    {% endif %}
    {% set options = choices %}
    {{ block('choice_widget_options') }}
</select>
{% endspaceless %}
{% endblock choice_widget_collapsed %} 
```

并将其与

```
{% form_theme form 'YOPYourOwnPoetBundle:Form:form_div_layout.html.twig' %} 
```

会成功的。

但是，“myclass”类未添加到选择中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:39:03.610

您应该首先确保您尝试使用的主题文件与您在`form_theme`表达式中使用的名称具有相同的名称，并且该文件确实存在。如果这些不匹配，我不记得 Twig 是否抛出异常。

此外，您可能`class`在构建表单或呈现表单时不小心传递了一个属性。发生的情况是您的元素现在有两个`class`属性。

一种解决方法是将您的新类实际添加到现有类的集合中。

```
{% block choice_widget_collapsed %}
{% spaceless %}
{% set label_attr = label_attr|merge({class: label_attr.class|default('') ~ ' required'}) %}
    {% set attr = attr|merge({class: (attr.class|default('') ~ ' myclass')|trim}) %}
    <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
    {# ... #}
</select>
{% endspaceless %}
{% endblock choice_widget_collapsed %} 
```

这允许您添加以后可能需要的特定元素的任何可选类。

**编辑**

查看 Sf2 Github 存储库，似乎主题文件最近已更改。在 2.0.* 版本中，您应该覆盖[`choice_widget`](https://github.com/symfony/symfony/blob/v2.0.15/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig#L43)2.1.* 版本，正确的块是[`choice_widget_collapsed`](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig#L65).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:18:40.607

我想您应该将表单主题行更改为：

```
{% form_theme form 'YOPYourOwnPoetBundle:Form:form_div_layout.html.twig' %} 
```

或者您需要将 twig 文件的名称更改为 fields.html.twig

两者都必须匹配。

# c# - 在 C# 中使用接口实现多态性

> ID：11355981
> 
> 赞同：0
> 
> 时间：2012-07-06T04:44:57.767
> 
> 标签：c#, interface, polymorphism, stack-overflow, quadtree

作为介绍，我正在为个人学习目的创建一个基本的四叉树引擎。我希望这个引擎能够处理许多不同类型的形状（目前我正在使用圆形和正方形），它们都将在窗口中移动并在发生碰撞时执行某种动作。

在之前就泛型列表主题提出问题后，我决定使用多态接口。最好的接口将是一个接口`Vector2`，因为出现在我的四叉树中的每个对象都会有一个 x,y 位置并且`Vector2`很好地覆盖它。这是我目前的代码：

```
public interface ISpatialNode {
    Vector2 position { get; set; }
}

public class QShape {
    public string colour { get; set; }
}

public class QCircle : QShape, ISpatialNode {
    public int radius;
    public Vector2 position {
        get { return position; }
        set { position = value; }
    }
    public QCircle(int theRadius, float theX, float theY, string theColour) {
        this.radius = theRadius;
        this.position = new Vector2(theX, theY);
        this.colour = theColour;
    }
}

public class QSquare : QShape, ISpatialNode {
    public int sideLength;
    public Vector2 position {
        get { return position; }
        set { position = value; }
    }
    public QSquare(int theSideLength, float theX, float theY, string theColour) {
        this.sideLength = theSideLength;
        this.position = new Vector2(theX, theY);
        this.colour = theColour;
    }
} 
```

所以我最终会希望有一个界面可以使用通用列表，我可以使用代码或类似的东西`List<ISpatialNode> QObjectList = new List<ISpatialNode>();`向它添加形状（请记住，我会想要稍后沿线添加不同的形状）。`QObjectList.Add(new QCircle(50, 400, 300, "Red"));``QObjectList.Add(new QSquare(100, 400, 300, "Blue"));`

问题是，当我从这里调用它时，这段代码似乎不起作用（`Initialize()`是 XNA 方法）：

```
protected override void Initialize() {
    QObjectList.Add(new QCircle(5, 10, 10, "Red"));

    base.Initialize();
} 
```

所以我的问题有**两个部分**：

**1.**为什么这段代码在我的和类的`set { position = value; }`部分给我一个stackoverflow错误？`QCircle``QSquare`

**2.**这是否是一种利用接口进行多态性的有效/有效方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T04:48:42.420

问题出在您的财产中，它正在将自己设置为循环循环

```
public Vector2 position { get ; set ; } 
```

或者声明一个私有字段

```
private Vector2 _position;
public Vector2 position {
    get { return _position; }
    set { _position = value; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T04:48:55.177

堆栈溢出是因为：

```
public Vector2 position {
    get { return position; }
    set { position = value; }
} 
```

该集实际上再次设置相同。你可能想要这个：

```
private Vector2 _position;
public Vector2 position {
    get { return _position; }
    set { _position = value; }
} 
```

或其简短版本：

```
public Vector2 position { get; set; } //BTW, the c# standard is to use upper camel case property names 
```

关于多态性的使用，在这种情况下似乎是正确的。

# ios - 如何在文档目录中将 MPMediaPickerController 与本地文件一起使用？

> ID：11355985
> 
> 赞同：1
> 
> 时间：2012-07-06T04:45:31.827
> 
> 标签：ios, open-source, media-player

我希望能够在 Documents 目录中下载的本地文件上使用 MPMediaPickerController。但是，没有选项可以设置控制器查看的文件的来源，当然默认为 iPod 音乐库。

是否有任何方法可以加载本地文件，或者是否有任何替代库可用于提供媒体选择功能？还是我必须在这里重新发明轮子:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:48:48.517

您可能想看看[AVAudioPlayer](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)，因为 MPMediaPickerController 是一个旨在播放仅存储在 iTunes 媒体文件夹中的音乐的类。从 doc 目录播放媒体也很容易：

```
NSString *soundFilePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]stringByAppendingPathComponent:@"mySong.m4a"];
NSURL *fileURL = [NSURL URLWithString:soundFilePath];
NSError *error;
AVAudioPlayer* audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:&error];
if(!error){
    audioPlayer.delegate = self;
    [audioPlayer play];
}else{
    NSLog(@"Error loading clip: %@", [error localizedDescription]); 
} 
```

# python - 为 Blender 提供一个 XML 道路文件

> ID：11355988
> 
> 赞同：2
> 
> 时间：2012-07-06T04:45:48.347
> 
> 标签：python, xml, opengl, graphics, blender

我的目标是模拟特定城市的交通。我将使用 Blender 绘制汽车，并让它们在类似于曼哈顿配置的车道上移动。所有关于汽车在给定时刻的相对位置/方向和速度的信息都由 XML 文件确定。

如何在 Blender 中读取这个 XML 文件，以便汽车获得有关如何在路上行驶的有用信息？

编辑：Python 可能是一个不错的起点。但我真的必须解析字符串吗？还是与 Blender 有简单的 XML 兼容性？

我需要导入的 XML 基本上如下所示：

```
<sumo-netstate>
  <timestep time="0.00">
        <edge id="34403897">
            <lane id="34403897_0">
                <vehicle id="t0" pos="5.10" speed="0.00"/>
            </lane>
        </edge>
    </timestep>
    <timestep time="1.00">
        <edge id="-10745949#5">
            <lane id="-10745949#5_0">
                <vehicle id="t1" pos="5.10" speed="0.00"/>
            </lane>
        </edge>
        <edge id="34403897">
            <lane id="34403897_0">
                <vehicle id="t0" pos="6.54" speed="1.44"/>
            </lane>
        </edge>
    </timestep>
..
..
..
</sumo-netstate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:41:22.250

如果使用python的xml dom解析器应该不难。试试下面的代码，应该可以正常工作。我在我的电脑上测试了它。

```
from xml.dom.minidom import parse
from xml.dom.minidom import Node

domData = parse("XMLFile.xml")
lanes = domData.getElementsByTagName("lane")
for lane in lanes:
    #print lane id
    laneId = lane.getAttribute("id")
    print "LaneID: " + laneId

    #print vehicle id, position and speed
    vehicles = lane.getElementsByTagName("vehicle")
    for vehicle in vehicles:
        vehicleId = vehicle.getAttribute("id")
        vehiclePos = vehicle.getAttribute("pos")
        vehicleSpeed = vehicle.getAttribute("speed")
        print "\tVehicleID: " + vehicleId, "VehiclePos: " + vehiclePos, "VehicleSpeed: " + vehicleSpeed

domData.unlink() 
```

这使用 minidom 并解析 xml 文档的节点。您可以使用 getElemetsByTagName 获取节点或元素列表。代码没有空检查等，因此请确保添加它们。

快乐编码:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:40:41.190

Blender 与 Python-3 和 Python 标准库中的所有模块完全集成。其中包括几个 XML 处理器。

# java - 如何在 Mac OS X 10.7 Lion 上设置 java 开发环境，即 jdk 和 eclipse IDE？

> ID：11355989
> 
> 赞同：1
> 
> 时间：2012-07-06T04:45:51.077
> 
> 标签：java, eclipse, macos

我是 MAC 新手，需要与我在 Windows 7 上使用的开发环境相同的开发环境。在那里我使用的是 JDK 6 和 Eclipse。现在我想知道如何在这台 Mac 机器上设置相同的环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:51:11.133

Mac 已经安装了 JDK，所以你应该很好。对于 Eclipse，您只需要下载并安装它。与 Windows 相同。选择 64 位 Eclipse，你应该会很好。

[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

# opencv - 3D物体检测-Opencv

> ID：11355991
> 
> 赞同：13
> 
> 时间：2012-07-06T04:46:00.717
> 
> 标签：opencv, computer-vision, face-recognition

我已经尝试使用 OpenCV 使用他们 wiki 上提供的文档进行人脸识别。它工作正常，可以检测多个人脸。但是，该站点上没有提供有关 3D 对象检测或头部跟踪的数据。下面提供了代码和 wiki 的链接：

[人脸识别](http://opencv.willowgarage.com/wiki/FaceRecognition)

[级联分类器](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)

虽然 wiki 确实提供了有关人脸检测的足够信息，但您可能已经发现，但并未提供 3D 人脸识别方法。

我想了解与 3D 人脸识别和跟踪相关的项目，以便我可以查看源代码并尝试让项目做同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T19:37:04.200

这可能来晚了，但 Willow Garage 正在运行另一个名为点云库 (PCL) 的项目，该项目完全专注于 3D 数据处理任务。人脸识别是他们用来宣传该项目的用例之一。当然，这一切都是免费的……

[http://pointclouds.org](http://pointclouds.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T05:02:07.343

有很多方法。我只能为您指出正确的方向。人脸识别示例通常提供眼睛的子检测。所以实际上你知道面部和眼睛的位置。以类似或其他方式，您还可以检测嘴唇。现在，当您拥有至少三个对象点（这次是面向）时，您可以使用三角测量计算其在房间中的 3D 位置。这部分示例存在于作为 OpenCV 示例的 find_obj.cpp 中。仅此示例使用来自 SURF 的 x 点并根据此信息绘制矩形。还可以使用 CvFindHomography 查看其他任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:02:28.090

从OpenCV 2.4.2开始，出现了人脸检测**和**跟踪的头文件：opencv2/contrib/detection_based_tracker.hpp

头文件定义了一个名为 DetectionBasedTracker 的类。它定义的跟踪机制在后台使用 haar 级联来检测对象。跟踪比 OpenCV Haar 实现快得多（但是，有些人发现它不太准确）。我个人发现它在安卓设备上运行良好。在这里可以找到一些实现人脸检测和跟踪器的示例代码：http: [//bytesandlogics.wordpress.com/2012/08/23/detectionbasedtracker-opencv-implementation/](http://bytesandlogics.wordpress.com/2012/08/23/detectionbasedtracker-opencv-implementation/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T15:14:32.057

您应该查看适用于您所描述任务的[活动形状模型](http://en.wikipedia.org/wiki/Active_shape_model)和[活动外观模型。](http://en.wikipedia.org/wiki/Active_appearance_model)OpenCV 只为您提供 2D 检测方法，而参考方法（现在在该领域非常流行）**跟踪**分布在面部上的一组 3D 点以及描述其外观的纹理。

维基百科页面将为您提供一些上述方法的实现链接。

如果你想知道头部在世界坐标中的 3D 参数（例如用于凝视检测），那么你应该谷歌搜索关键词“3D 头部跟踪”和“头部姿势估计”。

# php - Silverstripe：将 where 子句添加到 ImageDataObjectManager

> ID：11355999
> 
> 赞同：0
> 
> 时间：2012-07-06T04:47:16.193
> 
> 标签：php, silverstripe

我需要在我的 DataObjectManager 中添加 where 子句。

我现有的代码如下所示：

```
$fields->addFieldToTab('Root.Backgrounds', new ImageDataObjectManager( 
         $this->owner, 
         'BackgroundImages', 
         'BackgroundImage', 
)); 
```

我试过像下面这样简单地添加它，但它没有应用过滤器，我总是最终返回所有 BackgroundImages，而不是那些具有所需 SubSiteID 的。

```
$fields->addFieldToTab('Root.Backgrounds', new ImageDataObjectManager( 
         $this->owner, 
         'BackgroundImages', 
         'BackgroundImage', 
         "'BackgroundImage.SiteConfigID' = '".$this->owner->SubsiteID."'" 
      )); 
```

我尝试在子句中输入一个无效的表名，看看是否可以让它出错，但它不会让我相信它被完全忽略了。

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:55:36.030

'filter' 是 FileDataObjectManager 构造函数的第 7 个参数，而不是第 4 个：（ImageDataObjectManager 采用相同的参数）

```
$manager = new FileDataObjectManager(
  $this, // Controller
  'Resources', // Source name
  'Resource', // Source class
  'Attachment', // File name on DataObject
  array(
    'Name' => 'Name', 
    'Description' => 'Description', 
    'Category' => 'Category'
  ), // Headings 
  'getCMSFields_forPopup' // Detail fields (function name or FieldSet object)
  // Filter clause <- **ADD YOUR FILTER HERE**
  // Sort clause
  // Join clause
); 
```

见[http://doc.silverstripe.org/old/modules:dataobjectmanager](http://doc.silverstripe.org/old/modules:dataobjectmanager)