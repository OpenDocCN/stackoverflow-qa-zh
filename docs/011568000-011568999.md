# StackOverflow 问答 11568000-11568999

# android - Phonegap：无法启动接收器 NullPointerException

> ID：11568007
> 
> 赞同：0
> 
> 时间：2012-07-19T19:34:29.910
> 
> 标签：android, cordova, android-intent, broadcastreceiver

我找到了一个安卓应用。你可以在这里看到它：[https ://github.com/ChrLipp/SmsReceiver-Phonegap](https://github.com/ChrLipp/SmsReceiver-Phonegap)

当我运行它时，它会收到一条短信并将其显示在屏幕上。但是，如果应用程序关闭并收到文本，手机会崩溃并返回上述错误（无法启动接收器）。但是，在日志中，该应用程序似乎仍然能够获取消息数据（这是我想要的），但随后崩溃。

有什么建议吗？

基本上我想要一个应用程序，当它关闭/运行到后台时，它仍然能够从文本中获取数据并对其进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:09:07.480

当您不启动应用程序时，不会在 onCreate() 中调用它：

```
super.loadUrl("file:///android_asset/www/index.html", 1); 
```

然后在接收器中，返回 null：

```
Object[] pdus = (Object[]) extras.get("pdus"); 
```

这会导致接收器崩溃，因此您无法启动接收器错误。

# python - Python 零大小数组到 ufunc.reduce 没有身份

> ID：11568008
> 
> 赞同：1
> 
> 时间：2012-07-19T19:34:32.100
> 
> 标签：python, numpy

我正在尝试制作存储在 ndarray 中的一些数据的直方图。直方图是一组分析的一部分，我在 python 程序中做了一个类。不工作的代码部分如下。

```
def histogram(self, iters):
    samples = T.MCMC(iters) #Returns an [iters,3,4] ndarray
    histAC = plt.figure(self.ip) #plt is matplotlib's pyplot
    self.ip+=1 #defined at the beginning of the class to start at 0
    for l in range(0,4):
        h = histAC.add_subplot(2,(iters+1)/2,l+1)
        for i in range(0,0.5*self.chan_num):
            intAvg = mean(samples[:,i,l])
            print intAvg
            for k in range(0,iters):
                samples[k,i,l]=samples[k,i,l]-intAvg
            print "Samples is ",samples
            h.hist(samples,bins=5000,range=[-6e-9,6e-9],histtype='step')     
            h.legend(loc='upper right')
            h.set_title("AC Pulse Integral Histograms: "+str(l))
    figname = 'ACHistograms.png'
    figpath = 'plot'+str(self.ip)
    print "Finished!"
    #plt.savefig(figpath + figname, format = 'png') 
```

这给了我以下错误消息：

```
File "johnmcmc.py", line 257, in histogram
  h.hist(samples,bins=5000,range=[-6e-9,6e-9],histtype='step') #removed label=apdlabel      
File "/x/tsfit/local/lib/python2.6/site-packages/matplotlib/axes.py", line 7238, in hist
  ymin = np.amin(m[m!=0]) # filter out the 0 height bins
File "/x/tsfit/local/lib/python2.6/site-packages/numpy/core/fromnumeric.py", line 1829, in amin
  return amin(axis, out)
ValueError: zero-size array to ufunc.reduce without identity 
```

我发现的唯一搜索结果是相同两个对话的多个副本，从中我学到的唯一一件事是 python 直方图不喜欢输入空数组，这就是我在该行上方添加 print 语句的原因这让我很难确保数组不为空。

以前有没有其他人遇到过这个错误？

# java - 如果对象 (x,y) 靠近其他对象 (x,y)

> ID：11568010
> 
> 赞同：0
> 
> 时间：2012-07-19T19:34:50.817
> 
> 标签：java, math, if-statement, coordinates

我在 Java 中有两个单独的对象，`Object1`并且`Object2`它们的大小和正方形都相同。对于每个对象，我可以获得*x*和*y*坐标。我需要做的是检查是否`Object1`在`Object2`. 该距离在*X*轴和*Y*轴上的 32 个点以内。

一旦满足条件，我就可以运行我的代码。例如

```
 if ( check condition ) {
    //my code here
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:37:37.940

尝试以下操作：

```
if(Math.abs(Object1.x - Object2.x) <= 32 && Math.abs(Object1.y - Object2.y) <= 32)
{
    // Do stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T19:49:59.560

如果这些是矩形而不是点，则需要补偿它们的宽度和高度。因为它们是正方形，如果你有它，就使用它们的宽度

```
if(Math.abs(Object1.X - Object2.X) <= 32 + Object1.Width && Math.abs(Object1.Y - Object2.Y) <= 32 + Object1.Width)
{
    // my code here
} 
```

# java - 有没有办法在一个哈希表变量中存储多种数据类型？

> ID：11568013
> 
> 赞同：8
> 
> 时间：2012-07-19T19:35:12.837
> 
> 标签：java

我有`Hashtable`一个 key of`String`和 value as `String`，但是我已经在我的项目中达到了一个点，我需要能够存储多种不同的数据类型。例如，我需要将`int`、`String`、`Date`等全部存储在一个 中`Hashtable`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T19:37:05.490

`HashTable`或者任何 Collection`Map`都可以处理这个，除了`int`和其他原始类型：你不能存储原始类型，只能存储`Object`引用。`int`将需要包装为一个`Integer`对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T19:45:54.607

```
Map<String, Object> map = new HashMap<String, Object>() 
```

这为您提供了一个包含 String 类型的键和 Object 类型的值的映射，这基本上意味着 Object 类型的任何后代（日期、整数、字符串等）。其他答案正确地指出了这样一个事实，即不需要使用诸如 int、boolean 之类的原语，而是需要使用它们的对应物 Integer、Boolean 等。

`get`这种地图上操作的返回类型是`Object`. 因此，正确处理类型信息是开发人员的责任。

[此处](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)提供了对 Hashtable 和 HashMap 之间有什么区别的问题的一个很好的答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T19:36:54.700

您可以让它存储通用数据类型`Object`，但不允许原始数据类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-19T19:50:27.580

虽然这是可能的，但这通常不是一个好主意。这通常会导致类型转换异常和问题。

HashTable 可以设置为存储通用对象而不是特定的类类型，但是检索它们时的类型转换不会自动发生。

为了从集合中取回对象，必须开发某种形式的类型检查例程。

您最好为要存储的每个类类型创建一个单独的集合。

PS：我还建议使用 HashMap 而不是 HashTable。HashTable 已被弃用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T19:40:30.863

将您的 HashTable 更改为`Hashtable<String, Object>`，当您想要存储时，`int`您需要先将它（或使用自动转换）转换为`Integer`. 从表中获取值后，您可以`if(value instanceof String)`根据任何类型确定您的类型，依此类推。

# ruby-on-rails - 呈现 simple_form 错误

> ID：11568015
> 
> 赞同：0
> 
> 时间：2012-07-19T19:35:21.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我有帖子列表（pages#home），点击我打开评论列表（posts#show），我声明变量@feed_items。在评论的最后，我有 simple_form 新评论（comments#create）。问题：如果提交按钮上发生错误，我需要呈现带有评论的现有列表和带有错误的表单。我正在尝试评论#create：

```
if @comment.save
  ...
else
  render 'posts/show'
end 
```

但在这种情况下，变量 @feed_items 没有被声明，因为方法 posts#show 没有被调用。当我尝试编写 redirect_to 时，我看到了带有评论但没有错误消息的列表。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:44:38.477

这是人们常犯的错误。该`render`方法只选择要显示的视图，该`redirect_to`方法再次执行重定向的动作。
当出现错误时，您调用该`render`方法来选择要显示的视图，并且您必须手动分配此视图需要解决的所有实例变量。从 Rails 指南
检查：http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)`Section 2.3.2`

在你的情况下，它会是这样的：

```
if @comment.save
  ...
else
  # Populate the @feed_items in here again
  render 'posts/show'
end 
```

# php - 如何从一个用户那里检索公共 Google 文档列表

> ID：11568016
> 
> 赞同：2
> 
> 时间：2012-07-19T19:35:37.907
> 
> 标签：php, xml, json, google-docs-api

有没有办法使用 HTTP GET 从 Google Docs 检索 JSON 或 XML 资源？我想在网页上列出属于我的公开文档，因此查看网页的用户不需要身份验证，甚至不需要拥有 Google 帐户。

我可以在 Blogger API 中轻松做到这一点。

[https://www.googleapis.com/blogger/v3/blogs/blogId/posts](https://www.googleapis.com/blogger/v3/blogs/blogId/posts)

并不真正关心检索数据的方法（用 PHP 编写），但我希望它发生在服务器端，它不应该要求用户进行身份验证。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:50:14.040

您可以使用[Google 文档列表 API](https://developers.google.com/google-apps/documents-list/)。我相信它只需要对非公开数据检索进行身份验证。

# android - 如何使两个片段并排显示在 ViewPager 中？

> ID：11568019
> 
> 赞同：1
> 
> 时间：2012-07-19T19:35:48.913
> 
> 标签：android, android-fragments, android-viewpager

在平板电脑上的 Google Play 中，单击应用程序，您将看到一个 ViewPager，其中包含 CATEGORIES、FEATURED、TOP PAID 等。当您将手指从 TOP PAID 滑动到 FEATURED 时，TOP PAID 的 Fragment 会完全离开，同时会带入 FEATURED Fragment。

但是，当您滚动到 CATEGORIES 时，您会看到 FEATURED Fragment 的左半部分与 CATEGORIES 一起保留在屏幕上，而不是完成离开屏幕。FEATURED 的左半部分仍然是可滚动的，并且它的子视图仍然可以点击......等等。这是怎么做到的？我注意到在手机上的 Google Play 中看不到这种行为。

# objective-c - 从 UISplitViewController 呈现的 modalViewController 出现方向错误

> ID：11568023
> 
> 赞同：2
> 
> 时间：2012-07-19T19:35:51.383
> 
> 标签：objective-c, ios, cocoa-touch, uisplitviewcontroller, modalviewcontroller

我`UISplitViewController`在我的应用程序的 rootView 中设置了一个。当`viewDidLoad`在我的左视图控制器中被调用时，我会进行检查，然后使用以下内容呈现模态视图控制器：

```
SiteConfiguration *config = [[SiteConfiguration alloc] initWithStyle:UITableViewStyleGrouped];
config.firstLoad = YES;
UINavigationController *configNav = [[UINavigationController alloc] initWithRootViewController:config];
if ([Utility isIpad]) {
    configNav.modalPresentationStyle = UIModalPresentationFormSheet;
    configNav.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [[AppDelegate instance].splitViewController presentModalViewController:configNav animated:YES];
} else {
    [self presentModalViewController:configNav animated:YES];
} 
```

如果 iPad 在应用加载时处于横向模式，则 modalView 显示的方向不正确：

![在此处输入图像描述](../Images/90678e45d82e8906540252456ef1f460.png)

我可以旋转 iPad 来解决这个问题，但为什么它加载错误？我在我的viewController中`shouldAutorotateToInterfaceOrientation:`返回了 YES 。`SiteConfiguration`这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:55:47.990

注意你选择在哪里展示你的模态控制器。我有一些自定义模态控制器的经验，并设置模态控制器的方向（及其阴影！）

```
 - (void)viewDidLoad:(BOOL)animated 
```

并不总是表现得像预期的那样。

将您的代码 ( `presentModalViewController:configNav animated:YES`) 放入

```
 - (void)viewDidAppear:(BOOL)animated 
```

反而。（对于设置子视图框架或对图层进行任何操作的任何代码，例如阴影层和阴影属性，也可以这样做）。

据我所知，旋转视图的子视图可能不明显，直到之后

```
 - (void)viewDidLoad:(BOOL)animated 
```

由于线程问题（一个线程可能会在主线程将旋转传递给子视图（和模态控制器）之前开始绘制您的子视图或模态控制器的视图）。比我有更多线程经验的人可能会对此有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:44:22.180

`shouldAutorotateToInterfaceOrientation:`实际上并没有旋转界面，应用程序在收到`UIDeviceOrientationDidChangeNotification`通知时会这样做。

尝试在方法中添加对设备方向的检查`-(void) viewDidAppear:(BOOL)animated`。

要强制界面旋转，请使用以下代码。

```
UIDeviceOrientation toInterfaceOrientation = [[UIDevice currentDevice] orientation];
[UIApplication sharedApplication].statusBarOrientation = toInterfaceOrientation; 
```

# silverlight - 如何在 silverlight/wp7 中编写举行事件

> ID：11568025
> 
> 赞同：2
> 
> 时间：2012-07-19T19:35:57.650
> 
> 标签：silverlight, windows-phone-7

我对按钮事件有一点问题。我将一个按钮编程为将特定值减少 1（单击），并且我想在按住按钮的同时随着时间的推移减少它。我使用的是 Silverlight，而不是 XNA。

```
myTimer.Change(0, 100);
private void OnMyTimerDone(object state)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                if (rightButton.IsPressed)
                {
                    rightButton_Click(null, null);
                }
            });
    } 
```

这段代码一开始就可以正常工作，但是我无法单击，因为它总是调用保持事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:50:46.057

两个建议，第一个是在 isPressed 为 false 时停止计时器（使用 DispatcherTimer）

```
void Button_MouseLeftButtonDown(object sender, EventArgs e)
{
    myTimer.Start();
}

void OnTimerTick(object s, EventArgs args)
{
    if(rightButton.IsPressed == false)
    {
        myTimer.Stop();
    }
    else
    {
        // decrease value
    }
} 
```

第二个是在 MouseLeftButtonUp 事件上停止计时器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:20:45.583

尝试使用**RepeatButton** silverlight 控件而不是使用普通**Button**

这是如何使用它的示例：

**XAML 代码：**

```
<RepeatButton x:Name="rbtnDecrease" Content="Decrease" Delay="200" Interval="100" Click="rbtnDecrease_Click" /> 
```

> **延迟：**在开始重复之前，RepeatButton 在按下时等待的时间量（以毫秒为单位）。
> 
> **间隔：**重复开始后重复之间的时间量（以毫秒为单位）。

**C#代码：**

```
private int tempCount = 100; // A temp Variable used as an Example

private void rbtnDecrease_Click(object sender, RoutedEventArgs e){

    // Add your Button Click/Repeat Code Here...

    // Example of Decreasing the value of a Variable
    tempCount--;
} 
```

# javascript - 在进行计算时显示消息 javascript

> ID：11568028
> 
> 赞同：0
> 
> 时间：2012-07-19T19:36:08.543
> 
> 标签：javascript, jquery, mobile, dialog

我一直在环顾四周，我似乎无法弄清楚如何做到这一点，尽管它看起来很简单。（移动开发）

我想做的是在进行计算时显示一条消息（有点像警报，但不是警报，更像是一个对话框）。就像加载中一样，请稍候。我希望消息在计算完成时出现并留在那里，然后被删除。我似乎无法找到正确的方法来做到这一点。

按下提交按钮并首先检查以确保所有表格都已填写，然后它应该显示消息，它进行计算，然后隐藏消息。

这是计算功能。

```
 function scpdResults(form) {
        //call all of the "choice" functions here
        //otherwise, when the page is refreshed, the pulldown might not match the variable
        //this shouldn't be a problem, but this is the defensive way to code it
        choiceVoltage(form);
        choiceMotorRatingVal(form);
        getMotorRatingType();
        getProduct();
        getConnection();
        getDisconnect();
        getDisclaimer();
        getMotorType();

        //restore these fields to their default values every time submit is clicked
        //this puts the results table into a known state
        //it is also used in error checking in the populateResults function
        document.getElementById('results').innerHTML = "Results:";
        document.getElementById('fuse_cb_sel').innerHTML = "Fuse/CB 1:";
        document.getElementById('fuse_cb_sel_2').innerHTML = "Fuse/CB 2:";
        document.getElementById('fuse_cb_result').innerHTML = "(result1)";
        document.getElementById('fuse_cb_res_2').innerHTML = "(result2)";
        document.getElementById('sccr_2').innerHTML = "<b>Fault Rating:</b>";
        document.getElementById('sccr_result').innerHTML = "(result)";
        document.getElementById('sccr_result_2').innerHTML = "(result)";
        document.getElementById('contactor_result').innerHTML = "(result)";
        document.getElementById('controller_result').innerHTML = "(result)";

        //Make sure something has been selected for each variable
        if (product === "Choose an Option." || product === "") {
            alert("You must select a value for every field.  Select a Value for Product");
        **************BLAH************
        } else {

            //valid entries, so jump to results table
            document.location.href = '#results_a';

    ******This is where the message should start being displayed***********

            document.getElementById('motor_result').innerHTML = motorRatingVal + " " + motorRatingType;
            document.getElementById('voltage_res_2').innerHTML = voltage + " V";
            document.getElementById('product_res_2').innerHTML = product;
            document.getElementById('connection_res_2').innerHTML = connection;
            document.getElementById('disconnect_res_2').innerHTML = disconnect;

            if (BLAH) {

            }
            else {

            }

            populateResults();
            document.getElementById('CalculatedResults').style.display = "block";

        } //end massive else statement that ensures all fields have values

*****Close out of the Loading message********
    } //scpd results 
```

谢谢大家的时间，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:43:56.870

将显示代码与计算代码分开是个好主意。它应该大致看起来像这样

```
displayDialog();
makeCalculation();
closeDialog(); 
```

如果您在执行任何这些步骤时遇到问题，请将其添加到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:55:15.377

您已经在使用一个部分来弹出一个“结果”页面——为什么不弹出一个“计算”页面呢？

确实，有 4,000,000 种不同的方法可以解决这个问题，但是如果您不想在这么简单的事情上完全面向对象，为什么不尝试编写一个“displayCalculatingMessage”函数和一个“removeCalculatingMessage”函数呢？

```
function displayCalculatingMessage () {
    var submit_button = getSubmitButton();
    submit_button.disabled = true;

    // optionally get all inputs and disable those, as well

    // now, you can either do something like pop up another hidden div,
    // that has the loading message in it...
    // or you could do something like:
    var loading_span = document.createElement("span");
    loading_span.id = "loading-message";
    loading_span.innerText = "working...";

    submit_button.parentElement.replaceChild(loading_span, submit_button);
}

function removeCalculatingMessage () {
    var submit_button = getSubmitButton(),
        loading_span = document.getElementById("loading-message");

    submit_button.disabled = false;
    loading_span.parentElement.replaceChild(submit_button, loading_span);

    // and then reenable any other disabled elements, et cetera.
    // then bring up your results div...
    // ...or bring up your results div and do this after
} 
```

有十亿种方法可以做到这一点，这一切都取决于你希望它如何呈现给用户——你想要发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:47:28.023

在开始计算之前，您需要让 UI 主线程有机会呈现您的消息。

这通常是这样完成的：

```
showMessage();
setTimeout(function() {
    doCalculation();
    cleanUp()
}, 0); 
```

使用计时器允许代码进入事件循环，更新 UI，*然后*开始计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T19:48:08.547

电脑速度很快。真的很快。大多数现代计算机每秒可以执行数十亿条指令。因此，我相当确定您可以依靠 aa`setTimeout`函数在 1000 毫秒左右触发，足以显示加载消息。

```
if (product === "Choose an Option." || product === "") {
  /* ... */
} else {
  /* ... */
  var loader = document.getElementById('loader');
  loader.style.display = 'block';
  window.setTimeout(function() {
    loader.style.display = 'none';
    document.getElementById('CalculatedResults').style.display = "block";
  }, 1000);
}

<div id="loader" style="display: none;">Please wait while we calculate.</div> 
```

# android - 水平菜单滑出 ScrollTo 未被调用

> ID：11568029
> 
> 赞同：0
> 
> 时间：2012-07-19T19:36:09.097
> 
> 标签：android, android-actionbar, android-scrollview, android-sliding

因此，我正在尝试破解臭名昭著的滑出式菜单，例如在 G+ 和 Youtube 中。由于这个原因，我设置了一个 ActionBar UP 按钮，我想用它来打开侧边菜单。我几乎把所有东西都布置好了，但是当我问的时候我的 Horizo​​ntalScrollView 没有滑动。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include
        android:layout_width="wrap_content"
        layout="@layout/side_menu" />

    <HorizontalScrollView
        android:id="@+id/menu_scroll_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        android:scrollbars="horizontal" >

    <include
        layout="@layout/main_content" />

    </HorizontalScrollView>
</FrameLayout>

private void toggleSideMenu() {
    mMenuScrollView.postDelayed(new Runnable() {

        @Override
        public void run() {
            int menuWidth = mSideMenu.getMeasuredWidth();
            if (!mIsMenuVisible) {
                // Scroll to 0 to reveal menu
                int left = 0;
                mScrollView.smoothScrollTo(left, 0);
            } else {
                // Scroll to menuWidth so menu isn't on screen.
                int left = menuWidth;
                mScrollView.smoothScrollTo(left, 0);
            }
            mIsMenuVisible = !mIsMenuVisible;

        }
    }, 50);

} 
```

我对 smoothScroll 的调用似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:40:57.090

我对示例进行了一些调整，并最终使其正常工作。比我在那里看到的其他例子要简单得多。这可以正常工作，但是我没有 MenuSliding 的平滑动画。而且我不需要Horizo​​ntalScrollView。作为副作用，用户将不得不点击按钮来弹出菜单。这将没有幻灯片功能。

然而，这是一个让事情滚动起来的 BARE BONES 例子。享受！

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!-- Base layout has id/side_menu -->
    <include layout="@layout/side_menu" />

    <!-- Base layout has id/content -->
    <include layout="@layout/content" />

</FrameLayout> 
```

这是我的活动

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    mContentView = findViewById(R.id.content);
    mSideMenu = findViewById(R.id.side_menu);
    mIsMenuVisible = false;
}

private void toggleSideMenu() {
    if (mIsMenuVisible) {
        mSideMenu.setVisibility(View.INVISIBLE);
        mContent.scrollTo(0, 0);
    } else {
        int menuWidth = mSideMenu.getMeasuredWidth() * -1;
        mSideMenu.setVisibility(View.VISIBLE);
        mContentView.scrollTo(menuWidth, 0);
    }
    mIsMenuVisible = !mIsMenuVisible;
} 
```

# clojure - Clojure 循环数据结构必须涉及像 ref 这样的构造吗？

> ID：11568036
> 
> 赞同：5
> 
> 时间：2012-07-19T19:36:47.363
> 
> 标签：clojure, circular-buffer

今天我看到了一些关于打结和循环数据结构的参考资料。我一直在阅读一些答案，解决方案似乎涉及使用 ref 指向列表的头部。一个特定的[SO 问题](https://stackoverflow.com/questions/11567625/tying-the-knot-in-clojure-can-mutation-of-delay-be-avoided-in-my-code)显示了一个 Haskell 示例，但我不太了解 Haskell，无法知道该示例是否使用了 Haskell 等效的 ref。

有没有办法在不使用 ref 或类似构造的情况下使 Clojure 数据结构循环？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T21:06:57.750

我直接将 Haskell 示例翻译成 Clojure：

```
user> (def alternates
          (letfn [(x [] (lazy-seq (cons 0 (y))))
                  (y [] (lazy-seq (cons 1 (x))))]
            (x)))
#'user/alternates
user> (take 7 alternates)
(0 1 0 1 0 1 0) 
```

它按预期工作。但是，我更喜欢使用该`cycle`函数而不是相互递归函数`letfn`：

```
user> (take 7 (cycle [0 1]))
(0 1 0 1 0 1 0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T04:12:24.280

使用标准 Clojure 不可变数据结构和标准 Clojure 函数创建循环引用是不可能的。这是因为第二个创建的对象永远不能添加到第一个创建的（不可变的）对象中。

但是，如果您愿意使用一些技巧，可以通过多种方式创建循环数据结构：

*   参考，原子等。
*   可变的定义类型
*   Java 对象
*   反射诡计
*   惰性序列

然而，一般来说，在 Clojure 中最好避免使用循环数据结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T20:05:58.647

我以前用过这个：

```
;; circular list operations
(defn rotate
   ([cl] (conj (into [](rest cl)) (first cl)))
   ([cl n] (nth (iterate rotate cl) (mod n (count cl))))) 
```

输出是一个向量，但输入可以是任何序列。

# c - 当我尝试在 C 中将一些 unicode 字符打印为十六进制时，由于某种原因它们都具有相同的值

> ID：11568041
> 
> 赞同：1
> 
> 时间：2012-07-19T19:36:58.110
> 
> 标签：c, printing, printf

因此，由于某种原因，当我在 C 中将所有这些 UNICODE 字符打印出来时，它们似乎都具有相同的值。有人知道为什么吗？

```
char input[8] = {'⺖', '⺓', '⺄', '⺑', '⻣', '⺽', '⻻', '⺽'};
for( i = 0; i < 9; i++)
{
    printf("Input number equivelents in hex %x, in int %i\nj", input[i], (int)input[i]);
} 
```

这就是 UNICODE 在 C# 中对应的内容。在 C 中，它们打印为 0x3f。

```
C＃
        [0x00000000] 0x2e96 '⺖' 字符
        [0x00000001] 0x2e93 '⺓' 字符
        [0x00000002] 0x2e84 '⺄' 字符
        [0x00000003] 0x2e91 '⺑' 字符
        [0x00000004] 0x2ee3 '⻣' 字符
        [0x00000005] 0x2ebd '⺽' 字符
        [0x00000006] 0x2efb '⻻' 字符
        [0x00000007] 0x2ebd '⺽' 字符

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:22:03.330

您还需要在每个常量前面加上`L`：

```
wchar_t input[8] = {L'⺖', L'⺓', L'⺄', L'⺑', L'⻣', L'⺽', L'⻻', L'⺽'};
for( i = 0; i < 9; i++)
{
    printf("Hex: %x, Int: %i\n", input[i], (int)input[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T19:43:23.367

您需要另一个数据结构来保存这些字符，因为一个字符（传统上是 8 位，或 0x00 - 0xFF）不能包含它们。

因此，使用类似`int`or的数据结构`short`来保存它们，并`L`在文字前使用说明符：

```
int input[8] = { L'⺖', L'⺓', L'⺄', L'⺑', L'⻣', L'⺽', L'⻻', L'⺽' }; 
```

您的代码将正常工作。

# iphone - iOS 自定义启动画面

> ID：11568048
> 
> 赞同：-2
> 
> 时间：2012-07-19T19:37:11.103
> 
> 标签：iphone, ios, cocoa-touch, splash-screen

我需要在我的应用程序开始时加载一堆东西，所以我想实现一个启动画面。我知道 Default.png 屏幕，但我认为这不起作用。

iOS是否为此内置了一些东西？如果不是，那么最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:39:50.607

在应用程序中加载确实有一个初始屏幕视图控制器显示，直到您的应用程序完全加载然后关闭控制器。内置的初始屏幕功能是 Default.png，以及应用程序的快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:42:07.783

您的应用加载时间是否过长，并且您想手动制作自己的启动画面以避免在启动时被操作系统退出？

一旦您的应用程序获得控制权，您就可以在屏幕上显示您想要的任何内容。如果第一件事恰好是显示启动画面的全屏图像视图，同时加载了很多内容，那么如果您愿意，您可以将其称为启动画面。

加载完成后，隐藏或销毁该图像视图，您就可以开始了。

我不会提供具体的代码，因为坦率地说，如果你不知道如何全屏显示图像视图，你`UIKit`首先要做一些功课。

# database - 在 sas 中解析文本文件

> ID：11568051
> 
> 赞同：0
> 
> 时间：2012-07-19T19:37:28.507
> 
> 标签：database, sas

所以我有一个相当混乱的文本文件，我正试图将其转换为 sas 数据集。它看起来像这样（虽然更大）：

```
0305679  SMITH, JOHN  ARCH05  001  2
ARCH05  005  3
ARCH05  001  7 
```

我正在尝试设置 5 个单独的变量（ID、姓名、工作、时间、小时数），但显然只有 3 个变量出现在第一行之后。我试过这个：

```
infile "C:\Users\Desktop\jobs.txt" dlm = '  ' dsd missover;
input ID $ name $ job $ time hours; 
```

并没有得到正确的输出，然后我尝试解析它

> infile "C:\Users\Desktop\jobs.txt" dlm = ' ' dsd missover; 输入所有数据$；id = substr(allData, find(allData,"305")-2, 7);

但我仍然没有得到正确的输出。有任何想法吗？

编辑：我现在正在尝试使用 .scan() 和 .substr() 来分离更大的数据集，如何从数据中子集单行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T23:26:40.187

您的数据可能不会那么混乱；它可能只是分层格式，其中第一行包含所有五个变量，后续行包含变量 3-5 的值。换句话说，在您阅读文件时，应该保留 ID 和 NAME。

如果这是正确的（这是一个分层布局），这是一个可能的解决方案：

```
data have;
   retain ID NAME;
   informat ID 7\. JOB $6\. TIME 3\. HOURS 1.;
   input @1 test_string $7\. @;
   if notdigit(test_string) = 0
      then input @1 ID NAME $12\. JOB time hours;
      else input @1 JOB time hours;
   drop test_string;
   datalines;
0305679  SMITH, JOHN  ARCH05  001  2 
ARCH05  005  3 
ARCH05  001  7 
0305680  JONES, MARY  ARCH06  002  4 
ARCH06  005  3 
ARCH07  001  7 
run; 
```

关键是要真正了解原始文件的组织方式。一旦你知道了规则，使用 SAS 来阅读它是一件轻而易举的事！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:55:29.323

```
 A list input solution could be the following:

data have;
array all(6) $20\. ID LNAME FNAME JOB TIME HOURS;
 retain Id Lname Fname;
 drop i;
 input @; 
  nitems = countw(_infile_,', ');  
    if notdigit(scan(_infile_,1)) = 0 then 
     do i = 1 to nitems;
       all(i) = Scan(_infile_,i);
     end;
    else 
     do i = 1 to 3;
    all(i+3) = Scan(_infile_,i);
      if i = 6 then all(i) = all(i)*1;
  end;
datalines;
0305679  SMITH, JOHN  ARCH05  001  2 
ARCH05  005  3 
ARCH05  001  7 
0305680  JONES, MARY  ARCH06  002  4 
ARCH06  005  3 
ARCH07  001  7 
run;

proc print; run; 
```

# ipad - 使用 ViewController 包含时，如何使 UIViewController 从另一个 VC 下方“滑出”？

> ID：11568052
> 
> 赞同：1
> 
> 时间：2012-07-19T19:37:27.783
> 
> 标签：ipad, ios5, animation, uiviewcontroller

我正在使用 ViewController 容器，我的目标是 iOS5 及更高版本。我有一个包含侧边栏 (B) 和内容区域 (C) 的容器 viewController (A)。我想要它，所以当用户点击侧边栏 (B) 上的按钮时，tableViewController (D) 将从侧边栏 (B) 下方和内容区域 (C) 上方“滑出”。

解决这个问题的最佳方法是什么？

我刚刚开始围绕基本的 viewController 包含（包含两个 viewController 的父级），但是从子 viewController 下方滑出一个额外的 viewController 已经难倒了。

![](../Images/264768513495d46163acdcc5cf57a597.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:13:00.927

您需要采用两种方法之一。

1.  在 iPad 上使用 UIPopOverViewController。对于许多 iPad 应用程序来说，这是非常标准的行为，Wanderlich 在[这里](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)有一个很棒的教程，我在第一个应用程序中使用了它。

2.  您还可以采取以下步骤：

    *   分配、初始化和设置表格视图的样式。
    *   将其添加为其父视图控制器的子视图。确保它的框架在视图控制器 B 的下方。
    *   使用[viewcontrollerA带来SubviewToFront：viewcontrollerB]；
    *   最后，使用 [UIView animateSubviews] 将视图控制器 D 滑动到应有的位置。

关闭 VCD 时，以与动画相同的方式对其进行动画处理。

希望有帮助！

# ios - CALayer 的问题

> ID：11568053
> 
> 赞同：0
> 
> 时间：2012-07-19T19:37:30.113
> 
> 标签：ios, xcode, calayer

我有这段代码，XCode Analyze 没有发出任何警告，但是每次我在控制台中收到一条消息：

2012-07-19 23:15:35.122 AttachIt [5725:907] 收到内存警告。

我的错在哪里，请指出。

```
for(int j=0;j<images;j++){
    @autoreleasepool {
        NSInteger currentRow = 0;

        for(int k = 0; k<i;k++)
            currentRow = currentRow + [[assetGroups objectAtIndex:k] numberOfAssets];

        asset = [assets objectAtIndex:j+currentRow];
        float size = [self getRandomNumberBetweenMin:60.0 andMax:65.0];
        CGRect rect;
        if(iPad)
            rect = CGRectMake(10+j*35.5, 75-size, size, size);
        else
            rect = CGRectMake(10+j*26, 75-size, size, size);
        UIImageView *temp = [[UIImageView alloc] initWithImage:[UIImage imageWithCGImage:[asset thumbnail]]];
        temp.frame = rect;
        temp.layer.backgroundColor = [UIColor blueColor].CGColor;
        temp.layer.shadowOffset = CGSizeMake(0, 3);
        temp.layer.shadowRadius = 5.0;
        temp.layer.shadowColor = [UIColor blackColor].CGColor;
        temp.layer.shadowOpacity = 0.8;
        temp.layer.masksToBounds = NO;
        temp.layer.borderColor = [[UIColor whiteColor] CGColor];
        temp.layer.borderWidth = 2;
        [temp setTransform:CGAffineTransformMakeRotation(degreesToRadians([self getRandomNumberBetweenMin:-5 andMax:5]))];
        temp.layer.shouldRasterize = TRUE;
        [albumRow addSubview:temp];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:53:21.377

内存警告不是错误的结果；它们是在 iOS 上运行的正常部分。你正在分配一堆东西，所以收到内存警告并不奇怪。

如果您的应用程序由于内存使用过多而被系统杀死，您可能会考虑随着时间的推移而不是循环填充这些图像。您可以通过 NSOperationQueue 或类似机制一次加载一个图像来完成此操作。

在任何情况下，您都可以使用“分配”或“活动监视器”工具来查看您的内存使用量是否正在增长以及增长了多少。

# ruby-on-rails - 使用 Capybara 和 RSpec 选择下拉菜单的无效选项

> ID：11568054
> 
> 赞同：0
> 
> 时间：2012-07-19T19:37:33.600
> 
> 标签：ruby-on-rails, capybara

我正在尝试编写一个测试来检查是否返回了错误，如果与 Capybara 一起发送的值无效。问题是，我的表单字段之一是`<select>`字段，我想确保无效输入会导致表单错误。

问题是，我只能选择选择框中存在的字段，根据我的模型验证，所有这些字段都是“有效的”。我想选择一个无效字段或以某种方式输入一些无效数据，以便我可以测试错误消息。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:58:54.007

评论中提到的解决方案 - 测试模型而不是在集成测试中进行。感谢 MrDanA 和 apneadiving！

# google-apps-script - 如何从电子表格发送电子邮件

> ID：11568061
> 
> 赞同：0
> 
> 时间：2012-07-19T19:37:56.057
> 
> 标签：google-apps-script

我在 Google Docs 上有一个电子表格，其中包含我们正在从事的工作的任务。我想要它做的是将整行发送给预期的收件人，但我只能让它从电子邮件地址之后的第一列发送信息。一切都有一个截止日期，我想让它在接近那个日期时发送提醒，但我不知道该怎么做。

任何帮助将不胜感激。这是我现在拥有的代码：

```
function sendEmails() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 3;  // First row of data to process
  var numRows = 2;   // Number of rows to process
  // Fetch the range of cells A2:B3
  var dataRange = sheet.getRange(startRow, 1, numRows, 2)
  // Fetch values for each row in the Range.
  var data = dataRange.getValues();
  for (i in data) {
    var row = data[i];
    var emailAddress = row[0];  // First column
    var message = row[1];       // Column B, Column C, Column D, Column E, Column F, Column G
    var subject = "Email Test Spreadsheet";
    MailApp.sendEmail(emailAddress, subject, message);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:57:23.133

当您定义这样的数据范围时

```
var dataRange = sheet.getRange(startRow, 1, numRows, 2); 
```

您正在从`A3:C5`

你也可以参考[文档](https://developers.google.com/apps-script/class_sheet#getRange)

如果您可以根据问题的描述发布示例电子表格，那么其他人可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:49:14.700

这一块：`var message = row[1];`只会得到数组中的第二个元素（索引1）。您需要遍历该行以获取所有数组元素。

```
var message = row[1];
message.concat(row[2]);
message.concat(row[3]); 
```

等等。或者你可以建立一个循环。

[http://www.w3schools.com/jsref/jsref_concat_string.asp](http://www.w3schools.com/jsref/jsref_concat_string.asp)

为了获得范围，为什么要这样做呢？`sheet.getRange("A2:B3");` 这就是您说您试图在该行上方的评论中获得的范围，尽管它只有 4 个单元格。`sheet.getRange("A2:G3")`将在 G 列中取出两行。当然，如果您在工作表中添加行，则每次都必须修改代码。

相反，试试这个。

```
var bottomRow = sheet.getLastRow();
var rangeInA1 = "A2:G"+bottomRow;
var dataRange = sheet.getRange(rangeInA1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:49:34.603

当你像这样定义你的 dataRange 时：

```
var dataRange = sheet.getRange(startRow, 1, numRows, 2) 
```

您从 startRow**第 1 列**中读取**numRows**的数据，但只有**2 列**（最后一个值是“宽度”），因此您可以轻松修改脚本以仅通过更改最后一个值来获取所需的所有列。然后使用 row[i].toString()，您将获得逗号分隔的字段。

然后，您可能希望使用 HTML 格式获得更好的演示文稿，例如在表格中显示数据，但这超出了您的问题范围；-)

# python - 林间空地 3 中的自定义 python 小部件

> ID：11568062
> 
> 赞同：4
> 
> 时间：2012-07-19T19:38:09.433
> 
> 标签：python, glade, pygobject

我想继承一个现有的 Gtk 小部件并让它与 Glade3 一起工作。代码都是python，我用的是PyGObject。

我想要做的是扩展 Gtk.TextView 并能够将它添加到我的 glade UI 中，就好像它是一个原生小部件一样。

我读到 Glade 2 是可能的，但我不确定如何用 Glade 3 做到这一点，而且我似乎找不到任何示例或文档。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T03:11:09.007

终于知道怎么做了。首先，你必须声明你的 glade 文件依赖于一个**catalog**。

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <!-- interface-requires the_catalog_name 1.0 -->
  ...Rest of the glade file... 
```

接下来，创建一个 catalog.xml 文件。要扩展树视图，它应该如下所示：

```
<glade-catalog name="the_catalog_name" domain="glade-3" 
               depends="gtk+" version="1.0">
  <glade-widget-classes>
    <glade-widget-class title="My Custom Text View" name="CustomTextView" 
                        generic-name="CustomTextView" parent="GtkTextView"
                        icon-name="widget-gtk-textview"/>
  </glade-widget-classes>
</glade-catalog> 
```

就是这样。显然目前还没有编写 Python 代码，但这不会阻止 Glade 显示您的自定义小部件。它只会将其视为普通的 TextView、Label 或您想要扩展的任何其他内容。

哦，不幸的是，我在 Glade 本身中找不到创建 CustomTextView 的方法。但是你可以做的是在 glade 中添加一个常规的 TextView，保存 glade 文件并在文本编辑器中打开它。只需查找您创建的树视图并进行如下更改：

```
-              <object class="TreeView" id="treeview1">
+              <object class="CustomTreeView" id="treeview1"> 
```

在空地里打开它，它就会出现。然后只需在 python 中定义一个 CustomTreeView 类并根据需要进行扩展。

# php - Src链接和等号消失

> ID：11568064
> 
> 赞同：1
> 
> 时间：2012-07-19T19:38:18.453
> 
> 标签：php, html, image, equals, src

我正在从数据库中动态获取图像链接并将它们插入图像标签中。此 php 代码检查是否有链接。如果有链接，则将该链接插入到 img 代码中。如果没有链接，则使用通用的“即将推出的图片”图片来代替它。

```
echo '<tr>
                <td width="80" height="46">
                <a href="displayitem.php?item_id='.$top_product_id.'">';
                if (!is_null($top_link) || $top_link == "")
                {
                    echo'<img src = "'.$top_link.'" alt="" width="64" height="63" />';
                    //echo $top_link;
                }
                else
                {
                    echo'<img src = "imagen/imagecomingsoon.png" alt="" width="30%" height="40%" />';}
                echo'</td><td width="108"><a href="displayitem.php?item_id='.$top_product_id.'">'.$final_name.'</a>';
                echo'</td>
                </tr>'; 
```

我有一个奇怪的错误，如果没有要链接的图像，而不是使用通用图像，我会得到一个空白。当我检查空白框时，我发现 img 标签没有正确生成。src 指定后没有引号，甚至没有等号。它看起来像这样。

```
<img src alt="" width="64" height="63"> 
```

如果我想使用通用图像，整个等号会与引号和链接一起消失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:45:41.730

您应该替换`!is_null($top_link) || $top_link == ""`为`!is_null($top_link) && $top_link != ""`. 但我会替换整个条件：

```
if (!empty($top_link)) {
    echo '<img src = ......';
} 
```

这会让你不关心 php.ini 中不同类型的空虚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:48:06.613

我有一个建议，但我不确定这是问题所在

尝试这个 ：`echo'<img src = '".$top_link."' alt="" width="64" height="63" />';`

我把 ' 放在 " 之前

并替换 || 和 ＆＆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:45:40.010

检查您的代码后，我猜您的 IF 条件出错了，试试这个

> if (!is_null($top_link) || $top_link != " ")

# android - 更新 HelloJni 示例

> ID：11568066
> 
> 赞同：3
> 
> 时间：2012-07-19T19:38:22.340
> 
> 标签：android, ant, android-ndk, cygwin

这可能是一个非常简单的问题，但由于我是 Cygwin 和 Ant 的新手，这让我非常恼火。

基本上，我正在尝试测试 NDK 附带的 hello-jni 示例（我目前使用 r8）。

我已经设定了路径，一切正常。但是，当我简单地 cd 到示例目录并尝试更新项目时，我收到以下错误。

当我在 -p 之后实际附加路径时会弹出相同的错误

```
$ android.bat update project -p .
Error: The project either has no target set or the target is invalid.
Please provide a --target to the 'android.bat update' command. 
```

ndk-build 工作正常，但每当我尝试使用 Ant 安装时，我都会不可避免地遇到 build.xml is missing 错误。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-20T02:30:21.700

运行这个命令

```
android update project -p . -s --target android-14 
```

# css - ipad 媒体查询引导下拉菜单

> ID：11568067
> 
> 赞同：0
> 
> 时间：2012-07-19T19:38:29.987
> 
> 标签：css, twitter-bootstrap, media-queries

我在我的引导应用程序中使用以下媒体查询。

```
 @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and  (orientation: landscape) {
 .nav li { width: 100%;
         }
 .nav .dropdown ul {display:none; }
 .nav .open ul { display: block; }

 .nav-collapse .nav > li > a, .nav-collapse .dropdown-menu a {
  text-align: center;
   background-color:#211256;
  }

 .nav-collapse .nav > li > a:hover,
 .nav-collapse .dropdown-menu a:hover {
 background-color: #211256;
 color:white;

 }

    .navbar .nav > li  a:hover{
     color:white;
     }

   .navbar .nav .active > a, .navbar .nav .active > a:hover {
    background: #211256;
    color: white;
    text-decoration: none;
   }

   .nav-collapse .nav > li > a, .nav-collapse .dropdown-menu a {
   border-radius: 3px 3px 3px 3px;
   color: white;
   font-weight: bold;
   padding: 6px 15px;
   margin-bottom:2px;

   }

   .navbar .nav li.dropdown .dropdown-toggle .caret, .navbar .nav li.dropdown.open .caret {
  border-bottom-color: white;
  border-top-color: white;
  }

  .navbar .nav li.dropdown.open > .dropdown-toggle, .navbar .nav li.dropdown.active >   .dropdown-toggle, .navbar .nav li.dropdown.open.active > .dropdown-toggle {
 background-color: transparent;
 color: #211256;
 }
.accordion-inner {
border-top: 1px solid #E5E5E5;
padding: 9px 15px;
}

 } 
```

以横向模式查看页面时

```
 http://46.32.253.11/ 
```

下拉导航栏默认打开，我看不到引导按钮，我对最大宽度 979px 使用完全相同的媒体查询，按钮出现并关闭。

谁能建议我需要选择什么选择器才能让 ipad 显示引导按钮并隐藏下拉菜单，直到按下按钮。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:01:54.343

这将需要一些 JavaScript，为了简单起见，我将推荐 jQuery。

本质上，您将`orientationchange`在 JavaScript 中监听事件，然后根据方向调用一个处理切换的函数。

```
$(document).ready(function() {
  window.onorientationchange = function() {
    var orientation = window.orientation;
    switch(orientation) {
      case 0: // portrait
        break; 

      case 90: // landscape left
        toggler();
        break;

      case -90: // landscape right
        toggler();
        break;
    }
  }
  function toggler() {
    var toggled = false;
    $('.dropdown-toggle').on('click', function() {
      if (toggled === false) {
        $('.nav .open ul').hide();
        $('.nav .dropdown ul').show();
        toggled = true;
      } else {
        $('.nav .dropdown ul').hide();
        $('.nav .open ul').show();
        toggled = false;
      }
    });
  }
}); 
```

试试这个，看看它是否能让你朝着正确的方向开始（双关语）。

# app-store - 由过刊杂志组成的应用程序

> ID：11568068
> 
> 赞同：0
> 
> 时间：2012-07-19T19:38:31.243
> 
> 标签：app-store

我正在制作一个用于展示旧版杂志的应用程序（我拥有必要的权限）。现在，每本杂志都在商店出售，但旧版本，如 2005 年，不再在街上。

我想制作一个只有 12 个按钮的应用程序，一个用于全年的每个杂志版本，并将这个应用程序作为我的杂志在特定年份的版本出售（即 2005 年的应用程序，2006 年的另一个应用程序，依此类推. PDF 将存储在每个应用程序本地，因此不需要互联网连接。此外，我已经实现的 pdf 阅读器，带有收藏夹、交易和东西..

例如，我不能在浏览器中展示这本杂志，因为我不希望用户下载并分享这些杂志——它们应该仅供购买该应用程序的人使用。

苹果会拒绝我的应用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:42:35.830

我认为最适合您组织应用程序的方式是提供一个查看器应用程序，然后实施微交易，以便购买您的家庭杂志的先前版本。

我可以用几种不同的方式想象一个视图，但简单地将杂志下载到 web 视图中将是我目前能想到的最简单的方法。我不确定用户将如何共享它，因为即使您将其包含在图像/pdf 格式中，您也可以禁用用户交互，甚至我想象的屏幕截图，防止他们从您的应用程序中删除它（据我所知知识）。

要直接回答您的问题，不，我不认为 Apple 会拒绝您的应用程序，尽管取决于内置书店的工作方式，您可能更容易尝试通过 iTunes 或其他任何过程将其发布到该应用程序是，并保存自己的代码。

# c++ - c++ 中的 struct 是否类似于枚举或类？

> ID：11568084
> 
> 赞同：0
> 
> 时间：2012-07-19T19:39:25.223
> 
> 标签：c++

我想知道 a是否与c++ 中`struct`的想法相同？`enum`如果有人可以解释相似之处/不同之处，我将不胜感激我正在努力学习。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T19:41:44.070

> c++ 中的 struct 是否类似于枚举或类？

在 C++ 中，结构本质上与类相同，只是成员变量、方法和基类的默认访问修饰符都是公共的，而在类中，默认访问修饰符是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:41:02.447

枚举用于抽象出幻数。

结构用于保存不同变量的集合。

您几乎可以将枚举视为 int 或 char 的替代品，以使内容更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T19:43:45.347

struct 基本上是一个所有成员都公开的类。

例如：

```
struct MyNewStruct {
    int myNewInt;
    double myNewDouble;
}; 
```

相当于：

```
class MyNewClass {
public:
    int myNewInt;
    double myNewDouble;
}; 
```

因此，您可以使用构造函数创建结构：

```
struct MyNewStruct {
    int myNewInt;
    double myNewDouble;

    MyNewStruct(int i, double d) 
    : myNewInt(i), myNewDouble(d)
    {}
}; 
```

# android - 提高 Android TessBaseAPI (Tesseract) OCR 的准确性

> ID：11568085
> 
> 赞同：3
> 
> 时间：2012-07-19T19:39:30.013
> 
> 标签：android, ocr, tesseract

[在关注此站点](http://gaut.am/making-an-ocr-android-app-using-tesseract/)的帮助下，我在我的项目中使用 TessBaseAPI 进行 OCR 。但是，他们的结果是 50% 到 60% 使用 5MP 相机。我想提高我的 OCR 的准确性。

VietOCR 也使用 tesseract 进行 OCR；他们的结果令人惊叹，准确率超过 90%。但是我的应用程序的准确性并不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:59:59.617

嘿，所以我之前在[如何提高 Tesseract 的 OCR 文本的准确性？](https://stackoverflow.com/questions/11301343/how-do-i-improve-the-accuracy-of-the-ocr-text-from-tesseract)

经过一些研究，我发现您可以通过一些图像增强算法提高图像质量来提高比率......如果您想看看更好的 OCR 应用程序，那么您应该尝试查看这个：[https:// github.com/rmtheis/android-ocr](https://github.com/rmtheis/android-ocr)

我没有使用过 VietOCR，所以我真的不知道你有什么问题，但即使我有一个 5MP 相机，我也得到了相同的准确率，所以我认为这不是电话问题，而是更多的图书馆/图像问题

# vba - 使用宏在excel中将行从一个工作表复制到另一个工作表

> ID：11568091
> 
> 赞同：0
> 
> 时间：2012-07-19T19:40:00.270
> 
> 标签：vba, excel

我有一个 Excel 工作表，里面有一大堆行和几列。第一列包含制造商的名称，第二列包含所有产品的产品代码，第三列包含描述等。我想要做的是复制与某些产品代码对应的行。例如：

```
**Manufacturer       Product code       Description**
abc                 B010                blah blah
dgh                 A012                
hgy                 X010                
eut                 B013                 
uru                 B014                 
eut                 B015              
asd                 G012            
sof                 B016
uet                 B016 
etc 
```

有没有办法复制产品代码在 B010 - B016 之间的行？也可能有双重/匹配的产品代码，复制它们也完全可以。

说得通？

抱歉，我还没有要输入的 vba 代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:29:13.663

这应该可以解决问题；它将 B010 和 B016 之间的任何 B 单元格值的 A:C 范围单元格复制到 Sheet2 中的下一个可用行。

```
Private Sub CopyRows()
    Dim lastrow As Long
    Dim r1 As Long, r2 As Long

    ' Get the last row in the worksheet
    lastrow = ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Row

    r2 = 1

    For r1 = 1 To lastrow
        ' If the last three characters of the B cell are numeric...
        If IsNumeric(Right(Sheet1.Range("$B$" & r1).Value, 3)) Then
            ' If the first character of the B cell is "B", and the last three 
            ' characters are between 10 and 16 ...
            If Left(Sheet1.Range("$B$" & r1).Value, 1) = "B" And _
                CLng(Right(Sheet1.Range("$B$" & r1).Value, 3)) >= 10 And _
                CLng(Right(Sheet1.Range("$B$" & r1).Value, 3)) <= 16 Then

                ' ... copy the A-C range for the row to the next available row 
                ' in Sheet2
                Sheet2.Range("$A$" & r2, "$C$" & r2).Value = _
                    Sheet1.Range("$A$" & r1, "$C$" & r1).Value

                r2 = r2 + 1

            End If
        End If
    Next
End Sub 
```

# github - GitHub Wiki 上的语法高亮显示：指定编程语言

> ID：11568093
> 
> 赞同：16
> 
> 时间：2012-07-19T19:40:18.343
> 
> 标签：github, markdown, github-linguist

GitHub 使用一种称为“GitHub Flavored Markdown”的东西来处理消息、问题和评论。我的问题是：

*   GitHub 是否也在他们的 Wiki 中使用这种语法？
*   据我了解，可以使用以下语法为语法高亮指定编程语言：

    ```
    ```ruby  
    require 'redcarpet'  
    markdown = Redcarpet.new("Hello World!")  
    puts markdown.to_html  
    ``` 
    ```

    可以在`````字符串之后指定编程语言的位置（例如````ruby`）

    我的问题是：**如何查找编程语言的说明符？**（例如`C`似乎不适用于 C 编程语言）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T20:03:36.700

有关 github wiki 可以使用的可能词法分析器列表，请参见此处： http: [//pygments.org/docs/lexers/](http://pygments.org/docs/lexers/)

如果您发现某个词法分析器不受支持，github 建议分叉他们的代码并通过拉取请求提交：[https ://github.com/blog/774-git-powered-wikis-improved](https://github.com/blog/774-git-powered-wikis-improved)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-14T21:08:43.153

引用[GitHub 关于该主题的文档](https://help.github.com/articles/creating-and-highlighting-code-blocks/#syntax-highlighting)：

> 我们使用[Linguist](https://github.com/github/linguist)来执行语言检测和语法高亮。[您可以在语言 YAML 文件](https://github.com/github/linguist/blob/master/lib/linguist/languages.yml)中找出哪些关键字是有效的。

语言学家的“[语法索引](https://github.com/github/linguist/blob/master/vendor/README.md#grammar-index)”可能也很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-20T19:27:29.273

> 如何查找编程语言的说明符？

语言说明符的最新**列表**可以从[语言学家存储库](https://github.com/github/linguist)的主配置文件中推导出来，[`languages.yml`](https://github.com/github/linguist/blob/master/lib/linguist/languages.yml). 对于该列表中的每种语言，您可以用作说明符：

1.  语言名称
2.  任何语言`aliases`
3.  任何文件扩展名，带或不带前导`.`.

空格必须用破折号代替（例如，`emacs-lisp`是 的一个说明符`Emacs Lisp`）。带有`tm_scope: none`条目的语言没有定义语法，也不会在 github.com 上突出显示。

jmm 进行了这项逆向工程，并得到了 GitHub 一位工程师的确认。他打开了关于[Linguist](https://github.com/github/linguist/issues/2278)的所有信息的 issue，并维护[了一个 wiki 页面，其中包含所有语言的说明符](https://github.com/jmm/gfm-lang-ids/wiki/GitHub-Flavored-Markdown-%28GFM%29-language-IDs)（可能不是最新的）。

> GitHub 是否也在他们的 Wiki 中使用这种语法？

是的，但是 github.com 的 wikis 也支持其他几种格式。[您可以在标记存储库](https://github.com/github/markup#markups)中找到完整列表。

# r - 在 R 中绘制不均匀的行大小

> ID：11568094
> 
> 赞同：0
> 
> 时间：2012-07-19T19:40:22.167
> 
> 标签：r, plot, row

我在制表符分隔的长度不均匀的行中有数据，我想为每一行制作一个直方图：

```
1    23    352    4    12    94    0    2
434    13    29
5    93    93    34
(...more rows) 
```

这是我目前拥有的（不包括幻想）：

```
data = read.delim(file.txt,header = F, sep="\t")
for (j in 1:nrow(data)) { #loop over each row
    hist(data[j,]) 
```

但是当我尝试制作直方图时，我认为它会尝试将 NA 包含在数据框的行中，因为 R 给了我错误消息：“hist.default(data[2, ]) 中的错误：'x'必须是数字”。

当我尝试使用时：

```
read.scan("file.txt, sep="\t") 
```

我留下了一些我不知道如何按行分隔的东西。我有比将文件拆分为每个文件一行然后分别读取每一行更好的选择吗？（我遇到了同样的问题，列大小不均匀......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:48:09.187

该错误是由于从 data.frame 中获取一行会产生一个 class 对象`data.frame`（并且`hist()`想要 class `numeric`）。只需将其转换为`numeric`：

```
hist(as.numeric(data[j,])) 
```

# android - 应用小部件布局中的嵌套权重

> ID：11568095
> 
> 赞同：0
> 
> 时间：2012-07-19T19:40:24.227
> 
> 标签：android, android-layout

我有以下布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:background="@color/blue" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/red" />

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/yellow" />
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:background="@color/blue" />

</LinearLayout> 
```

它使用嵌套权重，我知道性能问题。
我想在 appwidget 中显示这个布局，但是当我加载 appwidget 时，会出现“无法加载小部件”的消息。我认为这是因为嵌套的权重（不确定）。

当我使用 a`RelativeLayout`作为基本布局时，我有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/top"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:background="@color/blue" />

    <View
        android:id="@+id/bottom"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:background="@color/blue" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@id/bottom"
        android:layout_below="@id/top" >

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/red" />

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/yellow" />
    </LinearLayout>

</RelativeLayout> 
```

当我使用这种布局时，红色和黄色视图不显示，我猜高度保持在`0dp`.

我怎样才能实现我的目标？
要清楚：我想在顶部和底部有一个视图，固定高度。在它们之间，我想有几个相同高度的视图，填补空白。

* * *

**编辑**
所以我发现了一些东西。当您的布局中有两个级别的 ViewGroups 时，appwidget 不会显示：

```
<LinearLayout
    android:id="@+id/middle"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="20dp"
    android:layout_marginTop="20dp"
    android:orientation="vertical" >

</LinearLayout>

<View
    android:id="@+id/top"
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentTop="true"
    android:background="@color/teal" />

<View
    android:id="@+id/bottom"
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentBottom="true"
    android:background="@color/teal" /> 
```

这有效，但这不起作用：

```
<LinearLayout
    android:id="@+id/middle"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="20dp"
    android:layout_marginTop="20dp"
    android:orientation="vertical" >

    <View
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/red" />
</LinearLayout>

<View
    android:id="@+id/top"
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentTop="true"
    android:background="@color/teal" />

<View
    android:id="@+id/bottom"
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentBottom="true"
    android:background="@color/teal" /> 
```

有谁知道为什么会发生这种情况以及如何实施我的想法？克里斯托弗的形象展示了我的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:36:16.427

如果我正确理解您的要求，这就是您要实现的布局。

![布局](../Images/63af175d4131d4fc37b47dec0c806e95.png)

我已更改您的 xml 代码来创建此布局。这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/middle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="20dp"
        android:layout_marginTop="20dp"
        android:orientation="vertical" >

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/red" />

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/white" />

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/red" />

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/white" />
    </LinearLayout>

    <View
        android:id="@+id/top"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:layout_alignParentTop="true"
        android:background="@color/teal" />

    <View
        android:id="@+id/bottom"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:layout_alignParentBottom="true"
        android:background="@color/teal" />

</RelativeLayout> 
```

如果它们的权重都设置为 1，则放置在“中间”的所有视图都将具有统一的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:44:25.443

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:id="@+id/theparent"
>
<View 
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentTop="true"
    android:background="@color/red"
    />

<View 
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentBottom="true"
    android:background="@color/red"
    />
</RelativeLayout> 
```

这应该照顾你的页眉和页脚。告诉我更多关于你想在内容区域做什么，我也许可以帮助你

# api - 获取 Sendgrid 中收件人列表打开率和点击率的 API

> ID：11568098
> 
> 赞同：0
> 
> 时间：2012-07-19T19:40:43.870
> 
> 标签：api, smtp, statistics, sendgrid

在 Sendgrid 中，查看收件人列表时，它会显示每个单独列表的打开率和点击率。有没有我可以用来获取这些值的 API？我尝试使用 Stats API，但它每天显示，而不是按列表显示。那么是否有一个 API 可以显示每个列表的费率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:24:04.510

不，目前没有办法通过 API 执行此操作。[获得此路线图的最佳选择是在我们的社区委员会(http://community.sendgrid.com/)](http://community.sendgrid.com/)上开始讨论。

对于此类问题，您也可以随时联系我们的支持团队！

# r - 将不同的数据类型值写入 R 中的文件

> ID：11568100
> 
> 赞同：1
> 
> 时间：2012-07-19T19:37:21.263
> 
> 标签：r

是否可以将不同数据类型的值写入 R 中的文件？目前，我正在使用一个简单的向量，如下所示：

```
> vect = c (1,2, "string")
> vect
[1] "1"     "2"     "string"
> write.table(vect, file="/home/sampleuser/sample.txt", append= FALSE, sep= "|") 
```

但是，由于`vect`现在是字符串向量，因此打开文件具有以下内容以引号形式：

```
"x"
"1"|"1"
"2"|"2"
"3"|"string" 
```

是否无法恢复条目的数据类型`1`并被`2`视为数值而不是字符串。所以我的预期结果是：

```
"x"
"1"|1
"2"|2
"3"|"string" 
```

另外，我假设左侧值“1”、“2”和“3”是矢量索引？我不明白第一行是“x”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:19:56.993

我想知道是否只需从输出文件中删除所有引号就可以解决您的问题？这很简单：添加`quote=FALSE`到您的`write.table()`通话中。

```
write.table(vect, file="/home/sampleuser/sample.txt", 
            append=FALSE, sep="|", quote=FALSE)

x
1|1
2|2
3|string 
```

此外，如果您愿意，您可以去掉列名和行名。但是现在您的分隔符没有出现，因为您有一个单列表。

```
write.table(vect, file="/home/sampleuser/sample.txt", append=FALSE, sep="|",
            quote=FALSE, row.names=FALSE, col.names=FALSE)

1
2
string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:43:55.007

对于向量和矩阵，R 要求所有内容都具有相同的数据类型。默认情况下，R 会将向量/矩阵中的所有数据强制转换为相同的格式。R 会将更具体的数据类型强制转换为不太具体的数据类型。在这种情况下，存储在向量中的任何项目都可以合理地表示为“字符”类型，因此它将自动强制向量的数字部分以适应该数据类型。

正如@Dason 所说，如果这不是您想要的，您最好使用列表。

或者，您可以使用 data.frame，它允许您将不同的数据类型存储在不同的列中（在内部，R 将 data.frames 存储为列表，因此这将是另一种选择是有意义的）。

# asp.net-mvc - 在 asp (mvc) 中本地读取 XLS

> ID：11568106
> 
> 赞同：0
> 
> 时间：2012-07-19T19:41:17.163
> 
> 标签：asp.net-mvc, excel, local, xls

感谢您的阅读，我的疑问如下，我试图从 xls 文件中获取数据，但必须在本地完成，无需上传文件，我已经完成了与 txts 文件类似的操作，并且效果很好：

```
Function Send(ByVal file As HttpPostedFileBase) As ActionResult
    Dim line As String
    Dim textreader As System.IO.StreamReader = New StreamReader(file.InputStream)
    While Not textreader.EndOfStream
        line = textreader.ReadLine()
        ViewBag.line = line
    End While
    Return View("Index")
End Function 
```

但我不能对excel文件做同样的事情，首先，因为我不能使用streamreader，所以在使用这段代码时我不知道如何指定我的xls文件的目录

```
 Dim oApp As Excel.Application = New Excel.Application
    Dim oWB As Excel.Workbook
    Dim oSheet As Excel.Worksheet
    oWB = oApp.Workbooks.Open(file.inputstream)  <-- HERE IS WHERE I GET (AN OBVIOUS) ERROR 
```

有人知道如何在本地打开文件吗？谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:06:09.583

有几种方法可以做到这一点，其中一种是访问文件“数据库样式”......

```
...
    string filePath = string.Format("C:\\TEST\\{0}.xlsx", Guid.NewGuid().ToString());
    var fileStream = File.Create(filePath);
    input.CopyTo(file.InputStream);
    fileStream.Close();

    string cn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filePath  + ";Extended Properties=\"Excel 12.0;HDR=YES;\"";
    string query = "SELECT * FROM SHEET_NAME";

    conn= new OleDbConnection(cn);
    conn.Open();
    OleDbCommand woOleCommand = new OleDbCommand(query, conn);

    DbDataReader result = woOleCommand.ExecuteReader();

    // Read the DataReader...
... 
```

所以基本上你像表格一样查询表格，如果它们确实是表格，那么这段代码可能就是你要找的。

另一方面，如果您仍需要使用自动化，请尝试以下方法：

```
...    
object missing = System.Reflection.Missing.Value;
wBook = (Excel._Workbook)xl.Workbooks.Open(filePath, false, false, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing); 
... 
```

* * *

## 读取输入流

```
using (var fileStream = File.Create(filePath)) {
     file.InputStream.CopyTo(fileStream); 
} 
// Now you got your stream on a file (filePath) so you can work with it. 
```

# php - 是什么导致了截断我的 SVG 图像的 TCPDF 库错误？

> ID：11568114
> 
> 赞同：0
> 
> 时间：2012-07-19T19:42:05.427
> 
> 标签：php, image, pdf, svg, tcpdf

我一直在尝试使用 TCPDF 库创建包含 SVG 图像的 PDF。我想让 SVG 以页面为中心，上面和下面都有一些文本。

我已经设法让它工作到一定程度，但是部分 SVG 图像被切断，它似乎与 X/Y 位置有关，但我不知道如何解决这个问题。

**是什么导致了截断我的 SVG 图像的 TCPDF 库错误？**

*代码：*

```
<?php 

require_once('../../TCPDF/tcpdf.php');

// Remove the default header and footer
class PDF extends TCPDF { 
    public function Header() {} 
    public function Footer() {} 
} 

$pdf = new PDF();

$pdf->AddPage();

$pdf->SetFont('helvetica', 'B', 160);

$pdf->SetTextColor(0,0,0);

$pdf->Cell(0, 0, 'Higher', 1, 1, 'C', false, '', 1);

$pdf->Ln(4);

$pdf->ImageSVG($file='Image.svg', $x=0, $y=80, $w=100, $h=100, $link='', $align='N', $palign='C', $border=1, $fitonpage=false);

$pdf->Ln(4);

$pdf->Cell(0, 0, 'Lower', 1, 1, 'C', 0, '', 1);

$file = 'Result' . '.pdf'; // Set the name of the PDF file

$pdf->Output($file, 'F'); // Save PDF to file

$pdf->Output($file, 'I'); // Display the PDF

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:59:33.513

**这似乎是我使用的当前版本的 TCPDF 库的一个错误。**

问题是当您使用对齐功能时：

```
$align='N', $palign='C' 
```

等等，如果其他人有类似的问题并且需要解决方法，我通过使用 x/y 位置手动居中 SVG 来修复它。

**另一个需要注意的问题**是，当我尝试使用一些大尺寸的 SVG 图像时，我注意到它会产生视觉故障，因此 SVG 处理肯定似乎有一些错误。对于这个问题，我发现的解决方法是降低 SVG 的大小，然后使用宽度/高度值来缩放它们，这似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T19:47:24.637

在编辑器中打开您的 svg 图像

*   在 svg 标签中“
*   查找宽度和高度的属性
*   根据您的喜好修改它

    ```
    <svg xmlns="http://www.w3.org/2000/svg" 
    width="150" height="100" viewBox="0 0 3 2">

    <rect width="1" height="2" x="0" fill="#008d46" />
    <rect width="1" height="2" x="1" fill="#ffffff" />
    <rect width="1" height="2" x="2" fill="#d2232c" />
    </svg> 
    ```

如果修改宽度和高度不起作用，则可能在`<svg>`...内有一个矩形标签或线条标签`</svg>`，它超过了已经定义的宽度和高度。

[https://developer.mozilla.org/en-US/docs/Web/SVG/Element/svg](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/svg)

# ruby-on-rails - 使用“sudo gem install nokogiri”在 Mac 上安装 nokogiri 时出错

> ID：11568120
> 
> 赞同：3
> 
> 时间：2012-07-19T19:42:23.460
> 
> 标签：ruby-on-rails, macos, gem, nokogiri

我试图安装 nokogiri，因为它是启动 rails 所必需的

```
 $ rails s
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find nokogiri-1.5.5 in any of the sources (Bundler::GemNotFound)
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `map!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `materialize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/environment.rb:27:in `specs'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:60:in `setup'
    from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:9:in `<main>' 
```

但是，当我尝试使用命令安装 nokogiri 时它失败了

```
$ sudo gem install nokogiri 
```

这是错误。

```
 $ sudo gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-zlib-dir
    --without-zlib-dir
    --with-zlib-include
    --without-zlib-include=${zlib-dir}/include
    --with-zlib-lib
    --without-zlib-lib=${zlib-dir}/lib
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/lib
    --with-xml2-dir
    --without-xml2-dir
    --with-xml2-include
    --without-xml2-include=${xml2-dir}/include
    --with-xml2-lib
    --without-xml2-lib=${xml2-dir}/lib
    --with-xslt-dir
    --without-xslt-dir
    --with-xslt-include
    --without-xslt-include=${xslt-dir}/include
    --with-xslt-lib
    --without-xslt-lib=${xslt-dir}/lib
    --with-libxslt-config
    --without-libxslt-config
    --with-pkg-config
    --without-pkg-config
    --with-libxml-2.0-config
    --without-libxml-2.0-config
    --with-libiconv-config
    --without-libiconv-config
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:969:in `find_header'
    from extconf.rb:114:in `<main>'

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5/ext/nokogiri/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T18:06:32.477

您收到此错误的原因是 nokogiri gem 包含需要在您的机器上编译才能运行的 C/C++ 扩展。

仅仅安装 XCode 并不能解决问题——您需要专门安装 XCode 命令行工具，这是一个 C/C++ 编译器/链接器工具链，在安装 XCode 时默认不安装。

有一个选项可以将它们安装在 XCode GUI 内的菜单中，请参阅此线程以获取屏幕截图：

[Xcode 4.4 及更高版本安装命令行工具](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)

如果您已经这样做了，那么您可能需要创建一个指向编译器的符号链接，以便您的操作系统知道在哪里可以找到它：

[安装 nokogiri Mac OS X 10.8.2 XCode 已安装](https://stackoverflow.com/questions/12657558/installing-nokogiri-mac-os-x-10-8-2-xcode-installed?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:03:26.263

看来您需要安装 Xcode。

# android - 控制 MediaController 进度滑块

> ID：11568123
> 
> 赞同：2
> 
> 时间：2012-07-19T19:42:31.167
> 
> 标签：android, video-streaming, media-player, mediacontroller

我需要将触摸事件捕获到`MediaController`进度滑块，以便`MediaPlayer`在手指从滑块上抬起之前不会发生更新。

[也许我的情况很独特：我正在播放每个“程序”都有多个“堆栈”的流媒体视频。直到前一个堆栈完成后才会加载下一个堆栈。滑块需要代表所有堆栈的持续时间，而“拇指”的进度需要代表总持续时间。这很容易通过覆盖`getBufferPercentage()`,`getCurrentPosition()`和]的`getDuration()`方法来完成`MediaPlayerControl`

更成问题的是沿着时间线来回“擦洗”（移动拇指）。如果它导致数据源在每次移动时都出现`set`多次`seekTo`，那么事情很快就会陷入困境并崩溃。如果 MediaPlayer 在用户完成擦洗之前不执行任何操作会更好。

正如其他人所写，是的，最好编写我自己的 MediaController 实现。但是为什么要重做所有这些工作呢？我尝试扩展 MediaController，但很快就变得复杂了。我只是想捕捉到滑块的触摸事件！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T19:42:31.167

一个能够获得 MediaController 元素的句柄：

```
final int topContainerId1 = getResources().getIdentifier("mediacontroller_progress", "id", "android");
final SeekBar seekbar = (SeekBar) mController.findViewById(topContainerId1); 
```

然后在搜索栏上设置一个监听器，这将需要你实现它的三个公共方法：

```
seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        // Log.i("TAG", "#### onProgressChanged: " + progress);
        // update current position here
        }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // Log.i("TAG", "#### onStartTrackingTouch");
        // this tells the controller to stay visible while user scrubs
        mController.show(3600000);
        // if it is possible, pause the video
        if (playerState == MPState.Started || playerState == MPState.Paused) {
            mediaPlayer.pause();
            playerState = MPState.Paused;
        }
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        int seekValue = seekBar.getProgress();
        int newMinutes = Math.round((float)getTotalDuration() * (float)seekValue / (float)seekBar.getMax());
        // Log.i("TAG", "#### onStopTrackingTouch: " + newMinutes);
        mController.show(3000); // = sDefaultTimeout, hide in 3 seconds
    }
}); 
```

注意事项：这不会在您擦洗时更新当前位置，即左侧 TextView 时间值。（我有一个非常了不起的方法来做到这一点，这个边距太小而无法包含）。

# javascript - 是否可以让变量“仅对模块”及其扩展可见？

> ID：11568126
> 
> 赞同：2
> 
> 时间：2012-07-19T19:42:34.100
> 
> 标签：javascript

假设我有以下模块，分成多个文件，都能够*扩展* `skillet`：

**文件1.js：**

```
(function(){
 var privateVar1 = 0;

 var privateFunction1 = function() {
  //function definiton
 };

 skillet.fry() = function() {
  //fry it
  //matchbox.light();
 };

})(window.skillet = window.skillet || {}); 
```

**文件2.js：**

```
(function(){
 var privateVar2 = 0;

 var privateFunction2 = function() {
  //some private function 
 };

 skillet.grillIt = function() {
  //grill It
  //matchbox.strike(); <-- Shared with File1.js
 };

})(window.skillet = window.skillet || {}); 
```

是否可以有一个共享变量/对象，比如`matchbox`两个模块可以共享**而不**绑定到`window.matchbox`or `window.skillet.matchbox`？即应仅对 File1.js 和 File2.js*可见*，`matchbox`并且不得在其他地方访问。我怀疑这是否可能，但有没有办法在 JavaScript 中实现这种行为？如果不是，在这方面使用的最佳做法是什么？

（这更像是在一组相关模块之间拥有一个共享的*事件总线，而不是全局公开该总线）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:48:07.640

没有。

“私有”变量在 JS 中起作用只是因为函数声明的范围。没有办法与在完全不同的范围中声明的函数共享该范围。作用域是函数的一个不可更改的属性，一旦它们被创建。

这就是为什么这类事情通常使用`_foo`样式属性来完成。

```
skillet._matchbox = { strike: function() { ... } }; 
```

下划线前缀是“内部”的约定，并用作提示不要弄乱它。

* * *

不过，您也可以通过传递方式获得创意`matchbox`，尽管在所有情况下，这都意味着提供一种方法来`matchbox`摆脱它的原始范围。就像也许，制作一个`skillet.extend`将火柴盒传递给它的参数的方法？

```
(function() {
  var matchbox = { strike: function() { ... } }
  window.skillet = {
    extend: function(fn) {
      fn(matchbox);
    }
  };
})();

skillet.extend(function(matchbox) {
  var privateVar2 = 0;
  var privateFunction2 = function() {};

  skillet.grillIt = function() {
    //grill It
    matchbox.strike();
  };
} 
```

这允许您以`matchbox`受控方式在其原始范围之外使用。但它也允许任何人得到`matchbox`可能不应该得到的东西。

```
var stolenMatchbox;
skillet.extend(function(matchbox) {
  stolenMatchbox = matchbox;
});
while (stolenMatchbox.count > 0) { stolenMatchbox.strike(); }
alert("Now you are outta matches, sucker!"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T19:56:26.423

由于您已经将代码分成多个文件，因此您可能会考虑使用像[require.js](http://requirejs.org/)这样的模块加载器。您可以为火柴盒定义第三个模块，然后将其作为参数传递给上面示例中的两个煎锅。使用这种方法，您不必通过窗口全局公开火柴盒。

File1.js 和 require.js 看起来像这样：

```
define(['matchbox'], function(matchbox){
(function(){
    var privateVar1 = 0;

    var privateFunction1 = function() {
     //function definiton
    };

    skillet.fry() = function() {
       //fry it
       matchbox.light();
    };

 })(window.skillet = window.skillet || {});
}); 
```

matchbox.js 看起来像这样：

```
define([], function() {
  function light() {
     //light implementation
  }

  function strike() {
     //strike implementation
  }

  return {
     light: light,
     strike: strike
  }
} 
```

# powershell - 使用 add-content 将内容输出到文本文件

> ID：11568128
> 
> 赞同：0
> 
> 时间：2012-07-19T19:42:42.650
> 
> 标签：powershell, virtual-machine

我正在编辑一个脚本（磁盘清理器），并希望在我的脚本末尾输出所有已清除的空间以及磁盘中剩余的空间。我已经编写了所有内容，并且一切正常，但是我希望我的脚本显示清除了多少并保留在可以检索的文本文件中的消息，而不是显示我现在的状态（通过使用 write -主持人）。我进行了一些搜索并发现添加内容有效，尽管我不确定如何执行此操作，因为该脚本旨在在各种虚拟服务器上运行，因此我不知道可能需要任何路径。

这是我要显示的一小段代码：

```
$disks = Get-WMIObject -Computer $server -Class Win32_LogicalDisk -Filter "DeviceID like '%C%'"

$beforeFreeSpace = $disks.FreeSpace
$beforeFreeSpaceMB = [math]::truncate($beforeFreeSpace / 1MB)
write-output $beforeFreeSpaceMB

#Lots of code right here in between

$afterFreeSpace = $disks.FreeSpace
$afterFreeSpaceMB = [math]::truncate($afterFreeSpace / 1MB)

$freedSpace = $afterFreeSpaceMB - $beforeFreeSpaceMB
write-output $freedSpace
write-output "Free space remaining after cleanup (in MB): " $afterFreeSpaceMB 
```

几乎我想找到一种方法来获取易于检索的文件中的输出。add-content 是最好的方法，还是有更简单/更有效的方法来实现这个目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:48:38.023

而不是使用 Write-Output 你可以做这样的事情：

```
$message = $freedSpace
$message += "`r`nFree space remaining after cleanup (in MB): " + $afterFreeSpaceMB

$message| Out-File -FilePath C:\logs\logfile.txt 
```

另一种可能更清洁的方法是记录这样的事情 -

```
$freedSpace | Out-File -FilePath $logFilePath -Append 
```

# php - PHP Echo 如果 URL 以文本结尾

> ID：11568130
> 
> 赞同：0
> 
> 时间：2012-07-19T19:43:06.040
> 
> 标签：php

如果 url 以某些指定的文本结尾，是否仍然在 php 中显示回显？

例如 ...

如果 url 以 ?login=failed 结尾

php是否可以回显...

echo '登录失败，请重试'; ... 例如？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T19:44:27.173

检查是否`$_GET['login']`已设置，如果已设置，请检查是否等于`'failed'`：

```
if( isset( $_GET['login']) && $_GET['login'] == 'failed') {
    echo 'Login Failed, please try again';
} 
```

# javascript - 一致的图形绘制

> ID：11568134
> 
> 赞同：1
> 
> 时间：2012-07-19T19:43:16.313
> 
> 标签：javascript, jquery, graph, graph-theory

是否有一个 Javascript 库可以在浏览器中生成一致的图形（例如图论风格的图形）？

通过一致，我的意思是它在给定一组输入（即节点和边的配置）的情况下产生一个唯一的图形（节点的相同方向和相同位置）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:09:25.693

大多数图形布局算法（除了完全确定的网格布局或 Reingold-Tilford 树布局）使用某种随机初始化。由于无法在 Javascript 中显式设置随机数生成器的种子，因此很难强制图形布局算法完全确定。您最好的选择可能是采用现有的 Javascript 库，该库可以绘制图形（例如 d3.js）并替换对`Math.random`纯基于 Javascript 的随机数生成器的调用并与之类似，您可以为其显式设置种子。将种子设置为相同的值应确保每次运行算法时为相同的图形生成相同的布局。

可以在[此处](http://github.com/BrianRamsay/Randomizer)、[此处](http://www.karlbunyan.co.uk/2008/12/repeatable-random-numbers-in-javascript.aspx)或[此处](http://davidbau.com/archives/2010/01/30/random_seeds_coded_hints_and_quintillions.html)找到 Javascript 随机数生成器的实现。

# maven - 如何告诉 maven 从特定文件中获取 MAVEN_OPTS？

> ID：11568135
> 
> 赞同：2
> 
> 时间：2012-07-19T19:43:16.040
> 
> 标签：maven

`mvn`命令，除其他外，具有以下选项：

*   `-f,--file <arg>` 强制使用备用 POM 文件。（这是用于指向文件而不是默认`pom.xml`文件。）
*   `-gs,--global-settings <arg>`全局设置文件的备用路径。（这个用于指向`settings.xml`文件，默认在`.m2`目录中。）

这些选项仍然没有发现一个配置文件 - `.mavenrc`

所以，我的问题是 - 有没有办法告诉 maven 它应该从哪个文件中获取`MAVEN_OPTS`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T21:43:30.440

MAVEN_OPTS 是来自操作系统的环境变量。在启动 maven 之前，您可以随意设置它。

在 bash (linux) 中：

```
export MAVEN_OPTS=... 
```

在窗户上：

```
set MAVEN_OPTS=... 
```

我认为您甚至可以编辑“mvn.bat”shell 脚本的“mvn”来获取不同的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-06T08:48:43.640

从 Maven 3.3.1 开始，您可以将这些设置放入`.mvn/maven.config`项目存储库中的文件中。

参考：

*   [JVM 和命令行选项](https://maven.apache.org/docs/3.3.1/release-notes.html#JVM_and_Command_Line_Options)
*   [MNG-5767](https://issues.apache.org/jira/browse/MNG-5767)

# payment - 平衡支付 - 托管账户和（市场）商家余额之间的差异？

> ID：11568136
> 
> 赞同：3
> 
> 时间：2012-07-19T19:43:23.087
> 
> 标签：payment, escrow, balanced-payments

我是 Balanced 的新手，想知道您是否可以定义 Escrow Account 的确切含义，以及该余额与 Marketplace Merchant 余额之间的区别是什么？

如果我是 Marketplace 所有者个人/组织，代表我？另外，在什么情况下我的账户会出现负余额？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:50:56.430

*一些基本术语*： 在 Balanced 中，用户由 Accounts 表示。账户可以有两个角色；**买家**（可以借记的用户）和商家**角色**（可以贷记的用户）。最后是管理交易的**市场**。

现在，回答您关于托管和所有者账户以及费用来源等的问题：

交易通常是这样流动的（[图表](https://www.balancedpayments.com/flow)）：

```
buyer --> hold (authorization) --> debit --> marketplace escrow --> credit --> merchant 
```

*托管余额*金额是所有借方的总和减去所有贷方的总和。这个余额永远不会低于零。

*市场余额*是您的所有者帐户的所有信用总和减去每笔交易的费用总和。这可能会低于零，因为 Balanced 在交易时会向该账户收取费用。Balanced 结算这些费用，例如每 7 天从所有者的银行账户中扣除款项。

**注意**所有费用均来自您的市场所有者账户，而不是托管余额。

# c++ - 将 char 数组写入文件，转义字符用相应的文字写入

> ID：11568146
> 
> 赞同：0
> 
> 时间：2012-07-19T19:44:20.417
> 
> 标签：c++

我正在尝试将 char 数组写入文件，转义字符应使用其等效文字写入（例如，换行符应写为 '\n' 而不是文件中的实际换行符）。

如果数组是`char *arr = "hello world\n";` 我的代码应该写

```
char tempArr[100] ={'h','e','l','l','o','\s','w','o','r','l','d','\n'}; 
```

到文件。

有什么方法可以在 C++ 中实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:51:12.840

是的，这是一个 C 解决方案：

```
void printAndEscapeString(const char *input, FILE *output)
{
    const char escapeCodes[] = {
        '\n',
        '\t',
        '\v',
        '\'',
        '\"',
        '\?',
        '\a',
        '\b',
        '\f',
        '\r',
    };

    const char escapeReplacements[] = {
        'n',
        't',
        'v',
        '\'',
        '\"',
        '?',
        'a',
        'b',
        'f',
        'r',
    };

    while (*input) {
        for (int i = 0; i < sizeof(escapeCodes); i++) {
            if (*input == escapeCodes[i])
            {
                putc('\\', output);
                putc(escapeReplacements[i], output);

                goto NEXT; // use goto because I'm too lazy to figure out a better way
            }
        }

        fputc(*input, output);

    NEXT:
        input++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:00:44.653

好吧，我知道在标准 C 中这样做的方法。

```
FILE *fp;

int check = 0;

fp = fopen("output.txt", "w");
fprintf(fp, "%s", "char tempArr[100] = {");
for (i = 0; arr[i]; i++)
{
    if (i)
        fputc(',', fp);
    check += 4;
    fputc('\'', fp);
    switch(arr[i])
    {
        case '\n':
            check++;
            fputc('\\', fp);
            fputc('n', fp);
            break;
        // ...
        default:
            fputc(arr[i], fp);
    }
}
fprintf(fp, "%s", "};\n");
if (check >= 100)
    fprintf(stderr, "WARNING: tempArr contains MORE than 100 characters!\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:46:28.567

`'\n'`您可以同时拥有`'\\'`和，而不是作为您的角色之一`'n'`。

需要明确的是，我的意思是让你把两者都`'\\'`放在`'n'`你的数组中。这样，两者都`'\'`被`'n'`打印出来。

# jquery - 停止对象内的ajax调用

> ID：11568155
> 
> 赞同：0
> 
> 时间：2012-07-19T19:45:01.033
> 
> 标签：jquery, ajax, object, timeout

我有一个对象，我有一个 ajax 请求：

```
var newsrecentObj = {
    init: function() {
        var self = this;

        self.fetch().done( function(data) {
            console.dir( data );
        } ).error( function(data) {
            // stop ajax call
        } );
    },

    fetch: function() {
        var self = this;

        return $.ajax({
            url: 'http://url.to/api',
            timeout: 5000,
            dataType: 'jsonp'
        });
    }
}

var newsrecent = Object.create();
newsrecent.init(); 
```

我想在发生超时时停止请求。但我该怎么做呢？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:50:40.207

如果您的请求超时，它会因为超时而单独停止。
顺便说一句，您应该处理此事件，因此请查看 jQuery ajax 文档中的 timeout 属性！
[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:53:13.527

如果您想停止 ajax 请求，您可以创建对 jqxhr 对象的引用，并调用 .abort 方法。

# drupal - 提交节点后，文件上传字段再次可用 Drupal 7

> ID：11568161
> 
> 赞同：-2
> 
> 时间：2012-07-19T19:45:13.613
> 
> 标签：drupal, file-upload

我创建了一个内容类型，并且有一个文件上传字段。用户上传文件并提交节点。然后文件上传字段将再次可用，因此用户可以上传新文件。

如何实现这一点而不是只看到文件名和删除按钮？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:34:58.793

如果要在文件字段中上传多个文件，则应确保字段设置允许。

在`Home » Administration » Structure » Content types » [Your content type] » Manage fields`，您应该编辑您的文件字段。向下滚动到**字段设置**并将值的**数量**设置为*无限*，如果这是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:56:22.223

解决了！在 _node_update 和 _node_insert 从数据库中删除文件字段值。

# backbone.js - 骨干路由器需要忽略“index.html”

> ID：11568162
> 
> 赞同：2
> 
> 时间：2012-07-19T19:45:21.030
> 
> 标签：backbone.js

我无法修改服务器的 htaccess 并想使用主干路由器。问题是我在 url (index.html) 中遇到了一个静态 html 文件

如何让 Backbone 忽略 index.html？

提前致谢。

```
var Router = Backbone.Router.extend({
    routes : {
        "page-one" : "pageOne"
    },
    pageOne : function(){},
    pageTwo : function(){},
    pageThree : function(){}
});

scn.router = new Router();

Backbone.history.start({root: "/Backbone/index.html"}); 
```

我有 pushState，我不需要。这就是问题所在。目前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:11:17.350

pushState was the problem. I turned it off then my issues were solved.

# java - 在 Google Tasks API 中使用 Joda-Time 库将字符串转换为 DateTime 格式

> ID：11568171
> 
> 赞同：4
> 
> 时间：2012-07-19T19:45:53.967
> 
> 标签：java, android, datetime, jodatime, google-tasks-api

我有一个需要发送到 Google Tasks API 的日期/时间字符串，但我不知道如何将[Joda-Time](http://www.joda.org/joda-time/)库[DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)对象转换为 Java DateTime 对象。我使用 Android 作为平台。

该字符串以“2012/07/19 22:00:00”开头，并首先转换为 Iso 格式。

这是我的代码：

```
 Task task = new Task();
    task.setTitle(title);
    task.setNotes(note);        
    DateTimeFormatter formatter =  DateTimeFormat.forPattern("yyyy/MM/dd HH:mm:ss");
    DateTime dt = formatter.parseDateTime(dateToIso("2012/07/19 22:00:00"));
    task.setDue(dt);    

private String dateToIso(String date) {
    date = date.replace("/", "-");
    date = replaceCharAt(date, 10, 'T');
    date = date + ".000Z";
    return date;
} 
```

我得到的错误是：

> “类型不匹配：无法从 org.joda.time.DateTime 转换为 com.google.api.client.util.DateTime”

请协助。有关 ISO 转换的信息也很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-12T09:54:13.910

# 让格式化程序解析字符串

问题是您的“dateToIso”方法。没必要。[DateTimeFormatter](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html)对象的工作是在给定正确格式时解析字符串。你确实给了它正确的格式。然后你去把字符串变形为不同的格式！

解决方案：（a）杀死你的 dateToIso 方法。(b) 删除对该方法的调用。只需将原始字符串传递给`parseDateTime`.

附带问题：您忽略了时区问题。因此，在解析该字符串时，Joda-Time 将假定该日期时间的事件发生在您的 JVM 的默认时区中。因此，使用相同的输入但在另一台具有不同时区设置的计算机/JVM 上运行相同的代码将**导致不同的输出**。可能不是你想要的。经验教训：始终指定时区而不是依赖默认值。

另一个问题：您引用的错误是另一个问题，从 Joda-Time 转换为 Google 时间。继续阅读。

# 阅读文档

如果您尝试将`org.joda.time.DateTime`对象转换为`com.google.api.client.util.DateTime`对象，只需查看[JavaDoc](http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/util/DateTime.html)。在那里，您将看到 Google DateTime 的构造函数采用 java.util.Date。Joda-Time 有一个内置`toDate`方法可以转换为 java.util.Date 对象，以便与其他类进行互操作。

# 食物链

像这样创建一个对象的食物链：

> org.joda.time.DateTime → java.util.Date → com.google.api.client.util.DateTime

一些未经测试的代码……</p>

```
org.joda.time.DateTimeZone = org.joda.time.DateTimeZone.forID( "Africa/Johannesburg" );
org.joda.time.DateTime jodaDateTime = new DateTime( timeZone );

// Convert from Joda-Time to old bundled j.u.Date
java.util.Date juDate = jodaDateTime.toDate();

// Convert from j.u.Date to Google Date.
com.google.api.client.util.DateTime googleDateTime = new com.google.api.client.util.DateTime( juDate ); 
```

# 毫秒

或者，您可以提取并传递毫秒。

一般来说，我建议尽可能避免直接处理毫秒。使用毫秒可能会令人困惑、草率且容易出错。毫秒计数很难调试，因为人类无法轻易破译`long`. 而 Joda-Time 和 java.util.Date 使用毫秒-since-Unix-epoch 作为它们的内部时间跟踪机制......

*   一些软件使用[秒](https://en.wikipedia.org/wiki/Unix_time#Encoding_time_as_a_number)或[纳秒](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)而不是毫秒。
*   一些软件使用其他[时代](https://en.wikipedia.org/wiki/Epoch_%28reference_date%29)而不是[Unix 时代](https://en.wikipedia.org/wiki/Unix_time)。

# 走向另一个方向

[以下部分假设 Google 已用更新的 API 取代了问题引用的 API。不确定这个假设是否正确。]

当从[com.google.gdata.data.DateTime](https://developers.google.com/gdata/javadoc/com/google/gdata/data/DateTime)对象转到 Joda-Time DateTime 时，我将使用该`getValue`方法提供的毫秒数。请注意，它返回 64-bit `long`，而不是 32-bit `int`。

请务必将所需的时区分配给 Joda-Time [`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)，而不是依赖于隐式分配 JVM 的[当前默认时区](http://docs.oracle.com/javase/8/docs/api/java/util/TimeZone.html#getDefault--)。

```
long millisecondsFromUnixEpoch = myGoogleDateTime.getValue();
org.joda.time.DateTimeZone zone = DateTimeZone.forID( "Africa/Johannesburg" );
org.joda.time.DateTime jodaDateTime = new DateTime( millisecondsFromUnixEpoch, zone ); 
```

Google API 提供了一些其他选择。

## `toStringRfc822`

您可以调用该[`toStringRfc822`](https://developers.google.com/gdata/javadoc/com/google/gdata/data/DateTime.html#toStringRfc822())方法来生成要由 Joda-Time 解析的字符串。不幸的是，RFC 822 解析起来很笨拙且模棱两可。在其他错误中，它使用了非标准的非唯一 3-4 字母时区代码，而不是[正确的时区名称](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。Joda-Time 拒绝尝试解析这些代码，因为它们模棱两可。我假设 Google 仅在此处包含它是为了与旧 API/库向后兼容。现代互联网协议已转向 ISO 8601。

## `toUiString`

也许您可以调用该[`toUiString`](https://developers.google.com/gdata/javadoc/com/google/gdata/data/DateTime.html#toUiString())方法来创建要由 Joda-Time 解析的字符串。不幸的是，他们的文档未能解释该方法使用什么格式。

## `toString`

您可以调用`toString`记录为生成`xs:dateTime`字符串的方法。该文档未能准确解释，但我猜他们的意思是[XML Schema 规范包含 ISO 8601](http://www.w3.org/TR/xmlschema-2/#isoformats)。你可以试试这个方法看看它会产生什么。如果您想保留嵌入在 Google 对象中的与 UTC 的偏移量，这可能会很有用。但请记住，时区不仅仅是与 UTC 的偏移量，因此您仍应将所需/预期的时区分配给您的 Joda-Time DateTime 对象。因此，我不确定这是否比仅将`long`count-from-epoch 传递给 Joda-Time DateTime 的构造函数更好。

## java.time

现在[Java 8](http://en.wikipedia.org/wiki/Java_version_history#Java_SE_8_.28March_18.2C_2014.29)发布了，也许 Google 可能会对其 API 进行现代化改造以使用[java.time 包](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)。

请注意，java.time 扩展了 ISO 8601 格式以附加时区的正式名称，这是一个非常有用的想法。

# c# - 将文本解析为键/值对或 json

> ID：11568172
> 
> 赞同：1
> 
> 时间：2012-07-19T19:46:08.673
> 
> 标签：c#, json, parsing

我有以下格式的文本，我想知道最好的方法是从它创建一个用户对象，并将字段作为其属性。

我不太了解正则表达式，我正在查看 csharp 中的字符串方法，特别是 IndexOf 和 LastIndexOf，但我认为这太混乱了，因为大约有 15 个字段。

我正在尝试在 c 中执行此操作

一些特点：

1.  键/字段是固定的并且事先已知，所以我知道我必须寻找诸如标题、公司等之类的东西
2.  地址部分是单值的，然后是一些多值字段
3.  多值字段可以/不可以以逗号 (,) 结尾
4.  字段之间有一个或两个线刹车，例如“国家”之后是 2 个线刹车，然后我们遇到“兴趣”

```
    头衔：先生
    公司：abc资本
    地址1：神秘巷42号
    邮编：112312
    国家：爱尔兰
    兴趣：骑自行车，游泳，远足，
    感兴趣的话题：欧洲、亚洲、资本

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:30:38.283

这会将数据拆分为键值对并将它们存储在字典中。您可能需要进一步修改以满足更多要求。

```
var dictionary = data
        .Split(
            new[] {"\r\n"}, 
            StringSplitOptions.RemoveEmptyEntries)
        .Select(x => x.Split(':'))
        .ToDictionary(
            k => k[0].Trim(), 
            v => v[1].Trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:23:10.803

我可能会选择这样的东西：

```
 private Dictionary<string, IEnumerable<string>> ParseValues(string providedValues)
    {
        Dictionary<string, IEnumerable<string>> parsedValues = new Dictionary<string, IEnumerable<string>>();

        string[] lines = providedValues.Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries); //Your newline character here might differ, being '\r', '\n', '\r\n'...

        foreach (string line in lines)
        {
            string[] lineSplit = line.Split(':');
            string key = lineSplit[0].Trim();
            IEnumerable<string> values = lineSplit[1].Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries).Select(x => x.Trim()); //Removing empty entries here will ensure you don't get an empty for the "Interest" line, where you have 'Hiking' followed by a comma, followed by nothing else
            parsedValues.Add(key, values);
        }

        return parsedValues;
    } 
```

或者，如果您认为可读性和可维护性不如大量调用链那么酷：

```
 private static Dictionary<string, IEnumerable<string>> ParseValues(string providedValues)
    {
        return providedValues.Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Select(x => x.Split(':')).ToDictionary(key => key[0].Trim(), value => value[1].Split(new char[]{ ','}, StringSplitOptions.RemoveEmptyEntries).Select(x => x.Trim()));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T11:04:47.690

对于这些情况，我强烈建议您对正则表达式更加熟悉。使用常规 exp 解析“半”结构化文本非常简单且符合逻辑。

例如。这个（以及其他以下只是变体，有很多方法可以根据您的需要进行操作）

```
title:\s*(.*)\s+comp.*?:\s*(.*)\s+addr.*?:\s*(.*)\s+zip:\s*(.*)\s+country:\s*(.*)\s+inter.*?:\s*(.*)\s+topic.*?:\s*(.*) 
```

给出结果

```
1\.  Mr
2\.  abc capital
3\.  42 mystery lane
4\.  112312
5\.  Ireland
6\.  Biking, Swimming, Hiking,
7\.  Europe, Asia, Capital 
```

或者 - 对任何事情都更开放：

```
\s(.*?):\s(.*) 
```

将您的输入解析为如下所示的漂亮组：

```
Match 1
1\.  Title
2\.  Mr
Match 2
1\.  Company
2\.  abc capital
Match 3
1\.  Address1
2\.  42 mystery lane
Match 4
1\.  Zip
2\.  112312
Match 5
1\.  Country
2\.  Ireland
Match 6
1\.  Interest
2\.  Biking, Swimming, Hiking,
Match 7
1\.  Topic of Interest
2\.  Europe, Asia, Capital 
```

我不熟悉c#（及其正则表达式方言），我只是想唤醒你的兴趣......

# c# - 当需要组合两个可枚举时如何使用并行linq

> ID：11568177
> 
> 赞同：0
> 
> 时间：2012-07-19T19:46:39.683
> 
> 标签：c#, .net, linq, c#-4.0, plinq

我有两个想与 PLINQ 一起使用的枚举，如何正确组合它们？他们来了：

```
List<Message> messageList=...;

IEnumerable<int> lineNums=Enumerable.Range(1,messages.Count);
IEnumerable<Message> messages=messageList; 
```

简而言之，我想并行应用一些复杂的耗时格式并将行号映射到消息。这就是我的意思（没有行号），因为我不知道如何将它们整合到这个表达式中：

```
var formattedLine=messageList.AsParallel().AsOrdered().Select(message =>
  {
    ... // Some work here to be done in parallel
    return string.Format(...); // Some formatting here of message
  } 
```

然后，我将通过简单的 foreach 使用格式化的结果：

```
foreach (var line in formattedLine)
  ... 
```

好吧，以上内容对消息有好处，但我想在其中包含一些格式化的 lineNums 从可枚举中与消息一一对应。我不能只在 lambda 中互锁递增一个整数，因为我不会得到有序的结果。所以，我想基本上我需要两个可枚举的一对一映射作为我的参数到 lambda。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:53:25.000

使用[带有项目和项目索引的选择重载](http://msdn.microsoft.com/en-us/library/dd413608.aspx)，如下所示：

```
var formattedLine=messageList.AsParallel().AsOrdered().Select((message, index) =>
{
    ... // Some work here to be done in parallel
    return string.Format(...); // Some formatting here of message using index
}); 
```

# php - PDO - 动态 bindParam - 值 0 奇怪的结果

> ID：11568181
> 
> 赞同：0
> 
> 时间：2012-07-19T19:46:58.593
> 
> 标签：php, mysql, pdo

因此，感谢这里用户的建议，我已经开始将我的代码移植到 PDO。一切都很顺利，直到出现了一个小问题。

我有一个小函数来处理我的数据库调用，它基本上生成 SQL 查询，执行 $dbh->prepare ($sql)，然后循环并绑定值，然后执行查询。

```
$sth = $dbh->prepare ($sql);
// bind parameters
if ($action == 'insert' || $action == 'update') {
    reset ($array);
    foreach ($array as $key => &$value) {
        if ($value != 'NOW()') {
            $sth->bindParam (':' . $key, $value);
        }
    }
}
$sth->execute(); 
```

这工作正常，直到我需要插入一个值“0”。没有返回错误，但插入到 db 中的值原来是表中列类型的最大值，在本例中为“137”。

我希望有人可以解释正在发生的事情并提供解决方案，而不是仅仅给我一个修复，这样我才能更好地理解这一点。

干杯，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:53:35.017

您没有正确绑定参数，请查看[手册](http://php.net/manual/en/pdostatement.bindparam.php)。
你应该使用：

```
$sth->bindParam (':' . $value, [PARAM TYPE - example: PDO::PARAM_INT]); 
```

# c++ - 每次我重新编译和运行程序时从 C++ 中的 HANDLE 获取不同的地址？

> ID：11568185
> 
> 赞同：1
> 
> 时间：2012-07-19T19:47:14.470
> 
> 标签：c++, memory, process, handle

我试图通过获取句柄并打印其值来获取 C++ 中进程的起始地址。我尝试通过作弊引擎获取蜘蛛纸牌的起始地址，它给了我“300905A4D”（目前是）。我试试

```
HANDLE pHandle = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid) 
```

每次我重新启动我的 C++ 程序时，它都会给我一个不同的号码/地址。我让蜘蛛纸牌一直在运行，作弊引擎一直给我相同的起始地址，但是当我打印时

```
cout << &pHandle; 
```

我的 c++ 程序每次都给我一个不同的数字。我在这里做错了什么？此外，我的 C++ 代码工作正常。我可以写到内存和所有这些，我只是想知道为什么我没有得到相同的地址作弊引擎给我，以及为什么它每次都是不同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:50:14.790

因为您正在打印进程句柄变量的地址，并且每次运行程序时帽子可能会有所不同——操作系统会在每次启动应用程序时决定将进程及其变量放在内存中的位置。

# mysql - 通过链接两个表来计算每个用户的转发次数

> ID：11568187
> 
> 赞同：2
> 
> 时间：2012-07-19T19:47:23.947
> 
> 标签：mysql

我有以下表格：

```
tweets               retweets
-----------------    ----------------
user_id  retweets    user_id (etc...)
-----------------    ----------------
1        0           1
2        0           1
                     1
                     2
                     2 
```

我想计算每个用户的转发次数并相应地更新 tweets.retweets：

```
UPDATE users 
SET retweets = (
  SELECT COUNT(*) FROM retweets WHERE retweets.user_id = users.user_id
) 
```

我已经两次运行此查询，但它超时（在不是那么大的表上）。我的查询有问题吗？

另请参阅 SQL Fiddle（尽管它显然不允许`UPDATE`语句）：[http ://www.sqlfiddle.com/#!2/f591e/1](http://www.sqlfiddle.com/#!2/f591e/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:58:53.560

此解决方案应该比使用子查询来获取每个用户的推文计数要快得多（您的相关子查询将为***每个***用户执行）：

```
UPDATE users a
LEFT JOIN
(
    SELECT user_id, COUNT(1) AS retweet_count
    FROM retweets
    GROUP BY user_id
) b ON a.user_id = b.user_id
SET a.retweets = COALESCE(b.retweet_count, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:56:19.353

如果您的转推表没有动态变化，为什么不首先收集数据，然后像这样更新目标表：

```
create table retweets_hist AS SELECT COUNT(*) AS retweets,user_id FROM retweets group by user_id; 
```

然后

```
UPDATE users 
SET retweets = NVL(
  SELECT retweets FROM retweets_hist WHERE retweets_hist.user_id = users.user_id
),0) 
```

如果它是动态的，那么我认为使用触发器会更好。

这里的主要问题是**当有一个从未转发过的用户**计算它的转发是耗时的。

在回答您的问题时，是的，计数只需要一小部分，但计数从未存在过的东西需要时间！这就是问题！

愿这个有更好的时机：

```
 UPDATE users 
    SET retweets = NVL(
                       SELECT retweets 
                         FROM retweets 
                        WHERE retweets.user_id = users.user_id),0)
  WHERE EXISTS(select * 
                 FROM retweets 
                WHERE retweets.user_id = users.user_id) 
```

但是话又说回来，您必须将“**永不转发**”更新为零。

**关键字 EXISTS 在 Oracle 我不知道 mysql 是否支持

# c++ - 将指向包含向量的对象的指针传递给 dll 函数

> ID：11568191
> 
> 赞同：1
> 
> 时间：2012-07-19T19:47:46.843
> 
> 标签：c++, object, dll, vector

我有一个想法来创建一个可以配置的报表打印对话框，例如，我在上面创建了一个列表框，读取在数据库中注册的可用报表。然后，用户只需单击列表框中的一项，单击打印（为了这个问题，我们省略任何报告参数）。添加任何新报告就像在数据库中注册一个新的 dll 一样简单。所有报告 dll 都应该有一个通常命名的 PrintReport 函数。

此外，对于编写这些 dll 的程序员来说，打印应该很容易。他获得了一个指向可以用于 gdiplus 绘图的对象的指针。

这是我所做的：

*   创建了所说的对话框
*   创建了一个命名空间（PRINTOUT）和其中的一些类（其中一个是 Print，它包含完全初始化的 Gdiplus::Graphics 对象和一个指向用于打印预览的元文件的指针向量）
*   在 dll 中创建了这个通用函数，声明为：

    ```
    extern "C" __declspec(dllexport) int PrintReport(PRINTOUT::Print *prn, LONG_PTR ReportData); 
    ```

*   然后我创建了一个对象并以下列方式调用 dll 库：

    ```
    typedef BOOL (*tFUNC)(PRINTOUT::Print *, LONG_PTR);
    tFUNC fFUNC=reinterpret_cast<tFUNC>(GetProcAddress(LibInst, "PrintReport"));
    //as a pointer, because i will delete it before unloading a dll. Dll loading code omitted.
    PRINTOUT::Print *prn=new PRINTOUT::Print();
    //this should print using gdiplus object pointer contained in the prn
    //after printing this function just exits
    fFUNC(prn, RpData);
    //cleanup within destructor
    delete prn;
    FreeLibrary(LibInst); 
    ```

**问题：** dll 中的函数在*prn*对象中包含完全不同的向量地址，我不明白为什么。实际上早些时候我试图只声明 PRINTOUT::Print prn 并通过引用 fFUNC(&prn, RpData) 但几乎没有区别。请尝试向我解释为什么会发生这种情况。*prn*对象的地址相同，但其内脏的地址不同。

问候风筝

# xml - 反转 XML 站点地图

> ID：11568194
> 
> 赞同：1
> 
> 时间：2012-07-19T19:48:00.720
> 
> 标签：xml, sitemap

与客户和大型网站合作。他向我发送了 XML 站点地图，但其中充满了博客文章、类别和页面。我可以在技术上导航它，但它的长度为 10k 行。

有没有一种工具或方法可以简单地将所有页面 URL 放在一个漂亮的列表中？也许使用 UL / LI 来识别父母/孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:53:50.297

XML 站点地图有很多 XSL 样式表。只是谷歌它。但是，这是一个不错的[http://yoast.com/xsl-stylesheet-xml-sitemap/](http://yoast.com/xsl-stylesheet-xml-sitemap/)

# html - 在 DIV 中居中背景图像

> ID：11568202
> 
> 赞同：1
> 
> 时间：2012-07-19T19:48:19.733
> 
> 标签：html, css

使用 CSS，如何在 DIV 中垂直和水平居中背景图像？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T19:49:35.600

```
div { background-position: center center; } 
```

# macos - 如何在 XCode 中设置 OSX 应用程序停靠图标？

> ID：11568203
> 
> 赞同：2
> 
> 时间：2012-07-19T19:48:20.530
> 
> 标签：macos, cocoa, icons, xcode4.3

到目前为止，我发现的唯一可行的解​​决方案是使用：

```
[NSApp setApplicationIconImage: myImage]; 
```

但是这个消息是在默认图标已经在扩展坞中之后发送的，所以它不起作用：图标最初设置为默认应用程序图标。我还没有找到发送此消息的正确位置。

我已阅读：[如何在 Xcode 中设置 Mac 应用程序的图标？](https://stackoverflow.com/questions/6337787)但对于 XCode 4.3 来说似乎有点太旧了

设置停靠图标的标准方法是什么，更重要的是，在文档中的哪个位置进行了描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:03:06.197

前两天把4.3废了，所以用4.5开发者预览来解释，不过应该差不多吧。

1.  打开你的项目
2.  在左侧检查器中，确保您在项目导航器中
3.  单击应该像您的项目一样命名的顶部节点
4.  middel 部分现在应该显示您项目的一些摘要
5.  在“目标”下单击您的项目名称
6.  中间部分现在应该显示一些选项卡，进入“摘要”
7.  将您的图标文件拖到应用程序图标字段。

希望有帮助。

# xcode - 如何使用文本文件作为标准输入在 XCode 4.33 中测试我的程序

> ID：11568212
> 
> 赞同：2
> 
> 时间：2012-07-19T19:49:03.887
> 
> 标签：xcode

我无法弄清楚如何使用 XCode 测试我的程序。我通常在命令行中使用 vim 进行编辑，但我正在尝试过渡到 IDE。我敢肯定有一种简单的方法可以做相当于`homework.out < testfile.txt`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:23:52.823

我还没有测试过，但是将“< testfile.txt”放在方案的命令行参数中可能会起作用。显然，对早期版本的 Xcode 做类似的事情。

# wpf - 使用样式触发器增加 UserControl 大小？

> ID：11568214
> 
> 赞同：2
> 
> 时间：2012-07-19T19:49:13.817
> 
> 标签：wpf, user-controls, triggers, wpf-controls, dependency-properties

当“IsSelected”DP 设置为 true 时，我想让自定义 UserControl 以乘数增长。我当前的 XAML 如下所示：

```
<ctrl:MyBaseControl x:Class="MyDemo.Controls.MyCustomControl"
         ...>
<ctrl:MyBaseControl.Resources>
    <Style TargetType="{x:Type ctrl:MyCustomControl}">
        <Setter Property="BorderBrush" Value="White" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="BorderThickness" Value="2" />
                <Setter Property="Width" Value="340" />
                <Setter Property="Height" Value="260" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ctrl:MyBaseControl.Resources>
<Border>
    <StackPanel>
        ...
    </StackPanel>
</Border> 
```

在上面的示例中，“MyBaseControl”扩展了 UserControl，并定义了 IsSelected DP。

这段代码目前无法正常工作，这是我的问题之一。另一个是我想将宽度/高度增加一定数量（例如：0.10）而不是将其设置为硬数字。这样我可以在源头定义控件时设置大小。

谢谢你的帮助！

**添加代码：**

MyBaseControl 代码：

```
public abstract class MyBaseControl: UserControl
{
    public static readonly DependencyProperty IsSelectedProperty =
        DependencyProperty.Register(
        "IsSelected",
        typeof(Boolean),
        typeof(MyBaseControl),
        new PropertyMetadata(null));

    public MyBaseControl() : base() { }

    #region Properties

    public Boolean IsSelected
    {
        get { return (Boolean)GetValue(IsSelectedProperty); }
        set { SetValue(IsSelectedProperty, value); }
    }

    #endregion Properties

} 
```

MyCustomControl 代码：

```
public partial class MyCustomControl: MyBaseControl
{
    public static readonly DependencyProperty IconProperty =
        DependencyProperty.Register(
        "Icon",
        typeof(ImageSource),
        typeof(MyCustomControl),
        new PropertyMetadata(null));

    public static readonly DependencyProperty BlurbProperty =
        DependencyProperty.Register(
        "Blurb",
        typeof(String),
        typeof(MyCustomControl),
        new PropertyMetadata(null));

    public MyCustomControl()
    {
        InitializeComponent();
    }

    #region Properties

    public ImageSource Icon
    {
        get { return (ImageSource)GetValue(IconProperty); }
        set { SetValue(IconProperty, value); }
    }

    public String Blurb
    {
        get { return (String)GetValue(BlurbProperty); }
        set { SetValue(BlurbProperty, value); }
    }

    #endregion Properties
} 
```

内部元素的工作触发器示例：

```
 <Style TargetType="{x:Type Border}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ctrl:MyCustomControl}}, Path=IsSelected}" Value="True">
                <Setter Property="BorderThickness" Value="5" />
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:20:46.293

试试这个

```
<ctrl:MyBaseControl.Resources>
    <Style TargetType="{x:Type ctrl:MyCustomControl}">
        <Setter Property="BorderBrush" Value="White" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="BorderThickness" Value="2" />
                <Setter Property="RenderTransform" >
                   <Setter.Value>
                       <ScaleTransform ScaleX="1.1" ScaleY="1.1" />
                   </Setter.Value>
                </Setter>
                <Setter Property="RenderTransformOrigin" Value="0.5, 0.5"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</ctrl:MyBaseControl.Resources> 
```

# wpf - 使用 datagrid.selecteditem 从一个 observablecollection 中 Grep 对象并将其删除到另一个集合中？

> ID：11568218
> 
> 赞同：0
> 
> 时间：2012-07-19T19:49:35.617
> 
> 标签：wpf, datagrid, observablecollection, selecteditem

我有个问题。我有两个与内容具有相同对象的可观察集合。

我使用 observablecollection 从我的数据网格中 grep 一个对象。

```
datagrid.selecteditem as object 
```

并想从第二个 observable 集合中删除它。行语句看起来像

```
obscollection.remove(datagrid.selecteditem as object); 
```

对象完全一样，但是当我计算 obscollection 时，对象并没有被删除......

我该如何解决这个问题？请不要问我为什么需要两个内容相同的集合；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:04:15.013

当您说“对象完全相同”时，您的意思是它们是等效的，还是它们是相同的实例？我的猜测是它们是等价的，但它们实际上并不是同一个对象实例。ObservableCollection 的 .remove() 方法将寻找引用相等性，因此如果它不是同一个对象实例，它将找不到您正在寻找的对象（因此不会删除它）。

我建议查看有关对象等效性的信息，[这篇文章](http://nilsnaegele.wordpress.com/2011/02/26/16-equals-object-identityequivalence-deep-copy-net/)谈到了它，[这个答案](https://stackoverflow.com/questions/112625/vs-object-equalsobject-in-net)也是如此（如果你进行搜索，还有更多）。

如果两个集合有等价的对象，但不引用同一个实例，那么有很多简单的解决方案。一种方法是实现 IComparable 接口，或者使用 LINQ 之类的东西在第二个集合中查找等效对象并手动删除它。

希望这可以帮助。

# c# - “doc”是 SQL 2008 或 C# 或实体框架的保留关键字吗？

> ID：11568219
> 
> 赞同：2
> 
> 时间：2012-07-19T19:49:37.180
> 
> 标签：c#, visual-studio-2010, sql-server-2008, entity-framework, reserved-words

我正在设计一个大型数据库，用户将在其中生成和存储文档。它有点像CMS。

我创建的表称为“Doc”，然后我有一个“DocAssets”关系，可以跟踪 Doc 中的所有内容。

Doc 表有一个 DocID ofcause。

但是当我转到实体框架模型设计器并从数据库中检索表时，我没有看到“Doc​​”作为要添加的表。

如果我将 Doc 重命名为，让我们说 MDoc 用于测试目的。从数据库更新时，该表显示得很好。如果我将其重命名为 Doc，它将从表列表中消失。

现在，如果它是保留字，我会想出一些其他的命名策略，但是 - 是我，它是一个错误还是它是一个保留字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:51:24.650

[不](http://msdn.microsoft.com/en-us/library/ms189822.aspx)，这不是保留字。

“更聪明的问题”应该是：`what would cause a table not to show up?`. 现在您已经假设它是由它的名称和对保留字的提示引起的。这可能会让那些试图帮助你的人，也包括你自己，一开始就走上错误的轨道。

而且，我可以补充一下，不要把它擦进去，当然你可以很容易地自己回答“保留词问题”。在 SO 上发布问题实际上比在 google 中输入“ [sql server reserved words](https://www.google.com/search?q=sql%20server%20reserved%20words) ”并单击“我感觉很幸运”或第一次点击要多。

# powershell - 将 ForEach 与 Get-ChildItem -recurse 一起使用

> ID：11568221
> 
> 赞同：18
> 
> 时间：2012-07-19T19:49:42.903
> 
> 标签：powershell

我正在尝试获取特定子文件夹结构中文件的递归列表，然后将它们保存到表中，以便我可以使用 foreach 循环来处理每一行。我有以下代码：

```
$table = get-childitem -recurse | where {! $_.PSIsContainer} | Format-Table Name, Length

foreach ($row in $table)
{
  $row[0]
  $row[1]
} 
```

如果我尝试按`$table`原样输出，它看起来很完美，所有文件都有两列数据。如果我尝试使用 foreach（如上）逐步完成，我会收到`"Unable to index into an object of type Microsoft.PowerShell.Commands.Internal.Format.FormatEndData."`错误消息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-19T20:03:52.000

我不知道您为什么要尝试逐步浏览格式化数据。但实际上，`$table`它只是字符串的集合。因此，您可以执行以下操作：

```
$table = get-childitem -recurse | where {! $_.PSIsContainer} | Format-Table Name, Length

foreach ($row in $table)
{
  $row
} 
```

但我不知道你为什么想要。如果你想对文件中的数据做一些事情，你可以试试这个：

```
$files = get-childitem -recurse | where {! $_.PSIsContainer}
foreach ($file in $files)
{
    $file.Name
    $file.length
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-19T19:59:10.190

在完全处理完数据之前，切勿使用任何格式命令。格式命令将所有内容都转换为字符串，因此您会丢失原始对象。

```
$table = get-childitem -recurse | where {! $_.PSIsContainer}
foreach($file in $table){
    $file.Name
    $file.FullName
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-11T17:21:56.943

刚才我正在清理一些配置文件，并在我的过程中发现了这篇文章，并想我会分享我如何循环遍历 get-childitem 的结果（我认为 ls 只是 gci 的别名？）。希望这可以帮助某个地方的人。

```
$blob = (ls).name 
foreach ($name in $blob) { 
get-childitem "D:\CtxProfiles\$name\Win2012R2v4\UPM_Profile\AppData\Local\Google\Chrome\User Data\Default\Default\Media Cache\f_*" -erroraction 'silentlycontinue'|remove-item -force -recurse -confirm:$false 
} 
```

# python - Python：又一个 AttributeError：“模块”对象没有属性

> ID：11568223
> 
> 赞同：4
> 
> 时间：2012-07-19T19:49:49.823
> 
> 标签：python, attributeerror

我尝试阅读其他一些问题，但仍然无法正常工作。

基本上，我使用一个名为 time_string() 的快速而肮脏的函数来以我想要的方式格式化字符串中的日期和时间。如果我直接运行 time_string，它工作正常。如果我从另一个函数调用它，我会得到一个 AttributeError。

**时间字符串**

```
import time
def time_string(): #Never mind the unreadable formatting
    return str(time.localtime().tm_hour)+':'+str(time.localtime().tm_min)+':'+str(time.localtime().tm_sec)+\
           ' '+str(time.localtime().tm_year)+'/'+str(time.localtime().tm_mon)+'/'+str(time.localtime().tm_mday)

if __name__ == '__main__':
    print time_string() 
```

**直接运行 time_string**

> 2012/7/19 13:46:13

**其他功能**

```
from misc.time_string import time_string
def main():
    print time_string()

if __name__ == '__main__':
    main() 
```

**运行其他功能**

> 回溯（最后一次调用）：文件“#Filepath#”，第 10 行，在 main() 文件“#Filepath#”，第 7 行，在主打印 time_string() 文件“#Filepath#”，第 9 行，在 time_string ' '+str(time.localtime().tm_year)+'/'+str(time.localtime().tm_mon)+'/'+str(time.localtime().tm_mday) AttributeError: 'module' 对象有没有属性“本地时间”

我假设它的一些问题是时间没有被导入或其他东西，但它让我难以置信

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T20:20:46.650

问题是您在`time.py`运行脚本的目录中有或曾经有一个文件，导致`time`导入了错误的模块。

即使您删除了该`time.py`文件，仍然`time.pyc`会导入一个已编译的文件。

# installation - 在 Fedora 16 上安装 gcc-4.7 仍然显示 gcc-4.6

> ID：11568227
> 
> 赞同：0
> 
> 时间：2012-07-19T19:49:59.877
> 
> 标签：installation, fedora16, gcc4.7

我从源代码在 Fedora 16 上构建并安装了 gcc-4.7。但是当我去安装目录（/opt/gcc-4.7.0/bin）并查询版本`g++ -v`时，我得到了`gcc version 4.6.3 ...`。我在配置过程中没有使用任何后缀`-4.7`，所以我安装的二进制文件是`g++`. 安装后是否需要任何其他配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:26:06.413

你检查路径了吗？

> 哪个 gcc /usr/bin/gcc

要将其更改为 /opt/gcc... 您可以设置 PATH 变量：

> 导出 PATH=/opt/gcc-4.7.0/bin:$PATH

..或创建一个别名，或将 CC 和 CXX 变量设置为指向您的 gcc 和 g++，然后任何 ./configure / cmake / jam / 等都应该获得在 CC/CXX 中声明的 gcc。

# c# - 需要深入了解这个新错误意味着什么？

> ID：11568228
> 
> 赞同：0
> 
> 时间：2012-07-19T19:50:08.797
> 
> 标签：c#, .net, debugging, error-handling

这是一个 .NET 错误：

```
Error Message: String was not recognized as a valid Boolean.
Error Source : mscorlib 
```

这听起来可能有点神秘，但这就是我要展示的全部内容。如何追溯发生的事情......我真的需要帮助，如果它以前没有出现过，怎么会出现，尽管应用程序是相同的。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T19:54:18.037

使用时会发生此错误，[`bool.Parse()`](http://msdn.microsoft.com/en-us/library/system.boolean.parse.aspx)并且该方法的输入无法转换为布尔值 true/false。

例如：

```
string testBool = "true";
bool validBool = bool.Parse(testBool);
// this passes fine

testBool = "asdf";
validBool = bool.Parse(testBool);
// Exception: String was not recognized as a valid Boolean. 
```

如果您使用的是 .NET 4.0 或更高版本，则可以[`bool.TryParse()`](http://msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx)改用；如果接收到无效输入，它不会抛出异常。否则，将语句包装在 a`try / catch`中以使用它。

# javascript - 来自python的javascript可读的json

> ID：11568232
> 
> 赞同：9
> 
> 时间：2012-07-19T19:50:28.567
> 
> 标签：javascript, python, django, json

我的视图计算一个 json 并输出 a `json.dumps()`，我将它作为字典 key 传递`data`。我试图将它传递给我的模板中的脚本元素，但是在渲染时，浏览器将它作为一个 Python 转义字符串获取，该字符串`{&quot;nodes&quot;: [{&quot;count&quot;:......`对于 javascript 是不可读的。我需要的是 python 将其作为 JS 转义字符串发送，类似于 this `{"nodes": [{"count":......`。我试过了`str(data)`，`eval(data)`但没有成功。基本上我需要 python 来发送字符串，就好像它正在将它打印到控制台一样。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T20:04:26.103

如果我理解得很好，您想在模板中使用 json。为此，您必须禁用转义，例如这样。

```
{% autoescape off %}
var x={{json_var}}
{% endautoescape %} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-19T21:06:20.763

请注意，而不是使用

```
{% autoescape off %}
    {{ my_json }}
{% endautoescape %} 
```

您可以简单地使用过滤器：

```
{{ my_json|safe }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T19:58:25.773

这对我有用：

```
return HttpResponse(json.dumps({'foo' : 'bar'}, ensure_ascii=False),
    mimetype='application/json') 
```

# android - 无法使用 Cordova 1.9.0 和 Android Jelly Bean 编辑 input type="text" 或 textarea

> ID：11568239
> 
> 赞同：15
> 
> 时间：2012-07-19T19:50:57.727
> 
> 标签：android, cordova

我刚拿到我闪亮的新 Nexus 7，正在玩 Cordova (Phonegap)。我创建了一个带有几个文本输入字段和一个文本区域的简单页面。在我的 iPhone 上，我可以单击文本字段，然后键盘会出现，我可以编辑文本。在我运行 4.1.1 Jelly Bean 和 Cordova 1.9.0 的 Nexus 7 上，键盘出现，但是当您键入时，文本字段或文本区域中没有显示任何内容。

我很确定我的代码很好，因为它可以在 iPhone 和 Android 2.3.5 上运行，但这里是有问题的代码段，以防万一：

```
 <body onload="onBodyLoad()">
  <div data-role="page" id="mainpage"> 
      <div data-role="header" data-theme="a"> 
          <h2>Lightweight</h2>
      </div>

      <div data-role="content">
        <div>
          <a href="#" data-role="button" data-icon="check" data-iconpos="bottom" data-theme="b" onClick=onClickInterrogate()>Interrogate</a>
        </div>

          <div align="center">
              <a href="#" data-role="button" data-inline="true" data-icon="forward" data-theme="b" onClick=downloadFile()>Send</a>
              <a href="#" data-role="button" data-inline="true" data-icon="gear" data-iconpos="right" data-theme="b" onClick=onClickSettings()>Settings</a>
          </div>

          <div align="center">
              <label for="serverUrl">Server URL:</label>
              <input type="text" name="name" id="serverUrl" value="urlGoesHere"/>
              <label for="zipFile">Zip File:</label>
              <input type="text" name="name" id="zipFile" value="tran1.zip"/>
          </div>
            <div data-role="fieldcontain">
                <label for="textarea">Textarea:</label>
                <textarea name="textarea" id="textarea">urlGoesHere</textarea>
            </div>
    </div>
      <div data-role="footer"> 
          <h1> &copy; 2012 Company Name </h1>
      </div>
  </div> 
```

我刚刚在 Android 2.3.5 上尝试过，效果很好。有人经历过类似的事情吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T21:10:30.803

该问题在 2.1.0 中也仍然存在。

这是我修复它的方法。

**去掉**下面的 CSS 规则，你就可以愉快地在输入元素中打字了。

```
-webkit-user-select: none; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T18:52:11.503

Phonegap 刚刚发布了 2.0。它已经解决了键盘的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-08T10:50:04.680

我也必须将我的应用程序与浏览器一起使用，并且存在同样的问题。只能在 textarea 上解决此问题：

```
*{
    -webkit-touch-callout: none;
    -webkit-user-select: none; 
}
textarea
{
    -webkit-user-select: auto !important;
} 
```

它也适用于jquery mobile。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:32:02.610

-webkit 用户选择：无；这对我有用。我完全迷失了几个小时尝试输入字段参数的变化，没有其他工作。(phonegap 2.5.0 / 安卓 4.1.1)

# asp.net - 加密 Web.config 部分

> ID：11568240
> 
> 赞同：1
> 
> 时间：2012-07-19T19:51:01.963
> 
> 标签：asp.net, encryption, web-config

我已经阅读了有关在 ASP.net 项目中加密 web.config 部分的 aspnet_regiis，但我很困惑这是如何工作的，因为解密密钥必须以明文形式存在于实际服务器上的某个地方。

理想情况下，我希望使用 AES 进行加密，但这需要将 aes 密钥以纯文本本身的形式添加到 web.config，这对我来说似乎没用。（来自[https://stackoverflow.com/a/8777147](https://stackoverflow.com/a/8777147)）

也许我遗漏了一些东西..有人可以解释这个加密过程实际上是如何安全的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:48:10.327

如果您能够登录到机器上的会话并可以访问密钥，那么 aspnet_regiis 加密很容易解密。

这可以防止有人可以查看文件但无法登录机器的情况以及解密密钥被正确 ACL 分配给一组已知用户的情况。

在底层它使用 DPAPI 和机器上下文特定信息。我相信您也可以使用用户配置文件进行加密，在这种情况下，没有其他用户可以解密它。

以下是一些有用的链接：

[http://weblogs.asp.net/owscott/archive/2005/07/29/421063.aspx](http://weblogs.asp.net/owscott/archive/2005/07/29/421063.aspx)

[http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx](http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:10:52.513

您必须先创建一个密钥，然后在 web.config 中使用此密钥

可以在这里找到详细的解释：[msdn microsoft](http://msdn.microsoft.com/en-us/library/ms998283.aspx)

网络农场场景下的一个是最实用的。

如果您在 web.config 中有很多密码等，我认为加密它们很有用。

# android - 在Android中从包中抑制吐司

> ID：11568243
> 
> 赞同：9
> 
> 时间：2012-07-19T19:51:09.377
> 
> 标签：android, logcat, toast

我正在开发一个 Android 应用程序，我正在尝试使用`Toast`. 我`Toast`在其他项目中使用了 s 并且一切正常，但是在这个应用程序中，当`Toast`应该出现时，它没有这样做，并且 Logcat 显示下一条消息： `Suppressing toast from package com.xxxxxxx by user request.`

我正在使用下一个代码创建吐司：

```
Context context = xxxxxxx.this;
CharSequence text = "Hello toast!";
int duration = Toast.LENGTH_SHORT;
Toast toast = Toast.makeText(context, text, duration);
toast.show(); 
```

我也尝试使用`getApplicationContext()`and设置上下文`getBaseContext()`，但不起作用。

任何人都知道如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-13T07:54:37.470

转到应用程序的 App-Info 屏幕（在 Android 4.0 中长按应用程序并将其拖到顶部）并确保选中“显示通知”复选框。否则你的 Toasts 将被抑制。

# python - 使用 PyMongo 将多个文本文件加载到 MongoDB

> ID：11568246
> 
> 赞同：1
> 
> 时间：2012-07-19T19:51:16.383
> 
> 标签：python, mongodb, pymongo

我目前正在尝试将*几个*文本文件加载到 MongoDB 中（它们是 JSON 格式）。

我尝试使用 OS walk，但我似乎遇到了麻烦。我目前的方法是：

```
>>> import pymongo
>>> import os
>>> import json
>>> from pymongo import Connection
>>> connection = Connection()
>>> db = connection.Austin
>>> collection = db.tweets
>>> collection = db.tweet_collection
>>> db.tweet_collection
Collection(Database(Connection('localhost', 27017), u'Austin'), u'tweet_collection')
>>> collection
Collection(Database(Connection('localhost', 27017), u'Austin'), u'tweet_collection')
>>> tweets = db.tweets
>>> tweet = open(os.path.expanduser('~/Tweets/10_7_2012_12:09-Tweets.txt'),'r')
>>> for line in tweet:
...      d = json.loads(line)
...      tweets.insert(d)
... 
```

用于插入单个推文。我希望能够打开多个文件并运行同一段代码，即自动将 JSON 转换为 python 字典并将其插入集合的 for 循环。

有没有人有一个如何做到这一点的可靠例子，并附有解释？

当我们讨论这个话题时，我试图在对数据库了解不多的情况下使用 MongoDB（我知道这很愚蠢），但是 MongoDB 可以同时支持多个数据库实例，并存储集合，它们是组的文档，您可以插入单个文档，对吗？

（另外，请忽略集合 tweets 和 tweet_collection 之间的不一致。我只是在尝试以获得更好的理解）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T21:19:13.357

**未经测试**

```
from glob import iglob
import os.path
import pymongo
import json

for fname in iglob(os.path.expanduser('~/Tweets/*.txt')):
    with open(fname) as fin:
        tweets = json.load(fin)
        for tweet in tweets:
            db.tweets.insert(tweet) 
```

这会遍历 '~/Tweets/*.txt' 中的所有文件名，打开它，然后将文件中的 1 条或多条推文加载到 Python 字典中——`.load`注意`.loads`使用`.load()`了while`.loads()`需要一个字符串。然后对于每条推文，将其插入数据库。（请注意，我使用`db.tweets.insert`而不是`tweets = db.tweets`因为我个人发现“db”前缀提醒它是数据库操作而不是其他对象）

至于您对 MongoDB re: DB's/collections/documents 的理解 - 是的，您是正确的。

# sql-server-2008 - Select 语句中的条件….. T SQL

> ID：11568247
> 
> 赞同：0
> 
> 时间：2012-07-19T19:51:23.683
> 
> 标签：sql-server-2008, tsql, bit-manipulation

我有一个 table1，列为 C1、C2、C3 和 C4

所有这些列都存储位值（真或假）。

如何编写一个使用这些列上的逻辑操作并得到最终结果的选择查询？

前任。：

```
Select ((C1 OR C2) AND (C3 OR C4)) AS FinalResult
from table1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:58:07.133

列支持[位运算符](http://msdn.microsoft.com/en-us/library/ms176122%28v=sql.100%29.aspx)`bit`：

```
Select ((C1 | C2) & (C3 | C4)) AS FinalResult
from table1 
```

当两个操作数都是`bit`时，结果将与应用逻辑运算符相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:53:03.533

只需测试它是否等于 1（真）：

```
Select CASE WHEN (C1 = 1 OR C2 = 1) AND (C3 = 1 OR C4 = 1) THEN 1 ELSE 0 END AS FinalResult
from table1 
```

# javascript - 在javascript dojo中创建对象时属性值意外变成数组

> ID：11568249
> 
> 赞同：0
> 
> 时间：2012-07-19T19:51:23.993
> 
> 标签：javascript, dojo

我的 dojo 课程中有以下功能：

```
dojo.declare("someclass", null, {

    getSomeObject: function(id, name, description) {
        console.log("id=", id, ", name=", name, ", description=", description);
        var newObj = {
            "id": id,
            "name": name,
            "description": description
        };
        console.log("newObj=", newObj);
        return newObj;
    }

}); 
```

这很好，直到我升级了我正在开发的产品。当我现在运行代码时，以某种方式在“newObj”内部，所有属性值都转换为数组 - 即，当“123”作为 id 值传递给函数时，在 newObj 内部，“id”属性值为 [“123”]。

我尝试过使用不同的方法来创建对象 - 使用“new Object()”等。似乎没有任何帮助。当我在旧产品中运行相同的代码时，它按预期工作！！！

这是 Google Chrome 控制台的输出——

```
id= 5962960 , name= sng2 , description= test
newObj= 
Object
_RI: true
description: Array[1]
id: Array[1]
name: Array[1]
__proto__: Object 
```

有什么帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:37:14.457

我想你正在使用`ItemFileReadStore`or `ItemFileWriteStore`。那么这是绝对正常的，这些存储在内部使用数组。要获得您应该按照文档中的建议执行的值：

```
 store.getValue(storeItem, "property"); 
```

或者，如果您确定属性中表示的值，您可以安全地进行类型转换`+ ""`

# jquery - 在 JQuery Mobile pageshow() 事件中访问 JSON 数据

> ID：11568257
> 
> 赞同：0
> 
> 时间：2012-07-19T19:52:24.480
> 
> 标签：jquery, json, jquery-mobile, initialization, undefined

我正在开发一个单页 JQuery Mobile 网站。在加载 JSON 数据并在客户端操作 DOM 时，JQuery 初始化最初设置为 false。加载内容并操作 DOM 后，初始化 JQuery Mobile。

初始化后，我计划使用 Ben Alman 的 replaceText 插件将 JSON 放入输出的 HTML 中的一些占位符中，因此像“XXFIRST_NAMEXX”这样的占位符变成了“John Smith”。

我还没有得到替换部分 b/c 我无法从 JQuery Mobile 的 pageshow() 事件中访问 JSON 数据，即使在加载页面的事件序列中触发的最后一个事件也是如此。

下面是我的代码的简化和注释版本。我正在使用 JQuery 1.7.1 和 JQuery Mobile 1.1.0 我在这里缺少什么？谢谢！

```
// jQuery Mobile initialization
$(document).bind("mobileinit", function () {
    //prevent JQM from initializing until after content has been loaded in .getJSON callback;
    $.mobile.autoInitializePage = false;
});

$( document ).bind( "pageshow", function( event, data ){
    console.log('pageshow fires'); //fires 4th

    //DROP-INS
    //need to replace text within manipulated and initialized html
    var resplaceScope, strDisplayName, strSchoolName, strOfferTitle; 
    replaceScope = $('body *');
    //collect variables from json data
    strOfferTitle = data.content.offer_vars.offer_title; //ERROR Uncaught TypeError: Cannot read property 'offer_vars' of undefined 
    replaceScope.replaceText( /XXOFFER_TITLEXX/gi, strOfferTitle );
});

$(document).ready(function(){

    console.log('document.ready fires'); //fires 1st

    $.getJSON('io_content.json', function(data) {
        console.log('getJSON fires'); //fires 2st
        getContent(data);
        // ... once code is manipulated by getContent, Jquery is ready to initialize
        $.mobile.initializePage();
    });

    function getContent(data){
        console.log('getContent fires'); //fires 3rd
        // ... code to manipulate content client side before jquery mobile initializes
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:26:25.000

我不完全确定发生了什么，但是您是否期望传递给“pageshow”回调的“data”参数与“getJSON”回调中的“data”变量相同？它们是恰好都被命名为“数据”的不同对象。来自“pageShow”的那个只有一个“prevPage”属性，其中包含对 DOM 元素的引用，该元素代表刚刚导航离开的页面。getJSON 回调中的那个具有您从数据源获得的实际数据；一旦回调完成执行，它就消失了。

如果无法在 JSON 回调中完成所有这些初始化，那么您可以尝试使用 jQuery 的 data() 函数将您需要的 JSON 位存储在页面中的某个 DOM 元素上。[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:29:15.840

我很难用`data()`. 或什至`jqmData()`应该使用哪个来代替`data()`. 从文档：

> 使用 jQuery Mobile 时，应使用 jqmData 和 jqmRemoveData 代替 jQuery 核心的 data 和 removeData 方法（注意这包括 $.fn.data、$.fn.removeData 和 $.data、$.removeData 和 $ .hasData 实用程序），因为它们会自动合并命名空间数据属性的获取和设置（即使当前没有使用命名空间）。

为了克服这个问题，我将数据存储在 getJSON 回调中的 LocalStorage 中，然后可以从 pageShow 访问它

# reporting-services - 影响分组的 SSRS 指标

> ID：11568262
> 
> 赞同：0
> 
> 时间：2012-07-19T19:53:00.173
> 
> 标签：reporting-services, indicator

我正在过滤一个 tablix，然后将行（总共 3 个）和列（总共 2 个）分组，没有详细信息部分。一行只有一个分组列的适用值。分组依据将所有值放在正确的单元格中。但是，如果我添加一个指示符，则该列没有适用值的行会从另一行继承数据。添加指标所基于的字段不会进行此更改。这一行（以及其他正常工作的行）的第一列中的指标为空值，即它不应该显示。

数据集：

```
+---------+---------------+-----------+---------+
| Family  |  Description  |  Value    |Indicator|
+---------+---------------+-----------+---------+
|  A      |  Something    |   5       |    2    |
|  A      |  Another      |   2       |    1    |  
|  B      |  Yearly Plans |   63      |   null  | 
|  B      |  Weekly Plans |   4       |    2    | 
|  B      |  Yearly Qual  |   .4      |    1    | 
|  B      |  Weekly Qual  |   .2      |    1    | 
|  B      |  Purchased %  |   .76     |   null  | 
+---------+---------------+-----------+---------+ 
```

*   为 Family = B 过滤 tablix
*   行组：=iif(Field!Description.Value like " *Plans* ","Plans",iif(Field!Description.Value like " *Qual* ","Qualifying",Field!Description.Value))
*   列组：iif(Field!Description.Value like "Yearly*","YTD","Weekly")

没有指标的结果：

```
+---------------+------------+----------+
| Description   |  Weekly    |  YTD     |
+---------------+------------+----------+
|  Qualifying   |   .2       |   .4     | 
|  Plans        |    4       |   63     | 
|  Purchased %  |   .76      |          | 
+---------------+------------+----------+ 
```

带有指标的结果（基于指标字段）：

```
+---------------+--------+---+--------+---+
| Description   | Weekly |   |  YTD   |   |
+---------------+--------+---+--------+---+
|  Qualifying   |   .2   | - |   .4   | - | 
|  Plans        |    4   | + |   63   |   | 
|  Purchased %  |   .76  |   |   .4   | - | 
+---------------+------------+--------+---+ 
```

它应该是什么：

```
+---------------+--------+---+--------+---+
| Description   | Weekly |   |  YTD   |   |
+---------------+--------+---+--------+---+
|  Qualifying   |   .2   | - |   .4   | - | 
|  Plans        |    4   | + |   63   |   | 
|  Purchased %  |   .76  |   |        |   | 
+---------------+------------+--------+---+ 
```

我已经通过在具有空值的 Yearly Purchased % 行中合并来解决当前问题，但肯定还有其他问题。指标的行为方式是否会添加不属于组的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:19:08.137

我意识到了同样的事情，这可能是 SSRS 指标中的错误，作为解决方法，您可以在单元格内编写一个表达式以检查另一个单元格并检查是否有数据然后显示单元格内的值，如果没有则什么都不写.

喜欢：`=iif(count(Fields!Field1.Value)>1,"",Fields!Field2.Value)`

# c# - WaitForExit 默认浏览器

> ID：11568270
> 
> 赞同：1
> 
> 时间：2012-07-19T19:53:39.967
> 
> 标签：c#, browser, process, processstartinfo, waitforexit

我正在使用这段代码：

```
Process p = new Process();
ProcessStartInfo si = new ProcessStartInfo();
si.UseShellExecute = true;
si.FileName = Url;
p = Process.Start(si);
p.WaitForExit(); 
```

在默认浏览器中打开“Url”。我想等待用户关闭该浏览器，然后进一步执行代码。但是在 IE（我的默认浏览器）中打开 Url 后，它会抛出一个未设置为对象实例的对象引用并突出显示

```
p.WaitForExit(); 
```

问题是什么？我只想等它结束。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:24:04.423

[ProcessStartInfo.FileName](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.filename.aspx)获取或设置要启动的应用程序或文档。我所做的是通过 FileName 中的应用程序路径，因此当 Process.Start 创建它时，它会查找参数并在您的情况下创建一个实例，它不会

```
Process p = new Process();
ProcessStartInfo si = new ProcessStartInfo();
p.StartInfo = si;
si.UseShellExecute = true;
si.FileName = @"C:\Program Files (x86)\Internet Explorer\iexplore.exe";
si.Arguments = "http://www.stackoverflow.com";
p.Start();
p.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:56:53.450

```
Process.Start(new ProcessStartInfo()
            {
                UseShellExecute = true,
                FileName = "http://google.com",                
            }).WaitForExit(); 
```

# asp.net - 我的模式窗口没有将值传输到 vb.net 代码隐藏

> ID：11568273
> 
> 赞同：1
> 
> 时间：2012-07-19T19:53:58.817
> 
> 标签：asp.net, vb.net, cross-browser, modal-dialog

我正在获取用户名和密码来运行一些脚本

```
 <act:ModalPopupExtender ID="unixLoginMPE" runat="server" TargetControlID="rdoUnix"
        PopupControlID="unixPanel" BackgroundCssClass="modalBackground" CancelControlID="unixCancel" OkControlID="unixSubmit"
          />
    <asp:Panel ID="unixPanel" runat="server" 
        CssClass="modalPopup" align="center" Style="display: none">Unix Username: <asp:TextBox ID="unixName" ClientIDMode="Static" runat="server"  />
        <br />
        Unix Password: <asp:TextBox ID="unixPass" runat="server" ClientIDMode="Static" TextMode="Password"  />
        <br />
        <asp:Button ID="unixCancel" runat="server" Text="Cancel" />
        <asp:Button ID="unixSubmit" ClientIDMode="Static" runat="server" Text="Submit" OnClientClick="enableRDO()"  />
    </asp:Panel> 
```

在我的代码隐藏中，我正在做这样的事情只是为了测试这些值是否已经通过。

```
Dim UNIXPASSWORD As String = unixPass.text
                Dim UNIXUSERNAME As String = unixName.Text
                MsgBox(UNIXCOMPUTERNAME)
                MsgBox(UNIXUSERNAME)
                MsgBox(UNIXPASSWORD) 
```

我确实引用了一个脚本来启用单选按钮。我问了一个问题来帮助我解决这个问题，一切都已解决[单选按钮不会留下来检查我在选择时是否打开了模式窗口](https://stackoverflow.com/questions/11562598/radio-button-wont-stay-check-if-i-have-a-modal-window-open-up-when-it-is-select/11562667#comment15299073_11562667)

```
 <script type="text/javascript">
        function enableRDO() {
            var cancel = document.getElementById('rdoUnix');
            cancel.setAttribute('checked', 'true');
        };
    </script> 
```

出于某种原因，这些值在 Google Chrome 中传递得很好，但在 IE 中却没有。我已经在这里待了几个小时，不知道还能尝试什么……或搜索

编辑：

我仍在尝试这样做。我设置了虚拟文本框，如果可以传递给它们，我稍后会隐藏它们。我还是很迷茫……

```
<asp:TextBox ID="dummyUnixName" runat="server" />
    <asp:TextBox ID="dummyUnixPass" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:00:28.137

如果您没有执行回发或 AJAX 调用，则不会将任何内容传递给后面的代码。

调试时Console.WriteLine可以重定向到VS中的输出窗口；在生产中，它将无处可去。日志解决方案通常适用于需要了解比用户请求的页面（IIS 日志）更多的信息的 Web 应用程序。

# sql - sql server if 在内部运行存储过程时出现块错误 - 给出语法错误

> ID：11568275
> 
> 赞同：2
> 
> 时间：2012-07-19T19:54:07.287
> 
> 标签：sql, sql-server

我想要一个可重新运行的部署**脚本**。所以我在重命名之前检查表是否存在。

```
IF EXISTS ( SELECT  * FROM    sys.objects  WHERE   object_id = OBJECT_ID(N'[dbo].[Schema]')  AND type IN ( N'U' ) )  
BEGIN
sp_rename [Schema], [SchemaInfo] 
END 
```

错误是

> “sp_rename”附近的语法不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T19:57:00.150

尝试：

```
EXEC sp_rename N'Schema', N'SchemaInfo'; 
```

恕我直言，您永远不应该在没有`EXEC`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T19:56:45.127

以下列方式尝试使用 EXEC 语句：

```
IF EXISTS ( SELECT  * FROM    sys.objects  WHERE   object_id = OBJECT_ID(N'[dbo].[Schema]')  AND type IN ( N'U' ) )  
BEGIN
EXEC sp_rename [Schema], [SchemaInfo] 
END 
```

# jquery - jQuery 将一个 div 替换为另一个

> ID：11568279
> 
> 赞同：1
> 
> 时间：2012-07-19T19:54:28.317
> 
> 标签：jquery

我需要将一个 div 替换为另一个，并且我需要删除另一个容器。请看我的代码：

```
<a id="load-more" href="#">
<div class="text">Load more</div>
<div id="infscr-loading">
<img alt="Loading..." src="../loading_small.gif" style="display: none; ">
<div">No more posts to load</div>
</div>
</a> 
```

我需要这个：

```
<span class="text">Load more</span> 
```

替换为：

```
<div">No more posts to load</div> 
```

所以，我的结果应该是：

```
<a id="load-more" href="#">
<div">No more posts to load</div>
<div id="infscr-loading">
<img alt="Loading..." src="../loading_small.gif" style="display: none; ">
</div>
</a> 
```

有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T19:56:07.897

你试过了吗：

```
$('.text').replaceWith(...); 
```

[http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)上的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:08:51.767

您的标记在标签中有错误`<div">`，可能是您不小心删除了类名或 id。我假设替换 div 有一个`id`属性。

要更改`<div class="text">`位的内容，您需要执行以下操作：

```
$('div.text').replaceWith($('#replacement')); 
```

这既消除了`text`div 又将 div 移动到了`#replacement`div 的位置`text`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T15:09:08.560

```
$('div.text').replaceWith($('#replacement').html()); 
```

# visual-studio-2010 - 如何在项目模板中使用 VsixMainfest 中附加的向导程序集？

> ID：11568280
> 
> 赞同：1
> 
> 时间：2012-07-19T19:54:38.383
> 
> 标签：visual-studio-2010, visual-studio, wizard, vsix, project-template

我有一个具有程序集属性的 vsixmanifest 文件。该文件如下所示：

```
<Content>
<ProjectTemplate>Solution</ProjectTemplate>
<Assembly AssemblyName="SolutionNameWizard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1c39bfcc-223f-4c12-a5dc-55eeca7c61f7">
    Assemblies\SolutionNameWizard.dll
</Assembly> 
```

我知道程序集名称和公钥是正确的。

现在，我正在尝试在我的一个模板中使用这个程序集。现在我有：

```
<WizardExtension>
      <Assembly>SolutionNameWizard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1c39bfcc-223f-4c12-a5dc-55eeca7c61f7</Assembly>
      <FullClassName>SolutionNameWizard.IWizardImplementation</FullClassName>
</WizardExtension> 
```

有什么我想念的吗？当我运行 vsix 时，出现以下错误：

```
A problem was encountered creating the sub project 'test.Web' Error: this template
attemtped to load component assembly 'SolutionNameWizard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1c39bfcc-223f-4c12-a5dc-55eeca7c61f7'. 
```

我知道模板要求程序集在 GAC 中，当我使用 vsix 时也是这种情况吗？我希望避开 GAC 并仍然使用我的向导。

**编辑：**我按照答案中的建议将公钥更改为正确的字符串，但仍然存在问题。

**编辑2：**除了下面的有用答案之外，这是我完成此过程后写的博客。它链接到我发现非常有用的一堆文章：[https ://thebhwgroup.com/blog/2013/10/visual-studio-templates](https://thebhwgroup.com/blog/2013/10/visual-studio-templates)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T21:00:06.013

如果您的程序集是通过 VSIX 提供的，则它不需要在 GAC 中。

您的 PublicKeyToken 绝对*不*正确。当它应该是 16 个字符的十六进制字符串（8 个字节）时，您正在使用 Guid。请参见以下示例：

MyAssembly，版本=11.0.0.0，文化=中性，PublicKeyToken= **b03f5f7f11d50a3a**

`sn.exe -T MyAssembly.dll`您可以通过从 VS 命令提示符运行来找到程序集的 PublicKeyToken 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:55:00.827

如果其他人碰巧偶然发现了这个问题，我最终遵循了本指南：[http ://blog.tonysneed.com/2011/09/14/build-a-multi-project-visual-studio-template/](http://blog.tonysneed.com/2011/09/14/build-a-multi-project-visual-studio-template/)

它使这个过程（大部分）非常容易。如果有人碰巧遇到类似问题，请随时与我联系，我可以尝试分享我学到的东西。

**编辑：**这是我完成此过程后写的简短博客文章。对于偶然发现此问题的人可能会有所帮助：[http ://www.thebhwgroup.com/blog/2013/10/visual-studio-templates/](http://www.thebhwgroup.com/blog/2013/10/visual-studio-templates/)

# wcf - ChannelFactory.EndPoint 上的 Address 属性为空。端点必须有一个有效的地址

> ID：11568281
> 
> 赞同：1
> 
> 时间：2012-07-19T19:54:44.000
> 
> 标签：wcf

我有一个具有以下配置的 WCF 服务：

```
 <service behaviorConfiguration="LoginService.LoginBehavior" name="AuthenticationServices.Login">

        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
          bindingConfiguration="WebHttpEndpointBinding"
                  contract="AuthenticationServices.ILoginService">
          <identity> 
```

为了测试该服务，我创建了一个使用它的控制台应用程序。

```
 static void Main(string[] args)
        {
            LoginService.LoginServiceClient client = new WCFDriver.LoginService.LoginServiceClient();
             client.ValidateUserID();
        } 
```

现在，当我从控制台应用程序调用服务时，它会引发以下错误：

```
Unhandled Exception: System.InvalidOperationException: The Address property on C
hannelFactory.Endpoint was null.  The ChannelFactory's Endpoint must have a vali
d Address specified.
   at System.ServiceModel.ChannelFactory.CreateEndpointAddress(ServiceEndpoint e
ndpoint)
   at System.ServiceModel.ChannelFactory`1.CreateChannel() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:23:35.467

您应该为服务或特定端点指定地址（如果有多个端点）。

为服务

```
<service behaviorConfiguration="LoginService.LoginBehavior" name="AuthenticationServices.Login">

<endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
      bindingConfiguration="WebHttpEndpointBinding"
              contract="AuthenticationServices.ILoginService"/>
<host>
  <baseAddresses>
    <add baseAddress="http://localhost:5804/SimplePluginService.svc"/>
  </baseAddresses>
</host> 
```

对于端点

```
<endpoint address="myEndPoint" behaviorConfiguration="web" binding="webHttpBinding"
      bindingConfiguration="WebHttpEndpointBinding"
              contract="AuthenticationServices.ILoginService"/> 
```

端点的地址将添加在基地址之后。

如果您使用 IIS 托管 WCF 服务，则基地址将来自 IIS 的调整，而不是来自`<baseAddresses>`

# c# - 将元数据附加到 Windows 资源管理器详细信息视图中可见的 Outlook msg 文件？

> ID：11568285
> 
> 赞同：1
> 
> 时间：2012-07-19T19:55:12.710
> 
> 标签：c#, windows, shell, metadata

我找到了使用 C# 从 Outlook *.msg 文件中提取信息的方法，例如发件人、主题、收件人等。

我想将此信息保存为元数据（属性？），可以在 Windows 资源管理器详细信息视图中查看和排序为列。

1：味精文件是否已经具有我可以用于此目的的属性？

2：如果是这样，是否有使用 C# 设置这些属性的简单方法？

3：如果没有，有没有办法为msg文件注册自定义属性，然后以编程方式设置它们？

如果涉及到选项 3，我找到了以下创建 shell 扩展的指南：http: [//www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens](http://www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)

但是我还没有开始阅读它，因为我不确定它是否有必要，也不确定它是否可以作为解决方案。

谢谢！

[ETA 基于额外研究的一些后续行动]

显然，从 Windows Vista 开始，Windows Explorer 详细视图中显示的所有属性都必须存储在文件本身中。

通过“属性处理程序”可以方便地在 Windows 资源管理器中读取和写入这些属性。

在 Windows XP 中，通过“列处理程序”外壳扩展提供了一个替代选项，它允许将元数据存储在文件之外并在 Windows 资源管理器中作为列查看。这个选项从 Vista 开始就被删除了，可能是因为担心在文件传输或存储在非 NTFS 分区时会丢失与文件相关的元数据。第三方文件管理器 Explorer2 在 Windows Vista 和 7 中仍支持 Windows-XP 样式的列处理程序，但无法在 Windows 资源管理器中查看或编辑此元数据。

据我所知，Outlook *.msg 文件格式在 Windows 7 中默认没有任何与之关联的属性。可以为文件类型编写属性处理程序，但这样做超出了我的技能范围.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T17:37:07.557

这已经很老了，但我最近遇到了同样的问题。我知道 MessageSave ( [http://www.techhit.com/messagesave/](http://www.techhit.com/messagesave/) )，但是，我已经创建了所有 msg 文件，我只想将 Author 属性添加到它们。

我终于想通了，解决方案是使用 DSOFile.dll。使用 DSOFile 打开 msg，然后设置 SummaryProperties.Author 属性，然后保存文件将设置 Explorer 可以查看和过滤的属性。

虽然它不是 C# 代码，但这里是 VBA 代码，可用于 Outlook 读取 msg、获取 Sender 并将其写入 Author 文件属性。

您需要从 microsoft 获取 dsofile.dll 的副本（它们仅提供 32 位版本，因此如果您使用 64 位 Outlook，则需要 64 位版本，您可以在 google 中找到）

*   然后使用“regsvr32”注册 DLL
*   然后在 VBA 中，将“DSO OLE 文档属性阅读器”添加到引用中

最后，下面是一些更新 MSG 文件的代码：

```
Function GetSenderSMTPAddress(mail As Outlook.MailItem) As String
    'Converted from VB to VBA from here: http://stackoverflow.com/questions/24361726/how-can-i-get-the-sender-email-address-using-outlook-mailitem-in-vb-net
    Dim PR_SMTP_ADDRESS As String: PR_SMTP_ADDRESS = "http://schemas.microsoft.com/mapi/proptag/0x39FE001E"
    If mail Is Nothing Then
        Return
    End If
    If mail.SenderEmailType = "EX" Then
        Dim sender As Outlook.AddressEntry: Set sender = mail.sender
        If Not sender Is Nothing Then
            'Now we have an AddressEntry representing the Sender
            If sender.AddressEntryUserType = Outlook.OlAddressEntryUserType.olExchangeUserAddressEntry Or sender.AddressEntryUserType = Outlook.OlAddressEntryUserType.olExchangeRemoteUserAddressEntry Then
                'Use the ExchangeUser object PrimarySMTPAddress
                Dim exchUser As Outlook.ExchangeUser: Set exchUser = sender.GetExchangeUser()
                If Not exchUser Is Nothing Then
                    GetSenderSMTPAddress = exchUser.PrimarySmtpAddress
                    Exit Function
                Else
                    GetSenderSMTPAddress = ""
                    Exit Function
                End If
            Else
                GetSenderSMTPAddress = sender.PropertyAccessor.GetProperty(PR_SMTP_ADDRESS)
                Exit Function
            End If
        Else
            GetSenderSMTPAddress = ""
            Exit Function
        End If
    Else
        GetSenderSMTPAddress = mail.SenderEmailAddress
        Exit Function
    End If
End Function

Sub UpdateMsgAttributes(msgFile As String)

    Dim objDSO As Object
    Dim objVariant As Variant
    Dim oNamespace As NameSpace
    Dim strAuthor As String
    Dim item As Outlook.MailItem

    ' Open the msg in Outlook to get the attributes from the MailItem
    '     Use CreateItemFromTemplate instead of OpenSharedItem
    '     because OpenSharedItem puts a lock on the file, and the lock is only
    '     released at an indeterminate time after releasing the mailitem
    ' Set oNamespace = Application.GetNamespace("MAPI")
    ' Set objVariant = oNamespace.OpenSharedItem(msgFile)
    Set objVariant = Application.CreateItemFromTemplate(msgFile)

    If objVariant.Class = olMail Then
        Set item = objVariant
        strAuthor = item.SenderName & " <" & GetSenderSMTPAddress(item) & ">"
    End If
    objVariant.Close olDiscard
    Set objVariant = Nothing

    ' Reopen the msg with DSOFile to edit its attributes
    Set objDSO = CreateObject("DSOFile.OleDocumentProperties")
    objDSO.Open msgFile
    objDSO.SummaryProperties.author = strAuthor
    objDSO.Save

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:29:11.530

我有同样的问题，还没有解决方案，但是有一个产品（outlook 插件，没有安装其他东西）messagesave 有一个高级选项来保存数据以供资源管理器呈现/理解：作者、评论（收件人列表）、类别（A如果存在附件）。我看到了两个 .msg 文件输出的二进制差异（带有和不带有“保存数据”选项），并且差异无处不在。所以我正在查看 .msg 格式规范，看看是否有什么我可以做的。.msg 文件可以在资源管理器列中查看，即使没有安装messagesave，也可以在闪存fat32 驱动器上查看。所以我想它确实存储在 mapi 属性中，但我不知道哪个资源管理器查看了哪些...

# c# - WebSocket 中的缓存

> ID：11568289
> 
> 赞同：0
> 
> 时间：2012-07-19T19:55:25.027
> 
> 标签：c#, asp.net, caching, webforms, websocket

是否可以将 System.Web.Caching 命名空间中的类与使用 WebSockets 的 ASP.NET 应用程序一起使用？

我决定使用 ASP.net 4.0 的开源 WebSocket (SuperSocket)。System.Web.Caching.Cache 是否用于页面加载事件（例如用于 WebServices）？与 WebSocket 一样，您无需加载页面即可检索数据！出于这个原因，我认为 System.Web.Caching.Cache 不会起作用。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:10:49.263

如果由于某种原因您无法访问，请[`System.Web.HttpContext.Current.Cache`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)使用[`System.Runtime.Caching.MemoryCache`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache)

足够的缓存选项可以满足任何人的需求。

[也许是英国的东西，但不是要缓存吗？]

# objective-c - 在 UIWebView 中禁用滚动

> ID：11568290
> 
> 赞同：4
> 
> 时间：2012-07-19T19:55:26.697
> 
> 标签：objective-c, ipad, uiwebview, xcode4.2

在我的 iPad 应用程序中，我正在 UIWebView 上播放一些 PDF 和视频。我需要滚动 pdf 以阅读更多页面。但同时视频也是可滚动的，我想禁用它。我在一个网络视图上播放所有这些文件。我可以编写一个条件来禁用视频滚动并启用 PDF。但我不知道在条件内写什么。谁能帮我禁用 UIWebView 的滚动。

谢谢

个人电脑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T19:58:44.450

您可以通过以下方式禁用整个 UIWebView 的滚动：

```
webview.scrollView.scrollEnabled = NO; 
```

据我所知，不可能只为 UIWebView 的一部分禁用滚动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:12:15.883

```
webView.userInteractionEnabled = NO; 
```

请注意，此技术会禁用 Web 视图上的触摸和交互

# python - 使用线程/线程模块 python 2.7 的好处

> ID：11568291
> 
> 赞同：3
> 
> 时间：2012-07-19T19:55:28.950
> 
> 标签：python

1) 我已经读过，如果我在 python 中导入线程模块，CPU 绑定负载不会从使用这个库中看到太多好处，因为即使我在多核机器上运行代码，GIL 也会强制线程一次运行 1 个. 如果是这种情况，什么样的代码会从使用 Python 的线程库中受益？

2）如果线程库是这种情况，那么并行执行CPU密集型任务，例如两个信号的互相关，多处理模块是最好的模块吗？

为了更具体，假设我要并行化的任务是以下代码中的 for 循环，而我的机器只有 12 个内核。假设我的模板的长度约为 1000，图像的长度约为 2000，并且我有 ~1000 个信号要排序：

```
import numpy as np

###2-D array of shape (points, signals)
signals = np.load('signals.npy')

###1-D template array for cross correlation
templateSignal = np.load('template.npy')

for s in range(signals.shape[2]):
    xcorr = np.correlate(templateSignal, signal[:,s]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:02:10.147

即使使用 GIL，Python 中的线程也很有用，因为输入/输出操作不会阻塞程序。您可以在等待磁盘操作完成或等待网络事件时执行操作。

线程也在 GUI 应用程序中发挥作用，程序可以在后台执行计算时保持对用户输入的响应（感谢@FogleBird）

至于 2)，您的假设是正确的，您可以使用`multiprocessing`模块将 CPU 密集型程序传播到多个内核。请注意进程之间的通信成本。

# c# - 如何制作被点击的控件列表？

> ID：11568295
> 
> 赞同：0
> 
> 时间：2012-07-19T19:55:32.077
> 
> 标签：c#, winforms

我一直没有成功尝试制作一个包含 3 个图片框控件（图片框 1、2 和 3）的列表；并且列表需要有第二个参数为真或假。如果单击一个图片框，则布尔值为 True，其他值为 False。该列表应类似于以下内容：

```
pictureBox2, true

pictureBox1, false

pictureBox3, false 
```

现在，当我按下按钮时，我希望单击的图片框位于列表的底部。我一直在尝试对此进行编码，以便只有错误的图片框被绘制到面板上。所以这意味着 'pictureBox1 首先被绘制，然后是 pictureBox3。

```
e.Graphics.DrawImage(< pictureBox >!true, new Rectangle(< pictureBox >!true.Location, < pictureBox >!true.Size)); 
```

我没有丝毫线索来编写 List 或 paint 方法。帮助将**不胜**感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:07:29.507

你的绘画方法应该是这样的：

```
int Y = 0;
foreach(PictureBox pb in MyList)
{
    if(!pb.Visible)
    {
        e.Graphics.DrawImage(pb.BackgroundImage, new Point(0,Y));
        Y += pb.Height;
    }
} 
```

# asp.net - 当事件触发时，页面从默认值开始

> ID：11568296
> 
> 赞同：2
> 
> 时间：2012-07-19T19:55:35.457
> 
> 标签：asp.net, gridview, paging

我的网页上有一个日历，在`page_load`活动期间，我将网页设置为采用今天的日期并在 Gridview 中加载今天日期的数据。在 Gridview 中允许分页。

我还有一个`Calendar_Selectiondate`活动，当有人点击日历中的某个日期时，它会显示该日期的数据。日期值显示在会话变量中。在这种情况下，当我单击分页超链接 2 时，它将带我到当天的第二页，而不是所选日期的第二页。`Page_Load`我知道这是因为每当我单击该超链接 2 并且日期设置为今天的日期而不是选定的日期时，它都会经历事件。

```
public partial class UKMail_UKMail7Day : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Calendar.SelectedDate = DateTime.Today;
        Session["MailDate"] = Calendar.SelectedDate;
        UKMail7DayGridView.DataSourceID = "UKMail7DaySelected";
        UKMail7DayGridView.DataBind();
        //UKMail7DayGridView.DataSourceID = "UKMail7DayAllData";
        //UKMail7DayGridView.DataBind();
    }
    protected void Calendar_SelectionChanged(object sender, EventArgs e)
    {
        Session["MailDate"] = Calendar.SelectedDate;
        UKMail7DayGridView.DataSourceID = "UKMail7DaySelected";
        UKMail7DayGridView.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:02:11.190

无论什么触发回发，Page_Load 中的事件都会执行。如果您的代码应该只在第一次加载页面时发生，请将其放在 if(!Page.IsPostback) 块中。

```
void Page_Load(object sender, EventArgs e)
{

   // code that will execute on every postback, button click, etc.
   if(!Page.IsPostback)
   {
      //code that will only execute the first time the page is  loaded.
   }

} 
```

***强烈***推荐阅读：（每个 ASP.NET 开发人员都应该知道这一点。） [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

使用更新后的代码进行编辑：

```
public partial class UKMail_UKMail7Day : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostback)
        {
          Calendar.SelectedDate = DateTime.Today;
          Session["MailDate"] = Calendar.SelectedDate;
          UKMail7DayGridView.DataSourceID = "UKMail7DaySelected";
          UKMail7DayGridView.DataBind();
          //UKMail7DayGridView.DataSourceID = "UKMail7DayAllData";
          //UKMail7DayGridView.DataBind();
        }
    }
    protected void Calendar_SelectionChanged(object sender, EventArgs e)
    {
        Session["MailDate"] = Calendar.SelectedDate;
        UKMail7DayGridView.DataSourceID = "UKMail7DaySelected";
        UKMail7DayGridView.DataBind();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:58:08.817

在页面加载事件中，设置这个

```
if(Page.IsPostback)
   return; 
```

在您的任何其他代码之前执行此操作，这样它就不会在回发时执行。我希望我正确地理解了你。

# php - php连接以显示来自另一个文件的数据

> ID：11568298
> 
> 赞同：1
> 
> 时间：2012-07-19T19:55:37.630
> 
> 标签：php, mysql, while-loop, concatenation, file-get-contents

所以我在一个表中有一些我想用来连接的行。我还有一个文件，它运行一个查询来计算评论。我想从那个文件中提取那个号码。

我是直接用 html 做的，但我的网站太大了，所以我试图用 php 和 mysql 使它动态化。

因此，使用我的 Html 进行硬编码和工作：

```
<?php include_once("comments/post_title/tpost_title.php") ?> 
```

所以我想我可以将它连接起来，但由于某种原因，我的网络浏览器（chrome）认为它是一个评论。

php：

```
$query  = "SELECT post_title FROM sessions";
$result = mysql_query($query);

while($row = mysql_fetch_assoc($result))

{
    echo "<a href=\"#" .strip_tags("{$row['post_title']}"). "\">read comment";
    echo "<?php include_once(\"comments/" .strip_tags("{$row['post_title']}")."/t". strip_tags("{$row['post_title']}"). ".php\") ?>";
    echo "</a>";
} 
```

我读过“@file_get_contents”，但我对它的理解有限。据我了解，它必须设置为一个变量，然后我必须将它插入到我的 while 循环中。但是我迷失了变量如何更改到表中的下一行以提取下一个 post_title。

我想另一种选择是将在该文件中计算评论的查询放入此循环中，但随后我必须将变量放入查询中。（那是“好”的编码吗？）例如：

```
$query  = "SELECT post_title FROM sessions WHERE session = 'variable'; 
```

提前感谢您的帮助和洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:13:31.537

To read the file in the loop, you need:

```
while($row = mysql_fetch_assoc($result))
{
    echo "<a href=\"#" .strip_tags("{$row['post_title']}"). "\">read comment";

    include_once("comments/" .strip_tags("{$row['post_title']}")."/t". strip_tags("{$row['post_title']}"). ".php");
    echo "</a>";
} 
```

If the file you read isn't PHP but straight HTML, then you can use readfile() instead of include(). The syntax is the same.

To be sure, though, it would be better something like,

```
 $file = "comments/" .strip_tags("{$row['post_title']}")."/t". strip_tags("{$row['post_title']}"). ".php";
    if (file_exists($file))
        readfile($file);
    else
        echo "ERROR"; 
```

# html - 如何确保块元素在表中的同一行？

> ID：11568300
> 
> 赞同：4
> 
> 时间：2012-07-19T19:55:47.990
> 
> 标签：html, css

我有一个`<table>`where 最后一列包含一些 action `<button>`。其他列包含文本段落。因为它们包含文本，所以它们的宽度尽可能地扩展，然后文本换行。这对于除最后一列之外的所有列都很好。我不希望操作列中的按钮换行；我希望它们在一条线上。我该怎么做？

有关问题的演示，请参阅[此](http://jsfiddle.net/YJyan/2/)jsfiddle。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T19:57:41.137

就这么简单：

```
.actions {
    /* EDIT: float is not necessary in table cells – float: left; */
    white-space: nowrap;
} 
```

### 演示（分叉小提琴）

[http://jsfiddle.net/insertusernamehere/XUda2/](http://jsfiddle.net/insertusernamehere/XUda2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T19:58:24.800

关键是用`nowrap`。

```
<table>
  <tr>
    <td>Text</td>
    <td>Text</td>
    <td>Text</td>
    <td nowrap="nowrap"><button>Button</button></td>
  </tr>
</table> 
```

# jquery - 访问 jQuery 移动点击项

> ID：11568301
> 
> 赞同：0
> 
> 时间：2012-07-19T19:55:54.557
> 
> 标签：jquery, jquery-mobile

我似乎无法理解如何获取被点击的实际链接。我正在尝试制作一个小部件。这是我用来实际执行点击的代码：

```
$mID.find('a.next').on('click', function() {
    $mID.megamenu("nextMenu");
}); 
```

$mID 在哪里`$mID = $(":jqmData(role='megamenu')");`。

如何从 nextMenu 函数中访问单击的项目？

编辑：我有办法做到这一点，但这并不理想。

```
$mID.find('a.next').on('click', function() {
    $(this).addClass('next');
    $mID.megamenu("nextMenu");
    $(this).removeClass('next');
}); 
```

然后，我可以访问 $('.next') 来隔离特定实例，而不是尝试在 nextMenu 函数中访问 $(this)。如果有更好的方法可以做到这一点，请告诉我。

# spyder - 将代码中的对象带入对象检查器

> ID：11568306
> 
> 赞同：6
> 
> 时间：2012-07-19T19:56:19.437
> 
> 标签：spyder

我正在运行 Spyder 2.1.9，我很喜欢它。我喜欢对象检查器提供了多少信息，但如果我通过编辑器将它们输入我的程序或直接输入对象检查器，它只会带来有关各种对象的信息。有什么方法可以突出代码中的对象并在对象检查器中显示信息？

也作为次要问题。输入时弹出的自动填充很好（例如，如果我使用 csv 模块并且我`csv.`在编辑器中输入它会显示该模块的所有可能调用），但不适用于 Tkinter。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:15:10.250

不幸的是，您的第一个问题的答案是否定的。请参阅 Spyder 组的官方[错误报告](http://code.google.com/p/spyderlib/issues/detail?id=972)。

您可以`CTRL+I`在控制台上使用从任何对象调用检查器，也可以在编辑器中的**函数**（但不是任意对象/变量）上使用它。这是一个已知的不一致。

例如，在编辑器窗口中键入以下内容：

```
import math
x = 3.14159
y = math.sin(x) 
```

现在单击单词`math`并按 CTRL-I。什么都没发生。单击单词`sin`并按 CTRL-I。Inspector 将显示`sin()`.

现在尝试在 Spyder 的 Python 控制台中输入相同的三行代码，然后重复。您会看到单击后按 CTRL-I`math`将起作用。

# windows - 传输特定于 Windows 的宏以在 Mac Excel 上运行

> ID：11568307
> 
> 赞同：1
> 
> 时间：2012-07-19T19:56:25.030
> 
> 标签：windows, macos, excel, vba

我最近从 PC 更改为 Mac。我运行了很多宏，其中 99% 运行良好，但我有一个在 Mac 上不起作用。

它在文件中的所有工作簿上运行一组其他宏。为此，它使用如下字符串：

`Function BrowseFolder(Title As String, _ Optional InitialFolder As String = vbNullString, _ Optional InitialView As Office.MsoFileDialogView = _ msoFileDialogViewList) As String`

当我尝试在 Mac 上运行它时，它返回一个错误：

> “编译错误：变量未定义”

我想知道是否有人可以帮助我将此宏移植到 Mac 上运行。它是在 Excel 2007 Windows 上构建的，我正在尝试在 Excel 2011 Mac 上运行它。

```
Option Explicit

Function GetFolder(Optional strPath As String) As String
Dim fldr As FileDialog
Dim sItem As String
Set fldr = Application.FileDialog(msoFileDialogFolderPicker)
With fldr
    .Title = "Select a Folder"
    .AllowMultiSelect = False
     If Not IsEmpty(strPath) Then
        .InitialFileName = strPath
    End If
    If .Show <> -1 Then GoTo NextCode
    sItem = .SelectedItems(1)
End With
NextCode:
 GetFolder = sItem
Set fldr = Nothing
End Function

Private Sub test()
Dim v As Variant

'V = GetFolder()
v = BrowseFolder("Select folder")
End Sub

Function BrowseFolder(Title As String, _
        Optional InitialFolder As String = vbNullString, _
        Optional InitialView As Office.MsoFileDialogView = _
            msoFileDialogViewList) As String
    Dim v As Variant
    Dim InitFolder As String
    With Application.FileDialog(msoFileDialogFolderPicker)
        .Title = Title
        .InitialView = InitialView
        If Len(InitialFolder) > 0 Then
            If Dir(InitialFolder, vbDirectory) <> vbNullString Then
                InitFolder = InitialFolder
                If Right(InitFolder, 1) <> "\" Then
                    InitFolder = InitFolder & "\"
                End If
                .InitialFileName = InitFolder
            End If
        End If
        .Show
        On Error Resume Next
            Err.Clear
            v = .SelectedItems(1)
            If Err.Number <> 0 Then
                v = vbNullString
            End If
        End With
    BrowseFolder = CStr(v)
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:58:37.027

# javascript - 尝试使用 javascript 重定向

> ID：11568310
> 
> 赞同：0
> 
> 时间：2012-07-19T19:56:34.617
> 
> 标签：javascript, html, redirect

我对javascript很陌生，我试图根据输入类型发生不同的事件。我的 html 标头中有以下内容：

```
<script type="text/javascript">
    function validateForm(){
    var val=document.getElementsByName("destination");
    if (val == "deprecated"){
      window.location="http://website.com/";
    }
  }
</script> 
```

然后在体内，我有以下内容：

```
<select name="destination">
<option value="current_builds">Current Builds</option>
<option value="deprecated">Deprecated Files</option>
<option value="mailing_list">Mailing List</option>
</select><br/>
<input type="button" value="next >" onClick="validateForm()" /> 
```

然而，这并没有做任何事情。它只是停留在同一页面上。我还尝试通过以下方式将其包装在表单标签中：

```
<form name="my_form" onSubmit="validateForm()">
...
</form> 
```

然后有匹配的javascript：

```
var val = document.forms["my_form"]["destination"].value 
```

但这也不起作用。

任何人都看到问题是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:05:27.197

我修复了您的功能并对其进行了测试：

```
function validateForm(){
    var val=document.getElementsByName("destination");
    var theSelectedOption = val[0].options[val[0].selectedIndex].value;
    if (theSelectedOption == "deprecated"){
      window.location="http://website.com/";
    }
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T20:00:58.340

您需要从所选元素中获取值。由于 document.getElementsByName 返回一个数组，请尝试使用这个

```
var val = ​document.getElementsByName("destination")​​​​​[0].value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:00:38.413

您需要从所选选项中获取值。像这样：

```
var index = document.getElementsByName("destination").selectedIndex; 
var val=document.getElementsByName("destination").options[index].value; 
```

这将检索所选选项的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T20:01:04.363

您缺少 href 属性，您想使用：

```
window.location.href = 'URL'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T20:01:51.437

请执行下列操作

```
<select name="destination" id="destination"> 
```

你的 JavaScript

```
val=document.getElementsById("destination").value; 
```

把一个`alert(val)`在你的`if`，看看是否曾经评估为真

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T20:06:09.503

尝试使用 id 而不是 name，id 是一个独特的元素。Javascript 支持

```
var destination = document.getElementById("destination");
if (destination.options[destination.selectedIndex].value == "deprecated"){
  window.location="http://website.com/";
} 
```

**HTML**

```
<select id="destination">
    <option value="current_builds">Current Builds</option>
    <option value="deprecated">Deprecated Files</option>
    <option value="mailing_list">Mailing List</option>
</select>
<br />
<input type="button" value="next &gt;" onclick="javascript:validateForm();" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T20:19:01.567

用一点 jquery 试试这个

[使用下拉重定向](http://jsfiddle.net/slfede/Pkas9/)

```
<form name="my_form">
  <select id="destination">
    <option value="current_builds">Current Builds</option>
    <option value="deprecated">Deprecated Files</option>
    <option value="mailing_list">Mailing List</option>
  </select><br/>
  <input type="button" value="next >" id="submit">
</form> 
```

​</p>

```
$('#submit').click(
   function validateForm(){
   var e = document.getElementById("destination");
   var val = e.options[e.selectedIndex].value;

   if (val == "deprecated"){
     window.location="http://website.com/";
   }
}); 
```

# c# - 用于处理个人和经常性费用的数据库设计

> ID：11568317
> 
> 赞同：6
> 
> 时间：2012-07-19T19:57:24.997
> 
> 标签：c#, sql, design-patterns, database-design, sql-server-2008-r2

我们有一个计费系统，我们可以在其中处理个人费用以及经常性费用（订阅）。

有两个 SQL 表：

```
StandardCharges
RecurringCharges 
```

StandardCharges 表包含客户在当月购买的各个项目。

RecurringCharges 表包含按日期收费的经常性项目。当时间到来时，我们的系统会自动创建一个重复请求，该请求会在 StandardCharges 表中添加一行，并在 RecurringCharges 表中按日期将费用增加到下个月。

在每个月底，我们从 StandardCharges 表中获取每个客户的总值并创建发票。

是否有一种设计模式或另一种方式来做到这一点？这是正确的数据库设计吗？理想情况下，我想将所有费用保存在一张`Charges`表中并从那里管理经常性费用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:05:07.467

我怀疑你的设计确实是正确的。

在考虑现实世界中的数据时，将“可能的”交易（即尚未发生且可能无法实现的交易，可能是因为客户已超出其信用额度）与已承诺交易和实际交易混在一起是没有意义的.

将数据合并到单个表中也会使报告变得困难，因为您必须应用特殊的过滤条件并存储额外的元数据 - 例如 TransactionCompleted 和 TransactionIsFutureCharge。

如果我要提出一个建议，它会将 重命名`StandardCharges`为更接近它所拥有的数据`CompletedTransactions`的名称，`RecurringTransactions`例如`PendingTransactions`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:44:22.870

The current design seems reasonable to me. But if you want to merge the two tables, you could simply add a BIT column called IsRecurring or IsFuture or IsScheduled or whatever you want to use to designate the charges that would have otherwise gone in RecurringCharges. Then when your due date is hit for a recurring charge, you just insert into the same table instead of a different table. As for the invoice, you'd just add a condition to the query to filter out the charges that have the BIT column set.

# javascript - 慢 JQuery 函数

> ID：11568319
> 
> 赞同：0
> 
> 时间：2012-07-19T19:57:34.440
> 
> 标签：javascript, jquery, performance

我在 JQuery 和 JS 中有这样的功能。我有一个带有复选框的 div 列表，并将它们添加到我的列表中。这适用于 40 个 div，但有时我有 2,000 个，它会使 Chrome 崩溃并在 FF 上爬行。无论如何让这更快？

```
function AddToList()
{
    $('div[name="notadded"] input:checked').each(function(index)
    {
        var html = $(this).parents('div[name="notadded"]').html();

        //get rid of the class that is used to gather checkboxes in select/deselect
        html = html.replace('listvars', 'addedvars');

        var var_id = $(this).attr('value');

        var new_html = '<div id="added_' + var_id + '" name="added">' + html + '</div>';

        //hide the one we are adding and remove the check
        $(this).parents('div[name="notadded"]').hide();
        $('div[name="notadded"] input[value="' + var_id + '"]').attr('checked', false);

        //add the vars to the added list
        $('.addedList').append(new_html);

        step3 = '3b';
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:02:33.927

您正在执行 2000 次 DOM 操作，这不是一个好方法。尝试进行 2,000 次字符串操作和 1 次 DOM 插入。

```
function AddToList()
{
    var new_html = "";

    $('div[name="notadded"] input:checked').each(function(index)
    {
        var html = $(this).parents('div[name="notadded"]').html();

        //get rid of the class that is used to gather checkboxes in select/deselect
        html = html.replace('listvars', 'addedvars');

        var var_id = $(this).attr('value');

        var new_html += '<div id="added_' + var_id + '" name="added">' + html + '</div>';

        //hide the one we are adding and remove the check
        $(this).parents('div[name="notadded"]').hide();
        $('div[name="notadded"] input[value="' + var_id + '"]').attr('checked', false);

        //add the vars to the added list   
        step3 = '3b';
    });

    $('.addedList').append(new_html);
} 
```

此外，根据经验，取消选中 2,000 个复选框会严重占用性能。我敢打赌把这条线去掉：

```
$('div[name="notadded"] input[value="' + var_id + '"]').attr('checked', false); 
```

会改变一切。我建议将此函数重写为字符串替换，这样会快得多。

# vba - 将字符串写入excel中的单元格

> ID：11568321
> 
> 赞同：14
> 
> 时间：2012-07-19T19:57:48.997
> 
> 标签：vba, excel, excel-2007

我正在尝试向“A1”单元格写入一个值，但出现以下错误：

> 应用程序定义或对象定义的错误“1004”

我在网上尝试了许多解决方案，但没有一个有效。我使用的是 excel 2007，文件扩展名为 .xlsm。

我的代码如下：

```
Sub varchanger()
On Error GoTo Whoa
Dim TxtRng  As Range

Worksheets("Game").Activate
ActiveSheet.Unprotect

Set TxtRng = ActiveWorkbook.Sheets("Game").Cells(1, 1)
TxtRng.Value = "SubTotal"

'Worksheets("Game").Range("A1") = "Asdf"

LetsContinue:
    Exit Sub
Whoa:
    MsgBox Err.number
    Resume LetsContinue
End Sub 
```

**编辑：如果我点击警告图标然后选择显示计算步骤它工作正常，我得到错误后**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T12:08:24.283

我想你可能会被床单保护绊倒。我稍微简化了您的代码，并明确设置了对工作簿和工作表对象的引用。在您的示例中，您在设置 TxtRng 对象时明确引用了工作簿和工作表，但在取消保护工作表时却没有。

尝试这个：

```
Sub varchanger()

    Dim wb As Workbook
    Dim ws As Worksheet
    Dim TxtRng  As Range

    Set wb = ActiveWorkbook
    Set ws = wb.Sheets("Sheet1")
    'or ws.Unprotect Password:="yourpass"
    ws.Unprotect

    Set TxtRng = ws.Range("A1")
    TxtRng.Value = "SubTotal"
    'http://stackoverflow.com/questions/8253776/worksheet-protection-set-using-ws-protect-but-doesnt-unprotect-using-the-menu
    ' or ws.Protect Password:="yourpass"
    ws.Protect

End Sub 
```

`ws.Unprotect`如果我在注释掉的情况下运行 sub ，我会得到一个运行时错误 1004。（假设我已经保护了工作表并锁定了范围。）取消注释该行允许代码运行良好。

笔记：

1.  写入范围后，我正在重新设置工作表保护。如果您首先保护了工作表，我假设您想这样做。如果您稍后在进一步处理后重新设置保护，则需要删除该行。
2.  我删除了错误处理程序。Excel 错误消息为您提供了比 Err.number 更多的详细信息。一旦您的代码工作并显示您想要的任何内容，您就可以将其放回原处。显然你也可以使用 Err.Description。
3.  这种`Cells(1, 1)`符号会引起巨大的悲伤。小心使用它。`Range("A1")`对人类来说更容易解析，并且倾向于防止前额拍打错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T20:01:30.580

将 Range("A1") = "Asdf" 替换为 Range("A1").value = "Asdf"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T01:48:04.103

今晚我喝了几杯蔓越莓伏特加，所以我可能会遗漏一些东西……设置范围有必要吗？为什么不使用：

```
Activeworkbook.Sheets("Game").Range("A1").value = "Subtotal" 
```

这也失败了吗？

看起来你尝试了类似的东西：

```
'Worksheets("Game").Range("A1") = "Asdf" 
```

但是，Worksheets 是一个集合，因此您不能引用“游戏”。我认为您需要改用 Sheets 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T20:18:33.553

试试这个

`Set TxtRng = ActiveWorkbook.Sheets("Game").Range("A1")`

**添加**

也许文件已损坏 - 这在我之前已经发生过几次，唯一的解决方案是将所有内容复制到一个新文件中。

请您尝试以下方法：

*   保存一个新的 xlsm 文件并将其命名为“MyFullyQualified.xlsm”
*   添加没有保护的工作表并将其命名为“mySheet”
*   将模块添加到工作簿并添加以下过程

这运行吗？

```
 Sub varchanger()

 With Excel.Application
    .ScreenUpdating = True
    .Calculation = Excel.xlCalculationAutomatic
    .EnableEvents = True
 End With

 On Error GoTo Whoa:

    Dim myBook As Excel.Workbook
    Dim mySheet As Excel.Worksheet
    Dim Rng  As Excel.Range

    Set myBook = Excel.Workbooks("MyFullyQualified.xlsm")
    Set mySheet = myBook.Worksheets("mySheet")
    Set Rng = mySheet.Range("A1")

    'ActiveSheet.Unprotect

    Rng.Value = "SubTotal"

    Excel.Workbooks("MyFullyQualified.xlsm").Worksheets("mySheet").Range("A1").Value = "Asdf"

LetsContinue:
        Exit Sub
Whoa:
        MsgBox Err.Number
        GoTo LetsContinue

End Sub 
```

# c# - Zabbix 和时间序列数据

> ID：11568323
> 
> 赞同：0
> 
> 时间：2012-07-19T19:57:51.710
> 
> 标签：c#, .net, device, zabbix

我们应该监控和记录大约 1000 个设备（每个设备 1..4 个传感器）。如果出现任何问题，则需要 SMS 和电子邮件警报以及常用功能。

我认为我们与其在 .NET/C# 中开发整个生态系统，不如使用现有的生态系统——例如[Zabbix](http://www.zabbix.com/presentation.php)。但是没有任何更大的黑客可能吗？

我认为主要问题是这些设备是老式的并且使用 RS232 进行通信。

任何想法或任何其他灵活的监控软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:21:35.270

Zabbix 是一个很好的监控工具，并且很容易配置短信和电子邮件警报。您需要编写串行端口检查脚本，因为没有内置支持。这可能会有所帮助：[http ://ramblings.narrabilis.com/node/310](http://ramblings.narrabilis.com/node/310)

# python - 如何证明某些数据来自我的应用程序？

> ID：11568324
> 
> 赞同：2
> 
> 时间：2012-07-19T19:57:53.280
> 
> 标签：python, identity, uuid

我有一个分布式应用程序，可以从 Internet 上的特定服务发送和接收数据。当一个节点接收到数据时，有时它需要验证该数据是否与它或另一个节点先前发送的数据相关。该值还需要足够独特，以便我实际上可以期望在 24 小时内永远不会生成相同的值。

在当前的实现中，我一直在使用包含值的自定义标头`uuid.uuid1()`。我可以通过将接收到的 uuid 与 uuid.getnode() 进行比较来轻松验证该值是否来自运行的单个节点，但此实现是在我们要求此应用程序应该是多节点之前编写的。

我仍然认为某些`uuid`版本是正确的答案，但我似乎无法弄清楚如何验证传入的 uuid 值。

```
>>> received = uuid.uuid5(uuid.NAMESPACE_URL, 'http://example.org')
>>> received
UUID('c57c6902-3774-5f11-80e5-cf09f92b03ac') 
```

有什么方法可以验证`received`是用“http://example.org”生成的吗？

1.  uuid 是正确的方法吗？如果不是，那是什么？
2.  如果是这样，我什至应该在这里使用 uuid5 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:31:50.960

如果目标纯粹是在您的节点上创建一个唯一值，您不能只给每个节点一个唯一的名称并将其附加到您正在生成的 uuid 中吗？

如果您出于安全原因尝试这样做，或者您只是想要跨节点保证唯一值，我不清楚。

# r - 没有 NA 的 cbind() 时间序列

> ID：11568326
> 
> 赞同：4
> 
> 时间：2012-07-19T19:57:59.800
> 
> 标签：r, time-series

我观察到，对于重叠时间序列上的许多运算符，结果仅针对重叠部分给出，这很好：

```
> (ts1 <- ts(1:5, start=1, freq=3))
Time Series:
Start = c(1, 1) 
End = c(2, 2) 
Frequency = 3 
[1] 1 2 3 4 5
> (ts2 <- ts((7:3)^2, start=2, freq=3))
Time Series:
Start = c(2, 1) 
End = c(3, 2) 
Frequency = 3 
[1] 49 36 25 16  9
> ts1 + ts2
Time Series:
Start = c(2, 1) 
End = c(2, 2) 
Frequency = 3 
[1] 53 41 
```

但是，这似乎并非如此`cbind()`。当输出正确对齐时，`NA`为非重叠数据创建 s：

```
> (mts <- cbind(ts1, ts2))
Time Series:
Start = c(1, 1) 
End = c(3, 2) 
Frequency = 3 
         ts1 ts2
1.000000   1  NA
1.333333   2  NA
1.666667   3  NA
2.000000   4  49
2.333333   5  36
2.666667  NA  25
3.000000  NA  16
3.333333  NA   9 
```

有没有办法在`cbind()`不创建行的情况下执行此操作`NA`？或者，如果不是，那么获取结果并用 s 去除行的好方法是`NA`什么？这不是一个简单的下标问题，因为它失去了它的时间序列性质：

```
> mts[complete.cases(mts),]
     ts1 ts2
[1,]   4  49
[2,]   5  36 
```

也许有些东西`window()`，但计算窗口的开始和结束时间似乎有点恶心。欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:04:54.283

为什么不只是`na.omit`结果？

```
> na.omit(cbind(ts1,ts2))
Time Series:
Start = c(2, 1) 
End = c(2, 2) 
Frequency = 3 
         ts1 ts2
2.000000   4  49
2.333333   5  36 
```

如果你想避免`na.omit`，`stats:::cbind.ts`调用`stats:::.cbind.ts`，它有一个`union`参数。您可以将其设置为`FALSE`并`stats:::.cbind.ts`直接调用（在创建适当的参数之后）：

```
> stats:::.cbind.ts(list(ts1,ts2),list('ts1','ts2'),union=FALSE)
Time Series:
Start = c(2, 1) 
End = c(2, 2) 
Frequency = 3 
         ts1 ts2
2.000000   4  49
2.333333   5  36 
```

但`na.omit`解决方案似乎更容易一些。;-)

# list - 连接列表的有效方法是什么？

> ID：11568327
> 
> 赞同：7
> 
> 时间：2012-07-19T19:58:02.087
> 
> 标签：list, scala, concatenation

当我们有两个列表时`a`，`b`如何以一种有效的方式将这两个列表（顺序无关）连接到一个新列表中？

`a ::: b`我无法从 Scala API中找出`a ++ b`是否有效。也许我错过了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T20:10:28.863

在 Scala 2.9 中，`:::`(prepend to list) 的代码如下：

```
def :::[B >: A](prefix: List[B]): List[B] =
  if (isEmpty) prefix
  else (new ListBuffer[B] ++= prefix).prependToList(this) 
```

然而`++`更通用，因为它需要一个`CanBuildFrom`参数，即它可以返回一个不同于以下的集合类型`List`：

```
override def ++[B >: A, That](that: GenTraversableOnce[B])(implicit bf: CanBuildFrom[List[A], B, That]): That = {
  val b = bf(this)
  if (b.isInstanceOf[ListBuffer[_]]) (this ::: that.seq.toList).asInstanceOf[That]
  else super.++(that)
} 
```

因此，如果您的返回类型是`List`，则两者执行相同。

这`ListBuffer`是一个聪明的机制，因为它可以用作变异构建器，但最终会被该`toList`方法“消耗”。那么`(new ListBuffer[B] ++= prefix).prependToList(this)`，首先顺序添加`prefix`（在示例中`a`）中的所有元素，花费 O(|a|) 时间。然后它调用`prependToList`，这是一个*恒定时间*操作（接收器或`b`，不需要拆开）。因此，总时间为 O(|a|)。

另一方面，正如 pst 指出的那样，我们有`reverse_:::`：

```
def reverse_:::[B >: A](prefix: List[B]): List[B] = {
  var these: List[B] = this
  var pres = prefix
  while (!pres.isEmpty) {
    these = pres.head :: these
    pres = pres.tail
  }
  these
} 
```

因此，使用`a reverse_::: b`，这又需要 O(|a|)，因此与其他两种方法的效率差不多（尽管对于较小的列表大小，您可以节省中间`ListBuffer`创建的开销）。

* * *

换句话说，如果您*了解*和 的相对大小`a`，`b`您应该确保前缀是两个列表中*较小的一个。*如果您没有这些知识，您将无能为力，因为`size`对 a 的操作`List`需要 O(N) :)

* * *

另一方面，在未来的 Scala 版本中，您可能会看到改进的`Vector`连接算法，如[ScalaDays talk](http://skillsmatter.com/podcast/scala/fast-concatenation-immutable-vectors)中所展示的。它承诺在 O(log N) 时间内解决任务。

# ios - 新手 xcode：UILabel 为空，但不是

> ID：11568328
> 
> 赞同：0
> 
> 时间：2012-07-19T19:58:05.097
> 
> 标签：ios, null, label, uilabel

我正在阅读一个看似很简单但无法让它工作的教程。目标是在使用 IB 创建的 UI 视图中有一个标签和一个按钮。标签应该是“Hello World”，当您单击按钮时，它会将文本更改为“Hello iPhone”。当我实现代码时，标签不会改变。当我调试时，我发现标签是“null”，但我不知道为什么......我真的很感谢你的帮助。

标签具有标签值“55”。

我的代码如下所示：在接口文件中：

```
-(IBAction)buttonTapped; 
```

在主文件中：

```
-(IBAction)buttonTapped{
    UILabel *label = (UILabel*) [window viewWithTag:55];
    NSLog(@"The label's text is %s",label.text); //my debug statement

    if([label.text isEqualToString:@"Hello World"])
        label.text = @"Hello iPhone";
    else
        label.text = @"Hello World"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:18:28.293

假设您在 ViewController 中。我不知道你的窗口属性是什么。此外，您应该对字符串使用“%@”。[格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

```
-(IBAction) buttonTapped:(UIButton*)sender{    
    UILabel *label = (UILabel*) [self.view viewWithTag:55];
    NSLog(@"The label's text is %@",label.text); //my debug statement

    if([label.text isEqualToString:@"Hello World"])
        label.text = @"Hello iPhone";
    else
        label.text = @"Hello World";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:13:31.683

Reading between the lines it sounds like your action method is not being fired.

You weren't explicit in saying how you knew the label text was blank, but can we assume that you did actually get the NSLog to output its results? If you didn't then I refer to my first sentence... Check that you have wired up your Button correctly in the Interface Builder, to point to an outlet action.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T20:06:48.567

在你的@interface 你应该有：

```
IBOutlet UILabel *label; 
```

然后在您的 -(IBAction)buttonTapped 中：

```
NSLog(@"The label's text is %s",label.text); //my debug statement

if([label.text isEqualToString:@"Hello World"])
        label.text = @"Hello iPhone";
else
        label.text = @"Hello World";
} 
```

# ajax - jQuery代码没有运行

> ID：11568332
> 
> 赞同：1
> 
> 时间：2012-07-19T19:58:06.603
> 
> 标签：ajax, jquery

我在 document.ready 中有下面的代码，当我使用 Chrome 的调试器查看为什么没有发生任何事情时，我发现由于某种原因，ajax 调用被跳过了？

```
var latitude = $('#LatitudeHidden').val();
                var longitude = $('#LongitudeHidden').val();
                var from = $('#<%:FromTextBox.ClientID %>').val();
                var to = $('#<%:ToTextBox.ClientID %>').val();
                var type = $('#<%:TypeEnhancedDropDownList.ClientID %>').val();
                var specialLocation = $('#<%:SpecialLocationsEnhancedDropDownList.ClientID %>').val();

                var json = {
                    'latitude': latitude,
                    'longitude': longitude,
                    'from': from,
                    'to': to,
                    'type': type, 
                    'specialLocation': specialLocation
                };

                $.ajax({
                    type: "POST",
                    url: "List.aspx/GetFilteredLocations",
                    data: json,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    error: function(msg)
                    {
                        console.log(msg);
                    },
                    success: function(msg)
                    {
                        console.log(msg.d);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:15:39.107

It seems like it is having trouble deserializing the json data... You may need to stringify your data, even though you do have the datatype set to json. There is a js library to accomplish this. [Here is JSON js library to help](http://www.json.org/js.html)

Try this (after including the JSON library into your page)

```
 $.ajax({
     type: "POST",
     url: "List.aspx/GetFilteredLocations",
     data: JSON.stringify(json),
     error: function(msg)
     {
        console.log(msg);
     },
     success: function(msg)
     {
        console.log(msg.d);
     }
 }); 
```

# python - 高效查询图结构

> ID：11568336
> 
> 赞同：2
> 
> 时间：2012-07-19T19:58:18.443
> 
> 标签：python, sql, database, postgresql

我有一个由图表组成的数据库。我需要访问的表如下所示：

```
Sno    Source    Dest
1       'jack'   'bob'
2       'jack'   'Jill'
3       'bob'    'Jim' 
```

这里`Sno`是主键。Source 和 Destination 是 2 个非唯一数字，代表我图中节点之间的一条边。我的`Source`and`Dest`也可能是字符串，不一定是数字数据类型。我的数据库中有大约 500 万个条目，我使用 Postgresql 和 Psycopg2 for python 构建了它。

查询主键非常简单快捷。但是，我需要经常查询此数据库以获取所有`dest`连接到的特定源。现在我通过调用查询来实现这一点：

```
SELECT * FROM name_table WHERE Source = 'jack' 
```

事实证明这非常低效（每个查询最多 2 秒）并且我无法将其设为主键，因为它不是唯一的。有没有什么方法可以根据这些重复的值建立索引并快速查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:06:27.557

这应该使您的查询更快。

`CREATE INDEX table_name_index_source ON table_name Source;`

但是，您可以使用许多选项

**PostgreSQL 文档**

```
CREATE [ UNIQUE ] INDEX [ CONCURRENTLY ] [ name ] ON table [ USING method ]
    ( { column | ( expression ) } [ COLLATE collation ] [ opclass ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] )
    [ WITH ( storage_parameter = value [, ... ] ) ]
    [ TABLESPACE tablespace ]
    [ WHERE predicate ] 
```

[在他们的文档](http://www.postgresql.org/docs/9.1/static/sql-createindex.html)中阅读有关使用 PostgreSQL 进行索引的更多信息。

**更新**

如果你的桌子和你的一样*小*，这肯定会有所帮助。但是，如果您的数据集正在增长，您可能应该考虑更改架构以具有可以更有效地索引的唯一值。

# jquery - 引导模式中的 Ajax 响应

> ID：11568344
> 
> 赞同：1
> 
> 时间：2012-07-19T19:58:48.257
> 
> 标签：jquery, ajax, twitter-bootstrap, modal-dialog, response

我正在使用 twitter 引导模式和 jquery 在该模式中提交表单。在 AJAX 响应后，我无法再次提交此表单。在 AJAX 响应中，获取包含以下内容的 html 数据：

```
<form action="/foo" id="UserCommentViewForm" method="post" accept-charset="utf-8">
<input name="data[UserComment][to_email]" type="text"  id="UserCommentToEmail"/>
<div class="error_notice">Enter email</div>
</form> 
```

这是模态的内容：

```
<div id="modal_product_share" class="modal hide fade int" style="display: none; ">
<div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Info</h3>
</div>

<div class="modal-body">
    <form action="/foo" id="UserCommentViewForm" method="post" accept-charset="utf-8">
        <input name="data[UserComment][to_email]" type="text" id="UserCommentToEmail"/>
    </form> 
</div>

<div class="modal-footer">
    <a href="javascript:void(0);" class="btn btn-success" id="submit">Send</a>
    <a href="javascript:void(0);" class="btn" data-dismiss="modal">Close</a>
</div>
</div> 
```

这是我的 JS：

```
function product_share()
{
var el_body = $("#modal_product_share .modal-body");
var el_form = $("#UserCommentViewForm");
this.init = function(){
$("#submit").click(function(){
    el_form.submit();
});

el_form.submit(function(event){
    event.preventDefault();
    $.post( '/products/product_share/', el_form.serialize(), function( data )
    {
    el_body.html(data);
    });
});
};

this.init();
} 
```

在文件的开头部分是这样的：

```
$(document).ready(function() {
    obj_product_share = new product_share();
}); 
```

所以，我猜这与在 ajax 响应模态或其他东西时没有绑定表单有关......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:02:32.253

感谢我的同事，我的问题得到了解答。像魅力一样工作:)

```
function product_share(){

var obj = this;
obj.el_body = $("#modal_product_share .modal-body");
obj.button_id = '#submit';
obj.form_id = '#UserCommentViewForm';
obj.el_form = null;

obj.init = function() {

    obj.el_form = $(obj.form_id);

    $(obj.button_id).click(function(){
        obj.el_form.submit();
    });

    obj.setup_form();

};

obj.setup_form = function() {

    obj.el_form.submit(function(e){
        e.preventDefault();
        $.post( '/products/product_share/', obj.el_form.serialize(), function( data ) {
            obj.el_body.html(data);
            obj.el_form = obj.el_body.find(obj.form_id);
            obj.setup_form();
        });
    });

};

obj.init();
} 
```

# javascript - Javascript Regex：如何找到每个子表达式的索引？

> ID：11568345
> 
> 赞同：1
> 
> 时间：2012-07-19T19:58:52.640
> 
> 标签：javascript, regex

假设我有字符串：`BLAH BLAH BLAH copy 2`。我想找到这两部分的索引，“复制”这个词和一个可能跟在“复制”这个词后面的数字。

我有 regex:`/(copy)\s+([0-9]+)$/i`成功匹配上面字符串中的 copy 和 2 。如何找到数字 2 的索引？我知道我可以使用 .index 来查找匹配的测试“副本 2”的位置，但我想获得“2”的位置，以便我可以增加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:04:51.597

您应该使用正则表达式`/^(.*?copy\s+)(\d+)$/i`，然后 $1 的长度是 $2 的位置（副本号）。

**编辑：**您的测试代码是（[小提琴](http://jsfiddle.net/WnTVD/)）：

```
var str = "BLAH BLAH BLAH copy 2";
var m = str.match(/^(.*?copy\s+)(\d+)$/i);
alert("Found '" + m[2] + "' at position " + m[1].length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:08:46.853

如果稍微修改正则表达式，可以计算出数字的索引：

```
var matches = "BLAH BLAH BLAH copy 2".match(/(copy)(\s+)([0-9]+)$/i);
var numberIndex = matches.index + matches[1].length + matches[2].length; 
```

但是你真的不需要它来增加数字：

```
var matches = "BLAH BLAH BLAH copy 2".match(/(copy)\s+([0-9]+)$/i);
var incremented = (+matches[2]) + 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:11:02.607

如果您需要用递增的数字替换副本编号，请使用[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)plus 替换函数：

```
'BLAH BLAH BLAH copy 2'.replace(/(copy )(\d+)/, function (s, s1, s2) {
    return s1 + (Number(s2) + 1);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T20:21:57.697

将正则表达式更改`/(copy)\s+([0-9]+)$/i`为`/^((.*)(copy)\s+)([0-9]+)$/i`

那么 的位置`copy`是 的长度，`$2`数字的位置是 的长度`$1`。号码将在`$4`

# java - 将对象写入文件并在 Android 应用程序中搜索它们

> ID：11568346
> 
> 赞同：1
> 
> 时间：2012-07-19T19:58:55.750
> 
> 标签：java, android, database, file-io

我想创建一个允许用户输入数据的android，比如姓名和身份证号码。我想将该数据作为对象保存到文件中。我知道我可以使用我所做的 ObjectOutputStream 来做到这一点，并且它有效。但是，我也希望用户稍后回来，能够向同一个文件添加更多条目，并搜索他/她以前的条目。我知道只有 RandomAccessFile 具有该功能，但我仍然想编写对象，因为它更容易处理。

有没有人对解决此问题的最佳方法有任何提示？

我知道[这篇文章](https://stackoverflow.com/questions/6246703/advanced-java-file-i-o-tutorials-tips-advice)，但我不确定是否可以在 android 上使用那里提到的库。我也在看 SQLite，但我没有使用它的经验，我不确定它是否适合我。

提前致谢！

# javascript - 如何让这些 HTML 标记从 javascript 呈现

> ID：11568360
> 
> 赞同：0
> 
> 时间：2012-07-19T19:59:51.703
> 
> 标签：javascript

菜鸟问题提醒！所以，我有这个脚本，它遍历一个数组并`<br>`在每个数组项的末尾添加一个标签。但我不知道在我的页面上显示此输出的正确方法。目前，当它加载`<br>`标签时，标签会显示在屏幕上，而我希望它们呈现为换行符。它正在输出到 a `<textarea>`if 这会有所作为。谢谢一堆。

```
var outputLinkText = document.getElementById('outputLinkText');
var outputStageOne = "";

for (var i = 0; i < arrayOne.length; i++) {
    outputStageOne += (arrayOne[i] + "<br>");
}   

if ( 'textContent' in timePlace ) {
    outputLinkText.textContent = outputStageOne;
}
else {
    outputLinkText.innerText = outputStageOne;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:03:01.797

`<textarea>`标签在其内容中不支持`<br>`标签（或任何其他 HTML 标签）。他们*只*保存纯文本。

您需要添加`"\n"`为分隔符。

（严格来说，它应该是`"\r\n"`但`"\n"`通常就足够了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:02:56.087

是的，文本区域有所不同，试试这个：

`"\r\n"`代替`"<br>"`

# c - C：我的内存释放功能可能出现故障

> ID：11568362
> 
> 赞同：0
> 
> 时间：2012-07-19T19:59:59.683
> 
> 标签：c, memory-management

我正在开发一个小型 C 库，其中包含常用操作的函数，主要是为了提高我的 C 技能。在调试我的释放函数的会话中，我看到以前指向二维矩阵的指针的值不是**NULL**。

我知道没有办法在释放后检查指针的状态（通过[阅读](https://stackoverflow.com/questions/4143382/how-to-check-deallocation-of-memory)这个问题），但我为这个指针分配了一个**NULL**值以避免它最终成为一个悬空指针。

功能代码为：

```
void matfree(void **M, int m){
int i;

for(i = 0; i < m; i ++){
    free(M[i]);
    M[i] = NULL;
}
free(M);
M = NULL;
} 
```

测试代码（进入另一个文件）：

```
int matfreetest(){
int **M = NULL;

M = (int **) matmalloc(0, 2, 2);
if(*M == NULL){
    printf("Here 1! \n");
    return 0;
}
matfree(M, 2);
if(*M == NULL){
    return 1;
}
else{
    printf("Here 2! \n");
    return 0;
}
}

int main(){
int status; 

status = matmalloctest();
printf("matmalloctest status = %d \n", status);
status = matfreetest();
printf("matfreetest status = %d \n", status);
system("PAUSE");
return 1;
} 
```

我希望 matfreetest 返回状态 1，但它返回 0。这里做错了什么？

**编辑**：matmalloc的代码，根据要求：

```
/* Memory allocator for any type and size of matrix. 
Arguments:
-   int type:    identifier of the matrix' type
-   int m:       number of matrix rows
-   int n:       number of matrix columns
*/
void **matmalloc(int type, int m, int n){
int i;
void **M;

/* Check data type the do the proper allocation. */
if(type == INTEGER){ //int
    M = (int **) malloc(m*sizeof(int *));
    if(M == NULL){
        printf("Allocation failed! \n");
        return NULL;
    }
    for(i = 0; i < m; i ++){
        M[i] = (int *) malloc(n*sizeof(int));
        if(M[i] == NULL){
            printf("Allocation failed! \n");
            return NULL;
        }
    }
    printf("Allocation completed! \n");
    return M;
}
else if(type == SINTEGER){ //short int
    M = (short int **) malloc(m*sizeof(short int *));
    if(M == NULL){
        printf("Allocation failed! \n");
        return NULL;
    }
    for(i = 0; i < m; i ++){
        M[i] = (short int *) malloc(n*sizeof(short int));
        if(M[i] == NULL){
            printf("Allocation failed! \n");
            return NULL;
        }
    }
    printf("Allocation completed! \n");
    return M;
}
else if(type == LINTEGER){ //long int
    M = (long int **) malloc(m*sizeof(long int *));
    if(M == NULL){
        printf("Allocation failed! \n");
        return NULL;
    }
    for(i = 0; i < m; i ++){
        M[i] = (long int *) malloc(n*sizeof(long int));
        if(M[i] == NULL){
            printf("Allocation failed! \n");
            return NULL;
        }
    }
    printf("Allocation completed! \n");
    return M;
}
else if(type == FL){ //float
    M = (float **) malloc(m*sizeof(float *));
    if(M == NULL){
        printf("Allocation failed! \n");
        return NULL;
    }
    for(i = 0; i < m; i ++){
        M[i] = (float *) malloc(n*sizeof(float));
        if(M[i] == NULL){
            printf("Allocation failed! \n");
            return NULL;
        }
    }
    printf("Allocation completed! \n");
    return M;
}
else if(type == DOUB){ //double
    M = (double **) malloc(m*sizeof(double *));
    if(M == NULL){
        printf("Allocation failed! \n");
        return NULL;
    }
    for(i = 0; i < m; i ++){
        M[i] = (double *) malloc(n*sizeof(double));
        if(M[i] == NULL){
            printf("Allocation failed! \n");
            return NULL;
        }
    }
    printf("Allocation completed! \n");
    return M;
}
else if(type == LDOUB){ //long double
    M = (long double **) malloc(m*sizeof(long double *));
    if(M == NULL){
        printf("Allocation failed! \n");
        return NULL;
    }
    for(i = 0; i < m; i ++){
        M[i] = (long double *) malloc(n*sizeof(long double));
        if(M[i] == NULL){
            printf("Allocation failed! \n");
            return NULL;
        }
    }
    printf("Allocation completed! \n");
    return M;
}
else{
    printf("Incorrect type of matrix data. Only numeric types are accepted. \n");
    return NULL;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:07:48.540

作为 matfree 参数的“M”与调用程序中的参数不同。最好以不同的方式命名它以避免歧义。

你应该有：

```
M = matfree(M, 2); // Frees M and reassigns it to NULL

void **matfree(void **X, int m)
{
   int i;
   for(i = 0; i < m; i ++)
   {
       free(X[i]);
        X[i] = NULL;
   }
   free(X);
   return NULL;
} 
```

# php - 如何使用 PECL PHP solr 扩展更改请求处理程序

> ID：11568367
> 
> 赞同：2
> 
> 时间：2012-07-19T20:00:22.657
> 
> 标签：php, solr, cakephp-2.0

我正在使用默认的 PHP Solr 客户端： [http](http://php.net/manual/en/book.solr.php) ://php.net/manual/en/book.solr.php 到现在为止，结果令人惊叹，所以我决定继续使用 Solr，并开发“建议”服务：

我是根据： [http](http://wiki.apache.org/solr/Suggester/) ://wiki.apache.org/solr/Suggester/ 它也很好用 - 但我不知道如何使用 PHP 客户端查询它。

这就是我查询文档的方式：

```
http://localhost:8080/solr/subject_offers/select/?q=string_to_search 
```

这就是我查询建议的方式：

```
http://localhost:8080/solr/subject_offers/suggest/?q=string_to_suggest 
```

如您所见，建议服务具有不同的 RequestHandler（称为“建议”）。如何在客户端更改它？

**更新：** 我使用 cURL 从 Solr 检索响应 XML。但我仍然想返回一个 Solr 响应对象，所以我使用“SolrUtils::digestXmlResponse($xml, SolrResponse::PARSE_SOLR_OBJ)”。不幸的是，对于有效的 XML，我收到“错误取消序列化响应”的错误：

```
<response><lst name="responseHeader"><int name="status">0</int><int name="QTime">2</int></lst><lst name="spellcheck"><lst name="suggestions"><lst name="the"><int name="numFound">1</int><int name="startOffset">9</int><int name="endOffset">12</int><arr name="suggestion"><str>the</str></arr></lst><lst name="the"><int name="numFound">1</int><int name="startOffset">33</int><int name="endOffset">36</int><arr name="suggestion"><str>the</str></arr></lst><lst name="collation"><str name="collationQuery">name:for the d^5 description:for the d^0.4</str><int name="hits">1</int><lst name="misspellingsAndCorrections"><str name="the">the</str><str name="the">the</str></lst></lst></lst></lst><result name="response" numFound="1" start="0"><doc><str name="1_on_1_price">9,USD</str><float name="avarage_rating">0.0</float><arr name="categories"><str>2,2,3</str></arr><int name="category_id">3</int><arr name="description"><str>was named for the directo</str><str>The Manchesowned by Peel Ports</str></arr><bool name="is_public">true</bool><str name="language">he</str><int name="lesson_type">0</int><str name="name">was named for the directo</str><int name="subject_id">12</int></doc></result></response> 
```

请指教，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T23:32:36.190

我有同样的问题，我在源代码中找到了答案。解决方案是：

```
$client = new SolrClient($options);
$client->setServlet(SolrClient::SEARCH_SERVLET_TYPE, "request_handler_name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:10:28.630

您可以使用 PHP 的 CURL 扩展来执行此操作。一个小例子是：

```
$url = 'http://localhost:8080/solr/subject_offers/select/?';
$to_post = array('q' => urlencode('string_to_search'),
                 'other'=> urlencode('somthing_else'));
foreach($to_post as $key=>$value) {
    $string .= $key.'='.$value.'&';
}
rtrim($string, '&');

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($to_post));
curl_setopt($ch,CURLOPT_POSTFIELDS,$string);

$result = curl_exec($ch);
curl_close($ch); 
```

希望有帮助...

# c# - C# lambda 中的线程安全

> ID：11568368
> 
> 赞同：1
> 
> 时间：2012-07-19T20:00:25.093
> 
> 标签：c#, thread-safety

我今天遇到了一段这样的 C# 代码：

```
lock(obj)
{
  //  perform various operations
  ...

  //  send a message via a queue but in the same process, Post(yourData, callback)
  messagingBus.Post(data, () => 
  {
    //  perform operation
    ...
    if(condition == true)
    {
      //  perform a long running, out of process operation
      operation.Perform();
    }
  }
} 
```

我的问题是：回调函数是否可以在调用 operation.Perform() 之前以导致 lock(obj)**不**被释放的方式调用？即，有没有一种方法可以在持有锁的同一线程上调用回调函数，并且在该线程释放锁之前？

编辑：messagingBus.Post(...) 可以被假定为插入到队列中，然后立即返回。回调在其他线程上调用，可能来自线程池。

对于 operation.Perform()，您可以将其读取为 Thread.Sleep(10000) - 只是运行很长时间并且不共享或改变任何状态的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:12:39.617

I'm going to guess.

`Post` in .net generally implies that the work will be done by another thread or at another time.

So yes, it's not only possible that the lock on `obj` will be released before `Perform` is called, it's fairly likely it will happen. However, it's not guaranteed. Perform may complete before the lock is released.

That doesn't mean it's a problem. The "perform various actions" part may need the lock. messagingBus may need the lock to queue the action. The work inside may not need the lock at all, in which case the code is thread safe.

This is all a guess because there's no notion of what work is being done, why it must be inside a lock, and what `Post` or perform does. So the code may be perfectly safe, or it may be horribly flawed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:14:51.893

如果不知道messagingBus.Post 是如何实现的，就不可能回答您的问题。异步 API 通常不保证回调将真正并发执行。例如，.Net APM 方法（如 FileStream.BeginRead）可能决定同步执行操作，在这种情况下，回调将在调用 BeginRead 的同一线程上执行。在这种情况下，返回的 IAsyncResult.CompletedSynchronously 将设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:38:59.617

不知道messagingBus.Post 正在做什么，您无法分辨。 *如果*Post 调用给定的委托（您的示例中的 lambda 表达式），则该锁将在该 lambda 执行时到位。 *如果*Post 安排该委托在以后执行，则在 lambda 执行时锁*将不会*到位。目前尚不清楚 lock(obj) 的用途，锁定对 messingsBus.Post 的调用，或者什么...详细说明 messingBus 变量的类型（包括完整的命名空间）将大大有助于提供更好的细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:54:14.973

如果回调异步执行，那么是的，当 Perform() 时，锁可能仍然被持有，除非 Post() 做一些特定的事情来避免这种情况（这将是不寻常的）。

如果回调被安排在与 Post() 调用相同的线程上（例如，在线程池只有 1 个线程的极端示例中），典型的线程池实现在线程完成当前任务之前不会执行回调，在这种情况下，这需要它在执行 Perform() 之前释放锁。

# jsp - Web 容器如何知道从哪里获取默认页面？

> ID：11568370
> 
> 赞同：0
> 
> 时间：2012-07-19T20:00:42.800
> 
> 标签：jsp, tomcat, web-applications

我的 Web 应用程序位于`$HOME/workspace/WebApp01`. 如果我输入`localhost:8080/WebApp01`，浏览器/容器如何知道它必须从 $HOME/workspace/WebApp01 获取 index.html/index.jsp ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:01:29.220

`web.xml`您将描述符中的这些文件定义为欢迎文件。容器（Tomcat）的默认欢迎文件列表如下所示：

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

容器（Tomcat）用来决定加载哪个文件的规则如下：

1.  欢迎文件列表中的文件列表按顺序检查
2.  如果未指定welcome-file-list，则按顺序检查服务器默认web.xml 中的文件列表
3.  如果没有找到合适的文件，并且启用了目录列表功能，则会显示目录列表
4.  如果目录列表被禁用，则会发生 404 错误（这可能会反过来显示您使用标签指定的页面）。

在[这里](http://wiki.metawerx.net/wiki/Web.xml.WelcomeFileList)查看更多信息。

# ruby - 如何处理黄瓜 + Capybara + Selenium 中的模态

> ID：11568373
> 
> 赞同：0
> 
> 时间：2012-07-19T20:00:45.187
> 
> 标签：ruby, cucumber, modal-dialog, capybara

所以我试图点击一个忘记密码的链接（这会导致一个模式弹出）并确认弹出链接，这样我就可以对发送的电子邮件进行测试。

我的代码如下所示：

```
 page.find(:css, '#launch-modal-link').click  # code fails on this line, after clicking the link

   page.driver.browser.switch_to.alert.accept  # does not get to this line of code. 
```

尝试单击模式弹出窗口中的“确定”按钮时，我到底做错了什么？

我是否需要在链接周围添加一个 try catch 块（或在 Ruby 中调用的任何内容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:09:27.373

解决了 - 在其他地方找到了答案。虽然它是一个黑客，而不是直接通过黄瓜完成的事情。

```
page.evaluate_script('window.confirm = function() { return true; }') 
```

这是有效的，因为它重写了 confirm() 以始终返回 true，并且 confirm 函数似乎是一个常见的 javascript 函数，用于返回在对话框中单击的按钮。可能是错的。（阅读 onclick 正在执行的 javascript 函数。可能并不总是有效）

# sql-server-2008 - 能否在 SQL Server 的索引中包含关系数据？

> ID：11568378
> 
> 赞同：0
> 
> 时间：2012-07-19T20:01:03.373
> 
> 标签：sql-server-2008, indexing

我正在使用 SQL Server 2008。

我有两个这样的表：

**订单项**

```
OrderItemID
InventoryItemID 
```

和 ：

**库存物品**

```
InventoryItemID
ItemCode 
```

我的查询计划显示很多时间都花在加入`InventoryItemID`s 以获取`ItemCode`每个订单项目的。

我已经有一个包含两个表上的两个列的非聚集索引，但希望它更快——我可以将关系“导入”`ItemCode`到`OrderItems`表的索引中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:20:54.997

不，您不能包含另一个表中的列。但是，一个“框外”建议是创建一个连接 OrderItems 和 InventoryItems 的索引视图。您可以在视图上设置聚集索引以实现最快的性能，并且订单和库存项目似乎都在同一个“表”中，而无需进行连接。结果将是数据的某种非规范化视图。

当然，索引视图有许多限制，但允许内部连接。我经常使用索引视图，它们非常有用。这里有一个插入/更新/删除性能考虑，因为每个操作都需要更新视图。但是，这可能是值得的。

# c# - 从线程填充 DataGridView

> ID：11568380
> 
> 赞同：1
> 
> 时间：2012-07-19T20:01:04.997
> 
> 标签：c#, multithreading, datagridview, populate, can-bus

我正在 Microsoft Visual C# 2010 Express 中为 USB2-F-7x02 [CANBus 适配器](http://easysync-ltd.com/product.php?ProductID=556 "EASYSYNC的网站")编写代码，该适配器 通过 USB 从 TEKTRONIX 020-2924-XX DPO DEMO 2 板传输消息。

下面名为 CANSnifferForm.cs 的代码使用与 CANBus API 交互的 GUI。Run_Click 将在用户单击“运行”后打开适配器（canplus_open），然后适配器开始侦听（canplus_Listen）。回调线程 (setReceiveCallBackThread) 然后运行调用调用回调的 setReceiveCallBack。msg 对象包含消息。然后我的问题在于从消息中获取此信息并将其添加到 DataGridView (dataGridView1)。

我考虑了很多可能性。

最明显的是通过编写“this.dataGridView1.Rows.Add(msg.id, msg.len, msg.timestamp);”向 dataGridView 添加行。在回调中。但是，回调实际上是静态的，但 dataGridView1 不是。不幸的是，我不能删除 static 关键字，因为它会导致调用函数出现语法错误。此外，我不能将 dataGridView1 声明为静态，因为这会导致设计表单文件中的初始化出现语法错误。

第二种选择是打开一个文件并写入它。但是，当我声明并使用 StreamWriter 对象时，会导致与静态声明回调有关的错误。因此，我决定输出到控制台并使用跟踪将其重定向到文件（因为 Console.WriteLine 不是静态的）。我在这里找到了关于跟踪的讨论：

[追踪](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/b1e161d3-ee89-4667-9b9b-e6284e3731f0/ "微软的网站")。

但是，程序必须在线程启动后立即解析该文件并将其输出到 dataGridView。这意味着当线程写入文件时，StreamReader 对象将同时读取文件，这可能导致数据复杂化。这导致程序在我运行它时没有响应。

所以后来我终于考虑声明一个静态数组并在回调中填充它。初始化数组时出现问题。但是，为了使用循环解析它并将其放入 dataGridView，我必须知道数组的大小。当我使用循环解析它时，大小会发生变化。

我开始对此失去耐心。所以我提出我的问题是堆栈溢出。

以下三段代码应包含分析问题所需的所有内容。EASYSYNC.msg 在 EASYSYNC.cs 中声明。我正在做的主要编码是在 CANSnifferForm.cs 中。

```
// CANSnifferForm.cs

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Runtime.InteropServices;
using System.IO;
using System.Diagnostics;

namespace WindowsFormsApplication1
{

    public partial class CANSnifferForm : Form
    {

        // per the api document. "This is a blocking call and must be called on a separate thread."
        // the code previously after setCallback... was never being reached because the call is   blocking.
        // this calls the setCallbackThread function in another thread so processing can continue.
        Thread setReceiveCallBackThread;
        //static int arrSize = 0;

        int handle, listenReturnValue;
        TextWriter tw = new StreamWriter("dataGridView1.txt");

        public CANSnifferForm()
        {
            InitializeComponent();
        }

        private static void callback(ref EASYSYNC.CANMsg msg)
        {
            // Populate something perhaps??
        }

        EASYSYNC.CallbackDelegate del = new EASYSYNC.CallbackDelegate(callback);

        private void Run_Click(object sender, EventArgs e)
        {

            this.CANSnifferStatusBox.AppendText("CAN closed");
            this.ProcessStatusBox.AppendText("Stopped");
            EASYSYNC.CANMsg msg = new EASYSYNC.CANMsg();
            msg.id = 1;
            msg.timestamp = 2;
            msg.flags = 3;
            msg.len = 4;
            msg.data = 5;
            handle = EASYSYNC.canplus_Open(IntPtr.Zero, "1000", IntPtr.Zero, IntPtr.Zero, 0);

            if (handle < 0)
                this.ErrorBox.AppendText("Error opening CAN");

            this.CANSnifferStatusBox.Clear();
            this.CANSnifferStatusBox.AppendText("CAN open");

            setReceiveCallBackThread = new Thread(() => EASYSYNC.canplus_setReceiveCallBack(handle, callback));
            listenReturnValue = EASYSYNC.canplus_Listen(handle);

            if (listenReturnValue < 0)
            {
                this.ErrorBox.Clear();
                this.ErrorBox.AppendText("Error setting listen mode\n");
                EASYSYNC.canplus_Close(listenReturnValue);
                this.CANSnifferStatusBox.Clear();
                this.CANSnifferStatusBox.AppendText("CAN closed\n");
            }

            this.CANSnifferStatusBox.Clear();
            this.CANSnifferStatusBox.AppendText("CAN Listening\n");

            setReceiveCallBackThread.Start();
            this.ProcessStatusBox.Clear();
            this.ProcessStatusBox.AppendText("Running\n");

            // Insert loop here to populate dataGridView
            // this.dataGridView1.Rows.Add(msg.id, msg.len, msg.timestamp);

        }

      private void Stop_Click(object sender, EventArgs e)
        {
           setReceiveCallBackThread.Abort(); // Stop thread
           this.ProcessStatusBox.Clear();
           this.ProcessStatusBox.AppendText("Stopped");
           EASYSYNC.canplus_Close(listenReturnValue);
           this.CANSnifferStatusBox.Clear();
           this.CANSnifferStatusBox.AppendText("CAN closed");

        }
}

// CANSnifferProgram.cs

using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Threading;

namespace WindowsFormsApplication1
{
    static class CANSnifferProgram
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new CANSnifferForm());

        }
    }
}

// EASYSYNC.cs

using System;
using System.Runtime.InteropServices;
using System.Text;

internal class EASYSYNC
{
    public const string CAN_BitRate_100K = "100";
    public const string CAN_BitRate_10K = "10";
    public const string CAN_BitRate_125K = "125";
    public const string CAN_BitRate_1M = "1000";
    public const string CAN_BitRate_20K = "20";
    public const string CAN_BitRate_250K = "250";
    public const string CAN_BitRate_500K = "500";
    public const string CAN_BitRate_50K = "50";
    public const string CAN_BitRate_800K = "800";
    public const byte CANMSG_EXTENDED = 0x80;
    public const byte CANMSG_RTR = 0x40;
    public const uint canplus_ACCEPTANCE_CODE_ALL = 0;
    public const uint canplus_ACCEPTANCE_MASK_ALL = uint.MaxValue;
    public const byte CANPLUS_FLAG_BLOCK = 4;
    public const byte CANPLUS_FLAG_NO_LOCAL_SEND = 0x10;
    public const byte CANPLUS_FLAG_QUEUE_REPLACE = 2;
    public const byte CANPLUS_FLAG_SLOW = 8;
    public const byte CANPLUS_FLAG_TIMESTAMP = 1;
    public const byte CANSTATUS_EWARN = 1;
    public const byte CANSTATUS_RXB0OVFL = 0x80;
    public const byte CANSTATUS_RXB1OVFL = 0x40;
    public const byte CANSTATUS_RXBP = 8;
    public const byte CANSTATUS_RXWARN = 2;
    public const byte CANSTATUS_TXBO = 0x20;
    public const byte CANSTATUS_TXBP = 0x10;
    public const byte CANSTATUS_TXWARN = 4;
    public const int ERROR_CANPLUS_COMMAND_SUBSYSTEM = -3;
    public const int ERROR_CANPLUS_FAIL = -1;
    public const int ERROR_CANPLUS_INVALID_HARDWARE = -11;
    public const int ERROR_CANPLUS_INVALID_PARAM = -6;
    public const int ERROR_CANPLUS_MEMORY_ERROR = -8;
    public const int ERROR_CANPLUS_NO_DEVICE = -9;
    public const int ERROR_CANPLUS_NO_MESSAGE = -7;
    public const int ERROR_CANPLUS_NOT_OPEN = -4;
    public const int ERROR_CANPLUS_OK = 1;
    public const int ERROR_CANPLUS_OPEN_SUBSYSTEM = -2;
    public const int ERROR_CANPLUS_TIMEOUT = -10;
    public const int ERROR_CANPLUS_TX_FIFO_FULL = -5;
    public const uint FLUSH_DONTWAIT = 1;
    public const uint FLUSH_EMPTY_INQUEUE = 2;
    public const uint FLUSH_WAIT = 0;

    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Close(int handle);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Flush(int h);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_getFirstAdapter(StringBuilder szAdapter, int size);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_getNextAdapter(StringBuilder szAdapter, int size);
    [DllImport("USBCanPlusDllF.dll", EntryPoint="canplus_VersionInfo")]
    public static extern int canplus_getVersionInfo(int handle, StringBuilder verinfo);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Listen(int handle);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Open(IntPtr szID, string szBitrate, IntPtr acceptance_code, IntPtr acceptance_mask, uint flags);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Open(string szID, string szBitrate, IntPtr acceptance_code, IntPtr acceptance_mask, uint flags);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Open(string szID, string szBitrate, string acceptance_code, string acceptance_mask, uint flags);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Read(int handle, ref CANMsg msg);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_ReadN(int handle, ref CANMsg msg);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Reset(int handle);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_SetTimeouts(int handle, uint receiveTimeout, uint transmitTimeout);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Status(int handle);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_Write(int handle, ref CANMsg msg);
    [DllImport("USBCanPlusDllF.dll")]
    public static extern int canplus_setReceiveCallBack(int handle, CallbackDelegate callback);

    [UnmanagedFunctionPointerAttribute(CallingConvention.StdCall)]
    public delegate void CallbackDelegate(ref CANMsg msg);

    [StructLayout(LayoutKind.Sequential, Pack=1)]
    public struct CANMsg
    {
        public uint id;
        public uint timestamp;
        public byte flags;
        public byte len;
        public ulong data;
    }

    [StructLayout(LayoutKind.Sequential, Pack=1)]
    public struct CANMsgEx
    {
        public uint id;
        public uint timestamp;
        public byte flags;
        public byte len;
    }
}

// CANSnifferForm.Designer.cs
namespace WindowsFormsApplication1
{
    partial class CANSnifferForm
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.RunRestart = new System.Windows.Forms.Button();
            this.Stop = new System.Windows.Forms.Button();
            this.Pause = new System.Windows.Forms.Button();
            this.Resume = new System.Windows.Forms.Button();
            this.FilterLength = new System.Windows.Forms.TextBox();
            this.textBox1 = new System.Windows.Forms.TextBox();
            this.FilterByID = new System.Windows.Forms.Label();
            this.FilterbyLength = new System.Windows.Forms.Label();
            this.CANSnifferStatus = new System.Windows.Forms.Label();
            this.ErrorBox = new System.Windows.Forms.TextBox();
            this.dataGridViewTextBoxColumn1 = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.dataGridView1 = new System.Windows.Forms.DataGridView();
            this.ID = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.Length = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.Data = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.TimeStamp = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.ErrorMessage = new System.Windows.Forms.Label();
            this.progressBar1 = new System.Windows.Forms.ProgressBar();
            this.ProcessStatus = new System.Windows.Forms.Label();
            this.ProcessStatusBox = new System.Windows.Forms.TextBox();
            this.CANSnifferStatusBox = new System.Windows.Forms.TextBox();
            ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
            this.SuspendLayout();
            // 
            // RunRestart
            // 
            this.RunRestart.Location = new System.Drawing.Point(56, 80);
            this.RunRestart.Margin = new System.Windows.Forms.Padding(4);
            this.RunRestart.Name = "RunRestart";
            this.RunRestart.Size = new System.Drawing.Size(125, 39);
            this.RunRestart.TabIndex = 0;
            this.RunRestart.Text = "Run / Restart";
            this.RunRestart.UseVisualStyleBackColor = true;
            this.RunRestart.Click += new System.EventHandler(this.Run_Click);
            // 
            // Stop
            // 
            this.Stop.Location = new System.Drawing.Point(1009, 80);
            this.Stop.Name = "Stop";
            this.Stop.Size = new System.Drawing.Size(154, 39);
            this.Stop.TabIndex = 12;
            this.Stop.Text = "Stop";
            this.Stop.UseVisualStyleBackColor = true;
            this.Stop.Click += new System.EventHandler(this.Stop_Click);
            // 
            // Pause
            // 
            this.Pause.Location = new System.Drawing.Point(232, 80);
            this.Pause.Name = "Pause";
            this.Pause.Size = new System.Drawing.Size(120, 39);
            this.Pause.TabIndex = 13;
            this.Pause.Text = "Pause";
            this.Pause.UseVisualStyleBackColor = true;
            this.Pause.Click += new System.EventHandler(this.Pause_Click);
            // 
            // Resume
            // 
            this.Resume.Location = new System.Drawing.Point(411, 80);
            this.Resume.Name = "Resume";
            this.Resume.Size = new System.Drawing.Size(122, 39);
            this.Resume.TabIndex = 14;
            this.Resume.Text = "Resume";
            this.Resume.UseVisualStyleBackColor = true;
            this.Resume.Click += new System.EventHandler(this.Resume_Click);
            // 
            // FilterLength
            // 
            this.FilterLength.Location = new System.Drawing.Point(620, 88);
            this.FilterLength.Name = "FilterLength";
            this.FilterLength.Size = new System.Drawing.Size(161, 22);
            this.FilterLength.TabIndex = 16;
            this.FilterLength.TextChanged += new System.EventHandler(this.FilterLength_TextChanged);
            // 
            // textBox1
            // 
            this.textBox1.Location = new System.Drawing.Point(850, 88);
            this.textBox1.Name = "textBox1";
            this.textBox1.Size = new System.Drawing.Size(57, 22);
            this.textBox1.TabIndex = 17;
            // 
            // FilterByID
            // 
            this.FilterByID.AutoSize = true;
            this.FilterByID.Location = new System.Drawing.Point(617, 63);
            this.FilterByID.Name = "FilterByID";
            this.FilterByID.Size = new System.Drawing.Size(75, 17);
            this.FilterByID.TabIndex = 18;
            this.FilterByID.Text = "Filter by ID";
            this.FilterByID.Click += new System.EventHandler(this.FilterByID_Click);
            // 
            // FilterbyLength
            // 
            this.FilterbyLength.AutoSize = true;
            this.FilterbyLength.Location = new System.Drawing.Point(847, 63);
            this.FilterbyLength.Name = "FilterbyLength";
            this.FilterbyLength.Size = new System.Drawing.Size(106, 17);
            this.FilterbyLength.TabIndex = 19;
            this.FilterbyLength.Text = "Filter by Length";
            this.FilterbyLength.Click += new System.EventHandler(this.FilterbyLength_Click);
            // 
            // CANSnifferStatus
            // 
            this.CANSnifferStatus.AutoSize = true;
            this.CANSnifferStatus.Location = new System.Drawing.Point(53, 9);
            this.CANSnifferStatus.Name = "CANSnifferStatus";
            this.CANSnifferStatus.Size = new System.Drawing.Size(121, 17);
            this.CANSnifferStatus.TabIndex = 21;
            this.CANSnifferStatus.Text = "CANSniffer Status";
            this.CANSnifferStatus.Click += new System.EventHandler(this.CANSnifferStatus_Click);
            // 
            // ErrorBox
            // 
            this.ErrorBox.BackColor = System.Drawing.SystemColors.Control;
            this.ErrorBox.Location = new System.Drawing.Point(180, 35);
            this.ErrorBox.Name = "ErrorBox";
            this.ErrorBox.Size = new System.Drawing.Size(220, 22);
            this.ErrorBox.TabIndex = 22;
            // 
            // dataGridViewTextBoxColumn1
            // 
            this.dataGridViewTextBoxColumn1.DataPropertyName = "Target";
            this.dataGridViewTextBoxColumn1.HeaderText = "Target";
            this.dataGridViewTextBoxColumn1.Name = "dataGridViewTextBoxColumn1";
            this.dataGridViewTextBoxColumn1.ReadOnly = true;
            // 
            // dataGridView1
            // 
            this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
            this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
            this.ID,
            this.Length,
            this.Data,
            this.TimeStamp});
            this.dataGridView1.Location = new System.Drawing.Point(17, 156);
            this.dataGridView1.Name = "dataGridView1";
            this.dataGridView1.RowTemplate.Height = 24;
            this.dataGridView1.Size = new System.Drawing.Size(1146, 388);
            this.dataGridView1.TabIndex = 23;
            this.dataGridView1.CellContentClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.dataGridView1_CellContentClick);
            // 
            // ID
            // 
            this.ID.HeaderText = "ID";
            this.ID.Name = "ID";
            this.ID.Width = 200;
            // 
            // Length
            // 
            this.Length.HeaderText = "Length";
            this.Length.Name = "Length";
            // 
            // Data
            // 
            this.Data.HeaderText = "Data";
            this.Data.Name = "Data";
            this.Data.Width = 600;
            // 
            // TimeStamp
            // 
            this.TimeStamp.HeaderText = "Time Stamp";
            this.TimeStamp.Name = "TimeStamp";
            this.TimeStamp.Width = 200;
            // 
            // ErrorMessage
            // 
            this.ErrorMessage.AutoSize = true;
            this.ErrorMessage.Location = new System.Drawing.Point(53, 35);
            this.ErrorMessage.Name = "ErrorMessage";
            this.ErrorMessage.Size = new System.Drawing.Size(101, 17);
            this.ErrorMessage.TabIndex = 24;
            this.ErrorMessage.Text = "Error Message";
            // 
            // progressBar1
            // 
            this.progressBar1.Location = new System.Drawing.Point(17, 133);
            this.progressBar1.Name = "progressBar1";
            this.progressBar1.Size = new System.Drawing.Size(69, 17);
            this.progressBar1.TabIndex = 26;
            // 
            // ProcessStatus
            // 
            this.ProcessStatus.AutoSize = true;
            this.ProcessStatus.Location = new System.Drawing.Point(617, 12);
            this.ProcessStatus.Name = "ProcessStatus";
            this.ProcessStatus.Size = new System.Drawing.Size(103, 17);
            this.ProcessStatus.TabIndex = 28;
            this.ProcessStatus.Text = "Process Status";
            // 
            // ProcessStatusBox
            // 
            this.ProcessStatusBox.BackColor = System.Drawing.SystemColors.Menu;
            this.ProcessStatusBox.Location = new System.Drawing.Point(726, 12);
            this.ProcessStatusBox.Name = "ProcessStatusBox";
            this.ProcessStatusBox.Size = new System.Drawing.Size(148, 22);
            this.ProcessStatusBox.TabIndex = 29;
            this.ProcessStatusBox.TextChanged += new System.EventHandler(this.ProcessStatusBox_TextChanged);
            // 
            // CANSnifferStatusBox
            // 
            this.CANSnifferStatusBox.BackColor = System.Drawing.SystemColors.Menu;
            this.CANSnifferStatusBox.Location = new System.Drawing.Point(180, 6);
            this.CANSnifferStatusBox.Name = "CANSnifferStatusBox";
            this.CANSnifferStatusBox.Size = new System.Drawing.Size(163, 22);
            this.CANSnifferStatusBox.TabIndex = 31;
            this.CANSnifferStatusBox.TextChanged += new System.EventHandler(this.textBox2_TextChanged);
            // 
            // CANSnifferForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(8F, 16F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(1357, 533);
            this.Controls.Add(this.CANSnifferStatusBox);
            this.Controls.Add(this.ProcessStatusBox);
            this.Controls.Add(this.ProcessStatus);
            this.Controls.Add(this.progressBar1);
            this.Controls.Add(this.ErrorMessage);
            this.Controls.Add(this.dataGridView1);
            this.Controls.Add(this.ErrorBox);
            this.Controls.Add(this.CANSnifferStatus);
            this.Controls.Add(this.FilterbyLength);
            this.Controls.Add(this.FilterByID);
            this.Controls.Add(this.textBox1);
            this.Controls.Add(this.FilterLength);
            this.Controls.Add(this.Resume);
            this.Controls.Add(this.Pause);
            this.Controls.Add(this.Stop);
            this.Controls.Add(this.RunRestart);
            this.Margin = new System.Windows.Forms.Padding(4);
            this.Name = "CANSnifferForm";
            this.Text = "CAN Sniffer ";
            this.Load += new System.EventHandler(this.Form1_Load);
            ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.Button RunRestart;
        private System.Windows.Forms.Button Stop;
        private System.Windows.Forms.Button Pause;
        private System.Windows.Forms.Button Resume;
        private System.Windows.Forms.TextBox FilterLength;
        private System.Windows.Forms.TextBox textBox1;
        private System.Windows.Forms.Label FilterByID;
        private System.Windows.Forms.Label FilterbyLength;
        private System.Windows.Forms.Label CANSnifferStatus;
        private System.Windows.Forms.TextBox ErrorBox;
        private System.Windows.Forms.DataGridViewTextBoxColumn dataGridViewTextBoxColumn1;
        private System.Windows.Forms.DataGridView dataGridView1;
        private System.Windows.Forms.DataGridViewTextBoxColumn ID;
        private System.Windows.Forms.DataGridViewTextBoxColumn Length;
        private System.Windows.Forms.DataGridViewTextBoxColumn Data;
        private System.Windows.Forms.DataGridViewTextBoxColumn TimeStamp;
        private System.Windows.Forms.Label ErrorMessage;
        private System.Windows.Forms.ProgressBar progressBar1;
        private System.Windows.Forms.Label ProcessStatus;
        private System.Windows.Forms.TextBox ProcessStatusBox;
        private System.Windows.Forms.TextBox CANSnifferStatusBox;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:57:41.860

事实上，您可以使您的回调方法成为非静态的。代表负责使用 thunk 进行编组以进行“此调用”。诀窍是您不能在表单的构造函数之外初始化该委托。原因是在ctor之外，没有“this”。像这样声明它：

```
private EASYSYNC.CallbackDelegate del; 
```

然后在你的构造函数中初始化它：

```
del = new EASYSYNC.CallbackDelegate(callback); 
```

确保在调用时传递 "del" ，而不是 "c​​allback" `EASYSYNC.canplus_setReceiveCallBack`（你目前错了）。当它被传递给非托管代码时，最好保留对此委托的引用。当您传递“回调”时，创建了一个委托，但您没有机会保留该引用，我们将在回调中重用该引用。

棘手的一点在于回调方法。您不能从另一个线程将项目添加到 DGV（甚至是绑定容器）。UI 控件不能从创建它们的 UI 线程以外的线程访问。我们可以简单地检查我们是否在另一个线程上执行，如果是，我们将使用 BeginInvoke 重新调用自己，这次是从 UI 线程。

```
private void callback(ref EASYSYNC.CANMsg msg)
{
    if (InvokeRequired)
        BeginInvoke(del, msg);
    else
    {
        // Now you can add items to the DGV
    }
} 
```

# r - 为什么 R 中的 as.numeric 函数不能正常工作？

> ID：11568385
> 
> 赞同：0
> 
> 时间：2012-07-19T20:01:33.747
> 
> 标签：r, character, numeric

我有这两个字符，“as.numeric”函数对它们不起作用。谁能帮我为什么会这样？

> 选项（数字=22）
> 
> 一个=“27”
> 
> as.numeric(a)

[1] 27.00000000000000000000

> a="193381411288395777"
> 
> as.numeric(a)

[1] 193381411288395776.0000

可以看出，第二种情况最后一位不是“7”，而是“6”。基本上，“as.numeric”函数从第二种情况下的数字减少 1 个单位。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:09:24.840

使用`int64`包：

```
library(int64)
> as.int64("193381411288395777")
[1] 193381411288395777 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:03:29.650

您需要了解精确数字表示的限制。R 可以告诉你它有什么：

```
R> .Machine
$double.eps
[1] 2.22045e-16

$double.neg.eps
[1] 1.11022e-16

$double.xmin
[1] 2.22507e-308

$double.xmax
[1] 1.79769e+308

$double.base
[1] 2

$double.digits
[1] 53

$double.rounding
[1] 5

$double.guard
[1] 0

$double.ulp.digits
[1] -52

$double.neg.ulp.digits
[1] -53

$double.exponent
[1] 11

$double.min.exp
[1] -1022

$double.max.exp
[1] 1024

$integer.max
[1] 2147483647

$sizeof.long
[1] 8

$sizeof.longlong
[1] 8

$sizeof.longdouble
[1] 16

$sizeof.pointer
[1] 8

R> 
```

# visual-studio-2010 - 如何找出 WCF 服务的最大吞吐量？

> ID：11568397
> 
> 赞同：1
> 
> 时间：2012-07-19T20:02:26.433
> 
> 标签：visual-studio-2010, wcf, load-testing

我正在使用 NetTcpBinding 对 WCF 服务进行负载测试。为此，我有一个单元测试，它调用服务并要求 X 个数据结果，我在负载测试（Visual Studio 2010）中使用这个单元测试。

问题是我不知道如何找出服务的最大吞吐量。我不断更改负载测试中的用户/客户端数量，并尝试查看是否能更快地获得结果。有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:48:36.537

***如果要测量 WCF 服务的性能，可能需要使用称为性能计数器***的内置机制。它允许您在代码中添加一些诊断指令，例如增加计数器，然后在***perfmon.exe***工具中查看结果。有关[http://msdn.microsoft.com/en-us/library/ms735098.aspx](http://msdn.microsoft.com/en-us/library/ms735098.aspx)的更多信息。

我想您可以使用它来测试服务对特定数量的客户端的响应速度以找到最大吞吐量。

# jqgrid - 单击时 jqgrid 列未排序

> ID：11568398
> 
> 赞同：0
> 
> 时间：2012-07-19T20:02:30.100
> 
> 标签：jqgrid

我有以下代码块：

```
$("#searchlist").jqGrid({
                url:'./searchlibrary',
                datatype: 'json',
                mtype: 'POST',
                postData: {type: function(){return $('select[name="searchtype"]').val();},
                    criteria: function(){return getSearchData();}
                },
                colNames:['Resource Name','Unit', 'Topic','Document Type','Content Type','Select'],
                colModel :[ 
                  {name:'resourceName', index:'resourceName', width:380, align:'left'}, 
                  {name:'unit', index:'unitID', width:40, align:'center',sortable:true}, 
                  {name:'topic', index:'topicID', width:220, align:'center',sortable:true}, 
                  {name:'docType', index:'docTypeID', width:97, align:'center',sortable:true}, 
                  {name:'contentType', index:'contentTypeID', width:97, align:'center',sortable:true},
                  {name: 'select', index:'resourceID', width:55, align: "center", sortable: false, editable: true, edittype: "checkbox", editoptions: { value:"Yes:No", defaultValue:"No" }, formatter:"checkbox",formatoptions: {disabled : false}}
                ],
                rowNum:20,
                sortname: 'resourceName',
                sortorder: 'asc',
                viewrecords: true,
                gridview: true,
                width:878,
                height:251,
                loadComplete: function(data){
                    initCheckboxes();
                    $('input[type="checkbox"]').click(function(ev){
                        initCheckboxes();
                    });
                }
             }); 
```

数据加载得很好，但是当我单击它们不排序的各种列标题时。加载框短暂地显示在数据上，但这些列实际上从未重新排序。排序工作的唯一列是第一列。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:21:49.470

您为其他列设置的`index`属性与列名不同。当您对特定列进行排序时，jQGrid 将您在索引处设置的值作为排序参数 (sidx) 传递。

```
$("#searchlist").jqGrid({
    ...
    colModel :[ 
        {name:'resourceName', index:'resourceName', width:380, align:'left'}, 
        {name:'unit', index:'unit', width:40, align:'center',sortable:true}, 
        {name:'topic', index:'topic', width:220, align:'center',sortable:true}, 
        {name:'docType', index:'docType', width:97, align:'center',sortable:true}, 
        {name:'contentType', index:'contentType', width:97, align:'center',sortable:true},
        {name: 'select', index:'select', width:55, align: "center", sortable: false, editable: true, edittype: "checkbox", editoptions: { value:"Yes:No", defaultValue:"No" }, formatter:"checkbox",formatoptions: {disabled : false}}
    ],
    ...
}); 
```

# iphone - 如何将 UITableView 单元格映射到远程数据库后端？

> ID：11568399
> 
> 赞同：1
> 
> 时间：2012-07-19T20:02:31.023
> 
> 标签：iphone, ruby-on-rails, api, ios4, rubymotion

我正在为带有 rails 后端的 iPhone 制作一个简单的待办事项列表应用程序。

到目前为止，我可以`tasks`从 Web 应用程序中提取待办事项列表中的所有内容，解析 JSON，并将其插入 UITableView。

来自 rails 的 json 响应：

```
[
  {"id":1,"name":"Buy bread"},
  {"id":8,"name":"Get gas"},
  {"id":14,"name":"Call John"}
] 
```

在 UITableView 中，每个任务对应一行，单元格的 textLabel 就是任务的名称：

![在此处输入图像描述](../Images/f7eb48600b742b7b73fb487fbf8af557.png)

我现在遇到的问题是如何将单元格与任务的记录 ID 相关联。

两个任务可以具有相同的名称，因此我不能仅根据名称从哈希中获取 id。

我需要记录 id，所以我可以在用户编辑 UItableView（例如删除任务）后回发到 rails 应用程序。

我可以在单元格上设置属性吗？我觉得我错过了一些明显的东西。这是我的第一个iPhone应用程序，所以请温柔，嘿嘿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:05:39.563

您如何将 JSON 数组转换为 Objective-C 数组以在表中使用？您必须为任务的 ID 再次执行此操作，并且在您的`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`方法中使用类似`theID = [idArray objectAtIndex:indexPath.row];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T21:37:46.803

更好的解决方案是在客户端上维护适当的数据模型。您可以使用 JSON 作为模型，但 Core Data 更健壮一些。你想要的是让你的控制器将它对视图的了解与它对模型的了解联系起来。例如，如果您使用 didSelectRowAtIndexPath: 您希望使用此索引路径映射到您的模型。

您在单元格上设置属性以允许您的视图客户端查询您的数据模型的解决方案违反了 MVC 范式的规则。它将您的视图与您的模型相结合，这不是很好。

# shell - 交换输出中的 2 列----Sed 还是 Awk？

> ID：11568400
> 
> 赞同：0
> 
> 时间：2012-07-19T20:02:33.263
> 
> 标签：shell, unix, sed, awk, swap

输入文件：

```
GET /static_register_ad_request_1_2037_0_0_0_1_1_4_8335086462.gif?pa=99439_50491&country=US&state_fips_code=US_CA&city_name=Los%2BAngeles&dpId=2&dmkNm=apple&dmlNm=iPod%2Btouch&osNm=iPhone%2BOS&osvNm=5.1.1&bNm=Safari&bvNm=null&spNm=SBC%2BInternet%2BServices&kv=0_0&sessionId=0A80187E0138A0AE42E4DE3F783E7A08&sdk_version=4.0.5.6%20&domain=805AOEtUaMu&ad_catalog=99439_50491&make=APPLE&width=320&height=460&slot_type=PREROLL&model=iPod%20touch%205.1.1&iabcat=artsandentertainment&iabsubcat=music&age=113&gender=2&zip=92869 HTTP/1.1 
```

输出文件：

```
domain  sdk_version

805AOEtUaMu 4.0.5.6%20 
```

我可以`sed -n 's/.*sdk_version=\([^&]*\).*domain=\([^&]*\).*/\1 \2/p'`用来获取结果，但是第一列中的 sdk_version，我需要的是交换输出文件中的 sdk_version 和域列。

谁能帮我解决这个问题？提前非常感谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:05:46.103

只需交换您的反向引用：

```
sed -n 's/.*sdk_version=\([^&]*\).*domain=\([^&]*\).*/\2 \1/p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:54:15.347

一种使用方式`awk`：

```
awk '
    BEGIN { 
        FS = "&";
    } 
    { 
        for ( i = 15; i <= 16; i++ ) { 
            split( $i, f, /=/ ); 
            printf( "%s ", f[2] ); 
        } 
    } 
    END { 
        printf "\n"; 
    }
' infile 
```

输出：

```
4.0.5.6%20 805AOEtUaMu 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:59:25.950

如果你想处理任意顺序，我建议切换到`awk`或 Perl。

```
perl -ne 'm/[?&]domain=([^&]+)/ && $d = $1;
    m/[?&]sdk_version=([^&]+) && $s = $1;
    print "$d\t$s\n"' logfile 
```

# json - 如何使用 Scala 解析可能有一些缺失或额外字段的深度嵌套 JSON 文档？

> ID：11568408
> 
> 赞同：3
> 
> 时间：2012-07-19T20:03:04.250
> 
> 标签：json, scala, jackson

我已经阅读了其他 Scala JSON 解析问题，但它们似乎都假设一个非常基本的文档，没有深度嵌套或混合类型。或者他们假设您知道文档的所有成员，或者某些成员永远不会丢失。

我目前正在使用 Jackson 的 Streaming API，但所需的代码难以理解和维护。相反，如果可能，我想使用[Jerkson](https://github.com/codahale/jerkson/)返回一个表示已解析 JSON 的对象。

基本上：我想在动态语言中复制我非常熟悉的 JSON 解析功能。我意识到这可能是非常错误的，所以我来这里接受教育。

假设我们有一条推文：

```
{
 "id": 100,
 "text": "Hello, world."
 "user": {
          "name": "Brett",
          "id": 200
         },
 "geo": {
         "lat": 10.5,
         "lng": 20.7 
        }
} 
```

现在，当您只想解析出 ID 时，Jerkson Case Class 示例很有意义：

```
val tweet = """{...}"""
case class Tweet(id: Long)
val parsed = parse[Tweet](tweet) 
```

但是我该如何处理上面的推文呢？

一些陷阱：

1.  某些字段可能是`null`或缺失，例如上面的“geo”可能是`null`，或者有一天他们可能会删除一个字段，我不希望我的解析代码失败。
2.  某些字段将是额外的，或者将添加字段并且我希望能够忽略它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T22:45:51.423

Lift json-scalaz 是我遇到的最好的 JSON 读写方式。文档在这里很好地解释了它的用法：

[https://github.com/lift/framework/tree/master/core/json-scalaz](https://github.com/lift/framework/tree/master/core/json-scalaz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:20:27.580

当然，在我发布这个之后，我在其他地方找到了一些帮助。:)

我相信这篇文章底部的“更丰富的 JSON 示例”是朝着正确方向迈出的一步：http: [//bcomposes.wordpress.com/2012/05/12/processing-json-in-scala-with-jerkson/](http://bcomposes.wordpress.com/2012/05/12/processing-json-in-scala-with-jerkson/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T19:54:24.517

另一个使用 Lift-json 的替代方法可能是：

```
package code.json

import org.specs2.mutable.Specification
import net.liftweb.json._

class JsonSpecs extends Specification {

  implicit val format = DefaultFormats

  val a = parse("""{
                  | "id": 100,
                  | "text": "Hello, world."
                  | "user": {
                  |          "name": "Brett",
                  |          "id": 200
                  |         },
                  | "geo": {
                  |         "lat": 10.5,
                  |         "lng": 20.7
                  |        }
                  |}""".stripMargin)

  val b = parse("""{
                  | "id": 100,
                  | "text": "Hello, world."
                  | "user": {
                  |          "name": "Brett",
                  |          "id": 200
                  |         }
                  |}""".stripMargin)

  "Lift Json" should{
    "find the id" in {
      val res= (a \ "id").extract[String]
      res must_== "100"
    }
    "find the name" in{
      val res= (a \ "user" \ "name").extract[String]
      res must_== "Brett"
    }
    "find an optional geo data" in {
      val res= (a \ "geo" \ "lat").extract[Option[Double]]
      res must_== Some(10.5)
    }
    "ignore missing geo data" in {
      val res= (b \ "geo" \ "lat").extract[Option[Double]]
      res must_== None
    }
  }
} 
```

请注意，当 val b 上缺少地理数据时，解析工作得很好，期待无。

或者你想得到案例类作为结果？

有关案例类示例，请参见：

包代码.json

```
import org.specs2.mutable.Specification
import net.liftweb.json._

class JsonSpecs extends Specification {

  implicit val format = DefaultFormats

  case class Root(id: Int, text: Option[String], user: Option[User], geo: Option[Geo])
  case class User(name: String, id: Int)
  case class Geo(lat: Double, lng: Double)

val c = parse("""{
                | "id": 100
                | "user": {
                |          "name": "Brett",
                |          "id": 200
                |         },
                | "geo": {
                |         "lng": 20.7
                |        }
                |}""".stripMargin)

  "Lift Json" should{
    "return none for geo lat data" in {
      val res= c.extract[Root].geo.map(_.lat)
      res must_== None
    }
  }
} 
```

# ruby-on-rails-3 - 发布表单时跳过单选按钮

> ID：11568411
> 
> 赞同：1
> 
> 时间：2012-07-19T20:03:05.993
> 
> 标签：ruby-on-rails-3, http, radio-button, rack

我有一个来自内部的导轨，我有一些我不想在我的编辑操作中发布的单选按钮。

```
<form accept-charset="UTF-8" action="/feedbacks/3" id="edit_feedback_3" method="post">
 <input id="1_1" name="1" type="radio" value="1" />Yes
 <input id="1_1" name="1" type="radio" value="1" />No
 <input id="feedback_answers" name="feedback[answers]" size="30" type="text" />
 <input name="commit" type="submit" value="Submit" />
</form> 
```

并且这些单选按钮未绑定到模型的属性，如何仅将“feedback_answers”发布到服务器。

这一切都是因为我正面临[单选按钮的这个问题](https://rails.lighthouseapp.com/projects/8994/tickets/3030-rails-does-not-handle-typeerror-from-rack-on-malformed-query-strings)

我正在使用 ruby​​ 1.9.2 和 rails 3.2.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:18:13.970

处理此问题的一个好方法是在提交时禁用带有 javascript 的单选按钮：

```
function disableButtons() {
  document.getElementById('1_1').setAttribute('disabled', 'disabled');
  return true;
} 
```

然后在表格中添加以下内容：

```
onsubmit="return disableButtons()" 
```

# android - 如何在项目中添加 ViewpagerIndicator 2.3.1 和 ActionBarSherlock 4.1

> ID：11568413
> 
> 赞同：0
> 
> 时间：2012-07-19T20:03:17.210
> 
> 标签：android

我想在我的项目中同时使用 VPI 和 ABS。但我不能将它们包含在我的项目中。我尝试在两个库中删除 android-support-v4 但它不起作用。

谢谢你的建议！

```
<Tab>[2012-07-20 01:37:24 - SHopping] C:\Users\KIENVITHANH\workspace\ActionBarSherlock\res\values\vpi__attrs.xml:21: error: Attribute "vpiCirclePageIndicatorStyle" has already been defined
[2012-07-20 01:37:24 - SHopping] C:\Users\KIENVITHANH\workspace\ActionBarSherlock\res\values\vpi__attrs.xml:23: error: Attribute "vpiLinePageIndicatorStyle" has already been defined
[2012-07-20 01:37:24 - SHopping] C:\Users\KIENVITHANH\workspace\ActionBarSherlock\res\values\vpi__attrs.xml:25: error: Attribute "vpiTitlePageIndicatorStyle" has already been defined
</Tab> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:06:13.980

以您自己的风格将它们合并在一起，例如：

```
 <item name="vpiCirclePageIndicatorStyle">@style/Widget.CirclePageIndicator</item>
    <item name="vpiTitlePageIndicatorStyle">@style/Widget.TitlePageIndicator</item>
    <item name="vpiTabPageIndicatorStyle">@style/Widget.TabPageIndicator</item> 
```

以 ABS 作为父级，然后在清单中使用该主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:31:51.090

[如何添加图书馆项目](http://developer.android.com/tools/projects/projects-eclipse.html) 和 [阅读这](http://android-developers.blogspot.in/2011/10/changes-to-library-projects-in-android.html)也不会造成任何伤害

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:19:39.697

对我有用的是从 ViewPagerIndicator 的 lib 文件夹中删除 android-support-v4，并将 ActionBarSherlock 中的 android-support-v4 复制到 ViewPagerIndicator 的 lib 文件夹中

# asp.net-mvc - 如何从视图中调用方法？MVC

> ID：11568423
> 
> 赞同：0
> 
> 时间：2012-07-19T20:04:07.787
> 
> 标签：asp.net-mvc

我有一个视图，`<input type="submit" value="Create" />`当用户单击创建时，应该激活操作方法并将结果写入数据库。

在用户单击视图中的创建按钮时，什么也没有发生。你能告诉我我做错了什么吗？谢谢

```
using System;

using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using TestGuestBook.Models;
using TestGuestBook.Models.Repositories;
using TestGuestBook.ViewModels;

namespace TestGuestBook.Controllers
{
    [HandleError]
    public class HomeController : Controller
    {

        ICommentRepository _repository;

        public HomeController()
        {
            _repository = new CommentRepository();
        }

        // Dependency Injection enabled constructors
        public HomeController(ICommentRepository repository)
        {
            _repository = repository;
        }

        public ActionResult Index()
        {
            // Get all Comments
            List<Comment> commentItems = _repository.FindAll().ToList();
            // Create the ViewModel and associate the list of comments
            CommentListCreateViewModel viewModel = new CommentListCreateViewModel();
            viewModel.CommentItems = commentItems;

            return View(viewModel);
        }

        public ActionResult Create()
        {
            CommentListCreateViewModel createViewModel = new CommentListCreateViewModel();
            return View(createViewModel);
        }

        [HttpPost]
        public ActionResult Create(CommentListCreateViewModel createViewModel)
        {
            if (ModelState.IsValid)
            {
                Comment comment = new Comment
                {
                    Nominative = createViewModel.Nominative,
                    Email = createViewModel.Email,
                    Content = createViewModel.Content
                };
                _repository.Add(comment);
                _repository.Save();
            }
            return View();
        }

    }
} 
```

* * *

看法

```
@model TestGuestBook.ViewModels.CommentListCreateViewModel
@{
    ViewBag.Title = "Index";
}
<h2>
    Index</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>ListAddCommentsViewModel</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Nominative)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Nominative)
            @Html.ValidationMessageFor(model => model.Nominative)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Content)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Content)
            @Html.ValidationMessageFor(model => model.Content)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<table>
    <tr>
        <th>
            Nominative
        </th>
        <th>
            Email
        </th>
        <th>
            Content
        </th>
        <th>
        </th>
    </tr>
    @foreach (var item in Model.CommentItems)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Nominative)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Content)
            </td>
            <td>
            </td>
        </tr>

    }
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:07:46.693

您需要将表单定向到您的`Create`控制器方法：

```
@using (Html.BeginForm("Create", "Home")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:30:43.200

您可以将其保留为 Html.BeginForm() 并在保存后调用 return RedirectToAction("Index"); 添加的项目现在应该显示在列表中。它可能一直在保存，只是之后没有被重定向到索引视图。

# sql - Oracle 外连接与第二个表上的过滤条件

> ID：11568425
> 
> 赞同：0
> 
> 时间：2012-07-19T20:04:15.227
> 
> 标签：sql, oracle, oracle11g

是否存在结果集与以下两个语句不同的情况？

```
select  * from a,b where a.id = b.id and b.name = 'XYZ'
select  * from a,b where a.id =b.id(+) and b.name = 'XYZ' 
```

我认为在这两种情况下，它都会从 a 和 b where 带来公共行`b.name = 'XYZ'`。所以`a.id = b.id(+)`没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:34:28.007

不，没有任何情况下结果集会有所不同。

但是您的假设“`a.id = b.id(+)`没有意义”并非 100% 正确。它*是*有意义的，因为它定义了连接，否则这将是 a 和 b 的笛卡尔积，其中所有行都来自 a 和 b.name = 'XYZ'。

没有效果的是`(+)`, 因为该语句“语义上”是错误的。在 id 上进行外部连接但在名称上加入是没有意义的。

通常需要这样的东西：

```
select  * from a,b where a.id =b.id(+) and b.name(+) = 'XYZ'; 
```

[http://www.sqlfiddle.com/#!4/d19b4/15](http://www.sqlfiddle.com/#!4/d19b4/15)上的简短示例

# oracle - Node.js 和 node-oracle：连接到 Oracle 数据库的问题

> ID：11568428
> 
> 赞同：2
> 
> 时间：2012-07-19T20:04:29.940
> 
> 标签：oracle, node.js, node-oracle

我正在编写一个从 Oracle 数据库中提取数据的 Node.js 应用程序。DBA 最近将数据库迁移到另一台机器上，一切都崩溃了。

我尝试重新创建 tnsnames.ora 和 sqlnet.ora 文件。我相当确定它们是正确的，因为 sqlplus 可以很好地连接到服务。但是 node-oracle 不断报告错误：“ORA-12154: TNS:could not resolve the connect identifier specified”。

这对我来说是莫名其妙的。在我看来，如果我设置了 ORACLE_HOME 环境变量，那么 node-oracle 和 sqlplus 的功能应该相同。我究竟做错了什么？

我尝试改用 node-db-oracle，但它报告了同样的问题。我难住了。

编辑：这就是我的连接方式：

```
 database = new oracle.Database({
            hostname: Preferences["oracle_host"],  // FQDN of the database
            port: Preferences["oracle_port"],
            user: Credentials["oracle_login"],
            password: Credentials["oracle_password"],
            database: Preferences["oracle_database"]
        });

    connection = database.connect(function(error) {
            if(error) {
                Utilities.logger.error(error);
            }
            else {
                Utilities.logger.info("Connected to Oracle database " + Preferences["oracle_host"]);    
                if(callback) callback.call(this, collection, options);
                connection = this;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-01T10:48:45.230

我能够使用 sqlplus 进行连接，但不能使用 nodejs。我正在做这样的连接

```
oracledb.getConnection(
  {
    user          : "test",
    password      : "test",
    connectString : "150.150.50.50:1521/MYDB"
  } 
```

对我有用的解决方案是编辑 sqlnet.ora 文件并更改

```
names.directory_path = (TNSNAMES) 
```

至

```
names.directory_path = (TNSNAMES, EZCONNECT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:42:45.813

该[文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e10646/oci01int.htm#LNOCI16167)帮助我使用`node-oracle`. 我出错的地方是我认为`database`属性是数据库的名称，但实际上它是`service_name`（即在 Oracle 数据库上`GLOBAL_DBNAME`的文件中定义的，而不是）。`listener.ora``SID_NAME`

据我所知`node-oracle`，它不支持`tnsnames.ora`，因为它使用选项来构建连接字符串，例如`//{hostname}:{port}/{database}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:59:10.597

尝试指定`TNS_ADMIN`环境变量。

[如何配置我的 Oracle tnsnames 文件位置？](https://stackoverflow.com/questions/5568342/how-can-i-configure-my-oracle-tnsnames-file-location)

# javascript - Twitter Bootstrap 药丸的问题

> ID：11568430
> 
> 赞同：2
> 
> 时间：2012-07-19T20:04:36.150
> 
> 标签：javascript, jquery, jquery-plugins, twitter-bootstrap

我对 Bootstrap 选项卡/药丸插件有疑问。

我想显示所有`div`（`a`和） `b`，`c`所以我不需要标签来隐藏它们。我想要药丸让用户在页面上从一个部分移动到另一个部分。问题：

*   当用户单击链接时，不显示内容（容器`a`和的示例`b`）。
*   显示删除`data-toggle="pill"`内容，但链接未标有`.active`类。

我准备了这个小提琴：http: [//jsfiddle.net/DLRmp/](http://jsfiddle.net/DLRmp/)向您展示问题。希望你能帮助我，关于药丸的文档似乎有点差：

```
<ul class="nav nav-pills nav-stacked">
    <li class="active"><a data-toggle="pill" href="#a">a</a></li>
    <li class=""><a data-toggle="pill" href="#b">b</a></li>
    <li class=""><a href="#c">c</a></li>
</ul>

<div id="a">I'm not working: when user clicks the link nothing happens.
    But at least link is marked as active!</div>

<div id="b">Me too. I'm not working: when user clicks the link nothing happens. 
    But at least link is marked as active! </div>

<div id="c">I'm working, but link is not marked as active!</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:51:15.110

我使用这个 javascript 片段（加载在准备应用于所有药丸的文档上）

```
$('ul.nav.nav-pills li a').click(function() {           
    $(this).parent().addClass('active').siblings().removeClass('active');           
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:36:44.167

**问题 1：**当您单击 时`href="#c"`，没有添加活动类。在此页面上发布的小提琴和代码中，您没有将`data-toggle="pill"`属性添加到`c`链接中。

* * *

**问题 2：**检查[boostrap 选项卡 javascript 文件](http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js)时，请注意其插件底部的以下代码：

```
 /* TAB DATA-API
  * ============ */

  $(function () {
    $('body').on('click.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
      e.preventDefault()
      $(this).tab('show')
    })
  }) 
```

特别注意使用`e.preventDefault()`. 我相信这就是为什么您的“药丸”链接没有跳转到页内内容的原因。

* * *

**可能的解决方案：**我想还有其他方法可以完成你想要做的事情，但一种选择是`.active`使用你自己的 jquery 函数来玩这个类。

[http://jsfiddle.net/3aANQ/3/](http://jsfiddle.net/3aANQ/3/)

```
$(".nav-stacked li").click(function() {
    $(".nav-stacked li").removeClass("active"); 
    $(this).addClass("active");
});​ 
```

# php - 比较 $foo is_array 或 $foo 是否为假

> ID：11568433
> 
> 赞同：0
> 
> 时间：2012-07-19T20:04:47.037
> 
> 标签：php

我正在尝试比较以下内容：**如果值*不是*数组或值不*等于*false，则返回。**

```
if (is_array($value) != true || $value != false) return; 
```

这以及我尝试的任何其他变体似乎都不起作用。但是，当我在它们自己的 if 语句中单独比较它们时，它们会返回正确的结果。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:31:51.150

您最初说“如果它不是数组或不是假的”。你倒着想。你想要“如果值是一个数组或假继续，否则返回”。

所以：

```
// This says: "if it's not (an array or false)"
if(!(is_array($value) || $value === FALSE)) return; 
```

使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，我们可以将其转换为

```
// This says: "if it's not an array and not false"
if(!is_array($value) && $value !== FALSE) return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:07:13.000

我会这样写：

```
if (!is_array($value) || $value !== false) 
```

php 中的很多东西都可以是 == false，但只有 boolean false 可以是 === false。查看[布尔类型手册页](http://php.net/manual/en/language.types.boolean.php)和[比较运算符手册页](http://ru2.php.net/manual/en/language.operators.comparison.php)

# web - 谷歌搜索我的网站

> ID：11568434
> 
> 赞同：1
> 
> 时间：2012-07-19T20:04:49.707
> 
> 标签：web, seo

当我搜索我的网址时，我在使用 Google 时遇到了一个奇怪的问题。问题是当我输入谷歌搜索前。mydomain.com，结果来自 alldomain.com - 而不是来自我的网站，并且 Google 提供了一个链接“搜索 mydomain.com”，我需要单击该链接以提供 mydomain.com 的结果。我能做些什么来解决这个问题？

这就是我的意思：![在此处输入图像描述](../Images/9e7c581cd9a01060d81487e8c6203c92.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:13:31.980

如果这是一个新网站并且您没有[google-webmaster](http://www.google.com/webmasters/)帐户 - 您应该打开一个。注册您的网站（让 Google 知道您有一个新网站）非常重要，以便它尽快开始索引它。

如果它是一个突然停止出现在谷歌搜索结果中的“旧”网站 - 你可以阅读我在[此处](https://webmasters.stackexchange.com/a/31893/13618)发布的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:07:05.793

如果您想从一个网站搜索结果，您应该搜索：

```
SEARCH STRING site:mydomain.com 
```

# iphone - 使用 opencv 在 iOS 上进行边缘检测和移除

> ID：11568444
> 
> 赞同：3
> 
> 时间：2012-07-19T20:05:28.913
> 
> 标签：iphone, ios, xcode, opencv, edge-detection

我有一个类似于 iphone 扫描仪应用程序所做的项目（docscanner、scannerpro 等）。但我是opencv和objective-c的新手。该应用程序应该检测并删除使用 iphone 拍摄的文档/纸张的边缘/背景。

我已经[在 iPhoneSDK 中看到了 DETECT the Edge of a Document，](https://stackoverflow.com/questions/8921256/detect-the-edge-of-a-document-in-iphonesdk)这是我想要做的。我已经看到 canny 做了什么，但它显示的只是图像中所有形状的边缘，而不是我想要分离的纸张。

我认为这是我应该做的：[OpenCV C++/Obj-C: Detecting a sheet / Square Detection](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection/)，但我不能让它在 xcode 中工作。

而且我不知道该怎么做（作为新手）。我到处寻找，找不到检测文档边缘并从图像中裁剪它们的方法。或者也许我发现了一些东西，但我不明白。我应该用xcode和objective-c对其进行编码。

# mysql - CFWheels - 使用 save() 方法插入记录时出错

> ID：11568445
> 
> 赞同：1
> 
> 时间：2012-07-19T20:05:33.233
> 
> 标签：mysql, coldfusion, railo, cfwheels

使用 save() 时，我在带有 CFWheels 的 Railo 上收到以下错误：

> 无法执行语句：由于 BINLOG_FORMAT = STATEMENT 并且至少一个表使用仅限于基于行的日志记录的存储引擎，因此无法写入二进制日志。当事务隔离级别为 READ COMMITTED 或 READ UNCOMMITTED 时，InnoDB 仅限于行日志记录。

这是我的代码：

```
<cfset params.vote['voteUserID'] = params.link.linkUserID />
<cfset params.vote['voteLinkID'] = params.link.linkID />
<cfset params.vote['voteType'] = 1 />

<cfset vote = model("vote").new(params.vote) />
<cfset vote.save() /> 
```

知道发生了什么吗？我有另一个类似的插入语句，它工作正常。我怀疑这与我的数据库表中的设置有关？我正在使用 MySQL。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:46:40.153

您是否在此特定环境中使用复制？看起来该`BINLOG_FORMAT`设置与复制有关。

我建议查找`BINLOG_FORMAT`MySQL 中设置的位置，研究各种选项是什么，并将其更改为适合您的场景的内容。

请参阅此 SO 答案：[为什么我会得到“无法进行二进制日志记录”。在我的 MySQL 服务器上？](https://stackoverflow.com/questions/9665535/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:22:23.020

好的，所以似乎将数据库表上的存储引擎从“InnoDB”更改为“MyISAM”解决了这个问题。也许出于某种原因，CFWheels 不能很好地与“InnoDB”配合使用；也许有人可以添加评论为什么会这样？

# ruby-on-rails - 如何组合来自多个 has_many 的 ActiveRecord 结果：通过查询？

> ID：11568448
> 
> 赞同：1
> 
> 时间：2012-07-19T20:05:45.137
> 
> 标签：ruby-on-rails, ruby, activerecord

基本上，我有一个带有标记系统的应用程序，当有人搜索标记“badger”时，我希望它返回标记为“badger”、“Badger”和“Badgers”的记录。使用单个标签，我可以这样做来获取记录：

```
@notes = Tag.find_by_name(params[:tag_name]).notes.order("created_at DESC") 
```

它工作正常。但是，如果我得到多个标签（这仅适用于大小写 - 我还没有弄清楚“s”位）：

```
Tag.find(:all, :conditions => [ "lower(name) = ?", 'badger']) 
```

我不能使用 .notes.order("created_at DESC") 因为有多个结果。所以，问题是.... 1）我这样做的方式是否正确？2) 如果是这样，我如何按顺序恢复所有记录？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:15:42.923

一种实现方式是：

```
@notes = []
Tag.find(:all, :conditions => [ "lower(name) = ?", 'badger']).each do |tag|
  @notes << tag.notes
end
@notes.sort_by {|note| note.created_at} 
```

但是您应该知道，这就是所谓的 N + 1 查询，因为它在外部进行一次查询，然后每个结果进行一次查询。这可以通过将第一个查询更改为：

```
Tag.find(:all, :conditions => [ "lower(name) = ?", 'badger'], :includes => :notes).each do |tag| 
```

如果你使用的是 Rails 3 或更高版本，可以稍微重写一下：

```
Tag.where("lower(name) = ?", "badger").includes(:notes) do |tag| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:17:39.687

**已编辑**

首先，获取所有可能的标签名称的数组，复数、单数、小写和大写

```
tag_name = params[:tag_name].to_s.downcase
possible_tag_names = [tag_name, tag_name.pluralize, tag_name.singularize].uniq
# It's probably faster to search for both lower and capitalized tags than to use the db's `lower` function
possible_tag_names += possible_tag_names.map(&:capitalize) 
```

你在使用标签库吗？我知道有些提供了一种查询多个标签的方法。如果您不使用其中之一，则需要在查询中执行一些手动 SQL 连接（假设您使用的是 MySQL、Postgres 或 SQLite 等关系数据库）。我很乐意为您提供帮助，但我不知道您的架构。

# asp.net-mvc-3 - WebService ASP.NET MVC 3 发送和接收

> ID：11568453
> 
> 赞同：3
> 
> 时间：2012-07-19T20:06:12.423
> 
> 标签：asp.net-mvc-3, web-services

几天来，我一直在绞尽脑汁思考如何处理新的需求。

我有两个网站。第一个让用户填写一个应用程序。第二个网站是用于管理用户应用程序的内部网站。我需要开发一个“网络服务”，将应用程序数据从网站 1 发送到网站 2，并向网站 2 返回成功或失败的响应。我以前从未做过网络服务，我对从哪里开始有点困惑。我一直在网上阅读各种示例，但它们似乎都只是构建 Web 服务的起点……没有具体示例。

那么对于发布数据网站 1，我的控制器方法会是什么样子？我是否使用 Json 将数据发布到网站 2？那会是什么样子？指向网站 2 的方法中是否存在某种形式的重定向？

因此，要将响应发布回网站 2，该控制器方法会是什么样子？我假设我会再次使用 Json 将响应发送回网站 1？在指向网站 1 的方法中是否存在某种形式的重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:46:38.313

我会使用 JSON 并将应用程序发布到 Web 服务。

首先，我假设应用程序数据包含在某种类型的对象中。使用[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)将对象序列化为 JSON。它看起来像下面的代码。

```
var application = new Application();
string serializedApplication = JsonConvert.Serialize(application); 
```

其次是发布您的端点的代码（webservice，mvc 操作）。为此，您需要向端点发出 HTTPRequest。以下代码是我用来发布代码的代码。

```
 public bool Post(string url, string body)
    {
        //Make the post
        ServicePointManager.ServerCertificateValidationCallback = (sender, certificate, chain, errors) => true;

        var bytes = Encoding.Default.GetBytes(body);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        Stream stream = null;
        try
        {
            request.KeepAlive = false;
            request.ContentLength = bytes.Length;
            request.ContentType = "application/x-www-form-urlencoded";
            request.Timeout = -1;
            request.Method = "POST";
            stream = request.GetRequestStream();
            stream.Write(bytes, 0, bytes.Length);

        }
        finally
        {
            if (stream != null)
            {
                stream.Flush();
                stream.Close();
            }
        }

        bool success = GetResponse(request);

        return success;
    }

    public bool GetResponse(HttpWebRequest request)
    {
        bool success;

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {

            using (Stream responseStream = response.GetResponseStream())
            {
                if (response.StatusCode != HttpStatusCode.OK && response.StatusCode != HttpStatusCode.Created)
                {
                    throw new HttpException((int)response.StatusCode, response.StatusDescription);
                }

                var end = string.Empty;
                using (StreamReader reader = new StreamReader(responseStream))
                {
                    end = reader.ReadToEnd();
                    reader.Close();

                    success = JsonConvert.DeserializeObject<bool>(end);
                }

                response.Close();
            }
        }

        return success;
    } 
```

因此，现在您可以将 JSON POST 到端点并接收响应，下一步是创建端点。以下代码将让您开始使用 mvc 中的端点，该端点将接收应用程序并对其进行处理。

```
 [HttpPost]
    public ActionResult SubmitApplication()
    {
        //Retrieve the POSTed payload
         string body;
         using (StreamReader reader = new StreamReader(Request.InputStream))
         {
             body = reader.ReadToEnd();
             reader.Close();
         }

         var application = JsonConvert.Deserialize<Application>(body);

         //Save the application
         bool success = SaveApplication(application);

         //Send the server a response of success or failure.
        return Json(success);
    } 
```

上面的代码是一个好的开始。请注意，我**没有测试过**这段代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:17:09.527

您显然有不止一个客户负责数据和操作。因此，您正在寻找服务。

ASP.NET MVC 是开发 RESTful 服务的理想选择。如果您（和您的经理）准备好使用 beta 版本，那么 Checkout ASP.NET-Web API。

如果您想保持稳定的产品，请选择 MVC3。您可能需要编写一些自定义代码以将 XML 和 JSON 格式的数据返回到服务器不同类型的客户端。那里有一些[教程](http://www.iwantmymvc.com/rest-service-mvc3)。

所以创建一个服务（ASP.NET MVC / WCF 服务）。然后您可以创建 2 个客户端应用程序，一个用于外部客户端，另一个用于内部用户。这两个应用程序都可以调用服务中的方法来创建/读取用户帐户/或您想要执行的任何操作。

为了使应用程序更具交互性和生动性，您可以考虑添加一个名为[SiganalR的](https://github.com/SignalR/SignalR/)[奇妙东西](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)，它可以帮助您获取一些实时数据，而无需每隔 n 秒就不断地轮询数据库/中间层！

# php - 在 PHP 中使用重命名函数

> ID：11568455
> 
> 赞同：4
> 
> 时间：2012-07-19T20:06:14.217
> 
> 标签：php

目录中有一个文件，我正在尝试使用 rename( arg1, arg2 ) 重命名 arg1 文件。

但是，arg1 文件包含亚洲字母，我收到该文件不可用的消息。

我该如何解决这个问题

谢谢

```
 $elements = scandir($dir);

foreach ($elements as $key => $value) 
{

    rename("./$value", "$newname");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:20:27.033

Be sure to put the paths correctly:

```
$elements = scandir($dir);
foreach ($elements as $key => $value) {
    rename($dir.'/'.$value, $dir.'/'.$newname);
} 
```

To be less abstract, assume $dir is something like "/home/someuser/somefiles" and your script is located at "/var/www/script.php", you are getting all files (e.g. "oldname.txt") from scandir($dir), so the absolute path to the file is "/home/someuser/somefiles/oldname.txt", but you are passing "./oldname.txt" to the rename function, which is in fact "/var/www/oldname.txt"

# c - 如何在 makefile 构建中启用“#ifndef/#endif”块？

> ID：11568459
> 
> 赞同：4
> 
> 时间：2012-07-19T20:06:38.583
> 
> 标签：c, makefile, mupdf, ifndef

我正在尝试在 MuPDF 中启用调试选项。出于某种原因，他们使用了我想使用的代码`#ifndef NDEBUG`并将其灰显。`#endif`我搜索了整个库，但找不到任何地方定义的 NDEBUG 痕迹。我已经设法通过添加标题来解决这个`#undef NDEBUG`问题，但我想知道是否有更非侵入性的方法可以做到这一点。

那么，你能从makefile中启用“#ifndef/#endif”块吗？

另外，你为什么要用`#ifndef`灰色的代码？不应该是`#ifdef NDEBUG`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T20:08:33.607

您可以在Makefile 中将**-DNDEBUG**添加到以下 3 个变量 - **CFLAGS**、**CPPFLAGS**和**CXXFLAGS**以定义 NDEBUG。这相当于添加#define NDEBUG

还有其他变化：

```
-DNBDEBUG=1 
```

相当于

```
#define NDEBUG 1 
```

并且回答为什么有人会使用 #ifndef 而不是 #ifdef 的问题是因为它非常清楚地突出了您对原始代码的修改。

例如，将以下代码视为原始版本：

```
int a = 123;
int b = 346;
int c = a + b; 
```

你需要添加一个宏 DO_MULT 来代替 - 有两种方法可以做到这一点。

第一个变体：

```
int a = 123;
int b = 346;
#ifdef DO_MULT
int c = a *b;
#else
int c = a + b;
#endif 
```

第二种变体：

```
int a = 123;
int b = 346;
#ifndef DO_MULT
int c = a + b;
#else
int c = a *b;
#endif 
```

如果您使用 difftools 查看更改 - 与第一个变体相比，第二个变体将更清楚地显示差异。

使用 #ifndef 的另一个原因是在 CATCH-ALL-EXCEPT 场景中执行某些操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T20:08:59.520

`#ifndef` **如果定义了标志，则**不会省略代码，因此它是用法。**您已经设法使用`#undef`.**

 **两者`#ifdef`和`#ifndef`都是有用的，作为理由考虑这个人为的例子：你有一堆调试`printf`代码，你*只想*使用`#ifdef DEBUG`条件编译成一个调试版本。在同一个可执行文件中，您还具有要从 Debug 构建中*删除的代码。*在这种情况下，使用`#ifndef DEBUG`是您唯一的选择。

您*可以*在 makefile 中定义此类标志，也可以尝试使用`-U`. 在 makefile 中查找`CFLAGS`变量并添加`-UNDEBUG`，或者直接将其添加到编译目标中的编译器调用中。

如果标志*是*在源树中的某处定义的，那么这将无济于事。**

# android - 当我尝试播放音频（Android/Eclipse）时，我的媒体播放器类出现运行时错误

> ID：11568461
> 
> 赞同：0
> 
> 时间：2012-07-19T20:06:46.773
> 
> 标签：android, eclipse, audio, media-player, emulation

我正在尝试制作一个通知应用程序，当我单击按钮时，它应该在弹出通知时发出哔声。

当我单击按钮时，会出现通知，但运行时出现声音错误。我认为运行时出现“模拟器没有响应”错误。

我收到 android 媒体播放器错误：

> 07-19 19:32:28.846: I/StagefrightPlayer(110): setDataSource('android.resourse://com.example.status/2130968576') 07-19 19:32:28.846: E/MediaPlayer(198):错误 (1, -2147483648) 07-19 19:32:28.846: W/NotificationService(198): android.reourse://com.example.status/2130968576 的错误加载声音 07-19 19:32:28.846: W /NotificationService(198): java.io.IOException: Prepare failed.: status=0x1 07-19 19:32:28.846: W/NotificationService(198): at android.media.MediaPlayer.prepare(Native Method) 07-19 19:32:28.846: W/NotificationService(198): 在 com.android.server.NotificationPlayer$CreationAndCompletionThread.run(NotificationPlayer.java:90) 07-19 19:32:28.976: D/dalvikvm(273): GC_CONCURRENT 释放701K，55%免费3028K/6599K，外接2434K/2980K，暂停8ms+4ms

这是Java代码以防万一：

```
package com.example.status;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b =  (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
                        Notification notify = new Notification(android.R.drawable.stat_notify_more, 
                                "This is important", System.currentTimeMillis());
                        Context context = MainActivity.this;
                        CharSequence title = "You have been notified";
                        CharSequence details = "Continue with what you are doing";
                        Intent intent = new Intent(context, MainActivity.class);
                        PendingIntent pending = PendingIntent.getActivity(context, 0, intent, 0);
                        notify.setLatestEventInfo(context,title,details,pending);
                        notify.sound = Uri.parse("android.resourse://com.example.status/" + R.raw.beep);

                        nm.notify(0, notify);

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:35:39.747

您的代码具有以下内容：

```
android.resourse://com.example.status/2130968576 
```

尝试用“c”拼写“资源”：

```
android.resource://com.example.status/2130968576 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:01:12.893

`resourse`用**s**拼写是您收到该错误的原因。

# sql - 使用 LogiXML 将更多信息行导出为 PDF 未显示

> ID：11568462
> 
> 赞同：0
> 
> 时间：2012-07-19T20:06:47.180
> 
> 标签：sql, .net, xml, pdf, export

我在尝试将报告导出为 PDF 格式时遇到了一些问题。我有一个操作报告元素来显示更多信息行，这意味着它默认隐藏（显示模式：无），直到用户单击特定元素。但是，这在尝试导出时会产生问题，因为当我检查 Target.PDF 元素中的“保留显示元素”选项时，我会看到一个空白页。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:05:44.670

解决这些类型的导出问题的最佳方法是开始简化定义文件，以便您可以轻松地隔离问题。对于您的报告，我可能会首先评论 MoreInfoRow，以便它实际上不会影响导出。

- MoreInfoRow 消失后报告是否导出为 PDF？如果是，我们可以假设问题与 MoreInfoRow 有关。如果不是，那么有一个不同的问题。如果您删除了 MoreInfoRow 并且它仍然无法正确导出，我可能会猜测问题是：1）您在导出时传递了不正确的显示模式，或者 2）报告需要使用 Action PDF 传递参数以及没有正确设置。

有关 ShowModes 的更多详细信息，我会访问：

[http://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=1043](http://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=1043)

如果 MoreInfoRow 是问题所在，您通常可以尝试简化报告。这是一个您可以尝试的快速示例：

```
<Report ID="Default" SavedBy="test">
  <StyleSheet Theme="SimpleBlue" />
  <Body>
    <Label Caption="Export PDF" Class="ThemeLinkButton">
      <Action Type="PDF">
        <Target Type="PDF" KeepShowElements="True" Report="CurrentReport" />
      </Action>
    </Label>
    <LineBreak LineCount="3" />
    <DataTable ID="dtExport" Width="450">
      <DataLayer Type="Static" ID="myData1">
        <StaticDataRow id="001" name="Sample Row 1" />
        <StaticDataRow id="002" name="Sample Row 2" />
        <StaticDataRow id="003" name="Sample Row 3" />
      </DataLayer>
      <DataTableColumn ID="colid" Header="id">
        <Label ID="lblid" Caption="@Data.id~">
          <Action Type="ShowElement" ElementID="mirTest" ID="actShowMir" />
        </Label>
      </DataTableColumn>
      <DataTableColumn ID="colname" Header="name">
        <Label ID="lblname" Caption="@Data.name~" />
      </DataTableColumn>
      <MoreInfoRow ShowModes="None" ID="mirTest">
        <Label Caption="This is the More Info Row" />
      </MoreInfoRow>
    </DataTable>
  </Body>
</Report> 
```

# javascript - 寻找改进我的 javascript (jquery) 代码的想法。递归函数

> ID：11568468
> 
> 赞同：3
> 
> 时间：2012-07-19T20:07:13.900
> 
> 标签：javascript, jquery, function, recursion, jquery-animate

我制作了这段代码，可以制作一些淡入淡出的视觉“瓷砖”。但目前我遇到了一点性能问题。

尽管大多数浏览器都可以正常运行代码（尤其是 firefox），但有些像 safari 会在一段时间后出现问题（一段时间 = 15 秒）。

我认为这是由于我的递归函数（名为**changeopacity**的函数在延迟时永远调用自己）？或者是吗？

但无论如何，问题在于这段代码对于大多数浏览器来说真的很重。有没有，或者更多我怎样才能让这段代码表现得更好？有什么想法吗？（代码示例会很好）谢谢:-)

实际代码：

```
$(document).ready(function () {

    var aniduration = 2000;
    var tilesize = 40;

    createtable(tilesize);

    $(".tile").each(function (index, domEle) {
        var randomdelay = Math.floor(Math.random() * 3000);
        setTimeout(function () {
            changeopacity(aniduration, domEle);
        }, randomdelay);
    });

    $("td").click(function () {
        clickanimation(this, 9);
    });

    $("td").mouseenter(function () {
        var element = $(this).find("div");
        $(element).clearQueue().stop();
        $(element).animate({opacity: "0.6"}, 800);
    });

    $("td").css("width", tilesize + "px").css("height", tilesize + "px");

});

function createtable(tilesize) {
    var winwidth = $(window).width();
    var winheight = $(window).height();
    var horztiles = winwidth / tilesize;
    var verttiles = winheight / tilesize;

for (var y = 0; y < verttiles; y++)
{
    var id = "y" + y;
    $("#tbl").append("<tr id='" + id + "'></tr>");

    for (var x = 0; x < horztiles; x++)
    {
        $("#" + id).append("<td><div class='tile' style='opacity: 0; width: " + tilesize + "px; height: " + tilesize + "px;'></div></td>");
    }
}   
}

function changeopacity(duration, element){
    var randomnum = Math.floor(Math.random() * 13);
    var randomopacity = Math.floor(Math.random() * 7);
    var randomdelay = Math.floor(Math.random() * 1000);

    if ($(element).css("opacity") < 0.3)
    {
        if (randomnum != 4)
        {
            if ($(element).css("opacity") != 0)
            animation(element, 0, duration, randomdelay);
        }
        else
        {
            animation(element, randomopacity, duration, randomdelay);
        }
    }
    else
    {
        animation(element, randomopacity, duration, randomdelay);
    }

    setTimeout(function () {
        return changeopacity(duration, element);
    }, duration + randomdelay);
}

function animation(element, randomopacity, duration, randomdelay){
    $(element).clearQueue().stop().delay(randomdelay).animate({opacity: "0." + randomopacity}, duration);
}

function clickanimation(column, opacitylevel) {
        var element = $(column).find("div");
        $(element).clearQueue().stop();
        $(element).animate({"background-color": "white"}, 200);
        $(element).animate({opacity: "0." + opacitylevel}, 200);
        $(element).delay(200).animate({opacity: "0.0"}, 500);
        //$(element).delay(600).animate({"background-color": "black"}, 500);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:44:36.347

第一个问题是您正在`setTimeout`为页面上的每个单元格创建一个。唯一能够处理的浏览器是 Internet Explorer，然后由于许多 CSS 更改导致重绘缓慢而失败。

我强烈建议您编写自己的事件调度程序。像这样的东西，我在大学项目中使用过：

```
var timer = {
    length: 0,
    stack: {},
    timer: null,
    id: 0,
    add: function(f,d) {
        timer.id++;
        timer.stack[timer.id] = {f: f, d: d, r: 0};
        timer.length++;
        if( timer.timer == null) timer.timer = setInterval(timer.run,50);
        return timer.id;
    },
    addInterval: function(f,d) {
        timer.id++;
        timer.stack[timer.id] = {f: f, d: d, r: d};
        timer.length++;
        if( timer.timer == null) timer.timer = setInterval(timer.run,50);
        return timer.id;
    },
    remove: function(id) {
        if( id && timer.stack[id]) {
            delete timer.stack[id];
            timer.length--;
            if( timer.length == 0) {
                clearInterval(timer.timer);
                timer.timer = null;
            }
        }
    },
    run: function() {
        var x;
        for( x in timer.stack) {
            if( !timer.stack.hasOwnProperty(x)) continue;
            timer.stack[x].d -= 50;
            if( timer.stack[x].d <= 0) {
                timer.stack[x].f();
                if( timer.stack[x]) {
                    if( timer.stack[x].r == 0)
                        timer.remove(x);
                    else
                        timer.stack[x].d = timer.stack[x].r;
                }
            }
        }
    }
}; 
```

然后，使用相同的参数`setTimeout`调用而不是使用。`timer.add`同样，`setInterval`您可以调用`timer.addInterval`.

这将允许您拥有任意数量的计时器，并且它们都将运行在一个单一`setInterval`的 ，对浏览器造成的问题要少得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:58:56.593

不错的动画:-) 但是，我发现了一些错误和可能的改进：

*   您的表格不会在窗口调整大小时重建。不确定是错误还是功能:-)
*   使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)。你有很多元素，每个事件处理程序都是昂贵的。可悲的是，这不适用于非冒泡`mouseenter`事件。
*   如果您不对 with 和 height 使用内联样式，那就太好了——这些不会改变。对于 div 来说，无论如何它们都是 superflouos 。
*   我看不出所有这些元素都有 ID 的原因。html-string 的构建可能更简洁。

*   缓存元素！！！您几乎在每个变量上都使用了`jQuery`构造函数，构建了一个新实例。只需重复使用它们！

*   你的`changeopacity`函数看起来有点奇怪。如果不透明度低于 0.3，是否有 13 分之一的机会将动画设为零？这可能表达得更严格。您也可以将不透明度缓存到一个变量中，而不是每次都从 dom 中读取它。

*   没有理由将 the`duration`和其他常量作为参数传递，它们永远不会改变并且可以在全局范围内使用。

*   您应该使用[方法的](http://api.jquery.com/animate/)[完整回调，`animate`](http://api.jquery.com/animate/)而不是使用超时。超时永远不会准确，它们甚至可能会干扰这里导致（小）问题。

```
var duration = 2000,
    tilesize = 40,
    clickopacity = 0.9;

$(document).ready(function () {

    filltable($("#tbl"), tilesize)
      .on("click", "td", clickanimation);

    $(".tile").each(function() {
        changeopacity($(this));
    });

    $("#tbl div").mouseenter(function () {
        $(this).clearQueue()
               .stop()
               .animate({opacity: "0.6"}, 800);
    });
});

function filltable(tbl, tilesize) {
    var win = $(window).width();
    var horztiles = win.width() / tilesize;
    var verttiles = win.height() / tilesize;

    for (var y = 0; y < verttiles; y++) {
        var tr = "<tr>";
        for (var x = 0; x < horztiles; x++)
            tr += "<td style='width:"+tilesize+"px;height:"+tilesize+"px;'><div class='tile' style='opacity:0;'></div></td>");
        tbl.append(tr+"</tr>");
    }
    return tbl;
}

function changeopacity(element) {
    var random = Math.floor(Math.random() * 13);
    var opacity = Math.floor(Math.random() * 7);
    var delay = Math.floor(Math.random() * 1000);

    if (element.css("opacity") < 0.3 && random != 4)
        opacity = 0;

    element.clearQueue().stop().delay(delay).animate({
        opacity: "0." + opacity
    }, duration, function() {
        changeopacity(element);
    });
}

function clickanimation() {
    $(this.firstChild)
      .clearQueue()
      .stop()
      .animate({"background-color": "white"}, 200)
      .animate({opacity: "0." + clickopacity}, 200)
      .delay(200).animate({opacity: "0.0"}, 500);
    //.delay(600)
    //.animate({"background-color": "black"}, 500);
} 
```

# php - Dojo xhr 未设置 XmlHttpRequest

> ID：11568470
> 
> 赞同：0
> 
> 时间：2012-07-19T20:07:20.783
> 
> 标签：php, ajax, dojo

我正在使用 Dojo 1.7.2 并尝试以下代码

```
var request = xhr.get({
        url: location,
        content : content,
        load : function( data ){
            for( var x in data )
                {
                    alert ( x + data[x] );
                }
        },
        error : function()
        {
            alert( 'Had an eror' );
        },
        handleAs : 'json'
    }); 
```

然后在php中我执行以下操作来尝试检测xmlhttprequest

```
function isAjax(){

    $ajax = (isset( $_SERVER[ 'HTTP_X_REQUESTED_WITH' ] ) ) &&
        ( strtolower( $_SERVER[ 'HTTP_X_REQUESTED_WITH' ] ) ==  'xmlhttprequest' );

    return $ajax;
} 
```

但是 isAjax 函数返回 false。

如果我这样做，`xhr.post`那么它工作正常。我认为这只是使用 GET 而不是 POST 的副作用？是它还是我没有检查的其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:33:38.047

该解决方案基于 Zend Framework 版本。

```
function isAjax() {
    $header = 'X_REQUESTED_WITH';

    // Try to get it from the $_SERVER array first
    $temp = 'HTTP_' . strtoupper(str_replace('-', '_', $header));
    if (isset($_SERVER[$temp])) {
        return $_SERVER[$temp] == 'XMLHttpRequest';
    }

    // This seems to be the only way to get the Authorization header on
    // Apache
    if (function_exists('apache_request_headers')) {
        $headers = apache_request_headers();
        if (isset($headers[$header])) {
            return $headers[$header]  == 'XMLHttpRequest';
        }
        $header = strtolower($header);
        foreach ($headers as $key => $value) {
            if (strtolower($key) == $header) {
                return true;
            }
        }
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:59:47.377

附加此标头不是标准 - 因为在大多数情况下这是不必要的开销。

您需要自己设置标题 - 并且可以随意调用它。你想要的是`headers: { "X-Requested-With": "XMLHttpRequest" }`：

```
var request = xhr.get({
    url: location,
    content : content,
    headers: { "X-Requested-With": "XMLHttpRequest" }, // << < add this
    load : function( data ){
        for( var x in data )
            {
                alert ( x + data[x] );
            }
    },
    error : function()
    {
        alert( 'Had an eror' );
    },
    handleAs : 'json'
}); 
```

# iphone - 自动提交应用到应用商店

> ID：11568473
> 
> 赞同：-4
> 
> 时间：2012-07-19T20:07:40.130
> 
> 标签：iphone, templates, app-store, account

我计划创建一项服务，其中包括基于模板创建 iPhone 应用程序并将其提交到 AppStore，几乎无需人工干预。苹果允许吗？

一些类似的初创公司现在要求用户使用他们自己的开发者帐户（费用为 100 美元，并且不会由我的用户支付）。

原则上我不明白为什么不这样做，因为允许常规开发人员提交客户的应用程序。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:10:06.850

苹果绝对不允许。因为这将使用单个开发者帐户提交应用程序，来自购买帐户的人（在本例中为您）不同的人。

此外，如果他们可以提交任何东西，如果有人以您的名义提交了不合适的东西，那将是您的问题，而不是他们的问题。

此外，我很确定您的客户会希望他们的名字在 AppStore 中用于他们的应用程序而不是您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:13:15.497

This is definitely not allowed by Apple. Even if it was, the apps would be under your name so any in app purchase would be put into your bank account (cha-ching $$$)

# java - MyBatis SelectList 输出 CopyOnWriteArrayList

> ID：11568478
> 
> 赞同：3
> 
> 时间：2012-07-19T20:07:52.547
> 
> 标签：java, concurrency, mybatis

请耐心等待新手问题，因为我正在尝试同时学习 MyBatis 和 java。我有一个需要使用线程安全变量的应用程序。基于一些研究和我对如何使用该应用程序的想法，我决定使用 CopyOnWriteArrayList 而不是 Vector。

当我从 mybatis sql 会话中调用 selectList 时，有没有办法告诉它创建一个 CopyOnWriteArrayList 作为它的返回而不是一个 ArrayList？诚然，我的配置代码是两行而不是一行，但我内心的某些东西说必须有更好的方法和/或我不是第一个遇到这种情况的人。

```
List<Team> teams = session.selectList("getTeamsByGameID", gameID);
List<Team> arrayListReturn = new CopyOnWriteArrayList<Team>(teams);
return arrayListReturn; 
```

提前致谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T21:34:22.330

我知道有两种方法来处理这个问题。

**选项 1**：使用 Mapper 类并指定要返回的 List 类型。

定义一个映射器接口：

```
public interface TeamMapper {
  CopyOnWriteArrayList<Team> getTeamsByGameID();
} 
```

您的映射器 xml 文件保持不变。执行查询的代码更改为：

```
TeamMapper m = session.getMapper(TeamMapper.class);
List<Team> lt = m.getTeamsByGameID();
System.out.println(lt.getClass());  
  //=> prints out "class java.util.concurrent.CopyOnWriteArrayList" 
```

**选项 2**：创建一个 ResultHandler 并将其传递给`session.select()`方法。

在这里，您使用 ResultHandler 接口。该接口要求您覆盖一个方法，`handleResult`该方法会在查询进行时给出从数据库返回的每个结果。

在您的情况下，您的 ResultHandler 看起来像这样：

```
public class TeamResultHandler implements ResultHandler {

  private List<Team> teams = new CopyOnWriteArrayList<Team>();

  @Override
  public void handleResult(ResultContext rc) {
    countries.add((Team) rc.getResultObject());
  }

  // provide a getter so you can retrieve it when finished
  public List<Team> getTeamList() {
    return teams;
  }
} 
```

`selectList`您现在可以使用 ，而不是像上面那样使用，`session.select(String, ResultHandler)`如下所示：

```
TeamResultHandler rh = new TeamResultHandler();
session.select("getTeamsByGameID", rh);
List<Team> lt = rh.getTeamList();
return lt; 
```

此解决方案比您的解决方案更冗长（在查询代码中需要一个额外的类和三行，而不是 2 行），但它只创建一个列表，而不是两个，因此您必须决定哪个最适合您的需求。

此外，ResultHandlers 可以用于其他事情 - 确保结果以某种方式排序或过滤或其他方式，以防您需要。

# git - 在git中，我们如何在项目中添加子模块，但只拉入子模块的一个子目录？

> ID：11568479
> 
> 赞同：2
> 
> 时间：2012-07-19T20:08:04.233
> 
> 标签：git, git-submodules

所以我们有一个子模块：App-Models/src/models/question.rb

我们的主要 Rails 应用程序是：App-Rails（使用子模块 App-Models）

```
cd App-Rails
git submodule add git@url:SC-Models app/models 
```

这将创建：

```
SC-App/app/models/src/models/question.rb 
```

好像那个子目录结构实在是太乱了，太嵌套了，怎么避免呢？

我们基本上希望拥有：

```
App-Models/src/models/question.rb 
```

和 App-Rails/app/models/question.rb （来自子模块）

附言。我们喜欢将 App-Models 放在子目录中，这样更容易测试文件。

# javascript - 在 JavaScript 和 HTML 中创建智能感知类型控件

> ID：11568480
> 
> 赞同：0
> 
> 时间：2012-07-19T20:08:18.690
> 
> 标签：javascript, jquery, html

我即将着手创建一个 Jquery 插件，该插件将以类似于它在 Visual Studio 中呈现的方式提供类型提前查找。

虽然我对自动完成和其他类似的提前输入插件很熟悉，但我想制作它，以便弹出窗口位于文本区域中输入的单词下方。

有没有办法在文本框中获取插入符号的当前 x 和 y？

谢谢

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:22:45.850

有一个复杂的解决方案涉及使用画布元素覆盖输入并测量其中的文本（或仅具有隐藏的画布元素） - 但我认为这在旧版 IE 中不起作用。

您可以通过将字符及其相对宽度相加（使用已知宽度的单色字体）来测量文本的宽度。然后只需抓住输入的顶部/左侧并在单词之前添加 charWidth * 字符数（包括空格）应该会给你一个有点准确的“顶部/左侧”的结尾（或者如果你这样做的话）的开头）单词。

如果您需要一个编码示例，请告诉我，我可以制作一些合适的东西。然而，这（imo）将是最简单的方法（单字体+计算宽度+输入偏移）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:35:48.157

您可以使用选择和范围 API 来实现。但是 IE 和非 IE 之间的 API 存在很多差异。请查看 msdn 和 mdn 以了解选择和范围 API。

# html - 使用 CSS 使链接中的文本可选

> ID：11568482
> 
> 赞同：13
> 
> 时间：2012-07-19T20:08:32.890
> 
> 标签：html, css, hyperlink, html-select

我正在一个收集著名语录的网站上工作。引用的文本是做其他事情的链接 [...] 但我也希望用户可以选择和复制引用的文本。

但在几乎所有浏览器中，用户都无法轻松地选择链接中的文本。

是否可以在 CSS 中覆盖它并使用户可以选择文本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T20:33:13.410

在 Firefox 中，您可以通过按键选择部分超链接`Alt`，然后像往常一样使用鼠标进行选择。因此，一种选择是使用以下方法实现类似的功能`jQuery`：如果`Alt`按下键（或您指定的键）并且鼠标指针位于链接上方，则禁用链接。释放密钥后，启用链接。当然，您必须告诉您的用户如何进行选择。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-14T08:52:19.233

你可以，

步骤1 ：

创建一个可拖动到锚标记的属性。

```
<a href="http://www.exaple.com" **draggable="false"**>Select Text From Here</a> 
```

第2步 ：

使光标样式**自动**和用户选择必须是**文本**或**全部**

```
a
{
    cursor: auto;
    -webkit-user-select: text;
    -moz-select: text;
    -ms-select: text;
    user-select: text;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T20:15:51.823

This isn’t really a job for CSS, as this is functionality, not rendering. And it is a difficult issue, because a click on a link is supposed to mean following the link, and breaking this would create a major usability problem.

The best approach is to avoid making the quotations links and use links separately along with them. For example, the credits below a quotation, or the name of the cited resource in the credits, would be a natural link. And if you want a click to “do something else”, then perhaps you should use buttons, not links, associated with the quotations.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T20:15:27.630

You can't. You can, however, make an element look like a link but use JS to actually handle the "link" part of it.

jQuery:

```
$(".q").click(function() {
    window.location.href=$(this).attr('data-link');
}); 
```

HTML:

```
<span data-link="link.html" class="q">text here</span> 
```

CSS (to give it the "hand" cursor)

```
.q {
  cursor: pointer;
} 
```

[Demo](http://jsbin.com/ixapig)

I would just keep the quote just text (no link) and then add a smaller link at the end for more info or whatever it may be.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-09T18:55:13.007

假设您有一个“框”，例如号召性用语链接，其主要目的和用途是将用户带到新页面。但同样重要的是，一种“选择”*某些*文本（*例如地址、电话号码，或者在您的情况下 - 歌词*）的方法，如下所示效果很好。

需要注意的是，“可选”文本本身是不可点击的。但是话又说回来，对于打算选择不会成为问题*的文本的人。*对于其他试图点击该链接的人来说，他们将不得不点击超出可选文本边界的一点点。

```
<!-- See stylized version in CodePen link below -->
<div class="box-link">
  <a href="#" class="box-link__anchor"><span>Apple Park Visitor Centre</span></a>
  <span class="box-link__text">10600 North Tantau Avenue<br />Cupertino, CA 95014</span>
</div> 
```

**CodePen 链接：**

[https://codepen.io/mjoanisse/pen/YMNaae](https://codepen.io/mjoanisse/pen/YMNaae)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T20:13:32.133

No, but you shouldn't have massive blocks of text in a link - a link should ideally be just one or two words, not an entire paragraph.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T20:16:24.927

如果没有看到您的网站在运行，我无法判断，但我怀疑问题在于您的链接标签包含的不仅仅是引用。

如果链接显示为“To be or not to be——这就是问题”，那么选择它应该与选择任何其他问题相同。如果链接是“这里有一句名言：‘成为或不成为——这就是问题。点击这里做其他事情！” 那么他们将无法选择中间的文本，而这正是他们想要的。

确保您的链接文本*只是*他们想要选择的文本，并将其他任何内容放在标签之外，您会没事的。

# .net - 从网格中的特定单元格/列获取用户控件

> ID：11568484
> 
> 赞同：1
> 
> 时间：2012-07-19T20:08:36.790
> 
> 标签：.net, wpf, web-applications, casting, grid

我有一个列 = 3 和行 = 5 的网格。每个单元格都包含在运行时创建的相同自定义用户控件。每个自定义用户控件都有一个名称和其他不同的属性。

到目前为止，一切都很好....

当我尝试在我使用（vb.net 和 WPF）的特定单元格中获取对象时，此代码：

```
Dim currentContainer As ObjectContainerControl = ContainerGrid.Children.Cast(Of UIElement)().OfType(Of ObjectContainerControl)().Where(Function(c) Grid.GetRow(c) = 0 And Grid.GetColumn(c) = 0) 
```

我的自定义用户控件和容器在哪里`ObjectContainerControl`Grid 是我的网格名称

此行向我发送以下错误：

无法将类型的对象`WhereEnumerableIterator'1[MyProject.ObjectContainerControl]`转换为类型`My.ObjectContainerControl`。

我怎样才能解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:53:06.773

您需要从当前查询中获得的 IEnumerable 中选择一个元素。

调用 First 方法作为查询的最后一步，以获取正确的元素。

```
Dim currentContainer As ObjectContainerControl = 
    ContainerGrid.Children.Cast(Of UIElement)().OfType(Of ObjectContainerControl)()
    .Where(Function(c) Grid.GetRow(c) = 0 And Grid.GetColumn(c) = 0).**First()** 
```

# mysql - 以可扩展和可扩展的方式存储用户配置文件字段和信息

> ID：11568487
> 
> 赞同：1
> 
> 时间：2012-07-19T20:08:52.840
> 
> 标签：mysql, sql, database-design, schema, database-schema

我在一个专注于特定利基的社交网站上工作，我有一个关于存储用户个人资料信息的问题。虽然我希望用户能够存储诸如性别、职业、喜欢、不喜欢等信息。我也希望这样做，如果我想在将来添加更多的个人资料字段，我可以这样做如此轻松，甚至可能通过管理界面。

这是我到目前为止构建的数据库模式：

**用户**

*   身份证（PK）
*   电子邮件
*   密码（等等...）

**ProfileFields**（这将存储诸如“性别”、“职业”之类的字段，以及期望的输入类型：文本、列表、复选框、单选按钮等）

*   身份证（PK）
*   字段标签
*   is_optional
*   value_type（枚举：文本、文本区域、列表、下拉列表、复选框、单选）
*   is_multiple_allowed（仅对列表有效，真的）

**ProfileFields_Presets （这将存储任何给定 ProfileFields 条目的预设可选值，仅当***value_type*为列表、下拉列表、复选框或单选时才会有条目）

*   身份证（PK）
*   guid（用于 HTML 元素 ID 等）
*   profile_field_id (FK: ProfileFields)
*   排序
*   field_preset（例如“男性”、“女性”代表性别）

**User_ProfileFields**（这将存储各种 ProfileFields 条目的用户输入）

*   user_id（PK，FK：用户）
*   profile_field_id (PK, FK: ProfileFields)
*   user_value（无论用户输入什么；这将是 FK:ProfileFields_Values 或用户输入的文本）

诸如“性别”之类的配置文件字段（具有用户可以选择的预设值）将实现 ProfileFields_Values 数据库（用于存储预设值），而诸如“职业”之类的字段（通常是开放式的）则不会。

基本上，我只是想知道这是否足够。这样做是否会出现任何问题？

另外，在上面的 Users_ProfileFields 表中哪个更有效？只有一个可以存储外键 ID 或自定义输入的 *user_value* 字段？或者将它们分成 *user_value_id* 和 *user_value_text*，其中两者之一将始终为空，而另一个填充数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:59:05.587

我会保持原样。我会分开到 user_value_id，然后是 user_value_text。以 User_value_id 为键

# matlab - 如何分析二维曲线的上升/下降趋势

> ID：11568492
> 
> 赞同：0
> 
> 时间：2012-07-19T20:09:23.547
> 
> 标签：matlab

`a`并且`x`是数据，我想在 MATLAB 中提取曲线的增加/减少趋势。我想提取a的增加/减少点和x的相应值..

```
a =

  Columns 1 through 9

    1.0265    1.5121    2.0447    2.5024    3.0697    4.0633    5.0202    6.1585    8.1711

  Columns 10 through 18

   10.2405   11.0000   12.0364   14.8711   20.3985   25.5645   30.4792   40.4400   50.9230

  Columns 19 through 21

   70.5175   79.0374  107.9006

x =

  Columns 1 through 9

   40.1157   30.0994   20.1416   18.7038   18.3298   18.3710   18.6200   20.2776   23.5150

  Columns 10 through 18

   26.7840   30.3027   34.3607   40.2961   53.4651   65.4319   79.5399   97.1246  114.1576

  Columns 19 through 21

  140.3374  148.4362  160.0000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:23:56.730

如果你想要一条趋势线，试试简单的线性回归

[http://en.wikipedia.org/wiki/Simple_linear_regression](http://en.wikipedia.org/wiki/Simple_linear_regression)

您可以在 matlab 中使用`polyfit`and`polyval`函数执行此操作。这将提供最适合您的数据的直线，并可用于您的趋势线。

# php - AJAX PHP 重定向

> ID：11568495
> 
> 赞同：1
> 
> 时间：2012-07-19T20:09:32.017
> 
> 标签：php, ajax, codeigniter

我通过 AJAX 发布表单，如果成功，它会重定向到另一个页面。表单提交成功，但重定向部分失败。

在我的 chrome 开发人员工具栏中，它显示正确的请求 url，请求方法 GET 和状态码 200 OK。

JavaScript 看起来像：

```
$('#submit-login').live('click', function(e) {
    e.preventDefault();

    var username = $('#username').val();
    var password = $('#password').val();

    var dataString = 'username=' + username + '&password=' + password;

    $.ajax({
        type: 'POST',
        data: dataString,
        url: '/account/do_ajax/login',
        dataType: 'json',
        success: function(data) {
            if(data.redirect) {
                window.location.href = data.redirect;
            } else {
                $('.message').hide();
                $('.message').html(data);
                $('.message').fadeIn('slow');
            }
        }
    });
}); 
```

和 PHP

```
 public function do_ajax($type) {
    if($type == 'login') {
        $this->_submit_login();
    }   
}

  public function _submit_login() {
    if($this->form_validation->run('login')) {
        $data = array(
            'username' => $this->input->post('username'),
            'password' => sha1($this->input->post('password'))
        );
        $authenticate = $this->account_model->authenticate($data['username'], $data['password']);
        if($authenticate) {
            $this->session->set_flashdata('success', 'You have successfully logged in.');
            redirect('/account');
        } else {
            echo json_encode('Could not log you in, your details are incorrect.');
        }
    } else {
        echo json_encode('<ul class="errors">'.validation_errors('<li>', '</li>').'</ul>');
    }
} 
```

任何想法我哪里出错了？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:13:27.787

For the redirection try this :

```
window.location = data.redirect; 
```

# sql - 如何在 SQLite 中模拟 REPEAT()

> ID：11568496
> 
> 赞同：10
> 
> 时间：2012-07-19T20:09:37.317
> 
> 标签：sql, sqlite, function, simulation

大多数关系数据库都有某种`REPEAT()`字符串函数，例如：

```
SELECT REPEAT('abc', 3) 
```

会产生

```
abcabcabc 
```

另一方面，SQLite 的功能集非常有限。SQLite 支持的函数在这里列出：

[http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html)

可以`REPEAT()`用 SQLite 中可用的功能进行模拟吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T20:10:43.103

一个解决方案的灵感来自这个对相关问题的回答，这里：

[如何使用 SQLite 模拟 LPAD/RPAD](https://stackoverflow.com/q/6576343/521799)

我想在 Stack Overflow 上分享这个，因为这可能对其他 SQLite 用户有用。解决方案是这样的：

```
-- X = string
-- Y = number of repetitions

replace(substr(quote(zeroblob((Y + 1) / 2)), 3, Y), '0', X) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-03T23:25:01.030

如果要重复**单个字符**，可以使用`printf`函数。

贝娄是一个`*`重复`10`次数的例子。

```
sqlite> select printf('%.' || 10 ||'c', '*');
********** 
```

要重复多个字符，请参阅上面 Lukas 的回答。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-10T18:39:08.930

@Lukas Eder 使用 hex() 而不是引号的解决方案的简化版本：

```
-- X = string
-- Y = number of repetitions

replace(hex(zeroblob(Y)), '00', X) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-02T12:22:23.860

我的回答结合了[Shiplu Mokaddim 的](https://stackoverflow.com/a/54031187/3499840) [“printf 字符替换重复”](https://www.sqlite.org/printf.html)与[Steve Broberg](https://stackoverflow.com/a/51792334/3499840)和[Lukas Eder](https://stackoverflow.com/a/11568516/3499840)的“替换” ：

```
sqlite> SELECT replace(printf('%.' || 5 || 'c', '/'),'/','My string ');
My string My string My string My string My string 
```

从表数据中推导出重复次数也很容易。下面是一个使用公用表表达式的示例：

```
sqlite> WITH cte(string, reps) AS
    ..>   (SELECT * FROM (values ('alpha ', 1),('bravo ', 5),('charlie ', 3) ) )
    ..> SELECT *, replace(printf('%.' || reps || 'c', '/'), '/', string) FROM cte;
alpha       1           alpha
bravo       5           bravo bravo bravo bravo bravo
charlie     3           charlie charlie charlie 
```

# css - 调整背景图像大小以适合 div

> ID：11568498
> 
> 赞同：2
> 
> 时间：2012-07-19T20:09:48.360
> 
> 标签：css, html, resize, hover, mouseover

我有一个关于调整背景图像大小的问题。我有一个 div，它的长度因查看网页的设备而异。

```
PC: Div = 500px * 500px
Tablet: Div = 300px * 300px
Mobile: Div = 200px * 200px 
```

我还有一个 600px * 600px 的图像。我想适合这个图像来填充 div 完全保持纵横比。然后，当用户将鼠标悬停在图像上时，我想创建悬停效果。这是我想要的悬停效果：

[http://mijn-webwinkel.nl/test2.php](http://mijn-webwinkel.nl/test2.php)

（不要介意右边的文字->仅用于测试）

我在网上搜索了一个好的解决方案。有几种 CSS 悬停效果的解决方案（但都需要背景图像）和一些在 div 内调整大小的解决方案（但它们都需要使用非背景图像）。

有没有将两者结合的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:53:57.337

背景尺寸：封面；

适用于调整背景图像的大小以适合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T23:02:08.907

这行得通吗？

[http://jsfiddle.net/kcWQf/1/](http://jsfiddle.net/kcWQf/1/)

这 3 张单独的图像只是为了显示您已调整大小。

# php - 在 OpenCart 中禁用图像缓存

> ID：11568504
> 
> 赞同：1
> 
> 时间：2012-07-19T20:10:11.343
> 
> 标签：php, image, caching, resize, opencart

我目前正在开发一个 iPad/平板电脑优化的 OpenCart 模板。

我在这里偶然发现了一个问题，我要使用的所有图像都是缓存和调整大小的图像，并且在 iPad 模板上我希望显示原始分辨率图像，尤其是主图像。

有没有办法让模板显示原始上传的图像而不是调整大小的图像？如果有人能指出我正确的方向，我将为它开发一个 vqMod（因为我仍然想将重新调整的图像用于主网站）！

非常感谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:32:58.657

您需要这样做的方式是根据 ssl 状态使用 HTTP_IMAGE 或 HTTPS_IMAGE。对于主图像，它很简单，你基本上需要使用

```
<?php echo HTTP_IMAGE . $product_info['image']; ?> 
```

# php - 在 PHP 中的变量前后插入不同的字符串

> ID：11568505
> 
> 赞同：1
> 
> 时间：2012-07-19T20:10:11.263
> 
> 标签：php, arrays, variables

我有 4 个 PHP 变量，每个变量由动态复选框组成，有时它可以是一个变量，有时更多但不超过 4 个：

```
$type = 'type_id = 2';
$color = 'color_id = 3';
$man = 'man_id = 5';
$size = 'size_id = 4 or size_id = 5'; 
```

我需要对这些变量进行Mysql查询，问题是如何在每个变量前添加WHERE和AND字符串。在第一个变量之前，我需要添加 WHERE（可以是 $type 或 $color 或其他）。如果第一个变量处于活动状态并且检查了其他变量，我需要添加 AND 以形成正确的查询。例如

如果仅选中“类型”复选框：

```
WHERE $type 
```

如果选中“大小”和“类型”复选框：

```
WHERE $size AND $type 
```

等等...希望你能理解我的问题，抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:13:13.990

将它们放在一个数组中并[`implode()`](http://php.net/implode)像这样加入它们：

```
$temp = array( $type, $color, $man, $size);
$string = 'WHERE ' . implode( ' AND ', $temp); 
```

如果未设置任何这些变量（即未从复选框提交），请不要将其添加到数组中：

```
$temp = array();
if( isset( $_POST['somecheckbox'])) {
    $temp[] = "( something = value )";
}
if( isset( $_POST['someothercheckbox'])) {
    $temp[] = "( somethingelse = value )";
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:14:54.760

```
$parts = array();
if (!empty($type)) {
    $parts[] = '(' . $type . ')';
}
if (!empty($color)) {
    $parts[] = '(' . $color . ')';
}
if (!empty($man)) {
    $parts[] = '(' . $man . ')';
}
if (!empty($size)) {
    $parts[] = '(' . $size. ')';
}
$where = '';
if (!empty($parts)) {
    $where = 'WHERE ' . implode(' AND ', $parts);
}
$select .= $where; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:17:56.397

假设您的复选框是通过 POST 提交的，您可以在 PHP 中有一个关联数组，它可以迭代并检查相应的复选框选择；如果选中，它会将其添加到字符串中。

粗略的草图可能是：

```
$fields = array(
    'type' => 'type_id = 2',
    'color' => 'color_id = 3',
    'man' => 'man_id = 5',
    'size' => 'size_id = 4 or size_id = 5'
);
$whereClause = '';
foreach ($fields as $field => $value) {
    if (isset($_POST[$field]) && ($_POST['field'] == 1)) {
            // this field is "active"
        if ($whereClause != '') $whereClause .= ' AND ';
        $whereClause .= '(' . $value . ')';
    }
}
if ($whereClause != '') $whereClause = ' WHERE ' . $whereClause; 
```

请注意，我将`$value`每个字段的 括在括号中，这样`and`不会干扰变量`or`中的。`size`

# python - QTableWidget 中嵌入式复选框发出的信号

> ID：11568508
> 
> 赞同：0
> 
> 时间：2012-07-19T20:10:14.937
> 
> 标签：python, pyqt, pyqt4

我目前有一个设置，我试图将复选框嵌入到`QTableWidget`. 我通过以下方式设置复选框单元格：

```
chkbox1 = QTableWidgetItem()
chkbox1.setFlags(Qt.ItemIsUserCheckable | Qt.ItemIsEnabled)
chkbox1.setCheckState(Qt.Unchecked)
chkbox2 = QTableWidgetItem()
chkbox2.setFlags(Qt.ItemIsUserCheckable | Qt.ItemIsEnabled)
chkbox2.setCheckState(Qt.Unchecked)
self.tblData.setItem(i, 0, chkbox1)
self.tblData.setItem(i, 1, chkbox2) 
```

这似乎工作正常，但是我似乎无法捕捉到选中或取消选中框时发出的信号。我试过了：

```
 self.connect(self.tblData, SIGNAL('itemChanged(QTableWidgetItem)'), self.updatePlot) 
```

但这无济于事。作为测试，我已经将一个按钮单击连接到相同的方法，它工作正常，所以我知道这只是我错过了一个信号。

据我了解，`itemChanged`应该在任何数据更改时发出，并且不会更改复选框状态来更改数据？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:24:20.877

信号签名错误。它应该是`itemChanged(QTableWidgetItem *)`（注意`*`）：

```
self.connect(self.tblData, SIGNAL('itemChanged(QTableWidgetItem *)'), self.updatePlot) 
```

或者更好的是，使用[新样式的连接](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html)：

```
self.tblData.itemChanged.connect(self.updatePlot) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:27:50.760

我想您必须改用 ItemClicked 信号。由于 itemChanged 信号在数据更改时发出，并且数据可能是文本。

# ember.js - Ember.js 框架的状态如何？

> ID：11568509
> 
> 赞同：2
> 
> 时间：2012-07-19T20:10:15.130
> 
> 标签：ember.js

所以我开始用 Ember 做一个项目。它是内部 Web 应用程序的一页，需要快速使用并带有快捷键。后端是由 Rails 应用程序提供的 JSON，具有相当健全的 RESTful 路由。

Ember.js 框架的状态到底是什么？Internet 上提供的文档和指南适用于至少 3 或 4 次不同的代码迭代。官方网站上的一些指南甚至不适用于当前的稳定版本——它们需要从 GitHub 克隆 master。我目前正在使用 master，因为它具有我需要的功能（健全的路由），但是除了我可以使用包含的 Rake 任务进行编译之外，几乎没有任何文档。

具体来说，我正在尝试构建一个响应哈希 URL 的分页项目列表（例如：localhost:3000/stuff#/pages/20），并且我已经度过了一段绝对地狱般的时间试图让事情正常工作人们似乎在说他们应该这样做的方式。这与其说是在为我的具体问题寻求帮助，不如说是“到底发生了什么？”

第二个问题：如果我太暴躁而无法阅读代码并全部弄清楚，这会让我成为一个n00b吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T23:29:57.393

不知道您的问题是否足够精确，可以留在这里，但无论如何，我将分享我使用 ember 的 4 到 5 个月的经验。我希望这有帮助。

我认为 ember 团队和贡献者正在努力尽快发布 1.0，并提供最新的文档。随着 1.0 版本的发布，我认为我们将有一个足够稳定的版本来使用。

在工作中，我们决定遵循 master 分支，并且我们经常针对 master 更新我们的代码库。缺点是让我们的软件在每次更新时都运行所需的工作量很大并且可能很乏味（幸运的是，我们有一个很好的集成测试套件，可以帮助防止主要的回归）。
它还有一些优点：

*   我们受益于错误修复和边缘功能
*   我们每天都越来越多地了解 ember 代码库，并且在全球范围内了解什么是好的实践，图书馆背后的习语
*   阅读 ember 人员的代码是学习如何编写好的 javascript 代码的好方法。

就个人而言，在过去的四年里，我只是一名 Java 开发人员。当我的公司选择切换到基于 Web 的应用程序而不是桌面应用程序时（一年前），我们搜索了一个好的 JS 库来使用。一开始，对于来自 Java 世界（带有 Swing 的 MVC）的我来说，我迷失了方向。有种不做开发，只做临时工的感觉。我的MVC在哪里？？？一切都混在了糟糕的 js 文件中……而余烬来了。最后，虽然使用 ember 并非易事，虽然我只有不到 6 个月的 javascript 经验，但我现在在我们的软件中开发一些功能感到很自在，并且（也许更重要的是）有构建的感觉（也有说服力）一个设计良好的应用程序（OO，单独的模型/视图的东西）。如果没有 ember，我很确定我将无法做到这一点。

要回答您的第二个问题，我认为如果您不想阅读代码，它不会让您成为菜鸟，但今天我认为如果您想更舒适地使用 ember，这是更好的方法。

*如果阅读本文的人可以编辑和修复我的英语，我会很感兴趣*（应用了一些编辑）

# javascript - 单击时如何在按钮周围保留矩形边框

> ID：11568510
> 
> 赞同：0
> 
> 时间：2012-07-19T20:10:25.833
> 
> 标签：javascript, jquery, css

当我在这个小提琴上选择投票按钮时：http: [//jsfiddle.net/3Uz7S/4/](http://jsfiddle.net/3Uz7S/4/)

投票图像在 firefox/chrome 上更新为椭圆形。

如何更新css，以便在选择“投票”时按钮保持其矩形形状，或者这是否可能？

小提琴代码：

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>

.pds-vote-button {
    border-radius:0 !important;     
    -webkit-border-radius:0 !important; 
}

.pds-box {    
border-radius:0 !important;     
-webkit-border-radius:0 !important; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:14:58.673

It changes the class on the click to `pds-vote-button-load`

jsFiddle: [http://jsfiddle.net/3Uz7S/5/](http://jsfiddle.net/3Uz7S/5/)

```
.pds-vote-button-load
{
    border-radius:0 !important;     
    -webkit-border-radius:0 !important; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:20:12.303

将此添加到您的 CSS

```
.pds-vote-button-load
{
    border-radius: 0 !important;     
    -webkit-border-radius: 0 !important;
    -moz-border-radius: 0 !important; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:13:55.317

apply CSS styles also to class "pds-vote-button-load" and add `-moz-border-radius` as well

```
.pds-vote-button, .pds-vote-button-load {
    border-radius: 0 !important;
    -moz-border-radius: 0 !important;
    -webkit-border-radius: 0 !important; 
} 
```

# javascript - 为什么 string.search 的参数表现得像正则表达式？

> ID：11568522
> 
> 赞同：5
> 
> 时间：2012-07-19T20:11:15.957
> 
> 标签：javascript, string, search

我不了解其他 Javascript 引擎，但在 V8 中，包括 Chrome 和[Node.js](http://nodejs.org/)，`String.prototype.search`其行为方式出乎意料。

```
> "054".search("0.4")
0 // expected -1
> "Sample String 007".search("0.7")
14 // expected -1
> "Sample String 0.7".search("0.7")
14 // expected behavior 
```

如果这是预期的行为，为什么会这样？如果这是预期的行为，我如何在没有正则表达式的情况下正确搜索字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:15:10.713

MDN 在[String.search](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/search#Parameters)上的页面对函数的参数有这样的说法：

> 如果传递了一个非正则表达式对象 obj，它会通过使用隐式转换为正则表达式`new RegExp(obj)`。

因此，您的示例中的字符串被正确地强制转换为正则表达式对象。您的测试相当于：

```
"054".search(new RegExp("0.4"))
"Sample String 007".search(new RegExp("0.7"))
"Sample String 0.7".search(new RegExp("0.7")) 
```

他们返回正确的结果。

正如@meetamit 为您的第二个问题所指出的那样，您实际上需要`indexOf`一个字符串参数，而不是正则表达式。

# java - How do I send serialized java objects from a swing application to a google app engine application and vice versa?

> ID：11568524
> 
> 赞同：0
> 
> 时间：2012-07-19T20:11:20.077
> 
> 标签：java, swing, google-app-engine, sockets, object

First of all I would like to thank all of the great people answering all kinds of questions on this awesome coding-website.

Now to my question:

I just started working with Google App Engine, because I want to use it for a java desktop application I made. The swing application is sending serialized objects from one client to another using sockets. This solution is pretty sloppy and it causes latency problems in some cases. I searched the web for possible server solutions and ended up with Google App Engine.

So, my question is basically: How do I send serialized objects from my swing application to the app engine application server, and vice versa? I have absolutely no idea if it is possible, although I read it can be done by faking the server into thinking I'm a user of the web application, and sending those objects via javascript to the server. Now, I don't know much about javascript, and would like to keep it on the java site, if possible.

I would appreciate any kind of code examples or ideas.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:46:28.147

您不能使用 TCP 套接字进行广播。为此，您必须使用 UDP 套接字通信。

如果您真的想使用虚拟主机来维护您的服务器，您可以执行以下操作

1) 使用 Java Servlet 实现服务器。您可以在 Google 应用引擎上托管 Java servlet。

2）在客户端程序中，使用HTTP而不是TCP套接字与服务器通信。

3）您可以如下实现虚拟广播

3.1）在Java客户端程序中，一旦你的程序启动就启动一个单独的线程

3.2) 在该线程中，使用 HTTP 请求继续 ping Servlet 并读取响应。使用这个逻辑，你可以刺激广播。

3.3) 你可能需要编写独立的 Servlet 来处理这个广播。

这些链接会有所帮助

[如何在 Java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)

[http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:32:08.563

谷歌应用引擎有一个叫做远程 API 的工具： [https ://developers.google.com/appengine/docs/java/tools/remoteapi](https://developers.google.com/appengine/docs/java/tools/remoteapi)

这应该涵盖您的服务器 API。至于序列化，你可以做很多事情：JSON、XML 等。我个人更喜欢 JSON，并使用[Jackson](http://jackson.codehaus.org/)。google-gson 是您可能想要使用的另一个库。

# .htaccess - 使用 htaccess 阻止对域的访问，但在一个子文件夹中除外

> ID：11568528
> 
> 赞同：0
> 
> 时间：2012-07-19T20:11:50.423
> 
> 标签：.htaccess, redirect

我有一个网站*website.com*，它也恰好可以通过*website.ipage.com*访问。这就是我需要的：对 http://website.com 的所有请求都*需要*发送到*http://www.website.com*。我已经使用下面的 htaccess 文件管理了这个：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{http_host} ^website.com [nc]
RewriteRule ^(.*)$ http://www.website.com/$1 [r=301,nc] 
```

以下是我不知道该怎么做：对 http://website.ipage.com 的所有请求也*必须*发送到*http://www.website.com* **除了***http://website.ipage.com/ stats/*（子文件夹*/stats/*必须仍然可以通过 website.ipage.com 访问）。

我设法修改了上面的 htaccess 文件，通过进行以下更改，将所有对*http://website.ipage.com*的请求重定向到*http://www.website.com ：*

 *```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{http_host} ^(website.com|website.ipage.com) [nc]
RewriteRule ^(.*)$ http://www.website.com/$1 [r=301,nc] 
```

**这让我只有一个问题：只有**当请求试图访问*/stats/*子文件夹时，我才允许访问*website.ipage.com* ？

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:59:44.363

在 RewriteRule 之前添加

```
RewriteCond %{REQUEST_URI} !^/stats/subfolder [NC] 
```****

# c# - IIS black-holing Task.Factory.StartNew exceptions

> ID：11568535
> 
> 赞同：0
> 
> 时间：2012-07-19T20:12:14.053
> 
> 标签：c#, iis, task-parallel-library

I am using II6\. I have a Method(LogMessageToSIFDB) that I assume had an exception,

```
Task.Factory.StartNew(() => LogMessageToSIFDB(inClientID, tmpByte, Modified, SIF_MessageID, SIF_TimeStamp)); 
```

The method is quite simple

1.  connect to DB
2.  Call Sproc
3.  Close connection

The DB connection now works fine. The problem I am having is if an exception occurs nothing gets logged anywhere.

If I change up the logic flow, the SProc doesn't get called and nothing gets logged to Events or anything

1.  throw new ApplicationException("Hello from LogMessageToSIFDB()");
2.  connect to DB
3.  Call Sproc
4.  Close connection

In a nutshell, this doesn't do anything that causes something to get logged.

```
Task.Factory.StartNew(() => { throw new ApplicationException("Hello from LogMessageToSIFDB()"); }); 
```

Here is what I'm trying to do. I have this code in a DLL that implements an interface that Engineering gave me. They pass in a stream that is an XML message. I need to modify that message. I also need to log the original message.

Logging the message to the DB would just cause the IIS thread to block longer, so I figured I would just create a task and let it run async. If the call doesn't work once in a while, I really don't care, but if I'm ever debugging a current issue, I need to see an error message.

I was hoping that an unhandled exception in the task would just crop up in the Event Log, but I'm not seeing anything anywhere.

Async logging is not a requirement, but it is preferred. Worst case is just to remove the Task and let it run in sync.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:12:37.620

使用`Task`s，期望您将以`Task`某种方式观察到异常：通过使用`Wait()`or `Result`（抛出异常，包含在 中`AggregateException`）或直接通过访问其`Exception`属性。

如果您不这样做并且`Task`收集垃圾，它的终结器将抛出异常，这将导致整个过程停止（尽管 .Net 4.5 改变了这一点，但终结器将不再抛出）。但是您必须记住，GC 不是确定性的，并且`Task`可能仅在很长一段时间后才会收集，这很可能是您看不到任何东西的原因。

你应该做的是以某种方式观察异常。如果您想异步执行此操作，您可以使用`ContinueWith()`with `OnlyOnFaulted`。但这里更简单的方法是使用普通的`try`- `catch`：

```
Task.Factory.StartNew(() =>
{
    try
    {
        LogMessageToSIFDB(inClientID, tmpByte, Modified, SIF_MessageID, SIF_TimeStamp));
    }
    catch (Exception ex)
    {
        // perform your logging here
    }
}); 
```

# .net - Can I navigate to a background worker's DoWork() method from where .RunWorkerAsync() is invoked?

> ID：11568539
> 
> 赞同：2
> 
> 时间：2012-07-19T20:12:28.907
> 
> 标签：.net, visual-studio

In Visual Studio it's convenient to press F12 (or right-click and select from the context menu) when looking at a method call to jump to its declaration.

Is there a shortcut, trick or plug-in that makes it possible to easily jump to the method that is subscribed to a BackgroundWorker's `DoWork` event handler?

# mysql - Column type to store code

> ID：11568544
> 
> 赞同：0
> 
> 时间：2012-07-19T20:12:39.607
> 
> 标签：mysql

I need to store a snippet of HTML/PHP code in my table. I am using BLOB, but am not sure what is best to use, ASCII or UTF-8\. What's the difference? Or shall I use TEXT altogether?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:13:58.383

You should use TEXT and set your whole set of tools to use UTF-8 only : your base, this column, but also HTML/PHP files (check your text editor and the headers), connections, and so on.

Today, except when you have to connect to specific (and old) databases, using UTF-8 everywhere is almost the sole sane choice.

Read this : [http://www.utf8everywhere.org/](http://www.utf8everywhere.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:18:06.300

BLOB 是 varbinary，就像 TEXT 是 varchar。

本质上将二进制数据存储在 BLOB 中，并将文本存储在 TEXT 中。如果要存储实际的 html 代码，则使用 TEXT，如果要存储 html 文件，则使用 BLOB。

如果您需要能够执行 ORDER BY 或 LIKE 之类的操作，则不能使用 BLOB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:19:46.303

`TEXT`当您要使用该字段的某种搜索功能（FULLTEXT）时，最好使用它。

`BLOB`更适合存储 HTML 页面等数据和存储**不会**被搜索（FULLTEXT、LIKE）但只是加载的数据。

# spring - Spring - 参考数据最佳实践

> ID：11568545
> 
> 赞同：1
> 
> 时间：2012-07-19T20:12:42.497
> 
> 标签：spring

场景：我有（美国）存储在数据库中的州列表。我需要在 form.jsp 中显示状态列表。我查询数据库并在 referenceData 方法中获取状态列表，以便在加载表单时可以使用状态列表。

问题：既然每次页面刷新都会执行referenceData，那么每次刷新查询数据库是不是很拖沓？Spring 是在内部缓存这个还是每次都是昂贵的数据库查询调用？

在 Spring 中填充表单加载时下拉状态的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:22:28.480

如果没有明确询问，Spring 不会缓存任何内容。另一方面，您可以配置您的持久性提供程序（例如[Hibernate 查询缓存](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-querycache)）或使用内置的 Spring[缓存抽象](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html)。

在每次页面刷新时查询数据库是否过大？在您的情况下：很少更改并且项目很少的固定列表-我什至会说加载一次并在应用程序的整个生命周期内保留它。做一个后门，以防需要修改。或者使用有效期很长的缓存。

另一方面，缓存通常很痛苦，尤其是在缓存验证发挥作用时。但在你的情况下，有什么问题呢？^(*著名遗言*)

# javascript - 提交表单以进行 JavaScript 验证时，函数调用之前的返回值是什么？

> ID：11568552
> 
> 赞同：0
> 
> 时间：2012-07-19T20:13:01.080
> 
> 标签：javascript, html, forms, validation

```
<form name="myForm" action="demo_form.asp" onsubmit="return validateForm();" method="post"> 
```

为什么必须有一个`return`before `validateForm()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:15:42.310

如果您不使用`return`，Javascript 将调用`validateForm`但会丢弃返回值。

如果`onsubmit`返回`false`，则不会提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:15:06.750

如果函数返回，`<form>`则可以停止默认的提交动作。`onsubmit``false`

属性的值`onsubmit`被视为函数体，因此`return`需要它以便在表单无效时不提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:23:10.717

基本上，该内联处理程序中发生的事情是这样的：

```
<button id="submit-button" type="submit" onclick="return validate()"></button>

var button = document.getElementById("submit-button");

button.onclick; // function () { return validate(); } 
```

相对：

```
<button id="submit-button" type="submit" onclick="validate(event)"></button>

var button = document.getElementById("submit-button");

button.onclick; // equals function (event) { validate(event); } 
```

# wordpress - 更新帖子时向管理员发送电子邮件通知

> ID：11568556
> 
> 赞同：0
> 
> 时间：2012-07-19T20:13:15.447
> 
> 标签：wordpress, email, post-update

每当更新帖子时，我都会尝试通知管理员，但只通知修改的内容，主要是更新的元数据。

我还没有想出任何我真正喜欢的东西，但这是我现在看到的选项：

1.发布帖子时有一个钩子（我正在使用自定义帖子）：

```
 add_action('new_to_publish_{custom_post_type_name}', 'run_when_post_published'); 
```

*   有功能/挂钩来获取修订，我忘了具体在哪里。因此，我可以将最近发布的版本与以前的版本进行比较，检测更改并相应地发送电子邮件。这将抓住任何已更新的通用更改。- 有没有人使用过处理后期修订的功能？

2.添加自定义按钮，抓取刚刚添加的数据（基于使用的按钮），然后激活发布帖子功能。但是，它仅限于我创建的元数据，以及连接到该按钮的内容。

以前有人用过这个吗？那里肯定有一些东西，但我见过的大多数只是发送一个没有内容的通知，只有更新的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:35:55.667

我认为最好的方法实际上只是使用 ajax 动态保存数据，而不是等待实际发布/更新帖子。从那里，我会让用户根据更新的内容和需要发送的内容来选择要发送的电子邮件。

# apache - .htaccess 重写通配符子子域和参数

> ID：11568569
> 
> 赞同：1
> 
> 时间：2012-07-19T20:13:49.767
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite, subdomain

我正在尝试编写一个 mod_rewrite 来像这样工作

*   `wildcard.subdomain.domain.com`=>`subdomain.domain.com/data.php?q=wildcard`
*   `wildcard.subdomain.domain.com/?repeat=1`=>`subdomain.domain.com/data.php?q=wildcard&repeat=1`
*   `subdomain.domain.com`=>`data.php`
*   `www.subdomain.domain.com`=>`data.php`

到目前为止我在 .htaccess 中所做的事情

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteCond %{HTTP_HOST} ^([^.]+)\.abc\.def\.com\.br$ [NC]
  RewriteCond %1 !^(www)$ [NC]
  RewriteRule ^.*$ data.php?q=%1 
</IfModule>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:50:41.217

对于重复参数使用

```
RewriteRule ^.*$ data.php?q=%1&%{QUERY_STRING} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T23:59:09.013

试试这些：

```
 # This should cover the first 2 cases
  RewriteCond %{HTTP_HOST} ^([^.]+)\.abc\.def\.com\.br$ [NC]
  RewriteCond %1 !^(www)$ [NC]
  RewriteRule ^$ /data.php?q=%1&%{QUERY_STRING} [L,QSA]

  # This should cover the last 2
  RewriteCond %{HTTP_HOST} ^([^.]+)\.abc\.def\.com\.br$ [NC]
  RewriteCond %1 ^(www)$ [NC]
  RewriteRule ^$ /data.php?%{QUERY_STRING} [L,QSA] 
```

请注意，这在请求为的情况下不起作用：`wildcard.subdomain.domain.com/some/path/to/file.html`这些仅匹配请求 URI 为`/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:59:34.360

如果您使用的是 cpanel，您可以创建一个 * 子域 (*.domain.com) 并将其连接到一个目录，然后在该目录中创建一个 index.php：

```
<?php
echo "<pre>";
print_r($_SERVER);
echo "</pre>";
?> 
```

测试结果，可以从服务器名或服务器主机导出子域名

# c# - Returning records in List format in asp.net

> ID：11568577
> 
> 赞同：1
> 
> 时间：2012-07-19T20:14:39.357
> 
> 标签：c#, asp.net, webforms, arraylist

My asp.net code calls a DataAccessLayer class (SubscriberDAL.cs) that does that database query & returns records. I am calling that class from my Search.aspx.cs page. The SubscriberDAL.cs method returns records in List format. How can I capture those records from my Search.aspx.cs page?

So in the code sample below, **PremsubList** returns a list array. How can I view those in Search.aspx.cs ?

My code is:

**Search.aspx.cs:**

```
PremCustomerMgr.GetSubscriberList(sub); 
```

**SubscriberDAL.cs**

```
public static List<PremSubscriber.Subscriber> GetSubscriberList(PremSubscriber.Subscriber QueryData)
{
    try
    {
        List<PremSubscriber.Subscriber> PremsubList = new List<PremSubscriber.Subscriber>();

        PremCustomerDAL.SearchSubscriberData(PremsubList, QueryData);
        return PremsubList;
    }
    catch (Exception ex)
    {
        GCException gcEx = new GCException("Exception - PremCustomerMgr.GetSubscriberList", ex);
        throw psEx;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:18:50.230

您可以将方法调用的结果用作`Datasource`Search.aspx 上的控件。

例如，如果您`DataGridView`在页面中添加一个，您可以执行以下操作：

```
MyDataGridView.Datasource = PremCustomerMgr.GetSubscriberList(sub); 
MyDataGridView.Databind(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:17:18.433

呃...

```
var MyResults = PremCustomerMgr.GetSubscriberList(sub); 
```

?

接下来，使用 MyResults 做一些事情。

也许您需要澄清“*如何从我的 Search.aspx.cs 页面捕获这些记录*”的含义。解释“捕获”？或者，也许您可​​以更详细地解释您要达到的目标？也许发布更多（相关！）代码？

# c - 带有加速度计数据的 FFT

> ID：11568583
> 
> 赞同：0
> 
> 时间：2012-07-19T20:14:59.573
> 
> 标签：c, fft, accelerometer

我正在尝试找到一个用低级 C 编写的开源 FFT 解决方案。我需要通过 FFT 运行三轴加速度计坐标以进行振动分析。我通过谷歌环顾四周，找不到任何东西。空间对我来说是一个主要问题，因为这是在一个小型设备上进行的。有什么好的开源解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:19:28.717

听起来您需要[KissFFT](http://sourceforge.net/projects/kissfft/)。简单，易于使用，轻量级，用 C 编写，相当高效，免费，没有 FFTW 等重量级人物的所有包袱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:52:52.697

**西方最快的傅立叶变换**

[http://www.fftw.org/](http://www.fftw.org/)

它带有一个非常好的文档。对于开源项目，有时文档的质量超过了代码的质量......:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:35:10.033

你可以试试我的 FFT 实现[libsimplefft](https://github.com/kneo/libsimplefft)。

它为 FFT 和快速卷积提供了一个低级 C API，以及一个 Java JNI Wrapper。

它使用 GNU Autobuild 和 Android NDK 构建目标（都包括在内）构建。

**[例如](https://github.com/kneo/libsimplefft/tree/master/example)看这里！**

# image - Store images in Mongodb serve them with Nodejs

> ID：11568587
> 
> 赞同：5
> 
> 时间：2012-07-19T20:15:06.813
> 
> 标签：image, node.js, mongodb

I understand Mongodb can store images in two ways.

1.  in a regular document by storing the image as binary
2.  via Gridfs for managing larger images.

For simplicity and because the images I plan to server are small, I will go for option 1.

To serve the images to a browser I am using nodejs.

My question is how difficult will this be? How do you turn binary data to an actual image a browser will understand? What type of encoding is involved?

Could you point me to tutorials/examples elsewhere on the web?

By the way I know this may not be good idea for performance reasons, I plan to cache the images once served. I just want to avoid the file-system all-together.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T20:59:10.713

我强烈建议不要从 MongoDB 提供图像。

最好将它们存储在静态文件存储（S3）上，并可能将路径保留在 MongoDB 中。

* * *

您可能会使用 base64 编码将文件放入 mongodb：[http](http://www.greywyvern.com/code/php/binary2base64/) ://www.greywyvern.com/code/php/binary2base64/ （或只是 base64 shell 实用程序）。

如果您只是使用常规文档，那么性能成本相对较低（只要缓存良好）。如果您使用的是混合数据库，其中有 GridFS 和常规文档，您的服务器上将需要大量 RAM——GridFS 查询的运行方式与文档查询完全不同。

转换图像可能会像这样工作：

```
var base64Data = imagefile.replace(/^data:image\/png;base64,/,""),
var dataBuffer = new Buffer(base64Data, 'base64');

// below line won't actually work but it's something along the lines of what you want:

db.foo.insert({magic: 123, etc... img: dataBuffer.toString()}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T08:30:53.460

要让 Web 浏览器呈现内容，您需要做的就是发送正确的标头和响应正文。

因此，假设您正在尝试渲染 PNG 图像，您的 mimetype 将是`image/png`然后将图像文件字节添加到响应正文中。

然后浏览器会将此响应解释为 PNG 类型的图像并适当地呈现它

# actionscript-3 - Flex Get Width of List Item in Horizontal List

> ID：11568588
> 
> 赞同：0
> 
> 时间：2012-07-19T20:15:10.137
> 
> 标签：actionscript-3, flash, apache-flex, events, flex4

I have list `<s:List>` in my Flex application that is displaying its list items horizontally, like so:

```
<s:List id="horzList">
  <s:Layout>
    <s:HorizontalLayout/>
  </s:Layout>

  <s:dataProvider>
    <s:ArrayList>
      <fx:String>Short Item</fx:String>
      <fx:String>Looooonnnnggggeeerrrrr Item</fx:String>
      <fx:String>A really, really, really long item for this list</fx:String>
    </s:ArrayList>
  </s:dataProvider>
</s:List> 
```

Using the `change` event, how can I fetch the width of one of these items in the horizontal list?

Thank you for your time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:43:28.237

哇...这是一个肮脏的烂摊子，但我确实明白了。这是`change`事件处理程序。顺便说一句，我的实际应用程序使用带有外部数据源的项目渲染器。话虽如此，除非您使用项目渲染器，否则我不知道下面的代码是否有效：

```
private function changeHandler(e:IndexChangeEvent):void {
  var index:int = horzList.selectedIndex;
  var selected:IVisualElement = horzList.dataGroup.getElementAt(index);
  var width:Number = selected.width;

  //Do something with the width...
} 
```

这个答案对我有很大帮助：[https ://stackoverflow.com/a/4035185/663604](https://stackoverflow.com/a/4035185/663604)

希望对某人有所帮助。

# magento-1.5 - Magento - 为付款方式添加自定义过滤器选项（下拉菜单）

> ID：11568591
> 
> 赞同：0
> 
> 时间：2012-07-19T20:15:16.717
> 
> 标签：magento-1.5, magento

我有一个模块，可将**付款方式**列添加到“销售”>“订单”网格。

```
$this->addColumn('method', array(
                'header' => Mage::helper('sales')->__('Payment<br />Method'),
                'index' => 'method',
                'renderer'  => 'Artizara_Ordergridadditions_Block_Catalog_Product_Renderer_Payment',
                'filter_index' => 'sfop.method', // refers to a declaration above
                type'  => 'options',
                'options' => array(0=>'Option 1',1=>'Option2'), // how would I get the keys to match to the renderer options???
        )); 
```

渲染器代码（下）：

```
public function render(Varien_Object $row) {
    $value =  $row->getData($this->getColumn()->getIndex());

    switch ($value) {
    case 'authorizenet':
        $value = 'Credit Card (Authorize.net)';
        $span = '';
        break;
    case 'paypal_express':
        $value = 'Paypal Express';
        $span = '';
        break;
    case 'checkmo':
        $value = 'Check/Money Order';
        $span = '';
        break;
    case 'free':
        $value = 'No Payment Required';
        $span = '';
        break;
    default:
        $value = 'Unknow Payment Method';
        $span = 'style="color:red;"';
    }

    return '<span ' . $span . '>' . $value . '</span>';
} 
```

只是希望能够**使用渲染器选项预先填充下拉列表，**以便在网格中进行***过滤。***

**注意：**如果我添加文本字段方法进行过滤，您必须输入数据库中的原始密钥（例如 - checkmo、paypal_express、authorizenet 等）。

我希望能够在下拉列表中显示每个渲染器值...（如何）？

**编辑 7/20/12**

我尝试了以下两种方法，但还没有工作......

```
'options' => array(
                    array('value' => 'authorizenet', 'label' => 'Credit Card (Authorize.net)'),
                    array('value' => 'paypal_express', 'label' => 'Paypal Express'),
                    array('value' => 'checkmo', 'label' => 'Check/Money Order'),
                    array('value' => 'free', 'label' => 'No Payment Required'),
                ), 
```

只是给我一个下拉列表，其中包含 4 个选项，如下所示：

```
Array
Array
Array
Array 
```

我也试过这样：

```
'options' => array(
                    array => ('value' => 'authorizenet', 'label' => 'Credit Card (Authorize.net)'),
                    array => ('value' => 'paypal_express', 'label' => 'Paypal Express'),
                    array => ('value' => 'checkmo', 'label' => 'Check/Money Order'),
                    array => ('value' => 'free', 'label' => 'No Payment Required'),
                ), 
```

但我收到一个错误：

`Parse error: syntax error, unexpected T_DOUBLE_ARROW, expecting '('`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T19:19:33.537

试试这个：

```
 'type'      => 'options',
        'options'       => Mage::helper('payment')->getPaymentMethodList(true),
        'option_groups' => Mage::helper('payment')->getPaymentMethodList(true, true, true), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:14:49.963

将选项哈希与您在渲染器中使用的值一起使用：

```
'options' => array(
   'authorizenet' => 'Credit Card (Authorize.net)',
   [..]
) 
```

附带说明一下，您可能对`Enhanced Admin Grids`我开发的扩展（[Magento Connect 上的页面）感兴趣，](https://www.magentocommerce.com/magento-connect/enhanced-admin-grids-editor.html) [github](https://github.com/mage-eag/mage-enhanced-admin-grids)上提供的最新版本带来了一个自定义列系统，允许添加新列而无需重写并且具有相当多的可能性。
作为基础，它带有用于订单网格的付款方式列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:19:42.137

访问 [http://www.magentocommerce.com/boards/viewthread/207929/](http://www.magentocommerce.com/boards/viewthread/207929/)

你可能会得到你的问题的答案。

# php - FILTER_VALIDATE 与 Preg_match。使用哪一个？

> ID：11568593
> 
> 赞同：4
> 
> 时间：2012-07-19T20:15:25.243
> 
> 标签：php, validation, filter, filtering, w3c

要验证输入日期，无论是表单 URL 还是来自表单，您通常使用哪种技术？

我一直在研究[PHP 过滤器](http://www.w3schools.com/php/php_ref_filter.asp)，但我很少在任何代码上看到它们。

我经常看到preg_mach的使用，例如：

```
$numbers = "/^[0-9]+$/D";

if (preg_match($numbers, $var)){
    echo "is number";
} 
```

代替：

```
if(!filter_var($var, FILTER_VALIDATE_INT))
    echo "is number";
} 
```

使用一个或另一个有什么好处吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:36:19.487

我的两分钱：**这取决于。**

这取决于您是否应该在正则表达式上使用过滤器函数的情况。实际上，标准非常简单：

是否`filter_*`存在可以验证我期望的输入类型的*函数？*

*   如果是这样，请使用该`filter_*`功能。
*   否则，请使用正则表达式。

正则表达式比`filter_*`函数更复杂，但`filter_*`和正则表达式的功能却非常松散相关。最有可能的是，可以制作正则表达式来完成`filter_*`函数的工作，但反过来就不行了。因此，正则表达式为表格带来了更多的功能和灵活性，同时也更加复杂。

就个人而言，在处理简单的输入（整数、日期、时间）时，我使用`filter_*`函数，而更复杂的输入或非常具体或自定义的输入（应该以字母开头和结尾并且中间有 3 位数字的自定义标识符）更多适合正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T20:28:35.923

自 php 5.2 以来，php 引入了 filer_ 功能，用于各种类型的变量验证。[使用filter_var](http://php.net/manual/en/function.filter-var.php) ||是个好习惯 [filter_input](http://www.php.net/manual/en/function.filter-input.php)满足您的需求。

除了它更安全的事实之外，它还可以为您节省大量开发时间，使您对正则表达式感到头疼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:21:12.650

你绝对应该使用过滤器。它专门用于验证。正则表达式始终是自定义的，如果您自己编写，您可能会忘记许多需要检查的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T20:32:24.170

两者都在做同样的事情，但过滤器似乎是更简单和更好的选择，如果你愿意，你也可以使用值范围。

如果你想做一些其他的事情，只是检查一个有效的数字和更复杂的涉及字符串，那么使用正则表达式可能是要走的路。

# delphi - Delphi：如何检查网页浏览器是否已成功加载页面？

> ID：11568605
> 
> 赞同：0
> 
> 时间：2012-07-19T20:16:05.977
> 
> 标签：delphi, error-handling, twebbrowser

我有一个简单的代码：

```
WebBrowser1.Navigate('www.foo.com'); 
```

但当然有时浏览会失败，浏览器会显示错误消息。
当这种情况发生时，我该如何捕捉？
我想要这个，以便我可以制作某种自定义日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:42:22.683

我假设出现问题时会调用 OnNavigateError 事件处理程序。

# jquery - 使用 jquery 隐藏和移动元素

> ID：11568609
> 
> 赞同：2
> 
> 时间：2012-07-19T20:16:10.700
> 
> 标签：jquery, html, css

我知道如何使用 jquery 隐藏一个元素（在本例中为蓝色 div 中的图像），但单击时我也希望它重新出现在绿色 div 中（页面上的其他位置）。当它在绿色 div 中时，我点击它后甚至可能会回到蓝色 div。我怎样才能做到这一点？

[演示](http://jsfiddle.net/cmfZX/1/)

```
$(document).ready(function(){
  $("img").click(function(){
    $(this).hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:21:00.523

您可以使用事件委托来简化此操作：

```
$(document).ready(function(){
    $("#bottom-div").on("click","img",function(){
        $(this).appendTo("#top-div"); 
    });
    $("#top-div").on("click","img",function(){
        $(this).appendTo("#bottom-div"); 
    });
}); 
```

[http://jsfiddle.net/cmfZX/4/](http://jsfiddle.net/cmfZX/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:20:53.420

你需要的`append`不是`hide`.

JSFiddle：http: [//jsfiddle.net/cmfZX/3/](http://jsfiddle.net/cmfZX/3/)

尝试这个：

```
$(document).ready(function(){
  $("img").click(function(){
      if($(this).closest("#top-div").length > 0) {
          //Move to bottom Div
          $("#bottom-div").append(this);
      } else {
          $("#top-div").append(this);          
      }
    //$(this).hide();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:21:40.270

## *[jsFiddle 演示](http://jsfiddle.net/fWKpK/)*

```
$(document).ready(function(){

  $("img").click(function(){
    var clonedImg = $(this).clone();
    $(this).hide();
    $('#top-div').append(clonedImg);     
  });

}); 
```

来自 jQuery 文档：

[http://api.jquery.com/clone](http://api.jquery.com/clone)
[http://api.jquery.com/append](http://api.jquery.com/append)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T20:22:06.187

做这样的事情：

```
$(document).ready(function(){
  $("img").click(function(){
    $(this).appendTo("#top-div");
  });
}); 
```

# primefaces - PrimeFaces 标签未呈现

> ID：11568617
> 
> 赞同：1
> 
> 时间：2012-07-19T20:16:35.943
> 
> 标签：primefaces

我正在尝试使用 PrimeFaces Mobile 制作我的第一页，但未呈现标签。

我的 xhtml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pm="http://primefaces.org/mobile">
<f:view>
    <f:loadBundle basename="test.Labels"
        var="labels" />
    <h:head>
        <title>#{labels.PageTitle}</title>
        <meta http-equiv="Content-Type"
            content="text/html; charset=iso-8859-1" />
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <script type="text/javascript" src="js/global.js"></script>
    </h:head>

    <h:body>

        <pm:page title="Hello World">
            <pm:view id="main">
                <pm:header title="Header" />

                <pm:content>Content</pm:content>
                <pm:buttonGroup orientation="horizontal">
                    <p:commandButton value="Yes" />
                    <p:commandButton value="No" />
                </pm:buttonGroup>
            </pm:view>
        </pm:page>

    </h:body>
</f:view>
</html> 
```

我在用：

*   jsf 2.0
*   嵌入式码头
*   primefaces-3.3.jar
*   primefaces-mobile-0.9.3.jar

我还尝试添加：

```
<application>
   <default-render-kit-id>PRIMEFACES_MOBILE</default-render-kit-id> 
</application> 
```

但是发生了异常：找不到“PRIMEFACES_MOBILE”的 RenderKit。没有这个，PrimeFaces 标签不会被渲染。

谢谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:14:30.353

现在问题已经解决了。

PrimeFaces jar（在我的情况下为primefaces-3.3.jar）必须在运行时在文件夹/WEB-INF/lib 中可用

我的大错。

# mysql - 为什么我的存储过程不像普通查询那样连接字符串？

> ID：11568626
> 
> 赞同：-1
> 
> 时间：2012-07-19T20:17:30.000
> 
> 标签：mysql, stored-procedures

提供了完整的示例供您尝试解决。问题是我想添加两列（'MUNTAX' AND 'SCHTAX'）并将结果放入表（'house'）的第三列（'TOTALTAX'）中。但是，这些列是 varchar 类型的价格而不是整数，所以我必须在计算之前删除“$”符号和“，”。并且经过计算，必须将'$'和','中的总和转换回varchar。

我被挂断的地方是得到总数。

创建表：

```
CREATE TABLE `house` (
`ID` int(10) unsigned NOT NULL auto_increment,
`MLS_NO` int(10) default NULL,
`AGENT` varchar(120) default NULL,
`DISP_ORDER` int(4) default NULL,
`ADDR` varchar(200) NOT NULL default '',
`PRICE` varchar(12) NOT NULL default '',
`PRTYPE` varchar(20) default NULL,
`BUILTYPE` varchar(30) default NULL,
`YEAR` varchar(4) default NULL,
`LAREA` decimal(10,0) default NULL,
`ROOM` decimal(10,0) default NULL,
`BEDROOM` decimal(10,0) default NULL,
`BATHROOM` decimal(10,0) default NULL,
`PWDRROOM` decimal(10,0) default NULL,
`GARAGE` decimal(10,0) default NULL,
`PARKING` decimal(10,0) default NULL,
`MUNTAX` varchar(30) default NULL,
`SCHTAX` varchar(30) default NULL,
`TOTALTAX` varchar(30) default NULL,
`DESCR` text,
`DEFAULTPIC` decimal(10,0) default NULL,
`ADTYPE` varchar(100) default NULL,
`DESCR_2` text,
PRIMARY KEY  (`ID`),
KEY `Index_2` (`ADDR`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=122 ;

INSERT INTO `house` (`ID`, `MLS_NO`, `AGENT`, `DISP_ORDER`, `ADDR`, `PRICE`, `PRTYPE`, `BUILTYPE`, `YEAR`, `LAREA`, `ROOM`, `BEDROOM`, `BATHROOM`, `PWDRROOM`, `GARAGE`, `PARKING`, `MUNTAX`, `SCHTAX`, `TOTALTAX`, `DESCR`, `DEFAULTPIC`, `ADTYPE`, `DESCR_2`) VALUES (110, 8620825, 'N', NULL, '5871 FL', '$1,025,000.0', 'DETACHED', 'COTTAGE', NULL, '589', '10', '4', '3', '1', NULL, '4', '$7,774.42', NULL, 'NULL', 'Beautiful'); 
```

存储过程：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS TotalTaxProc $$

CREATE PROCEDURE TotalTaxProc(IN MLS INT(10), OUT MUNFLO FLOAT(10), OUT SCHINT FLOAT(10), OUT TOTTAX VARCHAR(10))
BEGIN
DECLARE SCH VARCHAR(30);
DECLARE MUN VARCHAR(30);

SET SCHFLO=0.0;
SET MUNFLO=0.0;
SET TOTTAX='';

SELECT MUNTAX FROM house WHERE MLS_NO=MLS INTO MUN;
SELECT SCHTAX FROM house WHERE MLS_NO=MLS INTO SCH;

SET MUNFLO=IFNULL(REPLACE(REPLACE(MUN, '$', ''), ',', ''), 0);
SET SCHFLO=IFNULL(REPLACE(REPLACE(SCH, '$', ''), ',', ''), 0);

SET TOTTAX=CONCAT('$', MUNFLO + SCHFLO ) ;

SET TOTTAX=CONCAT(SUBSTRING_INDEX(TOTTAX, SUBSTRING(TOTTAX, -6), 1),',',SUBSTRING(TOTTAX, -6) );

UPDATE house SET TOTALTAX=TOTTAX WHERE MLS_NO=MLS;
END $$
DELIMITER ; 
```

最后是电话，

```
CALL TotalTaxProc(8620825,@MUNINT,@SCHINT,@TOTTAX);
SELECT @MUNINT,@SCHINT,@TOTTAX; 
```

所以很明显我得到的只是逗号，TOTTAX 应该给出 '$7,774.42'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:08:22.677

我在您的代码中没有看到您设置@TOTTAX 用户变量的任何地方。（您正在修改名称相似的过程变量 TOTTAX，但我在任何地方都看不到对用户变量 @TOTTAX 的引用，除了在您的调用和选择中。）

阻止您使用它的 FORMAT 函数是否存在问题，而不是所有那些 SUBSTRING 和 SUBSTRING_INDEX 函数？

```
SET TOTTAX=CONCAT('$',FORMAT(MUNFLO+SCHFLO,2)); 
```

FORMAT() 函数应注意确保小数点后有两位数加上逗号分隔符，您不需要使用所有这些`SUBSTRING`和`SUBSTRING_INDEX`索引函数。

* * *

我将在这里回应 spacediver 的评论：UPDATE 语句似乎将更新 house 表中的每一行，并具有相同的值。（这可能没有错，但看起来很奇怪，在我的大多数 UPDATE 语句中，没有 JOIN 或 WHERE 子句，某种指定要更新的行的谓词是错误的。）

* * *

**更新**

您已更新您的问题（进行了一些重大改进）

奇怪的是，您正在运行两个单独的查询以从（可能）同一行获取不同的列。这两个单独的语句：

```
SELECT MUNTAX FROM house WHERE MLS_NO=MLS INTO MUN;
SELECT SCHTAX FROM house WHERE MLS_NO=MLS INTO SCH; 
```

可以用单个选择替换：

```
SELECT MUNTAX, SCHTAX FROM house WHERE MLS_NO=MLS INTO MUN,SCH; 
```

据我所知，这一行：

```
SET TOTTAX=CONCAT(SUBSTRING_INDEX(TOTTAX, SUBSTRING(TOTTAX, -6), 1),',',SUBSTRING(TOTTAX, -6) ); 
```

没有做任何有用的事情。（根本不清楚这需要做什么或检查该`FORMAT()`功能是否无法为您做。为什么需要线，它应该做什么？

您似乎正在将（显然）存储为格式化字符串（ACCCKKK！）的十进制值转换为一个`INTEGER`值，该值基本上丢失了小数点后的两位。

然后，您将一个值计算为该行中其他两个值的总和，然后将结果作为“格式化”字符值分配给 TOTALTAX 列。奇怪的是，您正在将一个 INTEGER 值分配回 SCHTAX（字符）列，您之前期望它是一个十进制值作为格式化字符串。

您的“最终解决方案”中的代码没有通过集合。

我没有看到这里正在完成的任何事情都不能在单个 SQL 语句中更容易地完成（并且更容易理解）。

假设 MLS_NO 列是唯一的（或者您打算使用行中已经存在的值更新单行），那么

```
CREATE PROCEDURE TotalTaxProc(IN MLS INT(10))
BEGIN

UPDATE house
   SET TOTALTAX = CONCAT('$',FORMAT(
         IFNULL(REPLACE(REPLACE(MUNTAX, '$', ''), ',', ''), 0) 
       + IFNULL(REPLACE(REPLACE(SCHTAX, '$', ''), ',', ''), 0)
       ,2))
 WHERE MLS_NO=MLS;

END $$ 
```

这*很*容易理解，没有所有的过程变量和 SET 语句，以及所有的旋转。

如果多行具有相同的 MLS_NO，则此语句的行为与您的过程不同。

此语句为 TOTALTAX 列分配一个值，该值派生自*同一行中的*值。另一方面，您的过程使用具有匹配 MLS_NO 的*某一*行中的值来更新具有相同匹配 MLS_NO 的*所有行。*（如果 MLS_NO 是唯一的，则没有区别，如果不是唯一的，则有区别。）

这也与“最终解决方案”中的代码不同，因为在计算要分配给 TOTALTAX 的值时不会丢失小数点后的数字（可以很容易地添加）。（如果您想丢失数字，您确定要在将它们相加之前这样做，还是在添加之后要丢失它们。

此语句的不同之处还在于它没有重新格式化 SCHTAX 列的值。（可以很容易地添加这种行为，只需在同一语句中添加一个简单的内容。）

您的程序会将SCHTAX 列的值从例如'$6,543.21' 更改为'6543'，完全不清楚为什么需要这样做。（我在想 SCHTAX 和 MUNTAX 字符串值中可能有一些不是数字的东西，比如`'/yr'`，`' per year'`或者`' (paid 2012)'`您打算忽略的其他内容，这就是为什么您将其存储为字符然后提取十进制值的原因。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:03:17.697

最终解决方案：

```
DELIMITER //
DROP PROCEDURE IF EXISTS TotalTaxProc //

CREATE PROCEDURE TotalTaxProc(IN MLS INT(10))
BEGIN
DECLARE SCH VARCHAR(30);
DECLARE MUN VARCHAR(30);
DECLARE SCHFLO FLOAT(15,2);
DECLARE MUNFLO FLOAT(15,2);
DECLARE TOTTAX VARCHAR(30);

SET SCHFLO=0.00;
SET MUNFLO=0.00;
SET TOTTAX='';

SELECT MUNTAX FROM HOUSE WHERE MLS_NO=MLS INTO MUN;
SELECT SCHTAX FROM HOUSE WHERE MLS_NO=MLS INTO SCH;

SET MUNFLO=CAST( IFNULL(REPLACE(REPLACE(MUN, '$', ''),',',''), '0.00') * 100 AS DECIMAL);
SET SCHFLO=CAST( IFNULL(REPLACE(REPLACE(SCH, '$', ''),',',''), '0.00') * 100 AS DECIMAL);

SET TOTTAX=CONCAT('$',FORMAT(MUNFLO/100+SCHFLO/100,2));

UPDATE HOUSE SET TOTALTAX=TOTTAX WHERE MLS_NO=MLS;
END //
DELIMITER ; 
```

和电话：

```
CALL TotalTaxProc(8620825); 
```

# java - 使用 OutputStreamWriter 编写：逐行 vs 一次全部

> ID：11568627
> 
> 赞同：3
> 
> 时间：2012-07-19T20:17:34.523
> 
> 标签：java, android, performance, stringbuilder, outputstream

哪个运行得更快：对每个要写入的字符串使用 OutputStreamWriter.write()，或者使用 StringBuilder 创建一个大字符串，然后使用 write() 一次？请解释原因。

这里多次使用 write()：

```
writer.write("Registered Players:\n");
while (it.hasNext()) {
    int playerID = (Integer) it.next();
    Player player = playerRegistry.get(playerID);

    writer.write(playerID+": "+player.getPlayerName()+"\n");
} 
```

这是StringBuilder：

```
builder.append("Registered Players:\n");
while (it.hasNext()) {
    int playerID = (Integer) it.next();
    Player player = playerRegistry.get(playerID);

    builder.append(playerID+": "+player.getPlayerName()+"\n");
}
writer.write(builder.toString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:26:02.810

这完全取决于`OutputStream`你写的是哪种类型的。

如果它正在写入内存（`ByteArrayOutputStream`），它不会有任何区别。

如果您正在写入 a `BufferedOutputStream`，则流将在内存中缓冲您的行，并在缓冲区满后将其写入底层流，因此也不会产生任何影响。

如果您正在写入 a`FileOutputStream`或 a `SocketOutputStream`，缓冲将带来更好的性能。但是，如果要写入的数据太大，将所有内容缓冲到内存中可能不是一个好主意：它可能需要太多内存。

最好的办法是使用缓冲的写入器或流，它会透明地为您处理缓冲，从而避免过多的低级写入，而不必显式缓冲到`StringBuilder`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:24:34.057

我会说，取决于输出流编写器提供的内容。如果它是 ByteArrayOutputStream，那么我认为 StringBuilder 的开销会减慢它的速度。但是，如果 OutputStreamWriter 提供无缓冲的套接字流，那么我希望 StringBuilder 更快，但请记住，使用 StringBuilder 您将需要足够的内存来保存要在内存中发送的全部数据，所以我不希望扩大规模。

与往常一样，当涉及到性能问题时：编写两个原型并对其进行测试，因为每个场景都可能导致意外或令人惊讶的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:59:35.823

由于我们谈论的是 android，我认为最好不要缓冲您的输出。使用 stringbuilder 可能会导致更大的内存使用，并且通过调用 StringBuilder.toString() 再次将整个字符串复制并传递给您正在使用的流（并且可能再次缓冲）。因此，如果您正在处理大量数据，这将导致 gc 在您之后进行清理，这也会降低性能。

# java - Lucene 令牌流

> ID：11568631
> 
> 赞同：2
> 
> 时间：2012-07-19T20:17:54.453
> 
> 标签：java, lucene

我对 lucene 标记化过程有一个基本问题：

```
TokenStream tokenStream = analyzer.tokenStream(fieldName, reader);    
TermAttribute termAttribute = tokenStream.addAttribute(TermAttribute.class); 
```

termAttribute 是做什么用的？ tokenStream.addAttribute(TermAttribute.class) 有什么作用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T05:45:09.570

TermAttribute 包含令牌的文本。addAttribute(TermAttribute.class) 将返回 TermAttribute 的一个实例（如果还没有，则会创建）。

比如说，你也对某个token的位置增量信息感兴趣，那么你也会说：

```
PositionIncrementAttribute posIncrAtt = addAttribute(PositionIncrementAttribute.class); 
```

使用 TermAttribute 和 PositionIncrementAttribute 的实例，您现在可以通过以下方式访问/更改令牌文本和位置增量信息：

```
termAttribute.buffer()
posIncrAtt.getPositionIncrement()
posIncrAtt.setPositionIncrement() 
```

有关详细信息，请参阅[http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/package-summary.html](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/package-summary.html)

# c - 分叉一个管道子进程

> ID：11568633
> 
> 赞同：3
> 
> 时间：2012-07-19T20:17:56.840
> 
> 标签：c, exec, fork

派生管道内衬子流程的最佳技术是什么？

我当前的程序需要运行另一个进程，这实际上是由管道链接的几个命令。如果命令失败或成功，我不需要知道命令的输出，所以我使用 fork/exec。

命令行上的等价物是

```
 /path/to/A arg1 arg2 | /path/to/B argB1 | /path/to/C 
```

注意：使用脚本是不切实际的，因为它的 A/B/C 将来可能会发生变化。

我想到的两种技术是：

1.  递归分叉。连接下一个 fork 中可用于子级的父级（输入到其父级）输出。

2.  在顶层创建所有管道。
    然后使用一个循环来分叉所有可以正确连接管道的子节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:42:38.837

Don't fork recursively. Making B a subprocess of A is not a good idea. For example, if B calls `setsid` to run in its own session, it would take the unrelated A with it. If B dies, A would get a SIGCHILD, not you. In particular, you would not be able to obtain the return status of B.

Here's a sketch of the code to fork n children on a series of pipes. Warning: I typed the code directly into my browser; there are probably many typos, and I omitted all error checks.

```
char *executables[n];
char *args[n];
int pipes[2*n+2]; /* child i reads from  */
int child_pids[n];
int ret; /*Error checking omitted; abort if ret ever becomes negative*/
ret = pipe(pipes);
for (i = 0; i < n; i++) {
    ret = pipe(pipes + 2 * i + 2);
    ret = fork();
    if (ret == 0) {
        /* Code of child i */
        close(pipes[2*i+1]);
        close(pipes[2*i+2]);
        dup2(pipes[2*i], 0);
        dup2(pipes[2*i+3], 1);
        ret = execv(executables[i], args[i]);
    }
    close(pipes[2*i]);
    close(pipes[2*i+3]);
    child_pids[i] = ret;
}
/* interact with the subprocesses, then call wait or waitpid as needed */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:24:05.687

如果您使用的是unix，那么简单的`system("/path/to/A arg1 arg2 | /path/to/B argB1 | /path/to/C")`就可以满足您的需求。它调用一个 shell 作为`/bin/sh -c $STRING_PASSED_TO_SYSTEM`. 如果您想要更好的控制，例如读取输出或写入输入的能力，请考虑`popen()`C 库中的例程。

# c# - 实体框架对导航属性的约束

> ID：11568634
> 
> 赞同：4
> 
> 时间：2012-07-19T20:17:59.797
> 
> 标签：c#, .net, sql, sql-server, entity-framework

我想限制导航属性返回的模型。例如，我正在使用`AuditInfo`模型来记录模型的活动。删除模型后，将设置`DeletedBy`和`Deleted`属性。但是，由于没有真正从数据库中“删除”任何内容，因此这些模型仍将填充到其他模型引用的导航属性中。

**审计信息类**

```
public class AuditInfo
{
    [Key]
    public int AuditInfoID { get; set; }

    //Other attributes

    public string DeletedBy { get; set; }

    public DateTime? Deleted { get; set; }
} 
```

**具有导航属性的类**

```
public class BlogPost
{
    //Other attributes

    //Only return Comment where Comment.AuditInfo.Deleted is NULL
    public virtual IList<Comment> Comments { get; set; }
} 
```

**正在审核的班级**

```
public class Comment
{
    //Other attributes

    public int AuditInfoID { get; set; }
} 
```

我将如何设置约束，以便只有来自 BlogPost.Comments 的未删除评论（Comment.AuditInfo.Deleted 为 NULL）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T21:13:38.403

（我假设您使用的是 EF Code-First，因为该`[Key]`属性。）

加载导航属性和相关实体的方法有多种，您可以为其中一些方式应用过滤器，但不是全部：

*   延迟加载：

    您的导航属性必须`virtual`使延迟加载完全有效：

    ```
    public virtual IList<Comment> Comments { get; set; } 
    ```

    加载父级：

    ```
    var blogPost = context.BlogPosts.Find(1);
    foreach (var comment in blogPost.Comments) // lazy loading triggered here
    {
    } 
    ```

    您不能在此处应用过滤器。延迟加载将始终加载给定博客文章的*所有*评论。

*   急切加载：

    ```
    var blogPost = context.BlogPosts.Include(b => b.Comments)
        .SingleOrDefault(b => b.Id == 1); 
    ```

    您不能在 中应用过滤器`Include`。急切加载将始终加载给定博客文章的*所有*评论。

*   显式加载：

    加载父级：

    ```
    var blogPost = context.BlogPosts.Find(1); 
    ```

    您现在可以在加载评论时应用过滤器：

    ```
    context.Entry(blogPost).Collection(b => b.Comments).Query()
        .Where(c => !c.AuditInfo.Deleted.HasValue)
        .Load(); 
    ```

*   投影：

    您可以在投影属性中应用过滤器：

    ```
    var blogPost = context.BlogPosts
        .Where(b => b.Id == 1)
        .Select(b => new
        {
            BlogPost = b,
            Comments = b.Comments.Where(c => !c.AuditInfo.Deleted.HasValue)
        })
        .SingleOrDefault(); 
    ```

不可能在模型定义中应用某种全局过滤策略，以便自动将这个过滤器应用于上述*所有*方法，并且无需在显式加载和投影示例中明确指定它。（我认为您已经想到了这样一个全局模型定义，但这是不可能的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:37:54.100

可以向实体类添加一个自定义属性，它将使用导航属性但对其进行过滤并返回过滤后的数据？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:22:48.517

将实体映射到筛选出已删除条目的 SQL 视图。

# vba - 重新排列某些列和行

> ID：11568637
> 
> 赞同：2
> 
> 时间：2012-07-19T20:18:16.200
> 
> 标签：vba, excel, pivot-table, unpivot

我有一个格式如下的 Excel 电子表格：

![前](../Images/118b66275dd0b88c4b3c09e0206547e6.png)

我一直在尝试做的是将其格式化为如下所示：

![后](../Images/4aa86bd118a537355828b201ac4a8680.png)

所以我猜这是一种转置（不知道如何称呼它）。

我花了最后一个半小时试图在 VBA 中做到这一点，但没有成功。

这只是它的格式示例，实际上大约有 50,000 个，所以我需要使用 VBA 或类似的东西来做。

有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:08:08.377

使用 Excel 2007，您不一定需要 VBA。在数据透视表向导（Alt+D，P）中选择“多个合并范围”，下一步，选择“我将创建页面字段”，下一步，选择您的数据，下一步，选择“新建工作表”，完成。双击数据透视表的底部 RH 单元格。过滤ColumnA并删除空白行，过滤ColumnB并删除包含“Type”的行。在“Row”和“Column”的右侧插入列并填充查找值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:05:41.960

如果您对 LOOKUP 并不完全满意并且范围数量可控，则可以使用一种替代方法，它有点乏味，但如果再次需要这种“转置”并且您忘记了具体方法，则可能更容易记住！

1.  克隆尽可能多的数据电子表格副本（保留“原始”[例如 Sheet1] 作为备份）。
2.  将 B 列和 C 列插入每个副本（不是 Sheet1）。
3.  在 Sheet2 中，将 E1 和 E2 复制到 C3 和 D3。
4.  在 Sheet3 中，将 F1 和 F2 复制到 C3 和 D3。
5.  在 Sheet4 中，将 G1 和 G2 复制到 C3 和 D3。
6.  根据需要重复过程 3\. 到 5.。
7.  在 Sheet2 中删除列 F 和 G。
8.  在 Sheet3 中删除列 E 和 G。
9.  在 Sheet4 中删除列 E 和 F。
10.  根据需要重复过程 7\. 到 9.。
11.  在 C 列和 D 列中，在 Sheets2 到 4 中的每个范围内的数字和值中附加一个字母，比如“z”。
12.  在工作表 2 中选择 C3 和 D3，然后双击底部 RH 角。
13.  对所有其他工作表（Sheet1 除外）重复 12.。
14.  从 Sheet2 中删除列 F 和 G。
15.  从 Sheet3 中删除列 E 和 G。
16.  从 Sheet4 中删除列 E 和 F。
17.  根据需要重复过程 14\. 到 16.。
18.  过滤 Sheet3 中的 ColumnC 以获得 r2z 并复制可见到 Sheet2 的底部。
19.  过滤 Sheet 4 中的 ColumnC 以获得 r3z，并将其复制到 Sheet2 的底部。
20.  根据需要重复过程 18\. 和 19.。
21.  在 Sheet2 中，将“z”替换为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:21:06.407

你不能只复制和粘贴特殊并选择转置吗？

实际上再次查看 OP 这不是直接转置，因为第二个屏幕打印中的前两列不是直接转置。

**最终编辑**

好的 - 似乎工作......

```
 Option Base 1

Sub moveData()

    Dim NumIterations As Integer
    NumIterations = ThisWorkbook.Sheets("target").Cells(Rows.Count, 3).End(xlUp).Row - 2

    'get the raw data and add to an array
    Dim n As Long
    Dim m As Long
    Dim myArray() As Long
    ReDim myArray(1 To NumIterations, 1 To 3)
    For n = 1 To NumIterations
        For m = 1 To 3
            myArray(n, m) = ThisWorkbook.Sheets("target").Cells(n + 2, m + 2)
        Next m
    Next n

    Dim q As Long
    Dim r As Long
    Dim myStaticArray()
    ReDim myStaticArray(1 To NumIterations, 1 To 2)
    For q = 1 To NumIterations
        For r = 1 To 2
            myStaticArray(q, r) = ThisWorkbook.Sheets("target").Cells(q + 2, r)
        Next r
    Next q

     'spit the data back out
    Dim i As Long
    Dim j As Long
    Dim myRow As Long
    myRow = 0

    For i = 1 To NumIterations
        For j = 1 To 3

            myRow = myRow + 1

            ThisWorkbook.Sheets("answer").Cells(myRow, 1) = myStaticArray(i, 1)
            ThisWorkbook.Sheets("answer").Cells(myRow, 2) = myStaticArray(i, 2)

            If j = 1 Then
                ThisWorkbook.Sheets("answer").Cells(myRow, 3) = "r1"
                ThisWorkbook.Sheets("answer").Cells(myRow, 4) = "11-000 - 13-000"
            ElseIf j = 2 Then
                ThisWorkbook.Sheets("answer").Cells(myRow, 3) = "r2"
                ThisWorkbook.Sheets("answer").Cells(myRow, 4) = "15-000 - 30-000"
            ElseIf j = 3 Then
                ThisWorkbook.Sheets("answer").Cells(myRow, 3) = "r3"
                ThisWorkbook.Sheets("answer").Cells(myRow, 4) = "31-000"
            End If

            ThisWorkbook.Sheets("answer").Cells(myRow, 5) = myArray(i, j)

        Next j
    Next i

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T20:25:52.160

您可以使用 PasteSpecial 来完成，如下所示

```
Sheet(1).UsedRange.Select
Selection.Copy
ActiveWorkbook.Sheets.Add   'Make some room for pasting the cells in the new format 
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
:=False, Transpose:=True
Application.CutCopyMode = False 
```

# mysql - ruby on rails 数据库迁移

> ID：11568647
> 
> 赞同：1
> 
> 时间：2012-07-19T20:18:51.340
> 
> 标签：mysql, ruby-on-rails

我在我的应用程序中使用 mysql 作为数据库，如果我想向它添加一个新表，我可以使用 migrate，比如 rails generate migration name:string age:integer

或者只是在mysql中创建一个新表。他们两个有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:21:15.390

是的，有很大的不同。除非您有充分的理由（例如它不会直接影响您的 rails 应用程序），否则您不应该直接在数据库中创建表。

如果您在 mySQL 中创建一个表，那么您将能够在创建匹配模型的情况下访问它，但是，当您部署数据库时，您还需要对生产数据库进行相同的更改。这意味着有一个额外的部署步骤很容易被遗忘。如果您有不止一个人在从事该项目，或者您在不止一台机器上使用它，这也适用。

直接创建表的另一个问题是您的数据库没有版本控制。如果您使用迁移，那么您可以随意在数据库版本之间切换。迁移中的某些内容是否破坏了您的应用程序？使用简单回滚到以前的版本`rake db:rollback`

第三个含义是您的`db/schema.rb`文件不会反映数据库。这将防止您在以后放弃您的计划。如果你想从 mySQL 切换到 Postgres，你会发现不使用迁移非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:22:02.243

通过迁移创建表时，`schema.rb`文件会更新以反映新表的添加。

迁移是首选途径，因为您可以简单地运行 rake 任务`rake db:migrate`并在开发、测试和生产环境中创建所有表，而不是移植数据库。

您可以在此处的官方文档中阅读有关迁移的更多信息 - [http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

# firefox - JRE和Java插件的区别

> ID：11568648
> 
> 赞同：1
> 
> 时间：2012-07-19T20:18:52.100
> 
> 标签：firefox, google-chrome, java

我在这里阅读 [http://www.oracle.com/technetwork/java/index-141825.html](http://www.oracle.com/technetwork/java/index-141825.html) JRE 1.4（包括 Java Plug-in 1.4）

JRE 和 Plug-in 有什么区别？插件有什么用？它被 Firefox 和 Chrome 使用吗？

安装 Chrome 时会安装插件本身吗？如果是，如果 Google Chrome 安装了插件版本并且 JRE 版本较低怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:20:33.100

是的，JRE插件是浏览器用来运行小程序等的插件，

您可以通过设置安装和卸载浏览器插件（这些设置是特定于浏览器的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T21:02:24.887

JRE 是 Java 运行时，允许机器运行 Java 程序。
您可以运行 java 进程并指定一个具有“main”方法的入口点类（程序）。执行从您的 main 方法开始，并从那里继续。这通常被称为 Java 应用程序。

该插件与 JRE 捆绑在一起，并在浏览器中运行，允许 Java 代码在客户端的浏览器进程中运行。使用插件时，主入口点类必须写成 Applet，但它调用的所有 Java 代码都可以只是普通的 Java。

通常，开发应用程序并将其作为 Java 应用程序运行会更方便，然后将其作为小程序部署给用户。大多数代码可以相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T21:03:18.820

JRE 是Java 运行时环境，即解释和执行Java 类文件所需的软件。Java 浏览器插件是 JRE 和浏览器之间的桥梁，用于运行嵌入在 HTML 中的小程序的 Java 类。

出于安全原因，使用 Java 插件运行 Java 代码时存在限制。所有代码都在沙箱中运行，对文件系统等的访问受限（尽管您可以通过明确的用户权限/正确签名超出这些限制）。

# bash - 如何在 os x 中重新加载所有 bash 启动文件？

> ID：11568649
> 
> 赞同：0
> 
> 时间：2012-07-19T20:18:53.177
> 
> 标签：bash

我可以按以下顺序重新加载它们[http://www.thegeekstuff.com/2008/10/execution-sequence-for-bash_profile-bashrc-bash_login-profile-and-bash_logout/](http://www.thegeekstuff.com/2008/10/execution-sequence-for-bash_profile-bashrc-bash_login-profile-and-bash_logout/)，`source`但是有一条捷径吗？

我的意思是，一个按顺序加载所有文件的命令，而不是这样做：

```
source /etc/profile
source ~/.bash_profile
source ~/.bashrc
source ~/.bash_login
source ~/.profile 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T08:37:47.113

它可能不是最好的，但这里有一个快速获取所有资源的方法：

```
exec bash -l 
```

`-l`强制 bash 作为登录 shell 工作，它应该来自 /etc/profile 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T08:50:32.223

把这个放在你的`~/.bashrc`

```
rld() {
  source /etc/profile
  source ~/.bash_profile
  source ~/.bashrc
  source ~/.bash_login
  source ~/.profile
} 
```

现在，您可以`rld`随时重新加载所有这些文件。

# jquery - 如何在 tr 中只选择一个输入？

> ID：11568653
> 
> 赞同：0
> 
> 时间：2012-07-19T20:19:03.657
> 
> 标签：jquery

这是一个小提琴示例： http: [//jsfiddle.net/YxU2H/9/](http://jsfiddle.net/YxU2H/9/) 我试图在行中选择一个复选框或一个单选按钮。我试过的不起作用：

```
function selectedBox() {
      var bothChecked = false;
      var row = $(this).closest('tr');

      var isCboxChecked = $('row', '#cbox').is(':checked');
      var isRadChecked = $('row', '#rad').is(':checked');

      //var isCboxChecked = $('#cbox').is(':checked'); //true or false
      //var isRadChecked = $('#rad').is(':checked');

      if (first == second) {
          bothChecked = true;
          //keep checkbox selected but deselect radio button
      }
      if (bothChecked == true) {
          $('#cbox').attr('checked', false);
      }
      else {
          $('#cbox').attr('checked', true);
      }
  } //); 
```

然后我添加了一个 onclick="selectedBox();" 到复选框和按钮。复选框的 id 为 cbox，单选按钮的 id 为 rad

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:22:51.293

而不是`$('#cbox').attr('checked', false);`尝试

```
 if (bothChecked == true) {
      $('#cbox').removeAttr('checked');
  }
  else {
      $('#cbox').attr('checked', 'checked');
  } 
```

**编辑**

完整的解决方案是这样的

```
$("input:checkbox, input:radio").click(function(e) {

    var row = $(this).closest('tr');

    var chkBox = $(row).find(":checkbox");
    var rdBtn = $(row).find(":radio");

    if ($(chkBox).is(":checked") & $(rdBtn).is(":checked")) { 
      $(chkBox).removeAttr('checked');
    }
}); 
```

我把它放在这里[jsfiddle](http://jsfiddle.net/YxU2H/24/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:43:18.627

您可以将这两个功能放在`document.ready`块内

```
$('input[type="radio"]').click(function() {
    if ($(this).attr('checked') == 'checked') {
        var chk = $(this).closest('tr').find('input[type="checkbox"]:checked');
        if (chk.length > 0) {
            $(chk).removeAttr('checked');
        }
    }
});

$('input[type="checkbox"]').click(function() {
    if ($(this).attr('checked') == 'checked') {
        var rad= $(this).closest('tr').find('input[type="radio"]:checked');
        if (rad.length > 0) {
            $(rad).removeAttr('checked');
        }
    }
}); 
```

两者都相互监控，因此您将获得您的功能。试试看，对我有用。我已经更新了你的小提琴。这是[http://jsfiddle.net/YxU2H/20/](http://jsfiddle.net/YxU2H/20/)

# asp.net-mvc - 在 mvc4 中为添加和删除创建通用路由

> ID：11568659
> 
> 赞同：1
> 
> 时间：2012-07-19T20:19:28.387
> 
> 标签：asp.net-mvc, rest, routes, asp.net-mvc-4

由于您无法在大多数托管站点上使用 Put 和 Delete，因此我正在尝试创建一条避免使用这些站点的路线，但我无法使其正常工作..

我想要这样的路线

```
api/someController/Add/someInt 
```

使用这个 RESTsharp 代码

```
private RestClient client;

public RESTful()
    {
        client = new RestClient
        {
            CookieContainer = new CookieContainer(),
            BaseUrl = "http://localhost:6564/api/",
            //BaseUrl = "http://localhost:21688/api/",
            //BaseUrl = "http://madsskipper.dk/api/"
        };
    }

    public void AddFriend(int userId)
    {
        client.Authenticator = GetAuth();

        RestRequest request = new RestRequest(Method.POST)
        {
            RequestFormat = DataFormat.Json,
            Resource = "Friends/Add/{userId}"
        };

        request.AddParameter("userId", userId);

        client.PostAsync(request, (response, ds) =>
        {
        });
    } 
```

在我的 FriendsController 中点击这个方法

```
// POST /api/friends/add/Id
[HttpPost] //Is this necesary?
public void Add(int id)
{         
} 
```

所以我在我的路线配置中添加了这个

```
 routes.MapHttpRoute(
    name: "ApiAdd",
    routeTemplate: "api/{controller}/Add/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

但是当我这样做时，我只点击了我的 FriensController 的构造函数而不是 Add 方法

编辑：

还尝试制作此路线配置

```
 routes.MapHttpRoute(
        name: "ApiAdd",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { action = "Add", id = RouteParameter.Optional }
    ); 
```

但同样的结果，控制器被击中而不是动作

* * *

解决方案：发现参数是用RESTsharp错误添加的，所以代替

```
 RestRequest request = new RestRequest(Method.POST)
    {
        RequestFormat = DataFormat.Json,
        Resource = "Friends/Add/{userId}"
    };

    request.AddParameter("userId", userId); 
```

它应该是

```
 RestRequest request = new RestRequest(Method.POST)
        {
            RequestFormat = DataFormat.Json,
            Resource = "Friends/Add/{userId}"
        };

        request.AddUrlSegment("userId", userId.ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:07:52.047

您可以在 Api 路由定义中包含操作名称：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

然后有这个动作：

```
[HttpPost]
public void Add(int id)
{

} 
```

`/api/friends/add/123`现在您可以触发对url的 POST 请求。

The `[HttpPost]` attribute ensures that this action can only be invoked using the POST verb. If you remove it you could still invoke it through GET, but that's something you shouldn't do with actions that potentially modify state on the server.

# c# - 即使安装了 CF v3.5，也会出现 MissingMethodException？

> ID：11568660
> 
> 赞同：0
> 
> 时间：2012-07-19T20:19:29.610
> 
> 标签：c#, windows-ce

我正在尝试构建和运行一些专有库以在新的 WinCE 5.0 设备上工作。我在不同的（6.0）设备上使用了相同的代码，没有任何问题。他们已经在世界各地进行生产，所以我确定我做错了什么。:-)

当我编写最简单的代码时：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace Contains
{
    public class Program
    {
        static void Main(string[] args)
        {
            String target = "one";
            String expose = "let me be the one";

            Console.WriteLine(expose.Contains(target));
        }
    }
} 
```

...在运行时，我得到 System.String.Contains 的 MissingMethodException。

我对此感到惊讶，因为 msdn (http://msdn.microsoft.com/en-us/library/dy85x1sa(v=vs.80).aspx) 表示该方法自 .NET 2.0 起就已包含在内。无论上述代码是使用 2.0 还是 3.5 的框架版本，我都会收到相同的运行时异常报告。

FWIW，这不是唯一似乎缺少的方法，Environment.NewLine、StringBuilder.AppendFormat 也抛出相同的运行时异常。

cgautil 报告设备上 Compact Framework 的 [3.5.7283.0 和 2.0.7045.0] 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:20:03.167

你能告诉我你是否在代码文件的顶部添加了命名空间系统。因为我看不出有任何其他原因。你只需要使用。

使用系统；

在代码文件的顶部，您可以使用它。如果你有 3.5 或两者都没有关系。

用这个：

```
using System;

static void Main(string[] args)
{
    string target = "one";
    string expose = "let me be the one";

    Console.WriteLine(expose.Contains(target));
} 
```

# r - 在两个 R 向量中查找排序

> ID：11568662
> 
> 赞同：3
> 
> 时间：2012-07-19T20:19:39.680
> 
> 标签：r, vector

如果我有一个字符向量`a`，

```
a <- c("bob","jim","joe","fred") 
```

我有另一个字符向量`b`，具有相同的元素但顺序不同，

```
b <- c("joe", "jim", "fred", "bob") 
```

是否有一个函数可以告诉`a`每个元素的哪个元素`b`等于？换句话说，我想要一个可以返回的函数`c(3,2,4,1)`（因为`b`相当于 `c(a[3], a[2], a[4], a[1])`. 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:23:23.310

你正在寻找`match(b, a)`.

# ruby-on-rails - Rails 中的异常处理

> ID：11568664
> 
> 赞同：1
> 
> 时间：2012-07-19T20:19:51.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一种检查断开链接的方法：

```
def self.check_prod_links
  require 'net/http'
  results = []
  Product.find_each(:conditions =>{:published => 1}) do |product|
    url = product.url 
    id = product.id
    uri = URI(url)
    begin
      response = Net::HTTP.get_response(uri)
    rescue
      http = Net::HTTP.new(uri.host, uri.port)
      http.use_ssl = true
      http.verify_mode = OpenSSL::SSL::VERIFY_NONE
      request = Net::HTTP::Get.new(uri.request_uri)
      response = http.request(request)
    rescue
      response = Net::HTTP.get_response("http://" + uri)  
    rescue => e
      p "Problem getting url: #{url} Error Message: #{e.message}"
    end
    p "Checking URL = #{url}. ID = #{id}. Response Code = #{response.code}" 
    unless response.code.to_i == 200
      product.update_attribute(:published, 0) 
      results << product
    end
  end
  return results
end 
```

我的理解是，rescue => e 应该记录之前的救援语句未捕获的所有异常，并且该方法应该继续运行，但是由于某种原因，当检查某些 URL 时，脚本退出并出现以下异常：

> SSL_connect 返回=1 errno=0 state=SSLv2/v3 读取服务器你好 A：未知协议

我该如何设置它，以便如果捕获到异常，它将被打印，并且任务将继续运行？

另外，如何调用结果数组以在邮件视图中呈现，有没有更好的方法可以将所有未发布的产品添加到已经存在的邮件中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:20:47.803

我很确定你的第一次救援将是唯一有效的。指定`=> e`只是告诉 Ruby 将异常存储在一个名为`e`. 我认为您的第一个救援块中的代码正在引发您看到的错误，并且没有其他任何东西可以挽救它。老实说，这是一堆乱七八糟的代码，最好将其重构为更小的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:23:07.203

实际上你不能那样拯救，因为你拯救的一切都逃脱了所有的例外。你可以有这样的嵌套救援：

```
 require 'net/http'

    def check_prod_links
      url = 'http://githuasdasdab.com'
      uri = URI(url)
      begin
        puts '1'
        response = Net::HTTP.get_response(uri)
        puts '2'
      rescue
        begin
          puts '3'
          http = Net::HTTP.new(uri.host, uri.port)
          http.use_ssl = true
          http.verify_mode = OpenSSL::SSL::VERIFY_NONE
          request = Net::HTTP::Get.new(uri.request_uri)
          response = http.request(request)
          puts '4'
        rescue
          begin
            puts '5'
            response = Net::HTTP.get_response("http://" + uri)
            puts '6'
          rescue => e
            puts '7'
            p "Problem getting url: #{url} Error Message: #{e.message}"
          end
        end
      end
      puts '8'
      if response
        p "Checking URL = #{url}. Response Code = #{response.code}"
        unless response.code.to_i == 200
        end
      end
    end

    check_prod_links 
```

它产生

```
 1
    3
    5
    7
    "Problem getting url: http://githuasdasdab.com Error Message: can't convert URI::HTTP into String"
    8 
```

# asp.net - 如何清除 System.Web.Helpers.WebCache？

> ID：11568666
> 
> 赞同：1
> 
> 时间：2012-07-19T20:20:13.550
> 
> 标签：asp.net, asp.net-mvc-3, caching

出于调试目的，我需要从`System.Web.Helpers.WebCache`. `WebCache`提供了一种`Remove(key)`方法，但无法识别缓存本身中的所有项目。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:30:28.753

做了一些快速的研究，发现了这个：

[http://forums.asp.net/t/1441842.aspx/1](http://forums.asp.net/t/1441842.aspx/1)

您认为您可以使用 Cache.getEnumerator 并查看所有调用 Remove 方法的键吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:46:57.770

嗯，你是对的，没有办法，只能回收你的应用程序池。我会改变缓存方法，比如`HttpContext.Cache`你确实有一个枚举器来清除每个缓存条目，或者任何其他在 .NET Framework 上不一定存在的方法，比如[Memcached](http://memcached.org/)。

# html - HTML 5 Validator 不喜欢嵌入在正文中的 CSS

> ID：11568667
> 
> 赞同：1
> 
> 时间：2012-07-19T20:20:17.903
> 
> 标签：html, css

> 错误第 16 行，第 23 列：在此上下文中，元素样式不允许作为元素主体的子元素。（抑制来自该子树的更多错误。）

因为它是“在这种情况下”，我希望有一种方法可以使用嵌入 CSS 我的 HTML 5

```
<style TYPE="text/css">
</style> 
```

以及不同的“上下文”，无论这意味着什么。

我的所有代码都在整洁的 HTML 5 / CSS 模块中......而且我不喜欢将我的 CSS 从我的 HTML 中分离出来，尽管我认为大多数人都是这样做的。

有没有办法可以保留嵌入的 CSS w/我的 HTML 5 而不会破坏验证。

如果不能，我可以将嵌入的 CSS 放在文档的头部吗？

我可以把它放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:40:04.387

除非属性存在，否则`style`标签会进入标签，例如：`head``scoped`

```
<!DOCTYPE html>
<html>
<head>
<title>HTML5 CSS scope attribute</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

<style>
.myClass {
    color: red;
    background-color: blue;
}
</style>

</head>

<body>

<div>
<span class="myClass">This text is red, and the background is blue.</span>
</div>

<div>
<style scoped>
.myClass {
    background-color: yellow;
}
</style>
<span class="myClass">This text is red, and the background is yellow.</span>
</div>

</body> 
```

但是，该`scoped`属性尚未在任何浏览器中实现：

*   [http://www.w3.org/TR/2012/WD-html5-20120329/the-style-element.html#the-style-element](http://www.w3.org/TR/2012/WD-html5-20120329/the-style-element.html#the-style-element)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T20:23:27.177

样式标签只允许在 head 部分中。

或者作为内联样式与标签一起使用，只有当你有充分的理由这样做时，你才应该这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T20:25:56.007

与`<script>`标签不同，`<style>`只能在`<head>`部分中使用。这就是您收到错误的原因。把它放在`<head></head>`标签之间。

* * *

但是，您仍然可以在正文中使用样式并且仍然有**有效**的代码，但方式有所不同。您必须将其放在`style`元素的属性中。

例子：

```
<span style="background-color: #000; color: #fff;">Some text here</span> 
```

如果您希望代码有效，这是唯一的方法。您不能使用`<style></style>` **标签**，只能使用**属性**。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T22:24:06.237

验证器的错误消息是错误的，如果您在`style`元素的最开始有`body`元素，我怀疑它是。正如对消息的解释所暗示的那样，只要使用了`scoped`属性，就允许这样的构造。

使用该`scoped`属性是没有意义的，因为目前还没有浏览器实现它，但是如果你使用它，未来的浏览器可能会解释与当前浏览器完全不同的元素。所以以上只是事情的正式方面。

一个没有属性的简单`style`元素即使放在`body`. 正式的规则只是禁止它，而 HTML5 目前坚持它，只是因为它的编辑器认为呈现的用例并不重要。

但是，最好将元素放在`style`元素内部`head`，它在所有规范中都有效。`body`（通常只有在作者无法控制`head`但可以将代码注入.) 时才需要将其放入`body`。）

验证者在某些情况下使用的“在这种情况下”的措辞无疑是令人困惑的。我认为这是我很久以前提出的一些改变的结果，以避免更糟糕（误导）的表述。措辞是有意义的，例如，如果标记是

```
<div>
foo
<style scoped></style>
</div> 
```

这在 HTML5 规则中是错误的，因为该`style`属性在内部使用时`body`，必须出现在其父级的开头。`style`如果“foo”被删除或移动到元素之后，则上下文会发生变化，并且标记会变成符合 HTML5 的标记。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T20:34:41.833

`style`只在`head`文档中运行，就这么简单。在开发期间运行外部样式表或将其包含在您的 html 文件中。阶段。

# .htaccess - 4 级域重定向到域

> ID：11568669
> 
> 赞同：0
> 
> 时间：2012-07-19T20:20:23.333
> 
> 标签：.htaccess, mod-rewrite

我知道如何像这样从 3 级域重定向：

```
RewriteCond %{HTTP_HOST} ^(something)\.domain\.com$ [NC]

RewriteRule ^(.*) http://www.something.com/$1 [L,R] 
```

有没有办法执行相同的操作将**something.name.domain.com**重定向到**something.name**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:31:11.200

重写规则很像（由）正则表达式驱动。根据我正在阅读的内容，您可以使用`RewriteCond`反向引用：

```
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com$ 
RewriteRule ^(.*)$ %1/$1 
```

# jquery - 如何使用 jquery 在可点击的表格单元格中切换“选中”单选按钮？

> ID：11568670
> 
> 赞同：3
> 
> 时间：2012-07-19T20:20:25.727
> 
> 标签：jquery, radio-button

我有几种表格中嵌入了单选按钮和复选框。我想要两个使用 jquery 做两件事：

*   首先，用户可以通过单击包含按钮的表格单元格来“单击”单选按钮或复选框。

*   其次，用户可以通过单击两次来切换复选框**和单选按钮。**因此，单击已选中的单选按钮（或包含它的单元格）应该**取消**选中它，在组内不选中任何单选按钮。

我可以分别做这两个，但我坚持让他们一起工作。请帮忙！

这是我不太工作的 jquery 代码：

```
$(".clickable", Q)
    .mouseover( function(){ $(this).addClass('mouseover-cell'); })
    .mouseout( function(){ $(this).removeClass('mouseover-cell'); })
    .click( function(event){
        if( event.target.type != 'checkbox' && event.target.type != 'radio' ){
            var x = $('input', this).attr("checked");
            $('input', this).attr("checked", !x);

            //$('input', this).trigger("click");
        }
        return false;
    }); 
```

单个按钮的 html 如下所示：

```
<tr>
  <td>
    Label for the button group
  </td>
  <td class="clickable">
    <input type="radio" name="q1" value="1">
  </td>
  <td class="clickable">
    <input type="radio" name="q1" value="2">
  </td>
  <td class="clickable">
    <input type="radio" name="q1" value="3">
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:56:57.090

您的代码在布局略有不同的情况下运行良好。

你可以在这里测试

[可点击的单元格](http://jsfiddle.net/slfede/XzEfg/)

```
$(".clickable").mouseover( function(){ $(this).addClass('mouseover-cell'); });
$(".clickable").mouseout( function(){ $(this).removeClass('mouseover-cell'); });
$(".clickable").click( function(event){
    if( event.target.type != 'checkbox' && event.target.type != 'radio' ){
        var x = $('input', this).attr("checked");
        $('input', this).attr("checked", !x);
    }
    return false;
});​

<table border="1">
<tr>
  <td>
    Label for the button group
  </td>
  <td class="clickable">
    <input type="radio" name="q1" value="1">
  </td>
  <td class="clickable">
    <input type="radio" name="q1" value="2">
  </td>
  <td class="clickable">
    <input type="radio" name="q1" value="3">
  </td>
</tr>
</table>​ 
```

# django - 为 Django 使用 Gunicorn 的 SSL

> ID：11568672
> 
> 赞同：1
> 
> 时间：2012-07-19T20:20:27.653
> 
> 标签：django, ssl, nginx, gunicorn

我正在使用 gunicorn 运行一个 django 项目，我想使用 ssl 运行它，我在互联网上发现我需要这本字典 "{'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-SSL' ： '在'}”。但我把它放在哪里？有没有办法在命令 gunicorn_django 上使用 ssl 运行它？我没有使用 nginx，我也不想使用。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:41:50.953

[更新：Gunicorn 从0.17.0 / 2012-12-25](http://docs.gunicorn.org/en/latest/news.html#id3)开始添加 SSL 支持。

原答案：

Gunicorn 本身不支持 SSL。有一个开放的拉取请求来添加它[https://github.com/benoitc/gunicorn/pull/265](https://github.com/benoitc/gunicorn/pull/265)。`X-FORWARDED-PROTOCOL`and`X-FORWARDED-SSL`标头将由 Gunicorn 前面的代理（例如 Nginx）使用，该代理执行 SSL 终止。

使用 SSL 不需要使用 Nginx。您可以使用 Apache/mod_proxy 或 HAProxy 或任何其他支持 SSL 的代理服务器。即使不需要 SSL，在使用 Gunicorn 缓冲慢速客户端时，建议使用代理服务器[http://gunicorn.org/deploy.html](http://gunicorn.org/deploy.html)

> 尽管有许多 HTTP 代理可用，但我们强烈建议您使用 Nginx。如果您选择另一个代理服务器，则需要确保在使用默认 Gunicorn 工作程序时它缓冲慢速客户端。如果没有这种缓冲，Gunicorn 很容易受到拒绝服务攻击。您可以使用 slowloris 检查您的代理是否正常运行。

# google-app-engine - 在自己的服务器上安装和运行谷歌应用引擎可以吗？

> ID：11568673
> 
> 赞同：1
> 
> 时间：2012-07-19T20:20:28.980
> 
> 标签：google-app-engine

是否可以像在本地机器上一样在服务器上安装和运行谷歌应用引擎进行测试？我个人想不出任何不这样做的理由，但我想会有一些。

使用 Google 的应用服务器托管是最佳选择吗？优达学城是做什么的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:37:32.987

不，这真的不能接受。本地服务器只是一个“玩具”服务器，它模仿真实服务器所做的事情，但没有任何优化或安全性。例如，数据存储将所有内容加载到内存中，并将内存中的所有内容写入单个文件。

它根本不是为了托管真实的应用程序而设计的。只是为了能够在本地进行测试，而无需每次都部署在真正的应用引擎上。有些服务在本地也不可用。

坦率地说，如果目标是在本地托管而不是利用应用引擎基础架构的弹性，那么还有更好的选择。使用真实的数据库和允许使用所有类的运行时环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T23:48:54.970

如果您问是否可以*出于测试目的*从服务器运行 dev_appserver，我不建议这样做。它没有硬化，而且根本无法很好地扩展。

如果您想演示正在开发的应用程序，并且不想部署到单独的演示/测试应用程序（或应用程序的演示/测试版本），可以使用`-a 0.0.0.0`. 假设您的本地防火墙允许它，并假设您的本地计算机在您的 Intranet 上有可路由的名称，这将让他们从浏览器访问您的应用程序。这是一种在 UI 开发过程中获得反馈的简单快捷方式。

# java - 在 Eclipse 树查看器中单独选择树节点

> ID：11568682
> 
> 赞同：2
> 
> 时间：2012-07-19T20:20:50.227
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

作为 Eclipse 插件的一部分，我有一段带有树查看器的代码。代码在这里（这直接取自eclipse PDE示例树视图）：

```
public class SampleView extends ViewPart {

    /**
     * The ID of the view as specified by the extension.
     */
    public static final String ID = "com.test2.views.SampleView";

    private TreeViewer viewer;
    private DrillDownAdapter drillDownAdapter;
    private Action action1;
    private Action action2;
    private Action doubleClickAction;

    /*
     * The content provider class is responsible for
     * providing objects to the view. It can wrap
     * existing objects in adapters or simply return
     * objects as-is. These objects may be sensitive
     * to the current input of the view, or ignore
     * it and always show the same content 
     * (like Task List, for example).
     */

    class TreeObject implements IAdaptable {
        private String name;
        private TreeParent parent;

        public TreeObject(String name) {
            this.name = name;
        }
        public String getName() {
            return name;
        }
        public void setParent(TreeParent parent) {
            this.parent = parent;
        }
        public TreeParent getParent() {
            return parent;
        }
        public String toString() {
            return getName();
        }
        public Object getAdapter(Class key) {
            return null;
        }
    }

    class TreeParent extends TreeObject {
        private ArrayList children;
        public TreeParent(String name) {
            super(name);
            children = new ArrayList();
        }
        public void addChild(TreeObject child) {
            children.add(child);
            child.setParent(this);
        }
        public void removeChild(TreeObject child) {
            children.remove(child);
            child.setParent(null);
        }
        public TreeObject [] getChildren() {
            return (TreeObject [])children.toArray(new TreeObject[children.size()]);
        }
        public boolean hasChildren() {
            return children.size()>0;
        }
    }

    class ViewContentProvider implements IStructuredContentProvider, 
                                           ITreeContentProvider {
        private TreeParent invisibleRoot;

        public void inputChanged(Viewer v, Object oldInput, Object newInput) {
        }
        public void dispose() {
        }
        public Object[] getElements(Object parent) {
            if (parent.equals(getViewSite())) {
                if (invisibleRoot==null) initialize();
                return getChildren(invisibleRoot);
            }
            return getChildren(parent);
        }
        public Object getParent(Object child) {
            if (child instanceof TreeObject) {
                return ((TreeObject)child).getParent();
            }
            return null;
        }
        public Object [] getChildren(Object parent) {
            if (parent instanceof TreeParent) {
                return ((TreeParent)parent).getChildren();
            }
            return new Object[0];
        }
        public boolean hasChildren(Object parent) {
            if (parent instanceof TreeParent)
                return ((TreeParent)parent).hasChildren();
            return false;
        }
/*
 * We will set up a dummy model to initialize tree heararchy.
 * In a real code, you will connect to a real model and
 * expose its hierarchy.
 */
        private void initialize() {
            TreeObject to1 = new TreeObject("Leaf 1");
            TreeObject to2 = new TreeObject("Leaf 2");
            TreeObject to3 = new TreeObject("Leaf 3");
            TreeParent p1 = new TreeParent("Parent 1");
            p1.addChild(to1);
            p1.addChild(to2);
            p1.addChild(to3);

            TreeObject to4 = new TreeObject("Leaf 4");
            TreeParent p2 = new TreeParent("Parent 2");
            p2.addChild(to4);

            TreeParent root = new TreeParent("Root");
            root.addChild(p1);
            root.addChild(p2);

            invisibleRoot = new TreeParent("");
            invisibleRoot.addChild(root);
        }
    }
    class ViewLabelProvider extends LabelProvider {

        public String getText(Object obj) {
            return obj.toString();
        }
        public Image getImage(Object obj) {
            String imageKey = ISharedImages.IMG_OBJ_ELEMENT;
            if (obj instanceof TreeParent)
               imageKey = ISharedImages.IMG_OBJ_FOLDER;
            return PlatformUI.getWorkbench().getSharedImages().getImage(imageKey);
        }
    }
    class NameSorter extends ViewerSorter {
    }

    /**
     * The constructor.
     */
    public SampleView() {
    }

    /**
     * This is a callback that will allow us
     * to create the viewer and initialize it.
     */
    public void createPartControl(Composite parent) {
        viewer = new TreeViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL);
        drillDownAdapter = new DrillDownAdapter(viewer);
        viewer.setContentProvider(new ViewContentProvider());
        viewer.setLabelProvider(new ViewLabelProvider());
        viewer.setSorter(new NameSorter());
        viewer.setInput(getViewSite());

        // Create the help context id for the viewer's control
        PlatformUI.getWorkbench().getHelpSystem().setHelp(viewer.getControl(), "com.test2.viewer");
        makeActions();
        hookContextMenu();
        hookDoubleClickAction();
        contributeToActionBars();
    } 
```

我希望能够以某种方式单独遍历树上的所有节点并控制它们展开或折叠的方式。基本上我只想知道如何能够遍历树上的所有节点来单独调整设置。

这应该是一个简单的问题，但我似乎没有找到任何可行的方法......我试图弄清楚 TreeViewer 对象的 getItem() 究竟是如何工作的。但问题是即使我得到了这个项目，我也不能（或者不确定如何）修改它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:31:18.000

首先从查看器中获取底层树：

```
Tree tree = viewer.getTree(); 
```

然后获取树中的第一级项：

```
TreeItem[] item = tree.getItems(); 
```

任何树项都可以回答其所有直接子项：

```
TreeItem[] item = aTreeItem.getItems(); 
```

一旦你得到一个树项目，你可以展开或折叠它：

```
aTreeItem.setExpanded(true); 
```

因此，对所有树项的访问必须是递归的。

# c# - C#/Sql 管理工作室 -> 为 Latex 生成 ER 图 (PDF)

> ID：11568683
> 
> 赞同：1
> 
> 时间：2012-07-19T20:20:50.930
> 
> 标签：c#, sql, sql-server, latex, er-diagrams

就像在标题中一样。是否可以通过转换为乳胶文件（或文本文件）来生成 ER 图，以便在 PDF 中打印（可能是一些 dll）？或者我怎样才能动态地构建那种图表？有什么建议吗？我的“看起来”是这样的：

我需要从数据库中提取所有需要的表名和该表的所有列名。然后需要创建关系，这就是看起来很难的部分。你能给我一些建议吗，或者就像我之前说的，有一种更简单的方法可以从数据库生成简单的 ER 图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:27:55.347

你可以试试[这个服务](http://diagram.ly)。但它是用于“手工制作”，而不是自动生成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:43:32.730

您的标题包括“Sql 管理工作室”，所以我假设这是公平的游戏。

您可以使用 SSMS (SQL Server Management Studio) 连接到您的数据库，然后导航到您想要的数据库，并创建一个新的数据库图。数据库图是非常可定制的。您添加到图表的每个表都可以右键单击以获取上下文菜单，并且使用表视图可以修改要显示的字段。如果您在设计器中单击鼠标右键，您可以显示打印时会出现的分页符。

至于打印到 PDF，我建议只使用 SSMS 中的标准打印功能，并使用一些打印到 PDF 的工具打印到 PDF，例如 Cute PDF Writer 或 Office 内置的 PDF 打印支持。您可能无法在一张纸上获取所有表格及其关系，但在大多数工具中您可能会遇到这个问题。

# javascript - Javascript 动态条件

> ID：11568687
> 
> 赞同：0
> 
> 时间：2012-07-19T20:21:02.800
> 
> 标签：javascript

我想创建由 dropDownList 中选择的值确定的动态字段数量。由于这将在客户端执行，因此必须通过 Javascript 完成。我知道我可以通过事先创建所有字段然后简单地使用 css 显示/隐藏每个字段来实现这种效果，但这是很多重复的代码。

通过反复试验，我已经完成了某种工作，但它要么在更改下拉列表时删除我的值，要么在我没有它时添加太多框，然后在创建新框之前删除以前创建的框。

有没有一种简单的方法来完成我正在尝试做的事情，而不会在更改下拉列表时丢失输入的值？我的尝试如下。

```
function doAThing() {
    var attemptsValue = parseInt(document.forms['ProgramApplicationForm'].elements['VerificationPrimaryHomePhoneAttemptsDropDownList'].value);

    if (attemptsValue == null) {
        document.getElementById('VerificationPrimaryHomePhoneAttemptDate').innerHTML = null;
    } else if (document.getElementById('VerificationPrimaryHomePhoneAttemptDate').innerHTML == null) {
        for (counter = 1; counter < attemptsValue + 1; counter++) {
            document.getElementById('VerificationPrimaryHomePhoneAttemptDate').innerHTML += 
            '<label for="VerificationPrimaryHomePhoneAttemptDate' + counter + '">Attempt ' + counter + ' Date:</label><input type="text" name="VerificationPrimaryHomePhoneAttemptDate' +  counter + '" value="" id="p-dod-date-picker" maxlength="10" class="size-ten" placeholder="yyyy-mm-dd" title="yyyy-mm-dd" pattern="\d{4}-\d{2}-\d{2}"/>'; 
        }            
    } else {
        document.getElementById('VerificationPrimaryHomePhoneAttemptDate').innerHTML = null;

        for (counter = 1; counter < attemptsValue + 1; counter++) {
            document.getElementById('VerificationPrimaryHomePhoneAttemptDate').innerHTML += 
            '<label for="VerificationPrimaryHomePhoneAttemptDate' + counter + '">Attempt ' + counter + ' Date:</label><input type="text" name="VerificationPrimaryHomePhoneAttemptDate' +  counter + '" value="" id="p-dod-date-picker" maxlength="10" class="size-ten" placeholder="yyyy-mm-dd" title="yyyy-mm-dd" pattern="\d{4}-\d{2}-\d{2}"/>';             
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:39:01.710

使用[`element.removeChild`](https://developer.mozilla.org/En/DOM/Node.removeChild)and[`element.appendChild`](https://developer.mozilla.org/En/DOM/Node.appendChild)而不是干预`innerHTML`. 这将使您能够删除 DOM 中的特定节点：

```
<form name="ProgramApplicationForm">
<select id="VerificationPrimaryHomePhoneAttemptsDropDownList" name="VerificationPrimaryHomePhoneAttemptsDropDownList">
    <option>0</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>
    <div id="VerificationPrimaryHomePhoneAttemptDate"></div>
</form> 
```

```
function createLabelElement(i){
    /* Create the label */
    var label = document.createElement("label");
    label.appendChild(document.createTextNode("Attempt "+i+" Date:")); // add text

    /* create the input and set all attributes */
    var input = document.createElement("input");
    input.type = "text";
    input.value = "";
    input.id="p-dod-date-picker"; // ids should be unique!
    input.maxlength = 10;
    input.className = "size-ten";
    input.placeholder = "yyyy-mm-dd";
    input.title = "yyyy-mm-dd";
    input.pattern = "\d{4}-\d{2}-\d{2}";

     /* a label doesn't need "for", 
       you can actually put your input into the label element 
    */
    label.appendChild(input);

    return label; // return the created element
}

document.getElementById('VerificationPrimaryHomePhoneAttemptsDropDownList').addEventListener('change',function(){
   var numberOfElements = parseInt(this.value);
   var targetDiv = document.getElementById('VerificationPrimaryHomePhoneAttemptDate');   

   // As long we have to many elements remove them
   while(targetDiv.children.length > numberOfElements ){
        targetDiv.removeChild(targetDiv.lastChild);
   }
   // As long we have not enough elements add more
   while(targetDiv.children.length < numberOfElements){
        targetDiv.appendChild(createLabelElement(targetDiv.children.length + 1));
   }
}); 
```

[**演示**](http://jsfiddle.net/2Psv4/)

如果您希望您仍然可以`innerHTML`在创建的标签上使用，这将使第一个功能更小。另请注意，这`null`不是数字，而是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:41:10.757

好吧，你在这里练习了一些不好的做法。您正在以循环中的文档的形式访问 innerHTML 属性。此外，您的“else if”和“else”完全相同。

我会重写如下：

```
function doAThing() {
var d = document;
var attemptsValue = parseInt(d.forms['ProgramApplicationForm'].elements['VerificationPrimaryHomePhoneAttemptsDropDownList'].value);

var attemptDate = d.getElementById('VerificationPrimaryHomePhoneAttemptDate');
if (attemptsValue == null) {
        attemptDate.innerHTML = null;
    } else {

        var html = "";
        for (counter = 1; counter < attemptsValue + 1; counter++) {
            html += 
            '<label for="VerificationPrimaryHomePhoneAttemptDate' + counter + '">Attempt ' + counter + ' Date:</label><input type="text" name="VerificationPrimaryHomePhoneAttemptDate' +  counter + '" value="" id="p-dod-date-picker" maxlength="10" class="size-ten" placeholder="yyyy-mm-dd" title="yyyy-mm-dd" pattern="\d{4}-\d{2}-\d{2}"/>';
        }
        attemptDate.innerHTML = html;
}
} 
```

# visual-studio - Visual Studio Web Developer Express 2012 RC：如何为代码添加书签？

> ID：11568691
> 
> 赞同：0
> 
> 时间：2012-07-19T20:21:11.867
> 
> 标签：visual-studio, ide, bookmarks, visual-studio-express

这在 2010 年曾经很容易，但现在我什至找不到书签窗口或标记代码的按钮。改名了？搬家了？

这适用于当前的 2012 测试版。我在视图->工具栏或视图->其他窗口中找不到它

**编辑**：也许我应该指定网络开发人员快递

![在此处输入图像描述](../Images/92253d41dd2e6dc56560aaa400f5fda4.png)

![在此处输入图像描述](../Images/8a53a0d411c79056552414e5d3a189a1.png)

这不是重复的： [有没有办法在 Visual Studio 项目中为代码添加书签？](https://stackoverflow.com/questions/926046/is-there-a-way-to-bookmark-code-in-a-visual-studio-project)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:49:56.147

您在尝试此操作之前是否启用了专家设置？如果您现在转到工具->设置，然后选择“专家设置”，它应该会显示以前隐藏的选项。看看这是否对你有帮助。（现在在“查看”选项卡上将显示书签窗口的选项。）来自：[http ://social.msdn.microsoft.com/Forums/en/Vsexpressvc/thread/a1264a2c-924a-4cf7-aa6c-eb2a7e5a29cb](http://social.msdn.microsoft.com/Forums/en/Vsexpressvc/thread/a1264a2c-924a-4cf7-aa6c-eb2a7e5a29cb)

# web-services - Asmx Webservice 压缩/解压缩？

> ID：11568693
> 
> 赞同：0
> 
> 时间：2012-07-19T20:21:28.767
> 
> 标签：web-services, asmx

我正在开发一个传统的 ASP.Net Web 服务，即 asmx Web 服务，它将向 .Net 和非 .Net 客户端公开。即使它被非.Net客户端使用，是否可以为此asmx实现自动压缩和解压缩？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:33:20.273

您所能做的就是尝试让 IIS 为您进行自动压缩。ASMX 无法进行压缩。

你有什么不能使用WCF的原因吗？除非绝对必要，否则不应将 ASMX 用于新开发。

# php - 在单个查询中将 SQL 关系插入到 2 个表，而不使用 mysql_insert_id()

> ID：11568694
> 
> 赞同：6
> 
> 时间：2012-07-19T20:21:35.787
> 
> 标签：php, mysql, sql, database, insert

我对 SQL 并不完全陌生，但对 MYSQL（使用 PhPMyAdmin）感到生疏和挣扎……看了这个：[MySQL insert to multiple tables (relational)](https://stackoverflow.com/questions/3225024/mysql-insert-to-multiple-tables-relational) and some other related topics，但还没有找到答案。我正在简化我的示例以说明问题。

如果你有两张桌子：

```
'table1' has: id (primary key, auto-increment), description (text)
'table2' has: id (primary key, auto-increment), title (text), description_id (int) 
```

如何创建一个单独的 INSERT 语句以便`description_id`存储 的值`table1.id`？

我知道有 php 方法可以做 2 个查询，但我想用 SQL 做这一切，一定有办法吗？我应该以不同的方式设置我的桌子吗？[我读了一些关于外键](https://stackoverflow.com/questions/7324780/mysql-foreign-key-relations-vs-mysql-insert-id-to-relate-tables)的东西，不知道这是否适用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:30:19.010

感谢@hackattack，谁找到了这个？[已经在别处回答了](https://stackoverflow.com/questions/5178697/mysql-insert-into-multiple-tables-database-normalization)。

```
BEGIN
INSERT INTO users (username, password) 
  VALUES('test', 'test')
INSERT INTO profiles (userid, bio, homepage) 
  VALUES(LAST_INSERT_ID(),'Hello world!', 'http://www.stackoverflow.com');
COMMIT; 
```

**但是，唉——那没用。** MySQL 5 参考显示它的语法略有不同：

```
INSERT INTO `table2` (`description`) 
  VALUES('sdfsdf');# 1 row affected.
INSERT INTO `table1`(`table1_id`,`title`) 
  VALUES(LAST_INSERT_ID(),'hello world'); 
```

而且，瞧/瞧——这行得通！

**前面的更多麻烦** 虽然查询将在 phpMyAdmin 中成功，但我的 PHP 安装抱怨查询并引发语法错误。我采用了 php 方式并进行了 2 个单独的查询并使用`mysql_insert_id()`

我觉得这很烦人，但我想这并不比事务少多少服务器负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:24:36.110

您不能使用插入语句插入多个表（除了可写视图*，但 AFAIK MySQL 不支持它们）。

您*可能*感兴趣的是允许您将语句“分组”为一个“[原子](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)”操作的[事务。](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

^([* 实际上，它只允许更新，而不是插入（我相信，但现在我开始怀疑它......无论如何，这不是这里的问题）])

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T20:25:51.660

您可能需要在此处使用触发器，以便每当 table2 获得插入操作时，都会执行触发器以在 table1 上执行插入操作。

# exchangewebservices - 删除 EWS 约会正文文本

> ID：11568699
> 
> 赞同：11
> 
> 时间：2012-07-19T20:21:56.770
> 
> 标签：exchangewebservices, outlook-2010

EWS 在正文中使用默认的“时间”文本创建约会。请看下图：

![在此处输入图像描述](../Images/6770cf704c72b18c869991e759aae55b.png)

我想知道是否可以通过某种方式删除或隐藏此文本。

这是我使用 EWS 托管 API 创建约会的代码

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1, TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time"));
service.Credentials = new WebCredentials("ews_calendar", PASSWORD, "acme");
service.Url = new Uri("https://acme.com/EWS/Exchange.asmx");

Appointment newAppointment = new Appointment(service);
newAppointment.Subject = "Test Subject";
newAppointment.Body = "Test Body";
newAppointment.Start = new DateTime(2012, 07, 19, 17, 00, 0);
newAppointment.End = newAppointment.Start.AddMinutes(30);
newAppointment.RequiredAttendees.Add("first.last@acme.com");

// create new appointment
newAppointment.Save(SendInvitationsMode.SendToAllAndSaveCopy); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:44:20.310

[我在上面的同一个庄园中使用 EWS 创建了测试约会，并使用MFCMAPI](http://mfcmapi.codeplex.com/)和[EWS Editor](http://ewseditor.codeplex.com/)探索了对象的属性。通过 MAPI，*when-text*存储在`PidTagHtml`属性中。通过 EWS，*when-text*存储在`Body`属性中。*when-text*存在于接收到的副本上，但不存在于发件人日历文件夹中的原件上。

基于此，似乎在发送时将*when-text*插入正文。如果您删除该行

```
newAppointment.RequiredAttendees.Add("first.last@acme.com"); 
```

然后创建约会而不是会议。在这种情况下，*when-text*不起作用。

1.  我很确定没有办法绕过这种行为，除了进入收件人的邮箱并删除收到的副本上的文本。
2.  即使有更好的解决方法，我也不建议这样做，因为 Outlook 和 OWA 在同一个庄园中创建会议。

# ios - 键盘移动页面导致输入问题

> ID：11568706
> 
> 赞同：1
> 
> 时间：2012-07-19T20:22:17.373
> 
> 标签：ios, cordova

好的，所以当您在 phonegap/cordova 项目中选择输入时，会出现键盘。这会将页面向上推，这很好。但是，在 ios 设备上，当您触发触摸事件（例如尝试选择下拉菜单）时，mouseDown 事件会导致输入失去焦点，这意味着键盘被关闭。这会导致页面移动......然后触发 mouseUp 事件，通常不是您开始单击的位置。

有没有办法阻止键盘在 mouseDown/touchStart 事件中被关闭？或者也许是一种防止键盘解除移动页面的方法？甚至可以通过点击事件解决问题。

我们正在使用 Cordova 1.7 和 Jquery 1.6.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:06:59.143

在开发自己的 cordova 2.0 应用程序时，我遇到了类似的问题。

由于我的应用程序中的各种触摸事件确实需要各种逻辑，我不能只尝试删除任何库，所以我尝试了一些创造性的方法，主要是关于弄乱 touchstart-touchend 发生的事情-每个事件期间的点击过程。

这些都不起作用，但后来我决定试试这个：

```
$('.formClass .item-text input').bind('focus', function(e){
  e.preventDefault();
}); 
```

不知何故，有一个明显的警告，**我不知道为什么**。

这种方法可能（不再）对您有用，因为您似乎通过删除一些库解决了这个问题；但是，我希望其他偶然发现这一点的人会有更轻松的一天。

# android - OpenGL ES 减去几何

> ID：11568711
> 
> 赞同：1
> 
> 时间：2012-07-19T20:22:36.550
> 
> 标签：android, geometry, opengl-es-2.0

起初，为避免误解，opengl es 仅适用于三角形。

我有一个矩形（三角形条），是否可以在该矩形上切一个圆孔（或多个孔）。都是二维的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:28:06.220

opengl 不支持真正的几何减法，但它可以很容易地用深度缓冲区或模板缓冲区伪造。

1.  掩盖你的颜色，所以没有任何东西被绘制到颜色缓冲区：
    `glColorMask(false, false, false, false)`

2.  将您的“洞”绘制到场景上，将值存入深度缓冲区（值小于三角形条带）或模板缓冲区。

3.  禁用颜色蒙版，然后在启用深度或模板测试的情况下渲染三角形条。您之前绘制的区域将被遮盖，因此您将留下一个中间有一个孔的矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:23:58.260

作为 Tim 解决方案的替代方案，您还可以使用自定义片段着色器来切割孔：您可以使用遮罩纹理或仅使用 (x,y) 坐标和半径来定义孔。`discard()`然后，如果它们在孔内，您可以简单地使用您的三角形碎片。最好的解决方案可能取决于您想要的孔的数量（蒙版纹理可能是最简单、最灵活的方法，特别是如果您还想有非圆形孔而距离测试可能对您有好处，您只有一个几个孔）。

# jquery - 在 jquery 中执行 parent().parent().parent() 等更有效的方法

> ID：11568722
> 
> 赞同：35
> 
> 时间：2012-07-19T20:23:16.753
> 
> 标签：jquery

在我正在编写的这个脚本中，我发现自己连续七次使用 .parent() 来获取元素。虽然这可行，但似乎可能/应该有一种更简单的方法来执行此/我不知道的功能。除了更多元素的更具体的类/ID之外还有什么想法吗？

`outer`基本上，当我在下面的 html 中引用了 id 为“innerSpan”的跨度时，我的问题归结为使用 id 访问 div ：

```
<div id='outer'>
    <a href="some_url">
        <span id="inner">bla bla</span>
    </a>
</div> 
```

所以目前，我会做这样的事情：

`var outer = $('#inner').parent().parent()`

这让深度嵌套的元素变得疯狂。

**另一个例子：**

这是我的html：

```
<div id="options_right">
            <table id="product_options_list" class="table table-bordered">

            <tbody id="1">
                <tr>
                    <td>
                        <select name="option_1_val[0]" class="option_table_select">
                            <option value="Red">Red</option>
                            <option value="Blue">Blue</option>
                            <option value="Green">Green</option>
                            </select>
                    </td>
                    <td>
                        <table class="table sub_options" id="0">
                            <tbody>
                            <tr>
                                <td>
                                    <select name="option_1_sub[0][]" class="option_table_select  sub_option_select">
                                        <option value="">None</option>
                                        <option value="2">Size</option>
                                    </select>
                                    <div class="sub_option_value_holder">
                                        <select name="option_1_sub_val[0][]" class="sub_option_values" style="display:none;"></select>
                                    </div>
                                </td>
                                <td>
                                    <a href="#" class="remove_sub_option btn btn-primary">Remove</a>
                                </td>
                                <td>
                                    <a href="#" class="add_sub_option btn btn-primary">Add Another</a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td> 
```

和我的剧本。我编写了一个函数，需要将主行 tbody 的 id 以及辅助表 id 传递给它，以便我可以动态添加更多行。对于这个问题，您实际上并不需要该功能，但基本上我得到的这些 id 如下所示：

```
get_suboption_row($(this).parent().parent().parent().parent().parent().parent().parent().attr('id'), $(this).parent().parent().parent().parent().attr('id')); 
```

谢谢

jsfiddle：http: [//jsfiddle.net/Hg4rf/](http://jsfiddle.net/Hg4rf/)

单击添加另一个以触发事件

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-19T20:25:16.147

你有 2 个嵌套表，
要获得你想要的，你可以使用这两个 DOM 遍历方法 `.closest()`或`.parents()`

> *   [`.closest()`](http://api.jquery.com/closest)自己或祖先。Self or 沿着 DOM 树向上移动，直到找到与提供的选择器匹配的匹配项
> *   [`.parents()`](http://api.jquery.com/parents)沿着 DOM 树向上移动到文档的根元素，将每个祖先元素添加到临时集合中；然后，如果提供了选择器，它会根据选择器过滤该集合

使用嵌套表：

```
$(this).closest('table').closest('tbody').attr('id'); 
```

```
$(this).parents('table').parents('tbody').attr('id'); 
```

**[jsFiddle 演示](http://jsfiddle.net/Hg4rf/28/)**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T20:25:14.973

我想[`.closest()`](http://api.jquery.com/closest/)这就是你要找的:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T20:25:48.307

如果您知道该`CSS Class name`元素的，则可以调用该`closest()`方法

```
var thatParent=  $("#someId").closest(".somCSSClassName") 
```

所以你的代码可以重写为

```
get_suboption_row($(this).closest("someClass").attr('id'),
                $(this).closest("someOtherClass").attr('id')); 
```

编辑：看到你的 JSfiddle 之后

使用类名获取父表。

```
 alert($(this).closest('tbody').closest('.table-bordered').attr('id')); 
```

工作样本：http: [//jsfiddle.net/Hg4rf/2/](http://jsfiddle.net/Hg4rf/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-05T01:24:59.430

最好的方法是在**parents()**函数之后使用**eq()**

 **```
get_suboption_row($(this).parents().eq(7); 
```**

# php - CSV 文件中的转义逗号

> ID：11568726
> 
> 赞同：0
> 
> 时间：2012-07-19T20:23:26.147
> 
> 标签：php, csv

我正在尝试添加允许 wvb 应用程序的用户使用 CSV 文件批量上传数据的功能 - 一切都很好，除非数据在实际字段本身中包含逗号。

有很多关于这个的帖子，我已经阅读了很多解决它的方法，主要是通过将逗号括在双引号中，但我不知道如何为我的代码执行此操作。

最终，我不能依靠用户在输入时为我执行此操作，因此我需要在它到达数据库之前将其作为上传过程的一部分进行 - 我尝试使用制表符作为替代分隔符，但 Excel 似乎在它的方式上非常不一致处理制表符分隔，所以我排除了这一点。

（sanitiseData 是我在整个站点中用来清理所有用户输入数据的功能）

```
 $handle = fopen($file_path, 'r');  
        $row_count=0;

        while (($data = fgetcsv($handle, 0, ',')) !== FALSE) {  
            if ($row_count==0) { 
                $row_count++;
                } else {
                    $row_count++;
                    $works_id = sanitiseData($data[0]);
                    $title = sanitiseData($data[1]);
                    $first_name = sanitiseData($data[2]);

                    //Use data to insert into db  
                    $sql = mysql_query("INSERT INTO csv_employee_personal (id,works_id,title,first_name) VALUES ('','$works_id','$title','$first_name')");
                }
        }  

        //delete csv file  
        unlink($file_path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:45:37.320

我假设这就是你的数据看起来像 "data","data2","data3,and some more","data4"

我的正则表达式非常糟糕，但我认为这将是您最好的解决方案。

同时，您可以递归地遍历一行中的每个字符并跟踪逗号和字段分隔符，当您意识到您正在查看的逗号后面没有关闭“”时，您可以将其转义。

如果我给你的示例数据与你的数据相匹配，请给我几分钟，同时我为你编写一个函数来转义逗号

# c++ - C++ 异常与错误代理

> ID：11568738
> 
> 赞同：2
> 
> 时间：2012-07-19T20:24:08.703
> 
> 标签：c++

我一直是“无例外”阵营的一员，但在宗教上并非如此。我有一个关于使用异常的支持者经常提出的论点的问题。

所以我对 C++ 异常的最大（唯一）抱怨是代码的不可预测性。我希望能够查看代码（在 VIM 中没有任何 IDE）并准确了解它在所有情况下的作用。除了异常，逻辑流程并不明显，因为 throw 和 catch 可以分开许多逻辑层。

支持异常响应的典型计数器是：“是的，这很糟糕。但是嵌套的错误代码更糟糕。”

嗯，是的，但这**不是**替代方案。

假设你有一个名为 MyErrorProxy 的类，它有一个虚拟的 handleMyXYZError()，如果你知道你的 MyClass 可能会得到一个 XYZ 错误，并且你想在许多逻辑层之外处理它，你将一个指向 MyErrorProxy 的指针传递给它（它可以是一个 mixin ，一个接口，或者只是一个集中的错误处理类）？你不想传递指针？好吧，让它成为一个线程安全的单例。这需要更多的管道，但它是*明确*的并且非常容易跟踪逻辑流。

这就是我长期以来一直在编码的方式。

现在我的问题是：这样做的真正缺点是什么？如果您在我离开很久之后看到此代码并且您正在维护它，您会生气吗？你真的更喜欢 try(s) 和 catch(es) 而不是这种机制，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:32:48.513

这不是一个好主意。这听起来像是一种传递错误代码的混乱方式。如果您不想使用异常，请使用错误代码。至少有了错误代码，人们就会明白你在做什么。

另一方面，每当我看到人们避免异常时，我想他们真的不了解它们的用途。他们总是在谈论 try/catch。实际上，正确编码的异常使用很少尝试/捕获。在我遇到的大多数用例中，异常只是将错误消息传递回堆栈以便它可以退出的一种方式。只有一个 try/catch 块，它在 main 中。

当然，我编写了不会退出的长寿命服务器。他们记录异常传递的消息，将相同的消息返回给客户端，然后继续等待循环。

Bottom line, there should be very few try/catch blocks in your system. Once you understand that, then the logic flow for exception becomes easy to understand. In fact, it's designed into the system.

# mysql - 选择总和忽略组

> ID：11568740
> 
> 赞同：0
> 
> 时间：2012-07-19T20:24:12.923
> 
> 标签：mysql, select, group-by, sum

似乎无法正确调整我的查询；任何帮助，将不胜感激。

这是我的查询：

```
SELECT 
  wordlist.Word,
  SUM( worddocfreq.Freq ) AS wordFreq
FROM sourceparsed
  LEFT JOIN worddocfreq ON sourceparsed.ParsedID = worddocfreq.ParsedID
  LEFT JOIN wordlist ON worddocfreq.WordID = wordlist.WordID
WHERE
  sourceparsed.SrcID = 30032
GROUP BY
  wordlist.Word 
```

这按预期工作，作为示例结果集，我得到两列：第一列是不同单词的列表，第二列是每个单词的频率。

但是，我宁愿调整查询，使第二列改为比例（即每个单词出现次数的总和除以单词总数）。单词的总数将由第二列的总和给出，因为它是上面写的查询的输出。

所以，我的问题是我不确定如何计算单词总数的总和，因为查询末尾的“分组依据”追溯性地强制计算每个单词的总和。所以，我不知道如何将我的第二列除以计算的总和，而与“分组依据”术语无关。

我觉得需要嵌套选择，但我不确定如何以最佳方式集成它。

提前感谢您的任何建议。

干杯，

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:01:38.030

我不确定这是最有效的方法，但试一试：

```
SELECT 
  wordlist.Word,
  SUM( worddocfreq.Freq ) / ( SELECT SUM( Freq ) 
                              FROM worddocfreq 
                                JOIN sourceparsed ON 
                                      sourceparsed.SrcID = sp1.SrcID
                                  AND sourceparsed.ParsedID = worddocfreq.ParsedID
                            ) AS proportion
FROM sourceparsed sp1
  LEFT JOIN worddocfreq ON sourceparsed.ParsedID = worddocfreq.ParsedID
  LEFT JOIN wordlist ON worddocfreq.WordID = wordlist.WordID
WHERE
  sourceparsed.SrcID = 30032
GROUP BY
  wordlist.Word 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:03:06.857

子查询的 A`CROSS JOIN`可能（或可能不会）比 SetFreeByTruth 的方法更有效：

```
SELECT 
  wordlist.Word,
  SUM( worddocfreq.Freq ) / TotalFreq.TotalFreq AS wordFreq
FROM sourceparsed
  LEFT JOIN worddocfreq ON sourceparsed.ParsedID = worddocfreq.ParsedID
  LEFT JOIN wordlist ON worddocfreq.WordID = wordlist.WordID
  CROSS JOIN ( SELECT SUM( Freq ) AS TotalFreq FROM worddocfreq ) AS TotalFreq
WHERE
  sourceparsed.SrcID = 30032
GROUP BY
  wordlist.Word 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:03:26.940

小心除以零误差。可能有更好的方法，但您可以尝试以下方法：

```
select c,wordFreq,sum_all, wordFreq/sum_all as proportion from 
(

    (

        select wordlist.Word,
        sum(worddocfreq.Freq) as wordFreq
        from sourceparsed
        left join worddocfreq on sourceparsed.ParsedID = worddocfreq.ParsedID
        left join wordlist on worddocfreq.WordID = wordlist.WordID
        where sourceparsed.SrcID = 30032
        group by wordlist.Word

    ) c
   LEFT OUTER JOIN
   (select SUM(worddocfreq.Freq) sum_all  
    from sourceparsed
    left join worddocfreq on sourceparsed.ParsedID = worddocfreq.ParsedID
    left join wordlist on worddocfreq.WordID = wordlist.WordID 
    where sourceparsed.SrcID = 30032
   ) t
   ON 1=1
) 
```

# c - 为什么我知道我正在从不兼容的指针类型传递参数？

> ID：11568741
> 
> 赞同：2
> 
> 时间：2012-07-19T20:24:24.180
> 
> 标签：c, pointers

> **可能重复：**
> [在 C 中将多维数组作为函数参数传递](https://stackoverflow.com/questions/4051/passing-multidimensional-arrays-as-function-arguments-in-c)

我正在尝试使用通用交换功能：

```
void swap(void **p, void **q){
    void *tmp;
    tmp=*p;
    *p=*q;
    *q=tmp;
}

int main(){
    int M=5;
    int N=6;
    char*w[M][N];

    swap(&w[1][2], &w[2][2]);

    return 0;
    } 
```

## 让我们假设 w 已经用值初始化，我只想知道我应该发送参数的方式

我试图弄清楚在这种情况下我应该如何将参数发送到交换。

假设 N=M=2；所以我有 w 看起来像 {{"stack", "overflow"},{"best", "site"}}

1.  **swap(w[i][j],w[k][r])**不是正确的选项，因为 w[i][j] 是对实际字符串的引用，而 swap 得到 **void，其中只有 w[i] [j] 是一个只指向 *char 的指针，所以
2.  **swap(&w[i][j], &w[k][r])**看起来是正确的选择。因为它是一个指向 char* 的指针，但是我*从不兼容的指针类型中得到了交换的参数*，怎么会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:32:11.740

您可以转换`char *`为`void *`（将其视为特殊情况），但您不能转换`char **`为`void **`并对结果执行任何有意义的操作。

出于同样的原因，您可以转换`int`为`short`，但您不能转换`int *`为`short *`并期望编译器不会抱怨。

（它恰好适用于常见的体系结构，但 C 标准中没有任何内容可以保证两种不同的指针类型具有相同的表示形式，但有几个例外。）

```
void swap(char **p, char **q)
{
    char *tmp;
    tmp = *p;
    *p = *q;
    *q = tmp;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:29:03.717

您必须转换`void**`为`char*`, 或`char*`to`void**`取决于您希望如何编写代码。

我不认为 C 支持任何通用的方式让函数对它正在使用的数据类型视而不见。

编写交换函数的典型方法是针对您希望使用它的每种数据类型，因此您最终将编写单独的方法来交换`int*`，`char*`等等，而不是使用`void`指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:28:14.910

您的`swap`函数需要`void**`作为参数，但您传递了`char**`s. 这就是编译器所抱怨的。虽然所有对象指针类型都可以隐式转换为`void*`，但对于 来说并非如此`void**`，因此您必须强制转换参数，

```
swap((void**)&w[1][2], (void**)&w[2][2]); 
```

# php - Adsense Onclick(php, javascript)

> ID：11568742
> 
> 赞同：3
> 
> 时间：2012-07-19T20:24:30.217
> 
> 标签：php, javascript, onclick, adsense

我试图了解如何将 onclick 用于 AdSense 单元。有人说这是不可能的，有人说相反。什么是正确的？

反正有没有得到一个adsense单元的onclick。所以当一个 AdSense 单元被点击时，它也会做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:27:15.233

你不能。为了防止滥用，AdSense 广告（以及大多数主要的广告服务系统）在 iframe 中运行，专门用于将它们与您的网页隔离开来。

# gnuplot - 在 Windows 的 gnuplot 中，如何列出当前/工作目录中的文件？

> ID：11568747
> 
> 赞同：5
> 
> 时间：2012-07-19T20:25:02.540
> 
> 标签：gnuplot

我正在`gnuplot`为 Windows 运行 4.6 版（补丁级别 0）。该程序的 Windows 版本提供控制台或命令提示符界面，类似于`bash`Unix/Linux 中的 shell 或 Windows 中的 DOS**命令提示符**。

Windows 中的某些命令`gnuplot`类似于 Unix/Linux 或 DOS 中的命令。例如，`pwd`打印当前/工作目录。此外，`cd`更改目录，因此我可以使用`cd 'C:\Documents and Settings'`.

但是，奇怪的是，我无法弄清楚如何列出当前/工作目录中的文件（在 Unix/Linux 中是`ls`，在 DOS 中是`dir`）。你知道怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T20:42:03.527

Gnuplot 4.6.0 的快速代码审查表明`ls`（或类似的）在 Windows 中不受支持。

但是，您可以使用该`system`命令，例如`system 'dir'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T18:34:26.807

如果您只想从 Windows gnuplot 控制台中查看工作目录的列表，则以下内容适用于我，但使用反引号：

```
`dir && pause` 
```

或者

```
system("dir && pause") 
```

这将打开单独的 cmd 窗口并保持打开状态，直到您按下一个键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-24T06:04:25.987

由于您可能只需要您可以使用的脚本的文件名

```
FILES = system("dir *.txt /B") 
```

**/B**去掉了标题、摘要和附加信息。

# javascript - 这种设计模式何时会中断？

> ID：11568751
> 
> 赞同：2
> 
> 时间：2012-07-19T20:25:23.343
> 
> 标签：javascript, design-patterns, d3.js

我最近试图为 d3.js 编写一个插件，并且被一些可能微不足道的东西弄糊涂了。[d3 的网站](http://bost.ocks.org/mike/chart/)上有关于如何创建可重用图表的解释。模式看起来像这样（只有最重要的细节，完整的代码在[这里](http://bost.ocks.org/mike/chart/time-series-chart.js)）：

**设计模式 1：来自 d3 网站**

```
function timeSeriesChart() {
  var margin = {top: 20, right: 20, bottom: 20, left: 20},
      ...
      area = d3.svg.area().x(X).y1(Y),
      line = d3.svg.line().x(X).y(Y);

  function chart(selection) {
    selection.each(function(data) {

      // Convert data to standard representation greedily;
      // this is needed for nondeterministic accessors.
      data = data.map(function(d, i) {
        return [xValue.call(data, d, i), yValue.call(data, d, i)];
      });

      // Update the x-scale.
      ...

      // Update the y-scale.
      ...

      // Select the svg element, if it exists.
      var svg = d3.select(this).selectAll("svg").data([data]);
      ...

      // Otherwise, create the skeletal chart.
      var gEnter = svg.enter().append("svg").append("g");
      ...    
  }

  // The x-accessor for the path generator; xScale âˆ˜ xValue.
  function X(d) {      }

  // The x-accessor for the path generator; yScale âˆ˜ yValue.
  function Y(d) {      }

  chart.margin = function(_) {
    if (!arguments.length) return margin;
    margin = _;
    return chart;
  };

  chart.width = function(_) {
    if (!arguments.length) return width;
    width = _;
    return chart;
  };

  chart.height = function(_) {
    if (!arguments.length) return height;
    height = _;
    return chart;
  };

  chart.x = function(_) {
    if (!arguments.length) return xValue;
    xValue = _;
    return chart;
  };

  chart.y = function(_) {
    if (!arguments.length) return yValue;
    yValue = _;
    return chart;
  };

  return chart;
} 
```

我毫不怀疑这种模式是健壮的，尤其是因为它是由 d3 的创建者本人提出的。但是，在我遇到该帖子之前，我已经使用以下模式一段时间没有问题（类似于一般如何创建插件）：

**设计模式 2：创建插件的一般方法**

```
(function() {
    var kg = {
        version: '0.1a'
    };

    window.kg = kg;

    kg.chart = {};

    // ==========================================================
    // CHART::SAMPLE CHART TYPE
    // ==========================================================
    kg.chart.samplechart = {

        // ----------------------------------------------------------
        // CONFIGURATION PARAMETERS
        // ----------------------------------------------------------
        WIDTH: 900,
        HEIGHT: 500,
        MARGINS: {
            top: 20,
            right: 20,
            bottom: 20,
            left: 60,
            padding: 40
        },
        xRange: d3.time.scale(),
        yRange: d3.scale.linear(),
        xAxis: d3.svg.axis(),
        yAxis: d3.svg.axis(),
        data: {},

        // ----------------------------------------------------------
        // INIT FUNCTION
        // ----------------------------------------------------------
        init: function() {
            // Initialize and add graph to the given div
            this.update();
        },

        // ----------------------------------------------------------
        // Redraws the graph
        // ----------------------------------------------------------
        update: function() {
            var parentThis = this;
            var newData = parentThis.data;

            // Continue with adding points/lines to the chart

        },
        // ----------------------------------------------------------
        // Gets random data for graph demonstration
        // ----------------------------------------------------------
        getRandomData: function() {
            // Useful for demo purposes  

        }
    };

    // ==========================================================
    // HELPER FUNCTIONS
    // ==========================================================

}());

// EXAMPLE: This renders the chart. 
kg.chart.samplechart.vis = d3.select("#visualization");
kg.chart.samplechart.data = kg.chart.samplechart.getRandomData();
kg.chart.samplechart.init();​ 
```

我已经使用**Design Pattern 2**一段时间了，没有任何问题（我同意它不是超级干净，但我正在努力）。看了**Design Pattern 1**之后，我只是觉得它有太多的冗余。例如，查看使内部变量可访问（`chart.margin = function(_) {}`等）的最后代码块。

也许这是一种很好的做法，但它使维护变得很麻烦，因为必须为每种不同的图表类型重复此操作（如这里在一个名为[NVD3](https://github.com/novus/nvd3/blob/master/nv.d3.js)的库中看到的，目前正在开发中）并且增加了开发工作和错误风险。

我想知道如果我继续我的模式会面临什么样的严重问题，或者我的模式如何可以改进或更接近**设计模式 1**的精神。在这一点上，我试图避免改变模式，因为这将需要完全重写，并将新的错误引入到一个有点稳定的迷你库中。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:51:22.403

事实上，您可以在 d3 源代码中找到您的第二种模式。

```
(function(){
...
d3 = {version: "2.9.6"}; // semver
...

d3.svg = {};
d3.svg.arc = function() {
  var innerRadius = d3_svg_arcInnerRadius,
      outerRadius = d3_svg_arcOuterRadius,
... 
```

但是组件和生成器，如比例、轴、区域和布局，倾向于使用我们可以称之为“具有 getter-setter 方法的图表作为闭包”或“通过可配置函数进行高阶编程”的模式。[您可以在Google Group 线程](https://groups.google.com/d/topic/d3-js/6VSl7srPYIo/discussion)上关注此讨论以了解基本原理。

就个人而言，我也不喜欢这种冗余，即使它有用且可读性强。所以我使用自定义函数自动生成这些 getter 和 setter：

```
d3.helper.createAccessors = function(visExport) {
    for (var n in visExport.opts) {
        if (!visExport.opts.hasOwnProperty(n)) continue;
        visExport[n] = (function(n) {
            return function(v) {
                return arguments.length ? (visExport.opts[n] = v, this) : visExport.opts[n];
            }
        })(n);
    }
}; 
```

我在图表模块的末尾这样使用它：

```
d3.helper.createAccessors(chart, opts); 
```

其中 opts 是所有公共函数的名称：

```
var opts = {
            width: 200,
            margin: [5, 0, 20, 0],
            height: 200,
            showPoints: true,
            showAreas: false,
            enableTooltips: true,
            dotSize: 4
        }; 
```

这是一个完整的例子：http: [//jsfiddle.net/christopheviau/YPAYz/](http://jsfiddle.net/christopheviau/YPAYz/)

# ios - Objective-c 将子视图添加到视图底部

> ID：11568754
> 
> 赞同：7
> 
> 时间：2012-07-19T20:25:38.737
> 
> 标签：ios, objective-c, subview

有什么方法可以在其视图的“底部”添加子视图，例如 z=0 使用图层时？我需要这个，因为当我生成对象时，它们需要位于另一张图片下方，而不是上方。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T14:40:00.240

UIView 的子视图的排序方式是数组的最后一个是最前面的，然后第一个（索引 0）是后面的。因此，要将其插入“底部”，这样做就足够了：

```
[view insertSubview:aView atIndex:0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T20:28:46.383

当然——只需添加新视图并使用容器视图的**sendSubviewToBack:**方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T20:27:34.367

```
sendSubviewToBack:

Moves the specified subview so that it appears behind its siblings.
- (void)sendSubviewToBack:(UIView *)view 
```

来源：http: [//developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

# c# - 在 SharePoint 2010 中复制或移动文档库

> ID：11568755
> 
> 赞同：3
> 
> 时间：2012-07-19T20:25:40.057
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

我看到很多关于将文件从一个文档库复制到另一个的线程，但我想将完整的文档库从一个站点移动或复制到另一个站点（在同一个站点集中）。

.NET C# 代码可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:40:32.827

不，这是不可能的——这就是来自第三方供应商的专业备份解决方案的用武之地。

如果您谈论的是一个简单的文档库，那当然不是那么难：

*   您首先在目的地创建一个新的文档库，然后应用您在当前库中的所有设置
*   其次，您只需遍历库中的所有文档并使用`SPFolder.Add`命令

    `SPFileCollection collFile = collFolder.Files; foreach(SPFile file in collFile) destFolder.Files.Add(file.Name, file.OpenBinary());`

本例中的 collFolder 是原始文档库。destFolder 是新的文档库。您可以使用`SPWeb.GetFolder(string doclibname)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:26:57.037

我们在我们公司使用 ControlPoint 来做这些项目和列表/doclib 副本。我什至不必再用 Powershell 或 STSADM 弄脏我的手（除了我喜欢弄脏手的东西）。很棒的工具和很棒的技术支持团队。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:12:20.443

您可以通过将列表保存为模板并选择“包含内容”标志并从目标站点中的模板重新创建新列表来做到这一点。

1.  转到列表设置并选择“将列表另存为模板”
2.  填写字段并选中“包含内容”复选框。
3.  转到您的目标站点。
4.  转到站点操作 -> 更多选项。选择您之前保存的模板。
5.  你完成了。

请注意，如果您对仅与源站点相关的列表进行了任何自定义（例如，在项目上启动了工作流程），则无法以这种方式复制列表。

要以编程方式执行此操作，只需使用[SPListist.SaveAsTemplate()](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.saveastemplate.aspx)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:55:47.857

如果您有权访问 Central Admin，则可以对某些文档库执行粒度备份。比您可以在任何所需的网站下恢复它。此解决方案应该比逐个复制（和删除）项目更快。有关备份和恢复的更多信息，请参见[http://blogs.msdn.com/b/russmax/archive/2009/10/21/sharepoint-2010-granular-backup-restore-part-1.aspx](http://blogs.msdn.com/b/russmax/archive/2009/10/21/sharepoint-2010-granular-backup-restore-part-1.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T20:15:58.417

在资源管理器视图中打开两个库并复制项目。但这不是代码解决方案，也不会复制元数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T20:39:22.033

我想您可以尝试仅开放源代码和目标`SPWeb`对象并在它们之间一一复制项目。您可能想阅读这篇文章： [http](http://blog.mediawhole.com/2007/12/copying-sharepoint-document-library.html) ://blog.mediawhole.com/2007/12/copying-sharepoint-document-library.html 。

作者展示了如何将文档库从一个站点复制到驻留在同一 Web 应用程序中的另一个站点。

# java - 如何在远程机器上调试战争文件？

> ID：11568756
> 
> 赞同：3
> 
> 时间：2012-07-19T20:25:46.853
> 
> 标签：java, debugging, jboss, remote-debugging

如果我有一个在另一台机器上运行的 jboss 服务器，并且我将我的 war 文件 scp 到那台机器上，我该如何调试 war？我会使用什么命令？如何在我的终端中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T20:29:33.620

在远程机器上运行带有调试参数的 jboss：

```
 -Xdebug -Xrunjdwp:transport=dt_socket,address=54371,server=y,suspend=y 
```

`address`- 这将是您要连接的端口

`server`- 表示它将是服务器

`suspend`- 将阻止应用程序的执行，直到调试器连接（指定`n`您是否希望应用程序在调试器连接到它之前开始）

如果使用 Eclipse，调试为`Remote Java Application`. 您只需提供要调试的项目、远程机器的 IP 和您指定的端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:31:07.483

我假设你有一个 IDE 来进行调试——在大多数情况下人们使用 Eclipse。

1.  需要设置您的 JBoss 以允许调试连接
2.  通过 Eclipse 在其调试端口上连接到您的 JBoss。

在 Eclipse 中查看这篇文章[JBoss 调试](https://stackoverflow.com/questions/516196/jboss-debugging-in-eclipse)

# asp.net-mvc - ASP.NET MVC - 获取调用的动作属性

> ID：11568761
> 
> 赞同：1
> 
> 时间：2012-07-19T20:26:00.130
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

给定动作名称和控制器的字符串以及路由值的 RouteValueDictionary 我如何返回应用于应该调用的动作的任何属性？

如果有人可以提供帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:35:00.160

我设法想出了以下几点：

```
protected IList<string> GetNamespaces(string area, RouteCollection routes) {
    return routes.OfType<Route>()
        .Where(r => r.DataTokens != null)
        .Where(r => (string.IsNullOrEmpty(area) && r.DataTokens["area"] == null) ||
            (r.DataTokens["area"] != null && r.DataTokens["area"].ToString() == area))
        .SelectMany(r => (IEnumerable<string>)r.DataTokens["Namespaces"])
        .Distinct()
        .ToList();
}

public IList<Type> GetControllerTypes() {
    // Note you may wish to improve this to select from all the referenced assemblies aswell
    return Assembly.GetExecutingAssembly().GetExportedTypes()
        .Where(t => typeof(IController).IsAssignableFrom(t) && !t.IsAbstract)
        .ToList();
}

public Type GetControllerType(string controller, string area) {
    // Get the namespaces for the area
    var namespaces = GetNamespaces(area, RouteTable.Routes);

    // Return the controller type that matches a namespace and controller name
    return GetControllerTypes()
        .Single(t => t.Name == controller + "Controller"
            && namespaces.Any(n => n == t.Namespace));
} 
```

现在您只需说出以下内容即可获取类型：

```
var type = GetControllerType("Admin", "Blog"); 
```

从中您可以轻松获取使用反射应用的操作或任何属性。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:23:52.950

作为@nfplee 解决方案，您可以按区域和控制器名称获取控制器，但请记住它可能会返回 `Sequence contains no matching element`异常，除非您在注册路由中提到正确的命名空间。与 RegisterArea 方法中的任何区域一样，将命名空间添加到 RouteConfig 中的主 registerroutes。

希望这是有用的。

祝你好运。

# django - 在另一个变量中传递一个变量

> ID：11568767
> 
> 赞同：-1
> 
> 时间：2012-07-19T20:26:35.910
> 
> 标签：django

> **可能重复：**
> [在 Python 中动态设置局部变量](https://stackoverflow.com/questions/8028708/dynamically-set-local-variable-in-python)

我试图执行这个：

```
 # the request send a number and its ok, the variable have good informations.
        test = request.POST[member.user.username]

        # SyntaxError at ***here***, can't assign to operator
        group%d % test = member.user.username 
```

我也试过：

```
 test = request.POST[member.user.username]
        group%d = member.user.username % test 
```

和 ：

```
 test = request.POST[member.user.username]
        group%d = member.user.username % (test) 
```

对语法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:48:35.773

您可以使用字典来执行此操作：

```
test = request.POST[member.user.username]
d={}
d['group'+str(test)]= member.user.username 
```

也许，有更好的方法可以做到这一点，但我只知道这个。

# vba - 使用 VBA 和 CDO for SMTP 发送消息时，我使用什么命名空间？

> ID：11568768
> 
> 赞同：2
> 
> 时间：2012-07-19T20:26:36.033
> 
> 标签：vba, cdonts

我不明白为什么我看到的每个示例都有来自微软的命名空间架构。它是干什么用的？它真的是通过查看 Microsoft 服务器发送的东西吗？

[如何将 CDO 与 Exchange 与 vbscript 一起使用](https://stackoverflow.com/questions/6283742/how-do-i-use-cdo-with-exchange-with-vbscript)

我会发布我的代码，但它和所有示例都有相同的东西：

`objEmail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusing")= cdoSendUsingPort`

我不想把微软模式放在那里。我只想将它发送到我的 Exchange 或 SMTP 服务器。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:32:29.173

命名空间之所以存在，是因为它们唯一地标识了对象中的属性；

> Microsoft CDO for Windows 2000 使用统一资源标识符 (URI) 来限定或限定字段名称及其语义定义。通过 Fields 集合访问的每个字段都由命名空间前缀和本地名称组成。命名空间前缀是一个 URI 引用，用于限定或限定属性的语义定义。例如，消息的主题字段有两种表示形式：一种是使用 RFC 1522 中定义的机制编码的非 US-ASCII 字符，另一种是这些字符被解码为本机的 UNICODE 字符。通过使用名称空间，当请求消息的“主题”时，可以识别要使用的语义定义。在这种情况下，urn:schemas:mailheader 中定义的主题字段：

来自[MSDN 文章字段](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx)。

[它与XML Namespaces](http://www.w3.org/TR/REC-xml-names/)甚至[C#](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx)等语言中的命名空间几乎完全相同

他们实际上根本没有连接到微软。实际上，尝试在浏览器中输入 URL，您将收到 404 错误。

这只是设置您需要设置的属性以连接到*您的*交换服务器的相当不雅的语法。

例如，要设置您的代码应该连接到的服务器以发送邮件，您需要设置属性`smtpserver`。在内部，要访问此[属性](http://msdn.microsoft.com/en-us/library/ms527294%28v=exchg.10%29)，程序集会将其映射到 URI`http://schemas.microsoft.com/cdo/configuration/smtpserver`

用于发送邮件的 AC# 组件可能会要求您设置`SmtpMail.Server`. 但是，请记住，要创建 SmtpMail，您必须查看命名空间`System.Web.Mail`- 所以属性的完全限定路径是`System.Web.Mail.SmtpMail.Server`Here，但是，语言要优雅得多 - using 语句允许我们在上下文中创建对象，这减少了打字量。请记住，如果你真的想要，在 C# 中，你可以这样做：

```
System.Web.Mail.SmtpServer mailServer = new System.Web.Mail.SmtpServer(); 
```

哪个更冗长。

在我看来，URI 语法很笨拙，但是，在当时，它是一个提议的解决方案，用于解决唯一区分具有相同名称的事物可能意味着不同的事物的问题。有些人用过。很多人没有。请记住，这段代码已有十多年的历史了！

# java - 通过 SOAP 流式传输？

> ID：11568769
> 
> 赞同：1
> 
> 时间：2012-07-19T20:26:43.083
> 
> 标签：java, performance, web-services, streaming, java-metro-framework

我有 WS，在 SOAP 有效负载中有一个 xsd:base64Binary 元素。

最初这是为最大 1MB 设计的，但要求发生了变化，现在它应该接受 50 MB 上传的文件转换为 base64 :( 在 java 中，这在内存方面变得巨大。

我的理论解决方案是将这些“附件”从一端流式传输到另一端（文件从网络应用程序上传，然后转换为 base64 并调用网络服务以存储在某些 Adob​​e 应用程序中） - 我说效率非常低

我阅读了有关 Stax 的信息，但这不适用于 WebServices。

有没有办法将流媒体与 Webservices 结合使用？

（MTOM，但没有找到带流媒体的样本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:43:09.127

我认为您可以使用自定义 servlet 并覆盖 post 方法来做到这一点。

通过 Stax 读取足够多的请求 InputStream 以找到包含 base64 的元素，然后将其通过管道传输到某种 Base64InputStream 直到到达元素的末尾。使用 Stax 或 JaxB 将对象转换为响应并将其发回。

无论您做什么，都不要缓冲整个请求。不要在不考虑它如何处理缓冲的情况下使用典型的肥皂框架，如 CXF 或 JAXWS。你会对你的垃圾收集器造成如此沉重的打击，它会惊慌失措，逃跑，再也不会打电话给你。

### 编辑：垃圾收集

如果您正在运行 4gb 堆，并假设您使用的是 HotSpot，请确保您使用的是 Oracle 的最新 Java (7u5)。接下来，切换到用于处理大型堆的收集器：g1gc (-XX:+UseG1GC) 或 CMS (-XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode)

此外，考虑添加以下内容：

-XX:+OptimizeStringConcat -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -XX:+UseLargePages -XX:+UseStringCache -XX:+UseCompressedOops

# c++ - 将运行时库指定为多线程后出错

> ID：11568771
> 
> 赞同：0
> 
> 时间：2012-07-19T20:27:03.667
> 
> 标签：c++, visual-studio-2010, microsoft-runtime-library

我在 Visual Studio 2010 中处理的当前程序已经运行了一段时间，直到我发现尝试运行它的朋友收到“缺少 msvcp100.dll”错误。我试图通过将运行时库设置从“多线程 DLL”更改为“多线程”来静态链接库来解决此问题。

现在的结果是程序将崩溃并触发以下错误/断点

> HEAP[Tanker.exe]：指定给 RtlFreeHeap(03090000, 02FF4418) 的地址无效 Windows 在 Tanker.exe 中触发了断点。
> 
> 这可能是由于堆损坏，这表明 Tanker.exe 或其已加载的任何 DLL 中存在错误。

和调用堆栈：

```
 ntdll.dll!_RtlpBreakPointHeap@4()  + 0x23 bytes 
    ntdll.dll!_RtlpValidateHeapEntry@12()  + 0x30eb3 bytes  
    ntdll.dll!_RtlDebugFreeHeap@12()  + 0x9a bytes  
    ntdll.dll!@RtlpFreeHeap@16()  + 0x576fe bytes   
    ntdll.dll!_RtlFreeHeap@12()  + 0x54ed bytes 
    kernel32.dll!_HeapFree@12()  + 0x14 bytes   
>   Tanker.exe!free(void * pBlock)  Line 51 C
    Tanker.exe!std::_Tree<std::_Tset_traits<sf::ResourcePtr<sf::Image> *,std::less<sf::ResourcePtr<sf::Image> *>,std::allocator<sf::ResourcePtr<sf::Image> *>,0> >::clear()  Line 1415 + 0x23 bytes C++
    Tanker.exe!std::_Tree<std::_Tset_traits<sf::ResourcePtr<sf::Image> *,std::less<sf::ResourcePtr<sf::Image> *>,std::allocator<sf::ResourcePtr<sf::Image> *>,0> >::erase(std::_Tree_const_iterator<std::_Tree_val<std::_Tset_traits<sf::ResourcePtr<sf::Image> *,std::less<sf::ResourcePtr<sf::Image> *>,std::allocator<sf::ResourcePtr<sf::Image> *>,0> > > _First, std::_Tree_const_iterator<std::_Tree_val<std::_Tset_traits<sf::ResourcePtr<sf::Image> *,std::less<sf::ResourcePtr<sf::Image> *>,std::allocator<sf::ResourcePtr<sf::Image> *>,0> > > _Last)  Line 1383 C++
    Tanker.exe!MainMenu::Show(sf::RenderWindow & window)  Line 36 + 0x4c bytes  C++
    Tanker.exe!Game::ShowMenu()  Line 170   C++
    Tanker.exe!Game::GameLoop()  Line 128   C++
    Tanker.exe!Game::Start()  Line 24   C++
    Tanker.exe!wmain(int argc, wchar_t * * argv)  Line 12   C++
    Tanker.exe!__tmainCRTStartup()  Line 278 + 0x12 bytes   C
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

有什么简单的方法可以解决这个问题，还是动态链接 msvcp100.dll 会好很多？如果是后者，那么最好的方法是什么？

# javascript - Firebug 1.10.0 断点，x 次后命中

> ID：11568773
> 
> 赞同：1
> 
> 时间：2012-07-19T20:27:07.980
> 
> 标签：javascript, firebug, breakpoints

是否可以在任意 JavaScript 文件中创建一个断点并使其只有在被击中 x 次后 Firebug 才会停止/调试程序？

我一直在尝试向断点添加表达式，但还没有让它起作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:45:51.713

目前这是不可能的，但我前段时间为此创建了一个[问题。](http://code.google.com/p/fbug/issues/detail?id=2817)目前，将 Firebug 移至[新的调试 API](http://code.google.com/p/fbug/issues/detail?id=5421)的工作已经开始，一旦实施，它将允许实施此功能。

# machine-learning - 如何在 Weka 构建的决策树中找到特征重要性

> ID：11568777
> 
> 赞同：3
> 
> 时间：2012-07-19T20:27:25.870
> 
> 标签：machine-learning, data-mining, weka, decision-tree

我使用 Weka 成功构建了 J48 (C4.5) 决策树。我现在想评估我的功能的有效性或重要性。

一种明显的方法是遍历所有特征，一次删除一个，然后每次重新运行分类测试，看看哪个特征的分类准确率下降幅度最大。但是，这可能会隐藏功能之间的相互依赖关系。

但是，我正在考虑基于理解 C4.5 算法的另一种方法。由于树中的每个拆分都基于最大信息增益决策，因此在更接近树根的特征上进行拆分必须意味着该特征比在树中具有不同特征的拆分具有更多的信息增益。因此，对于在树内多次分裂中出现的给定特征 F，我可以计算 F 到根的平均距离。然后我可以按平均距离对所有特征进行排名，最低的平均值是最有价值的特征。这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:24:39.550

有点死灵帖子...但是这里有...

我假设您想知道属性重要性的原因是您可以仅使用相关属性来构建更好的树。

如果是这种情况，您始终可以使用元分类器“AttributeSelectedClassifier”，然后将 j48 作为分类器。

然后，您必须选择属性子集的评估器和搜索方法。例如，我目前正在试验“WrapperSubsetEval”评估器和“GeneticSearch”搜索算法。

对于包装器评估，您需要选择一个分类器（它实际上会构建分类器以查看它在搜索测试的每个属性子集上的表现如何），在我的情况下，我使用的是 j48（将它与我想要的分类器匹配使用属性集）。

使用这些设置，它将进化出与 j48 算法配合良好的属性子集（使用遗传算法），然后它将使用进化后的属性集在您的数据上运行 j48。

这在计算上很昂贵，因为它必须构建和测试许多树，但它可以产生良好的结果（并且比尝试手动完成要快得多）:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T13:57:02.473

您可以尝试“属性选择”选项卡。在那里，您可以执行 PCA 分析、CfsSubsetEval + BestFirst... 以确定哪些是最佳特征。

另一种（但手动）方法是训练和测试具有不同属性的相同算法，并使用 T 检验统计检查结果，以确定改进是否具有统计显着性。

# sql-server-2008 - SQL Server 记录集临时表关闭太早？

> ID：11568778
> 
> 赞同：1
> 
> 时间：2012-07-19T20:27:27.110
> 
> 标签：sql-server-2008, tsql, asp-classic

当我通过 SQL Server 2008 运行 SQL 时，它工作得很好。但是，当我将它添加到经典的 ASP 网页然后从那里调用它时，它似乎中断了。我不确定我错过了什么？

```
sql = ""
sql = sql & " DECLARE @listStr VARCHAR(MAX)"

sql = sql & " DECLARE @temp TABLE ("
sql = sql & " DistID varchar(30),"
sql = sql & " FName varchar(30),"
sql = sql & " LName varchar(30),"
sql = sql & " RankID int, "
sql = sql & " PSV int,"
sql = sql & " ShipCountry varchar(30),"
sql = sql & " ShipState varchar(30) )"

sql = sql & " INSERT INTO @temp"
sql = sql & " EXEC  [dbo].[MSGGetList]"
sql = sql & " @List = N'" & request("report_type") & "',"
sql = sql & " @DistID = " & Session("DistributorID") & ","
sql = sql & " @BusCtrID = 1,"

' Autoship Filter Params
If request("autoship") <> "" Then
    sql = sql & " @FilterAutoship = '" & request("autoship") & "',"
Else
    sql = sql & " @FilterAutoship = NULL,"
End If

sql = sql & " @ItemID = " & request("item_id") & ","

' Order Filter Params
If request("orders") <> "" Then
    sql = sql & " @Orders = '" & request("orders") & "',"
Else
    sql = sql & " @Orders = NULL,"
End If

If request("minvol") <> "" Then
    sql = sql & " @MinVol = " & request("minvol") & ","
Else
    sql = sql & " @MinVol = NULL,"
End If

If request("minpostamt") <> "" Then
    sql = sql & " @MinPostAmt = " & request("minpostamt") & ","
Else
    sql = sql & " @MinPostAmt = NULL,"
End If

If request("startdate") <> "" Then
    sql = sql & " @DateStart = '" & request("startdate") & "',"
Else
    sql = sql & " @DateStart = NULL,"
End If

If request("enddate") <> "" Then
    sql = sql & " @DateEnd = '" & request("enddate") & "',"
Else
    sql = sql & " @DateEnd = NULL,"
End If

' Location Filter Params
If request("country") <> "" Then
    sql = sql & " @Country = '" & request("country") & "',"
Else
    sql = sql & " @Country = NULL,"
End If

If request("region") <> "" Then
    sql = sql & " @Region = '" & request("region") & "',"
Else
    sql = sql & " @Region = NULL,"
End If

' Rank Filter Params
If request("rankid") <> "" Then
    sql = sql & " @RankID = '" & request("rankid") & "',"
Else
    sql = sql & " @RankID = NULL,"
End If

'Do Not send list
If request("DoNotSend") <> "" Then
    sql = sql & " @Exempt = '" & request("DoNotSend") & "',"
End If

' Volume Filter Params
sql = sql & " @MinPV = " & request("min_pv") & ","
sql = sql & " @MaxPV = " & request("max_pv") & ","
sql = sql & " @MinGV = " & request("min_gv") & ","
sql = sql & " @MaxGV = " & request("max_gv") & ","
sql = sql & " @MinLBVRBV = NULL"
sql = sql & " SELECT @listStr = COALESCE(@listStr+',' ,'') + DistID FROM @temp"
sql = sql & " SELECT @listStr AS ToList"
stop
response.write(sql & "<br />")
Set rsToList = GetRecordSet(sql)

response.Write(rsToList("ToList")) 
```

当我单步执行代码并查看`rsToList`它时说：

> 对象关闭时不允许操作

知道我在这里缺少什么吗？

编辑：

```
Function getRecordset(strSQL)

        If Application("DebugSQL") Then
            Call WriteSQL(strSQL)
        End If

        'Create Database Connection
        Set FunctionDBConn = Server.CreateObject("ADODB.Connection")
        FunctionDBConn.ConnectionTimeout = 180
        FunctionDBConn.Open(Application("DB_ConnectionString"))
        Set adoRS = Server.CreateObject("ADODB.Recordset")

        adoRS.CursorLocation = 3
        adoRS.LockType = 4

        'Create Recordset
        adoRS.Open strSQL, FunctionDBConn
        Set adoRS.ActiveConnection = Nothing
        Set GetRecordset = adoRS

        'Close Database Connection
        FunctionDBConn.Close
        Set FunctionDBConn = Nothing

    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:37:35.730

我们可以看看你的 GetRecordSet 方法吗？

听起来您在方法中关闭了连接。
您必须等到完成对记录集的处理后才能关闭连接。

考虑将连接传递给方法或使其成为可以在方法外部关闭的页面级变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T21:48:08.747

此错误通常通过使用以下语句开始 SQL 批处理来解决：

```
SET NOCOUNT ON 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:32:20.713

问题是@temp 表。我将功能添加到存储过程中并删除了临时表并且它起作用了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-11T11:33:26.447

有两种解决方案

*   如果您不想创建存储过程，则使用以下语句开始 sql 批处理

> 设置 ANSI_WARNINGS 关闭
> 
> ```
> SET NOCOUNT ON 
> ```

*   您可以将sql语句放在存储过程中并调用它

# boost-spirit - 关于 Spirit.Qi 序列算子和语义动作的问题

> ID：11568787
> 
> 赞同：2
> 
> 时间：2012-07-19T20:28:30.053
> 
> 标签：boost-spirit, boost-spirit-qi

我对灵气中的序列算子和语义动作有一些疑问。

我正在尝试为接受度量前缀（u、m、k、M 等）以及正常指数形式的浮点数定义语法规则。

```
 rule<Iterator, std::string()> sign = char_("+-") [ _val = _1 ];
  rule<Iterator, std::string()> exp = char_("eE") >> -sign >> +digit;
  rule<Iterator, std::string()> suffix = char_("yzafpnumkKMGTPEZY") [ _val = _1 ];
  rule<Iterator, std::string()> mantissa = ((*digit >> char_('.') >> +digit) | (+digit >> char_('.') >> *digit));
  rule<Iterator, std::string()> unsigned_floating = (mantissa >> -(exp | suffix) | +digit >> (exp | suffix));
  rule<Iterator, std::string()> floating = -sign >> unsigned_floating; 
```

**问题1：**为什么我必须在`sign`上面的规则中添加语义动作？不是`char`可以兑换`std::string`吗？

**问题2：**为什么我尝试像这样合并最后两条规则时编译失败：

```
 rule<Iterator, std::string()> floating = -sign >> (mantissa >> -(exp | suffix) | +digit >> (exp | suffix)); 
```

**问题3：**假设我想让`floating`be的属性，`double`写一个语义动作来做从string到double的转换。如何从语义操作内部引用规则匹配的整个字符串？

**问题4：**在问题2的规则`floating`中，占位符`_2`指的是什么，它的类型是什么？

**编辑：**

我想最后一个问题需要澄清一下：

占位符 _2 在以下规则的语义动作中指的是什么，它的类型是什么？

```
 rule<Iterator, std::string()> floating = (-sign >> (mantissa >> -(exp | suffix) | +digit >> (exp | suffix))) [ _2 ]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:34:25.823

第一，一气呵成。请参阅下面的开箱即用答案。

> **问题1**：为什么我必须在上面的规则标志中添加语义动作？char 不能转换为 std::string 吗？

呃，没有字符不能转换为字符串。有关其他选项，请参见下文。

> **问题 2**：当我尝试像这样合并最后两个规则时，为什么编译失败：
> 
> ```
> rule<Iterator, std::string()> floating = -sign >> 
>               (mantissa >> -(exp | suffix) | +digit >> (exp | suffix)); 
> ```

这是由于原子属性分配的规则。解析器暴露了类似的东西

```
vector2<optional<string>, variant<
      vector2<string, optional<string> >,
      vector2<std::vector<char>, optional<string> > > 
```

或类似的（请参阅[解析器的文档](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/operator.html)，我是从内存中在浏览器中输入的）。显然，这不能分配给字符串。用于`qi::as<>`强制原子分配。为方便起见***有`qi::as_string`：

```
floating = qi::as_string [ -sign >> (mantissa >> -(exp | suffix) | 
                                     +digit >> (exp | suffix)) ] 
```

> **问题 3**：假设我想让 float 的属性为 double 并编写一个语义动作来进行从 string 到 double 的转换。如何从语义操作内部引用规则匹配的整个字符串？

您可以`qi::as_string`再次使用，但最合适的似乎是使用`qi::raw`：

```
floating = qi::raw [ -sign >> (mantissa >> -(exp | suffix) | 
                               +digit >> (exp | suffix)) ] 
       [ _val = parse_float(_1, _2) ]; 
```

此解析器*指令*公开了一对源迭代器，因此您可以使用它来引用匹配的确切输入序列。

> **问题4**：问题2的规则浮动中，占位符_2指的是什么，它的类型是什么？

一般来说，要检测属性类型 - 也就是说，当文档让您感到困惑或者您想仔细检查您对它的理解时 - 请参阅此处的答案：

*   [检测 Spirit 语义动作中的参数类型](https://stackoverflow.com/questions/9404189/detecting-the-parameter-types-in-a-spirit-semantic-action/9405265#9405265)

* * *

## **盒子外面**

有没有看使用 Qi 的[内置`real_parser<>`模板](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/numeric/real.html#spirit.qi.reference.numeric.real._code__phrase_role__identifier__realpolicies__phrase___code_)，可以全面定制。看起来您确实想使用它而不是在语义操作中进行自定义解析。

*带有策略*的 real_`parser`模板既快速又非常灵活和健壮。另请参阅最近的答案[是否可以使用输入流读取无穷大或 NaN 值？](https://stackoverflow.com/questions/11420263/is-it-possible-to-read-infinity-or-nan-values-using-input-streams/11420901#11420901).

 *对于 RealPolicies 模型，以下表达式必须有效：

```
Expression                 | Semantics 
===========================+=============================================================================
RP::allow_leading_dot      | Allow leading dot. 
RP::allow_trailing_dot     | Allow trailing dot. 
RP::expect_dot             | Require a dot. 
RP::parse_sign(f, l)       | Parse the prefix sign (e.g. '-'). Return true if successful, otherwise false. 
RP::parse_n(f, l, n)       | Parse the integer at the left of the decimal point. Return true if successful, otherwise false. If successful, place the result into n. 
RP::parse_dot(f, l)        | Parse the decimal point. Return true if successful, otherwise false. 
RP::parse_frac_n(f, l, n)  | Parse the fraction after the decimal point. Return true if successful, otherwise false. If successful, place the result into n. 
RP::parse_exp(f, l)        | Parse the exponent prefix (e.g. 'e'). Return true if successful, otherwise false. 
RP::parse_exp_n(f, l, n)   | Parse the actual exponent. Return true if successful, otherwise false. If successful, place the result into n. 
RP::parse_nan(f, l, n)     | Parse a NaN. Return true if successful, otherwise false. If successful, place the result into n. 
RP::parse_inf(f, l, n)     | Parse an Inf. Return true if successful, otherwise false. If successful, place the result into n 
```

有关如何使用它的令人信服的想法，请参阅**[示例。](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/numeric/real.html#spirit.qi.reference.numeric.real.example)***

# objective-c - 从另一种方法编辑 NSMutableDictionary

> ID：11568788
> 
> 赞同：0
> 
> 时间：2012-07-19T20:28:34.537
> 
> 标签：objective-c

我希望能够从同一个类中的多个方法访问和编辑 NSMutableDictionary。我得到了我想要在一个方法中工作的一部分，但我需要能够从多个方法中编辑字典。有人可以给我一个整个班级都可以访问的 NSMutableDictionary 的例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:32:14.403

在您的`.h`文件中：

```
@interface MyClass : NSObject
{
    NSMutableDictionary *myDict;
} 
```

该`myDict`对象将对您的所有实例方法可见。

# model-view-controller - 我应该如何从会话中检索登录用户并将其传递给我的业务层？

> ID：11568793
> 
> 赞同：0
> 
> 时间：2012-07-19T20:28:45.287
> 
> 标签：model-view-controller, jsf, business-logic-layer

我将 JSF、Hibernate 和 CDI 与 Weld 一起使用。我的应用程序分为：视图（xhtml）、控制（请求/会话/视图范围的 Bean）、模型（实体）和业务（BO 标记为应用范围的 bean）。

我尽量让模型层和业务层与视图和控制层分离，这意味着如果要更改所有 xhtmls + 控制 bean，则可以在不影响业务层和实体的情况下进行。

我的问题是：业务层中有很多方法需要知道谁是登录用户（或至少是他的个人资料），因为这会影响将返回给控制层的结果。

例如：当请求编辑用户列表时，管理员将收到一个包含所有注册用户的列表，而经理将收到一个仅包含“低于”其个人资料的用户的列表。

我不想将我的会话 Bean（包含登录用户）注入我的业务层，因为这会导致耦合（这意味着我无法随时更改我的控制/视图层）。

现在我通过将登录用户作为我的 BO 方法的参数传递来做到这一点，但对我来说“感觉”是错误的。我一直认为控制层可以将它想要的任何人作为登录用户传递，而我的业务层永远不会知道它。

我最后的问题是：

1.  我这样做的方式有什么问题吗？还是我想太多了？
2.  有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:01:46.363

我认为将用户身份放在会话范围内很好，域层中的 bean 可以从中获取它。如果您的域层需要了解用户身份，那么它是一个域概念，在那里有一个对象是可以的。

但是，您应该担心从表示层泄漏抽象。我建议您在域层中为用户身份定义一个接口，域层中的代码是根据该接口编写的，然后从表示层注入它的实现。因为接口是在领域层定义的，所以可以根据领域概念来编写，防止表示概念泄漏到其中。

如果您想更改表示层，则需要编写接口的新实现，但这应该不是问题。

您可以采用另一种方法，即使用[Java 身份验证和授权服务](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html)在用户身份传递到域层时将其绑定到执行线程。然后，该层中的对象可以使用标准 JAAS 构造来访问它。如果您的容器支持 JACC，那么它可能已经通过 JAAS 提供用户身份；我不太确定。

# .htaccess - htaccess重写规则301冲突

> ID：11568794
> 
> 赞同：0
> 
> 时间：2012-07-19T20:28:52.597
> 
> 标签：.htaccess, mod-rewrite, http-status-code-301

我正在尝试获取 [http://www.mysite.com/cat/top/union-made](http://www.mysite.com/cat/top/union-made)

转发到 [http://www.mysite.com/cat/top/union-made-in-usa](http://www.mysite.com/cat/top/union-made-in-usa)

但它似乎与我的动态重写混合在一起，我得到了这个： [http ://www.mysite.com/cat/top/union-made-in-usa/2?topic=union-made&pg=](http://www.mysite.com/cat/top/union-made-in-usa/2?topic=union-made&pg=)

这是我当前的 htaccess 规则：

```
RewriteRule ^cat/top/union-made/ /cat/top/union-made-in-usa [R=301,L]

#Redirect dynamic pages to static links
RewriteRule ^cat/top/([a-z0-9_-]+)/?([a-z0-9_-]*) /cat/index.php?top=$1&pg=$2 [NC,L] 
```

我以为 [L] 会停止双重规则，但没有。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:12:16.033

这条规则很好：

```
RewriteRule ^cat/top/union-made/ /cat/top/union-made-in-usa [R=301,L] 
```

但是您的旧规则需要调整以处理多路径深度并排除“联合制造”

```
RewriteCond %{REQUEST_URI} !union-made
RewriteRule ^cat/top/([a-z0-9_-]+)/([a-z0-9_-]*) /cat/index.php?top=$1&pg=$2 [NC,L] 

# If the last bit of the path isn't there, you can handle it separately here:
RewriteCond %{REQUEST_URI} !union-made
RewriteRule ^cat/top/([a-z0-9_-]+)/? /cat/index.php?top=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:55:12.353

要保留友好的 URL 并防止循环，请改用：

```
RewriteRule ^cat/top/([a-z0-9_-]+)/?([a-z0-9_-]*) /cat/index.php?top=$1&pg=$2 [L,QSA] 
```

# c++ - pr_entryid 对于收件人不是唯一的（Outlook / C++ / MAPI）

> ID：11568795
> 
> 赞同：1
> 
> 时间：2012-07-19T20:28:58.933
> 
> 标签：c++, outlook, mapi

如果我创建两个具有相同受邀者电子邮件地址的会议，则它们各自的 AppointmentItem 对象中的两个 Recipient 对象都会获得相同的 PR_ENTRYID！同时，它们的实例键是不同的。但是，我必须通过它们的 PR_ENTRYID 引用项目，因为这似乎是在 COM 自动化和 MAPI 之间传递 id 的唯一方法（COM 不向 MAPI 提供实例密钥）。

我该如何克服呢？我正在使用 Outlook 2010 32 位。

两个 Recipient 项目的 PR_ENTRYID（相等）：

00000000FE42AA0A18C71A10E8850B651C24000003000000040000000000000018000000000000001E7FDF4152B0E944BA66DFBF2C6A6416E4F52000487F22

00000000FE42AA0A18C71A10E8850B651C24000003000000040000000000000018000000000000001E7FDF4152B0E944BA66DFBF2C6A6416E4F52000487F22

实例键（不相等）：

0000D79F

0000D7B0

问候，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:40:33.437

答案仍然与[http://social.msdn.microsoft.com/Forums/en/outlookdev/thread/87a62535-8e7c-4fc2-bcf8-425aa9388dda相同](http://social.msdn.microsoft.com/Forums/en/outlookdev/thread/87a62535-8e7c-4fc2-bcf8-425aa9388dda)

为什么您希望收件人条目 ID 不同？它是相同的收件人（名称/地址/地址类型），因此条目 id 是相同的。

你到底想做什么，为什么？

# c# - 从mvc返回对象作为json，如何在视图上显示

> ID：11568807
> 
> 赞同：1
> 
> 时间：2012-07-19T20:29:43.757
> 
> 标签：c#, javascript, ajax, json, model-view-controller

我有从 mvc 控制器作为 Json 返回的对象列表。我想知道如何在视图上显示这些对象。

```
function GetTabData(xdata) {
    $.ajax({
        url: ('/Home/GetTabData'),
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: xdata }),

        success: function (result) {
           /// what to do here? 
        },
        error: function () { alert("error"); }
    });
}

public JsonResult()
{
   ...
   var temp = getMyData...
   return Json(temp, JsonRequestBehavior.AllowGet);   
} 
```

查看页面

```
<div id="showContent"> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:32:39.780

这是您必须做的第一步：

```
success: function (result) {
    /// what to do here? 
    result = jQuery.parseJSON(result);
    /// Exploit your object(s) ;)
}, 
```

在此处查看有关利用的更多详细信息：http: [//api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# cakephp - CakePHP 2.0 中的分页

> ID：11568810
> 
> 赞同：0
> 
> 时间：2012-07-19T20:29:53.320
> 
> 标签：cakephp

我使用 CakePHP 2.x 并且有一个线程，其中包含许多帖子，我想对其进行分页。但是当我查看 sql-log 时，有一个 SELECT 语句会影响线程的所有帖子（25k）。实际上只显示了 20 个帖子，那么有没有办法避免这种开销？

这是我的 ThreadsController 的代码

```
public function view($id = null) {
    $this->Thread->id = $id;
    $this->paginate = array(
        'conditions' => array(
            'thread_id' => $id,
        ),
        'order' => array(
            'Post.id' => 'DESC')
    );
    if (!$this->Thread->exists()) {
        throw new NotFoundException(__('Invalid thread'));
    }

    $this->set('thread', $this->Thread->read(null, $id));
    $this->set('posts', $this->paginate('Post'));
} 
```

这是影响所有 25k 行的 SQL 查询：

选择`Post`。`id`, `Post`. `user_id`, `Post`. `post`, `Post`. `created`, `Post`. `modified`, `Post`. `thread_id`从`ppv3`。在`posts`哪里。= (1)`Post``Post``thread_id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:37:55.907

您应该查看您的查询，然后使用 cakePHP 自定义分页方法。[Cakephp 自定义查询分页](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination)。您可以覆盖默认的分页方法。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:55:24.760

您的代码一切都很好，只是您没有在分页中定义“限制”，即您想要为单个页面获取多少条记录。

您的控制器的方法应如下所示：

```
public function view($id = null) {
$this->Thread->id = $id;
$this->paginate = array(
    'limit' => 20, // this was the option which you forgot to mention
    'conditions' => array(
        'thread_id' => $id,
    ),
    'order' => array(
        'Post.id' => 'DESC')
);
if (!$this->Thread->exists()) {
    throw new NotFoundException(__('Invalid thread'));
}

$this->set('thread', $this->Thread->read(null, $id));
$this->set('posts', $this->paginate('Post'));
} 
```

请询问它是否不适合您。

# ruby-on-rails - 如何覆盖 gem 添加到 ActiveRecord::Base 的类方法（在我的装饰器中）

> ID：11568813
> 
> 赞同：1
> 
> 时间：2012-07-19T20:30:08.097
> 
> 标签：ruby-on-rails, ruby, spree

这里的交互有点复杂，所以请耐心等待。我正在与 Spree 合作。Spree 在其一些模型中使用了 delegate_belongs_to，包括“Spree::Variant”。'delegate_belongs_to :product, :available_on (...)' 在原始类主体中被调用。

我希望变体能够有自己的 available_on 日期。delegate_belongs_to 像这样注入自己：

```
module DelegateBelongsTo
  extend ActiveSupport::Concern
  module ClassMethods
    #...
    def delegate_belongs_to(association, *attrs)     
      #...
    end
  end
end

ActiveRecord::Base.send :include, DelegateBelongsTo 
```

我不希望重写整个变体类来删除这个参数。这是我最近的尝试之一：

```
Spree::Variant.class_eval do
  class << self
    alias_method :original_dbt, :delegate_belongs_to

    def delegate_belongs_to(association, *attrs)
      attrs.delete [:available_on]
      original_dbt(association, attrs)
    end
  end

  attr_accessible :available_on
  #...
end 
```

我已经尝试了许多变体。我不确定是不是因为它在 class_eval 中，如果执行顺序有问题，或者什么，但我似乎无法覆盖这个方法。我在这里不明白什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:55:54.350

我通常在 lib 中执行此操作，因此我确信我的更改会在所有初始化程序之后进行评估。

1.  允许加载 lib 文件`application.rb`

    ```
    # ...
    module App
      class Application < Rails::Application
        # ...        
        config.autoload_paths += %W(#{config.root}/lib)
        # ...
        require 'spree_variants'
      end
    end 
    ```

2.  创建`lib/spree_variants.rb`包含内容的文件

    ```
    require 'spree_core'

    module SpreeOldPriceProducts
      class Engine < Rails::Engine
        def self.activate
          Variant.class_eval do
            alias_method :original_dbt, :delegate_belongs_to

            def delegate_belongs_to(association, *attrs)
              attrs.delete [:available_on]
              original_dbt(association, attrs)
            end
          end
        end

        config.to_prepare &method(:activate).to_proc
      end
    end 
    ```

大约 2 个月前，我用 rails 3.0.9 和 spree_core 0.60.1 做过类似的事情，所以我的回答对你来说可能没用，但也许会给你一些指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:10:38.317

我最终只是在我自己的 app/models 目录中覆盖了 Spree::Variant。

为了删除一个参数，我真的不希望这样做，但问题是狂欢模型似乎在实例化时被加载到内存中，并且由于 Ruby 具有可执行的类主体，原始的 delegate_belongs_to 调用被触发（并且触发一些副作用），然后我才能将其关闭。

该方法正在被覆盖，我可以确认，但到那时为时已晚。我尝试设置初始化程序来解决这个问题并没有成功。

据我所知，任何面临类似情况的人都必须更换整个班级。如果有人有更好的解决方案，我想暂时保留这个问题。感谢您的回复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:48:52.233

**这不是一个真正的答案，我指出我已经尝试过**

我不确定这会有多大帮助，但我拿了你的代码并简化了一点，看看覆盖该方法是否可行，它确实有效，这意味着你的方法是正确的，如果你直接覆盖该类，那么它将调用新方法。

```
module DelegateBelongsTo

  module ClassMethods
    def delegate_belongs_to(association, *attrs)     
      p "METHOD INSIDE MODULE"
    end
  end

  def self.included(base)
    base.extend(ClassMethods)
  end
end

module Spree
  class Variant
    include DelegateBelongsTo

    def self.some_method
      delegate_belongs_to("foo", "bar")
    end
  end
end

Spree::Variant.some_method  #METHOD INSIDE MODULE

Spree::Variant.class_eval do
  class << self
    alias_method :original_dbt, :delegate_belongs_to
    def delegate_belongs_to(association, *attrs)
       p "OVERWRITTEN METHOD"
      original_dbt(association, *attrs)
    end
 end
end

Spree::Variant.some_method # "OVERWRITTEN METHOD", "METHOD INSIDE MODULE" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T21:02:12.783

我认为我没有完全理解您的问题，但是每当我看到有人使用 class_eval 或 alias_method 时，我认为必须有更好的方法。您是否尝试过覆盖类中的方法并仅调用 super？

```
class MyModel < ActiveRecord::Base
  def self.delegate_belongs_to(association, *attrs)
    attrs.delete [:available_on]
    super(association, attrs)
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-26T02:04:36.963

对于正在寻找可行解决方案的任何人，删除 getter 和 setter 将恢复为 ActiveRecord 关联。

```
`DATETIME_add_to_variant.rb`:
class AddToVariant < ActiveRecord::Migration
    def change
        add_column :spree_variants, :description, :text
        add_column :spree_variants, :available_on, :datetime
    end
end

`variant_decorator.rb`:
Spree::Variant.class_eval do
    remove_method :description
    remove_method :description=

    remove_method :available_on
    remove_method :available_on=
end 
```

# php - 无法让 3 查询 FQL 多查询与 Facebook 的 PHP SDK 一起使用

> ID：11568817
> 
> 赞同：1
> 
> 时间：2012-07-19T20:30:25.003
> 
> 标签：php, facebook, facebook-php-sdk, facebook-fql

我已经在与 Facebook 的连接和配置中设置了 3 个查询。配置是正确的，因为我正在获取返回值。这是我的查询：

```
$fql_friends_fan_pages = array(
    'query1' => "SELECT uid2 FROM friend WHERE uid1 = me()", //get all me()'s friends
    'query2' => "SELECT page_id FROM page_fan WHERE uid IN (SELECT uid2 FROM #query1)", //get all fan page references from friends
    'query3' => "SELECT name FROM page WHERE page_id IN (SELECT page_id FROM #query2)" //get all info from friends' fan pages
); 
```

我得到的是第二个查询的产品，而不是第三个；它似乎完全忽略了它。我正在尝试获取我所有朋友页面的信息。它不是检索所有名称，而是打印出每个页面的 page_id（来自 query2）。知道为什么它忽略了第三个查询吗？

**编辑：**

我设法通过将第一个和第二个查询合并到一个更大的查询中来使其工作。FQL 多查询中是否存在 2 个查询的已知限制？

```
$fql_friends_fan_pages = array(
    'query1' => "SELECT uid2 FROM friend WHERE uid1 = me()", //get all me()'s friends
    'query2' => "SELECT page_id FROM page_fan WHERE uid IN (SELECT uid2 FROM #query1)", //get all fan page references from friends
    'query3' => "SELECT name FROM page WHERE page_id IN (SELECT page_id FROM #query2)" //get all info from friends' fan pages
);
$params_friends_fan_pages = array(
    'method' => 'fql.multiquery',
    'queries' => $fql_friends_fan_pages
);
$friends_fan_pages = $facebook->api($params_friends_fan_pages); 
```

# java - 如何不压倒 java executorservice 任务队列？

> ID：11568821
> 
> 赞同：3
> 
> 时间：2012-07-19T20:30:40.043
> 
> 标签：java, multithreading, executorservice

我有下面的代码片段，运行良好。但问题是它立即创建并将超过 2000 个任务放在执行程序队列中。

我需要检查执行程序队列中已经完成的任务是否完成，然后再给它更多任务。不一定要准确，即如果队列剩余的任务少于 10 个，则再添加 50 个。

所以executor任务队列没有那么多待处理的任务，这样也可以让shutdown()及时工作，否则即使被调用，executor仍然会尝试先完成其队列中的所有2000个任务。

实现这一目标的最佳方法是什么？谢谢你

```
executor = Executors.newFixedThreadPool(numThreads);

while(some_condition==true)
{
    //if(executor < 10 tasks pending)  <---- how do i do this?
    //{                             
        for(int k=0;k<20;k++)
        {  
            Runnable worker = new MyRunnable();
            executor.execute(worker);
        }
    //}
    //else 
    //{
    //      wait(3000);
    //}
} 
```

* * *

使用信号量更新：

```
private final Semaphore semaphore = new Semaphore(10)
executor = new ThreadPoolExecutorWithSemaphoreFromJohnExample();

while(some_condition==true)
{

        Runnable worker = new MyRunnable();
        //So at this point if semaphore is full, then while loop would PAUSE(??) until
        //semaphore frees up again.
          executor.execute(worker);   
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T20:32:39.397

> 我有下面的代码片段，运行良好。但问题是它立即创建并将超过 2000 个任务放在执行程序队列中。

一种方法是`ThreadPoolExecutor`使用有限的作业队列创建您自己的并`RejectedExecutionHandler`在其上设置自定义。这使您可以细粒度地控制要排队的作业数量。

您需要自定义处理程序，因为默认情况下，如果队列已满，`ThreadPoolExecutor.submit(...)`则会抛出`RejectedExecutionException`. 使用下面的自定义处理程序，当它被队列拒绝时，拒绝处理程序只是将其放回原处，阻塞直到队列有空间。所以没有工作会被拒绝/放弃。

下面大致介绍了如何启动自己的线程池并设置自己的拒绝处理程序。

```
// you can tune the blocking queue size which is the number of jobs to queue
// when the NUM_THREADS are all working
final BlockingQueue<MyRunnable> queue =
    new ArrayBlockingQueue<MyRunnable>(NUM_JOBS_TO_QUEUE);
ThreadPoolExecutor threadPool = new ThreadPoolExecutor(NUM_THREADS, NUM_THREADS,
       0L, TimeUnit.MILLISECONDS, queue);
// by default (unfortunately) the ThreadPoolExecutor will throw an exception
// when you submit the job that fills the queue, to have it block you do:
threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {
   public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
      // this will block if the queue is full as opposed to throwing
      executor.getQueue().put(r);
   }
});
...
// now submit all of your jobs and it will block if the queue is full
for(int k = 0; k < 20000000; k++) {  
   Runnable worker = new MyRunnable();
   threadPool.execute(worker);
} 
```

有关阻塞线程池的更多详细信息，请参见我的答案：

> [如果需要处理的数据太多，如何让 ThreadPoolExecutor 命令等待？](https://stackoverflow.com/questions/10353173/how-can-i-make-threadpoolexecutor-command-wait-if-theres-too-much-data-it-needs/10353250#10353250)

您还可以使用`ThreadPoolExecutor.CallerRunsPolicy`which 会导致将作业提交到线程池的调用者执行作业。但是我不喜欢这种解决方案，因为它会阻塞调用者，直到作业完成，这可能会使其他工作线程饿死。此外，如果有多个提交者，可能仍会导致运行作业的线程过多。

最后，请注意我将核心和最大线程数设置`ThreadPoolExecutor`为相同的数字。不幸的是，默认情况下，执行程序会启动核心线程，然后填充队列，然后才会分配额外的线程，直到达到最大值。这完全违反直觉。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T21:04:10.387

您可以使用简单的信号量。提交后获得新的许可证，完成后释放许可证，以允许其他等待提交的人。

```
private final Semaphore semaphore = new Semaphore(10);//or however you want max queued at any given moment
ThreadPoolExecutor tp= new ThreadPoolExecutor(...){
      public void execute(Runnable r){
          semaphore.acquire();
          super.execute(r);
      }    
      public void afterExecute(Runnable r, Thread t){
         semaphore.release();  
         super.afterExecute(r,t);
      }
}; 
```

因此，如果没有更多可用的许可，这里的提交线程将被暂停。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T07:55:46.597

我通常通过为任务对象使用对象“池队列”来限制此类系统 - 一个在启动时填充了 X 个任务的 BlockingQueue。任何想要向线程提交任务的东西都必须从池队列中获取一个，用数据加载它，然后提交它。

当任务完成并导致它被处理时，它会被推回池队列以供重用。

如果池为空，提交线程会阻塞在池队列中，直到返回一些任务。

这本质上是@John Vint 所建议的信号量控制的一种形式，但具有一些进一步的优点 - 例如，无需持续创建/GC 可运行对象。我喜欢将 PooolQueue.size 转储到计时器上的 GUI 状态栏，这样我就可以看到系统有多“忙”（并且还可以快速检测任何对象泄漏：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-29T15:28:47.537

你会更好地设置拒绝策略，因为你不想压倒线程池，我发现在不让自己复杂化的情况下完成此操作的最佳方法是执行以下操作：

```
final ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(THREADS_COUNT);
executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy()); 
```

会发生的是，一旦所有线程都忙，调用者的线程将执行任务。这是对此类策略[CallerRunsPolicy JavaDoc的参考](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.CallerRunsPolicy.html)

# css - CSS处理div溢出

> ID：11568823
> 
> 赞同：0
> 
> 时间：2012-07-19T20:30:50.427
> 
> 标签：css, html, window, inline

我有 2 个 div 的问题。

它是一个 100% 宽度的盒子，有 2 个 div。左边是缩略图。右边是描述。

我的问题是，当您调整浏览器窗口的大小时，数据描述会低于缩略图。我添加了 min-width 但没有结果。也许我在错误的地方添加它。

非常感谢。

[http://jsfiddle.net/NzX9e/](http://jsfiddle.net/NzX9e/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:45:26.010

如果您希望在缩放窗口时正常工作，请不要将 % 值与固定宽度混合。一个 div 自然会占用父级给它的所有空间。所以你真正需要做的是删除你拥有的所有不必要的样式和标记。

对于这种特定情况：http: [//jsfiddle.net/NzX9e/7/](http://jsfiddle.net/NzX9e/7/)

基本上，你浮动包含 img 的 div 并删除它旁边的所有其他样式（我添加了一些填充以在图像旁边给它一点喘息的空间）。

```
.docBox {
   border: solid 1px #006633;
   margin: 10px 0px 0px 10px;
   overflow: hidden;   <- this acts like a clear to keep the floated div in the parent
}

.previewImgBox {
   height: 70px;
   width: 50px;
   text-align: center;
   float: left;
}

.previewData {
    padding: 0 0 0 60px;
    'all the styles you had here are not needed and cause your problem'
} 
```

我不打算通过并清理所有的标记和样式，只是说你有比需要的更多的东西。对于您要完成的工作，可能会增加一倍以上。少即是多。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:37:11.773

jsFiddle：http: [//jsfiddle.net/NzX9e/11/](http://jsfiddle.net/NzX9e/11/)

变化包括：

删除边距顶部：

```
.previewImgBox .thumb {
    /*margin-top: 5px;*/
} 
```

添加高度：

```
.docBox {
    height: 70px;
    border: solid 1px #006633;
    margin: 10px 0px 0px 10px;
} 
```

添加浮动：左：

```
.previewData {
    height: 70px;
    min-width: 95%;
    width: 95%;
    /*border: solid 1px #00CC33;*/
    overflow: auto;
    display: inline-block;
    float:left;
}

.previewImgBox {
    height: 70px;
    width: 50px;
    /*border: solid 1px #00CC33;*/
    text-align: center;
    display: inline-block;
    float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:36:16.990

好吧，我刚刚将 95% 的宽度修改为 94%，它就像一个魅力。我希望问题可以保持开放，看看是否有更好的解决方案。

# c# - SQL Server 2000“收益回报”结果行为

> ID：11568825
> 
> 赞同：0
> 
> 时间：2012-07-19T20:30:55.753
> 
> 标签：c#, sql-server, tsql

我对我们的 SQL Server 2000 数据库进行了很长的查询，我正在返回结果以供我的 C# 应用程序进一步处理。

考虑这个查询：

```
declare @sn varchar(20)

select distinct serial_number 
from manufacturingData 
where '7/19/2012'<date_time
order by serial_number

while (0 < (select count(serial_number) from #sn)) begin
  select top 1 @sn=serial_number from #sn
  exec sp_GetSnData @sn
  delete from #sn where serial_number=@sn
end
drop table #sn 
```

我正在写这个查询`07/19/2012`，所以它只返回今天的记录。

上面的查询（今天的一半）返回了 119 个不同的序列号，并使用伴随它的 while 循环执行了 52 秒。

通常，此报告的执行期限为 30 天，大约有 3500 个部件号。

有没有办法“挂钩”结果集，以便我可以在生成结果时访问它们？

现在的情况是，没有人知道查询是否需要 2 分钟或 2 天......或者它是否还在做任何事情！经理是关闭他的电脑并回家休息一天，还是这个报告查询即将完成？

返回单个表后，我需要单独处理每个表。

如果可以的话就好了

*   找出退回了多少不同的物品，
*   当前正在查询什么项目，以及
*   在等待下一张表进来时，让结果表可用于处理。

这可能吗？

仅供参考：我目前在我的 Windows 窗体中通过向我们的服务器发送单独的请求来执行此操作，但这会使服务器陷入困境并耗尽所有可用的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:58:55.940

这是您不想使用存储过程而是编写基于集合的代码的情况。当您从处理一条记录转为处理多条记录时，代码重用通常是一件坏事。

或者修改 proc，以便您可以发送逗号分隔的列表并将其解析为临时表并完成工作。不知道 proc 做了什么，我很想建议实际的代码来做这件事。然后它可以处理机器人单输入和多输入参数。

顺便说一句，您不应该使用 sp_ 前缀命名 procs，因为它会首先在系统 procs 中查找它们，然后在用户 procs 中查找它们，因此每次运行都会对性能造成影响（尽管个别地很小，但在整个系统上它可以加起来）每个 proc 的名称，如果系统 proc 以相同的名称结束，它将使用该名称而不是您的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:31:30.287

好吧，根据您的评论，我会尽力优化存储过程。

但是，如果您只想快速简单地说明需要多长时间

做就是了

```
select Count(distinct serial_number)  from manufacturingData  where '7/19/2012'< date_time 
```

并根据您的粗略性能数据将其乘以一些小提琴因子，例如 0.5 秒。

如果你想要进步，那么看看 sql server DMO 基本上你把一个打印语句放在你的循环“Processing 1 of 119 say”中。SMO 将获取输出并触发一个事件，您添加一个处理程序来驱动一个进度条。

注意 DMO 适用于 2000，并且您可以获得一个向后兼容包，因此它适用于 2005 和 2008。它确实（目前也适用于 2012），但它不受支持，你会发疯地依赖它继续这样做。从 2005 年起，DMO 被 SMO 取代。

我会先努力优化 sp，但以获得任何快速的胜利。

# c# - 如何使用反射调用 WCF 服务？

> ID：11568831
> 
> 赞同：2
> 
> 时间：2012-07-19T20:31:21.137
> 
> 标签：c#, wcf, wcf-binding

我有 WCF 服务端点；我无权访问该服务的接口（即合同）。我有需要调用的 EndPoint 详细信息和 MethodName。

我如何在 C# 中做到这一点；我正在使用 netTcpBinding ...

提前致谢

海洋

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-30T20:01:39.280

不确定这是否正是您想要的，但您可以使用 WsdlImporter 联系 WSDL 并获取元数据（如 DataContracts 和 OperationContracts）。例如：

```
 MetadataExchangeClientMode mexMode = MetadataExchangeClientMode.HttpGet;

        // Get Metadata file from service
        MetadataExchangeClient mexClient = new MetadataExchangeClient(mexAddress, mexMode);
        mexClient.ResolveMetadataReferences = true;
        MetadataSet metaSet = mexClient.GetMetadata(mexAddress, mexMode);

        //Import all contracts and endpoints
        WsdlImporter importer = new WsdlImporter(metaSet);
        var contracts = importer.ImportAllContracts();
        ServiceEndpointCollection allEndpoints = importer.ImportAllEndpoints();

        //Generate type information for each contract
        ServiceContractGenerator generator = new ServiceContractGenerator();
        this.EndpointsForContracts = new Dictionary<string, IEnumerable<ServiceEndpoint>>();

        foreach (ContractDescription contract in contracts)
        {
            generator.GenerateServiceContractType(contract);
            // Inspect if the name matches one you're looking for, or do whatever
            //  else you might need
        } 
```

然后可以将代码动态编译到内存中：

```
// Generate a code file for the contracts 
        CodeGeneratorOptions options = new CodeGeneratorOptions();
        options.BracingStyle = "C";
        CodeDomProvider codeDomProvider = CodeDomProvider.CreateProvider("C#");

        // Compile the code file to an in-memory assembly
        // Don't forget to add all WCF-related assemblies as references
        CompilerParameters compilerParameters = new CompilerParameters(
            new string[] { 
                "System.dll", "System.ServiceModel.dll", 
                "System.Runtime.Serialization.dll" });
        compilerParameters.GenerateInMemory = true;

        CompilerResults results = codeDomProvider.CompileAssemblyFromDom(compilerParameters, generator.TargetCompileUnit); 
```

最后，您可以相应地执行方法：

```
Type clientProxyType = this.Cr.CompiledAssembly.GetTypes().First(t => t.IsClass && t.GetInterface(listServiceContracts.SelectedValue) != null && t.GetInterface(typeof(ICommunicationObject).Name) != null);
object dataContract = this.Cr.CompiledAssembly.CreateInstance(dataContractType.FullName, false, System.Reflection.BindingFlags.CreateInstance, null, null, CultureInfo.CurrentCulture, null);

// set the dataContract properties however they need to be set

// Get the first service endpoint for the contract
        ServiceEndpoint serviceEndPoint = this.EndpointsForContracts[listServiceContracts.SelectedValue].First();

        object clientProxyInstance = this.Cr.CompiledAssembly.CreateInstance(clientProxyType.Name, false, System.Reflection.BindingFlags.CreateInstance, null, new object[] { serviceEndPoint.Binding, serviceEndPoint.Address }, CultureInfo.CurrentCulture, null);

        Type myType = clientProxyInstance.GetType();
        object[] arg = { dataContract };

        // Now call the remote procedure via SOAP, get back response
        var returnVal = myType.InvokeMember("OPERATION YOU WANT TO EXECUTE", BindingFlags.InvokeMethod, null, clientProxyInstance, arg); 
```

同样，这对于您想要做的事情可能并不完美，而且您的帖子很久以前，这可能是旧消息。但以防万一......希望这会有所帮助。您可能需要检查返回的类型以确定如何正确设置 DataContract 参数。此外，以上假设您调用的方法只接受一个参数，即 DataContract 对象。

希望这能让你走上正确的轨道，如果你仍然需要它。

# javascript - Rails js.erb 文件未执行

> ID：11568832
> 
> 赞同：8
> 
> 时间：2012-07-19T20:31:29.803
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

我只是想让我的 index.js.erb 文件执行 alert("hi") 命令，但是它不起作用。我对rails很陌生，我想知道你们是否可以帮助我！看起来 servers_controller.rb 索引方法没有正确执行 format.js。有什么建议/想法吗？

**服务器控制器.rb**

```
def index
    @servers = Server.all

    update_all_servers #calls the method update_all_servers in application_controller.rb

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @servers }
      format.js #index.js.erb
    end
end 
```

**index.js.erb**

```
alert("hi");
$("#comments").fadeOut(); 
```

**索引.html**

```
<%- model_class = Server.new.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>
</div>
<table class="table table-striped">
  <thead>
    <tr>
 <!--     <th><%= model_class.human_attribute_name(:id) %></th> -->
      <th><%= model_class.human_attribute_name(:hostname) %></th>
      <th><%= model_class.human_attribute_name(:port) %></th>
  <!--    <th><%= model_class.human_attribute_name(:username) %></th>
      <th><%= model_class.human_attribute_name(:password) %></th>
      <th><%= model_class.human_attribute_name(:ssh_username) %></th>
      <th><%= model_class.human_attribute_name(:ssh_password) %></th> 
      <th><%= model_class.human_attribute_name(:source_branch) %></th> -->
      <th><%= model_class.human_attribute_name(:source_revision) %></th>
      <th><%= model_class.human_attribute_name(:release) %></th>
      <th><%= model_class.human_attribute_name(:rhel_version) %></th>
      <th><%= model_class.human_attribute_name(:gpu_type) %></th>
      <th><%= model_class.human_attribute_name(:total_users) %></th>
      <th><%= model_class.human_attribute_name(:current_users) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @servers.each do |server| %>
      <tr>
  <!--      <td><%= link_to server.id, server_path(server) %></td> -->
        <td><%= server.hostname %></td>
        <td><%= server.port %></td>
   <!--     <td><%= server.username %></td>
        <td><%= server.password %></td>
        <td><%= server.ssh_username %></td>
        <td><%= server.ssh_password %></td>
        <td><%= server.source_branch %></td> -->
        <td><%= server.source_revision %></td>
        <td><%= server.release %></td>
        <td id="comments"><%= server.rhel_version %></td>
        <td><%= server.gpu_type %></td>
        <td><%= server.total_users %></td>
        <td><%= server.current_users %></td>
        <td><%=l server.created_at %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_server_path(server), :class => 'btn btn-mini' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      server_path(server),
                      :method => :delete,
                      :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
                      :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_server_path,
            :class => 'btn btn-primary' %> 
```

**应用程序.js**

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:45:02.870

Point your browser to `/servers.js` and it will show the js, but won't run as it's not in a script tag.

The `respond_to` section chooses one and only one media type to respond to, so when you are looking at a html page, if you want some javascript included, it needs to be in the html page in a script tag somehow. The index.js.erb format is for requests that are made solely for javascript output, such as ajax requests.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T20:25:19.147

我知道这个问题很老，虽然这是解决方案，因为我今天两次偶然发现这个问题，甚至不记得;）

根据[**这篇**](http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/)博文，你应该检查你的`request type`. 它必须是`JS`。如果您通过 请求该控制器操作`AJAX`，只需省略`dataType-attribute`. 这会将请求类型设置为`*/*`，但它仍然可以工作。

**例子：**

```
$.ajax({
    url: '/users/auth/facebook/callback',
    type: 'GET'
}); 
```

**编辑**

对控制器的请求应如下所示：

```
Processing by Users::OmniauthCallbacksController#facebook as JS 
```

使用我的解决方案，它将如下所示：

```
Processing by Users::OmniauthCallbacksController#facebook as */* 
```

将 dataType 设置为“JS”对我不起作用，但它仍然可以像 JS 一样工作。

# c++ - 有没有办法模拟从右键单击鼠标菜单发送到控制台的调用？

> ID：11568837
> 
> 赞同：0
> 
> 时间：2012-07-19T20:31:59.020
> 
> 标签：c++, winapi, console

当右键单击 Windows 控制台时，会显示一个小菜单，其中包含选择、全选、查找等命令。

我的问题是有没有办法从程序本身来做，例如在最后的命令中选择控制台中的所有文本，就像用户用鼠标做的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:19:00.667

好吧，如果它是活动窗口，您可以使用 SendInput 来模拟键盘或鼠标操作。参考[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)

如果它不是活动窗口，首先您必须获取控制台窗口句柄，然后发布鼠标/键盘消息。现在要获得控制台窗口句柄，您有两种方法。

* * *

方法 - 1 [http://msdn.microsoft.com/en-us/library/ms683175(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms683175(VS.85).aspx)

方法 - 2

1.  GetConsoleTitle() 并将其保存在变量中。
2.  形成一个唯一的标题，以便您可以使用 FindWindow 识别窗口
3.  使用 SetConsoleTitle() 设置新形成的标题。
4.  使用 FindWindow(NULL, new_formed_title) 获取窗口句柄。
5.  再次调用 SetConsoleTitle() 以设置您在开始时保存的旧标题。

在第 4 步中，您有控制台窗口句柄。

* * *

拥有控制台窗口句柄后，您可以使用各种鼠标/键盘消息来模拟操作。

# php - 使用图片/ URL 错误发布到 Facebook

> ID：11568841
> 
> 赞同：0
> 
> 时间：2012-07-19T20:32:24.863
> 
> 标签：php, facebook, post, hyperlink, image

无法将帖子发送到 /me/feed 以正确显示：

[http://www.facebook.com/dokuot/posts/359233024150001](http://www.facebook.com/dokuot/posts/359233024150001)

基本上，这就是我希望它看起来的样子，除了帖子的名称（也是 URL）指向图片而不是 URL。

但是，如果我向参数添加链接，链接的视觉效果会发生变化，这严重限制了我可以随图像发布的字符数。（又名，不好）。

**无论如何使标题的href与图像不同？**

这是我针对该特定帖子的代码：

```
$args = array(
    'access_token'  => $token,
    'caption'   => ""Sólo los sueños y los recuerdos son verdaderos, ante la falsedad engañosa de lo que llamamos el presente y la realidad."",
    'description'   => "Alejandro Dolina",
    'picture'       => "http://www.dokuot.com/autor/Alejandro_Dolina.jpg",
    'name'          => "http://www.dokuot.com/frase/4506",
);
$post_id = $facebook->api("/$page_id/feed","post",$args); 
```

当然，我现在已经切换了标题和描述以使用更长的字段，但要点仍然是帖子的标题链接到图片。

我也接受一种绕过链接描述的 350 个字符限制的方法作为答案，这是我目前与链接有关的主要问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:13:52.463

> 无论如何使标题的href与图像不同？

`link`如果您希望“标题”指向某个特定位置，则必须提供参数。

如果您只提供图像而没有链接，它将指向该图像的地址。没办法。

# linux - 安装期间的“未定义引用”

> ID：11568847
> 
> 赞同：0
> 
> 时间：2012-07-19T20:33:08.003
> 
> 标签：linux, installation

我正在尝试安装一些科学软件（特别是可视化工具 xvs 和 DV），但我不断收到表单的消息

```
undefined reference to `_gfortran_----_----' 
```

或者在另一种情况下

```
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../libforms.so: undefined reference to `X----' 
```

最终导致错误。我是个电脑盲，所以我对这里发生的事情以及如何解决它知之甚少。在配置过程中，找到 Fortran 编译器和 xforms 库似乎没有问题（这似乎与此处有关）。我确定我已经安装了 gcc-gfortran、libgfortran、xforms 和 xforms-devel。这可能是什么原因造成的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:51:54.960

您的软件可能依赖于某些外部库或其他软件包的版本，这些版本比您的系统安装的版本旧或新。您应该找出您的软件*确切*具有哪些依赖项，即库等的哪些版本，以及这些库等的哪些版本安装在您的系统上。

# javascript - 相当于 .ready() 的 div？

> ID：11568850
> 
> 赞同：1
> 
> 时间：2012-07-19T20:33:14.060
> 
> 标签：javascript, jquery, ajax, coffeescript

> **可能重复：**
> [如何在 jQuery 中检测新元素的创建？](https://stackoverflow.com/questions/3384398/how-to-detect-new-element-creation-in-jquery)

我有一个页面，其中有几个由不同的 jQuery 调用创建的 div。创建这些 div 后，我想进行 ajax 调用以将一些 html 加载到其中。我试过这样的东西（咖啡脚本）：

```
$("#myDiv").ready ->
  alert "div ready" 
```

但是因为 .ready 函数只为文档定义，所以它会在页面加载后立即运行（在 div 存在之前）。我也试过这个：

```
$("#splunk_results").ready ->
  $("#splunk_results").each ->
    alert "div ready" 
```

根据[此处](https://stackoverflow.com/questions/2816623/jquery-ready-fires-on-div-tag-not-in-the-page)选择的答案，但这似乎根本没有加载。

基本上，当一个 div 出现时，有没有一种简单的方法来执行代码？

# php - 使用 PHP mcrypt_encrypt 对特定字符串进行错误的加密/解密

> ID：11568851
> 
> 赞同：1
> 
> 时间：2012-07-19T20:33:34.847
> 
> 标签：php, cryptography, mcrypt, ecb

我在 PHP 中遇到了一个关于加密/解密的奇怪问题。看下面的代码：

```
<?php

function encrypt($encrypt, $mc_key, $iv) 
{
    $passcrypt = trim(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $mc_key, trim($encrypt), MCRYPT_MODE_ECB, $iv));
    $encode = base64_encode($passcrypt);
    return $encode;
}

function decrypt($decrypt, $mc_key, $iv)
{
    $decoded = base64_decode($decrypt);
    $decrypted = trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $mc_key, trim($decoded), MCRYPT_MODE_ECB, $iv));
    return $decrypted;
}

$key = 'SAtFIAI2g_r=supL43QkO#dTQYjS0JCt';
$iv = '#CvmQT1TlpINQgnc4q%9$k8mt170MXll';
$message = 'AAABzefYdjTYBAFLNMHfLHJZCtAkTKm';

$encrypted = encrypt($message, $key, $iv);
echo $encrypted."\n";

$decrypted = decrypt($encrypted, $key, $iv);
echo $decrypted."\n";

?> 
```

我有 $key, $iv 用来编码 $message。所以第二行应该是我的解密消息。但事实并非如此，请参阅输出：

```
MXk9zteonXhz2zPVK7o4oUJJuXXQRlwOzTO7JbqbsA==
tq֞u�4�&amp;�
        1P&���_pŬ�.��
_ 
```

但是如果你稍微改变一下 $message 就可以了。前任。如果 $message 是： AAABzefYdjTYBAFLNMHfLHJZCtAkTKn 输出是：

```
fAEeJAkluHht8l6ain99YMAMHJtiUAg47XsJBECdrLA=
AAABzefYdjTYBAFLNMHfLHJZCtAkTKn 
```

任何帮助找到解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:36:06.973

我不确定这就是这里发生的事情，但似乎很可能。

该变量在您-ed*之后*`$decoded`保存二进制字符串，因此应该是您的函数在-ed之前生成的确切二进制字符串。不要使用您调用的 base64 解码值。如果有一个字符被修剪掉，那么您解密的字节字符串与您最初加密的字节字符串不同。*`base64_decode()``encrypt()``base64_encode()``trim()``mcrypt_decrypt()`*

 *```
function decrypt($decrypt, $mc_key, $iv)
{
    $decoded = base64_decode($decrypt);
    $decrypted = trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $mc_key, $decoded, MCRYPT_MODE_ECB, $iv));
    // Don't wrap $decoded as trim($decoded) here-----------------^^^^^^^^^^
    return $decrypted;
} 
```

### 编辑

为了评论后的完整性，您不应该`trim()`在加密时：

```
function encrypt($encrypt, $mc_key, $iv) 
{
    $passcrypt = trim(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $mc_key, $encrypt, MCRYPT_MODE_ECB, $iv));
    // -------------------------------------------Don't trim()----^^^^^^^^^^
    $encode = base64_encode($passcrypt);
    return $encode;
} 
```*

# jquery - 新的 FireFox BorderRadius/旋转动画错误？

> ID：11568852
> 
> 赞同：0
> 
> 时间：2012-07-19T20:33:51.560
> 
> 标签：jquery, firefox, rotation, css

我最近在插件构建期间升级到了 Firefox 14.0.1。该插件同时为边框半径、边框宽度、边框颜色以及各种其他属性设置动画。其他浏览器或以前版本的 FireFox 没有任何问题，但在更新后，我注意到在使用旋转进行动画处理时边界半径动画期间出现严重的碎片/伪影。以下是我用于旋转的代码：

```
/* ROTATE */
function animate_rotate(degree,Speed,AnimateDegree){
   /* FACTOR DEGREE */if(degree<AnimateDegree){
        ++degree; Screens.current_rotate=degree;
  }else if(degree>AnimateDegree){
        --degree; Screens.current_rotate=degree;
  };
  /* APPLY THE NEW ROTATION ANGLE TO IE>9 */
  if(!ievers<=8){
       $ScreensLightbox.css({'-moz-transform':'translateX(0) rotate('+degree+'deg)','-moz-transform-origin':''+Screens.LBRotateHandle[0]+'% '+Screens.LBRotateHandle[1]+'%','-webkit-transform':'translateX(0) rotate('+degree+'deg)','-webkit-transform-origin':''+Screens.LBRotateHandle[0]+'% '+Screens.LBRotateHandle[1]+'%',/* Opera */'-o-transform':'translateX(0) rotate('+degree+'deg)','-o-transform-origin':''+Screens.LBRotateHandle[0]+'% '+Screens.LBRotateHandle[1]+'%',/* IE>=9 */'-ms-transform':'rotate('+degree+'deg)','-ms-transform-origin':''+Screens.LBRotateHandle[0]+'% '+Screens.LBRotateHandle[1]+'%'});
   };
/* PUSH INSTANCE TIMER-ON ARRAY */
Screens.Rotate_Timer.push(setTimeout(function({animate_rotate(degree,Speed,AnimateDegree)},Speed/63));
}; 
```

这是动画边界半径的函数：

```
/* BORDER RADIUS */
function animate_border_radius(SetBorderRadius,AnimateBorderRadius,Speed,Effect){
     $ScreensLightbox.css({'border-top-left-radius':SetBorderRadius,'border-top-right-radius':SetBorderRadius,'border-bottom-left-radius':SetBorderRadius,'border-bottom-right-radius':SetBorderRadius})
    .animate({borderTopLeftRadius:AnimateBorderRadius, borderTopRightRadius:AnimateBorderRadius,borderBottomLeftRadius:AnimateBorderRadius,borderBottomRightRadius:AnimateBorderRadius,WebkitBorderTopLeftRadius:AnimateBorderRadius,WebkitBorderTopRightRadius:AnimateBorderRadius,WebkitBorderBottomLeftRadius:AnimateBorderRadius,WebkitBorderBottomRightRadius:AnimateBorderRadius,MozBorderRadius:AnimateBorderRadius},
    {duration:Speed,queue:false,specialEasing:{borderTopLeftRadius:Effect,borderTopRightRadius:Effect,borderBottomLeftRadius:Effect,borderBottomRightRadius:Effect,WebkitBorderTopLeftRadius:Effect,WebkitBorderTopRightRadius:Effect,WebkitBorderBottomLeftRadius:Effect,WebkitBorderBottomRightRadius:Effect,MozBorderRadius:Effect}});
    }; 
```

尝试在最新的 Firefox 中同时设置 Rotate 和 Border Radius 动画时遇到类似问题的人？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:37:14.683

我们看到了一个非常相似的问题。我们有一些使用动画功能淡入视野的图像。在 14.0.1 版本之前，在包括 FF 在内的所有浏览器中都运行良好。

```
// image animation
$("#imgDisplay img").each(function(index) {
    var tm = 800 * index;
    var imgTop = $(this).css('margin-top');
    arr = imgTop.split('px');
    var imgTopStart = (arr[0]*1)-50;
    $(this).css({
        "opacity": "0",
        "margin-top": imgTopStart+"px"
    }).show();

    $(this).delay(tm).animate({
        opacity: 1,
        "margin-top": imgTop
    }, 1500, function() {
        // Animation complete.
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:28:51.483

我有一个类似的错误，添加 translateZ 有帮助。我不能确定这会对您的情况有所帮助，但值得尝试：

```
-moz-transform: rotate(10deg) translateZ(1px); 
```

# robots.txt - 为什么在 javascript 文件上使用 robots.txt？

> ID：11568854
> 
> 赞同：4
> 
> 时间：2012-07-19T20:34:01.053
> 
> 标签：robots.txt

您是否有任何理由应该或不应该允许访问 javascript 或 css 文件？特别常见的文件，如 jquery。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T23:15:22.940

搜索引擎每天为给定站点分配一定数量的带宽或 URL 数量已被广泛接受。因此，一些网站管理员喜欢从搜索引擎中屏蔽 JS、CSS 和样板图像以节省带宽，以便 Google 或 Bing 抓取更多页面而不是不必要的图像。

Google 员工 Matt Cutts 过去曾要求网站管理员不要这样做 ( [http://www.seroundtable.com/googlebot-javascript-css-14930.html](http://www.seroundtable.com/googlebot-javascript-css-14930.html) )。

Google 似乎想确切地知道您的网站在使用和不使用 javascript 时的行为方式。有大量证据表明他们正在渲染整个页面，以及执行在PageLoad 上执行的其他javascript（例如Facebook 评论）。

如果您甚至阻止常见的 jQuery 文件，Google 真的不知道它是否是常见的 jQuery 实现，或者您是否修改了核心文件，从而修改了体验。

我的建议是确保您的所有 JS、CSS 和样板图像都在单独的域或 CNAME 中提供。我会通过日志和[Google Webmaster Tools](https://www.google.com/webmasters/tools/home?hl=en)监控 Googlebot 的抓取，并观察他们是否花费大量时间和带宽来抓取这些资产。如果没有，那就让他们继续爬吧。

由于每个站点的行为不同，您可以尝试并阻止一些占用大量带宽的请求更频繁的文件……然后观察 Google 的“抓取的页面”是否增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:52:13.277

通常，您不应该（或不需要）禁止访问 robots.txt 中的 JavaScript 和 CSS 文件。

然而，搜索引擎（特别是谷歌）在索引 JavaScript 生成的内容方面越来越好。在大多数情况下，这是一件好事。另一方面，JavaScript 也被用于专门向搜索引擎隐藏内容，因为人们认为搜索引擎不执行 JavaScript。这可能不再是这种情况了。但是，有人建议，通过禁止这些在 robots.txt 中生成内容的特定 JavaScript 文件，您还可以阻止搜索引擎生成和查看隐藏内容 - 如果这是要求的话。

seomofo 在 2010 年 6 月就[阻止联盟营销链接](http://www.seomofo.com/marketing/seo-for-affiliate-links.html)提出了这种技术。

# eclipse - 为什么eclipse不能解析同一个包中的类？

> ID：11568855
> 
> 赞同：37
> 
> 时间：2012-07-19T20:34:03.300
> 
> 标签：eclipse, git, dependency-management

我按 F5 ~1000 次并重新启动 eclipse（也使用 -clean），删除 /bin，但没有任何帮助。手动导入 DoodleClient 没有帮助。DoodleClient 存在并且非常好，之前一切正常。点击“Import 'DoodleClient' ...”什么也不做。

在这个问题发生之前我做了什么：

1.  我将 *.class 添加到 .gitignore
2.  `git rm *.class`
3.  在下一次拉取时，git 删除了数百个 .class 文件

![在此处输入图像描述](../Images/cb96ea7bb98fd66a2bdfd34c41d7f832.png)

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-26T12:43:02.370

或者，您可以突出显示项目：

`Clean ...`从**项目菜单**中选择，如果您已激活该`Build Automatically`选项（在同一菜单中），将重新生成类。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-19T20:42:48.880

我可以解决它：在另一个项目（来自同一个 git repo）上，我在不同包中的几个文件上遇到了同样的问题。我所要做的就是在文件中写入一个空格，再次将其删除并保存，以便 eclipse 重新编译它（我猜）。

某种奇怪的行为......：S

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-10-11T08:58:43.743

我在 Maven 项目中遇到了同样的错误。运行 Maven Clean 并关闭项目并重新打开对我不起作用。右键单击项目 - > Maven - > 更新项目为我工作。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-06-08T05:41:10.420

右键单击**项目**然后 R-单击**Maven**然后**更新项目**

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-29T04:30:50.333

我试图刷新工作区（F5）并清理项目，但这并没有成功。对我有用的是右键单击该项目并选择“关闭项目”。

关闭后，我重新打开了项目。这似乎刷新了 Eclipse 中项目的所有文件。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-10T18:06:31.730

幸运的是，我没有 1000 个错误；对于我的 20 多个班级解决问题，我所做的是：

1.  删除违规班级名称的一部分
2.  将光标放在（类名称的剩余片段的末尾），执行自动建议（Ctrl+空格）并从建议中选择正确的类
3.  节省

乏味，但它的工作......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-19T20:38:41.050

我要做的第一件事是在同一个包中创建一个新类，并检查它是否可以从你遇到问题的这个类中看到。

另外我不确定，但您可以检查以更改您的“D”类的名称以获得不同的名称。

和 ...检查文件是否确实存在

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-24T12:08:42.517

我有同样的问题。我尝试再次使用静态方法调用添加语句并删除旧语句。Eclipse 甚至帮助我自动完成，然后它再次强调了声明。在我的情况下，关闭项目并在此之后再次导入它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-12T16:19:46.893

我每天都有同样的问题，每次的解决方案都不一样。:) 您可以尝试以下方法：

*   项目菜单 - 清洁
*   项目 - Maven - 更新项目 (Alt+F5)
*   项目 - 刷新
*   项目 - 运行方式 - Maven 清洁
*   项目 - 运行方式 - Maven 安装
*   重启 Eclipse
*   从 servlet 容器中删除应用程序（如果它是 Web 应用程序）
*   祈祷.. :)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-24T11:47:18.287

我的项目资源管理器中有 3 个项目，它们相互依赖。

他们都疯了，我在所有 3 个项目中都有 9000 多个错误。

事实证明，以正确的顺序（中间、顶部、底部）清洁它们中的每一个都可以解决所有问题。

以正确的顺序清洁是解决我的问题的原因。

只是觉得值得一提:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-21T08:29:40.743

编译器检查编译文件的依赖关系，而不是源代码。所以这意味着编译器不会归档 DoodleClient.class。要检查您是否有编译的类，请打开 Navigator 视图 ( `Window -> Show View -> Navigator`) 并查找包含 .class 文件的目录（通常`bin/<project>`或`target/classes`用于 Maven）并检查是否有 DoodleClient.class 文件。如果你不这样做，你可以：

1.  检查 .classpath 文件以查看 DoodleClient.java 是否出现在`excluding`某个类路径条目的某个属性中（如果出现，则将其从排除属性中删除）
2.  如果您使用 Maven，请检查 DoodleClient.java 是否出现在 pom.xml 的 <exclude></exclude> 标记中
3.  将必要的 java 文件/包复制到磁盘上的其他文件夹，使用 javac 从 dos 控制台手动编译 DoodleClient.java，然后将 DoodleClient.class 复制到项目的类文件夹中。希望这可以帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-08-18T06:44:39.207

右键单击项目->构建路径->配置构建路径->Java构建路径->然后修复JRE系统库中的问题

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-26T13:19:08.537

**上述任何**事情都不起作用。

但是我可以像这样**修复**它：

1.  安装了新的 Eclipse 版本
2.  打开了一个新的工作区
3.  将我的 Maven 项目从我的 Git 存储库克隆到新的工作区
4.  在 Eclipse 中将它们作为 Maven 项目导入

**结果**：Eclipse 再次找到类。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-24T11:23:50.080

在我的情况下，我的**Java Build Path -> Source**没有检查包含源路径上的**包含测试源**，我的代码是 JUnit

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-12T15:30:15.453

我在 Eclipse 中的 Java 项目也遇到了同样的问题。mvn 清理项目并没有奇怪的帮助。我不得不编辑所谓的“缺失”类，保存它，然后清理并重建项目。这解决了这个问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-08-02T18:55:36.717

尝试了上面的许多建议而没有成功（Eclipse 重新启动、多次清理、自动建议等）。让我摆脱这种束缚的是对先前提交的硬重置（我正在使用 git）、构建（这次成功），然后再次拉取项目的最新源并重新构建。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-03-30T15:24:09.680

在我的例子中，DoodleClient 类的所有行都被注释了。这不是我写课程的方式，这是不正确地解决 SVN 冲突的副作用。因此，如果您刚刚对项目进行了更新，您可能需要再次检查文件的内容。

# javascript - 计算大小的不透明度值

> ID：11568857
> 
> 赞同：0
> 
> 时间：2012-07-19T20:34:12.083
> 
> 标签：javascript, math

我正在尝试根据对象的大小反向计算不透明度。基本上它越大，它就越透明。

对象大小的计算如下：

```
var baseSize = 60;
var sVariance = 4;
var outputA = [];

function blah() {
    for (i = 0; i < 5; i++) {
        this.newSize = Math.ceil(baseSize - (Math.random() * sVariance));
        outputA[i] = this.newSize;
    }
    document.writeln("Size = "+outputA);
}

blah();​ 
```

...我希望能够计算尺寸范围之间的不透明度强度。例如，如果生成的 5 个尺寸是：60,59,58,57,59，我希望相应的不透明度值是这样的：.25,.5,.75,1,.5

如果已经涵盖了类似的内容，我深表歉意，但我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:53:54.740

听起来您想对数据进行规范化，以便最大值为 1，最小值为某个分数。这将有助于定义您希望该分数是什么（例如，始终为 0.25、1 / # 个值）。如何规范化数据取决于该选择。

考虑做一些事情，比如用列表中的最小值减去所有内容，或将所有内容除以最大值，或两者兼而有之。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:30:44.287

这是我将使用的功能。您可以在函数中看到转换值的逻辑。这里还有一个[例子](http://jsfiddle.net/ve2A3/2/)。

请注意，该`$.map`函数是一个 jQuery 函数，可以非常方便地转换数组项。如果您不使用 jQuery，则可以将其替换为 for 循环。

```
function getOpacityArray (sizeArray, max, range) {
    return $.map(sizeArray, function (n, i) {
        return (max - n) / range;
    });
} 
```

因此，在您的示例中，您可以在计算大小数组后获取不透明度数组，如下所示：

```
var baseSize  = 60, 
    sVariance = 4,
    outputA   = [], 
    opacityA  = [];

function blah() {
   for (i = 0; i < 5; i++) {
      this.newSize = Math.ceil(baseSize - (Math.random() * sVariance));
      outputA[i] = this.newSize;
   }
   document.writeln("Size = "+outputA);
   opacityA = getOpacityArray(outputA, baseSize, sVariance);
}

blah(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:00:38.270

```
function getSizes(baseSize, sVariance) {
    var sizes = [];
    for (i = 0; i < 5; i++) {
        sizes[i] = Math.ceil(baseSize - (Math.random() * sVariance));
    }
    return sizes;
}

function calculateOpacityValues(baseSize, sVariance) {
    var min = 0.25, max = 1,
        step = 0.75 / sVariance, i,
        opacityValues = {};
    for (i = 0; i <= sVariance; i++) {
        opacityValues[baseSize - i] = min + step * i;
    }
    return opacityValues;
}

function getOpacities(sizes, opacityValues) {
    // create a map of opacities
    // and your expected values
    var opacities = [];
    sizes.forEach(function(value, index) {
        opacities[index] = opacityValues[value];
    });
    return opacities;
}

var baseSize = 60, sVariance = 3, 
    sizes = getSizes(baseSize, sVariance);
console.log(sizes);
// use the map to get the opacity
console.log(getOpacities(sizes, calculateOpacityValues(baseSize, sVariance)));​ 
```

[您可以在这里](http://jsfiddle.net/xMkVS/2/)看到它的实际应用。它使用旧版浏览器不支持的[forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)构造，但如果需要，您可以将其切换到普通的 for 循环。`getSizes`通过移动方法中的所有生成逻辑和方法中的所有不透明度计算，我还稍微重构了您的代码`getOpacities`。

在旁注中，您应该`console.log`用于调试（这会在 FireFox 上的 FireBug 控制台、Chrome WebInspector 窗口或 IE 开发控制台中记录）。这比`document.write`（即使我们不在这里讨论，这也[适用](https://stackoverflow.com/a/8203484/182629)`alert`于这种情况）要好得多。

## 编辑

~~您没有提到是否希望`baseSize`and`variance`是可变的。在这种情况下，您应该添加一个方法来根据您的逻辑生成不透明度值图。~~ 我已在示例中添加了您要求的逻辑，并更新了代码。

# regex - 如何使用 sed 从字符串中提取文本？

> ID：11568859
> 
> 赞同：112
> 
> 时间：2012-07-19T20:34:16.327
> 
> 标签：regex, bash, sed

我的示例字符串如下：

```
This is 02G05 a test string 20-Jul-2012 
```

现在我想从上面的字符串中提取`02G05`. 为此，我使用 sed 尝试了以下正则表达式

```
$ echo "This is 02G05 a test string 20-Jul-2012" | sed -n '/\d+G\d+/p' 
```

但是上面的命令什么也没打印，我相信它无法匹配任何东西与我提供给 sed 的模式。

所以，我的问题是我在这里做错了什么以及如何纠正它。

当我用 python 尝试上面的字符串和模式时，我得到了我的结果

```
>>> re.findall(r'\d+G\d+',st)
['02G05']
>>> 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-19T20:42:43.843

怎么用`grep -E`？

```
echo "This is 02G05 a test string 20-Jul-2012" | grep -Eo '[0-9]+G[0-9]+' 
```

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-07-19T20:39:57.473

您`\d`的`sed`. 尝试`[0-9]`或`[[:digit:]]`代替。

要仅打印实际匹配项（而不是整个匹配行），请使用替换。

```
sed -n 's/.*\([0-9][0-9]*G[0-9][0-9]*\).*/\1/p' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-19T20:37:52.847

`sed`不认识`\d`，`[[:digit:]]`改用。您还需要转义`+`或使用`-r`开关（`-E`在 OS X 上）。

请注意，这`[0-9]`也适用于阿拉伯-印度教数字。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-19T20:40:07.053

试试这个：

```
echo "This is 02G05 a test string 20-Jul-2012" | sed 's/.* \([0-9]\+G[0-9]\+\) .*/\1/' 
```

但请注意，如果一行上有两个图案，它将打印第二个。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-13T03:03:35.520

尝试使用[rextract](https://github.com/kata198/rextract)。它将允许您使用正则表达式提取文本并重新格式化。

例子：

```
$ echo "This is 02G05 a test string 20-Jul-2012" | ./rextract '([\d]+G[\d]+)' '${1}'

2G05 
```

# sql - 用中文值查询

> ID：11568860
> 
> 赞同：2
> 
> 时间：2012-07-19T20:34:18.577
> 
> 标签：sql, sql-server

我正在尝试用中文值执行一个简单的 SQL 语句，但它不起作用。**我从 MSD 论坛资助我必须在我的MS SQL Server**中使用**nvarchar**字段，但它也不起作用。

 **这是一段代码摘录：

```
sqlCommand.CommandType = CommandType.Text
sqlCommand.CommandText = "insert into ExampleTable values('发现','发现','发现')"
sqlCommand.ExecuteNonQuery() 
```

这执行没有问题，但在数据库中我得到了这个：“???????????????????”

再次感谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:35:33.270

在值前面加上字母 N 将它们视为`nvarchar`：

```
sqlCommand.CommandText = "insert into ExampleTable values(N'发现',N'发现',N'发现')" 
```**

# amazon-ec2 - 在经过身份验证的 HTTP 代理之后开发 AWS 应用程序

> ID：11568861
> 
> 赞同：0
> 
> 时间：2012-07-19T20:34:25.127
> 
> 标签：amazon-ec2, amazon-web-services, http-proxy

我们必须开发一个将部署在 AWS EC2 上的应用程序。作为我们夜间构建的一部分，我们希望在本地对我们的代码进行单元测试，然后部署到 AWS 实例并通过 Internet 运行功能测试。

在理想情况下，我们只需编写一个构建脚本，使用 AWS 开发工具包选择合适的 AMI，启动实例，使用 SSH 登录，设置环境，通过 FTP 传输我们的程序，然后 Bingo！但是，我们在 HTTP 代理后面。由于我们不能使用 SSH 或 FTP，我们想到了三个基本选项。

1：尝试将 userData 添加到我们的 RunInstanceRequest 中，这将导致实例在启动时设置我们的环境、下载并运行我们的程序（可能来自 AWS S3 存储桶）。在 Java 中，这将类似于：

```
RunInstancesRequest runInstancesRequest = new RunInstancesRequest()
    .withInstanceType(myType)
    .withImageId(id)
    .withMinCount(min)
    .withMaxCount(max)
    .withSecurityGroupIds(mySecurityGroup)
    .withKeyName(someKey)
    .withUserData(myScript); //add our installation script

RunInstancesResult runInstances = ec2.runInstances(runInstancesRequest); 
```

[2：在本地 VM 上安装我们的程序，并使用此处](http://aws.amazon.com/ec2/vmimport/)所述的 ec2-import-instance 工具将整个 VM 导入 AWS 。

3：上下跳跃，要求限制较少的网络环境。

我们对（1）感到不安，因为调试安装的任何问题都非常困难。(2) 每次部署时都会涉及到整个 VM 的传输和转换，并且 (3) 看起来不太乐观！

有谁知道做到这一点的最佳方法？

:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:12:50.790

为什么不构建自己的自定义 AMI，在启动时自动下载并执行远程安装脚本？您可以编写一个花哨的 init.d 脚本，也可以从 /etc/rc.local 调用一个简单的 shell 脚本（假设是类似 Redhat 的 disto）。这与 RightScale 的处理方式非常相似。

# java - 在休眠中关闭 import.sql

> ID：11568866
> 
> 赞同：4
> 
> 时间：2012-07-19T20:34:49.727
> 
> 标签：java, hibernate, hsqldb

这是 hibernate 的一个文档不足的部分，但是如果类路径的根目录中存在一个名为 import.sql 的文件，那么`('/import.sql')`Hibernate 将在创建数据库模式后执行从该文件中读取的 SQL 语句。我想知道是否有办法在休眠时关闭它。显而易见的答案是从 import.sql 更改名称，但我想知道是否还有其他方法。也许通过休眠属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T21:25:48.000

您可以通过将`hibernate.hbm2ddl.import_files`属性设置为空字符串来尝试。

正如您在源代码中看到的`SchemaExport`，尝试加载由属性指定的文件，如果配置不包含值，则返回 DEFAULT_IMPORT_FILE：

```
 this.importFiles = ConfigurationHelper.getString(
            AvailableSettings.HBM2DDL_IMPORT_FILES,
            configuration.getProperties(),
            DEFAULT_IMPORT_FILE
    ); 
```

M。

# asp.net - uiwebview 和 safari 无法显示 aspx 网页

> ID：11568872
> 
> 赞同：0
> 
> 时间：2012-07-19T20:35:07.200
> 
> 标签：asp.net, ios, uiwebview, safari

情况很奇怪。我的应用程序中有一个 UIWebview。当我单击外部 URL 时，此 webview 将用于显示该网页。我的视图有一个名为“在 safari 中打开它”的功能。对于某些aspx网页，内部webview不能显示整个网页，只能显示其中的一部分，所以我在safari中点击了open，但safari也无法完全加载它。但有时这两个都可以正常工作。我整天都在研究这个问题，但仍然没有任何线索……感谢任何可能给我一些建议的人。

# jquery - 如果专注于父母显示父母的孩子

> ID：11568873
> 
> 赞同：0
> 
> 时间：2012-07-19T20:35:08.657
> 
> 标签：jquery, css, focus, hide, show

我有一个使用 left:-9999em; 隐藏的下拉菜单；并离开：0em；在悬停/焦点上，但是当我通过下拉列表中的链接进行选项卡时，显示链接的父级再次消失。

是否可以制作 if child = focus 然后显示带有 CSS 或 jquery 的父级

更新....

好的，所以我有点想要这个 jquery

```
$('.sub-nav-wrapper a').focus(function() 
    $(this).parent().css('left','0');
}); 
```

这样a）它可以工作，b）当焦点不在其中时它会隐藏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:38:14.180

```
$(child).click(function() {
    $(this).parent().show();
} 
```

我不知道这在 CSS 中是否可行。

# javascript - 如何使用 CSS 和 Javascript 缩小 HTML？

> ID：11568874
> 
> 赞同：9
> 
> 时间：2012-07-19T20:35:16.923
> 
> 标签：javascript, jquery, html, css, compression

我在文档中有一个带有 CSS 和 Javascript 的 .html 文档（没有外部文件）。是否有一些在线工具可以将文档和 Javascript***缩小***到非常小的占用空间？我看到许多脚本有点不可读，其中所有变量和函数名称都被替换为一个字母的名称等。请指教。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T21:01:40.620

**编辑 2（2017 年 2 月 22 日）：**现在缩小资产（以及更多，通过添加加载器和插件）的最佳工具绝对是[Webpack](https://webpack.js.org)。

`.css`将所有内容移动到一个文件中并缩小它的配置示例：

```
{
  test: /\.css$/,
  use: [
    {
      loader: 'css-loader',
      options: {
        minimize: true
      }
    }
  ]
} 
```

* * *

**编辑 1（2014 年 9 月 16 日）：**更好的是，现在您有了[Gulp](http://gulpjs.com/)或[Grunt](http://gruntjs.com/)等*任务*运行器。

> 任务运行器是小型应用程序，用于自动化您在开发项目时必须执行的许多耗时、无聊（但非常重要）的任务。其中包括运行测试、连接文件、缩小和 CSS 预处理等任务。通过简单地创建一个任务文件，您可以指示任务运行器在您对文件进行更改时自动处理您能想到的任何开发任务。这是一个非常简单的想法，可以为您节省大量时间并让您专注于开发。

必读：[Gulp.js 入门](http://markgoodyear.com/2014/01/getting-started-with-gulp/)

具有 JavaScript 连接和缩小（和 JSHint）的任务示例：

```
gulp.task('scripts', function() {
  return gulp.src('src/scripts/**/*.js')
    .pipe(jshint('.jshintrc'))
    .pipe(jshint.reporter('default'))
    .pipe(concat('main.js'))
    .pipe(gulp.dest('dist/assets/js'))
    .pipe(rename({suffix: '.min'}))
    .pipe(uglify())
    .pipe(gulp.dest('dist/assets/js'))
    .pipe(notify({ message: 'Scripts task complete' }));
}); 
```

* * *

**原始答案（2012 年 7 月 19 日）：**我建议使用[HTML5 样板构建脚本](https://github.com/h5bp/ant-build-script)，它可以缩小您的 JS 和 CSS。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T20:48:05.570

好的 javascript 压缩器也是[Google 的 Closure Compiler](http://closure-compiler.appspot.com/home)，反之亦然，为了使压缩代码更具可读性，您可以使用[Javascript Beautifier](http://jsbeautifier.org/)。您还可以查看[phpEasyMin](http://phpeasymin.com/)项目。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T00:42:13.337

已为 JS 正确推荐[闭包编译器；](http://closure-compiler.appspot.com/home)但很少有人知道 Google 的*[Closure 样式表](http://code.google.com/p/closure-stylesheets/)*。闭包样式表功能之一是重命名，其中

```
<style>
  .descriptive-parent-class-name .descriptive-element-class-name {color:red;}
</style>
<div class="descriptive-parent-class-name">
  <p class="descriptive-element-class-name">Lorem ipsum</p>
  <p class="descriptive-element-class-name">Lorem ipsum</p>
</div> 
```

会成为

```
<style>
  .a-b .a-c {color:red;}
</style>
<div class="a-b">
  <p class="a-c">Lorem ipsum</p>
  <p class="a-c">Lorem ipsum</p>
</div> 
```

还会进一步缩小；并且鉴于 OP 表明所有资源都包含在 html 中，这最终可能会节省相当多的流量开销。

注意：如果您检查任何 Google 搜索结果页面，您会看到他们的类和 ID 名称几乎从不超过 4 个随机字符

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T20:36:41.277

通过使用[许多](http://refresh-sf.com/yui/) [可用的](http://www.minifyjavascript.com/) [缩小器之一](http://jscompress.com/)。

[甚至](http://www.minifycss.com/css-compressor/) 有[一些](http://code.google.com/p/minify/)缩小 CSS。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T21:12:31.050

恐怕您必须分两步完成：

1.  在文本编辑器中手动搜索和替换全局对象
2.  缩小器以完成 css 和 js 的工作

前段时间我有一个类似的问题（关于全局对象和对象键）。我得到的答案是，没有任何工具会对全球背景做出假设。在您的示例中，它们不会缩小“pageLoad”，因为它可能被您未提供的另一个 html 或 js 片段使用。

您的示例中的一种解决方法是将 pageLoad 函数设为本地并在脚本中动态添加 onload 事件：

```
elt.onload=function(){pageLoad();}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-21T13:16:00.503

试试[http://prettydiff.com/](http://prettydiff.com/?m=minify)。它提供自动语言检测，可以缩小 html、css 和 javascript。此工具假定没有 mime 类型或具有 javascript 相关 mime 类型的脚本标记必须包含 javascript 或不包含任何内容。同样，假定没有 mime 类型或具有“text/css”mime 类型的样式标签包含 CSS。CSS 和 JavaScript 被相应地缩小。该工具本身是用 javascript 编写的。您没有理由必须使用不止一种工具。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-19T21:04:25.993

虽然可以在 JavaScript 中压缩和解压缩 JavaScript 代码（请参阅其他答案），但实际上很难在 CSS 中实现相同的结果。目前没有任何工具可以去除不必要的空白（另请参阅[Are there any agressive CSS Minification tools?](https://stackoverflow.com/questions/8917322/are-there-any-agressive-css-minification-tools)），因为在不破坏 HTML 和 CSS 之间的链接的情况下无法更改标识符和类名。

此外，除了空格之外，您不能从 HTML 标记中删除任何内容。好吧，您可以缩小类名和标识符，但目前没有工具可以更新您的 CSS/JS 文件中的这些缩小值，因此这会使您的网站变得丑陋和损坏。为了获得正确的 CSS 效果，甚至经常需要空元素（是的，我在看你，IE6）。这也适用于 JavaScript 函数名称。

TL;DR：不幸的是，没有一体化的缩小一切的工具。最接近的是[htmlcompressor](http://code.google.com/p/htmlcompressor/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-28T09:14:19.727

我建议您尝试[WebMarkupMin Online](http://webmarkupmin.apphb.com/)。

WebMarkupMin Online 是一个免费的在线工具，用于缩小您的 HTML、XHTML 和 XML 代码。HTML 和 XHTML 压缩器支持从标签和属性中压缩 CSS 代码，以及使用伪协议从标签、事件属性和超链接中压缩`style`JavaScript 代码。这些压缩器支持多种 CSS 压缩算法（Mads Kristensen 的[Efficient stylesheet minifier](http://madskristensen.net/post/Efficient-stylesheet-minification-in-C.aspx)、[Microsoft Ajax CSS Minifier](http://ajaxmin.codeplex.com/)和[YUI CSS Compressor](http://developer.yahoo.com/yui/compressor/)）和 JavaScript 压缩（Douglas Crockford 的[JSMin](http://www.crockford.com/javascript/jsmin.html)、[Microsoft Ajax JS Minifier](http://ajaxmin.codeplex.com/)和[YUI JS Compressor](http://developer.yahoo.com/yui/compressor/)）。`script``javascript:`

这些工具基于[WebMarkupMin](http://webmarkupmin.codeplex.com/)库。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-19T21:00:23.617

从未尝试过，但听说过 Google 的 Closure 编译器的真正好评。您可能想尝试一下

# nswindow - 在 monomac 中初始化一个 NSWindow

> ID：11568876
> 
> 赞同：0
> 
> 时间：2012-07-19T20:35:21.543
> 
> 标签：nswindow, monomac

这让我发疯，我已经尝试了大约一个星期。希望某种鞋底可以提供帮助。我正在尝试创建一个新的模式弹出颜色选择器。但是，`StopModal()`不断创建一个新窗口。

我以`NSWindow`编程方式创建了一个新的有点像这样：

```
class ColorPicker:NSWindow{

    void ColorPicker(IntPtr Value):base(Value){
    }

    void ColorPicker(Color StartColor){
      //Set up window here.
    }

    public void ShowModal(NSWindow NewParent){
        this.ParentWindow = NewParent;
        NSApplication.SharedApplication.RunModalForWindow(this);    
        return DialogResult;
    }
} 
```

我这样创建：

```
ColorPicker CP=new ColorPicker(Color.Red); 
```

然后展示它

```
CP.ShowDialog(MyMainWindow); 
```

我在表单上有一个按钮可以关闭它并调用

```
NSApplication.SharedApplication.StopModal(); 
```

但由于某种原因，这会通过调用创建第二个窗口：

```
void ColorPicker(IntPtr Value):base(Value){
} 
```

然后我得到泄漏错误，很快它就崩溃了：

```
NativeRelease ERROR]: type: ColorPicker handle: 137041376 count: 2 gchandle: 0

objc[350]: Object 0x103070 of class NSConcreteMapTable autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:04:42.623

如果您没有在 .NET 中保留对 ColorPicker 对象的引用，则可能会发生这种情况。它将被垃圾收集，然后在 Cocoa/objective-c 系统尝试向它发送消息时重新创建。

当我在关闭后处理对象时发生在我身上。

# google-apps-script - createServerHandler 上的函数名称是否必须是调用 createServerHandler 的同一脚本中的全局函数？

> ID：11568883
> 
> 赞同：1
> 
> 时间：2012-07-19T20:35:47.993
> 
> 标签：google-apps-script

我创建了一个库 UI 类，我在其中设置了 serverHandler。我希望 serverHandler 函数名称是方法名称而不是全局函数。（例如'this.someMethod'）。但是，这似乎不起作用。如何为服务器事件处理程序的 funcString 参数指定 methodName？(app.createServerHandler(funcString))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:53:42.777

不幸的是，服务器处理程序只能引用全局函数。

# sql - SQL 日期范围计算

> ID：11568887
> 
> 赞同：1
> 
> 时间：2012-07-19T20:36:12.963
> 
> 标签：sql

我有两张表，一张包含日期（开始日期和结束日期）和费率，另一张交易表包含日期和金额。我想在事务表中获取 startdate 和 enddate 之间的事务，并将它们划分为该期间的费率。我只想使用项目代码 1。例如

表率

```
startdate   enddate      rate     item
2011-01-01  2011-01-03   40.00    1
2011-01-07  2011-01-10   10.00    1
2011-01-07  2011-01-10   10.00    2 
```

表事务

```
date            Amount
2011-01-01      500.00
2011-01-02      160.00
2011-01-02      140.00
2011-01-03      600.00
2011-01-07      920.00
2011-01-10      1600.00 
```

结果

```
date            Amount
2011-01-01      500.00/40 
2011-01-02      160.00/40
2011-01-02      140.00/40
2011-01-03      600.00/40
2011-01-07      920.00/10
2011-01-10      1600.00/10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:41:21.563

```
SELECT t.date, t.Amount / r.Rate AS Amount
FROM Transaction t
INNER JOIN rate r ON t.date>=r.startdate and t.date <=r.enddate 
```

您可以使用 BETWEEN，但是，在某些 DBMS 中，如果我没记错的话，它是专有的……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:42:04.537

您可以通过简单的连接来做到这一点。由于您使用的是日期（没有时间）并且在费率表中有结束日期，因此以下应该有效：

```
select t.date, t.amount / r.rate
from transaction t left outer join
     rates r
     on t.date between r.startdate and r.enddate 
```

# java - 如何解决这个错误，如果我使用一个类会导致其他类接口也被感染

> ID：11568890
> 
> 赞同：1
> 
> 时间：2012-07-19T20:36:16.790
> 
> 标签：java, linux, swing, synth

**我的案例**：

我有一个奇怪的BUG

![在此处输入图像描述](../Images/d81e6239e7aa38d07ed9e3859f7d768c.png)

我需要使用 1 个主类中的 2 个类，如下所示：

*   驾驶两个班级的 1 个主要班级是`YumYumYum`

*   其他 2 个仅作为用户界面的类如下：

    a)`MyJSlider`主要BUG创建者

    b）`Volume`第二个类，它只显示一个带有绿色进度条的黑色窗口

现在我已经在一个文件中准备了 SSCCE，demo.xml 也可以从[这里](https://gist.github.com/3146588)获得。

**问题**：

如果我注释掉该行`private MyJSlider _______BUG__BUG__BUG_______ = new MyJSlider();`它可以工作，但是当我使用它时，它会导致一切麻烦。我该如何解决？

```
import java.awt.*;
import java.net.URL;
import javax.swing.*;
import javax.swing.plaf.synth.SynthLookAndFeel;

public class YumYumYum {
  //
  // Step 1: using 2 class from here
  //
  private MyJSlider _______BUG__BUG__BUG_______ = new MyJSlider();    
  private static JFrame f = new JFrame();    
  public YumYumYum() {
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.setLayout(new FlowLayout());
    f.setPreferredSize(new Dimension(300, 200));         
    f.getContentPane().add(new JButton("Show me as Swing only - Then i am correct"));    
    f.pack();
    f.setVisible(true);    
  }
  public void test() {
    Volume a = new Volume();
    a.up(100);
  }

  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        YumYumYum s = new YumYumYum();
        s.test();
      }
    });
  }

  //
  // Step 2: Creates the problem
  //
  public class MyJSlider extends JSlider {
    public MyJSlider() {     
      try {
        SynthLookAndFeel laf = new SynthLookAndFeel();
        //laf.load(MyJSlider.class.getResourceAsStream("/ui/demo.xml"), MyJSlider.class);      
        laf.load(new URL("file:///var/tmp/demo.xml"));
        UIManager.setLookAndFeel(laf);
      } catch (Exception e) {
        e.printStackTrace();
      }       
      setOrientation(JSlider.VERTICAL);
      //setMinimum(-24);
      setMaximum(12);
      setOpaque(false);
    }
  }

  //
  // Step 3: Does not show its actual user interface when Step 2 is involved
  //
  public class Volume extends JWindow {
    private JPanel panelFirst;
    private JProgressBar a;
    public Volume() {    
      setLayout(new BorderLayout());
      setBounds(10, 40, 350, 60);
      panelFirst = new JPanel();        
      panelFirst.setBackground(Color.BLACK);    
      panelFirst.setLayout(new FlowLayout(FlowLayout.LEFT, 8,5));        
      a = createJP(100); 
      panelFirst.add(a);
      add(panelFirst);
      setVisible(true);
      setAlwaysOnTop(true);
    }

    public JProgressBar createJP(int input) {
      JProgressBar jp = new JProgressBar(JProgressBar.VERTICAL, 0, 100);
      jp.setPreferredSize(new Dimension(15, 50));
      jp.setValue(input);
      jp.setBackground(Color.RED);
      jp.setVisible(true);
      return jp;  
    }
    public void up(int input) {
      a.setForeground(Color.GREEN);
    }
  }

} 
```

跟进：

*   在 Java 6 和 Java 7 中测试在 Linux 中的结果相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:27:12.977

我怀疑调用`UIManager.setLookAndFeel`是搞砸了你的用户界面（我在 Mac OSx 下测试过，没有任何问题......）

尝试在调用之前将调用`setLookAndFeel`放在方法中......`main``invokeLater`

```
public static void main(String[] args) {
    SynthLookAndFeel laf = new SynthLookAndFeel();
    //laf.load(MyJSlider.class.getResourceAsStream("/ui/demo.xml"), MyJSlider.class);      
    laf.load(new URL("file:///var/tmp/demo.xml"));
    UIManager.setLookAndFeel(laf);
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        YumYumYum s = new YumYumYum();
        s.test();
      }
    });
} 
```

这可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T22:54:53.947

解决此问题的替代方法如下：

![在此处输入图像描述](../Images/ae769dfd3a421edff42a592fb4d5accf.png)

把它放在 Synth 不适合的地方。

```
 //
  // Step 3: Makeing this work
  //
  public class Volume extends JWindow {
    private JPanel panelFirst;
    private JProgressBar a;
    public Volume() {
      try {
                  // Set cross-platform Java L&F (also called "Metal")
              UIManager.setLookAndFeel(
                  UIManager.getCrossPlatformLookAndFeelClassName());
          } 
          catch (UnsupportedLookAndFeelException e) {
            // handle exception
          }
          catch (ClassNotFoundException e) {
            // handle exception
          }
          catch (InstantiationException e) {
            // handle exception
          }
          catch (IllegalAccessException e) {
            // handle exception
          }      
      setLayout(new BorderLayout());
      setBounds(40, 40, 350, 60);
      panelFirst = new JPanel();        
      panelFirst.setBackground(Color.BLACK);    
      panelFirst.setLayout(new FlowLayout(FlowLayout.LEFT, 8,5));        
      a = createJP(100); 
      panelFirst.add(a);
      add(panelFirst);
      setVisible(true);
      setAlwaysOnTop(true);
    }

    public JProgressBar createJP(int input) {
      JProgressBar jp = new JProgressBar(JProgressBar.VERTICAL, 0, 100);
      jp.setPreferredSize(new Dimension(15, 50));
      jp.setValue(input);
      jp.setBackground(Color.BLACK);
      jp.setVisible(true);
      return jp;  
    }
    public void up(int input) {
      a.setForeground(Color.GREEN);
    }
  } 
```

# classification - k最近邻算法中k的值

> ID：11568897
> 
> 赞同：10
> 
> 时间：2012-07-19T20:36:46.270
> 
> 标签：classification, knn

我有 7 个需要分类的类，我有 10 个特征。在这种情况下，我是否需要使用 k 的最佳值，或者我是否必须针对 1 到 10（大约 10）之间的 k 值运行 KNN 并在算法本身的帮助下确定最佳值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T21:03:35.580

除了我在评论中发布[的文章之外，还有](http://www.kyb.tuebingen.mpg.de/fileadmin/user_upload/files/publications/Final_version_maier_5681%5B0%5D.pdf)[这篇](http://saravananthirumuruganathan.wordpress.com/2010/05/17/a-detailed-introduction-to-k-nearest-neighbor-knn-algorithm/)文章表明：

> k 的选择非常关键——k 值较小意味着噪声对结果的影响较大。较大的值使其计算成本很高，并且有点违背 KNN 背后的基本理念（靠近的点可能具有相似的密度或类别）。选择 k 的简单方法设置为 k = n^(1/2)。

这在很大程度上取决于您的个人情况，有时最好遍历 k 的每个可能值并自己决定。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-16T02:51:47.830

在 k-NN 算法中要注意的重要一点是，**特征**的数量和**类**的数量都**不会影响**k-NN 算法中 k 的值。k-NN算法是一种ad-hoc分类器，用于根据距离度量对测试数据进行分类，即如果与其他类相比，靠近测试样本的Class-1训练样本数量更多，则将测试样本分类为Class-1训练样本。例如：如果 k = 5 个样本的值，则根据距离度量选择 5 个最接近的训练样本，然后对每个类的大多数样本进行投票。因此，如果 3 个样本属于 1 类，2 个样本属于 5 类，则该测试样本被归类为 1 类。所以**k的值**表示对测试样本进行分类所需的训练样本数。

谈到您的问题，**k**的值是非参数的，选择 k 值的一般经验法则**是**k **= sqrt(N)/2**，其中**N**代表**训练数据集中的样本数**。我建议的另一个技巧是尽量保持 k 的值奇数，这样在选择类之间就没有联系，但这表明训练数据在类之间高度相关，并且使用简单的分类算法，例如 k- NN 会导致较差的分类性能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-30T03:26:40.333

在 KNN 中，找到 k 的值并不容易。k 值较小意味着噪声对结果的影响较大，而较大的值使其计算量大。

数据科学家通常选择：

1.如果班级数为2，则为奇数

2.另一种选择k的简单方法是设置k = sqrt(n)。其中 n = 训练数据中的数据点数。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-27T23:21:53.140

您可能想尝试将其作为一种遍历不同 k 值并将其可视化以帮助您做出决策的方法。我已经使用了很多次，它给了我想要的结果：

```
error_rate = []

for i in range(1,50):
    knn = KNeighborsClassifier(n_neighbors=i)
    knn.fit(X_train, y_train)
    pred = knn.predict(X_test)
    error_rate.append(np.mean(pred != y_test))

plt.figure(figsize=(15,10))
plt.plot(range(1,50),error_rate, marker='o', markersize=9) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-01T09:58:16.733

没有预定义的统计方法可以找到最有利的 K 值。选择非常小的 K 值会导致决策边界不稳定。K 的值可以选择为 k = sqrt(n)。其中 n = 训练数据中的数据点数 奇数优先作为 K 值。

大多数情况下，工业中遵循以下方法。初始化一个随机的 K 值并开始计算。得出错误率和 K 之间的图，表示定义范围内的值。然后选择K值作为具有最小错误率。得出精度和 K 之间的图，表示定义范围内的值。然后选择K值作为具有最大精度。尝试在误差曲线和准确度曲线之间找到 K 的折衷值。

# google-apps-script - 在 Google Drive、Android 或桌面的文档列表中找不到 Google Apps 脚本项目

> ID：11568898
> 
> 赞同：6
> 
> 时间：2012-07-19T20:36:49.507
> 
> 标签：google-apps-script

此页面： http: [//googleappsupdates.blogspot.de/2012/06/apps-script-in-docs-list.html](http://googleappsupdates.blogspot.de/2012/06/apps-script-in-docs-list.html) 说

Google Apps 脚本项目现在包含在 Google Drive 的文档列表中。- 您的项目现在存储在 Google Drive 中，并且可以像任何其他文件一样共享。

好吧，它不适合我。我可以通过链接 [https://script.google.com/macros/s/AKfycbyAo3y-3](https://script.google.com/macros/s/AKfycbyAo3y-3)使应用程序正常工作......但我看不到它在 Google Drive 中列出，无论是在桌面 arr 还是 Android 中。我想通过单击列表中的一个项目来访问它，因为我想在我的手机上访问它，不能输入那些长的随机 URL。

当我在桌面上查看 Google Drive 并在“所有者、类型、更多>>”下搜索时，它甚至没有在列表中显示任何远程 Web 应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-12T02:08:51.000

今天，2018 年 1 月 11 日，Google 推出了[Apps Script Dashboard](https://script.google.com/home)。它列出了所有脚本项目文件，独立的和有界的。

参考

*   [3 个新工具可帮助改善您的 Apps 脚本开发和管理体验](https://gsuite-developers.googleblog.com/2018/01/three-new-tools-to-help-improve-your.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T21:19:57.180

恐怕这里有一个小误解......脚本本身可以创建为驱动器文档列表中的独立文档，而不是可执行宏，这是两个不同的东西。

你指的是一个指向服务器并开始执行脚本的url。文档说的是脚本（毕竟是可编辑的文本文件）不需要包含在站点或电子表格中，但可以作为新的文档类型存在。

很抱歉多余，但我想确保它足够清楚。

**编辑**（根据您的评论）：您是对的：如果您在电子表格“容器”中创建了脚本，它不会显示为独立的脚本文件。仅当您独立创建它时才会这样做。
也就是说，我认为快速访问 webapp 的最简单方法是在浏览器本身中创建一个快捷方式，即所谓的***书签***或***收藏夹***（取决于您的浏览器）......至少我是这样做的 :-)

通过电子邮件发送这样的链接也不是问题，因为您不必输入它......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T00:45:49.047

[首先在https://script.google.com](https://script.google.com)打开一个新的 Google 脚本。

从那里，您可以单击**File --> Open...**。这将在一个窗口中打开 Google Drive，但搜索框中已经有特殊搜索：“ **type:script** ”。

你可以直接去这里：[https ://drive.google.com/drive/u/0/search?q=type:script](https://drive.google.com/drive/u/0/search?q=type:script)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-13T04:52:45.150

这是一个很好的问题，我想将你们引导到文档中的[这个链接](https://developers.google.com/apps-script/guides/bound)，该链接解释了绑定脚本和未绑定脚本之间的区别。我发现有人分享了一个很棒的脚本，我想对其进行备份，但即使在保存了他正在使用该脚本的电子表格后，也无法在 Google Drive 中找到它。原来这是一个绑定脚本，这是完全正常的。

所以我要么创建一个新项目并复制并粘贴脚本，要么通过制作另一个副本来正确地完成它，当我转到工具>脚本编辑器时，它有望出现在我的所有工作表中。

（编辑）我将代码复制并粘贴到一个新项目中。但在我这样做之前：

1.  我打开了要在其上运行脚本的电子表格。
2.  转到工具>脚本编辑器，并创建了一个新项目（因为脚本的副本仍然没有出现在我的项目列表中）。
3.  将脚本复制并粘贴到我的新项目中。
4.  Run>onOpen 运行脚本！有用！

# wpf - 将 xamdatagrid 中的列标题移动到网格顶部

> ID：11568899
> 
> 赞同：1
> 
> 时间：2012-07-19T20:37:05.543
> 
> 标签：wpf, c#-4.0, hierarchical-data, xamdatagrid

我有一个分层数据模型：

```
public class AssetClassLevelViewModel
{    
     public string AssetClassName {get; set;}

     public ObservableCollection<AssetClassLevelViewModel> ChildAssetClasses {get; set;}

     public ObservableCollection<ProductHoldingsWithAllocationViewModel> ProductHoldings {get; set;}

} 
```

图像中的列标题反映了 ProductHoldingsWithAllocationViewModel 属性。

![多级层次结构和列标题的快照](../Images/fbf75dcc05a223cf3fc04a6a67742eaf.png)

我需要在网格顶部移动列标题，并且不希望它们在每个分组级别重复。

有解决方案吗？在 xaml 中，我将`HeaderPlacement`属性设置为`OnTopOnly`

谢谢

哈萨宁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:52:25.837

我相信您可以使用以下样式来确保标题行仅位于顶部：

```
<Style TargetType="{x:Type Ig:XamDataGrid}" BasedOn="{StaticResource {x:Type Ig:XamDataGrid}}">
  <Setter Property="FieldLayoutSettings">
    <Setter.Value>
      <igDP:FieldLayoutSettings HeaderPlacement="OnTopOnly" HeaderPlacementInGroupBy="OnTopOnly"/>
    </Setter.Value>
  </Setter>
</Style> 
```

我相信“OnTopOnly”确保标题行仅显示在网格的最顶部，而不是每个组标题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T14:05:38.797

Infragistics 向我建议了以下解决方法来隐藏所有子表标题：

`DataRecordPresenter`为您的资源添加样式：

```
<local:TestConverter2 x:Key="testconv2"/>
<Style TargetType="{x:Type igDP:DataRecordPresenter}">
   <Setter Property="Height" Value="{Binding Converter={StaticResource testconv2}}"/>
</Style> 
```

并将以下转换器添加到您的项目中：

```
public class TestConverter2 : IValueConverter
{
    private int count = 0;

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        DataRecord dr = value as DataRecord;
        if (dr == null)
        {
            return double.NaN;
        }

        if (dr is HeaderRecord)
        {
            if (this.count < 1)
            {
                this.count++;
                return double.NaN;
            }
            else
            {
                return 0;
            }
        }
        else
        {
            return double.NaN;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T13:00:08.493

答案可能有点晚，但是在 XAML 中的 XamDataGrid 上，您只需将 FilterUIType-Property 设置为 LabelIcons，当 XamDataGrid 分组时，ColumnHeaders 将位于顶部。就像这里：

```
<igDP:XamDataGrid.FieldLayoutSettings>
   <igDP:FieldLayoutSettings FilterUIType="LabelIcons"/>
</igDP:XamDataGrid.FieldLayoutSettings> 
```

# perl - 消费者确认在运输途中丢失

> ID：11568901
> 
> 赞同：1
> 
> 时间：2012-07-19T20:37:22.487
> 
> 标签：perl, rabbitmq

我的测试用例。

我有一个消费者，`no_ack =>0`默认`prefetch_count`是 。消费者接收消息，即使之前的消息没有被确认。

如果消息从未被确认或`ack`消息在传输过程中丢失，并且如果消费者从未关闭，则该消息永远不会被确认或永远不会发送给任何其他消费者。它永远在队列中。

我不想让消息超时。相反，我希望在指定的超时后重新发送消息可能是同一消费者。

有没有办法做到这一点？

谢谢

# jquery - 组合多个 css3 选择器

> ID：11568905
> 
> 赞同：1
> 
> 时间：2012-07-19T20:37:34.257
> 
> 标签：jquery, css, jquery-selectors, css-selectors

我知道可以在 jQuery 中组合一些 CSS3 选择器，但是可以组合所有变体吗？

例如，我有一个动态生成的页面，该页面最后输出一个带有唯一标识符的 id，例如 videoPlayer-123，我想选择该 id 的所有直接兄弟是段落标签的实例。请参见此处的示例：

```
$('p+div[id^=videoPlayer]').css('width','100%'); 
```

那样有用吗？还是有更好的方法来做到这一点？

以下是 HTML 外观的示例：

```
<p>
    <span>
        <h2>Test video 1234</h2>
    </span>
</p>
<div id='videoPlayer_1234'>
    <div id='videoPlayer_1234_container'>
        <video controls="controls"><source src="test.mp4"/></video>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:38:52.107

这是完全有效的，并且可能是最好的方法。

# objective-c - Objective-C++：有没有办法出售 C++ 对象？

> ID：11568909
> 
> 赞同：1
> 
> 时间：2012-07-19T20:37:56.933
> 
> 标签：objective-c, macos, objective-c++, objective-c-runtime, distributed-objects

我正在大量使用 Objective-C++。我知道虽然我可以在我的 Objective-C 代码中包含 C++ 代码，但反之则不然。我想通过分布式对象将我创建的自定义 C++ 对象出售给我的 Objective-C 进程。当我尝试执行此操作时，我收到以下错误消息：

```
error: cannot convert ‘custom_class*’ to ‘objc_object*’ in argument passing 
```

有没有办法将自定义 C++ 对象出售给另一个 Objective-C 进程？

我的代码：

```
#import <Cocoa/Cocoa.h>
#import <iostream>
#import <stdio.h>

using namespace std;

class custom_class {
    public:
    custom_class();
    ~custom_class();
    void hello();
};

custom_class::custom_class() { }
custom_class::~custom_class() { }
void custom_class::hello() { cout << "Hello World!" << endl; }

int main() {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    cout << "Starting vendor " << endl;

    custom_class *test = new custom_class();

    NSConnection *connection = [NSConnection connectionWithReceivePort:[NSPort port] sendPort:nil];
    [connection setRequestTimeout:1];
    [connection setRootObject:test];
    [connection registerName:@"DisObjTest"];

    [[NSRunLoop currentRunLoop] run];

    [pool drain];

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:45:08.033

如果不将 C++ 类包装在 Objective-C 类中，就无法做到这一点。所有使分布式对象成为可能的运行时机制在 C++ 中都不可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T20:45:44.803

将其包装在一个 Objective-C 接口中：

```
class custom_class;
@interface custom_class_wrapper : NSObject
@propery (nonatomic, assign) custom_class* obj;
@end 
```

或者在 a`NSValue`中，这需要强制转换

```
custom_class a;
id obj = [NSValue valueWithPointer:&a];
custom_class* a_val = static_cast<custom_class*>([obj pointerValue]); 
```

# sql-server-2008 - 无法转换为日期时间的数据的查询列

> ID：11568910
> 
> 赞同：3
> 
> 时间：2012-07-19T20:38:04.487
> 
> 标签：sql-server-2008, datetime, type-conversion

我有一个较旧的表，其中一`datetime`列被构建为 a`varchar`并且将数据插入该表的表单是自由格式，没有验证/限制。我已经更正了表格，现在开始执行标准化数据的任务。我需要在该列中查询所有不能`CAST`作为`datetime`

例子：

```
9/30/2008
9/30/13
august 2010
5/11
30SEP12
31-Mar-2011
2005 
```

我已经清理了`N/A`数据，`NULL`但我不确定获取所有不被视为有效日期的所有内容的有效方法。有什么提示或技巧，还是我必须逐条记录才能将此列转换为`datetime`数据类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T20:42:08.940

您可以使用`ISDATE`来确定不是日期的记录：

```
SELECT *
FROM YourTable
WHERE isdate(OldDateField) = 0 
```

您可以使用下面的查询来查看哪些不是日期：

```
SELECT isdate('9/30/2008')
SELECT isdate('9/30/13')
SELECT isdate('august 2010')
SELECT isdate('5/11')
SELECT isdate('30SEP12')
SELECT isdate('31-Mar-2011 2005') 
```

# c# - 从 Open Xml 中的行获取电子表格

> ID：11568915
> 
> 赞同：3
> 
> 时间：2012-07-19T20:38:44.560
> 
> 标签：c#, openxml

我正在处理 Openxml Excel 处理项目。在某个类中，我有 Row 对象。我可以仅使用 Row 对象获取此 Row 对象的当前电子表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:45:03.423

您可以使用实例的`Parent`属性`Row`导航到`Worksheet`所属的行。

下面[关于 Row 类的 MSDN 文章](http://msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.row.aspx)清楚地指出，`Row`实例的唯一父元素是`SheetData`行所属的对象。对象的唯一可能的 Parent 对象`SheetData`是 `Worksheet`实例（有关详细信息，请参阅以下[有关 SheetData 类的 MSDN 文章](http://msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.sheetdata.aspx)）。

例子：

以下示例显示如何导航到`Worksheet` 给定`Row`实例所属的实例。为方便起见，我创建了一个扩展方法：

```
public static class RowExtensionMethods
{
  public static Worksheet GetWorksheet(this Row r)
  {
    if (r.Parent == null)
    {
      throw new InvalidOperationException("Row does not belong to sheetdata.");
    }

    if (r.Parent.Parent == null)
    {
      throw new InvalidOperationException("Row does not belong to worksheet.");
    }

    return (Worksheet)r.Parent.Parent;
  }
}

// Then in your method use the extension method like so
public void YourMethod(Row r)
{
  Worksheet w = r.GetWorksheet();

  // Do something with the worksheet...
} 
```

# java - 检查集合是否包含与某个值匹配的所有值

> ID：11568918
> 
> 赞同：1
> 
> 时间：2012-07-19T20:38:55.303
> 
> 标签：java, collections

我想知道了解集合的所有值是否与特定值匹配的最佳方法。

```
List<Integer> listOfStrings = new ArrayList<Integer>(); 
```

我只想知道“listOfStrings”中的所有条目是否都匹配特定值；例如，没有不是“1”的整数。

我需要最快的解决方案。我有一个解决方案，但它非常初级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:42:24.053

循环遍历它：

```
public boolean checkAll(ArrayList<String> list) {
    for(int i = 0; i < listOfStrings.size(); i++) {
        String candidate = listOfStrings.get(i);
        if(candidate == null || !candidate.equals("1")) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T15:58:26.330

在 Java 8 中，您可以使用[`allMatch`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#allMatch-java.util.function.Predicate-)流的方法来实现这一点。

```
public boolean allOnes(Collection<Integer> values) {
    return values.parallelStream().allMatch(i -> i == 1);
} 
```

`parallelStream`如果有多个可用处理器，使用 a可能会产生更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:41:00.520

你可以用一个简单的循环遍历你的列表`for`，并将每个值与你的某个值（比如 1）进行比较。如果列表中的一个值不等于某个值，只需将布尔值设置为 false。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T20:45:47.333

就这样做

```
public boolean isFilled(String value, ArrayList<String> list)
{
    for(int i = 0; i < list.size(); i++)
    {
        String toTest = list.get(i);
        if(toTest == null || !toTest.equals(value)) {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T20:52:40.060

```
 boolean x=true;
     ArrayList<Integer> listOfInts = new ArrayList<Integer>   (Arrays.asList(5,3,1,2,9,5,0,7));
    Integer target = 1;
    for (int i = 0; i < listOfInts.size(); i++)
    {
        if (listOfInts.get(i).equals(target)) // nothing
        {

        } else {
            x = false;
            break;// exits loop right after this
        }
    }
    System.out.println(x); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-19T21:07:22.920

令我惊讶的是，到目前为止提出的所有解决方案都是完全错误的，或者包含一个微妙的错误，或者可能更有效。

这是一个无论列表类型如何都可以快速运行的解决方案，即使列表包含空元素：

```
public boolean listIsFilledWith(List<Integer> integers, int i) {
    Integer value = i; // transform the int into an Integer only once
    for (Integer element : integers) { // iterate using an iterator, to avoid performance problems with linked lists
        if (!value.equals(element)) { // value is not null, but element can be. Don't compare objects with == or !=
            return false; // return early
        }
    }
    return true;
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-07-19T20:43:09.563

使用`.contains()`告诉您该值是否存在于列表中的方法：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#contains%28java.lang.Object% 29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#contains%28java.lang.Object%29)

```
myList.contains(1); 
```

注意：它使用`.equals()`包含对象的方法（它可能对您未来的开发有用）。

嗨，M。

# django - 限制 Django 管理员更改权限

> ID：11568921
> 
> 赞同：4
> 
> 时间：2012-07-19T20:39:03.000
> 
> 标签：django, django-admin

我试图限制组中的用户能够更改他们的组无权更改的字段。例如：

```
class StudentReferral(models.Model):
    teacher = models.CharField(max_length=50)
    referral_first_name = models.CharField(max_length=50)
    referral_last_name = models.CharField(max_length=50)
    accepted = models.BooleanField(blank=True) 
```

现在教师都在一个用户组中，接受或拒绝推荐的人在另一个用户组中。教师用户组应该只能编辑以下字段`teacher`：`referral_first_name`和`referral_last_name`。其他用户组应该只能编辑接受的字段。两组都应该能够看到所有字段。

django 中是否有一些内置的东西可以使这成为可能，或者是一种自定义的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T20:51:18.687

覆盖`ModelAdmin.get_fieldsets`，并执行以下操作：

```
class MyModelAdmin(admin.ModelAdmin):
    ...
    fieldsets = (
        ... # Standard/all fields
    )
    teacher_fieldsets = (
        ... # Only fields teachers can see
    )

    def get_fieldsets(self, request, obj=None):
        if request.user.groups.filter(name='Teachers').exists():
            return self.teacher_fieldsets
        else:
            return super(MyModelAdmin, self).get_fieldsets(request, obj=obj) 
```

**编辑**

抱歉，我错过了关于他们仍然应该能够看到所有字段的信息，只是不能编辑它们。我已经完整地保留了原始答案，因为它可能仍然对您有用。但是，为此，您需要覆盖`ModelAdmin.get_readonly_fields`：

```
class MyModelAdmin(admin.ModelAdmin):
    ...
    readonly_fields = ('teacher', 'referral_first_name', 'referral_last_name')
    teacher_readonly_fields = ('accepted',)

    def get_readonly_fields(self, request, obj=None):
        if request.user.groups.filter(name='Teachers').exists():
            return self.teacher_readonly_fields
        else:
            return super(MyModelAdmin, self).get_readonly_fields(request, obj=obj) 
```

我在这里假设选择只有老师或“其他用户”。如果还有其他类型需要考虑，或者您不希望在一种情况下完全限制字段，您可能需要删除该`readonly_fields`属性并将其替换为类似的内容`other_readonly_fields`，并相应地分支（默认值`readonly_fields`仅是那些具有`editable=False`在模型上）。

另外，请注意，如果需要某个字段，您也不能将其设为只读。如果其中一些是必填字段，您还需要覆盖`ModelForm.__init__`，以使它们在只读的情况下不需要，这需要一些额外的hackery（`ModelForm`通常无权访问`request`）：

```
class MyModelForm(forms.ModelForm):
    class Meta:
        model = MyModel

    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop('request')
        super(MyModelForm, self).__init__(*args, **kwargs)

        if self.request is not None:
            if self.request.user.groups.filter(name='Teachers').exists():
                self.fields['accepted'].required = False

class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm
    ...
    def get_form(self, request, obj=None, **kwargs):
        ModelForm = super(MyModelAdmin, self).get_form(request, obj=obj, **kwargs)
        class WrapperModelForm(ModelForm):
            def __new__(cls, *args, **kwargs):
                kwargs['request'] = request
                return ModelForm(*args, **kwargs)
        return WrapperModelForm 
```

# c# - Visual Studio 2010 中的 SPS 站点

> ID：11568922
> 
> 赞同：1
> 
> 时间：2012-07-19T20:39:04.377
> 
> 标签：c#, .net, visual-studio-2010, sharepoint-2007, spsite

因此，与其把我的头撞在墙上再过几个小时，我想我应该在这里仔细检查几件事。

首先，我一直在尝试通过 Visual 访问存储在 SharePoint 2007 服务器上的列表（我应该首先说这是我无法控制的，减去我是其中可以编辑列表信息的成员的事实） Windows 7 64 位计算机上的 Studio 2010（与服务器没有任何实际关联）。我说我无法控制是因为 a) 我正在编写的应用程序无法存储在服务器 comp 上，并且 b) 我无法重新配置服务器的任何部分（因为它是我无法控制的等等。 ..)

我首先使用 Web 服务从某个列表中读取列表项，该列表有效（在一定程度上）。我无法再进行任何测试，因为立即建议我停止使用该方法，而是尝试使用 SharePoint 的自己的服务（例如通过在我的项目中使用 Microsoft.Sharepoint 和相应的 .dll。）我找到了很多关于如何在网上进行此操作的教程，但我一直挂在一个部分：即 SPSite 部分。

我知道这个问题已经被提出了几十次，但我只是不能确定我到底需要控制什么才能让它发挥作用。到达这行代码后：

```
SPSite siteCollection = new SPSite(siteUrl); 
```

它每次都失败。（请注意，siteUrl 是一个字符串，它指向与 Web 服务一起工作的服务器的工作 URL，所以我不明白为什么它现在不起作用。）

我已经测试了多个 .Net 框架（3.5、4.0...）并将我的架构从 x86 更改为 x64 到 Any CPU，但它仍然总是失败。现在我需要凭据才能进入这个网站，所以我假设这就是我无法访问它的原因。是否需要将某种凭据与我的程序相关联才能使其正常工作？或者它是否会要求他们成功访问该站点？

很抱歉这里的所有混乱，我的思绪刚刚因为试图如此迅速地吸收所有这些而融化。

（顺便说一句，3.5 的 .Net Framework 要求是否严格？因为这是 Microsoft Surface 应用程序，这意味着它至少需要 4.0...）：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:47:16.400

建议您使用的 SharePoint 服务器端对象模型不能用于您的方案。它仅在作为 SharePoint 场的一部分的服务器上运行时才有效（您的代码在这种情况下不会）。由于您使用的是 2007 年（无客户端对象模型），因此您被 Web 服务困住了（或将您自己的 Web 服务代码编写并部署到 SharePoint 场中的服务器，然后您的代码会调用该服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:42:56.317

此代码是否与 SharePoint 网站在同一应用程序池中运行？如果没有，您最简单的选择是使用列表服务 (/_vti_bin/Lists.asmx)。SharePoint 2010 添加了客户端对象模型，但显然您被排除在外。 [示例代码可以在这里找到](http://blogs.msdn.com/b/pranab/archive/2008/11/24/sharepoint-2007-moss-wss-using-lists-asmx-getlistitems.aspx)。

# visual-studio-2010 - 挂钩到 vs2010 后台编译器

> ID：11568923
> 
> 赞同：0
> 
> 时间：2012-07-19T20:39:06.170
> 
> 标签：visual-studio-2010

标题说明了一切。可以在vs2010编辑器和后台编译器之间挂一个程序吗？

**编辑：** 我想用新的关键字扩展 c# 语法。因此，我需要首先将源代码“发送”到我自己的编译器，该编译器从带有扩展关键字的文件中生成纯 c# 文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:35:54.573

[也许这有点骇人听闻，但您可以通过此处所述](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)的预构建事件调用解析器。预构建事件完成后，C# 编译器应该启动。

不过，我以前没有尝试过，所以如果它不起作用，请不要扔西红柿:)

关于 IntelliSense，请查看这个可能重复的问题：[如何扩展 IntelliSense 项？](https://stackoverflow.com/questions/9133887/how-to-extend-intellisense-items)

# php - 返回两个字符串之间的值

> ID：11568926
> 
> 赞同：0
> 
> 时间：2012-07-19T20:39:29.900
> 
> 标签：php, regex, string, replace, str-replace

我知道这可能是一个常见问题，但我找不到我想要的确切答案。

我有以下字符串。

```
#|First Name|#
Random Text
#|Last Name|# 
```

我想做的是拥有`#|`&之间的所有值，`|#`并用一个值替换整个字符串。这必须在一个数组中，所以我可以遍历它们。

举个例子，我有：

```
#|First Name|# 
```

处理后我希望它是：

```
John 
```

因此，主要逻辑是使用 First Name 值从数据库中打印出一个值。

有人可以帮我吗？

这是我尝试过的代码：

```
preg_match('/#|(.*)|#/i', $html, $ret); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:43:02.853

[`preg_replace_callback()`](http://php.net/preg_replace_callback)除了使您的正则表达式不贪婪并转义垂直条之外，您还需要这样做：

```
$replacements = array( 'John', 'Smith');
$index = 0;
$output = preg_replace_callback('/#\|(.*?)\|#/i', function( $match) use ($replacements, &$index) {
    return $replacements[$index++];    
}, $input); 
```

这[将输出](http://viper-7.com/JRnR1O)：

```
string(24) "John
Random Text
Smith" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:44:41.423

```
$string = '#|First Name|#
Random Text
#|Last Name|#';
$search = array(
    '#|First Name|#',
    '#|Last Name|#',
);
$replace = array(
    'John',
    'Smith',
);
$string = str_replace($search, $replace, $string); 
```

# python - Matplotlib savefig 只保存图像，不保存线条

> ID：11568928
> 
> 赞同：4
> 
> 时间：2012-07-19T20:39:47.457
> 
> 标签：python, matplotlib

我有一个我正在保存的 matplotlib 图，使用`figure.savefig(path)`. 这会将我在画布上的图像保存在图中，但不会保存我在图像上绘制的线条。

以下是我创建人物的方式：

```
if new:
    y, x = self.model.get_image_shape()
    self.figure = Figure(figsize=(x*2/72.0, y*2/72.0), dpi=72)
    self.canvas = FigureCanvasWxAgg(self.scroll, -1, self.figure)
    self.canvas.SetBackgroundColour('grey')
self.axes = self.figure.add_axes([0.0, 0.0, 1.0, 1.0])
self.axes.set_axis_off()
self.axes.imshow(self.model.get_image(), aspect='auto')
self.axes.set_autoscale_on(False)
self.mpl_bindings()
y, = self.scroll.GetSizeTuple()[-1:]
iHt, = self.model.get_image_shape()[:-1]
self.aspect = (float(y)/float(iHt)) # zoom factor (0.0 - 1.0)
self.controller.resize_image() # Resizes our figure according to the zoom factor 
```

现在，我在画布上绘制（使用`draw_artist`方法）：

```
def draw_polylines(self, adjustable, locked):
    if self.tmp_line: self.axes.draw_artist(self.tmp_line)
    for polyline in self.polylines:
        for line in polyline.lines:
            self.axes.draw_artist(line)
        if adjustable:
            for vertex in polyline.verticies:
                self.axes.draw_artist(vertex)
        self.axes.draw_artist(polyline.label) 
```

这在程序中效果很好（在图像上显示线条）但是当我尝试使用时`savefig()`，只保存图像，而不是线条。

图像应如下所示（保存为 PNG 后）：

![带线条的图像](../Images/2a39ff9bfc1c766820ebd83ea4610313.png)

但我得到了这个：

![保存后（无行）](../Images/6321b360474240b9f3f18bacc5f2ab69.png)

这就是我正在做的保存数字：

```
self.view.figure.savefig(dialog.GetPath(), dpi=self.view.figure.dpi) 
```

任何想法为什么这可能不会保存我正在绘制的线条，而只是保存正在绘制线条的图像？

谢谢你。

编辑：这是一个 SSCCE：[http](http://pastebin.com/VQG165k0) ://pastebin.com/VQG165k0 （只需更改您将要加载的保存位置和图像）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:34:35.877

感谢SSCCE。如果您禁用`animated=True`，那么一切正常。如果您需要animated=True，可能值得询问 mpl 邮件列表，看看他们是否有任何进一步的见解。

# php - 使用 OAuth-PHP 通过 SSL 发布

> ID：11568933
> 
> 赞同：0
> 
> 时间：2012-07-19T20:40:10.640
> 
> 标签：php, post, curl, https, oauth-php

我正在使用 oauth-php 库对远程服务器进行 oauth 调用，但是没有向远程服务器传递变量。当我连接到 http 服务器时它工作正常，但不是通过 https。我用多台服务器对此进行了测试，并设置了一个代理来检查调用。

POST 变量没有通过 https 传递是否有原因？变量被正确地放入 curl 调用中，正如使用 http 连接测试的那样，但不会发送到我需要它的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:59:34.403

我找到了问题的根源。如果其他人拥有它，cUrl 默认会阻止 SSL，并且需要忽略证书或定义它。完整信息可以在[http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/ 找到](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

# jquery - 使用 jquery onlick 将元素值插入到表单中

> ID：11568934
> 
> 赞同：0
> 
> 时间：2012-07-19T20:40:17.193
> 
> 标签：jquery, html, css

我想使用 jquery 将元素（在这种情况下为图像）值在单击时（在绿色 div 中）输入到隐藏表单中但是当它们再次被单击时，从表单输入中删除的值（当元素位于蓝色 div 中）。我该如何做到这一点，需要进入表单的元素值数量不受限制（动态）？出于示例的目的，可以看到表单字段以查看是否输入了值。

[演示 jsFiddle](http://jsfiddle.net/cmfZX/8/)

```
$(document).ready(function(){
    $("#bottom-div").on("click","img",function(){
        $(this).appendTo("#top-div");
    });
    $("#top-div").on("click","img",function(){
        $(this).appendTo("#bottom-div");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:50:56.567

您可以在提交表单时收集 target-div 的元素，并将它们作为 JSON 数组传递给表单，如下所示：

```
$('form').on('submit', function() {
    //create an array
    values = [];
    //add all images in #top-div to the array
    $('#top-div img').each(function() {
        values.push($(this).attr('src'));
    });
    //set the JSON stringified array as the inputs value
    $('input[type=text]').val(JSON.stringify(values));
});​ 
```

# nosql - 跟踪用户关系的最佳数据库是什么？

> ID：11568935
> 
> 赞同：3
> 
> 时间：2012-07-19T20:40:18.633
> 
> 标签：nosql, couchdb, cassandra

我需要在社交应用程序中跟踪用户关系，如下所示：

```
UserA follow UserC, UserD, and UserE
UserZ follow UserC, UserD, and UserE
UserC follow UserA, UserD, and UserE 
```

等等。

首先，我需要一个分区容错的数据库，这样 MySQL 和它的兄弟们就无法参与其中。

我查看了 couchdb，但它会为每个更改创建一个修订版，因此，如果您的文档是这样的：

```
{
  uuid: uuid
  name: name,
  lastName: lastName
  follows: [ uuid1, uuid2, uuid3 ]
} 
```

您将在数据库中有其他修订

```
(rev 1)
{
  uuid: uuid
  name: name,
  lastName: lastName
  follows: [ uuid1, uuid2 ]
}
(rev 2)
{
  uuid: uuid
  name: name,
  lastName: lastName
  follows: [ uuid1 ]
} 
```

那是很大的空间，我知道您可以通过一些手动操作来释放它，但问题并没有消失。

我看了一下 Cassandra，到目前为止，它看起来是一个很好的解决方案，它允许插入而没有像 couchdb 这样的额外空间问题。我可以创建一个键空间，然后是一个列，然后是一个存储关系，如下所示：

```
keyspace:{
  column:{
    ...
    uuidT:{ uuidA: timestamp, uuidB: timestamp, uuidZ }
    uuidF:{ uuidA: timestamp, uuidB: timestamp, uuidZ }
    uuidH:{ uuidA: timestamp, uuidB: timestamp, uuidZ }
    ...
  }
} 
```

但我想知道图形数据库是否最适合这个。

编辑：

在搜索答案后，我发现此页面有助于选择数据库。[http://nosql.findthebest.com/](http://nosql.findthebest.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:33:39.817

CouchDB 是一个离线数据库。

我建议研究一下graphDB，我想到了neo4j。几周前，我通过多伦多的 Mozilla 实验室介绍了它，那里的人告诉我，运行 graphDB 是最不痛苦的（你可以 apt-get/brew 它）。您可以在其中建立任意关系，但它不会分区。如果您想要一个可以依赖的数据库并且想要建立任意关系，那么[Titan](http://thinkaurelius.github.com/titan/)可能值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:51:33.023

FWIW，在 CouchDB 中，我总是使用对象数组，而不仅仅是 ID 数组。例如。

```
{
  uuid: uuid
  name: name,
  lastName: lastName
  follows: [ { _id: uuid1 }, { _id: uuid2 }, { _id: uuid3 } ]
} 
```

这有两个原因：

1.  如果需要，它允许您轻松地将其他连接数据添加到您可能需要的该对象。例如。`{ _id: uuid1, followed_on: "2011-10-22" }`
2.  它非常适合在`include_docs=true`视图查询中获取相关文档的选项。

### 更新

嘿，检查一下，[您可以限制数据库中保留的修订数量](http://wiki.apache.org/couchdb/HTTP_database_API#Accessing_Database-specific_options)

# java - ant build - 不被识别为命令

> ID：11568937
> 
> 赞同：1
> 
> 时间：2012-07-19T20:40:28.407
> 
> 标签：java, ant

我正在做一个蚂蚁构建，我使用的命令是

```
ant clean compile war 
```

并且 apache ant 也包含在路径中，

```
c:\apache-ant-1.8.2\bin; 
```

这是我的 PATH 变量：

```
PATH=C:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\WINDOWS\system32;C:\WIN
DOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\TortoiseSVN\bin;C:\Program Files\
System Center Operations Manager 2007\;C:\Java\jdk1.6.0_26\bin;C:\apache-ant-1.8
.1\bin 
```

现在我收到此错误消息，

```
'"java.exe"' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:44:23.123

`c:\apache-ant-1.8.2\bin`需要在您的*系统 PATH*中，以便 shell 可以找到它。您的类路径与此目的无关。

您可以在提示符处添加它：

```
set PATH=%PATH%;c:\apache-ant-1.8.2\bin 
```

你应该能够运行`ant`。

但是您希望保留此更改，因此您无需每次都键入此内容。为此，您需要将其添加到系统或用户变量列表中。按照[这里](http://support.microsoft.com/kb/310519)的指示：

1.  右键单击我的电脑，然后单击属性。
2.  单击高级选项卡。
3.  单击环境变量。
4.  为用户或系统变量单击以下选项之一：
    *   单击新建以添加新的变量名称和值。
    *   单击现有变量，然后单击编辑以更改其名称或值。
    *   单击现有变量，然后单击删除以将其删除。

在第 4 步中，将*;c:\apache-ant-1.8.2\bin*添加到值的末尾，注意将新条目与前面的 PATH 元素分开的分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:08:53.777

首先，如果您在命令提示符下执行此命令会怎样：

```
C> java --version 
```

你收到那个错误信息了吗？

我看到你`C:\Java\jdk1.6.0_26\bin`在你的 PATH 中。那个目录存在吗？该目录中是否有文件调用`java.exe`？

如果您无法执行，并且您的计算机上不存在`java.exe`该目录，则必须从 Oracle 的网站下载 Java 并将其安装在您的 Windows 计算机上。`C:\Java\jdk1.6.0_26\bin`或者，如果您的计算机上有 Java，则必须修改 PATH 环境变量，以便将`C:\Java\jdk1.6.0_26\bin`其替换为`java.exe`命令的实际路径。

* * *

如果您可以`java --version`从命令行执行，我们可以使用`ant.bat`位于`C:\ant-1.8.2\bin`. 复制`ant.bat`到`ant.backup.bat`，这样您就有了文件的备份。

使用[Notepad++](http://notepadplusplus.org/)或 VIM(http://www.vim.org) 之类的文本编辑器，而不是 Windows 中的记事本。编辑文件`C:\ant-1.8.2\bin\ant.bat`。大约第 130 行是以下行：

```
:runAnt 
```

在此行之后，放置以下两行：

```
echo DEBUG DEBUG DEBUG Attempting to execute an Ant java process
echo on 
```

这将打开`ant.bat`文件中的命令回显。在接下来的两三行中，它实际上会打印出启动 Ant 的 java 执行行。（Ant 是一个 Java 程序）。查看在尝试执行该 Java 命令时是否收到错误消息。查看该命令行的内容，看看您是否可以在批处理文件之外执行它。

这将使我们更好地了解正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:44:55.887

ant bin 目录需要在您的 PATH 环境变量中，而不是在您的类路径中

# php - Mysql查询语句索引调优

> ID：11568940
> 
> 赞同：1
> 
> 时间：2012-07-19T20:40:54.557
> 
> 标签：php, mysql, database, optimization

我正在研究如何为我公司发布的 Facebook 赛车游戏实施全球排行榜。我想做的是能够存储玩家的用户 ID 和他们的比赛时间。我有一张如下表：

```
+--------+-----------------------+------+-----+---------+-------+
| Field  | Type                  | Null | Key | Default | Extra |
+--------+-----------------------+------+-----+---------+-------+
| userID | mediumint(8) unsigned | NO   | PRI | 0       |       |
| time   | time                  | YES  | MUL | NULL    |       |
+--------+-----------------------+------+-----+---------+-------+ 
```

还有一组样本数据，如下所示：

```
+--------+----------+
| userID | time     |
+--------+----------+
| 505610 | 10:10:10 |
| 544222 | 10:10:10 |
| 547278 | 10:10:10 |
| 659241 | 10:10:10 |
| 681087 | 10:10:10 |
+--------+----------+ 
```

我的查询将来自 PHP。现在，如果我假设我有无限的资源，我能做的是：

```
$q1 = "Set @rank := 0";
$q2 = "select @rank:=@rank+1 as rank,userID,time from highscore order by time asc where userID=$someUserID";
$q3 = "Set @rank := 0";
$q4 = "select @rank:=@rank+1 as rank,userID,time from highscore order by time asc where rank > $rankFromSecondQuery - 10 and rank < $rankFromSecondQuery + 10"; 
```

但我没有无限的资源，我必须能够扩展它以支持数百万玩家，因为它正在进入 Facebook 上的社交游戏。因此，在花了几天时间在 Google 上爬行之后，我已经能够将我的查询归结为：

```
$q5 = "select rank,userID,time from (select @rank:=0) r, (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where userID=$someUserID"
$q6 = "select rank,userID,time from (select @rank:=0) r, (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where rank > $rankFromFirstQuery - 10 and rank < $rankFromSecondQuery + 10"; 
```

这可行，但它不是很漂亮，每个查询的平均运行时间约为 2.3 秒。

编辑：这是 $q5 和 $q6 在运行它们时给我的：

```
mysql> select rank,userID,time from (select @rank:=0) r, (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where userID=11345;                                                                          
+--------+--------+----------+
| rank   | userID | time     |
+--------+--------+----------+
| 423105 |  11345 | 12:47:23 |
+--------+--------+----------+
1 row in set (2.42 sec)

mysql> select rank,userID,time from (select @rank:=0) r, (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where rank>423100 and rank<423110;
+--------+---------+----------+
| rank   | userID  | time     |
+--------+---------+----------+
| 423101 | 2416665 | 12:47:22 |
| 423102 | 2419720 | 12:47:22 |
| 423103 | 2426606 | 12:47:22 |
| 423104 | 2488517 | 12:47:22 |
| 423105 |   11345 | 12:47:23 |
| 423106 |   92350 | 12:47:23 |
| 423107 |   94277 | 12:47:23 |
| 423108 |  114685 | 12:47:23 |
| 423109 |  135434 | 12:47:23 |
+--------+---------+----------+
9 rows in set (2.58 sec) 
```

这是解释扩展块 $q5 和 $q6 的一个看起来几乎相同：

```
mysql> explain select rank,userID,time from (select @rank:=0) r, (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where userID=11345;
+----+-------------+------------+--------+---------------+----------+---------+------+---------+----------------+
| id | select_type | table      | type   | possible_keys | key      | key_len | ref  | rows    | Extra          |
+----+-------------+------------+--------+---------------+----------+---------+------+---------+----------------+
|  1 | PRIMARY     | <derived2> | system | NULL          | NULL     | NULL    | NULL |       1 |                |
|  1 | PRIMARY     | <derived3> | ALL    | NULL          | NULL     | NULL    | NULL | 2500000 | Using where    |
|  3 | DERIVED     | highscore  | index  | NULL          | idx_time | 4       | NULL | 2500842 | Using index    |
|  2 | DERIVED     | NULL       | NULL   | NULL          | NULL     | NULL    | NULL |    NULL | No tables used |
+----+-------------+------------+--------+---------------+----------+---------+------+---------+----------------+ 
```

所以最终，我真正想做的就是把它简化为一个查询，这样我就可以使用一两个高 CPU 服务器来缓和执行时间。要么，要么我想找出一种方法，只在查询部分中命中与表中所有行的解释块中的派生3 行相关联的索引。

到目前为止，这是我尝试过的几个查询但没有成功：

```
select rank,userID,time from (select @rank:=0) r, (select @playerRank := rank from (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where userID=11345) as myFoo where @playerRank>423100 and @playerRank<423110;
select rank,userID,time from (select @playerRank := rank from (select @rank := 0) r, (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where userID=11345) as myFoo where @playerRank>423100 and @playerRank<423110;
select * from (select @rank:=0) r, (select @playerRank := userID from (select @rank:=@rank+1 as rank,userID,time from highscore order by time asc) as myMine where userID=11345) as myFoo where @playerRank>423100 and @playerRank<423110; 
```

前两个游戏给我一个“错误 1054 (42S22): Unknown column 'rank' in 'field list' 错误，第三个只是返回一个空集而不是我正在寻找的数据。

任何人都知道如何让我上面列出的两个查询命中索引以减少执行时间，或者如何将两个查询合并为一个，这样我只需要忍受一次痛苦的执行时间？如果有人有使用类似东西的经验并想分享他们的经验，我也愿意接受调整/优化，例如调整 MySQL 配置设置和/或使用 Percona 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:13:57.247

我想提出这种替代解决方案来实现您想要实现的目标。

制作一个单独的表来存储排名。不要每次用户想知道他/她的排名时都计算它，也不要将它包含在现有表中。当分数更新与排名计算竞争时，将排名放在单独的表中有望缓解锁争用问题。

定期重新计算等级。当您执行此重新计算时，请截断等级表并从头开始重新创建它。使用批量加载操作 (LOAD DATA INFILE) 或将其设为 MyISAM 表（在表末尾插入时速度很快）来执行此操作。无论哪种方式都应该相对较快地实际写出表格；至少比更新已经存在的表中的数百万行更快。这两种方法都会使您的排名表变得脆弱，并且在发生崩溃时容易丢失，但这没关系，因为这本质上是瞬态数据。只要你的分数表是稳定的，你就是安全的。通过定期重新计算，您可以避免随着播放次数的增加而越来越频繁地进行计算，直到撞墙为止。

如果用户得分在前 100 名之内，则立即推出他们的新得分。用户可能希望浏览前 100 名，看看谁的得分最高。我认为几乎没有人想要真正浏览该点下方的列表。

允许用户立即查看他们朋友的分数，以及他们之间的相对排名。这可能是大多数用户感兴趣的排名。我知道我妻子在玩 Facebook 游戏时，她对自己的整体排名不感兴趣，但她很想知道她是否击败了她的大学同学。

显示玩家的整体排名，以及他们朋友的整体排名，在用户最近一次游戏后失效，并在下次更新准备好时异步加载。

另一个考虑因素是，如果这个游戏会持续几年，你的记分牌最终会被不活跃玩家的旧分数堵塞，尤其是在低端。您可能需要考虑是否值得存档这些分数。例如，您可以说，只有在最近 6 个月内参加过比赛的记分板中 75% 的球员才会被考虑在排名中。然后，将他们的分数移到存档表中，在那里他们将被记住，如果该球员返回，则可以将其恢复到记分牌中，但不必在每次计算排名时都包含在排序中。是的，这可能会使您的排名不那么“真实”，但无论如何人们只是为了好玩。这将产生使他们的排名看起来更好的副作用，这也很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T22:22:57.913

在 runnint`$q5`之后，您应该知道用户的等级，之后您应该能够使用限制来获得正确的行

```
$lowest_rank_to_fetch = max(0, $rankFromFirstQuery - 10);
$q6l = "SELECT userID, time
        FROM highscore
        ORDER BY time ASC
        LIMIT {$lowest_rank_to_fetch}, 21";

/* some execute query function */

foreach(range($lowest_rank_to_fetch, $lowest_rank_to_fetch+21) as $current_rank)
{
   /* some database fetch function */
   /* add $current_rank to result */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:57:45.523

您可以先使用 count() 获得排名，这对于第一个查询应该会更好一些：

```
SELECT COUNT(h.userID) as rank, h2.userID, h2.time
   FROM highscore h
   LEFT OUTER JOIN highscore h2 ON (h.time <= h2.time)
   WHERE h2.userID = ? 
```

然后您可以使用 Puggan 的技术来查询附近的排名。

```
SELECT ... ORDER BY time LIMIT $lowest_rank, 21 
```

# asp.net - 显示来自 Web 服务的一长串数据

> ID：11568943
> 
> 赞同：1
> 
> 时间：2012-07-19T20:41:02.417
> 
> 标签：asp.net, spinner

我计划开发一个应用程序，用户可以在其中查看一个单元中销售的产品列表并选择它们。输出会将他们带到下一页，用户可以在其中看到正在销售他们选择的产品的供应商。

由于我是通过 Web Service asp.net 调用列表（最多可达到 1000 个），我担心它可能会减慢系统速度。用户可以一次选择多个产品。

请推荐实现这一目标的最佳方法是什么。我可以使用类似 UI 的微调器进行多项选择吗？或者更好的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:22:18.943

对于数据分页和 Gridview，您需要在代码中提出一个解决方案，告诉您的 Gridview 总共有多少行，以便在页眉和/或页脚中创建必要的分页控件。

我强烈建议将[DataTables.Net 之](http://www.datatables.net)类的 AJAX 解决方案与 Web 服务一起使用。它拥有您想要的一切，包括无限的虚拟滚动和分页。如果您使用的是 LINQ，请利用 Skip 和 Take 扩展在代码中添加分页功能。

# android - 从 ArrayAdapter 类更改 ListView 分隔符？

> ID：11568947
> 
> 赞同：3
> 
> 时间：2012-07-19T20:41:11.720
> 
> 标签：android, listview, android-arrayadapter

我有一个扩展 ListActivity 的类 (foo)，它实例化了一个扩展 ArrayAdapter 的类 (fooAdap)。在 fooAdap 中，我使用 getview() 方法填充我的 ListView。

从 foo 类中，我可以调用 getListView().setDividerHeight(0) 并使分隔线消失。有没有办法从 fooAdap 中的 getView() 访问该方法？

foo.java

```
public class foo extends ListActivity
{
   ...
   protected void onCreate (Bundle savedInstanceState)
   {
      super.onCreate (savedInstanceState);
      ...
      ListView lv = getListView ();
      lv.setDividerHeight (0);
      fooAdap foo = new fooAdap (this,android.R.layout.simple_list_item_single_choice, mRowData);
      ...
   } 
```

fooAdap.java

```
public class fooAdap extends ArrayAdapter
{
   ...

   public View getView (int position, View convertView, ViewGroup parent)
   {
      ...

      switch (position)
      {
         case 1: // show divider for these rows in listview
         case 2:
         break;

         case 3: // hide divider for this row in listview
         break;
      }
      ...
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:20:46.307

您必须将 currentActivity 对象传递给 fooAdap ，这样就可以轻松完成。

或者，您可以通过 fooAdap 构造函数传递该 Activity 对象。

```
 Activity currentActivity=foo.this;

     fooAdap foo = new fooAdap (this,android.R.layout.simple_list_item_single_choice, mRowData);
    foo.currentActivity=currentActivity;

    public class fooAdap extends ArrayAdapter
    {
    Activity currentActivity;

    public View getView (int position, View convertView, ViewGroup parent)
       {
          ...

          switch (position)
          {
             case 1: // show divider for these rows in listview

             case 2:
             break;

             case 3: // hide divider for this row in listview
              this.currentActivity.getListView().setDividerHeight(0);
             break;
          }
          ...
       }

    } 
```

这肯定会帮助你。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:23:51.143

我最终制作了自己的分隔线，并在 XML 布局中将 ListView dividerHeight() 设置为 0。

我对 ListView 行有一个单独的布局，并在那里添加了另一个 LinearLayout 和 TextView。然后我将文件 divider_horizo​​ntal_dark.9.png 从 android sdk 目录复制到我的 res/ 目录中，并将新 TextView 的背景设置为它，并将 textview 的 MaxHeight 设置为 1dp。

现在我可以在 getView() 方法中将 LinearLayout 切换为 View.VISIBLE 或 View.GONE。很长的路要走，但似乎得到了我想要的东西。

# python - 如何使 gtk.Layout 透明

> ID：11568948
> 
> 赞同：1
> 
> 时间：2012-07-19T20:41:14.093
> 
> 标签：python, gtk, transparency, cairo

不要害怕那个大班——我写作很有趣，所以它可以以那种通用的方式工作。它可能是透明元素的父类，而不是父类。所以，麻烦。它可以使主 gtk.Window、gtk.EventBox 和其他 gtk.widgets 透明，但它不适用于 gtk.Layout，请帮助我。我想我已经写了足够的东西来发送问题。对不起我的英语:)

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import gtk
import cairo
class Transparent:
    def __init__(self,*rgba):
        Transparent.makeTransparent(self)
        if len(rgba)>0:
            self.rgba=rgba[0]
    @staticmethod
    def expose (widget, event):
        cr = widget.window.cairo_create()
        cr.set_operator(cairo.OPERATOR_CLEAR)
        cr.rectangle(event.area)
        cr.fill()
        cr.set_operator(cairo.OPERATOR_OVER)
        try:
            widget.rgba
        except AttributeError:
            widget.rgba=(0.0,0.0,0.0,0.0)
        cr.set_source_rgba(*widget.rgba)
        cr.rectangle(event.area)
        cr.fill()  
    @staticmethod
    def makeTransparent(thing,*rgba): 
        if len(rgba)>0:
            thing.rgba=rgba[0]   
        thing.expose=Transparent.expose
        thing.set_app_paintable(True)
        screen = thing.get_screen()
        rgba = screen.get_rgba_colormap()
        thing.set_colormap(rgba)
        thing.connect('expose-event', thing.expose)

win = gtk.Window()
Transparent.makeTransparent(win)

#works with EventBox:
eb=gtk.EventBox()
win.add(eb)
Transparent.makeTransparent(eb)

#but not with Layout:
#l=gtk.Layout(None,None)
#win.add(l)
#Transparent.makeTransparent(l)

win.show_all()
win.show()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:38:10.163

非常好...我一直在学习这些东西，我喜欢你的代码。

来自 pygtk 手册（已添加重点）：

> 也可以在 gtk.Layout 上绘制，类似于在 gtk.DrawingArea 上绘制。在 gtk.Layout 上处理暴露事件时，**您必须绘制到由 bin_window 属性指定的窗口，而不是小部件窗口属性**。

我认为在你的函数中你得到的是 window 属性，而不是 cairo 的 bin_window 属性。

将暴露函数修改为：

```
@staticmethod
def expose (widget, event):
    if 'gtk.Layout' in str(type(widget)):
        cr=widget.bin_window.cairo_create()
    else:
        cr = widget.window.cairo_create()
    cr.set_operator(cairo.OPERATOR_CLEAR)
    cr.rectangle(event.area)
    cr.fill()
    cr.set_operator(cairo.OPERATOR_OVER)
    try:
        widget.rgba
    except AttributeError:
        widget.rgba=(0.0,0.0,0.0,0.0)
    cr.set_source_rgba(*widget.rgba)
    cr.rectangle(event.area)
    cr.fill() 
```

# c++ - c++模板[]重载

> ID：11568950
> 
> 赞同：2
> 
> 时间：2012-07-19T20:41:20.050
> 
> 标签：c++, templates

我有一个类，它具有括号运算符的模板函数。它可以编译，但我无法弄清楚如何访问它。

**请参见下面的示例：**

```
 class Test {
    public:
        template <class T> pServiceState operator[] (const std::string project) {
             return getService<T>(project);
        }

       template <class T> pServiceState getService(const std::string project) {
             pService s = get_service<T>();
             if(s == NULL) throw "Service does not exist on server";
             return s->state(project);
        }

    }

int main(){

    states.getService<content_uploader>("asd"); // Works
    states<content_uploader>["asd"]; // Throws syntax errors.

/*
error: expected primary-expression before ‘&gt;’ token
error: expected primary-expression before ‘[’ token
*/

} 
```

感谢您的帮助，亚当

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:53:19.000

在您的情况下，编译器无法`T`从参数派生模板参数，因此您需要指定它。语法类似于常规函数。所以，试试：`states.operator[]<content_uploader>("asd")`

例子：

```
#include <iostream>
#include <vector>

class Foo
{
public:
    Foo() : vec(5, 1) {}
    template <typename T>
    int operator[](size_t index)
    {
        std::cout << "calling [] with " << index << std::endl;
        return vec[index];
    }
private:
    std::vector<int> vec;
};

int main()
{
    Foo foo;
    foo.operator[]<int>(2);
} 
```

# c# - c#正则表达式模式匹配

> ID：11568952
> 
> 赞同：1
> 
> 时间：2012-07-19T20:41:20.613
> 
> 标签：c#, regex

我们有一个字符串

```
string strScope = "This site is used for business group. [Title]Business Group[/Title][URL]http://google.com[\URL]"; 
```

在 C# 中，我们将如何从上述字符串的标题和 url 中获取业务组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:49:28.687

测试正则表达式的一个很好的资源是[Regexr](http://www.regexr.com)。

```
\[Title\]([^\[]+)\[/Title\]\[URL\]([^\[]+)\[\\URL\] 
```

以上将与您发布的内容相匹配。我假设您打算在 URL 中使用“/”，这将匹配

```
\[Title\]([^\[]+)\[/Title\]\[URL\]([^\[]+)\[/URL\] 
```

代码示例（假设您实际上想要 [\URL]

```
 string strScope = "This site is used for business group. [Title]Business Group[/Title][URL]http://google.com[\URL]";

        var match = Regex.Match( strScope, @"\[Title\]([^\[]+)\[/Title\]\[URL\]([^\[]+)\[\\URL\]");
        if ( match.Groups.Count >= 2)
        {
            string name = match.Groups[0].Value;
            string url = match.Groups[1].Value;
        } 
```

如果您想要更传统的 [/URL]，显然使用其他正则表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:57:08.340

使用这个正则表达式：

```
\[(?<tag>[^\]]+)](?<value>.*?)\[/\k<tag>] 
```

组`tag`匹配标签名称，在您的情况下：`Title`, `URL`.
组`value`匹配此标签的值。

我假设您的输入是：

```
[Title]Business Group[/Title][URL]http://google.com[/URL] 
```

结果：

![结果](../Images/e4f19f610681c98b0d80f1bf0c3afebe.png)

```
var rx = new Regex(@"\[(?<tag>[^\]]+)](?<value>.*?)\[/\k<tag>]");
var txt = "This site is used for business group. [Title]Business Group[/Title [URL]http://google.com[/URL]";
var m = rx.Matches(txt);

foreach (Match match in m)
{
    Console.WriteLine("{0} {1}", match.Groups["tag"].Value, match.Groups["value"].Value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T20:46:51.063

试试这个表达式：

```
@"\[Title\]([^\[]+)\[/Title\]\[URL\]([^\[]+)\[/URL\]" 
```

第一个捕获组将是`"Business Group"`；第二个将包含 URL。

[这是关于 ideone 的快速演示](http://ideone.com/hTy6V)。

```
var rx = new Regex(@"\[Title\]([^\[]+)\[/Title\]\[URL\]([^\[]+)\[/URL\]");
var txt = "This site is used for business group. [Title]Business Group[/Title][URL]http://google.com[/URL]";
var m = rx.Match(txt);
Console.WriteLine(m.Groups[1]);
Console.WriteLine(m.Groups[2]); 
```

这打印

```
Business Group
http://google.com 
```

# colorbox - 颜色框示例有什么问题？

> ID：11568954
> 
> 赞同：1
> 
> 时间：2012-07-19T20:41:25.823
> 
> 标签：colorbox

以下是重现我需要帮助的问题的步骤。

*   [从网站](http://www.jacklmoore.com/colorbox "网站")下载最新版本`colorbox`（版本 1.3.19）
*   解压
*   打开示例文件夹 1、3、4 或 5 下的 index.html。
*   点击链接`Outside HTML (Ajax)`

此时我得到错误`this content failed to load`

看看原始的 html，一切看起来都不错。如何修复此示例以使其正常工作，以便可以使用颜色框对 html 页面进行 ajax 加载？

PS如果你在example2文件夹下查看，它也不起作用。我没有在上面包含它只是因为它没有显示错误消息。

我的设置：Ubuntu 10.04LTS 上的 Firefox 13.0.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T21:12:38.933

大多数浏览器不允许本地使用 ajax（请参阅：Access-Control-Allow-Origin）。把它放在服务器上，它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:53:43.347

它仅适用于我机器上的 Internet Explorer。但它不适用于 Firefox 和 Chrome。你刚刚打开了潘多拉的盒子，我的朋友……

# exception - aset 和 get 无法正常工作？并从其他函数调用函数

> ID：11568957
> 
> 赞同：1
> 
> 时间：2012-07-19T20:41:52.527
> 
> 标签：exception, clojure

```
 (declare storage)
    (defn initialize-storage []) ((def storage 
       (make-array Integer/TYPE 3  3))
      (for [ i (range 1 3 )
             j (range 1 3 )]
               (aset (aget storage i) j 100)
         )
      (use 'clojure.pprint)
      (pprint storage)
      ) 
```

我得到以下

```
ClassCastException [[I cannot be cast to clojure.lang.IFn  clojure.lang.Var.fn (Var.java:378)
[[0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

想法是将所有值设置为 100

我怀疑我在 aset 的二维数组上下文中的使用不正确，但这是我经过几个小时的搜索后得到的。

编辑：：

```
(use 'clojure.pprint)
 (defn initialize-storage []) ((def storage 
           (make-array Integer/TYPE 3  3))
          (for [ i (range 1 3 )
                 j (range 1 3 )]
                   (aset-int storage i j 100))          
          (pprint storage)) 
```

现在，我已经设置了我的存储空间。我想要另一个函数，它将调用此函数，然后继续执行其他任务。但我得到一个找不到的异常`initialise-storage`。

在这方面，命名空间有什么帮助？这些功能是否知道彼此的存在，或者我们是否需要将它们公开并公开？所有这些都应该在命名空间内吗？那么如果我将（def ..）放在哪里，因为这也会引发异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:33:57.233

for 是懒惰的，因此您需要将其包装在 (dorun)

```
(dorun (for [ i (range 1 3 )
              j (range 1 3 )]
          (aset (aget storage i) j 100))) 
```

否则资产实际上不会发生

`aset`可以直接在二维数组上工作：

```
 (aset-int array x y 42) 
```

类转换异常是由

```
((def storage 
   (make-array Integer/TYPE 3  3)) 
```

它试图调用定义 var 的结果，就好像它是一个函数一样。

* * *

编辑后：

```
(use 'clojure.pprint)
(defn initialize-storage []) ; empty function deffinition here

( (def storage ;extra paren here
    (make-array Integer/TYPE 3  3))

  (for [ i (range 1 3 ) ; leaves the first row unmodified
       j (range 1 3 )] ; leaves the first columb unmodified
   (aset-int storage i j 100)) ;unevaluated for loop here
 (pprint storage) ) ; extra parens here 
```

也许这更接近您正在寻找的东西：

```
(use 'clojure.pprint)
(def storage (make-array Integer/TYPE 3  3))
(defn initialize-storage []
  (doall (for [ i (range 0 3 )
               j (range 0 3 )]
           (aset-int storage i j 100))))          
(pprint storage) 
```

# javascript - Html 通过 jquery/javascript 保持键盘在 iphone 上可见

> ID：11568958
> 
> 赞同：4
> 
> 时间：2012-07-19T20:41:54.167
> 
> 标签：javascript, jquery, iphone, ios5, jquery-mobile

每当焦点以编程方式从一个输入字段移动到另一个输入字段时，我想保持键盘在 iphone 上可见。当我第一次设置焦点时，代码工作正常，但随后没有这样做。

这是一段代码。知道如何保持键盘可见吗？现场演示[http://navtest.0fees.net/del/](http://navtest.0fees.net/del/)，在 iphone 或 ipad 上打开。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<style>
body{background-color: #efefef;}
input:focus{ color:red; font-size:30px; background: rgba(0,0,0,0.2); }
.button {
  font-family: Arial; color: #ffffff; font-size: 35px; padding: 10px;
  text-decoration: none; -webkit-border-radius: 28px; -moz-border-radius: 28px;
  -webkit-box-shadow: 0px 1px 3px #666666; -moz-box-shadow: 0px 1px 3px #666666;
  text-shadow: 1px 1px 3px #666666; border: solid #005157 2px;
  background: -webkit-gradient(linear, 0 0, 0 100%, from(#c3f7f4), to(#095461));
  background: -moz-linear-gradient(top, #c3f7f4, #095461);
}
.button:hover { background: #19ad02; }
</style>
    <head>
        <title>I Pad</title>
        <script type="text/javascript" src="./jquery-1.7.2.min.js"></script>
    </head>
    <body>
        <button type="button" name="" id="name" value="" class="button">Submit</button>
        <input type="text" id="kb" value="" class="button"/>
        <input type="text" id="kb1" value="" class="button"/>
        <script type="text/javascript">
                $('#name').click(function(){            
                    $('#kb').focus();
                    $('#kb').blur(); //not important
                    $('#kb1').focus();
                });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:54:02.370

*** 编辑 #2 ***

*看起来这个问题没有解决方案（至少到目前为止）。*

***结束编辑#2 ***

我认为当您在 Safari 中“模糊”一个字段时，它会隐藏键盘，然后当您“聚焦”一个新字段时，它会显示键盘。因此，除非您正在做一些奇怪的事情（例如在聚焦新领域后手动模糊旧领域），否则我真的不明白您为什么会有您描述的行为。

*** 编辑 ***

*只是查看了您的代码并意识到您做的最后一件事是焦点，这应该使键盘恢复正常。但是，您正在进行手动模糊；我会先尝试删除它，看看它是否能解决问题。*

***结束编辑***

解决它的一种可能解决方案是从事件处理程序`e.preventDefault()`内部使用。`onBlur`这应该防止隐藏键盘的浏览器默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:26:29.660

我认为 iPhone 的设计方式是仅通过某些用户操作来触发键盘。这就是为什么通过手动单击按钮可以将焦点移动到输入框并打开键盘，但是任何其他以编程方式单击按钮并从按钮的事件处理程序设置焦点到输入框以打开键盘的尝试都不起作用。

我想我剩下的唯一选择是将所有输入框的属性设置为只读，然后单击它会在其顶部打开一个透明输入框。然后从透明输入框中取值并将其设置为我想要的任何只读输入框。

随后不断将透明输入框的位置更改为我为其设置值的任何只读输入框。

如果有人对此有更好的想法，我愿意接受建议。

# jquery - 如果已使用 jQuery 访问，则更改链接图像的类别

> ID：11568963
> 
> 赞同：1
> 
> 时间：2012-07-19T20:42:15.277
> 
> 标签：jquery, image, class, rollover, visited

我有一系列使用 jQuery 链接的翻转图像。单击链接后，我希望将翻转图像的类别从“翻转”更改为“翻转2”，以便获得一组不同的图像。这是翻转图像的 jQuery：

```
$(document).ready(function() {
$("img.rollover").hover( 
function() { this.src = this.src.replace("_off", "_on"); 
}, 
function() { this.src = this.src.replace("_on", "_off"); 
});
$("img.rollover2").hover( 
function() { this.src = this.src.replace("_off2", "_on2"); 
}, 
function() { this.src = this.src.replace("_on2", "_off2"); 
});
}); 
```

这是链接图像的代码：

```
<a href="Mod1/index.html" target="_blank">
<img src="images/watch_off.png" class="rollover" />
</a> 
```

最初的翻转效果很好，但我试图从[这里](http://remysharp.com/2008/02/25/visited-plugin/)使用访问的链接插件来触发将任何链接图像的类名更改为“rollover2”：

```
<script src="js/jquery.visited.js"  type="text/javascript"></script>
<script type="text/javascript">
$('#links a').visited(function () {
  // hides the li element
  $(this).img.removeClass("rollover");
  $(this).img.addClass("rollover2");
});
</script> 
```

这似乎不起作用。你们中的任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:45:17.490

你可以使用[`find()`](http://api.jquery.com/find/)方法，试试这个：

```
$('#links a').visited(function () {
  $(this).find('img').removeClass("rollover");
  $(this).find('img').addClass("rollover2");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:46:57.910

这应该工作，

```
$(this).find('img').removeClass("rollover");
$(this).find('img').addClass("rollover2"); 
```

或更好，

```
 $(this).find('img').removeClass("rollover").addClass('rollover2'); 
```

# android - 如何在方向更改后重新创建传递给 DialogFragment 的侦听器？

> ID：11568967
> 
> 赞同：5
> 
> 时间：2012-07-19T20:42:24.460
> 
> 标签：android

我有一个`DialogFragment`它做一些工作`listener`，我通过它在它的创建过程中传递给它。Listener 是一个`Fragment`实现所需接口的实例。一切都很好，但在方向改变时，一切都在重新创建，我错过了`listener`，所以只是碰到了`NullPointeException`。如何处理这种情况？`DialogFragment`如果发生方向变化，我应该关闭吗？我认为用户不会喜欢这种行为。所以我需要重新创建一个`listener`......但是如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T21:18:07.583

为什么不使用该`Fragment#setTargetFragment`方法。像这样

```
public class Fragment1 extends Fragment {
    ...
    public void createFragment2(){
        final Fragment dialogFragment = new MyDialogFragment();
        dialogFragment.setTargetFragment(this);
        dialogFragment.show();
    }
}

public class Fragment2 extends DialogFragment{
    ...
    public void onEvent(){
        ((Fragment1)getTargetFragment()).onEvent();
    }
} 
```

# javascript - toString 似乎导致 setTimeout 并不总是为 toString 的变量参数执行函数

> ID：11568968
> 
> 赞同：0
> 
> 时间：2012-07-19T20:42:26.100
> 
> 标签：javascript, settimeout, tostring

这段代码的目的是在一个循环中多次改变网页的背景。

以下实现不使用 .toString() 设置背景颜色，而是显式静态地说明背景应更改为的颜色。

```
var i=1;
function changeColor() {
    var 
        interval=100, //16.66666666, //60 hertz refresh rate
        loops=10
    ;

    setTimeout(function() {$("#page").css({"background":"#000"})}, interval*0);
    setTimeout(function() {$("#page").css({"background":"#111"})}, interval*1);
    setTimeout(function() {$("#page").css({"background":"#222"})}, interval*2);
    setTimeout(function() {$("#page").css({"background":"#333"})}, interval*3);
    setTimeout(function() {$("#page").css({"background":"#444"})}, interval*4);
    setTimeout(function() {$("#page").css({"background":"#555"})}, interval*5);
    setTimeout(function() {$("#page").css({"background":"#666"})}, interval*6);
    setTimeout(function() {$("#page").css({"background":"#777"})}, interval*7);
    setTimeout(function() {$("#page").css({"background":"#888"})}, interval*8);
    setTimeout(function() {$("#page").css({"background":"#999"})}, interval*9);
    setTimeout(function() {$("#page").css({"background":"#AAA"})}, interval*10);
    setTimeout(function() {$("#page").css({"background":"#BBB"})}, interval*11);
    setTimeout(function() {$("#page").css({"background":"#CCC"})}, interval*12);
    setTimeout(function() {$("#page").css({"background":"#DDD"})}, interval*13);
    setTimeout(function() {$("#page").css({"background":"#EEE"})}, interval*14);
    setTimeout(function() {$("#page").css({"background":"#FFF"})}, interval*15);

    setTimeout(function() {
        if (i<loops) {
            i++;
            changeColor();
        } else {
            $("#page").css({"background":"#FFF"});
            i=1;
        }
    },interval*16);
} 
```

很明显我应该使用 for 循环，所以我将其重写为：

```
var i=1;
var color=0x111111;
function changeColor() {
    var 
        interval=100, //16.66666666, //60 hertz refresh rate
        loops=3
    ;
    for (j=0;j<15;j++) {
        setTimeout(function() {$("#page").css({"background":"#"+color.toString(16)})}, interval*j);
        color+=0x111111;
    }
    color=0x111111;
    setTimeout(function() {
        if (i<loops) {
            i++;
            changeColor();
        } else {
            $("#page").css({"background":"#FFF"});
            i=1;
        }
    },interval*j);
} 
```

但是，背景颜色仅使用此代码更改一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:16:18.050

正如“我不是”所提到的，您在完成所有循环后设置背景。以下是我喜欢将参数传递给 setTimeout 或 setInterval 的方法：

```
new (function (color) {
    setTimeout(function(){
        document.body.style.background = newcolor;
    }, 50);
})(color); 
```

基本上，它创建了一个本地范围，直到 setTimeout 完成后才会被销毁。

更一般地，您的代码可以简化为如下所示：

```
var i = 0;
var color = 0x000000;
function changeColor() {
    color += 0x111111;
    if (color > 0xffffff) {
        if (i >= 3) {
            return;
        }
        color = 0x000000;
        i++;
    }
    document.body.style.background = "#" + color.toString(16);
    setTimeout(changeColor, 100);
} 
```

我不知道这是否完全符合您的要求，但您应该能够根据需要对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:16:17.470

```
var i=1;
var color=0;
function changeColor() {
    var 
        interval = 16.66666, //60 hertz refresh rate
        loops = 40,
        $page = $("#page")
    ;

    for (j=0;j<16;j++) {
        setTimeout(function() {
            $page.css({"background":"#"+color.toString(16)});
            color+=0x111111 //color increment <i>inside</i> the Timeout (d'oh)
        }, interval*j);
    }

    // Pretty wind-down :3
    for (;j<31;j++) {
        setTimeout(function() {
            $page.css({"background":"#"+color.toString(16)});
            color-=0x111111
        }, interval*j);
    }

    setTimeout(function() {
        color=0x111111;
        if (i<loops) {
            i++;
            changeColor();
        } else {
            $page.css({"background":"#FFF"});
            i=1;
        }
    },interval*j);
} 
```

感谢您的帮助，特别是 Rob W 的优化，以及对问题的“我不是”的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:00:34.677

我认为这段代码应该可以解决您的问题。

我在 for 循环中添加了一个额外的函数调用，它将颜色作为参数。这样，该函数的每次调用都有自己的颜色值，它不会随着时间而改变。

```
var i=1;
var color=0x111111;
var page=$("#page");
function changeColor() {
    var
        interval=100, //16.66666666, //60 hertz refresh rate
        loops=3
    ;
    for (j=0;j<15;j++) {
      // I added an inner function in the for loop that holds the value of var color
      (function (color) {
        setTimeout(function() {page.css({"background":"#"+color.toString(16)})}, interval*j);
      })(color);
      color += 0x111111;
    }
    setTimeout(function() {
        if (i<loops) {
            i++;
            changeColor();
        } else {
            page.css({"background":"#FFF"});
            i=1;
        }
    },interval*j);
} 
```

# payment - 通过 Ruby gem 从 Balanced 中删除卡片

> ID：11568971
> 
> 赞同：1
> 
> 时间：2012-07-19T20:42:40.420
> 
> 标签：payment, credit-card, balanced-payments

我通过将参数设置为的`PUT`请求将卡片标记为无效。是否曾经设置过服务器端，例如在卡被处理器拒绝的情况下？如果 Balanced 设置为这将是永久状态还是可能是暂时的，例如如果账户中的资金不足？`is_valid``false``is_valid``is_valid``false`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T21:29:33.477

`is_valid`仅是用户设定值。

如果付款授权失败，Balanced 不会将卡标记为无效，因为这可能是您提到的暂时状态。

如果您希望从无效卡中过滤掉有效卡，您可以执行以下操作：

```
cards = Balanced::Card.all(is_valid: true) 
```

# c++ - 尝试从 dll 中获取价值

> ID：11568972
> 
> 赞同：-1
> 
> 时间：2012-07-19T20:42:40.767
> 
> 标签：c++, dll

我正在尝试获取一个值，该值每秒更改一次..并每次将其发送到应用程序..我创建了一个函数并与他一起返回了数字 60。当我使用应用程序调用该函数时，我看到了我返回的值。但是如果我想从 dll 中获取价值，那是一直在变化的。并在应用程序中显示？例如，我有弹球游戏中的 codecave 源，它可以让我在控制台中获得分数。从 dll 控制它，我想获取分值并将其显示在我自己的应用程序中。如何从 dll 获取分数到应用程序？并实时获取？只是为了在 dll 的控制台和我自己的应用程序中查看分数..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:24:55.893

如果您正在编写一个库并希望将一些符号从这里导出到该库之外的另一段代码，最好的方法始终是使用命名空间。

MyExportedHeader.h 和 SomeCode.cpp 应该被编译为你的库的一部分。

**MyExportedHeader.h**

```
namespace MyNamespace
{
    extern int foo;
    extern float bar;
    extern int get_num();
}; 
```

**一些代码.cpp**

```
namespace MyNamespace
{
    int foo = 15;
    floar bar = 25;
    int get_num()
    {
        /* CALCULATE and return the current num */
    }
}; 
```

您可以在 MyApplication.cpp 中的库外的一段代码中使用导出的符号

**我的应用程序.cpp**

```
#include <MyExportedHeader.h>
void somefn()
{
    int current_num = MyNamespace::get_num();
} 
```

这与直接将这些变量/函数声明为全局变量之间的唯一区别是如果两个库导出相同的符号集 - 会有冲突。

PS：如果您使用的是常量，最好使用 Enums 代替。

编辑：根据 Idohadar 的要求添加了一个更简单和详细的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:05:41.003

如果符号被导出，并且您知道它的名称，您可以包含声明它的标头并链接到库，或者自己声明它：

```
extern int whatever; 
```

这是一种选择。第二个是为它设置一个 getter 函数，导出 getter，然后动态调用它以返回您的值 - 研究`LoadLibrary`和`GetProcAddress`.

# php - php没有标题文本

> ID：11568974
> 
> 赞同：0
> 
> 时间：2012-07-19T20:42:44.373
> 
> 标签：php, perl, http-headers

我已经编写了一个小的 php 脚本来为我处理解压缩。我可以从任何其他脚本中调用它，在我的情况下，我可以从我拥有的 perl 脚本中调用它，并且只需传递相关的文件名和目标目录。我的问题是我想取回文件名以确认成功，但我无法让 php 打印出纯文本。它总是打印回标题。我可以让php在没有标题的情况下打印吗？尝试了 header_remove 但它不起作用。

```
 <?php
    header_remove();
    if (!headers_sent()) {   foreach (headers_list() as $header)     header_remove        ($header); } 
    require("dUnzip2.inc.php");
    $Path = $_GET["path"];
    $save_to = $_GET["save_to"];
    $filename = $_GET["filename"];
    $zip_file = "$Path/$filename";
    $zip = new dUnzip2("$zip_file");
    $zip->debug = 0;
    $zip->unzipAll("$save_to");
    unlink("$Path/$filename");
    echo "$filename was uploaded and unpacked.";
    ?> 
```

我从脚本中得到的响应是：

```
HTTP/1.1 200 OK
Connection: close
Date: Thu, 19 Jul 2012 20:40:04 GMT
Server: Nginx / Varnish
Content-Length: 38
Content-Type: text/html
Client-Date: Thu, 19 Jul 2012 20:40:04 GMT
Client-Peer: 66.86.255.11:80
Client-Response-Num:

Foo.zip was uploaded and unpacked. 
```

我希望它只是：

```
Foo.zip was uploaded and unpacked. 
```

编辑：解决了我让它工作，我正在使用

```
 my $response = $ua->request($req)->as_string; 
```

当我应该使用

```
 my $response = $ua->request($req)->content; 
```

在我的 PERL 脚本中，谢谢，我正在查看所有内容，但需要查看的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:50:41.763

这些标头来自您的服务器，例如 HTTP 版本和状态代码是 HTTP 规范的一部分。在客户端，您可以通过阅读到第一个空行来跳过标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:46:54.367

做一个`if`，比如：

```
if ( strpos( 'Foo.zip was uploaded', $return) !== false ) {
    echo 'Foo.zip was uploaded and unpacked';
} 
```

# web-services - 使用加号登录自定义 Internet 媒体类型（MIME 类型）

> ID：11568985
> 
> 赞同：28
> 
> 时间：2012-07-19T20:43:18.843
> 
> 标签：web-services, http, rest, mime-types

我正在构建一个 RESTful Web 服务，并且正在创建一些自定义媒体类型。似乎在媒体类型中，当您使用“+”从右到左时，子类型变得更加具体。例如：

`application/json`比 更通用`application/hal+json`，因为[HAL](http://stateless.co/hal_specification.html)在 json 之上添加了更多限制。

我的问题是这是否是标准的，或者只是一个约定（我已经浏览了一些关于 MIME 类型的 RFC，但我找不到任何东西，但我可能还不够努力）。

如果它是标准的，它是否可以概括，以便我可以添加更具体的子类型，例如`application/vnd.custom.mime+hal+json`还是仅限于一个“+”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T07:19:28.070

现在在[http://trac.tools.ietf.org/html/draft-ietf-appsawg-media-type-regs-14#section-6](http://trac.tools.ietf.org/html/draft-ietf-appsawg-media-type-regs-14#section-6)中定义了注册新后缀的过程。

“+json”将在单独的文档中定义；现在：[http ://trac.tools.ietf.org/html/draft-ietf-appsawg-media-type-suffix-regs-02#section-3.1](http://trac.tools.ietf.org/html/draft-ietf-appsawg-media-type-suffix-regs-02#section-3.1)

不，你不应该在那里有多个子类型。

# wpf - 在 XAML 中引用嵌套属性

> ID：11568991
> 
> 赞同：1
> 
> 时间：2012-07-19T20:43:36.910
> 
> 标签：wpf, xaml, objectdataprovider, nested-properties

这个问题可能与[在 XAML 中创建嵌套类的实例](https://stackoverflow.com/questions/4269896/creating-an-instance-of-a-nested-class-in-xaml)重复。这个问题和相关的 MSDN 文档都与嵌套类型有关。在这个例子中，类型本身没有嵌套，但语法看起来很熟悉。我不知道这是否证明单独的问题和答案是合理的。

我想使用`ObjectDataProvider`. 我可以访问类型上的静态属性，但通过类型上的静态属性访问实例属性会导致编译错误。

例如，采取以下三个类。

```
public static class A
{
   static A()
   {
      BProperty = new B();
   }

   public static B BProperty { get; private set; }
}

public class B
{
   public B()
   {
      CProperty = new C();
   }

   public C CProperty { get; private set; }

   public string GetValue(string arg)
   {
      return arg + " from B";
   }
}

public class C
{
   public string GetValue(string arg)
   {
      return arg + " from C";
   }
} 
```

可以使用以下 XAML创建一个`ObjectDataProvider`for `BProperty`on 。`A`

```
<Window.Resources>
   <ObjectDataProvider x:Key="provider"
                       ObjectInstance="{x:Static Member=local:A.BProperty}"
                       MethodName="GetValue">
      <ObjectDataProvider.MethodParameters>
         <System:String>string argument</System:String>
      </ObjectDataProvider.MethodParameters>
   </ObjectDataProvider>
</Window.Resources>
<Grid>
   <Label Content="{Binding Source={StaticResource provider}}" />
</Grid> 
```

运行此代码会生成一个带有文本的标签：“来自 B 的字符串参数”。

如果我设置`provider`'s`ObjectInstance`或我收到编译错误`"{x:Static Member=local:A.BProperty.CProperty}"`。`"{x:Static Member=local:A.BProperty+CProperty}"`

我怎样才能访问`CProperty`的`A`实例？`BProperty``ObjectDataProvider`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:41:08.520

你能做的最好的事情是：

```
<Window.Resources>
    <ObjectDataProvider x:Key="provider"
                   ObjectType="{x:Type local:A}"
                   MethodName="GetCValue">
        <ObjectDataProvider.MethodParameters>
            <System:String>string argument</System:String>
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
</Window.Resources>

public class A
{
    public A()
    {
        BProperty = new B();
    }

    public B BProperty { get; private set; }

    public string GetCValue(string arg)
    {
        return BProperty.CProperty.GetValue(arg);
    }
}

public class B
{
    public B()
    {
        CProperty = new C();
    }

    public C CProperty { get; private set; }

    public string GetValue(string arg)
    {
        return arg + " from B";
    }
}

public class C
{
    public string GetValue(string arg)
    {
        return arg + " from C";
    }
} 
```

**鉴于ObjectDataProvider**的性质，我会在这种类型的实现中远离静态

 **如果您想使用分层对象，请考虑实现 MVVM 模式并在 ViewModel 中实现所有对象。

查看这篇文章以了解有关 ObjectDataProvider 的更多详细信息：http: [//msdn.microsoft.com/en-us/magazine/cc163299.aspx](http://msdn.microsoft.com/en-us/magazine/cc163299.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T21:05:17.577

分两步进行：

```
<Window.Resources>
   <ObjectDataProvider x:Key="providerOfC"
                       ObjectInstance="{x:Static Member=local:A.BProperty}"
                       MethodName="get_CProperty" />

   <ObjectDataProvider x:Key="provider"
                       ObjectInstance="{StaticResource providerOfC}"
                       MethodName="GetValue">
      <ObjectDataProvider.MethodParameters>
         <System:String>string argument</System:String>
      </ObjectDataProvider.MethodParameters>
   </ObjectDataProvider>
</Window.Resources>
<Grid>
   <Label Content="{Binding Source={StaticResource provider}}" />
</Grid> 
```

`providerOfC`让你尽可能`A.BProperty.CProperty`

`provider`然后调用`GetValue("string argument")`该实例。**

# ruby-on-rails-3 - 将 activerecord-reputation-system 查询与分页相结合

> ID：11568996
> 
> 赞同：3
> 
> 时间：2012-07-19T20:44:04.367
> 
> 标签：ruby-on-rails-3, activerecord, gem

我正在使用位于[https://github.com/twitter/activerecord-reputation-system](https://github.com/twitter/activerecord-reputation-system)的 activerecord-reputation-system gem 。在我的应用程序中，我有一些帖子，我想使用

`ActiveRecord::Base.find_with_reputation(:reputation_name, :scope, :find_options)`

宝石的方法。我也有足够多的帖子需要它们进行分页和搜索。但是，每当我调用通常在我的帖子集上工作的页面或搜索方法时，我都会得到一个方法不存在错误。我通常的收款电话看起来像这样

```
Post.all.text_search(params[:query]).order("created_at desc").page(params[:page]).per(20) 
```

我正在使用 Kaminari 进行分页。有谁知道如何将 find_with_reputation 方法与其他查询参数结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:58:48.423

就像一个普通的 Active Record finder 方法：

```
Post.page(params[:page]).per(20).find_with_reputation(:reputation_name, :scope, :find_options) 
```

例如，如果您的帖子有声望`votes`：

```
Post.page(params[:page]).per(20).find_with_reputation(:votes, :all, {:order => 'votes DESC, created_at DESC'}) 
```

这将找到按声誉、创建日期排序的帖子并对其进行分页。

您还可以在模型中为该查找器创建一个范围：

```
def self.most_voted
  find_with_reputation(:votes, :all, {:order => 'votes DESC'})
end 
```

然后使用：

```
Post.page(params[:page]).per(20).most_voted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T18:56:28.383

我找到了另一个解决方案： [使用 Active Record Reputation System gem，当我按投票排序时不会发生排序](https://stackoverflow.com/questions/22617224/using-active-record-reputation-system-gem-no-sorting-happens-when-i-sort-by-vot)

```
@posts = Post.page(params[:page]).reorder('votes desc').find_with_reputation(:votes, :all) 
```